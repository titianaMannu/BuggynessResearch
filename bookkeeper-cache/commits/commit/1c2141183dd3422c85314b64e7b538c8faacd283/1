{"sha":"1c2141183dd3422c85314b64e7b538c8faacd283","node_id":"MDY6Q29tbWl0MTU3NTk1NjoxYzIxNDExODNkZDM0MjJjODUzMTRiNjRlN2I1MzhjOGZhYWNkMjgz","commit":{"author":{"name":"Ivan Brendan Kelly","email":"ivank@apache.org","date":"2012-05-17T16:38:00Z"},"committer":{"name":"Ivan Brendan Kelly","email":"ivank@apache.org","date":"2012-05-17T16:38:00Z"},"message":"BOOKKEEPER-238: Add log4j.properties in conf/ for bin packages (ivank)\n\ngit-svn-id: https://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk@1339698 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"981084a43979b5f115ee5c110962faa5ffdbe0c2","url":"https://api.github.com/repos/apache/bookkeeper/git/trees/981084a43979b5f115ee5c110962faa5ffdbe0c2"},"url":"https://api.github.com/repos/apache/bookkeeper/git/commits/1c2141183dd3422c85314b64e7b538c8faacd283","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/bookkeeper/commits/1c2141183dd3422c85314b64e7b538c8faacd283","html_url":"https://github.com/apache/bookkeeper/commit/1c2141183dd3422c85314b64e7b538c8faacd283","comments_url":"https://api.github.com/repos/apache/bookkeeper/commits/1c2141183dd3422c85314b64e7b538c8faacd283/comments","author":{"login":"ivankelly","id":54955,"node_id":"MDQ6VXNlcjU0OTU1","avatar_url":"https://avatars.githubusercontent.com/u/54955?v=4","gravatar_id":"","url":"https://api.github.com/users/ivankelly","html_url":"https://github.com/ivankelly","followers_url":"https://api.github.com/users/ivankelly/followers","following_url":"https://api.github.com/users/ivankelly/following{/other_user}","gists_url":"https://api.github.com/users/ivankelly/gists{/gist_id}","starred_url":"https://api.github.com/users/ivankelly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivankelly/subscriptions","organizations_url":"https://api.github.com/users/ivankelly/orgs","repos_url":"https://api.github.com/users/ivankelly/repos","events_url":"https://api.github.com/users/ivankelly/events{/privacy}","received_events_url":"https://api.github.com/users/ivankelly/received_events","type":"User","site_admin":false},"committer":{"login":"ivankelly","id":54955,"node_id":"MDQ6VXNlcjU0OTU1","avatar_url":"https://avatars.githubusercontent.com/u/54955?v=4","gravatar_id":"","url":"https://api.github.com/users/ivankelly","html_url":"https://github.com/ivankelly","followers_url":"https://api.github.com/users/ivankelly/followers","following_url":"https://api.github.com/users/ivankelly/following{/other_user}","gists_url":"https://api.github.com/users/ivankelly/gists{/gist_id}","starred_url":"https://api.github.com/users/ivankelly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivankelly/subscriptions","organizations_url":"https://api.github.com/users/ivankelly/orgs","repos_url":"https://api.github.com/users/ivankelly/repos","events_url":"https://api.github.com/users/ivankelly/events{/privacy}","received_events_url":"https://api.github.com/users/ivankelly/received_events","type":"User","site_admin":false},"parents":[{"sha":"73dc3481846fdc0c97944c6a7c6ce0cef17ee938","url":"https://api.github.com/repos/apache/bookkeeper/commits/73dc3481846fdc0c97944c6a7c6ce0cef17ee938","html_url":"https://github.com/apache/bookkeeper/commit/73dc3481846fdc0c97944c6a7c6ce0cef17ee938"}],"stats":{"total":193,"additions":186,"deletions":7},"files":[{"sha":"76c13b0046ca8f1098f72afdfd367371443b493a","filename":"CHANGES.txt","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/apache/bookkeeper/blob/1c2141183dd3422c85314b64e7b538c8faacd283/CHANGES.txt","raw_url":"https://github.com/apache/bookkeeper/raw/1c2141183dd3422c85314b64e7b538c8faacd283/CHANGES.txt","contents_url":"https://api.github.com/repos/apache/bookkeeper/contents/CHANGES.txt?ref=1c2141183dd3422c85314b64e7b538c8faacd283","patch":"@@ -16,6 +16,8 @@ Trunk (unreleased changes)\n \n       BOOKKEEPER-72: Fix warnings issued by FindBugs (ivank)\n \n+      BOOKKEEPER-238: Add log4j.properties in conf/ for bin packages (ivank)\n+\n       bookkeeper-server/\n \n         BOOKKEEPER-142: Parsing last log id is wrong, which may make entry log files overwritten (Sijie Gou via ivank)"},{"sha":"1f6ef0e99442bb98aeefa6729a5a6658479f37ba","filename":"bookkeeper-server/bin/bookkeeper","status":"modified","additions":8,"deletions":3,"changes":11,"blob_url":"https://github.com/apache/bookkeeper/blob/1c2141183dd3422c85314b64e7b538c8faacd283/bookkeeper-server/bin/bookkeeper","raw_url":"https://github.com/apache/bookkeeper/raw/1c2141183dd3422c85314b64e7b538c8faacd283/bookkeeper-server/bin/bookkeeper","contents_url":"https://api.github.com/repos/apache/bookkeeper/contents/bookkeeper-server/bin/bookkeeper?ref=1c2141183dd3422c85314b64e7b538c8faacd283","patch":"@@ -33,6 +33,7 @@ BINDIR=`dirname \"$0\"`\n BK_HOME=`cd $BINDIR/..;pwd`\n \n DEFAULT_CONF=$BK_HOME/conf/bk_server.conf\n+DEFAULT_LOG_CONF=$BK_HOME/conf/log4j.properties\n \n source $BK_HOME/conf/bkenv.sh\n \n@@ -62,8 +63,8 @@ where command is one of:\n or command is the full name of a class with a defined main() method.\n \n Environment variables:\n-   BOOKIE_LOG_CONF        Log4j configuration file\n-   BOOKIE_CONF            Configuration file (default: conf/bk_server.conf)\n+   BOOKIE_LOG_CONF        Log4j configuration file (default $DEFAULT_LOG_CONF)\n+   BOOKIE_CONF            Configuration file (default: $DEFAULT_CONF)\n    BOOKIE_EXTRA_OPTS      Extra options to be passed to the jvm\n    BOOKIE_EXTRA_CLASSPATH Add extra paths to the bookkeeper classpath\n \n@@ -106,10 +107,14 @@ fi\n COMMAND=$1\n shift\n \n-if [ \"$BOOKIE_CONF\" == \"\" ]; then\n+if [ -z \"$BOOKIE_CONF\" ]; then\n     BOOKIE_CONF=$DEFAULT_CONF\n fi\n \n+if [ -z \"$BOOKIE_LOG_CONF\" ]; then\n+    BOOKIE_LOG_CONF=$DEFAULT_LOG_CONF\n+fi\n+\n BOOKIE_CLASSPATH=\"$BOOKIE_JAR:$BOOKIE_CLASSPATH:$BOOKIE_EXTRA_CLASSPATH\"\n if [ \"$BOOKIE_LOG_CONF\" != \"\" ]; then\n     BOOKIE_CLASSPATH=\"`dirname $BOOKIE_LOG_CONF`:$BOOKIE_CLASSPATH\""},{"sha":"4e60cdefe41da09cfd3745d09f52367614068530","filename":"bookkeeper-server/conf/bkenv.sh","status":"modified","additions":9,"deletions":0,"changes":9,"blob_url":"https://github.com/apache/bookkeeper/blob/1c2141183dd3422c85314b64e7b538c8faacd283/bookkeeper-server/conf/bkenv.sh","raw_url":"https://github.com/apache/bookkeeper/raw/1c2141183dd3422c85314b64e7b538c8faacd283/bookkeeper-server/conf/bkenv.sh","contents_url":"https://api.github.com/repos/apache/bookkeeper/contents/bookkeeper-server/conf/bkenv.sh?ref=1c2141183dd3422c85314b64e7b538c8faacd283","patch":"@@ -24,3 +24,12 @@\n \n # Configuration file of settings used in bookie server\n # BOOKIE_CONF=\n+\n+# Log4j configuration file\n+# BOOKIE_LOG_CONF=\n+\n+# Extra options to be passed to the jvm\n+# BOOKIE_EXTRA_OPTS=\n+\n+# Add extra paths to the bookkeeper classpath\n+# BOOKIE_EXTRA_CLASSPATH="},{"sha":"79157db1776850d0e5bde2652363590b334b5555","filename":"bookkeeper-server/conf/log4j.properties","status":"added","additions":72,"deletions":0,"changes":72,"blob_url":"https://github.com/apache/bookkeeper/blob/1c2141183dd3422c85314b64e7b538c8faacd283/bookkeeper-server/conf/log4j.properties","raw_url":"https://github.com/apache/bookkeeper/raw/1c2141183dd3422c85314b64e7b538c8faacd283/bookkeeper-server/conf/log4j.properties","contents_url":"https://api.github.com/repos/apache/bookkeeper/contents/bookkeeper-server/conf/log4j.properties?ref=1c2141183dd3422c85314b64e7b538c8faacd283","patch":"@@ -0,0 +1,72 @@\n+#\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+#\n+#\n+\n+#\n+# Hedwig Logging Configuration\n+#\n+\n+# Format is \"<default threshold> (, <appender>)+\n+\n+# DEFAULT: console appender only\n+log4j.rootLogger=WARN, CONSOLE\n+\n+# Example with rolling log file\n+#log4j.rootLogger=DEBUG, CONSOLE, ROLLINGFILE\n+\n+# Example with rolling log file and tracing\n+#log4j.rootLogger=TRACE, CONSOLE, ROLLINGFILE, TRACEFILE\n+\n+#\n+# Log INFO level and above messages to the console\n+#\n+log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender\n+log4j.appender.CONSOLE.Threshold=INFO\n+log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout\n+log4j.appender.CONSOLE.layout.ConversionPattern=%d{ISO8601} - %-5p - [%t:%C{1}@%L] - %m%n\n+\n+#\n+# Add ROLLINGFILE to rootLogger to get log file output\n+#    Log DEBUG level and above messages to a log file\n+log4j.appender.ROLLINGFILE=org.apache.log4j.DailyRollingFileAppender\n+log4j.appender.ROLLINGFILE.Threshold=INFO\n+log4j.appender.ROLLINGFILE.File=bookkeeper-server.log\n+log4j.appender.ROLLINGFILE.layout=org.apache.log4j.PatternLayout\n+log4j.appender.ROLLINGFILE.layout.ConversionPattern=%d{ISO8601} - %-5p - [%t:%C{1}@%L] - %m%n\n+\n+# Max log file size of 10MB\n+log4j.appender.ROLLINGFILE.MaxFileSize=10MB\n+# uncomment the next line to limit number of backup files\n+#log4j.appender.ROLLINGFILE.MaxBackupIndex=10\n+\n+log4j.appender.ROLLINGFILE.layout=org.apache.log4j.PatternLayout\n+log4j.appender.ROLLINGFILE.layout.ConversionPattern=%d{ISO8601} - %-5p [%t:%C{1}@%L] - %m%n\n+\n+\n+#\n+# Add TRACEFILE to rootLogger to get log file output\n+#    Log DEBUG level and above messages to a log file\n+log4j.appender.TRACEFILE=org.apache.log4j.FileAppender\n+log4j.appender.TRACEFILE.Threshold=TRACE\n+log4j.appender.TRACEFILE.File=bookkeeper-trace.log\n+\n+log4j.appender.TRACEFILE.layout=org.apache.log4j.PatternLayout\n+### Notice we are including log4j's NDC here (%x)\n+log4j.appender.TRACEFILE.layout.ConversionPattern=%d{ISO8601} - %-5p [%t:%C{1}@%L][%x] - %m%n"},{"sha":"0953656b7cf8a3f87d7f1c56ef457f69a4867162","filename":"hedwig-server/bin/hedwig","status":"modified","additions":8,"deletions":3,"changes":11,"blob_url":"https://github.com/apache/bookkeeper/blob/1c2141183dd3422c85314b64e7b538c8faacd283/hedwig-server/bin/hedwig","raw_url":"https://github.com/apache/bookkeeper/raw/1c2141183dd3422c85314b64e7b538c8faacd283/hedwig-server/bin/hedwig","contents_url":"https://api.github.com/repos/apache/bookkeeper/contents/hedwig-server/bin/hedwig?ref=1c2141183dd3422c85314b64e7b538c8faacd283","patch":"@@ -33,6 +33,7 @@ BINDIR=`dirname \"$0\"`\n HW_HOME=`cd $BINDIR/..;pwd`\n \n DEFAULT_CONF=$HW_HOME/conf/hw_server.conf\n+DEFAULT_LOG_CONF=$HW_HOME/conf/log4j.properties\n \n . $HW_HOME/conf/hwenv.sh\n \n@@ -88,10 +89,10 @@ or command is the full name of a class with a defined main() method.\n Environment variables:\n    HEDWIG_SERVER_CONF           Hedwig server configuration file (default $DEFAULT_CONF)\n    HEDWIG_CONSOLE_SERVER_CONF   Server part configuration for hedwig console,\n-                                used for metadata management (default it is same as HEDWIG_SERVER_CONF)\n+                                used for metadata management (defaults to HEDWIG_SERVER_CONF)\n    HEDWIG_CONSOLE_CLIENT_CONF   Client part configuration for hedwig console,\n                                 used for interacting with hub server.\n-   HEDWIG_LOG_CONF              Log4j configuration file\n+   HEDWIG_LOG_CONF              Log4j configuration file (default $DEFAULT_LOG_CONF)\n    HEDWIG_EXTRA_OPTS            Extra options to be passed to the jvm\n \n These variable can also be set in conf/hwenv.sh\n@@ -108,10 +109,14 @@ fi\n COMMAND=$1\n shift\n \n-if [ \"$HEDWIG_SERVER_CONF\" == \"\" ]; then\n+if [ -z \"$HEDWIG_SERVER_CONF\" ]; then\n     HEDWIG_SERVER_CONF=$DEFAULT_CONF;\n fi\n \n+if [ -z \"$HEDWIG_LOG_CONF\" ]; then\n+    HEDWIG_LOG_CONF=$DEFAULT_LOG_CONF\n+fi\n+\n HEDWIG_CLASSPATH=\"$HEDWIG_JAR:$HEDWIG_CLASSPATH\"\n \n if [ \"$HEDWIG_LOG_CONF\" != \"\" ]; then"},{"sha":"256ada685dd79a1f6a5cef2e3d72201aa7ec6e1b","filename":"hedwig-server/conf/hwenv.sh","status":"modified","additions":15,"deletions":1,"changes":16,"blob_url":"https://github.com/apache/bookkeeper/blob/1c2141183dd3422c85314b64e7b538c8faacd283/hedwig-server/conf/hwenv.sh","raw_url":"https://github.com/apache/bookkeeper/raw/1c2141183dd3422c85314b64e7b538c8faacd283/hedwig-server/conf/hwenv.sh","contents_url":"https://api.github.com/repos/apache/bookkeeper/contents/hedwig-server/conf/hwenv.sh?ref=1c2141183dd3422c85314b64e7b538c8faacd283","patch":"@@ -21,4 +21,18 @@\n # */\n \n # default settings for starting hedwig\n-#HEDWIG_SERVER_CONF=\n\\ No newline at end of file\n+#HEDWIG_SERVER_CONF=\n+\n+# Server part configuration for hedwig console,\n+# used for metadata management\n+# HEDWIG_CONSOLE_SERVER_CONF=\n+\n+# Client part configuration for hedwig console,\n+# used for interacting with hub server.\n+# HEDWIG_CONSOLE_CLIENT_CONF=\n+\n+# Log4j configuration file\n+# HEDWIG_LOG_CONF=\n+\n+# Extra options to be passed to the jvm\n+# HEDWIG_EXTRA_OPTS="},{"sha":"bc9b38121050330ba720e54d392d36c883c9bd3f","filename":"hedwig-server/conf/log4j.properties","status":"added","additions":72,"deletions":0,"changes":72,"blob_url":"https://github.com/apache/bookkeeper/blob/1c2141183dd3422c85314b64e7b538c8faacd283/hedwig-server/conf/log4j.properties","raw_url":"https://github.com/apache/bookkeeper/raw/1c2141183dd3422c85314b64e7b538c8faacd283/hedwig-server/conf/log4j.properties","contents_url":"https://api.github.com/repos/apache/bookkeeper/contents/hedwig-server/conf/log4j.properties?ref=1c2141183dd3422c85314b64e7b538c8faacd283","patch":"@@ -0,0 +1,72 @@\n+#\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+#\n+#\n+\n+#\n+# Hedwig Logging Configuration\n+#\n+\n+# Format is \"<default threshold> (, <appender>)+\n+\n+# DEFAULT: console appender only\n+log4j.rootLogger=WARN, CONSOLE\n+\n+# Example with rolling log file\n+#log4j.rootLogger=DEBUG, CONSOLE, ROLLINGFILE\n+\n+# Example with rolling log file and tracing\n+#log4j.rootLogger=TRACE, CONSOLE, ROLLINGFILE, TRACEFILE\n+\n+#\n+# Log INFO level and above messages to the console\n+#\n+log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender\n+log4j.appender.CONSOLE.Threshold=INFO\n+log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout\n+log4j.appender.CONSOLE.layout.ConversionPattern=%d{ISO8601} - %-5p - [%t:%C{1}@%L] - %m%n\n+\n+#\n+# Add ROLLINGFILE to rootLogger to get log file output\n+#    Log DEBUG level and above messages to a log file\n+log4j.appender.ROLLINGFILE=org.apache.log4j.DailyRollingFileAppender\n+log4j.appender.ROLLINGFILE.Threshold=INFO\n+log4j.appender.ROLLINGFILE.File=hedwig-server.log\n+log4j.appender.ROLLINGFILE.layout=org.apache.log4j.PatternLayout\n+log4j.appender.ROLLINGFILE.layout.ConversionPattern=%d{ISO8601} - %-5p - [%t:%C{1}@%L] - %m%n\n+\n+# Max log file size of 10MB\n+log4j.appender.ROLLINGFILE.MaxFileSize=10MB\n+# uncomment the next line to limit number of backup files\n+#log4j.appender.ROLLINGFILE.MaxBackupIndex=10\n+\n+log4j.appender.ROLLINGFILE.layout=org.apache.log4j.PatternLayout\n+log4j.appender.ROLLINGFILE.layout.ConversionPattern=%d{ISO8601} - %-5p [%t:%C{1}@%L] - %m%n\n+\n+\n+#\n+# Add TRACEFILE to rootLogger to get log file output\n+#    Log DEBUG level and above messages to a log file\n+log4j.appender.TRACEFILE=org.apache.log4j.FileAppender\n+log4j.appender.TRACEFILE.Threshold=TRACE\n+log4j.appender.TRACEFILE.File=hedwig-trace.log\n+\n+log4j.appender.TRACEFILE.layout=org.apache.log4j.PatternLayout\n+### Notice we are including log4j's NDC here (%x)\n+log4j.appender.TRACEFILE.layout.ConversionPattern=%d{ISO8601} - %-5p [%t:%C{1}@%L][%x] - %m%n"}]}

