{"sha":"3bc2bdb0d0f38b004fa95a58e8b02104005c663b","node_id":"MDY6Q29tbWl0MTU3NTk1NjozYmMyYmRiMGQwZjM4YjAwNGZhOTVhNThlOGIwMjEwNDAwNWM2NjNi","commit":{"author":{"name":"Ivan Brendan Kelly","email":"ivank@apache.org","date":"2011-11-30T15:42:14Z"},"committer":{"name":"Ivan Brendan Kelly","email":"ivank@apache.org","date":"2011-11-30T15:42:14Z"},"message":"BOOKKEEPER-66: use IPv4 for builds (mmorel via ivank)\n\ngit-svn-id: https://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk@1208472 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"d7b0aa7171f6dc6fe795c42180147f6fa8059070","url":"https://api.github.com/repos/apache/bookkeeper/git/trees/d7b0aa7171f6dc6fe795c42180147f6fa8059070"},"url":"https://api.github.com/repos/apache/bookkeeper/git/commits/3bc2bdb0d0f38b004fa95a58e8b02104005c663b","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/bookkeeper/commits/3bc2bdb0d0f38b004fa95a58e8b02104005c663b","html_url":"https://github.com/apache/bookkeeper/commit/3bc2bdb0d0f38b004fa95a58e8b02104005c663b","comments_url":"https://api.github.com/repos/apache/bookkeeper/commits/3bc2bdb0d0f38b004fa95a58e8b02104005c663b/comments","author":{"login":"ivankelly","id":54955,"node_id":"MDQ6VXNlcjU0OTU1","avatar_url":"https://avatars.githubusercontent.com/u/54955?v=4","gravatar_id":"","url":"https://api.github.com/users/ivankelly","html_url":"https://github.com/ivankelly","followers_url":"https://api.github.com/users/ivankelly/followers","following_url":"https://api.github.com/users/ivankelly/following{/other_user}","gists_url":"https://api.github.com/users/ivankelly/gists{/gist_id}","starred_url":"https://api.github.com/users/ivankelly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivankelly/subscriptions","organizations_url":"https://api.github.com/users/ivankelly/orgs","repos_url":"https://api.github.com/users/ivankelly/repos","events_url":"https://api.github.com/users/ivankelly/events{/privacy}","received_events_url":"https://api.github.com/users/ivankelly/received_events","type":"User","site_admin":false},"committer":{"login":"ivankelly","id":54955,"node_id":"MDQ6VXNlcjU0OTU1","avatar_url":"https://avatars.githubusercontent.com/u/54955?v=4","gravatar_id":"","url":"https://api.github.com/users/ivankelly","html_url":"https://github.com/ivankelly","followers_url":"https://api.github.com/users/ivankelly/followers","following_url":"https://api.github.com/users/ivankelly/following{/other_user}","gists_url":"https://api.github.com/users/ivankelly/gists{/gist_id}","starred_url":"https://api.github.com/users/ivankelly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivankelly/subscriptions","organizations_url":"https://api.github.com/users/ivankelly/orgs","repos_url":"https://api.github.com/users/ivankelly/repos","events_url":"https://api.github.com/users/ivankelly/events{/privacy}","received_events_url":"https://api.github.com/users/ivankelly/received_events","type":"User","site_admin":false},"parents":[{"sha":"9794cc0c6d8531c1a6540db660e55add2469d019","url":"https://api.github.com/repos/apache/bookkeeper/commits/9794cc0c6d8531c1a6540db660e55add2469d019","html_url":"https://github.com/apache/bookkeeper/commit/9794cc0c6d8531c1a6540db660e55add2469d019"}],"stats":{"total":29,"additions":29,"deletions":0},"files":[{"sha":"81ebe1d9c55f566ff552de33cd0fa792a94efdeb","filename":"CHANGES.txt","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/apache/bookkeeper/blob/3bc2bdb0d0f38b004fa95a58e8b02104005c663b/CHANGES.txt","raw_url":"https://github.com/apache/bookkeeper/raw/3bc2bdb0d0f38b004fa95a58e8b02104005c663b/CHANGES.txt","contents_url":"https://api.github.com/repos/apache/bookkeeper/contents/CHANGES.txt?ref=3bc2bdb0d0f38b004fa95a58e8b02104005c663b","patch":"@@ -39,6 +39,8 @@ Release 4.0.0 - 2011-11-30\n       BOOKKEEPER-122: Review BookKeeper server documentation (fpj & ivank)\n  \n       BOOKKEEPER-130: Add developer KEYS file to svn (ivank)\n+      \n+      BOOKKEEPER-66: use IPv4 for builds (mmorel via ivank)\n \n       bookkeeper-server/\n "},{"sha":"b0629bd429461b93a72bacbd261acbbd5fe14061","filename":"bookkeeper-server/bin/bookkeeper","status":"modified","additions":12,"deletions":0,"changes":12,"blob_url":"https://github.com/apache/bookkeeper/blob/3bc2bdb0d0f38b004fa95a58e8b02104005c663b/bookkeeper-server/bin/bookkeeper","raw_url":"https://github.com/apache/bookkeeper/raw/3bc2bdb0d0f38b004fa95a58e8b02104005c663b/bookkeeper-server/bin/bookkeeper","contents_url":"https://api.github.com/repos/apache/bookkeeper/contents/bookkeeper-server/bin/bookkeeper?ref=3bc2bdb0d0f38b004fa95a58e8b02104005c663b","patch":"@@ -20,6 +20,15 @@\n # * limitations under the License.\n # */\n \n+# check if net.ipv6.bindv6only is set to 1\n+bindv6only=$(/sbin/sysctl -n net.ipv6.bindv6only 2> /dev/null)\n+if [ -n \"$bindv6only\" ] && [ \"$bindv6only\" -eq \"1\" ]\n+then\n+  echo \"Error: \\\"net.ipv6.bindv6only\\\" is set to 1 - Java networking could be broken\"\n+  echo \"For more info (the following page also applies to bookkeeper): http://wiki.apache.org/hadoop/HadoopIPv6\"\n+  exit 1\n+fi\n+\n BINDIR=`dirname \"$0\"`\n BK_HOME=`cd $BINDIR/..;pwd`\n \n@@ -108,6 +117,9 @@ OPTS=\"-cp $BOOKIE_CLASSPATH $OPTS $BOOKIE_EXTRA_OPTS\"\n \n OPTS=\"$OPTS $BOOKIE_EXTRA_OPTS\"\n \n+# Disable ipv6 as it can cause issues\n+OPTS=\"$OPTS -Djava.net.preferIPv4Stack=true\"\n+\n if [ $COMMAND == \"bookie\" ]; then\n     exec java $OPTS org.apache.bookkeeper.proto.BookieServer --conf $BOOKIE_CONF $@\n elif [ $COMMAND == \"localbookie\" ]; then"},{"sha":"04014110cc01d5159949b03161aedc81ee3c2e26","filename":"hedwig-server/bin/hedwig","status":"modified","additions":12,"deletions":0,"changes":12,"blob_url":"https://github.com/apache/bookkeeper/blob/3bc2bdb0d0f38b004fa95a58e8b02104005c663b/hedwig-server/bin/hedwig","raw_url":"https://github.com/apache/bookkeeper/raw/3bc2bdb0d0f38b004fa95a58e8b02104005c663b/hedwig-server/bin/hedwig","contents_url":"https://api.github.com/repos/apache/bookkeeper/contents/hedwig-server/bin/hedwig?ref=3bc2bdb0d0f38b004fa95a58e8b02104005c663b","patch":"@@ -20,6 +20,15 @@\n # * limitations under the License.\n # */\n \n+# check if net.ipv6.bindv6only is set to 1\n+bindv6only=$(/sbin/sysctl -n net.ipv6.bindv6only 2> /dev/null)\n+if [ -n \"$bindv6only\" ] && [ \"$bindv6only\" -eq \"1\" ]\n+then\n+  echo \"Error: \\\"net.ipv6.bindv6only\\\" is set to 1 - Java networking could be broken\"\n+  echo \"For more info (the following page also applies to hedwig): http://wiki.apache.org/hadoop/HadoopIPv6\"\n+  exit 1\n+fi\n+\n BINDIR=`dirname \"$0\"`\n HW_HOME=`cd $BINDIR/..;pwd`\n \n@@ -104,6 +113,9 @@ if [ \"$HEDWIG_LOG_CONF\" != \"\" ]; then\n fi\n OPTS=\"-cp $HEDWIG_CLASSPATH $OPTS $HEDWIG_EXTRA_OPTS\"\n \n+# Disable ipv6 as it can cause issues\n+OPTS=\"$OPTS -Djava.net.preferIPv4Stack=true\"\n+\n if [ $COMMAND == \"server\" ]; then\n     exec java $OPTS org.apache.hedwig.server.netty.PubSubServer $HEDWIG_SERVER_CONF $@\n elif [ $COMMAND == \"help\" ]; then"},{"sha":"fb32f5cef8111cf52506b7a75d2a3c9840f4ce03","filename":"pom.xml","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/apache/bookkeeper/blob/3bc2bdb0d0f38b004fa95a58e8b02104005c663b/pom.xml","raw_url":"https://github.com/apache/bookkeeper/raw/3bc2bdb0d0f38b004fa95a58e8b02104005c663b/pom.xml","contents_url":"https://api.github.com/repos/apache/bookkeeper/contents/pom.xml?ref=3bc2bdb0d0f38b004fa95a58e8b02104005c663b","patch":"@@ -56,6 +56,9 @@\n         <groupId>org.apache.maven.plugins</groupId>\n         <artifactId>maven-surefire-plugin</artifactId>\n         <version>2.9</version>\n+        <configuration>\n+          <argLine>-Djava.net.preferIPv4Stack=true</argLine>\n+        </configuration>\n       </plugin>\n       <plugin>\n         <groupId>org.apache.maven.plugins</groupId>"}]}

