{"sha":"863f32a8ed33a5be3c9c622fb1c701bf3b48a2e0","node_id":"MDY6Q29tbWl0MTU3NTk1Njo4NjNmMzJhOGVkMzNhNWJlM2M5YzYyMmZiMWM3MDFiZjNiNDhhMmUw","commit":{"author":{"name":"Ivan Brendan Kelly","email":"ivank@apache.org","date":"2012-06-12T15:37:57Z"},"committer":{"name":"Ivan Brendan Kelly","email":"ivank@apache.org","date":"2012-06-12T15:37:57Z"},"message":"BOOKKEEPER-289: mvn clean doesn't remove test output files (sijie via ivank)\n\ngit-svn-id: https://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk@1349400 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"db51fe34f0044867e58acef51a3e18b49a630885","url":"https://api.github.com/repos/apache/bookkeeper/git/trees/db51fe34f0044867e58acef51a3e18b49a630885"},"url":"https://api.github.com/repos/apache/bookkeeper/git/commits/863f32a8ed33a5be3c9c622fb1c701bf3b48a2e0","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/bookkeeper/commits/863f32a8ed33a5be3c9c622fb1c701bf3b48a2e0","html_url":"https://github.com/apache/bookkeeper/commit/863f32a8ed33a5be3c9c622fb1c701bf3b48a2e0","comments_url":"https://api.github.com/repos/apache/bookkeeper/commits/863f32a8ed33a5be3c9c622fb1c701bf3b48a2e0/comments","author":{"login":"ivankelly","id":54955,"node_id":"MDQ6VXNlcjU0OTU1","avatar_url":"https://avatars.githubusercontent.com/u/54955?v=4","gravatar_id":"","url":"https://api.github.com/users/ivankelly","html_url":"https://github.com/ivankelly","followers_url":"https://api.github.com/users/ivankelly/followers","following_url":"https://api.github.com/users/ivankelly/following{/other_user}","gists_url":"https://api.github.com/users/ivankelly/gists{/gist_id}","starred_url":"https://api.github.com/users/ivankelly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivankelly/subscriptions","organizations_url":"https://api.github.com/users/ivankelly/orgs","repos_url":"https://api.github.com/users/ivankelly/repos","events_url":"https://api.github.com/users/ivankelly/events{/privacy}","received_events_url":"https://api.github.com/users/ivankelly/received_events","type":"User","site_admin":false},"committer":{"login":"ivankelly","id":54955,"node_id":"MDQ6VXNlcjU0OTU1","avatar_url":"https://avatars.githubusercontent.com/u/54955?v=4","gravatar_id":"","url":"https://api.github.com/users/ivankelly","html_url":"https://github.com/ivankelly","followers_url":"https://api.github.com/users/ivankelly/followers","following_url":"https://api.github.com/users/ivankelly/following{/other_user}","gists_url":"https://api.github.com/users/ivankelly/gists{/gist_id}","starred_url":"https://api.github.com/users/ivankelly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivankelly/subscriptions","organizations_url":"https://api.github.com/users/ivankelly/orgs","repos_url":"https://api.github.com/users/ivankelly/repos","events_url":"https://api.github.com/users/ivankelly/events{/privacy}","received_events_url":"https://api.github.com/users/ivankelly/received_events","type":"User","site_admin":false},"parents":[{"sha":"2f5024bbc720f2159efa67eed7a9f21d208a134b","url":"https://api.github.com/repos/apache/bookkeeper/commits/2f5024bbc720f2159efa67eed7a9f21d208a134b","html_url":"https://github.com/apache/bookkeeper/commit/2f5024bbc720f2159efa67eed7a9f21d208a134b"}],"stats":{"total":44,"additions":27,"deletions":17},"files":[{"sha":"84cedfd09ea40baf1a7aafb84c4b47e157472fb2","filename":"CHANGES.txt","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/apache/bookkeeper/blob/863f32a8ed33a5be3c9c622fb1c701bf3b48a2e0/CHANGES.txt","raw_url":"https://github.com/apache/bookkeeper/raw/863f32a8ed33a5be3c9c622fb1c701bf3b48a2e0/CHANGES.txt","contents_url":"https://api.github.com/repos/apache/bookkeeper/contents/CHANGES.txt?ref=863f32a8ed33a5be3c9c622fb1c701bf3b48a2e0","patch":"@@ -10,6 +10,8 @@ Trunk (unreleased changes)\n \n     BUGFIXES:\n \n+      BOOKKEEPER-289: mvn clean doesn't remove test output files (sijie via ivank)\n+\n     IMPROVEMENTS:\n \n Release 4.1.0 - 2012-06-07"},{"sha":"ce95f3e01c37a269dc715e75be7e7b0bd6c38c25","filename":"bookkeeper-benchmark/pom.xml","status":"modified","additions":10,"deletions":0,"changes":10,"blob_url":"https://github.com/apache/bookkeeper/blob/863f32a8ed33a5be3c9c622fb1c701bf3b48a2e0/bookkeeper-benchmark/pom.xml","raw_url":"https://github.com/apache/bookkeeper/raw/863f32a8ed33a5be3c9c622fb1c701bf3b48a2e0/bookkeeper-benchmark/pom.xml","contents_url":"https://api.github.com/repos/apache/bookkeeper/contents/bookkeeper-benchmark/pom.xml?ref=863f32a8ed33a5be3c9c622fb1c701bf3b48a2e0","patch":"@@ -40,6 +40,16 @@\n \t  <skipAssembly>true</skipAssembly>\n         </configuration>\n       </plugin>\n+      <plugin>\n+      \t<groupId>org.apache.maven.plugins</groupId>\n+\t<artifactId>maven-surefire-plugin</artifactId>\n+\t<version>2.9</version>\n+\t<configuration>\n+          <systemPropertyVariables>\n+            <test.latency.file>target/latencyDump.dat</test.latency.file>\n+          </systemPropertyVariables>\n+\t</configuration>\n+      </plugin>\n     </plugins>\n   </build>\n   <dependencies>"},{"sha":"b37de5333a746367db6783da695eb580e3cf14bd","filename":"bookkeeper-benchmark/src/main/java/org/apache/bookkeeper/benchmark/BenchThroughputLatency.java","status":"modified","additions":6,"deletions":2,"changes":8,"blob_url":"https://github.com/apache/bookkeeper/blob/863f32a8ed33a5be3c9c622fb1c701bf3b48a2e0/bookkeeper-benchmark/src/main/java/org/apache/bookkeeper/benchmark/BenchThroughputLatency.java","raw_url":"https://github.com/apache/bookkeeper/raw/863f32a8ed33a5be3c9c622fb1c701bf3b48a2e0/bookkeeper-benchmark/src/main/java/org/apache/bookkeeper/benchmark/BenchThroughputLatency.java","contents_url":"https://api.github.com/repos/apache/bookkeeper/contents/bookkeeper-benchmark/src/main/java/org/apache/bookkeeper/benchmark/BenchThroughputLatency.java?ref=863f32a8ed33a5be3c9c622fb1c701bf3b48a2e0","patch":"@@ -242,6 +242,7 @@ public static void main(String[] args)\n         options.addOption(\"sockettimeout\", true, \"Socket timeout for bookkeeper client. In seconds. Default 5\");\n         options.addOption(\"skipwarmup\", false, \"Skip warm up, default false\");\n         options.addOption(\"sendlimit\", true, \"Max number of entries to send. Default 20000000\");\n+        options.addOption(\"latencyFile\", true, \"File to dump latencies. Default is latencyDump.dat\");\n         options.addOption(\"help\", false, \"This message\");\n \n         CommandLineParser parser = new PosixParser();\n@@ -268,6 +269,8 @@ public static void main(String[] args)\n         String coordinationZnode = cmd.getOptionValue(\"coordnode\");\n         final byte[] passwd = cmd.getOptionValue(\"password\", \"benchPasswd\").getBytes();\n \n+        String latencyFile = cmd.getOptionValue(\"latencyFile\", \"latencyDump.dat\");\n+\n         Timer timeouter = new Timer();\n         if (cmd.hasOption(\"timeout\")) {\n             final long timeout = Long.valueOf(cmd.getOptionValue(\"timeout\", \"360\")) * 1000;\n@@ -285,7 +288,8 @@ public void run() {\n                 \", quorum size: \" + quorum +\n                 \", throttle: \" + throttle +\n                 \", number of ledgers: \" + ledgers +\n-                \", zk servers: \" + servers);\n+                \", zk servers: \" + servers +\n+                \", latency file: \" + latencyFile);\n \n         long totalTime = runningTime*1000;\n \n@@ -380,7 +384,7 @@ public void process(WatchedEvent event) {\n         }\n \n         // dump the latencies for later debugging (it will be sorted by entryid)\n-        OutputStream fos = new BufferedOutputStream(new FileOutputStream(\"latencyDump.dat\"));\n+        OutputStream fos = new BufferedOutputStream(new FileOutputStream(latencyFile));\n \n         for(Long l: latency) {\n             fos.write((Long.toString(l)+\"\\t\"+(l/1000000)+ \"ms\\n\").getBytes());"},{"sha":"661e686d1df633bd954742c74c5ec0de90d2210d","filename":"bookkeeper-benchmark/src/test/java/org/apache/bookkeeper/benchmark/TestBenchmark.java","status":"modified","additions":4,"deletions":2,"changes":6,"blob_url":"https://github.com/apache/bookkeeper/blob/863f32a8ed33a5be3c9c622fb1c701bf3b48a2e0/bookkeeper-benchmark/src/test/java/org/apache/bookkeeper/benchmark/TestBenchmark.java","raw_url":"https://github.com/apache/bookkeeper/raw/863f32a8ed33a5be3c9c622fb1c701bf3b48a2e0/bookkeeper-benchmark/src/test/java/org/apache/bookkeeper/benchmark/TestBenchmark.java","contents_url":"https://api.github.com/repos/apache/bookkeeper/contents/bookkeeper-benchmark/src/test/java/org/apache/bookkeeper/benchmark/TestBenchmark.java?ref=863f32a8ed33a5be3c9c622fb1c701bf3b48a2e0","patch":"@@ -114,11 +114,13 @@ public static void stopEnsemble() throws Exception {\n \n     @Test\n     public void testThroughputLatency() throws Exception {\n+        String latencyFile = System.getProperty(\"test.latency.file\", \"latencyDump.dat\");\n         BenchThroughputLatency.main(new String[] {\n                 \"--time\", \"10\",\n                 \"--skipwarmup\",\n                 \"--throttle\", \"1\",\n-                \"--sendlimit\", \"10000\"\n+                \"--sendlimit\", \"10000\",\n+                \"--latencyFile\", latencyFile\n             });\n     }\n \n@@ -211,4 +213,4 @@ public void run() {\n         }\n         Assert.assertFalse(\"Thread should be finished\", t.isAlive());\n     }\n-}\n\\ No newline at end of file\n+}"},{"sha":"ca7301a2f453670546ef08a9b5b94555e010e404","filename":"hedwig-server/pom.xml","status":"modified","additions":5,"deletions":13,"changes":18,"blob_url":"https://github.com/apache/bookkeeper/blob/863f32a8ed33a5be3c9c622fb1c701bf3b48a2e0/hedwig-server/pom.xml","raw_url":"https://github.com/apache/bookkeeper/raw/863f32a8ed33a5be3c9c622fb1c701bf3b48a2e0/hedwig-server/pom.xml","contents_url":"https://api.github.com/repos/apache/bookkeeper/contents/hedwig-server/pom.xml?ref=863f32a8ed33a5be3c9c622fb1c701bf3b48a2e0","patch":"@@ -147,24 +147,12 @@\n       <plugin>\n         <artifactId>maven-antrun-plugin</artifactId>\n         <executions>\n-          <execution>\n-            <id>removebuilddir</id>\n-            <phase>clean</phase>\n-            <configuration>\n-              <tasks>\n-                <delete dir=\"build\" />\n-              </tasks>\n-            </configuration>\n-            <goals>\n-              <goal>run</goal>\n-            </goals>\n-          </execution>\n           <execution>\n             <id>createbuilddir</id>\n             <phase>generate-test-resources</phase>\n             <configuration>\n               <tasks>\n-                <mkdir dir=\"build\" />\n+                <mkdir dir=\"target/zk_clientbase_build\" />\n               </tasks>\n             </configuration>\n             <goals>\n@@ -193,6 +181,10 @@\n \t<version>2.9</version>\n \t<configuration>\n \t  <argLine>-Xmx1G</argLine>\n+          <systemPropertyVariables>\n+            <derby.stream.error.file>target/derby.log</derby.stream.error.file>\n+            <build.test.dir>target/zk_clientbase_build</build.test.dir>\n+          </systemPropertyVariables>\n \t</configuration>\n       </plugin>\n     </plugins>"}]}

