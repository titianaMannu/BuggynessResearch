{"sha":"8a1ad4c3208ad0e5b546ab8e5738132698fa56f5","node_id":"MDY6Q29tbWl0MTU3NTk1Njo4YTFhZDRjMzIwOGFkMGU1YjU0NmFiOGU1NzM4MTMyNjk4ZmE1NmY1","commit":{"author":{"name":"Sijie Guo","email":"sijie@apache.org","date":"2012-04-16T02:29:19Z"},"committer":{"name":"Sijie Guo","email":"sijie@apache.org","date":"2012-04-16T02:29:19Z"},"message":"BOOKKEEPER-197: HedwigConsole uses the same file to load bookkeeper client config and hub server config (sijie)\n\ngit-svn-id: https://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk@1326464 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"ae2fbcb9d29d1d74c1db7e3254744d7c977153e2","url":"https://api.github.com/repos/apache/bookkeeper/git/trees/ae2fbcb9d29d1d74c1db7e3254744d7c977153e2"},"url":"https://api.github.com/repos/apache/bookkeeper/git/commits/8a1ad4c3208ad0e5b546ab8e5738132698fa56f5","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/bookkeeper/commits/8a1ad4c3208ad0e5b546ab8e5738132698fa56f5","html_url":"https://github.com/apache/bookkeeper/commit/8a1ad4c3208ad0e5b546ab8e5738132698fa56f5","comments_url":"https://api.github.com/repos/apache/bookkeeper/commits/8a1ad4c3208ad0e5b546ab8e5738132698fa56f5/comments","author":{"login":"sijie","id":1217863,"node_id":"MDQ6VXNlcjEyMTc4NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1217863?v=4","gravatar_id":"","url":"https://api.github.com/users/sijie","html_url":"https://github.com/sijie","followers_url":"https://api.github.com/users/sijie/followers","following_url":"https://api.github.com/users/sijie/following{/other_user}","gists_url":"https://api.github.com/users/sijie/gists{/gist_id}","starred_url":"https://api.github.com/users/sijie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sijie/subscriptions","organizations_url":"https://api.github.com/users/sijie/orgs","repos_url":"https://api.github.com/users/sijie/repos","events_url":"https://api.github.com/users/sijie/events{/privacy}","received_events_url":"https://api.github.com/users/sijie/received_events","type":"User","site_admin":false},"committer":{"login":"sijie","id":1217863,"node_id":"MDQ6VXNlcjEyMTc4NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1217863?v=4","gravatar_id":"","url":"https://api.github.com/users/sijie","html_url":"https://github.com/sijie","followers_url":"https://api.github.com/users/sijie/followers","following_url":"https://api.github.com/users/sijie/following{/other_user}","gists_url":"https://api.github.com/users/sijie/gists{/gist_id}","starred_url":"https://api.github.com/users/sijie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sijie/subscriptions","organizations_url":"https://api.github.com/users/sijie/orgs","repos_url":"https://api.github.com/users/sijie/repos","events_url":"https://api.github.com/users/sijie/events{/privacy}","received_events_url":"https://api.github.com/users/sijie/received_events","type":"User","site_admin":false},"parents":[{"sha":"22bb0534ceebb3e9044b727177146fc220683b81","url":"https://api.github.com/repos/apache/bookkeeper/commits/22bb0534ceebb3e9044b727177146fc220683b81","html_url":"https://github.com/apache/bookkeeper/commit/22bb0534ceebb3e9044b727177146fc220683b81"}],"stats":{"total":28,"additions":21,"deletions":7},"files":[{"sha":"a4b71f614587dc6249753282da9cd802aa9983b6","filename":"CHANGES.txt","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/apache/bookkeeper/blob/8a1ad4c3208ad0e5b546ab8e5738132698fa56f5/CHANGES.txt","raw_url":"https://github.com/apache/bookkeeper/raw/8a1ad4c3208ad0e5b546ab8e5738132698fa56f5/CHANGES.txt","contents_url":"https://api.github.com/repos/apache/bookkeeper/contents/CHANGES.txt?ref=8a1ad4c3208ad0e5b546ab8e5738132698fa56f5","patch":"@@ -94,6 +94,8 @@ Trunk (unreleased changes)\n \n         BOOKKEEPER-163: Prevent incorrect NoSuchLedgerException for readLastConfirmed. (ivank via sijie)\n \n+        BOOKKEEPER-197: HedwigConsole uses the same file to load bookkeeper client config and hub server config (sijie)\n+\n       bookkeeper-benchmark/\n \t\n \tBOOKKEEPER-207: BenchBookie doesn't run correctly (ivank via fpj)"},{"sha":"e211124f544c73491ae5de1aa314fe4b74f768af","filename":"hedwig-server/bin/hedwig","status":"modified","additions":16,"deletions":4,"changes":20,"blob_url":"https://github.com/apache/bookkeeper/blob/8a1ad4c3208ad0e5b546ab8e5738132698fa56f5/hedwig-server/bin/hedwig","raw_url":"https://github.com/apache/bookkeeper/raw/8a1ad4c3208ad0e5b546ab8e5738132698fa56f5/hedwig-server/bin/hedwig","contents_url":"https://api.github.com/repos/apache/bookkeeper/contents/hedwig-server/bin/hedwig?ref=8a1ad4c3208ad0e5b546ab8e5738132698fa56f5","patch":"@@ -86,9 +86,13 @@ where command is one of:\n or command is the full name of a class with a defined main() method.\n \n Environment variables:\n-   HEDWIG_SERVER_CONF     Hedwig server configuration file (default $DEFAULT_CONF)\n-   HEDWIG_LOG_CONF        Log4j configuration file\n-   HEDWIG_EXTRA_OPTS      Extra options to be passed to the jvm\n+   HEDWIG_SERVER_CONF           Hedwig server configuration file (default $DEFAULT_CONF)\n+   HEDWIG_CONSOLE_SERVER_CONF   Server part configuration for hedwig console,\n+                                used for metadata management (default it is same as HEDWIG_SERVER_CONF)\n+   HEDWIG_CONSOLE_CLIENT_CONF   Client part configuration for hedwig console,\n+                                used for interacting with hub server.\n+   HEDWIG_LOG_CONF              Log4j configuration file\n+   HEDWIG_EXTRA_OPTS            Extra options to be passed to the jvm\n \n These variable can also be set in conf/hwenv.sh\n EOF\n@@ -122,7 +126,15 @@ OPTS=\"$OPTS -Djava.net.preferIPv4Stack=true\"\n if [ $COMMAND == \"server\" ]; then\n     exec java $OPTS org.apache.hedwig.server.netty.PubSubServer $HEDWIG_SERVER_CONF $@\n elif [ $COMMAND == \"console\" ]; then\n-    exec java $OPTS org.apache.hedwig.admin.console.HedwigConsole -server-cfg $HEDWIG_SERVER_CONF $@\n+    # hedwig console configuration server part\n+    if [ -n \"$HEDWIG_CONSOLE_SERVER_CONF\" ]; then\n+        HEDWIG_CONSOLE_SERVER_CONF=$HEDWIG_SERVER_CONF\n+    fi\n+    # hedwig console configuration client part\n+    if [ -n \"$HEDWIG_CONSOLE_CLIENT_CONF\" ]; then\n+        HEDWIG_CONSOLE_CLIENT_OPTIONS=\"-client-cfg $HEDWIG_CONSOLE_CLIENT_CONF\"\n+    fi\n+    exec java $OPTS org.apache.hedwig.admin.console.HedwigConsole -server-cfg $HEDWIG_CONSOLE_SERVER_CONF $HEDWIG_CONSOLE_CLIENT_OPTIONS $@\n elif [ $COMMAND == \"help\" ]; then\n     hedwig_help;\n else"},{"sha":"b2ef3a820bedb4d07a9142414d533e8c719bcaca","filename":"hedwig-server/src/main/java/org/apache/hedwig/admin/HedwigAdmin.java","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/apache/bookkeeper/blob/8a1ad4c3208ad0e5b546ab8e5738132698fa56f5/hedwig-server/src/main/java/org/apache/hedwig/admin/HedwigAdmin.java","raw_url":"https://github.com/apache/bookkeeper/raw/8a1ad4c3208ad0e5b546ab8e5738132698fa56f5/hedwig-server/src/main/java/org/apache/hedwig/admin/HedwigAdmin.java","contents_url":"https://api.github.com/repos/apache/bookkeeper/contents/hedwig-server/src/main/java/org/apache/hedwig/admin/HedwigAdmin.java?ref=8a1ad4c3208ad0e5b546ab8e5738132698fa56f5","patch":"@@ -84,10 +84,10 @@ public HedwigAdmin(ClientConfiguration bkConf, ServerConfiguration hubConf) thro\n         this.bkClientConf = bkConf;\n \n         // connect to zookeeper\n-        zk = new ZooKeeper(bkClientConf.getZkServers(), bkClientConf.getZkTimeout(), new MyWatcher());\n+        zk = new ZooKeeper(hubConf.getZkHost(), hubConf.getZkTimeout(), new MyWatcher());\n         if (LOG.isDebugEnabled()) {\n-            LOG.debug(\"Connecting to zookeeper \" + bkClientConf.getZkServers() + \", timeout = \"\n-                    + bkClientConf.getZkTimeout());\n+            LOG.debug(\"Connecting to zookeeper \" + hubConf.getZkHost() + \", timeout = \"\n+                    + hubConf.getZkTimeout());\n         }\n \n         // connect to bookkeeper"}]}

