{"sha":"9bb3de4240889f7b442dad1e70f2baf8972fb5cc","node_id":"MDY6Q29tbWl0MTU3NTk1Njo5YmIzZGU0MjQwODg5ZjdiNDQyZGFkMWU3MGYyYmFmODk3MmZiNWNj","commit":{"author":{"name":"Ivan Brendan Kelly","email":"ivank@apache.org","date":"2011-11-30T15:38:50Z"},"committer":{"name":"Ivan Brendan Kelly","email":"ivank@apache.org","date":"2011-11-30T15:38:50Z"},"message":"BOOKKEEPER-66: use IPv4 for builds (mmorel via ivank)\n\ngit-svn-id: https://svn.apache.org/repos/asf/zookeeper/bookkeeper/branches/branch-4.0@1208470 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"5190eaa98a9608654c659c0566772b3102d27a54","url":"https://api.github.com/repos/apache/bookkeeper/git/trees/5190eaa98a9608654c659c0566772b3102d27a54"},"url":"https://api.github.com/repos/apache/bookkeeper/git/commits/9bb3de4240889f7b442dad1e70f2baf8972fb5cc","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/bookkeeper/commits/9bb3de4240889f7b442dad1e70f2baf8972fb5cc","html_url":"https://github.com/apache/bookkeeper/commit/9bb3de4240889f7b442dad1e70f2baf8972fb5cc","comments_url":"https://api.github.com/repos/apache/bookkeeper/commits/9bb3de4240889f7b442dad1e70f2baf8972fb5cc/comments","author":{"login":"ivankelly","id":54955,"node_id":"MDQ6VXNlcjU0OTU1","avatar_url":"https://avatars.githubusercontent.com/u/54955?v=4","gravatar_id":"","url":"https://api.github.com/users/ivankelly","html_url":"https://github.com/ivankelly","followers_url":"https://api.github.com/users/ivankelly/followers","following_url":"https://api.github.com/users/ivankelly/following{/other_user}","gists_url":"https://api.github.com/users/ivankelly/gists{/gist_id}","starred_url":"https://api.github.com/users/ivankelly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivankelly/subscriptions","organizations_url":"https://api.github.com/users/ivankelly/orgs","repos_url":"https://api.github.com/users/ivankelly/repos","events_url":"https://api.github.com/users/ivankelly/events{/privacy}","received_events_url":"https://api.github.com/users/ivankelly/received_events","type":"User","site_admin":false},"committer":{"login":"ivankelly","id":54955,"node_id":"MDQ6VXNlcjU0OTU1","avatar_url":"https://avatars.githubusercontent.com/u/54955?v=4","gravatar_id":"","url":"https://api.github.com/users/ivankelly","html_url":"https://github.com/ivankelly","followers_url":"https://api.github.com/users/ivankelly/followers","following_url":"https://api.github.com/users/ivankelly/following{/other_user}","gists_url":"https://api.github.com/users/ivankelly/gists{/gist_id}","starred_url":"https://api.github.com/users/ivankelly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivankelly/subscriptions","organizations_url":"https://api.github.com/users/ivankelly/orgs","repos_url":"https://api.github.com/users/ivankelly/repos","events_url":"https://api.github.com/users/ivankelly/events{/privacy}","received_events_url":"https://api.github.com/users/ivankelly/received_events","type":"User","site_admin":false},"parents":[{"sha":"fe279306e3bf13cea3f427c64db2a0a9e4bdd914","url":"https://api.github.com/repos/apache/bookkeeper/commits/fe279306e3bf13cea3f427c64db2a0a9e4bdd914","html_url":"https://github.com/apache/bookkeeper/commit/fe279306e3bf13cea3f427c64db2a0a9e4bdd914"}],"stats":{"total":29,"additions":29,"deletions":0},"files":[{"sha":"7c3d72b1bb58c8b33dbcb83d020c192c4a7048a1","filename":"CHANGES.txt","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/apache/bookkeeper/blob/9bb3de4240889f7b442dad1e70f2baf8972fb5cc/CHANGES.txt","raw_url":"https://github.com/apache/bookkeeper/raw/9bb3de4240889f7b442dad1e70f2baf8972fb5cc/CHANGES.txt","contents_url":"https://api.github.com/repos/apache/bookkeeper/contents/CHANGES.txt?ref=9bb3de4240889f7b442dad1e70f2baf8972fb5cc","patch":"@@ -26,6 +26,8 @@ BUGFIXES:\n  \n  BOOKKEEPER-130: Add developer KEYS file to svn (ivank)\n \n+ BOOKKEEPER-66: use IPv4 for builds (mmorel via ivank)\n+\n  bookkeeper-server/\n \n   BOOKKEEPER-1: Static variable makes tests fail (fpj via ivank)"},{"sha":"b0629bd429461b93a72bacbd261acbbd5fe14061","filename":"bookkeeper-server/bin/bookkeeper","status":"modified","additions":12,"deletions":0,"changes":12,"blob_url":"https://github.com/apache/bookkeeper/blob/9bb3de4240889f7b442dad1e70f2baf8972fb5cc/bookkeeper-server/bin/bookkeeper","raw_url":"https://github.com/apache/bookkeeper/raw/9bb3de4240889f7b442dad1e70f2baf8972fb5cc/bookkeeper-server/bin/bookkeeper","contents_url":"https://api.github.com/repos/apache/bookkeeper/contents/bookkeeper-server/bin/bookkeeper?ref=9bb3de4240889f7b442dad1e70f2baf8972fb5cc","patch":"@@ -20,6 +20,15 @@\n # * limitations under the License.\n # */\n \n+# check if net.ipv6.bindv6only is set to 1\n+bindv6only=$(/sbin/sysctl -n net.ipv6.bindv6only 2> /dev/null)\n+if [ -n \"$bindv6only\" ] && [ \"$bindv6only\" -eq \"1\" ]\n+then\n+  echo \"Error: \\\"net.ipv6.bindv6only\\\" is set to 1 - Java networking could be broken\"\n+  echo \"For more info (the following page also applies to bookkeeper): http://wiki.apache.org/hadoop/HadoopIPv6\"\n+  exit 1\n+fi\n+\n BINDIR=`dirname \"$0\"`\n BK_HOME=`cd $BINDIR/..;pwd`\n \n@@ -108,6 +117,9 @@ OPTS=\"-cp $BOOKIE_CLASSPATH $OPTS $BOOKIE_EXTRA_OPTS\"\n \n OPTS=\"$OPTS $BOOKIE_EXTRA_OPTS\"\n \n+# Disable ipv6 as it can cause issues\n+OPTS=\"$OPTS -Djava.net.preferIPv4Stack=true\"\n+\n if [ $COMMAND == \"bookie\" ]; then\n     exec java $OPTS org.apache.bookkeeper.proto.BookieServer --conf $BOOKIE_CONF $@\n elif [ $COMMAND == \"localbookie\" ]; then"},{"sha":"04014110cc01d5159949b03161aedc81ee3c2e26","filename":"hedwig-server/bin/hedwig","status":"modified","additions":12,"deletions":0,"changes":12,"blob_url":"https://github.com/apache/bookkeeper/blob/9bb3de4240889f7b442dad1e70f2baf8972fb5cc/hedwig-server/bin/hedwig","raw_url":"https://github.com/apache/bookkeeper/raw/9bb3de4240889f7b442dad1e70f2baf8972fb5cc/hedwig-server/bin/hedwig","contents_url":"https://api.github.com/repos/apache/bookkeeper/contents/hedwig-server/bin/hedwig?ref=9bb3de4240889f7b442dad1e70f2baf8972fb5cc","patch":"@@ -20,6 +20,15 @@\n # * limitations under the License.\n # */\n \n+# check if net.ipv6.bindv6only is set to 1\n+bindv6only=$(/sbin/sysctl -n net.ipv6.bindv6only 2> /dev/null)\n+if [ -n \"$bindv6only\" ] && [ \"$bindv6only\" -eq \"1\" ]\n+then\n+  echo \"Error: \\\"net.ipv6.bindv6only\\\" is set to 1 - Java networking could be broken\"\n+  echo \"For more info (the following page also applies to hedwig): http://wiki.apache.org/hadoop/HadoopIPv6\"\n+  exit 1\n+fi\n+\n BINDIR=`dirname \"$0\"`\n HW_HOME=`cd $BINDIR/..;pwd`\n \n@@ -104,6 +113,9 @@ if [ \"$HEDWIG_LOG_CONF\" != \"\" ]; then\n fi\n OPTS=\"-cp $HEDWIG_CLASSPATH $OPTS $HEDWIG_EXTRA_OPTS\"\n \n+# Disable ipv6 as it can cause issues\n+OPTS=\"$OPTS -Djava.net.preferIPv4Stack=true\"\n+\n if [ $COMMAND == \"server\" ]; then\n     exec java $OPTS org.apache.hedwig.server.netty.PubSubServer $HEDWIG_SERVER_CONF $@\n elif [ $COMMAND == \"help\" ]; then"},{"sha":"368e8d88268687e26618064bb5b8bca4a3970bcd","filename":"pom.xml","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/apache/bookkeeper/blob/9bb3de4240889f7b442dad1e70f2baf8972fb5cc/pom.xml","raw_url":"https://github.com/apache/bookkeeper/raw/9bb3de4240889f7b442dad1e70f2baf8972fb5cc/pom.xml","contents_url":"https://api.github.com/repos/apache/bookkeeper/contents/pom.xml?ref=9bb3de4240889f7b442dad1e70f2baf8972fb5cc","patch":"@@ -56,6 +56,9 @@\n         <groupId>org.apache.maven.plugins</groupId>\n         <artifactId>maven-surefire-plugin</artifactId>\n         <version>2.9</version>\n+        <configuration>\n+          <argLine>-Djava.net.preferIPv4Stack=true</argLine>\n+        </configuration>\n       </plugin>\n       <plugin>\n         <groupId>org.apache.maven.plugins</groupId>"}]}

