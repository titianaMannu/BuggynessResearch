{"sha":"afa7a082a6f8ab6936729fb68d84bcebf09e1f19","node_id":"MDY6Q29tbWl0MTU3NTk1NjphZmE3YTA4MmE2ZjhhYjY5MzY3MjlmYjY4ZDg0YmNlYmYwOWUxZjE5","commit":{"author":{"name":"Ivan Brendan Kelly","email":"ivank@apache.org","date":"2012-11-22T17:36:20Z"},"committer":{"name":"Ivan Brendan Kelly","email":"ivank@apache.org","date":"2012-11-22T17:36:20Z"},"message":"BOOKKEEPER-454: hedwig c++ tester script assumes sh is bash (ivank)\n\ngit-svn-id: https://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk@1412629 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"20615e61eef0d76c377d10b0776391a60ec3c24a","url":"https://api.github.com/repos/apache/bookkeeper/git/trees/20615e61eef0d76c377d10b0776391a60ec3c24a"},"url":"https://api.github.com/repos/apache/bookkeeper/git/commits/afa7a082a6f8ab6936729fb68d84bcebf09e1f19","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/bookkeeper/commits/afa7a082a6f8ab6936729fb68d84bcebf09e1f19","html_url":"https://github.com/apache/bookkeeper/commit/afa7a082a6f8ab6936729fb68d84bcebf09e1f19","comments_url":"https://api.github.com/repos/apache/bookkeeper/commits/afa7a082a6f8ab6936729fb68d84bcebf09e1f19/comments","author":{"login":"ivankelly","id":54955,"node_id":"MDQ6VXNlcjU0OTU1","avatar_url":"https://avatars.githubusercontent.com/u/54955?v=4","gravatar_id":"","url":"https://api.github.com/users/ivankelly","html_url":"https://github.com/ivankelly","followers_url":"https://api.github.com/users/ivankelly/followers","following_url":"https://api.github.com/users/ivankelly/following{/other_user}","gists_url":"https://api.github.com/users/ivankelly/gists{/gist_id}","starred_url":"https://api.github.com/users/ivankelly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivankelly/subscriptions","organizations_url":"https://api.github.com/users/ivankelly/orgs","repos_url":"https://api.github.com/users/ivankelly/repos","events_url":"https://api.github.com/users/ivankelly/events{/privacy}","received_events_url":"https://api.github.com/users/ivankelly/received_events","type":"User","site_admin":false},"committer":{"login":"ivankelly","id":54955,"node_id":"MDQ6VXNlcjU0OTU1","avatar_url":"https://avatars.githubusercontent.com/u/54955?v=4","gravatar_id":"","url":"https://api.github.com/users/ivankelly","html_url":"https://github.com/ivankelly","followers_url":"https://api.github.com/users/ivankelly/followers","following_url":"https://api.github.com/users/ivankelly/following{/other_user}","gists_url":"https://api.github.com/users/ivankelly/gists{/gist_id}","starred_url":"https://api.github.com/users/ivankelly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivankelly/subscriptions","organizations_url":"https://api.github.com/users/ivankelly/orgs","repos_url":"https://api.github.com/users/ivankelly/repos","events_url":"https://api.github.com/users/ivankelly/events{/privacy}","received_events_url":"https://api.github.com/users/ivankelly/received_events","type":"User","site_admin":false},"parents":[{"sha":"10091096ec339c1524877195172325343b20e02f","url":"https://api.github.com/repos/apache/bookkeeper/commits/10091096ec339c1524877195172325343b20e02f","html_url":"https://github.com/apache/bookkeeper/commit/10091096ec339c1524877195172325343b20e02f"}],"stats":{"total":16,"additions":9,"deletions":7},"files":[{"sha":"7ff3c96ff9ae17ea77f5c54b784fbb2214926014","filename":"CHANGES.txt","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/apache/bookkeeper/blob/afa7a082a6f8ab6936729fb68d84bcebf09e1f19/CHANGES.txt","raw_url":"https://github.com/apache/bookkeeper/raw/afa7a082a6f8ab6936729fb68d84bcebf09e1f19/CHANGES.txt","contents_url":"https://api.github.com/repos/apache/bookkeeper/contents/CHANGES.txt?ref=afa7a082a6f8ab6936729fb68d84bcebf09e1f19","patch":"@@ -128,6 +128,8 @@ Trunk (unreleased changes)\n \n         BOOKKEEPER-452: Rename ClientConfiguration multiplexing_enabled to subscription_connection_sharing_enabled (sijie via ivank)\n \n+        BOOKKEEPER-454: hedwig c++ tester script assumes sh is bash (ivank)\n+\n       hedwig-server:\n \n         BOOKKEEPER-302: No more messages delivered when hub server scans messages over two ledgers. (sijie via ivank)"},{"sha":"e4a67700d958f2a1bbd92ef4c46ad73d5f1d6d50","filename":"hedwig-client/src/main/cpp/scripts/server-control.sh","status":"modified","additions":7,"deletions":7,"changes":14,"blob_url":"https://github.com/apache/bookkeeper/blob/afa7a082a6f8ab6936729fb68d84bcebf09e1f19/hedwig-client/src/main/cpp/scripts/server-control.sh","raw_url":"https://github.com/apache/bookkeeper/raw/afa7a082a6f8ab6936729fb68d84bcebf09e1f19/hedwig-client/src/main/cpp/scripts/server-control.sh","contents_url":"https://api.github.com/repos/apache/bookkeeper/contents/hedwig-client/src/main/cpp/scripts/server-control.sh?ref=afa7a082a6f8ab6936729fb68d84bcebf09e1f19","patch":"@@ -1,4 +1,4 @@\n-#!/bin/bash\n+#!/usr/bin/env bash\n #\n # Licensed to the Apache Software Foundation (ASF) under one\n # or more contributor license agreements.  See the NOTICE file\n@@ -25,7 +25,7 @@ ZKCLIENT=org.apache.zookeeper.ZooKeeperMain\n check_bk_down() {\n     NUM_UP=100\n     for i in 0 1 2 3 4 5 6 7 8 9; do\n-\tNUM_UP=`sh $BKSCRIPT $ZKCLIENT ls /ledgers/available 2> /dev/null | awk 'BEGIN{SERVERS=0} /^\\[/ { gsub(/[,\\[\\]]/, \"\"); SERVERS=NF} END{ print SERVERS }'`\n+\tNUM_UP=`$BKSCRIPT $ZKCLIENT ls /ledgers/available 2> /dev/null | awk 'BEGIN{SERVERS=0} /^\\[/ { gsub(/[,\\[\\]]/, \"\"); SERVERS=NF} END{ print SERVERS }'`\n \tif [ $NUM_UP == 0 ]; then\n \t    break;\n \tfi\n@@ -42,7 +42,7 @@ check_bk_up() {\n     NUM_BOOKIES=$1\n     NUM_UP=0\n     for i in 0 1 2 3 4 5 6 7 8 9; do\n-\tNUM_UP=`sh $BKSCRIPT $ZKCLIENT ls /ledgers/available 2> /dev/null | awk 'BEGIN{SERVERS=0} /^\\[/ { gsub(/[,\\[\\]]/, \"\"); SERVERS=NF} END{ print SERVERS }'`\n+\tNUM_UP=`$BKSCRIPT $ZKCLIENT ls /ledgers/available 2> /dev/null | awk 'BEGIN{SERVERS=0} /^\\[/ { gsub(/[,\\[\\]]/, \"\"); SERVERS=NF} END{ print SERVERS }'`\n \tif [ $NUM_UP == $NUM_BOOKIES ]; then\n \t    break;\n \tfi\n@@ -59,7 +59,7 @@ check_hw_down() {\n     REGION=$1\n     NUM_UP=100\n     for i in 0 1 2 3 4 5 6 7 8 9; do\n-\tNUM_UP=`sh $BKSCRIPT $ZKCLIENT ls /hedwig/$REGION/hosts 2> /dev/null | awk 'BEGIN{SERVERS=0} /^\\[/ { gsub(/[,\\[\\]]/, \"\"); SERVERS=NF} END{ print SERVERS }'`\n+\tNUM_UP=`$BKSCRIPT $ZKCLIENT ls /hedwig/$REGION/hosts 2> /dev/null | awk 'BEGIN{SERVERS=0} /^\\[/ { gsub(/[,\\[\\]]/, \"\"); SERVERS=NF} END{ print SERVERS }'`\n \tif [ $NUM_UP == 0 ]; then\n \t    break;\n \tfi\n@@ -77,7 +77,7 @@ check_hw_up() {\n     NUM_SERVERS=$2\n     NUM_UP=0\n     for i in 0 1 2 3 4 5 6 7 8 9; do\n-\tNUM_UP=`sh $BKSCRIPT $ZKCLIENT ls /hedwig/$REGION/hosts 2> /dev/null | awk 'BEGIN{SERVERS=0} /^\\[/ { gsub(/[,\\[\\]]/, \"\"); SERVERS=NF} END{ print SERVERS }'`\n+\tNUM_UP=`$BKSCRIPT $ZKCLIENT ls /hedwig/$REGION/hosts 2> /dev/null | awk 'BEGIN{SERVERS=0} /^\\[/ { gsub(/[,\\[\\]]/, \"\"); SERVERS=NF} END{ print SERVERS }'`\n \tif [ $NUM_UP == $NUM_SERVERS ]; then\n \t    break;\n \tfi\n@@ -132,7 +132,7 @@ cert_path=$PWD/../../../../../hedwig-server/src/main/resources/server.p12\n password=eUySvp2phM2Wk\n region=$REGION\n EOF\n-    sh $HWSCRIPT server 2>&1 > hwoutput.$COUNT.log &\n+    $HWSCRIPT server 2>&1 > hwoutput.$COUNT.log &\n     echo $! > hwprocess.$COUNT.pid\n }\n \n@@ -141,7 +141,7 @@ start_cluster() {\n \tstop_cluster;\n     fi\n \n-    sh $BKSCRIPT localbookie 3 2>&1 > bkoutput.log &\n+    $BKSCRIPT localbookie 3 2>&1 > bkoutput.log &\n     echo $! > bkprocess.pid\n     check_bk_up 3\n "}]}

