{"sha":"bfd09dd0bb5cb2d786d0f413f2c6bc8243d06d54","node_id":"MDY6Q29tbWl0MTU3NTk1NjpiZmQwOWRkMGJiNWNiMmQ3ODZkMGY0MTNmMmM2YmM4MjQzZDA2ZDU0","commit":{"author":{"name":"Flavio Paiva Junqueira","email":"fpj@apache.org","date":"2012-05-29T20:47:00Z"},"committer":{"name":"Flavio Paiva Junqueira","email":"fpj@apache.org","date":"2012-05-29T20:47:00Z"},"message":"BOOKKEEPER-269: Review documentation for hedwig console client (sijie via fpj)\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk@1343973 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"a907ac0a960a13e7495a984732074799c7972848","url":"https://api.github.com/repos/apache/bookkeeper/git/trees/a907ac0a960a13e7495a984732074799c7972848"},"url":"https://api.github.com/repos/apache/bookkeeper/git/commits/bfd09dd0bb5cb2d786d0f413f2c6bc8243d06d54","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/bookkeeper/commits/bfd09dd0bb5cb2d786d0f413f2c6bc8243d06d54","html_url":"https://github.com/apache/bookkeeper/commit/bfd09dd0bb5cb2d786d0f413f2c6bc8243d06d54","comments_url":"https://api.github.com/repos/apache/bookkeeper/commits/bfd09dd0bb5cb2d786d0f413f2c6bc8243d06d54/comments","author":{"login":"fpj","id":572920,"node_id":"MDQ6VXNlcjU3MjkyMA==","avatar_url":"https://avatars.githubusercontent.com/u/572920?v=4","gravatar_id":"","url":"https://api.github.com/users/fpj","html_url":"https://github.com/fpj","followers_url":"https://api.github.com/users/fpj/followers","following_url":"https://api.github.com/users/fpj/following{/other_user}","gists_url":"https://api.github.com/users/fpj/gists{/gist_id}","starred_url":"https://api.github.com/users/fpj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fpj/subscriptions","organizations_url":"https://api.github.com/users/fpj/orgs","repos_url":"https://api.github.com/users/fpj/repos","events_url":"https://api.github.com/users/fpj/events{/privacy}","received_events_url":"https://api.github.com/users/fpj/received_events","type":"User","site_admin":false},"committer":{"login":"fpj","id":572920,"node_id":"MDQ6VXNlcjU3MjkyMA==","avatar_url":"https://avatars.githubusercontent.com/u/572920?v=4","gravatar_id":"","url":"https://api.github.com/users/fpj","html_url":"https://github.com/fpj","followers_url":"https://api.github.com/users/fpj/followers","following_url":"https://api.github.com/users/fpj/following{/other_user}","gists_url":"https://api.github.com/users/fpj/gists{/gist_id}","starred_url":"https://api.github.com/users/fpj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fpj/subscriptions","organizations_url":"https://api.github.com/users/fpj/orgs","repos_url":"https://api.github.com/users/fpj/repos","events_url":"https://api.github.com/users/fpj/events{/privacy}","received_events_url":"https://api.github.com/users/fpj/received_events","type":"User","site_admin":false},"parents":[{"sha":"1dde3e5191e51a6f648c0d16b14ecc1e02fcff0a","url":"https://api.github.com/repos/apache/bookkeeper/commits/1dde3e5191e51a6f648c0d16b14ecc1e02fcff0a","html_url":"https://github.com/apache/bookkeeper/commit/1dde3e5191e51a6f648c0d16b14ecc1e02fcff0a"}],"stats":{"total":192,"additions":191,"deletions":1},"files":[{"sha":"0ad2e2c94573f5ed7b43678cf4753ae09c434514","filename":"CHANGES.txt","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/apache/bookkeeper/blob/bfd09dd0bb5cb2d786d0f413f2c6bc8243d06d54/CHANGES.txt","raw_url":"https://github.com/apache/bookkeeper/raw/bfd09dd0bb5cb2d786d0f413f2c6bc8243d06d54/CHANGES.txt","contents_url":"https://api.github.com/repos/apache/bookkeeper/contents/CHANGES.txt?ref=bfd09dd0bb5cb2d786d0f413f2c6bc8243d06d54","patch":"@@ -198,6 +198,8 @@ Trunk (unreleased changes)\n \n         BOOKKEEPER-97: collect pub/sub/consume statistics on hub server (sijie via ivank)\n \n+\tBOOKKEEPER-269: Review documentation for hedwig console client (sijie via fpj)\n+\n       bookkeeper-benchmark/\n \tBOOKKEEPER-158: Move latest benchmarking code into trunk (ivank via fpj)\n "},{"sha":"b37d20c174d68c02a1d88cb6c9732733d672ae39","filename":"doc/hedwigConsole.textile","status":"added","additions":187,"deletions":0,"changes":187,"blob_url":"https://github.com/apache/bookkeeper/blob/bfd09dd0bb5cb2d786d0f413f2c6bc8243d06d54/doc/hedwigConsole.textile","raw_url":"https://github.com/apache/bookkeeper/raw/bfd09dd0bb5cb2d786d0f413f2c6bc8243d06d54/doc/hedwigConsole.textile","contents_url":"https://api.github.com/repos/apache/bookkeeper/contents/doc/hedwigConsole.textile?ref=bfd09dd0bb5cb2d786d0f413f2c6bc8243d06d54","patch":"@@ -0,0 +1,187 @@\n+Title:        Hedwig Console\n+Notice: Licensed under the Apache License, Version 2.0 (the \"License\");\n+        you may not use this file except in compliance with the License. You may\n+        obtain a copy of the License at \"http://www.apache.org/licenses/LICENSE-2.0\":http://www.apache.org/licenses/LICENSE-2.0.\n+        .\n+        .        \n+        Unless required by applicable law or agreed to in writing,\n+        software distributed under the License is distributed on an \"AS IS\"\n+        BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or\n+        implied. See the License for the specific language governing permissions\n+        and limitations under the License.\n+        .\n+        .\n+\n+h1. Hedwig Console\n+\n+Apache Hedwig provides a console client, which allows users and administrators to interact with a hedwig cluster. \n+\n+h2. Connecting to hedwig cluster\n+\n+Hedwig console client is shipped with hedwig server package.\n+\n+p. To start the console client:\n+\n+ @hedwig-server/bin/hedwig console@\n+\n+p. By default, the console client connects to hub server on localhost. If you want the console client to connect to a different hub server, you can override following environment variables.\n+\n+| @HEDWIG_CONSOLE_SERVER_CONF@ | Path of a hub server configuration file. Override to make hedwig console client connect to correct zookeeper cluster. |\n+| @HEDWIG_CONSOLE_CLIENT_CONF@ | Path of a hedwig client configuration file. Override to make hedwig console client communicate with correct hub servers. |\n+\n+p. Once connected, you should see something like:\n+\n+<pre>\n+Connecting to zookeeper/bookkeeper using HedwigAdmin\n+\n+Connecting to default hub server localhost/127.0.0.1:4080\n+Welcome to Hedwig!\n+JLine support is enabled\n+JLine history support is enabled\n+[hedwig: (standalone) 16] \n+</pre>\n+\n+p. From the shell, type __help__ to get a list of commands that can be executed from the client:\n+\n+<pre>\n+[hedwig: (standalone) 16] help\n+HedwigConsole [options] [command] [args]\n+\n+Available commands:\n+        pub\n+        sub\n+        closesub\n+        unsub\n+        rmsub\n+        consume\n+        consumeto\n+        pubsub\n+        show\n+        describe\n+        readtopic\n+        set\n+        history\n+        redo\n+        help\n+        quit\n+        exit\n+\n+Finished 0.0020 s.\n+</pre>\n+\n+p. If you want to know detail usage for each command, type __help {command}__ in the shell. For example:\n+\n+<pre>\n+[hedwig: (standalone) 17] help pub\n+pub: Publish a message to a topic in Hedwig\n+usage: pub {topic} {message}\n+\n+  {topic}   : topic name.\n+              any printable string without spaces.\n+  {message} : message body.\n+              remaining arguments are used as message body to publish.\n+\n+Finished 0.0 s.\n+</pre>\n+\n+h2. Commands\n+\n+All the available commands provided in hedwig console could be categorized into three groups. They are __interactive commands__, __admin commands__, __utility commands__.\n+\n+h3. Interactive Commands\n+\n+p. Interactive commands are used by users to communicate with a hedwig cluster. They are __pub__, __sub__, __closesub__, __unsub__, __consume__ and __consumeto__.\n+\n+p. These commands are quite simple and have same semantics as the API provided in hedwig client.\n+\n+h3.  Admin Commands\n+\n+p. Admin commands are used by administrators to operate or debug a hedwig cluster. They are __show__, __describe__, __pubsub__ and __readtopic__.\n+\n+p. __show__ is used to list all available hub servers or topics in the cluster.\n+\n+p. You could use __show__ to list hub servers to know how many hub servers are alive in the cluster.\n+\n+<pre>\n+[hedwig: (standalone) 27] show hubs\n+Available Hub Servers:\n+        192.168.1.102:4080:9876 :       0\n+Finished 0.0040 s.\n+</pre>\n+\n+p. Also, you could use __show__ to list all topics. If you have a lot of topics on the clusters, this command will take a long time to run.\n+\n+<pre>\n+[hedwig: (standalone) 28] show topics\n+Topic List:\n+[mytopic]\n+Finished 0.0020 s.\n+</pre>\n+\n+p. To see the details of a topic, run __describe__. This shows the metadata of a topic, including topic owner, persistence info, subscriptions info.\n+\n+<pre>\n+[hedwig: (standalone) 43] describe topic mytopic\n+===== Topic Information : mytopic =====\n+\n+Owner : 192.168.1.102:4080:9876\n+\n+>>> Persistence Info <<<\n+Ledger 3 [ 1 ~ 9 ]\n+\n+>>> Subscription Info <<<\n+Subscriber mysub : consumeSeqId: local:0\n+\n+Finished 0.011 s.\n+</pre>\n+\n+p. When you are run the __describe__ command, you should keep in mind that __describe__ command reads the metadata from __ZooKeeper__ directly, so the subscription info might not be completely up to date due to the fact that hub servers update the subscription metadata lazily.\n+\n+p. The __readtopic__ command is useful to see which messages have not been consumed by the client.\n+\n+<pre>\n+[hedwig: (standalone) 46] readtopic mytopic\n+\n+>>>>> Ledger 3 [ 1 ~ 9] <<<<<\n+\n+---------- MSGID=LOCAL(1) ----------\n+MsgId:     LOCAL(1)\n+SrcRegion: standalone\n+Message:\n+\n+hello\n+\n+---------- MSGID=LOCAL(2) ----------\n+MsgId:     LOCAL(2)\n+SrcRegion: standalone\n+Message:\n+\n+hello 2\n+\n+---------- MSGID=LOCAL(3) ----------\n+MsgId:     LOCAL(3)\n+SrcRegion: standalone\n+Message:\n+\n+hello 3\n+\n+...\n+</pre>\n+\n+p. __pubsub__ is another useful command for administrators. It can be used to test availability and functionality of a cluster. It generates a temporary subscriber id with the current timestamp, subscribes to the given topic using generated subscriber id, publishes a message to given topic and testes whether the subscriber received the message.\n+\n+<pre>\n+[hedwig: (standalone) 48] pubsub testtopic testsub- 10 test message for availability\n+Starting PUBSUB test ...\n+Sub topic testtopic, subscriber id testsub--1338126964504\n+Pub topic testtopic : test message for availability-1338126964504\n+Received message : test message for availability-1338126964504\n+PUBSUB SUCCESS. TIME: 377 MS\n+Finished 0.388 s.\n+</pre>\n+\n+h3. Utility Commands\n+\n+p. Utility Commands are __help__, __history__, __redo__, __quit__ and __exit__.\n+\n+p. __quit__ and __exit__ are used to exit console, while __history__ and __redo__ are used to manage the history of commands executed in the shell."},{"sha":"1ada780d9bf58b5c60956f59a2875b798d11c47d","filename":"doc/index.textile","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/apache/bookkeeper/blob/bfd09dd0bb5cb2d786d0f413f2c6bc8243d06d54/doc/index.textile","raw_url":"https://github.com/apache/bookkeeper/raw/bfd09dd0bb5cb2d786d0f413f2c6bc8243d06d54/doc/index.textile","contents_url":"https://api.github.com/repos/apache/bookkeeper/contents/doc/index.textile?ref=bfd09dd0bb5cb2d786d0f413f2c6bc8243d06d54","patch":"@@ -40,4 +40,5 @@ h1. Apache Hedwig documentation\n \n h2. Hedwig Admin & Ops\n \n+* \"Hedwig Console\":./hedwigConsole.html\n * \"Hedwig JMX\":./hedwigJMX.html"},{"sha":"213d6198e8a54e1be0c0f7afe9005fd6d64dca84","filename":"hedwig-server/bin/hedwig","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/apache/bookkeeper/blob/bfd09dd0bb5cb2d786d0f413f2c6bc8243d06d54/hedwig-server/bin/hedwig","raw_url":"https://github.com/apache/bookkeeper/raw/bfd09dd0bb5cb2d786d0f413f2c6bc8243d06d54/hedwig-server/bin/hedwig","contents_url":"https://api.github.com/repos/apache/bookkeeper/contents/hedwig-server/bin/hedwig?ref=bfd09dd0bb5cb2d786d0f413f2c6bc8243d06d54","patch":"@@ -152,7 +152,7 @@ if [ $COMMAND == \"server\" ]; then\n     exec java $OPTS $JMX_ARGS org.apache.hedwig.server.netty.PubSubServer $HEDWIG_SERVER_CONF $@\n elif [ $COMMAND == \"console\" ]; then\n     # hedwig console configuration server part\n-    if [ -n \"$HEDWIG_CONSOLE_SERVER_CONF\" ]; then\n+    if [ -z \"$HEDWIG_CONSOLE_SERVER_CONF\" ]; then\n         HEDWIG_CONSOLE_SERVER_CONF=$HEDWIG_SERVER_CONF\n     fi\n     # hedwig console configuration client part"}]}

