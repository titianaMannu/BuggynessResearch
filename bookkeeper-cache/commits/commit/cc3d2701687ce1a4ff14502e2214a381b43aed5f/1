{"sha":"cc3d2701687ce1a4ff14502e2214a381b43aed5f","node_id":"MDY6Q29tbWl0MTU3NTk1NjpjYzNkMjcwMTY4N2NlMWE0ZmYxNDUwMmUyMjE0YTM4MWI0M2FlZDVm","commit":{"author":{"name":"Charan Reddy Guttapalem","email":"cguttapalem@salesforce.com","date":"2016-11-09T02:08:44Z"},"committer":{"name":"Sijie Guo","email":"sijie@apache.org","date":"2016-11-09T02:08:44Z"},"message":"BOOKKEEPER-956: Fix for HierarchicalLedgerRangeIterator\n\nFix for HierarchicalLedgerRangeIterator, to make it work\nfor LedgerIds of length 9 and 10\n\nAuthor: Charan Reddy Guttapalem <cguttapalem@salesforce.com>\n\nReviewers: sijie@apache.org <sijie@apache.org>\n\nCloses #64 from reddycharan/hierarchicalledgermanagerfix","tree":{"sha":"7a0cb48fee8f26022dc168eac24288214b5c6109","url":"https://api.github.com/repos/apache/bookkeeper/git/trees/7a0cb48fee8f26022dc168eac24288214b5c6109"},"url":"https://api.github.com/repos/apache/bookkeeper/git/commits/cc3d2701687ce1a4ff14502e2214a381b43aed5f","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/bookkeeper/commits/cc3d2701687ce1a4ff14502e2214a381b43aed5f","html_url":"https://github.com/apache/bookkeeper/commit/cc3d2701687ce1a4ff14502e2214a381b43aed5f","comments_url":"https://api.github.com/repos/apache/bookkeeper/commits/cc3d2701687ce1a4ff14502e2214a381b43aed5f/comments","author":{"login":"reddycharan","id":13989266,"node_id":"MDQ6VXNlcjEzOTg5MjY2","avatar_url":"https://avatars.githubusercontent.com/u/13989266?v=4","gravatar_id":"","url":"https://api.github.com/users/reddycharan","html_url":"https://github.com/reddycharan","followers_url":"https://api.github.com/users/reddycharan/followers","following_url":"https://api.github.com/users/reddycharan/following{/other_user}","gists_url":"https://api.github.com/users/reddycharan/gists{/gist_id}","starred_url":"https://api.github.com/users/reddycharan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/reddycharan/subscriptions","organizations_url":"https://api.github.com/users/reddycharan/orgs","repos_url":"https://api.github.com/users/reddycharan/repos","events_url":"https://api.github.com/users/reddycharan/events{/privacy}","received_events_url":"https://api.github.com/users/reddycharan/received_events","type":"User","site_admin":false},"committer":{"login":"sijie","id":1217863,"node_id":"MDQ6VXNlcjEyMTc4NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1217863?v=4","gravatar_id":"","url":"https://api.github.com/users/sijie","html_url":"https://github.com/sijie","followers_url":"https://api.github.com/users/sijie/followers","following_url":"https://api.github.com/users/sijie/following{/other_user}","gists_url":"https://api.github.com/users/sijie/gists{/gist_id}","starred_url":"https://api.github.com/users/sijie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sijie/subscriptions","organizations_url":"https://api.github.com/users/sijie/orgs","repos_url":"https://api.github.com/users/sijie/repos","events_url":"https://api.github.com/users/sijie/events{/privacy}","received_events_url":"https://api.github.com/users/sijie/received_events","type":"User","site_admin":false},"parents":[{"sha":"309cbba65c8532ef84c70efe181b3162e3078333","url":"https://api.github.com/repos/apache/bookkeeper/commits/309cbba65c8532ef84c70efe181b3162e3078333","html_url":"https://github.com/apache/bookkeeper/commit/309cbba65c8532ef84c70efe181b3162e3078333"}],"stats":{"total":4,"additions":3,"deletions":1},"files":[{"sha":"2804af180978156f436235650fb230a934a47585","filename":"bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/HierarchicalLedgerManager.java","status":"modified","additions":3,"deletions":1,"changes":4,"blob_url":"https://github.com/apache/bookkeeper/blob/cc3d2701687ce1a4ff14502e2214a381b43aed5f/bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/HierarchicalLedgerManager.java","raw_url":"https://github.com/apache/bookkeeper/raw/cc3d2701687ce1a4ff14502e2214a381b43aed5f/bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/HierarchicalLedgerManager.java","contents_url":"https://api.github.com/repos/apache/bookkeeper/contents/bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/HierarchicalLedgerManager.java?ref=cc3d2701687ce1a4ff14502e2214a381b43aed5f","patch":"@@ -311,7 +311,9 @@ synchronized private void preload() throws IOException {\n                 boolean hasMoreElements = false;\n                 try {\n                     if (l1NodesIter == null) {\n-                        l1NodesIter = zk.getChildren(ledgerRootPath, null).iterator();\n+                        List<String> l1Nodes = zk.getChildren(ledgerRootPath, null);\n+                        Collections.sort(l1Nodes);\n+                        l1NodesIter = l1Nodes.iterator();\n                         hasMoreElements = nextL1Node();\n                     } else if (l2NodesIter == null || !l2NodesIter.hasNext()) {\n                         hasMoreElements = nextL1Node();"}]}

