{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12520909","self":"https://issues.apache.org/jira/rest/api/2/issue/12520909","key":"BOOKKEEPER-63","fields":{"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12317843","id":"12317843","description":"","name":"4.0.0","archived":false,"released":true,"releaseDate":"2011-12-07"}],"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"62689","customfield_12312320":null,"customfield_12312321":null,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12312331":null,"customfield_12312332":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"customfield_12312330":null,"versions":[],"customfield_12311120":null,"customfield_12313826":null,"issuelinks":[],"customfield_12312339":null,"customfield_12313825":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ikelly","name":"ikelly","key":"ikelly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ivan Kelly","active":true,"timeZone":"Europe/Berlin"},"customfield_12312337":null,"customfield_12313823":null,"customfield_12312338":null,"customfield_12311920":null,"customfield_12313822":null,"customfield_12312335":null,"customfield_12313821":null,"customfield_12312336":null,"customfield_12313820":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12314392","id":"12314392","name":"hedwig-server","description":"Hedwig server."}],"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"174126","customfield_12312823":null,"creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmorel","name":"mmorel","key":"mmorel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthieu Morel","active":true,"timeZone":"Europe/Paris"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmorel","name":"mmorel","key":"mmorel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthieu Morel","active":true,"timeZone":"Europe/Paris"},"aggregateprogress":{"progress":0,"total":0},"customfield_12313520":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"customfield_12313924":null,"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/BOOKKEEPER-63/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12313920":null,"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"customfield_12314020":"{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@148577f[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@30feaa55[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1b3ede2d[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@5e57731d[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@67953aca[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@4bf89ebd[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@26daee59[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@4370ae04[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@d7d9fca[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@2fff5ae[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@73267b8e[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@3560fb60[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}","customfield_12314141":null,"customfield_12314140":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311293","id":"12311293","key":"BOOKKEEPER","name":"Bookkeeper","projectTypeKey":"software","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311293&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311293&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311293&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311293&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/14780","id":"14780","description":"BookKeeper","name":"BookKeeper"}},"aggregatetimespent":null,"customfield_12312520":null,"customfield_12314422":null,"customfield_12314421":null,"customfield_12314146":null,"customfield_12314420":null,"customfield_12314145":null,"customfield_12314144":null,"customfield_12314143":null,"resolutiondate":"2011-09-05T10:33:43.593+0000","workratio":-1,"customfield_12312923":null,"customfield_12312920":null,"customfield_12312921":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/BOOKKEEPER-63/watchers","watchCount":0,"isWatching":false},"created":"2011-08-31T11:29:45.851+0000","updated":"2011-12-07T15:56:09.464+0000","timeoriginalestimate":null,"description":"When a PubSubServer is instantiated in *non-standalone* mode, it creates a ZkTopicManager which takes a Zookeeper client as an argument.\nUnfortunately, this Zookeeper client may not be connected yet (not in CONNECTED state yet), and when this is the case, creation of ZkTopicManager fails, leading to failure of the PubSubServer startup.\n\nTypical error (adapted, line numbers take into account commented patching code):\njjava.io.IOException: org.apache.hedwig.exceptions.PubSubException$ServiceDownException: org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss for /hedwig/standalone/hosts/x.x.x.x:4080:9876\n\tat org.apache.hedwig.server.netty.PubSubServer.instantiateTopicManager(PubSubServer.java:170)\n\tat org.apache.hedwig.server.netty.PubSubServer$3.run(PubSubServer.java:294)\n\tat java.lang.Thread.run(Thread.java:680)\nCaused by: org.apache.hedwig.exceptions.PubSubException$ServiceDownException: org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss for /hedwig/standalone/hosts/x.x.x.x:4080:9876\n\tat org.apache.hedwig.server.topics.ZkTopicManager$4.safeProcessResult(ZkTopicManager.java:146)\netc...\n\nThis is particularly problematic for running tests that require to pass a config to the PubSubServer.","customfield_10010":null,"timetracking":{},"customfield_12314523":null,"customfield_12314127":null,"customfield_12314522":null,"customfield_12314126":null,"customfield_12314521":null,"customfield_12314125":null,"customfield_12314520":null,"customfield_12314124":null,"customfield_12312340":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12493017","id":"12493017","filename":"BOOKKEEPER-63.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmorel","name":"mmorel","key":"mmorel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthieu Morel","active":true,"timeZone":"Europe/Paris"},"created":"2011-09-05T10:23:25.030+0000","size":7804,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12493017/BOOKKEEPER-63.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12493009","id":"12493009","filename":"BOOKKEEPER-63.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmorel","name":"mmorel","key":"mmorel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthieu Morel","active":true,"timeZone":"Europe/Paris"},"created":"2011-09-05T08:43:35.540+0000","size":8503,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12493009/BOOKKEEPER-63.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12492738","id":"12492738","filename":"BOOKKEEPER-63.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmorel","name":"mmorel","key":"mmorel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthieu Morel","active":true,"timeZone":"Europe/Paris"},"created":"2011-09-02T13:12:33.988+0000","size":8479,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12492738/BOOKKEEPER-63.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12492445","id":"12492445","filename":"patch.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmorel","name":"mmorel","key":"mmorel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthieu Morel","active":true,"timeZone":"Europe/Paris"},"created":"2011-08-31T11:44:18.488+0000","size":2864,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12492445/patch.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12492444","id":"12492444","filename":"patch-testcase.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmorel","name":"mmorel","key":"mmorel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthieu Morel","active":true,"timeZone":"Europe/Paris"},"created":"2011-08-31T11:31:02.141+0000","size":4075,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12492444/patch-testcase.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12492587","id":"12492587","filename":"patch-v2.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmorel","name":"mmorel","key":"mmorel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthieu Morel","active":true,"timeZone":"Europe/Paris"},"created":"2011-09-01T09:43:12.621+0000","size":2875,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12492587/patch-v2.txt"}],"customfield_12314123":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12314122":null,"customfield_12314121":null,"customfield_12314120":null,"customfield_12314129":null,"customfield_12314524":null,"customfield_12314128":null,"summary":"Hedwig PubSubServer must wait for its Zookeeper client to be connected upon startup","customfield_12314130":null,"customfield_12310291":null,"customfield_12310290":null,"customfield_12311024":null,"customfield_12314138":null,"customfield_12314137":null,"environment":null,"customfield_12314136":null,"customfield_12314135":null,"customfield_12311020":null,"customfield_12314134":null,"duedate":null,"customfield_12314132":null,"customfield_12314131":null,"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520909/comment/13094437","id":"13094437","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmorel","name":"mmorel","key":"mmorel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthieu Morel","active":true,"timeZone":"Europe/Paris"},"body":"here is a test case that reproduces the issue","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmorel","name":"mmorel","key":"mmorel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthieu Morel","active":true,"timeZone":"Europe/Paris"},"created":"2011-08-31T11:31:02.169+0000","updated":"2011-08-31T11:31:02.169+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520909/comment/13094442","id":"13094442","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmorel","name":"mmorel","key":"mmorel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthieu Morel","active":true,"timeZone":"Europe/Paris"},"body":"solves the issue by waiting for the connected event callback, with a timeout of conf.getZkTimeout()*2","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmorel","name":"mmorel","key":"mmorel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthieu Morel","active":true,"timeZone":"Europe/Paris"},"created":"2011-08-31T11:44:18.509+0000","updated":"2011-08-31T11:44:18.509+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520909/comment/13095205","id":"13095205","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmorel","name":"mmorel","key":"mmorel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthieu Morel","active":true,"timeZone":"Europe/Paris"},"body":"fixed watcher event evaluation in previous patch","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmorel","name":"mmorel","key":"mmorel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthieu Morel","active":true,"timeZone":"Europe/Paris"},"created":"2011-09-01T09:43:12.707+0000","updated":"2011-09-01T09:43:12.707+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520909/comment/13095374","id":"13095374","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ikelly","name":"ikelly","key":"ikelly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ivan Kelly","active":true,"timeZone":"Europe/Berlin"},"body":"Looks good, but you should also check the return value of CountdownLatch.await. If a timeout has occurred the code should LOG.fatal and throw an exception. Also, could you name the patch BOOKKEEPER-63.diff or .patch etc. The extension doesn't matter, but having them named makes it easier to see what I'm working with in my source tree.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ikelly","name":"ikelly","key":"ikelly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ivan Kelly","active":true,"timeZone":"Europe/Berlin"},"created":"2011-09-01T16:15:33.485+0000","updated":"2011-09-01T16:15:33.485+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520909/comment/13095375","id":"13095375","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ikelly","name":"ikelly","key":"ikelly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ivan Kelly","active":true,"timeZone":"Europe/Berlin"},"body":"Looks good, but you should also check the return value of CountdownLatch.await. If a timeout has occurred the code should LOG.fatal and throw an exception. Also, could you name the patch BOOKKEEPER-63.diff or .patch etc. The extension doesn't matter, but having them named makes it easier to see what I'm working with in my source tree.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ikelly","name":"ikelly","key":"ikelly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ivan Kelly","active":true,"timeZone":"Europe/Berlin"},"created":"2011-09-01T16:15:34.729+0000","updated":"2011-09-01T16:15:34.729+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520909/comment/13095964","id":"13095964","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmorel","name":"mmorel","key":"mmorel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthieu Morel","active":true,"timeZone":"Europe/Paris"},"body":"patch with regression test","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmorel","name":"mmorel","key":"mmorel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthieu Morel","active":true,"timeZone":"Europe/Paris"},"created":"2011-09-02T13:12:34.011+0000","updated":"2011-09-02T13:12:34.011+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520909/comment/13095980","id":"13095980","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ikelly","name":"ikelly","key":"ikelly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ivan Kelly","active":true,"timeZone":"Europe/Berlin"},"body":"This patch fails:\n\nTests in error: \n  testSyncPublish(org.apache.hedwig.client.TestPubSubClient): Could not establish connection with ZooKeeper after zk_timeout*2 = 4000 ms. (Default value for zk_timeout is 2000).\n  testAsyncPublish(org.apache.hedwig.client.TestPubSubClient): Could not establish connection with ZooKeeper after zk_timeout*2 = 4000 ms. (Default value for zk_timeout is 2000).\n  testMultipleAsyncPublish(org.apache.hedwig.client.TestPubSubClient): Could not establish connection with ZooKeeper after zk_timeout*2 = 4000 ms. (Default value for zk_timeout is 2000).\n  testSyncSubscribe(org.apache.hedwig.client.TestPubSubClient): Could not establish connection with ZooKeeper after zk_timeout*2 = 4000 ms. (Default value for zk_timeout is 2000).\n  testAsyncSubscribe(org.apache.hedwig.client.TestPubSubClient): Could not establish connection with ZooKeeper after zk_timeout*2 = 4000 ms. (Default value for zk_timeout is 2000).\n  testSubscribeAndConsume(org.apache.hedwig.client.TestPubSubClient): Could not establish connection with ZooKeeper after zk_timeout*2 = 4000 ms. (Default value for zk_timeout is 2000).\n  testAsyncSubscribeAndUnsubscribe(org.apache.hedwig.client.TestPubSubClient): Could not establish connection with ZooKeeper after zk_timeout*2 = 4000 ms. (Default value for zk_timeout is 2000).\n  testSyncUnsubscribeWithoutSubscription(org.apache.hedwig.client.TestPubSubClient): Could not establish connection with ZooKeeper after zk_timeout*2 = 4000 ms. (Default value for zk_timeout is 2000).\n  testAsyncSubscribeAndCloseSubscription(org.apache.hedwig.client.TestPubSubClient): Could not establish connection with ZooKeeper after zk_timeout*2 = 4000 ms. (Default value for zk_timeout is 2000).\n  testSecondServer(org.apache.hedwig.server.netty.TestPubSubServer): Could not establish connection with ZooKeeper after zk_timeout*2 = 4000 ms. (Default value for zk_timeout is 2000).\n  testUncaughtExceptionInNettyThread(org.apache.hedwig.server.netty.TestPubSubServer): Could not establish connection with ZooKeeper after zk_timeout*2 = 4000 ms. (Default value for zk_timeout is 2000).\n  testUncaughtExceptionInZKThread(org.apache.hedwig.server.netty.TestPubSubServer): Could not establish connection with ZooKeeper after zk_timeout*2 = 4000 ms. (Default value for zk_timeout is 2000).\n  testInvalidServerConfiguration(org.apache.hedwig.server.netty.TestPubSubServer): Could not establish connection with ZooKeeper after zk_timeout*2 = 4000 ms. (Default value for zk_timeout is 2000).\n  testValidServerConfiguration(org.apache.hedwig.server.netty.TestPubSubServer): Could not establish connection with ZooKeeper after zk_timeout*2 = 4000 ms. (Default value for zk_timeout is 2000).\n  testNonEmptyDirtyLedger(org.apache.hedwig.server.persistence.TestBookkeeperPersistenceManagerWhiteBox)\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ikelly","name":"ikelly","key":"ikelly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ivan Kelly","active":true,"timeZone":"Europe/Berlin"},"created":"2011-09-02T13:40:38.019+0000","updated":"2011-09-02T13:40:38.019+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520909/comment/13097058","id":"13097058","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmorel","name":"mmorel","key":"mmorel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthieu Morel","active":true,"timeZone":"Europe/Paris"},"body":"new patch taking into account tests with standalone server","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmorel","name":"mmorel","key":"mmorel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthieu Morel","active":true,"timeZone":"Europe/Paris"},"created":"2011-09-05T08:43:35.776+0000","updated":"2011-09-05T08:43:35.776+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520909/comment/13097111","id":"13097111","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmorel","name":"mmorel","key":"mmorel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthieu Morel","active":true,"timeZone":"Europe/Paris"},"body":"new patch with wait code moved to instantiateZookeeperClient method","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mmorel","name":"mmorel","key":"mmorel","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthieu Morel","active":true,"timeZone":"Europe/Paris"},"created":"2011-09-05T10:23:25.050+0000","updated":"2011-09-05T10:23:25.050+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12520909/comment/13097116","id":"13097116","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ikelly","name":"ikelly","key":"ikelly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ivan Kelly","active":true,"timeZone":"Europe/Berlin"},"body":"Committed in r1165231. Thanks Matthieu.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ikelly","name":"ikelly","key":"ikelly","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ivan Kelly","active":true,"timeZone":"Europe/Berlin"},"created":"2011-09-05T10:33:43.602+0000","updated":"2011-09-05T10:33:43.602+0000"}],"maxResults":10,"total":10,"startAt":0},"customfield_12311820":"0|i0u62v:","customfield_12314139":null}}

