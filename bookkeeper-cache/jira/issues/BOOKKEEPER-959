{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13013834","self":"https://issues.apache.org/jira/rest/api/2/issue/13013834","key":"BOOKKEEPER-959","fields":{"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12335340","id":"12335340","description":"Release 4.5.0","name":"4.5.0","archived":false,"released":true,"releaseDate":"2017-08-10"}],"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"9223372036854775807","customfield_12312320":null,"customfield_12312321":null,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12312331":null,"customfield_12312332":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12325566","id":"12325566","name":"4.4.0","archived":false,"released":true,"releaseDate":"2016-05-16"}],"customfield_12311120":null,"customfield_12313826":null,"issuelinks":[{"id":"12486898","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12486898","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12637974","key":"BOOKKEEPER-588","self":"https://issues.apache.org/jira/rest/api/2/issue/12637974","fields":{"summary":"SSL support","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/7","id":"7","description":"The sub-task of the issue","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype","name":"Sub-task","subtask":true,"avatarId":21146}}}},{"id":"12483899","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12483899","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12606111","key":"BOOKKEEPER-391","self":"https://issues.apache.org/jira/rest/api/2/issue/12606111","fields":{"summary":"Support Kerberos authentication of bookkeeper","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/2","id":"2","description":"A new feature of the product, which has yet to be developed.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype","name":"New Feature","subtask":false,"avatarId":21141}}}},{"id":"12486362","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12486362","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"13020197","key":"BOOKKEEPER-969","self":"https://issues.apache.org/jira/rest/api/2/issue/13020197","fields":{"summary":"Security Support","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/2","id":"2","description":"A new feature of the product, which has yet to be developed.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype","name":"New Feature","subtask":false,"avatarId":21141}}}}],"customfield_12312339":null,"customfield_12313825":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eolivelli","name":"eolivelli","key":"eolivelli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10450","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10450","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10450","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10450"},"displayName":"Enrico Olivelli","active":true,"timeZone":"Europe/Rome"},"customfield_12312337":null,"customfield_12313823":null,"customfield_12312338":null,"customfield_12311920":null,"customfield_12313822":null,"customfield_12312335":null,"customfield_12313821":null,"customfield_12312336":null,"customfield_12313820":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12314393","id":"12314393","name":"bookkeeper-client","description":"Bookkeeper client."},{"self":"https://issues.apache.org/jira/rest/api/2/component/12314394","id":"12314394","name":"bookkeeper-server","description":"Bookkeeper server."}],"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eolivelli","name":"eolivelli","key":"eolivelli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10450","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10450","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10450","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10450"},"displayName":"Enrico Olivelli","active":true,"timeZone":"Europe/Rome"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eolivelli","name":"eolivelli","key":"eolivelli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10450","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10450","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10450","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10450"},"displayName":"Enrico Olivelli","active":true,"timeZone":"Europe/Rome"},"aggregateprogress":{"progress":0,"total":0},"customfield_12313520":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"customfield_12313924":null,"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/BOOKKEEPER-959/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12313920":null,"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"customfield_12314020":"{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@6eaad53f[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@64fa1b38[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@482873b9[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@7cbf925f[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@2afed049[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@409ac0b4[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4ba4d6a5[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@4b0998e4[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@17296554[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@1a08865[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6cdc770a[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@6b951ccd[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}","customfield_12314141":null,"customfield_12314140":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12311293","id":"12311293","key":"BOOKKEEPER","name":"Bookkeeper","projectTypeKey":"software","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12311293&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12311293&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12311293&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12311293&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/14780","id":"14780","description":"BookKeeper","name":"BookKeeper"}},"aggregatetimespent":null,"customfield_12312520":null,"customfield_12314422":null,"customfield_12314421":null,"customfield_12314146":null,"customfield_12314420":null,"customfield_12314145":null,"customfield_12314144":null,"customfield_12314143":null,"resolutiondate":"2017-01-31T01:22:32.195+0000","workratio":-1,"customfield_12312923":null,"customfield_12312920":null,"customfield_12312921":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/BOOKKEEPER-959/watchers","watchCount":4,"isWatching":false},"created":"2016-10-20T12:11:16.324+0000","updated":"2017-01-31T12:49:49.638+0000","timeoriginalestimate":null,"description":"With 4.4.0 we introduced the ability to implement custom authentication plugins.\n\nThe new interfaces ClientAuthProvider and BookieAuthProvider depend on ExtensionRegistry, which is a shaded dependency.\n\nAs a consequence it is not possibile to implement any custom auth provider in code outside the project, because shaded/relocated dependencies cannot be used.\n\nWe need to break the actual interface and introduce a new way to implement such plugins in a portable way","customfield_10010":null,"timetracking":{},"customfield_12314523":null,"customfield_12314127":null,"customfield_12314522":null,"customfield_12314126":null,"customfield_12314521":null,"customfield_12314125":null,"customfield_12314520":null,"customfield_12314124":null,"customfield_12312340":null,"attachment":[],"customfield_12314123":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12314122":null,"customfield_12314121":null,"customfield_12314120":null,"customfield_12314129":null,"customfield_12314524":null,"customfield_12314128":null,"summary":"ClientAuthProvider and BookieAuthProvider Public API used Protobuf Shaded classes","customfield_12314130":null,"customfield_12310291":null,"customfield_12310290":null,"customfield_12311024":null,"customfield_12314138":null,"customfield_12314137":null,"environment":null,"customfield_12314136":null,"customfield_12314135":null,"customfield_12311020":null,"customfield_12314134":null,"duedate":null,"customfield_12314132":null,"customfield_12314131":null,"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/13013834/comment/15591660","id":"15591660","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eolivelli","name":"eolivelli","key":"eolivelli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10450","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10450","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10450","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10450"},"displayName":"Enrico Olivelli","active":true,"timeZone":"Europe/Rome"},"body":"My idea is to introduce some standard message types to be used on the wire. \nActually in order to implement an \"usual\" authentication protocol it is enough to exchange simple byte[] values. \nUsually I use SASL (for MD5 o GSSAPI/Kerberos....) and in order to use Java built-in SASL feature a byte[] is enough, then SASL encapsulated all the state.\nA byte[] can be used to transport any kind of custom information, such as JSON/XML formatted data, I think it will be fine\n\nI will work on a first patch and share some code","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eolivelli","name":"eolivelli","key":"eolivelli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10450","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10450","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10450","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10450"},"displayName":"Enrico Olivelli","active":true,"timeZone":"Europe/Rome"},"created":"2016-10-20T12:15:46.716+0000","updated":"2016-10-20T12:15:46.716+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13013834/comment/15591945","id":"15591945","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"GitHub user eolivelli opened a pull request:\n\n    https://github.com/apache/bookkeeper/pull/67\n\n    BOOKKEEPER-959 ClientAuthProvider and BookieAuthProvider Public API used Protobuf Shaded classes\n\n    This fix removes the explicit usage of protobuf from ClientAuthProvider and BookieAuthProvider API, since protobuf library is shaded and relocated on the distributed public version of BookKeeper\n\nYou can merge this pull request into a Git repository by running:\n\n    $ git pull https://github.com/eolivelli/bookkeeper BOOKKEEPER-959\n\nAlternatively you can review and apply these changes as the patch at:\n\n    https://github.com/apache/bookkeeper/pull/67.patch\n\nTo close this pull request, make a commit to your master/trunk branch\nwith (at least) the following in the commit message:\n\n    This closes #67\n    \n----\ncommit ef2ca0e23c03dff48d14d7c86c192a57644ad489\nAuthor: eolivelli <eolivelli@gmail.com>\nDate:   2016-10-20T14:18:34Z\n\n    BOOKKEEPER-959 ClientAuthProvider and BookieAuthProvider Public API used Protobuf Shaded classes\n\n----\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-10-20T14:22:34.547+0000","updated":"2016-10-20T14:22:34.547+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13013834/comment/15601183","id":"15601183","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eolivelli","name":"eolivelli","key":"eolivelli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10450","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10450","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10450","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10450"},"displayName":"Enrico Olivelli","active":true,"timeZone":"Europe/Rome"},"body":"Some points:\n- Maybe we can change the name of MessageAuthData class to a better 'AuthToken' class\n- I used the 'extensions' facility in order to support some kind of compatibility with 4.4.0, I am not a protobuf expert...is it necessary ? \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eolivelli","name":"eolivelli","key":"eolivelli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10450","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10450","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10450","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10450"},"displayName":"Enrico Olivelli","active":true,"timeZone":"Europe/Rome"},"created":"2016-10-24T07:03:54.101+0000","updated":"2016-10-24T07:03:54.101+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13013834/comment/15609938","id":"15609938","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user merlimat commented on the issue:\n\n    https://github.com/apache/bookkeeper/pull/67\n  \n    The change looks OK to me. It's much easier to get around compared to the Protobuf extension. I guess we (Yahoo) are the only current users of this framework but I prefer to break the compatibility right now and have a better solution. \n    \n    The only point I'd like to make sure is how to transition a running cluster from no-auth to auth enabled and back. Eg. if a client is sending auth commands, will the bookie reply OK if auth is disabled?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-10-26T22:52:31.866+0000","updated":"2016-10-26T22:52:31.866+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13013834/comment/15610975","id":"15610975","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user eolivelli commented on the issue:\n\n    https://github.com/apache/bookkeeper/pull/67\n  \n    Thanks @merlimat for the review.\n    Do you think we can remove the use of the \"extensions\"  and use a field for the payload ?\n    \n    At least for the transition from no-auth to auth I can submit a fix on this PR or is it better to create a new JIRA ?\n    \n    my idea is to make the Bookie answer a standard message \"authentication-disabled\" to clients which is trying to make any kind of auth, so:\n    - on the server side the connection goes to \"authenticated\" state\n    - on the client side falls back to a \"authenticated\" state\n    this standard message will be processed from BookKeeper client system code and not passed to the auth plugin\n    \n    we have to implement a \"require.authentication\" flag on the Bookie side, to let the admin set it to false, in order to deal with legacy clients (and Bookies) which do not perform authentication.\n    On a rolling restart we upgrade Bookie to the new version with require.authentication=false, then upgrade all the clients to the new version and/or auth plugin, then we restart again each Bookie ith require.authentication=true\n    \n    this simple implementation will allow to switch from no-auth to auth, but not from auth-1-plugin to auth-2-plugin\n    \n    does it sound good  ?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-10-27T07:11:20.447+0000","updated":"2016-10-27T07:11:20.447+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13013834/comment/15610994","id":"15610994","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user merlimat commented on the issue:\n\n    https://github.com/apache/bookkeeper/pull/67\n  \n    As a sequence to enable authentication I would say something like: \n     1. Upgrade to BK-4.5 in clients and bookies, auth disabled\n     2. Enable auth in BK clients (bookies should let clients connect)\n     3. Configure bookies to require auth\n    \n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-10-27T07:18:58.271+0000","updated":"2016-10-27T07:18:58.271+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13013834/comment/15614682","id":"15614682","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eolivelli","name":"eolivelli","key":"eolivelli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10450","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10450","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10450","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10450"},"displayName":"Enrico Olivelli","active":true,"timeZone":"Europe/Rome"},"body":"[~merlimat] are you OK if I drop the 'extensions' from AuthMessage and add a fixed \"bytes\" field  ?\nin the PR I have just added an extension, but with this new implementation it is not worth to have such extensions (we have to register the extension anywhere)\n\nfrom\n\n{code}\n/**\n * Extendible message which auth mechanisms\n * can use to carry their payload.\n */\nmessage AuthMessage {\n    required string authPluginName = 1;\n    extensions 1000 to max;\n}\n{code}\n\nto\n\n{code}\n/**\n * Message which auth mechanisms\n * can use to carry their payload.\n */\nmessage AuthMessage {\n    required string authPluginName = 1;\n    required bytes token = 2;\n}\n{code}\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eolivelli","name":"eolivelli","key":"eolivelli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10450","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10450","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10450","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10450"},"displayName":"Enrico Olivelli","active":true,"timeZone":"Europe/Rome"},"created":"2016-10-28T08:00:09.734+0000","updated":"2016-10-28T08:00:09.734+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13013834/comment/15633345","id":"15633345","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user eolivelli commented on the issue:\n\n    https://github.com/apache/bookkeeper/pull/67\n  \n    @merlimat I'm going to update the PR this way:\n    - remove the extension from AuthMessage, and make 'payload' a fixed, required, field\n    - rename AuthMessageData to AuthToken\n    - fix the auth required/auth disabled flow (I will update https://cwiki.apache.org/confluence/display/BOOKKEEPER/BP-3+-+Security+support with specs)\n    \n    is the change on protobuf OK for you, as we know you are the only user of such message ?\n    is there any other way to deal with compatibility for you ?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-11-03T16:29:44.203+0000","updated":"2016-11-03T16:29:44.203+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13013834/comment/15636848","id":"15636848","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eolivelli","name":"eolivelli","key":"eolivelli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10450","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10450","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10450","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10450"},"displayName":"Enrico Olivelli","active":true,"timeZone":"Europe/Rome"},"body":"I have updated the PR with the following changes:\n- rename AuthMessageData to AuthToken \n- fix the auth required/auth disabled flow\n\nMy proposal to support the switch from \"no-auth\" to any plugin is the following:\n1) when no auth is configured on bookie-side the default auth plugin comes to play. I'm going to change its name from \"nullplugin\" to \"AuthDisabledPlugin\"\n2) when no  auth is configured on bookies the bookie goes to a permissive mode in which any client is allowed to connect and use bookie functions, any 'auth' message will be answered with an OK status code from the AuthDisabledPlugin\n3) when no auth is configured on bookies each attempt of authentication by the client will receive the OK status code from the AuthDisabledPlugin, and so the client will understand that the bookie is not performing  authentication, and goes to the authenticated state\n\nA rolling upgrade from AuthDisabledPlugin to any other plugin can be implemented by rebooting clients with the new plugin: this way bookies will authenticate clients with AuthDisabledPlugin and clients will go to authenticated state anyway.\nThen you will restart bookies with the new plugin and clients will perform real authentication.\nBeware that bookie-to-bookie comunications will follow the same scheme during the rolling upgrade, because each bookie can be a client for the other bookies and will authenticate thru the AuthDisabledPlugin flow or to the requested plugin flow.\n\n[~rakeshr] [~merlimat] does this flow sound good to you?\n\nAnother issue will be to attach to the server-side view of the connection the user-id (principal) of the client which performed authentication, this will be the base for authorization.\nA change to the AuthProvider interface will be needed.\nI wonder if we have to add this feature now as we are breaking compatibility with 4.4\n\n[~hustlmsp] do you think that the  discussion should continue on  https://cwiki.apache.org/confluence/display/BOOKKEEPER/BP-3+-+Security+support  ?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eolivelli","name":"eolivelli","key":"eolivelli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10450","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10450","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10450","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10450"},"displayName":"Enrico Olivelli","active":true,"timeZone":"Europe/Rome"},"created":"2016-11-04T16:11:50.065+0000","updated":"2016-11-04T16:11:50.065+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13013834/comment/15658022","id":"15658022","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hustlmsp","name":"hustlmsp","key":"hustlmsp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sijie Guo","active":true,"timeZone":"America/Los_Angeles"},"body":"Since you are breaking the compatibility, we should add this feature now.\n\nAlso,\n\nCan you create a jira about 'Security Support' and make it a master ticket and link other security related tickets to that master ticket?\n\nFor BP (bookkeeper proposoal), the discussions should happen in the email threads and jiras and the final design (the decisions made in the email threads, jiras and meetings) should be updated to the BP document. And it should finally land at the bookkeeper documentation when it is released.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hustlmsp","name":"hustlmsp","key":"hustlmsp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sijie Guo","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-11-11T19:59:47.723+0000","updated":"2016-11-11T19:59:47.723+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13013834/comment/15658829","id":"15658829","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user merlimat commented on the issue:\n\n    https://github.com/apache/bookkeeper/pull/67\n  \n    Sounds good. \n    \n    > is the change on protobuf OK for you, as we know you are the only user of such message ?\n    \n    Yes\n    \n    > is there any other way to deal with compatibility for you ?\n    \n    If the bookies with auth turned off will accept a client with auth turned on... then we can manage the transition (eg: turn temporarily off the auth and deploy the new code). But the same requirement is needed to enable auth on an existing cluster.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-11-12T02:33:52.769+0000","updated":"2016-11-12T02:33:52.769+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13013834/comment/15676071","id":"15676071","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eolivelli","name":"eolivelli","key":"eolivelli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10450","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10450","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10450","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10450"},"displayName":"Enrico Olivelli","active":true,"timeZone":"Europe/Rome"},"body":"I have updated the PR, this is the full list of changes:\n- a breaking change to the Auth Plugin API (which used Protobuf shaded dependency and so it was not usable by develpers of third party plugins)\n- a breaking change to the protocol (this change affects only users of auth plugin of 4.4.0)\n- introduction of BookKeeperPrincipal, which represents the user bound to the connection\n- introduction of ClientSideConnectionPeer and BookieSideConnectionPeer , which are handles to the connection, this classes allow AuthPlugins (and in the future new kind of plugins) to access principals bound to the connection, the remote address of the connected peer and also allow plugins to drop the connection\n- introduction of ClientConfiguration#CLIENT_ROLE configuration property\n- the move of ClientConfiguration#CLIENT_AUTH_PROVIDER_FACTORY_CLASS to AbstractConfiguration because it is to be configured on Bookie side to (for usage by the Auditor)\n- introduction of a way to perform a rolling upgrade from authentication disabled to authentication enabled\n\nThe CLIENT_ROLE property is used internally to make the Auditor let the Client Side Auth plugin to known that the connection will be used by the 'system', valid values are:\n- standard (standard clients)\n- system (the auditor and autorecovery)\nIs has been introduced to let the future SASL Kerberos Auth Plugin (BOOKKEEPER-391) to use different configuration for there two kind of usecases, it will be useful to any other plugin too\n\nThe xxxxPeer classes enhance the previous way of telling to the AuthPlugin about the origin of the connection (in 4.4.0 only the SocketAddress was given), during the discussion about SSL support (BOOKKEEPER-588) it seemed required to make the AuthPlugin:\n- access other Principals bound to the connection (like SSL certificates, both from the server and the client side)\n- a way to let the Plugin drop the connection in case of autorization expiration (like SSL client side expired certificate)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eolivelli","name":"eolivelli","key":"eolivelli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10450","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10450","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10450","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10450"},"displayName":"Enrico Olivelli","active":true,"timeZone":"Europe/Rome"},"created":"2016-11-18T07:48:47.298+0000","updated":"2016-11-18T07:48:47.298+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13013834/comment/15676074","id":"15676074","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eolivelli","name":"eolivelli","key":"eolivelli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10450","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10450","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10450","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10450"},"displayName":"Enrico Olivelli","active":true,"timeZone":"Europe/Rome"},"body":"this PR is incomplete anyway, because during the work on SSL support BOOKKEEPER-588 I saw that the SSL AuthPlugin should starts a new background thread to perform periodic checks about client certificates expirations.\nWe have to add some \"close()\" method to every AuthPlugin class in order to let it release resources (in SSL case to stop the thread)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eolivelli","name":"eolivelli","key":"eolivelli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10450","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10450","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10450","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10450"},"displayName":"Enrico Olivelli","active":true,"timeZone":"Europe/Rome"},"created":"2016-11-18T07:50:34.721+0000","updated":"2016-11-18T07:50:34.721+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13013834/comment/15676726","id":"15676726","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user eolivelli commented on the issue:\n\n    https://github.com/apache/bookkeeper/pull/67\n  \n    I have updated the PR with the close() method.\n    I think it is aligned with the specs and the discussion\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-11-18T13:36:08.223+0000","updated":"2016-11-18T13:36:08.223+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13013834/comment/15686015","id":"15686015","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user eolivelli commented on the issue:\n\n    https://github.com/apache/bookkeeper/pull/67\n  \n    Thanks @sijie for the review.\n    I have applied your suggestions. \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-11-22T08:03:00.557+0000","updated":"2016-11-22T08:03:00.557+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13013834/comment/15706870","id":"15706870","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user sijie commented on the issue:\n\n    https://github.com/apache/bookkeeper/pull/67\n  \n    @eolivelli LGTM +1.\n    \n    @merlimat  can you take a look too?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-11-29T23:14:18.127+0000","updated":"2016-11-29T23:14:18.127+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13013834/comment/15730973","id":"15730973","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user sijie commented on the issue:\n\n    https://github.com/apache/bookkeeper/pull/67\n  \n    ping @merlimat \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-12-08T03:31:35.661+0000","updated":"2016-12-08T03:31:35.661+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13013834/comment/15744544","id":"15744544","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user sijie commented on the issue:\n\n    https://github.com/apache/bookkeeper/pull/67\n  \n    ping @merlimat \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-12-13T08:25:15.106+0000","updated":"2016-12-13T08:25:15.106+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13013834/comment/15765332","id":"15765332","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user sijie commented on the issue:\n\n    https://github.com/apache/bookkeeper/pull/67\n  \n    @merlimat do you mind taking a look one more time before I merge this one?\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2016-12-20T21:45:51.535+0000","updated":"2016-12-20T21:45:51.535+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13013834/comment/15770141","id":"15770141","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eolivelli","name":"eolivelli","key":"eolivelli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10450","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10450","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10450","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10450"},"displayName":"Enrico Olivelli","active":true,"timeZone":"Europe/Rome"},"body":"I have found another odd issue, we were using BookkeeperInternalCallbacks for GenericCallback.\nI'm going to update the patch with a new Callback interface in order not to make AuthPlugins depend on classes marked as \"Internal\"","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eolivelli","name":"eolivelli","key":"eolivelli","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10450","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10450","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10450","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10450"},"displayName":"Enrico Olivelli","active":true,"timeZone":"Europe/Rome"},"created":"2016-12-22T14:20:06.116+0000","updated":"2016-12-22T14:20:06.116+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13013834/comment/15846248","id":"15846248","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user zzsongsg commented on the issue:\n\n    https://github.com/apache/bookkeeper/pull/67\n  \n    +1 merging this pull request.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-01-31T01:13:18.800+0000","updated":"2017-01-31T01:13:18.800+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13013834/comment/15846249","id":"15846249","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user asfgit closed the pull request at:\n\n    https://github.com/apache/bookkeeper/pull/67\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-01-31T01:14:43.989+0000","updated":"2017-01-31T01:14:43.989+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13013834/comment/15846258","id":"15846258","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"body":"Github user sijie commented on the issue:\n\n    https://github.com/apache/bookkeeper/pull/67\n  \n    merged this pull request in 13d668f. thank you @eolivelli \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","key":"githubbot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true,"timeZone":"Etc/UTC"},"created":"2017-01-31T01:22:17.683+0000","updated":"2017-01-31T01:22:17.683+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13013834/comment/15846259","id":"15846259","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hustlmsp","name":"hustlmsp","key":"hustlmsp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sijie Guo","active":true,"timeZone":"America/Los_Angeles"},"body":"Issue resolved by merging pull request 67\n            [https://github.com/apache/bookkeeper/pull/67]\n\n            {noformat}\n            commit 13d668f2208bf472e4938cfdfd2de912eaa11275\nAuthor:     eolivelli <eolivelli@gmail.com>\nAuthorDate: Mon Jan 30 17:14:22 2017 -0800\nCommit:     Sijie Guo <sijie@apache.org>\nCommitDate: Mon Jan 30 17:14:22 2017 -0800\n\n    BOOKKEEPER-959: ClientAuthProvider and BookieAuthProvider Public API used Protobuf Shaded classes\n    \n    This fix removes the explicit usage of protobuf from ClientAuthProvider and BookieAuthProvider API, since protobuf library is shaded and relocated on the distributed public version of BookKeeper\n    \n    Author: eolivelli <eolivelli@gmail.com>\n    \n    Reviewers: Sijie Guo <sijie@apache.org>\n    \n    Closes #67 from eolivelli/BOOKKEEPER-959\n\n            {noformat}\n            ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hustlmsp","name":"hustlmsp","key":"hustlmsp","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sijie Guo","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-01-31T01:22:32.230+0000","updated":"2017-01-31T01:22:32.230+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/13013834/comment/15846769","id":"15846769","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"body":"FAILURE: Integrated in Jenkins build bookkeeper-master #1644 (See [https://builds.apache.org/job/bookkeeper-master/1644/])\nBOOKKEEPER-959: ClientAuthProvider and BookieAuthProvider Public API (sijie: rev 13d668f2208bf472e4938cfdfd2de912eaa11275)\n* (edit) bookkeeper-server/src/test/java/org/apache/bookkeeper/auth/TestAuth.java\n* (edit) bookkeeper-server/pom.xml\n* (edit) bookkeeper-server/src/test/java/org/apache/bookkeeper/proto/TestPerChannelBookieClient.java\n* (edit) bookkeeper-server/src/test/java/org/apache/bookkeeper/proto/TestBackwardCompatCMS42.java\n* (add) bookkeeper-server/src/test/java/org/apache/bookkeeper/replication/AuthAutoRecoveryTest.java\n* (add) bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/ConnectionPeer.java\n* (edit) bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/Auditor.java\n* (edit) bookkeeper-server/src/main/java/org/apache/bookkeeper/auth/AuthProviderFactoryFactory.java\n* (edit) bookkeeper-server/src/main/proto/BookkeeperProtocol.proto\n* (add) bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ClientConnectionPeer.java\n* (edit) bookkeeper-server/src/main/java/org/apache/bookkeeper/auth/ClientAuthProvider.java\n* (edit) bookkeeper-server/src/main/resources/findbugsExclude.xml\n* (add) bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieConnectionPeer.java\n* (add) bookkeeper-server/src/main/java/org/apache/bookkeeper/auth/AuthCallbacks.java\n* (edit) bookkeeper-server/src/main/java/org/apache/bookkeeper/auth/BookieAuthProvider.java\n* (add) bookkeeper-server/src/main/java/org/apache/bookkeeper/auth/AuthToken.java\n* (edit) bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/PerChannelBookieClient.java\n* (edit) bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookkeeperProtocol.java\n* (edit) bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/AbstractConfiguration.java\n* (edit) bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookieClient.java\n* (edit) bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java\n* (add) bookkeeper-server/src/main/java/org/apache/bookkeeper/auth/BookKeeperPrincipal.java\n* (delete) bookkeeper-server/src/test/proto/TestDataFormats.proto\n* (edit) bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/AuthHandler.java\n* (delete) bookkeeper-server/src/test/java/org/apache/bookkeeper/proto/TestDataFormats.java\n* (edit) bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookieRequestProcessor.java\n* (edit) bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookieNettyServer.java\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","key":"hudson","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true,"timeZone":"Etc/UTC"},"created":"2017-01-31T12:49:49.638+0000","updated":"2017-01-31T12:49:49.638+0000"}],"maxResults":25,"total":25,"startAt":0},"customfield_12311820":"0|i355br:","customfield_12314139":null}}

