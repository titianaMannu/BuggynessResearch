{"sha":"d8a87e4b31ac44676599d9227f0e096ec3bdac51","node_id":"MDQ6QmxvYjE1NzU5NTY6ZDhhODdlNGIzMWFjNDQ2NzY1OTlkOTIyN2YwZTA5NmVjM2JkYWM1MQ==","size":4218,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/d8a87e4b31ac44676599d9227f0e096ec3bdac51","content":"LyoqCiAqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91\nbmRhdGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRv\nciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAq\nIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGlu\nZm9ybWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRo\nZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5z\nZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21w\nbGlhbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBh\nIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICBodHRwOi8vd3d3LmFw\nYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJl\ncXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0\naW5nLAogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5z\nZSBpcyBkaXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRI\nT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwg\nZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBm\nb3IgdGhlCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNz\naW9ucyBhbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAq\nCiAqLwoKcGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIuYm9va2llOwoK\naW1wb3J0IGphdmEudXRpbC5NYXA7CmltcG9ydCBqYXZhLnV0aWwuTmF2aWdh\nYmxlTWFwOwppbXBvcnQgamF2YS51dGlsLlNldDsKCmltcG9ydCBvcmcuYXBh\nY2hlLmJvb2trZWVwZXIubWV0YS5MZWRnZXJNYW5hZ2VyOwppbXBvcnQgb3Jn\nLmFwYWNoZS5ib29ra2VlcGVyLm1ldGEuTGVkZ2VyTWFuYWdlci5MZWRnZXJS\nYW5nZTsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5tZXRhLkxlZGdl\nck1hbmFnZXIuTGVkZ2VyUmFuZ2VJdGVyYXRvcjsKaW1wb3J0IG9yZy5hcGFj\naGUuYm9va2tlZXBlci51dGlsLlNuYXBzaG90TWFwOwppbXBvcnQgb3JnLnNs\nZjRqLkxvZ2dlcjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJGYWN0b3J5OwoK\nLyoqCiAqIEdhcmJhZ2UgY29sbGVjdG9yIGltcGxlbWVudGF0aW9uIHVzaW5n\nIHNjYW4gYW5kIGNvbXBhcmUuCiAqCiAqIDxwPgogKiBHYXJiYWdlIGNvbGxl\nY3Rpb24gaXMgcHJvY2Vzc2VkIGFzIGJlbG93OgogKiA8dWw+CiAqIDxsaT4g\nZmV0Y2ggYWxsIGV4aXN0aW5nIGxlZGdlcnMgZnJvbSB6b29rZWVwZXIgb3Ig\nbWV0YXN0b3JlIGFjY29yZGluZyB0bwogKiB0aGUgTGVkZ2VyTWFuYWdlciwg\nY2FsbGVkIDxiPmdsb2JhbEFjdGl2ZUxlZGdlcnM8L2I+CiAqIDxsaT4gZmV0\nY2ggYWxsIGFjdGl2ZSBsZWRnZXJzIGZyb20gYm9va2llIHNlcnZlciwgc2Fp\nZCA8Yj5ia0FjdGl2ZUxlZGdlcnM8L2I+CiAqIDxsaT4gbG9vcCBvdmVyIDxi\nPmJrQWN0aXZlTGVkZ2VyczwvYj4gdG8gZmluZCB0aG9zZSBsZWRnZXJzIHRo\nYXQgYXJlIG5vdCBpbgogKiA8Yj5nbG9iYWxBY3RpdmVMZWRnZXJzPC9iPiwg\nZG8gZ2FyYmFnZSBjb2xsZWN0aW9uIG9uIHRoZW0uCiAqIDwvdWw+CiAqIDwv\ncD4KICovCnB1YmxpYyBjbGFzcyBTY2FuQW5kQ29tcGFyZUdhcmJhZ2VDb2xs\nZWN0b3IgaW1wbGVtZW50cyBHYXJiYWdlQ29sbGVjdG9yewoKICAgIHN0YXRp\nYyBmaW5hbCBMb2dnZXIgTE9HID0gTG9nZ2VyRmFjdG9yeS5nZXRMb2dnZXIo\nU2NhbkFuZENvbXBhcmVHYXJiYWdlQ29sbGVjdG9yLmNsYXNzKTsKICAgIHBy\naXZhdGUgU25hcHNob3RNYXA8TG9uZywgQm9vbGVhbj4gYWN0aXZlTGVkZ2Vy\nczsKICAgIHByaXZhdGUgTGVkZ2VyTWFuYWdlciBsZWRnZXJNYW5hZ2VyOwoK\nICAgIHB1YmxpYyBTY2FuQW5kQ29tcGFyZUdhcmJhZ2VDb2xsZWN0b3IoTGVk\nZ2VyTWFuYWdlciBsZWRnZXJNYW5hZ2VyLCBTbmFwc2hvdE1hcDxMb25nLCBC\nb29sZWFuPiBhY3RpdmVMZWRnZXJzKSB7CiAgICAgICAgdGhpcy5sZWRnZXJN\nYW5hZ2VyID0gbGVkZ2VyTWFuYWdlcjsKICAgICAgICB0aGlzLmFjdGl2ZUxl\nZGdlcnMgPSBhY3RpdmVMZWRnZXJzOwogICAgfQoKICAgIEBPdmVycmlkZQog\nICAgcHVibGljIHZvaWQgZ2MoR2FyYmFnZUNsZWFuZXIgZ2FyYmFnZUNsZWFu\nZXIpIHsKICAgICAgICAvLyBjcmVhdGUgYSBzbmFwc2hvdCBmaXJzdAogICAg\nICAgIE5hdmlnYWJsZU1hcDxMb25nLCBCb29sZWFuPiBia0FjdGl2ZUxlZGdl\ncnNTbmFwc2hvdCA9CiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUxlZGdl\ncnMuc25hcHNob3QoKTsKICAgICAgICBMZWRnZXJSYW5nZUl0ZXJhdG9yIGxl\nZGdlclJhbmdlSXRlcmF0b3IgPSBsZWRnZXJNYW5hZ2VyLmdldExlZGdlclJh\nbmdlcygpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIC8vIEVtcHR5IGds\nb2JhbCBhY3RpdmUgbGVkZ2VycywgbmVlZCB0byByZW1vdmUgYWxsIGxvY2Fs\nIGFjdGl2ZSBsZWRnZXJzLgogICAgICAgICAgICBpZiAoIWxlZGdlclJhbmdl\nSXRlcmF0b3IuaGFzTmV4dCgpKSB7CiAgICAgICAgICAgICAgICBmb3IgKExv\nbmcgYmtMaWQgOiBia0FjdGl2ZUxlZGdlcnNTbmFwc2hvdC5rZXlTZXQoKSkg\newogICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBpdCBmcm9tIGN1cnJl\nbnQgYWN0aXZlIGxlZGdlcgogICAgICAgICAgICAgICAgICAgIGJrQWN0aXZl\nTGVkZ2Vyc1NuYXBzaG90LnJlbW92ZShia0xpZCk7CiAgICAgICAgICAgICAg\nICAgICAgZ2FyYmFnZUNsZWFuZXIuY2xlYW4oYmtMaWQpOwogICAgICAgICAg\nICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGxvbmcgbGFzdEVu\nZCA9IC0xOwoKICAgICAgICAgICAgd2hpbGUobGVkZ2VyUmFuZ2VJdGVyYXRv\nci5oYXNOZXh0KCkpIHsKICAgICAgICAgICAgICAgIExlZGdlclJhbmdlIGxS\nYW5nZSA9IGxlZGdlclJhbmdlSXRlcmF0b3IubmV4dCgpOwogICAgICAgICAg\nICAgICAgTWFwPExvbmcsIEJvb2xlYW4+IHN1YkJrQWN0aXZlTGVkZ2VycyA9\nIG51bGw7CgogICAgICAgICAgICAgICAgTG9uZyBzdGFydCA9IGxhc3RFbmQg\nKyAxOwogICAgICAgICAgICAgICAgTG9uZyBlbmQgPSBsUmFuZ2UuZW5kKCk7\nCiAgICAgICAgICAgICAgICBpZiAoIWxlZGdlclJhbmdlSXRlcmF0b3IuaGFz\nTmV4dCgpKSB7CiAgICAgICAgICAgICAgICAgICAgZW5kID0gTG9uZy5NQVhf\nVkFMVUU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBzdWJC\na0FjdGl2ZUxlZGdlcnMgPSBia0FjdGl2ZUxlZGdlcnNTbmFwc2hvdC5zdWJN\nYXAoCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0LCB0cnVlLCBlbmQs\nIHRydWUpOwoKICAgICAgICAgICAgICAgIFNldDxMb25nPiBsZWRnZXJzSW5N\nZXRhZGF0YSA9IGxSYW5nZS5nZXRMZWRnZXJzKCk7CiAgICAgICAgICAgICAg\nICBMT0cuZGVidWcoIkFjdGl2ZSBpbiBtZXRhZGF0YSB7fSwgQWN0aXZlIGlu\nIGJvb2tpZSB7fSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgbGVkZ2Vy\nc0luTWV0YWRhdGEsIHN1YkJrQWN0aXZlTGVkZ2Vycy5rZXlTZXQoKSk7CiAg\nICAgICAgICAgICAgICBmb3IgKExvbmcgYmtMaWQgOiBzdWJCa0FjdGl2ZUxl\nZGdlcnMua2V5U2V0KCkpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIWxl\nZGdlcnNJbk1ldGFkYXRhLmNvbnRhaW5zKGJrTGlkKSkgewogICAgICAgICAg\nICAgICAgICAgICAgICAvLyByZW1vdmUgaXQgZnJvbSBjdXJyZW50IGFjdGl2\nZSBsZWRnZXIKICAgICAgICAgICAgICAgICAgICAgICAgc3ViQmtBY3RpdmVM\nZWRnZXJzLnJlbW92ZShia0xpZCk7CiAgICAgICAgICAgICAgICAgICAgICAg\nIGdhcmJhZ2VDbGVhbmVyLmNsZWFuKGJrTGlkKTsKICAgICAgICAgICAgICAg\nICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBsYXN0\nRW5kID0gZW5kOwogICAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoRXhj\nZXB0aW9uIGUpIHsKICAgICAgICAgICAgLy8gaWdub3JlIGV4Y2VwdGlvbiwg\nY29sbGVjdGluZyBnYXJiYWdlIG5leHQgdGltZQogICAgICAgICAgICBMT0cu\nd2FybigiRXhjZXB0aW9uIHdoZW4gaXRlcmF0aW5nIG92ZXIgdGhlIG1ldGFk\nYXRhIHt9IiwgZSk7CiAgICAgICAgfQogICAgfQp9CgoK\n","encoding":"base64"}

