{"sha":"43b4f6358d8ea474018d19e2f4f4eb7d327678c8","node_id":"MDQ6QmxvYjE1NzU5NTY6NDNiNGY2MzU4ZDhlYTQ3NDAxOGQxOWUyZjRmNGViN2QzMjc2NzhjOA==","size":9382,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/43b4f6358d8ea474018d19e2f4f4eb7d327678c8","content":"LyoqCiAqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91\nbmRhdGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRv\nciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAq\nIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGlu\nZm9ybWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRo\nZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5z\nZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21w\nbGlhbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBh\nIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICBodHRwOi8vd3d3LmFw\nYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJl\ncXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0\naW5nLAogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5z\nZSBpcyBkaXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRI\nT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwg\nZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBm\nb3IgdGhlCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNz\naW9ucyBhbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAq\nCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci5yZXBsaWNhdGlv\nbjsKCmltcG9ydCBqYXZhLmlvLkZpbGU7CmltcG9ydCBqYXZhLmlvLklPRXhj\nZXB0aW9uOwppbXBvcnQgamF2YS5uZXQuTWFsZm9ybWVkVVJMRXhjZXB0aW9u\nOwoKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5ib29raWUuQm9va2ll\nOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmJvb2tpZS5FeGl0Q29k\nZTsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5jb25mLlNlcnZlckNv\nbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIucmVw\nbGljYXRpb24uUmVwbGljYXRpb25FeGNlcHRpb24uQ29tcGF0aWJpbGl0eUV4\nY2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5yZXBsaWNh\ndGlvbi5SZXBsaWNhdGlvbkV4Y2VwdGlvbi5VbmF2YWlsYWJsZUV4Y2VwdGlv\nbjsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci51dGlsLlprVXRpbHM7\nCmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIudXRpbC5TdHJpbmdVdGls\nczsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci56b29rZWVwZXIuWm9v\nS2VlcGVyV2F0Y2hlckJhc2U7CmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMu\nY2xpLkJhc2ljUGFyc2VyOwppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNs\naS5Db21tYW5kTGluZTsKaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jbGku\nSGVscEZvcm1hdHRlcjsKaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jbGku\nT3B0aW9uczsKaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jbGkuUGFyc2VF\neGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMuY29uZmlndXJh\ndGlvbi5Db25maWd1cmF0aW9uRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNo\nZS56b29rZWVwZXIuS2VlcGVyRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNo\nZS56b29rZWVwZXIuV2F0Y2hlZEV2ZW50OwppbXBvcnQgb3JnLmFwYWNoZS56\nb29rZWVwZXIuV2F0Y2hlcjsKaW1wb3J0IG9yZy5hcGFjaGUuem9va2VlcGVy\nLlpvb0tlZXBlcjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXI7CmltcG9ydCBv\ncmcuc2xmNGouTG9nZ2VyRmFjdG9yeTsKCi8qKgogKiBDbGFzcyB0byBzdGFy\ndC9zdG9wIHRoZSBBdXRvUmVjb3ZlcnkgZGFlbW9ucyBBdWRpdG9yIGFuZCBS\nZXBsaWNhdGlvbldvcmtlcgogKi8KcHVibGljIGNsYXNzIEF1dG9SZWNvdmVy\neU1haW4gewogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9nZ2VyIExPRyA9\nIExvZ2dlckZhY3RvcnkKICAgICAgICAgICAgLmdldExvZ2dlcihBdXRvUmVj\nb3ZlcnlNYWluLmNsYXNzKTsKCiAgICBwcml2YXRlIFNlcnZlckNvbmZpZ3Vy\nYXRpb24gY29uZjsKICAgIFpvb0tlZXBlciB6azsKICAgIEF1ZGl0b3JFbGVj\ndG9yIGF1ZGl0b3JFbGVjdG9yOwogICAgUmVwbGljYXRpb25Xb3JrZXIgcmVw\nbGljYXRpb25Xb3JrZXI7CiAgICBwcml2YXRlIEF1dG9SZWNvdmVyeURlYXRo\nV2F0Y2hlciBkZWF0aFdhdGNoZXI7CiAgICBwcml2YXRlIGludCBleGl0Q29k\nZTsKICAgIHByaXZhdGUgdm9sYXRpbGUgYm9vbGVhbiBzaHV0dGluZ0Rvd24g\nPSBmYWxzZTsKICAgIHByaXZhdGUgdm9sYXRpbGUgYm9vbGVhbiBydW5uaW5n\nID0gZmFsc2U7CgogICAgcHVibGljIEF1dG9SZWNvdmVyeU1haW4oU2VydmVy\nQ29uZmlndXJhdGlvbiBjb25mKSB0aHJvd3MgSU9FeGNlcHRpb24sCiAgICAg\nICAgICAgIEludGVycnVwdGVkRXhjZXB0aW9uLCBLZWVwZXJFeGNlcHRpb24s\nIFVuYXZhaWxhYmxlRXhjZXB0aW9uLAogICAgICAgICAgICBDb21wYXRpYmls\naXR5RXhjZXB0aW9uIHsKICAgICAgICB0aGlzLmNvbmYgPSBjb25mOwogICAg\nICAgIFpvb0tlZXBlcldhdGNoZXJCYXNlIHcgPSBuZXcgWm9vS2VlcGVyV2F0\nY2hlckJhc2UoY29uZi5nZXRaa1RpbWVvdXQoKSkgewogICAgICAgICAgICBA\nT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIHZvaWQgcHJvY2VzcyhXYXRj\naGVkRXZlbnQgZXZlbnQpIHsKICAgICAgICAgICAgICAgIC8vIENoZWNrIGZv\nciBleHBpcmVkIGNvbm5lY3Rpb24uCiAgICAgICAgICAgICAgICBpZiAoZXZl\nbnQuZ2V0U3RhdGUoKS5lcXVhbHMoV2F0Y2hlci5FdmVudC5LZWVwZXJTdGF0\nZS5FeHBpcmVkKSkgewogICAgICAgICAgICAgICAgICAgIExPRy5lcnJvcigi\nWksgY2xpZW50IGNvbm5lY3Rpb24gdG8gdGhlIgogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgKyAiIFpLIHNlcnZlciBoYXMgZXhwaXJlZCEiKTsKICAg\nICAgICAgICAgICAgICAgICBzaHV0ZG93bihFeGl0Q29kZS5aS19FWFBJUkVE\nKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAg\nICAgc3VwZXIucHJvY2VzcyhldmVudCk7CiAgICAgICAgICAgICAgICB9CiAg\nICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHprID0gWmtVdGlscy5j\ncmVhdGVDb25uZWN0ZWRab29rZWVwZXJDbGllbnQoY29uZi5nZXRaa1NlcnZl\ncnMoKSwgdyk7CiAgICAgICAgYXVkaXRvckVsZWN0b3IgPSBuZXcgQXVkaXRv\nckVsZWN0b3IoCiAgICAgICAgICAgICAgICBTdHJpbmdVdGlscy5hZGRyVG9T\ndHJpbmcoQm9va2llLmdldEJvb2tpZUFkZHJlc3MoY29uZikpLCBjb25mLCB6\nayk7CiAgICAgICAgcmVwbGljYXRpb25Xb3JrZXIgPSBuZXcgUmVwbGljYXRp\nb25Xb3JrZXIoemssIGNvbmYsCiAgICAgICAgICAgICAgICBCb29raWUuZ2V0\nQm9va2llQWRkcmVzcyhjb25mKSk7CiAgICAgICAgZGVhdGhXYXRjaGVyID0g\nbmV3IEF1dG9SZWNvdmVyeURlYXRoV2F0Y2hlcih0aGlzKTsKICAgIH0KCiAg\nICAvKgogICAgICogU3RhcnQgZGFlbW9ucwogICAgICovCiAgICBwdWJsaWMg\ndm9pZCBzdGFydCgpIHRocm93cyBVbmF2YWlsYWJsZUV4Y2VwdGlvbiB7CiAg\nICAgICAgYXVkaXRvckVsZWN0b3Iuc3RhcnQoKTsKICAgICAgICByZXBsaWNh\ndGlvbldvcmtlci5zdGFydCgpOwogICAgICAgIGRlYXRoV2F0Y2hlci5zdGFy\ndCgpOwogICAgICAgIHJ1bm5pbmcgPSB0cnVlOwogICAgfQoKICAgIC8qCiAg\nICAgKiBXYWl0cyB0aWxsIGFsbCBkYWVtb25zIGpvaW5zCiAgICAgKi8KICAg\nIHB1YmxpYyB2b2lkIGpvaW4oKSB0aHJvd3MgSW50ZXJydXB0ZWRFeGNlcHRp\nb24gewogICAgICAgIGRlYXRoV2F0Y2hlci5qb2luKCk7CiAgICB9CgogICAg\nLyoKICAgICAqIFNodXRkb3duIGFsbCBkYWVtb25zIGdyYWNlZnVsbHkKICAg\nICAqLwogICAgcHVibGljIHZvaWQgc2h1dGRvd24oKSB7CiAgICAgICAgc2h1\ndGRvd24oRXhpdENvZGUuT0spOwogICAgfQoKICAgIHByaXZhdGUgdm9pZCBz\naHV0ZG93bihpbnQgZXhpdENvZGUpIHsKICAgICAgICBpZiAoc2h1dHRpbmdE\nb3duKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAg\nc2h1dHRpbmdEb3duID0gdHJ1ZTsKICAgICAgICBydW5uaW5nID0gZmFsc2U7\nCiAgICAgICAgdGhpcy5leGl0Q29kZSA9IGV4aXRDb2RlOwogICAgICAgIHRy\neSB7CiAgICAgICAgICAgIGRlYXRoV2F0Y2hlci5pbnRlcnJ1cHQoKTsKICAg\nICAgICAgICAgZGVhdGhXYXRjaGVyLmpvaW4oKTsKCiAgICAgICAgICAgIGF1\nZGl0b3JFbGVjdG9yLnNodXRkb3duKCk7CiAgICAgICAgfSBjYXRjaCAoSW50\nZXJydXB0ZWRFeGNlcHRpb24gZSkgewogICAgICAgICAgICBUaHJlYWQuY3Vy\ncmVudFRocmVhZCgpLmludGVycnVwdCgpOwogICAgICAgICAgICBMT0cud2Fy\nbigiSW50ZXJydXB0ZWQgc2h1dHRpbmcgZG93biBhdXRvIHJlY292ZXJ5Iiwg\nZSk7CiAgICAgICAgfQoKICAgICAgICByZXBsaWNhdGlvbldvcmtlci5zaHV0\nZG93bigpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHprLmNsb3NlKCk7\nCiAgICAgICAgfSBjYXRjaCAoSW50ZXJydXB0ZWRFeGNlcHRpb24gZSkgewog\nICAgICAgICAgICBUaHJlYWQuY3VycmVudFRocmVhZCgpLmludGVycnVwdCgp\nOwogICAgICAgICAgICBMT0cud2FybigiSW50ZXJydXB0ZWQgc2h1dHRpbmcg\nZG93biBhdXRvIHJlY292ZXJ5IiwgZSk7CiAgICAgICAgfQogICAgfQoKICAg\nIHByaXZhdGUgaW50IGdldEV4aXRDb2RlKCkgewogICAgICAgIHJldHVybiBl\neGl0Q29kZTsKICAgIH0KCiAgICAvKiogSXMgYXV0by1yZWNvdmVyeSBzZXJ2\naWNlIHJ1bm5pbmc/ICovCiAgICBwdWJsaWMgYm9vbGVhbiBpc0F1dG9SZWNv\ndmVyeVJ1bm5pbmcoKSB7CiAgICAgICAgcmV0dXJuIHJ1bm5pbmc7CiAgICB9\nCgogICAgLyoKICAgICAqIERlYXRoV2F0Y2hlciBmb3IgQXV0b1JlY292ZXJ5\nIGRhZW1vbnMuCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGljIGNsYXNzIEF1\ndG9SZWNvdmVyeURlYXRoV2F0Y2hlciBleHRlbmRzIFRocmVhZCB7CiAgICAg\nICAgcHJpdmF0ZSBpbnQgd2F0Y2hJbnRlcnZhbDsKICAgICAgICBwcml2YXRl\nIEF1dG9SZWNvdmVyeU1haW4gYXV0b1JlY292ZXJ5TWFpbjsKCiAgICAgICAg\ncHVibGljIEF1dG9SZWNvdmVyeURlYXRoV2F0Y2hlcihBdXRvUmVjb3ZlcnlN\nYWluIGF1dG9SZWNvdmVyeU1haW4pIHsKICAgICAgICAgICAgc3VwZXIoIkF1\ndG9SZWNvdmVyeURlYXRoV2F0Y2hlci0iCiAgICAgICAgICAgICAgICAgICAg\nKyBhdXRvUmVjb3ZlcnlNYWluLmNvbmYuZ2V0Qm9va2llUG9ydCgpKTsKICAg\nICAgICAgICAgdGhpcy5hdXRvUmVjb3ZlcnlNYWluID0gYXV0b1JlY292ZXJ5\nTWFpbjsKICAgICAgICAgICAgd2F0Y2hJbnRlcnZhbCA9IGF1dG9SZWNvdmVy\neU1haW4uY29uZi5nZXREZWF0aFdhdGNoSW50ZXJ2YWwoKTsKICAgICAgICB9\nCgogICAgICAgIEBPdmVycmlkZQogICAgICAgIHB1YmxpYyB2b2lkIHJ1bigp\nIHsKICAgICAgICAgICAgd2hpbGUgKHRydWUpIHsKICAgICAgICAgICAgICAg\nIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgVGhyZWFkLnNsZWVwKHdhdGNo\nSW50ZXJ2YWwpOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoSW50ZXJydXB0\nZWRFeGNlcHRpb24gaWUpIHsKICAgICAgICAgICAgICAgICAgICBicmVhazsK\nICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vIElmIGFueSBv\nbmUgc2VydmljZSBub3QgcnVubmluZywgdGhlbiBzaHV0ZG93biBwZWVyLgog\nICAgICAgICAgICAgICAgaWYgKCFhdXRvUmVjb3ZlcnlNYWluLmF1ZGl0b3JF\nbGVjdG9yLmlzUnVubmluZygpCiAgICAgICAgICAgICAgICAgICAgfHwgIWF1\ndG9SZWNvdmVyeU1haW4ucmVwbGljYXRpb25Xb3JrZXIuaXNSdW5uaW5nKCkp\nIHsKICAgICAgICAgICAgICAgICAgICBhdXRvUmVjb3ZlcnlNYWluLnNodXRk\nb3duKCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAg\nICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgcHJp\ndmF0ZSBzdGF0aWMgZmluYWwgT3B0aW9ucyBvcHRzID0gbmV3IE9wdGlvbnMo\nKTsKICAgIHN0YXRpYyB7CiAgICAgICAgb3B0cy5hZGRPcHRpb24oImMiLCAi\nY29uZiIsIHRydWUsICJCb29raWUgc2VydmVyIGNvbmZpZ3VyYXRpb24iKTsK\nICAgICAgICBvcHRzLmFkZE9wdGlvbigiaCIsICJoZWxwIiwgZmFsc2UsICJQ\ncmludCBoZWxwIG1lc3NhZ2UiKTsKICAgIH0KCiAgICAvKgogICAgICogUHJp\nbnQgdXNhZ2UKICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCBwcmlu\ndFVzYWdlKCkgewogICAgICAgIEhlbHBGb3JtYXR0ZXIgaGYgPSBuZXcgSGVs\ncEZvcm1hdHRlcigpOwogICAgICAgIGhmLnByaW50SGVscCgiQXV0b1JlY292\nZXJ5TWFpbiBbb3B0aW9uc11cbiIsIG9wdHMpOwogICAgfQoKICAgIC8qCiAg\nICAgKiBsb2FkIGNvbmZpZ3VyYXRpb25zIGZyb20gZmlsZS4KICAgICAqLwog\nICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCBsb2FkQ29uZkZpbGUoU2VydmVyQ29u\nZmlndXJhdGlvbiBjb25mLCBTdHJpbmcgY29uZkZpbGUpCiAgICAgICAgICAg\nIHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gewogICAgICAgIHRy\neSB7CiAgICAgICAgICAgIGNvbmYubG9hZENvbmYobmV3IEZpbGUoY29uZkZp\nbGUpLnRvVVJJKCkudG9VUkwoKSk7CiAgICAgICAgfSBjYXRjaCAoTWFsZm9y\nbWVkVVJMRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgTE9HLmVycm9yKCJD\nb3VsZCBub3Qgb3BlbiBjb25maWd1cmF0aW9uIGZpbGU6ICIgKyBjb25mRmls\nZSwgZSk7CiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRF\neGNlcHRpb24oKTsKICAgICAgICB9IGNhdGNoIChDb25maWd1cmF0aW9uRXhj\nZXB0aW9uIGUpIHsKICAgICAgICAgICAgTE9HLmVycm9yKCJNYWxmb3JtZWQg\nY29uZmlndXJhdGlvbiBmaWxlOiAiICsgY29uZkZpbGUsIGUpOwogICAgICAg\nICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCk7CiAg\nICAgICAgfQogICAgICAgIExPRy5pbmZvKCJVc2luZyBjb25maWd1cmF0aW9u\nIGZpbGUgIiArIGNvbmZGaWxlKTsKICAgIH0KCiAgICAvKgogICAgICogUGFy\nc2UgY29uc29sZSBhcmdzCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGljIFNl\ncnZlckNvbmZpZ3VyYXRpb24gcGFyc2VBcmdzKFN0cmluZ1tdIGFyZ3MpCiAg\nICAgICAgICAgIHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gewog\nICAgICAgIHRyeSB7CiAgICAgICAgICAgIEJhc2ljUGFyc2VyIHBhcnNlciA9\nIG5ldyBCYXNpY1BhcnNlcigpOwogICAgICAgICAgICBDb21tYW5kTGluZSBj\nbWRMaW5lID0gcGFyc2VyLnBhcnNlKG9wdHMsIGFyZ3MpOwoKICAgICAgICAg\nICAgaWYgKGNtZExpbmUuaGFzT3B0aW9uKCdoJykpIHsKICAgICAgICAgICAg\nICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oKTsKICAg\nICAgICAgICAgfQoKICAgICAgICAgICAgU2VydmVyQ29uZmlndXJhdGlvbiBj\nb25mID0gbmV3IFNlcnZlckNvbmZpZ3VyYXRpb24oKTsKICAgICAgICAgICAg\nU3RyaW5nW10gbGVmdEFyZ3MgPSBjbWRMaW5lLmdldEFyZ3MoKTsKCiAgICAg\nICAgICAgIGlmIChjbWRMaW5lLmhhc09wdGlvbignYycpKSB7CiAgICAgICAg\nICAgICAgICBpZiAobnVsbCAhPSBsZWZ0QXJncyAmJiBsZWZ0QXJncy5sZW5n\ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVn\nYWxBcmd1bWVudEV4Y2VwdGlvbigpOwogICAgICAgICAgICAgICAgfQogICAg\nICAgICAgICAgICAgU3RyaW5nIGNvbmZGaWxlID0gY21kTGluZS5nZXRPcHRp\nb25WYWx1ZSgiYyIpOwogICAgICAgICAgICAgICAgbG9hZENvbmZGaWxlKGNv\nbmYsIGNvbmZGaWxlKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYg\nKG51bGwgIT0gbGVmdEFyZ3MgJiYgbGVmdEFyZ3MubGVuZ3RoID4gMCkgewog\nICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2Vw\ndGlvbigpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBjb25m\nOwogICAgICAgIH0gY2F0Y2ggKFBhcnNlRXhjZXB0aW9uIGUpIHsKICAgICAg\nICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihlKTsK\nICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4o\nU3RyaW5nW10gYXJncykgewogICAgICAgIFNlcnZlckNvbmZpZ3VyYXRpb24g\nY29uZiA9IG51bGw7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY29uZiA9\nIHBhcnNlQXJncyhhcmdzKTsKICAgICAgICB9IGNhdGNoIChJbGxlZ2FsQXJn\ndW1lbnRFeGNlcHRpb24gaWFlKSB7CiAgICAgICAgICAgIExPRy5lcnJvcigi\nRXJyb3IgcGFyc2luZyBjb21tYW5kIGxpbmUgYXJndW1lbnRzIDogIiwgaWFl\nKTsKICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKGlhZS5nZXRNZXNz\nYWdlKCkpOwogICAgICAgICAgICBwcmludFVzYWdlKCk7CiAgICAgICAgICAg\nIFN5c3RlbS5leGl0KEV4aXRDb2RlLklOVkFMSURfQ09ORik7CiAgICAgICAg\nfQoKICAgICAgICB0cnkgewogICAgICAgICAgICBmaW5hbCBBdXRvUmVjb3Zl\ncnlNYWluIGF1dG9SZWNvdmVyeU1haW4gPSBuZXcgQXV0b1JlY292ZXJ5TWFp\nbihjb25mKTsKICAgICAgICAgICAgYXV0b1JlY292ZXJ5TWFpbi5zdGFydCgp\nOwogICAgICAgICAgICBSdW50aW1lLmdldFJ1bnRpbWUoKS5hZGRTaHV0ZG93\nbkhvb2sobmV3IFRocmVhZCgpIHsKICAgICAgICAgICAgICAgIEBPdmVycmlk\nZQogICAgICAgICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkgewogICAgICAg\nICAgICAgICAgICAgIGF1dG9SZWNvdmVyeU1haW4uc2h1dGRvd24oKTsKICAg\nICAgICAgICAgICAgICAgICBMT0cuaW5mbygiU2h1dGRvd24gQXV0b1JlY292\nZXJ5TWFpbiBzdWNjZXNzZnVsbHkiKTsKICAgICAgICAgICAgICAgIH0KICAg\nICAgICAgICAgfSk7CiAgICAgICAgICAgIExPRy5pbmZvKCJSZWdpc3RlciBz\naHV0ZG93biBob29rIHN1Y2Nlc3NmdWxseSIpOwogICAgICAgICAgICBhdXRv\nUmVjb3ZlcnlNYWluLmpvaW4oKTsKICAgICAgICAgICAgU3lzdGVtLmV4aXQo\nYXV0b1JlY292ZXJ5TWFpbi5nZXRFeGl0Q29kZSgpKTsKICAgICAgICB9IGNh\ndGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBMT0cuZXJyb3IoIkV4\nY2VwdGlvbiBydW5uaW5nIEF1dG9SZWNvdmVyeU1haW4gOiAiLCBlKTsKICAg\nICAgICAgICAgU3lzdGVtLmV4aXQoRXhpdENvZGUuU0VSVkVSX0VYQ0VQVElP\nTik7CiAgICAgICAgfQogICAgfQp9Cg==\n","encoding":"base64"}

