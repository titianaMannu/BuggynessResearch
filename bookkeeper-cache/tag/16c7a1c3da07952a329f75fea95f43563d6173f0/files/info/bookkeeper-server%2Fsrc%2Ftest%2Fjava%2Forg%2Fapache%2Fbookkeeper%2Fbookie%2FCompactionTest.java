{"sha":"e9e07ad64425f4b2c17652591bf3ed160d21e43a","node_id":"MDQ6QmxvYjE1NzU5NTY6ZTllMDdhZDY0NDI1ZjRiMmMxNzY1MjU5MWJmM2VkMTYwZDIxZTQzYQ==","size":16664,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/e9e07ad64425f4b2c17652591bf3ed160d21e43a","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIuYm9va2llOwoKLyoKICoK\nICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9u\nIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vu\nc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlzdHJp\nYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRp\nb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNG\nIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNo\nZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7IHlv\ndSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2UK\nICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBv\nZiB0aGUgTGljZW5zZSBhdAogKgogKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9y\nZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQg\nYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsCiAq\nIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRp\nc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhPVVQgV0FS\nUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBlaXRoZXIg\nZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUK\nICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFu\nZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICoKICovCmlt\ncG9ydCBqYXZhLmlvLkZpbGU7CmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9u\nOwppbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEubmlv\nLkJ5dGVCdWZmZXI7CmltcG9ydCBqYXZhLnV0aWwuU2V0OwppbXBvcnQgamF2\nYS51dGlsLmNvbmN1cnJlbnQuYXRvbWljLkF0b21pY0Jvb2xlYW47CmltcG9y\ndCBqYXZhLnV0aWwuY29uY3VycmVudC5Db25jdXJyZW50SGFzaE1hcDsKaW1w\nb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsKaW1wb3J0IGphdmEudXRpbC5F\nbnVtZXJhdGlvbjsKCmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIubWV0\nYS5MZWRnZXJNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVy\nLmNvbmYuU2VydmVyQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUu\nYm9va2tlZXBlci5jbGllbnQuTGVkZ2VyRW50cnk7CmltcG9ydCBvcmcuYXBh\nY2hlLmJvb2trZWVwZXIuY2xpZW50LkxlZGdlckhhbmRsZTsKaW1wb3J0IG9y\nZy5hcGFjaGUuYm9va2tlZXBlci5jbGllbnQuQm9va0tlZXBlci5EaWdlc3RU\neXBlOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLnRlc3QuQm9va0tl\nZXBlckNsdXN0ZXJUZXN0Q2FzZTsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tl\nZXBlci51dGlsLlRlc3RVdGlsczsKCmltcG9ydCBvcmcuYXBhY2hlLnpvb2tl\nZXBlci5Bc3luY0NhbGxiYWNrOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2Vl\ncGVyLmNsaWVudC5MZWRnZXJNZXRhZGF0YTsKaW1wb3J0IG9yZy5hcGFjaGUu\nYm9va2tlZXBlci5wcm90by5Cb29ra2VlcGVySW50ZXJuYWxDYWxsYmFja3Mu\nR2VuZXJpY0NhbGxiYWNrOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVy\nLnByb3RvLkJvb2trZWVwZXJJbnRlcm5hbENhbGxiYWNrcy5Qcm9jZXNzb3I7\nCmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIudmVyc2lvbmluZy5WZXJz\naW9uOwoKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXI7CmltcG9ydCBvcmcuc2xm\nNGouTG9nZ2VyRmFjdG9yeTsKCmltcG9ydCBvcmcuanVuaXQuQmVmb3JlOwpp\nbXBvcnQgb3JnLmp1bml0LlRlc3Q7CgovKioKICogVGhpcyBjbGFzcyB0ZXN0\ncyB0aGUgZW50cnkgbG9nIGNvbXBhY3Rpb24gZnVuY3Rpb25hbGl0eS4KICov\nCnB1YmxpYyBjbGFzcyBDb21wYWN0aW9uVGVzdCBleHRlbmRzIEJvb2tLZWVw\nZXJDbHVzdGVyVGVzdENhc2UgewogICAgc3RhdGljIExvZ2dlciBMT0cgPSBM\nb2dnZXJGYWN0b3J5LmdldExvZ2dlcihDb21wYWN0aW9uVGVzdC5jbGFzcyk7\nCiAgICBEaWdlc3RUeXBlIGRpZ2VzdFR5cGU7CgogICAgc3RhdGljIGludCBF\nTlRSWV9TSVpFID0gMTAyNDsKICAgIHN0YXRpYyBpbnQgTlVNX0JPT0tJRVMg\nPSAxOwoKICAgIGludCBudW1FbnRyaWVzOwogICAgaW50IGdjV2FpdFRpbWU7\nCiAgICBkb3VibGUgbWlub3JDb21wYWN0aW9uVGhyZXNob2xkOwogICAgZG91\nYmxlIG1ham9yQ29tcGFjdGlvblRocmVzaG9sZDsKICAgIGxvbmcgbWlub3JD\nb21wYWN0aW9uSW50ZXJ2YWw7CiAgICBsb25nIG1ham9yQ29tcGFjdGlvbklu\ndGVydmFsOwoKICAgIFN0cmluZyBtc2c7CgogICAgcHVibGljIENvbXBhY3Rp\nb25UZXN0KCkgewogICAgICAgIHN1cGVyKE5VTV9CT09LSUVTKTsKCiAgICAg\nICAgdGhpcy5kaWdlc3RUeXBlID0gRGlnZXN0VHlwZS5DUkMzMjsKCiAgICAg\nICAgbnVtRW50cmllcyA9IDEwMDsKICAgICAgICBnY1dhaXRUaW1lID0gMTAw\nMDsKICAgICAgICBtaW5vckNvbXBhY3Rpb25UaHJlc2hvbGQgPSAwLjFmOwog\nICAgICAgIG1ham9yQ29tcGFjdGlvblRocmVzaG9sZCA9IDAuNWY7CiAgICAg\nICAgbWlub3JDb21wYWN0aW9uSW50ZXJ2YWwgPSAyICogZ2NXYWl0VGltZSAv\nIDEwMDA7CiAgICAgICAgbWFqb3JDb21wYWN0aW9uSW50ZXJ2YWwgPSA0ICog\nZ2NXYWl0VGltZSAvIDEwMDA7CgogICAgICAgIC8vIGEgZHVtbXkgbWVzc2Fn\nZQogICAgICAgIFN0cmluZ0J1aWxkZXIgbXNnU0IgPSBuZXcgU3RyaW5nQnVp\nbGRlcigpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgRU5UUllfU0la\nRTsgaSsrKSB7CiAgICAgICAgICAgIG1zZ1NCLmFwcGVuZCgiYSIpOwogICAg\nICAgIH0KICAgICAgICBtc2cgPSBtc2dTQi50b1N0cmluZygpOwogICAgfQoK\nICAgIEBCZWZvcmUKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgc2V0\nVXAoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICAvLyBTZXQgdXAgdGhl\nIGNvbmZpZ3VyYXRpb24gcHJvcGVydGllcyBuZWVkZWQuCiAgICAgICAgYmFz\nZUNvbmYuc2V0RW50cnlMb2dTaXplTGltaXQobnVtRW50cmllcyAqIEVOVFJZ\nX1NJWkUpOwogICAgICAgIGJhc2VDb25mLnNldEdjV2FpdFRpbWUoZ2NXYWl0\nVGltZSk7CiAgICAgICAgYmFzZUNvbmYuc2V0TWlub3JDb21wYWN0aW9uVGhy\nZXNob2xkKG1pbm9yQ29tcGFjdGlvblRocmVzaG9sZCk7CiAgICAgICAgYmFz\nZUNvbmYuc2V0TWFqb3JDb21wYWN0aW9uVGhyZXNob2xkKG1ham9yQ29tcGFj\ndGlvblRocmVzaG9sZCk7CiAgICAgICAgYmFzZUNvbmYuc2V0TWlub3JDb21w\nYWN0aW9uSW50ZXJ2YWwobWlub3JDb21wYWN0aW9uSW50ZXJ2YWwpOwogICAg\nICAgIGJhc2VDb25mLnNldE1ham9yQ29tcGFjdGlvbkludGVydmFsKG1ham9y\nQ29tcGFjdGlvbkludGVydmFsKTsKCiAgICAgICAgc3VwZXIuc2V0VXAoKTsK\nICAgIH0KCiAgICBMZWRnZXJIYW5kbGVbXSBwcmVwYXJlRGF0YShpbnQgbnVt\nRW50cnlMb2dzLCBib29sZWFuIGNoYW5nZU51bSkKICAgICAgICB0aHJvd3Mg\nRXhjZXB0aW9uIHsKICAgICAgICAvLyBzaW5jZSBhbiBlbnRyeSBsb2cgZmls\nZSBjYW4gaG9sZCBhdCBtb3N0IDEwMCBlbnRyaWVzCiAgICAgICAgLy8gZmly\nc3QgbGVkZ2VyIHdyaXRlIDIgZW50cmllcywgd2hpY2ggaXMgbGVzcyB0aGFu\nIGxvdyB3YXRlciBtYXJrCiAgICAgICAgaW50IG51bTEgPSAyOwogICAgICAg\nIC8vIHRoaXJkIGxlZGdlciB3cml0ZSBtb3JlIHRoYW4gaGlnaCB3YXRlciBt\nYXJrIGVudHJpZXMKICAgICAgICBpbnQgbnVtMyA9IChpbnQpKG51bUVudHJp\nZXMgKiAwLjdmKTsKICAgICAgICAvLyBzZWNvbmQgbGVkZ2VyIHdyaXRlIHJl\nbWFpbmluZyBlbnRyaWVzLCB3aGljaCBpcyBoaWdoZXIgdGhhbiBsb3cgd2F0\nZXIgbWFyawogICAgICAgIC8vIGFuZCBsZXNzIHRoYW4gaGlnaCB3YXRlciBt\nYXJrCiAgICAgICAgaW50IG51bTIgPSBudW1FbnRyaWVzIC0gbnVtMyAtIG51\nbTE7CgogICAgICAgIExlZGdlckhhbmRsZVtdIGxocyA9IG5ldyBMZWRnZXJI\nYW5kbGVbM107CiAgICAgICAgZm9yIChpbnQgaT0wOyBpPDM7ICsraSkgewog\nICAgICAgICAgICBsaHNbaV0gPSBia2MuY3JlYXRlTGVkZ2VyKE5VTV9CT09L\nSUVTLCBOVU1fQk9PS0lFUywgZGlnZXN0VHlwZSwgIiIuZ2V0Qnl0ZXMoKSk7\nCiAgICAgICAgfQoKICAgICAgICBmb3IgKGludCBuID0gMDsgbiA8IG51bUVu\ndHJ5TG9nczsgbisrKSB7CiAgICAgICAgICAgIGZvciAoaW50IGsgPSAwOyBr\nIDwgbnVtMTsgaysrKSB7CiAgICAgICAgICAgICAgICBsaHNbMF0uYWRkRW50\ncnkobXNnLmdldEJ5dGVzKCkpOwogICAgICAgICAgICB9CiAgICAgICAgICAg\nIGZvciAoaW50IGsgPSAwOyBrIDwgbnVtMjsgaysrKSB7CiAgICAgICAgICAg\nICAgICBsaHNbMV0uYWRkRW50cnkobXNnLmdldEJ5dGVzKCkpOwogICAgICAg\nICAgICB9CiAgICAgICAgICAgIGZvciAoaW50IGsgPSAwOyBrIDwgbnVtMzsg\naysrKSB7CiAgICAgICAgICAgICAgICBsaHNbMl0uYWRkRW50cnkobXNnLmdl\ndEJ5dGVzKCkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChjaGFu\nZ2VOdW0pIHsKICAgICAgICAgICAgICAgIC0tbnVtMjsKICAgICAgICAgICAg\nICAgICsrbnVtMzsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAg\ncmV0dXJuIGxoczsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgdmVyaWZ5TGVk\nZ2VyKGxvbmcgbGlkLCBsb25nIHN0YXJ0RW50cnlJZCwgbG9uZyBlbmRFbnRy\neUlkKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBMZWRnZXJIYW5kbGUg\nbGggPSBia2Mub3BlbkxlZGdlcihsaWQsIGRpZ2VzdFR5cGUsICIiLmdldEJ5\ndGVzKCkpOwogICAgICAgIEVudW1lcmF0aW9uPExlZGdlckVudHJ5PiBlbnRy\naWVzID0gbGgucmVhZEVudHJpZXMoc3RhcnRFbnRyeUlkLCBlbmRFbnRyeUlk\nKTsKICAgICAgICB3aGlsZSAoZW50cmllcy5oYXNNb3JlRWxlbWVudHMoKSkg\newogICAgICAgICAgICBMZWRnZXJFbnRyeSBlbnRyeSA9IGVudHJpZXMubmV4\ndEVsZW1lbnQoKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKG1zZywgbmV3\nIFN0cmluZyhlbnRyeS5nZXRFbnRyeSgpKSk7CiAgICAgICAgfQogICAgfQoK\nICAgIEBUZXN0KHRpbWVvdXQ9NjAwMDApCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nRGlzYWJsZUNvbXBhY3Rpb24oKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAg\nICAvLyBwcmVwYXJlIGRhdGEKICAgICAgICBMZWRnZXJIYW5kbGVbXSBsaHMg\nPSBwcmVwYXJlRGF0YSgzLCBmYWxzZSk7CgogICAgICAgIC8vIGRpc2FibGUg\nY29tcGFjdGlvbgogICAgICAgIGJhc2VDb25mLnNldE1pbm9yQ29tcGFjdGlv\nblRocmVzaG9sZCgwLjBmKTsKICAgICAgICBiYXNlQ29uZi5zZXRNYWpvckNv\nbXBhY3Rpb25UaHJlc2hvbGQoMC4wZik7CgogICAgICAgIC8vIHJlc3RhcnQg\nYm9va2llcwogICAgICAgIHJlc3RhcnRCb29raWVzKGJhc2VDb25mKTsKCiAg\nICAgICAgLy8gcmVtb3ZlIGxlZGdlcjIgYW5kIGxlZGdlcjMKICAgICAgICAv\nLyBzbyBlbnRyeSBsb2cgMSBhbmQgMiB3b3VsZCBoYXZlIGxlZGdlcjEgZW50\ncmllcyBsZWZ0CiAgICAgICAgYmtjLmRlbGV0ZUxlZGdlcihsaHNbMV0uZ2V0\nSWQoKSk7CiAgICAgICAgYmtjLmRlbGV0ZUxlZGdlcihsaHNbMl0uZ2V0SWQo\nKSk7CiAgICAgICAgTE9HLmluZm8oIkZpbmlzaGVkIGRlbGV0aW5nIHRoZSBs\nZWRnZXJzIGNvbnRhaW5zIG1vc3QgZW50cmllcy4iKTsKICAgICAgICBUaHJl\nYWQuc2xlZXAoYmFzZUNvbmYuZ2V0TWFqb3JDb21wYWN0aW9uSW50ZXJ2YWwo\nKSAqIDEwMDAKICAgICAgICAgICAgICAgICAgICsgYmFzZUNvbmYuZ2V0R2NX\nYWl0VGltZSgpKTsKCiAgICAgICAgLy8gZW50cnkgbG9ncyAoWzAsMV0ubG9n\nKSBzaG91bGQgbm90IGJlIGNvbXBhY3RlZC4KICAgICAgICBmb3IgKEZpbGUg\nbGVkZ2VyRGlyZWN0b3J5IDogdG1wRGlycykgewogICAgICAgICAgICBhc3Nl\ncnRUcnVlKCJOb3QgRm91bmQgZW50cnkgbG9nIGZpbGUgKFswLDFdLmxvZyB0\naGF0IHNob3VsZCBoYXZlIGJlZW4gY29tcGFjdGVkIGluIGxlZGdlckRpcmVj\ndG9yeTogIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBsZWRnZXJE\naXJlY3RvcnksIFRlc3RVdGlscy5oYXNMb2dGaWxlcyhsZWRnZXJEaXJlY3Rv\ncnksIGZhbHNlLCAwLCAxKSk7CiAgICAgICAgfQogICAgfQoKICAgIEBUZXN0\nKHRpbWVvdXQ9NjAwMDApCiAgICBwdWJsaWMgdm9pZCB0ZXN0TWlub3JDb21w\nYWN0aW9uKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgLy8gcHJlcGFy\nZSBkYXRhCiAgICAgICAgTGVkZ2VySGFuZGxlW10gbGhzID0gcHJlcGFyZURh\ndGEoMywgZmFsc2UpOwoKICAgICAgICBmb3IgKExlZGdlckhhbmRsZSBsaCA6\nIGxocykgewogICAgICAgICAgICBsaC5jbG9zZSgpOwogICAgICAgIH0KCiAg\nICAgICAgLy8gZGlzYWJsZSBtYWpvciBjb21wYWN0aW9uCiAgICAgICAgYmFz\nZUNvbmYuc2V0TWFqb3JDb21wYWN0aW9uVGhyZXNob2xkKDAuMGYpOwoKICAg\nICAgICAvLyByZXN0YXJ0IGJvb2tpZXMKICAgICAgICByZXN0YXJ0Qm9va2ll\ncyhiYXNlQ29uZik7CgogICAgICAgIC8vIHJlbW92ZSBsZWRnZXIyIGFuZCBs\nZWRnZXIzCiAgICAgICAgYmtjLmRlbGV0ZUxlZGdlcihsaHNbMV0uZ2V0SWQo\nKSk7CiAgICAgICAgYmtjLmRlbGV0ZUxlZGdlcihsaHNbMl0uZ2V0SWQoKSk7\nCgogICAgICAgIExPRy5pbmZvKCJGaW5pc2hlZCBkZWxldGluZyB0aGUgbGVk\nZ2VycyBjb250YWlucyBtb3N0IGVudHJpZXMuIik7CiAgICAgICAgVGhyZWFk\nLnNsZWVwKGJhc2VDb25mLmdldE1pbm9yQ29tcGFjdGlvbkludGVydmFsKCkg\nKiAxMDAwCiAgICAgICAgICAgICAgICAgICArIGJhc2VDb25mLmdldEdjV2Fp\ndFRpbWUoKSk7CgogICAgICAgIC8vIGVudHJ5IGxvZ3MgKFswLDEsMl0ubG9n\nKSBzaG91bGQgYmUgY29tcGFjdGVkLgogICAgICAgIGZvciAoRmlsZSBsZWRn\nZXJEaXJlY3RvcnkgOiB0bXBEaXJzKSB7CiAgICAgICAgICAgIGFzc2VydEZh\nbHNlKCJGb3VuZCBlbnRyeSBsb2cgZmlsZSAoWzAsMSwyXS5sb2cgdGhhdCBz\naG91bGQgaGF2ZSBub3QgYmVlbiBjb21wYWN0ZWQgaW4gbGVkZ2VyRGlyZWN0\nb3J5OiAiIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBsZWRnZXJE\naXJlY3RvcnksIFRlc3RVdGlscy5oYXNMb2dGaWxlcyhsZWRnZXJEaXJlY3Rv\ncnksIHRydWUsIDAsIDEsIDIpKTsKICAgICAgICB9CgogICAgICAgIC8vIGV2\nZW4gZW50cnkgbG9nIGZpbGVzIGFyZSByZW1vdmVkLCB3ZSBzdGlsbCBjYW4g\nYWNjZXNzIGVudHJpZXMgZm9yIGxlZGdlcjEKICAgICAgICAvLyBzaW5jZSB0\naG9zZSBlbnRyaWVzIGhhcyBiZWVuIGNvbXBhY3RlZCB0byBuZXcgZW50cnkg\nbG9nCiAgICAgICAgdmVyaWZ5TGVkZ2VyKGxoc1swXS5nZXRJZCgpLCAwLCBs\naHNbMF0uZ2V0TGFzdEFkZENvbmZpcm1lZCgpKTsKICAgIH0KCiAgICBAVGVz\ndCh0aW1lb3V0PTYwMDAwKQogICAgcHVibGljIHZvaWQgdGVzdE1ham9yQ29t\ncGFjdGlvbigpIHRocm93cyBFeGNlcHRpb24gewoKICAgICAgICAvLyBwcmVw\nYXJlIGRhdGEKICAgICAgICBMZWRnZXJIYW5kbGVbXSBsaHMgPSBwcmVwYXJl\nRGF0YSgzLCB0cnVlKTsKCiAgICAgICAgZm9yIChMZWRnZXJIYW5kbGUgbGgg\nOiBsaHMpIHsKICAgICAgICAgICAgbGguY2xvc2UoKTsKICAgICAgICB9Cgog\nICAgICAgIC8vIGRpc2FibGUgbWlub3IgY29tcGFjdGlvbgogICAgICAgIGJh\nc2VDb25mLnNldE1pbm9yQ29tcGFjdGlvblRocmVzaG9sZCgwLjBmKTsKCiAg\nICAgICAgLy8gcmVzdGFydCBib29raWVzCiAgICAgICAgcmVzdGFydEJvb2tp\nZXMoYmFzZUNvbmYpOwoKICAgICAgICAvLyByZW1vdmUgbGVkZ2VyMSBhbmQg\nbGVkZ2VyMwogICAgICAgIGJrYy5kZWxldGVMZWRnZXIobGhzWzBdLmdldElk\nKCkpOwogICAgICAgIGJrYy5kZWxldGVMZWRnZXIobGhzWzJdLmdldElkKCkp\nOwogICAgICAgIExPRy5pbmZvKCJGaW5pc2hlZCBkZWxldGluZyB0aGUgbGVk\nZ2VycyBjb250YWlucyBtb3N0IGVudHJpZXMuIik7CgogICAgICAgIFRocmVh\nZC5zbGVlcChiYXNlQ29uZi5nZXRNYWpvckNvbXBhY3Rpb25JbnRlcnZhbCgp\nICogMTAwMAogICAgICAgICAgICAgICAgICAgKyBiYXNlQ29uZi5nZXRHY1dh\naXRUaW1lKCkpOwoKICAgICAgICAvLyBlbnRyeSBsb2dzIChbMCwxLDJdLmxv\nZykgc2hvdWxkIGJlIGNvbXBhY3RlZAogICAgICAgIGZvciAoRmlsZSBsZWRn\nZXJEaXJlY3RvcnkgOiB0bXBEaXJzKSB7CiAgICAgICAgICAgIGFzc2VydEZh\nbHNlKCJGb3VuZCBlbnRyeSBsb2cgZmlsZSAoWzAsMSwyXS5sb2cgdGhhdCBz\naG91bGQgaGF2ZSBub3QgYmVlbiBjb21wYWN0ZWQgaW4gbGVkZ2VyRGlyZWN0\nb3J5OiAiCiAgICAgICAgICAgICAgICAgICAgICArIGxlZGdlckRpcmVjdG9y\neSwgVGVzdFV0aWxzLmhhc0xvZ0ZpbGVzKGxlZGdlckRpcmVjdG9yeSwgdHJ1\nZSwgMCwgMSwgMikpOwogICAgICAgIH0KCiAgICAgICAgLy8gZXZlbiBlbnRy\neSBsb2cgZmlsZXMgYXJlIHJlbW92ZWQsIHdlIHN0aWxsIGNhbiBhY2Nlc3Mg\nZW50cmllcyBmb3IgbGVkZ2VyMgogICAgICAgIC8vIHNpbmNlIHRob3NlIGVu\ndHJpZXMgaGFzIGJlZW4gY29tcGFjdGVkIHRvIG5ldyBlbnRyeSBsb2cKICAg\nICAgICB2ZXJpZnlMZWRnZXIobGhzWzFdLmdldElkKCksIDAsIGxoc1sxXS5n\nZXRMYXN0QWRkQ29uZmlybWVkKCkpOwogICAgfQoKICAgIEBUZXN0KHRpbWVv\ndXQ9NjAwMDApCiAgICBwdWJsaWMgdm9pZCB0ZXN0TWFqb3JDb21wYWN0aW9u\nQWJvdmVUaHJlc2hvbGQoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICAv\nLyBwcmVwYXJlIGRhdGEKICAgICAgICBMZWRnZXJIYW5kbGVbXSBsaHMgPSBw\ncmVwYXJlRGF0YSgzLCBmYWxzZSk7CgogICAgICAgIGZvciAoTGVkZ2VySGFu\nZGxlIGxoIDogbGhzKSB7CiAgICAgICAgICAgIGxoLmNsb3NlKCk7CiAgICAg\nICAgfQoKICAgICAgICAvLyByZW1vdmUgbGVkZ2VyMSBhbmQgbGVkZ2VyMgog\nICAgICAgIGJrYy5kZWxldGVMZWRnZXIobGhzWzBdLmdldElkKCkpOwogICAg\nICAgIGJrYy5kZWxldGVMZWRnZXIobGhzWzFdLmdldElkKCkpOwogICAgICAg\nIExPRy5pbmZvKCJGaW5pc2hlZCBkZWxldGluZyB0aGUgbGVkZ2VycyBjb250\nYWlucyBsZXNzIGVudHJpZXMuIik7CiAgICAgICAgVGhyZWFkLnNsZWVwKGJh\nc2VDb25mLmdldE1ham9yQ29tcGFjdGlvbkludGVydmFsKCkgKiAxMDAwCiAg\nICAgICAgICAgICAgICAgICArIGJhc2VDb25mLmdldEdjV2FpdFRpbWUoKSk7\nCgogICAgICAgIC8vIGVudHJ5IGxvZ3MgKFswLDEsMl0ubG9nKSBzaG91bGQg\nbm90IGJlIGNvbXBhY3RlZAogICAgICAgIGZvciAoRmlsZSBsZWRnZXJEaXJl\nY3RvcnkgOiB0bXBEaXJzKSB7CiAgICAgICAgICAgIGFzc2VydFRydWUoIk5v\ndCBGb3VuZCBlbnRyeSBsb2cgZmlsZSAoWzEsMl0ubG9nIHRoYXQgc2hvdWxk\nIGhhdmUgYmVlbiBjb21wYWN0ZWQgaW4gbGVkZ2VyRGlyZWN0b3J5OiAiCiAg\nICAgICAgICAgICAgICAgICAgICsgbGVkZ2VyRGlyZWN0b3J5LCBUZXN0VXRp\nbHMuaGFzTG9nRmlsZXMobGVkZ2VyRGlyZWN0b3J5LCBmYWxzZSwgMCwgMSwg\nMikpOwogICAgICAgIH0KICAgIH0KCiAgICBAVGVzdCh0aW1lb3V0PTYwMDAw\nKQogICAgcHVibGljIHZvaWQgdGVzdENvbXBhY3Rpb25TbWFsbEVudHJ5TG9n\ncygpIHRocm93cyBFeGNlcHRpb24gewoKICAgICAgICAvLyBjcmVhdGUgYSBs\nZWRnZXIgdG8gd3JpdGUgYSBmZXcgZW50cmllcwogICAgICAgIExlZGdlckhh\nbmRsZSBhbGggPSBia2MuY3JlYXRlTGVkZ2VyKE5VTV9CT09LSUVTLCBOVU1f\nQk9PS0lFUywgZGlnZXN0VHlwZSwgIiIuZ2V0Qnl0ZXMoKSk7CiAgICAgICAg\nZm9yIChpbnQgaT0wOyBpPDM7IGkrKykgewogICAgICAgICAgIGFsaC5hZGRF\nbnRyeShtc2cuZ2V0Qnl0ZXMoKSk7CiAgICAgICAgfQogICAgICAgIGFsaC5j\nbG9zZSgpOwoKICAgICAgICAvLyByZXN0YXJ0IGJvb2tpZSB0byByb2xsIGVu\ndHJ5IGxvZyBmaWxlcwogICAgICAgIHJlc3RhcnRCb29raWVzKCk7CgogICAg\nICAgIC8vIHByZXBhcmUgZGF0YQogICAgICAgIExlZGdlckhhbmRsZVtdIGxo\ncyA9IHByZXBhcmVEYXRhKDMsIGZhbHNlKTsKCiAgICAgICAgZm9yIChMZWRn\nZXJIYW5kbGUgbGggOiBsaHMpIHsKICAgICAgICAgICAgbGguY2xvc2UoKTsK\nICAgICAgICB9CgogICAgICAgIC8vIHJlbW92ZSBsZWRnZXIyIGFuZCBsZWRn\nZXIzCiAgICAgICAgYmtjLmRlbGV0ZUxlZGdlcihsaHNbMV0uZ2V0SWQoKSk7\nCiAgICAgICAgYmtjLmRlbGV0ZUxlZGdlcihsaHNbMl0uZ2V0SWQoKSk7CiAg\nICAgICAgTE9HLmluZm8oIkZpbmlzaGVkIGRlbGV0aW5nIHRoZSBsZWRnZXJz\nIGNvbnRhaW5zIG1vc3QgZW50cmllcy4iKTsKICAgICAgICBUaHJlYWQuc2xl\nZXAoYmFzZUNvbmYuZ2V0TWFqb3JDb21wYWN0aW9uSW50ZXJ2YWwoKSAqIDEw\nMDAKICAgICAgICAgICAgICAgICAgICsgYmFzZUNvbmYuZ2V0R2NXYWl0VGlt\nZSgpKTsKCiAgICAgICAgLy8gZW50cnkgbG9ncyAoMC5sb2cpIHNob3VsZCBu\nb3QgYmUgY29tcGFjdGVkCiAgICAgICAgLy8gZW50cnkgbG9ncyAoWzEsMiwz\nXS5sb2cpIHNob3VsZCBiZSBjb21wYWN0ZWQuCiAgICAgICAgZm9yIChGaWxl\nIGxlZGdlckRpcmVjdG9yeSA6IHRtcERpcnMpIHsKICAgICAgICAgICAgYXNz\nZXJ0VHJ1ZSgiTm90IEZvdW5kIGVudHJ5IGxvZyBmaWxlIChbMF0ubG9nIHRo\nYXQgc2hvdWxkIGhhdmUgYmVlbiBjb21wYWN0ZWQgaW4gbGVkZ2VyRGlyZWN0\nb3J5OiAiCiAgICAgICAgICAgICAgICAgICAgICsgbGVkZ2VyRGlyZWN0b3J5\nLCBUZXN0VXRpbHMuaGFzTG9nRmlsZXMobGVkZ2VyRGlyZWN0b3J5LCB0cnVl\nLCAwKSk7CiAgICAgICAgICAgIGFzc2VydEZhbHNlKCJGb3VuZCBlbnRyeSBs\nb2cgZmlsZSAoWzEsMiwzXS5sb2cgdGhhdCBzaG91bGQgaGF2ZSBub3QgYmVl\nbiBjb21wYWN0ZWQgaW4gbGVkZ2VyRGlyZWN0b3J5OiAiCiAgICAgICAgICAg\nICAgICAgICAgICArIGxlZGdlckRpcmVjdG9yeSwgVGVzdFV0aWxzLmhhc0xv\nZ0ZpbGVzKGxlZGdlckRpcmVjdG9yeSwgdHJ1ZSwgMSwgMiwgMykpOwogICAg\nICAgIH0KCiAgICAgICAgLy8gZXZlbiBlbnRyeSBsb2cgZmlsZXMgYXJlIHJl\nbW92ZWQsIHdlIHN0aWxsIGNhbiBhY2Nlc3MgZW50cmllcyBmb3IgbGVkZ2Vy\nMQogICAgICAgIC8vIHNpbmNlIHRob3NlIGVudHJpZXMgaGFzIGJlZW4gY29t\ncGFjdGVkIHRvIG5ldyBlbnRyeSBsb2cKICAgICAgICB2ZXJpZnlMZWRnZXIo\nbGhzWzBdLmdldElkKCksIDAsIGxoc1swXS5nZXRMYXN0QWRkQ29uZmlybWVk\nKCkpOwogICAgfQoKICAgIC8qKgogICAgICogVGVzdCB0aGF0IGNvbXBhY3Rp\nb24gZG9lc250IGFkZCB0byBpbmRleCB3aXRob3V0IGhhdmluZyBwZXJzaXN0\nZWQKICAgICAqIGVudHJ5bG9nIGZpcnN0LiBUaGlzIGlzIG5lZWRlZCBiZWNh\ndXNlIGNvbXBhY3Rpb24gZG9lc24ndCBnbyB0aHJvdWdoIHRoZSBqb3VybmFs\nLgogICAgICoge0BzZWUgaHR0cHM6Ly9pc3N1ZXMuYXBhY2hlLm9yZy9qaXJh\nL2Jyb3dzZS9CT09LS0VFUEVSLTUzMH0KICAgICAqIHtAc2VlIGh0dHBzOi8v\naXNzdWVzLmFwYWNoZS5vcmcvamlyYS9icm93c2UvQk9PS0tFRVBFUi02NjR9\nCiAgICAgKi8KICAgIEBUZXN0KHRpbWVvdXQ9NjAwMDApCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0Q29tcGFjdGlvblNhZmV0eSgpIHRocm93cyBFeGNlcHRpb24g\newogICAgICAgIHRlYXJEb3duKCk7IC8vIEkgZG9udCB3YW50IHRoZSB0ZXN0\nIGluZnJhc3RydWN0dXJlCiAgICAgICAgU2VydmVyQ29uZmlndXJhdGlvbiBj\nb25mID0gbmV3IFNlcnZlckNvbmZpZ3VyYXRpb24oKTsKICAgICAgICBmaW5h\nbCBTZXQ8TG9uZz4gbGVkZ2VycyA9IENvbGxlY3Rpb25zLm5ld1NldEZyb21N\nYXAobmV3IENvbmN1cnJlbnRIYXNoTWFwPExvbmcsIEJvb2xlYW4+KCkpOwog\nICAgICAgIExlZGdlck1hbmFnZXIgbWFuYWdlciA9IG5ldyBMZWRnZXJNYW5h\nZ2VyKCkgewogICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAg\nICAgICBwdWJsaWMgdm9pZCBjcmVhdGVMZWRnZXIoTGVkZ2VyTWV0YWRhdGEg\nbWV0YWRhdGEsIEdlbmVyaWNDYWxsYmFjazxMb25nPiBjYikgewogICAgICAg\nICAgICAgICAgICAgIHVuc3VwcG9ydGVkKCk7CiAgICAgICAgICAgICAgICB9\nCiAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgIHB1\nYmxpYyB2b2lkIHJlbW92ZUxlZGdlck1ldGFkYXRhKGxvbmcgbGVkZ2VySWQs\nIFZlcnNpb24gdmVyc2lvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIEdlbmVyaWNDYWxsYmFjazxWb2lkPiB2\nYikgewogICAgICAgICAgICAgICAgICAgIHVuc3VwcG9ydGVkKCk7CiAgICAg\nICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAg\nICAgICAgICAgIHB1YmxpYyB2b2lkIHJlYWRMZWRnZXJNZXRhZGF0YShsb25n\nIGxlZGdlcklkLCBHZW5lcmljQ2FsbGJhY2s8TGVkZ2VyTWV0YWRhdGE+IHJl\nYWRDYikgewogICAgICAgICAgICAgICAgICAgIHVuc3VwcG9ydGVkKCk7CiAg\nICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAg\nICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHdyaXRlTGVkZ2VyTWV0YWRhdGEo\nbG9uZyBsZWRnZXJJZCwgTGVkZ2VyTWV0YWRhdGEgbWV0YWRhdGEsCiAgICAg\nICAgICAgICAgICAgICAgICAgIEdlbmVyaWNDYWxsYmFjazxWb2lkPiBjYikg\newogICAgICAgICAgICAgICAgICAgIHVuc3VwcG9ydGVkKCk7CiAgICAgICAg\nICAgICAgICB9CiAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAg\nICAgICAgIHB1YmxpYyB2b2lkIGFzeW5jUHJvY2Vzc0xlZGdlcnMoUHJvY2Vz\nc29yPExvbmc+IHByb2Nlc3NvciwKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgQXN5bmNDYWxsYmFjay5Wb2lkQ2Fs\nbGJhY2sgZmluYWxDYiwKICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0\nIGNvbnRleHQsIGludCBzdWNjZXNzUmMsIGludCBmYWlsdXJlUmMpIHsKICAg\nICAgICAgICAgICAgICAgICB1bnN1cHBvcnRlZCgpOwogICAgICAgICAgICAg\nICAgfQogICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAg\nICBwdWJsaWMgdm9pZCBjbG9zZSgpIHRocm93cyBJT0V4Y2VwdGlvbiB7fQoK\nICAgICAgICAgICAgICAgIHZvaWQgdW5zdXBwb3J0ZWQoKSB7CiAgICAgICAg\nICAgICAgICAgICAgTE9HLmVycm9yKCJVbnN1cHBvcnRlZCBvcGVyYXRpb24g\nY2FsbGVkIiwgbmV3IEV4Y2VwdGlvbigpKTsKICAgICAgICAgICAgICAgICAg\nICB0aHJvdyBuZXcgUnVudGltZUV4Y2VwdGlvbigiVW5zdXBwb3J0ZWQgb3Ai\nKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIEBPdmVycmlk\nZQogICAgICAgICAgICAgICAgcHVibGljIExlZGdlclJhbmdlSXRlcmF0b3Ig\nZ2V0TGVkZ2VyUmFuZ2VzKCkgewogICAgICAgICAgICAgICAgICAgIGZpbmFs\nIEF0b21pY0Jvb2xlYW4gaGFzbmV4dCA9IG5ldyBBdG9taWNCb29sZWFuKHRy\ndWUpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTGVkZ2VyTWFu\nYWdlci5MZWRnZXJSYW5nZUl0ZXJhdG9yKCkgewogICAgICAgICAgICAgICAg\nICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgICAgICAgICAgcHVi\nbGljIGJvb2xlYW4gaGFzTmV4dCgpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaGFzbmV4dC5nZXQo\nKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAg\nICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgICAgICAgICAgcHVi\nbGljIExlZGdlck1hbmFnZXIuTGVkZ2VyUmFuZ2UgbmV4dCgpIHRocm93cyBJ\nT0V4Y2VwdGlvbiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNu\nZXh0LnNldChmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBy\nZXR1cm4gbmV3IExlZGdlck1hbmFnZXIuTGVkZ2VyUmFuZ2UobGVkZ2Vycyk7\nCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAg\nICB9OwogICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKCiAgICAg\nICAgRmlsZSB0bXBEaXIgPSBGaWxlLmNyZWF0ZVRlbXBGaWxlKCJia1Rlc3Qi\nLCAiLmRpciIpOwogICAgICAgIHRtcERpci5kZWxldGUoKTsKICAgICAgICB0\nbXBEaXIubWtkaXIoKTsKICAgICAgICBGaWxlIGN1ckRpciA9IEJvb2tpZS5n\nZXRDdXJyZW50RGlyZWN0b3J5KHRtcERpcik7CiAgICAgICAgQm9va2llLmNo\nZWNrRGlyZWN0b3J5U3RydWN0dXJlKGN1ckRpcik7CiAgICAgICAgY29uZi5z\nZXRMZWRnZXJEaXJOYW1lcyhuZXcgU3RyaW5nW10ge3RtcERpci50b1N0cmlu\nZygpfSk7CgogICAgICAgIGNvbmYuc2V0RW50cnlMb2dTaXplTGltaXQoRW50\ncnlMb2dnZXIuTE9HRklMRV9IRUFERVJfU0laRSArIDMgKiAoNCtFTlRSWV9T\nSVpFKSk7CiAgICAgICAgY29uZi5zZXRHY1dhaXRUaW1lKDEwMCk7CiAgICAg\nICAgY29uZi5zZXRNaW5vckNvbXBhY3Rpb25UaHJlc2hvbGQoMC43Zik7CiAg\nICAgICAgY29uZi5zZXRNYWpvckNvbXBhY3Rpb25UaHJlc2hvbGQoMC4wZik7\nCiAgICAgICAgY29uZi5zZXRNaW5vckNvbXBhY3Rpb25JbnRlcnZhbCgxKTsK\nICAgICAgICBjb25mLnNldE1ham9yQ29tcGFjdGlvbkludGVydmFsKDEwKTsK\nICAgICAgICBjb25mLnNldFBhZ2VMaW1pdCgxKTsKCiAgICAgICAgZmluYWwg\nYnl0ZVtdIEtFWSA9ICJmb29iYXIiLmdldEJ5dGVzKCk7CiAgICAgICAgRmls\nZSBsb2cwID0gbmV3IEZpbGUoY3VyRGlyLCAiMC5sb2ciKTsKICAgICAgICBM\nZWRnZXJEaXJzTWFuYWdlciBkaXJzID0gbmV3IExlZGdlckRpcnNNYW5hZ2Vy\nKGNvbmYpOwogICAgICAgIGFzc2VydEZhbHNlKCJMb2cgc2hvdWxkbnQgZXhp\nc3QiLCBsb2cwLmV4aXN0cygpKTsKICAgICAgICBJbnRlcmxlYXZlZExlZGdl\nclN0b3JhZ2Ugc3RvcmFnZSA9IG5ldyBJbnRlcmxlYXZlZExlZGdlclN0b3Jh\nZ2UoY29uZiwgbWFuYWdlciwgZGlycyk7CiAgICAgICAgbGVkZ2Vycy5hZGQo\nMWwpOwogICAgICAgIGxlZGdlcnMuYWRkKDJsKTsKICAgICAgICBsZWRnZXJz\nLmFkZCgzbCk7CiAgICAgICAgc3RvcmFnZS5zZXRNYXN0ZXJLZXkoMSwgS0VZ\nKTsKICAgICAgICBzdG9yYWdlLnNldE1hc3RlcktleSgyLCBLRVkpOwogICAg\nICAgIHN0b3JhZ2Uuc2V0TWFzdGVyS2V5KDMsIEtFWSk7CiAgICAgICAgc3Rv\ncmFnZS5hZGRFbnRyeShnZW5FbnRyeSgxLCAxLCBFTlRSWV9TSVpFKSk7CiAg\nICAgICAgc3RvcmFnZS5hZGRFbnRyeShnZW5FbnRyeSgyLCAxLCBFTlRSWV9T\nSVpFKSk7CiAgICAgICAgc3RvcmFnZS5hZGRFbnRyeShnZW5FbnRyeSgyLCAy\nLCBFTlRSWV9TSVpFKSk7CiAgICAgICAgc3RvcmFnZS5hZGRFbnRyeShnZW5F\nbnRyeSgzLCAyLCBFTlRSWV9TSVpFKSk7CiAgICAgICAgc3RvcmFnZS5mbHVz\naCgpOwogICAgICAgIHN0b3JhZ2Uuc2h1dGRvd24oKTsKCiAgICAgICAgYXNz\nZXJ0VHJ1ZSgiTG9nIHNob3VsZCBleGlzdCIsIGxvZzAuZXhpc3RzKCkpOwog\nICAgICAgIGxlZGdlcnMucmVtb3ZlKDJsKTsKICAgICAgICBsZWRnZXJzLnJl\nbW92ZSgzbCk7CgogICAgICAgIHN0b3JhZ2UgPSBuZXcgSW50ZXJsZWF2ZWRM\nZWRnZXJTdG9yYWdlKGNvbmYsIG1hbmFnZXIsIGRpcnMpOwogICAgICAgIHN0\nb3JhZ2Uuc3RhcnQoKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IDEw\nOyBpKyspIHsKICAgICAgICAgICAgaWYgKCFsb2cwLmV4aXN0cygpKSB7CiAg\nICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAg\nICBUaHJlYWQuc2xlZXAoMTAwMCk7CiAgICAgICAgICAgIHN0b3JhZ2UuZW50\ncnlMb2dnZXIuZmx1c2goKTsgLy8gc2ltdWxhdGUgc3luYyB0aHJlYWQKICAg\nICAgICB9CiAgICAgICAgYXNzZXJ0RmFsc2UoIkxvZyBzaG91bGRudCBleGlz\ndCIsIGxvZzAuZXhpc3RzKCkpOwoKICAgICAgICBsZWRnZXJzLmFkZCg0bCk7\nCiAgICAgICAgc3RvcmFnZS5zZXRNYXN0ZXJLZXkoNCwgS0VZKTsKICAgICAg\nICBzdG9yYWdlLmFkZEVudHJ5KGdlbkVudHJ5KDQsIDEsIEVOVFJZX1NJWkUp\nKTsgLy8gZm9yY2UgbGVkZ2VyIDEgcGFnZSB0byBmbHVzaAoKICAgICAgICBz\ndG9yYWdlID0gbmV3IEludGVybGVhdmVkTGVkZ2VyU3RvcmFnZShjb25mLCBt\nYW5hZ2VyLCBkaXJzKTsKICAgICAgICBzdG9yYWdlLmdldEVudHJ5KDEsIDEp\nOyAvLyBlbnRyeSBzaG91bGQgZXhpc3QKICAgIH0KCiAgICBwcml2YXRlIEJ5\ndGVCdWZmZXIgZ2VuRW50cnkobG9uZyBsZWRnZXIsIGxvbmcgZW50cnksIGlu\ndCBzaXplKSB7CiAgICAgICAgYnl0ZVtdIGRhdGEgPSBuZXcgYnl0ZVtzaXpl\nXTsKICAgICAgICBCeXRlQnVmZmVyIGJiID0gQnl0ZUJ1ZmZlci53cmFwKG5l\ndyBieXRlW3NpemVdKTsKICAgICAgICBiYi5wdXRMb25nKGxlZGdlcik7CiAg\nICAgICAgYmIucHV0TG9uZyhlbnRyeSk7CiAgICAgICAgd2hpbGUgKGJiLmhh\nc1JlbWFpbmluZygpKSB7CiAgICAgICAgICAgIGJiLnB1dCgoYnl0ZSkweEZG\nKTsKICAgICAgICB9CiAgICAgICAgYmIuZmxpcCgpOwogICAgICAgIHJldHVy\nbiBiYjsKICAgIH0KfQo=\n","encoding":"base64"}

