{"sha":"d71e49571ac045a2f8aea09115c9ca2ebeaddf56","node_id":"MDQ6QmxvYjE1NzU5NTY6ZDcxZTQ5NTcxYWMwNDVhMmY4YWVhMDkxMTVjOWNhMmViZWFkZGY1Ng==","size":3981,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/d71e49571ac045a2f8aea09115c9ca2ebeaddf56","content":"LyoqCiAqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91\nbmRhdGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRv\nciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAq\nIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGlu\nZm9ybWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRo\nZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5z\nZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21w\nbGlhbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBh\nIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICBodHRwOi8vd3d3LmFw\nYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJl\ncXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0\naW5nLAogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5z\nZSBpcyBkaXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRI\nT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwg\nZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBm\nb3IgdGhlCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNz\naW9ucyBhbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAq\nCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci5yZXBsaWNhdGlv\nbjsKCmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5Db3VudERvd25MYXRj\naDsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci50ZXN0LkJvb2tLZWVw\nZXJDbHVzdGVyVGVzdENhc2U7CgppbXBvcnQgb3JnLmp1bml0LlRlc3Q7Cgov\nKgogKiBUZXN0IHRoZSBBdWRpdG9yUGVlcgogKi8KcHVibGljIGNsYXNzIEF1\ndG9SZWNvdmVyeU1haW5UZXN0IGV4dGVuZHMgQm9va0tlZXBlckNsdXN0ZXJU\nZXN0Q2FzZSB7CgogICAgcHVibGljIEF1dG9SZWNvdmVyeU1haW5UZXN0KCkg\newogICAgICAgIHN1cGVyKDMpOwogICAgfQoKICAgIC8qCiAgICAgKiB0ZXN0\nIHRoZSBzdGFydHVwIG9mIHRoZSBhdWRpdG9yRWxlY3RvciBhbmQgUlcuCiAg\nICAgKi8KICAgIEBUZXN0KHRpbWVvdXQ9NjAwMDApCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0U3RhcnR1cCgpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIEF1\ndG9SZWNvdmVyeU1haW4gbWFpbiA9IG5ldyBBdXRvUmVjb3ZlcnlNYWluKGJz\nQ29uZnMuZ2V0KDApKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBtYWlu\nLnN0YXJ0KCk7CiAgICAgICAgICAgIFRocmVhZC5zbGVlcCg1MDApOwogICAg\nICAgICAgICBhc3NlcnRUcnVlKCJBdWRpdG9yRWxlY3RvciBzaG91bGQgYmUg\ncnVubmluZyIsCiAgICAgICAgICAgICAgICAgICAgbWFpbi5hdWRpdG9yRWxl\nY3Rvci5pc1J1bm5pbmcoKSk7CiAgICAgICAgICAgIGFzc2VydFRydWUoIlJl\ncGxpY2F0aW9uIHdvcmtlciBzaG91bGQgYmUgcnVubmluZyIsCiAgICAgICAg\nICAgICAgICAgICAgbWFpbi5yZXBsaWNhdGlvbldvcmtlci5pc1J1bm5pbmco\nKSk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgbWFpbi5zaHV0\nZG93bigpOwogICAgICAgIH0KICAgIH0KCiAgICAvKgogICAgICogVGVzdCB0\naGUgc2h1dGRvd24gb2YgYWxsIGRhZW1vbnMKICAgICAqLwogICAgQFRlc3Qo\ndGltZW91dD02MDAwMCkKICAgIHB1YmxpYyB2b2lkIHRlc3RTaHV0ZG93bigp\nIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIEF1dG9SZWNvdmVyeU1haW4g\nbWFpbiA9IG5ldyBBdXRvUmVjb3ZlcnlNYWluKGJzQ29uZnMuZ2V0KDApKTsK\nICAgICAgICBtYWluLnN0YXJ0KCk7CiAgICAgICAgVGhyZWFkLnNsZWVwKDUw\nMCk7CiAgICAgICAgYXNzZXJ0VHJ1ZSgiQXVkaXRvckVsZWN0b3Igc2hvdWxk\nIGJlIHJ1bm5pbmciLAogICAgICAgICAgICAgICAgbWFpbi5hdWRpdG9yRWxl\nY3Rvci5pc1J1bm5pbmcoKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZSgiUmVwbGlj\nYXRpb24gd29ya2VyIHNob3VsZCBiZSBydW5uaW5nIiwKICAgICAgICAgICAg\nICAgIG1haW4ucmVwbGljYXRpb25Xb3JrZXIuaXNSdW5uaW5nKCkpOwoKICAg\nICAgICBtYWluLnNodXRkb3duKCk7CiAgICAgICAgYXNzZXJ0RmFsc2UoIkF1\nZGl0b3JFbGVjdG9yIHNob3VsZCBub3QgYmUgcnVubmluZyIsCiAgICAgICAg\nICAgICAgICBtYWluLmF1ZGl0b3JFbGVjdG9yLmlzUnVubmluZygpKTsKICAg\nICAgICBhc3NlcnRGYWxzZSgiUmVwbGljYXRpb24gd29ya2VyIHNob3VsZCBu\nb3QgYmUgcnVubmluZyIsCiAgICAgICAgICAgICAgICBtYWluLnJlcGxpY2F0\naW9uV29ya2VyLmlzUnVubmluZygpKTsKICAgIH0KCiAgICAvKioKICAgICAq\nIFRlc3QgdGhhdCwgaWYgYW4gYXV0b3JlY292ZXJ5IGxvb3NlcyBpdHMgWksg\nY29ubmVjdGlvbi9zZXNzaW9uCiAgICAgKiBpdCB3aWxsIHNodXRkb3duLgog\nICAgICovCiAgICBAVGVzdCh0aW1lb3V0PTYwMDAwKQogICAgcHVibGljIHZv\naWQgdGVzdEF1dG9SZWNvdmVyeVNlc3Npb25Mb3NzKCkgdGhyb3dzIEV4Y2Vw\ndGlvbiB7CiAgICAgICAgQXV0b1JlY292ZXJ5TWFpbiBtYWluMSA9IG5ldyBB\ndXRvUmVjb3ZlcnlNYWluKGJzQ29uZnMuZ2V0KDApKTsKICAgICAgICBBdXRv\nUmVjb3ZlcnlNYWluIG1haW4yID0gbmV3IEF1dG9SZWNvdmVyeU1haW4oYnND\nb25mcy5nZXQoMSkpOwogICAgICAgIG1haW4xLnN0YXJ0KCk7CiAgICAgICAg\nbWFpbjIuc3RhcnQoKTsKICAgICAgICBUaHJlYWQuc2xlZXAoNTAwKTsKICAg\nICAgICBhc3NlcnRUcnVlKCJBdWRpdG9yRWxlY3RvcnMgc2hvdWxkIGJlIHJ1\nbm5pbmciLAogICAgICAgICAgICAgICAgbWFpbjEuYXVkaXRvckVsZWN0b3Iu\naXNSdW5uaW5nKCkgJiYgbWFpbjIuYXVkaXRvckVsZWN0b3IuaXNSdW5uaW5n\nKCkpOwogICAgICAgIGFzc2VydFRydWUoIlJlcGxpY2F0aW9uIHdvcmtlcnMg\nc2hvdWxkIGJlIHJ1bm5pbmciLAogICAgICAgICAgICAgICAgbWFpbjEucmVw\nbGljYXRpb25Xb3JrZXIuaXNSdW5uaW5nKCkgJiYgbWFpbjIucmVwbGljYXRp\nb25Xb3JrZXIuaXNSdW5uaW5nKCkpOwoKICAgICAgICB6a1V0aWwuZXhwaXJl\nU2Vzc2lvbihtYWluMS56ayk7CiAgICAgICAgemtVdGlsLmV4cGlyZVNlc3Np\nb24obWFpbjIuemspOwoKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IDEw\nOyBpKyspIHsgLy8gZ2l2ZSBpdCAxMCBzZWNvbmRzIHRvIHNodXRkb3duCiAg\nICAgICAgICAgIGlmICghbWFpbjEuYXVkaXRvckVsZWN0b3IuaXNSdW5uaW5n\nKCkKICAgICAgICAgICAgICAgICYmICFtYWluMi5hdWRpdG9yRWxlY3Rvci5p\nc1J1bm5pbmcoKQogICAgICAgICAgICAgICAgJiYgIW1haW4xLnJlcGxpY2F0\naW9uV29ya2VyLmlzUnVubmluZygpCiAgICAgICAgICAgICAgICAmJiAhbWFp\nbjIucmVwbGljYXRpb25Xb3JrZXIuaXNSdW5uaW5nKCkpIHsKICAgICAgICAg\nICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIFRocmVh\nZC5zbGVlcCgxMDAwKTsKICAgICAgICB9CiAgICAgICAgYXNzZXJ0RmFsc2Uo\nIkVsZWN0b3IxIHNob3VsZCBoYXZlIHNodXRkb3duIiwgbWFpbjEuYXVkaXRv\nckVsZWN0b3IuaXNSdW5uaW5nKCkpOwogICAgICAgIGFzc2VydEZhbHNlKCJF\nbGVjdG9yMiBzaG91bGQgaGF2ZSBzaHV0ZG93biIsIG1haW4yLmF1ZGl0b3JF\nbGVjdG9yLmlzUnVubmluZygpKTsKICAgICAgICBhc3NlcnRGYWxzZSgiUlcx\nIHNob3VsZCBoYXZlIHNodXRkb3duIiwgbWFpbjEucmVwbGljYXRpb25Xb3Jr\nZXIuaXNSdW5uaW5nKCkpOwogICAgICAgIGFzc2VydEZhbHNlKCJSVzIgc2hv\ndWxkIGhhdmUgc2h1dGRvd24iLCBtYWluMi5yZXBsaWNhdGlvbldvcmtlci5p\nc1J1bm5pbmcoKSk7CiAgICB9Cn0K\n","encoding":"base64"}

