{"sha":"ba57aa06e3283c33a2c31c53b0241a1cbac03483","node_id":"MDQ6QmxvYjE1NzU5NTY6YmE1N2FhMDZlMzI4M2MzM2EyYzMxYzUzYjAyNDFhMWNiYWMwMzQ4Mw==","size":32121,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/ba57aa06e3283c33a2c31c53b0241a1cbac03483","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIucGVyc2lzdGVuY2U7Cgpp\nbXBvcnQgamF2YS51dGlsLkhhc2hTZXQ7CmltcG9ydCBqYXZhLnV0aWwuSXRl\ncmF0b3I7CmltcG9ydCBqYXZhLnV0aWwuTGlua2VkTGlzdDsKaW1wb3J0IGph\ndmEudXRpbC5RdWV1ZTsKaW1wb3J0IGphdmEudXRpbC5TZXQ7CmltcG9ydCBq\nYXZhLnV0aWwuU29ydGVkTWFwOwppbXBvcnQgamF2YS51dGlsLlNvcnRlZFNl\ndDsKaW1wb3J0IGphdmEudXRpbC5UcmVlTWFwOwppbXBvcnQgamF2YS51dGls\nLlRyZWVTZXQ7CmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5Db25jdXJy\nZW50SGFzaE1hcDsKaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkNvbmN1\ncnJlbnRNYXA7CmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5SZWplY3Rl\nZEV4ZWN1dGlvbkV4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5jb25jdXJy\nZW50LmF0b21pYy5BdG9taWNJbnRlZ2VyOwppbXBvcnQgamF2YS51dGlsLmNv\nbmN1cnJlbnQuYXRvbWljLkF0b21pY0xvbmc7CgppbXBvcnQgb3JnLmFwYWNo\nZS5ib29ra2VlcGVyLnV0aWwuTWF0aFV0aWxzOwppbXBvcnQgb3JnLmFwYWNo\nZS5ib29ra2VlcGVyLnV0aWwuT3JkZXJlZFNhZmVFeGVjdXRvcjsKaW1wb3J0\nIG9yZy5hcGFjaGUuYm9va2tlZXBlci51dGlsLlNhZmVSdW5uYWJsZTsKaW1w\nb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmV4Y2VwdGlvbnMuUHViU3ViRXhjZXB0\naW9uOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuZXhjZXB0aW9ucy5QdWJT\ndWJFeGNlcHRpb24uU2VydmVyTm90UmVzcG9uc2libGVGb3JUb3BpY0V4Y2Vw\ndGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnByb3RvY29sLlB1YlN1\nYlByb3RvY29sOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcucHJvdG9jb2wu\nUHViU3ViUHJvdG9jb2wuTWVzc2FnZTsKaW1wb3J0IG9yZy5hcGFjaGUuaGVk\nd2lnLnByb3RvY29sLlB1YlN1YlByb3RvY29sLk1lc3NhZ2VTZXFJZDsKaW1w\nb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnByb3RvZXh0ZW5zaW9ucy5NZXNzYWdl\nSWRVdGlsczsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnNlcnZlci5jb21t\nb24uU2VydmVyQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVk\nd2lnLnNlcnZlci5qbXguSGVkd2lnSk1YU2VydmljZTsKaW1wb3J0IG9yZy5h\ncGFjaGUuaGVkd2lnLnNlcnZlci5qbXguSGVkd2lnTUJlYW5JbmZvOwppbXBv\ncnQgb3JnLmFwYWNoZS5oZWR3aWcuc2VydmVyLmpteC5IZWR3aWdNQmVhblJl\nZ2lzdHJ5OwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcudXRpbC5DYWxsYmFj\nazsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXI7CmltcG9ydCBvcmcuc2xmNGou\nTG9nZ2VyRmFjdG9yeTsKCmltcG9ydCBjb20uZ29vZ2xlLnByb3RvYnVmLkJ5\ndGVTdHJpbmc7CgpwdWJsaWMgY2xhc3MgUmVhZEFoZWFkQ2FjaGUgaW1wbGVt\nZW50cyBQZXJzaXN0ZW5jZU1hbmFnZXIsIEhlZHdpZ0pNWFNlcnZpY2UgewoK\nICAgIHN0YXRpYyBMb2dnZXIgbG9nZ2VyID0gTG9nZ2VyRmFjdG9yeS5nZXRM\nb2dnZXIoUmVhZEFoZWFkQ2FjaGUuY2xhc3MpOwoKICAgIHByb3RlY3RlZCBp\nbnRlcmZhY2UgQ2FjaGVSZXF1ZXN0IHsKICAgICAgICBwdWJsaWMgdm9pZCBw\nZXJmb3JtUmVxdWVzdCgpOwogICAgfQoKICAgIC8qKgogICAgICogVGhlIHVu\nZGVybHlpbmcgcGVyc2lzdGVuY2UgbWFuYWdlciB0aGF0IHdpbGwgYmUgdXNl\nZCBmb3IgcGVyc2lzdGVuY2UgYW5kCiAgICAgKiBzY2FubmluZyBiZWxvdyB0\naGUgY2FjaGUKICAgICAqLwogICAgcHJvdGVjdGVkIFBlcnNpc3RlbmNlTWFu\nYWdlcldpdGhSYW5nZVNjYW4gcmVhbFBlcnNpc3RlbmNlTWFuYWdlcjsKCiAg\nICAvKioKICAgICAqIFRoZSBzdHJ1Y3R1cmUgZm9yIHRoZSBjYWNoZQogICAg\nICovCiAgICBwcm90ZWN0ZWQgQ29uY3VycmVudE1hcDxDYWNoZUtleSwgQ2Fj\naGVWYWx1ZT4gY2FjaGUgPQogICAgICAgIG5ldyBDb25jdXJyZW50SGFzaE1h\ncDxDYWNoZUtleSwgQ2FjaGVWYWx1ZT4oKTsKCiAgICAvKioKICAgICAqIFdl\nIGFsc28gd2FudCB0byB0cmFjayB0aGUgZW50cmllcyBpbiBzZXEtaWQgb3Jk\nZXIgc28gdGhhdCB3ZSBjYW4gY2xlYW4gdXAKICAgICAqIGVudHJpZXMgYWZ0\nZXIgdGhlIGxhc3Qgc3Vic2NyaWJlcgogICAgICovCiAgICBwcm90ZWN0ZWQg\nQ29uY3VycmVudE1hcDxCeXRlU3RyaW5nLCBTb3J0ZWRTZXQ8TG9uZz4+IG9y\nZGVyZWRJbmRleE9uU2VxSWQgPQogICAgICAgIG5ldyBDb25jdXJyZW50SGFz\naE1hcDxCeXRlU3RyaW5nLCBTb3J0ZWRTZXQ8TG9uZz4+KCk7CgogICAgLyoq\nCiAgICAgKiBQYXJ0aXRpb24gQ2FjaGUgaW50byBTZXJ2ZXJhbCBTZWdtZW50\ncyBmb3Igc2ltcGxpZnkgc3luY2hyb25pemF0aW9uLgogICAgICogRWFjaCBz\nZWdtZW50IG1haW50YWlucyBpdHMgdGltZSBpbmRleCBhbmQgc2VnbWVudCBz\naXplLgogICAgICovCiAgICBzdGF0aWMgY2xhc3MgQ2FjaGVTZWdtZW50IHsK\nCiAgICAgICAgLyoqCiAgICAgICAgICogV2Ugd2FudCB0byBrZWVwIHRyYWNr\nIG9mIHdoZW4gZW50cmllcyB3ZXJlIGFkZGVkIGluIHRoZSBjYWNoZSwgc28g\ndGhhdCB3ZQogICAgICAgICAqIGNhbiByZW1vdmUgdGhlbSBpbiBhIEZJRk8g\nZmFzaGlvbgogICAgICAgICAqLwogICAgICAgIHByb3RlY3RlZCBTb3J0ZWRN\nYXA8TG9uZywgU2V0PENhY2hlS2V5Pj4gdGltZUluZGV4T2ZBZGRpdGlvbiA9\nIG5ldyBUcmVlTWFwPExvbmcsIFNldDxDYWNoZUtleT4+KCk7CgogICAgICAg\nIC8qKgogICAgICAgICAqIFdlIG1haW50YWluIGFuIGVzdGltYXRlIG9mIHRo\nZSBjdXJyZW50IHNpemUgb2YgZWFjaCBjYWNoZSBzZWdtZW50LAogICAgICAg\nICAqIHNvIHRoYXQgdGhlIHRocmVhZCBrbm93IHdoZW4gdG8gZXZpY3QgZW50\ncmllcyBmcm9tIGNhY2hlIHNlZ21lbnQuCiAgICAgICAgICovCiAgICAgICAg\ncHJvdGVjdGVkIEF0b21pY0xvbmcgcHJlc2VudFNlZ21lbnRTaXplID0gbmV3\nIEF0b21pY0xvbmcoMCk7CgogICAgfQoKICAgIC8qKgogICAgICogV2UgbWFp\nbnRhaW4gYW4gZXN0aW1hdGUgb2YgdGhlIGN1cnJlbnQgc2l6ZSBvZiB0aGUg\nY2FjaGUsIHNvIHRoYXQgd2Uga25vdwogICAgICogd2hlbiB0byBldmljdCBl\nbnRyaWVzLgogICAgICovCiAgICBwcm90ZWN0ZWQgQXRvbWljTG9uZyBwcmVz\nZW50Q2FjaGVTaXplID0gbmV3IEF0b21pY0xvbmcoMCk7CgogICAgLyoqCiAg\nICAgKiBOdW0gcGVuZGluZyByZXF1ZXN0cy4KICAgICAqLwogICAgcHJvdGVj\ndGVkIEF0b21pY0ludGVnZXIgbnVtUGVuZGluZ1JlcXVlc3RzID0gbmV3IEF0\nb21pY0ludGVnZXIoMCk7CgogICAgLyoqCiAgICAgKiBDYWNoZSBzZWdtZW50\nIGZvciBkaWZmZXJlbnQgdGhyZWFkcwogICAgICovCiAgICBwcm90ZWN0ZWQg\nZmluYWwgVGhyZWFkTG9jYWw8Q2FjaGVTZWdtZW50PiBjYWNoZVNlZ21lbnQg\nPQogICAgICAgIG5ldyBUaHJlYWRMb2NhbDxDYWNoZVNlZ21lbnQ+KCkgewog\nICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHJvdGVjdGVkIENh\nY2hlU2VnbWVudCBpbml0aWFsVmFsdWUoKSB7CiAgICAgICAgICAgICAgICBy\nZXR1cm4gbmV3IENhY2hlU2VnbWVudCgpOwogICAgICAgICAgICB9CiAgICAg\nICAgfTsKCiAgICAvKioKICAgICAqIE9uZSBpbnN0YW5jZSBvZiBhIGNhbGxi\nYWNrIHRoYXQgd2Ugd2lsbCBwYXNzIHRvIHRoZSB1bmRlcmx5aW5nCiAgICAg\nKiBwZXJzaXN0ZW5jZSBtYW5hZ2VyIHdoZW4gYXNraW5nIGl0IHRvIHBlcnNp\nc3QgbWVzc2FnZXMKICAgICAqLwogICAgcHJvdGVjdGVkIFBlcnNpc3RDYWxs\nYmFjayBwZXJzaXN0Q2FsbGJhY2tJbnN0YW5jZSA9IG5ldyBQZXJzaXN0Q2Fs\nbGJhY2soKTsKCiAgICAvKioKICAgICAqIDIga2luZHMgb2YgZXhjZXB0aW9u\ncyB0aGF0IHdlIHdpbGwgdXNlIHRvIHNpZ25hbCBlcnJvciBmcm9tIHJlYWRh\naGVhZAogICAgICovCiAgICBwcm90ZWN0ZWQgTm9TdWNoU2VxSWRFeGNlcHRp\nb24gbm9TdWNoU2VxSWRFeGNlcHRpb25JbnN0YW5jZSA9IG5ldyBOb1N1Y2hT\nZXFJZEV4Y2VwdGlvbigpOwogICAgcHJvdGVjdGVkIFJlYWRBaGVhZEV4Y2Vw\ndGlvbiByZWFkQWhlYWRFeGNlcHRpb25JbnN0YW5jZSA9IG5ldyBSZWFkQWhl\nYWRFeGNlcHRpb24oKTsKCiAgICBwcm90ZWN0ZWQgU2VydmVyQ29uZmlndXJh\ndGlvbiBjZmc7CiAgICAvLyBCb29sZWFuIGluZGljYXRpbmcgaWYgdGhpcyB0\naHJlYWQgc2hvdWxkIGNvbnRpbnVlIHJ1bm5pbmcuIFRoaXMgaXMgdXNlZAog\nICAgLy8gd2hlbiB3ZSB3YW50IHRvIHN0b3AgdGhlIHRocmVhZCBkdXJpbmcg\nYSBQdWJTdWJTZXJ2ZXIgc2h1dGRvd24uCiAgICBwcm90ZWN0ZWQgdm9sYXRp\nbGUgYm9vbGVhbiBrZWVwUnVubmluZyA9IHRydWU7CgogICAgcHJvdGVjdGVk\nIGZpbmFsIE9yZGVyZWRTYWZlRXhlY3V0b3IgY2FjaGVXb3JrZXJzOwogICAg\ncHJvdGVjdGVkIGZpbmFsIGludCBudW1DYWNoZVdvcmtlcnM7CiAgICBwcm90\nZWN0ZWQgdm9sYXRpbGUgbG9uZyBtYXhTZWdtZW50U2l6ZTsKICAgIHByb3Rl\nY3RlZCB2b2xhdGlsZSBsb25nIGNhY2hlRW50cnlUVEw7CgogICAgLy8gSk1Y\nIEJlYW5zCiAgICBSZWFkQWhlYWRDYWNoZUJlYW4gam14Q2FjaGVCZWFuID0g\nbnVsbDsKCiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yLiBTdGFydHMgdGhl\nIGNhY2hlIG1haW50YWluZXIgdGhyZWFkCiAgICAgKgogICAgICogQHBhcmFt\nIHJlYWxQZXJzaXN0ZW5jZU1hbmFnZXIKICAgICAqLwogICAgcHVibGljIFJl\nYWRBaGVhZENhY2hlKFBlcnNpc3RlbmNlTWFuYWdlcldpdGhSYW5nZVNjYW4g\ncmVhbFBlcnNpc3RlbmNlTWFuYWdlciwgU2VydmVyQ29uZmlndXJhdGlvbiBj\nZmcpIHsKICAgICAgICB0aGlzLnJlYWxQZXJzaXN0ZW5jZU1hbmFnZXIgPSBy\nZWFsUGVyc2lzdGVuY2VNYW5hZ2VyOwogICAgICAgIHRoaXMuY2ZnID0gY2Zn\nOwogICAgICAgIG51bUNhY2hlV29ya2VycyA9IGNmZy5nZXROdW1SZWFkQWhl\nYWRDYWNoZVRocmVhZHMoKTsKICAgICAgICBjYWNoZVdvcmtlcnMgPSBuZXcg\nT3JkZXJlZFNhZmVFeGVjdXRvcihudW1DYWNoZVdvcmtlcnMpOwogICAgICAg\nIHJlbG9hZENvbmYoY2ZnKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJlbG9h\nZCBjb25maWd1cmF0aW9uCiAgICAgKgogICAgICogQHBhcmFtIGNvbmYKICAg\nICAqICAgICAgICAgIFNlcnZlciBjb25maWd1cmF0aW9uIG9iamVjdAogICAg\nICovCiAgICBwcm90ZWN0ZWQgdm9pZCByZWxvYWRDb25mKFNlcnZlckNvbmZp\nZ3VyYXRpb24gY2ZnKSB7CiAgICAgICAgbWF4U2VnbWVudFNpemUgPSBjZmcu\nZ2V0TWF4aW11bUNhY2hlU2l6ZSgpIC8gbnVtQ2FjaGVXb3JrZXJzOwogICAg\nICAgIGNhY2hlRW50cnlUVEwgPSBjZmcuZ2V0Q2FjaGVFbnRyeVRUTCgpOwog\nICAgfQoKICAgIHB1YmxpYyBSZWFkQWhlYWRDYWNoZSBzdGFydCgpIHsKICAg\nICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICAvKioKICAgICAqID09PT09\nPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09\nPT09PT09PT09PT09PT09PT09PT09PQogICAgICogTWV0aG9kcyBvZiB7QGxp\nbmsgUGVyc2lzdGVuY2VNYW5hZ2VyfSB0aGF0IHdlIHdpbGwgcGFzcyBzdHJh\naWdodCBkb3duIHRvCiAgICAgKiB0aGUgcmVhbCBwZXJzaXN0ZW5jZSBtYW5h\nZ2VyLgogICAgICovCgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgbG9uZyBn\nZXRTZXFJZEFmdGVyU2tpcHBpbmcoQnl0ZVN0cmluZyB0b3BpYywgbG9uZyBz\nZXFJZCwgaW50IHNraXBBbW91bnQpIHsKICAgICAgICByZXR1cm4gcmVhbFBl\ncnNpc3RlbmNlTWFuYWdlci5nZXRTZXFJZEFmdGVyU2tpcHBpbmcodG9waWMs\nIHNlcUlkLCBza2lwQW1vdW50KTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAg\nIHB1YmxpYyBNZXNzYWdlU2VxSWQgZ2V0Q3VycmVudFNlcUlkRm9yVG9waWMo\nQnl0ZVN0cmluZyB0b3BpYykgdGhyb3dzIFNlcnZlck5vdFJlc3BvbnNpYmxl\nRm9yVG9waWNFeGNlcHRpb24gewogICAgICAgIHJldHVybiByZWFsUGVyc2lz\ndGVuY2VNYW5hZ2VyLmdldEN1cnJlbnRTZXFJZEZvclRvcGljKHRvcGljKTsK\nICAgIH0KCiAgICAvKioKICAgICAqID09PT09PT09PT09PT09PT09PT09PT09\nPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09\nPT09PQogICAgICogT3RoZXIgbWV0aG9kcyBvZiB7QGxpbmsgUGVyc2lzdGVu\nY2VNYW5hZ2VyfSB0aGF0IHRoZSBjYWNoZSBuZWVkcyB0byB0YWtlCiAgICAg\nKiBzb21lIGFjdGlvbiBvbi4KICAgICAqCiAgICAgKiAxLiBQZXJzaXN0OiBX\nZSBwYXNzIGl0IHRocm91Z2ggdG8gdGhlIHJlYWwgcGVyc2lzdGVuY2UgbWFu\nYWdlciBidXQgaW5zZXJ0CiAgICAgKiBvdXIgY2FsbGJhY2sgb24gdGhlIHJl\ndHVybiBwYXRoCiAgICAgKgogICAgICovCiAgICBAT3ZlcnJpZGUKICAgIHB1\nYmxpYyB2b2lkIHBlcnNpc3RNZXNzYWdlKFBlcnNpc3RSZXF1ZXN0IHJlcXVl\nc3QpIHsKICAgICAgICAvLyBtYWtlIGEgbmV3IFBlcnNpc3RSZXF1ZXN0IG9i\namVjdCBzbyB0aGF0IHdlIGNhbiBpbnNlcnQgb3VyIG93bgogICAgICAgIC8v\nIGNhbGxiYWNrIGluIHRoZSBtaWRkbGUuIEFzc2lnbiB0aGUgb3JpZ2luYWwg\ncmVxdWVzdCBhcyB0aGUgY29udGV4dAogICAgICAgIC8vIGZvciB0aGUgY2Fs\nbGJhY2suCgogICAgICAgIFBlcnNpc3RSZXF1ZXN0IG5ld1JlcXVlc3QgPSBu\nZXcgUGVyc2lzdFJlcXVlc3QocmVxdWVzdC5nZXRUb3BpYygpLCByZXF1ZXN0\nLmdldE1lc3NhZ2UoKSwKICAgICAgICAgICAgICAgIHBlcnNpc3RDYWxsYmFj\na0luc3RhbmNlLCByZXF1ZXN0KTsKICAgICAgICByZWFsUGVyc2lzdGVuY2VN\nYW5hZ2VyLnBlcnNpc3RNZXNzYWdlKG5ld1JlcXVlc3QpOwogICAgfQoKICAg\nIC8qKgogICAgICogVGhlIGNhbGxiYWNrIHRoYXQgd2UgaW5zZXJ0IG9uIHRo\nZSBwZXJzaXN0IHJlcXVlc3QgcmV0dXJuIHBhdGguIFRoZQogICAgICogY2Fs\nbGJhY2sgc2ltcGx5IGZvcm1zIGEge0BsaW5rIFBlcnNpc3RSZXNwb25zZX0g\nb2JqZWN0IGFuZCBpbnNlcnRzIGl0IGluCiAgICAgKiB0aGUgcmVxdWVzdCBx\ndWV1ZSB0byBiZSBoYW5kbGVkIHNlcmlhbGx5IGJ5IHRoZSBjYWNoZSBtYWlu\ndGFpbmVyIHRocmVhZC4KICAgICAqCiAgICAgKi8KICAgIHB1YmxpYyBjbGFz\ncyBQZXJzaXN0Q2FsbGJhY2sgaW1wbGVtZW50cyBDYWxsYmFjazxQdWJTdWJQ\ncm90b2NvbC5NZXNzYWdlU2VxSWQ+IHsKCiAgICAgICAgLyoqCiAgICAgICAg\nICogSW4gY2FzZSB0aGVyZSBpcyBhIGZhaWx1cmUgaW4gcGVyc2lzdGluZywg\nanVzdCBwYXNzIGl0IHRvIHRoZQogICAgICAgICAqIG9yaWdpbmFsIGNhbGxi\nYWNrCiAgICAgICAgICovCiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHVi\nbGljIHZvaWQgb3BlcmF0aW9uRmFpbGVkKE9iamVjdCBjdHgsIFB1YlN1YkV4\nY2VwdGlvbiBleGNlcHRpb24pIHsKICAgICAgICAgICAgUGVyc2lzdFJlcXVl\nc3Qgb3JpZ2luYWxSZXF1ZXN0ID0gKFBlcnNpc3RSZXF1ZXN0KSBjdHg7CiAg\nICAgICAgICAgIENhbGxiYWNrPFB1YlN1YlByb3RvY29sLk1lc3NhZ2VTZXFJ\nZD4gb3JpZ2luYWxDYWxsYmFjayA9IG9yaWdpbmFsUmVxdWVzdC5nZXRDYWxs\nYmFjaygpOwogICAgICAgICAgICBPYmplY3Qgb3JpZ2luYWxDb250ZXh0ID0g\nb3JpZ2luYWxSZXF1ZXN0LmdldEN0eCgpOwogICAgICAgICAgICBvcmlnaW5h\nbENhbGxiYWNrLm9wZXJhdGlvbkZhaWxlZChvcmlnaW5hbENvbnRleHQsIGV4\nY2VwdGlvbik7CiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiBX\naGVuIHRoZSBwZXJzaXN0IGZpbmlzaGVzLCB3ZSBmaXJzdCBub3RpZnkgdGhl\nIG9yaWdpbmFsIGNhbGxiYWNrIG9mCiAgICAgICAgICogc3VjY2VzcywgYW5k\nIHRoZW4gb3Bwb3J0dW5pc3RpY2FsbHkgdHJlYXQgdGhlIG1lc3NhZ2UgYXMg\naWYgaXQganVzdAogICAgICAgICAqIGNhbWUgaW4gdGhyb3VnaCBhIHNjYW4K\nICAgICAgICAgKi8KICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMg\ndm9pZCBvcGVyYXRpb25GaW5pc2hlZChPYmplY3QgY3R4LCBQdWJTdWJQcm90\nb2NvbC5NZXNzYWdlU2VxSWQgcmVzdWx0T2ZPcGVyYXRpb24pIHsKICAgICAg\nICAgICAgUGVyc2lzdFJlcXVlc3Qgb3JpZ2luYWxSZXF1ZXN0ID0gKFBlcnNp\nc3RSZXF1ZXN0KSBjdHg7CgogICAgICAgICAgICAvLyBMZXRzIGNhbGwgdGhl\nIG9yaWdpbmFsIGNhbGxiYWNrIGZpcnN0IHNvIHRoYXQgdGhlIHB1Ymxpc2hl\nciBjYW4KICAgICAgICAgICAgLy8gaGVhciBzdWNjZXNzCiAgICAgICAgICAg\nIG9yaWdpbmFsUmVxdWVzdC5nZXRDYWxsYmFjaygpLm9wZXJhdGlvbkZpbmlz\naGVkKG9yaWdpbmFsUmVxdWVzdC5nZXRDdHgoKSwgcmVzdWx0T2ZPcGVyYXRp\nb24pOwoKICAgICAgICAgICAgLy8gT3JpZ2luYWwgbWVzc2FnZSB0aGF0IHdh\ncyBwZXJzaXN0ZWQgZGlkbid0IGhhdmUgdGhlIGxvY2FsIHNlcS1pZC4KICAg\nICAgICAgICAgLy8gTGV0cyBhZGQgdGhhdCBpbgogICAgICAgICAgICBNZXNz\nYWdlIG1lc3NhZ2VXaXRoTG9jYWxTZXFJZCA9IE1lc3NhZ2VJZFV0aWxzLm1l\ncmdlTG9jYWxTZXFJZChvcmlnaW5hbFJlcXVlc3QuZ2V0TWVzc2FnZSgpLAog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJl\nc3VsdE9mT3BlcmF0aW9uLmdldExvY2FsQ29tcG9uZW50KCkpOwoKICAgICAg\nICAgICAgLy8gTm93IGVucXVldWUgYSByZXF1ZXN0IHRvIGFkZCB0aGlzIG5l\nd2x5IHBlcnNpc3RlZCBtZXNzYWdlIHRvIG91cgogICAgICAgICAgICAvLyBj\nYWNoZQogICAgICAgICAgICBDYWNoZUtleSBjYWNoZUtleSA9IG5ldyBDYWNo\nZUtleShvcmlnaW5hbFJlcXVlc3QuZ2V0VG9waWMoKSwgcmVzdWx0T2ZPcGVy\nYXRpb24uZ2V0TG9jYWxDb21wb25lbnQoKSk7CgogICAgICAgICAgICBlbnF1\nZXVlV2l0aG91dEZhaWx1cmVCeVRvcGljKGNhY2hlS2V5LmdldFRvcGljKCks\nCiAgICAgICAgICAgICAgICAgICAgbmV3IFNjYW5SZXNwb25zZShjYWNoZUtl\neSwgbWVzc2FnZVdpdGhMb2NhbFNlcUlkKSk7CiAgICAgICAgfQoKICAgIH0K\nCiAgICBwcm90ZWN0ZWQgdm9pZCBlbnF1ZXVlV2l0aG91dEZhaWx1cmVCeVRv\ncGljKEJ5dGVTdHJpbmcgdG9waWMsIGZpbmFsIENhY2hlUmVxdWVzdCBvYmop\nIHsKICAgICAgICBpZiAoIWtlZXBSdW5uaW5nKSB7CiAgICAgICAgICAgIHJl\ndHVybjsKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbnVt\nUGVuZGluZ1JlcXVlc3RzLmluY3JlbWVudEFuZEdldCgpOwogICAgICAgICAg\nICBjYWNoZVdvcmtlcnMuc3VibWl0T3JkZXJlZCh0b3BpYywgbmV3IFNhZmVS\ndW5uYWJsZSgpIHsKICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAg\nICAgICAgICAgcHVibGljIHZvaWQgc2FmZVJ1bigpIHsKICAgICAgICAgICAg\nICAgICAgICBudW1QZW5kaW5nUmVxdWVzdHMuZGVjcmVtZW50QW5kR2V0KCk7\nCiAgICAgICAgICAgICAgICAgICAgb2JqLnBlcmZvcm1SZXF1ZXN0KCk7CiAg\nICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0gY2F0\nY2ggKFJlamVjdGVkRXhlY3V0aW9uRXhjZXB0aW9uIHJlZSkgewogICAgICAg\nICAgICBsb2dnZXIuZXJyb3IoIkZhaWxlZCB0byBzdWJtaXQgY2FjaGUgcmVx\ndWVzdCBmb3IgdG9waWMgIiArIHRvcGljLnRvU3RyaW5nVXRmOCgpICsgIiA6\nICIsIHJlZSk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogQW5v\ndGhlciBtZXRob2QgZnJvbSB7QGxpbmsgUGVyc2lzdGVuY2VNYW5hZ2VyfS4K\nICAgICAqCiAgICAgKiAyLiBTY2FuIC0gU2luY2UgdGhlIHNjYW4gbmVlZHMg\ndG8gdG91Y2ggdGhlIGNhY2hlLCB3ZSB3aWxsIGp1c3QgZW5xdWV1ZQogICAg\nICogdGhlIHNjYW4gcmVxdWVzdCBhbmQgbGV0IHRoZSBjYWNoZSBtYWludGFp\nbmVyIHRocmVhZCBoYW5kbGUgaXQuCiAgICAgKi8KICAgIEBPdmVycmlkZQog\nICAgcHVibGljIHZvaWQgc2NhblNpbmdsZU1lc3NhZ2UoU2NhblJlcXVlc3Qg\ncmVxdWVzdCkgewogICAgICAgIC8vIExldCB0aGUgc2NhbiByZXF1ZXN0cyBi\nZSBzZXJpYWxpemVkIHRocm91Z2ggdGhlIHF1ZXVlCiAgICAgICAgZW5xdWV1\nZVdpdGhvdXRGYWlsdXJlQnlUb3BpYyhyZXF1ZXN0LmdldFRvcGljKCksCiAg\nICAgICAgICAgICAgICBuZXcgU2NhblJlcXVlc3RXcmFwcGVyKHJlcXVlc3Qp\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIEFub3RoZXIgbWV0aG9kIGZyb20g\ne0BsaW5rIFBlcnNpc3RlbmNlTWFuYWdlcn0uCiAgICAgKgogICAgICogMy4g\nRW5xdWV1ZSB0aGUgcmVxdWVzdCBzbyB0aGF0IHRoZSBjYWNoZSBtYWludGFp\nbmVyIHRocmVhZCBjYW4gZGVsZXRlIGFsbAogICAgICogbWVzc2FnZS1pZHMg\nb2xkZXIgdGhhbiB0aGUgb25lIHNwZWNpZmllZAogICAgICovCiAgICBAT3Zl\ncnJpZGUKICAgIHB1YmxpYyB2b2lkIGRlbGl2ZXJlZFVudGlsKEJ5dGVTdHJp\nbmcgdG9waWMsIExvbmcgc2VxSWQpIHsKICAgICAgICBlbnF1ZXVlV2l0aG91\ndEZhaWx1cmVCeVRvcGljKHRvcGljLCBuZXcgRGVsaXZlcmVkVW50aWwodG9w\naWMsIHNlcUlkKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBBbm90aGVyIG1l\ndGhvZCBmcm9tIHtAbGluayBQZXJzaXN0ZW5jZU1hbmFnZXJ9LgogICAgICoK\nICAgICAqIFNpbmNlIHRoaXMgaXMgYSBjYWNoZSBsYXllciBvbiB0b3Agb2Yg\nYW4gdW5kZXJseWluZyBwZXJzaXN0ZW5jZSBtYW5hZ2VyLAogICAgICogd2Ug\nY2FuIGp1c3QgY2FsbCB0aGUgY29uc3VtZWRVbnRpbCBtZXRob2QgdGhlcmUu\nIFRoZSBtZXNzYWdlcyBvbGRlciB0aGFuCiAgICAgKiB0aGUgbGF0ZXN0IG9u\nZSBwYXNzZWQgaGVyZSB3b24ndCBiZSBhY2Nlc3NlZCBhbnltb3JlIHNvIHRo\nZXkgc2hvdWxkIGp1c3QKICAgICAqIGdldCBhZ2VkIG91dCBvZiB0aGUgY2Fj\naGUgZXZlbnR1YWxseS4gRm9yIG5vdywgdGhlcmUgaXMgbm8gbmVlZCB0bwog\nICAgICogcHJvYWN0aXZlbHkgcmVtb3ZlIHRob3NlIGVudHJpZXMgZnJvbSB0\naGUgY2FjaGUuCiAgICAgKi8KICAgIEBPdmVycmlkZQogICAgcHVibGljIHZv\naWQgY29uc3VtZWRVbnRpbChCeXRlU3RyaW5nIHRvcGljLCBMb25nIHNlcUlk\nKSB7CiAgICAgICAgcmVhbFBlcnNpc3RlbmNlTWFuYWdlci5jb25zdW1lZFVu\ndGlsKHRvcGljLCBzZXFJZCk7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBw\ndWJsaWMgdm9pZCBzZXRNZXNzYWdlQm91bmQoQnl0ZVN0cmluZyB0b3BpYywg\nSW50ZWdlciBib3VuZCkgewogICAgICAgIHJlYWxQZXJzaXN0ZW5jZU1hbmFn\nZXIuc2V0TWVzc2FnZUJvdW5kKHRvcGljLCBib3VuZCk7CiAgICB9CgogICAg\nQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBjbGVhck1lc3NhZ2VCb3VuZChC\neXRlU3RyaW5nIHRvcGljKSB7CiAgICAgICAgcmVhbFBlcnNpc3RlbmNlTWFu\nYWdlci5jbGVhck1lc3NhZ2VCb3VuZCh0b3BpYyk7CiAgICB9CgogICAgQE92\nZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBjb25zdW1lVG9Cb3VuZChCeXRlU3Ry\naW5nIHRvcGljKSB7CiAgICAgICAgcmVhbFBlcnNpc3RlbmNlTWFuYWdlci5j\nb25zdW1lVG9Cb3VuZCh0b3BpYyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBT\ndG9wIHRoZSByZWFkYWhlYWQgY2FjaGUuCiAgICAgKi8KICAgIEBPdmVycmlk\nZQogICAgcHVibGljIHZvaWQgc3RvcCgpIHsKICAgICAgICB0cnkgewogICAg\nICAgICAgICBrZWVwUnVubmluZyA9IGZhbHNlOwogICAgICAgICAgICBjYWNo\nZVdvcmtlcnMuc2h1dGRvd24oKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRp\nb24gZSkgewogICAgICAgICAgICBsb2dnZXIud2FybigiRmFpbGVkIHRvIHNo\ndXQgZG93biBjYWNoZSB3b3JrZXJzIDogIiwgZSk7CiAgICAgICAgfQogICAg\nfQoKICAgIC8qKgogICAgICogVGhlIHJlYWRhaGVhZCBwb2xpY3kgaXMgc2lt\ncGxlOiBXZSBjaGVjayBpZiBhbiBlbnRyeSBhbHJlYWR5IGV4aXN0cyBmb3IK\nICAgICAqIHRoZSBtZXNzYWdlIGJlaW5nIHJlcXVlc3RlZC4gSWYgYW4gZW50\ncnkgZXhpc3RzLCBpdCBtZWFucyB0aGF0IGVpdGhlcgogICAgICogdGhhdCBt\nZXNzYWdlIGlzIGFscmVhZHkgaW4gdGhlIGNhY2hlLCBvciBhIHJlYWQgZm9y\nIHRoYXQgbWVzc2FnZSBpcwogICAgICogb3V0c3RhbmRpbmcuIEluIHRoYXQg\nY2FzZSwgd2UgbG9vayBhIGxpdHRsZSBhaGVhZCAoYnkgcmVhZEFoZWFkQ291\nbnQvMikKICAgICAqIGFuZCBpc3N1ZSBhIHJhbmdlIHJlYWQgb2YgcmVhZEFo\nZWFkQ291bnQvMiBtZXNzYWdlcy4gVGhlIGlkZWEgaXMgdG8KICAgICAqIGVu\nc3VyZSB0aGF0IHRoZSBuZXh0IHJlYWRBaGVhZENvdW50IG1lc3NhZ2VzIGFy\nZSBhbHdheXMgYXZhaWxhYmxlLgogICAgICoKICAgICAqIEByZXR1cm4gdGhl\nIHJhbmdlIHNjYW4gdGhhdCBzaG91bGQgYmUgaXNzdWVkIGZvciByZWFkIGFo\nZWFkCiAgICAgKi8KICAgIHByb3RlY3RlZCBSYW5nZVNjYW5SZXF1ZXN0IGRv\nUmVhZEFoZWFkKFNjYW5SZXF1ZXN0IHJlcXVlc3QpIHsKICAgICAgICBCeXRl\nU3RyaW5nIHRvcGljID0gcmVxdWVzdC5nZXRUb3BpYygpOwogICAgICAgIExv\nbmcgc2VxSWQgPSByZXF1ZXN0LmdldFN0YXJ0U2VxSWQoKTsKCiAgICAgICAg\naW50IHJlYWRBaGVhZENvdW50ID0gY2ZnLmdldFJlYWRBaGVhZENvdW50KCk7\nCiAgICAgICAgLy8gVG8gcHJldmVudCB1cyBmcm9tIGdldHRpbmcgc2NyZXdl\nZCBieSBiYWQgY29uZmlndXJhdGlvbgogICAgICAgIHJlYWRBaGVhZENvdW50\nID0gTWF0aC5tYXgoMSwgcmVhZEFoZWFkQ291bnQpOwoKICAgICAgICBSYW5n\nZVNjYW5SZXF1ZXN0IHJlYWRBaGVhZFJlcXVlc3QgPSBkb1JlYWRBaGVhZFN0\nYXJ0aW5nRnJvbSh0b3BpYywgc2VxSWQsIHJlYWRBaGVhZENvdW50KTsKCiAg\nICAgICAgaWYgKHJlYWRBaGVhZFJlcXVlc3QgIT0gbnVsbCkgewogICAgICAg\nICAgICByZXR1cm4gcmVhZEFoZWFkUmVxdWVzdDsKICAgICAgICB9CgogICAg\nICAgIC8vIHN0YXJ0IGtleSB3YXMgYWxyZWFkeSB0aGVyZSBpbiB0aGUgY2Fj\naGUgc28gbm8gcmVhZGFoZWFkIGhhcHBlbmVkLAogICAgICAgIC8vIGxldHMg\nbG9vayBhIGxpdHRsZSBiZXlvbmQKICAgICAgICBzZXFJZCA9IHJlYWxQZXJz\naXN0ZW5jZU1hbmFnZXIuZ2V0U2VxSWRBZnRlclNraXBwaW5nKHRvcGljLCBz\nZXFJZCwgcmVhZEFoZWFkQ291bnQgLyAyKTsKCiAgICAgICAgcmVhZEFoZWFk\nUmVxdWVzdCA9IGRvUmVhZEFoZWFkU3RhcnRpbmdGcm9tKHRvcGljLCBzZXFJ\nZCwgcmVhZEFoZWFkQ291bnQgLyAyKTsKCiAgICAgICAgcmV0dXJuIHJlYWRB\naGVhZFJlcXVlc3Q7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGlzIG1ldGhv\nZCBqdXN0IGNoZWNrcyBpZiB0aGUgcHJvdmlkZWQgc2VxLWlkIGFscmVhZHkg\nZXhpc3RzIGluIHRoZQogICAgICogY2FjaGUuIElmIG5vdCwgYSByYW5nZSBy\nZWFkIG9mIHRoZSBzcGVjaWZpZWQgYW1vdW50IGlzIGlzc3VlZC4KICAgICAq\nCiAgICAgKiBAcGFyYW0gdG9waWMKICAgICAqIEBwYXJhbSBzZXFJZAogICAg\nICogQHBhcmFtIHJlYWRBaGVhZENvdW50CiAgICAgKiBAcmV0dXJuIFRoZSBy\nYW5nZSByZWFkIHRoYXQgc2hvdWxkIGJlIGlzc3VlZAogICAgICovCiAgICBw\ncm90ZWN0ZWQgUmFuZ2VTY2FuUmVxdWVzdCBkb1JlYWRBaGVhZFN0YXJ0aW5n\nRnJvbShCeXRlU3RyaW5nIHRvcGljLCBsb25nIHNlcUlkLCBpbnQgcmVhZEFo\nZWFkQ291bnQpIHsKCiAgICAgICAgbG9uZyBzdGFydFNlcUlkID0gc2VxSWQ7\nCiAgICAgICAgUXVldWU8Q2FjaGVLZXk+IGluc3RhbGxlZFN0dWJzID0gbmV3\nIExpbmtlZExpc3Q8Q2FjaGVLZXk+KCk7CgogICAgICAgIGludCBpID0gMDsK\nCiAgICAgICAgZm9yICg7IGkgPCByZWFkQWhlYWRDb3VudDsgaSsrKSB7CiAg\nICAgICAgICAgIENhY2hlS2V5IGNhY2hlS2V5ID0gbmV3IENhY2hlS2V5KHRv\ncGljLCBzZXFJZCk7CgogICAgICAgICAgICAvLyBFdmVuIGlmIGEgc3R1YiBl\neGlzdHMsIGl0IG1lYW5zIHRoYXQgYSBzY2FuIGZvciB0aGF0IGlzCiAgICAg\nICAgICAgIC8vIG91dHN0YW5kaW5nCiAgICAgICAgICAgIGlmIChjYWNoZS5j\nb250YWluc0tleShjYWNoZUtleSkpIHsKICAgICAgICAgICAgICAgIGJyZWFr\nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIENhY2hlVmFsdWUgY2FjaGVW\nYWx1ZSA9IG5ldyBDYWNoZVZhbHVlKCk7CiAgICAgICAgICAgIGlmIChudWxs\nICE9IGNhY2hlLnB1dElmQWJzZW50KGNhY2hlS2V5LCBjYWNoZVZhbHVlKSkg\newogICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oIkl0IGlzIHVuZXhwZWN0\nZWQgdGhhdCBtb3JlIHRoYW4gb25lIHRocmVhZHMgYXJlIGFkZGluZyBtZXNz\nYWdlIHRvIGNhY2hlIGtleSB7fSIKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICsiIGF0IHRoZSBzYW1lIHRpbWUuIiwgY2FjaGVLZXkpOwogICAgICAg\nICAgICB9CgogICAgICAgICAgICBsb2dnZXIuZGVidWcoIkFkZGluZyBjYWNo\nZSBzdHViIGZvcjoge30iLCBjYWNoZUtleSk7CiAgICAgICAgICAgIGluc3Rh\nbGxlZFN0dWJzLmFkZChjYWNoZUtleSk7CgogICAgICAgICAgICBzZXFJZCA9\nIHJlYWxQZXJzaXN0ZW5jZU1hbmFnZXIuZ2V0U2VxSWRBZnRlclNraXBwaW5n\nKHRvcGljLCBzZXFJZCwgMSk7CiAgICAgICAgfQoKICAgICAgICAvLyBzbyBo\nb3cgbWFueSBkaWQgd2UgZGVjaWRlIHRvIHJlYWRhaGVhZAogICAgICAgIGlm\nIChpID09IDApIHsKICAgICAgICAgICAgLy8gbm8gcmVhZGFoZWFkLCBoZW5j\nZSByZXR1cm4gZmFsc2UKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAg\nICAgfQoKICAgICAgICBsb25nIHJlYWRBaGVhZFNpemVMaW1pdCA9IGNmZy5n\nZXRSZWFkQWhlYWRTaXplQnl0ZXMoKTsKICAgICAgICBSZWFkQWhlYWRTY2Fu\nQ2FsbGJhY2sgY2FsbGJhY2sgPSBuZXcgUmVhZEFoZWFkU2NhbkNhbGxiYWNr\nKGluc3RhbGxlZFN0dWJzLCB0b3BpYyk7CiAgICAgICAgUmFuZ2VTY2FuUmVx\ndWVzdCByYW5nZVNjYW5SZXF1ZXN0ID0gbmV3IFJhbmdlU2NhblJlcXVlc3Qo\ndG9waWMsIHN0YXJ0U2VxSWQsIGksIHJlYWRBaGVhZFNpemVMaW1pdCwgY2Fs\nbGJhY2ssCiAgICAgICAgICAgICAgICBudWxsKTsKCiAgICAgICAgcmV0dXJu\nIHJhbmdlU2NhblJlcXVlc3Q7CgogICAgfQoKICAgIC8qKgogICAgICogVGhp\ncyBpcyB0aGUgY2FsbGJhY2sgdGhhdCBpcyB1c2VkIGZvciB0aGUgcmFuZ2Ug\nc2NhbnMuCiAgICAgKi8KICAgIHByb3RlY3RlZCBjbGFzcyBSZWFkQWhlYWRT\nY2FuQ2FsbGJhY2sgaW1wbGVtZW50cyBTY2FuQ2FsbGJhY2sgewogICAgICAg\nIFF1ZXVlPENhY2hlS2V5PiBpbnN0YWxsZWRTdHViczsKICAgICAgICBCeXRl\nU3RyaW5nIHRvcGljOwoKICAgICAgICAvKioKICAgICAgICAgKiBDb25zdHJ1\nY3RvcgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIGluc3RhbGxlZFN0\ndWJzCiAgICAgICAgICogICAgICAgICAgICBUaGUgbGlzdCBvZiBzdHVicyB0\naGF0IHdlcmUgaW5zdGFsbGVkIGZvciB0aGlzIHJhbmdlIHNjYW4KICAgICAg\nICAgKiBAcGFyYW0gdG9waWMKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMg\nUmVhZEFoZWFkU2NhbkNhbGxiYWNrKFF1ZXVlPENhY2hlS2V5PiBpbnN0YWxs\nZWRTdHVicywgQnl0ZVN0cmluZyB0b3BpYykgewogICAgICAgICAgICB0aGlz\nLmluc3RhbGxlZFN0dWJzID0gaW5zdGFsbGVkU3R1YnM7CiAgICAgICAgICAg\nIHRoaXMudG9waWMgPSB0b3BpYzsKICAgICAgICB9CgogICAgICAgIEBPdmVy\ncmlkZQogICAgICAgIHB1YmxpYyB2b2lkIG1lc3NhZ2VTY2FubmVkKE9iamVj\ndCBjdHgsIE1lc3NhZ2UgbWVzc2FnZSkgewoKICAgICAgICAgICAgLy8gQW55\nIG1lc3NhZ2Ugd2UgcmVhZCBpcyBwb3RlbnRpYWxseSB1c2VmdWwgZm9yIHVz\nLCBzbyBsZXRzIGZpcnN0CiAgICAgICAgICAgIC8vIGVucXVldWUgaXQKICAg\nICAgICAgICAgQ2FjaGVLZXkgY2FjaGVLZXkgPSBuZXcgQ2FjaGVLZXkodG9w\naWMsIG1lc3NhZ2UuZ2V0TXNnSWQoKS5nZXRMb2NhbENvbXBvbmVudCgpKTsK\nICAgICAgICAgICAgZW5xdWV1ZVdpdGhvdXRGYWlsdXJlQnlUb3BpYyh0b3Bp\nYywgbmV3IFNjYW5SZXNwb25zZShjYWNoZUtleSwgbWVzc2FnZSkpOwoKICAg\nICAgICAgICAgLy8gTm93IGxldHMgc2VlIGlmIHRoaXMgbWVzc2FnZSBpcyB0\naGUgb25lIHdlIHdlcmUgZXhwZWN0aW5nCiAgICAgICAgICAgIENhY2hlS2V5\nIGV4cGVjdGVkS2V5ID0gaW5zdGFsbGVkU3R1YnMucGVlaygpOwoKICAgICAg\nICAgICAgaWYgKGV4cGVjdGVkS2V5ID09IG51bGwpIHsKICAgICAgICAgICAg\nICAgIC8vIFdhcyBub3QgZXhwZWN0aW5nIGFueSBtb3JlIG1lc3NhZ2VzIHRv\nIGNvbWUgaW4sIGJ1dCB0aGV5IGNhbWUKICAgICAgICAgICAgICAgIC8vIGlu\nIHNvIHdlIHdpbGwga2VlcCB0aGVtCiAgICAgICAgICAgICAgICByZXR1cm47\nCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChleHBlY3RlZEtleS5l\ncXVhbHMoY2FjaGVLZXkpKSB7CiAgICAgICAgICAgICAgICAvLyB3aGF0IHdl\nIGdvdCBpcyB3aGF0IHdlIGV4cGVjdGVkLCBkZXF1ZXVlIGl0IHNvIHdlIGdl\ndCB0aGUKICAgICAgICAgICAgICAgIC8vIG5leHQgZXhwZWN0ZWQgb25lCiAg\nICAgICAgICAgICAgICBpbnN0YWxsZWRTdHVicy5wb2xsKCk7CiAgICAgICAg\nICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8v\nIElmIHJlYWNoZWQgaGVyZSwgd2hhdCB3ZSBzY2FubmVkIHdhcyBub3Qgd2hh\ndCB3ZSB3ZXJlIGV4cGVjdGluZy4KICAgICAgICAgICAgLy8gVGhpcyBtZWFu\ncyB0aGF0IHdlIGhhdmUgd3Jvbmcgc3R1YnMgaW5zdGFsbGVkIGluIHRoZSBj\nYWNoZS4gV2UKICAgICAgICAgICAgLy8gc2hvdWxkIHJlbW92ZSB0aGVtLCBz\nbyB0aGF0IHdob2V2ZXIgaXMgd2FpdGluZyBvbiB0aGVtIGNhbiByZXRyeS4K\nICAgICAgICAgICAgLy8gVGhpcyBzaG91bGRuJ3QgYmUgaGFwcGVuaW5nIHVz\ndWFsbHkKICAgICAgICAgICAgbG9nZ2VyLndhcm4oIlVuZXhwZWN0ZWQgbWVz\nc2FnZSBzZXEtaWQ6ICIgKyBtZXNzYWdlLmdldE1zZ0lkKCkuZ2V0TG9jYWxD\nb21wb25lbnQoKSArICIgb24gdG9waWM6ICIKICAgICAgICAgICAgICAgICAg\nICAgICAgKyB0b3BpYy50b1N0cmluZ1V0ZjgoKSArICIgZnJvbSByZWFkYWhl\nYWQgc2Nhbiwgd2FzIGV4cGVjdGluZyBzZXEtaWQ6ICIgKyBleHBlY3RlZEtl\neS5zZXFJZAogICAgICAgICAgICAgICAgICAgICAgICArICIgdG9waWM6ICIg\nKyBleHBlY3RlZEtleS50b3BpYy50b1N0cmluZ1V0ZjgoKSArICIgaW5zdGFs\nbGVkU3R1YnM6ICIgKyBpbnN0YWxsZWRTdHVicyk7CiAgICAgICAgICAgIGVu\ncXVldWVEZWxldGVPZlJlbWFpbmluZ1N0dWJzKG5vU3VjaFNlcUlkRXhjZXB0\naW9uSW5zdGFuY2UpOwoKICAgICAgICB9CgogICAgICAgIEBPdmVycmlkZQog\nICAgICAgIHB1YmxpYyB2b2lkIHNjYW5GYWlsZWQoT2JqZWN0IGN0eCwgRXhj\nZXB0aW9uIGV4Y2VwdGlvbikgewogICAgICAgICAgICBlbnF1ZXVlRGVsZXRl\nT2ZSZW1haW5pbmdTdHVicyhleGNlcHRpb24pOwogICAgICAgIH0KCiAgICAg\nICAgQE92ZXJyaWRlCiAgICAgICAgcHVibGljIHZvaWQgc2NhbkZpbmlzaGVk\nKE9iamVjdCBjdHgsIFJlYXNvbkZvckZpbmlzaCByZWFzb24pIHsKICAgICAg\nICAgICAgLy8gSWYgdGhlIHNjYW4gZmluaXNoZWQgYmVjYXVzZSBubyBtb3Jl\nIG1lc3NhZ2VzIGFyZSBwcmVzZW50LCBpdHMgb2sKICAgICAgICAgICAgLy8g\ndG8gbGVhdmUgdGhlIHN0dWJzIGluIHBsYWNlIGJlY2F1c2UgdGhleSB3aWxs\nIGdldCBmaWxsZWQgaW4gYXMKICAgICAgICAgICAgLy8gbmV3IHB1Ymxpc2hl\ncyBoYXBwZW4uIEhvd2V2ZXIsIGlmIHRoZSBzY2FuIGZpbmlzaGVkIGR1ZSB0\nbyBzb21lCiAgICAgICAgICAgIC8vIG90aGVyIHJlYXNvbiwgZS5nLiwgcmVh\nZCBhaGVhZCBzaXplIGxpbWl0IHdhcyByZWFjaGVkLCB3ZSB3YW50IHRvCiAg\nICAgICAgICAgIC8vIGRlbGV0ZSB0aGUgc3R1YnMsIHNvIHRoYXQgd2hlbiB0\naGUgdGltZSBjb21lcywgd2UgY2FuIHNjaGVkdWxlCiAgICAgICAgICAgIC8v\nIGFub3RoZXIgcmVhZGFoZWFkIHJlcXVlc3QuCiAgICAgICAgICAgIGlmIChy\nZWFzb24gIT0gUmVhc29uRm9yRmluaXNoLk5PX01PUkVfTUVTU0FHRVMpIHsK\nICAgICAgICAgICAgICAgIGVucXVldWVEZWxldGVPZlJlbWFpbmluZ1N0dWJz\nKHJlYWRBaGVhZEV4Y2VwdGlvbkluc3RhbmNlKTsKICAgICAgICAgICAgfQog\nICAgICAgIH0KCiAgICAgICAgcHJpdmF0ZSB2b2lkIGVucXVldWVEZWxldGVP\nZlJlbWFpbmluZ1N0dWJzKEV4Y2VwdGlvbiByZWFzb24pIHsKICAgICAgICAg\nICAgQ2FjaGVLZXkgaW5zdGFsbGVkU3R1YjsKICAgICAgICAgICAgd2hpbGUg\nKChpbnN0YWxsZWRTdHViID0gaW5zdGFsbGVkU3R1YnMucG9sbCgpKSAhPSBu\ndWxsKSB7CiAgICAgICAgICAgICAgICBlbnF1ZXVlV2l0aG91dEZhaWx1cmVC\neVRvcGljKGluc3RhbGxlZFN0dWIuZ2V0VG9waWMoKSwKICAgICAgICAgICAg\nICAgICAgICAgICAgbmV3IEV4Y2VwdGlvbk9uQ2FjaGVLZXkoaW5zdGFsbGVk\nU3R1YiwgcmVhc29uKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9\nCgogICAgcHJvdGVjdGVkIHN0YXRpYyBjbGFzcyBIYXNoU2V0Q2FjaGVLZXlG\nYWN0b3J5IGltcGxlbWVudHMgRmFjdG9yeTxTZXQ8Q2FjaGVLZXk+PiB7CiAg\nICAgICAgcHJvdGVjdGVkIGZpbmFsIHN0YXRpYyBIYXNoU2V0Q2FjaGVLZXlG\nYWN0b3J5IGluc3RhbmNlID0gbmV3IEhhc2hTZXRDYWNoZUtleUZhY3Rvcnko\nKTsKCiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHVibGljIFNldDxDYWNo\nZUtleT4gbmV3SW5zdGFuY2UoKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcg\nSGFzaFNldDxDYWNoZUtleT4oKTsKICAgICAgICB9CiAgICB9CgogICAgcHJv\ndGVjdGVkIHN0YXRpYyBjbGFzcyBUcmVlU2V0TG9uZ0ZhY3RvcnkgaW1wbGVt\nZW50cyBGYWN0b3J5PFNvcnRlZFNldDxMb25nPj4gewogICAgICAgIHByb3Rl\nY3RlZCBmaW5hbCBzdGF0aWMgVHJlZVNldExvbmdGYWN0b3J5IGluc3RhbmNl\nID0gbmV3IFRyZWVTZXRMb25nRmFjdG9yeSgpOwoKICAgICAgICBAT3ZlcnJp\nZGUKICAgICAgICBwdWJsaWMgU29ydGVkU2V0PExvbmc+IG5ld0luc3RhbmNl\nKCkgewogICAgICAgICAgICByZXR1cm4gbmV3IFRyZWVTZXQ8TG9uZz4oKTsK\nICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBGb3IgYWRkaW5nIHRo\nZSBtZXNzYWdlIHRvIHRoZSBjYWNoZSwgd2UgZG8gc29tZSBib29rZWVwaW5n\nIHN1Y2ggYXMgdGhlCiAgICAgKiB0b3RhbCBzaXplIG9mIGNhY2hlLCBvcmRl\nciBpbiB3aGljaCBlbnRyaWVzIHdlcmUgYWRkZWQgZXRjLiBJZiB0aGUgc2l6\nZQogICAgICogb2YgdGhlIGNhY2hlIGhhcyBleGNlZWRlZCBvdXIgYnVkZ2V0\nLCBvbGQgZW50cmllcyBhcmUgY29sbGVjdGVkLgogICAgICoKICAgICAqIEBw\nYXJhbSBjYWNoZUtleQogICAgICogQHBhcmFtIG1lc3NhZ2UKICAgICAqLwog\nICAgcHJvdGVjdGVkIHZvaWQgYWRkTWVzc2FnZVRvQ2FjaGUoZmluYWwgQ2Fj\naGVLZXkgY2FjaGVLZXksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICBmaW5hbCBNZXNzYWdlIG1lc3NhZ2UsIGZpbmFsIGxvbmcgY3Vy\nclRpbWUpIHsKICAgICAgICBsb2dnZXIuZGVidWcoIkFkZGluZyBtc2cge30g\ndG8gcmVhZGFoZWFkIGNhY2hlIiwgY2FjaGVLZXkpOwoKICAgICAgICBDYWNo\nZVZhbHVlIGNhY2hlVmFsdWU7CiAgICAgICAgaWYgKChjYWNoZVZhbHVlID0g\nY2FjaGUuZ2V0KGNhY2hlS2V5KSkgPT0gbnVsbCkgewogICAgICAgICAgICBj\nYWNoZVZhbHVlID0gbmV3IENhY2hlVmFsdWUoKTsKICAgICAgICAgICAgQ2Fj\naGVWYWx1ZSBvbGRWYWx1ZSA9IGNhY2hlLnB1dElmQWJzZW50KGNhY2hlS2V5\nLCBjYWNoZVZhbHVlKTsKICAgICAgICAgICAgaWYgKG51bGwgIT0gb2xkVmFs\ndWUpIHsKICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCJXZWlyZCEgU2hv\ndWxkIG5vdCBoYXZlIHR3byB0aHJlYWRzIGFkZGluZyBtZXNzYWdlIHRvIGNh\nY2hlIGtleSB7fSBhdCB0aGUgc2FtZSB0aW1lLiIsCiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICBjYWNoZUtleSk7CiAgICAgICAgICAgICAgICBjYWNo\nZVZhbHVlID0gb2xkVmFsdWU7CiAgICAgICAgICAgIH0KICAgICAgICB9Cgog\nICAgICAgIENhY2hlU2VnbWVudCBzZWdtZW50ID0gY2FjaGVTZWdtZW50Lmdl\ndCgpOwogICAgICAgIGlmIChjYWNoZVZhbHVlLmlzU3R1YigpKSB7IC8vIHVw\nZGF0ZSBjYWNoZSBzaXplIG9ubHkgd2hlbiBjYWNoZSB2YWx1ZSBpcyBhIHN0\ndWIKICAgICAgICAgICAgaW50IHNpemUgPSBtZXNzYWdlLmdldEJvZHkoKS5z\naXplKCk7CgogICAgICAgICAgICAvLyB1cGRhdGUgdGhlIGNhY2hlIHNpemUK\nICAgICAgICAgICAgc2VnbWVudC5wcmVzZW50U2VnbWVudFNpemUuYWRkQW5k\nR2V0KHNpemUpOwogICAgICAgICAgICBwcmVzZW50Q2FjaGVTaXplLmFkZEFu\nZEdldChzaXplKTsKICAgICAgICB9CgogICAgICAgIHN5bmNocm9uaXplZCAo\nY2FjaGVWYWx1ZSkgewogICAgICAgICAgICAvLyBmaW5hbGx5IGFkZCB0aGUg\nbWVzc2FnZSB0byB0aGUgY2FjaGUKICAgICAgICAgICAgY2FjaGVWYWx1ZS5z\nZXRNZXNzYWdlQW5kSW52b2tlQ2FsbGJhY2tzKG1lc3NhZ2UsIGN1cnJUaW1l\nKTsKICAgICAgICB9CgogICAgICAgIC8vIG1haW50YWluIHRoZSBpbmRleCBv\nZiBzZXEtaWQKICAgICAgICAvLyBubyBsb2NrIHNpbmNlIHRocmVhZHMgYXJl\nIHBhcnRpdGlvbmVkIGJ5IHRvcGljcwogICAgICAgIE1hcE1ldGhvZHMuYWRk\nVG9NdWx0aU1hcChvcmRlcmVkSW5kZXhPblNlcUlkLCBjYWNoZUtleS5nZXRU\nb3BpYygpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNo\nZUtleS5nZXRTZXFJZCgpLCBUcmVlU2V0TG9uZ0ZhY3RvcnkuaW5zdGFuY2Up\nOwoKICAgICAgICAvLyBtYWludGFpbiB0aGUgdGltZSBpbmRleCBvZiBhZGRp\ndGlvbgogICAgICAgIE1hcE1ldGhvZHMuYWRkVG9NdWx0aU1hcChzZWdtZW50\nLnRpbWVJbmRleE9mQWRkaXRpb24sIGN1cnJUaW1lLAogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICBjYWNoZUtleSwgSGFzaFNldENhY2hlS2V5\nRmFjdG9yeS5pbnN0YW5jZSk7CgogICAgICAgIGNvbGxlY3RPbGRPckV4cGly\nZWRDYWNoZUVudHJpZXMoc2VnbWVudCk7CiAgICB9CgogICAgcHJvdGVjdGVk\nIHZvaWQgcmVtb3ZlTWVzc2FnZUZyb21DYWNoZShmaW5hbCBDYWNoZUtleSBj\nYWNoZUtleSwgRXhjZXB0aW9uIGV4Y2VwdGlvbiwKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWwgYm9vbGVhbiBtYWlu\ndGFpblRpbWVJbmRleCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgZmluYWwgYm9vbGVhbiBtYWludGFpblNlcUlkSW5kZXgp\nIHsKICAgICAgICBDYWNoZVZhbHVlIGNhY2hlVmFsdWUgPSBjYWNoZS5yZW1v\ndmUoY2FjaGVLZXkpOwoKICAgICAgICBpZiAoY2FjaGVWYWx1ZSA9PSBudWxs\nKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIENh\nY2hlU2VnbWVudCBzZWdtZW50ID0gY2FjaGVTZWdtZW50LmdldCgpOwoKICAg\nICAgICBsb25nIHRpbWVPZkFkZGl0aW9uID0gMDsKICAgICAgICBzeW5jaHJv\nbml6ZWQgKGNhY2hlVmFsdWUpIHsKICAgICAgICAgICAgaWYgKGNhY2hlVmFs\ndWUuaXNTdHViKCkpIHsKICAgICAgICAgICAgICAgIGNhY2hlVmFsdWUuc2V0\nRXJyb3JBbmRJbnZva2VDYWxsYmFja3MoZXhjZXB0aW9uKTsKICAgICAgICAg\nICAgICAgIC8vIFN0dWJzIGFyZSBub3QgcHJlc2VudCBpbiB0aGUgaW5kZXhl\ncywgc28gZG9uJ3QgbmVlZCB0byBtYWludGFpbgogICAgICAgICAgICAgICAg\nLy8gaW5kZXhlcyBoZXJlCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAg\nICAgICAgIH0KCiAgICAgICAgICAgIGludCBzaXplID0gMCAtIGNhY2hlVmFs\ndWUuZ2V0TWVzc2FnZSgpLmdldEJvZHkoKS5zaXplKCk7CiAgICAgICAgICAg\nIHByZXNlbnRDYWNoZVNpemUuYWRkQW5kR2V0KHNpemUpOwogICAgICAgICAg\nICBzZWdtZW50LnByZXNlbnRTZWdtZW50U2l6ZS5hZGRBbmRHZXQoc2l6ZSk7\nCiAgICAgICAgICAgIHRpbWVPZkFkZGl0aW9uID0gY2FjaGVWYWx1ZS5nZXRU\naW1lT2ZBZGRpdGlvbigpOwogICAgICAgIH0KCiAgICAgICAgaWYgKG1haW50\nYWluU2VxSWRJbmRleCkgewogICAgICAgICAgICBNYXBNZXRob2RzLnJlbW92\nZUZyb21NdWx0aU1hcChvcmRlcmVkSW5kZXhPblNlcUlkLCBjYWNoZUtleS5n\nZXRUb3BpYygpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICBjYWNoZUtleS5nZXRTZXFJZCgpKTsKICAgICAgICB9CiAgICAg\nICAgaWYgKG1haW50YWluVGltZUluZGV4KSB7CiAgICAgICAgICAgIE1hcE1l\ndGhvZHMucmVtb3ZlRnJvbU11bHRpTWFwKHNlZ21lbnQudGltZUluZGV4T2ZB\nZGRpdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgdGltZU9mQWRkaXRpb24sIGNhY2hlS2V5KTsKICAgICAgICB9CiAg\nICB9CgogICAgLyoqCiAgICAgKiBDb2xsZWN0aW9uIG9mIG9sZCBlbnRyaWVz\nIGlzIHNpbXBsZS4gSnVzdCBjb2xsZWN0IGluIGluc2VydC10aW1lIG9yZGVy\nLAogICAgICogb2xkZXN0IHRvIG5ld2VzdC4KICAgICAqLwogICAgcHJvdGVj\ndGVkIHZvaWQgY29sbGVjdE9sZE9yRXhwaXJlZENhY2hlRW50cmllcyhDYWNo\nZVNlZ21lbnQgc2VnbWVudCkgewogICAgICAgIGlmIChjYWNoZUVudHJ5VFRM\nID4gMCkgewogICAgICAgICAgICAvLyBjbGVhciBleHBpcmVkIGVudHJpZXMK\nICAgICAgICAgICAgd2hpbGUgKCFzZWdtZW50LnRpbWVJbmRleE9mQWRkaXRp\nb24uaXNFbXB0eSgpKSB7CiAgICAgICAgICAgICAgICBMb25nIGVhcmxpZXN0\nVGltZSA9IHNlZ21lbnQudGltZUluZGV4T2ZBZGRpdGlvbi5maXJzdEtleSgp\nOwogICAgICAgICAgICAgICAgaWYgKE1hdGhVdGlscy5ub3coKSAtIGVhcmxp\nZXN0VGltZSA8IGNhY2hlRW50cnlUVEwpIHsKICAgICAgICAgICAgICAgICAg\nICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNv\nbGxlY3RDYWNoZUVudHJpZXNBdFRpbWVzdGFtcChzZWdtZW50LCBlYXJsaWVz\ndFRpbWUpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB3aGls\nZSAoc2VnbWVudC5wcmVzZW50U2VnbWVudFNpemUuZ2V0KCkgPiBtYXhTZWdt\nZW50U2l6ZSAmJgogICAgICAgICAgICAgICAhc2VnbWVudC50aW1lSW5kZXhP\nZkFkZGl0aW9uLmlzRW1wdHkoKSkgewogICAgICAgICAgICBMb25nIGVhcmxp\nZXN0VGltZSA9IHNlZ21lbnQudGltZUluZGV4T2ZBZGRpdGlvbi5maXJzdEtl\neSgpOwogICAgICAgICAgICBjb2xsZWN0Q2FjaGVFbnRyaWVzQXRUaW1lc3Rh\nbXAoc2VnbWVudCwgZWFybGllc3RUaW1lKTsKICAgICAgICB9CiAgICB9Cgog\nICAgcHJpdmF0ZSB2b2lkIGNvbGxlY3RDYWNoZUVudHJpZXNBdFRpbWVzdGFt\ncChDYWNoZVNlZ21lbnQgc2VnbWVudCwgbG9uZyB0aW1lc3RhbXApIHsKICAg\nICAgICBTZXQ8Q2FjaGVLZXk+IG9sZENhY2hlRW50cmllcyA9IHNlZ21lbnQu\ndGltZUluZGV4T2ZBZGRpdGlvbi5nZXQodGltZXN0YW1wKTsKCiAgICAgICAg\nLy8gTm90ZTogb25seSBjb25jcmV0ZSBjYWNoZSBlbnRyaWVzLCBhbmQgbm90\nIHN0dWJzIGFyZSBpbiB0aGUgdGltZQogICAgICAgIC8vIGluZGV4LiBIZW5j\nZSB0aGVyZSBjYW4gYmUgbm8gY2FsbGJhY2tzIHBlbmRpbmcgb24gdGhlc2Ug\nY2FjaGUKICAgICAgICAvLyBlbnRyaWVzLiBIZW5jZSBzYWZlIHRvIHJlbW92\nZSB0aGVtIGRpcmVjdGx5LgogICAgICAgIGZvciAoSXRlcmF0b3I8Q2FjaGVL\nZXk+IGl0ZXIgPSBvbGRDYWNoZUVudHJpZXMuaXRlcmF0b3IoKTsgaXRlci5o\nYXNOZXh0KCk7KSB7CiAgICAgICAgICAgIGZpbmFsIENhY2hlS2V5IGNhY2hl\nS2V5ID0gaXRlci5uZXh0KCk7CgogICAgICAgICAgICBsb2dnZXIuZGVidWco\nIlJlbW92aW5nIHt9IGZyb20gY2FjaGUgYmVjYXVzZSBpdCdzIHRoZSBvbGRl\nc3QuIiwgY2FjaGVLZXkpOwogICAgICAgICAgICByZW1vdmVNZXNzYWdlRnJv\nbUNhY2hlKGNhY2hlS2V5LCByZWFkQWhlYWRFeGNlcHRpb25JbnN0YW5jZSwg\nLy8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtYWlu\ndGFpblRpbWVJbmRleD0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAvLyBtYWludGFpblNlcUlkSW5kZXg9CiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgdHJ1ZSk7CiAgICAgICAgfQoKICAgICAgICBzZWdt\nZW50LnRpbWVJbmRleE9mQWRkaXRpb24ucmVtb3ZlKHRpbWVzdGFtcCk7CiAg\nICB9CgogICAgLyoqCiAgICAgKiA9PT09PT09PT09PT09PT09PT09PT09PT09\nPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09\nPT0KICAgICAqIFRoZSByZXN0IGlzIGp1c3Qgc2ltcGxlIHdyYXBwZXIgY2xh\nc3Nlcy4KICAgICAqCiAgICAgKi8KCiAgICBwcm90ZWN0ZWQgY2xhc3MgRXhj\nZXB0aW9uT25DYWNoZUtleSBpbXBsZW1lbnRzIENhY2hlUmVxdWVzdCB7CiAg\nICAgICAgQ2FjaGVLZXkgY2FjaGVLZXk7CiAgICAgICAgRXhjZXB0aW9uIGV4\nY2VwdGlvbjsKCiAgICAgICAgcHVibGljIEV4Y2VwdGlvbk9uQ2FjaGVLZXko\nQ2FjaGVLZXkgY2FjaGVLZXksIEV4Y2VwdGlvbiBleGNlcHRpb24pIHsKICAg\nICAgICAgICAgdGhpcy5jYWNoZUtleSA9IGNhY2hlS2V5OwogICAgICAgICAg\nICB0aGlzLmV4Y2VwdGlvbiA9IGV4Y2VwdGlvbjsKICAgICAgICB9CgogICAg\nICAgIC8qKgogICAgICAgICAqIElmIGZvciBzb21lIHJlYXNvbiwgYW4gb3V0\nc3RhbmRpbmcgcmVhZCBvbiBhIGNhY2hlIHN0dWIgZmFpbHMsCiAgICAgICAg\nICogZXhjZXB0aW9uIGZvciB0aGF0IGtleSBpcyBlbnF1ZXVlZCBieSB0aGUK\nICAgICAgICAgKiB7QGxpbmsgUmVhZEFoZWFkU2NhbkNhbGxiYWNrfS4gVG8g\naGFuZGxlIHRoaXMsIHdlIHNpbXBseSBzZW5kIGVycm9yCiAgICAgICAgICog\nb24gdGhlIGNhbGxiYWNrcyByZWdpc3RlcmVkIGZvciB0aGF0IHN0dWIsIGFu\nZCBkZWxldGUgdGhlIGVudHJ5IGZyb20KICAgICAgICAgKiB0aGUgY2FjaGUK\nICAgICAgICAgKi8KICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMg\ndm9pZCBwZXJmb3JtUmVxdWVzdCgpIHsKICAgICAgICAgICAgcmVtb3ZlTWVz\nc2FnZUZyb21DYWNoZShjYWNoZUtleSwgZXhjZXB0aW9uLAogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1haW50YWluVGltZUluZGV4\nPQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRydWUsCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWFpbnRhaW5T\nZXFJZEluZGV4PQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIHRydWUpOwogICAgICAgIH0KCiAgICB9CgogICAgQFN1cHByZXNzV2Fybmlu\nZ3MoInNlcmlhbCIpCiAgICBwcm90ZWN0ZWQgc3RhdGljIGNsYXNzIE5vU3Vj\naFNlcUlkRXhjZXB0aW9uIGV4dGVuZHMgRXhjZXB0aW9uIHsKCiAgICAgICAg\ncHVibGljIE5vU3VjaFNlcUlkRXhjZXB0aW9uKCkgewogICAgICAgICAgICBz\ndXBlcigiTm8gc3VjaCBzZXEtaWQiKTsKICAgICAgICB9CiAgICB9CgogICAg\nQFN1cHByZXNzV2FybmluZ3MoInNlcmlhbCIpCiAgICBwcm90ZWN0ZWQgc3Rh\ndGljIGNsYXNzIFJlYWRBaGVhZEV4Y2VwdGlvbiBleHRlbmRzIEV4Y2VwdGlv\nbiB7CiAgICAgICAgcHVibGljIFJlYWRBaGVhZEV4Y2VwdGlvbigpIHsKICAg\nICAgICAgICAgc3VwZXIoIlJlYWRhaGVhZCBmYWlsZWQiKTsKICAgICAgICB9\nCiAgICB9CgogICAgcHVibGljIGNsYXNzIENhbmNlbFNjYW5SZXF1ZXN0T3Ag\naW1wbGVtZW50cyBDYWNoZVJlcXVlc3QgewoKICAgICAgICBmaW5hbCBDYW5j\nZWxTY2FuUmVxdWVzdCByZXF1ZXN0OwoKICAgICAgICBwdWJsaWMgQ2FuY2Vs\nU2NhblJlcXVlc3RPcChDYW5jZWxTY2FuUmVxdWVzdCByZXF1ZXN0KSB7CiAg\nICAgICAgICAgIHRoaXMucmVxdWVzdCA9IHJlcXVlc3Q7CiAgICAgICAgfQoK\nICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgdm9pZCBwZXJmb3Jt\nUmVxdWVzdCgpIHsKICAgICAgICAgICAgLy8gY2FuY2VsIHNjYW4gcmVxdWVz\ndAogICAgICAgICAgICBjYW5jZWxTY2FuUmVxdWVzdChyZXF1ZXN0LmdldFNj\nYW5SZXF1ZXN0KCkpOwogICAgICAgIH0KCiAgICAgICAgdm9pZCBjYW5jZWxT\nY2FuUmVxdWVzdChTY2FuUmVxdWVzdCByZXF1ZXN0KSB7CiAgICAgICAgICAg\nIGlmIChudWxsID09IHJlcXVlc3QpIHsKICAgICAgICAgICAgICAgIC8vIG5v\ndGhpbmcgdG8gY2FuY2VsCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAg\nICAgICAgIH0KCiAgICAgICAgICAgIENhY2hlS2V5IGNhY2hlS2V5ID0gbmV3\nIENhY2hlS2V5KHJlcXVlc3QuZ2V0VG9waWMoKSwgcmVxdWVzdC5nZXRTdGFy\ndFNlcUlkKCkpOwogICAgICAgICAgICBDYWNoZVZhbHVlIGNhY2hlVmFsdWUg\nPSBjYWNoZS5nZXQoY2FjaGVLZXkpOwogICAgICAgICAgICBpZiAobnVsbCA9\nPSBjYWNoZVZhbHVlKSB7CiAgICAgICAgICAgICAgICAvLyBjYWNoZSB2YWx1\nZSBpcyBldmljdGVkCiAgICAgICAgICAgICAgICAvLyBzbyBpdCdzIGNhbGxi\nYWNrIHdvdWxkIGJlIGNhbGxlZCwgd2UgZG9uJ3QgbmVlZCB0byB3b3JyeSBh\nYm91dAogICAgICAgICAgICAgICAgLy8gY2FuY2VsIGl0LiBzaW5jZSBpdCB3\nYXMgdHJlYXRlZCBhcyBleGVjdXRlZC4KICAgICAgICAgICAgICAgIHJldHVy\nbjsKICAgICAgICAgICAgfQogICAgICAgICAgICBjYWNoZVZhbHVlLnJlbW92\nZUNhbGxiYWNrKHJlcXVlc3QuZ2V0Q2FsbGJhY2soKSwgcmVxdWVzdC5nZXRD\ndHgoKSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIGNhbmNl\nbFNjYW5SZXF1ZXN0KEJ5dGVTdHJpbmcgdG9waWMsIENhbmNlbFNjYW5SZXF1\nZXN0IHJlcXVlc3QpIHsKICAgICAgICBlbnF1ZXVlV2l0aG91dEZhaWx1cmVC\neVRvcGljKHRvcGljLCBuZXcgQ2FuY2VsU2NhblJlcXVlc3RPcChyZXF1ZXN0\nKSk7CiAgICB9CgogICAgcHJvdGVjdGVkIGNsYXNzIFNjYW5SZXNwb25zZSBp\nbXBsZW1lbnRzIENhY2hlUmVxdWVzdCB7CiAgICAgICAgQ2FjaGVLZXkgY2Fj\naGVLZXk7CiAgICAgICAgTWVzc2FnZSBtZXNzYWdlOwoKICAgICAgICBwdWJs\naWMgU2NhblJlc3BvbnNlKENhY2hlS2V5IGNhY2hlS2V5LCBNZXNzYWdlIG1l\nc3NhZ2UpIHsKICAgICAgICAgICAgdGhpcy5jYWNoZUtleSA9IGNhY2hlS2V5\nOwogICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlOwogICAgICAg\nIH0KCiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHVibGljIHZvaWQgcGVy\nZm9ybVJlcXVlc3QoKSB7CiAgICAgICAgICAgIGFkZE1lc3NhZ2VUb0NhY2hl\nKGNhY2hlS2V5LCBtZXNzYWdlLCBNYXRoVXRpbHMubm93KCkpOwogICAgICAg\nIH0KCiAgICB9CgogICAgcHJvdGVjdGVkIGNsYXNzIERlbGl2ZXJlZFVudGls\nIGltcGxlbWVudHMgQ2FjaGVSZXF1ZXN0IHsKICAgICAgICBCeXRlU3RyaW5n\nIHRvcGljOwogICAgICAgIExvbmcgc2VxSWQ7CgogICAgICAgIHB1YmxpYyBE\nZWxpdmVyZWRVbnRpbChCeXRlU3RyaW5nIHRvcGljLCBMb25nIHNlcUlkKSB7\nCiAgICAgICAgICAgIHRoaXMudG9waWMgPSB0b3BpYzsKICAgICAgICAgICAg\ndGhpcy5zZXFJZCA9IHNlcUlkOwogICAgICAgIH0KCiAgICAgICAgQE92ZXJy\naWRlCiAgICAgICAgcHVibGljIHZvaWQgcGVyZm9ybVJlcXVlc3QoKSB7CiAg\nICAgICAgICAgIFNvcnRlZFNldDxMb25nPiBvcmRlcmVkU2VxSWRzID0gb3Jk\nZXJlZEluZGV4T25TZXFJZC5nZXQodG9waWMpOwogICAgICAgICAgICBpZiAo\nb3JkZXJlZFNlcUlkcyA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICByZXR1\ncm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIGZvY3VzIG9uIHRo\nZSBzZXQgb2YgbWVzc2FnZXMgd2l0aCBzZXEtaWRzIDw9IHRoZSBvbmUgdGhh\ndAogICAgICAgICAgICAvLyBoYXMgYmVlbiBkZWxpdmVyZWQgdW50aWwKICAg\nICAgICAgICAgU29ydGVkU2V0PExvbmc+IGhlYWRTZXQgPSBvcmRlcmVkU2Vx\nSWRzLmhlYWRTZXQoc2VxSWQgKyAxKTsKCiAgICAgICAgICAgIGZvciAoSXRl\ncmF0b3I8TG9uZz4gaXRlciA9IGhlYWRTZXQuaXRlcmF0b3IoKTsgaXRlci5o\nYXNOZXh0KCk7KSB7CiAgICAgICAgICAgICAgICBMb25nIHNlcUlkID0gaXRl\nci5uZXh0KCk7CiAgICAgICAgICAgICAgICBDYWNoZUtleSBjYWNoZUtleSA9\nIG5ldyBDYWNoZUtleSh0b3BpYywgc2VxSWQpOwoKICAgICAgICAgICAgICAg\nIGxvZ2dlci5kZWJ1ZygiUmVtb3Zpbmcge30gZnJvbSBjYWNoZSBiZWNhdXNl\nIGV2ZXJ5IHN1YnNjcmliZXIgaGFzIG1vdmVkIHBhc3QiLAogICAgICAgICAg\nICAgICAgICAgIGNhY2hlS2V5KTsKCiAgICAgICAgICAgICAgICByZW1vdmVN\nZXNzYWdlRnJvbUNhY2hlKGNhY2hlS2V5LCByZWFkQWhlYWRFeGNlcHRpb25J\nbnN0YW5jZSwgLy8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgLy8gbWFpbnRhaW5UaW1lSW5kZXg9CiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIHRydWUsCiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIC8vIG1haW50YWluU2VxSWRJbmRleD0K\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2Up\nOwogICAgICAgICAgICAgICAgaXRlci5yZW1vdmUoKTsKICAgICAgICAgICAg\nfQoKICAgICAgICAgICAgaWYgKG9yZGVyZWRTZXFJZHMuaXNFbXB0eSgpKSB7\nCiAgICAgICAgICAgICAgICBvcmRlcmVkSW5kZXhPblNlcUlkLnJlbW92ZSh0\nb3BpYyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgcHJv\ndGVjdGVkIGNsYXNzIFNjYW5SZXF1ZXN0V3JhcHBlciBpbXBsZW1lbnRzIENh\nY2hlUmVxdWVzdCB7CiAgICAgICAgU2NhblJlcXVlc3QgcmVxdWVzdDsKCiAg\nICAgICAgcHVibGljIFNjYW5SZXF1ZXN0V3JhcHBlcihTY2FuUmVxdWVzdCBy\nZXF1ZXN0KSB7CiAgICAgICAgICAgIHRoaXMucmVxdWVzdCA9IHJlcXVlc3Q7\nCiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiBUbyBoYW5kbGUg\nYSBzY2FuIHJlcXVlc3QsIHdlIGZpcnN0IHRyeSB0byBkbyByZWFkYWhlYWQg\nKHdoaWNoIG1pZ2h0CiAgICAgICAgICogY2F1c2UgYSByYW5nZSByZWFkIHRv\nIGJlIGlzc3VlZCB0byB0aGUgdW5kZXJseWluZyBwZXJzaXN0ZW5jZQogICAg\nICAgICAqIG1hbmFnZXIpLiBUaGUgcmVhZGFoZWFkIHdpbGwgcHV0IGEgc3R1\nYiBpbiB0aGUgY2FjaGUsIGlmIHRoZSBtZXNzYWdlCiAgICAgICAgICogaXMg\nbm90IGFscmVhZHkgcHJlc2VudCBpbiB0aGUgY2FjaGUuIFRoZSBzY2FuIGNh\nbGxiYWNrIHRoYXQgaXMgcGFydAogICAgICAgICAqIG9mIHRoZSBzY2FuIHJl\ncXVlc3QgaXMgYWRkZWQgdG8gdGhpcyBzdHViLCBhbmQgd2lsbCBiZSBjYWxs\nZWQgbGF0ZXIKICAgICAgICAgKiB3aGVuIHRoZSBtZXNzYWdlIGFycml2ZXMg\nYXMgYSByZXN1bHQgb2YgdGhlIHJhbmdlIHNjYW4gaXNzdWVkIHRvIHRoZQog\nICAgICAgICAqIHVuZGVybHlpbmcgcGVyc2lzdGVuY2UgbWFuYWdlci4KICAg\nICAgICAgKi8KCiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHVibGljIHZv\naWQgcGVyZm9ybVJlcXVlc3QoKSB7CgogICAgICAgICAgICBSYW5nZVNjYW5S\nZXF1ZXN0IHJlYWRBaGVhZFJlcXVlc3QgPSBkb1JlYWRBaGVhZChyZXF1ZXN0\nKTsKCiAgICAgICAgICAgIC8vIFJlYWQgYWhlYWQgbXVzdCBoYXZlIGluc3Rh\nbGxlZCBhdCBsZWFzdCBhIHN0dWIgZm9yIHVzLCBzbyB0aGlzCiAgICAgICAg\nICAgIC8vIGNhbid0IGJlIG51bGwKICAgICAgICAgICAgQ2FjaGVLZXkgY2Fj\naGVLZXkgPSBuZXcgQ2FjaGVLZXkocmVxdWVzdC5nZXRUb3BpYygpLCByZXF1\nZXN0LmdldFN0YXJ0U2VxSWQoKSk7CiAgICAgICAgICAgIENhY2hlVmFsdWUg\nY2FjaGVWYWx1ZSA9IGNhY2hlLmdldChjYWNoZUtleSk7CiAgICAgICAgICAg\nIGlmIChudWxsID09IGNhY2hlVmFsdWUpIHsKICAgICAgICAgICAgICAgIGxv\nZ2dlci5lcnJvcigiQ2FjaGUga2V5IHt9IGlzIHJlbW92ZWQgYWZ0ZXIgaW5z\ndGFsbGluZyBzdHViIHdoZW4gc2Nhbm5pbmcuIiwgY2FjaGVLZXkpOwogICAg\nICAgICAgICAgICAgLy8gcmVpc3N1ZSB0aGUgcmVxdWVzdAogICAgICAgICAg\nICAgICAgc2NhblNpbmdsZU1lc3NhZ2UocmVxdWVzdCk7CiAgICAgICAgICAg\nICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHN5bmNo\ncm9uaXplZCAoY2FjaGVWYWx1ZSkgewogICAgICAgICAgICAgICAgLy8gQWRk\nIG91ciBjYWxsYmFjayB0byB0aGUgc3R1Yi4gSWYgdGhlIGNhY2hlIHZhbHVl\nIHdhcyBhbHJlYWR5IGEKICAgICAgICAgICAgICAgIC8vIGNvbmNyZXRlIG1l\nc3NhZ2UsIHRoZSBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCByaWdodCBhd2F5\nCiAgICAgICAgICAgICAgICBjYWNoZVZhbHVlLmFkZENhbGxiYWNrKHJlcXVl\nc3QuZ2V0Q2FsbGJhY2soKSwgcmVxdWVzdC5nZXRDdHgoKSk7CiAgICAgICAg\nICAgIH0KCiAgICAgICAgICAgIGlmIChyZWFkQWhlYWRSZXF1ZXN0ICE9IG51\nbGwpIHsKICAgICAgICAgICAgICAgIHJlYWxQZXJzaXN0ZW5jZU1hbmFnZXIu\nc2Nhbk1lc3NhZ2VzKHJlYWRBaGVhZFJlcXVlc3QpOwogICAgICAgICAgICB9\nCiAgICAgICAgfQogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZv\naWQgcmVnaXN0ZXJKTVgoSGVkd2lnTUJlYW5JbmZvIHBhcmVudCkgewogICAg\nICAgIHRyeSB7CiAgICAgICAgICAgIGpteENhY2hlQmVhbiA9IG5ldyBSZWFk\nQWhlYWRDYWNoZUJlYW4odGhpcyk7CiAgICAgICAgICAgIEhlZHdpZ01CZWFu\nUmVnaXN0cnkuZ2V0SW5zdGFuY2UoKS5yZWdpc3RlcihqbXhDYWNoZUJlYW4s\nIHBhcmVudCk7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAg\nICAgICAgICAgbG9nZ2VyLndhcm4oIkZhaWxlZCB0byByZWdpc3RlciByZWFk\nYWhlYWQgY2FjaGUgd2l0aCBKTVgiLCBlKTsKICAgICAgICAgICAgam14Q2Fj\naGVCZWFuID0gbnVsbDsKICAgICAgICB9CiAgICB9CgogICAgQE92ZXJyaWRl\nCiAgICBwdWJsaWMgdm9pZCB1bnJlZ2lzdGVySk1YKCkgewogICAgICAgIHRy\neSB7CiAgICAgICAgICAgIGlmIChqbXhDYWNoZUJlYW4gIT0gbnVsbCkgewog\nICAgICAgICAgICAgICAgSGVkd2lnTUJlYW5SZWdpc3RyeS5nZXRJbnN0YW5j\nZSgpLnVucmVnaXN0ZXIoam14Q2FjaGVCZWFuKTsKICAgICAgICAgICAgfQog\nICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGxv\nZ2dlci53YXJuKCJGYWlsZWQgdG8gdW5yZWdpc3RlciByZWFkYWhlYWQgY2Fj\naGUgd2l0aCBKTVgiLCBlKTsKICAgICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

