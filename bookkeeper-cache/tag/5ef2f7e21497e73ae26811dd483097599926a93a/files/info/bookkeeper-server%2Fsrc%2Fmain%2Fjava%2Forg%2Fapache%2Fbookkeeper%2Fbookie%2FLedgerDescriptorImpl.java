{"sha":"82d95ebc01efb19be72a82eeeae882638c3731b7","node_id":"MDQ6QmxvYjE1NzU5NTY6ODJkOTVlYmMwMWVmYjE5YmU3MmE4MmVlZWFlODgyNjM4YzM3MzFiNw==","size":2643,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/82d95ebc01efb19be72a82eeeae882638c3731b7","content":"LyoKICoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9y\nIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBU\naGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhl\nIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNl\nIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBs\naWFuY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEg\nY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBl\naXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZv\nciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Np\nb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICoK\nICovCgpwYWNrYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci5ib29raWU7Cgpp\nbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEubmlvLkJ5\ndGVCdWZmZXI7CmltcG9ydCBqYXZhLnV0aWwuQXJyYXlzOwoKaW1wb3J0IG9y\nZy5zbGY0ai5Mb2dnZXI7CmltcG9ydCBvcmcuc2xmNGouTG9nZ2VyRmFjdG9y\neTsKCi8qKgogKiBJbXBsZW1lbnRzIGEgbGVkZ2VyIGluc2lkZSBhIGJvb2tp\nZS4gSW4gcGFydGljdWxhciwgaXQgaW1wbGVtZW50cyBvcGVyYXRpb25zCiAq\nIHRvIHdyaXRlIGVudHJpZXMgdG8gYSBsZWRnZXIgYW5kIHJlYWQgZW50cmll\ncyBmcm9tIGEgbGVkZ2VyLgogKgogKi8KcHVibGljIGNsYXNzIExlZGdlckRl\nc2NyaXB0b3JJbXBsIGV4dGVuZHMgTGVkZ2VyRGVzY3JpcHRvciB7CiAgICBm\naW5hbCBzdGF0aWMgTG9nZ2VyIExPRyA9IExvZ2dlckZhY3RvcnkuZ2V0TG9n\nZ2VyKExlZGdlckRlc2NyaXB0b3IuY2xhc3MpOwogICAgZmluYWwgTGVkZ2Vy\nU3RvcmFnZSBsZWRnZXJTdG9yYWdlOwogICAgcHJpdmF0ZSBsb25nIGxlZGdl\ncklkOwoKICAgIGZpbmFsIGJ5dGVbXSBtYXN0ZXJLZXk7CgogICAgTGVkZ2Vy\nRGVzY3JpcHRvckltcGwoYnl0ZVtdIG1hc3RlcktleSwgbG9uZyBsZWRnZXJJ\nZCwgTGVkZ2VyU3RvcmFnZSBsZWRnZXJTdG9yYWdlKSB7CiAgICAgICAgdGhp\ncy5tYXN0ZXJLZXkgPSBtYXN0ZXJLZXk7CiAgICAgICAgdGhpcy5sZWRnZXJJ\nZCA9IGxlZGdlcklkOwogICAgICAgIHRoaXMubGVkZ2VyU3RvcmFnZSA9IGxl\nZGdlclN0b3JhZ2U7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICB2b2lkIGNo\nZWNrQWNjZXNzKGJ5dGUgbWFzdGVyS2V5W10pIHRocm93cyBCb29raWVFeGNl\ncHRpb24sIElPRXhjZXB0aW9uIHsKICAgICAgICBpZiAoIUFycmF5cy5lcXVh\nbHModGhpcy5tYXN0ZXJLZXksIG1hc3RlcktleSkpIHsKICAgICAgICAgICAg\ndGhyb3cgQm9va2llRXhjZXB0aW9uLmNyZWF0ZShCb29raWVFeGNlcHRpb24u\nQ29kZS5VbmF1dGhvcml6ZWRBY2Nlc3NFeGNlcHRpb24pOwogICAgICAgIH0K\nICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBsb25nIGdldExlZGdl\ncklkKCkgewogICAgICAgIHJldHVybiBsZWRnZXJJZDsKICAgIH0KCiAgICBA\nT3ZlcnJpZGUKICAgIGJvb2xlYW4gc2V0RmVuY2VkKCkgdGhyb3dzIElPRXhj\nZXB0aW9uIHsKICAgICAgICByZXR1cm4gbGVkZ2VyU3RvcmFnZS5zZXRGZW5j\nZWQobGVkZ2VySWQpOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgYm9vbGVh\nbiBpc0ZlbmNlZCgpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgcmV0\ndXJuIGxlZGdlclN0b3JhZ2UuaXNGZW5jZWQobGVkZ2VySWQpOwogICAgfQoK\nICAgIEBPdmVycmlkZQogICAgbG9uZyBhZGRFbnRyeShCeXRlQnVmZmVyIGVu\ndHJ5KSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgIGxvbmcgbGVkZ2Vy\nSWQgPSBlbnRyeS5nZXRMb25nKCk7CgogICAgICAgIGlmIChsZWRnZXJJZCAh\nPSB0aGlzLmxlZGdlcklkKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJT0V4\nY2VwdGlvbigiRW50cnkgZm9yIGxlZGdlciAiICsgbGVkZ2VySWQgKyAiIHdh\ncyBzZW50IHRvICIgKyB0aGlzLmxlZGdlcklkKTsKICAgICAgICB9CiAgICAg\nICAgZW50cnkucmV3aW5kKCk7CgogICAgICAgIHJldHVybiBsZWRnZXJTdG9y\nYWdlLmFkZEVudHJ5KGVudHJ5KTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAg\nIEJ5dGVCdWZmZXIgcmVhZEVudHJ5KGxvbmcgZW50cnlJZCkgdGhyb3dzIElP\nRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gbGVkZ2VyU3RvcmFnZS5nZXRF\nbnRyeShsZWRnZXJJZCwgZW50cnlJZCk7CiAgICB9Cn0K\n","encoding":"base64"}

