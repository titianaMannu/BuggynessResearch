{"sha":"630ea6ca5cc95d5b47a0a37eeaa3b2a439a861b9","node_id":"MDQ6QmxvYjE1NzU5NTY6NjMwZWE2Y2E1Y2M5NWQ1YjQ3YTBhMzdlZWFhM2IyYTQzOWE4NjFiOQ==","size":23817,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/630ea6ca5cc95d5b47a0a37eeaa3b2a439a861b9","content":"LyoqCiAqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91\nbmRhdGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRv\nciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAq\nIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGlu\nZm9ybWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRo\nZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5z\nZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21w\nbGlhbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBh\nIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICBodHRwOi8vd3d3LmFw\nYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJl\ncXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0\naW5nLAogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5z\nZSBpcyBkaXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRI\nT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwg\nZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBm\nb3IgdGhlCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNz\naW9ucyBhbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAq\nCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci5jbGllbnQ7Cgpp\nbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5j\nb25jdXJyZW50LkNvdW50RG93bkxhdGNoOwppbXBvcnQgamF2YS51dGlsLmNv\nbmN1cnJlbnQuRXhlY3V0b3JzOwppbXBvcnQgamF2YS51dGlsLmNvbmN1cnJl\nbnQuU2NoZWR1bGVkRXhlY3V0b3JTZXJ2aWNlOwppbXBvcnQgamF2YS51dGls\nLmNvbmN1cnJlbnQuVGltZVVuaXQ7CgppbXBvcnQgb3JnLmFwYWNoZS5ib29r\na2VlcGVyLmNsaWVudC5Bc3luY0NhbGxiYWNrLkNyZWF0ZUNhbGxiYWNrOwpp\nbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNsaWVudC5Bc3luY0NhbGxi\nYWNrLkRlbGV0ZUNhbGxiYWNrOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2Vl\ncGVyLmNsaWVudC5Bc3luY0NhbGxiYWNrLk9wZW5DYWxsYmFjazsKaW1wb3J0\nIG9yZy5hcGFjaGUuYm9va2tlZXBlci5jbGllbnQuQktFeGNlcHRpb24uQ29k\nZTsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5jb25mLkNsaWVudENv\nbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIubWV0\nYS5MZWRnZXJNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVy\nLm1ldGEuTGVkZ2VyTWFuYWdlckZhY3Rvcnk7CmltcG9ydCBvcmcuYXBhY2hl\nLmJvb2trZWVwZXIucHJvdG8uQm9va2llQ2xpZW50OwppbXBvcnQgb3JnLmFw\nYWNoZS5ib29ra2VlcGVyLnV0aWwuT3JkZXJlZFNhZmVFeGVjdXRvcjsKaW1w\nb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci51dGlsLlprVXRpbHM7CmltcG9y\ndCBvcmcuYXBhY2hlLmJvb2trZWVwZXIuem9va2VlcGVyLlpvb0tlZXBlcldh\ndGNoZXJCYXNlOwppbXBvcnQgb3JnLmFwYWNoZS56b29rZWVwZXIuS2VlcGVy\nRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS56b29rZWVwZXIuWm9vS2Vl\ncGVyOwppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmNoYW5uZWwuc29ja2V0LkNs\naWVudFNvY2tldENoYW5uZWxGYWN0b3J5OwppbXBvcnQgb3JnLmpib3NzLm5l\ndHR5LmNoYW5uZWwuc29ja2V0Lm5pby5OaW9DbGllbnRTb2NrZXRDaGFubmVs\nRmFjdG9yeTsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXI7CmltcG9ydCBvcmcu\nc2xmNGouTG9nZ2VyRmFjdG9yeTsKCi8qKgogKiBCb29rS2VlcGVyIGNsaWVu\ndC4gV2UgYXNzdW1lIHRoZXJlIGlzIG9uZSBzaW5nbGUgd3JpdGVyIHRvIGEg\nbGVkZ2VyIGF0IGFueQogKiB0aW1lLgogKgogKiBUaGVyZSBhcmUgZm91ciBw\nb3NzaWJsZSBvcGVyYXRpb25zOiBzdGFydCBhIG5ldyBsZWRnZXIsIHdyaXRl\nIHRvIGEgbGVkZ2VyLAogKiByZWFkIGZyb20gYSBsZWRnZXIgYW5kIGRlbGV0\nZSBhIGxlZGdlci4KICoKICogVGhlIGV4Y2VwdGlvbnMgcmVzdWx0aW5nIGZy\nb20gc3luY2hyb25vdXMgY2FsbHMgYW5kIGVycm9yIGNvZGUgcmVzdWx0aW5n\nIGZyb20KICogYXN5bmNocm9ub3VzIGNhbGxzIGNhbiBiZSBmb3VuZCBpbiB0\naGUgY2xhc3Mge0BsaW5rIEJLRXhjZXB0aW9ufS4KICoKICoKICovCgpwdWJs\naWMgY2xhc3MgQm9va0tlZXBlciB7CgogICAgc3RhdGljIGZpbmFsIExvZ2dl\nciBMT0cgPSBMb2dnZXJGYWN0b3J5LmdldExvZ2dlcihCb29rS2VlcGVyLmNs\nYXNzKTsKCiAgICBmaW5hbCBab29LZWVwZXIgems7CiAgICBmaW5hbCBDb3Vu\ndERvd25MYXRjaCBjb25uZWN0TGF0Y2ggPSBuZXcgQ291bnREb3duTGF0Y2go\nMSk7CiAgICBmaW5hbCBzdGF0aWMgaW50IHprQ29ubmVjdFRpbWVvdXRNcyA9\nIDUwMDA7CiAgICBmaW5hbCBDbGllbnRTb2NrZXRDaGFubmVsRmFjdG9yeSBj\naGFubmVsRmFjdG9yeTsKCiAgICAvLyB3aGV0aGVyIHRoZSBzb2NrZXQgZmFj\ndG9yeSBpcyBvbmUgd2UgY3JlYXRlZCwgb3IgaXMgb3duZWQgYnkgd2hvZXZl\ncgogICAgLy8gaW5zdGFudGlhdGVkIHVzCiAgICBib29sZWFuIG93bkNoYW5u\nZWxGYWN0b3J5ID0gZmFsc2U7CiAgICAvLyB3aGV0aGVyIHRoZSB6ayBoYW5k\nbGUgaXMgb25lIHdlIGNyZWF0ZWQsIG9yIGlzIG93bmVkIGJ5IHdob2V2ZXIK\nICAgIC8vIGluc3RhbnRpYXRlZCB1cwogICAgYm9vbGVhbiBvd25aS0hhbmRs\nZSA9IGZhbHNlOwoKICAgIGZpbmFsIEJvb2tpZUNsaWVudCBib29raWVDbGll\nbnQ7CiAgICBmaW5hbCBCb29raWVXYXRjaGVyIGJvb2tpZVdhdGNoZXI7Cgog\nICAgZmluYWwgT3JkZXJlZFNhZmVFeGVjdXRvciBtYWluV29ya2VyUG9vbDsK\nICAgIGZpbmFsIFNjaGVkdWxlZEV4ZWN1dG9yU2VydmljZSBzY2hlZHVsZXI7\nCgogICAgLy8gTGVkZ2VyIG1hbmFnZXIgcmVzcG9uc2libGUgZm9yIGhvdyB0\nbyBzdG9yZSBsZWRnZXIgbWV0YSBkYXRhCiAgICBmaW5hbCBMZWRnZXJNYW5h\nZ2VyRmFjdG9yeSBsZWRnZXJNYW5hZ2VyRmFjdG9yeTsKICAgIGZpbmFsIExl\nZGdlck1hbmFnZXIgbGVkZ2VyTWFuYWdlcjsKCiAgICBmaW5hbCBDbGllbnRD\nb25maWd1cmF0aW9uIGNvbmY7CgogICAgaW50ZXJmYWNlIFpLQ29ubmVjdENh\nbGxiYWNrIHsKICAgICAgICBwdWJsaWMgdm9pZCBjb25uZWN0ZWQoKTsKICAg\nICAgICBwdWJsaWMgdm9pZCBjb25uZWN0aW9uRmFpbGVkKGludCBjb2RlKTsK\nICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhIGJvb2trZWVwZXIgY2xp\nZW50LiBBIHpvb2tlZXBlciBjbGllbnQgYW5kIGEgY2xpZW50IHNvY2tldCBm\nYWN0b3J5CiAgICAgKiB3aWxsIGJlIGluc3RhbnRpYXRlZCBhcyBwYXJ0IG9m\nIHRoaXMgY29uc3RydWN0b3IuCiAgICAgKgogICAgICogQHBhcmFtIHNlcnZl\ncnMKICAgICAqICAgICAgICAgIEEgbGlzdCBvZiBvbmUgb2YgbW9yZSBzZXJ2\nZXJzIG9uIHdoaWNoIHpvb2tlZXBlciBpcyBydW5uaW5nLiBUaGUKICAgICAq\nICAgICAgICAgIGNsaWVudCBhc3N1bWVzIHRoYXQgdGhlIHJ1bm5pbmcgYm9v\na2llcyBoYXZlIGJlZW4gcmVnaXN0ZXJlZCB3aXRoCiAgICAgKiAgICAgICAg\nICB6b29rZWVwZXIgdW5kZXIgdGhlIHBhdGgKICAgICAqICAgICAgICAgIHtA\nbGluayBCb29raWVXYXRjaGVyI2Jvb2tpZVJlZ2lzdHJhdGlvblBhdGh9CiAg\nICAgKiBAdGhyb3dzIElPRXhjZXB0aW9uCiAgICAgKiBAdGhyb3dzIEludGVy\ncnVwdGVkRXhjZXB0aW9uCiAgICAgKiBAdGhyb3dzIEtlZXBlckV4Y2VwdGlv\nbgogICAgICovCiAgICBwdWJsaWMgQm9va0tlZXBlcihTdHJpbmcgc2VydmVy\ncykgdGhyb3dzIElPRXhjZXB0aW9uLCBJbnRlcnJ1cHRlZEV4Y2VwdGlvbiwK\nICAgICAgICBLZWVwZXJFeGNlcHRpb24gewogICAgICAgIHRoaXMobmV3IENs\naWVudENvbmZpZ3VyYXRpb24oKS5zZXRaa1NlcnZlcnMoc2VydmVycykpOwog\nICAgfQoKICAgIC8qKgogICAgICogQ3JlYXRlIGEgYm9va2tlZXBlciBjbGll\nbnQgdXNpbmcgYSBjb25maWd1cmF0aW9uIG9iamVjdC4KICAgICAqIEEgem9v\na2VlcGVyIGNsaWVudCBhbmQgYSBjbGllbnQgc29ja2V0IGZhY3Rvcnkgd2ls\nbCBiZSAKICAgICAqIGluc3RhbnRpYXRlZCBhcyBwYXJ0IG9mIHRoaXMgY29u\nc3RydWN0b3IuCiAgICAgKgogICAgICogQHBhcmFtIGNvbmYKICAgICAqICAg\nICAgICAgIENsaWVudCBDb25maWd1cmF0aW9uIG9iamVjdAogICAgICogQHRo\ncm93cyBJT0V4Y2VwdGlvbgogICAgICogQHRocm93cyBJbnRlcnJ1cHRlZEV4\nY2VwdGlvbgogICAgICogQHRocm93cyBLZWVwZXJFeGNlcHRpb24KICAgICAq\nLwogICAgcHVibGljIEJvb2tLZWVwZXIoZmluYWwgQ2xpZW50Q29uZmlndXJh\ndGlvbiBjb25mKQogICAgICAgICAgICB0aHJvd3MgSU9FeGNlcHRpb24sIElu\ndGVycnVwdGVkRXhjZXB0aW9uLCBLZWVwZXJFeGNlcHRpb24gewogICAgICAg\nIHRoaXMuY29uZiA9IGNvbmY7CiAgICAgICAgWm9vS2VlcGVyV2F0Y2hlckJh\nc2UgdyA9IG5ldyBab29LZWVwZXJXYXRjaGVyQmFzZShjb25mLmdldFprVGlt\nZW91dCgpKTsKICAgICAgICB0aGlzLnprID0gWmtVdGlscwogICAgICAgICAg\nICAgICAgLmNyZWF0ZUNvbm5lY3RlZFpvb2tlZXBlckNsaWVudChjb25mLmdl\ndFprU2VydmVycygpLCB3KTsKCiAgICAgICAgdGhpcy5jaGFubmVsRmFjdG9y\neSA9IG5ldyBOaW9DbGllbnRTb2NrZXRDaGFubmVsRmFjdG9yeShFeGVjdXRv\ncnMubmV3Q2FjaGVkVGhyZWFkUG9vbCgpLAogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nRXhlY3V0b3JzLm5ld0NhY2hlZFRocmVhZFBvb2woKSk7CiAgICAgICAgdGhp\ncy5zY2hlZHVsZXIgPSBFeGVjdXRvcnMubmV3U2luZ2xlVGhyZWFkU2NoZWR1\nbGVkRXhlY3V0b3IoKTsKCiAgICAgICAgbWFpbldvcmtlclBvb2wgPSBuZXcg\nT3JkZXJlZFNhZmVFeGVjdXRvcihjb25mLmdldE51bVdvcmtlclRocmVhZHMo\nKSk7CiAgICAgICAgYm9va2llQ2xpZW50ID0gbmV3IEJvb2tpZUNsaWVudChj\nb25mLCBjaGFubmVsRmFjdG9yeSwgbWFpbldvcmtlclBvb2wpOwogICAgICAg\nIGJvb2tpZVdhdGNoZXIgPSBuZXcgQm9va2llV2F0Y2hlcihjb25mLCBzY2hl\nZHVsZXIsIHRoaXMpOwogICAgICAgIGJvb2tpZVdhdGNoZXIucmVhZEJvb2tp\nZXNCbG9ja2luZygpOwoKICAgICAgICBsZWRnZXJNYW5hZ2VyRmFjdG9yeSA9\nIExlZGdlck1hbmFnZXJGYWN0b3J5Lm5ld0xlZGdlck1hbmFnZXJGYWN0b3J5\nKGNvbmYsIHprKTsKICAgICAgICBsZWRnZXJNYW5hZ2VyID0gbGVkZ2VyTWFu\nYWdlckZhY3RvcnkubmV3TGVkZ2VyTWFuYWdlcigpOwoKICAgICAgICBvd25D\naGFubmVsRmFjdG9yeSA9IHRydWU7CiAgICAgICAgb3duWktIYW5kbGUgPSB0\ncnVlOwogICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhIGJvb2trZWVw\nZXIgY2xpZW50IGJ1dCB1c2UgdGhlIHBhc3NlZCBpbiB6b29rZWVwZXIgY2xp\nZW50IGluc3RlYWQKICAgICAqIG9mIGluc3RhbnRpYXRpbmcgb25lLgogICAg\nICoKICAgICAqIEBwYXJhbSBjb25mCiAgICAgKiAgICAgICAgICBDbGllbnQg\nQ29uZmlndXJhdGlvbiBvYmplY3QKICAgICAqICAgICAgICAgIHtAbGluayBD\nbGllbnRDb25maWd1cmF0aW9ufQogICAgICogQHBhcmFtIHprCiAgICAgKiAg\nICAgICAgICBab29rZWVwZXIgY2xpZW50IGluc3RhbmNlIGNvbm5lY3RlZCB0\nbyB0aGUgem9va2VlcGVyIHdpdGggd2hpY2gKICAgICAqICAgICAgICAgIHRo\nZSBib29raWVzIGhhdmUgcmVnaXN0ZXJlZAogICAgICogQHRocm93cyBJT0V4\nY2VwdGlvbgogICAgICogQHRocm93cyBJbnRlcnJ1cHRlZEV4Y2VwdGlvbgog\nICAgICogQHRocm93cyBLZWVwZXJFeGNlcHRpb24KICAgICAqLwogICAgcHVi\nbGljIEJvb2tLZWVwZXIoQ2xpZW50Q29uZmlndXJhdGlvbiBjb25mLCBab29L\nZWVwZXIgemspCiAgICAgICAgdGhyb3dzIElPRXhjZXB0aW9uLCBJbnRlcnJ1\ncHRlZEV4Y2VwdGlvbiwgS2VlcGVyRXhjZXB0aW9uIHsKICAgICAgICB0aGlz\nKGNvbmYsIHprLCBuZXcgTmlvQ2xpZW50U29ja2V0Q2hhbm5lbEZhY3Rvcnko\nRXhlY3V0b3JzLm5ld0NhY2hlZFRocmVhZFBvb2woKSwKICAgICAgICAgICAg\nICAgIEV4ZWN1dG9ycy5uZXdDYWNoZWRUaHJlYWRQb29sKCkpKTsKICAgICAg\nICBvd25DaGFubmVsRmFjdG9yeSA9IHRydWU7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBDcmVhdGUgYSBib29ra2VlcGVyIGNsaWVudCBidXQgdXNlIHRoZSBw\nYXNzZWQgaW4gem9va2VlcGVyIGNsaWVudCBhbmQKICAgICAqIGNsaWVudCBz\nb2NrZXQgY2hhbm5lbCBmYWN0b3J5IGluc3RlYWQgb2YgaW5zdGFudGlhdGlu\nZyB0aG9zZS4KICAgICAqCiAgICAgKiBAcGFyYW0gY29uZgogICAgICogICAg\nICAgICAgQ2xpZW50IENvbmZpZ3VyYXRpb24gT2JqZWN0CiAgICAgKiAgICAg\nICAgICB7QGxpbmsgQ2xpZW50Q29uZmlndXJhdGlvbn0KICAgICAqIEBwYXJh\nbSB6awogICAgICogICAgICAgICAgWm9va2VlcGVyIGNsaWVudCBpbnN0YW5j\nZSBjb25uZWN0ZWQgdG8gdGhlIHpvb2tlZXBlciB3aXRoIHdoaWNoCiAgICAg\nKiAgICAgICAgICB0aGUgYm9va2llcyBoYXZlIHJlZ2lzdGVyZWQuIFRoZSBa\nb29LZWVwZXIgY2xpZW50IG11c3QgYmUgY29ubmVjdGVkCiAgICAgKiAgICAg\nICAgICBiZWZvcmUgaXQgaXMgcGFzc2VkIHRvIEJvb2tLZWVwZXIuIE90aGVy\nd2lzZSBhIEtlZXBlckV4Y2VwdGlvbiBpcyB0aHJvd24uCiAgICAgKiBAcGFy\nYW0gY2hhbm5lbEZhY3RvcnkKICAgICAqICAgICAgICAgIEEgZmFjdG9yeSB0\naGF0IHdpbGwgYmUgdXNlZCB0byBjcmVhdGUgY29ubmVjdGlvbnMgdG8gdGhl\nIGJvb2tpZXMKICAgICAqIEB0aHJvd3MgSU9FeGNlcHRpb24KICAgICAqIEB0\naHJvd3MgSW50ZXJydXB0ZWRFeGNlcHRpb24KICAgICAqIEB0aHJvd3MgS2Vl\ncGVyRXhjZXB0aW9uIGlmIHRoZSBwYXNzZWQgemsgaGFuZGxlIGlzIG5vdCBj\nb25uZWN0ZWQKICAgICAqLwogICAgcHVibGljIEJvb2tLZWVwZXIoQ2xpZW50\nQ29uZmlndXJhdGlvbiBjb25mLCBab29LZWVwZXIgemssIENsaWVudFNvY2tl\ndENoYW5uZWxGYWN0b3J5IGNoYW5uZWxGYWN0b3J5KQogICAgICAgICAgICB0\naHJvd3MgSU9FeGNlcHRpb24sIEludGVycnVwdGVkRXhjZXB0aW9uLCBLZWVw\nZXJFeGNlcHRpb24gewogICAgICAgIGlmICh6ayA9PSBudWxsIHx8IGNoYW5u\nZWxGYWN0b3J5ID09IG51bGwpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IE51\nbGxQb2ludGVyRXhjZXB0aW9uKCk7CiAgICAgICAgfQogICAgICAgIGlmICgh\nemsuZ2V0U3RhdGUoKS5pc0Nvbm5lY3RlZCgpKSB7CiAgICAgICAgICAgIExP\nRy5lcnJvcigiVW5jb25uZWN0ZWQgem9va2VlcGVyIGhhbmRsZSBwYXNzZWQg\ndG8gYm9va2tlZXBlciIpOwogICAgICAgICAgICB0aHJvdyBLZWVwZXJFeGNl\ncHRpb24uY3JlYXRlKEtlZXBlckV4Y2VwdGlvbi5Db2RlLkNPTk5FQ1RJT05M\nT1NTKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5jb25mID0gY29uZjsKICAg\nICAgICB0aGlzLnprID0gems7CiAgICAgICAgdGhpcy5jaGFubmVsRmFjdG9y\neSA9IGNoYW5uZWxGYWN0b3J5OwogICAgICAgIHRoaXMuc2NoZWR1bGVyID0g\nRXhlY3V0b3JzLm5ld1NpbmdsZVRocmVhZFNjaGVkdWxlZEV4ZWN1dG9yKCk7\nCgogICAgICAgIG1haW5Xb3JrZXJQb29sID0gbmV3IE9yZGVyZWRTYWZlRXhl\nY3V0b3IoY29uZi5nZXROdW1Xb3JrZXJUaHJlYWRzKCkpOwogICAgICAgIGJv\nb2tpZUNsaWVudCA9IG5ldyBCb29raWVDbGllbnQoY29uZiwgY2hhbm5lbEZh\nY3RvcnksIG1haW5Xb3JrZXJQb29sKTsKICAgICAgICBib29raWVXYXRjaGVy\nID0gbmV3IEJvb2tpZVdhdGNoZXIoY29uZiwgc2NoZWR1bGVyLCB0aGlzKTsK\nICAgICAgICBib29raWVXYXRjaGVyLnJlYWRCb29raWVzQmxvY2tpbmcoKTsK\nCiAgICAgICAgbGVkZ2VyTWFuYWdlckZhY3RvcnkgPSBMZWRnZXJNYW5hZ2Vy\nRmFjdG9yeS5uZXdMZWRnZXJNYW5hZ2VyRmFjdG9yeShjb25mLCB6ayk7CiAg\nICAgICAgbGVkZ2VyTWFuYWdlciA9IGxlZGdlck1hbmFnZXJGYWN0b3J5Lm5l\nd0xlZGdlck1hbmFnZXIoKTsKICAgIH0KCiAgICBMZWRnZXJNYW5hZ2VyIGdl\ndExlZGdlck1hbmFnZXIoKSB7CiAgICAgICAgcmV0dXJuIGxlZGdlck1hbmFn\nZXI7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGVyZSBhcmUgMiBkaWdlc3Qg\ndHlwZXMgdGhhdCBjYW4gYmUgdXNlZCBmb3IgdmVyaWZpY2F0aW9uLiBUaGUg\nQ1JDMzIgaXMKICAgICAqIGNoZWFwIHRvIGNvbXB1dGUgYnV0IGRvZXMgbm90\nIHByb3RlY3QgYWdhaW5zdCBieXphbnRpbmUgYm9va2llcyAoaS5lLiwgYQog\nICAgICogYm9va2llIG1pZ2h0IHJlcG9ydCBmYWtlIGJ5dGVzIGFuZCBhIG1h\ndGNoaW5nIENSQzMyKS4gVGhlIE1BQyBjb2RlIGlzIG1vcmUKICAgICAqIGV4\ncGVuc2l2ZSB0byBjb21wdXRlLCBidXQgaXMgcHJvdGVjdGVkIGJ5IGEgcGFz\nc3dvcmQsIGkuZS4sIGEgYm9va2llIGNhbid0CiAgICAgKiByZXBvcnQgZmFr\nZSBieXRlcyB3aXRoIGEgbWF0aGNoaW5nIE1BQyB1bmxlc3MgaXQga25vd3Mg\ndGhlIHBhc3N3b3JkCiAgICAgKi8KICAgIHB1YmxpYyBlbnVtIERpZ2VzdFR5\ncGUgewogICAgICAgIE1BQywgQ1JDMzIKICAgIH07CgogICAgWm9vS2VlcGVy\nIGdldFprSGFuZGxlKCkgewogICAgICAgIHJldHVybiB6azsKICAgIH0KCiAg\nICBwcm90ZWN0ZWQgQ2xpZW50Q29uZmlndXJhdGlvbiBnZXRDb25mKCkgewog\nICAgICAgIHJldHVybiBjb25mOwogICAgfQoKICAgIC8qKgogICAgICogR2V0\nIHRoZSBCb29raWVDbGllbnQsIGN1cnJlbnRseSB1c2VkIGZvciBkb2luZyBi\nb29raWUgcmVjb3ZlcnkuCiAgICAgKgogICAgICogQHJldHVybiBCb29raWVD\nbGllbnQgZm9yIHRoZSBCb29rS2VlcGVyIGluc3RhbmNlLgogICAgICovCiAg\nICBCb29raWVDbGllbnQgZ2V0Qm9va2llQ2xpZW50KCkgewogICAgICAgIHJl\ndHVybiBib29raWVDbGllbnQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVh\ndGVzIGEgbmV3IGxlZGdlciBhc3luY2hyb25vdXNseS4gVG8gY3JlYXRlIGEg\nbGVkZ2VyLCB3ZSBuZWVkIHRvIHNwZWNpZnkKICAgICAqIHRoZSBlbnNlbWJs\nZSBzaXplLCB0aGUgcXVvcnVtIHNpemUsIHRoZSBkaWdlc3QgdHlwZSwgYSBw\nYXNzd29yZCwgYSBjYWxsYmFjawogICAgICogaW1wbGVtZW50YXRpb24sIGFu\nZCBhbiBvcHRpb25hbCBjb250cm9sIG9iamVjdC4gVGhlIGVuc2VtYmxlIHNp\nemUgaXMgaG93CiAgICAgKiBtYW55IGJvb2tpZXMgdGhlIGVudHJpZXMgc2hv\ndWxkIGJlIHN0cmlwZWQgYW1vbmcgYW5kIHRoZSBxdW9ydW0gc2l6ZSBpcyB0\naGUKICAgICAqIGRlZ3JlZSBvZiByZXBsaWNhdGlvbiBvZiBlYWNoIGVudHJ5\nLiBUaGUgZGlnZXN0IHR5cGUgaXMgZWl0aGVyIGEgTUFDIG9yIGEKICAgICAq\nIENSQy4gTm90ZSB0aGF0IHRoZSBDUkMgb3B0aW9uIGlzIG5vdCBhYmxlIHRv\nIHByb3RlY3QgYSBjbGllbnQgYWdhaW5zdCBhCiAgICAgKiBib29raWUgdGhh\ndCByZXBsYWNlcyBhbiBlbnRyeS4gVGhlIHBhc3N3b3JkIGlzIHVzZWQgbm90\nIG9ubHkgdG8KICAgICAqIGF1dGhlbnRpY2F0ZSBhY2Nlc3MgdG8gYSBsZWRn\nZXIsIGJ1dCBhbHNvIHRvIHZlcmlmeSBlbnRyaWVzIGluIGxlZGdlcnMuCiAg\nICAgKgogICAgICogQHBhcmFtIGVuc1NpemUKICAgICAqICAgICAgICAgIG51\nbWJlciBvZiBib29raWVzIG92ZXIgd2hpY2ggdG8gc3RyaXBlIGVudHJpZXMK\nICAgICAqIEBwYXJhbSB3cml0ZVF1b3J1bVNpemUKICAgICAqICAgICAgICAg\nIG51bWJlciBvZiBib29raWVzIGVhY2ggZW50cnkgd2lsbCBiZSB3cml0dGVu\nIHRvLiBlYWNoIG9mIHRoZXNlIGJvb2tpZXMKICAgICAqICAgICAgICAgIG11\nc3QgYWNrbm93bGVkZ2UgdGhlIGVudHJ5IGJlZm9yZSB0aGUgY2FsbCBpcyBj\nb21wbGV0ZWQuCiAgICAgKiBAcGFyYW0gZGlnZXN0VHlwZQogICAgICogICAg\nICAgICAgZGlnZXN0IHR5cGUsIGVpdGhlciBNQUMgb3IgQ1JDMzIKICAgICAq\nIEBwYXJhbSBwYXNzd2QKICAgICAqICAgICAgICAgIHBhc3N3b3JkCiAgICAg\nKiBAcGFyYW0gY2IKICAgICAqICAgICAgICAgIGNyZWF0ZUNhbGxiYWNrIGlt\ncGxlbWVudGF0aW9uCiAgICAgKiBAcGFyYW0gY3R4CiAgICAgKiAgICAgICAg\nICBvcHRpb25hbCBjb250cm9sIG9iamVjdAogICAgICovCiAgICBwdWJsaWMg\ndm9pZCBhc3luY0NyZWF0ZUxlZGdlcihmaW5hbCBpbnQgZW5zU2l6ZSwKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsIGludCB3cml0\nZVF1b3J1bVNpemUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICBmaW5hbCBEaWdlc3RUeXBlIGRpZ2VzdFR5cGUsCiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICBmaW5hbCBieXRlW10gcGFzc3dkLCBmaW5h\nbCBDcmVhdGVDYWxsYmFjayBjYiwgZmluYWwgT2JqZWN0IGN0eCkKICAgIHsK\nICAgICAgICBhc3luY0NyZWF0ZUxlZGdlcihlbnNTaXplLCB3cml0ZVF1b3J1\nbVNpemUsIHdyaXRlUXVvcnVtU2l6ZSwgZGlnZXN0VHlwZSwgcGFzc3dkLCBj\nYiwgY3R4KTsKICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZXMgYSBuZXcg\nbGVkZ2VyIGFzeW5jaHJvbm91c2x5LiBMZWRnZXJzIGNyZWF0ZWQgd2l0aCB0\naGlzIGNhbGwgaGF2ZQogICAgICogYSBzZXBhcmF0ZSB3cml0ZSBxdW9ydW0g\nYW5kIGFjayBxdW9ydW0gc2l6ZS4gVGhlIHdyaXRlIHF1b3J1bSBtdXN0IGJl\nIGxhcmdlciB0aGFuCiAgICAgKiB0aGUgYWNrIHF1b3J1bS4KICAgICAqCiAg\nICAgKiBTZXBhcmF0aW5nIHRoZSB3cml0ZSBhbmQgdGhlIGFjayBxdW9ydW0g\nYWxsb3dzIHRoZSBCb29rS2VlcGVyIGNsaWVudCB0byBjb250aW51ZQogICAg\nICogd3JpdGluZyB3aGVuIGEgYm9va2llIGhhcyBmYWlsZWQgYnV0IHRoZSBm\nYWlsdXJlIGhhcyBub3QgeWV0IGJlZW4gZGV0ZWN0ZWQuIERldGVjdGluZwog\nICAgICogYSBib29raWUgaGFzIGZhaWxlZCBjYW4gdGFrZSBhIG51bWJlciBv\nZiBzZWNvbmRzLCBhcyBjb25maWd1cmVkIGJ5IHRoZSByZWFkIHRpbWVvdXQK\nICAgICAqIHtAbGluayBDbGllbnRDb25maWd1cmF0aW9uI2dldFJlYWRUaW1l\nb3V0KCl9LiBPbmNlIHRoZSBib29raWUgZmFpbHVyZSBpcyBkZXRlY3RlZCwK\nICAgICAqIHRoYXQgYm9va2llIHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHRoZSBl\nbnNlbWJsZS4KICAgICAqCiAgICAgKiBUaGUgb3RoZXIgcGFyYW1ldGVycyBt\nYXRjaCB0aG9zZSBvZiB7QGxpbmsgI2FzeW5jQ3JlYXRlTGVkZ2VyKGludCwg\naW50LCBEaWdlc3RUeXBlLCBieXRlW10sCiAgICAgKiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgQXN5bmNDYWxsYmFjay5DcmVhdGVD\nYWxsYmFjaywgT2JqZWN0KX0KICAgICAqCiAgICAgKiBAcGFyYW0gZW5zU2l6\nZQogICAgICogICAgICAgICAgbnVtYmVyIG9mIGJvb2tpZXMgb3ZlciB3aGlj\naCB0byBzdHJpcGUgZW50cmllcwogICAgICogQHBhcmFtIHdyaXRlUXVvcnVt\nU2l6ZQogICAgICogICAgICAgICAgbnVtYmVyIG9mIGJvb2tpZXMgZWFjaCBl\nbnRyeSB3aWxsIGJlIHdyaXR0ZW4gdG8KICAgICAqIEBwYXJhbSBhY2tRdW9y\ndW1TaXplCiAgICAgKiAgICAgICAgICBudW1iZXIgb2YgYm9va2llcyB3aGlj\naCBtdXN0IGFja25vd2xlZGdlIGFuIGVudHJ5IGJlZm9yZSB0aGUgY2FsbCBp\ncyBjb21wbGV0ZWQKICAgICAqIEBwYXJhbSBkaWdlc3RUeXBlCiAgICAgKiAg\nICAgICAgICBkaWdlc3QgdHlwZSwgZWl0aGVyIE1BQyBvciBDUkMzMgogICAg\nICogQHBhcmFtIHBhc3N3ZAogICAgICogICAgICAgICAgcGFzc3dvcmQKICAg\nICAqIEBwYXJhbSBjYgogICAgICogICAgICAgICAgY3JlYXRlQ2FsbGJhY2sg\naW1wbGVtZW50YXRpb24KICAgICAqIEBwYXJhbSBjdHgKICAgICAqICAgICAg\nICAgIG9wdGlvbmFsIGNvbnRyb2wgb2JqZWN0CiAgICAgKi8KCiAgICBwdWJs\naWMgdm9pZCBhc3luY0NyZWF0ZUxlZGdlcihmaW5hbCBpbnQgZW5zU2l6ZSwK\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsIGludCB3\ncml0ZVF1b3J1bVNpemUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICBmaW5hbCBpbnQgYWNrUXVvcnVtU2l6ZSwKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIGZpbmFsIERpZ2VzdFR5cGUgZGlnZXN0VHlw\nZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsIGJ5\ndGVbXSBwYXNzd2QsIGZpbmFsIENyZWF0ZUNhbGxiYWNrIGNiLCBmaW5hbCBP\nYmplY3QgY3R4KSB7CiAgICAgICAgaWYgKHdyaXRlUXVvcnVtU2l6ZSA8IGFj\na1F1b3J1bVNpemUpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxB\ncmd1bWVudEV4Y2VwdGlvbigiV3JpdGUgcXVvcnVtIG11c3QgYmUgbGFyZ2Vy\nIHRoYW4gYWNrIHF1b3J1bSIpOwogICAgICAgIH0KICAgICAgICBuZXcgTGVk\nZ2VyQ3JlYXRlT3AoQm9va0tlZXBlci50aGlzLCBlbnNTaXplLCB3cml0ZVF1\nb3J1bVNpemUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGFja1F1b3J1\nbVNpemUsIGRpZ2VzdFR5cGUsIHBhc3N3ZCwgY2IsIGN0eCkKICAgICAgICAg\nICAgLmluaXRpYXRlKCk7CiAgICB9CgoKICAgIC8qKgogICAgICogQ3JlYXRl\ncyBhIG5ldyBsZWRnZXIuIERlZmF1bHQgb2YgMyBzZXJ2ZXJzLCBhbmQgcXVv\ncnVtIG9mIDIgc2VydmVycy4KICAgICAqCiAgICAgKiBAcGFyYW0gZGlnZXN0\nVHlwZQogICAgICogICAgICAgICAgZGlnZXN0IHR5cGUsIGVpdGhlciBNQUMg\nb3IgQ1JDMzIKICAgICAqIEBwYXJhbSBwYXNzd2QKICAgICAqICAgICAgICAg\nIHBhc3N3b3JkCiAgICAgKiBAcmV0dXJuIGEgaGFuZGxlIHRvIHRoZSBuZXds\neSBjcmVhdGVkIGxlZGdlcgogICAgICogQHRocm93cyBJbnRlcnJ1cHRlZEV4\nY2VwdGlvbgogICAgICogQHRocm93cyBCS0V4Y2VwdGlvbgogICAgICovCiAg\nICBwdWJsaWMgTGVkZ2VySGFuZGxlIGNyZWF0ZUxlZGdlcihEaWdlc3RUeXBl\nIGRpZ2VzdFR5cGUsIGJ5dGUgcGFzc3dkW10pCiAgICAgICAgICAgIHRocm93\ncyBCS0V4Y2VwdGlvbiwgSW50ZXJydXB0ZWRFeGNlcHRpb24gewogICAgICAg\nIHJldHVybiBjcmVhdGVMZWRnZXIoMywgMiwgZGlnZXN0VHlwZSwgcGFzc3dk\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIFN5bmNocm9ub3VzIGNhbGwgdG8g\nY3JlYXRlIGxlZGdlci4gUGFyYW1ldGVycyBtYXRjaCB0aG9zZSBvZgogICAg\nICoge0BsaW5rICNhc3luY0NyZWF0ZUxlZGdlcihpbnQsIGludCwgRGlnZXN0\nVHlwZSwgYnl0ZVtdLCAKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAg\nICAgQXN5bmNDYWxsYmFjay5DcmVhdGVDYWxsYmFjaywgT2JqZWN0KX0KICAg\nICAqCiAgICAgKiBAcGFyYW0gZW5zU2l6ZQogICAgICogQHBhcmFtIHFTaXpl\nCiAgICAgKiBAcGFyYW0gZGlnZXN0VHlwZQogICAgICogQHBhcmFtIHBhc3N3\nZAogICAgICogQHJldHVybiBhIGhhbmRsZSB0byB0aGUgbmV3bHkgY3JlYXRl\nZCBsZWRnZXIKICAgICAqIEB0aHJvd3MgSW50ZXJydXB0ZWRFeGNlcHRpb24K\nICAgICAqIEB0aHJvd3MgQktFeGNlcHRpb24KICAgICAqLwogICAgcHVibGlj\nIExlZGdlckhhbmRsZSBjcmVhdGVMZWRnZXIoaW50IGVuc1NpemUsIGludCBx\nU2l6ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERp\nZ2VzdFR5cGUgZGlnZXN0VHlwZSwgYnl0ZSBwYXNzd2RbXSkKICAgICAgICAg\nICAgdGhyb3dzIEludGVycnVwdGVkRXhjZXB0aW9uLCBCS0V4Y2VwdGlvbiB7\nCiAgICAgICAgcmV0dXJuIGNyZWF0ZUxlZGdlcihlbnNTaXplLCBxU2l6ZSwg\ncVNpemUsIGRpZ2VzdFR5cGUsIHBhc3N3ZCk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBTeW5jaHJvbm91cyBjYWxsIHRvIGNyZWF0ZSBsZWRnZXIuIFBhcmFt\nZXRlcnMgbWF0Y2ggdGhvc2Ugb2YKICAgICAqIHtAbGluayAjYXN5bmNDcmVh\ndGVMZWRnZXIoaW50LCBpbnQsIGludCwgRGlnZXN0VHlwZSwgYnl0ZVtdLAog\nICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICBBc3luY0NhbGxiYWNr\nLkNyZWF0ZUNhbGxiYWNrLCBPYmplY3QpfQogICAgICoKICAgICAqIEBwYXJh\nbSBlbnNTaXplCiAgICAgKiBAcGFyYW0gd3JpdGVRdW9ydW1TaXplCiAgICAg\nKiBAcGFyYW0gYWNrUXVvcnVtU2l6ZQogICAgICogQHBhcmFtIGRpZ2VzdFR5\ncGUKICAgICAqIEBwYXJhbSBwYXNzd2QKICAgICAqIEByZXR1cm4gYSBoYW5k\nbGUgdG8gdGhlIG5ld2x5IGNyZWF0ZWQgbGVkZ2VyCiAgICAgKiBAdGhyb3dz\nIEludGVycnVwdGVkRXhjZXB0aW9uCiAgICAgKiBAdGhyb3dzIEJLRXhjZXB0\naW9uCiAgICAgKi8KICAgIHB1YmxpYyBMZWRnZXJIYW5kbGUgY3JlYXRlTGVk\nZ2VyKGludCBlbnNTaXplLCBpbnQgd3JpdGVRdW9ydW1TaXplLCBpbnQgYWNr\nUXVvcnVtU2l6ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIERpZ2VzdFR5cGUgZGlnZXN0VHlwZSwgYnl0ZSBwYXNzd2RbXSkKICAg\nICAgICAgICAgdGhyb3dzIEludGVycnVwdGVkRXhjZXB0aW9uLCBCS0V4Y2Vw\ndGlvbiB7CiAgICAgICAgU3luY0NvdW50ZXIgY291bnRlciA9IG5ldyBTeW5j\nQ291bnRlcigpOwogICAgICAgIGNvdW50ZXIuaW5jKCk7CiAgICAgICAgLyoK\nICAgICAgICAgKiBDYWxscyBhc3luY2hyb25vdXMgdmVyc2lvbgogICAgICAg\nICAqLwogICAgICAgIGFzeW5jQ3JlYXRlTGVkZ2VyKGVuc1NpemUsIHdyaXRl\nUXVvcnVtU2l6ZSwgYWNrUXVvcnVtU2l6ZSwgZGlnZXN0VHlwZSwgcGFzc3dk\nLAogICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBTeW5jQ3JlYXRlQ2Fs\nbGJhY2soKSwgY291bnRlcik7CgogICAgICAgIC8qCiAgICAgICAgICogV2Fp\ndAogICAgICAgICAqLwogICAgICAgIGNvdW50ZXIuYmxvY2soMCk7CiAgICAg\nICAgaWYgKGNvdW50ZXIuZ2V0TGgoKSA9PSBudWxsKSB7CiAgICAgICAgICAg\nIExPRy5lcnJvcigiWm9vS2VlcGVyIGVycm9yOiAiICsgY291bnRlci5nZXRy\nYygpKTsKICAgICAgICAgICAgdGhyb3cgQktFeGNlcHRpb24uY3JlYXRlKENv\nZGUuWktFeGNlcHRpb24pOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGNv\ndW50ZXIuZ2V0TGgoKTsKICAgIH0KCiAgICAvKioKICAgICAqIE9wZW4gZXhp\nc3RpbmcgbGVkZ2VyIGFzeW5jaHJvbm91c2x5IGZvciByZWFkaW5nLgogICAg\nICogCiAgICAgKiBPcGVuaW5nIGEgbGVkZ2VyIHdpdGggdGhpcyBtZXRob2Qg\naW52b2tlcyBmZW5jaW5nIGFuZCByZWNvdmVyeSBvbiB0aGUgbGVkZ2VyIAog\nICAgICogaWYgdGhlIGxlZGdlciBoYXMgbm90IGJlZW4gY2xvc2VkLiBGZW5j\naW5nIHdpbGwgYmxvY2sgYWxsIG90aGVyIGNsaWVudHMgZnJvbSAKICAgICAq\nIHdyaXRpbmcgdG8gdGhlIGxlZGdlci4gUmVjb3Zlcnkgd2lsbCBtYWtlIHN1\ncmUgdGhhdCB0aGUgbGVkZ2VyIGlzIGNsb3NlZCAKICAgICAqIGJlZm9yZSBy\nZWFkaW5nIGZyb20gaXQuIAogICAgICoKICAgICAqIFJlY292ZXJ5IGFsc28g\nbWFrZXMgc3VyZSB0aGF0IGFueSBlbnRyaWVzIHdoaWNoIHJlYWNoZWQgb25l\nIGJvb2tpZSwgYnV0IG5vdCBhIAogICAgICogcXVvcnVtLCB3aWxsIGJlIHJl\ncGxpY2F0ZWQgdG8gYSBxdW9ydW0gb2YgYm9va2llcy4gVGhpcyBvY2N1cnMg\naW4gY2FzZXMgd2VyZQogICAgICogdGhlIHdyaXRlciBvZiBhIGxlZGdlciBj\ncmFzaGVzIGFmdGVyIHNlbmRpbmcgYSB3cml0ZSByZXF1ZXN0IHRvIG9uZSBi\nb29raWUgYnV0CiAgICAgKiBiZWZvcmUgYmVpbmcgYWJsZSB0byBzZW5kIGl0\nIHRvIHRoZSByZXN0IG9mIHRoZSBib29raWVzIGluIHRoZSBxdW9ydW0uIAog\nICAgICoKICAgICAqIElmIHRoZSBsZWRnZXIgaXMgYWxyZWFkeSBjbG9zZWQs\nIG5laXRoZXIgZmVuY2luZyBub3IgcmVjb3Zlcnkgd2lsbCBiZSBhcHBsaWVk\nLgogICAgICogCiAgICAgKiBAc2VlIExlZGdlckhhbmRsZSNhc3luY0Nsb3Nl\nCiAgICAgKgogICAgICogQHBhcmFtIGxJZAogICAgICogICAgICAgICAgbGVk\nZ2VyIGlkZW50aWZpZXIKICAgICAqIEBwYXJhbSBkaWdlc3RUeXBlCiAgICAg\nKiAgICAgICAgICBkaWdlc3QgdHlwZSwgZWl0aGVyIE1BQyBvciBDUkMzMgog\nICAgICogQHBhcmFtIHBhc3N3ZAogICAgICogICAgICAgICAgcGFzc3dvcmQK\nICAgICAqIEBwYXJhbSBjdHgKICAgICAqICAgICAgICAgIG9wdGlvbmFsIGNv\nbnRyb2wgb2JqZWN0CiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIGFzeW5jT3Bl\nbkxlZGdlcihmaW5hbCBsb25nIGxJZCwgZmluYWwgRGlnZXN0VHlwZSBkaWdl\nc3RUeXBlLCBmaW5hbCBieXRlIHBhc3N3ZFtdLAogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIGZpbmFsIE9wZW5DYWxsYmFjayBjYiwgZmluYWwg\nT2JqZWN0IGN0eCkgewogICAgICAgIG5ldyBMZWRnZXJPcGVuT3AoQm9va0tl\nZXBlci50aGlzLCBsSWQsIGRpZ2VzdFR5cGUsIHBhc3N3ZCwgY2IsIGN0eCku\naW5pdGlhdGUoKTsKICAgIH0KCiAgICAvKioKICAgICAqIE9wZW4gZXhpc3Rp\nbmcgbGVkZ2VyIGFzeW5jaHJvbm91c2x5IGZvciByZWFkaW5nLCBidXQgaXQg\nZG9lcyBub3QgdHJ5IHRvCiAgICAgKiByZWNvdmVyIHRoZSBsZWRnZXIgaWYg\naXQgaXMgbm90IHlldCBjbG9zZWQuIFRoZSBhcHBsaWNhdGlvbiBuZWVkcyB0\nbyB1c2UKICAgICAqIGl0IGNhcmVmdWxseSwgc2luY2UgdGhlIHdyaXRlciBt\naWdodCBoYXZlIGNyYXNoZWQgYW5kIGxlZGdlciB3aWxsIHJlbWFpbgogICAg\nICogdW5zZWFsZWQgZm9yZXZlciBpZiB0aGVyZSBpcyBubyBleHRlcm5hbCBt\nZWNoYW5pc20gdG8gZGV0ZWN0IHRoZSBmYWlsdXJlCiAgICAgKiBvZiB0aGUg\nd3JpdGVyIGFuZCB0aGUgbGVkZ2VyIGlzIG5vdCBvcGVuIGluIGEgc2FmZSBt\nYW5uZXIsIGludm9raW5nIHRoZQogICAgICogcmVjb3ZlcnkgcHJvY2VkdXJl\nLgogICAgICogCiAgICAgKiBPcGVuaW5nIGEgbGVkZ2VyIHdpdGhvdXQgcmVj\nb3ZlcnkgZG9lcyBub3QgZmVuY2UgdGhlIGxlZGdlci4gQXMgc3VjaCwgb3Ro\nZXIKICAgICAqIGNsaWVudHMgY2FuIGNvbnRpbnVlIHRvIHdyaXRlIHRvIHRo\nZSBsZWRnZXIuIAogICAgICoKICAgICAqIFRoaXMgbWV0aG9kIHJldHVybnMg\nYSByZWFkIG9ubHkgbGVkZ2VyIGhhbmRsZS4gSXQgd2lsbCBub3QgYmUgcG9z\nc2libGUgCiAgICAgKiB0byBhZGQgZW50cmllcyB0byB0aGUgbGVkZ2VyLiBB\nbnkgYXR0ZW1wdCB0byBhZGQgZW50cmllcyB3aWxsIHRocm93IGFuIAogICAg\nICogZXhjZXB0aW9uLgogICAgICogCiAgICAgKiBSZWFkcyBmcm9tIHRoZSBy\nZXR1cm5lZCBsZWRnZXIgd2lsbCBvbmx5IGJlIGFibGUgdG8gcmVhZCBlbnRy\naWVzIHVwIHVudGlsCiAgICAgKiB0aGUgbGFzdENvbmZpcm1lZEVudHJ5IGF0\nIHRoZSBwb2ludCBpbiB0aW1lIGF0IHdoaWNoIHRoZSBsZWRnZXIgd2FzIG9w\nZW5lZC4KICAgICAqCiAgICAgKiBAcGFyYW0gbElkCiAgICAgKiAgICAgICAg\nICBsZWRnZXIgaWRlbnRpZmllcgogICAgICogQHBhcmFtIGRpZ2VzdFR5cGUK\nICAgICAqICAgICAgICAgIGRpZ2VzdCB0eXBlLCBlaXRoZXIgTUFDIG9yIENS\nQzMyCiAgICAgKiBAcGFyYW0gcGFzc3dkCiAgICAgKiAgICAgICAgICBwYXNz\nd29yZAogICAgICogQHBhcmFtIGN0eAogICAgICogICAgICAgICAgb3B0aW9u\nYWwgY29udHJvbCBvYmplY3QKICAgICAqLwogICAgcHVibGljIHZvaWQgYXN5\nbmNPcGVuTGVkZ2VyTm9SZWNvdmVyeShmaW5hbCBsb25nIGxJZCwgZmluYWwg\nRGlnZXN0VHlwZSBkaWdlc3RUeXBlLCBmaW5hbCBieXRlIHBhc3N3ZFtdLAog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5h\nbCBPcGVuQ2FsbGJhY2sgY2IsIGZpbmFsIE9iamVjdCBjdHgpIHsKICAgICAg\nICBuZXcgTGVkZ2VyT3Blbk9wKEJvb2tLZWVwZXIudGhpcywgbElkLCBkaWdl\nc3RUeXBlLCBwYXNzd2QsIGNiLCBjdHgpLmluaXRpYXRlV2l0aG91dFJlY292\nZXJ5KCk7CiAgICB9CgoKICAgIC8qKgogICAgICogU3luY2hyb25vdXMgb3Bl\nbiBsZWRnZXIgY2FsbAogICAgICoKICAgICAqIEBzZWUgI2FzeW5jT3Blbkxl\nZGdlcgogICAgICogQHBhcmFtIGxJZAogICAgICogICAgICAgICAgbGVkZ2Vy\nIGlkZW50aWZpZXIKICAgICAqIEBwYXJhbSBkaWdlc3RUeXBlCiAgICAgKiAg\nICAgICAgICBkaWdlc3QgdHlwZSwgZWl0aGVyIE1BQyBvciBDUkMzMgogICAg\nICogQHBhcmFtIHBhc3N3ZAogICAgICogICAgICAgICAgcGFzc3dvcmQKICAg\nICAqIEByZXR1cm4gYSBoYW5kbGUgdG8gdGhlIG9wZW4gbGVkZ2VyCiAgICAg\nKiBAdGhyb3dzIEludGVycnVwdGVkRXhjZXB0aW9uCiAgICAgKiBAdGhyb3dz\nIEJLRXhjZXB0aW9uCiAgICAgKi8KCiAgICBwdWJsaWMgTGVkZ2VySGFuZGxl\nIG9wZW5MZWRnZXIobG9uZyBsSWQsIERpZ2VzdFR5cGUgZGlnZXN0VHlwZSwg\nYnl0ZSBwYXNzd2RbXSkKICAgICAgICAgICAgdGhyb3dzIEJLRXhjZXB0aW9u\nLCBJbnRlcnJ1cHRlZEV4Y2VwdGlvbiB7CiAgICAgICAgU3luY0NvdW50ZXIg\nY291bnRlciA9IG5ldyBTeW5jQ291bnRlcigpOwogICAgICAgIGNvdW50ZXIu\naW5jKCk7CgogICAgICAgIC8qCiAgICAgICAgICogQ2FsbHMgYXN5bmMgb3Bl\nbiBsZWRnZXIKICAgICAgICAgKi8KICAgICAgICBhc3luY09wZW5MZWRnZXIo\nbElkLCBkaWdlc3RUeXBlLCBwYXNzd2QsIG5ldyBTeW5jT3BlbkNhbGxiYWNr\nKCksIGNvdW50ZXIpOwoKICAgICAgICAvKgogICAgICAgICAqIFdhaXQKICAg\nICAgICAgKi8KICAgICAgICBjb3VudGVyLmJsb2NrKDApOwogICAgICAgIGlm\nIChjb3VudGVyLmdldHJjKCkgIT0gQktFeGNlcHRpb24uQ29kZS5PSykKICAg\nICAgICAgICAgdGhyb3cgQktFeGNlcHRpb24uY3JlYXRlKGNvdW50ZXIuZ2V0\ncmMoKSk7CgogICAgICAgIHJldHVybiBjb3VudGVyLmdldExoKCk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBTeW5jaHJvbm91cywgdW5zYWZlIG9wZW4gbGVk\nZ2VyIGNhbGwKICAgICAqCiAgICAgKiBAc2VlICNhc3luY09wZW5MZWRnZXJO\nb1JlY292ZXJ5CiAgICAgKiBAcGFyYW0gbElkCiAgICAgKiAgICAgICAgICBs\nZWRnZXIgaWRlbnRpZmllcgogICAgICogQHBhcmFtIGRpZ2VzdFR5cGUKICAg\nICAqICAgICAgICAgIGRpZ2VzdCB0eXBlLCBlaXRoZXIgTUFDIG9yIENSQzMy\nCiAgICAgKiBAcGFyYW0gcGFzc3dkCiAgICAgKiAgICAgICAgICBwYXNzd29y\nZAogICAgICogQHJldHVybiBhIGhhbmRsZSB0byB0aGUgb3BlbiBsZWRnZXIK\nICAgICAqIEB0aHJvd3MgSW50ZXJydXB0ZWRFeGNlcHRpb24KICAgICAqIEB0\naHJvd3MgQktFeGNlcHRpb24KICAgICAqLwoKICAgIHB1YmxpYyBMZWRnZXJI\nYW5kbGUgb3BlbkxlZGdlck5vUmVjb3ZlcnkobG9uZyBsSWQsIERpZ2VzdFR5\ncGUgZGlnZXN0VHlwZSwgYnl0ZSBwYXNzd2RbXSkKICAgICAgICAgICAgdGhy\nb3dzIEJLRXhjZXB0aW9uLCBJbnRlcnJ1cHRlZEV4Y2VwdGlvbiB7CiAgICAg\nICAgU3luY0NvdW50ZXIgY291bnRlciA9IG5ldyBTeW5jQ291bnRlcigpOwog\nICAgICAgIGNvdW50ZXIuaW5jKCk7CgogICAgICAgIC8qCiAgICAgICAgICog\nQ2FsbHMgYXN5bmMgb3BlbiBsZWRnZXIKICAgICAgICAgKi8KICAgICAgICBh\nc3luY09wZW5MZWRnZXJOb1JlY292ZXJ5KGxJZCwgZGlnZXN0VHlwZSwgcGFz\nc3dkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFN5\nbmNPcGVuQ2FsbGJhY2soKSwgY291bnRlcik7CgogICAgICAgIC8qCiAgICAg\nICAgICogV2FpdAogICAgICAgICAqLwogICAgICAgIGNvdW50ZXIuYmxvY2so\nMCk7CiAgICAgICAgaWYgKGNvdW50ZXIuZ2V0cmMoKSAhPSBCS0V4Y2VwdGlv\nbi5Db2RlLk9LKQogICAgICAgICAgICB0aHJvdyBCS0V4Y2VwdGlvbi5jcmVh\ndGUoY291bnRlci5nZXRyYygpKTsKCiAgICAgICAgcmV0dXJuIGNvdW50ZXIu\nZ2V0TGgoKTsKICAgIH0KCiAgICAvKioKICAgICAqIERlbGV0ZXMgYSBsZWRn\nZXIgYXN5bmNocm9ub3VzbHkuCiAgICAgKgogICAgICogQHBhcmFtIGxJZAog\nICAgICogICAgICAgICAgICBsZWRnZXIgSWQKICAgICAqIEBwYXJhbSBjYgog\nICAgICogICAgICAgICAgICBkZWxldGVDYWxsYmFjayBpbXBsZW1lbnRhdGlv\nbgogICAgICogQHBhcmFtIGN0eAogICAgICogICAgICAgICAgICBvcHRpb25h\nbCBjb250cm9sIG9iamVjdAogICAgICovCiAgICBwdWJsaWMgdm9pZCBhc3lu\nY0RlbGV0ZUxlZGdlcihmaW5hbCBsb25nIGxJZCwgZmluYWwgRGVsZXRlQ2Fs\nbGJhY2sgY2IsIGZpbmFsIE9iamVjdCBjdHgpIHsKICAgICAgICBuZXcgTGVk\nZ2VyRGVsZXRlT3AoQm9va0tlZXBlci50aGlzLCBsSWQsIGNiLCBjdHgpLmlu\naXRpYXRlKCk7CiAgICB9CgoKICAgIC8qKgogICAgICogU3luY2hyb25vdXMg\nY2FsbCB0byBkZWxldGUgYSBsZWRnZXIuIFBhcmFtZXRlcnMgbWF0Y2ggdGhv\nc2Ugb2YKICAgICAqIHtAbGluayAjYXN5bmNEZWxldGVMZWRnZXIobG9uZywg\nQXN5bmNDYWxsYmFjay5EZWxldGVDYWxsYmFjaywgT2JqZWN0KX0KICAgICAq\nCiAgICAgKiBAcGFyYW0gbElkCiAgICAgKiAgICAgICAgICAgIGxlZGdlcklk\nCiAgICAgKiBAdGhyb3dzIEludGVycnVwdGVkRXhjZXB0aW9uCiAgICAgKiBA\ndGhyb3dzIEJLRXhjZXB0aW9uLkJLTm9TdWNoTGVkZ2VyRXhpc3RzRXhjZXB0\naW9uIGlmIHRoZSBsZWRnZXIgZG9lc24ndCBleGlzdAogICAgICogQHRocm93\ncyBCS0V4Y2VwdGlvbgogICAgICovCiAgICBwdWJsaWMgdm9pZCBkZWxldGVM\nZWRnZXIobG9uZyBsSWQpIHRocm93cyBJbnRlcnJ1cHRlZEV4Y2VwdGlvbiwg\nQktFeGNlcHRpb24gewogICAgICAgIFN5bmNDb3VudGVyIGNvdW50ZXIgPSBu\nZXcgU3luY0NvdW50ZXIoKTsKICAgICAgICBjb3VudGVyLmluYygpOwogICAg\nICAgIC8vIENhbGwgYXN5bmNocm9ub3VzIHZlcnNpb24KICAgICAgICBhc3lu\nY0RlbGV0ZUxlZGdlcihsSWQsIG5ldyBTeW5jRGVsZXRlQ2FsbGJhY2soKSwg\nY291bnRlcik7CiAgICAgICAgLy8gV2FpdAogICAgICAgIGNvdW50ZXIuYmxv\nY2soMCk7CiAgICAgICAgaWYgKGNvdW50ZXIuZ2V0cmMoKSAhPSBCS0V4Y2Vw\ndGlvbi5Db2RlLk9LKSB7CiAgICAgICAgICAgIExPRy5lcnJvcigiRXJyb3Ig\nZGVsZXRpbmcgbGVkZ2VyICIgKyBsSWQgKyAiIDogIiArIGNvdW50ZXIuZ2V0\ncmMoKSk7CiAgICAgICAgICAgIHRocm93IEJLRXhjZXB0aW9uLmNyZWF0ZShj\nb3VudGVyLmdldHJjKCkpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAg\nICAqIFNodXRzIGRvd24gY2xpZW50LgogICAgICoKICAgICAqLwogICAgcHVi\nbGljIHZvaWQgY2xvc2UoKSB0aHJvd3MgSW50ZXJydXB0ZWRFeGNlcHRpb24s\nIEJLRXhjZXB0aW9uIHsKICAgICAgICBzY2hlZHVsZXIuc2h1dGRvd24oKTsK\nICAgICAgICBpZiAoIXNjaGVkdWxlci5hd2FpdFRlcm1pbmF0aW9uKDEwLCBU\naW1lVW5pdC5TRUNPTkRTKSkgewogICAgICAgICAgICBMT0cud2FybigiVGhl\nIHNjaGVkdWxlciBkaWQgbm90IHNodXRkb3duIGNsZWFubHkiKTsKICAgICAg\nICB9CiAgICAgICAgbWFpbldvcmtlclBvb2wuc2h1dGRvd24oKTsKICAgICAg\nICBpZiAoIW1haW5Xb3JrZXJQb29sLmF3YWl0VGVybWluYXRpb24oMTAsIFRp\nbWVVbml0LlNFQ09ORFMpKSB7CiAgICAgICAgICAgIExPRy53YXJuKCJUaGUg\nbWFpbldvcmtlclBvb2wgZGlkIG5vdCBzaHV0ZG93biBjbGVhbmx5Iik7CiAg\nICAgICAgfQoKICAgICAgICBib29raWVDbGllbnQuY2xvc2UoKTsKICAgICAg\nICB0cnkgewogICAgICAgICAgICBsZWRnZXJNYW5hZ2VyLmNsb3NlKCk7CiAg\nICAgICAgICAgIGxlZGdlck1hbmFnZXJGYWN0b3J5LnVuaW5pdGlhbGl6ZSgp\nOwogICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGllKSB7CiAgICAgICAg\nICAgIExPRy5lcnJvcigiRmFpbGVkIHRvIGNsb3NlIGxlZGdlciBtYW5hZ2Vy\nIDogIiwgaWUpOwogICAgICAgIH0KCiAgICAgICAgaWYgKG93bkNoYW5uZWxG\nYWN0b3J5KSB7CiAgICAgICAgICAgIGNoYW5uZWxGYWN0b3J5LnJlbGVhc2VF\neHRlcm5hbFJlc291cmNlcygpOwogICAgICAgIH0KICAgICAgICBpZiAob3du\nWktIYW5kbGUpIHsKICAgICAgICAgICAgemsuY2xvc2UoKTsKICAgICAgICB9\nCiAgICB9CgogICAgcHJpdmF0ZSBzdGF0aWMgY2xhc3MgU3luY0NyZWF0ZUNh\nbGxiYWNrIGltcGxlbWVudHMgQ3JlYXRlQ2FsbGJhY2sgewogICAgICAgIC8q\nKgogICAgICAgICAqIENyZWF0ZSBjYWxsYmFjayBpbXBsZW1lbnRhdGlvbiBm\nb3Igc3luY2hyb25vdXMgY3JlYXRlIGNhbGwuCiAgICAgICAgICoKICAgICAg\nICAgKiBAcGFyYW0gcmMKICAgICAgICAgKiAgICAgICAgICByZXR1cm4gY29k\nZQogICAgICAgICAqIEBwYXJhbSBsaAogICAgICAgICAqICAgICAgICAgIGxl\nZGdlciBoYW5kbGUgb2JqZWN0CiAgICAgICAgICogQHBhcmFtIGN0eAogICAg\nICAgICAqICAgICAgICAgIG9wdGlvbmFsIGNvbnRyb2wgb2JqZWN0CiAgICAg\nICAgICovCiAgICAgICAgcHVibGljIHZvaWQgY3JlYXRlQ29tcGxldGUoaW50\nIHJjLCBMZWRnZXJIYW5kbGUgbGgsIE9iamVjdCBjdHgpIHsKICAgICAgICAg\nICAgU3luY0NvdW50ZXIgY291bnRlciA9IChTeW5jQ291bnRlcikgY3R4Owog\nICAgICAgICAgICBjb3VudGVyLnNldExoKGxoKTsKICAgICAgICAgICAgY291\nbnRlci5zZXRyYyhyYyk7CiAgICAgICAgICAgIGNvdW50ZXIuZGVjKCk7CiAg\nICAgICAgfQogICAgfQoKICAgIHN0YXRpYyBjbGFzcyBTeW5jT3BlbkNhbGxi\nYWNrIGltcGxlbWVudHMgT3BlbkNhbGxiYWNrIHsKICAgICAgICAvKioKICAg\nICAgICAgKiBDYWxsYmFjayBtZXRob2QgZm9yIHN5bmNocm9ub3VzIG9wZW4g\nb3BlcmF0aW9uCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gcmMKICAg\nICAgICAgKiAgICAgICAgICByZXR1cm4gY29kZQogICAgICAgICAqIEBwYXJh\nbSBsaAogICAgICAgICAqICAgICAgICAgIGxlZGdlciBoYW5kbGUKICAgICAg\nICAgKiBAcGFyYW0gY3R4CiAgICAgICAgICogICAgICAgICAgb3B0aW9uYWwg\nY29udHJvbCBvYmplY3QKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgdm9p\nZCBvcGVuQ29tcGxldGUoaW50IHJjLCBMZWRnZXJIYW5kbGUgbGgsIE9iamVj\ndCBjdHgpIHsKICAgICAgICAgICAgU3luY0NvdW50ZXIgY291bnRlciA9IChT\neW5jQ291bnRlcikgY3R4OwogICAgICAgICAgICBjb3VudGVyLnNldExoKGxo\nKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIExPRy5kZWJ1ZygiT3BlbiBj\nb21wbGV0ZToge30iLCByYyk7CiAgICAgICAgICAgIAogICAgICAgICAgICBj\nb3VudGVyLnNldHJjKHJjKTsKICAgICAgICAgICAgY291bnRlci5kZWMoKTsK\nICAgICAgICB9CiAgICB9CgogICAgcHJpdmF0ZSBzdGF0aWMgY2xhc3MgU3lu\nY0RlbGV0ZUNhbGxiYWNrIGltcGxlbWVudHMgRGVsZXRlQ2FsbGJhY2sgewog\nICAgICAgIC8qKgogICAgICAgICAqIERlbGV0ZSBjYWxsYmFjayBpbXBsZW1l\nbnRhdGlvbiBmb3Igc3luY2hyb25vdXMgZGVsZXRlIGNhbGwuCiAgICAgICAg\nICoKICAgICAgICAgKiBAcGFyYW0gcmMKICAgICAgICAgKiAgICAgICAgICAg\nIHJldHVybiBjb2RlCiAgICAgICAgICogQHBhcmFtIGN0eAogICAgICAgICAq\nICAgICAgICAgICAgb3B0aW9uYWwgY29udHJvbCBvYmplY3QKICAgICAgICAg\nKi8KICAgICAgICBwdWJsaWMgdm9pZCBkZWxldGVDb21wbGV0ZShpbnQgcmMs\nIE9iamVjdCBjdHgpIHsKICAgICAgICAgICAgU3luY0NvdW50ZXIgY291bnRl\nciA9IChTeW5jQ291bnRlcikgY3R4OwogICAgICAgICAgICBjb3VudGVyLnNl\ndHJjKHJjKTsKICAgICAgICAgICAgY291bnRlci5kZWMoKTsKICAgICAgICB9\nCiAgICB9CgoKCn0K\n","encoding":"base64"}

