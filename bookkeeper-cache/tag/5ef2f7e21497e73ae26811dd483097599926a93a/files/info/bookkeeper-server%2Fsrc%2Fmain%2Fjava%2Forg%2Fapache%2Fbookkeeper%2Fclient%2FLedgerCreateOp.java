{"sha":"9d288c8da2b43b386cb73f17f2cf7c96c43b843b","node_id":"MDQ6QmxvYjE1NzU5NTY6OWQyODhjOGRhMmI0M2IzODZjYjczZjE3ZjJjZjdjOTZjNDNiODQzYg==","size":4269,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/9d288c8da2b43b386cb73f17f2cf7c96c43b843b","content":"LyoKICoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9y\nIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBU\naGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhl\nIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNl\nIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBs\naWFuY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEg\nY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBl\naXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZv\nciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Np\nb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICoK\nICovCgpwYWNrYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci5jbGllbnQ7Cgpp\nbXBvcnQgamF2YS5uZXQuSW5ldFNvY2tldEFkZHJlc3M7CmltcG9ydCBqYXZh\nLnNlY3VyaXR5LkdlbmVyYWxTZWN1cml0eUV4Y2VwdGlvbjsKaW1wb3J0IGph\ndmEudXRpbC5BcnJheUxpc3Q7CgppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2Vl\ncGVyLmNsaWVudC5Bc3luY0NhbGxiYWNrLkNyZWF0ZUNhbGxiYWNrOwppbXBv\ncnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNsaWVudC5CS0V4Y2VwdGlvbi5C\nS05vdEVub3VnaEJvb2tpZXNFeGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hl\nLmJvb2trZWVwZXIuY2xpZW50LkJvb2tLZWVwZXIuRGlnZXN0VHlwZTsKaW1w\nb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5wcm90by5Cb29ra2VlcGVySW50\nZXJuYWxDYWxsYmFja3MuR2VuZXJpY0NhbGxiYWNrOwoKaW1wb3J0IG9yZy5z\nbGY0ai5Mb2dnZXI7CmltcG9ydCBvcmcuc2xmNGouTG9nZ2VyRmFjdG9yeTsK\nCi8qKgogKiBFbmNhcHN1bGF0ZXMgYXN5bmNocm9ub3VzIGxlZGdlciBjcmVh\ndGUgb3BlcmF0aW9uCiAqCiAqLwpjbGFzcyBMZWRnZXJDcmVhdGVPcCBpbXBs\nZW1lbnRzIEdlbmVyaWNDYWxsYmFjazxMb25nPiB7CgogICAgc3RhdGljIGZp\nbmFsIExvZ2dlciBMT0cgPSBMb2dnZXJGYWN0b3J5LmdldExvZ2dlcihMZWRn\nZXJDcmVhdGVPcC5jbGFzcyk7CgogICAgQ3JlYXRlQ2FsbGJhY2sgY2I7CiAg\nICBMZWRnZXJNZXRhZGF0YSBtZXRhZGF0YTsKICAgIExlZGdlckhhbmRsZSBs\naDsKICAgIE9iamVjdCBjdHg7CiAgICBieXRlW10gcGFzc3dkOwogICAgQm9v\na0tlZXBlciBiazsKICAgIERpZ2VzdFR5cGUgZGlnZXN0VHlwZTsKCiAgICAv\nKioKICAgICAqIENvbnN0cnVjdG9yCiAgICAgKgogICAgICogQHBhcmFtIGJr\nCiAgICAgKiAgICAgICBCb29rS2VlcGVyIG9iamVjdAogICAgICogQHBhcmFt\nIGVuc2VtYmxlU2l6ZQogICAgICogICAgICAgZW5zZW1ibGUgc2l6ZQogICAg\nICogQHBhcmFtIHF1b3J1bVNpemUKICAgICAqICAgICAgIHF1b3J1bSBzaXpl\nCiAgICAgKiBAcGFyYW0gZGlnZXN0VHlwZQogICAgICogICAgICAgZGlnZXN0\nIHR5cGUsIGVpdGhlciBNQUMgb3IgQ1JDMzIKICAgICAqIEBwYXJhbSBwYXNz\nd2QKICAgICAqICAgICAgIHBhc3Nvd3JkCiAgICAgKiBAcGFyYW0gY2IKICAg\nICAqICAgICAgIGNhbGxiYWNrIGltcGxlbWVudGF0aW9uCiAgICAgKiBAcGFy\nYW0gY3R4CiAgICAgKiAgICAgICBvcHRpb25hbCBjb250cm9sIG9iamVjdAog\nICAgICovCgogICAgTGVkZ2VyQ3JlYXRlT3AoQm9va0tlZXBlciBiaywgaW50\nIGVuc2VtYmxlU2l6ZSwKICAgICAgICAgICAgICAgICAgIGludCB3cml0ZVF1\nb3J1bVNpemUsIGludCBhY2tRdW9ydW1TaXplLAogICAgICAgICAgICAgICAg\nICAgRGlnZXN0VHlwZSBkaWdlc3RUeXBlLAogICAgICAgICAgICAgICAgICAg\nYnl0ZVtdIHBhc3N3ZCwgQ3JlYXRlQ2FsbGJhY2sgY2IsIE9iamVjdCBjdHgp\nIHsKICAgICAgICB0aGlzLmJrID0gYms7CiAgICAgICAgdGhpcy5tZXRhZGF0\nYSA9IG5ldyBMZWRnZXJNZXRhZGF0YShlbnNlbWJsZVNpemUsIHdyaXRlUXVv\ncnVtU2l6ZSwgYWNrUXVvcnVtU2l6ZSwgZGlnZXN0VHlwZSwgcGFzc3dkKTsK\nICAgICAgICB0aGlzLmRpZ2VzdFR5cGUgPSBkaWdlc3RUeXBlOwogICAgICAg\nIHRoaXMucGFzc3dkID0gcGFzc3dkOwogICAgICAgIHRoaXMuY2IgPSBjYjsK\nICAgICAgICB0aGlzLmN0eCA9IGN0eDsKICAgIH0KCiAgICAvKioKICAgICAq\nIEluaXRpYXRlcyB0aGUgb3BlcmF0aW9uCiAgICAgKi8KICAgIHB1YmxpYyB2\nb2lkIGluaXRpYXRlKCkgewogICAgICAgIC8vIGFsbG9jYXRlIGVuc2VtYmxl\nIGZpcnN0CgogICAgICAgIC8qCiAgICAgICAgICogQWRkaW5nIGJvb2tpZXMg\ndG8gbGVkZ2VyIGhhbmRsZQogICAgICAgICAqLwoKICAgICAgICBBcnJheUxp\nc3Q8SW5ldFNvY2tldEFkZHJlc3M+IGVuc2VtYmxlOwogICAgICAgIHRyeSB7\nCiAgICAgICAgICAgIGVuc2VtYmxlID0gYmsuYm9va2llV2F0Y2hlci5nZXRO\nZXdCb29raWVzKG1ldGFkYXRhLmdldEVuc2VtYmxlU2l6ZSgpKTsKICAgICAg\nICB9IGNhdGNoIChCS05vdEVub3VnaEJvb2tpZXNFeGNlcHRpb24gZSkgewog\nICAgICAgICAgICBMT0cuZXJyb3IoIk5vdCBlbm91Z2ggYm9va2llcyB0byBj\ncmVhdGUgbGVkZ2VyIik7CiAgICAgICAgICAgIGNiLmNyZWF0ZUNvbXBsZXRl\nKGUuZ2V0Q29kZSgpLCBudWxsLCB0aGlzLmN0eCk7CiAgICAgICAgICAgIHJl\ndHVybjsKICAgICAgICB9CgogICAgICAgIC8qCiAgICAgICAgICogQWRkIGVu\nc2VtYmxlIHRvIHRoZSBjb25maWd1cmF0aW9uCiAgICAgICAgICovCiAgICAg\nICAgbWV0YWRhdGEuYWRkRW5zZW1ibGUoMEwsIGVuc2VtYmxlKTsKCiAgICAg\nICAgLy8gY3JlYXRlIGEgbGVkZ2VyIHdpdGggbWV0YWRhdGEKICAgICAgICBi\nay5nZXRMZWRnZXJNYW5hZ2VyKCkuY3JlYXRlTGVkZ2VyKG1ldGFkYXRhLCB0\naGlzKTsKICAgIH0KCiAgICAvKioKICAgICAqIENhbGxiYWNrIHdoZW4gY3Jl\nYXRlZCBsZWRnZXIuCiAgICAgKi8KICAgIEBPdmVycmlkZQogICAgcHVibGlj\nIHZvaWQgb3BlcmF0aW9uQ29tcGxldGUoaW50IHJjLCBMb25nIGxlZGdlcklk\nKSB7CiAgICAgICAgaWYgKEJLRXhjZXB0aW9uLkNvZGUuT0sgIT0gcmMpIHsK\nICAgICAgICAgICAgY2IuY3JlYXRlQ29tcGxldGUocmMsIG51bGwsIHRoaXMu\nY3R4KTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgbGggPSBuZXcgTGVkZ2VySGFuZGxlKGJrLCBs\nZWRnZXJJZCwgbWV0YWRhdGEsIGRpZ2VzdFR5cGUsIHBhc3N3ZCk7CiAgICAg\nICAgfSBjYXRjaCAoR2VuZXJhbFNlY3VyaXR5RXhjZXB0aW9uIGUpIHsKICAg\nICAgICAgICAgTE9HLmVycm9yKCJTZWN1cml0eSBleGNlcHRpb24gd2hpbGUg\nY3JlYXRpbmcgbGVkZ2VyOiAiICsgbGVkZ2VySWQsIGUpOwogICAgICAgICAg\nICBjYi5jcmVhdGVDb21wbGV0ZShCS0V4Y2VwdGlvbi5Db2RlLkRpZ2VzdE5v\ndEluaXRpYWxpemVkRXhjZXB0aW9uLCBudWxsLCB0aGlzLmN0eCk7CiAgICAg\nICAgICAgIHJldHVybjsKICAgICAgICB9IGNhdGNoIChOdW1iZXJGb3JtYXRF\neGNlcHRpb24gZSkgewogICAgICAgICAgICBMT0cuZXJyb3IoIkluY29ycmVj\ndGx5IGVudGVyZWQgcGFyYW1ldGVyIHRocm90dGxlOiAiICsgYmsuZ2V0Q29u\nZigpLmdldFRocm90dGxlVmFsdWUoKSwgZSk7CiAgICAgICAgICAgIGNiLmNy\nZWF0ZUNvbXBsZXRlKEJLRXhjZXB0aW9uLkNvZGUuSW5jb3JyZWN0UGFyYW1l\ndGVyRXhjZXB0aW9uLCBudWxsLCB0aGlzLmN0eCk7CiAgICAgICAgICAgIHJl\ndHVybjsKICAgICAgICB9CgogICAgICAgIC8vIHJldHVybiB0aGUgbGVkZ2Vy\nIGhhbmRsZSBiYWNrCiAgICAgICAgY2IuY3JlYXRlQ29tcGxldGUoQktFeGNl\ncHRpb24uQ29kZS5PSywgbGgsIHRoaXMuY3R4KTsKICAgIH0KCn0K\n","encoding":"base64"}

