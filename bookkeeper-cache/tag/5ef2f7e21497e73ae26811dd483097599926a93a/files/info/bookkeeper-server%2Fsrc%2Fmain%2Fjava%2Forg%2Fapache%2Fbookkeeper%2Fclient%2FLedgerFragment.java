{"sha":"e6bd37cb4cec6dbd35ab32b0b801165fb12bf954","node_id":"MDQ6QmxvYjE1NzU5NTY6ZTZiZDM3Y2I0Y2VjNmRiZDM1YWIzMmIwYjgwMTE2NWZiMTJiZjk1NA==","size":4685,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/e6bd37cb4cec6dbd35ab32b0b801165fb12bf954","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICBodHRwOi8vd3d3LmFwYWNo\nZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVp\ncmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5n\nLAogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBp\ncyBkaXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VU\nIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0\naGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3Ig\ndGhlCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9u\ncyBhbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqCiAq\nLwpwYWNrYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci5jbGllbnQ7CgppbXBv\ncnQgamF2YS5uZXQuSW5ldFNvY2tldEFkZHJlc3M7CmltcG9ydCBqYXZhLnV0\naWwuQXJyYXlMaXN0OwppbXBvcnQgamF2YS51dGlsLkxpc3Q7CmltcG9ydCBq\nYXZhLnV0aWwuU29ydGVkTWFwOwoKLyoqCiAqIFJlcHJlc2VudHMgdGhlIGVu\ndHJpZXMgb2YgYSBzZWdtZW50IG9mIGEgbGVkZ2VyIHdoaWNoIGFyZSBzdG9y\nZWQgb24gYSBzaW5nbGUKICogYm9va2llIGluIHRoZSBzZWdtZW50cyBib29r\naWUgZW5zZW1ibGUuCiAqIAogKiBVc2VkIGZvciBjaGVja2luZyBhbmQgcmVj\nb3ZlcnkKICovCnB1YmxpYyBjbGFzcyBMZWRnZXJGcmFnbWVudCB7CiAgICBw\ncml2YXRlIGZpbmFsIGludCBib29raWVJbmRleDsKICAgIHByaXZhdGUgZmlu\nYWwgTGlzdDxJbmV0U29ja2V0QWRkcmVzcz4gZW5zZW1ibGU7CiAgICBwcml2\nYXRlIGZpbmFsIGxvbmcgZmlyc3RFbnRyeUlkOwogICAgcHJpdmF0ZSBmaW5h\nbCBsb25nIGxhc3RLbm93bkVudHJ5SWQ7CiAgICBwcml2YXRlIGZpbmFsIGxv\nbmcgbGVkZ2VySWQ7CiAgICBwcml2YXRlIGZpbmFsIERpc3RyaWJ1dGlvblNj\naGVkdWxlIHNjaGVkdWxlOwogICAgcHJpdmF0ZSBmaW5hbCBib29sZWFuIGlz\nTGVkZ2VyQ2xvc2VkOwoKICAgIExlZGdlckZyYWdtZW50KExlZGdlckhhbmRs\nZSBsaCwgbG9uZyBmaXJzdEVudHJ5SWQsCiAgICAgICAgICAgIGxvbmcgbGFz\ndEtub3duRW50cnlJZCwgaW50IGJvb2tpZUluZGV4KSB7CiAgICAgICAgdGhp\ncy5sZWRnZXJJZCA9IGxoLmdldElkKCk7CiAgICAgICAgdGhpcy5maXJzdEVu\ndHJ5SWQgPSBmaXJzdEVudHJ5SWQ7CiAgICAgICAgdGhpcy5sYXN0S25vd25F\nbnRyeUlkID0gbGFzdEtub3duRW50cnlJZDsKICAgICAgICB0aGlzLmJvb2tp\nZUluZGV4ID0gYm9va2llSW5kZXg7CiAgICAgICAgdGhpcy5lbnNlbWJsZSA9\nIGxoLmdldExlZGdlck1ldGFkYXRhKCkuZ2V0RW5zZW1ibGUoZmlyc3RFbnRy\neUlkKTsKICAgICAgICB0aGlzLnNjaGVkdWxlID0gbGguZ2V0RGlzdHJpYnV0\naW9uU2NoZWR1bGUoKTsKICAgICAgICBTb3J0ZWRNYXA8TG9uZywgQXJyYXlM\naXN0PEluZXRTb2NrZXRBZGRyZXNzPj4gZW5zZW1ibGVzID0gbGgKICAgICAg\nICAgICAgICAgIC5nZXRMZWRnZXJNZXRhZGF0YSgpLmdldEVuc2VtYmxlcygp\nOwogICAgICAgIHRoaXMuaXNMZWRnZXJDbG9zZWQgPSBsaC5nZXRMZWRnZXJN\nZXRhZGF0YSgpLmlzQ2xvc2VkKCkKICAgICAgICAgICAgICAgIHx8ICFlbnNl\nbWJsZS5lcXVhbHMoZW5zZW1ibGVzLmdldChlbnNlbWJsZXMubGFzdEtleSgp\nKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRydWUsIGlmIGFu\nZCBvbmx5IGlmIHRoZSBsZWRnZXIgZnJhZ21lbnQgd2lsbCBuZXZlciBiZSBt\nb2RpZmllZAogICAgICogYnkgYW55IG9mIHRoZSBjbGllbnRzIGluIGZ1dHVy\nZSwgb3RoZXJ3aXNlIGZhbHNlLiBpLmUsCiAgICAgKiA8b2w+CiAgICAgKiA8\nbGk+SWYgbGVkZ2VyIGlzIGluIGNsb3NlZCBzdGF0ZSwgdGhlbiBubyBvdGhl\nciBjbGllbnRzIGNhbiBtb2RpZnkgdGhpcwogICAgICogZnJhZ21lbnQuPC9s\naT4KICAgICAqIDxsaT5JZiBsZWRnZXIgaXMgbm90IGluIGNsb3NlZCBzdGF0\nZSBhbmQgdGhlIGN1cnJlbnQgZnJhZ21lbnQgaXMgbm90IGEKICAgICAqIGxh\nc3QgZnJhZ21lbnQsIHRoZW4gbm8gb25lIHdpbGwgbW9kaWZ5IHRoaXMgZnJh\nZ21lbnQuPC9saT4KICAgICAqIDwvb2w+CiAgICAgKi8KICAgIHB1YmxpYyBi\nb29sZWFuIGlzQ2xvc2VkKCkgewogICAgICAgIHJldHVybiBpc0xlZGdlckNs\nb3NlZDsKICAgIH0KCiAgICBsb25nIGdldExlZGdlcklkKCkgewogICAgICAg\nIHJldHVybiBsZWRnZXJJZDsKICAgIH0KCiAgICBsb25nIGdldEZpcnN0RW50\ncnlJZCgpIHsKICAgICAgICByZXR1cm4gZmlyc3RFbnRyeUlkOwogICAgfQoK\nICAgIGxvbmcgZ2V0TGFzdEtub3duRW50cnlJZCgpIHsKICAgICAgICByZXR1\ncm4gbGFzdEtub3duRW50cnlJZDsKICAgIH0KCiAgICAvKioKICAgICAqIEdl\ndHMgdGhlIGZhaWxlZEJvb2tpZSBhZGRyZXNzCiAgICAgKi8KICAgIHB1Ymxp\nYyBJbmV0U29ja2V0QWRkcmVzcyBnZXRBZGRyZXNzKCkgewogICAgICAgIHJl\ndHVybiBlbnNlbWJsZS5nZXQoYm9va2llSW5kZXgpOwogICAgfQogICAgCiAg\nICAvKioKICAgICAqIEdldHMgdGhlIGZhaWxlZEJvb2tpZSBpbmRleAogICAg\nICovCiAgICBwdWJsaWMgaW50IGdldEJvb2tpZXNJbmRleCgpIHsKICAgICAg\nICByZXR1cm4gYm9va2llSW5kZXg7CiAgICB9CgogICAgLyoqCiAgICAgKiBH\nZXRzIHRoZSBmaXJzdCBzdG9yZWQgZW50cnkgaWQgb2YgdGhlIGZyYWdtZW50\nIGluIGZhaWxlZCBib29raWUuCiAgICAgKiAKICAgICAqIEByZXR1cm4gZW50\ncnlJZAogICAgICovCiAgICBwdWJsaWMgbG9uZyBnZXRGaXJzdFN0b3JlZEVu\ndHJ5SWQoKSB7CiAgICAgICAgbG9uZyBmaXJzdEVudHJ5ID0gZmlyc3RFbnRy\neUlkOwoKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGVuc2VtYmxlLnNp\nemUoKSAmJiBmaXJzdEVudHJ5IDw9IGxhc3RLbm93bkVudHJ5SWQ7IGkrKykg\newogICAgICAgICAgICBpZiAoc2NoZWR1bGUuaGFzRW50cnkoZmlyc3RFbnRy\neSwgYm9va2llSW5kZXgpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmly\nc3RFbnRyeTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAg\nIGZpcnN0RW50cnkrKzsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAg\nICByZXR1cm4gTGVkZ2VySGFuZGxlLklOVkFMSURfRU5UUllfSUQ7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBHZXRzIHRoZSBsYXN0IHN0b3JlZCBlbnRyeSBp\nZCBvZiB0aGUgZnJhZ21lbnQgaW4gZmFpbGVkIGJvb2tpZS4KICAgICAqIAog\nICAgICogQHJldHVybiBlbnRyeUlkCiAgICAgKi8KICAgIHB1YmxpYyBsb25n\nIGdldExhc3RTdG9yZWRFbnRyeUlkKCkgewogICAgICAgIGxvbmcgbGFzdEVu\ndHJ5ID0gbGFzdEtub3duRW50cnlJZDsKICAgICAgICBmb3IgKGludCBpID0g\nMDsgaSA8IGVuc2VtYmxlLnNpemUoKSAmJiBsYXN0RW50cnkgPj0gZmlyc3RF\nbnRyeUlkOyBpKyspIHsKICAgICAgICAgICAgaWYgKHNjaGVkdWxlLmhhc0Vu\ndHJ5KGxhc3RFbnRyeSwgYm9va2llSW5kZXgpKSB7CiAgICAgICAgICAgICAg\nICByZXR1cm4gbGFzdEVudHJ5OwogICAgICAgICAgICB9IGVsc2UgewogICAg\nICAgICAgICAgICAgbGFzdEVudHJ5LS07CiAgICAgICAgICAgIH0KICAgICAg\nICB9CiAgICAgICAgcmV0dXJuIExlZGdlckhhbmRsZS5JTlZBTElEX0VOVFJZ\nX0lEOwogICAgfQoKICAgIC8qKgogICAgICogR2V0cyB0aGUgZW5zZW1ibGUg\nb2YgZnJhZ21lbnQKICAgICAqIAogICAgICogQHJldHVybiB0aGUgZW5zZW1i\nbGUgZm9yIHRoZSBzZWdtZW50IHdoaWNoIHRoaXMgZnJhZ21lbnQgaXMgYSBw\nYXJ0IG9mCiAgICAgKi8KICAgIHB1YmxpYyBMaXN0PEluZXRTb2NrZXRBZGRy\nZXNzPiBnZXRFbnNlbWJsZSgpIHsKICAgICAgICByZXR1cm4gdGhpcy5lbnNl\nbWJsZTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBTdHJpbmcg\ndG9TdHJpbmcoKSB7CiAgICAgICAgcmV0dXJuIFN0cmluZy5mb3JtYXQoIkZy\nYWdtZW50KExlZGdlcklEOiAlZCwgRmlyc3RFbnRyeUlEOiAlZFslZF0sICIK\nICAgICAgICAgICAgICAgICsgIkxhc3RLbm93bkVudHJ5SUQ6ICVkWyVkXSwg\nSG9zdDogJXMsIENsb3NlZDogJXMpIiwgbGVkZ2VySWQsIGZpcnN0RW50cnlJ\nZCwKICAgICAgICAgICAgICAgIGdldEZpcnN0U3RvcmVkRW50cnlJZCgpLCBs\nYXN0S25vd25FbnRyeUlkLCBnZXRMYXN0U3RvcmVkRW50cnlJZCgpLAogICAg\nICAgICAgICAgICAgZ2V0QWRkcmVzcygpLCBpc0xlZGdlckNsb3NlZCk7CiAg\nICB9Cn0=\n","encoding":"base64"}

