{"sha":"d038e3bb82e1e41826b57c7efb4d99129a1c6d1e","node_id":"MDQ6QmxvYjE1NzU5NTY6ZDAzOGUzYmI4MmUxZTQxODI2YjU3YzdlZmI0ZDk5MTI5YTFjNmQxZQ==","size":16540,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/d038e3bb82e1e41826b57c7efb4d99129a1c6d1e","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY2xpZW50OwoKLyoqCiAq\nIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAo\nQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNl\nIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRpc3RyaWJ1\ndGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9u\nCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBs\naWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUg\nTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIpOyB5b3Ug\nbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlCiAq\nIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2Yg\ndGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9y\nZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQg\nYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNv\nZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRp\nc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FS\nUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhw\ncmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBz\ncGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq\nIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCmltcG9ydCBq\nYXZhLmlvLkJ1ZmZlcmVkUmVhZGVyOwppbXBvcnQgamF2YS5pby5TdHJpbmdS\nZWFkZXI7CmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uOwppbXBvcnQgamF2\nYS5uZXQuSW5ldFNvY2tldEFkZHJlc3M7CmltcG9ydCBqYXZhLnV0aWwuQXJy\nYXlMaXN0OwppbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9yOwppbXBvcnQgamF2\nYS51dGlsLk1hcDsKaW1wb3J0IGphdmEudXRpbC5Tb3J0ZWRNYXA7CmltcG9y\ndCBqYXZhLnV0aWwuVHJlZU1hcDsKaW1wb3J0IGphdmEudXRpbC5BcnJheXM7\nCgppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLnZlcnNpb25pbmcuVmVy\nc2lvbjsKaW1wb3J0IGNvbS5nb29nbGUucHJvdG9idWYuVGV4dEZvcm1hdDsK\naW1wb3J0IGNvbS5nb29nbGUucHJvdG9idWYuQnl0ZVN0cmluZzsKaW1wb3J0\nIG9yZy5hcGFjaGUuYm9va2tlZXBlci5wcm90by5EYXRhRm9ybWF0cy5MZWRn\nZXJNZXRhZGF0YUZvcm1hdDsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBl\nci51dGlsLlN0cmluZ1V0aWxzOwppbXBvcnQgb3JnLnNsZjRqLkxvZ2dlcjsK\naW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJGYWN0b3J5OwoKLyoqCiAqIFRoaXMg\nY2xhc3MgZW5jYXBzdWxhdGVzIGFsbCB0aGUgbGVkZ2VyIG1ldGFkYXRhIHRo\nYXQgaXMgcGVyc2lzdGVudGx5IHN0b3JlZAogKiBpbiB6b29rZWVwZXIuIEl0\nIHByb3ZpZGVzIHBhcnNpbmcgYW5kIHNlcmlhbGl6YXRpb24gbWV0aG9kcyBv\nZiBzdWNoIG1ldGFkYXRhLgogKgogKi8KcHVibGljIGNsYXNzIExlZGdlck1l\ndGFkYXRhIHsKICAgIHN0YXRpYyBmaW5hbCBMb2dnZXIgTE9HID0gTG9nZ2Vy\nRmFjdG9yeS5nZXRMb2dnZXIoTGVkZ2VyTWV0YWRhdGEuY2xhc3MpOwoKICAg\nIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBjbG9zZWQgPSAiQ0xPU0VE\nIjsKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBsU3BsaXR0ZXIg\nPSAiXG4iOwogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIHRTcGxp\ndHRlciA9ICJcdCI7CgogICAgLy8gY2FuJ3QgdXNlIC0xIGZvciBOT1RDTE9T\nRUQgYmVjYXVzZSB0aGF0IGlzIHJlc2VydmVkIGZvciBhIGNsb3NlZCwgZW1w\ndHkKICAgIC8vIGxlZGdlcgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgaW50\nIE5PVENMT1NFRCA9IC0xMDE7CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBp\nbnQgSU5fUkVDT1ZFUlkgPSAtMTAyOwoKICAgIHB1YmxpYyBzdGF0aWMgZmlu\nYWwgaW50IExPV0VTVF9DT01QQVRfTUVUQURBVEFfRk9STUFUX1ZFUlNJT04g\nPSAwOwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgQ1VSUkVOVF9NRVRB\nREFUQV9GT1JNQVRfVkVSU0lPTiA9IDI7CiAgICBwdWJsaWMgc3RhdGljIGZp\nbmFsIFN0cmluZyBWRVJTSU9OX0tFWSA9ICJCb29raWVNZXRhZGF0YUZvcm1h\ndFZlcnNpb24iOwoKICAgIHByaXZhdGUgaW50IG1ldGFkYXRhRm9ybWF0VmVy\nc2lvbiA9IDA7CgogICAgcHJpdmF0ZSBpbnQgZW5zZW1ibGVTaXplOwogICAg\ncHJpdmF0ZSBpbnQgd3JpdGVRdW9ydW1TaXplOwogICAgcHJpdmF0ZSBpbnQg\nYWNrUXVvcnVtU2l6ZTsKICAgIHByaXZhdGUgbG9uZyBsZW5ndGg7CiAgICBw\ncml2YXRlIGxvbmcgbGFzdEVudHJ5SWQ7CgogICAgcHJpdmF0ZSBMZWRnZXJN\nZXRhZGF0YUZvcm1hdC5TdGF0ZSBzdGF0ZTsKICAgIHByaXZhdGUgU29ydGVk\nTWFwPExvbmcsIEFycmF5TGlzdDxJbmV0U29ja2V0QWRkcmVzcz4+IGVuc2Vt\nYmxlcyA9IG5ldyBUcmVlTWFwPExvbmcsIEFycmF5TGlzdDxJbmV0U29ja2V0\nQWRkcmVzcz4+KCk7CiAgICBBcnJheUxpc3Q8SW5ldFNvY2tldEFkZHJlc3M+\nIGN1cnJlbnRFbnNlbWJsZTsKICAgIHZvbGF0aWxlIFZlcnNpb24gdmVyc2lv\nbiA9IFZlcnNpb24uTkVXOwoKICAgIHByaXZhdGUgYm9vbGVhbiBoYXNQYXNz\nd29yZCA9IGZhbHNlOwogICAgcHJpdmF0ZSBMZWRnZXJNZXRhZGF0YUZvcm1h\ndC5EaWdlc3RUeXBlIGRpZ2VzdFR5cGU7CiAgICBwcml2YXRlIGJ5dGVbXSBw\nYXNzd29yZDsKCiAgICBwdWJsaWMgTGVkZ2VyTWV0YWRhdGEoaW50IGVuc2Vt\nYmxlU2l6ZSwgaW50IHdyaXRlUXVvcnVtU2l6ZSwgaW50IGFja1F1b3J1bVNp\nemUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgQm9va0tlZXBlci5EaWdl\nc3RUeXBlIGRpZ2VzdFR5cGUsIGJ5dGVbXSBwYXNzd29yZCkgewogICAgICAg\nIHRoaXMuZW5zZW1ibGVTaXplID0gZW5zZW1ibGVTaXplOwogICAgICAgIHRo\naXMud3JpdGVRdW9ydW1TaXplID0gd3JpdGVRdW9ydW1TaXplOwogICAgICAg\nIHRoaXMuYWNrUXVvcnVtU2l6ZSA9IGFja1F1b3J1bVNpemU7CgogICAgICAg\nIC8qCiAgICAgICAgICogSXQgaXMgc2V0IGluIFBlbmRpbmdSZWFkT3AucmVh\nZEVudHJ5Q29tcGxldGUsIGFuZAogICAgICAgICAqIHdlIHJlYWQgaXQgaW4g\nTGVkZ2VyUmVjb3ZlcnlPcC5yZWFkQ29tcGxldGUuCiAgICAgICAgICovCiAg\nICAgICAgdGhpcy5sZW5ndGggPSAwOwogICAgICAgIHRoaXMuc3RhdGUgPSBM\nZWRnZXJNZXRhZGF0YUZvcm1hdC5TdGF0ZS5PUEVOOwogICAgICAgIHRoaXMu\nbGFzdEVudHJ5SWQgPSBMZWRnZXJIYW5kbGUuSU5WQUxJRF9FTlRSWV9JRDsK\nICAgICAgICB0aGlzLm1ldGFkYXRhRm9ybWF0VmVyc2lvbiA9IENVUlJFTlRf\nTUVUQURBVEFfRk9STUFUX1ZFUlNJT047CgogICAgICAgIHRoaXMuZGlnZXN0\nVHlwZSA9IGRpZ2VzdFR5cGUuZXF1YWxzKEJvb2tLZWVwZXIuRGlnZXN0VHlw\nZS5NQUMpID8KICAgICAgICAgICAgTGVkZ2VyTWV0YWRhdGFGb3JtYXQuRGln\nZXN0VHlwZS5ITUFDIDogTGVkZ2VyTWV0YWRhdGFGb3JtYXQuRGlnZXN0VHlw\nZS5DUkMzMjsKICAgICAgICB0aGlzLnBhc3N3b3JkID0gQXJyYXlzLmNvcHlP\nZihwYXNzd29yZCwgcGFzc3dvcmQubGVuZ3RoKTsKICAgICAgICB0aGlzLmhh\nc1Bhc3N3b3JkID0gdHJ1ZTsKICAgIH0KCiAgICBwcml2YXRlIExlZGdlck1l\ndGFkYXRhKCkgewogICAgICAgIHRoaXMoMCwgMCwgMCwgQm9va0tlZXBlci5E\naWdlc3RUeXBlLk1BQywgbmV3IGJ5dGVbXSB7fSk7CiAgICAgICAgdGhpcy5o\nYXNQYXNzd29yZCA9IGZhbHNlOwogICAgfQoKICAgIC8qKgogICAgICogR2V0\nIHRoZSBNYXAgb2YgYm9va2llIGVuc2VtYmxlcyBmb3IgdGhlIHZhcmlvdXMg\nbGVkZ2VyIGZyYWdtZW50cwogICAgICogdGhhdCBtYWtlIHVwIHRoZSBsZWRn\nZXIuCiAgICAgKgogICAgICogQHJldHVybiBTb3J0ZWRNYXAgb2YgTGVkZ2Vy\nIEZyYWdtZW50cyBhbmQgdGhlIGNvcnJlc3BvbmRpbmcKICAgICAqIGJvb2tp\nZSBlbnNlbWJsZXMgdGhhdCBzdG9yZSB0aGUgZW50cmllcy4KICAgICAqLwog\nICAgcHVibGljIFNvcnRlZE1hcDxMb25nLCBBcnJheUxpc3Q8SW5ldFNvY2tl\ndEFkZHJlc3M+PiBnZXRFbnNlbWJsZXMoKSB7CiAgICAgICAgcmV0dXJuIGVu\nc2VtYmxlczsKICAgIH0KCiAgICBwdWJsaWMgaW50IGdldEVuc2VtYmxlU2l6\nZSgpIHsKICAgICAgICByZXR1cm4gZW5zZW1ibGVTaXplOwogICAgfQoKICAg\nIHB1YmxpYyBpbnQgZ2V0V3JpdGVRdW9ydW1TaXplKCkgewogICAgICAgIHJl\ndHVybiB3cml0ZVF1b3J1bVNpemU7CiAgICB9CgogICAgcHVibGljIGludCBn\nZXRBY2tRdW9ydW1TaXplKCkgewogICAgICAgIHJldHVybiBhY2tRdW9ydW1T\naXplOwogICAgfQoKICAgIC8qKgogICAgICogSW4gdmVyc2lvbnMgNC4xLjAg\nYW5kIGJlbG93LCB0aGUgZGlnZXN0IHR5cGUgYW5kIHBhc3N3b3JkIHdlcmUg\nbm90CiAgICAgKiBzdG9yZWQgaW4gdGhlIG1ldGFkYXRhLgogICAgICoKICAg\nICAqIEByZXR1cm4gd2hldGhlciB0aGUgcGFzc3dvcmQgaGFzIGJlZW4gc3Rv\ncmVkIGluIHRoZSBtZXRhZGF0YQogICAgICovCiAgICBib29sZWFuIGhhc1Bh\nc3N3b3JkKCkgewogICAgICAgIHJldHVybiBoYXNQYXNzd29yZDsKICAgIH0K\nCiAgICBieXRlW10gZ2V0UGFzc3dvcmQoKSB7CiAgICAgICAgcmV0dXJuIEFy\ncmF5cy5jb3B5T2YocGFzc3dvcmQsIHBhc3N3b3JkLmxlbmd0aCk7CiAgICB9\nCgogICAgQm9va0tlZXBlci5EaWdlc3RUeXBlIGdldERpZ2VzdFR5cGUoKSB7\nCiAgICAgICAgaWYgKGRpZ2VzdFR5cGUuZXF1YWxzKExlZGdlck1ldGFkYXRh\nRm9ybWF0LkRpZ2VzdFR5cGUuSE1BQykpIHsKICAgICAgICAgICAgcmV0dXJu\nIEJvb2tLZWVwZXIuRGlnZXN0VHlwZS5NQUM7CiAgICAgICAgfSBlbHNlIHsK\nICAgICAgICAgICAgcmV0dXJuIEJvb2tLZWVwZXIuRGlnZXN0VHlwZS5DUkMz\nMjsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIGxvbmcgZ2V0TGFzdEVu\ndHJ5SWQoKSB7CiAgICAgICAgcmV0dXJuIGxhc3RFbnRyeUlkOwogICAgfQoK\nICAgIHB1YmxpYyBsb25nIGdldExlbmd0aCgpIHsKICAgICAgICByZXR1cm4g\nbGVuZ3RoOwogICAgfQoKICAgIHZvaWQgc2V0TGVuZ3RoKGxvbmcgbGVuZ3Ro\nKSB7CiAgICAgICAgdGhpcy5sZW5ndGggPSBsZW5ndGg7CiAgICB9CgogICAg\ncHVibGljIGJvb2xlYW4gaXNDbG9zZWQoKSB7CiAgICAgICAgcmV0dXJuIHN0\nYXRlID09IExlZGdlck1ldGFkYXRhRm9ybWF0LlN0YXRlLkNMT1NFRDsKICAg\nIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBpc0luUmVjb3ZlcnkoKSB7CiAgICAg\nICAgcmV0dXJuIHN0YXRlID09IExlZGdlck1ldGFkYXRhRm9ybWF0LlN0YXRl\nLklOX1JFQ09WRVJZOwogICAgfQoKICAgIExlZGdlck1ldGFkYXRhRm9ybWF0\nLlN0YXRlIGdldFN0YXRlKCkgewogICAgICAgIHJldHVybiBzdGF0ZTsKICAg\nIH0KCiAgICB2b2lkIHNldFN0YXRlKExlZGdlck1ldGFkYXRhRm9ybWF0LlN0\nYXRlIHN0YXRlKSB7CiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlOwogICAg\nfQoKICAgIHZvaWQgbWFya0xlZGdlckluUmVjb3ZlcnkoKSB7CiAgICAgICAg\nc3RhdGUgPSBMZWRnZXJNZXRhZGF0YUZvcm1hdC5TdGF0ZS5JTl9SRUNPVkVS\nWTsKICAgIH0KCiAgICB2b2lkIGNsb3NlKGxvbmcgZW50cnlJZCkgewogICAg\nICAgIGxhc3RFbnRyeUlkID0gZW50cnlJZDsKICAgICAgICBzdGF0ZSA9IExl\nZGdlck1ldGFkYXRhRm9ybWF0LlN0YXRlLkNMT1NFRDsKICAgIH0KCiAgICB2\nb2lkIGFkZEVuc2VtYmxlKGxvbmcgc3RhcnRFbnRyeUlkLCBBcnJheUxpc3Q8\nSW5ldFNvY2tldEFkZHJlc3M+IGVuc2VtYmxlKSB7CiAgICAgICAgYXNzZXJ0\nIGVuc2VtYmxlcy5pc0VtcHR5KCkgfHwgc3RhcnRFbnRyeUlkID49IGVuc2Vt\nYmxlcy5sYXN0S2V5KCk7CgogICAgICAgIGVuc2VtYmxlcy5wdXQoc3RhcnRF\nbnRyeUlkLCBlbnNlbWJsZSk7CiAgICAgICAgY3VycmVudEVuc2VtYmxlID0g\nZW5zZW1ibGU7CiAgICB9CgogICAgQXJyYXlMaXN0PEluZXRTb2NrZXRBZGRy\nZXNzPiBnZXRFbnNlbWJsZShsb25nIGVudHJ5SWQpIHsKICAgICAgICAvLyB0\naGUgaGVhZCBtYXAgY2Fubm90IGJlIGVtcHR5LCBzaW5jZSB3ZSBpbnNlcnQg\nYW4gZW5zZW1ibGUgZm9yCiAgICAgICAgLy8gZW50cnktaWQgMCwgcmlnaHQg\nd2hlbiB3ZSBzdGFydAogICAgICAgIHJldHVybiBlbnNlbWJsZXMuZ2V0KGVu\nc2VtYmxlcy5oZWFkTWFwKGVudHJ5SWQgKyAxKS5sYXN0S2V5KCkpOwogICAg\nfQoKICAgIC8qKgogICAgICogdGhlIGVudHJ5IGlkID4gdGhlIGdpdmVuIGVu\ndHJ5LWlkIGF0IHdoaWNoIHRoZSBuZXh0IGVuc2VtYmxlIGNoYW5nZSB0YWtl\ncwogICAgICogcGxhY2UgKCAtMSBpZiBubyBmdXJ0aGVyIGVuc2VtYmxlIGNo\nYW5nZXMpCiAgICAgKgogICAgICogQHBhcmFtIGVudHJ5SWQKICAgICAqIEBy\nZXR1cm4KICAgICAqLwogICAgbG9uZyBnZXROZXh0RW5zZW1ibGVDaGFuZ2Uo\nbG9uZyBlbnRyeUlkKSB7CiAgICAgICAgU29ydGVkTWFwPExvbmcsIEFycmF5\nTGlzdDxJbmV0U29ja2V0QWRkcmVzcz4+IHRhaWxNYXAgPSBlbnNlbWJsZXMu\ndGFpbE1hcChlbnRyeUlkICsgMSk7CgogICAgICAgIGlmICh0YWlsTWFwLmlz\nRW1wdHkoKSkgewogICAgICAgICAgICByZXR1cm4gLTE7CiAgICAgICAgfSBl\nbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHRhaWxNYXAuZmlyc3RLZXkoKTsK\nICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBHZW5lcmF0ZXMgYSBi\neXRlIGFycmF5IG9mIHRoaXMgb2JqZWN0CiAgICAgKgogICAgICogQHJldHVy\nbiB0aGUgbWV0YWRhdGEgc2VyaWFsaXplZCBpbnRvIGEgYnl0ZSBhcnJheQog\nICAgICovCiAgICBwdWJsaWMgYnl0ZVtdIHNlcmlhbGl6ZSgpIHsKICAgICAg\nICBpZiAobWV0YWRhdGFGb3JtYXRWZXJzaW9uID09IDEpIHsKICAgICAgICAg\nICAgcmV0dXJuIHNlcmlhbGl6ZVZlcnNpb24xKCk7CiAgICAgICAgfQogICAg\nICAgIExlZGdlck1ldGFkYXRhRm9ybWF0LkJ1aWxkZXIgYnVpbGRlciA9IExl\nZGdlck1ldGFkYXRhRm9ybWF0Lm5ld0J1aWxkZXIoKTsKICAgICAgICBidWls\nZGVyLnNldFF1b3J1bVNpemUod3JpdGVRdW9ydW1TaXplKS5zZXRBY2tRdW9y\ndW1TaXplKGFja1F1b3J1bVNpemUpCiAgICAgICAgICAgIC5zZXRFbnNlbWJs\nZVNpemUoZW5zZW1ibGVTaXplKS5zZXRMZW5ndGgobGVuZ3RoKQogICAgICAg\nICAgICAuc2V0U3RhdGUoc3RhdGUpLnNldExhc3RFbnRyeUlkKGxhc3RFbnRy\neUlkKTsKCiAgICAgICAgaWYgKGhhc1Bhc3N3b3JkKSB7CiAgICAgICAgICAg\nIGJ1aWxkZXIuc2V0RGlnZXN0VHlwZShkaWdlc3RUeXBlKS5zZXRQYXNzd29y\nZChCeXRlU3RyaW5nLmNvcHlGcm9tKHBhc3N3b3JkKSk7CiAgICAgICAgfQoK\nICAgICAgICBmb3IgKE1hcC5FbnRyeTxMb25nLCBBcnJheUxpc3Q8SW5ldFNv\nY2tldEFkZHJlc3M+PiBlbnRyeSA6IGVuc2VtYmxlcy5lbnRyeVNldCgpKSB7\nCiAgICAgICAgICAgIExlZGdlck1ldGFkYXRhRm9ybWF0LlNlZ21lbnQuQnVp\nbGRlciBzZWdtZW50QnVpbGRlciA9IExlZGdlck1ldGFkYXRhRm9ybWF0LlNl\nZ21lbnQubmV3QnVpbGRlcigpOwogICAgICAgICAgICBzZWdtZW50QnVpbGRl\nci5zZXRGaXJzdEVudHJ5SWQoZW50cnkuZ2V0S2V5KCkpOwogICAgICAgICAg\nICBmb3IgKEluZXRTb2NrZXRBZGRyZXNzIGFkZHIgOiBlbnRyeS5nZXRWYWx1\nZSgpKSB7CiAgICAgICAgICAgICAgICBzZWdtZW50QnVpbGRlci5hZGRFbnNl\nbWJsZU1lbWJlcihhZGRyLmdldEFkZHJlc3MoKS5nZXRIb3N0QWRkcmVzcygp\nICsgIjoiICsgYWRkci5nZXRQb3J0KCkpOwogICAgICAgICAgICB9CiAgICAg\nICAgICAgIGJ1aWxkZXIuYWRkU2VnbWVudChzZWdtZW50QnVpbGRlci5idWls\nZCgpKTsKICAgICAgICB9CgogICAgICAgIFN0cmluZ0J1aWxkZXIgcyA9IG5l\ndyBTdHJpbmdCdWlsZGVyKCk7CiAgICAgICAgcy5hcHBlbmQoVkVSU0lPTl9L\nRVkpLmFwcGVuZCh0U3BsaXR0ZXIpLmFwcGVuZChDVVJSRU5UX01FVEFEQVRB\nX0ZPUk1BVF9WRVJTSU9OKS5hcHBlbmQobFNwbGl0dGVyKTsKICAgICAgICBz\nLmFwcGVuZChUZXh0Rm9ybWF0LnByaW50VG9TdHJpbmcoYnVpbGRlci5idWls\nZCgpKSk7CiAgICAgICAgTE9HLmRlYnVnKCJTZXJpYWxpemVkIGNvbmZpZzog\ne30iLCBzKTsKICAgICAgICByZXR1cm4gcy50b1N0cmluZygpLmdldEJ5dGVz\nKCk7CiAgICB9CgogICAgcHJpdmF0ZSBieXRlW10gc2VyaWFsaXplVmVyc2lv\nbjEoKSB7CiAgICAgICAgU3RyaW5nQnVpbGRlciBzID0gbmV3IFN0cmluZ0J1\naWxkZXIoKTsKICAgICAgICBzLmFwcGVuZChWRVJTSU9OX0tFWSkuYXBwZW5k\nKHRTcGxpdHRlcikuYXBwZW5kKG1ldGFkYXRhRm9ybWF0VmVyc2lvbikuYXBw\nZW5kKGxTcGxpdHRlcik7CiAgICAgICAgcy5hcHBlbmQod3JpdGVRdW9ydW1T\naXplKS5hcHBlbmQobFNwbGl0dGVyKS5hcHBlbmQoZW5zZW1ibGVTaXplKS5h\ncHBlbmQobFNwbGl0dGVyKS5hcHBlbmQobGVuZ3RoKTsKCiAgICAgICAgZm9y\nIChNYXAuRW50cnk8TG9uZywgQXJyYXlMaXN0PEluZXRTb2NrZXRBZGRyZXNz\nPj4gZW50cnkgOiBlbnNlbWJsZXMuZW50cnlTZXQoKSkgewogICAgICAgICAg\nICBzLmFwcGVuZChsU3BsaXR0ZXIpLmFwcGVuZChlbnRyeS5nZXRLZXkoKSk7\nCiAgICAgICAgICAgIGZvciAoSW5ldFNvY2tldEFkZHJlc3MgYWRkciA6IGVu\ndHJ5LmdldFZhbHVlKCkpIHsKICAgICAgICAgICAgICAgIHMuYXBwZW5kKHRT\ncGxpdHRlcik7CiAgICAgICAgICAgICAgICBzLmFwcGVuZChTdHJpbmdVdGls\ncy5hZGRyVG9TdHJpbmcoYWRkcikpOwogICAgICAgICAgICB9CiAgICAgICAg\nfQoKICAgICAgICBpZiAoc3RhdGUgPT0gTGVkZ2VyTWV0YWRhdGFGb3JtYXQu\nU3RhdGUuSU5fUkVDT1ZFUlkpIHsKICAgICAgICAgICAgcy5hcHBlbmQobFNw\nbGl0dGVyKS5hcHBlbmQoSU5fUkVDT1ZFUlkpLmFwcGVuZCh0U3BsaXR0ZXIp\nLmFwcGVuZChjbG9zZWQpOwogICAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT0g\nTGVkZ2VyTWV0YWRhdGFGb3JtYXQuU3RhdGUuQ0xPU0VEKSB7CiAgICAgICAg\nICAgIHMuYXBwZW5kKGxTcGxpdHRlcikuYXBwZW5kKGdldExhc3RFbnRyeUlk\nKCkpLmFwcGVuZCh0U3BsaXR0ZXIpLmFwcGVuZChjbG9zZWQpOwogICAgICAg\nIH0KCiAgICAgICAgTE9HLmRlYnVnKCJTZXJpYWxpemVkIGNvbmZpZzoge30i\nLCBzKTsKCiAgICAgICAgcmV0dXJuIHMudG9TdHJpbmcoKS5nZXRCeXRlcygp\nOwogICAgfQoKICAgIC8qKgogICAgICogUGFyc2VzIGEgZ2l2ZW4gYnl0ZSBh\ncnJheSBhbmQgdHJhbnNmb3JtcyBpbnRvIGEgTGVkZ2VyQ29uZmlnIG9iamVj\ndAogICAgICoKICAgICAqIEBwYXJhbSBieXRlcwogICAgICogICAgICAgICAg\nICBieXRlIGFycmF5IHRvIHBhcnNlCiAgICAgKiBAcGFyYW0gdmVyc2lvbgog\nICAgICogICAgICAgICAgICB2ZXJzaW9uIG9mIHRoZSBsZWRnZXIgbWV0YWRh\ndGEKICAgICAqIEByZXR1cm4gTGVkZ2VyQ29uZmlnCiAgICAgKiBAdGhyb3dz\nIElPRXhjZXB0aW9uCiAgICAgKiAgICAgICAgICAgICBpZiB0aGUgZ2l2ZW4g\nYnl0ZVtdIGNhbm5vdCBiZSBwYXJzZWQKICAgICAqLwogICAgcHVibGljIHN0\nYXRpYyBMZWRnZXJNZXRhZGF0YSBwYXJzZUNvbmZpZyhieXRlW10gYnl0ZXMs\nIFZlcnNpb24gdmVyc2lvbikgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAg\nICBMZWRnZXJNZXRhZGF0YSBsYyA9IG5ldyBMZWRnZXJNZXRhZGF0YSgpOwog\nICAgICAgIGxjLnZlcnNpb24gPSB2ZXJzaW9uOwoKICAgICAgICBTdHJpbmcg\nY29uZmlnID0gbmV3IFN0cmluZyhieXRlcyk7CgogICAgICAgIExPRy5kZWJ1\nZygiUGFyc2luZyBDb25maWc6IHt9IiwgY29uZmlnKTsKICAgICAgICBCdWZm\nZXJlZFJlYWRlciByZWFkZXIgPSBuZXcgQnVmZmVyZWRSZWFkZXIobmV3IFN0\ncmluZ1JlYWRlcihjb25maWcpKTsKICAgICAgICBTdHJpbmcgdmVyc2lvbkxp\nbmUgPSByZWFkZXIucmVhZExpbmUoKTsKICAgICAgICBpZiAodmVyc2lvbkxp\nbmUgPT0gbnVsbCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSU9FeGNlcHRp\nb24oIkludmFsaWQgbWV0YWRhdGEuIENvbnRlbnQgbWlzc2luZyIpOwogICAg\nICAgIH0KICAgICAgICBpbnQgaSA9IDA7CiAgICAgICAgaWYgKHZlcnNpb25M\naW5lLnN0YXJ0c1dpdGgoVkVSU0lPTl9LRVkpKSB7CiAgICAgICAgICAgIFN0\ncmluZyBwYXJ0c1tdID0gdmVyc2lvbkxpbmUuc3BsaXQodFNwbGl0dGVyKTsK\nICAgICAgICAgICAgbGMubWV0YWRhdGFGb3JtYXRWZXJzaW9uID0gbmV3IElu\ndGVnZXIocGFydHNbMV0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAg\nIC8vIGlmIG5vIHZlcnNpb24gaXMgc2V0LCB0YWtlIGl0IHRvIGJlIHZlcnNp\nb24gMQogICAgICAgICAgICAvLyBhcyB0aGUgcGFyc2luZyBpcyB0aGUgc2Ft\nZSBhcyB3aGF0IHdlIGhhZCBiZWZvcmUKICAgICAgICAgICAgLy8gd2UgaW50\ncm9kdWNlIHZlcnNpb25zCiAgICAgICAgICAgIGxjLm1ldGFkYXRhRm9ybWF0\nVmVyc2lvbiA9IDE7CiAgICAgICAgICAgIC8vIHJlc2V0IHRoZSByZWFkZXIK\nICAgICAgICAgICAgcmVhZGVyLmNsb3NlKCk7CiAgICAgICAgICAgIHJlYWRl\nciA9IG5ldyBCdWZmZXJlZFJlYWRlcihuZXcgU3RyaW5nUmVhZGVyKGNvbmZp\nZykpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGxjLm1ldGFkYXRhRm9ybWF0\nVmVyc2lvbiA8IExPV0VTVF9DT01QQVRfTUVUQURBVEFfRk9STUFUX1ZFUlNJ\nT04KICAgICAgICAgICAgfHwgbGMubWV0YWRhdGFGb3JtYXRWZXJzaW9uID4g\nQ1VSUkVOVF9NRVRBREFUQV9GT1JNQVRfVkVSU0lPTikgewogICAgICAgICAg\nICB0aHJvdyBuZXcgSU9FeGNlcHRpb24oIk1ldGFkYXRhIHZlcnNpb24gbm90\nIGNvbXBhdGlibGUuIEV4cGVjdGVkIGJldHdlZW4gIgogICAgICAgICAgICAg\nICAgICAgICsgTE9XRVNUX0NPTVBBVF9NRVRBREFUQV9GT1JNQVRfVkVSU0lP\nTiArICIgYW5kICIgKyBDVVJSRU5UX01FVEFEQVRBX0ZPUk1BVF9WRVJTSU9O\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArICIsIGJ1dCBn\nb3QgIiArIGxjLm1ldGFkYXRhRm9ybWF0VmVyc2lvbik7CiAgICAgICAgfQoK\nICAgICAgICBpZiAobGMubWV0YWRhdGFGb3JtYXRWZXJzaW9uID09IDEpIHsK\nICAgICAgICAgICAgcmV0dXJuIHBhcnNlVmVyc2lvbjFDb25maWcobGMsIHJl\nYWRlcik7CiAgICAgICAgfQoKICAgICAgICBMZWRnZXJNZXRhZGF0YUZvcm1h\ndC5CdWlsZGVyIGJ1aWxkZXIgPSBMZWRnZXJNZXRhZGF0YUZvcm1hdC5uZXdC\ndWlsZGVyKCk7CiAgICAgICAgVGV4dEZvcm1hdC5tZXJnZShyZWFkZXIsIGJ1\naWxkZXIpOwogICAgICAgIExlZGdlck1ldGFkYXRhRm9ybWF0IGRhdGEgPSBi\ndWlsZGVyLmJ1aWxkKCk7CiAgICAgICAgbGMud3JpdGVRdW9ydW1TaXplID0g\nZGF0YS5nZXRRdW9ydW1TaXplKCk7CiAgICAgICAgaWYgKGRhdGEuaGFzQWNr\nUXVvcnVtU2l6ZSgpKSB7CiAgICAgICAgICAgIGxjLmFja1F1b3J1bVNpemUg\nPSBkYXRhLmdldEFja1F1b3J1bVNpemUoKTsKICAgICAgICB9IGVsc2Ugewog\nICAgICAgICAgICBsYy5hY2tRdW9ydW1TaXplID0gbGMud3JpdGVRdW9ydW1T\naXplOwogICAgICAgIH0KCiAgICAgICAgbGMuZW5zZW1ibGVTaXplID0gZGF0\nYS5nZXRFbnNlbWJsZVNpemUoKTsKICAgICAgICBsYy5sZW5ndGggPSBkYXRh\nLmdldExlbmd0aCgpOwogICAgICAgIGxjLnN0YXRlID0gZGF0YS5nZXRTdGF0\nZSgpOwogICAgICAgIGxjLmxhc3RFbnRyeUlkID0gZGF0YS5nZXRMYXN0RW50\ncnlJZCgpOwoKICAgICAgICBpZiAoZGF0YS5oYXNQYXNzd29yZCgpKSB7CiAg\nICAgICAgICAgIGxjLmRpZ2VzdFR5cGUgPSBkYXRhLmdldERpZ2VzdFR5cGUo\nKTsKICAgICAgICAgICAgbGMucGFzc3dvcmQgPSBkYXRhLmdldFBhc3N3b3Jk\nKCkudG9CeXRlQXJyYXkoKTsKICAgICAgICAgICAgbGMuaGFzUGFzc3dvcmQg\nPSB0cnVlOwogICAgICAgIH0KCiAgICAgICAgZm9yIChMZWRnZXJNZXRhZGF0\nYUZvcm1hdC5TZWdtZW50IHMgOiBkYXRhLmdldFNlZ21lbnRMaXN0KCkpIHsK\nICAgICAgICAgICAgQXJyYXlMaXN0PEluZXRTb2NrZXRBZGRyZXNzPiBhZGRy\ncyA9IG5ldyBBcnJheUxpc3Q8SW5ldFNvY2tldEFkZHJlc3M+KCk7CiAgICAg\nICAgICAgIGZvciAoU3RyaW5nIG1lbWJlciA6IHMuZ2V0RW5zZW1ibGVNZW1i\nZXJMaXN0KCkpIHsKICAgICAgICAgICAgICAgIGFkZHJzLmFkZChTdHJpbmdV\ndGlscy5wYXJzZUFkZHIobWVtYmVyKSk7CiAgICAgICAgICAgIH0KICAgICAg\nICAgICAgbGMuYWRkRW5zZW1ibGUocy5nZXRGaXJzdEVudHJ5SWQoKSwgYWRk\ncnMpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbGM7CiAgICB9CgogICAg\nc3RhdGljIExlZGdlck1ldGFkYXRhIHBhcnNlVmVyc2lvbjFDb25maWcoTGVk\nZ2VyTWV0YWRhdGEgbGMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICBCdWZmZXJlZFJlYWRlciByZWFkZXIpIHRocm93\ncyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGMu\nd3JpdGVRdW9ydW1TaXplID0gbGMuYWNrUXVvcnVtU2l6ZSA9IG5ldyBJbnRl\nZ2VyKHJlYWRlci5yZWFkTGluZSgpKTsKICAgICAgICAgICAgbGMuZW5zZW1i\nbGVTaXplID0gbmV3IEludGVnZXIocmVhZGVyLnJlYWRMaW5lKCkpOwogICAg\nICAgICAgICBsYy5sZW5ndGggPSBuZXcgTG9uZyhyZWFkZXIucmVhZExpbmUo\nKSk7CgogICAgICAgICAgICBTdHJpbmcgbGluZSA9IHJlYWRlci5yZWFkTGlu\nZSgpOwogICAgICAgICAgICB3aGlsZSAobGluZSAhPSBudWxsKSB7CiAgICAg\nICAgICAgICAgICBTdHJpbmcgcGFydHNbXSA9IGxpbmUuc3BsaXQodFNwbGl0\ndGVyKTsKCiAgICAgICAgICAgICAgICBpZiAocGFydHNbMV0uZXF1YWxzKGNs\nb3NlZCkpIHsKICAgICAgICAgICAgICAgICAgICBMb25nIGwgPSBuZXcgTG9u\nZyhwYXJ0c1swXSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGwgPT0gSU5f\nUkVDT1ZFUlkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGMuc3RhdGUg\nPSBMZWRnZXJNZXRhZGF0YUZvcm1hdC5TdGF0ZS5JTl9SRUNPVkVSWTsKICAg\nICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAg\nICAgICBsYy5zdGF0ZSA9IExlZGdlck1ldGFkYXRhRm9ybWF0LlN0YXRlLkNM\nT1NFRDsKICAgICAgICAgICAgICAgICAgICAgICAgbGMubGFzdEVudHJ5SWQg\nPSBsOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAg\nICBicmVhazsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAg\nICAgICAgICAgbGMuc3RhdGUgPSBMZWRnZXJNZXRhZGF0YUZvcm1hdC5TdGF0\nZS5PUEVOOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIEFy\ncmF5TGlzdDxJbmV0U29ja2V0QWRkcmVzcz4gYWRkcnMgPSBuZXcgQXJyYXlM\naXN0PEluZXRTb2NrZXRBZGRyZXNzPigpOwogICAgICAgICAgICAgICAgZm9y\nIChpbnQgaiA9IDE7IGogPCBwYXJ0cy5sZW5ndGg7IGorKykgewogICAgICAg\nICAgICAgICAgICAgIGFkZHJzLmFkZChTdHJpbmdVdGlscy5wYXJzZUFkZHIo\ncGFydHNbal0pKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAg\nIGxjLmFkZEVuc2VtYmxlKG5ldyBMb25nKHBhcnRzWzBdKSwgYWRkcnMpOwog\nICAgICAgICAgICAgICAgbGluZSA9IHJlYWRlci5yZWFkTGluZSgpOwogICAg\nICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoTnVtYmVyRm9ybWF0RXhjZXB0\naW9uIGUpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKGUp\nOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbGM7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBVcGRhdGVzIHRoZSB2ZXJzaW9uIG9mIHRoaXMgbWV0YWRhdGEu\nCiAgICAgKiAKICAgICAqIEBwYXJhbSB2IFZlcnNpb24KICAgICAqLwogICAg\ncHVibGljIHZvaWQgc2V0VmVyc2lvbihWZXJzaW9uIHYpIHsKICAgICAgICB0\naGlzLnZlcnNpb24gPSB2OwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJu\ncyB0aGUgbGFzdCB2ZXJzaW9uLgogICAgICogCiAgICAgKiBAcmV0dXJuIHZl\ncnNpb24KICAgICAqLwogICAgcHVibGljIFZlcnNpb24gZ2V0VmVyc2lvbigp\nIHsKICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uOwogICAgfQoKICAgIC8q\nKgogICAgICogUmVzb2x2ZSBjb25mbGljdCB3aXRoIG5ldyB1cGRhdGVkIG1l\ndGFkYXRhLgogICAgICoKICAgICAqIEBwYXJhbSBuZXdNZXRhCiAgICAgKiAg\nICAgICAgICBSZS1yZWFkIG1ldGFkYXRhCiAgICAgKiBAcmV0dXJuIHRydWUg\naWYgdGhlIGNvbmZsaWN0IGhhcyBiZWVuIHJlc29sdmVkLCBvdGhlcndpc2Ug\nZmFsc2UuCiAgICAgKi8KICAgIGJvb2xlYW4gcmVzb2x2ZUNvbmZsaWN0KExl\nZGdlck1ldGFkYXRhIG5ld01ldGEpIHsKICAgICAgICAvKgogICAgICAgICAq\nICBpZiBsZW5ndGggJiBjbG9zZSBoYXZlIGNoYW5nZWQsIHRoZW4gYW5vdGhl\nciBjbGllbnQgaGFzCiAgICAgICAgICogIG9wZW5lZCB0aGUgbGVkZ2VyLCBj\nYW4ndCByZXNvbHZlIHRoaXMgY29uZmxpY3QuCiAgICAgICAgICovCgogICAg\nICAgIGlmIChtZXRhZGF0YUZvcm1hdFZlcnNpb24gIT0gbmV3TWV0YS5tZXRh\nZGF0YUZvcm1hdFZlcnNpb24gfHwKICAgICAgICAgICAgZW5zZW1ibGVTaXpl\nICE9IG5ld01ldGEuZW5zZW1ibGVTaXplIHx8CiAgICAgICAgICAgIHdyaXRl\nUXVvcnVtU2l6ZSAhPSBuZXdNZXRhLndyaXRlUXVvcnVtU2l6ZSB8fAogICAg\nICAgICAgICBhY2tRdW9ydW1TaXplICE9IG5ld01ldGEuYWNrUXVvcnVtU2l6\nZSB8fAogICAgICAgICAgICBsZW5ndGggIT0gbmV3TWV0YS5sZW5ndGggfHwK\nICAgICAgICAgICAgc3RhdGUgIT0gbmV3TWV0YS5zdGF0ZSB8fAogICAgICAg\nICAgICAhZGlnZXN0VHlwZS5lcXVhbHMobmV3TWV0YS5kaWdlc3RUeXBlKSB8\nfAogICAgICAgICAgICAhQXJyYXlzLmVxdWFscyhwYXNzd29yZCwgbmV3TWV0\nYS5wYXNzd29yZCkpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAg\nICAgIH0KICAgICAgICBpZiAoc3RhdGUgPT0gTGVkZ2VyTWV0YWRhdGFGb3Jt\nYXQuU3RhdGUuQ0xPU0VECiAgICAgICAgICAgICYmIGxhc3RFbnRyeUlkICE9\nIG5ld01ldGEubGFzdEVudHJ5SWQpIHsKICAgICAgICAgICAgcmV0dXJuIGZh\nbHNlOwogICAgICAgIH0KICAgICAgICAvLyBuZXcgbWV0YSB6bm9kZSB2ZXJz\naW9uIHNob3VsZCBiZSBsYXJnZXIgdGhhbiBvbGQgb25lCiAgICAgICAgaWYg\nKG51bGwgIT0gdmVyc2lvbiAmJgogICAgICAgICAgICBWZXJzaW9uLk9jY3Vy\ncmVkLkFGVEVSID09IHZlcnNpb24uY29tcGFyZShuZXdNZXRhLnZlcnNpb24p\nKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAg\nICAgLy8gaWYgbGVkZ2VyIGlzIGNsb3NlZCwgd2UgY2FuIGp1c3QgdGFrZSB0\naGUgbmV3IGVuc2VtYmxlcwogICAgICAgIGlmIChuZXdNZXRhLnN0YXRlICE9\nIExlZGdlck1ldGFkYXRhRm9ybWF0LlN0YXRlLkNMT1NFRCkgewogICAgICAg\nICAgICAvLyBlbnNlbWJsZSBzaXplIHNob3VsZCBiZSBzYW1lCiAgICAgICAg\nICAgIGlmIChlbnNlbWJsZXMuc2l6ZSgpICE9IG5ld01ldGEuZW5zZW1ibGVz\nLnNpemUoKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAg\nICAgICAgICB9CiAgICAgICAgICAgIC8vIGVuc2VtYmxlIGRpc3RyaWJ1dGlv\nbiBzaG91bGQgYmUgc2FtZQogICAgICAgICAgICAvLyB3ZSBkb24ndCBjaGVj\nayB0aGUgZGV0YWlsIGVuc2VtYmxlLCBzaW5jZSBuZXcgYm9va2llIHdpbGwg\nYmUgc2V0CiAgICAgICAgICAgIC8vIHVzaW5nIHJlY292ZXJ5IHRvb2wuCiAg\nICAgICAgICAgIEl0ZXJhdG9yPExvbmc+IGtleUl0ZXIgPSBlbnNlbWJsZXMu\na2V5U2V0KCkuaXRlcmF0b3IoKTsKICAgICAgICAgICAgSXRlcmF0b3I8TG9u\nZz4gbmV3TWV0YUtleUl0ZXIgPSBuZXdNZXRhLmVuc2VtYmxlcy5rZXlTZXQo\nKS5pdGVyYXRvcigpOwogICAgICAgICAgICBmb3IgKGludCBpPTA7IGk8ZW5z\nZW1ibGVzLnNpemUoKTsgaSsrKSB7CiAgICAgICAgICAgICAgICBMb25nIGN1\ncktleSA9IGtleUl0ZXIubmV4dCgpOwogICAgICAgICAgICAgICAgTG9uZyBu\nZXdNZXRhS2V5ID0gbmV3TWV0YUtleUl0ZXIubmV4dCgpOwogICAgICAgICAg\nICAgICAgaWYgKCFjdXJLZXkuZXF1YWxzKG5ld01ldGFLZXkpKSB7CiAgICAg\nICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAg\nfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8qCiAgICAgICAg\nICogIGlmIHRoZSBjb25mbGljdCBoYXMgYmVlbiByZXNvbHZlZCwgdGhlbiB1\ncGRhdGUKICAgICAgICAgKiAgZW5zZW1ibGUgYW5kIHpub2RlIHZlcnNpb24K\nICAgICAgICAgKi8KICAgICAgICBlbnNlbWJsZXMgPSBuZXdNZXRhLmVuc2Vt\nYmxlczsKICAgICAgICB2ZXJzaW9uID0gbmV3TWV0YS52ZXJzaW9uOwogICAg\nICAgIHJldHVybiB0cnVlOwogICAgfQp9Cg==\n","encoding":"base64"}

