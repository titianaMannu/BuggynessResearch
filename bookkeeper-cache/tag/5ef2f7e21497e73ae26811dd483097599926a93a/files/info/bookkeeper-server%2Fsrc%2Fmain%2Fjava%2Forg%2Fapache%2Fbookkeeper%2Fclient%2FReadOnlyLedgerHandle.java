{"sha":"f6c1ea996769e2e068bea2d067dda1cc3d81d7d2","node_id":"MDQ6QmxvYjE1NzU5NTY6ZjZjMWVhOTk2NzY5ZTJlMDY4YmVhMmQwNjdkZGExY2MzZDgxZDdkMg==","size":4202,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/f6c1ea996769e2e068bea2d067dda1cc3d81d7d2","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY2xpZW50OwoKLyoKICoK\nICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9u\nIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vu\nc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlzdHJp\nYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRp\nb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNG\nIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNo\nZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7IHlv\ndSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2UK\nICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBv\nZiB0aGUgTGljZW5zZSBhdAogKgogKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9y\nZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQg\nYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsCiAq\nIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRp\nc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhPVVQgV0FS\nUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBlaXRoZXIg\nZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUK\nICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFu\nZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICoKICovCgpp\nbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNsaWVudC5Bc3luY0NhbGxi\nYWNrLkFkZENhbGxiYWNrOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVy\nLmNsaWVudC5Bc3luY0NhbGxiYWNrLkNsb3NlQ2FsbGJhY2s7CmltcG9ydCBv\ncmcuYXBhY2hlLmJvb2trZWVwZXIuY2xpZW50LkJvb2tLZWVwZXIuRGlnZXN0\nVHlwZTsKaW1wb3J0IGphdmEuc2VjdXJpdHkuR2VuZXJhbFNlY3VyaXR5RXhj\nZXB0aW9uOwppbXBvcnQgamF2YS5uZXQuSW5ldFNvY2tldEFkZHJlc3M7Cgov\nKioKICogUmVhZCBvbmx5IGxlZGdlciBoYW5kbGUuIFRoaXMgbGVkZ2VyIGhh\nbmRsZSBhbGxvd3MgeW91IHRvIAogKiByZWFkIGZyb20gYSBsZWRnZXIgYnV0\nIG5vdCB0byB3cml0ZSB0byBpdC4gSXQgb3ZlcnJpZGVzIGFsbCAKICogdGhl\nIHB1YmxpYyB3cml0ZSBvcGVyYXRpb25zIGZyb20gTGVkZ2VySGFuZGxlLgog\nKiBJdCBzaG91bGQgYmUgcmV0dXJuZWQgZm9yIEJvb2tLZWVwZXIjb3Blbkxl\nZGdlciBvcGVyYXRpb25zLgogKi8KY2xhc3MgUmVhZE9ubHlMZWRnZXJIYW5k\nbGUgZXh0ZW5kcyBMZWRnZXJIYW5kbGUgewogICAgUmVhZE9ubHlMZWRnZXJI\nYW5kbGUoQm9va0tlZXBlciBiaywgbG9uZyBsZWRnZXJJZCwgTGVkZ2VyTWV0\nYWRhdGEgbWV0YWRhdGEsCiAgICAgICAgICAgICAgICAgICAgICAgICBEaWdl\nc3RUeXBlIGRpZ2VzdFR5cGUsIGJ5dGVbXSBwYXNzd29yZCkKICAgICAgICAg\nICAgdGhyb3dzIEdlbmVyYWxTZWN1cml0eUV4Y2VwdGlvbiwgTnVtYmVyRm9y\nbWF0RXhjZXB0aW9uIHsKICAgICAgICBzdXBlcihiaywgbGVkZ2VySWQsIG1l\ndGFkYXRhLCBkaWdlc3RUeXBlLCBwYXNzd29yZCk7CiAgICB9CgogICAgQE92\nZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBjbG9zZSgpIAogICAgICAgICAgICB0\naHJvd3MgSW50ZXJydXB0ZWRFeGNlcHRpb24sIEJLRXhjZXB0aW9uIHsKICAg\nICAgICAvLyBub29wCiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMg\ndm9pZCBhc3luY0Nsb3NlKENsb3NlQ2FsbGJhY2sgY2IsIE9iamVjdCBjdHgp\nIHsKICAgICAgICBjYi5jbG9zZUNvbXBsZXRlKEJLRXhjZXB0aW9uLkNvZGUu\nT0ssIHRoaXMsIGN0eCk7CiAgICB9CiAgICAKICAgIEBPdmVycmlkZQogICAg\ncHVibGljIGxvbmcgYWRkRW50cnkoYnl0ZVtdIGRhdGEpIHRocm93cyBJbnRl\ncnJ1cHRlZEV4Y2VwdGlvbiwgQktFeGNlcHRpb24gewogICAgICAgIHJldHVy\nbiBhZGRFbnRyeShkYXRhLCAwLCBkYXRhLmxlbmd0aCk7CiAgICB9CiAgICAK\nICAgIEBPdmVycmlkZQogICAgcHVibGljIGxvbmcgYWRkRW50cnkoYnl0ZVtd\nIGRhdGEsIGludCBvZmZzZXQsIGludCBsZW5ndGgpCiAgICAgICAgICAgIHRo\ncm93cyBJbnRlcnJ1cHRlZEV4Y2VwdGlvbiwgQktFeGNlcHRpb24gewogICAg\nICAgIExPRy5lcnJvcigiVHJpZWQgdG8gYWRkIGVudHJ5IG9uIGEgUmVhZC1P\nbmx5IGxlZGdlciBoYW5kbGUsIGxlZGdlcmlkPSIgKyBsZWRnZXJJZCk7ICAg\nICAgICAKICAgICAgICB0aHJvdyBCS0V4Y2VwdGlvbi5jcmVhdGUoQktFeGNl\ncHRpb24uQ29kZS5JbGxlZ2FsT3BFeGNlcHRpb24pOwogICAgfQoKICAgIEBP\ndmVycmlkZQogICAgcHVibGljIHZvaWQgYXN5bmNBZGRFbnRyeShmaW5hbCBi\neXRlW10gZGF0YSwgZmluYWwgQWRkQ2FsbGJhY2sgY2IsCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIGZpbmFsIE9iamVjdCBjdHgpIHsKICAgICAg\nICBhc3luY0FkZEVudHJ5KGRhdGEsIDAsIGRhdGEubGVuZ3RoLCBjYiwgY3R4\nKTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIGFzeW5j\nQWRkRW50cnkoZmluYWwgYnl0ZVtdIGRhdGEsIGZpbmFsIGludCBvZmZzZXQs\nIGZpbmFsIGludCBsZW5ndGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIGZpbmFsIEFkZENhbGxiYWNrIGNiLCBmaW5hbCBPYmplY3QgY3R4KSB7\nCiAgICAgICAgTE9HLmVycm9yKCJUcmllZCB0byBhZGQgZW50cnkgb24gYSBS\nZWFkLU9ubHkgbGVkZ2VyIGhhbmRsZSwgbGVkZ2VyaWQ9IiArIGxlZGdlcklk\nKTsKICAgICAgICBjYi5hZGRDb21wbGV0ZShCS0V4Y2VwdGlvbi5Db2RlLkls\nbGVnYWxPcEV4Y2VwdGlvbiwgdGhpcywKICAgICAgICAgICAgICAgICAgICAg\nICBMZWRnZXJIYW5kbGUuSU5WQUxJRF9FTlRSWV9JRCwgY3R4KTsKICAgIH0K\nCiAgICBAT3ZlcnJpZGUKICAgIHZvaWQgaGFuZGxlQm9va2llRmFpbHVyZShm\naW5hbCBJbmV0U29ja2V0QWRkcmVzcyBhZGRyLCBmaW5hbCBpbnQgYm9va2ll\nSW5kZXgpIHsKICAgICAgICBibG9ja0FkZENvbXBsZXRpb25zLmluY3JlbWVu\ndEFuZEdldCgpOwogICAgICAgIHN5bmNocm9uaXplZCAobWV0YWRhdGEpIHsK\nICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGlmICghbWV0YWRh\ndGEuY3VycmVudEVuc2VtYmxlLmdldChib29raWVJbmRleCkuZXF1YWxzKGFk\nZHIpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gZW5zZW1ibGUgaGFzIGFs\ncmVhZHkgY2hhbmdlZCwgZmFpbHVyZSBvZiB0aGlzIGFkZHIgaXMgaW1tYXRl\ncmlhbAogICAgICAgICAgICAgICAgICAgIExPRy53YXJuKCJXcml0ZSBkaWQg\nbm90IHN1Y2NlZWQgdG8ge30sIGJvb2tpZUluZGV4IHt9LCBidXQgd2UgaGF2\nZSBhbHJlYWR5IGZpeGVkIGl0LiIsCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgYWRkciwgYm9va2llSW5kZXgpOwogICAgICAgICAgICAgICAgICAg\nIGJsb2NrQWRkQ29tcGxldGlvbnMuZGVjcmVtZW50QW5kR2V0KCk7CiAgICAg\nICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAg\nICAgICAgICAgICAgIHJlcGxhY2VCb29raWVJbk1ldGFkYXRhKGFkZHIsIGJv\nb2tpZUluZGV4KTsKCiAgICAgICAgICAgICAgICBibG9ja0FkZENvbXBsZXRp\nb25zLmRlY3JlbWVudEFuZEdldCgpOwogICAgICAgICAgICAgICAgLy8gdGhl\nIGZhaWxlZCBib29raWUgaGFzIGJlZW4gcmVwbGFjZWQKICAgICAgICAgICAg\nICAgIHVuc2V0U3VjY2Vzc0FuZFNlbmRXcml0ZVJlcXVlc3QoYm9va2llSW5k\nZXgpOwogICAgICAgICAgICB9IGNhdGNoIChCS0V4Y2VwdGlvbi5CS05vdEVu\nb3VnaEJvb2tpZXNFeGNlcHRpb24gZSkgewogICAgICAgICAgICAgICAgTE9H\nLmVycm9yKCJDb3VsZCBub3QgZ2V0IGFkZGl0aW9uYWwgYm9va2llIHRvICIK\nICAgICAgICAgICAgICAgICAgICAgICAgICArICJyZW1ha2UgZW5zZW1ibGUs\nIGNsb3NpbmcgbGVkZ2VyOiAiICsgbGVkZ2VySWQpOwogICAgICAgICAgICAg\nICAgaGFuZGxlVW5yZWNvdmVyYWJsZUVycm9yRHVyaW5nQWRkKGUuZ2V0Q29k\nZSgpKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQog\nICAgICAgIH0KICAgIH0KfQo=\n","encoding":"base64"}

