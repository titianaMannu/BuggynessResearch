{"sha":"6cd38ff08a62fd8d2333ecffa9b402efb1437f5c","node_id":"MDQ6QmxvYjE1NzU5NTY6NmNkMzhmZjA4YTYyZmQ4ZDIzMzNlY2ZmYTliNDAyZWZiMTQzN2Y1Yw==","size":5867,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/6cd38ff08a62fd8d2333ecffa9b402efb1437f5c","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIubWV0YTsKCi8qKgogKiBM\naWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFT\nRikgdW5kZXIgb25lCiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBh\nZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQogKiBkaXN0cmlidXRl\nZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbgog\nKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGlj\nZW5zZXMgdGhpcyBmaWxlCiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExp\nY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUKICogIkxpY2Vuc2UiKTsgeW91IG1h\neSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZQogKiB3\naXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRo\nZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcv\nbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5\nIGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0\nd2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0\ncmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJB\nTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJl\nc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3Bl\nY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBs\naW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgppbXBvcnQgamF2\nYS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5Ob1N1Y2hFbGVt\nZW50RXhjZXB0aW9uOwppbXBvcnQgamF2YS51dGlsLlNldDsKCmltcG9ydCBv\ncmcuYXBhY2hlLmJvb2trZWVwZXIuY2xpZW50LkJLRXhjZXB0aW9uOwppbXBv\ncnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNsaWVudC5MZWRnZXJNZXRhZGF0\nYTsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5jb25mLkFic3RyYWN0\nQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5w\ncm90by5Cb29ra2VlcGVySW50ZXJuYWxDYWxsYmFja3MuR2VuZXJpY0NhbGxi\nYWNrOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLnByb3RvLkJvb2tr\nZWVwZXJJbnRlcm5hbENhbGxiYWNrcy5Qcm9jZXNzb3I7CmltcG9ydCBvcmcu\nYXBhY2hlLmJvb2trZWVwZXIudXRpbC5TdHJpbmdVdGlsczsKaW1wb3J0IG9y\nZy5hcGFjaGUuYm9va2tlZXBlci51dGlsLlprVXRpbHM7CmltcG9ydCBvcmcu\nYXBhY2hlLnpvb2tlZXBlci5Bc3luY0NhbGxiYWNrOwppbXBvcnQgb3JnLmFw\nYWNoZS56b29rZWVwZXIuQXN5bmNDYWxsYmFjay5TdHJpbmdDYWxsYmFjazsK\naW1wb3J0IG9yZy5hcGFjaGUuem9va2VlcGVyLkNyZWF0ZU1vZGU7CmltcG9y\ndCBvcmcuYXBhY2hlLnpvb2tlZXBlci5LZWVwZXJFeGNlcHRpb247CmltcG9y\ndCBvcmcuYXBhY2hlLnpvb2tlZXBlci5LZWVwZXJFeGNlcHRpb24uQ29kZTsK\naW1wb3J0IG9yZy5hcGFjaGUuem9va2VlcGVyLlpvb0RlZnMuSWRzOwppbXBv\ncnQgb3JnLmFwYWNoZS56b29rZWVwZXIuWm9vS2VlcGVyOwppbXBvcnQgb3Jn\nLnNsZjRqLkxvZ2dlcjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJGYWN0b3J5\nOwoKLyoqCiAqIE1hbmFnZSBhbGwgbGVkZ2VycyBpbiBhIHNpbmdsZSB6ayBu\nb2RlLgogKgogKiA8cD4KICogQWxsIGxlZGdlcnMnIG1ldGFkYXRhIGFyZSBw\ndXQgaW4gYSBzaW5nbGUgemsgbm9kZSwgY3JlYXRlZCB1c2luZyB6ayBzZXF1\nZW50aWFsIG5vZGUuCiAqIEVhY2ggbGVkZ2VyIG5vZGUgaXMgcHJlZml4ZWQg\nd2l0aCAnTCcuCiAqIDwvcD4KICovCmNsYXNzIEZsYXRMZWRnZXJNYW5hZ2Vy\nIGV4dGVuZHMgQWJzdHJhY3Raa0xlZGdlck1hbmFnZXIgewoKICAgIHN0YXRp\nYyBmaW5hbCBMb2dnZXIgTE9HID0gTG9nZ2VyRmFjdG9yeS5nZXRMb2dnZXIo\nRmxhdExlZGdlck1hbmFnZXIuY2xhc3MpOwogICAgLy8gcGF0aCBwcmVmaXgg\ndG8gc3RvcmUgbGVkZ2VyIHpub2RlcwogICAgcHJpdmF0ZSBmaW5hbCBTdHJp\nbmcgbGVkZ2VyUHJlZml4OwoKICAgIC8qKgogICAgICogQ29uc3RydWN0b3IK\nICAgICAqCiAgICAgKiBAcGFyYW0gY29uZgogICAgICogICAgICAgICAgQ29u\nZmlndXJhdGlvbiBvYmplY3QKICAgICAqIEBwYXJhbSB6awogICAgICogICAg\nICAgICAgWm9vS2VlcGVyIENsaWVudCBIYW5kbGUKICAgICAqIEBwYXJhbSBs\nZWRnZXJSb290UGF0aAogICAgICogICAgICAgICAgWm9vS2VlcGVyIFBhdGgg\ndG8gc3RvcmUgbGVkZ2VyIG1ldGFkYXRhCiAgICAgKiBAdGhyb3dzIElPRXhj\nZXB0aW9uIHdoZW4gdmVyc2lvbiBpcyBub3QgY29tcGF0aWJsZQogICAgICov\nCiAgICBwdWJsaWMgRmxhdExlZGdlck1hbmFnZXIoQWJzdHJhY3RDb25maWd1\ncmF0aW9uIGNvbmYsIFpvb0tlZXBlciB6aykgewogICAgICAgIHN1cGVyKGNv\nbmYsIHprKTsKCiAgICAgICAgbGVkZ2VyUHJlZml4ID0gbGVkZ2VyUm9vdFBh\ndGggKyAiLyIgKyBTdHJpbmdVdGlscy5MRURHRVJfTk9ERV9QUkVGSVg7CiAg\nICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBjcmVhdGVMZWRn\nZXIoZmluYWwgTGVkZ2VyTWV0YWRhdGEgbWV0YWRhdGEsIGZpbmFsIEdlbmVy\naWNDYWxsYmFjazxMb25nPiBjYikgewogICAgICAgIFN0cmluZ0NhbGxiYWNr\nIHNjYiA9IG5ldyBTdHJpbmdDYWxsYmFjaygpIHsKICAgICAgICAgICAgQE92\nZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIHByb2Nlc3NSZXN1bHQo\naW50IHJjLCBTdHJpbmcgcGF0aCwgT2JqZWN0IGN0eCwKICAgICAgICAgICAg\nICAgICAgICBTdHJpbmcgbmFtZSkgewogICAgICAgICAgICAgICAgaWYgKENv\nZGUuT0suaW50VmFsdWUoKSAhPSByYykgewogICAgICAgICAgICAgICAgICAg\nIExPRy5lcnJvcigiQ291bGQgbm90IGNyZWF0ZSBub2RlIGZvciBsZWRnZXIi\nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBLZWVwZXJFeGNlcHRp\nb24uY3JlYXRlKEtlZXBlckV4Y2VwdGlvbi5Db2RlLmdldChyYyksIHBhdGgp\nKTsKICAgICAgICAgICAgICAgICAgICBjYi5vcGVyYXRpb25Db21wbGV0ZShy\nYywgbnVsbCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAg\nICAgICAgICAgIC8vIHVwZGF0ZSB6bm9kZSBzdGF0dXMKICAgICAgICAgICAg\nICAgICAgICBtZXRhZGF0YS5zZXRWZXJzaW9uKG5ldyBaa1ZlcnNpb24oMCkp\nOwogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAg\nICAgICAgIGxvbmcgbGVkZ2VySWQgPSBnZXRMZWRnZXJJZChuYW1lKTsKICAg\nICAgICAgICAgICAgICAgICAgICAgY2Iub3BlcmF0aW9uQ29tcGxldGUocmMs\nIGxlZGdlcklkKTsKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChJT0V4\nY2VwdGlvbiBpZSkgewogICAgICAgICAgICAgICAgICAgICAgICBMT0cuZXJy\nb3IoIkNvdWxkIG5vdCBleHRyYWN0IGxlZGdlci1pZCBmcm9tIHBhdGg6IiAr\nIG5hbWUsIGllKTsKICAgICAgICAgICAgICAgICAgICAgICAgY2Iub3BlcmF0\naW9uQ29tcGxldGUoQktFeGNlcHRpb24uQ29kZS5aS0V4Y2VwdGlvbiwgbnVs\nbCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQog\nICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBaa1V0aWxzLmNyZWF0\nZUZ1bGxQYXRoT3B0aW1pc3RpYyh6aywgbGVkZ2VyUHJlZml4LCBtZXRhZGF0\nYS5zZXJpYWxpemUoKSwKICAgICAgICAgICAgSWRzLk9QRU5fQUNMX1VOU0FG\nRSwgQ3JlYXRlTW9kZS5QRVJTSVNURU5UX1NFUVVFTlRJQUwsIHNjYiwgbnVs\nbCk7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgU3RyaW5nIGdl\ndExlZGdlclBhdGgobG9uZyBsZWRnZXJJZCkgewogICAgICAgIFN0cmluZ0J1\naWxkZXIgc2IgPSBuZXcgU3RyaW5nQnVpbGRlcigpOwogICAgICAgIHNiLmFw\ncGVuZChsZWRnZXJQcmVmaXgpCiAgICAgICAgICAuYXBwZW5kKFN0cmluZ1V0\naWxzLmdldFpLU3RyaW5nSWQobGVkZ2VySWQpKTsKICAgICAgICByZXR1cm4g\nc2IudG9TdHJpbmcoKTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1Ymxp\nYyBsb25nIGdldExlZGdlcklkKFN0cmluZyBub2RlTmFtZSkgdGhyb3dzIElP\nRXhjZXB0aW9uIHsKICAgICAgICBsb25nIGxlZGdlcklkOwogICAgICAgIHRy\neSB7CiAgICAgICAgICAgIFN0cmluZyBwYXJ0c1tdID0gbm9kZU5hbWUuc3Bs\naXQobGVkZ2VyUHJlZml4KTsKICAgICAgICAgICAgbGVkZ2VySWQgPSBMb25n\nLnBhcnNlTG9uZyhwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXSk7CiAgICAgICAg\nfSBjYXRjaCAoTnVtYmVyRm9ybWF0RXhjZXB0aW9uIGUpIHsKICAgICAgICAg\nICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKGUpOwogICAgICAgIH0KICAgICAg\nICByZXR1cm4gbGVkZ2VySWQ7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBw\ndWJsaWMgdm9pZCBhc3luY1Byb2Nlc3NMZWRnZXJzKGZpbmFsIFByb2Nlc3Nv\ncjxMb25nPiBwcm9jZXNzb3IsCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgIGZpbmFsIEFzeW5jQ2FsbGJhY2suVm9pZENhbGxiYWNrIGZp\nbmFsQ2IsIGZpbmFsIE9iamVjdCBjdHgsCiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIGZpbmFsIGludCBzdWNjZXNzUmMsIGZpbmFsIGlu\ndCBmYWlsdXJlUmMpIHsKICAgICAgICBhc3luY1Byb2Nlc3NMZWRnZXJzSW5T\naW5nbGVOb2RlKGxlZGdlclJvb3RQYXRoLCBwcm9jZXNzb3IsIGZpbmFsQ2Is\nIGN0eCwgc3VjY2Vzc1JjLCBmYWlsdXJlUmMpOwogICAgfQoKICAgIEBPdmVy\ncmlkZQogICAgcHVibGljIExlZGdlclJhbmdlSXRlcmF0b3IgZ2V0TGVkZ2Vy\nUmFuZ2VzKCkgewogICAgICAgIHJldHVybiBuZXcgTGVkZ2VyUmFuZ2VJdGVy\nYXRvcigpIHsKICAgICAgICAgICAgLy8gc2luZ2xlIGl0ZXJhdG9yLCBjYW4g\ndmlzaXQgb25seSBvbmUgdGltZQogICAgICAgICAgICBib29sZWFuIGhhc01v\ncmVFbGVtZW50ID0gdHJ1ZTsKICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAg\nICAgICAgIHB1YmxpYyBib29sZWFuIGhhc05leHQoKSB7CiAgICAgICAgICAg\nICAgICByZXR1cm4gaGFzTW9yZUVsZW1lbnQ7CiAgICAgICAgICAgIH0KICAg\nICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyBMZWRnZXJS\nYW5nZSBuZXh0KCkgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICAgICAg\nICAgIGlmICghaGFzTW9yZUVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAg\nICB0aHJvdyBuZXcgTm9TdWNoRWxlbWVudEV4Y2VwdGlvbigpOwogICAgICAg\nICAgICAgICAgfQogICAgICAgICAgICAgICAgaGFzTW9yZUVsZW1lbnQgPSBm\nYWxzZTsKICAgICAgICAgICAgICAgIFNldDxMb25nPiB6a0FjdGl2ZUxlZGdl\ncnM7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAg\nIHprQWN0aXZlTGVkZ2VycyA9IGxlZGdlckxpc3RUb1NldCgKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIFprVXRpbHMuZ2V0Q2hpbGRyZW5JblNpbmds\nZU5vZGUoemssIGxlZGdlclJvb3RQYXRoKSwgbGVkZ2VyUm9vdFBhdGgpOwog\nICAgICAgICAgICAgICAgfSBjYXRjaCAoSW50ZXJydXB0ZWRFeGNlcHRpb24g\nZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlv\nbigiRXJyb3Igd2hlbiBnZXQgY2hpbGQgbm9kZXMgZnJvbSB6ayIsIGUpOwog\nICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBM\nZWRnZXJSYW5nZSh6a0FjdGl2ZUxlZGdlcnMpOwogICAgICAgICAgICB9CiAg\nICAgICAgfTsKICAgIH0KfQo=\n","encoding":"base64"}

