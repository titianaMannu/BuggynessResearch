{"sha":"70fdda044b4287ab6387351b637744ad92ae7775","node_id":"MDQ6QmxvYjE1NzU5NTY6NzBmZGRhMDQ0YjQyODdhYjYzODczNTFiNjM3NzQ0YWQ5MmFlNzc3NQ==","size":10161,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/70fdda044b4287ab6387351b637744ad92ae7775","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIubWV0YTsKCi8qKgogKiBM\naWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFT\nRikgdW5kZXIgb25lCiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBh\nZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQogKiBkaXN0cmlidXRl\nZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbgog\nKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGlj\nZW5zZXMgdGhpcyBmaWxlCiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExp\nY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUKICogIkxpY2Vuc2UiKTsgeW91IG1h\neSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZQogKiB3\naXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRo\nZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcv\nbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5\nIGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0\nd2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0\ncmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJB\nTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJl\nc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3Bl\nY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBs\naW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgppbXBvcnQgamF2\nYS5pby5JT0V4Y2VwdGlvbjsKCmltcG9ydCBvcmcuc2xmNGouTG9nZ2VyOwpp\nbXBvcnQgb3JnLnNsZjRqLkxvZ2dlckZhY3Rvcnk7CgppbXBvcnQgb3JnLmFw\nYWNoZS5ib29ra2VlcGVyLnJlcGxpY2F0aW9uLlJlcGxpY2F0aW9uRXhjZXB0\naW9uOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNvbmYuQWJzdHJh\nY3RDb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVy\nLnV0aWwuUmVmbGVjdGlvblV0aWxzOwppbXBvcnQgb3JnLmFwYWNoZS5jb21t\nb25zLmNvbmZpZ3VyYXRpb24uQ29uZmlndXJhdGlvbkV4Y2VwdGlvbjsKaW1w\nb3J0IG9yZy5hcGFjaGUuem9va2VlcGVyLktlZXBlckV4Y2VwdGlvbjsKaW1w\nb3J0IG9yZy5hcGFjaGUuem9va2VlcGVyLlpvb0tlZXBlcjsKCnB1YmxpYyBh\nYnN0cmFjdCBjbGFzcyBMZWRnZXJNYW5hZ2VyRmFjdG9yeSB7CgogICAgc3Rh\ndGljIGZpbmFsIExvZ2dlciBMT0cgPSBMb2dnZXJGYWN0b3J5LmdldExvZ2dl\ncihMZWRnZXJNYW5hZ2VyRmFjdG9yeS5jbGFzcyk7CiAgICAvLyB2MSBsYXlv\ndXQKICAgIHN0YXRpYyBmaW5hbCBpbnQgVjEgPSAxOwoKICAgIC8qKgogICAg\nICogUmV0dXJuIGN1cnJlbnQgZmFjdG9yeSB2ZXJzaW9uLgogICAgICoKICAg\nICAqIEByZXR1cm4gY3VycmVudCB2ZXJzaW9uIHVzZWQgYnkgZmFjdG9yeS4K\nICAgICAqLwogICAgcHVibGljIGFic3RyYWN0IGludCBnZXRDdXJyZW50VmVy\nc2lvbigpOwoKICAgIC8qKgogICAgICogSW5pdGlhbGl6ZSBhIGZhY3Rvcnku\nCiAgICAgKgogICAgICogQHBhcmFtIGNvbmYKICAgICAqICAgICAgICAgIENv\nbmZpZ3VyYXRpb24gb2JqZWN0IHVzZWQgdG8gaW5pdGlhbGl6ZSBmYWN0b3J5\nCiAgICAgKiBAcGFyYW0gemsKICAgICAqICAgICAgICAgIEF2YWlsYWJsZSB6\nb29rZWVwZXIgaGFuZGxlIGZvciBsZWRnZXIgbWFuYWdlciB0byB1c2UuCiAg\nICAgKiBAcGFyYW0gZmFjdG9yeVZlcnNpb24KICAgICAqICAgICAgICAgIFdo\nYXQgdmVyc2lvbiB1c2VkIHRvIGluaXRpYWxpemUgZmFjdG9yeS4KICAgICAq\nIEByZXR1cm4gbGVkZ2VyIG1hbmFnZXIgZmFjdG9yeSBpbnN0YW5jZQogICAg\nICogQHRocm93cyBJT0V4Y2VwdGlvbiB3aGVuIGZhaWwgdG8gaW5pdGlhbGl6\nZSB0aGUgZmFjdG9yeS4KICAgICAqLwogICAgcHVibGljIGFic3RyYWN0IExl\nZGdlck1hbmFnZXJGYWN0b3J5IGluaXRpYWxpemUoZmluYWwgQWJzdHJhY3RD\nb25maWd1cmF0aW9uIGNvbmYsCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbCBab29LZWVwZXIgemss\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICBmaW5hbCBpbnQgZmFjdG9yeVZlcnNpb24pCiAgICB0aHJvd3Mg\nSU9FeGNlcHRpb247CgogICAgLyoqCiAgICAgKiBVbmluaXRpYWxpemUgdGhl\nIGZhY3RvcnkuCiAgICAgKgogICAgICogQHRocm93cyBJT0V4Y2VwdGlvbiB3\naGVuIGZhaWwgdG8gdW5pbml0aWFsaXplIHRoZSBmYWN0b3J5LgogICAgICov\nCiAgICBwdWJsaWMgYWJzdHJhY3Qgdm9pZCB1bmluaXRpYWxpemUoKSB0aHJv\nd3MgSU9FeGNlcHRpb247CgogICAgLyoqCiAgICAgKiByZXR1cm4gbGVkZ2Vy\nIG1hbmFnZXIgZm9yIGNsaWVudC1zaWRlIHRvIG1hbmFnZSBsZWRnZXIgbWV0\nYWRhdGEuCiAgICAgKgogICAgICogQHJldHVybiBsZWRnZXIgbWFuYWdlcgog\nICAgICogQHNlZSBMZWRnZXJNYW5hZ2VyCiAgICAgKi8KICAgIHB1YmxpYyBh\nYnN0cmFjdCBMZWRnZXJNYW5hZ2VyIG5ld0xlZGdlck1hbmFnZXIoKTsKCiAg\nICAvKioKICAgICAqIFJldHVybiBhIGxlZGdlciB1bmRlcnJlcGxpY2F0aW9u\nIG1hbmFnZXIsIHdoaWNoIGlzIHVzZWQgdG8KICAgICAqIG1hcmsgbGVkZ2Vy\ncyBhcyB1bnJlcGxpY2F0ZWQsIGFuZCB0byByZXRyaWV2ZSBhIGxlZGdlciB3\naGljaAogICAgICogaXMgdW5kZXJyZXBsaWNhdGVkIHNvIHRoYXQgaXQgY2Fu\nIGJlIHJlcmVwbGljYXRlZC4KICAgICAqCiAgICAgKiBAcmV0dXJuIGxlZGdl\nciB1bmRlcnJlcGxpY2F0aW9uIG1hbmFnZXIKICAgICAqIEBzZWUgTGVkZ2Vy\nVW5kZXJyZXBsaWNhdGlvbk1hbmFnZXIKICAgICAqLwogICAgcHVibGljIGFi\nc3RyYWN0IExlZGdlclVuZGVycmVwbGljYXRpb25NYW5hZ2VyIG5ld0xlZGdl\nclVuZGVycmVwbGljYXRpb25NYW5hZ2VyKCkKICAgICAgICAgICAgdGhyb3dz\nIEtlZXBlckV4Y2VwdGlvbiwgSW50ZXJydXB0ZWRFeGNlcHRpb24sIFJlcGxp\nY2F0aW9uRXhjZXB0aW9uLkNvbXBhdGliaWxpdHlFeGNlcHRpb247CgogICAg\nLyoqCiAgICAgKiBDcmVhdGUgbmV3IExlZGdlciBNYW5hZ2VyIEZhY3Rvcnku\nCiAgICAgKgogICAgICogQHBhcmFtIGNvbmYKICAgICAqICAgICAgICAgIENv\nbmZpZ3VyYXRpb24gT2JqZWN0LgogICAgICogQHBhcmFtIHprCiAgICAgKiAg\nICAgICAgICBab29LZWVwZXIgQ2xpZW50IEhhbmRsZSwgdGFsayB0byB6ayB0\nbyBrbm93IHdoaWNoIGxlZGdlciBtYW5hZ2VyIGlzIHVzZWQuCiAgICAgKiBA\ncmV0dXJuIG5ldyBsZWRnZXIgbWFuYWdlciBmYWN0b3J5CiAgICAgKiBAdGhy\nb3dzIElPRXhjZXB0aW9uCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgTGVk\nZ2VyTWFuYWdlckZhY3RvcnkgbmV3TGVkZ2VyTWFuYWdlckZhY3RvcnkoCiAg\nICAgICAgZmluYWwgQWJzdHJhY3RDb25maWd1cmF0aW9uIGNvbmYsIGZpbmFs\nIFpvb0tlZXBlciB6aykKICAgICAgICAgICAgdGhyb3dzIElPRXhjZXB0aW9u\nLCBLZWVwZXJFeGNlcHRpb24sIEludGVycnVwdGVkRXhjZXB0aW9uIHsKICAg\nICAgICBDbGFzczw/IGV4dGVuZHMgTGVkZ2VyTWFuYWdlckZhY3Rvcnk+IGZh\nY3RvcnlDbGFzczsKICAgICAgICB0cnkgewogICAgICAgICAgICBmYWN0b3J5\nQ2xhc3MgPSBjb25mLmdldExlZGdlck1hbmFnZXJGYWN0b3J5Q2xhc3MoKTsK\nICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICB0\naHJvdyBuZXcgSU9FeGNlcHRpb24oIkZhaWxlZCB0byBnZXQgbGVkZ2VyIG1h\nbmFnZXIgZmFjdG9yeSBjbGFzcyBmcm9tIGNvbmZpZ3VyYXRpb24gOiAiLCBl\nKTsKICAgICAgICB9CiAgICAgICAgU3RyaW5nIGxlZGdlclJvb3RQYXRoID0g\nY29uZi5nZXRaa0xlZGdlcnNSb290UGF0aCgpOwoKICAgICAgICBpZiAobnVs\nbCA9PSBsZWRnZXJSb290UGF0aCB8fCBsZWRnZXJSb290UGF0aC5sZW5ndGgo\nKSA9PSAwKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlvbigi\nRW1wdHkgTGVkZ2VyIFJvb3QgUGF0aC4iKTsKICAgICAgICB9CgogICAgICAg\nIC8vIGlmIHprIGlzIG51bGwsIHJldHVybiB0aGUgZGVmYXVsdCBsZWRnZXIg\nbWFuYWdlcgogICAgICAgIGlmICh6ayA9PSBudWxsKSB7CiAgICAgICAgICAg\nIHJldHVybiBuZXcgRmxhdExlZGdlck1hbmFnZXJGYWN0b3J5KCkKICAgICAg\nICAgICAgICAgICAgIC5pbml0aWFsaXplKGNvbmYsIG51bGwsIEZsYXRMZWRn\nZXJNYW5hZ2VyRmFjdG9yeS5DVVJfVkVSU0lPTik7CiAgICAgICAgfQoKICAg\nICAgICBMZWRnZXJNYW5hZ2VyRmFjdG9yeSBsbUZhY3Rvcnk7CgogICAgICAg\nIC8vIGNoZWNrIHRoYXQgdGhlIGNvbmZpZ3VyZWQgbGVkZ2VyIG1hbmFnZXIg\naXMKICAgICAgICAvLyBjb21wYXRpYmxlIHdpdGggdGhlIGV4aXN0aW5nIGxh\neW91dAogICAgICAgIExlZGdlckxheW91dCBsYXlvdXQgPSBMZWRnZXJMYXlv\ndXQucmVhZExheW91dCh6aywgbGVkZ2VyUm9vdFBhdGgpOwogICAgICAgIGlm\nIChsYXlvdXQgPT0gbnVsbCkgeyAvLyBubyBleGlzdGluZyBsYXlvdXQKICAg\nICAgICAgICAgbG1GYWN0b3J5ID0gY3JlYXRlTmV3TE1GYWN0b3J5KGNvbmYs\nIHprLCBmYWN0b3J5Q2xhc3MpOwogICAgICAgICAgICByZXR1cm4gbG1GYWN0\nb3J5CiAgICAgICAgICAgICAgICAgICAgLmluaXRpYWxpemUoY29uZiwgemss\nIGxtRmFjdG9yeS5nZXRDdXJyZW50VmVyc2lvbigpKTsKICAgICAgICB9CiAg\nICAgICAgTE9HLmRlYnVnKCJyZWFkIGxlZGdlciBsYXlvdXQge30iLCBsYXlv\ndXQpOwoKICAgICAgICAvLyB0aGVyZSBpcyBleGlzdGluZyBsYXlvdXQsIHdl\nIG5lZWQgdG8gbG9vayBpbnRvIHRoZSBsYXlvdXQuCiAgICAgICAgLy8gaGFu\nZGxlIHByZSBWMiBsYXlvdXQKICAgICAgICBpZiAobGF5b3V0LmdldExheW91\ndEZvcm1hdFZlcnNpb24oKSA8PSBWMSkgewogICAgICAgICAgICAvLyBwcmUg\nVjIgbGF5b3V0IHdlIHVzZSB0eXBlIG9mIGxlZGdlciBtYW5hZ2VyCiAgICAg\nICAgICAgIFN0cmluZyBsbVR5cGUgPSBjb25mLmdldExlZGdlck1hbmFnZXJU\neXBlKCk7CiAgICAgICAgICAgIGlmIChsbVR5cGUgIT0gbnVsbCAmJiAhbGF5\nb3V0LmdldE1hbmFnZXJUeXBlKCkuZXF1YWxzKGxtVHlwZSkpIHsKICAgICAg\nICAgICAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlvbigiQ29uZmlndXJlZCBs\nYXlvdXQgIiArIGxtVHlwZQogICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICArICIgZG9lcyBub3QgbWF0Y2ggZXhpc3RpbmcgbGF5b3V0ICIg\nICsgbGF5b3V0LmdldE1hbmFnZXJUeXBlKCkpOwogICAgICAgICAgICB9Cgog\nICAgICAgICAgICAvLyBjcmVhdGUgdGhlIGxlZGdlciBtYW5hZ2VyCiAgICAg\nICAgICAgIGlmIChGbGF0TGVkZ2VyTWFuYWdlckZhY3RvcnkuTkFNRS5lcXVh\nbHMobGF5b3V0LmdldE1hbmFnZXJUeXBlKCkpKSB7CiAgICAgICAgICAgICAg\nICBsbUZhY3RvcnkgPSBuZXcgRmxhdExlZGdlck1hbmFnZXJGYWN0b3J5KCk7\nCiAgICAgICAgICAgIH0gZWxzZSBpZiAoSGllcmFyY2hpY2FsTGVkZ2VyTWFu\nYWdlckZhY3RvcnkuTkFNRS5lcXVhbHMobGF5b3V0LmdldE1hbmFnZXJUeXBl\nKCkpKSB7CiAgICAgICAgICAgICAgICBsbUZhY3RvcnkgPSBuZXcgSGllcmFy\nY2hpY2FsTGVkZ2VyTWFuYWdlckZhY3RvcnkoKTsKICAgICAgICAgICAgfSBl\nbHNlIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlvbigi\nVW5rbm93biBsZWRnZXIgbWFuYWdlciB0eXBlOiAiICsgbG1UeXBlKTsKICAg\nICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gbG1GYWN0b3J5LmluaXRp\nYWxpemUoY29uZiwgemssIGxheW91dC5nZXRNYW5hZ2VyVmVyc2lvbigpKTsK\nICAgICAgICB9CgogICAgICAgIC8vIGhhbmRsZSBWMiBsYXlvdXQgY2FzZQog\nICAgICAgIGlmIChmYWN0b3J5Q2xhc3MgIT0gbnVsbCAmJgogICAgICAgICAg\nICAhbGF5b3V0LmdldE1hbmFnZXJGYWN0b3J5Q2xhc3MoKS5lcXVhbHMoZmFj\ndG9yeUNsYXNzLmdldE5hbWUoKSkpIHsKCiAgICAgICAgICAgIHRocm93IG5l\ndyBJT0V4Y2VwdGlvbigiQ29uZmlndXJlZCBsYXlvdXQgIiArIGZhY3RvcnlD\nbGFzcy5nZXROYW1lKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICArICIgZG9lcyBub3QgbWF0Y2ggZXhpc3RpbmcgbGF5b3V0ICIgICsgbGF5\nb3V0LmdldE1hbmFnZXJGYWN0b3J5Q2xhc3MoKSk7CiAgICAgICAgfQogICAg\nICAgIGlmIChmYWN0b3J5Q2xhc3MgPT0gbnVsbCkgewogICAgICAgICAgICAv\nLyBubyBmYWN0b3J5IHNwZWNpZmllZCBpbiBjb25maWd1cmF0aW9uCiAgICAg\nICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBDbGFzczw/PiB0aGVDbHMg\nPSBDbGFzcy5mb3JOYW1lKGxheW91dC5nZXRNYW5hZ2VyRmFjdG9yeUNsYXNz\nKCkpOwogICAgICAgICAgICAgICAgaWYgKCFMZWRnZXJNYW5hZ2VyRmFjdG9y\neS5jbGFzcy5pc0Fzc2lnbmFibGVGcm9tKHRoZUNscykpIHsKICAgICAgICAg\nICAgICAgICAgICB0aHJvdyBuZXcgSU9FeGNlcHRpb24oIldyb25nIGxlZGdl\nciBtYW5hZ2VyIGZhY3RvcnkgIiArIGxheW91dC5nZXRNYW5hZ2VyRmFjdG9y\neUNsYXNzKCkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAg\nZmFjdG9yeUNsYXNzID0gdGhlQ2xzLmFzU3ViY2xhc3MoTGVkZ2VyTWFuYWdl\nckZhY3RvcnkuY2xhc3MpOwogICAgICAgICAgICB9IGNhdGNoIChDbGFzc05v\ndEZvdW5kRXhjZXB0aW9uIGNuZmUpIHsKICAgICAgICAgICAgICAgIHRocm93\nIG5ldyBJT0V4Y2VwdGlvbigiRmFpbGVkIHRvIGluc3RhbnRpYXRlIGxlZGdl\nciBtYW5hZ2VyIGZhY3RvcnkgIiArIGxheW91dC5nZXRNYW5hZ2VyRmFjdG9y\neUNsYXNzKCkpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8v\nIGluc3RhbnRpYXRlIGEgZmFjdG9yeQogICAgICAgIGxtRmFjdG9yeSA9IFJl\nZmxlY3Rpb25VdGlscy5uZXdJbnN0YW5jZShmYWN0b3J5Q2xhc3MpOwogICAg\nICAgIHJldHVybiBsbUZhY3RvcnkuaW5pdGlhbGl6ZShjb25mLCB6aywgbGF5\nb3V0LmdldE1hbmFnZXJWZXJzaW9uKCkpOwogICAgfQoKICAgIC8qKgogICAg\nICogQ3JlYXRlcyB0aGUgbmV3IGxheW91dCBhbmQgc3RvcmVzIGluIHpvb2tl\nZXBlciBhbmQgcmV0dXJucyB0aGUKICAgICAqIExlZGdlck1hbmFnZXJGYWN0\nb3J5IGluc3RhbmNlLgogICAgICovCiAgICBwcml2YXRlIHN0YXRpYyBMZWRn\nZXJNYW5hZ2VyRmFjdG9yeSBjcmVhdGVOZXdMTUZhY3RvcnkoCiAgICAgICAg\nICAgIGZpbmFsIEFic3RyYWN0Q29uZmlndXJhdGlvbiBjb25mLCBmaW5hbCBa\nb29LZWVwZXIgemssCiAgICAgICAgICAgIENsYXNzPD8gZXh0ZW5kcyBMZWRn\nZXJNYW5hZ2VyRmFjdG9yeT4gZmFjdG9yeUNsYXNzKQogICAgICAgICAgICB0\naHJvd3MgSU9FeGNlcHRpb24sIEtlZXBlckV4Y2VwdGlvbiwgSW50ZXJydXB0\nZWRFeGNlcHRpb24gewoKICAgICAgICBTdHJpbmcgbGVkZ2VyUm9vdFBhdGgg\nPSBjb25mLmdldFprTGVkZ2Vyc1Jvb3RQYXRoKCk7CiAgICAgICAgTGVkZ2Vy\nTWFuYWdlckZhY3RvcnkgbG1GYWN0b3J5OwogICAgICAgIExlZGdlckxheW91\ndCBsYXlvdXQ7CiAgICAgICAgLy8gdXNlIGRlZmF1bHQgbGVkZ2VyIG1hbmFn\nZXIgZmFjdG9yeSBpZiBubyBvbmUgcHJvdmlkZWQKICAgICAgICBpZiAoZmFj\ndG9yeUNsYXNzID09IG51bGwpIHsKICAgICAgICAgICAgLy8gZm9yIGJhY2t3\nYXJkIGNvbXBhdGliaWxpdHksIGNoZWNrIG1hbmFnZXIgdHlwZQogICAgICAg\nICAgICBTdHJpbmcgbG1UeXBlID0gY29uZi5nZXRMZWRnZXJNYW5hZ2VyVHlw\nZSgpOwogICAgICAgICAgICBpZiAobG1UeXBlID09IG51bGwpIHsKICAgICAg\nICAgICAgICAgIGZhY3RvcnlDbGFzcyA9IEZsYXRMZWRnZXJNYW5hZ2VyRmFj\ndG9yeS5jbGFzczsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAg\nICAgIGlmIChGbGF0TGVkZ2VyTWFuYWdlckZhY3RvcnkuTkFNRS5lcXVhbHMo\nbG1UeXBlKSkgewogICAgICAgICAgICAgICAgICAgIGZhY3RvcnlDbGFzcyA9\nIEZsYXRMZWRnZXJNYW5hZ2VyRmFjdG9yeS5jbGFzczsKICAgICAgICAgICAg\nICAgIH0gZWxzZSBpZiAoSGllcmFyY2hpY2FsTGVkZ2VyTWFuYWdlckZhY3Rv\ncnkuTkFNRS5lcXVhbHMobG1UeXBlKSkgewogICAgICAgICAgICAgICAgICAg\nIGZhY3RvcnlDbGFzcyA9IEhpZXJhcmNoaWNhbExlZGdlck1hbmFnZXJGYWN0\nb3J5LmNsYXNzOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAg\nICAgICAgICAgICB0aHJvdyBuZXcgSU9FeGNlcHRpb24oIlVua25vd24gbGVk\nZ2VyIG1hbmFnZXIgdHlwZTogIgogICAgICAgICAgICAgICAgICAgICAgICAg\nICAgKyBsbVR5cGUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9\nCiAgICAgICAgfQoKICAgICAgICBsbUZhY3RvcnkgPSBSZWZsZWN0aW9uVXRp\nbHMubmV3SW5zdGFuY2UoZmFjdG9yeUNsYXNzKTsKCiAgICAgICAgbGF5b3V0\nID0gbmV3IExlZGdlckxheW91dChmYWN0b3J5Q2xhc3MuZ2V0TmFtZSgpLAog\nICAgICAgICAgICAgICAgbG1GYWN0b3J5LmdldEN1cnJlbnRWZXJzaW9uKCkp\nOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGxheW91dC5zdG9yZSh6aywg\nbGVkZ2VyUm9vdFBhdGgpOwogICAgICAgIH0gY2F0Y2ggKEtlZXBlckV4Y2Vw\ndGlvbi5Ob2RlRXhpc3RzRXhjZXB0aW9uIG5lZSkgewogICAgICAgICAgICBM\nZWRnZXJMYXlvdXQgbGF5b3V0MiA9IExlZGdlckxheW91dC5yZWFkTGF5b3V0\nKHprLCBsZWRnZXJSb290UGF0aCk7CiAgICAgICAgICAgIGlmICghbGF5b3V0\nMi5lcXVhbHMobGF5b3V0KSkgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3\nIElPRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgICAgICAgICAiQ29udGVu\ndGlvbiB3cml0aW5nIHRvIGxheW91dCB0byB6b29rZWVwZXIsICIKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICArICIgb3RoZXIgbGF5b3V0ICIg\nKyBsYXlvdXQyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAi\nIGlzIGluY29tcGF0aWJsZSB3aXRoIG91ciAiICsgImxheW91dCAiCiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBsYXlvdXQpOwogICAgICAg\nICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBsbUZhY3Rvcnk7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBGb3JtYXQgdGhlIGxlZGdlciBtZXRhZGF0\nYSBmb3IgTGVkZ2VyTWFuYWdlcgogICAgICogCiAgICAgKiBAcGFyYW0gY29u\nZgogICAgICogICAgICAgICAgICBDb25maWd1cmF0aW9uIGluc3RhbmNlCiAg\nICAgKiBAcGFyYW0gemsKICAgICAqICAgICAgICAgICAgWm9va2VlcGVyIGlu\nc3RhbmNlCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIGZvcm1hdChmaW5hbCBB\nYnN0cmFjdENvbmZpZ3VyYXRpb24gY29uZiwgZmluYWwgWm9vS2VlcGVyIHpr\nKQogICAgICAgICAgICB0aHJvd3MgSW50ZXJydXB0ZWRFeGNlcHRpb24sIEtl\nZXBlckV4Y2VwdGlvbiwgSU9FeGNlcHRpb24gewogICAgICAgIAogICAgICAg\nIENsYXNzPD8gZXh0ZW5kcyBMZWRnZXJNYW5hZ2VyRmFjdG9yeT4gZmFjdG9y\neUNsYXNzOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZhY3RvcnlDbGFz\ncyA9IGNvbmYuZ2V0TGVkZ2VyTWFuYWdlckZhY3RvcnlDbGFzcygpOwogICAg\nICAgIH0gY2F0Y2ggKENvbmZpZ3VyYXRpb25FeGNlcHRpb24gZSkgewogICAg\nICAgICAgICB0aHJvdyBuZXcgSU9FeGNlcHRpb24oIkZhaWxlZCB0byBnZXQg\nbGVkZ2VyIG1hbmFnZXIgZmFjdG9yeSBjbGFzcyBmcm9tIGNvbmZpZ3VyYXRp\nb24gOiAiLCBlKTsKICAgICAgICB9CiAgICAgICAKICAgICAgICBMZWRnZXJM\nYXlvdXQgbGF5b3V0ID0gTGVkZ2VyTGF5b3V0LnJlYWRMYXlvdXQoemssCiAg\nICAgICAgICAgICAgICBjb25mLmdldFprTGVkZ2Vyc1Jvb3RQYXRoKCkpOwog\nICAgICAgIGxheW91dC5kZWxldGUoemssIGNvbmYuZ2V0WmtMZWRnZXJzUm9v\ndFBhdGgoKSk7CiAgICAgICAgLy8gQ3JlYXRlIG5ldyBsYXlvdXQgaW5mb3Jt\nYXRpb24gYWdhaW4uICAgICAgICAKICAgICAgICBjcmVhdGVOZXdMTUZhY3Rv\ncnkoY29uZiwgemssIGZhY3RvcnlDbGFzcyk7CiAgICB9Cn0K\n","encoding":"base64"}

