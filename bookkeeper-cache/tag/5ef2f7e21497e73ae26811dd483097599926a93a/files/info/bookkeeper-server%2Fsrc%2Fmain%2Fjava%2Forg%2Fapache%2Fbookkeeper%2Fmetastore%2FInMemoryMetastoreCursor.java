{"sha":"4e643d5262d0b2f45f6ffaee34f48abda4649efc","node_id":"MDQ6QmxvYjE1NzU5NTY6NGU2NDNkNTI2MmQwYjJmNDVmNmZmYWVlMzRmNDhhYmRhNDY0OWVmYw==","size":3375,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/4e643d5262d0b2f45f6ffaee34f48abda4649efc","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIubWV0YXN0b3JlOwoKaW1wb3J0\nIHN0YXRpYyBvcmcuYXBhY2hlLmJvb2trZWVwZXIubWV0YXN0b3JlLkluTWVt\nb3J5TWV0YXN0b3JlVGFibGUuY2xvbmVWYWx1ZTsKCmltcG9ydCBqYXZhLmlv\nLklPRXhjZXB0aW9uOwppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsKaW1w\nb3J0IGphdmEudXRpbC5JdGVyYXRvcjsKaW1wb3J0IGphdmEudXRpbC5MaXN0\nOwppbXBvcnQgamF2YS51dGlsLk1hcDsKaW1wb3J0IGphdmEudXRpbC5OYXZp\nZ2FibGVNYXA7CmltcG9ydCBqYXZhLnV0aWwuU2V0OwppbXBvcnQgamF2YS51\ndGlsLmNvbmN1cnJlbnQuU2NoZWR1bGVkRXhlY3V0b3JTZXJ2aWNlOwoKaW1w\nb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5tZXRhc3RvcmUuTVNFeGNlcHRp\nb24uQ29kZTsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci52ZXJzaW9u\naW5nLlZlcnNpb25lZDsKCmNsYXNzIEluTWVtb3J5TWV0YXN0b3JlQ3Vyc29y\nIGltcGxlbWVudHMgTWV0YXN0b3JlQ3Vyc29yIHsKCiAgICBwcml2YXRlIGZp\nbmFsIFNjaGVkdWxlZEV4ZWN1dG9yU2VydmljZSBzY2hlZHVsZXI7CiAgICBw\ncml2YXRlIGZpbmFsIEl0ZXJhdG9yPE1hcC5FbnRyeTxTdHJpbmcsIFZlcnNp\nb25lZDxWYWx1ZT4+PiBpdGVyOwogICAgcHJpdmF0ZSBmaW5hbCBTZXQ8U3Ry\naW5nPiBmaWVsZHM7CgogICAgcHVibGljIEluTWVtb3J5TWV0YXN0b3JlQ3Vy\nc29yKE5hdmlnYWJsZU1hcDxTdHJpbmcsIFZlcnNpb25lZDxWYWx1ZT4+IG1h\ncCwgU2V0PFN0cmluZz4gZmllbGRzLAogICAgICAgICAgICBTY2hlZHVsZWRF\neGVjdXRvclNlcnZpY2Ugc2NoZWR1bGVyKSB7CiAgICAgICAgdGhpcy5pdGVy\nID0gbWFwLmVudHJ5U2V0KCkuaXRlcmF0b3IoKTsKICAgICAgICB0aGlzLmZp\nZWxkcyA9IGZpZWxkczsKICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVk\ndWxlcjsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBib29sZWFu\nIGhhc01vcmVFbnRyaWVzKCkgewogICAgICAgIHJldHVybiBpdGVyLmhhc05l\neHQoKTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBJdGVyYXRv\ncjxNZXRhc3RvcmVUYWJsZUl0ZW0+IHJlYWRFbnRyaWVzKGludCBudW1FbnRy\naWVzKQogICAgdGhyb3dzIE1TRXhjZXB0aW9uIHsKICAgICAgICBpZiAobnVt\nRW50cmllcyA8IDApIHsKICAgICAgICAgICAgdGhyb3cgTVNFeGNlcHRpb24u\nY3JlYXRlKENvZGUuSWxsZWdhbE9wKTsKICAgICAgICB9CiAgICAgICAgcmV0\ndXJuIHVuc2FmZVJlYWRFbnRyaWVzKG51bUVudHJpZXMpOwogICAgfQoKICAg\nIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgYXN5bmNSZWFkRW50cmllcyhm\naW5hbCBpbnQgbnVtRW50cmllcywgZmluYWwgUmVhZEVudHJpZXNDYWxsYmFj\nayBjYiwgZmluYWwgT2JqZWN0IGN0eCkgewogICAgICAgIHNjaGVkdWxlci5z\ndWJtaXQobmV3IFJ1bm5hYmxlKCkgewogICAgICAgICAgICBAT3ZlcnJpZGUK\nICAgICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkgewogICAgICAgICAgICAg\nICAgaWYgKG51bUVudHJpZXMgPCAwKSB7CiAgICAgICAgICAgICAgICAgICAg\nY2IuY29tcGxldGUoQ29kZS5JbGxlZ2FsT3AuZ2V0Q29kZSgpLCBudWxsLCBj\ndHgpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAg\nICAgIH0KICAgICAgICAgICAgICAgIEl0ZXJhdG9yPE1ldGFzdG9yZVRhYmxl\nSXRlbT4gcmVzdWx0ID0gdW5zYWZlUmVhZEVudHJpZXMobnVtRW50cmllcyk7\nCiAgICAgICAgICAgICAgICBjYi5jb21wbGV0ZShDb2RlLk9LLmdldENvZGUo\nKSwgcmVzdWx0LCBjdHgpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAg\nICB9CgogICAgcHJpdmF0ZSBJdGVyYXRvcjxNZXRhc3RvcmVUYWJsZUl0ZW0+\nIHVuc2FmZVJlYWRFbnRyaWVzKGludCBudW1FbnRyaWVzKSB7CiAgICAgICAg\nTGlzdDxNZXRhc3RvcmVUYWJsZUl0ZW0+IGVudHJpZXMgPSBuZXcgQXJyYXlM\naXN0PE1ldGFzdG9yZVRhYmxlSXRlbT4oKTsKICAgICAgICBpbnQgbkNvdW50\nID0gMDsKICAgICAgICB3aGlsZSAoaXRlci5oYXNOZXh0KCkgJiYgbkNvdW50\nIDwgbnVtRW50cmllcykgewogICAgICAgICAgICBNYXAuRW50cnk8U3RyaW5n\nLCBWZXJzaW9uZWQ8VmFsdWU+PiBlbnRyeSA9IGl0ZXIubmV4dCgpOwogICAg\nICAgICAgICBWZXJzaW9uZWQ8VmFsdWU+IHZhbHVlID0gZW50cnkuZ2V0VmFs\ndWUoKTsKICAgICAgICAgICAgVmVyc2lvbmVkPFZhbHVlPiB2diA9IGNsb25l\nVmFsdWUodmFsdWUuZ2V0VmFsdWUoKSwgdmFsdWUuZ2V0VmVyc2lvbigpLCBm\naWVsZHMpOwogICAgICAgICAgICBTdHJpbmcga2V5ID0gZW50cnkuZ2V0S2V5\nKCk7CiAgICAgICAgICAgIGVudHJpZXMuYWRkKG5ldyBNZXRhc3RvcmVUYWJs\nZUl0ZW0oa2V5LCB2dikpOwogICAgICAgICAgICArK25Db3VudDsKICAgICAg\nICB9CiAgICAgICAgcmV0dXJuIGVudHJpZXMuaXRlcmF0b3IoKTsKICAgIH0K\nCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIGNsb3NlKCkgdGhyb3dz\nIElPRXhjZXB0aW9uIHsKICAgICAgICAvLyBkbyBub3RoaW5nCiAgICB9Cn0K\n","encoding":"base64"}

