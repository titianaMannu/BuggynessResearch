{"sha":"13a69c186915fb24ff4facb1681ccdc24c8c6217","node_id":"MDQ6QmxvYjE1NzU5NTY6MTNhNjljMTg2OTE1ZmIyNGZmNGZhY2IxNjgxY2NkYzI0YzhjNjIxNw==","size":10341,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/13a69c186915fb24ff4facb1681ccdc24c8c6217","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIucHJvdG87CgovKgogKgog\nKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24g\nKEFTRikgdW5kZXIgb25lCiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5z\nZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQogKiBkaXN0cmli\ndXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlv\nbgogKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0Yg\nbGljZW5zZXMgdGhpcyBmaWxlCiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hl\nIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUKICogIkxpY2Vuc2UiKTsgeW91\nIG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZQog\nKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9m\nIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3Jn\nL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBi\neSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywKICog\nc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlz\ndHJpYnV0ZWQgb24gYW4KICogIkFTIElTIiBCQVNJUywgV0lUSE9VVCBXQVJS\nQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZCiAqIEtJTkQsIGVpdGhlciBl\neHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZQog\nKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5k\nIGxpbWl0YXRpb25zCiAqIHVuZGVyIHRoZSBMaWNlbnNlLgogKgogKi8KCmlt\ncG9ydCBqYXZhLnV0aWwuU2V0OwppbXBvcnQgamF2YS51dGlsLkhhc2hTZXQ7\nCmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uOwppbXBvcnQgamF2YS5uZXQu\nSW5ldFNvY2tldEFkZHJlc3M7CmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVu\ndC5Db25jdXJyZW50SGFzaE1hcDsKaW1wb3J0IGphdmEudXRpbC5jb25jdXJy\nZW50LkV4ZWN1dG9yczsKaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LmF0\nb21pYy5BdG9taWNMb25nOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVy\nLmNvbmYuQ2xpZW50Q29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUu\nYm9va2tlZXBlci5jbGllbnQuQktFeGNlcHRpb247CmltcG9ydCBvcmcuYXBh\nY2hlLmJvb2trZWVwZXIucHJvdG8uQm9va2tlZXBlckludGVybmFsQ2FsbGJh\nY2tzLlJlYWRFbnRyeUNhbGxiYWNrOwppbXBvcnQgb3JnLmFwYWNoZS5ib29r\na2VlcGVyLnByb3RvLkJvb2trZWVwZXJJbnRlcm5hbENhbGxiYWNrcy5HZW5l\ncmljQ2FsbGJhY2s7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIucHJv\ndG8uQm9va2tlZXBlckludGVybmFsQ2FsbGJhY2tzLldyaXRlQ2FsbGJhY2s7\nCmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIudXRpbC5PcmRlcmVkU2Fm\nZUV4ZWN1dG9yOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLnV0aWwu\nU2FmZVJ1bm5hYmxlOwoKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXI7CmltcG9y\ndCBvcmcuc2xmNGouTG9nZ2VyRmFjdG9yeTsKaW1wb3J0IG9yZy5qYm9zcy5u\nZXR0eS5idWZmZXIuQ2hhbm5lbEJ1ZmZlcjsKaW1wb3J0IG9yZy5qYm9zcy5u\nZXR0eS5idWZmZXIuQ2hhbm5lbEJ1ZmZlcnM7CmltcG9ydCBvcmcuamJvc3Mu\nbmV0dHkuY2hhbm5lbC5zb2NrZXQuQ2xpZW50U29ja2V0Q2hhbm5lbEZhY3Rv\ncnk7CmltcG9ydCBvcmcuamJvc3MubmV0dHkuY2hhbm5lbC5zb2NrZXQubmlv\nLk5pb0NsaWVudFNvY2tldENoYW5uZWxGYWN0b3J5OwppbXBvcnQgamF2YS51\ndGlsLmNvbmN1cnJlbnQubG9ja3MuUmVlbnRyYW50UmVhZFdyaXRlTG9jazsK\nCi8qKgogKiBJbXBsZW1lbnRzIHRoZSBjbGllbnQtc2lkZSBwYXJ0IG9mIHRo\nZSBCb29rS2VlcGVyIHByb3RvY29sLgogKgogKi8KcHVibGljIGNsYXNzIEJv\nb2tpZUNsaWVudCB7CiAgICBzdGF0aWMgZmluYWwgTG9nZ2VyIExPRyA9IExv\nZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKEJvb2tpZUNsaWVudC5jbGFzcyk7Cgog\nICAgLy8gVGhpcyBpcyBnbG9iYWwgc3RhdGUgdGhhdCBzaG91bGQgYmUgYWNy\nb3NzIGFsbCBCb29raWVDbGllbnRzCiAgICBBdG9taWNMb25nIHRvdGFsQnl0\nZXNPdXRzdGFuZGluZyA9IG5ldyBBdG9taWNMb25nKCk7CgogICAgT3JkZXJl\nZFNhZmVFeGVjdXRvciBleGVjdXRvcjsKICAgIENsaWVudFNvY2tldENoYW5u\nZWxGYWN0b3J5IGNoYW5uZWxGYWN0b3J5OwogICAgQ29uY3VycmVudEhhc2hN\nYXA8SW5ldFNvY2tldEFkZHJlc3MsIFBlckNoYW5uZWxCb29raWVDbGllbnQ+\nIGNoYW5uZWxzID0gbmV3IENvbmN1cnJlbnRIYXNoTWFwPEluZXRTb2NrZXRB\nZGRyZXNzLCBQZXJDaGFubmVsQm9va2llQ2xpZW50PigpOwoKICAgIHByaXZh\ndGUgZmluYWwgQ2xpZW50Q29uZmlndXJhdGlvbiBjb25mOwogICAgcHJpdmF0\nZSB2b2xhdGlsZSBib29sZWFuIGNsb3NlZDsKICAgIHByaXZhdGUgUmVlbnRy\nYW50UmVhZFdyaXRlTG9jayBjbG9zZUxvY2s7CgogICAgcHVibGljIEJvb2tp\nZUNsaWVudChDbGllbnRDb25maWd1cmF0aW9uIGNvbmYsIENsaWVudFNvY2tl\ndENoYW5uZWxGYWN0b3J5IGNoYW5uZWxGYWN0b3J5LCBPcmRlcmVkU2FmZUV4\nZWN1dG9yIGV4ZWN1dG9yKSB7CiAgICAgICAgdGhpcy5jb25mID0gY29uZjsK\nICAgICAgICB0aGlzLmNoYW5uZWxGYWN0b3J5ID0gY2hhbm5lbEZhY3Rvcnk7\nCiAgICAgICAgdGhpcy5leGVjdXRvciA9IGV4ZWN1dG9yOwogICAgICAgIHRo\naXMuY2xvc2VkID0gZmFsc2U7CiAgICAgICAgdGhpcy5jbG9zZUxvY2sgPSBu\nZXcgUmVlbnRyYW50UmVhZFdyaXRlTG9jaygpOwogICAgfQoKICAgIHB1Ymxp\nYyBQZXJDaGFubmVsQm9va2llQ2xpZW50IGxvb2t1cENsaWVudChJbmV0U29j\na2V0QWRkcmVzcyBhZGRyKSB7CiAgICAgICAgUGVyQ2hhbm5lbEJvb2tpZUNs\naWVudCBjaGFubmVsID0gY2hhbm5lbHMuZ2V0KGFkZHIpOwoKICAgICAgICBp\nZiAoY2hhbm5lbCA9PSBudWxsKSB7CiAgICAgICAgICAgIGNsb3NlTG9jay5y\nZWFkTG9jaygpLmxvY2soKTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgICAgIGlmIChjbG9zZWQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1\ncm4gbnVsbDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNo\nYW5uZWwgPSBuZXcgUGVyQ2hhbm5lbEJvb2tpZUNsaWVudChjb25mLCBleGVj\ndXRvciwgY2hhbm5lbEZhY3RvcnksIGFkZHIsIHRvdGFsQnl0ZXNPdXRzdGFu\nZGluZyk7CiAgICAgICAgICAgICAgICBQZXJDaGFubmVsQm9va2llQ2xpZW50\nIHByZXZDaGFubmVsID0gY2hhbm5lbHMucHV0SWZBYnNlbnQoYWRkciwgY2hh\nbm5lbCk7CiAgICAgICAgICAgICAgICBpZiAocHJldkNoYW5uZWwgIT0gbnVs\nbCkgewogICAgICAgICAgICAgICAgICAgIGNoYW5uZWwgPSBwcmV2Q2hhbm5l\nbDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBmaW5hbGx5IHsK\nICAgICAgICAgICAgICAgIGNsb3NlTG9jay5yZWFkTG9jaygpLnVubG9jaygp\nOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gY2hh\nbm5lbDsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjbG9zZUNsaWVudHMoU2V0\nPEluZXRTb2NrZXRBZGRyZXNzPiBhZGRycykgewogICAgICAgIGZpbmFsIEhh\nc2hTZXQ8UGVyQ2hhbm5lbEJvb2tpZUNsaWVudD4gY2xpZW50cyA9IG5ldyBI\nYXNoU2V0PFBlckNoYW5uZWxCb29raWVDbGllbnQ+KCk7CiAgICAgICAgZm9y\nIChJbmV0U29ja2V0QWRkcmVzcyBhIDogYWRkcnMpIHsKICAgICAgICAgICAg\nUGVyQ2hhbm5lbEJvb2tpZUNsaWVudCBjID0gY2hhbm5lbHMuZ2V0KGEpOwog\nICAgICAgICAgICBpZiAoYyAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBj\nbGllbnRzLmFkZChjKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAg\nICAgaWYgKGNsaWVudHMuc2l6ZSgpID09IDApIHsKICAgICAgICAgICAgcmV0\ndXJuOwogICAgICAgIH0KICAgICAgICBleGVjdXRvci5zdWJtaXQobmV3IFNh\nZmVSdW5uYWJsZSgpIHsKICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAg\nICAgICAgICAgICAgcHVibGljIHZvaWQgc2FmZVJ1bigpIHsKICAgICAgICAg\nICAgICAgICAgICBmb3IgKFBlckNoYW5uZWxCb29raWVDbGllbnQgYyA6IGNs\naWVudHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYy5kaXNjb25uZWN0\nKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQog\nICAgICAgICAgICB9KTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBhZGRFbnRy\neShmaW5hbCBJbmV0U29ja2V0QWRkcmVzcyBhZGRyLCBmaW5hbCBsb25nIGxl\nZGdlcklkLCBmaW5hbCBieXRlW10gbWFzdGVyS2V5LCBmaW5hbCBsb25nIGVu\ndHJ5SWQsCiAgICAgICAgICAgIGZpbmFsIENoYW5uZWxCdWZmZXIgdG9TZW5k\nLCBmaW5hbCBXcml0ZUNhbGxiYWNrIGNiLCBmaW5hbCBPYmplY3QgY3R4LCBm\naW5hbCBpbnQgb3B0aW9ucykgewogICAgICAgIGZpbmFsIFBlckNoYW5uZWxC\nb29raWVDbGllbnQgY2xpZW50ID0gbG9va3VwQ2xpZW50KGFkZHIpOwogICAg\nICAgIGlmIChjbGllbnQgPT0gbnVsbCkgewogICAgICAgICAgICBjYi53cml0\nZUNvbXBsZXRlKEJLRXhjZXB0aW9uLkNvZGUuQm9va2llSGFuZGxlTm90QXZh\naWxhYmxlRXhjZXB0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIGxlZGdlcklkLCBlbnRyeUlkLCBhZGRyLCBjdHgpOwogICAgICAgICAgICBy\nZXR1cm47CiAgICAgICAgfQoKICAgICAgICBjbGllbnQuY29ubmVjdElmTmVl\nZGVkQW5kRG9PcChuZXcgR2VuZXJpY0NhbGxiYWNrPFZvaWQ+KCkgewogICAg\nICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIHZvaWQgb3Bl\ncmF0aW9uQ29tcGxldGUoZmluYWwgaW50IHJjLCBWb2lkIHJlc3VsdCkgewog\nICAgICAgICAgICAgICAgaWYgKHJjICE9IEJLRXhjZXB0aW9uLkNvZGUuT0sp\nIHsKICAgICAgICAgICAgICAgICAgICBleGVjdXRvci5zdWJtaXRPcmRlcmVk\nKGxlZGdlcklkLCBuZXcgU2FmZVJ1bm5hYmxlKCkgewogICAgICAgICAgICAg\nICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgICAgICAgICAg\ncHVibGljIHZvaWQgc2FmZVJ1bigpIHsKICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIGNiLndyaXRlQ29tcGxldGUocmMsIGxlZGdlcklkLCBlbnRyeUlk\nLCBhZGRyLCBjdHgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAg\nICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJu\nOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2xpZW50LmFk\nZEVudHJ5KGxlZGdlcklkLCBtYXN0ZXJLZXksIGVudHJ5SWQsIHRvU2VuZCwg\nY2IsIGN0eCwgb3B0aW9ucyk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCByZWFkRW50cnlBbmRGZW5jZUxlZGdl\ncihmaW5hbCBJbmV0U29ja2V0QWRkcmVzcyBhZGRyLAogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWwgbG9uZyBsZWRnZXJJ\nZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZp\nbmFsIGJ5dGVbXSBtYXN0ZXJLZXksCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICBmaW5hbCBsb25nIGVudHJ5SWQsCiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbCBSZWFkRW50\ncnlDYWxsYmFjayBjYiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgIGZpbmFsIE9iamVjdCBjdHgpIHsKICAgICAgICBmaW5hbCBQ\nZXJDaGFubmVsQm9va2llQ2xpZW50IGNsaWVudCA9IGxvb2t1cENsaWVudChh\nZGRyKTsKICAgICAgICBpZiAoY2xpZW50ID09IG51bGwpIHsKICAgICAgICAg\nICAgY2IucmVhZEVudHJ5Q29tcGxldGUoQktFeGNlcHRpb24uQ29kZS5Cb29r\naWVIYW5kbGVOb3RBdmFpbGFibGVFeGNlcHRpb24sCiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIGxlZGdlcklkLCBlbnRyeUlkLCBudWxsLCBj\ndHgpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBj\nbGllbnQuY29ubmVjdElmTmVlZGVkQW5kRG9PcChuZXcgR2VuZXJpY0NhbGxi\nYWNrPFZvaWQ+KCkgewogICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAg\nICAgcHVibGljIHZvaWQgb3BlcmF0aW9uQ29tcGxldGUoZmluYWwgaW50IHJj\nLCBWb2lkIHJlc3VsdCkgewogICAgICAgICAgICAgICAgaWYgKHJjICE9IEJL\nRXhjZXB0aW9uLkNvZGUuT0spIHsKICAgICAgICAgICAgICAgICAgICBleGVj\ndXRvci5zdWJtaXRPcmRlcmVkKGxlZGdlcklkLCBuZXcgU2FmZVJ1bm5hYmxl\nKCkgewogICAgICAgICAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAg\nICAgICAgICAgICAgICAgICAgcHVibGljIHZvaWQgc2FmZVJ1bigpIHsKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgIGNiLnJlYWRFbnRyeUNvbXBsZXRl\nKHJjLCBsZWRnZXJJZCwgZW50cnlJZCwgbnVsbCwgY3R4KTsKICAgICAgICAg\nICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAg\nICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAg\nICAgICAgICAgICAgIGNsaWVudC5yZWFkRW50cnlBbmRGZW5jZUxlZGdlcihs\nZWRnZXJJZCwgbWFzdGVyS2V5LCBlbnRyeUlkLCBjYiwgY3R4KTsKICAgICAg\nICAgICAgfQogICAgICAgIH0pOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHJl\nYWRFbnRyeShmaW5hbCBJbmV0U29ja2V0QWRkcmVzcyBhZGRyLCBmaW5hbCBs\nb25nIGxlZGdlcklkLCBmaW5hbCBsb25nIGVudHJ5SWQsCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgZmluYWwgUmVhZEVudHJ5Q2FsbGJhY2sgY2IsIGZp\nbmFsIE9iamVjdCBjdHgpIHsKICAgICAgICBmaW5hbCBQZXJDaGFubmVsQm9v\na2llQ2xpZW50IGNsaWVudCA9IGxvb2t1cENsaWVudChhZGRyKTsKICAgICAg\nICBpZiAoY2xpZW50ID09IG51bGwpIHsKICAgICAgICAgICAgY2IucmVhZEVu\ndHJ5Q29tcGxldGUoQktFeGNlcHRpb24uQ29kZS5Cb29raWVIYW5kbGVOb3RB\ndmFpbGFibGVFeGNlcHRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIGxlZGdlcklkLCBlbnRyeUlkLCBudWxsLCBjdHgpOwogICAgICAg\nICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBjbGllbnQuY29ubmVj\ndElmTmVlZGVkQW5kRG9PcChuZXcgR2VuZXJpY0NhbGxiYWNrPFZvaWQ+KCkg\newogICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIHZv\naWQgb3BlcmF0aW9uQ29tcGxldGUoZmluYWwgaW50IHJjLCBWb2lkIHJlc3Vs\ndCkgewogICAgICAgICAgICAgICAgaWYgKHJjICE9IEJLRXhjZXB0aW9uLkNv\nZGUuT0spIHsKICAgICAgICAgICAgICAgICAgICBleGVjdXRvci5zdWJtaXRP\ncmRlcmVkKGxlZGdlcklkLCBuZXcgU2FmZVJ1bm5hYmxlKCkgewogICAgICAg\nICAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgICAg\nICAgICAgcHVibGljIHZvaWQgc2FmZVJ1bigpIHsKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgIGNiLnJlYWRFbnRyeUNvbXBsZXRlKHJjLCBsZWRnZXJJ\nZCwgZW50cnlJZCwgbnVsbCwgY3R4KTsKICAgICAgICAgICAgICAgICAgICAg\nICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAg\nICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAg\nIGNsaWVudC5yZWFkRW50cnkobGVkZ2VySWQsIGVudHJ5SWQsIGNiLCBjdHgp\nOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgY2xvc2UoKSB7CiAgICAgICAgY2xvc2VMb2NrLndyaXRlTG9jaygp\nLmxvY2soKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBjbG9zZWQgPSB0\ncnVlOwogICAgICAgICAgICBmb3IgKFBlckNoYW5uZWxCb29raWVDbGllbnQg\nY2hhbm5lbDogY2hhbm5lbHMudmFsdWVzKCkpIHsKICAgICAgICAgICAgICAg\nIGNoYW5uZWwuY2xvc2UoKTsKICAgICAgICAgICAgfQogICAgICAgIH0gZmlu\nYWxseSB7CiAgICAgICAgICAgIGNsb3NlTG9jay53cml0ZUxvY2soKS51bmxv\nY2soKTsKICAgICAgICB9CiAgICB9CgogICAgcHJpdmF0ZSBzdGF0aWMgY2xh\nc3MgQ291bnRlciB7CiAgICAgICAgaW50IGk7CiAgICAgICAgaW50IHRvdGFs\nOwoKICAgICAgICBzeW5jaHJvbml6ZWQgdm9pZCBpbmMoKSB7CiAgICAgICAg\nICAgIGkrKzsKICAgICAgICAgICAgdG90YWwrKzsKICAgICAgICB9CgogICAg\nICAgIHN5bmNocm9uaXplZCB2b2lkIGRlYygpIHsKICAgICAgICAgICAgaS0t\nOwogICAgICAgICAgICBub3RpZnlBbGwoKTsKICAgICAgICB9CgogICAgICAg\nIHN5bmNocm9uaXplZCB2b2lkIHdhaXQoaW50IGxpbWl0KSB0aHJvd3MgSW50\nZXJydXB0ZWRFeGNlcHRpb24gewogICAgICAgICAgICB3aGlsZSAoaSA+IGxp\nbWl0KSB7CiAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgIH0K\nICAgICAgICB9CgogICAgICAgIHN5bmNocm9uaXplZCBpbnQgdG90YWwoKSB7\nCiAgICAgICAgICAgIHJldHVybiB0b3RhbDsKICAgICAgICB9CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBAcGFyYW0gYXJncwogICAgICogQHRocm93cyBJT0V4\nY2VwdGlvbgogICAgICogQHRocm93cyBOdW1iZXJGb3JtYXRFeGNlcHRpb24K\nICAgICAqIEB0aHJvd3MgSW50ZXJydXB0ZWRFeGNlcHRpb24KICAgICAqLwog\nICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykgdGhy\nb3dzIE51bWJlckZvcm1hdEV4Y2VwdGlvbiwgSU9FeGNlcHRpb24sIEludGVy\ncnVwdGVkRXhjZXB0aW9uIHsKICAgICAgICBpZiAoYXJncy5sZW5ndGggIT0g\nMykgewogICAgICAgICAgICBTeXN0ZW0uZXJyLnByaW50bG4oIlVTQUdFOiBC\nb29raWVDbGllbnQgYm9va2llSG9zdCBwb3J0IGxlZGdlciMiKTsKICAgICAg\nICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBXcml0ZUNhbGxiYWNr\nIGNiID0gbmV3IFdyaXRlQ2FsbGJhY2soKSB7CgogICAgICAgICAgICBwdWJs\naWMgdm9pZCB3cml0ZUNvbXBsZXRlKGludCByYywgbG9uZyBsZWRnZXIsIGxv\nbmcgZW50cnksIEluZXRTb2NrZXRBZGRyZXNzIGFkZHIsIE9iamVjdCBjdHgp\nIHsKICAgICAgICAgICAgICAgIENvdW50ZXIgY291bnRlciA9IChDb3VudGVy\nKSBjdHg7CiAgICAgICAgICAgICAgICBjb3VudGVyLmRlYygpOwogICAgICAg\nICAgICAgICAgaWYgKHJjICE9IDApIHsKICAgICAgICAgICAgICAgICAgICBT\neXN0ZW0ub3V0LnByaW50bG4oInJjID0gIiArIHJjICsgIiBmb3IgIiArIGVu\ndHJ5ICsgIkAiICsgbGVkZ2VyKTsKICAgICAgICAgICAgICAgIH0KICAgICAg\nICAgICAgfQogICAgICAgIH07CiAgICAgICAgQ291bnRlciBjb3VudGVyID0g\nbmV3IENvdW50ZXIoKTsKICAgICAgICBieXRlIGhlbGxvW10gPSAiaGVsbG8i\nLmdldEJ5dGVzKCk7CiAgICAgICAgbG9uZyBsZWRnZXIgPSBMb25nLnBhcnNl\nTG9uZyhhcmdzWzJdKTsKICAgICAgICBDbGllbnRTb2NrZXRDaGFubmVsRmFj\ndG9yeSBjaGFubmVsRmFjdG9yeSA9IG5ldyBOaW9DbGllbnRTb2NrZXRDaGFu\nbmVsRmFjdG9yeShFeGVjdXRvcnMubmV3Q2FjaGVkVGhyZWFkUG9vbCgpLCBF\neGVjdXRvcnMKICAgICAgICAgICAgICAgIC5uZXdDYWNoZWRUaHJlYWRQb29s\nKCkpOwogICAgICAgIE9yZGVyZWRTYWZlRXhlY3V0b3IgZXhlY3V0b3IgPSBu\nZXcgT3JkZXJlZFNhZmVFeGVjdXRvcigxKTsKICAgICAgICBCb29raWVDbGll\nbnQgYmMgPSBuZXcgQm9va2llQ2xpZW50KG5ldyBDbGllbnRDb25maWd1cmF0\naW9uKCksIGNoYW5uZWxGYWN0b3J5LCBleGVjdXRvcik7CiAgICAgICAgSW5l\ndFNvY2tldEFkZHJlc3MgYWRkciA9IG5ldyBJbmV0U29ja2V0QWRkcmVzcyhh\ncmdzWzBdLCBJbnRlZ2VyLnBhcnNlSW50KGFyZ3NbMV0pKTsKCiAgICAgICAg\nZm9yIChpbnQgaSA9IDA7IGkgPCAxMDAwMDA7IGkrKykgewogICAgICAgICAg\nICBjb3VudGVyLmluYygpOwogICAgICAgICAgICBiYy5hZGRFbnRyeShhZGRy\nLCBsZWRnZXIsIG5ldyBieXRlWzBdLCBpLCBDaGFubmVsQnVmZmVycy53cmFw\ncGVkQnVmZmVyKGhlbGxvKSwgY2IsIGNvdW50ZXIsIDApOwogICAgICAgIH0K\nICAgICAgICBjb3VudGVyLndhaXQoMCk7CiAgICAgICAgU3lzdGVtLm91dC5w\ncmludGxuKCJUb3RhbCA9ICIgKyBjb3VudGVyLnRvdGFsKCkpOwogICAgICAg\nIGNoYW5uZWxGYWN0b3J5LnJlbGVhc2VFeHRlcm5hbFJlc291cmNlcygpOwog\nICAgICAgIGV4ZWN1dG9yLnNodXRkb3duKCk7CiAgICB9Cn0K\n","encoding":"base64"}

