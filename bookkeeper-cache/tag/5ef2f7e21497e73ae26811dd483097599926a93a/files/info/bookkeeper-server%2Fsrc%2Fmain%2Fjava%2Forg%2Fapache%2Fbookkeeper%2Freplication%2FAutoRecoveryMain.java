{"sha":"a6222a0ae8777c56f8384d301d81299810f35943","node_id":"MDQ6QmxvYjE1NzU5NTY6YTYyMjJhMGFlODc3N2M1NmY4Mzg0ZDMwMWQ4MTI5OTgxMGYzNTk0Mw==","size":9390,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/a6222a0ae8777c56f8384d301d81299810f35943","content":"LyoqCiAqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91\nbmRhdGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRv\nciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAq\nIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGlu\nZm9ybWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRo\nZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5z\nZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21w\nbGlhbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBh\nIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICBodHRwOi8vd3d3LmFw\nYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJl\ncXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0\naW5nLAogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5z\nZSBpcyBkaXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRI\nT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwg\nZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBm\nb3IgdGhlCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNz\naW9ucyBhbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAq\nCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci5yZXBsaWNhdGlv\nbjsKCmltcG9ydCBqYXZhLmlvLkZpbGU7CmltcG9ydCBqYXZhLmlvLklPRXhj\nZXB0aW9uOwppbXBvcnQgamF2YS5uZXQuTWFsZm9ybWVkVVJMRXhjZXB0aW9u\nOwoKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5ib29raWUuQm9va2ll\nOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmJvb2tpZS5FeGl0Q29k\nZTsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5jb25mLlNlcnZlckNv\nbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIucmVw\nbGljYXRpb24uUmVwbGljYXRpb25FeGNlcHRpb24uQ29tcGF0aWJpbGl0eUV4\nY2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5yZXBsaWNh\ndGlvbi5SZXBsaWNhdGlvbkV4Y2VwdGlvbi5VbmF2YWlsYWJsZUV4Y2VwdGlv\nbjsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci51dGlsLlprVXRpbHM7\nCmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIudXRpbC5TdHJpbmdVdGls\nczsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci56b29rZWVwZXIuWm9v\nS2VlcGVyV2F0Y2hlckJhc2U7CmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMu\nY2xpLkJhc2ljUGFyc2VyOwppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNs\naS5Db21tYW5kTGluZTsKaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jbGku\nSGVscEZvcm1hdHRlcjsKaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jbGku\nT3B0aW9uczsKaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jbGkuUGFyc2VF\neGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMuY29uZmlndXJh\ndGlvbi5Db25maWd1cmF0aW9uRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNo\nZS56b29rZWVwZXIuS2VlcGVyRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNo\nZS56b29rZWVwZXIuV2F0Y2hlZEV2ZW50OwppbXBvcnQgb3JnLmFwYWNoZS56\nb29rZWVwZXIuV2F0Y2hlcjsKaW1wb3J0IG9yZy5hcGFjaGUuem9va2VlcGVy\nLlpvb0tlZXBlcjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXI7CmltcG9ydCBv\ncmcuc2xmNGouTG9nZ2VyRmFjdG9yeTsKCi8qKgogKiBDbGFzcyB0byBzdGFy\ndC9zdG9wIHRoZSBBdXRvUmVjb3ZlcnkgZGFlbW9ucyBBdWRpdG9yIGFuZCBS\nZXBsaWNhdGlvbldvcmtlcgogKi8KcHVibGljIGNsYXNzIEF1dG9SZWNvdmVy\neU1haW4gewogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9nZ2VyIExPRyA9\nIExvZ2dlckZhY3RvcnkKICAgICAgICAgICAgLmdldExvZ2dlcihBdXRvUmVj\nb3ZlcnlNYWluLmNsYXNzKTsKCiAgICBwcml2YXRlIFNlcnZlckNvbmZpZ3Vy\nYXRpb24gY29uZjsKICAgIHByaXZhdGUgWm9vS2VlcGVyIHprOwogICAgQXVk\naXRvckVsZWN0b3IgYXVkaXRvckVsZWN0b3I7CiAgICBSZXBsaWNhdGlvbldv\ncmtlciByZXBsaWNhdGlvbldvcmtlcjsKICAgIHByaXZhdGUgQXV0b1JlY292\nZXJ5RGVhdGhXYXRjaGVyIGRlYXRoV2F0Y2hlcjsKICAgIHByaXZhdGUgaW50\nIGV4aXRDb2RlOwogICAgcHJpdmF0ZSB2b2xhdGlsZSBib29sZWFuIHNodXR0\naW5nRG93biA9IGZhbHNlOwogICAgcHJpdmF0ZSB2b2xhdGlsZSBib29sZWFu\nIHJ1bm5pbmcgPSBmYWxzZTsKCiAgICBwdWJsaWMgQXV0b1JlY292ZXJ5TWFp\nbihTZXJ2ZXJDb25maWd1cmF0aW9uIGNvbmYpIHRocm93cyBJT0V4Y2VwdGlv\nbiwKICAgICAgICAgICAgSW50ZXJydXB0ZWRFeGNlcHRpb24sIEtlZXBlckV4\nY2VwdGlvbiwgVW5hdmFpbGFibGVFeGNlcHRpb24sCiAgICAgICAgICAgIENv\nbXBhdGliaWxpdHlFeGNlcHRpb24gewogICAgICAgIHRoaXMuY29uZiA9IGNv\nbmY7CiAgICAgICAgWm9vS2VlcGVyV2F0Y2hlckJhc2UgdyA9IG5ldyBab29L\nZWVwZXJXYXRjaGVyQmFzZShjb25mLmdldFprVGltZW91dCgpKSB7CiAgICAg\nICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICBwdWJsaWMgdm9pZCBwcm9j\nZXNzKFdhdGNoZWRFdmVudCBldmVudCkgewogICAgICAgICAgICAgICAgLy8g\nQ2hlY2sgZm9yIGV4cGlyZWQgY29ubmVjdGlvbi4KICAgICAgICAgICAgICAg\nIGlmIChldmVudC5nZXRTdGF0ZSgpLmVxdWFscyhXYXRjaGVyLkV2ZW50Lktl\nZXBlclN0YXRlLkV4cGlyZWQpKSB7CiAgICAgICAgICAgICAgICAgICAgTE9H\nLmVycm9yKCJaSyBjbGllbnQgY29ubmVjdGlvbiB0byB0aGUiCiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICArICIgWksgc2VydmVyIGhhcyBleHBpcmVk\nISIpOwogICAgICAgICAgICAgICAgICAgIHNodXRkb3duKEV4aXRDb2RlLlpL\nX0VYUElSRUQpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAg\nICAgICAgICAgICBzdXBlci5wcm9jZXNzKGV2ZW50KTsKICAgICAgICAgICAg\nICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgemsgPSBa\na1V0aWxzLmNyZWF0ZUNvbm5lY3RlZFpvb2tlZXBlckNsaWVudChjb25mLmdl\ndFprU2VydmVycygpLCB3KTsKICAgICAgICBhdWRpdG9yRWxlY3RvciA9IG5l\ndyBBdWRpdG9yRWxlY3RvcigKICAgICAgICAgICAgICAgIFN0cmluZ1V0aWxz\nLmFkZHJUb1N0cmluZyhCb29raWUuZ2V0Qm9va2llQWRkcmVzcyhjb25mKSks\nIGNvbmYsIHprKTsKICAgICAgICByZXBsaWNhdGlvbldvcmtlciA9IG5ldyBS\nZXBsaWNhdGlvbldvcmtlcih6aywgY29uZiwKICAgICAgICAgICAgICAgIEJv\nb2tpZS5nZXRCb29raWVBZGRyZXNzKGNvbmYpKTsKICAgICAgICBkZWF0aFdh\ndGNoZXIgPSBuZXcgQXV0b1JlY292ZXJ5RGVhdGhXYXRjaGVyKHRoaXMpOwog\nICAgfQoKICAgIC8qCiAgICAgKiBTdGFydCBkYWVtb25zCiAgICAgKi8KICAg\nIHB1YmxpYyB2b2lkIHN0YXJ0KCkgdGhyb3dzIFVuYXZhaWxhYmxlRXhjZXB0\naW9uIHsKICAgICAgICBhdWRpdG9yRWxlY3Rvci5zdGFydCgpOwogICAgICAg\nIHJlcGxpY2F0aW9uV29ya2VyLnN0YXJ0KCk7CiAgICAgICAgZGVhdGhXYXRj\naGVyLnN0YXJ0KCk7CiAgICAgICAgcnVubmluZyA9IHRydWU7CiAgICB9Cgog\nICAgLyoKICAgICAqIFdhaXRzIHRpbGwgYWxsIGRhZW1vbnMgam9pbnMKICAg\nICAqLwogICAgcHVibGljIHZvaWQgam9pbigpIHRocm93cyBJbnRlcnJ1cHRl\nZEV4Y2VwdGlvbiB7CiAgICAgICAgZGVhdGhXYXRjaGVyLmpvaW4oKTsKICAg\nIH0KCiAgICAvKgogICAgICogU2h1dGRvd24gYWxsIGRhZW1vbnMgZ3JhY2Vm\ndWxseQogICAgICovCiAgICBwdWJsaWMgdm9pZCBzaHV0ZG93bigpIHsKICAg\nICAgICBzaHV0ZG93bihFeGl0Q29kZS5PSyk7CiAgICB9CgogICAgcHJpdmF0\nZSB2b2lkIHNodXRkb3duKGludCBleGl0Q29kZSkgewogICAgICAgIGlmIChz\naHV0dGluZ0Rvd24pIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0K\nICAgICAgICBzaHV0dGluZ0Rvd24gPSB0cnVlOwogICAgICAgIHJ1bm5pbmcg\nPSBmYWxzZTsKICAgICAgICB0aGlzLmV4aXRDb2RlID0gZXhpdENvZGU7CiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgZGVhdGhXYXRjaGVyLmludGVycnVw\ndCgpOwogICAgICAgICAgICBkZWF0aFdhdGNoZXIuam9pbigpOwoKICAgICAg\nICAgICAgYXVkaXRvckVsZWN0b3Iuc2h1dGRvd24oKTsKICAgICAgICB9IGNh\ndGNoIChJbnRlcnJ1cHRlZEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIFRo\ncmVhZC5jdXJyZW50VGhyZWFkKCkuaW50ZXJydXB0KCk7CiAgICAgICAgICAg\nIExPRy53YXJuKCJJbnRlcnJ1cHRlZCBzaHV0dGluZyBkb3duIGF1dG8gcmVj\nb3ZlcnkiLCBlKTsKICAgICAgICB9CgogICAgICAgIHJlcGxpY2F0aW9uV29y\na2VyLnNodXRkb3duKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgemsu\nY2xvc2UoKTsKICAgICAgICB9IGNhdGNoIChJbnRlcnJ1cHRlZEV4Y2VwdGlv\nbiBlKSB7CiAgICAgICAgICAgIFRocmVhZC5jdXJyZW50VGhyZWFkKCkuaW50\nZXJydXB0KCk7CiAgICAgICAgICAgIExPRy53YXJuKCJJbnRlcnJ1cHRlZCBz\naHV0dGluZyBkb3duIGF1dG8gcmVjb3ZlcnkiLCBlKTsKICAgICAgICB9CiAg\nICB9CgogICAgcHJpdmF0ZSBpbnQgZ2V0RXhpdENvZGUoKSB7CiAgICAgICAg\ncmV0dXJuIGV4aXRDb2RlOwogICAgfQoKICAgIC8qKiBJcyBhdXRvLXJlY292\nZXJ5IHNlcnZpY2UgcnVubmluZz8gKi8KICAgIHB1YmxpYyBib29sZWFuIGlz\nQXV0b1JlY292ZXJ5UnVubmluZygpIHsKICAgICAgICByZXR1cm4gcnVubmlu\nZzsKICAgIH0KCiAgICAvKgogICAgICogRGVhdGhXYXRjaGVyIGZvciBBdXRv\nUmVjb3ZlcnkgZGFlbW9ucy4KICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMg\nY2xhc3MgQXV0b1JlY292ZXJ5RGVhdGhXYXRjaGVyIGV4dGVuZHMgVGhyZWFk\nIHsKICAgICAgICBwcml2YXRlIGludCB3YXRjaEludGVydmFsOwogICAgICAg\nIHByaXZhdGUgQXV0b1JlY292ZXJ5TWFpbiBhdXRvUmVjb3ZlcnlNYWluOwoK\nICAgICAgICBwdWJsaWMgQXV0b1JlY292ZXJ5RGVhdGhXYXRjaGVyKEF1dG9S\nZWNvdmVyeU1haW4gYXV0b1JlY292ZXJ5TWFpbikgewogICAgICAgICAgICBz\ndXBlcigiQXV0b1JlY292ZXJ5RGVhdGhXYXRjaGVyLSIKICAgICAgICAgICAg\nICAgICAgICArIGF1dG9SZWNvdmVyeU1haW4uY29uZi5nZXRCb29raWVQb3J0\nKCkpOwogICAgICAgICAgICB0aGlzLmF1dG9SZWNvdmVyeU1haW4gPSBhdXRv\nUmVjb3ZlcnlNYWluOwogICAgICAgICAgICB3YXRjaEludGVydmFsID0gYXV0\nb1JlY292ZXJ5TWFpbi5jb25mLmdldERlYXRoV2F0Y2hJbnRlcnZhbCgpOwog\nICAgICAgIH0KCiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHVibGljIHZv\naWQgcnVuKCkgewogICAgICAgICAgICB3aGlsZSAodHJ1ZSkgewogICAgICAg\nICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBUaHJlYWQuc2xl\nZXAod2F0Y2hJbnRlcnZhbCk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChJ\nbnRlcnJ1cHRlZEV4Y2VwdGlvbiBpZSkgewogICAgICAgICAgICAgICAgICAg\nIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8g\nSWYgYW55IG9uZSBzZXJ2aWNlIG5vdCBydW5uaW5nLCB0aGVuIHNodXRkb3du\nIHBlZXIuCiAgICAgICAgICAgICAgICBpZiAoIWF1dG9SZWNvdmVyeU1haW4u\nYXVkaXRvckVsZWN0b3IuaXNSdW5uaW5nKCkKICAgICAgICAgICAgICAgICAg\nICB8fCAhYXV0b1JlY292ZXJ5TWFpbi5yZXBsaWNhdGlvbldvcmtlci5pc1J1\nbm5pbmcoKSkgewogICAgICAgICAgICAgICAgICAgIGF1dG9SZWNvdmVyeU1h\naW4uc2h1dGRvd24oKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAg\nICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0K\nCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBPcHRpb25zIG9wdHMgPSBuZXcg\nT3B0aW9ucygpOwogICAgc3RhdGljIHsKICAgICAgICBvcHRzLmFkZE9wdGlv\nbigiYyIsICJjb25mIiwgdHJ1ZSwgIkJvb2tpZSBzZXJ2ZXIgY29uZmlndXJh\ndGlvbiIpOwogICAgICAgIG9wdHMuYWRkT3B0aW9uKCJoIiwgImhlbHAiLCBm\nYWxzZSwgIlByaW50IGhlbHAgbWVzc2FnZSIpOwogICAgfQoKICAgIC8qCiAg\nICAgKiBQcmludCB1c2FnZQogICAgICovCiAgICBwcml2YXRlIHN0YXRpYyB2\nb2lkIHByaW50VXNhZ2UoKSB7CiAgICAgICAgSGVscEZvcm1hdHRlciBoZiA9\nIG5ldyBIZWxwRm9ybWF0dGVyKCk7CiAgICAgICAgaGYucHJpbnRIZWxwKCJB\ndXRvUmVjb3ZlcnlNYWluIFtvcHRpb25zXVxuIiwgb3B0cyk7CiAgICB9Cgog\nICAgLyoKICAgICAqIGxvYWQgY29uZmlndXJhdGlvbnMgZnJvbSBmaWxlLgog\nICAgICovCiAgICBwcml2YXRlIHN0YXRpYyB2b2lkIGxvYWRDb25mRmlsZShT\nZXJ2ZXJDb25maWd1cmF0aW9uIGNvbmYsIFN0cmluZyBjb25mRmlsZSkKICAg\nICAgICAgICAgdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiB7CiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgY29uZi5sb2FkQ29uZihuZXcgRmls\nZShjb25mRmlsZSkudG9VUkkoKS50b1VSTCgpKTsKICAgICAgICB9IGNhdGNo\nIChNYWxmb3JtZWRVUkxFeGNlcHRpb24gZSkgewogICAgICAgICAgICBMT0cu\nZXJyb3IoIkNvdWxkIG5vdCBvcGVuIGNvbmZpZ3VyYXRpb24gZmlsZTogIiAr\nIGNvbmZGaWxlLCBlKTsKICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxB\ncmd1bWVudEV4Y2VwdGlvbigpOwogICAgICAgIH0gY2F0Y2ggKENvbmZpZ3Vy\nYXRpb25FeGNlcHRpb24gZSkgewogICAgICAgICAgICBMT0cuZXJyb3IoIk1h\nbGZvcm1lZCBjb25maWd1cmF0aW9uIGZpbGU6ICIgKyBjb25mRmlsZSwgZSk7\nCiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRp\nb24oKTsKICAgICAgICB9CiAgICAgICAgTE9HLmluZm8oIlVzaW5nIGNvbmZp\nZ3VyYXRpb24gZmlsZSAiICsgY29uZkZpbGUpOwogICAgfQoKICAgIC8qCiAg\nICAgKiBQYXJzZSBjb25zb2xlIGFyZ3MKICAgICAqLwogICAgcHJpdmF0ZSBz\ndGF0aWMgU2VydmVyQ29uZmlndXJhdGlvbiBwYXJzZUFyZ3MoU3RyaW5nW10g\nYXJncykKICAgICAgICAgICAgdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2Vw\ndGlvbiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgQmFzaWNQYXJzZXIg\ncGFyc2VyID0gbmV3IEJhc2ljUGFyc2VyKCk7CiAgICAgICAgICAgIENvbW1h\nbmRMaW5lIGNtZExpbmUgPSBwYXJzZXIucGFyc2Uob3B0cywgYXJncyk7Cgog\nICAgICAgICAgICBpZiAoY21kTGluZS5oYXNPcHRpb24oJ2gnKSkgewogICAg\nICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlv\nbigpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBTZXJ2ZXJDb25maWd1\ncmF0aW9uIGNvbmYgPSBuZXcgU2VydmVyQ29uZmlndXJhdGlvbigpOwogICAg\nICAgICAgICBTdHJpbmdbXSBsZWZ0QXJncyA9IGNtZExpbmUuZ2V0QXJncygp\nOwoKICAgICAgICAgICAgaWYgKGNtZExpbmUuaGFzT3B0aW9uKCdjJykpIHsK\nICAgICAgICAgICAgICAgIGlmIChudWxsICE9IGxlZnRBcmdzICYmIGxlZnRB\ncmdzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBu\nZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCk7CiAgICAgICAgICAgICAg\nICB9CiAgICAgICAgICAgICAgICBTdHJpbmcgY29uZkZpbGUgPSBjbWRMaW5l\nLmdldE9wdGlvblZhbHVlKCJjIik7CiAgICAgICAgICAgICAgICBsb2FkQ29u\nZkZpbGUoY29uZiwgY29uZkZpbGUpOwogICAgICAgICAgICB9CgogICAgICAg\nICAgICBpZiAobnVsbCAhPSBsZWZ0QXJncyAmJiBsZWZ0QXJncy5sZW5ndGgg\nPiAwKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3Vt\nZW50RXhjZXB0aW9uKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0\ndXJuIGNvbmY7CiAgICAgICAgfSBjYXRjaCAoUGFyc2VFeGNlcHRpb24gZSkg\newogICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0\naW9uKGUpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgc3RhdGljIHZv\naWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7CiAgICAgICAgU2VydmVyQ29uZmln\ndXJhdGlvbiBjb25mID0gbnVsbDsKICAgICAgICB0cnkgewogICAgICAgICAg\nICBjb25mID0gcGFyc2VBcmdzKGFyZ3MpOwogICAgICAgIH0gY2F0Y2ggKEls\nbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpYWUpIHsKICAgICAgICAgICAgTE9H\nLmVycm9yKCJFcnJvciBwYXJzaW5nIGNvbW1hbmQgbGluZSBhcmd1bWVudHMg\nOiAiLCBpYWUpOwogICAgICAgICAgICBTeXN0ZW0uZXJyLnByaW50bG4oaWFl\nLmdldE1lc3NhZ2UoKSk7CiAgICAgICAgICAgIHByaW50VXNhZ2UoKTsKICAg\nICAgICAgICAgU3lzdGVtLmV4aXQoRXhpdENvZGUuSU5WQUxJRF9DT05GKTsK\nICAgICAgICB9CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZpbmFsIEF1\ndG9SZWNvdmVyeU1haW4gYXV0b1JlY292ZXJ5TWFpbiA9IG5ldyBBdXRvUmVj\nb3ZlcnlNYWluKGNvbmYpOwogICAgICAgICAgICBhdXRvUmVjb3ZlcnlNYWlu\nLnN0YXJ0KCk7CiAgICAgICAgICAgIFJ1bnRpbWUuZ2V0UnVudGltZSgpLmFk\nZFNodXRkb3duSG9vayhuZXcgVGhyZWFkKCkgewogICAgICAgICAgICAgICAg\nQE92ZXJyaWRlCiAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB7\nCiAgICAgICAgICAgICAgICAgICAgYXV0b1JlY292ZXJ5TWFpbi5zaHV0ZG93\nbigpOwogICAgICAgICAgICAgICAgICAgIExPRy5pbmZvKCJTaHV0ZG93biBB\ndXRvUmVjb3ZlcnlNYWluIHN1Y2Nlc3NmdWxseSIpOwogICAgICAgICAgICAg\nICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgTE9HLmluZm8oIlJl\nZ2lzdGVyIHNodXRkb3duIGhvb2sgc3VjY2Vzc2Z1bGx5Iik7CiAgICAgICAg\nICAgIGF1dG9SZWNvdmVyeU1haW4uam9pbigpOwogICAgICAgICAgICBTeXN0\nZW0uZXhpdChhdXRvUmVjb3ZlcnlNYWluLmdldEV4aXRDb2RlKCkpOwogICAg\nICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIExPRy5l\ncnJvcigiRXhjZXB0aW9uIHJ1bm5pbmcgQXV0b1JlY292ZXJ5TWFpbiA6ICIs\nIGUpOwogICAgICAgICAgICBTeXN0ZW0uZXhpdChFeGl0Q29kZS5TRVJWRVJf\nRVhDRVBUSU9OKTsKICAgICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

