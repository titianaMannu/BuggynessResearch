{"sha":"ffaced963d7d1ffccd5d0e5d4f6f3eb9cfd89b33","node_id":"MDQ6QmxvYjE1NzU5NTY6ZmZhY2VkOTYzZDdkMWZmY2NkNWQwZTVkNGY2ZjNlYjljZmQ4OWIzMw==","size":4710,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/ffaced963d7d1ffccd5d0e5d4f6f3eb9cfd89b33","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIudXRpbDsKCi8qKgogKiBM\naWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFT\nRikgdW5kZXIgb25lCiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBh\nZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQogKiBkaXN0cmlidXRl\nZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbgog\nKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGlj\nZW5zZXMgdGhpcyBmaWxlCiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExp\nY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUKICogIkxpY2Vuc2UiKTsgeW91IG1h\neSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZQogKiB3\naXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRo\nZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcv\nbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5\nIGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0\nd2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0\ncmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJB\nTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJl\nc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3Bl\nY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBs\naW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgppbXBvcnQgamF2\nYS51dGlsLlJhbmRvbTsKaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkV4\nZWN1dG9yU2VydmljZTsKaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkV4\nZWN1dG9yczsKaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LlNjaGVkdWxl\nZEV4ZWN1dG9yU2VydmljZTsKaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50\nLlRpbWVVbml0OwoKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5wcm90\nby5Cb29ra2VlcGVySW50ZXJuYWxDYWxsYmFja3MuR2VuZXJpY0NhbGxiYWNr\nOwoKLyoqCiAqIFRoaXMgY2xhc3MgcHJvdmlkZXMgMiB0aGluZ3Mgb3ZlciB0\naGUgamF2YSB7QGxpbmsgU2NoZWR1bGVkRXhlY3V0b3JTZXJ2aWNlfS4KICoK\nICogMS4gSXQgdGFrZXMge0BsaW5rIFNhZmVSdW5uYWJsZSBvYmplY3RzfSBp\nbnN0ZWFkIG9mIHBsYWluIFJ1bm5hYmxlIG9iamVjdHMuCiAqIFRoaXMgbWVh\nbnMgdGhhdCBleGNlcHRpb25zIGluIHNjaGVkdWxlZCB0YXNrcyB3b250IGdv\nIHVubm90aWNlZCBhbmQgd2lsbCBiZQogKiBsb2dnZWQuCiAqCiAqIDIuIEl0\nIHN1cHBvcnRzIHN1Ym1pdHRpbmcgdGFza3Mgd2l0aCBhbiBvcmRlcmluZyBr\nZXksIHNvIHRoYXQgdGFza3Mgc3VibWl0dGVkCiAqIHdpdGggdGhlIHNhbWUg\na2V5IHdpbGwgYWx3YXlzIGJlIGV4ZWN1dGVkIGluIG9yZGVyLCBidXQgdGFz\na3MgYWNyb3NzCiAqIGRpZmZlcmVudCBrZXlzIGNhbiBiZSB1bm9yZGVyZWQu\nIFRoaXMgcmV0YWlucyBwYXJhbGxlbGlzbSB3aGlsZSByZXRhaW5pbmcgdGhl\nCiAqIGJhc2ljIGFtb3VudCBvZiBvcmRlcmluZyB3ZSB3YW50IChlLmcuICwg\ncGVyIGxlZGdlciBoYW5kbGUpLiBPcmRlcmluZyBpcwogKiBhY2hpZXZlZCBi\neSBoYXNoaW5nIHRoZSBrZXkgb2JqZWN0cyB0byB0aHJlYWRzIGJ5IHRoZWly\nIHtAbGluayAjaGFzaENvZGUoKX0KICogbWV0aG9kLgogKgogKi8KcHVibGlj\nIGNsYXNzIE9yZGVyZWRTYWZlRXhlY3V0b3IgewogICAgRXhlY3V0b3JTZXJ2\naWNlIHRocmVhZHNbXTsKICAgIFJhbmRvbSByYW5kID0gbmV3IFJhbmRvbSgp\nOwoKICAgIHB1YmxpYyBPcmRlcmVkU2FmZUV4ZWN1dG9yKGludCBudW1UaHJl\nYWRzKSB7CiAgICAgICAgaWYgKG51bVRocmVhZHMgPD0gMCkgewogICAgICAg\nICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCk7CiAg\nICAgICAgfQoKICAgICAgICB0aHJlYWRzID0gbmV3IEV4ZWN1dG9yU2Vydmlj\nZVtudW1UaHJlYWRzXTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG51\nbVRocmVhZHM7IGkrKykgewogICAgICAgICAgICB0aHJlYWRzW2ldID0gRXhl\nY3V0b3JzLm5ld1NpbmdsZVRocmVhZEV4ZWN1dG9yKCk7CiAgICAgICAgfQog\nICAgfQoKICAgIEV4ZWN1dG9yU2VydmljZSBjaG9vc2VUaHJlYWQoKSB7CiAg\nICAgICAgLy8gc2tpcCByYW5kb20gIyBnZW5lcmF0aW9uIGluIHRoaXMgc3Bl\nY2lhbCBjYXNlCiAgICAgICAgaWYgKHRocmVhZHMubGVuZ3RoID09IDEpIHsK\nICAgICAgICAgICAgcmV0dXJuIHRocmVhZHNbMF07CiAgICAgICAgfQoKICAg\nICAgICByZXR1cm4gdGhyZWFkc1tyYW5kLm5leHRJbnQodGhyZWFkcy5sZW5n\ndGgpXTsKCiAgICB9CgogICAgRXhlY3V0b3JTZXJ2aWNlIGNob29zZVRocmVh\nZChPYmplY3Qgb3JkZXJpbmdLZXkpIHsKICAgICAgICAvLyBza2lwIGhhc2hj\nb2RlIGdlbmVyYXRpb24gaW4gdGhpcyBzcGVjaWFsIGNhc2UKICAgICAgICBp\nZiAodGhyZWFkcy5sZW5ndGggPT0gMSkgewogICAgICAgICAgICByZXR1cm4g\ndGhyZWFkc1swXTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0aHJlYWRz\nW01hdGhVdGlscy5zaWduU2FmZU1vZChvcmRlcmluZ0tleS5oYXNoQ29kZSgp\nLCB0aHJlYWRzLmxlbmd0aCldOwoKICAgIH0KCiAgICAvKioKICAgICAqIHNj\naGVkdWxlcyBhIG9uZSB0aW1lIGFjdGlvbiB0byBleGVjdXRlCiAgICAgKi8K\nICAgIHB1YmxpYyB2b2lkIHN1Ym1pdChTYWZlUnVubmFibGUgcikgewogICAg\nICAgIGNob29zZVRocmVhZCgpLnN1Ym1pdChyKTsKICAgIH0KCiAgICAvKioK\nICAgICAqIHNjaGVkdWxlcyBhIG9uZSB0aW1lIGFjdGlvbiB0byBleGVjdXRl\nIHdpdGggYW4gb3JkZXJpbmcgZ3VhcmFudGVlIG9uIHRoZSBrZXkKICAgICAq\nIEBwYXJhbSBvcmRlcmluZ0tleQogICAgICogQHBhcmFtIHIKICAgICAqLwog\nICAgcHVibGljIHZvaWQgc3VibWl0T3JkZXJlZChPYmplY3Qgb3JkZXJpbmdL\nZXksIFNhZmVSdW5uYWJsZSByKSB7CiAgICAgICAgY2hvb3NlVGhyZWFkKG9y\nZGVyaW5nS2V5KS5zdWJtaXQocik7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nc2h1dGRvd24oKSB7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCB0aHJl\nYWRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHRocmVhZHNbaV0uc2h1\ndGRvd24oKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4g\nYXdhaXRUZXJtaW5hdGlvbihsb25nIHRpbWVvdXQsIFRpbWVVbml0IHVuaXQp\nIHRocm93cyBJbnRlcnJ1cHRlZEV4Y2VwdGlvbiB7CiAgICAgICAgYm9vbGVh\nbiByZXQgPSB0cnVlOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgdGhy\nZWFkcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICByZXQgPSByZXQgJiYg\ndGhyZWFkc1tpXS5hd2FpdFRlcm1pbmF0aW9uKHRpbWVvdXQsIHVuaXQpOwog\nICAgICAgIH0KICAgICAgICByZXR1cm4gcmV0OwogICAgfQoKICAgIC8qKgog\nICAgICogR2VuZXJpYyBjYWxsYmFjayBpbXBsZW1lbnRhdGlvbiB3aGljaCB3\naWxsIHJ1biB0aGUKICAgICAqIGNhbGxiYWNrIGluIHRoZSB0aHJlYWQgd2hp\nY2ggbWF0Y2hlcyB0aGUgb3JkZXJpbmcga2V5CiAgICAgKi8KICAgIHB1Ymxp\nYyBzdGF0aWMgYWJzdHJhY3QgY2xhc3MgT3JkZXJlZFNhZmVHZW5lcmljQ2Fs\nbGJhY2s8VD4KICAgICAgICAgICAgaW1wbGVtZW50cyBHZW5lcmljQ2FsbGJh\nY2s8VD4gewogICAgICAgIHByaXZhdGUgZmluYWwgT3JkZXJlZFNhZmVFeGVj\ndXRvciBleGVjdXRvcjsKICAgICAgICBwcml2YXRlIGZpbmFsIE9iamVjdCBv\ncmRlcmluZ0tleTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQHBhcmFtIGV4\nZWN1dG9yIFRoZSBleGVjdXRvciBvbiB3aGljaCB0byBydW4gdGhlIGNhbGxi\nYWNrCiAgICAgICAgICogQHBhcmFtIG9yZGVyaW5nS2V5IEtleSB1c2VkIHRv\nIGRlY2lkZSB3aGljaCB0aHJlYWQgdGhlIGNhbGxiYWNrCiAgICAgICAgICog\nICAgICAgICAgICAgICAgICAgIHNob3VsZCBydW4gb24uCiAgICAgICAgICov\nCiAgICAgICAgcHVibGljIE9yZGVyZWRTYWZlR2VuZXJpY0NhbGxiYWNrKE9y\nZGVyZWRTYWZlRXhlY3V0b3IgZXhlY3V0b3IsIE9iamVjdCBvcmRlcmluZ0tl\neSkgewogICAgICAgICAgICB0aGlzLmV4ZWN1dG9yID0gZXhlY3V0b3I7CiAg\nICAgICAgICAgIHRoaXMub3JkZXJpbmdLZXkgPSBvcmRlcmluZ0tleTsKICAg\nICAgICB9CgogICAgICAgIEBPdmVycmlkZQogICAgICAgIHB1YmxpYyBmaW5h\nbCB2b2lkIG9wZXJhdGlvbkNvbXBsZXRlKGZpbmFsIGludCByYywgZmluYWwg\nVCByZXN1bHQpIHsKICAgICAgICAgICAgZXhlY3V0b3Iuc3VibWl0T3JkZXJl\nZChvcmRlcmluZ0tleSwgbmV3IFNhZmVSdW5uYWJsZSgpIHsKICAgICAgICAg\nICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgICAgICBwdWJs\naWMgdm9pZCBzYWZlUnVuKCkgewogICAgICAgICAgICAgICAgICAgICAgICBz\nYWZlT3BlcmF0aW9uQ29tcGxldGUocmMsIHJlc3VsdCk7CiAgICAgICAgICAg\nICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAg\nICAgICBwdWJsaWMgYWJzdHJhY3Qgdm9pZCBzYWZlT3BlcmF0aW9uQ29tcGxl\ndGUoaW50IHJjLCBUIHJlc3VsdCk7CiAgICB9Cn0K\n","encoding":"base64"}

