{"sha":"4f3bdb4d93171176947c29553bafdd4095f4ab59","node_id":"MDQ6QmxvYjE1NzU5NTY6NGYzYmRiNGQ5MzE3MTE3Njk0N2MyOTU1M2JhZmRkNDA5NWY0YWI1OQ==","size":5459,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/4f3bdb4d93171176947c29553bafdd4095f4ab59","content":"LyoKICoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9y\nIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBU\naGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhl\nIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNl\nIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBs\naWFuY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEg\nY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBl\naXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZv\nciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Np\nb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICoK\nICovCnBhY2thZ2Ugb3JnLmFwYWNoZS5ib29ra2VlcGVyLnV0aWw7CgppbXBv\ncnQgamF2YS5sYW5nLnJlZmxlY3QuQ29uc3RydWN0b3I7CmltcG9ydCBqYXZh\nLnV0aWwuTWFwOwppbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuQ29uY3Vy\ncmVudEhhc2hNYXA7CgppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvbmZp\nZ3VyYXRpb24uQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuY29t\nbW9ucy5jb25maWd1cmF0aW9uLkNvbmZpZ3VyYXRpb25FeGNlcHRpb247Cgov\nKioKICogR2VuZXJhbCBDbGFzcyBSZWZsZWN0aW9uIFV0aWxzCiAqLwpwdWJs\naWMgY2xhc3MgUmVmbGVjdGlvblV0aWxzIHsKCiAgICBwcml2YXRlIHN0YXRp\nYyBmaW5hbCBNYXA8Q2xhc3M8Pz4sIENvbnN0cnVjdG9yPD8+PiBjb25zdHJ1\nY3RvckNhY2hlID0KICAgICAgICAgICAgbmV3IENvbmN1cnJlbnRIYXNoTWFw\nPENsYXNzPD8+LCBDb25zdHJ1Y3Rvcjw/Pj4oKTsKCiAgICAvKioKICAgICAq\nIEdldCB0aGUgdmFsdWUgb2YgdGhlIDxjb2RlPm5hbWU8L2NvZGU+IHByb3Bl\ncnR5IGFzIGEgPGNvZGU+Q2xhc3M8L2NvZGU+LgogICAgICogSWYgbm8gc3Vj\naCBwcm9wZXJ0eSBpcyBzcGVjaWZpZWQsIHRoZW4gPGNvZGU+ZGVmYXVsdENs\nczwvY29kZT4gaXMgcmV0dXJuZWQuCiAgICAgKgogICAgICogQHBhcmFtIGNv\nbmYKICAgICAqICAgICAgICAgIENvbmZpZ3VyYXRpb24gT2JqZWN0LgogICAg\nICogQHBhcmFtIG5hbWUKICAgICAqICAgICAgICAgIENsYXNzIFByb3BlcnR5\nIE5hbWUuCiAgICAgKiBAcGFyYW0gZGVmYXVsdENscwogICAgICogICAgICAg\nICAgRGVmYXVsdCBDbGFzcyB0byBiZSByZXR1cm5lZC4KICAgICAqIEBwYXJh\nbSBjbGFzc0xvYWRlcgogICAgICogICAgICAgICAgQ2xhc3MgTG9hZGVyIHRv\nIGxvYWQgY2xhc3MuCiAgICAgKiBAcmV0dXJuIHByb3BlcnR5IHZhbHVlIGFz\nIGEgPGNvZGU+Q2xhc3M8L2NvZGU+LCBvciA8Y29kZT5kZWZhdWx0Q2xzPC9j\nb2RlPi4KICAgICAqIEB0aHJvd3MgQ29uZmlndXJhdGlvbkV4Y2VwdGlvbgog\nICAgICovCiAgICBwdWJsaWMgc3RhdGljIENsYXNzPD8+IGdldENsYXNzKENv\nbmZpZ3VyYXRpb24gY29uZiwgU3RyaW5nIG5hbWUsCiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIENsYXNzPD8+IGRlZmF1bHRDbHMsIENs\nYXNzTG9hZGVyIGNsYXNzTG9hZGVyKQogICAgICAgICAgICB0aHJvd3MgQ29u\nZmlndXJhdGlvbkV4Y2VwdGlvbiB7CiAgICAgICAgU3RyaW5nIHZhbHVlU3Ry\nID0gY29uZi5nZXRTdHJpbmcobmFtZSk7CiAgICAgICAgaWYgKG51bGwgPT0g\ndmFsdWVTdHIpIHsKICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRDbHM7CiAg\nICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBDbGFz\ncy5mb3JOYW1lKHZhbHVlU3RyLCB0cnVlLCBjbGFzc0xvYWRlcik7CiAgICAg\nICAgfSBjYXRjaCAoQ2xhc3NOb3RGb3VuZEV4Y2VwdGlvbiBjbmZlKSB7CiAg\nICAgICAgICAgIHRocm93IG5ldyBDb25maWd1cmF0aW9uRXhjZXB0aW9uKGNu\nZmUpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUg\ndmFsdWUgb2YgdGhlIDxjb2RlPm5hbWU8L2NvZGU+IHByb3BlcnR5IGFzIGEg\nPGNvZGU+Q2xhc3M8L2NvZGU+IGltcGxlbWVudGluZwogICAgICogdGhlIGlu\ndGVyZmFjZSBzcGVjaWZpZWQgYnkgPGNvZGU+eGZhY2U8L2NvZGU+LgogICAg\nICoKICAgICAqIElmIG5vIHN1Y2ggcHJvcGVydHkgaXMgc3BlY2lmaWVkLCB0\naGVuIDxjb2RlPmRlZmF1bHRWYWx1ZTwvY29kZT4gaXMgcmV0dXJuZWQuCiAg\nICAgKgogICAgICogQW4gZXhjZXB0aW9uIGlzIHRocm93biBpZiB0aGUgcmV0\ndXJuZWQgY2xhc3MgZG9lcyBub3QgaW1wbGVtZW50IHRoZSBuYW1lZCBpbnRl\ncmZhY2UuCiAgICAgKgogICAgICogQHBhcmFtIGNvbmYKICAgICAqICAgICAg\nICAgIENvbmZpZ3VyYXRpb24gT2JqZWN0LgogICAgICogQHBhcmFtIG5hbWUK\nICAgICAqICAgICAgICAgIENsYXNzIFByb3BlcnR5IE5hbWUuCiAgICAgKiBA\ncGFyYW0gZGVmYXVsdFZhbHVlCiAgICAgKiAgICAgICAgICBEZWZhdWx0IENs\nYXNzIHRvIGJlIHJldHVybmVkLgogICAgICogQHBhcmFtIHhmYWNlCiAgICAg\nKiAgICAgICAgICBUaGUgaW50ZXJmYWNlIGltcGxlbWVudGVkIGJ5IHRoZSBu\nYW1lZCBjbGFzcy4KICAgICAqIEBwYXJhbSBjbGFzc0xvYWRlcgogICAgICog\nICAgICAgICAgQ2xhc3MgTG9hZGVyIHRvIGxvYWQgY2xhc3MuCiAgICAgKiBA\ncmV0dXJuIHByb3BlcnR5IHZhbHVlIGFzIGEgPGNvZGU+Q2xhc3M8L2NvZGU+\nLCBvciA8Y29kZT5kZWZhdWx0VmFsdWU8L2NvZGU+LgogICAgICogQHRocm93\ncyBDb25maWd1cmF0aW9uRXhjZXB0aW9uCiAgICAgKi8KICAgIHB1YmxpYyBz\ndGF0aWMgPFU+IENsYXNzPD8gZXh0ZW5kcyBVPiBnZXRDbGFzcyhDb25maWd1\ncmF0aW9uIGNvbmYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgU3RyaW5nIG5hbWUsIENsYXNzPD8gZXh0ZW5k\ncyBVPiBkZWZhdWx0VmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgQ2xhc3M8VT4geGZhY2UsIENsYXNz\nTG9hZGVyIGNsYXNzTG9hZGVyKQogICAgICAgIHRocm93cyBDb25maWd1cmF0\naW9uRXhjZXB0aW9uIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBDbGFz\nczw/PiB0aGVDbHMgPSBnZXRDbGFzcyhjb25mLCBuYW1lLCBkZWZhdWx0VmFs\ndWUsIGNsYXNzTG9hZGVyKTsKICAgICAgICAgICAgaWYgKG51bGwgIT0gdGhl\nQ2xzICYmICF4ZmFjZS5pc0Fzc2lnbmFibGVGcm9tKHRoZUNscykpIHsKICAg\nICAgICAgICAgICAgIHRocm93IG5ldyBDb25maWd1cmF0aW9uRXhjZXB0aW9u\nKHRoZUNscyArICIgbm90ICIgKyB4ZmFjZS5nZXROYW1lKCkpOwogICAgICAg\nICAgICB9IGVsc2UgaWYgKG51bGwgIT0gdGhlQ2xzKSB7CiAgICAgICAgICAg\nICAgICByZXR1cm4gdGhlQ2xzLmFzU3ViY2xhc3MoeGZhY2UpOwogICAgICAg\nICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAg\nICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewog\nICAgICAgICAgICB0aHJvdyBuZXcgQ29uZmlndXJhdGlvbkV4Y2VwdGlvbihl\nKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYW4g\nb2JqZWN0IGZvciB0aGUgZ2l2ZW4gY2xhc3MuCiAgICAgKgogICAgICogQHBh\ncmFtIHRoZUNscwogICAgICogICAgICAgICAgY2xhc3Mgb2Ygd2hpY2ggYW4g\nb2JqZWN0IGlzIGNyZWF0ZWQuCiAgICAgKiBAcmV0dXJuIGEgbmV3IG9iamVj\ndAogICAgICovCiAgICBAU3VwcHJlc3NXYXJuaW5ncygidW5jaGVja2VkIikK\nICAgIHB1YmxpYyBzdGF0aWMgPFQ+IFQgbmV3SW5zdGFuY2UoQ2xhc3M8VD4g\ndGhlQ2xzKSB7CiAgICAgICAgVCByZXN1bHQ7CiAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgQ29uc3RydWN0b3I8VD4gbWV0aCA9IChDb25zdHJ1Y3RvcjxU\nPikgY29uc3RydWN0b3JDYWNoZS5nZXQodGhlQ2xzKTsKICAgICAgICAgICAg\naWYgKG51bGwgPT0gbWV0aCkgewogICAgICAgICAgICAgICAgbWV0aCA9IHRo\nZUNscy5nZXREZWNsYXJlZENvbnN0cnVjdG9yKCk7CiAgICAgICAgICAgICAg\nICBtZXRoLnNldEFjY2Vzc2libGUodHJ1ZSk7CiAgICAgICAgICAgICAgICBj\nb25zdHJ1Y3RvckNhY2hlLnB1dCh0aGVDbHMsIG1ldGgpOwogICAgICAgICAg\nICB9CiAgICAgICAgICAgIHJlc3VsdCA9IG1ldGgubmV3SW5zdGFuY2UoKTsK\nICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICB0\naHJvdyBuZXcgUnVudGltZUV4Y2VwdGlvbihlKTsKICAgICAgICB9CiAgICAg\nICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0\nZSBhbiBvYmplY3QgdXNpbmcgdGhlIGdpdmVuIGNsYXNzIG5hbWUuCiAgICAg\nKgogICAgICogQHBhcmFtIGNsc05hbWUKICAgICAqICAgICAgICAgIGNsYXNz\nIG5hbWUgb2Ygd2hpY2ggYW4gb2JqZWN0IGlzIGNyZWF0ZWQuCiAgICAgKiBA\ncGFyYW0geGZhY2UKICAgICAqICAgICAgICAgIFRoZSBpbnRlcmZhY2UgaW1w\nbGVtZW50ZWQgYnkgdGhlIG5hbWVkIGNsYXNzLgogICAgICogQHJldHVybiBh\nIG5ldyBvYmplY3QKICAgICAqLwogICAgQFN1cHByZXNzV2FybmluZ3MoInVu\nY2hlY2tlZCIpCiAgICBwdWJsaWMgc3RhdGljIDxUPiBUIG5ld0luc3RhbmNl\nKFN0cmluZyBjbHNOYW1lLCBDbGFzczxUPiB4ZmFjZSkgewogICAgICAgIENs\nYXNzPD8+IHRoZUNsczsKICAgICAgICB0cnkgewogICAgICAgICAgICB0aGVD\nbHMgPSBDbGFzcy5mb3JOYW1lKGNsc05hbWUpOwogICAgICAgIH0gY2F0Y2gg\nKENsYXNzTm90Rm91bmRFeGNlcHRpb24gY25mZSkgewogICAgICAgICAgICB0\naHJvdyBuZXcgUnVudGltZUV4Y2VwdGlvbihjbmZlKTsKICAgICAgICB9CiAg\nICAgICAgaWYgKCF4ZmFjZS5pc0Fzc2lnbmFibGVGcm9tKHRoZUNscykpIHsK\nICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oY2xzTmFt\nZSArICIgbm90ICIgKyB4ZmFjZS5nZXROYW1lKCkpOwogICAgICAgIH0KICAg\nICAgICByZXR1cm4gbmV3SW5zdGFuY2UodGhlQ2xzLmFzU3ViY2xhc3MoeGZh\nY2UpKTsKICAgIH0KfQo=\n","encoding":"base64"}

