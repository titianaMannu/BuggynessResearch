{"sha":"a665476b89ef74341c36892b02ad7eca5d4a6b65","node_id":"MDQ6QmxvYjE1NzU5NTY6YTY2NTQ3NmI4OWVmNzQzNDFjMzY4OTJiMDJhZDdlY2E1ZDRhNmI2NQ==","size":4052,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/a665476b89ef74341c36892b02ad7eca5d4a6b65","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIudXRpbDsKCi8qKgogKiBM\naWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFT\nRikgdW5kZXIgb25lCiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBh\nZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQogKiBkaXN0cmlidXRl\nZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbgog\nKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGlj\nZW5zZXMgdGhpcyBmaWxlCiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExp\nY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUKICogIkxpY2Vuc2UiKTsgeW91IG1h\neSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZQogKiB3\naXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRo\nZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcv\nbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5\nIGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0\nd2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0\ncmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJB\nTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJl\nc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3Bl\nY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBs\naW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgppbXBvcnQgamF2\nYS51dGlsLmNvbmN1cnJlbnQuQ29uY3VycmVudFNraXBMaXN0TWFwOwppbXBv\ncnQgamF2YS51dGlsLmNvbmN1cnJlbnQuQ29uY3VycmVudEhhc2hNYXA7Cgpp\nbXBvcnQgamF2YS51dGlsLk1hcDsKaW1wb3J0IGphdmEudXRpbC5OYXZpZ2Fi\nbGVNYXA7CmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5sb2Nrcy5SZWVu\ndHJhbnRSZWFkV3JpdGVMb2NrOwoKLyoqCiAqIEEgc25hcHNob3RhYmxlIG1h\ncC4KICovCnB1YmxpYyBjbGFzcyBTbmFwc2hvdE1hcDxLLCBWPiB7CiAgICAv\nLyBzdG9yZXMgcmVjZW50IHVwZGF0ZXMKICAgIHZvbGF0aWxlIE1hcDxLLCBW\nPiB1cGRhdGVzOwogICAgdm9sYXRpbGUgTWFwPEssIFY+IHVwZGF0ZXNUb01l\ncmdlOwogICAgLy8gbWFwIHN0b3JlcyBhbGwgc25hcHNob3QgZGF0YQogICAg\ndm9sYXRpbGUgTmF2aWdhYmxlTWFwPEssIFY+IHNuYXBzaG90OwoKICAgIGZp\nbmFsIFJlZW50cmFudFJlYWRXcml0ZUxvY2sgbG9jayA9IG5ldyBSZWVudHJh\nbnRSZWFkV3JpdGVMb2NrKCk7CgogICAgcHVibGljIFNuYXBzaG90TWFwKCkg\newogICAgICAgIHVwZGF0ZXMgPSBuZXcgQ29uY3VycmVudEhhc2hNYXA8Sywg\nVj4oKTsKICAgICAgICB1cGRhdGVzVG9NZXJnZSA9IG5ldyBDb25jdXJyZW50\nSGFzaE1hcDxLLCBWPigpOwogICAgICAgIHNuYXBzaG90ID0gbmV3IENvbmN1\ncnJlbnRTa2lwTGlzdE1hcDxLLCBWPigpOwogICAgfQoKICAgIC8qKgogICAg\nICogQ3JlYXRlIGEgc25hcHNob3Qgb2YgY3VycmVudCBtYXAuCiAgICAgKgog\nICAgICogQHJldHVybiBhIHNuYXBzaG90IG9mIGN1cnJlbnQgbWFwLgogICAg\nICovCiAgICBwdWJsaWMgTmF2aWdhYmxlTWFwPEssIFY+IHNuYXBzaG90KCkg\newogICAgICAgIHRoaXMubG9jay53cml0ZUxvY2soKS5sb2NrKCk7CiAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgaWYgKHVwZGF0ZXMuaXNFbXB0eSgpKSB7\nCiAgICAgICAgICAgICAgICByZXR1cm4gc25hcHNob3Q7CiAgICAgICAgICAg\nIH0KICAgICAgICAgICAgLy8gcHV0IHVwZGF0ZXMgZm9yIG1lcmdlIHRvIHNu\nYXBzaG90CiAgICAgICAgICAgIHVwZGF0ZXNUb01lcmdlID0gdXBkYXRlczsK\nICAgICAgICAgICAgdXBkYXRlcyA9IG5ldyBDb25jdXJyZW50SGFzaE1hcDxL\nLCBWPigpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIHRoaXMu\nbG9jay53cml0ZUxvY2soKS51bmxvY2soKTsKICAgICAgICB9CiAgICAgICAg\nLy8gbWVyZ2luZyB0aGUgdXBkYXRlcyB0byBzbmFwc2hvdAogICAgICAgIGZv\nciAoTWFwLkVudHJ5PEssIFY+IGVudHJ5IDogdXBkYXRlc1RvTWVyZ2UuZW50\ncnlTZXQoKSkgewogICAgICAgICAgICBzbmFwc2hvdC5wdXQoZW50cnkuZ2V0\nS2V5KCksIGVudHJ5LmdldFZhbHVlKCkpOwogICAgICAgIH0KICAgICAgICAv\nLyBjbGVhciB1cGRhdGVzVG9NZXJnZQogICAgICAgIHRoaXMubG9jay53cml0\nZUxvY2soKS5sb2NrKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdXBk\nYXRlc1RvTWVyZ2UgPSBuZXcgQ29uY3VycmVudEhhc2hNYXA8SywgVj4oKTsK\nICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICB0aGlzLmxvY2sud3Jp\ndGVMb2NrKCkudW5sb2NrKCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBz\nbmFwc2hvdDsKICAgIH0KCiAgICAvKioKICAgICAqIEFzc29jaWF0ZXMgdGhl\nIHNwZWNpZmllZCB2YWx1ZSB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IGluIHRo\naXMgbWFwLgogICAgICoKICAgICAqIEBwYXJhbSBrZXkKICAgICAqICAgICAg\nICAgIEtleSB3aXRoIHdoaWNoIHRoZSBzcGVjaWZpZWQgdmFsdWUgaXMgdG8g\nYmUgYXNzb2NpYXRlZC4KICAgICAqIEBwYXJhbSB2YWx1ZQogICAgICogICAg\nICAgICAgVmFsdWUgdG8gYmUgYXNzb2NpYXRlZCB3aXRoIHRoZSBzcGVjaWZp\nZWQga2V5LgogICAgICovCiAgICBwdWJsaWMgdm9pZCBwdXQoSyBrZXksIFYg\ndmFsdWUpIHsKICAgICAgICB0aGlzLmxvY2sucmVhZExvY2soKS5sb2NrKCk7\nCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdXBkYXRlcy5wdXQoa2V5LCB2\nYWx1ZSk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgdGhpcy5s\nb2NrLnJlYWRMb2NrKCkudW5sb2NrKCk7CiAgICAgICAgfQoKICAgIH0KCiAg\nICAvKioKICAgICAqIFJlbW92ZXMgdGhlIG1hcHBpbmcgZm9yIHRoZSBrZXkg\nZnJvbSB0aGlzIG1hcCBpZiBpdCBpcyBwcmVzZW50LgogICAgICoKICAgICAq\nIEBwYXJhbSBrZXkKICAgICAqICAgICAgICAgIEtleSB3aG9zZSBtYXBwaW5n\nIGlzIHRvIGJlIHJlbW92ZWQgZnJvbSB0aGlzIG1hcC4KICAgICAqLwogICAg\ncHVibGljIHZvaWQgcmVtb3ZlKEsga2V5KSB7CiAgICAgICAgdGhpcy5sb2Nr\nLnJlYWRMb2NrKCkubG9jaygpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAg\nIC8vIGZpcnN0IHJlbW92ZSB1cGRhdGVzCiAgICAgICAgICAgIHVwZGF0ZXMu\ncmVtb3ZlKGtleSk7CiAgICAgICAgICAgIHVwZGF0ZXNUb01lcmdlLnJlbW92\nZShrZXkpOwogICAgICAgICAgICAvLyB0aGVuIHJlbW92ZSBzbmFwc2hvdAog\nICAgICAgICAgICBzbmFwc2hvdC5yZW1vdmUoa2V5KTsKICAgICAgICB9IGZp\nbmFsbHkgewogICAgICAgICAgICB0aGlzLmxvY2sucmVhZExvY2soKS51bmxv\nY2soKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5z\nIHRydWUgaWYgdGhpcyBtYXAgY29udGFpbnMgYSBtYXBwaW5nIGZvciB0aGUg\nc3BlY2lmaWVkIGtleS4KICAgICAqCiAgICAgKiBAcGFyYW0ga2V5CiAgICAg\nKiAgICAgICAgICBLZXkgd2hvc2UgcHJlc2VuY2UgaXMgaW4gdGhlIG1hcCB0\nbyBiZSB0ZXN0ZWQuCiAgICAgKiBAcmV0dXJuIHRydWUgaWYgdGhlIG1hcCBj\nb250YWlucyBhIG1hcHBpbmcgZm9yIHRoZSBzcGVjaWZpZWQga2V5LgogICAg\nICovCiAgICBwdWJsaWMgYm9vbGVhbiBjb250YWluc0tleShLIGtleSkgewog\nICAgICAgIHRoaXMubG9jay5yZWFkTG9jaygpLmxvY2soKTsKICAgICAgICB0\ncnkgewogICAgICAgICAgICByZXR1cm4gdXBkYXRlcy5jb250YWluc0tleShr\nZXkpCiAgICAgICAgICAgICAgICAgfCB1cGRhdGVzVG9NZXJnZS5jb250YWlu\nc0tleShrZXkpCiAgICAgICAgICAgICAgICAgfCBzbmFwc2hvdC5jb250YWlu\nc0tleShrZXkpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIHRo\naXMubG9jay5yZWFkTG9jaygpLnVubG9jaygpOwogICAgICAgIH0KICAgIH0K\nfQo=\n","encoding":"base64"}

