{"sha":"fcc6d90524e7a2a9f02487f2dc78f375af72df8f","node_id":"MDQ6QmxvYjE1NzU5NTY6ZmNjNmQ5MDUyNGU3YTJhOWYwMjQ4N2YyZGM3OGYzNzVhZjcyZGY4Zg==","size":6064,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/fcc6d90524e7a2a9f02487f2dc78f375af72df8f","content":"LyoqCiAqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91\nbmRhdGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRv\nciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAq\nIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGlu\nZm9ybWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRo\nZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5z\nZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21w\nbGlhbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBh\nIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICBodHRwOi8vd3d3LmFw\nYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJl\ncXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0\naW5nLAogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5z\nZSBpcyBkaXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRI\nT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwg\nZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBm\nb3IgdGhlCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNz\naW9ucyBhbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAq\nCiAqLwoKcGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIubWV0YTsKCmlt\ncG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uOwppbXBvcnQgamF2YS5sYW5nLnJl\nZmxlY3QuRmllbGQ7CgppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNv\nbmYuQ2xpZW50Q29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuem9v\na2VlcGVyLkNyZWF0ZU1vZGU7CmltcG9ydCBvcmcuYXBhY2hlLnpvb2tlZXBl\nci5ab29EZWZzLklkczsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci50\nZXN0LkJvb2tLZWVwZXJDbHVzdGVyVGVzdENhc2U7CmltcG9ydCBvcmcuYXBh\nY2hlLmJvb2trZWVwZXIudXRpbC5Cb29rS2VlcGVyQ29uc3RhbnRzOwppbXBv\ncnQgb3JnLmp1bml0LlRlc3Q7CgpwdWJsaWMgY2xhc3MgTGVkZ2VyTGF5b3V0\nVGVzdCBleHRlbmRzIEJvb2tLZWVwZXJDbHVzdGVyVGVzdENhc2UgewoKICAg\nIHB1YmxpYyBMZWRnZXJMYXlvdXRUZXN0KCkgewogICAgICAgIHN1cGVyKDAp\nOwogICAgfQoKICAgIEBUZXN0KHRpbWVvdXQ9NjAwMDApCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0TGVkZ2VyTGF5b3V0KCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAg\nICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbiBjb25mID0gbmV3IENsaWVudENv\nbmZpZ3VyYXRpb24oKTsKICAgICAgICBjb25mLnNldExlZGdlck1hbmFnZXJG\nYWN0b3J5Q2xhc3MoSGllcmFyY2hpY2FsTGVkZ2VyTWFuYWdlckZhY3Rvcnku\nY2xhc3MpOwogICAgICAgIFN0cmluZyBsZWRnZXJSb290UGF0aCA9ICIvdGVz\ndExlZGdlckxheW91dCI7CgogICAgICAgIHprYy5jcmVhdGUobGVkZ2VyUm9v\ndFBhdGgsIG5ldyBieXRlWzBdLCAKICAgICAgICAgICAgICAgICAgIElkcy5P\nUEVOX0FDTF9VTlNBRkUsIENyZWF0ZU1vZGUuUEVSU0lTVEVOVCk7CgogICAg\nICAgIExlZGdlckxheW91dCBsYXlvdXQgPSBMZWRnZXJMYXlvdXQucmVhZExh\neW91dCh6a2MsIGxlZGdlclJvb3RQYXRoKTsKICAgICAgICBhc3NlcnRUcnVl\nKCJMYXlvdXQgc2hvdWxkIGJlIG51bGwiLCBsYXlvdXQgPT0gbnVsbCk7Cgog\nICAgICAgIFN0cmluZyB0ZXN0TmFtZSA9ICJmb29iYXIiOwogICAgICAgIGlu\ndCB0ZXN0VmVyc2lvbiA9IDB4ZGVhZGJlZWY7CiAgICAgICAgLy8gdXNlIGxh\neW91dCBkZWZpbmVkIGluIGNvbmZpZ3VyYXRpb24gYWxzbyBjcmVhdGUgaXQg\naW4gem9va2VlcGVyCiAgICAgICAgTGVkZ2VyTGF5b3V0IGxheW91dDIgPSBu\nZXcgTGVkZ2VyTGF5b3V0KHRlc3ROYW1lLCB0ZXN0VmVyc2lvbik7CiAgICAg\nICAgbGF5b3V0Mi5zdG9yZSh6a2MsIGxlZGdlclJvb3RQYXRoKTsKCiAgICAg\nICAgbGF5b3V0ID0gTGVkZ2VyTGF5b3V0LnJlYWRMYXlvdXQoemtjLCBsZWRn\nZXJSb290UGF0aCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKHRlc3ROYW1lLCBs\nYXlvdXQuZ2V0TWFuYWdlclR5cGUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKHRlc3RWZXJzaW9uLCBsYXlvdXQuZ2V0TWFuYWdlclZlcnNpb24oKSk7CiAg\nICB9CgogICAgcHJpdmF0ZSB2b2lkIHdyaXRlTGVkZ2VyTGF5b3V0KAogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGxlZGdlcnNS\nb290UGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0\ncmluZyBtYW5hZ2VyVHlwZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIGludCBtYW5hZ2VyVmVyc2lvbiwgaW50IGxheW91dFZlcnNpb24p\nCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgTGVkZ2VyTGF5\nb3V0IGxheW91dCA9IG5ldyBMZWRnZXJMYXlvdXQobWFuYWdlclR5cGUsIG1h\nbmFnZXJWZXJzaW9uKTsKCiAgICAgICAgRmllbGQgZiA9IExlZGdlckxheW91\ndC5jbGFzcy5nZXREZWNsYXJlZEZpZWxkKCJsYXlvdXRGb3JtYXRWZXJzaW9u\nIik7CiAgICAgICAgZi5zZXRBY2Nlc3NpYmxlKHRydWUpOwogICAgICAgIGYu\nc2V0KGxheW91dCwgbGF5b3V0VmVyc2lvbik7CgogICAgICAgIGxheW91dC5z\ndG9yZSh6a2MsIGxlZGdlcnNSb290UGF0aCk7CiAgICB9CgogICAgQFRlc3Qo\ndGltZW91dD02MDAwMCkKICAgIHB1YmxpYyB2b2lkIHRlc3RCYWRWZXJzaW9u\nTGVkZ2VyTGF5b3V0KCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgQ2xp\nZW50Q29uZmlndXJhdGlvbiBjb25mID0gbmV3IENsaWVudENvbmZpZ3VyYXRp\nb24oKTsKICAgICAgICAvLyB3cml0ZSBiYWQgdmVyc2lvbiBsZWRnZXIgbGF5\nb3V0CiAgICAgICAgd3JpdGVMZWRnZXJMYXlvdXQoY29uZi5nZXRaa0xlZGdl\ncnNSb290UGF0aCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgIEZsYXRM\nZWRnZXJNYW5hZ2VyRmFjdG9yeS5jbGFzcy5nZXROYW1lKCksCiAgICAgICAg\nICAgICAgICAgICAgICAgICAgRmxhdExlZGdlck1hbmFnZXJGYWN0b3J5LkNV\nUl9WRVJTSU9OLAogICAgICAgICAgICAgICAgICAgICAgICAgIExlZGdlckxh\neW91dC5MQVlPVVRfRk9STUFUX1ZFUlNJT04gKyAxKTsKICAgICAgICAKICAg\nICAgICB0cnkgewogICAgICAgICAgICBMZWRnZXJMYXlvdXQucmVhZExheW91\ndCh6a2MsIGNvbmYuZ2V0WmtMZWRnZXJzUm9vdFBhdGgoKSk7CiAgICAgICAg\nICAgIGZhaWwoIlNob3VsZG4ndCByZWFjaCBoZXJlISIpOwogICAgICAgIH0g\nY2F0Y2ggKElPRXhjZXB0aW9uIGllKSB7CiAgICAgICAgICAgIGFzc2VydFRy\ndWUoIkludmFsaWQgZXhjZXB0aW9uIiwgaWUuZ2V0TWVzc2FnZSgpLmNvbnRh\naW5zKCJ2ZXJzaW9uIG5vdCBjb21wYXRpYmxlIikpOwogICAgICAgIH0KICAg\nIH0KCiAgICBAVGVzdCh0aW1lb3V0PTYwMDAwKQogICAgcHVibGljIHZvaWQg\ndGVzdEFic2VudExlZGdlck1hbmFnZXJMYXlvdXQoKSB0aHJvd3MgRXhjZXB0\naW9uIHsKICAgICAgICBDbGllbnRDb25maWd1cmF0aW9uIGNvbmYgPSBuZXcg\nQ2xpZW50Q29uZmlndXJhdGlvbigpOwogICAgICAgIFN0cmluZyBsZWRnZXJz\nTGF5b3V0ID0gY29uZi5nZXRaa0xlZGdlcnNSb290UGF0aCgpICsgIi8iCiAg\nICAgICAgICAgICAgICArIEJvb2tLZWVwZXJDb25zdGFudHMuTEFZT1VUX1pO\nT0RFOwogICAgICAgIC8vIHdyaXRlIGJhZCBmb3JtYXQgbGVkZ2VyIGxheW91\ndAogICAgICAgIFN0cmluZ0J1aWxkZXIgc2IgPSBuZXcgU3RyaW5nQnVpbGRl\ncigpOwogICAgICAgIHNiLmFwcGVuZChMZWRnZXJMYXlvdXQuTEFZT1VUX0ZP\nUk1BVF9WRVJTSU9OKS5hcHBlbmQoIlxuIik7CiAgICAgICAgemtjLmNyZWF0\nZShsZWRnZXJzTGF5b3V0LCBzYi50b1N0cmluZygpLmdldEJ5dGVzKCksCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElkcy5PUEVOX0FDTF9V\nTlNBRkUsIENyZWF0ZU1vZGUuUEVSU0lTVEVOVCk7CgogICAgICAgIHRyeSB7\nCiAgICAgICAgICAgIExlZGdlckxheW91dC5yZWFkTGF5b3V0KHprYywgY29u\nZi5nZXRaa0xlZGdlcnNSb290UGF0aCgpKTsKICAgICAgICAgICAgZmFpbCgi\nU2hvdWxkbid0IHJlYWNoIGhlcmUhIik7CiAgICAgICAgfSBjYXRjaCAoSU9F\neGNlcHRpb24gaWUpIHsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgiSW52YWxp\nZCBleGNlcHRpb24iLCBpZS5nZXRNZXNzYWdlKCkuY29udGFpbnMoInZlcnNp\nb24gYWJzZW50IGZyb20iKSk7CiAgICAgICAgfQogICAgfQoKICAgIEBUZXN0\nKHRpbWVvdXQ9NjAwMDApCiAgICBwdWJsaWMgdm9pZCB0ZXN0QmFzZUxlZGdl\nck1hbmFnZXJMYXlvdXQoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBD\nbGllbnRDb25maWd1cmF0aW9uIGNvbmYgPSBuZXcgQ2xpZW50Q29uZmlndXJh\ndGlvbigpOwogICAgICAgIFN0cmluZyByb290UGF0aCA9IGNvbmYuZ2V0WmtM\nZWRnZXJzUm9vdFBhdGgoKTsKICAgICAgICBTdHJpbmcgbGVkZ2Vyc0xheW91\ndCA9IHJvb3RQYXRoICsgIi8iCiAgICAgICAgICAgICAgICArIEJvb2tLZWVw\nZXJDb25zdGFudHMuTEFZT1VUX1pOT0RFOwogICAgICAgIC8vIHdyaXRlIGJh\nZCBmb3JtYXQgbGVkZ2VyIGxheW91dAogICAgICAgIFN0cmluZ0J1aWxkZXIg\nc2IgPSBuZXcgU3RyaW5nQnVpbGRlcigpOwogICAgICAgIHNiLmFwcGVuZChM\nZWRnZXJMYXlvdXQuTEFZT1VUX0ZPUk1BVF9WRVJTSU9OKS5hcHBlbmQoIlxu\nIikKICAgICAgICAgIC5hcHBlbmQoRmxhdExlZGdlck1hbmFnZXJGYWN0b3J5\nLmNsYXNzLmdldE5hbWUoKSk7CiAgICAgICAgemtjLmNyZWF0ZShsZWRnZXJz\nTGF5b3V0LCBzYi50b1N0cmluZygpLmdldEJ5dGVzKCksCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIElkcy5PUEVOX0FDTF9VTlNBRkUsIENy\nZWF0ZU1vZGUuUEVSU0lTVEVOVCk7CgogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIExlZGdlckxheW91dC5yZWFkTGF5b3V0KHprYywgcm9vdFBhdGgpOwog\nICAgICAgICAgICBmYWlsKCJTaG91bGRuJ3QgcmVhY2ggaGVyZSEiKTsKICAg\nICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBpZSkgewogICAgICAgICAgICBh\nc3NlcnRUcnVlKCJJbnZhbGlkIGV4Y2VwdGlvbiIsIGllLmdldE1lc3NhZ2Uo\nKS5jb250YWlucygiSW52YWxpZCBMZWRnZXIgTWFuYWdlciIpKTsKICAgICAg\nICB9CiAgICB9CgogICAgQFRlc3QodGltZW91dD02MDAwMCkKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RSZWFkVjFMZWRnZXJNYW5hZ2VyTGF5b3V0KCkgdGhyb3dz\nIEV4Y2VwdGlvbiB7CiAgICAgICAgQ2xpZW50Q29uZmlndXJhdGlvbiBjb25m\nID0gbmV3IENsaWVudENvbmZpZ3VyYXRpb24oKTsKICAgICAgICAvLyB3cml0\nZSB2MSBsZWRnZXIgbGF5b3V0CiAgICAgICAgd3JpdGVMZWRnZXJMYXlvdXQo\nY29uZi5nZXRaa0xlZGdlcnNSb290UGF0aCgpLAogICAgICAgICAgICAgICAg\nICAgICAgICAgIEZsYXRMZWRnZXJNYW5hZ2VyRmFjdG9yeS5OQU1FLAogICAg\nICAgICAgICAgICAgICAgICAgICAgIEZsYXRMZWRnZXJNYW5hZ2VyRmFjdG9y\neS5DVVJfVkVSU0lPTiwgMSk7CgogICAgICAgIExlZGdlckxheW91dCBsYXlv\ndXQgPSBMZWRnZXJMYXlvdXQucmVhZExheW91dCh6a2MsIGNvbmYuZ2V0WmtM\nZWRnZXJzUm9vdFBhdGgoKSk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbCgiU2hv\ndWxkIG5vdCBiZSBudWxsIiwgbGF5b3V0KTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoRmxhdExlZGdlck1hbmFnZXJGYWN0b3J5Lk5BTUUsIGxheW91dC5nZXRN\nYW5hZ2VyVHlwZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoRmxhdExlZGdl\nck1hbmFnZXJGYWN0b3J5LkNVUl9WRVJTSU9OLCBsYXlvdXQuZ2V0TWFuYWdl\nclZlcnNpb24oKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGxheW91dC5n\nZXRMYXlvdXRGb3JtYXRWZXJzaW9uKCkpOwogICAgfQp9Cg==\n","encoding":"base64"}

