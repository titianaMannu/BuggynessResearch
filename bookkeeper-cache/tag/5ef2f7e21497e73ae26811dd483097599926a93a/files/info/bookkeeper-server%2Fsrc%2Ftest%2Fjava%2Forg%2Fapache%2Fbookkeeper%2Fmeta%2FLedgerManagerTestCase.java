{"sha":"f8fa5f010c05e2ac17ac79e2d0dc72f6bf12c538","node_id":"MDQ6QmxvYjE1NzU5NTY6ZjhmYTVmMDEwYzA1ZTJhYzE3YWM3OWUyZDBkYzcyZjZiZjEyYzUzOA==","size":2731,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/f8fa5f010c05e2ac17ac79e2d0dc72f6bf12c538","content":"LyoKICoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9y\nIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBU\naGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhl\nIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNl\nIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBs\naWFuY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEg\nY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBl\naXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZv\nciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Np\nb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICoK\nICovCgpwYWNrYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci5tZXRhOwoKaW1w\nb3J0IGphdmEudXRpbC5BcnJheXM7CmltcG9ydCBqYXZhLnV0aWwuQ29sbGVj\ndGlvbjsKCmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIudGVzdC5Cb29r\nS2VlcGVyQ2x1c3RlclRlc3RDYXNlOwppbXBvcnQgb3JnLmFwYWNoZS5ib29r\na2VlcGVyLnV0aWwuU25hcHNob3RNYXA7CgppbXBvcnQgb3JnLnNsZjRqLkxv\nZ2dlcjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJGYWN0b3J5OwoKaW1wb3J0\nIG9yZy5qdW5pdC5BZnRlcjsKaW1wb3J0IG9yZy5qdW5pdC5CZWZvcmU7Cmlt\ncG9ydCBvcmcuanVuaXQucnVubmVyLlJ1bldpdGg7CmltcG9ydCBvcmcuanVu\naXQucnVubmVycy5QYXJhbWV0ZXJpemVkOwppbXBvcnQgb3JnLmp1bml0LnJ1\nbm5lcnMuUGFyYW1ldGVyaXplZC5QYXJhbWV0ZXJzOwoKLyoqCiAqIFRlc3Qg\nY2FzZSB0byBydW4gb3ZlciBzZXJ2ZXJhbCBsZWRnZXIgbWFuYWdlcnMKICov\nCkBSdW5XaXRoKFBhcmFtZXRlcml6ZWQuY2xhc3MpCnB1YmxpYyBhYnN0cmFj\ndCBjbGFzcyBMZWRnZXJNYW5hZ2VyVGVzdENhc2UgZXh0ZW5kcyBCb29rS2Vl\ncGVyQ2x1c3RlclRlc3RDYXNlIHsKICAgIHN0YXRpYyBmaW5hbCBMb2dnZXIg\nTE9HID0gTG9nZ2VyRmFjdG9yeS5nZXRMb2dnZXIoTGVkZ2VyTWFuYWdlclRl\nc3RDYXNlLmNsYXNzKTsKCiAgICBMZWRnZXJNYW5hZ2VyRmFjdG9yeSBsZWRn\nZXJNYW5hZ2VyRmFjdG9yeTsKICAgIExlZGdlck1hbmFnZXIgbGVkZ2VyTWFu\nYWdlciA9IG51bGw7CiAgICBTbmFwc2hvdE1hcDxMb25nLCBCb29sZWFuPiBh\nY3RpdmVMZWRnZXJzID0gbnVsbDsKCiAgICBwdWJsaWMgTGVkZ2VyTWFuYWdl\nclRlc3RDYXNlKENsYXNzPD8gZXh0ZW5kcyBMZWRnZXJNYW5hZ2VyRmFjdG9y\neT4gbG1GYWN0b3J5Q2xzKSB7CiAgICAgICAgc3VwZXIoMCk7CiAgICAgICAg\nYWN0aXZlTGVkZ2VycyA9IG5ldyBTbmFwc2hvdE1hcDxMb25nLCBCb29sZWFu\nPigpOwogICAgICAgIGJhc2VDb25mLnNldExlZGdlck1hbmFnZXJGYWN0b3J5\nQ2xhc3MobG1GYWN0b3J5Q2xzKTsKICAgIH0KCiAgICBwdWJsaWMgTGVkZ2Vy\nTWFuYWdlciBnZXRMZWRnZXJNYW5hZ2VyKCkgewogICAgICAgIGlmIChudWxs\nID09IGxlZGdlck1hbmFnZXIpIHsKICAgICAgICAgICAgbGVkZ2VyTWFuYWdl\nciA9IGxlZGdlck1hbmFnZXJGYWN0b3J5Lm5ld0xlZGdlck1hbmFnZXIoKTsK\nICAgICAgICB9CiAgICAgICAgcmV0dXJuIGxlZGdlck1hbmFnZXI7CiAgICB9\nCgogICAgQFBhcmFtZXRlcnMKICAgIHB1YmxpYyBzdGF0aWMgQ29sbGVjdGlv\nbjxPYmplY3RbXT4gY29uZmlncygpIHsKICAgICAgICByZXR1cm4gQXJyYXlz\nLmFzTGlzdChuZXcgT2JqZWN0W11bXSB7CiAgICAgICAgICAgIHsgRmxhdExl\nZGdlck1hbmFnZXJGYWN0b3J5LmNsYXNzIH0sCiAgICAgICAgICAgIHsgSGll\ncmFyY2hpY2FsTGVkZ2VyTWFuYWdlckZhY3RvcnkuY2xhc3MgfQogICAgICAg\nIH0pOwogICAgfQoKICAgIEBCZWZvcmUKICAgIEBPdmVycmlkZQogICAgcHVi\nbGljIHZvaWQgc2V0VXAoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBz\ndXBlci5zZXRVcCgpOwogICAgICAgIGxlZGdlck1hbmFnZXJGYWN0b3J5ID0g\nTGVkZ2VyTWFuYWdlckZhY3RvcnkubmV3TGVkZ2VyTWFuYWdlckZhY3Rvcnko\nYmFzZUNvbmYsIHprYyk7CiAgICB9CgogICAgQEFmdGVyCiAgICBAT3ZlcnJp\nZGUKICAgIHB1YmxpYyB2b2lkIHRlYXJEb3duKCkgdGhyb3dzIEV4Y2VwdGlv\nbiB7CiAgICAgICAgaWYgKG51bGwgIT0gbGVkZ2VyTWFuYWdlcikgewogICAg\nICAgICAgICBsZWRnZXJNYW5hZ2VyLmNsb3NlKCk7CiAgICAgICAgfQogICAg\nICAgIGxlZGdlck1hbmFnZXJGYWN0b3J5LnVuaW5pdGlhbGl6ZSgpOwogICAg\nICAgIHN1cGVyLnRlYXJEb3duKCk7CiAgICB9Cgp9Cg==\n","encoding":"base64"}

