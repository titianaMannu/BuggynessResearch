{"sha":"4c061abd485038537298318cff85126ea9dee64e","node_id":"MDQ6QmxvYjE1NzU5NTY6NGMwNjFhYmQ0ODUwMzg1MzcyOTgzMThjZmY4NTEyNmVhOWRlZTY0ZQ==","size":4400,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/4c061abd485038537298318cff85126ea9dee64e","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIubWV0YXN0b3JlOwoKaW1wb3J0\nIGphdmEudXRpbC5TZXQ7CmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5D\nb3VudERvd25MYXRjaDsKaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LlRp\nbWVVbml0OwoKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5tZXRhc3Rv\ncmUuTWV0YXN0b3JlQ2FsbGJhY2s7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2tr\nZWVwZXIubWV0YXN0b3JlLk1ldGFzdG9yZVRhYmxlOwppbXBvcnQgb3JnLmFw\nYWNoZS5ib29ra2VlcGVyLm1ldGFzdG9yZS5NU0V4Y2VwdGlvbjsKaW1wb3J0\nIG9yZy5hcGFjaGUuYm9va2tlZXBlci5tZXRhc3RvcmUuTVNFeGNlcHRpb24u\nQ29kZTsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci52ZXJzaW9uaW5n\nLlZlcnNpb247CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIudmVyc2lv\nbmluZy5WZXJzaW9uZWQ7CgovLyBDb252ZXJ0cyBhc3luYyBjYWxscyB0byBz\neW5jIGNhbGxzIGZvciBNZXRhc3RvcmVUYWJsZS4gQ3VycmVudGx5IG5vdAov\nLyBpbnRlbmRlZCB0byBiZSB1c2VkIG90aGVyIHRoYW4gZm9yIHNpbXBsZSBm\ndW5jdGlvbmFsIHRlc3RzLCBob3dldmVyLAovLyBjb3VsZCBiZSBkZXZlbG9w\nZWQgaW50byBhIHN5bmMgQVBJLgoKcHVibGljIGNsYXNzIE1ldGFzdG9yZVRh\nYmxlQXN5bmNUb1N5bmNDb252ZXJ0ZXIgewoKICAgIHN0YXRpYyBjbGFzcyBI\nZWxkVmFsdWU8VD4gaW1wbGVtZW50cyBNZXRhc3RvcmVDYWxsYmFjazxUPiB7\nCiAgICAgICAgcHJpdmF0ZSBDb3VudERvd25MYXRjaCBjb3VudERvd25MYXRj\naCA9IG5ldyBDb3VudERvd25MYXRjaCgxKTsKICAgICAgICBwcml2YXRlIGlu\ndCBjb2RlOwogICAgICAgIHByaXZhdGUgVCB2YWx1ZSA9IG51bGw7CgogICAg\nICAgIHZvaWQgd2FpdENhbGxiYWNrKCkgdGhyb3dzIE1TRXhjZXB0aW9uIHsK\nICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvdW50RG93bkxh\ndGNoLmF3YWl0KDEwLCBUaW1lVW5pdC5TRUNPTkRTKTsKICAgICAgICAgICAg\nfSBjYXRjaCAoSW50ZXJydXB0ZWRFeGNlcHRpb24gaWUpIHsKICAgICAgICAg\nICAgICAgIHRocm93IE1TRXhjZXB0aW9uLmNyZWF0ZShDb2RlLkludGVycnVw\ndGVkRXhjZXB0aW9uKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYg\nKENvZGUuT0suZ2V0Q29kZSgpICE9IGNvZGUpIHsKICAgICAgICAgICAgICAg\nIHRocm93IE1TRXhjZXB0aW9uLmNyZWF0ZShDb2RlLmdldChjb2RlKSk7CiAg\nICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHB1YmxpYyBUIGdldFZh\nbHVlKCkgewogICAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgfQoK\nICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgdm9pZCBjb21wbGV0\nZShpbnQgcmMsIFQgdmFsdWUsIE9iamVjdCBjdHgpIHsKICAgICAgICAgICAg\ndGhpcy5jb2RlID0gcmM7CiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1\nZTsKICAgICAgICAgICAgY291bnREb3duTGF0Y2guY291bnREb3duKCk7CiAg\nICAgICAgfQogICAgfQoKICAgIHByb3RlY3RlZCBNZXRhc3RvcmVUYWJsZSB0\nYWJsZTsKCiAgICBwdWJsaWMgTWV0YXN0b3JlVGFibGVBc3luY1RvU3luY0Nv\nbnZlcnRlcihNZXRhc3RvcmVUYWJsZSB0YWJsZSkgewogICAgICAgIHRoaXMu\ndGFibGUgPSB0YWJsZTsKICAgIH0KCiAgICBwdWJsaWMgVmVyc2lvbmVkPFZh\nbHVlPiBnZXQoU3RyaW5nIGtleSkgdGhyb3dzIE1TRXhjZXB0aW9uIHsKICAg\nICAgICBIZWxkVmFsdWU8VmVyc2lvbmVkPFZhbHVlPj4gcmV0VmFsdWUgPQog\nICAgICAgICAgICBuZXcgSGVsZFZhbHVlPFZlcnNpb25lZDxWYWx1ZT4+KCk7\nCgogICAgICAgIC8vIG1ha2UgdGhlIGFjdHVhbCBhc3luYyBjYWxsCiAgICAg\nICAgdGhpcy50YWJsZS5nZXQoa2V5LCByZXRWYWx1ZSwgbnVsbCk7CgogICAg\nICAgIHJldFZhbHVlLndhaXRDYWxsYmFjaygpOwogICAgICAgIHJldHVybiBy\nZXRWYWx1ZS5nZXRWYWx1ZSgpOwogICAgfQoKICAgIHB1YmxpYyBWZXJzaW9u\nZWQ8VmFsdWU+IGdldChTdHJpbmcga2V5LCBTZXQ8U3RyaW5nPiBmaWVsZHMp\nCiAgICB0aHJvd3MgTVNFeGNlcHRpb24gewogICAgICAgIEhlbGRWYWx1ZTxW\nZXJzaW9uZWQ8VmFsdWU+PiByZXRWYWx1ZSA9CiAgICAgICAgICAgIG5ldyBI\nZWxkVmFsdWU8VmVyc2lvbmVkPFZhbHVlPj4oKTsKCiAgICAgICAgLy8gbWFr\nZSB0aGUgYWN0dWFsIGFzeW5jIGNhbGwKICAgICAgICB0aGlzLnRhYmxlLmdl\ndChrZXksIGZpZWxkcywgcmV0VmFsdWUsIG51bGwpOwoKICAgICAgICByZXRW\nYWx1ZS53YWl0Q2FsbGJhY2soKTsKICAgICAgICByZXR1cm4gcmV0VmFsdWUu\nZ2V0VmFsdWUoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCByZW1vdmUoU3Ry\naW5nIGtleSwgVmVyc2lvbiB2ZXJzaW9uKSB0aHJvd3MgTVNFeGNlcHRpb24g\newogICAgICAgIEhlbGRWYWx1ZTxWb2lkPiByZXRWYWx1ZSA9IG5ldyBIZWxk\nVmFsdWU8Vm9pZD4oKTsKCiAgICAgICAgLy8gbWFrZSB0aGUgYWN0dWFsIGFz\neW5jIGNhbGwKICAgICAgICB0aGlzLnRhYmxlLnJlbW92ZShrZXksIHZlcnNp\nb24sIHJldFZhbHVlLCBudWxsKTsKCiAgICAgICAgcmV0VmFsdWUud2FpdENh\nbGxiYWNrKCk7CiAgICB9CgogICAgcHVibGljIFZlcnNpb24gcHV0KFN0cmlu\nZyBrZXksIFZhbHVlIHZhbHVlLCBWZXJzaW9uIHZlcnNpb24pCiAgICB0aHJv\nd3MgTVNFeGNlcHRpb24gewogICAgICAgIEhlbGRWYWx1ZTxWZXJzaW9uPiBy\nZXRWYWx1ZSA9IG5ldyBIZWxkVmFsdWU8VmVyc2lvbj4oKTsKCiAgICAgICAg\nLy8gbWFrZSB0aGUgYWN0dWFsIGFzeW5jIGNhbGwKICAgICAgICB0aGlzLnRh\nYmxlLnB1dChrZXksIHZhbHVlLCB2ZXJzaW9uLCByZXRWYWx1ZSwgbnVsbCk7\nCgogICAgICAgIHJldFZhbHVlLndhaXRDYWxsYmFjaygpOwogICAgICAgIHJl\ndHVybiByZXRWYWx1ZS5nZXRWYWx1ZSgpOwogICAgfQoKICAgIHB1YmxpYyBN\nZXRhc3RvcmVDdXJzb3Igb3BlbkN1cnNvcigpIHRocm93cyBNU0V4Y2VwdGlv\nbiB7CiAgICAgICAgSGVsZFZhbHVlPE1ldGFzdG9yZUN1cnNvcj4gcmV0VmFs\ndWUgPSBuZXcgSGVsZFZhbHVlPE1ldGFzdG9yZUN1cnNvcj4oKTsKICAgICAg\nICAvLyBtYWtlIHRoZSBhY3R1YWwgYXN5bmMgY2FsbAogICAgICAgIHRoaXMu\ndGFibGUub3BlbkN1cnNvcihyZXRWYWx1ZSwgbnVsbCk7CiAgICAgICAgcmV0\nVmFsdWUud2FpdENhbGxiYWNrKCk7CiAgICAgICAgcmV0dXJuIHJldFZhbHVl\nLmdldFZhbHVlKCk7CiAgICB9CgogICAgcHVibGljIE1ldGFzdG9yZUN1cnNv\nciBvcGVuQ3Vyc29yKFNldDxTdHJpbmc+IGZpZWxkcykgdGhyb3dzIE1TRXhj\nZXB0aW9uIHsKICAgICAgICBIZWxkVmFsdWU8TWV0YXN0b3JlQ3Vyc29yPiBy\nZXRWYWx1ZSA9IG5ldyBIZWxkVmFsdWU8TWV0YXN0b3JlQ3Vyc29yPigpOwog\nICAgICAgIC8vIG1ha2UgdGhlIGFjdHVhbCBhc3luYyBjYWxsCiAgICAgICAg\ndGhpcy50YWJsZS5vcGVuQ3Vyc29yKGZpZWxkcywgcmV0VmFsdWUsIG51bGwp\nOwogICAgICAgIHJldFZhbHVlLndhaXRDYWxsYmFjaygpOwogICAgICAgIHJl\ndHVybiByZXRWYWx1ZS5nZXRWYWx1ZSgpOwogICAgfQoKfQo=\n","encoding":"base64"}

