{"sha":"a9b99678e79edb8c4198a0608c16c2937c337556","node_id":"MDQ6QmxvYjE1NzU5NTY6YTliOTk2NzhlNzllZGI4YzQxOThhMDYwOGMxNmMyOTM3YzMzNzU1Ng==","size":8752,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/a9b99678e79edb8c4198a0608c16c2937c337556","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIucmVwbGljYXRpb247CgppbXBv\ncnQgamF2YS5pby5GaWxlOwppbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsK\naW1wb3J0IGphdmEubmlvLkJ5dGVCdWZmZXI7CmltcG9ydCBqYXZhLnV0aWwu\nQXJyYXlMaXN0OwppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247CmltcG9y\ndCBqYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGphdmEudXRpbC5NYXA7CmltcG9y\ndCBqYXZhLnV0aWwuUmFuZG9tOwppbXBvcnQgamF2YS51dGlsLlNldDsKCmlt\ncG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY2xpZW50LkJLRXhjZXB0aW9u\nOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNsaWVudC5MZWRnZXJI\nYW5kbGU7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY2xpZW50LkJv\nb2tLZWVwZXIuRGlnZXN0VHlwZTsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tl\nZXBlci5tZXRhLkxlZGdlck1hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLmJv\nb2trZWVwZXIubWV0YS5MZWRnZXJNYW5hZ2VyRmFjdG9yeTsKaW1wb3J0IG9y\nZy5hcGFjaGUuYm9va2tlZXBlci5tZXRhLk1TTGVkZ2VyTWFuYWdlckZhY3Rv\ncnk7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIucmVwbGljYXRpb24u\nUmVwbGljYXRpb25FeGNlcHRpb24uQktBdWRpdEV4Y2VwdGlvbjsKaW1wb3J0\nIG9yZy5hcGFjaGUuYm9va2tlZXBlci50ZXN0Lk11bHRpTGVkZ2VyTWFuYWdl\nclRlc3RDYXNlOwppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmlvLkZpbGVV\ndGlsczsKaW1wb3J0IG9yZy5hcGFjaGUuem9va2VlcGVyLktlZXBlckV4Y2Vw\ndGlvbjsKaW1wb3J0IG9yZy5qdW5pdC5BZnRlcjsKaW1wb3J0IG9yZy5qdW5p\ndC5CZWZvcmU7CmltcG9ydCBvcmcuanVuaXQuVGVzdDsKaW1wb3J0IG9yZy5z\nbGY0ai5Mb2dnZXI7CmltcG9ydCBvcmcuc2xmNGouTG9nZ2VyRmFjdG9yeTsK\nCi8qKgogKiBUZXN0cyB2ZXJpZmllcyBib29raWUgdnMgbGVkZ2VyIG1hcHBp\nbmcgZ2VuZXJhdGluZyBieSB0aGUgQm9va2llTGVkZ2VySW5kZXhlcgogKi8K\ncHVibGljIGNsYXNzIEJvb2tpZUxlZGdlckluZGV4VGVzdCBleHRlbmRzIE11\nbHRpTGVkZ2VyTWFuYWdlclRlc3RDYXNlIHsKCiAgICAvLyBEZXBlbmRpbmcg\nb24gdGhlIHRhc3RlLCBzZWxlY3QgdGhlIGFtb3VudCBvZiBsb2dnaW5nCiAg\nICAvLyBieSBkZWNvbW1lbnRpbmcgb25lIG9mIHRoZSB0d28gbGluZXMgYmVs\nb3cKICAgIC8vIHN0YXRpYyBMb2dnZXIgTE9HID0gTG9nZ2VyLmdldFJvb3RM\nb2dnZXIoKTsKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvZ2dlciBMT0cg\nPSBMb2dnZXJGYWN0b3J5CiAgICAgICAgICAgIC5nZXRMb2dnZXIoQm9va2ll\nTGVkZ2VySW5kZXhUZXN0LmNsYXNzKTsKCiAgICBwcml2YXRlIFJhbmRvbSBy\nbmc7IC8vIFJhbmRvbSBOdW1iZXIgR2VuZXJhdG9yCiAgICBwcml2YXRlIEFy\ncmF5TGlzdDxieXRlW10+IGVudHJpZXM7IC8vIGdlbmVyYXRlZCBlbnRyaWVz\nCiAgICBwcml2YXRlIGZpbmFsIERpZ2VzdFR5cGUgZGlnZXN0VHlwZSA9IERp\nZ2VzdFR5cGUuQ1JDMzI7CiAgICBwcml2YXRlIGludCBudW1iZXJPZkxlZGdl\ncnMgPSAzOwogICAgcHJpdmF0ZSBMaXN0PExvbmc+IGxlZGdlckxpc3Q7CiAg\nICBwcml2YXRlIExlZGdlck1hbmFnZXJGYWN0b3J5IG5ld0xlZGdlck1hbmFn\nZXJGYWN0b3J5OwogICAgcHJpdmF0ZSBMZWRnZXJNYW5hZ2VyIGxlZGdlck1h\nbmFnZXI7CgogICAgcHVibGljIEJvb2tpZUxlZGdlckluZGV4VGVzdChTdHJp\nbmcgbGVkZ2VyTWFuYWdlckZhY3RvcnkpCiAgICAgICAgICAgIHRocm93cyBJ\nT0V4Y2VwdGlvbiwgS2VlcGVyRXhjZXB0aW9uLCBJbnRlcnJ1cHRlZEV4Y2Vw\ndGlvbiB7CiAgICAgICAgc3VwZXIoMyk7CiAgICAgICAgTE9HLmluZm8oIlJ1\nbm5pbmcgdGVzdCBjYXNlIHVzaW5nIGxlZGdlciBtYW5hZ2VyIDogIgogICAg\nICAgICAgICAgICAgKyBsZWRnZXJNYW5hZ2VyRmFjdG9yeSk7CiAgICAgICAg\nLy8gc2V0IGxlZGdlciBtYW5hZ2VyIG5hbWUKICAgICAgICBiYXNlQ29uZi5z\nZXRMZWRnZXJNYW5hZ2VyRmFjdG9yeUNsYXNzTmFtZShsZWRnZXJNYW5hZ2Vy\nRmFjdG9yeSk7CiAgICAgICAgYmFzZUNsaWVudENvbmYuc2V0TGVkZ2VyTWFu\nYWdlckZhY3RvcnlDbGFzc05hbWUobGVkZ2VyTWFuYWdlckZhY3RvcnkpOwog\nICAgfQoKICAgIEBCZWZvcmUKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgdGhy\nb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgc3VwZXIuc2V0VXAoKTsKICAgICAg\nICBybmcgPSBuZXcgUmFuZG9tKFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygp\nKTsgLy8gSW5pdGlhbGl6ZSB0aGUgUmFuZG9tCiAgICAgICAgLy8gTnVtYmVy\nIEdlbmVyYXRvcgogICAgICAgIGVudHJpZXMgPSBuZXcgQXJyYXlMaXN0PGJ5\ndGVbXT4oKTsgLy8gaW5pdGlhbGl6ZSB0aGUgZW50cmllcyBsaXN0CiAgICAg\nICAgbGVkZ2VyTGlzdCA9IG5ldyBBcnJheUxpc3Q8TG9uZz4oMyk7CiAgICAg\nICAgLy8gaW5pdGlhbGl6ZSBsZWRnZXIgbWFuYWdlcgogICAgICAgIG5ld0xl\nZGdlck1hbmFnZXJGYWN0b3J5ID0gTGVkZ2VyTWFuYWdlckZhY3RvcnkubmV3\nTGVkZ2VyTWFuYWdlckZhY3RvcnkoCiAgICAgICAgICAgICAgICBiYXNlQ29u\nZiwgemtjKTsKICAgICAgICBsZWRnZXJNYW5hZ2VyID0gbmV3TGVkZ2VyTWFu\nYWdlckZhY3RvcnkubmV3TGVkZ2VyTWFuYWdlcigpOwogICAgfQoKICAgIEBB\nZnRlcgogICAgcHVibGljIHZvaWQgdGVhckRvd24oKSB0aHJvd3MgRXhjZXB0\naW9uIHsKICAgICAgICBzdXBlci50ZWFyRG93bigpOwogICAgICAgIGlmIChu\ndWxsICE9IG5ld0xlZGdlck1hbmFnZXJGYWN0b3J5KSB7CiAgICAgICAgICAg\nIG5ld0xlZGdlck1hbmFnZXJGYWN0b3J5LnVuaW5pdGlhbGl6ZSgpOwogICAg\nICAgICAgICBuZXdMZWRnZXJNYW5hZ2VyRmFjdG9yeSA9IG51bGw7CiAgICAg\nICAgfQogICAgICAgIGlmIChudWxsICE9IGxlZGdlck1hbmFnZXIpIHsKICAg\nICAgICAgICAgbGVkZ2VyTWFuYWdlci5jbG9zZSgpOwogICAgICAgICAgICBs\nZWRnZXJNYW5hZ2VyID0gbnVsbDsKICAgICAgICB9CiAgICB9CgogICAgLyoq\nCiAgICAgKiBWZXJpZnkgdGhlIGJvb2tpZS1sZWRnZXIgbWFwcGluZyB3aXRo\nIG1pbmltdW0gbnVtYmVyIG9mIGJvb2tpZXMgYW5kIGZldwogICAgICogbGVk\nZ2VycwogICAgICovCiAgICBAVGVzdCh0aW1lb3V0PTYwMDAwKQogICAgcHVi\nbGljIHZvaWQgdGVzdFNpbXBsZUJvb2tpZUxlZGdlck1hcHBpbmcoKSB0aHJv\nd3MgRXhjZXB0aW9uIHsKCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBu\ndW1iZXJPZkxlZGdlcnM7IGkrKykgewogICAgICAgICAgICBjcmVhdGVBbmRB\nZGRFbnRyaWVzVG9MZWRnZXIoKS5jbG9zZSgpOwogICAgICAgIH0KCiAgICAg\nICAgQm9va2llTGVkZ2VySW5kZXhlciBib29raWVMZWRnZXJJbmRleCA9IG5l\ndyBCb29raWVMZWRnZXJJbmRleGVyKAogICAgICAgICAgICAgICAgbGVkZ2Vy\nTWFuYWdlcik7CgogICAgICAgIE1hcDxTdHJpbmcsIFNldDxMb25nPj4gYm9v\na2llVG9MZWRnZXJJbmRleCA9IGJvb2tpZUxlZGdlckluZGV4CiAgICAgICAg\nICAgICAgICAuZ2V0Qm9va2llVG9MZWRnZXJJbmRleCgpOwoKICAgICAgICBh\nc3NlcnRFcXVhbHMoIk1pc3NlZCBmZXcgYm9va2llcyBpbiB0aGUgYm9va2ll\nLWxlZGdlciBtYXBwaW5nISIsIDMsCiAgICAgICAgICAgICAgICBib29raWVU\nb0xlZGdlckluZGV4LnNpemUoKSk7CiAgICAgICAgQ29sbGVjdGlvbjxTZXQ8\nTG9uZz4+IGJrMmxlZGdlckVudHJ5ID0gYm9va2llVG9MZWRnZXJJbmRleC52\nYWx1ZXMoKTsKICAgICAgICBmb3IgKFNldDxMb25nPiBsZWRnZXJzIDogYmsy\nbGVkZ2VyRW50cnkpIHsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKCJNaXNz\nZWQgZmV3IGxlZGdlcnMgaW4gdGhlIGJvb2tpZS1sZWRnZXIgbWFwcGluZyEi\nLCAzLAogICAgICAgICAgICAgICAgICAgIGxlZGdlcnMuc2l6ZSgpKTsKICAg\nICAgICAgICAgZm9yIChMb25nIGxlZGdlcklkIDogbGVkZ2VycykgewogICAg\nICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgiVW5rbm93biBsZWRnZXItYm9va2ll\nIG1hcHBpbmciLCBsZWRnZXJMaXN0CiAgICAgICAgICAgICAgICAgICAgICAg\nIC5jb250YWlucyhsZWRnZXJJZCkpOwogICAgICAgICAgICB9CiAgICAgICAg\nfQogICAgfQoKICAgIC8qKgogICAgICogVmVyaWZ5IGxlZGdlciBpbmRleCB3\naXRoIGZhaWxlZCBib29raWVzIGFuZCB0aHJvd3MgZXhjZXB0aW9uCiAgICAg\nKi8KICAgIEBUZXN0KHRpbWVvdXQ9NjAwMDApCiAgICBwdWJsaWMgdm9pZCB0\nZXN0V2l0aG91dFpvb2tlZXBlcigpIHRocm93cyBFeGNlcHRpb24gewogICAg\nICAgIC8vIFRoaXMgdGVzdCBjYXNlIGlzIGZvciBsZWRnZXIgbWV0YWRhdGEg\ndGhhdCBzdG9yZWQgaW4gWm9vS2VlcGVyLiBBcwogICAgICAgIC8vIGZhciBh\ncyBNU0xlZGdlck1hbmFnZXJGYWN0b3J5LCBsZWRnZXIgbWV0YWRhdGEgYXJl\nIHN0b3JlZCBpbiBvdGhlcgogICAgICAgIC8vIHN0b3JhZ2UuIFNvIHRoaXMg\ndGVzdCBpcyBub3Qgc3VpdGFibGUgZm9yIE1TTGVkZ2VyTWFuYWdlckZhY3Rv\ncnkuCiAgICAgICAgaWYgKG5ld0xlZGdlck1hbmFnZXJGYWN0b3J5IGluc3Rh\nbmNlb2YgTVNMZWRnZXJNYW5hZ2VyRmFjdG9yeSkgewogICAgICAgICAgICBy\nZXR1cm47CiAgICAgICAgfQoKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8\nIG51bWJlck9mTGVkZ2VyczsgaSsrKSB7CiAgICAgICAgICAgIGNyZWF0ZUFu\nZEFkZEVudHJpZXNUb0xlZGdlcigpLmNsb3NlKCk7CiAgICAgICAgfQoKICAg\nICAgICBCb29raWVMZWRnZXJJbmRleGVyIGJvb2tpZUxlZGdlckluZGV4ID0g\nbmV3IEJvb2tpZUxlZGdlckluZGV4ZXIoCiAgICAgICAgICAgICAgICBsZWRn\nZXJNYW5hZ2VyKTsKICAgICAgICBzdG9wWktDbHVzdGVyKCk7CiAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgYm9va2llTGVkZ2VySW5kZXguZ2V0Qm9va2ll\nVG9MZWRnZXJJbmRleCgpOwogICAgICAgICAgICBmYWlsKCJNdXN0IHRocm93\nIGV4Y2VwdGlvbiBhcyB6b29rZWVwZXIgYXJlIG5vdCBydW5uaW5nISIpOwog\nICAgICAgIH0gY2F0Y2ggKEJLQXVkaXRFeGNlcHRpb24gYmtBdWRpdEV4Y2Vw\ndGlvbikgewogICAgICAgICAgICAvLyBleHBlY3RlZCBiZWhhdmlvdXIKICAg\nICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBWZXJpZnkgaW5kZXhpbmcg\nd2l0aCBtdWx0aXBsZSBlbnNlbWJsZSByZWZvcm1hdGlvbgogICAgICovCiAg\nICBAVGVzdCh0aW1lb3V0PTYwMDAwKQogICAgcHVibGljIHZvaWQgdGVzdEVu\nc2VtYmxlUmVmb3JtYXRpb24oKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAg\nICB0cnkgewogICAgICAgICAgICBMZWRnZXJIYW5kbGUgbGgxID0gY3JlYXRl\nQW5kQWRkRW50cmllc1RvTGVkZ2VyKCk7CiAgICAgICAgICAgIExlZGdlckhh\nbmRsZSBsaDIgPSBjcmVhdGVBbmRBZGRFbnRyaWVzVG9MZWRnZXIoKTsKCiAg\nICAgICAgICAgIHN0YXJ0TmV3Qm9va2llKCk7CiAgICAgICAgICAgIHNodXRk\nb3duQm9va2llKGJzLnNpemUoKSAtIDIpOwoKICAgICAgICAgICAgLy8gYWRk\nIGZldyBtb3JlIGVudHJpZXMgYWZ0ZXIgZW5zZW1ibGUgcmVmb3JtYXRpb24K\nICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7CiAg\nICAgICAgICAgICAgICBCeXRlQnVmZmVyIGVudHJ5ID0gQnl0ZUJ1ZmZlci5h\nbGxvY2F0ZSg0KTsKICAgICAgICAgICAgICAgIGVudHJ5LnB1dEludChybmcu\nbmV4dEludChJbnRlZ2VyLk1BWF9WQUxVRSkpOwogICAgICAgICAgICAgICAg\nZW50cnkucG9zaXRpb24oMCk7CgogICAgICAgICAgICAgICAgZW50cmllcy5h\nZGQoZW50cnkuYXJyYXkoKSk7CiAgICAgICAgICAgICAgICBsaDEuYWRkRW50\ncnkoZW50cnkuYXJyYXkoKSk7CiAgICAgICAgICAgICAgICBsaDIuYWRkRW50\ncnkoZW50cnkuYXJyYXkoKSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAg\nIEJvb2tpZUxlZGdlckluZGV4ZXIgYm9va2llTGVkZ2VySW5kZXggPSBuZXcg\nQm9va2llTGVkZ2VySW5kZXhlcigKICAgICAgICAgICAgICAgICAgICBsZWRn\nZXJNYW5hZ2VyKTsKCiAgICAgICAgICAgIE1hcDxTdHJpbmcsIFNldDxMb25n\nPj4gYm9va2llVG9MZWRnZXJJbmRleCA9IGJvb2tpZUxlZGdlckluZGV4CiAg\nICAgICAgICAgICAgICAgICAgLmdldEJvb2tpZVRvTGVkZ2VySW5kZXgoKTsK\nICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKCJNaXNzZWQgZmV3IGJvb2tpZXMg\naW4gdGhlIGJvb2tpZS1sZWRnZXIgbWFwcGluZyEiLCA0LAogICAgICAgICAg\nICAgICAgICAgIGJvb2tpZVRvTGVkZ2VySW5kZXguc2l6ZSgpKTsKICAgICAg\nICAgICAgQ29sbGVjdGlvbjxTZXQ8TG9uZz4+IGJrMmxlZGdlckVudHJ5ID0g\nYm9va2llVG9MZWRnZXJJbmRleC52YWx1ZXMoKTsKICAgICAgICAgICAgZm9y\nIChTZXQ8TG9uZz4gbGVkZ2VycyA6IGJrMmxlZGdlckVudHJ5KSB7CiAgICAg\nICAgICAgICAgICBhc3NlcnRFcXVhbHMoCiAgICAgICAgICAgICAgICAgICAg\nICAgICJNaXNzZWQgZmV3IGxlZGdlcnMgaW4gdGhlIGJvb2tpZS1sZWRnZXIg\nbWFwcGluZyEiLCAyLAogICAgICAgICAgICAgICAgICAgICAgICBsZWRnZXJz\nLnNpemUoKSk7CiAgICAgICAgICAgICAgICBmb3IgKExvbmcgbGVkZ2VyTm9k\nZSA6IGxlZGdlcnMpIHsKICAgICAgICAgICAgICAgICAgICBhc3NlcnRUcnVl\nKCJVbmtub3duIGxlZGdlci1ib29raWUgbWFwcGluZyIsIGxlZGdlckxpc3QK\nICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb250YWlucyhsZWRnZXJO\nb2RlKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAg\nICB9IGNhdGNoIChCS0V4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIExPRy5l\ncnJvcigiVGVzdCBmYWlsZWQiLCBlKTsKICAgICAgICAgICAgZmFpbCgiVGVz\ndCBmYWlsZWQgZHVlIHRvIEJvb2tLZWVwZXIgZXhjZXB0aW9uIik7CiAgICAg\nICAgfSBjYXRjaCAoSW50ZXJydXB0ZWRFeGNlcHRpb24gZSkgewogICAgICAg\nICAgICBMT0cuZXJyb3IoIlRlc3QgZmFpbGVkIiwgZSk7CiAgICAgICAgICAg\nIGZhaWwoIlRlc3QgZmFpbGVkIGR1ZSB0byBpbnRlcnJ1cHRpb24iKTsKICAg\nICAgICB9CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIHNodXRkb3duQm9va2ll\nKGludCBia1NodXRkb3duSW5kZXgpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAg\nICAgICAgYnMucmVtb3ZlKGJrU2h1dGRvd25JbmRleCkuc2h1dGRvd24oKTsK\nICAgICAgICBGaWxlIGYgPSB0bXBEaXJzLnJlbW92ZShia1NodXRkb3duSW5k\nZXgpOwogICAgICAgIEZpbGVVdGlscy5kZWxldGVEaXJlY3RvcnkoZik7CiAg\nICB9CgogICAgcHJpdmF0ZSBMZWRnZXJIYW5kbGUgY3JlYXRlQW5kQWRkRW50\ncmllc1RvTGVkZ2VyKCkgdGhyb3dzIEJLRXhjZXB0aW9uLAogICAgICAgICAg\nICBJbnRlcnJ1cHRlZEV4Y2VwdGlvbiB7CiAgICAgICAgaW50IG51bUVudHJp\nZXNUb1dyaXRlID0gMjA7CiAgICAgICAgLy8gQ3JlYXRlIGEgbGVkZ2VyCiAg\nICAgICAgTGVkZ2VySGFuZGxlIGxoID0gYmtjLmNyZWF0ZUxlZGdlcihkaWdl\nc3RUeXBlLCAiYWRtaW4iLmdldEJ5dGVzKCkpOwogICAgICAgIExPRy5pbmZv\nKCJMZWRnZXIgSUQ6ICIgKyBsaC5nZXRJZCgpKTsKICAgICAgICBmb3IgKGlu\ndCBpID0gMDsgaSA8IG51bUVudHJpZXNUb1dyaXRlOyBpKyspIHsKICAgICAg\nICAgICAgQnl0ZUJ1ZmZlciBlbnRyeSA9IEJ5dGVCdWZmZXIuYWxsb2NhdGUo\nNCk7CiAgICAgICAgICAgIGVudHJ5LnB1dEludChybmcubmV4dEludChJbnRl\nZ2VyLk1BWF9WQUxVRSkpOwogICAgICAgICAgICBlbnRyeS5wb3NpdGlvbigw\nKTsKCiAgICAgICAgICAgIGVudHJpZXMuYWRkKGVudHJ5LmFycmF5KCkpOwog\nICAgICAgICAgICBsaC5hZGRFbnRyeShlbnRyeS5hcnJheSgpKTsKICAgICAg\nICB9CiAgICAgICAgbGVkZ2VyTGlzdC5hZGQobGguZ2V0SWQoKSk7CiAgICAg\nICAgcmV0dXJuIGxoOwogICAgfQp9Cg==\n","encoding":"base64"}

