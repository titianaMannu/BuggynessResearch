{"sha":"ba04c306c2f1b80aa516827a4571da47920d67fb","node_id":"MDQ6QmxvYjE1NzU5NTY6YmEwNGMzMDZjMmYxYjgwYWE1MTY4MjdhNDU3MWRhNDc5MjBkNjdmYg==","size":3908,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/ba04c306c2f1b80aa516827a4571da47920d67fb","content":"LyoqCiAqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91\nbmRhdGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRv\nciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAq\nIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGlu\nZm9ybWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRo\nZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5z\nZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21w\nbGlhbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBh\nIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICBodHRwOi8vd3d3LmFw\nYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJl\ncXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0\naW5nLAogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5z\nZSBpcyBkaXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRI\nT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwg\nZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBm\nb3IgdGhlCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNz\naW9ucyBhbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAq\nCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci5yZXBsaWNhdGlv\nbjsKCmltcG9ydCBqYXZhLm5ldC5JbmV0QWRkcmVzczsKaW1wb3J0IGphdmEu\nbmV0LkluZXRTb2NrZXRBZGRyZXNzOwppbXBvcnQgamF2YS51dGlsLkFycmF5\nTGlzdDsKaW1wb3J0IGphdmEudXRpbC5FbnVtZXJhdGlvbjsKaW1wb3J0IGph\ndmEudXRpbC5TZXQ7CmltcG9ydCBqYXZhLnV0aWwuTWFwLkVudHJ5OwoKaW1w\nb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5jbGllbnQuQm9va0tlZXBlcjsK\naW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5jbGllbnQuTGVkZ2VyRW50\ncnk7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY2xpZW50LkxlZGdl\nckhhbmRsZTsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5jbGllbnQu\nTGVkZ2VySGFuZGxlQWRhcHRlcjsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tl\nZXBlci50ZXN0LkJvb2tLZWVwZXJDbHVzdGVyVGVzdENhc2U7CmltcG9ydCBv\ncmcuYXBhY2hlLmJvb2trZWVwZXIudXRpbC5Cb29rS2VlcGVyQ29uc3RhbnRz\nOwppbXBvcnQgb3JnLmp1bml0LlRlc3Q7CgpwdWJsaWMgY2xhc3MgVGVzdEF1\ndG9SZWNvdmVyeUFsb25nV2l0aEJvb2tpZVNlcnZlcnMgZXh0ZW5kcwogICAg\nICAgIEJvb2tLZWVwZXJDbHVzdGVyVGVzdENhc2UgewoKICAgIHByaXZhdGUg\nU3RyaW5nIGJhc2VQYXRoID0gIiI7CgogICAgcHVibGljIFRlc3RBdXRvUmVj\nb3ZlcnlBbG9uZ1dpdGhCb29raWVTZXJ2ZXJzKCkgewogICAgICAgIHN1cGVy\nKDMpOwogICAgICAgIGJhc2VDb25mLnNldEF1dG9SZWNvdmVyeURhZW1vbkVu\nYWJsZWQodHJ1ZSk7CiAgICAgICAgYmFzZVBhdGggPSBiYXNlQ2xpZW50Q29u\nZi5nZXRaa0xlZGdlcnNSb290UGF0aCgpICsgJy8nCiAgICAgICAgICAgICAg\nICArIEJvb2tLZWVwZXJDb25zdGFudHMuVU5ERVJfUkVQTElDQVRJT05fTk9E\nRQogICAgICAgICAgICAgICAgKyBCb29rS2VlcGVyQ29uc3RhbnRzLkRFRkFV\nTFRfWktfTEVER0VSU19ST09UX1BBVEg7CiAgICB9CgogICAgLyoqIFRlc3Rz\nIHRoYXQgdGhlIGF1dG8gcmVjb3Zlcnkgc2VydmljZSBhbG9uZyB3aXRoIEJv\nb2tpZSBzZXJ2ZXJzIGl0c2VsZiAqLwogICAgQFRlc3QodGltZW91dCA9IDYw\nMDAwKQogICAgcHVibGljIHZvaWQgdGVzdEF1dG9SZWNvdmVyeUFsb25nV2l0\naEJvb2tpZVNlcnZlcnMoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBM\nZWRnZXJIYW5kbGUgbGggPSBia2MuY3JlYXRlTGVkZ2VyKDMsIDMsIEJvb2tL\nZWVwZXIuRGlnZXN0VHlwZS5DUkMzMiwKICAgICAgICAgICAgICAgICJ0ZXN0\ncGFzc3dkIi5nZXRCeXRlcygpKTsKICAgICAgICBieXRlW10gdGVzdERhdGEg\nPSAidGVzdEJ1aWx0QXV0b1JlY292ZXJ5Ii5nZXRCeXRlcygpOwoKICAgICAg\nICBmb3IgKGludCBpID0gMDsgaSA8IDEwOyBpKyspIHsKICAgICAgICAgICAg\nbGguYWRkRW50cnkodGVzdERhdGEpOwogICAgICAgIH0KICAgICAgICBsaC5j\nbG9zZSgpOwogICAgICAgIEluZXRTb2NrZXRBZGRyZXNzIHJlcGxpY2FUb0tp\nbGwgPSBMZWRnZXJIYW5kbGVBZGFwdGVyCiAgICAgICAgICAgICAgICAuZ2V0\nTGVkZ2VyTWV0YWRhdGEobGgpLmdldEVuc2VtYmxlcygpLmdldCgwTCkuZ2V0\nKDApOwoKICAgICAgICBraWxsQm9va2llKHJlcGxpY2FUb0tpbGwpOwoKICAg\nICAgICBpbnQgc3RhcnROZXdCb29raWUgPSBzdGFydE5ld0Jvb2tpZSgpOwog\nICAgICAgIEluZXRTb2NrZXRBZGRyZXNzIG5ld0JrQWRkciA9IG5ldyBJbmV0\nU29ja2V0QWRkcmVzcyhJbmV0QWRkcmVzcwogICAgICAgICAgICAgICAgLmdl\ndExvY2FsSG9zdCgpLmdldEhvc3RBZGRyZXNzKCksIHN0YXJ0TmV3Qm9va2ll\nKTsKCiAgICAgICAgd2hpbGUgKFJlcGxpY2F0aW9uVGVzdFV0aWwuaXNMZWRn\nZXJJblVuZGVyUmVwbGljYXRpb24oemtjLCBsaC5nZXRJZCgpLAogICAgICAg\nICAgICAgICAgYmFzZVBhdGgpKSB7CiAgICAgICAgICAgIFRocmVhZC5zbGVl\ncCgxMDApOwogICAgICAgIH0KCiAgICAgICAgLy8gS2lsbGluZyBhbGwgYm9v\na2llcyBleGNlcHQgbmV3bHkgcmVwbGljYXRlZCBib29raWUKICAgICAgICBT\nZXQ8RW50cnk8TG9uZywgQXJyYXlMaXN0PEluZXRTb2NrZXRBZGRyZXNzPj4+\nIGVudHJ5U2V0ID0gTGVkZ2VySGFuZGxlQWRhcHRlcgogICAgICAgICAgICAg\nICAgLmdldExlZGdlck1ldGFkYXRhKGxoKS5nZXRFbnNlbWJsZXMoKS5lbnRy\neVNldCgpOwogICAgICAgIGZvciAoRW50cnk8TG9uZywgQXJyYXlMaXN0PElu\nZXRTb2NrZXRBZGRyZXNzPj4gZW50cnkgOiBlbnRyeVNldCkgewogICAgICAg\nICAgICBBcnJheUxpc3Q8SW5ldFNvY2tldEFkZHJlc3M+IGJvb2tpZXMgPSBl\nbnRyeS5nZXRWYWx1ZSgpOwogICAgICAgICAgICBmb3IgKEluZXRTb2NrZXRB\nZGRyZXNzIGJvb2tpZSA6IGJvb2tpZXMpIHsKICAgICAgICAgICAgICAgIGlm\nIChib29raWUuZXF1YWxzKG5ld0JrQWRkcikpIHsKICAgICAgICAgICAgICAg\nICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAg\nICAgIGtpbGxCb29raWUoYm9va2llKTsKICAgICAgICAgICAgfQogICAgICAg\nIH0KCiAgICAgICAgLy8gU2hvdWxkIGJlIGFibGUgdG8gcmVhZCB0aGUgZW50\ncmllcyBmcm9tIDAtOQogICAgICAgIExlZGdlckhhbmRsZSBsaHMgPSBia2Mu\nb3BlbkxlZGdlck5vUmVjb3ZlcnkobGguZ2V0SWQoKSwKICAgICAgICAgICAg\nICAgIEJvb2tLZWVwZXIuRGlnZXN0VHlwZS5DUkMzMiwgInRlc3RwYXNzd2Qi\nLmdldEJ5dGVzKCkpOwogICAgICAgIEVudW1lcmF0aW9uPExlZGdlckVudHJ5\nPiBlbnRyaWVzID0gbGhzLnJlYWRFbnRyaWVzKDAsIDkpOwogICAgICAgIGFz\nc2VydFRydWUoIlNob3VsZCBoYXZlIHRoZSBlbGVtZW50cyIsIGVudHJpZXMu\naGFzTW9yZUVsZW1lbnRzKCkpOwogICAgICAgIHdoaWxlIChlbnRyaWVzLmhh\nc01vcmVFbGVtZW50cygpKSB7CiAgICAgICAgICAgIExlZGdlckVudHJ5IGVu\ndHJ5ID0gZW50cmllcy5uZXh0RWxlbWVudCgpOwogICAgICAgICAgICBhc3Nl\ncnRFcXVhbHMoInRlc3RCdWlsdEF1dG9SZWNvdmVyeSIsIG5ldyBTdHJpbmco\nZW50cnkuZ2V0RW50cnkoKSkpOwogICAgICAgIH0KICAgIH0KfQo=\n","encoding":"base64"}

