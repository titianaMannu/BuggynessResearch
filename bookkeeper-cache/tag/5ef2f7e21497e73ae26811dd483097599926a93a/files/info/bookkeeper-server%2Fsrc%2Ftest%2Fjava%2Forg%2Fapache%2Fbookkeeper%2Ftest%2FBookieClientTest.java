{"sha":"34c14ab484905e59f8d41b35435a73a19c617b28","node_id":"MDQ6QmxvYjE1NzU5NTY6MzRjMTRhYjQ4NDkwNWU1OWY4ZDQxYjM1NDM1YTczYTE5YzYxN2IyOA==","size":8902,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/34c14ab484905e59f8d41b35435a73a19c617b28","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIudGVzdDsKCi8qCiAqCiAq\nIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAo\nQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNl\nIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRpc3RyaWJ1\ndGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9u\nCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBs\naWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUg\nTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIpOyB5b3Ug\nbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlCiAq\nIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2Yg\ndGhlIExpY2Vuc2UgYXQKICoKICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcv\nbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5\nIGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAogKiBz\nb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0\ncmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJB\nTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVyIGV4\ncHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlCiAq\nIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQg\nbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqCiAqLwoKaW1w\nb3J0IGphdmEuaW8uRmlsZTsKaW1wb3J0IGphdmEubmV0LkluZXRTb2NrZXRB\nZGRyZXNzOwppbXBvcnQgamF2YS5uaW8uQnl0ZUJ1ZmZlcjsKaW1wb3J0IGph\ndmEudXRpbC5BcnJheXM7CmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5F\neGVjdXRvcnM7CgppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmJ1ZmZlci5DaGFu\nbmVsQnVmZmVyOwppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmJ1ZmZlci5DaGFu\nbmVsQnVmZmVyczsKaW1wb3J0IG9yZy5qYm9zcy5uZXR0eS5jaGFubmVsLnNv\nY2tldC5DbGllbnRTb2NrZXRDaGFubmVsRmFjdG9yeTsKaW1wb3J0IG9yZy5q\nYm9zcy5uZXR0eS5jaGFubmVsLnNvY2tldC5uaW8uTmlvQ2xpZW50U29ja2V0\nQ2hhbm5lbEZhY3Rvcnk7CmltcG9ydCBvcmcuanVuaXQuVGVzdDsKaW1wb3J0\nIG9yZy5hcGFjaGUuYm9va2tlZXBlci5jb25mLkNsaWVudENvbmZpZ3VyYXRp\nb247CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY29uZi5TZXJ2ZXJD\nb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNs\naWVudC5CS0V4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBl\nci5wcm90by5Cb29raWVDbGllbnQ7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2tr\nZWVwZXIucHJvdG8uQm9va2llUHJvdG9jb2w7CmltcG9ydCBvcmcuYXBhY2hl\nLmJvb2trZWVwZXIucHJvdG8uQm9va2llU2VydmVyOwppbXBvcnQgb3JnLmFw\nYWNoZS5ib29ra2VlcGVyLnByb3RvLkJvb2trZWVwZXJJbnRlcm5hbENhbGxi\nYWNrcy5SZWFkRW50cnlDYWxsYmFjazsKaW1wb3J0IG9yZy5hcGFjaGUuYm9v\na2tlZXBlci5wcm90by5Cb29ra2VlcGVySW50ZXJuYWxDYWxsYmFja3MuV3Jp\ndGVDYWxsYmFjazsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci51dGls\nLk9yZGVyZWRTYWZlRXhlY3V0b3I7CmltcG9ydCBvcmcuc2xmNGouTG9nZ2Vy\nOwppbXBvcnQgb3JnLnNsZjRqLkxvZ2dlckZhY3Rvcnk7CgppbXBvcnQganVu\naXQuZnJhbWV3b3JrLlRlc3RDYXNlOwoKcHVibGljIGNsYXNzIEJvb2tpZUNs\naWVudFRlc3QgZXh0ZW5kcyBUZXN0Q2FzZSB7CiAgICBzdGF0aWMgTG9nZ2Vy\nIExPRyA9IExvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKEJvb2tpZUNsaWVudFRl\nc3QuY2xhc3MpOwogICAgQm9va2llU2VydmVyIGJzOwogICAgRmlsZSB0bXBE\naXI7CiAgICBwdWJsaWMgaW50IHBvcnQgPSAxMzY0NTsKICAgIHB1YmxpYyBD\nbGllbnRTb2NrZXRDaGFubmVsRmFjdG9yeSBjaGFubmVsRmFjdG9yeTsKICAg\nIHB1YmxpYyBPcmRlcmVkU2FmZUV4ZWN1dG9yIGV4ZWN1dG9yOwogICAgU2Vy\ndmVyQ29uZmlndXJhdGlvbiBjb25mID0gbmV3IFNlcnZlckNvbmZpZ3VyYXRp\nb24oKTsKCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkg\ndGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgdG1wRGlyID0gRmlsZS5jcmVh\ndGVUZW1wRmlsZSgiYm9va2llIiwgInRlc3QiKTsKICAgICAgICB0bXBEaXIu\nZGVsZXRlKCk7CiAgICAgICAgdG1wRGlyLm1rZGlyKCk7CgogICAgICAgIC8v\nIFNpbmNlIHRoaXMgdGVzdCBkb2VzIG5vdCByZWx5IG9uIHRoZSBCb29rS2Vl\ncGVyIGNsaWVudCBuZWVkaW5nIHRvCiAgICAgICAgLy8ga25vdyB2aWEgWm9v\nS2VlcGVyIHdoaWNoIEJvb2tpZXMgYXJlIGF2YWlsYWJsZSwgb2theSwgc28g\ncGFzcyBpbiBudWxsCiAgICAgICAgLy8gZm9yIHRoZSB6a1NlcnZlcnMgaW5w\ndXQgcGFyYW1ldGVyIHdoZW4gY29uc3RydWN0aW5nIHRoZSBCb29raWVTZXJ2\nZXIuCiAgICAgICAgU2VydmVyQ29uZmlndXJhdGlvbiBjb25mID0gbmV3IFNl\ncnZlckNvbmZpZ3VyYXRpb24oKTsKICAgICAgICBjb25mLnNldFprU2VydmVy\ncyhudWxsKS5zZXRCb29raWVQb3J0KHBvcnQpCiAgICAgICAgICAgIC5zZXRK\nb3VybmFsRGlyTmFtZSh0bXBEaXIuZ2V0UGF0aCgpKQogICAgICAgICAgICAu\nc2V0TGVkZ2VyRGlyTmFtZXMobmV3IFN0cmluZ1tdIHsgdG1wRGlyLmdldFBh\ndGgoKSB9KTsKICAgICAgICBicyA9IG5ldyBCb29raWVTZXJ2ZXIoY29uZik7\nCiAgICAgICAgYnMuc3RhcnQoKTsKICAgICAgICBjaGFubmVsRmFjdG9yeSA9\nIG5ldyBOaW9DbGllbnRTb2NrZXRDaGFubmVsRmFjdG9yeShFeGVjdXRvcnMu\nbmV3Q2FjaGVkVGhyZWFkUG9vbCgpLCBFeGVjdXRvcnMKICAgICAgICAgICAg\nICAgIC5uZXdDYWNoZWRUaHJlYWRQb29sKCkpOwogICAgICAgIGV4ZWN1dG9y\nID0gbmV3IE9yZGVyZWRTYWZlRXhlY3V0b3IoMik7CiAgICB9CgogICAgQE92\nZXJyaWRlCiAgICBwdWJsaWMgdm9pZCB0ZWFyRG93bigpIHRocm93cyBFeGNl\ncHRpb24gewogICAgICAgIGJzLnNodXRkb3duKCk7CiAgICAgICAgcmVjdXJz\naXZlRGVsZXRlKHRtcERpcik7CiAgICAgICAgY2hhbm5lbEZhY3RvcnkucmVs\nZWFzZUV4dGVybmFsUmVzb3VyY2VzKCk7CiAgICAgICAgZXhlY3V0b3Iuc2h1\ndGRvd24oKTsKICAgIH0KCiAgICBwcml2YXRlIHN0YXRpYyB2b2lkIHJlY3Vy\nc2l2ZURlbGV0ZShGaWxlIGRpcikgewogICAgICAgIEZpbGUgY2hpbGRyZW5b\nXSA9IGRpci5saXN0RmlsZXMoKTsKICAgICAgICBpZiAoY2hpbGRyZW4gIT0g\nbnVsbCkgewogICAgICAgICAgICBmb3IgKEZpbGUgY2hpbGQgOiBjaGlsZHJl\nbikgewogICAgICAgICAgICAgICAgcmVjdXJzaXZlRGVsZXRlKGNoaWxkKTsK\nICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBkaXIuZGVsZXRlKCk7\nCiAgICB9CgogICAgc3RhdGljIGNsYXNzIFJlc3VsdFN0cnVjdCB7CiAgICAg\nICAgaW50IHJjOwogICAgICAgIEJ5dGVCdWZmZXIgZW50cnk7CiAgICB9Cgog\nICAgUmVhZEVudHJ5Q2FsbGJhY2sgcmVjYiA9IG5ldyBSZWFkRW50cnlDYWxs\nYmFjaygpIHsKCiAgICAgICAgcHVibGljIHZvaWQgcmVhZEVudHJ5Q29tcGxl\ndGUoaW50IHJjLCBsb25nIGxlZGdlcklkLCBsb25nIGVudHJ5SWQsIENoYW5u\nZWxCdWZmZXIgYmIsIE9iamVjdCBjdHgpIHsKICAgICAgICAgICAgUmVzdWx0\nU3RydWN0IHJzID0gKFJlc3VsdFN0cnVjdCkgY3R4OwogICAgICAgICAgICBz\neW5jaHJvbml6ZWQgKHJzKSB7CiAgICAgICAgICAgICAgICBycy5yYyA9IHJj\nOwogICAgICAgICAgICAgICAgaWYgKGJiICE9IG51bGwpIHsKICAgICAgICAg\nICAgICAgICAgICBiYi5yZWFkZXJJbmRleCgxNik7CiAgICAgICAgICAgICAg\nICAgICAgcnMuZW50cnkgPSBiYi50b0J5dGVCdWZmZXIoKTsKICAgICAgICAg\nICAgICAgICAgICBycy5ub3RpZnlBbGwoKTsKICAgICAgICAgICAgICAgIH0K\nICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICB9OwoKICAgIFdyaXRlQ2Fs\nbGJhY2sgd3JjYiA9IG5ldyBXcml0ZUNhbGxiYWNrKCkgewogICAgICAgIHB1\nYmxpYyB2b2lkIHdyaXRlQ29tcGxldGUoaW50IHJjLCBsb25nIGxlZGdlcklk\nLCBsb25nIGVudHJ5SWQsIEluZXRTb2NrZXRBZGRyZXNzIGFkZHIsIE9iamVj\ndCBjdHgpIHsKICAgICAgICAgICAgaWYgKGN0eCAhPSBudWxsKSB7CiAgICAg\nICAgICAgICAgICBzeW5jaHJvbml6ZWQgKGN0eCkgewogICAgICAgICAgICAg\nICAgICAgIGN0eC5ub3RpZnlBbGwoKTsKICAgICAgICAgICAgICAgIH0KICAg\nICAgICAgICAgfQogICAgICAgIH0KICAgIH07CgogICAgQFRlc3QodGltZW91\ndD02MDAwMCkKICAgIHB1YmxpYyB2b2lkIHRlc3RXcml0ZUdhcHMoKSB0aHJv\nd3MgRXhjZXB0aW9uIHsKICAgICAgICBmaW5hbCBPYmplY3Qgbm90aWZ5T2Jq\nZWN0ID0gbmV3IE9iamVjdCgpOwogICAgICAgIGJ5dGVbXSBwYXNzd2QgPSBu\nZXcgYnl0ZVsyMF07CiAgICAgICAgQXJyYXlzLmZpbGwocGFzc3dkLCAoYnl0\nZSkgJ2EnKTsKICAgICAgICBJbmV0U29ja2V0QWRkcmVzcyBhZGRyID0gbmV3\nIEluZXRTb2NrZXRBZGRyZXNzKCIxMjcuMC4wLjEiLCBwb3J0KTsKICAgICAg\nICBSZXN1bHRTdHJ1Y3QgYXJjID0gbmV3IFJlc3VsdFN0cnVjdCgpOwoKICAg\nICAgICBCb29raWVDbGllbnQgYmMgPSBuZXcgQm9va2llQ2xpZW50KG5ldyBD\nbGllbnRDb25maWd1cmF0aW9uKCksIGNoYW5uZWxGYWN0b3J5LCBleGVjdXRv\ncik7CiAgICAgICAgQ2hhbm5lbEJ1ZmZlciBiYjsKICAgICAgICBiYiA9IGNy\nZWF0ZUJ5dGVCdWZmZXIoMSwgMSwgMSk7CiAgICAgICAgYmMuYWRkRW50cnko\nYWRkciwgMSwgcGFzc3dkLCAxLCBiYiwgd3JjYiwgYXJjLCBCb29raWVQcm90\nb2NvbC5GTEFHX05PTkUpOwogICAgICAgIHN5bmNocm9uaXplZCAoYXJjKSB7\nCiAgICAgICAgICAgIGFyYy53YWl0KDEwMDApOwogICAgICAgICAgICBiYy5y\nZWFkRW50cnkoYWRkciwgMSwgMSwgcmVjYiwgYXJjKTsKICAgICAgICAgICAg\nYXJjLndhaXQoMTAwMCk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscygwLCBh\ncmMucmMpOwogICAgICAgICAgICBhc3NlcnRFcXVhbHMoMSwgYXJjLmVudHJ5\nLmdldEludCgpKTsKICAgICAgICB9CiAgICAgICAgYmIgPSBjcmVhdGVCeXRl\nQnVmZmVyKDIsIDEsIDIpOwogICAgICAgIGJjLmFkZEVudHJ5KGFkZHIsIDEs\nIHBhc3N3ZCwgMiwgYmIsIHdyY2IsIG51bGwsIEJvb2tpZVByb3RvY29sLkZM\nQUdfTk9ORSk7CiAgICAgICAgYmIgPSBjcmVhdGVCeXRlQnVmZmVyKDMsIDEs\nIDMpOwogICAgICAgIGJjLmFkZEVudHJ5KGFkZHIsIDEsIHBhc3N3ZCwgMywg\nYmIsIHdyY2IsIG51bGwsIEJvb2tpZVByb3RvY29sLkZMQUdfTk9ORSk7CiAg\nICAgICAgYmIgPSBjcmVhdGVCeXRlQnVmZmVyKDUsIDEsIDUpOwogICAgICAg\nIGJjLmFkZEVudHJ5KGFkZHIsIDEsIHBhc3N3ZCwgNSwgYmIsIHdyY2IsIG51\nbGwsIEJvb2tpZVByb3RvY29sLkZMQUdfTk9ORSk7CiAgICAgICAgYmIgPSBj\ncmVhdGVCeXRlQnVmZmVyKDcsIDEsIDcpOwogICAgICAgIGJjLmFkZEVudHJ5\nKGFkZHIsIDEsIHBhc3N3ZCwgNywgYmIsIHdyY2IsIG51bGwsIEJvb2tpZVBy\nb3RvY29sLkZMQUdfTk9ORSk7CiAgICAgICAgc3luY2hyb25pemVkIChub3Rp\nZnlPYmplY3QpIHsKICAgICAgICAgICAgYmIgPSBjcmVhdGVCeXRlQnVmZmVy\nKDExLCAxLCAxMSk7CiAgICAgICAgICAgIGJjLmFkZEVudHJ5KGFkZHIsIDEs\nIHBhc3N3ZCwgMTEsIGJiLCB3cmNiLCBub3RpZnlPYmplY3QsIEJvb2tpZVBy\nb3RvY29sLkZMQUdfTk9ORSk7CiAgICAgICAgICAgIG5vdGlmeU9iamVjdC53\nYWl0KCk7CiAgICAgICAgfQogICAgICAgIHN5bmNocm9uaXplZCAoYXJjKSB7\nCiAgICAgICAgICAgIGJjLnJlYWRFbnRyeShhZGRyLCAxLCA2LCByZWNiLCBh\ncmMpOwogICAgICAgICAgICBhcmMud2FpdCgxMDAwKTsKICAgICAgICAgICAg\nYXNzZXJ0RXF1YWxzKEJLRXhjZXB0aW9uLkNvZGUuTm9TdWNoRW50cnlFeGNl\ncHRpb24sIGFyYy5yYyk7CiAgICAgICAgfQogICAgICAgIHN5bmNocm9uaXpl\nZCAoYXJjKSB7CiAgICAgICAgICAgIGJjLnJlYWRFbnRyeShhZGRyLCAxLCA3\nLCByZWNiLCBhcmMpOwogICAgICAgICAgICBhcmMud2FpdCgxMDAwKTsKICAg\nICAgICAgICAgYXNzZXJ0RXF1YWxzKDAsIGFyYy5yYyk7CiAgICAgICAgICAg\nIGFzc2VydEVxdWFscyg3LCBhcmMuZW50cnkuZ2V0SW50KCkpOwogICAgICAg\nIH0KICAgICAgICBzeW5jaHJvbml6ZWQgKGFyYykgewogICAgICAgICAgICBi\nYy5yZWFkRW50cnkoYWRkciwgMSwgMSwgcmVjYiwgYXJjKTsKICAgICAgICAg\nICAgYXJjLndhaXQoMTAwMCk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscygw\nLCBhcmMucmMpOwogICAgICAgICAgICBhc3NlcnRFcXVhbHMoMSwgYXJjLmVu\ndHJ5LmdldEludCgpKTsKICAgICAgICB9CiAgICAgICAgc3luY2hyb25pemVk\nIChhcmMpIHsKICAgICAgICAgICAgYmMucmVhZEVudHJ5KGFkZHIsIDEsIDIs\nIHJlY2IsIGFyYyk7CiAgICAgICAgICAgIGFyYy53YWl0KDEwMDApOwogICAg\nICAgICAgICBhc3NlcnRFcXVhbHMoMCwgYXJjLnJjKTsKICAgICAgICAgICAg\nYXNzZXJ0RXF1YWxzKDIsIGFyYy5lbnRyeS5nZXRJbnQoKSk7CiAgICAgICAg\nfQogICAgICAgIHN5bmNocm9uaXplZCAoYXJjKSB7CiAgICAgICAgICAgIGJj\nLnJlYWRFbnRyeShhZGRyLCAxLCAzLCByZWNiLCBhcmMpOwogICAgICAgICAg\nICBhcmMud2FpdCgxMDAwKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKDAs\nIGFyYy5yYyk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscygzLCBhcmMuZW50\ncnkuZ2V0SW50KCkpOwogICAgICAgIH0KICAgICAgICBzeW5jaHJvbml6ZWQg\nKGFyYykgewogICAgICAgICAgICBiYy5yZWFkRW50cnkoYWRkciwgMSwgNCwg\ncmVjYiwgYXJjKTsKICAgICAgICAgICAgYXJjLndhaXQoMTAwMCk7CiAgICAg\nICAgICAgIGFzc2VydEVxdWFscyhCS0V4Y2VwdGlvbi5Db2RlLk5vU3VjaEVu\ndHJ5RXhjZXB0aW9uLCBhcmMucmMpOwogICAgICAgIH0KICAgICAgICBzeW5j\naHJvbml6ZWQgKGFyYykgewogICAgICAgICAgICBiYy5yZWFkRW50cnkoYWRk\nciwgMSwgMTEsIHJlY2IsIGFyYyk7CiAgICAgICAgICAgIGFyYy53YWl0KDEw\nMDApOwogICAgICAgICAgICBhc3NlcnRFcXVhbHMoMCwgYXJjLnJjKTsKICAg\nICAgICAgICAgYXNzZXJ0RXF1YWxzKDExLCBhcmMuZW50cnkuZ2V0SW50KCkp\nOwogICAgICAgIH0KICAgICAgICBzeW5jaHJvbml6ZWQgKGFyYykgewogICAg\nICAgICAgICBiYy5yZWFkRW50cnkoYWRkciwgMSwgNSwgcmVjYiwgYXJjKTsK\nICAgICAgICAgICAgYXJjLndhaXQoMTAwMCk7CiAgICAgICAgICAgIGFzc2Vy\ndEVxdWFscygwLCBhcmMucmMpOwogICAgICAgICAgICBhc3NlcnRFcXVhbHMo\nNSwgYXJjLmVudHJ5LmdldEludCgpKTsKICAgICAgICB9CiAgICAgICAgc3lu\nY2hyb25pemVkIChhcmMpIHsKICAgICAgICAgICAgYmMucmVhZEVudHJ5KGFk\nZHIsIDEsIDEwLCByZWNiLCBhcmMpOwogICAgICAgICAgICBhcmMud2FpdCgx\nMDAwKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKEJLRXhjZXB0aW9uLkNv\nZGUuTm9TdWNoRW50cnlFeGNlcHRpb24sIGFyYy5yYyk7CiAgICAgICAgfQog\nICAgICAgIHN5bmNocm9uaXplZCAoYXJjKSB7CiAgICAgICAgICAgIGJjLnJl\nYWRFbnRyeShhZGRyLCAxLCAxMiwgcmVjYiwgYXJjKTsKICAgICAgICAgICAg\nYXJjLndhaXQoMTAwMCk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscyhCS0V4\nY2VwdGlvbi5Db2RlLk5vU3VjaEVudHJ5RXhjZXB0aW9uLCBhcmMucmMpOwog\nICAgICAgIH0KICAgICAgICBzeW5jaHJvbml6ZWQgKGFyYykgewogICAgICAg\nICAgICBiYy5yZWFkRW50cnkoYWRkciwgMSwgMTMsIHJlY2IsIGFyYyk7CiAg\nICAgICAgICAgIGFyYy53YWl0KDEwMDApOwogICAgICAgICAgICBhc3NlcnRF\ncXVhbHMoQktFeGNlcHRpb24uQ29kZS5Ob1N1Y2hFbnRyeUV4Y2VwdGlvbiwg\nYXJjLnJjKTsKICAgICAgICB9CiAgICB9CgogICAgcHJpdmF0ZSBDaGFubmVs\nQnVmZmVyIGNyZWF0ZUJ5dGVCdWZmZXIoaW50IGksIGxvbmcgbGlkLCBsb25n\nIGVpZCkgewogICAgICAgIEJ5dGVCdWZmZXIgYmI7CiAgICAgICAgYmIgPSBC\neXRlQnVmZmVyLmFsbG9jYXRlKDQgKyAxNik7CiAgICAgICAgYmIucHV0TG9u\nZyhsaWQpOwogICAgICAgIGJiLnB1dExvbmcoZWlkKTsKICAgICAgICBiYi5w\ndXRJbnQoaSk7CiAgICAgICAgYmIuZmxpcCgpOwogICAgICAgIHJldHVybiBD\naGFubmVsQnVmZmVycy53cmFwcGVkQnVmZmVyKGJiKTsKICAgIH0KCiAgICBA\nVGVzdCh0aW1lb3V0PTYwMDAwKQogICAgcHVibGljIHZvaWQgdGVzdE5vTGVk\nZ2VyKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgUmVzdWx0U3RydWN0\nIGFyYyA9IG5ldyBSZXN1bHRTdHJ1Y3QoKTsKICAgICAgICBJbmV0U29ja2V0\nQWRkcmVzcyBhZGRyID0gbmV3IEluZXRTb2NrZXRBZGRyZXNzKCIxMjcuMC4w\nLjEiLCBwb3J0KTsKICAgICAgICBCb29raWVDbGllbnQgYmMgPSBuZXcgQm9v\na2llQ2xpZW50KG5ldyBDbGllbnRDb25maWd1cmF0aW9uKCksIGNoYW5uZWxG\nYWN0b3J5LCBleGVjdXRvcik7CiAgICAgICAgc3luY2hyb25pemVkIChhcmMp\nIHsKICAgICAgICAgICAgYmMucmVhZEVudHJ5KGFkZHIsIDIsIDEzLCByZWNi\nLCBhcmMpOwogICAgICAgICAgICBhcmMud2FpdCgxMDAwKTsKICAgICAgICAg\nICAgYXNzZXJ0RXF1YWxzKEJLRXhjZXB0aW9uLkNvZGUuTm9TdWNoRW50cnlF\neGNlcHRpb24sIGFyYy5yYyk7CiAgICAgICAgfQogICAgfQp9Cg==\n","encoding":"base64"}

