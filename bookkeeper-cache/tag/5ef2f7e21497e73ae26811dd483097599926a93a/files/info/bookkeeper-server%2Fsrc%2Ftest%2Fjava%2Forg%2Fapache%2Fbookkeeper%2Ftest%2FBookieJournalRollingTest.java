{"sha":"5e0a92c1adaf0cb994caa6416237473d1edd5f8b","node_id":"MDQ6QmxvYjE1NzU5NTY6NWUwYTkyYzFhZGFmMGNiOTk0Y2FhNjQxNjIzNzQ3M2QxZWRkNWY4Yg==","size":8989,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/5e0a92c1adaf0cb994caa6416237473d1edd5f8b","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIudGVzdDsKCi8qCiAqCiAq\nIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAo\nQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNl\nIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRpc3RyaWJ1\ndGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9u\nCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBs\naWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUg\nTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIpOyB5b3Ug\nbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlCiAq\nIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2Yg\ndGhlIExpY2Vuc2UgYXQKICoKICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcv\nbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5\nIGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAogKiBz\nb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0\ncmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJB\nTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVyIGV4\ncHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlCiAq\nIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQg\nbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqCiAqLwppbXBv\ncnQgamF2YS5pby5GaWxlOwppbXBvcnQgamF2YS51dGlsLkVudW1lcmF0aW9u\nOwppbXBvcnQgamF2YS51dGlsLkxpc3Q7CgppbXBvcnQgb3JnLmFwYWNoZS5i\nb29ra2VlcGVyLmNvbmYuU2VydmVyQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9y\nZy5hcGFjaGUuYm9va2tlZXBlci5ib29raWUuQm9va2llOwppbXBvcnQgb3Jn\nLmFwYWNoZS5ib29ra2VlcGVyLmNsaWVudC5MZWRnZXJFbnRyeTsKaW1wb3J0\nIG9yZy5hcGFjaGUuYm9va2tlZXBlci5jbGllbnQuTGVkZ2VySGFuZGxlOwpp\nbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNsaWVudC5Cb29rS2VlcGVy\nLkRpZ2VzdFR5cGU7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIucHJv\ndG8uQm9va2llU2VydmVyOwoKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXI7Cmlt\ncG9ydCBvcmcuc2xmNGouTG9nZ2VyRmFjdG9yeTsKCmltcG9ydCBvcmcuanVu\naXQuQXNzZXJ0OwppbXBvcnQgb3JnLmp1bml0LkFmdGVyOwppbXBvcnQgb3Jn\nLmp1bml0LkJlZm9yZTsKaW1wb3J0IG9yZy5qdW5pdC5UZXN0OwoKLyoqCiAq\nIFRoaXMgY2xhc3MgdGVzdHMgdGhhdCBib29raWUgcm9sbGluZyBqb3VybmFs\ncwogKi8KcHVibGljIGNsYXNzIEJvb2tpZUpvdXJuYWxSb2xsaW5nVGVzdCBl\neHRlbmRzIEJvb2tLZWVwZXJDbHVzdGVyVGVzdENhc2UgewogICAgc3RhdGlj\nIExvZ2dlciBMT0cgPSBMb2dnZXJGYWN0b3J5LmdldExvZ2dlcihCb29raWVK\nb3VybmFsUm9sbGluZ1Rlc3QuY2xhc3MpOwoKICAgIERpZ2VzdFR5cGUgZGln\nZXN0VHlwZTsKCiAgICBwdWJsaWMgQm9va2llSm91cm5hbFJvbGxpbmdUZXN0\nKCkgewogICAgICAgIHN1cGVyKDMpOwogICAgICAgIHRoaXMuZGlnZXN0VHlw\nZSA9IERpZ2VzdFR5cGUuQ1JDMzI7CiAgICB9CgogICAgQEJlZm9yZQogICAg\nQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpIHRocm93cyBFeGNl\ncHRpb24gewogICAgICAgIC8vIFNldCB1cCB0aGUgY29uZmlndXJhdGlvbiBw\ncm9wZXJ0aWVzIG5lZWRlZC4KICAgICAgICBiYXNlQ29uZi5zZXRNYXhKb3Vy\nbmFsU2l6ZSgxKTsKICAgICAgICBiYXNlQ29uZi5zZXRNYXhCYWNrdXBKb3Vy\nbmFscygxKTsKICAgICAgICBzdXBlci5zZXRVcCgpOwogICAgfQoKICAgIEBB\nZnRlcgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCB0ZWFyRG93bigp\nIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIHN1cGVyLnRlYXJEb3duKCk7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBDb21tb24gbWV0aG9kIHRvIGNyZWF0\nZSBsZWRnZXJzIGFuZCB3cml0ZSBlbnRyaWVzIHRvIHRoZW0uCiAgICAgKi8K\nICAgIHByaXZhdGUgTGVkZ2VySGFuZGxlW10gd3JpdGVMZWRnZXJFbnRyaWVz\nKGludCBudW1MZWRnZXJzLCBpbnQgbXNnU2l6ZSwgaW50IG51bU1zZ3MpIHRo\ncm93cyBFeGNlcHRpb24gewogICAgICAgIC8vIENyZWF0ZSB0aGUgbGVkZ2Vy\ncwogICAgICAgIExlZGdlckhhbmRsZVtdIGxocyA9IG5ldyBMZWRnZXJIYW5k\nbGVbbnVtTGVkZ2Vyc107CiAgICAgICAgbG9uZ1tdIGxlZGdlcklkcyA9IG5l\ndyBsb25nW251bUxlZGdlcnNdOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBp\nIDwgbnVtTGVkZ2VyczsgaSsrKSB7CiAgICAgICAgICAgIGxoc1tpXSA9IGJr\nYy5jcmVhdGVMZWRnZXIoZGlnZXN0VHlwZSwgIiIuZ2V0Qnl0ZXMoKSk7CiAg\nICAgICAgICAgIGxlZGdlcklkc1tpXSA9IGxoc1tpXS5nZXRJZCgpOwogICAg\nICAgIH0KICAgICAgICB3cml0ZUxlZGdlckVudHJpZXMobGhzLCBtc2dTaXpl\nLCBudW1Nc2dzKTsKICAgICAgICAvLyBSZXR1cm4gdGhlIGxlZGdlciBoYW5k\nbGVzIHRvIHRoZSBpbnNlcnRlZCBsZWRnZXJzIGFuZCBlbnRyaWVzCiAgICAg\nICAgcmV0dXJuIGxoczsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgd3JpdGVM\nZWRnZXJFbnRyaWVzKExlZGdlckhhbmRsZVtdIGxocywgaW50IG1zZ1NpemUs\nIGludCBudW1Nc2dzKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICAvLyBD\ncmVhdGUgYSBkdW1teSBtZXNzYWdlIHN0cmluZyB0byB3cml0ZSBhcyBsZWRn\nZXIgZW50cmllcwogICAgICAgIFN0cmluZ0J1aWxkZXIgbXNnU0IgPSBuZXcg\nU3RyaW5nQnVpbGRlcigpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwg\nbXNnU2l6ZTsgaSsrKSB7CiAgICAgICAgICAgIG1zZ1NCLmFwcGVuZCgiYSIp\nOwogICAgICAgIH0KICAgICAgICBTdHJpbmcgbXNnID0gbXNnU0IudG9TdHJp\nbmcoKTsKCiAgICAgICAgLy8gV3JpdGUgYWxsIG9mIHRoZSBlbnRyaWVzIGZv\nciBhbGwgb2YgdGhlIGxlZGdlcnMKICAgICAgICBmb3IgKGludCBpID0gMDsg\naSA8IG51bU1zZ3M7IGkrKykgewogICAgICAgICAgICBmb3IgKGludCBqID0g\nMDsgaiA8IGxocy5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgU3Ry\naW5nQnVpbGRlciBzYiA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7CiAgICAgICAg\nICAgICAgICBzYi5hcHBlbmQobGhzW2pdLmdldElkKCkpLmFwcGVuZCgnLScp\nLmFwcGVuZChpKS5hcHBlbmQoJy0nKQogICAgICAgICAgICAgICAgICAuYXBw\nZW5kKG1zZyk7CiAgICAgICAgICAgICAgICBsaHNbal0uYWRkRW50cnkoc2Iu\ndG9TdHJpbmcoKS5nZXRCeXRlcygpKTsKICAgICAgICAgICAgfQogICAgICAg\nIH0KICAgIH0KCiAgICBwcml2YXRlIHZvaWQgdmFsaWRMZWRnZXJFbnRyaWVz\nKGxvbmdbXSBsZWRnZXJJZHMsIGludCBtc2dTaXplLCBpbnQgbnVtTXNncykg\ndGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgLy8gT3BlbiB0aGUgbGVkZ2Vy\ncwogICAgICAgIExlZGdlckhhbmRsZVtdIGxocyA9IG5ldyBMZWRnZXJIYW5k\nbGVbbGVkZ2VySWRzLmxlbmd0aF07CiAgICAgICAgZm9yIChpbnQgaSA9IDA7\nIGkgPCBsaHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgbGhzW2ldID0g\nYmtjLm9wZW5MZWRnZXIobGVkZ2VySWRzW2ldLCBkaWdlc3RUeXBlLCAiIi5n\nZXRCeXRlcygpKTsKICAgICAgICB9CgogICAgICAgIFN0cmluZ0J1aWxkZXIg\nbXNnU0IgPSBuZXcgU3RyaW5nQnVpbGRlcigpOwogICAgICAgIGZvciAoaW50\nIGkgPSAwOyBpIDwgbXNnU2l6ZTsgaSsrKSB7CiAgICAgICAgICAgIG1zZ1NC\nLmFwcGVuZCgiYSIpOwogICAgICAgIH0KICAgICAgICBTdHJpbmcgbXNnID0g\nbXNnU0IudG9TdHJpbmcoKTsKCiAgICAgICAgaW50IG51bVRvUmVhZCA9IDEw\nOwogICAgICAgIC8vIHJlYWQgYWxsIG9mIHRoZSBlbnRyaWVzIGZvciBhbGwg\ndGhlIGxlZGdlcnMKICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IGxocy5s\nZW5ndGg7IGorKykgewogICAgICAgICAgICBpbnQgc3RhcnQgPSAwOwogICAg\nICAgICAgICBpbnQgcmVhZCA9IE1hdGgubWluKG51bVRvUmVhZCwgbnVtTXNn\ncyAtIHN0YXJ0KTsKICAgICAgICAgICAgaW50IGVuZCA9IHN0YXJ0ICsgcmVh\nZCAtIDE7CiAgICAgICAgICAgIGludCBlbnRyeUlkID0gMDsKICAgICAgICAg\nICAgaWYgKExPRy5pc0RlYnVnRW5hYmxlZCgpKSB7CiAgICAgICAgICAgICAg\nICBMT0cuZGVidWcoIlZhbGlkYXRpbmcgRW50cmllcyBvZiBMZWRnZXIgIiAr\nIGxlZGdlcklkc1tqXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgd2hp\nbGUgKHN0YXJ0IDwgbnVtTXNncykgewogICAgICAgICAgICAgICAgRW51bWVy\nYXRpb248TGVkZ2VyRW50cnk+IHNlcSA9IGxoc1tqXS5yZWFkRW50cmllcyhz\ndGFydCwgZW5kKTsKICAgICAgICAgICAgICAgIGFzc2VydFRydWUoIkVudW1l\ncmF0aW9uIG9mIGxlZGdlciBlbnRyaWVzIGhhcyBubyBlbGVtZW50Iiwgc2Vx\nLmhhc01vcmVFbGVtZW50cygpID09IHRydWUpOwogICAgICAgICAgICAgICAg\nd2hpbGUgKHNlcS5oYXNNb3JlRWxlbWVudHMoKSkgewogICAgICAgICAgICAg\nICAgICAgIExlZGdlckVudHJ5IGUgPSBzZXEubmV4dEVsZW1lbnQoKTsKICAg\nICAgICAgICAgICAgICAgICBhc3NlcnRFcXVhbHMoZW50cnlJZCwgZS5nZXRF\nbnRyeUlkKCkpOwoKICAgICAgICAgICAgICAgICAgICBTdHJpbmdCdWlsZGVy\nIHNiID0gbmV3IFN0cmluZ0J1aWxkZXIoKTsKICAgICAgICAgICAgICAgICAg\nICBzYi5hcHBlbmQobGVkZ2VySWRzW2pdKS5hcHBlbmQoJy0nKS5hcHBlbmQo\nZW50cnlJZCkuYXBwZW5kKCctJykKICAgICAgICAgICAgICAgICAgICAgIC5h\ncHBlbmQobXNnKTsKICAgICAgICAgICAgICAgICAgICBBc3NlcnQuYXNzZXJ0\nQXJyYXlFcXVhbHMoc2IudG9TdHJpbmcoKS5nZXRCeXRlcygpLCBlLmdldEVu\ndHJ5KCkpOwogICAgICAgICAgICAgICAgICAgIGVudHJ5SWQrKzsKICAgICAg\nICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGFzc2VydEVxdWFscyhlbnRy\neUlkIC0gMSwgZW5kKTsKICAgICAgICAgICAgICAgIHN0YXJ0ID0gZW5kICsg\nMTsKICAgICAgICAgICAgICAgIHJlYWQgPSBNYXRoLm1pbihudW1Ub1JlYWQs\nIG51bU1zZ3MgLSBzdGFydCk7CiAgICAgICAgICAgICAgICBlbmQgPSBzdGFy\ndCArIHJlYWQgLSAxOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoK\nICAgIC8qKgogICAgICogVGhpcyB0ZXN0IHdyaXRlcyBlbm91Z2ggbGVkZ2Vy\nIGVudHJpZXMgdG8gcm9sbCBvdmVyIHRoZSBqb3VybmFscwogICAgICoKICAg\nICAqIEl0IHdpbGwgdGhlbiBrZWVwIG9ubHkgMSBqb3VybmFsIGZpbGUgYmVm\nb3JlIGxhc3QgbWFya2VkIGpvdXJuYWwKICAgICAqCiAgICAgKiBAdGhyb3dz\nIEV4Y2VwdGlvbgogICAgICovCiAgICBAVGVzdCh0aW1lb3V0PTYwMDAwKQog\nICAgcHVibGljIHZvaWQgdGVzdEpvdXJuYWxSb2xsaW5nKCkgdGhyb3dzIEV4\nY2VwdGlvbiB7CiAgICAgICAgaWYgKExPRy5pc0RlYnVnRW5hYmxlZCgpKSB7\nCiAgICAgICAgICAgIExPRy5kZWJ1ZygiVGVzdGluZyBKb3VybmFsIFJvbGxp\nbmciKTsKICAgICAgICB9CiAgICAgICAgLy8gV3JpdGUgZW5vdWdoIGxlZGdl\nciBlbnRyaWVzIHNvIHRoYXQgd2Ugcm9sbCBvdmVyIGpvdXJuYWxzCiAgICAg\nICAgTGVkZ2VySGFuZGxlW10gbGhzID0gd3JpdGVMZWRnZXJFbnRyaWVzKDQs\nIDEwMjQsIDEwMjQpOwogICAgICAgIGxvbmdbXSBsZWRnZXJJZHMgPSBuZXcg\nbG9uZ1tsaHMubGVuZ3RoXTsKICAgICAgICBmb3IgKGludCBpPTA7IGk8bGhz\nLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGxlZGdlcklkc1tpXSA9IGxo\nc1tpXS5nZXRJZCgpOwogICAgICAgIH0KCiAgICAgICAgLy8gU2xlZXAgZm9y\nIGEgd2hpbGUgdG8gZW5zdXJlIGRhdGEgYXJlIGZsdXNoZWQKICAgICAgICBU\naHJlYWQuc2xlZXAoMjAwMCk7CgogICAgICAgIC8vIHZlcmlmeSB0aGF0IHdl\nIG9ubHkga2VlcCBhdCBtb3N0IGpvdXJuYWwgZmlsZXMgCiAgICAgICAgZm9y\nIChGaWxlIGpvdXJuYWxEaXIgOiB0bXBEaXJzKSB7CiAgICAgICAgICAgIEZp\nbGVbXSBqb3VybmFscyA9IGpvdXJuYWxEaXIubGlzdEZpbGVzKCk7CiAgICAg\nICAgICAgIGludCBudW1Kb3VybmFscyA9IDA7CiAgICAgICAgICAgIGZvciAo\nRmlsZSBmIDogam91cm5hbHMpIHsKICAgICAgICAgICAgICAgIGlmICghZi5n\nZXROYW1lKCkuZW5kc1dpdGgoIi50eG4iKSkgewogICAgICAgICAgICAgICAg\nICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAg\nICAgKytudW1Kb3VybmFsczsKICAgICAgICAgICAgfQogICAgICAgICAgICBh\nc3NlcnRUcnVlKG51bUpvdXJuYWxzIDw9IDIpOwogICAgICAgIH0KCiAgICAg\nICAgLy8gcmVzdGFydCBib29raWVzIAogICAgICAgIC8vIGVuc3VyZSBhZnRl\nciByZXN0YXJ0IHdlIGNhbiByZWFkIHRoZSBlbnRyaWVzIHNpbmNlIGpvdXJu\nYWxzIHJvbGxzCiAgICAgICAgcmVzdGFydEJvb2tpZXMoKTsKICAgICAgICB2\nYWxpZExlZGdlckVudHJpZXMobGVkZ2VySWRzLCAxMDI0LCAxMDI0KTsKICAg\nIH0KCiAgICAvKioKICAgICAqIFRoaXMgdGVzdCB3cml0ZXMgZW5vdWdoIGxl\nZGdlciBlbnRyaWVzIHRvIHJvbGwgb3ZlciB0aGUgam91cm5hbHMKICAgICAq\nIHdpdGhvdXQgc3luYyB1cAogICAgICoKICAgICAqIEB0aHJvd3MgRXhjZXB0\naW9uCiAgICAgKi8KICAgIEBUZXN0KHRpbWVvdXQ9NjAwMDApCiAgICBwdWJs\naWMgdm9pZCB0ZXN0Sm91cm5hbFJvbGxpbmdXaXRob3V0U3luY3VwKCkgdGhy\nb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgaWYgKExPRy5pc0RlYnVnRW5hYmxl\nZCgpKSB7CiAgICAgICAgICAgIExPRy5kZWJ1ZygiVGVzdGluZyBKb3VybmFs\nIFJvbGxpbmcgd2l0aG91dCBzeW5jIHVwIik7CiAgICAgICAgfQoKICAgICAg\nICAvLyBzZXQgZmx1c2ggaW50ZXJ2YWwgdG8gYSBsYXJnZSB2YWx1ZQogICAg\nICAgIFNlcnZlckNvbmZpZ3VyYXRpb24gbmV3Q29uZiA9IG5ldyBTZXJ2ZXJD\nb25maWd1cmF0aW9uKCk7CiAgICAgICAgbmV3Q29uZi5zZXRGbHVzaEludGVy\ndmFsKDk5OTk5OTk5OSk7CiAgICAgICAgLy8gcmVzdGFydCBib29raWVzCiAg\nICAgICAgcmVzdGFydEJvb2tpZXMobmV3Q29uZik7CgogICAgICAgIC8vIFdy\naXRlIGVub3VnaCBsZWRnZXIgZW50cmllcyBzbyB0aGF0IHdlIHJvbGwgb3Zl\nciBqb3VybmFscwogICAgICAgIExlZGdlckhhbmRsZVtdIGxocyA9IHdyaXRl\nTGVkZ2VyRW50cmllcyg0LCAxMDI0LCAxMDI0KTsKICAgICAgICBsb25nW10g\nbGVkZ2VySWRzID0gbmV3IGxvbmdbbGhzLmxlbmd0aF07CiAgICAgICAgZm9y\nIChpbnQgaT0wOyBpPGxocy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBs\nZWRnZXJJZHNbaV0gPSBsaHNbaV0uZ2V0SWQoKTsKICAgICAgICB9CgogICAg\nICAgIC8vIGxlZGdlciBpbmRleGVzIGFyZSBub3QgZmx1c2hlZAogICAgICAg\nIC8vIGFuZCBhZnRlciBib29raWVzIHJlc3RhcnRlZCwgam91cm5hbHMgd2ls\nbCBiZSByZWxheWVkCiAgICAgICAgLy8gZW5zdXJlIHRoYXQgd2UgY2FuIHN0\naWxsIHJlYWQgdGhlIGVudHJpZXMKICAgICAgICByZXN0YXJ0Qm9va2llcyhu\nZXdDb25mKTsKICAgICAgICB2YWxpZExlZGdlckVudHJpZXMobGVkZ2VySWRz\nLCAxMDI0LCAxMDI0KTsKICAgIH0KCiAgICAvKioKICAgICAqIFRoaXMgdGVz\ndCB3cml0ZXMgZW5vdWdoIGxlZGdlciBlbnRyaWVzIHRvIHJvbGwgb3ZlciB0\naGUgam91cm5hbHMKICAgICAqIHdpdGhvdXQgc3luYyB1cAogICAgICoKICAg\nICAqIEB0aHJvd3MgRXhjZXB0aW9uCiAgICAgKi8KICAgIEBUZXN0KHRpbWVv\ndXQ9NjAwMDApCiAgICBwdWJsaWMgdm9pZCB0ZXN0UmVwbGF5RGVsZXRlZExl\nZGdlckpvdXJuYWxFbnRyaWVzKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAg\nICAgaWYgKExPRy5pc0RlYnVnRW5hYmxlZCgpKSB7CiAgICAgICAgICAgIExP\nRy5kZWJ1ZygiVGVzdGluZyByZXBsYXlpbmcgam91cm5hbCBlbnRyaWVzIHdo\nb3NlIGxlZGdlciBoYXMgYmVlbiByZW1vdmVkLiIpOwogICAgICAgIH0KCiAg\nICAgICAgLy8gV3JpdGUgZW50cmllcwogICAgICAgIExlZGdlckhhbmRsZVtd\nIGxocyA9IHdyaXRlTGVkZ2VyRW50cmllcygxLCAxMDI0LCAxMCk7CiAgICAg\nICAgLy8gV2FpdCB1bnRpbCBhbGwgZW50cmllcyBhcmUgZmx1c2hlZCBhbmQg\nbGFzdCBtYXJrIHJvbGxzCiAgICAgICAgVGhyZWFkLnNsZWVwKDMgKiBiYXNl\nQ29uZi5nZXRGbHVzaEludGVydmFsKCkpOwoKICAgICAgICAvLyByZXN0YXJ0\nIGJvb2tpZXMgd2l0aCBmbHVzaCBpbnRlcnZhbCBzZXQgdG8gYSBsYXJnZSB2\nYWx1ZQogICAgICAgIFNlcnZlckNvbmZpZ3VyYXRpb24gbmV3Q29uZiA9IG5l\ndyBTZXJ2ZXJDb25maWd1cmF0aW9uKCk7CiAgICAgICAgbmV3Q29uZi5zZXRG\nbHVzaEludGVydmFsKDk5OTk5OTk5OSk7CiAgICAgICAgLy8gcmVzdGFydCBi\nb29raWVzCiAgICAgICAgcmVzdGFydEJvb2tpZXMobmV3Q29uZik7CgogICAg\nICAgIC8vIFdyaXRlIGVudHJpZXMgYWdhaW4gdG8gbGV0IHRoZW0gZXhpc3Rl\nZCBpbiBqb3VybmFsCiAgICAgICAgd3JpdGVMZWRnZXJFbnRyaWVzKGxocywg\nMTAyNCwgMTApOwoKICAgICAgICAvLyBkZWxldGUgdGhlbQogICAgICAgIGZv\nciAoTGVkZ2VySGFuZGxlIGxoIDogbGhzKSB7CiAgICAgICAgICAgIGJrYy5k\nZWxldGVMZWRnZXIobGguZ2V0SWQoKSk7CiAgICAgICAgfQogICAgICAgIC8v\nIHdhaXQgZm9yIGdjCiAgICAgICAgVGhyZWFkLnNsZWVwKDIgKiBuZXdDb25m\nLmdldEdjV2FpdFRpbWUoKSk7CgogICAgICAgIC8vIHJlc3RhcnQgYm9va2ll\ncyBhZ2FpbiB0byB0cmlnZ2VyIHJlcGxheWluZyBqb3VybmFsCiAgICAgICAg\ncmVzdGFydEJvb2tpZXMobmV3Q29uZik7CiAgICB9Cgp9Cg==\n","encoding":"base64"}

