{"sha":"2279d3ee1a255d4c02881b44b83f1d9ba2703a6b","node_id":"MDQ6QmxvYjE1NzU5NTY6MjI3OWQzZWUxYTI1NWQ0YzAyODgxYjQ0YjgzZjFkOWJhMjcwM2E2Yg==","size":5961,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/2279d3ee1a255d4c02881b44b83f1d9ba2703a6b","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIudGVzdDsKCi8qCiAqCiAq\nIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAo\nQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNl\nIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRpc3RyaWJ1\ndGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9u\nCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBs\naWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUg\nTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIpOyB5b3Ug\nbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlCiAq\nIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2Yg\ndGhlIExpY2Vuc2UgYXQKICoKICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcv\nbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5\nIGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAogKiBz\nb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0\ncmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJB\nTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVyIGV4\ncHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlCiAq\nIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQg\nbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqCiAqLwoKaW1w\nb3J0IGphdmEuaW8uRmlsZTsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBl\nci5jbGllbnQuTGVkZ2VySGFuZGxlOwppbXBvcnQgb3JnLmFwYWNoZS5ib29r\na2VlcGVyLmNsaWVudC5Cb29rS2VlcGVyLkRpZ2VzdFR5cGU7CmltcG9ydCBv\ncmcuYXBhY2hlLmJvb2trZWVwZXIudXRpbC5UZXN0VXRpbHM7CmltcG9ydCBv\ncmcuc2xmNGouTG9nZ2VyOwppbXBvcnQgb3JnLnNsZjRqLkxvZ2dlckZhY3Rv\ncnk7CmltcG9ydCBvcmcuanVuaXQuQmVmb3JlOwppbXBvcnQgb3JnLmp1bml0\nLlRlc3Q7CgovKioKICogVGhpcyBjbGFzcyB0ZXN0cyB0aGUgbGVkZ2VyIGRl\nbGV0ZSBmdW5jdGlvbmFsaXR5IGJvdGggZnJvbSB0aGUgQm9va0tlZXBlcgog\nKiBjbGllbnQgYW5kIHRoZSBzZXJ2ZXIgc2lkZS4KICovCnB1YmxpYyBjbGFz\ncyBMZWRnZXJEZWxldGVUZXN0IGV4dGVuZHMgTXVsdGlMZWRnZXJNYW5hZ2Vy\nVGVzdENhc2UgewogICAgc3RhdGljIExvZ2dlciBMT0cgPSBMb2dnZXJGYWN0\nb3J5LmdldExvZ2dlcihMZWRnZXJEZWxldGVUZXN0LmNsYXNzKTsKICAgIERp\nZ2VzdFR5cGUgZGlnZXN0VHlwZTsKCiAgICBwdWJsaWMgTGVkZ2VyRGVsZXRl\nVGVzdChTdHJpbmcgbGVkZ2VyTWFuYWdlckZhY3RvcnkpIHsKICAgICAgICBz\ndXBlcigzKTsKICAgICAgICBMT0cuaW5mbygiUnVubmluZyB0ZXN0IGNhc2Ug\ndXNpbmcgbGVkZ2VyIG1hbmFnZXIgOiAiICsgbGVkZ2VyTWFuYWdlckZhY3Rv\ncnkpOwogICAgICAgIHRoaXMuZGlnZXN0VHlwZSA9IERpZ2VzdFR5cGUuQ1JD\nMzI7CiAgICAgICAgLy8gc2V0IGxlZGdlciBtYW5hZ2VyIG5hbWUKICAgICAg\nICBiYXNlQ29uZi5zZXRMZWRnZXJNYW5hZ2VyRmFjdG9yeUNsYXNzTmFtZShs\nZWRnZXJNYW5hZ2VyRmFjdG9yeSk7CiAgICAgICAgYmFzZUNsaWVudENvbmYu\nc2V0TGVkZ2VyTWFuYWdlckZhY3RvcnlDbGFzc05hbWUobGVkZ2VyTWFuYWdl\nckZhY3RvcnkpOwogICAgfQoKICAgIEBCZWZvcmUKICAgIEBPdmVycmlkZQog\nICAgcHVibGljIHZvaWQgc2V0VXAoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAg\nICAgICAvLyBTZXQgdXAgdGhlIGNvbmZpZ3VyYXRpb24gcHJvcGVydGllcyBu\nZWVkZWQuCiAgICAgICAgYmFzZUNvbmYuc2V0RW50cnlMb2dTaXplTGltaXQo\nMiAqIDEwMjQgKiAxMDI0TCk7CiAgICAgICAgYmFzZUNvbmYuc2V0R2NXYWl0\nVGltZSgxMDAwKTsKICAgICAgICBzdXBlci5zZXRVcCgpOwogICAgfQoKICAg\nIC8qKgogICAgICogQ29tbW9uIG1ldGhvZCB0byBjcmVhdGUgbGVkZ2VycyBh\nbmQgd3JpdGUgZW50cmllcyB0byB0aGVtLgogICAgICovCiAgICBwcml2YXRl\nIExlZGdlckhhbmRsZVtdIHdyaXRlTGVkZ2VyRW50cmllcyhpbnQgbnVtTGVk\nZ2VycywgaW50IG1zZ1NpemUsIGludCBudW1Nc2dzKSB0aHJvd3MgRXhjZXB0\naW9uIHsKICAgICAgICAvLyBDcmVhdGUgdGhlIGxlZGdlcnMKICAgICAgICBM\nZWRnZXJIYW5kbGVbXSBsaHMgPSBuZXcgTGVkZ2VySGFuZGxlW251bUxlZGdl\ncnNdOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbnVtTGVkZ2Vyczsg\naSsrKSB7CiAgICAgICAgICAgIGxoc1tpXSA9IGJrYy5jcmVhdGVMZWRnZXIo\nZGlnZXN0VHlwZSwgIiIuZ2V0Qnl0ZXMoKSk7CiAgICAgICAgfQoKICAgICAg\nICAvLyBDcmVhdGUgYSBkdW1teSBtZXNzYWdlIHN0cmluZyB0byB3cml0ZSBh\ncyBsZWRnZXIgZW50cmllcwogICAgICAgIFN0cmluZ0J1aWxkZXIgbXNnU0Ig\nPSBuZXcgU3RyaW5nQnVpbGRlcigpOwogICAgICAgIGZvciAoaW50IGkgPSAw\nOyBpIDwgbXNnU2l6ZTsgaSsrKSB7CiAgICAgICAgICAgIG1zZ1NCLmFwcGVu\nZCgiYSIpOwogICAgICAgIH0KICAgICAgICBTdHJpbmcgbXNnID0gbXNnU0Iu\ndG9TdHJpbmcoKTsKCiAgICAgICAgLy8gV3JpdGUgYWxsIG9mIHRoZSBlbnRy\naWVzIGZvciBhbGwgb2YgdGhlIGxlZGdlcnMKICAgICAgICBmb3IgKGludCBp\nID0gMDsgaSA8IG51bU1zZ3M7IGkrKykgewogICAgICAgICAgICBmb3IgKGlu\ndCBqID0gMDsgaiA8IG51bUxlZGdlcnM7IGorKykgewogICAgICAgICAgICAg\nICAgbGhzW2pdLmFkZEVudHJ5KG1zZy5nZXRCeXRlcygpKTsKICAgICAgICAg\nICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gUmV0dXJuIHRoZSBsZWRnZXIg\naGFuZGxlcyB0byB0aGUgaW5zZXJ0ZWQgbGVkZ2VycyBhbmQgZW50cmllcwog\nICAgICAgIHJldHVybiBsaHM7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGlz\nIHRlc3Qgd3JpdGVzIGVub3VnaCBsZWRnZXIgZW50cmllcyB0byByb2xsIG92\nZXIgdGhlIGVudHJ5IGxvZyBmaWxlLgogICAgICogSXQgd2lsbCB0aGVuIGRl\nbGV0ZSBhbGwgb2YgdGhlIGxlZGdlcnMgZnJvbSB0aGUgY2xpZW50IGFuZCBs\nZXQgdGhlCiAgICAgKiBzZXJ2ZXIncyBFbnRyeUxvZ2dlciBnYXJiYWdlIGNv\nbGxlY3RvciB0aHJlYWQgZGVsZXRlIHRoZSBpbml0aWFsIGVudHJ5CiAgICAg\nKiBsb2cgZmlsZS4KICAgICAqCiAgICAgKiBAdGhyb3dzIEV4Y2VwdGlvbgog\nICAgICovCiAgICBAVGVzdCh0aW1lb3V0PTYwMDAwKQogICAgcHVibGljIHZv\naWQgdGVzdExlZGdlckRlbGV0ZSgpIHRocm93cyBFeGNlcHRpb24gewogICAg\nICAgIC8vIFdyaXRlIGVub3VnaCBsZWRnZXIgZW50cmllcyBzbyB0aGF0IHdl\nIHJvbGwgb3ZlciB0aGUgaW5pdGlhbCBlbnRyeUxvZyAoMC5sb2cpCiAgICAg\nICAgTGVkZ2VySGFuZGxlW10gbGhzID0gd3JpdGVMZWRnZXJFbnRyaWVzKDMs\nIDEwMjQsIDEwMjQpOwoKICAgICAgICAvLyBEZWxldGUgYWxsIG9mIHRoZXNl\nIGxlZGdlcnMgZnJvbSB0aGUgQm9va0tlZXBlciBjbGllbnQKICAgICAgICBm\nb3IgKExlZGdlckhhbmRsZSBsaCA6IGxocykgewogICAgICAgICAgICBia2Mu\nZGVsZXRlTGVkZ2VyKGxoLmdldElkKCkpOwogICAgICAgIH0KICAgICAgICBM\nT0cuaW5mbygiRmluaXNoZWQgZGVsZXRpbmcgYWxsIGxlZGdlcnMgc28gd2Fp\ndGluZyBmb3IgdGhlIEdDIHRocmVhZCB0byBjbGVhbiB1cCB0aGUgZW50cnlM\nb2dzIik7CiAgICAgICAgVGhyZWFkLnNsZWVwKDIwMDApOwoKICAgICAgICAv\nLyBWZXJpZnkgdGhhdCB0aGUgZmlyc3QgZW50cnkgbG9nICgwLmxvZykgaGFz\nIGJlZW4gZGVsZXRlZCBmcm9tIGFsbCBvZiB0aGUgQm9va2llIFNlcnZlcnMu\nCiAgICAgICAgZm9yIChGaWxlIGxlZGdlckRpcmVjdG9yeSA6IHRtcERpcnMp\nIHsKICAgICAgICAgICAgYXNzZXJ0RmFsc2UoIkZvdW5kIHRoZSBlbnRyeSBs\nb2cgZmlsZSAoMC5sb2cpIHRoYXQgc2hvdWxkIGhhdmUgYmVlbiBkZWxldGVk\nIGluIGxlZGdlckRpcmVjdG9yeTogIgogICAgICAgICAgICAgICAgKyBsZWRn\nZXJEaXJlY3RvcnksIFRlc3RVdGlscy5oYXNMb2dGaWxlcyhsZWRnZXJEaXJl\nY3RvcnksIHRydWUsIDApKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAg\nICAgKiBUaGlzIHRlc3QgaXMgc2ltaWxhciB0byB0ZXN0TGVkZ2VyRGVsZXRl\nKCkgZXhjZXB0IGl0IHdpbGwgc3RvcCBhbmQKICAgICAqIHJlc3RhcnQgdGhl\nIEJvb2tpZSBTZXJ2ZXJzIGFmdGVyIGl0IGhhcyB3cml0dGVuIG91dCB0aGUg\nbGVkZ2VyIGVudHJpZXMuCiAgICAgKiBPbiByZXN0YXJ0LCB0aGVyZSB3aWxs\nIGJlIGV4aXN0aW5nIGVudHJ5IGxvZ3MgYW5kIGxlZGdlciBpbmRleCBmaWxl\ncyBmb3IKICAgICAqIHRoZSBFbnRyeUxvZ2dlciBhbmQgTGVkZ2VyQ2FjaGUg\ndG8gcmVhZCBhbmQgc3RvcmUgaW50byBtZW1vcnkuCiAgICAgKgogICAgICog\nQHRocm93cyBFeGNlcHRpb24KICAgICAqLwogICAgQFRlc3QodGltZW91dD02\nMDAwMCkKICAgIHB1YmxpYyB2b2lkIHRlc3RMZWRnZXJEZWxldGVXaXRoRXhp\nc3RpbmdFbnRyeUxvZ3MoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICAv\nLyBXcml0ZSBlbm91Z2ggbGVkZ2VyIGVudHJpZXMgc28gdGhhdCB3ZSByb2xs\nIG92ZXIgdGhlIGluaXRpYWwgZW50cnlMb2cgKDAubG9nKQogICAgICAgIExl\nZGdlckhhbmRsZVtdIGxocyA9IHdyaXRlTGVkZ2VyRW50cmllcygzLCAxMDI0\nLCAxMDI0KTsKCiAgICAgICAgLyoKICAgICAgICAgKiBTaHV0ZG93biB0aGUg\nQm9va2llIFNlcnZlcnMgYW5kIHJlc3RhcnQgdGhlbSB1c2luZyB0aGUgc2Ft\nZSBsZWRnZXIKICAgICAgICAgKiBkaXJlY3Rvcmllcy4gVGhpcyB3aWxsIHRl\nc3QgdGhlIHJlYWRpbmcgb2YgcHJlLWV4aXN0aW5nIGxlZGdlciBpbmRleAog\nICAgICAgICAqIGZpbGVzIGluIHRoZSBMZWRnZXJDYWNoZSBkdXJpbmcgc3Rh\ncnR1cCBvZiBhIEJvb2tpZSBTZXJ2ZXIuCiAgICAgICAgICovCiAgICAgICAg\ncmVzdGFydEJvb2tpZXMoKTsKCiAgICAgICAgLy8gRGVsZXRlIGFsbCBvZiB0\naGVzZSBsZWRnZXJzIGZyb20gdGhlIEJvb2tLZWVwZXIgY2xpZW50CiAgICAg\nICAgZm9yIChMZWRnZXJIYW5kbGUgbGggOiBsaHMpIHsKICAgICAgICAgICAg\nYmtjLmRlbGV0ZUxlZGdlcihsaC5nZXRJZCgpKTsKICAgICAgICB9CiAgICAg\nICAgTE9HLmluZm8oIkZpbmlzaGVkIGRlbGV0aW5nIGFsbCBsZWRnZXJzIHNv\nIHdhaXRpbmcgZm9yIHRoZSBHQyB0aHJlYWQgdG8gY2xlYW4gdXAgdGhlIGVu\ndHJ5TG9ncyIpOwogICAgICAgIFRocmVhZC5zbGVlcCgyMDAwKTsKCiAgICAg\nICAgLyoKICAgICAgICAgKiBWZXJpZnkgdGhhdCB0aGUgZmlyc3QgdHdvIGVu\ndHJ5IGxvZ3MgKFswLDFdLmxvZykgaGF2ZSBiZWVuIGRlbGV0ZWQKICAgICAg\nICAgKiBmcm9tIGFsbCBvZiB0aGUgQm9va2llIFNlcnZlcnMuIFdoZW4gd2Ug\ncmVzdGFydCB0aGUgc2VydmVycyBpbiB0aGlzCiAgICAgICAgICogdGVzdCwg\nYSBuZXcgZW50cnkgbG9nIGlzIGNyZWF0ZWQuIFdlIGtub3cgdGhlbiB0aGF0\nIHRoZSBmaXJzdCB0d28KICAgICAgICAgKiBlbnRyeSBsb2dzIHNob3VsZCBi\nZSBkZWxldGVkLgogICAgICAgICAqLwogICAgICAgIGZvciAoRmlsZSBsZWRn\nZXJEaXJlY3RvcnkgOiB0bXBEaXJzKSB7CiAgICAgICAgICAgIGFzc2VydEZh\nbHNlKCJGb3VuZCB0aGUgZW50cnkgbG9nIGZpbGUgKFswLDFdLmxvZykgdGhh\ndCBzaG91bGQgaGF2ZSBiZWVuIGRlbGV0ZWQgaW4gbGVkZ2VyRGlyZWN0b3J5\nOiAiCiAgICAgICAgICAgICAgICArIGxlZGdlckRpcmVjdG9yeSwgVGVzdFV0\naWxzLmhhc0xvZ0ZpbGVzKGxlZGdlckRpcmVjdG9yeSwgdHJ1ZSwgMCwgMSkp\nOwogICAgICAgIH0KICAgIH0KCn0K\n","encoding":"base64"}

