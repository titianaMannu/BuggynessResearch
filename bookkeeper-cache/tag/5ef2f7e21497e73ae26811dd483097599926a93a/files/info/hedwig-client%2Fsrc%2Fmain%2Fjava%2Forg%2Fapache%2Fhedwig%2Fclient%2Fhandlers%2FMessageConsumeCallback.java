{"sha":"436c14f85b5e65be42196f14d5160ecc4db652ee","node_id":"MDQ6QmxvYjE1NzU5NTY6NDM2YzE0Zjg1YjVlNjViZTQyMTk2ZjE0ZDUxNjBlY2M0ZGI2NTJlZQ==","size":5472,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/436c14f85b5e65be42196f14d5160ecc4db652ee","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQuaGFuZGxlcnM7CgppbXBv\ncnQgamF2YS51dGlsLlRpbWVyVGFzazsKCmltcG9ydCBvcmcuc2xmNGouTG9n\nZ2VyOwppbXBvcnQgb3JnLnNsZjRqLkxvZ2dlckZhY3Rvcnk7CgppbXBvcnQg\nb3JnLmFwYWNoZS5oZWR3aWcuY2xpZW50LmNvbmYuQ2xpZW50Q29uZmlndXJh\ndGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmNsaWVudC5kYXRhLk1l\nc3NhZ2VDb25zdW1lRGF0YTsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmNs\naWVudC5uZXR0eS5IQ2hhbm5lbE1hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hl\nLmhlZHdpZy5leGNlcHRpb25zLlB1YlN1YkV4Y2VwdGlvbjsKaW1wb3J0IG9y\nZy5hcGFjaGUuaGVkd2lnLnByb3RvZXh0ZW5zaW9ucy5NZXNzYWdlSWRVdGls\nczsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnV0aWwuQ2FsbGJhY2s7Cmlt\ncG9ydCBzdGF0aWMgb3JnLmFwYWNoZS5oZWR3aWcudXRpbC5WYXJBcmdzLnZh\nOwoKLyoqCiAqIFRoaXMgaXMgdGhlIENhbGxiYWNrIHVzZWQgYnkgdGhlIE1l\nc3NhZ2VIYW5kbGVycyBvbiB0aGUgY2xpZW50IGFwcCB3aGVuCiAqIHRoZXkn\ndmUgZmluaXNoZWQgY29uc3VtaW5nIGEgc3Vic2NyaXB0aW9uIG1lc3NhZ2Ug\nc2VudCBmcm9tIHRoZSBzZXJ2ZXIKICogYXN5bmNocm9ub3VzbHkuIFRoaXMg\nY2FsbGJhY2sgYmFjayB0byB0aGUgY2xpZW50IGxpYnMgd2lsbCBiZSBzdGF0\nZWxlc3Mgc28gd2UKICogY2FuIHVzZSBhIHNpbmdsZXRvbiBmb3IgdGhlIGNs\nYXNzLiBUaGUgb2JqZWN0IGNvbnRleHQgdXNlZCBzaG91bGQgYmUgdGhlCiAq\nIE1lc3NhZ2VDb25zdW1lRGF0YSB0eXBlLiBUaGF0IHdpbGwgY29udGFpbiBh\nbGwgb2YgdGhlIGluZm9ybWF0aW9uIG5lZWRlZCB0bwogKiBjYWxsIHRoZSBt\nZXNzYWdlIGNvbnN1bWUgbG9naWMgaW4gdGhlIGNsaWVudCBsaWIgSENoYW5u\nZWxIYW5kbGVyLgogKgogKi8KcHVibGljIGNsYXNzIE1lc3NhZ2VDb25zdW1l\nQ2FsbGJhY2sgaW1wbGVtZW50cyBDYWxsYmFjazxWb2lkPiB7CgogICAgcHJp\ndmF0ZSBzdGF0aWMgTG9nZ2VyIGxvZ2dlciA9IExvZ2dlckZhY3RvcnkuZ2V0\nTG9nZ2VyKE1lc3NhZ2VDb25zdW1lQ2FsbGJhY2suY2xhc3MpOwoKICAgIHBy\naXZhdGUgZmluYWwgSENoYW5uZWxNYW5hZ2VyIGNoYW5uZWxNYW5hZ2VyOwog\nICAgcHJpdmF0ZSBmaW5hbCBsb25nIGNvbnN1bWVSZXRyeVdhaXRUaW1lOwoK\nICAgIHB1YmxpYyBNZXNzYWdlQ29uc3VtZUNhbGxiYWNrKENsaWVudENvbmZp\nZ3VyYXRpb24gY2ZnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgSENoYW5uZWxNYW5hZ2VyIGNoYW5uZWxNYW5hZ2VyKSB7CiAgICAgICAg\ndGhpcy5jaGFubmVsTWFuYWdlciA9IGNoYW5uZWxNYW5hZ2VyOwogICAgICAg\nIHRoaXMuY29uc3VtZVJldHJ5V2FpdFRpbWUgPQogICAgICAgICAgICBjZmcu\nZ2V0TWVzc2FnZUNvbnN1bWVSZXRyeVdhaXRUaW1lKCk7CiAgICB9CgogICAg\nY2xhc3MgTWVzc2FnZUNvbnN1bWVSZXRyeVRhc2sgZXh0ZW5kcyBUaW1lclRh\nc2sgewogICAgICAgIHByaXZhdGUgZmluYWwgTWVzc2FnZUNvbnN1bWVEYXRh\nIG1lc3NhZ2VDb25zdW1lRGF0YTsKCiAgICAgICAgcHVibGljIE1lc3NhZ2VD\nb25zdW1lUmV0cnlUYXNrKE1lc3NhZ2VDb25zdW1lRGF0YSBtZXNzYWdlQ29u\nc3VtZURhdGEpIHsKICAgICAgICAgICAgdGhpcy5tZXNzYWdlQ29uc3VtZURh\ndGEgPSBtZXNzYWdlQ29uc3VtZURhdGE7CiAgICAgICAgfQoKICAgICAgICBA\nT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB7CiAgICAgICAg\nICAgIC8vIFRyeSB0byBjb25zdW1lIHRoZSBtZXNzYWdlIGFnYWluCiAgICAg\nICAgICAgIFN1YnNjcmliZVJlc3BvbnNlSGFuZGxlciBzdWJzY3JpYmVIQ2hh\nbm5lbEhhbmRsZXIgPQogICAgICAgICAgICAgICAgY2hhbm5lbE1hbmFnZXIu\nZ2V0U3Vic2NyaWJlUmVzcG9uc2VIYW5kbGVyKG1lc3NhZ2VDb25zdW1lRGF0\nYS50b3BpY1N1YnNjcmliZXIpOwogICAgICAgICAgICBpZiAobnVsbCA9PSBz\ndWJzY3JpYmVIQ2hhbm5lbEhhbmRsZXIgfHwKICAgICAgICAgICAgICAgICFz\ndWJzY3JpYmVIQ2hhbm5lbEhhbmRsZXIuaGFzU3Vic2NyaXB0aW9uKG1lc3Nh\nZ2VDb25zdW1lRGF0YS50b3BpY1N1YnNjcmliZXIpKSB7CiAgICAgICAgICAg\nICAgICBsb2dnZXIud2FybigiTm8gc3Vic2NyaXB0aW9uIHt9IGZvdW5kIHRv\nIHJldHJ5IGRlbGl2ZXJpbmcgbWVzc2FnZSB7fS4iLAogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgdmEobWVzc2FnZUNvbnN1bWVEYXRhLnRvcGljU3Vi\nc2NyaWJlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lc3Nh\nZ2VJZFV0aWxzLm1zZ0lkVG9SZWFkYWJsZVN0cmluZyhtZXNzYWdlQ29uc3Vt\nZURhdGEubXNnLmdldE1zZ0lkKCkpKSk7CiAgICAgICAgICAgICAgICByZXR1\ncm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHN1YnNjcmliZUhDaGFu\nbmVsSGFuZGxlci5hc3luY01lc3NhZ2VEZWxpdmVyKG1lc3NhZ2VDb25zdW1l\nRGF0YS50b3BpY1N1YnNjcmliZXIsCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VDb25z\ndW1lRGF0YS5tc2cpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBvcGVyYXRpb25GaW5pc2hlZChPYmplY3QgY3R4LCBWb2lkIHJlc3VsdE9m\nT3BlcmF0aW9uKSB7CiAgICAgICAgTWVzc2FnZUNvbnN1bWVEYXRhIG1lc3Nh\nZ2VDb25zdW1lRGF0YSA9IChNZXNzYWdlQ29uc3VtZURhdGEpIGN0eDsKCiAg\nICAgICAgU3Vic2NyaWJlUmVzcG9uc2VIYW5kbGVyIHN1YnNjcmliZUhDaGFu\nbmVsSGFuZGxlciA9CiAgICAgICAgICAgIGNoYW5uZWxNYW5hZ2VyLmdldFN1\nYnNjcmliZVJlc3BvbnNlSGFuZGxlcihtZXNzYWdlQ29uc3VtZURhdGEudG9w\naWNTdWJzY3JpYmVyKTsKICAgICAgICBpZiAobnVsbCA9PSBzdWJzY3JpYmVI\nQ2hhbm5lbEhhbmRsZXIgfHwKICAgICAgICAgICAgIXN1YnNjcmliZUhDaGFu\nbmVsSGFuZGxlci5oYXNTdWJzY3JpcHRpb24obWVzc2FnZUNvbnN1bWVEYXRh\nLnRvcGljU3Vic2NyaWJlcikpIHsKICAgICAgICAgICAgbG9nZ2VyLndhcm4o\nIk5vIHN1YnNjcmlwdGlvbiB7fSBmb3VuZCB0byBjb25zdW1lIG1lc3NhZ2Ug\ne30uIiwKICAgICAgICAgICAgICAgICAgICAgICAgdmEobWVzc2FnZUNvbnN1\nbWVEYXRhLnRvcGljU3Vic2NyaWJlciwKICAgICAgICAgICAgICAgICAgICAg\nICAgICAgTWVzc2FnZUlkVXRpbHMubXNnSWRUb1JlYWRhYmxlU3RyaW5nKG1l\nc3NhZ2VDb25zdW1lRGF0YS5tc2cuZ2V0TXNnSWQoKSkpKTsKICAgICAgICAg\nICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgLy8gTWVzc2FnZSBoYXMg\nYmVlbiBzdWNjZXNzZnVsbHkgY29uc3VtZWQgYnkgdGhlIGNsaWVudCBhcHAg\nc28gY2FsbGJhY2sKICAgICAgICAvLyB0byB0aGUgSENoYW5uZWxIYW5kbGVy\nIGluZGljYXRpbmcgdGhhdCB0aGUgbWVzc2FnZSBpcyBjb25zdW1lZC4KICAg\nICAgICBzdWJzY3JpYmVIQ2hhbm5lbEhhbmRsZXIubWVzc2FnZUNvbnN1bWVk\nKG1lc3NhZ2VDb25zdW1lRGF0YS50b3BpY1N1YnNjcmliZXIsCiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNz\nYWdlQ29uc3VtZURhdGEubXNnKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBv\ncGVyYXRpb25GYWlsZWQoT2JqZWN0IGN0eCwgUHViU3ViRXhjZXB0aW9uIGV4\nY2VwdGlvbikgewogICAgICAgIC8vIE1lc3NhZ2UgaGFzIE5PVCBiZWVuIHN1\nY2Nlc3NmdWxseSBjb25zdW1lZCBieSB0aGUgY2xpZW50IGFwcCBzbwogICAg\nICAgIC8vIGNhbGxiYWNrIHRvIHRoZSBIQ2hhbm5lbEhhbmRsZXIgdG8gdHJ5\nIHRoZSBhc3luYyBNZXNzYWdlSGFuZGxlcgogICAgICAgIC8vIENvbnN1bWUg\nbG9naWMgYWdhaW4uCiAgICAgICAgTWVzc2FnZUNvbnN1bWVEYXRhIG1lc3Nh\nZ2VDb25zdW1lRGF0YSA9IChNZXNzYWdlQ29uc3VtZURhdGEpIGN0eDsKICAg\nICAgICBsb2dnZXIuZXJyb3IoIk1lc3NhZ2Ugd2FzIG5vdCBjb25zdW1lZCBz\ndWNjZXNzZnVsbHkgYnkgY2xpZW50IE1lc3NhZ2VIYW5kbGVyOiB7fSIsCiAg\nICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VDb25zdW1lRGF0YSk7CgogICAg\nICAgIC8vIFNsZWVwIGEgcHJlLWNvbmZpZ3VyZWQgYW1vdW50IG9mIHRpbWUg\nKGluIG1pbGxpc2Vjb25kcykgYmVmb3JlIHdlCiAgICAgICAgLy8gZG8gdGhl\nIHJldHJ5LiBJbiB0aGUgZnV0dXJlLCB3ZSBjYW4gaGF2ZSBtb3JlIGR5bmFt\naWMgbG9naWMgb24KICAgICAgICAvLyB3aGF0IGR1cmF0aW9uIHRvIHNsZWVw\nIGJhc2VkIG9uIGhvdyBtYW55IHRpbWVzIHdlJ3ZlIHJldHJpZWQsIG9yCiAg\nICAgICAgLy8gcGVyaGFwcyB3aGF0IHRoZSBsYXN0IGFtb3VudCBvZiB0aW1l\nIHdlIHNsZXB0IHdhcy4gV2UgY291bGQgc3RpY2sKICAgICAgICAvLyBzb21l\nIG9mIHRoaXMgbWV0YS1kYXRhIGludG8gdGhlIE1lc3NhZ2VDb25zdW1lRGF0\nYSB3aGVuIHdlIHJldHJ5LgogICAgICAgIGNoYW5uZWxNYW5hZ2VyLnNjaGVk\ndWxlKG5ldyBNZXNzYWdlQ29uc3VtZVJldHJ5VGFzayhtZXNzYWdlQ29uc3Vt\nZURhdGEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN1\nbWVSZXRyeVdhaXRUaW1lKTsKICAgIH0KCn0K\n","encoding":"base64"}

