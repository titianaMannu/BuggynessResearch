{"sha":"a6762c4d753b9d5103468368e9b8f9a9cdb92c36","node_id":"MDQ6QmxvYjE1NzU5NTY6YTY3NjJjNGQ3NTNiOWQ1MTAzNDY4MzY4ZTliOGY5YTljZGI5MmMzNg==","size":9436,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/a6762c4d753b9d5103468368e9b8f9a9cdb92c36","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQubmV0dHk7CgppbXBvcnQg\namF2YS5uZXQuSW5ldFNvY2tldEFkZHJlc3M7CgppbXBvcnQgb3JnLmpib3Nz\nLm5ldHR5LmNoYW5uZWwuQ2hhbm5lbDsKCmltcG9ydCBvcmcuYXBhY2hlLmhl\nZHdpZy5jbGllbnQuZGF0YS5QdWJTdWJEYXRhOwppbXBvcnQgb3JnLmFwYWNo\nZS5oZWR3aWcuY2xpZW50LmRhdGEuVG9waWNTdWJzY3JpYmVyOwppbXBvcnQg\nb3JnLmFwYWNoZS5oZWR3aWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2wuQ2xv\nc2VTdWJzY3JpcHRpb25SZXF1ZXN0OwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3\naWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2wuQ29uc3VtZVJlcXVlc3Q7Cmlt\ncG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5QdWJTdWJQcm90b2Nv\nbC5NZXNzYWdlU2VxSWQ7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90\nb2NvbC5QdWJTdWJQcm90b2NvbC5PcGVyYXRpb25UeXBlOwppbXBvcnQgb3Jn\nLmFwYWNoZS5oZWR3aWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2wuUHVibGlz\naFJlcXVlc3Q7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5Q\ndWJTdWJQcm90b2NvbC5QdWJTdWJSZXF1ZXN0OwppbXBvcnQgb3JnLmFwYWNo\nZS5oZWR3aWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2wuUHJvdG9jb2xWZXJz\naW9uOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcucHJvdG9jb2wuUHViU3Vi\nUHJvdG9jb2wuU3Vic2NyaWJlUmVxdWVzdDsKaW1wb3J0IG9yZy5hcGFjaGUu\naGVkd2lnLnByb3RvY29sLlB1YlN1YlByb3RvY29sLlN1YnNjcmlwdGlvbk9w\ndGlvbnM7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5QdWJT\ndWJQcm90b2NvbC5TdWJzY3JpcHRpb25QcmVmZXJlbmNlczsKaW1wb3J0IG9y\nZy5hcGFjaGUuaGVkd2lnLnByb3RvY29sLlB1YlN1YlByb3RvY29sLlVuc3Vi\nc2NyaWJlUmVxdWVzdDsKCi8qKgogKiBVdGlsaXRpZXMgZm9yIG5ldHdvcmsg\nb3BlcmF0aW9ucy4KICovCnB1YmxpYyBjbGFzcyBOZXRVdGlscyB7CgogICAg\nLyoqCiAgICAgKiBIZWxwZXIgc3RhdGljIG1ldGhvZCB0byBnZXQgdGhlIFN0\ncmluZyBIb3N0bmFtZTpQb3J0IGZyb20gYSBuZXR0eQogICAgICogQ2hhbm5l\nbC4gQXNzdW1wdGlvbiBpcyB0aGF0IHRoZSBuZXR0eSBDaGFubmVsIHdhcyBv\ncmlnaW5hbGx5IGNyZWF0ZWQgd2l0aAogICAgICogYW4gSW5ldFNvY2tldEFk\nZHJlc3MuIFRoaXMgaXMgdHJ1ZSB3aXRoIHRoZSBIZWR3aWcgbmV0dHkgaW1w\nbGVtZW50YXRpb24uCiAgICAgKgogICAgICogQHBhcmFtIGNoYW5uZWwKICAg\nICAqICAgICAgICAgICAgTmV0dHkgY2hhbm5lbCB0byBleHRyYWN0IHRoZSBo\nb3N0bmFtZSBhbmQgcG9ydCBmcm9tLgogICAgICogQHJldHVybiBTdHJpbmcg\ncmVwcmVzZW50YXRpb24gb2YgdGhlIEhvc3RuYW1lOlBvcnQgZnJvbSB0aGUg\nTmV0dHkgQ2hhbm5lbAogICAgICovCiAgICBwdWJsaWMgc3RhdGljIEluZXRT\nb2NrZXRBZGRyZXNzIGdldEhvc3RGcm9tQ2hhbm5lbChDaGFubmVsIGNoYW5u\nZWwpIHsKICAgICAgICByZXR1cm4gKEluZXRTb2NrZXRBZGRyZXNzKSBjaGFu\nbmVsLmdldFJlbW90ZUFkZHJlc3MoKTsKICAgIH0KCiAgICAvKioKICAgICAq\nIFRoaXMgaXMgYSBoZWxwZXIgbWV0aG9kIHRvIGJ1aWxkIHRoZSBhY3R1YWwg\ncHViL3N1YiBtZXNzYWdlLgogICAgICoKICAgICAqIEBwYXJhbSB0eG5JZAog\nICAgICogICAgICAgICAgICBUcmFuc2FjdGlvbiBJZC4KICAgICAqIEBwYXJh\nbSBwdWJTdWJEYXRhCiAgICAgKiAgICAgICAgICAgIFB1Ymxpc2ggY2FsbCdz\nIGRhdGEgd3JhcHBlciBvYmplY3QuCiAgICAgKiBAcmV0dXJuIHB1YiBzdWIg\ncmVxdWVzdCB0byBzZW5kCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgUHVi\nU3ViUmVxdWVzdC5CdWlsZGVyIGJ1aWxkUHViU3ViUmVxdWVzdChsb25nIHR4\nbklkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIFB1YlN1YkRhdGEgcHViU3ViRGF0YSkgewog\nICAgICAgIC8vIENyZWF0ZSBhIFB1YlN1YlJlcXVlc3QKICAgICAgICBQdWJT\ndWJSZXF1ZXN0LkJ1aWxkZXIgcHVic3ViUmVxdWVzdEJ1aWxkZXIgPSBQdWJT\ndWJSZXF1ZXN0Lm5ld0J1aWxkZXIoKTsKICAgICAgICBwdWJzdWJSZXF1ZXN0\nQnVpbGRlci5zZXRQcm90b2NvbFZlcnNpb24oUHJvdG9jb2xWZXJzaW9uLlZF\nUlNJT05fT05FKTsKICAgICAgICBwdWJzdWJSZXF1ZXN0QnVpbGRlci5zZXRU\neXBlKHB1YlN1YkRhdGEub3BlcmF0aW9uVHlwZSk7CiAgICAgICAgLy8gZm9y\nIGNvbnN1bWUgcmVxdWVzdCwgd2UgZG9uJ3QgbmVlZCB0byBjYXJlIGFib3V0\nIHRyaWVkIHNlcnZlcnMgbGlzdAogICAgICAgIGlmIChPcGVyYXRpb25UeXBl\nLkNPTlNVTUUgIT0gcHViU3ViRGF0YS5vcGVyYXRpb25UeXBlKSB7CiAgICAg\nICAgICAgIGlmIChwdWJTdWJEYXRhLnRyaWVkU2VydmVycyAhPSBudWxsICYm\nIHB1YlN1YkRhdGEudHJpZWRTZXJ2ZXJzLnNpemUoKSA+IDApIHsKICAgICAg\nICAgICAgICAgIHB1YnN1YlJlcXVlc3RCdWlsZGVyLmFkZEFsbFRyaWVkU2Vy\ndmVycyhwdWJTdWJEYXRhLnRyaWVkU2VydmVycyk7CiAgICAgICAgICAgIH0K\nICAgICAgICB9CiAgICAgICAgcHVic3ViUmVxdWVzdEJ1aWxkZXIuc2V0VHhu\nSWQodHhuSWQpOwogICAgICAgIHB1YnN1YlJlcXVlc3RCdWlsZGVyLnNldFNo\nb3VsZENsYWltKHB1YlN1YkRhdGEuc2hvdWxkQ2xhaW0pOwogICAgICAgIHB1\nYnN1YlJlcXVlc3RCdWlsZGVyLnNldFRvcGljKHB1YlN1YkRhdGEudG9waWMp\nOwoKICAgICAgICBzd2l0Y2ggKHB1YlN1YkRhdGEub3BlcmF0aW9uVHlwZSkg\newogICAgICAgIGNhc2UgUFVCTElTSDoKICAgICAgICAgICAgLy8gU2V0IHRo\nZSBQdWJsaXNoUmVxdWVzdCBpbnRvIHRoZSBvdXRlciBQdWJTdWJSZXF1ZXN0\nCiAgICAgICAgICAgIHB1YnN1YlJlcXVlc3RCdWlsZGVyLnNldFB1Ymxpc2hS\nZXF1ZXN0KGJ1aWxkUHVibGlzaFJlcXVlc3QocHViU3ViRGF0YSkpOwogICAg\nICAgICAgICBicmVhazsKICAgICAgICBjYXNlIFNVQlNDUklCRToKICAgICAg\nICAgICAgLy8gU2V0IHRoZSBTdWJzY3JpYmVSZXF1ZXN0IGludG8gdGhlIG91\ndGVyIFB1YlN1YlJlcXVlc3QKICAgICAgICAgICAgcHVic3ViUmVxdWVzdEJ1\naWxkZXIuc2V0U3Vic2NyaWJlUmVxdWVzdChidWlsZFN1YnNjcmliZVJlcXVl\nc3QocHViU3ViRGF0YSkpOwogICAgICAgICAgICBicmVhazsKICAgICAgICBj\nYXNlIFVOU1VCU0NSSUJFOgogICAgICAgICAgICAvLyBTZXQgdGhlIFVuc3Vi\nc2NyaWJlUmVxdWVzdCBpbnRvIHRoZSBvdXRlciBQdWJTdWJSZXF1ZXN0CiAg\nICAgICAgICAgIHB1YnN1YlJlcXVlc3RCdWlsZGVyLnNldFVuc3Vic2NyaWJl\nUmVxdWVzdChidWlsZFVuc3Vic2NyaWJlUmVxdWVzdChwdWJTdWJEYXRhKSk7\nCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgQ0xPU0VTVUJTQ1JJ\nUFRJT046CiAgICAgICAgICAgIC8vIFNldCB0aGUgQ2xvc2VTdWJzY3JpcHRp\nb25SZXF1ZXN0IGludG8gdGhlIG91dGVyIFB1YlN1YlJlcXVlc3QKICAgICAg\nICAgICAgcHVic3ViUmVxdWVzdEJ1aWxkZXIuc2V0Q2xvc2VTdWJzY3JpcHRp\nb25SZXF1ZXN0KAogICAgICAgICAgICAgICAgYnVpbGRDbG9zZVN1YnNjcmlw\ndGlvblJlcXVlc3QocHViU3ViRGF0YSkpOwogICAgICAgICAgICBicmVhazsK\nICAgICAgICB9CgogICAgICAgIC8vIFVwZGF0ZSB0aGUgUHViU3ViRGF0YSB3\naXRoIHRoZSB0eG5JZCBhbmQgdGhlIHJlcXVlc3RXcml0ZVRpbWUKICAgICAg\nICBwdWJTdWJEYXRhLnR4bklkID0gdHhuSWQ7CiAgICAgICAgcHViU3ViRGF0\nYS5yZXF1ZXN0V3JpdGVUaW1lID0gU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlz\nKCk7CgogICAgICAgIHJldHVybiBwdWJzdWJSZXF1ZXN0QnVpbGRlcjsKICAg\nIH0KCiAgICAvLyBidWlsZCBwdWJsaXNoIHJlcXVlc3QKICAgIHByaXZhdGUg\nc3RhdGljIFB1Ymxpc2hSZXF1ZXN0LkJ1aWxkZXIgYnVpbGRQdWJsaXNoUmVx\ndWVzdChQdWJTdWJEYXRhIHB1YlN1YkRhdGEpIHsKICAgICAgICBQdWJsaXNo\nUmVxdWVzdC5CdWlsZGVyIHB1Ymxpc2hSZXF1ZXN0QnVpbGRlciA9IFB1Ymxp\nc2hSZXF1ZXN0Lm5ld0J1aWxkZXIoKTsKICAgICAgICBwdWJsaXNoUmVxdWVz\ndEJ1aWxkZXIuc2V0TXNnKHB1YlN1YkRhdGEubXNnKTsKICAgICAgICByZXR1\ncm4gcHVibGlzaFJlcXVlc3RCdWlsZGVyOwogICAgfQoKICAgIC8vIGJ1aWxk\nIHN1YnNjcmliZSByZXF1ZXN0CiAgICBwcml2YXRlIHN0YXRpYyBTdWJzY3Jp\nYmVSZXF1ZXN0LkJ1aWxkZXIgYnVpbGRTdWJzY3JpYmVSZXF1ZXN0KFB1YlN1\nYkRhdGEgcHViU3ViRGF0YSkgeyBTdWJzY3JpYmVSZXF1ZXN0LkJ1aWxkZXIg\nc3Vic2NyaWJlUmVxdWVzdEJ1aWxkZXIgPSBTdWJzY3JpYmVSZXF1ZXN0Lm5l\nd0J1aWxkZXIoKTsKICAgICAgICBzdWJzY3JpYmVSZXF1ZXN0QnVpbGRlci5z\nZXRTdWJzY3JpYmVySWQocHViU3ViRGF0YS5zdWJzY3JpYmVySWQpOwogICAg\nICAgIHN1YnNjcmliZVJlcXVlc3RCdWlsZGVyLnNldENyZWF0ZU9yQXR0YWNo\nKHB1YlN1YkRhdGEub3B0aW9ucy5nZXRDcmVhdGVPckF0dGFjaCgpKTsKICAg\nICAgICBzdWJzY3JpYmVSZXF1ZXN0QnVpbGRlci5zZXRGb3JjZUF0dGFjaChw\ndWJTdWJEYXRhLm9wdGlvbnMuZ2V0Rm9yY2VBdHRhY2goKSk7CiAgICAgICAg\nLy8gRm9yIG5vdywgYWxsIHN1YnNjcmliZXMgc2hvdWxkIHdhaXQgZm9yIGFs\nbCBjcm9zcy1yZWdpb25hbAogICAgICAgIC8vIHN1YnNjcmlwdGlvbnMgdG8g\nYmUgZXN0YWJsaXNoZWQgYmVmb3JlIHJldHVybmluZy4KICAgICAgICBzdWJz\nY3JpYmVSZXF1ZXN0QnVpbGRlci5zZXRTeW5jaHJvbm91cyh0cnVlKTsKICAg\nICAgICAvLyBzZXQgc3Vic2NyaXB0aW9uIHByZWZlcmVuY2VzCiAgICAgICAg\nU3Vic2NyaXB0aW9uUHJlZmVyZW5jZXMuQnVpbGRlciBwcmVmZXJlbmNlc0J1\naWxkZXIgPQogICAgICAgICAgICBvcHRpb25zMlByZWZlcmVuY2VzKHB1YlN1\nYkRhdGEub3B0aW9ucyk7CiAgICAgICAgLy8gYmFja3dhcmQgY29tcGF0YWJs\nZSB3aXRoIDQuMS4wCiAgICAgICAgaWYgKHByZWZlcmVuY2VzQnVpbGRlci5o\nYXNNZXNzYWdlQm91bmQoKSkgewogICAgICAgICAgICBzdWJzY3JpYmVSZXF1\nZXN0QnVpbGRlci5zZXRNZXNzYWdlQm91bmQocHJlZmVyZW5jZXNCdWlsZGVy\nLmdldE1lc3NhZ2VCb3VuZCgpKTsKICAgICAgICB9IAogICAgICAgIHN1YnNj\ncmliZVJlcXVlc3RCdWlsZGVyLnNldFByZWZlcmVuY2VzKHByZWZlcmVuY2Vz\nQnVpbGRlcik7CiAgICAgICAgcmV0dXJuIHN1YnNjcmliZVJlcXVlc3RCdWls\nZGVyOwogICAgfQoKICAgIC8vIGJ1aWxkIHVuc3Vic2NyaWJlIHJlcXVlc3QK\nICAgIHByaXZhdGUgc3RhdGljIFVuc3Vic2NyaWJlUmVxdWVzdC5CdWlsZGVy\nIGJ1aWxkVW5zdWJzY3JpYmVSZXF1ZXN0KFB1YlN1YkRhdGEgcHViU3ViRGF0\nYSkgewogICAgICAgIC8vIENyZWF0ZSB0aGUgVW5TdWJzY3JpYmVSZXF1ZXN0\nCiAgICAgICAgVW5zdWJzY3JpYmVSZXF1ZXN0LkJ1aWxkZXIgdW5zdWJzY3Jp\nYmVSZXF1ZXN0QnVpbGRlciA9IFVuc3Vic2NyaWJlUmVxdWVzdC5uZXdCdWls\nZGVyKCk7CiAgICAgICAgdW5zdWJzY3JpYmVSZXF1ZXN0QnVpbGRlci5zZXRT\ndWJzY3JpYmVySWQocHViU3ViRGF0YS5zdWJzY3JpYmVySWQpOwogICAgICAg\nIHJldHVybiB1bnN1YnNjcmliZVJlcXVlc3RCdWlsZGVyOwogICAgfQoKICAg\nIC8vIGJ1aWxkIGNsb3Nlc3Vic2NyaXB0aW9uIHJlcXVlc3QKICAgIHByaXZh\ndGUgc3RhdGljIENsb3NlU3Vic2NyaXB0aW9uUmVxdWVzdC5CdWlsZGVyCiAg\nICAgICAgYnVpbGRDbG9zZVN1YnNjcmlwdGlvblJlcXVlc3QoUHViU3ViRGF0\nYSBwdWJTdWJEYXRhKSB7CiAgICAgICAgLy8gQ3JlYXRlIHRoZSBDbG9zZVN1\nYnNjcmlwdGlvblJlcXVlc3QKICAgICAgICBDbG9zZVN1YnNjcmlwdGlvblJl\ncXVlc3QuQnVpbGRlciBjbG9zZVN1YnNjcmlwdGlvblJlcXVlc3RCdWlsZGVy\nID0KICAgICAgICAgICAgQ2xvc2VTdWJzY3JpcHRpb25SZXF1ZXN0Lm5ld0J1\naWxkZXIoKTsKICAgICAgICBjbG9zZVN1YnNjcmlwdGlvblJlcXVlc3RCdWls\nZGVyLnNldFN1YnNjcmliZXJJZChwdWJTdWJEYXRhLnN1YnNjcmliZXJJZCk7\nCiAgICAgICAgcmV0dXJuIGNsb3NlU3Vic2NyaXB0aW9uUmVxdWVzdEJ1aWxk\nZXI7CiAgICB9CgogICAgLyoqCiAgICAgKiBCdWlsZCBjb25zdW1lIHJlcXVl\nc3QKICAgICAqCiAgICAgKiBAcGFyYW0gdHhuSWQKICAgICAqICAgICAgICAg\nIFRyYW5zYWN0aW9uIElkLgogICAgICogQHBhcmFtIHRvcGljU3Vic2NyaWJl\ncgogICAgICogICAgICAgICAgVG9waWMgU3Vic2NyaWJlci4KICAgICAqIEBw\nYXJhbSBtZXNzYWdlU2VxSWQKICAgICAqICAgICAgICAgIE1lc3NhZ2UgU2Vx\nIElkLgogICAgICogQHJldHVybiBwdWIvc3ViIHJlcXVlc3QuCiAgICAgKi8K\nICAgIHB1YmxpYyBzdGF0aWMgUHViU3ViUmVxdWVzdC5CdWlsZGVyIGJ1aWxk\nQ29uc3VtZVJlcXVlc3QobG9uZyB0eG5JZCwKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVG9w\naWNTdWJzY3JpYmVyIHRvcGljU3Vic2NyaWJlciwKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nTWVzc2FnZVNlcUlkIG1lc3NhZ2VTZXFJZCkgewogICAgICAgIC8vIENyZWF0\nZSBhIFB1YlN1YlJlcXVlc3QKICAgICAgICBQdWJTdWJSZXF1ZXN0LkJ1aWxk\nZXIgcHVic3ViUmVxdWVzdEJ1aWxkZXIgPSBQdWJTdWJSZXF1ZXN0Lm5ld0J1\naWxkZXIoKTsKICAgICAgICBwdWJzdWJSZXF1ZXN0QnVpbGRlci5zZXRQcm90\nb2NvbFZlcnNpb24oUHJvdG9jb2xWZXJzaW9uLlZFUlNJT05fT05FKTsKICAg\nICAgICBwdWJzdWJSZXF1ZXN0QnVpbGRlci5zZXRUeXBlKE9wZXJhdGlvblR5\ncGUuQ09OU1VNRSk7CgogICAgICAgIHB1YnN1YlJlcXVlc3RCdWlsZGVyLnNl\ndFR4bklkKHR4bklkKTsKICAgICAgICBwdWJzdWJSZXF1ZXN0QnVpbGRlci5z\nZXRUb3BpYyh0b3BpY1N1YnNjcmliZXIuZ2V0VG9waWMoKSk7CgogICAgICAg\nIC8vIENyZWF0ZSB0aGUgQ29uc3VtZVJlcXVlc3QKICAgICAgICBDb25zdW1l\nUmVxdWVzdC5CdWlsZGVyIGNvbnN1bWVSZXF1ZXN0QnVpbGRlciA9IENvbnN1\nbWVSZXF1ZXN0Lm5ld0J1aWxkZXIoKTsKICAgICAgICBjb25zdW1lUmVxdWVz\ndEJ1aWxkZXIuc2V0U3Vic2NyaWJlcklkKHRvcGljU3Vic2NyaWJlci5nZXRT\ndWJzY3JpYmVySWQoKSk7CiAgICAgICAgY29uc3VtZVJlcXVlc3RCdWlsZGVy\nLnNldE1zZ0lkKG1lc3NhZ2VTZXFJZCk7CgogICAgICAgIHB1YnN1YlJlcXVl\nc3RCdWlsZGVyLnNldENvbnN1bWVSZXF1ZXN0KGNvbnN1bWVSZXF1ZXN0QnVp\nbGRlcik7CgogICAgICAgIHJldHVybiBwdWJzdWJSZXF1ZXN0QnVpbGRlcjsK\nICAgIH0KCiAgICAvKioKICAgICAqIENvbnZlcnQgY2xpZW50LXNpZGUgc3Vi\nc2NyaXB0aW9uIG9wdGlvbnMgdG8gc3Vic2NyaXB0aW9uIHByZWZlcmVuY2Vz\nCiAgICAgKgogICAgICogQHBhcmFtIG9wdGlvbnMKICAgICAqICAgICAgICAg\nIENsaWVudC1TaWRlIHN1YnNjcmlwdGlvbiBvcHRpb25zCiAgICAgKiBAcmV0\ndXJuIHN1YnNjcmlwdGlvbiBwcmVmZXJlbmNlcwogICAgICovCiAgICBwcml2\nYXRlIHN0YXRpYyBTdWJzY3JpcHRpb25QcmVmZXJlbmNlcy5CdWlsZGVyIG9w\ndGlvbnMyUHJlZmVyZW5jZXMoU3Vic2NyaXB0aW9uT3B0aW9ucyBvcHRpb25z\nKSB7CiAgICAgICAgLy8gcHJlcGFyZSBzdWJzY3JpcHRpb24gcHJlZmVyZW5j\nZXMKICAgICAgICBTdWJzY3JpcHRpb25QcmVmZXJlbmNlcy5CdWlsZGVyIHBy\nZWZlcmVuY2VzQnVpbGRlciA9CiAgICAgICAgICAgIFN1YnNjcmlwdGlvblBy\nZWZlcmVuY2VzLm5ld0J1aWxkZXIoKTsKCiAgICAgICAgLy8gc2V0IG1lc3Nh\nZ2UgYm91bmQKICAgICAgICBpZiAob3B0aW9ucy5nZXRNZXNzYWdlQm91bmQo\nKSA+IDApIHsKICAgICAgICAgICAgcHJlZmVyZW5jZXNCdWlsZGVyLnNldE1l\nc3NhZ2VCb3VuZChvcHRpb25zLmdldE1lc3NhZ2VCb3VuZCgpKTsKICAgICAg\nICB9CgogICAgICAgIC8vIHNldCBtZXNzYWdlIGZpbHRlcgogICAgICAgIGlm\nIChvcHRpb25zLmhhc01lc3NhZ2VGaWx0ZXIoKSkgewogICAgICAgICAgICBw\ncmVmZXJlbmNlc0J1aWxkZXIuc2V0TWVzc2FnZUZpbHRlcihvcHRpb25zLmdl\ndE1lc3NhZ2VGaWx0ZXIoKSk7CiAgICAgICAgfQoKICAgICAgICAvLyBzZXQg\ndXNlciBvcHRpb25zCiAgICAgICAgaWYgKG9wdGlvbnMuaGFzT3B0aW9ucygp\nKSB7CiAgICAgICAgICAgIHByZWZlcmVuY2VzQnVpbGRlci5zZXRPcHRpb25z\nKG9wdGlvbnMuZ2V0T3B0aW9ucygpKTsKICAgICAgICB9CgogICAgICAgIC8v\nIHNldCBtZXNzYWdlIHdpbmRvdyBzaXplIGlmIHNldAogICAgICAgIGlmIChv\ncHRpb25zLmhhc01lc3NhZ2VXaW5kb3dTaXplKCkgJiYgb3B0aW9ucy5nZXRN\nZXNzYWdlV2luZG93U2l6ZSgpID4gMCkgewogICAgICAgICAgICBwcmVmZXJl\nbmNlc0J1aWxkZXIuc2V0TWVzc2FnZVdpbmRvd1NpemUob3B0aW9ucy5nZXRN\nZXNzYWdlV2luZG93U2l6ZSgpKTsKICAgICAgICB9CgogICAgICAgIHJldHVy\nbiBwcmVmZXJlbmNlc0J1aWxkZXI7CiAgICB9Cgp9Cg==\n","encoding":"base64"}

