{"sha":"aac132101af4ce3be8e0226ddd238cbf4804b6af","node_id":"MDQ6QmxvYjE1NzU5NTY6YWFjMTMyMTAxYWY0Y2UzYmU4ZTAyMjZkZGQyMzhjYmY0ODA0YjZhZg==","size":16455,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/aac132101af4ce3be8e0226ddd238cbf4804b6af","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQubmV0dHkuaW1wbDsKCmlt\ncG9ydCBqYXZhLnV0aWwuTGlua2VkTGlzdDsKaW1wb3J0IGphdmEudXRpbC5R\ndWV1ZTsKCmltcG9ydCBjb20uZ29vZ2xlLnByb3RvYnVmLkJ5dGVTdHJpbmc7\nCgppbXBvcnQgb3JnLnNsZjRqLkxvZ2dlcjsKaW1wb3J0IG9yZy5zbGY0ai5M\nb2dnZXJGYWN0b3J5OwppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmNoYW5uZWwu\nQ2hhbm5lbDsKaW1wb3J0IG9yZy5qYm9zcy5uZXR0eS5jaGFubmVsLkNoYW5u\nZWxGdXR1cmU7CmltcG9ydCBvcmcuamJvc3MubmV0dHkuY2hhbm5lbC5DaGFu\nbmVsRnV0dXJlTGlzdGVuZXI7CgppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcu\nY2xpZW50LmFwaS5NZXNzYWdlSGFuZGxlcjsKaW1wb3J0IG9yZy5hcGFjaGUu\naGVkd2lnLmNsaWVudC5jb25mLkNsaWVudENvbmZpZ3VyYXRpb247CmltcG9y\ndCBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQuZGF0YS5NZXNzYWdlQ29uc3Vt\nZURhdGE7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQuZGF0YS5Q\ndWJTdWJEYXRhOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuY2xpZW50LmRh\ndGEuVG9waWNTdWJzY3JpYmVyOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcu\nY2xpZW50LmV4Y2VwdGlvbnMuQWxyZWFkeVN0YXJ0RGVsaXZlcnlFeGNlcHRp\nb247CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQubmV0dHkuSENo\nYW5uZWw7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQubmV0dHku\nTmV0VXRpbHM7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQubmV0\ndHkuRmlsdGVyYWJsZU1lc3NhZ2VIYW5kbGVyOwppbXBvcnQgb3JnLmFwYWNo\nZS5oZWR3aWcuZXhjZXB0aW9ucy5QdWJTdWJFeGNlcHRpb24uQ2xpZW50Tm90\nU3Vic2NyaWJlZEV4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2ln\nLmZpbHRlci5DbGllbnRNZXNzYWdlRmlsdGVyOwppbXBvcnQgb3JnLmFwYWNo\nZS5oZWR3aWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2wuTWVzc2FnZTsKaW1w\nb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnByb3RvY29sLlB1YlN1YlByb3RvY29s\nLk1lc3NhZ2VTZXFJZDsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnByb3Rv\nY29sLlB1YlN1YlByb3RvY29sLlB1YlN1YlJlcXVlc3Q7CmltcG9ydCBvcmcu\nYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5QdWJTdWJQcm90b2NvbC5TdWJzY3Jp\ncHRpb25FdmVudDsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnByb3RvY29s\nLlB1YlN1YlByb3RvY29sLlN1YnNjcmlwdGlvblByZWZlcmVuY2VzOwppbXBv\ncnQgb3JnLmFwYWNoZS5oZWR3aWcucHJvdG9leHRlbnNpb25zLk1lc3NhZ2VJ\nZFV0aWxzOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcucHJvdG9leHRlbnNp\nb25zLlN1YnNjcmlwdGlvblN0YXRlVXRpbHM7CmltcG9ydCBzdGF0aWMgb3Jn\nLmFwYWNoZS5oZWR3aWcudXRpbC5WYXJBcmdzLnZhOwoKLyoqCiAqIGFuIGFj\ndGl2ZSBzdWJzY3JpYmVyIGhhbmRsZXMgc3Vic2NyaXB0aW9uIGFjdGlvbnMg\naW4gYSBjaGFubmVsLgogKi8KcHVibGljIGNsYXNzIEFjdGl2ZVN1YnNjcmli\nZXIgewoKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvZ2dlciBsb2dnZXIg\nPSBMb2dnZXJGYWN0b3J5LmdldExvZ2dlcihBY3RpdmVTdWJzY3JpYmVyLmNs\nYXNzKTsKCiAgICBwcm90ZWN0ZWQgZmluYWwgQ2xpZW50Q29uZmlndXJhdGlv\nbiBjZmc7CiAgICBwcm90ZWN0ZWQgZmluYWwgQWJzdHJhY3RIQ2hhbm5lbE1h\nbmFnZXIgY2hhbm5lbE1hbmFnZXI7CgogICAgLy8gU3Vic2NyaWJlciByZWxh\ndGVkIHZhcmlhYmxlcwogICAgcHJvdGVjdGVkIGZpbmFsIFRvcGljU3Vic2Ny\naWJlciB0b3BpY1N1YnNjcmliZXI7CiAgICBwcm90ZWN0ZWQgZmluYWwgUHVi\nU3ViRGF0YSBvcDsKICAgIHByb3RlY3RlZCBmaW5hbCBTdWJzY3JpcHRpb25Q\ncmVmZXJlbmNlcyBwcmVmZXJlbmNlczsKCiAgICAvLyB0aGUgdW5kZXJseWlu\nZyBuZXR0eSBjaGFubmVsIHRvIHNlbmQgcmVxdWVzdAogICAgcHJvdGVjdGVk\nIGZpbmFsIENoYW5uZWwgY2hhbm5lbDsKICAgIHByb3RlY3RlZCBmaW5hbCBI\nQ2hhbm5lbCBoQ2hhbm5lbDsKCiAgICAvLyBDb3VudGVyIGZvciB0aGUgbnVt\nYmVyIG9mIGNvbnN1bWVkIG1lc3NhZ2VzIHNvIGZhciB0byBidWZmZXIgdXAg\nYmVmb3JlIHdlCiAgICAvLyBzZW5kIHRoZSBDb25zdW1lIG1lc3NhZ2UgYmFj\nayB0byB0aGUgc2VydmVyIGFsb25nIHdpdGggdGhlIGxhc3QvbGFyZ2VzdAog\nICAgLy8gbWVzc2FnZSBzZXEgSUQgc2VlbiBzbyBmYXIgaW4gdGhhdCBiYXRj\naC4KICAgIHByaXZhdGUgaW50IG51bUNvbnN1bWVkTWVzc2FnZXNJbkJ1ZmZl\nciA9IDA7CiAgICBwcml2YXRlIE1lc3NhZ2VTZXFJZCBsYXN0TWVzc2FnZVNl\ncUlkID0gbnVsbDsKCiAgICAvLyBNZXNzYWdlIEhhbmRsZXIKICAgIHByaXZh\ndGUgTWVzc2FnZUhhbmRsZXIgbXNnSGFuZGxlciA9IG51bGw7CgogICAgLy8g\nUXVldWUgdXNlZCBmb3Igc3Vic2NyaWJlcyB3aGVuIHRoZSBNZXNzYWdlSGFu\nZGxlciBoYXNuJ3QgYmVlbiByZWdpc3RlcmVkCiAgICAvLyB5ZXQgYnV0IHdl\nJ3ZlIGFscmVhZHkgcmVjZWl2ZWQgc3Vic2NyaXB0aW9uIG1lc3NhZ2VzIGZy\nb20gdGhlIHNlcnZlci4KICAgIC8vIFRoaXMgd2lsbCBiZSBsYXppbHkgY3Jl\nYXRlZCBhcyBuZWVkZWQuCiAgICBwcml2YXRlIGZpbmFsIFF1ZXVlPE1lc3Nh\nZ2U+IG1zZ1F1ZXVlID0gbmV3IExpbmtlZExpc3Q8TWVzc2FnZT4oKTsKCiAg\nICAvKioKICAgICAqIENvbnN0cnVjdCBhbiBhY3RpdmUgc3Vic2NyaWJlciBp\nbnN0YW5jZS4KICAgICAqCiAgICAgKiBAcGFyYW0gY2ZnCiAgICAgKiAgICAg\nICAgICBDbGllbnQgY29uZmlndXJhdGlvbiBvYmplY3QuCiAgICAgKiBAcGFy\nYW0gY2hhbm5lbE1hbmFnZXIKICAgICAqICAgICAgICAgIENoYW5uZWwgbWFu\nYWdlciBpbnN0YW5jZS4KICAgICAqIEBwYXJhbSB0cwogICAgICogICAgICAg\nICAgVG9waWMgc3Vic2NyaWJlci4KICAgICAqIEBwYXJhbSBvcAogICAgICog\nICAgICAgICAgUHViL1N1YiByZXF1ZXN0LgogICAgICogQHBhcmFtIHByZWZl\ncmVuY2VzCiAgICAgKiAgICAgICAgICBTdWJzY3JpcHRpb24gcHJlZmVyZW5j\nZXMgZm9yIHRoZSBzdWJzY3JpYmVyLgogICAgICogQHBhcmFtIGNoYW5uZWwK\nICAgICAqICAgICAgICAgIE5ldHR5IGNoYW5uZWwgdGhlIHN1YnNjcmliZXIg\nbGl2ZWQuCiAgICAgKi8KICAgIHB1YmxpYyBBY3RpdmVTdWJzY3JpYmVyKENs\naWVudENvbmZpZ3VyYXRpb24gY2ZnLAogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgQWJzdHJhY3RIQ2hhbm5lbE1hbmFnZXIgY2hhbm5lbE1hbmFnZXIs\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUb3BpY1N1YnNjcmliZXIg\ndHMsIFB1YlN1YkRhdGEgb3AsCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICBTdWJzY3JpcHRpb25QcmVmZXJlbmNlcyBwcmVmZXJlbmNlcywKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIENoYW5uZWwgY2hhbm5lbCwKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIEhDaGFubmVsIGhDaGFubmVsKSB7CiAg\nICAgICAgdGhpcy5jZmcgPSBjZmc7CiAgICAgICAgdGhpcy5jaGFubmVsTWFu\nYWdlciA9IGNoYW5uZWxNYW5hZ2VyOwogICAgICAgIHRoaXMudG9waWNTdWJz\nY3JpYmVyID0gdHM7CiAgICAgICAgdGhpcy5vcCA9IG9wOwogICAgICAgIHRo\naXMucHJlZmVyZW5jZXMgPSBwcmVmZXJlbmNlczsKICAgICAgICB0aGlzLmNo\nYW5uZWwgPSBjaGFubmVsOwogICAgICAgIHRoaXMuaENoYW5uZWwgPSBoQ2hh\nbm5lbDsKICAgIH0KCiAgICAvKioKICAgICAqIEByZXR1cm4gcHViL3N1YiBy\nZXF1ZXN0IGZvciB0aGUgc3Vic2NyaXB0aW9uLgogICAgICovCiAgICBwdWJs\naWMgUHViU3ViRGF0YSBnZXRQdWJTdWJEYXRhKCkgewogICAgICAgIHJldHVy\nbiB0aGlzLm9wOwogICAgfQoKICAgIC8qKgogICAgICogQHJldHVybiB0b3Bp\nYyBzdWJzY3JpYmVyIGlkIGZvciB0aGUgYWN0aXZlIHN1YnNjcmliZXIuCiAg\nICAgKi8KICAgIHB1YmxpYyBUb3BpY1N1YnNjcmliZXIgZ2V0VG9waWNTdWJz\nY3JpYmVyKCkgewogICAgICAgIHJldHVybiB0aGlzLnRvcGljU3Vic2NyaWJl\ncjsKICAgIH0KCiAgICAvKioKICAgICAqIFN0YXJ0IGRlbGl2ZXJpbmcgbWVz\nc2FnZXMgdXNpbmcgZ2l2ZW4gbWVzc2FnZSBoYW5kbGVyLgogICAgICoKICAg\nICAqIEBwYXJhbSBtZXNzYWdlSGFuZGxlcgogICAgICogICAgICAgICAgTWVz\nc2FnZSBoYW5kbGVyIHRvIGRlbGl2ZXIgbWVzc2FnZXMKICAgICAqIEB0aHJv\nd3MgQWxyZWFkeVN0YXJ0RGVsaXZlcnlFeGNlcHRpb24gaWYgc29tZW9uZSBh\nbHJlYWR5IHN0YXJ0ZWQgZGVsaXZlcnkuCiAgICAgKiBAdGhyb3dzIENsaWVu\ndE5vdFN1YnNjcmliZWRFeGNlcHRpb24gd2hlbiBzdGFydCBkZWxpdmVyeSBi\nZWZvcmUgc3Vic2NyaWJlLgogICAgICovCiAgICBwdWJsaWMgc3luY2hyb25p\nemVkIHZvaWQgc3RhcnREZWxpdmVyeShNZXNzYWdlSGFuZGxlciBtZXNzYWdl\nSGFuZGxlcikKICAgIHRocm93cyBBbHJlYWR5U3RhcnREZWxpdmVyeUV4Y2Vw\ndGlvbiwgQ2xpZW50Tm90U3Vic2NyaWJlZEV4Y2VwdGlvbiB7CiAgICAgICAg\naWYgKG51bGwgIT0gdGhpcy5tc2dIYW5kbGVyKSB7CiAgICAgICAgICAgIHRo\ncm93IG5ldyBBbHJlYWR5U3RhcnREZWxpdmVyeUV4Y2VwdGlvbigiQSBtZXNz\nYWdlIGhhbmRsZXIgIiArIG1zZ0hhbmRsZXIKICAgICAgICAgICAgICAgICsg\nIiBoYXMgYmVlbiBzdGFydGVkIGZvciAiICsgdG9waWNTdWJzY3JpYmVyKTsK\nICAgICAgICB9CiAgICAgICAgaWYgKG51bGwgIT0gbWVzc2FnZUhhbmRsZXIg\nJiYgbWVzc2FnZUhhbmRsZXIgaW5zdGFuY2VvZiBGaWx0ZXJhYmxlTWVzc2Fn\nZUhhbmRsZXIpIHsKICAgICAgICAgICAgRmlsdGVyYWJsZU1lc3NhZ2VIYW5k\nbGVyIGZpbHRlck1zZ0hhbmRsZXIgPQogICAgICAgICAgICAgICAgKEZpbHRl\ncmFibGVNZXNzYWdlSGFuZGxlcikgbWVzc2FnZUhhbmRsZXI7CiAgICAgICAg\nICAgIGlmIChmaWx0ZXJNc2dIYW5kbGVyLmhhc01lc3NhZ2VGaWx0ZXIoKSkg\newogICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gcHJlZmVyZW5jZXMpIHsK\nICAgICAgICAgICAgICAgICAgICAvLyBubyBwcmVmZXJlbmNlcyBtZWFucyB0\nYWxraW5nIHRvIGFuIG9sZCB2ZXJzaW9uIGh1YiBzZXJ2ZXIKICAgICAgICAg\nICAgICAgICAgICBsb2dnZXIud2FybigiU3RhcnQgZGVsaXZlcmluZyBtZXNz\nYWdlcyB3aXRoIGZpbHRlciBidXQgbm8gc3Vic2NyaXB0aW9uICIKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgKyAicHJlZmVyZW5jZXMgZm91bmQu\nIEl0IG1pZ2h0IGR1ZSB0byB0YWxraW5nIHRvIGFuIG9sZCB2ZXJzaW9uIgog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICArICIgaHViIHNlcnZlci4i\nKTsKICAgICAgICAgICAgICAgICAgICAvLyB1c2UgdGhlIG9yaWdpbmFsIG1l\nc3NhZ2UgaGFuZGxlci4KICAgICAgICAgICAgICAgICAgICBtZXNzYWdlSGFu\nZGxlciA9IGZpbHRlck1zZ0hhbmRsZXIuZ2V0TWVzc2FnZUhhbmRsZXIoKTsK\nICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAg\nLy8gcGFzcyBzdWJzY3JpcHRpb24gcHJlZmVyZW5jZXMgdG8gbWVzc2FnZSBm\naWx0ZXIKICAgICAgICAgICAgICAgICAgICBpZiAobG9nZ2VyLmlzRGVidWdF\nbmFibGVkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRl\nYnVnKCJTdGFydCBkZWxpdmVyaW5nIG1lc3NhZ2VzIHdpdGggZmlsdGVyIG9u\nIHt9LCBwcmVmZXJlbmNlczoge30iLAogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgdmEodG9waWNTdWJzY3JpYmVyLAogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3Vic2NyaXB0aW9uU3Rh\ndGVVdGlscy50b1N0cmluZyhwcmVmZXJlbmNlcykpKTsKICAgICAgICAgICAg\nICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgQ2xpZW50TWVzc2FnZUZp\nbHRlciBtc2dGaWx0ZXIgPSBmaWx0ZXJNc2dIYW5kbGVyLmdldE1lc3NhZ2VG\naWx0ZXIoKTsKICAgICAgICAgICAgICAgICAgICBtc2dGaWx0ZXIuc2V0U3Vi\nc2NyaXB0aW9uUHJlZmVyZW5jZXModG9waWNTdWJzY3JpYmVyLmdldFRvcGlj\nKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIHRvcGljU3Vic2NyaWJlci5nZXRTdWJzY3JpYmVy\nSWQoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgcHJlZmVyZW5jZXMpOwogICAgICAgICAgICAg\nICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB0aGlzLm1z\nZ0hhbmRsZXIgPSBtZXNzYWdlSGFuZGxlcjsKICAgICAgICAvLyBPbmNlIHRo\nZSBNZXNzYWdlSGFuZGxlciBpcyByZWdpc3RlcmVkLCBzZWUgaWYgd2UgaGF2\nZSBhbnkgcXVldWVkIHVwCiAgICAgICAgLy8gc3Vic2NyaXB0aW9uIG1lc3Nh\nZ2VzIHNlbnQgdG8gdXMgYWxyZWFkeSBmcm9tIHRoZSBzZXJ2ZXIuIElmIHNv\nLAogICAgICAgIC8vIGNvbnN1bWUgdGhvc2UgZmlyc3QuIERvIHRoaXMgb25s\neSBpZiB0aGUgTWVzc2FnZUhhbmRsZXIgcmVnaXN0ZXJlZCBpcwogICAgICAg\nIC8vIG5vdCBudWxsIChzaW5jZSB0aGF0IHdvdWxkIGJlIHRoZSBIZWR3aWdT\ndWJzY3JpYmVyLnN0b3BEZWxpdmVyeQogICAgICAgIC8vIGNhbGwpLgogICAg\nICAgIGlmIChudWxsID09IG1zZ0hhbmRsZXIpIHsKICAgICAgICAgICAgcmV0\ndXJuOwogICAgICAgIH0KICAgICAgICBpZiAobXNnUXVldWUuc2l6ZSgpID4g\nMCkgewogICAgICAgICAgICBpZiAobG9nZ2VyLmlzRGVidWdFbmFibGVkKCkp\nIHsKICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygiQ29uc3VtaW5nIHt9\nIHF1ZXVlZCB1cCBtZXNzYWdlcyBmb3Ige30iLAogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgIHZhKG1zZ1F1ZXVlLnNpemUoKSwgdG9waWNTdWJzY3Jp\nYmVyKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm9yIChNZXNzYWdl\nIG1lc3NhZ2UgOiBtc2dRdWV1ZSkgewogICAgICAgICAgICAgICAgYXN5bmNN\nZXNzYWdlRGVsaXZlcihtZXNzYWdlKTsKICAgICAgICAgICAgfQogICAgICAg\nICAgICAvLyBOb3cgd2UgY2FuIHJlbW92ZSB0aGUgcXVldWVkIHVwIG1lc3Nh\nZ2VzIHNpbmNlIHRoZXkgYXJlIGFsbAogICAgICAgICAgICAvLyBjb25zdW1l\nZC4KICAgICAgICAgICAgbXNnUXVldWUuY2xlYXIoKTsKICAgICAgICB9CiAg\nICB9CgogICAgLyoqCiAgICAgKiBTdG9wIGRlbGl2ZXJpbmcgbWVzc2FnZXMg\ndG8gdGhlIHN1YnNjcmliZXIuCiAgICAgKi8KICAgIHB1YmxpYyBzeW5jaHJv\nbml6ZWQgdm9pZCBzdG9wRGVsaXZlcnkoKSB7CiAgICAgICAgdGhpcy5tc2dI\nYW5kbGVyID0gbnVsbDsKICAgIH0KCiAgICAvKioKICAgICAqIEhhbmRsZSBy\nZWNlaXZlZCBtZXNzYWdlLgogICAgICoKICAgICAqIEBwYXJhbSBtZXNzYWdl\nCiAgICAgKiAgICAgICAgICBSZWNlaXZlZCBtZXNzYWdlLgogICAgICovCiAg\nICBwdWJsaWMgc3luY2hyb25pemVkIHZvaWQgaGFuZGxlTWVzc2FnZShNZXNz\nYWdlIG1lc3NhZ2UpIHsKICAgICAgICBpZiAobnVsbCAhPSBtc2dIYW5kbGVy\nKSB7CiAgICAgICAgICAgIGFzeW5jTWVzc2FnZURlbGl2ZXIobWVzc2FnZSk7\nCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gTWVzc2FnZUhhbmRs\nZXIgaGFzIG5vdCB5ZXQgYmVlbiByZWdpc3RlcmVkIHNvIHF1ZXVlIHVwIHRo\nZXNlCiAgICAgICAgICAgIC8vIG1lc3NhZ2VzIGZvciB0aGUgVG9waWMgU3Vi\nc2NyaXB0aW9uLiBNYWtlIHRoZSBpbml0aWFsIGxhenkKICAgICAgICAgICAg\nLy8gY3JlYXRpb24gb2YgdGhlIG1lc3NhZ2UgcXVldWUgdGhyZWFkIHNhZmUg\nanVzdCBzbyB3ZSBkb24ndAogICAgICAgICAgICAvLyBydW4gaW50byBhIHJh\nY2UgY29uZGl0aW9uIHdoZXJlIHR3byBzaW11bHRhbmVvdXMgdGhyZWFkcyBw\ncm9jZXNzCiAgICAgICAgICAgIC8vIGEgcmVjZWl2ZWQgbWVzc2FnZSBhbmQg\nYm90aCB0cnkgdG8gY3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mCiAgICAgICAg\nICAgIC8vIHRoZSBtZXNzYWdlIHF1ZXVlLiBQZXJmb3JtYW5jZSBvdmVyaGVh\nZCBzaG91bGQgYmUgb2theQogICAgICAgICAgICAvLyBiZWNhdXNlIHRoZSBk\nZWxpdmVyeSBvZiB0aGUgdG9waWMgaGFzIG5vdCBldmVuIHN0YXJ0ZWQgeWV0\nCiAgICAgICAgICAgIC8vIHNvIHRoZXNlIG1lc3NhZ2VzIGFyZSBub3QgY29u\nc3VtZWQgYW5kIGp1c3QgYnVmZmVyZWQgdXAgaGVyZS4KICAgICAgICAgICAg\naWYgKGxvZ2dlci5pc0RlYnVnRW5hYmxlZCgpKSB7CiAgICAgICAgICAgICAg\nICBsb2dnZXIuZGVidWcoIk1lc3NhZ2Uge30gaGFzIGFycml2ZWQgYnV0IG5v\nIE1lc3NhZ2VIYW5kbGVyIHByb3ZpZGVkIGZvciB7fSIKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICArICIgeWV0IHNvIHF1ZXVlaW5nIHVwIHRoZSBt\nZXNzYWdlLiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmEoTWVz\nc2FnZUlkVXRpbHMubXNnSWRUb1JlYWRhYmxlU3RyaW5nKG1lc3NhZ2UuZ2V0\nTXNnSWQoKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9w\naWNTdWJzY3JpYmVyKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbXNn\nUXVldWUuYWRkKG1lc3NhZ2UpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioK\nICAgICAqIERlbGl2ZXIgbWVzc2FnZSB0byB0aGUgY2xpZW50LgogICAgICoK\nICAgICAqIEBwYXJhbSBtZXNzYWdlCiAgICAgKiAgICAgICAgICBNZXNzYWdl\nIHRvIGRlbGl2ZXIuCiAgICAgKi8KICAgIHB1YmxpYyBzeW5jaHJvbml6ZWQg\ndm9pZCBhc3luY01lc3NhZ2VEZWxpdmVyKE1lc3NhZ2UgbWVzc2FnZSkgewog\nICAgICAgIGlmIChudWxsID09IG1zZ0hhbmRsZXIpIHsKICAgICAgICAgICAg\nbG9nZ2VyLmVycm9yKCJObyBtZXNzYWdlIGhhbmRsZXIgZm91bmQgdG8gZGVs\naXZlciBtZXNzYWdlIHt9IHRvIHt9LiIsCiAgICAgICAgICAgICAgICAgICAg\nICAgICB2YShNZXNzYWdlSWRVdGlscy5tc2dJZFRvUmVhZGFibGVTdHJpbmco\nbWVzc2FnZS5nZXRNc2dJZCgpKSwKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIHRvcGljU3Vic2NyaWJlcikpOwogICAgICAgICAgICByZXR1cm47CiAg\nICAgICAgfQogICAgICAgIGlmIChsb2dnZXIuaXNEZWJ1Z0VuYWJsZWQoKSkg\newogICAgICAgICAgICBsb2dnZXIuZGVidWcoIkNhbGwgdGhlIGNsaWVudCBh\ncHAncyBNZXNzYWdlSGFuZGxlciBhc3luY2hyb25vdXNseSB0byBkZWxpdmVy\nIHRoZSBtZXNzYWdlIHt9IHRvIHt9IiwKICAgICAgICAgICAgICAgICAgICAg\nICAgIHZhKG1lc3NhZ2UsIHRvcGljU3Vic2NyaWJlcikpOwogICAgICAgIH0K\nICAgICAgICB1bnNhZmVEZWxpdmVyTWVzc2FnZShtZXNzYWdlKTsKICAgIH0K\nCiAgICAvKioKICAgICAqIFVuc2FmZSB2ZXJzaW9uIHRvIGRlbGl2ZXIgbWVz\nc2FnZSB0byBhIG1lc3NhZ2UgaGFuZGxlci4KICAgICAqIENhbGxlciBuZWVk\nIHRvIGhhbmRsZSBzeW5jaHJvbml6YXRpb24gaXNzdWUuCiAgICAgKgogICAg\nICogQHBhcmFtIG1lc3NhZ2UKICAgICAqICAgICAgICAgIE1lc3NhZ2UgdG8g\nZGVsaXZlci4KICAgICAqLwogICAgcHJvdGVjdGVkIHZvaWQgdW5zYWZlRGVs\naXZlck1lc3NhZ2UoTWVzc2FnZSBtZXNzYWdlKSB7CiAgICAgICAgTWVzc2Fn\nZUNvbnN1bWVEYXRhIG1lc3NhZ2VDb25zdW1lRGF0YSA9CiAgICAgICAgICAg\nIG5ldyBNZXNzYWdlQ29uc3VtZURhdGEodG9waWNTdWJzY3JpYmVyLCBtZXNz\nYWdlKTsKICAgICAgICBtc2dIYW5kbGVyLmRlbGl2ZXIodG9waWNTdWJzY3Jp\nYmVyLmdldFRvcGljKCksIHRvcGljU3Vic2NyaWJlci5nZXRTdWJzY3JpYmVy\nSWQoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSwgY2hh\nbm5lbE1hbmFnZXIuZ2V0Q29uc3VtZUNhbGxiYWNrKCksCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgIG1lc3NhZ2VDb25zdW1lRGF0YSk7CiAgICB9Cgog\nICAgcHJpdmF0ZSBzeW5jaHJvbml6ZWQgYm9vbGVhbiB1cGRhdGVMYXN0TWVz\nc2FnZVNlcUlkKE1lc3NhZ2VTZXFJZCBzZXFJZCkgewogICAgICAgIGlmIChu\ndWxsICE9IGxhc3RNZXNzYWdlU2VxSWQgJiYKICAgICAgICAgICAgc2VxSWQu\nZ2V0TG9jYWxDb21wb25lbnQoKSA8PSBsYXN0TWVzc2FnZVNlcUlkLmdldExv\nY2FsQ29tcG9uZW50KCkpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwog\nICAgICAgIH0KICAgICAgICArK251bUNvbnN1bWVkTWVzc2FnZXNJbkJ1ZmZl\ncjsKICAgICAgICBsYXN0TWVzc2FnZVNlcUlkID0gc2VxSWQ7CiAgICAgICAg\naWYgKG51bUNvbnN1bWVkTWVzc2FnZXNJbkJ1ZmZlciA+PSBjZmcuZ2V0Q29u\nc3VtZWRNZXNzYWdlc0J1ZmZlclNpemUoKSkgewogICAgICAgICAgICBudW1D\nb25zdW1lZE1lc3NhZ2VzSW5CdWZmZXIgPSAwOwogICAgICAgICAgICBsYXN0\nTWVzc2FnZVNlcUlkID0gbnVsbDsKICAgICAgICAgICAgcmV0dXJuIHRydWU7\nCiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAv\nKioKICAgICAqIENvbnN1bWUgYSBzcGVjaWZpYyBtZXNzYWdlLgogICAgICoK\nICAgICAqIEBwYXJhbSBtZXNzYWdlU2VxSWQKICAgICAqICAgICAgICAgIE1l\nc3NhZ2Ugc2VxIGlkLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBjb25zdW1l\nKGZpbmFsIE1lc3NhZ2VTZXFJZCBtZXNzYWdlU2VxSWQpIHsKICAgICAgICBQ\ndWJTdWJSZXF1ZXN0LkJ1aWxkZXIgcHVic3ViUmVxdWVzdEJ1aWxkZXIgPQog\nICAgICAgICAgICBOZXRVdGlscy5idWlsZENvbnN1bWVSZXF1ZXN0KGNoYW5u\nZWxNYW5hZ2VyLm5leHRUeG5JZCgpLAogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIHRvcGljU3Vic2NyaWJlciwgbWVzc2FnZVNl\ncUlkKTsKCiAgICAgICAgLy8gRm9yIENvbnN1bWUgcmVxdWVzdHMsIHdlIHdp\nbGwgc2VuZCB0aGVtIGZyb20gdGhlIGNsaWVudCBpbiBhIGZpcmUgYW5kCiAg\nICAgICAgLy8gZm9yZ2V0IG1hbm5lci4gV2UgYXJlIG5vdCBleHBlY3Rpbmcg\ndGhlIHNlcnZlciB0byBzZW5kIGJhY2sgYW4gYWNrCiAgICAgICAgLy8gcmVz\ncG9uc2Ugc28gbm8gbmVlZCB0byByZWdpc3RlciB0aGlzIGluIHRoZSBSZXNw\nb25zZUhhbmRsZXIuIFRoZXJlCiAgICAgICAgLy8gYXJlIG5vIGNhbGxiYWNr\ncyB0byBpbnZva2Ugc2luY2UgdGhpcyBpc24ndCBhIGNsaWVudCBpbml0aWF0\nZWQKICAgICAgICAvLyBhY3Rpb24uIEluc3RlYWQsIGp1c3QgaGF2ZSBhIGZ1\ndHVyZSBsaXN0ZW5lciB0aGF0IHdpbGwgbG9nIGFuIGVycm9yCiAgICAgICAg\nLy8gbWVzc2FnZSBpZiB0aGVyZSB3YXMgYSBwcm9ibGVtIHdyaXRpbmcgdGhl\nIGNvbnN1bWUgcmVxdWVzdC4KICAgICAgICBpZiAobG9nZ2VyLmlzRGVidWdF\nbmFibGVkKCkpIHsKICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCJXcml0aW5n\nIGEgQ29uc3VtZSByZXF1ZXN0IHRvIGNoYW5uZWw6IHt9IHdpdGggbWVzc2Fn\nZVNlcUlkOiB7fSBmb3Ige30iLAogICAgICAgICAgICAgICAgICAgICAgICAg\ndmEoY2hhbm5lbCwgbWVzc2FnZVNlcUlkLCB0b3BpY1N1YnNjcmliZXIpKTsK\nICAgICAgICB9CiAgICAgICAgQ2hhbm5lbEZ1dHVyZSBmdXR1cmUgPSBjaGFu\nbmVsLndyaXRlKHB1YnN1YlJlcXVlc3RCdWlsZGVyLmJ1aWxkKCkpOwogICAg\nICAgIGZ1dHVyZS5hZGRMaXN0ZW5lcihuZXcgQ2hhbm5lbEZ1dHVyZUxpc3Rl\nbmVyKCkgewogICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVi\nbGljIHZvaWQgb3BlcmF0aW9uQ29tcGxldGUoQ2hhbm5lbEZ1dHVyZSBmdXR1\ncmUpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgICAgICAgICAgaWYgKCFm\ndXR1cmUuaXNTdWNjZXNzKCkpIHsKICAgICAgICAgICAgICAgICAgICBsb2dn\nZXIuZXJyb3IoIkVycm9yIHdyaXRpbmcgYSBDb25zdW1lIHJlcXVlc3QgdG8g\nY2hhbm5lbDoge30gd2l0aCBtZXNzYWdlU2VxSWQ6IHt9IGZvciB7fSIsCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhKGNoYW5uZWwsIG1l\nc3NhZ2VTZXFJZCwgdG9waWNTdWJzY3JpYmVyKSk7CiAgICAgICAgICAgICAg\nICB9CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0KCiAgICAvKioK\nICAgICAqIEFwcGxpY2F0aW9uIGFja2VkIHRvIGNvbnN1bWUgbWVzc2FnZS4K\nICAgICAqCiAgICAgKiBAcGFyYW0gbWVzc2FnZQogICAgICogICAgICAgICAg\nTWVzc2FnZSBjb25zdW1lZCBieSBhcHBsaWNhdGlvbi4KICAgICAqLwogICAg\ncHVibGljIHZvaWQgbWVzc2FnZUNvbnN1bWVkKE1lc3NhZ2UgbWVzc2FnZSkg\newogICAgICAgIC8vIEZvciBjb25zdW1lIHJlc3BvbnNlIHRvIHNlcnZlciwg\ndGhlcmUgaXMgYSBjb25maWcgcGFyYW0gb24gaG93IG1hbnkKICAgICAgICAv\nLyBtZXNzYWdlcyB0byBjb25zdW1lIGFuZCBidWZmZXIgdXAgYmVmb3JlIHNl\nbmRpbmcgdGhlIGNvbnN1bWUgcmVxdWVzdC4KICAgICAgICAvLyBXZSBqdXN0\nIG5lZWQgdG8ga2VlcCBhIGNvdW50IG9mIHRoZSBudW1iZXIgb2YgbWVzc2Fn\nZXMgY29uc3VtZWQKICAgICAgICAvLyBhbmQgdGhlIGxhcmdlc3QvbGF0ZXN0\nIG1zZyBJRCBzZWVuIHNvIGZhciBpbiB0aGlzIGJhdGNoLiBNZXNzYWdlcwog\nICAgICAgIC8vIHNob3VsZCBiZSBkZWxpdmVyZWQgaW4gb3JkZXIgYW5kIHdp\ndGhvdXQgZ2Fwcy4gRG8gdGhpcyBvbmx5IGlmCiAgICAgICAgLy8gYXV0by1z\nZW5kaW5nIG9mIGNvbnN1bWUgbWVzc2FnZXMgaXMgZW5hYmxlZC4KICAgICAg\nICBpZiAoY2ZnLmlzQXV0b1NlbmRDb25zdW1lTWVzc2FnZUVuYWJsZWQoKSkg\newogICAgICAgICAgICAvLyBVcGRhdGUgdGhlc2UgdmFyaWFibGVzIG9ubHkg\naWYgd2UgYXJlIGF1dG8tc2VuZGluZyBjb25zdW1lCiAgICAgICAgICAgIC8v\nIG1lc3NhZ2VzIHRvIHRoZSBzZXJ2ZXIuIE90aGVyd2lzZSB0aGUgb251cyBp\ncyBvbiB0aGUgY2xpZW50IGFwcAogICAgICAgICAgICAvLyB0byBjYWxsIHRo\nZSBTdWJzY3JpYmVyIGNvbnN1bWUgQVBJIHRvIGxldCB0aGUgc2VydmVyIGtu\nb3cgd2hpY2gKICAgICAgICAgICAgLy8gbWVzc2FnZXMgaXQgaGFzIHN1Y2Nl\nc3NmdWxseSBjb25zdW1lZC4KICAgICAgICAgICAgaWYgKHVwZGF0ZUxhc3RN\nZXNzYWdlU2VxSWQobWVzc2FnZS5nZXRNc2dJZCgpKSkgewogICAgICAgICAg\nICAgICAgLy8gU2VuZCB0aGUgY29uc3VtZSByZXF1ZXN0IGFuZCByZXNldCB0\naGUgY29uc3VtZWQgbWVzc2FnZXMgYnVmZmVyCiAgICAgICAgICAgICAgICAv\nLyB2YXJpYWJsZXMuIFdlIHdpbGwgdXNlIHRoZSBzYW1lIENoYW5uZWwgY3Jl\nYXRlZCBmcm9tIHRoZQogICAgICAgICAgICAgICAgLy8gc3Vic2NyaWJlIHJl\ncXVlc3QgZm9yIHRoZSBUb3BpY1N1YnNjcmliZXIuCiAgICAgICAgICAgICAg\nICBpZiAobG9nZ2VyLmlzRGVidWdFbmFibGVkKCkpIHsKICAgICAgICAgICAg\nICAgICAgICBsb2dnZXIuZGVidWcoIkNvbnN1bWUgbWVzc2FnZSB7fSB3aGVu\nIHJlYWNoaW5nIGNvbnN1bWVkIG1lc3NhZ2UgYnVmZmVyIGxpbWl0LiIsCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZ2V0TXNn\nSWQoKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjb25z\ndW1lKG1lc3NhZ2UuZ2V0TXNnSWQoKSk7CiAgICAgICAgICAgIH0KICAgICAg\nICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXN1YnNjcmliZSBhIHN1YnNj\ncmliZXIgaWYgbmVjZXNzYXJ5LgogICAgICoKICAgICAqIEBwYXJhbSBldmVu\ndAogICAgICogICAgICAgICAgU3Vic2NyaXB0aW9uIEV2ZW50LgogICAgICov\nCiAgICBwdWJsaWMgdm9pZCByZXN1YnNjcmliZUlmTmVjZXNzYXJ5KFN1YnNj\ncmlwdGlvbkV2ZW50IGV2ZW50KSB7CiAgICAgICAgLy8gY2xlYXIgdG9waWMg\nb3duZXJzaGlwCiAgICAgICAgaWYgKFN1YnNjcmlwdGlvbkV2ZW50LlRPUElD\nX01PVkVEID09IGV2ZW50KSB7CiAgICAgICAgICAgIGNoYW5uZWxNYW5hZ2Vy\nLmNsZWFySG9zdEZvclRvcGljKHRvcGljU3Vic2NyaWJlci5nZXRUb3BpYygp\nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICBOZXRVdGlscy5nZXRIb3N0RnJvbUNoYW5uZWwoY2hhbm5lbCkpOwogICAg\nICAgIH0KICAgICAgICBpZiAoIW9wLm9wdGlvbnMuZ2V0RW5hYmxlUmVzdWJz\nY3JpYmUoKSkgewogICAgICAgICAgICBjaGFubmVsTWFuYWdlci5nZXRTdWJz\nY3JpcHRpb25FdmVudEVtaXR0ZXIoKS5lbWl0U3Vic2NyaXB0aW9uRXZlbnQo\nCiAgICAgICAgICAgICAgICB0b3BpY1N1YnNjcmliZXIuZ2V0VG9waWMoKSwg\ndG9waWNTdWJzY3JpYmVyLmdldFN1YnNjcmliZXJJZCgpLCBldmVudCk7CiAg\nICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgLy8gU2luY2Ug\ndGhlIGNvbm5lY3Rpb24gdG8gdGhlIHNlcnZlciBob3N0IHRoYXQgd2FzIHJl\nc3BvbnNpYmxlCiAgICAgICAgLy8gZm9yIHRoZSB0b3BpYyBkaWVkLCB3ZSBh\ncmUgbm90IHN1cmUgYWJvdXQgdGhlIHN0YXRlIG9mIHRoYXQKICAgICAgICAv\nLyBzZXJ2ZXIuIFJlc2VuZCB0aGUgb3JpZ2luYWwgc3Vic2NyaWJlIHJlcXVl\nc3QgZGF0YSB0byB0aGUgZGVmYXVsdAogICAgICAgIC8vIHNlcnZlciBob3N0\nL1ZJUC4gQWxzbyBjbGVhciBvdXQgYWxsIG9mIHRoZSBzZXJ2ZXJzIHdlJ3Zl\nCiAgICAgICAgLy8gY29udGFjdGVkIG9yIGF0dGVtcHRlZCB0byBmcm9tIHRo\naXMgcmVxdWVzdCBhcyB3ZSBhcmUgc3RhcnRpbmcgYQogICAgICAgIC8vICJm\ncmVzaCIgc3Vic2NyaWJlIHJlcXVlc3QuCiAgICAgICAgb3AuY2xlYXJTZXJ2\nZXJzTGlzdCgpOwogICAgICAgIC8vIFNldCBhIG5ldyB0eXBlIG9mIFZvaWRD\nYWxsYmFjayBmb3IgdGhpcyBhc3luYyBjYWxsLiBXZSBuZWVkIHRoaXMKICAg\nICAgICAvLyBob29rIHNvIGFmdGVyIHRoZSByZXN1YnNjcmliZSBoYXMgY29t\ncGxldGVkLCBkZWxpdmVyeSBmb3IKICAgICAgICAvLyB0aGF0IHRvcGljIHN1\nYnNjcmliZXIgc2hvdWxkIGFsc28gYmUgcmVzdGFydGVkIChpZiBpdCB3YXMg\ndGhhdAogICAgICAgIC8vIGNhc2UgYmVmb3JlIHRoZSBjaGFubmVsIGRpc2Nv\nbm5lY3QpLgogICAgICAgIGZpbmFsIGxvbmcgcmV0cnlXYWl0VGltZSA9IGNm\nZy5nZXRTdWJzY3JpYmVSZWNvbm5lY3RSZXRyeVdhaXRUaW1lKCk7CiAgICAg\nICAgUmVzdWJzY3JpYmVDYWxsYmFjayByZXN1YnNjcmliZUNiID0KICAgICAg\nICAgICAgbmV3IFJlc3Vic2NyaWJlQ2FsbGJhY2sodG9waWNTdWJzY3JpYmVy\nLCBvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hh\nbm5lbE1hbmFnZXIsIHJldHJ5V2FpdFRpbWUpOwogICAgICAgIG9wLnNldENh\nbGxiYWNrKHJlc3Vic2NyaWJlQ2IpOwogICAgICAgIG9wLmNvbnRleHQgPSBu\ndWxsOwogICAgICAgIG9wLnNldE9yaWdpbmFsQ2hhbm5lbEZvclJlc3Vic2Ny\naWJlKGhDaGFubmVsKTsKICAgICAgICBpZiAobG9nZ2VyLmlzRGVidWdFbmFi\nbGVkKCkpIHsKICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCJSZXN1YnNjcmli\nZSB7fSB3aXRoIG9yaWdTdWJEYXRhIHt9IiwKICAgICAgICAgICAgICAgICAg\nICAgICAgIHZhKHRvcGljU3Vic2NyaWJlciwgb3ApKTsKICAgICAgICB9CiAg\nICAgICAgLy8gcmVzdWJtaXQgdGhlIHJlcXVlc3QKICAgICAgICBjaGFubmVs\nTWFuYWdlci5zdWJtaXRPcChvcCk7CiAgICB9Cn0K\n","encoding":"base64"}

