{"sha":"10c05ef666e6eb3cc706ee54eb509f30f2910622","node_id":"MDQ6QmxvYjE1NzU5NTY6MTBjMDVlZjY2NmU2ZWIzY2M3MDZlZTU0ZWI1MDlmMzBmMjkxMDYyMg==","size":3780,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/10c05ef666e6eb3cc706ee54eb509f30f2910622","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQubmV0dHkuaW1wbDsKCmlt\ncG9ydCBqYXZhLm5ldC5JbmV0U29ja2V0QWRkcmVzczsKCmltcG9ydCBvcmcu\namJvc3MubmV0dHkuY2hhbm5lbC5DaGFubmVsRnV0dXJlOwppbXBvcnQgb3Jn\nLmpib3NzLm5ldHR5LmNoYW5uZWwuQ2hhbm5lbEZ1dHVyZUxpc3RlbmVyOwoK\naW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmNsaWVudC5kYXRhLlB1YlN1YkRh\ndGE7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5QdWJTdWJQ\ncm90b2NvbC5PcGVyYXRpb25UeXBlOwppbXBvcnQgc3RhdGljIG9yZy5hcGFj\naGUuaGVkd2lnLnV0aWwuVmFyQXJncy52YTsKCmltcG9ydCBvcmcuc2xmNGou\nTG9nZ2VyOwppbXBvcnQgb3JnLnNsZjRqLkxvZ2dlckZhY3Rvcnk7CgovKioK\nICogSGFuZGxlIHJlcXVlc3RzIHNlbnQgdG8gZGVmYXVsdCBodWIgc2VydmVy\nLiA8Yj5EZWZhdWx0U2VydmVyQ2hhbm5lbDwvYj4gd291bGQgbm90CiAqIGJl\nIHVzZWQgYXMgYSBjaGFubmVsIHRvIHNlbmQgcmVxdWVzdHMgZGlyZWN0bHku\nIEl0IGp1c3QgdGFrZXMgdGhlIHJlc3BvbnNpYmlsaXR5IHRvCiAqIGNvbm5l\nY3QgdG8gdGhlIGRlZmF1bHQgc2VydmVyLiBBZnRlciB0aGUgdW5kZXJseWlu\nZyBuZXR0eSBjaGFubmVsIGlzIGVzdGFibGlzaGVkLAogKiBpdCB3b3VsZCBj\nYWxsIHtAbGluayBIQ2hhbm5lbE1hbmFnZXIjc3VibWl0T3BUaHJ1Q2hhbm5l\nbCgpfSB0byBzZW5kIHJlcXVlc3RzIHRocnUKICogdGhlIHVuZGVybHlpbmcg\nbmV0dHkgY2hhbm5lbC4KICovCmNsYXNzIERlZmF1bHRTZXJ2ZXJDaGFubmVs\nIGV4dGVuZHMgSENoYW5uZWxJbXBsIHsKCiAgICBwcml2YXRlIHN0YXRpYyBM\nb2dnZXIgbG9nZ2VyID0gTG9nZ2VyRmFjdG9yeS5nZXRMb2dnZXIoRGVmYXVs\ndFNlcnZlckNoYW5uZWwuY2xhc3MpOwoKICAgIERlZmF1bHRTZXJ2ZXJDaGFu\nbmVsKEluZXRTb2NrZXRBZGRyZXNzIGhvc3QsIEFic3RyYWN0SENoYW5uZWxN\nYW5hZ2VyIGNoYW5uZWxNYW5hZ2VyKSB7CiAgICAgICAgc3VwZXIoaG9zdCwg\nY2hhbm5lbE1hbmFnZXIpOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVi\nbGljIFN0cmluZyB0b1N0cmluZygpIHsKICAgICAgICBTdHJpbmdCdWlsZGVy\nIHNiID0gbmV3IFN0cmluZ0J1aWxkZXIoKTsKICAgICAgICBzYi5hcHBlbmQo\nIltEZWZhdWx0U2VydmVyOiAiKS5hcHBlbmQoaG9zdCkuYXBwZW5kKCJdIik7\nCiAgICAgICAgcmV0dXJuIHNiLnRvU3RyaW5nKCk7CiAgICB9CgogICAgQE92\nZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBzdWJtaXRPcChmaW5hbCBQdWJTdWJE\nYXRhIHB1YlN1YkRhdGEpIHsKICAgICAgICAvLyBmb3IgZWFjaCBwdWIvc3Vi\nIHJlcXVlc3Qgc2VudCB0byBkZWZhdWx0IGh1YiBzZXJ2ZXIKICAgICAgICAv\nLyB3ZSB3b3VsZCBlc3RhYmxpc2ggYSBmcmVzaCBjb25uZWN0aW9uIGZvciBp\ndAogICAgICAgIENsaWVudENoYW5uZWxQaXBlbGluZUZhY3RvcnkgcGlwZWxp\nbmVGYWN0b3J5OwogICAgICAgIGlmIChPcGVyYXRpb25UeXBlLlBVQkxJU0gu\nZXF1YWxzKHB1YlN1YkRhdGEub3BlcmF0aW9uVHlwZSkgfHwKICAgICAgICAg\nICAgT3BlcmF0aW9uVHlwZS5VTlNVQlNDUklCRS5lcXVhbHMocHViU3ViRGF0\nYS5vcGVyYXRpb25UeXBlKSkgewogICAgICAgICAgICBwaXBlbGluZUZhY3Rv\ncnkgPSBjaGFubmVsTWFuYWdlci5nZXROb25TdWJzY3JpcHRpb25DaGFubmVs\nUGlwZWxpbmVGYWN0b3J5KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAg\nICAgcGlwZWxpbmVGYWN0b3J5ID0gY2hhbm5lbE1hbmFnZXIuZ2V0U3Vic2Ny\naXB0aW9uQ2hhbm5lbFBpcGVsaW5lRmFjdG9yeSgpOwogICAgICAgIH0KICAg\nICAgICBDaGFubmVsRnV0dXJlIGZ1dHVyZSA9IGNvbm5lY3QoaG9zdCwgcGlw\nZWxpbmVGYWN0b3J5KTsKICAgICAgICBmdXR1cmUuYWRkTGlzdGVuZXIobmV3\nIENoYW5uZWxGdXR1cmVMaXN0ZW5lcigpIHsKICAgICAgICAgICAgQE92ZXJy\naWRlCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9wZXJhdGlvbkNvbXBsZXRl\nKENoYW5uZWxGdXR1cmUgZnV0dXJlKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAg\nICAgICAgICAgICAgIC8vIElmIHRoZSBjaGFubmVsIGhhcyBiZWVuIGNsb3Nl\nZCwgdGhlcmUgaXMgbm8gbmVlZCB0byBwcm9jZWVkIHdpdGggYW55IGNhbGxi\nYWNrCiAgICAgICAgICAgICAgICAvLyBsb2dpYyBoZXJlLgogICAgICAgICAg\nICAgICAgaWYgKGNsb3NlZCkgewogICAgICAgICAgICAgICAgICAgIGZ1dHVy\nZS5nZXRDaGFubmVsKCkuY2xvc2UoKTsKICAgICAgICAgICAgICAgICAgICBy\nZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8g\nQ2hlY2sgaWYgdGhlIGNvbm5lY3Rpb24gdG8gdGhlIHNlcnZlciB3YXMgZG9u\nZSBzdWNjZXNzZnVsbHkuCiAgICAgICAgICAgICAgICBpZiAoIWZ1dHVyZS5p\nc1N1Y2Nlc3MoKSkgewogICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJv\ncigiRXJyb3IgY29ubmVjdGluZyB0byBob3N0IHt9LiIsIGhvc3QpOwogICAg\nICAgICAgICAgICAgICAgIGZ1dHVyZS5nZXRDaGFubmVsKCkuY2xvc2UoKTsK\nCiAgICAgICAgICAgICAgICAgICAgcmV0cnlPckZhaWxPcChwdWJTdWJEYXRh\nKTsKICAgICAgICAgICAgICAgICAgICAvLyBGaW5pc2hlZCB3aXRoIGZhaWx1\ncmUgbG9naWMgc28ganVzdCByZXR1cm4uCiAgICAgICAgICAgICAgICAgICAg\ncmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgbG9n\nZ2VyLmRlYnVnKCJDb25uZWN0ZWQgdG8gaG9zdCB7fSBmb3IgcHViU3ViRGF0\nYToge30iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhKGhvc3Qs\nIHB1YlN1YkRhdGEpKTsKICAgICAgICAgICAgICAgIGNoYW5uZWxNYW5hZ2Vy\nLnN1Ym1pdE9wVGhydUNoYW5uZWwocHViU3ViRGF0YSwgZnV0dXJlLmdldENo\nYW5uZWwoKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0KCn0K\n","encoding":"base64"}

