{"sha":"4774d4110869f78d886fa24ac5005e5229d07af4","node_id":"MDQ6QmxvYjE1NzU5NTY6NDc3NGQ0MTEwODY5Zjc4ZDg4NmZhMjRhYzUwMDVlNTIyOWQwN2FmNA==","size":4891,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/4774d4110869f78d886fa24ac5005e5229d07af4","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQubmV0dHkuaW1wbDsKCmlt\ncG9ydCBvcmcuc2xmNGouTG9nZ2VyOwppbXBvcnQgb3JnLnNsZjRqLkxvZ2dl\nckZhY3Rvcnk7CgppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuY2xpZW50LmRh\ndGEuUHViU3ViRGF0YTsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmNsaWVu\ndC5kYXRhLlRvcGljU3Vic2NyaWJlcjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVk\nd2lnLmNsaWVudC5leGNlcHRpb25zLkFscmVhZHlTdGFydERlbGl2ZXJ5RXhj\nZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuZXhjZXB0aW9ucy5Q\ndWJTdWJFeGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5leGNl\ncHRpb25zLlB1YlN1YkV4Y2VwdGlvbi5DbGllbnROb3RTdWJzY3JpYmVkRXhj\nZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuZXhjZXB0aW9ucy5Q\ndWJTdWJFeGNlcHRpb24uUmVzdWJzY3JpYmVFeGNlcHRpb247CmltcG9ydCBv\ncmcuYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5QdWJTdWJQcm90b2NvbC5SZXNw\nb25zZUJvZHk7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy51dGlsLkNhbGxi\nYWNrOwppbXBvcnQgc3RhdGljIG9yZy5hcGFjaGUuaGVkd2lnLnV0aWwuVmFy\nQXJncy52YTsKCi8qKgogKiBUaGlzIGNsYXNzIGlzIHVzZWQgd2hlbiBhIFN1\nYnNjcmliZSBjaGFubmVsIGdldHMgZGlzY29ubmVjdGVkIGFuZCB3ZSBhdHRl\nbXB0CiAqIHRvIHJlc3VibWl0IHN1YnNjcmliZSByZXF1ZXN0cyBleGlzdGVk\nIGluIHRoYXQgY2hhbm5lbC4gT25jZSB0aGUgcmVzdWJzY3JpYmUKICogdGhl\nIHRvcGljIGlzIGNvbXBsZXRlZCwgd2UgbmVlZCB0byByZXN0YXJ0IGRlbGl2\nZXJ5IGZvciB0aGF0IHRvcGljLgogKi8KY2xhc3MgUmVzdWJzY3JpYmVDYWxs\nYmFjayBpbXBsZW1lbnRzIENhbGxiYWNrPFJlc3BvbnNlQm9keT4gewoKICAg\nIHByaXZhdGUgc3RhdGljIExvZ2dlciBsb2dnZXIgPSBMb2dnZXJGYWN0b3J5\nLmdldExvZ2dlcihSZXN1YnNjcmliZUNhbGxiYWNrLmNsYXNzKTsKCiAgICAv\nLyBQcml2YXRlIG1lbWJlciB2YXJpYWJsZXMKICAgIHByaXZhdGUgZmluYWwg\nVG9waWNTdWJzY3JpYmVyIG9yaWdUb3BpY1N1YnNjcmliZXI7CiAgICBwcml2\nYXRlIGZpbmFsIFB1YlN1YkRhdGEgb3JpZ1N1YkRhdGE7CiAgICBwcml2YXRl\nIGZpbmFsIEFic3RyYWN0SENoYW5uZWxNYW5hZ2VyIGNoYW5uZWxNYW5hZ2Vy\nOwogICAgcHJpdmF0ZSBmaW5hbCBsb25nIHJldHJ5V2FpdFRpbWU7CgogICAg\nLy8gQ29uc3RydWN0b3IKICAgIFJlc3Vic2NyaWJlQ2FsbGJhY2soVG9waWNT\ndWJzY3JpYmVyIG9yaWdUb3BpY1N1YnNjcmliZXIsCiAgICAgICAgICAgICAg\nICAgICAgICAgIFB1YlN1YkRhdGEgb3JpZ1N1YkRhdGEsCiAgICAgICAgICAg\nICAgICAgICAgICAgIEFic3RyYWN0SENoYW5uZWxNYW5hZ2VyIGNoYW5uZWxN\nYW5hZ2VyLAogICAgICAgICAgICAgICAgICAgICAgICBsb25nIHJldHJ5V2Fp\ndFRpbWUpIHsKICAgICAgICB0aGlzLm9yaWdUb3BpY1N1YnNjcmliZXIgPSBv\ncmlnVG9waWNTdWJzY3JpYmVyOwogICAgICAgIHRoaXMub3JpZ1N1YkRhdGEg\nPSBvcmlnU3ViRGF0YTsKICAgICAgICB0aGlzLmNoYW5uZWxNYW5hZ2VyID0g\nY2hhbm5lbE1hbmFnZXI7CiAgICAgICAgdGhpcy5yZXRyeVdhaXRUaW1lID0g\ncmV0cnlXYWl0VGltZTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1Ymxp\nYyB2b2lkIG9wZXJhdGlvbkZpbmlzaGVkKE9iamVjdCBjdHgsIFJlc3BvbnNl\nQm9keSByZXN1bHRPZk9wZXJhdGlvbikgewogICAgICAgIGlmIChsb2dnZXIu\naXNEZWJ1Z0VuYWJsZWQoKSkKICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCJS\nZXN1YnNjcmliZSBzdWNjZWVkZWQgZm9yIG9yaWdTdWJEYXRhOiAiICsgb3Jp\nZ1N1YkRhdGEpOwogICAgICAgIC8vIE5vdyB3ZSB3YW50IHRvIHJlc3RhcnQg\nZGVsaXZlcnkgZm9yIHRoZSBzdWJzY3JpcHRpb24gY2hhbm5lbCBvbmx5CiAg\nICAgICAgLy8gaWYgZGVsaXZlcnkgd2FzIHN0YXJ0ZWQgYXQgdGhlIHRpbWUg\ndGhlIG9yaWdpbmFsIHN1YnNjcmliZSBjaGFubmVsCiAgICAgICAgLy8gd2Fz\nIGRpc2Nvbm5lY3RlZC4KICAgICAgICB0cnkgewogICAgICAgICAgICBjaGFu\nbmVsTWFuYWdlci5yZXN0YXJ0RGVsaXZlcnkob3JpZ1RvcGljU3Vic2NyaWJl\ncik7CiAgICAgICAgfSBjYXRjaCAoQ2xpZW50Tm90U3Vic2NyaWJlZEV4Y2Vw\ndGlvbiBlKSB7CiAgICAgICAgICAgIC8vIFRoaXMgZXhjZXB0aW9uIHNob3Vs\nZCBuZXZlciBiZSB0aHJvd24gaGVyZSBidXQganVzdCBpbiBjYXNlLAogICAg\nICAgICAgICAvLyBsb2cgYW4gZXJyb3IgYW5kIGp1c3Qga2VlcCByZXRyeWlu\nZyB0aGUgc3Vic2NyaWJlIHJlcXVlc3QuCiAgICAgICAgICAgIGxvZ2dlci5l\ncnJvcigiU3Vic2NyaWJlIHdhcyBzdWNjZXNzZnVsIGJ1dCBlcnJvciBzdGFy\ndGluZyBkZWxpdmVyeSBmb3Ige30gOiB7fSIsCiAgICAgICAgICAgICAgICAg\nICAgICAgICB2YShvcmlnVG9waWNTdWJzY3JpYmVyLCBlLmdldE1lc3NhZ2Uo\nKSkpOwogICAgICAgICAgICByZXRyeVN1YnNjcmliZVJlcXVlc3QoKTsKICAg\nICAgICB9IGNhdGNoIChBbHJlYWR5U3RhcnREZWxpdmVyeUV4Y2VwdGlvbiBh\nc2RlKSB7CiAgICAgICAgICAgIC8vIHNob3VsZCBub3QgcmVhY2ggaGVyZQog\nICAgICAgIH0KICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lk\nIG9wZXJhdGlvbkZhaWxlZChPYmplY3QgY3R4LCBQdWJTdWJFeGNlcHRpb24g\nZXhjZXB0aW9uKSB7CiAgICAgICAgaWYgKGV4Y2VwdGlvbiBpbnN0YW5jZW9m\nIFJlc3Vic2NyaWJlRXhjZXB0aW9uKSB7CiAgICAgICAgICAgIC8vIGl0IG1p\nZ2h0IGJlIGNhdXNlZCBieSBjbG9zZXN1YiB3aGVuIHJlc3Vic2NyaWJpbmcu\nCiAgICAgICAgICAgIC8vIHNvIHdlIGRvbid0IG5lZWQgdG8gcmV0cnkgcmVz\ndWJzY3JpYmUgYWdhaW4KICAgICAgICAgICAgbG9nZ2VyLndhcm4oIkZhaWxl\nZCB0byByZXN1YnNjcmliZSB7fSA6IGJ1dCBpdCBpcyBjYXVzZWQgYnkgY2xv\nc2VzdWIgd2hlbiByZXN1YnNjcmliaW5nLiAiCiAgICAgICAgICAgICAgICAg\nICAgICAgICsgInNvIHdlIGRvbid0IG5lZWQgdG8gcmV0cnkgc3Vic2NyaWJl\nIGFnYWluLiIsIG9yaWdTdWJEYXRhKTsKICAgICAgICB9CiAgICAgICAgLy8g\nSWYgdGhlIHJlc3Vic2NyaWJlIGZhaWxzLCBqdXN0IGtlZXAgcmV0cnlpbmcg\ndGhlIHN1YnNjcmliZQogICAgICAgIC8vIHJlcXVlc3QuIFRoZXJlIGlzbid0\nIGEgd2F5IHRvIGZsYWcgdG8gdGhlIGFwcGxpY2F0aW9uIGxheWVyIHRoYXQK\nICAgICAgICAvLyBhIHRvcGljIHN1YnNjcmlwdGlvbiBoYXMgZmFpbGVkLiBT\nbyBpbnN0ZWFkLCB3ZSdsbCBqdXN0IGtlZXAKICAgICAgICAvLyByZXRyeWlu\nZyBpbiB0aGUgYmFja2dyb3VuZCB1bnRpbCBzdWNjZXNzLgogICAgICAgIGxv\nZ2dlci5lcnJvcigiUmVzdWJzY3JpYmUgZmFpbGVkIHdpdGggZXJyb3I6ICIg\nKyBleGNlcHRpb24uZ2V0TWVzc2FnZSgpKTsKICAgICAgICAvLyB3ZSBkb24n\ndCByZXRyeSBzdWJzY3JpYmUgcmVxdWVzdCBpcyBjaGFubmVsIG1hbmFnZXIg\naXMgY2xvc2luZwogICAgICAgIC8vIG90aGVyd2lzZSBpdCBtaWdodCBvdmVy\nZmxvdyB0aGUgc3RhY2suCiAgICAgICAgaWYgKCFjaGFubmVsTWFuYWdlci5p\nc0Nsb3NlZCgpKSB7CiAgICAgICAgICAgIHJldHJ5U3Vic2NyaWJlUmVxdWVz\ndCgpOwogICAgICAgIH0KICAgIH0KCiAgICBwcml2YXRlIHZvaWQgcmV0cnlT\ndWJzY3JpYmVSZXF1ZXN0KCkgewogICAgICAgIGlmIChjaGFubmVsTWFuYWdl\nci5pc0Nsb3NlZCgpKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9\nCiAgICAgICAgb3JpZ1N1YkRhdGEuY2xlYXJTZXJ2ZXJzTGlzdCgpOwogICAg\nICAgIGxvZ2dlci5kZWJ1ZygiUmVzdWJtaXQgc3Vic2NyaWJlIHJlcXVlc3Qg\nZm9yIHt9IGluIHt9IG1zIGxhdGVyLiIsCiAgICAgICAgICAgICAgICAgICAg\nIHZhKG9yaWdUb3BpY1N1YnNjcmliZXIsIHJldHJ5V2FpdFRpbWUpKTsKICAg\nICAgICBjaGFubmVsTWFuYWdlci5zdWJtaXRPcEFmdGVyRGVsYXkob3JpZ1N1\nYkRhdGEsIHJldHJ5V2FpdFRpbWUpOwogICAgfQp9Cg==\n","encoding":"base64"}

