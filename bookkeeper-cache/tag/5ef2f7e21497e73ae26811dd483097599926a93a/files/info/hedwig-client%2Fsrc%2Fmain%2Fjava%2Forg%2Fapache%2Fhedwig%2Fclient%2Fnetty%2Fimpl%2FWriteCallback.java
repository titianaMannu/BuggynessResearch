{"sha":"26dd15308fe645afeeaf01d011be2a1f775bf080","node_id":"MDQ6QmxvYjE1NzU5NTY6MjZkZDE1MzA4ZmU2NDVhZmVlYWYwMWQwMTFiZTJhMWY3NzViZjA4MA==","size":5495,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/26dd15308fe645afeeaf01d011be2a1f775bf080","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQubmV0dHkuaW1wbDsKCmlt\ncG9ydCBqYXZhLm5ldC5JbmV0U29ja2V0QWRkcmVzczsKaW1wb3J0IGphdmEu\ndXRpbC5MaW5rZWRMaXN0OwoKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmNs\naWVudC5leGNlcHRpb25zLk5vUmVzcG9uc2VIYW5kbGVyRXhjZXB0aW9uOwpp\nbXBvcnQgb3JnLnNsZjRqLkxvZ2dlcjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dn\nZXJGYWN0b3J5OwppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmNoYW5uZWwuQ2hh\nbm5lbEZ1dHVyZTsKaW1wb3J0IG9yZy5qYm9zcy5uZXR0eS5jaGFubmVsLkNo\nYW5uZWxGdXR1cmVMaXN0ZW5lcjsKCmltcG9ydCBjb20uZ29vZ2xlLnByb3Rv\nYnVmLkJ5dGVTdHJpbmc7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5jbGll\nbnQuZGF0YS5QdWJTdWJEYXRhOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcu\nY2xpZW50Lm5ldHR5LkhDaGFubmVsTWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFj\naGUuaGVkd2lnLmNsaWVudC5uZXR0eS5OZXRVdGlsczsKaW1wb3J0IG9yZy5h\ncGFjaGUuaGVkd2lnLmV4Y2VwdGlvbnMuUHViU3ViRXhjZXB0aW9uLlNlcnZp\nY2VEb3duRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcudXRp\nbC5IZWR3aWdTb2NrZXRBZGRyZXNzOwoKcHVibGljIGNsYXNzIFdyaXRlQ2Fs\nbGJhY2sgaW1wbGVtZW50cyBDaGFubmVsRnV0dXJlTGlzdGVuZXIgewoKICAg\nIHByaXZhdGUgc3RhdGljIExvZ2dlciBsb2dnZXIgPSBMb2dnZXJGYWN0b3J5\nLmdldExvZ2dlcihXcml0ZUNhbGxiYWNrLmNsYXNzKTsKCiAgICAvLyBQcml2\nYXRlIG1lbWJlciB2YXJpYWJsZXMKICAgIHByaXZhdGUgUHViU3ViRGF0YSBw\ndWJTdWJEYXRhOwogICAgcHJpdmF0ZSBmaW5hbCBIQ2hhbm5lbE1hbmFnZXIg\nY2hhbm5lbE1hbmFnZXI7CgogICAgLy8gQ29uc3RydWN0b3IKICAgIHB1Ymxp\nYyBXcml0ZUNhbGxiYWNrKFB1YlN1YkRhdGEgcHViU3ViRGF0YSwKICAgICAg\nICAgICAgICAgICAgICAgICAgIEhDaGFubmVsTWFuYWdlciBjaGFubmVsTWFu\nYWdlcikgewogICAgICAgIHN1cGVyKCk7CiAgICAgICAgdGhpcy5wdWJTdWJE\nYXRhID0gcHViU3ViRGF0YTsKICAgICAgICB0aGlzLmNoYW5uZWxNYW5hZ2Vy\nID0gY2hhbm5lbE1hbmFnZXI7CiAgICB9CgogICAgcHVibGljIHZvaWQgb3Bl\ncmF0aW9uQ29tcGxldGUoQ2hhbm5lbEZ1dHVyZSBmdXR1cmUpIHRocm93cyBF\neGNlcHRpb24gewogICAgICAgIC8vIElmIHRoZSBjbGllbnQgaGFzIHN0b3Bw\nZWQsIHRoZXJlIGlzIG5vIG5lZWQgdG8gcHJvY2VlZAogICAgICAgIC8vIHdp\ndGggYW55IGNhbGxiYWNrIGxvZ2ljIGhlcmUuCiAgICAgICAgaWYgKGNoYW5u\nZWxNYW5hZ2VyLmlzQ2xvc2VkKCkpIHsKICAgICAgICAgICAgZnV0dXJlLmdl\ndENoYW5uZWwoKS5jbG9zZSgpOwogICAgICAgICAgICByZXR1cm47CiAgICAg\nICAgfQoKICAgICAgICAvLyBXaGVuIHRoZSB3cml0ZSBvcGVyYXRpb24gdG8g\ndGhlIHNlcnZlciBpcyBkb25lLCB3ZSBqdXN0IG5lZWQgdG8gY2hlY2sKICAg\nICAgICAvLyBpZiBpdCB3YXMgc3VjY2Vzc2Z1bCBvciBub3QuCiAgICAgICAg\nSW5ldFNvY2tldEFkZHJlc3MgaG9zdCA9IE5ldFV0aWxzLmdldEhvc3RGcm9t\nQ2hhbm5lbChmdXR1cmUuZ2V0Q2hhbm5lbCgpKTsKICAgICAgICBpZiAoIWZ1\ndHVyZS5pc1N1Y2Nlc3MoKSkgewogICAgICAgICAgICBsb2dnZXIuZXJyb3Io\nIkVycm9yIHdyaXRpbmcgb24gY2hhbm5lbCB0byBob3N0OiB7fSIsIGhvc3Qp\nOwogICAgICAgICAgICAvLyBPbiBhIHdyaXRlIGZhaWx1cmUgZm9yIGEgUHVi\nU3ViUmVxdWVzdCwgd2UgYWxzbyB3YW50IHRvIHJlbW92ZQogICAgICAgICAg\nICAvLyB0aGUgc2F2ZWQgdHhuSWQgdG8gUHViU3ViRGF0YSBpbiB0aGUgUmVz\ncG9uc2VIYW5kbGVyLiBUaGVzZQogICAgICAgICAgICAvLyByZXF1ZXN0cyB3\naWxsIG5vdCByZWNlaXZlIGFuIGFjayByZXNwb25zZSBmcm9tIHRoZSBzZXJ2\nZXIKICAgICAgICAgICAgLy8gc28gdGhlcmUgaXMgbm8gcG9pbnQgc3Rvcmlu\nZyB0aGF0IGluZm9ybWF0aW9uIHRoZXJlIGFueW1vcmUuCiAgICAgICAgICAg\nIHRyeSB7CiAgICAgICAgICAgICAgICBIQ2hhbm5lbEhhbmRsZXIgY2hhbm5l\nbEhhbmRsZXIgPSAKICAgICAgICAgICAgICAgICAgICBIQ2hhbm5lbEltcGwu\nZ2V0SENoYW5uZWxIYW5kbGVyRnJvbUNoYW5uZWwoZnV0dXJlLmdldENoYW5u\nZWwoKSk7CiAgICAgICAgICAgICAgICBjaGFubmVsSGFuZGxlci5yZW1vdmVU\neG4ocHViU3ViRGF0YS50eG5JZCk7CiAgICAgICAgICAgICAgICBjaGFubmVs\nSGFuZGxlci5jbG9zZUV4cGxpY2l0bHkoKTsKICAgICAgICAgICAgfSBjYXRj\naCAoTm9SZXNwb25zZUhhbmRsZXJFeGNlcHRpb24gZSkgewogICAgICAgICAg\nICAgICAgLy8gV2UganVzdCBjb3VsZG4ndCByZW1vdmUgdGhlIHRyYW5zYWN0\naW9uIElEJ3MgbWFwcGluZy4KICAgICAgICAgICAgICAgIC8vIFRoZSBoYW5k\nbGVyIHdhcyBudWxsLCBzbyB0aGlzIGhhcyBiZWVuIHJlc2V0IGFueXdheS4K\nICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCJDb3VsZCBub3QgZmluZCBy\nZXNwb25zZSBoYW5kbGVyIHRvIHJlbW92ZSB0eG5JZCBtYXBwaW5nIHRvIHB1\nYnN1YiBkYXRhLiBJZ25vcmluZy4iKTsKICAgICAgICAgICAgfQoKICAgICAg\nICAgICAgZnV0dXJlLmdldENoYW5uZWwoKS5jbG9zZSgpOwoKICAgICAgICAg\nICAgLy8gSWYgd2Ugd2VyZSBub3QgYWJsZSB0byB3cml0ZSBvbiB0aGUgY2hh\nbm5lbCB0byB0aGUgc2VydmVyIGhvc3QsCiAgICAgICAgICAgIC8vIHRoZSBo\nb3N0IGNvdWxkIGhhdmUgZGllZCBvciBzb21ldGhpbmcgaXMgd3Jvbmcgd2l0\naCB0aGUgY2hhbm5lbAogICAgICAgICAgICAvLyBjb25uZWN0aW9uIHdoZXJl\nIHdlIGNhbiBjb25uZWN0IHRvIHRoZSBob3N0LCBidXQgbm90IHdyaXRlIHRv\nIGl0LgogICAgICAgICAgICBCeXRlU3RyaW5nIGhvc3RTdHJpbmcgPSAoaG9z\ndCA9PSBudWxsKSA/IG51bGwgOiBCeXRlU3RyaW5nLmNvcHlGcm9tVXRmOChI\nZWR3aWdTb2NrZXRBZGRyZXNzLnNvY2tBZGRyU3RyKGhvc3QpKTsKICAgICAg\nICAgICAgaWYgKHB1YlN1YkRhdGEud3JpdGVGYWlsZWRTZXJ2ZXJzICE9IG51\nbGwgJiYgcHViU3ViRGF0YS53cml0ZUZhaWxlZFNlcnZlcnMuY29udGFpbnMo\naG9zdFN0cmluZykpIHsKICAgICAgICAgICAgICAgIC8vIFdlJ3ZlIGFscmVh\nZHkgdHJpZWQgdG8gd3JpdGUgdG8gdGhpcyBzZXJ2ZXIgcHJldmlvdXNseSBh\nbmQKICAgICAgICAgICAgICAgIC8vIGZhaWxlZCwgc28gaW52b2tlIHRoZSBv\ncGVyYXRpb25GYWlsZWQgY2FsbGJhY2suCiAgICAgICAgICAgICAgICBsb2dn\nZXIuZXJyb3IoIkVycm9yIHdyaXRpbmcgdG8gaG9zdCBtb3JlIHRoYW4gb25j\nZSBzbyBqdXN0IGludm9rZSB0aGUgb3BlcmF0aW9uRmFpbGVkIGNhbGxiYWNr\nISIpOwogICAgICAgICAgICAgICAgcHViU3ViRGF0YS5nZXRDYWxsYmFjaygp\nLm9wZXJhdGlvbkZhaWxlZChwdWJTdWJEYXRhLmNvbnRleHQsIG5ldyBTZXJ2\naWNlRG93bkV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRXJyb3Igd2hpbGUgd3Jp\ndGluZyBtZXNzYWdlIHRvIHNlcnZlcjogIiArIGhvc3RTdHJpbmcpKTsKICAg\nICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1\nZygiVHJ5IHRvIHNlbmQgdGhlIFB1YlN1YlJlcXVlc3QgYWdhaW4gdG8gdGhl\nIGRlZmF1bHQgc2VydmVyIGhvc3QvVklQIGZvciBwdWJTdWJEYXRhOiB7fSIs\nCiAgICAgICAgICAgICAgICAgICAgcHViU3ViRGF0YSk7CiAgICAgICAgICAg\nICAgICAvLyBLZWVwIHRyYWNrIG9mIHRoaXMgY3VycmVudCBzZXJ2ZXIgdGhh\ndCB3ZSBmYWlsZWQgdG8gd3JpdGUgdG8KICAgICAgICAgICAgICAgIC8vIGJ1\ndCByZXRyeSB0aGUgcmVxdWVzdCBvbiB0aGUgZGVmYXVsdCBzZXJ2ZXIgaG9z\ndC9WSVAuCiAgICAgICAgICAgICAgICBpZiAocHViU3ViRGF0YS53cml0ZUZh\naWxlZFNlcnZlcnMgPT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICBwdWJT\ndWJEYXRhLndyaXRlRmFpbGVkU2VydmVycyA9IG5ldyBMaW5rZWRMaXN0PEJ5\ndGVTdHJpbmc+KCk7CiAgICAgICAgICAgICAgICBwdWJTdWJEYXRhLndyaXRl\nRmFpbGVkU2VydmVycy5hZGQoaG9zdFN0cmluZyk7CiAgICAgICAgICAgICAg\nICBjaGFubmVsTWFuYWdlci5zdWJtaXRPcFRvRGVmYXVsdFNlcnZlcihwdWJT\ndWJEYXRhKTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAg\nICAgICAgIC8vIE5vdyB0aGF0IHRoZSB3cml0ZSB0byB0aGUgc2VydmVyIGlz\nIGRvbmUsIHdlIGhhdmUgdG8gd2FpdCBmb3IgaXQKICAgICAgICAgICAgLy8g\ndG8gcmVzcG9uZC4gVGhlIFJlc3BvbnNlSGFuZGxlciB3aWxsIHRha2UgY2Fy\nZSBvZiB0aGUgYWNrCiAgICAgICAgICAgIC8vIHJlc3BvbnNlIGZyb20gdGhl\nIHNlcnZlciBiZWZvcmUgd2UgY2FuIGRldGVybWluZSBpZiB0aGUgYXN5bmMK\nICAgICAgICAgICAgLy8gUHViU3ViIGNhbGwgaGFzIHJlYWxseSBjb21wbGV0\nZWQgc3VjY2Vzc2Z1bGx5IG9yIG5vdC4KICAgICAgICAgICAgbG9nZ2VyLmRl\nYnVnKCJTdWNjZXNzZnVsbHkgd3JvdGUgdG8gaG9zdDoge30gZm9yIHB1YlN1\nYkRhdGE6IHt9IiwgaG9zdCwgcHViU3ViRGF0YSk7CiAgICAgICAgfQogICAg\nfQoKfQo=\n","encoding":"base64"}

