{"sha":"ec111da1fa33b01fe0a1ed3cfda951899f2eb2c8","node_id":"MDQ6QmxvYjE1NzU5NTY6ZWMxMTFkYTFmYTMzYjAxZmUwYTFlZDNjZmRhOTUxODk5ZjJlYjJjOA==","size":5816,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/ec111da1fa33b01fe0a1ed3cfda951899f2eb2c8","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQubmV0dHkuaW1wbC5tdWx0\naXBsZXg7CgppbXBvcnQgamF2YS5uZXQuSW5ldFNvY2tldEFkZHJlc3M7Cgpp\nbXBvcnQgb3JnLnNsZjRqLkxvZ2dlcjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dn\nZXJGYWN0b3J5OwppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmNoYW5uZWwuQ2hh\nbm5lbDsKCmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQuY29uZi5D\nbGllbnRDb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcu\nY2xpZW50LmRhdGEuUHViU3ViRGF0YTsKaW1wb3J0IG9yZy5hcGFjaGUuaGVk\nd2lnLmNsaWVudC5kYXRhLlRvcGljU3Vic2NyaWJlcjsKaW1wb3J0IG9yZy5h\ncGFjaGUuaGVkd2lnLmNsaWVudC5uZXR0eS5IQ2hhbm5lbE1hbmFnZXI7Cmlt\ncG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQubmV0dHkuSENoYW5uZWw7\nCmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQubmV0dHkuTmV0VXRp\nbHM7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQubmV0dHkuaW1w\nbC5BYnN0cmFjdFN1YnNjcmliZVJlc3BvbnNlSGFuZGxlcjsKaW1wb3J0IG9y\nZy5hcGFjaGUuaGVkd2lnLmNsaWVudC5uZXR0eS5pbXBsLkFjdGl2ZVN1YnNj\ncmliZXI7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5leGNlcHRpb25zLlB1\nYlN1YkV4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmV4Y2Vw\ndGlvbnMuUHViU3ViRXhjZXB0aW9uLlVuZXhwZWN0ZWRDb25kaXRpb25FeGNl\ncHRpb247CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5QdWJT\ndWJQcm90b2NvbC5PcGVyYXRpb25UeXBlOwppbXBvcnQgb3JnLmFwYWNoZS5o\nZWR3aWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2wuUHViU3ViUmVzcG9uc2U7\nCmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5QdWJTdWJQcm90\nb2NvbC5SZXNwb25zZUJvZHk7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5w\ncm90b2NvbC5QdWJTdWJQcm90b2NvbC5TdGF0dXNDb2RlOwppbXBvcnQgb3Jn\nLmFwYWNoZS5oZWR3aWcudXRpbC5DYWxsYmFjazsKaW1wb3J0IG9yZy5hcGFj\naGUuaGVkd2lnLnV0aWwuRWl0aGVyOwppbXBvcnQgc3RhdGljIG9yZy5hcGFj\naGUuaGVkd2lnLnV0aWwuVmFyQXJncy52YTsKCnB1YmxpYyBjbGFzcyBNdWx0\naXBsZXhTdWJzY3JpYmVSZXNwb25zZUhhbmRsZXIgZXh0ZW5kcyBBYnN0cmFj\ndFN1YnNjcmliZVJlc3BvbnNlSGFuZGxlciB7CgogICAgcHJpdmF0ZSBzdGF0\naWMgTG9nZ2VyIGxvZ2dlciA9CiAgICAgICAgTG9nZ2VyRmFjdG9yeS5nZXRM\nb2dnZXIoTXVsdGlwbGV4U3Vic2NyaWJlUmVzcG9uc2VIYW5kbGVyLmNsYXNz\nKTsKCiAgICAvLyB0aGUgdW5kZXJseWluZyBzdWJzY3JpcHRpb24gY2hhbm5l\nbAogICAgdm9sYXRpbGUgSENoYW5uZWwgaENoYW5uZWw7CiAgICBwcml2YXRl\nIGZpbmFsIE11bHRpcGxleEhDaGFubmVsTWFuYWdlciBzQ2hhbm5lbE1hbmFn\nZXI7CgogICAgcHJvdGVjdGVkIE11bHRpcGxleFN1YnNjcmliZVJlc3BvbnNl\nSGFuZGxlcihDbGllbnRDb25maWd1cmF0aW9uIGNmZywKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSENoYW5uZWxN\nYW5hZ2VyIGNoYW5uZWxNYW5hZ2VyKSB7CiAgICAgICAgc3VwZXIoY2ZnLCBj\naGFubmVsTWFuYWdlcik7CiAgICAgICAgc0NoYW5uZWxNYW5hZ2VyID0gKE11\nbHRpcGxleEhDaGFubmVsTWFuYWdlcikgY2hhbm5lbE1hbmFnZXI7CiAgICB9\nCgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBoYW5kbGVSZXNwb25z\nZShQdWJTdWJSZXNwb25zZSByZXNwb25zZSwgUHViU3ViRGF0YSBwdWJTdWJE\nYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2hhbm5lbCBj\naGFubmVsKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBpZiAobnVsbCA9\nPSBoQ2hhbm5lbCkgewogICAgICAgICAgICBJbmV0U29ja2V0QWRkcmVzcyBo\nb3N0ID0gTmV0VXRpbHMuZ2V0SG9zdEZyb21DaGFubmVsKGNoYW5uZWwpOwog\nICAgICAgICAgICBoQ2hhbm5lbCA9IHNDaGFubmVsTWFuYWdlci5nZXRTdWJz\nY3JpcHRpb25DaGFubmVsKGhvc3QpOwogICAgICAgICAgICBpZiAobnVsbCA9\nPSBoQ2hhbm5lbCB8fAogICAgICAgICAgICAgICAgIWNoYW5uZWwuZXF1YWxz\nKGhDaGFubmVsLmdldENoYW5uZWwoKSkpIHsKICAgICAgICAgICAgICAgIFB1\nYlN1YkV4Y2VwdGlvbiBwc2UgPQogICAgICAgICAgICAgICAgICAgIG5ldyBV\nbmV4cGVjdGVkQ29uZGl0aW9uRXhjZXB0aW9uKCJGYWlsZWQgdG8gZ2V0IHN1\nYnNjcmlwdGlvbiBjaGFubmVsIG9mICIgKyBob3N0KTsKICAgICAgICAgICAg\nICAgIHB1YlN1YkRhdGEuZ2V0Q2FsbGJhY2soKS5vcGVyYXRpb25GYWlsZWQo\ncHViU3ViRGF0YS5jb250ZXh0LCBwc2UpOwogICAgICAgICAgICAgICAgcmV0\ndXJuOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHN1cGVyLmhh\nbmRsZVJlc3BvbnNlKHJlc3BvbnNlLCBwdWJTdWJEYXRhLCBjaGFubmVsKTsK\nICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHByb3RlY3RlZCBFaXRoZXI8U3Rh\ndHVzQ29kZSwgSENoYW5uZWw+IGhhbmRsZVN1Y2Nlc3NSZXNwb25zZSgKICAg\nICAgICBUb3BpY1N1YnNjcmliZXIgdHMsIFB1YlN1YkRhdGEgcHViU3ViRGF0\nYSwgQ2hhbm5lbCBjaGFubmVsKSB7CiAgICAgICAgLy8gU3RvcmUgdGhlIG1h\ncHBpbmcgZm9yIHRoZSBUb3BpY1N1YnNjcmliZXIgdG8gdGhlIENoYW5uZWwu\nCiAgICAgICAgLy8gVGhpcyBpcyBzbyB3ZSBjYW4gY29udHJvbCB0aGUgc3Rh\ncnRpbmcgYW5kIHN0b3BwaW5nIG9mCiAgICAgICAgLy8gbWVzc2FnZSBkZWxp\ndmVyaWVzIGZyb20gdGhlIHNlcnZlciBvbiB0aGF0IENoYW5uZWwuIFN0b3Jl\nCiAgICAgICAgLy8gdGhpcyBvbmx5IG9uIGEgc3VjY2Vzc2Z1bCBhY2sgcmVz\ncG9uc2UgZnJvbSB0aGUgc2VydmVyLgogICAgICAgIEVpdGhlcjxCb29sZWFu\nLCBIQ2hhbm5lbD4gcmVzdWx0ID0KICAgICAgICAgICAgc0NoYW5uZWxNYW5h\nZ2VyLnN0b3JlU3Vic2NyaXB0aW9uQ2hhbm5lbCh0cywgcHViU3ViRGF0YSwg\naENoYW5uZWwpOwogICAgICAgIGlmIChyZXN1bHQubGVmdCgpKSB7CiAgICAg\nICAgICAgIHJldHVybiBFaXRoZXIub2YoU3RhdHVzQ29kZS5TVUNDRVNTLCBy\nZXN1bHQucmlnaHQoKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAg\nU3RhdHVzQ29kZSBjb2RlOwogICAgICAgICAgICBpZiAocHViU3ViRGF0YS5p\nc1Jlc3Vic2NyaWJlUmVxdWVzdCgpKSB7CiAgICAgICAgICAgICAgICBjb2Rl\nID0gU3RhdHVzQ29kZS5SRVNVQlNDUklCRV9FWENFUFRJT047CiAgICAgICAg\nICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjb2RlID0gU3RhdHVzQ29k\nZS5DTElFTlRfQUxSRUFEWV9TVUJTQ1JJQkVEOwogICAgICAgICAgICB9CiAg\nICAgICAgICAgIHJldHVybiBFaXRoZXIub2YoY29kZSwgbnVsbCk7CiAgICAg\nICAgfQogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgYXN5\nbmNDbG9zZVN1YnNjcmlwdGlvbihmaW5hbCBUb3BpY1N1YnNjcmliZXIgdG9w\naWNTdWJzY3JpYmVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICBmaW5hbCBDYWxsYmFjazxSZXNwb25zZUJvZHk+IGNhbGxiYWNr\nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5h\nbCBPYmplY3QgY29udGV4dCkgewogICAgICAgIGZpbmFsIEFjdGl2ZVN1YnNj\ncmliZXIgc3MgPSBnZXRBY3RpdmVTdWJzY3JpYmVyKHRvcGljU3Vic2NyaWJl\ncik7CiAgICAgICAgaWYgKG51bGwgPT0gc3MgfHwgbnVsbCA9PSBoQ2hhbm5l\nbCkgewogICAgICAgICAgICBsb2dnZXIuZGVidWcoIk5vIHN1YnNjcmlwdGlv\nbiB7fSBmb3VuZCB3aGVuIGNsb3NpbmcgaXRzIHN1YnNjcmlwdGlvbiBmcm9t\nIHt9LiIsCiAgICAgICAgICAgICAgICAgICAgICAgICB2YSh0b3BpY1N1YnNj\ncmliZXIsIGhDaGFubmVsKSk7CiAgICAgICAgICAgIGNhbGxiYWNrLm9wZXJh\ndGlvbkZpbmlzaGVkKGNvbnRleHQsIChSZXNwb25zZUJvZHkpbnVsbCk7CiAg\nICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgQ2FsbGJhY2s8\nUmVzcG9uc2VCb2R5PiBjbG9zZUNiID0gbmV3IENhbGxiYWNrPFJlc3BvbnNl\nQm9keT4oKSB7CiAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICBw\ndWJsaWMgdm9pZCBvcGVyYXRpb25GaW5pc2hlZChPYmplY3QgY3R4LCBSZXNw\nb25zZUJvZHkgcmVzcEJvZHkpIHsKICAgICAgICAgICAgICAgIHJlbW92ZVN1\nYnNjcmlwdGlvbih0b3BpY1N1YnNjcmliZXIsIHNzKTsKICAgICAgICAgICAg\nICAgIHNDaGFubmVsTWFuYWdlci5yZW1vdmVTdWJzY3JpcHRpb25DaGFubmVs\nKHRvcGljU3Vic2NyaWJlciwgaENoYW5uZWwpOwogICAgICAgICAgICAgICAg\nY2FsbGJhY2sub3BlcmF0aW9uRmluaXNoZWQoY29udGV4dCwgbnVsbCk7CiAg\nICAgICAgICAgIH0KCiAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAg\nICBwdWJsaWMgdm9pZCBvcGVyYXRpb25GYWlsZWQoT2JqZWN0IGN0eCwgUHVi\nU3ViRXhjZXB0aW9uIGV4Y2VwdGlvbikgewogICAgICAgICAgICAgICAgY2Fs\nbGJhY2sub3BlcmF0aW9uRmFpbGVkKGNvbnRleHQsIGV4Y2VwdGlvbik7CiAg\nICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIFB1YlN1YkRhdGEgY2xv\nc2VPcCA9IG5ldyBQdWJTdWJEYXRhKHRvcGljU3Vic2NyaWJlci5nZXRUb3Bp\nYygpLCBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgIHRvcGljU3Vic2NyaWJlci5nZXRTdWJzY3JpYmVySWQoKSwK\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBP\ncGVyYXRpb25UeXBlLkNMT1NFU1VCU0NSSVBUSU9OLAogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsIGNsb3NlQ2Is\nIGNvbnRleHQpOwogICAgICAgIGhDaGFubmVsLnN1Ym1pdE9wKGNsb3NlT3Ap\nOwogICAgfQoKfQo=\n","encoding":"base64"}

