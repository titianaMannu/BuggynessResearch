{"sha":"898e8b12f65b705a987cb75d82231d8a923b44c5","node_id":"MDQ6QmxvYjE1NzU5NTY6ODk4ZThiMTJmNjViNzA1YTk4N2NiNzVkODIyMzFkOGE5MjNiNDRjNQ==","size":2878,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/898e8b12f65b705a987cb75d82231d8a923b44c5","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2V4dGVuc2lvbnM7CgppbXBv\ncnQgamF2YS51dGlsLkhhc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuTWFwOwoK\naW1wb3J0IGNvbS5nb29nbGUucHJvdG9idWYuQnl0ZVN0cmluZzsKaW1wb3J0\nIG9yZy5hcGFjaGUuaGVkd2lnLnByb3RvY29sLlB1YlN1YlByb3RvY29sOwoK\naW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXI7CmltcG9ydCBvcmcuc2xmNGouTG9n\nZ2VyRmFjdG9yeTsKCnB1YmxpYyBjbGFzcyBNYXBVdGlscyB7CgogICAgc3Rh\ndGljIGZpbmFsIExvZ2dlciBsb2dnZXIgPSBMb2dnZXJGYWN0b3J5LmdldExv\nZ2dlcihNYXBVdGlscy5jbGFzcyk7CgogICAgcHVibGljIHN0YXRpYyBTdHJp\nbmcgdG9TdHJpbmcoUHViU3ViUHJvdG9jb2wuTWFwIG1hcCkgewogICAgICAg\nIFN0cmluZ0J1aWxkZXIgc2IgPSBuZXcgU3RyaW5nQnVpbGRlcigpOwogICAg\nICAgIGludCBudW1FbnRyaWVzID0gbWFwLmdldEVudHJpZXNDb3VudCgpOwog\nICAgICAgIGZvciAoaW50IGk9MDsgaTxudW1FbnRyaWVzOyBpKyspIHsKICAg\nICAgICAgICAgUHViU3ViUHJvdG9jb2wuTWFwLkVudHJ5IGVudHJ5ID0gbWFw\nLmdldEVudHJpZXMoaSk7CiAgICAgICAgICAgIFN0cmluZyBrZXkgPSBlbnRy\neS5nZXRLZXkoKTsKICAgICAgICAgICAgQnl0ZVN0cmluZyB2YWx1ZSA9IGVu\ndHJ5LmdldFZhbHVlKCk7CiAgICAgICAgICAgIHNiLmFwcGVuZChrZXkpLmFw\ncGVuZCgnPScpLmFwcGVuZCh2YWx1ZS50b1N0cmluZ1V0ZjgoKSk7CiAgICAg\nICAgICAgIGlmIChpICE9IChudW1FbnRyaWVzIC0gMSkpIHsKICAgICAgICAg\nICAgICAgIHNiLmFwcGVuZCgnLCcpOwogICAgICAgICAgICB9CiAgICAgICAg\nfQogICAgICAgIHJldHVybiBzYi50b1N0cmluZygpOwogICAgfQoKICAgIHB1\nYmxpYyBzdGF0aWMgTWFwPFN0cmluZywgQnl0ZVN0cmluZz4gYnVpbGRNYXAo\nUHViU3ViUHJvdG9jb2wuTWFwIHByb3RvTWFwKSB7CiAgICAgICAgTWFwPFN0\ncmluZywgQnl0ZVN0cmluZz4gamF2YU1hcCA9IG5ldyBIYXNoTWFwPFN0cmlu\nZywgQnl0ZVN0cmluZz4oKTsKCiAgICAgICAgaW50IG51bUVudHJpZXMgPSBw\ncm90b01hcC5nZXRFbnRyaWVzQ291bnQoKTsKICAgICAgICBmb3IgKGludCBp\nPTA7IGk8bnVtRW50cmllczsgaSsrKSB7CiAgICAgICAgICAgIFB1YlN1YlBy\nb3RvY29sLk1hcC5FbnRyeSBlbnRyeSA9IHByb3RvTWFwLmdldEVudHJpZXMo\naSk7CiAgICAgICAgICAgIFN0cmluZyBrZXkgPSBlbnRyeS5nZXRLZXkoKTsK\nICAgICAgICAgICAgaWYgKGphdmFNYXAuY29udGFpbnNLZXkoa2V5KSkgewog\nICAgICAgICAgICAgICAgQnl0ZVN0cmluZyBwcmVWYWx1ZSA9IGphdmFNYXAu\nZ2V0KGtleSk7CiAgICAgICAgICAgICAgICBsb2dnZXIud2FybigiS2V5ICIg\nKyBrZXkgKyAiIGhhcyBhbHJlYWR5IGJlZW4gZGVmaW5lZCBhcyB2YWx1ZSA6\nICIgKyBwcmVWYWx1ZS50b1N0cmluZ1V0ZjgoKSk7CiAgICAgICAgICAgIH0g\nZWxzZSB7CiAgICAgICAgICAgICAgICBqYXZhTWFwLnB1dChrZXksIGVudHJ5\nLmdldFZhbHVlKCkpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAg\nIHJldHVybiBqYXZhTWFwOwogICAgfQoKICAgIHB1YmxpYyBzdGF0aWMgUHVi\nU3ViUHJvdG9jb2wuTWFwLkJ1aWxkZXIgYnVpbGRNYXBCdWlsZGVyKE1hcDxT\ndHJpbmcsIEJ5dGVTdHJpbmc+IGphdmFNYXApIHsKICAgICAgICBQdWJTdWJQ\ncm90b2NvbC5NYXAuQnVpbGRlciBtYXBCdWlsZGVyID0gUHViU3ViUHJvdG9j\nb2wuTWFwLm5ld0J1aWxkZXIoKTsKCiAgICAgICAgZm9yIChNYXAuRW50cnk8\nU3RyaW5nLCBCeXRlU3RyaW5nPiBlbnRyeSA6IGphdmFNYXAuZW50cnlTZXQo\nKSkgewogICAgICAgICAgICBtYXBCdWlsZGVyLmFkZEVudHJpZXMoUHViU3Vi\nUHJvdG9jb2wuTWFwLkVudHJ5Lm5ld0J1aWxkZXIoKS5zZXRLZXkoZW50cnku\nZ2V0S2V5KCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgIC5zZXRWYWx1ZShlbnRyeS5nZXRWYWx1ZSgpKSk7CiAg\nICAgICAgfQogICAgICAgIHJldHVybiBtYXBCdWlsZGVyOwogICAgfQp9Cg==\n","encoding":"base64"}

