{"sha":"e195ace85d9605717798fdcc8aeddb1d3c238917","node_id":"MDQ6QmxvYjE1NzU5NTY6ZTE5NWFjZTg1ZDk2MDU3MTc3OThmZGNjOGFlZGRiMWQzYzIzODkxNw==","size":4066,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/e195ace85d9605717798fdcc8aeddb1d3c238917","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2V4dGVuc2lvbnM7CgppbXBv\ncnQgamF2YS51dGlsLkhhc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuTWFwOwoK\naW1wb3J0IGNvbS5nb29nbGUucHJvdG9idWYuQnl0ZVN0cmluZzsKaW1wb3J0\nIGNvbS5nb29nbGUucHJvdG9idWYuSW52YWxpZFByb3RvY29sQnVmZmVyRXhj\nZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcucHJvdG9jb2wuUHVi\nU3ViUHJvdG9jb2w7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2Nv\nbC5QdWJTdWJQcm90b2NvbC5TdWJzY3JpcHRpb25EYXRhOwppbXBvcnQgb3Jn\nLmFwYWNoZS5oZWR3aWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2wuU3Vic2Ny\naXB0aW9uUHJlZmVyZW5jZXM7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5w\ncm90b2NvbC5QdWJTdWJQcm90b2NvbC5TdWJzY3JpcHRpb25TdGF0ZTsKCmlt\ncG9ydCBvcmcuc2xmNGouTG9nZ2VyOwppbXBvcnQgb3JnLnNsZjRqLkxvZ2dl\nckZhY3Rvcnk7CgpwdWJsaWMgY2xhc3MgU3Vic2NyaXB0aW9uU3RhdGVVdGls\ncyB7CgogICAgc3RhdGljIGZpbmFsIExvZ2dlciBsb2dnZXIgPSBMb2dnZXJG\nYWN0b3J5LmdldExvZ2dlcihTdWJzY3JpcHRpb25TdGF0ZVV0aWxzLmNsYXNz\nKTsKCiAgICAvLyBGb3Igbm93LCB0byBkaWZmZXJlbnRpYXRlIGh1YiBzdWJz\nY3JpYmVycyBmcm9tIGxvY2FsIG9uZXMsIHRoZQogICAgLy8gc3Vic2NyaWJl\ncklkIHdpbGwgYmUgcHJlcGVuZGVkIHdpdGggYSBoYXJkLWNvZGVkIHByZWZp\neC4gTG9jYWwKICAgIC8vIHN1YnNjcmliZXJzIHdpbGwgdmFsaWRhdGUgdGhh\ndCB0aGUgc3Vic2NyaWJlcklkIHVzZWQgY2Fubm90IHN0YXJ0IHdpdGgKICAg\nIC8vIHRoaXMgcHJlZml4LiBUaGlzIGlzIG9ubHkgdXNlZCBpbnRlcm5hbGx5\nIGJ5IHRoZSBodWIgc3Vic2NyaWJlcnMuCiAgICBwdWJsaWMgc3RhdGljIGZp\nbmFsIFN0cmluZyBIVUJfU1VCU0NSSUJFUl9QUkVGSVggPSAiX18iOwoKICAg\nIHB1YmxpYyBzdGF0aWMgU3Vic2NyaXB0aW9uRGF0YSBwYXJzZVN1YnNjcmlw\ndGlvbkRhdGEoYnl0ZVtdIGRhdGEpCiAgICB0aHJvd3MgSW52YWxpZFByb3Rv\nY29sQnVmZmVyRXhjZXB0aW9uIHsKICAgICAgICB0cnkgewogICAgICAgICAg\nICByZXR1cm4gU3Vic2NyaXB0aW9uRGF0YS5wYXJzZUZyb20oZGF0YSk7CiAg\nICAgICAgfSBjYXRjaCAoSW52YWxpZFByb3RvY29sQnVmZmVyRXhjZXB0aW9u\nIGV4KSB7CiAgICAgICAgICAgIGxvZ2dlci5pbmZvKCJGYWlsZWQgdG8gcGFy\nc2UgZGF0YSBhcyBTdWJzY3JpcHRpb25EYXRhLiBGYWxsIGJhY2t3YXJkIHRv\nIHBhcnNlIGl0IGFzIFN1YnNjcmlwdGlvblN0YXRlIGZvciBiYWNrd2FyZCBj\nb21wYXRhYmlsaXR5LiIpOwogICAgICAgICAgICAvLyBiYWNrd2FyZCBjb21w\nYWJpbGl0eQogICAgICAgICAgICBTdWJzY3JpcHRpb25TdGF0ZSBzdGF0ZSA9\nIFN1YnNjcmlwdGlvblN0YXRlLnBhcnNlRnJvbShkYXRhKTsKICAgICAgICAg\nICAgcmV0dXJuIFN1YnNjcmlwdGlvbkRhdGEubmV3QnVpbGRlcigpLnNldFN0\nYXRlKHN0YXRlKS5idWlsZCgpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJs\naWMgc3RhdGljIFN0cmluZyB0b1N0cmluZyhTdWJzY3JpcHRpb25EYXRhIGRh\ndGEpIHsKICAgICAgICBTdHJpbmdCdWlsZGVyIHNiID0gbmV3IFN0cmluZ0J1\naWxkZXIoKTsKICAgICAgICBpZiAoZGF0YS5oYXNTdGF0ZSgpKSB7CiAgICAg\nICAgICAgIHNiLmFwcGVuZCgiU3RhdGUgOiB7ICIpLmFwcGVuZCh0b1N0cmlu\nZyhkYXRhLmdldFN0YXRlKCkpKS5hcHBlbmQoIiB9OyIpOwogICAgICAgIH0K\nICAgICAgICBpZiAoZGF0YS5oYXNQcmVmZXJlbmNlcygpKSB7CiAgICAgICAg\nICAgIHNiLmFwcGVuZCgiUHJlZmVyZW5jZXMgOiB7ICIpLmFwcGVuZCh0b1N0\ncmluZyhkYXRhLmdldFByZWZlcmVuY2VzKCkpKS5hcHBlbmQoIiB9OyIpOwog\nICAgICAgIH0KICAgICAgICByZXR1cm4gc2IudG9TdHJpbmcoKTsKICAgIH0K\nCiAgICBwdWJsaWMgc3RhdGljIFN0cmluZyB0b1N0cmluZyhTdWJzY3JpcHRp\nb25TdGF0ZSBzdGF0ZSkgewogICAgICAgIFN0cmluZ0J1aWxkZXIgc2IgPSBu\nZXcgU3RyaW5nQnVpbGRlcigpOwogICAgICAgIHNiLmFwcGVuZCgiY29uc3Vt\nZVNlcUlkOiAiICsgTWVzc2FnZUlkVXRpbHMubXNnSWRUb1JlYWRhYmxlU3Ry\naW5nKHN0YXRlLmdldE1zZ0lkKCkpKTsKICAgICAgICByZXR1cm4gc2IudG9T\ndHJpbmcoKTsKICAgIH0KCiAgICBwdWJsaWMgc3RhdGljIFN0cmluZyB0b1N0\ncmluZyhTdWJzY3JpcHRpb25QcmVmZXJlbmNlcyBwcmVmZXJlbmNlcykgewog\nICAgICAgIFN0cmluZ0J1aWxkZXIgc2IgPSBuZXcgU3RyaW5nQnVpbGRlcigp\nOwogICAgICAgIHNiLmFwcGVuZCgiU3lzdGVtIFByZWZlcmVuY2VzIDogWyIp\nOwogICAgICAgIGlmIChwcmVmZXJlbmNlcy5oYXNNZXNzYWdlQm91bmQoKSkg\newogICAgICAgICAgICBzYi5hcHBlbmQoIihtZXNzYWdlQm91bmQ9IikuYXBw\nZW5kKHByZWZlcmVuY2VzLmdldE1lc3NhZ2VCb3VuZCgpKQogICAgICAgICAg\nICAgIC5hcHBlbmQoIikiKTsKICAgICAgICB9CiAgICAgICAgc2IuYXBwZW5k\nKCJdIik7CiAgICAgICAgaWYgKHByZWZlcmVuY2VzLmhhc09wdGlvbnMoKSkg\newogICAgICAgICAgICBzYi5hcHBlbmQoIiwgQ3VzdG9taXplZCBQcmVmZXJl\nbmNlcyA6IFsiKTsKICAgICAgICAgICAgc2IuYXBwZW5kKE1hcFV0aWxzLnRv\nU3RyaW5nKHByZWZlcmVuY2VzLmdldE9wdGlvbnMoKSkpOwogICAgICAgICAg\nICBzYi5hcHBlbmQoIl0iKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHNi\nLnRvU3RyaW5nKCk7CiAgICB9CgogICAgcHVibGljIHN0YXRpYyBib29sZWFu\nIGlzSHViU3Vic2NyaWJlcihCeXRlU3RyaW5nIHN1YnNjcmliZXJJZCkgewog\nICAgICAgIHJldHVybiBzdWJzY3JpYmVySWQudG9TdHJpbmdVdGY4KCkuc3Rh\ncnRzV2l0aChIVUJfU1VCU0NSSUJFUl9QUkVGSVgpOwogICAgfQoKICAgIHB1\nYmxpYyBzdGF0aWMgTWFwPFN0cmluZywgQnl0ZVN0cmluZz4gYnVpbGRVc2Vy\nT3B0aW9ucyhTdWJzY3JpcHRpb25QcmVmZXJlbmNlcyBwcmVmZXJlbmNlcykg\newogICAgICAgIGlmIChwcmVmZXJlbmNlcy5oYXNPcHRpb25zKCkpIHsKICAg\nICAgICAgICAgcmV0dXJuIE1hcFV0aWxzLmJ1aWxkTWFwKHByZWZlcmVuY2Vz\nLmdldE9wdGlvbnMoKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAg\ncmV0dXJuIG5ldyBIYXNoTWFwPFN0cmluZywgQnl0ZVN0cmluZz4oKTsKICAg\nICAgICB9CiAgICB9Cgp9Cg==\n","encoding":"base64"}

