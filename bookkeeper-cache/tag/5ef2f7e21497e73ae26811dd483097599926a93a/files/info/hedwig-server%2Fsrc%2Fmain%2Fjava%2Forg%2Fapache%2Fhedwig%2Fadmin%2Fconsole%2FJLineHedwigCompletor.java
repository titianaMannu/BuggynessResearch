{"sha":"e2da62883ba2c63b2f231a077789bc249c68c580","node_id":"MDQ6QmxvYjE1NzU5NTY6ZTJkYTYyODgzYmEyYzYzYjJmMjMxYTA3Nzc4OWJjMjQ5YzY4YzU4MA==","size":3729,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/e2da62883ba2c63b2f231a077789bc249c68c580","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCnBh\nY2thZ2Ugb3JnLmFwYWNoZS5oZWR3aWcuYWRtaW4uY29uc29sZTsKCmltcG9y\ndCBqYXZhLnV0aWwuSXRlcmF0b3I7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsK\nCmltcG9ydCBvcmcuYXBhY2hlLnpvb2tlZXBlci5LZWVwZXJFeGNlcHRpb247\nCmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5hZG1pbi5IZWR3aWdBZG1pbjsK\nCmltcG9ydCBjb20uZ29vZ2xlLnByb3RvYnVmLkJ5dGVTdHJpbmc7CgppbXBv\ncnQgamxpbmUuQ29tcGxldG9yOwoKaW1wb3J0IHN0YXRpYyBvcmcuYXBhY2hl\nLmhlZHdpZy5hZG1pbi5jb25zb2xlLkhlZHdpZ0NvbW1hbmRzLio7CgovKioK\nICogQSBqbGluZSBjb21wbGV0b3IgZm9yIGhlZHdpZyBjb25zb2xlCiAqLwpw\ndWJsaWMgY2xhc3MgSkxpbmVIZWR3aWdDb21wbGV0b3IgaW1wbGVtZW50cyBD\nb21wbGV0b3IgewogICAgLy8gZm9yIHRvcGljIGNvbXBsZXRpb24KICAgIHN0\nYXRpYyBmaW5hbCBpbnQgTUFYX1RPUElDU19UT19TRUFSQ0ggPSAxMDAwOwoK\nICAgIHByaXZhdGUgSGVkd2lnQWRtaW4gYWRtaW47CgogICAgcHVibGljIEpM\naW5lSGVkd2lnQ29tcGxldG9yKEhlZHdpZ0FkbWluIGFkbWluKSB7CiAgICAg\nICAgdGhpcy5hZG1pbiA9IGFkbWluOwogICAgfQoKICAgIEBPdmVycmlkZQog\nICAgcHVibGljIGludCBjb21wbGV0ZShTdHJpbmcgYnVmZmVyLCBpbnQgY3Vy\nc29yLCBMaXN0IGNhbmRpZGF0ZXMpIHsKICAgICAgICAvLyBHdWFyYW50ZWUg\ndGhhdCB0aGUgZmluYWwgdG9rZW4gaXMgdGhlIG9uZSB3ZSdyZSBleHBhbmRp\nbmcKICAgICAgICBidWZmZXIgPSBidWZmZXIuc3Vic3RyaW5nKDAsY3Vyc29y\nKTsKICAgICAgICBTdHJpbmdbXSB0b2tlbnMgPSBidWZmZXIuc3BsaXQoIiAi\nKTsKICAgICAgICBpZiAoYnVmZmVyLmVuZHNXaXRoKCIgIikpIHsKICAgICAg\nICAgICAgU3RyaW5nW10gbmV3VG9rZW5zID0gbmV3IFN0cmluZ1t0b2tlbnMu\nbGVuZ3RoICsgMV07CiAgICAgICAgICAgIFN5c3RlbS5hcnJheWNvcHkodG9r\nZW5zLCAwLCBuZXdUb2tlbnMsIDAsIHRva2Vucy5sZW5ndGgpOwogICAgICAg\nICAgICBuZXdUb2tlbnNbbmV3VG9rZW5zLmxlbmd0aCAtIDFdID0gIiI7CiAg\nICAgICAgICAgIHRva2VucyA9IG5ld1Rva2VuczsKICAgICAgICB9CiAgICAg\nICAgCiAgICAgICAgaWYgKHRva2Vucy5sZW5ndGggPiAyICYmCiAgICAgICAg\nICAgIERFU0NSSUJFLmVxdWFsc0lnbm9yZUNhc2UodG9rZW5zWzBdKSAmJgog\nICAgICAgICAgICBERVNDUklCRV9UT1BJQy5lcXVhbHNJZ25vcmVDYXNlKHRv\na2Vuc1sxXSkpIHsKICAgICAgICAgICAgcmV0dXJuIGNvbXBsZXRlVG9waWMo\nYnVmZmVyLCB0b2tlbnNbMl0sIGNhbmRpZGF0ZXMpOwogICAgICAgIH0gZWxz\nZSBpZiAodG9rZW5zLmxlbmd0aCA+IDEgJiYKICAgICAgICAgICAgICAgICAg\nIChTVUIuZXF1YWxzSWdub3JlQ2FzZSh0b2tlbnNbMF0pIHx8CiAgICAgICAg\nICAgICAgICAgICAgUFVCLmVxdWFsc0lnbm9yZUNhc2UodG9rZW5zWzBdKSB8\nfAogICAgICAgICAgICAgICAgICAgIENMT1NFU1VCLmVxdWFsc0lnbm9yZUNh\nc2UodG9rZW5zWzBdKSB8fAogICAgICAgICAgICAgICAgICAgIENPTlNVTUUu\nZXF1YWxzSWdub3JlQ2FzZSh0b2tlbnNbMF0pIHx8CiAgICAgICAgICAgICAg\nICAgICAgQ09OU1VNRVRPLmVxdWFsc0lnbm9yZUNhc2UodG9rZW5zWzBdKSB8\nfAogICAgICAgICAgICAgICAgICAgIFJFQURUT1BJQy5lcXVhbHNJZ25vcmVD\nYXNlKHRva2Vuc1swXSkpKSB7CiAgICAgICAgICAgIHJldHVybiBjb21wbGV0\nZVRvcGljKGJ1ZmZlciwgdG9rZW5zWzFdLCBjYW5kaWRhdGVzKTsKICAgICAg\nICB9CiAgICAgICAgTGlzdDxTdHJpbmc+IGNtZHMgPSBIZWR3aWdDb21tYW5k\ncy5maW5kQ2FuZGlkYXRlQ29tbWFuZHModG9rZW5zKTsKICAgICAgICByZXR1\ncm4gY29tcGxldGVDb21tYW5kKGJ1ZmZlciwgdG9rZW5zW3Rva2Vucy5sZW5n\ndGggLSAxXSwgY21kcywgY2FuZGlkYXRlcyk7CiAgICB9CgogICAgcHJpdmF0\nZSBpbnQgY29tcGxldGVDb21tYW5kKFN0cmluZyBidWZmZXIsIFN0cmluZyB0\nb2tlbiwKICAgICAgICAgICAgTGlzdDxTdHJpbmc+IGNvbW1hbmRzLCBMaXN0\nPFN0cmluZz4gY2FuZGlkYXRlcykgewogICAgICAgIGZvciAoU3RyaW5nIGNt\nZCA6IGNvbW1hbmRzKSB7CiAgICAgICAgICAgIGlmIChjbWQuc3RhcnRzV2l0\naCh0b2tlbikpIHsKICAgICAgICAgICAgICAgIGNhbmRpZGF0ZXMuYWRkKGNt\nZCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJ1\nZmZlci5sYXN0SW5kZXhPZigiICIpICsgMTsKICAgIH0KCiAgICBwcml2YXRl\nIGludCBjb21wbGV0ZVRvcGljKFN0cmluZyBidWZmZXIsIFN0cmluZyB0b2tl\nbiwgTGlzdDxTdHJpbmc+IGNhbmRpZGF0ZXMpIHsKICAgICAgICB0cnkgewog\nICAgICAgICAgICBJdGVyYXRvcjxCeXRlU3RyaW5nPiBjaGlsZHJlbiA9IGFk\nbWluLmdldFRvcGljcygpOwogICAgICAgICAgICBpbnQgaSA9IDA7CiAgICAg\nICAgICAgIHdoaWxlIChjaGlsZHJlbi5oYXNOZXh0KCkgJiYgaSA8PSBNQVhf\nVE9QSUNTX1RPX1NFQVJDSCkgewogICAgICAgICAgICAgICAgU3RyaW5nIGNo\naWxkID0gY2hpbGRyZW4ubmV4dCgpLnRvU3RyaW5nVXRmOCgpOwogICAgICAg\nICAgICAgICAgaWYgKGNoaWxkLnN0YXJ0c1dpdGgodG9rZW4pKSB7CiAgICAg\nICAgICAgICAgICAgICAgY2FuZGlkYXRlcy5hZGQoY2hpbGQpOwogICAgICAg\nICAgICAgICAgfQogICAgICAgICAgICAgICAgKytpOwogICAgICAgICAgICB9\nCiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAg\ncmV0dXJuIGJ1ZmZlci5sZW5ndGgoKTsKICAgICAgICB9CiAgICAgICAgcmV0\ndXJuIGNhbmRpZGF0ZXMuc2l6ZSgpID09IDAgPyBidWZmZXIubGVuZ3RoKCkg\nOiBidWZmZXIubGFzdEluZGV4T2YoIiAiKSArIDE7CiAgICB9Cn0K\n","encoding":"base64"}

