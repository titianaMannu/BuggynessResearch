{"sha":"b1d0fd4d1572b0234938a7054f52f8d32e222541","node_id":"MDQ6QmxvYjE1NzU5NTY6YjFkMGZkNGQxNTcyYjAyMzQ5MzhhNzA1NGY1MmY4ZDMyZTIyMjU0MQ==","size":19792,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/b1d0fd4d1572b0234938a7054f52f8d32e222541","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIuY29tbW9uOwoKaW1wb3J0\nIGphdmEuaW8uRmlsZUlucHV0U3RyZWFtOwppbXBvcnQgamF2YS5pby5GaWxl\nTm90Rm91bmRFeGNlcHRpb247CmltcG9ydCBqYXZhLmlvLklucHV0U3RyZWFt\nOwppbXBvcnQgamF2YS5uZXQuSW5ldEFkZHJlc3M7CmltcG9ydCBqYXZhLm5l\ndC5VUkw7CmltcG9ydCBqYXZhLm5ldC5Vbmtub3duSG9zdEV4Y2VwdGlvbjsK\naW1wb3J0IGphdmEudXRpbC5BcnJheXM7CmltcG9ydCBqYXZhLnV0aWwuTGlu\na2VkTGlzdDsKaW1wb3J0IGphdmEudXRpbC5MaXN0OwoKaW1wb3J0IG9yZy5h\ncGFjaGUuY29tbW9ucy5jb25maWd1cmF0aW9uLkNvbmZpZ3VyYXRpb25FeGNl\ncHRpb247CmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMubGFuZy5TdHJpbmdV\ndGlsczsKCmltcG9ydCBjb20uZ29vZ2xlLnByb3RvYnVmLkJ5dGVTdHJpbmc7\nCmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIudXRpbC5SZWZsZWN0aW9u\nVXRpbHM7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5jb25mLkFic3RyYWN0\nQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnNlcnZl\nci5tZXRhLk1ldGFkYXRhTWFuYWdlckZhY3Rvcnk7CmltcG9ydCBvcmcuYXBh\nY2hlLmhlZHdpZy51dGlsLkhlZHdpZ1NvY2tldEFkZHJlc3M7CgpwdWJsaWMg\nY2xhc3MgU2VydmVyQ29uZmlndXJhdGlvbiBleHRlbmRzIEFic3RyYWN0Q29u\nZmlndXJhdGlvbiB7CiAgICBwdWJsaWMgZmluYWwgc3RhdGljIFN0cmluZyBS\nRUdJT04gPSAicmVnaW9uIjsKICAgIHByb3RlY3RlZCBmaW5hbCBzdGF0aWMg\nU3RyaW5nIE1BWF9NRVNTQUdFX1NJWkUgPSAibWF4X21lc3NhZ2Vfc2l6ZSI7\nCiAgICBwcm90ZWN0ZWQgZmluYWwgc3RhdGljIFN0cmluZyBSRUFEQUhFQURf\nQ09VTlQgPSAicmVhZGFoZWFkX2NvdW50IjsKICAgIHByb3RlY3RlZCBmaW5h\nbCBzdGF0aWMgU3RyaW5nIFJFQURBSEVBRF9TSVpFID0gInJlYWRhaGVhZF9z\naXplIjsKICAgIHByb3RlY3RlZCBmaW5hbCBzdGF0aWMgU3RyaW5nIENBQ0hF\nX1NJWkUgPSAiY2FjaGVfc2l6ZSI7CiAgICBwcm90ZWN0ZWQgZmluYWwgc3Rh\ndGljIFN0cmluZyBDQUNIRV9FTlRSWV9UVEwgPSAiY2FjaGVfZW50cnlfdHRs\nIjsKICAgIHByb3RlY3RlZCBmaW5hbCBzdGF0aWMgU3RyaW5nIFNDQU5fQkFD\nS09GRl9NU0VDID0gInNjYW5fYmFja29mZl9tcyI7CiAgICBwcm90ZWN0ZWQg\nZmluYWwgc3RhdGljIFN0cmluZyBTRVJWRVJfUE9SVCA9ICJzZXJ2ZXJfcG9y\ndCI7CiAgICBwcm90ZWN0ZWQgZmluYWwgc3RhdGljIFN0cmluZyBTU0xfU0VS\nVkVSX1BPUlQgPSAic3NsX3NlcnZlcl9wb3J0IjsKICAgIHByb3RlY3RlZCBm\naW5hbCBzdGF0aWMgU3RyaW5nIFpLX1BSRUZJWCA9ICJ6a19wcmVmaXgiOwog\nICAgcHJvdGVjdGVkIGZpbmFsIHN0YXRpYyBTdHJpbmcgWktfSE9TVCA9ICJ6\na19ob3N0IjsKICAgIHByb3RlY3RlZCBmaW5hbCBzdGF0aWMgU3RyaW5nIFpL\nX1RJTUVPVVQgPSAiemtfdGltZW91dCI7CiAgICBwcm90ZWN0ZWQgZmluYWwg\nc3RhdGljIFN0cmluZyBSRUFEQUhFQURfRU5BQkxFRCA9ICJyZWFkYWhlYWRf\nZW5hYmxlZCI7CiAgICBwcm90ZWN0ZWQgZmluYWwgc3RhdGljIFN0cmluZyBT\nVEFOREFMT05FID0gInN0YW5kYWxvbmUiOwogICAgcHJvdGVjdGVkIGZpbmFs\nIHN0YXRpYyBTdHJpbmcgUkVHSU9OUyA9ICJyZWdpb25zIjsKICAgIHByb3Rl\nY3RlZCBmaW5hbCBzdGF0aWMgU3RyaW5nIENFUlRfTkFNRSA9ICJjZXJ0X25h\nbWUiOwogICAgcHJvdGVjdGVkIGZpbmFsIHN0YXRpYyBTdHJpbmcgQ0VSVF9Q\nQVRIID0gImNlcnRfcGF0aCI7CiAgICBwcm90ZWN0ZWQgZmluYWwgc3RhdGlj\nIFN0cmluZyBQQVNTV09SRCA9ICJwYXNzd29yZCI7CiAgICBwcm90ZWN0ZWQg\nZmluYWwgc3RhdGljIFN0cmluZyBTU0xfRU5BQkxFRCA9ICJzc2xfZW5hYmxl\nZCI7CiAgICBwcm90ZWN0ZWQgZmluYWwgc3RhdGljIFN0cmluZyBDT05TVU1F\nX0lOVEVSVkFMID0gImNvbnN1bWVfaW50ZXJ2YWwiOwogICAgcHJvdGVjdGVk\nIGZpbmFsIHN0YXRpYyBTdHJpbmcgUkVURU5USU9OX1NFQ1MgPSAicmV0ZW50\naW9uX3NlY3MiOwogICAgcHJvdGVjdGVkIGZpbmFsIHN0YXRpYyBTdHJpbmcg\nSU5URVJfUkVHSU9OX1NTTF9FTkFCTEVEID0gImludGVyX3JlZ2lvbl9zc2xf\nZW5hYmxlZCI7CiAgICBwcm90ZWN0ZWQgZmluYWwgc3RhdGljIFN0cmluZyBN\nRVNTQUdFU19DT05TVU1FRF9USFJFQURfUlVOX0lOVEVSVkFMID0gIm1lc3Nh\nZ2VzX2NvbnN1bWVkX3RocmVhZF9ydW5faW50ZXJ2YWwiOwogICAgcHJvdGVj\ndGVkIGZpbmFsIHN0YXRpYyBTdHJpbmcgQktfRU5TRU1CTEVfU0laRSA9ICJi\na19lbnNlbWJsZV9zaXplIjsKICAgIEBEZXByZWNhdGVkCiAgICBwcm90ZWN0\nZWQgZmluYWwgc3RhdGljIFN0cmluZyBCS19RVU9SVU1fU0laRSA9ICJia19x\ndW9ydW1fc2l6ZSI7CiAgICBwcm90ZWN0ZWQgZmluYWwgc3RhdGljIFN0cmlu\nZyBCS19XUklURV9RVU9SVU1fU0laRSA9ICJia193cml0ZV9xdW9ydW1fc2l6\nZSI7CiAgICBwcm90ZWN0ZWQgZmluYWwgc3RhdGljIFN0cmluZyBCS19BQ0tf\nUVVPUlVNX1NJWkUgPSAiYmtfYWNrX3F1b3J1bV9zaXplIjsKICAgIHByb3Rl\nY3RlZCBmaW5hbCBzdGF0aWMgU3RyaW5nIFJFVFJZX1JFTU9URV9TVUJTQ1JJ\nQkVfVEhSRUFEX1JVTl9JTlRFUlZBTCA9ICJyZXRyeV9yZW1vdGVfc3Vic2Ny\naWJlX3RocmVhZF9ydW5faW50ZXJ2YWwiOwogICAgcHJvdGVjdGVkIGZpbmFs\nIHN0YXRpYyBTdHJpbmcgREVGQVVMVF9NRVNTQUdFX1dJTkRPV19TSVpFID0K\nICAgICAgICAiZGVmYXVsdF9tZXNzYWdlX3dpbmRvd19zaXplIjsKICAgIHBy\nb3RlY3RlZCBmaW5hbCBzdGF0aWMgU3RyaW5nIE5VTV9SRUFEQUhFQURfQ0FD\nSEVfVEhSRUFEUyA9ICJudW1fcmVhZGFoZWFkX2NhY2hlX3RocmVhZHMiOwoK\nICAgIHByb3RlY3RlZCBmaW5hbCBzdGF0aWMgU3RyaW5nIE1BWF9FTlRSSUVT\nX1BFUl9MRURHRVIgPSAibWF4X2VudHJpZXNfcGVyX2xlZGdlciI7CgogICAg\nLy8gbWFuYWdlciByZWxhdGVkIHNldHRpbmdzCiAgICBwcm90ZWN0ZWQgZmlu\nYWwgc3RhdGljIFN0cmluZyBNRVRBREFUQV9NQU5BR0VSX0JBU0VEX1RPUElD\nX01BTkFHRVJfRU5BQkxFRCA9ICJtZXRhZGF0YV9tYW5hZ2VyX2Jhc2VkX3Rv\ncGljX21hbmFnZXJfZW5hYmxlZCI7CiAgICBwcm90ZWN0ZWQgZmluYWwgc3Rh\ndGljIFN0cmluZyBNRVRBREFUQV9NQU5BR0VSX0ZBQ1RPUllfQ0xBU1MgPSAi\nbWV0YWRhdGFfbWFuYWdlcl9mYWN0b3J5X2NsYXNzIjsKCiAgICAvLyBtZXRh\nc3RvcmUgc2V0dGluZ3MsIG9ubHkgYmVpbmcgdXNlZCB3aGVuIE1FVEFEQVRB\nX01BTkFHRVJfRkFDVE9SWV9DTEFTUyBpcyBNc01ldGFkYXRhTWFuYWdlckZh\nY3RvcnkKICAgIHByb3RlY3RlZCBmaW5hbCBzdGF0aWMgU3RyaW5nIE1FVEFT\nVE9SRV9JTVBMX0NMQVNTID0gIm1ldGFzdG9yZV9pbXBsX2NsYXNzIjsKICAg\nIHByb3RlY3RlZCBmaW5hbCBzdGF0aWMgU3RyaW5nIE1FVEFTVE9SRV9NQVhf\nRU5UUklFU19QRVJfU0NBTiA9ICJtZXRhc3RvcmVNYXhFbnRyaWVzUGVyU2Nh\nbiI7CgogICAgcHJpdmF0ZSBzdGF0aWMgQ2xhc3NMb2FkZXIgZGVmYXVsdExv\nYWRlcjsKICAgIHN0YXRpYyB7CiAgICAgICAgZGVmYXVsdExvYWRlciA9IFRo\ncmVhZC5jdXJyZW50VGhyZWFkKCkuZ2V0Q29udGV4dENsYXNzTG9hZGVyKCk7\nCiAgICAgICAgaWYgKG51bGwgPT0gZGVmYXVsdExvYWRlcikgewogICAgICAg\nICAgICBkZWZhdWx0TG9hZGVyID0gU2VydmVyQ29uZmlndXJhdGlvbi5jbGFz\ncy5nZXRDbGFzc0xvYWRlcigpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyB0\naGVzZSBhcmUgdGhlIGRlcml2ZWQgYXR0cmlidXRlcwogICAgcHJvdGVjdGVk\nIEJ5dGVTdHJpbmcgbXlSZWdpb25CeXRlU3RyaW5nID0gbnVsbDsKICAgIHBy\nb3RlY3RlZCBIZWR3aWdTb2NrZXRBZGRyZXNzIG15U2VydmVyQWRkcmVzcyA9\nIG51bGw7CiAgICBwcm90ZWN0ZWQgTGlzdDxTdHJpbmc+IHJlZ2lvbkxpc3Qg\nPSBudWxsOwoKICAgIC8vIEFsdGhvdWdoIHRoaXMgbWV0aG9kIGlzIG5vdCBj\ndXJyZW50bHkgdXNlZCwgY3VycmVudGx5IG1haW50YWluaW5nIGl0IGxpa2UK\nICAgIC8vIHRoaXMgc28gdGhhdCB3ZSBjYW4gc3VwcG9ydCBvbi10aGUtZmx5\nIGNoYW5nZXMgaW4gY29uZmlndXJhdGlvbgogICAgcHJvdGVjdGVkIHZvaWQg\ncmVmcmVzaERlcml2ZWRBdHRyaWJ1dGVzKCkgewogICAgICAgIHJlZnJlc2hN\neVJlZ2lvbkJ5dGVTdHJpbmcoKTsKICAgICAgICByZWZyZXNoTXlTZXJ2ZXJB\nZGRyZXNzKCk7CiAgICAgICAgcmVmcmVzaFJlZ2lvbkxpc3QoKTsKICAgIH0K\nCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIGxvYWRDb25mKFVSTCBj\nb25mVVJMKSB0aHJvd3MgQ29uZmlndXJhdGlvbkV4Y2VwdGlvbiB7CiAgICAg\nICAgc3VwZXIubG9hZENvbmYoY29uZlVSTCk7CiAgICAgICAgcmVmcmVzaERl\ncml2ZWRBdHRyaWJ1dGVzKCk7CiAgICB9CgogICAgcHVibGljIGludCBnZXRN\nYXhpbXVtTWVzc2FnZVNpemUoKSB7CiAgICAgICAgcmV0dXJuIGNvbmYuZ2V0\nSW50KE1BWF9NRVNTQUdFX1NJWkUsIDEyNTgyOTEpOyAvKiAxLjJNICovCiAg\nICB9CgogICAgcHVibGljIFN0cmluZyBnZXRNeVJlZ2lvbigpIHsKICAgICAg\nICByZXR1cm4gY29uZi5nZXRTdHJpbmcoUkVHSU9OLCAic3RhbmRhbG9uZSIp\nOwogICAgfQoKICAgIHByb3RlY3RlZCB2b2lkIHJlZnJlc2hNeVJlZ2lvbkJ5\ndGVTdHJpbmcoKSB7CiAgICAgICAgbXlSZWdpb25CeXRlU3RyaW5nID0gQnl0\nZVN0cmluZy5jb3B5RnJvbVV0ZjgoZ2V0TXlSZWdpb24oKSk7CiAgICB9Cgog\nICAgcHJvdGVjdGVkIHZvaWQgcmVmcmVzaE15U2VydmVyQWRkcmVzcygpIHsK\nICAgICAgICB0cnkgewogICAgICAgICAgICAvLyBVc2UgdGhlIHJhdyBJUCBh\nZGRyZXNzIGFzIHRoZSBob3N0bmFtZQogICAgICAgICAgICBteVNlcnZlckFk\nZHJlc3MgPSBuZXcgSGVkd2lnU29ja2V0QWRkcmVzcyhJbmV0QWRkcmVzcy5n\nZXRMb2NhbEhvc3QoKS5nZXRIb3N0QWRkcmVzcygpLCBnZXRTZXJ2ZXJQb3J0\nKCksCiAgICAgICAgICAgICAgICAgICAgZ2V0U1NMU2VydmVyUG9ydCgpKTsK\nICAgICAgICB9IGNhdGNoIChVbmtub3duSG9zdEV4Y2VwdGlvbiBlKSB7CiAg\nICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKGUpOwogICAg\nICAgIH0KICAgIH0KCiAgICAvLyBUaGUgZXhwZWN0ZWQgZm9ybWF0IGZvciB0\naGUgcmVnaW9ucyBwYXJhbWV0ZXIgaXMgSG9zdG5hbWU6UG9ydDpTU0xQb3J0\nCiAgICAvLyB3aXRoIHNwYWNlcyBpbiBiZXR3ZWVuIGVhY2ggb2YgdGhlIHJl\nZ2lvbnMuCiAgICBwcm90ZWN0ZWQgdm9pZCByZWZyZXNoUmVnaW9uTGlzdCgp\nIHsKICAgICAgICBTdHJpbmcgcmVnaW9ucyA9IGNvbmYuZ2V0U3RyaW5nKFJF\nR0lPTlMsICIiKTsKICAgICAgICBpZiAocmVnaW9ucy5pc0VtcHR5KCkpIHsK\nICAgICAgICAgICAgcmVnaW9uTGlzdCA9IG5ldyBMaW5rZWRMaXN0PFN0cmlu\nZz4oKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZWdpb25MaXN0\nID0gQXJyYXlzLmFzTGlzdChyZWdpb25zLnNwbGl0KCIgIikpOwogICAgICAg\nIH0KICAgIH0KCiAgICBwdWJsaWMgQnl0ZVN0cmluZyBnZXRNeVJlZ2lvbkJ5\ndGVTdHJpbmcoKSB7CiAgICAgICAgaWYgKG15UmVnaW9uQnl0ZVN0cmluZyA9\nPSBudWxsKSB7CiAgICAgICAgICAgIHJlZnJlc2hNeVJlZ2lvbkJ5dGVTdHJp\nbmcoKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG15UmVnaW9uQnl0ZVN0\ncmluZzsKICAgIH0KCiAgICAvKioKICAgICAqIE1heGltdW0gbnVtYmVyIG9m\nIG1lc3NhZ2VzIHRvIHJlYWQgYWhlYWQuIERlZmF1bHQgaXMgMTAuCiAgICAg\nKiAKICAgICAqIEByZXR1cm4gaW50CiAgICAgKi8KICAgIHB1YmxpYyBpbnQg\nZ2V0UmVhZEFoZWFkQ291bnQoKSB7CiAgICAgICAgcmV0dXJuIGNvbmYuZ2V0\nSW50KFJFQURBSEVBRF9DT1VOVCwgMTApOwogICAgfQoKICAgIC8qKgogICAg\nICogTWF4aW11bSBudW1iZXIgb2YgYnl0ZXMgdG8gcmVhZCBhaGVhZC4gRGVm\nYXVsdCBpcyA0TUIuCiAgICAgKiAKICAgICAqIEByZXR1cm4gbG9uZwogICAg\nICovCiAgICBwdWJsaWMgbG9uZyBnZXRSZWFkQWhlYWRTaXplQnl0ZXMoKSB7\nCiAgICAgICAgcmV0dXJuIGNvbmYuZ2V0TG9uZyhSRUFEQUhFQURfU0laRSwg\nNCAqIDEwMjQgKiAxMDI0KTsgLy8gNE0KICAgIH0KCiAgICAvKioKICAgICAq\nIE1heGltdW0gY2FjaGUgc2l6ZS4gQnkgZGVmYXVsdCBpcyB0aGUgc21hbGxl\nc3Qgb2YgMkcgb3IKICAgICAqIGhhbGYgdGhlIGhlYXAgc2l6ZS4KICAgICAq\nIAogICAgICogQHJldHVybiBsb25nCiAgICAgKi8KICAgIHB1YmxpYyBsb25n\nIGdldE1heGltdW1DYWNoZVNpemUoKSB7CiAgICAgICAgLy8gMkcgb3IgaGFs\nZiBvZiB0aGUgbWF4aW11bSBhbW91bnQgb2YgbWVtb3J5IHRoZSBKVk0gdXNl\ncwogICAgICAgIHJldHVybiBjb25mLmdldExvbmcoQ0FDSEVfU0laRSwgTWF0\naC5taW4oMiAqIDEwMjRMICogMTAyNEwgKiAxMDI0TCwgUnVudGltZS5nZXRS\ndW50aW1lKCkubWF4TWVtb3J5KCkgLyAyKSk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBDYWNoZSBFbnRyeSBUVEwuIEJ5IGRlZmF1bHQgaXMgMCwgY2FjaGUg\nZW50cnkgd2lsbCBub3QgYmUgZXZpY3RlZAogICAgICogdW50aWwgdGhlIGNh\nY2hlIGlzIGZ1bGxmaWxsZWQgb3IgdGhlIG1lc3NhZ2VzIGFyZSBhbHJlYWR5\nIGNvbnN1bWVkLgogICAgICogVGhlIFRUTCBpcyBvbmx5IGNoZWNrZWQgd2hl\nbiB0cnlpbmcgYWRkaW5nIGEgbmV3IGVudHJ5IGludG8gdGhlIGNhY2hlLgog\nICAgICoKICAgICAqIEByZXR1cm4gY2FjaGUgZW50cnkgdHRsLgogICAgICov\nCiAgICBwdWJsaWMgbG9uZyBnZXRDYWNoZUVudHJ5VFRMKCkgewogICAgICAg\nIHJldHVybiBjb25mLmdldExvbmcoQ0FDSEVfRU5UUllfVFRMLCAwTCk7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBBZnRlciBhIHNjYW4gb2YgYSBsb2cgZmFp\nbHMsIGhvdyBsb25nIGJlZm9yZSB3ZSByZXRyeSAoaW4gbXNlYykKICAgICAq\nIAogICAgICogQHJldHVybiBsb25nCiAgICAgKi8KICAgIHB1YmxpYyBsb25n\nIGdldFNjYW5CYWNrb2ZmUGVyaW9kTXMoKSB7CiAgICAgICAgcmV0dXJuIGNv\nbmYuZ2V0TG9uZyhTQ0FOX0JBQ0tPRkZfTVNFQywgMTAwMCk7CiAgICB9CiAg\nICAKICAgIC8qKgogICAgICogUmV0dXJucyBzZXJ2ZXIgcG9ydC4KICAgICAq\nIAogICAgICogQHJldHVybiBpbnQKICAgICAqLwogICAgcHVibGljIGludCBn\nZXRTZXJ2ZXJQb3J0KCkgewogICAgICAgIHJldHVybiBjb25mLmdldEludChT\nRVJWRVJfUE9SVCwgNDA4MCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1\ncm5zIFNTTCBzZXJ2ZXIgcG9ydC4KICAgICAqIAogICAgICogQHJldHVybiBp\nbnQKICAgICAqLwogICAgcHVibGljIGludCBnZXRTU0xTZXJ2ZXJQb3J0KCkg\newogICAgICAgIHJldHVybiBjb25mLmdldEludChTU0xfU0VSVkVSX1BPUlQs\nIDk4NzYpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBab29LZWVw\nZXIgcGF0aCBwcmVmaXguCiAgICAgKiAKICAgICAqIEByZXR1cm4gc3RyaW5n\nCiAgICAgKi8KICAgIHB1YmxpYyBTdHJpbmcgZ2V0WmtQcmVmaXgoKSB7CiAg\nICAgICAgcmV0dXJuIGNvbmYuZ2V0U3RyaW5nKFpLX1BSRUZJWCwgIi9oZWR3\naWciKTsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nQnVpbGRlciBnZXRaa1Jl\nZ2lvblByZWZpeChTdHJpbmdCdWlsZGVyIHNiKSB7CiAgICAgICAgcmV0dXJu\nIHNiLmFwcGVuZChnZXRaa1ByZWZpeCgpKS5hcHBlbmQoIi8iKS5hcHBlbmQo\nZ2V0TXlSZWdpb24oKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgem5v\nZGUgcGF0aCB0byBzdG9yZSBtYW5hZ2VyIGxheW91dHMuCiAgICAgKgogICAg\nICogQHBhcmFtIHNiCiAgICAgKiAgICAgICAgICBTdHJpbmdCdWlsZGVyIHRv\nIHN0b3JlIHpub2RlIHBhdGggdG8gc3RvcmUgbWFuYWdlciBsYXlvdXRzLgog\nICAgICogQHJldHVybiB6bm9kZSBwYXRoIHRvIHN0b3JlIG1hbmFnZXIgbGF5\nb3V0cy4KICAgICAqLwogICAgcHVibGljIFN0cmluZ0J1aWxkZXIgZ2V0WmtN\nYW5hZ2Vyc1ByZWZpeChTdHJpbmdCdWlsZGVyIHNiKSB7CiAgICAgICAgcmV0\ndXJuIGdldFprUmVnaW9uUHJlZml4KHNiKS5hcHBlbmQoIi9tYW5hZ2VycyIp\nOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmdCdWlsZGVyIGdldFprVG9waWNz\nUHJlZml4KFN0cmluZ0J1aWxkZXIgc2IpIHsKICAgICAgICByZXR1cm4gZ2V0\nWmtSZWdpb25QcmVmaXgoc2IpLmFwcGVuZCgiL3RvcGljcyIpOwogICAgfQoK\nICAgIHB1YmxpYyBTdHJpbmdCdWlsZGVyIGdldFprVG9waWNQYXRoKFN0cmlu\nZ0J1aWxkZXIgc2IsIEJ5dGVTdHJpbmcgdG9waWMpIHsKICAgICAgICByZXR1\ncm4gZ2V0WmtUb3BpY3NQcmVmaXgoc2IpLmFwcGVuZCgiLyIpLmFwcGVuZCh0\nb3BpYy50b1N0cmluZ1V0ZjgoKSk7CiAgICB9CgogICAgcHVibGljIFN0cmlu\nZ0J1aWxkZXIgZ2V0WmtIb3N0c1ByZWZpeChTdHJpbmdCdWlsZGVyIHNiKSB7\nCiAgICAgICAgcmV0dXJuIGdldFprUmVnaW9uUHJlZml4KHNiKS5hcHBlbmQo\nIi9ob3N0cyIpOwogICAgfQoKICAgIHB1YmxpYyBIZWR3aWdTb2NrZXRBZGRy\nZXNzIGdldFNlcnZlckFkZHIoKSB7CiAgICAgICAgaWYgKG15U2VydmVyQWRk\ncmVzcyA9PSBudWxsKSB7CiAgICAgICAgICAgIHJlZnJlc2hNeVNlcnZlckFk\nZHJlc3MoKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG15U2VydmVyQWRk\ncmVzczsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiBab29LZWVwZXIg\nbGlzdCBvZiBzZXJ2ZXJzLiBEZWZhdWx0IGlzIGxvY2FsaG9zdC4KICAgICAq\nIAogICAgICogQHJldHVybiBTdHJpbmcKICAgICAqLwogICAgcHVibGljIFN0\ncmluZyBnZXRaa0hvc3QoKSB7CiAgICAgICAgTGlzdDxPYmplY3Q+IHNlcnZl\ncnMgPSBjb25mLmdldExpc3QoWktfSE9TVCwgbnVsbCk7CiAgICAgICAgaWYg\nKG51bGwgPT0gc2VydmVycyB8fCAwID09IHNlcnZlcnMuc2l6ZSgpKSB7CiAg\nICAgICAgICAgIHJldHVybiAibG9jYWxob3N0IjsKICAgICAgICB9CiAgICAg\nICAgcmV0dXJuIFN0cmluZ1V0aWxzLmpvaW4oc2VydmVycywgIiwiKTsKICAg\nIH0KCiAgICAvKioKICAgICAqIFJldHVybiBab29LZWVwZXIgc2Vzc2lvbiB0\naW1lb3V0LiBEZWZhdWx0IGlzIDJzLgogICAgICogCiAgICAgKiBAcmV0dXJu\nIGludAogICAgICovCiAgICBwdWJsaWMgaW50IGdldFprVGltZW91dCgpIHsK\nICAgICAgICByZXR1cm4gY29uZi5nZXRJbnQoWktfVElNRU9VVCwgMjAwMCk7\nCiAgICB9CgogICAgLyoqIAogICAgICogUmV0dXJucyB0cnVlIGlmIHJlYWQt\nYWhlYWQgZW5hYmxlZC4gRGVmYXVsdCBpcyB0cnVlLgogICAgICogCiAgICAg\nKiBAcmV0dXJuIGJvb2xlYW4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4g\nZ2V0UmVhZEFoZWFkRW5hYmxlZCgpIHsKICAgICAgICByZXR1cm4gY29uZi5n\nZXRCb29sZWFuKFJFQURBSEVBRF9FTkFCTEVELCB0cnVlKQogICAgICAgICAg\nICB8fCBjb25mLmdldEJvb2xlYW4oInJlYWRoZWFkX2VuYWJsZWQiKTsKICAg\nICAgICAvLyB0aGUga2V5IHdhcyBtaXNzcGVsdCBpbiBhIHByZXZpb3VzIHZl\ncnNpb24sIHNvIGNvbXBlbnNhdGUgaGVyZQogICAgfQoKICAgIC8qKgogICAg\nICogUmV0dXJucyB0cnVlIGlmIHN0YW5kYWxvbmUuIERlZmF1bHQgaXMgZmFs\nc2UuCiAgICAgKiAKICAgICAqIEByZXR1cm4gYm9vbGVhbgogICAgICovCiAg\nICBwdWJsaWMgYm9vbGVhbiBpc1N0YW5kYWxvbmUoKSB7CiAgICAgICAgcmV0\ndXJuIGNvbmYuZ2V0Qm9vbGVhbihTVEFOREFMT05FLCBmYWxzZSk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGxpc3Qgb2YgcmVnaW9ucy4gCiAg\nICAgKiAKICAgICAqIEByZXR1cm4gTGlzdDxTdHJpbmc+CiAgICAgKi8KICAg\nIHB1YmxpYyBMaXN0PFN0cmluZz4gZ2V0UmVnaW9ucygpIHsKICAgICAgICBp\nZiAocmVnaW9uTGlzdCA9PSBudWxsKSB7CiAgICAgICAgICAgIHJlZnJlc2hS\nZWdpb25MaXN0KCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiByZWdpb25M\naXN0OwogICAgfQoKICAgIC8qKgogICAgICogIFJldHVybnMgdGhlIG5hbWUg\nb2YgdGhlIFNTTCBjZXJ0aWZpY2F0ZSBpZiBhdmFpbGFibGUgYXMgYSByZXNv\ndXJjZS4KICAgICAqIAogICAgICogQHJldHVybiBTdHJpbmcKICAgICAqLwog\nICAgcHVibGljIFN0cmluZyBnZXRDZXJ0TmFtZSgpIHsKICAgICAgICByZXR1\ncm4gY29uZi5nZXRTdHJpbmcoQ0VSVF9OQU1FLCAiIik7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBUaGlzIGlzIHRoZSBwYXRoIHRvIHRoZSBTU0wgY2VydGlm\naWNhdGUgaWYgaXQgaXMgYXZhaWxhYmxlIGFzIGEgZmlsZS4KICAgICAqIAog\nICAgICogQHJldHVybiBTdHJpbmcKICAgICAqLwogICAgcHVibGljIFN0cmlu\nZyBnZXRDZXJ0UGF0aCgpIHsKICAgICAgICByZXR1cm4gY29uZi5nZXRTdHJp\nbmcoQ0VSVF9QQVRILCAiIik7CiAgICB9CgogICAgLy8gVGhpcyBtZXRob2Qg\ncmV0dXJuIHRoZSBTU0wgY2VydGlmaWNhdGUgYXMgYW4gSW5wdXRTdHJlYW0g\nYmFzZWQgb24gaWYgaXQKICAgIC8vIGlzIGNvbmZpZ3VyZWQgdG8gYmUgYXZh\naWxhYmxlIGFzIGEgcmVzb3VyY2Ugb3IgYXMgYSBmaWxlLiBJZiBub3RoaW5n\nIGlzCiAgICAvLyBjb25maWd1cmVkIGNvcnJlY3RseSwgdGhlbiBhIENvbmZp\nZ3VyYXRpb25FeGNlcHRpb24gd2lsbCBiZSB0aHJvd24gYXMKICAgIC8vIHdl\nIGRvIG5vdCBrbm93IGhvdyB0byBvYnRhaW4gdGhlIFNTTCBjZXJ0aWZpY2F0\nZSBzdHJlYW0uCiAgICBwdWJsaWMgSW5wdXRTdHJlYW0gZ2V0Q2VydFN0cmVh\nbSgpIHRocm93cyBGaWxlTm90Rm91bmRFeGNlcHRpb24sIENvbmZpZ3VyYXRp\nb25FeGNlcHRpb24gewogICAgICAgIFN0cmluZyBjZXJ0TmFtZSA9IGdldENl\ncnROYW1lKCk7CiAgICAgICAgU3RyaW5nIGNlcnRQYXRoID0gZ2V0Q2VydFBh\ndGgoKTsKICAgICAgICBpZiAoY2VydE5hbWUgIT0gbnVsbCAmJiAhY2VydE5h\nbWUuaXNFbXB0eSgpKSB7CiAgICAgICAgICAgIHJldHVybiBnZXRDbGFzcygp\nLmdldFJlc291cmNlQXNTdHJlYW0oY2VydE5hbWUpOwogICAgICAgIH0gZWxz\nZSBpZiAoY2VydFBhdGggIT0gbnVsbCAmJiAhY2VydFBhdGguaXNFbXB0eSgp\nKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgRmlsZUlucHV0U3RyZWFtKGNl\ncnRQYXRoKTsKICAgICAgICB9IGVsc2UKICAgICAgICAgICAgdGhyb3cgbmV3\nIENvbmZpZ3VyYXRpb25FeGNlcHRpb24oIlNTTCBDZXJ0aWZpY2F0ZSBjb25m\naWd1cmF0aW9uIGRvZXMgbm90IGhhdmUgcmVzb3VyY2UgbmFtZSBvciBwYXRo\nIHNldCEiKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIHBh\nc3N3b3JkIHVzZWQgZm9yIEJvb2tLZWVwZXIgbGVkZ2Vycy4gRGVmYXVsdAog\nICAgICogaXMgdGhlIGVtcHR5IHN0cmluZy4KICAgICAqIAogICAgICogQHJl\ndHVybgogICAgICovCiAgICBwdWJsaWMgU3RyaW5nIGdldFBhc3N3b3JkKCkg\newogICAgICAgIHJldHVybiBjb25mLmdldFN0cmluZyhQQVNTV09SRCwgIiIp\nOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0cnVlIGlmIFNTTCBp\ncyBlbmFibGVkLiBEZWZhdWx0IGlzIGZhbHNlLgogICAgICogCiAgICAgKiBA\ncmV0dXJuIGJvb2xlYW4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gaXNT\nU0xFbmFibGVkKCkgewogICAgICAgIHJldHVybiBjb25mLmdldEJvb2xlYW4o\nU1NMX0VOQUJMRUQsIGZhbHNlKTsKICAgIH0KCiAgICAvKioKICAgICAqIEdl\ndHMgdGhlIG51bWJlciBvZiBtZXNzYWdlcyBjb25zdW1lZCBiZWZvcmUgcGVy\nc2lzdGluZwogICAgICogaW5mb3JtYXRpb24gYWJvdXQgY29uc3VtZWQgbWVz\nc2FnZXMuIEEgdmFsdWUgZ3JlYXRlciB0aGFuCiAgICAgKiBvbmUgYXZvaWRz\nIHBlcnNpc3RpbmcgaW5mb3JtYXRpb24gYWJvdXQgY29uc3VtZWQgbWVzc2Fn\nZXMKICAgICAqIHVwb24gZXZlcnkgY29uc3VtZWQgbWVzc2FnZS4gRGVmYXVs\ndCBpcyA1MC4KICAgICAqIAogICAgICogQHJldHVybiBpbnQKICAgICAqLwog\nICAgcHVibGljIGludCBnZXRDb25zdW1lSW50ZXJ2YWwoKSB7CiAgICAgICAg\ncmV0dXJuIGNvbmYuZ2V0SW50KENPTlNVTUVfSU5URVJWQUwsIDUwKTsKICAg\nIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGludGVydmFsIHRvIHJl\nbGVhc2UgYSB0b3BpYy4gSWYgdGhpcwogICAgICogcGFyYW1ldGVyIGlzIGdy\nZWF0ZXIgdGhhbiB6ZXJvLCB0aGVuIHNjaGVkdWxlIGEKICAgICAqIHRhc2sg\ndG8gcmVsZWFzZSBhbiBvd25lZCB0b3BpYy4gRGVmYXVsdCBpcyAwIChuZXZl\nciByZWxlYXNlZCkuCiAgICAgKiAKICAgICAqIEByZXR1cm4gaW50CiAgICAg\nKi8KICAgIHB1YmxpYyBpbnQgZ2V0UmV0ZW50aW9uU2VjcygpIHsKICAgICAg\nICByZXR1cm4gY29uZi5nZXRJbnQoUkVURU5USU9OX1NFQ1MsIDApOwogICAg\nfQoKICAgIC8qKgogICAgICogVHJ1ZSBpZiBTU0wgaXMgZW5hYmxlZCBhY3Jv\nc3MgcmVnaW9ucy4KICAgICAqIAogICAgICogQHJldHVybiBib29sZWFuCiAg\nICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlzSW50ZXJSZWdpb25TU0xFbmFi\nbGVkKCkgewogICAgICAgIHJldHVybiBjb25mLmdldEJvb2xlYW4oSU5URVJf\nUkVHSU9OX1NTTF9FTkFCTEVELCBmYWxzZSk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBUaGlzIHBhcmFtZXRlciBpcyB1c2VkIHRvIGRldGVybWluZSBob3cg\nb2Z0ZW4gd2UgcnVuIHRoZSAKICAgICAqIFN1YnNjcmlwdGlvbk1hbmFnZXIn\ncyBNZXNzYWdlcyBDb25zdW1lZCB0aW1lciB0YXNrIHRocmVhZCAKICAgICAq\nIChpbiBtaWxsaXNlY29uZHMpLgogICAgICogCiAgICAgKiBAcmV0dXJuIGlu\ndAogICAgICovCiAgICBwdWJsaWMgaW50IGdldE1lc3NhZ2VzQ29uc3VtZWRU\naHJlYWRSdW5JbnRlcnZhbCgpIHsKICAgICAgICByZXR1cm4gY29uZi5nZXRJ\nbnQoTUVTU0FHRVNfQ09OU1VNRURfVEhSRUFEX1JVTl9JTlRFUlZBTCwgNjAw\nMDApOwogICAgfQoKICAgIC8qKgogICAgICogVGhpcyBwYXJhbWV0ZXIgaXMg\ndXNlZCB0byBkZXRlcm1pbmUgaG93IG9mdGVuIHdlIHJ1biBhIHRocmVhZAog\nICAgICogdG8gcmV0cnkgdGhvc2UgZmFpbGVkIHJlbW90ZSBzdWJzY3JpcHRp\nb25zIGluIGFzeW5jaHJvbm91cyBtb2RlCiAgICAgKiAoaW4gbWlsbGlzZWNv\nbmRzKS4KICAgICAqIAogICAgICogQHJldHVybiBpbnQKICAgICAqLwogICAg\ncHVibGljIGludCBnZXRSZXRyeVJlbW90ZVN1YnNjcmliZVRocmVhZFJ1bklu\ndGVydmFsKCkgewogICAgICAgIHJldHVybiBjb25mLmdldEludChSRVRSWV9S\nRU1PVEVfU1VCU0NSSUJFX1RIUkVBRF9SVU5fSU5URVJWQUwsIDEyMDAwMCk7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBUaGlzIHBhcmFtZXRlciBpcyBmb3Ig\nc2V0dGluZyB0aGUgZGVmYXVsdCBtYXhpbXVtIG51bWJlciBvZiBtZXNzYWdl\ncyB3aGljaAogICAgICogY2FuIGJlIGRlbGl2ZXJlZCB0byBhIHN1YnNjcmli\nZXIgd2l0aG91dCBiZWluZyBjb25zdW1lZC4KICAgICAqIHdlIHBhdXNlIG1l\nc3NhZ2VzIGRlbGl2ZXJ5IHRvIGEgc3Vic2NyaWJlciB3aGVuIHJlYWNoaW5n\nIHRoZSB3aW5kb3cgc2l6ZQogICAgICogCiAgICAgKiBAcmV0dXJuIGludAog\nICAgICovCiAgICBwdWJsaWMgaW50IGdldERlZmF1bHRNZXNzYWdlV2luZG93\nU2l6ZSgpIHsKICAgICAgICByZXR1cm4gY29uZi5nZXRJbnQoREVGQVVMVF9N\nRVNTQUdFX1dJTkRPV19TSVpFLCAwKTsKICAgIH0KCiAgICAvKioKICAgICAq\nIFRoaXMgcGFyYW1ldGVyIGlzIHVzZWQgd2hlbiBCb29ra2VlcGVyIGlzIHRo\nZSBwZXJzaXN0ZW5jZQogICAgICogc3RvcmUgYW5kIGluZGljYXRlcyB3aGF0\nIHRoZSBlbnNlbWJsZSBzaXplIGlzIChpLmUuIGhvdwogICAgICogbWFueSBi\nb29raWUgc2VydmVycyB0byBzdHJpcGUgdGhlIGxlZGdlciBlbnRyaWVzIGFj\ncm9zcykuCiAgICAgKiAKICAgICAqIEByZXR1cm4gaW50CiAgICAgKi8KICAg\nIHB1YmxpYyBpbnQgZ2V0QmtFbnNlbWJsZVNpemUoKSB7CiAgICAgICAgcmV0\ndXJuIGNvbmYuZ2V0SW50KEJLX0VOU0VNQkxFX1NJWkUsIDMpOwogICAgfQoK\nCiAgICAvKioKICAgICAqIFRoaXMgcGFyYW1ldGVyIGlzIHVzZWQgd2hlbiBC\nb29ra2VlcGVyIGlzIHRoZSBwZXJzaXN0ZW5jZSBzdG9yZQogICAgICogYW5k\nIGluZGljYXRlcyB3aGF0IHRoZSBxdW9ydW0gc2l6ZSBpcyAoaS5lLiBob3cg\nbWFueSByZWR1bmRhbnQKICAgICAqIGNvcGllcyBvZiBlYWNoIGxlZGdlciBl\nbnRyeSBpcyB3cml0dGVuKS4KICAgICAqIAogICAgICogQHJldHVybiBpbnQK\nICAgICAqLwogICAgQERlcHJlY2F0ZWQKICAgIHByb3RlY3RlZCBpbnQgZ2V0\nQmtRdW9ydW1TaXplKCkgewogICAgICAgIHJldHVybiBjb25mLmdldEludChC\nS19RVU9SVU1fU0laRSwgMik7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQg\ndGhlIHdyaXRlIHF1b3J1bSBzaXplIGZvciBCb29rS2VlcGVyIGNsaWVudCwg\nd2hpY2ggaXMgdXNlZCB0bwogICAgICogaW5kaWNhdGUgaG93IG1hbnkgcmVk\ndW5kYW50IGNvcGllcyBvZiBlYWNoIGxlZGdlciBlbnRyeSBpcyB3cml0dGVu\nLgogICAgICoKICAgICAqIEByZXR1cm4gd3JpdGUgcXVvcnVtIHNpemUgZm9y\nIEJvb2tLZWVwZXIgY2xpZW50LgogICAgICovCiAgICBwdWJsaWMgaW50IGdl\ndEJrV3JpdGVRdW9ydW1TaXplKCkgewogICAgICAgIGlmIChjb25mLmNvbnRh\naW5zS2V5KEJLX1dSSVRFX1FVT1JVTV9TSVpFKSkgewogICAgICAgICAgICBy\nZXR1cm4gY29uZi5nZXRJbnQoQktfV1JJVEVfUVVPUlVNX1NJWkUsIDIpOwog\nICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBnZXRCa1F1b3J1\nbVNpemUoKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQg\ndGhlIGFjayBxdW9ydW0gc2l6ZSBmb3IgQm9va0tlZXBlciBjbGllbnQuCiAg\nICAgKgogICAgICogQHJldHVybiBhY2sgcXVvcnVtIHNpemUgZm9yIEJvb2tL\nZWVwZXIgY2xpZW50LgogICAgICovCiAgICBwdWJsaWMgaW50IGdldEJrQWNr\nUXVvcnVtU2l6ZSgpIHsKICAgICAgICBpZiAoY29uZi5jb250YWluc0tleShC\nS19BQ0tfUVVPUlVNX1NJWkUpKSB7CiAgICAgICAgICAgIHJldHVybiBjb25m\nLmdldEludChCS19BQ0tfUVVPUlVNX1NJWkUsIDIpOwogICAgICAgIH0gZWxz\nZSB7CiAgICAgICAgICAgIHJldHVybiBnZXRCa1F1b3J1bVNpemUoKTsKICAg\nICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGlzIHBhcmFtZXRlciBp\ncyB1c2VkIHdoZW4gQm9va0tlZXBlciBpcyB0aGUgcGVyc2lzdGVuY2Ugc3Rv\ncmFnZSwKICAgICAqIGFuZCBpbmRpY2F0ZXMgd2hlbiB0aGUgbnVtYmVyIG9m\nIGVudHJpZXMgc3RvcmVkIGluIGEgbGVkZ2VyIHJlYWNoCiAgICAgKiB0aGUg\ndGhyZXNob2xkLCBodWIgc2VydmVyIHdpbGwgb3BlbiBhIG5ldyBsZWRnZXIg\ndG8gd3JpdGUuCiAgICAgKgogICAgICogQHJldHVybiBtYXggZW50cmllcyBw\nZXIgbGVkZ2VyCiAgICAgKi8KICAgIHB1YmxpYyBsb25nIGdldE1heEVudHJp\nZXNQZXJMZWRnZXIoKSB7CiAgICAgICAgcmV0dXJuIGNvbmYuZ2V0TG9uZyhN\nQVhfRU5UUklFU19QRVJfTEVER0VSLCAwTCk7CiAgICB9CgogICAgLyoKICAg\nICAqIElzIHRoaXMgYSB2YWxpZCBjb25maWd1cmF0aW9uIHRoYXQgd2UgY2Fu\nIHJ1biB3aXRoPyBUaGlzIGNvZGUgbWlnaHQgZ3JvdwogICAgICogb3ZlciB0\naW1lLgogICAgICovCiAgICBwdWJsaWMgdm9pZCB2YWxpZGF0ZSgpIHRocm93\ncyBDb25maWd1cmF0aW9uRXhjZXB0aW9uIHsKICAgICAgICBpZiAoIWdldFpr\nUHJlZml4KCkuc3RhcnRzV2l0aCgiLyIpKSB7CiAgICAgICAgICAgIHRocm93\nIG5ldyBDb25maWd1cmF0aW9uRXhjZXB0aW9uKFpLX1BSRUZJWCArICIgbXVz\ndCBzdGFydCB3aXRoIGEgLyIpOwogICAgICAgIH0KICAgICAgICAvLyBWYWxp\nZGF0ZSB0aGF0IGlmIFJlZ2lvbnMgZXhpc3QgYW5kIGludGVyLXJlZ2lvbiBj\nb21tdW5pY2F0aW9uIGlzIFNTTAogICAgICAgIC8vIGVuYWJsZWQsIHRoYXQg\ndGhlIFJlZ2lvbnMgY29ycmVzcG9uZCB0byB2YWxpZCBIZWR3aWdTb2NrZXRB\nZGRyZXNzZXMsCiAgICAgICAgLy8gbmFtZWx5IHRoYXQgU1NMIHBvcnRzIGFy\nZSBwcmVzZW50LgogICAgICAgIGlmIChpc0ludGVyUmVnaW9uU1NMRW5hYmxl\nZCgpICYmIGdldFJlZ2lvbnMoKS5zaXplKCkgPiAwKSB7CiAgICAgICAgICAg\nIGZvciAoU3RyaW5nIGh1YlN0cmluZyA6IGdldFJlZ2lvbnMoKSkgewogICAg\nICAgICAgICAgICAgSGVkd2lnU29ja2V0QWRkcmVzcyBodWIgPSBuZXcgSGVk\nd2lnU29ja2V0QWRkcmVzcyhodWJTdHJpbmcpOwogICAgICAgICAgICAgICAg\naWYgKGh1Yi5nZXRTU0xTb2NrZXRBZGRyZXNzKCkgPT0gbnVsbCkKICAgICAg\nICAgICAgICAgICAgICB0aHJvdyBuZXcgQ29uZmlndXJhdGlvbkV4Y2VwdGlv\nbigiUmVnaW9uIGRlZmluZWQgZG9lcyBub3QgaGF2ZSByZXF1aXJlZCBTU0wg\ncG9ydDogIiArIGh1YlN0cmluZyk7CiAgICAgICAgICAgIH0KICAgICAgICB9\nCiAgICAgICAgLy8gVmFsaWRhdGUgdGhhdCB0aGUgQm9va2tlZXBlciBlbnNl\nbWJsZSBzaXplID49IHF1b3J1bSBzaXplLgogICAgICAgIGlmIChnZXRCa0Vu\nc2VtYmxlU2l6ZSgpIDwgZ2V0QmtXcml0ZVF1b3J1bVNpemUoKSkgewogICAg\nICAgICAgICB0aHJvdyBuZXcgQ29uZmlndXJhdGlvbkV4Y2VwdGlvbigiQksg\nZW5zZW1ibGUgc2l6ZSAoIiArIGdldEJrRW5zZW1ibGVTaXplKCkKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAiKSBp\ncyBsZXNzIHRoYW4gdGhlIHdyaXRlIHF1b3J1bSBzaXplICgiICsgZ2V0QmtX\ncml0ZVF1b3J1bVNpemUoKSArICIpIik7CiAgICAgICAgfQoKICAgICAgICBp\nZiAoZ2V0QmtXcml0ZVF1b3J1bVNpemUoKSA8IGdldEJrQWNrUXVvcnVtU2l6\nZSgpKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBDb25maWd1cmF0aW9uRXhj\nZXB0aW9uKCJCSyB3cml0ZSBxdW9ydW0gc2l6ZSAoIiArIGdldEJrV3JpdGVR\ndW9ydW1TaXplKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgKyAiKSBpcyBsZXNzIHRoYW4gdGhlIGFjayBxdW9ydW0g\nc2l6ZSAoIiArIGdldEJrQWNrUXVvcnVtU2l6ZSgpICsgIikiKTsKICAgICAg\nICB9CgogICAgICAgIC8vIGFkZCBvdGhlciBjaGVja3MgaGVyZQogICAgfQoK\nICAgIC8qKgogICAgICogR2V0IG51bWJlciBvZiByZWFkIGFoZWFkIGNhY2hl\nIHRocmVhZHMuCiAgICAgKgogICAgICogQHJldHVybiBudW1iZXIgb2YgcmVh\nZCBhaGVhZCBjYWNoZSB0aHJlYWRzLgogICAgICovCiAgICBwdWJsaWMgaW50\nIGdldE51bVJlYWRBaGVhZENhY2hlVGhyZWFkcygpIHsKICAgICAgICByZXR1\ncm4gY29uZi5nZXRJbnQoTlVNX1JFQURBSEVBRF9DQUNIRV9USFJFQURTLCBS\ndW50aW1lLmdldFJ1bnRpbWUoKS5hdmFpbGFibGVQcm9jZXNzb3JzKCkpOwog\nICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciBlbmFibGUgbWV0YWRhdGEg\nbWFuYWdlciBiYXNlZCB0b3BpYyBtYW5hZ2VyLgogICAgICoKICAgICAqIEBy\nZXR1cm4gdHJ1ZSBpZiBlbmFibGVkIG1ldGFkYXRhIG1hbmFnZXIgYmFzZWQg\ndG9waWMgbWFuYWdlci4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gaXNN\nZXRhZGF0YU1hbmFnZXJCYXNlZFRvcGljTWFuYWdlckVuYWJsZWQoKSB7CiAg\nICAgICAgcmV0dXJuIGNvbmYuZ2V0Qm9vbGVhbihNRVRBREFUQV9NQU5BR0VS\nX0JBU0VEX1RPUElDX01BTkFHRVJfRU5BQkxFRCwgZmFsc2UpOwogICAgfQoK\nICAgIC8qKgogICAgICogR2V0IG1ldGFkYXRhIG1hbmFnZXIgZmFjdG9yeSBj\nbGFzcy4KICAgICAqCiAgICAgKiBAcmV0dXJuIG1hbmFnZXIgY2xhc3MKICAg\nICAqLwogICAgcHVibGljIENsYXNzPD8gZXh0ZW5kcyBNZXRhZGF0YU1hbmFn\nZXJGYWN0b3J5PiBnZXRNZXRhZGF0YU1hbmFnZXJGYWN0b3J5Q2xhc3MoKQog\nICAgdGhyb3dzIENvbmZpZ3VyYXRpb25FeGNlcHRpb24gewogICAgICAgIHJl\ndHVybiBSZWZsZWN0aW9uVXRpbHMuZ2V0Q2xhc3MoY29uZiwgTUVUQURBVEFf\nTUFOQUdFUl9GQUNUT1JZX0NMQVNTLAogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgbnVsbCwgTWV0YWRhdGFNYW5hZ2VyRmFjdG9y\neS5jbGFzcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIGRlZmF1bHRMb2FkZXIpOwogICAgfQoKICAgIC8qKgogICAgICogU2V0\nIG1ldGFkYXRhIG1hbmFnZXIgZmFjdG9yeSBjbGFzcyBuYW1lCiAgICAgKgog\nICAgICogQHBhcmFtIG1hbmFnZXJDbHNOYW1lCiAgICAgKiAgICAgICAgICBN\nYW5hZ2VyIENsYXNzIE5hbWUKICAgICAqIEByZXR1cm4gc2VydmVyIGNvbmZp\nZ3VyYXRpb24KICAgICAqLwogICAgcHVibGljIFNlcnZlckNvbmZpZ3VyYXRp\nb24gc2V0TWV0YWRhdGFNYW5hZ2VyRmFjdG9yeU5hbWUoU3RyaW5nIG1hbmFn\nZXJDbHNOYW1lKSB7CiAgICAgICAgY29uZi5zZXRQcm9wZXJ0eShNRVRBREFU\nQV9NQU5BR0VSX0ZBQ1RPUllfQ0xBU1MsIG1hbmFnZXJDbHNOYW1lKTsKICAg\nICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCBt\nZXRhc3RvcmUgaW1wbGVtZW50YXRpb24gY2xhc3MuCiAgICAgKgogICAgICog\nQHJldHVybiBtZXRhc3RvcmUgaW1wbGVtZW50YXRpb24gY2xhc3MgbmFtZS4K\nICAgICAqLwogICAgcHVibGljIFN0cmluZyBnZXRNZXRhc3RvcmVJbXBsQ2xh\nc3MoKSB7CiAgICAgICAgcmV0dXJuIGNvbmYuZ2V0U3RyaW5nKE1FVEFTVE9S\nRV9JTVBMX0NMQVNTKTsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCBtYXgg\nZW50cmllcyBwZXIgc2NhbiBpbiBtZXRhc3RvcmUuCiAgICAgKgogICAgICog\nQHJldHVybiBtYXggZW50cmllcyBwZXIgc2NhbiBpbiBtZXRhc3RvcmUuCiAg\nICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0TWV0YXN0b3JlTWF4RW50cmllc1Bl\nclNjYW4oKSB7CiAgICAgICAgcmV0dXJuIGNvbmYuZ2V0SW50KE1FVEFTVE9S\nRV9NQVhfRU5UUklFU19QRVJfU0NBTiwgNTApOwogICAgfQp9Cg==\n","encoding":"base64"}

