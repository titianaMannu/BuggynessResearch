{"sha":"a6ccb7ebbff4fed6a5136e97397ec691203723a5","node_id":"MDQ6QmxvYjE1NzU5NTY6YTZjY2I3ZWJiZmY0ZmVkNmE1MTM2ZTk3Mzk3ZWM2OTEyMDM3MjNhNQ==","size":5024,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/a6ccb7ebbff4fed6a5136e97397ec691203723a5","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIuaGFuZGxlcnM7CgppbXBv\ncnQgb3JnLmpib3NzLm5ldHR5LmNoYW5uZWwuQ2hhbm5lbDsKaW1wb3J0IG9y\nZy5qYm9zcy5uZXR0eS5jaGFubmVsLkNoYW5uZWxGdXR1cmVMaXN0ZW5lcjsK\nCmltcG9ydCBjb20uZ29vZ2xlLnByb3RvYnVmLkJ5dGVTdHJpbmc7CgppbXBv\ncnQgb3JnLmFwYWNoZS5oZWR3aWcuY2xpZW50LmRhdGEuVG9waWNTdWJzY3Jp\nYmVyOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuZXhjZXB0aW9ucy5QdWJT\ndWJFeGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2Nv\nbC5QdWJTdWJQcm90b2NvbC5DbG9zZVN1YnNjcmlwdGlvblJlcXVlc3Q7Cmlt\ncG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5QdWJTdWJQcm90b2Nv\nbC5PcGVyYXRpb25UeXBlOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcucHJv\ndG9jb2wuUHViU3ViUHJvdG9jb2wuUHViU3ViUmVxdWVzdDsKaW1wb3J0IG9y\nZy5hcGFjaGUuaGVkd2lnLnByb3RvY29sLlB1YlN1YlByb3RvY29sLlN1YnNj\ncmlwdGlvbkV2ZW50OwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcucHJvdG9l\neHRlbnNpb25zLlB1YlN1YlJlc3BvbnNlVXRpbHM7CmltcG9ydCBvcmcuYXBh\nY2hlLmhlZHdpZy5zZXJ2ZXIuY29tbW9uLlNlcnZlckNvbmZpZ3VyYXRpb247\nCmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIuZGVsaXZlcnkuRGVs\naXZlcnlNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuc2VydmVy\nLm5ldHR5LlNlcnZlclN0YXRzOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcu\nc2VydmVyLm5ldHR5LlNlcnZlclN0YXRzLk9wU3RhdHM7CmltcG9ydCBvcmcu\nYXBhY2hlLmhlZHdpZy5zZXJ2ZXIubmV0dHkuVW1icmVsbGFIYW5kbGVyOwpp\nbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuc2VydmVyLnN1YnNjcmlwdGlvbnMu\nU3Vic2NyaXB0aW9uTWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2ln\nLnNlcnZlci50b3BpY3MuVG9waWNNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNo\nZS5oZWR3aWcudXRpbC5DYWxsYmFjazsKCnB1YmxpYyBjbGFzcyBDbG9zZVN1\nYnNjcmlwdGlvbkhhbmRsZXIgZXh0ZW5kcyBCYXNlSGFuZGxlciB7CiAgICBT\ndWJzY3JpcHRpb25NYW5hZ2VyIHN1Yk1ncjsKICAgIERlbGl2ZXJ5TWFuYWdl\nciBkZWxpdmVyeU1ncjsKICAgIFN1YnNjcmlwdGlvbkNoYW5uZWxNYW5hZ2Vy\nIHN1YkNoYW5uZWxNZ3I7CiAgICAvLyBvcCBzdGF0cwogICAgZmluYWwgT3BT\ndGF0cyBjbG9zZXN1YlN0YXRzOwoKICAgIHB1YmxpYyBDbG9zZVN1YnNjcmlw\ndGlvbkhhbmRsZXIoU2VydmVyQ29uZmlndXJhdGlvbiBjZmcsIFRvcGljTWFu\nYWdlciB0bSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nU3Vic2NyaXB0aW9uTWFuYWdlciBzdWJNZ3IsCiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIERlbGl2ZXJ5TWFuYWdlciBkZWxpdmVyeU1n\nciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3Vic2Ny\naXB0aW9uQ2hhbm5lbE1hbmFnZXIgc3ViQ2hhbm5lbE1ncikgewogICAgICAg\nIHN1cGVyKHRtLCBjZmcpOwogICAgICAgIHRoaXMuc3ViTWdyID0gc3ViTWdy\nOwogICAgICAgIHRoaXMuZGVsaXZlcnlNZ3IgPSBkZWxpdmVyeU1ncjsKICAg\nICAgICB0aGlzLnN1YkNoYW5uZWxNZ3IgPSBzdWJDaGFubmVsTWdyOwogICAg\nICAgIGNsb3Nlc3ViU3RhdHMgPSBTZXJ2ZXJTdGF0cy5nZXRJbnN0YW5jZSgp\nLmdldE9wU3RhdHMoT3BlcmF0aW9uVHlwZS5DTE9TRVNVQlNDUklQVElPTik7\nCiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBoYW5kbGVS\nZXF1ZXN0QXRPd25lcihmaW5hbCBQdWJTdWJSZXF1ZXN0IHJlcXVlc3QsIGZp\nbmFsIENoYW5uZWwgY2hhbm5lbCkgewogICAgICAgIGlmICghcmVxdWVzdC5o\nYXNDbG9zZVN1YnNjcmlwdGlvblJlcXVlc3QoKSkgewogICAgICAgICAgICBV\nbWJyZWxsYUhhbmRsZXIuc2VuZEVycm9yUmVzcG9uc2VUb01hbGZvcm1lZFJl\ncXVlc3QoY2hhbm5lbCwgcmVxdWVzdC5nZXRUeG5JZCgpLAogICAgICAgICAg\nICAgICAgICAgICJNaXNzaW5nIGNsb3Nlc3Vic2NyaXB0aW9uIHJlcXVlc3Qg\nZGF0YSIpOwogICAgICAgICAgICBjbG9zZXN1YlN0YXRzLmluY3JlbWVudEZh\naWxlZE9wcygpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAg\nICAgICBmaW5hbCBDbG9zZVN1YnNjcmlwdGlvblJlcXVlc3QgY2xvc2VzdWJS\nZXF1ZXN0ID0KICAgICAgICAgICAgICAgIHJlcXVlc3QuZ2V0Q2xvc2VTdWJz\nY3JpcHRpb25SZXF1ZXN0KCk7CiAgICAgICAgZmluYWwgQnl0ZVN0cmluZyB0\nb3BpYyA9IHJlcXVlc3QuZ2V0VG9waWMoKTsKICAgICAgICBmaW5hbCBCeXRl\nU3RyaW5nIHN1YnNjcmliZXJJZCA9IGNsb3Nlc3ViUmVxdWVzdC5nZXRTdWJz\nY3JpYmVySWQoKTsKCiAgICAgICAgZmluYWwgbG9uZyByZXF1ZXN0VGltZSA9\nIFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpOwoKICAgICAgICBzdWJNZ3Iu\nY2xvc2VTdWJzY3JpcHRpb24odG9waWMsIHN1YnNjcmliZXJJZCwgbmV3IENh\nbGxiYWNrPFZvaWQ+KCkgewogICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAg\nICAgICAgcHVibGljIHZvaWQgb3BlcmF0aW9uRmluaXNoZWQoT2JqZWN0IGN0\neCwgVm9pZCByZXN1bHQpIHsKICAgICAgICAgICAgICAgIC8vIHdlIHNob3Vs\nZCBub3QgY2xvc2UgdGhlIGNoYW5uZWwgaW4gZGVsaXZlcnkgbWFuYWdlcgog\nICAgICAgICAgICAgICAgLy8gc2luY2UgY2xpZW50IHdhaXRzIHRoZSByZXNw\nb25zZSBmb3IgY2xvc2VTdWJzY3JpcHRpb24gcmVxdWVzdAogICAgICAgICAg\nICAgICAgLy8gY2xpZW50IHNpZGUgd291bGQgY2xvc2UgdGhlIGNoYW5uZWwK\nICAgICAgICAgICAgICAgIGRlbGl2ZXJ5TWdyLnN0b3BTZXJ2aW5nU3Vic2Ny\naWJlcih0b3BpYywgc3Vic2NyaWJlcklkLCBudWxsLAogICAgICAgICAgICAg\nICAgbmV3IENhbGxiYWNrPFZvaWQ+KCkgewogICAgICAgICAgICAgICAgICAg\nIEBPdmVycmlkZQogICAgICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9w\nZXJhdGlvbkZhaWxlZChPYmplY3QgY3R4LCBQdWJTdWJFeGNlcHRpb24gZXhj\nZXB0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5uZWwud3Jp\ndGUoUHViU3ViUmVzcG9uc2VVdGlscy5nZXRSZXNwb25zZUZvckV4Y2VwdGlv\nbihleGNlcHRpb24sIHJlcXVlc3QuZ2V0VHhuSWQoKSkpOwogICAgICAgICAg\nICAgICAgICAgICAgICBjbG9zZXN1YlN0YXRzLmluY3JlbWVudEZhaWxlZE9w\ncygpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAg\nICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBv\ncGVyYXRpb25GaW5pc2hlZChPYmplY3QgY3R4LCBWb2lkIHJlc3VsdE9mT3Bl\ncmF0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSB0\naGUgdG9waWMgc3Vic2NyaXB0aW9uIGZyb20gc3Vic2NyaXB0aW9uIGNoYW5u\nZWxzCiAgICAgICAgICAgICAgICAgICAgICAgIHN1YkNoYW5uZWxNZ3IucmVt\nb3ZlKG5ldyBUb3BpY1N1YnNjcmliZXIodG9waWMsIHN1YnNjcmliZXJJZCks\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIGNoYW5uZWwpOwogICAgICAgICAgICAgICAgICAgICAgICBjaGFubmVsLndy\naXRlKFB1YlN1YlJlc3BvbnNlVXRpbHMuZ2V0U3VjY2Vzc1Jlc3BvbnNlKHJl\ncXVlc3QuZ2V0VHhuSWQoKSkpOwogICAgICAgICAgICAgICAgICAgICAgICBj\nbG9zZXN1YlN0YXRzLnVwZGF0ZUxhdGVuY3koU3lzdGVtLmN1cnJlbnRUaW1l\nTWlsbGlzKCkgLSByZXF1ZXN0VGltZSk7CiAgICAgICAgICAgICAgICAgICAg\nfQogICAgICAgICAgICAgICAgfSwgbnVsbCk7CiAgICAgICAgICAgIH0KICAg\nICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9w\nZXJhdGlvbkZhaWxlZChPYmplY3QgY3R4LCBQdWJTdWJFeGNlcHRpb24gZXhj\nZXB0aW9uKSB7CiAgICAgICAgICAgICAgICBjaGFubmVsLndyaXRlKFB1YlN1\nYlJlc3BvbnNlVXRpbHMuZ2V0UmVzcG9uc2VGb3JFeGNlcHRpb24oZXhjZXB0\naW9uLCByZXF1ZXN0LmdldFR4bklkKCkpKTsKICAgICAgICAgICAgICAgIGNs\nb3Nlc3ViU3RhdHMuaW5jcmVtZW50RmFpbGVkT3BzKCk7CiAgICAgICAgICAg\nIH0KICAgICAgICB9LCBudWxsKTsKICAgIH0KfQo=\n","encoding":"base64"}

