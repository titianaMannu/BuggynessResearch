{"sha":"587f904f1d00375b73fe1b22fc1b395cb44f017a","node_id":"MDQ6QmxvYjE1NzU5NTY6NTg3ZjkwNGYxZDAwMzc1YjczZmUxYjIyZmMxYjM5NWNiNDRmMDE3YQ==","size":4350,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/587f904f1d00375b73fe1b22fc1b395cb44f017a","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIuaGFuZGxlcnM7CgppbXBv\ncnQgb3JnLmFwYWNoZS5oZWR3aWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2w7\nCmltcG9ydCBvcmcuamJvc3MubmV0dHkuY2hhbm5lbC5DaGFubmVsOwppbXBv\ncnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLnV0aWwuTWF0aFV0aWxzOwppbXBv\ncnQgb3JnLmFwYWNoZS5oZWR3aWcuZXhjZXB0aW9ucy5QdWJTdWJFeGNlcHRp\nb247CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5QdWJTdWJQ\ncm90b2NvbC5NZXNzYWdlOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcucHJv\ndG9jb2wuUHViU3ViUHJvdG9jb2wuT3BlcmF0aW9uVHlwZTsKaW1wb3J0IG9y\nZy5hcGFjaGUuaGVkd2lnLnByb3RvY29sLlB1YlN1YlByb3RvY29sLlB1YlN1\nYlJlcXVlc3Q7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2V4dGVu\nc2lvbnMuUHViU3ViUmVzcG9uc2VVdGlsczsKaW1wb3J0IG9yZy5hcGFjaGUu\naGVkd2lnLnNlcnZlci5jb21tb24uU2VydmVyQ29uZmlndXJhdGlvbjsKaW1w\nb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnNlcnZlci5uZXR0eS5TZXJ2ZXJTdGF0\nczsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnNlcnZlci5uZXR0eS5TZXJ2\nZXJTdGF0cy5PcFN0YXRzOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuc2Vy\ndmVyLm5ldHR5LlVtYnJlbGxhSGFuZGxlcjsKaW1wb3J0IG9yZy5hcGFjaGUu\naGVkd2lnLnNlcnZlci5wZXJzaXN0ZW5jZS5QZXJzaXN0UmVxdWVzdDsKaW1w\nb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnNlcnZlci5wZXJzaXN0ZW5jZS5QZXJz\naXN0ZW5jZU1hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2\nZXIudG9waWNzLlRvcGljTWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVk\nd2lnLnV0aWwuQ2FsbGJhY2s7CgpwdWJsaWMgY2xhc3MgUHVibGlzaEhhbmRs\nZXIgZXh0ZW5kcyBCYXNlSGFuZGxlciB7CgogICAgcHJpdmF0ZSBQZXJzaXN0\nZW5jZU1hbmFnZXIgcGVyc2lzdGVuY2VNZ3I7CiAgICBwcml2YXRlIGZpbmFs\nIE9wU3RhdHMgcHViU3RhdHM7CgogICAgcHVibGljIFB1Ymxpc2hIYW5kbGVy\nKFRvcGljTWFuYWdlciB0b3BpY01nciwgUGVyc2lzdGVuY2VNYW5hZ2VyIHBl\ncnNpc3RlbmNlTWdyLCBTZXJ2ZXJDb25maWd1cmF0aW9uIGNmZykgewogICAg\nICAgIHN1cGVyKHRvcGljTWdyLCBjZmcpOwogICAgICAgIHRoaXMucGVyc2lz\ndGVuY2VNZ3IgPSBwZXJzaXN0ZW5jZU1ncjsKICAgICAgICB0aGlzLnB1YlN0\nYXRzID0gU2VydmVyU3RhdHMuZ2V0SW5zdGFuY2UoKS5nZXRPcFN0YXRzKE9w\nZXJhdGlvblR5cGUuUFVCTElTSCk7CiAgICB9CgogICAgQE92ZXJyaWRlCiAg\nICBwdWJsaWMgdm9pZCBoYW5kbGVSZXF1ZXN0QXRPd25lcihmaW5hbCBQdWJT\ndWJSZXF1ZXN0IHJlcXVlc3QsIGZpbmFsIENoYW5uZWwgY2hhbm5lbCkgewog\nICAgICAgIGlmICghcmVxdWVzdC5oYXNQdWJsaXNoUmVxdWVzdCgpKSB7CiAg\nICAgICAgICAgIFVtYnJlbGxhSGFuZGxlci5zZW5kRXJyb3JSZXNwb25zZVRv\nTWFsZm9ybWVkUmVxdWVzdChjaGFubmVsLCByZXF1ZXN0LmdldFR4bklkKCks\nCiAgICAgICAgICAgICAgICAgICAgIk1pc3NpbmcgcHVibGlzaCByZXF1ZXN0\nIGRhdGEiKTsKICAgICAgICAgICAgcHViU3RhdHMuaW5jcmVtZW50RmFpbGVk\nT3BzKCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAg\nIE1lc3NhZ2UgbXNnVG9TZXJpYWxpemUgPSBNZXNzYWdlLm5ld0J1aWxkZXIo\ncmVxdWVzdC5nZXRQdWJsaXNoUmVxdWVzdCgpLmdldE1zZygpKS5zZXRTcmNS\nZWdpb24oCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBj\nZmcuZ2V0TXlSZWdpb25CeXRlU3RyaW5nKCkpLmJ1aWxkKCk7CgogICAgICAg\nIGZpbmFsIGxvbmcgcmVxdWVzdFRpbWUgPSBNYXRoVXRpbHMubm93KCk7CiAg\nICAgICAgUGVyc2lzdFJlcXVlc3QgcGVyc2lzdFJlcXVlc3QgPSBuZXcgUGVy\nc2lzdFJlcXVlc3QocmVxdWVzdC5nZXRUb3BpYygpLCBtc2dUb1NlcmlhbGl6\nZSwKICAgICAgICBuZXcgQ2FsbGJhY2s8UHViU3ViUHJvdG9jb2wuTWVzc2Fn\nZVNlcUlkPigpIHsKICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAg\nIHB1YmxpYyB2b2lkIG9wZXJhdGlvbkZhaWxlZChPYmplY3QgY3R4LCBQdWJT\ndWJFeGNlcHRpb24gZXhjZXB0aW9uKSB7CiAgICAgICAgICAgICAgICBjaGFu\nbmVsLndyaXRlKFB1YlN1YlJlc3BvbnNlVXRpbHMuZ2V0UmVzcG9uc2VGb3JF\neGNlcHRpb24oZXhjZXB0aW9uLCByZXF1ZXN0LmdldFR4bklkKCkpKTsKICAg\nICAgICAgICAgICAgIHB1YlN0YXRzLmluY3JlbWVudEZhaWxlZE9wcygpOwog\nICAgICAgICAgICB9CgogICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAg\nICAgcHVibGljIHZvaWQgb3BlcmF0aW9uRmluaXNoZWQoT2JqZWN0IGN0eCwg\nUHViU3ViUHJvdG9jb2wuTWVzc2FnZVNlcUlkIHJlc3VsdE9mT3BlcmF0aW9u\nKSB7CiAgICAgICAgICAgICAgICBjaGFubmVsLndyaXRlKGdldFN1Y2Nlc3NS\nZXNwb25zZShyZXF1ZXN0LmdldFR4bklkKCksIHJlc3VsdE9mT3BlcmF0aW9u\nKSk7CiAgICAgICAgICAgICAgICBwdWJTdGF0cy51cGRhdGVMYXRlbmN5KE1h\ndGhVdGlscy5ub3coKSAtIHJlcXVlc3RUaW1lKTsKICAgICAgICAgICAgfQog\nICAgICAgIH0sIG51bGwpOwoKICAgICAgICBwZXJzaXN0ZW5jZU1nci5wZXJz\naXN0TWVzc2FnZShwZXJzaXN0UmVxdWVzdCk7CiAgICB9CgogICAgcHJpdmF0\nZSBzdGF0aWMgUHViU3ViUHJvdG9jb2wuUHViU3ViUmVzcG9uc2UgZ2V0U3Vj\nY2Vzc1Jlc3BvbnNlKGxvbmcgdHhuSWQsIFB1YlN1YlByb3RvY29sLk1lc3Nh\nZ2VTZXFJZCBwdWJsaXNoZWRNZXNzYWdlU2VxSWQpIHsKICAgICAgICBpZiAo\nbnVsbCA9PSBwdWJsaXNoZWRNZXNzYWdlU2VxSWQpIHsKICAgICAgICAgICAg\ncmV0dXJuIFB1YlN1YlJlc3BvbnNlVXRpbHMuZ2V0U3VjY2Vzc1Jlc3BvbnNl\nKHR4bklkKTsKICAgICAgICB9CiAgICAgICAgUHViU3ViUHJvdG9jb2wuUHVi\nbGlzaFJlc3BvbnNlIHB1Ymxpc2hSZXNwb25zZSA9IFB1YlN1YlByb3RvY29s\nLlB1Ymxpc2hSZXNwb25zZS5uZXdCdWlsZGVyKCkuc2V0UHVibGlzaGVkTXNn\nSWQocHVibGlzaGVkTWVzc2FnZVNlcUlkKS5idWlsZCgpOwogICAgICAgIFB1\nYlN1YlByb3RvY29sLlJlc3BvbnNlQm9keSByZXNwb25zZUJvZHkgPSBQdWJT\ndWJQcm90b2NvbC5SZXNwb25zZUJvZHkubmV3QnVpbGRlcigpLnNldFB1Ymxp\nc2hSZXNwb25zZShwdWJsaXNoUmVzcG9uc2UpLmJ1aWxkKCk7CiAgICAgICAg\ncmV0dXJuIFB1YlN1YlByb3RvY29sLlB1YlN1YlJlc3BvbnNlLm5ld0J1aWxk\nZXIoKS4KICAgICAgICAgICAgc2V0UHJvdG9jb2xWZXJzaW9uKFB1YlN1YlJl\nc3BvbnNlVXRpbHMuc2VydmVyVmVyc2lvbikuCiAgICAgICAgICAgIHNldFN0\nYXR1c0NvZGUoUHViU3ViUHJvdG9jb2wuU3RhdHVzQ29kZS5TVUNDRVNTKS5z\nZXRUeG5JZCh0eG5JZCkuCiAgICAgICAgICAgIHNldFJlc3BvbnNlQm9keShy\nZXNwb25zZUJvZHkpLmJ1aWxkKCk7CiAgICB9Cn0K\n","encoding":"base64"}

