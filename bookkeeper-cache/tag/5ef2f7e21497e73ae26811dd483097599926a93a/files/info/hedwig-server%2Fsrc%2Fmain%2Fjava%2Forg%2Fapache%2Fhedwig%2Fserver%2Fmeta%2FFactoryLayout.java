{"sha":"b13a203584cae4abffcdb201518d652ed5ae718f","node_id":"MDQ6QmxvYjE1NzU5NTY6YjEzYTIwMzU4NGNhZTRhYmZmY2RiMjAxNTE4ZDY1MmVkNWFlNzE4Zg==","size":5532,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/b13a203584cae4abffcdb201518d652ed5ae718f","content":"cGFja2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIubWV0YTsKCi8qKgog\nKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24g\nKEFTRikgdW5kZXIgb25lCiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5z\nZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQogKiBkaXN0cmli\ndXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlv\nbgogKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0Yg\nbGljZW5zZXMgdGhpcyBmaWxlCiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hl\nIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUKICogIkxpY2Vuc2UiKTsgeW91\nIG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZQog\nKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9m\nIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBz\nb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4\ncHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUg\nc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAog\nKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgppbXBvcnQg\namF2YS5pby5CdWZmZXJlZFJlYWRlcjsKaW1wb3J0IGphdmEuaW8uSU9FeGNl\ncHRpb247CmltcG9ydCBqYXZhLmlvLlN0cmluZ1JlYWRlcjsKCmltcG9ydCBv\ncmcuYXBhY2hlLnpvb2tlZXBlci5DcmVhdGVNb2RlOwppbXBvcnQgb3JnLmFw\nYWNoZS56b29rZWVwZXIuS2VlcGVyRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFw\nYWNoZS56b29rZWVwZXIuWm9vRGVmcy5JZHM7CmltcG9ydCBvcmcuYXBhY2hl\nLnpvb2tlZXBlci5ab29LZWVwZXI7CgppbXBvcnQgb3JnLnNsZjRqLkxvZ2dl\ncjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJGYWN0b3J5OwoKaW1wb3J0IGNv\nbS5nb29nbGUucHJvdG9idWYuVGV4dEZvcm1hdDsKaW1wb3J0IGNvbS5nb29n\nbGUucHJvdG9idWYuSW52YWxpZFByb3RvY29sQnVmZmVyRXhjZXB0aW9uOwpp\nbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcucHJvdG9jb2wuUHViU3ViUHJvdG9j\nb2wuTWFuYWdlck1ldGE7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2\nZXIuY29tbW9uLlNlcnZlckNvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBh\nY2hlLmhlZHdpZy56b29rZWVwZXIuWmtVdGlsczsKCi8qKgogKiBUaGlzIGNs\nYXNzIGVuY2Fwc3VsYXRlcyBtZXRhZGF0YSBtYW5hZ2VyIGxheW91dCBpbmZv\ncm1hdGlvbgogKiB0aGF0IGlzIHBlcnNpc3RlbnRseSBzdG9yZWQgaW4gem9v\na2VlcGVyLgogKiBJdCBwcm92aWRlcyBwYXJzaW5nIGFuZCBzZXJpYWxpemF0\naW9uIG1ldGhvZHMgb2Ygc3VjaCBpbmZvcm1hdGlvbi4KICoKICovCnB1Ymxp\nYyBjbGFzcyBGYWN0b3J5TGF5b3V0IHsKICAgIHN0YXRpYyBmaW5hbCBMb2dn\nZXIgbG9nZ2VyID0gTG9nZ2VyRmFjdG9yeS5nZXRMb2dnZXIoRmFjdG9yeUxh\neW91dC5jbGFzcyk7CgogICAgLy8gbWV0YWRhdGEgbWFuYWdlciBuYW1lCiAg\nICBwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBOQU1FID0gIk1FVEFEQVRB\nIjsKICAgIC8vIFpub2RlIG5hbWUgdG8gc3RvcmUgbGF5b3V0IGluZm9ybWF0\naW9uCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBMQVlPVVRfWk5P\nREUgPSAiTEFZT1VUIjsKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgU3RyaW5n\nIExTRVAgPSAiXG4iOwoKICAgIHByaXZhdGUgTWFuYWdlck1ldGEgbWFuYWdl\nck1ldGE7CgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3QgbWV0YWRhdGEgbWFu\nYWdlciBmYWN0b3J5IGxheW91dC4KICAgICAqCiAgICAgKiBAcGFyYW0gbWV0\nYQogICAgICogICAgICAgICAgTWV0YSBkZXNjcmliZXMgd2hhdCBraW5kIG9m\nIGZhY3RvcnkgdXNlZC4KICAgICAqLwogICAgcHVibGljIEZhY3RvcnlMYXlv\ndXQoTWFuYWdlck1ldGEgbWV0YSkgewogICAgICAgIHRoaXMubWFuYWdlck1l\ndGEgPSBtZXRhOwogICAgfQoKICAgIHB1YmxpYyBzdGF0aWMgU3RyaW5nIGdl\ndEZhY3RvcnlMYXlvdXRQYXRoKFN0cmluZ0J1aWxkZXIgc2IsIFNlcnZlckNv\nbmZpZ3VyYXRpb24gY2ZnKSB7CiAgICAgICAgcmV0dXJuIGNmZy5nZXRaa01h\nbmFnZXJzUHJlZml4KHNiKS5hcHBlbmQoIi8iKS5hcHBlbmQoTkFNRSkKICAg\nICAgICAgICAgICAgLmFwcGVuZCgiLyIpLmFwcGVuZChMQVlPVVRfWk5PREUp\nLnRvU3RyaW5nKCk7CiAgICB9CgogICAgcHVibGljIE1hbmFnZXJNZXRhIGdl\ndE1hbmFnZXJNZXRhKCkgewogICAgICAgIHJldHVybiBtYW5hZ2VyTWV0YTsK\nICAgIH0KCiAgICAvKioKICAgICAqIFN0b3JlIHRoZSBmYWN0b3J5IGxheW91\ndCBpbnRvIHpvb2tlZXBlcgogICAgICoKICAgICAqIEBwYXJhbSB6awogICAg\nICogICAgICAgICAgWm9vS2VlcGVyIEhhbmRsZQogICAgICogQHBhcmFtIGNm\nZwogICAgICogICAgICAgICAgU2VydmVyIENvbmZpZ3VyYXRpb24gT2JqZWN0\nCiAgICAgKiBAdGhyb3dzIEtlZXBlckV4Y2VwdGlvbgogICAgICogQHRocm93\ncyBJT0V4Y2VwdGlvbgogICAgICogQHRocm93cyBJbnRlcnJ1cHRlZEV4Y2Vw\ndGlvbgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzdG9yZShab29LZWVwZXIg\nemssIFNlcnZlckNvbmZpZ3VyYXRpb24gY2ZnKQogICAgdGhyb3dzIEtlZXBl\nckV4Y2VwdGlvbiwgSU9FeGNlcHRpb24sIEludGVycnVwdGVkRXhjZXB0aW9u\nIHsKICAgICAgICBTdHJpbmcgZmFjdG9yeUxheW91dFBhdGggPSBnZXRGYWN0\nb3J5TGF5b3V0UGF0aChuZXcgU3RyaW5nQnVpbGRlcigpLCBjZmcpOwoKICAg\nICAgICBieXRlW10gbGF5b3V0RGF0YSA9IFRleHRGb3JtYXQucHJpbnRUb1N0\ncmluZyhtYW5hZ2VyTWV0YSkuZ2V0Qnl0ZXMoKTsKICAgICAgICBaa1V0aWxz\nLmNyZWF0ZUZ1bGxQYXRoT3B0aW1pc3RpYyh6aywgZmFjdG9yeUxheW91dFBh\ndGgsIGxheW91dERhdGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgSWRzLk9QRU5fQUNMX1VOU0FGRSwgQ3JlYXRlTW9kZS5Q\nRVJTSVNURU5UKTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBp\nbnQgaGFzaENvZGUoKSB7CiAgICAgICAgcmV0dXJuIG1hbmFnZXJNZXRhLmhh\nc2hDb2RlKCk7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgYm9v\nbGVhbiBlcXVhbHMoT2JqZWN0IG8pIHsKICAgICAgICBpZiAobnVsbCA9PSBv\nIHx8CiAgICAgICAgICAgICEobyBpbnN0YW5jZW9mIEZhY3RvcnlMYXlvdXQp\nKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAg\nICAgRmFjdG9yeUxheW91dCBvdGhlciA9IChGYWN0b3J5TGF5b3V0KW87CiAg\nICAgICAgcmV0dXJuIG1hbmFnZXJNZXRhLmVxdWFscyhvdGhlci5tYW5hZ2Vy\nTWV0YSk7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgU3RyaW5n\nIHRvU3RyaW5nKCkgewogICAgICAgIHJldHVybiBUZXh0Rm9ybWF0LnByaW50\nVG9TdHJpbmcobWFuYWdlck1ldGEpOwogICAgfQoKICAgIC8qKgogICAgICog\nUmVhZCBmYWN0b3J5IGxheW91dCBmcm9tIHpvb2tlZXBlcgogICAgICoKICAg\nICAqIEBwYXJhbSB6awogICAgICogICAgICAgICAgWm9vS2VlcGVyIENsaWVu\ndAogICAgICogQHBhcmFtIGNmZwogICAgICogICAgICAgICAgU2VydmVyIGNv\nbmZpZ3VyYXRpb24gb2JqZWN0CiAgICAgKiBAcmV0dXJuIEZhY3RvcnkgbGF5\nb3V0LCBvciBudWxsIGlmIG5vbmUgc2V0IGluIHpvb2tlZXBlcgogICAgICov\nCiAgICBwdWJsaWMgc3RhdGljIEZhY3RvcnlMYXlvdXQgcmVhZExheW91dChm\naW5hbCBab29LZWVwZXIgemssCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICBmaW5hbCBTZXJ2ZXJDb25maWd1cmF0aW9uIGNm\nZykKICAgIHRocm93cyBJT0V4Y2VwdGlvbiwgS2VlcGVyRXhjZXB0aW9uIHsK\nICAgICAgICBTdHJpbmcgZmFjdG9yeUxheW91dFBhdGggPSBnZXRGYWN0b3J5\nTGF5b3V0UGF0aChuZXcgU3RyaW5nQnVpbGRlcigpLCBjZmcpOwogICAgICAg\nIGJ5dGVbXSBsYXlvdXREYXRhOwogICAgICAgIHRyeSB7CiAgICAgICAgICAg\nIGxheW91dERhdGEgPSB6ay5nZXREYXRhKGZhY3RvcnlMYXlvdXRQYXRoLCBm\nYWxzZSwgbnVsbCk7CiAgICAgICAgfSBjYXRjaCAoS2VlcGVyRXhjZXB0aW9u\nLk5vTm9kZUV4Y2VwdGlvbiBubmUpIHsKICAgICAgICAgICAgcmV0dXJuIG51\nbGw7CiAgICAgICAgfSBjYXRjaCAoSW50ZXJydXB0ZWRFeGNlcHRpb24gaWUp\nIHsKICAgICAgICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKGllKTsKICAg\nICAgICB9CiAgICAgICAgTWFuYWdlck1ldGEgbWV0YTsKICAgICAgICB0cnkg\newogICAgICAgICAgICBCdWZmZXJlZFJlYWRlciByZWFkZXIgPSBuZXcgQnVm\nZmVyZWRSZWFkZXIoCiAgICAgICAgICAgICAgICBuZXcgU3RyaW5nUmVhZGVy\nKG5ldyBTdHJpbmcobGF5b3V0RGF0YSkpKTsKICAgICAgICAgICAgTWFuYWdl\nck1ldGEuQnVpbGRlciBtZXRhQnVpbGRlciA9IE1hbmFnZXJNZXRhLm5ld0J1\naWxkZXIoKTsKICAgICAgICAgICAgVGV4dEZvcm1hdC5tZXJnZShyZWFkZXIs\nIG1ldGFCdWlsZGVyKTsKICAgICAgICAgICAgbWV0YSA9IG1ldGFCdWlsZGVy\nLmJ1aWxkKCk7CiAgICAgICAgfSBjYXRjaCAoSW52YWxpZFByb3RvY29sQnVm\nZmVyRXhjZXB0aW9uIGlwYmUpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IElP\nRXhjZXB0aW9uKCJDb3JydXB0ZWQgZmFjdG9yeSBsYXlvdXQgOiAiLCBpcGJl\nKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBuZXcgRmFjdG9yeUxheW91\ndChtZXRhKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJlbW92ZSB0aGUgZmFj\ndG9yeSBsYXlvdXQgZnJvbSBab29LZWVwZXIuCiAgICAgKgogICAgICogQHBh\ncmFtIHprCiAgICAgKiAgICAgICAgICBab29LZWVwZXIgaW5zdGFuY2UKICAg\nICAqIEBwYXJhbSBjZmcKICAgICAqICAgICAgICAgIFNlcnZlciBjb25maWd1\ncmF0aW9uIG9iamVjdAogICAgICogQHRocm93cyBLZWVwZXJFeGNlcHRpb24K\nICAgICAqIEB0aHJvd3MgSW50ZXJydXB0ZWRFeGNlcHRpb24KICAgICAqLwog\nICAgcHVibGljIHN0YXRpYyB2b2lkIGRlbGV0ZUxheW91dChab29LZWVwZXIg\nemssIFNlcnZlckNvbmZpZ3VyYXRpb24gY2ZnKQogICAgICAgICAgICB0aHJv\nd3MgS2VlcGVyRXhjZXB0aW9uLCBJbnRlcnJ1cHRlZEV4Y2VwdGlvbiB7CiAg\nICAgICAgU3RyaW5nIGZhY3RvcnlMYXlvdXRQYXRoID0gZ2V0RmFjdG9yeUxh\neW91dFBhdGgobmV3IFN0cmluZ0J1aWxkZXIoKSwgY2ZnKTsKICAgICAgICB6\nay5kZWxldGUoZmFjdG9yeUxheW91dFBhdGgsIC0xKTsKICAgIH0KCn0K\n","encoding":"base64"}

