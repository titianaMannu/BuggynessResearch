{"sha":"6605b1ee65897dc505bdf4a0e62e625d9895f034","node_id":"MDQ6QmxvYjE1NzU5NTY6NjYwNWIxZWU2NTg5N2RjNTA1YmRmNGEwZTYyZTYyNWQ5ODk1ZjAzNA==","size":40943,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/6605b1ee65897dc505bdf4a0e62e625d9895f034","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIubWV0YTsKCmltcG9ydCBq\nYXZhLmlvLklPRXhjZXB0aW9uOwppbXBvcnQgamF2YS5pby5VbnN1cHBvcnRl\nZEVuY29kaW5nRXhjZXB0aW9uOwppbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9y\nOwppbXBvcnQgamF2YS51dGlsLk1hcDsKaW1wb3J0IGphdmEudXRpbC5jb25j\ndXJyZW50LkNvbmN1cnJlbnRIYXNoTWFwOwoKaW1wb3J0IGNvbS5nb29nbGUu\ncHJvdG9idWYuQnl0ZVN0cmluZzsKaW1wb3J0IGNvbS5nb29nbGUucHJvdG9i\ndWYuVGV4dEZvcm1hdDsKaW1wb3J0IGNvbS5nb29nbGUucHJvdG9idWYuVGV4\ndEZvcm1hdC5QYXJzZUV4Y2VwdGlvbjsKCmltcG9ydCBvcmcuc2xmNGouTG9n\nZ2VyOwppbXBvcnQgb3JnLnNsZjRqLkxvZ2dlckZhY3Rvcnk7CgppbXBvcnQg\nb3JnLmFwYWNoZS5ib29ra2VlcGVyLm1ldGFzdG9yZS5NZXRhU3RvcmU7Cmlt\ncG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIubWV0YXN0b3JlLk1ldGFzdG9y\nZUNhbGxiYWNrOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLm1ldGFz\ndG9yZS5NZXRhc3RvcmVDdXJzb3I7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2tr\nZWVwZXIubWV0YXN0b3JlLk1ldGFzdG9yZUN1cnNvci5SZWFkRW50cmllc0Nh\nbGxiYWNrOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLm1ldGFzdG9y\nZS5NZXRhc3RvcmVFeGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hlLmJvb2tr\nZWVwZXIubWV0YXN0b3JlLk1ldGFzdG9yZUZhY3Rvcnk7CmltcG9ydCBvcmcu\nYXBhY2hlLmJvb2trZWVwZXIubWV0YXN0b3JlLk1ldGFzdG9yZVNjYW5uYWJs\nZVRhYmxlOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLm1ldGFzdG9y\nZS5NZXRhc3RvcmVTY2FubmFibGVUYWJsZS5PcmRlcjsKaW1wb3J0IG9yZy5h\ncGFjaGUuYm9va2tlZXBlci5tZXRhc3RvcmUuTWV0YXN0b3JlVGFibGU7Cmlt\ncG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIubWV0YXN0b3JlLk1ldGFzdG9y\nZVV0aWxzOwoKaW1wb3J0IHN0YXRpYyBvcmcuYXBhY2hlLmJvb2trZWVwZXIu\nbWV0YXN0b3JlLk1ldGFzdG9yZVRhYmxlLio7CmltcG9ydCBvcmcuYXBhY2hl\nLmJvb2trZWVwZXIubWV0YXN0b3JlLk1ldGFzdG9yZVRhYmxlSXRlbTsKaW1w\nb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5tZXRhc3RvcmUuTVNFeGNlcHRp\nb247CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIubWV0YXN0b3JlLlZh\nbHVlOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLnZlcnNpb25pbmcu\nVmVyc2lvbjsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci52ZXJzaW9u\naW5nLlZlcnNpb25lZDsKCmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5leGNl\ncHRpb25zLlB1YlN1YkV4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVk\nd2lnLnByb3RvY29sLlB1YlN1YlByb3RvY29sLkxlZGdlclJhbmdlczsKaW1w\nb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnByb3RvY29sLlB1YlN1YlByb3RvY29s\nLlN0YXR1c0NvZGU7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2Nv\nbC5QdWJTdWJQcm90b2NvbC5TdWJzY3JpcHRpb25EYXRhOwppbXBvcnQgb3Jn\nLmFwYWNoZS5oZWR3aWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2wuU3Vic2Ny\naXB0aW9uUHJlZmVyZW5jZXM7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5w\ncm90b2NvbC5QdWJTdWJQcm90b2NvbC5TdWJzY3JpcHRpb25TdGF0ZTsKaW1w\nb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnByb3RvZXh0ZW5zaW9ucy5TdWJzY3Jp\ncHRpb25TdGF0ZVV0aWxzOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuc2Vy\ndmVyLmNvbW1vbi5TZXJ2ZXJDb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFw\nYWNoZS5oZWR3aWcuc2VydmVyLnRvcGljcy5IdWJJbmZvOwppbXBvcnQgb3Jn\nLmFwYWNoZS5oZWR3aWcudXRpbC5DYWxsYmFjazsKCmltcG9ydCBvcmcuYXBh\nY2hlLnpvb2tlZXBlci5ab29LZWVwZXI7CgovKioKICogTWV0YWRhdGFNYW5h\nZ2VyRmFjdG9yeSBmb3IgcGx1Zy1pbiBtZXRhZGF0YSBzdG9yYWdlLgogKi8K\ncHVibGljIGNsYXNzIE1zTWV0YWRhdGFNYW5hZ2VyRmFjdG9yeSBleHRlbmRz\nIE1ldGFkYXRhTWFuYWdlckZhY3RvcnkgewogICAgcHJvdGVjdGVkIGZpbmFs\nIHN0YXRpYyBMb2dnZXIgbG9nZ2VyID0gTG9nZ2VyRmFjdG9yeS5nZXRMb2dn\nZXIoTXNNZXRhZGF0YU1hbmFnZXJGYWN0b3J5LmNsYXNzKTsKCiAgICBzdGF0\naWMgZmluYWwgU3RyaW5nIFVURjggPSAiVVRGLTgiOwoKICAgIHN0YXRpYyBm\naW5hbCBpbnQgQ1VSX1ZFUlNJT04gPSAxOwoKICAgIHN0YXRpYyBmaW5hbCBT\ndHJpbmcgT1dORVJfVEFCTEVfTkFNRSA9ICJvd25lciI7CiAgICBzdGF0aWMg\nZmluYWwgU3RyaW5nIFBFUlNJU1RfVEFCTEVfTkFNRSA9ICJwZXJzaXN0IjsK\nICAgIHN0YXRpYyBmaW5hbCBTdHJpbmcgU1VCX1RBQkxFX05BTUUgPSAic3Vi\nIjsKCiAgICBzdGF0aWMgY2xhc3MgU3luY1Jlc3VsdDxUPiB7CiAgICAgICAg\nVCB2YWx1ZTsKICAgICAgICBpbnQgcmM7CiAgICAgICAgYm9vbGVhbiBmaW5p\nc2hlZCA9IGZhbHNlOwoKICAgICAgICBwdWJsaWMgc3luY2hyb25pemVkIHZv\naWQgY29tcGxldGUoaW50IHJjLCBUIHZhbHVlKSB7CiAgICAgICAgICAgIHRo\naXMucmMgPSByYzsKICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlOwog\nICAgICAgICAgICBmaW5pc2hlZCA9IHRydWU7CgogICAgICAgICAgICBub3Rp\nZnkoKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBzeW5jaHJvbml6ZWQg\ndm9pZCBibG9jaygpIHRocm93cyBJbnRlcnJ1cHRlZEV4Y2VwdGlvbiB7CiAg\nICAgICAgICAgIHdoaWxlICghZmluaXNoZWQpIHsKICAgICAgICAgICAgICAg\nIHdhaXQoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcHVi\nbGljIGludCBnZXRSZXR1cm5Db2RlKCkgewogICAgICAgICAgICByZXR1cm4g\ncmM7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgVCBnZXRWYWx1ZSgpIHsK\nICAgICAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICAgIH0KICAgIH0KCiAg\nICBNZXRhU3RvcmUgbWV0YXN0b3JlOwogICAgTWV0YXN0b3JlVGFibGUgb3du\nZXJUYWJsZTsKICAgIE1ldGFzdG9yZVRhYmxlIHBlcnNpc3RUYWJsZTsKICAg\nIE1ldGFzdG9yZVNjYW5uYWJsZVRhYmxlIHN1YlRhYmxlOwogICAgU2VydmVy\nQ29uZmlndXJhdGlvbiBjZmc7CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMg\nTWV0YWRhdGFNYW5hZ2VyRmFjdG9yeSBpbml0aWFsaXplKFNlcnZlckNvbmZp\nZ3VyYXRpb24gY2ZnLCBab29LZWVwZXIgemssIGludCB2ZXJzaW9uKSB0aHJv\nd3MgSU9FeGNlcHRpb24gewogICAgICAgIGlmIChDVVJfVkVSU0lPTiAhPSB2\nZXJzaW9uKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlvbigi\nSW5jb21wYXRpYmxlIE1zTWV0YWRhdGFNYW5hZ2VyRmFjdG9yeSB2ZXJzaW9u\nICIgKyB2ZXJzaW9uCiAgICAgICAgICAgICAgICAgICAgKyAiIGZvdW5kLCBl\neHBlY3RlZCB2ZXJzaW9uICIgKyBDVVJfVkVSU0lPTik7CiAgICAgICAgfQog\nICAgICAgIHRoaXMuY2ZnID0gY2ZnOwogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIG1ldGFzdG9yZSA9IE1ldGFzdG9yZUZhY3RvcnkuY3JlYXRlTWV0YVN0\nb3JlKGNmZy5nZXRNZXRhc3RvcmVJbXBsQ2xhc3MoKSk7CiAgICAgICAgICAg\nIC8vIFRPRE86IG5lZWQgdG8gc3RvcmUgbWV0YXN0b3JlIGNsYXNzIGFuZCB2\nZXJzaW9uIGluIHNvbWUgcGxhY2UuCiAgICAgICAgICAgIG1ldGFzdG9yZS5p\nbml0KGNmZy5nZXRDb25mKCksIG1ldGFzdG9yZS5nZXRWZXJzaW9uKCkpOwog\nICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIHRo\ncm93IG5ldyBJT0V4Y2VwdGlvbigiTG9hZCBtZXRhc3RvcmUgZmFpbGVkIDog\nIiwgZSk7CiAgICAgICAgfQoKICAgICAgICB0cnkgewogICAgICAgICAgICBv\nd25lclRhYmxlID0gbWV0YXN0b3JlLmNyZWF0ZVRhYmxlKE9XTkVSX1RBQkxF\nX05BTUUpOwogICAgICAgICAgICBpZiAob3duZXJUYWJsZSA9PSBudWxsKSB7\nCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSU9FeGNlcHRpb24oImNyZWF0\nZSBvd25lciB0YWJsZSBmYWlsZWQiKTsKICAgICAgICAgICAgfQoKICAgICAg\nICAgICAgcGVyc2lzdFRhYmxlID0gbWV0YXN0b3JlLmNyZWF0ZVRhYmxlKFBF\nUlNJU1RfVEFCTEVfTkFNRSk7CiAgICAgICAgICAgIGlmIChwZXJzaXN0VGFi\nbGUgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IElPRXhj\nZXB0aW9uKCJjcmVhdGUgcGVyc2lzdGVuY2UgdGFibGUgZmFpbGVkIik7CiAg\nICAgICAgICAgIH0KCiAgICAgICAgICAgIHN1YlRhYmxlID0gbWV0YXN0b3Jl\nLmNyZWF0ZVNjYW5uYWJsZVRhYmxlKFNVQl9UQUJMRV9OQU1FKTsKICAgICAg\nICAgICAgaWYgKHN1YlRhYmxlID09IG51bGwpIHsKICAgICAgICAgICAgICAg\nIHRocm93IG5ldyBJT0V4Y2VwdGlvbigiY3JlYXRlIHN1YnNjcmlwdGlvbiB0\nYWJsZSBmYWlsZWQiKTsKICAgICAgICAgICAgfQogICAgICAgIH0gY2F0Y2gg\nKE1ldGFzdG9yZUV4Y2VwdGlvbiBtZSkgewogICAgICAgICAgICB0aHJvdyBu\nZXcgSU9FeGNlcHRpb24oIkZhaWxlZCB0byBjcmVhdGUgdGFibGVzIDogIiwg\nbWUpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9Cgog\nICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgaW50IGdldEN1cnJlbnRWZXJzaW9u\nKCkgewogICAgICAgIHJldHVybiBDVVJfVkVSU0lPTjsKICAgIH0KCiAgICBA\nT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIHNodXRkb3duKCkgewogICAgICAg\nIGlmIChtZXRhc3RvcmUgPT0gbnVsbCkgewogICAgICAgICAgICByZXR1cm47\nCiAgICAgICAgfQoKICAgICAgICBpZiAob3duZXJUYWJsZSAhPSBudWxsKSB7\nCiAgICAgICAgICAgIG93bmVyVGFibGUuY2xvc2UoKTsKICAgICAgICAgICAg\nb3duZXJUYWJsZSA9IG51bGw7CiAgICAgICAgfQoKICAgICAgICBpZiAocGVy\nc2lzdFRhYmxlICE9IG51bGwpIHsKICAgICAgICAgICAgcGVyc2lzdFRhYmxl\nLmNsb3NlKCk7CiAgICAgICAgICAgIHBlcnNpc3RUYWJsZSA9IG51bGw7CiAg\nICAgICAgfQoKICAgICAgICBpZiAoc3ViVGFibGUgIT0gbnVsbCkgewogICAg\nICAgICAgICBzdWJUYWJsZS5jbG9zZSgpOwogICAgICAgICAgICBzdWJUYWJs\nZSA9IG51bGw7CiAgICAgICAgfQoKICAgICAgICBtZXRhc3RvcmUuY2xvc2Uo\nKTsKICAgICAgICBtZXRhc3RvcmUgPSBudWxsOwogICAgfQoKICAgIEBPdmVy\ncmlkZQogICAgcHVibGljIEl0ZXJhdG9yPEJ5dGVTdHJpbmc+IGdldFRvcGlj\ncygpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgU3luY1Jlc3VsdDxN\nZXRhc3RvcmVDdXJzb3I+IHN5biA9IG5ldyBTeW5jUmVzdWx0PE1ldGFzdG9y\nZUN1cnNvcj4oKTsKICAgICAgICBwZXJzaXN0VGFibGUub3BlbkN1cnNvcihO\nT05fRklFTERTLCBuZXcgTWV0YXN0b3JlQ2FsbGJhY2s8TWV0YXN0b3JlQ3Vy\nc29yPigpIHsKICAgICAgICAgICAgcHVibGljIHZvaWQgY29tcGxldGUoaW50\nIHJjLCBNZXRhc3RvcmVDdXJzb3IgY3Vyc29yLCBPYmplY3QgY3R4KSB7CiAg\nICAgICAgICAgICAgICBAU3VwcHJlc3NXYXJuaW5ncygidW5jaGVja2VkIikK\nICAgICAgICAgICAgICAgIFN5bmNSZXN1bHQ8TWV0YXN0b3JlQ3Vyc29yPiBz\neW4gPSAoU3luY1Jlc3VsdDxNZXRhc3RvcmVDdXJzb3I+KSBjdHg7CiAgICAg\nICAgICAgICAgICBzeW4uY29tcGxldGUocmMsIGN1cnNvcik7CiAgICAgICAg\nICAgIH0KICAgICAgICB9LCBzeW4pOwogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIHN5bi5ibG9jaygpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBl\nKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlvbigiSW50ZXJy\ndXB0ZWQgb24gZ2V0dGluZyB0b3BpY3MgbGlzdCA6ICIsIGUpOwogICAgICAg\nIH0KCiAgICAgICAgaWYgKHN5bi5nZXRSZXR1cm5Db2RlKCkgIT0gTVNFeGNl\ncHRpb24uQ29kZS5PSy5nZXRDb2RlKCkpIHsKICAgICAgICAgICAgdGhyb3cg\nbmV3IElPRXhjZXB0aW9uKCJGYWlsZWQgdG8gZ2V0IHRvcGljcyA6ICIsIE1T\nRXhjZXB0aW9uLmNyZWF0ZSgKICAgICAgICAgICAgICAgICAgICBNU0V4Y2Vw\ndGlvbi5Db2RlLmdldChzeW4uZ2V0UmV0dXJuQ29kZSgpKSwgIiIpKTsKICAg\nICAgICB9CgogICAgICAgIGZpbmFsIE1ldGFzdG9yZUN1cnNvciBjdXJzb3Ig\nPSBzeW4uZ2V0VmFsdWUoKTsKICAgICAgICByZXR1cm4gbmV3IEl0ZXJhdG9y\nPEJ5dGVTdHJpbmc+KCkgewogICAgICAgICAgICBJdGVyYXRvcjxNZXRhc3Rv\ncmVUYWJsZUl0ZW0+IGl0ZW1JdGVyID0gbnVsbDsKCiAgICAgICAgICAgIEBP\ndmVycmlkZQogICAgICAgICAgICBwdWJsaWMgYm9vbGVhbiBoYXNOZXh0KCkg\newogICAgICAgICAgICAgICAgd2hpbGUgKG51bGwgPT0gaXRlbUl0ZXIgfHwg\nIWl0ZW1JdGVyLmhhc05leHQoKSkgewogICAgICAgICAgICAgICAgICAgIGlm\nICghY3Vyc29yLmhhc01vcmVFbnRyaWVzKCkpIHsKICAgICAgICAgICAgICAg\nICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0K\nCiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAg\nICAgICAgaXRlbUl0ZXIgPSBjdXJzb3IucmVhZEVudHJpZXMoY2ZnLmdldE1l\ndGFzdG9yZU1heEVudHJpZXNQZXJTY2FuKCkpOwogICAgICAgICAgICAgICAg\nICAgIH0gY2F0Y2ggKE1TRXhjZXB0aW9uIG1zZSkgewogICAgICAgICAgICAg\nICAgICAgICAgICBsb2dnZXIud2FybigiSW50ZXJydXB0ZWQgd2hlbiBpdGVy\nYXRpbmcgdGhlIHRvcGljcyBsaXN0IDogIiwgbXNlKTsKICAgICAgICAgICAg\nICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAg\nIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0\ncnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBAT3ZlcnJpZGUKICAg\nICAgICAgICAgcHVibGljIEJ5dGVTdHJpbmcgbmV4dCgpIHsKICAgICAgICAg\nICAgICAgIE1ldGFzdG9yZVRhYmxlSXRlbSB0ID0gaXRlbUl0ZXIubmV4dCgp\nOwogICAgICAgICAgICAgICAgcmV0dXJuIEJ5dGVTdHJpbmcuY29weUZyb21V\ndGY4KHQuZ2V0S2V5KCkpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBA\nT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIHZvaWQgcmVtb3ZlKCkgewog\nICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9u\nRXhjZXB0aW9uKCJEb2Vzbid0IHN1cHBvcnQgcmVtb3ZlIHRvcGljIGZyb20g\ndG9waWMgaXRlcmF0b3IuIik7CiAgICAgICAgICAgIH0KICAgICAgICB9Owog\nICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIFRvcGljT3duZXJzaGlw\nTWFuYWdlciBuZXdUb3BpY093bmVyc2hpcE1hbmFnZXIoKSB7CiAgICAgICAg\ncmV0dXJuIG5ldyBNc1RvcGljT3duZXJzaGlwTWFuYWdlckltcGwob3duZXJU\nYWJsZSk7CiAgICB9CgogICAgc3RhdGljIGNsYXNzIE1zVG9waWNPd25lcnNo\naXBNYW5hZ2VySW1wbCBpbXBsZW1lbnRzIFRvcGljT3duZXJzaGlwTWFuYWdl\nciB7CgogICAgICAgIHN0YXRpYyBmaW5hbCBTdHJpbmcgT1dORVJfRklFTEQg\nPSAib3duZXIiOwoKICAgICAgICBmaW5hbCBNZXRhc3RvcmVUYWJsZSBvd25l\nclRhYmxlOwoKICAgICAgICBNc1RvcGljT3duZXJzaGlwTWFuYWdlckltcGwo\nTWV0YXN0b3JlVGFibGUgb3duZXJUYWJsZSkgewogICAgICAgICAgICB0aGlz\nLm93bmVyVGFibGUgPSBvd25lclRhYmxlOwogICAgICAgIH0KCiAgICAgICAg\nQE92ZXJyaWRlCiAgICAgICAgcHVibGljIHZvaWQgY2xvc2UoKSB0aHJvd3Mg\nSU9FeGNlcHRpb24gewogICAgICAgICAgICAvLyBkbyBub3RoaW5nCiAgICAg\nICAgfQoKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgdm9pZCBy\nZWFkT3duZXJJbmZvKGZpbmFsIEJ5dGVTdHJpbmcgdG9waWMsIGZpbmFsIENh\nbGxiYWNrPFZlcnNpb25lZDxIdWJJbmZvPj4gY2FsbGJhY2ssIE9iamVjdCBj\ndHgpIHsKICAgICAgICAgICAgb3duZXJUYWJsZS5nZXQodG9waWMudG9TdHJp\nbmdVdGY4KCksIG5ldyBNZXRhc3RvcmVDYWxsYmFjazxWZXJzaW9uZWQ8VmFs\ndWU+PigpIHsKICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAg\nICAgICAgcHVibGljIHZvaWQgY29tcGxldGUoaW50IHJjLCBWZXJzaW9uZWQ8\nVmFsdWU+IHZhbHVlLCBPYmplY3QgY3R4KSB7CiAgICAgICAgICAgICAgICAg\nICAgaWYgKE1TRXhjZXB0aW9uLkNvZGUuTm9LZXkuZ2V0Q29kZSgpID09IHJj\nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLm9wZXJhdGlv\nbkZpbmlzaGVkKGN0eCwgbnVsbCk7CiAgICAgICAgICAgICAgICAgICAgICAg\nIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAg\nICAgICAgIGlmIChNU0V4Y2VwdGlvbi5Db2RlLk9LLmdldENvZGUoKSAhPSBy\nYykgewogICAgICAgICAgICAgICAgICAgICAgICBsb2dFcnJvckFuZEZpbmlz\naE9wZXJhdGlvbigiQ291bGQgbm90IHJlYWQgb3duZXJzaGlwIGZvciB0b3Bp\nYyAiICsgdG9waWMudG9TdHJpbmdVdGY4KCksCiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgY2FsbGJhY2ssIGN0eCwgcmMpOwogICAgICAgICAg\nICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQoK\nICAgICAgICAgICAgICAgICAgICBIdWJJbmZvIG93bmVyID0gbnVsbDsKICAg\nICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAg\nICBieXRlW10gZGF0YSA9IHZhbHVlLmdldFZhbHVlKCkuZ2V0RmllbGQoT1dO\nRVJfRklFTEQpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YSAh\nPSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvd25lciA9\nIEh1YkluZm8ucGFyc2UobmV3IFN0cmluZyhkYXRhKSk7CiAgICAgICAgICAg\nICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChI\ndWJJbmZvLkludmFsaWRIdWJJbmZvRXhjZXB0aW9uIGloaWUpIHsKICAgICAg\nICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oIkZhaWxlZCB0byBwYXJz\nZSBodWIgaW5mbyBmb3IgdG9waWMgIiArIHRvcGljLnRvU3RyaW5nVXRmOCgp\nLCBpaGllKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAg\nICAgICAgVmVyc2lvbiB2ZXJzaW9uID0gdmFsdWUuZ2V0VmVyc2lvbigpOwog\nICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLm9wZXJhdGlvbkZpbmlzaGVk\nKGN0eCwgbmV3IFZlcnNpb25lZDxIdWJJbmZvPihvd25lciwgdmVyc2lvbikp\nOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBjdHgpOwogICAg\nICAgIH0KCiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHVibGljIHZvaWQg\nd3JpdGVPd25lckluZm8oZmluYWwgQnl0ZVN0cmluZyB0b3BpYywgZmluYWwg\nSHViSW5mbyBvd25lciwgZmluYWwgVmVyc2lvbiB2ZXJzaW9uLAogICAgICAg\nICAgICAgICAgZmluYWwgQ2FsbGJhY2s8VmVyc2lvbj4gY2FsbGJhY2ssIE9i\namVjdCBjdHgpIHsKICAgICAgICAgICAgVmFsdWUgdmFsdWUgPSBuZXcgVmFs\ndWUoKTsKICAgICAgICAgICAgdmFsdWUuc2V0RmllbGQoT1dORVJfRklFTEQs\nIG93bmVyLnRvU3RyaW5nKCkuZ2V0Qnl0ZXMoKSk7CgogICAgICAgICAgICBv\nd25lclRhYmxlLnB1dCh0b3BpYy50b1N0cmluZ1V0ZjgoKSwgdmFsdWUsIHZl\ncnNpb24sIG5ldyBNZXRhc3RvcmVDYWxsYmFjazxWZXJzaW9uPigpIHsKICAg\nICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgcHVibGlj\nIHZvaWQgY29tcGxldGUoaW50IHJjLCBWZXJzaW9uIHZlciwgT2JqZWN0IGN0\neCkgewogICAgICAgICAgICAgICAgICAgIGlmIChNU0V4Y2VwdGlvbi5Db2Rl\nLk9LLmdldENvZGUoKSA9PSByYykgewogICAgICAgICAgICAgICAgICAgICAg\nICBjYWxsYmFjay5vcGVyYXRpb25GaW5pc2hlZChjdHgsIHZlcik7CiAgICAg\nICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAg\nICB9IGVsc2UgaWYgKE1TRXhjZXB0aW9uLkNvZGUuTm9LZXkuZ2V0Q29kZSgp\nID09IHJjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vIG5vZGUK\nICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sub3BlcmF0aW9uRmFp\nbGVkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eCwKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQdWJTdWJFeGNlcHRpb24u\nY3JlYXRlKFN0YXR1c0NvZGUuTk9fVE9QSUNfT1dORVJfSU5GTywgIk5vIG93\nbmVyIGluZm8gZm91bmQgZm9yIHRvcGljICIKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICsgdG9waWMudG9TdHJpbmdVdGY4KCkp\nKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAg\nICAgICAgICAgIH0gZWxzZSBpZiAoTVNFeGNlcHRpb24uQ29kZS5LZXlFeGlz\ndHMuZ2V0Q29kZSgpID09IHJjKSB7CiAgICAgICAgICAgICAgICAgICAgICAg\nIC8vIGtleSBleGlzdHMKICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJh\nY2sub3BlcmF0aW9uRmFpbGVkKAogICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIGN0eCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQ\ndWJTdWJFeGNlcHRpb24uY3JlYXRlKFN0YXR1c0NvZGUuVE9QSUNfT1dORVJf\nSU5GT19FWElTVFMsICJPd25lciBpbmZvIG9mIHRvcGljICIKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgdG9waWMudG9TdHJp\nbmdVdGY4KCkgKyAiIGV4aXN0ZWQuIikpOwogICAgICAgICAgICAgICAgICAg\nICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChN\nU0V4Y2VwdGlvbi5Db2RlLkJhZFZlcnNpb24uZ2V0Q29kZSgpID09IHJjKSB7\nCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhZCB2ZXJzaW9uCiAgICAg\nICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLm9wZXJhdGlvbkZhaWxlZChj\ndHgsIFB1YlN1YkV4Y2VwdGlvbi5jcmVhdGUoU3RhdHVzQ29kZS5CQURfVkVS\nU0lPTiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQmFkIHZl\ncnNpb24gcHJvdmlkZWQgdG8gdXBkYXRlIG93bmVyIGluZm8gb2YgdG9waWMg\nIiArIHRvcGljLnRvU3RyaW5nVXRmOCgpKSk7CiAgICAgICAgICAgICAgICAg\nICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugewog\nICAgICAgICAgICAgICAgICAgICAgICBsb2dFcnJvckFuZEZpbmlzaE9wZXJh\ndGlvbigiRmFpbGVkIHRvIHVwZGF0ZSBvd25lcnNoaXAgb2YgdG9waWMgIiAr\nIHRvcGljLnRvU3RyaW5nVXRmOCgpCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgKyAiIHRvICIgKyBvd25lciwgY2FsbGJhY2ssIGN0eCwgcmMp\nOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAg\nICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBj\ndHgpOwogICAgICAgIH0KCiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHVi\nbGljIHZvaWQgZGVsZXRlT3duZXJJbmZvKGZpbmFsIEJ5dGVTdHJpbmcgdG9w\naWMsIFZlcnNpb24gdmVyc2lvbiwgZmluYWwgQ2FsbGJhY2s8Vm9pZD4gY2Fs\nbGJhY2ssCiAgICAgICAgICAgICAgICBPYmplY3QgY3R4KSB7CiAgICAgICAg\nICAgIG93bmVyVGFibGUucmVtb3ZlKHRvcGljLnRvU3RyaW5nVXRmOCgpLCB2\nZXJzaW9uLCBuZXcgTWV0YXN0b3JlQ2FsbGJhY2s8Vm9pZD4oKSB7CiAgICAg\nICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgIHB1YmxpYyB2\nb2lkIGNvbXBsZXRlKGludCByYywgVm9pZCB2YWx1ZSwgT2JqZWN0IGN0eCkg\newogICAgICAgICAgICAgICAgICAgIGlmIChNU0V4Y2VwdGlvbi5Db2RlLk9L\nLmdldENvZGUoKSA9PSByYykgewogICAgICAgICAgICAgICAgICAgICAgICBs\nb2dnZXIuZGVidWcoIlN1Y2Nlc3NmdWxseSBkZWxldGVkIG93bmVyIGluZm8g\nZm9yIHRvcGljIHt9IiwgdG9waWMudG9TdHJpbmdVdGY4KCkpOwogICAgICAg\nICAgICAgICAgICAgICAgICBjYWxsYmFjay5vcGVyYXRpb25GaW5pc2hlZChj\ndHgsIG51bGwpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAg\nICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChNU0V4Y2VwdGlvbi5Db2Rl\nLk5vS2V5LmdldENvZGUoKSA9PSByYykgewogICAgICAgICAgICAgICAgICAg\nICAgICAvLyBubyBub2RlCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxi\nYWNrLm9wZXJhdGlvbkZhaWxlZCgKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICBjdHgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nUHViU3ViRXhjZXB0aW9uLmNyZWF0ZShTdGF0dXNDb2RlLk5PX1RPUElDX09X\nTkVSX0lORk8sICJObyBvd25lciBpbmZvIGZvdW5kIGZvciB0b3BpYyAiCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIHRvcGlj\nLnRvU3RyaW5nVXRmOCgpKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJl\ndHVybjsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKE1TRXhjZXB0\naW9uLkNvZGUuQmFkVmVyc2lvbi5nZXRDb2RlKCkgPT0gcmMpIHsKICAgICAg\nICAgICAgICAgICAgICAgICAgLy8gYmFkIHZlcnNpb24KICAgICAgICAgICAg\nICAgICAgICAgICAgY2FsbGJhY2sub3BlcmF0aW9uRmFpbGVkKGN0eCwgUHVi\nU3ViRXhjZXB0aW9uLmNyZWF0ZShTdGF0dXNDb2RlLkJBRF9WRVJTSU9OLAog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJCYWQgdmVyc2lvbiBw\ncm92aWRlZCB0byBkZWxldGUgb3duZXIgaW5mbyBvZiB0b3BpYyAiICsgdG9w\naWMudG9TdHJpbmdVdGY4KCkpKTsKICAgICAgICAgICAgICAgICAgICAgICAg\ncmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAg\nICAgICAgICAgICAgICAgIGxvZ0Vycm9yQW5kRmluaXNoT3BlcmF0aW9uKCJG\nYWlsZWQgdG8gZGVsZXRlIG93bmVyIGluZm8gZm9yIHRvcGljICIgKyB0b3Bp\nYy50b1N0cmluZ1V0ZjgoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICBjYWxsYmFjaywgY3R4LCByYyk7CiAgICAgICAgICAgICAgICAgICAg\nICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAg\nICAgICB9CiAgICAgICAgICAgIH0sIGN0eCk7CiAgICAgICAgfQogICAgfQoK\nICAgIEBPdmVycmlkZQogICAgcHVibGljIFRvcGljUGVyc2lzdGVuY2VNYW5h\nZ2VyIG5ld1RvcGljUGVyc2lzdGVuY2VNYW5hZ2VyKCkgewogICAgICAgIHJl\ndHVybiBuZXcgTXNUb3BpY1BlcnNpc3RlbmNlTWFuYWdlckltcGwocGVyc2lz\ndFRhYmxlKTsKICAgIH0KCiAgICBzdGF0aWMgY2xhc3MgTXNUb3BpY1BlcnNp\nc3RlbmNlTWFuYWdlckltcGwgaW1wbGVtZW50cyBUb3BpY1BlcnNpc3RlbmNl\nTWFuYWdlciB7CgogICAgICAgIHN0YXRpYyBmaW5hbCBTdHJpbmcgUEVSU0lT\nVF9GSUVMRCA9ICJwcnN0IjsKCiAgICAgICAgZmluYWwgTWV0YXN0b3JlVGFi\nbGUgcGVyc2lzdFRhYmxlOwoKICAgICAgICBNc1RvcGljUGVyc2lzdGVuY2VN\nYW5hZ2VySW1wbChNZXRhc3RvcmVUYWJsZSBwZXJzaXN0VGFibGUpIHsKICAg\nICAgICAgICAgdGhpcy5wZXJzaXN0VGFibGUgPSBwZXJzaXN0VGFibGU7CiAg\nICAgICAgfQoKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgdm9p\nZCBjbG9zZSgpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgICAgIC8v\nIGRvIG5vdGhpbmcKICAgICAgICB9CgogICAgICAgIEBPdmVycmlkZQogICAg\nICAgIHB1YmxpYyB2b2lkIHJlYWRUb3BpY1BlcnNpc3RlbmNlSW5mbyhmaW5h\nbCBCeXRlU3RyaW5nIHRvcGljLCBmaW5hbCBDYWxsYmFjazxWZXJzaW9uZWQ8\nTGVkZ2VyUmFuZ2VzPj4gY2FsbGJhY2ssCiAgICAgICAgICAgICAgICBPYmpl\nY3QgY3R4KSB7CiAgICAgICAgICAgIHBlcnNpc3RUYWJsZS5nZXQodG9waWMu\ndG9TdHJpbmdVdGY4KCksIG5ldyBNZXRhc3RvcmVDYWxsYmFjazxWZXJzaW9u\nZWQ8VmFsdWU+PigpIHsKICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAg\nICAgICAgICAgICAgcHVibGljIHZvaWQgY29tcGxldGUoaW50IHJjLCBWZXJz\naW9uZWQ8VmFsdWU+IHZhbHVlLCBPYmplY3QgY3R4KSB7CiAgICAgICAgICAg\nICAgICAgICAgaWYgKE1TRXhjZXB0aW9uLkNvZGUuT0suZ2V0Q29kZSgpID09\nIHJjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJ5dGVbXSBkYXRhID0g\ndmFsdWUuZ2V0VmFsdWUoKS5nZXRGaWVsZChQRVJTSVNUX0ZJRUxEKTsKICAg\nICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEgIT0gbnVsbCkgewogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VBbmRSZXR1cm5Ub3BpY0xl\nZGdlclJhbmdlcyh0b3BpYywgZGF0YSwgdmFsdWUuZ2V0VmVyc2lvbigpLCBj\nYWxsYmFjaywgY3R4KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNl\nIHsgLy8gbnVsbCBkYXRhIGlzIHNhbWUgYXMgTm9LZXkKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIGNhbGxiYWNrLm9wZXJhdGlvbkZpbmlzaGVkKGN0\neCwgbnVsbCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAg\nICAgICAgICAgICB9IGVsc2UgaWYgKE1TRXhjZXB0aW9uLkNvZGUuTm9LZXku\nZ2V0Q29kZSgpID09IHJjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNh\nbGxiYWNrLm9wZXJhdGlvbkZpbmlzaGVkKGN0eCwgbnVsbCk7CiAgICAgICAg\nICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAg\nbG9nRXJyb3JBbmRGaW5pc2hPcGVyYXRpb24oIkNvdWxkIG5vdCByZWFkIGxl\nZGdlcnMgbm9kZSBmb3IgdG9waWMgIiArIHRvcGljLnRvU3RyaW5nVXRmOCgp\nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLCBj\ndHgsIHJjKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAg\nICB9CiAgICAgICAgICAgIH0sIGN0eCk7CiAgICAgICAgfQoKICAgICAgICAv\nKioKICAgICAgICAgKiBQYXJzZSBsZWRnZXIgcmFuZ2VzIGRhdGEgYW5kIHJl\ndHVybiBpdCB0aHJ1IGNhbGxiYWNrLgogICAgICAgICAqCiAgICAgICAgICog\nQHBhcmFtIHRvcGljCiAgICAgICAgICogICAgICAgICAgICBUb3BpYyBuYW1l\nCiAgICAgICAgICogQHBhcmFtIGRhdGEKICAgICAgICAgKiAgICAgICAgICAg\nIFRvcGljIExlZGdlciBSYW5nZXMgZGF0YQogICAgICAgICAqIEBwYXJhbSB2\nZXJzaW9uCiAgICAgICAgICogICAgICAgICAgICBWZXJzaW9uIG9mIHRoZSB0\nb3BpYyBsZWRnZXIgcmFuZ2VzIGRhdGEKICAgICAgICAgKiBAcGFyYW0gY2Fs\nbGJhY2sKICAgICAgICAgKiAgICAgICAgICAgIENhbGxiYWNrIHRvIHJldHVy\nbiBsZWRnZXIgcmFuZ2VzCiAgICAgICAgICogQHBhcmFtIGN0eAogICAgICAg\nICAqICAgICAgICAgICAgQ29udGV4dCBvZiB0aGUgY2FsbGJhY2sKICAgICAg\nICAgKi8KICAgICAgICBwcml2YXRlIHZvaWQgcGFyc2VBbmRSZXR1cm5Ub3Bp\nY0xlZGdlclJhbmdlcyhCeXRlU3RyaW5nIHRvcGljLCBieXRlW10gZGF0YSwg\nVmVyc2lvbiB2ZXJzaW9uLAogICAgICAgICAgICAgICAgQ2FsbGJhY2s8VmVy\nc2lvbmVkPExlZGdlclJhbmdlcz4+IGNhbGxiYWNrLCBPYmplY3QgY3R4KSB7\nCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBMZWRnZXJSYW5n\nZXMuQnVpbGRlciByYW5nZXNCdWlsZGVyID0gTGVkZ2VyUmFuZ2VzLm5ld0J1\naWxkZXIoKTsKICAgICAgICAgICAgICAgIFRleHRGb3JtYXQubWVyZ2UobmV3\nIFN0cmluZyhkYXRhLCBVVEY4KSwgcmFuZ2VzQnVpbGRlcik7CiAgICAgICAg\nICAgICAgICBMZWRnZXJSYW5nZXMgbHIgPSByYW5nZXNCdWlsZGVyLmJ1aWxk\nKCk7CiAgICAgICAgICAgICAgICBWZXJzaW9uZWQ8TGVkZ2VyUmFuZ2VzPiBy\nYW5nZXMgPSBuZXcgVmVyc2lvbmVkPExlZGdlclJhbmdlcz4obHIsIHZlcnNp\nb24pOwogICAgICAgICAgICAgICAgY2FsbGJhY2sub3BlcmF0aW9uRmluaXNo\nZWQoY3R4LCByYW5nZXMpOwogICAgICAgICAgICB9IGNhdGNoIChQYXJzZUV4\nY2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAgICBTdHJpbmdCdWlsZGVyIHNi\nID0gbmV3IFN0cmluZ0J1aWxkZXIoKTsKICAgICAgICAgICAgICAgIHNiLmFw\ncGVuZCgiTGVkZ2VyIHJhbmdlcyBmb3IgdG9waWMgIikuYXBwZW5kKHRvcGlj\nLnRvU3RyaW5nVXRmOCgpKQogICAgICAgICAgICAgICAgICAgICAgICAuYXBw\nZW5kKCIgY291bGQgbm90IGJlIGRlc2VyaWFsaXplZC4iKTsKICAgICAgICAg\nICAgICAgIFN0cmluZyBtc2cgPSBzYi50b1N0cmluZygpOwogICAgICAgICAg\nICAgICAgbG9nZ2VyLmVycm9yKG1zZywgZSk7CiAgICAgICAgICAgICAgICBj\nYWxsYmFjay5vcGVyYXRpb25GYWlsZWQoY3R4LCBuZXcgUHViU3ViRXhjZXB0\naW9uLlVuZXhwZWN0ZWRDb25kaXRpb25FeGNlcHRpb24obXNnKSk7CiAgICAg\nICAgICAgIH0gY2F0Y2ggKFVuc3VwcG9ydGVkRW5jb2RpbmdFeGNlcHRpb24g\ndWVlKSB7CiAgICAgICAgICAgICAgICBTdHJpbmdCdWlsZGVyIHNiID0gbmV3\nIFN0cmluZ0J1aWxkZXIoKTsKICAgICAgICAgICAgICAgIHNiLmFwcGVuZCgi\nTGVkZ2VyIHJhbmdlcyBmb3IgdG9waWMgIikuYXBwZW5kKHRvcGljLnRvU3Ry\naW5nVXRmOCgpKS5hcHBlbmQoIiBpcyBub3QgVVRGLTggZW5jb2RlZC4iKTsK\nICAgICAgICAgICAgICAgIFN0cmluZyBtc2cgPSBzYi50b1N0cmluZygpOwog\nICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKG1zZywgdWVlKTsKICAgICAg\nICAgICAgICAgIGNhbGxiYWNrLm9wZXJhdGlvbkZhaWxlZChjdHgsIG5ldyBQ\ndWJTdWJFeGNlcHRpb24uVW5leHBlY3RlZENvbmRpdGlvbkV4Y2VwdGlvbiht\nc2cpKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgQE92ZXJy\naWRlCiAgICAgICAgcHVibGljIHZvaWQgd3JpdGVUb3BpY1BlcnNpc3RlbmNl\nSW5mbyhmaW5hbCBCeXRlU3RyaW5nIHRvcGljLCBMZWRnZXJSYW5nZXMgcmFu\nZ2VzLCBmaW5hbCBWZXJzaW9uIHZlcnNpb24sCiAgICAgICAgICAgICAgICBm\naW5hbCBDYWxsYmFjazxWZXJzaW9uPiBjYWxsYmFjaywgT2JqZWN0IGN0eCkg\newogICAgICAgICAgICBWYWx1ZSB2YWx1ZSA9IG5ldyBWYWx1ZSgpOwogICAg\nICAgICAgICB2YWx1ZS5zZXRGaWVsZChQRVJTSVNUX0ZJRUxELCBUZXh0Rm9y\nbWF0LnByaW50VG9TdHJpbmcocmFuZ2VzKS5nZXRCeXRlcygpKTsKCiAgICAg\nICAgICAgIHBlcnNpc3RUYWJsZS5wdXQodG9waWMudG9TdHJpbmdVdGY4KCks\nIHZhbHVlLCB2ZXJzaW9uLCBuZXcgTWV0YXN0b3JlQ2FsbGJhY2s8VmVyc2lv\nbj4oKSB7CiAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAg\nICAgIHB1YmxpYyB2b2lkIGNvbXBsZXRlKGludCByYywgVmVyc2lvbiB2ZXIs\nIE9iamVjdCBjdHgpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoTVNFeGNl\ncHRpb24uQ29kZS5PSy5nZXRDb2RlKCkgPT0gcmMpIHsKICAgICAgICAgICAg\nICAgICAgICAgICAgY2FsbGJhY2sub3BlcmF0aW9uRmluaXNoZWQoY3R4LCB2\nZXIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAg\nICAgICAgICAgICAgfSBlbHNlIGlmIChNU0V4Y2VwdGlvbi5Db2RlLk5vS2V5\nLmdldENvZGUoKSA9PSByYykgewogICAgICAgICAgICAgICAgICAgICAgICAv\nLyBubyBub2RlCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLm9w\nZXJhdGlvbkZhaWxlZChjdHgsIFB1YlN1YkV4Y2VwdGlvbi5jcmVhdGUoU3Rh\ndHVzQ29kZS5OT19UT1BJQ19QRVJTSVNURU5DRV9JTkZPLAogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICJObyBwZXJzaXN0ZW5jZSBpbmZvIGZv\ndW5kIGZvciB0b3BpYyAiICsgdG9waWMudG9TdHJpbmdVdGY4KCkpKTsKICAg\nICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAg\nICAgIH0gZWxzZSBpZiAoTVNFeGNlcHRpb24uQ29kZS5LZXlFeGlzdHMuZ2V0\nQ29kZSgpID09IHJjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGtl\neSBleGlzdHMKICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sub3Bl\ncmF0aW9uRmFpbGVkKGN0eCwgUHViU3ViRXhjZXB0aW9uLmNyZWF0ZShTdGF0\ndXNDb2RlLlRPUElDX1BFUlNJU1RFTkNFX0lORk9fRVhJU1RTLAogICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICJQZXJzaXN0ZW5jZSBpbmZvIG9m\nIHRvcGljICIgKyB0b3BpYy50b1N0cmluZ1V0ZjgoKSArICIgZXhpc3RlZC4i\nKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAg\nICAgICAgICAgICB9IGVsc2UgaWYgKE1TRXhjZXB0aW9uLkNvZGUuQmFkVmVy\nc2lvbi5nZXRDb2RlKCkgPT0gcmMpIHsKICAgICAgICAgICAgICAgICAgICAg\nICAgLy8gYmFkIHZlcnNpb24KICAgICAgICAgICAgICAgICAgICAgICAgY2Fs\nbGJhY2sub3BlcmF0aW9uRmFpbGVkKGN0eCwgUHViU3ViRXhjZXB0aW9uLmNy\nZWF0ZShTdGF0dXNDb2RlLkJBRF9WRVJTSU9OLAogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICJCYWQgdmVyc2lvbiBwcm92aWRlZCB0byB1cGRh\ndGUgcGVyc2lzdGVuY2UgaW5mbyBvZiB0b3BpYyAiICsgdG9waWMudG9TdHJp\nbmdVdGY4KCkpKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwog\nICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAg\nICAgICAgIGxvZ0Vycm9yQW5kRmluaXNoT3BlcmF0aW9uKCJDb3VsZCBub3Qg\nd3JpdGUgbGVkZ2VycyBub2RlIGZvciB0b3BpYyAiICsgdG9waWMudG9TdHJp\nbmdVdGY4KCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2Fs\nbGJhY2ssIGN0eCwgcmMpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAg\nICAgICAgICAgIH0KICAgICAgICAgICAgfSwgY3R4KTsKICAgICAgICB9Cgog\nICAgICAgIEBPdmVycmlkZQogICAgICAgIHB1YmxpYyB2b2lkIGRlbGV0ZVRv\ncGljUGVyc2lzdGVuY2VJbmZvKGZpbmFsIEJ5dGVTdHJpbmcgdG9waWMsIGZp\nbmFsIFZlcnNpb24gdmVyc2lvbiwKICAgICAgICAgICAgICAgIGZpbmFsIENh\nbGxiYWNrPFZvaWQ+IGNhbGxiYWNrLCBPYmplY3QgY3R4KSB7CiAgICAgICAg\nICAgIHBlcnNpc3RUYWJsZS5yZW1vdmUodG9waWMudG9TdHJpbmdVdGY4KCks\nIHZlcnNpb24sIG5ldyBNZXRhc3RvcmVDYWxsYmFjazxWb2lkPigpIHsKICAg\nICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgcHVibGlj\nIHZvaWQgY29tcGxldGUoaW50IHJjLCBWb2lkIHZhbHVlLCBPYmplY3QgY3R4\nKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKE1TRXhjZXB0aW9uLkNvZGUu\nT0suZ2V0Q29kZSgpID09IHJjKSB7CiAgICAgICAgICAgICAgICAgICAgICAg\nIGxvZ2dlci5kZWJ1ZygiU3VjY2Vzc2Z1bGx5IGRlbGV0ZWQgcGVyc2lzdGVu\nY2UgaW5mbyBmb3IgdG9waWMge30uIiwgdG9waWMudG9TdHJpbmdVdGY4KCkp\nOwogICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5vcGVyYXRpb25G\naW5pc2hlZChjdHgsIG51bGwpOwogICAgICAgICAgICAgICAgICAgICAgICBy\nZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChNU0V4Y2Vw\ndGlvbi5Db2RlLk5vS2V5LmdldENvZGUoKSA9PSByYykgewogICAgICAgICAg\nICAgICAgICAgICAgICAvLyBubyBub2RlCiAgICAgICAgICAgICAgICAgICAg\nICAgIGNhbGxiYWNrLm9wZXJhdGlvbkZhaWxlZChjdHgsIFB1YlN1YkV4Y2Vw\ndGlvbi5jcmVhdGUoU3RhdHVzQ29kZS5OT19UT1BJQ19QRVJTSVNURU5DRV9J\nTkZPLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJObyBwZXJz\naXN0ZW5jZSBpbmZvIGZvdW5kIGZvciB0b3BpYyAiICsgdG9waWMudG9TdHJp\nbmdVdGY4KCkpKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwog\nICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoTVNFeGNlcHRpb24uQ29k\nZS5CYWRWZXJzaW9uLmdldENvZGUoKSA9PSByYykgewogICAgICAgICAgICAg\nICAgICAgICAgICAvLyBiYWQgdmVyc2lvbgogICAgICAgICAgICAgICAgICAg\nICAgICBjYWxsYmFjay5vcGVyYXRpb25GYWlsZWQoY3R4LCBQdWJTdWJFeGNl\ncHRpb24uY3JlYXRlKFN0YXR1c0NvZGUuQkFEX1ZFUlNJT04sCiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgIkJhZCB2ZXJzaW9uIHByb3ZpZGVk\nIHRvIGRlbGV0ZSBwZXJzaXN0ZW5jZSBpbmZvIG9mIHRvcGljICIgKyB0b3Bp\nYy50b1N0cmluZ1V0ZjgoKSkpOwogICAgICAgICAgICAgICAgICAgICAgICBy\nZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAg\nICAgICAgICAgICAgICAgbG9nRXJyb3JBbmRGaW5pc2hPcGVyYXRpb24oIkZh\naWxlZCB0byBkZWxldGUgcGVyc2lzdGVuY2UgaW5mbyB0b3BpYzogIiArIHRv\ncGljLnRvU3RyaW5nVXRmOCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgKyAiLCB2ZXJzaW9uOiAiICsgdmVyc2lvbiwgY2FsbGJhY2ssIGN0\neCwgcmMsIFN0YXR1c0NvZGUuU0VSVklDRV9ET1dOKTsKICAgICAgICAgICAg\nICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KICAg\nICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgY3R4KTsKICAgICAgICB9\nCiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgU3Vic2NyaXB0aW9u\nRGF0YU1hbmFnZXIgbmV3U3Vic2NyaXB0aW9uRGF0YU1hbmFnZXIoKSB7CiAg\nICAgICAgcmV0dXJuIG5ldyBNc1N1YnNjcmlwdGlvbkRhdGFNYW5hZ2VySW1w\nbChjZmcsIHN1YlRhYmxlKTsKICAgIH0KCiAgICBzdGF0aWMgY2xhc3MgTXNT\ndWJzY3JpcHRpb25EYXRhTWFuYWdlckltcGwgaW1wbGVtZW50cyBTdWJzY3Jp\ncHRpb25EYXRhTWFuYWdlciB7CgogICAgICAgIHN0YXRpYyBmaW5hbCBTdHJp\nbmcgU1VCX1NUQVRFX0ZJRUxEID0gInN1Yl9zdGF0ZSI7CiAgICAgICAgc3Rh\ndGljIGZpbmFsIFN0cmluZyBTVUJfUFJFRlNfRklFTEQgPSAic3ViX3ByZWZl\ncmVuY2VzIjsKCiAgICAgICAgc3RhdGljIGZpbmFsIGNoYXIgVE9QSUNfU1VC\nX0ZJUlNUX1NFUEFSQVRPUiA9ICdcMDAxJzsKICAgICAgICBzdGF0aWMgZmlu\nYWwgY2hhciBUT1BJQ19TVUJfTEFTVF9TRVBBUkFUT1IgPSAnXDAwMic7Cgog\nICAgICAgIGZpbmFsIFNlcnZlckNvbmZpZ3VyYXRpb24gY2ZnOwogICAgICAg\nIGZpbmFsIE1ldGFzdG9yZVNjYW5uYWJsZVRhYmxlIHN1YlRhYmxlOwoKICAg\nICAgICBNc1N1YnNjcmlwdGlvbkRhdGFNYW5hZ2VySW1wbChTZXJ2ZXJDb25m\naWd1cmF0aW9uIGNmZywgTWV0YXN0b3JlU2Nhbm5hYmxlVGFibGUgc3ViVGFi\nbGUpIHsKICAgICAgICAgICAgdGhpcy5jZmcgPSBjZmc7CiAgICAgICAgICAg\nIHRoaXMuc3ViVGFibGUgPSBzdWJUYWJsZTsKICAgICAgICB9CgogICAgICAg\nIEBPdmVycmlkZQogICAgICAgIHB1YmxpYyB2b2lkIGNsb3NlKCkgdGhyb3dz\nIElPRXhjZXB0aW9uIHsKICAgICAgICAgICAgLy8gZG8gbm90aGluZwogICAg\nICAgIH0KCiAgICAgICAgcHJpdmF0ZSBTdHJpbmcgZ2V0U3Vic2NyaXB0aW9u\nS2V5KEJ5dGVTdHJpbmcgdG9waWMsIEJ5dGVTdHJpbmcgc3Vic2NyaWJlcklk\nKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgU3RyaW5nQnVpbGRlcih0b3Bp\nYy50b1N0cmluZ1V0ZjgoKSkuYXBwZW5kKFRPUElDX1NVQl9GSVJTVF9TRVBB\nUkFUT1IpCiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChzdWJzY3JpYmVy\nSWQudG9TdHJpbmdVdGY4KCkpLnRvU3RyaW5nKCk7CiAgICAgICAgfQoKICAg\nICAgICBwcml2YXRlIFZhbHVlIHN1YnNjcmlwdGlvbkRhdGEyVmFsdWUoU3Vi\nc2NyaXB0aW9uRGF0YSBzdWJEYXRhKSB7CiAgICAgICAgICAgIFZhbHVlIHZh\nbHVlID0gbmV3IFZhbHVlKCk7CiAgICAgICAgICAgIGlmIChzdWJEYXRhLmhh\nc1N0YXRlKCkpIHsKICAgICAgICAgICAgICAgIHZhbHVlLnNldEZpZWxkKFNV\nQl9TVEFURV9GSUVMRCwgVGV4dEZvcm1hdC5wcmludFRvU3RyaW5nKHN1YkRh\ndGEuZ2V0U3RhdGUoKSkuZ2V0Qnl0ZXMoKSk7CiAgICAgICAgICAgIH0KICAg\nICAgICAgICAgaWYgKHN1YkRhdGEuaGFzUHJlZmVyZW5jZXMoKSkgewogICAg\nICAgICAgICAgICAgdmFsdWUuc2V0RmllbGQoU1VCX1BSRUZTX0ZJRUxELCBU\nZXh0Rm9ybWF0LnByaW50VG9TdHJpbmcoc3ViRGF0YS5nZXRQcmVmZXJlbmNl\ncygpKS5nZXRCeXRlcygpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBy\nZXR1cm4gdmFsdWU7CiAgICAgICAgfQoKICAgICAgICBAT3ZlcnJpZGUKICAg\nICAgICBwdWJsaWMgdm9pZCBjcmVhdGVTdWJzY3JpcHRpb25EYXRhKGZpbmFs\nIEJ5dGVTdHJpbmcgdG9waWMsIGZpbmFsIEJ5dGVTdHJpbmcgc3Vic2NyaWJl\ncklkLAogICAgICAgICAgICAgICAgZmluYWwgU3Vic2NyaXB0aW9uRGF0YSBz\ndWJEYXRhLCBmaW5hbCBDYWxsYmFjazxWZXJzaW9uPiBjYWxsYmFjaywgT2Jq\nZWN0IGN0eCkgewogICAgICAgICAgICBTdHJpbmcga2V5ID0gZ2V0U3Vic2Ny\naXB0aW9uS2V5KHRvcGljLCBzdWJzY3JpYmVySWQpOwogICAgICAgICAgICBW\nYWx1ZSB2YWx1ZSA9IHN1YnNjcmlwdGlvbkRhdGEyVmFsdWUoc3ViRGF0YSk7\nCgogICAgICAgICAgICBzdWJUYWJsZS5wdXQoa2V5LCB2YWx1ZSwgVmVyc2lv\nbi5ORVcsIG5ldyBNZXRhc3RvcmVDYWxsYmFjazxWZXJzaW9uPigpIHsKICAg\nICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgcHVibGlj\nIHZvaWQgY29tcGxldGUoaW50IHJjLCBWZXJzaW9uIHZlciwgT2JqZWN0IGN0\neCkgewogICAgICAgICAgICAgICAgICAgIGlmIChyYyA9PSBNU0V4Y2VwdGlv\nbi5Db2RlLk9LLmdldENvZGUoKSkgewogICAgICAgICAgICAgICAgICAgICAg\nICBpZiAobG9nZ2VyLmlzRGVidWdFbmFibGVkKCkpIHsKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygiU3VjY2Vzc2Z1bGx5IGNy\nZWF0ZSBzdWJzY3JpcHRpb24gZm9yIHRvcGljOiAiICsgdG9waWMudG9TdHJp\nbmdVdGY4KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nKyAiLCBzdWJzY3JpYmVySWQ6ICIgKyBzdWJzY3JpYmVySWQudG9TdHJpbmdV\ndGY4KCkgKyAiLCBkYXRhOiAiCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICsgU3Vic2NyaXB0aW9uU3RhdGVVdGlscy50b1N0cmluZyhz\ndWJEYXRhKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAg\nICAgICAgICAgICAgICAgY2FsbGJhY2sub3BlcmF0aW9uRmluaXNoZWQoY3R4\nLCB2ZXIpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmMgPT0g\nTVNFeGNlcHRpb24uQ29kZS5LZXlFeGlzdHMuZ2V0Q29kZSgpKSB7CiAgICAg\nICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLm9wZXJhdGlvbkZhaWxlZChj\ndHgsIFB1YlN1YkV4Y2VwdGlvbi5jcmVhdGUoCiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgU3RhdHVzQ29kZS5TVUJTQ1JJUFRJT05fU1RBVEVf\nRVhJU1RTLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJTdWJz\nY3JpcHRpb24gZGF0YSBmb3IgKHRvcGljOiIgKyB0b3BpYy50b1N0cmluZ1V0\nZjgoKSArICIsIHN1YnNjcmliZXI6IgogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgKyBzdWJzY3JpYmVySWQudG9TdHJpbmdVdGY4\nKCkgKyAiKSBleGlzdGVkLiIpKTsKICAgICAgICAgICAgICAgICAgICAgICAg\ncmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAg\nICAgICAgICAgICAgICAgIGxvZ0Vycm9yQW5kRmluaXNoT3BlcmF0aW9uKCJG\nYWlsZWQgdG8gY3JlYXRlIHRvcGljOiAiICsgdG9waWMudG9TdHJpbmdVdGY4\nKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArICIsIHN1YnNj\ncmliZXJJZDogIiArIHN1YnNjcmliZXJJZC50b1N0cmluZ1V0ZjgoKSArICIs\nIGRhdGE6ICIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIFN1\nYnNjcmlwdGlvblN0YXRlVXRpbHMudG9TdHJpbmcoc3ViRGF0YSksIGNhbGxi\nYWNrLCBjdHgsIHJjKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAg\nICAgICAgICB9CiAgICAgICAgICAgIH0sIGN0eCk7CiAgICAgICAgfQoKICAg\nICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgYm9vbGVhbiBpc1BhcnRp\nYWxVcGRhdGVTdXBwb3J0ZWQoKSB7CiAgICAgICAgICAgIC8vIFRPRE86IEhl\ncmUgd2UgYXNzdW1lIE1ldGFzdG9yZSBzdXBwb3J0IHBhcnRpYWwgdXBkYXRl\nLCBidXQgdGhpcwogICAgICAgICAgICAvLyBtYXliZSBpbmNvcnJlY3QuCiAg\nICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgQE92\nZXJyaWRlCiAgICAgICAgcHVibGljIHZvaWQgcmVwbGFjZVN1YnNjcmlwdGlv\nbkRhdGEoZmluYWwgQnl0ZVN0cmluZyB0b3BpYywgZmluYWwgQnl0ZVN0cmlu\nZyBzdWJzY3JpYmVySWQsCiAgICAgICAgICAgICAgICBmaW5hbCBTdWJzY3Jp\ncHRpb25EYXRhIHN1YkRhdGEsIGZpbmFsIFZlcnNpb24gdmVyc2lvbiwgZmlu\nYWwgQ2FsbGJhY2s8VmVyc2lvbj4gY2FsbGJhY2ssCiAgICAgICAgICAgICAg\nICBmaW5hbCBPYmplY3QgY3R4KSB7CiAgICAgICAgICAgIHVwZGF0ZVN1YnNj\ncmlwdGlvbkRhdGEodG9waWMsIHN1YnNjcmliZXJJZCwgc3ViRGF0YSwgdmVy\nc2lvbiwgY2FsbGJhY2ssIGN0eCk7CiAgICAgICAgfQoKICAgICAgICBAT3Zl\ncnJpZGUKICAgICAgICBwdWJsaWMgdm9pZCB1cGRhdGVTdWJzY3JpcHRpb25E\nYXRhKGZpbmFsIEJ5dGVTdHJpbmcgdG9waWMsIGZpbmFsIEJ5dGVTdHJpbmcg\nc3Vic2NyaWJlcklkLAogICAgICAgICAgICAgICAgZmluYWwgU3Vic2NyaXB0\naW9uRGF0YSBzdWJEYXRhLCBmaW5hbCBWZXJzaW9uIHZlcnNpb24sIGZpbmFs\nIENhbGxiYWNrPFZlcnNpb24+IGNhbGxiYWNrLAogICAgICAgICAgICAgICAg\nZmluYWwgT2JqZWN0IGN0eCkgewogICAgICAgICAgICBTdHJpbmcga2V5ID0g\nZ2V0U3Vic2NyaXB0aW9uS2V5KHRvcGljLCBzdWJzY3JpYmVySWQpOwogICAg\nICAgICAgICBWYWx1ZSB2YWx1ZSA9IHN1YnNjcmlwdGlvbkRhdGEyVmFsdWUo\nc3ViRGF0YSk7CgogICAgICAgICAgICBzdWJUYWJsZS5wdXQoa2V5LCB2YWx1\nZSwgdmVyc2lvbiwgbmV3IE1ldGFzdG9yZUNhbGxiYWNrPFZlcnNpb24+KCkg\newogICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICBw\ndWJsaWMgdm9pZCBjb21wbGV0ZShpbnQgcmMsIFZlcnNpb24gdmVyc2lvbiwg\nT2JqZWN0IGN0eCkgewogICAgICAgICAgICAgICAgICAgIGlmIChyYyA9PSBN\nU0V4Y2VwdGlvbi5Db2RlLk9LLmdldENvZGUoKSkgewogICAgICAgICAgICAg\nICAgICAgICAgICBpZiAobG9nZ2VyLmlzRGVidWdFbmFibGVkKCkpIHsKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygiU3VjY2Vz\nc2Z1bGx5IHVwZGF0ZWQgc3Vic2NyaXB0aW9uIGRhdGEgZm9yIHRvcGljOiAi\nICsgdG9waWMudG9TdHJpbmdVdGY4KCkKICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgKyAiLCBzdWJzY3JpYmVySWQ6ICIgKyBzdWJzY3Jp\nYmVySWQudG9TdHJpbmdVdGY4KCkgKyAiLCBkYXRhOiAiCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICsgU3Vic2NyaXB0aW9uU3RhdGVV\ndGlscy50b1N0cmluZyhzdWJEYXRhKSArICIsIHZlcnNpb246ICIgKyB2ZXJz\naW9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAg\nICAgICAgICAgICBjYWxsYmFjay5vcGVyYXRpb25GaW5pc2hlZChjdHgsIHZl\ncnNpb24pOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmMgPT0g\nTVNFeGNlcHRpb24uQ29kZS5Ob0tleS5nZXRDb2RlKCkpIHsKICAgICAgICAg\nICAgICAgICAgICAgICAgLy8gbm8gbm9kZQogICAgICAgICAgICAgICAgICAg\nICAgICBjYWxsYmFjay5vcGVyYXRpb25GYWlsZWQoY3R4LCBQdWJTdWJFeGNl\ncHRpb24uY3JlYXRlKFN0YXR1c0NvZGUuTk9fU1VCU0NSSVBUSU9OX1NUQVRF\nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJObyBzdWJzY3Jp\ncHRpb24gZGF0YSBmb3VuZCBmb3IgKHRvcGljOiIgKyB0b3BpYy50b1N0cmlu\nZ1V0ZjgoKSArICIsIHN1YnNjcmliZXI6IgogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgKyBzdWJzY3JpYmVySWQudG9TdHJpbmdV\ndGY4KCkgKyAiKS4iKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVy\nbjsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJjID09IE1TRXhj\nZXB0aW9uLkNvZGUuQmFkVmVyc2lvbi5nZXRDb2RlKCkpIHsKICAgICAgICAg\nICAgICAgICAgICAgICAgLy8gYmFkIHZlcnNpb24KICAgICAgICAgICAgICAg\nICAgICAgICAgY2FsbGJhY2sub3BlcmF0aW9uRmFpbGVkKGN0eCwgUHViU3Vi\nRXhjZXB0aW9uLmNyZWF0ZShTdGF0dXNDb2RlLkJBRF9WRVJTSU9OLAogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICJCYWQgdmVyc2lvbiBwcm92\naWRlZCB0byB1cGRhdGUgc3Vic2NyaXB0aW9uIGRhdGEgb2YgdG9waWMgIiAr\nIHRvcGljLnRvU3RyaW5nVXRmOCgpCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICArICIgc3Vic2NyaWJlcklkICIgKyBzdWJzY3Jp\nYmVySWQpKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAg\nICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAg\nICAgIGxvZ0Vycm9yQW5kRmluaXNoT3BlcmF0aW9uKAogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICJGYWlsZWQgdG8gdXBkYXRlIHN1YnNjcmlw\ndGlvbiBkYXRhIGZvciB0b3BpYzogIiArIHRvcGljLnRvU3RyaW5nVXRmOCgp\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArICIs\nIHN1YnNjcmliZXJJZDogIiArIHN1YnNjcmliZXJJZC50b1N0cmluZ1V0Zjgo\nKSArICIsIGRhdGE6ICIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICsgU3Vic2NyaXB0aW9uU3RhdGVVdGlscy50b1N0cmluZyhz\ndWJEYXRhKSArICIsIHZlcnNpb246ICIgKyB2ZXJzaW9uLCBjYWxsYmFjaywK\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgsIHJjKTsKICAg\nICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAg\nICAgIH0sIGN0eCk7CiAgICAgICAgfQoKICAgICAgICBAT3ZlcnJpZGUKICAg\nICAgICBwdWJsaWMgdm9pZCBkZWxldGVTdWJzY3JpcHRpb25EYXRhKGZpbmFs\nIEJ5dGVTdHJpbmcgdG9waWMsIGZpbmFsIEJ5dGVTdHJpbmcgc3Vic2NyaWJl\ncklkLCBWZXJzaW9uIHZlcnNpb24sCiAgICAgICAgICAgICAgICBmaW5hbCBD\nYWxsYmFjazxWb2lkPiBjYWxsYmFjaywgT2JqZWN0IGN0eCkgewogICAgICAg\nICAgICBTdHJpbmcga2V5ID0gZ2V0U3Vic2NyaXB0aW9uS2V5KHRvcGljLCBz\ndWJzY3JpYmVySWQpOwogICAgICAgICAgICBzdWJUYWJsZS5yZW1vdmUoa2V5\nLCB2ZXJzaW9uLCBuZXcgTWV0YXN0b3JlQ2FsbGJhY2s8Vm9pZD4oKSB7CiAg\nICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgIHB1Ymxp\nYyB2b2lkIGNvbXBsZXRlKGludCByYywgVm9pZCB2YWx1ZSwgT2JqZWN0IGN0\neCkgewogICAgICAgICAgICAgICAgICAgIGlmIChyYyA9PSBNU0V4Y2VwdGlv\nbi5Db2RlLk9LLmdldENvZGUoKSkgewogICAgICAgICAgICAgICAgICAgICAg\nICBsb2dnZXIuZGVidWcoIlN1Y2Nlc3NmdWxseSBkZWxldGUgc3Vic2NyaXB0\naW9uIGZvciB0b3BpYzoge30sIHN1YnNjcmliZXJJZDoge30uIiwKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICB0b3BpYy50b1N0cmluZ1V0Zjgo\nKSwgc3Vic2NyaWJlcklkLnRvU3RyaW5nVXRmOCgpKTsKICAgICAgICAgICAg\nICAgICAgICAgICAgY2FsbGJhY2sub3BlcmF0aW9uRmluaXNoZWQoY3R4LCBu\ndWxsKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAg\nICAgICAgICAgICAgIH0gZWxzZSBpZiAocmMgPT0gTVNFeGNlcHRpb24uQ29k\nZS5CYWRWZXJzaW9uLmdldENvZGUoKSkgewogICAgICAgICAgICAgICAgICAg\nICAgICAvLyBiYWQgdmVyc2lvbgogICAgICAgICAgICAgICAgICAgICAgICBj\nYWxsYmFjay5vcGVyYXRpb25GYWlsZWQoY3R4LCBQdWJTdWJFeGNlcHRpb24u\nY3JlYXRlKFN0YXR1c0NvZGUuQkFEX1ZFUlNJT04sCiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIkJhZCB2ZXJzaW9uIHByb3ZpZGVkIHRvIGRl\nbGV0ZSBzdWJzY3JpcHRvaW4gZGF0YSBvZiB0b3BpYyAiICsgdG9waWMudG9T\ndHJpbmdVdGY4KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICsgIiBzdWJzY3JpYmVySWQgIiArIHN1YnNjcmliZXJJZCkpOwog\nICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAg\nICAgICAgfSBlbHNlIGlmIChyYyA9PSBNU0V4Y2VwdGlvbi5Db2RlLk5vS2V5\nLmdldENvZGUoKSkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBubyBu\nb2RlCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLm9wZXJhdGlv\nbkZhaWxlZChjdHgsIFB1YlN1YkV4Y2VwdGlvbi5jcmVhdGUoU3RhdHVzQ29k\nZS5OT19TVUJTQ1JJUFRJT05fU1RBVEUsCiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgIk5vIHN1YnNjcmlwdGlvbiBkYXRhIGZvdW5kIGZvciAo\ndG9waWM6IiArIHRvcGljLnRvU3RyaW5nVXRmOCgpICsgIiwgc3Vic2NyaWJl\ncjoiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAr\nIHN1YnNjcmliZXJJZC50b1N0cmluZ1V0ZjgoKSArICIpLiIpKTsKICAgICAg\nICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAg\nIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ0Vycm9yQW5k\nRmluaXNoT3BlcmF0aW9uKCJGYWlsZWQgdG8gZGVsZXRlIHN1YnNjcmlwdGlv\nbiB0b3BpYzogIiArIHRvcGljLnRvU3RyaW5nVXRmOCgpCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgKyAiLCBzdWJzY3JpYmVySWQ6ICIgKyBz\ndWJzY3JpYmVySWQudG9TdHJpbmdVdGY4KCksIGNhbGxiYWNrLCBjdHgsIHJj\nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0YXR1c0NvZGUu\nU0VSVklDRV9ET1dOKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAg\nICAgICAgICB9CiAgICAgICAgICAgIH0sIGN0eCk7CiAgICAgICAgfQoKICAg\nICAgICBwcml2YXRlIFN1YnNjcmlwdGlvbkRhdGEgdmFsdWUyU3Vic2NyaXB0\naW9uRGF0YShWYWx1ZSB2YWx1ZSkgdGhyb3dzIFBhcnNlRXhjZXB0aW9uLAog\nICAgICAgICAgICAgICAgVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiB7\nCiAgICAgICAgICAgIFN1YnNjcmlwdGlvbkRhdGEuQnVpbGRlciBidWlsZGVy\nID0gU3Vic2NyaXB0aW9uRGF0YS5uZXdCdWlsZGVyKCk7CgogICAgICAgICAg\nICBieXRlW10gc3RhdGVEYXRhID0gdmFsdWUuZ2V0RmllbGQoU1VCX1NUQVRF\nX0ZJRUxEKTsKICAgICAgICAgICAgaWYgKG51bGwgIT0gc3RhdGVEYXRhKSB7\nCiAgICAgICAgICAgICAgICBTdWJzY3JpcHRpb25TdGF0ZS5CdWlsZGVyIHN0\nYXRlQnVpbGRlciA9IFN1YnNjcmlwdGlvblN0YXRlLm5ld0J1aWxkZXIoKTsK\nICAgICAgICAgICAgICAgIFRleHRGb3JtYXQubWVyZ2UobmV3IFN0cmluZyhz\ndGF0ZURhdGEsIFVURjgpLCBzdGF0ZUJ1aWxkZXIpOwogICAgICAgICAgICAg\nICAgU3Vic2NyaXB0aW9uU3RhdGUgc3RhdGUgPSBzdGF0ZUJ1aWxkZXIuYnVp\nbGQoKTsKICAgICAgICAgICAgICAgIGJ1aWxkZXIuc2V0U3RhdGUoc3RhdGUp\nOwogICAgICAgICAgICB9CgogICAgICAgICAgICBieXRlW10gcHJlZnNEYXRh\nID0gdmFsdWUuZ2V0RmllbGQoU1VCX1BSRUZTX0ZJRUxEKTsKICAgICAgICAg\nICAgaWYgKG51bGwgIT0gcHJlZnNEYXRhKSB7CiAgICAgICAgICAgICAgICBT\ndWJzY3JpcHRpb25QcmVmZXJlbmNlcy5CdWlsZGVyIHByZWZlcmVuY2VzQnVp\nbGRlciA9IFN1YnNjcmlwdGlvblByZWZlcmVuY2VzLm5ld0J1aWxkZXIoKTsK\nICAgICAgICAgICAgICAgIFRleHRGb3JtYXQubWVyZ2UobmV3IFN0cmluZyhw\ncmVmc0RhdGEsIFVURjgpLCBwcmVmZXJlbmNlc0J1aWxkZXIpOwogICAgICAg\nICAgICAgICAgU3Vic2NyaXB0aW9uUHJlZmVyZW5jZXMgcHJlZmVyZW5jZXMg\nPSBwcmVmZXJlbmNlc0J1aWxkZXIuYnVpbGQoKTsKICAgICAgICAgICAgICAg\nIGJ1aWxkZXIuc2V0UHJlZmVyZW5jZXMocHJlZmVyZW5jZXMpOwogICAgICAg\nICAgICB9CgogICAgICAgICAgICByZXR1cm4gYnVpbGRlci5idWlsZCgpOwog\nICAgICAgIH0KCiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHVibGljIHZv\naWQgcmVhZFN1YnNjcmlwdGlvbkRhdGEoZmluYWwgQnl0ZVN0cmluZyB0b3Bp\nYywgZmluYWwgQnl0ZVN0cmluZyBzdWJzY3JpYmVySWQsCiAgICAgICAgICAg\nICAgICBmaW5hbCBDYWxsYmFjazxWZXJzaW9uZWQ8U3Vic2NyaXB0aW9uRGF0\nYT4+IGNhbGxiYWNrLCBPYmplY3QgY3R4KSB7CiAgICAgICAgICAgIFN0cmlu\nZyBrZXkgPSBnZXRTdWJzY3JpcHRpb25LZXkodG9waWMsIHN1YnNjcmliZXJJ\nZCk7CiAgICAgICAgICAgIHN1YlRhYmxlLmdldChrZXksIG5ldyBNZXRhc3Rv\ncmVDYWxsYmFjazxWZXJzaW9uZWQ8VmFsdWU+PigpIHsKICAgICAgICAgICAg\nICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgcHVibGljIHZvaWQgY29t\ncGxldGUoaW50IHJjLCBWZXJzaW9uZWQ8VmFsdWU+IHZhbHVlLCBPYmplY3Qg\nY3R4KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJjID09IE1TRXhjZXB0\naW9uLkNvZGUuTm9LZXkuZ2V0Q29kZSgpKSB7CiAgICAgICAgICAgICAgICAg\nICAgICAgIGNhbGxiYWNrLm9wZXJhdGlvbkZpbmlzaGVkKGN0eCwgbnVsbCk7\nCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAg\nICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmIChyYyAhPSBNU0V4\nY2VwdGlvbi5Db2RlLk9LLmdldENvZGUoKSkgewogICAgICAgICAgICAgICAg\nICAgICAgICBsb2dFcnJvckFuZEZpbmlzaE9wZXJhdGlvbigKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAiQ291bGQgbm90IHJlYWQgc3Vic2Ny\naXB0aW9uIGRhdGEgZm9yIHRvcGljOiAiICsgdG9waWMudG9TdHJpbmdVdGY4\nKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsg\nIiwgc3Vic2NyaWJlcklkOiAiICsgc3Vic2NyaWJlcklkLnRvU3RyaW5nVXRm\nOCgpLCBjYWxsYmFjaywgY3R4LCByYyk7CiAgICAgICAgICAgICAgICAgICAg\nICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAg\nICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFZlcnNp\nb25lZDxTdWJzY3JpcHRpb25EYXRhPiBzdWJEYXRhID0gbmV3IFZlcnNpb25l\nZDxTdWJzY3JpcHRpb25EYXRhPigKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICB2YWx1ZTJTdWJzY3JpcHRpb25EYXRhKHZhbHVlLmdldFZhbHVl\nKCkpLCB2YWx1ZS5nZXRWZXJzaW9uKCkpOwogICAgICAgICAgICAgICAgICAg\nICAgICBpZiAobG9nZ2VyLmlzRGVidWdFbmFibGVkKCkpIHsKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygiRm91bmQgc3Vic2Ny\naXB0aW9uIHdoaWxlIGFjcXVpcmluZyB0b3BpYzogIiArIHRvcGljLnRvU3Ry\naW5nVXRmOCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICsgIiwgc3Vic2NyaWJlcklkOiAiICsgc3Vic2NyaWJlcklkLnRvU3RyaW5n\nVXRmOCgpICsgIiwgZGF0YTogIgogICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICArIFN1YnNjcmlwdGlvblN0YXRlVXRpbHMudG9TdHJpbmco\nc3ViRGF0YS5nZXRWYWx1ZSgpKSArICIsIHZlcnNpb246ICIKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBzdWJEYXRhLmdldFZlcnNp\nb24oKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAg\nICAgICAgICAgICAgY2FsbGJhY2sub3BlcmF0aW9uRmluaXNoZWQoY3R4LCBz\ndWJEYXRhKTsKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChQYXJzZUV4\nY2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZ0J1\naWxkZXIgc2IgPSBuZXcgU3RyaW5nQnVpbGRlcigpOwogICAgICAgICAgICAg\nICAgICAgICAgICBzYi5hcHBlbmQoIkZhaWxlZCB0byBkZXNlcmlhbGl6ZSBz\ndWJzY3JpcHRpb24gZGF0YSBmb3IgdG9waWM6IikuYXBwZW5kKHRvcGljLnRv\nU3RyaW5nVXRmOCgpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIC5hcHBlbmQoIiwgc3Vic2NyaWJlcklkOiAiKS5hcHBlbmQoc3Vic2NyaWJl\ncklkLnRvU3RyaW5nVXRmOCgpKTsKICAgICAgICAgICAgICAgICAgICAgICAg\nU3RyaW5nIG1zZyA9IHNiLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICAg\nICAgICAgIGxvZ2dlci5lcnJvcihtc2csIGUpOwogICAgICAgICAgICAgICAg\nICAgICAgICBjYWxsYmFjay5vcGVyYXRpb25GYWlsZWQoY3R4LCBuZXcgUHVi\nU3ViRXhjZXB0aW9uLlVuZXhwZWN0ZWRDb25kaXRpb25FeGNlcHRpb24obXNn\nKSk7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoVW5zdXBwb3J0ZWRF\nbmNvZGluZ0V4Y2VwdGlvbiB1ZWUpIHsKICAgICAgICAgICAgICAgICAgICAg\nICAgU3RyaW5nQnVpbGRlciBzYiA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7CiAg\nICAgICAgICAgICAgICAgICAgICAgIHNiLmFwcGVuZCgiU3Vic2NyaXB0aW9u\nIGRhdGEgZm9yIHRvcGljOiAiKS5hcHBlbmQodG9waWMudG9TdHJpbmdVdGY4\nKCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgi\nLCBzdWJzY3JpYmVySWQ6ICIpLmFwcGVuZChzdWJzY3JpYmVySWQudG9TdHJp\nbmdVdGY4KCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFw\ncGVuZCgiIGlzIG5vdCBVRlQtOCBlbmNvZGVkIik7CiAgICAgICAgICAgICAg\nICAgICAgICAgIFN0cmluZyBtc2cgPSBzYi50b1N0cmluZygpOwogICAgICAg\nICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IobXNnLCB1ZWUpOwogICAg\nICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5vcGVyYXRpb25GYWlsZWQo\nY3R4LCBuZXcgUHViU3ViRXhjZXB0aW9uLlVuZXhwZWN0ZWRDb25kaXRpb25F\neGNlcHRpb24obXNnKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAg\nICAgICAgICAgfQogICAgICAgICAgICB9LCBjdHgpOwogICAgICAgIH0KCiAg\nICAgICAgcHJpdmF0ZSBTdHJpbmcgZ2V0U3Vic2NyaXB0aW9uUHJlZml4KEJ5\ndGVTdHJpbmcgdG9waWMsIGNoYXIgc2VwKSB7CiAgICAgICAgICAgIHJldHVy\nbiBuZXcgU3RyaW5nQnVpbGRlcih0b3BpYy50b1N0cmluZ1V0ZjgoKSkuYXBw\nZW5kKHNlcCkudG9TdHJpbmcoKTsKICAgICAgICB9CgogICAgICAgIHByaXZh\ndGUgdm9pZCByZWFkU3Vic2NyaXB0aW9ucyhmaW5hbCBCeXRlU3RyaW5nIHRv\ncGljLCBmaW5hbCBpbnQga2V5TGVuZ3RoLCBmaW5hbCBNZXRhc3RvcmVDdXJz\nb3IgY3Vyc29yLAogICAgICAgICAgICAgICAgZmluYWwgTWFwPEJ5dGVTdHJp\nbmcsIFZlcnNpb25lZDxTdWJzY3JpcHRpb25EYXRhPj4gdG9waWNTdWJzLAog\nICAgICAgICAgICAgICAgZmluYWwgQ2FsbGJhY2s8TWFwPEJ5dGVTdHJpbmcs\nIFZlcnNpb25lZDxTdWJzY3JpcHRpb25EYXRhPj4+IGNhbGxiYWNrLCBPYmpl\nY3QgY3R4KSB7CiAgICAgICAgICAgIGlmICghY3Vyc29yLmhhc01vcmVFbnRy\naWVzKCkpIHsKICAgICAgICAgICAgICAgIGNhbGxiYWNrLm9wZXJhdGlvbkZp\nbmlzaGVkKGN0eCwgdG9waWNTdWJzKTsKICAgICAgICAgICAgICAgIHJldHVy\nbjsKICAgICAgICAgICAgfQogICAgICAgICAgICBSZWFkRW50cmllc0NhbGxi\nYWNrIHJlYWRDYiA9IG5ldyBSZWFkRW50cmllc0NhbGxiYWNrKCkgewogICAg\nICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICBwdWJsaWMg\ndm9pZCBjb21wbGV0ZShpbnQgcmMsIEl0ZXJhdG9yPE1ldGFzdG9yZVRhYmxl\nSXRlbT4gaXRlbXMsIE9iamVjdCBjdHgpIHsKICAgICAgICAgICAgICAgICAg\nICBpZiAocmMgIT0gTVNFeGNlcHRpb24uQ29kZS5PSy5nZXRDb2RlKCkpIHsK\nICAgICAgICAgICAgICAgICAgICAgICAgbG9nRXJyb3JBbmRGaW5pc2hPcGVy\nYXRpb24oIkNvdWxkIG5vdCByZWFkIHN1YnNjcmliZXJzIGZvciBjdXJzb3Ig\nIiArIGN1cnNvciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBj\nYWxsYmFjaywgY3R4LCByYyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJl\ndHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAg\nICAgd2hpbGUgKGl0ZW1zLmhhc05leHQoKSkgewogICAgICAgICAgICAgICAg\nICAgICAgICBNZXRhc3RvcmVUYWJsZUl0ZW0gaXRlbSA9IGl0ZW1zLm5leHQo\nKTsKICAgICAgICAgICAgICAgICAgICAgICAgZmluYWwgQnl0ZVN0cmluZyBz\ndWJzY3JpYmVySWQgPSBCeXRlU3RyaW5nLmNvcHlGcm9tVXRmOChpdGVtLmdl\ndEtleSgpLnN1YnN0cmluZyhrZXlMZW5ndGgpKTsKICAgICAgICAgICAgICAg\nICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZl\ncnNpb25lZDxWYWx1ZT4gdnYgPSBpdGVtLmdldFZhbHVlKCk7CiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICBWZXJzaW9uZWQ8U3Vic2NyaXB0aW9uRGF0\nYT4gc3ViRGF0YSA9IG5ldyBWZXJzaW9uZWQ8U3Vic2NyaXB0aW9uRGF0YT4o\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlMlN1\nYnNjcmlwdGlvbkRhdGEodnYuZ2V0VmFsdWUoKSksIHZ2LmdldFZlcnNpb24o\nKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3BpY1N1YnMucHV0\nKHN1YnNjcmliZXJJZCwgc3ViRGF0YSk7CiAgICAgICAgICAgICAgICAgICAg\nICAgIH0gY2F0Y2ggKFBhcnNlRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIFN0cmluZ0J1aWxkZXIgc2IgPSBuZXcgU3RyaW5n\nQnVpbGRlcigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2IuYXBw\nZW5kKCJGYWlsZWQgdG8gZGVzZXJpYWxpemUgc3Vic2NyaXB0aW9uIGRhdGEg\nZm9yIHRvcGljOiAiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAuYXBwZW5kKHRvcGljLnRvU3RyaW5nVXRmOCgpKS5hcHBlbmQoIiwg\nc3Vic2NyaWJlcklkOiAiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAuYXBwZW5kKHN1YnNjcmliZXJJZC50b1N0cmluZ1V0ZjgoKSk7\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgbXNnID0gc2Iu\ndG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dl\nci5lcnJvcihtc2csIGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAg\nY2FsbGJhY2sub3BlcmF0aW9uRmFpbGVkKGN0eCwgbmV3IFB1YlN1YkV4Y2Vw\ndGlvbi5VbmV4cGVjdGVkQ29uZGl0aW9uRXhjZXB0aW9uKG1zZykpOwogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAg\nICAgICAgICAgICB9IGNhdGNoIChVbnN1cHBvcnRlZEVuY29kaW5nRXhjZXB0\naW9uIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZ0J1\naWxkZXIgc2IgPSBuZXcgU3RyaW5nQnVpbGRlcigpOwogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgc2IuYXBwZW5kKCJTdWJzY3JpcHRpb24gZGF0YSBm\nb3IgdG9waWM6ICIpLmFwcGVuZCh0b3BpYy50b1N0cmluZ1V0ZjgoKSkKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgiLCBz\ndWJzY3JpYmVySWQ6ICIpLmFwcGVuZChzdWJzY3JpYmVySWQudG9TdHJpbmdV\ndGY4KCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5h\ncHBlbmQoIiBpcyBub3QgVVRGLTggZW5jb2RlZC4iKTsKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIFN0cmluZyBtc2cgPSBzYi50b1N0cmluZygpOwog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKG1zZywg\nZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5vcGVy\nYXRpb25GYWlsZWQoY3R4LCBuZXcgUHViU3ViRXhjZXB0aW9uLlVuZXhwZWN0\nZWRDb25kaXRpb25FeGNlcHRpb24obXNnKSk7CiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIH0K\nICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmVh\nZFN1YnNjcmlwdGlvbnModG9waWMsIGtleUxlbmd0aCwgY3Vyc29yLCB0b3Bp\nY1N1YnMsIGNhbGxiYWNrLCBjdHgpOwogICAgICAgICAgICAgICAgfQogICAg\nICAgICAgICB9OwogICAgICAgICAgICBjdXJzb3IuYXN5bmNSZWFkRW50cmll\ncyhjZmcuZ2V0TWV0YXN0b3JlTWF4RW50cmllc1BlclNjYW4oKSwgcmVhZENi\nLCBjdHgpOwogICAgICAgIH0KCiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAg\ncHVibGljIHZvaWQgcmVhZFN1YnNjcmlwdGlvbnMoZmluYWwgQnl0ZVN0cmlu\nZyB0b3BpYywKICAgICAgICAgICAgICAgIGZpbmFsIENhbGxiYWNrPE1hcDxC\neXRlU3RyaW5nLCBWZXJzaW9uZWQ8U3Vic2NyaXB0aW9uRGF0YT4+PiBjYWxs\nYmFjaywgT2JqZWN0IGN0eCkgewogICAgICAgICAgICBmaW5hbCBTdHJpbmcg\nZmlyc3RLZXkgPSBnZXRTdWJzY3JpcHRpb25QcmVmaXgodG9waWMsIFRPUElD\nX1NVQl9GSVJTVF9TRVBBUkFUT1IpOwogICAgICAgICAgICBTdHJpbmcgbGFz\ndEtleSA9IGdldFN1YnNjcmlwdGlvblByZWZpeCh0b3BpYywgVE9QSUNfU1VC\nX0xBU1RfU0VQQVJBVE9SKTsKICAgICAgICAgICAgc3ViVGFibGUub3BlbkN1\ncnNvcihmaXJzdEtleSwgdHJ1ZSwgbGFzdEtleSwgdHJ1ZSwgT3JkZXIuQVND\nLCBBTExfRklFTERTLAogICAgICAgICAgICAgICAgICAgIG5ldyBNZXRhc3Rv\ncmVDYWxsYmFjazxNZXRhc3RvcmVDdXJzb3I+KCkgewogICAgICAgICAgICAg\nICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgICAgICAgICAg\ncHVibGljIHZvaWQgY29tcGxldGUoaW50IHJjLCBNZXRhc3RvcmVDdXJzb3Ig\nY3Vyc29yLCBPYmplY3QgY3R4KSB7CiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICBpZiAocmMgIT0gTVNFeGNlcHRpb24uQ29kZS5PSy5nZXRDb2RlKCkp\nIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dFcnJvckFu\nZEZpbmlzaE9wZXJhdGlvbigKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICJDb3VsZCBub3QgcmVhZCBzdWJzY3JpYmVycyBmb3Ig\ndG9waWMgIiArIHRvcGljLnRvU3RyaW5nVXRmOCgpLCBjYWxsYmFjaywgY3R4\nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmMp\nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICBmaW5hbCBNYXA8Qnl0ZVN0cmluZywgVmVyc2lvbmVkPFN1\nYnNjcmlwdGlvbkRhdGE+PiB0b3BpY1N1YnMgPQogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICBuZXcgQ29uY3VycmVudEhhc2hNYXA8Qnl0\nZVN0cmluZywgVmVyc2lvbmVkPFN1YnNjcmlwdGlvbkRhdGE+PigpOwogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgcmVhZFN1YnNjcmlwdGlvbnModG9w\naWMsIGZpcnN0S2V5Lmxlbmd0aCgpLCBjdXJzb3IsIHRvcGljU3VicywgY2Fs\nbGJhY2ssIGN0eCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAg\nICAgICAgICAgICAgICB9LCBjdHgpOwogICAgICAgIH0KICAgIH0KCiAgICAv\nKioKICAgICAqIGNhbGxiYWNrIGZpbmlzaCBvcGVyYXRpb24gd2l0aCBleGNl\ncHRpb24gc3BlY2lmeSBieSBjb2RlLCByZWdhcmRsZXNzIG9mCiAgICAgKiB0\naGUgdmFsdWUgb2YgcmV0dXJuIGNvZGUgcmMuCiAgICAgKi8KICAgIHByaXZh\ndGUgc3RhdGljIDxUPiB2b2lkIGxvZ0Vycm9yQW5kRmluaXNoT3BlcmF0aW9u\nKFN0cmluZyBtc2csIENhbGxiYWNrPFQ+IGNhbGxiYWNrLCBPYmplY3QgY3R4\nLCBpbnQgcmMsCiAgICAgICAgICAgIFN0YXR1c0NvZGUgY29kZSkgewogICAg\nICAgIGxvZ2dlci5lcnJvcihtc2csIE1TRXhjZXB0aW9uLmNyZWF0ZShNU0V4\nY2VwdGlvbi5Db2RlLmdldChyYyksICIiKSk7CiAgICAgICAgY2FsbGJhY2su\nb3BlcmF0aW9uRmFpbGVkKGN0eCwgUHViU3ViRXhjZXB0aW9uLmNyZWF0ZShj\nb2RlLCBtc2cpKTsKICAgIH0KCiAgICAvKioKICAgICAqIGNhbGxiYWNrIGZp\nbmlzaCBvcGVyYXRpb24gd2l0aCBjb3JyZXNwb25kaW5nIFB1YlN1YkV4Y2Vw\ndGlvbiBjb252ZXJ0ZWQKICAgICAqIGZyb20gcmV0dXJuIGNvZGUgcmMuCiAg\nICAgKi8KICAgIHByaXZhdGUgc3RhdGljIDxUPiB2b2lkIGxvZ0Vycm9yQW5k\nRmluaXNoT3BlcmF0aW9uKFN0cmluZyBtc2csIENhbGxiYWNrPFQ+IGNhbGxi\nYWNrLCBPYmplY3QgY3R4LCBpbnQgcmMpIHsKICAgICAgICBTdGF0dXNDb2Rl\nIGNvZGU7CgogICAgICAgIGlmIChyYyA9PSBNU0V4Y2VwdGlvbi5Db2RlLk5v\nS2V5LmdldENvZGUoKSkgewogICAgICAgICAgICBjb2RlID0gU3RhdHVzQ29k\nZS5OT19TVUNIX1RPUElDOwogICAgICAgIH0gZWxzZSBpZiAocmMgPT0gTVNF\neGNlcHRpb24uQ29kZS5TZXJ2aWNlRG93bi5nZXRDb2RlKCkpIHsKICAgICAg\nICAgICAgY29kZSA9IFN0YXR1c0NvZGUuU0VSVklDRV9ET1dOOwogICAgICAg\nIH0gZWxzZSB7CiAgICAgICAgICAgIGNvZGUgPSBTdGF0dXNDb2RlLlVORVhQ\nRUNURURfQ09ORElUSU9OOwogICAgICAgIH0KCiAgICAgICAgbG9nRXJyb3JB\nbmRGaW5pc2hPcGVyYXRpb24obXNnLCBjYWxsYmFjaywgY3R4LCByYywgY29k\nZSk7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBmb3Jt\nYXQoU2VydmVyQ29uZmlndXJhdGlvbiBjZmcsIFpvb0tlZXBlciB6aykgdGhy\nb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBp\nbnQgbWF4RW50cmllc1BlclNjYW4gPSBjZmcuZ2V0TWV0YXN0b3JlTWF4RW50\ncmllc1BlclNjYW4oKTsKCiAgICAgICAgICAgIC8vIGNsZWFuIHRvcGljIG93\nbmVyc2hpcCB0YWJsZS4KICAgICAgICAgICAgbG9nZ2VyLmluZm8oIkNsZWFu\naW5nIHRvcGljIG93bmVyc2hpcCB0YWJsZSAuLi4iKTsKICAgICAgICAgICAg\nTWV0YXN0b3JlVXRpbHMuY2xlYW5UYWJsZShvd25lclRhYmxlLCBtYXhFbnRy\naWVzUGVyU2Nhbik7CiAgICAgICAgICAgIGxvZ2dlci5pbmZvKCJDbGVhbmVk\nIHRvcGljIG93bmVyc2hpcCB0YWJsZSBzdWNjZXNzZnVsbHkuIik7CgogICAg\nICAgICAgICAvLyBjbGVhbiB0b3BpYyBzdWJzY3JpcHRpb24gdGFibGUuCiAg\nICAgICAgICAgIGxvZ2dlci5pbmZvKCJDbGVhbmluZyB0b3BpYyBzdWJzY3Jp\ncHRpb24gdGFibGUgLi4uIik7CiAgICAgICAgICAgIE1ldGFzdG9yZVV0aWxz\nLmNsZWFuVGFibGUoc3ViVGFibGUsIG1heEVudHJpZXNQZXJTY2FuKTsKICAg\nICAgICAgICAgbG9nZ2VyLmluZm8oIkNsZWFuZWQgdG9waWMgc3Vic2NyaXB0\naW9uIHRhYmxlIHN1Y2Nlc3NmdWxseS4iKTsKCiAgICAgICAgICAgIC8vIGNs\nZWFuIHRvcGljIHBlcnNpc3RlbmNlIGluZm8gdGFibGUuCiAgICAgICAgICAg\nIGxvZ2dlci5pbmZvKCJDbGVhbmluZyB0b3BpYyBwZXJzaXN0ZW5jZSBpbmZv\nIHRhYmxlIC4uLiIpOwogICAgICAgICAgICBNZXRhc3RvcmVVdGlscy5jbGVh\nblRhYmxlKHBlcnNpc3RUYWJsZSwgbWF4RW50cmllc1BlclNjYW4pOwogICAg\nICAgICAgICBsb2dnZXIuaW5mbygiQ2xlYW5lZCB0b3BpYyBwZXJzaXN0ZW5j\nZSBpbmZvIHRhYmxlIHN1Y2Nlc3NmdWxseS4iKTsKICAgICAgICB9IGNhdGNo\nIChNU0V4Y2VwdGlvbiBtc2UpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IElP\nRXhjZXB0aW9uKCJFeGNlcHRpb24gd2hlbiBmb3JtYXR0aW5nIGhlZHdpZyBt\nZXRhc3RvcmUgOiAiLCBtc2UpOwogICAgICAgIH0gY2F0Y2ggKEludGVycnVw\ndGVkRXhjZXB0aW9uIGllKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJT0V4\nY2VwdGlvbigiSW50ZXJydXB0ZWQgd2hlbiBmb3JtYXR0aW5nIGhlZHdpZyBt\nZXRhc3RvcmUgOiAiLCBpZSk7CiAgICAgICAgfQogICAgfQoKfQo=\n","encoding":"base64"}

