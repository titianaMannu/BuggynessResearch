{"sha":"65acc81787c889ab35691043ff75fc6319802e61","node_id":"MDQ6QmxvYjE1NzU5NTY6NjVhY2M4MTc4N2M4ODlhYjM1NjkxMDQzZmY3NWZjNjMxOTgwMmU2MQ==","size":6738,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/65acc81787c889ab35691043ff75fc6319802e61","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIubmV0dHk7CgppbXBvcnQg\namF2YS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5NYXA7Cgpp\nbXBvcnQgb3JnLnNsZjRqLkxvZ2dlcjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dn\nZXJGYWN0b3J5OwppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmNoYW5uZWwuQ2hh\nbm5lbDsKaW1wb3J0IG9yZy5qYm9zcy5uZXR0eS5jaGFubmVsLkNoYW5uZWxG\ndXR1cmU7CmltcG9ydCBvcmcuamJvc3MubmV0dHkuY2hhbm5lbC5DaGFubmVs\nRnV0dXJlTGlzdGVuZXI7CmltcG9ydCBvcmcuamJvc3MubmV0dHkuY2hhbm5l\nbC5DaGFubmVsSGFuZGxlckNvbnRleHQ7CmltcG9ydCBvcmcuamJvc3MubmV0\ndHkuY2hhbm5lbC5DaGFubmVsUGlwZWxpbmVDb3ZlcmFnZTsKaW1wb3J0IG9y\nZy5qYm9zcy5uZXR0eS5jaGFubmVsLkNoYW5uZWxTdGF0ZUV2ZW50OwppbXBv\ncnQgb3JnLmpib3NzLm5ldHR5LmNoYW5uZWwuRXhjZXB0aW9uRXZlbnQ7Cmlt\ncG9ydCBvcmcuamJvc3MubmV0dHkuY2hhbm5lbC5NZXNzYWdlRXZlbnQ7Cmlt\ncG9ydCBvcmcuamJvc3MubmV0dHkuY2hhbm5lbC5TaW1wbGVDaGFubmVsSGFu\nZGxlcjsKaW1wb3J0IG9yZy5qYm9zcy5uZXR0eS5jaGFubmVsLmdyb3VwLkNo\nYW5uZWxHcm91cDsKaW1wb3J0IG9yZy5qYm9zcy5uZXR0eS5oYW5kbGVyLmNv\nZGVjLmZyYW1lLkNvcnJ1cHRlZEZyYW1lRXhjZXB0aW9uOwppbXBvcnQgb3Jn\nLmpib3NzLm5ldHR5LmhhbmRsZXIuY29kZWMuZnJhbWUuVG9vTG9uZ0ZyYW1l\nRXhjZXB0aW9uOwppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmhhbmRsZXIuc3Ns\nLlNzbEhhbmRsZXI7CgppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuZXhjZXB0\naW9ucy5QdWJTdWJFeGNlcHRpb24uTWFsZm9ybWVkUmVxdWVzdEV4Y2VwdGlv\nbjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnByb3RvY29sLlB1YlN1YlBy\nb3RvY29sOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcucHJvdG9jb2wuUHVi\nU3ViUHJvdG9jb2wuT3BlcmF0aW9uVHlwZTsKaW1wb3J0IG9yZy5hcGFjaGUu\naGVkd2lnLnByb3RvY29sLlB1YlN1YlByb3RvY29sLlB1YlN1YlJlc3BvbnNl\nOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcucHJvdG9leHRlbnNpb25zLlB1\nYlN1YlJlc3BvbnNlVXRpbHM7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5z\nZXJ2ZXIuaGFuZGxlcnMuQ2hhbm5lbERpc2Nvbm5lY3RMaXN0ZW5lcjsKaW1w\nb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnNlcnZlci5oYW5kbGVycy5IYW5kbGVy\nOwoKQENoYW5uZWxQaXBlbGluZUNvdmVyYWdlKCJhbGwiKQpwdWJsaWMgY2xh\nc3MgVW1icmVsbGFIYW5kbGVyIGV4dGVuZHMgU2ltcGxlQ2hhbm5lbEhhbmRs\nZXIgewogICAgc3RhdGljIExvZ2dlciBsb2dnZXIgPSBMb2dnZXJGYWN0b3J5\nLmdldExvZ2dlcihVbWJyZWxsYUhhbmRsZXIuY2xhc3MpOwoKICAgIHByaXZh\ndGUgZmluYWwgTWFwPE9wZXJhdGlvblR5cGUsIEhhbmRsZXI+IGhhbmRsZXJz\nOwogICAgcHJpdmF0ZSBmaW5hbCBDaGFubmVsR3JvdXAgYWxsQ2hhbm5lbHM7\nCiAgICBwcml2YXRlIGZpbmFsIENoYW5uZWxEaXNjb25uZWN0TGlzdGVuZXIg\nY2hhbm5lbERpc2Nvbm5lY3RMaXN0ZW5lcjsKICAgIHByaXZhdGUgZmluYWwg\nYm9vbGVhbiBpc1NTTEVuYWJsZWQ7IAoKICAgIHB1YmxpYyBVbWJyZWxsYUhh\nbmRsZXIoQ2hhbm5lbEdyb3VwIGFsbENoYW5uZWxzLCBNYXA8T3BlcmF0aW9u\nVHlwZSwgSGFuZGxlcj4gaGFuZGxlcnMsCiAgICAgICAgICAgICAgICAgICAg\nICAgICAgIENoYW5uZWxEaXNjb25uZWN0TGlzdGVuZXIgY2hhbm5lbERpc2Nv\nbm5lY3RMaXN0ZW5lciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9v\nbGVhbiBpc1NTTEVuYWJsZWQpIHsKICAgICAgICB0aGlzLmFsbENoYW5uZWxz\nID0gYWxsQ2hhbm5lbHM7CiAgICAgICAgdGhpcy5pc1NTTEVuYWJsZWQgPSBp\nc1NTTEVuYWJsZWQ7CiAgICAgICAgdGhpcy5oYW5kbGVycyA9IGhhbmRsZXJz\nOwogICAgICAgIHRoaXMuY2hhbm5lbERpc2Nvbm5lY3RMaXN0ZW5lciA9IGNo\nYW5uZWxEaXNjb25uZWN0TGlzdGVuZXI7CiAgICB9CgogICAgQE92ZXJyaWRl\nCiAgICBwdWJsaWMgdm9pZCBleGNlcHRpb25DYXVnaHQoQ2hhbm5lbEhhbmRs\nZXJDb250ZXh0IGN0eCwgRXhjZXB0aW9uRXZlbnQgZSkgdGhyb3dzIEV4Y2Vw\ndGlvbiB7CiAgICAgICAgVGhyb3dhYmxlIHRocm93YWJsZSA9IGUuZ2V0Q2F1\nc2UoKTsKCiAgICAgICAgLy8gQWRkIGhlcmUgaWYgdGhlcmUgYXJlIG1vcmUg\nZXhjZXB0aW9ucyB3ZSBuZWVkIHRvIGJlIGFibGUgdG8gdG9sZXJhdGUuCiAg\nICAgICAgLy8gMS4gSU9FeGNlcHRpb24gbWF5IGJlIHRocm93biB3aGVuIGEg\nY2hhbm5lbCBpcyBmb3JjZWZ1bGx5IGNsb3NlZCBieQogICAgICAgIC8vIHRo\nZSBvdGhlciBlbmQsIG9yIGJ5IHRoZSBQcm90b2J1ZkRlY29kZXIgd2hlbiBh\nbiBpbnZhbGlkIHByb3RvYnVmIGlzCiAgICAgICAgLy8gcmVjZWl2ZWQKICAg\nICAgICAvLyAyLiBUb29Mb25nRnJhbWVFeGNlcHRpb24gaXMgdGhyb3duIGJ5\nIHRoZSBMZW5ndGhCYXNlZERlY29kZXIgaWYgaXQKICAgICAgICAvLyByZWNl\naXZlcyBhIHBhY2tldCB0aGF0IGlzIHRvbyBiaWcKICAgICAgICAvLyAzLiBD\nb3JydXB0ZWRGcmFtRXhjZXB0aW9uIGlzIHRocm93biBieSB0aGUgTGVuZ3Ro\nQmFzZWREZWNvZGVyIHdoZW4KICAgICAgICAvLyB0aGUgbGVuZ3RoIGlzIG5l\nZ2F0aXZlIGV0Yy4KICAgICAgICBpZiAodGhyb3dhYmxlIGluc3RhbmNlb2Yg\nSU9FeGNlcHRpb24gfHwgdGhyb3dhYmxlIGluc3RhbmNlb2YgVG9vTG9uZ0Zy\nYW1lRXhjZXB0aW9uCiAgICAgICAgICAgICAgICB8fCB0aHJvd2FibGUgaW5z\ndGFuY2VvZiBDb3JydXB0ZWRGcmFtZUV4Y2VwdGlvbikgewogICAgICAgICAg\nICBlLmdldENoYW5uZWwoKS5jbG9zZSgpOwogICAgICAgICAgICBsb2dnZXIu\nZGVidWcoIlVuY2F1Z2h0IGV4Y2VwdGlvbiIsIHRocm93YWJsZSk7CiAgICAg\nICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gY2FsbCBvdXIgdW5jYXVnaHQg\nZXhjZXB0aW9uIGhhbmRsZXIsIHdoaWNoIG1pZ2h0IGRlY2lkZSB0bwogICAg\nICAgICAgICAvLyBzaHV0ZG93biB0aGUgc3lzdGVtCiAgICAgICAgICAgIFRo\ncmVhZCB0aHJlYWQgPSBUaHJlYWQuY3VycmVudFRocmVhZCgpOwogICAgICAg\nICAgICB0aHJlYWQuZ2V0VW5jYXVnaHRFeGNlcHRpb25IYW5kbGVyKCkudW5j\nYXVnaHRFeGNlcHRpb24odGhyZWFkLCB0aHJvd2FibGUpOwogICAgICAgIH0K\nCiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBjaGFubmVs\nT3BlbihDaGFubmVsSGFuZGxlckNvbnRleHQgY3R4LCBDaGFubmVsU3RhdGVF\ndmVudCBlKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICAvLyBJZiBTU0wg\naXMgTk9UIGVuYWJsZWQsIHRoZW4gd2UgY2FuIGFkZCB0aGlzIGNoYW5uZWwg\ndG8gdGhlCiAgICAgICAgLy8gQ2hhbm5lbEdyb3VwLiBPdGhlcndpc2UsIHRo\nYXQgaXMgZG9uZSB3aGVuIHRoZSBjaGFubmVsIGlzIGNvbm5lY3RlZAogICAg\nICAgIC8vIGFuZCB0aGUgU1NMIGhhbmRzaGFrZSBoYXMgY29tcGxldGVkIHN1\nY2Nlc3NmdWxseS4KICAgICAgICBpZiAoIWlzU1NMRW5hYmxlZCkgewogICAg\nICAgICAgICBhbGxDaGFubmVscy5hZGQoY3R4LmdldENoYW5uZWwoKSk7CiAg\nICAgICAgfQogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQg\nY2hhbm5lbENvbm5lY3RlZChDaGFubmVsSGFuZGxlckNvbnRleHQgY3R4LCBD\naGFubmVsU3RhdGVFdmVudCBlKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAg\nICBpZiAoaXNTU0xFbmFibGVkKSB7CiAgICAgICAgICAgIGN0eC5nZXRQaXBl\nbGluZSgpLmdldChTc2xIYW5kbGVyLmNsYXNzKS5oYW5kc2hha2UoZS5nZXRD\naGFubmVsKCkpLmFkZExpc3RlbmVyKG5ldyBDaGFubmVsRnV0dXJlTGlzdGVu\nZXIoKSB7CiAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBvcGVyYXRpb25D\nb21wbGV0ZShDaGFubmVsRnV0dXJlIGZ1dHVyZSkgdGhyb3dzIEV4Y2VwdGlv\nbiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGZ1dHVyZS5pc1N1Y2Nlc3Mo\nKSkgewogICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoIlNT\nTCBoYW5kc2hha2UgaGFzIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkhIik7CiAg\nICAgICAgICAgICAgICAgICAgICAgIGFsbENoYW5uZWxzLmFkZChmdXR1cmUu\nZ2V0Q2hhbm5lbCgpKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugewog\nICAgICAgICAgICAgICAgICAgICAgICBmdXR1cmUuZ2V0Q2hhbm5lbCgpLmNs\nb3NlKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAg\nfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9CgogICAgQE92ZXJy\naWRlCiAgICBwdWJsaWMgdm9pZCBjaGFubmVsRGlzY29ubmVjdGVkKENoYW5u\nZWxIYW5kbGVyQ29udGV4dCBjdHgsIENoYW5uZWxTdGF0ZUV2ZW50IGUpIHRo\ncm93cyBFeGNlcHRpb24gewogICAgICAgIENoYW5uZWwgY2hhbm5lbCA9IGN0\neC5nZXRDaGFubmVsKCk7CiAgICAgICAgLy8gc3Vic2NyaWJlIGhhbmRsZXIg\nbmVlZHMgdG8ga25vdyBhYm91dCBjaGFubmVsIGRpc2Nvbm5lY3RzCiAgICAg\nICAgY2hhbm5lbERpc2Nvbm5lY3RMaXN0ZW5lci5jaGFubmVsRGlzY29ubmVj\ndGVkKGNoYW5uZWwpOwogICAgICAgIGNoYW5uZWwuY2xvc2UoKTsKICAgIH0K\nCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgc2VuZEVycm9yUmVzcG9uc2VUb01h\nbGZvcm1lZFJlcXVlc3QoQ2hhbm5lbCBjaGFubmVsLCBsb25nIHR4bklkLCBT\ndHJpbmcgbXNnKSB7CiAgICAgICAgbG9nZ2VyLmRlYnVnKCJNYWxmb3JtZWQg\ncmVxdWVzdCBmcm9tIHt9LCBtc2cgPSB7fSIsIGNoYW5uZWwuZ2V0UmVtb3Rl\nQWRkcmVzcygpLCBtc2cpOwogICAgICAgIE1hbGZvcm1lZFJlcXVlc3RFeGNl\ncHRpb24gbXJlID0gbmV3IE1hbGZvcm1lZFJlcXVlc3RFeGNlcHRpb24obXNn\nKTsKICAgICAgICBQdWJTdWJSZXNwb25zZSByZXNwb25zZSA9IFB1YlN1YlJl\nc3BvbnNlVXRpbHMuZ2V0UmVzcG9uc2VGb3JFeGNlcHRpb24obXJlLCB0eG5J\nZCk7CiAgICAgICAgY2hhbm5lbC53cml0ZShyZXNwb25zZSk7CiAgICB9Cgog\nICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBtZXNzYWdlUmVjZWl2ZWQo\nQ2hhbm5lbEhhbmRsZXJDb250ZXh0IGN0eCwgTWVzc2FnZUV2ZW50IGUpIHRo\ncm93cyBFeGNlcHRpb24gewoKICAgICAgICBpZiAoIShlLmdldE1lc3NhZ2Uo\nKSBpbnN0YW5jZW9mIFB1YlN1YlByb3RvY29sLlB1YlN1YlJlcXVlc3QpKSB7\nCiAgICAgICAgICAgIGN0eC5zZW5kVXBzdHJlYW0oZSk7CiAgICAgICAgICAg\nIHJldHVybjsKICAgICAgICB9CgogICAgICAgIFB1YlN1YlByb3RvY29sLlB1\nYlN1YlJlcXVlc3QgcmVxdWVzdCA9IChQdWJTdWJQcm90b2NvbC5QdWJTdWJS\nZXF1ZXN0KSBlLmdldE1lc3NhZ2UoKTsKCiAgICAgICAgSGFuZGxlciBoYW5k\nbGVyID0gaGFuZGxlcnMuZ2V0KHJlcXVlc3QuZ2V0VHlwZSgpKTsKICAgICAg\nICBDaGFubmVsIGNoYW5uZWwgPSBjdHguZ2V0Q2hhbm5lbCgpOwogICAgICAg\nIGxvbmcgdHhuSWQgPSByZXF1ZXN0LmdldFR4bklkKCk7CgogICAgICAgIGlm\nIChoYW5kbGVyID09IG51bGwpIHsKICAgICAgICAgICAgc2VuZEVycm9yUmVz\ncG9uc2VUb01hbGZvcm1lZFJlcXVlc3QoY2hhbm5lbCwgdHhuSWQsICJSZXF1\nZXN0IHR5cGUgIiArIHJlcXVlc3QuZ2V0VHlwZSgpLmdldE51bWJlcigpCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICsgIiB1bmtub3duIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9\nCgogICAgICAgIGhhbmRsZXIuaGFuZGxlUmVxdWVzdChyZXF1ZXN0LCBjaGFu\nbmVsKTsKICAgICAgICBTZXJ2ZXJTdGF0cy5nZXRJbnN0YW5jZSgpLmluY3Jl\nbWVudFJlcXVlc3RzUmVjZWl2ZWQoKTsKICAgIH0KCn0K\n","encoding":"base64"}

