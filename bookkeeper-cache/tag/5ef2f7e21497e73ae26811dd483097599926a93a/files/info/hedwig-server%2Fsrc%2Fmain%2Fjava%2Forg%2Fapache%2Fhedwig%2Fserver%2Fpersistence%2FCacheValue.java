{"sha":"942aecdd3108ac58ce90acbed7285c439dc027f2","node_id":"MDQ6QmxvYjE1NzU5NTY6OTQyYWVjZGQzMTA4YWM1OGNlOTBhY2JlZDcyODVjNDM5ZGMwMjdmMg==","size":3316,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/942aecdd3108ac58ce90acbed7285c439dc027f2","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIucGVyc2lzdGVuY2U7Cgpp\nbXBvcnQgamF2YS51dGlsLkhhc2hTZXQ7CmltcG9ydCBqYXZhLnV0aWwuU2V0\nOwoKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXI7CmltcG9ydCBvcmcuc2xmNGou\nTG9nZ2VyRmFjdG9yeTsKCmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90\nb2NvbC5QdWJTdWJQcm90b2NvbC5NZXNzYWdlOwppbXBvcnQgb3JnLmFwYWNo\nZS5oZWR3aWcuc2VydmVyLmNvbW1vbi5VbmV4cGVjdGVkRXJyb3I7CgovKioK\nICogVGhpcyBjbGFzcyBpcyBOT1QgdGhyZWFkIHNhZmUuIEl0IG5lZWQgbm90\nIGJlIHRocmVhZC1zYWZlIGJlY2F1c2Ugb3VyCiAqIHJlYWQtYWhlYWQgY2Fj\naGUgd2lsbCBvcGVyYXRlIHdpdGggb25seSAxIHRocmVhZAogKgogKi8KcHVi\nbGljIGNsYXNzIENhY2hlVmFsdWUgewoKICAgIHN0YXRpYyBMb2dnZXIgbG9n\nZ2VyID0gTG9nZ2VyRmFjdG9yeS5nZXRMb2dnZXIoUmVhZEFoZWFkQ2FjaGUu\nY2xhc3MpOwoKICAgIC8vIEFjdHVhbGx5IHdlIGRvbid0IGNhcmUgdGhlIG9y\nZGVyIG9mIGNhbGxiYWNrcwogICAgLy8gd2hlbiBhIHNjYW4gY2FsbGJhY2ss\nIGl0IHNob3VsZCBiZSBkZWxpdmVyZWQgdG8gYm90aCBjYWxsYmFja3MKICAg\nIFNldDxTY2FuQ2FsbGJhY2tXaXRoQ29udGV4dD4gY2FsbGJhY2tzID0gbmV3\nIEhhc2hTZXQ8U2NhbkNhbGxiYWNrV2l0aENvbnRleHQ+KCk7CiAgICBNZXNz\nYWdlIG1lc3NhZ2U7CiAgICBsb25nIHRpbWVPZkFkZGl0aW9uID0gMDsKCiAg\nICBwdWJsaWMgQ2FjaGVWYWx1ZSgpIHsKICAgIH0KCiAgICBwdWJsaWMgYm9v\nbGVhbiBpc1N0dWIoKSB7CiAgICAgICAgcmV0dXJuIG1lc3NhZ2UgPT0gbnVs\nbDsKICAgIH0KCiAgICBwdWJsaWMgbG9uZyBnZXRUaW1lT2ZBZGRpdGlvbigp\nIHsKICAgICAgICBpZiAobWVzc2FnZSA9PSBudWxsKSB7CiAgICAgICAgICAg\nIHRocm93IG5ldyBVbmV4cGVjdGVkRXJyb3IoIlRpbWUgb2YgYWRkIHJlcXVl\nc3RlZCBmcm9tIGEgc3R1YiIpOwogICAgICAgIH0KICAgICAgICByZXR1cm4g\ndGltZU9mQWRkaXRpb247CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0TWVz\nc2FnZUFuZEludm9rZUNhbGxiYWNrcyhNZXNzYWdlIG1lc3NhZ2UsIGxvbmcg\nY3VyclRpbWUpIHsKICAgICAgICBpZiAodGhpcy5tZXNzYWdlICE9IG51bGwp\nIHsKICAgICAgICAgICAgLy8gRHVwbGljYXRlIHJlYWQgZm9yIHRoZSBzYW1l\nIG1lc3NhZ2UgY29taW5nIGJhY2sKICAgICAgICAgICAgcmV0dXJuOwogICAg\nICAgIH0KCiAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKICAgICAg\nICB0aGlzLnRpbWVPZkFkZGl0aW9uID0gY3VyclRpbWU7CgogICAgICAgIGxv\nZ2dlci5kZWJ1ZygiSW52b2tpbmcge30gY2FsbGJhY2tzIGZvciB7fSBtZXNz\nYWdlIGFkZGVkIHRvIGNhY2hlIiwgY2FsbGJhY2tzLnNpemUoKSwgbWVzc2Fn\nZSk7CiAgICAgICAgZm9yIChTY2FuQ2FsbGJhY2tXaXRoQ29udGV4dCBjYWxs\nYmFja1dpdGhDdHggOiBjYWxsYmFja3MpIHsKICAgICAgICAgICAgaWYgKG51\nbGwgIT0gY2FsbGJhY2tXaXRoQ3R4KSB7CiAgICAgICAgICAgICAgICBjYWxs\nYmFja1dpdGhDdHguZ2V0U2NhbkNhbGxiYWNrKCkubWVzc2FnZVNjYW5uZWQo\nY2FsbGJhY2tXaXRoQ3R4LmdldEN0eCgpLCBtZXNzYWdlKTsKICAgICAgICAg\nICAgfQogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiByZW1v\ndmVDYWxsYmFjayhTY2FuQ2FsbGJhY2sgY2FsbGJhY2ssIE9iamVjdCBjdHgp\nIHsKICAgICAgICByZXR1cm4gY2FsbGJhY2tzLnJlbW92ZShuZXcgU2NhbkNh\nbGxiYWNrV2l0aENvbnRleHQoY2FsbGJhY2ssIGN0eCkpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIGFkZENhbGxiYWNrKFNjYW5DYWxsYmFjayBjYWxsYmFj\naywgT2JqZWN0IGN0eCkgewogICAgICAgIGlmICghaXNTdHViKCkpIHsKICAg\nICAgICAgICAgLy8gY2FsbCB0aGUgY2FsbGJhY2sgcmlnaHQgYXdheQogICAg\nICAgICAgICBjYWxsYmFjay5tZXNzYWdlU2Nhbm5lZChjdHgsIG1lc3NhZ2Up\nOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBjYWxs\nYmFja3MuYWRkKG5ldyBTY2FuQ2FsbGJhY2tXaXRoQ29udGV4dChjYWxsYmFj\naywgY3R4KSk7CiAgICB9CgogICAgcHVibGljIE1lc3NhZ2UgZ2V0TWVzc2Fn\nZSgpIHsKICAgICAgICByZXR1cm4gbWVzc2FnZTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBzZXRFcnJvckFuZEludm9rZUNhbGxiYWNrcyhFeGNlcHRpb24g\nZXhjZXB0aW9uKSB7CiAgICAgICAgZm9yIChTY2FuQ2FsbGJhY2tXaXRoQ29u\ndGV4dCBjYWxsYmFja1dpdGhDdHggOiBjYWxsYmFja3MpIHsKICAgICAgICAg\nICAgaWYgKG51bGwgIT0gY2FsbGJhY2tXaXRoQ3R4KSB7CiAgICAgICAgICAg\nICAgICBjYWxsYmFja1dpdGhDdHguZ2V0U2NhbkNhbGxiYWNrKCkuc2NhbkZh\naWxlZChjYWxsYmFja1dpdGhDdHguZ2V0Q3R4KCksIGV4Y2VwdGlvbik7CiAg\nICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cgp9Cg==\n","encoding":"base64"}

