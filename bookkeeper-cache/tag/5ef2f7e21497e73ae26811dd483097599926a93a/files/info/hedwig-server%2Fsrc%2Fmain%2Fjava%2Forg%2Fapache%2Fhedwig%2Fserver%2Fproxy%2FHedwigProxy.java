{"sha":"f6e7f85d4237ae28894770761426884b65fbda56","node_id":"MDQ6QmxvYjE1NzU5NTY6ZjZlN2Y4NWQ0MjM3YWUyODg5NDc3MDc2MTQyNjg4NGI2NWZiZGE1Ng==","size":7316,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/f6e7f85d4237ae28894770761426884b65fbda56","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIucHJveHk7CgppbXBvcnQg\namF2YS5pby5GaWxlOwppbXBvcnQgamF2YS5sYW5nLlRocmVhZC5VbmNhdWdo\ndEV4Y2VwdGlvbkhhbmRsZXI7CmltcG9ydCBqYXZhLm5ldC5JbmV0U29ja2V0\nQWRkcmVzczsKaW1wb3J0IGphdmEubmV0Lk1hbGZvcm1lZFVSTEV4Y2VwdGlv\nbjsKaW1wb3J0IGphdmEudXRpbC5IYXNoTWFwOwppbXBvcnQgamF2YS51dGls\nLk1hcDsKaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkV4ZWN1dG9yczsK\naW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkxpbmtlZEJsb2NraW5nUXVl\ndWU7CmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMuY29uZmlndXJhdGlvbi5D\nb25maWd1cmF0aW9uRXhjZXB0aW9uOwppbXBvcnQgb3JnLnNsZjRqLkxvZ2dl\ncjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJGYWN0b3J5OwppbXBvcnQgb3Jn\nLmpib3NzLm5ldHR5LmJvb3RzdHJhcC5TZXJ2ZXJCb290c3RyYXA7CmltcG9y\ndCBvcmcuamJvc3MubmV0dHkuY2hhbm5lbC5ncm91cC5DaGFubmVsR3JvdXA7\nCmltcG9ydCBvcmcuamJvc3MubmV0dHkuY2hhbm5lbC5ncm91cC5EZWZhdWx0\nQ2hhbm5lbEdyb3VwOwppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmNoYW5uZWwu\nc29ja2V0LlNlcnZlclNvY2tldENoYW5uZWxGYWN0b3J5OwppbXBvcnQgb3Jn\nLmpib3NzLm5ldHR5LmNoYW5uZWwuc29ja2V0Lm5pby5OaW9TZXJ2ZXJTb2Nr\nZXRDaGFubmVsRmFjdG9yeTsKaW1wb3J0IG9yZy5qYm9zcy5uZXR0eS5sb2dn\naW5nLkludGVybmFsTG9nZ2VyRmFjdG9yeTsKaW1wb3J0IG9yZy5qYm9zcy5u\nZXR0eS5sb2dnaW5nLkxvZzRKTG9nZ2VyRmFjdG9yeTsKCmltcG9ydCBvcmcu\nYXBhY2hlLmhlZHdpZy5jbGllbnQuSGVkd2lnQ2xpZW50OwppbXBvcnQgb3Jn\nLmFwYWNoZS5oZWR3aWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2wuT3BlcmF0\naW9uVHlwZTsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnNlcnZlci5jb21t\nb24uVGVybWluYXRlSlZNRXhjZXB0aW9uSGFuZGxlcjsKaW1wb3J0IG9yZy5h\ncGFjaGUuaGVkd2lnLnNlcnZlci5oYW5kbGVycy5DaGFubmVsRGlzY29ubmVj\ndExpc3RlbmVyOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuc2VydmVyLmhh\nbmRsZXJzLkhhbmRsZXI7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2\nZXIubmV0dHkuUHViU3ViU2VydmVyOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3\naWcuc2VydmVyLm5ldHR5LlB1YlN1YlNlcnZlclBpcGVsaW5lRmFjdG9yeTsK\naW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnNlcnZlci5uZXR0eS5VbWJyZWxs\nYUhhbmRsZXI7CgpwdWJsaWMgY2xhc3MgSGVkd2lnUHJveHkgewogICAgc3Rh\ndGljIGZpbmFsIExvZ2dlciBsb2dnZXIgPSBMb2dnZXJGYWN0b3J5LmdldExv\nZ2dlcihIZWR3aWdQcm94eS5jbGFzcyk7CgogICAgSGVkd2lnQ2xpZW50IGNs\naWVudDsKICAgIFNlcnZlclNvY2tldENoYW5uZWxGYWN0b3J5IHNlcnZlclNv\nY2tldENoYW5uZWxGYWN0b3J5OwogICAgQ2hhbm5lbEdyb3VwIGFsbENoYW5u\nZWxzOwogICAgTWFwPE9wZXJhdGlvblR5cGUsIEhhbmRsZXI+IGhhbmRsZXJz\nOwogICAgUHJveHlDb25maWd1cmF0aW9uIGNmZzsKICAgIENoYW5uZWxUcmFj\na2VyIHRyYWNrZXI7CiAgICBUaHJlYWRHcm91cCB0ZzsKCiAgICBwdWJsaWMg\nSGVkd2lnUHJveHkoZmluYWwgUHJveHlDb25maWd1cmF0aW9uIGNmZywgZmlu\nYWwgVW5jYXVnaHRFeGNlcHRpb25IYW5kbGVyIGV4Y2VwdGlvbkhhbmRsZXIp\nIHsKICAgICAgICB0aGlzLmNmZyA9IGNmZzsKCiAgICAgICAgdGcgPSBuZXcg\nVGhyZWFkR3JvdXAoImhlZHdpZ3Byb3h5IikgewogICAgICAgICAgICBAT3Zl\ncnJpZGUKICAgICAgICAgICAgcHVibGljIHZvaWQgdW5jYXVnaHRFeGNlcHRp\nb24oVGhyZWFkIHQsIFRocm93YWJsZSBlKSB7CiAgICAgICAgICAgICAgICBl\neGNlcHRpb25IYW5kbGVyLnVuY2F1Z2h0RXhjZXB0aW9uKHQsIGUpOwogICAg\nICAgICAgICB9CiAgICAgICAgfTsKICAgIH0KCiAgICBwdWJsaWMgSGVkd2ln\nUHJveHkoUHJveHlDb25maWd1cmF0aW9uIGNvbmYpIHRocm93cyBJbnRlcnJ1\ncHRlZEV4Y2VwdGlvbiB7CiAgICAgICAgdGhpcyhjb25mLCBuZXcgVGVybWlu\nYXRlSlZNRXhjZXB0aW9uSGFuZGxlcigpKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBzdGFydCgpIHRocm93cyBJbnRlcnJ1cHRlZEV4Y2VwdGlvbiB7CiAg\nICAgICAgZmluYWwgTGlua2VkQmxvY2tpbmdRdWV1ZTxCb29sZWFuPiBxdWV1\nZSA9IG5ldyBMaW5rZWRCbG9ja2luZ1F1ZXVlPEJvb2xlYW4+KCk7CgogICAg\nICAgIG5ldyBUaHJlYWQodGcsIG5ldyBSdW5uYWJsZSgpIHsKICAgICAgICAg\nICAgQE92ZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsK\nICAgICAgICAgICAgICAgIGNsaWVudCA9IG5ldyBIZWR3aWdDbGllbnQoY2Zn\nKTsKCiAgICAgICAgICAgICAgICBzZXJ2ZXJTb2NrZXRDaGFubmVsRmFjdG9y\neSA9IG5ldyBOaW9TZXJ2ZXJTb2NrZXRDaGFubmVsRmFjdG9yeShFeGVjdXRv\ncnMubmV3Q2FjaGVkVGhyZWFkUG9vbCgpLAogICAgICAgICAgICAgICAgICAg\nICAgICBFeGVjdXRvcnMubmV3Q2FjaGVkVGhyZWFkUG9vbCgpKTsKICAgICAg\nICAgICAgICAgIGluaXRpYWxpemVIYW5kbGVycygpOwogICAgICAgICAgICAg\nICAgaW5pdGlhbGl6ZU5ldHR5KCk7CgogICAgICAgICAgICAgICAgcXVldWUu\nb2ZmZXIodHJ1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KS5zdGFydCgp\nOwoKICAgICAgICBxdWV1ZS50YWtlKCk7CiAgICB9CgogICAgLy8gdXNlZCBm\nb3IgdGVzdGluZwogICAgcHVibGljIENoYW5uZWxUcmFja2VyIGdldENoYW5u\nZWxUcmFja2VyKCkgewogICAgICAgIHJldHVybiB0cmFja2VyOwogICAgfQoK\nICAgIHByb3RlY3RlZCB2b2lkIGluaXRpYWxpemVIYW5kbGVycygpIHsKICAg\nICAgICBoYW5kbGVycyA9IG5ldyBIYXNoTWFwPE9wZXJhdGlvblR5cGUsIEhh\nbmRsZXI+KCk7CiAgICAgICAgdHJhY2tlciA9IG5ldyBDaGFubmVsVHJhY2tl\ncihjbGllbnQuZ2V0U3Vic2NyaWJlcigpKTsKCiAgICAgICAgaGFuZGxlcnMu\ncHV0KE9wZXJhdGlvblR5cGUuUFVCTElTSCwgbmV3IFByb3h5UHVibGlzaEhh\nbmRlcihjbGllbnQuZ2V0UHVibGlzaGVyKCkpKTsKICAgICAgICBoYW5kbGVy\ncy5wdXQoT3BlcmF0aW9uVHlwZS5TVUJTQ1JJQkUsIG5ldyBQcm94eVN1YnNj\ncmliZUhhbmRsZXIoY2xpZW50LmdldFN1YnNjcmliZXIoKSwgdHJhY2tlcikp\nOwogICAgICAgIGhhbmRsZXJzLnB1dChPcGVyYXRpb25UeXBlLlVOU1VCU0NS\nSUJFLCBuZXcgUHJveHlVbnN1YnNjcmliZUhhbmRsZXIoY2xpZW50LmdldFN1\nYnNjcmliZXIoKSwgdHJhY2tlcikpOwogICAgICAgIGhhbmRsZXJzLnB1dChP\ncGVyYXRpb25UeXBlLkNPTlNVTUUsIG5ldyBQcm94eUNvbnN1bWVIYW5kbGVy\nKGNsaWVudC5nZXRTdWJzY3JpYmVyKCkpKTsKICAgICAgICBoYW5kbGVycy5w\ndXQoT3BlcmF0aW9uVHlwZS5TVE9QX0RFTElWRVJZLCBuZXcgUHJveHlTdG9w\nRGVsaXZlcnlIYW5kbGVyKGNsaWVudC5nZXRTdWJzY3JpYmVyKCksIHRyYWNr\nZXIpKTsKICAgICAgICBoYW5kbGVycy5wdXQoT3BlcmF0aW9uVHlwZS5TVEFS\nVF9ERUxJVkVSWSwgbmV3IFByb3h5U3RhcnREZWxpdmVyeUhhbmRsZXIoY2xp\nZW50LmdldFN1YnNjcmliZXIoKSwgdHJhY2tlcikpOwogICAgICAgIGhhbmRs\nZXJzLnB1dChPcGVyYXRpb25UeXBlLkNMT1NFU1VCU0NSSVBUSU9OLAogICAg\nICAgICAgICAgICAgICAgICBuZXcgUHJveHlDbG9zZVN1YnNjcmlwdGlvbkhh\nbmRsZXIoY2xpZW50LmdldFN1YnNjcmliZXIoKSwgdHJhY2tlcikpOwogICAg\nfQoKICAgIHByb3RlY3RlZCB2b2lkIGluaXRpYWxpemVOZXR0eSgpIHsKICAg\nICAgICBJbnRlcm5hbExvZ2dlckZhY3Rvcnkuc2V0RGVmYXVsdEZhY3Rvcnko\nbmV3IExvZzRKTG9nZ2VyRmFjdG9yeSgpKTsKICAgICAgICBhbGxDaGFubmVs\ncyA9IG5ldyBEZWZhdWx0Q2hhbm5lbEdyb3VwKCJoZWR3aWdwcm94eSIpOwog\nICAgICAgIFNlcnZlckJvb3RzdHJhcCBib290c3RyYXAgPSBuZXcgU2VydmVy\nQm9vdHN0cmFwKHNlcnZlclNvY2tldENoYW5uZWxGYWN0b3J5KTsKICAgICAg\nICBDaGFubmVsRGlzY29ubmVjdExpc3RlbmVyIGRpc2Nvbm5lY3RMaXN0ZW5l\nciA9CiAgICAgICAgICAgIChDaGFubmVsRGlzY29ubmVjdExpc3RlbmVyKSBo\nYW5kbGVycy5nZXQoT3BlcmF0aW9uVHlwZS5TVUJTQ1JJQkUpOwogICAgICAg\nIFVtYnJlbGxhSGFuZGxlciB1bWJyZWxsYUhhbmRsZXIgPQogICAgICAgICAg\nICBuZXcgVW1icmVsbGFIYW5kbGVyKGFsbENoYW5uZWxzLCBoYW5kbGVycywg\nZGlzY29ubmVjdExpc3RlbmVyLCBmYWxzZSk7CiAgICAgICAgUHViU3ViU2Vy\ndmVyUGlwZWxpbmVGYWN0b3J5IHBpcGVsaW5lID0gbmV3IFB1YlN1YlNlcnZl\nclBpcGVsaW5lRmFjdG9yeSh1bWJyZWxsYUhhbmRsZXIsIG51bGwsIGNmZwog\nICAgICAgICAgICAgICAgLmdldE1heGltdW1NZXNzYWdlU2l6ZSgpKTsKCiAg\nICAgICAgYm9vdHN0cmFwLnNldFBpcGVsaW5lRmFjdG9yeShwaXBlbGluZSk7\nCiAgICAgICAgYm9vdHN0cmFwLnNldE9wdGlvbigiY2hpbGQudGNwTm9EZWxh\neSIsIHRydWUpOwogICAgICAgIGJvb3RzdHJhcC5zZXRPcHRpb24oImNoaWxk\nLmtlZXBBbGl2ZSIsIHRydWUpOwogICAgICAgIGJvb3RzdHJhcC5zZXRPcHRp\nb24oInJldXNlQWRkcmVzcyIsIHRydWUpOwoKICAgICAgICAvLyBCaW5kIGFu\nZCBzdGFydCB0byBhY2NlcHQgaW5jb21pbmcgY29ubmVjdGlvbnMuCiAgICAg\nICAgYWxsQ2hhbm5lbHMuYWRkKGJvb3RzdHJhcC5iaW5kKG5ldyBJbmV0U29j\na2V0QWRkcmVzcyhjZmcuZ2V0UHJveHlQb3J0KCkpKSk7CiAgICAgICAgbG9n\nZ2VyLmluZm8oIkdvaW5nIGludG8gcmVjZWl2ZSBsb29wIik7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgc2h1dGRvd24oKSB7CiAgICAgICAgYWxsQ2hhbm5l\nbHMuY2xvc2UoKS5hd2FpdFVuaW50ZXJydXB0aWJseSgpOwogICAgICAgIGNs\naWVudC5jbG9zZSgpOwogICAgICAgIHNlcnZlclNvY2tldENoYW5uZWxGYWN0\nb3J5LnJlbGVhc2VFeHRlcm5hbFJlc291cmNlcygpOwogICAgfQoKICAgIC8v\nIHRoZSBmb2xsb3dpbmcgbWV0aG9kIG9ubHkgZXhpc3RzIGZvciB1bml0LXRl\nc3RpbmcgcHVycG9zZXMsIHNob3VsZCBnbwogICAgLy8gYXdheSBvbmNlIHdl\nIG1ha2Ugc3RhcnQgZGVsaXZlcnkgdG90YWxseSBzZXJ2ZXItc2lkZQogICAg\ncHVibGljIEhhbmRsZXIgZ2V0U3RhcnREZWxpdmVyeUhhbmRsZXIoKSB7CiAg\nICAgICAgcmV0dXJuIGhhbmRsZXJzLmdldChPcGVyYXRpb25UeXBlLlNUQVJU\nX0RFTElWRVJZKTsKICAgIH0KCiAgICBwdWJsaWMgSGFuZGxlciBnZXRTdG9w\nRGVsaXZlcnlIYW5kbGVyKCkgewogICAgICAgIHJldHVybiBoYW5kbGVycy5n\nZXQoT3BlcmF0aW9uVHlwZS5TVE9QX0RFTElWRVJZKTsKICAgIH0KCiAgICAv\nKioKICAgICAqIEBwYXJhbSBhcmdzCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0\naWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHsKCiAgICAgICAgbG9nZ2Vy\nLmluZm8oIkF0dGVtcHRpbmcgdG8gc3RhcnQgSGVkd2lnIFByb3h5Iik7CiAg\nICAgICAgUHJveHlDb25maWd1cmF0aW9uIGNvbmYgPSBuZXcgUHJveHlDb25m\naWd1cmF0aW9uKCk7CiAgICAgICAgaWYgKGFyZ3MubGVuZ3RoID4gMCkgewog\nICAgICAgICAgICBTdHJpbmcgY29uZkZpbGUgPSBhcmdzWzBdOwogICAgICAg\nICAgICB0cnkgewogICAgICAgICAgICAgICAgY29uZi5sb2FkQ29uZihuZXcg\nRmlsZShjb25mRmlsZSkudG9VUkkoKS50b1VSTCgpKTsKICAgICAgICAgICAg\nfSBjYXRjaCAoTWFsZm9ybWVkVVJMRXhjZXB0aW9uIGUpIHsKICAgICAgICAg\nICAgICAgIFN0cmluZyBtc2cgPSAiQ291bGQgbm90IG9wZW4gY29uZmlndXJh\ndGlvbiBmaWxlOiAiICsgY29uZkZpbGU7CiAgICAgICAgICAgICAgICBQdWJT\ndWJTZXJ2ZXIuZXJyb3JNc2dBbmRFeGl0KG1zZywgZSwgUHViU3ViU2VydmVy\nLlJDX0lOVkFMSURfQ09ORl9GSUxFKTsKICAgICAgICAgICAgfSBjYXRjaCAo\nQ29uZmlndXJhdGlvbkV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAgICBT\ndHJpbmcgbXNnID0gIk1hbGZvcm1lZCBjb25maWd1cmF0aW9uIGZpbGU6ICIg\nKyBjb25mRmlsZTsKICAgICAgICAgICAgICAgIFB1YlN1YlNlcnZlci5lcnJv\nck1zZ0FuZEV4aXQobXNnLCBlLCBQdWJTdWJTZXJ2ZXIuUkNfTUlTQ09ORklH\nVVJFRCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbG9nZ2VyLmluZm8o\nIlVzaW5nIGNvbmZpZ3VyYXRpb24gZmlsZSAiICsgY29uZkZpbGUpOwogICAg\nICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgICBuZXcgSGVkd2lnUHJv\neHkoY29uZikuc3RhcnQoKTsKICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUg\ndCkgewogICAgICAgICAgICBQdWJTdWJTZXJ2ZXIuZXJyb3JNc2dBbmRFeGl0\nKCJFcnJvciBkdXJpbmcgc3RhcnR1cCIsIHQsIFB1YlN1YlNlcnZlci5SQ19P\nVEhFUik7CiAgICAgICAgfQogICAgfQoKfQo=\n","encoding":"base64"}

