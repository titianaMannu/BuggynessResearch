{"sha":"bae960b942bfe1f4c6202123db2eb24dc8c02cb3","node_id":"MDQ6QmxvYjE1NzU5NTY6YmFlOTYwYjk0MmJmZTFmNGM2MjAyMTIzZGIyZWIyNGRjOGMwMmNiMw==","size":16753,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/bae960b942bfe1f4c6202123db2eb24dc8c02cb3","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIucmVnaW9uczsKCmltcG9y\ndCBqYXZhLnV0aWwuQXJyYXlMaXN0OwppbXBvcnQgamF2YS51dGlsLkhhc2hN\nYXA7CmltcG9ydCBqYXZhLnV0aWwuSGFzaFNldDsKaW1wb3J0IGphdmEudXRp\nbC5TZXQ7CmltcG9ydCBqYXZhLnV0aWwuVGltZXI7CmltcG9ydCBqYXZhLnV0\naWwuVGltZXJUYXNrOwppbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuQ29u\nY3VycmVudEhhc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5D\nb25jdXJyZW50TWFwOwppbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuU2No\nZWR1bGVkRXhlY3V0b3JTZXJ2aWNlOwppbXBvcnQgamF2YS51dGlsLmNvbmN1\ncnJlbnQuQ291bnREb3duTGF0Y2g7CgppbXBvcnQgb3JnLnNsZjRqLkxvZ2dl\ncjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJGYWN0b3J5OwppbXBvcnQgb3Jn\nLmFwYWNoZS56b29rZWVwZXIuWm9vS2VlcGVyOwoKaW1wb3J0IGNvbS5nb29n\nbGUucHJvdG9idWYuQnl0ZVN0cmluZzsKaW1wb3J0IG9yZy5hcGFjaGUuaGVk\nd2lnLmNsaWVudC5hcGkuTWVzc2FnZUhhbmRsZXI7CmltcG9ydCBvcmcuYXBh\nY2hlLmhlZHdpZy5jbGllbnQuZXhjZXB0aW9ucy5BbHJlYWR5U3RhcnREZWxp\ndmVyeUV4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmNsaWVu\ndC5uZXR0eS5IZWR3aWdTdWJzY3JpYmVyOwppbXBvcnQgb3JnLmFwYWNoZS5o\nZWR3aWcuZXhjZXB0aW9ucy5QdWJTdWJFeGNlcHRpb247CmltcG9ydCBvcmcu\nYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5QdWJTdWJQcm90b2NvbC5NZXNzYWdl\nOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcucHJvdG9jb2wuUHViU3ViUHJv\ndG9jb2wuTWVzc2FnZVNlcUlkOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcu\ncHJvdG9jb2wuUHViU3ViUHJvdG9jb2wuUmVnaW9uU3BlY2lmaWNTZXFJZDsK\naW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnByb3RvY29sLlB1YlN1YlByb3Rv\nY29sLlN1YnNjcmliZVJlcXVlc3QuQ3JlYXRlT3JBdHRhY2g7CmltcG9ydCBv\ncmcuYXBhY2hlLmhlZHdpZy5wcm90b2V4dGVuc2lvbnMuU3Vic2NyaXB0aW9u\nU3RhdGVVdGlsczsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnNlcnZlci5j\nb21tb24uU2VydmVyQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUu\naGVkd2lnLnNlcnZlci5jb21tb24uVG9waWNPcFF1ZXVlcjsKaW1wb3J0IG9y\nZy5hcGFjaGUuaGVkd2lnLnNlcnZlci5wZXJzaXN0ZW5jZS5QZXJzaXN0UmVx\ndWVzdDsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnNlcnZlci5wZXJzaXN0\nZW5jZS5QZXJzaXN0ZW5jZU1hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLmhl\nZHdpZy5zZXJ2ZXIuc3Vic2NyaXB0aW9ucy5TdWJzY3JpcHRpb25FdmVudExp\nc3RlbmVyOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcudXRpbC5DYWxsYmFj\nazsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnV0aWwuQ2FsbGJhY2tVdGls\nczsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnV0aWwuSGVkd2lnU29ja2V0\nQWRkcmVzczsKCnB1YmxpYyBjbGFzcyBSZWdpb25NYW5hZ2VyIGltcGxlbWVu\ndHMgU3Vic2NyaXB0aW9uRXZlbnRMaXN0ZW5lciB7CgogICAgcHJvdGVjdGVk\nIHN0YXRpYyBmaW5hbCBMb2dnZXIgTE9HR0VSID0gTG9nZ2VyRmFjdG9yeS5n\nZXRMb2dnZXIoUmVnaW9uTWFuYWdlci5jbGFzcyk7CgogICAgcHJpdmF0ZSBm\naW5hbCBCeXRlU3RyaW5nIG15U3ViSWQ7CiAgICBwcml2YXRlIGZpbmFsIFBl\ncnNpc3RlbmNlTWFuYWdlciBwbTsKICAgIHByaXZhdGUgZmluYWwgQXJyYXlM\naXN0PEhlZHdpZ0h1YkNsaWVudD4gY2xpZW50cyA9IG5ldyBBcnJheUxpc3Q8\nSGVkd2lnSHViQ2xpZW50PigpOwogICAgcHJpdmF0ZSBmaW5hbCBUb3BpY09w\nUXVldWVyIHF1ZXVlOwogICAgcHJpdmF0ZSBmaW5hbCBTdHJpbmcgbXlSZWdp\nb247CiAgICAvLyBUaW1lciBmb3IgcnVubmluZyBhIHJldHJ5IHRocmVhZCB0\nYXNrIHRvIHJldHJ5IHJlbW90ZS1zdWJzY3JpcHRpb24gaW4gYXN5bmNocm9u\nb3VzIG1vZGUuCiAgICBwcml2YXRlIGZpbmFsIFRpbWVyIHRpbWVyID0gbmV3\nIFRpbWVyKHRydWUpOwogICAgcHJpdmF0ZSBmaW5hbCBIYXNoTWFwPEhlZHdp\nZ0h1YkNsaWVudCwgU2V0PEJ5dGVTdHJpbmc+PiByZXRyeU1hcCA9CiAgICAg\nICAgICAgIG5ldyBIYXNoTWFwPEhlZHdpZ0h1YkNsaWVudCwgU2V0PEJ5dGVT\ndHJpbmc+PigpOwogICAgLy8gbWFwIHVzZWQgdG8gdHJhY2sgd2hldGhlciBh\nIHRvcGljIGlzIHJlbW90ZSBzdWJzY3JpYmVkIG9yIG5vdAogICAgcHJpdmF0\nZSBmaW5hbCBDb25jdXJyZW50TWFwPEJ5dGVTdHJpbmcsIEJvb2xlYW4+IHRv\ncGljU3RhdHVzZXMgPQogICAgICAgICAgICBuZXcgQ29uY3VycmVudEhhc2hN\nYXA8Qnl0ZVN0cmluZywgQm9vbGVhbj4oKTsKCiAgICAvKioKICAgICAqIFRo\naXMgaXMgdGhlIFRpbWVyIFRhc2sgZm9yIHJldHJ5aW5nIHN1YnNjcmliaW5n\nIHRvIHJlbW90ZSByZWdpb25zCiAgICAgKi8KICAgIGNsYXNzIFJldHJ5U3Vi\nc2NyaWJlVGFzayBleHRlbmRzIFRpbWVyVGFzayB7CgogICAgICAgIEBPdmVy\ncmlkZQogICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsKICAgICAgICAgICAg\nU2V0PEhlZHdpZ0h1YkNsaWVudD4gaHViQ2xpZW50cyA9IG5ldyBIYXNoU2V0\nPEhlZHdpZ0h1YkNsaWVudD4oKTsKICAgICAgICAgICAgc3luY2hyb25pemVk\nIChyZXRyeU1hcCkgewogICAgICAgICAgICAgICAgaHViQ2xpZW50cy5hZGRB\nbGwocmV0cnlNYXAua2V5U2V0KCkpOwogICAgICAgICAgICB9CiAgICAgICAg\nICAgIGlmIChodWJDbGllbnRzLmlzRW1wdHkoKSkgewogICAgICAgICAgICAg\nICAgaWYgKExPR0dFUi5pc0RlYnVnRW5hYmxlZCgpKSB7CiAgICAgICAgICAg\nICAgICAgICAgTE9HR0VSLmRlYnVnKCJbIiArIG15UmVnaW9uICsgIl0gVGhl\ncmUgaXMgbm8gaHViIGNsaWVudCBuZWVkcyB0byByZXRyeSBzdWJzY3JpcHRp\nb25zLiIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0\ndXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAoSGVkd2lnSHVi\nQ2xpZW50IGNsaWVudCA6IGh1YkNsaWVudHMpIHsKICAgICAgICAgICAgICAg\nIFNldDxCeXRlU3RyaW5nPiB0b3BpY3MgPSBudWxsOwogICAgICAgICAgICAg\nICAgc3luY2hyb25pemVkIChyZXRyeU1hcCkgewogICAgICAgICAgICAgICAg\nICAgIHRvcGljcyA9IHJldHJ5TWFwLnJlbW92ZShjbGllbnQpOwogICAgICAg\nICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gdG9waWNz\nIHx8IHRvcGljcy5pc0VtcHR5KCkpIHsKICAgICAgICAgICAgICAgICAgICBj\nb250aW51ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZp\nbmFsIENvdW50RG93bkxhdGNoIGRvbmUgPSBuZXcgQ291bnREb3duTGF0Y2go\nMSk7CiAgICAgICAgICAgICAgICBDYWxsYmFjazxWb2lkPiBwb3N0Q2IgPSBu\nZXcgQ2FsbGJhY2s8Vm9pZD4oKSB7CiAgICAgICAgICAgICAgICAgICAgQE92\nZXJyaWRlCiAgICAgICAgICAgICAgICAgICAgcHVibGljIHZvaWQgb3BlcmF0\naW9uRmluaXNoZWQoT2JqZWN0IGN0eCwKICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIFZvaWQgcmVzdWx0T2ZPcGVyYXRpb24pIHsKICAgICAgICAgICAg\nICAgICAgICAgICAgZmluaXNoKCk7CiAgICAgICAgICAgICAgICAgICAgfQog\nICAgICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAg\nICAgIHB1YmxpYyB2b2lkIG9wZXJhdGlvbkZhaWxlZChPYmplY3QgY3R4LAog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgUHViU3ViRXhjZXB0aW9uIGV4\nY2VwdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICBmaW5pc2goKTsK\nICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdm9p\nZCBmaW5pc2goKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvbmUuY291\nbnREb3duKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAg\nICAgfTsKICAgICAgICAgICAgICAgIENhbGxiYWNrPFZvaWQ+IG1jYiA9IENh\nbGxiYWNrVXRpbHMubXVsdGlDYWxsYmFjayh0b3BpY3Muc2l6ZSgpLCBwb3N0\nQ2IsIG51bGwpOwogICAgICAgICAgICAgICAgZm9yIChCeXRlU3RyaW5nIHRv\ncGljIDogdG9waWNzKSB7CiAgICAgICAgICAgICAgICAgICAgQm9vbGVhbiBk\nb1JlbW90ZVN1YnNjcmliZSA9IHRvcGljU3RhdHVzZXMuZ2V0KHRvcGljKTsK\nICAgICAgICAgICAgICAgICAgICAvLyB0b3BpYyBoYXMgYmVlbiByZW1vdmVk\nLCBubyByZXRyeSBhZ2FpbgogICAgICAgICAgICAgICAgICAgIGlmIChudWxs\nID09IGRvUmVtb3RlU3Vic2NyaWJlKSB7CiAgICAgICAgICAgICAgICAgICAg\nICAgIG1jYi5vcGVyYXRpb25GaW5pc2hlZChudWxsLCBudWxsKTsKICAgICAg\nICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAg\nICAgfQogICAgICAgICAgICAgICAgICAgIHJldHJ5U3Vic2NyaWJlKGNsaWVu\ndCwgdG9waWMsIG1jYik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAg\nICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGRvbmUuYXdhaXQoKTsK\nICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEludGVycnVwdGVkRXhjZXB0aW9u\nIGUpIHsKICAgICAgICAgICAgICAgICAgICBMT0dHRVIud2FybigiRXhjZXB0\naW9uIGR1cmluZyByZXRyeWluZyByZW1vdGUgc3Vic2NyaXB0aW9ucyA6ICIs\nIGUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAg\nfQoKICAgIH0KCiAgICBwdWJsaWMgUmVnaW9uTWFuYWdlcihmaW5hbCBQZXJz\naXN0ZW5jZU1hbmFnZXIgcG0sIGZpbmFsIFNlcnZlckNvbmZpZ3VyYXRpb24g\nY2ZnLCBmaW5hbCBab29LZWVwZXIgemssCiAgICAgICAgICAgICAgICAgICAg\nICAgICBTY2hlZHVsZWRFeGVjdXRvclNlcnZpY2Ugc2NoZWR1bGVyLCBIZWR3\naWdIdWJDbGllbnRGYWN0b3J5IGh1YkNsaWVudEZhY3RvcnkpIHsKICAgICAg\nICB0aGlzLnBtID0gcG07CiAgICAgICAgbXlTdWJJZCA9IEJ5dGVTdHJpbmcu\nY29weUZyb21VdGY4KFN1YnNjcmlwdGlvblN0YXRlVXRpbHMuSFVCX1NVQlND\nUklCRVJfUFJFRklYICsgY2ZnLmdldE15UmVnaW9uKCkpOwogICAgICAgIHF1\nZXVlID0gbmV3IFRvcGljT3BRdWV1ZXIoc2NoZWR1bGVyKTsKICAgICAgICBm\nb3IgKGZpbmFsIFN0cmluZyBodWIgOiBjZmcuZ2V0UmVnaW9ucygpKSB7CiAg\nICAgICAgICAgIGNsaWVudHMuYWRkKGh1YkNsaWVudEZhY3RvcnkuY3JlYXRl\nKG5ldyBIZWR3aWdTb2NrZXRBZGRyZXNzKGh1YikpKTsKICAgICAgICB9CiAg\nICAgICAgbXlSZWdpb24gPSBjZmcuZ2V0TXlSZWdpb25CeXRlU3RyaW5nKCku\ndG9TdHJpbmdVdGY4KCk7CiAgICAgICAgaWYgKGNmZy5nZXRSZXRyeVJlbW90\nZVN1YnNjcmliZVRocmVhZFJ1bkludGVydmFsKCkgPiAwKSB7CiAgICAgICAg\nICAgIHRpbWVyLnNjaGVkdWxlKG5ldyBSZXRyeVN1YnNjcmliZVRhc2soKSwg\nMCwgY2ZnLmdldFJldHJ5UmVtb3RlU3Vic2NyaWJlVGhyZWFkUnVuSW50ZXJ2\nYWwoKSk7CiAgICAgICAgfQogICAgfQoKICAgIHByaXZhdGUgdm9pZCBwdXRU\nb3BpY0luUmV0cnlNYXAoSGVkd2lnSHViQ2xpZW50IGNsaWVudCwgQnl0ZVN0\ncmluZyB0b3BpYykgewogICAgICAgIGlmIChMT0dHRVIuaXNEZWJ1Z0VuYWJs\nZWQoKSkgewogICAgICAgICAgICBMT0dHRVIuZGVidWcoIlsiICsgbXlSZWdp\nb24gKyAiXSBQdXQgdG9waWMgaW4gcmV0cnkgbWFwIDogIiArIHRvcGljLnRv\nU3RyaW5nVXRmOCgpKTsKICAgICAgICB9CiAgICAgICAgc3luY2hyb25pemVk\nIChyZXRyeU1hcCkgewogICAgICAgICAgICBTZXQ8Qnl0ZVN0cmluZz4gdG9w\naWNzID0gcmV0cnlNYXAuZ2V0KGNsaWVudCk7CiAgICAgICAgICAgIGlmIChu\ndWxsID09IHRvcGljcykgewogICAgICAgICAgICAgICAgdG9waWNzID0gbmV3\nIEhhc2hTZXQ8Qnl0ZVN0cmluZz4oKTsKICAgICAgICAgICAgICAgIHJldHJ5\nTWFwLnB1dChjbGllbnQsIHRvcGljcyk7CiAgICAgICAgICAgIH0KICAgICAg\nICAgICAgdG9waWNzLmFkZCh0b3BpYyk7CiAgICAgICAgfQogICAgfQogICAg\nCiAgICAvKioKICAgICAqIERvIHJlbW90ZSBzdWJzY3JpYmUgZm9yIGEgc3Bl\nY2lmaWVkIHRvcGljLgogICAgICoKICAgICAqIEBwYXJhbSBjbGllbnQKICAg\nICAqICAgICAgICAgIEhlZHdpZyBIdWIgQ2xpZW50IHRvIHN1YnNjcmliZSBy\nZW1vdGUgdG9waWMuCiAgICAgKiBAcGFyYW0gdG9waWMKICAgICAqICAgICAg\nICAgIFRvcGljIHRvIHN1YnNjcmliZS4KICAgICAqIEBwYXJhbSBzeW5jaHJv\nbm91cwogICAgICogICAgICAgICAgV2hldGhlciB0byB3YWl0IGZvciB0aGUg\nY2FsbGJhY2sgb2Ygc3Vic2NyaXB0aW9uLgogICAgICogQHBhcmFtIG1jYgog\nICAgICogICAgICAgICAgQ2FsbGJhY2sgdG8gdHJpZ2dlciBhZnRlciBzdWJz\nY3JpcHRpb24gaXMgZG9uZS4KICAgICAqIEBwYXJhbSBjb250ZXgKICAgICAq\nICAgICAgICAgIENhbGxiYWNrIGNvbnRleHQKICAgICAqLwogICAgcHJpdmF0\nZSB2b2lkIGRvUmVtb3RlU3Vic2NyaWJlKGZpbmFsIEhlZHdpZ0h1YkNsaWVu\ndCBjbGllbnQsIGZpbmFsIEJ5dGVTdHJpbmcgdG9waWMsIGZpbmFsIGJvb2xl\nYW4gc3luY2hyb25vdXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgZmluYWwgQ2FsbGJhY2s8Vm9pZD4gbWNiLCBmaW5hbCBPYmplY3Qg\nY29udGV4dCkgewogICAgICAgIGZpbmFsIEhlZHdpZ1N1YnNjcmliZXIgc3Vi\nID0gY2xpZW50LmdldFN1YnNjcmliZXIoKTsKICAgICAgICB0cnkgewogICAg\nICAgICAgICBpZiAoc3ViLmhhc1N1YnNjcmlwdGlvbih0b3BpYywgbXlTdWJJ\nZCkpIHsKICAgICAgICAgICAgICAgIGlmIChMT0dHRVIuaXNEZWJ1Z0VuYWJs\nZWQoKSkgewogICAgICAgICAgICAgICAgICAgIExPR0dFUi5kZWJ1ZygiWyIg\nKyBteVJlZ2lvbiArICJdIGNyb3NzLXJlZ2lvbiBzdWJzY3JpcHRpb24gZm9y\nIHRvcGljICIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyB0\nb3BpYy50b1N0cmluZ1V0ZjgoKSArICIgaGFzIGV4aXN0ZWQgYmVmb3JlLiIp\nOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgbWNiLm9wZXJh\ndGlvbkZpbmlzaGVkKG51bGwsIG51bGwpOwogICAgICAgICAgICAgICAgcmV0\ndXJuOwogICAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoUHViU3ViRXhj\nZXB0aW9uIGUpIHsKICAgICAgICAgICAgTE9HR0VSLmVycm9yKCJbIiArIG15\nUmVnaW9uICsgIl0gY2hlY2tpbmcgY3Jvc3MtcmVnaW9uIHN1YnNjcmlwdGlv\nbiBmb3IgdG9waWMgIgogICAgICAgICAgICAgICAgICAgICAgICAgKyB0b3Bp\nYy50b1N0cmluZ1V0ZjgoKSArICIgZmFpbGVkICh0aGlzIGlzIHNob3VsZCBu\nb3QgaGFwcGVuKTogIiwgZSk7CiAgICAgICAgICAgIG1jYi5vcGVyYXRpb25G\nYWlsZWQoY29udGV4dCwgZSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAg\nICB9CiAgICAgICAgc3ViLmFzeW5jU3Vic2NyaWJlKHRvcGljLCBteVN1Yklk\nLCBDcmVhdGVPckF0dGFjaC5DUkVBVEVfT1JfQVRUQUNILCBuZXcgQ2FsbGJh\nY2s8Vm9pZD4oKSB7CiAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAg\nICBwdWJsaWMgdm9pZCBvcGVyYXRpb25GaW5pc2hlZChPYmplY3QgY3R4LCBW\nb2lkIHJlc3VsdE9mT3BlcmF0aW9uKSB7CiAgICAgICAgICAgICAgICBpZiAo\nTE9HR0VSLmlzRGVidWdFbmFibGVkKCkpCiAgICAgICAgICAgICAgICAgICAg\nTE9HR0VSLmRlYnVnKCJbIiArIG15UmVnaW9uICsgIl0gY3Jvc3MtcmVnaW9u\nIHN1YnNjcmlwdGlvbiBkb25lIGZvciB0b3BpYyAiICsgdG9waWMudG9TdHJp\nbmdVdGY4KCkpOwogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\nICAgICAgICBzdWIuc3RhcnREZWxpdmVyeSh0b3BpYywgbXlTdWJJZCwgbmV3\nIE1lc3NhZ2VIYW5kbGVyKCkgewogICAgICAgICAgICAgICAgICAgICAgICBA\nT3ZlcnJpZGUKICAgICAgICAgICAgICAgICAgICAgICAgcHVibGljIHZvaWQg\nZGVsaXZlcihmaW5hbCBCeXRlU3RyaW5nIHRvcGljLCBCeXRlU3RyaW5nIHN1\nYnNjcmliZXJJZCwgTWVzc2FnZSBtc2csCiAgICAgICAgICAgICAgICAgICAg\nICAgIGZpbmFsIENhbGxiYWNrPFZvaWQ+IGNhbGxiYWNrLCBmaW5hbCBPYmpl\nY3QgY29udGV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g\nV2hlbiBtZXNzYWdlcyBhcmUgZmlyc3QgcHVibGlzaGVkCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAvLyBsb2NhbGx5LCB0aGUgUHVibGlzaEhhbmRs\nZXIgc2V0cyB0aGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNv\ndXJjZSByZWdpb24gaW4gdGhlIE1lc3NhZ2UuCiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICBpZiAobXNnLmhhc1NyY1JlZ2lvbigpKSB7CiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZS5uZXdCdWlsZGVyKG1z\nZykuc2V0TXNnSWQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIE1lc3NhZ2VTZXFJZC5uZXdCdWlsZGVyKG1zZy5nZXRNc2dJZCgpKS5h\nZGRSZW1vdGVDb21wb25lbnRzKAogICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgUmVnaW9uU3BlY2lmaWNTZXFJZC5uZXdCdWlsZGVy\nKCkuc2V0UmVnaW9uKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgIG1zZy5nZXRTcmNSZWdpb24oKSkuc2V0U2VxSWQoCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNn\nLmdldE1zZ0lkKCkuZ2V0TG9jYWxDb21wb25lbnQoKSkpKTsKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIHBtLnBlcnNpc3RNZXNzYWdlKG5ldyBQZXJzaXN0UmVxdWVzdCh0b3Bp\nYywgbXNnLCBuZXcgQ2FsbGJhY2s8TWVzc2FnZVNlcUlkPigpIHsKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBvcGVyYXRpb25G\naW5pc2hlZChPYmplY3QgY3R4LCBNZXNzYWdlU2VxSWQgcmVzdWx0T2ZPcGVy\nYXRpb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\naWYgKExPR0dFUi5pc0RlYnVnRW5hYmxlZCgpKQogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgTE9HR0VSLmRlYnVnKCJbIiArIG15\nUmVnaW9uICsgIl0gY3Jvc3MtcmVnaW9uIHJlY3YtZndkIHN1Y2NlZWRlZCBm\nb3IgdG9waWMgIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICsgdG9waWMudG9TdHJpbmdVdGY4KCkpOwog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5v\ncGVyYXRpb25GaW5pc2hlZChjb250ZXh0LCBudWxsKTsKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIHB1YmxpYyB2b2lkIG9wZXJhdGlvbkZhaWxlZChPYmplY3QgY3R4\nLCBQdWJTdWJFeGNlcHRpb24gZXhjZXB0aW9uKSB7CiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIGlmIChMT0dHRVIuaXNEZWJ1Z0VuYWJs\nZWQoKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIExPR0dFUi5lcnJvcigiWyIgKyBteVJlZ2lvbiArICJdIGNyb3NzLXJlZ2lv\nbiByZWN2LWZ3ZCBmYWlsZWQgZm9yIHRvcGljICIKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIHRvcGlj\nLnRvU3RyaW5nVXRmOCgpLCBleGNlcHRpb24pOwogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5vcGVyYXRpb25GYWlsZWQo\nY29udGV4dCwgZXhjZXB0aW9uKTsKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBudWxs\nKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAg\nICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBpZiAoTE9HR0VSLmlzRGVi\ndWdFbmFibGVkKCkpCiAgICAgICAgICAgICAgICAgICAgICAgIExPR0dFUi5k\nZWJ1ZygiWyIgKyBteVJlZ2lvbiArICJdIGNyb3NzLXJlZ2lvbiBzdGFydC1k\nZWxpdmVyeSBzdWNjZWVkZWQgZm9yIHRvcGljICIKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICsgdG9waWMudG9TdHJpbmdVdGY4KCkp\nOwogICAgICAgICAgICAgICAgICAgIG1jYi5vcGVyYXRpb25GaW5pc2hlZChj\ndHgsIG51bGwpOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoUHViU3ViRXhj\nZXB0aW9uIGV4KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKExPR0dFUi5p\nc0RlYnVnRW5hYmxlZCgpKQogICAgICAgICAgICAgICAgICAgICAgICBMT0dH\nRVIuZXJyb3IoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlsi\nICsgbXlSZWdpb24gKyAiXSBjcm9zcy1yZWdpb24gc3RhcnQtZGVsaXZlcnkg\nZmFpbGVkIGZvciB0b3BpYyAiICsgdG9waWMudG9TdHJpbmdVdGY4KCksIGV4\nKTsKICAgICAgICAgICAgICAgICAgICBtY2Iub3BlcmF0aW9uRmFpbGVkKGN0\neCwgZXgpOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoQWxyZWFkeVN0YXJ0\nRGVsaXZlcnlFeGNlcHRpb24gZXgpIHsKICAgICAgICAgICAgICAgICAgICBM\nT0dHRVIuZXJyb3IoIlsiICsgbXlSZWdpb24gKyAiXSBjcm9zcy1yZWdpb24g\nc3RhcnQtZGVsaXZlcnkgZmFpbGVkIGZvciB0b3BpYyAiCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICArIHRvcGljLnRvU3RyaW5nVXRmOCgpLCBl\neCk7CiAgICAgICAgICAgICAgICAgICAgbWNiLm9wZXJhdGlvbkZhaWxlZChj\ndHgsIG5ldyBQdWJTdWJFeGNlcHRpb24uVW5leHBlY3RlZENvbmRpdGlvbkV4\nY2VwdGlvbigiY3Jvc3MtcmVnaW9uIHN0YXJ0LWRlbGl2ZXJ5IGZhaWxlZCA6\nICIgKyBleC5nZXRNZXNzYWdlKCkpKTsKICAgICAgICAgICAgICAgIH0KICAg\nICAgICAgICAgfQoKICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAg\nIHB1YmxpYyB2b2lkIG9wZXJhdGlvbkZhaWxlZChPYmplY3QgY3R4LCBQdWJT\ndWJFeGNlcHRpb24gZXhjZXB0aW9uKSB7CiAgICAgICAgICAgICAgICBpZiAo\nTE9HR0VSLmlzRGVidWdFbmFibGVkKCkpCiAgICAgICAgICAgICAgICAgICAg\nTE9HR0VSLmVycm9yKCJbIiArIG15UmVnaW9uICsgIl0gY3Jvc3MtcmVnaW9u\nIHN1YnNjcmliZSBmYWlsZWQgZm9yIHRvcGljICIgKyB0b3BpYy50b1N0cmlu\nZ1V0ZjgoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhj\nZXB0aW9uKTsKICAgICAgICAgICAgICAgIGlmICghc3luY2hyb25vdXMpIHsK\nICAgICAgICAgICAgICAgICAgICBwdXRUb3BpY0luUmV0cnlNYXAoY2xpZW50\nLCB0b3BpYyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBt\nY2Iub3BlcmF0aW9uRmFpbGVkKGN0eCwgZXhjZXB0aW9uKTsKICAgICAgICAg\nICAgfQogICAgICAgIH0sIG51bGwpOwogICAgfQoKICAgIHByaXZhdGUgdm9p\nZCByZXRyeVN1YnNjcmliZShmaW5hbCBIZWR3aWdIdWJDbGllbnQgY2xpZW50\nLCBmaW5hbCBCeXRlU3RyaW5nIHRvcGljLCBmaW5hbCBDYWxsYmFjazxWb2lk\nPiBjYikgewogICAgICAgIGlmIChMT0dHRVIuaXNEZWJ1Z0VuYWJsZWQoKSkg\newogICAgICAgICAgICBMT0dHRVIuZGVidWcoIlsiICsgbXlSZWdpb24gKyAi\nXSBSZXRyeSByZW1vdGUgc3Vic2NyaWJlIHRvcGljIDogIiArIHRvcGljLnRv\nU3RyaW5nVXRmOCgpKTsKICAgICAgICB9CiAgICAgICAgcXVldWUucHVzaEFu\nZE1heWJlUnVuKHRvcGljLCBxdWV1ZS5uZXcgQXN5bmNocm9ub3VzT3A8Vm9p\nZD4odG9waWMsIGNiLCBudWxsKSB7CiAgICAgICAgICAgIEBPdmVycmlkZQog\nICAgICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB7CiAgICAgICAgICAgICAg\nICBCb29sZWFuIGRvUmVtb3RlU3Vic2NyaWJlID0gdG9waWNTdGF0dXNlcy5n\nZXQodG9waWMpOwogICAgICAgICAgICAgICAgLy8gdG9waWMgaGFzIGJlZW4g\ncmVtb3ZlZCwgbm8gcmV0cnkgYWdhaW4KICAgICAgICAgICAgICAgIGlmIChu\ndWxsID09IGRvUmVtb3RlU3Vic2NyaWJlKSB7CiAgICAgICAgICAgICAgICAg\nICAgY2Iub3BlcmF0aW9uRmluaXNoZWQoY3R4LCBudWxsKTsKICAgICAgICAg\nICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAg\nICAgICAgICBkb1JlbW90ZVN1YnNjcmliZShjbGllbnQsIHRvcGljLCBmYWxz\nZSwgY2IsIGN0eCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0K\nCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIG9uRmlyc3RMb2NhbFN1\nYnNjcmliZShmaW5hbCBCeXRlU3RyaW5nIHRvcGljLCBmaW5hbCBib29sZWFu\nIHN5bmNocm9ub3VzLCBmaW5hbCBDYWxsYmFjazxWb2lkPiBjYikgewogICAg\nICAgIHRvcGljU3RhdHVzZXMucHV0KHRvcGljLCB0cnVlKTsKICAgICAgICAv\nLyBXaGVuZXZlciB3ZSBhY3F1aXJlIGEgdG9waWMgZHVlIHRvIGEgKGxvY2Fs\nKSBzdWJzY3JpYmUsIHN1YnNjcmliZSBvbgogICAgICAgIC8vIGl0IHRvIGFs\nbCB0aGUgb3RoZXIgcmVnaW9ucyAoY3VycmVudGx5IHVzaW5nIHNpbXBsZSBh\nbGwtdG8tYWxsCiAgICAgICAgLy8gdG9wb2xvZ3kpLgogICAgICAgIHF1ZXVl\nLnB1c2hBbmRNYXliZVJ1bih0b3BpYywgcXVldWUubmV3IEFzeW5jaHJvbm91\nc09wPFZvaWQ+KHRvcGljLCBjYiwgbnVsbCkgewogICAgICAgICAgICBAT3Zl\ncnJpZGUKICAgICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkgewogICAgICAg\nICAgICAgICAgQ2FsbGJhY2s8Vm9pZD4gcG9zdENiID0gc3luY2hyb25vdXMg\nPyBjYiA6IENhbGxiYWNrVXRpbHMubG9nZ2VyKExPR0dFUiwgCiAgICAgICAg\nICAgICAgICAgICAgICAgICJbIiArIG15UmVnaW9uICsgIl0gYWxsIGNyb3Nz\nLXJlZ2lvbiBzdWJzY3JpcHRpb25zIHN1Y2NlZWRlZCIsIAogICAgICAgICAg\nICAgICAgICAgICAgICAiWyIgKyBteVJlZ2lvbiArICJdIGF0IGxlYXN0IG9u\nZSBjcm9zcy1yZWdpb24gc3Vic2NyaXB0aW9uIGZhaWxlZCIpOwogICAgICAg\nICAgICAgICAgZmluYWwgQ2FsbGJhY2s8Vm9pZD4gbWNiID0gQ2FsbGJhY2tV\ndGlscy5tdWx0aUNhbGxiYWNrKGNsaWVudHMuc2l6ZSgpLCBwb3N0Q2IsIGN0\neCk7CiAgICAgICAgICAgICAgICBmb3IgKGZpbmFsIEhlZHdpZ0h1YkNsaWVu\ndCBjbGllbnQgOiBjbGllbnRzKSB7CiAgICAgICAgICAgICAgICAgICAgZG9S\nZW1vdGVTdWJzY3JpYmUoY2xpZW50LCB0b3BpYywgc3luY2hyb25vdXMsIG1j\nYiwgY3R4KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlm\nICghc3luY2hyb25vdXMpCiAgICAgICAgICAgICAgICAgICAgY2Iub3BlcmF0\naW9uRmluaXNoZWQobnVsbCwgbnVsbCk7CiAgICAgICAgICAgIH0KICAgICAg\nICB9KTsKCiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBv\nbkxhc3RMb2NhbFVuc3Vic2NyaWJlKGZpbmFsIEJ5dGVTdHJpbmcgdG9waWMp\nIHsKICAgICAgICB0b3BpY1N0YXR1c2VzLnJlbW92ZSh0b3BpYyk7CiAgICAg\nICAgLy8gVE9ETyBtYXkgd2FudCB0byBlYXNlIHVwIG9uIHRoZSBlYWdlciB1\nbnN1YnNjcmliZTsgdGhpcyBpcyBkcm9wcGluZwogICAgICAgIC8vIGNyb3Nz\nLXJlZ2lvbiBzdWJzY3JpcHRpb25zIEFTQVAKICAgICAgICBxdWV1ZS5wdXNo\nQW5kTWF5YmVSdW4odG9waWMsIHF1ZXVlLm5ldyBBc3luY2hyb25vdXNPcDxW\nb2lkPih0b3BpYywgbmV3IENhbGxiYWNrPFZvaWQ+KCkgewoKICAgICAgICAg\nICAgQE92ZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9wZXJhdGlv\nbkZpbmlzaGVkKE9iamVjdCBjdHgsIFZvaWQgcmVzdWx0KSB7CiAgICAgICAg\nICAgICAgICBpZiAoTE9HR0VSLmlzRGVidWdFbmFibGVkKCkpCiAgICAgICAg\nICAgICAgICAgICAgTE9HR0VSLmRlYnVnKCJbIiArIG15UmVnaW9uICsgIl0g\nY3Jvc3MtcmVnaW9uIHVuc3Vic2NyaWJlcyBzdWNjZWVkZWQgZm9yIHRvcGlj\nICIgKyB0b3BpYy50b1N0cmluZ1V0ZjgoKSk7CiAgICAgICAgICAgIH0KCiAg\nICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICBwdWJsaWMgdm9pZCBv\ncGVyYXRpb25GYWlsZWQoT2JqZWN0IGN0eCwgUHViU3ViRXhjZXB0aW9uIGV4\nY2VwdGlvbikgewogICAgICAgICAgICAgICAgaWYgKExPR0dFUi5pc0RlYnVn\nRW5hYmxlZCgpKQogICAgICAgICAgICAgICAgICAgIExPR0dFUi5lcnJvcigi\nWyIgKyBteVJlZ2lvbiArICJdIGNyb3NzLXJlZ2lvbiB1bnN1YnNjcmliZXMg\nZmFpbGVkIGZvciB0b3BpYyAiICsgdG9waWMudG9TdHJpbmdVdGY4KCksIGV4\nY2VwdGlvbik7CiAgICAgICAgICAgIH0KCiAgICAgICAgfSwgbnVsbCkgewog\nICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIHZvaWQg\ncnVuKCkgewogICAgICAgICAgICAgICAgQ2FsbGJhY2s8Vm9pZD4gbWNiID0g\nQ2FsbGJhY2tVdGlscy5tdWx0aUNhbGxiYWNrKGNsaWVudHMuc2l6ZSgpLCBj\nYiwgY3R4KTsKICAgICAgICAgICAgICAgIGZvciAoZmluYWwgSGVkd2lnSHVi\nQ2xpZW50IGNsaWVudCA6IGNsaWVudHMpIHsKICAgICAgICAgICAgICAgICAg\nICBmaW5hbCBIZWR3aWdTdWJzY3JpYmVyIHN1YiA9IGNsaWVudC5nZXRTdWJz\nY3JpYmVyKCk7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgICAgICAgICAgICAgaWYgKCFzdWIuaGFzU3Vic2NyaXB0aW9uKHRvcGlj\nLCBteVN1YklkKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYg\nKExPR0dFUi5pc0RlYnVnRW5hYmxlZCgpKSB7CiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgTE9HR0VSLmRlYnVnKCJbIiArIG15UmVnaW9uICsg\nIl0gY3Jvc3MtcmVnaW9uIHN1YnNjcmlwdGlvbiBmb3IgdG9waWMgIgogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIHRv\ncGljLnRvU3RyaW5nVXRmOCgpICsgIiBoYXMgZXhpc3RlZCBiZWZvcmUuIik7\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICBtY2Iub3BlcmF0aW9uRmluaXNoZWQobnVsbCwgbnVs\nbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAg\nICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0g\nY2F0Y2ggKFB1YlN1YkV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAgICAg\nICAgICAgIExPR0dFUi5lcnJvcigiWyIgKyBteVJlZ2lvbiArICJdIGNoZWNr\naW5nIGNyb3NzLXJlZ2lvbiBzdWJzY3JpcHRpb24gZm9yIHRvcGljICIKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgdG9waWMudG9T\ndHJpbmdVdGY4KCkgKyAiIGZhaWxlZCAodGhpcyBpcyBzaG91bGQgbm90IGhh\ncHBlbik6ICIsIGUpOwogICAgICAgICAgICAgICAgICAgICAgICBtY2Iub3Bl\ncmF0aW9uRmFpbGVkKGN0eCwgZSk7CiAgICAgICAgICAgICAgICAgICAgICAg\nIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAg\nICAgICAgICBzdWIuYXN5bmNVbnN1YnNjcmliZSh0b3BpYywgbXlTdWJJZCwg\nbWNiLCBudWxsKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQog\nICAgICAgIH0pOwogICAgfQoKICAgIC8vIE1ldGhvZCB0byBzaHV0ZG93biBh\nbmQgc3RvcCBhbGwgb2YgdGhlIGNyb3NzLXJlZ2lvbiBIZWR3aWcgY2xpZW50\ncy4KICAgIHB1YmxpYyB2b2lkIHN0b3AoKSB7CiAgICAgICAgdGltZXIuY2Fu\nY2VsKCk7CiAgICAgICAgZm9yIChIZWR3aWdIdWJDbGllbnQgY2xpZW50IDog\nY2xpZW50cykgewogICAgICAgICAgICBjbGllbnQuY2xvc2UoKTsKICAgICAg\nICB9CiAgICB9Cgp9Cg==\n","encoding":"base64"}

