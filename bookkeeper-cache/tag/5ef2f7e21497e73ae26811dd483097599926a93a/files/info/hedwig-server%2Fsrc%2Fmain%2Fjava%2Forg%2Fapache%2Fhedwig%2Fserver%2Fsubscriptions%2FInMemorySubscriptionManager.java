{"sha":"4fadc774295258c44f95cd4d29f83640c7d620fe","node_id":"MDQ6QmxvYjE1NzU5NTY6NGZhZGM3NzQyOTUyNThjNDRmOTVjZDRkMjlmODM2NDBjN2Q2MjBmZQ==","size":5499,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/4fadc774295258c44f95cd4d29f83640c7d620fe","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIuc3Vic2NyaXB0aW9uczsK\nCmltcG9ydCBqYXZhLnV0aWwuTWFwOwppbXBvcnQgamF2YS51dGlsLmNvbmN1\ncnJlbnQuQ29uY3VycmVudEhhc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuY29u\nY3VycmVudC5TY2hlZHVsZWRFeGVjdXRvclNlcnZpY2U7CgppbXBvcnQgY29t\nLmdvb2dsZS5wcm90b2J1Zi5CeXRlU3RyaW5nOwoKaW1wb3J0IG9yZy5hcGFj\naGUuYm9va2tlZXBlci52ZXJzaW9uaW5nLlZlcnNpb247CmltcG9ydCBvcmcu\nYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5QdWJTdWJQcm90b2NvbC5TdWJzY3Jp\ncHRpb25EYXRhOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuc2VydmVyLmNv\nbW1vbi5TZXJ2ZXJDb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5o\nZWR3aWcuc2VydmVyLmRlbGl2ZXJ5LkRlbGl2ZXJ5TWFuYWdlcjsKaW1wb3J0\nIG9yZy5hcGFjaGUuaGVkd2lnLnNlcnZlci5wZXJzaXN0ZW5jZS5QZXJzaXN0\nZW5jZU1hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIu\ndG9waWNzLlRvcGljTWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2ln\nLnV0aWwuQ2FsbGJhY2s7CgpwdWJsaWMgY2xhc3MgSW5NZW1vcnlTdWJzY3Jp\ncHRpb25NYW5hZ2VyIGV4dGVuZHMgQWJzdHJhY3RTdWJzY3JpcHRpb25NYW5h\nZ2VyIHsKICAgIC8vIEJhY2t1cCBmb3IgdG9wMnN1YjJzZXEKICAgIGZpbmFs\nIENvbmN1cnJlbnRIYXNoTWFwPEJ5dGVTdHJpbmcsIE1hcDxCeXRlU3RyaW5n\nLCBJbk1lbW9yeVN1YnNjcmlwdGlvblN0YXRlPj4gdG9wMnN1YjJzZXFCYWNr\ndXAgPQogICAgICAgIG5ldyBDb25jdXJyZW50SGFzaE1hcDxCeXRlU3RyaW5n\nLCBNYXA8Qnl0ZVN0cmluZywgSW5NZW1vcnlTdWJzY3JpcHRpb25TdGF0ZT4+\nKCk7CgogICAgcHVibGljIEluTWVtb3J5U3Vic2NyaXB0aW9uTWFuYWdlcihT\nZXJ2ZXJDb25maWd1cmF0aW9uIGNvbmYsCiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIFRvcGljTWFuYWdlciB0bSwgUGVyc2lzdGVu\nY2VNYW5hZ2VyIHBtLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICBEZWxpdmVyeU1hbmFnZXIgZG0sCiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIFNjaGVkdWxlZEV4ZWN1dG9yU2Vydmlj\nZSBzY2hlZHVsZXIpIHsKICAgICAgICBzdXBlcihjb25mLCB0bSwgcG0sIGRt\nLCBzY2hlZHVsZXIpOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHJvdGVj\ndGVkIHZvaWQgY3JlYXRlU3Vic2NyaXB0aW9uRGF0YShCeXRlU3RyaW5nIHRv\ncGljLCBCeXRlU3RyaW5nIHN1YnNjcmliZXJJZCwgU3Vic2NyaXB0aW9uRGF0\nYSBzdWJEYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgQ2FsbGJhY2s8VmVyc2lvbj4gY2FsbGJhY2ssIE9iamVjdCBj\ndHgpIHsKICAgICAgICAvLyBub3RoaW5nIHRvIGRvLCBpbi1tZW1vcnkgaW5m\nbyBpcyBhbHJlYWR5IHJlY29yZGVkIGJ5IGJhc2UgY2xhc3MKICAgICAgICBj\nYWxsYmFjay5vcGVyYXRpb25GaW5pc2hlZChjdHgsIG51bGwpOwogICAgfQoK\nICAgIEBPdmVycmlkZQogICAgcHJvdGVjdGVkIHZvaWQgZGVsZXRlU3Vic2Ny\naXB0aW9uRGF0YShCeXRlU3RyaW5nIHRvcGljLCBCeXRlU3RyaW5nIHN1YnNj\ncmliZXJJZCwgVmVyc2lvbiB2ZXJzaW9uLCBDYWxsYmFjazxWb2lkPiBjYWxs\nYmFjaywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgT2JqZWN0IGN0eCkgewogICAgICAgIC8vIG5vdGhpbmcgdG8gZG8sIGlu\nLW1lbW9yeSBpbmZvIGlzIGFscmVhZHkgZGVsZXRlZCBieSBiYXNlIGNsYXNz\nCiAgICAgICAgY2FsbGJhY2sub3BlcmF0aW9uRmluaXNoZWQoY3R4LCBudWxs\nKTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHByb3RlY3RlZCBib29sZWFu\nIGlzUGFydGlhbFVwZGF0ZVN1cHBvcnRlZCgpIHsKICAgICAgICByZXR1cm4g\nZmFsc2U7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwcm90ZWN0ZWQgdm9p\nZCB1cGRhdGVTdWJzY3JpcHRpb25EYXRhKEJ5dGVTdHJpbmcgdG9waWMsIEJ5\ndGVTdHJpbmcgc3Vic2NyaWJlcklkLCBTdWJzY3JpcHRpb25EYXRhIGRhdGEs\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZl\ncnNpb24gdmVyc2lvbiwgQ2FsbGJhY2s8VmVyc2lvbj4gY2FsbGJhY2ssIE9i\namVjdCBjdHgpIHsKICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVy\nYXRpb25FeGNlcHRpb24oIkRvZXNuJ3Qgc3VwcG9ydCBwYXJ0aWFsIHVwZGF0\nZSIpOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHJvdGVjdGVkIHZvaWQg\ncmVwbGFjZVN1YnNjcmlwdGlvbkRhdGEoQnl0ZVN0cmluZyB0b3BpYywgQnl0\nZVN0cmluZyBzdWJzY3JpYmVySWQsIFN1YnNjcmlwdGlvbkRhdGEgZGF0YSwK\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZl\ncnNpb24gdmVyc2lvbiwgQ2FsbGJhY2s8VmVyc2lvbj4gY2FsbGJhY2ssIE9i\namVjdCBjdHgpIHsKICAgICAgICAvLyBub3RoaW5nIHRvIGRvLCBpbi1tZW1v\ncnkgaW5mbyBpcyBhbHJlYWR5IHVwZGF0ZWQgYnkgYmFzZSBjbGFzcwogICAg\nICAgIGNhbGxiYWNrLm9wZXJhdGlvbkZpbmlzaGVkKGN0eCwgbnVsbCk7CiAg\nICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBsb3N0VG9waWMo\nQnl0ZVN0cmluZyB0b3BpYykgewogICAgICAgIC8vIEJhY2t1cCB0b3BpYy1z\ndWIyc2VxIG1hcCBmb3IgcmVhZFN1YnNjcmlwdGlvbnMKICAgICAgICBmaW5h\nbCBNYXA8Qnl0ZVN0cmluZywgSW5NZW1vcnlTdWJzY3JpcHRpb25TdGF0ZT4g\nc3ViMnNlcSA9IHRvcDJzdWIyc2VxLmdldCh0b3BpYyk7CiAgICAgICAgaWYg\nKG51bGwgIT0gc3ViMnNlcSkKICAgICAgICAgICAgdG9wMnN1YjJzZXFCYWNr\ndXAucHV0KHRvcGljLCBzdWIyc2VxKTsKCiAgICAgICAgaWYgKGxvZ2dlci5p\nc0RlYnVnRW5hYmxlZCgpKSB7CiAgICAgICAgICAgIGxvZ2dlci5kZWJ1Zygi\nSW5NZW1vcnlTdWJzY3JpcHRpb25NYW5hZ2VyIGlzIGxvc2luZyB0b3BpYyAi\nICsgdG9waWMudG9TdHJpbmdVdGY4KCkpOwogICAgICAgIH0KICAgICAgICBx\ndWV1ZXIucHVzaEFuZE1heWJlUnVuKHRvcGljLCBuZXcgUmVsZWFzZU9wKHRv\ncGljLCBub29wQ2FsbGJhY2ssIG51bGwpKTsKICAgIH0KCiAgICBAT3ZlcnJp\nZGUKICAgIHByb3RlY3RlZCB2b2lkIHJlYWRTdWJzY3JpcHRpb25zKEJ5dGVT\ndHJpbmcgdG9waWMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICBDYWxsYmFjazxNYXA8Qnl0ZVN0cmluZywgSW5NZW1vcnlTdWJzY3Jp\ncHRpb25TdGF0ZT4+IGNiLCBPYmplY3QgY3R4KSB7CiAgICAgICAgLy8gU2lu\nY2Ugd2UgYmFja2VkIHVwIGluLW1lbW9yeSBpbmZvcm1hdGlvbiBvbiBsb3N0\nVG9waWMsIHdlIGNhbiBqdXN0IHJldHVybiB0aGF0IGJhY2sKICAgICAgICBN\nYXA8Qnl0ZVN0cmluZywgSW5NZW1vcnlTdWJzY3JpcHRpb25TdGF0ZT4gdG9w\naWNTdWJzID0gdG9wMnN1YjJzZXFCYWNrdXAucmVtb3ZlKHRvcGljKTsKCiAg\nICAgICAgaWYgKHRvcGljU3VicyAhPSBudWxsKSB7CiAgICAgICAgICAgIGNi\nLm9wZXJhdGlvbkZpbmlzaGVkKGN0eCwgdG9waWNTdWJzKTsKICAgICAgICB9\nIGVsc2UgewogICAgICAgICAgICBjYi5vcGVyYXRpb25GaW5pc2hlZChjdHgs\nIG5ldyBDb25jdXJyZW50SGFzaE1hcDxCeXRlU3RyaW5nLCBJbk1lbW9yeVN1\nYnNjcmlwdGlvblN0YXRlPigpKTsKICAgICAgICB9CgogICAgfQoKICAgIEBP\ndmVycmlkZQogICAgcHJvdGVjdGVkIHZvaWQgcmVhZFN1YnNjcmlwdGlvbkRh\ndGEoQnl0ZVN0cmluZyB0b3BpYywKICAgICAgICAgICAgQnl0ZVN0cmluZyBz\ndWJzY3JpYmVySWQsIENhbGxiYWNrPEluTWVtb3J5U3Vic2NyaXB0aW9uU3Rh\ndGU+IGNiLCBPYmplY3QgY3R4KSB7CiAgICAgICAgLy8gU2luY2Ugd2UgYmFj\na2VkIHVwIGluLW1lbW9yeSBpbmZvcm1hdGlvbiBvbiBsb3N0VG9waWMsIHdl\nIGNhbiBqdXN0IHJldHVybiB0aGF0IGJhY2sKICAgICAgICBNYXA8Qnl0ZVN0\ncmluZywgSW5NZW1vcnlTdWJzY3JpcHRpb25TdGF0ZT4gc3ViMnNlcUJhY2t1\ncCA9IHRvcDJzdWIyc2VxQmFja3VwLmdldCh0b3BpYyk7CiAgICAgICAgaWYg\nKHN1YjJzZXFCYWNrdXAgPT0gbnVsbCkgewogICAgICAgICAgICBjYi5vcGVy\nYXRpb25GaW5pc2hlZChjdHgsIG5ldyBJbk1lbW9yeVN1YnNjcmlwdGlvblN0\nYXRlKAogICAgICAgICAgICAgICAgICAgIFN1YnNjcmlwdGlvbkRhdGEuZ2V0\nRGVmYXVsdEluc3RhbmNlKCksIFZlcnNpb24uTkVXKSk7CiAgICAgICAgICAg\nIHJldHVybjsKICAgICAgICB9CiAgICAgICAgSW5NZW1vcnlTdWJzY3JpcHRp\nb25TdGF0ZSBzdWJTdGF0ZSA9IHN1YjJzZXFCYWNrdXAucmVtb3ZlKHN1YnNj\ncmliZXJJZCk7CiAgICAgICAgCiAgICAgICAgaWYgKHN1YlN0YXRlICE9IG51\nbGwpIHsKICAgICAgICAgICAgY2Iub3BlcmF0aW9uRmluaXNoZWQoY3R4LCBz\ndWJTdGF0ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY2Iub3Bl\ncmF0aW9uRmluaXNoZWQoY3R4LCBuZXcgSW5NZW1vcnlTdWJzY3JpcHRpb25T\ndGF0ZSgKICAgICAgICAgICAgICAgICAgICBTdWJzY3JpcHRpb25EYXRhLmdl\ndERlZmF1bHRJbnN0YW5jZSgpLCBWZXJzaW9uLk5FVykpOwogICAgICAgIH0K\nICAgIH0KCn0K\n","encoding":"base64"}

