{"sha":"04ba379e40ceddc29d4df7de8484e73a1834fa63","node_id":"MDQ6QmxvYjE1NzU5NTY6MDRiYTM3OWU0MGNlZGRjMjlkNGRmN2RlODQ4NGU3M2ExODM0ZmE2Mw==","size":4557,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/04ba379e40ceddc29d4df7de8484e73a1834fa63","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy56b29rZWVwZXI7CgppbXBvcnQgamF2\nYS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5MaXN0OwoKaW1w\nb3J0IG9yZy5zbGY0ai5Mb2dnZXI7CmltcG9ydCBvcmcuc2xmNGouTG9nZ2Vy\nRmFjdG9yeTsKaW1wb3J0IG9yZy5hcGFjaGUuem9va2VlcGVyLkFzeW5jQ2Fs\nbGJhY2s7CmltcG9ydCBvcmcuYXBhY2hlLnpvb2tlZXBlci5DcmVhdGVNb2Rl\nOwppbXBvcnQgb3JnLmFwYWNoZS56b29rZWVwZXIuS2VlcGVyRXhjZXB0aW9u\nOwppbXBvcnQgb3JnLmFwYWNoZS56b29rZWVwZXIuWm9vS2VlcGVyOwppbXBv\ncnQgb3JnLmFwYWNoZS56b29rZWVwZXIuS2VlcGVyRXhjZXB0aW9uLkNvZGU7\nCmltcG9ydCBvcmcuYXBhY2hlLnpvb2tlZXBlci5kYXRhLkFDTDsKCmltcG9y\ndCBvcmcuYXBhY2hlLmhlZHdpZy51dGlsLlBhdGhVdGlsczsKCnB1YmxpYyBj\nbGFzcyBaa1V0aWxzIHsKCiAgICBzdGF0aWMgTG9nZ2VyIGxvZ2dlciA9IExv\nZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKFprVXRpbHMuY2xhc3MpOwoKICAgIHN0\nYXRpYyBjbGFzcyBTeW5jT2JqZWN0IHsKICAgICAgICBpbnQgcmM7CiAgICAg\nICAgU3RyaW5nIHBhdGg7CiAgICAgICAgYm9vbGVhbiBjYWxsZWQgPSBmYWxz\nZTsKICAgIH0KCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgY3JlYXRlRnVsbFBh\ndGhPcHRpbWlzdGljKGZpbmFsIFpvb0tlZXBlciB6aywgZmluYWwgU3RyaW5n\nIG9yaWdpbmFsUGF0aCwgZmluYWwgYnl0ZVtdIGRhdGEsCiAgICAgICAgICAg\nIGZpbmFsIExpc3Q8QUNMPiBhY2wsIGZpbmFsIENyZWF0ZU1vZGUgY3JlYXRl\nTW9kZSkKICAgIHRocm93cyBLZWVwZXJFeGNlcHRpb24sIElPRXhjZXB0aW9u\nLCBJbnRlcnJ1cHRlZEV4Y2VwdGlvbiB7CiAgICAgICAgZmluYWwgU3luY09i\namVjdCBzeW5jT2JqID0gbmV3IFN5bmNPYmplY3QoKTsKCiAgICAgICAgY3Jl\nYXRlRnVsbFBhdGhPcHRpbWlzdGljKAogICAgICAgICAgICB6aywgb3JpZ2lu\nYWxQYXRoLCBkYXRhLCBhY2wsIGNyZWF0ZU1vZGUsCiAgICAgICAgICAgIG5l\ndyBTYWZlQXN5bmNaS0NhbGxiYWNrLlN0cmluZ0NhbGxiYWNrKCkgewogICAg\nICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICBwdWJsaWMg\ndm9pZCBzYWZlUHJvY2Vzc1Jlc3VsdChmaW5hbCBpbnQgcmMsIFN0cmluZyBw\nYXRoLCBPYmplY3QgY3R4LCBTdHJpbmcgbmFtZSkgewogICAgICAgICAgICAg\nICAgICAgIHN5bmNocm9uaXplZCAoc3luY09iaikgewogICAgICAgICAgICAg\nICAgICAgICAgICBzeW5jT2JqLnJjID0gcmM7CiAgICAgICAgICAgICAgICAg\nICAgICAgIHN5bmNPYmoucGF0aCA9IHBhdGg7CiAgICAgICAgICAgICAgICAg\nICAgICAgIHN5bmNPYmouY2FsbGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAg\nICAgICAgICAgc3luY09iai5ub3RpZnkoKTsKICAgICAgICAgICAgICAgICAg\nICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIHN5bmNPYmoK\nICAgICAgICApOwoKICAgICAgICBzeW5jaHJvbml6ZWQgKHN5bmNPYmopIHsK\nICAgICAgICAgICAgd2hpbGUgKCFzeW5jT2JqLmNhbGxlZCkgewogICAgICAg\nICAgICAgICAgc3luY09iai53YWl0KCk7CiAgICAgICAgICAgIH0KICAgICAg\nICB9CgogICAgICAgIGlmIChDb2RlLk9LLmludFZhbHVlKCkgIT0gc3luY09i\nai5yYykgewogICAgICAgICAgICB0aHJvdyBLZWVwZXJFeGNlcHRpb24uY3Jl\nYXRlKHN5bmNPYmoucmMsIHN5bmNPYmoucGF0aCk7CiAgICAgICAgfQogICAg\nfQoKICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBjcmVhdGVGdWxsUGF0aE9wdGlt\naXN0aWMoZmluYWwgWm9vS2VlcGVyIHprLCBmaW5hbCBTdHJpbmcgb3JpZ2lu\nYWxQYXRoLCBmaW5hbCBieXRlW10gZGF0YSwKICAgICAgICAgICAgZmluYWwg\nTGlzdDxBQ0w+IGFjbCwgZmluYWwgQ3JlYXRlTW9kZSBjcmVhdGVNb2RlLCBm\naW5hbCBBc3luY0NhbGxiYWNrLlN0cmluZ0NhbGxiYWNrIGNhbGxiYWNrLAog\nICAgICAgICAgICBmaW5hbCBPYmplY3QgY3R4KSB7CgogICAgICAgIHprLmNy\nZWF0ZShvcmlnaW5hbFBhdGgsIGRhdGEsIGFjbCwgY3JlYXRlTW9kZSwgbmV3\nIFNhZmVBc3luY1pLQ2FsbGJhY2suU3RyaW5nQ2FsbGJhY2soKSB7CiAgICAg\nICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICBwdWJsaWMgdm9pZCBzYWZl\nUHJvY2Vzc1Jlc3VsdChpbnQgcmMsIFN0cmluZyBwYXRoLCBPYmplY3QgY3R4\nLCBTdHJpbmcgbmFtZSkgewoKICAgICAgICAgICAgICAgIGlmIChyYyAhPSBD\nb2RlLk5PTk9ERS5pbnRWYWx1ZSgpKSB7CiAgICAgICAgICAgICAgICAgICAg\nY2FsbGJhY2sucHJvY2Vzc1Jlc3VsdChyYywgcGF0aCwgY3R4LCBuYW1lKTsK\nICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9\nCgogICAgICAgICAgICAgICAgLy8gU2luY2UgSSBnb3QgYSBub25vZGUsIGl0\nIG1lYW5zIHRoYXQgbXkgcGFyZW50cyBkb24ndCBleGlzdAogICAgICAgICAg\nICAgICAgLy8gY3JlYXRlIG1vZGUgaXMgcGVyc2lzdGVudCBzaW5jZSBlcGhl\nbWVyYWwgbm9kZXMgY2FuJ3QgYmUKICAgICAgICAgICAgICAgIC8vIHBhcmVu\ndHMKICAgICAgICAgICAgICAgIFprVXRpbHMuY3JlYXRlRnVsbFBhdGhPcHRp\nbWlzdGljKHprLCBQYXRoVXRpbHMucGFyZW50KG9yaWdpbmFsUGF0aCksIG5l\ndyBieXRlWzBdLCBhY2wsCiAgICAgICAgICAgICAgICBDcmVhdGVNb2RlLlBF\nUlNJU1RFTlQsIG5ldyBTYWZlQXN5bmNaS0NhbGxiYWNrLlN0cmluZ0NhbGxi\nYWNrKCkgewoKICAgICAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAg\nICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBzYWZlUHJvY2Vzc1Jlc3VsdChp\nbnQgcmMsIFN0cmluZyBwYXRoLCBPYmplY3QgY3R4LCBTdHJpbmcgbmFtZSkg\newogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmMgPT0gQ29kZS5PSy5p\nbnRWYWx1ZSgpIHx8IHJjID09IENvZGUuTk9ERUVYSVNUUy5pbnRWYWx1ZSgp\nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzdWNjZWVkZWQg\naW4gY3JlYXRpbmcgdGhlIHBhcmVudCwgbm93CiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAvLyBjcmVhdGUgdGhlIG9yaWdpbmFsIHBhdGgKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIFprVXRpbHMuY3JlYXRlRnVsbFBhdGhP\ncHRpbWlzdGljKHprLCBvcmlnaW5hbFBhdGgsIGRhdGEsIGFjbCwgY3JlYXRl\nTW9kZSwgY2FsbGJhY2ssCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgpOwogICAgICAg\nICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgY2FsbGJhY2sucHJvY2Vzc1Jlc3VsdChyYywgcGF0aCwgY3R4\nLCBuYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAg\nICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIGN0eCk7CiAgICAgICAg\nICAgIH0KICAgICAgICB9LCBjdHgpOwoKICAgIH0KCiAgICBwdWJsaWMgc3Rh\ndGljIEtlZXBlckV4Y2VwdGlvbiBsb2dFcnJvckFuZENyZWF0ZVpLRXhjZXB0\naW9uKFN0cmluZyBtc2csIFN0cmluZyBwYXRoLCBpbnQgcmMpIHsKICAgICAg\nICBLZWVwZXJFeGNlcHRpb24ga2UgPSBLZWVwZXJFeGNlcHRpb24uY3JlYXRl\nKENvZGUuZ2V0KHJjKSwgcGF0aCk7CiAgICAgICAgbG9nZ2VyLmVycm9yKG1z\nZyArICIsemtQYXRoOiAiICsgcGF0aCwga2UpOwogICAgICAgIHJldHVybiBr\nZTsKICAgIH0KCn0K\n","encoding":"base64"}

