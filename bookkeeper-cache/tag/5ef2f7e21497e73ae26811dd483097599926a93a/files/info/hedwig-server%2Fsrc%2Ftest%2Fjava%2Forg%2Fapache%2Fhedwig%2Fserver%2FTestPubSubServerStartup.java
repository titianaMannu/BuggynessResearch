{"sha":"0893a3d8b09f70d9c058bc1f860e958109145d5c","node_id":"MDQ6QmxvYjE1NzU5NTY6MDg5M2EzZDhiMDlmNzBkOWMwNThiYzFmODYwZTk1ODEwOTE0NWQ1Yw==","size":5260,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/0893a3d8b09f70d9c058bc1f860e958109145d5c","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXI7CgppbXBvcnQgamF2YS5p\nby5GaWxlOwppbXBvcnQgamF2YS5pby5GaWxlV3JpdGVyOwppbXBvcnQgamF2\nYS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEubmV0LkluZXRTb2NrZXRB\nZGRyZXNzOwppbXBvcnQgamF2YS5uZXQuTWFsZm9ybWVkVVJMRXhjZXB0aW9u\nOwoKaW1wb3J0IGp1bml0LmZyYW1ld29yay5Bc3NlcnQ7CgppbXBvcnQgb3Jn\nLmFwYWNoZS5oZWR3aWcuY2xpZW50LmNvbmYuQ2xpZW50Q29uZmlndXJhdGlv\nbjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnNlcnZlci5Mb2dnaW5nRXhj\nZXB0aW9uSGFuZGxlcjsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci50\nZXN0LlBvcnRNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNv\nbmZpZ3VyYXRpb24uQ29uZmlndXJhdGlvbkV4Y2VwdGlvbjsKaW1wb3J0IG9y\nZy5hcGFjaGUuaGVkd2lnLnNlcnZlci5jb21tb24uU2VydmVyQ29uZmlndXJh\ndGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnNlcnZlci5uZXR0eS5Q\ndWJTdWJTZXJ2ZXI7CmltcG9ydCBvcmcuc2xmNGouTG9nZ2VyOwppbXBvcnQg\nb3JnLnNsZjRqLkxvZ2dlckZhY3Rvcnk7CmltcG9ydCBvcmcuYXBhY2hlLnpv\nb2tlZXBlci5DcmVhdGVNb2RlOwppbXBvcnQgb3JnLmFwYWNoZS56b29rZWVw\nZXIuWm9vRGVmczsKaW1wb3J0IG9yZy5hcGFjaGUuem9va2VlcGVyLlpvb0tl\nZXBlcjsKaW1wb3J0IG9yZy5hcGFjaGUuem9va2VlcGVyLnNlcnZlci5OSU9T\nZXJ2ZXJDbnhuRmFjdG9yeTsKaW1wb3J0IG9yZy5hcGFjaGUuem9va2VlcGVy\nLnNlcnZlci5ab29LZWVwZXJTZXJ2ZXI7CmltcG9ydCBvcmcuYXBhY2hlLnpv\nb2tlZXBlci50ZXN0LkNsaWVudEJhc2U7CmltcG9ydCBvcmcuanVuaXQuVGVz\ndDsKCnB1YmxpYyBjbGFzcyBUZXN0UHViU3ViU2VydmVyU3RhcnR1cCB7Cgog\nICAgcHJpdmF0ZSBzdGF0aWMgTG9nZ2VyIGxvZ2dlciA9IExvZ2dlckZhY3Rv\ncnkuZ2V0TG9nZ2VyKFRlc3RQdWJTdWJTZXJ2ZXJTdGFydHVwLmNsYXNzKTsK\nCiAgICAvKioKICAgICAqIFN0YXJ0LXVwIHpvb2tlZXBlciArIHB1YnN1YnNl\ncnZlciByZWFkaW5nIGZyb20gYSBjb25maWcgVVJMLiBUaGVuIHN0b3AKICAg\nICAqIGFuZCBjbGVhbnVwLgogICAgICoKICAgICAqIExvb3Agb3ZlciB0aGF0\nLgogICAgICoKICAgICAqIElmIHRoZSBwdWJzdWIgc2VydmVyIGRvZXMgbm90\nIHdhaXQgZm9yIGl0cyB6b29rZWVwZXIgY2xpZW50IHRvIGJlCiAgICAgKiBj\nb25uZWN0ZWQsIHRoZSBwdWJzdWIgc2VydmVyIHdpbGwgZmFpbCBhdCBzdGFy\ndHVwLgogICAgICoKICAgICAqLwogICAgQFRlc3QodGltZW91dD02MDAwMCkK\nICAgIHB1YmxpYyB2b2lkIHRlc3RQdWJTdWJTZXJ2ZXJJbnN0YW50aWF0aW9u\nV2l0aENvbmZpZygpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIGZvciAo\naW50IGkgPSAwOyBpIDwgMTA7IGkrKykgewogICAgICAgICAgICBsb2dnZXIu\naW5mbygiaXRlcmF0aW9uICIgKyBpKTsKICAgICAgICAgICAgaW5zdGFudGlh\ndGVBbmREZXN0cm95UHViU3ViU2VydmVyKCk7CiAgICAgICAgfQogICAgfQoK\nICAgIHByaXZhdGUgdm9pZCBpbnN0YW50aWF0ZUFuZERlc3Ryb3lQdWJTdWJT\nZXJ2ZXIoKSB0aHJvd3MgSU9FeGNlcHRpb24sIEludGVycnVwdGVkRXhjZXB0\naW9uLCBDb25maWd1cmF0aW9uRXhjZXB0aW9uLAogICAgICAgIE1hbGZvcm1l\nZFVSTEV4Y2VwdGlvbiwgRXhjZXB0aW9uIHsKICAgICAgICBpbnQgemtQb3J0\nID0gUG9ydE1hbmFnZXIubmV4dEZyZWVQb3J0KCk7CiAgICAgICAgaW50IGh3\nUG9ydCA9IFBvcnRNYW5hZ2VyLm5leHRGcmVlUG9ydCgpOwogICAgICAgIGlu\ndCBod1NTTFBvcnQgPSBQb3J0TWFuYWdlci5uZXh0RnJlZVBvcnQoKTsKICAg\nICAgICBTdHJpbmcgaGVkd2lnUGFyYW1zID0gImRlZmF1bHRfc2VydmVyX2hv\nc3Q9bG9jYWxob3N0OiIgKyBod1BvcnQgKyAiXG4iCiAgICAgICAgICAgICsg\nInprX2hvc3Q9bG9jYWxob3N0OiIgKyB6a1BvcnQgKyAiXG4iCiAgICAgICAg\nICAgICsgInNlcnZlcl9wb3J0PSIgKyBod1BvcnQgKyAiXG4iCiAgICAgICAg\nICAgICsgInNzbF9zZXJ2ZXJfcG9ydD0iICsgaHdTU0xQb3J0ICsgIlxuIgog\nICAgICAgICAgICArICJ6a190aW1lb3V0PTIwMDBcbiI7CgogICAgICAgIEZp\nbGUgaGVkd2lnQ29uZmlnRmlsZSA9IG5ldyBGaWxlKFN5c3RlbS5nZXRQcm9w\nZXJ0eSgiamF2YS5pby50bXBkaXIiKSArICIvaGVkd2lnLmNmZyIpOwogICAg\nICAgIHdyaXRlU3RyaW5nVG9GaWxlKGhlZHdpZ1BhcmFtcywgaGVkd2lnQ29u\nZmlnRmlsZSk7CgogICAgICAgIENsaWVudEJhc2Uuc2V0dXBUZXN0RW52KCk7\nCiAgICAgICAgRmlsZSB6a1RtcERpciA9IEZpbGUuY3JlYXRlVGVtcEZpbGUo\nInpvb2tlZXBlciIsICJ0ZXN0Iik7CiAgICAgICAgemtUbXBEaXIuZGVsZXRl\nKCk7CiAgICAgICAgemtUbXBEaXIubWtkaXIoKTsKCiAgICAgICAgWm9vS2Vl\ncGVyU2VydmVyIHprcyA9IG5ldyBab29LZWVwZXJTZXJ2ZXIoemtUbXBEaXIs\nIHprVG1wRGlyLCB6a1BvcnQpOwoKICAgICAgICBOSU9TZXJ2ZXJDbnhuRmFj\ndG9yeSBzZXJ2ZXJGYWN0b3J5ID0gbmV3IE5JT1NlcnZlckNueG5GYWN0b3J5\nKCk7CiAgICAgICAgc2VydmVyRmFjdG9yeS5jb25maWd1cmUobmV3IEluZXRT\nb2NrZXRBZGRyZXNzKHprUG9ydCksIDEwMCk7CiAgICAgICAgc2VydmVyRmFj\ndG9yeS5zdGFydHVwKHprcyk7CgogICAgICAgIGJvb2xlYW4gYiA9IENsaWVu\ndEJhc2Uud2FpdEZvclNlcnZlclVwKCIxMjcuMC4wLjE6IiArIHprUG9ydCwg\nNTAwMCk7CiAgICAgICAgU2VydmVyQ29uZmlndXJhdGlvbiBzZXJ2ZXJDb25m\nID0gbmV3IFNlcnZlckNvbmZpZ3VyYXRpb24oKTsKICAgICAgICBzZXJ2ZXJD\nb25mLmxvYWRDb25mKGhlZHdpZ0NvbmZpZ0ZpbGUudG9VUkkoKS50b1VSTCgp\nKTsKCiAgICAgICAgbG9nZ2VyLmluZm8oIlpvb2tlZXBlciBzZXJ2ZXIgdXAg\nYW5kIHJ1bm5pbmchIik7CgogICAgICAgIFpvb0tlZXBlciB6a2MgPSBuZXcg\nWm9vS2VlcGVyKCIxMjcuMC4wLjE6IiArIHprUG9ydCwgNTAwMCwgbnVsbCk7\nCgogICAgICAgIC8vIGluaXRpYWxpemUgdGhlIHprIGNsaWVudCB3aXRoIChm\nYWtlKSB2YWx1ZXMKICAgICAgICB6a2MuY3JlYXRlKCIvbGVkZ2VycyIsIG5l\ndyBieXRlWzBdLCBab29EZWZzLklkcy5PUEVOX0FDTF9VTlNBRkUsIENyZWF0\nZU1vZGUuUEVSU0lTVEVOVCk7CiAgICAgICAgemtjLmNyZWF0ZSgiL2xlZGdl\ncnMvYXZhaWxhYmxlIiwgbmV3IGJ5dGVbMF0sIFpvb0RlZnMuSWRzLk9QRU5f\nQUNMX1VOU0FGRSwgQ3JlYXRlTW9kZS5QRVJTSVNURU5UKTsKCiAgICAgICAg\nemtjLmNsb3NlKCk7CiAgICAgICAgUHViU3ViU2VydmVyIGhlZHdpZ1NlcnZl\nciA9IG51bGw7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbG9nZ2VyLmlu\nZm8oInN0YXJ0aW5nIGhlZHdpZyBicm9rZXIhIik7CiAgICAgICAgICAgIGhl\nZHdpZ1NlcnZlciA9IG5ldyBQdWJTdWJTZXJ2ZXIoc2VydmVyQ29uZiwgbmV3\nIENsaWVudENvbmZpZ3VyYXRpb24oKSwgbmV3IExvZ2dpbmdFeGNlcHRpb25I\nYW5kbGVyKCkpOwogICAgICAgICAgICBoZWR3aWdTZXJ2ZXIuc3RhcnQoKTsK\nICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBl\nLnByaW50U3RhY2tUcmFjZSgpOwogICAgICAgIH0KICAgICAgICBBc3NlcnQu\nYXNzZXJ0Tm90TnVsbCgiZmFpbGVkIHRvIGluc3RhbnRpYXRlIGhlZHdpZyBw\ndWIgc3ViIHNlcnZlciIsIGhlZHdpZ1NlcnZlcik7CgogICAgICAgIGhlZHdp\nZ1NlcnZlci5zaHV0ZG93bigpOwogICAgICAgIHNlcnZlckZhY3Rvcnkuc2h1\ndGRvd24oKTsKCiAgICAgICAgemtzLnNodXRkb3duKCk7CgogICAgICAgIHpr\nVG1wRGlyLmRlbGV0ZSgpOwoKICAgICAgICBDbGllbnRCYXNlLndhaXRGb3JT\nZXJ2ZXJEb3duKCJsb2NhbGhvc3Q6IiArIHprUG9ydCwgMTAwMDApOwoKICAg\nIH0KCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgd3JpdGVTdHJpbmdUb0ZpbGUo\nU3RyaW5nIHN0cmluZywgRmlsZSBmKSB0aHJvd3MgSU9FeGNlcHRpb24gewog\nICAgICAgIGlmIChmLmV4aXN0cygpKSB7CiAgICAgICAgICAgIGlmICghZi5k\nZWxldGUoKSkgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVF\neGNlcHRpb24oImNhbm5vdCBjcmVhdGUgZmlsZSAiICsgZi5nZXRBYnNvbHV0\nZVBhdGgoKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYg\nKCFmLmNyZWF0ZU5ld0ZpbGUoKSkgewogICAgICAgICAgICB0aHJvdyBuZXcg\nUnVudGltZUV4Y2VwdGlvbigiY2Fubm90IGNyZWF0ZSBuZXcgZmlsZSAiICsg\nZi5nZXRBYnNvbHV0ZVBhdGgoKSk7CiAgICAgICAgfQoKICAgICAgICBGaWxl\nV3JpdGVyIGZ3ID0gbmV3IEZpbGVXcml0ZXIoZik7CiAgICAgICAgZncud3Jp\ndGUoc3RyaW5nKTsKICAgICAgICBmdy5jbG9zZSgpOwogICAgfQp9Cg==\n","encoding":"base64"}

