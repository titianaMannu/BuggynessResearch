{"sha":"1386a9cf39c2814a83eb07ad7e2c6a666eeb4ac8","node_id":"MDQ6QmxvYjE1NzU5NTY6MTM4NmE5Y2YzOWMyODE0YTgzZWIwN2FkN2UyYzZhNjY2ZWViNGFjOA==","size":9304,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/1386a9cf39c2814a83eb07ad7e2c6a666eeb4ac8","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIuZGVsaXZlcnk7CgppbXBv\ncnQgamF2YS51dGlsLkFycmF5czsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0\naW9uOwppbXBvcnQgamF2YS51dGlsLkxpbmtlZExpc3Q7CmltcG9ydCBqYXZh\nLnV0aWwuTGlzdDsKaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkNvdW50\nRG93bkxhdGNoOwppbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuVGltZVVu\naXQ7CmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5hdG9taWMuQXRvbWlj\nSW50ZWdlcjsKCmltcG9ydCBvcmcuanVuaXQuQmVmb3JlOwppbXBvcnQgb3Jn\nLmp1bml0LlRlc3Q7CmltcG9ydCBvcmcuanVuaXQucnVubmVyLlJ1bldpdGg7\nCmltcG9ydCBvcmcuanVuaXQucnVubmVycy5QYXJhbWV0ZXJpemVkOwppbXBv\ncnQgb3JnLmp1bml0LnJ1bm5lcnMuUGFyYW1ldGVyaXplZC5QYXJhbWV0ZXJz\nOwppbXBvcnQgc3RhdGljIG9yZy5qdW5pdC5Bc3NlcnQuYXNzZXJ0RmFsc2U7\nCmltcG9ydCBzdGF0aWMgb3JnLmp1bml0LkFzc2VydC5hc3NlcnRUcnVlOwpp\nbXBvcnQgc3RhdGljIG9yZy5qdW5pdC5Bc3NlcnQuYXNzZXJ0RXF1YWxzOwoK\naW1wb3J0IGNvbS5nb29nbGUucHJvdG9idWYuQnl0ZVN0cmluZzsKCmltcG9y\ndCBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQuSGVkd2lnQ2xpZW50OwppbXBv\ncnQgb3JnLmFwYWNoZS5oZWR3aWcuY2xpZW50LmFwaS5NZXNzYWdlSGFuZGxl\ncjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmNsaWVudC5hcGkuUHVibGlz\naGVyOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuY2xpZW50LmFwaS5TdWJz\nY3JpYmVyOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuY2xpZW50LmNvbmYu\nQ2xpZW50Q29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2ln\nLnByb3RvY29sLlB1YlN1YlByb3RvY29sLk1lc3NhZ2U7CmltcG9ydCBvcmcu\nYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5QdWJTdWJQcm90b2NvbC5NZXNzYWdl\nU2VxSWQ7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5QdWJT\ndWJQcm90b2NvbC5TdWJzY3JpYmVSZXF1ZXN0LkNyZWF0ZU9yQXR0YWNoOwpp\nbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcucHJvdG9jb2wuUHViU3ViUHJvdG9j\nb2wuU3Vic2NyaXB0aW9uT3B0aW9uczsKaW1wb3J0IG9yZy5hcGFjaGUuaGVk\nd2lnLnNlcnZlci5IZWR3aWdIdWJUZXN0QmFzZTsKaW1wb3J0IG9yZy5hcGFj\naGUuaGVkd2lnLnNlcnZlci5jb21tb24uU2VydmVyQ29uZmlndXJhdGlvbjsK\naW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnV0aWwuQ2FsbGJhY2s7CgpAUnVu\nV2l0aChQYXJhbWV0ZXJpemVkLmNsYXNzKQpwdWJsaWMgY2xhc3MgVGVzdFRo\ncm90dGxpbmdEZWxpdmVyeSBleHRlbmRzIEhlZHdpZ0h1YlRlc3RCYXNlIHsK\nCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBpbnQgREVGQVVMVF9NRVNTQUdF\nX1dJTkRPV19TSVpFID0gMTA7CgogICAgcHJvdGVjdGVkIGNsYXNzIFRocm90\ndGxlRGVsaXZlcnlTZXJ2ZXJDb25maWd1cmF0aW9uIGV4dGVuZHMgSHViU2Vy\ndmVyQ29uZmlndXJhdGlvbiB7CgogICAgICAgIFRocm90dGxlRGVsaXZlcnlT\nZXJ2ZXJDb25maWd1cmF0aW9uKGludCBzZXJ2ZXJQb3J0LCBpbnQgc3NsU2Vy\ndmVyUG9ydCkgewogICAgICAgICAgICBzdXBlcihzZXJ2ZXJQb3J0LCBzc2xT\nZXJ2ZXJQb3J0KTsKICAgICAgICB9CgogICAgICAgIEBPdmVycmlkZQogICAg\nICAgIHB1YmxpYyBpbnQgZ2V0RGVmYXVsdE1lc3NhZ2VXaW5kb3dTaXplKCkg\newogICAgICAgICAgICByZXR1cm4gVGVzdFRocm90dGxpbmdEZWxpdmVyeS50\naGlzLkRFRkFVTFRfTUVTU0FHRV9XSU5ET1dfU0laRTsKICAgICAgICB9CiAg\nICB9CgogICAgcHJvdGVjdGVkIGNsYXNzIFRocm90dGxlRGVsaXZlcnlDbGll\nbnRDb25maWd1cmF0aW9uIGV4dGVuZHMgSHViQ2xpZW50Q29uZmlndXJhdGlv\nbiB7CgogICAgICAgIGludCBtZXNzYWdlV2luZG93U2l6ZTsKCiAgICAgICAg\nVGhyb3R0bGVEZWxpdmVyeUNsaWVudENvbmZpZ3VyYXRpb24oKSB7CiAgICAg\nICAgICAgIHRoaXMoVGVzdFRocm90dGxpbmdEZWxpdmVyeS50aGlzLkRFRkFV\nTFRfTUVTU0FHRV9XSU5ET1dfU0laRSk7CiAgICAgICAgfQoKICAgICAgICBU\naHJvdHRsZURlbGl2ZXJ5Q2xpZW50Q29uZmlndXJhdGlvbihpbnQgbWVzc2Fn\nZVdpbmRvd1NpemUpIHsKICAgICAgICAgICAgdGhpcy5tZXNzYWdlV2luZG93\nU2l6ZSA9IG1lc3NhZ2VXaW5kb3dTaXplOwogICAgICAgIH0KCiAgICAgICAg\nQE92ZXJyaWRlCiAgICAgICAgcHVibGljIGludCBnZXRNYXhpbXVtT3V0c3Rh\nbmRpbmdNZXNzYWdlcygpIHsKICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2VX\naW5kb3dTaXplOwogICAgICAgIH0KCiAgICAgICAgdm9pZCBzZXRNZXNzYWdl\nV2luZG93U2l6ZShpbnQgbWVzc2FnZVdpbmRvd1NpemUpIHsKICAgICAgICAg\nICAgdGhpcy5tZXNzYWdlV2luZG93U2l6ZSA9IG1lc3NhZ2VXaW5kb3dTaXpl\nOwogICAgICAgIH0KCiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHVibGlj\nIGJvb2xlYW4gaXNBdXRvU2VuZENvbnN1bWVNZXNzYWdlRW5hYmxlZCgpIHsK\nICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAg\nQE92ZXJyaWRlCiAgICAgICAgcHVibGljIGJvb2xlYW4gaXNTdWJzY3JpcHRp\nb25DaGFubmVsU2hhcmluZ0VuYWJsZWQoKSB7CiAgICAgICAgICAgIHJldHVy\nbiBpc1N1YnNjcmlwdGlvbkNoYW5uZWxTaGFyaW5nRW5hYmxlZDsKICAgICAg\nICB9CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIHRocm90dGxlWChQdWJsaXNo\nZXIgcHViLCBmaW5hbCBTdWJzY3JpYmVyIHN1YiwKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgQnl0ZVN0cmluZyB0b3BpYywgQnl0ZVN0cmluZyBzdWJp\nZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWwgaW50IFgpIHRo\ncm93cyBFeGNlcHRpb24gewogICAgICAgIGZvciAoaW50IGk9MTsgaTw9MypY\nOyBpKyspIHsKICAgICAgICAgICAgcHViLnB1Ymxpc2godG9waWMsIE1lc3Nh\nZ2UubmV3QnVpbGRlcigpLnNldEJvZHkoCiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICBCeXRlU3RyaW5nLmNvcHlGcm9tVXRmOChTdHJpbmcudmFs\ndWVPZihpKSkpLmJ1aWxkKCkpOwogICAgICAgIH0KICAgICAgICBzdWIuc3Vi\nc2NyaWJlKHRvcGljLCBzdWJpZCwgQ3JlYXRlT3JBdHRhY2guQVRUQUNIKTsK\nCiAgICAgICAgZmluYWwgQXRvbWljSW50ZWdlciBleHBlY3RlZCA9IG5ldyBB\ndG9taWNJbnRlZ2VyKDEpOwogICAgICAgIGZpbmFsIENvdW50RG93bkxhdGNo\nIHRocm90dGxlTGF0Y2ggPSBuZXcgQ291bnREb3duTGF0Y2goMSk7CiAgICAg\nICAgZmluYWwgQ291bnREb3duTGF0Y2ggbm9uVGhyb3R0bGVMYXRjaCA9IG5l\ndyBDb3VudERvd25MYXRjaCgxKTsKICAgICAgICBzdWIuc3RhcnREZWxpdmVy\neSh0b3BpYywgc3ViaWQsIG5ldyBNZXNzYWdlSGFuZGxlcigpIHsKICAgICAg\nICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyBzeW5jaHJvbml6\nZWQgdm9pZCBkZWxpdmVyKEJ5dGVTdHJpbmcgdG9waWMsIEJ5dGVTdHJpbmcg\nc3Vic2NyaWJlcklkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICBNZXNzYWdlIG1zZywKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2FsbGJhY2s8Vm9pZD4gY2Fs\nbGJhY2ssIE9iamVjdCBjb250ZXh0KSB7CiAgICAgICAgICAgICAgICB0cnkg\newogICAgICAgICAgICAgICAgICAgIGludCB2YWx1ZSA9IEludGVnZXIudmFs\ndWVPZihtc2cuZ2V0Qm9keSgpLnRvU3RyaW5nVXRmOCgpKTsKICAgICAgICAg\nICAgICAgICAgICBsb2dnZXIuZGVidWcoIlJlY2VpdmVkIG1lc3NhZ2Uge30s\nIiwgdmFsdWUpOwoKICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0g\nZXhwZWN0ZWQuZ2V0KCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZXhw\nZWN0ZWQuaW5jcmVtZW50QW5kR2V0KCk7CiAgICAgICAgICAgICAgICAgICAg\nfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXJyb3IgY29u\nZGl0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcigi\nRGlkIG5vdCByZWNlaXZlIGV4cGVjdGVkIHZhbHVlLCBleHBlY3RlZCB7fSwg\nZ290IHt9IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIGV4cGVjdGVkLmdldCgpLCB2YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAg\nICAgIGV4cGVjdGVkLnNldCgwKTsKICAgICAgICAgICAgICAgICAgICAgICAg\ndGhyb3R0bGVMYXRjaC5jb3VudERvd24oKTsKICAgICAgICAgICAgICAgICAg\nICAgICAgbm9uVGhyb3R0bGVMYXRjaC5jb3VudERvd24oKTsKICAgICAgICAg\nICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKGV4cGVjdGVk\nLmdldCgpID4gWCsxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRocm90\ndGxlTGF0Y2guY291bnREb3duKCk7CiAgICAgICAgICAgICAgICAgICAgfQog\nICAgICAgICAgICAgICAgICAgIGlmIChleHBlY3RlZC5nZXQoKSA9PSAoMyAq\nIFggKyAxKSkgewogICAgICAgICAgICAgICAgICAgICAgICBub25UaHJvdHRs\nZUxhdGNoLmNvdW50RG93bigpOwogICAgICAgICAgICAgICAgICAgIH0KICAg\nICAgICAgICAgICAgICAgICBjYWxsYmFjay5vcGVyYXRpb25GaW5pc2hlZChj\nb250ZXh0LCBudWxsKTsKICAgICAgICAgICAgICAgICAgICBpZiAoZXhwZWN0\nZWQuZ2V0KCkgPiBYICsgMSkgewogICAgICAgICAgICAgICAgICAgICAgICBz\ndWIuY29uc3VtZSh0b3BpYywgc3Vic2NyaWJlcklkLCBtc2cuZ2V0TXNnSWQo\nKSk7CiAgICAgICAgICAgICAgICAgICAgfSAgICAgIAogICAgICAgICAgICAg\nICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgICAg\nICBsb2dnZXIuZXJyb3IoIlJlY2VpdmVkIGJhZCBtZXNzYWdlIiwgZSk7CiAg\nICAgICAgICAgICAgICAgICAgdGhyb3R0bGVMYXRjaC5jb3VudERvd24oKTsK\nICAgICAgICAgICAgICAgICAgICBub25UaHJvdHRsZUxhdGNoLmNvdW50RG93\nbigpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAg\nfSk7CiAgICAgICAgYXNzZXJ0RmFsc2UoIlJlY2VpdmVkIG1vcmUgbWVzc2Fn\nZXMgdGhhbiB0aHJvdHRsZSB2YWx1ZSAiICsgWCwKICAgICAgICAgICAgICAg\nICAgICB0aHJvdHRsZUxhdGNoLmF3YWl0KDMsIFRpbWVVbml0LlNFQ09ORFMp\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIlNob3VsZCBiZSBleHBlY3RlZCBt\nZXNzYWdlcyB3aXRoIG9ubHkgIiArIChYKzEpLCBYKzEsIGV4cGVjdGVkLmdl\ndCgpKTsKCiAgICAgICAgLy8gY29uc3VtZSBtZXNzYWdlcyB0byBub3QgdGhy\nb3R0bGUgaXQKICAgICAgICBmb3IgKGludCBpPTE7IGk8PVg7IGkrKykgewog\nICAgICAgICAgICBzdWIuY29uc3VtZSh0b3BpYywgc3ViaWQsCiAgICAgICAg\nICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXFJZC5uZXdCdWlsZGVyKCkuc2V0\nTG9jYWxDb21wb25lbnQoaSkuYnVpbGQoKSk7CiAgICAgICAgfQoKICAgICAg\nICBhc3NlcnRUcnVlKCJUaW1lZCBvdXQgd2FpdGluZyBmb3IgbWVzc2FnZXMg\nIiArICgzKlggKyAxKSwKICAgICAgICAgICAgICAgICAgIG5vblRocm90dGxl\nTGF0Y2guYXdhaXQoMTAsIFRpbWVVbml0LlNFQ09ORFMpKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoIlNob3VsZCBiZSBleHBlY3RlZCBtZXNzYWdlIHdpdGgg\nIiArICgzKlggKyAxKSwKICAgICAgICAgICAgICAgICAgICAgMypYICsgMSwg\nZXhwZWN0ZWQuZ2V0KCkpOwoKICAgICAgICBzdWIuc3RvcERlbGl2ZXJ5KHRv\ncGljLCBzdWJpZCk7CiAgICAgICAgc3ViLmNsb3NlU3Vic2NyaXB0aW9uKHRv\ncGljLCBzdWJpZCk7CiAgICB9CgogICAgQFBhcmFtZXRlcnMKICAgIHB1Ymxp\nYyBzdGF0aWMgQ29sbGVjdGlvbjxPYmplY3RbXT4gY29uZmlncygpIHsKICAg\nICAgICByZXR1cm4gQXJyYXlzLmFzTGlzdChuZXcgT2JqZWN0W11bXSB7IHsg\nZmFsc2UgfSwgeyB0cnVlIH0gfSk7CiAgICB9CgogICAgcHJvdGVjdGVkIGJv\nb2xlYW4gaXNTdWJzY3JpcHRpb25DaGFubmVsU2hhcmluZ0VuYWJsZWQ7Cgog\nICAgcHVibGljIFRlc3RUaHJvdHRsaW5nRGVsaXZlcnkoYm9vbGVhbiBpc1N1\nYnNjcmlwdGlvbkNoYW5uZWxTaGFyaW5nRW5hYmxlZCkgewogICAgICAgIHN1\ncGVyKDEpOwogICAgICAgIHRoaXMuaXNTdWJzY3JpcHRpb25DaGFubmVsU2hh\ncmluZ0VuYWJsZWQgPSBpc1N1YnNjcmlwdGlvbkNoYW5uZWxTaGFyaW5nRW5h\nYmxlZDsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIEBCZWZvcmUKICAgIHB1\nYmxpYyB2b2lkIHNldFVwKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAg\nc3VwZXIuc2V0VXAoKTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHByb3Rl\nY3RlZCBTZXJ2ZXJDb25maWd1cmF0aW9uIGdldFNlcnZlckNvbmZpZ3VyYXRp\nb24oaW50IHBvcnQsIGludCBzc2xQb3J0KSB7CiAgICAgICAgcmV0dXJuIG5l\ndyBUaHJvdHRsZURlbGl2ZXJ5U2VydmVyQ29uZmlndXJhdGlvbihwb3J0LCBz\nc2xQb3J0KTsKICAgIH0KCiAgICBAVGVzdCh0aW1lb3V0PTYwMDAwKQogICAg\ncHVibGljIHZvaWQgdGVzdFNlcnZlclNpZGVUaHJvdHRsZSgpIHRocm93cyBF\neGNlcHRpb24gewogICAgICAgIGludCBtZXNzYWdlV2luZG93U2l6ZSA9IERF\nRkFVTFRfTUVTU0FHRV9XSU5ET1dfU0laRTsKICAgICAgICBUaHJvdHRsZURl\nbGl2ZXJ5Q2xpZW50Q29uZmlndXJhdGlvbiBjb25mID0KICAgICAgICAgICAg\nbmV3IFRocm90dGxlRGVsaXZlcnlDbGllbnRDb25maWd1cmF0aW9uKCk7CiAg\nICAgICAgSGVkd2lnQ2xpZW50IGNsaWVudCA9IG5ldyBIZWR3aWdDbGllbnQo\nY29uZik7CiAgICAgICAgUHVibGlzaGVyIHB1YiA9IGNsaWVudC5nZXRQdWJs\naXNoZXIoKTsKICAgICAgICBTdWJzY3JpYmVyIHN1YiA9IGNsaWVudC5nZXRT\ndWJzY3JpYmVyKCk7CgogICAgICAgIEJ5dGVTdHJpbmcgdG9waWMgPSBCeXRl\nU3RyaW5nLmNvcHlGcm9tVXRmOCgidGVzdFNlcnZlclNpZGVUaHJvdHRsZSIp\nOyAKICAgICAgICBCeXRlU3RyaW5nIHN1YmlkID0gQnl0ZVN0cmluZy5jb3B5\nRnJvbVV0ZjgoInNlcnZlclRocm90dGxlU3ViIik7CiAgICAgICAgc3ViLnN1\nYnNjcmliZSh0b3BpYywgc3ViaWQsIENyZWF0ZU9yQXR0YWNoLkNSRUFURSk7\nCiAgICAgICAgc3ViLmNsb3NlU3Vic2NyaXB0aW9uKHRvcGljLCBzdWJpZCk7\nCgogICAgICAgIC8vIHRocm90dGxlIHdpdGggaHViIHNlcnZlcidzIHNldHRp\nbmcKICAgICAgICB0aHJvdHRsZVgocHViLCBzdWIsIHRvcGljLCBzdWJpZCwg\nREVGQVVMVF9NRVNTQUdFX1dJTkRPV19TSVpFKTsKCiAgICAgICAgbWVzc2Fn\nZVdpbmRvd1NpemUgPSBERUZBVUxUX01FU1NBR0VfV0lORE9XX1NJWkUgLyAy\nOwogICAgICAgIC8vIHRocm90dGxlIHdpdGggYSBsb3dlciB2YWx1ZSB0aGFu\nIGh1YiBzZXJ2ZXIncyBzZXR0aW5nCiAgICAgICAgU3Vic2NyaXB0aW9uT3B0\naW9ucy5CdWlsZGVyIG9wdGlvbnNCdWlsZGVyID0gU3Vic2NyaXB0aW9uT3B0\naW9ucy5uZXdCdWlsZGVyKCkKICAgICAgICAgICAgLnNldENyZWF0ZU9yQXR0\nYWNoKENyZWF0ZU9yQXR0YWNoLkNSRUFURSkKICAgICAgICAgICAgLnNldE1l\nc3NhZ2VXaW5kb3dTaXplKG1lc3NhZ2VXaW5kb3dTaXplKTsKICAgICAgICB0\nb3BpYyA9IEJ5dGVTdHJpbmcuY29weUZyb21VdGY4KCJ0ZXN0U2VydmVyU2lk\nZVRocm90dGxlV2l0aExvd2VyVmFsdWUiKTsKICAgICAgICBzdWIuc3Vic2Ny\naWJlKHRvcGljLCBzdWJpZCwgb3B0aW9uc0J1aWxkZXIuYnVpbGQoKSk7CiAg\nICAgICAgc3ViLmNsb3NlU3Vic2NyaXB0aW9uKHRvcGljLCBzdWJpZCk7CiAg\nICAgICAgdGhyb3R0bGVYKHB1Yiwgc3ViLCB0b3BpYywgc3ViaWQsIG1lc3Nh\nZ2VXaW5kb3dTaXplKTsKCiAgICAgICAgbWVzc2FnZVdpbmRvd1NpemUgPSBE\nRUZBVUxUX01FU1NBR0VfV0lORE9XX1NJWkUgKyA1OwogICAgICAgIC8vIHRo\ncm90dGxlIHdpdGggYSBoaWdoZXIgdmFsdWUgdGhhbiBodWIgc2VydmVyJ3Mg\nc2V0dGluZwogICAgICAgIG9wdGlvbnNCdWlsZGVyID0gU3Vic2NyaXB0aW9u\nT3B0aW9ucy5uZXdCdWlsZGVyKCkKICAgICAgICAgICAgICAgICAgICAgICAg\nIC5zZXRDcmVhdGVPckF0dGFjaChDcmVhdGVPckF0dGFjaC5DUkVBVEUpCiAg\nICAgICAgICAgICAgICAgICAgICAgICAuc2V0TWVzc2FnZVdpbmRvd1NpemUo\nbWVzc2FnZVdpbmRvd1NpemUpOwogICAgICAgIHRvcGljID0gQnl0ZVN0cmlu\nZy5jb3B5RnJvbVV0ZjgoInRlc3RTZXJ2ZXJTaWRlVGhyb3R0bGVXaXRoSGln\naGVyVmFsdWUiKTsKICAgICAgICBzdWIuc3Vic2NyaWJlKHRvcGljLCBzdWJp\nZCwgb3B0aW9uc0J1aWxkZXIuYnVpbGQoKSk7CiAgICAgICAgc3ViLmNsb3Nl\nU3Vic2NyaXB0aW9uKHRvcGljLCBzdWJpZCk7CiAgICAgICAgdGhyb3R0bGVY\nKHB1Yiwgc3ViLCB0b3BpYywgc3ViaWQsIG1lc3NhZ2VXaW5kb3dTaXplKTsK\nCiAgICAgICAgY2xpZW50LmNsb3NlKCk7CiAgICB9Cgp9Cg==\n","encoding":"base64"}

