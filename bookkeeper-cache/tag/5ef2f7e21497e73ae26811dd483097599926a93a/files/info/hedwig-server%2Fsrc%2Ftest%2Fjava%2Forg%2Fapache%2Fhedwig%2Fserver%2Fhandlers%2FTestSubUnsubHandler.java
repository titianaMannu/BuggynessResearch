{"sha":"175c363b4bf5782d017dafa069c4a934b933f4a3","node_id":"MDQ6QmxvYjE1NzU5NTY6MTc1YzM2M2I0YmY1NzgyZDAxN2RhZmEwNjljNGE5MzRiOTMzZjRhMw==","size":8941,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/175c363b4bf5782d017dafa069c4a934b933f4a3","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIuaGFuZGxlcnM7CgppbXBv\ncnQgamF2YS51dGlsLkhhc2hTZXQ7CmltcG9ydCBqYXZhLnV0aWwuU2V0Owpp\nbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuRXhlY3V0b3JzOwppbXBvcnQg\namF2YS51dGlsLmNvbmN1cnJlbnQuU2NoZWR1bGVkRXhlY3V0b3JTZXJ2aWNl\nOwppbXBvcnQgb3JnLmp1bml0LlRlc3Q7CgppbXBvcnQgY29tLmdvb2dsZS5w\ncm90b2J1Zi5CeXRlU3RyaW5nOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcu\nU3R1YkNhbGxiYWNrOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuY2xpZW50\nLmRhdGEuVG9waWNTdWJzY3JpYmVyOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3\naWcuZXhjZXB0aW9ucy5QdWJTdWJFeGNlcHRpb247CmltcG9ydCBvcmcuYXBh\nY2hlLmhlZHdpZy5maWx0ZXIuUGlwZWxpbmVGaWx0ZXI7CmltcG9ydCBvcmcu\nYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5QdWJTdWJQcm90b2NvbC5NZXNzYWdl\nU2VxSWQ7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5QdWJT\ndWJQcm90b2NvbC5PcGVyYXRpb25UeXBlOwppbXBvcnQgb3JnLmFwYWNoZS5o\nZWR3aWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2wuUHJvdG9jb2xWZXJzaW9u\nOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcucHJvdG9jb2wuUHViU3ViUHJv\ndG9jb2wuUHViU3ViUmVxdWVzdDsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2ln\nLnByb3RvY29sLlB1YlN1YlByb3RvY29sLlB1YlN1YlJlc3BvbnNlOwppbXBv\ncnQgb3JnLmFwYWNoZS5oZWR3aWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2wu\nU3RhdHVzQ29kZTsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnByb3RvY29s\nLlB1YlN1YlByb3RvY29sLlN1YnNjcmliZVJlcXVlc3Q7CmltcG9ydCBvcmcu\nYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5QdWJTdWJQcm90b2NvbC5TdWJzY3Jp\ncHRpb25EYXRhOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcucHJvdG9jb2wu\nUHViU3ViUHJvdG9jb2wuVW5zdWJzY3JpYmVSZXF1ZXN0OwppbXBvcnQgb3Jn\nLmFwYWNoZS5oZWR3aWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2wuU3Vic2Ny\naWJlUmVxdWVzdC5DcmVhdGVPckF0dGFjaDsKaW1wb3J0IG9yZy5hcGFjaGUu\naGVkd2lnLnNlcnZlci5jb21tb24uU2VydmVyQ29uZmlndXJhdGlvbjsKaW1w\nb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnNlcnZlci5kZWxpdmVyeS5DaGFubmVs\nRW5kUG9pbnQ7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIuZGVs\naXZlcnkuU3R1YkRlbGl2ZXJ5TWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFjaGUu\naGVkd2lnLnNlcnZlci5kZWxpdmVyeS5TdHViRGVsaXZlcnlNYW5hZ2VyLlN0\nYXJ0U2VydmluZ1JlcXVlc3Q7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5z\nZXJ2ZXIubmV0dHkuV3JpdGVSZWNvcmRpbmdDaGFubmVsOwppbXBvcnQgb3Jn\nLmFwYWNoZS5oZWR3aWcuc2VydmVyLnBlcnNpc3RlbmNlLkxvY2FsREJQZXJz\naXN0ZW5jZU1hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2\nZXIucGVyc2lzdGVuY2UuUGVyc2lzdGVuY2VNYW5hZ2VyOwppbXBvcnQgb3Jn\nLmFwYWNoZS5oZWR3aWcuc2VydmVyLnN1YnNjcmlwdGlvbnMuQWxsVG9BbGxU\nb3BvbG9neUZpbHRlcjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnNlcnZl\nci5zdWJzY3JpcHRpb25zLlN0dWJTdWJzY3JpcHRpb25NYW5hZ2VyOwppbXBv\ncnQgb3JnLmFwYWNoZS5oZWR3aWcuc2VydmVyLnRvcGljcy5Ub3BpY01hbmFn\nZXI7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIudG9waWNzLlRy\naXZpYWxPd25BbGxUb3BpY01hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLmhl\nZHdpZy51dGlsLkNvbmN1cnJlbmN5VXRpbHM7CgppbXBvcnQganVuaXQuZnJh\nbWV3b3JrLlRlc3RDYXNlOwoKcHVibGljIGNsYXNzIFRlc3RTdWJVbnN1Ykhh\nbmRsZXIgZXh0ZW5kcyBUZXN0Q2FzZSB7CgogICAgU3Vic2NyaWJlSGFuZGxl\nciBzaDsKICAgIFN0dWJEZWxpdmVyeU1hbmFnZXIgZG07CiAgICBTdHViU3Vi\nc2NyaXB0aW9uTWFuYWdlciBzbTsKICAgIFN1YnNjcmlwdGlvbkNoYW5uZWxN\nYW5hZ2VyIHN1YkNoYW5uZWxNZ3I7CiAgICBCeXRlU3RyaW5nIHRvcGljID0g\nQnl0ZVN0cmluZy5jb3B5RnJvbVV0ZjgoInRvcGljIik7CiAgICBXcml0ZVJl\nY29yZGluZ0NoYW5uZWwgY2hhbm5lbDsKCiAgICBTdWJzY3JpYmVSZXF1ZXN0\nIHN1YlJlcXVlc3RQcm90b3R5cGU7CiAgICBQdWJTdWJSZXF1ZXN0IHB1YlN1\nYlJlcXVlc3RQcm90b3R5cGU7CiAgICBCeXRlU3RyaW5nIHN1YnNjcmliZXJJ\nZDsKICAgIFVuc3Vic2NyaWJlSGFuZGxlciB1c2g7CgogICAgQE92ZXJyaWRl\nCiAgICBwcm90ZWN0ZWQgdm9pZCBzZXRVcCgpIHRocm93cyBFeGNlcHRpb24g\newogICAgICAgIHN1cGVyLnNldFVwKCk7CgogICAgICAgIFNlcnZlckNvbmZp\nZ3VyYXRpb24gY29uZiA9IG5ldyBTZXJ2ZXJDb25maWd1cmF0aW9uKCk7CiAg\nICAgICAgU2NoZWR1bGVkRXhlY3V0b3JTZXJ2aWNlIGV4ZWN1dG9yID0gRXhl\nY3V0b3JzLm5ld1NpbmdsZVRocmVhZFNjaGVkdWxlZEV4ZWN1dG9yKCk7Cgog\nICAgICAgIFRvcGljTWFuYWdlciB0bSA9IG5ldyBUcml2aWFsT3duQWxsVG9w\naWNNYW5hZ2VyKGNvbmYsIGV4ZWN1dG9yKTsKICAgICAgICBkbSA9IG5ldyBT\ndHViRGVsaXZlcnlNYW5hZ2VyKCk7CiAgICAgICAgUGVyc2lzdGVuY2VNYW5h\nZ2VyIHBtID0gTG9jYWxEQlBlcnNpc3RlbmNlTWFuYWdlci5pbnN0YW5jZSgp\nOwogICAgICAgIHNtID0gbmV3IFN0dWJTdWJzY3JpcHRpb25NYW5hZ2VyKHRt\nLCBwbSwgZG0sIGNvbmYsIGV4ZWN1dG9yKTsKICAgICAgICBzdWJDaGFubmVs\nTWdyID0gbmV3IFN1YnNjcmlwdGlvbkNoYW5uZWxNYW5hZ2VyKCk7CiAgICAg\nICAgc2ggPSBuZXcgU3Vic2NyaWJlSGFuZGxlcihjb25mLCB0bSwgZG0sIHBt\nLCBzbSwgc3ViQ2hhbm5lbE1ncik7CiAgICAgICAgY2hhbm5lbCA9IG5ldyBX\ncml0ZVJlY29yZGluZ0NoYW5uZWwoKTsKCiAgICAgICAgc3Vic2NyaWJlcklk\nID0gQnl0ZVN0cmluZy5jb3B5RnJvbVV0ZjgoInN1YklkIik7CgogICAgICAg\nIHN1YlJlcXVlc3RQcm90b3R5cGUgPSBTdWJzY3JpYmVSZXF1ZXN0Lm5ld0J1\naWxkZXIoKS5zZXRTdWJzY3JpYmVySWQoc3Vic2NyaWJlcklkKS5idWlsZCgp\nOwogICAgICAgIHB1YlN1YlJlcXVlc3RQcm90b3R5cGUgPSBQdWJTdWJSZXF1\nZXN0Lm5ld0J1aWxkZXIoKS5zZXRQcm90b2NvbFZlcnNpb24oUHJvdG9jb2xW\nZXJzaW9uLlZFUlNJT05fT05FKS5zZXRUeXBlKAogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgT3BlcmF0aW9uVHlwZS5TVUJTQ1JJQkUp\nLnNldFR4bklkKDApLnNldFRvcGljKHRvcGljKS5zZXRTdWJzY3JpYmVSZXF1\nZXN0KHN1YlJlcXVlc3RQcm90b3R5cGUpLmJ1aWxkKCk7CgogICAgICAgIHVz\naCA9IG5ldyBVbnN1YnNjcmliZUhhbmRsZXIoY29uZiwgdG0sIHNtLCBkbSwg\nc3ViQ2hhbm5lbE1ncik7CiAgICB9CgogICAgQFRlc3QodGltZW91dD02MDAw\nMCkKICAgIHB1YmxpYyB2b2lkIHRlc3ROb1N1YnNjcmliZVJlcXVlc3QoKSB7\nCiAgICAgICAgc2guaGFuZGxlUmVxdWVzdEF0T3duZXIoUHViU3ViUmVxdWVz\ndC5uZXdCdWlsZGVyKHB1YlN1YlJlcXVlc3RQcm90b3R5cGUpLmNsZWFyU3Vi\nc2NyaWJlUmVxdWVzdCgpLmJ1aWxkKCksCiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgY2hhbm5lbCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKFN0\nYXR1c0NvZGUuTUFMRk9STUVEX1JFUVVFU1QsICgoUHViU3ViUmVzcG9uc2Up\nIGNoYW5uZWwuZ2V0TWVzc2FnZXNXcml0dGVuKCkuZ2V0KDApKQogICAgICAg\nICAgICAgICAgICAgICAuZ2V0U3RhdHVzQ29kZSgpKTsKICAgIH0KCiAgICBA\nVGVzdCh0aW1lb3V0PTYwMDAwKQogICAgcHVibGljIHZvaWQgdGVzdFN1Y2Nl\nc3NDYXNlKCkgewogICAgICAgIFN0dWJDYWxsYmFjazxWb2lkPiBjYWxsYmFj\nayA9IG5ldyBTdHViQ2FsbGJhY2s8Vm9pZD4oKTsKICAgICAgICBzbS5hY3F1\naXJlZFRvcGljKHRvcGljLCBjYWxsYmFjaywgbnVsbCk7CiAgICAgICAgYXNz\nZXJ0TnVsbChDb25jdXJyZW5jeVV0aWxzLnRha2UoY2FsbGJhY2sucXVldWUp\nLnJpZ2h0KCkpOwoKICAgICAgICBzaC5oYW5kbGVSZXF1ZXN0QXRPd25lcihw\ndWJTdWJSZXF1ZXN0UHJvdG90eXBlLCBjaGFubmVsKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoU3RhdHVzQ29kZS5TVUNDRVNTLCAoKFB1YlN1YlJlc3BvbnNl\nKSBjaGFubmVsLmdldE1lc3NhZ2VzV3JpdHRlbigpLmdldCgwKSkuZ2V0U3Rh\ndHVzQ29kZSgpKTsKCiAgICAgICAgLy8gbWFrZSBzdXJlIHRoZSBjaGFubmVs\nIHdhcyBwdXQgaW4gdGhlIG1hcHMKICAgICAgICBTZXQ8VG9waWNTdWJzY3Jp\nYmVyPiB0b3BpY1N1YnMgPSBuZXcgSGFzaFNldDxUb3BpY1N1YnNjcmliZXI+\nKCk7CiAgICAgICAgdG9waWNTdWJzLmFkZChuZXcgVG9waWNTdWJzY3JpYmVy\nKHRvcGljLCBzdWJzY3JpYmVySWQpKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\ndG9waWNTdWJzLAogICAgICAgICAgICAgICAgICAgICBzdWJDaGFubmVsTWdy\nLmNoYW5uZWwyc3ViLmdldChjaGFubmVsKSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKGNoYW5uZWwsCiAgICAgICAgICAgICAgICAgICAgIHN1YkNoYW5uZWxN\nZ3Iuc3ViMkNoYW5uZWwuZ2V0KG5ldyBUb3BpY1N1YnNjcmliZXIodG9waWMs\nIHN1YnNjcmliZXJJZCkpKTsKCiAgICAgICAgLy8gbWFrZSBzdXJlIGRlbGl2\nZXJ5IHdhcyBzdGFydGVkCiAgICAgICAgU3RhcnRTZXJ2aW5nUmVxdWVzdCBz\ndGFydFJlcXVlc3QgPSAoU3RhcnRTZXJ2aW5nUmVxdWVzdCkgZG0ubGFzdFJl\ncXVlc3QucG9sbCgpOwogICAgICAgIGFzc2VydEVxdWFscyhjaGFubmVsLCAo\nKENoYW5uZWxFbmRQb2ludCkgc3RhcnRSZXF1ZXN0LmVuZFBvaW50KS5nZXRD\naGFubmVsKCkpOwogICAgICAgIGFzc2VydEVxdWFscyhQaXBlbGluZUZpbHRl\nci5jbGFzcywgc3RhcnRSZXF1ZXN0LmZpbHRlci5nZXRDbGFzcygpKTsKICAg\nICAgICBQaXBlbGluZUZpbHRlciBwZmlsdGVyID0gKFBpcGVsaW5lRmlsdGVy\nKShzdGFydFJlcXVlc3QuZmlsdGVyKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nMSwgcGZpbHRlci5zaXplKCkpOwogICAgICAgIGFzc2VydEVxdWFscyhBbGxU\nb0FsbFRvcG9sb2d5RmlsdGVyLmNsYXNzLCBwZmlsdGVyLmdldEZpcnN0KCku\nZ2V0Q2xhc3MoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIHN0YXJ0UmVx\ndWVzdC5zZXFJZFRvU3RhcnRGcm9tLmdldExvY2FsQ29tcG9uZW50KCkpOwog\nICAgICAgIGFzc2VydEVxdWFscyhzdWJzY3JpYmVySWQsIHN0YXJ0UmVxdWVz\ndC5zdWJzY3JpYmVySWQpOwogICAgICAgIGFzc2VydEVxdWFscyh0b3BpYywg\nc3RhcnRSZXF1ZXN0LnRvcGljKTsKCiAgICAgICAgLy8gbWFrZSBzdXJlIHN1\nYnNjcmlwdGlvbiB3YXMgcmVnaXN0ZXJlZAogICAgICAgIFN0dWJDYWxsYmFj\nazxTdWJzY3JpcHRpb25EYXRhPiBjYWxsYmFjazEgPSBuZXcgU3R1YkNhbGxi\nYWNrPFN1YnNjcmlwdGlvbkRhdGE+KCk7CiAgICAgICAgc20uc2VydmVTdWJz\nY3JpYmVSZXF1ZXN0KHRvcGljLCBTdWJzY3JpYmVSZXF1ZXN0Lm5ld0J1aWxk\nZXIoc3ViUmVxdWVzdFByb3RvdHlwZSkuc2V0Q3JlYXRlT3JBdHRhY2goCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDcmVhdGVPckF0\ndGFjaC5DUkVBVEUpLmJ1aWxkKCksIE1lc3NhZ2VTZXFJZC5uZXdCdWlsZGVy\nKCkuc2V0TG9jYWxDb21wb25lbnQoMTApLmJ1aWxkKCksIGNhbGxiYWNrMSwK\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCk7CgogICAg\nICAgIGFzc2VydEVxdWFscyhQdWJTdWJFeGNlcHRpb24uQ2xpZW50QWxyZWFk\neVN1YnNjcmliZWRFeGNlcHRpb24uY2xhc3MsIENvbmN1cnJlbmN5VXRpbHMu\ndGFrZShjYWxsYmFjazEucXVldWUpCiAgICAgICAgICAgICAgICAgICAgIC5y\naWdodCgpLmdldENsYXNzKCkpOwoKICAgICAgICAvLyB0cnlpbmcgdG8gc3Vi\nc2NyaWJlIGFnYWluIHNob3VsZCB0aHJvdyBhbiBlcnJvcgogICAgICAgIFdy\naXRlUmVjb3JkaW5nQ2hhbm5lbCBkdXBDaGFubmVsID0gbmV3IFdyaXRlUmVj\nb3JkaW5nQ2hhbm5lbCgpOwogICAgICAgIHNoLmhhbmRsZVJlcXVlc3RBdE93\nbmVyKHB1YlN1YlJlcXVlc3RQcm90b3R5cGUsIGR1cENoYW5uZWwpOwogICAg\nICAgIGFzc2VydEVxdWFscyhTdGF0dXNDb2RlLlRPUElDX0JVU1ksICgoUHVi\nU3ViUmVzcG9uc2UpIGR1cENoYW5uZWwuZ2V0TWVzc2FnZXNXcml0dGVuKCku\nZ2V0KDApKS5nZXRTdGF0dXNDb2RlKCkpOwoKICAgICAgICAvLyBhZnRlciBk\naXNjb25uZWN0aW5nIHRoZSBjaGFubmVsLCBzdWJzY3JpYmUgc2hvdWxkIHdv\ncmsgYWdhaW4KICAgICAgICBzdWJDaGFubmVsTWdyLmNoYW5uZWxEaXNjb25u\nZWN0ZWQoY2hhbm5lbCk7CgogICAgICAgIGR1cENoYW5uZWwgPSBuZXcgV3Jp\ndGVSZWNvcmRpbmdDaGFubmVsKCk7CiAgICAgICAgc2guaGFuZGxlUmVxdWVz\ndEF0T3duZXIocHViU3ViUmVxdWVzdFByb3RvdHlwZSwgZHVwQ2hhbm5lbCk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKFN0YXR1c0NvZGUuU1VDQ0VTUywgKChQ\ndWJTdWJSZXNwb25zZSkgZHVwQ2hhbm5lbC5nZXRNZXNzYWdlc1dyaXR0ZW4o\nKS5nZXQoMCkpLmdldFN0YXR1c0NvZGUoKSk7CgogICAgICAgIC8vIHRlc3Qg\ndW5zdWJzY3JpYmUKICAgICAgICBjaGFubmVsID0gbmV3IFdyaXRlUmVjb3Jk\naW5nQ2hhbm5lbCgpOwogICAgICAgIHVzaC5oYW5kbGVSZXF1ZXN0QXRPd25l\ncihwdWJTdWJSZXF1ZXN0UHJvdG90eXBlLCBjaGFubmVsKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoU3RhdHVzQ29kZS5NQUxGT1JNRURfUkVRVUVTVCwgKChQ\ndWJTdWJSZXNwb25zZSkgY2hhbm5lbC5nZXRNZXNzYWdlc1dyaXR0ZW4oKS5n\nZXQoMCkpCiAgICAgICAgICAgICAgICAgICAgIC5nZXRTdGF0dXNDb2RlKCkp\nOwoKICAgICAgICBQdWJTdWJSZXF1ZXN0IHVuc3ViUmVxdWVzdCA9IFB1YlN1\nYlJlcXVlc3QubmV3QnVpbGRlcihwdWJTdWJSZXF1ZXN0UHJvdG90eXBlKS5z\nZXRVbnN1YnNjcmliZVJlcXVlc3QoCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgVW5zdWJzY3JpYmVSZXF1ZXN0Lm5ld0J1aWxk\nZXIoKS5zZXRTdWJzY3JpYmVySWQoc3Vic2NyaWJlcklkKSkuYnVpbGQoKTsK\nICAgICAgICBjaGFubmVsID0gbmV3IFdyaXRlUmVjb3JkaW5nQ2hhbm5lbCgp\nOwogICAgICAgIGRtLmxhc3RSZXF1ZXN0LmNsZWFyKCk7CgogICAgICAgIHVz\naC5oYW5kbGVSZXF1ZXN0QXRPd25lcih1bnN1YlJlcXVlc3QsIGNoYW5uZWwp\nOwogICAgICAgIGFzc2VydEVxdWFscyhTdGF0dXNDb2RlLlNVQ0NFU1MsICgo\nUHViU3ViUmVzcG9uc2UpIGNoYW5uZWwuZ2V0TWVzc2FnZXNXcml0dGVuKCku\nZ2V0KDApKS5nZXRTdGF0dXNDb2RlKCkpOwoKICAgICAgICAvLyBtYWtlIHN1\ncmUgZGVsaXZlcnkgaGFzIGJlZW4gc3RvcHBlZAogICAgICAgIGFzc2VydEVx\ndWFscyhuZXcgVG9waWNTdWJzY3JpYmVyKHRvcGljLCBzdWJzY3JpYmVySWQp\nLCBkbS5sYXN0UmVxdWVzdC5wb2xsKCkpOwoKICAgICAgICAvLyBtYWtlIHN1\ncmUgdGhlIGluZm8gaXMgZ29uZSBmcm9tIHRoZSBzbQogICAgICAgIFN0dWJD\nYWxsYmFjazxTdWJzY3JpcHRpb25EYXRhPiBjYWxsYmFjazIgPSBuZXcgU3R1\nYkNhbGxiYWNrPFN1YnNjcmlwdGlvbkRhdGE+KCk7CiAgICAgICAgc20uc2Vy\ndmVTdWJzY3JpYmVSZXF1ZXN0KHRvcGljLCBTdWJzY3JpYmVSZXF1ZXN0Lm5l\nd0J1aWxkZXIoc3ViUmVxdWVzdFByb3RvdHlwZSkuc2V0Q3JlYXRlT3JBdHRh\nY2goCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDcmVh\ndGVPckF0dGFjaC5BVFRBQ0gpLmJ1aWxkKCksIE1lc3NhZ2VTZXFJZC5uZXdC\ndWlsZGVyKCkuc2V0TG9jYWxDb21wb25lbnQoMTApLmJ1aWxkKCksIGNhbGxi\nYWNrMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKFB1YlN1YkV4Y2VwdGlvbi5DbGllbnRO\nb3RTdWJzY3JpYmVkRXhjZXB0aW9uLmNsYXNzLCBDb25jdXJyZW5jeVV0aWxz\nLnRha2UoY2FsbGJhY2syLnF1ZXVlKS5yaWdodCgpCiAgICAgICAgICAgICAg\nICAgICAgIC5nZXRDbGFzcygpKTsKCiAgICB9Cgp9Cg==\n","encoding":"base64"}

