{"sha":"e3b924a74a1aec57dc09ef181cfda590c59fbd9b","node_id":"MDQ6QmxvYjE1NzU5NTY6ZTNiOTI0YTc0YTFhZWM1N2RjMDllZjE4MWNmZGE1OTBjNTlmYmQ5Yg==","size":32371,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/e3b924a74a1aec57dc09ef181cfda590c59fbd9b","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIuaW50ZWdyYXRpb247Cgpp\nbXBvcnQgamF2YS5uZXQuSW5ldFNvY2tldEFkZHJlc3M7CmltcG9ydCBqYXZh\nLnV0aWwuQXJyYXlzOwppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247Cmlt\ncG9ydCBqYXZhLnV0aWwuSGFzaFNldDsKaW1wb3J0IGphdmEudXRpbC5jb25j\ndXJyZW50LlN5bmNocm9ub3VzUXVldWU7CgppbXBvcnQgb3JnLmp1bml0LkFm\ndGVyOwppbXBvcnQgb3JnLmp1bml0LkJlZm9yZTsKaW1wb3J0IG9yZy5qdW5p\ndC5UZXN0OwoKaW1wb3J0IGNvbS5nb29nbGUucHJvdG9idWYuQnl0ZVN0cmlu\nZzsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmNsaWVudC5hcGkuTWVzc2Fn\nZUhhbmRsZXI7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQuYXBp\nLlN1YnNjcmliZXI7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQu\nY29uZi5DbGllbnRDb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5o\nZWR3aWcuY2xpZW50LmV4Y2VwdGlvbnMuSW52YWxpZFN1YnNjcmliZXJJZEV4\nY2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmNsaWVudC5leGNl\ncHRpb25zLkFscmVhZHlTdGFydERlbGl2ZXJ5RXhjZXB0aW9uOwppbXBvcnQg\nb3JnLmFwYWNoZS5oZWR3aWcuY2xpZW50LkhlZHdpZ0NsaWVudDsKaW1wb3J0\nIG9yZy5hcGFjaGUuaGVkd2lnLmNsaWVudC5hcGkuQ2xpZW50OwppbXBvcnQg\nb3JnLmFwYWNoZS5oZWR3aWcuY2xpZW50LmFwaS5QdWJsaXNoZXI7CmltcG9y\ndCBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQuYXBpLlN1YnNjcmliZXI7Cmlt\ncG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5leGNlcHRpb25zLlB1YlN1YkV4Y2Vw\ndGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmV4Y2VwdGlvbnMuUHVi\nU3ViRXhjZXB0aW9uLkNsaWVudE5vdFN1YnNjcmliZWRFeGNlcHRpb247Cmlt\ncG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5QdWJTdWJQcm90b2Nv\nbC5NZXNzYWdlOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcucHJvdG9jb2wu\nUHViU3ViUHJvdG9jb2wuTWVzc2FnZVNlcUlkOwppbXBvcnQgb3JnLmFwYWNo\nZS5oZWR3aWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2wuT3BlcmF0aW9uVHlw\nZTsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnByb3RvY29sLlB1YlN1YlBy\nb3RvY29sLlByb3RvY29sVmVyc2lvbjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVk\nd2lnLnByb3RvY29sLlB1YlN1YlByb3RvY29sLlB1YlN1YlJlcXVlc3Q7Cmlt\ncG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5QdWJTdWJQcm90b2Nv\nbC5QdWJTdWJSZXNwb25zZTsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnBy\nb3RvY29sLlB1YlN1YlByb3RvY29sLlN0YXJ0RGVsaXZlcnlSZXF1ZXN0Owpp\nbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcucHJvdG9jb2wuUHViU3ViUHJvdG9j\nb2wuU3RvcERlbGl2ZXJ5UmVxdWVzdDsKaW1wb3J0IG9yZy5hcGFjaGUuaGVk\nd2lnLnByb3RvY29sLlB1YlN1YlByb3RvY29sLlN0YXR1c0NvZGU7CmltcG9y\ndCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5QdWJTdWJQcm90b2NvbC5T\ndWJzY3JpYmVSZXF1ZXN0LkNyZWF0ZU9yQXR0YWNoOwppbXBvcnQgb3JnLmFw\nYWNoZS5oZWR3aWcucHJvdG9leHRlbnNpb25zLlN1YnNjcmlwdGlvblN0YXRl\nVXRpbHM7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIuSGVkd2ln\nSHViVGVzdEJhc2U7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIu\nbmV0dHkuV3JpdGVSZWNvcmRpbmdDaGFubmVsOwppbXBvcnQgb3JnLmFwYWNo\nZS5oZWR3aWcuc2VydmVyLnByb3h5LkhlZHdpZ1Byb3h5OwppbXBvcnQgb3Jn\nLmFwYWNoZS5oZWR3aWcuc2VydmVyLnByb3h5LlByb3h5Q29uZmlndXJhdGlv\nbjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnNlcnZlci5yZWdpb25zLkhl\nZHdpZ0h1YkNsaWVudDsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnV0aWwu\nQ2FsbGJhY2s7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy51dGlsLkNvbmN1\ncnJlbmN5VXRpbHM7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy51dGlsLkhl\nZHdpZ1NvY2tldEFkZHJlc3M7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVw\nZXIudGVzdC5Qb3J0TWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2ln\nLnNlcnZlci5Mb2dnaW5nRXhjZXB0aW9uSGFuZGxlcjsKCnB1YmxpYyBhYnN0\ncmFjdCBjbGFzcyBUZXN0SGVkd2lnSHViIGV4dGVuZHMgSGVkd2lnSHViVGVz\ndEJhc2UgewoKICAgIC8vIENsaWVudCBzaWRlIHZhcmlhYmxlcwogICAgcHJv\ndGVjdGVkIEhlZHdpZ0NsaWVudCBjbGllbnQ7CiAgICBwcm90ZWN0ZWQgUHVi\nbGlzaGVyIHB1Ymxpc2hlcjsKICAgIHByb3RlY3RlZCBTdWJzY3JpYmVyIHN1\nYnNjcmliZXI7CgogICAgLy8gQ29tbW9uIEJ5dGVTdHJpbmdzIHVzZWQgaW4g\ndGVzdHMuCiAgICBwcml2YXRlIGZpbmFsIEJ5dGVTdHJpbmcgbG9jYWxTdWJz\nY3JpYmVySWQgPSBCeXRlU3RyaW5nLmNvcHlGcm9tVXRmOCgiTG9jYWxTdWJz\nY3JpYmVyIik7CiAgICBwcml2YXRlIGZpbmFsIEJ5dGVTdHJpbmcgaHViU3Vi\nc2NyaWJlcklkID0gQnl0ZVN0cmluZy5jb3B5RnJvbVV0ZjgoU3Vic2NyaXB0\naW9uU3RhdGVVdGlscy5IVUJfU1VCU0NSSUJFUl9QUkVGSVgKICAgICAgICAg\nICAgKyAiSHViU3ViY3JpYmVyIik7CgogICAgZW51bSBNb2RlIHsKICAgICAg\nICBSRUdVTEFSLCBQUk9YWSwgU1NMCiAgICB9OwoKICAgIHByb3RlY3RlZCBN\nb2RlIG1vZGU7CiAgICBwcm90ZWN0ZWQgYm9vbGVhbiBpc1N1YnNjcmlwdGlv\nbkNoYW5uZWxTaGFyaW5nRW5hYmxlZDsKCiAgICBwdWJsaWMgVGVzdEhlZHdp\nZ0h1YihNb2RlIG1vZGUsIGJvb2xlYW4gaXNTdWJzY3JpcHRpb25DaGFubmVs\nU2hhcmluZ0VuYWJsZWQpIHsKICAgICAgICBzdXBlcigzKTsKICAgICAgICB0\naGlzLm1vZGUgPSBtb2RlOwogICAgICAgIHRoaXMuaXNTdWJzY3JpcHRpb25D\naGFubmVsU2hhcmluZ0VuYWJsZWQgPSBpc1N1YnNjcmlwdGlvbkNoYW5uZWxT\naGFyaW5nRW5hYmxlZDsKICAgIH0KCiAgICBwcm90ZWN0ZWQgSGVkd2lnUHJv\neHkgcHJveHk7CiAgICBwcm90ZWN0ZWQgUHJveHlDb25maWd1cmF0aW9uIHBy\nb3h5Q29uZiA9IG5ldyBQcm94eUNvbmZpZ3VyYXRpb24oKSB7CiAgICAgICAg\nICAgIGZpbmFsIGludCBwcm94eVBvcnQgPSBQb3J0TWFuYWdlci5uZXh0RnJl\nZVBvcnQoKTsKCiAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICBw\ndWJsaWMgSGVkd2lnU29ja2V0QWRkcmVzcyBnZXREZWZhdWx0U2VydmVySGVk\nd2lnU29ja2V0QWRkcmVzcygpIHsKICAgICAgICAgICAgICAgIHJldHVybiBz\nZXJ2ZXJBZGRyZXNzZXMuZ2V0KDApOwogICAgICAgICAgICB9CgogICAgICAg\nICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIGludCBnZXRQcm94\neVBvcnQoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcHJveHlQb3J0Owog\nICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAvLyBTeW5jaHJvbm91c1F1\nZXVlcyB0byB2ZXJpZnkgYXN5bmMgY2FsbHMKICAgIHByaXZhdGUgZmluYWwg\nU3luY2hyb25vdXNRdWV1ZTxCb29sZWFuPiBxdWV1ZSA9IG5ldyBTeW5jaHJv\nbm91c1F1ZXVlPEJvb2xlYW4+KCk7CiAgICBwcml2YXRlIGZpbmFsIFN5bmNo\ncm9ub3VzUXVldWU8Qm9vbGVhbj4gY29uc3VtZVF1ZXVlID0gbmV3IFN5bmNo\ncm9ub3VzUXVldWU8Qm9vbGVhbj4oKTsKCiAgICAvLyBUZXN0IGltcGxlbWVu\ndGF0aW9uIG9mIENhbGxiYWNrIGZvciBhc3luYyBjbGllbnQgYWN0aW9ucy4K\nICAgIHN0YXRpYyBjbGFzcyBUZXN0Q2FsbGJhY2sgaW1wbGVtZW50cyBDYWxs\nYmFjazxWb2lkPiB7CiAgICAgICAgcHJpdmF0ZSBmaW5hbCBTeW5jaHJvbm91\nc1F1ZXVlPEJvb2xlYW4+IHF1ZXVlOwoKICAgICAgICBwdWJsaWMgVGVzdENh\nbGxiYWNrKFN5bmNocm9ub3VzUXVldWU8Qm9vbGVhbj4gcXVldWUpIHsKICAg\nICAgICAgICAgdGhpcy5xdWV1ZSA9IHF1ZXVlOwogICAgICAgIH0KCiAgICAg\nICAgQE92ZXJyaWRlCiAgICAgICAgcHVibGljIHZvaWQgb3BlcmF0aW9uRmlu\naXNoZWQoT2JqZWN0IGN0eCwgVm9pZCByZXN1bHRPZk9wZXJhdGlvbikgewog\nICAgICAgICAgICBuZXcgVGhyZWFkKG5ldyBSdW5uYWJsZSgpIHsKICAgICAg\nICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgcHVibGljIHZv\naWQgcnVuKCkgewogICAgICAgICAgICAgICAgICAgIGlmIChsb2dnZXIuaXNE\nZWJ1Z0VuYWJsZWQoKSkKICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2Vy\nLmRlYnVnKCJPcGVyYXRpb24gZmluaXNoZWQhIik7CiAgICAgICAgICAgICAg\nICAgICAgQ29uY3VycmVuY3lVdGlscy5wdXQocXVldWUsIHRydWUpOwogICAg\nICAgICAgICAgICAgfQogICAgICAgICAgICB9KS5zdGFydCgpOwogICAgICAg\nIH0KCiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHVibGljIHZvaWQgb3Bl\ncmF0aW9uRmFpbGVkKE9iamVjdCBjdHgsIGZpbmFsIFB1YlN1YkV4Y2VwdGlv\nbiBleGNlcHRpb24pIHsKICAgICAgICAgICAgbmV3IFRocmVhZChuZXcgUnVu\nbmFibGUoKSB7CiAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAg\nICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsKICAgICAgICAgICAgICAgICAg\nICBsb2dnZXIuZXJyb3IoIk9wZXJhdGlvbiBmYWlsZWQhIiwgZXhjZXB0aW9u\nKTsKICAgICAgICAgICAgICAgICAgICBDb25jdXJyZW5jeVV0aWxzLnB1dChx\ndWV1ZSwgZmFsc2UpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9\nKS5zdGFydCgpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBUZXN0IGltcGxl\nbWVudGF0aW9uIG9mIHN1YnNjcmliZXIncyBtZXNzYWdlIGhhbmRsZXIuCiAg\nICBzdGF0aWMgY2xhc3MgVGVzdE1lc3NhZ2VIYW5kbGVyIGltcGxlbWVudHMg\nTWVzc2FnZUhhbmRsZXIgewogICAgICAgIC8vIEZvciBzdWJzY3JpYmUgcmVj\nb25uZWN0IHRlc3RpbmcsIHRoZSBzZXJ2ZXIgY291bGQgc2VuZCB1cyBiYWNr\nCiAgICAgICAgLy8gbWVzc2FnZXMgd2UndmUgYWxyZWFkeSBwcm9jZXNzZWQg\nYW5kIGNvbnN1bWVkLiBXZSBuZWVkIHRvIGtlZXAKICAgICAgICAvLyB0cmFj\nayBvZiB0aGUgb25lcyB3ZSd2ZSBlbmNvdW50ZXJlZCBzbyB3ZSBvbmx5IHNp\nZ25hbCBiYWNrIHRvIHRoZQogICAgICAgIC8vIGNvbnN1bWVRdWV1ZSBvbmNl\nLgogICAgICAgIHByaXZhdGUgSGFzaFNldDxNZXNzYWdlU2VxSWQ+IGNvbnN1\nbWVkTWVzc2FnZXMgPSBuZXcgSGFzaFNldDxNZXNzYWdlU2VxSWQ+KCk7CiAg\nICAgICAgcHJpdmF0ZSBsb25nIGxhcmdlc3RNc2dTZXFJZENvbnN1bWVkID0g\nLTE7CiAgICAgICAgcHJpdmF0ZSBmaW5hbCBTeW5jaHJvbm91c1F1ZXVlPEJv\nb2xlYW4+IGNvbnN1bWVRdWV1ZTsKCiAgICAgICAgcHVibGljIFRlc3RNZXNz\nYWdlSGFuZGxlcihTeW5jaHJvbm91c1F1ZXVlPEJvb2xlYW4+IGNvbnN1bWVR\ndWV1ZSkgewogICAgICAgICAgICB0aGlzLmNvbnN1bWVRdWV1ZSA9IGNvbnN1\nbWVRdWV1ZTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIGRlbGl2\nZXIoQnl0ZVN0cmluZyB0b3BpYywgQnl0ZVN0cmluZyBzdWJzY3JpYmVySWQs\nIGZpbmFsIE1lc3NhZ2UgbXNnLCBDYWxsYmFjazxWb2lkPiBjYWxsYmFjaywK\nICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdCBjb250ZXh0KSB7\nCiAgICAgICAgICAgIGlmICghY29uc3VtZWRNZXNzYWdlcy5jb250YWlucyht\nc2cuZ2V0TXNnSWQoKSkpIHsKICAgICAgICAgICAgICAgIC8vIE5ldyBtZXNz\nYWdlIHRvIGNvbnN1bWUuIEFkZCBpdCB0byB0aGUgU2V0IG9mIGNvbnN1bWVk\nCiAgICAgICAgICAgICAgICAvLyBtZXNzYWdlcy4KICAgICAgICAgICAgICAg\nIGNvbnN1bWVkTWVzc2FnZXMuYWRkKG1zZy5nZXRNc2dJZCgpKTsKICAgICAg\nICAgICAgICAgIC8vIENoZWNrIHRoYXQgdGhlIG1zZyBzZXEgSUQgaXMgaW5j\ncmVtZW50aW5nIGJ5IDEgY29tcGFyZWQgdG8KICAgICAgICAgICAgICAgIC8v\nIHRoZSBsYXN0IGNvbnN1bWVkIG1lc3NhZ2UuIERvbid0IGRvIHRoaXMgY2hl\nY2sgaWYgdGhpcyBpcyB0aGUKICAgICAgICAgICAgICAgIC8vIGluaXRpYWwg\nbWVzc2FnZSBiZWluZyBjb25zdW1lZC4KICAgICAgICAgICAgICAgIGlmIChs\nYXJnZXN0TXNnU2VxSWRDb25zdW1lZCA+PSAwICYmIG1zZy5nZXRNc2dJZCgp\nLmdldExvY2FsQ29tcG9uZW50KCkgIT0gbGFyZ2VzdE1zZ1NlcUlkQ29uc3Vt\nZWQgKyAxKSB7CiAgICAgICAgICAgICAgICAgICAgbmV3IFRocmVhZChuZXcg\nUnVubmFibGUoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIEBPdmVycmlk\nZQogICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB7\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9nZ2VyLmlzRGVi\ndWdFbmFibGVkKCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nbG9nZ2VyLmRlYnVnKCJDb25zdW1pbmcgbWVzc2FnZSB0aGF0IGlzIG91dCBv\nZiBvcmRlciBmb3IgbXNnSWQ6ICIKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgKyBtc2cuZ2V0TXNnSWQoKS5nZXRMb2Nh\nbENvbXBvbmVudCgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIENv\nbmN1cnJlbmN5VXRpbHMucHV0KGNvbnN1bWVRdWV1ZSwgZmFsc2UpOwogICAg\nICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSku\nc3RhcnQoKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAg\nICAgICAgICAgbmV3IFRocmVhZChuZXcgUnVubmFibGUoKSB7CiAgICAgICAg\nICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgICAg\nICAgICBwdWJsaWMgdm9pZCBydW4oKSB7CiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICBpZiAobG9nZ2VyLmlzRGVidWdFbmFibGVkKCkpCiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCJDb25zdW1l\nIG9wZXJhdGlvbiBmaW5pc2hlZCBzdWNjZXNzZnVsbHkhIik7CiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICBDb25jdXJyZW5jeVV0aWxzLnB1dChjb25z\ndW1lUXVldWUsIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAg\nICAgICAgICAgICAgICAgICAgfSkuc3RhcnQoKTsKICAgICAgICAgICAgICAg\nIH0KICAgICAgICAgICAgICAgIC8vIFN0b3JlIHRoZSBjb25zdW1lZCBtZXNz\nYWdlIGFzIHRoZSBuZXcgbGFzdCBtc2cgaWQgY29uc3VtZWQuCiAgICAgICAg\nICAgICAgICBsYXJnZXN0TXNnU2VxSWRDb25zdW1lZCA9IG1zZy5nZXRNc2dJ\nZCgpLmdldExvY2FsQ29tcG9uZW50KCk7CiAgICAgICAgICAgIH0gZWxzZSB7\nCiAgICAgICAgICAgICAgICBpZiAobG9nZ2VyLmlzRGVidWdFbmFibGVkKCkp\nCiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCJDb25zdW1lZCBh\nIG1lc3NhZ2UgdGhhdCB3ZSd2ZSBwcm9jZXNzZWQgYWxyZWFkeTogIiArIG1z\nZyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2FsbGJhY2sub3BlcmF0\naW9uRmluaXNoZWQoY29udGV4dCwgbnVsbCk7CiAgICAgICAgfQogICAgfQoK\nICAgIGNsYXNzIFRlc3RDbGllbnRDb25maWd1cmF0aW9uIGV4dGVuZHMgSHVi\nQ2xpZW50Q29uZmlndXJhdGlvbiB7CgogICAgICAgIEBPdmVycmlkZQogICAg\nICAgIHB1YmxpYyBJbmV0U29ja2V0QWRkcmVzcyBnZXREZWZhdWx0U2VydmVy\nSG9zdCgpIHsKICAgICAgICAgICAgaWYgKG1vZGUgPT0gTW9kZS5QUk9YWSkg\newogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBJbmV0U29ja2V0QWRkcmVz\ncyhwcm94eUNvbmYuZ2V0UHJveHlQb3J0KCkpOwogICAgICAgICAgICB9IGVs\nc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmdldERlZmF1bHRT\nZXJ2ZXJIb3N0KCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAg\nIEBPdmVycmlkZQogICAgICAgIHB1YmxpYyBib29sZWFuIGlzU1NMRW5hYmxl\nZCgpIHsKICAgICAgICAgICAgaWYgKG1vZGUgPT0gTW9kZS5TU0wpCiAgICAg\nICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgZWxzZQogICAg\nICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAg\nQE92ZXJyaWRlCiAgICAgICAgcHVibGljIGJvb2xlYW4gaXNTdWJzY3JpcHRp\nb25DaGFubmVsU2hhcmluZ0VuYWJsZWQoKSB7CiAgICAgICAgICAgIHJldHVy\nbiBpc1N1YnNjcmlwdGlvbkNoYW5uZWxTaGFyaW5nRW5hYmxlZDsKICAgICAg\nICB9CiAgICB9CgogICAgLy8gQ2xpZW50Q29uZmlndXJhdGlvbiB0byB1c2Ug\nZm9yIHRoaXMgdGVzdC4KICAgIHByb3RlY3RlZCBDbGllbnRDb25maWd1cmF0\naW9uIGdldENsaWVudENvbmZpZ3VyYXRpb24oKSB7CiAgICAgICAgcmV0dXJu\nIG5ldyBUZXN0Q2xpZW50Q29uZmlndXJhdGlvbigpOwogICAgfQoKICAgIEBP\ndmVycmlkZQogICAgQEJlZm9yZQogICAgcHVibGljIHZvaWQgc2V0VXAoKSB0\naHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBzdXBlci5zZXRVcCgpOwogICAg\nICAgIGlmIChtb2RlID09IE1vZGUuUFJPWFkpIHsKICAgICAgICAgICAgcHJv\neHkgPSBuZXcgSGVkd2lnUHJveHkocHJveHlDb25mLCBuZXcgTG9nZ2luZ0V4\nY2VwdGlvbkhhbmRsZXIoKSk7CiAgICAgICAgICAgIHByb3h5LnN0YXJ0KCk7\nCiAgICAgICAgfQogICAgICAgIGNsaWVudCA9IG5ldyBIZWR3aWdDbGllbnQo\nZ2V0Q2xpZW50Q29uZmlndXJhdGlvbigpKTsKICAgICAgICBwdWJsaXNoZXIg\nPSBjbGllbnQuZ2V0UHVibGlzaGVyKCk7CiAgICAgICAgc3Vic2NyaWJlciA9\nIGNsaWVudC5nZXRTdWJzY3JpYmVyKCk7CiAgICB9CgogICAgQE92ZXJyaWRl\nCiAgICBAQWZ0ZXIKICAgIHB1YmxpYyB2b2lkIHRlYXJEb3duKCkgdGhyb3dz\nIEV4Y2VwdGlvbiB7CiAgICAgICAgY2xpZW50LmNsb3NlKCk7CiAgICAgICAg\naWYgKG1vZGUgPT0gTW9kZS5QUk9YWSkgewogICAgICAgICAgICBwcm94eS5z\naHV0ZG93bigpOwogICAgICAgIH0KICAgICAgICBzdXBlci50ZWFyRG93bigp\nOwoKICAgIH0KCiAgICAvLyBIZWxwZXIgZnVuY3Rpb24gdG8gZ2VuZXJhdGUg\nTWVzc2FnZXMKICAgIHByb3RlY3RlZCBNZXNzYWdlIGdldE1zZyhpbnQgbXNn\nTnVtKSB7CiAgICAgICAgcmV0dXJuIE1lc3NhZ2UubmV3QnVpbGRlcigpLnNl\ndEJvZHkoQnl0ZVN0cmluZy5jb3B5RnJvbVV0ZjgoIk1lc3NhZ2UiICsgbXNn\nTnVtKSkuYnVpbGQoKTsKICAgIH0KCiAgICAvLyBIZWxwZXIgZnVuY3Rpb24g\ndG8gZ2VuZXJhdGUgVG9waWNzCiAgICBwcm90ZWN0ZWQgQnl0ZVN0cmluZyBn\nZXRUb3BpYyhpbnQgdG9waWNOdW0pIHsKICAgICAgICByZXR1cm4gQnl0ZVN0\ncmluZy5jb3B5RnJvbVV0ZjgoIlRvcGljIiArIHRvcGljTnVtKTsKICAgIH0K\nCiAgICBwcm90ZWN0ZWQgdm9pZCBzdGFydERlbGl2ZXJ5KEJ5dGVTdHJpbmcg\ndG9waWMsIEJ5dGVTdHJpbmcgc3Vic2NyaWJlcklkLCBNZXNzYWdlSGFuZGxl\nciBoYW5kbGVyKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBzdGFydERl\nbGl2ZXJ5KHN1YnNjcmliZXIsIHRvcGljLCBzdWJzY3JpYmVySWQsIGhhbmRs\nZXIpOwogICAgfQoKICAgIHByb3RlY3RlZCB2b2lkIHN0YXJ0RGVsaXZlcnko\nU3Vic2NyaWJlciBzdWJzY3JpYmVyLCBCeXRlU3RyaW5nIHRvcGljLCBCeXRl\nU3RyaW5nIHN1YnNjcmliZXJJZCwKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgTWVzc2FnZUhhbmRsZXIgaGFuZGxlcikgdGhyb3dzIEV4Y2Vw\ndGlvbiB7CiAgICAgICAgc3Vic2NyaWJlci5zdGFydERlbGl2ZXJ5KHRvcGlj\nLCBzdWJzY3JpYmVySWQsIGhhbmRsZXIpOwogICAgICAgIGlmIChtb2RlID09\nIE1vZGUuUFJPWFkpIHsKICAgICAgICAgICAgV3JpdGVSZWNvcmRpbmdDaGFu\nbmVsIGNoYW5uZWwgPSBuZXcgV3JpdGVSZWNvcmRpbmdDaGFubmVsKCk7CiAg\nICAgICAgICAgIFB1YlN1YlJlcXVlc3QgcmVxdWVzdCA9IFB1YlN1YlJlcXVl\nc3QubmV3QnVpbGRlcigpLnNldFByb3RvY29sVmVyc2lvbihQcm90b2NvbFZl\ncnNpb24uVkVSU0lPTl9PTkUpCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgIC5zZXRUb3BpYyh0b3BpYykuc2V0VHhuSWQoMCkuc2V0VHlw\nZShPcGVyYXRpb25UeXBlLlNUQVJUX0RFTElWRVJZKS5zZXRTdGFydERlbGl2\nZXJ5UmVxdWVzdCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIFN0YXJ0RGVsaXZlcnlSZXF1ZXN0Lm5ld0J1aWxkZXIoKS5zZXRT\ndWJzY3JpYmVySWQoc3Vic2NyaWJlcklkKSkuYnVpbGQoKTsKICAgICAgICAg\nICAgcHJveHkuZ2V0U3RhcnREZWxpdmVyeUhhbmRsZXIoKS5oYW5kbGVSZXF1\nZXN0KHJlcXVlc3QsIGNoYW5uZWwpOwogICAgICAgICAgICBhc3NlcnRFcXVh\nbHMoU3RhdHVzQ29kZS5TVUNDRVNTLCAoKFB1YlN1YlJlc3BvbnNlKSBjaGFu\nbmVsLmdldE1lc3NhZ2VzV3JpdHRlbigpLmdldCgwKSkuZ2V0U3RhdHVzQ29k\nZSgpKTsKICAgICAgICB9CiAgICB9CgogICAgcHJvdGVjdGVkIHZvaWQgc3Rv\ncERlbGl2ZXJ5KEJ5dGVTdHJpbmcgdG9waWMsIEJ5dGVTdHJpbmcgc3Vic2Ny\naWJlcklkKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBzdG9wRGVsaXZl\ncnkoc3Vic2NyaWJlciwgdG9waWMsIHN1YnNjcmliZXJJZCk7CiAgICB9Cgog\nICAgcHJvdGVjdGVkIHZvaWQgc3RvcERlbGl2ZXJ5KFN1YnNjcmliZXIgc3Vi\nc2NyaWJlciwgQnl0ZVN0cmluZyB0b3BpYywgQnl0ZVN0cmluZyBzdWJzY3Jp\nYmVySWQpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIHN1YnNjcmliZXIu\nc3RvcERlbGl2ZXJ5KHRvcGljLCBzdWJzY3JpYmVySWQpOwogICAgICAgIGlm\nIChtb2RlID09IE1vZGUuUFJPWFkpIHsKICAgICAgICAgICAgUHViU3ViUmVx\ndWVzdCByZXF1ZXN0ID0gUHViU3ViUmVxdWVzdC5uZXdCdWlsZGVyKCkuc2V0\nUHJvdG9jb2xWZXJzaW9uKFByb3RvY29sVmVyc2lvbi5WRVJTSU9OX09ORSkK\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldFRvcGlj\nKHRvcGljKS5zZXRUeG5JZCgxKS5zZXRUeXBlKE9wZXJhdGlvblR5cGUuU1RP\nUF9ERUxJVkVSWSkuc2V0U3RvcERlbGl2ZXJ5UmVxdWVzdCgKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0b3BEZWxpdmVyeVJl\ncXVlc3QubmV3QnVpbGRlcigpLnNldFN1YnNjcmliZXJJZChzdWJzY3JpYmVy\nSWQpKS5idWlsZCgpOwogICAgICAgICAgICBwcm94eS5nZXRTdG9wRGVsaXZl\ncnlIYW5kbGVyKCkuaGFuZGxlUmVxdWVzdChyZXF1ZXN0LCBwcm94eS5nZXRD\naGFubmVsVHJhY2tlcigpLmdldENoYW5uZWwodG9waWMsIHN1YnNjcmliZXJJ\nZCkpOwogICAgICAgIH0KICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBwdWJs\naXNoQmF0Y2goaW50IGJhdGNoU2l6ZSwgYm9vbGVhbiBleHBlY3RlZCwgYm9v\nbGVhbiBtZXNzYWdlc1RvQmVDb25zdW1lZCwgaW50IGxvb3ApIHRocm93cyBF\neGNlcHRpb24gewogICAgICAgIGlmIChsb2dnZXIuaXNEZWJ1Z0VuYWJsZWQo\nKSkKICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCJQdWJsaXNoaW5nICIgKyBs\nb29wICsgIiBiYXRjaCBvZiBtZXNzYWdlcy4iKTsKICAgICAgICBmb3IgKGlu\ndCBpID0gMDsgaSA8IGJhdGNoU2l6ZTsgaSsrKSB7CiAgICAgICAgICAgIHB1\nYmxpc2hlci5hc3luY1B1Ymxpc2goZ2V0VG9waWMoaSksIGdldE1zZyhpICsg\nbG9vcCAqIGJhdGNoU2l6ZSksIG5ldyBUZXN0Q2FsbGJhY2socXVldWUpLCBu\ndWxsKTsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZShleHBlY3RlZCA9PSBxdWV1\nZS50YWtlKCkpOwogICAgICAgICAgICBpZiAobWVzc2FnZXNUb0JlQ29uc3Vt\nZWQpCiAgICAgICAgICAgICAgICBhc3NlcnRUcnVlKGNvbnN1bWVRdWV1ZS50\nYWtlKCkpOwogICAgICAgIH0KICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBz\ndWJzY3JpYmVUb1RvcGljcyhpbnQgYmF0Y2hTaXplKSB0aHJvd3MgRXhjZXB0\naW9uIHsKICAgICAgICBpZiAobG9nZ2VyLmlzRGVidWdFbmFibGVkKCkpCiAg\nICAgICAgICAgIGxvZ2dlci5kZWJ1ZygiU3Vic2NyaWJpbmcgdG8gdG9waWNz\nIGFuZCBzdGFydGluZyBkZWxpdmVyeS4iKTsKICAgICAgICBmb3IgKGludCBp\nID0gMDsgaSA8IGJhdGNoU2l6ZTsgaSsrKSB7CiAgICAgICAgICAgIHN1YnNj\ncmliZXIuYXN5bmNTdWJzY3JpYmUoZ2V0VG9waWMoaSksIGxvY2FsU3Vic2Ny\naWJlcklkLCBDcmVhdGVPckF0dGFjaC5DUkVBVEVfT1JfQVRUQUNILAogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBUZXN0Q2Fs\nbGJhY2socXVldWUpLCBudWxsKTsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZShx\ndWV1ZS50YWtlKCkpOwogICAgICAgIH0KCiAgICAgICAgLy8gU3RhcnQgZGVs\naXZlcnkgZm9yIHRoZSBzdWJzY3JpYmVyCiAgICAgICAgZm9yIChpbnQgaSA9\nIDA7IGkgPCBiYXRjaFNpemU7IGkrKykgewogICAgICAgICAgICBzdGFydERl\nbGl2ZXJ5KGdldFRvcGljKGkpLCBsb2NhbFN1YnNjcmliZXJJZCwgbmV3IFRl\nc3RNZXNzYWdlSGFuZGxlcihjb25zdW1lUXVldWUpKTsKICAgICAgICB9CiAg\nICB9CgogICAgcHJvdGVjdGVkIHZvaWQgc2h1dERvd25MYXN0U2VydmVyKCkg\newogICAgICAgIGlmIChsb2dnZXIuaXNEZWJ1Z0VuYWJsZWQoKSkKICAgICAg\nICAgICAgbG9nZ2VyLmRlYnVnKCJTaHV0dGluZyBkb3duIHRoZSBsYXN0IHNl\ncnZlciBpbiB0aGUgSGVkd2lnIGh1YiBjbHVzdGVyLiIpOwogICAgICAgIHNl\ncnZlcnNMaXN0LmdldChzZXJ2ZXJzTGlzdC5zaXplKCkgLSAxKS5zaHV0ZG93\nbigpOwogICAgICAgIC8vIER1ZSB0byBhIHBvc3NpYmxlIHJhY2UgY29uZGl0\naW9uLCBhZnRlciB3ZSd2ZSBzaHV0ZG93biB0aGUgc2VydmVyLAogICAgICAg\nIC8vIHRoZSBjbGllbnQgY291bGQgc3RpbGwgYmUgY2FjaGluZyB0aGUgY2hh\nbm5lbCBjb25uZWN0aW9uIHRvIHRoYXQKICAgICAgICAvLyBzZXJ2ZXIuIEl0\nIGlzIHBvc3NpYmxlIGZvciBhIHB1Ymxpc2ggcmVxdWVzdCB0byBnbyB0byB0\naGUgc2h1dGRvd24KICAgICAgICAvLyBzZXJ2ZXIgdXNpbmcgdGhlIGNsb3Nl\nZC9zaHV0ZG93biBjaGFubmVsIGJlZm9yZSB0aGUgY2hhbm5lbAogICAgICAg\nIC8vIGRpc2Nvbm5lY3QgbG9naWMga2lja3MgaW4uIFdoYXQgY291bGQgaGFw\ncGVuIGlzIHRoYXQgdGhlIHB1Ymxpc2gKICAgICAgICAvLyBpcyBkb25lIHN1\nY2Nlc3NmdWxseSBvbiB0aGUgY2hhbm5lbCBidXQgdGhlIHNlcnZlciBvbiB0\naGUgb3RoZXIgZW5kCiAgICAgICAgLy8gY2FuJ3Qvd29uJ3QgcmVhZCBpdC4g\nVGhpcyBwdWJsaXNoIHJlcXVlc3Qgd2lsbCB0aW1lIG91dCBhbmQgdGhlCiAg\nICAgICAgLy8gSnVuaXQgdGVzdCB3aWxsIGZhaWwuIFNpbmNlIHRoYXQgcGFy\ndGljdWxhciBzY2VuYXJpbyBpcyBub3Qgd2hhdCBpcwogICAgICAgIC8vIHRl\nc3RlZCBoZXJlLCB1c2UgYSB3b3JrYXJvdW5kIG9mIHNsZWVwaW5nIGluIHRo\naXMgdGhyZWFkIChzbyB0aGUKICAgICAgICAvLyBjaGFubmVsIGRpc2Nvbm5l\nY3QgbG9naWMgY2FuIGNvbXBsZXRlKSBiZWZvcmUgd2UgcHVibGlzaCBhZ2Fp\nbi4KICAgICAgICB0cnkgewogICAgICAgICAgICBUaHJlYWQuc2xlZXAoMTAw\nMCk7CiAgICAgICAgfSBjYXRjaCAoSW50ZXJydXB0ZWRFeGNlcHRpb24gZSkg\newogICAgICAgICAgICBsb2dnZXIuZXJyb3IoIlRocmVhZCB3YXMgaW50ZXJy\ndXB0ZWQgd2hpbGUgc2xlZXBpbmcgYWZ0ZXIgc2h1dHRpbmcgZG93biBsYXN0\nIHNlcnZlciEiLCBlKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gVGhpcyB0\nZXN0cyBvdXQgdGhlIG1hbnVhbCBzZW5kaW5nIG9mIGNvbnN1bWUgbWVzc2Fn\nZXMgdG8gdGhlIHNlcnZlcgogICAgLy8gaW5zdGVhZCBvZiByZWx5aW5nIG9u\nIHRoZSBhdXRvbWF0aWMgc2VuZGluZyBieSB0aGUgY2xpZW50IGxpYiBmb3Ig\naXQuCiAgICBAVGVzdCh0aW1lb3V0PTEwMDAwKQogICAgcHVibGljIHZvaWQg\ndGVzdE1hbnVhbENvbnN1bWVDbGllbnQoKSB0aHJvd3MgRXhjZXB0aW9uIHsK\nICAgICAgICBIZWR3aWdDbGllbnQgbXlDbGllbnQgPSBuZXcgSGVkd2lnQ2xp\nZW50KG5ldyBUZXN0Q2xpZW50Q29uZmlndXJhdGlvbigpIHsKICAgICAgICAg\nICAgQE92ZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyBib29sZWFuIGlzQXV0\nb1NlbmRDb25zdW1lTWVzc2FnZUVuYWJsZWQoKSB7CiAgICAgICAgICAgICAg\nICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgfSk7CiAg\nICAgICAgU3Vic2NyaWJlciBteVN1YnNjcmliZXIgPSBteUNsaWVudC5nZXRT\ndWJzY3JpYmVyKCk7CiAgICAgICAgUHVibGlzaGVyIG15UHVibGlzaGVyID0g\nbXlDbGllbnQuZ2V0UHVibGlzaGVyKCk7CiAgICAgICAgQnl0ZVN0cmluZyBt\neVRvcGljID0gZ2V0VG9waWMoMCk7CiAgICAgICAgLy8gU3Vic2NyaWJlIHRv\nIGEgdG9waWMgYW5kIHN0YXJ0IGRlbGl2ZXJ5IG9uIGl0CiAgICAgICAgbXlT\ndWJzY3JpYmVyLmFzeW5jU3Vic2NyaWJlKG15VG9waWMsIGxvY2FsU3Vic2Ny\naWJlcklkLCBDcmVhdGVPckF0dGFjaC5DUkVBVEVfT1JfQVRUQUNILAogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgVGVzdENhbGxi\nYWNrKHF1ZXVlKSwgbnVsbCk7CiAgICAgICAgYXNzZXJ0VHJ1ZShxdWV1ZS50\nYWtlKCkpOwogICAgICAgIHN0YXJ0RGVsaXZlcnkobXlTdWJzY3JpYmVyLCBt\neVRvcGljLCBsb2NhbFN1YnNjcmliZXJJZCwgbmV3IFRlc3RNZXNzYWdlSGFu\nZGxlcihjb25zdW1lUXVldWUpKTsKICAgICAgICAvLyBQdWJsaXNoIHNvbWUg\nbWVzc2FnZXMKICAgICAgICBpbnQgYmF0Y2hTaXplID0gMTA7CiAgICAgICAg\nZm9yIChpbnQgaSA9IDA7IGkgPCBiYXRjaFNpemU7IGkrKykgewogICAgICAg\nICAgICBteVB1Ymxpc2hlci5hc3luY1B1Ymxpc2gobXlUb3BpYywgZ2V0TXNn\nKGkpLCBuZXcgVGVzdENhbGxiYWNrKHF1ZXVlKSwgbnVsbCk7CiAgICAgICAg\nICAgIGFzc2VydFRydWUocXVldWUudGFrZSgpKTsKICAgICAgICAgICAgYXNz\nZXJ0VHJ1ZShjb25zdW1lUXVldWUudGFrZSgpKTsKICAgICAgICB9CiAgICAg\nICAgLy8gTm93IG1hbnVhbGx5IHNlbmQgYSBjb25zdW1lIG1lc3NhZ2UgZm9y\nIGVhY2ggbWVzc2FnZSByZWNlaXZlZAogICAgICAgIGZvciAoaW50IGkgPSAw\nOyBpIDwgYmF0Y2hTaXplOyBpKyspIHsKICAgICAgICAgICAgYm9vbGVhbiBz\ndWNjZXNzID0gdHJ1ZTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\nICAgIG15U3Vic2NyaWJlci5jb25zdW1lKG15VG9waWMsIGxvY2FsU3Vic2Ny\naWJlcklkLCBNZXNzYWdlU2VxSWQubmV3QnVpbGRlcigpLnNldExvY2FsQ29t\ncG9uZW50KGkgKyAxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgLmJ1aWxkKCkpOwogICAgICAgICAgICB9IGNhdGNoIChDbGllbnRO\nb3RTdWJzY3JpYmVkRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgIHN1\nY2Nlc3MgPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBhc3Nl\ncnRUcnVlKHN1Y2Nlc3MpOwogICAgICAgIH0KICAgICAgICAvLyBTaW5jZSB0\naGUgY29uc3VtZSBjYWxsIGV2ZW50dWFsbHkgZG9lcyBhbiBhc3luYyB3cml0\nZSB0byB0aGUgTmV0dHkKICAgICAgICAvLyBjaGFubmVsLCB0aGUgd3JpdGlu\nZyBvZiB0aGUgY29uc3VtZSByZXF1ZXN0cyBtYXkgbm90IGhhdmUgY29tcGxl\ndGVkCiAgICAgICAgLy8geWV0IGJlZm9yZSB3ZSBzdG9wIHRoZSBjbGllbnQu\nIFNsZWVwIGEgbGl0dGxlIGJlZm9yZSB3ZSBzdG9wIHRoZQogICAgICAgIC8v\nIGNsaWVudCBqdXN0IHNvIGVycm9yIG1lc3NhZ2VzIGFyZSBub3QgbG9nZ2Vk\nLgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIFRocmVhZC5zbGVlcCgxMDAw\nKTsKICAgICAgICB9IGNhdGNoIChJbnRlcnJ1cHRlZEV4Y2VwdGlvbiBlKSB7\nCiAgICAgICAgICAgIGxvZ2dlci5lcnJvcigiVGhyZWFkIHdhcyBpbnRlcnJ1\ncHRlZCB3aGlsZSB3YWl0aW5nIHRvIHN0b3AgY2xpZW50IGZvciBtYW51YWwg\nY29uc3VtZSB0ZXN0ISEiLCBlKTsKICAgICAgICB9CiAgICAgICAgbXlDbGll\nbnQuY2xvc2UoKTsKICAgIH0KCiAgICBAVGVzdCh0aW1lb3V0PTEwMDAwKQog\nICAgcHVibGljIHZvaWQgdGVzdEF0dGFjaFRvU3Vic2NyaXB0aW9uU3VjY2Vz\ncygpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIEJ5dGVTdHJpbmcgdG9w\naWMgPSBnZXRUb3BpYygwKTsKICAgICAgICBzdWJzY3JpYmVyLmFzeW5jU3Vi\nc2NyaWJlKHRvcGljLCBsb2NhbFN1YnNjcmliZXJJZCwgQ3JlYXRlT3JBdHRh\nY2guQ1JFQVRFX09SX0FUVEFDSCwgbmV3IFRlc3RDYWxsYmFjayhxdWV1ZSks\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsKTsKICAg\nICAgICBhc3NlcnRUcnVlKHF1ZXVlLnRha2UoKSk7CiAgICAgICAgLy8gQ2xv\nc2UgdGhlIHN1YnNjcmlwdGlvbiBhc3luY2hyb25vdXNseQogICAgICAgIHN1\nYnNjcmliZXIuYXN5bmNDbG9zZVN1YnNjcmlwdGlvbih0b3BpYywgbG9jYWxT\ndWJzY3JpYmVySWQsIG5ldyBUZXN0Q2FsbGJhY2socXVldWUpLCBudWxsKTsK\nICAgICAgICBhc3NlcnRUcnVlKHF1ZXVlLnRha2UoKSk7CiAgICAgICAgLy8g\nTm93IHRyeSB0byBhdHRhY2ggdG8gdGhlIHN1YnNjcmlwdGlvbgogICAgICAg\nIHN1YnNjcmliZXIuYXN5bmNTdWJzY3JpYmUodG9waWMsIGxvY2FsU3Vic2Ny\naWJlcklkLCBDcmVhdGVPckF0dGFjaC5BVFRBQ0gsIG5ldyBUZXN0Q2FsbGJh\nY2socXVldWUpLCBudWxsKTsKICAgICAgICBhc3NlcnRUcnVlKHF1ZXVlLnRh\na2UoKSk7CiAgICAgICAgLy8gU3RhcnQgZGVsaXZlcnkgYW5kIHB1Ymxpc2gg\nc29tZSBtZXNzYWdlcy4gTWFrZSBzdXJlIHRoZXkgYXJlIGNvbnN1bWVkCiAg\nICAgICAgLy8gY29ycmVjdGx5LgogICAgICAgIHN0YXJ0RGVsaXZlcnkodG9w\naWMsIGxvY2FsU3Vic2NyaWJlcklkLCBuZXcgVGVzdE1lc3NhZ2VIYW5kbGVy\nKGNvbnN1bWVRdWV1ZSkpOwogICAgICAgIGludCBiYXRjaFNpemUgPSA1Owog\nICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYmF0Y2hTaXplOyBpKyspIHsK\nICAgICAgICAgICAgcHVibGlzaGVyLmFzeW5jUHVibGlzaCh0b3BpYywgZ2V0\nTXNnKGkpLCBuZXcgVGVzdENhbGxiYWNrKHF1ZXVlKSwgbnVsbCk7CiAgICAg\nICAgICAgIGFzc2VydFRydWUocXVldWUudGFrZSgpKTsKICAgICAgICAgICAg\nYXNzZXJ0VHJ1ZShjb25zdW1lUXVldWUudGFrZSgpKTsKICAgICAgICB9CiAg\nICB9CgogICAgQFRlc3QodGltZW91dD0xMDAwMCkKICAgIHB1YmxpYyB2b2lk\nIHRlc3RTZXJ2ZXJSZWRpcmVjdCgpIHRocm93cyBFeGNlcHRpb24gewogICAg\nICAgIGludCBiYXRjaFNpemUgPSAxMDsKICAgICAgICBwdWJsaXNoQmF0Y2go\nYmF0Y2hTaXplLCB0cnVlLCBmYWxzZSwgMCk7CiAgICB9CgogICAgQFRlc3Qo\ndGltZW91dD0xMDAwMCkKICAgIHB1YmxpYyB2b2lkIHRlc3RTdWJzY3JpYmVB\nbmRDb25zdW1lKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgaW50IGJh\ndGNoU2l6ZSA9IDEwOwogICAgICAgIHN1YnNjcmliZVRvVG9waWNzKGJhdGNo\nU2l6ZSk7CiAgICAgICAgcHVibGlzaEJhdGNoKGJhdGNoU2l6ZSwgdHJ1ZSwg\ndHJ1ZSwgMCk7CiAgICB9CgogICAgQFRlc3QodGltZW91dD0xMDAwMCkKICAg\nIHB1YmxpYyB2b2lkIHRlc3RTZXJ2ZXJGYWlsb3ZlclB1Ymxpc2hPbmx5KCkg\ndGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgaW50IGJhdGNoU2l6ZSA9IDEw\nOwogICAgICAgIHB1Ymxpc2hCYXRjaChiYXRjaFNpemUsIHRydWUsIGZhbHNl\nLCAwKTsKICAgICAgICBzaHV0RG93bkxhc3RTZXJ2ZXIoKTsKICAgICAgICBw\ndWJsaXNoQmF0Y2goYmF0Y2hTaXplLCB0cnVlLCBmYWxzZSwgMSk7CiAgICB9\nCgogICAgQFRlc3QodGltZW91dD0xMDAwMCkKICAgIHB1YmxpYyB2b2lkIHRl\nc3RTZXJ2ZXJGYWlsb3ZlcigpIHRocm93cyBFeGNlcHRpb24gewogICAgICAg\nIGludCBiYXRjaFNpemUgPSAxMDsKICAgICAgICBzdWJzY3JpYmVUb1RvcGlj\ncyhiYXRjaFNpemUpOwogICAgICAgIHB1Ymxpc2hCYXRjaChiYXRjaFNpemUs\nIHRydWUsIHRydWUsIDApOwogICAgICAgIHNodXREb3duTGFzdFNlcnZlcigp\nOwogICAgICAgIHB1Ymxpc2hCYXRjaChiYXRjaFNpemUsIHRydWUsIHRydWUs\nIDEpOwogICAgfQoKICAgIEBUZXN0KHRpbWVvdXQ9MTAwMDApCiAgICBwdWJs\naWMgdm9pZCB0ZXN0VW5zdWJzY3JpYmUoKSB0aHJvd3MgRXhjZXB0aW9uIHsK\nICAgICAgICBCeXRlU3RyaW5nIHRvcGljID0gZ2V0VG9waWMoMCk7CiAgICAg\nICAgc3Vic2NyaWJlci5hc3luY1N1YnNjcmliZSh0b3BpYywgbG9jYWxTdWJz\nY3JpYmVySWQsIENyZWF0ZU9yQXR0YWNoLkNSRUFURV9PUl9BVFRBQ0gsIG5l\ndyBUZXN0Q2FsbGJhY2socXVldWUpLAogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgbnVsbCk7CiAgICAgICAgYXNzZXJ0VHJ1ZShxdWV1ZS50\nYWtlKCkpOwogICAgICAgIHN0YXJ0RGVsaXZlcnkodG9waWMsIGxvY2FsU3Vi\nc2NyaWJlcklkLCBuZXcgVGVzdE1lc3NhZ2VIYW5kbGVyKGNvbnN1bWVRdWV1\nZSkpOwogICAgICAgIHB1Ymxpc2hlci5hc3luY1B1Ymxpc2godG9waWMsIGdl\ndE1zZygwKSwgbmV3IFRlc3RDYWxsYmFjayhxdWV1ZSksIG51bGwpOwogICAg\nICAgIGFzc2VydFRydWUocXVldWUudGFrZSgpKTsKICAgICAgICBhc3NlcnRU\ncnVlKGNvbnN1bWVRdWV1ZS50YWtlKCkpOwogICAgICAgIC8vIFNlbmQgYW4g\nVW5zdWJzY3JpYmUgcmVxdWVzdAogICAgICAgIHN1YnNjcmliZXIuYXN5bmNV\nbnN1YnNjcmliZSh0b3BpYywgbG9jYWxTdWJzY3JpYmVySWQsIG5ldyBUZXN0\nQ2FsbGJhY2socXVldWUpLCBudWxsKTsKICAgICAgICBhc3NlcnRUcnVlKHF1\nZXVlLnRha2UoKSk7CiAgICAgICAgLy8gTm93IHB1Ymxpc2ggYSBtZXNzYWdl\nIGFuZCBtYWtlIHN1cmUgaXQgaXMgbm90IGNvbnN1bWVkIGJ5IHRoZSBjbGll\nbnQKICAgICAgICBwdWJsaXNoZXIuYXN5bmNQdWJsaXNoKHRvcGljLCBnZXRN\nc2coMSksIG5ldyBUZXN0Q2FsbGJhY2socXVldWUpLCBudWxsKTsKICAgICAg\nICBhc3NlcnRUcnVlKHF1ZXVlLnRha2UoKSk7CiAgICAgICAgLy8gV2FpdCBh\nIGxpdHRsZSBiaXQganVzdCBpbiBjYXNlIHRoZSBtZXNzYWdlIGhhbmRsZXIg\naXMgc3RpbGwgYWN0aXZlLAogICAgICAgIC8vIGNvbnN1bWluZyB0aGUgbWVz\nc2FnZSwgYW5kIHRoZW4gcHV0dGluZyBhIHRydWUgdmFsdWUgaW4gdGhlCiAg\nICAgICAgLy8gY29uc3VtZVF1ZXVlLgogICAgICAgIFRocmVhZC5zbGVlcCgx\nMDAwKTsKICAgICAgICAvLyBQdXQgYSBGYWxzZSB2YWx1ZSBvbiB0aGUgY29u\nc3VtZVF1ZXVlIHNvIHdlIGNhbiB2ZXJpZnkgdGhhdCBpdAogICAgICAgIC8v\nIGlzIG5vdCBibG9ja2VkIGJ5IGEgbWVzc2FnZSBjb25zdW1lIGFjdGlvbiB3\naGljaCBhbHJlYWR5IHB1dCBhIFRydWUKICAgICAgICAvLyB2YWx1ZSBpbnRv\nIHRoZSBxdWV1ZS4KICAgICAgICBuZXcgVGhyZWFkKG5ldyBSdW5uYWJsZSgp\nIHsKICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyB2\nb2lkIHJ1bigpIHsKICAgICAgICAgICAgICAgIENvbmN1cnJlbmN5VXRpbHMu\ncHV0KGNvbnN1bWVRdWV1ZSwgZmFsc2UpOwogICAgICAgICAgICB9CiAgICAg\nICAgfSkuc3RhcnQoKTsKICAgICAgICBhc3NlcnRGYWxzZShjb25zdW1lUXVl\ndWUudGFrZSgpKTsKICAgIH0KCiAgICBAVGVzdCh0aW1lb3V0PTEwMDAwKQog\nICAgcHVibGljIHZvaWQgdGVzdFN5bmNVbnN1YnNjcmliZVdpdGhvdXRTdWJz\nY3JpcHRpb24oKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBib29sZWFu\nIHVuc3Vic2NyaWJlU3VjY2VzcyA9IGZhbHNlOwogICAgICAgIHRyeSB7CiAg\nICAgICAgICAgIHN1YnNjcmliZXIudW5zdWJzY3JpYmUoZ2V0VG9waWMoMCks\nIGxvY2FsU3Vic2NyaWJlcklkKTsKICAgICAgICB9IGNhdGNoIChDbGllbnRO\nb3RTdWJzY3JpYmVkRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgdW5zdWJz\nY3JpYmVTdWNjZXNzID0gdHJ1ZTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRp\nb24gZXgpIHsKICAgICAgICAgICAgdW5zdWJzY3JpYmVTdWNjZXNzID0gZmFs\nc2U7CiAgICAgICAgfQogICAgICAgIGFzc2VydFRydWUodW5zdWJzY3JpYmVT\ndWNjZXNzKTsKICAgIH0KCiAgICBAVGVzdCh0aW1lb3V0PTEwMDAwKQogICAg\ncHVibGljIHZvaWQgdGVzdEFzeW5jVW5zdWJzY3JpYmVXaXRob3V0U3Vic2Ny\naXB0aW9uKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgc3Vic2NyaWJl\nci5hc3luY1Vuc3Vic2NyaWJlKGdldFRvcGljKDApLCBsb2NhbFN1YnNjcmli\nZXJJZCwgbmV3IFRlc3RDYWxsYmFjayhxdWV1ZSksIG51bGwpOwogICAgICAg\nIGFzc2VydEZhbHNlKHF1ZXVlLnRha2UoKSk7CiAgICB9CgogICAgQFRlc3Qo\ndGltZW91dD0xMDAwMCkKICAgIHB1YmxpYyB2b2lkIHRlc3RDbG9zZVN1YnNj\ncmlwdGlvbigpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIEJ5dGVTdHJp\nbmcgdG9waWMgPSBnZXRUb3BpYygwKTsKICAgICAgICBzdWJzY3JpYmVyLmFz\neW5jU3Vic2NyaWJlKHRvcGljLCBsb2NhbFN1YnNjcmliZXJJZCwgQ3JlYXRl\nT3JBdHRhY2guQ1JFQVRFX09SX0FUVEFDSCwgbmV3IFRlc3RDYWxsYmFjayhx\ndWV1ZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxs\nKTsKICAgICAgICBhc3NlcnRUcnVlKHF1ZXVlLnRha2UoKSk7CiAgICAgICAg\nc3RhcnREZWxpdmVyeSh0b3BpYywgbG9jYWxTdWJzY3JpYmVySWQsIG5ldyBU\nZXN0TWVzc2FnZUhhbmRsZXIoY29uc3VtZVF1ZXVlKSk7CiAgICAgICAgcHVi\nbGlzaGVyLmFzeW5jUHVibGlzaCh0b3BpYywgZ2V0TXNnKDApLCBuZXcgVGVz\ndENhbGxiYWNrKHF1ZXVlKSwgbnVsbCk7CiAgICAgICAgYXNzZXJ0VHJ1ZShx\ndWV1ZS50YWtlKCkpOwogICAgICAgIGFzc2VydFRydWUoY29uc3VtZVF1ZXVl\nLnRha2UoKSk7CiAgICAgICAgLy8gQ2xvc2UgdGhlIHN1YnNjcmlwdGlvbiBh\nc3luY2hyb25vdXNseQogICAgICAgIHN1YnNjcmliZXIuYXN5bmNDbG9zZVN1\nYnNjcmlwdGlvbih0b3BpYywgbG9jYWxTdWJzY3JpYmVySWQsIG5ldyBUZXN0\nQ2FsbGJhY2socXVldWUpLCBudWxsKTsKICAgICAgICBhc3NlcnRUcnVlKHF1\nZXVlLnRha2UoKSk7CiAgICAgICAgLy8gTm93IHB1Ymxpc2ggYSBtZXNzYWdl\nIGFuZCBtYWtlIHN1cmUgaXQgaXMgbm90IGNvbnN1bWVkIGJ5IHRoZSBjbGll\nbnQKICAgICAgICBwdWJsaXNoZXIuYXN5bmNQdWJsaXNoKHRvcGljLCBnZXRN\nc2coMSksIG5ldyBUZXN0Q2FsbGJhY2socXVldWUpLCBudWxsKTsKICAgICAg\nICBhc3NlcnRUcnVlKHF1ZXVlLnRha2UoKSk7CiAgICAgICAgLy8gV2FpdCBh\nIGxpdHRsZSBiaXQganVzdCBpbiBjYXNlIHRoZSBtZXNzYWdlIGhhbmRsZXIg\naXMgc3RpbGwgYWN0aXZlLAogICAgICAgIC8vIGNvbnN1bWluZyB0aGUgbWVz\nc2FnZSwgYW5kIHRoZW4gcHV0dGluZyBhIHRydWUgdmFsdWUgaW4gdGhlCiAg\nICAgICAgLy8gY29uc3VtZVF1ZXVlLgogICAgICAgIFRocmVhZC5zbGVlcCgx\nMDAwKTsKICAgICAgICAvLyBQdXQgYSBGYWxzZSB2YWx1ZSBvbiB0aGUgY29u\nc3VtZVF1ZXVlIHNvIHdlIGNhbiB2ZXJpZnkgdGhhdCBpdAogICAgICAgIC8v\nIGlzIG5vdCBibG9ja2VkIGJ5IGEgbWVzc2FnZSBjb25zdW1lIGFjdGlvbiB3\naGljaCBhbHJlYWR5IHB1dCBhIFRydWUKICAgICAgICAvLyB2YWx1ZSBpbnRv\nIHRoZSBxdWV1ZS4KICAgICAgICBuZXcgVGhyZWFkKG5ldyBSdW5uYWJsZSgp\nIHsKICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyB2\nb2lkIHJ1bigpIHsKICAgICAgICAgICAgICAgIENvbmN1cnJlbmN5VXRpbHMu\ncHV0KGNvbnN1bWVRdWV1ZSwgZmFsc2UpOwogICAgICAgICAgICB9CiAgICAg\nICAgfSkuc3RhcnQoKTsKICAgICAgICBhc3NlcnRGYWxzZShjb25zdW1lUXVl\ndWUudGFrZSgpKTsKICAgIH0KCiAgICBAVGVzdCh0aW1lb3V0PTEwMDAwKQog\nICAgcHVibGljIHZvaWQgdGVzdFN0YXJ0RGVsaXZlcnlUd2ljZSgpIHRocm93\ncyBFeGNlcHRpb24gewogICAgICAgIEJ5dGVTdHJpbmcgdG9waWMgPSBnZXRU\nb3BpYygwKTsKICAgICAgICBzdWJzY3JpYmVyLmFzeW5jU3Vic2NyaWJlKHRv\ncGljLCBsb2NhbFN1YnNjcmliZXJJZCwgQ3JlYXRlT3JBdHRhY2guQ1JFQVRF\nX09SX0FUVEFDSCwgbmV3IFRlc3RDYWxsYmFjayhxdWV1ZSksCiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsKTsKICAgICAgICBhc3Nl\ncnRUcnVlKHF1ZXVlLnRha2UoKSk7CiAgICAgICAgc3RhcnREZWxpdmVyeSh0\nb3BpYywgbG9jYWxTdWJzY3JpYmVySWQsIG5ldyBUZXN0TWVzc2FnZUhhbmRs\nZXIoY29uc3VtZVF1ZXVlKSk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\nc3RhcnREZWxpdmVyeSh0b3BpYywgbG9jYWxTdWJzY3JpYmVySWQsIG5ldyBU\nZXN0TWVzc2FnZUhhbmRsZXIoY29uc3VtZVF1ZXVlKSk7CiAgICAgICAgICAg\nIGZhaWwoIlNob3VsZCBub3QgcmVhY2ggaGVyZSEiKTsKICAgICAgICB9IGNh\ndGNoIChBbHJlYWR5U3RhcnREZWxpdmVyeUV4Y2VwdGlvbiBlKSB7CiAgICAg\nICAgfQogICAgfQoKICAgIEBUZXN0KHRpbWVvdXQ9MTAwMDApCiAgICBwdWJs\naWMgdm9pZCB0ZXN0U3RvcERlbGl2ZXJ5KCkgdGhyb3dzIEV4Y2VwdGlvbiB7\nCiAgICAgICAgQnl0ZVN0cmluZyB0b3BpYyA9IGdldFRvcGljKDApOwogICAg\nICAgIHN1YnNjcmliZXIuYXN5bmNTdWJzY3JpYmUodG9waWMsIGxvY2FsU3Vi\nc2NyaWJlcklkLCBDcmVhdGVPckF0dGFjaC5DUkVBVEVfT1JfQVRUQUNILCBu\nZXcgVGVzdENhbGxiYWNrKHF1ZXVlKSwKICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgIG51bGwpOwogICAgICAgIGFzc2VydFRydWUocXVldWUu\ndGFrZSgpKTsKICAgICAgICBzdGFydERlbGl2ZXJ5KHRvcGljLCBsb2NhbFN1\nYnNjcmliZXJJZCwgbmV3IFRlc3RNZXNzYWdlSGFuZGxlcihjb25zdW1lUXVl\ndWUpKTsKICAgICAgICBwdWJsaXNoZXIuYXN5bmNQdWJsaXNoKHRvcGljLCBn\nZXRNc2coMCksIG5ldyBUZXN0Q2FsbGJhY2socXVldWUpLCBudWxsKTsKICAg\nICAgICBhc3NlcnRUcnVlKHF1ZXVlLnRha2UoKSk7CiAgICAgICAgYXNzZXJ0\nVHJ1ZShjb25zdW1lUXVldWUudGFrZSgpKTsKICAgICAgICAvLyBTdG9wIHRo\nZSBkZWxpdmVyeSBmb3IgdGhpcyBzdWJzY3JpcHRpb24KICAgICAgICBzdG9w\nRGVsaXZlcnkodG9waWMsIGxvY2FsU3Vic2NyaWJlcklkKTsKICAgICAgICAv\nLyBQdWJsaXNoIHNvbWUgbW9yZSBtZXNzYWdlcyBzbyB0aGV5IGFyZSBxdWV1\nZWQgdXAgdG8gYmUgZGVsaXZlcmVkIHRvCiAgICAgICAgLy8gdGhlIGNsaWVu\ndAogICAgICAgIGludCBiYXRjaFNpemUgPSAxMDsKICAgICAgICBmb3IgKGlu\ndCBpID0gMDsgaSA8IGJhdGNoU2l6ZTsgaSsrKSB7CiAgICAgICAgICAgIHB1\nYmxpc2hlci5hc3luY1B1Ymxpc2godG9waWMsIGdldE1zZyhpICsgMSksIG5l\ndyBUZXN0Q2FsbGJhY2socXVldWUpLCBudWxsKTsKICAgICAgICAgICAgYXNz\nZXJ0VHJ1ZShxdWV1ZS50YWtlKCkpOwogICAgICAgIH0KICAgICAgICAvLyBX\nYWl0IGEgbGl0dGxlIGJpdCBqdXN0IGluIGNhc2UgdGhlIG1lc3NhZ2UgaGFu\nZGxlciBpcyBzdGlsbCBhY3RpdmUsCiAgICAgICAgLy8gY29uc3VtaW5nIHRo\nZSBtZXNzYWdlLCBhbmQgdGhlbiBwdXR0aW5nIGEgdHJ1ZSB2YWx1ZSBpbiB0\naGUKICAgICAgICAvLyBjb25zdW1lUXVldWUuCiAgICAgICAgVGhyZWFkLnNs\nZWVwKDEwMDApOwogICAgICAgIC8vIFB1dCBhIEZhbHNlIHZhbHVlIG9uIHRo\nZSBjb25zdW1lUXVldWUgc28gd2UgY2FuIHZlcmlmeSB0aGF0IGl0CiAgICAg\nICAgLy8gaXMgbm90IGJsb2NrZWQgYnkgYSBtZXNzYWdlIGNvbnN1bWUgYWN0\naW9uIHdoaWNoIGFscmVhZHkgcHV0IGEgVHJ1ZQogICAgICAgIC8vIHZhbHVl\nIGludG8gdGhlIHF1ZXVlLgogICAgICAgIG5ldyBUaHJlYWQobmV3IFJ1bm5h\nYmxlKCkgewogICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVi\nbGljIHZvaWQgcnVuKCkgewogICAgICAgICAgICAgICAgQ29uY3VycmVuY3lV\ndGlscy5wdXQoY29uc3VtZVF1ZXVlLCBmYWxzZSk7CiAgICAgICAgICAgIH0K\nICAgICAgICB9KS5zdGFydCgpOwogICAgICAgIGFzc2VydEZhbHNlKGNvbnN1\nbWVRdWV1ZS50YWtlKCkpOwogICAgICAgIC8vIE5vdyBzdGFydCBkZWxpdmVy\neSBhZ2FpbiBhbmQgdmVyaWZ5IHRoYXQgdGhlIHF1ZXVlZCB1cCBtZXNzYWdl\ncyBhcmUKICAgICAgICAvLyBjb25zdW1lZAogICAgICAgIHN0YXJ0RGVsaXZl\ncnkodG9waWMsIGxvY2FsU3Vic2NyaWJlcklkLCBuZXcgVGVzdE1lc3NhZ2VI\nYW5kbGVyKGNvbnN1bWVRdWV1ZSkpOwogICAgICAgIGZvciAoaW50IGkgPSAw\nOyBpIDwgYmF0Y2hTaXplOyBpKyspIHsKICAgICAgICAgICAgYXNzZXJ0VHJ1\nZShjb25zdW1lUXVldWUudGFrZSgpKTsKICAgICAgICB9CiAgICB9CgogICAg\nQFRlc3QodGltZW91dD0xMDAwMCkKICAgIHB1YmxpYyB2b2lkIHRlc3RDb25z\ndW1lZE1lc3NhZ2VzSW5PcmRlcigpIHRocm93cyBFeGNlcHRpb24gewogICAg\nICAgIEJ5dGVTdHJpbmcgdG9waWMgPSBnZXRUb3BpYygwKTsKICAgICAgICBz\ndWJzY3JpYmVyLmFzeW5jU3Vic2NyaWJlKHRvcGljLCBsb2NhbFN1YnNjcmli\nZXJJZCwgQ3JlYXRlT3JBdHRhY2guQ1JFQVRFX09SX0FUVEFDSCwgbmV3IFRl\nc3RDYWxsYmFjayhxdWV1ZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICBudWxsKTsKICAgICAgICBhc3NlcnRUcnVlKHF1ZXVlLnRha2Uo\nKSk7CiAgICAgICAgc3RhcnREZWxpdmVyeSh0b3BpYywgbG9jYWxTdWJzY3Jp\nYmVySWQsIG5ldyBUZXN0TWVzc2FnZUhhbmRsZXIoY29uc3VtZVF1ZXVlKSk7\nCiAgICAgICAgLy8gTm93IHB1Ymxpc2ggc29tZSBtZXNzYWdlcyBhbmQgdmVy\naWZ5IHRoYXQgdGhleSBhcmUgZGVsaXZlcmVkIGluIG9yZGVyCiAgICAgICAg\nLy8gdG8gdGhlIHN1YnNjcmliZXIKICAgICAgICBpbnQgYmF0Y2hTaXplID0g\nMTAwOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYmF0Y2hTaXplOyBp\nKyspIHsKICAgICAgICAgICAgcHVibGlzaGVyLmFzeW5jUHVibGlzaCh0b3Bp\nYywgZ2V0TXNnKGkpLCBuZXcgVGVzdENhbGxiYWNrKHF1ZXVlKSwgbnVsbCk7\nCiAgICAgICAgfQogICAgICAgIC8vIFdlJ3ZlIHNlbnQgb3V0IGFsbCBvZiB0\naGUgcHVibGlzaCBtZXNzYWdlcyBhc3luY2hyb25vdXNseSwKICAgICAgICAv\nLyBub3cgdmVyaWZ5IHRoYXQgdGhleSBhcmUgY29uc3VtZWQgaW4gdGhlIGNv\ncnJlY3Qgb3JkZXIuCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBiYXRj\naFNpemU7IGkrKykgewogICAgICAgICAgICBhc3NlcnRUcnVlKHF1ZXVlLnRh\na2UoKSk7CiAgICAgICAgICAgIGFzc2VydFRydWUoY29uc3VtZVF1ZXVlLnRh\na2UoKSk7CiAgICAgICAgfQogICAgfQoKICAgIEBUZXN0KHRpbWVvdXQ9MTAw\nMDApCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q3JlYXRlU3Vic2NyaXB0aW9uRmFp\nbHVyZSgpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIEJ5dGVTdHJpbmcg\ndG9waWMgPSBnZXRUb3BpYygwKTsKICAgICAgICBzdWJzY3JpYmVyLmFzeW5j\nU3Vic2NyaWJlKHRvcGljLCBsb2NhbFN1YnNjcmliZXJJZCwgQ3JlYXRlT3JB\ndHRhY2guQ1JFQVRFX09SX0FUVEFDSCwgbmV3IFRlc3RDYWxsYmFjayhxdWV1\nZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsKTsK\nICAgICAgICBhc3NlcnRUcnVlKHF1ZXVlLnRha2UoKSk7CiAgICAgICAgLy8g\nQ2xvc2UgdGhlIHN1YnNjcmlwdGlvbiBhc3luY2hyb25vdXNseQogICAgICAg\nIHN1YnNjcmliZXIuYXN5bmNDbG9zZVN1YnNjcmlwdGlvbih0b3BpYywgbG9j\nYWxTdWJzY3JpYmVySWQsIG5ldyBUZXN0Q2FsbGJhY2socXVldWUpLCBudWxs\nKTsKICAgICAgICBhc3NlcnRUcnVlKHF1ZXVlLnRha2UoKSk7CiAgICAgICAg\nLy8gTm93IHRyeSB0byBjcmVhdGUgdGhlIHN1YnNjcmlwdGlvbiB3aGVuIGl0\nIGFscmVhZHkgZXhpc3RzCiAgICAgICAgc3Vic2NyaWJlci5hc3luY1N1YnNj\ncmliZSh0b3BpYywgbG9jYWxTdWJzY3JpYmVySWQsIENyZWF0ZU9yQXR0YWNo\nLkNSRUFURSwgbmV3IFRlc3RDYWxsYmFjayhxdWV1ZSksIG51bGwpOwogICAg\nICAgIGFzc2VydEZhbHNlKHF1ZXVlLnRha2UoKSk7CiAgICB9CgogICAgQFRl\nc3QodGltZW91dD0xMDAwMCkKICAgIHB1YmxpYyB2b2lkIHRlc3RDcmVhdGVT\ndWJzY3JpcHRpb25TdWNjZXNzKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAg\nICAgQnl0ZVN0cmluZyB0b3BpYyA9IGdldFRvcGljKDApOwogICAgICAgIHN1\nYnNjcmliZXIuYXN5bmNTdWJzY3JpYmUodG9waWMsIGxvY2FsU3Vic2NyaWJl\ncklkLCBDcmVhdGVPckF0dGFjaC5DUkVBVEUsIG5ldyBUZXN0Q2FsbGJhY2so\ncXVldWUpLCBudWxsKTsKICAgICAgICBhc3NlcnRUcnVlKHF1ZXVlLnRha2Uo\nKSk7CiAgICAgICAgc3RhcnREZWxpdmVyeSh0b3BpYywgbG9jYWxTdWJzY3Jp\nYmVySWQsIG5ldyBUZXN0TWVzc2FnZUhhbmRsZXIoY29uc3VtZVF1ZXVlKSk7\nCiAgICAgICAgaW50IGJhdGNoU2l6ZSA9IDU7CiAgICAgICAgZm9yIChpbnQg\naSA9IDA7IGkgPCBiYXRjaFNpemU7IGkrKykgewogICAgICAgICAgICBwdWJs\naXNoZXIuYXN5bmNQdWJsaXNoKHRvcGljLCBnZXRNc2coaSksIG5ldyBUZXN0\nQ2FsbGJhY2socXVldWUpLCBudWxsKTsKICAgICAgICAgICAgYXNzZXJ0VHJ1\nZShxdWV1ZS50YWtlKCkpOwogICAgICAgICAgICBhc3NlcnRUcnVlKGNvbnN1\nbWVRdWV1ZS50YWtlKCkpOwogICAgICAgIH0KICAgIH0KCiAgICBAVGVzdCh0\naW1lb3V0PTEwMDAwKQogICAgcHVibGljIHZvaWQgdGVzdEF0dGFjaFRvU3Vi\nc2NyaXB0aW9uRmFpbHVyZSgpIHRocm93cyBFeGNlcHRpb24gewogICAgICAg\nIEJ5dGVTdHJpbmcgdG9waWMgPSBnZXRUb3BpYygwKTsKICAgICAgICBzdWJz\nY3JpYmVyLmFzeW5jU3Vic2NyaWJlKHRvcGljLCBsb2NhbFN1YnNjcmliZXJJ\nZCwgQ3JlYXRlT3JBdHRhY2guQVRUQUNILCBuZXcgVGVzdENhbGxiYWNrKHF1\nZXVlKSwgbnVsbCk7CiAgICAgICAgYXNzZXJ0RmFsc2UocXVldWUudGFrZSgp\nKTsKICAgIH0KCiAgICAvLyBUaGUgZm9sbG93aW5nIDQgdGVzdHMgYXJlIHRv\nIG1ha2Ugc3VyZSB0aGF0IHRoZSBzdWJzY3JpYmVySWQgdmFsaWRhdGlvbgog\nICAgLy8gd29ya3Mgd2hlbiBpdCBpcyBhIGxvY2FsIHN1YnNjcmliZXIgYW5k\nIHdlJ3JlIGV4cGVjdGluZyB0aGUgc3Vic2NyaWJlcklkCiAgICAvLyB0byBi\nZSBpbiB0aGUgImxvY2FsIiBzcGVjaWZpYyBmb3JtYXQuCiAgICBAVGVzdCh0\naW1lb3V0PTEwMDAwKQogICAgcHVibGljIHZvaWQgdGVzdFN5bmNTdWJzY3Jp\nYmVXaXRoSW52YWxpZFN1YnNjcmliZXJJZCgpIHRocm93cyBFeGNlcHRpb24g\newogICAgICAgIGJvb2xlYW4gc3Vic2NyaWJlU3VjY2VzcyA9IGZhbHNlOwog\nICAgICAgIHRyeSB7CiAgICAgICAgICAgIHN1YnNjcmliZXIuc3Vic2NyaWJl\nKGdldFRvcGljKDApLCBodWJTdWJzY3JpYmVySWQsIENyZWF0ZU9yQXR0YWNo\nLkNSRUFURV9PUl9BVFRBQ0gpOwogICAgICAgIH0gY2F0Y2ggKEludmFsaWRT\ndWJzY3JpYmVySWRFeGNlcHRpb24gZSkgewogICAgICAgICAgICBzdWJzY3Jp\nYmVTdWNjZXNzID0gdHJ1ZTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24g\nZXgpIHsKICAgICAgICAgICAgc3Vic2NyaWJlU3VjY2VzcyA9IGZhbHNlOwog\nICAgICAgIH0KICAgICAgICBhc3NlcnRUcnVlKHN1YnNjcmliZVN1Y2Nlc3Mp\nOwogICAgfQoKICAgIEBUZXN0KHRpbWVvdXQ9MTAwMDApCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0QXN5bmNTdWJzY3JpYmVXaXRoSW52YWxpZFN1YnNjcmliZXJJ\nZCgpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIHN1YnNjcmliZXIuYXN5\nbmNTdWJzY3JpYmUoZ2V0VG9waWMoMCksIGh1YlN1YnNjcmliZXJJZCwgQ3Jl\nYXRlT3JBdHRhY2guQ1JFQVRFX09SX0FUVEFDSCwKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIG5ldyBUZXN0Q2FsbGJhY2socXVldWUpLCBu\ndWxsKTsKICAgICAgICBhc3NlcnRGYWxzZShxdWV1ZS50YWtlKCkpOwogICAg\nfQoKICAgIEBUZXN0KHRpbWVvdXQ9MTAwMDApCiAgICBwdWJsaWMgdm9pZCB0\nZXN0U3luY1Vuc3Vic2NyaWJlV2l0aEludmFsaWRTdWJzY3JpYmVySWQoKSB0\naHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBib29sZWFuIHVuc3Vic2NyaWJl\nU3VjY2VzcyA9IGZhbHNlOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHN1\nYnNjcmliZXIudW5zdWJzY3JpYmUoZ2V0VG9waWMoMCksIGh1YlN1YnNjcmli\nZXJJZCk7CiAgICAgICAgfSBjYXRjaCAoSW52YWxpZFN1YnNjcmliZXJJZEV4\nY2VwdGlvbiBlKSB7CiAgICAgICAgICAgIHVuc3Vic2NyaWJlU3VjY2VzcyA9\nIHRydWU7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGV4KSB7CiAgICAg\nICAgICAgIHVuc3Vic2NyaWJlU3VjY2VzcyA9IGZhbHNlOwogICAgICAgIH0K\nICAgICAgICBhc3NlcnRUcnVlKHVuc3Vic2NyaWJlU3VjY2Vzcyk7CiAgICB9\nCgogICAgQFRlc3QodGltZW91dD0xMDAwMCkKICAgIHB1YmxpYyB2b2lkIHRl\nc3RBc3luY1Vuc3Vic2NyaWJlV2l0aEludmFsaWRTdWJzY3JpYmVySWQoKSB0\naHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBzdWJzY3JpYmVyLmFzeW5jVW5z\ndWJzY3JpYmUoZ2V0VG9waWMoMCksIGh1YlN1YnNjcmliZXJJZCwgbmV3IFRl\nc3RDYWxsYmFjayhxdWV1ZSksIG51bGwpOwogICAgICAgIGFzc2VydEZhbHNl\nKHF1ZXVlLnRha2UoKSk7CiAgICB9CgogICAgLy8gVGhlIGZvbGxvd2luZyA0\nIHRlc3RzIGFyZSB0byBtYWtlIHN1cmUgdGhhdCB0aGUgc3Vic2NyaWJlcklk\nIHZhbGlkYXRpb24KICAgIC8vIGFsc28gd29ya3Mgd2hlbiBpdCBpcyBhIGh1\nYiBzdWJzY3JpYmVyIGFuZCB3ZSdyZSBleHBlY3RpbmcgdGhlCiAgICAvLyBz\ndWJzY3JpYmVySWQgdG8gYmUgaW4gdGhlICJodWIiIHNwZWNpZmljIGZvcm1h\ndC4KICAgIEBUZXN0KHRpbWVvdXQ9MTAwMDApCiAgICBwdWJsaWMgdm9pZCB0\nZXN0U3luY0h1YlN1YnNjcmliZVdpdGhJbnZhbGlkU3Vic2NyaWJlcklkKCkg\ndGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgQ2xpZW50IGh1YkNsaWVudCA9\nIG5ldyBIZWR3aWdIdWJDbGllbnQobmV3IEh1YkNsaWVudENvbmZpZ3VyYXRp\nb24oKSk7CiAgICAgICAgU3Vic2NyaWJlciBodWJTdWJzY3JpYmVyID0gaHVi\nQ2xpZW50LmdldFN1YnNjcmliZXIoKTsKICAgICAgICBib29sZWFuIHN1YnNj\ncmliZVN1Y2Nlc3MgPSBmYWxzZTsKICAgICAgICB0cnkgewogICAgICAgICAg\nICBodWJTdWJzY3JpYmVyLnN1YnNjcmliZShnZXRUb3BpYygwKSwgbG9jYWxT\ndWJzY3JpYmVySWQsIENyZWF0ZU9yQXR0YWNoLkNSRUFURV9PUl9BVFRBQ0gp\nOwogICAgICAgIH0gY2F0Y2ggKEludmFsaWRTdWJzY3JpYmVySWRFeGNlcHRp\nb24gZSkgewogICAgICAgICAgICBzdWJzY3JpYmVTdWNjZXNzID0gdHJ1ZTsK\nICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZXgpIHsKICAgICAgICAgICAg\nc3Vic2NyaWJlU3VjY2VzcyA9IGZhbHNlOwogICAgICAgIH0KICAgICAgICBh\nc3NlcnRUcnVlKHN1YnNjcmliZVN1Y2Nlc3MpOwogICAgICAgIGh1YkNsaWVu\ndC5jbG9zZSgpOwogICAgfQoKICAgIEBUZXN0KHRpbWVvdXQ9MTAwMDApCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0QXN5bmNIdWJTdWJzY3JpYmVXaXRoSW52YWxp\nZFN1YnNjcmliZXJJZCgpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIENs\naWVudCBodWJDbGllbnQgPSBuZXcgSGVkd2lnSHViQ2xpZW50KG5ldyBIdWJD\nbGllbnRDb25maWd1cmF0aW9uKCkpOwogICAgICAgIFN1YnNjcmliZXIgaHVi\nU3Vic2NyaWJlciA9IGh1YkNsaWVudC5nZXRTdWJzY3JpYmVyKCk7CiAgICAg\nICAgaHViU3Vic2NyaWJlci5hc3luY1N1YnNjcmliZShnZXRUb3BpYygwKSwg\nbG9jYWxTdWJzY3JpYmVySWQsIENyZWF0ZU9yQXR0YWNoLkNSRUFURV9PUl9B\nVFRBQ0gsIG5ldyBUZXN0Q2FsbGJhY2soCiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgcXVldWUpLCBudWxsKTsKICAgICAgICBh\nc3NlcnRGYWxzZShxdWV1ZS50YWtlKCkpOwogICAgICAgIGh1YkNsaWVudC5j\nbG9zZSgpOwogICAgfQoKICAgIEBUZXN0KHRpbWVvdXQ9MTAwMDApCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0U3luY0h1YlVuc3Vic2NyaWJlV2l0aEludmFsaWRT\ndWJzY3JpYmVySWQoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBDbGll\nbnQgaHViQ2xpZW50ID0gbmV3IEhlZHdpZ0h1YkNsaWVudChuZXcgSHViQ2xp\nZW50Q29uZmlndXJhdGlvbigpKTsKICAgICAgICBTdWJzY3JpYmVyIGh1YlN1\nYnNjcmliZXIgPSBodWJDbGllbnQuZ2V0U3Vic2NyaWJlcigpOwogICAgICAg\nIGJvb2xlYW4gdW5zdWJzY3JpYmVTdWNjZXNzID0gZmFsc2U7CiAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgaHViU3Vic2NyaWJlci51bnN1YnNjcmliZShn\nZXRUb3BpYygwKSwgbG9jYWxTdWJzY3JpYmVySWQpOwogICAgICAgIH0gY2F0\nY2ggKEludmFsaWRTdWJzY3JpYmVySWRFeGNlcHRpb24gZSkgewogICAgICAg\nICAgICB1bnN1YnNjcmliZVN1Y2Nlc3MgPSB0cnVlOwogICAgICAgIH0gY2F0\nY2ggKEV4Y2VwdGlvbiBleCkgewogICAgICAgICAgICB1bnN1YnNjcmliZVN1\nY2Nlc3MgPSBmYWxzZTsKICAgICAgICB9CiAgICAgICAgYXNzZXJ0VHJ1ZSh1\nbnN1YnNjcmliZVN1Y2Nlc3MpOwogICAgICAgIGh1YkNsaWVudC5jbG9zZSgp\nOwogICAgfQoKICAgIEBUZXN0KHRpbWVvdXQ9MTAwMDApCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0QXN5bmNIdWJVbnN1YnNjcmliZVdpdGhJbnZhbGlkU3Vic2Ny\naWJlcklkKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgQ2xpZW50IGh1\nYkNsaWVudCA9IG5ldyBIZWR3aWdIdWJDbGllbnQobmV3IEh1YkNsaWVudENv\nbmZpZ3VyYXRpb24oKSk7CiAgICAgICAgU3Vic2NyaWJlciBodWJTdWJzY3Jp\nYmVyID0gaHViQ2xpZW50LmdldFN1YnNjcmliZXIoKTsKICAgICAgICBodWJT\ndWJzY3JpYmVyLmFzeW5jVW5zdWJzY3JpYmUoZ2V0VG9waWMoMCksIGxvY2Fs\nU3Vic2NyaWJlcklkLCBuZXcgVGVzdENhbGxiYWNrKHF1ZXVlKSwgbnVsbCk7\nCiAgICAgICAgYXNzZXJ0RmFsc2UocXVldWUudGFrZSgpKTsKICAgICAgICBo\ndWJDbGllbnQuY2xvc2UoKTsKICAgIH0KCiAgICBAVGVzdCh0aW1lb3V0PTEw\nMDAwKQogICAgcHVibGljIHZvaWQgdGVzdFB1Ymxpc2hXaXRoQm9va0tlZXBl\nckVycm9yKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgaW50IGJhdGNo\nU2l6ZSA9IDEwOwogICAgICAgIHB1Ymxpc2hCYXRjaChiYXRjaFNpemUsIHRy\ndWUsIGZhbHNlLCAwKTsKICAgICAgICAvLyBzdG9wIGFsbCBib29raWUgc2Vy\ndmVycwogICAgICAgIGJrdGIuc3RvcEFsbEJvb2tpZVNlcnZlcnMoKTsKICAg\nICAgICAvLyBmb2xsb3dpbmcgcHVibGlzaCB3b3VsZCBmYWlsZWQgd2l0aCBO\nb3RFbm91Z2hCb29raWVzCiAgICAgICAgcHVibGlzaEJhdGNoKGJhdGNoU2l6\nZSwgZmFsc2UsIGZhbHNlLCAxKTsKICAgICAgICAvLyBzdGFydCBhbGwgYm9v\na2llIHNlcnZlcnMKICAgICAgICBia3RiLnN0YXJ0QWxsQm9va2llU2VydmVy\ncygpOwogICAgICAgIC8vIGZvbGxvd2luZyBwdWJsaXNoIHNob3VsZCBzdWNj\nZWVkCiAgICAgICAgcHVibGlzaEJhdGNoKGJhdGNoU2l6ZSwgdHJ1ZSwgZmFs\nc2UsIDEpOwogICAgfQp9Cg==\n","encoding":"base64"}

