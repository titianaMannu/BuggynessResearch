{"sha":"f8167297e2a3a7c8ef943344e9b83c72b8e0ca9b","node_id":"MDQ6QmxvYjE1NzU5NTY6ZjgxNjcyOTdlMmEzYTdjOGVmOTQzMzQ0ZTliODNjNzJiOGUwY2E5Yg==","size":10373,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/f8167297e2a3a7c8ef943344e9b83c72b8e0ca9b","content":"LyoKICoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9y\nIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBU\naGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhl\nIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNl\nIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBs\naWFuY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEg\nY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBl\naXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZv\nciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Np\nb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICoK\nICovCnBhY2thZ2Ugb3JnLmFwYWNoZS5oZWR3aWcuc2VydmVyLm1ldGE7Cgpp\nbXBvcnQgb3JnLmFwYWNoZS56b29rZWVwZXIuV2F0Y2hlZEV2ZW50OwppbXBv\ncnQgb3JnLmFwYWNoZS56b29rZWVwZXIuV2F0Y2hlcjsKaW1wb3J0IG9yZy5h\ncGFjaGUuem9va2VlcGVyLlpvb0tlZXBlcjsKaW1wb3J0IG9yZy5hcGFjaGUu\nem9va2VlcGVyLkNyZWF0ZU1vZGU7CmltcG9ydCBvcmcuYXBhY2hlLnpvb2tl\nZXBlci5ab29EZWZzLklkczsKaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247\nCmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5DeWNsaWNCYXJyaWVyOwpp\nbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuQ291bnREb3duTGF0Y2g7Cmlt\ncG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0OwppbXBvcnQgamF2YS51dGlsLkl0\nZXJhdG9yOwppbXBvcnQgamF2YS51dGlsLkxpc3Q7CmltcG9ydCBqYXZhLnV0\naWwuTWFwOwoKaW1wb3J0IGNvbS5nb29nbGUucHJvdG9idWYuQnl0ZVN0cmlu\nZzsKCmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5QdWJTdWJQ\ncm90b2NvbC5NYW5hZ2VyTWV0YTsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2ln\nLnNlcnZlci5jb21tb24uU2VydmVyQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9y\nZy5hcGFjaGUuaGVkd2lnLnpvb2tlZXBlci5ab29LZWVwZXJUZXN0QmFzZTsK\naW1wb3J0IG9yZy5qdW5pdC5BZnRlcjsKaW1wb3J0IG9yZy5qdW5pdC5CZWZv\ncmU7CmltcG9ydCBvcmcuanVuaXQuVGVzdDsKaW1wb3J0IG9yZy5qdW5pdC5B\nc3NlcnQ7CgppbXBvcnQgb3JnLnNsZjRqLkxvZ2dlcjsKaW1wb3J0IG9yZy5z\nbGY0ai5Mb2dnZXJGYWN0b3J5OwoKcHVibGljIGNsYXNzIFRlc3RNZXRhZGF0\nYU1hbmFnZXJGYWN0b3J5IGV4dGVuZHMgWm9vS2VlcGVyVGVzdEJhc2Ugewog\nICAgc3RhdGljIExvZ2dlciBMT0cgPSBMb2dnZXJGYWN0b3J5LmdldExvZ2dl\ncihUZXN0TWV0YWRhdGFNYW5hZ2VyRmFjdG9yeS5jbGFzcyk7CgogICAgc3Rh\ndGljIGNsYXNzIFRlc3RTZXJ2ZXJDb25maWd1cmF0aW9uIGV4dGVuZHMgU2Vy\ndmVyQ29uZmlndXJhdGlvbiB7CiAgICAgICAgU3RyaW5nIGhlZHdpZ1ByZWZp\neCA9ICIvaGVkd2lnIjsKCiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHVi\nbGljIFN0cmluZyBnZXRaa1ByZWZpeCgpIHsKICAgICAgICAgICAgcmV0dXJu\nIGhlZHdpZ1ByZWZpeDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lk\nIHNldFprUHJlZml4KFN0cmluZyBwcmVmaXgpIHsKICAgICAgICAgICAgdGhp\ncy5oZWR3aWdQcmVmaXggPSBwcmVmaXg7CiAgICAgICAgfQogICAgfQoKICAg\nIHN0YXRpYyBjbGFzcyBEdW1teU1ldGFkYXRhTWFuYWdlckZhY3RvcnkgZXh0\nZW5kcyBNZXRhZGF0YU1hbmFnZXJGYWN0b3J5IHsKICAgICAgICBzdGF0aWMg\naW50IFZFUlNJT04gPSAxMDsKCiAgICAgICAgcHVibGljIGludCBnZXRDdXJy\nZW50VmVyc2lvbigpIHsgcmV0dXJuIFZFUlNJT047IH0KCgogICAgICAgIHB1\nYmxpYyBNZXRhZGF0YU1hbmFnZXJGYWN0b3J5IGluaXRpYWxpemUoU2VydmVy\nQ29uZmlndXJhdGlvbiBjZmcsCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICBab29LZWVwZXIgemssCiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQg\ndmVyc2lvbikKICAgICAgICB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAg\nICAgICBpZiAodmVyc2lvbiAhPSBWRVJTSU9OKSB7CiAgICAgICAgICAgICAg\nICB0aHJvdyBuZXcgSU9FeGNlcHRpb24oInVubWF0Y2hlZCBtYW5hZ2VyIHZl\ncnNpb24iKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBkbyBub3Ro\naW5nCiAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgIH0KCiAgICAg\nICAgcHVibGljIHZvaWQgc2h1dGRvd24oKSB7fQoKICAgICAgICBwdWJsaWMg\nSXRlcmF0b3I8Qnl0ZVN0cmluZz4gZ2V0VG9waWNzKCkgewogICAgICAgICAg\nICByZXR1cm4gbnVsbDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBUb3Bp\nY1BlcnNpc3RlbmNlTWFuYWdlciBuZXdUb3BpY1BlcnNpc3RlbmNlTWFuYWdl\ncigpIHsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQoKICAg\nICAgICBwdWJsaWMgU3Vic2NyaXB0aW9uRGF0YU1hbmFnZXIgbmV3U3Vic2Ny\naXB0aW9uRGF0YU1hbmFnZXIoKSB7CiAgICAgICAgICAgIHJldHVybiBudWxs\nOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIFRvcGljT3duZXJzaGlwTWFu\nYWdlciBuZXdUb3BpY093bmVyc2hpcE1hbmFnZXIoKSB7CiAgICAgICAgICAg\nIHJldHVybiBudWxsOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQg\nZm9ybWF0KFNlcnZlckNvbmZpZ3VyYXRpb24gY2ZnLCBab29LZWVwZXIgemsp\nIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgICAgIC8vIGRvIG5vdGhp\nbmcKICAgICAgICB9CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIHdyaXRlRmFj\ndG9yeUxheW91dChTZXJ2ZXJDb25maWd1cmF0aW9uIGNvbmYsCiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBmYWN0b3J5Q2xz\nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgZmFj\ndG9yeVZlcnNpb24pCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAg\nICAgTWFuYWdlck1ldGEgbWV0YSA9IE1hbmFnZXJNZXRhLm5ld0J1aWxkZXIo\nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRN\nYW5hZ2VySW1wbChmYWN0b3J5Q2xzKQogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIC5zZXRNYW5hZ2VyVmVyc2lvbihmYWN0b3J5VmVy\nc2lvbikuYnVpbGQoKTsKICAgICAgICBuZXcgRmFjdG9yeUxheW91dChtZXRh\nKS5zdG9yZSh6aywgY29uZik7CiAgICB9CgogICAgLyoqCiAgICAgKiBUZXN0\nIGJhZCBzZXJ2ZXIgY29uZmlndXJhdGlvbgogICAgICovCiAgICBAVGVzdCh0\naW1lb3V0PTYwMDAwKQogICAgcHVibGljIHZvaWQgdGVzdEJhZENvbmYoKSB0\naHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBUZXN0U2VydmVyQ29uZmlndXJh\ndGlvbiBjb25mID0gbmV3IFRlc3RTZXJ2ZXJDb25maWd1cmF0aW9uKCk7Cgog\nICAgICAgIFN0cmluZyByb290MCA9ICIvZ29vZGNvbmYiOwogICAgICAgIGNv\nbmYuc2V0WmtQcmVmaXgocm9vdDApOwoKICAgICAgICBNZXRhZGF0YU1hbmFn\nZXJGYWN0b3J5IG0gPQogICAgICAgICAgICBNZXRhZGF0YU1hbmFnZXJGYWN0\nb3J5Lm5ld01ldGFkYXRhTWFuYWdlckZhY3RvcnkoY29uZiwgemspOwogICAg\nICAgIEFzc2VydC5hc3NlcnRUcnVlKCJNZXRhZGF0YU1hbmFnZXJGYWN0b3J5\nIGlzIHVuZXhwZWN0ZWQgdHlwZSIsCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgKG0gaW5zdGFuY2VvZiBaa01ldGFkYXRhTWFuYWdlckZhY3RvcnkpKTsK\nCiAgICAgICAgLy8gbWlzbWF0Y2hpbmcgY29uZgogICAgICAgIGNvbmYuc2V0\nTWV0YWRhdGFNYW5hZ2VyRmFjdG9yeU5hbWUoRHVtbXlNZXRhZGF0YU1hbmFn\nZXJGYWN0b3J5LmNsYXNzLmdldE5hbWUoKSk7CiAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgTWV0YWRhdGFNYW5hZ2VyRmFjdG9yeS5uZXdNZXRhZGF0YU1h\nbmFnZXJGYWN0b3J5KGNvbmYsIHprKTsKICAgICAgICAgICAgQXNzZXJ0LmZh\naWwoIlNob3VsZG4ndCByZWFjaCBoZXJlIik7CiAgICAgICAgfSBjYXRjaCAo\nRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgQXNzZXJ0LmFzc2VydFRydWUo\nIkludmFsaWQgZXhjZXB0aW9uIiwKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgZS5nZXRNZXNzYWdlKCkuY29udGFpbnMoImRvZXMgbm90IG1hdGNo\nIGV4aXN0aW5nIGZhY3RvcnkiKSk7CiAgICAgICAgfQoKICAgICAgICAvLyBp\nbnZhbGlkIG1ldGFkYXRhIG1hbmFnZXIKICAgICAgICBTdHJpbmcgcm9vdDEg\nPSAiL2JhZGNvbmYxIjsKICAgICAgICBjb25mLnNldFprUHJlZml4KHJvb3Qx\nKTsKICAgICAgICBjb25mLnNldE1ldGFkYXRhTWFuYWdlckZhY3RvcnlOYW1l\nKCJEb2VzTm90RXhpc3QiKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBN\nZXRhZGF0YU1hbmFnZXJGYWN0b3J5Lm5ld01ldGFkYXRhTWFuYWdlckZhY3Rv\ncnkoY29uZiwgemspOwogICAgICAgICAgICBBc3NlcnQuZmFpbCgiU2hvdWxk\nbid0IHJlYWNoIGhlcmUiKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24g\nZSkgewogICAgICAgICAgICBBc3NlcnQuYXNzZXJ0VHJ1ZSgiSW52YWxpZCBl\neGNlcHRpb24iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmdl\ndE1lc3NhZ2UoKS5jb250YWlucygiRmFpbGVkIHRvIGdldCBtZXRhZGF0YSBt\nYW5hZ2VyIGZhY3RvcnkgY2xhc3MgZnJvbSBjb25maWd1cmF0aW9uIikpOwog\nICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFRlc3QgYmFkIHprIGNv\nbmZpZ3VyYXRpb24KICAgICAqLwogICAgQFRlc3QodGltZW91dD02MDAwMCkK\nICAgIHB1YmxpYyB2b2lkIHRlc3RCYWRaa0NvbnRlbnRzKCkgdGhyb3dzIEV4\nY2VwdGlvbiB7CiAgICAgICAgVGVzdFNlcnZlckNvbmZpZ3VyYXRpb24gY29u\nZiA9IG5ldyBUZXN0U2VydmVyQ29uZmlndXJhdGlvbigpOwoKICAgICAgICAv\nLyBiYWQgdHlwZSBpbiB6b29rZWVwZXIKICAgICAgICBTdHJpbmcgcm9vdDAg\nPSAiL2JhZHprMCI7CiAgICAgICAgY29uZi5zZXRaa1ByZWZpeChyb290MCk7\nCgogICAgICAgIHdyaXRlRmFjdG9yeUxheW91dChjb25mLCAiRG9lc05vdEV4\naXN0IiwgMHhkZWFkYmVlZik7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\nTWV0YWRhdGFNYW5hZ2VyRmFjdG9yeS5uZXdNZXRhZGF0YU1hbmFnZXJGYWN0\nb3J5KGNvbmYsIHprKTsKICAgICAgICAgICAgQXNzZXJ0LmZhaWwoIlNob3Vs\nZG4ndCByZWFjaCBoZXJlIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9u\nIGUpIHsKICAgICAgICAgICAgQXNzZXJ0LmFzc2VydFRydWUoIkludmFsaWQg\nZXhjZXB0aW9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5n\nZXRNZXNzYWdlKCkuY29udGFpbnMoIk5vIGNsYXNzIGZvdW5kIHRvIGluc3Rh\nbnRpYXRlIG1ldGFkYXRhIG1hbmFnZXIgZmFjdG9yeSIpKTsKICAgICAgICB9\nCgogICAgICAgIC8vIGJhZCB2ZXJzaW9uIGluIHpvb2tlZXBlcgogICAgICAg\nIFN0cmluZyByb290MSA9ICIvYmFkemsxIjsKICAgICAgICBjb25mLnNldFpr\nUHJlZml4KHJvb3QxKTsKCiAgICAgICAgd3JpdGVGYWN0b3J5TGF5b3V0KGNv\nbmYsIFprTWV0YWRhdGFNYW5hZ2VyRmFjdG9yeS5jbGFzcy5nZXROYW1lKCks\nIDB4ZGVhZGJlZWYpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIE1ldGFk\nYXRhTWFuYWdlckZhY3RvcnkubmV3TWV0YWRhdGFNYW5hZ2VyRmFjdG9yeShj\nb25mLCB6ayk7CiAgICAgICAgICAgIEFzc2VydC5mYWlsKCJTaG91bGRuJ3Qg\ncmVhY2ggaGVyZSIpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7\nCiAgICAgICAgICAgIEFzc2VydC5hc3NlcnRUcnVlKCJJbnZhbGlkIGV4Y2Vw\ndGlvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuZ2V0TWVz\nc2FnZSgpLmNvbnRhaW5zKCJJbmNvbXBhdGlibGUgWmtNZXRhZGF0YU1hbmFn\nZXJGYWN0b3J5IHZlcnNpb24iKSk7CiAgICAgICAgfQogICAgfQoKICAgIHBy\naXZhdGUgY2xhc3MgQ3JlYXRlTU1UaHJlYWQgZXh0ZW5kcyBUaHJlYWQgewog\nICAgICAgIHByaXZhdGUgYm9vbGVhbiBzdWNjZXNzID0gZmFsc2U7CiAgICAg\nICAgcHJpdmF0ZSBmaW5hbCBTdHJpbmcgZmFjdG9yeUNsczsKICAgICAgICBw\ncml2YXRlIGZpbmFsIFN0cmluZyByb290OwogICAgICAgIHByaXZhdGUgZmlu\nYWwgQ3ljbGljQmFycmllciBiYXJyaWVyOwogICAgICAgIHByaXZhdGUgWm9v\nS2VlcGVyIHprYzsKCiAgICAgICAgQ3JlYXRlTU1UaHJlYWQoU3RyaW5nIHJv\nb3QsIFN0cmluZyBmYWN0b3J5Q2xzLCBDeWNsaWNCYXJyaWVyIGJhcnJpZXIp\nIHRocm93cyBFeGNlcHRpb24gewogICAgICAgICAgICB0aGlzLmZhY3RvcnlD\nbHMgPSBmYWN0b3J5Q2xzOwogICAgICAgICAgICB0aGlzLmJhcnJpZXIgPSBi\nYXJyaWVyOwogICAgICAgICAgICB0aGlzLnJvb3QgPSByb290OwogICAgICAg\nICAgICBmaW5hbCBDb3VudERvd25MYXRjaCBsYXRjaCA9IG5ldyBDb3VudERv\nd25MYXRjaCgxKTsKICAgICAgICAgICAgemtjID0gbmV3IFpvb0tlZXBlciho\nb3N0UG9ydCwgMTAwMDAsIG5ldyBXYXRjaGVyKCkgewogICAgICAgICAgICAg\nICAgcHVibGljIHZvaWQgcHJvY2VzcyhXYXRjaGVkRXZlbnQgZXZlbnQpIHsK\nICAgICAgICAgICAgICAgICAgICBsYXRjaC5jb3VudERvd24oKTsKICAgICAg\nICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGxhdGNo\nLmF3YWl0KCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBydW4o\nKSB7CiAgICAgICAgICAgIFRlc3RTZXJ2ZXJDb25maWd1cmF0aW9uIGNvbmYg\nPSBuZXcgVGVzdFNlcnZlckNvbmZpZ3VyYXRpb24oKTsKICAgICAgICAgICAg\nY29uZi5zZXRaa1ByZWZpeChyb290KTsKICAgICAgICAgICAgY29uZi5zZXRN\nZXRhZGF0YU1hbmFnZXJGYWN0b3J5TmFtZShmYWN0b3J5Q2xzKTsKCiAgICAg\nICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBiYXJyaWVyLmF3YWl0KCk7\nCiAgICAgICAgICAgICAgICBNZXRhZGF0YU1hbmFnZXJGYWN0b3J5Lm5ld01l\ndGFkYXRhTWFuYWdlckZhY3RvcnkoY29uZiwgemtjKTsKICAgICAgICAgICAg\nICAgIHN1Y2Nlc3MgPSB0cnVlOwogICAgICAgICAgICB9IGNhdGNoIChFeGNl\ncHRpb24gZSkgewogICAgICAgICAgICAgICAgTE9HLmVycm9yKCJGYWlsZWQg\ndG8gY3JlYXRlIG1ldGFkYXRhIG1hbmFnZXIgZmFjdG9yeSIsIGUpOwogICAg\nICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgYm9vbGVhbiBp\nc1N1Y2Nlc3NmdWwoKSB7CiAgICAgICAgICAgIHJldHVybiBzdWNjZXNzOwog\nICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgY2xvc2UoKSB0aHJvd3Mg\nRXhjZXB0aW9uIHsKICAgICAgICAgICAgemtjLmNsb3NlKCk7CiAgICAgICAg\nfQogICAgfQoKICAgIC8vIHRlc3QgY29uY3VycmVudAogICAgQFRlc3QodGlt\nZW91dD02MDAwMCkKICAgIHB1YmxpYyB2b2lkIHRlc3RDb25jdXJyZW50MSgp\nIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIC8vLyBldmVyeW9uZSBjcmVh\ndGVzIHRoZSBzYW1lCiAgICAgICAgaW50IG51bVRocmVhZHMgPSA1MDsKCiAg\nICAgICAgLy8gYmFkIHZlcnNpb24gaW4gem9va2VlcGVyCiAgICAgICAgU3Ry\naW5nIHJvb3QwID0gIi9sbXJvb3QwIjsKCiAgICAgICAgQ3ljbGljQmFycmll\nciBiYXJyaWVyID0gbmV3IEN5Y2xpY0JhcnJpZXIobnVtVGhyZWFkcysxKTsK\nICAgICAgICBMaXN0PENyZWF0ZU1NVGhyZWFkPiB0aHJlYWRzID0gbmV3IEFy\ncmF5TGlzdDxDcmVhdGVNTVRocmVhZD4obnVtVGhyZWFkcyk7CiAgICAgICAg\nZm9yIChpbnQgaSA9IDA7IGkgPCBudW1UaHJlYWRzOyBpKyspIHsKICAgICAg\nICAgICAgQ3JlYXRlTU1UaHJlYWQgdCA9IG5ldyBDcmVhdGVNTVRocmVhZChy\nb290MCwgWmtNZXRhZGF0YU1hbmFnZXJGYWN0b3J5LmNsYXNzLmdldE5hbWUo\nKSwgYmFycmllcik7CiAgICAgICAgICAgIHQuc3RhcnQoKTsKICAgICAgICAg\nICAgdGhyZWFkcy5hZGQodCk7CiAgICAgICAgfQoKICAgICAgICBiYXJyaWVy\nLmF3YWl0KCk7CgogICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IHRydWU7CiAg\nICAgICAgZm9yIChDcmVhdGVNTVRocmVhZCB0IDogdGhyZWFkcykgewogICAg\nICAgICAgICB0LmpvaW4oKTsKICAgICAgICAgICAgdC5jbG9zZSgpOwogICAg\nICAgICAgICBzdWNjZXNzID0gdC5pc1N1Y2Nlc3NmdWwoKSAmJiBzdWNjZXNz\nOwogICAgICAgIH0KICAgICAgICBBc3NlcnQuYXNzZXJ0VHJ1ZSgiTm90IGFs\nbCBtZXRhZGF0YSBtYW5hZ2VyIGZhY3RvcmllcyBjcmVhdGVkIiwgc3VjY2Vz\ncyk7CiAgICB9CgogICAgQFRlc3QodGltZW91dD02MDAwMCkKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RDb25jdXJyZW50MigpIHRocm93cyBFeGNlcHRpb24gewog\nICAgICAgIC8vLyBvZGQgY3JlYXRlIGRpZmZlcmVudAogICAgICAgIGludCBu\ndW1UaHJlYWRzRWFjaCA9IDI1OwoKICAgICAgICAvLyBiYWQgdmVyc2lvbiBp\nbiB6b29rZWVwZXIKICAgICAgICBTdHJpbmcgcm9vdDAgPSAiL2xtcm9vdDAi\nOwoKICAgICAgICBDeWNsaWNCYXJyaWVyIGJhcnJpZXIgPSBuZXcgQ3ljbGlj\nQmFycmllcihudW1UaHJlYWRzRWFjaCoyKzEpOwogICAgICAgIExpc3Q8Q3Jl\nYXRlTU1UaHJlYWQ+IHRocmVhZHNBID0gbmV3IEFycmF5TGlzdDxDcmVhdGVN\nTVRocmVhZD4obnVtVGhyZWFkc0VhY2gpOwogICAgICAgIGZvciAoaW50IGkg\nPSAwOyBpIDwgbnVtVGhyZWFkc0VhY2g7IGkrKykgewogICAgICAgICAgICBD\ncmVhdGVNTVRocmVhZCB0ID0gbmV3IENyZWF0ZU1NVGhyZWFkKHJvb3QwLCBa\na01ldGFkYXRhTWFuYWdlckZhY3RvcnkuY2xhc3MuZ2V0TmFtZSgpLCBiYXJy\naWVyKTsKICAgICAgICAgICAgdC5zdGFydCgpOwogICAgICAgICAgICB0aHJl\nYWRzQS5hZGQodCk7CiAgICAgICAgfQogICAgICAgIExpc3Q8Q3JlYXRlTU1U\naHJlYWQ+IHRocmVhZHNCID0gbmV3IEFycmF5TGlzdDxDcmVhdGVNTVRocmVh\nZD4obnVtVGhyZWFkc0VhY2gpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBp\nIDwgbnVtVGhyZWFkc0VhY2g7IGkrKykgewogICAgICAgICAgICBDcmVhdGVN\nTVRocmVhZCB0ID0gbmV3IENyZWF0ZU1NVGhyZWFkKHJvb3QwLCBEdW1teU1l\ndGFkYXRhTWFuYWdlckZhY3RvcnkuY2xhc3MuZ2V0TmFtZSgpLCBiYXJyaWVy\nKTsKICAgICAgICAgICAgdC5zdGFydCgpOwogICAgICAgICAgICB0aHJlYWRz\nQi5hZGQodCk7CiAgICAgICAgfQoKICAgICAgICBiYXJyaWVyLmF3YWl0KCk7\nCgogICAgICAgIGludCBudW1TdWNjZXNzID0gMDsKICAgICAgICBpbnQgbnVt\nRmFpbHMgPSAwOwogICAgICAgIGZvciAoQ3JlYXRlTU1UaHJlYWQgdCA6IHRo\ncmVhZHNBKSB7CiAgICAgICAgICAgIHQuam9pbigpOwogICAgICAgICAgICB0\nLmNsb3NlKCk7CiAgICAgICAgICAgIGlmICh0LmlzU3VjY2Vzc2Z1bCgpKSB7\nCiAgICAgICAgICAgICAgICBudW1TdWNjZXNzKys7CiAgICAgICAgICAgIH0g\nZWxzZSB7CiAgICAgICAgICAgICAgICBudW1GYWlscysrOwogICAgICAgICAg\nICB9CiAgICAgICAgfQoKICAgICAgICBmb3IgKENyZWF0ZU1NVGhyZWFkIHQg\nOiB0aHJlYWRzQikgewogICAgICAgICAgICB0LmpvaW4oKTsKICAgICAgICAg\nICAgdC5jbG9zZSgpOwogICAgICAgICAgICBpZiAodC5pc1N1Y2Nlc3NmdWwo\nKSkgewogICAgICAgICAgICAgICAgbnVtU3VjY2VzcysrOwogICAgICAgICAg\nICB9IGVsc2UgewogICAgICAgICAgICAgICAgbnVtRmFpbHMrKzsKICAgICAg\nICAgICAgfQogICAgICAgIH0KICAgICAgICBBc3NlcnQuYXNzZXJ0RXF1YWxz\nKCJJbmNvcnJlY3QgbnVtYmVyIG9mIHN1Y2Nlc3NlcyIsIG51bVRocmVhZHNF\nYWNoLCBudW1TdWNjZXNzKTsKICAgICAgICBBc3NlcnQuYXNzZXJ0RXF1YWxz\nKCJJbmNvcnJlY3QgbnVtYmVyIG9mIGZhaWx1cmVzIiwgbnVtVGhyZWFkc0Vh\nY2gsIG51bUZhaWxzKTsKICAgIH0KfQo=\n","encoding":"base64"}

