{"sha":"a9affd777a5d0d1dab37d8f0c464744b66db1d8f","node_id":"MDQ6QmxvYjE1NzU5NTY6YTlhZmZkNzc3YTVkMGQxZGFiMzdkOGYwYzQ2NDc0NGI2NmRiMWQ4Zg==","size":10212,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/a9affd777a5d0d1dab37d8f0c464744b66db1d8f","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIubmV0dHk7CgppbXBvcnQg\namF2YS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEubGFuZy5UaHJlYWQu\nVW5jYXVnaHRFeGNlcHRpb25IYW5kbGVyOwppbXBvcnQgamF2YS5uZXQuSW5l\ndFNvY2tldEFkZHJlc3M7CmltcG9ydCBqYXZhLnV0aWwuTGlua2VkTGlzdDsK\naW1wb3J0IGphdmEudXRpbC5MaXN0OwppbXBvcnQgamF2YS51dGlsLmNvbmN1\ncnJlbnQuRXhlY3V0b3JzOwppbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQu\nU3luY2hyb25vdXNRdWV1ZTsKCmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMu\nY29uZmlndXJhdGlvbi5Db25maWd1cmF0aW9uRXhjZXB0aW9uOwppbXBvcnQg\nb3JnLmFwYWNoZS56b29rZWVwZXIuV2F0Y2hlZEV2ZW50OwppbXBvcnQgb3Jn\nLmFwYWNoZS56b29rZWVwZXIuV2F0Y2hlcjsKaW1wb3J0IG9yZy5hcGFjaGUu\nem9va2VlcGVyLlpvb0tlZXBlcjsKaW1wb3J0IG9yZy5qdW5pdC5UZXN0OwoK\naW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci50ZXN0LlBvcnRNYW5hZ2Vy\nOwppbXBvcnQgY29tLmdvb2dsZS5wcm90b2J1Zi5CeXRlU3RyaW5nOwppbXBv\ncnQgb3JnLmFwYWNoZS5oZWR3aWcuY2xpZW50LmNvbmYuQ2xpZW50Q29uZmln\ndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmNsaWVudC5IZWR3\naWdDbGllbnQ7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQuYXBp\nLlB1Ymxpc2hlcjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmV4Y2VwdGlv\nbnMuUHViU3ViRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcu\ncHJvdG9jb2wuUHViU3ViUHJvdG9jb2wuTWVzc2FnZTsKaW1wb3J0IG9yZy5h\ncGFjaGUuaGVkd2lnLnNlcnZlci5QdWJTdWJTZXJ2ZXJTdGFuZEFsb25lVGVz\ndEJhc2U7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIuY29tbW9u\nLlNlcnZlckNvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdp\nZy5zZXJ2ZXIudG9waWNzLkFic3RyYWN0VG9waWNNYW5hZ2VyOwppbXBvcnQg\nb3JnLmFwYWNoZS5oZWR3aWcuc2VydmVyLnRvcGljcy5Ub3BpY01hbmFnZXI7\nCmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIuTG9nZ2luZ0V4Y2Vw\ndGlvbkhhbmRsZXI7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy51dGlsLkNh\nbGxiYWNrOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcudXRpbC5IZWR3aWdT\nb2NrZXRBZGRyZXNzOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuem9va2Vl\ncGVyLlNhZmVBc3luY1pLQ2FsbGJhY2s7CgpwdWJsaWMgY2xhc3MgVGVzdFB1\nYlN1YlNlcnZlciBleHRlbmRzIFB1YlN1YlNlcnZlclN0YW5kQWxvbmVUZXN0\nQmFzZSB7CgogICAgQFRlc3QodGltZW91dD02MDAwMCkKICAgIHB1YmxpYyB2\nb2lkIHRlc3RTZWNvbmRTZXJ2ZXIoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAg\nICAgICBQdWJTdWJTZXJ2ZXIgc2VydmVyMSA9IG5ldyBQdWJTdWJTZXJ2ZXIo\nbmV3IFN0YW5kQWxvbmVTZXJ2ZXJDb25maWd1cmF0aW9uKCkgewogICAgICAg\nICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICBwdWJsaWMgaW50\nIGdldFNlcnZlclBvcnQoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJu\nIHN1cGVyLmdldFNlcnZlclBvcnQoKSArIDE7CiAgICAgICAgICAgICAgICB9\nCiAgICAgICAgICAgIH0sIG5ldyBDbGllbnRDb25maWd1cmF0aW9uKCksIG5l\ndyBMb2dnaW5nRXhjZXB0aW9uSGFuZGxlcigpKTsKICAgICAgICBzZXJ2ZXIx\nLnN0YXJ0KCk7CiAgICAgICAgc2VydmVyMS5zaHV0ZG93bigpOwogICAgfQoK\nICAgIGNsYXNzIFJlY29yZGluZ1VuY2F1Z2h0RXhjZXB0aW9uSGFuZGxlciBp\nbXBsZW1lbnRzIFRocmVhZC5VbmNhdWdodEV4Y2VwdGlvbkhhbmRsZXIgewog\nICAgICAgIFN5bmNocm9ub3VzUXVldWU8VGhyb3dhYmxlPiBxdWV1ZTsKCiAg\nICAgICAgcHVibGljIFJlY29yZGluZ1VuY2F1Z2h0RXhjZXB0aW9uSGFuZGxl\ncihTeW5jaHJvbm91c1F1ZXVlPFRocm93YWJsZT4gcXVldWUpIHsKICAgICAg\nICAgICAgdGhpcy5xdWV1ZSA9IHF1ZXVlOwogICAgICAgIH0KCiAgICAgICAg\nQE92ZXJyaWRlCiAgICAgICAgcHVibGljIHZvaWQgdW5jYXVnaHRFeGNlcHRp\nb24oVGhyZWFkIHQsIFRocm93YWJsZSBlKSB7CiAgICAgICAgICAgIHF1ZXVl\nLmFkZChlKTsKICAgICAgICB9CgogICAgfQoKICAgIHByaXZhdGUgaW50ZXJm\nYWNlIFRvcGljTWFuYWdlckluc3RhbnRpYXRvciB7CiAgICAgICAgcHVibGlj\nIFRvcGljTWFuYWdlciBpbnN0YW50aWF0ZVRvcGljTWFuYWdlcigpIHRocm93\ncyBJT0V4Y2VwdGlvbjsKICAgIH0KCiAgICBQdWJTdWJTZXJ2ZXIgc3RhcnRT\nZXJ2ZXIoZmluYWwgVW5jYXVnaHRFeGNlcHRpb25IYW5kbGVyIHVuY2F1Z2h0\nRXhjZXB0aW9uSGFuZGxlciwgZmluYWwgaW50IHBvcnQsCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgZmluYWwgVG9waWNNYW5hZ2VySW5zdGFudGlh\ndG9yIGluc3RhbnRpYXRvcikgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAg\nUHViU3ViU2VydmVyIHNlcnZlciA9IG5ldyBQdWJTdWJTZXJ2ZXIobmV3IFN0\nYW5kQWxvbmVTZXJ2ZXJDb25maWd1cmF0aW9uKCkgewogICAgICAgICAgICBA\nT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIGludCBnZXRTZXJ2ZXJQb3J0\nKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHBvcnQ7CiAgICAgICAgICAg\nIH0KCiAgICAgICAgfSwgbmV3IENsaWVudENvbmZpZ3VyYXRpb24oKSwgdW5j\nYXVnaHRFeGNlcHRpb25IYW5kbGVyKSB7CgogICAgICAgICAgICBAT3ZlcnJp\nZGUKICAgICAgICAgICAgcHJvdGVjdGVkIFRvcGljTWFuYWdlciBpbnN0YW50\naWF0ZVRvcGljTWFuYWdlcigpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAg\nICAgICAgICAgICByZXR1cm4gaW5zdGFudGlhdG9yLmluc3RhbnRpYXRlVG9w\naWNNYW5hZ2VyKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAg\nIHNlcnZlci5zdGFydCgpOwogICAgICAgIHJldHVybiBzZXJ2ZXI7CgogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHJ1blB1Ymxpc2hSZXF1ZXN0KGZpbmFsIGlu\ndCBwb3J0KSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBQdWJsaXNoZXIg\ncHVibGlzaGVyID0gbmV3IEhlZHdpZ0NsaWVudChuZXcgQ2xpZW50Q29uZmln\ndXJhdGlvbigpIHsKICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAg\nIHB1YmxpYyBJbmV0U29ja2V0QWRkcmVzcyBnZXREZWZhdWx0U2VydmVySG9z\ndCgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSW5ldFNvY2tldEFk\nZHJlc3MoImxvY2FsaG9zdCIsIHBvcnQpOwogICAgICAgICAgICB9CiAgICAg\nICAgfSkuZ2V0UHVibGlzaGVyKCk7CgogICAgICAgIHB1Ymxpc2hlci5hc3lu\nY1B1Ymxpc2goQnl0ZVN0cmluZy5jb3B5RnJvbVV0ZjgoImJsYWgiKSwgTWVz\nc2FnZS5uZXdCdWlsZGVyKCkuc2V0Qm9keSgKICAgICAgICBCeXRlU3RyaW5n\nLmNvcHlGcm9tVXRmOCgiYmxhaCIpKS5idWlsZCgpLCBuZXcgQ2FsbGJhY2s8\nVm9pZD4oKSB7CiAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICBw\ndWJsaWMgdm9pZCBvcGVyYXRpb25GYWlsZWQoT2JqZWN0IGN0eCwgUHViU3Vi\nRXhjZXB0aW9uIGV4Y2VwdGlvbikgewogICAgICAgICAgICAgICAgYXNzZXJ0\nVHJ1ZShmYWxzZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIEBPdmVy\ncmlkZQogICAgICAgICAgICBwdWJsaWMgdm9pZCBvcGVyYXRpb25GaW5pc2hl\nZChPYmplY3QgY3R4LCBWb2lkIHJlc3VsdE9mT3BlcmF0aW9uKSB7CiAgICAg\nICAgICAgICAgICBhc3NlcnRUcnVlKGZhbHNlKTsKICAgICAgICAgICAgfQoK\nICAgICAgICB9LCBudWxsKTsKICAgIH0KCiAgICBAVGVzdCh0aW1lb3V0PTYw\nMDAwKQogICAgcHVibGljIHZvaWQgdGVzdFVuY2F1Z2h0RXhjZXB0aW9uSW5O\nZXR0eVRocmVhZCgpIHRocm93cyBFeGNlcHRpb24gewoKICAgICAgICBTeW5j\naHJvbm91c1F1ZXVlPFRocm93YWJsZT4gcXVldWUgPSBuZXcgU3luY2hyb25v\ndXNRdWV1ZTxUaHJvd2FibGU+KCk7CiAgICAgICAgUmVjb3JkaW5nVW5jYXVn\naHRFeGNlcHRpb25IYW5kbGVyIHVuY2F1Z2h0RXhjZXB0aW9uSGFuZGxlciA9\nIG5ldyBSZWNvcmRpbmdVbmNhdWdodEV4Y2VwdGlvbkhhbmRsZXIocXVldWUp\nOwogICAgICAgIGZpbmFsIGludCBwb3J0ID0gUG9ydE1hbmFnZXIubmV4dEZy\nZWVQb3J0KCk7CgogICAgICAgIFB1YlN1YlNlcnZlciBzZXJ2ZXIgPSBzdGFy\ndFNlcnZlcih1bmNhdWdodEV4Y2VwdGlvbkhhbmRsZXIsIHBvcnQsIG5ldyBU\nb3BpY01hbmFnZXJJbnN0YW50aWF0b3IoKSB7CgogICAgICAgICAgICBAT3Zl\ncnJpZGUKICAgICAgICAgICAgcHVibGljIFRvcGljTWFuYWdlciBpbnN0YW50\naWF0ZVRvcGljTWFuYWdlcigpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAg\nICAgICAgICAgICByZXR1cm4gbmV3IEFic3RyYWN0VG9waWNNYW5hZ2VyKG5l\ndyBTZXJ2ZXJDb25maWd1cmF0aW9uKCksIEV4ZWN1dG9ycy5uZXdTaW5nbGVU\naHJlYWRTY2hlZHVsZWRFeGVjdXRvcigpKSB7CiAgICAgICAgICAgICAgICAg\nICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICAgICAgcHJvdGVjdGVkIHZv\naWQgcmVhbEdldE93bmVyKEJ5dGVTdHJpbmcgdG9waWMsIGJvb2xlYW4gc2hv\ndWxkQ2xhaW0sCiAgICAgICAgICAgICAgICAgICAgQ2FsbGJhY2s8SGVkd2ln\nU29ja2V0QWRkcmVzcz4gY2IsIE9iamVjdCBjdHgpIHsKICAgICAgICAgICAg\nICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oInRoaXMg\nZXhjZXB0aW9uIHNob3VsZCBiZSB1bmNhdWdodCIpOwogICAgICAgICAgICAg\nICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAg\nICAgICAgICAgICAgICAgcHJvdGVjdGVkIHZvaWQgcG9zdFJlbGVhc2VDbGVh\nbnVwKEJ5dGVTdHJpbmcgdG9waWMsIENhbGxiYWNrPFZvaWQ+IGNiLCBPYmpl\nY3QgY3R4KSB7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAg\nICAgfTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBydW5Q\ndWJsaXNoUmVxdWVzdChwb3J0KTsKICAgICAgICBhc3NlcnRFcXVhbHMoUnVu\ndGltZUV4Y2VwdGlvbi5jbGFzcywgcXVldWUudGFrZSgpLmdldENsYXNzKCkp\nOwogICAgICAgIHNlcnZlci5zaHV0ZG93bigpOwogICAgfQoKICAgIEBUZXN0\nKHRpbWVvdXQ9NjAwMDApCiAgICBwdWJsaWMgdm9pZCB0ZXN0VW5jYXVnaHRF\neGNlcHRpb25JblpLVGhyZWFkKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CgogICAg\nICAgIFN5bmNocm9ub3VzUXVldWU8VGhyb3dhYmxlPiBxdWV1ZSA9IG5ldyBT\neW5jaHJvbm91c1F1ZXVlPFRocm93YWJsZT4oKTsKICAgICAgICBSZWNvcmRp\nbmdVbmNhdWdodEV4Y2VwdGlvbkhhbmRsZXIgdW5jYXVnaHRFeGNlcHRpb25I\nYW5kbGVyID0gbmV3IFJlY29yZGluZ1VuY2F1Z2h0RXhjZXB0aW9uSGFuZGxl\ncihxdWV1ZSk7CiAgICAgICAgZmluYWwgaW50IHBvcnQgPSBQb3J0TWFuYWdl\nci5uZXh0RnJlZVBvcnQoKTsKICAgICAgICBmaW5hbCBTdHJpbmcgaG9zdFBv\ncnQgPSAiMTI3LjAuMC4xOiIgKyBQb3J0TWFuYWdlci5uZXh0RnJlZVBvcnQo\nKTsKCiAgICAgICAgUHViU3ViU2VydmVyIHNlcnZlciA9IHN0YXJ0U2VydmVy\nKHVuY2F1Z2h0RXhjZXB0aW9uSGFuZGxlciwgcG9ydCwgbmV3IFRvcGljTWFu\nYWdlckluc3RhbnRpYXRvcigpIHsKCiAgICAgICAgICAgIEBPdmVycmlkZQog\nICAgICAgICAgICBwdWJsaWMgVG9waWNNYW5hZ2VyIGluc3RhbnRpYXRlVG9w\naWNNYW5hZ2VyKCkgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICAgICAg\nICAgIHJldHVybiBuZXcgQWJzdHJhY3RUb3BpY01hbmFnZXIobmV3IFNlcnZl\nckNvbmZpZ3VyYXRpb24oKSwgRXhlY3V0b3JzLm5ld1NpbmdsZVRocmVhZFNj\naGVkdWxlZEV4ZWN1dG9yKCkpIHsKCiAgICAgICAgICAgICAgICAgICAgQE92\nZXJyaWRlCiAgICAgICAgICAgICAgICAgICAgcHJvdGVjdGVkIHZvaWQgcmVh\nbEdldE93bmVyKEJ5dGVTdHJpbmcgdG9waWMsIGJvb2xlYW4gc2hvdWxkQ2xh\naW0sCiAgICAgICAgICAgICAgICAgICAgQ2FsbGJhY2s8SGVkd2lnU29ja2V0\nQWRkcmVzcz4gY2IsIE9iamVjdCBjdHgpIHsKICAgICAgICAgICAgICAgICAg\nICAgICAgWm9vS2VlcGVyIHpvb2tlZXBlcjsKICAgICAgICAgICAgICAgICAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHpvb2tl\nZXBlciA9IG5ldyBab29LZWVwZXIoaG9zdFBvcnQsIDYwMDAwLCBuZXcgV2F0\nY2hlcigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAT3Zl\ncnJpZGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWMg\ndm9pZCBwcm9jZXNzKFdhdGNoZWRFdmVudCBldmVudCkgewogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPIEF1dG8tZ2VuZXJh\ndGVkIG1ldGhvZCBzdHViCgogICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAg\nICAgICAgICAgICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBlKSB7CiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUnVudGltZUV4\nY2VwdGlvbihlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAg\nICAgICAgICAgICAgICAgICAgem9va2VlcGVyLmdldERhdGEoIi9mYWtlIiwg\nZmFsc2UsIG5ldyBTYWZlQXN5bmNaS0NhbGxiYWNrLkRhdGFDYWxsYmFjaygp\nIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgcHVibGljIHZvaWQgc2FmZVByb2Nl\nc3NSZXN1bHQoaW50IHJjLCBTdHJpbmcgcGF0aCwgT2JqZWN0IGN0eCwgYnl0\nZVtdIGRhdGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmcuYXBh\nY2hlLnpvb2tlZXBlci5kYXRhLlN0YXQgc3RhdCkgewogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9u\nKCJUaGlzIHNob3VsZCBnbyB0byB0aGUgdW5jYXVnaHQgZXhjZXB0aW9uIGhh\nbmRsZXIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAg\nICAgICAgICAgICAgICAgICAgIH0sIG51bGwpOwogICAgICAgICAgICAgICAg\nICAgIH0KCiAgICAgICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAg\nICAgICAgICAgICAgcHJvdGVjdGVkIHZvaWQgcG9zdFJlbGVhc2VDbGVhbnVw\nKEJ5dGVTdHJpbmcgdG9waWMsIENhbGxiYWNrPFZvaWQ+IGNiLCBPYmplY3Qg\nY3R4KSB7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAg\nfTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBydW5QdWJs\naXNoUmVxdWVzdChwb3J0KTsKICAgICAgICBhc3NlcnRFcXVhbHMoUnVudGlt\nZUV4Y2VwdGlvbi5jbGFzcywgcXVldWUudGFrZSgpLmdldENsYXNzKCkpOwog\nICAgICAgIHNlcnZlci5zaHV0ZG93bigpOwogICAgfQoKICAgIEBUZXN0KHRp\nbWVvdXQ9NjAwMDApCiAgICBwdWJsaWMgdm9pZCB0ZXN0SW52YWxpZFNlcnZl\nckNvbmZpZ3VyYXRpb24oKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBi\nb29sZWFuIHN1Y2Nlc3MgPSBmYWxzZTsKICAgICAgICBTZXJ2ZXJDb25maWd1\ncmF0aW9uIGNvbmYgPSBuZXcgU2VydmVyQ29uZmlndXJhdGlvbigpIHsKICAg\nICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyBib29sZWFu\nIGlzSW50ZXJSZWdpb25TU0xFbmFibGVkKCkgewogICAgICAgICAgICAgICAg\ncmV0dXJuIGNvbmYuZ2V0Qm9vbGVhbihJTlRFUl9SRUdJT05fU1NMX0VOQUJM\nRUQsIHRydWUpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBAT3ZlcnJp\nZGUKICAgICAgICAgICAgcHVibGljIExpc3Q8U3RyaW5nPiBnZXRSZWdpb25z\nKCkgewogICAgICAgICAgICAgICAgTGlzdDxTdHJpbmc+IHJlZ2lvbnNMaXN0\nID0gbmV3IExpbmtlZExpc3Q8U3RyaW5nPigpOwogICAgICAgICAgICAgICAg\ncmVnaW9uc0xpc3QuYWRkKCJyZWdpb25Ib3N0MTo0MDgwOjk4NzYiKTsKICAg\nICAgICAgICAgICAgIHJlZ2lvbnNMaXN0LmFkZCgicmVnaW9uSG9zdDI6NDA4\nMCIpOwogICAgICAgICAgICAgICAgcmVnaW9uc0xpc3QuYWRkKCJyZWdpb25I\nb3N0Mzo0MDgwOjk4NzYiKTsKICAgICAgICAgICAgICAgIHJldHVybiByZWdp\nb25zTGlzdDsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgY29uZi52YWxpZGF0ZSgpOwogICAgICAgIH0KICAg\nICAgICBjYXRjaCAoQ29uZmlndXJhdGlvbkV4Y2VwdGlvbiBlKSB7CiAgICAg\nICAgICAgIGxvZ2dlci5lcnJvcigiSW52YWxpZCBjb25maWd1cmF0aW9uOiAi\nLCBlKTsKICAgICAgICAgICAgc3VjY2VzcyA9IHRydWU7CiAgICAgICAgfQog\nICAgICAgIGFzc2VydFRydWUoc3VjY2Vzcyk7CiAgICB9CgogICAgQFRlc3Qo\ndGltZW91dD02MDAwMCkKICAgIHB1YmxpYyB2b2lkIHRlc3RWYWxpZFNlcnZl\nckNvbmZpZ3VyYXRpb24oKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBi\nb29sZWFuIHN1Y2Nlc3MgPSB0cnVlOwogICAgICAgIFNlcnZlckNvbmZpZ3Vy\nYXRpb24gY29uZiA9IG5ldyBTZXJ2ZXJDb25maWd1cmF0aW9uKCkgewogICAg\nICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIGJvb2xlYW4g\naXNJbnRlclJlZ2lvblNTTEVuYWJsZWQoKSB7CiAgICAgICAgICAgICAgICBy\nZXR1cm4gY29uZi5nZXRCb29sZWFuKElOVEVSX1JFR0lPTl9TU0xfRU5BQkxF\nRCwgdHJ1ZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIEBPdmVycmlk\nZQogICAgICAgICAgICBwdWJsaWMgTGlzdDxTdHJpbmc+IGdldFJlZ2lvbnMo\nKSB7CiAgICAgICAgICAgICAgICBMaXN0PFN0cmluZz4gcmVnaW9uc0xpc3Qg\nPSBuZXcgTGlua2VkTGlzdDxTdHJpbmc+KCk7CiAgICAgICAgICAgICAgICBy\nZWdpb25zTGlzdC5hZGQoInJlZ2lvbkhvc3QxOjQwODA6OTg3NiIpOwogICAg\nICAgICAgICAgICAgcmVnaW9uc0xpc3QuYWRkKCJyZWdpb25Ib3N0Mjo0MDgw\nOjI5MzgiKTsKICAgICAgICAgICAgICAgIHJlZ2lvbnNMaXN0LmFkZCgicmVn\naW9uSG9zdDM6NDA4MDo5ODc2Iik7CiAgICAgICAgICAgICAgICByZXR1cm4g\ncmVnaW9uc0xpc3Q7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAg\nIHRyeSB7CiAgICAgICAgICAgIGNvbmYudmFsaWRhdGUoKTsKICAgICAgICB9\nCiAgICAgICAgY2F0Y2ggKENvbmZpZ3VyYXRpb25FeGNlcHRpb24gZSkgewog\nICAgICAgICAgICBsb2dnZXIuZXJyb3IoIkludmFsaWQgY29uZmlndXJhdGlv\nbjogIiwgZSk7CiAgICAgICAgICAgIHN1Y2Nlc3MgPSBmYWxzZTsKICAgICAg\nICB9CiAgICAgICAgYXNzZXJ0VHJ1ZShzdWNjZXNzKTsKICAgIH0KCn0K\n","encoding":"base64"}

