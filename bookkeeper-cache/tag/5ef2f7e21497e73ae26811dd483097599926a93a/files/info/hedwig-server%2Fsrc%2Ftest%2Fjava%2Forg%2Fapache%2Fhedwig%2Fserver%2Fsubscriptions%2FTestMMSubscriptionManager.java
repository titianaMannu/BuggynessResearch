{"sha":"0e0f670fdcd32dfba2587be95ca1467cf0229752","node_id":"MDQ6QmxvYjE1NzU5NTY6MGUwZjY3MGZkY2QzMmRmYmEyNTg3YmU5NWNhMTQ2N2NmMDIyOTc1Mg==","size":10337,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/0e0f670fdcd32dfba2587be95ca1467cf0229752","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIuc3Vic2NyaXB0aW9uczsK\nCmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5FeGVjdXRvcnM7CmltcG9y\ndCBqYXZhLnV0aWwuY29uY3VycmVudC5TY2hlZHVsZWRFeGVjdXRvclNlcnZp\nY2U7CmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5TeW5jaHJvbm91c1F1\nZXVlOwoKaW1wb3J0IG9yZy5qdW5pdC5Bc3NlcnQ7CmltcG9ydCBvcmcuanVu\naXQuVGVzdDsKaW1wb3J0IG9yZy5qdW5pdC5CZWZvcmU7CgppbXBvcnQgY29t\nLmdvb2dsZS5wcm90b2J1Zi5CeXRlU3RyaW5nOwppbXBvcnQgb3JnLmFwYWNo\nZS5oZWR3aWcuZXhjZXB0aW9ucy5QdWJTdWJFeGNlcHRpb247CmltcG9ydCBv\ncmcuYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5QdWJTdWJQcm90b2NvbC5NZXNz\nYWdlU2VxSWQ7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5Q\ndWJTdWJQcm90b2NvbC5TdWJzY3JpYmVSZXF1ZXN0OwppbXBvcnQgb3JnLmFw\nYWNoZS5oZWR3aWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2wuU3Vic2NyaWJl\nUmVxdWVzdC5DcmVhdGVPckF0dGFjaDsKaW1wb3J0IG9yZy5hcGFjaGUuaGVk\nd2lnLnByb3RvY29sLlB1YlN1YlByb3RvY29sLlN1YnNjcmlwdGlvbkRhdGE7\nCmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIuY29tbW9uLlNlcnZl\nckNvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2\nZXIucGVyc2lzdGVuY2UuTG9jYWxEQlBlcnNpc3RlbmNlTWFuYWdlcjsKaW1w\nb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnNlcnZlci50b3BpY3MuVHJpdmlhbE93\nbkFsbFRvcGljTWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnNl\ncnZlci5tZXRhLk1ldGFkYXRhTWFuYWdlckZhY3Rvcnk7CmltcG9ydCBvcmcu\nYXBhY2hlLmhlZHdpZy51dGlsLkNvbmN1cnJlbmN5VXRpbHM7CmltcG9ydCBv\ncmcuYXBhY2hlLmhlZHdpZy51dGlsLkVpdGhlcjsKaW1wb3J0IG9yZy5hcGFj\naGUuaGVkd2lnLnV0aWwuQ2FsbGJhY2s7CmltcG9ydCBvcmcuYXBhY2hlLmhl\nZHdpZy56b29rZWVwZXIuWm9vS2VlcGVyVGVzdEJhc2U7CgpwdWJsaWMgY2xh\nc3MgVGVzdE1NU3Vic2NyaXB0aW9uTWFuYWdlciBleHRlbmRzIFpvb0tlZXBl\nclRlc3RCYXNlIHsKICAgIE1ldGFkYXRhTWFuYWdlckZhY3RvcnkgbW07CiAg\nICBNTVN1YnNjcmlwdGlvbk1hbmFnZXIgc207CiAgICBTZXJ2ZXJDb25maWd1\ncmF0aW9uIGNmZyA9IG5ldyBTZXJ2ZXJDb25maWd1cmF0aW9uKCk7CiAgICBT\neW5jaHJvbm91c1F1ZXVlPEVpdGhlcjxTdWJzY3JpcHRpb25EYXRhLCBQdWJT\ndWJFeGNlcHRpb24+PiBzdWJEYXRhQ2FsbGJhY2tRdWV1ZSA9IG5ldyBTeW5j\naHJvbm91c1F1ZXVlPEVpdGhlcjxTdWJzY3JpcHRpb25EYXRhLCBQdWJTdWJF\neGNlcHRpb24+PigpOwogICAgU3luY2hyb25vdXNRdWV1ZTxFaXRoZXI8Qm9v\nbGVhbiwgUHViU3ViRXhjZXB0aW9uPj4gQm9vbGVhbkNhbGxiYWNrUXVldWUg\nPSBuZXcgU3luY2hyb25vdXNRdWV1ZTxFaXRoZXI8Qm9vbGVhbiwgUHViU3Vi\nRXhjZXB0aW9uPj4oKTsKCiAgICBDYWxsYmFjazxWb2lkPiB2b2lkQ2FsbGJh\nY2s7CiAgICBDYWxsYmFjazxTdWJzY3JpcHRpb25EYXRhPiBzdWJEYXRhQ2Fs\nbGJhY2s7CgogICAgQEJlZm9yZQogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMg\ndm9pZCBzZXRVcCgpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIHN1cGVy\nLnNldFVwKCk7CiAgICAgICAgY2ZnID0gbmV3IFNlcnZlckNvbmZpZ3VyYXRp\nb24oKTsKICAgICAgICBmaW5hbCBTY2hlZHVsZWRFeGVjdXRvclNlcnZpY2Ug\nc2NoZWR1bGVyID0gRXhlY3V0b3JzLm5ld1NjaGVkdWxlZFRocmVhZFBvb2wo\nMSk7CiAgICAgICAgbW0gPSBNZXRhZGF0YU1hbmFnZXJGYWN0b3J5Lm5ld01l\ndGFkYXRhTWFuYWdlckZhY3RvcnkoY2ZnLCB6ayk7CiAgICAgICAgc20gPSBu\nZXcgTU1TdWJzY3JpcHRpb25NYW5hZ2VyKGNmZywgbW0sIG5ldyBUcml2aWFs\nT3duQWxsVG9waWNNYW5hZ2VyKGNmZywgc2NoZWR1bGVyKSwKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTG9jYWxEQlBlcnNpc3Rl\nbmNlTWFuYWdlci5pbnN0YW5jZSgpLCBudWxsLCBzY2hlZHVsZXIpOwogICAg\nICAgIHN1YkRhdGFDYWxsYmFjayA9IG5ldyBDYWxsYmFjazxTdWJzY3JpcHRp\nb25EYXRhPigpIHsKICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAg\nIHB1YmxpYyB2b2lkIG9wZXJhdGlvbkZhaWxlZChPYmplY3QgY3R4LCBmaW5h\nbCBQdWJTdWJFeGNlcHRpb24gZXhjZXB0aW9uKSB7CiAgICAgICAgICAgICAg\nICBzY2hlZHVsZXIuZXhlY3V0ZShuZXcgUnVubmFibGUoKSB7CiAgICAgICAg\nICAgICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkgewogICAgICAgICAgICAg\nICAgICAgICAgICBDb25jdXJyZW5jeVV0aWxzLnB1dChzdWJEYXRhQ2FsbGJh\nY2tRdWV1ZSwgRWl0aGVyLm9mKChTdWJzY3JpcHRpb25EYXRhKSBudWxsLCBl\neGNlcHRpb24pKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAg\nICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgQE92ZXJyaWRl\nCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9wZXJhdGlvbkZpbmlzaGVkKE9i\namVjdCBjdHgsIGZpbmFsIFN1YnNjcmlwdGlvbkRhdGEgcmVzdWx0T2ZPcGVy\nYXRpb24pIHsKICAgICAgICAgICAgICAgIHNjaGVkdWxlci5leGVjdXRlKG5l\ndyBSdW5uYWJsZSgpIHsKICAgICAgICAgICAgICAgICAgICBwdWJsaWMgdm9p\nZCBydW4oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIENvbmN1cnJlbmN5\nVXRpbHMucHV0KHN1YkRhdGFDYWxsYmFja1F1ZXVlLCBFaXRoZXIub2YocmVz\ndWx0T2ZPcGVyYXRpb24sIChQdWJTdWJFeGNlcHRpb24pIG51bGwpKTsKICAg\nICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAg\nICAgICAgfQogICAgICAgIH07CgogICAgICAgIHZvaWRDYWxsYmFjayA9IG5l\ndyBDYWxsYmFjazxWb2lkPigpIHsKICAgICAgICAgICAgQE92ZXJyaWRlCiAg\nICAgICAgICAgIHB1YmxpYyB2b2lkIG9wZXJhdGlvbkZhaWxlZChPYmplY3Qg\nY3R4LCBmaW5hbCBQdWJTdWJFeGNlcHRpb24gZXhjZXB0aW9uKSB7CiAgICAg\nICAgICAgICAgICBzY2hlZHVsZXIuZXhlY3V0ZShuZXcgUnVubmFibGUoKSB7\nCiAgICAgICAgICAgICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkgewogICAg\nICAgICAgICAgICAgICAgICAgICBDb25jdXJyZW5jeVV0aWxzLnB1dChCb29s\nZWFuQ2FsbGJhY2tRdWV1ZSwgRWl0aGVyLm9mKChCb29sZWFuKSBudWxsLCBl\neGNlcHRpb24pKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAg\nICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgQE92ZXJyaWRl\nCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9wZXJhdGlvbkZpbmlzaGVkKE9i\namVjdCBjdHgsIFZvaWQgcmVzdWx0T2ZPcGVyYXRpb24pIHsKICAgICAgICAg\nICAgICAgIHNjaGVkdWxlci5leGVjdXRlKG5ldyBSdW5uYWJsZSgpIHsKICAg\nICAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB7CiAgICAgICAg\nICAgICAgICAgICAgICAgIENvbmN1cnJlbmN5VXRpbHMucHV0KEJvb2xlYW5D\nYWxsYmFja1F1ZXVlLCBFaXRoZXIub2YodHJ1ZSwgKFB1YlN1YkV4Y2VwdGlv\nbikgbnVsbCkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAg\nICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICB9CgogICAg\nQFRlc3QodGltZW91dD02MDAwMCkKICAgIHB1YmxpYyB2b2lkIHRlc3RCYXNp\nY3MoKSB0aHJvd3MgRXhjZXB0aW9uIHsKCiAgICAgICAgQnl0ZVN0cmluZyB0\nb3BpYzEgPSBCeXRlU3RyaW5nLmNvcHlGcm9tVXRmOCgidG9waWMxIik7CiAg\nICAgICAgQnl0ZVN0cmluZyBzdWIxID0gQnl0ZVN0cmluZy5jb3B5RnJvbVV0\nZjgoInN1YjEiKTsKCiAgICAgICAgLy8KICAgICAgICAvLyBObyB0b3BpY3Mg\nYWNxdWlyZWQuCiAgICAgICAgLy8KICAgICAgICBTdWJzY3JpYmVSZXF1ZXN0\nIHN1YlJlcXVlc3QgPSBTdWJzY3JpYmVSZXF1ZXN0Lm5ld0J1aWxkZXIoKS5z\nZXRTdWJzY3JpYmVySWQoc3ViMSkuYnVpbGQoKTsKICAgICAgICBNZXNzYWdl\nU2VxSWQgbXNnSWQgPSBNZXNzYWdlU2VxSWQubmV3QnVpbGRlcigpLnNldExv\nY2FsQ29tcG9uZW50KDEwMCkuYnVpbGQoKTsKCiAgICAgICAgc20uc2VydmVT\ndWJzY3JpYmVSZXF1ZXN0KHRvcGljMSwgc3ViUmVxdWVzdCwgbXNnSWQsIHN1\nYkRhdGFDYWxsYmFjaywgbnVsbCk7CgogICAgICAgIEFzc2VydC5hc3NlcnRF\ncXVhbHMoQ29uY3VycmVuY3lVdGlscy50YWtlKHN1YkRhdGFDYWxsYmFja1F1\nZXVlKS5yaWdodCgpLmdldENsYXNzKCksCiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICBQdWJTdWJFeGNlcHRpb24uU2VydmVyTm90UmVzcG9uc2libGVG\nb3JUb3BpY0V4Y2VwdGlvbi5jbGFzcyk7CgogICAgICAgIHNtLnVuc3Vic2Ny\naWJlKHRvcGljMSwgc3ViMSwgdm9pZENhbGxiYWNrLCBudWxsKTsKCiAgICAg\nICAgQXNzZXJ0LmFzc2VydEVxdWFscyhDb25jdXJyZW5jeVV0aWxzLnRha2Uo\nQm9vbGVhbkNhbGxiYWNrUXVldWUpLnJpZ2h0KCkuZ2V0Q2xhc3MoKSwKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgIFB1YlN1YkV4Y2VwdGlvbi5TZXJ2\nZXJOb3RSZXNwb25zaWJsZUZvclRvcGljRXhjZXB0aW9uLmNsYXNzKTsKCiAg\nICAgICAgLy8KICAgICAgICAvLyBBY3F1aXJlIHRvcGljLgogICAgICAgIC8v\nCgogICAgICAgIHNtLmFjcXVpcmVkVG9waWModG9waWMxLCB2b2lkQ2FsbGJh\nY2ssIG51bGwpOwogICAgICAgIEFzc2VydC5hc3NlcnRUcnVlKEJvb2xlYW5D\nYWxsYmFja1F1ZXVlLnRha2UoKS5sZWZ0KCkpOwoKICAgICAgICBBc3NlcnQu\nYXNzZXJ0VHJ1ZShzbS50b3Ayc3ViMnNlcS5jb250YWluc0tleSh0b3BpYzEp\nKTsKICAgICAgICBBc3NlcnQuYXNzZXJ0RXF1YWxzKDAsIHNtLnRvcDJzdWIy\nc2VxLmdldCh0b3BpYzEpLnNpemUoKSk7CgogICAgICAgIHNtLnVuc3Vic2Ny\naWJlKHRvcGljMSwgc3ViMSwgdm9pZENhbGxiYWNrLCBudWxsKTsKICAgICAg\nICBBc3NlcnQuYXNzZXJ0RXF1YWxzKENvbmN1cnJlbmN5VXRpbHMudGFrZShC\nb29sZWFuQ2FsbGJhY2tRdWV1ZSkucmlnaHQoKS5nZXRDbGFzcygpLAogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgUHViU3ViRXhjZXB0aW9uLkNsaWVu\ndE5vdFN1YnNjcmliZWRFeGNlcHRpb24uY2xhc3MpOwoKICAgICAgICAvLwog\nICAgICAgIC8vIFRyeSB0byBhdHRhY2ggdG8gYSBzdWJzY3JpcHRpb24uCiAg\nICAgICAgc3ViUmVxdWVzdCA9IFN1YnNjcmliZVJlcXVlc3QubmV3QnVpbGRl\ncigpLnNldENyZWF0ZU9yQXR0YWNoKENyZWF0ZU9yQXR0YWNoLkFUVEFDSCku\nc2V0U3Vic2NyaWJlcklkKHN1YjEpCiAgICAgICAgICAgICAgICAgICAgIC5i\ndWlsZCgpOwoKICAgICAgICBzbS5zZXJ2ZVN1YnNjcmliZVJlcXVlc3QodG9w\naWMxLCBzdWJSZXF1ZXN0LCBtc2dJZCwgc3ViRGF0YUNhbGxiYWNrLCBudWxs\nKTsKICAgICAgICBBc3NlcnQuYXNzZXJ0RXF1YWxzKENvbmN1cnJlbmN5VXRp\nbHMudGFrZShzdWJEYXRhQ2FsbGJhY2tRdWV1ZSkucmlnaHQoKS5nZXRDbGFz\ncygpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgUHViU3ViRXhjZXB0\naW9uLkNsaWVudE5vdFN1YnNjcmliZWRFeGNlcHRpb24uY2xhc3MpOwoKICAg\nICAgICAvLyBub3cgY3JlYXRlCiAgICAgICAgc3ViUmVxdWVzdCA9IFN1YnNj\ncmliZVJlcXVlc3QubmV3QnVpbGRlcigpLnNldENyZWF0ZU9yQXR0YWNoKENy\nZWF0ZU9yQXR0YWNoLkNSRUFURSkuc2V0U3Vic2NyaWJlcklkKHN1YjEpCiAg\nICAgICAgICAgICAgICAgICAgIC5idWlsZCgpOwogICAgICAgIHNtLnNlcnZl\nU3Vic2NyaWJlUmVxdWVzdCh0b3BpYzEsIHN1YlJlcXVlc3QsIG1zZ0lkLCBz\ndWJEYXRhQ2FsbGJhY2ssIG51bGwpOwogICAgICAgIEFzc2VydC5hc3NlcnRF\ncXVhbHMobXNnSWQuZ2V0TG9jYWxDb21wb25lbnQoKSwgQ29uY3VycmVuY3lV\ndGlscy50YWtlKHN1YkRhdGFDYWxsYmFja1F1ZXVlKS5sZWZ0KCkuZ2V0U3Rh\ndGUoKS5nZXRNc2dJZCgpLmdldExvY2FsQ29tcG9uZW50KCkpOwogICAgICAg\nIEFzc2VydC5hc3NlcnRFcXVhbHMobXNnSWQuZ2V0TG9jYWxDb21wb25lbnQo\nKSwgc20udG9wMnN1YjJzZXEuZ2V0KHRvcGljMSkuZ2V0KHN1YjEpLmdldExh\nc3RDb25zdW1lU2VxSWQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAg\nLmdldExvY2FsQ29tcG9uZW50KCkpOwoKICAgICAgICAvLyB0cnkgdG8gY3Jl\nYXRlIGFnYWluCiAgICAgICAgc20uc2VydmVTdWJzY3JpYmVSZXF1ZXN0KHRv\ncGljMSwgc3ViUmVxdWVzdCwgbXNnSWQsIHN1YkRhdGFDYWxsYmFjaywgbnVs\nbCk7CiAgICAgICAgQXNzZXJ0LmFzc2VydEVxdWFscyhDb25jdXJyZW5jeVV0\naWxzLnRha2Uoc3ViRGF0YUNhbGxiYWNrUXVldWUpLnJpZ2h0KCkuZ2V0Q2xh\nc3MoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFB1YlN1YkV4Y2Vw\ndGlvbi5DbGllbnRBbHJlYWR5U3Vic2NyaWJlZEV4Y2VwdGlvbi5jbGFzcyk7\nCiAgICAgICAgQXNzZXJ0LmFzc2VydEVxdWFscyhtc2dJZC5nZXRMb2NhbENv\nbXBvbmVudCgpLCBzbS50b3Ayc3ViMnNlcS5nZXQodG9waWMxKS5nZXQoc3Vi\nMSkuZ2V0TGFzdENvbnN1bWVTZXFJZCgpCiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAuZ2V0TG9jYWxDb21wb25lbnQoKSk7CgogICAgICAgIHNtLmxv\nc3RUb3BpYyh0b3BpYzEpOwogICAgICAgIHNtLmFjcXVpcmVkVG9waWModG9w\naWMxLCB2b2lkQ2FsbGJhY2ssIG51bGwpOwogICAgICAgIEFzc2VydC5hc3Nl\ncnRUcnVlKEJvb2xlYW5DYWxsYmFja1F1ZXVlLnRha2UoKS5sZWZ0KCkpOwoK\nICAgICAgICAvLyB0cnkgdG8gYXR0YWNoCiAgICAgICAgc3ViUmVxdWVzdCA9\nIFN1YnNjcmliZVJlcXVlc3QubmV3QnVpbGRlcigpLnNldENyZWF0ZU9yQXR0\nYWNoKENyZWF0ZU9yQXR0YWNoLkFUVEFDSCkuc2V0U3Vic2NyaWJlcklkKHN1\nYjEpCiAgICAgICAgICAgICAgICAgICAgIC5idWlsZCgpOwogICAgICAgIE1l\nc3NhZ2VTZXFJZCBtc2dJZDEgPSBNZXNzYWdlU2VxSWQubmV3QnVpbGRlcigp\nLnNldExvY2FsQ29tcG9uZW50KG1zZ0lkLmdldExvY2FsQ29tcG9uZW50KCkg\nKyAxMCkuYnVpbGQoKTsKICAgICAgICBzbS5zZXJ2ZVN1YnNjcmliZVJlcXVl\nc3QodG9waWMxLCBzdWJSZXF1ZXN0LCBtc2dJZDEsIHN1YkRhdGFDYWxsYmFj\naywgbnVsbCk7CiAgICAgICAgQXNzZXJ0LmFzc2VydEVxdWFscyhtc2dJZC5n\nZXRMb2NhbENvbXBvbmVudCgpLCBzdWJEYXRhQ2FsbGJhY2tRdWV1ZS50YWtl\nKCkubGVmdCgpLmdldFN0YXRlKCkuZ2V0TXNnSWQoKS5nZXRMb2NhbENvbXBv\nbmVudCgpKTsKICAgICAgICBBc3NlcnQuYXNzZXJ0RXF1YWxzKG1zZ0lkLmdl\ndExvY2FsQ29tcG9uZW50KCksIHNtLnRvcDJzdWIyc2VxLmdldCh0b3BpYzEp\nLmdldChzdWIxKS5nZXRMYXN0Q29uc3VtZVNlcUlkKCkKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIC5nZXRMb2NhbENvbXBvbmVudCgpKTsKCiAgICAg\nICAgLy8gbm93IG1hbmlwdWxhdGUgdGhlIGNvbnN1bWUgcHRycwogICAgICAg\nIC8vIGRvbnQgZ2l2ZSBpdCBlbm91Z2ggdG8gaGF2ZSBpdCBwZXJzaXN0IHRv\nIFpLCiAgICAgICAgTWVzc2FnZVNlcUlkIG1zZ0lkMiA9IE1lc3NhZ2VTZXFJ\nZC5uZXdCdWlsZGVyKCkuc2V0TG9jYWxDb21wb25lbnQoCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICBtc2dJZC5nZXRMb2NhbENvbXBvbmVu\ndCgpICsgY2ZnLmdldENvbnN1bWVJbnRlcnZhbCgpIC0gMSkuYnVpbGQoKTsK\nICAgICAgICBzbS5zZXRDb25zdW1lU2VxSWRGb3JTdWJzY3JpYmVyKHRvcGlj\nMSwgc3ViMSwgbXNnSWQyLCB2b2lkQ2FsbGJhY2ssIG51bGwpOwogICAgICAg\nIEFzc2VydC5hc3NlcnRUcnVlKEJvb2xlYW5DYWxsYmFja1F1ZXVlLnRha2Uo\nKS5sZWZ0KCkpOwogICAgICAgIEFzc2VydC5hc3NlcnRFcXVhbHMobXNnSWQy\nLmdldExvY2FsQ29tcG9uZW50KCksIHNtLnRvcDJzdWIyc2VxLmdldCh0b3Bp\nYzEpLmdldChzdWIxKS5nZXRMYXN0Q29uc3VtZVNlcUlkKCkKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIC5nZXRMb2NhbENvbXBvbmVudCgpKTsKICAg\nICAgICBBc3NlcnQuYXNzZXJ0RXF1YWxzKG1zZ0lkLmdldExvY2FsQ29tcG9u\nZW50KCksIHNtLnRvcDJzdWIyc2VxLmdldCh0b3BpYzEpLmdldChzdWIxKS5n\nZXRTdWJzY3JpcHRpb25TdGF0ZSgpLmdldE1zZ0lkKCkKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIC5nZXRMb2NhbENvbXBvbmVudCgpKTsKCiAgICAg\nICAgLy8gZ2l2ZSBpdCBtb3JlIHNvIHRoYXQgaXQgd2lsbCB3cml0ZSB0byBa\nSwogICAgICAgIE1lc3NhZ2VTZXFJZCBtc2dJZDMgPSBNZXNzYWdlU2VxSWQu\nbmV3QnVpbGRlcigpLnNldExvY2FsQ29tcG9uZW50KAogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgbXNnSWQuZ2V0TG9jYWxDb21wb25lbnQo\nKSArIGNmZy5nZXRDb25zdW1lSW50ZXJ2YWwoKSArIDEpLmJ1aWxkKCk7CiAg\nICAgICAgc20uc2V0Q29uc3VtZVNlcUlkRm9yU3Vic2NyaWJlcih0b3BpYzEs\nIHN1YjEsIG1zZ0lkMywgdm9pZENhbGxiYWNrLCBudWxsKTsKICAgICAgICBB\nc3NlcnQuYXNzZXJ0VHJ1ZShCb29sZWFuQ2FsbGJhY2tRdWV1ZS50YWtlKCku\nbGVmdCgpKTsKCiAgICAgICAgc20ubG9zdFRvcGljKHRvcGljMSk7CiAgICAg\nICAgc20uYWNxdWlyZWRUb3BpYyh0b3BpYzEsIHZvaWRDYWxsYmFjaywgbnVs\nbCk7CiAgICAgICAgQXNzZXJ0LmFzc2VydFRydWUoQm9vbGVhbkNhbGxiYWNr\nUXVldWUudGFrZSgpLmxlZnQoKSk7CgogICAgICAgIEFzc2VydC5hc3NlcnRF\ncXVhbHMobXNnSWQzLmdldExvY2FsQ29tcG9uZW50KCksIHNtLnRvcDJzdWIy\nc2VxLmdldCh0b3BpYzEpLmdldChzdWIxKS5nZXRMYXN0Q29uc3VtZVNlcUlk\nKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXRMb2NhbENvbXBv\nbmVudCgpKTsKICAgICAgICBBc3NlcnQuYXNzZXJ0RXF1YWxzKG1zZ0lkMy5n\nZXRMb2NhbENvbXBvbmVudCgpLCBzbS50b3Ayc3ViMnNlcS5nZXQodG9waWMx\nKS5nZXQoc3ViMSkuZ2V0U3Vic2NyaXB0aW9uU3RhdGUoKS5nZXRNc2dJZCgp\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0TG9jYWxDb21wb25l\nbnQoKSk7CgogICAgICAgIC8vIGZpbmFsbHkgdW5zdWJzY3JpYmUKICAgICAg\nICBzbS51bnN1YnNjcmliZSh0b3BpYzEsIHN1YjEsIHZvaWRDYWxsYmFjaywg\nbnVsbCk7CiAgICAgICAgQXNzZXJ0LmFzc2VydFRydWUoQm9vbGVhbkNhbGxi\nYWNrUXVldWUudGFrZSgpLmxlZnQoKSk7CgogICAgICAgIHNtLmxvc3RUb3Bp\nYyh0b3BpYzEpOwogICAgICAgIHNtLmFjcXVpcmVkVG9waWModG9waWMxLCB2\nb2lkQ2FsbGJhY2ssIG51bGwpOwogICAgICAgIEFzc2VydC5hc3NlcnRUcnVl\nKEJvb2xlYW5DYWxsYmFja1F1ZXVlLnRha2UoKS5sZWZ0KCkpOwogICAgICAg\nIEFzc2VydC5hc3NlcnRGYWxzZShzbS50b3Ayc3ViMnNlcS5nZXQodG9waWMx\nKS5jb250YWluc0tleShzdWIxKSk7CgogICAgfQoKfQo=\n","encoding":"base64"}

