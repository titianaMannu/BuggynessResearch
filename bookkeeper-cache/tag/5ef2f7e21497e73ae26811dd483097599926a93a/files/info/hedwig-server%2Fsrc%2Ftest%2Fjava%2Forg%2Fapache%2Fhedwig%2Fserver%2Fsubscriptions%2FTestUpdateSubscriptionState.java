{"sha":"10484a194d1df121a26c3fc5cde0724469bb3615","node_id":"MDQ6QmxvYjE1NzU5NTY6MTA0ODRhMTk0ZDFkZjEyMWEyNmMzZmM1Y2RlMDcyNDQ2OWJiMzYxNQ==","size":9039,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/10484a194d1df121a26c3fc5cde0724469bb3615","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIuc3Vic2NyaXB0aW9uczsK\nCmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5TeW5jaHJvbm91c1F1ZXVl\nOwoKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmNsaWVudC5IZWR3aWdDbGll\nbnQ7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQuYXBpLk1lc3Nh\nZ2VIYW5kbGVyOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuY2xpZW50LmFw\naS5QdWJsaXNoZXI7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQu\nYXBpLlN1YnNjcmliZXI7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5jbGll\nbnQuY29uZi5DbGllbnRDb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNo\nZS5oZWR3aWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2wuTWVzc2FnZTsKaW1w\nb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnByb3RvY29sLlB1YlN1YlByb3RvY29s\nLlN1YnNjcmliZVJlcXVlc3QuQ3JlYXRlT3JBdHRhY2g7CmltcG9ydCBvcmcu\nYXBhY2hlLmhlZHdpZy5zZXJ2ZXIuSGVkd2lnSHViVGVzdEJhc2U7CmltcG9y\ndCBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIuY29tbW9uLlNlcnZlckNvbmZp\nZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy51dGlsLkNhbGxi\nYWNrOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcudXRpbC5Db25jdXJyZW5j\neVV0aWxzOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcudXRpbC5IZWR3aWdT\nb2NrZXRBZGRyZXNzOwppbXBvcnQgb3JnLmp1bml0LkFmdGVyOwppbXBvcnQg\nb3JnLmp1bml0LkJlZm9yZTsKaW1wb3J0IG9yZy5qdW5pdC5UZXN0OwoKaW1w\nb3J0IGNvbS5nb29nbGUucHJvdG9idWYuQnl0ZVN0cmluZzsKCnB1YmxpYyBj\nbGFzcyBUZXN0VXBkYXRlU3Vic2NyaXB0aW9uU3RhdGUgZXh0ZW5kcyBIZWR3\naWdIdWJUZXN0QmFzZSB7CgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgaW50\nIFJFVEVOVElPTl9TRUNTX1ZBTFVFID0gMTAwOwoKICAgIC8vIENsaWVudCBz\naWRlIHZhcmlhYmxlcwogICAgcHJvdGVjdGVkIEhlZHdpZ0NsaWVudCBjbGll\nbnQ7CiAgICBwcm90ZWN0ZWQgUHVibGlzaGVyIHB1Ymxpc2hlcjsKICAgIHBy\nb3RlY3RlZCBTdWJzY3JpYmVyIHN1YnNjcmliZXI7CgogICAgLy8gU3luY2hy\nb25vdXNRdWV1ZXMgdG8gdmVyaWZ5IGFzeW5jIGNhbGxzCiAgICBwcml2YXRl\nIGZpbmFsIFN5bmNocm9ub3VzUXVldWU8Qm9vbGVhbj4gcXVldWUgPSBuZXcg\nU3luY2hyb25vdXNRdWV1ZTxCb29sZWFuPigpOwoKICAgIC8vIFRlc3QgaW1w\nbGVtZW50YXRpb24gb2Ygc3Vic2NyaWJlcidzIG1lc3NhZ2UgaGFuZGxlcgog\nICAgY2xhc3MgT3JkZXJDaGVja2luZ01lc3NhZ2VIYW5kbGVyIGltcGxlbWVu\ndHMgTWVzc2FnZUhhbmRsZXIgewoKICAgICAgICBCeXRlU3RyaW5nIHRvcGlj\nOwogICAgICAgIEJ5dGVTdHJpbmcgc3Vic2NyaWJlcklkOwogICAgICAgIGlu\ndCBzdGFydE1zZ0lkOwogICAgICAgIGludCBudW1Nc2dzOwogICAgICAgIGlu\ndCBlbmRNc2dJZDsKICAgICAgICBib29sZWFuIGluT3JkZXIgPSB0cnVlOwoK\nICAgICAgICBPcmRlckNoZWNraW5nTWVzc2FnZUhhbmRsZXIoQnl0ZVN0cmlu\nZyB0b3BpYywgQnl0ZVN0cmluZyBzdWJzY3JpYmVySWQsCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgIGludCBzdGFydE1zZ0lkLCBpbnQg\nbnVtTXNncykgewogICAgICAgICAgICB0aGlzLnRvcGljID0gdG9waWM7CiAg\nICAgICAgICAgIHRoaXMuc3Vic2NyaWJlcklkID0gc3Vic2NyaWJlcklkOwog\nICAgICAgICAgICB0aGlzLnN0YXJ0TXNnSWQgPSBzdGFydE1zZ0lkOwogICAg\nICAgICAgICB0aGlzLm51bU1zZ3MgPSBudW1Nc2dzOwogICAgICAgICAgICB0\naGlzLmVuZE1zZ0lkID0gc3RhcnRNc2dJZCArIG51bU1zZ3MgLSAxOwogICAg\nICAgIH0KCiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHVibGljIHZvaWQg\nZGVsaXZlcihCeXRlU3RyaW5nIHRoaXNUb3BpYywgQnl0ZVN0cmluZyB0aGlz\nU3Vic2NyaWJlcklkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVz\nc2FnZSBtc2csIENhbGxiYWNrPFZvaWQ+IGNhbGxiYWNrLCBPYmplY3QgY29u\ndGV4dCkgewogICAgICAgICAgICBpZiAoIXRvcGljLmVxdWFscyh0aGlzVG9w\naWMpIHx8CiAgICAgICAgICAgICAgICAhc3Vic2NyaWJlcklkLmVxdWFscyh0\naGlzU3Vic2NyaWJlcklkKSkgewogICAgICAgICAgICAgICAgcmV0dXJuOwog\nICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIGNoZWNrIG9yZGVyCiAgICAg\nICAgICAgIGludCBtc2dJZCA9IEludGVnZXIucGFyc2VJbnQobXNnLmdldEJv\nZHkoKS50b1N0cmluZ1V0ZjgoKSk7CiAgICAgICAgICAgIGlmIChsb2dnZXIu\naXNEZWJ1Z0VuYWJsZWQoKSkgewogICAgICAgICAgICAgICAgbG9nZ2VyLmRl\nYnVnKCJSZWNlaXZlZCBtZXNzYWdlIDogIiArIG1zZ0lkKTsKICAgICAgICAg\nICAgfQoKICAgICAgICAgICAgaWYgKGluT3JkZXIpIHsKICAgICAgICAgICAg\nICAgIGlmIChzdGFydE1zZ0lkICE9IG1zZ0lkKSB7CiAgICAgICAgICAgICAg\nICAgICAgbG9nZ2VyLmVycm9yKCJFeHBlY3RlZCBtZXNzYWdlICIgKyBzdGFy\ndE1zZ0lkICsgIiwgYnV0IHJlY2VpdmVkIG1lc3NhZ2UgIiArIG1zZ0lkKTsK\nICAgICAgICAgICAgICAgICAgICBpbk9yZGVyID0gZmFsc2U7CiAgICAgICAg\nICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICsrc3RhcnRN\nc2dJZDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAg\nICAgICBjYWxsYmFjay5vcGVyYXRpb25GaW5pc2hlZChjb250ZXh0LCBudWxs\nKTsKICAgICAgICAgICAgaWYgKG1zZ0lkID09IGVuZE1zZ0lkKSB7CiAgICAg\nICAgICAgICAgICBuZXcgVGhyZWFkKG5ldyBSdW5uYWJsZSgpIHsKICAgICAg\nICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgICAgICBw\ndWJsaWMgdm9pZCBydW4oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlm\nIChsb2dnZXIuaXNEZWJ1Z0VuYWJsZWQoKSkgewogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCJEZWxpdmVyIGZpbmlzaGVkISIp\nOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAg\nICAgICAgIENvbmN1cnJlbmN5VXRpbHMucHV0KHF1ZXVlLCB0cnVlKTsKICAg\nICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KS5zdGFydCgp\nOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgYm9v\nbGVhbiBpc0luT3JkZXIoKSB7CiAgICAgICAgICAgIHJldHVybiBpbk9yZGVy\nOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgVGVzdFVwZGF0ZVN1YnNj\ncmlwdGlvblN0YXRlKCkgewogICAgICAgIHN1cGVyKDEpOwogICAgfQoKICAg\nIHByb3RlY3RlZCBjbGFzcyBOZXdIdWJTZXJ2ZXJDb25maWd1cmF0aW9uIGV4\ndGVuZHMgSHViU2VydmVyQ29uZmlndXJhdGlvbiB7CgogICAgICAgIHB1Ymxp\nYyBOZXdIdWJTZXJ2ZXJDb25maWd1cmF0aW9uKGludCBzZXJ2ZXJQb3J0LCBp\nbnQgc3NsU2VydmVyUG9ydCkgewogICAgICAgICAgICBzdXBlcihzZXJ2ZXJQ\nb3J0LCBzc2xTZXJ2ZXJQb3J0KTsKICAgICAgICB9CgogICAgICAgIEBPdmVy\ncmlkZQogICAgICAgIHB1YmxpYyBpbnQgZ2V0UmV0ZW50aW9uU2VjcygpIHsK\nICAgICAgICAgICAgcmV0dXJuIFJFVEVOVElPTl9TRUNTX1ZBTFVFOwogICAg\nICAgIH0KCiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwcm90ZWN0ZWQgU2Vy\ndmVyQ29uZmlndXJhdGlvbiBnZXRTZXJ2ZXJDb25maWd1cmF0aW9uKGludCBz\nZXJ2ZXJQb3J0LCBpbnQgc3NsU2VydmVyUG9ydCkgewogICAgICAgIHJldHVy\nbiBuZXcgTmV3SHViU2VydmVyQ29uZmlndXJhdGlvbihzZXJ2ZXJQb3J0LCBz\nc2xTZXJ2ZXJQb3J0KTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgY2xhc3MgVGVz\ndENsaWVudENvbmZpZ3VyYXRpb24gZXh0ZW5kcyBIdWJDbGllbnRDb25maWd1\ncmF0aW9uIHsKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgYm9v\nbGVhbiBpc0F1dG9TZW5kQ29uc3VtZU1lc3NhZ2VFbmFibGVkKCkgewogICAg\nICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICB9CgogICAgQE92\nZXJyaWRlCiAgICBAQmVmb3JlCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpIHRo\ncm93cyBFeGNlcHRpb24gewogICAgICAgIHN1cGVyLnNldFVwKCk7CiAgICAg\nICAgY2xpZW50ID0gbmV3IEhlZHdpZ0NsaWVudChuZXcgVGVzdENsaWVudENv\nbmZpZ3VyYXRpb24oKSk7CiAgICAgICAgcHVibGlzaGVyID0gY2xpZW50Lmdl\ndFB1Ymxpc2hlcigpOwogICAgICAgIHN1YnNjcmliZXIgPSBjbGllbnQuZ2V0\nU3Vic2NyaWJlcigpOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgQEFmdGVy\nCiAgICBwdWJsaWMgdm9pZCB0ZWFyRG93bigpIHRocm93cyBFeGNlcHRpb24g\newogICAgICAgIGNsaWVudC5jbG9zZSgpOwogICAgICAgIHN1cGVyLnRlYXJE\nb3duKCk7CiAgICB9CgogICAgQFRlc3QodGltZW91dD02MDAwMCkKICAgIHB1\nYmxpYyB2b2lkIHRlc3RDb25zdW1lV2hlblRvcGljUmVsZWFzZSgpIHRocm93\ncyBFeGNlcHRpb24gewogICAgICAgIEJ5dGVTdHJpbmcgdG9waWMgPSBCeXRl\nU3RyaW5nLmNvcHlGcm9tVXRmOCgiVGVzdENvbnN1bWVXaGVuVG9waWNSZWxl\nYXNlIik7CiAgICAgICAgQnl0ZVN0cmluZyBzdWJJZCA9IEJ5dGVTdHJpbmcu\nY29weUZyb21VdGY4KCJteXN1YiIpOwoKICAgICAgICBpbnQgc3RhcnRNc2dJ\nZCA9IDA7CiAgICAgICAgaW50IG51bU1zZ3MgPSAxMDsKICAgICAgICAvLyBz\ndWJzY3JpYmVyIGluIGNsaWVudAogICAgICAgIHN1YnNjcmliZXIuc3Vic2Ny\naWJlKHRvcGljLCBzdWJJZCwgQ3JlYXRlT3JBdHRhY2guQ1JFQVRFX09SX0FU\nVEFDSCk7CiAgICAgICAgLy8gc3RhcnQgZGVsaXZlcnkKICAgICAgICBPcmRl\nckNoZWNraW5nTWVzc2FnZUhhbmRsZXIgb2NtID0gbmV3IE9yZGVyQ2hlY2tp\nbmdNZXNzYWdlSGFuZGxlcigKICAgICAgICAgICAgICAgIHRvcGljLCBzdWJJ\nZCwgc3RhcnRNc2dJZCwgbnVtTXNncyk7CiAgICAgICAgc3Vic2NyaWJlci5z\ndGFydERlbGl2ZXJ5KHRvcGljLCBzdWJJZCwgb2NtKTsKICAgICAgICBmb3Ig\nKGludCBpPTA7IGk8bnVtTXNnczsgaSsrKSB7CiAgICAgICAgICAgIE1lc3Nh\nZ2UgbXNnID0gTWVzc2FnZS5uZXdCdWlsZGVyKCkuc2V0Qm9keSgKICAgICAg\nICAgICAgICAgICAgICBCeXRlU3RyaW5nLmNvcHlGcm9tVXRmOChJbnRlZ2Vy\nLnRvU3RyaW5nKHN0YXJ0TXNnSWQgKyBpKSkpLmJ1aWxkKCk7CiAgICAgICAg\nICAgIHB1Ymxpc2hlci5wdWJsaXNoKHRvcGljLCBtc2cpOwogICAgICAgIH0K\nICAgICAgICBsb2dnZXIuaW5mbygiUHVibGlzaCBmaW5pc2hlZC4iKTsKICAg\nICAgICBxdWV1ZS50YWtlKCk7CiAgICAgICAgbG9nZ2VyLmluZm8oIkRlbGl2\nZXIgZmluaXNoZWQuIik7CiAgICAgICAgLy8gY2hlY2sgbWVzc2FnZXMgcmVj\nZWl2ZWQgaW4gb3JkZXIKICAgICAgICBhc3NlcnRUcnVlKG9jbS5pc0luT3Jk\nZXIoKSk7CgogICAgICAgIC8vIHdhaXQgZm9yIHJldGVudGlvbiBzZWNzCiAg\nICAgICAgVGhyZWFkLnNsZWVwKChSRVRFTlRJT05fU0VDU19WQUxVRSArIDIp\nICogMTAwMCk7CgogICAgICAgIHN1YnNjcmliZXIuc3RvcERlbGl2ZXJ5KHRv\ncGljLCBzdWJJZCk7CiAgICAgICAgc3Vic2NyaWJlci5jbG9zZVN1YnNjcmlw\ndGlvbih0b3BpYywgc3ViSWQpOwoKICAgICAgICBzdGFydE1zZ0lkID0gMjA7\nCiAgICAgICAgLy8gcmVjb25uZWN0IGl0IGFnYWluCiAgICAgICAgc3Vic2Ny\naWJlci5zdWJzY3JpYmUodG9waWMsIHN1YklkLCBDcmVhdGVPckF0dGFjaC5D\nUkVBVEVfT1JfQVRUQUNIKTsKICAgICAgICBvY20gPSBuZXcgT3JkZXJDaGVj\na2luZ01lc3NhZ2VIYW5kbGVyKHRvcGljLCBzdWJJZCwgc3RhcnRNc2dJZCwg\nbnVtTXNncyk7CiAgICAgICAgc3Vic2NyaWJlci5zdGFydERlbGl2ZXJ5KHRv\ncGljLCBzdWJJZCwgb2NtKTsKICAgICAgICBmb3IgKGludCBpPTA7IGk8bnVt\nTXNnczsgaSsrKSB7CiAgICAgICAgICAgIE1lc3NhZ2UgbXNnID0gTWVzc2Fn\nZS5uZXdCdWlsZGVyKCkuc2V0Qm9keSgKICAgICAgICAgICAgICAgICAgICBC\neXRlU3RyaW5nLmNvcHlGcm9tVXRmOChJbnRlZ2VyLnRvU3RyaW5nKHN0YXJ0\nTXNnSWQgKyBpKSkpLmJ1aWxkKCk7CiAgICAgICAgICAgIHB1Ymxpc2hlci5w\ndWJsaXNoKHRvcGljLCBtc2cpOwogICAgICAgIH0KICAgICAgICBxdWV1ZS50\nYWtlKCk7CiAgICAgICAgLy8gY2hlY2sgbWVzc2FnZXMgcmVjZWl2ZWQgaW4g\nb3JkZXIKICAgICAgICBhc3NlcnRUcnVlKG9jbS5pc0luT3JkZXIoKSk7CiAg\nICB9CgogICAgQFRlc3QodGltZW91dD02MDAwMCkKICAgIHB1YmxpYyB2b2lk\nIHRlc3RDb25zdW1lV2hlbkh1YlNodXRkb3duKCkgdGhyb3dzIEV4Y2VwdGlv\nbiB7CiAgICAgICAgQnl0ZVN0cmluZyB0b3BpYyA9IEJ5dGVTdHJpbmcuY29w\neUZyb21VdGY4KCJUZXN0Q29uc3VtZVdoZW5IdWJTaHV0ZG93biIpOwogICAg\nICAgIEJ5dGVTdHJpbmcgc3ViSWQgPSBCeXRlU3RyaW5nLmNvcHlGcm9tVXRm\nOCgibXlzdWIiKTsKCiAgICAgICAgaW50IHN0YXJ0TXNnSWQgPSAwOwogICAg\nICAgIGludCBudW1Nc2dzID0gMTA7CiAgICAgICAgLy8gc3Vic2NyaWJlciBp\nbiBjbGllbnQKICAgICAgICBzdWJzY3JpYmVyLnN1YnNjcmliZSh0b3BpYywg\nc3ViSWQsIENyZWF0ZU9yQXR0YWNoLkNSRUFURV9PUl9BVFRBQ0gpOwogICAg\nICAgIC8vIHN0YXJ0IGRlbGl2ZXJ5CiAgICAgICAgT3JkZXJDaGVja2luZ01l\nc3NhZ2VIYW5kbGVyIG9jbSA9IG5ldyBPcmRlckNoZWNraW5nTWVzc2FnZUhh\nbmRsZXIoCiAgICAgICAgICAgICAgICB0b3BpYywgc3ViSWQsIHN0YXJ0TXNn\nSWQsIG51bU1zZ3MpOwogICAgICAgIHN1YnNjcmliZXIuc3RhcnREZWxpdmVy\neSh0b3BpYywgc3ViSWQsIG9jbSk7CiAgICAgICAgZm9yIChpbnQgaT0wOyBp\nPG51bU1zZ3M7IGkrKykgewogICAgICAgICAgICBNZXNzYWdlIG1zZyA9IE1l\nc3NhZ2UubmV3QnVpbGRlcigpLnNldEJvZHkoCiAgICAgICAgICAgICAgICAg\nICAgQnl0ZVN0cmluZy5jb3B5RnJvbVV0ZjgoSW50ZWdlci50b1N0cmluZyhz\ndGFydE1zZ0lkICsgaSkpKS5idWlsZCgpOwogICAgICAgICAgICBwdWJsaXNo\nZXIucHVibGlzaCh0b3BpYywgbXNnKTsKICAgICAgICB9CiAgICAgICAgbG9n\nZ2VyLmluZm8oIlB1Ymxpc2ggZmluaXNoZWQuIik7CiAgICAgICAgcXVldWUu\ndGFrZSgpOwogICAgICAgIGxvZ2dlci5pbmZvKCJEZWxpdmVyIGZpbmlzaGVk\nLiIpOwogICAgICAgIC8vIGNoZWNrIG1lc3NhZ2VzIHJlY2VpdmVkIGluIG9y\nZGVyCiAgICAgICAgYXNzZXJ0VHJ1ZShvY20uaXNJbk9yZGVyKCkpOwogICAg\nICAgIC8vIG1ha2Ugc3VyZSBjb25zdW1lIHJlcXVlc3Qgc2VudCB0byBodWIg\nc2VydmVyIGJlZm9yZSBzaHV0IGRvd24KICAgICAgICBUaHJlYWQuc2xlZXAo\nMjAwMCk7CiAgICAgICAgc3Vic2NyaWJlci5zdG9wRGVsaXZlcnkodG9waWMs\nIHN1YklkKTsKICAgICAgICBzdWJzY3JpYmVyLmNsb3NlU3Vic2NyaXB0aW9u\nKHRvcGljLCBzdWJJZCk7CgogICAgICAgIHN0b3BIdWJTZXJ2ZXJzKCk7CiAg\nICAgICAgVGhyZWFkLnNsZWVwKDEwMDApOwogICAgICAgIHN0YXJ0SHViU2Vy\ndmVycygpOwoKICAgICAgICBzdGFydE1zZ0lkID0gMjA7CiAgICAgICAgLy8g\ncmVjb25uZWN0IGl0IGFnYWluCiAgICAgICAgc3Vic2NyaWJlci5zdWJzY3Jp\nYmUodG9waWMsIHN1YklkLCBDcmVhdGVPckF0dGFjaC5DUkVBVEVfT1JfQVRU\nQUNIKTsKICAgICAgICBvY20gPSBuZXcgT3JkZXJDaGVja2luZ01lc3NhZ2VI\nYW5kbGVyKHRvcGljLCBzdWJJZCwgc3RhcnRNc2dJZCwgbnVtTXNncyk7CiAg\nICAgICAgc3Vic2NyaWJlci5zdGFydERlbGl2ZXJ5KHRvcGljLCBzdWJJZCwg\nb2NtKTsKICAgICAgICBmb3IgKGludCBpPTA7IGk8bnVtTXNnczsgaSsrKSB7\nCiAgICAgICAgICAgIE1lc3NhZ2UgbXNnID0gTWVzc2FnZS5uZXdCdWlsZGVy\nKCkuc2V0Qm9keSgKICAgICAgICAgICAgICAgICAgICBCeXRlU3RyaW5nLmNv\ncHlGcm9tVXRmOChJbnRlZ2VyLnRvU3RyaW5nKHN0YXJ0TXNnSWQgKyBpKSkp\nLmJ1aWxkKCk7CiAgICAgICAgICAgIHB1Ymxpc2hlci5wdWJsaXNoKHRvcGlj\nLCBtc2cpOwogICAgICAgIH0KICAgICAgICBxdWV1ZS50YWtlKCk7CiAgICAg\nICAgLy8gY2hlY2sgbWVzc2FnZXMgcmVjZWl2ZWQgaW4gb3JkZXIKICAgICAg\nICBhc3NlcnRUcnVlKG9jbS5pc0luT3JkZXIoKSk7CiAgICB9Cn0K\n","encoding":"base64"}

