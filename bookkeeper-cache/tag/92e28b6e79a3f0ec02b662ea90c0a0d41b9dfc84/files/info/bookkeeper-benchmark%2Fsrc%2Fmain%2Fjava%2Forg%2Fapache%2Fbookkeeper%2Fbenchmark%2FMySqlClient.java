{"sha":"71196123da48b151f3bf8b1fb33a4656f1977238","node_id":"MDQ6QmxvYjE1NzU5NTY6NzExOTYxMjNkYTQ4YjE1MWYzYmY4YjFmYjMzYTQ2NTZmMTk3NzIzOA==","size":5122,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/71196123da48b151f3bf8b1fb33a4656f1977238","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIuYmVuY2htYXJrOwoKLyoq\nCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlv\nbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBsaWNl\nbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRpc3Ry\naWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0\naW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFT\nRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBBcGFj\naGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIpOyB5\nb3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNl\nCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkg\nb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hl\nLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWly\nZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcs\nIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlz\nIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQg\nV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIg\nZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRo\nZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5k\nCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCmltcG9y\ndCBqYXZhLmlvLkZpbGVPdXRwdXRTdHJlYW07CmltcG9ydCBqYXZhLnNxbC5D\nb25uZWN0aW9uOwppbXBvcnQgamF2YS5zcWwuRHJpdmVyTWFuYWdlcjsKaW1w\nb3J0IGphdmEuc3FsLlNRTEV4Y2VwdGlvbjsKaW1wb3J0IGphdmEuc3FsLlN0\nYXRlbWVudDsKaW1wb3J0IGphdmEudXRpbC5IYXNoTWFwOwoKaW1wb3J0IG9y\nZy5hcGFjaGUuYm9va2tlZXBlci5jbGllbnQuQm9va0tlZXBlcjsKaW1wb3J0\nIG9yZy5hcGFjaGUuYm9va2tlZXBlci5jbGllbnQuTGVkZ2VySGFuZGxlOwpp\nbXBvcnQgb3JnLnNsZjRqLkxvZ2dlcjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dn\nZXJGYWN0b3J5OwoKCmltcG9ydCBvcmcuYXBhY2hlLnpvb2tlZXBlci5LZWVw\nZXJFeGNlcHRpb247CgpwdWJsaWMgY2xhc3MgTXlTcWxDbGllbnQgewogICAg\nc3RhdGljIExvZ2dlciBMT0cgPSBMb2dnZXJGYWN0b3J5LmdldExvZ2dlcihN\neVNxbENsaWVudC5jbGFzcyk7CgogICAgQm9va0tlZXBlciB4OwogICAgTGVk\nZ2VySGFuZGxlIGxoOwogICAgSW50ZWdlciBlbnRyeUlkOwogICAgSGFzaE1h\ncDxJbnRlZ2VyLCBJbnRlZ2VyPiBtYXA7CgogICAgRmlsZU91dHB1dFN0cmVh\nbSBmU3RyZWFtOwogICAgRmlsZU91dHB1dFN0cmVhbSBmU3RyZWFtTG9jYWw7\nCiAgICBsb25nIHN0YXJ0LCBsYXN0SWQ7CiAgICBDb25uZWN0aW9uIGNvbjsK\nICAgIFN0YXRlbWVudCBzdG10OwoKCiAgICBwdWJsaWMgTXlTcWxDbGllbnQo\nU3RyaW5nIGhvc3Rwb3J0LCBTdHJpbmcgdXNlciwgU3RyaW5nIHBhc3MpCiAg\nICAgICAgICAgIHRocm93cyBDbGFzc05vdEZvdW5kRXhjZXB0aW9uIHsKICAg\nICAgICBlbnRyeUlkID0gMDsKICAgICAgICBtYXAgPSBuZXcgSGFzaE1hcDxJ\nbnRlZ2VyLCBJbnRlZ2VyPigpOwogICAgICAgIENsYXNzLmZvck5hbWUoImNv\nbS5teXNxbC5qZGJjLkRyaXZlciIpOwogICAgICAgIC8vIGRhdGFiYXNlIGlz\nIG5hbWVkICJib29ra2VlcGVyIgogICAgICAgIFN0cmluZyB1cmwgPSAiamRi\nYzpteXNxbDovLyIgKyBob3N0cG9ydCArICIvYm9va2tlZXBlciI7CiAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgY29uID0gRHJpdmVyTWFuYWdlci5nZXRD\nb25uZWN0aW9uKHVybCwgdXNlciwgcGFzcyk7CiAgICAgICAgICAgIHN0bXQg\nPSBjb24uY3JlYXRlU3RhdGVtZW50KCk7CiAgICAgICAgICAgIC8vIGRyb3Ag\ndGFibGUgYW5kIHJlY3JlYXRlIGl0CiAgICAgICAgICAgIHN0bXQuZXhlY3V0\nZSgiRFJPUCBUQUJMRSBJRiBFWElTVFMgZGF0YTsiKTsKICAgICAgICAgICAg\nc3RtdC5leGVjdXRlKCJjcmVhdGUgdGFibGUgZGF0YSh0cmFuc2FjdGlvbl9p\nZCBiaWdpbnQgUFJJTUFSWSBLRVkgQVVUT19JTkNSRU1FTlQsIGNvbnRlbnQg\nVEVYVCk7Iik7CiAgICAgICAgICAgIExPRy5pbmZvKCJEYXRhYmFzZSBpbml0\naWFsaXphdGlvbiB0ZXJtaW5hdGVkIik7CiAgICAgICAgfSBjYXRjaCAoU1FM\nRXhjZXB0aW9uIGUpIHsKCiAgICAgICAgICAgIC8vIFRPRE8gQXV0by1nZW5l\ncmF0ZWQgY2F0Y2ggYmxvY2sKICAgICAgICAgICAgZS5wcmludFN0YWNrVHJh\nY2UoKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZvaWQgY2xvc2VI\nYW5kbGUoKSB0aHJvd3MgS2VlcGVyRXhjZXB0aW9uLCBJbnRlcnJ1cHRlZEV4\nY2VwdGlvbiwgU1FMRXhjZXB0aW9uIHsKICAgICAgICBjb24uY2xvc2UoKTsK\nICAgIH0KICAgIC8qKgogICAgICogRmlyc3QgcGFyYW1ldGVyIGlzIGFuIGlu\ndGVnZXIgZGVmaW5pbmcgdGhlIGxlbmd0aCBvZiB0aGUgbWVzc2FnZQogICAg\nICogU2Vjb25kIHBhcmFtZXRlciBpcyB0aGUgbnVtYmVyIG9mIHdyaXRlcwog\nICAgICogVGhpcmQgcGFyYW1ldGVyIGlzIGhvc3Q6cG9ydAogICAgICogRm91\ncnRoIHBhcmFtZXRlciBpcyB1c2VybmFtZQogICAgICogRmlmdGggcGFyYW1l\ndGVyIGlzIHBhc3N3b3JkCiAgICAgKiBAcGFyYW0gYXJncwogICAgICogQHRo\ncm93cyBDbGFzc05vdEZvdW5kRXhjZXB0aW9uCiAgICAgKiBAdGhyb3dzIFNR\nTEV4Y2VwdGlvbgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFp\nbihTdHJpbmdbXSBhcmdzKSB0aHJvd3MgQ2xhc3NOb3RGb3VuZEV4Y2VwdGlv\nbiwgU1FMRXhjZXB0aW9uIHsKICAgICAgICBpbnQgbGVuZ2h0ID0gSW50ZWdl\nci5wYXJzZUludChhcmdzWzFdKTsKICAgICAgICBTdHJpbmdCdWlsZGVyIHNi\nID0gbmV3IFN0cmluZ0J1aWxkZXIoKTsKICAgICAgICB3aGlsZShsZW5naHQt\nLSA+IDApIHsKICAgICAgICAgICAgc2IuYXBwZW5kKCdhJyk7CiAgICAgICAg\nfQogICAgICAgIHRyeSB7CiAgICAgICAgICAgIE15U3FsQ2xpZW50IGMgPSBu\nZXcgTXlTcWxDbGllbnQoYXJnc1syXSwgYXJnc1szXSwgYXJnc1s0XSk7CiAg\nICAgICAgICAgIGMud3JpdGVTYW1lRW50cnlCYXRjaChzYi50b1N0cmluZygp\nLmdldEJ5dGVzKCksIEludGVnZXIucGFyc2VJbnQoYXJnc1swXSkpOwogICAg\nICAgICAgICBjLndyaXRlU2FtZUVudHJ5KHNiLnRvU3RyaW5nKCkuZ2V0Qnl0\nZXMoKSwgSW50ZWdlci5wYXJzZUludChhcmdzWzBdKSk7CiAgICAgICAgICAg\nIGMuY2xvc2VIYW5kbGUoKTsKICAgICAgICB9IGNhdGNoIChOdW1iZXJGb3Jt\nYXRFeGNlcHRpb24gZSkgewogICAgICAgICAgICBlLnByaW50U3RhY2tUcmFj\nZSgpOwogICAgICAgIH0gY2F0Y2ggKEludGVycnVwdGVkRXhjZXB0aW9uIGUp\nIHsKICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTsKICAgICAgICB9\nIGNhdGNoIChLZWVwZXJFeGNlcHRpb24gZSkgewogICAgICAgICAgICBlLnBy\naW50U3RhY2tUcmFjZSgpOwogICAgICAgIH0KCiAgICB9CgogICAgLyoqCiAg\nICAgKiAJQWRkcyAgZGF0YSBlbnRyeSB0byB0aGUgREIKICAgICAqIAlAcGFy\nYW0gZGF0YSAJdGhlIGVudHJ5IHRvIGJlIHdyaXR0ZW4sIGdpdmVuIGFzIGEg\nYnl0ZSBhcnJheQogICAgICogCUBwYXJhbSB0aW1lcwl0aGUgbnVtYmVyIG9m\nIHRpbWVzIHRoZSBlbnRyeSBzaG91bGQgYmUgd3JpdHRlbiBvbiB0aGUgREIJ\nKi8KICAgIHZvaWQgd3JpdGVTYW1lRW50cnlCYXRjaChieXRlW10gZGF0YSwg\naW50IHRpbWVzKSB0aHJvd3MgSW50ZXJydXB0ZWRFeGNlcHRpb24sIFNRTEV4\nY2VwdGlvbiB7CiAgICAgICAgc3RhcnQgPSBTeXN0ZW0uY3VycmVudFRpbWVN\naWxsaXMoKTsKICAgICAgICBpbnQgY291bnQgPSB0aW1lczsKICAgICAgICBT\ndHJpbmcgY29udGVudCA9IG5ldyBTdHJpbmcoZGF0YSk7CiAgICAgICAgU3lz\ndGVtLm91dC5wcmludGxuKCJEYXRhOiAiICsgY29udGVudCArICIsICIgKyBk\nYXRhLmxlbmd0aCk7CiAgICAgICAgd2hpbGUoY291bnQtLSA+IDApIHsKICAg\nICAgICAgICAgc3RtdC5hZGRCYXRjaCgiaW5zZXJ0IGludG8gZGF0YShjb250\nZW50KSB2YWx1ZXMoXCIiICsgY29udGVudCArICJcIik7Iik7CiAgICAgICAg\nfQogICAgICAgIExPRy5pbmZvKCJGaW5pc2hlZCB3cml0aW5nIGJhdGNoIFNR\nTCBjb21tYW5kIGluIG1zOiAiICsgKFN5c3RlbS5jdXJyZW50VGltZU1pbGxp\ncygpIC0gc3RhcnQpKTsKICAgICAgICBzdGFydCA9IFN5c3RlbS5jdXJyZW50\nVGltZU1pbGxpcygpOwogICAgICAgIHN0bXQuZXhlY3V0ZUJhdGNoKCk7CiAg\nICAgICAgU3lzdGVtLm91dC5wcmludGxuKCJGaW5pc2hlZCAiICsgdGltZXMg\nKyAiIHdyaXRlcyBpbiBtczogIiArIChTeXN0ZW0uY3VycmVudFRpbWVNaWxs\naXMoKSAtIHN0YXJ0KSk7CiAgICAgICAgTE9HLmluZm8oIkVuZGVkIGNvbXB1\ndGF0aW9uIik7CiAgICB9CgogICAgdm9pZCB3cml0ZVNhbWVFbnRyeShieXRl\nW10gZGF0YSwgaW50IHRpbWVzKSB0aHJvd3MgSW50ZXJydXB0ZWRFeGNlcHRp\nb24sIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgc3RhcnQgPSBTeXN0ZW0uY3Vy\ncmVudFRpbWVNaWxsaXMoKTsKICAgICAgICBpbnQgY291bnQgPSB0aW1lczsK\nICAgICAgICBTdHJpbmcgY29udGVudCA9IG5ldyBTdHJpbmcoZGF0YSk7CiAg\nICAgICAgU3lzdGVtLm91dC5wcmludGxuKCJEYXRhOiAiICsgY29udGVudCAr\nICIsICIgKyBkYXRhLmxlbmd0aCk7CiAgICAgICAgd2hpbGUoY291bnQtLSA+\nIDApIHsKICAgICAgICAgICAgc3RtdC5leGVjdXRlVXBkYXRlKCJpbnNlcnQg\naW50byBkYXRhKGNvbnRlbnQpIHZhbHVlcyhcIiIgKyBjb250ZW50ICsgIlwi\nKTsiKTsKICAgICAgICB9CiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKCJG\naW5pc2hlZCAiICsgdGltZXMgKyAiIHdyaXRlcyBpbiBtczogIiArIChTeXN0\nZW0uY3VycmVudFRpbWVNaWxsaXMoKSAtIHN0YXJ0KSk7CiAgICAgICAgTE9H\nLmluZm8oIkVuZGVkIGNvbXB1dGF0aW9uIik7CiAgICB9Cgp9Cg==\n","encoding":"base64"}

