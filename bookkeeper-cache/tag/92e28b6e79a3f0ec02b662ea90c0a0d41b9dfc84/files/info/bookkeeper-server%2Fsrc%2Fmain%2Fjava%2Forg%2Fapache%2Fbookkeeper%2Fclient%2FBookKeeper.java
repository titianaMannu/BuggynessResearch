{"sha":"5bb37c3c21838f1d7e58c04c1e22894a4b27f271","node_id":"MDQ6QmxvYjE1NzU5NTY6NWJiMzdjM2MyMTgzOGYxZDdlNThjMDRjMWUyMjg5NGE0YjI3ZjI3MQ==","size":18847,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/5bb37c3c21838f1d7e58c04c1e22894a4b27f271","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY2xpZW50OwoKLyoKICoK\nICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9u\nIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vu\nc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlzdHJp\nYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRp\nb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNG\nIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNo\nZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7IHlv\ndSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2UK\nICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBv\nZiB0aGUgTGljZW5zZSBhdAogKgogKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9y\nZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQg\nYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsCiAq\nIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRp\nc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhPVVQgV0FS\nUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBlaXRoZXIg\nZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUK\nICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFu\nZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICoKICovCgpp\nbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5j\nb25jdXJyZW50LkV4ZWN1dG9yczsKCmltcG9ydCBvcmcuYXBhY2hlLmJvb2tr\nZWVwZXIubWV0YS5MZWRnZXJNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5i\nb29ra2VlcGVyLm1ldGEuTGVkZ2VyTWFuYWdlckZhY3Rvcnk7CmltcG9ydCBv\ncmcuYXBhY2hlLmJvb2trZWVwZXIuY29uZi5DbGllbnRDb25maWd1cmF0aW9u\nOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNsaWVudC5Bc3luY0Nh\nbGxiYWNrLkNyZWF0ZUNhbGxiYWNrOwppbXBvcnQgb3JnLmFwYWNoZS5ib29r\na2VlcGVyLmNsaWVudC5Bc3luY0NhbGxiYWNrLkRlbGV0ZUNhbGxiYWNrOwpp\nbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNsaWVudC5Bc3luY0NhbGxi\nYWNrLk9wZW5DYWxsYmFjazsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBl\nci5jbGllbnQuQktFeGNlcHRpb24uQ29kZTsKaW1wb3J0IG9yZy5hcGFjaGUu\nYm9va2tlZXBlci5wcm90by5Cb29raWVDbGllbnQ7CmltcG9ydCBvcmcuYXBh\nY2hlLmJvb2trZWVwZXIudXRpbC5PcmRlcmVkU2FmZUV4ZWN1dG9yOwppbXBv\ncnQgb3JnLnNsZjRqLkxvZ2dlcjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJG\nYWN0b3J5OwppbXBvcnQgb3JnLmFwYWNoZS56b29rZWVwZXIuS2VlcGVyRXhj\nZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS56b29rZWVwZXIuV2F0Y2hlZEV2\nZW50OwppbXBvcnQgb3JnLmFwYWNoZS56b29rZWVwZXIuV2F0Y2hlcjsKaW1w\nb3J0IG9yZy5hcGFjaGUuem9va2VlcGVyLlpvb0tlZXBlcjsKaW1wb3J0IG9y\nZy5qYm9zcy5uZXR0eS5jaGFubmVsLnNvY2tldC5DbGllbnRTb2NrZXRDaGFu\nbmVsRmFjdG9yeTsKaW1wb3J0IG9yZy5qYm9zcy5uZXR0eS5jaGFubmVsLnNv\nY2tldC5uaW8uTmlvQ2xpZW50U29ja2V0Q2hhbm5lbEZhY3Rvcnk7CgovKioK\nICogQm9va0tlZXBlciBjbGllbnQuIFdlIGFzc3VtZSB0aGVyZSBpcyBvbmUg\nc2luZ2xlIHdyaXRlciB0byBhIGxlZGdlciBhdCBhbnkKICogdGltZS4KICoK\nICogVGhlcmUgYXJlIGZvdXIgcG9zc2libGUgb3BlcmF0aW9uczogc3RhcnQg\nYSBuZXcgbGVkZ2VyLCB3cml0ZSB0byBhIGxlZGdlciwKICogcmVhZCBmcm9t\nIGEgbGVkZ2VyIGFuZCBkZWxldGUgYSBsZWRnZXIuCiAqCiAqIFRoZSBleGNl\ncHRpb25zIHJlc3VsdGluZyBmcm9tIHN5bmNocm9ub3VzIGNhbGxzIGFuZCBl\ncnJvciBjb2RlIHJlc3VsdGluZyBmcm9tCiAqIGFzeW5jaHJvbm91cyBjYWxs\ncyBjYW4gYmUgZm91bmQgaW4gdGhlIGNsYXNzIHtAbGluayBCS0V4Y2VwdGlv\nbn0uCiAqCiAqCiAqLwoKcHVibGljIGNsYXNzIEJvb2tLZWVwZXIgewoKICAg\nIHN0YXRpYyBmaW5hbCBMb2dnZXIgTE9HID0gTG9nZ2VyRmFjdG9yeS5nZXRM\nb2dnZXIoQm9va0tlZXBlci5jbGFzcyk7CgogICAgWm9vS2VlcGVyIHprID0g\nbnVsbDsKICAgIC8vIHdoZXRoZXIgdGhlIHprIGhhbmRsZSBpcyBvbmUgd2Ug\nY3JlYXRlZCwgb3IgaXMgb3duZWQgYnkgd2hvZXZlcgogICAgLy8gaW5zdGFu\ndGlhdGVkIHVzCiAgICBib29sZWFuIG93blpLSGFuZGxlID0gZmFsc2U7Cgog\nICAgQ2xpZW50U29ja2V0Q2hhbm5lbEZhY3RvcnkgY2hhbm5lbEZhY3Rvcnk7\nCiAgICAvLyB3aGV0aGVyIHRoZSBzb2NrZXQgZmFjdG9yeSBpcyBvbmUgd2Ug\nY3JlYXRlZCwgb3IgaXMgb3duZWQgYnkgd2hvZXZlcgogICAgLy8gaW5zdGFu\ndGlhdGVkIHVzCiAgICBib29sZWFuIG93bkNoYW5uZWxGYWN0b3J5ID0gZmFs\nc2U7CgogICAgQm9va2llQ2xpZW50IGJvb2tpZUNsaWVudDsKICAgIEJvb2tp\nZVdhdGNoZXIgYm9va2llV2F0Y2hlcjsKCiAgICBPcmRlcmVkU2FmZUV4ZWN1\ndG9yIGNhbGxiYWNrV29ya2VyID0gbmV3IE9yZGVyZWRTYWZlRXhlY3V0b3Io\nUnVudGltZQogICAgICAgICAgICAuZ2V0UnVudGltZSgpLmF2YWlsYWJsZVBy\nb2Nlc3NvcnMoKSk7CiAgICBPcmRlcmVkU2FmZUV4ZWN1dG9yIG1haW5Xb3Jr\nZXJQb29sID0gbmV3IE9yZGVyZWRTYWZlRXhlY3V0b3IoUnVudGltZQogICAg\nICAgICAgICAuZ2V0UnVudGltZSgpLmF2YWlsYWJsZVByb2Nlc3NvcnMoKSk7\nCgogICAgLy8gTGVkZ2VyIG1hbmFnZXIgcmVzcG9uc2libGUgZm9yIGhvdyB0\nbyBzdG9yZSBsZWRnZXIgbWV0YSBkYXRhCiAgICBmaW5hbCBMZWRnZXJNYW5h\nZ2VyIGxlZGdlck1hbmFnZXI7CgogICAgQ2xpZW50Q29uZmlndXJhdGlvbiBj\nb25mOwoKICAgIC8qKgogICAgICogQ3JlYXRlIGEgYm9va2tlZXBlciBjbGll\nbnQuIEEgem9va2VlcGVyIGNsaWVudCBhbmQgYSBjbGllbnQgc29ja2V0IGZh\nY3RvcnkKICAgICAqIHdpbGwgYmUgaW5zdGFudGlhdGVkIGFzIHBhcnQgb2Yg\ndGhpcyBjb25zdHJ1Y3Rvci4KICAgICAqCiAgICAgKiBAcGFyYW0gc2VydmVy\ncwogICAgICogICAgICAgICAgQSBsaXN0IG9mIG9uZSBvZiBtb3JlIHNlcnZl\ncnMgb24gd2hpY2ggem9va2VlcGVyIGlzIHJ1bm5pbmcuIFRoZQogICAgICog\nICAgICAgICAgY2xpZW50IGFzc3VtZXMgdGhhdCB0aGUgcnVubmluZyBib29r\naWVzIGhhdmUgYmVlbiByZWdpc3RlcmVkIHdpdGgKICAgICAqICAgICAgICAg\nIHpvb2tlZXBlciB1bmRlciB0aGUgcGF0aAogICAgICogICAgICAgICAge0Bs\naW5rIEJvb2tpZVdhdGNoZXIjQk9PS0lFX1JFR0lTVFJBVElPTl9QQVRIfQog\nICAgICogQHRocm93cyBJT0V4Y2VwdGlvbgogICAgICogQHRocm93cyBJbnRl\ncnJ1cHRlZEV4Y2VwdGlvbgogICAgICogQHRocm93cyBLZWVwZXJFeGNlcHRp\nb24KICAgICAqLwogICAgcHVibGljIEJvb2tLZWVwZXIoU3RyaW5nIHNlcnZl\ncnMpIHRocm93cyBJT0V4Y2VwdGlvbiwgSW50ZXJydXB0ZWRFeGNlcHRpb24s\nCiAgICAgICAgS2VlcGVyRXhjZXB0aW9uIHsKICAgICAgICB0aGlzKG5ldyBD\nbGllbnRDb25maWd1cmF0aW9uKCkuc2V0WmtTZXJ2ZXJzKHNlcnZlcnMpKTsK\nICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhIGJvb2trZWVwZXIgY2xp\nZW50IHVzaW5nIGEgY29uZmlndXJhdGlvbiBvYmplY3QuCiAgICAgKiBBIHpv\nb2tlZXBlciBjbGllbnQgYW5kIGEgY2xpZW50IHNvY2tldCBmYWN0b3J5IHdp\nbGwgYmUgCiAgICAgKiBpbnN0YW50aWF0ZWQgYXMgcGFydCBvZiB0aGlzIGNv\nbnN0cnVjdG9yLgogICAgICoKICAgICAqIEBwYXJhbSBjb25mCiAgICAgKiAg\nICAgICAgICBDbGllbnQgQ29uZmlndXJhdGlvbiBvYmplY3QKICAgICAqIEB0\naHJvd3MgSU9FeGNlcHRpb24KICAgICAqIEB0aHJvd3MgSW50ZXJydXB0ZWRF\neGNlcHRpb24KICAgICAqIEB0aHJvd3MgS2VlcGVyRXhjZXB0aW9uCiAgICAg\nKi8KICAgIHB1YmxpYyBCb29rS2VlcGVyKENsaWVudENvbmZpZ3VyYXRpb24g\nY29uZikgdGhyb3dzIElPRXhjZXB0aW9uLCBJbnRlcnJ1cHRlZEV4Y2VwdGlv\nbiwKICAgICAgICBLZWVwZXJFeGNlcHRpb24gewogICAgICAgIHRoaXMoY29u\nZiwgbmV3IFpvb0tlZXBlcihjb25mLmdldFprU2VydmVycygpLCBjb25mLmdl\ndFprVGltZW91dCgpLCBuZXcgV2F0Y2hlcigpIHsKICAgICAgICAgICAgQE92\nZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIHByb2Nlc3MoV2F0Y2hl\nZEV2ZW50IGV2ZW50KSB7CiAgICAgICAgICAgICAgICAvLyBUT0RPOiBoYW5k\nbGUgc2Vzc2lvbiBkaXNjb25uZWN0cyBhbmQgZXhwaXJlcwogICAgICAgICAg\nICAgICAgaWYgKExPRy5pc0RlYnVnRW5hYmxlZCgpKSB7CiAgICAgICAgICAg\nICAgICAgICAgTE9HLmRlYnVnKCJQcm9jZXNzOiAiICsgZXZlbnQuZ2V0VHlw\nZSgpICsgIiAiICsgZXZlbnQuZ2V0UGF0aCgpKTsKICAgICAgICAgICAgICAg\nIH0KICAgICAgICAgICAgfQogICAgICAgIH0pLCBuZXcgTmlvQ2xpZW50U29j\na2V0Q2hhbm5lbEZhY3RvcnkoRXhlY3V0b3JzLm5ld0NhY2hlZFRocmVhZFBv\nb2woKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIEV4ZWN1dG9ycy5uZXdDYWNoZWRUaHJlYWRQb29sKCkpKTsKCiAg\nICAgICAgb3duWktIYW5kbGUgPSB0cnVlOwogICAgICAgIG93bkNoYW5uZWxG\nYWN0b3J5ID0gdHJ1ZTsKICAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUg\nYSBib29ra2VlcGVyIGNsaWVudCBidXQgdXNlIHRoZSBwYXNzZWQgaW4gem9v\na2VlcGVyIGNsaWVudCBpbnN0ZWFkCiAgICAgKiBvZiBpbnN0YW50aWF0aW5n\nIG9uZS4KICAgICAqCiAgICAgKiBAcGFyYW0gY29uZgogICAgICogICAgICAg\nICAgQ2xpZW50IENvbmZpZ3VyYXRpb24gb2JqZWN0CiAgICAgKiAgICAgICAg\nICB7QGxpbmsgQ2xpZW50Q29uZmlndXJhdGlvbn0KICAgICAqIEBwYXJhbSB6\nawogICAgICogICAgICAgICAgWm9va2VlcGVyIGNsaWVudCBpbnN0YW5jZSBj\nb25uZWN0ZWQgdG8gdGhlIHpvb2tlZXBlciB3aXRoIHdoaWNoCiAgICAgKiAg\nICAgICAgICB0aGUgYm9va2llcyBoYXZlIHJlZ2lzdGVyZWQKICAgICAqIEB0\naHJvd3MgSU9FeGNlcHRpb24KICAgICAqIEB0aHJvd3MgSW50ZXJydXB0ZWRF\neGNlcHRpb24KICAgICAqIEB0aHJvd3MgS2VlcGVyRXhjZXB0aW9uCiAgICAg\nKi8KICAgIHB1YmxpYyBCb29rS2VlcGVyKENsaWVudENvbmZpZ3VyYXRpb24g\nY29uZiwgWm9vS2VlcGVyIHprKQogICAgICAgIHRocm93cyBJT0V4Y2VwdGlv\nbiwgSW50ZXJydXB0ZWRFeGNlcHRpb24sIEtlZXBlckV4Y2VwdGlvbiB7CiAg\nICAgICAgdGhpcyhjb25mLCB6aywgbmV3IE5pb0NsaWVudFNvY2tldENoYW5u\nZWxGYWN0b3J5KEV4ZWN1dG9ycy5uZXdDYWNoZWRUaHJlYWRQb29sKCksCiAg\nICAgICAgICAgICAgICBFeGVjdXRvcnMubmV3Q2FjaGVkVGhyZWFkUG9vbCgp\nKSk7CiAgICAgICAgb3duQ2hhbm5lbEZhY3RvcnkgPSB0cnVlOwogICAgfQoK\nICAgIC8qKgogICAgICogQ3JlYXRlIGEgYm9va2tlZXBlciBjbGllbnQgYnV0\nIHVzZSB0aGUgcGFzc2VkIGluIHpvb2tlZXBlciBjbGllbnQgYW5kCiAgICAg\nKiBjbGllbnQgc29ja2V0IGNoYW5uZWwgZmFjdG9yeSBpbnN0ZWFkIG9mIGlu\nc3RhbnRpYXRpbmcgdGhvc2UuCiAgICAgKgogICAgICogQHBhcmFtIGNvbmYK\nICAgICAqICAgICAgICAgIENsaWVudCBDb25maWd1cmF0aW9uIE9iamVjdAog\nICAgICogICAgICAgICAge0BsaW5rIENsaWVudENvbmZpZ3VyYXRpb259CiAg\nICAgKiBAcGFyYW0gemsKICAgICAqICAgICAgICAgIFpvb2tlZXBlciBjbGll\nbnQgaW5zdGFuY2UgY29ubmVjdGVkIHRvIHRoZSB6b29rZWVwZXIgd2l0aCB3\naGljaAogICAgICogICAgICAgICAgdGhlIGJvb2tpZXMgaGF2ZSByZWdpc3Rl\ncmVkCiAgICAgKiBAcGFyYW0gY2hhbm5lbEZhY3RvcnkKICAgICAqICAgICAg\nICAgIEEgZmFjdG9yeSB0aGF0IHdpbGwgYmUgdXNlZCB0byBjcmVhdGUgY29u\nbmVjdGlvbnMgdG8gdGhlIGJvb2tpZXMKICAgICAqIEB0aHJvd3MgSU9FeGNl\ncHRpb24KICAgICAqIEB0aHJvd3MgSW50ZXJydXB0ZWRFeGNlcHRpb24KICAg\nICAqIEB0aHJvd3MgS2VlcGVyRXhjZXB0aW9uCiAgICAgKi8KICAgIHB1Ymxp\nYyBCb29rS2VlcGVyKENsaWVudENvbmZpZ3VyYXRpb24gY29uZiwgWm9vS2Vl\ncGVyIHprLCBDbGllbnRTb2NrZXRDaGFubmVsRmFjdG9yeSBjaGFubmVsRmFj\ndG9yeSkKICAgICAgICAgICAgdGhyb3dzIElPRXhjZXB0aW9uLCBJbnRlcnJ1\ncHRlZEV4Y2VwdGlvbiwgS2VlcGVyRXhjZXB0aW9uIHsKICAgICAgICBpZiAo\nemsgPT0gbnVsbCB8fCBjaGFubmVsRmFjdG9yeSA9PSBudWxsKSB7CiAgICAg\nICAgICAgIHRocm93IG5ldyBOdWxsUG9pbnRlckV4Y2VwdGlvbigpOwogICAg\nICAgIH0KICAgICAgICB0aGlzLmNvbmYgPSBjb25mOwogICAgICAgIHRoaXMu\nemsgPSB6azsKICAgICAgICB0aGlzLmNoYW5uZWxGYWN0b3J5ID0gY2hhbm5l\nbEZhY3Rvcnk7CiAgICAgICAgYm9va2llV2F0Y2hlciA9IG5ldyBCb29raWVX\nYXRjaGVyKHRoaXMpOwogICAgICAgIGJvb2tpZVdhdGNoZXIucmVhZEJvb2tp\nZXNCbG9ja2luZygpOwogICAgICAgIGJvb2tpZUNsaWVudCA9IG5ldyBCb29r\naWVDbGllbnQoY29uZiwgY2hhbm5lbEZhY3RvcnksIG1haW5Xb3JrZXJQb29s\nKTsKICAgICAgICAvLyBpbnRpYWxpemUgbGVkZ2VyIG1ldGEgbWFuYWdlcgog\nICAgICAgIGxlZGdlck1hbmFnZXIgPSBMZWRnZXJNYW5hZ2VyRmFjdG9yeS5u\nZXdMZWRnZXJNYW5hZ2VyKGNvbmYsIHprKTsKICAgIH0KCiAgICBMZWRnZXJN\nYW5hZ2VyIGdldExlZGdlck1hbmFnZXIoKSB7CiAgICAgICAgcmV0dXJuIGxl\nZGdlck1hbmFnZXI7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGVyZSBhcmUg\nMiBkaWdlc3QgdHlwZXMgdGhhdCBjYW4gYmUgdXNlZCBmb3IgdmVyaWZpY2F0\naW9uLiBUaGUgQ1JDMzIgaXMKICAgICAqIGNoZWFwIHRvIGNvbXB1dGUgYnV0\nIGRvZXMgbm90IHByb3RlY3QgYWdhaW5zdCBieXphbnRpbmUgYm9va2llcyAo\naS5lLiwgYQogICAgICogYm9va2llIG1pZ2h0IHJlcG9ydCBmYWtlIGJ5dGVz\nIGFuZCBhIG1hdGNoaW5nIENSQzMyKS4gVGhlIE1BQyBjb2RlIGlzIG1vcmUK\nICAgICAqIGV4cGVuc2l2ZSB0byBjb21wdXRlLCBidXQgaXMgcHJvdGVjdGVk\nIGJ5IGEgcGFzc3dvcmQsIGkuZS4sIGEgYm9va2llIGNhbid0CiAgICAgKiBy\nZXBvcnQgZmFrZSBieXRlcyB3aXRoIGEgbWF0aGNoaW5nIE1BQyB1bmxlc3Mg\naXQga25vd3MgdGhlIHBhc3N3b3JkCiAgICAgKi8KICAgIHB1YmxpYyBlbnVt\nIERpZ2VzdFR5cGUgewogICAgICAgIE1BQywgQ1JDMzIKICAgIH07CgogICAg\nWm9vS2VlcGVyIGdldFprSGFuZGxlKCkgewogICAgICAgIHJldHVybiB6azsK\nICAgIH0KCiAgICBwcm90ZWN0ZWQgQ2xpZW50Q29uZmlndXJhdGlvbiBnZXRD\nb25mKCkgewogICAgICAgIHJldHVybiBjb25mOwogICAgfQoKICAgIC8qKgog\nICAgICogR2V0IHRoZSBCb29raWVDbGllbnQsIGN1cnJlbnRseSB1c2VkIGZv\nciBkb2luZyBib29raWUgcmVjb3ZlcnkuCiAgICAgKgogICAgICogQHJldHVy\nbiBCb29raWVDbGllbnQgZm9yIHRoZSBCb29rS2VlcGVyIGluc3RhbmNlLgog\nICAgICovCiAgICBCb29raWVDbGllbnQgZ2V0Qm9va2llQ2xpZW50KCkgewog\nICAgICAgIHJldHVybiBib29raWVDbGllbnQ7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBDcmVhdGVzIGEgbmV3IGxlZGdlciBhc3luY2hyb25vdXNseS4gVG8g\nY3JlYXRlIGEgbGVkZ2VyLCB3ZSBuZWVkIHRvIHNwZWNpZnkKICAgICAqIHRo\nZSBlbnNlbWJsZSBzaXplLCB0aGUgcXVvcnVtIHNpemUsIHRoZSBkaWdlc3Qg\ndHlwZSwgYSBwYXNzd29yZCwgYSBjYWxsYmFjawogICAgICogaW1wbGVtZW50\nYXRpb24sIGFuZCBhbiBvcHRpb25hbCBjb250cm9sIG9iamVjdC4gVGhlIGVu\nc2VtYmxlIHNpemUgaXMgaG93CiAgICAgKiBtYW55IGJvb2tpZXMgdGhlIGVu\ndHJpZXMgc2hvdWxkIGJlIHN0cmlwZWQgYW1vbmcgYW5kIHRoZSBxdW9ydW0g\nc2l6ZSBpcyB0aGUKICAgICAqIGRlZ3JlZSBvZiByZXBsaWNhdGlvbiBvZiBl\nYWNoIGVudHJ5LiBUaGUgZGlnZXN0IHR5cGUgaXMgZWl0aGVyIGEgTUFDIG9y\nIGEKICAgICAqIENSQy4gTm90ZSB0aGF0IHRoZSBDUkMgb3B0aW9uIGlzIG5v\ndCBhYmxlIHRvIHByb3RlY3QgYSBjbGllbnQgYWdhaW5zdCBhCiAgICAgKiBi\nb29raWUgdGhhdCByZXBsYWNlcyBhbiBlbnRyeS4gVGhlIHBhc3N3b3JkIGlz\nIHVzZWQgbm90IG9ubHkgdG8KICAgICAqIGF1dGhlbnRpY2F0ZSBhY2Nlc3Mg\ndG8gYSBsZWRnZXIsIGJ1dCBhbHNvIHRvIHZlcmlmeSBlbnRyaWVzIGluIGxl\nZGdlcnMuCiAgICAgKgogICAgICogQHBhcmFtIGVuc1NpemUKICAgICAqICAg\nICAgICAgIGVuc2VtYmxlIHNpemUKICAgICAqIEBwYXJhbSBxU2l6ZQogICAg\nICogICAgICAgICAgcXVvcnVtIHNpemUKICAgICAqIEBwYXJhbSBkaWdlc3RU\neXBlCiAgICAgKiAgICAgICAgICBkaWdlc3QgdHlwZSwgZWl0aGVyIE1BQyBv\nciBDUkMzMgogICAgICogQHBhcmFtIHBhc3N3ZAogICAgICogICAgICAgICAg\ncGFzc3dvcmQKICAgICAqIEBwYXJhbSBjYgogICAgICogICAgICAgICAgY3Jl\nYXRlQ2FsbGJhY2sgaW1wbGVtZW50YXRpb24KICAgICAqIEBwYXJhbSBjdHgK\nICAgICAqICAgICAgICAgIG9wdGlvbmFsIGNvbnRyb2wgb2JqZWN0CiAgICAg\nKi8KICAgIHB1YmxpYyB2b2lkIGFzeW5jQ3JlYXRlTGVkZ2VyKGludCBlbnNT\naXplLCBpbnQgcVNpemUsIERpZ2VzdFR5cGUgZGlnZXN0VHlwZSwKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5dGVbXSBwYXNzd2QsIENy\nZWF0ZUNhbGxiYWNrIGNiLCBPYmplY3QgY3R4KSB7CgogICAgICAgIG5ldyBM\nZWRnZXJDcmVhdGVPcCh0aGlzLCBlbnNTaXplLCBxU2l6ZSwgZGlnZXN0VHlw\nZSwgcGFzc3dkLCBjYiwgY3R4KQogICAgICAgIC5pbml0aWF0ZSgpOwoKICAg\nIH0KCgogICAgLyoqCiAgICAgKiBDcmVhdGVzIGEgbmV3IGxlZGdlci4gRGVm\nYXVsdCBvZiAzIHNlcnZlcnMsIGFuZCBxdW9ydW0gb2YgMiBzZXJ2ZXJzLgog\nICAgICoKICAgICAqIEBwYXJhbSBkaWdlc3RUeXBlCiAgICAgKiAgICAgICAg\nICBkaWdlc3QgdHlwZSwgZWl0aGVyIE1BQyBvciBDUkMzMgogICAgICogQHBh\ncmFtIHBhc3N3ZAogICAgICogICAgICAgICAgcGFzc3dvcmQKICAgICAqIEBy\nZXR1cm4gYSBoYW5kbGUgdG8gdGhlIG5ld2x5IGNyZWF0ZWQgbGVkZ2VyCiAg\nICAgKiBAdGhyb3dzIEludGVycnVwdGVkRXhjZXB0aW9uCiAgICAgKiBAdGhy\nb3dzIEJLRXhjZXB0aW9uCiAgICAgKi8KICAgIHB1YmxpYyBMZWRnZXJIYW5k\nbGUgY3JlYXRlTGVkZ2VyKERpZ2VzdFR5cGUgZGlnZXN0VHlwZSwgYnl0ZSBw\nYXNzd2RbXSkKICAgICAgICAgICAgdGhyb3dzIEJLRXhjZXB0aW9uLCBJbnRl\ncnJ1cHRlZEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGNyZWF0ZUxlZGdl\ncigzLCAyLCBkaWdlc3RUeXBlLCBwYXNzd2QpOwogICAgfQoKICAgIC8qKgog\nICAgICogU3luY2hyb25vdXMgY2FsbCB0byBjcmVhdGUgbGVkZ2VyLiBQYXJh\nbWV0ZXJzIG1hdGNoIHRob3NlIG9mCiAgICAgKiB7QGxpbmsgI2FzeW5jQ3Jl\nYXRlTGVkZ2VyKGludCwgaW50LCBEaWdlc3RUeXBlLCBieXRlW10sIAogICAg\nICogICAgICAgICAgICAgICAgICAgICAgICAgICBBc3luY0NhbGxiYWNrLkNy\nZWF0ZUNhbGxiYWNrLCBPYmplY3QpfQogICAgICoKICAgICAqIEBwYXJhbSBl\nbnNTaXplCiAgICAgKiBAcGFyYW0gcVNpemUKICAgICAqIEBwYXJhbSBkaWdl\nc3RUeXBlCiAgICAgKiBAcGFyYW0gcGFzc3dkCiAgICAgKiBAcmV0dXJuIGEg\naGFuZGxlIHRvIHRoZSBuZXdseSBjcmVhdGVkIGxlZGdlcgogICAgICogQHRo\ncm93cyBJbnRlcnJ1cHRlZEV4Y2VwdGlvbgogICAgICogQHRocm93cyBCS0V4\nY2VwdGlvbgogICAgICovCiAgICBwdWJsaWMgTGVkZ2VySGFuZGxlIGNyZWF0\nZUxlZGdlcihpbnQgZW5zU2l6ZSwgaW50IHFTaXplLAogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgRGlnZXN0VHlwZSBkaWdlc3RUeXBl\nLCBieXRlIHBhc3N3ZFtdKSAKICAgICAgICAgICAgdGhyb3dzIEludGVycnVw\ndGVkRXhjZXB0aW9uLCBCS0V4Y2VwdGlvbiB7CiAgICAgICAgU3luY0NvdW50\nZXIgY291bnRlciA9IG5ldyBTeW5jQ291bnRlcigpOwogICAgICAgIGNvdW50\nZXIuaW5jKCk7CiAgICAgICAgLyoKICAgICAgICAgKiBDYWxscyBhc3luY2hy\nb25vdXMgdmVyc2lvbgogICAgICAgICAqLwogICAgICAgIGFzeW5jQ3JlYXRl\nTGVkZ2VyKGVuc1NpemUsIHFTaXplLCBkaWdlc3RUeXBlLCBwYXNzd2QsIAog\nICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBTeW5jQ3JlYXRlQ2FsbGJh\nY2soKSwgY291bnRlcik7CgogICAgICAgIC8qCiAgICAgICAgICogV2FpdAog\nICAgICAgICAqLwogICAgICAgIGNvdW50ZXIuYmxvY2soMCk7CiAgICAgICAg\naWYgKGNvdW50ZXIuZ2V0TGgoKSA9PSBudWxsKSB7CiAgICAgICAgICAgIExP\nRy5lcnJvcigiWm9vS2VlcGVyIGVycm9yOiAiICsgY291bnRlci5nZXRyYygp\nKTsKICAgICAgICAgICAgdGhyb3cgQktFeGNlcHRpb24uY3JlYXRlKENvZGUu\nWktFeGNlcHRpb24pOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGNvdW50\nZXIuZ2V0TGgoKTsKICAgIH0KCiAgICAvKioKICAgICAqIE9wZW4gZXhpc3Rp\nbmcgbGVkZ2VyIGFzeW5jaHJvbm91c2x5IGZvciByZWFkaW5nLgogICAgICog\nCiAgICAgKiBPcGVuaW5nIGEgbGVkZ2VyIHdpdGggdGhpcyBtZXRob2QgaW52\nb2tlcyBmZW5jaW5nIGFuZCByZWNvdmVyeSBvbiB0aGUgbGVkZ2VyIAogICAg\nICogaWYgdGhlIGxlZGdlciBoYXMgbm90IGJlZW4gY2xvc2VkLiBGZW5jaW5n\nIHdpbGwgYmxvY2sgYWxsIG90aGVyIGNsaWVudHMgZnJvbSAKICAgICAqIHdy\naXRpbmcgdG8gdGhlIGxlZGdlci4gUmVjb3Zlcnkgd2lsbCBtYWtlIHN1cmUg\ndGhhdCB0aGUgbGVkZ2VyIGlzIGNsb3NlZCAKICAgICAqIGJlZm9yZSByZWFk\naW5nIGZyb20gaXQuIAogICAgICoKICAgICAqIFJlY292ZXJ5IGFsc28gbWFr\nZXMgc3VyZSB0aGF0IGFueSBlbnRyaWVzIHdoaWNoIHJlYWNoZWQgb25lIGJv\nb2tpZSwgYnV0IG5vdCBhIAogICAgICogcXVvcnVtLCB3aWxsIGJlIHJlcGxp\nY2F0ZWQgdG8gYSBxdW9ydW0gb2YgYm9va2llcy4gVGhpcyBvY2N1cnMgaW4g\nY2FzZXMgd2VyZQogICAgICogdGhlIHdyaXRlciBvZiBhIGxlZGdlciBjcmFz\naGVzIGFmdGVyIHNlbmRpbmcgYSB3cml0ZSByZXF1ZXN0IHRvIG9uZSBib29r\naWUgYnV0CiAgICAgKiBiZWZvcmUgYmVpbmcgYWJsZSB0byBzZW5kIGl0IHRv\nIHRoZSByZXN0IG9mIHRoZSBib29raWVzIGluIHRoZSBxdW9ydW0uIAogICAg\nICoKICAgICAqIElmIHRoZSBsZWRnZXIgaXMgYWxyZWFkeSBjbG9zZWQsIG5l\naXRoZXIgZmVuY2luZyBub3IgcmVjb3Zlcnkgd2lsbCBiZSBhcHBsaWVkLgog\nICAgICogCiAgICAgKiBAc2VlIExlZGdlckhhbmRsZSNhc3luY0Nsb3NlCiAg\nICAgKgogICAgICogQHBhcmFtIGxJZAogICAgICogICAgICAgICAgbGVkZ2Vy\nIGlkZW50aWZpZXIKICAgICAqIEBwYXJhbSBkaWdlc3RUeXBlCiAgICAgKiAg\nICAgICAgICBkaWdlc3QgdHlwZSwgZWl0aGVyIE1BQyBvciBDUkMzMgogICAg\nICogQHBhcmFtIHBhc3N3ZAogICAgICogICAgICAgICAgcGFzc3dvcmQKICAg\nICAqIEBwYXJhbSBjdHgKICAgICAqICAgICAgICAgIG9wdGlvbmFsIGNvbnRy\nb2wgb2JqZWN0CiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIGFzeW5jT3Blbkxl\nZGdlcihsb25nIGxJZCwgRGlnZXN0VHlwZSBkaWdlc3RUeXBlLCBieXRlIHBh\nc3N3ZFtdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9wZW5D\nYWxsYmFjayBjYiwgT2JqZWN0IGN0eCkgewogICAgICAgIG5ldyBMZWRnZXJP\ncGVuT3AodGhpcywgbElkLCBkaWdlc3RUeXBlLCBwYXNzd2QsIGNiLCBjdHgp\nLmluaXRpYXRlKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBPcGVuIGV4aXN0\naW5nIGxlZGdlciBhc3luY2hyb25vdXNseSBmb3IgcmVhZGluZywgYnV0IGl0\nIGRvZXMgbm90IHRyeSB0bwogICAgICogcmVjb3ZlciB0aGUgbGVkZ2VyIGlm\nIGl0IGlzIG5vdCB5ZXQgY2xvc2VkLiBUaGUgYXBwbGljYXRpb24gbmVlZHMg\ndG8gdXNlCiAgICAgKiBpdCBjYXJlZnVsbHksIHNpbmNlIHRoZSB3cml0ZXIg\nbWlnaHQgaGF2ZSBjcmFzaGVkIGFuZCBsZWRnZXIgd2lsbCByZW1haW4KICAg\nICAqIHVuc2VhbGVkIGZvcmV2ZXIgaWYgdGhlcmUgaXMgbm8gZXh0ZXJuYWwg\nbWVjaGFuaXNtIHRvIGRldGVjdCB0aGUgZmFpbHVyZQogICAgICogb2YgdGhl\nIHdyaXRlciBhbmQgdGhlIGxlZGdlciBpcyBub3Qgb3BlbiBpbiBhIHNhZmUg\nbWFubmVyLCBpbnZva2luZyB0aGUKICAgICAqIHJlY292ZXJ5IHByb2NlZHVy\nZS4KICAgICAqIAogICAgICogT3BlbmluZyBhIGxlZGdlciB3aXRob3V0IHJl\nY292ZXJ5IGRvZXMgbm90IGZlbmNlIHRoZSBsZWRnZXIuIEFzIHN1Y2gsIG90\naGVyCiAgICAgKiBjbGllbnRzIGNhbiBjb250aW51ZSB0byB3cml0ZSB0byB0\naGUgbGVkZ2VyLiAKICAgICAqCiAgICAgKiBUaGlzIG1ldGhvZCByZXR1cm5z\nIGEgcmVhZCBvbmx5IGxlZGdlciBoYW5kbGUuIEl0IHdpbGwgbm90IGJlIHBv\nc3NpYmxlIAogICAgICogdG8gYWRkIGVudHJpZXMgdG8gdGhlIGxlZGdlci4g\nQW55IGF0dGVtcHQgdG8gYWRkIGVudHJpZXMgd2lsbCB0aHJvdyBhbiAKICAg\nICAqIGV4Y2VwdGlvbi4KICAgICAqIAogICAgICogUmVhZHMgZnJvbSB0aGUg\ncmV0dXJuZWQgbGVkZ2VyIHdpbGwgb25seSBiZSBhYmxlIHRvIHJlYWQgZW50\ncmllcyB1cCB1bnRpbAogICAgICogdGhlIGxhc3RDb25maXJtZWRFbnRyeSBh\ndCB0aGUgcG9pbnQgaW4gdGltZSBhdCB3aGljaCB0aGUgbGVkZ2VyIHdhcyBv\ncGVuZWQuCiAgICAgKgogICAgICogQHBhcmFtIGxJZAogICAgICogICAgICAg\nICAgbGVkZ2VyIGlkZW50aWZpZXIKICAgICAqIEBwYXJhbSBkaWdlc3RUeXBl\nCiAgICAgKiAgICAgICAgICBkaWdlc3QgdHlwZSwgZWl0aGVyIE1BQyBvciBD\nUkMzMgogICAgICogQHBhcmFtIHBhc3N3ZAogICAgICogICAgICAgICAgcGFz\nc3dvcmQKICAgICAqIEBwYXJhbSBjdHgKICAgICAqICAgICAgICAgIG9wdGlv\nbmFsIGNvbnRyb2wgb2JqZWN0CiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIGFz\neW5jT3BlbkxlZGdlck5vUmVjb3ZlcnkobG9uZyBsSWQsIERpZ2VzdFR5cGUg\nZGlnZXN0VHlwZSwgYnl0ZSBwYXNzd2RbXSwKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgT3BlbkNhbGxiYWNrIGNiLCBPYmpl\nY3QgY3R4KSB7CiAgICAgICAgbmV3IExlZGdlck9wZW5PcCh0aGlzLCBsSWQs\nIGRpZ2VzdFR5cGUsIHBhc3N3ZCwgY2IsIGN0eCkuaW5pdGlhdGVXaXRob3V0\nUmVjb3ZlcnkoKTsKICAgIH0KCgogICAgLyoqCiAgICAgKiBTeW5jaHJvbm91\ncyBvcGVuIGxlZGdlciBjYWxsCiAgICAgKgogICAgICogQHNlZSAjYXN5bmNP\ncGVuTGVkZ2VyCiAgICAgKiBAcGFyYW0gbElkCiAgICAgKiAgICAgICAgICBs\nZWRnZXIgaWRlbnRpZmllcgogICAgICogQHBhcmFtIGRpZ2VzdFR5cGUKICAg\nICAqICAgICAgICAgIGRpZ2VzdCB0eXBlLCBlaXRoZXIgTUFDIG9yIENSQzMy\nCiAgICAgKiBAcGFyYW0gcGFzc3dkCiAgICAgKiAgICAgICAgICBwYXNzd29y\nZAogICAgICogQHJldHVybiBhIGhhbmRsZSB0byB0aGUgb3BlbiBsZWRnZXIK\nICAgICAqIEB0aHJvd3MgSW50ZXJydXB0ZWRFeGNlcHRpb24KICAgICAqIEB0\naHJvd3MgQktFeGNlcHRpb24KICAgICAqLwoKICAgIHB1YmxpYyBMZWRnZXJI\nYW5kbGUgb3BlbkxlZGdlcihsb25nIGxJZCwgRGlnZXN0VHlwZSBkaWdlc3RU\neXBlLCBieXRlIHBhc3N3ZFtdKQogICAgICAgICAgICB0aHJvd3MgQktFeGNl\ncHRpb24sIEludGVycnVwdGVkRXhjZXB0aW9uIHsKICAgICAgICBTeW5jQ291\nbnRlciBjb3VudGVyID0gbmV3IFN5bmNDb3VudGVyKCk7CiAgICAgICAgY291\nbnRlci5pbmMoKTsKCiAgICAgICAgLyoKICAgICAgICAgKiBDYWxscyBhc3lu\nYyBvcGVuIGxlZGdlcgogICAgICAgICAqLwogICAgICAgIGFzeW5jT3Blbkxl\nZGdlcihsSWQsIGRpZ2VzdFR5cGUsIHBhc3N3ZCwgbmV3IFN5bmNPcGVuQ2Fs\nbGJhY2soKSwgY291bnRlcik7CgogICAgICAgIC8qCiAgICAgICAgICogV2Fp\ndAogICAgICAgICAqLwogICAgICAgIGNvdW50ZXIuYmxvY2soMCk7CiAgICAg\nICAgaWYgKGNvdW50ZXIuZ2V0cmMoKSAhPSBCS0V4Y2VwdGlvbi5Db2RlLk9L\nKQogICAgICAgICAgICB0aHJvdyBCS0V4Y2VwdGlvbi5jcmVhdGUoY291bnRl\nci5nZXRyYygpKTsKCiAgICAgICAgcmV0dXJuIGNvdW50ZXIuZ2V0TGgoKTsK\nICAgIH0KCiAgICAvKioKICAgICAqIFN5bmNocm9ub3VzLCB1bnNhZmUgb3Bl\nbiBsZWRnZXIgY2FsbAogICAgICoKICAgICAqIEBzZWUgI2FzeW5jT3Blbkxl\nZGdlck5vUmVjb3ZlcnkKICAgICAqIEBwYXJhbSBsSWQKICAgICAqICAgICAg\nICAgIGxlZGdlciBpZGVudGlmaWVyCiAgICAgKiBAcGFyYW0gZGlnZXN0VHlw\nZQogICAgICogICAgICAgICAgZGlnZXN0IHR5cGUsIGVpdGhlciBNQUMgb3Ig\nQ1JDMzIKICAgICAqIEBwYXJhbSBwYXNzd2QKICAgICAqICAgICAgICAgIHBh\nc3N3b3JkCiAgICAgKiBAcmV0dXJuIGEgaGFuZGxlIHRvIHRoZSBvcGVuIGxl\nZGdlcgogICAgICogQHRocm93cyBJbnRlcnJ1cHRlZEV4Y2VwdGlvbgogICAg\nICogQHRocm93cyBCS0V4Y2VwdGlvbgogICAgICovCgogICAgcHVibGljIExl\nZGdlckhhbmRsZSBvcGVuTGVkZ2VyTm9SZWNvdmVyeShsb25nIGxJZCwgRGln\nZXN0VHlwZSBkaWdlc3RUeXBlLCBieXRlIHBhc3N3ZFtdKQogICAgICAgICAg\nICB0aHJvd3MgQktFeGNlcHRpb24sIEludGVycnVwdGVkRXhjZXB0aW9uIHsK\nICAgICAgICBTeW5jQ291bnRlciBjb3VudGVyID0gbmV3IFN5bmNDb3VudGVy\nKCk7CiAgICAgICAgY291bnRlci5pbmMoKTsKCiAgICAgICAgLyoKICAgICAg\nICAgKiBDYWxscyBhc3luYyBvcGVuIGxlZGdlcgogICAgICAgICAqLwogICAg\nICAgIGFzeW5jT3BlbkxlZGdlck5vUmVjb3ZlcnkobElkLCBkaWdlc3RUeXBl\nLCBwYXNzd2QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBu\nZXcgU3luY09wZW5DYWxsYmFjaygpLCBjb3VudGVyKTsKCiAgICAgICAgLyoK\nICAgICAgICAgKiBXYWl0CiAgICAgICAgICovCiAgICAgICAgY291bnRlci5i\nbG9jaygwKTsKICAgICAgICBpZiAoY291bnRlci5nZXRyYygpICE9IEJLRXhj\nZXB0aW9uLkNvZGUuT0spCiAgICAgICAgICAgIHRocm93IEJLRXhjZXB0aW9u\nLmNyZWF0ZShjb3VudGVyLmdldHJjKCkpOwoKICAgICAgICByZXR1cm4gY291\nbnRlci5nZXRMaCgpOwogICAgfQoKICAgIC8qKgogICAgICogRGVsZXRlcyBh\nIGxlZGdlciBhc3luY2hyb25vdXNseS4KICAgICAqCiAgICAgKiBAcGFyYW0g\nbElkCiAgICAgKiAgICAgICAgICAgIGxlZGdlciBJZAogICAgICogQHBhcmFt\nIGNiCiAgICAgKiAgICAgICAgICAgIGRlbGV0ZUNhbGxiYWNrIGltcGxlbWVu\ndGF0aW9uCiAgICAgKiBAcGFyYW0gY3R4CiAgICAgKiAgICAgICAgICAgIG9w\ndGlvbmFsIGNvbnRyb2wgb2JqZWN0CiAgICAgKi8KICAgIHB1YmxpYyB2b2lk\nIGFzeW5jRGVsZXRlTGVkZ2VyKGxvbmcgbElkLCBEZWxldGVDYWxsYmFjayBj\nYiwgT2JqZWN0IGN0eCkgewogICAgICAgIG5ldyBMZWRnZXJEZWxldGVPcCh0\naGlzLCBsSWQsIGNiLCBjdHgpLmluaXRpYXRlKCk7CiAgICB9CgoKICAgIC8q\nKgogICAgICogU3luY2hyb25vdXMgY2FsbCB0byBkZWxldGUgYSBsZWRnZXIu\nIFBhcmFtZXRlcnMgbWF0Y2ggdGhvc2Ugb2YKICAgICAqIHtAbGluayAjYXN5\nbmNEZWxldGVMZWRnZXIobG9uZywgQXN5bmNDYWxsYmFjay5EZWxldGVDYWxs\nYmFjaywgT2JqZWN0KX0KICAgICAqCiAgICAgKiBAcGFyYW0gbElkCiAgICAg\nKiAgICAgICAgICAgIGxlZGdlcklkCiAgICAgKiBAdGhyb3dzIEludGVycnVw\ndGVkRXhjZXB0aW9uCiAgICAgKiBAdGhyb3dzIEJLRXhjZXB0aW9uCiAgICAg\nKi8KICAgIHB1YmxpYyB2b2lkIGRlbGV0ZUxlZGdlcihsb25nIGxJZCkgdGhy\nb3dzIEludGVycnVwdGVkRXhjZXB0aW9uLCBCS0V4Y2VwdGlvbiB7CiAgICAg\nICAgU3luY0NvdW50ZXIgY291bnRlciA9IG5ldyBTeW5jQ291bnRlcigpOwog\nICAgICAgIGNvdW50ZXIuaW5jKCk7CiAgICAgICAgLy8gQ2FsbCBhc3luY2hy\nb25vdXMgdmVyc2lvbgogICAgICAgIGFzeW5jRGVsZXRlTGVkZ2VyKGxJZCwg\nbmV3IFN5bmNEZWxldGVDYWxsYmFjaygpLCBjb3VudGVyKTsKICAgICAgICAv\nLyBXYWl0CiAgICAgICAgY291bnRlci5ibG9jaygwKTsKICAgICAgICBpZiAo\nY291bnRlci5nZXRyYygpICE9IEtlZXBlckV4Y2VwdGlvbi5Db2RlLk9LLmlu\ndFZhbHVlKCkpIHsKICAgICAgICAgICAgTE9HLmVycm9yKCJab29LZWVwZXIg\nZXJyb3IgZGVsZXRpbmcgbGVkZ2VyIG5vZGU6ICIgKyBjb3VudGVyLmdldHJj\nKCkpOwogICAgICAgICAgICB0aHJvdyBCS0V4Y2VwdGlvbi5jcmVhdGUoQ29k\nZS5aS0V4Y2VwdGlvbik7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAg\nICogU2h1dHMgZG93biBjbGllbnQuCiAgICAgKgogICAgICovCiAgICBwdWJs\naWMgdm9pZCBjbG9zZSgpIHRocm93cyBJbnRlcnJ1cHRlZEV4Y2VwdGlvbiwg\nQktFeGNlcHRpb24gewogICAgICAgIGJvb2tpZUNsaWVudC5jbG9zZSgpOwog\nICAgICAgIGxlZGdlck1hbmFnZXIuY2xvc2UoKTsKICAgICAgICBib29raWVX\nYXRjaGVyLmhhbHQoKTsKICAgICAgICBpZiAob3duQ2hhbm5lbEZhY3Rvcnkp\nIHsKICAgICAgICAgICAgY2hhbm5lbEZhY3RvcnkucmVsZWFzZUV4dGVybmFs\nUmVzb3VyY2VzKCk7CiAgICAgICAgfQogICAgICAgIGlmIChvd25aS0hhbmRs\nZSkgewogICAgICAgICAgICB6ay5jbG9zZSgpOwogICAgICAgIH0KICAgICAg\nICBjYWxsYmFja1dvcmtlci5zaHV0ZG93bigpOwogICAgICAgIG1haW5Xb3Jr\nZXJQb29sLnNodXRkb3duKCk7CiAgICB9CgogICAgcHJpdmF0ZSBzdGF0aWMg\nY2xhc3MgU3luY0NyZWF0ZUNhbGxiYWNrIGltcGxlbWVudHMgQ3JlYXRlQ2Fs\nbGJhY2sgewogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZSBjYWxsYmFj\nayBpbXBsZW1lbnRhdGlvbiBmb3Igc3luY2hyb25vdXMgY3JlYXRlIGNhbGwu\nCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gcmMKICAgICAgICAgKiAg\nICAgICAgICByZXR1cm4gY29kZQogICAgICAgICAqIEBwYXJhbSBsaAogICAg\nICAgICAqICAgICAgICAgIGxlZGdlciBoYW5kbGUgb2JqZWN0CiAgICAgICAg\nICogQHBhcmFtIGN0eAogICAgICAgICAqICAgICAgICAgIG9wdGlvbmFsIGNv\nbnRyb2wgb2JqZWN0CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHZvaWQg\nY3JlYXRlQ29tcGxldGUoaW50IHJjLCBMZWRnZXJIYW5kbGUgbGgsIE9iamVj\ndCBjdHgpIHsKICAgICAgICAgICAgU3luY0NvdW50ZXIgY291bnRlciA9IChT\neW5jQ291bnRlcikgY3R4OwogICAgICAgICAgICBjb3VudGVyLnNldExoKGxo\nKTsKICAgICAgICAgICAgY291bnRlci5zZXRyYyhyYyk7CiAgICAgICAgICAg\nIGNvdW50ZXIuZGVjKCk7CiAgICAgICAgfQogICAgfQoKICAgIHByaXZhdGUg\nc3RhdGljIGNsYXNzIFN5bmNPcGVuQ2FsbGJhY2sgaW1wbGVtZW50cyBPcGVu\nQ2FsbGJhY2sgewogICAgICAgIC8qKgogICAgICAgICAqIENhbGxiYWNrIG1l\ndGhvZCBmb3Igc3luY2hyb25vdXMgb3BlbiBvcGVyYXRpb24KICAgICAgICAg\nKgogICAgICAgICAqIEBwYXJhbSByYwogICAgICAgICAqICAgICAgICAgIHJl\ndHVybiBjb2RlCiAgICAgICAgICogQHBhcmFtIGxoCiAgICAgICAgICogICAg\nICAgICAgbGVkZ2VyIGhhbmRsZQogICAgICAgICAqIEBwYXJhbSBjdHgKICAg\nICAgICAgKiAgICAgICAgICBvcHRpb25hbCBjb250cm9sIG9iamVjdAogICAg\nICAgICAqLwogICAgICAgIHB1YmxpYyB2b2lkIG9wZW5Db21wbGV0ZShpbnQg\ncmMsIExlZGdlckhhbmRsZSBsaCwgT2JqZWN0IGN0eCkgewogICAgICAgICAg\nICBTeW5jQ291bnRlciBjb3VudGVyID0gKFN5bmNDb3VudGVyKSBjdHg7CiAg\nICAgICAgICAgIGNvdW50ZXIuc2V0TGgobGgpOwogICAgICAgICAgICAKICAg\nICAgICAgICAgTE9HLmRlYnVnKCJPcGVuIGNvbXBsZXRlOiAiICsgcmMpOwog\nICAgICAgICAgICAKICAgICAgICAgICAgY291bnRlci5zZXRyYyhyYyk7CiAg\nICAgICAgICAgIGNvdW50ZXIuZGVjKCk7CiAgICAgICAgfQogICAgfQoKICAg\nIHByaXZhdGUgc3RhdGljIGNsYXNzIFN5bmNEZWxldGVDYWxsYmFjayBpbXBs\nZW1lbnRzIERlbGV0ZUNhbGxiYWNrIHsKICAgICAgICAvKioKICAgICAgICAg\nKiBEZWxldGUgY2FsbGJhY2sgaW1wbGVtZW50YXRpb24gZm9yIHN5bmNocm9u\nb3VzIGRlbGV0ZSBjYWxsLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFt\nIHJjCiAgICAgICAgICogICAgICAgICAgICByZXR1cm4gY29kZQogICAgICAg\nICAqIEBwYXJhbSBjdHgKICAgICAgICAgKiAgICAgICAgICAgIG9wdGlvbmFs\nIGNvbnRyb2wgb2JqZWN0CiAgICAgICAgICovCiAgICAgICAgcHVibGljIHZv\naWQgZGVsZXRlQ29tcGxldGUoaW50IHJjLCBPYmplY3QgY3R4KSB7CiAgICAg\nICAgICAgIFN5bmNDb3VudGVyIGNvdW50ZXIgPSAoU3luY0NvdW50ZXIpIGN0\neDsKICAgICAgICAgICAgY291bnRlci5zZXRyYyhyYyk7CiAgICAgICAgICAg\nIGNvdW50ZXIuZGVjKCk7CiAgICAgICAgfQogICAgfQoKCgp9Cg==\n","encoding":"base64"}

