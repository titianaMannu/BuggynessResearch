{"sha":"05c92b3a100bc8d2d28cd5218e20fff8b78a0df2","node_id":"MDQ6QmxvYjE1NzU5NTY6MDVjOTJiM2ExMDBiYzhkMmQyOGNkNTIxOGUyMGZmZjhiNzhhMGRmMg==","size":7278,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/05c92b3a100bc8d2d28cd5218e20fff8b78a0df2","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY2xpZW50OwoKLyoqCiAq\nIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAo\nQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNl\nIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRpc3RyaWJ1\ndGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9u\nCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBs\naWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUg\nTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIpOyB5b3Ug\nbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlCiAq\nIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2Yg\ndGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9y\nZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQg\nYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNv\nZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRp\nc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FS\nUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhw\ncmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBz\ncGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAq\nIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCmltcG9ydCBq\nYXZhLmlvLklPRXhjZXB0aW9uOwppbXBvcnQgamF2YS5uZXQuSW5ldFNvY2tl\ndEFkZHJlc3M7CmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0OwppbXBvcnQg\namF2YS51dGlsLkNvbGxlY3Rpb25zOwppbXBvcnQgamF2YS51dGlsLkhhc2hT\nZXQ7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGphdmEudXRpbC5T\nZXQ7CmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5FeGVjdXRvcnM7Cmlt\ncG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5MaW5rZWRCbG9ja2luZ1F1ZXVl\nOwppbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuU2NoZWR1bGVkRXhlY3V0\nb3JTZXJ2aWNlOwppbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuVGltZVVu\naXQ7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY2xpZW50LkJLRXhj\nZXB0aW9uLkJLTm90RW5vdWdoQm9va2llc0V4Y2VwdGlvbjsKaW1wb3J0IG9y\nZy5hcGFjaGUuYm9va2tlZXBlci51dGlsLlNhZmVSdW5uYWJsZTsKaW1wb3J0\nIG9yZy5hcGFjaGUuYm9va2tlZXBlci51dGlsLlN0cmluZ1V0aWxzOwppbXBv\ncnQgb3JnLnNsZjRqLkxvZ2dlcjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJG\nYWN0b3J5OwppbXBvcnQgb3JnLmFwYWNoZS56b29rZWVwZXIuS2VlcGVyRXhj\nZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS56b29rZWVwZXIuV2F0Y2hlZEV2\nZW50OwppbXBvcnQgb3JnLmFwYWNoZS56b29rZWVwZXIuV2F0Y2hlcjsKaW1w\nb3J0IG9yZy5hcGFjaGUuem9va2VlcGVyLkFzeW5jQ2FsbGJhY2suQ2hpbGRy\nZW5DYWxsYmFjazsKaW1wb3J0IG9yZy5hcGFjaGUuem9va2VlcGVyLktlZXBl\nckV4Y2VwdGlvbi5Db2RlOwoKLyoqCiAqIFRoaXMgY2xhc3MgaXMgcmVzcG9u\nc2libGUgZm9yIG1haW50YWluaW5nIGEgY29uc2lzdGVudCB2aWV3IG9mIHdo\nYXQgYm9va2llcwogKiBhcmUgYXZhaWxhYmxlIGJ5IHJlYWRpbmcgWm9va2Vl\ncGVyIChhbmQgc2V0dGluZyB3YXRjaGVzIG9uIHRoZSBib29raWUgbm9kZXMp\nLgogKiBXaGVuIGEgYm9va2llIGZhaWxzLCB0aGUgb3RoZXIgcGFydHMgb2Yg\ndGhlIGNvZGUgdHVybiB0byB0aGlzIGNsYXNzIHRvIGZpbmQgYQogKiByZXBs\nYWNlbWVudAogKgogKi8KY2xhc3MgQm9va2llV2F0Y2hlciBpbXBsZW1lbnRz\nIFdhdGNoZXIsIENoaWxkcmVuQ2FsbGJhY2sgewogICAgc3RhdGljIGZpbmFs\nIExvZ2dlciBsb2dnZXIgPSBMb2dnZXJGYWN0b3J5LmdldExvZ2dlcihCb29r\naWVXYXRjaGVyLmNsYXNzKTsKCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIFN0\ncmluZyBCT09LSUVfUkVHSVNUUkFUSU9OX1BBVEggPSAiL2xlZGdlcnMvYXZh\naWxhYmxlIjsKICAgIHN0YXRpYyBmaW5hbCBTZXQ8SW5ldFNvY2tldEFkZHJl\nc3M+IEVNUFRZX1NFVCA9IG5ldyBIYXNoU2V0PEluZXRTb2NrZXRBZGRyZXNz\nPigpOwogICAgcHVibGljIHN0YXRpYyBpbnQgWktfQ09OTkVDVF9CQUNLT0ZG\nX1NFQyA9IDE7CgogICAgQm9va0tlZXBlciBiazsKICAgIFNjaGVkdWxlZEV4\nZWN1dG9yU2VydmljZSBzY2hlZHVsZXI7CgogICAgU2V0PEluZXRTb2NrZXRB\nZGRyZXNzPiBrbm93bkJvb2tpZXMgPSBuZXcgSGFzaFNldDxJbmV0U29ja2V0\nQWRkcmVzcz4oKTsKCiAgICBTYWZlUnVubmFibGUgcmVSZWFkVGFzayA9IG5l\ndyBTYWZlUnVubmFibGUoKSB7CiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAg\ncHVibGljIHZvaWQgc2FmZVJ1bigpIHsKICAgICAgICAgICAgcmVhZEJvb2tp\nZXMoKTsKICAgICAgICB9CiAgICB9OwoKICAgIHB1YmxpYyBCb29raWVXYXRj\naGVyKEJvb2tLZWVwZXIgYmspIHsKICAgICAgICB0aGlzLmJrID0gYms7CiAg\nICAgICAgdGhpcy5zY2hlZHVsZXIgPSBFeGVjdXRvcnMubmV3U2luZ2xlVGhy\nZWFkU2NoZWR1bGVkRXhlY3V0b3IoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBoYWx0KCkgewogICAgICAgIHNjaGVkdWxlci5zaHV0ZG93bigpOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHJlYWRCb29raWVzKCkgewogICAgICAgIHJl\nYWRCb29raWVzKHRoaXMpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHJlYWRC\nb29raWVzKENoaWxkcmVuQ2FsbGJhY2sgY2FsbGJhY2spIHsKICAgICAgICBi\nay5nZXRaa0hhbmRsZSgpLmdldENoaWxkcmVuKEJPT0tJRV9SRUdJU1RSQVRJ\nT05fUEFUSCwgdGhpcywgY2FsbGJhY2ssIG51bGwpOwogICAgfQoKICAgIEBP\ndmVycmlkZQogICAgcHVibGljIHZvaWQgcHJvY2VzcyhXYXRjaGVkRXZlbnQg\nZXZlbnQpIHsKICAgICAgICByZWFkQm9va2llcygpOwogICAgfQoKICAgIEBP\ndmVycmlkZQogICAgcHVibGljIHZvaWQgcHJvY2Vzc1Jlc3VsdChpbnQgcmMs\nIFN0cmluZyBwYXRoLCBPYmplY3QgY3R4LCBMaXN0PFN0cmluZz4gY2hpbGRy\nZW4pIHsKCiAgICAgICAgaWYgKHJjICE9IEtlZXBlckV4Y2VwdGlvbi5Db2Rl\nLk9LLmludFZhbHVlKCkpIHsKICAgICAgICAgICAgLy9sb2dnZXIuZXJyb3Io\nIkVycm9yIHdoaWxlIHJlYWRpbmcgYm9va2llcyIsIEtlZXBlckV4Y2VwdGlv\nbi5jcmVhdGUoQ29kZS5nZXQocmMpLCBwYXRoKSk7CiAgICAgICAgICAgIC8v\nIHRyeSB0aGUgcmVhZCBhZnRlciBhIHNlY29uZCBhZ2FpbgogICAgICAgICAg\nICBzY2hlZHVsZXIuc2NoZWR1bGUocmVSZWFkVGFzaywgWktfQ09OTkVDVF9C\nQUNLT0ZGX1NFQywgVGltZVVuaXQuU0VDT05EUyk7CiAgICAgICAgICAgIHJl\ndHVybjsKICAgICAgICB9CgogICAgICAgIC8vIFJlYWQgdGhlIGJvb2tpZSBh\nZGRyZXNzZXMgaW50byBhIHNldCBmb3IgZWZmaWNpZW50IGxvb2t1cAogICAg\nICAgIFNldDxJbmV0U29ja2V0QWRkcmVzcz4gbmV3Qm9va2llQWRkcnMgPSBu\nZXcgSGFzaFNldDxJbmV0U29ja2V0QWRkcmVzcz4oKTsKICAgICAgICBmb3Ig\nKFN0cmluZyBib29raWVBZGRyU3RyaW5nIDogY2hpbGRyZW4pIHsKICAgICAg\nICAgICAgSW5ldFNvY2tldEFkZHJlc3MgYm9va2llQWRkcjsKICAgICAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgICAgIGJvb2tpZUFkZHIgPSBTdHJpbmdV\ndGlscy5wYXJzZUFkZHIoYm9va2llQWRkclN0cmluZyk7CiAgICAgICAgICAg\nIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgIGxv\nZ2dlci5lcnJvcigiQ291bGQgbm90IHBhcnNlIGJvb2tpZSBhZGRyZXNzOiAi\nICsgYm9va2llQWRkclN0cmluZyArICIsIGlnbm9yaW5nIHRoaXMgYm9va2ll\nIik7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQog\nICAgICAgICAgICBuZXdCb29raWVBZGRycy5hZGQoYm9va2llQWRkcik7CiAg\nICAgICAgfQoKICAgICAgICBzeW5jaHJvbml6ZWQgKHRoaXMpIHsKICAgICAg\nICAgICAga25vd25Cb29raWVzID0gbmV3Qm9va2llQWRkcnM7CiAgICAgICAg\nfQogICAgfQoKICAgIC8qKgogICAgICogQmxvY2tzIHVudGlsIGJvb2tpZXMg\nYXJlIHJlYWQgZnJvbSB6b29rZWVwZXIsIHVzZWQgaW4gdGhlIHtAbGluayBC\nb29rS2VlcGVyfSBjb25zdHJ1Y3Rvci4KICAgICAqIEB0aHJvd3MgSW50ZXJy\ndXB0ZWRFeGNlcHRpb24KICAgICAqIEB0aHJvd3MgS2VlcGVyRXhjZXB0aW9u\nCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHJlYWRCb29raWVzQmxvY2tpbmco\nKSB0aHJvd3MgSW50ZXJydXB0ZWRFeGNlcHRpb24sIEtlZXBlckV4Y2VwdGlv\nbiB7CiAgICAgICAgZmluYWwgTGlua2VkQmxvY2tpbmdRdWV1ZTxJbnRlZ2Vy\nPiBxdWV1ZSA9IG5ldyBMaW5rZWRCbG9ja2luZ1F1ZXVlPEludGVnZXI+KCk7\nCiAgICAgICAgcmVhZEJvb2tpZXMobmV3IENoaWxkcmVuQ2FsbGJhY2soKSB7\nCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIHByb2Nlc3NSZXN1bHQoaW50IHJj\nLCBTdHJpbmcgcGF0aCwgT2JqZWN0IGN0eCwgTGlzdDxTdHJpbmc+IGNoaWxk\ncmVuKSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAg\nICAgIEJvb2tpZVdhdGNoZXIudGhpcy5wcm9jZXNzUmVzdWx0KHJjLCBwYXRo\nLCBjdHgsIGNoaWxkcmVuKTsKICAgICAgICAgICAgICAgICAgICBxdWV1ZS5w\ndXQocmMpOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoSW50ZXJydXB0ZWRF\neGNlcHRpb24gZSkgewogICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJv\ncigiSW50ZXJydXBlZCB3aGVuIHRyeWluZyB0byByZWFkIGJvb2tpZXMgaW4g\nYSBibG9ja2luZyBmYXNoaW9uIik7CiAgICAgICAgICAgICAgICAgICAgdGhy\nb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oZSk7CiAgICAgICAgICAgICAgICB9\nCiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBpbnQgcmMgPSBx\ndWV1ZS50YWtlKCk7CgogICAgICAgIGlmIChyYyAhPSBLZWVwZXJFeGNlcHRp\nb24uQ29kZS5PSy5pbnRWYWx1ZSgpKSB7CiAgICAgICAgICAgIHRocm93IEtl\nZXBlckV4Y2VwdGlvbi5jcmVhdGUoQ29kZS5nZXQocmMpKTsKICAgICAgICB9\nCiAgICB9CgogICAgLyoqCiAgICAgKiBXcmFwcGVyIG92ZXIgdGhlIHtAbGlu\nayAjZ2V0QWRkaXRpb25hbEJvb2tpZXMoU2V0LCBpbnQpfSBtZXRob2Qgd2hl\nbiB0aGVyZSBpcyBubyBleGNsdXNpb24gbGlzdCAob3IgZXhpc2l0aW5nIGJv\nb2tpZXMpCiAgICAgKiBAcGFyYW0gbnVtQm9va2llc05lZWRlZAogICAgICog\nQHJldHVybgogICAgICogQHRocm93cyBCS05vdEVub3VnaEJvb2tpZXNFeGNl\ncHRpb24KICAgICAqLwogICAgcHVibGljIEFycmF5TGlzdDxJbmV0U29ja2V0\nQWRkcmVzcz4gZ2V0TmV3Qm9va2llcyhpbnQgbnVtQm9va2llc05lZWRlZCkg\ndGhyb3dzIEJLTm90RW5vdWdoQm9va2llc0V4Y2VwdGlvbiB7CiAgICAgICAg\ncmV0dXJuIGdldEFkZGl0aW9uYWxCb29raWVzKEVNUFRZX1NFVCwgbnVtQm9v\na2llc05lZWRlZCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBXcmFwcGVyIG92\nZXIgdGhlIHtAbGluayAjZ2V0QWRkaXRpb25hbEJvb2tpZXMoU2V0LCBpbnQp\nfSBtZXRob2Qgd2hlbiB5b3UganVzdCBuZWVkIDEgZXh0cmEgYm9va2llCiAg\nICAgKiBAcGFyYW0gZXhpc3RpbmdCb29raWVzCiAgICAgKiBAcmV0dXJuCiAg\nICAgKiBAdGhyb3dzIEJLTm90RW5vdWdoQm9va2llc0V4Y2VwdGlvbgogICAg\nICovCiAgICBwdWJsaWMgSW5ldFNvY2tldEFkZHJlc3MgZ2V0QWRkaXRpb25h\nbEJvb2tpZShMaXN0PEluZXRTb2NrZXRBZGRyZXNzPiBleGlzdGluZ0Jvb2tp\nZXMpCiAgICAgICAgICAgIHRocm93cyBCS05vdEVub3VnaEJvb2tpZXNFeGNl\ncHRpb24gewogICAgICAgIHJldHVybiBnZXRBZGRpdGlvbmFsQm9va2llcyhu\nZXcgSGFzaFNldDxJbmV0U29ja2V0QWRkcmVzcz4oZXhpc3RpbmdCb29raWVz\nKSwgMSkuZ2V0KDApOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBh\nZGRpdGlvbmFsIGJvb2tpZXMgZ2l2ZW4gYW4gZXhjbHVzaW9uIGxpc3QgYW5k\nIGhvdyBtYW55IGFyZSBuZWVkZWQKICAgICAqIEBwYXJhbSBleGlzdGluZ0Jv\nb2tpZXMKICAgICAqIEBwYXJhbSBudW1BZGRpdGlvbmFsQm9va2llc05lZWRl\nZAogICAgICogQHJldHVybgogICAgICogQHRocm93cyBCS05vdEVub3VnaEJv\nb2tpZXNFeGNlcHRpb24KICAgICAqLwogICAgcHVibGljIEFycmF5TGlzdDxJ\nbmV0U29ja2V0QWRkcmVzcz4gZ2V0QWRkaXRpb25hbEJvb2tpZXMoU2V0PElu\nZXRTb2NrZXRBZGRyZXNzPiBleGlzdGluZ0Jvb2tpZXMsCiAgICAgICAgICAg\nIGludCBudW1BZGRpdGlvbmFsQm9va2llc05lZWRlZCkgdGhyb3dzIEJLTm90\nRW5vdWdoQm9va2llc0V4Y2VwdGlvbiB7CgogICAgICAgIEFycmF5TGlzdDxJ\nbmV0U29ja2V0QWRkcmVzcz4gbmV3Qm9va2llcyA9IG5ldyBBcnJheUxpc3Q8\nSW5ldFNvY2tldEFkZHJlc3M+KCk7CgogICAgICAgIGlmIChudW1BZGRpdGlv\nbmFsQm9va2llc05lZWRlZCA8PSAwKSB7CiAgICAgICAgICAgIHJldHVybiBu\nZXdCb29raWVzOwogICAgICAgIH0KCiAgICAgICAgTGlzdDxJbmV0U29ja2V0\nQWRkcmVzcz4gYWxsQm9va2llczsKCiAgICAgICAgc3luY2hyb25pemVkICh0\naGlzKSB7CiAgICAgICAgICAgIGFsbEJvb2tpZXMgPSBuZXcgQXJyYXlMaXN0\nPEluZXRTb2NrZXRBZGRyZXNzPihrbm93bkJvb2tpZXMpOwogICAgICAgIH0K\nCiAgICAgICAgQ29sbGVjdGlvbnMuc2h1ZmZsZShhbGxCb29raWVzKTsKCiAg\nICAgICAgZm9yIChJbmV0U29ja2V0QWRkcmVzcyBib29raWUgOiBhbGxCb29r\naWVzKSB7CiAgICAgICAgICAgIGlmIChleGlzdGluZ0Jvb2tpZXMuY29udGFp\nbnMoYm9va2llKSkgewogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAg\nICAgICAgIH0KCiAgICAgICAgICAgIG5ld0Jvb2tpZXMuYWRkKGJvb2tpZSk7\nCiAgICAgICAgICAgIG51bUFkZGl0aW9uYWxCb29raWVzTmVlZGVkLS07Cgog\nICAgICAgICAgICBpZiAobnVtQWRkaXRpb25hbEJvb2tpZXNOZWVkZWQgPT0g\nMCkgewogICAgICAgICAgICAgICAgcmV0dXJuIG5ld0Jvb2tpZXM7CiAgICAg\nICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHRocm93IG5ldyBCS05vdEVu\nb3VnaEJvb2tpZXNFeGNlcHRpb24oKTsKICAgIH0KCn0K\n","encoding":"base64"}

