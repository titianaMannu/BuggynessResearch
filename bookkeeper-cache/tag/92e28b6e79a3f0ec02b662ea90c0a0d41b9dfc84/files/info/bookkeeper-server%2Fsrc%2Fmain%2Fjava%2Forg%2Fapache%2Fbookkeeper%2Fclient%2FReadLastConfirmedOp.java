{"sha":"43e999dc993d8f38d9ea0595858b724211bab2af","node_id":"MDQ6QmxvYjE1NzU5NTY6NDNlOTk5ZGM5OTNkOGYzOGQ5ZWEwNTk1ODU4YjcyNDIxMWJhYjJhZg==","size":4332,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/43e999dc993d8f38d9ea0595858b724211bab2af","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY2xpZW50OwovKiBMaWNl\nbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikg\ndW5kZXIgb25lCiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3Jl\nZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQogKiBkaXN0cmlidXRlZCB3\naXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbgogKiBy\nZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5z\nZXMgdGhpcyBmaWxlCiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUKICogIkxpY2Vuc2UiKTsgeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZQogKiB3aXRo\nIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBM\naWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGlj\nZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFw\ncGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2Fy\nZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmli\ndXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJ\nRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mg\nb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lm\naWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1p\ndGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgppbXBvcnQgamF2YS51\ndGlsLkVudW1TZXQ7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY2xp\nZW50LkFzeW5jQ2FsbGJhY2suUmVhZExhc3RDb25maXJtZWRDYWxsYmFjazsK\naW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5jbGllbnQuQktFeGNlcHRp\nb24uQktEaWdlc3RNYXRjaEV4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUu\nYm9va2tlZXBlci5jbGllbnQuRGlnZXN0TWFuYWdlci5SZWNvdmVyeURhdGE7\nCmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIucHJvdG8uQm9va2tlZXBl\nckludGVybmFsQ2FsbGJhY2tzLlJlYWRFbnRyeUNhbGxiYWNrOwppbXBvcnQg\nb3JnLmFwYWNoZS5ib29ra2VlcGVyLnByb3RvLkJvb2tpZVByb3RvY29sOwpp\nbXBvcnQgb3JnLnNsZjRqLkxvZ2dlcjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dn\nZXJGYWN0b3J5OwppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmJ1ZmZlci5DaGFu\nbmVsQnVmZmVyOwoKLyoqCiAqIFRoaXMgY2xhc3MgZW5jYXBzdWxhdGVkIHRo\nZSByZWFkIGxhc3QgY29uZmlybWVkIG9wZXJhdGlvbi4KICoKICovCmNsYXNz\nIFJlYWRMYXN0Q29uZmlybWVkT3AgaW1wbGVtZW50cyBSZWFkRW50cnlDYWxs\nYmFjayB7CiAgICBzdGF0aWMgZmluYWwgTG9nZ2VyIExPRyA9IExvZ2dlckZh\nY3RvcnkuZ2V0TG9nZ2VyKExlZGdlclJlY292ZXJ5T3AuY2xhc3MpOwogICAg\nTGVkZ2VySGFuZGxlIGxoOwogICAgT2JqZWN0IGN0eDsKICAgIGludCBudW1S\nZXNwb25zZXNQZW5kaW5nOwogICAgaW50IHZhbGlkUmVzcG9uc2VzOwogICAg\nbG9uZyBtYXhBZGRDb25maXJtZWQ7CiAgICBsb25nIG1heExlbmd0aCA9IDA7\nCiAgICB2b2xhdGlsZSBib29sZWFuIGNvbXBsZXRlZCA9IGZhbHNlOwoKICAg\nIFJlYWRMYXN0Q29uZmlybWVkQ2FsbGJhY2sgY2I7CgogICAgcHVibGljIFJl\nYWRMYXN0Q29uZmlybWVkT3AoTGVkZ2VySGFuZGxlIGxoLCBSZWFkTGFzdENv\nbmZpcm1lZENhbGxiYWNrIGNiLCBPYmplY3QgY3R4KSB7CiAgICAgICAgdGhp\ncy5jYiA9IGNiOwogICAgICAgIHRoaXMuY3R4ID0gY3R4OwogICAgICAgIHRo\naXMubGggPSBsaDsKICAgICAgICB0aGlzLnZhbGlkUmVzcG9uc2VzID0gMDsK\nICAgICAgICB0aGlzLm51bVJlc3BvbnNlc1BlbmRpbmcgPSBsaC5tZXRhZGF0\nYS5lbnNlbWJsZVNpemU7CiAgICB9CgogICAgcHVibGljIHZvaWQgaW5pdGlh\ndGUoKSB7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBsaC5tZXRhZGF0\nYS5jdXJyZW50RW5zZW1ibGUuc2l6ZSgpOyBpKyspIHsKICAgICAgICAgICAg\nbGguYmsuYm9va2llQ2xpZW50LnJlYWRFbnRyeShsaC5tZXRhZGF0YS5jdXJy\nZW50RW5zZW1ibGUuZ2V0KGkpLCBsaC5sZWRnZXJJZCwgTGVkZ2VySGFuZGxl\nLkxBU1RfQUREX0NPTkZJUk1FRCwgCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgdGhpcywgaSwgQm9va2llUHJvdG9jb2wuRkxB\nR19OT05FKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHN5bmNocm9u\naXplZCB2b2lkIHJlYWRFbnRyeUNvbXBsZXRlKGZpbmFsIGludCByYywgZmlu\nYWwgbG9uZyBsZWRnZXJJZCwgZmluYWwgbG9uZyBlbnRyeUlkLAogICAgICAg\nICAgICBmaW5hbCBDaGFubmVsQnVmZmVyIGJ1ZmZlciwgZmluYWwgT2JqZWN0\nIGN0eCkgewogICAgICAgIGludCBib29raWVJbmRleCA9IChJbnRlZ2VyKSBj\ndHg7CgogICAgICAgIG51bVJlc3BvbnNlc1BlbmRpbmctLTsKCiAgICAgICAg\naWYgKHJjID09IEJLRXhjZXB0aW9uLkNvZGUuT0spIHsKICAgICAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgICAgIFJlY292ZXJ5RGF0YSByZWNvdmVyeURh\ndGEgPSBsaC5tYWNNYW5hZ2VyLnZlcmlmeURpZ2VzdEFuZFJldHVybkxhc3RD\nb25maXJtZWQoYnVmZmVyKTsKICAgICAgICAgICAgICAgIG1heEFkZENvbmZp\ncm1lZCA9IE1hdGgubWF4KG1heEFkZENvbmZpcm1lZCwgcmVjb3ZlcnlEYXRh\nLmxhc3RBZGRDb25maXJtZWQpOwogICAgICAgICAgICAgICAgdmFsaWRSZXNw\nb25zZXMrKzsKICAgICAgICAgICAgfSBjYXRjaCAoQktEaWdlc3RNYXRjaEV4\nY2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAgICAvLyBUb28gYmFkLCB0aGlz\nIGJvb2tpZSBkaWRuJ3QgZ2l2ZSB1cyBhIHZhbGlkIGFuc3dlciwgd2UKICAg\nICAgICAgICAgICAgIC8vIHN0aWxsIG1pZ2h0IGJlIGFibGUgdG8gcmVjb3Zl\nciB0aG91Z2ggc28gY29udGludWUKICAgICAgICAgICAgICAgIExPRy5lcnJv\ncigiTWFjIG1pc21hdGNoIHdoaWxlIHJlYWRpbmcgbGFzdCBlbnRyeSBmcm9t\nIGJvb2tpZTogIgogICAgICAgICAgICAgICAgICAgICAgICAgICsgbGgubWV0\nYWRhdGEuY3VycmVudEVuc2VtYmxlLmdldChib29raWVJbmRleCkpOwogICAg\nICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAocmMgPT0gQktFeGNl\ncHRpb24uQ29kZS5Ob1N1Y2hMZWRnZXJFeGlzdHNFeGNlcHRpb24gfHwgcmMg\nPT0gQktFeGNlcHRpb24uQ29kZS5Ob1N1Y2hFbnRyeUV4Y2VwdGlvbikgewog\nICAgICAgICAgICAvLyB0aGlzIHN0aWxsIGNvdW50cyBhcyBhIHZhbGlkIHJl\nc3BvbnNlLCBlLmcuLCBpZiB0aGUgY2xpZW50IGNyYXNoZWQgd2l0aG91dCB3\ncml0aW5nIGFueSBlbnRyeQogICAgICAgICAgICB2YWxpZFJlc3BvbnNlcysr\nOwogICAgICAgIH0KCiAgICAgICAgLy8gb3RoZXIgcmV0dXJuIGNvZGVzIGRv\nbnQgY291bnQgYXMgdmFsaWQgcmVzcG9uc2VzCiAgICAgICAgaWYgKCh2YWxp\nZFJlc3BvbnNlcyA+PSBsaC5tZXRhZGF0YS5xdW9ydW1TaXplKSAmJgogICAg\nICAgICAgICAgICAgIWNvbXBsZXRlZCkgewogICAgICAgICAgICBjb21wbGV0\nZWQgPSB0cnVlOwogICAgICAgICAgICBpZiAoTE9HLmlzRGVidWdFbmFibGVk\nKCkpIHsKICAgICAgICAgICAgICAgIExPRy5kZWJ1ZygiUmVhZCBDb21wbGV0\nZSB3aXRoIGVub3VnaCB2YWxpZFJlc3BvbnNlcyIpOwogICAgICAgICAgICB9\nCiAgICAgICAgICAgIGNiLnJlYWRMYXN0Q29uZmlybWVkQ29tcGxldGUoQktF\neGNlcHRpb24uQ29kZS5PSywgbWF4QWRkQ29uZmlybWVkLCB0aGlzLmN0eCk7\nCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmIChu\ndW1SZXNwb25zZXNQZW5kaW5nID09IDAgJiYgIWNvbXBsZXRlZCkgewogICAg\nICAgICAgICBjb21wbGV0ZWQgPSB0cnVlOwogICAgICAgICAgICAvLyBIYXZl\nIGdvdCBhbGwgcmVzcG9uc2VzIGJhY2sgYnV0IHdhcyBzdGlsbCBub3QgZW5v\ndWdoLCBqdXN0IGZhaWwgdGhlIG9wZXJhdGlvbgogICAgICAgICAgICBMT0cu\nZXJyb3IoIldoaWxlIHJlYWRMYXN0Q29uZmlybWVkIGxlZGdlcjogIiArIGxl\nZGdlcklkICsgIiBkaWQgbm90IGhlYXIgc3VjY2VzcyByZXNwb25zZXMgZnJv\nbSBhbGwgcXVvcnVtcyIpOwogICAgICAgICAgICBjYi5yZWFkTGFzdENvbmZp\ncm1lZENvbXBsZXRlKEJLRXhjZXB0aW9uLkNvZGUuTGVkZ2VyUmVjb3ZlcnlF\neGNlcHRpb24sIG1heEFkZENvbmZpcm1lZCwgdGhpcy5jdHgpOwogICAgICAg\nIH0KCiAgICB9Cn0K\n","encoding":"base64"}

