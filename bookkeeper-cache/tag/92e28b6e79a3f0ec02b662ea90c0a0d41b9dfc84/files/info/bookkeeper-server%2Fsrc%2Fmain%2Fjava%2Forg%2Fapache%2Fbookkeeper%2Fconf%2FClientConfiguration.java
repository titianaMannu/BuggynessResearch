{"sha":"5e1c964cf8d01b48c297fb4dd22e2f9a850dac67","node_id":"MDQ6QmxvYjE1NzU5NTY6NWUxYzk2NGNmOGQwMWI0OGMyOTdmYjRkZDIyZTJmOWE4NTBkYWM2Nw==","size":6658,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/5e1c964cf8d01b48c297fb4dd22e2f9a850dac67","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY29uZjsKCmltcG9ydCBvcmcu\nYXBhY2hlLmJvb2trZWVwZXIuY2xpZW50LkJvb2tLZWVwZXIuRGlnZXN0VHlw\nZTsKCi8qKgogKiBDb25maWd1cmF0aW9uIHNldHRpbmdzIGZvciBjbGllbnQg\nc2lkZQogKi8KcHVibGljIGNsYXNzIENsaWVudENvbmZpZ3VyYXRpb24gZXh0\nZW5kcyBBYnN0cmFjdENvbmZpZ3VyYXRpb24gewoKICAgIC8vIFpvb2tlZXBl\nciBQYXJhbWV0ZXJzCiAgICBwcm90ZWN0ZWQgZmluYWwgc3RhdGljIFN0cmlu\nZyBaS19USU1FT1VUID0gInprVGltZW91dCI7CiAgICBwcm90ZWN0ZWQgZmlu\nYWwgc3RhdGljIFN0cmluZyBaS19TRVJWRVJTID0gInprU2VydmVycyI7Cgog\nICAgLy8gVGhyb3R0bGUgdmFsdWUKICAgIHByb3RlY3RlZCBmaW5hbCBzdGF0\naWMgU3RyaW5nIFRIUk9UVExFID0gInRocm90dGxlIjsKCiAgICAvLyBEaWdl\nc3QgVHlwZQogICAgcHJvdGVjdGVkIGZpbmFsIHN0YXRpYyBTdHJpbmcgRElH\nRVNUX1RZUEUgPSAiZGlnZXN0VHlwZSI7CiAgICAvLyBQYXNzd2QKICAgIHBy\nb3RlY3RlZCBmaW5hbCBzdGF0aWMgU3RyaW5nIFBBU1NXRCA9ICJwYXNzd2Qi\nOwoKICAgIC8vIE5JTyBQYXJhbWV0ZXJzCiAgICBwcm90ZWN0ZWQgZmluYWwg\nc3RhdGljIFN0cmluZyBDTElFTlRfVENQX05PREVMQVkgPSAiY2xpZW50VGNw\nTm9EZWxheSI7CgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3QgYSBkZWZhdWx0\nIGNsaWVudC1zaWRlIGNvbmZpZ3VyYXRpb24KICAgICAqLwogICAgcHVibGlj\nIENsaWVudENvbmZpZ3VyYXRpb24oKSB7CiAgICAgICAgc3VwZXIoKTsKICAg\nIH0KCiAgICAvKioKICAgICAqIENvbnN0cnVjdCBhIGNsaWVudC1zaWRlIGNv\nbmZpZ3VyYXRpb24gdXNpbmcgYSBiYXNlIGNvbmZpZ3VyYXRpb24KICAgICAq\nCiAgICAgKiBAcGFyYW0gY29uZgogICAgICogICAgICAgICAgQmFzZSBjb25m\naWd1cmF0aW9uCiAgICAgKi8KICAgIHB1YmxpYyBDbGllbnRDb25maWd1cmF0\naW9uKEFic3RyYWN0Q29uZmlndXJhdGlvbiBjb25mKSB7CiAgICAgICAgc3Vw\nZXIoKTsKICAgICAgICBsb2FkQ29uZihjb25mKTsKICAgIH0KCiAgICAvKioK\nICAgICAqIEdldCB0aHJvdHRsZSB2YWx1ZQogICAgICoKICAgICAqIEByZXR1\ncm4gdGhyb3R0bGUgdmFsdWUKICAgICAqIEBzZWUgI3NldFRocm90dGxlVmFs\ndWUKICAgICAqLwogICAgcHVibGljIGludCBnZXRUaHJvdHRsZVZhbHVlKCkg\newogICAgICAgIHJldHVybiB0aGlzLmdldEludChUSFJPVFRMRSwgNTAwMCk7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQgdGhyb3R0bGUgdmFsdWUuCiAg\nICAgKgogICAgICogU2luY2UgQm9va0tlZXBlciBwcm9jZXNzIHJlcXVlc3Rz\nIGluIGFzeW5jaHJvdXMgd2F5LCBpdCB3aWxsIGhvbGRzIAogICAgICogdGhv\nc2UgcGVuZGluZyByZXF1ZXN0IGluIHF1ZXVlLiBZb3UgbWF5IGVhc2lseSBy\ndW4gaXQgb3V0IG9mIG1lbW9yeQogICAgICogaWYgcHJvZHVjaW5nIHRvbyBt\nYW55IHJlcXVlc3RzIHRoYW4gdGhlIGNhcGFiaWxpdHkgb2YgYm9va2llIHNl\ncnZlcnMgY2FuIGhhbmRsZS4KICAgICAqIFRvIHByZXZlbnQgdGhhdCBmcm9t\nIGhhcHBlZGluZywgeW91IGNhbiBzZXQgYSB0aHJvdHRsZSB2YWx1ZSBoZXJl\nLgogICAgICoKICAgICAqIEBwYXJhbSB0aHJvdHRsZQogICAgICogICAgICAg\nICAgVGhyb3R0bGUgVmFsdWUKICAgICAqIEByZXR1cm4gY2xpZW50IGNvbmZp\nZ3VyYXRpb24KICAgICAqLwogICAgcHVibGljIENsaWVudENvbmZpZ3VyYXRp\nb24gc2V0VGhyb3R0bGVWYWx1ZShpbnQgdGhyb3R0bGUpIHsKICAgICAgICB0\naGlzLnNldFByb3BlcnR5KFRIUk9UVExFLCBJbnRlZ2VyLnRvU3RyaW5nKHRo\ncm90dGxlKSk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBHZXQgZGlnZXN0IHR5cGUgdXNlZCBpbiBib29ra2VlcGVyIGFk\nbWluCiAgICAgKgogICAgICogQHJldHVybiBkaWdlc3QgdHlwZQogICAgICog\nQHNlZSAjc2V0Qm9va2llUmVjb3ZlcnlEaWdlc3RUeXBlCiAgICAgKi8KICAg\nIHB1YmxpYyBEaWdlc3RUeXBlIGdldEJvb2tpZVJlY292ZXJ5RGlnZXN0VHlw\nZSgpIHsKICAgICAgICByZXR1cm4gRGlnZXN0VHlwZS52YWx1ZU9mKHRoaXMu\nZ2V0U3RyaW5nKERJR0VTVF9UWVBFLCBEaWdlc3RUeXBlLkNSQzMyLnRvU3Ry\naW5nKCkpKTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCBkaWdlc3QgdHlw\nZSB1c2VkIGluIGJvb2trZWVwZXIgYWRtaW4uCiAgICAgKgogICAgICogRGln\nZXN0IFR5cGUgYW5kIFBhc3N3ZCB1c2VkIHRvIG9wZW4gbGVkZ2VycyBmb3Ig\nYWRtaW4gdG9vbAogICAgICogRm9yIG5vdywgYXNzdW1lIHRoYXQgYWxsIGxl\nZGdlcnMgd2VyZSBjcmVhdGVkIHdpdGggdGhlIHNhbWUgRGlnZXN0VHlwZQog\nICAgICogYW5kIHBhc3N3b3JkLiBJbiB0aGUgZnV0dXJlLCB0aGlzIGFkbWlu\nIHRvb2wgd2lsbCBuZWVkIHRvIGtub3cgZm9yIGVhY2gKICAgICAqIGxlZGdl\nciwgd2hhdCB3YXMgdGhlIERpZ2VzdFR5cGUgYW5kIHBhc3N3b3JkIHVzZWQg\ndG8gY3JlYXRlIGl0IGJlZm9yZSBpdAogICAgICogY2FuIG9wZW4gaXQuIFRo\nZXNlIHZhbHVlcyB3aWxsIGNvbWUgZnJvbSBTeXN0ZW0gcHJvcGVydGllcywg\ndGhvdWdoIGZpeGVkCiAgICAgKiBkZWZhdWx0cyBhcmUgZGVmaW5lZCBoZXJl\nLgogICAgICoKICAgICAqIEBwYXJhbSBkaWdlc3RUeXBlCiAgICAgKiAgICAg\nICAgICBEaWdlc3QgVHlwZQogICAgICogQHJldHVybiBjbGllbnQgY29uZmln\ndXJhdGlvbgogICAgICovCiAgICBwdWJsaWMgQ2xpZW50Q29uZmlndXJhdGlv\nbiBzZXRCb29raWVSZWNvdmVyeURpZ2VzdFR5cGUoRGlnZXN0VHlwZSBkaWdl\nc3RUeXBlKSB7CiAgICAgICAgdGhpcy5zZXRQcm9wZXJ0eShESUdFU1RfVFlQ\nRSwgZGlnZXN0VHlwZS50b1N0cmluZygpKTsKICAgICAgICByZXR1cm4gdGhp\nczsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCBwYXNzd2QgdXNlZCBpbiBi\nb29ra2VlcGVyIGFkbWluCiAgICAgKgogICAgICogQHJldHVybiBwYXNzd29y\nZAogICAgICogQHNlZSAjc2V0Qm9va2llUmVjb3ZlcnlQYXNzd2QKICAgICAq\nLwogICAgcHVibGljIGJ5dGVbXSBnZXRCb29raWVSZWNvdmVyeVBhc3N3ZCgp\nIHsKICAgICAgICByZXR1cm4gdGhpcy5nZXRTdHJpbmcoUEFTU1dELCAiIiku\nZ2V0Qnl0ZXMoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCBwYXNzd2Qg\ndXNlZCBpbiBib29ra2VlcGVyIGFkbWluLgogICAgICoKICAgICAqIERpZ2Vz\ndCBUeXBlIGFuZCBQYXNzd2QgdXNlZCB0byBvcGVuIGxlZGdlcnMgZm9yIGFk\nbWluIHRvb2wKICAgICAqIEZvciBub3csIGFzc3VtZSB0aGF0IGFsbCBsZWRn\nZXJzIHdlcmUgY3JlYXRlZCB3aXRoIHRoZSBzYW1lIERpZ2VzdFR5cGUKICAg\nICAqIGFuZCBwYXNzd29yZC4gSW4gdGhlIGZ1dHVyZSwgdGhpcyBhZG1pbiB0\nb29sIHdpbGwgbmVlZCB0byBrbm93IGZvciBlYWNoCiAgICAgKiBsZWRnZXIs\nIHdoYXQgd2FzIHRoZSBEaWdlc3RUeXBlIGFuZCBwYXNzd29yZCB1c2VkIHRv\nIGNyZWF0ZSBpdCBiZWZvcmUgaXQKICAgICAqIGNhbiBvcGVuIGl0LiBUaGVz\nZSB2YWx1ZXMgd2lsbCBjb21lIGZyb20gU3lzdGVtIHByb3BlcnRpZXMsIHRo\nb3VnaCBmaXhlZAogICAgICogZGVmYXVsdHMgYXJlIGRlZmluZWQgaGVyZS4K\nICAgICAqCiAgICAgKiBAcGFyYW0gcGFzc3dkCiAgICAgKiAgICAgICAgICBQ\nYXNzd29yZAogICAgICogQHJldHVybiBjbGllbnQgY29uZmlndXJhdGlvbgog\nICAgICovCiAgICBwdWJsaWMgQ2xpZW50Q29uZmlndXJhdGlvbiBzZXRCb29r\naWVSZWNvdmVyeVBhc3N3ZChieXRlW10gcGFzc3dkKSB7CiAgICAgICAgc2V0\nUHJvcGVydHkoUEFTU1dELCBuZXcgU3RyaW5nKHBhc3N3ZCkpOwogICAgICAg\nIHJldHVybiB0aGlzOwogICAgfQoKICAgIC8qKgogICAgICogSXMgdGNwIGNv\nbm5lY3Rpb24gbm8gZGVsYXkuCiAgICAgKgogICAgICogQHJldHVybiB0Y3Ag\nc29ja2V0IG5vZGVsYXkgc2V0dGluZwogICAgICogQHNlZSAjc2V0Q2xpZW50\nVGNwTm9EZWxheQogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBnZXRDbGll\nbnRUY3BOb0RlbGF5KCkgewogICAgICAgIHJldHVybiBnZXRCb29sZWFuKENM\nSUVOVF9UQ1BfTk9ERUxBWSwgdHJ1ZSk7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBTZXQgc29ja2V0IG5vZGVsYXkgc2V0dGluZy4KICAgICAqCiAgICAgKiBU\naGlzIHNldHRpbmdzIGlzIHVzZWQgdG8gZW5hYmxlZC9kaXNhYmxlZCBOYWds\nZSdzIGFsZ29yaXRobSwgd2hpY2ggaXMgYSBtZWFucyBvZgogICAgICogaW1w\ncm92aW5nIHRoZSBlZmZpY2llbmN5IG9mIFRDUC9JUCBuZXR3b3JrcyBieSBy\nZWR1Y2luZyB0aGUgbnVtYmVyIG9mIHBhY2tldHMKICAgICAqIHRoYXQgbmVl\nZCB0byBiZSBzZW50IG92ZXIgdGhlIG5ldHdvcmsuIElmIHlvdSBhcmUgc2Vu\nZGluZyBtYW55IHNtYWxsIG1lc3NhZ2VzLCAKICAgICAqIHN1Y2ggdGhhdCBt\nb3JlIHRoYW4gb25lIGNhbiBmaXQgaW4gYSBzaW5nbGUgSVAgcGFja2V0LCBz\nZXR0aW5nIGNsaWVudC50Y3Bub2RlbGF5CiAgICAgKiB0byBmYWxzZSB0byBl\nbmFibGUgTmFnbGUgYWxnb3JpdGhtIGNhbiBwcm92aWRlIGJldHRlciBwZXJm\nb3JtYW5jZS4KICAgICAqIDxicj4KICAgICAqIERlZmF1bHQgdmFsdWUgaXMg\ndHJ1ZS4KICAgICAqCiAgICAgKiBAcGFyYW0gbm9EZWxheQogICAgICogICAg\nICAgICAgTm9EZWxheSBzZXR0aW5nCiAgICAgKiBAcmV0dXJuIGNsaWVudCBj\nb25maWd1cmF0aW9uCiAgICAgKi8KICAgIHB1YmxpYyBDbGllbnRDb25maWd1\ncmF0aW9uIHNldENsaWVudFRjcE5vRGVsYXkoYm9vbGVhbiBub0RlbGF5KSB7\nCiAgICAgICAgc2V0UHJvcGVydHkoQ0xJRU5UX1RDUF9OT0RFTEFZLCBCb29s\nZWFuLnRvU3RyaW5nKG5vRGVsYXkpKTsKICAgICAgICByZXR1cm4gdGhpczsK\nICAgIH0KCiAgICAvKioKICAgICAqIEdldCB6b29rZWVwZXIgc2VydmVycyB0\nbyBjb25uZWN0CiAgICAgKgogICAgICogQHJldHVybiB6b29rZWVwZXIgc2Vy\ndmVycwogICAgICovCiAgICBwdWJsaWMgU3RyaW5nIGdldFprU2VydmVycygp\nIHsKICAgICAgICByZXR1cm4gZ2V0U3RyaW5nKFpLX1NFUlZFUlMsICJsb2Nh\nbGhvc3QiKTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCB6b29rZWVwZXIg\nc2VydmVycyB0byBjb25uZWN0CiAgICAgKgogICAgICogQHBhcmFtIHprU2Vy\ndmVycwogICAgICogICAgICAgICAgWm9vS2VlcGVyIHNlcnZlcnMgdG8gY29u\nbmVjdAogICAgICovCiAgICBwdWJsaWMgQ2xpZW50Q29uZmlndXJhdGlvbiBz\nZXRaa1NlcnZlcnMoU3RyaW5nIHprU2VydmVycykgewogICAgICAgIHNldFBy\nb3BlcnR5KFpLX1NFUlZFUlMsIHprU2VydmVycyk7CiAgICAgICAgcmV0dXJu\nIHRoaXM7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgem9va2VlcGVyIHRp\nbWVvdXQKICAgICAqCiAgICAgKiBAcmV0dXJuIHpvb2tlZXBlciBjbGllbnQg\ndGltZW91dAogICAgICovCiAgICBwdWJsaWMgaW50IGdldFprVGltZW91dCgp\nIHsKICAgICAgICByZXR1cm4gZ2V0SW50KFpLX1RJTUVPVVQsIDEwMDAwKTsK\nICAgIH0KCiAgICAvKioKICAgICAqIFNldCB6b29rZWVwZXIgdGltZW91dAog\nICAgICoKICAgICAqIEBwYXJhbSB6a1RpbWVvdXQKICAgICAqICAgICAgICAg\nIFpvb0tlZXBlciBjbGllbnQgdGltZW91dAogICAgICogQHJldHVybiBjbGll\nbnQgY29uZmlndXJhdGlvbgogICAgICovCiAgICBwdWJsaWMgQ2xpZW50Q29u\nZmlndXJhdGlvbiBzZXRaa1RpbWVvdXQoaW50IHprVGltZW91dCkgewogICAg\nICAgIHNldFByb3BlcnR5KFpLX1RJTUVPVVQsIEludGVnZXIudG9TdHJpbmco\nemtUaW1lb3V0KSk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9Cgp9Cg==\n","encoding":"base64"}

