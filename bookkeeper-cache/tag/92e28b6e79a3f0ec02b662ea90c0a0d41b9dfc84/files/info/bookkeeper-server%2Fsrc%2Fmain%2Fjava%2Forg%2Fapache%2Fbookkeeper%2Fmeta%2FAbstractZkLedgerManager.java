{"sha":"29bd08073f8e56158967721495620b25a834063a","node_id":"MDQ6QmxvYjE1NzU5NTY6MjliZDA4MDczZjhlNTYxNTg5Njc3MjE0OTU2MjBiMjVhODM0MDYzYQ==","size":10060,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/29bd08073f8e56158967721495620b25a834063a","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIubWV0YTsKCi8qKgogKiBM\naWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFT\nRikgdW5kZXIgb25lCiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBh\nZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQogKiBkaXN0cmlidXRl\nZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbgog\nKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGlj\nZW5zZXMgdGhpcyBmaWxlCiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExp\nY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUKICogIkxpY2Vuc2UiKTsgeW91IG1h\neSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZQogKiB3\naXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRo\nZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcv\nbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5\nIGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0\nd2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0\ncmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJB\nTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJl\nc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3Bl\nY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBs\naW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgppbXBvcnQgamF2\nYS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5IYXNoU2V0Owpp\nbXBvcnQgamF2YS51dGlsLkxpc3Q7CgppbXBvcnQgb3JnLmFwYWNoZS5ib29r\na2VlcGVyLmNvbmYuQWJzdHJhY3RDb25maWd1cmF0aW9uOwppbXBvcnQgb3Jn\nLmFwYWNoZS5ib29ra2VlcGVyLm1ldGEuTGVkZ2VyTWFuYWdlcjsKaW1wb3J0\nIG9yZy5hcGFjaGUuYm9va2tlZXBlci5wcm90by5Cb29ra2VlcGVySW50ZXJu\nYWxDYWxsYmFja3MuR2VuZXJpY0NhbGxiYWNrOwppbXBvcnQgb3JnLmFwYWNo\nZS5ib29ra2VlcGVyLnByb3RvLkJvb2trZWVwZXJJbnRlcm5hbENhbGxiYWNr\ncy5NdWx0aUNhbGxiYWNrOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVy\nLnByb3RvLkJvb2trZWVwZXJJbnRlcm5hbENhbGxiYWNrcy5Qcm9jZXNzb3I7\nCmltcG9ydCBvcmcuc2xmNGouTG9nZ2VyOwppbXBvcnQgb3JnLnNsZjRqLkxv\nZ2dlckZhY3Rvcnk7CgppbXBvcnQgb3JnLmFwYWNoZS56b29rZWVwZXIuQXN5\nbmNDYWxsYmFjazsKaW1wb3J0IG9yZy5hcGFjaGUuem9va2VlcGVyLktlZXBl\nckV4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuem9va2VlcGVyLktlZXBl\nckV4Y2VwdGlvbi5Db2RlOwppbXBvcnQgb3JnLmFwYWNoZS56b29rZWVwZXIu\nWm9vS2VlcGVyOwoKLyoqCiAqIEFic3RyYWN0IGxlZGdlciBtYW5hZ2VyIGJh\nc2VkIG9uIHpvb2tlZXBlciwgd2hpY2ggcHJvdmlkZXMgY29tbW9uIG1ldGhv\nZHMgc3VjaCBhcyBxdWVyeSB6ayBub2Rlcy4KICovCmFic3RyYWN0IGNsYXNz\nIEFic3RyYWN0WmtMZWRnZXJNYW5hZ2VyIGltcGxlbWVudHMgTGVkZ2VyTWFu\nYWdlciB7CgogICAgc3RhdGljIExvZ2dlciBMT0cgPSBMb2dnZXJGYWN0b3J5\nLmdldExvZ2dlcihBYnN0cmFjdFprTGVkZ2VyTWFuYWdlci5jbGFzcyk7Cgog\nICAgLy8gTGVkZ2VyIE5vZGUgUHJlZml4CiAgICBzdGF0aWMgcHVibGljIGZp\nbmFsIFN0cmluZyBMRURHRVJfTk9ERV9QUkVGSVggPSAiTCI7CiAgICBzdGF0\naWMgZmluYWwgU3RyaW5nIEFWQUlMQUJMRV9OT0RFID0gImF2YWlsYWJsZSI7\nCgogICAgcHJvdGVjdGVkIGZpbmFsIEFic3RyYWN0Q29uZmlndXJhdGlvbiBj\nb25mOwogICAgcHJvdGVjdGVkIGZpbmFsIFpvb0tlZXBlciB6azsKICAgIHBy\nb3RlY3RlZCBmaW5hbCBTdHJpbmcgbGVkZ2VyUm9vdFBhdGg7CgogICAgLyoq\nCiAgICAgKiBab29LZWVwZXItYmFzZWQgTGVkZ2VyIE1hbmFnZXIgQ29uc3Ry\ndWN0b3IKICAgICAqCiAgICAgKiBAcGFyYW0gY29uZgogICAgICogICAgICAg\nICAgQ29uZmlndXJhdGlvbiBvYmplY3QKICAgICAqIEBwYXJhbSB6awogICAg\nICogICAgICAgICAgWm9vS2VlcGVyIENsaWVudCBIYW5kbGUKICAgICAqIEBw\nYXJhbSBsZWRnZXJSb290UGF0aAogICAgICogICAgICAgICAgWm9vS2VlcGVy\nIFBhdGggdG8gc3RvcmUgbGVkZ2VyIG1ldGFkYXRhCiAgICAgKi8KICAgIHBy\nb3RlY3RlZCBBYnN0cmFjdFprTGVkZ2VyTWFuYWdlcihBYnN0cmFjdENvbmZp\nZ3VyYXRpb24gY29uZiwgWm9vS2VlcGVyIHprLAogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBsZWRnZXJSb290UGF0aCkg\newogICAgICAgIHRoaXMuY29uZiA9IGNvbmY7CiAgICAgICAgdGhpcy56ayA9\nIHprOwogICAgICAgIHRoaXMubGVkZ2VyUm9vdFBhdGggPSBsZWRnZXJSb290\nUGF0aDsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCBhbGwgdGhlIGxlZGdl\ncnMgaW4gYSBzaW5nbGUgemsgbm9kZQogICAgICoKICAgICAqIEBwYXJhbSBu\nb2RlUGF0aAogICAgICogICAgICAgICAgWm9va2VlcGVyIG5vZGUgcGF0aAog\nICAgICogQHBhcmFtIGdldExlZGdlcnNDYWxsYmFjawogICAgICogICAgICAg\nICAgY2FsbGJhY2sgZnVuY3Rpb24gdG8gcHJvY2VzcyBsZWRnZXJzIGluIGEg\nc2luZ2xlIG5vZGUKICAgICAqLwogICAgcHJvdGVjdGVkIHZvaWQgYXN5bmNH\nZXRMZWRnZXJzSW5TaW5nbGVOb2RlKGZpbmFsIFN0cmluZyBub2RlUGF0aCwg\nZmluYWwgR2VuZXJpY0NhbGxiYWNrPEhhc2hTZXQ8TG9uZz4+IGdldExlZGdl\ncnNDYWxsYmFjaykgewogICAgICAgIC8vIEZpcnN0IHN5bmMgWksgdG8gbWFr\nZSBzdXJlIHdlJ3JlIHJlYWRpbmcgdGhlIGxhdGVzdCBhY3RpdmUvYXZhaWxh\nYmxlIGxlZGdlciBub2Rlcy4KICAgICAgICB6ay5zeW5jKG5vZGVQYXRoLCBu\nZXcgQXN5bmNDYWxsYmFjay5Wb2lkQ2FsbGJhY2soKSB7CiAgICAgICAgICAg\nIEBPdmVycmlkZQogICAgICAgICAgICBwdWJsaWMgdm9pZCBwcm9jZXNzUmVz\ndWx0KGludCByYywgU3RyaW5nIHBhdGgsIE9iamVjdCBjdHgpIHsKICAgICAg\nICAgICAgICAgIGlmIChMT0cuaXNEZWJ1Z0VuYWJsZWQoKSkgewogICAgICAg\nICAgICAgICAgICAgIExPRy5kZWJ1ZygiU3luYyBub2RlIHBhdGggIiArIHBh\ndGggKyAiIHJldHVybiA6ICIgKyByYyk7CiAgICAgICAgICAgICAgICB9CiAg\nICAgICAgICAgICAgICBpZiAocmMgIT0gQ29kZS5PSy5pbnRWYWx1ZSgpKSB7\nCiAgICAgICAgICAgICAgICAgICAgTE9HLmVycm9yKCJaSyBlcnJvciBzeW5j\naW5nIHRoZSBsZWRnZXJzIG5vZGUgd2hlbiBnZXR0aW5nIGNoaWxkcmVuOiAi\nLCBLZWVwZXJFeGNlcHRpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIC5jcmVhdGUoS2VlcGVyRXhjZXB0aW9uLkNvZGUuZ2V0KHJjKSwgcGF0aCkp\nOwogICAgICAgICAgICAgICAgICAgIGdldExlZGdlcnNDYWxsYmFjay5vcGVy\nYXRpb25Db21wbGV0ZShyYywgbnVsbCk7CiAgICAgICAgICAgICAgICAgICAg\ncmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8g\nU3luYyBoYXMgY29tcGxldGVkIHN1Y2Nlc3NmdWxseSBzbyBub3cgd2UgY2Fu\nIHBvbGwgWksKICAgICAgICAgICAgICAgIC8vIGFuZCByZWFkIGluIHRoZSBs\nYXRlc3Qgc2V0IG9mIGFjdGl2ZSBsZWRnZXIgbm9kZXMuCiAgICAgICAgICAg\nICAgICBkb0FzeW5jR2V0TGVkZ2Vyc0luU2luZ2xlTm9kZShub2RlUGF0aCwg\nZ2V0TGVkZ2Vyc0NhbGxiYWNrKTsKICAgICAgICAgICAgfQogICAgICAgIH0s\nIG51bGwpOwogICAgfQoKICAgIHByaXZhdGUgdm9pZCBkb0FzeW5jR2V0TGVk\nZ2Vyc0luU2luZ2xlTm9kZShmaW5hbCBTdHJpbmcgbm9kZVBhdGgsCiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlu\nYWwgR2VuZXJpY0NhbGxiYWNrPEhhc2hTZXQ8TG9uZz4+IGdldExlZGdlcnND\nYWxsYmFjaykgewogICAgICAgIHprLmdldENoaWxkcmVuKG5vZGVQYXRoLCBm\nYWxzZSwgbmV3IEFzeW5jQ2FsbGJhY2suQ2hpbGRyZW5DYWxsYmFjaygpIHsK\nICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyB2b2lk\nIHByb2Nlc3NSZXN1bHQoaW50IHJjLCBTdHJpbmcgcGF0aCwgT2JqZWN0IGN0\neCwgTGlzdDxTdHJpbmc+IGxlZGdlck5vZGVzKSB7CiAgICAgICAgICAgICAg\nICBpZiAocmMgIT0gQ29kZS5PSy5pbnRWYWx1ZSgpKSB7CiAgICAgICAgICAg\nICAgICAgICAgTE9HLmVycm9yKCJFcnJvciBwb2xsaW5nIFpLIGZvciB0aGUg\nYXZhaWxhYmxlIGxlZGdlciBub2RlczogIiwgS2VlcGVyRXhjZXB0aW9uCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAuY3JlYXRlKEtlZXBlckV4Y2Vw\ndGlvbi5Db2RlLmdldChyYyksIHBhdGgpKTsKICAgICAgICAgICAgICAgICAg\nICBnZXRMZWRnZXJzQ2FsbGJhY2sub3BlcmF0aW9uQ29tcGxldGUocmMsIG51\nbGwpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAg\nICAgIH0KICAgICAgICAgICAgICAgIGlmIChMT0cuaXNEZWJ1Z0VuYWJsZWQo\nKSkgewogICAgICAgICAgICAgICAgICAgIExPRy5kZWJ1ZygiUmV0cmlldmVk\nIGN1cnJlbnQgc2V0IG9mIGxlZGdlciBub2RlczogIiArIGxlZGdlck5vZGVz\nKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vIENvbnZl\ncnQgdGhlIFpLIHJldHJpZXZlZCBsZWRnZXIgbm9kZXMgdG8gYSBIYXNoU2V0\nIGZvciBlYXNpZXIgY29tcGFyaXNvbnMuCiAgICAgICAgICAgICAgICBIYXNo\nU2V0PExvbmc+IGFsbEFjdGl2ZUxlZGdlcnMgPSBuZXcgSGFzaFNldDxMb25n\nPihsZWRnZXJOb2Rlcy5zaXplKCksIDEuMGYpOwogICAgICAgICAgICAgICAg\nZm9yIChTdHJpbmcgbGVkZ2VyTm9kZSA6IGxlZGdlck5vZGVzKSB7CiAgICAg\nICAgICAgICAgICAgICAgaWYgKGlzU3BlY2lhbFpub2RlKGxlZGdlck5vZGUp\nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAg\nICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0cnkgewogICAg\nICAgICAgICAgICAgICAgICAgICAvLyBjb252ZXJ0IHRoZSBub2RlIHBhdGgg\ndG8gbGVkZ2VyIGlkIGFjY29yZGluZyB0byBkaWZmZXJlbnQgbGVkZ2VyIG1h\nbmFnZXIgaW1wbGVtZW50YXRpb24KICAgICAgICAgICAgICAgICAgICAgICAg\nYWxsQWN0aXZlTGVkZ2Vycy5hZGQoZ2V0TGVkZ2VySWQocGF0aCArICIvIiAr\nIGxlZGdlck5vZGUpKTsKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChJ\nT0V4Y2VwdGlvbiBpZSkgewogICAgICAgICAgICAgICAgICAgICAgICBMT0cu\nd2FybigiRXJyb3IgZXh0cmFjdGluZyBsZWRnZXJJZCBmcm9tIFpLIGxlZGdl\nciBub2RlOiAiICsgbGVkZ2VyTm9kZSk7CiAgICAgICAgICAgICAgICAgICAg\nICAgIC8vIFRoaXMgaXMgYSBwcmV0dHkgYmFkIGVycm9yIGFzIGl0IGluZGlj\nYXRlcyBhIGxlZGdlciBub2RlIGluIFpLCiAgICAgICAgICAgICAgICAgICAg\nICAgIC8vIGhhcyBhbiBpbmNvcnJlY3QgZm9ybWF0LiBGb3Igbm93IGp1c3Qg\nY29udGludWUgYW5kIGNvbnNpZGVyCiAgICAgICAgICAgICAgICAgICAgICAg\nIC8vIHRoaXMgYXMgYSBub24tZXhpc3RlbnQgbGVkZ2VyLgogICAgICAgICAg\nICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICB9\nCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZ2V0TGVkZ2Vy\nc0NhbGxiYWNrLm9wZXJhdGlvbkNvbXBsZXRlKHJjLCBhbGxBY3RpdmVMZWRn\nZXJzKTsKCiAgICAgICAgICAgIH0KICAgICAgICB9LCBudWxsKTsKICAgIH0K\nCiAgICBwcml2YXRlIGNsYXNzIEdldExlZGdlcnNDdHggewogICAgICAgIGlu\ndCByYzsKICAgICAgICBIYXNoU2V0PExvbmc+IGxlZGdlcnMgPSBudWxsOwog\nICAgfQoKICAgIC8qKgogICAgICogR2V0IGFsbCB0aGUgbGVkZ2VycyBpbiBh\nIHNpbmdsZSB6ayBub2RlCiAgICAgKgogICAgICogQHBhcmFtIG5vZGVQYXRo\nCiAgICAgKiAgICAgICAgICBab29rZWVwZXIgbm9kZSBwYXRoCiAgICAgKiBA\ndGhyb3dzIElPRXhjZXB0aW9uCiAgICAgKiBAdGhyb3dzIEludGVycnVwdGVk\nRXhjZXB0aW9uCiAgICAgKi8KICAgIHByb3RlY3RlZCBIYXNoU2V0PExvbmc+\nIGdldExlZGdlcnNJblNpbmdsZU5vZGUoZmluYWwgU3RyaW5nIG5vZGVQYXRo\nKQogICAgICAgIHRocm93cyBJT0V4Y2VwdGlvbiwgSW50ZXJydXB0ZWRFeGNl\ncHRpb24gewogICAgICAgIGZpbmFsIEdldExlZGdlcnNDdHggY3R4ID0gbmV3\nIEdldExlZGdlcnNDdHgoKTsKICAgICAgICBpZiAoTE9HLmlzRGVidWdFbmFi\nbGVkKCkpIHsKICAgICAgICAgICAgTE9HLmRlYnVnKCJUcnkgdG8gZ2V0IGxl\nZGdlcnMgb2Ygbm9kZSA6ICIgKyBub2RlUGF0aCk7CiAgICAgICAgfQogICAg\nICAgIHN5bmNocm9uaXplZCAoY3R4KSB7CiAgICAgICAgICAgIGFzeW5jR2V0\nTGVkZ2Vyc0luU2luZ2xlTm9kZShub2RlUGF0aCwgbmV3IEdlbmVyaWNDYWxs\nYmFjazxIYXNoU2V0PExvbmc+PigpIHsKICAgICAgICAgICAgICAgIEBPdmVy\ncmlkZQogICAgICAgICAgICAgICAgcHVibGljIHZvaWQgb3BlcmF0aW9uQ29t\ncGxldGUoaW50IHJjLCBIYXNoU2V0PExvbmc+IHprQWN0aXZlTGVkZ2Vycykg\newogICAgICAgICAgICAgICAgICAgIHN5bmNocm9uaXplZCAoY3R4KSB7CiAg\nICAgICAgICAgICAgICAgICAgICAgIGlmIChDb2RlLk9LLmludFZhbHVlKCkg\nPT0gcmMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5sZWRn\nZXJzID0gemtBY3RpdmVMZWRnZXJzOwogICAgICAgICAgICAgICAgICAgICAg\nICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5yYyA9IHJjOwogICAg\nICAgICAgICAgICAgICAgICAgICBjdHgubm90aWZ5QWxsKCk7CiAgICAgICAg\nICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9\nKTsKICAgICAgICAgICAgY3R4LndhaXQoKTsKICAgICAgICB9CiAgICAgICAg\naWYgKENvZGUuT0suaW50VmFsdWUoKSAhPSBjdHgucmMgJiYgbnVsbCAhPSBj\ndHgubGVkZ2VycykgewogICAgICAgICAgICB0aHJvdyBuZXcgSU9FeGNlcHRp\nb24oIkVycm9yIG9uIGdldHRpbmcgbGVkZ2VycyBmcm9tIG5vZGUgIiArIG5v\nZGVQYXRoKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGN0eC5sZWRnZXJz\nOwogICAgfQoKICAgIC8qKgogICAgICogUHJvY2VzcyBsZWRnZXJzIGluIGEg\nc2luZ2xlIHprIG5vZGUuCiAgICAgKgogICAgICogPHA+CiAgICAgKiBmb3Ig\nZWFjaCBsZWRnZXIgZm91bmQgaW4gdGhpcyB6ayBub2RlLCBwcm9jZXNzb3Ij\ncHJvY2VzcyhsZWRnZXJJZCkgd2lsbCBiZSB0cmlnZ2VycmVkCiAgICAgKiB0\nbyBwcm9jZXNzIGEgc3BlY2lmaWMgbGVkZ2VyLiBhZnRlciBhbGwgbGVkZ2Vy\ncyBoYXMgYmVlbiBwcm9jZXNzZWQsIHRoZSBmaW5hbENiIHdpbGwKICAgICAq\nIGJlIGNhbGxlZCB3aXRoIHByb3ZpZGVkIGNvbnRleHQgb2JqZWN0LiBUaGUg\nUkMgcGFzc2VkIHRvIGZpbmFsQ2IgaXMgZGVjaWRlZCBieSA6CiAgICAgKiA8\ndWw+CiAgICAgKiA8bGk+IEFsbCBsZWRnZXJzIGFyZSBwcm9jZXNzZWQgc3Vj\nY2Vzc2Z1bGx5LCBzdWNjZXNzUmMgd2lsbCBiZSBwYXNzZWQuCiAgICAgKiA8\nbGk+IEVpdGhlciBsZWRnZXIgaXMgcHJvY2Vzc2VkIGZhaWxlZCwgZmFpbHVy\nZVJjIHdpbGwgYmUgcGFzc2VkLgogICAgICogPC91bD4KICAgICAqIDwvcD4K\nICAgICAqCiAgICAgKiBAcGFyYW0gcGF0aAogICAgICogICAgICAgICAgWmsg\nbm9kZSBwYXRoIHRvIHN0b3JlIGxlZGdlcnMKICAgICAqIEBwYXJhbSBwcm9j\nZXNzb3IKICAgICAqICAgICAgICAgIFByb2Nlc3NvciBwcm92aWRlZCB0byBw\ncm9jZXNzIGxlZGdlcgogICAgICogQHBhcmFtIGZpbmFsQ2IKICAgICAqICAg\nICAgICAgIENhbGxiYWNrIG9iamVjdCB3aGVuIGFsbCBsZWRnZXJzIGFyZSBw\ncm9jZXNzZWQKICAgICAqIEBwYXJhbSBjdHgKICAgICAqICAgICAgICAgIENv\nbnRleHQgb2JqZWN0IHBhc3NlZCB0byBmaW5hbENiCiAgICAgKiBAcGFyYW0g\nc3VjY2Vzc1JjCiAgICAgKiAgICAgICAgICBSQyBwYXNzZWQgdG8gZmluYWxD\nYiB3aGVuIGFsbCBsZWRnZXJzIGFyZSBwcm9jZXNzZWQgc3VjY2Vzc2Z1bGx5\nCiAgICAgKiBAcGFyYW0gZmFpbHVyZVJjCiAgICAgKiAgICAgICAgICBSQyBw\nYXNzZWQgdG8gZmluYWxDYiB3aGVuIGVpdGhlciBsZWRnZXIgaXMgcHJvY2Vz\nc2VkIGZhaWxlZAogICAgICovCiAgICBwcm90ZWN0ZWQgdm9pZCBhc3luY1By\nb2Nlc3NMZWRnZXJzSW5TaW5nbGVOb2RlKAogICAgICAgICAgICBmaW5hbCBT\ndHJpbmcgcGF0aCwgZmluYWwgUHJvY2Vzc29yPExvbmc+IHByb2Nlc3NvciwK\nICAgICAgICAgICAgZmluYWwgQXN5bmNDYWxsYmFjay5Wb2lkQ2FsbGJhY2sg\nZmluYWxDYiwgZmluYWwgT2JqZWN0IGN0eCwKICAgICAgICAgICAgZmluYWwg\naW50IHN1Y2Nlc3NSYywgZmluYWwgaW50IGZhaWx1cmVSYykgewogICAgICAg\nIGFzeW5jR2V0TGVkZ2Vyc0luU2luZ2xlTm9kZShwYXRoLCBuZXcgR2VuZXJp\nY0NhbGxiYWNrPEhhc2hTZXQ8TG9uZz4+KCkgewogICAgICAgICAgICBAT3Zl\ncnJpZGUKICAgICAgICAgICAgcHVibGljIHZvaWQgb3BlcmF0aW9uQ29tcGxl\ndGUoaW50IHJjLCBIYXNoU2V0PExvbmc+IHprQWN0aXZlTGVkZ2Vycykgewog\nICAgICAgICAgICAgICAgaWYgKENvZGUuT0suaW50VmFsdWUoKSAhPSByYykg\newogICAgICAgICAgICAgICAgICAgIGZpbmFsQ2IucHJvY2Vzc1Jlc3VsdChm\nYWlsdXJlUmMsIG51bGwsIGN0eCk7CiAgICAgICAgICAgICAgICAgICAgcmV0\ndXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChM\nT0cuaXNEZWJ1Z0VuYWJsZWQoKSkgewogICAgICAgICAgICAgICAgICAgIExP\nRy5kZWJ1ZygiUHJvY2Vzc2luZyBsZWRnZXJzIDogIiArIHprQWN0aXZlTGVk\nZ2Vycyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8g\nbm8gbGVkZ2VycyBmb3VuZCwgcmV0dXJuIGRpcmVjdGx5CiAgICAgICAgICAg\nICAgICBpZiAoemtBY3RpdmVMZWRnZXJzLnNpemUoKSA9PSAwKSB7CiAgICAg\nICAgICAgICAgICAgICAgZmluYWxDYi5wcm9jZXNzUmVzdWx0KHN1Y2Nlc3NS\nYywgbnVsbCwgY3R4KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAg\nICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgTXVsdGlDYWxsYmFj\nayBtY2IgPSBuZXcgTXVsdGlDYWxsYmFjayh6a0FjdGl2ZUxlZGdlcnMuc2l6\nZSgpLCBmaW5hbENiLCBjdHgsCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NSYywgZmFpbHVy\nZVJjKTsKICAgICAgICAgICAgICAgIC8vIHN0YXJ0IGxvb3Agb3ZlciBhbGwg\nbGVkZ2VycwogICAgICAgICAgICAgICAgZm9yIChMb25nIGxlZGdlciA6IHpr\nQWN0aXZlTGVkZ2VycykgewogICAgICAgICAgICAgICAgICAgIHByb2Nlc3Nv\nci5wcm9jZXNzKGxlZGdlciwgbWNiKTsKICAgICAgICAgICAgICAgIH0KICAg\nICAgICAgICAgfQogICAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgICog\nV2hldGhlciB0aGUgem5vZGUgYSBzcGVjaWFsIHpub2RlCiAgICAgKgogICAg\nICogQHBhcmFtIHpub2RlCiAgICAgKiAgICAgICAgICBabm9kZSBOYW1lCiAg\nICAgKiBAcmV0dXJuIHRydWUgIGlmIHRoZSB6bm9kZSBpcyBhIHNwZWNpYWwg\nem5vZGUgb3RoZXJ3aXNlIGZhbHNlCiAgICAgKi8KICAgIHByb3RlY3RlZCBi\nb29sZWFuIGlzU3BlY2lhbFpub2RlKFN0cmluZyB6bm9kZSkgewogICAgICAg\nIGlmIChBVkFJTEFCTEVfTk9ERS5lcXVhbHMoem5vZGUpIAogICAgICAgICAg\nICB8fCBMZWRnZXJMYXlvdXQuTEFZT1VUX1pOT0RFLmVxdWFscyh6bm9kZSkp\nIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAg\nIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1Ymxp\nYyB2b2lkIGNsb3NlKCkgewogICAgfQp9Cg==\n","encoding":"base64"}

