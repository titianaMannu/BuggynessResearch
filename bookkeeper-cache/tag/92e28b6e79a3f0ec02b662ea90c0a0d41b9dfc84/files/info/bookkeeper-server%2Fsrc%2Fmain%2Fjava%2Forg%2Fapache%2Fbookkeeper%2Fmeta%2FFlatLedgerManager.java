{"sha":"5e67795e6a326bd2956fbf73832c3778bdad1475","node_id":"MDQ6QmxvYjE1NzU5NTY6NWU2Nzc5NWU2YTMyNmJkMjk1NmZiZjczODMyYzM3NzhiZGFkMTQ3NQ==","size":7157,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/5e67795e6a326bd2956fbf73832c3778bdad1475","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIubWV0YTsKCi8qKgogKiBM\naWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFT\nRikgdW5kZXIgb25lCiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBh\nZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQogKiBkaXN0cmlidXRl\nZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbgog\nKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGlj\nZW5zZXMgdGhpcyBmaWxlCiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExp\nY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUKICogIkxpY2Vuc2UiKTsgeW91IG1h\neSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZQogKiB3\naXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRo\nZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcv\nbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5\nIGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0\nd2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0\ncmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJB\nTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJl\nc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3Bl\nY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBs\naW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgppbXBvcnQgamF2\nYS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50\nLkNvbmN1cnJlbnRNYXA7CmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5D\nb25jdXJyZW50SGFzaE1hcDsKaW1wb3J0IGphdmEudXRpbC5IYXNoU2V0OwoK\naW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5jb25mLkFic3RyYWN0Q29u\nZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5wcm90\nby5Cb29ra2VlcGVySW50ZXJuYWxDYWxsYmFja3MuR2VuZXJpY0NhbGxiYWNr\nOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLnByb3RvLkJvb2trZWVw\nZXJJbnRlcm5hbENhbGxiYWNrcy5Qcm9jZXNzb3I7CmltcG9ydCBvcmcuYXBh\nY2hlLmJvb2trZWVwZXIudXRpbC5TdHJpbmdVdGlsczsKaW1wb3J0IG9yZy5h\ncGFjaGUuYm9va2tlZXBlci51dGlsLlprVXRpbHM7CmltcG9ydCBvcmcuYXBh\nY2hlLnpvb2tlZXBlci5Bc3luY0NhbGxiYWNrOwppbXBvcnQgb3JnLmFwYWNo\nZS56b29rZWVwZXIuQXN5bmNDYWxsYmFjay5TdHJpbmdDYWxsYmFjazsKaW1w\nb3J0IG9yZy5hcGFjaGUuem9va2VlcGVyLkNyZWF0ZU1vZGU7CmltcG9ydCBv\ncmcuYXBhY2hlLnpvb2tlZXBlci5LZWVwZXJFeGNlcHRpb24uQ29kZTsKaW1w\nb3J0IG9yZy5hcGFjaGUuem9va2VlcGVyLlpvb0RlZnMuSWRzOwppbXBvcnQg\nb3JnLmFwYWNoZS56b29rZWVwZXIuWm9vS2VlcGVyOwppbXBvcnQgb3JnLnNs\nZjRqLkxvZ2dlcjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJGYWN0b3J5OwoK\nLyoqCiAqIE1hbmFnZSBhbGwgbGVkZ2VycyBpbiBhIHNpbmdsZSB6ayBub2Rl\nLgogKgogKiA8cD4KICogQWxsIGxlZGdlcnMnIG1ldGFkYXRhIGFyZSBwdXQg\naW4gYSBzaW5nbGUgemsgbm9kZSwgY3JlYXRlZCB1c2luZyB6ayBzZXF1ZW50\naWFsIG5vZGUuCiAqIEVhY2ggbGVkZ2VyIG5vZGUgaXMgcHJlZml4ZWQgd2l0\naCAnTCcuCiAqIDwvcD4KICogPHA+CiAqIEFsbCBhY3RpdmVkIGxlZGdlcnMg\nZm91bmQgaW4gYm9va2llIHNlcnZlciBzaWRlIGlzIG1hbmFnZWQgaW4gYSBo\nYXNoIG1hcC4KICogPC9wPgogKiA8cD4KICogR2FyYmFnZSBjb2xsZWN0aW9u\nIGluIEZsYXRMZWRnZXJNYW5hZ2VyIGlzIHByb2Nzc2VkIGFzIGJlbG93Ogog\nKiA8dWw+CiAqIDxsaT4gZmV0Y2ggYWxsIGV4aXN0ZWQgbGVkZ2VycyBmcm9t\nIHpvb2tlZXBlciwgc2FpZCA8Yj56a0FjdGl2ZUxlZGdlcnM8L2I+CiAqIDxs\naT4gZmV0Y2ggYWxsIGFjdGl2ZSBsZWRnZXJzIGZyb20gYm9va2llIHNlcnZl\nciwgc2FpZCA8Yj5ia0FjdGl2ZUxlZGdlcnM8L2I+CiAqIDxsaT4gbG9vcCBv\ndmVyIDxiPmJrQWN0aXZlTGVkZ2VyczwvYj4gdG8gZmluZCB0aG9zZSBsZWRn\nZXJzIGFyZW4ndCBleGlzdGVkIGluCiAqIDxiPnprQWN0aXZlTGVkZ2Vyczwv\nYj4sIGRvIGdhcmJhZ2UgY29sbGVjdGlvbiBvbiB0aGVtLgogKiA8L3VsPgog\nKiA8L3A+CiAqLwpjbGFzcyBGbGF0TGVkZ2VyTWFuYWdlciBleHRlbmRzIEFi\nc3RyYWN0WmtMZWRnZXJNYW5hZ2VyIHsKCiAgICBzdGF0aWMgZmluYWwgTG9n\nZ2VyIExPRyA9IExvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKEZsYXRMZWRnZXJN\nYW5hZ2VyLmNsYXNzKTsKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgU3RyaW5n\nIE5BTUUgPSAiZmxhdCI7CiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBD\nVVJfVkVSU0lPTiA9IDE7CgogICAgLy8gcGF0aCBwcmVmaXggdG8gc3RvcmUg\nbGVkZ2VyIHpub2RlcwogICAgcHJpdmF0ZSBmaW5hbCBTdHJpbmcgbGVkZ2Vy\nUHJlZml4OwogICAgLy8gaGFzaCBtYXAgdG8gc3RvcmUgYWxsIGFjdGl2ZSBs\nZWRnZXIgaWRzCiAgICBwcml2YXRlIENvbmN1cnJlbnRNYXA8TG9uZywgQm9v\nbGVhbj4gYWN0aXZlTGVkZ2VyczsKCiAgICAvKioKICAgICAqIENvbnN0cnVj\ndG9yCiAgICAgKgogICAgICogQHBhcmFtIGNvbmYKICAgICAqICAgICAgICAg\nIENvbmZpZ3VyYXRpb24gb2JqZWN0CiAgICAgKiBAcGFyYW0gemsKICAgICAq\nICAgICAgICAgIFpvb0tlZXBlciBDbGllbnQgSGFuZGxlCiAgICAgKiBAcGFy\nYW0gbGVkZ2VyUm9vdFBhdGgKICAgICAqICAgICAgICAgIFpvb0tlZXBlciBQ\nYXRoIHRvIHN0b3JlIGxlZGdlciBtZXRhZGF0YQogICAgICogQHRocm93cyBJ\nT0V4Y2VwdGlvbiB3aGVuIHZlcnNpb24gaXMgbm90IGNvbXBhdGlibGUKICAg\nICAqLwogICAgcHVibGljIEZsYXRMZWRnZXJNYW5hZ2VyKEFic3RyYWN0Q29u\nZmlndXJhdGlvbiBjb25mLCBab29LZWVwZXIgemssCiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgU3RyaW5nIGxlZGdlclJvb3RQYXRoLCBpbnQgbGF5\nb3V0VmVyc2lvbikKICAgICAgICB0aHJvd3MgSU9FeGNlcHRpb24gewogICAg\nICAgIHN1cGVyKGNvbmYsIHprLCBsZWRnZXJSb290UGF0aCk7CgogICAgICAg\nIGlmIChsYXlvdXRWZXJzaW9uICE9IENVUl9WRVJTSU9OKSB7CiAgICAgICAg\nICAgIHRocm93IG5ldyBJT0V4Y2VwdGlvbigiSW5jb21wYXRpYmxlIGxheW91\ndCB2ZXJzaW9uIGZvdW5kIDogIiAKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICsgbGF5b3V0VmVyc2lvbik7CiAgICAgICAgfQoKICAgICAg\nICBsZWRnZXJQcmVmaXggPSBsZWRnZXJSb290UGF0aCArICIvIiArIExFREdF\nUl9OT0RFX1BSRUZJWDsKICAgICAgICBhY3RpdmVMZWRnZXJzID0gbmV3IENv\nbmN1cnJlbnRIYXNoTWFwPExvbmcsIEJvb2xlYW4+KCk7CiAgICB9CgogICAg\nQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBuZXdMZWRnZXJQYXRoKGZpbmFs\nIEdlbmVyaWNDYWxsYmFjazxTdHJpbmc+IGNiKSB7CiAgICAgICAgU3RyaW5n\nQ2FsbGJhY2sgc2NiID0gbmV3IFN0cmluZ0NhbGxiYWNrKCkgewogICAgICAg\nICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIHZvaWQgcHJvY2Vz\nc1Jlc3VsdChpbnQgcmMsIFN0cmluZyBwYXRoLCBPYmplY3QgY3R4LAogICAg\nICAgICAgICAgICAgICAgIFN0cmluZyBuYW1lKSB7CiAgICAgICAgICAgICAg\nICBpZiAoQ29kZS5PSy5pbnRWYWx1ZSgpICE9IHJjKSB7CiAgICAgICAgICAg\nICAgICAgICAgY2Iub3BlcmF0aW9uQ29tcGxldGUocmMsIG51bGwpOwogICAg\nICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjYi5v\ncGVyYXRpb25Db21wbGV0ZShyYywgbmFtZSk7CiAgICAgICAgICAgICAgICB9\nCiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIFprVXRpbHMuY3Jl\nYXRlRnVsbFBhdGhPcHRpbWlzdGljKHprLCBsZWRnZXJQcmVmaXgsIG5ldyBi\neXRlWzBdLAogICAgICAgICAgICBJZHMuT1BFTl9BQ0xfVU5TQUZFLCBDcmVh\ndGVNb2RlLlBFUlNJU1RFTlRfU0VRVUVOVElBTCwgc2NiLCBudWxsKTsKICAg\nIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBTdHJpbmcgZ2V0TGVkZ2Vy\nUGF0aChsb25nIGxlZGdlcklkKSB7CiAgICAgICAgU3RyaW5nQnVpbGRlciBz\nYiA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7CiAgICAgICAgc2IuYXBwZW5kKGxl\nZGdlclByZWZpeCkKICAgICAgICAgIC5hcHBlbmQoU3RyaW5nVXRpbHMuZ2V0\nWktTdHJpbmdJZChsZWRnZXJJZCkpOwogICAgICAgIHJldHVybiBzYi50b1N0\ncmluZygpOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIGxvbmcg\nZ2V0TGVkZ2VySWQoU3RyaW5nIG5vZGVOYW1lKSB0aHJvd3MgSU9FeGNlcHRp\nb24gewogICAgICAgIGxvbmcgbGVkZ2VySWQ7CiAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgU3RyaW5nIHBhcnRzW10gPSBub2RlTmFtZS5zcGxpdChsZWRn\nZXJQcmVmaXgpOwogICAgICAgICAgICBsZWRnZXJJZCA9IExvbmcucGFyc2VM\nb25nKHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdKTsKICAgICAgICB9IGNhdGNo\nIChOdW1iZXJGb3JtYXRFeGNlcHRpb24gZSkgewogICAgICAgICAgICB0aHJv\ndyBuZXcgSU9FeGNlcHRpb24oZSk7CiAgICAgICAgfQogICAgICAgIHJldHVy\nbiBsZWRnZXJJZDsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2\nb2lkIGFzeW5jUHJvY2Vzc0xlZGdlcnMoZmluYWwgUHJvY2Vzc29yPExvbmc+\nIHByb2Nlc3NvciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgZmluYWwgQXN5bmNDYWxsYmFjay5Wb2lkQ2FsbGJhY2sgZmluYWxDYiwg\nZmluYWwgT2JqZWN0IGN0eCwKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgZmluYWwgaW50IHN1Y2Nlc3NSYywgZmluYWwgaW50IGZhaWx1\ncmVSYykgewogICAgICAgIGFzeW5jUHJvY2Vzc0xlZGdlcnNJblNpbmdsZU5v\nZGUobGVkZ2VyUm9vdFBhdGgsIHByb2Nlc3NvciwgZmluYWxDYiwgY3R4LCBz\ndWNjZXNzUmMsIGZhaWx1cmVSYyk7CiAgICB9CgogICAgQE92ZXJyaWRlCiAg\nICBwdWJsaWMgdm9pZCBhZGRBY3RpdmVMZWRnZXIobG9uZyBsZWRnZXJJZCwg\nYm9vbGVhbiBhY3RpdmUpIHsKICAgICAgICBhY3RpdmVMZWRnZXJzLnB1dChs\nZWRnZXJJZCwgYWN0aXZlKTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1\nYmxpYyB2b2lkIHJlbW92ZUFjdGl2ZUxlZGdlcihsb25nIGxlZGdlcklkKSB7\nCiAgICAgICAgYWN0aXZlTGVkZ2Vycy5yZW1vdmUobGVkZ2VySWQpOwogICAg\nfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIGJvb2xlYW4gY29udGFpbnNB\nY3RpdmVMZWRnZXIobG9uZyBsZWRnZXJJZCkgewogICAgICAgIHJldHVybiBh\nY3RpdmVMZWRnZXJzLmNvbnRhaW5zS2V5KGxlZGdlcklkKTsKICAgIH0KCiAg\nICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIGdhcmJhZ2VDb2xsZWN0TGVk\nZ2VycyhHYXJiYWdlQ29sbGVjdG9yIGdjKSB7CiAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgSGFzaFNldDxMb25nPiB6a0FjdGl2ZUxlZGdlcnMgPSBnZXRM\nZWRnZXJzSW5TaW5nbGVOb2RlKGxlZGdlclJvb3RQYXRoKTsKICAgICAgICAg\nICAgQ29uY3VycmVudE1hcDxMb25nLCBCb29sZWFuPiBia0FjdGl2ZUxlZGdl\ncnMgPSBhY3RpdmVMZWRnZXJzOwogICAgICAgICAgICBpZiAoTE9HLmlzRGVi\ndWdFbmFibGVkKCkpIHsKICAgICAgICAgICAgICAgIExPRy5kZWJ1ZygiQWxs\nIGFjdGl2ZSBsZWRnZXJzIGZyb20gWks6ICIgKyB6a0FjdGl2ZUxlZGdlcnMp\nOwogICAgICAgICAgICAgICAgTE9HLmRlYnVnKCJDdXJyZW50IGFjdGl2ZSBs\nZWRnZXJzIGZyb20gQm9va2llOiAiICsgYmtBY3RpdmVMZWRnZXJzLmtleVNl\ndCgpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBkb0djKGdjLCBia0Fj\ndGl2ZUxlZGdlcnMsIHprQWN0aXZlTGVkZ2Vycyk7CiAgICAgICAgfSBjYXRj\naCAoSU9FeGNlcHRpb24gaWUpIHsKICAgICAgICAgICAgTE9HLndhcm4oIkVy\ncm9yIGR1cmluZyBnYXJiYWdlIGNvbGxlY3RpbmcgbGVkZ2VycyBmcm9tICIg\nKyBsZWRnZXJSb290UGF0aCwgaWUpOwogICAgICAgIH0gY2F0Y2ggKEludGVy\ncnVwdGVkRXhjZXB0aW9uIGludGUpIHsKICAgICAgICAgICAgTE9HLndhcm4o\nIkludGVycnVwdGVkIGR1cmluZyBnYXJiYWdlIGNvbGxlY3RpbmcgbGVkZ2Vy\ncyBmcm9tICIgKyBsZWRnZXJSb290UGF0aCwgaW50ZSk7CiAgICAgICAgfQog\nICAgfQoKICAgIC8qKgogICAgICogRG8gZ2FyYmFnZSBjb2xsZWN0aW5nIGNv\nbXBhcmluZyBob3N0ZWQgbGVkZ2VycyBhbmQgemsgbGVkZ2VycwogICAgICoK\nICAgICAqIEBwYXJhbSBnYwogICAgICogICAgICAgICAgR2FyYmFnZSBjb2xs\nZWN0b3IgdG8gZG8gZ2FyYmFnZSBjb2xsZWN0aW9uIHdoZW4gZm91bmQgaW5h\nY3RpdmUvZGVsZXRlZCBsZWRnZXJzCiAgICAgKiBAcGFyYW0gYmtBY3RpdmVM\nZWRnZXJzCiAgICAgKiAgICAgICAgICBBY3RpdmUgbGVkZ2VycyBob3N0ZWQg\naW4gYm9va2llIHNlcnZlcgogICAgICogQHBhcmFtIHprQWxsTGVkZ2Vycwog\nICAgICogICAgICAgICAgQWxsIGxlZGdlcnMgc3RvcmVkIGluIHpvb2tlZXBl\ncgogICAgICovCiAgICB2b2lkIGRvR2MoR2FyYmFnZUNvbGxlY3RvciBnYywg\nQ29uY3VycmVudE1hcDxMb25nLCBCb29sZWFuPiBia0FjdGl2ZUxlZGdlcnMs\nIEhhc2hTZXQ8TG9uZz4gemtBbGxMZWRnZXJzKSB7CiAgICAgICAgLy8gcmVt\nb3ZlIGFueSBhY3RpdmUgbGVkZ2VycyB0aGF0IGRvZXNuJ3QgZXhpc3QgaW4g\nemsKICAgICAgICBmb3IgKExvbmcgYmtMaWQgOiBia0FjdGl2ZUxlZGdlcnMu\na2V5U2V0KCkpIHsKICAgICAgICAgICAgaWYgKCF6a0FsbExlZGdlcnMuY29u\ndGFpbnMoYmtMaWQpKSB7CiAgICAgICAgICAgICAgICAvLyByZW1vdmUgaXQg\nZnJvbSBjdXJyZW50IGFjdGl2ZSBsZWRnZXIKICAgICAgICAgICAgICAgIGJr\nQWN0aXZlTGVkZ2Vycy5yZW1vdmUoYmtMaWQpOwogICAgICAgICAgICAgICAg\nZ2MuZ2MoYmtMaWQpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoK\nfQo=\n","encoding":"base64"}

