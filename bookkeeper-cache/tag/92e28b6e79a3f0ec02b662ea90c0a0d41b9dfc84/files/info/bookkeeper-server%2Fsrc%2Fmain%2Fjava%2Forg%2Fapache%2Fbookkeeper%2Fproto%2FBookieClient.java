{"sha":"4466ce3f02415c0a6d807b3497f3b5968d672e07","node_id":"MDQ6QmxvYjE1NzU5NTY6NDQ2NmNlM2YwMjQxNWMwYTZkODA3YjM0OTdmM2I1OTY4ZDY3MmUwNw==","size":6773,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/4466ce3f02415c0a6d807b3497f3b5968d672e07","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIucHJvdG87CgovKgogKgog\nKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24g\nKEFTRikgdW5kZXIgb25lCiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5z\nZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQogKiBkaXN0cmli\ndXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlv\nbgogKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0Yg\nbGljZW5zZXMgdGhpcyBmaWxlCiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hl\nIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUKICogIkxpY2Vuc2UiKTsgeW91\nIG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZQog\nKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9m\nIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3Jn\nL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBi\neSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywKICog\nc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlz\ndHJpYnV0ZWQgb24gYW4KICogIkFTIElTIiBCQVNJUywgV0lUSE9VVCBXQVJS\nQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZCiAqIEtJTkQsIGVpdGhlciBl\neHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZQog\nKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5k\nIGxpbWl0YXRpb25zCiAqIHVuZGVyIHRoZSBMaWNlbnNlLgogKgogKi8KCmlt\ncG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uOwppbXBvcnQgamF2YS5uZXQuSW5l\ndFNvY2tldEFkZHJlc3M7CmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5D\nb25jdXJyZW50SGFzaE1hcDsKaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50\nLkV4ZWN1dG9yczsKaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LmF0b21p\nYy5BdG9taWNMb25nOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNv\nbmYuQ2xpZW50Q29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuYm9v\na2tlZXBlci5jbGllbnQuQktFeGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hl\nLmJvb2trZWVwZXIucHJvdG8uQm9va2tlZXBlckludGVybmFsQ2FsbGJhY2tz\nLlJlYWRFbnRyeUNhbGxiYWNrOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2Vl\ncGVyLnByb3RvLkJvb2trZWVwZXJJbnRlcm5hbENhbGxiYWNrcy5HZW5lcmlj\nQ2FsbGJhY2s7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIucHJvdG8u\nQm9va2tlZXBlckludGVybmFsQ2FsbGJhY2tzLldyaXRlQ2FsbGJhY2s7Cmlt\ncG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIudXRpbC5PcmRlcmVkU2FmZUV4\nZWN1dG9yOwppbXBvcnQgb3JnLnNsZjRqLkxvZ2dlcjsKaW1wb3J0IG9yZy5z\nbGY0ai5Mb2dnZXJGYWN0b3J5OwppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmJ1\nZmZlci5DaGFubmVsQnVmZmVyOwppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmJ1\nZmZlci5DaGFubmVsQnVmZmVyczsKaW1wb3J0IG9yZy5qYm9zcy5uZXR0eS5j\naGFubmVsLnNvY2tldC5DbGllbnRTb2NrZXRDaGFubmVsRmFjdG9yeTsKaW1w\nb3J0IG9yZy5qYm9zcy5uZXR0eS5jaGFubmVsLnNvY2tldC5uaW8uTmlvQ2xp\nZW50U29ja2V0Q2hhbm5lbEZhY3Rvcnk7CgovKioKICogSW1wbGVtZW50cyB0\naGUgY2xpZW50LXNpZGUgcGFydCBvZiB0aGUgQm9va0tlZXBlciBwcm90b2Nv\nbC4KICoKICovCnB1YmxpYyBjbGFzcyBCb29raWVDbGllbnQgewogICAgc3Rh\ndGljIGZpbmFsIExvZ2dlciBMT0cgPSBMb2dnZXJGYWN0b3J5LmdldExvZ2dl\ncihCb29raWVDbGllbnQuY2xhc3MpOwoKICAgIC8vIFRoaXMgaXMgZ2xvYmFs\nIHN0YXRlIHRoYXQgc2hvdWxkIGJlIGFjcm9zcyBhbGwgQm9va2llQ2xpZW50\ncwogICAgQXRvbWljTG9uZyB0b3RhbEJ5dGVzT3V0c3RhbmRpbmcgPSBuZXcg\nQXRvbWljTG9uZygpOwoKICAgIE9yZGVyZWRTYWZlRXhlY3V0b3IgZXhlY3V0\nb3I7CiAgICBDbGllbnRTb2NrZXRDaGFubmVsRmFjdG9yeSBjaGFubmVsRmFj\ndG9yeTsKICAgIENvbmN1cnJlbnRIYXNoTWFwPEluZXRTb2NrZXRBZGRyZXNz\nLCBQZXJDaGFubmVsQm9va2llQ2xpZW50PiBjaGFubmVscyA9IG5ldyBDb25j\ndXJyZW50SGFzaE1hcDxJbmV0U29ja2V0QWRkcmVzcywgUGVyQ2hhbm5lbEJv\nb2tpZUNsaWVudD4oKTsKCiAgICBwcml2YXRlIGZpbmFsIENsaWVudENvbmZp\nZ3VyYXRpb24gY29uZjsKCiAgICBwdWJsaWMgQm9va2llQ2xpZW50KENsaWVu\ndENvbmZpZ3VyYXRpb24gY29uZiwgQ2xpZW50U29ja2V0Q2hhbm5lbEZhY3Rv\ncnkgY2hhbm5lbEZhY3RvcnksIE9yZGVyZWRTYWZlRXhlY3V0b3IgZXhlY3V0\nb3IpIHsKICAgICAgICB0aGlzLmNvbmYgPSBjb25mOwogICAgICAgIHRoaXMu\nY2hhbm5lbEZhY3RvcnkgPSBjaGFubmVsRmFjdG9yeTsKICAgICAgICB0aGlz\nLmV4ZWN1dG9yID0gZXhlY3V0b3I7CiAgICB9CgogICAgcHVibGljIFBlckNo\nYW5uZWxCb29raWVDbGllbnQgbG9va3VwQ2xpZW50KEluZXRTb2NrZXRBZGRy\nZXNzIGFkZHIpIHsKICAgICAgICBQZXJDaGFubmVsQm9va2llQ2xpZW50IGNo\nYW5uZWwgPSBjaGFubmVscy5nZXQoYWRkcik7CgogICAgICAgIGlmIChjaGFu\nbmVsID09IG51bGwpIHsKICAgICAgICAgICAgY2hhbm5lbCA9IG5ldyBQZXJD\naGFubmVsQm9va2llQ2xpZW50KGV4ZWN1dG9yLCBjaGFubmVsRmFjdG9yeSwg\nYWRkciwgdG90YWxCeXRlc091dHN0YW5kaW5nKTsKICAgICAgICAgICAgUGVy\nQ2hhbm5lbEJvb2tpZUNsaWVudCBwcmV2Q2hhbm5lbCA9IGNoYW5uZWxzLnB1\ndElmQWJzZW50KGFkZHIsIGNoYW5uZWwpOwogICAgICAgICAgICBpZiAocHJl\ndkNoYW5uZWwgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgY2hhbm5lbCA9\nIHByZXZDaGFubmVsOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAg\nICByZXR1cm4gY2hhbm5lbDsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBhZGRF\nbnRyeShmaW5hbCBJbmV0U29ja2V0QWRkcmVzcyBhZGRyLCBmaW5hbCBsb25n\nIGxlZGdlcklkLCBmaW5hbCBieXRlW10gbWFzdGVyS2V5LCBmaW5hbCBsb25n\nIGVudHJ5SWQsCiAgICAgICAgICAgIGZpbmFsIENoYW5uZWxCdWZmZXIgdG9T\nZW5kLCBmaW5hbCBXcml0ZUNhbGxiYWNrIGNiLCBmaW5hbCBPYmplY3QgY3R4\nLCBmaW5hbCBpbnQgb3B0aW9ucykgewogICAgICAgIGZpbmFsIFBlckNoYW5u\nZWxCb29raWVDbGllbnQgY2xpZW50ID0gbG9va3VwQ2xpZW50KGFkZHIpOwoK\nICAgICAgICBjbGllbnQuY29ubmVjdElmTmVlZGVkQW5kRG9PcChuZXcgR2Vu\nZXJpY0NhbGxiYWNrPFZvaWQ+KCkgewogICAgICAgICAgICBAT3ZlcnJpZGUK\nICAgICAgICAgICAgcHVibGljIHZvaWQgb3BlcmF0aW9uQ29tcGxldGUoaW50\nIHJjLCBWb2lkIHJlc3VsdCkgewogICAgICAgICAgICAgICAgaWYgKHJjICE9\nIEJLRXhjZXB0aW9uLkNvZGUuT0spIHsKICAgICAgICAgICAgICAgICAgICBj\nYi53cml0ZUNvbXBsZXRlKHJjLCBsZWRnZXJJZCwgZW50cnlJZCwgYWRkciwg\nY3R4KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAg\nICAgICB9CiAgICAgICAgICAgICAgICBjbGllbnQuYWRkRW50cnkobGVkZ2Vy\nSWQsIG1hc3RlcktleSwgZW50cnlJZCwgdG9TZW5kLCBjYiwgY3R4LCBvcHRp\nb25zKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHJlYWRFbnRyeShmaW5hbCBJbmV0U29ja2V0QWRkcmVzcyBh\nZGRyLCBmaW5hbCBsb25nIGxlZGdlcklkLCBmaW5hbCBsb25nIGVudHJ5SWQs\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWwgUmVhZEVudHJ5Q2Fs\nbGJhY2sgY2IsIGZpbmFsIE9iamVjdCBjdHgsIGZpbmFsIGludCBvcHRpb25z\nKSB7CiAgICAgICAgZmluYWwgUGVyQ2hhbm5lbEJvb2tpZUNsaWVudCBjbGll\nbnQgPSBsb29rdXBDbGllbnQoYWRkcik7CgogICAgICAgIGNsaWVudC5jb25u\nZWN0SWZOZWVkZWRBbmREb09wKG5ldyBHZW5lcmljQ2FsbGJhY2s8Vm9pZD4o\nKSB7CiAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICBwdWJsaWMg\ndm9pZCBvcGVyYXRpb25Db21wbGV0ZShpbnQgcmMsIFZvaWQgcmVzdWx0KSB7\nCgogICAgICAgICAgICAgICAgaWYgKHJjICE9IEJLRXhjZXB0aW9uLkNvZGUu\nT0spIHsKICAgICAgICAgICAgICAgICAgICBjYi5yZWFkRW50cnlDb21wbGV0\nZShyYywgbGVkZ2VySWQsIGVudHJ5SWQsIG51bGwsIGN0eCk7CiAgICAgICAg\nICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAg\nICAgICAgICAgY2xpZW50LnJlYWRFbnRyeShsZWRnZXJJZCwgZW50cnlJZCwg\nY2IsIGN0eCwgb3B0aW9ucyk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjbG9zZSgpIHsKICAgICAgICBmb3Ig\nKFBlckNoYW5uZWxCb29raWVDbGllbnQgY2hhbm5lbDogY2hhbm5lbHMudmFs\ndWVzKCkpIHsKICAgICAgICAgICAgY2hhbm5lbC5jbG9zZSgpOwogICAgICAg\nIH0KICAgIH0KCiAgICBwcml2YXRlIHN0YXRpYyBjbGFzcyBDb3VudGVyIHsK\nICAgICAgICBpbnQgaTsKICAgICAgICBpbnQgdG90YWw7CgogICAgICAgIHN5\nbmNocm9uaXplZCB2b2lkIGluYygpIHsKICAgICAgICAgICAgaSsrOwogICAg\nICAgICAgICB0b3RhbCsrOwogICAgICAgIH0KCiAgICAgICAgc3luY2hyb25p\nemVkIHZvaWQgZGVjKCkgewogICAgICAgICAgICBpLS07CiAgICAgICAgICAg\nIG5vdGlmeUFsbCgpOwogICAgICAgIH0KCiAgICAgICAgc3luY2hyb25pemVk\nIHZvaWQgd2FpdChpbnQgbGltaXQpIHRocm93cyBJbnRlcnJ1cHRlZEV4Y2Vw\ndGlvbiB7CiAgICAgICAgICAgIHdoaWxlIChpID4gbGltaXQpIHsKICAgICAg\nICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAg\nICAgICAgc3luY2hyb25pemVkIGludCB0b3RhbCgpIHsKICAgICAgICAgICAg\ncmV0dXJuIHRvdGFsOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAq\nIEBwYXJhbSBhcmdzCiAgICAgKiBAdGhyb3dzIElPRXhjZXB0aW9uCiAgICAg\nKiBAdGhyb3dzIE51bWJlckZvcm1hdEV4Y2VwdGlvbgogICAgICogQHRocm93\ncyBJbnRlcnJ1cHRlZEV4Y2VwdGlvbgogICAgICovCiAgICBwdWJsaWMgc3Rh\ndGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB0aHJvd3MgTnVtYmVyRm9y\nbWF0RXhjZXB0aW9uLCBJT0V4Y2VwdGlvbiwgSW50ZXJydXB0ZWRFeGNlcHRp\nb24gewogICAgICAgIGlmIChhcmdzLmxlbmd0aCAhPSAzKSB7CiAgICAgICAg\nICAgIFN5c3RlbS5lcnIucHJpbnRsbigiVVNBR0U6IEJvb2tpZUNsaWVudCBi\nb29raWVIb3N0IHBvcnQgbGVkZ2VyIyIpOwogICAgICAgICAgICByZXR1cm47\nCiAgICAgICAgfQogICAgICAgIFdyaXRlQ2FsbGJhY2sgY2IgPSBuZXcgV3Jp\ndGVDYWxsYmFjaygpIHsKCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIHdyaXRl\nQ29tcGxldGUoaW50IHJjLCBsb25nIGxlZGdlciwgbG9uZyBlbnRyeSwgSW5l\ndFNvY2tldEFkZHJlc3MgYWRkciwgT2JqZWN0IGN0eCkgewogICAgICAgICAg\nICAgICAgQ291bnRlciBjb3VudGVyID0gKENvdW50ZXIpIGN0eDsKICAgICAg\nICAgICAgICAgIGNvdW50ZXIuZGVjKCk7CiAgICAgICAgICAgICAgICBpZiAo\ncmMgIT0gMCkgewogICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJp\nbnRsbigicmMgPSAiICsgcmMgKyAiIGZvciAiICsgZW50cnkgKyAiQCIgKyBs\nZWRnZXIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAg\nICAgfTsKICAgICAgICBDb3VudGVyIGNvdW50ZXIgPSBuZXcgQ291bnRlcigp\nOwogICAgICAgIGJ5dGUgaGVsbG9bXSA9ICJoZWxsbyIuZ2V0Qnl0ZXMoKTsK\nICAgICAgICBsb25nIGxlZGdlciA9IExvbmcucGFyc2VMb25nKGFyZ3NbMl0p\nOwogICAgICAgIENsaWVudFNvY2tldENoYW5uZWxGYWN0b3J5IGNoYW5uZWxG\nYWN0b3J5ID0gbmV3IE5pb0NsaWVudFNvY2tldENoYW5uZWxGYWN0b3J5KEV4\nZWN1dG9ycy5uZXdDYWNoZWRUaHJlYWRQb29sKCksIEV4ZWN1dG9ycwogICAg\nICAgICAgICAgICAgLm5ld0NhY2hlZFRocmVhZFBvb2woKSk7CiAgICAgICAg\nT3JkZXJlZFNhZmVFeGVjdXRvciBleGVjdXRvciA9IG5ldyBPcmRlcmVkU2Fm\nZUV4ZWN1dG9yKDEpOwogICAgICAgIEJvb2tpZUNsaWVudCBiYyA9IG5ldyBC\nb29raWVDbGllbnQobmV3IENsaWVudENvbmZpZ3VyYXRpb24oKSwgY2hhbm5l\nbEZhY3RvcnksIGV4ZWN1dG9yKTsKICAgICAgICBJbmV0U29ja2V0QWRkcmVz\ncyBhZGRyID0gbmV3IEluZXRTb2NrZXRBZGRyZXNzKGFyZ3NbMF0sIEludGVn\nZXIucGFyc2VJbnQoYXJnc1sxXSkpOwoKICAgICAgICBmb3IgKGludCBpID0g\nMDsgaSA8IDEwMDAwMDsgaSsrKSB7CiAgICAgICAgICAgIGNvdW50ZXIuaW5j\nKCk7CiAgICAgICAgICAgIGJjLmFkZEVudHJ5KGFkZHIsIGxlZGdlciwgbmV3\nIGJ5dGVbMF0sIGksIENoYW5uZWxCdWZmZXJzLndyYXBwZWRCdWZmZXIoaGVs\nbG8pLCBjYiwgY291bnRlciwgMCk7CiAgICAgICAgfQogICAgICAgIGNvdW50\nZXIud2FpdCgwKTsKICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIlRvdGFs\nID0gIiArIGNvdW50ZXIudG90YWwoKSk7CiAgICAgICAgY2hhbm5lbEZhY3Rv\ncnkucmVsZWFzZUV4dGVybmFsUmVzb3VyY2VzKCk7CiAgICAgICAgZXhlY3V0\nb3Iuc2h1dGRvd24oKTsKICAgIH0KfQo=\n","encoding":"base64"}

