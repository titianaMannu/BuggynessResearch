{"sha":"9169d70a58e4d92fcf0b0bf6b6c8081c40368293","node_id":"MDQ6QmxvYjE1NzU5NTY6OTE2OWQ3MGE1OGU0ZDkyZmNmMGIwYmY2YjZjODA4MWM0MDM2ODI5Mw==","size":4461,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/9169d70a58e4d92fcf0b0bf6b6c8081c40368293","content":"LyoKICoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9y\nIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBU\naGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhl\nIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNl\nIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBs\naWFuY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEg\nY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBl\naXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZv\nciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Np\nb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICoK\nICovCgpwYWNrYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci5wcm90bzsKCmlt\ncG9ydCBqYXZhLm5ldC5JbmV0U29ja2V0QWRkcmVzczsKaW1wb3J0IGphdmEu\ndXRpbC5jb25jdXJyZW50LkxpbmtlZEJsb2NraW5nUXVldWU7CmltcG9ydCBq\nYXZhLnV0aWwuY29uY3VycmVudC5hdG9taWMuQXRvbWljSW50ZWdlcjsKCmlt\ncG9ydCBvcmcuYXBhY2hlLnpvb2tlZXBlci5Bc3luY0NhbGxiYWNrOwppbXBv\ncnQgb3JnLmpib3NzLm5ldHR5LmJ1ZmZlci5DaGFubmVsQnVmZmVyOwppbXBv\ncnQgb3JnLnNsZjRqLkxvZ2dlcjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJG\nYWN0b3J5OwoKLyoqCiAqIERlY2xhcmF0aW9uIG9mIGEgY2FsbGJhY2sgaW50\nZXJmYWNlcyB1c2VkIGluIGJvb2trZWVwZXIgY2xpZW50IGxpYnJhcnkgYnV0\nCiAqIG5vdCBleHBvc2VkIHRvIHRoZSBjbGllbnQgYXBwbGljYXRpb24uCiAq\nLwoKcHVibGljIGNsYXNzIEJvb2trZWVwZXJJbnRlcm5hbENhbGxiYWNrcyB7\nCgogICAgc3RhdGljIGZpbmFsIExvZ2dlciBMT0cgPSBMb2dnZXJGYWN0b3J5\nLmdldExvZ2dlcihCb29ra2VlcGVySW50ZXJuYWxDYWxsYmFja3MuY2xhc3Mp\nOwoKICAgIC8qKgogICAgICogQ2FsbGJhY2sgZm9yIGNhbGxzIGZyb20gQm9v\na2llQ2xpZW50IG9iamVjdHMuIFN1Y2ggY2FsbHMgYXJlIGZvciByZXBsaWVz\nCiAgICAgKiBvZiB3cml0ZSBvcGVyYXRpb25zIChvcGVyYXRpb25zIHRvIGFk\nZCBhbiBlbnRyeSB0byBhIGxlZGdlcikuCiAgICAgKgogICAgICovCgogICAg\ncHVibGljIGludGVyZmFjZSBXcml0ZUNhbGxiYWNrIHsKICAgICAgICB2b2lk\nIHdyaXRlQ29tcGxldGUoaW50IHJjLCBsb25nIGxlZGdlcklkLCBsb25nIGVu\ndHJ5SWQsIEluZXRTb2NrZXRBZGRyZXNzIGFkZHIsIE9iamVjdCBjdHgpOwog\nICAgfQoKICAgIHB1YmxpYyBpbnRlcmZhY2UgR2VuZXJpY0NhbGxiYWNrPFQ+\nIHsKICAgICAgICB2b2lkIG9wZXJhdGlvbkNvbXBsZXRlKGludCByYywgVCBy\nZXN1bHQpOwogICAgfQoKICAgIC8qKgogICAgICogRGVjbGFyYXRpb24gb2Yg\nYSBjYWxsYmFjayBpbXBsZW1lbnRhdGlvbiBmb3IgY2FsbHMgZnJvbSBCb29r\naWVDbGllbnQgb2JqZWN0cy4KICAgICAqIFN1Y2ggY2FsbHMgYXJlIGZvciBy\nZXBsaWVzIG9mIHJlYWQgb3BlcmF0aW9ucyAob3BlcmF0aW9ucyB0byByZWFk\nIGFuIGVudHJ5CiAgICAgKiBmcm9tIGEgbGVkZ2VyKS4KICAgICAqCiAgICAg\nKi8KCiAgICBwdWJsaWMgaW50ZXJmYWNlIFJlYWRFbnRyeUNhbGxiYWNrIHsK\nICAgICAgICB2b2lkIHJlYWRFbnRyeUNvbXBsZXRlKGludCByYywgbG9uZyBs\nZWRnZXJJZCwgbG9uZyBlbnRyeUlkLCBDaGFubmVsQnVmZmVyIGJ1ZmZlciwg\nT2JqZWN0IGN0eCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGlzIGlzIGEg\nbXVsdGkgY2FsbGJhY2sgb2JqZWN0IHRoYXQgd2FpdHMgZm9yIGFsbCBvZgog\nICAgICogdGhlIG11bHRpcGxlIGFzeW5jIG9wZXJhdGlvbnMgdG8gY29tcGxl\ndGUuIElmIGFueSBmYWlsLCB0aGVuIHdlIGludm9rZQogICAgICogdGhlIGZp\nbmFsIGNhbGxiYWNrIHdpdGggYSBwcm92aWRlZCBmYWlsdXJlUmMKICAgICAq\nLwogICAgcHVibGljIHN0YXRpYyBjbGFzcyBNdWx0aUNhbGxiYWNrIGltcGxl\nbWVudHMgQXN5bmNDYWxsYmFjay5Wb2lkQ2FsbGJhY2sgewogICAgICAgIC8v\nIE51bWJlciBvZiBleHBlY3RlZCBjYWxsYmFja3MKICAgICAgICBmaW5hbCBp\nbnQgZXhwZWN0ZWQ7CiAgICAgICAgZmluYWwgaW50IGZhaWx1cmVSYzsKICAg\nICAgICBmaW5hbCBpbnQgc3VjY2Vzc1JjOwogICAgICAgIC8vIEZpbmFsIGNh\nbGxiYWNrIGFuZCB0aGUgY29ycmVzcG9uZGluZyBjb250ZXh0IHRvIGludm9r\nZQogICAgICAgIGZpbmFsIEFzeW5jQ2FsbGJhY2suVm9pZENhbGxiYWNrIGNi\nOwogICAgICAgIGZpbmFsIE9iamVjdCBjb250ZXh0OwogICAgICAgIC8vIFRo\naXMga2VlcHMgdHJhY2sgb2YgaG93IG1hbnkgb3BlcmF0aW9ucyBoYXZlIGNv\nbXBsZXRlZAogICAgICAgIGZpbmFsIEF0b21pY0ludGVnZXIgZG9uZSA9IG5l\ndyBBdG9taWNJbnRlZ2VyKCk7CiAgICAgICAgLy8gTGlzdCBvZiB0aGUgZXhj\nZXB0aW9ucyBmcm9tIG9wZXJhdGlvbnMgdGhhdCBjb21wbGV0ZWQgdW5zdWNj\nZXNzZnVsbHkKICAgICAgICBmaW5hbCBMaW5rZWRCbG9ja2luZ1F1ZXVlPElu\ndGVnZXI+IGV4Y2VwdGlvbnMgPSBuZXcgTGlua2VkQmxvY2tpbmdRdWV1ZTxJ\nbnRlZ2VyPigpOwoKICAgICAgICBwdWJsaWMgTXVsdGlDYWxsYmFjayhpbnQg\nZXhwZWN0ZWQsIEFzeW5jQ2FsbGJhY2suVm9pZENhbGxiYWNrIGNiLCBPYmpl\nY3QgY29udGV4dCwgaW50IHN1Y2Nlc3NSYywgaW50IGZhaWx1cmVSYykgewog\nICAgICAgICAgICB0aGlzLmV4cGVjdGVkID0gZXhwZWN0ZWQ7CiAgICAgICAg\nICAgIHRoaXMuY2IgPSBjYjsKICAgICAgICAgICAgdGhpcy5jb250ZXh0ID0g\nY29udGV4dDsKICAgICAgICAgICAgdGhpcy5mYWlsdXJlUmMgPSBmYWlsdXJl\nUmM7CiAgICAgICAgICAgIHRoaXMuc3VjY2Vzc1JjID0gc3VjY2Vzc1JjOwog\nICAgICAgICAgICBpZiAoZXhwZWN0ZWQgPT0gMCkgewogICAgICAgICAgICAg\nICAgY2IucHJvY2Vzc1Jlc3VsdChzdWNjZXNzUmMsIG51bGwsIGNvbnRleHQp\nOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBwcml2YXRlIHZv\naWQgdGljaygpIHsKICAgICAgICAgICAgaWYgKGRvbmUuaW5jcmVtZW50QW5k\nR2V0KCkgPT0gZXhwZWN0ZWQpIHsKICAgICAgICAgICAgICAgIGlmIChleGNl\ncHRpb25zLmlzRW1wdHkoKSkgewogICAgICAgICAgICAgICAgICAgIGNiLnBy\nb2Nlc3NSZXN1bHQoc3VjY2Vzc1JjLCBudWxsLCBjb250ZXh0KTsKICAgICAg\nICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgY2IucHJv\nY2Vzc1Jlc3VsdChmYWlsdXJlUmMsIG51bGwsIGNvbnRleHQpOwogICAgICAg\nICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBA\nT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgdm9pZCBwcm9jZXNzUmVzdWx0KGlu\ndCByYywgU3RyaW5nIHBhdGgsIE9iamVjdCBjdHgpIHsKICAgICAgICAgICAg\naWYgKHJjICE9IHN1Y2Nlc3NSYykgewogICAgICAgICAgICAgICAgTE9HLmVy\ncm9yKCJFcnJvciBpbiBtdXRpbCBjYWxsYmFjayA6ICIgKyByYyk7CiAgICAg\nICAgICAgICAgICBleGNlcHRpb25zLmFkZChyYyk7CiAgICAgICAgICAgIH0K\nICAgICAgICAgICAgdGljaygpOwogICAgICAgIH0KCiAgICB9CgogICAgLyoq\nCiAgICAgKiBQcm9jZXNzb3IgdG8gcHJvY2VzcyBhIHNwZWNpZmljIGVsZW1l\nbnQKICAgICAqLwogICAgcHVibGljIHN0YXRpYyBpbnRlcmZhY2UgUHJvY2Vz\nc29yPFQ+IHsKICAgICAgICAvKioKICAgICAgICAgKiBQcm9jZXNzIGEgc3Bl\nY2lmaWMgZWxlbWVudAogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIGRh\ndGEKICAgICAgICAgKiAgICAgICAgICBkYXRhIHRvIHByb2Nlc3MKICAgICAg\nICAgKiBAcGFyYW0gaXRlcmF0aW9uQ2FsbGJhY2sKICAgICAgICAgKiAgICAg\nICAgICBDYWxsYmFjayB0byBpbnZva2Ugd2hlbiBwcm9jZXNzIGhhcyBiZWVu\nIGRvbmUuCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHZvaWQgcHJvY2Vz\ncyhUIGRhdGEsIEFzeW5jQ2FsbGJhY2suVm9pZENhbGxiYWNrIGNiKTsKICAg\nIH0KCn0K\n","encoding":"base64"}

