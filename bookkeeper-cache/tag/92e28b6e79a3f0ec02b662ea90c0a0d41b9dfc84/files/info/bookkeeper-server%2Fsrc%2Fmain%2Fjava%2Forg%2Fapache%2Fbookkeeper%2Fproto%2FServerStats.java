{"sha":"65c051fc03860fcb352dee393738e4434e9f1726","node_id":"MDQ6QmxvYjE1NzU5NTY6NjVjMDUxZmMwMzg2MGZjYjM1MmRlZTM5MzczOGU0NDM0ZTlmMTcyNg==","size":4102,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/65c051fc03860fcb352dee393738e4434e9f1726","content":"LyoKICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJz\naW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90IHVzZSB0\naGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5z\nZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0\nCiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElD\nRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUg\nbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0\ncmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBh\nbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09O\nRElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGll\nZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3Vh\nZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1\nbmRlciB0aGUgTGljZW5zZS4KICovCgpwYWNrYWdlIG9yZy5hcGFjaGUuYm9v\na2tlZXBlci5wcm90bzsKCnB1YmxpYyBjbGFzcyBTZXJ2ZXJTdGF0cyB7CiAg\nICBwcml2YXRlIHN0YXRpYyBTZXJ2ZXJTdGF0cyBpbnN0YW5jZSA9IG5ldyBT\nZXJ2ZXJTdGF0cygpOwogICAgcHJpdmF0ZSBsb25nIHBhY2tldHNTZW50Owog\nICAgcHJpdmF0ZSBsb25nIHBhY2tldHNSZWNlaXZlZDsKICAgIHByaXZhdGUg\nbG9uZyBtYXhMYXRlbmN5OwogICAgcHJpdmF0ZSBsb25nIG1pbkxhdGVuY3kg\nPSBMb25nLk1BWF9WQUxVRTsKICAgIHByaXZhdGUgbG9uZyB0b3RhbExhdGVu\nY3kgPSAwOwogICAgcHJpdmF0ZSBsb25nIGNvdW50ID0gMDsKCiAgICBwdWJs\naWMgaW50ZXJmYWNlIFByb3ZpZGVyIHsKICAgICAgICBwdWJsaWMgbG9uZyBn\nZXRPdXRzdGFuZGluZ1JlcXVlc3RzKCk7CgogICAgICAgIHB1YmxpYyBsb25n\nIGdldExhc3RQcm9jZXNzZWRaeGlkKCk7CiAgICB9CgogICAgcHJpdmF0ZSBQ\ncm92aWRlciBwcm92aWRlciA9IG51bGw7CiAgICBwcml2YXRlIE9iamVjdCBt\ndXRleCA9IG5ldyBPYmplY3QoKTsKCiAgICBzdGF0aWMgcHVibGljIFNlcnZl\nclN0YXRzIGdldEluc3RhbmNlKCkgewogICAgICAgIHJldHVybiBpbnN0YW5j\nZTsKICAgIH0KCiAgICBzdGF0aWMgcHVibGljIHZvaWQgcmVnaXN0ZXJBc0Nv\nbmNyZXRlKCkgewogICAgICAgIHNldEluc3RhbmNlKG5ldyBTZXJ2ZXJTdGF0\ncygpKTsKICAgIH0KCiAgICBzdGF0aWMgc3luY2hyb25pemVkIHB1YmxpYyB2\nb2lkIHVucmVnaXN0ZXIoKSB7CiAgICAgICAgaW5zdGFuY2UgPSBudWxsOwog\nICAgfQoKICAgIHN0YXRpYyBzeW5jaHJvbml6ZWQgcHJvdGVjdGVkIHZvaWQg\nc2V0SW5zdGFuY2UoU2VydmVyU3RhdHMgbmV3SW5zdGFuY2UpIHsKICAgICAg\nICBhc3NlcnQgaW5zdGFuY2UgPT0gbnVsbDsKICAgICAgICBpbnN0YW5jZSA9\nIG5ld0luc3RhbmNlOwogICAgfQoKICAgIHByb3RlY3RlZCBTZXJ2ZXJTdGF0\ncygpIHsKICAgIH0KCiAgICAvLyBnZXR0ZXJzCiAgICBzeW5jaHJvbml6ZWQg\ncHVibGljIGxvbmcgZ2V0TWluTGF0ZW5jeSgpIHsKICAgICAgICByZXR1cm4g\nKG1pbkxhdGVuY3kgPT0gTG9uZy5NQVhfVkFMVUUpID8gMCA6IG1pbkxhdGVu\nY3k7CiAgICB9CgogICAgc3luY2hyb25pemVkIHB1YmxpYyBsb25nIGdldEF2\nZ0xhdGVuY3koKSB7CiAgICAgICAgaWYgKGNvdW50ICE9IDApCiAgICAgICAg\nICAgIHJldHVybiB0b3RhbExhdGVuY3kgLyBjb3VudDsKICAgICAgICByZXR1\ncm4gMDsKICAgIH0KCiAgICBzeW5jaHJvbml6ZWQgcHVibGljIGxvbmcgZ2V0\nTWF4TGF0ZW5jeSgpIHsKICAgICAgICByZXR1cm4gbWF4TGF0ZW5jeTsKICAg\nIH0KCiAgICBwdWJsaWMgbG9uZyBnZXRPdXRzdGFuZGluZ1JlcXVlc3RzKCkg\newogICAgICAgIHN5bmNocm9uaXplZCAobXV0ZXgpIHsKICAgICAgICAgICAg\ncmV0dXJuIChwcm92aWRlciAhPSBudWxsKSA/IHByb3ZpZGVyLmdldE91dHN0\nYW5kaW5nUmVxdWVzdHMoKSA6IC0xOwogICAgICAgIH0KICAgIH0KCiAgICBw\ndWJsaWMgbG9uZyBnZXRMYXN0UHJvY2Vzc2VkWnhpZCgpIHsKICAgICAgICBz\neW5jaHJvbml6ZWQgKG11dGV4KSB7CiAgICAgICAgICAgIHJldHVybiAocHJv\ndmlkZXIgIT0gbnVsbCkgPyBwcm92aWRlci5nZXRMYXN0UHJvY2Vzc2VkWnhp\nZCgpIDogLTE7CiAgICAgICAgfQogICAgfQoKICAgIHN5bmNocm9uaXplZCBw\ndWJsaWMgbG9uZyBnZXRQYWNrZXRzUmVjZWl2ZWQoKSB7CiAgICAgICAgcmV0\ndXJuIHBhY2tldHNSZWNlaXZlZDsKICAgIH0KCiAgICBzeW5jaHJvbml6ZWQg\ncHVibGljIGxvbmcgZ2V0UGFja2V0c1NlbnQoKSB7CiAgICAgICAgcmV0dXJu\nIHBhY2tldHNTZW50OwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgZ2V0U2Vy\ndmVyU3RhdGUoKSB7CiAgICAgICAgcmV0dXJuICJzdGFuZGFsb25lIjsKICAg\nIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBTdHJpbmcgdG9TdHJpbmco\nKSB7CiAgICAgICAgU3RyaW5nQnVpbGRlciBzYiA9IG5ldyBTdHJpbmdCdWls\nZGVyKCk7CiAgICAgICAgc2IuYXBwZW5kKCJMYXRlbmN5IG1pbi9hdmcvbWF4\nOiAiICsgZ2V0TWluTGF0ZW5jeSgpICsgIi8iICsgZ2V0QXZnTGF0ZW5jeSgp\nICsgIi8iICsgZ2V0TWF4TGF0ZW5jeSgpICsgIlxuIik7CiAgICAgICAgc2Iu\nYXBwZW5kKCJSZWNlaXZlZDogIiArIGdldFBhY2tldHNSZWNlaXZlZCgpICsg\nIlxuIik7CiAgICAgICAgc2IuYXBwZW5kKCJTZW50OiAiICsgZ2V0UGFja2V0\nc1NlbnQoKSArICJcbiIpOwogICAgICAgIGlmIChwcm92aWRlciAhPSBudWxs\nKSB7CiAgICAgICAgICAgIHNiLmFwcGVuZCgiT3V0c3RhbmRpbmc6ICIgKyBn\nZXRPdXRzdGFuZGluZ1JlcXVlc3RzKCkgKyAiXG4iKTsKICAgICAgICAgICAg\nc2IuYXBwZW5kKCJaeGlkOiAweCIgKyBMb25nLnRvSGV4U3RyaW5nKGdldExh\nc3RQcm9jZXNzZWRaeGlkKCkpICsgIlxuIik7CiAgICAgICAgfQogICAgICAg\nIHNiLmFwcGVuZCgiTW9kZTogIiArIGdldFNlcnZlclN0YXRlKCkgKyAiXG4i\nKTsKICAgICAgICByZXR1cm4gc2IudG9TdHJpbmcoKTsKICAgIH0KCiAgICAv\nLyBtdXRhdG9ycwogICAgcHVibGljIHZvaWQgc2V0U3RhdHNQcm92aWRlcihQ\ncm92aWRlciB6aykgewogICAgICAgIHN5bmNocm9uaXplZCAobXV0ZXgpIHsK\nICAgICAgICAgICAgcHJvdmlkZXIgPSB6azsKICAgICAgICB9CiAgICB9Cgog\nICAgc3luY2hyb25pemVkIHZvaWQgdXBkYXRlTGF0ZW5jeShsb25nIHJlcXVl\nc3RDcmVhdGVUaW1lKSB7CiAgICAgICAgbG9uZyBsYXRlbmN5ID0gU3lzdGVt\nLmN1cnJlbnRUaW1lTWlsbGlzKCkgLSByZXF1ZXN0Q3JlYXRlVGltZTsKICAg\nICAgICB0b3RhbExhdGVuY3kgKz0gbGF0ZW5jeTsKICAgICAgICBjb3VudCsr\nOwogICAgICAgIGlmIChsYXRlbmN5IDwgbWluTGF0ZW5jeSkgewogICAgICAg\nICAgICBtaW5MYXRlbmN5ID0gbGF0ZW5jeTsKICAgICAgICB9CiAgICAgICAg\naWYgKGxhdGVuY3kgPiBtYXhMYXRlbmN5KSB7CiAgICAgICAgICAgIG1heExh\ndGVuY3kgPSBsYXRlbmN5OwogICAgICAgIH0KICAgIH0KCiAgICBzeW5jaHJv\nbml6ZWQgcHVibGljIHZvaWQgcmVzZXRMYXRlbmN5KCkgewogICAgICAgIHRv\ndGFsTGF0ZW5jeSA9IGNvdW50ID0gbWF4TGF0ZW5jeSA9IDA7CiAgICAgICAg\nbWluTGF0ZW5jeSA9IExvbmcuTUFYX1ZBTFVFOwogICAgfQoKICAgIHN5bmNo\ncm9uaXplZCBwdWJsaWMgdm9pZCByZXNldE1heExhdGVuY3koKSB7CiAgICAg\nICAgbWF4TGF0ZW5jeSA9IGdldE1pbkxhdGVuY3koKTsKICAgIH0KCiAgICBz\neW5jaHJvbml6ZWQgcHVibGljIHZvaWQgaW5jcmVtZW50UGFja2V0c1JlY2Vp\ndmVkKCkgewogICAgICAgIHBhY2tldHNSZWNlaXZlZCsrOwogICAgfQoKICAg\nIHN5bmNocm9uaXplZCBwdWJsaWMgdm9pZCBpbmNyZW1lbnRQYWNrZXRzU2Vu\ndCgpIHsKICAgICAgICBwYWNrZXRzU2VudCsrOwogICAgfQoKICAgIHN5bmNo\ncm9uaXplZCBwdWJsaWMgdm9pZCByZXNldFJlcXVlc3RDb3VudGVycygpIHsK\nICAgICAgICBwYWNrZXRzUmVjZWl2ZWQgPSBwYWNrZXRzU2VudCA9IDA7CiAg\nICB9Cgp9Cg==\n","encoding":"base64"}

