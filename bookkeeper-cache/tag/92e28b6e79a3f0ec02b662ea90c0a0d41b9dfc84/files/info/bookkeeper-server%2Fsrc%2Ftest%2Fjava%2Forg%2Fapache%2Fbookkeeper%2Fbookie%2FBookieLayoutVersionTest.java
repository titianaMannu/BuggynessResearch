{"sha":"c7b07e68d18d77afc75fd555d996eab76e4c81b9","node_id":"MDQ6QmxvYjE1NzU5NTY6YzdiMDdlNjhkMThkNzdhZmM3NWZkNTU1ZDk5NmVhYjc2ZTRjODFiOQ==","size":10077,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/c7b07e68d18d77afc75fd555d996eab76e4c81b9","content":"LyoKICoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9y\nIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBU\naGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhl\nIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNl\nIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBs\naWFuY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEg\nY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBl\naXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZv\nciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Np\nb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICoK\nICovCgpwYWNrYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci5ib29raWU7Cgpp\nbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEuaW8uRmls\nZTsKaW1wb3J0IGphdmEuaW8uRmlsZU91dHB1dFN0cmVhbTsKaW1wb3J0IGph\ndmEuaW8uQnVmZmVyZWRXcml0ZXI7CmltcG9ydCBqYXZhLmlvLk91dHB1dFN0\ncmVhbVdyaXRlcjsKCmltcG9ydCBvcmcuanVuaXQuKjsKaW1wb3J0IHN0YXRp\nYyBvcmcuanVuaXQuQXNzZXJ0Lio7CgppbXBvcnQgb3JnLnNsZjRqLkxvZ2dl\ncjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJGYWN0b3J5OwppbXBvcnQgb3Jn\nLmFwYWNoZS5ib29ra2VlcGVyLmNsaWVudC5Cb29rS2VlcGVyLkRpZ2VzdFR5\ncGU7CgppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLnRlc3QuQmFzZVRl\nc3RDYXNlOwoKcHVibGljIGNsYXNzIEJvb2tpZUxheW91dFZlcnNpb25UZXN0\nIGV4dGVuZHMgQmFzZVRlc3RDYXNlIHsKICAgIHN0YXRpYyBMb2dnZXIgTE9H\nID0gTG9nZ2VyRmFjdG9yeS5nZXRMb2dnZXIoQm9va2llTGF5b3V0VmVyc2lv\nblRlc3QuY2xhc3MpOwogICAgCiAgICBmaW5hbCBpbnQgQk9PS0lFX1BPUlQg\nPSAzMTgxOwoKICAgIHB1YmxpYyBCb29raWVMYXlvdXRWZXJzaW9uVGVzdChE\naWdlc3RUeXBlIGRpZ2VzdFR5cGUpIHsKICAgICAgICBzdXBlcigwKTsKICAg\nIH0KCiAgICBwcml2YXRlIHN0YXRpYyB2b2lkIHdyaXRlVGV4dFRvVmVyc2lv\nbkZpbGUoRmlsZSBkaXIsIFN0cmluZyB0ZXh0KSB0aHJvd3MgSU9FeGNlcHRp\nb24gewogICAgICAgIEZpbGUgdmVyc2lvbkZpbGUgPSBuZXcgRmlsZShkaXIs\nIEJvb2tpZS5WRVJTSU9OX0ZJTEVOQU1FKTsKCiAgICAgICAgRmlsZU91dHB1\ndFN0cmVhbSBmb3MgPSBuZXcgRmlsZU91dHB1dFN0cmVhbSh2ZXJzaW9uRmls\nZSk7CiAgICAgICAgQnVmZmVyZWRXcml0ZXIgYncgPSBudWxsOwogICAgICAg\nIHRyeSB7CiAgICAgICAgICAgIGJ3ID0gbmV3IEJ1ZmZlcmVkV3JpdGVyKG5l\ndyBPdXRwdXRTdHJlYW1Xcml0ZXIoZm9zKSk7CiAgICAgICAgICAgIGJ3Lndy\naXRlKHRleHQpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIGlm\nIChidyAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBidy5jbG9zZSgpOwog\nICAgICAgICAgICB9CiAgICAgICAgICAgIGZvcy5jbG9zZSgpOwogICAgICAg\nIH0KICAgIH0KCiAgICBwcml2YXRlIHN0YXRpYyB2b2lkIHdyaXRlRGlyZWN0\nb3J5TGF5b3V0VmVyc2lvbkZpbGUoRmlsZSBkaXIsIGludCB2ZXJzaW9uKSB0\naHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgIHdyaXRlVGV4dFRvVmVyc2lv\nbkZpbGUoZGlyLCBTdHJpbmcudmFsdWVPZih2ZXJzaW9uKSk7CiAgICB9Cgog\nICAgcHJpdmF0ZSBzdGF0aWMgRmlsZSBuZXdEaXJlY3RvcnkoaW50IHZlcnNp\nb24pIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgRmlsZSBkID0gbmV3\nRGlyZWN0b3J5V2l0aG91dFZlcnNpb24oKTsKICAgICAgICB3cml0ZURpcmVj\ndG9yeUxheW91dFZlcnNpb25GaWxlKGQsIHZlcnNpb24pOwogICAgICAgIHJl\ndHVybiBkOwogICAgfQogICAgCiAgICBwcml2YXRlIHN0YXRpYyBGaWxlIG5l\nd0RpcmVjdG9yeVdpdGhvdXRWZXJzaW9uKCkgdGhyb3dzIElPRXhjZXB0aW9u\nIHsKICAgICAgICBGaWxlIGQgPSBGaWxlLmNyZWF0ZVRlbXBGaWxlKCJib29r\naWUiLCAiZGlyIik7CiAgICAgICAgZC5kZWxldGUoKTsKICAgICAgICBkLm1r\nZGlycygpOwogICAgICAgIHJldHVybiBkOwogICAgfQoKICAgIEBUZXN0CiAg\nICBwdWJsaWMgdm9pZCB0ZXN0VG9vTmV3VmVyc2lvbigpIHRocm93cyBFeGNl\ncHRpb24gewogICAgICAgIC8vIHRlc3Qgd2l0aCBiYWQgbGVkZ2VyIGRpcgog\nICAgICAgIHRyeSB7CiAgICAgICAgICAgIEJvb2tpZSBiID0gbmV3IEJvb2tp\nZShuZXdTZXJ2ZXJDb25maWd1cmF0aW9uKAogICAgICAgICAgICAgICAgQk9P\nS0lFX1BPUlQsIEhPU1RQT1JULCBuZXdEaXJlY3RvcnlXaXRob3V0VmVyc2lv\nbigpLAogICAgICAgICAgICAgICAgbmV3IEZpbGVbXSB7IG5ld0RpcmVjdG9y\neShCb29raWUuQ1VSUkVOVF9ESVJFQ1RPUllfTEFZT1VUX1ZFUlNJT04gKyAx\nKSB9KSk7CiAgICAgICAgICAgIGZhaWwoIlNob3VsZG4ndCByZWFjaCBoZXJl\nIik7CiAgICAgICAgfSBjYXRjaCAoSU9FeGNlcHRpb24gaW9lKSB7CiAgICAg\nICAgICAgIGFzc2VydFRydWUoIkludmFsaWQgZXhjZXB0aW9uIiwgCiAgICAg\nICAgICAgICAgICAgICAgICAgaW9lLmdldE1lc3NhZ2UoKS5jb250YWlucygi\nRGlyZWN0b3J5IGhhcyBhbiBpbnZhbGlkIHZlcnNpb24sIikpOwogICAgICAg\nIH0KICAgICAgICAKICAgICAgICAvLyB0ZXN0IHdpdGggYmFkIGRhdGEgZGly\nCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgQm9va2llIGIgPSBuZXcgQm9v\na2llKG5ld1NlcnZlckNvbmZpZ3VyYXRpb24oCiAgICAgICAgICAgICAgICBC\nT09LSUVfUE9SVCwgSE9TVFBPUlQsIG5ld0RpcmVjdG9yeShCb29raWUuQ1VS\nUkVOVF9ESVJFQ1RPUllfTEFZT1VUX1ZFUlNJT04gKyAxKSwKICAgICAgICAg\nICAgICAgIG5ldyBGaWxlW10geyBuZXdEaXJlY3RvcnlXaXRob3V0VmVyc2lv\nbigpIH0pKTsKICAgICAgICAgICAgZmFpbCgiU2hvdWxkbid0IHJlYWNoIGhl\ncmUiKTsKICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBpb2UpIHsKICAg\nICAgICAgICAgYXNzZXJ0VHJ1ZSgiSW52YWxpZCBleGNlcHRpb24iLCAKICAg\nICAgICAgICAgICAgICAgICAgICBpb2UuZ2V0TWVzc2FnZSgpLmNvbnRhaW5z\nKCJEaXJlY3RvcnkgaGFzIGFuIGludmFsaWQgdmVyc2lvbiwiKSk7CiAgICAg\nICAgfQoKICAgICAgICAvLyB0ZXN0IHdpdGggYm90aCBiYWQgICAgICAgIAog\nICAgICAgIHRyeSB7CiAgICAgICAgICAgIEJvb2tpZSBiID0gbmV3IEJvb2tp\nZShuZXdTZXJ2ZXJDb25maWd1cmF0aW9uKAogICAgICAgICAgICAgICAgQk9P\nS0lFX1BPUlQsIEhPU1RQT1JULCBuZXdEaXJlY3RvcnkoQm9va2llLkNVUlJF\nTlRfRElSRUNUT1JZX0xBWU9VVF9WRVJTSU9OICsgMSksCiAgICAgICAgICAg\nICAgICBuZXcgRmlsZVtdIHsgbmV3RGlyZWN0b3J5KEJvb2tpZS5DVVJSRU5U\nX0RJUkVDVE9SWV9MQVlPVVRfVkVSU0lPTiArIDEpIH0pKTsKICAgICAgICAg\nICAgZmFpbCgiU2hvdWxkbid0IHJlYWNoIGhlcmUiKTsKICAgICAgICB9IGNh\ndGNoIChJT0V4Y2VwdGlvbiBpb2UpIHsKICAgICAgICAgICAgYXNzZXJ0VHJ1\nZSgiSW52YWxpZCBleGNlcHRpb24iLCAKICAgICAgICAgICAgICAgICAgICAg\nICBpb2UuZ2V0TWVzc2FnZSgpLmNvbnRhaW5zKCJEaXJlY3RvcnkgaGFzIGFu\nIGludmFsaWQgdmVyc2lvbiwiKSk7CiAgICAgICAgfQoKICAgICAgICAvLyB0\nZXN0IHdpdGggbmVpdGhlciBiYWQsIGJvdGggd2l0aCBnb29kIHZlcnNpb24K\nICAgICAgICBCb29raWUgYiA9IG5ldyBCb29raWUobmV3U2VydmVyQ29uZmln\ndXJhdGlvbigKICAgICAgICAgICAgQk9PS0lFX1BPUlQsIEhPU1RQT1JULCBu\nZXdEaXJlY3RvcnkoQm9va2llLkNVUlJFTlRfRElSRUNUT1JZX0xBWU9VVF9W\nRVJTSU9OICksCiAgICAgICAgICAgIG5ldyBGaWxlW10geyBuZXdEaXJlY3Rv\ncnkoQm9va2llLkNVUlJFTlRfRElSRUNUT1JZX0xBWU9VVF9WRVJTSU9OKSB9\nKSk7CiAgICAgICAgYi5zaHV0ZG93bigpOwogICAgfQoKICAgIEBUZXN0CiAg\nICBwdWJsaWMgdm9pZCB0ZXN0VG9vT2xkVmVyc2lvbigpIHRocm93cyBFeGNl\ncHRpb24gewogICAgICAgIC8vIHRlc3Qgd2l0aCBiYWQgbGVkZ2VyIGRpcgog\nICAgICAgIHRyeSB7CiAgICAgICAgICAgIEJvb2tpZSBiID0gbmV3IEJvb2tp\nZShuZXdTZXJ2ZXJDb25maWd1cmF0aW9uKAogICAgICAgICAgICAgICAgQk9P\nS0lFX1BPUlQsIEhPU1RQT1JULCBuZXdEaXJlY3RvcnlXaXRob3V0VmVyc2lv\nbigpLAogICAgICAgICAgICAgICAgbmV3IEZpbGVbXSB7IG5ld0RpcmVjdG9y\neShCb29raWUuQ1VSUkVOVF9ESVJFQ1RPUllfTEFZT1VUX1ZFUlNJT04gLSAx\nKSB9KSk7CiAgICAgICAgICAgIGZhaWwoIlNob3VsZG4ndCByZWFjaCBoZXJl\nIik7CiAgICAgICAgfSBjYXRjaCAoSU9FeGNlcHRpb24gaW9lKSB7CiAgICAg\nICAgICAgIGFzc2VydFRydWUoIkludmFsaWQgZXhjZXB0aW9uIiwgCiAgICAg\nICAgICAgICAgICAgICAgICAgaW9lLmdldE1lc3NhZ2UoKS5jb250YWlucygi\nRGlyZWN0b3J5IGhhcyBhbiBpbnZhbGlkIHZlcnNpb24sIikpOwogICAgICAg\nIH0KICAgICAgICAKICAgICAgICAvLyB0ZXN0IHdpdGggYmFkIGRhdGEgZGly\nCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgQm9va2llIGIgPSBuZXcgQm9v\na2llKG5ld1NlcnZlckNvbmZpZ3VyYXRpb24oCiAgICAgICAgICAgICAgICBC\nT09LSUVfUE9SVCwgSE9TVFBPUlQsIG5ld0RpcmVjdG9yeShCb29raWUuQ1VS\nUkVOVF9ESVJFQ1RPUllfTEFZT1VUX1ZFUlNJT04gLSAxKSwKICAgICAgICAg\nICAgICAgIG5ldyBGaWxlW10geyBuZXdEaXJlY3RvcnlXaXRob3V0VmVyc2lv\nbigpIH0pKTsKICAgICAgICAgICAgZmFpbCgiU2hvdWxkbid0IHJlYWNoIGhl\ncmUiKTsKICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBpb2UpIHsKICAg\nICAgICAgICAgYXNzZXJ0VHJ1ZSgiSW52YWxpZCBleGNlcHRpb24iLCAKICAg\nICAgICAgICAgICAgICAgICAgICBpb2UuZ2V0TWVzc2FnZSgpLmNvbnRhaW5z\nKCJEaXJlY3RvcnkgaGFzIGFuIGludmFsaWQgdmVyc2lvbiwiKSk7CiAgICAg\nICAgfQoKICAgICAgICAvLyB0ZXN0IHdpdGggYm90aCBiYWQgICAgICAgIAog\nICAgICAgIHRyeSB7CiAgICAgICAgICAgIEJvb2tpZSBiID0gbmV3IEJvb2tp\nZShuZXdTZXJ2ZXJDb25maWd1cmF0aW9uKAogICAgICAgICAgICAgICAgQk9P\nS0lFX1BPUlQsIEhPU1RQT1JULCBuZXdEaXJlY3RvcnkoQm9va2llLkNVUlJF\nTlRfRElSRUNUT1JZX0xBWU9VVF9WRVJTSU9OIC0gMSksCiAgICAgICAgICAg\nICAgICBuZXcgRmlsZVtdIHsgbmV3RGlyZWN0b3J5KEJvb2tpZS5DVVJSRU5U\nX0RJUkVDVE9SWV9MQVlPVVRfVkVSU0lPTiAtIDEpIH0pKTsKICAgICAgICAg\nICAgZmFpbCgiU2hvdWxkbid0IHJlYWNoIGhlcmUiKTsKICAgICAgICB9IGNh\ndGNoIChJT0V4Y2VwdGlvbiBpb2UpIHsKICAgICAgICAgICAgYXNzZXJ0VHJ1\nZSgiSW52YWxpZCBleGNlcHRpb24iLCAKICAgICAgICAgICAgICAgICAgICAg\nICBpb2UuZ2V0TWVzc2FnZSgpLmNvbnRhaW5zKCJEaXJlY3RvcnkgaGFzIGFu\nIGludmFsaWQgdmVyc2lvbiwiKSk7CiAgICAgICAgfQogICAgfQogICAgCiAg\nICBAVGVzdAogICAgcHVibGljIHZvaWQgdGVzdFNvbWVPbGRTb21lQ3VycmVu\ndCgpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIC8vIHRlc3Qgd2l0aCBi\nb3RoIGJhZCAgICAgICAgCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgQm9v\na2llIGIgPSBuZXcgQm9va2llKG5ld1NlcnZlckNvbmZpZ3VyYXRpb24oCiAg\nICAgICAgICAgICAgICAgICAgQk9PS0lFX1BPUlQsIEhPU1RQT1JULCBuZXdE\naXJlY3RvcnkoQm9va2llLkNVUlJFTlRfRElSRUNUT1JZX0xBWU9VVF9WRVJT\nSU9OKSwKICAgICAgICAgICAgICAgICAgICBuZXcgRmlsZVtdIHsgbmV3RGly\nZWN0b3J5KEJvb2tpZS5DVVJSRU5UX0RJUkVDVE9SWV9MQVlPVVRfVkVSU0lP\nTiAtIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdE\naXJlY3RvcnkoQm9va2llLkNVUlJFTlRfRElSRUNUT1JZX0xBWU9VVF9WRVJT\nSU9OKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3RGly\nZWN0b3J5KEJvb2tpZS5DVVJSRU5UX0RJUkVDVE9SWV9MQVlPVVRfVkVSU0lP\nTiArIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdE\naXJlY3RvcnkoQm9va2llLkNVUlJFTlRfRElSRUNUT1JZX0xBWU9VVF9WRVJT\nSU9OKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3RGly\nZWN0b3J5KEJvb2tpZS5DVVJSRU5UX0RJUkVDVE9SWV9MQVlPVVRfVkVSU0lP\nTiAtIDEpLH0pKTsKICAgICAgICAgICAgZmFpbCgiU2hvdWxkbid0IHJlYWNo\nIGhlcmUiKTsKICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBpb2UpIHsK\nICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgiSW52YWxpZCBleGNlcHRpb24iLCAK\nICAgICAgICAgICAgICAgICAgICAgICBpb2UuZ2V0TWVzc2FnZSgpLmNvbnRh\naW5zKCJEaXJlY3RvcnkgaGFzIGFuIGludmFsaWQgdmVyc2lvbiwiKSk7CiAg\nICAgICAgfQogICAgfQoKICAgIEBUZXN0CiAgICBwdWJsaWMgdm9pZCB0ZXN0\nSW52YWxpZFZlcnNpb25GaWxlKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAg\nICAgLy8gaW52YWxpZCBkYXRhCiAgICAgICAgRmlsZSBqdW5rRGlyID0gbmV3\nRGlyZWN0b3J5V2l0aG91dFZlcnNpb24oKTsKICAgICAgICB3cml0ZVRleHRU\nb1ZlcnNpb25GaWxlKGp1bmtEaXIsICJKdW5rVGV4dCIpOwogICAgICAgIEZp\nbGUganVua0RpcjIgPSBuZXdEaXJlY3RvcnlXaXRob3V0VmVyc2lvbigpOwog\nICAgICAgIHdyaXRlVGV4dFRvVmVyc2lvbkZpbGUoanVua0RpcjIsICJKdW5r\nVGV4dDIiKTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgQm9va2llIGIg\nPSBuZXcgQm9va2llKG5ld1NlcnZlckNvbmZpZ3VyYXRpb24oCiAgICAgICAg\nICAgICAgICBCT09LSUVfUE9SVCwgSE9TVFBPUlQsIG5ld0RpcmVjdG9yeVdp\ndGhvdXRWZXJzaW9uKCksCiAgICAgICAgICAgICAgICBuZXcgRmlsZVtdIHsg\nanVua0RpciB9KSk7CiAgICAgICAgICAgIGZhaWwoIlNob3VsZG4ndCByZWFj\naCBoZXJlIik7CiAgICAgICAgfSBjYXRjaCAoSU9FeGNlcHRpb24gaW9lKSB7\nCiAgICAgICAgICAgIGFzc2VydFRydWUoIkludmFsaWQgZXhjZXB0aW9uIiwg\nCiAgICAgICAgICAgICAgICAgICAgICAgaW9lLmdldE1lc3NhZ2UoKS5jb250\nYWlucygiVmVyc2lvbiBmaWxlIGhhcyBpbnZhbGlkIGNvbnRlbnQiKSk7CiAg\nICAgICAgfQogICAgICAgIAogICAgICAgIC8vIHRlc3Qgd2l0aCBiYWQgZGF0\nYSBkaXIKICAgICAgICB0cnkgewogICAgICAgICAgICBCb29raWUgYiA9IG5l\ndyBCb29raWUobmV3U2VydmVyQ29uZmlndXJhdGlvbigKICAgICAgICAgICAg\nICAgIEJPT0tJRV9QT1JULCBIT1NUUE9SVCwganVua0RpciwKICAgICAgICAg\nICAgICAgIG5ldyBGaWxlW10geyBuZXdEaXJlY3RvcnlXaXRob3V0VmVyc2lv\nbigpIH0pKTsKICAgICAgICAgICAgZmFpbCgiU2hvdWxkbid0IHJlYWNoIGhl\ncmUiKTsKICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBpb2UpIHsKICAg\nICAgICAgICAgYXNzZXJ0VHJ1ZSgiSW52YWxpZCBleGNlcHRpb24iLCAKICAg\nICAgICAgICAgICAgICAgICAgICBpb2UuZ2V0TWVzc2FnZSgpLmNvbnRhaW5z\nKCJWZXJzaW9uIGZpbGUgaGFzIGludmFsaWQgY29udGVudCIpKTsKICAgICAg\nICB9CgogICAgICAgIC8vIHRlc3Qgd2l0aCBib3RoIGJhZCAgICAgICAgCiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgQm9va2llIGIgPSBuZXcgQm9va2ll\nKG5ld1NlcnZlckNvbmZpZ3VyYXRpb24oCiAgICAgICAgICAgICAgICBCT09L\nSUVfUE9SVCwgSE9TVFBPUlQsIGp1bmtEaXIsCiAgICAgICAgICAgICAgICBu\nZXcgRmlsZVtdIHsganVua0RpcjIgfSkpOwogICAgICAgICAgICBmYWlsKCJT\naG91bGRuJ3QgcmVhY2ggaGVyZSIpOwogICAgICAgIH0gY2F0Y2ggKElPRXhj\nZXB0aW9uIGlvZSkgewogICAgICAgICAgICBhc3NlcnRUcnVlKCJJbnZhbGlk\nIGV4Y2VwdGlvbiIsIAogICAgICAgICAgICAgICAgICAgICAgIGlvZS5nZXRN\nZXNzYWdlKCkuY29udGFpbnMoIlZlcnNpb24gZmlsZSBoYXMgaW52YWxpZCBj\nb250ZW50IikpOwogICAgICAgIH0KICAgIH0KICAgIAogICAgQFRlc3QgCiAg\nICBwdWJsaWMgdm9pZCBkaXJlY3RvcnlJc1JlYWRPbmx5KCkgdGhyb3dzIEV4\nY2VwdGlvbiB7CiAgICAgICAgLy8gaW52YWxpZCBkYXRhCiAgICAgICAgRmls\nZSByb0RpciA9IG5ld0RpcmVjdG9yeVdpdGhvdXRWZXJzaW9uKCk7CiAgICAg\nICAgcm9EaXIuc2V0V3JpdGFibGUoZmFsc2UpOwogICAgICAgIEZpbGUgcm9E\naXIyID0gbmV3RGlyZWN0b3J5V2l0aG91dFZlcnNpb24oKTsKICAgICAgICBy\nb0RpcjIuc2V0V3JpdGFibGUoZmFsc2UpOwoKICAgICAgICB0cnkgewogICAg\nICAgICAgICBCb29raWUgYiA9IG5ldyBCb29raWUobmV3U2VydmVyQ29uZmln\ndXJhdGlvbigKICAgICAgICAgICAgICAgIEJPT0tJRV9QT1JULCBIT1NUUE9S\nVCwgbmV3RGlyZWN0b3J5V2l0aG91dFZlcnNpb24oKSwKICAgICAgICAgICAg\nICAgIG5ldyBGaWxlW10geyByb0RpciB9KSk7CiAgICAgICAgICAgIGZhaWwo\nIlNob3VsZG4ndCByZWFjaCBoZXJlIik7CiAgICAgICAgfSBjYXRjaCAoSU9F\neGNlcHRpb24gaW9lKSB7CiAgICAgICAgICAgIGFzc2VydFRydWUoIkludmFs\naWQgZXhjZXB0aW9uIiwgCiAgICAgICAgICAgICAgICAgICAgICAgaW9lLmdl\ndE1lc3NhZ2UoKS5jb250YWlucygiUGVybWlzc2lvbiBkZW5pZWQiKSk7CiAg\nICAgICAgfQogICAgICAgIAogICAgICAgIC8vIHRlc3Qgd2l0aCBiYWQgZGF0\nYSBkaXIKICAgICAgICB0cnkgewogICAgICAgICAgICBCb29raWUgYiA9IG5l\ndyBCb29raWUobmV3U2VydmVyQ29uZmlndXJhdGlvbigKICAgICAgICAgICAg\nICAgIEJPT0tJRV9QT1JULCBIT1NUUE9SVCwgcm9EaXIsCiAgICAgICAgICAg\nICAgICBuZXcgRmlsZVtdIHsgbmV3RGlyZWN0b3J5V2l0aG91dFZlcnNpb24o\nKSB9KSk7CiAgICAgICAgICAgIGZhaWwoIlNob3VsZG4ndCByZWFjaCBoZXJl\nIik7CiAgICAgICAgfSBjYXRjaCAoSU9FeGNlcHRpb24gaW9lKSB7CiAgICAg\nICAgICAgIGFzc2VydFRydWUoIkludmFsaWQgZXhjZXB0aW9uIiwgCiAgICAg\nICAgICAgICAgICAgICAgICAgaW9lLmdldE1lc3NhZ2UoKS5jb250YWlucygi\nUGVybWlzc2lvbiBkZW5pZWQiKSk7CiAgICAgICAgfQoKICAgICAgICAvLyB0\nZXN0IHdpdGggYm90aCBiYWQgICAgICAgIAogICAgICAgIHRyeSB7CiAgICAg\nICAgICAgIEJvb2tpZSBiID0gbmV3IEJvb2tpZShuZXdTZXJ2ZXJDb25maWd1\ncmF0aW9uKAogICAgICAgICAgICAgICAgQk9PS0lFX1BPUlQsIEhPU1RQT1JU\nLCByb0RpciwKICAgICAgICAgICAgICAgIG5ldyBGaWxlW10geyByb0RpcjIg\nfSkpOwogICAgICAgICAgICBmYWlsKCJTaG91bGRuJ3QgcmVhY2ggaGVyZSIp\nOwogICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGlvZSkgewogICAgICAg\nICAgICBhc3NlcnRUcnVlKCJJbnZhbGlkIGV4Y2VwdGlvbiIsIAogICAgICAg\nICAgICAgICAgICAgICAgIGlvZS5nZXRNZXNzYWdlKCkuY29udGFpbnMoIlBl\ncm1pc3Npb24gZGVuaWVkIikpOwogICAgICAgIH0KCiAgICB9IAoKCn0K\n","encoding":"base64"}

