{"sha":"287454f135dfcbda722642edaceb175a937439eb","node_id":"MDQ6QmxvYjE1NzU5NTY6Mjg3NDU0ZjEzNWRmY2JkYTcyMjY0MmVkYWNlYjE3NWE5Mzc0MzllYg==","size":3304,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/287454f135dfcbda722642edaceb175a937439eb","content":"LyoqCiAqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91\nbmRhdGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRv\nciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAq\nIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGlu\nZm9ybWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRo\nZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5z\nZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21w\nbGlhbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBh\nIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICBodHRwOi8vd3d3LmFw\nYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJl\ncXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0\naW5nLAogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5z\nZSBpcyBkaXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRI\nT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwg\nZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBm\nb3IgdGhlCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNz\naW9ucyBhbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAq\nCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci5ib29raWU7Cgpp\nbXBvcnQgamF2YS5pby5GaWxlOwppbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlv\nbjsKaW1wb3J0IGphdmEuaW8uUmFuZG9tQWNjZXNzRmlsZTsKaW1wb3J0IGph\ndmEubGFuZy5yZWZsZWN0LkZpZWxkOwppbXBvcnQgamF2YS5uaW8uQnl0ZUJ1\nZmZlcjsKaW1wb3J0IGphdmEudXRpbC5NYXA7CgppbXBvcnQganVuaXQuZnJh\nbWV3b3JrLlRlc3RDYXNlOwoKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBl\nci5jb25mLlNlcnZlckNvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuanVuaXQu\nQWZ0ZXI7CmltcG9ydCBvcmcuanVuaXQuQmVmb3JlOwppbXBvcnQgb3JnLmp1\nbml0LlRlc3Q7CgppbXBvcnQgb3JnLnNsZjRqLkxvZ2dlcjsKaW1wb3J0IG9y\nZy5zbGY0ai5Mb2dnZXJGYWN0b3J5OwoKcHVibGljIGNsYXNzIEVudHJ5TG9n\nVGVzdCBleHRlbmRzIFRlc3RDYXNlIHsKICAgIHN0YXRpYyBMb2dnZXIgTE9H\nID0gTG9nZ2VyRmFjdG9yeS5nZXRMb2dnZXIoRW50cnlMb2dUZXN0LmNsYXNz\nKTsKCiAgICBAQmVmb3JlCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpIHRocm93\ncyBFeGNlcHRpb24gewogICAgfQoKICAgIEBUZXN0CiAgICBwdWJsaWMgdm9p\nZCB0ZXN0Q29ycnVwdEVudHJ5TG9nKCkgdGhyb3dzIElPRXhjZXB0aW9uLCBT\nZWN1cml0eUV4Y2VwdGlvbiwgTm9TdWNoRmllbGRFeGNlcHRpb24sIElsbGVn\nYWxBcmd1bWVudEV4Y2VwdGlvbiwgSWxsZWdhbEFjY2Vzc0V4Y2VwdGlvbiB7\nCiAgICAgICAgRmlsZSB0bXBEaXIgPSBGaWxlLmNyZWF0ZVRlbXBGaWxlKCJi\na1Rlc3QiLCAiLmRpciIpOwogICAgICAgIHRtcERpci5kZWxldGUoKTsKICAg\nICAgICB0bXBEaXIubWtkaXIoKTsKICAgICAgICBTZXJ2ZXJDb25maWd1cmF0\naW9uIGNvbmYgPSBuZXcgU2VydmVyQ29uZmlndXJhdGlvbigpOwogICAgICAg\nIGNvbmYuc2V0TGVkZ2VyRGlyTmFtZXMobmV3IFN0cmluZ1tdIHt0bXBEaXIu\ndG9TdHJpbmcoKX0pOwogICAgICAgIC8vIGNyZWF0ZSBzb21lIGVudHJpZXMK\nICAgICAgICBFbnRyeUxvZ2dlciBsb2dnZXIgPSBuZXcgRW50cnlMb2dnZXIo\nY29uZiwgbnVsbCk7CiAgICAgICAgbG9nZ2VyLmFkZEVudHJ5KDEsIGdlbmVy\nYXRlRW50cnkoMSwgMSkpOwogICAgICAgIGxvZ2dlci5hZGRFbnRyeSgzLCBn\nZW5lcmF0ZUVudHJ5KDMsIDEpKTsKICAgICAgICBsb2dnZXIuYWRkRW50cnko\nMiwgZ2VuZXJhdGVFbnRyeSgyLCAxKSk7CiAgICAgICAgbG9nZ2VyLmZsdXNo\nKCk7CiAgICAgICAgLy8gbm93IGxldHMgdHJ1bmNhdGUgdGhlIGZpbGUgdG8g\nY29ycnVwdCB0aGUgbGFzdCBlbnRyeSwgd2hpY2ggc2ltdWxhdGVzIGEgcGFy\ndGlhbCB3cml0ZQogICAgICAgIEZpbGUgZiA9IG5ldyBGaWxlKHRtcERpciwg\nIjAubG9nIik7CiAgICAgICAgUmFuZG9tQWNjZXNzRmlsZSByYWYgPSBuZXcg\nUmFuZG9tQWNjZXNzRmlsZShmLCAicnciKTsKICAgICAgICByYWYuc2V0TGVu\nZ3RoKHJhZi5sZW5ndGgoKS0xMCk7CiAgICAgICAgcmFmLmNsb3NlKCk7CiAg\nICAgICAgLy8gbm93IHNlZSB3aGljaCBsZWRnZXJzIGFyZSBpbiB0aGUgbG9n\nCiAgICAgICAgbG9nZ2VyID0gbmV3IEVudHJ5TG9nZ2VyKGNvbmYsIG51bGwp\nOwogICAgICAgIEZpZWxkIGVudHJ5TG9nczJMZWRnZXJzTWFwRmllbGQgPSBs\nb2dnZXIuZ2V0Q2xhc3MoKS5nZXREZWNsYXJlZEZpZWxkKCJlbnRyeUxvZ3My\nTGVkZ2Vyc01hcCIpOwogICAgICAgIGVudHJ5TG9nczJMZWRnZXJzTWFwRmll\nbGQuc2V0QWNjZXNzaWJsZSh0cnVlKTsKICAgICAgICBAU3VwcHJlc3NXYXJu\naW5ncygidW5jaGVja2VkIikKICAgICAgICBNYXA8TG9uZywgTWFwPExvbmcs\nIEJvb2xlYW4+PiBsZWRnZXJzTWFwID0gKE1hcDxMb25nLCBNYXA8TG9uZywg\nQm9vbGVhbj4+KSBlbnRyeUxvZ3MyTGVkZ2Vyc01hcEZpZWxkLmdldChsb2dn\nZXIpOwogICAgICAgIExPRy5pbmZvKCJMZWRnZXJzTWFwLmdldCgwKSB7fSIs\nIGxlZGdlcnNNYXAuZ2V0KDBMKSk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChs\nZWRnZXJzTWFwLmdldCgwTCkuZ2V0KDFMKSk7CiAgICAgICAgYXNzZXJ0TnVs\nbChsZWRnZXJzTWFwLmdldCgwTCkuZ2V0KDJMKSk7CiAgICAgICAgYXNzZXJ0\nTm90TnVsbChsZWRnZXJzTWFwLmdldCgwTCkuZ2V0KDNMKSk7CiAgICB9Cgog\nICAgcHJpdmF0ZSBCeXRlQnVmZmVyIGdlbmVyYXRlRW50cnkobG9uZyBsZWRn\nZXIsIGxvbmcgZW50cnkpIHsKICAgICAgICBCeXRlQnVmZmVyIGJiID0gQnl0\nZUJ1ZmZlci53cmFwKG5ldyBieXRlWzY0XSk7CiAgICAgICAgYmIucHV0TG9u\nZyhsZWRnZXIpOwogICAgICAgIGJiLnB1dExvbmcoZW50cnkpOwogICAgICAg\nIGJiLnB1dCgoImxlZGdlciIrbGVkZ2VyKS5nZXRCeXRlcygpKTsKICAgICAg\nICBiYi5mbGlwKCk7CiAgICAgICAgcmV0dXJuIGJiOwogICAgfQogICAgCiAg\nICBAQWZ0ZXIKICAgIHB1YmxpYyB2b2lkIHRlYXJEb3duKCkgdGhyb3dzIEV4\nY2VwdGlvbiB7CiAgICB9Cgp9Cg==\n","encoding":"base64"}

