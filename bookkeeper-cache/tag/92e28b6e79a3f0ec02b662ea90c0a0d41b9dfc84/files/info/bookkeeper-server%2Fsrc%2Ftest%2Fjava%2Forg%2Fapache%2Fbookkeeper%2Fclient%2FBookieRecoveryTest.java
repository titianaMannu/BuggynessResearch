{"sha":"80e46b9684f97df38758dc914479a515e0d2691a","node_id":"MDQ6QmxvYjE1NzU5NTY6ODBlNDZiOTY4NGY5N2RmMzg3NThkYzkxNDQ3OWE1MTVlMGQyNjkxYQ==","size":24577,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/80e46b9684f97df38758dc914479a515e0d2691a","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY2xpZW50OwoKLyoKICoK\nICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9u\nIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vu\nc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlzdHJp\nYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRp\nb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNG\nIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNo\nZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7IHlv\ndSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2UK\nICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBv\nZiB0aGUgTGljZW5zZSBhdAogKgogKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9y\nZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQg\nYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsCiAq\nIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRp\nc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhPVVQgV0FS\nUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBlaXRoZXIg\nZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUK\nICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFu\nZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICoKICovCgpp\nbXBvcnQgamF2YS5pby5GaWxlOwppbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlv\nbjsKaW1wb3J0IGphdmEubmV0LkluZXRBZGRyZXNzOwppbXBvcnQgamF2YS5u\nZXQuSW5ldFNvY2tldEFkZHJlc3M7CmltcG9ydCBqYXZhLnV0aWwuQXJyYXlM\naXN0OwppbXBvcnQgamF2YS51dGlsLkVudW1lcmF0aW9uOwppbXBvcnQgamF2\nYS51dGlsLkxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuTWFwOwppbXBvcnQgamF2\nYS51dGlsLkhhc2hTZXQ7CmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsKaW1w\nb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsKaW1wb3J0IGphdmEudXRpbC5S\nYW5kb207CgppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmJ1ZmZlci5DaGFubmVs\nQnVmZmVyOwppbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuYXRvbWljLkF0\nb21pY0xvbmc7CmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5Db3VudERv\nd25MYXRjaDsKaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LlRpbWVVbml0\nOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLnRlc3QuQmFzZVRlc3RD\nYXNlOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNvbmYuQ2xpZW50\nQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5j\nb25mLlNlcnZlckNvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLmJv\nb2trZWVwZXIuY2xpZW50LkJLRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNo\nZS5ib29ra2VlcGVyLmNsaWVudC5MZWRnZXJFbnRyeTsKaW1wb3J0IG9yZy5h\ncGFjaGUuYm9va2tlZXBlci5jbGllbnQuTGVkZ2VySGFuZGxlOwppbXBvcnQg\nb3JnLmFwYWNoZS5ib29ra2VlcGVyLnByb3RvLkJvb2tpZVByb3RvY29sOwpp\nbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLnByb3RvLkJvb2trZWVwZXJJ\nbnRlcm5hbENhbGxiYWNrcy5SZWFkRW50cnlDYWxsYmFjazsKaW1wb3J0IG9y\nZy5hcGFjaGUuYm9va2tlZXBlci5jbGllbnQuQXN5bmNDYWxsYmFjay5SZWNv\ndmVyQ2FsbGJhY2s7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY2xp\nZW50LkJvb2tLZWVwZXIuRGlnZXN0VHlwZTsKaW1wb3J0IG9yZy5hcGFjaGUu\nYm9va2tlZXBlci5wcm90by5Cb29raWVTZXJ2ZXI7CmltcG9ydCBvcmcuYXBh\nY2hlLmJvb2trZWVwZXIuY2xpZW50LkJvb2tLZWVwZXJBZG1pbjsKaW1wb3J0\nIG9yZy5hcGFjaGUuem9va2VlcGVyLmRhdGEuU3RhdDsKaW1wb3J0IG9yZy5z\nbGY0ai5Mb2dnZXI7CmltcG9ydCBvcmcuc2xmNGouTG9nZ2VyRmFjdG9yeTsK\naW1wb3J0IG9yZy5hcGFjaGUuem9va2VlcGVyLktlZXBlckV4Y2VwdGlvbjsK\naW1wb3J0IG9yZy5hcGFjaGUuem9va2VlcGVyLktlZXBlckV4Y2VwdGlvbi5D\nb2RlOwppbXBvcnQgb3JnLmp1bml0LkFmdGVyOwppbXBvcnQgb3JnLmp1bml0\nLkJlZm9yZTsKaW1wb3J0IG9yZy5qdW5pdC5UZXN0OwoKLyoqCiAqIFRoaXMg\nY2xhc3MgdGVzdHMgdGhlIGJvb2tpZSByZWNvdmVyeSBhZG1pbiBmdW5jdGlv\nbmFsaXR5LgogKi8KcHVibGljIGNsYXNzIEJvb2tpZVJlY292ZXJ5VGVzdCBl\neHRlbmRzIEJhc2VUZXN0Q2FzZSB7CiAgICBzdGF0aWMgTG9nZ2VyIExPRyA9\nIExvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKEJvb2tpZVJlY292ZXJ5VGVzdC5j\nbGFzcyk7CgogICAgLy8gT2JqZWN0IHVzZWQgZm9yIHN5bmNocm9uaXppbmcg\nYXN5bmMgbWV0aG9kIGNhbGxzCiAgICBjbGFzcyBTeW5jT2JqZWN0IHsKICAg\nICAgICBib29sZWFuIHZhbHVlOwoKICAgICAgICBwdWJsaWMgU3luY09iamVj\ndCgpIHsKICAgICAgICAgICAgdmFsdWUgPSBmYWxzZTsKICAgICAgICB9CiAg\nICB9CgogICAgLy8gT2JqZWN0IHVzZWQgZm9yIGltcGxlbWVudGluZyB0aGUg\nQm9va2llIFJlY292ZXJDYWxsYmFjayBmb3IgdGhpcyBqVW5pdAogICAgLy8g\ndGVzdC4gVGhpcyB2ZXJpZmllcyB0aGF0IHRoZSBvcGVyYXRpb24gY29tcGxl\ndGVkIHN1Y2Nlc3NmdWxseS4KICAgIGNsYXNzIEJvb2tpZVJlY292ZXJDYWxs\nYmFjayBpbXBsZW1lbnRzIFJlY292ZXJDYWxsYmFjayB7CiAgICAgICAgYm9v\nbGVhbiBzdWNjZXNzID0gZmFsc2U7CiAgICAgICAgQE92ZXJyaWRlCiAgICAg\nICAgcHVibGljIHZvaWQgcmVjb3ZlckNvbXBsZXRlKGludCByYywgT2JqZWN0\nIGN0eCkgewogICAgICAgICAgICBMT0cuaW5mbygiUmVjb3ZlcmVkIGJvb2tp\nZSBvcGVyYXRpb24gY29tcGxldGVkIHdpdGggcmM6ICIgKyByYyk7CiAgICAg\nICAgICAgIHN1Y2Nlc3MgPSByYyA9PSBDb2RlLk9LLmludFZhbHVlKCk7CiAg\nICAgICAgICAgIFN5bmNPYmplY3Qgc3luYyA9IChTeW5jT2JqZWN0KSBjdHg7\nCiAgICAgICAgICAgIHN5bmNocm9uaXplZCAoc3luYykgewogICAgICAgICAg\nICAgICAgc3luYy52YWx1ZSA9IHRydWU7CiAgICAgICAgICAgICAgICBzeW5j\nLm5vdGlmeSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAg\nIC8vIE9iamVjdHMgdG8gdXNlIGZvciB0aGlzIGpVbml0IHRlc3QuCiAgICBE\naWdlc3RUeXBlIGRpZ2VzdFR5cGU7CiAgICBTeW5jT2JqZWN0IHN5bmM7CiAg\nICBCb29raWVSZWNvdmVyQ2FsbGJhY2sgYm9va2llUmVjb3ZlckNiOwogICAg\nQm9va0tlZXBlckFkbWluIGJrQWRtaW47CgogICAgLy8gQ29uc3RydWN0b3IK\nICAgIHB1YmxpYyBCb29raWVSZWNvdmVyeVRlc3QoRGlnZXN0VHlwZSBkaWdl\nc3RUeXBlKSB7CiAgICAgICAgc3VwZXIoMyk7CiAgICAgICAgdGhpcy5kaWdl\nc3RUeXBlID0gZGlnZXN0VHlwZTsKICAgIH0KCiAgICBAQmVmb3JlCiAgICBA\nT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgdGhyb3dzIEV4Y2Vw\ndGlvbiB7CiAgICAgICAgLy8gU2V0IHVwIHRoZSBjb25maWd1cmF0aW9uIHBy\nb3BlcnRpZXMgbmVlZGVkLgogICAgICAgIGJhc2VDbGllbnRDb25mLnNldEJv\nb2tpZVJlY292ZXJ5RGlnZXN0VHlwZShkaWdlc3RUeXBlKTsKICAgICAgICBi\nYXNlQ2xpZW50Q29uZi5zZXRCb29raWVSZWNvdmVyeVBhc3N3ZCgiIi5nZXRC\neXRlcygpKTsKICAgICAgICBzdXBlci5zZXRVcCgpOwoKICAgICAgICBzeW5j\nID0gbmV3IFN5bmNPYmplY3QoKTsKICAgICAgICBib29raWVSZWNvdmVyQ2Ig\nPSBuZXcgQm9va2llUmVjb3ZlckNhbGxiYWNrKCk7CiAgICAgICAgQ2xpZW50\nQ29uZmlndXJhdGlvbiBhZG1pbkNvbmYgPSBuZXcgQ2xpZW50Q29uZmlndXJh\ndGlvbihiYXNlQ2xpZW50Q29uZik7CiAgICAgICAgYWRtaW5Db25mLnNldFpr\nU2VydmVycyhIT1NUUE9SVCk7CiAgICAgICAgYmtBZG1pbiA9IG5ldyBCb29r\nS2VlcGVyQWRtaW4oYWRtaW5Db25mKTsKICAgIH0KCiAgICBAQWZ0ZXIKICAg\nIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgdGVhckRvd24oKSB0aHJvd3Mg\nRXhjZXB0aW9uIHsKICAgICAgICAvLyBSZWxlYXNlIGFueSByZXNvdXJjZXMg\ndXNlZCBieSB0aGUgQm9va0tlZXBlclRvb2xzIGluc3RhbmNlLgogICAgICAg\nIGJrQWRtaW4uY2xvc2UoKTsKICAgICAgICBzdXBlci50ZWFyRG93bigpOwog\nICAgfQoKICAgIC8qKgogICAgICogSGVscGVyIG1ldGhvZCB0byBjcmVhdGUg\nYSBudW1iZXIgb2YgbGVkZ2VycwogICAgICoKICAgICAqIEBwYXJhbSBudW1M\nZWRnZXJzCiAgICAgKiAgICAgICAgICAgIE51bWJlciBvZiBsZWRnZXJzIHRv\nIGNyZWF0ZQogICAgICogQHJldHVybiBMaXN0IG9mIExlZGdlckhhbmRsZXMg\nZm9yIGVhY2ggb2YgdGhlIGxlZGdlcnMgY3JlYXRlZAogICAgICovCiAgICBw\ncml2YXRlIExpc3Q8TGVkZ2VySGFuZGxlPiBjcmVhdGVMZWRnZXJzKGludCBu\ndW1MZWRnZXJzKSAKICAgICAgICAgICAgdGhyb3dzIEJLRXhjZXB0aW9uLCBL\nZWVwZXJFeGNlcHRpb24sIElPRXhjZXB0aW9uLCBJbnRlcnJ1cHRlZEV4Y2Vw\ndGlvbiAKICAgIHsKICAgICAgICByZXR1cm4gY3JlYXRlTGVkZ2VycyhudW1M\nZWRnZXJzLCAzLCAyKTsKICAgIH0KCiAgICAvKioKICAgICAqIEhlbHBlciBt\nZXRob2QgdG8gY3JlYXRlIGEgbnVtYmVyIG9mIGxlZGdlcnMKICAgICAqCiAg\nICAgKiBAcGFyYW0gbnVtTGVkZ2VycwogICAgICogICAgICAgICAgICBOdW1i\nZXIgb2YgbGVkZ2VycyB0byBjcmVhdGUKICAgICAqIEBwYXJhbSBlbnNlbWJs\nZSBFbnNlbWJsZSBzaXplIGZvciBsZWRnZXJzCiAgICAgKiBAcGFyYW0gcXVv\ncnVtIFF1b3J1bSBzaXplIGZvciBsZWRnZXJzCiAgICAgKiBAcmV0dXJuIExp\nc3Qgb2YgTGVkZ2VySGFuZGxlcyBmb3IgZWFjaCBvZiB0aGUgbGVkZ2VycyBj\ncmVhdGVkCiAgICAgKi8KICAgIHByaXZhdGUgTGlzdDxMZWRnZXJIYW5kbGU+\nIGNyZWF0ZUxlZGdlcnMoaW50IG51bUxlZGdlcnMsIGludCBlbnNlbWJsZSwg\naW50IHF1b3J1bSkgCiAgICAgICAgICAgIHRocm93cyBCS0V4Y2VwdGlvbiwg\nS2VlcGVyRXhjZXB0aW9uLCBJT0V4Y2VwdGlvbiwKICAgICAgICBJbnRlcnJ1\ncHRlZEV4Y2VwdGlvbiB7CiAgICAgICAgTGlzdDxMZWRnZXJIYW5kbGU+IGxo\ncyA9IG5ldyBBcnJheUxpc3Q8TGVkZ2VySGFuZGxlPigpOwogICAgICAgIGZv\nciAoaW50IGkgPSAwOyBpIDwgbnVtTGVkZ2VyczsgaSsrKSB7CiAgICAgICAg\nICAgIGxocy5hZGQoYmtjLmNyZWF0ZUxlZGdlcihlbnNlbWJsZSwgcXVvcnVt\nLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZ2Vz\ndFR5cGUsIGJhc2VDbGllbnRDb25mLmdldEJvb2tpZVJlY292ZXJ5UGFzc3dk\nKCkpKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGxoczsKICAgIH0KCiAg\nICAvKioKICAgICAqIEhlbHBlciBtZXRob2QgdG8gd3JpdGUgZHVtbXkgbGVk\nZ2VyIGVudHJpZXMgdG8gYWxsIG9mIHRoZSBsZWRnZXJzIHBhc3NlZC4KICAg\nICAqCiAgICAgKiBAcGFyYW0gbnVtRW50cmllcwogICAgICogICAgICAgICAg\nICBOdW1iZXIgb2YgbGVkZ2VyIGVudHJpZXMgdG8gd3JpdGUgZm9yIGVhY2gg\nbGVkZ2VyCiAgICAgKiBAcGFyYW0gc3RhcnRFbnRyeUlkCiAgICAgKiAgICAg\nICAgICAgIFRoZSBmaXJzdCBlbnRyeSBJZCB3ZSdyZSBleHBlY3RpbmcgdG8g\nd3JpdGUgZm9yIGVhY2ggbGVkZ2VyCiAgICAgKiBAcGFyYW0gbGhzCiAgICAg\nKiAgICAgICAgICAgIExpc3Qgb2YgTGVkZ2VySGFuZGxlcyBmb3IgYWxsIGxl\nZGdlcnMgdG8gd3JpdGUgZW50cmllcyB0bwogICAgICogQHRocm93cyBCS0V4\nY2VwdGlvbgogICAgICogQHRocm93cyBJbnRlcnJ1cHRlZEV4Y2VwdGlvbgog\nICAgICovCiAgICBwcml2YXRlIHZvaWQgd3JpdGVFbnRyaWVzdG9MZWRnZXJz\nKGludCBudW1FbnRyaWVzLCBsb25nIHN0YXJ0RW50cnlJZCwgTGlzdDxMZWRn\nZXJIYW5kbGU+IGxocykgdGhyb3dzIEJLRXhjZXB0aW9uLAogICAgICAgIElu\ndGVycnVwdGVkRXhjZXB0aW9uIHsKICAgICAgICBmb3IgKExlZGdlckhhbmRs\nZSBsaCA6IGxocykgewogICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8\nIG51bUVudHJpZXM7IGkrKykgewogICAgICAgICAgICAgICAgbGguYWRkRW50\ncnkoKCJMZWRnZXJJZDogIiArIGxoLmdldElkKCkgKyAiLCBFbnRyeUlkOiAi\nICsgKHN0YXJ0RW50cnlJZCArIGkpKS5nZXRCeXRlcygpKTsKICAgICAgICAg\nICAgfQogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEhlbHBlciBt\nZXRob2QgdG8gc3RhcnR1cCBhIG5ldyBib29raWUgc2VydmVyIHdpdGggdGhl\nIGluZGljYXRlZCBwb3J0CiAgICAgKiBudW1iZXIKICAgICAqCiAgICAgKiBA\ncGFyYW0gcG9ydAogICAgICogICAgICAgICAgICBQb3J0IHRvIHN0YXJ0IHRo\nZSBuZXcgYm9va2llIHNlcnZlciBvbgogICAgICogQHRocm93cyBJT0V4Y2Vw\ndGlvbgogICAgICovCiAgICBwcml2YXRlIHZvaWQgc3RhcnROZXdCb29raWUo\naW50IHBvcnQpCiAgICAgICAgICAgIHRocm93cyBJT0V4Y2VwdGlvbiwgSW50\nZXJydXB0ZWRFeGNlcHRpb24sIEtlZXBlckV4Y2VwdGlvbiB7CiAgICAgICAg\nRmlsZSBmID0gRmlsZS5jcmVhdGVUZW1wRmlsZSgiYm9va2llIiwgInRlc3Qi\nKTsKICAgICAgICB0bXBEaXJzLmFkZChmKTsKICAgICAgICBmLmRlbGV0ZSgp\nOwogICAgICAgIGYubWtkaXIoKTsKCiAgICAgICAgU2VydmVyQ29uZmlndXJh\ndGlvbiBjb25mID0gbmV3U2VydmVyQ29uZmlndXJhdGlvbihwb3J0LCBIT1NU\nUE9SVCwgZiwgbmV3IEZpbGVbXSB7IGYgfSk7CgogICAgICAgIEJvb2tpZVNl\ncnZlciBzZXJ2ZXIgPSBuZXcgQm9va2llU2VydmVyKGNvbmYpOwogICAgICAg\nIHNlcnZlci5zdGFydCgpOwogICAgICAgIGJzLmFkZChzZXJ2ZXIpOwoKICAg\nICAgICB3aGlsZShia2MuZ2V0WmtIYW5kbGUoKS5leGlzdHMoIi9sZWRnZXJz\nL2F2YWlsYWJsZS8iICsgSW5ldEFkZHJlc3MuZ2V0TG9jYWxIb3N0KCkuZ2V0\nSG9zdEFkZHJlc3MoKSArICI6IiArIHBvcnQsIGZhbHNlKSA9PSBudWxsKSB7\nCiAgICAgICAgICAgIFRocmVhZC5zbGVlcCg1MDApOwogICAgICAgIH0KCiAg\nICAgICAgYmtjLnJlYWRCb29raWVzQmxvY2tpbmcoKTsKICAgICAgICBMT0cu\naW5mbygiTmV3IGJvb2tpZSBvbiBwb3J0ICIgKyBwb3J0ICsgIiBoYXMgYmVl\nbiBjcmVhdGVkLiIpOwogICAgfQoKICAgIC8qKgogICAgICogSGVscGVyIG1l\ndGhvZCB0byB2ZXJpZnkgdGhhdCB3ZSBjYW4gcmVhZCB0aGUgcmVjb3ZlcmVk\nIGxlZGdlciBlbnRyaWVzLgogICAgICoKICAgICAqIEBwYXJhbSBvbGRMaHMK\nICAgICAqICAgICAgICAgICAgT2xkIExlZGdlciBIYW5kbGVzCiAgICAgKiBA\ncGFyYW0gc3RhcnRFbnRyeUlkCiAgICAgKiAgICAgICAgICAgIFN0YXJ0IEVu\ndHJ5IElkIHRvIHJlYWQKICAgICAqIEBwYXJhbSBlbmRFbnRyeUlkCiAgICAg\nKiAgICAgICAgICAgIEVuZCBFbnRyeSBJZCB0byByZWFkCiAgICAgKiBAdGhy\nb3dzIEJLRXhjZXB0aW9uCiAgICAgKiBAdGhyb3dzIEludGVycnVwdGVkRXhj\nZXB0aW9uCiAgICAgKi8KICAgIHByaXZhdGUgdm9pZCB2ZXJpZnlSZWNvdmVy\nZWRMZWRnZXJzKExpc3Q8TGVkZ2VySGFuZGxlPiBvbGRMaHMsIGxvbmcgc3Rh\ncnRFbnRyeUlkLCBsb25nIGVuZEVudHJ5SWQpIHRocm93cyBCS0V4Y2VwdGlv\nbiwKICAgICAgICBJbnRlcnJ1cHRlZEV4Y2VwdGlvbiB7CiAgICAgICAgLy8g\nR2V0IGEgc2V0IG9mIExlZGdlckhhbmRsZXMgZm9yIGFsbCBvZiB0aGUgbGVk\nZ2VycyB0byB2ZXJpZnkKICAgICAgICBMaXN0PExlZGdlckhhbmRsZT4gbGhz\nID0gbmV3IEFycmF5TGlzdDxMZWRnZXJIYW5kbGU+KCk7CiAgICAgICAgZm9y\nIChpbnQgaSA9IDA7IGkgPCBvbGRMaHMuc2l6ZSgpOyBpKyspIHsKICAgICAg\nICAgICAgbGhzLmFkZChia2Mub3BlbkxlZGdlcihvbGRMaHMuZ2V0KGkpLmdl\ndElkKCksIGRpZ2VzdFR5cGUsIGJhc2VDbGllbnRDb25mLmdldEJvb2tpZVJl\nY292ZXJ5UGFzc3dkKCkpKTsKICAgICAgICB9CiAgICAgICAgLy8gUmVhZCB0\naGUgbGVkZ2VyIGVudHJpZXMgdG8gdmVyaWZ5IHRoYXQgdGhleSBhcmUgYWxs\nIHByZXNlbnQgYW5kCiAgICAgICAgLy8gY29ycmVjdCBpbiB0aGUgbmV3IGJv\nb2tpZS4KICAgICAgICBmb3IgKExlZGdlckhhbmRsZSBsaCA6IGxocykgewog\nICAgICAgICAgICBFbnVtZXJhdGlvbjxMZWRnZXJFbnRyeT4gZW50cmllcyA9\nIGxoLnJlYWRFbnRyaWVzKHN0YXJ0RW50cnlJZCwgZW5kRW50cnlJZCk7CiAg\nICAgICAgICAgIHdoaWxlIChlbnRyaWVzLmhhc01vcmVFbGVtZW50cygpKSB7\nCiAgICAgICAgICAgICAgICBMZWRnZXJFbnRyeSBlbnRyeSA9IGVudHJpZXMu\nbmV4dEVsZW1lbnQoKTsKICAgICAgICAgICAgICAgIGFzc2VydFRydWUobmV3\nIFN0cmluZyhlbnRyeS5nZXRFbnRyeSgpKS5lcXVhbHMoIkxlZGdlcklkOiAi\nICsgZW50cnkuZ2V0TGVkZ2VySWQoKSArICIsIEVudHJ5SWQ6ICIKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgKyBlbnRyeS5nZXRFbnRyeUlkKCkpKTsK\nICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICB9CgogICAgLyoqCiAgICAg\nKiBUaGlzIHRlc3RzIHRoZSBhc3luY2hyb25vdXMgYm9va2llIHJlY292ZXJ5\nIGZ1bmN0aW9uYWxpdHkgYnkgd3JpdGluZwogICAgICogZW50cmllcyBpbnRv\nIDMgYm9va2llcywga2lsbGluZyBvbmUgYm9va2llLCBzdGFydGluZyB1cCBh\nIG5ldyBvbmUgdG8KICAgICAqIHJlcGxhY2UgaXQsIGFuZCB0aGVuIHJlY292\nZXJpbmcgdGhlIGxlZGdlciBlbnRyaWVzIGZyb20gdGhlIGtpbGxlZCBib29r\naWUKICAgICAqIG9udG8gdGhlIG5ldyBvbmUuIFdlJ2xsIHZlcmlmeSB0aGF0\nIHRoZSBlbnRyaWVzIHN0b3JlZCBvbiB0aGUga2lsbGVkCiAgICAgKiBib29r\naWUgYXJlIHByb3Blcmx5IGNvcGllZCBvdmVyIGFuZCByZXN0b3JlZCBvbnRv\nIHRoZSBuZXcgb25lLgogICAgICoKICAgICAqIEB0aHJvd3MgRXhjZXB0aW9u\nCiAgICAgKi8KICAgIEBUZXN0CiAgICBwdWJsaWMgdm9pZCB0ZXN0QXN5bmNC\nb29raWVSZWNvdmVyeVRvU3BlY2lmaWNCb29raWUoKSB0aHJvd3MgRXhjZXB0\naW9uIHsKICAgICAgICAvLyBDcmVhdGUgdGhlIGxlZGdlcnMKICAgICAgICBp\nbnQgbnVtTGVkZ2VycyA9IDM7CiAgICAgICAgTGlzdDxMZWRnZXJIYW5kbGU+\nIGxocyA9IGNyZWF0ZUxlZGdlcnMobnVtTGVkZ2Vycyk7CgogICAgICAgIC8v\nIFdyaXRlIHRoZSBlbnRyaWVzIGZvciB0aGUgbGVkZ2VycyB3aXRoIGR1bW15\nIHZhbHVlcy4KICAgICAgICBpbnQgbnVtTXNncyA9IDEwOwogICAgICAgIHdy\naXRlRW50cmllc3RvTGVkZ2VycyhudW1Nc2dzLCAwLCBsaHMpOwoKICAgICAg\nICAvLyBTaHV0ZG93biB0aGUgZmlyc3QgYm9va2llIHNlcnZlcgogICAgICAg\nIExPRy5pbmZvKCJGaW5pc2hlZCB3cml0aW5nIGFsbCBsZWRnZXIgZW50cmll\ncyBzbyBzaHV0ZG93biBvbmUgb2YgdGhlIGJvb2tpZXMuIik7CiAgICAgICAg\nYnMuZ2V0KDApLnNodXRkb3duKCk7CiAgICAgICAgYnMucmVtb3ZlKDApOwoK\nICAgICAgICAvLyBTdGFydHVwIGEgbmV3IGJvb2tpZSBzZXJ2ZXIKICAgICAg\nICBpbnQgbmV3Qm9va2llUG9ydCA9IGluaXRpYWxQb3J0ICsgbnVtQm9va2ll\nczsKICAgICAgICBzdGFydE5ld0Jvb2tpZShuZXdCb29raWVQb3J0KTsKCiAg\nICAgICAgLy8gV3JpdGUgc29tZSBtb3JlIGVudHJpZXMgZm9yIHRoZSBsZWRn\nZXJzIHNvIGEgbmV3IGVuc2VtYmxlIHdpbGwgYmUKICAgICAgICAvLyBjcmVh\ndGVkIGZvciB0aGVtLgogICAgICAgIHdyaXRlRW50cmllc3RvTGVkZ2Vycyhu\ndW1Nc2dzLCAxMCwgbGhzKTsKCiAgICAgICAgLy8gQ2FsbCB0aGUgYXN5bmMg\ncmVjb3ZlciBib29raWUgbWV0aG9kLgogICAgICAgIEluZXRTb2NrZXRBZGRy\nZXNzIGJvb2tpZVNyYyA9IG5ldyBJbmV0U29ja2V0QWRkcmVzcyhJbmV0QWRk\ncmVzcy5nZXRMb2NhbEhvc3QoKS5nZXRIb3N0QWRkcmVzcygpLCBpbml0aWFs\nUG9ydCk7CiAgICAgICAgSW5ldFNvY2tldEFkZHJlc3MgYm9va2llRGVzdCA9\nIG5ldyBJbmV0U29ja2V0QWRkcmVzcyhJbmV0QWRkcmVzcy5nZXRMb2NhbEhv\nc3QoKS5nZXRIb3N0QWRkcmVzcygpLCBuZXdCb29raWVQb3J0KTsKICAgICAg\nICBMT0cuaW5mbygiTm93IHJlY292ZXIgdGhlIGRhdGEgb24gdGhlIGtpbGxl\nZCBib29raWUgKCIgKyBib29raWVTcmMgKyAiKSBhbmQgcmVwbGljYXRlIGl0\nIHRvIHRoZSBuZXcgb25lICgiCiAgICAgICAgICAgICAgICAgKyBib29raWVE\nZXN0ICsgIikiKTsKICAgICAgICAvLyBJbml0aWF0ZSB0aGUgc3luYyBvYmpl\nY3QKICAgICAgICBzeW5jLnZhbHVlID0gZmFsc2U7CiAgICAgICAgYmtBZG1p\nbi5hc3luY1JlY292ZXJCb29raWVEYXRhKGJvb2tpZVNyYywgYm9va2llRGVz\ndCwgYm9va2llUmVjb3ZlckNiLCBzeW5jKTsKCiAgICAgICAgLy8gV2FpdCBm\nb3IgdGhlIGFzeW5jIG1ldGhvZCB0byBjb21wbGV0ZS4KICAgICAgICBzeW5j\naHJvbml6ZWQgKHN5bmMpIHsKICAgICAgICAgICAgd2hpbGUgKHN5bmMudmFs\ndWUgPT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgIHN5bmMud2FpdCgpOwog\nICAgICAgICAgICB9CiAgICAgICAgICAgIGFzc2VydFRydWUoYm9va2llUmVj\nb3ZlckNiLnN1Y2Nlc3MpOwogICAgICAgIH0KCiAgICAgICAgLy8gVmVyaWZ5\nIHRoZSByZWNvdmVyZWQgbGVkZ2VyIGVudHJpZXMgYXJlIG9rYXkuCiAgICAg\nICAgdmVyaWZ5UmVjb3ZlcmVkTGVkZ2VycyhsaHMsIDAsIDIgKiBudW1Nc2dz\nIC0gMSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGlzIHRlc3RzIHRoZSBh\nc3luY2hyb25vdXMgYm9va2llIHJlY292ZXJ5IGZ1bmN0aW9uYWxpdHkgYnkg\nd3JpdGluZwogICAgICogZW50cmllcyBpbnRvIDMgYm9va2llcywga2lsbGlu\nZyBvbmUgYm9va2llLCBzdGFydGluZyB1cCBhIGZldyBuZXcKICAgICAqIGJv\nb2tpZXMsIGFuZCB0aGVuIHJlY292ZXJpbmcgdGhlIGxlZGdlciBlbnRyaWVz\nIGZyb20gdGhlIGtpbGxlZCBib29raWUKICAgICAqIG9udG8gcmFuZG9tIGF2\nYWlsYWJsZSBib29raWUgc2VydmVycy4gV2UnbGwgdmVyaWZ5IHRoYXQgdGhl\nIGVudHJpZXMKICAgICAqIHN0b3JlZCBvbiB0aGUga2lsbGVkIGJvb2tpZSBh\ncmUgcHJvcGVybHkgY29waWVkIG92ZXIgYW5kIHJlc3RvcmVkIG9udG8KICAg\nICAqIHRoZSBvdGhlciBib29raWVzLgogICAgICoKICAgICAqIEB0aHJvd3Mg\nRXhjZXB0aW9uCiAgICAgKi8KICAgIEBUZXN0CiAgICBwdWJsaWMgdm9pZCB0\nZXN0QXN5bmNCb29raWVSZWNvdmVyeVRvUmFuZG9tQm9va2llcygpIHRocm93\ncyBFeGNlcHRpb24gewogICAgICAgIC8vIENyZWF0ZSB0aGUgbGVkZ2Vycwog\nICAgICAgIGludCBudW1MZWRnZXJzID0gMzsKICAgICAgICBMaXN0PExlZGdl\nckhhbmRsZT4gbGhzID0gY3JlYXRlTGVkZ2VycyhudW1MZWRnZXJzKTsKCiAg\nICAgICAgLy8gV3JpdGUgdGhlIGVudHJpZXMgZm9yIHRoZSBsZWRnZXJzIHdp\ndGggZHVtbXkgdmFsdWVzLgogICAgICAgIGludCBudW1Nc2dzID0gMTA7CiAg\nICAgICAgd3JpdGVFbnRyaWVzdG9MZWRnZXJzKG51bU1zZ3MsIDAsIGxocyk7\nCgogICAgICAgIC8vIFNodXRkb3duIHRoZSBmaXJzdCBib29raWUgc2VydmVy\nCiAgICAgICAgTE9HLmluZm8oIkZpbmlzaGVkIHdyaXRpbmcgYWxsIGxlZGdl\nciBlbnRyaWVzIHNvIHNodXRkb3duIG9uZSBvZiB0aGUgYm9va2llcy4iKTsK\nICAgICAgICBicy5nZXQoMCkuc2h1dGRvd24oKTsKICAgICAgICBicy5yZW1v\ndmUoMCk7CgogICAgICAgIC8vIFN0YXJ0dXAgdGhyZWUgbmV3IGJvb2tpZSBz\nZXJ2ZXJzCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCAzOyBpKyspIHsK\nICAgICAgICAgICAgaW50IG5ld0Jvb2tpZVBvcnQgPSBpbml0aWFsUG9ydCAr\nIG51bUJvb2tpZXMgKyBpOwogICAgICAgICAgICBzdGFydE5ld0Jvb2tpZShu\nZXdCb29raWVQb3J0KTsKICAgICAgICB9CgogICAgICAgIC8vIFdyaXRlIHNv\nbWUgbW9yZSBlbnRyaWVzIGZvciB0aGUgbGVkZ2VycyBzbyBhIG5ldyBlbnNl\nbWJsZSB3aWxsIGJlCiAgICAgICAgLy8gY3JlYXRlZCBmb3IgdGhlbS4KICAg\nICAgICB3cml0ZUVudHJpZXN0b0xlZGdlcnMobnVtTXNncywgMTAsIGxocyk7\nCgogICAgICAgIC8vIENhbGwgdGhlIGFzeW5jIHJlY292ZXIgYm9va2llIG1l\ndGhvZC4KICAgICAgICBJbmV0U29ja2V0QWRkcmVzcyBib29raWVTcmMgPSBu\nZXcgSW5ldFNvY2tldEFkZHJlc3MoSW5ldEFkZHJlc3MuZ2V0TG9jYWxIb3N0\nKCkuZ2V0SG9zdEFkZHJlc3MoKSwgaW5pdGlhbFBvcnQpOwogICAgICAgIElu\nZXRTb2NrZXRBZGRyZXNzIGJvb2tpZURlc3QgPSBudWxsOwogICAgICAgIExP\nRy5pbmZvKCJOb3cgcmVjb3ZlciB0aGUgZGF0YSBvbiB0aGUga2lsbGVkIGJv\nb2tpZSAoIiArIGJvb2tpZVNyYwogICAgICAgICAgICAgICAgICsgIikgYW5k\nIHJlcGxpY2F0ZSBpdCB0byBhIHJhbmRvbSBhdmFpbGFibGUgb25lIik7CiAg\nICAgICAgLy8gSW5pdGlhdGUgdGhlIHN5bmMgb2JqZWN0CiAgICAgICAgc3lu\nYy52YWx1ZSA9IGZhbHNlOwogICAgICAgIGJrQWRtaW4uYXN5bmNSZWNvdmVy\nQm9va2llRGF0YShib29raWVTcmMsIGJvb2tpZURlc3QsIGJvb2tpZVJlY292\nZXJDYiwgc3luYyk7CgogICAgICAgIC8vIFdhaXQgZm9yIHRoZSBhc3luYyBt\nZXRob2QgdG8gY29tcGxldGUuCiAgICAgICAgc3luY2hyb25pemVkIChzeW5j\nKSB7CiAgICAgICAgICAgIHdoaWxlIChzeW5jLnZhbHVlID09IGZhbHNlKSB7\nCiAgICAgICAgICAgICAgICBzeW5jLndhaXQoKTsKICAgICAgICAgICAgfQog\nICAgICAgICAgICBhc3NlcnRUcnVlKGJvb2tpZVJlY292ZXJDYi5zdWNjZXNz\nKTsKICAgICAgICB9CgogICAgICAgIC8vIFZlcmlmeSB0aGUgcmVjb3ZlcmVk\nIGxlZGdlciBlbnRyaWVzIGFyZSBva2F5LgogICAgICAgIHZlcmlmeVJlY292\nZXJlZExlZGdlcnMobGhzLCAwLCAyICogbnVtTXNncyAtIDEpOwogICAgfQoK\nICAgIC8qKgogICAgICogVGhpcyB0ZXN0cyB0aGUgc3luY2hyb25vdXMgYm9v\na2llIHJlY292ZXJ5IGZ1bmN0aW9uYWxpdHkgYnkgd3JpdGluZwogICAgICog\nZW50cmllcyBpbnRvIDMgYm9va2llcywga2lsbGluZyBvbmUgYm9va2llLCBz\ndGFydGluZyB1cCBhIG5ldyBvbmUgdG8KICAgICAqIHJlcGxhY2UgaXQsIGFu\nZCB0aGVuIHJlY292ZXJpbmcgdGhlIGxlZGdlciBlbnRyaWVzIGZyb20gdGhl\nIGtpbGxlZCBib29raWUKICAgICAqIG9udG8gdGhlIG5ldyBvbmUuIFdlJ2xs\nIHZlcmlmeSB0aGF0IHRoZSBlbnRyaWVzIHN0b3JlZCBvbiB0aGUga2lsbGVk\nCiAgICAgKiBib29raWUgYXJlIHByb3Blcmx5IGNvcGllZCBvdmVyIGFuZCBy\nZXN0b3JlZCBvbnRvIHRoZSBuZXcgb25lLgogICAgICoKICAgICAqIEB0aHJv\nd3MgRXhjZXB0aW9uCiAgICAgKi8KICAgIEBUZXN0CiAgICBwdWJsaWMgdm9p\nZCB0ZXN0U3luY0Jvb2tpZVJlY292ZXJ5VG9TcGVjaWZpY0Jvb2tpZSgpIHRo\ncm93cyBFeGNlcHRpb24gewogICAgICAgIC8vIENyZWF0ZSB0aGUgbGVkZ2Vy\ncwogICAgICAgIGludCBudW1MZWRnZXJzID0gMzsKICAgICAgICBMaXN0PExl\nZGdlckhhbmRsZT4gbGhzID0gY3JlYXRlTGVkZ2VycyhudW1MZWRnZXJzKTsK\nCiAgICAgICAgLy8gV3JpdGUgdGhlIGVudHJpZXMgZm9yIHRoZSBsZWRnZXJz\nIHdpdGggZHVtbXkgdmFsdWVzLgogICAgICAgIGludCBudW1Nc2dzID0gMTA7\nCiAgICAgICAgd3JpdGVFbnRyaWVzdG9MZWRnZXJzKG51bU1zZ3MsIDAsIGxo\ncyk7CgogICAgICAgIC8vIFNodXRkb3duIHRoZSBmaXJzdCBib29raWUgc2Vy\ndmVyCiAgICAgICAgTE9HLmluZm8oIkZpbmlzaGVkIHdyaXRpbmcgYWxsIGxl\nZGdlciBlbnRyaWVzIHNvIHNodXRkb3duIG9uZSBvZiB0aGUgYm9va2llcy4i\nKTsKICAgICAgICBicy5nZXQoMCkuc2h1dGRvd24oKTsKICAgICAgICBicy5y\nZW1vdmUoMCk7CgogICAgICAgIC8vIFN0YXJ0dXAgYSBuZXcgYm9va2llIHNl\ncnZlcgogICAgICAgIGludCBuZXdCb29raWVQb3J0ID0gaW5pdGlhbFBvcnQg\nKyBudW1Cb29raWVzOwogICAgICAgIHN0YXJ0TmV3Qm9va2llKG5ld0Jvb2tp\nZVBvcnQpOwoKICAgICAgICAvLyBXcml0ZSBzb21lIG1vcmUgZW50cmllcyBm\nb3IgdGhlIGxlZGdlcnMgc28gYSBuZXcgZW5zZW1ibGUgd2lsbCBiZQogICAg\nICAgIC8vIGNyZWF0ZWQgZm9yIHRoZW0uCiAgICAgICAgd3JpdGVFbnRyaWVz\ndG9MZWRnZXJzKG51bU1zZ3MsIDEwLCBsaHMpOwoKICAgICAgICAvLyBDYWxs\nIHRoZSBzeW5jIHJlY292ZXIgYm9va2llIG1ldGhvZC4KICAgICAgICBJbmV0\nU29ja2V0QWRkcmVzcyBib29raWVTcmMgPSBuZXcgSW5ldFNvY2tldEFkZHJl\nc3MoSW5ldEFkZHJlc3MuZ2V0TG9jYWxIb3N0KCkuZ2V0SG9zdEFkZHJlc3Mo\nKSwgaW5pdGlhbFBvcnQpOwogICAgICAgIEluZXRTb2NrZXRBZGRyZXNzIGJv\nb2tpZURlc3QgPSBuZXcgSW5ldFNvY2tldEFkZHJlc3MoSW5ldEFkZHJlc3Mu\nZ2V0TG9jYWxIb3N0KCkuZ2V0SG9zdEFkZHJlc3MoKSwgbmV3Qm9va2llUG9y\ndCk7CiAgICAgICAgTE9HLmluZm8oIk5vdyByZWNvdmVyIHRoZSBkYXRhIG9u\nIHRoZSBraWxsZWQgYm9va2llICgiICsgYm9va2llU3JjICsgIikgYW5kIHJl\ncGxpY2F0ZSBpdCB0byB0aGUgbmV3IG9uZSAoIgogICAgICAgICAgICAgICAg\nICsgYm9va2llRGVzdCArICIpIik7CiAgICAgICAgYmtBZG1pbi5yZWNvdmVy\nQm9va2llRGF0YShib29raWVTcmMsIGJvb2tpZURlc3QpOwoKICAgICAgICAv\nLyBWZXJpZnkgdGhlIHJlY292ZXJlZCBsZWRnZXIgZW50cmllcyBhcmUgb2th\neS4KICAgICAgICB2ZXJpZnlSZWNvdmVyZWRMZWRnZXJzKGxocywgMCwgMiAq\nIG51bU1zZ3MgLSAxKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRoaXMgdGVz\ndHMgdGhlIHN5bmNocm9ub3VzIGJvb2tpZSByZWNvdmVyeSBmdW5jdGlvbmFs\naXR5IGJ5IHdyaXRpbmcKICAgICAqIGVudHJpZXMgaW50byAzIGJvb2tpZXMs\nIGtpbGxpbmcgb25lIGJvb2tpZSwgc3RhcnRpbmcgdXAgYSBmZXcgbmV3CiAg\nICAgKiBib29raWVzLCBhbmQgdGhlbiByZWNvdmVyaW5nIHRoZSBsZWRnZXIg\nZW50cmllcyBmcm9tIHRoZSBraWxsZWQgYm9va2llCiAgICAgKiBvbnRvIHJh\nbmRvbSBhdmFpbGFibGUgYm9va2llIHNlcnZlcnMuIFdlJ2xsIHZlcmlmeSB0\naGF0IHRoZSBlbnRyaWVzCiAgICAgKiBzdG9yZWQgb24gdGhlIGtpbGxlZCBi\nb29raWUgYXJlIHByb3Blcmx5IGNvcGllZCBvdmVyIGFuZCByZXN0b3JlZCBv\nbnRvCiAgICAgKiB0aGUgb3RoZXIgYm9va2llcy4KICAgICAqCiAgICAgKiBA\ndGhyb3dzIEV4Y2VwdGlvbgogICAgICovCiAgICBAVGVzdAogICAgcHVibGlj\nIHZvaWQgdGVzdFN5bmNCb29raWVSZWNvdmVyeVRvUmFuZG9tQm9va2llcygp\nIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIC8vIENyZWF0ZSB0aGUgbGVk\nZ2VycwogICAgICAgIGludCBudW1MZWRnZXJzID0gMzsKICAgICAgICBMaXN0\nPExlZGdlckhhbmRsZT4gbGhzID0gY3JlYXRlTGVkZ2VycyhudW1MZWRnZXJz\nKTsKCiAgICAgICAgLy8gV3JpdGUgdGhlIGVudHJpZXMgZm9yIHRoZSBsZWRn\nZXJzIHdpdGggZHVtbXkgdmFsdWVzLgogICAgICAgIGludCBudW1Nc2dzID0g\nMTA7CiAgICAgICAgd3JpdGVFbnRyaWVzdG9MZWRnZXJzKG51bU1zZ3MsIDAs\nIGxocyk7CgogICAgICAgIC8vIFNodXRkb3duIHRoZSBmaXJzdCBib29raWUg\nc2VydmVyCiAgICAgICAgTE9HLmluZm8oIkZpbmlzaGVkIHdyaXRpbmcgYWxs\nIGxlZGdlciBlbnRyaWVzIHNvIHNodXRkb3duIG9uZSBvZiB0aGUgYm9va2ll\ncy4iKTsKICAgICAgICBicy5nZXQoMCkuc2h1dGRvd24oKTsKICAgICAgICBi\ncy5yZW1vdmUoMCk7CgogICAgICAgIC8vIFN0YXJ0dXAgdGhyZWUgbmV3IGJv\nb2tpZSBzZXJ2ZXJzCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCAzOyBp\nKyspIHsKICAgICAgICAgICAgaW50IG5ld0Jvb2tpZVBvcnQgPSBpbml0aWFs\nUG9ydCArIG51bUJvb2tpZXMgKyBpOwogICAgICAgICAgICBzdGFydE5ld0Jv\nb2tpZShuZXdCb29raWVQb3J0KTsKICAgICAgICB9CgogICAgICAgIC8vIFdy\naXRlIHNvbWUgbW9yZSBlbnRyaWVzIGZvciB0aGUgbGVkZ2VycyBzbyBhIG5l\ndyBlbnNlbWJsZSB3aWxsIGJlCiAgICAgICAgLy8gY3JlYXRlZCBmb3IgdGhl\nbS4KICAgICAgICB3cml0ZUVudHJpZXN0b0xlZGdlcnMobnVtTXNncywgMTAs\nIGxocyk7CgogICAgICAgIC8vIENhbGwgdGhlIHN5bmMgcmVjb3ZlciBib29r\naWUgbWV0aG9kLgogICAgICAgIEluZXRTb2NrZXRBZGRyZXNzIGJvb2tpZVNy\nYyA9IG5ldyBJbmV0U29ja2V0QWRkcmVzcyhJbmV0QWRkcmVzcy5nZXRMb2Nh\nbEhvc3QoKS5nZXRIb3N0QWRkcmVzcygpLCBpbml0aWFsUG9ydCk7CiAgICAg\nICAgSW5ldFNvY2tldEFkZHJlc3MgYm9va2llRGVzdCA9IG51bGw7CiAgICAg\nICAgTE9HLmluZm8oIk5vdyByZWNvdmVyIHRoZSBkYXRhIG9uIHRoZSBraWxs\nZWQgYm9va2llICgiICsgYm9va2llU3JjCiAgICAgICAgICAgICAgICAgKyAi\nKSBhbmQgcmVwbGljYXRlIGl0IHRvIGEgcmFuZG9tIGF2YWlsYWJsZSBvbmUi\nKTsKICAgICAgICBia0FkbWluLnJlY292ZXJCb29raWVEYXRhKGJvb2tpZVNy\nYywgYm9va2llRGVzdCk7CgogICAgICAgIC8vIFZlcmlmeSB0aGUgcmVjb3Zl\ncmVkIGxlZGdlciBlbnRyaWVzIGFyZSBva2F5LgogICAgICAgIHZlcmlmeVJl\nY292ZXJlZExlZGdlcnMobGhzLCAwLCAyICogbnVtTXNncyAtIDEpOwogICAg\nfQoKICAgIHByaXZhdGUgc3RhdGljIGNsYXNzIFJlcGxpY2F0aW9uVmVyaWZp\nY2F0aW9uQ2FsbGJhY2sgaW1wbGVtZW50cyBSZWFkRW50cnlDYWxsYmFjayB7\nCiAgICAgICAgZmluYWwgQ291bnREb3duTGF0Y2ggbGF0Y2g7CiAgICAgICAg\nZmluYWwgQXRvbWljTG9uZyBudW1TdWNjZXNzOwoKICAgICAgICBSZXBsaWNh\ndGlvblZlcmlmaWNhdGlvbkNhbGxiYWNrKGludCBudW1SZXF1ZXN0cykgewog\nICAgICAgICAgICBsYXRjaCA9IG5ldyBDb3VudERvd25MYXRjaChudW1SZXF1\nZXN0cyk7CiAgICAgICAgICAgIG51bVN1Y2Nlc3MgPSBuZXcgQXRvbWljTG9u\nZygwKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHJlYWRFbnRy\neUNvbXBsZXRlKGludCByYywgbG9uZyBsZWRnZXJJZCwgbG9uZyBlbnRyeUlk\nLCBDaGFubmVsQnVmZmVyIGJ1ZmZlciwgT2JqZWN0IGN0eCkgewogICAgICAg\nICAgICBpZiAoTE9HLmlzRGVidWdFbmFibGVkKCkpIHsKICAgICAgICAgICAg\nICAgIEluZXRTb2NrZXRBZGRyZXNzIGFkZHIgPSAoSW5ldFNvY2tldEFkZHJl\nc3MpY3R4OwogICAgICAgICAgICAgICAgTE9HLmRlYnVnKCJHb3QgIiArIHJj\nICsgIiBmb3IgbGVkZ2VyICIgKyBsZWRnZXJJZCArICIgZW50cnkgIiArIGVu\ndHJ5SWQgKyAiIGZyb20gIiArIGN0eCk7CiAgICAgICAgICAgIH0KICAgICAg\nICAgICAgaWYgKHJjID09IEJLRXhjZXB0aW9uLkNvZGUuT0spIHsKICAgICAg\nICAgICAgICAgIG51bVN1Y2Nlc3MuaW5jcmVtZW50QW5kR2V0KCk7CiAgICAg\nICAgICAgIH0KICAgICAgICAgICAgbGF0Y2guY291bnREb3duKCk7CiAgICAg\nICAgfQoKICAgICAgICBsb25nIGF3YWl0KCkgdGhyb3dzIEludGVycnVwdGVk\nRXhjZXB0aW9uIHsKICAgICAgICAgICAgaWYgKGxhdGNoLmF3YWl0KDYwLCBU\naW1lVW5pdC5TRUNPTkRTKSA9PSBmYWxzZSkgewogICAgICAgICAgICAgICAg\nTE9HLndhcm4oIkRpZG4ndCBnZXQgYWxsIHJlc3BvbnNlcyBpbiB2ZXJpZmlj\nYXRpb24iKTsKICAgICAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgICAg\nICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIG51bVN1Y2Nlc3Mu\nZ2V0KCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgcHJp\ndmF0ZSBib29sZWFuIHZlcmlmeUZ1bGx5UmVwbGljYXRlZChMZWRnZXJIYW5k\nbGUgbGgsIGxvbmcgdW50aWxFbnRyeSkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAg\nICAgICAgU3RyaW5nIHpub2RlcGF0aCA9IGJrYy5nZXRMZWRnZXJNYW5hZ2Vy\nKCkuZ2V0TGVkZ2VyUGF0aChsaC5nZXRJZCgpKTsKICAgICAgICBTdGF0IHN0\nYXQgPSBia2MuZ2V0WmtIYW5kbGUoKS5leGlzdHMoem5vZGVwYXRoLCBmYWxz\nZSk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChzdGF0KTsKICAgICAgICBieXRl\nW10gbWRieXRlcyA9IGJrYy5nZXRaa0hhbmRsZSgpLmdldERhdGEoem5vZGVw\nYXRoLCBmYWxzZSwgc3RhdCk7IAogICAgICAgIExlZGdlck1ldGFkYXRhIG1k\nID0gTGVkZ2VyTWV0YWRhdGEucGFyc2VDb25maWcobWRieXRlcywgc3RhdC5n\nZXRWZXJzaW9uKCkpOyAKCiAgICAgICAgTWFwPExvbmcsIEFycmF5TGlzdDxJ\nbmV0U29ja2V0QWRkcmVzcz4+IGVuc2VtYmxlcyA9IG1kLmdldEVuc2VtYmxl\ncygpOwoKICAgICAgICBIYXNoTWFwPExvbmcsIExvbmc+IHJhbmdlcyA9IG5l\ndyBIYXNoTWFwPExvbmcsIExvbmc+KCk7CiAgICAgICAgQXJyYXlMaXN0PExv\nbmc+IGtleUxpc3QgPSBDb2xsZWN0aW9ucy5saXN0KAogICAgICAgICAgICAg\nICAgQ29sbGVjdGlvbnMuZW51bWVyYXRpb24oZW5zZW1ibGVzLmtleVNldCgp\nKSk7CiAgICAgICAgQ29sbGVjdGlvbnMuc29ydChrZXlMaXN0KTsKICAgICAg\nICBmb3IgKGludCBpID0gMDsgaSA8IGtleUxpc3Quc2l6ZSgpIC0gMTsgaSsr\nKSB7CiAgICAgICAgICAgIHJhbmdlcy5wdXQoa2V5TGlzdC5nZXQoaSksIGtl\neUxpc3QuZ2V0KGkrMSkpOwogICAgICAgIH0KICAgICAgICByYW5nZXMucHV0\nKGtleUxpc3QuZ2V0KGtleUxpc3Quc2l6ZSgpLTEpLCB1bnRpbEVudHJ5KTsK\nICAgICAgICAKICAgICAgICBmb3IgKE1hcC5FbnRyeTxMb25nLCBBcnJheUxp\nc3Q8SW5ldFNvY2tldEFkZHJlc3M+PiBlIDogZW5zZW1ibGVzLmVudHJ5U2V0\nKCkpIHsKICAgICAgICAgICAgaW50IHF1b3J1bSA9IG1kLnF1b3J1bVNpemU7\nCiAgICAgICAgICAgIGxvbmcgc3RhcnRFbnRyeUlkID0gZS5nZXRLZXkoKTsK\nICAgICAgICAgICAgbG9uZyBlbmRFbnRyeUlkID0gcmFuZ2VzLmdldChzdGFy\ndEVudHJ5SWQpOwogICAgICAgICAgICBsb25nIGV4cGVjdGVkU3VjY2VzcyA9\nIHF1b3J1bSooZW5kRW50cnlJZC1zdGFydEVudHJ5SWQpOwogICAgICAgICAg\nICBpbnQgbnVtUmVxdWVzdHMgPSBlLmdldFZhbHVlKCkuc2l6ZSgpKigoaW50\nKShlbmRFbnRyeUlkLXN0YXJ0RW50cnlJZCkpOwoKICAgICAgICAgICAgUmVw\nbGljYXRpb25WZXJpZmljYXRpb25DYWxsYmFjayBjYiA9IG5ldyBSZXBsaWNh\ndGlvblZlcmlmaWNhdGlvbkNhbGxiYWNrKG51bVJlcXVlc3RzKTsKICAgICAg\nICAgICAgZm9yIChsb25nIGkgPSBzdGFydEVudHJ5SWQ7IGkgPCBlbmRFbnRy\neUlkOyBpKyspIHsKICAgICAgICAgICAgICAgIGZvciAoSW5ldFNvY2tldEFk\nZHJlc3MgYWRkciA6IGUuZ2V0VmFsdWUoKSkgewogICAgICAgICAgICAgICAg\nICAgIGJrYy5ib29raWVDbGllbnQucmVhZEVudHJ5KGFkZHIsIGxoLmdldElk\nKCksIGksIGNiLCBhZGRyLCBCb29raWVQcm90b2NvbC5GTEFHX05PTkUpOwog\nICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBs\nb25nIG51bVN1Y2Nlc3MgPSBjYi5hd2FpdCgpOwogICAgICAgICAgICBpZiAo\nbnVtU3VjY2VzcyA8IGV4cGVjdGVkU3VjY2VzcykgewogICAgICAgICAgICAg\nICAgTE9HLndhcm4oIkZyYWdtZW50IG5vdCBmdWxseSByZXBsaWNhdGVkIGxl\nZGdlcklkID0gIiArIGxoLmdldElkKCkKICAgICAgICAgICAgICAgICAgICAg\nICAgICsgIiBzdGFydEVudHJ5SWQgPSAiICsgc3RhcnRFbnRyeUlkCiAgICAg\nICAgICAgICAgICAgICAgICAgICArICIgZW5kRW50cnlJZCA9ICIgKyBlbmRF\nbnRyeUlkIAogICAgICAgICAgICAgICAgICAgICAgICAgKyAiIGV4cGVjdGVk\nU3VjY2VzcyA9ICIgKyBleHBlY3RlZFN1Y2Nlc3MKICAgICAgICAgICAgICAg\nICAgICAgICAgICsgIiBnb3RTdWNjZXNzID0gIiArIG51bVN1Y2Nlc3MpOwog\nICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAg\nICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIHByaXZh\ndGUgYm9vbGVhbiBmaW5kRHVwZXNJbkVuc2VtYmxlcyhMaXN0PExlZGdlckhh\nbmRsZT4gbGhzKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBsb25nIG51\nbUR1cGVzID0gMDsKICAgICAgICBmb3IgKExlZGdlckhhbmRsZSBsaCA6IGxo\ncykgewogICAgICAgICAgICBTdHJpbmcgem5vZGVwYXRoID0gYmtjLmdldExl\nZGdlck1hbmFnZXIoKS5nZXRMZWRnZXJQYXRoKGxoLmdldElkKCkpOwogICAg\nICAgICAgICBTdGF0IHN0YXQgPSBia2MuZ2V0WmtIYW5kbGUoKS5leGlzdHMo\nem5vZGVwYXRoLCBmYWxzZSk7CiAgICAgICAgICAgIGFzc2VydE5vdE51bGwo\nc3RhdCk7CiAgICAgICAgICAgIGJ5dGVbXSBtZGJ5dGVzID0gYmtjLmdldFpr\nSGFuZGxlKCkuZ2V0RGF0YSh6bm9kZXBhdGgsIGZhbHNlLCBzdGF0KTsgCiAg\nICAgICAgICAgIExlZGdlck1ldGFkYXRhIG1kID0gTGVkZ2VyTWV0YWRhdGEu\ncGFyc2VDb25maWcobWRieXRlcywgc3RhdC5nZXRWZXJzaW9uKCkpOyAKICAg\nICAgICAgICAgCiAgICAgICAgICAgIGZvciAoTWFwLkVudHJ5PExvbmcsIEFy\ncmF5TGlzdDxJbmV0U29ja2V0QWRkcmVzcz4+IGUgOiBtZC5nZXRFbnNlbWJs\nZXMoKS5lbnRyeVNldCgpKSB7CiAgICAgICAgICAgICAgICBIYXNoU2V0PElu\nZXRTb2NrZXRBZGRyZXNzPiBzZXQgPSBuZXcgSGFzaFNldDxJbmV0U29ja2V0\nQWRkcmVzcz4oKTsKICAgICAgICAgICAgICAgIGxvbmcgZnJhZ21lbnQgPSBl\nLmdldEtleSgpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBm\nb3IgKEluZXRTb2NrZXRBZGRyZXNzIGFkZHIgOiBlLmdldFZhbHVlKCkpIHsK\nICAgICAgICAgICAgICAgICAgICBpZiAoc2V0LmNvbnRhaW5zKGFkZHIpKSB7\nCiAgICAgICAgICAgICAgICAgICAgICAgIExPRy5lcnJvcigiRHVwZSAiICsg\nYWRkciArICIgZm91bmQgaW4gZW5zZW1ibGUgZm9yIGZyYWdtZW50ICIgKyBm\ncmFnbWVudAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgIiBv\nZiBsZWRnZXIgIiArIGxoLmdldElkKCkpOwogICAgICAgICAgICAgICAgICAg\nICAgICBudW1EdXBlcysrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAg\nICAgICAgICAgICAgICBzZXQuYWRkKGFkZHIpOwogICAgICAgICAgICAgICAg\nfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBudW1E\ndXBlcyA+IDA7CiAgICB9CgogICAgQFRlc3QKICAgIHB1YmxpYyB2b2lkIHRl\nc3RBc3luY0Jvb2tpZVJlY292ZXJ5VG9SYW5kb21Cb29raWVzTm90RW5vdWdo\nQm9va2llcygpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIC8vIENyZWF0\nZSB0aGUgbGVkZ2VycwogICAgICAgIGludCBudW1MZWRnZXJzID0gMzsKICAg\nICAgICBMaXN0PExlZGdlckhhbmRsZT4gbGhzID0gY3JlYXRlTGVkZ2Vycyhu\ndW1MZWRnZXJzLCBudW1Cb29raWVzLCAyKTsKCiAgICAgICAgLy8gV3JpdGUg\ndGhlIGVudHJpZXMgZm9yIHRoZSBsZWRnZXJzIHdpdGggZHVtbXkgdmFsdWVz\nLgogICAgICAgIGludCBudW1Nc2dzID0gMTA7CiAgICAgICAgd3JpdGVFbnRy\naWVzdG9MZWRnZXJzKG51bU1zZ3MsIDAsIGxocyk7CgogICAgICAgIC8vIFNo\ndXRkb3duIHRoZSBmaXJzdCBib29raWUgc2VydmVyCiAgICAgICAgTE9HLmlu\nZm8oIkZpbmlzaGVkIHdyaXRpbmcgYWxsIGxlZGdlciBlbnRyaWVzIHNvIHNo\ndXRkb3duIG9uZSBvZiB0aGUgYm9va2llcy4iKTsKICAgICAgICBicy5nZXQo\nMCkuc2h1dGRvd24oKTsKICAgICAgICBicy5yZW1vdmUoMCk7CgogICAgICAg\nIC8vIENhbGwgdGhlIGFzeW5jIHJlY292ZXIgYm9va2llIG1ldGhvZC4KICAg\nICAgICBJbmV0U29ja2V0QWRkcmVzcyBib29raWVTcmMgPSBuZXcgSW5ldFNv\nY2tldEFkZHJlc3MoSW5ldEFkZHJlc3MuZ2V0TG9jYWxIb3N0KCkuZ2V0SG9z\ndEFkZHJlc3MoKSwgaW5pdGlhbFBvcnQpOwogICAgICAgIEluZXRTb2NrZXRB\nZGRyZXNzIGJvb2tpZURlc3QgPSBudWxsOwogICAgICAgIExPRy5pbmZvKCJO\nb3cgcmVjb3ZlciB0aGUgZGF0YSBvbiB0aGUga2lsbGVkIGJvb2tpZSAoIiAr\nIGJvb2tpZVNyYwogICAgICAgICAgICAgICAgICsgIikgYW5kIHJlcGxpY2F0\nZSBpdCB0byBhIHJhbmRvbSBhdmFpbGFibGUgb25lIik7CiAgICAgICAgLy8g\nSW5pdGlhdGUgdGhlIHN5bmMgb2JqZWN0CiAgICAgICAgc3luYy52YWx1ZSA9\nIGZhbHNlOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGJrQWRtaW4ucmVj\nb3ZlckJvb2tpZURhdGEoYm9va2llU3JjLCBudWxsKTsKICAgICAgICAgICAg\nZmFpbCgiU2hvdWxkIGhhdmUgdGhyb3duIGV4Y2VwdGlvbiIpOwogICAgICAg\nIH0gY2F0Y2ggKEJLRXhjZXB0aW9uLkJLTGVkZ2VyUmVjb3ZlcnlFeGNlcHRp\nb24gYmtlKSB7CiAgICAgICAgICAgIC8vIGNvcnJlY3QgYmVoYXZpb3VyCiAg\nICAgICAgfQogICAgfQoKICAgIEBUZXN0CiAgICBwdWJsaWMgdm9pZCB0ZXN0\nU3luY0Jvb2tpZVJlY292ZXJ5VG9SYW5kb21Cb29raWVzQ2hlY2tGb3JEdXBl\ncygpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIFJhbmRvbSByID0gbmV3\nIFJhbmRvbSgpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgMTA7IGkr\nKykgewogICAgICAgICAgICAvLyBDcmVhdGUgdGhlIGxlZGdlcnMKICAgICAg\nICAgICAgaW50IG51bUxlZGdlcnMgPSAzOwogICAgICAgICAgICBMaXN0PExl\nZGdlckhhbmRsZT4gbGhzID0gY3JlYXRlTGVkZ2VycyhudW1MZWRnZXJzLCBu\ndW1Cb29raWVzLCAyKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFdy\naXRlIHRoZSBlbnRyaWVzIGZvciB0aGUgbGVkZ2VycyB3aXRoIGR1bW15IHZh\nbHVlcy4KICAgICAgICAgICAgaW50IG51bU1zZ3MgPSAxMDA7CiAgICAgICAg\nICAgIHdyaXRlRW50cmllc3RvTGVkZ2VycyhudW1Nc2dzLCAwLCBsaHMpOwog\nICAgICAgICAgICAKICAgICAgICAgICAgLy8gU2h1dGRvd24gdGhlIGZpcnN0\nIGJvb2tpZSBzZXJ2ZXIKICAgICAgICAgICAgTE9HLmluZm8oIkZpbmlzaGVk\nIHdyaXRpbmcgYWxsIGxlZGdlciBlbnRyaWVzIHNvIHNodXRkb3duIG9uZSBv\nZiB0aGUgYm9va2llcy4iKTsKICAgICAgICAgICAgaW50IHJlbW92ZUluZGV4\nID0gci5uZXh0SW50KGJzLnNpemUoKSk7CiAgICAgICAgICAgIEluZXRTb2Nr\nZXRBZGRyZXNzIGJvb2tpZVNyYyA9IGJzLmdldChyZW1vdmVJbmRleCkuZ2V0\nTG9jYWxBZGRyZXNzKCk7CiAgICAgICAgICAgIGJzLmdldChyZW1vdmVJbmRl\neCkuc2h1dGRvd24oKTsKICAgICAgICAgICAgYnMucmVtb3ZlKHJlbW92ZUlu\nZGV4KTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFN0YXJ0dXAgdGhy\nZWUgbmV3IGJvb2tpZSBzZXJ2ZXJzCiAgICAgICAgICAgIGludCBuZXdCb29r\naWVQb3J0ID0gaW5pdGlhbFBvcnQgKyBudW1Cb29raWVzICsgaTsKICAgICAg\nICAgICAgc3RhcnROZXdCb29raWUobmV3Qm9va2llUG9ydCk7CiAgICAgICAg\nICAgIAogICAgICAgICAgICAvLyBXcml0ZSBzb21lIG1vcmUgZW50cmllcyBm\nb3IgdGhlIGxlZGdlcnMgc28gYSBuZXcgZW5zZW1ibGUgd2lsbCBiZQogICAg\nICAgICAgICAvLyBjcmVhdGVkIGZvciB0aGVtLgogICAgICAgICAgICB3cml0\nZUVudHJpZXN0b0xlZGdlcnMobnVtTXNncywgbnVtTXNncywgbGhzKTsKICAg\nICAgICAgICAgCiAgICAgICAgICAgIC8vIENhbGwgdGhlIGFzeW5jIHJlY292\nZXIgYm9va2llIG1ldGhvZC4KICAgICAgICAgICAgTE9HLmluZm8oIk5vdyBy\nZWNvdmVyIHRoZSBkYXRhIG9uIHRoZSBraWxsZWQgYm9va2llICgiICsgYm9v\na2llU3JjCiAgICAgICAgICAgICAgICAgICAgICsgIikgYW5kIHJlcGxpY2F0\nZSBpdCB0byBhIHJhbmRvbSBhdmFpbGFibGUgb25lIik7CiAgICAgICAgICAg\nIC8vIEluaXRpYXRlIHRoZSBzeW5jIG9iamVjdAogICAgICAgICAgICBzeW5j\nLnZhbHVlID0gZmFsc2U7CiAgICAgICAgICAgIGJrQWRtaW4ucmVjb3ZlckJv\nb2tpZURhdGEoYm9va2llU3JjLCBudWxsKTsKICAgICAgICAgICAgYXNzZXJ0\nRmFsc2UoIkR1cGVzIGV4aXN0IGluIGVuc2VtYmxlcyIsIGZpbmREdXBlc0lu\nRW5zZW1ibGVzKGxocykpOwoKICAgICAgICAgICAgLy8gV3JpdGUgc29tZSBt\nb3JlIGVudHJpZXMgdG8gZW5zdXJlIGZlbmNpbmcgaGFzbid0IGJyb2tlbiBz\ndHVmZgogICAgICAgICAgICB3cml0ZUVudHJpZXN0b0xlZGdlcnMobnVtTXNn\ncywgbnVtTXNncyoyLCBsaHMpOwogICAgICAgICAgICBmb3IgKExlZGdlckhh\nbmRsZSBsaCA6IGxocykgewogICAgICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgi\nTm90IGZ1bGx5IHJlcGxpY2F0ZWQiLCB2ZXJpZnlGdWxseVJlcGxpY2F0ZWQo\nbGgsIG51bU1zZ3MqMykpOwogICAgICAgICAgICAgICAgLy8gVE9ETyAoQk9P\nS0tFRVBFUi0xMTIpIHRoaXMgdGhyb3dzIGFuIGV4Y2VwdGlvbiBhdCB0aGUg\nbW9tZW50IAogICAgICAgICAgICAgICAgLy8gYmVjYXVzZSByZWNvdmVyaW5n\nIGEgbGVkZ2VyIHVwZGF0ZXMgdGhlIGxlZGdlciB6bm9kZQogICAgICAgICAg\nICAgICAgLy9saC5jbG9zZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQog\nICAgfQp9Cg==\n","encoding":"base64"}

