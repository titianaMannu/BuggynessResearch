{"sha":"717d99c7e60d86790b867db8064daaca4333234d","node_id":"MDQ6QmxvYjE1NzU5NTY6NzE3ZDk5YzdlNjBkODY3OTBiODY3ZGI4MDY0ZGFhY2E0MzMzMjM0ZA==","size":4625,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/717d99c7e60d86790b867db8064daaca4333234d","content":"LyoKICoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9y\nIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBU\naGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhl\nIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNl\nIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBs\naWFuY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEg\nY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBl\naXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZv\nciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Np\nb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICoK\nICovCgpwYWNrYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci5wcm90bzsKCmlt\ncG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIudXRpbC5PcmRlcmVkU2FmZUV4\nZWN1dG9yOwppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmNoYW5uZWwuc29ja2V0\nLm5pby5OaW9DbGllbnRTb2NrZXRDaGFubmVsRmFjdG9yeTsKaW1wb3J0IG9y\nZy5hcGFjaGUuYm9va2tlZXBlci5wcm90by5Cb29ra2VlcGVySW50ZXJuYWxD\nYWxsYmFja3MuR2VuZXJpY0NhbGxiYWNrOwppbXBvcnQgb3JnLmFwYWNoZS5i\nb29ra2VlcGVyLnByb3RvLkJvb2trZWVwZXJJbnRlcm5hbENhbGxiYWNrcy5S\nZWFkRW50cnlDYWxsYmFjazsKaW1wb3J0IG9yZy5qYm9zcy5uZXR0eS5idWZm\nZXIuQ2hhbm5lbEJ1ZmZlcjsKCmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVw\nZXIuY2xpZW50LkJLRXhjZXB0aW9uOwoKaW1wb3J0IG9yZy5hcGFjaGUuYm9v\na2tlZXBlci50ZXN0LkJhc2VUZXN0Q2FzZTsKaW1wb3J0IG9yZy5hcGFjaGUu\nYm9va2tlZXBlci50ZXN0LkJvb2tpZUNsaWVudFRlc3Q7CmltcG9ydCBzdGF0\naWMgb3JnLmp1bml0LkFzc2VydC4qOwppbXBvcnQgb3JnLmp1bml0LlRlc3Q7\nCmltcG9ydCBvcmcuanVuaXQuQmVmb3JlOwppbXBvcnQgb3JnLmp1bml0LkFm\ndGVyOwoKaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LlRpbWVVbml0OwoK\naW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkNvdW50RG93bkxhdGNoOwpp\nbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuYXRvbWljLkF0b21pY0ludGVn\nZXI7CmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5hdG9taWMuQXRvbWlj\nTG9uZzsKaW1wb3J0IGphdmEubmV0LkluZXRTb2NrZXRBZGRyZXNzOwppbXBv\ncnQgamF2YS5uZXQuSW5ldEFkZHJlc3M7CgpwdWJsaWMgY2xhc3MgVGVzdFBy\nb3RvVmVyc2lvbnMgewogICAgcHJpdmF0ZSBCb29raWVDbGllbnRUZXN0IGJh\nc2U7CgogICAgQEJlZm9yZQogICAgcHVibGljIHZvaWQgc2V0dXAoKSB0aHJv\nd3MgRXhjZXB0aW9uIHsKICAgICAgICBiYXNlID0gbmV3IEJvb2tpZUNsaWVu\ndFRlc3QoKTsKICAgICAgICBiYXNlLnNldFVwKCk7CiAgICB9CgogICAgQEFm\ndGVyCiAgICBwdWJsaWMgdm9pZCB0ZWFyZG93bigpIHRocm93cyBFeGNlcHRp\nb24gewogICAgICAgIGJhc2UudGVhckRvd24oKTsKICAgIH0KCiAgICBwcml2\nYXRlIHZvaWQgdGVzdFZlcnNpb24oaW50IHZlcnNpb24sIGludCBleHBlY3Rl\nZHJlc3VsdCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgUGVyQ2hhbm5l\nbEJvb2tpZUNsaWVudCBiYyA9IG5ldyBQZXJDaGFubmVsQm9va2llQ2xpZW50\nKGJhc2UuZXhlY3V0b3IsIGJhc2UuY2hhbm5lbEZhY3RvcnksIAogICAgICAg\nICAgICAgICAgbmV3IEluZXRTb2NrZXRBZGRyZXNzKEluZXRBZGRyZXNzLmdl\ndExvY2FsSG9zdCgpLCBiYXNlLnBvcnQpLCBuZXcgQXRvbWljTG9uZygwKSk7\nCiAgICAgICAgZmluYWwgQXRvbWljSW50ZWdlciBvdXRlcnJjID0gbmV3IEF0\nb21pY0ludGVnZXIoLTEpOwogICAgICAgIGZpbmFsIENvdW50RG93bkxhdGNo\nIGNvbm5lY3RMYXRjaCA9IG5ldyBDb3VudERvd25MYXRjaCgxKTsKICAgICAg\nICBiYy5jb25uZWN0SWZOZWVkZWRBbmREb09wKG5ldyBHZW5lcmljQ2FsbGJh\nY2s8Vm9pZD4oKSB7CiAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBvcGVy\nYXRpb25Db21wbGV0ZShpbnQgcmMsIFZvaWQgcmVzdWx0KSB7CiAgICAgICAg\nICAgICAgICAgICAgb3V0ZXJyYy5zZXQocmMpOwogICAgICAgICAgICAgICAg\nICAgIGNvbm5lY3RMYXRjaC5jb3VudERvd24oKTsKICAgICAgICAgICAgICAg\nIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgY29ubmVjdExhdGNoLmF3YWl0\nKDUsIFRpbWVVbml0LlNFQ09ORFMpOwogICAgICAgIAogICAgICAgIGFzc2Vy\ndEVxdWFscygiY2xpZW50IG5vdCBjb25uZWN0ZWQiLCBCS0V4Y2VwdGlvbi5D\nb2RlLk9LLCBvdXRlcnJjLmdldCgpKTsKICAgICAgICBvdXRlcnJjLnNldCgt\nMTAwMCk7CiAgICAgICAgZmluYWwgQ291bnREb3duTGF0Y2ggcmVhZExhdGNo\nID0gbmV3IENvdW50RG93bkxhdGNoKDEpOwogICAgICAgIFJlYWRFbnRyeUNh\nbGxiYWNrIGNiID0gbmV3IFJlYWRFbnRyeUNhbGxiYWNrKCkgewogICAgICAg\nICAgICAgICAgcHVibGljIHZvaWQgcmVhZEVudHJ5Q29tcGxldGUoaW50IHJj\nLCBsb25nIGxlZGdlcklkLCBsb25nIGVudHJ5SWQsIENoYW5uZWxCdWZmZXIg\nYnVmZmVyLCBPYmplY3QgY3R4KSB7CiAgICAgICAgICAgICAgICAgICAgb3V0\nZXJyYy5zZXQocmMpOwogICAgICAgICAgICAgICAgICAgIHJlYWRMYXRjaC5j\nb3VudERvd24oKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsK\nICAgICAgICBiYy5yZWFkQ29tcGxldGlvbnMucHV0KG5ldyBQZXJDaGFubmVs\nQm9va2llQ2xpZW50LkNvbXBsZXRpb25LZXkoMSwgMSksIAogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgbmV3IFBlckNoYW5uZWxCb29raWVDbGll\nbnQuUmVhZENvbXBsZXRpb24oY2IsIHRoaXMpKTsKICAgICAgICAKICAgICAg\nICBpbnQgdG90YWxIZWFkZXJTaXplID0gNCAvLyBmb3IgdGhlIGxlbmd0aCBv\nZiB0aGUgcGFja2V0CiAgICAgICAgICAgICsgNCAvLyBmb3IgcmVxdWVzdCB0\neXBlCiAgICAgICAgICAgICsgOCAvLyBmb3IgbGVkZ2VySWQKICAgICAgICAg\nICAgKyA4OyAvLyBmb3IgZW50cnlJZAoKICAgICAgICAvLyBUaGlzIHdpbGwg\nbmVlZCB0byB1cGRhdGVkIGlmIHRoZSBwcm90b2NvbCBmb3IgcmVhZCBjaGFu\nZ2VzCiAgICAgICAgQ2hhbm5lbEJ1ZmZlciB0bXBFbnRyeSA9IGJjLmNoYW5u\nZWwuZ2V0Q29uZmlnKCkuZ2V0QnVmZmVyRmFjdG9yeSgpLmdldEJ1ZmZlcih0\nb3RhbEhlYWRlclNpemUpOwogICAgICAgIHRtcEVudHJ5LndyaXRlSW50KHRv\ndGFsSGVhZGVyU2l6ZSAtIDQpOwogICAgICAgIHRtcEVudHJ5LndyaXRlSW50\nKG5ldyBCb29raWVQcm90b2NvbC5QYWNrZXRIZWFkZXIoKGJ5dGUpdmVyc2lv\nbiwgQm9va2llUHJvdG9jb2wuUkVBREVOVFJZLCAoc2hvcnQpMCkudG9JbnQo\nKSk7CiAgICAgICAgdG1wRW50cnkud3JpdGVMb25nKDEpOwogICAgICAgIHRt\ncEVudHJ5LndyaXRlTG9uZygxKTsKICAgICAgICAKICAgICAgICAKICAgICAg\nICBiYy5jaGFubmVsLndyaXRlKHRtcEVudHJ5KS5hd2FpdFVuaW50ZXJydXB0\naWJseSgpOwogICAgICAgIHJlYWRMYXRjaC5hd2FpdCg1LCBUaW1lVW5pdC5T\nRUNPTkRTKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIkV4cGVjdGVkIHJlc3Vs\ndCBkaWZmZXJzIiwgZXhwZWN0ZWRyZXN1bHQsIG91dGVycmMuZ2V0KCkpOwog\nICAgICAgIAogICAgICAgIGJjLmNsb3NlKCk7CiAgICB9CgogICAgQFRlc3QK\nICAgIHB1YmxpYyB2b2lkIHRlc3RWZXJzaW9ucygpIHRocm93cyBFeGNlcHRp\nb24gewogICAgICAgIHRlc3RWZXJzaW9uKEJvb2tpZVByb3RvY29sLkxPV0VT\nVF9DT01QQVRfUFJPVE9DT0xfVkVSU0lPTi0xLCBCS0V4Y2VwdGlvbi5Db2Rl\nLlByb3RvY29sVmVyc2lvbkV4Y2VwdGlvbik7CiAgICAgICAgdGVzdFZlcnNp\nb24oQm9va2llUHJvdG9jb2wuTE9XRVNUX0NPTVBBVF9QUk9UT0NPTF9WRVJT\nSU9OLCBCS0V4Y2VwdGlvbi5Db2RlLk5vU3VjaEVudHJ5RXhjZXB0aW9uKTsK\nICAgICAgICB0ZXN0VmVyc2lvbihCb29raWVQcm90b2NvbC5DVVJSRU5UX1BS\nT1RPQ09MX1ZFUlNJT04sIEJLRXhjZXB0aW9uLkNvZGUuTm9TdWNoRW50cnlF\neGNlcHRpb24pOwogICAgICAgIHRlc3RWZXJzaW9uKEJvb2tpZVByb3RvY29s\nLkNVUlJFTlRfUFJPVE9DT0xfVkVSU0lPTisxLCBCS0V4Y2VwdGlvbi5Db2Rl\nLlByb3RvY29sVmVyc2lvbkV4Y2VwdGlvbik7CiAgICB9Cn0=\n","encoding":"base64"}

