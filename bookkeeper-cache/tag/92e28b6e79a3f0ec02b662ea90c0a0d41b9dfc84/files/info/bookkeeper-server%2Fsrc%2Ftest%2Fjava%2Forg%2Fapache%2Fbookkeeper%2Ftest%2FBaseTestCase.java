{"sha":"3b1bacd286639d288cf22d59577bf6ec3fc47d13","node_id":"MDQ6QmxvYjE1NzU5NTY6M2IxYmFjZDI4NjYzOWQyODhjZjIyZDU5NTc3YmY2ZWMzZmM0N2QxMw==","size":8647,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/3b1bacd286639d288cf22d59577bf6ec3fc47d13","content":"LyoKICoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9y\nIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBU\naGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhl\nIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNl\nIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBs\naWFuY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEg\nY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBl\naXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZv\nciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Np\nb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICoK\nICovCgpwYWNrYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci50ZXN0OwoKaW1w\nb3J0IGphdmEuaW8uSU9FeGNlcHRpb247CmltcG9ydCBqYXZhLmlvLkZpbGU7\nCmltcG9ydCBqYXZhLm5ldC5JbmV0U29ja2V0QWRkcmVzczsKaW1wb3J0IGph\ndmEudXRpbC5BcnJheUxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuQXJyYXlzOwpp\nbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247CmltcG9ydCBqYXZhLnV0aWwu\nTGlzdDsKCmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY2xpZW50LkJv\nb2tLZWVwZXJUZXN0Q2xpZW50OwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2Vl\ncGVyLmNsaWVudC5Cb29rS2VlcGVyLkRpZ2VzdFR5cGU7CmltcG9ydCBvcmcu\nYXBhY2hlLmJvb2trZWVwZXIuY29uZi5DbGllbnRDb25maWd1cmF0aW9uOwpp\nbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNvbmYuU2VydmVyQ29uZmln\ndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5wcm90by5C\nb29raWVTZXJ2ZXI7CmltcG9ydCBvcmcuc2xmNGouTG9nZ2VyOwppbXBvcnQg\nb3JnLnNsZjRqLkxvZ2dlckZhY3Rvcnk7CmltcG9ydCBvcmcuYXBhY2hlLnpv\nb2tlZXBlci5LZWVwZXJFeGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hlLnpv\nb2tlZXBlci5DcmVhdGVNb2RlOwppbXBvcnQgb3JnLmFwYWNoZS56b29rZWVw\nZXIuV2F0Y2hlZEV2ZW50OwppbXBvcnQgb3JnLmFwYWNoZS56b29rZWVwZXIu\nV2F0Y2hlcjsKaW1wb3J0IG9yZy5hcGFjaGUuem9va2VlcGVyLlpvb0tlZXBl\ncjsKaW1wb3J0IG9yZy5hcGFjaGUuem9va2VlcGVyLlpvb0RlZnMuSWRzOwpp\nbXBvcnQgb3JnLmFwYWNoZS56b29rZWVwZXIuc2VydmVyLk5JT1NlcnZlckNu\neG5GYWN0b3J5OwppbXBvcnQgb3JnLmFwYWNoZS56b29rZWVwZXIuc2VydmVy\nLlpvb0tlZXBlclNlcnZlcjsKaW1wb3J0IG9yZy5hcGFjaGUuem9va2VlcGVy\nLnRlc3QuQ2xpZW50QmFzZTsKaW1wb3J0IG9yZy5qdW5pdC5BZnRlcjsKaW1w\nb3J0IG9yZy5qdW5pdC5CZWZvcmU7CmltcG9ydCBvcmcuanVuaXQucnVubmVy\nLlJ1bldpdGg7CmltcG9ydCBvcmcuanVuaXQucnVubmVycy5QYXJhbWV0ZXJp\nemVkOwppbXBvcnQgb3JnLmp1bml0LnJ1bm5lcnMuUGFyYW1ldGVyaXplZC5Q\nYXJhbWV0ZXJzOwoKaW1wb3J0IGp1bml0LmZyYW1ld29yay5UZXN0Q2FzZTsK\nCkBSdW5XaXRoKFBhcmFtZXRlcml6ZWQuY2xhc3MpCnB1YmxpYyBhYnN0cmFj\ndCBjbGFzcyBCYXNlVGVzdENhc2UgZXh0ZW5kcyBUZXN0Q2FzZSB7CiAgICBz\ndGF0aWMgZmluYWwgTG9nZ2VyIExPRyA9IExvZ2dlckZhY3RvcnkuZ2V0TG9n\nZ2VyKEJhc2VUZXN0Q2FzZS5jbGFzcyk7CiAgICAvLyBab29LZWVwZXIgcmVs\nYXRlZCB2YXJpYWJsZXMKICAgIHByb3RlY3RlZCBzdGF0aWMgZmluYWwgU3Ry\naW5nIEhPU1RQT1JUID0gIjEyNy4wLjAuMToyMTgxIjsKICAgIHByb3RlY3Rl\nZCBzdGF0aWMgSW50ZWdlciBab29LZWVwZXJEZWZhdWx0UG9ydCA9IDIxODE7\nCiAgICBwcm90ZWN0ZWQgWm9vS2VlcGVyU2VydmVyIHprczsKICAgIHByb3Rl\nY3RlZCBab29LZWVwZXIgemtjOyAvLyB6b29rZWVwZXIgY2xpZW50CiAgICBw\ncm90ZWN0ZWQgTklPU2VydmVyQ254bkZhY3Rvcnkgc2VydmVyRmFjdG9yeTsK\nICAgIHByb3RlY3RlZCBGaWxlIFprVG1wRGlyOwoKICAgIC8vIEJvb2tLZWVw\nZXIKICAgIHByb3RlY3RlZCBMaXN0PEZpbGU+IHRtcERpcnMgPSBuZXcgQXJy\nYXlMaXN0PEZpbGU+KCk7CiAgICBwcm90ZWN0ZWQgTGlzdDxCb29raWVTZXJ2\nZXI+IGJzID0gbmV3IEFycmF5TGlzdDxCb29raWVTZXJ2ZXI+KCk7CiAgICBw\ncm90ZWN0ZWQgTGlzdDxTZXJ2ZXJDb25maWd1cmF0aW9uPiBic0NvbmZzID0g\nbmV3IEFycmF5TGlzdDxTZXJ2ZXJDb25maWd1cmF0aW9uPigpOwogICAgcHJv\ndGVjdGVkIEludGVnZXIgaW5pdGlhbFBvcnQgPSA1MDAwOwogICAgcHJvdGVj\ndGVkIGludCBudW1Cb29raWVzOwogICAgcHJvdGVjdGVkIEJvb2tLZWVwZXJU\nZXN0Q2xpZW50IGJrYzsKCiAgICBwcm90ZWN0ZWQgU2VydmVyQ29uZmlndXJh\ndGlvbiBiYXNlQ29uZiA9IG5ldyBTZXJ2ZXJDb25maWd1cmF0aW9uKCk7CiAg\nICBwcm90ZWN0ZWQgQ2xpZW50Q29uZmlndXJhdGlvbiBiYXNlQ2xpZW50Q29u\nZiA9IG5ldyBDbGllbnRDb25maWd1cmF0aW9uKCk7CgogICAgcHVibGljIEJh\nc2VUZXN0Q2FzZShpbnQgbnVtQm9va2llcykgewogICAgICAgIHRoaXMubnVt\nQm9va2llcyA9IG51bUJvb2tpZXM7CiAgICB9CgogICAgQFBhcmFtZXRlcnMK\nICAgIHB1YmxpYyBzdGF0aWMgQ29sbGVjdGlvbjxPYmplY3RbXT4gY29uZmln\ncygpIHsKICAgICAgICByZXR1cm4gQXJyYXlzLmFzTGlzdChuZXcgT2JqZWN0\nW11bXSB7IHtEaWdlc3RUeXBlLk1BQyB9LCB7RGlnZXN0VHlwZS5DUkMzMn19\nKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgU2VydmVyQ29uZmlndXJhdGlvbiBu\nZXdTZXJ2ZXJDb25maWd1cmF0aW9uKGludCBwb3J0LCBTdHJpbmcgemtTZXJ2\nZXJzLCBGaWxlIGpvdXJuYWxEaXIsIEZpbGVbXSBsZWRnZXJEaXJzKSB7CiAg\nICAgICAgU2VydmVyQ29uZmlndXJhdGlvbiBjb25mID0gbmV3IFNlcnZlckNv\nbmZpZ3VyYXRpb24oYmFzZUNvbmYpOwogICAgICAgIGNvbmYuc2V0Qm9va2ll\nUG9ydChwb3J0KTsKICAgICAgICBjb25mLnNldFprU2VydmVycyh6a1NlcnZl\ncnMpOwogICAgICAgIGNvbmYuc2V0Sm91cm5hbERpck5hbWUoam91cm5hbERp\nci5nZXRQYXRoKCkpOwogICAgICAgIFN0cmluZ1tdIGxlZGdlckRpck5hbWVz\nID0gbmV3IFN0cmluZ1tsZWRnZXJEaXJzLmxlbmd0aF07CiAgICAgICAgZm9y\nIChpbnQgaT0wOyBpPGxlZGdlckRpcnMubGVuZ3RoOyBpKyspIHsKICAgICAg\nICAgICAgbGVkZ2VyRGlyTmFtZXNbaV0gPSBsZWRnZXJEaXJzW2ldLmdldFBh\ndGgoKTsKICAgICAgICB9CiAgICAgICAgY29uZi5zZXRMZWRnZXJEaXJOYW1l\ncyhsZWRnZXJEaXJOYW1lcyk7CiAgICAgICAgcmV0dXJuIGNvbmY7CiAgICB9\nCgogICAgQEJlZm9yZQogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBz\nZXRVcCgpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIHRyeSB7CiAgICAg\nICAgICAgIC8vIGNyZWF0ZSBhIFpvb0tlZXBlciBzZXJ2ZXIoZGF0YURpciwg\nZGF0YUxvZ0RpciwgcG9ydCkKICAgICAgICAgICAgTE9HLmRlYnVnKCJSdW5u\naW5nIFpLIHNlcnZlciIpOwogICAgICAgICAgICAvLyBTZXJ2ZXJTdGF0cy5y\nZWdpc3RlckFzQ29uY3JldGUoKTsKICAgICAgICAgICAgQ2xpZW50QmFzZS5z\nZXR1cFRlc3RFbnYoKTsKICAgICAgICAgICAgWmtUbXBEaXIgPSBGaWxlLmNy\nZWF0ZVRlbXBGaWxlKCJ6b29rZWVwZXIiLCAidGVzdCIpOwogICAgICAgICAg\nICBaa1RtcERpci5kZWxldGUoKTsKICAgICAgICAgICAgWmtUbXBEaXIubWtk\naXIoKTsKCiAgICAgICAgICAgIHprcyA9IG5ldyBab29LZWVwZXJTZXJ2ZXIo\nWmtUbXBEaXIsIFprVG1wRGlyLCBab29LZWVwZXJEZWZhdWx0UG9ydCk7CiAg\nICAgICAgICAgIHNlcnZlckZhY3RvcnkgPSBuZXcgTklPU2VydmVyQ254bkZh\nY3RvcnkoKTsKICAgICAgICAgICAgc2VydmVyRmFjdG9yeS5jb25maWd1cmUo\nbmV3IEluZXRTb2NrZXRBZGRyZXNzKFpvb0tlZXBlckRlZmF1bHRQb3J0KSwg\nMTAwKTsKICAgICAgICAgICAgc2VydmVyRmFjdG9yeS5zdGFydHVwKHprcyk7\nCgogICAgICAgICAgICBib29sZWFuIGIgPSBDbGllbnRCYXNlLndhaXRGb3JT\nZXJ2ZXJVcChIT1NUUE9SVCwgQ2xpZW50QmFzZS5DT05ORUNUSU9OX1RJTUVP\nVVQpOwoKICAgICAgICAgICAgTE9HLmRlYnVnKCJTZXJ2ZXIgdXA6ICIgKyBi\nKTsKCiAgICAgICAgICAgIC8vIGNyZWF0ZSBhIHpvb2tlZXBlciBjbGllbnQK\nICAgICAgICAgICAgTE9HLmRlYnVnKCJJbnN0YW50aWF0ZSBaSyBDbGllbnQi\nKTsKICAgICAgICAgICAgemtjID0gbmV3IFpvb0tlZXBlcigiMTI3LjAuMC4x\nIiwgWm9vS2VlcGVyRGVmYXVsdFBvcnQsIG5ldyBlbXB0eVdhdGNoZXIoKSk7\nCgogICAgICAgICAgICAvLyBpbml0aWFsaXplIHRoZSB6ayBjbGllbnQgd2l0\naCB2YWx1ZXMKICAgICAgICAgICAgemtjLmNyZWF0ZSgiL2xlZGdlcnMiLCBu\nZXcgYnl0ZVswXSwgSWRzLk9QRU5fQUNMX1VOU0FGRSwgQ3JlYXRlTW9kZS5Q\nRVJTSVNURU5UKTsKICAgICAgICAgICAgemtjLmNyZWF0ZSgiL2xlZGdlcnMv\nYXZhaWxhYmxlIiwgbmV3IGJ5dGVbMF0sIElkcy5PUEVOX0FDTF9VTlNBRkUs\nIENyZWF0ZU1vZGUuUEVSU0lTVEVOVCk7CgogICAgICAgICAgICAvLyBDcmVh\ndGUgQm9va2llIFNlcnZlcnMgKEIxLCBCMiwgQjMpCiAgICAgICAgICAgIGZv\nciAoaW50IGkgPSAwOyBpIDwgbnVtQm9va2llczsgaSsrKSB7CiAgICAgICAg\nICAgICAgICBGaWxlIGYgPSBGaWxlLmNyZWF0ZVRlbXBGaWxlKCJib29raWUi\nLCAidGVzdCIpOwogICAgICAgICAgICAgICAgdG1wRGlycy5hZGQoZik7CiAg\nICAgICAgICAgICAgICBmLmRlbGV0ZSgpOwogICAgICAgICAgICAgICAgZi5t\na2RpcigpOwoKICAgICAgICAgICAgICAgIFNlcnZlckNvbmZpZ3VyYXRpb24g\nY29uZiA9IG5ld1NlcnZlckNvbmZpZ3VyYXRpb24oCiAgICAgICAgICAgICAg\nICAgICAgaW5pdGlhbFBvcnQgKyBpLCBIT1NUUE9SVCwgZiwgbmV3IEZpbGVb\nXSB7IGYgfSk7CiAgICAgICAgICAgICAgICBic0NvbmZzLmFkZChjb25mKTsK\nCiAgICAgICAgICAgICAgICBCb29raWVTZXJ2ZXIgc2VydmVyID0gbmV3IEJv\nb2tpZVNlcnZlcihjb25mKTsKICAgICAgICAgICAgICAgIHNlcnZlci5zdGFy\ndCgpOwogICAgICAgICAgICAgICAgYnMuYWRkKHNlcnZlcik7CiAgICAgICAg\nICAgIH0KCiAgICAgICAgICAgIGJhc2VDbGllbnRDb25mLnNldFprU2VydmVy\ncygiMTI3LjAuMC4xIik7CiAgICAgICAgICAgIGlmIChudW1Cb29raWVzID4g\nMCkgewogICAgICAgICAgICAgICAgYmtjID0gbmV3IEJvb2tLZWVwZXJUZXN0\nQ2xpZW50KGJhc2VDbGllbnRDb25mKTsKICAgICAgICAgICAgfQogICAgICAg\nIH0gY2F0Y2goRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgTE9HLmVycm9y\nKCJFcnJvciBzZXR0aW5nIHVwIiwgZSk7CiAgICAgICAgICAgIHRocm93IGU7\nCiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIGtpbGxCb29raWUo\nSW5ldFNvY2tldEFkZHJlc3MgYWRkcikgdGhyb3dzIEludGVycnVwdGVkRXhj\nZXB0aW9uIHsKICAgICAgICBCb29raWVTZXJ2ZXIgdG9SZW1vdmUgPSBudWxs\nOwogICAgICAgIGZvciAoQm9va2llU2VydmVyIHNlcnZlciA6IGJzKSB7CiAg\nICAgICAgICAgIGlmIChzZXJ2ZXIuZ2V0TG9jYWxBZGRyZXNzKCkuZXF1YWxz\nKGFkZHIpKSB7CiAgICAgICAgICAgICAgICBzZXJ2ZXIuc2h1dGRvd24oKTsK\nICAgICAgICAgICAgICAgIHRvUmVtb3ZlID0gc2VydmVyOwogICAgICAgICAg\nICB9CiAgICAgICAgfQogICAgICAgIGlmICh0b1JlbW92ZSAhPSBudWxsKSB7\nCiAgICAgICAgICAgIGJzLnJlbW92ZSh0b1JlbW92ZSk7CiAgICAgICAgfQog\nICAgfQoKICAgIC8qKgogICAgICogUmVzdGFydCBib29raWUgc2VydmVycwog\nICAgICoKICAgICAqIEB0aHJvd3MgSW50ZXJydXB0ZWRFeGNlcHRpb24KICAg\nICAqIEB0aHJvd3MgSU9FeGNlcHRpb24KICAgICAqLwogICAgcHJvdGVjdGVk\nIHZvaWQgcmVzdGFydEJvb2tpZXMoKSAKICAgICAgICAgICAgdGhyb3dzIElu\ndGVycnVwdGVkRXhjZXB0aW9uLCBJT0V4Y2VwdGlvbiwgS2VlcGVyRXhjZXB0\naW9uIHsKICAgICAgICByZXN0YXJ0Qm9va2llcyhudWxsKTsKICAgIH0KCiAg\nICAvKioKICAgICAqIFJlc3RhcnQgYm9va2llIHNlcnZlcnMgYWRkIG5ldyBj\nb25maWd1cmF0aW9uIHNldHRpbmdzCiAgICAgKi8KICAgIHByb3RlY3RlZCB2\nb2lkIHJlc3RhcnRCb29raWVzKFNlcnZlckNvbmZpZ3VyYXRpb24gbmV3Q29u\nZikKICAgICAgICAgICAgdGhyb3dzIEludGVycnVwdGVkRXhjZXB0aW9uLCBJ\nT0V4Y2VwdGlvbiwgS2VlcGVyRXhjZXB0aW9uIHsKICAgICAgICAvLyBzaHV0\nIGRvd24gYm9va2llIHNlcnZlcgogICAgICAgIGZvciAoQm9va2llU2VydmVy\nIHNlcnZlciA6IGJzKSB7CiAgICAgICAgICAgIHNlcnZlci5zaHV0ZG93bigp\nOwogICAgICAgIH0KICAgICAgICBicy5jbGVhcigpOwogICAgICAgIFRocmVh\nZC5zbGVlcCgxMDAwKTsKICAgICAgICAvLyByZXN0YXJ0IHRoZW0gdG8gZW5z\ndXJlIHdlIGNhbid0IAogICAgICAgIGludCBqID0gMDsKICAgICAgICBmb3Ig\nKEZpbGUgZiA6IHRtcERpcnMpIHsKICAgICAgICAgICAgU2VydmVyQ29uZmln\ndXJhdGlvbiBjb25mID0gYnNDb25mcy5nZXQoaik7CiAgICAgICAgICAgIGlm\nIChudWxsICE9IG5ld0NvbmYpIHsKICAgICAgICAgICAgICAgIGNvbmYubG9h\nZENvbmYobmV3Q29uZik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgQm9v\na2llU2VydmVyIHNlcnZlciA9IG5ldyBCb29raWVTZXJ2ZXIoY29uZik7CiAg\nICAgICAgICAgIHNlcnZlci5zdGFydCgpOwogICAgICAgICAgICBicy5hZGQo\nc2VydmVyKTsKICAgICAgICAgICAgaisrOwogICAgICAgIH0KICAgIH0KCiAg\nICBAQWZ0ZXIKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgdGVhckRv\nd24oKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBMT0cuaW5mbygiVGVh\nckRvd24iKTsKCiAgICAgICAgaWYgKGJrYyAhPSBudWxsKSB7CiAgICAgICAg\nICAgIGJrYy5jbG9zZSgpOzsKICAgICAgICB9CgogICAgICAgIGZvciAoQm9v\na2llU2VydmVyIHNlcnZlciA6IGJzKSB7CiAgICAgICAgICAgIHNlcnZlci5z\naHV0ZG93bigpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHprYyAhPSBudWxs\nKSB7CiAgICAgICAgICAgIHprYy5jbG9zZSgpOwogICAgICAgIH0KCiAgICAg\nICAgZm9yIChGaWxlIGYgOiB0bXBEaXJzKSB7CiAgICAgICAgICAgIGNsZWFu\nVXBEaXIoZik7CiAgICAgICAgfQoKICAgICAgICAvLyBzaHV0ZG93biBaSyBz\nZXJ2ZXIKICAgICAgICBpZiAoc2VydmVyRmFjdG9yeSAhPSBudWxsKSB7CiAg\nICAgICAgICAgIHNlcnZlckZhY3Rvcnkuc2h1dGRvd24oKTsKICAgICAgICAg\nICAgYXNzZXJ0VHJ1ZSgid2FpdGluZyBmb3Igc2VydmVyIGRvd24iLCBDbGll\nbnRCYXNlLndhaXRGb3JTZXJ2ZXJEb3duKEhPU1RQT1JULCBDbGllbnRCYXNl\nLkNPTk5FQ1RJT05fVElNRU9VVCkpOwogICAgICAgIH0KICAgICAgICAvLyBT\nZXJ2ZXJTdGF0cy51bnJlZ2lzdGVyKCk7CiAgICAgICAgY2xlYW5VcERpciha\na1RtcERpcik7CgoKICAgIH0KCiAgICAvKiBDbGVhbiB1cCBhIGRpcmVjdG9y\neSByZWN1cnNpdmVseSAqLwogICAgcHJvdGVjdGVkIGJvb2xlYW4gY2xlYW5V\ncERpcihGaWxlIGRpcikgewogICAgICAgIGlmIChkaXIuaXNEaXJlY3Rvcnko\nKSkgewogICAgICAgICAgICBMT0cuaW5mbygiQ2xlYW5pbmcgdXAgIiArIGRp\nci5nZXROYW1lKCkpOwogICAgICAgICAgICBTdHJpbmdbXSBjaGlsZHJlbiA9\nIGRpci5saXN0KCk7CiAgICAgICAgICAgIGZvciAoU3RyaW5nIHN0cmluZyA6\nIGNoaWxkcmVuKSB7CiAgICAgICAgICAgICAgICBib29sZWFuIHN1Y2Nlc3Mg\nPSBjbGVhblVwRGlyKG5ldyBGaWxlKGRpciwgc3RyaW5nKSk7CiAgICAgICAg\nICAgICAgICBpZiAoIXN1Y2Nlc3MpCiAgICAgICAgICAgICAgICAgICAgcmV0\ndXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8v\nIFRoZSBkaXJlY3RvcnkgaXMgbm93IGVtcHR5IHNvIGRlbGV0ZSBpdAogICAg\nICAgIHJldHVybiBkaXIuZGVsZXRlKCk7CiAgICB9CgogICAgLyogVXNlciBm\nb3IgdGVzdGluZyBwdXJwb3Nlcywgdm9pZCAqLwogICAgY2xhc3MgZW1wdHlX\nYXRjaGVyIGltcGxlbWVudHMgV2F0Y2hlciB7CiAgICAgICAgcHVibGljIHZv\naWQgcHJvY2VzcyhXYXRjaGVkRXZlbnQgZXZlbnQpIHsKICAgICAgICB9CiAg\nICB9Cgp9Cg==\n","encoding":"base64"}

