{"sha":"8be2ab67e015177a166b46db79409d5c9f457458","node_id":"MDQ6QmxvYjE1NzU5NTY6OGJlMmFiNjdlMDE1MTc3YTE2NmI0NmRiNzk0MDlkNWM5ZjQ1NzQ1OA==","size":9183,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/8be2ab67e015177a166b46db79409d5c9f457458","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIudGVzdDsKCi8qCiAqCiAq\nIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAo\nQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNl\nIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRpc3RyaWJ1\ndGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9u\nCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBs\naWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUg\nTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIpOyB5b3Ug\nbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlCiAq\nIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2Yg\ndGhlIExpY2Vuc2UgYXQKICoKICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcv\nbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5\nIGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAogKiBz\nb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0\ncmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJB\nTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVyIGV4\ncHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlCiAq\nIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQg\nbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqCiAqLwoKaW1w\nb3J0IGphdmEuaW8uRmlsZTsKaW1wb3J0IGphdmEubmV0LkluZXRTb2NrZXRB\nZGRyZXNzOwppbXBvcnQgamF2YS5uaW8uQnl0ZUJ1ZmZlcjsKaW1wb3J0IGph\ndmEudXRpbC5BcnJheXM7CmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5F\neGVjdXRvcnM7CgppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmJ1ZmZlci5DaGFu\nbmVsQnVmZmVyOwppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmJ1ZmZlci5DaGFu\nbmVsQnVmZmVyczsKaW1wb3J0IG9yZy5qYm9zcy5uZXR0eS5jaGFubmVsLnNv\nY2tldC5DbGllbnRTb2NrZXRDaGFubmVsRmFjdG9yeTsKaW1wb3J0IG9yZy5q\nYm9zcy5uZXR0eS5jaGFubmVsLnNvY2tldC5uaW8uTmlvQ2xpZW50U29ja2V0\nQ2hhbm5lbEZhY3Rvcnk7CmltcG9ydCBvcmcuanVuaXQuVGVzdDsKaW1wb3J0\nIG9yZy5hcGFjaGUuYm9va2tlZXBlci5jb25mLkNsaWVudENvbmZpZ3VyYXRp\nb247CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY29uZi5TZXJ2ZXJD\nb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNs\naWVudC5CS0V4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBl\nci5wcm90by5Cb29raWVDbGllbnQ7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2tr\nZWVwZXIucHJvdG8uQm9va2llUHJvdG9jb2w7CmltcG9ydCBvcmcuYXBhY2hl\nLmJvb2trZWVwZXIucHJvdG8uQm9va2llU2VydmVyOwppbXBvcnQgb3JnLmFw\nYWNoZS5ib29ra2VlcGVyLnByb3RvLkJvb2trZWVwZXJJbnRlcm5hbENhbGxi\nYWNrcy5SZWFkRW50cnlDYWxsYmFjazsKaW1wb3J0IG9yZy5hcGFjaGUuYm9v\na2tlZXBlci5wcm90by5Cb29ra2VlcGVySW50ZXJuYWxDYWxsYmFja3MuV3Jp\ndGVDYWxsYmFjazsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci51dGls\nLk9yZGVyZWRTYWZlRXhlY3V0b3I7CmltcG9ydCBvcmcuc2xmNGouTG9nZ2Vy\nOwppbXBvcnQgb3JnLnNsZjRqLkxvZ2dlckZhY3Rvcnk7CgppbXBvcnQganVu\naXQuZnJhbWV3b3JrLlRlc3RDYXNlOwoKcHVibGljIGNsYXNzIEJvb2tpZUNs\naWVudFRlc3QgZXh0ZW5kcyBUZXN0Q2FzZSB7CiAgICBzdGF0aWMgTG9nZ2Vy\nIExPRyA9IExvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKEJvb2tpZUNsaWVudFRl\nc3QuY2xhc3MpOwogICAgQm9va2llU2VydmVyIGJzOwogICAgRmlsZSB0bXBE\naXI7CiAgICBwdWJsaWMgaW50IHBvcnQgPSAxMzY0NTsKICAgIHB1YmxpYyBD\nbGllbnRTb2NrZXRDaGFubmVsRmFjdG9yeSBjaGFubmVsRmFjdG9yeTsKICAg\nIHB1YmxpYyBPcmRlcmVkU2FmZUV4ZWN1dG9yIGV4ZWN1dG9yOwogICAgU2Vy\ndmVyQ29uZmlndXJhdGlvbiBjb25mID0gbmV3IFNlcnZlckNvbmZpZ3VyYXRp\nb24oKTsKCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkg\ndGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgdG1wRGlyID0gRmlsZS5jcmVh\ndGVUZW1wRmlsZSgiYm9va2llIiwgInRlc3QiKTsKICAgICAgICB0bXBEaXIu\nZGVsZXRlKCk7CiAgICAgICAgdG1wRGlyLm1rZGlyKCk7CgogICAgICAgIC8v\nIFNpbmNlIHRoaXMgdGVzdCBkb2VzIG5vdCByZWx5IG9uIHRoZSBCb29rS2Vl\ncGVyIGNsaWVudCBuZWVkaW5nIHRvCiAgICAgICAgLy8ga25vdyB2aWEgWm9v\nS2VlcGVyIHdoaWNoIEJvb2tpZXMgYXJlIGF2YWlsYWJsZSwgb2theSwgc28g\ncGFzcyBpbiBudWxsCiAgICAgICAgLy8gZm9yIHRoZSB6a1NlcnZlcnMgaW5w\ndXQgcGFyYW1ldGVyIHdoZW4gY29uc3RydWN0aW5nIHRoZSBCb29raWVTZXJ2\nZXIuCiAgICAgICAgU2VydmVyQ29uZmlndXJhdGlvbiBjb25mID0gbmV3IFNl\ncnZlckNvbmZpZ3VyYXRpb24oKTsKICAgICAgICBjb25mLnNldFprU2VydmVy\ncyhudWxsKS5zZXRCb29raWVQb3J0KHBvcnQpCiAgICAgICAgICAgIC5zZXRK\nb3VybmFsRGlyTmFtZSh0bXBEaXIuZ2V0UGF0aCgpKQogICAgICAgICAgICAu\nc2V0TGVkZ2VyRGlyTmFtZXMobmV3IFN0cmluZ1tdIHsgdG1wRGlyLmdldFBh\ndGgoKSB9KTsKICAgICAgICBicyA9IG5ldyBCb29raWVTZXJ2ZXIoY29uZik7\nCiAgICAgICAgYnMuc3RhcnQoKTsKICAgICAgICBjaGFubmVsRmFjdG9yeSA9\nIG5ldyBOaW9DbGllbnRTb2NrZXRDaGFubmVsRmFjdG9yeShFeGVjdXRvcnMu\nbmV3Q2FjaGVkVGhyZWFkUG9vbCgpLCBFeGVjdXRvcnMKICAgICAgICAgICAg\nICAgIC5uZXdDYWNoZWRUaHJlYWRQb29sKCkpOwogICAgICAgIGV4ZWN1dG9y\nID0gbmV3IE9yZGVyZWRTYWZlRXhlY3V0b3IoMik7CiAgICB9CgogICAgQE92\nZXJyaWRlCiAgICBwdWJsaWMgdm9pZCB0ZWFyRG93bigpIHRocm93cyBFeGNl\ncHRpb24gewogICAgICAgIGJzLnNodXRkb3duKCk7CiAgICAgICAgcmVjdXJz\naXZlRGVsZXRlKHRtcERpcik7CiAgICAgICAgY2hhbm5lbEZhY3RvcnkucmVs\nZWFzZUV4dGVybmFsUmVzb3VyY2VzKCk7CiAgICAgICAgZXhlY3V0b3Iuc2h1\ndGRvd24oKTsKICAgIH0KCiAgICBwcml2YXRlIHN0YXRpYyB2b2lkIHJlY3Vy\nc2l2ZURlbGV0ZShGaWxlIGRpcikgewogICAgICAgIEZpbGUgY2hpbGRyZW5b\nXSA9IGRpci5saXN0RmlsZXMoKTsKICAgICAgICBpZiAoY2hpbGRyZW4gIT0g\nbnVsbCkgewogICAgICAgICAgICBmb3IgKEZpbGUgY2hpbGQgOiBjaGlsZHJl\nbikgewogICAgICAgICAgICAgICAgcmVjdXJzaXZlRGVsZXRlKGNoaWxkKTsK\nICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBkaXIuZGVsZXRlKCk7\nCiAgICB9CgogICAgc3RhdGljIGNsYXNzIFJlc3VsdFN0cnVjdCB7CiAgICAg\nICAgaW50IHJjOwogICAgICAgIEJ5dGVCdWZmZXIgZW50cnk7CiAgICB9Cgog\nICAgUmVhZEVudHJ5Q2FsbGJhY2sgcmVjYiA9IG5ldyBSZWFkRW50cnlDYWxs\nYmFjaygpIHsKCiAgICAgICAgcHVibGljIHZvaWQgcmVhZEVudHJ5Q29tcGxl\ndGUoaW50IHJjLCBsb25nIGxlZGdlcklkLCBsb25nIGVudHJ5SWQsIENoYW5u\nZWxCdWZmZXIgYmIsIE9iamVjdCBjdHgpIHsKICAgICAgICAgICAgUmVzdWx0\nU3RydWN0IHJzID0gKFJlc3VsdFN0cnVjdCkgY3R4OwogICAgICAgICAgICBz\neW5jaHJvbml6ZWQgKHJzKSB7CiAgICAgICAgICAgICAgICBycy5yYyA9IHJj\nOwogICAgICAgICAgICAgICAgaWYgKGJiICE9IG51bGwpIHsKICAgICAgICAg\nICAgICAgICAgICBiYi5yZWFkZXJJbmRleCgxNik7CiAgICAgICAgICAgICAg\nICAgICAgcnMuZW50cnkgPSBiYi50b0J5dGVCdWZmZXIoKTsKICAgICAgICAg\nICAgICAgICAgICBycy5ub3RpZnlBbGwoKTsKICAgICAgICAgICAgICAgIH0K\nICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICB9OwoKICAgIFdyaXRlQ2Fs\nbGJhY2sgd3JjYiA9IG5ldyBXcml0ZUNhbGxiYWNrKCkgewogICAgICAgIHB1\nYmxpYyB2b2lkIHdyaXRlQ29tcGxldGUoaW50IHJjLCBsb25nIGxlZGdlcklk\nLCBsb25nIGVudHJ5SWQsIEluZXRTb2NrZXRBZGRyZXNzIGFkZHIsIE9iamVj\ndCBjdHgpIHsKICAgICAgICAgICAgaWYgKGN0eCAhPSBudWxsKSB7CiAgICAg\nICAgICAgICAgICBzeW5jaHJvbml6ZWQgKGN0eCkgewogICAgICAgICAgICAg\nICAgICAgIGN0eC5ub3RpZnlBbGwoKTsKICAgICAgICAgICAgICAgIH0KICAg\nICAgICAgICAgfQogICAgICAgIH0KICAgIH07CgogICAgQFRlc3QKICAgIHB1\nYmxpYyB2b2lkIHRlc3RXcml0ZUdhcHMoKSB0aHJvd3MgRXhjZXB0aW9uIHsK\nICAgICAgICBmaW5hbCBPYmplY3Qgbm90aWZ5T2JqZWN0ID0gbmV3IE9iamVj\ndCgpOwogICAgICAgIGJ5dGVbXSBwYXNzd2QgPSBuZXcgYnl0ZVsyMF07CiAg\nICAgICAgQXJyYXlzLmZpbGwocGFzc3dkLCAoYnl0ZSkgJ2EnKTsKICAgICAg\nICBJbmV0U29ja2V0QWRkcmVzcyBhZGRyID0gbmV3IEluZXRTb2NrZXRBZGRy\nZXNzKCIxMjcuMC4wLjEiLCBwb3J0KTsKICAgICAgICBSZXN1bHRTdHJ1Y3Qg\nYXJjID0gbmV3IFJlc3VsdFN0cnVjdCgpOwoKICAgICAgICBCb29raWVDbGll\nbnQgYmMgPSBuZXcgQm9va2llQ2xpZW50KG5ldyBDbGllbnRDb25maWd1cmF0\naW9uKCksIGNoYW5uZWxGYWN0b3J5LCBleGVjdXRvcik7CiAgICAgICAgQ2hh\nbm5lbEJ1ZmZlciBiYjsKICAgICAgICBiYiA9IGNyZWF0ZUJ5dGVCdWZmZXIo\nMSwgMSwgMSk7CiAgICAgICAgYmMuYWRkRW50cnkoYWRkciwgMSwgcGFzc3dk\nLCAxLCBiYiwgd3JjYiwgbnVsbCwgQm9va2llUHJvdG9jb2wuRkxBR19OT05F\nKTsKICAgICAgICBzeW5jaHJvbml6ZWQgKGFyYykgewogICAgICAgICAgICBi\nYy5yZWFkRW50cnkoYWRkciwgMSwgMSwgcmVjYiwgYXJjLCBCb29raWVQcm90\nb2NvbC5GTEFHX05PTkUpOwogICAgICAgICAgICBhcmMud2FpdCgxMDAwKTsK\nICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKDAsIGFyYy5yYyk7CiAgICAgICAg\nICAgIGFzc2VydEVxdWFscygxLCBhcmMuZW50cnkuZ2V0SW50KCkpOwogICAg\nICAgIH0KICAgICAgICBiYiA9IGNyZWF0ZUJ5dGVCdWZmZXIoMiwgMSwgMik7\nCiAgICAgICAgYmMuYWRkRW50cnkoYWRkciwgMSwgcGFzc3dkLCAyLCBiYiwg\nd3JjYiwgbnVsbCwgQm9va2llUHJvdG9jb2wuRkxBR19OT05FKTsKICAgICAg\nICBiYiA9IGNyZWF0ZUJ5dGVCdWZmZXIoMywgMSwgMyk7CiAgICAgICAgYmMu\nYWRkRW50cnkoYWRkciwgMSwgcGFzc3dkLCAzLCBiYiwgd3JjYiwgbnVsbCwg\nQm9va2llUHJvdG9jb2wuRkxBR19OT05FKTsKICAgICAgICBiYiA9IGNyZWF0\nZUJ5dGVCdWZmZXIoNSwgMSwgNSk7CiAgICAgICAgYmMuYWRkRW50cnkoYWRk\nciwgMSwgcGFzc3dkLCA1LCBiYiwgd3JjYiwgbnVsbCwgQm9va2llUHJvdG9j\nb2wuRkxBR19OT05FKTsKICAgICAgICBiYiA9IGNyZWF0ZUJ5dGVCdWZmZXIo\nNywgMSwgNyk7CiAgICAgICAgYmMuYWRkRW50cnkoYWRkciwgMSwgcGFzc3dk\nLCA3LCBiYiwgd3JjYiwgbnVsbCwgQm9va2llUHJvdG9jb2wuRkxBR19OT05F\nKTsKICAgICAgICBzeW5jaHJvbml6ZWQgKG5vdGlmeU9iamVjdCkgewogICAg\nICAgICAgICBiYiA9IGNyZWF0ZUJ5dGVCdWZmZXIoMTEsIDEsIDExKTsKICAg\nICAgICAgICAgYmMuYWRkRW50cnkoYWRkciwgMSwgcGFzc3dkLCAxMSwgYmIs\nIHdyY2IsIG5vdGlmeU9iamVjdCwgQm9va2llUHJvdG9jb2wuRkxBR19OT05F\nKTsKICAgICAgICAgICAgbm90aWZ5T2JqZWN0LndhaXQoKTsKICAgICAgICB9\nCiAgICAgICAgc3luY2hyb25pemVkIChhcmMpIHsKICAgICAgICAgICAgYmMu\ncmVhZEVudHJ5KGFkZHIsIDEsIDYsIHJlY2IsIGFyYywgQm9va2llUHJvdG9j\nb2wuRkxBR19OT05FKTsKICAgICAgICAgICAgYXJjLndhaXQoMTAwMCk7CiAg\nICAgICAgICAgIGFzc2VydEVxdWFscyhCS0V4Y2VwdGlvbi5Db2RlLk5vU3Vj\naEVudHJ5RXhjZXB0aW9uLCBhcmMucmMpOwogICAgICAgIH0KICAgICAgICBz\neW5jaHJvbml6ZWQgKGFyYykgewogICAgICAgICAgICBiYy5yZWFkRW50cnko\nYWRkciwgMSwgNywgcmVjYiwgYXJjLCBCb29raWVQcm90b2NvbC5GTEFHX05P\nTkUpOwogICAgICAgICAgICBhcmMud2FpdCgxMDAwKTsKICAgICAgICAgICAg\nYXNzZXJ0RXF1YWxzKDAsIGFyYy5yYyk7CiAgICAgICAgICAgIGFzc2VydEVx\ndWFscyg3LCBhcmMuZW50cnkuZ2V0SW50KCkpOwogICAgICAgIH0KICAgICAg\nICBzeW5jaHJvbml6ZWQgKGFyYykgewogICAgICAgICAgICBiYy5yZWFkRW50\ncnkoYWRkciwgMSwgMSwgcmVjYiwgYXJjLCBCb29raWVQcm90b2NvbC5GTEFH\nX05PTkUpOwogICAgICAgICAgICBhcmMud2FpdCgxMDAwKTsKICAgICAgICAg\nICAgYXNzZXJ0RXF1YWxzKDAsIGFyYy5yYyk7CiAgICAgICAgICAgIGFzc2Vy\ndEVxdWFscygxLCBhcmMuZW50cnkuZ2V0SW50KCkpOwogICAgICAgIH0KICAg\nICAgICBzeW5jaHJvbml6ZWQgKGFyYykgewogICAgICAgICAgICBiYy5yZWFk\nRW50cnkoYWRkciwgMSwgMiwgcmVjYiwgYXJjLCBCb29raWVQcm90b2NvbC5G\nTEFHX05PTkUpOwogICAgICAgICAgICBhcmMud2FpdCgxMDAwKTsKICAgICAg\nICAgICAgYXNzZXJ0RXF1YWxzKDAsIGFyYy5yYyk7CiAgICAgICAgICAgIGFz\nc2VydEVxdWFscygyLCBhcmMuZW50cnkuZ2V0SW50KCkpOwogICAgICAgIH0K\nICAgICAgICBzeW5jaHJvbml6ZWQgKGFyYykgewogICAgICAgICAgICBiYy5y\nZWFkRW50cnkoYWRkciwgMSwgMywgcmVjYiwgYXJjLCBCb29raWVQcm90b2Nv\nbC5GTEFHX05PTkUpOwogICAgICAgICAgICBhcmMud2FpdCgxMDAwKTsKICAg\nICAgICAgICAgYXNzZXJ0RXF1YWxzKDAsIGFyYy5yYyk7CiAgICAgICAgICAg\nIGFzc2VydEVxdWFscygzLCBhcmMuZW50cnkuZ2V0SW50KCkpOwogICAgICAg\nIH0KICAgICAgICBzeW5jaHJvbml6ZWQgKGFyYykgewogICAgICAgICAgICBi\nYy5yZWFkRW50cnkoYWRkciwgMSwgNCwgcmVjYiwgYXJjLCBCb29raWVQcm90\nb2NvbC5GTEFHX05PTkUpOwogICAgICAgICAgICBhcmMud2FpdCgxMDAwKTsK\nICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKEJLRXhjZXB0aW9uLkNvZGUuTm9T\ndWNoRW50cnlFeGNlcHRpb24sIGFyYy5yYyk7CiAgICAgICAgfQogICAgICAg\nIHN5bmNocm9uaXplZCAoYXJjKSB7CiAgICAgICAgICAgIGJjLnJlYWRFbnRy\neShhZGRyLCAxLCAxMSwgcmVjYiwgYXJjLCBCb29raWVQcm90b2NvbC5GTEFH\nX05PTkUpOwogICAgICAgICAgICBhcmMud2FpdCgxMDAwKTsKICAgICAgICAg\nICAgYXNzZXJ0RXF1YWxzKDAsIGFyYy5yYyk7CiAgICAgICAgICAgIGFzc2Vy\ndEVxdWFscygxMSwgYXJjLmVudHJ5LmdldEludCgpKTsKICAgICAgICB9CiAg\nICAgICAgc3luY2hyb25pemVkIChhcmMpIHsKICAgICAgICAgICAgYmMucmVh\nZEVudHJ5KGFkZHIsIDEsIDUsIHJlY2IsIGFyYywgQm9va2llUHJvdG9jb2wu\nRkxBR19OT05FKTsKICAgICAgICAgICAgYXJjLndhaXQoMTAwMCk7CiAgICAg\nICAgICAgIGFzc2VydEVxdWFscygwLCBhcmMucmMpOwogICAgICAgICAgICBh\nc3NlcnRFcXVhbHMoNSwgYXJjLmVudHJ5LmdldEludCgpKTsKICAgICAgICB9\nCiAgICAgICAgc3luY2hyb25pemVkIChhcmMpIHsKICAgICAgICAgICAgYmMu\ncmVhZEVudHJ5KGFkZHIsIDEsIDEwLCByZWNiLCBhcmMsIEJvb2tpZVByb3Rv\nY29sLkZMQUdfTk9ORSk7CiAgICAgICAgICAgIGFyYy53YWl0KDEwMDApOwog\nICAgICAgICAgICBhc3NlcnRFcXVhbHMoQktFeGNlcHRpb24uQ29kZS5Ob1N1\nY2hFbnRyeUV4Y2VwdGlvbiwgYXJjLnJjKTsKICAgICAgICB9CiAgICAgICAg\nc3luY2hyb25pemVkIChhcmMpIHsKICAgICAgICAgICAgYmMucmVhZEVudHJ5\nKGFkZHIsIDEsIDEyLCByZWNiLCBhcmMsIEJvb2tpZVByb3RvY29sLkZMQUdf\nTk9ORSk7CiAgICAgICAgICAgIGFyYy53YWl0KDEwMDApOwogICAgICAgICAg\nICBhc3NlcnRFcXVhbHMoQktFeGNlcHRpb24uQ29kZS5Ob1N1Y2hFbnRyeUV4\nY2VwdGlvbiwgYXJjLnJjKTsKICAgICAgICB9CiAgICAgICAgc3luY2hyb25p\nemVkIChhcmMpIHsKICAgICAgICAgICAgYmMucmVhZEVudHJ5KGFkZHIsIDEs\nIDEzLCByZWNiLCBhcmMsIEJvb2tpZVByb3RvY29sLkZMQUdfTk9ORSk7CiAg\nICAgICAgICAgIGFyYy53YWl0KDEwMDApOwogICAgICAgICAgICBhc3NlcnRF\ncXVhbHMoQktFeGNlcHRpb24uQ29kZS5Ob1N1Y2hFbnRyeUV4Y2VwdGlvbiwg\nYXJjLnJjKTsKICAgICAgICB9CiAgICB9CgogICAgcHJpdmF0ZSBDaGFubmVs\nQnVmZmVyIGNyZWF0ZUJ5dGVCdWZmZXIoaW50IGksIGxvbmcgbGlkLCBsb25n\nIGVpZCkgewogICAgICAgIEJ5dGVCdWZmZXIgYmI7CiAgICAgICAgYmIgPSBC\neXRlQnVmZmVyLmFsbG9jYXRlKDQgKyAxNik7CiAgICAgICAgYmIucHV0TG9u\nZyhsaWQpOwogICAgICAgIGJiLnB1dExvbmcoZWlkKTsKICAgICAgICBiYi5w\ndXRJbnQoaSk7CiAgICAgICAgYmIuZmxpcCgpOwogICAgICAgIHJldHVybiBD\naGFubmVsQnVmZmVycy53cmFwcGVkQnVmZmVyKGJiKTsKICAgIH0KCiAgICBA\nVGVzdAogICAgcHVibGljIHZvaWQgdGVzdE5vTGVkZ2VyKCkgdGhyb3dzIEV4\nY2VwdGlvbiB7CiAgICAgICAgUmVzdWx0U3RydWN0IGFyYyA9IG5ldyBSZXN1\nbHRTdHJ1Y3QoKTsKICAgICAgICBJbmV0U29ja2V0QWRkcmVzcyBhZGRyID0g\nbmV3IEluZXRTb2NrZXRBZGRyZXNzKCIxMjcuMC4wLjEiLCBwb3J0KTsKICAg\nICAgICBCb29raWVDbGllbnQgYmMgPSBuZXcgQm9va2llQ2xpZW50KG5ldyBD\nbGllbnRDb25maWd1cmF0aW9uKCksIGNoYW5uZWxGYWN0b3J5LCBleGVjdXRv\ncik7CiAgICAgICAgc3luY2hyb25pemVkIChhcmMpIHsKICAgICAgICAgICAg\nYmMucmVhZEVudHJ5KGFkZHIsIDIsIDEzLCByZWNiLCBhcmMsIEJvb2tpZVBy\nb3RvY29sLkZMQUdfTk9ORSk7CiAgICAgICAgICAgIGFyYy53YWl0KDEwMDAp\nOwogICAgICAgICAgICBhc3NlcnRFcXVhbHMoQktFeGNlcHRpb24uQ29kZS5O\nb1N1Y2hFbnRyeUV4Y2VwdGlvbiwgYXJjLnJjKTsKICAgICAgICB9CiAgICB9\nCn0K\n","encoding":"base64"}

