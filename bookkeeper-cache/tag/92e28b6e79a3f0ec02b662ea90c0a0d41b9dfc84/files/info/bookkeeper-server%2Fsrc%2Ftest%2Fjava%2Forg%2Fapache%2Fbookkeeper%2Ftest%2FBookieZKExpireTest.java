{"sha":"5ed706124d8c193677f5e33a3cbdcc837601201e","node_id":"MDQ6QmxvYjE1NzU5NTY6NWVkNzA2MTI0ZDhjMTkzNjc3ZjVlMzNhM2NiZGNjODM3NjAxMjAxZQ==","size":3378,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/5ed706124d8c193677f5e33a3cbdcc837601201e","content":"LyoKICoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9y\nIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBU\naGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhl\nIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNl\nIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBs\naWFuY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEg\nY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBl\naXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZv\nciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Np\nb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICoK\nICovCgpwYWNrYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci50ZXN0OwoKaW1w\nb3J0IGphdmEuaW8uRmlsZTsKaW1wb3J0IG9yZy5qdW5pdC5UZXN0OwppbXBv\ncnQgb3JnLmp1bml0LkJlZm9yZTsKaW1wb3J0IG9yZy5qdW5pdC5BZnRlcjsK\naW1wb3J0IHN0YXRpYyBvcmcuanVuaXQuQXNzZXJ0Lio7CgppbXBvcnQgb3Jn\nLmFwYWNoZS5ib29ra2VlcGVyLmNvbmYuU2VydmVyQ29uZmlndXJhdGlvbjsK\naW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5jbGllbnQuQm9va0tlZXBl\nci5EaWdlc3RUeXBlOwppbXBvcnQgamF2YS51dGlsLkhhc2hTZXQ7CmltcG9y\ndCBqdW5pdC5mcmFtZXdvcmsuVGVzdENhc2U7CmltcG9ydCBvcmcuYXBhY2hl\nLmJvb2trZWVwZXIucHJvdG8uQm9va2llU2VydmVyOwppbXBvcnQgb3JnLmFw\nYWNoZS5ib29ra2VlcGVyLmJvb2tpZS5Cb29raWU7CgpwdWJsaWMgY2xhc3Mg\nQm9va2llWktFeHBpcmVUZXN0IGV4dGVuZHMgQmFzZVRlc3RDYXNlIHsKCiAg\nICBwdWJsaWMgQm9va2llWktFeHBpcmVUZXN0KERpZ2VzdFR5cGUgZGlnZXN0\nVHlwZSkgewogICAgICAgIHN1cGVyKDApOwogICAgfQoKICAgIEBUZXN0CiAg\nICBwdWJsaWMgdm9pZCBydW5Cb29raWVTZXJ2ZXJaS0V4cGlyZUJlaGF2aW91\nclRlc3QoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBCb29raWVTZXJ2\nZXIgc2VydmVyID0gbnVsbDsKICAgICAgICB0cnkgewogICAgICAgICAgICBG\naWxlIGYgPSBGaWxlLmNyZWF0ZVRlbXBGaWxlKCJib29raWVzZXJ2ZXIiLCAi\ndGVzdCIpOwogICAgICAgICAgICBmLmRlbGV0ZSgpOwogICAgICAgICAgICBm\nLm1rZGlyKCk7CgogICAgICAgICAgICBIYXNoU2V0PFRocmVhZD4gdGhyZWFk\nc2V0ID0gbmV3IEhhc2hTZXQ8VGhyZWFkPigpOwogICAgICAgICAgICBpbnQg\ndGhyZWFkQ291bnQgPSBUaHJlYWQuYWN0aXZlQ291bnQoKTsKICAgICAgICAg\nICAgVGhyZWFkIHRocmVhZHNbXSA9IG5ldyBUaHJlYWRbdGhyZWFkQ291bnQq\nMl07CiAgICAgICAgICAgIHRocmVhZENvdW50ID0gVGhyZWFkLmVudW1lcmF0\nZSh0aHJlYWRzKTsKICAgICAgICAgICAgZm9yKGludCBpID0gMDsgaSA8IHRo\ncmVhZENvdW50OyBpKyspIHsKICAgICAgICAgICAgICAgIGlmICh0aHJlYWRz\nW2ldLmdldE5hbWUoKS5pbmRleE9mKCJTZW5kVGhyZWFkIikgIT0gLTEpIHsK\nICAgICAgICAgICAgICAgICAgICB0aHJlYWRzZXQuYWRkKHRocmVhZHNbaV0p\nOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAg\nICBTZXJ2ZXJDb25maWd1cmF0aW9uIGNvbmYgPSBuZXdTZXJ2ZXJDb25maWd1\ncmF0aW9uKGluaXRpYWxQb3J0ICsgMSwgSE9TVFBPUlQsIGYsIG5ldyBGaWxl\nW10geyBmIH0pOwogICAgICAgICAgICBzZXJ2ZXIgPSBuZXcgQm9va2llU2Vy\ndmVyKGNvbmYpOwogICAgICAgICAgICBzZXJ2ZXIuc3RhcnQoKTsKCiAgICAg\nICAgICAgIFRocmVhZC5zbGVlcCgxMCk7CiAgICAgICAgICAgIFRocmVhZCBz\nZW5kdGhyZWFkID0gbnVsbDsKICAgICAgICAgICAgdGhyZWFkQ291bnQgPSBU\naHJlYWQuYWN0aXZlQ291bnQoKTsKICAgICAgICAgICAgdGhyZWFkcyA9IG5l\ndyBUaHJlYWRbdGhyZWFkQ291bnQqMl07CiAgICAgICAgICAgIHRocmVhZENv\ndW50ID0gVGhyZWFkLmVudW1lcmF0ZSh0aHJlYWRzKTsKICAgICAgICAgICAg\nZm9yKGludCBpID0gMDsgaSA8IHRocmVhZENvdW50OyBpKyspIHsKICAgICAg\nICAgICAgICAgIGlmICh0aHJlYWRzW2ldLmdldE5hbWUoKS5pbmRleE9mKCJT\nZW5kVGhyZWFkIikgIT0gLTEKICAgICAgICAgICAgICAgICAgICAgICAgJiYg\nIXRocmVhZHNldC5jb250YWlucyh0aHJlYWRzW2ldKSkgewogICAgICAgICAg\nICAgICAgICAgIHNlbmR0aHJlYWQgPSB0aHJlYWRzW2ldOwogICAgICAgICAg\nICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAg\nICB9CiAgICAgICAgICAgIGFzc2VydE5vdE51bGwoIlNlbmQgdGhyZWFkIG5v\ndCBmb3VuZCIsIHNlbmR0aHJlYWQpOwoKICAgICAgICAgICAgc2VuZHRocmVh\nZC5zdXNwZW5kKCk7CiAgICAgICAgICAgIFRocmVhZC5zbGVlcCgyKjEwMDAw\nKTsKICAgICAgICAgICAgc2VuZHRocmVhZC5yZXN1bWUoKTsKCiAgICAgICAg\nICAgIC8vIGFsbG93IHdhdGNoZXIgdGhyZWFkIHRvIHJ1bgogICAgICAgICAg\nICBUaHJlYWQuc2xlZXAoMzAwMCk7CiAgICAgICAgICAgIGFzc2VydEZhbHNl\nKCJCb29raWUgc2hvdWxkIGhhdmUgc2h1dGRvd24gb24gbG9zaW5nIHprIHNl\nc3Npb24iLCBzZXJ2ZXIuaXNCb29raWVSdW5uaW5nKCkpOwogICAgICAgICAg\nICBhc3NlcnRGYWxzZSgiTmlvIFNlcnZlciBzaG91bGQgaGF2ZSBzaHV0ZG93\nbiBvbiBsb3Npbmcgemsgc2Vzc2lvbiIsIHNlcnZlci5pc05pb1NlcnZlclJ1\nbm5pbmcoKSk7CiAgICAgICAgICAgIGFzc2VydEZhbHNlKCJCb29raWUgU2Vy\ndmVyIHNob3VsZCBoYXZlIHNodXRkb3duIG9uIGxvc2luZyB6ayBzZXNzaW9u\nIiwgc2VydmVyLmlzUnVubmluZygpKTsKICAgICAgICB9IGZpbmFsbHkgewog\nICAgICAgICAgICBzZXJ2ZXIuc2h1dGRvd24oKTsKICAgICAgICB9CiAgICB9\nCn0K\n","encoding":"base64"}

