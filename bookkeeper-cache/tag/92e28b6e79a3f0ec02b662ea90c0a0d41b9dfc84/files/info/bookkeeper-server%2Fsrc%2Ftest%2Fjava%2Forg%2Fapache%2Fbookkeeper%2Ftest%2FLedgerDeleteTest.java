{"sha":"5364fdd3d5083628fe24d0eccad7c32fa8168833","node_id":"MDQ6QmxvYjE1NzU5NTY6NTM2NGZkZDNkNTA4MzYyOGZlMjRkMGVjY2FkN2MzMmZhODE2ODgzMw==","size":5829,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/5364fdd3d5083628fe24d0eccad7c32fa8168833","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIudGVzdDsKCi8qCiAqCiAq\nIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAo\nQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNl\nIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRpc3RyaWJ1\ndGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9u\nCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBs\naWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUg\nTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIpOyB5b3Ug\nbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlCiAq\nIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2Yg\ndGhlIExpY2Vuc2UgYXQKICoKICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcv\nbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5\nIGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAogKiBz\nb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0\ncmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJB\nTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVyIGV4\ncHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlCiAq\nIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQg\nbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqCiAqLwoKaW1w\nb3J0IGphdmEuaW8uRmlsZTsKCmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVw\nZXIuY2xpZW50LkxlZGdlckhhbmRsZTsKaW1wb3J0IG9yZy5hcGFjaGUuYm9v\na2tlZXBlci5jbGllbnQuQm9va0tlZXBlci5EaWdlc3RUeXBlOwppbXBvcnQg\nb3JnLmFwYWNoZS5ib29ra2VlcGVyLnByb3RvLkJvb2tpZVNlcnZlcjsKaW1w\nb3J0IG9yZy5zbGY0ai5Mb2dnZXI7CmltcG9ydCBvcmcuc2xmNGouTG9nZ2Vy\nRmFjdG9yeTsKaW1wb3J0IG9yZy5qdW5pdC5CZWZvcmU7CmltcG9ydCBvcmcu\nanVuaXQuVGVzdDsKCi8qKgogKiBUaGlzIGNsYXNzIHRlc3RzIHRoZSBsZWRn\nZXIgZGVsZXRlIGZ1bmN0aW9uYWxpdHkgYm90aCBmcm9tIHRoZSBCb29rS2Vl\ncGVyCiAqIGNsaWVudCBhbmQgdGhlIHNlcnZlciBzaWRlLgogKi8KcHVibGlj\nIGNsYXNzIExlZGdlckRlbGV0ZVRlc3QgZXh0ZW5kcyBCYXNlVGVzdENhc2Ug\newogICAgc3RhdGljIExvZ2dlciBMT0cgPSBMb2dnZXJGYWN0b3J5LmdldExv\nZ2dlcihMZWRnZXJEZWxldGVUZXN0LmNsYXNzKTsKICAgIERpZ2VzdFR5cGUg\nZGlnZXN0VHlwZTsKCiAgICBwdWJsaWMgTGVkZ2VyRGVsZXRlVGVzdChEaWdl\nc3RUeXBlIGRpZ2VzdFR5cGUpIHsKICAgICAgICBzdXBlcigzKTsKICAgICAg\nICB0aGlzLmRpZ2VzdFR5cGUgPSBkaWdlc3RUeXBlOwogICAgfQoKICAgIEBC\nZWZvcmUKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgc2V0VXAoKSB0\naHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICAvLyBTZXQgdXAgdGhlIGNvbmZp\nZ3VyYXRpb24gcHJvcGVydGllcyBuZWVkZWQuCiAgICAgICAgYmFzZUNvbmYu\nc2V0RW50cnlMb2dTaXplTGltaXQoMiAqIDEwMjQgKiAxMDI0TCk7CiAgICAg\nICAgYmFzZUNvbmYuc2V0R2NXYWl0VGltZSgxMDAwKTsKICAgICAgICBzdXBl\nci5zZXRVcCgpOwogICAgfQoKICAgIC8qKgogICAgICogQ29tbW9uIG1ldGhv\nZCB0byBjcmVhdGUgbGVkZ2VycyBhbmQgd3JpdGUgZW50cmllcyB0byB0aGVt\nLgogICAgICovCiAgICBwcml2YXRlIExlZGdlckhhbmRsZVtdIHdyaXRlTGVk\nZ2VyRW50cmllcyhpbnQgbnVtTGVkZ2VycywgaW50IG1zZ1NpemUsIGludCBu\ndW1Nc2dzKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICAvLyBDcmVhdGUg\ndGhlIGxlZGdlcnMKICAgICAgICBMZWRnZXJIYW5kbGVbXSBsaHMgPSBuZXcg\nTGVkZ2VySGFuZGxlW251bUxlZGdlcnNdOwogICAgICAgIGZvciAoaW50IGkg\nPSAwOyBpIDwgbnVtTGVkZ2VyczsgaSsrKSB7CiAgICAgICAgICAgIGxoc1tp\nXSA9IGJrYy5jcmVhdGVMZWRnZXIoZGlnZXN0VHlwZSwgIiIuZ2V0Qnl0ZXMo\nKSk7CiAgICAgICAgfQoKICAgICAgICAvLyBDcmVhdGUgYSBkdW1teSBtZXNz\nYWdlIHN0cmluZyB0byB3cml0ZSBhcyBsZWRnZXIgZW50cmllcwogICAgICAg\nIFN0cmluZ0J1aWxkZXIgbXNnU0IgPSBuZXcgU3RyaW5nQnVpbGRlcigpOwog\nICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbXNnU2l6ZTsgaSsrKSB7CiAg\nICAgICAgICAgIG1zZ1NCLmFwcGVuZCgiYSIpOwogICAgICAgIH0KICAgICAg\nICBTdHJpbmcgbXNnID0gbXNnU0IudG9TdHJpbmcoKTsKCiAgICAgICAgLy8g\nV3JpdGUgYWxsIG9mIHRoZSBlbnRyaWVzIGZvciBhbGwgb2YgdGhlIGxlZGdl\ncnMKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG51bU1zZ3M7IGkrKykg\newogICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IG51bUxlZGdlcnM7\nIGorKykgewogICAgICAgICAgICAgICAgbGhzW2pdLmFkZEVudHJ5KG1zZy5n\nZXRCeXRlcygpKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAg\nLy8gUmV0dXJuIHRoZSBsZWRnZXIgaGFuZGxlcyB0byB0aGUgaW5zZXJ0ZWQg\nbGVkZ2VycyBhbmQgZW50cmllcwogICAgICAgIHJldHVybiBsaHM7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBUaGlzIHRlc3Qgd3JpdGVzIGVub3VnaCBsZWRn\nZXIgZW50cmllcyB0byByb2xsIG92ZXIgdGhlIGVudHJ5IGxvZyBmaWxlLgog\nICAgICogSXQgd2lsbCB0aGVuIGRlbGV0ZSBhbGwgb2YgdGhlIGxlZGdlcnMg\nZnJvbSB0aGUgY2xpZW50IGFuZCBsZXQgdGhlCiAgICAgKiBzZXJ2ZXIncyBF\nbnRyeUxvZ2dlciBnYXJiYWdlIGNvbGxlY3RvciB0aHJlYWQgZGVsZXRlIHRo\nZSBpbml0aWFsIGVudHJ5CiAgICAgKiBsb2cgZmlsZS4KICAgICAqCiAgICAg\nKiBAdGhyb3dzIEV4Y2VwdGlvbgogICAgICovCiAgICBAVGVzdAogICAgcHVi\nbGljIHZvaWQgdGVzdExlZGdlckRlbGV0ZSgpIHRocm93cyBFeGNlcHRpb24g\newogICAgICAgIC8vIFdyaXRlIGVub3VnaCBsZWRnZXIgZW50cmllcyBzbyB0\naGF0IHdlIHJvbGwgb3ZlciB0aGUgaW5pdGlhbCBlbnRyeUxvZyAoMC5sb2cp\nCiAgICAgICAgTGVkZ2VySGFuZGxlW10gbGhzID0gd3JpdGVMZWRnZXJFbnRy\naWVzKDMsIDEwMjQsIDEwMjQpOwoKICAgICAgICAvLyBEZWxldGUgYWxsIG9m\nIHRoZXNlIGxlZGdlcnMgZnJvbSB0aGUgQm9va0tlZXBlciBjbGllbnQKICAg\nICAgICBmb3IgKExlZGdlckhhbmRsZSBsaCA6IGxocykgewogICAgICAgICAg\nICBia2MuZGVsZXRlTGVkZ2VyKGxoLmdldElkKCkpOwogICAgICAgIH0KICAg\nICAgICBMT0cuaW5mbygiRmluaXNoZWQgZGVsZXRpbmcgYWxsIGxlZGdlcnMg\nc28gd2FpdGluZyBmb3IgdGhlIEdDIHRocmVhZCB0byBjbGVhbiB1cCB0aGUg\nZW50cnlMb2dzIik7CiAgICAgICAgVGhyZWFkLnNsZWVwKDIwMDApOwoKICAg\nICAgICAvLyBWZXJpZnkgdGhhdCB0aGUgZmlyc3QgZW50cnkgbG9nICgwLmxv\nZykgaGFzIGJlZW4gZGVsZXRlZCBmcm9tIGFsbCBvZiB0aGUgQm9va2llIFNl\ncnZlcnMuCiAgICAgICAgZm9yIChGaWxlIGxlZGdlckRpcmVjdG9yeSA6IHRt\ncERpcnMpIHsKICAgICAgICAgICAgZm9yIChGaWxlIGYgOiBsZWRnZXJEaXJl\nY3RvcnkubGlzdEZpbGVzKCkpIHsKICAgICAgICAgICAgICAgIGFzc2VydEZh\nbHNlKCJGb3VuZCB0aGUgZW50cnkgbG9nIGZpbGUgKDAubG9nKSB0aGF0IHNo\nb3VsZCBoYXZlIGJlZW4gZGVsZXRlZCBpbiBsZWRnZXJEaXJlY3Rvcnk6ICIK\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgbGVkZ2VyRGlyZWN0b3J5\nLCBmLmlzRmlsZSgpICYmIGYuZ2V0TmFtZSgpLmVxdWFscygiMC5sb2ciKSk7\nCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAg\nKiBUaGlzIHRlc3QgaXMgc2ltaWxhciB0byB0ZXN0TGVkZ2VyRGVsZXRlKCkg\nZXhjZXB0IGl0IHdpbGwgc3RvcCBhbmQKICAgICAqIHJlc3RhcnQgdGhlIEJv\nb2tpZSBTZXJ2ZXJzIGFmdGVyIGl0IGhhcyB3cml0dGVuIG91dCB0aGUgbGVk\nZ2VyIGVudHJpZXMuCiAgICAgKiBPbiByZXN0YXJ0LCB0aGVyZSB3aWxsIGJl\nIGV4aXN0aW5nIGVudHJ5IGxvZ3MgYW5kIGxlZGdlciBpbmRleCBmaWxlcyBm\nb3IKICAgICAqIHRoZSBFbnRyeUxvZ2dlciBhbmQgTGVkZ2VyQ2FjaGUgdG8g\ncmVhZCBhbmQgc3RvcmUgaW50byBtZW1vcnkuCiAgICAgKgogICAgICogQHRo\ncm93cyBFeGNlcHRpb24KICAgICAqLwogICAgQFRlc3QKICAgIHB1YmxpYyB2\nb2lkIHRlc3RMZWRnZXJEZWxldGVXaXRoRXhpc3RpbmdFbnRyeUxvZ3MoKSB0\naHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICAvLyBXcml0ZSBlbm91Z2ggbGVk\nZ2VyIGVudHJpZXMgc28gdGhhdCB3ZSByb2xsIG92ZXIgdGhlIGluaXRpYWwg\nZW50cnlMb2cgKDAubG9nKQogICAgICAgIExlZGdlckhhbmRsZVtdIGxocyA9\nIHdyaXRlTGVkZ2VyRW50cmllcygzLCAxMDI0LCAxMDI0KTsKCiAgICAgICAg\nLyoKICAgICAgICAgKiBTaHV0ZG93biB0aGUgQm9va2llIFNlcnZlcnMgYW5k\nIHJlc3RhcnQgdGhlbSB1c2luZyB0aGUgc2FtZSBsZWRnZXIKICAgICAgICAg\nKiBkaXJlY3Rvcmllcy4gVGhpcyB3aWxsIHRlc3QgdGhlIHJlYWRpbmcgb2Yg\ncHJlLWV4aXN0aW5nIGxlZGdlciBpbmRleAogICAgICAgICAqIGZpbGVzIGlu\nIHRoZSBMZWRnZXJDYWNoZSBkdXJpbmcgc3RhcnR1cCBvZiBhIEJvb2tpZSBT\nZXJ2ZXIuCiAgICAgICAgICovCiAgICAgICAgcmVzdGFydEJvb2tpZXMoKTsK\nCiAgICAgICAgLy8gRGVsZXRlIGFsbCBvZiB0aGVzZSBsZWRnZXJzIGZyb20g\ndGhlIEJvb2tLZWVwZXIgY2xpZW50CiAgICAgICAgZm9yIChMZWRnZXJIYW5k\nbGUgbGggOiBsaHMpIHsKICAgICAgICAgICAgYmtjLmRlbGV0ZUxlZGdlcihs\naC5nZXRJZCgpKTsKICAgICAgICB9CiAgICAgICAgTE9HLmluZm8oIkZpbmlz\naGVkIGRlbGV0aW5nIGFsbCBsZWRnZXJzIHNvIHdhaXRpbmcgZm9yIHRoZSBH\nQyB0aHJlYWQgdG8gY2xlYW4gdXAgdGhlIGVudHJ5TG9ncyIpOwogICAgICAg\nIFRocmVhZC5zbGVlcCgyMDAwKTsKCiAgICAgICAgLyoKICAgICAgICAgKiBW\nZXJpZnkgdGhhdCB0aGUgZmlyc3QgdHdvIGVudHJ5IGxvZ3MgKFswLDFdLmxv\nZykgaGF2ZSBiZWVuIGRlbGV0ZWQKICAgICAgICAgKiBmcm9tIGFsbCBvZiB0\naGUgQm9va2llIFNlcnZlcnMuIFdoZW4gd2UgcmVzdGFydCB0aGUgc2VydmVy\ncyBpbiB0aGlzCiAgICAgICAgICogdGVzdCwgYSBuZXcgZW50cnkgbG9nIGlz\nIGNyZWF0ZWQuIFdlIGtub3cgdGhlbiB0aGF0IHRoZSBmaXJzdCB0d28KICAg\nICAgICAgKiBlbnRyeSBsb2dzIHNob3VsZCBiZSBkZWxldGVkLgogICAgICAg\nICAqLwogICAgICAgIGZvciAoRmlsZSBsZWRnZXJEaXJlY3RvcnkgOiB0bXBE\naXJzKSB7CiAgICAgICAgICAgIGZvciAoRmlsZSBmIDogbGVkZ2VyRGlyZWN0\nb3J5Lmxpc3RGaWxlcygpKSB7CiAgICAgICAgICAgICAgICBhc3NlcnRGYWxz\nZSgiRm91bmQgdGhlIGVudHJ5IGxvZyBmaWxlIChbMCwxXS5sb2cpIHRoYXQg\nc2hvdWxkIGhhdmUgYmVlbiBkZWxldGVkIGluIGxlZGdlckRpcmVjdG9yeTog\nIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBsZWRnZXJEaXJlY3Rv\ncnksIGYuaXNGaWxlKCkgJiYgKGYuZ2V0TmFtZSgpLmVxdWFscygiMC5sb2ci\nKSB8fCBmLmdldE5hbWUoKS5lcXVhbHMoIjEubG9nIikpKTsKICAgICAgICAg\nICAgfQogICAgICAgIH0KICAgIH0KCn0K\n","encoding":"base64"}

