{"sha":"6078b97b2b60a3b22bbea6d06d2540391cfe5b4f","node_id":"MDQ6QmxvYjE1NzU5NTY6NjA3OGI5N2IyYjYwYTNiMjJiYmVhNmQwNmQyNTQwMzkxY2ZlNWI0Zg==","size":4286,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/6078b97b2b60a3b22bbea6d06d2540391cfe5b4f","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIudGVzdDsKCi8qCiAqCiAq\nIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAo\nQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNl\nIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRpc3RyaWJ1\ndGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9u\nCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBs\naWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUg\nTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIpOyB5b3Ug\nbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlCiAq\nIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2Yg\ndGhlIExpY2Vuc2UgYXQKICoKICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcv\nbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5\nIGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAogKiBz\nb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0\ncmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJB\nTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVyIGV4\ncHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlCiAq\nIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQg\nbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqCiAqLwoKaW1w\nb3J0IGphdmEubmV0LkluZXRTb2NrZXRBZGRyZXNzOwppbXBvcnQgamF2YS5p\nby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEubGFuZy5JbnRlcnJ1cHRlZEV4\nY2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5BcnJheXM7CmltcG9ydCBqYXZh\nLnV0aWwuY29uY3VycmVudC5FeGVjdXRvcnM7CgppbXBvcnQgb3JnLmFwYWNo\nZS5ib29ra2VlcGVyLmNvbmYuQ2xpZW50Q29uZmlndXJhdGlvbjsKaW1wb3J0\nIG9yZy5hcGFjaGUuYm9va2tlZXBlci5wcm90by5Cb29raWVDbGllbnQ7Cmlt\ncG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIucHJvdG8uQm9va2llUHJvdG9j\nb2w7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIucHJvdG8uQm9va2tl\nZXBlckludGVybmFsQ2FsbGJhY2tzLldyaXRlQ2FsbGJhY2s7CmltcG9ydCBv\ncmcuYXBhY2hlLmJvb2trZWVwZXIudXRpbC5PcmRlcmVkU2FmZUV4ZWN1dG9y\nOwppbXBvcnQgb3JnLnNsZjRqLkxvZ2dlcjsKaW1wb3J0IG9yZy5zbGY0ai5M\nb2dnZXJGYWN0b3J5OwppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmJ1ZmZlci5D\naGFubmVsQnVmZmVyczsKaW1wb3J0IG9yZy5qYm9zcy5uZXR0eS5jaGFubmVs\nLnNvY2tldC5DbGllbnRTb2NrZXRDaGFubmVsRmFjdG9yeTsKaW1wb3J0IG9y\nZy5qYm9zcy5uZXR0eS5jaGFubmVsLnNvY2tldC5uaW8uTmlvQ2xpZW50U29j\na2V0Q2hhbm5lbEZhY3Rvcnk7CgovKioKICogVGhpcyBjbGFzcyB0ZXN0cyBC\nb29raWVDbGllbnQuIEl0IGp1c3Qgc2VuZHMgdGhlIGEgbmV3IGVudHJ5IHRv\nIGl0c2VsZi4KICoKICoKICoKICovCgpjbGFzcyBMb29wYmFja0NsaWVudCBp\nbXBsZW1lbnRzIFdyaXRlQ2FsbGJhY2sgewogICAgTG9nZ2VyIExPRyA9IExv\nZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKExvb3BiYWNrQ2xpZW50LmNsYXNzKTsK\nICAgIEJvb2tpZUNsaWVudCBjbGllbnQ7CiAgICBzdGF0aWMgaW50IHJlY3ZU\naW1lb3V0ID0gMjAwMDsKICAgIGxvbmcgYmVnaW4gPSAwOwogICAgaW50IGxp\nbWl0OwogICAgT3JkZXJlZFNhZmVFeGVjdXRvciBleGVjdXRvcjsKCiAgICBz\ndGF0aWMgY2xhc3MgQ291bnRlciB7CiAgICAgICAgaW50IGM7CiAgICAgICAg\naW50IGxpbWl0OwoKICAgICAgICBDb3VudGVyKGludCBsaW1pdCkgewogICAg\nICAgICAgICB0aGlzLmMgPSAwOwogICAgICAgICAgICB0aGlzLmxpbWl0ID0g\nbGltaXQ7CiAgICAgICAgfQoKICAgICAgICBzeW5jaHJvbml6ZWQgdm9pZCBp\nbmNyZW1lbnQoKSB7CiAgICAgICAgICAgIGlmICgrK2MgPT0gbGltaXQpCiAg\nICAgICAgICAgICAgICB0aGlzLm5vdGlmeSgpOwogICAgICAgIH0KICAgIH0K\nCiAgICBMb29wYmFja0NsaWVudChDbGllbnRTb2NrZXRDaGFubmVsRmFjdG9y\neSBjaGFubmVsRmFjdG9yeSwgT3JkZXJlZFNhZmVFeGVjdXRvciBleGVjdXRv\nciwgbG9uZyBiZWdpbiwgaW50IGxpbWl0KSB0aHJvd3MgSU9FeGNlcHRpb24g\newogICAgICAgIHRoaXMuY2xpZW50ID0gbmV3IEJvb2tpZUNsaWVudChuZXcg\nQ2xpZW50Q29uZmlndXJhdGlvbigpLCBjaGFubmVsRmFjdG9yeSwgZXhlY3V0\nb3IpOwogICAgICAgIHRoaXMuYmVnaW4gPSBiZWdpbjsKICAgIH0KCiAgICB2\nb2lkIHdyaXRlKGxvbmcgbGVkZ2VySWQsIGxvbmcgZW50cnksIGJ5dGVbXSBk\nYXRhLCBJbmV0U29ja2V0QWRkcmVzcyBhZGRyLCBXcml0ZUNhbGxiYWNrIGNi\nLCBPYmplY3QgY3R4KQogICAgICAgICAgICB0aHJvd3MgSU9FeGNlcHRpb24s\nIEludGVycnVwdGVkRXhjZXB0aW9uIHsKICAgICAgICBMT0cuaW5mbygiTGVk\nZ2VyIGlkOiAiICsgbGVkZ2VySWQgKyAiLCBFbnRyeTogIiArIGVudHJ5KTsK\nICAgICAgICBieXRlW10gcGFzc3dkID0gbmV3IGJ5dGVbMjBdOwogICAgICAg\nIEFycmF5cy5maWxsKHBhc3N3ZCwgKGJ5dGUpICdhJyk7CgogICAgICAgIGNs\naWVudC5hZGRFbnRyeShhZGRyLCBsZWRnZXJJZCwgcGFzc3dkLCBlbnRyeSwg\nQ2hhbm5lbEJ1ZmZlcnMud3JhcHBlZEJ1ZmZlcihkYXRhKSwgY2IsIGN0eCwg\nQm9va2llUHJvdG9jb2wuRkxBR19OT05FKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCB3cml0ZUNvbXBsZXRlKGludCByYywgbG9uZyBsZWRnZXJJZCwgbG9u\nZyBlbnRyeUlkLCBJbmV0U29ja2V0QWRkcmVzcyBhZGRyLCBPYmplY3QgY3R4\nKSB7CiAgICAgICAgQ291bnRlciBjb3VudGVyID0gKENvdW50ZXIpIGN0eDsK\nICAgICAgICBjb3VudGVyLmluY3JlbWVudCgpOwogICAgfQoKICAgIHB1Ymxp\nYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZyBhcmdzW10pIHsKICAgICAgICBi\neXRlW10gZGF0YSA9IG5ldyBieXRlW0ludGVnZXIucGFyc2VJbnQoYXJnc1sw\nXSldOwogICAgICAgIEludGVnZXIgbGltaXQgPSBJbnRlZ2VyLnBhcnNlSW50\nKGFyZ3NbMV0pOwogICAgICAgIENvdW50ZXIgYyA9IG5ldyBDb3VudGVyKGxp\nbWl0KTsKICAgICAgICBsb25nIGxlZGdlcklkID0gTG9uZy52YWx1ZU9mKCIw\nIikubG9uZ1ZhbHVlKCk7CiAgICAgICAgbG9uZyBiZWdpbiA9IFN5c3RlbS5j\ndXJyZW50VGltZU1pbGxpcygpOwoKICAgICAgICBMb29wYmFja0NsaWVudCBs\nYjsKICAgICAgICBDbGllbnRTb2NrZXRDaGFubmVsRmFjdG9yeSBjaGFubmVs\nRmFjdG9yeSA9IG5ldyBOaW9DbGllbnRTb2NrZXRDaGFubmVsRmFjdG9yeShF\neGVjdXRvcnMubmV3Q2FjaGVkVGhyZWFkUG9vbCgpLCBFeGVjdXRvcnMKICAg\nICAgICAgICAgICAgIC5uZXdDYWNoZWRUaHJlYWRQb29sKCkpOwogICAgICAg\nIE9yZGVyZWRTYWZlRXhlY3V0b3IgZXhlY3V0b3IgPSBuZXcgT3JkZXJlZFNh\nZmVFeGVjdXRvcigyKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBJbmV0\nU29ja2V0QWRkcmVzcyBhZGRyID0gbmV3IEluZXRTb2NrZXRBZGRyZXNzKCIx\nMjcuMC4wLjEiLCBJbnRlZ2VyLnZhbHVlT2YoYXJnc1syXSkuaW50VmFsdWUo\nKSk7CiAgICAgICAgICAgIGxiID0gbmV3IExvb3BiYWNrQ2xpZW50KGNoYW5u\nZWxGYWN0b3J5LCBleGVjdXRvciwgYmVnaW4sIGxpbWl0LmludFZhbHVlKCkp\nOwoKICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBsaW1pdDsgaSsr\nKSB7CiAgICAgICAgICAgICAgICBsYi53cml0ZShsZWRnZXJJZCwgaSwgZGF0\nYSwgYWRkciwgbGIsIGMpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBz\neW5jaHJvbml6ZWQgKGMpIHsKICAgICAgICAgICAgICAgIGMud2FpdCgpOwog\nICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKCJUaW1lIHRvIHdy\naXRlIGFsbCBlbnRyaWVzOiAiICsgKFN5c3RlbS5jdXJyZW50VGltZU1pbGxp\ncygpIC0gYmVnaW4pKTsKICAgICAgICAgICAgfQogICAgICAgIH0gY2F0Y2gg\nKElPRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgZS5wcmludFN0YWNrVHJh\nY2UoKTsKICAgICAgICB9IGNhdGNoIChJbnRlcnJ1cHRlZEV4Y2VwdGlvbiBl\nKSB7CiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7CiAgICAgICAg\nfQogICAgfQoKfQo=\n","encoding":"base64"}

