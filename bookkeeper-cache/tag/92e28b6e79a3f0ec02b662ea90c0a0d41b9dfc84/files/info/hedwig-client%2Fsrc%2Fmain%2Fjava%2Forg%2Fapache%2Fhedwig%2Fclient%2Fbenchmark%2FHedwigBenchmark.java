{"sha":"394d37579f820f0281ad2718727ea1a3b738632b","node_id":"MDQ6QmxvYjE1NzU5NTY6Mzk0ZDM3NTc5ZjgyMGYwMjgxYWQyNzE4NzI3ZWExYTNiNzM4NjMyYg==","size":4805,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/394d37579f820f0281ad2718727ea1a3b738632b","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQuYmVuY2htYXJrOwoKaW1w\nb3J0IGphdmEuaW8uRmlsZTsKaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50\nLkNhbGxhYmxlOwoKaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb25maWd1\ncmF0aW9uLkNvbmZpZ3VyYXRpb25FeGNlcHRpb247CmltcG9ydCBvcmcuc2xm\nNGouTG9nZ2VyOwppbXBvcnQgb3JnLnNsZjRqLkxvZ2dlckZhY3Rvcnk7Cmlt\ncG9ydCBvcmcuamJvc3MubmV0dHkubG9nZ2luZy5JbnRlcm5hbExvZ2dlckZh\nY3Rvcnk7CmltcG9ydCBvcmcuamJvc3MubmV0dHkubG9nZ2luZy5Mb2c0Skxv\nZ2dlckZhY3Rvcnk7CgppbXBvcnQgY29tLmdvb2dsZS5wcm90b2J1Zi5CeXRl\nU3RyaW5nOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuY2xpZW50LmNvbmYu\nQ2xpZW50Q29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2ln\nLmNsaWVudC5IZWR3aWdDbGllbnQ7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdp\nZy5jbGllbnQuYXBpLlB1Ymxpc2hlcjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVk\nd2lnLmNsaWVudC5hcGkuU3Vic2NyaWJlcjsKCnB1YmxpYyBjbGFzcyBIZWR3\naWdCZW5jaG1hcmsgaW1wbGVtZW50cyBDYWxsYWJsZTxWb2lkPiB7CiAgICBw\ncm90ZWN0ZWQgc3RhdGljIGZpbmFsIExvZ2dlciBsb2dnZXIgPSBMb2dnZXJG\nYWN0b3J5LmdldExvZ2dlcihIZWR3aWdCZW5jaG1hcmsuY2xhc3MpOwoKICAg\nIHN0YXRpYyBmaW5hbCBTdHJpbmcgVE9QSUNfUFJFRklYID0gInRvcGljIjsK\nCiAgICBwcml2YXRlIGZpbmFsIEhlZHdpZ0NsaWVudCBjbGllbnQ7CiAgICBw\ncml2YXRlIGZpbmFsIFB1Ymxpc2hlciBwdWJsaXNoZXI7CiAgICBwcml2YXRl\nIGZpbmFsIFN1YnNjcmliZXIgc3Vic2NyaWJlcjsKCiAgICBwdWJsaWMgSGVk\nd2lnQmVuY2htYXJrKENsaWVudENvbmZpZ3VyYXRpb24gY2ZnKSB7CiAgICAg\nICAgY2xpZW50ID0gbmV3IEhlZHdpZ0NsaWVudChjZmcpOwogICAgICAgIHB1\nYmxpc2hlciA9IGNsaWVudC5nZXRQdWJsaXNoZXIoKTsKICAgICAgICBzdWJz\nY3JpYmVyID0gY2xpZW50LmdldFN1YnNjcmliZXIoKTsKICAgIH0KCiAgICBz\ndGF0aWMgYm9vbGVhbiBhbUlSZXNwb25zaWJsZUZvclRvcGljKGludCB0b3Bp\nY051bSwgaW50IHBhcnRpdGlvbkluZGV4LCBpbnQgbnVtUGFydGl0aW9ucykg\newogICAgICAgIHJldHVybiB0b3BpY051bSAlIG51bVBhcnRpdGlvbnMgPT0g\ncGFydGl0aW9uSW5kZXg7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJs\naWMgVm9pZCBjYWxsKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CgogICAgICAgIC8v\nCiAgICAgICAgLy8gUGFyYW1ldGVycy4KICAgICAgICAvLwoKICAgICAgICAv\nLyBXaGF0IHByb2dyYW0gdG8gcnVuOiBwdWIsIHN1YiAoc3Vic2NyaXB0aW9u\nIGJlbmNobWFyayksIHJlY3YuCiAgICAgICAgZmluYWwgU3RyaW5nIG1vZGUg\nPSBTeXN0ZW0uZ2V0UHJvcGVydHkoIm1vZGUiLCIiKTsKCiAgICAgICAgLy8g\nTnVtYmVyIG9mIHJlcXVlc3RzIHRvIG1ha2UgKHB1Ymxpc2hlcyBvciBzdWJz\nY3JpYmVzKS4KICAgICAgICBpbnQgbnVtVG9waWNzID0gSW50ZWdlci5nZXRJ\nbnRlZ2VyKCJuVG9waWNzIiwgNTApOwogICAgICAgIGludCBudW1NZXNzYWdl\ncyA9IEludGVnZXIuZ2V0SW50ZWdlcigibk1zZ3MiLCAxMDAwKTsKICAgICAg\nICBpbnQgbnVtUmVnaW9ucyA9IEludGVnZXIuZ2V0SW50ZWdlcigiblJlZ2lv\nbnMiLCAxKTsKICAgICAgICBpbnQgc3RhcnRUb3BpY0xhYmVsID0gSW50ZWdl\nci5nZXRJbnRlZ2VyKCJzdGFydFRvcGljTGFiZWwiLCAwKTsKICAgICAgICBp\nbnQgcGFydGl0aW9uSW5kZXggPSBJbnRlZ2VyLmdldEludGVnZXIoInBhcnRp\ndGlvbkluZGV4IiwgMCk7CiAgICAgICAgaW50IG51bVBhcnRpdGlvbnMgPSBJ\nbnRlZ2VyLmdldEludGVnZXIoIm5QYXJ0aXRpb25zIiwgMSk7CgogICAgICAg\nIGludCByZXBsaWNhSW5kZXggPSBJbnRlZ2VyLmdldEludGVnZXIoInJlcGxp\nY2FJbmRleCIsIDApOwoKICAgICAgICBpbnQgcmF0ZSA9IEludGVnZXIuZ2V0\nSW50ZWdlcigicmF0ZSIsIDApOwogICAgICAgIGludCBuUGFyYWxsZWwgPSBJ\nbnRlZ2VyLmdldEludGVnZXIoIm5wYXIiLCAxMDApOwogICAgICAgIGludCBt\nc2dTaXplID0gSW50ZWdlci5nZXRJbnRlZ2VyKCJtc2dTaXplIiwgMTAyNCk7\nCgogICAgICAgIC8vIE51bWJlciBvZiB3YXJtdXAgc3Vic2NyaXB0aW9ucyB0\nbyBtYWtlLgogICAgICAgIGZpbmFsIGludCBuV2FybXVwcyA9IEludGVnZXIu\nZ2V0SW50ZWdlcigibndhcm11cHMiLCAxMDAwKTsKCiAgICAgICAgaWYgKG1v\nZGUuZXF1YWxzKCJzdWIiKSkgewogICAgICAgICAgICBCZW5jaG1hcmtTdWJz\nY3JpYmVyIGJlbmNobWFya1N1YiA9IG5ldyBCZW5jaG1hcmtTdWJzY3JpYmVy\nKG51bVRvcGljcywgMCwgMSwgc3RhcnRUb3BpY0xhYmVsLCAwLCAxLAogICAg\nICAgICAgICAgICAgICAgIHN1YnNjcmliZXIsIEJ5dGVTdHJpbmcuY29weUZy\nb21VdGY4KCJteVN1YiIpKTsKCiAgICAgICAgICAgIGJlbmNobWFya1N1Yi53\nYXJtdXAobldhcm11cHMpOwogICAgICAgICAgICBiZW5jaG1hcmtTdWIuY2Fs\nbCgpOwoKICAgICAgICB9IGVsc2UgaWYgKG1vZGUuZXF1YWxzKCJyZWN2Iikp\nIHsKCiAgICAgICAgICAgIEJlbmNobWFya1N1YnNjcmliZXIgYmVuY2htYXJr\nU3ViID0gbmV3IEJlbmNobWFya1N1YnNjcmliZXIobnVtVG9waWNzLCBudW1N\nZXNzYWdlcywgbnVtUmVnaW9ucywKICAgICAgICAgICAgICAgICAgICBzdGFy\ndFRvcGljTGFiZWwsIHBhcnRpdGlvbkluZGV4LCBudW1QYXJ0aXRpb25zLCBz\ndWJzY3JpYmVyLCBCeXRlU3RyaW5nLmNvcHlGcm9tVXRmOCgic3ViLSIKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICsgcmVwbGljYUluZGV4KSk7Cgog\nICAgICAgICAgICBiZW5jaG1hcmtTdWIuY2FsbCgpOwoKICAgICAgICB9IGVs\nc2UgaWYgKG1vZGUuZXF1YWxzKCJwdWIiKSkgewogICAgICAgICAgICAvLyBP\nZmZlcmVkIGxvYWQgaW4gbXNncy9zZWNvbmQuCiAgICAgICAgICAgIEJlbmNo\nbWFya1B1Ymxpc2hlciBiZW5jaG1hcmtQdWIgPSBuZXcgQmVuY2htYXJrUHVi\nbGlzaGVyKG51bVRvcGljcywgbnVtTWVzc2FnZXMsIG51bVJlZ2lvbnMsCiAg\nICAgICAgICAgICAgICAgICAgc3RhcnRUb3BpY0xhYmVsLCBwYXJ0aXRpb25J\nbmRleCwgbnVtUGFydGl0aW9ucywgcHVibGlzaGVyLCBzdWJzY3JpYmVyLCBt\nc2dTaXplLCBuUGFyYWxsZWwsIHJhdGUpOwogICAgICAgICAgICBiZW5jaG1h\ncmtQdWIud2FybXVwKG5XYXJtdXBzKTsKICAgICAgICAgICAgYmVuY2htYXJr\nUHViLmNhbGwoKTsKCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhy\nb3cgbmV3IEV4Y2VwdGlvbigidW5rbm93biBtb2RlOiAiICsgbW9kZSk7CiAg\nICAgICAgfQoKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICBwdWJs\naWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB0aHJvd3MgRXhj\nZXB0aW9uIHsKICAgICAgICBDbGllbnRDb25maWd1cmF0aW9uIGNmZyA9IG5l\ndyBDbGllbnRDb25maWd1cmF0aW9uKCk7CiAgICAgICAgaWYgKGFyZ3MubGVu\nZ3RoID4gMCkgewogICAgICAgICAgICBTdHJpbmcgY29uZkZpbGUgPSBhcmdz\nWzBdOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY2ZnLmxv\nYWRDb25mKG5ldyBGaWxlKGNvbmZGaWxlKS50b1VSSSgpLnRvVVJMKCkpOwog\nICAgICAgICAgICB9IGNhdGNoIChDb25maWd1cmF0aW9uRXhjZXB0aW9uIGUp\nIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9u\nKGUpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBJbnRlcm5h\nbExvZ2dlckZhY3Rvcnkuc2V0RGVmYXVsdEZhY3RvcnkobmV3IExvZzRKTG9n\nZ2VyRmFjdG9yeSgpKTsKCiAgICAgICAgSGVkd2lnQmVuY2htYXJrIGFwcCA9\nIG5ldyBIZWR3aWdCZW5jaG1hcmsoY2ZnKTsKICAgICAgICBhcHAuY2FsbCgp\nOwogICAgICAgIFN5c3RlbS5leGl0KDApOwogICAgfQoKfQo=\n","encoding":"base64"}

