{"sha":"66e049fcab75464e6925c9997850514e8f43621c","node_id":"MDQ6QmxvYjE1NzU5NTY6NjZlMDQ5ZmNhYjc1NDY0ZTY5MjVjOTk5Nzg1MDUxNGU4ZjQzNjIxYw==","size":7304,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/66e049fcab75464e6925c9997850514e8f43621c","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQuY29uZjsKCmltcG9ydCBq\nYXZhLm5ldC5JbmV0U29ja2V0QWRkcmVzczsKCmltcG9ydCBvcmcuYXBhY2hl\nLmNvbW1vbnMuY29uZmlndXJhdGlvbi5Db25maWd1cmF0aW9uRXhjZXB0aW9u\nOwppbXBvcnQgb3JnLnNsZjRqLkxvZ2dlcjsKaW1wb3J0IG9yZy5zbGY0ai5M\nb2dnZXJGYWN0b3J5OwoKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmNvbmYu\nQWJzdHJhY3RDb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3\naWcudXRpbC5IZWR3aWdTb2NrZXRBZGRyZXNzOwoKcHVibGljIGNsYXNzIENs\naWVudENvbmZpZ3VyYXRpb24gZXh0ZW5kcyBBYnN0cmFjdENvbmZpZ3VyYXRp\nb24gewogICAgTG9nZ2VyIGxvZ2dlciA9IExvZ2dlckZhY3RvcnkuZ2V0TG9n\nZ2VyKENsaWVudENvbmZpZ3VyYXRpb24uY2xhc3MpOwoKICAgIC8vIFByb3Rl\nY3RlZCBtZW1iZXIgdmFyaWFibGVzIGZvciBjb25maWd1cmF0aW9uIHBhcmFt\nZXRlciBuYW1lcwogICAgcHJvdGVjdGVkIHN0YXRpYyBmaW5hbCBTdHJpbmcg\nREVGQVVMVF9TRVJWRVJfSE9TVCA9ICJkZWZhdWx0X3NlcnZlcl9ob3N0IjsK\nICAgIHByb3RlY3RlZCBzdGF0aWMgZmluYWwgU3RyaW5nIE1BWF9NRVNTQUdF\nX1NJWkUgPSAibWF4X21lc3NhZ2Vfc2l6ZSI7CiAgICBwcm90ZWN0ZWQgc3Rh\ndGljIGZpbmFsIFN0cmluZyBNQVhfU0VSVkVSX1JFRElSRUNUUyA9ICJtYXhf\nc2VydmVyX3JlZGlyZWN0cyI7CiAgICBwcm90ZWN0ZWQgc3RhdGljIGZpbmFs\nIFN0cmluZyBBVVRPX1NFTkRfQ09OU1VNRV9NRVNTQUdFX0VOQUJMRUQgPSAi\nYXV0b19zZW5kX2NvbnN1bWVfbWVzc2FnZV9lbmFibGVkIjsKICAgIHByb3Rl\nY3RlZCBzdGF0aWMgZmluYWwgU3RyaW5nIENPTlNVTUVEX01FU1NBR0VTX0JV\nRkZFUl9TSVpFID0gImNvbnN1bWVkX21lc3NhZ2VzX2J1ZmZlcl9zaXplIjsK\nICAgIHByb3RlY3RlZCBzdGF0aWMgZmluYWwgU3RyaW5nIE1FU1NBR0VfQ09O\nU1VNRV9SRVRSWV9XQUlUX1RJTUUgPSAibWVzc2FnZV9jb25zdW1lX3JldHJ5\nX3dhaXRfdGltZSI7CiAgICBwcm90ZWN0ZWQgc3RhdGljIGZpbmFsIFN0cmlu\nZyBTVUJTQ1JJQkVfUkVDT05ORUNUX1JFVFJZX1dBSVRfVElNRSA9ICJzdWJz\nY3JpYmVfcmVjb25uZWN0X3JldHJ5X3dhaXRfdGltZSI7CiAgICBwcm90ZWN0\nZWQgc3RhdGljIGZpbmFsIFN0cmluZyBNQVhfT1VUU1RBTkRJTkdfTUVTU0FH\nRVMgPSAibWF4X291dHN0YW5kaW5nX21lc3NhZ2VzIjsKICAgIHByb3RlY3Rl\nZCBzdGF0aWMgZmluYWwgU3RyaW5nIFNFUlZFUl9BQ0tfUkVTUE9OU0VfVElN\nRU9VVCA9ICJzZXJ2ZXJfYWNrX3Jlc3BvbnNlX3RpbWVvdXQiOwogICAgcHJv\ndGVjdGVkIHN0YXRpYyBmaW5hbCBTdHJpbmcgVElNRU9VVF9USFJFQURfUlVO\nX0lOVEVSVkFMID0gInRpbWVvdXRfdGhyZWFkX3J1bl9pbnRlcnZhbCI7CiAg\nICBwcm90ZWN0ZWQgc3RhdGljIGZpbmFsIFN0cmluZyBTU0xfRU5BQkxFRCA9\nICJzc2xfZW5hYmxlZCI7CgogICAgLy8gU2luZ2xldG9ucyB3ZSB3YW50IHRv\nIGluc3RhbnRpYXRlIG9ubHkgb25jZSBwZXIgQ2xpZW50Q29uZmlndXJhdGlv\nbgogICAgcHJvdGVjdGVkIEhlZHdpZ1NvY2tldEFkZHJlc3MgbXlEZWZhdWx0\nU2VydmVyQWRkcmVzcyA9IG51bGw7CgogICAgLy8gR2V0dGVycyBmb3IgdGhl\nIHZhcmlvdXMgQ2xpZW50IENvbmZpZ3VyYXRpb24gcGFyYW1ldGVycy4KICAg\nIC8vIFRoaXMgc2hvdWxkIHBvaW50IHRvIHRoZSBkZWZhdWx0IHNlcnZlciBo\nb3N0LCBvciB0aGUgVklQIGZyb250aW5nIGFsbCBvZgogICAgLy8gdGhlIHNl\ncnZlciBodWJzLiBUaGlzIHdpbGwgcmV0dXJuIHRoZSBIZWR3aWdTb2NrZXRB\nZGRyZXNzIHdoaWNoCiAgICAvLyBlbmNhcHN1bGF0ZXMgYm90aCB0aGUgcmVn\ndWxhciBhbmQgU1NMIHBvcnQgY29ubmVjdGlvbiB0byB0aGUgc2VydmVyIGhv\nc3QuCiAgICBwcm90ZWN0ZWQgSGVkd2lnU29ja2V0QWRkcmVzcyBnZXREZWZh\ndWx0U2VydmVySGVkd2lnU29ja2V0QWRkcmVzcygpIHsKICAgICAgICBpZiAo\nbXlEZWZhdWx0U2VydmVyQWRkcmVzcyA9PSBudWxsKQogICAgICAgICAgICBt\neURlZmF1bHRTZXJ2ZXJBZGRyZXNzID0gbmV3IEhlZHdpZ1NvY2tldEFkZHJl\nc3MoY29uZi5nZXRTdHJpbmcoREVGQVVMVF9TRVJWRVJfSE9TVCwgImxvY2Fs\naG9zdDo0MDgwOjk4NzYiKSk7CiAgICAgICAgcmV0dXJuIG15RGVmYXVsdFNl\ncnZlckFkZHJlc3M7CiAgICB9CgogICAgLy8gVGhpcyB3aWxsIGdldCB0aGUg\nZGVmYXVsdCBzZXJ2ZXIgSW5ldFNvY2tldEFkZHJlc3MgYmFzZWQgb24gaWYg\nU1NMIGlzCiAgICAvLyBlbmFibGVkIG9yIG5vdC4KICAgIHB1YmxpYyBJbmV0\nU29ja2V0QWRkcmVzcyBnZXREZWZhdWx0U2VydmVySG9zdCgpIHsKICAgICAg\nICBpZiAoaXNTU0xFbmFibGVkKCkpCiAgICAgICAgICAgIHJldHVybiBnZXRE\nZWZhdWx0U2VydmVySGVkd2lnU29ja2V0QWRkcmVzcygpLmdldFNTTFNvY2tl\ndEFkZHJlc3MoKTsKICAgICAgICBlbHNlCiAgICAgICAgICAgIHJldHVybiBn\nZXREZWZhdWx0U2VydmVySGVkd2lnU29ja2V0QWRkcmVzcygpLmdldFNvY2tl\ndEFkZHJlc3MoKTsKICAgIH0KCiAgICBwdWJsaWMgaW50IGdldE1heGltdW1N\nZXNzYWdlU2l6ZSgpIHsKICAgICAgICByZXR1cm4gY29uZi5nZXRJbnQoTUFY\nX01FU1NBR0VfU0laRSwgMiAqIDEwMjQgKiAxMDI0KTsKICAgIH0KCiAgICAv\nLyBUaGlzIHBhcmFtZXRlciBpcyBmb3Igc2V0dGluZyB0aGUgbWF4aW11bSBu\ndW1iZXIgb2Ygc2VydmVyIHJlZGlyZWN0cyB0bwogICAgLy8gYWxsb3cgYmVm\nb3JlIHdlIGNvbnNpZGVyIGl0IGFzIGFuIGVycm9yIGNvbmRpdGlvbi4gVGhp\ncyBpcyB0byBzdG9wCiAgICAvLyBpbmZpbml0ZSByZWRpcmVjdCBsb29wcyBp\nbiBjYXNlIHRoZXJlIGlzIGEgcHJvYmxlbSB3aXRoIHRoZSBodWIgc2VydmVy\ncwogICAgLy8gdG9waWMgbWFzdGVyc2hpcC4KICAgIHB1YmxpYyBpbnQgZ2V0\nTWF4aW11bVNlcnZlclJlZGlyZWN0cygpIHsKICAgICAgICByZXR1cm4gY29u\nZi5nZXRJbnQoTUFYX1NFUlZFUl9SRURJUkVDVFMsIDIpOwogICAgfQoKICAg\nIC8vIFRoaXMgcGFyYW1ldGVyIGlzIGEgYm9vbGVhbiBmbGFnIGluZGljYXRp\nbmcgaWYgdGhlIGNsaWVudCBsaWJyYXJ5IHNob3VsZAogICAgLy8gYXV0b21h\ndGljYWxseSBzZW5kIHRoZSBjb25zdW1lIG1lc3NhZ2UgdG8gdGhlIHNlcnZl\nciBiYXNlZCBvbiB0aGUKICAgIC8vIGNvbmZpZ3VyZWQgYW1vdW50IG9mIG1l\nc3NhZ2VzIGNvbnN1bWVkIGJ5IHRoZSBjbGllbnQgYXBwLiBUaGUgY2xpZW50\nIGFwcAogICAgLy8gY291bGQgY2hvb3NlIHRvIG92ZXJyaWRlIHRoaXMgYmVo\nYXZpb3IgYW5kIGluc3RlYWQsIG1hbnVhbGx5IHNlbmQgdGhlCiAgICAvLyBj\nb25zdW1lIG1lc3NhZ2UgdG8gdGhlIHNlcnZlciB2aWEgdGhlIGNsaWVudCBs\naWJyYXJ5IHVzaW5nIGl0cyBvd24KICAgIC8vIGxvZ2ljIGFuZCBwb2xpY3ku\nCiAgICBwdWJsaWMgYm9vbGVhbiBpc0F1dG9TZW5kQ29uc3VtZU1lc3NhZ2VF\nbmFibGVkKCkgewogICAgICAgIHJldHVybiBjb25mLmdldEJvb2xlYW4oQVVU\nT19TRU5EX0NPTlNVTUVfTUVTU0FHRV9FTkFCTEVELCB0cnVlKTsKICAgIH0K\nCiAgICAvLyBUaGlzIHBhcmFtZXRlciBpcyB0byBzZXQgaG93IG1hbnkgY29u\nc3VtZWQgbWVzc2FnZXMgd2UnbGwgYnVmZmVyIHVwCiAgICAvLyBiZWZvcmUg\nd2Ugc2VuZCB0aGUgQ29uc3VtZSBtZXNzYWdlIHRvIHRoZSBzZXJ2ZXIgaW5k\naWNhdGluZyB0aGF0IGFsbAogICAgLy8gb2YgdGhlIG1lc3NhZ2VzIHVwIHRv\nIHRoYXQgcG9pbnQgaGF2ZSBiZWVuIHN1Y2Nlc3NmdWxseSBjb25zdW1lZCBi\neQogICAgLy8gdGhlIGNsaWVudC4KICAgIHB1YmxpYyBpbnQgZ2V0Q29uc3Vt\nZWRNZXNzYWdlc0J1ZmZlclNpemUoKSB7CiAgICAgICAgcmV0dXJuIGNvbmYu\nZ2V0SW50KENPTlNVTUVEX01FU1NBR0VTX0JVRkZFUl9TSVpFLCA1KTsKICAg\nIH0KCiAgICAvLyBUaGlzIHBhcmFtZXRlciBpcyB1c2VkIHRvIGRldGVybWlu\nZSBob3cgbG9uZyB3ZSB3YWl0IGJlZm9yZSByZXRyeWluZyB0aGUKICAgIC8v\nIGNsaWVudCBhcHAncyBNZXNzYWdlSGFuZGxlciB0byBjb25zdW1lIGEgc3Vi\nc2NyaWJlZCBtZXNzYWdlcyBzZW50IHRvIHVzCiAgICAvLyBmcm9tIHRoZSBz\nZXJ2ZXIuIFRoZSB0aW1lIHRvIHdhaXQgaXMgaW4gbWlsbGlzZWNvbmRzLgog\nICAgcHVibGljIGxvbmcgZ2V0TWVzc2FnZUNvbnN1bWVSZXRyeVdhaXRUaW1l\nKCkgewogICAgICAgIHJldHVybiBjb25mLmdldExvbmcoTUVTU0FHRV9DT05T\nVU1FX1JFVFJZX1dBSVRfVElNRSwgMTAwMDApOwogICAgfQoKICAgIC8vIFRo\naXMgcGFyYW1ldGVyIGlzIHVzZWQgdG8gZGV0ZXJtaW5lIGhvdyBsb25nIHdl\nIHdhaXQgYmVmb3JlIHJldHJ5aW5nIHRoZQogICAgLy8gU3Vic2NyaWJlIFJl\nY29ubmVjdCByZXF1ZXN0LiBUaGlzIGlzIGRvbmUgd2hlbiB0aGUgY29ubmVj\ndGlvbiB0byBhIHNlcnZlcgogICAgLy8gZGlzY29ubmVjdHMgYW5kIHdlIGF0\ndGVtcHQgdG8gY29ubmVjdCB0byBpdC4gV2UnbGwga2VlcCBvbiB0cnlpbmcg\nYnV0CiAgICAvLyBpbiBjYXNlIHRoZSBzZXJ2ZXIocykgaXMgZG93biBmb3Ig\nYSBsb25nZXIgdGltZSwgd2Ugd2FudCB0byB0aHJvdHRsZQogICAgLy8gaG93\nIG9mdGVuIHdlIGRvIHRoZSBzdWJzY3JpYmUgcmVjb25uZWN0IHJlcXVlc3Qu\nIFRoZSB0aW1lIHRvIHdhaXQgaXMgaW4KICAgIC8vIG1pbGxpc2Vjb25kcy4K\nICAgIHB1YmxpYyBsb25nIGdldFN1YnNjcmliZVJlY29ubmVjdFJldHJ5V2Fp\ndFRpbWUoKSB7CiAgICAgICAgcmV0dXJuIGNvbmYuZ2V0TG9uZyhTVUJTQ1JJ\nQkVfUkVDT05ORUNUX1JFVFJZX1dBSVRfVElNRSwgMTAwMDApOwogICAgfQoK\nICAgIC8vIFRoaXMgcGFyYW1ldGVyIGlzIGZvciBzZXR0aW5nIHRoZSBtYXhp\nbXVtIG51bWJlciBvZiBvdXRzdGFuZGluZyBtZXNzYWdlcwogICAgLy8gdGhl\nIGNsaWVudCBhcHAgY2FuIGJlIGNvbnN1bWluZyBhdCBhIHRpbWUgZm9yIHRv\ncGljIHN1YnNjcmlwdGlvbiBiZWZvcmUKICAgIC8vIHdlIHRocm90dGxlIHRo\naW5ncyBhbmQgc3RvcCByZWFkaW5nIGZyb20gdGhlIE5ldHR5IENoYW5uZWwu\nCiAgICBwdWJsaWMgaW50IGdldE1heGltdW1PdXRzdGFuZGluZ01lc3NhZ2Vz\nKCkgewogICAgICAgIHJldHVybiBjb25mLmdldEludChNQVhfT1VUU1RBTkRJ\nTkdfTUVTU0FHRVMsIDEwKTsKICAgIH0KCiAgICAvLyBUaGlzIHBhcmFtZXRl\nciBpcyB1c2VkIHRvIGRldGVybWluZSBob3cgbG9uZyB3ZSB3YWl0IChpbiBt\naWxsaXNlY29uZHMpCiAgICAvLyBiZWZvcmUgd2UgdGltZSBvdXQgb3V0c3Rh\nbmRpbmcgUHViU3ViUmVxdWVzdHMgdGhhdCB3ZXJlIHdyaXR0ZW4gdG8gdGhl\nCiAgICAvLyBzZXJ2ZXIgc3VjY2Vzc2Z1bGx5IGJ1dCBoYXZlbid0IHlldCBy\nZWNlaXZlZCB0aGUgYWNrIHJlc3BvbnNlLgogICAgcHVibGljIGxvbmcgZ2V0\nU2VydmVyQWNrUmVzcG9uc2VUaW1lb3V0KCkgewogICAgICAgIHJldHVybiBj\nb25mLmdldExvbmcoU0VSVkVSX0FDS19SRVNQT05TRV9USU1FT1VULCAzMDAw\nMCk7CiAgICB9CgogICAgLy8gVGhpcyBwYXJhbWV0ZXIgaXMgdXNlZCB0byBk\nZXRlcm1pbmUgaG93IG9mdGVuIHdlIHJ1biB0aGUgc2VydmVyIGFjawogICAg\nLy8gcmVzcG9uc2UgdGltZW91dCBjbGVhbmVyIHRocmVhZCAoaW4gbWlsbGlz\nZWNvbmRzKS4KICAgIHB1YmxpYyBsb25nIGdldFRpbWVvdXRUaHJlYWRSdW5J\nbnRlcnZhbCgpIHsKICAgICAgICByZXR1cm4gY29uZi5nZXRMb25nKFRJTUVP\nVVRfVEhSRUFEX1JVTl9JTlRFUlZBTCwgNjAwMDApOwogICAgfQoKICAgIC8v\nIFRoaXMgcGFyYW1ldGVyIGlzIGEgYm9vbGVhbiBmbGFnIGluZGljYXRpbmcg\naWYgY29tbXVuaWNhdGlvbiB3aXRoIHRoZQogICAgLy8gc2VydmVyIHNob3Vs\nZCBiZSBkb25lIHZpYSBTU0wgZm9yIGVuY3J5cHRpb24uIFRoaXMgaXMgbmVl\nZGVkIGZvcgogICAgLy8gY3Jvc3MtY29sbyBodWIgY2xpZW50cyBsaXN0ZW5p\nbmcgdG8gbm9uLWxvY2FsIHNlcnZlcnMuCiAgICBwdWJsaWMgYm9vbGVhbiBp\nc1NTTEVuYWJsZWQoKSB7CiAgICAgICAgcmV0dXJuIGNvbmYuZ2V0Qm9vbGVh\nbihTU0xfRU5BQkxFRCwgZmFsc2UpOwogICAgfQoKICAgIC8vIFZhbGlkYXRl\nIHRoYXQgdGhlIGNvbmZpZ3VyYXRpb24gcHJvcGVydGllcyBhcmUgdmFsaWQu\nCiAgICBwdWJsaWMgdm9pZCB2YWxpZGF0ZSgpIHRocm93cyBDb25maWd1cmF0\naW9uRXhjZXB0aW9uIHsKICAgICAgICBpZiAoaXNTU0xFbmFibGVkKCkgJiYg\nZ2V0RGVmYXVsdFNlcnZlckhlZHdpZ1NvY2tldEFkZHJlc3MoKS5nZXRTU0xT\nb2NrZXRBZGRyZXNzKCkgPT0gbnVsbCkgewogICAgICAgICAgICB0aHJvdyBu\nZXcgQ29uZmlndXJhdGlvbkV4Y2VwdGlvbigiU1NMIGlzIGVuYWJsZWQgYnV0\nIGEgZGVmYXVsdCBzZXJ2ZXIgU1NMIHBvcnQgbm90IGdpdmVuISIpOwogICAg\nICAgIH0KICAgICAgICAvLyBBZGQgb3RoZXIgdmFsaWRhdGlvbiBjaGVja3Mg\naGVyZQogICAgfQoKfQo=\n","encoding":"base64"}

