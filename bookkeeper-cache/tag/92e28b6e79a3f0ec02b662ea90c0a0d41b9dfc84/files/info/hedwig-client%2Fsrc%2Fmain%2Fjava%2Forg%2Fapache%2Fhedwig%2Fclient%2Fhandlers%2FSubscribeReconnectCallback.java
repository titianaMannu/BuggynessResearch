{"sha":"010baa38fce9ec15d1b34c8d5482144a6e6abf20","node_id":"MDQ6QmxvYjE1NzU5NTY6MDEwYmFhMzhmY2U5ZWMxNWQxYjM0YzhkNTQ4MjE0NGE2ZTZhYmYyMA==","size":5061,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/010baa38fce9ec15d1b34c8d5482144a6e6abf20","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQuaGFuZGxlcnM7CgppbXBv\ncnQgamF2YS51dGlsLlRpbWVyVGFzazsKCmltcG9ydCBvcmcuc2xmNGouTG9n\nZ2VyOwppbXBvcnQgb3JnLnNsZjRqLkxvZ2dlckZhY3Rvcnk7CgppbXBvcnQg\nb3JnLmFwYWNoZS5oZWR3aWcuY2xpZW50LmFwaS5NZXNzYWdlSGFuZGxlcjsK\naW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmNsaWVudC5jb25mLkNsaWVudENv\nbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQu\nZGF0YS5QdWJTdWJEYXRhOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuY2xp\nZW50Lm5ldHR5LkhlZHdpZ0NsaWVudEltcGw7CmltcG9ydCBvcmcuYXBhY2hl\nLmhlZHdpZy5jbGllbnQubmV0dHkuSGVkd2lnU3Vic2NyaWJlcjsKaW1wb3J0\nIG9yZy5hcGFjaGUuaGVkd2lnLmV4Y2VwdGlvbnMuUHViU3ViRXhjZXB0aW9u\nOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuZXhjZXB0aW9ucy5QdWJTdWJF\neGNlcHRpb24uQ2xpZW50Tm90U3Vic2NyaWJlZEV4Y2VwdGlvbjsKaW1wb3J0\nIG9yZy5hcGFjaGUuaGVkd2lnLnV0aWwuQ2FsbGJhY2s7CgovKioKICogVGhp\ncyBjbGFzcyBpcyB1c2VkIHdoZW4gYSBTdWJzY3JpYmUgY2hhbm5lbCBnZXRz\nIGRpc2Nvbm5lY3RlZCBhbmQgd2UgYXR0ZW1wdAogKiB0byByZS1lc3RhYmxp\nc2ggdGhlIGNvbm5lY3Rpb24uIE9uY2UgdGhlIGNvbm5lY3Rpb24gdG8gdGhl\nIHNlcnZlciBob3N0IGZvcgogKiB0aGUgdG9waWMgaXMgY29tcGxldGVkLCB3\nZSBuZWVkIHRvIHJlc3RhcnQgZGVsaXZlcnkgZm9yIHRoYXQgdG9waWMgaWYg\ndGhhdAogKiB3YXMgdGhlIGNhc2UgYmVmb3JlIHRoZSBvcmlnaW5hbCBjaGFu\nbmVsIGdvdCBkaXNjb25uZWN0ZWQuIFRoaXMgYXN5bmMKICogY2FsbGJhY2sg\nd2lsbCBiZSB0aGUgaG9vayBmb3IgdGhpcy4KICoKICovCnB1YmxpYyBjbGFz\ncyBTdWJzY3JpYmVSZWNvbm5lY3RDYWxsYmFjayBpbXBsZW1lbnRzIENhbGxi\nYWNrPFZvaWQ+IHsKCiAgICBwcml2YXRlIHN0YXRpYyBMb2dnZXIgbG9nZ2Vy\nID0gTG9nZ2VyRmFjdG9yeS5nZXRMb2dnZXIoU3Vic2NyaWJlUmVjb25uZWN0\nQ2FsbGJhY2suY2xhc3MpOwoKICAgIC8vIFByaXZhdGUgbWVtYmVyIHZhcmlh\nYmxlcwogICAgcHJpdmF0ZSBmaW5hbCBQdWJTdWJEYXRhIG9yaWdTdWJEYXRh\nOwogICAgcHJpdmF0ZSBmaW5hbCBIZWR3aWdDbGllbnRJbXBsIGNsaWVudDsK\nICAgIHByaXZhdGUgZmluYWwgSGVkd2lnU3Vic2NyaWJlciBzdWI7CiAgICBw\ncml2YXRlIGZpbmFsIENsaWVudENvbmZpZ3VyYXRpb24gY2ZnOwogICAgcHJp\ndmF0ZSBmaW5hbCBNZXNzYWdlSGFuZGxlciBtZXNzYWdlSGFuZGxlcjsKCiAg\nICAvLyBDb25zdHJ1Y3RvcgogICAgcHVibGljIFN1YnNjcmliZVJlY29ubmVj\ndENhbGxiYWNrKFB1YlN1YkRhdGEgb3JpZ1N1YkRhdGEsIEhlZHdpZ0NsaWVu\ndEltcGwgY2xpZW50LCBNZXNzYWdlSGFuZGxlciBtZXNzYWdlSGFuZGxlcikg\newogICAgICAgIHRoaXMub3JpZ1N1YkRhdGEgPSBvcmlnU3ViRGF0YTsKICAg\nICAgICB0aGlzLmNsaWVudCA9IGNsaWVudDsKICAgICAgICB0aGlzLnN1YiA9\nIGNsaWVudC5nZXRTdWJzY3JpYmVyKCk7CiAgICAgICAgdGhpcy5jZmcgPSBj\nbGllbnQuZ2V0Q29uZmlndXJhdGlvbigpOwogICAgICAgIHRoaXMubWVzc2Fn\nZUhhbmRsZXIgPSBtZXNzYWdlSGFuZGxlcjsKICAgIH0KCiAgICBjbGFzcyBT\ndWJzY3JpYmVSZWNvbm5lY3RSZXRyeVRhc2sgZXh0ZW5kcyBUaW1lclRhc2sg\newogICAgICAgIEBPdmVycmlkZQogICAgICAgIHB1YmxpYyB2b2lkIHJ1bigp\nIHsKICAgICAgICAgICAgaWYgKGxvZ2dlci5pc0RlYnVnRW5hYmxlZCgpKQog\nICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCJSZXRyeWluZyBzdWJzY3Jp\nYmUgcmVjb25uZWN0IHJlcXVlc3QgZm9yIG9yaWdTdWJEYXRhOiAiICsgb3Jp\nZ1N1YkRhdGEpOwogICAgICAgICAgICAvLyBDbGVhciBvdXQgYWxsIG9mIHRo\nZSBzZXJ2ZXJzIHdlJ3ZlIGNvbnRhY3RlZCBvciBhdHRlbXB0ZWQgdG8gZnJv\nbQogICAgICAgICAgICAvLyB0aGlzIHJlcXVlc3QuCiAgICAgICAgICAgIG9y\naWdTdWJEYXRhLmNsZWFyU2VydmVyc0xpc3QoKTsKICAgICAgICAgICAgY2xp\nZW50LmRvQ29ubmVjdChvcmlnU3ViRGF0YSwgY2ZnLmdldERlZmF1bHRTZXJ2\nZXJIb3N0KCkpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCBv\ncGVyYXRpb25GaW5pc2hlZChPYmplY3QgY3R4LCBWb2lkIHJlc3VsdE9mT3Bl\ncmF0aW9uKSB7CiAgICAgICAgaWYgKGxvZ2dlci5pc0RlYnVnRW5hYmxlZCgp\nKQogICAgICAgICAgICBsb2dnZXIuZGVidWcoIlN1YnNjcmliZSByZWNvbm5l\nY3Qgc3VjY2VlZGVkIGZvciBvcmlnU3ViRGF0YTogIiArIG9yaWdTdWJEYXRh\nKTsKICAgICAgICAvLyBOb3cgd2Ugd2FudCB0byByZXN0YXJ0IGRlbGl2ZXJ5\nIGZvciB0aGUgc3Vic2NyaXB0aW9uIGNoYW5uZWwgb25seQogICAgICAgIC8v\nIGlmIGRlbGl2ZXJ5IHdhcyBzdGFydGVkIGF0IHRoZSB0aW1lIHRoZSBvcmln\naW5hbCBzdWJzY3JpYmUgY2hhbm5lbAogICAgICAgIC8vIHdhcyBkaXNjb25u\nZWN0ZWQuCiAgICAgICAgaWYgKG1lc3NhZ2VIYW5kbGVyICE9IG51bGwpIHsK\nICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHN1Yi5zdGFydERl\nbGl2ZXJ5KG9yaWdTdWJEYXRhLnRvcGljLCBvcmlnU3ViRGF0YS5zdWJzY3Jp\nYmVySWQsIG1lc3NhZ2VIYW5kbGVyKTsKICAgICAgICAgICAgfSBjYXRjaCAo\nQ2xpZW50Tm90U3Vic2NyaWJlZEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAg\nICAgICAvLyBUaGlzIGV4Y2VwdGlvbiBzaG91bGQgbmV2ZXIgYmUgdGhyb3du\nIGhlcmUgYnV0IGp1c3QgaW4gY2FzZSwKICAgICAgICAgICAgICAgIC8vIGxv\nZyBhbiBlcnJvciBhbmQganVzdCBrZWVwIHJldHJ5aW5nIHRoZSBzdWJzY3Jp\nYmUgcmVxdWVzdC4KICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcigiU3Vi\nc2NyaWJlIHdhcyBzdWNjZXNzZnVsIGJ1dCBlcnJvciBzdGFydGluZyBkZWxp\ndmVyeSBmb3IgdG9waWM6ICIKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICArIG9yaWdTdWJEYXRhLnRvcGljLnRvU3RyaW5nVXRmOCgpICsgIiwgc3Vi\nc2NyaWJlcklkOiAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBv\ncmlnU3ViRGF0YS5zdWJzY3JpYmVySWQudG9TdHJpbmdVdGY4KCksIGUpOwog\nICAgICAgICAgICAgICAgcmV0cnlTdWJzY3JpYmVSZXF1ZXN0KCk7CiAgICAg\nICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZvaWQgb3Bl\ncmF0aW9uRmFpbGVkKE9iamVjdCBjdHgsIFB1YlN1YkV4Y2VwdGlvbiBleGNl\ncHRpb24pIHsKICAgICAgICAvLyBJZiB0aGUgc3Vic2NyaWJlIHJlY29ubmVj\ndCBmYWlscywganVzdCBrZWVwIHJldHJ5aW5nIHRoZSBzdWJzY3JpYmUKICAg\nICAgICAvLyByZXF1ZXN0LiBUaGVyZSBpc24ndCBhIHdheSB0byBmbGFnIHRv\nIHRoZSBhcHBsaWNhdGlvbiBsYXllciB0aGF0CiAgICAgICAgLy8gYSB0b3Bp\nYyBzdWJzY3JpcHRpb24gaGFzIGZhaWxlZC4gU28gaW5zdGVhZCwgd2UnbGwg\nanVzdCBrZWVwCiAgICAgICAgLy8gcmV0cnlpbmcgaW4gdGhlIGJhY2tncm91\nbmQgdW50aWwgc3VjY2Vzcy4KICAgICAgICBsb2dnZXIuZXJyb3IoIlN1YnNj\ncmliZSByZWNvbm5lY3QgZmFpbGVkIHdpdGggZXJyb3I6ICIgKyBleGNlcHRp\nb24uZ2V0TWVzc2FnZSgpKTsKICAgICAgICByZXRyeVN1YnNjcmliZVJlcXVl\nc3QoKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgcmV0cnlTdWJzY3JpYmVS\nZXF1ZXN0KCkgewogICAgICAgIC8vIElmIHRoZSBjbGllbnQgaGFzIHN0b3Bw\nZWQsIHRoZXJlIGlzIG5vIG5lZWQgdG8gcHJvY2VlZCB3aXRoIGFueQogICAg\nICAgIC8vIGNhbGxiYWNrIGxvZ2ljIGhlcmUuCiAgICAgICAgaWYgKGNsaWVu\ndC5oYXNTdG9wcGVkKCkpCiAgICAgICAgICAgIHJldHVybjsKCiAgICAgICAg\nLy8gUmV0cnkgdGhlIHN1YnNjcmliZSByZXF1ZXN0IGJ1dCBvbmx5IGFmdGVy\nIHdhaXRpbmcgZm9yIGEKICAgICAgICAvLyBwcmVjb25maWd1cmVkIGFtb3Vu\ndCBvZiB0aW1lLgogICAgICAgIGNsaWVudC5nZXRDbGllbnRUaW1lcigpLnNj\naGVkdWxlKG5ldyBTdWJzY3JpYmVSZWNvbm5lY3RSZXRyeVRhc2soKSwKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGllbnQu\nZ2V0Q29uZmlndXJhdGlvbigpLmdldFN1YnNjcmliZVJlY29ubmVjdFJldHJ5\nV2FpdFRpbWUoKSk7CiAgICB9Cn0K\n","encoding":"base64"}

