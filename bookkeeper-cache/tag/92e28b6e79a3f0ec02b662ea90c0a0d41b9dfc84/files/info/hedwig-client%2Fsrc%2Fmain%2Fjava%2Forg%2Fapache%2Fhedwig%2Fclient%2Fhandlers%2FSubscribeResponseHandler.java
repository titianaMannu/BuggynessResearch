{"sha":"c17ffcbb18d58adca15c4e13182056f1813ca8ea","node_id":"MDQ6QmxvYjE1NzU5NTY6YzE3ZmZjYmIxOGQ1OGFkY2ExNWM0ZTEzMTgyMDU2ZjE4MTNjYThlYQ==","size":18249,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/c17ffcbb18d58adca15c4e13182056f1813ca8ea","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQuaGFuZGxlcnM7CgppbXBv\ncnQgamF2YS51dGlsLkNvbGxlY3Rpb25zOwppbXBvcnQgamF2YS51dGlsLmNv\nbmN1cnJlbnQuQ29uY3VycmVudEhhc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwu\nTGlua2VkTGlzdDsKaW1wb3J0IGphdmEudXRpbC5RdWV1ZTsKaW1wb3J0IGph\ndmEudXRpbC5TZXQ7CgppbXBvcnQgb3JnLnNsZjRqLkxvZ2dlcjsKaW1wb3J0\nIG9yZy5zbGY0ai5Mb2dnZXJGYWN0b3J5OwppbXBvcnQgb3JnLmpib3NzLm5l\ndHR5LmNoYW5uZWwuQ2hhbm5lbDsKCmltcG9ydCBvcmcuYXBhY2hlLmhlZHdp\nZy5jbGllbnQuYXBpLk1lc3NhZ2VIYW5kbGVyOwppbXBvcnQgb3JnLmFwYWNo\nZS5oZWR3aWcuY2xpZW50LmRhdGEuTWVzc2FnZUNvbnN1bWVEYXRhOwppbXBv\ncnQgb3JnLmFwYWNoZS5oZWR3aWcuY2xpZW50LmRhdGEuUHViU3ViRGF0YTsK\naW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmNsaWVudC5kYXRhLlRvcGljU3Vi\nc2NyaWJlcjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmNsaWVudC5uZXR0\neS5IZWR3aWdDbGllbnRJbXBsOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcu\nY2xpZW50Lm5ldHR5LlJlc3BvbnNlSGFuZGxlcjsKaW1wb3J0IG9yZy5hcGFj\naGUuaGVkd2lnLmV4Y2VwdGlvbnMuUHViU3ViRXhjZXB0aW9uLkNsaWVudEFs\ncmVhZHlTdWJzY3JpYmVkRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5o\nZWR3aWcuZXhjZXB0aW9ucy5QdWJTdWJFeGNlcHRpb24uU2VydmljZURvd25F\neGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5Q\ndWJTdWJQcm90b2NvbC5NZXNzYWdlOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3\naWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2wuTWVzc2FnZVNlcUlkOwppbXBv\ncnQgb3JnLmFwYWNoZS5oZWR3aWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2wu\nUHViU3ViUmVzcG9uc2U7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90\nb2NvbC5QdWJTdWJQcm90b2NvbC5TdGF0dXNDb2RlOwoKcHVibGljIGNsYXNz\nIFN1YnNjcmliZVJlc3BvbnNlSGFuZGxlciB7CgogICAgcHJpdmF0ZSBzdGF0\naWMgTG9nZ2VyIGxvZ2dlciA9IExvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKFN1\nYnNjcmliZVJlc3BvbnNlSGFuZGxlci5jbGFzcyk7CgogICAgcHJpdmF0ZSBm\naW5hbCBSZXNwb25zZUhhbmRsZXIgcmVzcG9uc2VIYW5kbGVyOwoKICAgIC8v\nIE1lbWJlciB2YXJpYWJsZXMgdXNlZCB3aGVuIHRoaXMgUmVzcG9uc2VIYW5k\nbGVyIGlzIGZvciBhIFN1YnNjcmliZQogICAgLy8gY2hhbm5lbC4gV2UgbmVl\nZCB0byBiZSBhYmxlIHRvIGNvbnN1bWUgbWVzc2FnZXMgc2VudCBiYWNrIHRv\nIHVzIGZyb20KICAgIC8vIHRoZSBzZXJ2ZXIsIGFuZCB0byBhbHNvIHJlY3Jl\nYXRlIHRoZSBDaGFubmVsIGNvbm5lY3Rpb24gaWYgaXQgZXZlciBnb2VzCiAg\nICAvLyBkb3duLiBGb3IgdGhhdCwgd2UgbmVlZCB0byBzdG9yZSB0aGUgb3Jp\nZ2luYWwgUHViU3ViRGF0YSBmb3IgdGhlCiAgICAvLyBzdWJzY3JpYmUgcmVx\ndWVzdCwgYW5kIGFsc28gdGhlIE1lc3NhZ2VIYW5kbGVyIHRoYXQgd2FzIHJl\nZ2lzdGVyZWQgd2hlbgogICAgLy8gZGVsaXZlcnkgb2YgbWVzc2FnZXMgc3Rh\ncnRlZCBmb3IgdGhlIHN1YnNjcmlwdGlvbi4KICAgIHByaXZhdGUgUHViU3Vi\nRGF0YSBvcmlnU3ViRGF0YTsKICAgIHByaXZhdGUgQ2hhbm5lbCBzdWJzY3Jp\nYmVDaGFubmVsOwogICAgcHJpdmF0ZSBNZXNzYWdlSGFuZGxlciBtZXNzYWdl\nSGFuZGxlcjsKICAgIC8vIENvdW50ZXIgZm9yIHRoZSBudW1iZXIgb2YgY29u\nc3VtZWQgbWVzc2FnZXMgc28gZmFyIHRvIGJ1ZmZlciB1cCBiZWZvcmUgd2UK\nICAgIC8vIHNlbmQgdGhlIENvbnN1bWUgbWVzc2FnZSBiYWNrIHRvIHRoZSBz\nZXJ2ZXIgYWxvbmcgd2l0aCB0aGUgbGFzdC9sYXJnZXN0CiAgICAvLyBtZXNz\nYWdlIHNlcSBJRCBzZWVuIHNvIGZhciBpbiB0aGF0IGJhdGNoLgogICAgcHJp\ndmF0ZSBpbnQgbnVtQ29uc3VtZWRNZXNzYWdlc0luQnVmZmVyID0gMDsKICAg\nIHByaXZhdGUgTWVzc2FnZVNlcUlkIGxhc3RNZXNzYWdlU2VxSWQ7CiAgICAv\nLyBRdWV1ZSB1c2VkIGZvciBzdWJzY3JpYmVzIHdoZW4gdGhlIE1lc3NhZ2VI\nYW5kbGVyIGhhc24ndCBiZWVuIHJlZ2lzdGVyZWQKICAgIC8vIHlldCBidXQg\nd2UndmUgYWxyZWFkeSByZWNlaXZlZCBzdWJzY3JpcHRpb24gbWVzc2FnZXMg\nZnJvbSB0aGUgc2VydmVyLgogICAgLy8gVGhpcyB3aWxsIGJlIGxhemlseSBj\ncmVhdGVkIGFzIG5lZWRlZC4KICAgIHByaXZhdGUgUXVldWU8TWVzc2FnZT4g\nc3Vic2NyaWJlTXNnUXVldWU7CiAgICAvLyBTZXQgdG8gc3RvcmUgYWxsIG9m\nIHRoZSBvdXRzdGFuZGluZyBzdWJzY3JpYmVkIG1lc3NhZ2VzIHRoYXQgYXJl\nIHBlbmRpbmcKICAgIC8vIHRvIGJlIGNvbnN1bWVkIGJ5IHRoZSBjbGllbnQg\nYXBwJ3MgTWVzc2FnZUhhbmRsZXIuIElmIHRoaXMgZXZlciBncm93cyB0b28K\nICAgIC8vIGJpZyAoZS5nLiBwcm9ibGVtIGF0IHRoZSBjbGllbnQgZW5kIGZv\nciBtZXNzYWdlIGNvbnN1bXB0aW9uKSwgd2UgY2FuCiAgICAvLyB0aHJvdHRs\nZSB0aGluZ3MgYnkgdGVtcG9yYXJpbHkgc2V0dGluZyB0aGUgU3Vic2NyaWJl\nIE5ldHR5IENoYW5uZWwKICAgIC8vIHRvIG5vdCBiZSByZWFkYWJsZS4gV2hl\nbiB0aGUgU2V0IGhhcyBzaHJ1bmsgc3VmZmljaWVudGx5LCB3ZSBjYW4gdHVy\nbiB0aGUKICAgIC8vIGNoYW5uZWwgYmFjayBvbiB0byByZWFkIG5ldyBtZXNz\nYWdlcy4KICAgIHByaXZhdGUgU2V0PE1lc3NhZ2U+IG91dHN0YW5kaW5nTXNn\nU2V0OwoKICAgIHB1YmxpYyBTdWJzY3JpYmVSZXNwb25zZUhhbmRsZXIoUmVz\ncG9uc2VIYW5kbGVyIHJlc3BvbnNlSGFuZGxlcikgewogICAgICAgIHRoaXMu\ncmVzcG9uc2VIYW5kbGVyID0gcmVzcG9uc2VIYW5kbGVyOwogICAgfQoKICAg\nIC8vIFB1YmxpYyBnZXR0ZXIgdG8gcmV0cmlldmUgdGhlIG9yaWdpbmFsIFB1\nYlN1YkRhdGEgdXNlZCBmb3IgdGhlIFN1YnNjcmliZQogICAgLy8gcmVxdWVz\ndC4KICAgIHB1YmxpYyBQdWJTdWJEYXRhIGdldE9yaWdTdWJEYXRhKCkgewog\nICAgICAgIHJldHVybiBvcmlnU3ViRGF0YTsKICAgIH0KCiAgICAvLyBNYWlu\nIG1ldGhvZCB0byBoYW5kbGUgU3Vic2NyaWJlIHJlc3BvbnNlcyBmcm9tIHRo\nZSBzZXJ2ZXIgdGhhdCB3ZSBzZW50CiAgICAvLyBhIFN1YnNjcmliZSBSZXF1\nZXN0IHRvLgogICAgcHVibGljIHZvaWQgaGFuZGxlU3Vic2NyaWJlUmVzcG9u\nc2UoUHViU3ViUmVzcG9uc2UgcmVzcG9uc2UsIFB1YlN1YkRhdGEgcHViU3Vi\nRGF0YSwgQ2hhbm5lbCBjaGFubmVsKQogICAgICAgICAgICB0aHJvd3MgRXhj\nZXB0aW9uIHsKICAgICAgICAvLyBJZiB0aGlzIHdhcyBub3QgYSBzdWNjZXNz\nZnVsIHJlc3BvbnNlIHRvIHRoZSBTdWJzY3JpYmUgcmVxdWVzdCwgd2UKICAg\nICAgICAvLyB3b24ndCBiZSB1c2luZyB0aGUgTmV0dHkgQ2hhbm5lbCBjcmVh\ndGVkIHNvIGp1c3QgY2xvc2UgaXQuCiAgICAgICAgaWYgKCFyZXNwb25zZS5n\nZXRTdGF0dXNDb2RlKCkuZXF1YWxzKFN0YXR1c0NvZGUuU1VDQ0VTUykpIHsK\nICAgICAgICAgICAgSGVkd2lnQ2xpZW50SW1wbC5nZXRSZXNwb25zZUhhbmRs\nZXJGcm9tQ2hhbm5lbChjaGFubmVsKS5jaGFubmVsQ2xvc2VkRXhwbGljaXRs\neSA9IHRydWU7CiAgICAgICAgICAgIGNoYW5uZWwuY2xvc2UoKTsKICAgICAg\nICB9CgogICAgICAgIGlmIChsb2dnZXIuaXNEZWJ1Z0VuYWJsZWQoKSkKICAg\nICAgICAgICAgbG9nZ2VyLmRlYnVnKCJIYW5kbGluZyBhIFN1YnNjcmliZSBy\nZXNwb25zZTogIiArIHJlc3BvbnNlICsgIiwgcHViU3ViRGF0YTogIiArIHB1\nYlN1YkRhdGEgKyAiLCBob3N0OiAiCiAgICAgICAgICAgICAgICAgICAgICAg\nICArIEhlZHdpZ0NsaWVudEltcGwuZ2V0SG9zdEZyb21DaGFubmVsKGNoYW5u\nZWwpKTsKICAgICAgICBzd2l0Y2ggKHJlc3BvbnNlLmdldFN0YXR1c0NvZGUo\nKSkgewogICAgICAgIGNhc2UgU1VDQ0VTUzoKICAgICAgICAgICAgLy8gRm9y\nIHN1Y2Nlc3NmdWwgU3Vic2NyaWJlIHJlcXVlc3RzLCBzdG9yZSB0aGlzIENo\nYW5uZWwgbG9jYWxseQogICAgICAgICAgICAvLyBhbmQgc2V0IGl0IHRvIG5v\ndCBiZSByZWFkYWJsZSBpbml0aWFsbHkuCiAgICAgICAgICAgIC8vIFRoaXMg\nd2F5IHdlIHdvbid0IGJlIGRlbGl2ZXJpbmcgbWVzc2FnZXMgZm9yIHRoaXMg\ndG9waWMKICAgICAgICAgICAgLy8gc3Vic2NyaXB0aW9uIHVudGlsIHRoZSBj\nbGllbnQgZXhwbGljaXRseSBzYXlzIHNvLgogICAgICAgICAgICBzdWJzY3Jp\nYmVDaGFubmVsID0gY2hhbm5lbDsKICAgICAgICAgICAgc3Vic2NyaWJlQ2hh\nbm5lbC5zZXRSZWFkYWJsZShmYWxzZSk7CiAgICAgICAgICAgIC8vIFN0b3Jl\nIHRoZSBvcmlnaW5hbCBQdWJTdWJEYXRhIHVzZWQgdG8gY3JlYXRlIHRoaXMg\nc3VjY2Vzc2Z1bAogICAgICAgICAgICAvLyBTdWJzY3JpYmUgcmVxdWVzdC4K\nICAgICAgICAgICAgb3JpZ1N1YkRhdGEgPSBwdWJTdWJEYXRhOwogICAgICAg\nICAgICAvLyBTdG9yZSB0aGUgbWFwcGluZyBmb3IgdGhlIFRvcGljU3Vic2Ny\naWJlciB0byB0aGUgQ2hhbm5lbC4KICAgICAgICAgICAgLy8gVGhpcyBpcyBz\nbyB3ZSBjYW4gY29udHJvbCB0aGUgc3RhcnRpbmcgYW5kIHN0b3BwaW5nIG9m\nCiAgICAgICAgICAgIC8vIG1lc3NhZ2UgZGVsaXZlcmllcyBmcm9tIHRoZSBz\nZXJ2ZXIgb24gdGhhdCBDaGFubmVsLiBTdG9yZQogICAgICAgICAgICAvLyB0\naGlzIG9ubHkgb24gYSBzdWNjZXNzZnVsIGFjayByZXNwb25zZSBmcm9tIHRo\nZSBzZXJ2ZXIuCiAgICAgICAgICAgIFRvcGljU3Vic2NyaWJlciB0b3BpY1N1\nYnNjcmliZXIgPSBuZXcgVG9waWNTdWJzY3JpYmVyKHB1YlN1YkRhdGEudG9w\naWMsIHB1YlN1YkRhdGEuc3Vic2NyaWJlcklkKTsKICAgICAgICAgICAgcmVz\ncG9uc2VIYW5kbGVyLmdldFN1YnNjcmliZXIoKS5zZXRDaGFubmVsRm9yVG9w\naWModG9waWNTdWJzY3JpYmVyLCBjaGFubmVsKTsKICAgICAgICAgICAgLy8g\nTGF6aWx5IGNyZWF0ZSB0aGUgU2V0IChmcm9tIGEgY29uY3VycmVudCBoYXNo\nbWFwKSB0byBrZWVwIHRyYWNrCiAgICAgICAgICAgIC8vIG9mIG91dHN0YW5k\naW5nIE1lc3NhZ2VzIHRvIGJlIGNvbnN1bWVkIGJ5IHRoZSBjbGllbnQgYXBw\nLiBBdCB0aGlzCiAgICAgICAgICAgIC8vIHN0YWdlLCBkZWxpdmVyeSBmb3Ig\ndGhhdCB0b3BpYyBoYXNuJ3Qgc3RhcnRlZCB5ZXQgc28gY3JlYXRpb24gb2Yg\nCiAgICAgICAgICAgIC8vIHRoaXMgU2V0IHNob3VsZCBiZSB0aHJlYWQgc2Fm\nZS4gV2UnbGwgY3JlYXRlIHRoZSBTZXQgd2l0aCBhbiBpbml0aWFsCiAgICAg\nICAgICAgIC8vIGNhcGFjaXR5IGVxdWFsIHRvIHRoZSBjb25maWd1cmVkIHBh\ncmFtZXRlciBmb3IgdGhlIG1heGltdW0gbnVtYmVyIG9mCiAgICAgICAgICAg\nIC8vIG91dHN0YW5kaW5nIG1lc3NhZ2VzIHRvIGFsbG93LiBUaGUgbG9hZCBm\nYWN0b3Igd2lsbCBiZSBzZXQgdG8KICAgICAgICAgICAgLy8gMS4wZiB3aGlj\naCBtZWFucyB3ZSdsbCBvbmx5IHJlaGFzaCBhbmQgYWxsb2NhdGUgbW9yZSBz\ncGFjZSBpZgogICAgICAgICAgICAvLyB3ZSBldmVyIGV4Y2VlZCB0aGUgaW5p\ndGlhbCBjYXBhY2l0eS4gVGhhdCBzaG91bGQgYmUgb2theQogICAgICAgICAg\nICAvLyBiZWNhdXNlIHdoZW4gdGhhdCBoYXBwZW5zLCB0aGluZ3MgYXJlIHNs\nb3cgYWxyZWFkeSBhbmQgcGlsaW5nCiAgICAgICAgICAgIC8vIHVwIG9uIHRo\nZSBjbGllbnQgYXBwIHNpZGUgdG8gY29uc3VtZSBtZXNzYWdlcy4KICAgICAg\nICAgICAgCiAgICAgICAgICAgIG91dHN0YW5kaW5nTXNnU2V0ID0gQ29sbGVj\ndGlvbnMubmV3U2V0RnJvbU1hcChuZXcgQ29uY3VycmVudEhhc2hNYXA8TWVz\nc2FnZSxCb29sZWFuPigKICAgICAgICAgICAgICAgIHJlc3BvbnNlSGFuZGxl\nci5nZXRDb25maWd1cmF0aW9uKCkuZ2V0TWF4aW11bU91dHN0YW5kaW5nTWVz\nc2FnZXMoKSwgMS4wZikpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8g\nUmVzcG9uc2Ugd2FzIHN1Y2Nlc3Mgc28gaW52b2tlIHRoZSBjYWxsYmFjaydz\nIG9wZXJhdGlvbkZpbmlzaGVkCiAgICAgICAgICAgIC8vIG1ldGhvZC4KICAg\nICAgICAgICAgcHViU3ViRGF0YS5jYWxsYmFjay5vcGVyYXRpb25GaW5pc2hl\nZChwdWJTdWJEYXRhLmNvbnRleHQsIG51bGwpOwogICAgICAgICAgICBicmVh\nazsKICAgICAgICBjYXNlIENMSUVOVF9BTFJFQURZX1NVQlNDUklCRUQ6CiAg\nICAgICAgICAgIC8vIEZvciBTdWJzY3JpYmUgcmVxdWVzdHMsIHRoZSBzZXJ2\nZXIgc2F5cyB0aGF0IHRoZSBjbGllbnQgaXMKICAgICAgICAgICAgLy8gYWxy\nZWFkeSBzdWJzY3JpYmVkIHRvIGl0LgogICAgICAgICAgICBwdWJTdWJEYXRh\nLmNhbGxiYWNrLm9wZXJhdGlvbkZhaWxlZChwdWJTdWJEYXRhLmNvbnRleHQs\nIG5ldyBDbGllbnRBbHJlYWR5U3Vic2NyaWJlZEV4Y2VwdGlvbigKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICJDbGllbnQgaXMgYWxyZWFkeSBzdWJzY3JpYmVkIGZvciB0b3BpYzogIiAr\nIHB1YlN1YkRhdGEudG9waWMudG9TdHJpbmdVdGY4KCkgKyAiLCBzdWJzY3Jp\nYmVySWQ6ICIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICsgcHViU3ViRGF0YS5zdWJzY3JpYmVySWQudG9T\ndHJpbmdVdGY4KCkpKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2Fz\nZSBTRVJWSUNFX0RPV046CiAgICAgICAgICAgIC8vIFJlc3BvbnNlIHdhcyBz\nZXJ2aWNlIGRvd24gZmFpbHVyZSBzbyBqdXN0IGludm9rZSB0aGUgY2FsbGJh\nY2sncwogICAgICAgICAgICAvLyBvcGVyYXRpb25GYWlsZWQgbWV0aG9kLgog\nICAgICAgICAgICBwdWJTdWJEYXRhLmNhbGxiYWNrLm9wZXJhdGlvbkZhaWxl\nZChwdWJTdWJEYXRhLmNvbnRleHQsIG5ldyBTZXJ2aWNlRG93bkV4Y2VwdGlv\nbigKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICJTZXJ2ZXIgcmVzcG9uZGVkIHdpdGggYSBTRVJWSUNFX0RP\nV04gc3RhdHVzIikpOwogICAgICAgICAgICBicmVhazsKICAgICAgICBjYXNl\nIE5PVF9SRVNQT05TSUJMRV9GT1JfVE9QSUM6CiAgICAgICAgICAgIC8vIFJl\nZGlyZWN0IHJlc3BvbnNlIHNvIHdlJ2xsIG5lZWQgdG8gcmVwb3N0IHRoZSBv\ncmlnaW5hbCBTdWJzY3JpYmUKICAgICAgICAgICAgLy8gUmVxdWVzdAogICAg\nICAgICAgICByZXNwb25zZUhhbmRsZXIuaGFuZGxlUmVkaXJlY3RSZXNwb25z\nZShyZXNwb25zZSwgcHViU3ViRGF0YSwgY2hhbm5lbCk7CiAgICAgICAgICAg\nIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIC8vIENvbnNp\nZGVyIGFsbCBvdGhlciBzdGF0dXMgY29kZXMgYXMgZXJyb3JzLCBvcGVyYXRp\nb24gZmFpbGVkCiAgICAgICAgICAgIC8vIGNhc2VzLgogICAgICAgICAgICBs\nb2dnZXIuZXJyb3IoIlVuZXhwZWN0ZWQgZXJyb3IgcmVzcG9uc2UgZnJvbSBz\nZXJ2ZXIgZm9yIFB1YlN1YlJlc3BvbnNlOiAiICsgcmVzcG9uc2UpOwogICAg\nICAgICAgICBwdWJTdWJEYXRhLmNhbGxiYWNrLm9wZXJhdGlvbkZhaWxlZChw\ndWJTdWJEYXRhLmNvbnRleHQsIG5ldyBTZXJ2aWNlRG93bkV4Y2VwdGlvbigK\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICJTZXJ2ZXIgcmVzcG9uZGVkIHdpdGggYSBzdGF0dXMgY29kZSBv\nZjogIiArIHJlc3BvbnNlLmdldFN0YXR1c0NvZGUoKSkpOwogICAgICAgICAg\nICBicmVhazsKICAgICAgICB9CiAgICB9CgogICAgLy8gTWFpbiBtZXRob2Qg\ndG8gaGFuZGxlIGNvbnN1bWluZyBhIG1lc3NhZ2UgZm9yIGEgdG9waWMgdGhh\ndCB0aGUgY2xpZW50IGlzCiAgICAvLyBzdWJzY3JpYmVkIHRvLgogICAgcHVi\nbGljIHZvaWQgaGFuZGxlU3Vic2NyaWJlTWVzc2FnZShQdWJTdWJSZXNwb25z\nZSByZXNwb25zZSkgewogICAgICAgIGlmIChsb2dnZXIuaXNEZWJ1Z0VuYWJs\nZWQoKSkKICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCJIYW5kbGluZyBhIFN1\nYnNjcmliZSBtZXNzYWdlIGluIHJlc3BvbnNlOiAiICsgcmVzcG9uc2UgKyAi\nLCB0b3BpYzogIgogICAgICAgICAgICAgICAgICAgICAgICAgKyBvcmlnU3Vi\nRGF0YS50b3BpYy50b1N0cmluZ1V0ZjgoKSArICIsIHN1YnNjcmliZXJJZDog\nIiArIG9yaWdTdWJEYXRhLnN1YnNjcmliZXJJZC50b1N0cmluZ1V0ZjgoKSk7\nCiAgICAgICAgTWVzc2FnZSBtZXNzYWdlID0gcmVzcG9uc2UuZ2V0TWVzc2Fn\nZSgpOwoKICAgICAgICBzeW5jaHJvbml6ZWQgKHRoaXMpIHsKICAgICAgICAg\nICAgLy8gQ29uc3VtZSB0aGUgbWVzc2FnZSBhc3luY2hyb25vdXNseSB0aGF0\nIHRoZSBjbGllbnQgaXMgc3Vic2NyaWJlZAogICAgICAgICAgICAvLyB0by4g\nRG8gdGhpcyBvbmx5IGlmIGRlbGl2ZXJ5IGZvciB0aGUgc3Vic2NyaXB0aW9u\nIGhhcyBzdGFydGVkIGFuZAogICAgICAgICAgICAvLyBhIE1lc3NhZ2VIYW5k\nbGVyIGhhcyBiZWVuIHJlZ2lzdGVyZWQgZm9yIHRoZSBUb3BpY1N1YnNjcmli\nZXIuCiAgICAgICAgICAgIGlmIChtZXNzYWdlSGFuZGxlciAhPSBudWxsKSB7\nCiAgICAgICAgICAgICAgICBhc3luY01lc3NhZ2VDb25zdW1lKG1lc3NhZ2Up\nOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gTWVz\nc2FnZUhhbmRsZXIgaGFzIG5vdCB5ZXQgYmVlbiByZWdpc3RlcmVkIHNvIHF1\nZXVlIHVwIHRoZXNlCiAgICAgICAgICAgICAgICAvLyBtZXNzYWdlcyBmb3Ig\ndGhlIFRvcGljIFN1YnNjcmlwdGlvbi4gTWFrZSB0aGUgaW5pdGlhbCBsYXp5\nCiAgICAgICAgICAgICAgICAvLyBjcmVhdGlvbiBvZiB0aGUgbWVzc2FnZSBx\ndWV1ZSB0aHJlYWQgc2FmZSBqdXN0IHNvIHdlIGRvbid0CiAgICAgICAgICAg\nICAgICAvLyBydW4gaW50byBhIHJhY2UgY29uZGl0aW9uIHdoZXJlIHR3byBz\naW11bHRhbmVvdXMgdGhyZWFkcyBwcm9jZXNzCiAgICAgICAgICAgICAgICAv\nLyBhIHJlY2VpdmVkIG1lc3NhZ2UgYW5kIGJvdGggdHJ5IHRvIGNyZWF0ZSBh\nIG5ldyBpbnN0YW5jZSBvZgogICAgICAgICAgICAgICAgLy8gdGhlIG1lc3Nh\nZ2UgcXVldWUuIFBlcmZvcm1hbmNlIG92ZXJoZWFkIHNob3VsZCBiZSBva2F5\nCiAgICAgICAgICAgICAgICAvLyBiZWNhdXNlIHRoZSBkZWxpdmVyeSBvZiB0\naGUgdG9waWMgaGFzIG5vdCBldmVuIHN0YXJ0ZWQgeWV0CiAgICAgICAgICAg\nICAgICAvLyBzbyB0aGVzZSBtZXNzYWdlcyBhcmUgbm90IGNvbnN1bWVkIGFu\nZCBqdXN0IGJ1ZmZlcmVkIHVwIGhlcmUuCiAgICAgICAgICAgICAgICBpZiAo\nc3Vic2NyaWJlTXNnUXVldWUgPT0gbnVsbCkKICAgICAgICAgICAgICAgICAg\nICBzdWJzY3JpYmVNc2dRdWV1ZSA9IG5ldyBMaW5rZWRMaXN0PE1lc3NhZ2U+\nKCk7CiAgICAgICAgICAgICAgICBpZiAobG9nZ2VyLmlzRGVidWdFbmFibGVk\nKCkpCiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyCiAgICAgICAgICAgICAg\nICAgICAgLmRlYnVnKCJNZXNzYWdlIGhhcyBhcnJpdmVkIGJ1dCBTdWJzY3Jp\nYmUgY2hhbm5lbCBkb2VzIG5vdCBoYXZlIGEgcmVnaXN0ZXJlZCBNZXNzYWdl\nSGFuZGxlciB5ZXQgc28gcXVldWVpbmcgdXAgdGhlIG1lc3NhZ2U6ICIKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgKyBtZXNzYWdlKTsKICAgICAgICAg\nICAgICAgIHN1YnNjcmliZU1zZ1F1ZXVlLmFkZChtZXNzYWdlKTsKICAgICAg\nICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIE1ldGhv\nZCBjYWxsZWQgd2hlbiBhIG1lc3NhZ2UgYXJyaXZlcyBmb3IgYSBzdWJzY3Jp\nYmUgQ2hhbm5lbCBhbmQgd2Ugd2FudAogICAgICogdG8gY29uc3VtZSBpdCBh\nc3luY2hyb25vdXNseSB2aWEgdGhlIHJlZ2lzdGVyZWQgTWVzc2FnZUhhbmRs\nZXIgKHNob3VsZAogICAgICogbm90IGJlIG51bGwgd2hlbiBjYWxsZWQgaGVy\nZSkuCiAgICAgKgogICAgICogQHBhcmFtIG1lc3NhZ2UKICAgICAqICAgICAg\nICAgICAgTWVzc2FnZSBmcm9tIFN1YnNjcmliZSBDaGFubmVsIHdlIHdhbnQg\ndG8gY29uc3VtZS4KICAgICAqLwogICAgcHJvdGVjdGVkIHZvaWQgYXN5bmNN\nZXNzYWdlQ29uc3VtZShNZXNzYWdlIG1lc3NhZ2UpIHsKICAgICAgICBpZiAo\nbG9nZ2VyLmlzRGVidWdFbmFibGVkKCkpCiAgICAgICAgICAgIGxvZ2dlci5k\nZWJ1ZygiQ2FsbCB0aGUgY2xpZW50IGFwcCdzIE1lc3NhZ2VIYW5kbGVyIGFz\neW5jaHJvbm91c2x5IHRvIGNvbnN1bWUgdGhlIG1lc3NhZ2U6ICIgKyBtZXNz\nYWdlCiAgICAgICAgICAgICAgICAgICAgICAgICArICIsIHRvcGljOiAiICsg\nb3JpZ1N1YkRhdGEudG9waWMudG9TdHJpbmdVdGY4KCkgKyAiLCBzdWJzY3Jp\nYmVySWQ6ICIKICAgICAgICAgICAgICAgICAgICAgICAgICsgb3JpZ1N1YkRh\ndGEuc3Vic2NyaWJlcklkLnRvU3RyaW5nVXRmOCgpKTsKICAgICAgICAvLyBB\nZGQgdGhpcyAicGVuZGluZyB0byBiZSBjb25zdW1lZCIgbWVzc2FnZSB0byB0\naGUgb3V0c3RhbmRpbmdNc2dTZXQuCiAgICAgICAgb3V0c3RhbmRpbmdNc2dT\nZXQuYWRkKG1lc3NhZ2UpOwogICAgICAgIC8vIENoZWNrIGlmIHdlJ3ZlIGV4\nY2VlZGVkIHRoZSBtYXggc2l6ZSBmb3IgdGhlIG91dHN0YW5kaW5nIG1lc3Nh\nZ2Ugc2V0LgogICAgICAgIGlmIChvdXRzdGFuZGluZ01zZ1NldC5zaXplKCkg\nPj0gcmVzcG9uc2VIYW5kbGVyLmdldENvbmZpZ3VyYXRpb24oKS5nZXRNYXhp\nbXVtT3V0c3RhbmRpbmdNZXNzYWdlcygpCiAgICAgICAgICAgICAgICAmJiBz\ndWJzY3JpYmVDaGFubmVsLmlzUmVhZGFibGUoKSkgewogICAgICAgICAgICAv\nLyBUb28gbWFueSBvdXRzdGFuZGluZyBtZXNzYWdlcyBzbyB0aHJvdHRsZSBp\ndCBieSBzZXR0aW5nIHRoZSBOZXR0eQogICAgICAgICAgICAvLyBDaGFubmVs\nIHRvIG5vdCBiZSByZWFkYWJsZS4KICAgICAgICAgICAgaWYgKGxvZ2dlci5p\nc0RlYnVnRW5hYmxlZCgpKQogICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVn\nKCJUb28gbWFueSBvdXRzdGFuZGluZyBtZXNzYWdlcyAoIiArIG91dHN0YW5k\naW5nTXNnU2V0LnNpemUoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICsgIikgc28gdGhyb3R0bGluZyB0aGUgc3Vic2NyaWJlIG5ldHR5IENoYW5u\nZWwiKTsKICAgICAgICAgICAgc3Vic2NyaWJlQ2hhbm5lbC5zZXRSZWFkYWJs\nZShmYWxzZSk7CiAgICAgICAgfQogICAgICAgIE1lc3NhZ2VDb25zdW1lRGF0\nYSBtZXNzYWdlQ29uc3VtZURhdGEgPSBuZXcgTWVzc2FnZUNvbnN1bWVEYXRh\nKG9yaWdTdWJEYXRhLnRvcGljLCBvcmlnU3ViRGF0YS5zdWJzY3JpYmVySWQs\nCiAgICAgICAgICAgICAgICBtZXNzYWdlKTsKICAgICAgICBtZXNzYWdlSGFu\nZGxlci5kZWxpdmVyKG9yaWdTdWJEYXRhLnRvcGljLCBvcmlnU3ViRGF0YS5z\ndWJzY3JpYmVySWQsIG1lc3NhZ2UsIHJlc3BvbnNlSGFuZGxlci5nZXRDbGll\nbnQoKQogICAgICAgICAgICAgICAgLmdldENvbnN1bWVDYWxsYmFjaygpLCBt\nZXNzYWdlQ29uc3VtZURhdGEpOwogICAgfQoKICAgIC8qKgogICAgICogTWV0\naG9kIGNhbGxlZCB3aGVuIHRoZSBjbGllbnQgYXBwJ3MgTWVzc2FnZUhhbmRs\nZXIgaGFzIGFzeW5jaHJvbm91c2x5CiAgICAgKiBjb21wbGV0ZWQgY29uc3Vt\naW5nIGEgc3Vic2NyaWJlZCBtZXNzYWdlIHNlbnQgZnJvbSB0aGUgc2VydmVy\nLiBUaGUKICAgICAqIGNvbnRyYWN0IHdpdGggdGhlIGNsaWVudCBhcHAgaXMg\ndGhhdCBtZXNzYWdlcyBzZW50IHRvIHRoZSBoYW5kbGVyIHRvIGJlCiAgICAg\nKiBjb25zdW1lZCB3aWxsIGhhdmUgdGhlIGNhbGxiYWNrIHJlc3BvbnNlIGRv\nbmUgaW4gdGhlIHNhbWUgb3JkZXIuIFNvIGlmIHdlCiAgICAgKiBhc3luY2hy\nb25vdXNseSBjYWxsIHRoZSBNZXNzYWdlSGFuZGxlciB0byBjb25zdW1lIG1l\nc3NhZ2VzICMxLTUsIHRoYXQKICAgICAqIHNob3VsZCBjYWxsIHRoZSBtZXNz\nYWdlQ29uc3VtZWQgbWV0aG9kIGhlcmUgdmlhIHRoZSBWb2lkQ2FsbGJhY2sg\naW4gdGhlCiAgICAgKiBzYW1lIG9yZGVyLiBUbyBtYWtlIHRoaXMgdGhyZWFk\nIHNhZmUsIHNpbmNlIG11bHRpcGxlIG91dHN0YW5kaW5nIG1lc3NhZ2VzCiAg\nICAgKiBjb3VsZCBiZSBjb25zdW1lZCBieSB0aGUgY2xpZW50IGFwcCBhbmQg\ndGhlbiBjYWxsZWQgYmFjayB0byBoZXJlLCBtYWtlCiAgICAgKiB0aGlzIG1l\ndGhvZCBzeW5jaHJvbml6ZWQuCiAgICAgKgogICAgICogQHBhcmFtIG1lc3Nh\nZ2UKICAgICAqICAgICAgICAgICAgTWVzc2FnZSBzZW50IGZyb20gc2VydmVy\nIGZvciB0b3BpYyBzdWJzY3JpcHRpb24gdGhhdCBoYXMgYmVlbgogICAgICog\nICAgICAgICAgICBjb25zdW1lZCBieSB0aGUgY2xpZW50LgogICAgICovCiAg\nICBwcm90ZWN0ZWQgc3luY2hyb25pemVkIHZvaWQgbWVzc2FnZUNvbnN1bWVk\nKE1lc3NhZ2UgbWVzc2FnZSkgewogICAgICAgIGlmIChsb2dnZXIuaXNEZWJ1\nZ0VuYWJsZWQoKSkKICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCJNZXNzYWdl\nIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSBjb25zdW1lZCBieSB0aGUgY2xpZW50\nIGFwcCBmb3IgbWVzc2FnZTogIiArIG1lc3NhZ2UKICAgICAgICAgICAgICAg\nICAgICAgICAgICsgIiwgdG9waWM6ICIgKyBvcmlnU3ViRGF0YS50b3BpYy50\nb1N0cmluZ1V0ZjgoKSArICIsIHN1YnNjcmliZXJJZDogIgogICAgICAgICAg\nICAgICAgICAgICAgICAgKyBvcmlnU3ViRGF0YS5zdWJzY3JpYmVySWQudG9T\ndHJpbmdVdGY4KCkpOwogICAgICAgIC8vIFVwZGF0ZSB0aGUgY29uc3VtZWQg\nbWVzc2FnZXMgYnVmZmVyIHZhcmlhYmxlcwogICAgICAgIGlmIChyZXNwb25z\nZUhhbmRsZXIuZ2V0Q29uZmlndXJhdGlvbigpLmlzQXV0b1NlbmRDb25zdW1l\nTWVzc2FnZUVuYWJsZWQoKSkgewogICAgICAgICAgICAvLyBVcGRhdGUgdGhl\nc2UgdmFyaWFibGVzIG9ubHkgaWYgd2UgYXJlIGF1dG8tc2VuZGluZyBjb25z\ndW1lCiAgICAgICAgICAgIC8vIG1lc3NhZ2VzIHRvIHRoZSBzZXJ2ZXIuIE90\naGVyd2lzZSB0aGUgb251cyBpcyBvbiB0aGUgY2xpZW50IGFwcAogICAgICAg\nICAgICAvLyB0byBjYWxsIHRoZSBTdWJzY3JpYmVyIGNvbnN1bWUgQVBJIHRv\nIGxldCB0aGUgc2VydmVyIGtub3cgd2hpY2gKICAgICAgICAgICAgLy8gbWVz\nc2FnZXMgaXQgaGFzIHN1Y2Nlc3NmdWxseSBjb25zdW1lZC4KICAgICAgICAg\nICAgbnVtQ29uc3VtZWRNZXNzYWdlc0luQnVmZmVyKys7CiAgICAgICAgICAg\nIGxhc3RNZXNzYWdlU2VxSWQgPSBtZXNzYWdlLmdldE1zZ0lkKCk7CiAgICAg\nICAgfQogICAgICAgIC8vIFJlbW92ZSB0aGlzIGNvbnN1bWVkIG1lc3NhZ2Ug\nZnJvbSB0aGUgb3V0c3RhbmRpbmcgTWVzc2FnZSBTZXQuCiAgICAgICAgb3V0\nc3RhbmRpbmdNc2dTZXQucmVtb3ZlKG1lc3NhZ2UpOwoKICAgICAgICAvLyBG\nb3IgY29uc3VtZSByZXNwb25zZSB0byBzZXJ2ZXIsIHRoZXJlIGlzIGEgY29u\nZmlnIHBhcmFtIG9uIGhvdyBtYW55CiAgICAgICAgLy8gbWVzc2FnZXMgdG8g\nY29uc3VtZSBhbmQgYnVmZmVyIHVwIGJlZm9yZSBzZW5kaW5nIHRoZSBjb25z\ndW1lIHJlcXVlc3QuCiAgICAgICAgLy8gV2UganVzdCBuZWVkIHRvIGtlZXAg\nYSBjb3VudCBvZiB0aGUgbnVtYmVyIG9mIG1lc3NhZ2VzIGNvbnN1bWVkCiAg\nICAgICAgLy8gYW5kIHRoZSBsYXJnZXN0L2xhdGVzdCBtc2cgSUQgc2VlbiBz\nbyBmYXIgaW4gdGhpcyBiYXRjaC4gTWVzc2FnZXMKICAgICAgICAvLyBzaG91\nbGQgYmUgZGVsaXZlcmVkIGluIG9yZGVyIGFuZCB3aXRob3V0IGdhcHMuIERv\nIHRoaXMgb25seSBpZgogICAgICAgIC8vIGF1dG8tc2VuZGluZyBvZiBjb25z\ndW1lIG1lc3NhZ2VzIGlzIGVuYWJsZWQuCiAgICAgICAgaWYgKHJlc3BvbnNl\nSGFuZGxlci5nZXRDb25maWd1cmF0aW9uKCkuaXNBdXRvU2VuZENvbnN1bWVN\nZXNzYWdlRW5hYmxlZCgpCiAgICAgICAgICAgICAgICAmJiBudW1Db25zdW1l\nZE1lc3NhZ2VzSW5CdWZmZXIgPj0gcmVzcG9uc2VIYW5kbGVyLmdldENvbmZp\nZ3VyYXRpb24oKS5nZXRDb25zdW1lZE1lc3NhZ2VzQnVmZmVyU2l6ZSgpKSB7\nCiAgICAgICAgICAgIC8vIFNlbmQgdGhlIGNvbnN1bWUgcmVxdWVzdCBhbmQg\ncmVzZXQgdGhlIGNvbnN1bWVkIG1lc3NhZ2VzIGJ1ZmZlcgogICAgICAgICAg\nICAvLyB2YXJpYWJsZXMuIFdlIHdpbGwgdXNlIHRoZSBzYW1lIENoYW5uZWwg\nY3JlYXRlZCBmcm9tIHRoZQogICAgICAgICAgICAvLyBzdWJzY3JpYmUgcmVx\ndWVzdCBmb3IgdGhlIFRvcGljU3Vic2NyaWJlci4KICAgICAgICAgICAgaWYg\nKGxvZ2dlci5pc0RlYnVnRW5hYmxlZCgpKQogICAgICAgICAgICAgICAgbG9n\nZ2VyCiAgICAgICAgICAgICAgICAuZGVidWcoIkNvbnN1bWVkIG1lc3NhZ2Ug\nYnVmZmVyIGxpbWl0IHJlYWNoZWQgc28gc2VuZCB0aGUgQ29uc3VtZSBSZXF1\nZXN0IHRvIHRoZSBzZXJ2ZXIgd2l0aCBsYXN0TWVzc2FnZVNlcUlkOiAiCiAg\nICAgICAgICAgICAgICAgICAgICAgKyBsYXN0TWVzc2FnZVNlcUlkKTsKICAg\nICAgICAgICAgcmVzcG9uc2VIYW5kbGVyLmdldFN1YnNjcmliZXIoKS5kb0Nv\nbnN1bWUob3JpZ1N1YkRhdGEsIHN1YnNjcmliZUNoYW5uZWwsIGxhc3RNZXNz\nYWdlU2VxSWQpOwogICAgICAgICAgICBudW1Db25zdW1lZE1lc3NhZ2VzSW5C\ndWZmZXIgPSAwOwogICAgICAgICAgICBsYXN0TWVzc2FnZVNlcUlkID0gbnVs\nbDsKICAgICAgICB9CgogICAgICAgIC8vIENoZWNrIGlmIHdlIHRocm90dGxl\nZCBtZXNzYWdlIGNvbnN1bXB0aW9uIHByZXZpb3VzbHkgd2hlbiB0aGUKICAg\nICAgICAvLyBvdXRzdGFuZGluZyBtZXNzYWdlIGxpbWl0IHdhcyByZWFjaGVk\nLiBGb3Igbm93LCBvbmx5IHR1cm4gdGhlCiAgICAgICAgLy8gZGVsaXZlcnkg\nYmFjayBvbiBpZiB0aGVyZSBhcmUgbm8gbW9yZSBvdXRzdGFuZGluZyBtZXNz\nYWdlcyB0bwogICAgICAgIC8vIGNvbnN1bWUuIFdlIGNvdWxkIG1ha2UgdGhp\ncyBhIGNvbmZpZ3VyYWJsZSBwYXJhbWV0ZXIgaWYgbmVlZGVkLgogICAgICAg\nIGlmICghc3Vic2NyaWJlQ2hhbm5lbC5pc1JlYWRhYmxlKCkgJiYgb3V0c3Rh\nbmRpbmdNc2dTZXQuc2l6ZSgpID09IDApIHsKICAgICAgICAgICAgaWYgKGxv\nZ2dlci5pc0RlYnVnRW5hYmxlZCgpKQogICAgICAgICAgICAgICAgbG9nZ2Vy\nCiAgICAgICAgICAgICAgICAuZGVidWcoIk1lc3NhZ2UgY29uc3VtcHRpb24g\naGFzIGNhdWdodCB1cCBzbyBva2F5IHRvIHR1cm4gb2ZmIHRocm90dGxpbmcg\nb2YgbWVzc2FnZXMgb24gdGhlIHN1YnNjcmliZSBjaGFubmVsIGZvciB0b3Bp\nYzogIgogICAgICAgICAgICAgICAgICAgICAgICsgb3JpZ1N1YkRhdGEudG9w\naWMudG9TdHJpbmdVdGY4KCkKICAgICAgICAgICAgICAgICAgICAgICArICIs\nIHN1YnNjcmliZXJJZDogIgogICAgICAgICAgICAgICAgICAgICAgICsgb3Jp\nZ1N1YkRhdGEuc3Vic2NyaWJlcklkLnRvU3RyaW5nVXRmOCgpKTsKICAgICAg\nICAgICAgc3Vic2NyaWJlQ2hhbm5lbC5zZXRSZWFkYWJsZSh0cnVlKTsKICAg\nICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXR0ZXIgdXNlZCBmb3Ig\nU3Vic2NyaWJlIGZsb3dzIHdoZW4gZGVsaXZlcnkgZm9yIHRoZSBzdWJzY3Jp\ncHRpb24gaXMKICAgICAqIHN0YXJ0ZWQuIFRoaXMgaXMgdXNlZCB0byByZWdp\nc3RlciB0aGUgTWVzc2FnZUhhbmRsZXIgbmVlZGVkIHRvIGNvbnN1bWVyCiAg\nICAgKiB0aGUgc3Vic2NyaWJlZCBtZXNzYWdlcyBmb3IgdGhlIHRvcGljLgog\nICAgICoKICAgICAqIEBwYXJhbSBtZXNzYWdlSGFuZGxlcgogICAgICogICAg\nICAgICAgICBNZXNzYWdlSGFuZGxlciB0byByZWdpc3RlciBmb3IgdGhpcyBS\nZXNwb25zZUhhbmRsZXIgaW5zdGFuY2UuCiAgICAgKi8KICAgIHB1YmxpYyB2\nb2lkIHNldE1lc3NhZ2VIYW5kbGVyKE1lc3NhZ2VIYW5kbGVyIG1lc3NhZ2VI\nYW5kbGVyKSB7CiAgICAgICAgaWYgKGxvZ2dlci5pc0RlYnVnRW5hYmxlZCgp\nKQogICAgICAgICAgICBsb2dnZXIuZGVidWcoIlNldHRpbmcgdGhlIG1lc3Nh\nZ2VIYW5kbGVyIGZvciB0b3BpYzogIiArIG9yaWdTdWJEYXRhLnRvcGljLnRv\nU3RyaW5nVXRmOCgpCiAgICAgICAgICAgICAgICAgICAgICAgICArICIsIHN1\nYnNjcmliZXJJZDogIiArIG9yaWdTdWJEYXRhLnN1YnNjcmliZXJJZC50b1N0\ncmluZ1V0ZjgoKSk7CiAgICAgICAgc3luY2hyb25pemVkICh0aGlzKSB7CiAg\nICAgICAgICAgIHRoaXMubWVzc2FnZUhhbmRsZXIgPSBtZXNzYWdlSGFuZGxl\ncjsKICAgICAgICAgICAgLy8gT25jZSB0aGUgTWVzc2FnZUhhbmRsZXIgaXMg\ncmVnaXN0ZXJlZCwgc2VlIGlmIHdlIGhhdmUgYW55IHF1ZXVlZCB1cAogICAg\nICAgICAgICAvLyBzdWJzY3JpcHRpb24gbWVzc2FnZXMgc2VudCB0byB1cyBh\nbHJlYWR5IGZyb20gdGhlIHNlcnZlci4gSWYgc28sCiAgICAgICAgICAgIC8v\nIGNvbnN1bWUgdGhvc2UgZmlyc3QuIERvIHRoaXMgb25seSBpZiB0aGUgTWVz\nc2FnZUhhbmRsZXIgcmVnaXN0ZXJlZCBpcwogICAgICAgICAgICAvLyBub3Qg\nbnVsbCAoc2luY2UgdGhhdCB3b3VsZCBiZSB0aGUgSGVkd2lnU3Vic2NyaWJl\nci5zdG9wRGVsaXZlcnkKICAgICAgICAgICAgLy8gY2FsbCkuCiAgICAgICAg\nICAgIGlmIChtZXNzYWdlSGFuZGxlciAhPSBudWxsICYmIHN1YnNjcmliZU1z\nZ1F1ZXVlICE9IG51bGwgJiYgc3Vic2NyaWJlTXNnUXVldWUuc2l6ZSgpID4g\nMCkgewogICAgICAgICAgICAgICAgaWYgKGxvZ2dlci5pc0RlYnVnRW5hYmxl\nZCgpKQogICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygiQ29uc3Vt\naW5nICIgKyBzdWJzY3JpYmVNc2dRdWV1ZS5zaXplKCkgKyAiIHF1ZXVlZCB1\ncCBtZXNzYWdlcyBmb3IgdG9waWM6ICIKICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgKyBvcmlnU3ViRGF0YS50b3BpYy50b1N0cmluZ1V0Zjgo\nKSArICIsIHN1YnNjcmliZXJJZDogIgogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICArIG9yaWdTdWJEYXRhLnN1YnNjcmliZXJJZC50b1N0cmlu\nZ1V0ZjgoKSk7CiAgICAgICAgICAgICAgICBmb3IgKE1lc3NhZ2UgbWVzc2Fn\nZSA6IHN1YnNjcmliZU1zZ1F1ZXVlKSB7CiAgICAgICAgICAgICAgICAgICAg\nYXN5bmNNZXNzYWdlQ29uc3VtZShtZXNzYWdlKTsKICAgICAgICAgICAgICAg\nIH0KICAgICAgICAgICAgICAgIC8vIE5vdyB3ZSBjYW4gcmVtb3ZlIHRoZSBx\ndWV1ZWQgdXAgbWVzc2FnZXMgc2luY2UgdGhleSBhcmUgYWxsCiAgICAgICAg\nICAgICAgICAvLyBjb25zdW1lZC4KICAgICAgICAgICAgICAgIHN1YnNjcmli\nZU1zZ1F1ZXVlLmNsZWFyKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAg\nICB9CgogICAgLyoqCiAgICAgKiBHZXR0ZXIgZm9yIHRoZSBNZXNzYWdlSGFu\nZGxlciB0aGF0IGlzIHNldCBmb3IgdGhpcyBzdWJzY3JpYmUgY2hhbm5lbC4K\nICAgICAqCiAgICAgKiBAcmV0dXJuIFRoZSBNZXNzYWdlSGFuZGxlciBmb3Ig\nY29uc3VtaW5nIG1lc3NhZ2VzCiAgICAgKi8KICAgIHB1YmxpYyBNZXNzYWdl\nSGFuZGxlciBnZXRNZXNzYWdlSGFuZGxlcigpIHsKICAgICAgICByZXR1cm4g\nbWVzc2FnZUhhbmRsZXI7CiAgICB9Cn0K\n","encoding":"base64"}

