{"sha":"f5077b030b36a272b3a622aa5f685bfd190655ad","node_id":"MDQ6QmxvYjE1NzU5NTY6ZjUwNzdiMDMwYjM2YTI3MmIzYTYyMmFhNWY2ODViZmQxOTA2NTVhZA==","size":6327,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/f5077b030b36a272b3a622aa5f685bfd190655ad","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQubmV0dHk7CgppbXBvcnQg\namF2YS5uZXQuSW5ldFNvY2tldEFkZHJlc3M7CmltcG9ydCBqYXZhLnV0aWwu\nTGlua2VkTGlzdDsKCmltcG9ydCBvcmcuc2xmNGouTG9nZ2VyOwppbXBvcnQg\nb3JnLnNsZjRqLkxvZ2dlckZhY3Rvcnk7CmltcG9ydCBvcmcuamJvc3MubmV0\ndHkuY2hhbm5lbC5DaGFubmVsRnV0dXJlOwppbXBvcnQgb3JnLmpib3NzLm5l\ndHR5LmNoYW5uZWwuQ2hhbm5lbEZ1dHVyZUxpc3RlbmVyOwoKaW1wb3J0IGNv\nbS5nb29nbGUucHJvdG9idWYuQnl0ZVN0cmluZzsKaW1wb3J0IG9yZy5hcGFj\naGUuaGVkd2lnLmNsaWVudC5jb25mLkNsaWVudENvbmZpZ3VyYXRpb247Cmlt\ncG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQuZGF0YS5QdWJTdWJEYXRh\nOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuZXhjZXB0aW9ucy5QdWJTdWJF\neGNlcHRpb24uQ291bGROb3RDb25uZWN0RXhjZXB0aW9uOwppbXBvcnQgb3Jn\nLmFwYWNoZS5oZWR3aWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2wuT3BlcmF0\naW9uVHlwZTsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnV0aWwuSGVkd2ln\nU29ja2V0QWRkcmVzczsKCnB1YmxpYyBjbGFzcyBDb25uZWN0Q2FsbGJhY2sg\naW1wbGVtZW50cyBDaGFubmVsRnV0dXJlTGlzdGVuZXIgewoKICAgIHByaXZh\ndGUgc3RhdGljIExvZ2dlciBsb2dnZXIgPSBMb2dnZXJGYWN0b3J5LmdldExv\nZ2dlcihDb25uZWN0Q2FsbGJhY2suY2xhc3MpOwoKICAgIC8vIFByaXZhdGUg\nbWVtYmVyIHZhcmlhYmxlcwogICAgcHJpdmF0ZSBQdWJTdWJEYXRhIHB1YlN1\nYkRhdGE7CiAgICBwcml2YXRlIEluZXRTb2NrZXRBZGRyZXNzIGhvc3Q7CiAg\nICBwcml2YXRlIGZpbmFsIEhlZHdpZ0NsaWVudEltcGwgY2xpZW50OwogICAg\ncHJpdmF0ZSBmaW5hbCBIZWR3aWdQdWJsaXNoZXIgcHViOwogICAgcHJpdmF0\nZSBmaW5hbCBIZWR3aWdTdWJzY3JpYmVyIHN1YjsKICAgIHByaXZhdGUgZmlu\nYWwgQ2xpZW50Q29uZmlndXJhdGlvbiBjZmc7CgogICAgLy8gQ29uc3RydWN0\nb3IKICAgIHB1YmxpYyBDb25uZWN0Q2FsbGJhY2soUHViU3ViRGF0YSBwdWJT\ndWJEYXRhLCBJbmV0U29ja2V0QWRkcmVzcyBob3N0LCBIZWR3aWdDbGllbnRJ\nbXBsIGNsaWVudCkgewogICAgICAgIHN1cGVyKCk7CiAgICAgICAgdGhpcy5w\ndWJTdWJEYXRhID0gcHViU3ViRGF0YTsKICAgICAgICB0aGlzLmhvc3QgPSBo\nb3N0OwogICAgICAgIHRoaXMuY2xpZW50ID0gY2xpZW50OwogICAgICAgIHRo\naXMucHViID0gY2xpZW50LmdldFB1Ymxpc2hlcigpOwogICAgICAgIHRoaXMu\nc3ViID0gY2xpZW50LmdldFN1YnNjcmliZXIoKTsKICAgICAgICB0aGlzLmNm\nZyA9IGNsaWVudC5nZXRDb25maWd1cmF0aW9uKCk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgb3BlcmF0aW9uQ29tcGxldGUoQ2hhbm5lbEZ1dHVyZSBmdXR1\ncmUpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIC8vIElmIHRoZSBjbGll\nbnQgaGFzIHN0b3BwZWQsIHRoZXJlIGlzIG5vIG5lZWQgdG8gcHJvY2VlZCB3\naXRoIGFueQogICAgICAgIC8vIGNhbGxiYWNrIGxvZ2ljIGhlcmUuCiAgICAg\nICAgaWYgKGNsaWVudC5oYXNTdG9wcGVkKCkpCiAgICAgICAgICAgIHJldHVy\nbjsKCiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGNvbm5lY3Rpb24gdG8gdGhl\nIHNlcnZlciB3YXMgZG9uZSBzdWNjZXNzZnVsbHkuCiAgICAgICAgaWYgKCFm\ndXR1cmUuaXNTdWNjZXNzKCkpIHsKICAgICAgICAgICAgbG9nZ2VyLmVycm9y\nKCJFcnJvciBjb25uZWN0aW5nIHRvIGhvc3Q6ICIgKyBob3N0KTsKICAgICAg\nICAgICAgLy8gSWYgd2Ugd2VyZSBub3QgYWJsZSB0byBjb25uZWN0IHRvIHRo\nZSBob3N0LCBpdCBjb3VsZCBiZSBkb3duLgogICAgICAgICAgICBCeXRlU3Ry\naW5nIGhvc3RTdHJpbmcgPSBCeXRlU3RyaW5nLmNvcHlGcm9tVXRmOChIZWR3\naWdTb2NrZXRBZGRyZXNzLnNvY2tBZGRyU3RyKGhvc3QpKTsKICAgICAgICAg\nICAgaWYgKHB1YlN1YkRhdGEuY29ubmVjdEZhaWxlZFNlcnZlcnMgIT0gbnVs\nbCAmJiBwdWJTdWJEYXRhLmNvbm5lY3RGYWlsZWRTZXJ2ZXJzLmNvbnRhaW5z\nKGhvc3RTdHJpbmcpKSB7CiAgICAgICAgICAgICAgICAvLyBXZSd2ZSBhbHJl\nYWR5IHRyaWVkIHRvIGNvbm5lY3QgdG8gdGhpcyBob3N0IGJlZm9yZSBzbyBq\ndXN0CiAgICAgICAgICAgICAgICAvLyBpbnZva2UgdGhlIG9wZXJhdGlvbkZh\naWxlZCBjYWxsYmFjay4KICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcigi\nRXJyb3IgY29ubmVjdGluZyB0byBob3N0IG1vcmUgdGhhbiBvbmNlIHNvIGp1\nc3QgaW52b2tlIHRoZSBvcGVyYXRpb25GYWlsZWQgY2FsbGJhY2shIik7CiAg\nICAgICAgICAgICAgICBwdWJTdWJEYXRhLmNhbGxiYWNrLm9wZXJhdGlvbkZh\naWxlZChwdWJTdWJEYXRhLmNvbnRleHQsIG5ldyBDb3VsZE5vdENvbm5lY3RF\neGNlcHRpb24oCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIkNvdWxkIG5vdCBjb25uZWN0IHRvIGhv\nc3Q6ICIgKyBob3N0KSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAg\nICAgICAgICBpZiAobG9nZ2VyLmlzRGVidWdFbmFibGVkKCkpCiAgICAgICAg\nICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCJUcnkgdG8gY29ubmVjdCB0byBz\nZXJ2ZXI6ICIgKyBob3N0ICsgIiBhZ2FpbiBmb3IgcHViU3ViRGF0YTogIiAr\nIHB1YlN1YkRhdGEpOwogICAgICAgICAgICAgICAgLy8gS2VlcCB0cmFjayBv\nZiB0aGlzIGN1cnJlbnQgc2VydmVyIHRoYXQgd2UgZmFpbGVkIHRvIGNvbm5l\nY3QKICAgICAgICAgICAgICAgIC8vIHRvIGJ1dCByZXRyeSB0aGUgcmVxdWVz\ndCBvbiB0aGUgZGVmYXVsdCBzZXJ2ZXIgaG9zdC9WSVAuCiAgICAgICAgICAg\nICAgICAvLyBUaGUgdG9waWMySG9zdCBtYXBwaW5nIG1pZ2h0IG5lZWQgdG8g\nYmUgdXBkYXRlZC4KICAgICAgICAgICAgICAgIGlmIChwdWJTdWJEYXRhLmNv\nbm5lY3RGYWlsZWRTZXJ2ZXJzID09IG51bGwpCiAgICAgICAgICAgICAgICAg\nICAgcHViU3ViRGF0YS5jb25uZWN0RmFpbGVkU2VydmVycyA9IG5ldyBMaW5r\nZWRMaXN0PEJ5dGVTdHJpbmc+KCk7CiAgICAgICAgICAgICAgICBwdWJTdWJE\nYXRhLmNvbm5lY3RGYWlsZWRTZXJ2ZXJzLmFkZChob3N0U3RyaW5nKTsKICAg\nICAgICAgICAgICAgIGNsaWVudC5kb0Nvbm5lY3QocHViU3ViRGF0YSwgY2Zn\nLmdldERlZmF1bHRTZXJ2ZXJIb3N0KCkpOwogICAgICAgICAgICB9CiAgICAg\nICAgICAgIC8vIEZpbmlzaGVkIHdpdGggZmFpbHVyZSBsb2dpYyBzbyBqdXN0\nIHJldHVybi4KICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAg\nICAgLy8gTm93IHRoYXQgd2UgaGF2ZSBjb25uZWN0ZWQgc3VjY2Vzc2Z1bGx5\nIHRvIHRoZSBzZXJ2ZXIsIHNlZSB3aGF0IHR5cGUKICAgICAgICAvLyBvZiBQ\ndWJTdWIgcmVxdWVzdCB0aGlzIHdhcy4KICAgICAgICBpZiAobG9nZ2VyLmlz\nRGVidWdFbmFibGVkKCkpCiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygiQ29u\nbmVjdGlvbiB0byBob3N0OiAiICsgaG9zdCArICIgd2FzIHN1Y2Nlc3NmdWwg\nZm9yIHB1YlN1YkRhdGE6ICIgKyBwdWJTdWJEYXRhKTsKICAgICAgICBpZiAo\ncHViU3ViRGF0YS5vcGVyYXRpb25UeXBlLmVxdWFscyhPcGVyYXRpb25UeXBl\nLlBVQkxJU0gpKSB7CiAgICAgICAgICAgIC8vIFB1Ymxpc2ggUmVxdWVzdCBz\nbyBzdG9yZSB0aGlzIENoYW5uZWwgY29ubmVjdGlvbiBpbiB0aGUKICAgICAg\nICAgICAgLy8gSGVkd2lnUHVibGlzaGVyIE1hcCAoaWYgaXQgZG9lc24ndCBl\neGlzdCB5ZXQpIGFuZCB0aGVuCiAgICAgICAgICAgIC8vIGRvIHRoZSBwdWJs\naXNoIG9uIHRoZSBjYWNoZWQgY2hhbm5lbCBtYXBwZWQgdG8gdGhlIGhvc3Qu\nCiAgICAgICAgICAgIC8vIE5vdGUgdGhhdCBkdWUgdG8gcmFjZSBjb25jdXJy\nZW5jeSBzaXR1YXRpb25zLCBpdCBpcwogICAgICAgICAgICAvLyBwb3NzaWJs\nZSB0aGF0IHRoZSBjYWNoZWQgY2hhbm5lbCBpcyBub3QgdGhlIHNhbWUgb25l\nCiAgICAgICAgICAgIC8vIGFzIHRoZSBjaGFubmVsIGVzdGFibGlzaGVkIGhl\ncmUuIElmIHRoYXQgaXMgdGhlIGNhc2UsCiAgICAgICAgICAgIC8vIHRoaXMg\nY2hhbm5lbCB3aWxsIGJlIGNsb3NlZCBidXQgd2UnbGwgYWx3YXlzIHB1Ymxp\nc2ggb24gdGhlCiAgICAgICAgICAgIC8vIGNhY2hlZCBjaGFubmVsIGluIHRo\nZSBIZWR3aWdQdWJsaXNoZXIuaG9zdDJDaGFubmVsIG1hcC4KICAgICAgICAg\nICAgcHViLnN0b3JlSG9zdDJDaGFubmVsTWFwcGluZyhmdXR1cmUuZ2V0Q2hh\nbm5lbCgpKTsKICAgICAgICAgICAgcHViLmRvUHVibGlzaChwdWJTdWJEYXRh\nLCBwdWIuaG9zdDJDaGFubmVsLmdldChIZWR3aWdDbGllbnRJbXBsLmdldEhv\nc3RGcm9tQ2hhbm5lbChmdXR1cmUuZ2V0Q2hhbm5lbCgpKSkpOwogICAgICAg\nIH0gZWxzZSBpZiAocHViU3ViRGF0YS5vcGVyYXRpb25UeXBlLmVxdWFscyhP\ncGVyYXRpb25UeXBlLlVOU1VCU0NSSUJFKSkgewogICAgICAgICAgICAvLyBV\nbnN1YnNjcmliZSBSZXF1ZXN0IHNvIHN0b3JlIHRoaXMgQ2hhbm5lbCBjb25u\nZWN0aW9uIGluIHRoZQogICAgICAgICAgICAvLyBIZWR3aWdQdWJsaXNoZXIg\nTWFwIChpZiBpdCBkb2Vzbid0IGV4aXN0IHlldCkgYW5kIHRoZW4gZG8gdGhl\nCiAgICAgICAgICAgIC8vIHVuc3Vic2NyaWJlLiBVbnN1YnNjcmliZSByZXF1\nZXN0cyB3aWxsIHNoYXJlIGFuZCByZXVzZQogICAgICAgICAgICAvLyB0aGUg\nbmV0dHkgQ2hhbm5lbCBjb25uZWN0aW9ucyB0aGF0IFB1Ymxpc2ggcmVxdWVz\ndHMgdXNlLgogICAgICAgICAgICBwdWIuc3RvcmVIb3N0MkNoYW5uZWxNYXBw\naW5nKGZ1dHVyZS5nZXRDaGFubmVsKCkpOwogICAgICAgICAgICBzdWIuZG9T\ndWJVbnN1YihwdWJTdWJEYXRhLCBwdWIuaG9zdDJDaGFubmVsLmdldChIZWR3\naWdDbGllbnRJbXBsLmdldEhvc3RGcm9tQ2hhbm5lbChmdXR1cmUuZ2V0Q2hh\nbm5lbCgpKSkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIFN1\nYnNjcmliZSBSZXF1ZXN0LiBXZSBkbyBub3Qgc3RvcmUgdGhlIENoYW5uZWwg\nY29ubmVjdGlvbiB5ZXQgZm9yCiAgICAgICAgICAgIC8vIFN1YnNjcmliZXMg\naGVyZS4gVGhpcyB3aWxsIGJlIGRvbmUgb25seSB3aGVuIHdlJ3ZlIGZvdW5k\nIHRoZQogICAgICAgICAgICAvLyByaWdodCBzZXJ2ZXIgdG9waWMgbWFzdGVy\nLiBUaGF0IGlzIG9ubHkgZGV0ZXJtaW5lZCB3aGVuIHdlCiAgICAgICAgICAg\nIC8vIHJlY2VpdmUgYSBzdWNjZXNzZnVsIHNlcnZlciBhY2sgcmVzcG9uc2Ug\ndG8gdGhlIFN1YnNjcmliZQogICAgICAgICAgICAvLyByZXF1ZXN0IChoYW5k\nbGVkIGluIFJlc3BvbnNlSGFuZGxlcikuIFRoZXJlIGlzIG5vIG5lZWQgdG8g\nc3RvcmUKICAgICAgICAgICAgLy8gdGhlIFVuc3Vic2NyaWJlIGNoYW5uZWwg\nY29ubmVjdGlvbiBhcyB3ZSB3b24ndCB1c2UgaXQgYWdhaW4uCiAgICAgICAg\nICAgIHN1Yi5kb1N1YlVuc3ViKHB1YlN1YkRhdGEsIGZ1dHVyZS5nZXRDaGFu\nbmVsKCkpOwogICAgICAgIH0KICAgIH0KCn0K\n","encoding":"base64"}

