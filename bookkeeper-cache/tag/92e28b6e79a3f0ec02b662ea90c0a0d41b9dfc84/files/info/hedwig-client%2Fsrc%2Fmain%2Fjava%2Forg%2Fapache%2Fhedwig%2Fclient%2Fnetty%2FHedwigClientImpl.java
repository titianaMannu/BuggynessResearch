{"sha":"806cdefb045f608090838fa4f343633550b29a3a","node_id":"MDQ6QmxvYjE1NzU5NTY6ODA2Y2RlZmIwNDVmNjA4MDkwODM4ZmE0ZjM0MzYzMzU1MGIyOWEzYQ==","size":16860,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/806cdefb045f608090838fa4f343633550b29a3a","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQubmV0dHk7CgppbXBvcnQg\namF2YS5uZXQuSW5ldFNvY2tldEFkZHJlc3M7CmltcG9ydCBqYXZhLnV0aWwu\nTGlua2VkTGlzdDsKaW1wb3J0IGphdmEudXRpbC5MaXN0OwppbXBvcnQgamF2\nYS51dGlsLlRpbWVyOwppbXBvcnQgamF2YS51dGlsLlRpbWVyVGFzazsKaW1w\nb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkNvbmN1cnJlbnRIYXNoTWFwOwpp\nbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuQ29uY3VycmVudE1hcDsKaW1w\nb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkV4ZWN1dG9yczsKaW1wb3J0IGph\ndmEudXRpbC5jb25jdXJyZW50LmF0b21pYy5BdG9taWNMb25nOwoKaW1wb3J0\nIG9yZy5zbGY0ai5Mb2dnZXI7CmltcG9ydCBvcmcuc2xmNGouTG9nZ2VyRmFj\ndG9yeTsKaW1wb3J0IG9yZy5qYm9zcy5uZXR0eS5ib290c3RyYXAuQ2xpZW50\nQm9vdHN0cmFwOwppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmNoYW5uZWwuQ2hh\nbm5lbDsKaW1wb3J0IG9yZy5qYm9zcy5uZXR0eS5jaGFubmVsLkNoYW5uZWxG\nYWN0b3J5OwppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmNoYW5uZWwuQ2hhbm5l\nbEZ1dHVyZTsKaW1wb3J0IG9yZy5qYm9zcy5uZXR0eS5jaGFubmVsLnNvY2tl\ndC5uaW8uTmlvQ2xpZW50U29ja2V0Q2hhbm5lbEZhY3Rvcnk7CgppbXBvcnQg\nY29tLmdvb2dsZS5wcm90b2J1Zi5CeXRlU3RyaW5nOwppbXBvcnQgb3JnLmFw\nYWNoZS5oZWR3aWcuY2xpZW50LmFwaS5DbGllbnQ7CmltcG9ydCBvcmcuYXBh\nY2hlLmhlZHdpZy5jbGllbnQuY29uZi5DbGllbnRDb25maWd1cmF0aW9uOwpp\nbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuY2xpZW50LmRhdGEuUHViU3ViRGF0\nYTsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmNsaWVudC5oYW5kbGVycy5N\nZXNzYWdlQ29uc3VtZUNhbGxiYWNrOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3\naWcuY2xpZW50LnNzbC5Tc2xDbGllbnRDb250ZXh0RmFjdG9yeTsKaW1wb3J0\nIG9yZy5hcGFjaGUuaGVkd2lnLmV4Y2VwdGlvbnMuUHViU3ViRXhjZXB0aW9u\nLlVuY2VydGFpblN0YXRlRXhjZXB0aW9uOwoKLyoqCiAqIFRoaXMgaXMgYSB0\nb3AgbGV2ZWwgSGVkd2lnIENsaWVudCBjbGFzcyB0aGF0IGVuY2Fwc3VsYXRl\ncyB0aGUgY29tbW9uCiAqIGZ1bmN0aW9uYWxpdHkgbmVlZGVkIGZvciBib3Ro\nIFB1Ymxpc2ggYW5kIFN1YnNjcmliZSBvcGVyYXRpb25zLgogKgogKi8KcHVi\nbGljIGNsYXNzIEhlZHdpZ0NsaWVudEltcGwgaW1wbGVtZW50cyBDbGllbnQg\newoKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvZ2dlciBsb2dnZXIgPSBM\nb2dnZXJGYWN0b3J5LmdldExvZ2dlcihIZWR3aWdDbGllbnRJbXBsLmNsYXNz\nKTsKCiAgICAvLyBHbG9iYWwgY291bnRlciB1c2VkIGZvciBnZW5lcmF0aW5n\nIHVuaXF1ZSB0cmFuc2FjdGlvbiBJRCdzIGZvcgogICAgLy8gcHVibGlzaCBh\nbmQgc3Vic2NyaWJlIHJlcXVlc3RzCiAgICBwcm90ZWN0ZWQgZmluYWwgQXRv\nbWljTG9uZyBnbG9iYWxDb3VudGVyID0gbmV3IEF0b21pY0xvbmcoKTsKICAg\nIC8vIFN0YXRpYyBTdHJpbmcgY29uc3RhbnRzCiAgICBwcm90ZWN0ZWQgc3Rh\ndGljIGZpbmFsIFN0cmluZyBDT0xPTiA9ICI6IjsKCiAgICAvLyBUaGUgTmV0\ndHkgc29ja2V0IGZhY3RvcnkgZm9yIG1ha2luZyBjb25uZWN0aW9ucyB0byB0\naGUgc2VydmVyLgogICAgcHJvdGVjdGVkIGZpbmFsIENoYW5uZWxGYWN0b3J5\nIHNvY2tldEZhY3Rvcnk7CiAgICAvLyBXaGV0aGVyIHRoZSBzb2NrZXQgZmFj\ndG9yeSBpcyBvbmUgd2UgY3JlYXRlZCBvciBpcyBvd25lZCBieSB3aG9ldmVy\nCiAgICAvLyBpbnN0YW50aWF0ZWQgdXMuCiAgICBwcm90ZWN0ZWQgYm9vbGVh\nbiBvd25DaGFubmVsRmFjdG9yeSA9IGZhbHNlOwoKICAgIC8vIFBpcGVsaW5l\nRmFjdG9yeSB0byBjcmVhdGUgbmV0dHkgY2xpZW50IGNoYW5uZWxzIHRvIHRo\nZSBhcHByb3ByaWF0ZSBzZXJ2ZXIKICAgIHByaXZhdGUgQ2xpZW50Q2hhbm5l\nbFBpcGVsaW5lRmFjdG9yeSBwaXBlbGluZUZhY3Rvcnk7CgogICAgLy8gQ29u\nY3VycmVudCBNYXAgdG8gc3RvcmUgdGhlIG1hcHBpbmcgZnJvbSB0aGUgVG9w\naWMgdG8gdGhlIEhvc3QuCiAgICAvLyBUaGlzIGNvdWxkIGNoYW5nZSBvdmVy\nIHRpbWUgc2luY2Ugc2VydmVycyBjYW4gZHJvcCBtYXN0ZXJzaGlwIG9mIHRv\ncGljcwogICAgLy8gZm9yIGxvYWQgYmFsYW5jaW5nIG9yIGZhaWxvdmVyLiBJ\nZiBhIHNlcnZlciBob3N0IGV2ZXIgZ29lcyBkb3duLCB3ZSdkCiAgICAvLyBh\nbHNvIHdhbnQgdG8gcmVtb3ZlIGFsbCB0b3BpYyBtYXBwaW5ncyB0aGUgaG9z\ndCB3YXMgcmVzcG9uc2libGUgZm9yLgogICAgLy8gVGhlIHNlY29uZCBNYXAg\naXMgdXNlZCBhcyB0aGUgaW52ZXJ0ZWQgdmVyc2lvbiBvZiB0aGUgZmlyc3Qg\nb25lLgogICAgcHJvdGVjdGVkIGZpbmFsIENvbmN1cnJlbnRNYXA8Qnl0ZVN0\ncmluZywgSW5ldFNvY2tldEFkZHJlc3M+IHRvcGljMkhvc3QgPSBuZXcgQ29u\nY3VycmVudEhhc2hNYXA8Qnl0ZVN0cmluZywgSW5ldFNvY2tldEFkZHJlc3M+\nKCk7CiAgICBwcml2YXRlIGZpbmFsIENvbmN1cnJlbnRNYXA8SW5ldFNvY2tl\ndEFkZHJlc3MsIExpc3Q8Qnl0ZVN0cmluZz4+IGhvc3QyVG9waWNzID0gbmV3\nIENvbmN1cnJlbnRIYXNoTWFwPEluZXRTb2NrZXRBZGRyZXNzLCBMaXN0PEJ5\ndGVTdHJpbmc+PigpOwoKICAgIC8vIEVhY2ggY2xpZW50IGluc3RhbnRpYXRp\nb24gd2lsbCBoYXZlIGEgVGltZXIgZm9yIHJ1bm5pbmcgcmVjdXJyaW5nCiAg\nICAvLyB0aHJlYWRzLiBPbmUgc3VjaCB0aW1lciB0YXNrIHRocmVhZCB0byBp\ncyB0byB0aW1lb3V0IGxvbmcgcnVubmluZwogICAgLy8gUHViU3ViUmVxdWVz\ndHMgdGhhdCBhcmUgd2FpdGluZyBmb3IgYW4gYWNrIHJlc3BvbnNlIGZyb20g\ndGhlIHNlcnZlci4KICAgIHByaXZhdGUgZmluYWwgVGltZXIgY2xpZW50VGlt\nZXIgPSBuZXcgVGltZXIodHJ1ZSk7CgogICAgLy8gQm9vbGVhbiBpbmRpY2F0\naW5nIGlmIHRoZSBjbGllbnQgaXMgcnVubmluZyBvciBoYXMgc3RvcHBlZC4K\nICAgIC8vIE9uY2Ugd2Ugc3RvcCB0aGUgY2xpZW50LCB3ZSBzaG91bGQgc2lk\nZXN0ZXAgYWxsIG9mIHRoZSBjb25uZWN0LAogICAgLy8gd3JpdGUgY2FsbGJh\nY2sgYW5kIGNoYW5uZWwgZGlzY29ubmVjdGVkIGxvZ2ljLgogICAgcHJpdmF0\nZSBib29sZWFuIGlzU3RvcHBlZCA9IGZhbHNlOwoKICAgIHByaXZhdGUgSGVk\nd2lnU3Vic2NyaWJlciBzdWI7CiAgICBwcml2YXRlIGZpbmFsIEhlZHdpZ1B1\nYmxpc2hlciBwdWI7CiAgICBwcml2YXRlIGZpbmFsIENsaWVudENvbmZpZ3Vy\nYXRpb24gY2ZnOwogICAgcHJpdmF0ZSBmaW5hbCBNZXNzYWdlQ29uc3VtZUNh\nbGxiYWNrIGNvbnN1bWVDYjsKICAgIHByaXZhdGUgU3NsQ2xpZW50Q29udGV4\ndEZhY3Rvcnkgc3NsRmFjdG9yeSA9IG51bGw7CgogICAgcHVibGljIHN0YXRp\nYyBDbGllbnQgY3JlYXRlKENsaWVudENvbmZpZ3VyYXRpb24gY2ZnKSB7CiAg\nICAgICAgcmV0dXJuIG5ldyBIZWR3aWdDbGllbnRJbXBsKGNmZyk7CiAgICB9\nCgogICAgcHVibGljIHN0YXRpYyBDbGllbnQgY3JlYXRlKENsaWVudENvbmZp\nZ3VyYXRpb24gY2ZnLCBDaGFubmVsRmFjdG9yeSBzb2NrZXRGYWN0b3J5KSB7\nCiAgICAgICAgcmV0dXJuIG5ldyBIZWR3aWdDbGllbnRJbXBsKGNmZywgc29j\na2V0RmFjdG9yeSk7CiAgICB9CgogICAgLy8gQmFzZSBjb25zdHJ1Y3RvciB0\naGF0IHRha2VzIGluIGEgQ29uZmlndXJhdGlvbiBvYmplY3QuCiAgICAvLyBU\naGlzIHdpbGwgY3JlYXRlIGl0cyBvd24gY2xpZW50IHNvY2tldCBjaGFubmVs\nIGZhY3RvcnkuCiAgICBwcm90ZWN0ZWQgSGVkd2lnQ2xpZW50SW1wbChDbGll\nbnRDb25maWd1cmF0aW9uIGNmZykgewogICAgICAgIHRoaXMoY2ZnLCBuZXcg\nTmlvQ2xpZW50U29ja2V0Q2hhbm5lbEZhY3RvcnkoRXhlY3V0b3JzLm5ld0Nh\nY2hlZFRocmVhZFBvb2woKSwgRXhlY3V0b3JzLm5ld0NhY2hlZFRocmVhZFBv\nb2woKSkpOwogICAgICAgIG93bkNoYW5uZWxGYWN0b3J5ID0gdHJ1ZTsKICAg\nIH0KCiAgICAvLyBDb25zdHJ1Y3RvciB0aGF0IHRha2VzIGluIGEgQ29uZmln\ndXJhdGlvbiBvYmplY3QgYW5kIGEgQ2hhbm5lbEZhY3RvcnkKICAgIC8vIHRo\nYXQgaGFzIGFscmVhZHkgYmVlbiBpbnN0YW50aWF0ZWQgYnkgdGhlIGNhbGxl\nci4KICAgIHByb3RlY3RlZCBIZWR3aWdDbGllbnRJbXBsKENsaWVudENvbmZp\nZ3VyYXRpb24gY2ZnLCBDaGFubmVsRmFjdG9yeSBzb2NrZXRGYWN0b3J5KSB7\nCiAgICAgICAgdGhpcy5jZmcgPSBjZmc7CiAgICAgICAgdGhpcy5zb2NrZXRG\nYWN0b3J5ID0gc29ja2V0RmFjdG9yeTsKICAgICAgICBwdWIgPSBuZXcgSGVk\nd2lnUHVibGlzaGVyKHRoaXMpOwogICAgICAgIHN1YiA9IG5ldyBIZWR3aWdT\ndWJzY3JpYmVyKHRoaXMpOwogICAgICAgIHBpcGVsaW5lRmFjdG9yeSA9IG5l\ndyBDbGllbnRDaGFubmVsUGlwZWxpbmVGYWN0b3J5KHRoaXMpOwogICAgICAg\nIGNvbnN1bWVDYiA9IG5ldyBNZXNzYWdlQ29uc3VtZUNhbGxiYWNrKHRoaXMp\nOwogICAgICAgIGlmIChjZmcuaXNTU0xFbmFibGVkKCkpIHsKICAgICAgICAg\nICAgc3NsRmFjdG9yeSA9IG5ldyBTc2xDbGllbnRDb250ZXh0RmFjdG9yeShj\nZmcpOwogICAgICAgIH0KICAgICAgICAvLyBTY2hlZHVsZSBhbGwgb2YgdGhl\nIGNsaWVudCB0aW1lciB0YXNrcy4gQ3VycmVudGx5IHdlIG9ubHkgaGF2ZSB0\naGUKICAgICAgICAvLyBSZXF1ZXN0IFRpbWVvdXQgdGFzay4KICAgICAgICBj\nbGllbnRUaW1lci5zY2hlZHVsZShuZXcgUHViU3ViUmVxdWVzdFRpbWVvdXRU\nYXNrKCksIDAsIGNmZy5nZXRUaW1lb3V0VGhyZWFkUnVuSW50ZXJ2YWwoKSk7\nCiAgICB9CgogICAgLy8gUHVibGljIGdldHRlcnMgZm9yIHRoZSB2YXJpb3Vz\nIGNvbXBvbmVudHMgb2YgYSBjbGllbnQuCiAgICBwdWJsaWMgQ2xpZW50Q29u\nZmlndXJhdGlvbiBnZXRDb25maWd1cmF0aW9uKCkgewogICAgICAgIHJldHVy\nbiBjZmc7CiAgICB9CgogICAgcHVibGljIEhlZHdpZ1N1YnNjcmliZXIgZ2V0\nU3Vic2NyaWJlcigpIHsKICAgICAgICByZXR1cm4gc3ViOwogICAgfQoKICAg\nIC8vIFByb3RlY3RlZCBtZXRob2QgdG8gc2V0IHRoZSBzdWJzY3JpYmVyLiBU\naGlzIGlzIG5lZWRlZCBjdXJyZW50bHkgZm9yIGh1YgogICAgLy8gdmVyc2lv\nbnMgb2YgdGhlIGNsaWVudCBzdWJzY3JpYmVyLgogICAgcHJvdGVjdGVkIHZv\naWQgc2V0U3Vic2NyaWJlcihIZWR3aWdTdWJzY3JpYmVyIHN1YikgewogICAg\nICAgIHRoaXMuc3ViID0gc3ViOwogICAgfQoKICAgIHB1YmxpYyBIZWR3aWdQ\ndWJsaXNoZXIgZ2V0UHVibGlzaGVyKCkgewogICAgICAgIHJldHVybiBwdWI7\nCiAgICB9CgogICAgcHVibGljIE1lc3NhZ2VDb25zdW1lQ2FsbGJhY2sgZ2V0\nQ29uc3VtZUNhbGxiYWNrKCkgewogICAgICAgIHJldHVybiBjb25zdW1lQ2I7\nCiAgICB9CgogICAgcHVibGljIFNzbENsaWVudENvbnRleHRGYWN0b3J5IGdl\ndFNzbEZhY3RvcnkoKSB7CiAgICAgICAgcmV0dXJuIHNzbEZhY3Rvcnk7CiAg\nICB9CgogICAgLy8gV2UgbmVlZCB0byBkZWFsIHdpdGggdGhlIHBvc3NpYmxl\nIHByb2JsZW0gb2YgYSBQdWJTdWIgcmVxdWVzdCBiZWluZwogICAgLy8gd3Jp\ndHRlbiB0byBzdWNjZXNzZnVsbHkgdG8gdGhlIHNlcnZlciBob3N0IGJ1dCBm\nb3Igc29tZSByZWFzb24sIHRoZQogICAgLy8gYWNrIG1lc3NhZ2UgYmFjayBu\nZXZlciBjb21lcy4gV2hhdCBjb3VsZCBoYXBwZW4gaXMgdGhhdCB0aGUgVm9p\nZENhbGxiYWNrCiAgICAvLyBzdG9yZWQgaW4gdGhlIFJlc3BvbnNlSGFuZGxl\nci50eG4yUHVibGlzaERhdGEgbWFwIHdpbGwgbmV2ZXIgYmUgY2FsbGVkLgog\nICAgLy8gV2Ugc2hvdWxkIGhhdmUgYSBjb25maWd1cmVkIHRpbWVvdXQgc28g\naWYgdGhhdCBwYXNzZXMgZnJvbSB0aGUgdGltZSBhCiAgICAvLyB3cml0ZSB3\nYXMgc3VjY2Vzc2Z1bGx5IGRvbmUgdG8gdGhlIHNlcnZlciwgd2UgY2FuIGZh\naWwgdGhpcyBhc3luYyBQdWJTdWIKICAgIC8vIHRyYW5zYWN0aW9uLiBUaGUg\nY2FsbGVyIGNvdWxkIHBvc3NpYmx5IHJlZG8gdGhlIHRyYW5zYWN0aW9uIGlm\nIG5lZWRlZCBhdAogICAgLy8gYSBsYXRlciB0aW1lLiBDcmVhdGluZyBhIHRp\nbWVvdXQgY2xlYW5lciBUaW1lclRhc2sgdG8gZG8gdGhpcyBoZXJlLgogICAg\nY2xhc3MgUHViU3ViUmVxdWVzdFRpbWVvdXRUYXNrIGV4dGVuZHMgVGltZXJU\nYXNrIHsKICAgICAgICAvKioKICAgICAgICAgKiBJbXBsZW1lbnQgdGhlIFRp\nbWVyVGFzaydzIGFic3RyYWN0IHJ1biBtZXRob2QuCiAgICAgICAgICovCiAg\nICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHVibGljIHZvaWQgcnVuKCkgewog\nICAgICAgICAgICBpZiAobG9nZ2VyLmlzRGVidWdFbmFibGVkKCkpCiAgICAg\nICAgICAgICAgICBsb2dnZXIuZGVidWcoIlJ1bm5pbmcgdGhlIFB1YlN1YlJl\ncXVlc3QgVGltZW91dCBUYXNrIik7CiAgICAgICAgICAgIC8vIExvb3AgdGhy\nb3VnaCBhbGwgb3V0c3RhbmRpbmcgUHViU3ViRGF0YSByZXF1ZXN0cyBhbmQg\nY2hlY2sgaWYKICAgICAgICAgICAgLy8gdGhlIHJlcXVlc3RXcml0ZVRpbWUg\naGFzIHRpbWVkIG91dCBjb21wYXJlZCB0byB0aGUgY3VycmVudCB0aW1lLgog\nICAgICAgICAgICBsb25nIGN1clRpbWUgPSBTeXN0ZW0uY3VycmVudFRpbWVN\naWxsaXMoKTsKICAgICAgICAgICAgbG9uZyB0aW1lb3V0SW50ZXJ2YWwgPSBj\nZmcuZ2V0U2VydmVyQWNrUmVzcG9uc2VUaW1lb3V0KCk7CgogICAgICAgICAg\nICAvLyBGaXJzdCBjaGVjayB0aGUgUmVzcG9uc2VIYW5kbGVycyBhc3NvY2lh\ndGVkIHdpdGggY2FjaGVkCiAgICAgICAgICAgIC8vIGNoYW5uZWxzIGluIEhl\nZHdpZ1B1Ymxpc2hlci5ob3N0MkNoYW5uZWwuIFRoaXMgc3RvcmVzIHRoZQog\nICAgICAgICAgICAvLyBjaGFubmVscyB1c2VkIGZvciBQdWJsaXNoIGFuZCBV\nbnN1YnNjcmliZSByZXF1ZXN0cy4KICAgICAgICAgICAgZm9yIChDaGFubmVs\nIGNoYW5uZWwgOiBwdWIuaG9zdDJDaGFubmVsLnZhbHVlcygpKSB7CiAgICAg\nICAgICAgICAgICBSZXNwb25zZUhhbmRsZXIgcmVzcG9uc2VIYW5kbGVyID0g\nZ2V0UmVzcG9uc2VIYW5kbGVyRnJvbUNoYW5uZWwoY2hhbm5lbCk7CiAgICAg\nICAgICAgICAgICBmb3IgKFB1YlN1YkRhdGEgcHViU3ViRGF0YSA6IHJlc3Bv\nbnNlSGFuZGxlci50eG4yUHViU3ViRGF0YS52YWx1ZXMoKSkgewogICAgICAg\nICAgICAgICAgICAgIGNoZWNrUHViU3ViRGF0YVRvVGltZU91dChwdWJTdWJE\nYXRhLCByZXNwb25zZUhhbmRsZXIsIGN1clRpbWUsIHRpbWVvdXRJbnRlcnZh\nbCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAg\nICAgLy8gTm93IGRvIHRoZSBzYW1lIGZvciB0aGUgY2FjaGVkIGNoYW5uZWxz\nIGluCiAgICAgICAgICAgIC8vIEhlZHdpZ1N1YnNjcmliZXIudG9waWNTdWJz\nY3JpYmVyMkNoYW5uZWwuIFRoaXMgc3RvcmVzIHRoZQogICAgICAgICAgICAv\nLyBjaGFubmVscyB1c2VkIGV4Y2x1c2l2ZWx5IGZvciBTdWJzY3JpYmUgcmVx\ndWVzdHMuCiAgICAgICAgICAgIGZvciAoQ2hhbm5lbCBjaGFubmVsIDogc3Vi\nLnRvcGljU3Vic2NyaWJlcjJDaGFubmVsLnZhbHVlcygpKSB7CiAgICAgICAg\nICAgICAgICBSZXNwb25zZUhhbmRsZXIgcmVzcG9uc2VIYW5kbGVyID0gZ2V0\nUmVzcG9uc2VIYW5kbGVyRnJvbUNoYW5uZWwoY2hhbm5lbCk7CiAgICAgICAg\nICAgICAgICBmb3IgKFB1YlN1YkRhdGEgcHViU3ViRGF0YSA6IHJlc3BvbnNl\nSGFuZGxlci50eG4yUHViU3ViRGF0YS52YWx1ZXMoKSkgewogICAgICAgICAg\nICAgICAgICAgIGNoZWNrUHViU3ViRGF0YVRvVGltZU91dChwdWJTdWJEYXRh\nLCByZXNwb25zZUhhbmRsZXIsIGN1clRpbWUsIHRpbWVvdXRJbnRlcnZhbCk7\nCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9Cgog\nICAgICAgIHByaXZhdGUgdm9pZCBjaGVja1B1YlN1YkRhdGFUb1RpbWVPdXQo\nUHViU3ViRGF0YSBwdWJTdWJEYXRhLCBSZXNwb25zZUhhbmRsZXIgcmVzcG9u\nc2VIYW5kbGVyLCBsb25nIGN1clRpbWUsCiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICBsb25nIHRpbWVvdXRJbnRlcnZh\nbCkgewogICAgICAgICAgICBpZiAoY3VyVGltZSA+IHB1YlN1YkRhdGEucmVx\ndWVzdFdyaXRlVGltZSArIHRpbWVvdXRJbnRlcnZhbCkgewogICAgICAgICAg\nICAgICAgLy8gQ3VycmVudCBQdWJTdWJSZXF1ZXN0IGhhcyB0aW1lZCBvdXQg\nc28gcmVtb3ZlIGl0IGZyb20gdGhlCiAgICAgICAgICAgICAgICAvLyBSZXNw\nb25zZUhhbmRsZXIncyBtYXAgYW5kIGludm9rZSB0aGUgVm9pZENhbGxiYWNr\nJ3MKICAgICAgICAgICAgICAgIC8vIG9wZXJhdGlvbkZhaWxlZCBtZXRob2Qu\nCiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoIkN1cnJlbnQgUHViU3Vi\nUmVxdWVzdCBoYXMgdGltZWQgb3V0IGZvciBwdWJTdWJEYXRhOiAiICsgcHVi\nU3ViRGF0YSk7CiAgICAgICAgICAgICAgICByZXNwb25zZUhhbmRsZXIudHhu\nMlB1YlN1YkRhdGEucmVtb3ZlKHB1YlN1YkRhdGEudHhuSWQpOwogICAgICAg\nICAgICAgICAgcHViU3ViRGF0YS5jYWxsYmFjay5vcGVyYXRpb25GYWlsZWQo\ncHViU3ViRGF0YS5jb250ZXh0LCBuZXcgVW5jZXJ0YWluU3RhdGVFeGNlcHRp\nb24oCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIlNlcnZlciBhY2sgcmVzcG9uc2UgbmV2ZXIgcmVj\nZWl2ZWQgc28gUHViU3ViUmVxdWVzdCBoYXMgdGltZWQgb3V0ISIpKTsKICAg\nICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAvLyBXaGVuIHdlIGFy\nZSBkb25lIHdpdGggdGhlIGNsaWVudCwgdGhpcyBpcyBhIGNsZWFuIHdheSB0\nbyBncmFjZWZ1bGx5IGNsb3NlCiAgICAvLyBhbGwgY2hhbm5lbHMvc29ja2V0\ncyBjcmVhdGVkIGJ5IHRoZSBjbGllbnQgYW5kIHRvIGFsc28gcmVsZWFzZSBh\nbGwKICAgIC8vIHJlc291cmNlcyB1c2VkIGJ5IG5ldHR5LgogICAgcHVibGlj\nIHZvaWQgY2xvc2UoKSB7CiAgICAgICAgbG9nZ2VyLmluZm8oIlN0b3BwaW5n\nIHRoZSBjbGllbnQhIik7CiAgICAgICAgLy8gU2V0IHRoZSBjbGllbnQgYm9v\nbGVhbiBmbGFnIHRvIGluZGljYXRlIHRoZSBjbGllbnQgaGFzIHN0b3BwZWQu\nCiAgICAgICAgaXNTdG9wcGVkID0gdHJ1ZTsKICAgICAgICAvLyBTdG9wIHRo\nZSB0aW1lciBhbmQgYWxsIHRpbWVyIHRhc2sgdGhyZWFkcy4KICAgICAgICBj\nbGllbnRUaW1lci5jYW5jZWwoKTsKICAgICAgICAvLyBDbG9zZSBhbGwgb2Yg\ndGhlIG9wZW4gQ2hhbm5lbHMuCiAgICAgICAgZm9yIChDaGFubmVsIGNoYW5u\nZWwgOiBwdWIuaG9zdDJDaGFubmVsLnZhbHVlcygpKSB7CiAgICAgICAgICAg\nIGdldFJlc3BvbnNlSGFuZGxlckZyb21DaGFubmVsKGNoYW5uZWwpLmNoYW5u\nZWxDbG9zZWRFeHBsaWNpdGx5ID0gdHJ1ZTsKICAgICAgICAgICAgY2hhbm5l\nbC5jbG9zZSgpLmF3YWl0VW5pbnRlcnJ1cHRpYmx5KCk7CiAgICAgICAgfQog\nICAgICAgIGZvciAoQ2hhbm5lbCBjaGFubmVsIDogc3ViLnRvcGljU3Vic2Ny\naWJlcjJDaGFubmVsLnZhbHVlcygpKSB7CiAgICAgICAgICAgIGdldFJlc3Bv\nbnNlSGFuZGxlckZyb21DaGFubmVsKGNoYW5uZWwpLmNoYW5uZWxDbG9zZWRF\neHBsaWNpdGx5ID0gdHJ1ZTsKICAgICAgICAgICAgY2hhbm5lbC5jbG9zZSgp\nLmF3YWl0VW5pbnRlcnJ1cHRpYmx5KCk7CiAgICAgICAgfQogICAgICAgIC8v\nIENsZWFyIG91dCBhbGwgTWFwcy4KICAgICAgICB0b3BpYzJIb3N0LmNsZWFy\nKCk7CiAgICAgICAgaG9zdDJUb3BpY3MuY2xlYXIoKTsKICAgICAgICBwdWIu\naG9zdDJDaGFubmVsLmNsZWFyKCk7CiAgICAgICAgc3ViLnRvcGljU3Vic2Ny\naWJlcjJDaGFubmVsLmNsZWFyKCk7CiAgICAgICAgLy8gUmVsZWFzZSByZXNv\ndXJjZXMgdXNlZCBieSB0aGUgQ2hhbm5lbEZhY3Rvcnkgb24gdGhlIGNsaWVu\ndCBpZiB3ZSBhcmUKICAgICAgICAvLyB0aGUgb3duZXIgdGhhdCBjcmVhdGVk\nIGl0LgogICAgICAgIGlmIChvd25DaGFubmVsRmFjdG9yeSkgewogICAgICAg\nICAgICBzb2NrZXRGYWN0b3J5LnJlbGVhc2VFeHRlcm5hbFJlc291cmNlcygp\nOwogICAgICAgIH0KICAgICAgICBsb2dnZXIuaW5mbygiQ29tcGxldGVkIHN0\nb3BwaW5nIHRoZSBjbGllbnQhIik7CiAgICB9CgogICAgLyoqCiAgICAgKiBU\naGlzIGlzIGEgaGVscGVyIG1ldGhvZCB0byBkbyB0aGUgY29ubmVjdCBhdHRl\nbXB0IHRvIHRoZSBzZXJ2ZXIgZ2l2ZW4gdGhlCiAgICAgKiBpbnB1dHRlZCBo\nb3N0L3BvcnQuIFRoaXMgY2FuIGJlIHVzZWQgdG8gY29ubmVjdCB0byB0aGUg\nZGVmYXVsdCBzZXJ2ZXIKICAgICAqIGhvc3QvcG9ydCB3aGljaCBpcyB0aGUg\nVklQLiBUaGF0IHdpbGwgcGljayBhIHNlcnZlciBpbiB0aGUgY2x1c3RlciBh\ndAogICAgICogcmFuZG9tIHRvIGNvbm5lY3QgdG8gZm9yIHRoZSBpbml0aWFs\nIFB1YlN1YiBhdHRlbXB0ICh3aXRoIHJlZGlyZWN0IGxvZ2ljCiAgICAgKiBi\nZWluZyBkb25lIGF0IHRoZSBzZXJ2ZXIgc2lkZSkuIEFkZGl0aW9uYWxseSwg\ndGhpcyBjb3VsZCBiZSBjYWxsZWQgYWZ0ZXIKICAgICAqIHRoZSBjbGllbnQg\nbWFrZXMgYW4gaW5pdGlhbCBQdWJTdWIgYXR0ZW1wdCBhdCBhIHNlcnZlciwg\nYW5kIGlzIHJlZGlyZWN0ZWQKICAgICAqIHRvIHRoZSBvbmUgdGhhdCBpcyBy\nZXNwb25zaWJsZSBmb3IgdGhlIHRvcGljLiBPbmNlIHRoZSBjb25uZWN0IHRv\nIHRoZQogICAgICogc2VydmVyIGlzIGRvbmUsIHdlIHdpbGwgcGVyZm9ybSB0\naGUgY29ycmVzcG9uZGluZyBQdWJTdWIgd3JpdGUgb24gdGhhdAogICAgICog\nY2hhbm5lbC4KICAgICAqCiAgICAgKiBAcGFyYW0gcHViU3ViRGF0YQogICAg\nICogICAgICAgICAgICBQdWJTdWIgY2FsbCdzIGRhdGEgd3JhcHBlciBvYmpl\nY3QKICAgICAqIEBwYXJhbSBzZXJ2ZXJIb3N0CiAgICAgKiAgICAgICAgICAg\nIElucHV0IHNlcnZlciBob3N0IHRvIGNvbm5lY3QgdG8gb2YgdHlwZSBJbmV0\nU29ja2V0QWRkcmVzcwogICAgICovCiAgICBwdWJsaWMgdm9pZCBkb0Nvbm5l\nY3QoUHViU3ViRGF0YSBwdWJTdWJEYXRhLCBJbmV0U29ja2V0QWRkcmVzcyBz\nZXJ2ZXJIb3N0KSB7CiAgICAgICAgaWYgKGxvZ2dlci5pc0RlYnVnRW5hYmxl\nZCgpKQogICAgICAgICAgICBsb2dnZXIuZGVidWcoIkNvbm5lY3RpbmcgdG8g\naG9zdDogIiArIHNlcnZlckhvc3QgKyAiIHdpdGggcHViU3ViRGF0YTogIiAr\nIHB1YlN1YkRhdGEpOwogICAgICAgIC8vIFNldCB1cCB0aGUgQ2xpZW50Qm9v\ndFN0cmFwIHNvIHdlIGNhbiBjcmVhdGUgYSBuZXcgQ2hhbm5lbCBjb25uZWN0\naW9uCiAgICAgICAgLy8gdG8gdGhlIHNlcnZlci4KICAgICAgICBDbGllbnRC\nb290c3RyYXAgYm9vdHN0cmFwID0gbmV3IENsaWVudEJvb3RzdHJhcChzb2Nr\nZXRGYWN0b3J5KTsKICAgICAgICBib290c3RyYXAuc2V0UGlwZWxpbmVGYWN0\nb3J5KHBpcGVsaW5lRmFjdG9yeSk7CiAgICAgICAgYm9vdHN0cmFwLnNldE9w\ndGlvbigidGNwTm9EZWxheSIsIHRydWUpOwogICAgICAgIGJvb3RzdHJhcC5z\nZXRPcHRpb24oImtlZXBBbGl2ZSIsIHRydWUpOwoKICAgICAgICAvLyBTdGFy\ndCB0aGUgY29ubmVjdGlvbiBhdHRlbXB0IHRvIHRoZSBpbnB1dCBzZXJ2ZXIg\naG9zdC4KICAgICAgICBDaGFubmVsRnV0dXJlIGZ1dHVyZSA9IGJvb3RzdHJh\ncC5jb25uZWN0KHNlcnZlckhvc3QpOwogICAgICAgIGZ1dHVyZS5hZGRMaXN0\nZW5lcihuZXcgQ29ubmVjdENhbGxiYWNrKHB1YlN1YkRhdGEsIHNlcnZlckhv\nc3QsIHRoaXMpKTsKICAgIH0KCiAgICAvKioKICAgICAqIEhlbHBlciBtZXRo\nb2QgdG8gc3RvcmUgdGhlIHRvcGljMkhvc3QgbWFwcGluZyBpbiB0aGUgSGVk\nd2lnQ2xpZW50IGNhY2hlCiAgICAgKiBtYXAuIFRoaXMgbWV0aG9kIGlzIGFz\nc3VtZWQgdG8gYmUgY2FsbGVkIHdoZW4gd2UndmUgZG9uZSBhIHN1Y2Nlc3Nm\ndWwKICAgICAqIGNvbm5lY3Rpb24gdG8gdGhlIGNvcnJlY3Qgc2VydmVyIHRv\ncGljIG1hc3Rlci4KICAgICAqCiAgICAgKiBAcGFyYW0gcHViU3ViRGF0YQog\nICAgICogICAgICAgICAgICBQdWJTdWIgd3JhcHBlciBkYXRhCiAgICAgKiBA\ncGFyYW0gY2hhbm5lbAogICAgICogICAgICAgICAgICBOZXR0eSBDaGFubmVs\nCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIHN0b3JlVG9waWMySG9zdE1h\ncHBpbmcoUHViU3ViRGF0YSBwdWJTdWJEYXRhLCBDaGFubmVsIGNoYW5uZWwp\nIHsKICAgICAgICAvLyBSZXRyaWV2ZSB0aGUgc2VydmVyIGhvc3QgdGhhdCB3\nZSd2ZSBjb25uZWN0ZWQgdG8gYW5kIHN0b3JlIHRoZQogICAgICAgIC8vIG1h\ncHBpbmcgZnJvbSB0aGUgdG9waWMgdG8gdGhpcyBob3N0LiBGb3IgYWxsIG90\naGVyIG5vbi1yZWRpcmVjdGVkCiAgICAgICAgLy8gc2VydmVyIHN0YXR1c2Vz\nLCB3ZSBjb25zaWRlciB0aGF0IGFzIGEgc3VjY2Vzc2Z1bCBjb25uZWN0aW9u\nIHRvIHRoZQogICAgICAgIC8vIGNvcnJlY3QgdG9waWMgbWFzdGVyLgogICAg\nICAgIEluZXRTb2NrZXRBZGRyZXNzIGhvc3QgPSBnZXRIb3N0RnJvbUNoYW5u\nZWwoY2hhbm5lbCk7CiAgICAgICAgaWYgKHRvcGljMkhvc3QuY29udGFpbnNL\nZXkocHViU3ViRGF0YS50b3BpYykgJiYgdG9waWMySG9zdC5nZXQocHViU3Vi\nRGF0YS50b3BpYykuZXF1YWxzKGhvc3QpKSB7CiAgICAgICAgICAgIC8vIEVu\ndHJ5IGluIG1hcCBleGlzdHMgZm9yIHRoZSB0b3BpYyBidXQgaXQgaXMgdGhl\nIHNhbWUgYXMgdGhlCiAgICAgICAgICAgIC8vIGN1cnJlbnQgaG9zdC4gSW4g\ndGhpcyBjYXNlIHRoZXJlIGlzIG5vdGhpbmcgdG8gZG8uCiAgICAgICAgICAg\nIHJldHVybjsKICAgICAgICB9CgogICAgICAgIC8vIFN0b3JlIHRoZSByZWxl\ndmFudCBtYXBwaW5ncyBmb3IgdGhpcyB0b3BpYyBhbmQgaG9zdCBjb21iaW5h\ndGlvbi4KICAgICAgICBpZiAobG9nZ2VyLmlzRGVidWdFbmFibGVkKCkpCiAg\nICAgICAgICAgIGxvZ2dlci5kZWJ1ZygiU3RvcmluZyBpbmZvIGZvciB0b3Bp\nYzogIiArIHB1YlN1YkRhdGEudG9waWMudG9TdHJpbmdVdGY4KCkgKyAiLCBv\nbGQgaG9zdDogIgogICAgICAgICAgICAgICAgICAgICAgICAgKyB0b3BpYzJI\nb3N0LmdldChwdWJTdWJEYXRhLnRvcGljKSArICIsIG5ldyBob3N0OiAiICsg\naG9zdCk7CiAgICAgICAgdG9waWMySG9zdC5wdXQocHViU3ViRGF0YS50b3Bp\nYywgaG9zdCk7CiAgICAgICAgaWYgKGhvc3QyVG9waWNzLmNvbnRhaW5zS2V5\nKGhvc3QpKSB7CiAgICAgICAgICAgIGhvc3QyVG9waWNzLmdldChob3N0KS5h\nZGQocHViU3ViRGF0YS50b3BpYyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAg\nICAgICAgTGlua2VkTGlzdDxCeXRlU3RyaW5nPiB0b3BpY3NMaXN0ID0gbmV3\nIExpbmtlZExpc3Q8Qnl0ZVN0cmluZz4oKTsKICAgICAgICAgICAgdG9waWNz\nTGlzdC5hZGQocHViU3ViRGF0YS50b3BpYyk7CiAgICAgICAgICAgIGhvc3Qy\nVG9waWNzLnB1dChob3N0LCB0b3BpY3NMaXN0KTsKICAgICAgICB9CiAgICB9\nCgogICAgLyoqCiAgICAgKiBIZWxwZXIgc3RhdGljIG1ldGhvZCB0byBnZXQg\ndGhlIFN0cmluZyBIb3N0bmFtZTpQb3J0IGZyb20gYSBuZXR0eQogICAgICog\nQ2hhbm5lbC4gQXNzdW1wdGlvbiBpcyB0aGF0IHRoZSBuZXR0eSBDaGFubmVs\nIHdhcyBvcmlnaW5hbGx5IGNyZWF0ZWQgd2l0aAogICAgICogYW4gSW5ldFNv\nY2tldEFkZHJlc3MuIFRoaXMgaXMgdHJ1ZSB3aXRoIHRoZSBIZWR3aWcgbmV0\ndHkgaW1wbGVtZW50YXRpb24uCiAgICAgKgogICAgICogQHBhcmFtIGNoYW5u\nZWwKICAgICAqICAgICAgICAgICAgTmV0dHkgY2hhbm5lbCB0byBleHRyYWN0\nIHRoZSBob3N0bmFtZSBhbmQgcG9ydCBmcm9tLgogICAgICogQHJldHVybiBT\ndHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIEhvc3RuYW1lOlBvcnQgZnJv\nbSB0aGUgTmV0dHkgQ2hhbm5lbAogICAgICovCiAgICBwdWJsaWMgc3RhdGlj\nIEluZXRTb2NrZXRBZGRyZXNzIGdldEhvc3RGcm9tQ2hhbm5lbChDaGFubmVs\nIGNoYW5uZWwpIHsKICAgICAgICByZXR1cm4gKEluZXRTb2NrZXRBZGRyZXNz\nKSBjaGFubmVsLmdldFJlbW90ZUFkZHJlc3MoKTsKICAgIH0KCiAgICAvKioK\nICAgICAqIEhlbHBlciBzdGF0aWMgbWV0aG9kIHRvIGdldCB0aGUgUmVzcG9u\nc2VIYW5kbGVyIGluc3RhbmNlIGZyb20gYSBDaGFubmVsCiAgICAgKiB2aWEg\ndGhlIENoYW5uZWxQaXBlbGluZSBpdCBpcyBhc3NvY2lhdGVkIHdpdGguIFRo\nZSBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlCiAgICAgKiBsYXN0IENoYW5uZWxI\nYW5kbGVyIHRpZWQgdG8gdGhlIENoYW5uZWxQaXBlbGluZSBpcyB0aGUgUmVz\ncG9uc2VIYW5kbGVyLgogICAgICoKICAgICAqIEBwYXJhbSBjaGFubmVsCiAg\nICAgKiAgICAgICAgICAgIENoYW5uZWwgd2UgYXJlIHJldHJpZXZpbmcgdGhl\nIFJlc3BvbnNlSGFuZGxlciBpbnN0YW5jZSBmb3IKICAgICAqIEByZXR1cm4g\nUmVzcG9uc2VIYW5kbGVyIEluc3RhbmNlIHRpZWQgdG8gdGhlIENoYW5uZWwn\ncyBQaXBlbGluZQogICAgICovCiAgICBwdWJsaWMgc3RhdGljIFJlc3BvbnNl\nSGFuZGxlciBnZXRSZXNwb25zZUhhbmRsZXJGcm9tQ2hhbm5lbChDaGFubmVs\nIGNoYW5uZWwpIHsKICAgICAgICByZXR1cm4gKFJlc3BvbnNlSGFuZGxlcikg\nY2hhbm5lbC5nZXRQaXBlbGluZSgpLmdldExhc3QoKTsKICAgIH0KCiAgICAv\nLyBQdWJsaWMgZ2V0dGVyIGZvciBlbnRyaWVzIGluIHRoZSB0b3BpYzJIb3N0\nIE1hcC4KICAgIHB1YmxpYyBJbmV0U29ja2V0QWRkcmVzcyBnZXRIb3N0Rm9y\nVG9waWMoQnl0ZVN0cmluZyB0b3BpYykgewogICAgICAgIHJldHVybiB0b3Bp\nYzJIb3N0LmdldCh0b3BpYyk7CiAgICB9CgogICAgLy8gSWYgYSBzZXJ2ZXIg\naG9zdCBnb2VzIGRvd24gb3IgdGhlIGNoYW5uZWwgdG8gaXQgZ2V0cyBkaXNj\nb25uZWN0ZWQsCiAgICAvLyB3ZSB3YW50IHRvIGNsZWFyIG91dCBhbGwgcmVs\nZXZhbnQgY2FjaGVkIGluZm9ybWF0aW9uLiBXZSdsbAogICAgLy8gbmVlZCB0\nbyByZW1vdmUgYWxsIG9mIHRoZSB0b3BpYyBtYXBwaW5ncyB0aGF0IHRoZSBo\nb3N0IHdhcwogICAgLy8gcmVzcG9uc2libGUgZm9yLgogICAgcHVibGljIHZv\naWQgY2xlYXJBbGxUb3BpY3NGb3JIb3N0KEluZXRTb2NrZXRBZGRyZXNzIGhv\nc3QpIHsKICAgICAgICBpZiAobG9nZ2VyLmlzRGVidWdFbmFibGVkKCkpCiAg\nICAgICAgICAgIGxvZ2dlci5kZWJ1ZygiQ2xlYXJpbmcgYWxsIHRvcGljcyBm\nb3IgaG9zdDogIiArIGhvc3QpOwogICAgICAgIC8vIEZvciBlYWNoIG9mIHRo\nZSB0b3BpY3MgdGhhdCB0aGUgaG9zdCB3YXMgcmVzcG9uc2libGUgZm9yLAog\nICAgICAgIC8vIHJlbW92ZSBpdCBmcm9tIHRoZSB0b3BpYzJIb3N0IG1hcHBp\nbmcuCiAgICAgICAgaWYgKGhvc3QyVG9waWNzLmNvbnRhaW5zS2V5KGhvc3Qp\nKSB7CiAgICAgICAgICAgIGZvciAoQnl0ZVN0cmluZyB0b3BpYyA6IGhvc3Qy\nVG9waWNzLmdldChob3N0KSkgewogICAgICAgICAgICAgICAgaWYgKGxvZ2dl\nci5pc0RlYnVnRW5hYmxlZCgpKQogICAgICAgICAgICAgICAgICAgIGxvZ2dl\nci5kZWJ1ZygiUmVtb3ZpbmcgbWFwcGluZyBmb3IgdG9waWM6ICIgKyB0b3Bp\nYy50b1N0cmluZ1V0ZjgoKSArICIgZnJvbSBob3N0OiAiICsgaG9zdCk7CiAg\nICAgICAgICAgICAgICB0b3BpYzJIb3N0LnJlbW92ZSh0b3BpYyk7CiAgICAg\nICAgICAgIH0KICAgICAgICAgICAgLy8gTm93IGl0IGlzIHNhZmUgdG8gcmVt\nb3ZlIHRoZSBob3N0MlRvcGljcyBtYXBwaW5nIGVudHJ5LgogICAgICAgICAg\nICBob3N0MlRvcGljcy5yZW1vdmUoaG9zdCk7CiAgICAgICAgfQogICAgfQoK\nICAgIC8vIFB1YmxpYyBnZXR0ZXIgdG8gc2VlIGlmIHRoZSBjbGllbnQgaGFz\nIGJlZW4gc3RvcHBlZC4KICAgIHB1YmxpYyBib29sZWFuIGhhc1N0b3BwZWQo\nKSB7CiAgICAgICAgcmV0dXJuIGlzU3RvcHBlZDsKICAgIH0KCiAgICAvLyBQ\ndWJsaWMgZ2V0dGVyIHRvIGdldCB0aGUgY2xpZW50J3MgVGltZXIgb2JqZWN0\nLgogICAgLy8gVGhpcyBpcyBzbyB3ZSBjYW4gcmV1c2UgdGhpcyBhbmQgbm90\nIGhhdmUgdG8gY3JlYXRlIG11bHRpcGxlIFRpbWVyCiAgICAvLyBvYmplY3Rz\nLgogICAgcHVibGljIFRpbWVyIGdldENsaWVudFRpbWVyKCkgewogICAgICAg\nIHJldHVybiBjbGllbnRUaW1lcjsKICAgIH0KCn0K\n","encoding":"base64"}

