{"sha":"a8552f44f30d589388153f9fab3efdbfaf4658a8","node_id":"MDQ6QmxvYjE1NzU5NTY6YTg1NTJmNDRmMzBkNTg5Mzg4MTUzZjlmYWIzZWZkYmZhZjQ2NThhOA==","size":4956,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/a8552f44f30d589388153f9fab3efdbfaf4658a8","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQubmV0dHk7CgppbXBvcnQg\namF2YS5uZXQuSW5ldFNvY2tldEFkZHJlc3M7CmltcG9ydCBqYXZhLnV0aWwu\nTGlua2VkTGlzdDsKCmltcG9ydCBvcmcuc2xmNGouTG9nZ2VyOwppbXBvcnQg\nb3JnLnNsZjRqLkxvZ2dlckZhY3Rvcnk7CmltcG9ydCBvcmcuamJvc3MubmV0\ndHkuY2hhbm5lbC5DaGFubmVsRnV0dXJlOwppbXBvcnQgb3JnLmpib3NzLm5l\ndHR5LmNoYW5uZWwuQ2hhbm5lbEZ1dHVyZUxpc3RlbmVyOwoKaW1wb3J0IGNv\nbS5nb29nbGUucHJvdG9idWYuQnl0ZVN0cmluZzsKaW1wb3J0IG9yZy5hcGFj\naGUuaGVkd2lnLmNsaWVudC5jb25mLkNsaWVudENvbmZpZ3VyYXRpb247Cmlt\ncG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQuZGF0YS5QdWJTdWJEYXRh\nOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuZXhjZXB0aW9ucy5QdWJTdWJF\neGNlcHRpb24uU2VydmljZURvd25FeGNlcHRpb247CmltcG9ydCBvcmcuYXBh\nY2hlLmhlZHdpZy51dGlsLkhlZHdpZ1NvY2tldEFkZHJlc3M7CgpwdWJsaWMg\nY2xhc3MgV3JpdGVDYWxsYmFjayBpbXBsZW1lbnRzIENoYW5uZWxGdXR1cmVM\naXN0ZW5lciB7CgogICAgcHJpdmF0ZSBzdGF0aWMgTG9nZ2VyIGxvZ2dlciA9\nIExvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKFdyaXRlQ2FsbGJhY2suY2xhc3Mp\nOwoKICAgIC8vIFByaXZhdGUgbWVtYmVyIHZhcmlhYmxlcwogICAgcHJpdmF0\nZSBQdWJTdWJEYXRhIHB1YlN1YkRhdGE7CiAgICBwcml2YXRlIGZpbmFsIEhl\nZHdpZ0NsaWVudEltcGwgY2xpZW50OwogICAgcHJpdmF0ZSBmaW5hbCBDbGll\nbnRDb25maWd1cmF0aW9uIGNmZzsKCiAgICAvLyBDb25zdHJ1Y3RvcgogICAg\ncHVibGljIFdyaXRlQ2FsbGJhY2soUHViU3ViRGF0YSBwdWJTdWJEYXRhLCBI\nZWR3aWdDbGllbnRJbXBsIGNsaWVudCkgewogICAgICAgIHN1cGVyKCk7CiAg\nICAgICAgdGhpcy5wdWJTdWJEYXRhID0gcHViU3ViRGF0YTsKICAgICAgICB0\naGlzLmNsaWVudCA9IGNsaWVudDsKICAgICAgICB0aGlzLmNmZyA9IGNsaWVu\ndC5nZXRDb25maWd1cmF0aW9uKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nb3BlcmF0aW9uQ29tcGxldGUoQ2hhbm5lbEZ1dHVyZSBmdXR1cmUpIHRocm93\ncyBFeGNlcHRpb24gewogICAgICAgIC8vIElmIHRoZSBjbGllbnQgaGFzIHN0\nb3BwZWQsIHRoZXJlIGlzIG5vIG5lZWQgdG8gcHJvY2VlZAogICAgICAgIC8v\nIHdpdGggYW55IGNhbGxiYWNrIGxvZ2ljIGhlcmUuCiAgICAgICAgaWYgKGNs\naWVudC5oYXNTdG9wcGVkKCkpCiAgICAgICAgICAgIHJldHVybjsKCiAgICAg\nICAgLy8gV2hlbiB0aGUgd3JpdGUgb3BlcmF0aW9uIHRvIHRoZSBzZXJ2ZXIg\naXMgZG9uZSwgd2UganVzdCBuZWVkIHRvIGNoZWNrCiAgICAgICAgLy8gaWYg\naXQgd2FzIHN1Y2Nlc3NmdWwgb3Igbm90LgogICAgICAgIEluZXRTb2NrZXRB\nZGRyZXNzIGhvc3QgPSBIZWR3aWdDbGllbnRJbXBsLmdldEhvc3RGcm9tQ2hh\nbm5lbChmdXR1cmUuZ2V0Q2hhbm5lbCgpKTsKICAgICAgICBpZiAoIWZ1dHVy\nZS5pc1N1Y2Nlc3MoKSkgewogICAgICAgICAgICBsb2dnZXIuZXJyb3IoIkVy\ncm9yIHdyaXRpbmcgb24gY2hhbm5lbCB0byBob3N0OiAiICsgaG9zdCk7CiAg\nICAgICAgICAgIC8vIE9uIGEgd3JpdGUgZmFpbHVyZSBmb3IgYSBQdWJTdWJS\nZXF1ZXN0LCB3ZSBhbHNvIHdhbnQgdG8gcmVtb3ZlCiAgICAgICAgICAgIC8v\nIHRoZSBzYXZlZCB0eG5JZCB0byBQdWJTdWJEYXRhIGluIHRoZSBSZXNwb25z\nZUhhbmRsZXIuIFRoZXNlCiAgICAgICAgICAgIC8vIHJlcXVlc3RzIHdpbGwg\nbm90IHJlY2VpdmUgYW4gYWNrIHJlc3BvbnNlIGZyb20gdGhlIHNlcnZlcgog\nICAgICAgICAgICAvLyBzbyB0aGVyZSBpcyBubyBwb2ludCBzdG9yaW5nIHRo\nYXQgaW5mb3JtYXRpb24gdGhlcmUgYW55bW9yZS4KICAgICAgICAgICAgSGVk\nd2lnQ2xpZW50SW1wbC5nZXRSZXNwb25zZUhhbmRsZXJGcm9tQ2hhbm5lbChm\ndXR1cmUuZ2V0Q2hhbm5lbCgpKS50eG4yUHViU3ViRGF0YS5yZW1vdmUocHVi\nU3ViRGF0YS50eG5JZCk7CgogICAgICAgICAgICAvLyBJZiB3ZSB3ZXJlIG5v\ndCBhYmxlIHRvIHdyaXRlIG9uIHRoZSBjaGFubmVsIHRvIHRoZSBzZXJ2ZXIg\naG9zdCwKICAgICAgICAgICAgLy8gdGhlIGhvc3QgY291bGQgaGF2ZSBkaWVk\nIG9yIHNvbWV0aGluZyBpcyB3cm9uZyB3aXRoIHRoZSBjaGFubmVsCiAgICAg\nICAgICAgIC8vIGNvbm5lY3Rpb24gd2hlcmUgd2UgY2FuIGNvbm5lY3QgdG8g\ndGhlIGhvc3QsIGJ1dCBub3Qgd3JpdGUgdG8gaXQuCiAgICAgICAgICAgIEJ5\ndGVTdHJpbmcgaG9zdFN0cmluZyA9IChob3N0ID09IG51bGwpID8gbnVsbCA6\nIEJ5dGVTdHJpbmcuY29weUZyb21VdGY4KEhlZHdpZ1NvY2tldEFkZHJlc3Mu\nc29ja0FkZHJTdHIoaG9zdCkpOwogICAgICAgICAgICBpZiAocHViU3ViRGF0\nYS53cml0ZUZhaWxlZFNlcnZlcnMgIT0gbnVsbCAmJiBwdWJTdWJEYXRhLndy\naXRlRmFpbGVkU2VydmVycy5jb250YWlucyhob3N0U3RyaW5nKSkgewogICAg\nICAgICAgICAgICAgLy8gV2UndmUgYWxyZWFkeSB0cmllZCB0byB3cml0ZSB0\nbyB0aGlzIHNlcnZlciBwcmV2aW91c2x5IGFuZAogICAgICAgICAgICAgICAg\nLy8gZmFpbGVkLCBzbyBpbnZva2UgdGhlIG9wZXJhdGlvbkZhaWxlZCBjYWxs\nYmFjay4KICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcigiRXJyb3Igd3Jp\ndGluZyB0byBob3N0IG1vcmUgdGhhbiBvbmNlIHNvIGp1c3QgaW52b2tlIHRo\nZSBvcGVyYXRpb25GYWlsZWQgY2FsbGJhY2shIik7CiAgICAgICAgICAgICAg\nICBwdWJTdWJEYXRhLmNhbGxiYWNrLm9wZXJhdGlvbkZhaWxlZChwdWJTdWJE\nYXRhLmNvbnRleHQsIG5ldyBTZXJ2aWNlRG93bkV4Y2VwdGlvbigKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAiRXJyb3Igd2hpbGUgd3JpdGluZyBtZXNzYWdlIHRvIHNlcnZlcjog\nIiArIGhvc3RTdHJpbmcpKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAg\nICAgICAgICAgIGlmIChsb2dnZXIuaXNEZWJ1Z0VuYWJsZWQoKSkKICAgICAg\nICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoIlRyeSB0byBzZW5kIHRoZSBQ\ndWJTdWJSZXF1ZXN0IGFnYWluIHRvIHRoZSBkZWZhdWx0IHNlcnZlciBob3N0\nL1ZJUCBmb3IgcHViU3ViRGF0YTogIgogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICArIHB1YlN1YkRhdGEpOwogICAgICAgICAgICAgICAgLy8g\nS2VlcCB0cmFjayBvZiB0aGlzIGN1cnJlbnQgc2VydmVyIHRoYXQgd2UgZmFp\nbGVkIHRvIHdyaXRlIHRvCiAgICAgICAgICAgICAgICAvLyBidXQgcmV0cnkg\ndGhlIHJlcXVlc3Qgb24gdGhlIGRlZmF1bHQgc2VydmVyIGhvc3QvVklQLgog\nICAgICAgICAgICAgICAgaWYgKHB1YlN1YkRhdGEud3JpdGVGYWlsZWRTZXJ2\nZXJzID09IG51bGwpCiAgICAgICAgICAgICAgICAgICAgcHViU3ViRGF0YS53\ncml0ZUZhaWxlZFNlcnZlcnMgPSBuZXcgTGlua2VkTGlzdDxCeXRlU3RyaW5n\nPigpOwogICAgICAgICAgICAgICAgcHViU3ViRGF0YS53cml0ZUZhaWxlZFNl\ncnZlcnMuYWRkKGhvc3RTdHJpbmcpOwogICAgICAgICAgICAgICAgY2xpZW50\nLmRvQ29ubmVjdChwdWJTdWJEYXRhLCBjZmcuZ2V0RGVmYXVsdFNlcnZlckhv\nc3QoKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAg\nICAgICAvLyBOb3cgdGhhdCB0aGUgd3JpdGUgdG8gdGhlIHNlcnZlciBpcyBk\nb25lLCB3ZSBoYXZlIHRvIHdhaXQgZm9yIGl0CiAgICAgICAgICAgIC8vIHRv\nIHJlc3BvbmQuIFRoZSBSZXNwb25zZUhhbmRsZXIgd2lsbCB0YWtlIGNhcmUg\nb2YgdGhlIGFjawogICAgICAgICAgICAvLyByZXNwb25zZSBmcm9tIHRoZSBz\nZXJ2ZXIgYmVmb3JlIHdlIGNhbiBkZXRlcm1pbmUgaWYgdGhlIGFzeW5jCiAg\nICAgICAgICAgIC8vIFB1YlN1YiBjYWxsIGhhcyByZWFsbHkgY29tcGxldGVk\nIHN1Y2Nlc3NmdWxseSBvciBub3QuCiAgICAgICAgICAgIGlmIChsb2dnZXIu\naXNEZWJ1Z0VuYWJsZWQoKSkKICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1\nZygiU3VjY2Vzc2Z1bGx5IHdyb3RlIHRvIGhvc3Q6ICIgKyBob3N0ICsgIiBm\nb3IgcHViU3ViRGF0YTogIiArIHB1YlN1YkRhdGEpOwogICAgICAgIH0KICAg\nIH0KCn0K\n","encoding":"base64"}

