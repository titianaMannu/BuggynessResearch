{"sha":"8f0fda8166f21c507e3a9088f1e1e0e4cf1f3cb4","node_id":"MDQ6QmxvYjE1NzU5NTY6OGYwZmRhODE2NmYyMWM1MDdlM2E5MDg4ZjFlMWUwZTRjZjFmM2NiNA==","size":6527,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/8f0fda8166f21c507e3a9088f1e1e0e4cf1f3cb4","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy51dGlsOwoKaW1wb3J0IGphdmEudXRp\nbC5jb25jdXJyZW50LkxpbmtlZEJsb2NraW5nUXVldWU7CmltcG9ydCBqYXZh\nLnV0aWwuY29uY3VycmVudC5hdG9taWMuQXRvbWljSW50ZWdlcjsKCmltcG9y\ndCBvcmcuc2xmNGouTG9nZ2VyOwppbXBvcnQgb3JnLnNsZjRqLkxvZ2dlckZh\nY3Rvcnk7CgppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuZXhjZXB0aW9ucy5Q\ndWJTdWJFeGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5leGNl\ncHRpb25zLlB1YlN1YkV4Y2VwdGlvbi5Db21wb3NpdGVFeGNlcHRpb247Cgpw\ndWJsaWMgY2xhc3MgQ2FsbGJhY2tVdGlscyB7CgogICAgLyoqCiAgICAgKiBB\nIGNhbGxiYWNrIHRoYXQgd2FpdHMgZm9yIGFsbCBvZiBhIG51bWJlciBvZiBl\ndmVudHMgdG8gZmlyZS4gSWYgYW55IGZhaWwsCiAgICAgKiB0aGVuIGZhaWwg\ndGhlIGZpbmFsIGNhbGxiYWNrIHdpdGggYSBjb21wb3NpdGUgZXhjZXB0aW9u\nLgogICAgICoKICAgICAqIFRPRE86IGNoYW5nZSB0aGlzIHRvIHVzZSBhbnkg\nRXhjZXB0aW9uIGFuZCBtYWtlIENvbXBvc2l0ZUV4Y2VwdGlvbgogICAgICog\nZ2VuZXJpYywgbm90IGEgUHViU3ViRXhjZXB0aW9uLgogICAgICoKICAgICAq\nIEBwYXJhbSBleHBlY3RlZAogICAgICogICAgICAgICAgICBOdW1iZXIgb2Yg\nZXhwZWN0ZWQgY2FsbGJhY2tzLgogICAgICogQHBhcmFtIGNiCiAgICAgKiAg\nICAgICAgICAgIFRoZSBmaW5hbCBjYWxsYmFjayB0byBjYWxsLgogICAgICog\nQHBhcmFtIGN0eAogICAgICogQHBhcmFtIGxvZ2dlcgogICAgICogICAgICAg\nICAgICBNYXkgYmUgbnVsbC4KICAgICAqIEBwYXJhbSBzdWNjZXNzTXNnCiAg\nICAgKiAgICAgICAgICAgIElmIG5vdCBudWxsLCB0aGVuIHRoaXMgaXMgbG9n\nZ2VkIG9uIHN1Y2Nlc3MuCiAgICAgKiBAcGFyYW0gZmFpbHVyZU1zZwogICAg\nICogICAgICAgICAgICBJZiBub3QgbnVsbCwgdGhlbiB0aGlzIGlzIGxvZ2dl\nZCBvbiBmYWlsdXJlLgogICAgICogQHBhcmFtIGVhZ2VyRXJyb3JIYW5kbGVy\nCiAgICAgKiAgICAgICAgICAgIElmIG5vdCBudWxsLCB0aGVuIHRoaXMgd2ls\nbCBiZSBleGVjdXRlZCBhZnRlciB0aGUgZmlyc3QKICAgICAqICAgICAgICAg\nICAgZmFpbHVyZSAoYnV0IGJlZm9yZSB0aGUgZmluYWwgZmFpbHVyZSBjYWxs\nYmFjaykuIFVzZWZ1bCBmb3IKICAgICAqICAgICAgICAgICAgcmVsZWFzaW5n\nIHJlc291cmNlcywgZXRjLiBhcyBzb29uIGFzIHdlIGtub3cgdGhlIGNvbXBv\nc2l0ZQogICAgICogICAgICAgICAgICBvcGVyYXRpb24gaXMgZG9vbWVkLgog\nICAgICogQHJldHVybiB0aGUgZ2VuZXJhdGVkIGNhbGxiYWNrCiAgICAgKi8K\nICAgIHB1YmxpYyBzdGF0aWMgQ2FsbGJhY2s8Vm9pZD4gbXVsdGlDYWxsYmFj\nayhmaW5hbCBpbnQgZXhwZWN0ZWQsIGZpbmFsIENhbGxiYWNrPFZvaWQ+IGNi\nLCBmaW5hbCBPYmplY3QgY3R4LAogICAgICAgICAgICBmaW5hbCBMb2dnZXIg\nbG9nZ2VyLCBmaW5hbCBTdHJpbmcgc3VjY2Vzc01zZywgZmluYWwgU3RyaW5n\nIGZhaWx1cmVNc2csCiAgICAgICAgICAgIFJ1bm5hYmxlIGVhZ2VyRXJyb3JI\nYW5kbGVyKSB7CiAgICAgICAgaWYgKGV4cGVjdGVkID09IDApIHsKICAgICAg\nICAgICAgY2Iub3BlcmF0aW9uRmluaXNoZWQoY3R4LCBudWxsKTsKICAgICAg\nICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAg\nICAgcmV0dXJuIG5ldyBDYWxsYmFjazxWb2lkPigpIHsKCiAgICAgICAgICAg\nICAgICBmaW5hbCBBdG9taWNJbnRlZ2VyIGRvbmUgPSBuZXcgQXRvbWljSW50\nZWdlcigpOwogICAgICAgICAgICAgICAgZmluYWwgTGlua2VkQmxvY2tpbmdR\ndWV1ZTxQdWJTdWJFeGNlcHRpb24+IGV4Y2VwdGlvbnMgPSBuZXcgTGlua2Vk\nQmxvY2tpbmdRdWV1ZTxQdWJTdWJFeGNlcHRpb24+KCk7CgogICAgICAgICAg\nICAgICAgcHJpdmF0ZSB2b2lkIHRpY2soKSB7CiAgICAgICAgICAgICAgICAg\nICAgaWYgKGRvbmUuaW5jcmVtZW50QW5kR2V0KCkgPT0gZXhwZWN0ZWQpIHsK\nICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4Y2VwdGlvbnMuaXNFbXB0\neSgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYi5vcGVyYXRp\nb25GaW5pc2hlZChjdHgsIG51bGwpOwogICAgICAgICAgICAgICAgICAgICAg\nICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2Iub3Bl\ncmF0aW9uRmFpbGVkKGN0eCwgbmV3IENvbXBvc2l0ZUV4Y2VwdGlvbihleGNl\ncHRpb25zKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAg\nICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAg\nICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBvcGVy\nYXRpb25GYWlsZWQoT2JqZWN0IGN0eCwgUHViU3ViRXhjZXB0aW9uIGV4Y2Vw\ndGlvbikgewogICAgICAgICAgICAgICAgICAgIGlmIChsb2dnZXIgIT0gbnVs\nbCAmJiBmYWlsdXJlTXNnICE9IG51bGwpCiAgICAgICAgICAgICAgICAgICAg\nICAgIGxvZ2dlci5lcnJvcihmYWlsdXJlTXNnLCBleGNlcHRpb24pOwogICAg\nICAgICAgICAgICAgICAgIGV4Y2VwdGlvbnMuYWRkKGV4Y2VwdGlvbik7CiAg\nICAgICAgICAgICAgICAgICAgdGljaygpOwogICAgICAgICAgICAgICAgfQoK\nICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgcHVi\nbGljIHZvaWQgb3BlcmF0aW9uRmluaXNoZWQoT2JqZWN0IGN0eCwgVm9pZCBy\nZXN1bHRPZk9wZXJhdGlvbikgewogICAgICAgICAgICAgICAgICAgIGlmIChs\nb2dnZXIgIT0gbnVsbCAmJiBzdWNjZXNzTXNnICE9IG51bGwpCiAgICAgICAg\nICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKHN1Y2Nlc3NNc2cpOwogICAg\nICAgICAgICAgICAgICAgIHRpY2soKTsKICAgICAgICAgICAgICAgIH0KCiAg\nICAgICAgICAgIH07CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICog\nQSBjYWxsYmFjayB0aGF0IHdhaXRzIGZvciBhbGwgb2YgYSBudW1iZXIgb2Yg\nZXZlbnRzIHRvIGZpcmUuIElmIGFueSBmYWlsLAogICAgICogdGhlbiBmYWls\nIHRoZSBmaW5hbCBjYWxsYmFjayB3aXRoIGEgY29tcG9zaXRlIGV4Y2VwdGlv\nbi4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBDYWxsYmFjazxWb2lkPiBt\ndWx0aUNhbGxiYWNrKGludCBleHBlY3RlZCwgQ2FsbGJhY2s8Vm9pZD4gY2Is\nIE9iamVjdCBjdHgpIHsKICAgICAgICByZXR1cm4gbXVsdGlDYWxsYmFjayhl\neHBlY3RlZCwgY2IsIGN0eCwgbnVsbCwgbnVsbCwgbnVsbCwgbnVsbCk7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBBIGNhbGxiYWNrIHRoYXQgd2FpdHMgZm9y\nIGFsbCBvZiBhIG51bWJlciBvZiBldmVudHMgdG8gZmlyZS4gSWYgYW55IGZh\naWwsCiAgICAgKiB0aGVuIGZhaWwgdGhlIGZpbmFsIGNhbGxiYWNrIHdpdGgg\nYSBjb21wb3NpdGUgZXhjZXB0aW9uLgogICAgICovCiAgICBwdWJsaWMgc3Rh\ndGljIENhbGxiYWNrPFZvaWQ+IG11bHRpbkNhbGxiYWNrKGludCBleHBlY3Rl\nZCwgQ2FsbGJhY2s8Vm9pZD4gY2IsIE9iamVjdCBjdHgsIFJ1bm5hYmxlIGVh\nZ2VyRXJyb3JIYW5kbGVyKSB7CiAgICAgICAgcmV0dXJuIG11bHRpQ2FsbGJh\nY2soZXhwZWN0ZWQsIGNiLCBjdHgsIG51bGwsIG51bGwsIG51bGwsIGVhZ2Vy\nRXJyb3JIYW5kbGVyKTsKICAgIH0KCiAgICBwcml2YXRlIHN0YXRpYyBDYWxs\nYmFjazxWb2lkPiBub3AgPSBuZXcgQ2FsbGJhY2s8Vm9pZD4oKSB7CgogICAg\nICAgIEBPdmVycmlkZQogICAgICAgIHB1YmxpYyB2b2lkIG9wZXJhdGlvbkZh\naWxlZChPYmplY3QgY3R4LCBQdWJTdWJFeGNlcHRpb24gZXhjZXB0aW9uKSB7\nCiAgICAgICAgfQoKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMg\ndm9pZCBvcGVyYXRpb25GaW5pc2hlZChPYmplY3QgY3R4LCBWb2lkIHJlc3Vs\ndE9mT3BlcmF0aW9uKSB7CiAgICAgICAgfQoKICAgIH07CgogICAgLyoqCiAg\nICAgKiBBIGRvLW5vdGhpbmcgY2FsbGJhY2suCiAgICAgKi8KICAgIHB1Ymxp\nYyBzdGF0aWMgQ2FsbGJhY2s8Vm9pZD4gbm9wKCkgewogICAgICAgIHJldHVy\nbiBub3A7CiAgICB9CgogICAgLyoqCiAgICAgKiBMb2dzIHdoYXQgaGFwcGVu\nZWQgYmVmb3JlIGNvbnRpbnVpbmcgdGhlIGNhbGxiYWNrIGNoYWluLgogICAg\nICovCiAgICBwdWJsaWMgc3RhdGljIDxUPiBDYWxsYmFjazxUPiBsb2dnZXIo\nZmluYWwgTG9nZ2VyIGxvZ2dlciwgZmluYWwgU3RyaW5nIHN1Y2Nlc3NNc2cs\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlu\nYWwgU3RyaW5nIGZhaWx1cmVNc2csIGZpbmFsIENhbGxiYWNrPFQ+IGNvbnQp\nIHsKICAgICAgICByZXR1cm4gbmV3IENhbGxiYWNrPFQ+KCkgewoKICAgICAg\nICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9wZXJh\ndGlvbkZhaWxlZChPYmplY3QgY3R4LCBQdWJTdWJFeGNlcHRpb24gZXhjZXB0\naW9uKSB7CiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoZmFpbHVyZU1z\nZywgZXhjZXB0aW9uKTsKICAgICAgICAgICAgICAgIGlmIChjb250ICE9IG51\nbGwpCiAgICAgICAgICAgICAgICAgICAgY29udC5vcGVyYXRpb25GYWlsZWQo\nY3R4LCBleGNlcHRpb24pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBA\nT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIHZvaWQgb3BlcmF0aW9uRmlu\naXNoZWQoT2JqZWN0IGN0eCwgVCByZXN1bHRPZk9wZXJhdGlvbikgewogICAg\nICAgICAgICAgICAgbG9nZ2VyLmluZm8oc3VjY2Vzc01zZyk7CiAgICAgICAg\nICAgICAgICBpZiAoY29udCAhPSBudWxsKQogICAgICAgICAgICAgICAgICAg\nIGNvbnQub3BlcmF0aW9uRmluaXNoZWQoY3R4LCByZXN1bHRPZk9wZXJhdGlv\nbik7CiAgICAgICAgICAgIH0KCiAgICAgICAgfTsKICAgIH0KCiAgICAvKioK\nICAgICAqIExvZ3Mgd2hhdCBoYXBwZW5lZCAobm8gY29udGludWF0aW9uKS4K\nICAgICAqLwogICAgcHVibGljIHN0YXRpYyBDYWxsYmFjazxWb2lkPiBsb2dn\nZXIoTG9nZ2VyIGxvZ2dlciwgU3RyaW5nIHN1Y2Nlc3NNc2csIFN0cmluZyBm\nYWlsdXJlTXNnKSB7CiAgICAgICAgcmV0dXJuIGxvZ2dlcihsb2dnZXIsIHN1\nY2Nlc3NNc2csIGZhaWx1cmVNc2csIG5vcCgpKTsKICAgIH0KCiAgICAvKioK\nICAgICAqIFJldHVybiBhIENhbGxiYWNrPFZvaWQ+IHRoYXQganVzdCBjYWxs\ncyB0aGUgZ2l2ZW4gQ2FsbGJhY2sgY2Igd2l0aCB0aGUKICAgICAqIGJvdW5k\nIHJlc3VsdC4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyA8VD4gQ2FsbGJh\nY2s8Vm9pZD4gY3VycnkoZmluYWwgQ2FsbGJhY2s8VD4gY2IsIGZpbmFsIFQg\ncmVzdWx0KSB7CiAgICAgICAgcmV0dXJuIG5ldyBDYWxsYmFjazxWb2lkPigp\nIHsKCiAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICBwdWJsaWMg\ndm9pZCBvcGVyYXRpb25GYWlsZWQoT2JqZWN0IGN0eCwgUHViU3ViRXhjZXB0\naW9uIGV4Y2VwdGlvbikgewogICAgICAgICAgICAgICAgY2Iub3BlcmF0aW9u\nRmFpbGVkKGN0eCwgZXhjZXB0aW9uKTsKICAgICAgICAgICAgfQoKICAgICAg\nICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9wZXJh\ndGlvbkZpbmlzaGVkKE9iamVjdCBjdHgsIFZvaWQgcmVzdWx0T2ZPcGVyYXRp\nb24pIHsKICAgICAgICAgICAgICAgIGNiLm9wZXJhdGlvbkZpbmlzaGVkKGN0\neCwgcmVzdWx0KTsKICAgICAgICAgICAgfQoKICAgICAgICB9OwogICAgfQoK\nfQo=\n","encoding":"base64"}

