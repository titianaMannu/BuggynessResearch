{"sha":"a6cf89e8fbbc1bd825e83e7906904382bdf02f27","node_id":"MDQ6QmxvYjE1NzU5NTY6YTZjZjg5ZThmYmJjMWJkODI1ZTgzZTc5MDY5MDQzODJiZGYwMmYyNw==","size":5169,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/a6cf89e8fbbc1bd825e83e7906904382bdf02f27","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy51dGlsOwoKaW1wb3J0IGphdmEubmV0\nLkluZXRTb2NrZXRBZGRyZXNzOwoKLyoqCiAqIFRoaXMgaXMgYSBkYXRhIHdy\nYXBwZXIgY2xhc3MgdGhhdCBpcyBiYXNpY2FsbHkgYW4gSW5ldFNvY2tldEFk\nZHJlc3Mgd2l0aCBvbmUKICogZXh0cmEgcGllY2Ugb2YgaW5mb3JtYXRpb24g\nZm9yIHRoZSBTU0wgcG9ydCAob3B0aW9uYWwpLiBUaGlzIGlzIHVzZWQgYnkK\nICogSGVkd2lnIHNvIHdlIGNhbiBlbmNhcHN1bGF0ZSBib3RoIHJlZ3VsYXIg\nYW5kIFNTTCBwb3J0IGluZm9ybWF0aW9uIGluIG9uZQogKiBkYXRhIHN0cnVj\ndHVyZS4gSGVkd2lnIGh1YiBzZXJ2ZXJzIGNhbiBiZSBjb25maWd1cmVkIHRv\nIGxpc3RlbiBvbiB0aGUKICogc3RhbmRhcmQgcmVndWxhciBwb3J0IGFuZCBh\nZGRpdGlvbmFsbHkgb24gYW4gb3B0aW9uYWwgU1NMIHBvcnQuIFRoZSBTdHJp\nbmcKICogcmVwcmVzZW50YXRpb24gb2YgYSBIZWR3aWdTb2NrZXRBZGRyZXNz\nIGlzOiA8aG9zdG5hbWU+Ojxwb3J0Pjo8U1NMCiAqIHBvcnQob3B0aW9uYWwp\nPgogKi8KcHVibGljIGNsYXNzIEhlZHdpZ1NvY2tldEFkZHJlc3MgewoKICAg\nIC8vIE1lbWJlciBmaWVsZHMgdGhhdCBtYWtlIHVwIHRoaXMgY2xhc3MuCiAg\nICBwcml2YXRlIGZpbmFsIFN0cmluZyBob3N0bmFtZTsKICAgIHByaXZhdGUg\nZmluYWwgaW50IHBvcnQ7CiAgICBwcml2YXRlIGZpbmFsIGludCBzc2xQb3J0\nOwoKICAgIHByaXZhdGUgZmluYWwgSW5ldFNvY2tldEFkZHJlc3Mgc29ja2V0\nQWRkcmVzczsKICAgIHByaXZhdGUgZmluYWwgSW5ldFNvY2tldEFkZHJlc3Mg\nc3NsU29ja2V0QWRkcmVzczsKCiAgICAvLyBDb25zdGFudHMgdXNlZCBieSB0\naGlzIGNsYXNzLgogICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgQ09M\nT04gPSAiOiI7CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBpbnQgTk9fU1NM\nX1BPUlQgPSAtMTsKCiAgICAvLyBDb25zdHJ1Y3RvciB0aGF0IHRha2VzIGlu\nIGJvdGggYSByZWd1bGFyIGFuZCBTU0wgcG9ydC4KICAgIHB1YmxpYyBIZWR3\naWdTb2NrZXRBZGRyZXNzKFN0cmluZyBob3N0bmFtZSwgaW50IHBvcnQsIGlu\ndCBzc2xQb3J0KSB7CiAgICAgICAgdGhpcy5ob3N0bmFtZSA9IGhvc3RuYW1l\nOwogICAgICAgIHRoaXMucG9ydCA9IHBvcnQ7CiAgICAgICAgdGhpcy5zc2xQ\nb3J0ID0gc3NsUG9ydDsKICAgICAgICBzb2NrZXRBZGRyZXNzID0gbmV3IElu\nZXRTb2NrZXRBZGRyZXNzKGhvc3RuYW1lLCBwb3J0KTsKICAgICAgICBpZiAo\nc3NsUG9ydCAhPSBOT19TU0xfUE9SVCkKICAgICAgICAgICAgc3NsU29ja2V0\nQWRkcmVzcyA9IG5ldyBJbmV0U29ja2V0QWRkcmVzcyhob3N0bmFtZSwgc3Ns\nUG9ydCk7CiAgICAgICAgZWxzZQogICAgICAgICAgICBzc2xTb2NrZXRBZGRy\nZXNzID0gbnVsbDsKICAgIH0KCiAgICAvLyBDb25zdHJ1Y3RvciB0aGF0IG9u\nbHkgdGFrZXMgaW4gYSByZWd1bGFyIHBvcnQuCiAgICBwdWJsaWMgSGVkd2ln\nU29ja2V0QWRkcmVzcyhTdHJpbmcgaG9zdG5hbWUsIGludCBwb3J0KSB7CiAg\nICAgICAgdGhpcyhob3N0bmFtZSwgcG9ydCwgTk9fU1NMX1BPUlQpOwogICAg\nfQoKICAgIC8vIENvbnN0cnVjdG9yIGZyb20gYSBTdHJpbmcgInNlcmlhbGl6\nZWQiIHZlcnNpb24gb2YgdGhpcyBjbGFzcy4KICAgIHB1YmxpYyBIZWR3aWdT\nb2NrZXRBZGRyZXNzKFN0cmluZyBhZGRyKSB7CiAgICAgICAgU3RyaW5nW10g\ncGFydHMgPSBhZGRyLnNwbGl0KENPTE9OKTsKICAgICAgICB0aGlzLmhvc3Ru\nYW1lID0gcGFydHNbMF07CiAgICAgICAgdGhpcy5wb3J0ID0gSW50ZWdlci5w\nYXJzZUludChwYXJ0c1sxXSk7CiAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA+\nIDIpCiAgICAgICAgICAgIHRoaXMuc3NsUG9ydCA9IEludGVnZXIucGFyc2VJ\nbnQocGFydHNbMl0pOwogICAgICAgIGVsc2UKICAgICAgICAgICAgdGhpcy5z\nc2xQb3J0ID0gTk9fU1NMX1BPUlQ7CiAgICAgICAgc29ja2V0QWRkcmVzcyA9\nIG5ldyBJbmV0U29ja2V0QWRkcmVzcyhob3N0bmFtZSwgcG9ydCk7CiAgICAg\nICAgaWYgKHNzbFBvcnQgIT0gTk9fU1NMX1BPUlQpCiAgICAgICAgICAgIHNz\nbFNvY2tldEFkZHJlc3MgPSBuZXcgSW5ldFNvY2tldEFkZHJlc3MoaG9zdG5h\nbWUsIHNzbFBvcnQpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgc3NsU29j\na2V0QWRkcmVzcyA9IG51bGw7CiAgICB9CgogICAgLy8gUHVibGljIGdldHRl\ncnMKICAgIHB1YmxpYyBTdHJpbmcgZ2V0SG9zdG5hbWUoKSB7CiAgICAgICAg\ncmV0dXJuIGhvc3RuYW1lOwogICAgfQoKICAgIHB1YmxpYyBpbnQgZ2V0UG9y\ndCgpIHsKICAgICAgICByZXR1cm4gcG9ydDsKICAgIH0KCiAgICBwdWJsaWMg\naW50IGdldFNTTFBvcnQoKSB7CiAgICAgICAgcmV0dXJuIHNzbFBvcnQ7CiAg\nICB9CgogICAgLy8gTWV0aG9kIHRvIHJldHVybiBhbiBJbmV0U29ja2V0QWRk\ncmVzcyBmb3IgdGhlIHJlZ3VsYXIgcG9ydC4KICAgIHB1YmxpYyBJbmV0U29j\na2V0QWRkcmVzcyBnZXRTb2NrZXRBZGRyZXNzKCkgewogICAgICAgIHJldHVy\nbiBzb2NrZXRBZGRyZXNzOwogICAgfQoKICAgIC8vIE1ldGhvZCB0byByZXR1\ncm4gYW4gSW5ldFNvY2tldEFkZHJlc3MgZm9yIHRoZSBTU0wgcG9ydC4KICAg\nIC8vIE5vdGUgdGhhdCBpZiBubyBTU0wgcG9ydCAob3IgYW4gaW52YWxpZCB2\nYWx1ZSkgd2FzIHBhc3NlZAogICAgLy8gZHVyaW5nIG9iamVjdCBjcmVhdGlv\nbiwgdGhpcyBjYWxsIHdpbGwgdGhyb3cgYW4gSWxsZWdhbEFyZ3VtZW50RXhj\nZXB0aW9uCiAgICAvLyAocnVudGltZSBleGNlcHRpb24pLgogICAgcHVibGlj\nIEluZXRTb2NrZXRBZGRyZXNzIGdldFNTTFNvY2tldEFkZHJlc3MoKSB7CiAg\nICAgICAgcmV0dXJuIHNzbFNvY2tldEFkZHJlc3M7CiAgICB9CgogICAgLy8g\nTWV0aG9kIHRvIGRldGVybWluZSBpZiB0aGlzIG9iamVjdCBpbnN0YW5jZSBp\ncyBTU0wgZW5hYmxlZCBvciBub3QKICAgIC8vIChjb250YWlucyBhIHZhbGlk\nIFNTTCBwb3J0KS4KICAgIHB1YmxpYyBib29sZWFuIGlzU1NMRW5hYmxlZCgp\nIHsKICAgICAgICByZXR1cm4gc3NsUG9ydCAhPSBOT19TU0xfUE9SVDsKICAg\nIH0KCiAgICAvLyBSZXR1cm4gdGhlIFN0cmluZyAic2VyaWFsaXplZCIgdmVy\nc2lvbiBvZiB0aGlzIG9iamVjdC4KICAgIEBPdmVycmlkZQogICAgcHVibGlj\nIFN0cmluZyB0b1N0cmluZygpIHsKICAgICAgICBTdHJpbmdCdWlsZGVyIHNi\nID0gbmV3IFN0cmluZ0J1aWxkZXIoKTsKICAgICAgICBzYi5hcHBlbmQoaG9z\ndG5hbWUpLmFwcGVuZChDT0xPTikuYXBwZW5kKHBvcnQpLmFwcGVuZChDT0xP\nTikuYXBwZW5kKHNzbFBvcnQpOwogICAgICAgIHJldHVybiBzYi50b1N0cmlu\nZygpOwogICAgfQoKICAgIC8vIEltcGxlbWVudCBhbiBlcXVhbHMgbWV0aG9k\nIGNvbXBhcmluZyB0d28gSGVkd2lnU29ja2V0QWRkcmVzcyBvYmplY3RzLgog\nICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgYm9vbGVhbiBlcXVhbHMoT2JqZWN0\nIG9iaikgewogICAgICAgIGlmICghKG9iaiBpbnN0YW5jZW9mIEhlZHdpZ1Nv\nY2tldEFkZHJlc3MpKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAg\nICAgSGVkd2lnU29ja2V0QWRkcmVzcyB0aGF0ID0gKEhlZHdpZ1NvY2tldEFk\nZHJlc3MpIG9iajsKICAgICAgICByZXR1cm4gKHRoaXMuaG9zdG5hbWUuZXF1\nYWxzKHRoYXQuaG9zdG5hbWUpICYmICh0aGlzLnBvcnQgPT0gdGhhdC5wb3J0\nKSAmJiAodGhpcy5zc2xQb3J0ID09IHRoYXQuc3NsUG9ydCkpOwogICAgfQoK\nICAgIC8vIFN0YXRpYyBoZWxwZXIgbWV0aG9kIHRvIHJldHVybiB0aGUgc3Ry\naW5nIHJlcHJlc2VudGF0aW9uIGZvciBhbgogICAgLy8gSW5ldFNvY2tldEFk\nZHJlc3MuIFRoZSBIZWR3aWdDbGllbnQgY2FuIG9ubHkgb3BlcmF0ZSBpbiBT\nU0wgb3Igbm9uLVNTTAogICAgLy8gbW9kZS4gU28gdGhlIHNlcnZlciBob3N0\ncyBpdCBjb25uZWN0cyB0byB3aWxsIGp1c3QgYmUgYW4KICAgIC8vIEluZXRT\nb2NrZXRBZGRyZXNzIGluc3RlYWQgb2YgYSBIZWR3aWdTb2NrZXRBZGRyZXNz\nLiBUaGlzIHV0aWxpdHkgbWV0aG9kCiAgICAvLyBjYW4gYmUgdXNlZCBzbyB3\nZSBjYW4gc3RvcmUgdGhlc2Ugc2VydmVyIGhvc3RzIGFzIHN0cmluZ3MgKEJ5\ndGVTdHJpbmdzKQogICAgLy8gaW4gdmFyaW91cyBwbGFjZXMgKGUuZy4gbGlz\ndCBvZiBzZXJ2ZXIgaG9zdHMgd2UndmUgY29ubmVjdGVkIHRvCiAgICAvLyBv\nciB3cm90ZSB0byB1bnN1Y2Nlc3NmdWxseSkuCiAgICBwdWJsaWMgc3RhdGlj\nIFN0cmluZyBzb2NrQWRkclN0cihJbmV0U29ja2V0QWRkcmVzcyBhZGRyKSB7\nCiAgICAgICAgcmV0dXJuIGFkZHIuZ2V0QWRkcmVzcygpLmdldEhvc3RBZGRy\nZXNzKCkgKyAiOiIgKyBhZGRyLmdldFBvcnQoKTsKICAgIH0KCn0K\n","encoding":"base64"}

