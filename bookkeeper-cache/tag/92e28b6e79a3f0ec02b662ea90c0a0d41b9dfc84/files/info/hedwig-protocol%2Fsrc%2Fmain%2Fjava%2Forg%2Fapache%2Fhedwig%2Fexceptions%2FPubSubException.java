{"sha":"5cbd31862e30a8355138c169ab80b6a921f93254","node_id":"MDQ6QmxvYjE1NzU5NTY6NWNiZDMxODYyZTMwYTgzNTUxMzhjMTY5YWI4MGI2YTkyMWY5MzI1NA==","size":5911,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/5cbd31862e30a8355138c169ab80b6a921f93254","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5leGNlcHRpb25zOwoKaW1wb3J0IGph\ndmEudXRpbC5Db2xsZWN0aW9uOwoKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2ln\nLnByb3RvY29sLlB1YlN1YlByb3RvY29sLlN0YXR1c0NvZGU7CgpAU3VwcHJl\nc3NXYXJuaW5ncygic2VyaWFsIikKcHVibGljIGFic3RyYWN0IGNsYXNzIFB1\nYlN1YkV4Y2VwdGlvbiBleHRlbmRzIEV4Y2VwdGlvbiB7CiAgICBwcm90ZWN0\nZWQgU3RhdHVzQ29kZSBjb2RlOwoKICAgIHByb3RlY3RlZCBQdWJTdWJFeGNl\ncHRpb24oU3RhdHVzQ29kZSBjb2RlLCBTdHJpbmcgbXNnKSB7CiAgICAgICAg\nc3VwZXIobXNnKTsKICAgICAgICB0aGlzLmNvZGUgPSBjb2RlOwogICAgfQoK\nICAgIHByb3RlY3RlZCBQdWJTdWJFeGNlcHRpb24oU3RhdHVzQ29kZSBjb2Rl\nLCBFeGNlcHRpb24gZSkgewogICAgICAgIHN1cGVyKGUpOwogICAgICAgIHRo\naXMuY29kZSA9IGNvZGU7CiAgICB9CgogICAgcHVibGljIHN0YXRpYyBQdWJT\ndWJFeGNlcHRpb24gY3JlYXRlKFN0YXR1c0NvZGUgY29kZSwgU3RyaW5nIG1z\nZykgewogICAgICAgIGlmIChjb2RlID09IFN0YXR1c0NvZGUuQ0xJRU5UX0FM\nUkVBRFlfU1VCU0NSSUJFRCkgewogICAgICAgICAgICByZXR1cm4gbmV3IENs\naWVudEFscmVhZHlTdWJzY3JpYmVkRXhjZXB0aW9uKG1zZyk7CiAgICAgICAg\nfSBlbHNlIGlmIChjb2RlID09IFN0YXR1c0NvZGUuQ0xJRU5UX05PVF9TVUJT\nQ1JJQkVEKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgQ2xpZW50Tm90U3Vi\nc2NyaWJlZEV4Y2VwdGlvbihtc2cpOwogICAgICAgIH0gZWxzZSBpZiAoY29k\nZSA9PSBTdGF0dXNDb2RlLk1BTEZPUk1FRF9SRVFVRVNUKSB7CiAgICAgICAg\nICAgIHJldHVybiBuZXcgTWFsZm9ybWVkUmVxdWVzdEV4Y2VwdGlvbihtc2cp\nOwogICAgICAgIH0gZWxzZSBpZiAoY29kZSA9PSBTdGF0dXNDb2RlLk5PX1NV\nQ0hfVE9QSUMpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBOb1N1Y2hUb3Bp\nY0V4Y2VwdGlvbihtc2cpOwogICAgICAgIH0gZWxzZSBpZiAoY29kZSA9PSBT\ndGF0dXNDb2RlLk5PVF9SRVNQT05TSUJMRV9GT1JfVE9QSUMpIHsKICAgICAg\nICAgICAgcmV0dXJuIG5ldyBTZXJ2ZXJOb3RSZXNwb25zaWJsZUZvclRvcGlj\nRXhjZXB0aW9uKG1zZyk7CiAgICAgICAgfSBlbHNlIGlmIChjb2RlID09IFN0\nYXR1c0NvZGUuU0VSVklDRV9ET1dOKSB7CiAgICAgICAgICAgIHJldHVybiBu\nZXcgU2VydmljZURvd25FeGNlcHRpb24obXNnKTsKICAgICAgICB9IGVsc2Ug\naWYgKGNvZGUgPT0gU3RhdHVzQ29kZS5DT1VMRF9OT1RfQ09OTkVDVCkgewog\nICAgICAgICAgICByZXR1cm4gbmV3IENvdWxkTm90Q29ubmVjdEV4Y2VwdGlv\nbihtc2cpOwogICAgICAgIH0KICAgICAgICAvKgogICAgICAgICAqIEluc2Vy\ndCBuZXcgb25lcyBoZXJlCiAgICAgICAgICovCiAgICAgICAgZWxzZSBpZiAo\nY29kZSA9PSBTdGF0dXNDb2RlLlVOQ0VSVEFJTl9TVEFURSkgewogICAgICAg\nICAgICByZXR1cm4gbmV3IFVuY2VydGFpblN0YXRlRXhjZXB0aW9uKG1zZyk7\nCiAgICAgICAgfQogICAgICAgIC8vIEZpbmFsbHkgdGhlIGNhdGNoIGFsbCBl\neGNlcHRpb24gKGZvciB1bmV4cGVjdGVkIGVycm9yIGNvbmRpdGlvbnMpCiAg\nICAgICAgZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgVW5leHBlY3Rl\nZENvbmRpdGlvbkV4Y2VwdGlvbigiVW5rbm93IHN0YXR1cyBjb2RlOiIgKyBj\nb2RlLmdldE51bWJlcigpICsgIiwgbXNnOiAiICsgbXNnKTsKICAgICAgICB9\nCiAgICB9CgogICAgcHVibGljIFN0YXR1c0NvZGUgZ2V0Q29kZSgpIHsKICAg\nICAgICByZXR1cm4gY29kZTsKICAgIH0KCiAgICBwdWJsaWMgc3RhdGljIGNs\nYXNzIENsaWVudEFscmVhZHlTdWJzY3JpYmVkRXhjZXB0aW9uIGV4dGVuZHMg\nUHViU3ViRXhjZXB0aW9uIHsKICAgICAgICBwdWJsaWMgQ2xpZW50QWxyZWFk\neVN1YnNjcmliZWRFeGNlcHRpb24oU3RyaW5nIG1zZykgewogICAgICAgICAg\nICBzdXBlcihTdGF0dXNDb2RlLkNMSUVOVF9BTFJFQURZX1NVQlNDUklCRUQs\nIG1zZyk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBzdGF0aWMgY2xh\nc3MgQ2xpZW50Tm90U3Vic2NyaWJlZEV4Y2VwdGlvbiBleHRlbmRzIFB1YlN1\nYkV4Y2VwdGlvbiB7CiAgICAgICAgcHVibGljIENsaWVudE5vdFN1YnNjcmli\nZWRFeGNlcHRpb24oU3RyaW5nIG1zZykgewogICAgICAgICAgICBzdXBlcihT\ndGF0dXNDb2RlLkNMSUVOVF9OT1RfU1VCU0NSSUJFRCwgbXNnKTsKICAgICAg\nICB9CiAgICB9CgogICAgcHVibGljIHN0YXRpYyBjbGFzcyBNYWxmb3JtZWRS\nZXF1ZXN0RXhjZXB0aW9uIGV4dGVuZHMgUHViU3ViRXhjZXB0aW9uIHsKICAg\nICAgICBwdWJsaWMgTWFsZm9ybWVkUmVxdWVzdEV4Y2VwdGlvbihTdHJpbmcg\nbXNnKSB7CiAgICAgICAgICAgIHN1cGVyKFN0YXR1c0NvZGUuTUFMRk9STUVE\nX1JFUVVFU1QsIG1zZyk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBz\ndGF0aWMgY2xhc3MgTm9TdWNoVG9waWNFeGNlcHRpb24gZXh0ZW5kcyBQdWJT\ndWJFeGNlcHRpb24gewogICAgICAgIHB1YmxpYyBOb1N1Y2hUb3BpY0V4Y2Vw\ndGlvbihTdHJpbmcgbXNnKSB7CiAgICAgICAgICAgIHN1cGVyKFN0YXR1c0Nv\nZGUuTk9fU1VDSF9UT1BJQywgbXNnKTsKICAgICAgICB9CiAgICB9CgogICAg\ncHVibGljIHN0YXRpYyBjbGFzcyBTZXJ2ZXJOb3RSZXNwb25zaWJsZUZvclRv\ncGljRXhjZXB0aW9uIGV4dGVuZHMgUHViU3ViRXhjZXB0aW9uIHsKICAgICAg\nICAvLyBOb3RlIHRoZSBleGNlcHRpb24gbWVzc2FnZSBzZXJ2ZXMgYXMgdGhl\nIG5hbWUgb2YgdGhlIHJlc3BvbnNpYmxlIGhvc3QKICAgICAgICBwdWJsaWMg\nU2VydmVyTm90UmVzcG9uc2libGVGb3JUb3BpY0V4Y2VwdGlvbihTdHJpbmcg\ncmVzcG9uc2libGVIb3N0KSB7CiAgICAgICAgICAgIHN1cGVyKFN0YXR1c0Nv\nZGUuTk9UX1JFU1BPTlNJQkxFX0ZPUl9UT1BJQywgcmVzcG9uc2libGVIb3N0\nKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHN0YXRpYyBjbGFzcyBU\nb3BpY0J1c3lFeGNlcHRpb24gZXh0ZW5kcyBQdWJTdWJFeGNlcHRpb24gewog\nICAgICAgIHB1YmxpYyBUb3BpY0J1c3lFeGNlcHRpb24oU3RyaW5nIG1zZykg\newogICAgICAgICAgICBzdXBlcihTdGF0dXNDb2RlLlRPUElDX0JVU1ksIG1z\nZyk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBzdGF0aWMgY2xhc3Mg\nU2VydmljZURvd25FeGNlcHRpb24gZXh0ZW5kcyBQdWJTdWJFeGNlcHRpb24g\newogICAgICAgIHB1YmxpYyBTZXJ2aWNlRG93bkV4Y2VwdGlvbihTdHJpbmcg\nbXNnKSB7CiAgICAgICAgICAgIHN1cGVyKFN0YXR1c0NvZGUuU0VSVklDRV9E\nT1dOLCBtc2cpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIFNlcnZpY2VE\nb3duRXhjZXB0aW9uKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIHN1cGVy\nKFN0YXR1c0NvZGUuU0VSVklDRV9ET1dOLCBlKTsKICAgICAgICB9CiAgICB9\nCgogICAgcHVibGljIHN0YXRpYyBjbGFzcyBDb3VsZE5vdENvbm5lY3RFeGNl\ncHRpb24gZXh0ZW5kcyBQdWJTdWJFeGNlcHRpb24gewogICAgICAgIHB1Ymxp\nYyBDb3VsZE5vdENvbm5lY3RFeGNlcHRpb24oU3RyaW5nIG1zZykgewogICAg\nICAgICAgICBzdXBlcihTdGF0dXNDb2RlLkNPVUxEX05PVF9DT05ORUNULCBt\nc2cpOwogICAgICAgIH0KICAgIH0KCiAgICAvKgogICAgICogSW5zZXJ0IG5l\ndyBvbmVzIGhlcmUKICAgICAqLwogICAgcHVibGljIHN0YXRpYyBjbGFzcyBV\nbmNlcnRhaW5TdGF0ZUV4Y2VwdGlvbiBleHRlbmRzIFB1YlN1YkV4Y2VwdGlv\nbiB7CiAgICAgICAgcHVibGljIFVuY2VydGFpblN0YXRlRXhjZXB0aW9uKFN0\ncmluZyBtc2cpIHsKICAgICAgICAgICAgc3VwZXIoU3RhdHVzQ29kZS5VTkNF\nUlRBSU5fU1RBVEUsIG1zZyk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIFRo\nZSBjYXRjaCBhbGwgZXhjZXB0aW9uIChmb3IgdW5leHBlY3RlZCBlcnJvciBj\nb25kaXRpb25zKQogICAgcHVibGljIHN0YXRpYyBjbGFzcyBVbmV4cGVjdGVk\nQ29uZGl0aW9uRXhjZXB0aW9uIGV4dGVuZHMgUHViU3ViRXhjZXB0aW9uIHsK\nICAgICAgICBwdWJsaWMgVW5leHBlY3RlZENvbmRpdGlvbkV4Y2VwdGlvbihT\ndHJpbmcgbXNnKSB7CiAgICAgICAgICAgIHN1cGVyKFN0YXR1c0NvZGUuVU5F\nWFBFQ1RFRF9DT05ESVRJT04sIG1zZyk7CiAgICAgICAgfQogICAgfQoKICAg\nIC8vIFRoZSBjb21wb3NpdGUgZXhjZXB0aW9uIChmb3IgY29uY3VycmVudCBv\ncGVyYXRpb25zKS4KICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgQ29tcG9zaXRl\nRXhjZXB0aW9uIGV4dGVuZHMgUHViU3ViRXhjZXB0aW9uIHsKICAgICAgICBw\ncml2YXRlIGZpbmFsIENvbGxlY3Rpb248UHViU3ViRXhjZXB0aW9uPiBleGNl\ncHRpb25zOwogICAgICAgIHB1YmxpYyBDb21wb3NpdGVFeGNlcHRpb24oQ29s\nbGVjdGlvbjxQdWJTdWJFeGNlcHRpb24+IGV4Y2VwdGlvbnMpIHsKICAgICAg\nICAgICAgc3VwZXIoU3RhdHVzQ29kZS5DT01QT1NJVEUsICJjb21wb3NpdGUg\nZXhjZXB0aW9uIik7CiAgICAgICAgICAgIHRoaXMuZXhjZXB0aW9ucyA9IGV4\nY2VwdGlvbnM7CiAgICAgICAgfQogICAgICAgIHB1YmxpYyBDb2xsZWN0aW9u\nPFB1YlN1YkV4Y2VwdGlvbj4gZ2V0RXhjZXB0aW9ucygpIHsKICAgICAgICAg\nICAgcmV0dXJuIGV4Y2VwdGlvbnM7CiAgICAgICAgfQogICAgICAgIEBPdmVy\ncmlkZQogICAgICAgIHB1YmxpYyBTdHJpbmcgdG9TdHJpbmcoKSB7CiAgICAg\nICAgICAgIFN0cmluZ0J1aWxkZXIgYnVpbGRlciA9IG5ldyBTdHJpbmdCdWls\nZGVyKCk7CiAgICAgICAgICAgIGJ1aWxkZXIuYXBwZW5kKHN1cGVyLnRvU3Ry\naW5nKCkpLmFwcGVuZCgnXG4nKTsKICAgICAgICAgICAgZm9yIChQdWJTdWJF\neGNlcHRpb24gZXhjZXB0aW9uIDogZXhjZXB0aW9ucykKICAgICAgICAgICAg\nICAgIGJ1aWxkZXIuYXBwZW5kKGV4Y2VwdGlvbikuYXBwZW5kKCdcbicpOwog\nICAgICAgICAgICByZXR1cm4gYnVpbGRlci50b1N0cmluZygpOwogICAgICAg\nIH0KICAgIH0KCiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIENsaWVudE5vdFN1\nYnNjcmliZWRSdW50aW1lRXhjZXB0aW9uIGV4dGVuZHMgUnVudGltZUV4Y2Vw\ndGlvbiB7CiAgICB9Cgp9Cg==\n","encoding":"base64"}

