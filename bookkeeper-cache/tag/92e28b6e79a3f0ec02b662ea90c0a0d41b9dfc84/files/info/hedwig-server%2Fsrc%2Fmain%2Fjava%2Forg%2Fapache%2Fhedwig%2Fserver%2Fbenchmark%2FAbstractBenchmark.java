{"sha":"bb260617e42934beb56531e78671661b0c0a50c8","node_id":"MDQ6QmxvYjE1NzU5NTY6YmIyNjA2MTdlNDI5MzRiZWI1NjUzMWU3ODY3MTY2MWIwYzBhNTBjOA==","size":3421,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/bb260617e42934beb56531e78671661b0c0a50c8","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIuYmVuY2htYXJrOwoKaW1w\nb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkxpbmtlZEJsb2NraW5nUXVldWU7\nCmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5TZW1hcGhvcmU7CmltcG9y\ndCBqYXZhLnV0aWwuY29uY3VycmVudC5hdG9taWMuQXRvbWljSW50ZWdlcjsK\naW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LmF0b21pYy5BdG9taWNMb25n\nOwoKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXI7CmltcG9ydCBvcmcuc2xmNGou\nTG9nZ2VyRmFjdG9yeTsKCmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy51dGls\nLkNvbmN1cnJlbmN5VXRpbHM7CgpwdWJsaWMgYWJzdHJhY3QgY2xhc3MgQWJz\ndHJhY3RCZW5jaG1hcmsgewoKICAgIHN0YXRpYyBmaW5hbCBMb2dnZXIgbG9n\nZ2VyID0gTG9nZ2VyRmFjdG9yeS5nZXRMb2dnZXIoQWJzdHJhY3RCZW5jaG1h\ncmsuY2xhc3MpOwoKICAgIEF0b21pY0xvbmcgdG90YWxMYXRlbmN5ID0gbmV3\nIEF0b21pY0xvbmcoKTsKICAgIExpbmtlZEJsb2NraW5nUXVldWU8Qm9vbGVh\nbj4gZG9uZVNpZ25hbFF1ZXVlID0gbmV3IExpbmtlZEJsb2NraW5nUXVldWU8\nQm9vbGVhbj4oKTsKCiAgICBhYnN0cmFjdCB2b2lkIGRvT3BzKGludCBudW1P\ncHMpIHRocm93cyBFeGNlcHRpb247CiAgICBhYnN0cmFjdCB2b2lkIHRlYXJE\nb3duKCkgdGhyb3dzIEV4Y2VwdGlvbjsKCiAgICBwcm90ZWN0ZWQgY2xhc3Mg\nQWJzdHJhY3RDYWxsYmFjayB7CiAgICAgICAgQXRvbWljSW50ZWdlciBudW1E\nb25lID0gbmV3IEF0b21pY0ludGVnZXIoMCk7CiAgICAgICAgU2VtYXBob3Jl\nIG91dHN0YW5kaW5nOwogICAgICAgIGludCBudW1PcHM7CiAgICAgICAgYm9v\nbGVhbiBsb2dnaW5nOwoKICAgICAgICBwdWJsaWMgQWJzdHJhY3RDYWxsYmFj\nayhTZW1hcGhvcmUgb3V0c3RhbmRpbmcsIGludCBudW1PcHMpIHsKICAgICAg\nICAgICAgdGhpcy5vdXRzdGFuZGluZyA9IG91dHN0YW5kaW5nOwogICAgICAg\nICAgICB0aGlzLm51bU9wcyA9IG51bU9wczsKICAgICAgICAgICAgbG9nZ2lu\nZyA9IEJvb2xlYW4uZ2V0Qm9vbGVhbigicHJvZ3Jlc3MiKTsKICAgICAgICB9\nCgogICAgICAgIHB1YmxpYyB2b2lkIGhhbmRsZShib29sZWFuIHN1Y2Nlc3Ms\nIE9iamVjdCBjdHgpIHsKICAgICAgICAgICAgb3V0c3RhbmRpbmcucmVsZWFz\nZSgpOwoKICAgICAgICAgICAgaWYgKCFzdWNjZXNzKSB7CiAgICAgICAgICAg\nICAgICBDb25jdXJyZW5jeVV0aWxzLnB1dChkb25lU2lnbmFsUXVldWUsIGZh\nbHNlKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoK\nICAgICAgICAgICAgdG90YWxMYXRlbmN5LmFkZEFuZEdldChTeXN0ZW0uY3Vy\ncmVudFRpbWVNaWxsaXMoKSAtIChMb25nKWN0eCk7CiAgICAgICAgICAgIGlu\ndCBudW1Eb25lSW50ID0gbnVtRG9uZS5pbmNyZW1lbnRBbmRHZXQoKTsKCiAg\nICAgICAgICAgIGlmIChsb2dnaW5nICYmIG51bURvbmVJbnQgJSAxMDAwMCA9\nPSAwKSB7CiAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbygiRmluaXNoZWQg\nIiArIG51bURvbmVJbnQgKyAiIG9wcyIpOwogICAgICAgICAgICB9CgogICAg\nICAgICAgICBpZiAobnVtT3BzID09IG51bURvbmVJbnQpIHsKICAgICAgICAg\nICAgICAgIENvbmN1cnJlbmN5VXRpbHMucHV0KGRvbmVTaWduYWxRdWV1ZSwg\ndHJ1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgcnVuUGhhc2UoU3RyaW5nIHBoYXNlLCBpbnQgbnVtT3BzKSB0\naHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBsb25nIHN0YXJ0VGltZSA9IFN5\nc3RlbS5jdXJyZW50VGltZU1pbGxpcygpOwoKICAgICAgICBkb09wcyhudW1P\ncHMpOwoKICAgICAgICBpZiAoIWRvbmVTaWduYWxRdWV1ZS50YWtlKCkpIHsK\nICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCJPbmUgb3IgbW9yZSBvcGVyYXRp\nb25zIGZhaWxlZCBpbiBwaGFzZTogIiArIHBoYXNlKTsKICAgICAgICAgICAg\ndGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oKTsKICAgICAgICB9IGVsc2Ug\newogICAgICAgICAgICBsb2dnZXIuaW5mbygiUGhhc2U6ICIgKyBwaGFzZSAr\nICIgQXZnIGxhdGVuY3kgOiAiICsgdG90YWxMYXRlbmN5LmdldCgpIC8gbnVt\nT3BzICsgIiwgdHB1dCA9ICIgKyAobnVtT3BzICogMTAwMC8gKFN5c3RlbS5j\ndXJyZW50VGltZU1pbGxpcygpIC0gc3RhcnRUaW1lKSkpOwogICAgICAgIH0K\nICAgIH0KCgoKCgogICAgcHVibGljIHZvaWQgcnVuKCkgdGhyb3dzIEV4Y2Vw\ndGlvbiB7CgogICAgICAgIGludCBudW1XYXJtdXAgPSBJbnRlZ2VyLmdldElu\ndGVnZXIoIm5XYXJtdXAiLCA1MDAwMCk7CiAgICAgICAgcnVuUGhhc2UoIndh\ncm11cCIsIG51bVdhcm11cCk7CgogICAgICAgIGxvZ2dlci5pbmZvKCJTbGVl\ncGluZyBmb3IgMTAgc2Vjb25kcyIpOwogICAgICAgIFRocmVhZC5zbGVlcCgx\nMDAwMCk7CiAgICAgICAgLy9yZXNldCBsYXRlbmN5CiAgICAgICAgdG90YWxM\nYXRlbmN5LnNldCgwKTsKCiAgICAgICAgaW50IG51bU9wcyA9IEludGVnZXIu\nZ2V0SW50ZWdlcigibk9wcyIsIDQwMDAwMCk7CiAgICAgICAgcnVuUGhhc2Uo\nInJlYWwiLCBudW1PcHMpOwoKICAgICAgICB0ZWFyRG93bigpOwogICAgfQp9\nCg==\n","encoding":"base64"}

