{"sha":"bc680f9e13d3a3079d29151718c9441660a8c3ee","node_id":"MDQ6QmxvYjE1NzU5NTY6YmM2ODBmOWUxM2QzYTMwNzlkMjkxNTE3MThjOTQ0MTY2MGE4YzNlZQ==","size":4022,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/bc680f9e13d3a3079d29151718c9441660a8c3ee","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIuYmVuY2htYXJrOwoKaW1w\nb3J0IGphdmEubmV0LkluZXRTb2NrZXRBZGRyZXNzOwppbXBvcnQgamF2YS51\ndGlsLmNvbmN1cnJlbnQuRXhlY3V0b3JzOwoKaW1wb3J0IG9yZy5zbGY0ai5M\nb2dnZXI7CmltcG9ydCBvcmcuc2xmNGouTG9nZ2VyRmFjdG9yeTsKaW1wb3J0\nIG9yZy5qYm9zcy5uZXR0eS5ib290c3RyYXAuU2VydmVyQm9vdHN0cmFwOwpp\nbXBvcnQgb3JnLmpib3NzLm5ldHR5LmJ1ZmZlci5DaGFubmVsQnVmZmVyOwpp\nbXBvcnQgb3JnLmpib3NzLm5ldHR5LmNoYW5uZWwuQ2hhbm5lbEhhbmRsZXJD\nb250ZXh0OwppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmNoYW5uZWwuQ2hhbm5l\nbFBpcGVsaW5lOwppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmNoYW5uZWwuQ2hh\nbm5lbFBpcGVsaW5lQ292ZXJhZ2U7CmltcG9ydCBvcmcuamJvc3MubmV0dHku\nY2hhbm5lbC5DaGFubmVsUGlwZWxpbmVGYWN0b3J5OwppbXBvcnQgb3JnLmpi\nb3NzLm5ldHR5LmNoYW5uZWwuQ2hhbm5lbHM7CmltcG9ydCBvcmcuamJvc3Mu\nbmV0dHkuY2hhbm5lbC5NZXNzYWdlRXZlbnQ7CmltcG9ydCBvcmcuamJvc3Mu\nbmV0dHkuY2hhbm5lbC5TaW1wbGVDaGFubmVsSGFuZGxlcjsKaW1wb3J0IG9y\nZy5qYm9zcy5uZXR0eS5jaGFubmVsLnNvY2tldC5TZXJ2ZXJTb2NrZXRDaGFu\nbmVsRmFjdG9yeTsKaW1wb3J0IG9yZy5qYm9zcy5uZXR0eS5jaGFubmVsLnNv\nY2tldC5uaW8uTmlvU2VydmVyU29ja2V0Q2hhbm5lbEZhY3Rvcnk7CmltcG9y\ndCBvcmcuamJvc3MubmV0dHkuaGFuZGxlci5jb2RlYy5mcmFtZS5MZW5ndGhG\naWVsZEJhc2VkRnJhbWVEZWNvZGVyOwppbXBvcnQgb3JnLmpib3NzLm5ldHR5\nLmhhbmRsZXIuY29kZWMuZnJhbWUuTGVuZ3RoRmllbGRQcmVwZW5kZXI7Cmlt\ncG9ydCBvcmcuamJvc3MubmV0dHkubG9nZ2luZy5JbnRlcm5hbExvZ2dlckZh\nY3Rvcnk7CmltcG9ydCBvcmcuamJvc3MubmV0dHkubG9nZ2luZy5Mb2c0Skxv\nZ2dlckZhY3Rvcnk7CgpAQ2hhbm5lbFBpcGVsaW5lQ292ZXJhZ2UoImFsbCIp\nCnB1YmxpYyBjbGFzcyBGYWtlQm9va2llIGV4dGVuZHMgU2ltcGxlQ2hhbm5l\nbEhhbmRsZXIgaW1wbGVtZW50cwogICAgQ2hhbm5lbFBpcGVsaW5lRmFjdG9y\neSB7CiAgICBzdGF0aWMgZmluYWwgTG9nZ2VyIGxvZ2dlciA9IExvZ2dlckZh\nY3RvcnkuZ2V0TG9nZ2VyKEZha2VCb29raWUuY2xhc3MpOwogICAgU2VydmVy\nU29ja2V0Q2hhbm5lbEZhY3Rvcnkgc2VydmVyQ2hhbm5lbEZhY3RvcnkgPSBu\nZXcgTmlvU2VydmVyU29ja2V0Q2hhbm5lbEZhY3RvcnkoCiAgICAgICAgRXhl\nY3V0b3JzLm5ld0NhY2hlZFRocmVhZFBvb2woKSwgRXhlY3V0b3JzLm5ld0Nh\nY2hlZFRocmVhZFBvb2woKSk7CgogICAgcHVibGljIEZha2VCb29raWUoaW50\nIHBvcnQpIHsKICAgICAgICBJbnRlcm5hbExvZ2dlckZhY3Rvcnkuc2V0RGVm\nYXVsdEZhY3RvcnkobmV3IExvZzRKTG9nZ2VyRmFjdG9yeSgpKTsKICAgICAg\nICBTZXJ2ZXJCb290c3RyYXAgYm9vdHN0cmFwID0gbmV3IFNlcnZlckJvb3Rz\ndHJhcChzZXJ2ZXJDaGFubmVsRmFjdG9yeSk7CgogICAgICAgIGJvb3RzdHJh\ncC5zZXRQaXBlbGluZUZhY3RvcnkodGhpcyk7CiAgICAgICAgYm9vdHN0cmFw\nLnNldE9wdGlvbigiY2hpbGQudGNwTm9EZWxheSIsIHRydWUpOwogICAgICAg\nIGJvb3RzdHJhcC5zZXRPcHRpb24oImNoaWxkLmtlZXBBbGl2ZSIsIHRydWUp\nOwogICAgICAgIGJvb3RzdHJhcC5zZXRPcHRpb24oInJldXNlQWRkcmVzcyIs\nIHRydWUpOwoKICAgICAgICBsb2dnZXIuaW5mbygiR29pbmcgaW50byByZWNl\naXZlIGxvb3AiKTsKICAgICAgICAvLyBCaW5kIGFuZCBzdGFydCB0byBhY2Nl\ncHQgaW5jb21pbmcgY29ubmVjdGlvbnMuCiAgICAgICAgYm9vdHN0cmFwLmJp\nbmQobmV3IEluZXRTb2NrZXRBZGRyZXNzKHBvcnQpKTsKICAgIH0KCiAgICBA\nT3ZlcnJpZGUKICAgIHB1YmxpYyBDaGFubmVsUGlwZWxpbmUgZ2V0UGlwZWxp\nbmUoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBDaGFubmVsUGlwZWxp\nbmUgcGlwZWxpbmUgPSBDaGFubmVscy5waXBlbGluZSgpOwogICAgICAgIHBp\ncGVsaW5lLmFkZExhc3QoImxlbmd0aGJhc2VkZGVjb2RlciIsCiAgICAgICAg\nICAgICAgICAgICAgICAgICBuZXcgTGVuZ3RoRmllbGRCYXNlZEZyYW1lRGVj\nb2RlcigxMDI0ICogMTAyNCwgMCwgNCwgMCwgNCkpOwogICAgICAgIHBpcGVs\naW5lLmFkZExhc3QoImxlbmd0aHByZXBlbmRlciIsIG5ldyBMZW5ndGhGaWVs\nZFByZXBlbmRlcig0KSk7CiAgICAgICAgcGlwZWxpbmUuYWRkTGFzdCgibWFp\nbiIsIHRoaXMpOwogICAgICAgIHJldHVybiBwaXBlbGluZTsKICAgIH0KCiAg\nICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIG1lc3NhZ2VSZWNlaXZlZChD\naGFubmVsSGFuZGxlckNvbnRleHQgY3R4LCBNZXNzYWdlRXZlbnQgZSkKICAg\nICAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgaWYgKCEoZS5n\nZXRNZXNzYWdlKCkgaW5zdGFuY2VvZiBDaGFubmVsQnVmZmVyKSkgewogICAg\nICAgICAgICBjdHguc2VuZFVwc3RyZWFtKGUpOwogICAgICAgICAgICByZXR1\ncm47CiAgICAgICAgfQoKICAgICAgICBDaGFubmVsQnVmZmVyIGJ1ZmZlciA9\nIChDaGFubmVsQnVmZmVyKSBlLmdldE1lc3NhZ2UoKTsKCiAgICAgICAgaW50\nIHR5cGUgPSBidWZmZXIucmVhZEludCgpOwogICAgICAgIGJ1ZmZlci5yZWFk\nZXJJbmRleCgyNCk7CiAgICAgICAgbG9uZyBsZWRnZXJJZCA9IGJ1ZmZlci5y\nZWFkTG9uZygpOwogICAgICAgIGxvbmcgZW50cnlJZCA9IGJ1ZmZlci5yZWFk\nTG9uZygpOwoKICAgICAgICBDaGFubmVsQnVmZmVyIG91dEJ1ZiA9IGN0eC5n\nZXRDaGFubmVsKCkuZ2V0Q29uZmlnKCkuZ2V0QnVmZmVyRmFjdG9yeSgpCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0QnVmZmVyKDI0KTsK\nICAgICAgICBvdXRCdWYud3JpdGVJbnQodHlwZSk7CiAgICAgICAgb3V0QnVm\nLndyaXRlSW50KDApOyAvLyByYwogICAgICAgIG91dEJ1Zi53cml0ZUxvbmco\nbGVkZ2VySWQpOwogICAgICAgIG91dEJ1Zi53cml0ZUxvbmcoZW50cnlJZCk7\nCiAgICAgICAgZS5nZXRDaGFubmVsKCkud3JpdGUob3V0QnVmKTsKCiAgICB9\nCgoKICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZyBhcmdzW10p\nIHsKICAgICAgICBuZXcgRmFrZUJvb2tpZShJbnRlZ2VyLnBhcnNlSW50KGFy\nZ3NbMF0pKTsKICAgIH0KfQo=\n","encoding":"base64"}

