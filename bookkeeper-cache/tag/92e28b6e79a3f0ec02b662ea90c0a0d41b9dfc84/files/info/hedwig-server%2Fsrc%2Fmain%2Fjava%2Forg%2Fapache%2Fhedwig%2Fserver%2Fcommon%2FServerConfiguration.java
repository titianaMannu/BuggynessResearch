{"sha":"3a8e8ca878b64cccd0f9ac127e06166cfd4de3b7","node_id":"MDQ6QmxvYjE1NzU5NTY6M2E4ZThjYTg3OGI2NGNjY2QwZjlhYzEyN2UwNjE2NmNmZDRkZTNiNw==","size":10919,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/3a8e8ca878b64cccd0f9ac127e06166cfd4de3b7","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIuY29tbW9uOwoKaW1wb3J0\nIGphdmEuaW8uRmlsZUlucHV0U3RyZWFtOwppbXBvcnQgamF2YS5pby5GaWxl\nTm90Rm91bmRFeGNlcHRpb247CmltcG9ydCBqYXZhLmlvLklucHV0U3RyZWFt\nOwppbXBvcnQgamF2YS5uZXQuSW5ldEFkZHJlc3M7CmltcG9ydCBqYXZhLm5l\ndC5VUkw7CmltcG9ydCBqYXZhLm5ldC5Vbmtub3duSG9zdEV4Y2VwdGlvbjsK\naW1wb3J0IGphdmEudXRpbC5BcnJheXM7CmltcG9ydCBqYXZhLnV0aWwuTGlu\na2VkTGlzdDsKaW1wb3J0IGphdmEudXRpbC5MaXN0OwoKaW1wb3J0IG9yZy5h\ncGFjaGUuY29tbW9ucy5jb25maWd1cmF0aW9uLkNvbmZpZ3VyYXRpb25FeGNl\ncHRpb247CgppbXBvcnQgY29tLmdvb2dsZS5wcm90b2J1Zi5CeXRlU3RyaW5n\nOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuY29uZi5BYnN0cmFjdENvbmZp\nZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy51dGlsLkhlZHdp\nZ1NvY2tldEFkZHJlc3M7CgpwdWJsaWMgY2xhc3MgU2VydmVyQ29uZmlndXJh\ndGlvbiBleHRlbmRzIEFic3RyYWN0Q29uZmlndXJhdGlvbiB7CiAgICBwcm90\nZWN0ZWQgZmluYWwgc3RhdGljIFN0cmluZyBSRUdJT04gPSAicmVnaW9uIjsK\nICAgIHByb3RlY3RlZCBmaW5hbCBzdGF0aWMgU3RyaW5nIE1BWF9NRVNTQUdF\nX1NJWkUgPSAibWF4X21lc3NhZ2Vfc2l6ZSI7CiAgICBwcm90ZWN0ZWQgZmlu\nYWwgc3RhdGljIFN0cmluZyBSRUFEQUhFQURfQ09VTlQgPSAicmVhZGFoZWFk\nX2NvdW50IjsKICAgIHByb3RlY3RlZCBmaW5hbCBzdGF0aWMgU3RyaW5nIFJF\nQURBSEVBRF9TSVpFID0gInJlYWRhaGVhZF9zaXplIjsKICAgIHByb3RlY3Rl\nZCBmaW5hbCBzdGF0aWMgU3RyaW5nIENBQ0hFX1NJWkUgPSAiY2FjaGVfc2l6\nZSI7CiAgICBwcm90ZWN0ZWQgZmluYWwgc3RhdGljIFN0cmluZyBTQ0FOX0JB\nQ0tPRkZfTVNFQyA9ICJzY2FuX2JhY2tvZmZfbXMiOwogICAgcHJvdGVjdGVk\nIGZpbmFsIHN0YXRpYyBTdHJpbmcgU0VSVkVSX1BPUlQgPSAic2VydmVyX3Bv\ncnQiOwogICAgcHJvdGVjdGVkIGZpbmFsIHN0YXRpYyBTdHJpbmcgU1NMX1NF\nUlZFUl9QT1JUID0gInNzbF9zZXJ2ZXJfcG9ydCI7CiAgICBwcm90ZWN0ZWQg\nZmluYWwgc3RhdGljIFN0cmluZyBaS19QUkVGSVggPSAiemtfcHJlZml4IjsK\nICAgIHByb3RlY3RlZCBmaW5hbCBzdGF0aWMgU3RyaW5nIFpLX0hPU1QgPSAi\nemtfaG9zdCI7CiAgICBwcm90ZWN0ZWQgZmluYWwgc3RhdGljIFN0cmluZyBa\nS19USU1FT1VUID0gInprX3RpbWVvdXQiOwogICAgcHJvdGVjdGVkIGZpbmFs\nIHN0YXRpYyBTdHJpbmcgUkVBREFIRUFEX0VOQUJMRUQgPSAicmVhZGhlYWRf\nZW5hYmxlZCI7CiAgICBwcm90ZWN0ZWQgZmluYWwgc3RhdGljIFN0cmluZyBT\nVEFOREFMT05FID0gInN0YW5kYWxvbmUiOwogICAgcHJvdGVjdGVkIGZpbmFs\nIHN0YXRpYyBTdHJpbmcgUkVHSU9OUyA9ICJyZWdpb25zIjsKICAgIHByb3Rl\nY3RlZCBmaW5hbCBzdGF0aWMgU3RyaW5nIENFUlRfTkFNRSA9ICJjZXJ0X25h\nbWUiOwogICAgcHJvdGVjdGVkIGZpbmFsIHN0YXRpYyBTdHJpbmcgQ0VSVF9Q\nQVRIID0gImNlcnRfcGF0aCI7CiAgICBwcm90ZWN0ZWQgZmluYWwgc3RhdGlj\nIFN0cmluZyBQQVNTV09SRCA9ICJwYXNzd29yZCI7CiAgICBwcm90ZWN0ZWQg\nZmluYWwgc3RhdGljIFN0cmluZyBTU0xfRU5BQkxFRCA9ICJzc2xfZW5hYmxl\nZCI7CiAgICBwcm90ZWN0ZWQgZmluYWwgc3RhdGljIFN0cmluZyBDT05TVU1F\nX0lOVEVSVkFMID0gImNvbnN1bWVfaW50ZXJ2YWwiOwogICAgcHJvdGVjdGVk\nIGZpbmFsIHN0YXRpYyBTdHJpbmcgUkVURU5USU9OX1NFQ1MgPSAicmV0ZW50\naW9uX3NlY3MiOwogICAgcHJvdGVjdGVkIGZpbmFsIHN0YXRpYyBTdHJpbmcg\nSU5URVJfUkVHSU9OX1NTTF9FTkFCTEVEID0gImludGVyX3JlZ2lvbl9zc2xf\nZW5hYmxlZCI7CiAgICBwcm90ZWN0ZWQgZmluYWwgc3RhdGljIFN0cmluZyBN\nRVNTQUdFU19DT05TVU1FRF9USFJFQURfUlVOX0lOVEVSVkFMID0gIm1lc3Nh\nZ2VzX2NvbnN1bWVkX3RocmVhZF9ydW5faW50ZXJ2YWwiOwogICAgcHJvdGVj\ndGVkIGZpbmFsIHN0YXRpYyBTdHJpbmcgQktfRU5TRU1CTEVfU0laRSA9ICJi\na19lbnNlbWJsZV9zaXplIjsKICAgIHByb3RlY3RlZCBmaW5hbCBzdGF0aWMg\nU3RyaW5nIEJLX1FVT1JVTV9TSVpFID0gImJrX3F1b3J1bV9zaXplIjsKCiAg\nICAvLyB0aGVzZSBhcmUgdGhlIGRlcml2ZWQgYXR0cmlidXRlcwogICAgcHJv\ndGVjdGVkIEJ5dGVTdHJpbmcgbXlSZWdpb25CeXRlU3RyaW5nID0gbnVsbDsK\nICAgIHByb3RlY3RlZCBIZWR3aWdTb2NrZXRBZGRyZXNzIG15U2VydmVyQWRk\ncmVzcyA9IG51bGw7CiAgICBwcm90ZWN0ZWQgTGlzdDxTdHJpbmc+IHJlZ2lv\nbkxpc3QgPSBudWxsOwoKICAgIC8vIEFsdGhvdWdoIHRoaXMgbWV0aG9kIGlz\nIG5vdCBjdXJyZW50bHkgdXNlZCwgY3VycmVudGx5IG1haW50YWluaW5nIGl0\nIGxpa2UKICAgIC8vIHRoaXMgc28gdGhhdCB3ZSBjYW4gc3VwcG9ydCBvbi10\naGUtZmx5IGNoYW5nZXMgaW4gY29uZmlndXJhdGlvbgogICAgcHJvdGVjdGVk\nIHZvaWQgcmVmcmVzaERlcml2ZWRBdHRyaWJ1dGVzKCkgewogICAgICAgIHJl\nZnJlc2hNeVJlZ2lvbkJ5dGVTdHJpbmcoKTsKICAgICAgICByZWZyZXNoTXlT\nZXJ2ZXJBZGRyZXNzKCk7CiAgICAgICAgcmVmcmVzaFJlZ2lvbkxpc3QoKTsK\nICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIGxvYWRDb25m\nKFVSTCBjb25mVVJMKSB0aHJvd3MgQ29uZmlndXJhdGlvbkV4Y2VwdGlvbiB7\nCiAgICAgICAgc3VwZXIubG9hZENvbmYoY29uZlVSTCk7CiAgICAgICAgcmVm\ncmVzaERlcml2ZWRBdHRyaWJ1dGVzKCk7CiAgICB9CgogICAgcHVibGljIGlu\ndCBnZXRNYXhpbXVtTWVzc2FnZVNpemUoKSB7CiAgICAgICAgcmV0dXJuIGNv\nbmYuZ2V0SW50KE1BWF9NRVNTQUdFX1NJWkUsIDEyNTgyOTEpOyAvKiAxLjJN\nICovCiAgICB9CgogICAgcHVibGljIFN0cmluZyBnZXRNeVJlZ2lvbigpIHsK\nICAgICAgICByZXR1cm4gY29uZi5nZXRTdHJpbmcoUkVHSU9OLCAic3RhbmRh\nbG9uZSIpOwogICAgfQoKICAgIHByb3RlY3RlZCB2b2lkIHJlZnJlc2hNeVJl\nZ2lvbkJ5dGVTdHJpbmcoKSB7CiAgICAgICAgbXlSZWdpb25CeXRlU3RyaW5n\nID0gQnl0ZVN0cmluZy5jb3B5RnJvbVV0ZjgoZ2V0TXlSZWdpb24oKSk7CiAg\nICB9CgogICAgcHJvdGVjdGVkIHZvaWQgcmVmcmVzaE15U2VydmVyQWRkcmVz\ncygpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICAvLyBVc2UgdGhlIHJh\ndyBJUCBhZGRyZXNzIGFzIHRoZSBob3N0bmFtZQogICAgICAgICAgICBteVNl\ncnZlckFkZHJlc3MgPSBuZXcgSGVkd2lnU29ja2V0QWRkcmVzcyhJbmV0QWRk\ncmVzcy5nZXRMb2NhbEhvc3QoKS5nZXRIb3N0QWRkcmVzcygpLCBnZXRTZXJ2\nZXJQb3J0KCksCiAgICAgICAgICAgICAgICAgICAgZ2V0U1NMU2VydmVyUG9y\ndCgpKTsKICAgICAgICB9IGNhdGNoIChVbmtub3duSG9zdEV4Y2VwdGlvbiBl\nKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKGUp\nOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBUaGUgZXhwZWN0ZWQgZm9ybWF0\nIGZvciB0aGUgcmVnaW9ucyBwYXJhbWV0ZXIgaXMgSG9zdG5hbWU6UG9ydDpT\nU0xQb3J0CiAgICAvLyB3aXRoIHNwYWNlcyBpbiBiZXR3ZWVuIGVhY2ggb2Yg\ndGhlIHJlZ2lvbnMuCiAgICBwcm90ZWN0ZWQgdm9pZCByZWZyZXNoUmVnaW9u\nTGlzdCgpIHsKICAgICAgICBTdHJpbmcgcmVnaW9ucyA9IGNvbmYuZ2V0U3Ry\naW5nKFJFR0lPTlMsICIiKTsKICAgICAgICBpZiAocmVnaW9ucy5pc0VtcHR5\nKCkpIHsKICAgICAgICAgICAgcmVnaW9uTGlzdCA9IG5ldyBMaW5rZWRMaXN0\nPFN0cmluZz4oKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZWdp\nb25MaXN0ID0gQXJyYXlzLmFzTGlzdChyZWdpb25zLnNwbGl0KCIgIikpOwog\nICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgQnl0ZVN0cmluZyBnZXRNeVJl\nZ2lvbkJ5dGVTdHJpbmcoKSB7CiAgICAgICAgaWYgKG15UmVnaW9uQnl0ZVN0\ncmluZyA9PSBudWxsKSB7CiAgICAgICAgICAgIHJlZnJlc2hNeVJlZ2lvbkJ5\ndGVTdHJpbmcoKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG15UmVnaW9u\nQnl0ZVN0cmluZzsKICAgIH0KCiAgICBwdWJsaWMgaW50IGdldFJlYWRBaGVh\nZENvdW50KCkgewogICAgICAgIHJldHVybiBjb25mLmdldEludChSRUFEQUhF\nQURfQ09VTlQsIDEwKTsKICAgIH0KCiAgICBwdWJsaWMgbG9uZyBnZXRSZWFk\nQWhlYWRTaXplQnl0ZXMoKSB7CiAgICAgICAgcmV0dXJuIGNvbmYuZ2V0TG9u\nZyhSRUFEQUhFQURfU0laRSwgNCAqIDEwMjQgKiAxMDI0KTsgLy8gNE0KICAg\nIH0KCiAgICBwdWJsaWMgbG9uZyBnZXRNYXhpbXVtQ2FjaGVTaXplKCkgewog\nICAgICAgIC8vIDJHIG9yIGhhbGYgb2YgdGhlIG1heGltdW0gYW1vdW50IG9m\nIG1lbW9yeSB0aGUgSlZNIHVzZXMKICAgICAgICByZXR1cm4gY29uZi5nZXRM\nb25nKENBQ0hFX1NJWkUsIE1hdGgubWluKDIgKiAxMDI0TCAqIDEwMjRMICog\nMTAyNEwsIFJ1bnRpbWUuZ2V0UnVudGltZSgpLm1heE1lbW9yeSgpIC8gMikp\nOwogICAgfQoKICAgIC8vIEFmdGVyIGEgc2NhbiBvZiBhIGxvZyBmYWlscywg\naG93IGxvbmcgYmVmb3JlIHdlIHJldHJ5IChpbiBtc2VjKQogICAgcHVibGlj\nIGxvbmcgZ2V0U2NhbkJhY2tvZmZQZXJpb2RNcygpIHsKICAgICAgICByZXR1\ncm4gY29uZi5nZXRMb25nKFNDQU5fQkFDS09GRl9NU0VDLCAxMDAwKTsKICAg\nIH0KCiAgICBwdWJsaWMgaW50IGdldFNlcnZlclBvcnQoKSB7CiAgICAgICAg\ncmV0dXJuIGNvbmYuZ2V0SW50KFNFUlZFUl9QT1JULCA0MDgwKTsKICAgIH0K\nCiAgICBwdWJsaWMgaW50IGdldFNTTFNlcnZlclBvcnQoKSB7CiAgICAgICAg\ncmV0dXJuIGNvbmYuZ2V0SW50KFNTTF9TRVJWRVJfUE9SVCwgOTg3Nik7CiAg\nICB9CgogICAgcHVibGljIFN0cmluZyBnZXRaa1ByZWZpeCgpIHsKICAgICAg\nICByZXR1cm4gY29uZi5nZXRTdHJpbmcoWktfUFJFRklYLCAiL2hlZHdpZyIp\nOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmdCdWlsZGVyIGdldFprUmVnaW9u\nUHJlZml4KFN0cmluZ0J1aWxkZXIgc2IpIHsKICAgICAgICByZXR1cm4gc2Iu\nYXBwZW5kKGdldFprUHJlZml4KCkpLmFwcGVuZCgiLyIpLmFwcGVuZChnZXRN\neVJlZ2lvbigpKTsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nQnVpbGRlciBn\nZXRaa1RvcGljc1ByZWZpeChTdHJpbmdCdWlsZGVyIHNiKSB7CiAgICAgICAg\ncmV0dXJuIGdldFprUmVnaW9uUHJlZml4KHNiKS5hcHBlbmQoIi90b3BpY3Mi\nKTsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nQnVpbGRlciBnZXRaa1RvcGlj\nUGF0aChTdHJpbmdCdWlsZGVyIHNiLCBCeXRlU3RyaW5nIHRvcGljKSB7CiAg\nICAgICAgcmV0dXJuIGdldFprVG9waWNzUHJlZml4KHNiKS5hcHBlbmQoIi8i\nKS5hcHBlbmQodG9waWMudG9TdHJpbmdVdGY4KCkpOwogICAgfQoKICAgIHB1\nYmxpYyBTdHJpbmdCdWlsZGVyIGdldFprSG9zdHNQcmVmaXgoU3RyaW5nQnVp\nbGRlciBzYikgewogICAgICAgIHJldHVybiBnZXRaa1JlZ2lvblByZWZpeChz\nYikuYXBwZW5kKCIvaG9zdHMiKTsKICAgIH0KCiAgICBwdWJsaWMgSGVkd2ln\nU29ja2V0QWRkcmVzcyBnZXRTZXJ2ZXJBZGRyKCkgewogICAgICAgIGlmICht\neVNlcnZlckFkZHJlc3MgPT0gbnVsbCkgewogICAgICAgICAgICByZWZyZXNo\nTXlTZXJ2ZXJBZGRyZXNzKCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBt\neVNlcnZlckFkZHJlc3M7CiAgICB9CgogICAgcHVibGljIFN0cmluZyBnZXRa\na0hvc3QoKSB7CiAgICAgICAgcmV0dXJuIGNvbmYuZ2V0U3RyaW5nKFpLX0hP\nU1QsICJsb2NhbGhvc3QiKTsKICAgIH0KCiAgICBwdWJsaWMgaW50IGdldFpr\nVGltZW91dCgpIHsKICAgICAgICByZXR1cm4gY29uZi5nZXRJbnQoWktfVElN\nRU9VVCwgMjAwMCk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gZ2V0UmVh\nZEFoZWFkRW5hYmxlZCgpIHsKICAgICAgICByZXR1cm4gY29uZi5nZXRCb29s\nZWFuKFJFQURBSEVBRF9FTkFCTEVELCB0cnVlKTsKICAgIH0KCiAgICBwdWJs\naWMgYm9vbGVhbiBpc1N0YW5kYWxvbmUoKSB7CiAgICAgICAgcmV0dXJuIGNv\nbmYuZ2V0Qm9vbGVhbihTVEFOREFMT05FLCBmYWxzZSk7CiAgICB9CgogICAg\ncHVibGljIExpc3Q8U3RyaW5nPiBnZXRSZWdpb25zKCkgewogICAgICAgIGlm\nIChyZWdpb25MaXN0ID09IG51bGwpIHsKICAgICAgICAgICAgcmVmcmVzaFJl\nZ2lvbkxpc3QoKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlZ2lvbkxp\nc3Q7CiAgICB9CgogICAgLy8gVGhpcyBpcyB0aGUgbmFtZSBvZiB0aGUgU1NM\nIGNlcnRpZmljYXRlIGlmIGF2YWlsYWJsZSBhcyBhIHJlc291cmNlLgogICAg\ncHVibGljIFN0cmluZyBnZXRDZXJ0TmFtZSgpIHsKICAgICAgICByZXR1cm4g\nY29uZi5nZXRTdHJpbmcoQ0VSVF9OQU1FLCAiIik7CiAgICB9CgogICAgLy8g\nVGhpcyBpcyB0aGUgcGF0aCB0byB0aGUgU1NMIGNlcnRpZmljYXRlIGlmIGl0\nIGlzIGF2YWlsYWJsZSBhcyBhIGZpbGUuCiAgICBwdWJsaWMgU3RyaW5nIGdl\ndENlcnRQYXRoKCkgewogICAgICAgIHJldHVybiBjb25mLmdldFN0cmluZyhD\nRVJUX1BBVEgsICIiKTsKICAgIH0KCiAgICAvLyBUaGlzIG1ldGhvZCByZXR1\ncm4gdGhlIFNTTCBjZXJ0aWZpY2F0ZSBhcyBhbiBJbnB1dFN0cmVhbSBiYXNl\nZCBvbiBpZiBpdAogICAgLy8gaXMgY29uZmlndXJlZCB0byBiZSBhdmFpbGFi\nbGUgYXMgYSByZXNvdXJjZSBvciBhcyBhIGZpbGUuIElmIG5vdGhpbmcgaXMK\nICAgIC8vIGNvbmZpZ3VyZWQgY29ycmVjdGx5LCB0aGVuIGEgQ29uZmlndXJh\ndGlvbkV4Y2VwdGlvbiB3aWxsIGJlIHRocm93biBhcwogICAgLy8gd2UgZG8g\nbm90IGtub3cgaG93IHRvIG9idGFpbiB0aGUgU1NMIGNlcnRpZmljYXRlIHN0\ncmVhbS4KICAgIHB1YmxpYyBJbnB1dFN0cmVhbSBnZXRDZXJ0U3RyZWFtKCkg\ndGhyb3dzIEZpbGVOb3RGb3VuZEV4Y2VwdGlvbiwgQ29uZmlndXJhdGlvbkV4\nY2VwdGlvbiB7CiAgICAgICAgU3RyaW5nIGNlcnROYW1lID0gZ2V0Q2VydE5h\nbWUoKTsKICAgICAgICBTdHJpbmcgY2VydFBhdGggPSBnZXRDZXJ0UGF0aCgp\nOwogICAgICAgIGlmIChjZXJ0TmFtZSAhPSBudWxsICYmICFjZXJ0TmFtZS5p\nc0VtcHR5KCkpIHsKICAgICAgICAgICAgcmV0dXJuIGdldENsYXNzKCkuZ2V0\nUmVzb3VyY2VBc1N0cmVhbShjZXJ0TmFtZSk7CiAgICAgICAgfSBlbHNlIGlm\nIChjZXJ0UGF0aCAhPSBudWxsICYmICFjZXJ0UGF0aC5pc0VtcHR5KCkpIHsK\nICAgICAgICAgICAgcmV0dXJuIG5ldyBGaWxlSW5wdXRTdHJlYW0oY2VydFBh\ndGgpOwogICAgICAgIH0gZWxzZQogICAgICAgICAgICB0aHJvdyBuZXcgQ29u\nZmlndXJhdGlvbkV4Y2VwdGlvbigiU1NMIENlcnRpZmljYXRlIGNvbmZpZ3Vy\nYXRpb24gZG9lcyBub3QgaGF2ZSByZXNvdXJjZSBuYW1lIG9yIHBhdGggc2V0\nISIpOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgZ2V0UGFzc3dvcmQoKSB7\nCiAgICAgICAgcmV0dXJuIGNvbmYuZ2V0U3RyaW5nKFBBU1NXT1JELCAiIik7\nCiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gaXNTU0xFbmFibGVkKCkgewog\nICAgICAgIHJldHVybiBjb25mLmdldEJvb2xlYW4oU1NMX0VOQUJMRUQsIGZh\nbHNlKTsKICAgIH0KCiAgICBwdWJsaWMgaW50IGdldENvbnN1bWVJbnRlcnZh\nbCgpIHsKICAgICAgICByZXR1cm4gY29uZi5nZXRJbnQoQ09OU1VNRV9JTlRF\nUlZBTCwgNTApOwogICAgfQoKICAgIHB1YmxpYyBpbnQgZ2V0UmV0ZW50aW9u\nU2VjcygpIHsKICAgICAgICByZXR1cm4gY29uZi5nZXRJbnQoUkVURU5USU9O\nX1NFQ1MsIDApOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGlzSW50ZXJS\nZWdpb25TU0xFbmFibGVkKCkgewogICAgICAgIHJldHVybiBjb25mLmdldEJv\nb2xlYW4oSU5URVJfUkVHSU9OX1NTTF9FTkFCTEVELCBmYWxzZSk7CiAgICB9\nCgogICAgLy8gVGhpcyBwYXJhbWV0ZXIgaXMgdXNlZCB0byBkZXRlcm1pbmUg\naG93IG9mdGVuIHdlIHJ1biB0aGUKICAgIC8vIFN1YnNjcmlwdGlvbk1hbmFn\nZXIncyBNZXNzYWdlcyBDb25zdW1lZCB0aW1lciB0YXNrIHRocmVhZCAoaW4K\nICAgIC8vIG1pbGxpc2Vjb25kcykuCiAgICBwdWJsaWMgaW50IGdldE1lc3Nh\nZ2VzQ29uc3VtZWRUaHJlYWRSdW5JbnRlcnZhbCgpIHsKICAgICAgICByZXR1\ncm4gY29uZi5nZXRJbnQoTUVTU0FHRVNfQ09OU1VNRURfVEhSRUFEX1JVTl9J\nTlRFUlZBTCwgNjAwMDApOwogICAgfQoKICAgIC8vIFRoaXMgcGFyYW1ldGVy\nIGlzIHVzZWQgd2hlbiBCb29ra2VlcGVyIGlzIHRoZSBwZXJzaXN0ZW5jZSBz\ndG9yZQogICAgLy8gYW5kIGluZGljYXRlcyB3aGF0IHRoZSBlbnNlbWJsZSBz\naXplIGlzIChpLmUuIGhvdyBtYW55IGJvb2tpZQogICAgLy8gc2VydmVycyB0\nbyBzdHJpcGUgdGhlIGxlZGdlciBlbnRyaWVzIGFjcm9zcykuCiAgICBwdWJs\naWMgaW50IGdldEJrRW5zZW1ibGVTaXplKCkgewogICAgICAgIHJldHVybiBj\nb25mLmdldEludChCS19FTlNFTUJMRV9TSVpFLCAzKTsKICAgIH0KCiAgICAv\nLyBUaGlzIHBhcmFtZXRlciBpcyB1c2VkIHdoZW4gQm9va2tlZXBlciBpcyB0\naGUgcGVyc2lzdGVuY2Ugc3RvcmUKICAgIC8vIGFuZCBpbmRpY2F0ZXMgd2hh\ndCB0aGUgcXVvcnVtIHNpemUgaXMgKGkuZS4gaG93IG1hbnkgcmVkdW5kYW50\nCiAgICAvLyBjb3BpZXMgb2YgZWFjaCBsZWRnZXIgZW50cnkgaXMgd3JpdHRl\nbikuCiAgICBwdWJsaWMgaW50IGdldEJrUXVvcnVtU2l6ZSgpIHsKICAgICAg\nICByZXR1cm4gY29uZi5nZXRJbnQoQktfUVVPUlVNX1NJWkUsIDIpOwogICAg\nfQoKICAgIC8qCiAgICAgKiBJcyB0aGlzIGEgdmFsaWQgY29uZmlndXJhdGlv\nbiB0aGF0IHdlIGNhbiBydW4gd2l0aD8gVGhpcyBjb2RlIG1pZ2h0IGdyb3cK\nICAgICAqIG92ZXIgdGltZS4KICAgICAqLwogICAgcHVibGljIHZvaWQgdmFs\naWRhdGUoKSB0aHJvd3MgQ29uZmlndXJhdGlvbkV4Y2VwdGlvbiB7CiAgICAg\nICAgaWYgKCFnZXRaa1ByZWZpeCgpLnN0YXJ0c1dpdGgoIi8iKSkgewogICAg\nICAgICAgICB0aHJvdyBuZXcgQ29uZmlndXJhdGlvbkV4Y2VwdGlvbihaS19Q\nUkVGSVggKyAiIG11c3Qgc3RhcnQgd2l0aCBhIC8iKTsKICAgICAgICB9CiAg\nICAgICAgLy8gVmFsaWRhdGUgdGhhdCBpZiBSZWdpb25zIGV4aXN0IGFuZCBp\nbnRlci1yZWdpb24gY29tbXVuaWNhdGlvbiBpcyBTU0wKICAgICAgICAvLyBl\nbmFibGVkLCB0aGF0IHRoZSBSZWdpb25zIGNvcnJlc3BvbmQgdG8gdmFsaWQg\nSGVkd2lnU29ja2V0QWRkcmVzc2VzLAogICAgICAgIC8vIG5hbWVseSB0aGF0\nIFNTTCBwb3J0cyBhcmUgcHJlc2VudC4KICAgICAgICBpZiAoaXNJbnRlclJl\nZ2lvblNTTEVuYWJsZWQoKSAmJiBnZXRSZWdpb25zKCkuc2l6ZSgpID4gMCkg\newogICAgICAgICAgICBmb3IgKFN0cmluZyBodWJTdHJpbmcgOiBnZXRSZWdp\nb25zKCkpIHsKICAgICAgICAgICAgICAgIEhlZHdpZ1NvY2tldEFkZHJlc3Mg\naHViID0gbmV3IEhlZHdpZ1NvY2tldEFkZHJlc3MoaHViU3RyaW5nKTsKICAg\nICAgICAgICAgICAgIGlmIChodWIuZ2V0U1NMU29ja2V0QWRkcmVzcygpID09\nIG51bGwpCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IENvbmZpZ3Vy\nYXRpb25FeGNlcHRpb24oIlJlZ2lvbiBkZWZpbmVkIGRvZXMgbm90IGhhdmUg\ncmVxdWlyZWQgU1NMIHBvcnQ6ICIgKyBodWJTdHJpbmcpOwogICAgICAgICAg\nICB9CiAgICAgICAgfQogICAgICAgIC8vIFZhbGlkYXRlIHRoYXQgdGhlIEJv\nb2trZWVwZXIgZW5zZW1ibGUgc2l6ZSA+PSBxdW9ydW0gc2l6ZS4KICAgICAg\nICBpZiAoZ2V0QmtFbnNlbWJsZVNpemUoKSA8IGdldEJrUXVvcnVtU2l6ZSgp\nKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBDb25maWd1cmF0aW9uRXhjZXB0\naW9uKCJCSyBlbnNlbWJsZSBzaXplICgiICsgZ2V0QmtFbnNlbWJsZVNpemUo\nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICArICIpIGlzIGxlc3MgdGhhbiB0aGUgcXVvcnVtIHNpemUgKCIgKyBnZXRC\na1F1b3J1bVNpemUoKSArICIpIik7CiAgICAgICAgfQoKICAgICAgICAvLyBh\nZGQgb3RoZXIgY2hlY2tzIGhlcmUKICAgIH0KfQo=\n","encoding":"base64"}

