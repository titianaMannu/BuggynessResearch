{"sha":"5bfd89841becf37409c05dc57c08499273f76f21","node_id":"MDQ6QmxvYjE1NzU5NTY6NWJmZDg5ODQxYmVjZjM3NDA5YzA1ZGM1N2MwODQ5OTI3M2Y3NmYyMQ==","size":4648,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/5bfd89841becf37409c05dc57c08499273f76f21","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIucHJveHk7CgppbXBvcnQg\namF2YS51dGlsLkhhc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuTGlua2VkTGlz\ndDsKaW1wb3J0IGphdmEudXRpbC5MaXN0OwoKaW1wb3J0IG9yZy5qYm9zcy5u\nZXR0eS5jaGFubmVsLkNoYW5uZWw7CgppbXBvcnQgY29tLmdvb2dsZS5wcm90\nb2J1Zi5CeXRlU3RyaW5nOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuY2xp\nZW50LmFwaS5TdWJzY3JpYmVyOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcu\nY2xpZW50LmRhdGEuVG9waWNTdWJzY3JpYmVyOwppbXBvcnQgb3JnLmFwYWNo\nZS5oZWR3aWcuZXhjZXB0aW9ucy5QdWJTdWJFeGNlcHRpb247CmltcG9ydCBv\ncmcuYXBhY2hlLmhlZHdpZy5leGNlcHRpb25zLlB1YlN1YkV4Y2VwdGlvbi5U\nb3BpY0J1c3lFeGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5z\nZXJ2ZXIuaGFuZGxlcnMuQ2hhbm5lbERpc2Nvbm5lY3RMaXN0ZW5lcjsKaW1w\nb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnV0aWwuQ2FsbGJhY2s7CgpwdWJsaWMg\nY2xhc3MgQ2hhbm5lbFRyYWNrZXIgaW1wbGVtZW50cyBDaGFubmVsRGlzY29u\nbmVjdExpc3RlbmVyIHsKICAgIEhhc2hNYXA8VG9waWNTdWJzY3JpYmVyLCBD\naGFubmVsPiB0b3BpY1N1YjJDaGFubmVsID0gbmV3IEhhc2hNYXA8VG9waWNT\ndWJzY3JpYmVyLCBDaGFubmVsPigpOwogICAgSGFzaE1hcDxDaGFubmVsLCBM\naXN0PFRvcGljU3Vic2NyaWJlcj4+IGNoYW5uZWwyVG9waWNTdWJzID0gbmV3\nIEhhc2hNYXA8Q2hhbm5lbCwgTGlzdDxUb3BpY1N1YnNjcmliZXI+PigpOwog\nICAgU3Vic2NyaWJlciBzdWJzY3JpYmVyOwoKICAgIHB1YmxpYyBDaGFubmVs\nVHJhY2tlcihTdWJzY3JpYmVyIHN1YnNjcmliZXIpIHsKICAgICAgICB0aGlz\nLnN1YnNjcmliZXIgPSBzdWJzY3JpYmVyOwogICAgfQoKICAgIHN0YXRpYyBD\nYWxsYmFjazxWb2lkPiBub09wQ2FsbGJhY2sgPSBuZXcgQ2FsbGJhY2s8Vm9p\nZD4oKSB7CiAgICAgICAgcHVibGljIHZvaWQgb3BlcmF0aW9uRmFpbGVkKE9i\namVjdCBjdHgsIFB1YlN1YkV4Y2VwdGlvbiBleGNlcHRpb24pIHsKICAgICAg\nICB9OwoKICAgICAgICBwdWJsaWMgdm9pZCBvcGVyYXRpb25GaW5pc2hlZChP\nYmplY3QgY3R4LCBWb2lkIHJlc3VsdE9mT3BlcmF0aW9uKSB7CiAgICAgICAg\nfTsKICAgIH07CgogICAgcHVibGljIHN5bmNocm9uaXplZCB2b2lkIGNoYW5u\nZWxEaXNjb25uZWN0ZWQoQ2hhbm5lbCBjaGFubmVsKSB7CiAgICAgICAgTGlz\ndDxUb3BpY1N1YnNjcmliZXI+IHRvcGljU3VicyA9IGNoYW5uZWwyVG9waWNT\ndWJzLnJlbW92ZShjaGFubmVsKTsKCiAgICAgICAgaWYgKHRvcGljU3VicyA9\nPSBudWxsKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAg\nICAgIGZvciAoVG9waWNTdWJzY3JpYmVyIHRvcGljU3ViIDogdG9waWNTdWJz\nKSB7CiAgICAgICAgICAgIHRvcGljU3ViMkNoYW5uZWwucmVtb3ZlKHRvcGlj\nU3ViKTsKICAgICAgICAgICAgc3Vic2NyaWJlci5hc3luY0Nsb3NlU3Vic2Ny\naXB0aW9uKHRvcGljU3ViLmdldFRvcGljKCksIHRvcGljU3ViLmdldFN1YnNj\ncmliZXJJZCgpLCBub09wQ2FsbGJhY2ssIG51bGwpOwogICAgICAgIH0KICAg\nIH0KCiAgICBwdWJsaWMgc3luY2hyb25pemVkIHZvaWQgc3Vic2NyaWJlU3Vj\nY2VlZGVkKFRvcGljU3Vic2NyaWJlciB0b3BpY1N1YnNjcmliZXIsIENoYW5u\nZWwgY2hhbm5lbCkKICAgICAgICAgICAgdGhyb3dzIFRvcGljQnVzeUV4Y2Vw\ndGlvbiB7CgogICAgICAgIGlmICghY2hhbm5lbC5pc0Nvbm5lY3RlZCgpKSB7\nCiAgICAgICAgICAgIC8vIGNoYW5uZWwgZ290IGRpc2Nvbm5lY3RlZCB3aGls\nZSB3ZSB3ZXJlIHByb2Nlc3NpbmcgdGhlCiAgICAgICAgICAgIC8vIHN1YnNj\ncmliZSByZXF1ZXN0LCBub3RoaW5nIG11Y2ggd2UgY2FuIGRvIGluIHRoaXMg\nY2FzZQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBp\nZiAodG9waWNTdWIyQ2hhbm5lbC5jb250YWluc0tleSh0b3BpY1N1YnNjcmli\nZXIpKSB7CiAgICAgICAgICAgIFRvcGljQnVzeUV4Y2VwdGlvbiBwc2UgPSBu\nZXcgUHViU3ViRXhjZXB0aW9uLlRvcGljQnVzeUV4Y2VwdGlvbigKICAgICAg\nICAgICAgICAgICJzdWJzY3JpcHRpb24gZm9yIHRoaXMgdG9waWMsIHN1YnNj\ncmliZXJJZCBpcyBhbHJlYWR5IGJlaW5nIHNlcnZlZCBvbiBhIGRpZmZlcmVu\ndCBjaGFubmVsIik7CiAgICAgICAgICAgIHRocm93IHBzZTsKICAgICAgICB9\nCgogICAgICAgIHRvcGljU3ViMkNoYW5uZWwucHV0KHRvcGljU3Vic2NyaWJl\nciwgY2hhbm5lbCk7CgogICAgICAgIExpc3Q8VG9waWNTdWJzY3JpYmVyPiB0\nb3BpY1N1YnMgPSBjaGFubmVsMlRvcGljU3Vicy5nZXQoY2hhbm5lbCk7Cgog\nICAgICAgIGlmICh0b3BpY1N1YnMgPT0gbnVsbCkgewogICAgICAgICAgICB0\nb3BpY1N1YnMgPSBuZXcgTGlua2VkTGlzdDxUb3BpY1N1YnNjcmliZXI+KCk7\nCiAgICAgICAgICAgIGNoYW5uZWwyVG9waWNTdWJzLnB1dChjaGFubmVsLCB0\nb3BpY1N1YnMpOwogICAgICAgIH0KICAgICAgICB0b3BpY1N1YnMuYWRkKHRv\ncGljU3Vic2NyaWJlcik7CgogICAgfQoKICAgIHB1YmxpYyBzeW5jaHJvbml6\nZWQgdm9pZCBhYm91dFRvVW5zdWJzY3JpYmUoQnl0ZVN0cmluZyB0b3BpYywg\nQnl0ZVN0cmluZyBzdWJzY3JpYmVySWQpIHsKICAgICAgICBUb3BpY1N1YnNj\ncmliZXIgdG9waWNTdWIgPSBuZXcgVG9waWNTdWJzY3JpYmVyKHRvcGljLCBz\ndWJzY3JpYmVySWQpOwoKICAgICAgICBDaGFubmVsIGNoYW5uZWwgPSB0b3Bp\nY1N1YjJDaGFubmVsLnJlbW92ZSh0b3BpY1N1Yik7CgogICAgICAgIGlmIChj\naGFubmVsICE9IG51bGwpIHsKICAgICAgICAgICAgTGlzdDxUb3BpY1N1YnNj\ncmliZXI+IHRvcGljU3VicyA9IGNoYW5uZWwyVG9waWNTdWJzLmdldChjaGFu\nbmVsKTsKICAgICAgICAgICAgaWYgKHRvcGljU3VicyAhPSBudWxsKSB7CiAg\nICAgICAgICAgICAgICB0b3BpY1N1YnMucmVtb3ZlKHRvcGljU3ViKTsKICAg\nICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgc3luY2hy\nb25pemVkIHZvaWQgY2hlY2tDaGFubmVsTWF0Y2hlcyhCeXRlU3RyaW5nIHRv\ncGljLCBCeXRlU3RyaW5nIHN1YnNjcmliZXJJZCwgQ2hhbm5lbCBjaGFubmVs\nKQogICAgICAgICAgICB0aHJvd3MgUHViU3ViRXhjZXB0aW9uIHsKICAgICAg\nICBDaGFubmVsIHN1YnNjcmliZWRDaGFubmVsID0gZ2V0Q2hhbm5lbCh0b3Bp\nYywgc3Vic2NyaWJlcklkKTsKCiAgICAgICAgaWYgKHN1YnNjcmliZWRDaGFu\nbmVsID09IG51bGwpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFB1YlN1YkV4\nY2VwdGlvbi5DbGllbnROb3RTdWJzY3JpYmVkRXhjZXB0aW9uKAogICAgICAg\nICAgICAgICAgIkNhbid0IHN0YXJ0IGRlbGl2ZXJ5IHNpbmNlIGNsaWVudCBp\ncyBub3Qgc3Vic2NyaWJlZCIpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHN1\nYnNjcmliZWRDaGFubmVsICE9IGNoYW5uZWwpIHsKICAgICAgICAgICAgdGhy\nb3cgbmV3IFB1YlN1YkV4Y2VwdGlvbi5Ub3BpY0J1c3lFeGNlcHRpb24oCiAg\nICAgICAgICAgICAgICAiQ2FuJ3Qgc3RhcnQgZGVsaXZlcnkgc2luY2UgY2xp\nZW50IGlzIHN1YnNjcmliZWQgb24gYSBkaWZmZXJlbnQgY2hhbm5lbCIpOwog\nICAgICAgIH0KCiAgICB9CgogICAgcHVibGljIHN5bmNocm9uaXplZCBDaGFu\nbmVsIGdldENoYW5uZWwoQnl0ZVN0cmluZyB0b3BpYywgQnl0ZVN0cmluZyBz\ndWJzY3JpYmVySWQpIHsKICAgICAgICByZXR1cm4gdG9waWNTdWIyQ2hhbm5l\nbC5nZXQobmV3IFRvcGljU3Vic2NyaWJlcih0b3BpYywgc3Vic2NyaWJlcklk\nKSk7CiAgICB9Cgp9Cg==\n","encoding":"base64"}

