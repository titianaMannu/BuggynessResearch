{"sha":"5b04bdcddad25743a1b63cd67b8dcca1995a36b6","node_id":"MDQ6QmxvYjE1NzU5NTY6NWIwNGJkY2RkYWQyNTc0M2ExYjYzY2Q2N2I4ZGNjYTE5OTVhMzZiNg==","size":6676,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/5b04bdcddad25743a1b63cd67b8dcca1995a36b6","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIucHJveHk7CgppbXBvcnQg\namF2YS5pby5GaWxlOwppbXBvcnQgamF2YS5sYW5nLlRocmVhZC5VbmNhdWdo\ndEV4Y2VwdGlvbkhhbmRsZXI7CmltcG9ydCBqYXZhLm5ldC5JbmV0U29ja2V0\nQWRkcmVzczsKaW1wb3J0IGphdmEubmV0Lk1hbGZvcm1lZFVSTEV4Y2VwdGlv\nbjsKaW1wb3J0IGphdmEudXRpbC5IYXNoTWFwOwppbXBvcnQgamF2YS51dGls\nLk1hcDsKaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkV4ZWN1dG9yczsK\naW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkxpbmtlZEJsb2NraW5nUXVl\ndWU7CmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMuY29uZmlndXJhdGlvbi5D\nb25maWd1cmF0aW9uRXhjZXB0aW9uOwppbXBvcnQgb3JnLnNsZjRqLkxvZ2dl\ncjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJGYWN0b3J5OwppbXBvcnQgb3Jn\nLmpib3NzLm5ldHR5LmJvb3RzdHJhcC5TZXJ2ZXJCb290c3RyYXA7CmltcG9y\ndCBvcmcuamJvc3MubmV0dHkuY2hhbm5lbC5ncm91cC5DaGFubmVsR3JvdXA7\nCmltcG9ydCBvcmcuamJvc3MubmV0dHkuY2hhbm5lbC5ncm91cC5EZWZhdWx0\nQ2hhbm5lbEdyb3VwOwppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmNoYW5uZWwu\nc29ja2V0LlNlcnZlclNvY2tldENoYW5uZWxGYWN0b3J5OwppbXBvcnQgb3Jn\nLmpib3NzLm5ldHR5LmNoYW5uZWwuc29ja2V0Lm5pby5OaW9TZXJ2ZXJTb2Nr\nZXRDaGFubmVsRmFjdG9yeTsKaW1wb3J0IG9yZy5qYm9zcy5uZXR0eS5sb2dn\naW5nLkludGVybmFsTG9nZ2VyRmFjdG9yeTsKaW1wb3J0IG9yZy5qYm9zcy5u\nZXR0eS5sb2dnaW5nLkxvZzRKTG9nZ2VyRmFjdG9yeTsKCmltcG9ydCBvcmcu\nYXBhY2hlLmhlZHdpZy5jbGllbnQuSGVkd2lnQ2xpZW50OwppbXBvcnQgb3Jn\nLmFwYWNoZS5oZWR3aWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2wuT3BlcmF0\naW9uVHlwZTsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnNlcnZlci5jb21t\nb24uVGVybWluYXRlSlZNRXhjZXB0aW9uSGFuZGxlcjsKaW1wb3J0IG9yZy5h\ncGFjaGUuaGVkd2lnLnNlcnZlci5oYW5kbGVycy5IYW5kbGVyOwppbXBvcnQg\nb3JnLmFwYWNoZS5oZWR3aWcuc2VydmVyLm5ldHR5LlB1YlN1YlNlcnZlcjsK\naW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnNlcnZlci5uZXR0eS5QdWJTdWJT\nZXJ2ZXJQaXBlbGluZUZhY3Rvcnk7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdp\nZy5zZXJ2ZXIubmV0dHkuVW1icmVsbGFIYW5kbGVyOwoKcHVibGljIGNsYXNz\nIEhlZHdpZ1Byb3h5IHsKICAgIHN0YXRpYyBmaW5hbCBMb2dnZXIgbG9nZ2Vy\nID0gTG9nZ2VyRmFjdG9yeS5nZXRMb2dnZXIoSGVkd2lnUHJveHkuY2xhc3Mp\nOwoKICAgIEhlZHdpZ0NsaWVudCBjbGllbnQ7CiAgICBTZXJ2ZXJTb2NrZXRD\naGFubmVsRmFjdG9yeSBzZXJ2ZXJTb2NrZXRDaGFubmVsRmFjdG9yeTsKICAg\nIENoYW5uZWxHcm91cCBhbGxDaGFubmVsczsKICAgIE1hcDxPcGVyYXRpb25U\neXBlLCBIYW5kbGVyPiBoYW5kbGVyczsKICAgIFByb3h5Q29uZmlndXJhdGlv\nbiBjZmc7CgogICAgcHVibGljIEhlZHdpZ1Byb3h5KGZpbmFsIFByb3h5Q29u\nZmlndXJhdGlvbiBjZmcsIGZpbmFsIFVuY2F1Z2h0RXhjZXB0aW9uSGFuZGxl\nciBleGNlcHRpb25IYW5kbGVyKQogICAgICAgICAgICB0aHJvd3MgSW50ZXJy\ndXB0ZWRFeGNlcHRpb24gewogICAgICAgIHRoaXMuY2ZnID0gY2ZnOwoKICAg\nICAgICBUaHJlYWRHcm91cCB0ZyA9IG5ldyBUaHJlYWRHcm91cCgiaGVkd2ln\ncHJveHkiKSB7CiAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICBw\ndWJsaWMgdm9pZCB1bmNhdWdodEV4Y2VwdGlvbihUaHJlYWQgdCwgVGhyb3dh\nYmxlIGUpIHsKICAgICAgICAgICAgICAgIGV4Y2VwdGlvbkhhbmRsZXIudW5j\nYXVnaHRFeGNlcHRpb24odCwgZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9\nOwoKICAgICAgICBmaW5hbCBMaW5rZWRCbG9ja2luZ1F1ZXVlPEJvb2xlYW4+\nIHF1ZXVlID0gbmV3IExpbmtlZEJsb2NraW5nUXVldWU8Qm9vbGVhbj4oKTsK\nCiAgICAgICAgbmV3IFRocmVhZCh0ZywgbmV3IFJ1bm5hYmxlKCkgewogICAg\nICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIHZvaWQgcnVu\nKCkgewogICAgICAgICAgICAgICAgY2xpZW50ID0gbmV3IEhlZHdpZ0NsaWVu\ndChjZmcpOwoKICAgICAgICAgICAgICAgIHNlcnZlclNvY2tldENoYW5uZWxG\nYWN0b3J5ID0gbmV3IE5pb1NlcnZlclNvY2tldENoYW5uZWxGYWN0b3J5KEV4\nZWN1dG9ycy5uZXdDYWNoZWRUaHJlYWRQb29sKCksCiAgICAgICAgICAgICAg\nICAgICAgICAgIEV4ZWN1dG9ycy5uZXdDYWNoZWRUaHJlYWRQb29sKCkpOwog\nICAgICAgICAgICAgICAgaW5pdGlhbGl6ZUhhbmRsZXJzKCk7CiAgICAgICAg\nICAgICAgICBpbml0aWFsaXplTmV0dHkoKTsKCiAgICAgICAgICAgICAgICBx\ndWV1ZS5vZmZlcih0cnVlKTsKICAgICAgICAgICAgfQogICAgICAgIH0pLnN0\nYXJ0KCk7CgogICAgICAgIHF1ZXVlLnRha2UoKTsKICAgIH0KCiAgICBwdWJs\naWMgSGVkd2lnUHJveHkoUHJveHlDb25maWd1cmF0aW9uIGNvbmYpIHRocm93\ncyBJbnRlcnJ1cHRlZEV4Y2VwdGlvbiB7CiAgICAgICAgdGhpcyhjb25mLCBu\nZXcgVGVybWluYXRlSlZNRXhjZXB0aW9uSGFuZGxlcigpKTsKICAgIH0KCiAg\nICBwcm90ZWN0ZWQgdm9pZCBpbml0aWFsaXplSGFuZGxlcnMoKSB7CiAgICAg\nICAgaGFuZGxlcnMgPSBuZXcgSGFzaE1hcDxPcGVyYXRpb25UeXBlLCBIYW5k\nbGVyPigpOwogICAgICAgIENoYW5uZWxUcmFja2VyIHRyYWNrZXIgPSBuZXcg\nQ2hhbm5lbFRyYWNrZXIoY2xpZW50LmdldFN1YnNjcmliZXIoKSk7CgogICAg\nICAgIGhhbmRsZXJzLnB1dChPcGVyYXRpb25UeXBlLlBVQkxJU0gsIG5ldyBQ\ncm94eVB1Ymxpc2hIYW5kZXIoY2xpZW50LmdldFB1Ymxpc2hlcigpKSk7CiAg\nICAgICAgaGFuZGxlcnMucHV0KE9wZXJhdGlvblR5cGUuU1VCU0NSSUJFLCBu\nZXcgUHJveHlTdWJzY3JpYmVIYW5kbGVyKGNsaWVudC5nZXRTdWJzY3JpYmVy\nKCksIHRyYWNrZXIpKTsKICAgICAgICBoYW5kbGVycy5wdXQoT3BlcmF0aW9u\nVHlwZS5VTlNVQlNDUklCRSwgbmV3IFByb3h5VW5zdWJzY3JpYmVIYW5kbGVy\nKGNsaWVudC5nZXRTdWJzY3JpYmVyKCksIHRyYWNrZXIpKTsKICAgICAgICBo\nYW5kbGVycy5wdXQoT3BlcmF0aW9uVHlwZS5DT05TVU1FLCBuZXcgUHJveHlD\nb25zdW1lSGFuZGxlcihjbGllbnQuZ2V0U3Vic2NyaWJlcigpKSk7CiAgICAg\nICAgaGFuZGxlcnMucHV0KE9wZXJhdGlvblR5cGUuU1RPUF9ERUxJVkVSWSwg\nbmV3IFByb3h5U3RvcERlbGl2ZXJ5SGFuZGxlcihjbGllbnQuZ2V0U3Vic2Ny\naWJlcigpLCB0cmFja2VyKSk7CiAgICAgICAgaGFuZGxlcnMucHV0KE9wZXJh\ndGlvblR5cGUuU1RBUlRfREVMSVZFUlksIG5ldyBQcm94eVN0YXJ0RGVsaXZl\ncnlIYW5kbGVyKGNsaWVudC5nZXRTdWJzY3JpYmVyKCksIHRyYWNrZXIpKTsK\nCiAgICB9CgogICAgcHJvdGVjdGVkIHZvaWQgaW5pdGlhbGl6ZU5ldHR5KCkg\newogICAgICAgIEludGVybmFsTG9nZ2VyRmFjdG9yeS5zZXREZWZhdWx0RmFj\ndG9yeShuZXcgTG9nNEpMb2dnZXJGYWN0b3J5KCkpOwogICAgICAgIGFsbENo\nYW5uZWxzID0gbmV3IERlZmF1bHRDaGFubmVsR3JvdXAoImhlZHdpZ3Byb3h5\nIik7CiAgICAgICAgU2VydmVyQm9vdHN0cmFwIGJvb3RzdHJhcCA9IG5ldyBT\nZXJ2ZXJCb290c3RyYXAoc2VydmVyU29ja2V0Q2hhbm5lbEZhY3RvcnkpOwog\nICAgICAgIFVtYnJlbGxhSGFuZGxlciB1bWJyZWxsYUhhbmRsZXIgPSBuZXcg\nVW1icmVsbGFIYW5kbGVyKGFsbENoYW5uZWxzLCBoYW5kbGVycywgZmFsc2Up\nOwogICAgICAgIFB1YlN1YlNlcnZlclBpcGVsaW5lRmFjdG9yeSBwaXBlbGlu\nZSA9IG5ldyBQdWJTdWJTZXJ2ZXJQaXBlbGluZUZhY3RvcnkodW1icmVsbGFI\nYW5kbGVyLCBudWxsLCBjZmcKICAgICAgICAgICAgICAgIC5nZXRNYXhpbXVt\nTWVzc2FnZVNpemUoKSk7CgogICAgICAgIGJvb3RzdHJhcC5zZXRQaXBlbGlu\nZUZhY3RvcnkocGlwZWxpbmUpOwogICAgICAgIGJvb3RzdHJhcC5zZXRPcHRp\nb24oImNoaWxkLnRjcE5vRGVsYXkiLCB0cnVlKTsKICAgICAgICBib290c3Ry\nYXAuc2V0T3B0aW9uKCJjaGlsZC5rZWVwQWxpdmUiLCB0cnVlKTsKICAgICAg\nICBib290c3RyYXAuc2V0T3B0aW9uKCJyZXVzZUFkZHJlc3MiLCB0cnVlKTsK\nCiAgICAgICAgLy8gQmluZCBhbmQgc3RhcnQgdG8gYWNjZXB0IGluY29taW5n\nIGNvbm5lY3Rpb25zLgogICAgICAgIGFsbENoYW5uZWxzLmFkZChib290c3Ry\nYXAuYmluZChuZXcgSW5ldFNvY2tldEFkZHJlc3MoY2ZnLmdldFByb3h5UG9y\ndCgpKSkpOwogICAgICAgIGxvZ2dlci5pbmZvKCJHb2luZyBpbnRvIHJlY2Vp\ndmUgbG9vcCIpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNodXRkb3duKCkg\newogICAgICAgIGFsbENoYW5uZWxzLmNsb3NlKCkuYXdhaXRVbmludGVycnVw\ndGlibHkoKTsKICAgICAgICBjbGllbnQuY2xvc2UoKTsKICAgICAgICBzZXJ2\nZXJTb2NrZXRDaGFubmVsRmFjdG9yeS5yZWxlYXNlRXh0ZXJuYWxSZXNvdXJj\nZXMoKTsKICAgIH0KCiAgICAvLyB0aGUgZm9sbG93aW5nIG1ldGhvZCBvbmx5\nIGV4aXN0cyBmb3IgdW5pdC10ZXN0aW5nIHB1cnBvc2VzLCBzaG91bGQgZ28K\nICAgIC8vIGF3YXkgb25jZSB3ZSBtYWtlIHN0YXJ0IGRlbGl2ZXJ5IHRvdGFs\nbHkgc2VydmVyLXNpZGUKICAgIHB1YmxpYyBIYW5kbGVyIGdldFN0YXJ0RGVs\naXZlcnlIYW5kbGVyKCkgewogICAgICAgIHJldHVybiBoYW5kbGVycy5nZXQo\nT3BlcmF0aW9uVHlwZS5TVEFSVF9ERUxJVkVSWSk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBAcGFyYW0gYXJncwogICAgICovCiAgICBwdWJsaWMgc3RhdGlj\nIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7CgogICAgICAgIGxvZ2dlci5p\nbmZvKCJBdHRlbXB0aW5nIHRvIHN0YXJ0IEhlZHdpZyBQcm94eSIpOwogICAg\nICAgIFByb3h5Q29uZmlndXJhdGlvbiBjb25mID0gbmV3IFByb3h5Q29uZmln\ndXJhdGlvbigpOwogICAgICAgIGlmIChhcmdzLmxlbmd0aCA+IDApIHsKICAg\nICAgICAgICAgU3RyaW5nIGNvbmZGaWxlID0gYXJnc1swXTsKICAgICAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbmYubG9hZENvbmYobmV3IEZp\nbGUoY29uZkZpbGUpLnRvVVJJKCkudG9VUkwoKSk7CiAgICAgICAgICAgIH0g\nY2F0Y2ggKE1hbGZvcm1lZFVSTEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAg\nICAgICBTdHJpbmcgbXNnID0gIkNvdWxkIG5vdCBvcGVuIGNvbmZpZ3VyYXRp\nb24gZmlsZTogIiArIGNvbmZGaWxlOwogICAgICAgICAgICAgICAgUHViU3Vi\nU2VydmVyLmVycm9yTXNnQW5kRXhpdChtc2csIGUsIFB1YlN1YlNlcnZlci5S\nQ19JTlZBTElEX0NPTkZfRklMRSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKENv\nbmZpZ3VyYXRpb25FeGNlcHRpb24gZSkgewogICAgICAgICAgICAgICAgU3Ry\naW5nIG1zZyA9ICJNYWxmb3JtZWQgY29uZmlndXJhdGlvbiBmaWxlOiAiICsg\nY29uZkZpbGU7CiAgICAgICAgICAgICAgICBQdWJTdWJTZXJ2ZXIuZXJyb3JN\nc2dBbmRFeGl0KG1zZywgZSwgUHViU3ViU2VydmVyLlJDX01JU0NPTkZJR1VS\nRUQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxvZ2dlci5pbmZvKCJV\nc2luZyBjb25maWd1cmF0aW9uIGZpbGUgIiArIGNvbmZGaWxlKTsKICAgICAg\nICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbmV3IEhlZHdpZ1Byb3h5\nKGNvbmYpOwogICAgICAgIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7CiAgICAg\nICAgICAgIFB1YlN1YlNlcnZlci5lcnJvck1zZ0FuZEV4aXQoIkVycm9yIGR1\ncmluZyBzdGFydHVwIiwgdCwgUHViU3ViU2VydmVyLlJDX09USEVSKTsKICAg\nICAgICB9CiAgICB9Cgp9Cg==\n","encoding":"base64"}

