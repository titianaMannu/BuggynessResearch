{"sha":"223d63af9ce2bc7d2501793f82a29116f3ea0365","node_id":"MDQ6QmxvYjE1NzU5NTY6MjIzZDYzYWY5Y2UyYmM3ZDI1MDE3OTNmODJhMjkxMTZmM2VhMDM2NQ==","size":5523,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/223d63af9ce2bc7d2501793f82a29116f3ea0365","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIucHJveHk7CgppbXBvcnQg\nb3JnLnNsZjRqLkxvZ2dlcjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJGYWN0\nb3J5OwppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmNoYW5uZWwuQ2hhbm5lbDsK\naW1wb3J0IG9yZy5qYm9zcy5uZXR0eS5jaGFubmVsLkNoYW5uZWxGdXR1cmU7\nCmltcG9ydCBvcmcuamJvc3MubmV0dHkuY2hhbm5lbC5DaGFubmVsRnV0dXJl\nTGlzdGVuZXI7CgppbXBvcnQgY29tLmdvb2dsZS5wcm90b2J1Zi5CeXRlU3Ry\naW5nOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuY2xpZW50LmFwaS5NZXNz\nYWdlSGFuZGxlcjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmNsaWVudC5h\ncGkuU3Vic2NyaWJlcjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmV4Y2Vw\ndGlvbnMuUHViU3ViRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3\naWcuZXhjZXB0aW9ucy5QdWJTdWJFeGNlcHRpb24uQ2xpZW50Tm90U3Vic2Ny\naWJlZEV4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnByb3Rv\nY29sLlB1YlN1YlByb3RvY29sLk1lc3NhZ2U7CmltcG9ydCBvcmcuYXBhY2hl\nLmhlZHdpZy5wcm90b2NvbC5QdWJTdWJQcm90b2NvbC5Qcm90b2NvbFZlcnNp\nb247CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5QdWJTdWJQ\ncm90b2NvbC5QdWJTdWJSZXF1ZXN0OwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3\naWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2wuUHViU3ViUmVzcG9uc2U7Cmlt\ncG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5QdWJTdWJQcm90b2Nv\nbC5TdGF0dXNDb2RlOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcucHJvdG9l\neHRlbnNpb25zLlB1YlN1YlJlc3BvbnNlVXRpbHM7CmltcG9ydCBvcmcuYXBh\nY2hlLmhlZHdpZy5zZXJ2ZXIuaGFuZGxlcnMuSGFuZGxlcjsKaW1wb3J0IG9y\nZy5hcGFjaGUuaGVkd2lnLnNlcnZlci5uZXR0eS5VbWJyZWxsYUhhbmRsZXI7\nCmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy51dGlsLkNhbGxiYWNrOwoKcHVi\nbGljIGNsYXNzIFByb3h5U3RhcnREZWxpdmVyeUhhbmRsZXIgaW1wbGVtZW50\ncyBIYW5kbGVyIHsKCiAgICBzdGF0aWMgZmluYWwgTG9nZ2VyIGxvZ2dlciA9\nIExvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKFByb3h5U3RhcnREZWxpdmVyeUhh\nbmRsZXIuY2xhc3MpOwoKICAgIFN1YnNjcmliZXIgc3Vic2NyaWJlcjsKICAg\nIENoYW5uZWxUcmFja2VyIHRyYWNrZXI7CgogICAgcHVibGljIFByb3h5U3Rh\ncnREZWxpdmVyeUhhbmRsZXIoU3Vic2NyaWJlciBzdWJzY3JpYmVyLCBDaGFu\nbmVsVHJhY2tlciB0cmFja2VyKSB7CiAgICAgICAgdGhpcy5zdWJzY3JpYmVy\nID0gc3Vic2NyaWJlcjsKICAgICAgICB0aGlzLnRyYWNrZXIgPSB0cmFja2Vy\nOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgaGFuZGxl\nUmVxdWVzdChQdWJTdWJSZXF1ZXN0IHJlcXVlc3QsIENoYW5uZWwgY2hhbm5l\nbCkgewoKICAgICAgICBpZiAoIXJlcXVlc3QuaGFzU3RhcnREZWxpdmVyeVJl\ncXVlc3QoKSkgewogICAgICAgICAgICBVbWJyZWxsYUhhbmRsZXIuc2VuZEVy\ncm9yUmVzcG9uc2VUb01hbGZvcm1lZFJlcXVlc3QoY2hhbm5lbCwgcmVxdWVz\ndC5nZXRUeG5JZCgpLAogICAgICAgICAgICAgICAgICAgICJNaXNzaW5nIHN0\nYXJ0IGRlbGl2ZXJ5IHJlcXVlc3QgZGF0YSIpOwogICAgICAgICAgICByZXR1\ncm47CiAgICAgICAgfQoKICAgICAgICBmaW5hbCBCeXRlU3RyaW5nIHRvcGlj\nID0gcmVxdWVzdC5nZXRUb3BpYygpOwogICAgICAgIGZpbmFsIEJ5dGVTdHJp\nbmcgc3Vic2NyaWJlcklkID0gcmVxdWVzdC5nZXRTdGFydERlbGl2ZXJ5UmVx\ndWVzdCgpLmdldFN1YnNjcmliZXJJZCgpOwoKICAgICAgICBzeW5jaHJvbml6\nZWQgKHRyYWNrZXIpIHsKICAgICAgICAgICAgLy8gdHJ5IHsKICAgICAgICAg\nICAgLy8gdHJhY2tlci5jaGVja0NoYW5uZWxNYXRjaGVzKHRvcGljLCBzdWJz\nY3JpYmVySWQsIGNoYW5uZWwpOwogICAgICAgICAgICAvLyB9IGNhdGNoIChQ\ndWJTdWJFeGNlcHRpb24gZSkgewogICAgICAgICAgICAvLyBjaGFubmVsLndy\naXRlKFB1YlN1YlJlc3BvbnNlVXRpbHMuZ2V0UmVzcG9uc2VGb3JFeGNlcHRp\nb24oZSwKICAgICAgICAgICAgLy8gcmVxdWVzdC5nZXRUeG5JZCgpKSk7CiAg\nICAgICAgICAgIC8vIHJldHVybjsKICAgICAgICAgICAgLy8gfQoKICAgICAg\nICAgICAgZmluYWwgQ2hhbm5lbCBzdWJzY3JpYmVkQ2hhbm5lbCA9IHRyYWNr\nZXIuZ2V0Q2hhbm5lbCh0b3BpYywgc3Vic2NyaWJlcklkKTsKCiAgICAgICAg\nICAgIGlmIChzdWJzY3JpYmVkQ2hhbm5lbCA9PSBudWxsKSB7CiAgICAgICAg\nICAgICAgICBjaGFubmVsLndyaXRlKFB1YlN1YlJlc3BvbnNlVXRpbHMuZ2V0\nUmVzcG9uc2VGb3JFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICBuZXcgUHViU3ViRXhjZXB0aW9uLkNsaWVudE5vdFN1YnNj\ncmliZWRFeGNlcHRpb24oIm5vIHN1YnNjcmlwdGlvbiB0byBzdGFydCBkZWxp\ndmVyeSBvbiIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\ncmVxdWVzdC5nZXRUeG5JZCgpKSk7CiAgICAgICAgICAgICAgICByZXR1cm47\nCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIE1lc3NhZ2VIYW5kbGVyIGhh\nbmRsZXIgPSBuZXcgTWVzc2FnZUhhbmRsZXIoKSB7CiAgICAgICAgICAgICAg\nICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIGRlbGl2\nZXIoQnl0ZVN0cmluZyB0b3BpYywgQnl0ZVN0cmluZyBzdWJzY3JpYmVySWQs\nIE1lc3NhZ2UgbXNnLAogICAgICAgICAgICAgICAgZmluYWwgQ2FsbGJhY2s8\nVm9pZD4gY2FsbGJhY2ssIGZpbmFsIE9iamVjdCBjb250ZXh0KSB7CgogICAg\nICAgICAgICAgICAgICAgIFB1YlN1YlJlc3BvbnNlIHJlc3BvbnNlID0gUHVi\nU3ViUmVzcG9uc2UubmV3QnVpbGRlcigpLnNldFByb3RvY29sVmVyc2lvbigK\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICBQcm90b2NvbFZlcnNpb24uVkVSU0lPTl9PTkUpLnNldFN0YXR1c0Nv\nZGUoU3RhdHVzQ29kZS5TVUNDRVNTKS5zZXRUeG5JZCgwKS5zZXRNZXNzYWdl\nKG1zZykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIC5zZXRUb3BpYyh0b3BpYykuc2V0U3Vic2NyaWJlcklkKHN1YnNj\ncmliZXJJZCkuYnVpbGQoKTsKCiAgICAgICAgICAgICAgICAgICAgQ2hhbm5l\nbEZ1dHVyZSBmdXR1cmUgPSBzdWJzY3JpYmVkQ2hhbm5lbC53cml0ZShyZXNw\nb25zZSk7CgogICAgICAgICAgICAgICAgICAgIGZ1dHVyZS5hZGRMaXN0ZW5l\ncihuZXcgQ2hhbm5lbEZ1dHVyZUxpc3RlbmVyKCkgewogICAgICAgICAgICAg\nICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgICAgICAgICAg\ncHVibGljIHZvaWQgb3BlcmF0aW9uQ29tcGxldGUoQ2hhbm5lbEZ1dHVyZSBm\ndXR1cmUpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgaWYgKCFmdXR1cmUuaXNTdWNjZXNzKCkpIHsKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAvLyBpZ25vcmluZyB0aGlzIGZhaWx1\ncmUsIGJlY2F1c2UgdGhpcyB3aWxsCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgLy8gb25seSBoYXBwZW4gZHVlIHRvIGNoYW5uZWwgZGlzY29u\nbmVjdC4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGFu\nbmVsIGRpc2Nvbm5lY3Qgd2lsbCBpbiB0dXJuIHN0b3AKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAvLyBkZWxpdmVyeSwgYW5kIHN0b3AgdGhl\nc2UgZXJyb3JzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0\ndXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIC8vIFRlbGwgdGhlIGhlZHdpZyBjbGllbnQs\nIHRoYXQgaXQgY2FuIHNlbmQgbWUKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIC8vIG1vcmUgbWVzc2FnZXMKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIGNhbGxiYWNrLm9wZXJhdGlvbkZpbmlzaGVkKGNvbnRleHQsIG51bGwp\nOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAg\nICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAg\nICAgICAgICBjaGFubmVsLndyaXRlKFB1YlN1YlJlc3BvbnNlVXRpbHMuZ2V0\nU3VjY2Vzc1Jlc3BvbnNlKHJlcXVlc3QuZ2V0VHhuSWQoKSkpOwoKICAgICAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHN1YnNjcmliZXIuc3RhcnRE\nZWxpdmVyeSh0b3BpYywgc3Vic2NyaWJlcklkLCBoYW5kbGVyKTsKICAgICAg\nICAgICAgfSBjYXRjaCAoQ2xpZW50Tm90U3Vic2NyaWJlZEV4Y2VwdGlvbiBl\nKSB7CiAgICAgICAgICAgICAgICAvLyBUaGlzIHNob3VsZCBub3QgaGFwcGVu\nLCBzaW5jZSB3ZSBhbHJlYWR5IGNoZWNrZWQgdGhlIGNvcnJlY3QKICAgICAg\nICAgICAgICAgIC8vIGNoYW5uZWwgYW5kIHNvIG9uCiAgICAgICAgICAgICAg\nICBsb2dnZXIuZXJyb3IoIlVuZXhwZWN0ZWQ6IE5vIHN1YnNjcmlwdGlvbiB3\naGVuIGF0dGVtcHRpbmcgdG8gc3RhcnQgZGVsaXZlcnkiLCBlKTsKICAgICAg\nICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKGUpOwogICAg\nICAgICAgICB9CgoKCiAgICAgICAgfQoKICAgIH0KCn0K\n","encoding":"base64"}

