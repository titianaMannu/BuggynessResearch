{"sha":"14037334f61622bfba4eebfe6efce8f975c7d419","node_id":"MDQ6QmxvYjE1NzU5NTY6MTQwMzczMzRmNjE2MjJiZmJhNGVlYmZlNmVmY2U4Zjk3NWM3ZDQxOQ==","size":9606,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/14037334f61622bfba4eebfe6efce8f975c7d419","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIucmVnaW9uczsKCmltcG9y\ndCBqYXZhLnV0aWwuQXJyYXlMaXN0OwppbXBvcnQgamF2YS51dGlsLmNvbmN1\ncnJlbnQuU2NoZWR1bGVkRXhlY3V0b3JTZXJ2aWNlOwoKaW1wb3J0IG9yZy5z\nbGY0ai5Mb2dnZXI7CmltcG9ydCBvcmcuc2xmNGouTG9nZ2VyRmFjdG9yeTsK\naW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXI7CmltcG9ydCBvcmcuc2xmNGouTG9n\nZ2VyRmFjdG9yeTsKaW1wb3J0IG9yZy5hcGFjaGUuem9va2VlcGVyLlpvb0tl\nZXBlcjsKCmltcG9ydCBjb20uZ29vZ2xlLnByb3RvYnVmLkJ5dGVTdHJpbmc7\nCmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQuYXBpLk1lc3NhZ2VI\nYW5kbGVyOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuY2xpZW50Lm5ldHR5\nLkhlZHdpZ1N1YnNjcmliZXI7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5l\neGNlcHRpb25zLlB1YlN1YkV4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUu\naGVkd2lnLnByb3RvY29sLlB1YlN1YlByb3RvY29sLk1lc3NhZ2U7CmltcG9y\ndCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5QdWJTdWJQcm90b2NvbC5N\nZXNzYWdlU2VxSWQ7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2Nv\nbC5QdWJTdWJQcm90b2NvbC5SZWdpb25TcGVjaWZpY1NlcUlkOwppbXBvcnQg\nb3JnLmFwYWNoZS5oZWR3aWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2wuU3Vi\nc2NyaWJlUmVxdWVzdC5DcmVhdGVPckF0dGFjaDsKaW1wb3J0IG9yZy5hcGFj\naGUuaGVkd2lnLnByb3RvZXh0ZW5zaW9ucy5TdWJzY3JpcHRpb25TdGF0ZVV0\naWxzOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuc2VydmVyLmNvbW1vbi5T\nZXJ2ZXJDb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcu\nc2VydmVyLmNvbW1vbi5Ub3BpY09wUXVldWVyOwppbXBvcnQgb3JnLmFwYWNo\nZS5oZWR3aWcuc2VydmVyLnBlcnNpc3RlbmNlLlBlcnNpc3RSZXF1ZXN0Owpp\nbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuc2VydmVyLnBlcnNpc3RlbmNlLlBl\ncnNpc3RlbmNlTWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnNl\ncnZlci5zdWJzY3JpcHRpb25zLlN1YnNjcmlwdGlvbkV2ZW50TGlzdGVuZXI7\nCmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy51dGlsLkNhbGxiYWNrOwppbXBv\ncnQgb3JnLmFwYWNoZS5oZWR3aWcudXRpbC5DYWxsYmFja1V0aWxzOwppbXBv\ncnQgb3JnLmFwYWNoZS5oZWR3aWcudXRpbC5IZWR3aWdTb2NrZXRBZGRyZXNz\nOwoKcHVibGljIGNsYXNzIFJlZ2lvbk1hbmFnZXIgaW1wbGVtZW50cyBTdWJz\nY3JpcHRpb25FdmVudExpc3RlbmVyIHsKCiAgICBwcm90ZWN0ZWQgc3RhdGlj\nIGZpbmFsIExvZ2dlciBMT0dHRVIgPSBMb2dnZXJGYWN0b3J5LmdldExvZ2dl\ncihSZWdpb25NYW5hZ2VyLmNsYXNzKTsKCiAgICBwcml2YXRlIGZpbmFsIEJ5\ndGVTdHJpbmcgbXlTdWJJZDsKICAgIHByaXZhdGUgZmluYWwgUGVyc2lzdGVu\nY2VNYW5hZ2VyIHBtOwogICAgcHJpdmF0ZSBmaW5hbCBBcnJheUxpc3Q8SGVk\nd2lnSHViQ2xpZW50PiBjbGllbnRzID0gbmV3IEFycmF5TGlzdDxIZWR3aWdI\ndWJDbGllbnQ+KCk7CiAgICBwcml2YXRlIGZpbmFsIFRvcGljT3BRdWV1ZXIg\ncXVldWU7CgogICAgcHVibGljIFJlZ2lvbk1hbmFnZXIoZmluYWwgUGVyc2lz\ndGVuY2VNYW5hZ2VyIHBtLCBmaW5hbCBTZXJ2ZXJDb25maWd1cmF0aW9uIGNm\nZywgZmluYWwgWm9vS2VlcGVyIHprLAogICAgICAgICAgICAgICAgICAgICAg\nICAgU2NoZWR1bGVkRXhlY3V0b3JTZXJ2aWNlIHNjaGVkdWxlciwgSGVkd2ln\nSHViQ2xpZW50RmFjdG9yeSBodWJDbGllbnRGYWN0b3J5KSB7CiAgICAgICAg\ndGhpcy5wbSA9IHBtOwogICAgICAgIG15U3ViSWQgPSBCeXRlU3RyaW5nLmNv\ncHlGcm9tVXRmOChTdWJzY3JpcHRpb25TdGF0ZVV0aWxzLkhVQl9TVUJTQ1JJ\nQkVSX1BSRUZJWCArIGNmZy5nZXRNeVJlZ2lvbigpKTsKICAgICAgICBxdWV1\nZSA9IG5ldyBUb3BpY09wUXVldWVyKHNjaGVkdWxlcik7CiAgICAgICAgZm9y\nIChmaW5hbCBTdHJpbmcgaHViIDogY2ZnLmdldFJlZ2lvbnMoKSkgewogICAg\nICAgICAgICBjbGllbnRzLmFkZChodWJDbGllbnRGYWN0b3J5LmNyZWF0ZShu\nZXcgSGVkd2lnU29ja2V0QWRkcmVzcyhodWIpKSk7CiAgICAgICAgfQogICAg\nfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgb25GaXJzdExvY2Fs\nU3Vic2NyaWJlKGZpbmFsIEJ5dGVTdHJpbmcgdG9waWMsIGZpbmFsIGJvb2xl\nYW4gc3luY2hyb25vdXMsIGZpbmFsIENhbGxiYWNrPFZvaWQ+IGNiKSB7CiAg\nICAgICAgLy8gV2hlbmV2ZXIgd2UgYWNxdWlyZSBhIHRvcGljIGR1ZSB0byBh\nIChsb2NhbCkgc3Vic2NyaWJlLCBzdWJzY3JpYmUgb24KICAgICAgICAvLyBp\ndCB0byBhbGwgdGhlIG90aGVyIHJlZ2lvbnMgKGN1cnJlbnRseSB1c2luZyBz\naW1wbGUgYWxsLXRvLWFsbAogICAgICAgIC8vIHRvcG9sb2d5KS4KICAgICAg\nICBxdWV1ZS5wdXNoQW5kTWF5YmVSdW4odG9waWMsIHF1ZXVlLm5ldyBBc3lu\nY2hyb25vdXNPcDxWb2lkPih0b3BpYywgY2IsIG51bGwpIHsKICAgICAgICAg\nICAgQE92ZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsK\nICAgICAgICAgICAgICAgIENhbGxiYWNrPFZvaWQ+IHBvc3RDYiA9IHN5bmNo\ncm9ub3VzID8gY2IgOiBDYWxsYmFja1V0aWxzLmxvZ2dlcihMT0dHRVIsIAog\nICAgICAgICAgICAgICAgICAgICAgICAiYWxsIGNyb3NzLXJlZ2lvbiBzdWJz\nY3JpcHRpb25zIHN1Y2NlZWRlZCIsIAogICAgICAgICAgICAgICAgICAgICAg\nICAiYXQgbGVhc3Qgb25lIGNyb3NzLXJlZ2lvbiBzdWJzY3JpcHRpb24gZmFp\nbGVkIik7CiAgICAgICAgICAgICAgICBmaW5hbCBDYWxsYmFjazxWb2lkPiBt\nY2IgPSBDYWxsYmFja1V0aWxzLm11bHRpQ2FsbGJhY2soY2xpZW50cy5zaXpl\nKCksIHBvc3RDYiwgY3R4KTsKICAgICAgICAgICAgICAgIGZvciAoZmluYWwg\nSGVkd2lnSHViQ2xpZW50IGNsaWVudCA6IGNsaWVudHMpIHsKICAgICAgICAg\nICAgICAgICAgICBmaW5hbCBIZWR3aWdTdWJzY3JpYmVyIHN1YiA9IGNsaWVu\ndC5nZXRTdWJzY3JpYmVyKCk7CiAgICAgICAgICAgICAgICAgICAgc3ViLmFz\neW5jU3Vic2NyaWJlKHRvcGljLCBteVN1YklkLCBDcmVhdGVPckF0dGFjaC5D\nUkVBVEVfT1JfQVRUQUNILCBuZXcgQ2FsbGJhY2s8Vm9pZD4oKSB7CiAgICAg\nICAgICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAg\nICAgICAgICBwdWJsaWMgdm9pZCBvcGVyYXRpb25GaW5pc2hlZChPYmplY3Qg\nY3R4LCBWb2lkIHJlc3VsdE9mT3BlcmF0aW9uKSB7CiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICBpZiAoTE9HR0VSLmlzRGVidWdFbmFibGVkKCkpCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTE9HR0VSLmRlYnVnKCJj\ncm9zcy1yZWdpb24gc3Vic2NyaXB0aW9uIGRvbmUgZm9yIHRvcGljICIgKyB0\nb3BpYy50b1N0cmluZ1V0ZjgoKSk7CiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1\nYi5zdGFydERlbGl2ZXJ5KHRvcGljLCBteVN1YklkLCBuZXcgTWVzc2FnZUhh\nbmRsZXIoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIEBPdmVycmlkZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICBwdWJsaWMgdm9pZCBkZWxpdmVyKGZpbmFsIEJ5dGVTdHJpbmcgdG9waWMs\nIEJ5dGVTdHJpbmcgc3Vic2NyaWJlcklkLCBNZXNzYWdlIG1zZywKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWwgQ2FsbGJhY2s8\nVm9pZD4gY2FsbGJhY2ssIGZpbmFsIE9iamVjdCBjb250ZXh0KSB7CiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIG1l\nc3NhZ2VzIGFyZSBmaXJzdCBwdWJsaXNoZWQKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIC8vIGxvY2FsbHksIHRoZSBQdWJsaXNo\nSGFuZGxlciBzZXRzIHRoZQogICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgLy8gc291cmNlIHJlZ2lvbiBpbiB0aGUgTWVzc2FnZS4K\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICht\nc2cuaGFzU3JjUmVnaW9uKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICBNZXNzYWdlLm5ld0J1aWxkZXIobXNnKS5z\nZXRNc2dJZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgTWVzc2FnZVNlcUlkLm5ld0J1aWxkZXIobXNnLmdldE1z\nZ0lkKCkpLmFkZFJlbW90ZUNvbXBvbmVudHMoCiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWdpb25TcGVj\naWZpY1NlcUlkLm5ld0J1aWxkZXIoKS5zZXRSZWdpb24oCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nbXNnLmdldFNyY1JlZ2lvbigpKS5zZXRTZXFJZCgKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtc2cu\nZ2V0TXNnSWQoKS5nZXRMb2NhbENvbXBvbmVudCgpKSkpOwogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgcG0ucGVyc2lzdE1lc3NhZ2Uo\nbmV3IFBlcnNpc3RSZXF1ZXN0KHRvcGljLCBtc2csIG5ldyBDYWxsYmFjazxM\nb25nPigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBvcGVyYXRpb25GaW5pc2hl\nZChPYmplY3QgY3R4LCBMb25nIHJlc3VsdE9mT3BlcmF0aW9uKSB7CiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlm\nIChMT0dHRVIuaXNEZWJ1Z0VuYWJsZWQoKSkKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExPR0dFUi5kZWJ1\nZygiY3Jvc3MtcmVnaW9uIHJlY3YtZndkIHN1Y2NlZWRlZCBmb3IgdG9waWMg\nIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICsgdG9waWMudG9TdHJpbmdVdGY4KCkp\nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICBjYWxsYmFjay5vcGVyYXRpb25GaW5pc2hlZChjb250ZXh0LCBudWxs\nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9wZXJhdGlvbkZhaWxlZChPYmpl\nY3QgY3R4LCBQdWJTdWJFeGNlcHRpb24gZXhjZXB0aW9uKSB7CiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChM\nT0dHRVIuaXNEZWJ1Z0VuYWJsZWQoKSkKICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExPR0dFUi5lcnJvcigi\nY3Jvc3MtcmVnaW9uIHJlY3YtZndkIGZhaWxlZCBmb3IgdG9waWMgIgogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICsgdG9waWMudG9TdHJpbmdVdGY4KCksIGV4Y2Vw\ndGlvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgIGNhbGxiYWNrLm9wZXJhdGlvbkZhaWxlZChjb250ZXh0LCBl\neGNlcHRpb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIH0sIG51bGwpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0p\nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChMT0dHRVIu\naXNEZWJ1Z0VuYWJsZWQoKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgTE9HR0VSLmRlYnVnKCJjcm9zcy1yZWdpb24gc3RhcnQtZGVs\naXZlcnkgc3VjY2VlZGVkIGZvciB0b3BpYyAiCiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIHRvcGljLnRvU3Ry\naW5nVXRmOCgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBt\nY2Iub3BlcmF0aW9uRmluaXNoZWQoY3R4LCBudWxsKTsKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIH0gY2F0Y2ggKFB1YlN1YkV4Y2VwdGlvbiBleCkg\newogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChMT0dHRVIu\naXNEZWJ1Z0VuYWJsZWQoKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgTE9HR0VSLmVycm9yKAogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgImNyb3NzLXJlZ2lvbiBzdGFydC1kZWxpdmVy\neSBmYWlsZWQgZm9yIHRvcGljICIgKyB0b3BpYy50b1N0cmluZ1V0ZjgoKSwg\nZXgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1jYi5vcGVy\nYXRpb25GYWlsZWQoY3R4LCBleCk7CiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAg\nICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgICAgICAg\nICBwdWJsaWMgdm9pZCBvcGVyYXRpb25GYWlsZWQoT2JqZWN0IGN0eCwgUHVi\nU3ViRXhjZXB0aW9uIGV4Y2VwdGlvbikgewogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgaWYgKExPR0dFUi5pc0RlYnVnRW5hYmxlZCgpKQogICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgIExPR0dFUi5lcnJvcigiY3Jvc3Mt\ncmVnaW9uIHN1YnNjcmliZSBmYWlsZWQgZm9yIHRvcGljICIgKyB0b3BpYy50\nb1N0cmluZ1V0ZjgoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgZXhjZXB0aW9uKTsKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgIG1jYi5vcGVyYXRpb25GYWlsZWQoY3R4LCBleGNlcHRpb24p\nOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAg\nICAgfSwgbnVsbCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAg\nICBpZiAoIXN5bmNocm9ub3VzKQogICAgICAgICAgICAgICAgICAgIGNiLm9w\nZXJhdGlvbkZpbmlzaGVkKG51bGwsIG51bGwpOwogICAgICAgICAgICB9CiAg\nICAgICAgfSk7CgogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZv\naWQgb25MYXN0TG9jYWxVbnN1YnNjcmliZShmaW5hbCBCeXRlU3RyaW5nIHRv\ncGljKSB7CiAgICAgICAgLy8gVE9ETyBtYXkgd2FudCB0byBlYXNlIHVwIG9u\nIHRoZSBlYWdlciB1bnN1YnNjcmliZTsgdGhpcyBpcyBkcm9wcGluZwogICAg\nICAgIC8vIGNyb3NzLXJlZ2lvbiBzdWJzY3JpcHRpb25zIEFTQVAKICAgICAg\nICBxdWV1ZS5wdXNoQW5kTWF5YmVSdW4odG9waWMsIHF1ZXVlLm5ldyBBc3lu\nY2hyb25vdXNPcDxWb2lkPih0b3BpYywgbmV3IENhbGxiYWNrPFZvaWQ+KCkg\newoKICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyB2\nb2lkIG9wZXJhdGlvbkZpbmlzaGVkKE9iamVjdCBjdHgsIFZvaWQgcmVzdWx0\nKSB7CiAgICAgICAgICAgICAgICBpZiAoTE9HR0VSLmlzRGVidWdFbmFibGVk\nKCkpCiAgICAgICAgICAgICAgICAgICAgTE9HR0VSLmRlYnVnKCJjcm9zcy1y\nZWdpb24gdW5zdWJzY3JpYmVzIHN1Y2NlZWRlZCBmb3IgdG9waWMgIiArIHRv\ncGljLnRvU3RyaW5nVXRmOCgpKTsKICAgICAgICAgICAgfQoKICAgICAgICAg\nICAgQE92ZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9wZXJhdGlv\nbkZhaWxlZChPYmplY3QgY3R4LCBQdWJTdWJFeGNlcHRpb24gZXhjZXB0aW9u\nKSB7CiAgICAgICAgICAgICAgICBpZiAoTE9HR0VSLmlzRGVidWdFbmFibGVk\nKCkpCiAgICAgICAgICAgICAgICAgICAgTE9HR0VSLmVycm9yKCJjcm9zcy1y\nZWdpb24gdW5zdWJzY3JpYmVzIGZhaWxlZCBmb3IgdG9waWMgIiArIHRvcGlj\nLnRvU3RyaW5nVXRmOCgpLCBleGNlcHRpb24pOwogICAgICAgICAgICB9Cgog\nICAgICAgIH0sIG51bGwpIHsKICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAg\nICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsKICAgICAgICAgICAgICAgIENh\nbGxiYWNrPFZvaWQ+IG1jYiA9IENhbGxiYWNrVXRpbHMubXVsdGlDYWxsYmFj\nayhjbGllbnRzLnNpemUoKSwgY2IsIGN0eCk7CiAgICAgICAgICAgICAgICBm\nb3IgKGZpbmFsIEhlZHdpZ0h1YkNsaWVudCBjbGllbnQgOiBjbGllbnRzKSB7\nCiAgICAgICAgICAgICAgICAgICAgY2xpZW50LmdldFN1YnNjcmliZXIoKS5h\nc3luY1Vuc3Vic2NyaWJlKHRvcGljLCBteVN1YklkLCBtY2IsIG51bGwpOwog\nICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAg\nICB9CgogICAgLy8gTWV0aG9kIHRvIHNodXRkb3duIGFuZCBzdG9wIGFsbCBv\nZiB0aGUgY3Jvc3MtcmVnaW9uIEhlZHdpZyBjbGllbnRzLgogICAgcHVibGlj\nIHZvaWQgc3RvcCgpIHsKICAgICAgICBmb3IgKEhlZHdpZ0h1YkNsaWVudCBj\nbGllbnQgOiBjbGllbnRzKSB7CiAgICAgICAgICAgIGNsaWVudC5jbG9zZSgp\nOwogICAgICAgIH0KICAgIH0KCn0K\n","encoding":"base64"}

