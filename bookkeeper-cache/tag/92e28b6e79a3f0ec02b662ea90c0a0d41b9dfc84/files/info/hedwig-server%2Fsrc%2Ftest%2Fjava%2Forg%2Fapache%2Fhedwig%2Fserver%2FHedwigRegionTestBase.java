{"sha":"0d8677b8fdadc7073937693faa4897d54a097d47","node_id":"MDQ6QmxvYjE1NzU5NTY6MGQ4Njc3YjhmZGFkYzcwNzM5Mzc2OTNmYWE0ODk3ZDU0YTA5N2Q0Nw==","size":9046,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/0d8677b8fdadc7073937693faa4897d54a097d47","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXI7CgppbXBvcnQgamF2YS51\ndGlsLkhhc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuTGlua2VkTGlzdDsKaW1w\nb3J0IGphdmEudXRpbC5MaXN0OwppbXBvcnQgamF2YS51dGlsLk1hcDsKCmlt\ncG9ydCBqdW5pdC5mcmFtZXdvcmsuVGVzdENhc2U7CgppbXBvcnQgb3JnLnNs\nZjRqLkxvZ2dlcjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJGYWN0b3J5Owpp\nbXBvcnQgb3JnLmp1bml0LkFmdGVyOwppbXBvcnQgb3JnLmp1bml0LkJlZm9y\nZTsKCmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQuY29uZi5DbGll\nbnRDb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuY2xp\nZW50LkhlZHdpZ0NsaWVudDsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnNl\ncnZlci5jb21tb24uU2VydmVyQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5h\ncGFjaGUuaGVkd2lnLnNlcnZlci5uZXR0eS5QdWJTdWJTZXJ2ZXI7CmltcG9y\ndCBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIucGVyc2lzdGVuY2UuQm9va0tl\nZXBlclRlc3RCYXNlOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcudXRpbC5I\nZWR3aWdTb2NrZXRBZGRyZXNzOwoKLyoqCiAqIFRoaXMgaXMgYSBiYXNlIGNs\nYXNzIGZvciBhbnkgdGVzdHMgdGhhdCBuZWVkIGEgSGVkd2lnIFJlZ2lvbihz\nKSBzZXR1cCB3aXRoIGEKICogbnVtYmVyIG9mIEhlZHdpZyBodWJzIHBlciBy\nZWdpb24sIGFuIGFzc29jaWF0ZWQgSGVkd2lnQ2xpZW50IHBlciByZWdpb24g\nYW5kCiAqIHRoZSByZXF1aXJlZCBCb29rS2VlcGVyIGFuZCBab29LZWVwZXIg\naW5zdGFuY2VzLgogKgogKi8KcHVibGljIGFic3RyYWN0IGNsYXNzIEhlZHdp\nZ1JlZ2lvblRlc3RCYXNlIGV4dGVuZHMgVGVzdENhc2UgewoKICAgIHByb3Rl\nY3RlZCBzdGF0aWMgTG9nZ2VyIGxvZ2dlciA9IExvZ2dlckZhY3RvcnkuZ2V0\nTG9nZ2VyKEhlZHdpZ1JlZ2lvblRlc3RCYXNlLmNsYXNzKTsKCiAgICAvLyBC\nb29rS2VlcGVyIHZhcmlhYmxlcwogICAgLy8gRGVmYXVsdCBudW1iZXIgb2Yg\nYm9va2llIHNlcnZlcnMgdG8gc2V0dXAuIEV4dGVuZGluZyBjbGFzc2VzCiAg\nICAvLyBjYW4gb3ZlcnJpZGUgdGhpcy4gV2Ugc2hvdWxkIGJlIGFibGUgdG8g\ncmV1c2UgdGhlIHNhbWUgQm9va0tlZXBlcgogICAgLy8gZW5zZW1ibGUgYW1v\nbmcgYWxsIG9mIHRoZSByZWdpb25zLCBhdCBsZWFzdCBmb3IgdW5pdCB0ZXN0\naW5nIHB1cnBvc2VzLgogICAgcHJvdGVjdGVkIGludCBudW1Cb29raWVzID0g\nMzsKICAgIHByb3RlY3RlZCBCb29rS2VlcGVyVGVzdEJhc2UgYmt0YjsKCiAg\nICAvLyBIZWR3aWcgUmVnaW9uIHZhcmlhYmxlcwogICAgLy8gRGVmYXVsdCBu\ndW1iZXIgb2YgSGVkd2lnIFJlZ2lvbnMgdG8gc2V0dXAuIEV4dGVuZGluZyBj\nbGFzc2VzIGNhbgogICAgLy8gb3ZlcnJpZGUgdGhpcy4KICAgIHByb3RlY3Rl\nZCBpbnQgbnVtUmVnaW9ucyA9IDI7CiAgICBwcm90ZWN0ZWQgaW50IG51bVNl\ncnZlcnNQZXJSZWdpb24gPSAxOwogICAgcHJvdGVjdGVkIGludCBpbml0aWFs\nU2VydmVyUG9ydCA9IDQwODA7CiAgICBwcm90ZWN0ZWQgaW50IGluaXRpYWxT\nU0xTZXJ2ZXJQb3J0ID0gOTg3NjsKICAgIC8vIE1hcCB3aXRoIGtleXMgYmVp\nbmcgUmVnaW9uIG5hbWVzIGFuZCB2YWx1ZXMgYmVpbmcgdGhlIGxpc3Qgb2Yg\nSGVkd2lnCiAgICAvLyBIdWJzIChQdWJTdWJTZXJ2ZXJzKSBmb3IgdGhhdCBw\nYXJ0aWN1bGFyIHJlZ2lvbi4KICAgIHByb3RlY3RlZCBNYXA8U3RyaW5nLCBM\naXN0PFB1YlN1YlNlcnZlcj4+IHJlZ2lvblNlcnZlcnNNYXA7CiAgICAvLyBN\nYXAgd2l0aCBrZXlzIGJlaW5nIFJlZ2lvbiBuYW1lcyBhbmQgdmFsdWVzIGJl\naW5nIHRoZSBIZWR3aWcgQ2xpZW50CiAgICAvLyBpbnN0YW5jZS4KICAgIHBy\nb3RlY3RlZCBNYXA8U3RyaW5nLCBIZWR3aWdDbGllbnQ+IHJlZ2lvbkNsaWVu\ndHNNYXA7CgogICAgLy8gU3RyaW5nIGNvbnN0YW50IHVzZWQgYXMgdGhlIHBy\nZWZpeCBmb3IgdGhlIHJlZ2lvbiBuYW1lcy4KICAgIHByb3RlY3RlZCBzdGF0\naWMgZmluYWwgU3RyaW5nIFJFR0lPTl9QUkVGSVggPSAicmVnaW9uIjsKCiAg\nICAvLyBEZWZhdWx0IGNoaWxkIGNsYXNzIG9mIHRoZSBTZXJ2ZXJDb25maWd1\ncmF0aW9uIHRvIGJlIHVzZWQgaGVyZS4KICAgIC8vIEV4dGVuZGluZyBjbGFz\nc2VzIGNhbiBkZWZpbmUgdGhlaXIgb3duIChwb3NzaWJseSBleHRlbmRpbmcg\nZnJvbSB0aGlzKSBhbmQKICAgIC8vIG92ZXJyaWRlIHRoZSBnZXRTZXJ2ZXJD\nb25maWd1cmF0aW9uIG1ldGhvZCBiZWxvdyB0byByZXR1cm4gdGhlaXIgb3du\nCiAgICAvLyBjb25maWd1cmF0aW9uLgogICAgcHJvdGVjdGVkIGNsYXNzIFJl\nZ2lvblNlcnZlckNvbmZpZ3VyYXRpb24gZXh0ZW5kcyBTZXJ2ZXJDb25maWd1\ncmF0aW9uIHsKICAgICAgICBwcml2YXRlIGZpbmFsIGludCBzZXJ2ZXJQb3J0\nLCBzc2xTZXJ2ZXJQb3J0OwogICAgICAgIHByaXZhdGUgZmluYWwgU3RyaW5n\nIHJlZ2lvbk5hbWU7CgogICAgICAgIHB1YmxpYyBSZWdpb25TZXJ2ZXJDb25m\naWd1cmF0aW9uKGludCBzZXJ2ZXJQb3J0LCBpbnQgc3NsU2VydmVyUG9ydCwg\nU3RyaW5nIHJlZ2lvbk5hbWUpIHsKICAgICAgICAgICAgdGhpcy5zZXJ2ZXJQ\nb3J0ID0gc2VydmVyUG9ydDsKICAgICAgICAgICAgdGhpcy5zc2xTZXJ2ZXJQ\nb3J0ID0gc3NsU2VydmVyUG9ydDsKICAgICAgICAgICAgdGhpcy5yZWdpb25O\nYW1lID0gcmVnaW9uTmFtZTsKICAgICAgICAgICAgc2V0UmVnaW9uTGlzdCgp\nOwogICAgICAgIH0KCiAgICAgICAgcHJvdGVjdGVkIHZvaWQgc2V0UmVnaW9u\nTGlzdCgpIHsKICAgICAgICAgICAgTGlzdDxTdHJpbmc+IG15UmVnaW9uTGlz\ndCA9IG5ldyBMaW5rZWRMaXN0PFN0cmluZz4oKTsKICAgICAgICAgICAgZm9y\nIChpbnQgaSA9IDA7IGkgPCBudW1SZWdpb25zOyBpKyspIHsKICAgICAgICAg\nICAgICAgIGludCBjdXJEZWZhdWx0U2VydmVyUG9ydCA9IGluaXRpYWxTZXJ2\nZXJQb3J0ICsgKGkgKiBudW1TZXJ2ZXJzUGVyUmVnaW9uKTsKICAgICAgICAg\nICAgICAgIGludCBjdXJEZWZhdWx0U1NMU2VydmVyUG9ydCA9IGluaXRpYWxT\nU0xTZXJ2ZXJQb3J0ICsgKGkgKiBudW1TZXJ2ZXJzUGVyUmVnaW9uKTsKICAg\nICAgICAgICAgICAgIC8vIEFkZCB0aGlzIHJlZ2lvbiBkZWZhdWx0IHNlcnZl\nciBwb3J0IGlmIGl0IGlzIGZvciBhIHJlZ2lvbgogICAgICAgICAgICAgICAg\nLy8gb3RoZXIgdGhhbiBpdHMgb3duLgogICAgICAgICAgICAgICAgaWYgKGN1\nckRlZmF1bHRTZXJ2ZXJQb3J0ID4gc2VydmVyUG9ydAogICAgICAgICAgICAg\nICAgICAgICAgICB8fCBNYXRoLmFicyhzZXJ2ZXJQb3J0IC0gY3VyRGVmYXVs\ndFNlcnZlclBvcnQpID49IG51bVNlcnZlcnNQZXJSZWdpb24pCiAgICAgICAg\nICAgICAgICAgICAgbXlSZWdpb25MaXN0LmFkZCgibG9jYWxob3N0OiIgKyBj\ndXJEZWZhdWx0U2VydmVyUG9ydCArICI6IiArIGN1ckRlZmF1bHRTU0xTZXJ2\nZXJQb3J0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZWdpb25MaXN0\nID0gbXlSZWdpb25MaXN0OwogICAgICAgIH0KCiAgICAgICAgQE92ZXJyaWRl\nCiAgICAgICAgcHVibGljIGludCBnZXRTZXJ2ZXJQb3J0KCkgewogICAgICAg\nICAgICByZXR1cm4gc2VydmVyUG9ydDsKICAgICAgICB9CgogICAgICAgIEBP\ndmVycmlkZQogICAgICAgIHB1YmxpYyBpbnQgZ2V0U1NMU2VydmVyUG9ydCgp\nIHsKICAgICAgICAgICAgcmV0dXJuIHNzbFNlcnZlclBvcnQ7CiAgICAgICAg\nfQoKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgU3RyaW5nIGdl\ndFprSG9zdCgpIHsKICAgICAgICAgICAgcmV0dXJuIGJrdGIuZ2V0WmtIb3N0\nUG9ydCgpOwogICAgICAgIH0KCiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAg\ncHVibGljIFN0cmluZyBnZXRNeVJlZ2lvbigpIHsKICAgICAgICAgICAgcmV0\ndXJuIHJlZ2lvbk5hbWU7CiAgICAgICAgfQoKICAgICAgICBAT3ZlcnJpZGUK\nICAgICAgICBwdWJsaWMgYm9vbGVhbiBpc1NTTEVuYWJsZWQoKSB7CiAgICAg\nICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgQE92ZXJy\naWRlCiAgICAgICAgcHVibGljIGJvb2xlYW4gaXNJbnRlclJlZ2lvblNTTEVu\nYWJsZWQoKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0K\nCiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHVibGljIFN0cmluZyBnZXRD\nZXJ0TmFtZSgpIHsKICAgICAgICAgICAgcmV0dXJuICIvc2VydmVyLnAxMiI7\nCiAgICAgICAgfQoKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMg\nU3RyaW5nIGdldFBhc3N3b3JkKCkgewogICAgICAgICAgICByZXR1cm4gImVV\neVN2cDJwaE0yV2siOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBNZXRob2Qg\ndG8gZ2V0IGEgU2VydmVyQ29uZmlndXJhdGlvbiBmb3IgdGhlIFB1YlN1YlNl\ncnZlcnMgY3JlYXRlZCB1c2luZwogICAgLy8gdGhlIHNwZWNpZmllZCBwb3J0\ncyBhbmQgcmVnaW9uIG5hbWUuIEV4dGVuZGluZyBjaGlsZCBjbGFzc2VzIGNh\nbiBvdmVycmlkZQogICAgLy8gdGhpcy4gVGhpcyBkZWZhdWx0IGltcGxlbWVu\ndGF0aW9uIHdpbGwgcmV0dXJuIHRoZQogICAgLy8gUmVnaW9uU2VydmVyQ29u\nZmlndXJhdGlvbiBvYmplY3QgZGVmaW5lZCBhYm92ZS4KICAgIHByb3RlY3Rl\nZCBTZXJ2ZXJDb25maWd1cmF0aW9uIGdldFNlcnZlckNvbmZpZ3VyYXRpb24o\naW50IHNlcnZlclBvcnQsIGludCBzc2xTZXJ2ZXJQb3J0LCBTdHJpbmcgcmVn\naW9uTmFtZSkgewogICAgICAgIHJldHVybiBuZXcgUmVnaW9uU2VydmVyQ29u\nZmlndXJhdGlvbihzZXJ2ZXJQb3J0LCBzc2xTZXJ2ZXJQb3J0LCByZWdpb25O\nYW1lKTsKICAgIH0KCiAgICAvLyBEZWZhdWx0IENsaWVudENvbmZpZ3VyYXRp\nb24gdG8gdXNlLiBUaGlzIGp1c3QgcG9pbnRzIHRvIHRoZSBmaXJzdAogICAg\nLy8gSGVkd2lnIGh1YiBzZXJ2ZXIgaW4gZWFjaCByZWdpb24gYXMgdGhlICJk\nZWZhdWx0IHNlcnZlciBob3N0IiB0byBjb25uZWN0CiAgICAvLyB0by4KICAg\nIHByb3RlY3RlZCBjbGFzcyBSZWdpb25DbGllbnRDb25maWd1cmF0aW9uIGV4\ndGVuZHMgQ2xpZW50Q29uZmlndXJhdGlvbiB7CiAgICAgICAgcHVibGljIFJl\nZ2lvbkNsaWVudENvbmZpZ3VyYXRpb24oaW50IHNlcnZlclBvcnQsIGludCBz\nc2xTZXJ2ZXJQb3J0KSB7CiAgICAgICAgICAgIG15RGVmYXVsdFNlcnZlckFk\nZHJlc3MgPSBuZXcgSGVkd2lnU29ja2V0QWRkcmVzcygibG9jYWxob3N0OiIg\nKyBzZXJ2ZXJQb3J0ICsgIjoiICsgc3NsU2VydmVyUG9ydCk7CiAgICAgICAg\nfQogICAgICAgIC8vIEJlbG93IHlvdSBjYW4gb3ZlcnJpZGUgYW55IG9mIHRo\nZSBkZWZhdWx0IENsaWVudENvbmZpZ3VyYXRpb24KICAgICAgICAvLyBwYXJh\nbWV0ZXJzIGlmIG5lZWRlZC4KICAgIH0KCiAgICAvLyBNZXRob2QgdG8gZ2V0\nIGEgQ2xpZW50Q29uZmlndXJhdGlvbiBmb3IgdGhlIEhlZHdpZ0NsaWVudHMg\nY3JlYXRlZC4KICAgIC8vIElucHV0cyBhcmUgdGhlIGRlZmF1bHQgSGVkd2ln\nIGh1YiBzZXJ2ZXIncyBwb3J0cyB0byBwb2ludCB0by4KICAgIHByb3RlY3Rl\nZCBDbGllbnRDb25maWd1cmF0aW9uIGdldENsaWVudENvbmZpZ3VyYXRpb24o\naW50IHNlcnZlclBvcnQsIGludCBzc2xTZXJ2ZXJQb3J0KSB7CiAgICAgICAg\ncmV0dXJuIG5ldyBSZWdpb25DbGllbnRDb25maWd1cmF0aW9uKHNlcnZlclBv\ncnQsIHNzbFNlcnZlclBvcnQpOwogICAgfQoKICAgIEBPdmVycmlkZQogICAg\nQEJlZm9yZQogICAgcHVibGljIHZvaWQgc2V0VXAoKSB0aHJvd3MgRXhjZXB0\naW9uIHsKICAgICAgICBsb2dnZXIuaW5mbygiU1RBUlRJTkcgIiArIGdldE5h\nbWUoKSk7CiAgICAgICAgYmt0YiA9IG5ldyBCb29rS2VlcGVyVGVzdEJhc2Uo\nbnVtQm9va2llcyk7CiAgICAgICAgYmt0Yi5zZXRVcCgpOwoKICAgICAgICAv\nLyBDcmVhdGUgdGhlIEhlZHdpZyBQdWJTdWJTZXJ2ZXIgSHVicyBmb3IgYWxs\nIG9mIHRoZSByZWdpb25zCiAgICAgICAgcmVnaW9uU2VydmVyc01hcCA9IG5l\ndyBIYXNoTWFwPFN0cmluZywgTGlzdDxQdWJTdWJTZXJ2ZXI+PihudW1SZWdp\nb25zLCAxLjBmKTsKICAgICAgICByZWdpb25DbGllbnRzTWFwID0gbmV3IEhh\nc2hNYXA8U3RyaW5nLCBIZWR3aWdDbGllbnQ+KG51bVJlZ2lvbnMsIDEuMGYp\nOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbnVtUmVnaW9uczsgaSsr\nKSB7CiAgICAgICAgICAgIExpc3Q8UHViU3ViU2VydmVyPiBzZXJ2ZXJzTGlz\ndCA9IG5ldyBMaW5rZWRMaXN0PFB1YlN1YlNlcnZlcj4oKTsKICAgICAgICAg\nICAgLy8gRm9yIHRoZSBjdXJyZW50IHJlZ2lvbiwgY3JlYXRlIHRoZSBuZWNl\nc3NhcnkgYW1vdW50IG9mIGh1YgogICAgICAgICAgICAvLyBzZXJ2ZXJzLiBX\nZSB3aWxsIGJhc2ljYWxseSBpbmNyZW1lbnQgdGhyb3VnaCB0aGUgcG9ydCBu\ndW1iZXJzCiAgICAgICAgICAgIC8vIHN0YXJ0aW5nIGZyb20gdGhlIGluaXRp\nYWwgb25lcyBkZWZpbmVkLgogICAgICAgICAgICBmb3IgKGludCBqID0gMDsg\naiA8IG51bVNlcnZlcnNQZXJSZWdpb247IGorKykgewogICAgICAgICAgICAg\nICAgc2VydmVyc0xpc3QuYWRkKG5ldyBQdWJTdWJTZXJ2ZXIoZ2V0U2VydmVy\nQ29uZmlndXJhdGlvbihpbml0aWFsU2VydmVyUG9ydAogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAoaiArIGkg\nKiBudW1TZXJ2ZXJzUGVyUmVnaW9uKSwgaW5pdGlhbFNTTFNlcnZlclBvcnQg\nKyAoaiArIGkgKiBudW1TZXJ2ZXJzUGVyUmVnaW9uKSwKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJFR0lPTl9Q\nUkVGSVggKyBpKSkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIFN0\nb3JlIHRoaXMgbGlzdCBvZiBzZXJ2ZXJzIGNyZWF0ZWQgZm9yIHRoZSBjdXJy\nZW50IHJlZ2lvbgogICAgICAgICAgICByZWdpb25TZXJ2ZXJzTWFwLnB1dChS\nRUdJT05fUFJFRklYICsgaSwgc2VydmVyc0xpc3QpOwoKICAgICAgICAgICAg\nLy8gQ3JlYXRlIGEgSGVkd2lnIENsaWVudCB0aGF0IHBvaW50cyB0byB0aGUg\nZmlyc3QgSHViIHNlcnZlcgogICAgICAgICAgICAvLyBjcmVhdGVkIGluIHRo\nZSBsb29wIGFib3ZlIGZvciB0aGUgY3VycmVudCByZWdpb24uCiAgICAgICAg\nICAgIEhlZHdpZ0NsaWVudCByZWdpb25DbGllbnQgPSBuZXcgSGVkd2lnQ2xp\nZW50KGdldENsaWVudENvbmZpZ3VyYXRpb24oaW5pdGlhbFNlcnZlclBvcnQK\nICAgICAgICAgICAgICAgICAgICArIChpICogbnVtU2VydmVyc1BlclJlZ2lv\nbiksIGluaXRpYWxTU0xTZXJ2ZXJQb3J0ICsgKGkgKiBudW1TZXJ2ZXJzUGVy\nUmVnaW9uKSkpOwogICAgICAgICAgICByZWdpb25DbGllbnRzTWFwLnB1dChS\nRUdJT05fUFJFRklYICsgaSwgcmVnaW9uQ2xpZW50KTsKICAgICAgICB9CiAg\nICAgICAgbG9nZ2VyLmluZm8oIkhlZHdpZ1JlZ2lvbiB0ZXN0IHNldHVwIGZp\nbmlzaGVkIik7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBAQWZ0ZXIKICAg\nIHB1YmxpYyB2b2lkIHRlYXJEb3duKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAg\nICAgICAgbG9nZ2VyLmluZm8oInRlYXJEb3duIHN0YXJ0aW5nIik7CiAgICAg\nICAgLy8gU3RvcCBhbGwgb2YgdGhlIEhlZHdpZ0NsaWVudHMgZm9yIGFsbCBy\nZWdpb25zCiAgICAgICAgZm9yIChIZWR3aWdDbGllbnQgY2xpZW50IDogcmVn\naW9uQ2xpZW50c01hcC52YWx1ZXMoKSkgewogICAgICAgICAgICBjbGllbnQu\nY2xvc2UoKTsKICAgICAgICB9CiAgICAgICAgcmVnaW9uQ2xpZW50c01hcC5j\nbGVhcigpOwogICAgICAgIC8vIFNodXRkb3duIGFsbCBvZiB0aGUgUHViU3Vi\nU2VydmVycyBpbiBhbGwgcmVnaW9ucwogICAgICAgIGZvciAoTGlzdDxQdWJT\ndWJTZXJ2ZXI+IHNlcnZlcnNMaXN0IDogcmVnaW9uU2VydmVyc01hcC52YWx1\nZXMoKSkgewogICAgICAgICAgICBmb3IgKFB1YlN1YlNlcnZlciBzZXJ2ZXIg\nOiBzZXJ2ZXJzTGlzdCkgewogICAgICAgICAgICAgICAgc2VydmVyLnNodXRk\nb3duKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgbG9nZ2Vy\nLmluZm8oIkZpbmlzaGVkIHNodXR0aW5nIGRvd24gYWxsIG9mIHRoZSBodWIg\nc2VydmVycyEiKTsKICAgICAgICByZWdpb25TZXJ2ZXJzTWFwLmNsZWFyKCk7\nCiAgICAgICAgLy8gU2h1dGRvd24gdGhlIEJvb2tLZWVwZXIgYW5kIFpvb0tl\nZXBlciBzdHVmZgogICAgICAgIGJrdGIudGVhckRvd24oKTsKICAgICAgICBs\nb2dnZXIuaW5mbygiRklOSVNIRUQgIiArIGdldE5hbWUoKSk7CiAgICB9Cgp9\nCg==\n","encoding":"base64"}

