{"sha":"65e2bd231461e65b84beb03e97db7c8816b61d49","node_id":"MDQ6QmxvYjE1NzU5NTY6NjVlMmJkMjMxNDYxZTY1Yjg0YmViMDNlOTdkYjdjODgxNmI2MWQ0OQ==","size":4726,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/65e2bd231461e65b84beb03e97db7c8816b61d49","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXI7CgppbXBvcnQgamF2YS5p\nby5GaWxlOwppbXBvcnQgamF2YS5pby5GaWxlV3JpdGVyOwppbXBvcnQgamF2\nYS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEubmV0LkluZXRTb2NrZXRB\nZGRyZXNzOwppbXBvcnQgamF2YS5uZXQuTWFsZm9ybWVkVVJMRXhjZXB0aW9u\nOwoKaW1wb3J0IGp1bml0LmZyYW1ld29yay5Bc3NlcnQ7CgppbXBvcnQgb3Jn\nLmFwYWNoZS5jb21tb25zLmNvbmZpZ3VyYXRpb24uQ29uZmlndXJhdGlvbkV4\nY2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnNlcnZlci5jb21t\nb24uU2VydmVyQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVk\nd2lnLnNlcnZlci5uZXR0eS5QdWJTdWJTZXJ2ZXI7CmltcG9ydCBvcmcuc2xm\nNGouTG9nZ2VyOwppbXBvcnQgb3JnLnNsZjRqLkxvZ2dlckZhY3Rvcnk7Cmlt\ncG9ydCBvcmcuYXBhY2hlLnpvb2tlZXBlci5DcmVhdGVNb2RlOwppbXBvcnQg\nb3JnLmFwYWNoZS56b29rZWVwZXIuWm9vRGVmczsKaW1wb3J0IG9yZy5hcGFj\naGUuem9va2VlcGVyLlpvb0tlZXBlcjsKaW1wb3J0IG9yZy5hcGFjaGUuem9v\na2VlcGVyLnNlcnZlci5OSU9TZXJ2ZXJDbnhuRmFjdG9yeTsKaW1wb3J0IG9y\nZy5hcGFjaGUuem9va2VlcGVyLnNlcnZlci5ab29LZWVwZXJTZXJ2ZXI7Cmlt\ncG9ydCBvcmcuYXBhY2hlLnpvb2tlZXBlci50ZXN0LkNsaWVudEJhc2U7Cmlt\ncG9ydCBvcmcuanVuaXQuVGVzdDsKCnB1YmxpYyBjbGFzcyBUZXN0UHViU3Vi\nU2VydmVyU3RhcnR1cCB7CgogICAgcHJpdmF0ZSBzdGF0aWMgTG9nZ2VyIGxv\nZ2dlciA9IExvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKFRlc3RQdWJTdWJTZXJ2\nZXJTdGFydHVwLmNsYXNzKTsKCiAgICAvKioKICAgICAqIFN0YXJ0LXVwIHpv\nb2tlZXBlciArIHB1YnN1YnNlcnZlciByZWFkaW5nIGZyb20gYSBjb25maWcg\nVVJMLiBUaGVuIHN0b3AKICAgICAqIGFuZCBjbGVhbnVwLgogICAgICoKICAg\nICAqIExvb3Agb3ZlciB0aGF0LgogICAgICoKICAgICAqIElmIHRoZSBwdWJz\ndWIgc2VydmVyIGRvZXMgbm90IHdhaXQgZm9yIGl0cyB6b29rZWVwZXIgY2xp\nZW50IHRvIGJlCiAgICAgKiBjb25uZWN0ZWQsIHRoZSBwdWJzdWIgc2VydmVy\nIHdpbGwgZmFpbCBhdCBzdGFydHVwLgogICAgICoKICAgICAqLwogICAgQFRl\nc3QKICAgIHB1YmxpYyB2b2lkIHRlc3RQdWJTdWJTZXJ2ZXJJbnN0YW50aWF0\naW9uV2l0aENvbmZpZygpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIGZv\nciAoaW50IGkgPSAwOyBpIDwgMTA7IGkrKykgewogICAgICAgICAgICBsb2dn\nZXIuaW5mbygiaXRlcmF0aW9uICIgKyBpKTsKICAgICAgICAgICAgaW5zdGFu\ndGlhdGVBbmREZXN0cm95UHViU3ViU2VydmVyKCk7CiAgICAgICAgfQogICAg\nfQoKICAgIHByaXZhdGUgdm9pZCBpbnN0YW50aWF0ZUFuZERlc3Ryb3lQdWJT\ndWJTZXJ2ZXIoKSB0aHJvd3MgSU9FeGNlcHRpb24sIEludGVycnVwdGVkRXhj\nZXB0aW9uLCBDb25maWd1cmF0aW9uRXhjZXB0aW9uLAogICAgICAgIE1hbGZv\ncm1lZFVSTEV4Y2VwdGlvbiwgRXhjZXB0aW9uIHsKICAgICAgICBTdHJpbmcg\naGVkd2lnUGFyYW1zID0gImRlZmF1bHRfc2VydmVyX2hvc3Q9bG9jYWxob3N0\nOjQwODBcbiIgKyAiem9va2VlcGVyX2Nvbm5lY3Rpb25fc3RyaW5nPWxvY2Fs\naG9zdDoyMTgxXG4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsg\nInprX3RpbWVvdXQ9MjAwMFxuIjsKCiAgICAgICAgRmlsZSBoZWR3aWdDb25m\naWdGaWxlID0gbmV3IEZpbGUoU3lzdGVtLmdldFByb3BlcnR5KCJqYXZhLmlv\nLnRtcGRpciIpICsgIi9oZWR3aWcuY2ZnIik7CiAgICAgICAgd3JpdGVTdHJp\nbmdUb0ZpbGUoaGVkd2lnUGFyYW1zLCBoZWR3aWdDb25maWdGaWxlKTsKCiAg\nICAgICAgQ2xpZW50QmFzZS5zZXR1cFRlc3RFbnYoKTsKICAgICAgICBGaWxl\nIHprVG1wRGlyID0gRmlsZS5jcmVhdGVUZW1wRmlsZSgiem9va2VlcGVyIiwg\nInRlc3QiKTsKICAgICAgICB6a1RtcERpci5kZWxldGUoKTsKICAgICAgICB6\na1RtcERpci5ta2RpcigpOwoKICAgICAgICBab29LZWVwZXJTZXJ2ZXIgemtz\nID0gbmV3IFpvb0tlZXBlclNlcnZlcih6a1RtcERpciwgemtUbXBEaXIsIDIx\nODEpOwoKICAgICAgICBOSU9TZXJ2ZXJDbnhuRmFjdG9yeSBzZXJ2ZXJGYWN0\nb3J5ID0gbmV3IE5JT1NlcnZlckNueG5GYWN0b3J5KCk7CiAgICAgICAgc2Vy\ndmVyRmFjdG9yeS5jb25maWd1cmUobmV3IEluZXRTb2NrZXRBZGRyZXNzKDIx\nODEpLCAxMDApOwogICAgICAgIHNlcnZlckZhY3Rvcnkuc3RhcnR1cCh6a3Mp\nOwoKICAgICAgICBib29sZWFuIGIgPSBDbGllbnRCYXNlLndhaXRGb3JTZXJ2\nZXJVcCgiMTI3LjAuMC4xOjIxODEiLCA1MDAwKTsKICAgICAgICBTZXJ2ZXJD\nb25maWd1cmF0aW9uIHNlcnZlckNvbmYgPSBuZXcgU2VydmVyQ29uZmlndXJh\ndGlvbigpOwogICAgICAgIHNlcnZlckNvbmYubG9hZENvbmYoaGVkd2lnQ29u\nZmlnRmlsZS50b1VSSSgpLnRvVVJMKCkpOwoKICAgICAgICBsb2dnZXIuaW5m\nbygiWm9va2VlcGVyIHNlcnZlciB1cCBhbmQgcnVubmluZyEiKTsKCiAgICAg\nICAgWm9vS2VlcGVyIHprYyA9IG5ldyBab29LZWVwZXIoIjEyNy4wLjAuMSIs\nIDIxODEsIG51bGwpOwoKICAgICAgICAvLyBpbml0aWFsaXplIHRoZSB6ayBj\nbGllbnQgd2l0aCAoZmFrZSkgdmFsdWVzCiAgICAgICAgemtjLmNyZWF0ZSgi\nL2xlZGdlcnMiLCBuZXcgYnl0ZVswXSwgWm9vRGVmcy5JZHMuT1BFTl9BQ0xf\nVU5TQUZFLCBDcmVhdGVNb2RlLlBFUlNJU1RFTlQpOwogICAgICAgIHprYy5j\ncmVhdGUoIi9sZWRnZXJzL2F2YWlsYWJsZSIsIG5ldyBieXRlWzBdLCBab29E\nZWZzLklkcy5PUEVOX0FDTF9VTlNBRkUsIENyZWF0ZU1vZGUuUEVSU0lTVEVO\nVCk7CgogICAgICAgIHprYy5jbG9zZSgpOwogICAgICAgIFB1YlN1YlNlcnZl\nciBoZWR3aWdTZXJ2ZXIgPSBudWxsOwogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIGxvZ2dlci5pbmZvKCJzdGFydGluZyBoZWR3aWcgYnJva2VyISIpOwog\nICAgICAgICAgICBoZWR3aWdTZXJ2ZXIgPSBuZXcgUHViU3ViU2VydmVyKHNl\ncnZlckNvbmYpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAg\nICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7CiAgICAgICAgfQogICAg\nICAgIEFzc2VydC5hc3NlcnROb3ROdWxsKCJmYWlsZWQgdG8gaW5zdGFudGlh\ndGUgaGVkd2lnIHB1YiBzdWIgc2VydmVyIiwgaGVkd2lnU2VydmVyKTsKCiAg\nICAgICAgaGVkd2lnU2VydmVyLnNodXRkb3duKCk7CiAgICAgICAgc2VydmVy\nRmFjdG9yeS5zaHV0ZG93bigpOwoKICAgICAgICB6a3Muc2h1dGRvd24oKTsK\nCiAgICAgICAgemtUbXBEaXIuZGVsZXRlKCk7CgogICAgICAgIENsaWVudEJh\nc2Uud2FpdEZvclNlcnZlckRvd24oImxvY2FsaG9zdDoyMTgxIiwgMTAwMDAp\nOwoKICAgIH0KCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgd3JpdGVTdHJpbmdU\nb0ZpbGUoU3RyaW5nIHN0cmluZywgRmlsZSBmKSB0aHJvd3MgSU9FeGNlcHRp\nb24gewogICAgICAgIGlmIChmLmV4aXN0cygpKSB7CiAgICAgICAgICAgIGlm\nICghZi5kZWxldGUoKSkgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJ1\nbnRpbWVFeGNlcHRpb24oImNhbm5vdCBjcmVhdGUgZmlsZSAiICsgZi5nZXRB\nYnNvbHV0ZVBhdGgoKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAg\nICAgaWYgKCFmLmNyZWF0ZU5ld0ZpbGUoKSkgewogICAgICAgICAgICB0aHJv\ndyBuZXcgUnVudGltZUV4Y2VwdGlvbigiY2Fubm90IGNyZWF0ZSBuZXcgZmls\nZSAiICsgZi5nZXRBYnNvbHV0ZVBhdGgoKSk7CiAgICAgICAgfQoKICAgICAg\nICBGaWxlV3JpdGVyIGZ3ID0gbmV3IEZpbGVXcml0ZXIoZik7CiAgICAgICAg\nZncud3JpdGUoc3RyaW5nKTsKICAgICAgICBmdy5jbG9zZSgpOwogICAgfQp9\nCg==\n","encoding":"base64"}

