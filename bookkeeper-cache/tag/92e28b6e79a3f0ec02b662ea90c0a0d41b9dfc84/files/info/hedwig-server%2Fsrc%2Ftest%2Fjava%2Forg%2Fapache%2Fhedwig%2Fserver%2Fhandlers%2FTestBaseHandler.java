{"sha":"14a24beed4301439a5f3d8f88d87ff9aa6c87249","node_id":"MDQ6QmxvYjE1NzU5NTY6MTRhMjRiZWVkNDMwMTQzOWE1ZjNkOGY4OGQ4N2ZmOWFhNmM4NzI0OQ==","size":3881,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/14a24beed4301439a5f3d8f88d87ff9aa6c87249","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIuaGFuZGxlcnM7CgppbXBv\ncnQgamF2YS51dGlsLkxpc3Q7CmltcG9ydCBqdW5pdC5mcmFtZXdvcmsuVGVz\ndENhc2U7CgppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmNoYW5uZWwuQ2hhbm5l\nbDsKaW1wb3J0IG9yZy5qdW5pdC5CZWZvcmU7CmltcG9ydCBvcmcuanVuaXQu\nVGVzdDsKCmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5QdWJT\ndWJQcm90b2NvbC5QdWJTdWJSZXF1ZXN0OwppbXBvcnQgb3JnLmFwYWNoZS5o\nZWR3aWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2wuUHViU3ViUmVzcG9uc2U7\nCmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5QdWJTdWJQcm90\nb2NvbC5TdGF0dXNDb2RlOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuc2Vy\ndmVyLmNvbW1vbi5TZXJ2ZXJDb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFw\nYWNoZS5oZWR3aWcuc2VydmVyLm5ldHR5LldyaXRlUmVjb3JkaW5nQ2hhbm5l\nbDsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnNlcnZlci50b3BpY3MuU3R1\nYlRvcGljTWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnNlcnZl\nci50b3BpY3MuVG9waWNNYW5hZ2VyOwoKcHVibGljIGNsYXNzIFRlc3RCYXNl\nSGFuZGxlciBleHRlbmRzIFRlc3RDYXNlIHsKCiAgICBNeUJhc2VIYW5kbGVy\nIGhhbmRsZXI7CiAgICBTdHViVG9waWNNYW5hZ2VyIHRtOwogICAgUHViU3Vi\nUmVxdWVzdCByZXF1ZXN0ID0gUHViU3ViUmVxdWVzdC5nZXREZWZhdWx0SW5z\ndGFuY2UoKTsKICAgIFdyaXRlUmVjb3JkaW5nQ2hhbm5lbCBjaGFubmVsID0g\nbmV3IFdyaXRlUmVjb3JkaW5nQ2hhbm5lbCgpOwoKICAgIHByb3RlY3RlZCBj\nbGFzcyBNeUJhc2VIYW5kbGVyIGV4dGVuZHMgQmFzZUhhbmRsZXIgewoKICAg\nICAgICBwdWJsaWMgTXlCYXNlSGFuZGxlcihUb3BpY01hbmFnZXIgdG0sIFNl\ncnZlckNvbmZpZ3VyYXRpb24gY29uZikgewogICAgICAgICAgICBzdXBlcih0\nbSwgY29uZik7CiAgICAgICAgfQoKICAgICAgICBQdWJTdWJSZXF1ZXN0IHJl\ncXVlc3Q7CgogICAgICAgIHB1YmxpYyBQdWJTdWJSZXF1ZXN0IGdldFJlcXVl\nc3QoKSB7CiAgICAgICAgICAgIHJldHVybiByZXF1ZXN0OwogICAgICAgIH0K\nCiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHVibGljIHZvaWQgaGFuZGxl\nUmVxdWVzdEF0T3duZXIoUHViU3ViUmVxdWVzdCByZXF1ZXN0LCBDaGFubmVs\nIGNoYW5uZWwpIHsKICAgICAgICAgICAgdGhpcy5yZXF1ZXN0ID0gcmVxdWVz\ndDsKICAgICAgICB9CgogICAgfQoKICAgIEBPdmVycmlkZQogICAgQEJlZm9y\nZQogICAgcHVibGljIHZvaWQgc2V0VXAoKSB0aHJvd3MgRXhjZXB0aW9uIHsK\nICAgICAgICBTZXJ2ZXJDb25maWd1cmF0aW9uIGNvbmYgPSBuZXcgU2VydmVy\nQ29uZmlndXJhdGlvbigpOwogICAgICAgIHRtID0gbmV3IFN0dWJUb3BpY01h\nbmFnZXIoY29uZik7CiAgICAgICAgaGFuZGxlciA9IG5ldyBNeUJhc2VIYW5k\nbGVyKHRtLCBjb25mKTsKICAgICAgICByZXF1ZXN0ID0gUHViU3ViUmVxdWVz\ndC5nZXREZWZhdWx0SW5zdGFuY2UoKTsKICAgICAgICBjaGFubmVsID0gbmV3\nIFdyaXRlUmVjb3JkaW5nQ2hhbm5lbCgpOwogICAgfQoKICAgIHB1YmxpYyBQ\ndWJTdWJSZXNwb25zZSBnZXRQdWJTdWJSZXNwb25zZShXcml0ZVJlY29yZGlu\nZ0NoYW5uZWwgY2hhbm5lbCkgewogICAgICAgIExpc3Q8T2JqZWN0PiBtZXNz\nYWdlcyA9IGNoYW5uZWwuZ2V0TWVzc2FnZXNXcml0dGVuKCk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKG1lc3NhZ2VzLnNpemUoKSwgMSk7CgogICAgICAgIE9i\namVjdCBtZXNzYWdlID0gbWVzc2FnZXMuZ2V0KDApOwogICAgICAgIGFzc2Vy\ndEVxdWFscyhtZXNzYWdlLmdldENsYXNzKCksIFB1YlN1YlJlc3BvbnNlLmNs\nYXNzKTsKCiAgICAgICAgcmV0dXJuIChQdWJTdWJSZXNwb25zZSkgbWVzc2Fn\nZTsKICAgIH0KCiAgICBAVGVzdAogICAgcHVibGljIHZvaWQgdGVzdEhhbmRs\nZVJlcXVlc3RPblJlZGlyZWN0KCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAg\nICAgdG0uc2V0U2hvdWxkT3duRXZlcnlOZXdUb3BpYyhmYWxzZSk7CiAgICAg\nICAgaGFuZGxlci5oYW5kbGVSZXF1ZXN0KHJlcXVlc3QsIGNoYW5uZWwpOwoK\nICAgICAgICBQdWJTdWJSZXNwb25zZSByZXNwb25zZSA9IGdldFB1YlN1YlJl\nc3BvbnNlKGNoYW5uZWwpOwogICAgICAgIGFzc2VydEVxdWFscyhyZXNwb25z\nZS5nZXRTdGF0dXNDb2RlKCksIFN0YXR1c0NvZGUuTk9UX1JFU1BPTlNJQkxF\nX0ZPUl9UT1BJQyk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKHJlcXVlc3QuZ2V0\nVHhuSWQoKSwgcmVzcG9uc2UuZ2V0VHhuSWQoKSk7CiAgICAgICAgYXNzZXJ0\nTnVsbChoYW5kbGVyLmdldFJlcXVlc3QoKSk7CgogICAgfQoKICAgIEBUZXN0\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0SGFuZGxlUmVxdWVzdE9uT3duZXIoKSB0\naHJvd3MgRXhjZXB0aW9uIHsKCiAgICAgICAgdG0uc2V0U2hvdWxkT3duRXZl\ncnlOZXdUb3BpYyh0cnVlKTsKICAgICAgICBoYW5kbGVyLmhhbmRsZVJlcXVl\nc3QocmVxdWVzdCwgY2hhbm5lbCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDAs\nIGNoYW5uZWwuZ2V0TWVzc2FnZXNXcml0dGVuKCkuc2l6ZSgpKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoaGFuZGxlci5nZXRSZXF1ZXN0KCksIHJlcXVlc3Qp\nOwoKICAgIH0KCiAgICBAVGVzdAogICAgcHVibGljIHZvaWQgdGVzdEhhbmRs\nZVJlcXVlc3RPbkVycm9yKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CgogICAgICAg\nIHRtLnNldFNob3VsZEVycm9yKHRydWUpOwogICAgICAgIGhhbmRsZXIuaGFu\nZGxlUmVxdWVzdChyZXF1ZXN0LCBjaGFubmVsKTsKCiAgICAgICAgUHViU3Vi\nUmVzcG9uc2UgcmVzcG9uc2UgPSBnZXRQdWJTdWJSZXNwb25zZShjaGFubmVs\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMocmVzcG9uc2UuZ2V0U3RhdHVzQ29k\nZSgpLCBTdGF0dXNDb2RlLlNFUlZJQ0VfRE9XTik7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKHJlcXVlc3QuZ2V0VHhuSWQoKSwgcmVzcG9uc2UuZ2V0VHhuSWQo\nKSk7CiAgICAgICAgYXNzZXJ0TnVsbChoYW5kbGVyLmdldFJlcXVlc3QoKSk7\nCgogICAgfQoKfQo=\n","encoding":"base64"}

