{"sha":"a11921e124ada39508082269342452b6dc1a0043","node_id":"MDQ6QmxvYjE1NzU5NTY6YTExOTIxZTEyNGFkYTM5NTA4MDgyMjY5MzQyNDUyYjZkYzFhMDA0Mw==","size":9812,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/a11921e124ada39508082269342452b6dc1a0043","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIubmV0dHk7CgppbXBvcnQg\namF2YS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEubGFuZy5UaHJlYWQu\nVW5jYXVnaHRFeGNlcHRpb25IYW5kbGVyOwppbXBvcnQgamF2YS5uZXQuSW5l\ndFNvY2tldEFkZHJlc3M7CmltcG9ydCBqYXZhLnV0aWwuTGlua2VkTGlzdDsK\naW1wb3J0IGphdmEudXRpbC5MaXN0OwppbXBvcnQgamF2YS51dGlsLmNvbmN1\ncnJlbnQuRXhlY3V0b3JzOwppbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQu\nU3luY2hyb25vdXNRdWV1ZTsKCmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMu\nY29uZmlndXJhdGlvbi5Db25maWd1cmF0aW9uRXhjZXB0aW9uOwppbXBvcnQg\nb3JnLmFwYWNoZS56b29rZWVwZXIuV2F0Y2hlZEV2ZW50OwppbXBvcnQgb3Jn\nLmFwYWNoZS56b29rZWVwZXIuV2F0Y2hlcjsKaW1wb3J0IG9yZy5hcGFjaGUu\nem9va2VlcGVyLlpvb0tlZXBlcjsKaW1wb3J0IG9yZy5qdW5pdC5UZXN0OwoK\naW1wb3J0IGNvbS5nb29nbGUucHJvdG9idWYuQnl0ZVN0cmluZzsKaW1wb3J0\nIG9yZy5hcGFjaGUuaGVkd2lnLmNsaWVudC5jb25mLkNsaWVudENvbmZpZ3Vy\nYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQuSGVkd2ln\nQ2xpZW50OwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuY2xpZW50LmFwaS5Q\ndWJsaXNoZXI7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5leGNlcHRpb25z\nLlB1YlN1YkV4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnBy\nb3RvY29sLlB1YlN1YlByb3RvY29sLk1lc3NhZ2U7CmltcG9ydCBvcmcuYXBh\nY2hlLmhlZHdpZy5zZXJ2ZXIuUHViU3ViU2VydmVyU3RhbmRBbG9uZVRlc3RC\nYXNlOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuc2VydmVyLmNvbW1vbi5T\nZXJ2ZXJDb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcu\nc2VydmVyLnRvcGljcy5BYnN0cmFjdFRvcGljTWFuYWdlcjsKaW1wb3J0IG9y\nZy5hcGFjaGUuaGVkd2lnLnNlcnZlci50b3BpY3MuVG9waWNNYW5hZ2VyOwpp\nbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcudXRpbC5DYWxsYmFjazsKaW1wb3J0\nIG9yZy5hcGFjaGUuaGVkd2lnLnV0aWwuSGVkd2lnU29ja2V0QWRkcmVzczsK\naW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnpvb2tlZXBlci5TYWZlQXN5bmNa\nS0NhbGxiYWNrOwoKcHVibGljIGNsYXNzIFRlc3RQdWJTdWJTZXJ2ZXIgZXh0\nZW5kcyBQdWJTdWJTZXJ2ZXJTdGFuZEFsb25lVGVzdEJhc2UgewoKICAgIEBU\nZXN0CiAgICBwdWJsaWMgdm9pZCB0ZXN0U2Vjb25kU2VydmVyKCkgdGhyb3dz\nIEV4Y2VwdGlvbiB7CiAgICAgICAgUHViU3ViU2VydmVyIHNlcnZlcjEgPSBu\nZXcgUHViU3ViU2VydmVyKG5ldyBTdGFuZEFsb25lU2VydmVyQ29uZmlndXJh\ndGlvbigpIHsKICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgIHB1\nYmxpYyBpbnQgZ2V0U2VydmVyUG9ydCgpIHsKICAgICAgICAgICAgICAgIHJl\ndHVybiBzdXBlci5nZXRTZXJ2ZXJQb3J0KCkgKyAxOwogICAgICAgICAgICB9\nCiAgICAgICAgfSk7CiAgICAgICAgc2VydmVyMS5zaHV0ZG93bigpOwogICAg\nfQoKICAgIGNsYXNzIFJlY29yZGluZ1VuY2F1Z2h0RXhjZXB0aW9uSGFuZGxl\nciBpbXBsZW1lbnRzIFRocmVhZC5VbmNhdWdodEV4Y2VwdGlvbkhhbmRsZXIg\newogICAgICAgIFN5bmNocm9ub3VzUXVldWU8VGhyb3dhYmxlPiBxdWV1ZTsK\nCiAgICAgICAgcHVibGljIFJlY29yZGluZ1VuY2F1Z2h0RXhjZXB0aW9uSGFu\nZGxlcihTeW5jaHJvbm91c1F1ZXVlPFRocm93YWJsZT4gcXVldWUpIHsKICAg\nICAgICAgICAgdGhpcy5xdWV1ZSA9IHF1ZXVlOwogICAgICAgIH0KCiAgICAg\nICAgQE92ZXJyaWRlCiAgICAgICAgcHVibGljIHZvaWQgdW5jYXVnaHRFeGNl\ncHRpb24oVGhyZWFkIHQsIFRocm93YWJsZSBlKSB7CiAgICAgICAgICAgIHF1\nZXVlLmFkZChlKTsKICAgICAgICB9CgogICAgfQoKICAgIHByaXZhdGUgaW50\nZXJmYWNlIFRvcGljTWFuYWdlckluc3RhbnRpYXRvciB7CiAgICAgICAgcHVi\nbGljIFRvcGljTWFuYWdlciBpbnN0YW50aWF0ZVRvcGljTWFuYWdlcigpIHRo\ncm93cyBJT0V4Y2VwdGlvbjsKICAgIH0KCiAgICBQdWJTdWJTZXJ2ZXIgc3Rh\ncnRTZXJ2ZXIoZmluYWwgVW5jYXVnaHRFeGNlcHRpb25IYW5kbGVyIHVuY2F1\nZ2h0RXhjZXB0aW9uSGFuZGxlciwgZmluYWwgaW50IHBvcnQsCiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgZmluYWwgVG9waWNNYW5hZ2VySW5zdGFu\ndGlhdG9yIGluc3RhbnRpYXRvcikgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAg\nICAgUHViU3ViU2VydmVyIHNlcnZlciA9IG5ldyBQdWJTdWJTZXJ2ZXIobmV3\nIFN0YW5kQWxvbmVTZXJ2ZXJDb25maWd1cmF0aW9uKCkgewogICAgICAgICAg\nICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIGludCBnZXRTZXJ2ZXJQ\nb3J0KCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHBvcnQ7CiAgICAgICAg\nICAgIH0KCiAgICAgICAgfSwgdW5jYXVnaHRFeGNlcHRpb25IYW5kbGVyKSB7\nCgogICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHJvdGVjdGVk\nIFRvcGljTWFuYWdlciBpbnN0YW50aWF0ZVRvcGljTWFuYWdlcigpIHRocm93\ncyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgICAgICAgICByZXR1cm4gaW5zdGFu\ndGlhdG9yLmluc3RhbnRpYXRlVG9waWNNYW5hZ2VyKCk7CiAgICAgICAgICAg\nIH0KICAgICAgICB9OwoKICAgICAgICByZXR1cm4gc2VydmVyOwoKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBydW5QdWJsaXNoUmVxdWVzdChmaW5hbCBpbnQg\ncG9ydCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgUHVibGlzaGVyIHB1\nYmxpc2hlciA9IG5ldyBIZWR3aWdDbGllbnQobmV3IENsaWVudENvbmZpZ3Vy\nYXRpb24oKSB7CiAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICBw\ndWJsaWMgSW5ldFNvY2tldEFkZHJlc3MgZ2V0RGVmYXVsdFNlcnZlckhvc3Qo\nKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEluZXRTb2NrZXRBZGRy\nZXNzKCJsb2NhbGhvc3QiLCBwb3J0KTsKICAgICAgICAgICAgfQogICAgICAg\nIH0pLmdldFB1Ymxpc2hlcigpOwoKICAgICAgICBwdWJsaXNoZXIuYXN5bmNQ\ndWJsaXNoKEJ5dGVTdHJpbmcuY29weUZyb21VdGY4KCJibGFoIiksIE1lc3Nh\nZ2UubmV3QnVpbGRlcigpLnNldEJvZHkoCiAgICAgICAgQnl0ZVN0cmluZy5j\nb3B5RnJvbVV0ZjgoImJsYWgiKSkuYnVpbGQoKSwgbmV3IENhbGxiYWNrPFZv\naWQ+KCkgewogICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVi\nbGljIHZvaWQgb3BlcmF0aW9uRmFpbGVkKE9iamVjdCBjdHgsIFB1YlN1YkV4\nY2VwdGlvbiBleGNlcHRpb24pIHsKICAgICAgICAgICAgICAgIGFzc2VydFRy\ndWUoZmFsc2UpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBAT3ZlcnJp\nZGUKICAgICAgICAgICAgcHVibGljIHZvaWQgb3BlcmF0aW9uRmluaXNoZWQo\nT2JqZWN0IGN0eCwgVm9pZCByZXN1bHRPZk9wZXJhdGlvbikgewogICAgICAg\nICAgICAgICAgYXNzZXJ0VHJ1ZShmYWxzZSk7CiAgICAgICAgICAgIH0KCiAg\nICAgICAgfSwgbnVsbCk7CiAgICB9CgogICAgQFRlc3QKICAgIHB1YmxpYyB2\nb2lkIHRlc3RVbmNhdWdodEV4Y2VwdGlvbkluTmV0dHlUaHJlYWQoKSB0aHJv\nd3MgRXhjZXB0aW9uIHsKCiAgICAgICAgU3luY2hyb25vdXNRdWV1ZTxUaHJv\nd2FibGU+IHF1ZXVlID0gbmV3IFN5bmNocm9ub3VzUXVldWU8VGhyb3dhYmxl\nPigpOwogICAgICAgIFJlY29yZGluZ1VuY2F1Z2h0RXhjZXB0aW9uSGFuZGxl\nciB1bmNhdWdodEV4Y2VwdGlvbkhhbmRsZXIgPSBuZXcgUmVjb3JkaW5nVW5j\nYXVnaHRFeGNlcHRpb25IYW5kbGVyKHF1ZXVlKTsKICAgICAgICBmaW5hbCBp\nbnQgcG9ydCA9IDk4NzY7CgogICAgICAgIFB1YlN1YlNlcnZlciBzZXJ2ZXIg\nPSBzdGFydFNlcnZlcih1bmNhdWdodEV4Y2VwdGlvbkhhbmRsZXIsIHBvcnQs\nIG5ldyBUb3BpY01hbmFnZXJJbnN0YW50aWF0b3IoKSB7CgogICAgICAgICAg\nICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIFRvcGljTWFuYWdlciBp\nbnN0YW50aWF0ZVRvcGljTWFuYWdlcigpIHRocm93cyBJT0V4Y2VwdGlvbiB7\nCiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFic3RyYWN0VG9waWNNYW5h\nZ2VyKG5ldyBTZXJ2ZXJDb25maWd1cmF0aW9uKCksIEV4ZWN1dG9ycy5uZXdT\naW5nbGVUaHJlYWRTY2hlZHVsZWRFeGVjdXRvcigpKSB7CiAgICAgICAgICAg\nICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICAgICAgcHJvdGVj\ndGVkIHZvaWQgcmVhbEdldE93bmVyKEJ5dGVTdHJpbmcgdG9waWMsIGJvb2xl\nYW4gc2hvdWxkQ2xhaW0sCiAgICAgICAgICAgICAgICAgICAgQ2FsbGJhY2s8\nSGVkd2lnU29ja2V0QWRkcmVzcz4gY2IsIE9iamVjdCBjdHgpIHsKICAgICAg\nICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24o\nInRoaXMgZXhjZXB0aW9uIHNob3VsZCBiZSB1bmNhdWdodCIpOwogICAgICAg\nICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgQE92ZXJyaWRl\nCiAgICAgICAgICAgICAgICAgICAgcHJvdGVjdGVkIHZvaWQgcG9zdFJlbGVh\nc2VDbGVhbnVwKEJ5dGVTdHJpbmcgdG9waWMsIENhbGxiYWNrPFZvaWQ+IGNi\nLCBPYmplY3QgY3R4KSB7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAg\nICAgICAgICAgfTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAg\nICBydW5QdWJsaXNoUmVxdWVzdChwb3J0KTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoUnVudGltZUV4Y2VwdGlvbi5jbGFzcywgcXVldWUudGFrZSgpLmdldENs\nYXNzKCkpOwogICAgICAgIHNlcnZlci5zaHV0ZG93bigpOwogICAgfQoKICAg\nIEBUZXN0CiAgICBwdWJsaWMgdm9pZCB0ZXN0VW5jYXVnaHRFeGNlcHRpb25J\nblpLVGhyZWFkKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CgogICAgICAgIFN5bmNo\ncm9ub3VzUXVldWU8VGhyb3dhYmxlPiBxdWV1ZSA9IG5ldyBTeW5jaHJvbm91\nc1F1ZXVlPFRocm93YWJsZT4oKTsKICAgICAgICBSZWNvcmRpbmdVbmNhdWdo\ndEV4Y2VwdGlvbkhhbmRsZXIgdW5jYXVnaHRFeGNlcHRpb25IYW5kbGVyID0g\nbmV3IFJlY29yZGluZ1VuY2F1Z2h0RXhjZXB0aW9uSGFuZGxlcihxdWV1ZSk7\nCiAgICAgICAgZmluYWwgaW50IHBvcnQgPSA5ODc2OwogICAgICAgIGZpbmFs\nIFN0cmluZyBob3N0UG9ydCA9ICIxMjcuMC4wLjE6MzMyMjEiOwoKICAgICAg\nICBQdWJTdWJTZXJ2ZXIgc2VydmVyID0gc3RhcnRTZXJ2ZXIodW5jYXVnaHRF\neGNlcHRpb25IYW5kbGVyLCBwb3J0LCBuZXcgVG9waWNNYW5hZ2VySW5zdGFu\ndGlhdG9yKCkgewoKICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAg\nIHB1YmxpYyBUb3BpY01hbmFnZXIgaW5zdGFudGlhdGVUb3BpY01hbmFnZXIo\nKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgICAgICAgICAgcmV0dXJu\nIG5ldyBBYnN0cmFjdFRvcGljTWFuYWdlcihuZXcgU2VydmVyQ29uZmlndXJh\ndGlvbigpLCBFeGVjdXRvcnMubmV3U2luZ2xlVGhyZWFkU2NoZWR1bGVkRXhl\nY3V0b3IoKSkgewoKICAgICAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAg\nICAgICAgICAgICAgICAgICBwcm90ZWN0ZWQgdm9pZCByZWFsR2V0T3duZXIo\nQnl0ZVN0cmluZyB0b3BpYywgYm9vbGVhbiBzaG91bGRDbGFpbSwKICAgICAg\nICAgICAgICAgICAgICBDYWxsYmFjazxIZWR3aWdTb2NrZXRBZGRyZXNzPiBj\nYiwgT2JqZWN0IGN0eCkgewogICAgICAgICAgICAgICAgICAgICAgICBab29L\nZWVwZXIgem9va2VlcGVyOwogICAgICAgICAgICAgICAgICAgICAgICB0cnkg\newogICAgICAgICAgICAgICAgICAgICAgICAgICAgem9va2VlcGVyID0gbmV3\nIFpvb0tlZXBlcihob3N0UG9ydCwgNjAwMDAsIG5ldyBXYXRjaGVyKCkgewog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHByb2Nl\nc3MoV2F0Y2hlZEV2ZW50IGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIC8vIFRPRE8gQXV0by1nZW5lcmF0ZWQgbWV0aG9k\nIHN0dWIKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAg\nICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKGUp\nOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAg\nICAgICAgICB6b29rZWVwZXIuZ2V0RGF0YSgiL2Zha2UiLCBmYWxzZSwgbmV3\nIFNhZmVBc3luY1pLQ2FsbGJhY2suRGF0YUNhbGxiYWNrKCkgewogICAgICAg\nICAgICAgICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBzYWZlUHJvY2Vzc1Jlc3VsdChp\nbnQgcmMsIFN0cmluZyBwYXRoLCBPYmplY3QgY3R4LCBieXRlW10gZGF0YSwK\nICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZy5hcGFjaGUuem9va2Vl\ncGVyLmRhdGEuU3RhdCBzdGF0KSB7CiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oIlRoaXMgc2hv\ndWxkIGdvIHRvIHRoZSB1bmNhdWdodCBleGNlcHRpb24gaGFuZGxlciIpOwog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAg\nICAgICAgICAgfSwgbnVsbCk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAg\nICAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgICAg\nICBwcm90ZWN0ZWQgdm9pZCBwb3N0UmVsZWFzZUNsZWFudXAoQnl0ZVN0cmlu\nZyB0b3BpYywgQ2FsbGJhY2s8Vm9pZD4gY2IsIE9iamVjdCBjdHgpIHsKICAg\nICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAg\nICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIHJ1blB1Ymxpc2hSZXF1ZXN0\nKHBvcnQpOwogICAgICAgIGFzc2VydEVxdWFscyhSdW50aW1lRXhjZXB0aW9u\nLmNsYXNzLCBxdWV1ZS50YWtlKCkuZ2V0Q2xhc3MoKSk7CiAgICAgICAgc2Vy\ndmVyLnNodXRkb3duKCk7CiAgICB9CgogICAgQFRlc3QKICAgIHB1YmxpYyB2\nb2lkIHRlc3RJbnZhbGlkU2VydmVyQ29uZmlndXJhdGlvbigpIHRocm93cyBF\neGNlcHRpb24gewogICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IGZhbHNlOwog\nICAgICAgIFNlcnZlckNvbmZpZ3VyYXRpb24gY29uZiA9IG5ldyBTZXJ2ZXJD\nb25maWd1cmF0aW9uKCkgewogICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAg\nICAgICAgcHVibGljIGJvb2xlYW4gaXNJbnRlclJlZ2lvblNTTEVuYWJsZWQo\nKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gY29uZi5nZXRCb29sZWFuKElO\nVEVSX1JFR0lPTl9TU0xfRU5BQkxFRCwgdHJ1ZSk7CiAgICAgICAgICAgIH0K\nCiAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICBwdWJsaWMgTGlz\ndDxTdHJpbmc+IGdldFJlZ2lvbnMoKSB7CiAgICAgICAgICAgICAgICBMaXN0\nPFN0cmluZz4gcmVnaW9uc0xpc3QgPSBuZXcgTGlua2VkTGlzdDxTdHJpbmc+\nKCk7CiAgICAgICAgICAgICAgICByZWdpb25zTGlzdC5hZGQoInJlZ2lvbkhv\nc3QxOjQwODA6OTg3NiIpOwogICAgICAgICAgICAgICAgcmVnaW9uc0xpc3Qu\nYWRkKCJyZWdpb25Ib3N0Mjo0MDgwIik7CiAgICAgICAgICAgICAgICByZWdp\nb25zTGlzdC5hZGQoInJlZ2lvbkhvc3QzOjQwODA6OTg3NiIpOwogICAgICAg\nICAgICAgICAgcmV0dXJuIHJlZ2lvbnNMaXN0OwogICAgICAgICAgICB9CiAg\nICAgICAgfTsKICAgICAgICB0cnkgewogICAgICAgICAgICBjb25mLnZhbGlk\nYXRlKCk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChDb25maWd1cmF0aW9u\nRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCJJbnZh\nbGlkIGNvbmZpZ3VyYXRpb246ICIsIGUpOwogICAgICAgICAgICBzdWNjZXNz\nID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgYXNzZXJ0VHJ1ZShzdWNjZXNz\nKTsKICAgIH0KCiAgICBAVGVzdAogICAgcHVibGljIHZvaWQgdGVzdFZhbGlk\nU2VydmVyQ29uZmlndXJhdGlvbigpIHRocm93cyBFeGNlcHRpb24gewogICAg\nICAgIGJvb2xlYW4gc3VjY2VzcyA9IHRydWU7CiAgICAgICAgU2VydmVyQ29u\nZmlndXJhdGlvbiBjb25mID0gbmV3IFNlcnZlckNvbmZpZ3VyYXRpb24oKSB7\nCiAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICBwdWJsaWMgYm9v\nbGVhbiBpc0ludGVyUmVnaW9uU1NMRW5hYmxlZCgpIHsKICAgICAgICAgICAg\nICAgIHJldHVybiBjb25mLmdldEJvb2xlYW4oSU5URVJfUkVHSU9OX1NTTF9F\nTkFCTEVELCB0cnVlKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgQE92\nZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyBMaXN0PFN0cmluZz4gZ2V0UmVn\naW9ucygpIHsKICAgICAgICAgICAgICAgIExpc3Q8U3RyaW5nPiByZWdpb25z\nTGlzdCA9IG5ldyBMaW5rZWRMaXN0PFN0cmluZz4oKTsKICAgICAgICAgICAg\nICAgIHJlZ2lvbnNMaXN0LmFkZCgicmVnaW9uSG9zdDE6NDA4MDo5ODc2Iik7\nCiAgICAgICAgICAgICAgICByZWdpb25zTGlzdC5hZGQoInJlZ2lvbkhvc3Qy\nOjQwODA6MjkzOCIpOwogICAgICAgICAgICAgICAgcmVnaW9uc0xpc3QuYWRk\nKCJyZWdpb25Ib3N0Mzo0MDgwOjk4NzYiKTsKICAgICAgICAgICAgICAgIHJl\ndHVybiByZWdpb25zTGlzdDsKICAgICAgICAgICAgfQogICAgICAgIH07CiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgY29uZi52YWxpZGF0ZSgpOwogICAg\nICAgIH0KICAgICAgICBjYXRjaCAoQ29uZmlndXJhdGlvbkV4Y2VwdGlvbiBl\nKSB7CiAgICAgICAgICAgIGxvZ2dlci5lcnJvcigiSW52YWxpZCBjb25maWd1\ncmF0aW9uOiAiLCBlKTsKICAgICAgICAgICAgc3VjY2VzcyA9IGZhbHNlOwog\nICAgICAgIH0KICAgICAgICBhc3NlcnRUcnVlKHN1Y2Nlc3MpOwogICAgfQoK\nfQo=\n","encoding":"base64"}

