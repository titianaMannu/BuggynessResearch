{"sha":"84b866dc159b9f418400fade9dc0eda645523f43","node_id":"MDQ6QmxvYjE1NzU5NTY6ODRiODY2ZGMxNTliOWY0MTg0MDBmYWRlOWRjMGVkYTY0NTUyM2Y0Mw==","size":4555,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/84b866dc159b9f418400fade9dc0eda645523f43","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIucGVyc2lzdGVuY2U7Cgpp\nbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsKaW1wb3J0IGphdmEudXRpbC5I\nYXNoTWFwOwppbXBvcnQgamF2YS51dGlsLkxpc3Q7CmltcG9ydCBqYXZhLnV0\naWwuTWFwOwoKaW1wb3J0IGNvbS5nb29nbGUucHJvdG9idWYuQnl0ZVN0cmlu\nZzsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmV4Y2VwdGlvbnMuUHViU3Vi\nRXhjZXB0aW9uLlNlcnZpY2VEb3duRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFw\nYWNoZS5oZWR3aWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2wuTWVzc2FnZTsK\naW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnByb3RvY29sLlB1YlN1YlByb3Rv\nY29sLk1lc3NhZ2VTZXFJZDsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnBy\nb3RvZXh0ZW5zaW9ucy5NZXNzYWdlSWRVdGlsczsKaW1wb3J0IG9yZy5hcGFj\naGUuaGVkd2lnLnNlcnZlci5wZXJzaXN0ZW5jZS5TY2FuQ2FsbGJhY2suUmVh\nc29uRm9yRmluaXNoOwoKcHVibGljIGNsYXNzIFN0dWJQZXJzaXN0ZW5jZU1h\nbmFnZXIgaW1wbGVtZW50cyBQZXJzaXN0ZW5jZU1hbmFnZXJXaXRoUmFuZ2VT\nY2FuIHsKICAgIE1hcDxCeXRlU3RyaW5nLCBMaXN0PE1lc3NhZ2U+PiBtZXNz\nYWdlcyA9IG5ldyBIYXNoTWFwPEJ5dGVTdHJpbmcsIExpc3Q8TWVzc2FnZT4+\nKCk7CiAgICBib29sZWFuIGZhaWx1cmUgPSBmYWxzZTsKICAgIFNlcnZpY2VE\nb3duRXhjZXB0aW9uIGV4Y2VwdGlvbiA9IG5ldyBTZXJ2aWNlRG93bkV4Y2Vw\ndGlvbigiQXNrZWQgdG8gZmFpbCIpOwoKICAgIHB1YmxpYyB2b2lkIGRlbGl2\nZXJlZFVudGlsKEJ5dGVTdHJpbmcgdG9waWMsIExvbmcgc2VxSWQpIHsKICAg\nICAgICAvLyBub29wCiAgICB9CgogICAgcHVibGljIHZvaWQgY29uc3VtZWRV\nbnRpbChCeXRlU3RyaW5nIHRvcGljLCBMb25nIHNlcUlkKSB7CiAgICAgICAg\nLy8gbm9vcAogICAgfQoKICAgIHByb3RlY3RlZCBzdGF0aWMgY2xhc3MgQXJy\nYXlMaXN0TWVzc2FnZUZhY3RvcnkgaW1wbGVtZW50cyBGYWN0b3J5PExpc3Q8\nTWVzc2FnZT4+IHsKICAgICAgICBzdGF0aWMgQXJyYXlMaXN0TWVzc2FnZUZh\nY3RvcnkgaW5zdGFuY2UgPSBuZXcgQXJyYXlMaXN0TWVzc2FnZUZhY3Rvcnko\nKTsKCiAgICAgICAgcHVibGljIExpc3Q8TWVzc2FnZT4gbmV3SW5zdGFuY2Uo\nKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgQXJyYXlMaXN0PE1lc3NhZ2U+\nKCk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBNZXNzYWdlU2VxSWQg\nZ2V0Q3VycmVudFNlcUlkRm9yVG9waWMoQnl0ZVN0cmluZyB0b3BpYykgewog\nICAgICAgIGxvbmcgc2VxSWQgPSBNYXBNZXRob2RzLmdldEFmdGVySW5zZXJ0\naW5nSWZBYnNlbnQobWVzc2FnZXMsIHRvcGljLCBBcnJheUxpc3RNZXNzYWdl\nRmFjdG9yeS5pbnN0YW5jZSkuc2l6ZSgpOwogICAgICAgIHJldHVybiBNZXNz\nYWdlU2VxSWQubmV3QnVpbGRlcigpLnNldExvY2FsQ29tcG9uZW50KHNlcUlk\nKS5idWlsZCgpOwogICAgfQoKICAgIHB1YmxpYyBsb25nIGdldFNlcUlkQWZ0\nZXJTa2lwcGluZyhCeXRlU3RyaW5nIHRvcGljLCBsb25nIHNlcUlkLCBpbnQg\nc2tpcEFtb3VudCkgewogICAgICAgIHJldHVybiBzZXFJZCArIHNraXBBbW91\nbnQ7CiAgICB9CgogICAgcHVibGljIHZvaWQgcGVyc2lzdE1lc3NhZ2UoUGVy\nc2lzdFJlcXVlc3QgcmVxdWVzdCkgewogICAgICAgIGlmIChmYWlsdXJlKSB7\nCiAgICAgICAgICAgIHJlcXVlc3QuY2FsbGJhY2sub3BlcmF0aW9uRmFpbGVk\nKHJlcXVlc3QuZ2V0Q3R4KCksIGV4Y2VwdGlvbik7CiAgICAgICAgICAgIHJl\ndHVybjsKICAgICAgICB9CgogICAgICAgIE1hcE1ldGhvZHMuYWRkVG9NdWx0\naU1hcChtZXNzYWdlcywgcmVxdWVzdC5nZXRUb3BpYygpLCByZXF1ZXN0Lmdl\ndE1lc3NhZ2UoKSwgQXJyYXlMaXN0TWVzc2FnZUZhY3RvcnkuaW5zdGFuY2Up\nOwogICAgICAgIHJlcXVlc3QuY2FsbGJhY2sub3BlcmF0aW9uRmluaXNoZWQo\ncmVxdWVzdC5nZXRDdHgoKSwgKGxvbmcpIG1lc3NhZ2VzLmdldChyZXF1ZXN0\nLmdldFRvcGljKCkpLnNpemUoKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nc2NhblNpbmdsZU1lc3NhZ2UoU2NhblJlcXVlc3QgcmVxdWVzdCkgewogICAg\nICAgIGlmIChmYWlsdXJlKSB7CiAgICAgICAgICAgIHJlcXVlc3QuZ2V0Q2Fs\nbGJhY2soKS5zY2FuRmFpbGVkKHJlcXVlc3QuZ2V0Q3R4KCksIGV4Y2VwdGlv\nbik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHJl\ncXVlc3QuZ2V0Q2FsbGJhY2soKS5tZXNzYWdlU2Nhbm5lZChyZXF1ZXN0Lmdl\ndEN0eCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICBtZXNzYWdlcy5nZXQocmVxdWVzdC5nZXRUb3BpYygpKS5nZXQo\nKGludCkgcmVxdWVzdC5nZXRTdGFydFNlcUlkKCkpKTsKCiAgICB9CgogICAg\ncHVibGljIHZvaWQgc2Nhbk1lc3NhZ2VzKFJhbmdlU2NhblJlcXVlc3QgcmVx\ndWVzdCkgewogICAgICAgIGlmIChmYWlsdXJlKSB7CiAgICAgICAgICAgIHJl\ncXVlc3QuZ2V0Q2FsbGJhY2soKS5zY2FuRmFpbGVkKHJlcXVlc3QuZ2V0Q3R4\nKCksIGV4Y2VwdGlvbik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9\nCgogICAgICAgIGxvbmcgdG90YWxTaXplID0gMDsKICAgICAgICBsb25nIHN0\nYXJ0U2VxSWQgPSByZXF1ZXN0LmdldFN0YXJ0U2VxSWQoKTsKICAgICAgICBm\nb3IgKGludCBpID0gMDsgaSA8IHJlcXVlc3QuZ2V0TWVzc2FnZUxpbWl0KCk7\nIGkrKykgewogICAgICAgICAgICBMaXN0PE1lc3NhZ2U+IG1lc3NhZ2VMaXN0\nID0gTWFwTWV0aG9kcy5nZXRBZnRlckluc2VydGluZ0lmQWJzZW50KG1lc3Nh\nZ2VzLCByZXF1ZXN0LmdldFRvcGljKCksCiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICBBcnJheUxpc3RNZXNzYWdlRmFjdG9yeS5p\nbnN0YW5jZSk7CiAgICAgICAgICAgIGlmIChzdGFydFNlcUlkICsgaSA+IG1l\nc3NhZ2VMaXN0LnNpemUoKSkgewogICAgICAgICAgICAgICAgcmVxdWVzdC5n\nZXRDYWxsYmFjaygpLnNjYW5GaW5pc2hlZChyZXF1ZXN0LmdldEN0eCgpLCBS\nZWFzb25Gb3JGaW5pc2guTk9fTU9SRV9NRVNTQUdFUyk7CiAgICAgICAgICAg\nICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgTWVzc2Fn\nZSBtc2cgPSBtZXNzYWdlTGlzdC5nZXQoKGludCkgc3RhcnRTZXFJZCArIGkg\nLSAxKTsKICAgICAgICAgICAgTWVzc2FnZSB0b0RlbGl2ZXIgPSBNZXNzYWdl\nSWRVdGlscy5tZXJnZUxvY2FsU2VxSWQobXNnLCBzdGFydFNlcUlkICsgaSk7\nCiAgICAgICAgICAgIHJlcXVlc3QuZ2V0Q2FsbGJhY2soKS5tZXNzYWdlU2Nh\nbm5lZChyZXF1ZXN0LmdldEN0eCgpLCB0b0RlbGl2ZXIpOwoKICAgICAgICAg\nICAgdG90YWxTaXplICs9IHRvRGVsaXZlci5nZXRCb2R5KCkuc2l6ZSgpOwoK\nICAgICAgICAgICAgaWYgKHRvdGFsU2l6ZSA+IHJlcXVlc3QuZ2V0U2l6ZUxp\nbWl0KCkpIHsKICAgICAgICAgICAgICAgIHJlcXVlc3QuZ2V0Q2FsbGJhY2so\nKS5zY2FuRmluaXNoZWQocmVxdWVzdC5nZXRDdHgoKSwgUmVhc29uRm9yRmlu\naXNoLlNJWkVfTElNSVRfRVhDRUVERUQpOwogICAgICAgICAgICAgICAgcmV0\ndXJuOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJlcXVlc3Qu\nZ2V0Q2FsbGJhY2soKS5zY2FuRmluaXNoZWQocmVxdWVzdC5nZXRDdHgoKSwg\nUmVhc29uRm9yRmluaXNoLk5VTV9NRVNTQUdFU19MSU1JVF9FWENFRURFRCk7\nCgogICAgfQp9Cg==\n","encoding":"base64"}

