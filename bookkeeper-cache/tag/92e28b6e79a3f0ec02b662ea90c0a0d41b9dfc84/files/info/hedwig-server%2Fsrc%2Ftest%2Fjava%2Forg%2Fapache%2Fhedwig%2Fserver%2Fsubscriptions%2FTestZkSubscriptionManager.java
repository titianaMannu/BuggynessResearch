{"sha":"f6d533f659103cd8644a496b23dffc90d95494b1","node_id":"MDQ6QmxvYjE1NzU5NTY6ZjZkNTMzZjY1OTEwM2NkODY0NGE0OTZiMjNkZmZjOTBkOTU0OTRiMQ==","size":9808,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/f6d533f659103cd8644a496b23dffc90d95494b1","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIuc3Vic2NyaXB0aW9uczsK\nCmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5FeGVjdXRvcnM7CmltcG9y\ndCBqYXZhLnV0aWwuY29uY3VycmVudC5TY2hlZHVsZWRFeGVjdXRvclNlcnZp\nY2U7CmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5TeW5jaHJvbm91c1F1\nZXVlOwoKaW1wb3J0IG9yZy5qdW5pdC5Bc3NlcnQ7CmltcG9ydCBvcmcuanVu\naXQuVGVzdDsKCmltcG9ydCBjb20uZ29vZ2xlLnByb3RvYnVmLkJ5dGVTdHJp\nbmc7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5leGNlcHRpb25zLlB1YlN1\nYkV4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnByb3RvY29s\nLlB1YlN1YlByb3RvY29sLk1lc3NhZ2VTZXFJZDsKaW1wb3J0IG9yZy5hcGFj\naGUuaGVkd2lnLnByb3RvY29sLlB1YlN1YlByb3RvY29sLlN1YnNjcmliZVJl\ncXVlc3Q7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5QdWJT\ndWJQcm90b2NvbC5TdWJzY3JpYmVSZXF1ZXN0LkNyZWF0ZU9yQXR0YWNoOwpp\nbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuc2VydmVyLmNvbW1vbi5TZXJ2ZXJD\nb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuc2VydmVy\nLnRvcGljcy5Ucml2aWFsT3duQWxsVG9waWNNYW5hZ2VyOwppbXBvcnQgb3Jn\nLmFwYWNoZS5oZWR3aWcudXRpbC5Db25jdXJyZW5jeVV0aWxzOwppbXBvcnQg\nb3JnLmFwYWNoZS5oZWR3aWcudXRpbC5FaXRoZXI7CmltcG9ydCBvcmcuYXBh\nY2hlLmhlZHdpZy51dGlsLkNhbGxiYWNrOwppbXBvcnQgb3JnLmFwYWNoZS5o\nZWR3aWcuem9va2VlcGVyLlpvb0tlZXBlclRlc3RCYXNlOwoKcHVibGljIGNs\nYXNzIFRlc3Raa1N1YnNjcmlwdGlvbk1hbmFnZXIgZXh0ZW5kcyBab29LZWVw\nZXJUZXN0QmFzZSB7CiAgICBaa1N1YnNjcmlwdGlvbk1hbmFnZXIgc207CiAg\nICBTZXJ2ZXJDb25maWd1cmF0aW9uIGNmZyA9IG5ldyBTZXJ2ZXJDb25maWd1\ncmF0aW9uKCk7CiAgICBTeW5jaHJvbm91c1F1ZXVlPEVpdGhlcjxNZXNzYWdl\nU2VxSWQsIFB1YlN1YkV4Y2VwdGlvbj4+IG1zZ0lkQ2FsbGJhY2tRdWV1ZSA9\nIG5ldyBTeW5jaHJvbm91c1F1ZXVlPEVpdGhlcjxNZXNzYWdlU2VxSWQsIFB1\nYlN1YkV4Y2VwdGlvbj4+KCk7CiAgICBTeW5jaHJvbm91c1F1ZXVlPEVpdGhl\ncjxCb29sZWFuLCBQdWJTdWJFeGNlcHRpb24+PiBCb29sZWFuQ2FsbGJhY2tR\ndWV1ZSA9IG5ldyBTeW5jaHJvbm91c1F1ZXVlPEVpdGhlcjxCb29sZWFuLCBQ\ndWJTdWJFeGNlcHRpb24+PigpOwoKICAgIENhbGxiYWNrPFZvaWQ+IHZvaWRD\nYWxsYmFjazsKICAgIENhbGxiYWNrPE1lc3NhZ2VTZXFJZD4gbXNnSWRDYWxs\nYmFjazsKCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkg\ndGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgc3VwZXIuc2V0VXAoKTsKICAg\nICAgICBjZmcgPSBuZXcgU2VydmVyQ29uZmlndXJhdGlvbigpOwogICAgICAg\nIGZpbmFsIFNjaGVkdWxlZEV4ZWN1dG9yU2VydmljZSBzY2hlZHVsZXIgPSBF\neGVjdXRvcnMubmV3U2NoZWR1bGVkVGhyZWFkUG9vbCgxKTsKICAgICAgICBz\nbSA9IG5ldyBaa1N1YnNjcmlwdGlvbk1hbmFnZXIoemssIG5ldyBUcml2aWFs\nT3duQWxsVG9waWNNYW5hZ2VyKGNmZywgc2NoZWR1bGVyKSwgbnVsbCwgY2Zn\nLCBzY2hlZHVsZXIpOwogICAgICAgIG1zZ0lkQ2FsbGJhY2sgPSBuZXcgQ2Fs\nbGJhY2s8TWVzc2FnZVNlcUlkPigpIHsKICAgICAgICAgICAgQE92ZXJyaWRl\nCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9wZXJhdGlvbkZhaWxlZChPYmpl\nY3QgY3R4LCBmaW5hbCBQdWJTdWJFeGNlcHRpb24gZXhjZXB0aW9uKSB7CiAg\nICAgICAgICAgICAgICBzY2hlZHVsZXIuZXhlY3V0ZShuZXcgUnVubmFibGUo\nKSB7CiAgICAgICAgICAgICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkgewog\nICAgICAgICAgICAgICAgICAgICAgICBDb25jdXJyZW5jeVV0aWxzLnB1dCht\nc2dJZENhbGxiYWNrUXVldWUsIEVpdGhlci5vZigoTWVzc2FnZVNlcUlkKSBu\ndWxsLCBleGNlcHRpb24pKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAg\nICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgQE92\nZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9wZXJhdGlvbkZpbmlz\naGVkKE9iamVjdCBjdHgsIGZpbmFsIE1lc3NhZ2VTZXFJZCByZXN1bHRPZk9w\nZXJhdGlvbikgewogICAgICAgICAgICAgICAgc2NoZWR1bGVyLmV4ZWN1dGUo\nbmV3IFJ1bm5hYmxlKCkgewogICAgICAgICAgICAgICAgICAgIHB1YmxpYyB2\nb2lkIHJ1bigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgQ29uY3VycmVu\nY3lVdGlscy5wdXQobXNnSWRDYWxsYmFja1F1ZXVlLCBFaXRoZXIub2YocmVz\ndWx0T2ZPcGVyYXRpb24sIChQdWJTdWJFeGNlcHRpb24pIG51bGwpKTsKICAg\nICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAg\nICAgICAgfQogICAgICAgIH07CgogICAgICAgIHZvaWRDYWxsYmFjayA9IG5l\ndyBDYWxsYmFjazxWb2lkPigpIHsKICAgICAgICAgICAgQE92ZXJyaWRlCiAg\nICAgICAgICAgIHB1YmxpYyB2b2lkIG9wZXJhdGlvbkZhaWxlZChPYmplY3Qg\nY3R4LCBmaW5hbCBQdWJTdWJFeGNlcHRpb24gZXhjZXB0aW9uKSB7CiAgICAg\nICAgICAgICAgICBzY2hlZHVsZXIuZXhlY3V0ZShuZXcgUnVubmFibGUoKSB7\nCiAgICAgICAgICAgICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkgewogICAg\nICAgICAgICAgICAgICAgICAgICBDb25jdXJyZW5jeVV0aWxzLnB1dChCb29s\nZWFuQ2FsbGJhY2tRdWV1ZSwgRWl0aGVyLm9mKChCb29sZWFuKSBudWxsLCBl\neGNlcHRpb24pKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAg\nICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgQE92ZXJyaWRl\nCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9wZXJhdGlvbkZpbmlzaGVkKE9i\namVjdCBjdHgsIFZvaWQgcmVzdWx0T2ZPcGVyYXRpb24pIHsKICAgICAgICAg\nICAgICAgIHNjaGVkdWxlci5leGVjdXRlKG5ldyBSdW5uYWJsZSgpIHsKICAg\nICAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB7CiAgICAgICAg\nICAgICAgICAgICAgICAgIENvbmN1cnJlbmN5VXRpbHMucHV0KEJvb2xlYW5D\nYWxsYmFja1F1ZXVlLCBFaXRoZXIub2YodHJ1ZSwgKFB1YlN1YkV4Y2VwdGlv\nbikgbnVsbCkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAg\nICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICB9CgogICAg\nQFRlc3QKICAgIHB1YmxpYyB2b2lkIHRlc3RCYXNpY3MoKSB0aHJvd3MgRXhj\nZXB0aW9uIHsKCiAgICAgICAgQnl0ZVN0cmluZyB0b3BpYzEgPSBCeXRlU3Ry\naW5nLmNvcHlGcm9tVXRmOCgidG9waWMxIik7CiAgICAgICAgQnl0ZVN0cmlu\nZyBzdWIxID0gQnl0ZVN0cmluZy5jb3B5RnJvbVV0ZjgoInN1YjEiKTsKCiAg\nICAgICAgLy8KICAgICAgICAvLyBObyB0b3BpY3MgYWNxdWlyZWQuCiAgICAg\nICAgLy8KICAgICAgICBTdWJzY3JpYmVSZXF1ZXN0IHN1YlJlcXVlc3QgPSBT\ndWJzY3JpYmVSZXF1ZXN0Lm5ld0J1aWxkZXIoKS5zZXRTdWJzY3JpYmVySWQo\nc3ViMSkuYnVpbGQoKTsKICAgICAgICBNZXNzYWdlU2VxSWQgbXNnSWQgPSBN\nZXNzYWdlU2VxSWQubmV3QnVpbGRlcigpLnNldExvY2FsQ29tcG9uZW50KDEw\nMCkuYnVpbGQoKTsKCiAgICAgICAgc20uc2VydmVTdWJzY3JpYmVSZXF1ZXN0\nKHRvcGljMSwgc3ViUmVxdWVzdCwgbXNnSWQsIG1zZ0lkQ2FsbGJhY2ssIG51\nbGwpOwoKICAgICAgICBBc3NlcnQuYXNzZXJ0RXF1YWxzKENvbmN1cnJlbmN5\nVXRpbHMudGFrZShtc2dJZENhbGxiYWNrUXVldWUpLnJpZ2h0KCkuZ2V0Q2xh\nc3MoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFB1YlN1YkV4Y2Vw\ndGlvbi5TZXJ2ZXJOb3RSZXNwb25zaWJsZUZvclRvcGljRXhjZXB0aW9uLmNs\nYXNzKTsKCiAgICAgICAgc20udW5zdWJzY3JpYmUodG9waWMxLCBzdWIxLCB2\nb2lkQ2FsbGJhY2ssIG51bGwpOwoKICAgICAgICBBc3NlcnQuYXNzZXJ0RXF1\nYWxzKENvbmN1cnJlbmN5VXRpbHMudGFrZShCb29sZWFuQ2FsbGJhY2tRdWV1\nZSkucmlnaHQoKS5nZXRDbGFzcygpLAogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgUHViU3ViRXhjZXB0aW9uLlNlcnZlck5vdFJlc3BvbnNpYmxlRm9y\nVG9waWNFeGNlcHRpb24uY2xhc3MpOwoKICAgICAgICAvLwogICAgICAgIC8v\nIEFjcXVpcmUgdG9waWMuCiAgICAgICAgLy8KCiAgICAgICAgc20uYWNxdWly\nZWRUb3BpYyh0b3BpYzEsIHZvaWRDYWxsYmFjaywgbnVsbCk7CiAgICAgICAg\nQXNzZXJ0LmFzc2VydFRydWUoQm9vbGVhbkNhbGxiYWNrUXVldWUudGFrZSgp\nLmxlZnQoKSk7CgogICAgICAgIEFzc2VydC5hc3NlcnRUcnVlKHNtLnRvcDJz\ndWIyc2VxLmNvbnRhaW5zS2V5KHRvcGljMSkpOwogICAgICAgIEFzc2VydC5h\nc3NlcnRFcXVhbHMoMCwgc20udG9wMnN1YjJzZXEuZ2V0KHRvcGljMSkuc2l6\nZSgpKTsKCiAgICAgICAgc20udW5zdWJzY3JpYmUodG9waWMxLCBzdWIxLCB2\nb2lkQ2FsbGJhY2ssIG51bGwpOwogICAgICAgIEFzc2VydC5hc3NlcnRFcXVh\nbHMoQ29uY3VycmVuY3lVdGlscy50YWtlKEJvb2xlYW5DYWxsYmFja1F1ZXVl\nKS5yaWdodCgpLmdldENsYXNzKCksCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICBQdWJTdWJFeGNlcHRpb24uQ2xpZW50Tm90U3Vic2NyaWJlZEV4Y2Vw\ndGlvbi5jbGFzcyk7CgogICAgICAgIC8vCiAgICAgICAgLy8gVHJ5IHRvIGF0\ndGFjaCB0byBhIHN1YnNjcmlwdGlvbi4KICAgICAgICBzdWJSZXF1ZXN0ID0g\nU3Vic2NyaWJlUmVxdWVzdC5uZXdCdWlsZGVyKCkuc2V0Q3JlYXRlT3JBdHRh\nY2goQ3JlYXRlT3JBdHRhY2guQVRUQUNIKS5zZXRTdWJzY3JpYmVySWQoc3Vi\nMSkKICAgICAgICAgICAgICAgICAgICAgLmJ1aWxkKCk7CgogICAgICAgIHNt\nLnNlcnZlU3Vic2NyaWJlUmVxdWVzdCh0b3BpYzEsIHN1YlJlcXVlc3QsIG1z\nZ0lkLCBtc2dJZENhbGxiYWNrLCBudWxsKTsKICAgICAgICBBc3NlcnQuYXNz\nZXJ0RXF1YWxzKENvbmN1cnJlbmN5VXRpbHMudGFrZShtc2dJZENhbGxiYWNr\nUXVldWUpLnJpZ2h0KCkuZ2V0Q2xhc3MoKSwKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgIFB1YlN1YkV4Y2VwdGlvbi5DbGllbnROb3RTdWJzY3JpYmVk\nRXhjZXB0aW9uLmNsYXNzKTsKCiAgICAgICAgLy8gbm93IGNyZWF0ZQogICAg\nICAgIHN1YlJlcXVlc3QgPSBTdWJzY3JpYmVSZXF1ZXN0Lm5ld0J1aWxkZXIo\nKS5zZXRDcmVhdGVPckF0dGFjaChDcmVhdGVPckF0dGFjaC5DUkVBVEUpLnNl\ndFN1YnNjcmliZXJJZChzdWIxKQogICAgICAgICAgICAgICAgICAgICAuYnVp\nbGQoKTsKICAgICAgICBzbS5zZXJ2ZVN1YnNjcmliZVJlcXVlc3QodG9waWMx\nLCBzdWJSZXF1ZXN0LCBtc2dJZCwgbXNnSWRDYWxsYmFjaywgbnVsbCk7CiAg\nICAgICAgQXNzZXJ0LmFzc2VydEVxdWFscyhtc2dJZC5nZXRMb2NhbENvbXBv\nbmVudCgpLCBDb25jdXJyZW5jeVV0aWxzLnRha2UobXNnSWRDYWxsYmFja1F1\nZXVlKS5sZWZ0KCkuZ2V0TG9jYWxDb21wb25lbnQoKSk7CiAgICAgICAgQXNz\nZXJ0LmFzc2VydEVxdWFscyhtc2dJZC5nZXRMb2NhbENvbXBvbmVudCgpLCBz\nbS50b3Ayc3ViMnNlcS5nZXQodG9waWMxKS5nZXQoc3ViMSkuZ2V0TGFzdENv\nbnN1bWVTZXFJZCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0\nTG9jYWxDb21wb25lbnQoKSk7CgogICAgICAgIC8vIHRyeSB0byBjcmVhdGUg\nYWdhaW4KICAgICAgICBzbS5zZXJ2ZVN1YnNjcmliZVJlcXVlc3QodG9waWMx\nLCBzdWJSZXF1ZXN0LCBtc2dJZCwgbXNnSWRDYWxsYmFjaywgbnVsbCk7CiAg\nICAgICAgQXNzZXJ0LmFzc2VydEVxdWFscyhDb25jdXJyZW5jeVV0aWxzLnRh\na2UobXNnSWRDYWxsYmFja1F1ZXVlKS5yaWdodCgpLmdldENsYXNzKCksCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICBQdWJTdWJFeGNlcHRpb24uQ2xp\nZW50QWxyZWFkeVN1YnNjcmliZWRFeGNlcHRpb24uY2xhc3MpOwogICAgICAg\nIEFzc2VydC5hc3NlcnRFcXVhbHMobXNnSWQuZ2V0TG9jYWxDb21wb25lbnQo\nKSwgc20udG9wMnN1YjJzZXEuZ2V0KHRvcGljMSkuZ2V0KHN1YjEpLmdldExh\nc3RDb25zdW1lU2VxSWQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAg\nLmdldExvY2FsQ29tcG9uZW50KCkpOwoKICAgICAgICBzbS5sb3N0VG9waWMo\ndG9waWMxKTsKICAgICAgICBzbS5hY3F1aXJlZFRvcGljKHRvcGljMSwgdm9p\nZENhbGxiYWNrLCBudWxsKTsKICAgICAgICBBc3NlcnQuYXNzZXJ0VHJ1ZShC\nb29sZWFuQ2FsbGJhY2tRdWV1ZS50YWtlKCkubGVmdCgpKTsKCiAgICAgICAg\nLy8gdHJ5IHRvIGF0dGFjaAogICAgICAgIHN1YlJlcXVlc3QgPSBTdWJzY3Jp\nYmVSZXF1ZXN0Lm5ld0J1aWxkZXIoKS5zZXRDcmVhdGVPckF0dGFjaChDcmVh\ndGVPckF0dGFjaC5BVFRBQ0gpLnNldFN1YnNjcmliZXJJZChzdWIxKQogICAg\nICAgICAgICAgICAgICAgICAuYnVpbGQoKTsKICAgICAgICBNZXNzYWdlU2Vx\nSWQgbXNnSWQxID0gTWVzc2FnZVNlcUlkLm5ld0J1aWxkZXIoKS5zZXRMb2Nh\nbENvbXBvbmVudChtc2dJZC5nZXRMb2NhbENvbXBvbmVudCgpICsgMTApLmJ1\naWxkKCk7CiAgICAgICAgc20uc2VydmVTdWJzY3JpYmVSZXF1ZXN0KHRvcGlj\nMSwgc3ViUmVxdWVzdCwgbXNnSWQxLCBtc2dJZENhbGxiYWNrLCBudWxsKTsK\nICAgICAgICBBc3NlcnQuYXNzZXJ0RXF1YWxzKG1zZ0lkLmdldExvY2FsQ29t\ncG9uZW50KCksIG1zZ0lkQ2FsbGJhY2tRdWV1ZS50YWtlKCkubGVmdCgpLmdl\ndExvY2FsQ29tcG9uZW50KCkpOwogICAgICAgIEFzc2VydC5hc3NlcnRFcXVh\nbHMobXNnSWQuZ2V0TG9jYWxDb21wb25lbnQoKSwgc20udG9wMnN1YjJzZXEu\nZ2V0KHRvcGljMSkuZ2V0KHN1YjEpLmdldExhc3RDb25zdW1lU2VxSWQoKQog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldExvY2FsQ29tcG9uZW50\nKCkpOwoKICAgICAgICAvLyBub3cgbWFuaXB1bGF0ZSB0aGUgY29uc3VtZSBw\ndHJzCiAgICAgICAgLy8gZG9udCBnaXZlIGl0IGVub3VnaCB0byBoYXZlIGl0\nIHBlcnNpc3QgdG8gWksKICAgICAgICBNZXNzYWdlU2VxSWQgbXNnSWQyID0g\nTWVzc2FnZVNlcUlkLm5ld0J1aWxkZXIoKS5zZXRMb2NhbENvbXBvbmVudCgK\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zZ0lkLmdldExv\nY2FsQ29tcG9uZW50KCkgKyBjZmcuZ2V0Q29uc3VtZUludGVydmFsKCkgLSAx\nKS5idWlsZCgpOwogICAgICAgIHNtLnNldENvbnN1bWVTZXFJZEZvclN1YnNj\ncmliZXIodG9waWMxLCBzdWIxLCBtc2dJZDIsIHZvaWRDYWxsYmFjaywgbnVs\nbCk7CiAgICAgICAgQXNzZXJ0LmFzc2VydFRydWUoQm9vbGVhbkNhbGxiYWNr\nUXVldWUudGFrZSgpLmxlZnQoKSk7CiAgICAgICAgQXNzZXJ0LmFzc2VydEVx\ndWFscyhtc2dJZDIuZ2V0TG9jYWxDb21wb25lbnQoKSwgc20udG9wMnN1YjJz\nZXEuZ2V0KHRvcGljMSkuZ2V0KHN1YjEpLmdldExhc3RDb25zdW1lU2VxSWQo\nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldExvY2FsQ29tcG9u\nZW50KCkpOwogICAgICAgIEFzc2VydC5hc3NlcnRFcXVhbHMobXNnSWQuZ2V0\nTG9jYWxDb21wb25lbnQoKSwgc20udG9wMnN1YjJzZXEuZ2V0KHRvcGljMSku\nZ2V0KHN1YjEpLmdldFN1YnNjcmlwdGlvblN0YXRlKCkuZ2V0TXNnSWQoKQog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldExvY2FsQ29tcG9uZW50\nKCkpOwoKICAgICAgICAvLyBnaXZlIGl0IG1vcmUgc28gdGhhdCBpdCB3aWxs\nIHdyaXRlIHRvIFpLCiAgICAgICAgTWVzc2FnZVNlcUlkIG1zZ0lkMyA9IE1l\nc3NhZ2VTZXFJZC5uZXdCdWlsZGVyKCkuc2V0TG9jYWxDb21wb25lbnQoCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtc2dJZC5nZXRMb2Nh\nbENvbXBvbmVudCgpICsgY2ZnLmdldENvbnN1bWVJbnRlcnZhbCgpICsgMSku\nYnVpbGQoKTsKICAgICAgICBzbS5zZXRDb25zdW1lU2VxSWRGb3JTdWJzY3Jp\nYmVyKHRvcGljMSwgc3ViMSwgbXNnSWQzLCB2b2lkQ2FsbGJhY2ssIG51bGwp\nOwogICAgICAgIEFzc2VydC5hc3NlcnRUcnVlKEJvb2xlYW5DYWxsYmFja1F1\nZXVlLnRha2UoKS5sZWZ0KCkpOwoKICAgICAgICBzbS5sb3N0VG9waWModG9w\naWMxKTsKICAgICAgICBzbS5hY3F1aXJlZFRvcGljKHRvcGljMSwgdm9pZENh\nbGxiYWNrLCBudWxsKTsKICAgICAgICBBc3NlcnQuYXNzZXJ0VHJ1ZShCb29s\nZWFuQ2FsbGJhY2tRdWV1ZS50YWtlKCkubGVmdCgpKTsKCiAgICAgICAgQXNz\nZXJ0LmFzc2VydEVxdWFscyhtc2dJZDMuZ2V0TG9jYWxDb21wb25lbnQoKSwg\nc20udG9wMnN1YjJzZXEuZ2V0KHRvcGljMSkuZ2V0KHN1YjEpLmdldExhc3RD\nb25zdW1lU2VxSWQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmdl\ndExvY2FsQ29tcG9uZW50KCkpOwogICAgICAgIEFzc2VydC5hc3NlcnRFcXVh\nbHMobXNnSWQzLmdldExvY2FsQ29tcG9uZW50KCksIHNtLnRvcDJzdWIyc2Vx\nLmdldCh0b3BpYzEpLmdldChzdWIxKS5nZXRTdWJzY3JpcHRpb25TdGF0ZSgp\nLmdldE1zZ0lkKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXRM\nb2NhbENvbXBvbmVudCgpKTsKCiAgICAgICAgLy8gZmluYWxseSB1bnN1YnNj\ncmliZQogICAgICAgIHNtLnVuc3Vic2NyaWJlKHRvcGljMSwgc3ViMSwgdm9p\nZENhbGxiYWNrLCBudWxsKTsKICAgICAgICBBc3NlcnQuYXNzZXJ0VHJ1ZShC\nb29sZWFuQ2FsbGJhY2tRdWV1ZS50YWtlKCkubGVmdCgpKTsKCiAgICAgICAg\nc20ubG9zdFRvcGljKHRvcGljMSk7CiAgICAgICAgc20uYWNxdWlyZWRUb3Bp\nYyh0b3BpYzEsIHZvaWRDYWxsYmFjaywgbnVsbCk7CiAgICAgICAgQXNzZXJ0\nLmFzc2VydFRydWUoQm9vbGVhbkNhbGxiYWNrUXVldWUudGFrZSgpLmxlZnQo\nKSk7CiAgICAgICAgQXNzZXJ0LmFzc2VydEZhbHNlKHNtLnRvcDJzdWIyc2Vx\nLmdldCh0b3BpYzEpLmNvbnRhaW5zS2V5KHN1YjEpKTsKCiAgICB9Cgp9Cg==\n","encoding":"base64"}

