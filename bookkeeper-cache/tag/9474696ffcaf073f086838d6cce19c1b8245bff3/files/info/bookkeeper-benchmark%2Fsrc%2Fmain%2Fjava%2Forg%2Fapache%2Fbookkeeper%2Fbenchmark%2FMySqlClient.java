{"sha":"ebea877076ec9125ac03e838366b4030cd4fa029","node_id":"MDQ6QmxvYjE1NzU5NTY6ZWJlYTg3NzA3NmVjOTEyNWFjMDNlODM4MzY2YjQwMzBjZDRmYTAyOQ==","size":5205,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/ebea877076ec9125ac03e838366b4030cd4fa029","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIuYmVuY2htYXJrOwoKLyoq\nCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlv\nbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBsaWNl\nbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRpc3Ry\naWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0\naW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFT\nRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBBcGFj\naGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIpOyB5\nb3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNl\nCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkg\nb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hl\nLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWly\nZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcs\nIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlz\nIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQg\nV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIg\nZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRo\nZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5k\nCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCmltcG9y\ndCBqYXZhLmlvLkZpbGVPdXRwdXRTdHJlYW07CmltcG9ydCBqYXZhLnNxbC5D\nb25uZWN0aW9uOwppbXBvcnQgamF2YS5zcWwuRHJpdmVyTWFuYWdlcjsKaW1w\nb3J0IGphdmEuc3FsLlNRTEV4Y2VwdGlvbjsKaW1wb3J0IGphdmEuc3FsLlN0\nYXRlbWVudDsKaW1wb3J0IGphdmEudXRpbC5IYXNoTWFwOwoKaW1wb3J0IG9y\nZy5hcGFjaGUuYm9va2tlZXBlci5jbGllbnQuQm9va0tlZXBlcjsKaW1wb3J0\nIG9yZy5hcGFjaGUuYm9va2tlZXBlci5jbGllbnQuTGVkZ2VySGFuZGxlOwpp\nbXBvcnQgb3JnLnNsZjRqLkxvZ2dlcjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dn\nZXJGYWN0b3J5OwoKaW1wb3J0IHN0YXRpYyBjb20uZ29vZ2xlLmNvbW1vbi5i\nYXNlLkNoYXJzZXRzLlVURl84OwoKaW1wb3J0IG9yZy5hcGFjaGUuem9va2Vl\ncGVyLktlZXBlckV4Y2VwdGlvbjsKCnB1YmxpYyBjbGFzcyBNeVNxbENsaWVu\ndCB7CiAgICBzdGF0aWMgZmluYWwgTG9nZ2VyIExPRyA9IExvZ2dlckZhY3Rv\ncnkuZ2V0TG9nZ2VyKE15U3FsQ2xpZW50LmNsYXNzKTsKCiAgICBCb29rS2Vl\ncGVyIHg7CiAgICBMZWRnZXJIYW5kbGUgbGg7CiAgICBJbnRlZ2VyIGVudHJ5\nSWQ7CiAgICBIYXNoTWFwPEludGVnZXIsIEludGVnZXI+IG1hcDsKCiAgICBG\naWxlT3V0cHV0U3RyZWFtIGZTdHJlYW07CiAgICBGaWxlT3V0cHV0U3RyZWFt\nIGZTdHJlYW1Mb2NhbDsKICAgIGxvbmcgc3RhcnQsIGxhc3RJZDsKICAgIENv\nbm5lY3Rpb24gY29uOwogICAgU3RhdGVtZW50IHN0bXQ7CgoKICAgIHB1Ymxp\nYyBNeVNxbENsaWVudChTdHJpbmcgaG9zdHBvcnQsIFN0cmluZyB1c2VyLCBT\ndHJpbmcgcGFzcykKICAgICAgICAgICAgdGhyb3dzIENsYXNzTm90Rm91bmRF\neGNlcHRpb24gewogICAgICAgIGVudHJ5SWQgPSAwOwogICAgICAgIG1hcCA9\nIG5ldyBIYXNoTWFwPEludGVnZXIsIEludGVnZXI+KCk7CiAgICAgICAgQ2xh\nc3MuZm9yTmFtZSgiY29tLm15c3FsLmpkYmMuRHJpdmVyIik7CiAgICAgICAg\nLy8gZGF0YWJhc2UgaXMgbmFtZWQgImJvb2trZWVwZXIiCiAgICAgICAgU3Ry\naW5nIHVybCA9ICJqZGJjOm15c3FsOi8vIiArIGhvc3Rwb3J0ICsgIi9ib29r\na2VlcGVyIjsKICAgICAgICB0cnkgewogICAgICAgICAgICBjb24gPSBEcml2\nZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24odXJsLCB1c2VyLCBwYXNzKTsKICAg\nICAgICAgICAgc3RtdCA9IGNvbi5jcmVhdGVTdGF0ZW1lbnQoKTsKICAgICAg\nICAgICAgLy8gZHJvcCB0YWJsZSBhbmQgcmVjcmVhdGUgaXQKICAgICAgICAg\nICAgc3RtdC5leGVjdXRlKCJEUk9QIFRBQkxFIElGIEVYSVNUUyBkYXRhOyIp\nOwogICAgICAgICAgICBzdG10LmV4ZWN1dGUoImNyZWF0ZSB0YWJsZSBkYXRh\nKHRyYW5zYWN0aW9uX2lkIGJpZ2ludCBQUklNQVJZIEtFWSBBVVRPX0lOQ1JF\nTUVOVCwgY29udGVudCBURVhUKTsiKTsKICAgICAgICAgICAgTE9HLmluZm8o\nIkRhdGFiYXNlIGluaXRpYWxpemF0aW9uIHRlcm1pbmF0ZWQiKTsKICAgICAg\nICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkgewoKICAgICAgICAgICAgLy8g\nVE9ETyBBdXRvLWdlbmVyYXRlZCBjYXRjaCBibG9jawogICAgICAgICAgICBl\nLnByaW50U3RhY2tUcmFjZSgpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBjbG9zZUhhbmRsZSgpIHRocm93cyBLZWVwZXJFeGNlcHRpb24s\nIEludGVycnVwdGVkRXhjZXB0aW9uLCBTUUxFeGNlcHRpb24gewogICAgICAg\nIGNvbi5jbG9zZSgpOwogICAgfQogICAgLyoqCiAgICAgKiBGaXJzdCBwYXJh\nbWV0ZXIgaXMgYW4gaW50ZWdlciBkZWZpbmluZyB0aGUgbGVuZ3RoIG9mIHRo\nZSBtZXNzYWdlCiAgICAgKiBTZWNvbmQgcGFyYW1ldGVyIGlzIHRoZSBudW1i\nZXIgb2Ygd3JpdGVzCiAgICAgKiBUaGlyZCBwYXJhbWV0ZXIgaXMgaG9zdDpw\nb3J0CiAgICAgKiBGb3VydGggcGFyYW1ldGVyIGlzIHVzZXJuYW1lCiAgICAg\nKiBGaWZ0aCBwYXJhbWV0ZXIgaXMgcGFzc3dvcmQKICAgICAqIEBwYXJhbSBh\ncmdzCiAgICAgKiBAdGhyb3dzIENsYXNzTm90Rm91bmRFeGNlcHRpb24KICAg\nICAqIEB0aHJvd3MgU1FMRXhjZXB0aW9uCiAgICAgKi8KICAgIHB1YmxpYyBz\ndGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHRocm93cyBDbGFzc05v\ndEZvdW5kRXhjZXB0aW9uLCBTUUxFeGNlcHRpb24gewogICAgICAgIGludCBs\nZW5naHQgPSBJbnRlZ2VyLnBhcnNlSW50KGFyZ3NbMV0pOwogICAgICAgIFN0\ncmluZ0J1aWxkZXIgc2IgPSBuZXcgU3RyaW5nQnVpbGRlcigpOwogICAgICAg\nIHdoaWxlKGxlbmdodC0tID4gMCkgewogICAgICAgICAgICBzYi5hcHBlbmQo\nJ2EnKTsKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgTXlT\ncWxDbGllbnQgYyA9IG5ldyBNeVNxbENsaWVudChhcmdzWzJdLCBhcmdzWzNd\nLCBhcmdzWzRdKTsKICAgICAgICAgICAgYy53cml0ZVNhbWVFbnRyeUJhdGNo\nKHNiLnRvU3RyaW5nKCkuZ2V0Qnl0ZXMoVVRGXzgpLCBJbnRlZ2VyLnBhcnNl\nSW50KGFyZ3NbMF0pKTsKICAgICAgICAgICAgYy53cml0ZVNhbWVFbnRyeShz\nYi50b1N0cmluZygpLmdldEJ5dGVzKFVURl84KSwgSW50ZWdlci5wYXJzZUlu\ndChhcmdzWzBdKSk7CiAgICAgICAgICAgIGMuY2xvc2VIYW5kbGUoKTsKICAg\nICAgICB9IGNhdGNoIChOdW1iZXJGb3JtYXRFeGNlcHRpb24gZSkgewogICAg\nICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpOwogICAgICAgIH0gY2F0Y2gg\nKEludGVycnVwdGVkRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgZS5wcmlu\ndFN0YWNrVHJhY2UoKTsKICAgICAgICB9IGNhdGNoIChLZWVwZXJFeGNlcHRp\nb24gZSkgewogICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpOwogICAg\nICAgIH0KCiAgICB9CgogICAgLyoqCiAgICAgKiAJQWRkcyAgZGF0YSBlbnRy\neSB0byB0aGUgREIKICAgICAqIAlAcGFyYW0gZGF0YSAJdGhlIGVudHJ5IHRv\nIGJlIHdyaXR0ZW4sIGdpdmVuIGFzIGEgYnl0ZSBhcnJheQogICAgICogCUBw\nYXJhbSB0aW1lcwl0aGUgbnVtYmVyIG9mIHRpbWVzIHRoZSBlbnRyeSBzaG91\nbGQgYmUgd3JpdHRlbiBvbiB0aGUgREIJKi8KICAgIHZvaWQgd3JpdGVTYW1l\nRW50cnlCYXRjaChieXRlW10gZGF0YSwgaW50IHRpbWVzKSB0aHJvd3MgSW50\nZXJydXB0ZWRFeGNlcHRpb24sIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgc3Rh\ncnQgPSBTeXN0ZW0uY3VycmVudFRpbWVNaWxsaXMoKTsKICAgICAgICBpbnQg\nY291bnQgPSB0aW1lczsKICAgICAgICBTdHJpbmcgY29udGVudCA9IG5ldyBT\ndHJpbmcoZGF0YSwgVVRGXzgpOwogICAgICAgIFN5c3RlbS5vdXQucHJpbnRs\nbigiRGF0YTogIiArIGNvbnRlbnQgKyAiLCAiICsgZGF0YS5sZW5ndGgpOwog\nICAgICAgIHdoaWxlKGNvdW50LS0gPiAwKSB7CiAgICAgICAgICAgIHN0bXQu\nYWRkQmF0Y2goImluc2VydCBpbnRvIGRhdGEoY29udGVudCkgdmFsdWVzKFwi\nIiArIGNvbnRlbnQgKyAiXCIpOyIpOwogICAgICAgIH0KICAgICAgICBMT0cu\naW5mbygiRmluaXNoZWQgd3JpdGluZyBiYXRjaCBTUUwgY29tbWFuZCBpbiBt\nczogIiArIChTeXN0ZW0uY3VycmVudFRpbWVNaWxsaXMoKSAtIHN0YXJ0KSk7\nCiAgICAgICAgc3RhcnQgPSBTeXN0ZW0uY3VycmVudFRpbWVNaWxsaXMoKTsK\nICAgICAgICBzdG10LmV4ZWN1dGVCYXRjaCgpOwogICAgICAgIFN5c3RlbS5v\ndXQucHJpbnRsbigiRmluaXNoZWQgIiArIHRpbWVzICsgIiB3cml0ZXMgaW4g\nbXM6ICIgKyAoU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCkgLSBzdGFydCkp\nOwogICAgICAgIExPRy5pbmZvKCJFbmRlZCBjb21wdXRhdGlvbiIpOwogICAg\nfQoKICAgIHZvaWQgd3JpdGVTYW1lRW50cnkoYnl0ZVtdIGRhdGEsIGludCB0\naW1lcykgdGhyb3dzIEludGVycnVwdGVkRXhjZXB0aW9uLCBTUUxFeGNlcHRp\nb24gewogICAgICAgIHN0YXJ0ID0gU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlz\nKCk7CiAgICAgICAgaW50IGNvdW50ID0gdGltZXM7CiAgICAgICAgU3RyaW5n\nIGNvbnRlbnQgPSBuZXcgU3RyaW5nKGRhdGEsIFVURl84KTsKICAgICAgICBT\neXN0ZW0ub3V0LnByaW50bG4oIkRhdGE6ICIgKyBjb250ZW50ICsgIiwgIiAr\nIGRhdGEubGVuZ3RoKTsKICAgICAgICB3aGlsZShjb3VudC0tID4gMCkgewog\nICAgICAgICAgICBzdG10LmV4ZWN1dGVVcGRhdGUoImluc2VydCBpbnRvIGRh\ndGEoY29udGVudCkgdmFsdWVzKFwiIiArIGNvbnRlbnQgKyAiXCIpOyIpOwog\nICAgICAgIH0KICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIkZpbmlzaGVk\nICIgKyB0aW1lcyArICIgd3JpdGVzIGluIG1zOiAiICsgKFN5c3RlbS5jdXJy\nZW50VGltZU1pbGxpcygpIC0gc3RhcnQpKTsKICAgICAgICBMT0cuaW5mbygi\nRW5kZWQgY29tcHV0YXRpb24iKTsKICAgIH0KCn0K\n","encoding":"base64"}

