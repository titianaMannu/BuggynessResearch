{"sha":"0107d7a1e6248516369310a15dd9aa65e8ba6fab","node_id":"MDQ6QmxvYjE1NzU5NTY6MDEwN2Q3YTFlNjI0ODUxNjM2OTMxMGExNWRkOWFhNjVlOGJhNmZhYg==","size":2252,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/0107d7a1e6248516369310a15dd9aa65e8ba6fab","content":"LyoqCiAqIENvcHlyaWdodCBUaGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRp\nb24KICoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9y\nIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBU\naGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhl\nIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNl\nIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBs\naWFuY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEg\nY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgaHR0cDovL3d3dy5h\ncGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyBy\nZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3Jp\ndGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vu\nc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lU\nSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVp\ndGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBm\nb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9u\ncyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpw\nYWNrYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci5ib29raWU7CgppbXBvcnQg\namF2YS5pby5TZXJpYWxpemFibGU7CmltcG9ydCBqYXZhLnV0aWwuQ29tcGFy\nYXRvcjsKCnB1YmxpYyBjbGFzcyBFbnRyeUtleSB7CiAgICBsb25nIGxlZGdl\ncklkOwogICAgbG9uZyBlbnRyeUlkOwoKICAgIHB1YmxpYyBFbnRyeUtleSgp\nIHsKICAgICAgICB0aGlzKDAsIDApOwogICAgfQoKICAgIHB1YmxpYyBFbnRy\neUtleShsb25nIGxlZGdlcklkLCBsb25nIGVudHJ5SWQpIHsKICAgICAgICB0\naGlzLmxlZGdlcklkID0gbGVkZ2VySWQ7CiAgICAgICAgdGhpcy5lbnRyeUlk\nID0gZW50cnlJZDsKICAgIH0KCiAgICBwdWJsaWMgbG9uZyBnZXRMZWRnZXJJ\nZCgpIHsKICAgICAgICByZXR1cm4gbGVkZ2VySWQ7CiAgICB9CgogICAgcHVi\nbGljIGxvbmcgZ2V0RW50cnlJZCgpIHsKICAgICAgICByZXR1cm4gZW50cnlJ\nZDsKICAgIH0KCiAgICAvKioKICAgICogQ29tcGFyYXRvciBmb3IgdGhlIGtl\neSBwb3J0aW9uCiAgICAqLwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBLZXlD\nb21wYXJhdG9yIENPTVBBUkFUT1IgPSBuZXcgS2V5Q29tcGFyYXRvcigpOwoK\nICAgIC8vIE9ubHkgY29tcGFyZXMgdGhlIGtleSBwb3J0aW9uCiAgICBAT3Zl\ncnJpZGUKICAgIHB1YmxpYyBib29sZWFuIGVxdWFscyhPYmplY3Qgb3RoZXIp\nIHsKICAgICAgICBpZiAoIShvdGhlciBpbnN0YW5jZW9mIEVudHJ5S2V5KSkg\newogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBF\nbnRyeUtleSBrZXkgPSAoRW50cnlLZXkpb3RoZXI7CiAgICAgICAgcmV0dXJu\nIGxlZGdlcklkID09IGtleS5sZWRnZXJJZCAmJgogICAgICAgICAgICBlbnRy\neUlkID09IGtleS5lbnRyeUlkOwogICAgfQoKICAgIEBPdmVycmlkZQogICAg\ncHVibGljIGludCBoYXNoQ29kZSgpIHsKICAgICAgICByZXR1cm4gKGludCko\nbGVkZ2VySWQgKiAxMyBeIGVudHJ5SWQgKiAxNyk7CiAgICB9Cn0KCi8qKgoq\nIENvbXBhcmUgRW50cnlLZXkuCiovCmNsYXNzIEtleUNvbXBhcmF0b3IgaW1w\nbGVtZW50cyBDb21wYXJhdG9yPEVudHJ5S2V5PiwgU2VyaWFsaXphYmxlIHsK\nCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBsb25nIHNlcmlhbFZlcnNpb25V\nSUQgPSAwTDsKCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBpbnQgY29tcGFy\nZShFbnRyeUtleSBsZWZ0LCBFbnRyeUtleSByaWdodCkgewogICAgICAgIGxv\nbmcgcmV0ID0gbGVmdC5sZWRnZXJJZCAtIHJpZ2h0LmxlZGdlcklkOwogICAg\nICAgIGlmIChyZXQgPT0gMCkgewogICAgICAgICAgICByZXQgPSBsZWZ0LmVu\ndHJ5SWQgLSByaWdodC5lbnRyeUlkOwogICAgICAgIH0KICAgICAgICByZXR1\ncm4gKHJldCA8IDApPyAtMSA6ICgocmV0ID4gMCk/IDEgOiAwKTsKICAgIH0K\nfQo=\n","encoding":"base64"}

