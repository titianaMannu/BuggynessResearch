{"sha":"dab5396c3a91c30a8ad55761cc2cda7241b62db0","node_id":"MDQ6QmxvYjE1NzU5NTY6ZGFiNTM5NmMzYTkxYzMwYThhZDU1NzYxY2MyY2RhNzI0MWI2MmRiMA==","size":4061,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/dab5396c3a91c30a8ad55761cc2cda7241b62db0","content":"LyoqCiAqIENvcHlyaWdodCBUaGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRp\nb24KICoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9y\nIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBU\naGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhl\nIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNl\nIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBs\naWFuY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEg\nY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgaHR0cDovL3d3dy5h\ncGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyBy\nZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3Jp\ndGluZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vu\nc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lU\nSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVp\ndGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBm\nb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9u\ncyBhbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpw\nYWNrYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci5ib29raWU7CgppbXBvcnQg\namF2YS5uaW8uQnl0ZUJ1ZmZlcjsKCi8qKgogKiBBbiBlbnRyeSBLZXkvVmFs\ndWUuCiAqIEVudHJ5S2V5VmFsdWUgd3JhcHMgYSBieXRlIGFycmF5IGFuZCB0\nYWtlcyBvZmZzZXRzIGFuZCBsZW5ndGhzIGludG8gdGhlIGFycmF5IHRvCiAq\nIGludGVycHJldCB0aGUgY29udGVudCBhcyBlbnRyeSBibG9iLgogKi8KcHVi\nbGljIGNsYXNzIEVudHJ5S2V5VmFsdWUgZXh0ZW5kcyBFbnRyeUtleSB7CiAg\nICBmaW5hbCBwcml2YXRlIGJ5dGUgW10gYnl0ZXM7CiAgICBwcml2YXRlIGlu\ndCBvZmZzZXQgPSAwOyAvLyBzdGFydCBvZmZzZXQgb2YgZW50cnkgYmxvYgog\nICAgcHJpdmF0ZSBpbnQgbGVuZ3RoID0gMDsgLy8gbGVuZ3RoIG9mIGVudHJ5\nIGJsb2IKCiAgICAvKioKICAgICogQHJldHVybiBUaGUgYnl0ZSBhcnJheSBi\nYWNraW5nIHRoaXMgRW50cnlLZXlWYWx1ZS4KICAgICovCiAgICBwdWJsaWMg\nYnl0ZSBbXSBnZXRCdWZmZXIoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuYnl0\nZXM7CiAgICB9CgogICAgLyoqCiAgICAqIEByZXR1cm4gT2Zmc2V0IGludG8g\ne0BsaW5rICNnZXRCdWZmZXIoKX0gYXQgd2hpY2ggdGhlIEVudHJ5S2V5VmFs\ndWUgc3RhcnRzLgogICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0T2Zmc2V0KCkg\newogICAgICAgIHJldHVybiB0aGlzLm9mZnNldDsKICAgIH0KCiAgICAvKioK\nICAgICogQHJldHVybiBMZW5ndGggb2YgYnl0ZXMgdGhpcyBFbnRyeUtleVZh\nbHVlIG9jY3VwaWVzIGluIHtAbGluayAjZ2V0QnVmZmVyKCl9LgogICAgKi8K\nICAgIHB1YmxpYyBpbnQgZ2V0TGVuZ3RoKCkgewogICAgICAgIHJldHVybiB0\naGlzLmxlbmd0aDsKICAgIH0KCiAgICAvKioKICAgICAqCiAgICAgKiBDcmVh\ndGVzIGEgRW50cnlLZXlWYWx1ZSBmcm9tIHRoZSBzdGFydCBvZiB0aGUgc3Bl\nY2lmaWVkIGJ5dGUgYXJyYXkuCiAgICAgKiBQcmVzdW1lcyA8Y29kZT5ieXRl\nczwvY29kZT4gY29udGVudCBjb250YWlucyB0aGUgdmFsdWUgcG9ydGlvbiBv\nZiBhIEVudHJ5S2V5VmFsdWUuCiAgICAgKiBAcGFyYW0gYnl0ZXMgYnl0ZSBh\ncnJheQogICAgICovCiAgICBwdWJsaWMgRW50cnlLZXlWYWx1ZShsb25nIGxl\nZGdlcklkLCBsb25nIGVudHJ5SWQsIGZpbmFsIGJ5dGUgW10gYnl0ZXMpIHsK\nICAgICAgICB0aGlzKGxlZGdlcklkLCBlbnRyeUlkLCBieXRlcywgMCwgYnl0\nZXMubGVuZ3RoKTsKICAgIH0KCiAgICAvKioKICAgICAqCiAgICAgKiBDcmVh\ndGVzIGEgRW50cnlLZXlWYWx1ZSBmcm9tIHRoZSBzdGFydCBvZiB0aGUgc3Bl\nY2lmaWVkIGJ5dGUgYXJyYXkuCiAgICAgKiBQcmVzdW1lcyA8Y29kZT5ieXRl\nczwvY29kZT4gY29udGVudCBjb250YWlucyB0aGUgdmFsdWUgcG9ydGlvbiBv\nZiBhIEVudHJ5S2V5VmFsdWUuCiAgICAgKiBAcGFyYW0gYnl0ZXMgYnl0ZSBh\ncnJheQogICAgICogQHBhcmFtIG9mZnNldCBvZmZzZXQgaW4gYnl0ZXMgYXMg\nc3RhcnQgb2YgYmxvYgogICAgICogQHBhcmFtIGxlbmd0aCBvZiBibG9iCiAg\nICAgKi8KICAgIHB1YmxpYyBFbnRyeUtleVZhbHVlKGxvbmcgbGVkZ2VySWQs\nIGxvbmcgZW50cnlJZCwgZmluYWwgYnl0ZSBbXSBieXRlcywgaW50IG9mZnNl\ndCwgaW50IGxlbmd0aCkgewogICAgICAgIHN1cGVyKGxlZGdlcklkLCBlbnRy\neUlkKTsKICAgICAgICB0aGlzLmJ5dGVzID0gYnl0ZXM7CiAgICAgICAgdGhp\ncy5vZmZzZXQgPSBvZmZzZXQ7CiAgICAgICAgdGhpcy5sZW5ndGggPSBsZW5n\ndGg7CiAgICB9CgogICAgLyoqCiAgICAqIFJldHVybnMgdGhlIGJsb2Igd3Jh\ncHBlZCBpbiBhIG5ldyA8Y29kZT5CeXRlQnVmZmVyPC9jb2RlPi4KICAgICoK\nICAgICogQHJldHVybiB0aGUgdmFsdWUKICAgICovCiAgICBwdWJsaWMgQnl0\nZUJ1ZmZlciBnZXRWYWx1ZUFzQnl0ZUJ1ZmZlcigpIHsKICAgICAgICByZXR1\ncm4gQnl0ZUJ1ZmZlci53cmFwKGdldEJ1ZmZlcigpLCBnZXRPZmZzZXQoKSwg\nZ2V0TGVuZ3RoKCkpOwogICAgfQoKICAgIC8qKgogICAgKiBXcml0ZSBFbnRy\neUtleVZhbHVlIGJsb2IgaW50byB0aGUgcHJvdmlkZWQgYnl0ZSBidWZmZXIu\nCiAgICAqCiAgICAqIEBwYXJhbSBkc3QgdGhlIGJ5dGVzIGJ1ZmZlciB0byB1\nc2UKICAgICoKICAgICogQHJldHVybiBUaGUgbnVtYmVyIG9mIHVzZWZ1bCBi\neXRlcyBpbiB0aGUgYnVmZmVyLgogICAgKgogICAgKiBAdGhyb3dzIElsbGVn\nYWxBcmd1bWVudEV4Y2VwdGlvbiBhbiBpbGxlZ2FsIHZhbHVlIHdhcyBwYXNz\nZWQgb3IgdGhlcmUgaXMgaW5zdWZmaWNpZW50IHNwYWNlCiAgICAqIHJlbWFp\nbmluZyBpbiB0aGUgYnVmZmVyCiAgICAqLwogICAgaW50IHdyaXRlVG9CeXRl\nQnVmZmVyKEJ5dGVCdWZmZXIgZHN0KSB7CiAgICAgICAgaWYgKGRzdC5yZW1h\naW5pbmcoKSA8IGdldExlbmd0aCgpKSB7CiAgICAgICAgICAgIHRocm93IG5l\ndyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oIkJ1ZmZlciBzaXplICIgKyBk\nc3QucmVtYWluaW5nKCkgKyAiIDwgIiArIGdldExlbmd0aCgpKTsKICAgICAg\nICB9CgogICAgICAgIGRzdC5wdXQoZ2V0QnVmZmVyKCksIGdldE9mZnNldCgp\nLCBnZXRMZW5ndGgoKSk7CiAgICAgICAgcmV0dXJuIGdldExlbmd0aCgpOwog\nICAgfQoKICAgIC8qKgogICAgKiBTdHJpbmcgcmVwcmVzZW50YXRpb24KICAg\nICovCiAgICBwdWJsaWMgU3RyaW5nIHRvU3RyaW5nKCkgewogICAgICAgIHJl\ndHVybiBsZWRnZXJJZCArICI6IiArIGVudHJ5SWQ7CiAgICB9CgogICAgQE92\nZXJyaWRlCiAgICBwdWJsaWMgYm9vbGVhbiBlcXVhbHMoT2JqZWN0IG90aGVy\nKSB7CiAgICAgICAgLy8gc2luY2UgdGhpcyBlbnRyeSBpcyBpZGVudGlmaWVk\nIGJ5IChsaWQsIGVpZCkKICAgICAgICAvLyBzbyBqdXN0IHVzZSB7QGxpbmsg\nb3JnLmFwYWNoZS5ib29ra2VlcGVyLmJvb2tpZS5FbnRyeUtleSNlcXVhbHN9\nLgogICAgICAgIHJldHVybiBzdXBlci5lcXVhbHMob3RoZXIpOwogICAgfQoK\nICAgIEBPdmVycmlkZQogICAgcHVibGljIGludCBoYXNoQ29kZSgpIHsKICAg\nICAgICAvLyBzaW5jZSB0aGlzIGVudHJ5IGlzIGlkZW50aWZpZWQgYnkgKGxp\nZCwgZWlkKQogICAgICAgIC8vIHNvIGp1c3QgdXNlIHtAbGluayBvcmcuYXBh\nY2hlLmJvb2trZWVwZXIuYm9va2llLkVudHJ5S2V5I2hhc2hDb2RlfSBhcyB0\naGUgaGFzaCBjb2RlLgogICAgICAgIHJldHVybiBzdXBlci5oYXNoQ29kZSgp\nOwogICAgfQoKfQo=\n","encoding":"base64"}

