{"sha":"74c6ec2d3840e39a016383571f98b1ec8e3a51d0","node_id":"MDQ6QmxvYjE1NzU5NTY6NzRjNmVjMmQzODQwZTM5YTAxNjM4MzU3MWY5OGIxZWM4ZTNhNTFkMA==","size":24509,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/74c6ec2d3840e39a016383571f98b1ec8e3a51d0","content":"LyoqCiAqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91\nbmRhdGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRv\nciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAq\nIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGlu\nZm9ybWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRo\nZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5z\nZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21w\nbGlhbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBh\nIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICBodHRwOi8vd3d3LmFw\nYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJl\ncXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0\naW5nLAogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5z\nZSBpcyBkaXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRI\nT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwg\nZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBm\nb3IgdGhlCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNz\naW9ucyBhbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAq\nCiAqLwoKcGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIuYm9va2llOwoK\naW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247CmltcG9ydCBqYXZhLm5pby5C\neXRlQnVmZmVyOwppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsKaW1wb3J0\nIGphdmEudXRpbC5Db2xsZWN0aW9uczsKaW1wb3J0IGphdmEudXRpbC5Db21w\nYXJhdG9yOwppbXBvcnQgamF2YS51dGlsLkxpc3Q7CmltcG9ydCBqYXZhLnV0\naWwuTWFwOwppbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuQ29uY3VycmVu\ndEhhc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5hdG9taWMu\nQXRvbWljQm9vbGVhbjsKCmltcG9ydCBjb20uZ29vZ2xlLmNvbW1vbi5hbm5v\ndGF0aW9ucy5WaXNpYmxlRm9yVGVzdGluZzsKaW1wb3J0IGNvbS5nb29nbGUu\nY29tbW9uLnV0aWwuY29uY3VycmVudC5SYXRlTGltaXRlcjsKCmltcG9ydCBv\ncmcuYXBhY2hlLmJvb2trZWVwZXIuYm9va2llLkVudHJ5TG9nZ2VyLkVudHJ5\nTG9nU2Nhbm5lcjsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5ib29r\naWUuR2FyYmFnZUNvbGxlY3Rvci5HYXJiYWdlQ2xlYW5lcjsKaW1wb3J0IG9y\nZy5hcGFjaGUuYm9va2tlZXBlci5jb25mLlNlcnZlckNvbmZpZ3VyYXRpb247\nCmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIubWV0YS5MZWRnZXJNYW5h\nZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLnV0aWwuTWF0aFV0\naWxzOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLnV0aWwuU25hcHNo\nb3RNYXA7CmltcG9ydCBvcmcuc2xmNGouTG9nZ2VyOwppbXBvcnQgb3JnLnNs\nZjRqLkxvZ2dlckZhY3Rvcnk7CgovKioKICogVGhpcyBpcyB0aGUgZ2FyYmFn\nZSBjb2xsZWN0b3IgdGhyZWFkIHRoYXQgcnVucyBpbiB0aGUgYmFja2dyb3Vu\nZCB0bwogKiByZW1vdmUgYW55IGVudHJ5IGxvZyBmaWxlcyB0aGF0IG5vIGxv\nbmdlciBjb250YWlucyBhbnkgYWN0aXZlIGxlZGdlci4KICovCnB1YmxpYyBj\nbGFzcyBHYXJiYWdlQ29sbGVjdG9yVGhyZWFkIGV4dGVuZHMgQm9va2llVGhy\nZWFkIHsKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvZ2dlciBMT0cgPSBM\nb2dnZXJGYWN0b3J5LmdldExvZ2dlcihHYXJiYWdlQ29sbGVjdG9yVGhyZWFk\nLmNsYXNzKTsKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGludCBTRUNPTkQg\nPSAxMDAwOwoKICAgIC8vIE1hcHMgZW50cnkgbG9nIGZpbGVzIHRvIHRoZSBz\nZXQgb2YgbGVkZ2VycyB0aGF0IGNvbXByaXNlIHRoZSBmaWxlIGFuZCB0aGUg\nc2l6ZSB1c2FnZSBwZXIgbGVkZ2VyCiAgICBwcml2YXRlIE1hcDxMb25nLCBF\nbnRyeUxvZ01ldGFkYXRhPiBlbnRyeUxvZ01ldGFNYXAgPSBuZXcgQ29uY3Vy\ncmVudEhhc2hNYXA8TG9uZywgRW50cnlMb2dNZXRhZGF0YT4oKTsKCiAgICAv\nLyBUaGlzIGlzIGhvdyBvZnRlbiB3ZSB3YW50IHRvIHJ1biB0aGUgR2FyYmFn\nZSBDb2xsZWN0b3IgVGhyZWFkIChpbiBtaWxsaXNlY29uZHMpLgogICAgZmlu\nYWwgbG9uZyBnY1dhaXRUaW1lOwoKICAgIC8vIENvbXBhY3Rpb24gcGFyYW1l\ndGVycwogICAgYm9vbGVhbiBlbmFibGVNaW5vckNvbXBhY3Rpb24gPSBmYWxz\nZTsKICAgIGZpbmFsIGRvdWJsZSBtaW5vckNvbXBhY3Rpb25UaHJlc2hvbGQ7\nCiAgICBmaW5hbCBsb25nIG1pbm9yQ29tcGFjdGlvbkludGVydmFsOwoKICAg\nIGJvb2xlYW4gZW5hYmxlTWFqb3JDb21wYWN0aW9uID0gZmFsc2U7CiAgICBm\naW5hbCBkb3VibGUgbWFqb3JDb21wYWN0aW9uVGhyZXNob2xkOwogICAgZmlu\nYWwgbG9uZyBtYWpvckNvbXBhY3Rpb25JbnRlcnZhbDsKCiAgICBsb25nIGxh\nc3RNaW5vckNvbXBhY3Rpb25UaW1lOwogICAgbG9uZyBsYXN0TWFqb3JDb21w\nYWN0aW9uVGltZTsKCiAgICBmaW5hbCBpbnQgbWF4T3V0c3RhbmRpbmdSZXF1\nZXN0czsKICAgIGZpbmFsIGludCBjb21wYWN0aW9uUmF0ZTsKICAgIGZpbmFs\nIENvbXBhY3Rpb25TY2FubmVyRmFjdG9yeSBzY2FubmVyRmFjdG9yeTsKCiAg\nICAvLyBFbnRyeSBMb2dnZXIgSGFuZGxlCiAgICBmaW5hbCBFbnRyeUxvZ2dl\nciBlbnRyeUxvZ2dlcjsKCiAgICAvLyBMZWRnZXIgQ2FjaGUgSGFuZGxlCiAg\nICBmaW5hbCBMZWRnZXJDYWNoZSBsZWRnZXJDYWNoZTsKICAgIGZpbmFsIFNu\nYXBzaG90TWFwPExvbmcsIEJvb2xlYW4+IGFjdGl2ZUxlZGdlcnM7CgogICAg\nLy8gZmxhZyB0byBlbnN1cmUgZ2MgdGhyZWFkIHdpbGwgbm90IGJlIGludGVy\ncnVwdGVkIGR1cmluZyBjb21wYWN0aW9uCiAgICAvLyB0byByZWR1Y2UgdGhl\nIHJpc2sgZ2V0dGluZyBlbnRyeSBsb2cgY29ycnVwdGVkCiAgICBmaW5hbCBB\ndG9taWNCb29sZWFuIGNvbXBhY3RpbmcgPSBuZXcgQXRvbWljQm9vbGVhbihm\nYWxzZSk7CgogICAgdm9sYXRpbGUgYm9vbGVhbiBydW5uaW5nID0gdHJ1ZTsK\nCiAgICAvLyB0cmFjayB0aGUgbGFzdCBzY2FubmVkIHN1Y2Nlc3NmdWxseSBs\nb2cgaWQKICAgIGxvbmcgc2Nhbm5lZExvZ0lkID0gMDsKCiAgICAvLyBCb29s\nZWFuIHRvIHRyaWdnZXIgYSBmb3JjZWQgR0MuCiAgICBmaW5hbCBBdG9taWNC\nb29sZWFuIGZvcmNlR2FyYmFnZUNvbGxlY3Rpb24gPSBuZXcgQXRvbWljQm9v\nbGVhbihmYWxzZSk7CgogICAgZmluYWwgR2FyYmFnZUNvbGxlY3RvciBnYXJi\nYWdlQ29sbGVjdG9yOwogICAgZmluYWwgR2FyYmFnZUNsZWFuZXIgZ2FyYmFn\nZUNsZWFuZXI7CgogICAgcHJpdmF0ZSBzdGF0aWMgY2xhc3MgT2Zmc2V0IHsK\nICAgICAgICBmaW5hbCBsb25nIGxlZGdlcjsKICAgICAgICBmaW5hbCBsb25n\nIGVudHJ5OwogICAgICAgIGZpbmFsIGxvbmcgb2Zmc2V0OwoKICAgICAgICBP\nZmZzZXQobG9uZyBsZWRnZXIsIGxvbmcgZW50cnksIGxvbmcgb2Zmc2V0KSB7\nCiAgICAgICAgICAgIHRoaXMubGVkZ2VyID0gbGVkZ2VyOwogICAgICAgICAg\nICB0aGlzLmVudHJ5ID0gZW50cnk7CiAgICAgICAgICAgIHRoaXMub2Zmc2V0\nID0gb2Zmc2V0OwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEEg\nc2Nhbm5lciB3cmFwcGVyIHRvIGNoZWNrIHdoZXRoZXIgYSBsZWRnZXIgaXMg\nYWxpdmUgaW4gYW4gZW50cnkgbG9nIGZpbGUKICAgICAqLwogICAgY2xhc3Mg\nQ29tcGFjdGlvblNjYW5uZXJGYWN0b3J5IGltcGxlbWVudHMgRW50cnlMb2dn\nZXIuRW50cnlMb2dMaXN0ZW5lciB7CiAgICAgICAgTGlzdDxPZmZzZXQ+IG9m\nZnNldHMgPSBuZXcgQXJyYXlMaXN0PE9mZnNldD4oKTsKCiAgICAgICAgRW50\ncnlMb2dTY2FubmVyIG5ld1NjYW5uZXIoZmluYWwgRW50cnlMb2dNZXRhZGF0\nYSBtZXRhKSB7CiAgICAgICAgICAgIGZpbmFsIFJhdGVMaW1pdGVyIHJhdGVM\naW1pdGVyID0gUmF0ZUxpbWl0ZXIuY3JlYXRlKGNvbXBhY3Rpb25SYXRlKTsK\nICAgICAgICAgICAgcmV0dXJuIG5ldyBFbnRyeUxvZ1NjYW5uZXIoKSB7CiAg\nICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgIHB1Ymxp\nYyBib29sZWFuIGFjY2VwdChsb25nIGxlZGdlcklkKSB7CiAgICAgICAgICAg\nICAgICAgICAgcmV0dXJuIG1ldGEuY29udGFpbnNMZWRnZXIobGVkZ2VySWQp\nOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIEBPdmVycmlk\nZQogICAgICAgICAgICAgICAgcHVibGljIHZvaWQgcHJvY2VzcyhmaW5hbCBs\nb25nIGxlZGdlcklkLCBsb25nIG9mZnNldCwgQnl0ZUJ1ZmZlciBlbnRyeSkK\nICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3dzIElPRXhjZXB0aW9uIHsK\nICAgICAgICAgICAgICAgICAgICByYXRlTGltaXRlci5hY3F1aXJlKCk7CiAg\nICAgICAgICAgICAgICAgICAgc3luY2hyb25pemVkIChDb21wYWN0aW9uU2Nh\nbm5lckZhY3RvcnkudGhpcykgewogICAgICAgICAgICAgICAgICAgICAgICBp\nZiAob2Zmc2V0cy5zaXplKCkgPiBtYXhPdXRzdGFuZGluZ1JlcXVlc3RzKSB7\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0RW50cnlsb2dGbHVz\naGVkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAg\nICAgICAgICAgICAgZW50cnkuZ2V0TG9uZygpOyAvLyBkaXNjYXJkIGxlZGdl\nciBpZCwgd2UgYWxyZWFkeSBoYXZlIGl0CiAgICAgICAgICAgICAgICAgICAg\nICAgIGxvbmcgZW50cnlJZCA9IGVudHJ5LmdldExvbmcoKTsKICAgICAgICAg\nICAgICAgICAgICAgICAgZW50cnkucmV3aW5kKCk7CgogICAgICAgICAgICAg\nICAgICAgICAgICBsb25nIG5ld29mZnNldCA9IGVudHJ5TG9nZ2VyLmFkZEVu\ndHJ5KGxlZGdlcklkLCBlbnRyeSk7CiAgICAgICAgICAgICAgICAgICAgICAg\nIG9mZnNldHMuYWRkKG5ldyBPZmZzZXQobGVkZ2VySWQsIGVudHJ5SWQsIG5l\nd29mZnNldCkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAg\nICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIE9iamVj\ndCBmbHVzaExvY2sgPSBuZXcgT2JqZWN0KCk7CgogICAgICAgIEBPdmVycmlk\nZQogICAgICAgIHB1YmxpYyB2b2lkIG9uUm90YXRlRW50cnlMb2coKSB7CiAg\nICAgICAgICAgIHN5bmNocm9uaXplZCAoZmx1c2hMb2NrKSB7CiAgICAgICAg\nICAgICAgICBmbHVzaExvY2subm90aWZ5QWxsKCk7CiAgICAgICAgICAgIH0K\nICAgICAgICB9CgogICAgICAgIHN5bmNocm9uaXplZCBwcml2YXRlIHZvaWQg\nd2FpdEVudHJ5bG9nRmx1c2hlZCgpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAg\nICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBpZiAob2Zmc2V0cy5z\naXplKCkgPD0gMCkgewogICAgICAgICAgICAgICAgICAgIExPRy5kZWJ1Zygi\nU2tpcHBpbmcgZW50cnkgbG9nIGZsdXNoaW5nLCBhcyB0aGVyZSBpcyBubyBv\nZmZzZXQhIik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAg\nICAgICAgICAgfQogICAgICAgICAgICAgICAgc3luY2hyb25pemVkIChmbHVz\naExvY2spIHsKICAgICAgICAgICAgICAgICAgICBPZmZzZXQgbGFzdE9mZnNl\ndCA9IG9mZnNldHMuZ2V0KG9mZnNldHMuc2l6ZSgpLTEpOwogICAgICAgICAg\nICAgICAgICAgIGxvbmcgbGFzdE9mZnNldExvZ0lkID0gRW50cnlMb2dnZXIu\nbG9nSWRGb3JPZmZzZXQobGFzdE9mZnNldC5vZmZzZXQpOwogICAgICAgICAg\nICAgICAgICAgIHdoaWxlIChsYXN0T2Zmc2V0TG9nSWQgPCBlbnRyeUxvZ2dl\nci5nZXRMZWFzdFVuZmx1c2hlZExvZ0lkKCkgJiYgcnVubmluZykgewogICAg\nICAgICAgICAgICAgICAgICAgICBmbHVzaExvY2sud2FpdCgxMDAwKTsKCiAg\nICAgICAgICAgICAgICAgICAgICAgIGxhc3RPZmZzZXQgPSBvZmZzZXRzLmdl\ndChvZmZzZXRzLnNpemUoKS0xKTsKICAgICAgICAgICAgICAgICAgICAgICAg\nbGFzdE9mZnNldExvZ0lkID0gRW50cnlMb2dnZXIubG9nSWRGb3JPZmZzZXQo\nbGFzdE9mZnNldC5vZmZzZXQpOwogICAgICAgICAgICAgICAgICAgIH0KICAg\nICAgICAgICAgICAgICAgICBpZiAobGFzdE9mZnNldExvZ0lkID49IGVudHJ5\nTG9nZ2VyLmdldExlYXN0VW5mbHVzaGVkTG9nSWQoKSAmJiAhcnVubmluZykg\newogICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSU9FeGNlcHRp\nb24oIlNodXRkb3duIGJlZm9yZSBmbHVzaGVkIik7CiAgICAgICAgICAgICAg\nICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNo\nIChJbnRlcnJ1cHRlZEV4Y2VwdGlvbiBpZSkgewogICAgICAgICAgICAgICAg\nVGhyZWFkLmN1cnJlbnRUaHJlYWQoKS5pbnRlcnJ1cHQoKTsKICAgICAgICAg\nICAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlvbigiSW50ZXJydXB0ZWQgd2Fp\ndGluZyBmb3IgZmx1c2giLCBpZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAg\nICAgIGZvciAoT2Zmc2V0IG8gOiBvZmZzZXRzKSB7CiAgICAgICAgICAgICAg\nICBsZWRnZXJDYWNoZS5wdXRFbnRyeU9mZnNldChvLmxlZGdlciwgby5lbnRy\neSwgby5vZmZzZXQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG9mZnNl\ndHMuY2xlYXIoKTsKICAgICAgICB9CgogICAgICAgIHN5bmNocm9uaXplZCB2\nb2lkIGZsdXNoKCkgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICAgICAg\nd2FpdEVudHJ5bG9nRmx1c2hlZCgpOwoKICAgICAgICAgICAgbGVkZ2VyQ2Fj\naGUuZmx1c2hMZWRnZXIodHJ1ZSk7CiAgICAgICAgfQogICAgfQoKCiAgICAv\nKioKICAgICAqIENyZWF0ZSBhIGdhcmJhZ2UgY29sbGVjdG9yIHRocmVhZC4K\nICAgICAqCiAgICAgKiBAcGFyYW0gY29uZgogICAgICogICAgICAgICAgU2Vy\ndmVyIENvbmZpZ3VyYXRpb24gT2JqZWN0LgogICAgICogQHRocm93cyBJT0V4\nY2VwdGlvbgogICAgICovCiAgICBwdWJsaWMgR2FyYmFnZUNvbGxlY3RvclRo\ncmVhZChTZXJ2ZXJDb25maWd1cmF0aW9uIGNvbmYsCiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICBmaW5hbCBMZWRnZXJDYWNoZSBsZWRnZXJD\nYWNoZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVudHJ5\nTG9nZ2VyIGVudHJ5TG9nZ2VyLAogICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgU25hcHNob3RNYXA8TG9uZywgQm9vbGVhbj4gYWN0aXZlTGVk\nZ2VycywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExlZGdl\nck1hbmFnZXIgbGVkZ2VyTWFuYWdlcikKICAgICAgICB0aHJvd3MgSU9FeGNl\ncHRpb24gewogICAgICAgIHN1cGVyKCJHYXJiYWdlQ29sbGVjdG9yVGhyZWFk\nIik7CgogICAgICAgIHRoaXMubGVkZ2VyQ2FjaGUgPSBsZWRnZXJDYWNoZTsK\nICAgICAgICB0aGlzLmVudHJ5TG9nZ2VyID0gZW50cnlMb2dnZXI7CiAgICAg\nICAgdGhpcy5hY3RpdmVMZWRnZXJzID0gYWN0aXZlTGVkZ2VyczsKCiAgICAg\nICAgdGhpcy5nY1dhaXRUaW1lID0gY29uZi5nZXRHY1dhaXRUaW1lKCk7CiAg\nICAgICAgdGhpcy5tYXhPdXRzdGFuZGluZ1JlcXVlc3RzID0gY29uZi5nZXRD\nb21wYWN0aW9uTWF4T3V0c3RhbmRpbmdSZXF1ZXN0cygpOwogICAgICAgIHRo\naXMuY29tcGFjdGlvblJhdGUgPSBjb25mLmdldENvbXBhY3Rpb25SYXRlKCk7\nCiAgICAgICAgdGhpcy5zY2FubmVyRmFjdG9yeSA9IG5ldyBDb21wYWN0aW9u\nU2Nhbm5lckZhY3RvcnkoKTsKICAgICAgICBlbnRyeUxvZ2dlci5hZGRMaXN0\nZW5lcih0aGlzLnNjYW5uZXJGYWN0b3J5KTsKCiAgICAgICAgdGhpcy5nYXJi\nYWdlQ2xlYW5lciA9IG5ldyBHYXJiYWdlQ29sbGVjdG9yLkdhcmJhZ2VDbGVh\nbmVyKCkgewogICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVi\nbGljIHZvaWQgY2xlYW4obG9uZyBsZWRnZXJJZCkgewogICAgICAgICAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBpZiAoTE9HLmlzRGVidWdF\nbmFibGVkKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgTE9HLmRlYnVn\nKCJkZWxldGUgbGVkZ2VyIDogIiArIGxlZGdlcklkKTsKICAgICAgICAgICAg\nICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgbGVkZ2VyQ2FjaGUuZGVs\nZXRlTGVkZ2VyKGxlZGdlcklkKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2gg\nKElPRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgICAgICBMT0cuZXJy\nb3IoIkV4Y2VwdGlvbiB3aGVuIGRlbGV0aW5nIHRoZSBsZWRnZXIgaW5kZXgg\nZmlsZSBvbiB0aGUgQm9va2llOiAiLCBlKTsKICAgICAgICAgICAgICAgIH0K\nICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIHRoaXMuZ2FyYmFn\nZUNvbGxlY3RvciA9IG5ldyBTY2FuQW5kQ29tcGFyZUdhcmJhZ2VDb2xsZWN0\nb3IobGVkZ2VyTWFuYWdlciwgYWN0aXZlTGVkZ2Vycyk7CgogICAgICAgIC8v\nIGNvbXBhY3Rpb24gcGFyYW1ldGVycwogICAgICAgIG1pbm9yQ29tcGFjdGlv\nblRocmVzaG9sZCA9IGNvbmYuZ2V0TWlub3JDb21wYWN0aW9uVGhyZXNob2xk\nKCk7CiAgICAgICAgbWlub3JDb21wYWN0aW9uSW50ZXJ2YWwgPSBjb25mLmdl\ndE1pbm9yQ29tcGFjdGlvbkludGVydmFsKCkgKiBTRUNPTkQ7CiAgICAgICAg\nbWFqb3JDb21wYWN0aW9uVGhyZXNob2xkID0gY29uZi5nZXRNYWpvckNvbXBh\nY3Rpb25UaHJlc2hvbGQoKTsKICAgICAgICBtYWpvckNvbXBhY3Rpb25JbnRl\ncnZhbCA9IGNvbmYuZ2V0TWFqb3JDb21wYWN0aW9uSW50ZXJ2YWwoKSAqIFNF\nQ09ORDsKCiAgICAgICAgaWYgKG1pbm9yQ29tcGFjdGlvbkludGVydmFsID4g\nMCAmJiBtaW5vckNvbXBhY3Rpb25UaHJlc2hvbGQgPiAwKSB7CiAgICAgICAg\nICAgIGlmIChtaW5vckNvbXBhY3Rpb25UaHJlc2hvbGQgPiAxLjBmKSB7CiAg\nICAgICAgICAgICAgICB0aHJvdyBuZXcgSU9FeGNlcHRpb24oIkludmFsaWQg\nbWlub3IgY29tcGFjdGlvbiB0aHJlc2hvbGQgIgogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICArIG1pbm9yQ29tcGFjdGlvblRocmVzaG9s\nZCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG1pbm9yQ29tcGFj\ndGlvbkludGVydmFsIDw9IGdjV2FpdFRpbWUpIHsKICAgICAgICAgICAgICAg\nIHRocm93IG5ldyBJT0V4Y2VwdGlvbigiVG9vIHNob3J0IG1pbm9yIGNvbXBh\nY3Rpb24gaW50ZXJ2YWwgOiAiCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICsgbWlub3JDb21wYWN0aW9uSW50ZXJ2YWwpOwogICAgICAg\nICAgICB9CiAgICAgICAgICAgIGVuYWJsZU1pbm9yQ29tcGFjdGlvbiA9IHRy\ndWU7CiAgICAgICAgfQoKICAgICAgICBpZiAobWFqb3JDb21wYWN0aW9uSW50\nZXJ2YWwgPiAwICYmIG1ham9yQ29tcGFjdGlvblRocmVzaG9sZCA+IDApIHsK\nICAgICAgICAgICAgaWYgKG1ham9yQ29tcGFjdGlvblRocmVzaG9sZCA+IDEu\nMGYpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlvbigi\nSW52YWxpZCBtYWpvciBjb21wYWN0aW9uIHRocmVzaG9sZCAiCiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgbWFqb3JDb21wYWN0aW9u\nVGhyZXNob2xkKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAobWFq\nb3JDb21wYWN0aW9uSW50ZXJ2YWwgPD0gZ2NXYWl0VGltZSkgewogICAgICAg\nICAgICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKCJUb28gc2hvcnQgbWFq\nb3IgY29tcGFjdGlvbiBpbnRlcnZhbCA6ICIKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgKyBtYWpvckNvbXBhY3Rpb25JbnRlcnZhbCk7\nCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZW5hYmxlTWFqb3JDb21wYWN0\naW9uID0gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIGlmIChlbmFibGVNaW5v\nckNvbXBhY3Rpb24gJiYgZW5hYmxlTWFqb3JDb21wYWN0aW9uKSB7CiAgICAg\nICAgICAgIGlmIChtaW5vckNvbXBhY3Rpb25JbnRlcnZhbCA+PSBtYWpvckNv\nbXBhY3Rpb25JbnRlcnZhbCB8fAogICAgICAgICAgICAgICAgbWlub3JDb21w\nYWN0aW9uVGhyZXNob2xkID49IG1ham9yQ29tcGFjdGlvblRocmVzaG9sZCkg\newogICAgICAgICAgICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKCJJbnZh\nbGlkIG1pbm9yL21ham9yIGNvbXBhY3Rpb24gc2V0dGluZ3MgOiBtaW5vciAo\nIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIG1pbm9y\nQ29tcGFjdGlvblRocmVzaG9sZCArICIsICIgKyBtaW5vckNvbXBhY3Rpb25J\nbnRlcnZhbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAr\nICIpLCBtYWpvciAoIiArIG1ham9yQ29tcGFjdGlvblRocmVzaG9sZCArICIs\nICIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBtYWpv\nckNvbXBhY3Rpb25JbnRlcnZhbCArICIpIik7CiAgICAgICAgICAgIH0KICAg\nICAgICB9CgogICAgICAgIExPRy5pbmZvKCJNaW5vciBDb21wYWN0aW9uIDog\nZW5hYmxlZD0iICsgZW5hYmxlTWlub3JDb21wYWN0aW9uICsgIiwgdGhyZXNo\nb2xkPSIKICAgICAgICAgICAgICAgKyBtaW5vckNvbXBhY3Rpb25UaHJlc2hv\nbGQgKyAiLCBpbnRlcnZhbD0iICsgbWlub3JDb21wYWN0aW9uSW50ZXJ2YWwp\nOwogICAgICAgIExPRy5pbmZvKCJNYWpvciBDb21wYWN0aW9uIDogZW5hYmxl\nZD0iICsgZW5hYmxlTWFqb3JDb21wYWN0aW9uICsgIiwgdGhyZXNob2xkPSIK\nICAgICAgICAgICAgICAgKyBtYWpvckNvbXBhY3Rpb25UaHJlc2hvbGQgKyAi\nLCBpbnRlcnZhbD0iICsgbWFqb3JDb21wYWN0aW9uSW50ZXJ2YWwpOwoKICAg\nICAgICBsYXN0TWlub3JDb21wYWN0aW9uVGltZSA9IGxhc3RNYWpvckNvbXBh\nY3Rpb25UaW1lID0gTWF0aFV0aWxzLm5vdygpOwogICAgfQoKICAgIHB1Ymxp\nYyBzeW5jaHJvbml6ZWQgdm9pZCBlbmFibGVGb3JjZUdDKCkgewogICAgICAg\nIGlmIChmb3JjZUdhcmJhZ2VDb2xsZWN0aW9uLmNvbXBhcmVBbmRTZXQoZmFs\nc2UsIHRydWUpKSB7CiAgICAgICAgICAgIExPRy5pbmZvKCJGb3JjZWQgZ2Fy\nYmFnZSBjb2xsZWN0aW9uIHRyaWdnZXJlZCBieSB0aHJlYWQ6IHt9IiwgVGhy\nZWFkLmN1cnJlbnRUaHJlYWQoKS5nZXROYW1lKCkpOwogICAgICAgICAgICBu\nb3RpZnkoKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZvaWQgZGlz\nYWJsZUZvcmNlR0MoKSB7CiAgICAgICAgaWYgKGZvcmNlR2FyYmFnZUNvbGxl\nY3Rpb24uY29tcGFyZUFuZFNldCh0cnVlLCBmYWxzZSkpIHsKICAgICAgICAg\nICAgTE9HLmluZm8oInt9IGRpc2FibGVkIGZvcmNlIGdhcmJhZ2UgY29sbGVj\ndGlvbiBzaW5jZSBib29raWUgaGFzIGVub3VnaCBzcGFjZSBub3cuIiwgVGhy\nZWFkCiAgICAgICAgICAgICAgICAgICAgLmN1cnJlbnRUaHJlYWQoKS5nZXRO\nYW1lKCkpOwogICAgICAgIH0KICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1\nYmxpYyB2b2lkIHJ1bigpIHsKICAgICAgICB3aGlsZSAocnVubmluZykgewog\nICAgICAgICAgICBzeW5jaHJvbml6ZWQgKHRoaXMpIHsKICAgICAgICAgICAg\nICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgd2FpdChnY1dhaXRUaW1l\nKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEludGVycnVwdGVkRXhjZXB0\naW9uIGUpIHsKICAgICAgICAgICAgICAgICAgICBUaHJlYWQuY3VycmVudFRo\ncmVhZCgpLmludGVycnVwdCgpOwogICAgICAgICAgICAgICAgICAgIGNvbnRp\nbnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAg\nICAgIGJvb2xlYW4gZm9yY2UgPSBmb3JjZUdhcmJhZ2VDb2xsZWN0aW9uLmdl\ndCgpOwogICAgICAgICAgICBpZiAoZm9yY2UpIHsKICAgICAgICAgICAgICAg\nIExPRy5pbmZvKCJHYXJiYWdlIGNvbGxlY3RvciB0aHJlYWQgZm9yY2VkIHRv\nIHBlcmZvcm0gR0MgYmVmb3JlIGV4cGlyeSBvZiB3YWl0IHRpbWUuIik7CiAg\nICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIEV4dHJhY3QgYWxsIG9mIHRo\nZSBsZWRnZXIgSUQncyB0aGF0IGNvbXByaXNlIGFsbCBvZiB0aGUgZW50cnkg\nbG9ncwogICAgICAgICAgICAvLyAoZXhjZXB0IGZvciB0aGUgY3VycmVudCBu\nZXcgb25lIHdoaWNoIGlzIHN0aWxsIGJlaW5nIHdyaXR0ZW4gdG8pLgogICAg\nICAgICAgICBlbnRyeUxvZ01ldGFNYXAgPSBleHRyYWN0TWV0YUZyb21FbnRy\neUxvZ3MoZW50cnlMb2dNZXRhTWFwKTsKCiAgICAgICAgICAgIC8vIGdjIGlu\nYWN0aXZlL2RlbGV0ZWQgbGVkZ2VycwogICAgICAgICAgICBkb0djTGVkZ2Vy\ncygpOwoKICAgICAgICAgICAgLy8gZ2MgZW50cnkgbG9ncwogICAgICAgICAg\nICBkb0djRW50cnlMb2dzKCk7CgogICAgICAgICAgICBsb25nIGN1clRpbWUg\nPSBNYXRoVXRpbHMubm93KCk7CiAgICAgICAgICAgIGlmIChmb3JjZSB8fCAo\nZW5hYmxlTWFqb3JDb21wYWN0aW9uICYmCiAgICAgICAgICAgICAgICBjdXJU\naW1lIC0gbGFzdE1ham9yQ29tcGFjdGlvblRpbWUgPiBtYWpvckNvbXBhY3Rp\nb25JbnRlcnZhbCkpIHsKICAgICAgICAgICAgICAgIC8vIGVudGVyIG1ham9y\nIGNvbXBhY3Rpb24KICAgICAgICAgICAgICAgIExPRy5pbmZvKCJFbnRlciBt\nYWpvciBjb21wYWN0aW9uIik7CiAgICAgICAgICAgICAgICBkb0NvbXBhY3RF\nbnRyeUxvZ3MobWFqb3JDb21wYWN0aW9uVGhyZXNob2xkKTsKICAgICAgICAg\nICAgICAgIGxhc3RNYWpvckNvbXBhY3Rpb25UaW1lID0gTWF0aFV0aWxzLm5v\ndygpOwogICAgICAgICAgICAgICAgLy8gYWxzbyBtb3ZlIG1pbm9yIGNvbXBh\nY3Rpb24gdGltZQogICAgICAgICAgICAgICAgbGFzdE1pbm9yQ29tcGFjdGlv\nblRpbWUgPSBsYXN0TWFqb3JDb21wYWN0aW9uVGltZTsKICAgICAgICAgICAg\nICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAo\nZm9yY2UgfHwgKGVuYWJsZU1pbm9yQ29tcGFjdGlvbiAmJgogICAgICAgICAg\nICAgICAgY3VyVGltZSAtIGxhc3RNaW5vckNvbXBhY3Rpb25UaW1lID4gbWlu\nb3JDb21wYWN0aW9uSW50ZXJ2YWwpKSB7CiAgICAgICAgICAgICAgICAvLyBl\nbnRlciBtaW5vciBjb21wYWN0aW9uCiAgICAgICAgICAgICAgICBMT0cuaW5m\nbygiRW50ZXIgbWlub3IgY29tcGFjdGlvbiIpOwogICAgICAgICAgICAgICAg\nZG9Db21wYWN0RW50cnlMb2dzKG1pbm9yQ29tcGFjdGlvblRocmVzaG9sZCk7\nCiAgICAgICAgICAgICAgICBsYXN0TWlub3JDb21wYWN0aW9uVGltZSA9IE1h\ndGhVdGlscy5ub3coKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmb3Jj\nZUdhcmJhZ2VDb2xsZWN0aW9uLnNldChmYWxzZSk7CiAgICAgICAgfQogICAg\nICAgIExPRy5pbmZvKCJHYXJiYWdlQ29sbGVjdG9yVGhyZWFkIGV4aXRlZCBs\nb29wISIpOwogICAgfQoKICAgIC8qKgogICAgICogRG8gZ2FyYmFnZSBjb2xs\nZWN0aW9uIGxlZGdlciBpbmRleCBmaWxlcwogICAgICovCiAgICBwcml2YXRl\nIHZvaWQgZG9HY0xlZGdlcnMoKSB7CiAgICAgICAgZ2FyYmFnZUNvbGxlY3Rv\nci5nYyhnYXJiYWdlQ2xlYW5lcik7CiAgICB9CgogICAgLyoqCiAgICAgKiBH\nYXJiYWdlIGNvbGxlY3QgdGhvc2UgZW50cnkgbG9nZ2VycyB3aGljaCBhcmUg\nbm90IGFzc29jaWF0ZWQgd2l0aCBhbnkgYWN0aXZlIGxlZGdlcnMKICAgICAq\nLwogICAgcHJpdmF0ZSB2b2lkIGRvR2NFbnRyeUxvZ3MoKSB7CiAgICAgICAg\nLy8gTG9vcCB0aHJvdWdoIGFsbCBvZiB0aGUgZW50cnkgbG9ncyBhbmQgcmVt\nb3ZlIHRoZSBub24tYWN0aXZlIGxlZGdlcnMuCiAgICAgICAgZm9yIChMb25n\nIGVudHJ5TG9nSWQgOiBlbnRyeUxvZ01ldGFNYXAua2V5U2V0KCkpIHsKICAg\nICAgICAgICAgRW50cnlMb2dNZXRhZGF0YSBtZXRhID0gZW50cnlMb2dNZXRh\nTWFwLmdldChlbnRyeUxvZ0lkKTsKICAgICAgICAgICAgZm9yIChMb25nIGVu\ndHJ5TG9nTGVkZ2VyIDogbWV0YS5sZWRnZXJzTWFwLmtleVNldCgpKSB7CiAg\nICAgICAgICAgICAgICAvLyBSZW1vdmUgdGhlIGVudHJ5IGxvZyBsZWRnZXIg\nZnJvbSB0aGUgc2V0IGlmIGl0IGlzbid0IGFjdGl2ZS4KICAgICAgICAgICAg\nICAgIGlmICghYWN0aXZlTGVkZ2Vycy5jb250YWluc0tleShlbnRyeUxvZ0xl\nZGdlcikpIHsKICAgICAgICAgICAgICAgICAgICBtZXRhLnJlbW92ZUxlZGdl\ncihlbnRyeUxvZ0xlZGdlcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAg\nICAgIH0KICAgICAgICAgICAgaWYgKG1ldGEuaXNFbXB0eSgpKSB7CiAgICAg\nICAgICAgICAgICAvLyBUaGlzIG1lYW5zIHRoZSBlbnRyeSBsb2cgaXMgbm90\nIGFzc29jaWF0ZWQgd2l0aCBhbnkgYWN0aXZlIGxlZGdlcnMgYW55bW9yZS4K\nICAgICAgICAgICAgICAgIC8vIFdlIGNhbiByZW1vdmUgdGhpcyBlbnRyeSBs\nb2cgZmlsZSBub3cuCiAgICAgICAgICAgICAgICBMT0cuaW5mbygiRGVsZXRp\nbmcgZW50cnlMb2dJZCAiICsgZW50cnlMb2dJZCArICIgYXMgaXQgaGFzIG5v\nIGFjdGl2ZSBsZWRnZXJzISIpOwogICAgICAgICAgICAgICAgcmVtb3ZlRW50\ncnlMb2coZW50cnlMb2dJZCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAg\nICB9CgogICAgLyoqCiAgICAgKiBDb21wYWN0IGVudHJ5IGxvZ3MgaWYgbmVj\nZXNzYXJ5LgogICAgICoKICAgICAqIDxwPgogICAgICogQ29tcGFjdGlvbiB3\naWxsIGJlIGV4ZWN1dGVkIGZyb20gbG93IHVudXNlZCBzcGFjZSB0byBoaWdo\nIHVudXNlZCBzcGFjZS4KICAgICAqIFRob3NlIGVudHJ5IGxvZyBmaWxlcyB3\naG9zZSByZW1haW5pbmcgc2l6ZSBwZXJjZW50YWdlIGlzIGhpZ2hlciB0aGFu\nIHRocmVzaG9sZAogICAgICogd291bGQgbm90IGJlIGNvbXBhY3RlZC4KICAg\nICAqIDwvcD4KICAgICAqLwogICAgQFZpc2libGVGb3JUZXN0aW5nCiAgICB2\nb2lkIGRvQ29tcGFjdEVudHJ5TG9ncyhkb3VibGUgdGhyZXNob2xkKSB7CiAg\nICAgICAgTE9HLmluZm8oIkRvIGNvbXBhY3Rpb24gdG8gY29tcGFjdCB0aG9z\nZSBmaWxlcyBsb3dlciB0aGFuICIgKyB0aHJlc2hvbGQpOwogICAgICAgIC8v\nIHNvcnQgdGhlIGxlZGdlciBtZXRhIGJ5IG9jY3VwaWVkIHVudXNlZCBzcGFj\nZQogICAgICAgIENvbXBhcmF0b3I8RW50cnlMb2dNZXRhZGF0YT4gc2l6ZUNv\nbXBhcmF0b3IgPSBuZXcgQ29tcGFyYXRvcjxFbnRyeUxvZ01ldGFkYXRhPigp\nIHsKICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyBp\nbnQgY29tcGFyZShFbnRyeUxvZ01ldGFkYXRhIG0xLCBFbnRyeUxvZ01ldGFk\nYXRhIG0yKSB7CiAgICAgICAgICAgICAgICBsb25nIHVudXNlZFNpemUxID0g\nbTEudG90YWxTaXplIC0gbTEucmVtYWluaW5nU2l6ZTsKICAgICAgICAgICAg\nICAgIGxvbmcgdW51c2VkU2l6ZTIgPSBtMi50b3RhbFNpemUgLSBtMi5yZW1h\naW5pbmdTaXplOwogICAgICAgICAgICAgICAgaWYgKHVudXNlZFNpemUxID4g\ndW51c2VkU2l6ZTIpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7\nCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHVudXNlZFNpemUxIDwgdW51\nc2VkU2l6ZTIpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTsKICAg\nICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcmV0\ndXJuIDA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAg\nICB9OwogICAgICAgIExpc3Q8RW50cnlMb2dNZXRhZGF0YT4gbG9nc1RvQ29t\ncGFjdCA9IG5ldyBBcnJheUxpc3Q8RW50cnlMb2dNZXRhZGF0YT4oKTsKICAg\nICAgICBsb2dzVG9Db21wYWN0LmFkZEFsbChlbnRyeUxvZ01ldGFNYXAudmFs\ndWVzKCkpOwogICAgICAgIENvbGxlY3Rpb25zLnNvcnQobG9nc1RvQ29tcGFj\ndCwgc2l6ZUNvbXBhcmF0b3IpOwogICAgICAgIExpc3Q8TG9uZz4gdG9SZW1v\ndmUgPSBuZXcgQXJyYXlMaXN0PExvbmc+KCk7CgogICAgICAgIGZvciAoRW50\ncnlMb2dNZXRhZGF0YSBtZXRhIDogbG9nc1RvQ29tcGFjdCkgewogICAgICAg\nICAgICBpZiAobWV0YS5nZXRVc2FnZSgpID49IHRocmVzaG9sZCkgewogICAg\nICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAg\nTE9HLmRlYnVnKCJDb21wYWN0aW5nIGVudHJ5IGxvZyB7fSBiZWxvdyB0aHJl\nc2hvbGQge30uIiwgbWV0YS5lbnRyeUxvZ0lkLCB0aHJlc2hvbGQpOwogICAg\nICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29tcGFjdEVudHJ5TG9n\nKHNjYW5uZXJGYWN0b3J5LCBtZXRhKTsKICAgICAgICAgICAgICAgIHRvUmVt\nb3ZlLmFkZChtZXRhLmVudHJ5TG9nSWQpOwogICAgICAgICAgICB9IGNhdGNo\nIChMZWRnZXJEaXJzTWFuYWdlci5Ob1dyaXRhYmxlTGVkZ2VyRGlyRXhjZXB0\naW9uIG53bGRlKSB7CiAgICAgICAgICAgICAgICBMT0cud2FybigiTm8gd3Jp\ndGFibGUgbGVkZ2VyIGRpcmVjdG9yeSBhdmFpbGFibGUsIGFib3J0aW5nIGNv\nbXBhY3Rpb24iLCBud2xkZSk7CiAgICAgICAgICAgICAgICBicmVhazsKICAg\nICAgICAgICAgfSBjYXRjaCAoSU9FeGNlcHRpb24gaW9lKSB7CiAgICAgICAg\nICAgICAgICAvLyBpZiBjb21wYWN0IGVudHJ5IGxvZyB0aHJvd3MgSU9FeGNl\ncHRpb24sIHdlIGRvbid0IHdhbnQgdG8gcmVtb3ZlIHRoYXQKICAgICAgICAg\nICAgICAgIC8vIGVudHJ5IGxvZy4gaG93ZXZlciwgaWYgc29tZSBlbnRyaWVz\nIGZyb20gdGhhdCBsb2cgaGF2ZSBiZWVuIHJlYWRkZWQKICAgICAgICAgICAg\nICAgIC8vIHRvIHRoZSBlbnRyeSBsb2csIGFuZCB0aGUgb2Zmc2V0IHVwZGF0\nZWQsIGl0J3Mgb2sgdG8gZmx1c2ggdGhhdAogICAgICAgICAgICAgICAgTE9H\nLmVycm9yKCJFcnJvciBjb21wYWN0aW5nIGVudHJ5IGxvZy4gTG9nIHdvbid0\nIGJlIGRlbGV0ZWQiLCBpb2UpOwogICAgICAgICAgICB9CgogICAgICAgICAg\nICBpZiAoIXJ1bm5pbmcpIHsgLy8gaWYgZ2MgdGhyZWFkIGlzIG5vdCBydW5u\naW5nLCBzdG9wIGNvbXBhY3Rpb24KICAgICAgICAgICAgICAgIHJldHVybjsK\nICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAg\nICAgICAvLyBjb21wYWN0aW9uIGZpbmlzaGVkLCBmbHVzaCBhbnkgb3V0c3Rh\nbmRpbmcgb2Zmc2V0cwogICAgICAgICAgICBzY2FubmVyRmFjdG9yeS5mbHVz\naCgpOwogICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGlvZSkgewogICAg\nICAgICAgICBMT0cuZXJyb3IoIkNhbm5vdCBmbHVzaCBjb21wYWN0ZWQgZW50\ncmllcywgc2tpcCByZW1vdmFsIiwgaW9lKTsKICAgICAgICAgICAgcmV0dXJu\nOwogICAgICAgIH0KCiAgICAgICAgLy8gb2Zmc2V0cyBoYXZlIGJlZW4gZmx1\nc2hlZCwgaXRzIG5vdyBzYWZlIHRvIHJlbW92ZSB0aGUgb2xkIGVudHJ5bG9n\ncwogICAgICAgIGZvciAoTG9uZyBsIDogdG9SZW1vdmUpIHsKICAgICAgICAg\nICAgcmVtb3ZlRW50cnlMb2cobCk7CiAgICAgICAgfQogICAgfQoKICAgIC8q\nKgogICAgICogU2h1dGRvd24gdGhlIGdhcmJhZ2UgY29sbGVjdG9yIHRocmVh\nZC4KICAgICAqCiAgICAgKiBAdGhyb3dzIEludGVycnVwdGVkRXhjZXB0aW9u\nIGlmIHRoZXJlIGlzIGFuIGV4Y2VwdGlvbiBzdG9wcGluZyBnYyB0aHJlYWQu\nCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNodXRkb3duKCkgdGhyb3dzIElu\ndGVycnVwdGVkRXhjZXB0aW9uIHsKICAgICAgICB0aGlzLnJ1bm5pbmcgPSBm\nYWxzZTsKICAgICAgICBMT0cuaW5mbygiU2h1dHRpbmcgZG93biBHYXJiYWdl\nQ29sbGVjdG9yVGhyZWFkIik7CiAgICAgICAgaWYgKGNvbXBhY3RpbmcuY29t\ncGFyZUFuZFNldChmYWxzZSwgdHJ1ZSkpIHsKICAgICAgICAgICAgLy8gaWYg\nc2V0dGluZyBjb21wYWN0aW5nIGZsYWcgc3VjY2VlZCwgbWVhbnMgZ2NUaHJl\nYWQgaXMgbm90IGNvbXBhY3Rpbmcgbm93CiAgICAgICAgICAgIC8vIGl0IGlz\nIHNhZmUgdG8gaW50ZXJydXB0IGl0c2VsZiBub3cKICAgICAgICAgICAgdGhp\ncy5pbnRlcnJ1cHQoKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5qb2luKCk7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBSZW1vdmUgZW50cnkgbG9nLgogICAg\nICoKICAgICAqIEBwYXJhbSBlbnRyeUxvZ0lkCiAgICAgKiAgICAgICAgICBF\nbnRyeSBMb2cgRmlsZSBJZAogICAgICovCiAgICBwcml2YXRlIHZvaWQgcmVt\nb3ZlRW50cnlMb2cobG9uZyBlbnRyeUxvZ0lkKSB7CiAgICAgICAgLy8gcmVt\nb3ZlIGVudHJ5IGxvZyBmaWxlIHN1Y2Nlc3NmdWxseQogICAgICAgIGlmIChl\nbnRyeUxvZ2dlci5yZW1vdmVFbnRyeUxvZyhlbnRyeUxvZ0lkKSkgewogICAg\nICAgICAgICBlbnRyeUxvZ01ldGFNYXAucmVtb3ZlKGVudHJ5TG9nSWQpOwog\nICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIENvbXBhY3QgYW4gZW50\ncnkgbG9nLgogICAgICoKICAgICAqIEBwYXJhbSBlbnRyeUxvZ0lkCiAgICAg\nKiAgICAgICAgICBFbnRyeSBMb2cgRmlsZSBJZAogICAgICovCiAgICBwcm90\nZWN0ZWQgdm9pZCBjb21wYWN0RW50cnlMb2coQ29tcGFjdGlvblNjYW5uZXJG\nYWN0b3J5IHNjYW5uZXJGYWN0b3J5LAogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgIEVudHJ5TG9nTWV0YWRhdGEgZW50cnlMb2dNZXRhKSB0\naHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgIC8vIFNpbWlsYXIgd2l0aCBT\neW5jIFRocmVhZAogICAgICAgIC8vIHRyeSB0byBtYXJrIGNvbXBhY3Rpbmcg\nZmxhZyB0byBtYWtlIHN1cmUgaXQgd291bGQgbm90IGJlIGludGVycnVwdGVk\nCiAgICAgICAgLy8gYnkgc2h1dGRvd24gZHVyaW5nIGNvbXBhY3Rpb24uIG90\naGVyd2lzZSBpdCB3aWxsIHJlY2VpdmUKICAgICAgICAvLyBDbG9zZWRCeUlu\ndGVycnVwdEV4Y2VwdGlvbiB3aGljaCBtYXkgY2F1c2UgaW5kZXggZmlsZSAm\nIGVudHJ5IGxvZ2dlcgogICAgICAgIC8vIGNsb3NlZCBhbmQgY29ycnVwdGVk\nLgogICAgICAgIGlmICghY29tcGFjdGluZy5jb21wYXJlQW5kU2V0KGZhbHNl\nLCB0cnVlKSkgewogICAgICAgICAgICAvLyBzZXQgY29tcGFjdGluZyBmbGFn\nIGZhaWxlZCwgbWVhbnMgY29tcGFjdGluZyBpcyB0cnVlIG5vdwogICAgICAg\nICAgICAvLyBpbmRpY2F0ZXMgYW5vdGhlciB0aHJlYWQgd2FudHMgdG8gaW50\nZXJydXB0IGdjIHRocmVhZCB0byBleGl0CiAgICAgICAgICAgIHJldHVybjsK\nICAgICAgICB9CgogICAgICAgIExPRy5pbmZvKCJDb21wYWN0aW5nIGVudHJ5\nIGxvZyA6IHt9IiwgZW50cnlMb2dNZXRhLmVudHJ5TG9nSWQpOwoKICAgICAg\nICB0cnkgewogICAgICAgICAgICBlbnRyeUxvZ2dlci5zY2FuRW50cnlMb2co\nZW50cnlMb2dNZXRhLmVudHJ5TG9nSWQsCiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICBzY2FubmVyRmFjdG9yeS5uZXdTY2FubmVyKGVu\ndHJ5TG9nTWV0YSkpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAg\nIC8vIGNsZWFyIGNvbXBhY3RpbmcgZmxhZwogICAgICAgICAgICBjb21wYWN0\naW5nLnNldChmYWxzZSk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAg\nICogUmVjb3JkcyB0aGUgdG90YWwgc2l6ZSwgcmVtYWluaW5nIHNpemUgYW5k\nIHRoZSBzZXQgb2YgbGVkZ2VycyB0aGF0IGNvbXByaXNlIGEgZW50cnkgbG9n\nLgogICAgICovCiAgICBzdGF0aWMgY2xhc3MgRW50cnlMb2dNZXRhZGF0YSB7\nCiAgICAgICAgbG9uZyBlbnRyeUxvZ0lkOwogICAgICAgIGxvbmcgdG90YWxT\naXplOwogICAgICAgIGxvbmcgcmVtYWluaW5nU2l6ZTsKICAgICAgICBDb25j\ndXJyZW50SGFzaE1hcDxMb25nLCBMb25nPiBsZWRnZXJzTWFwOwoKICAgICAg\nICBwdWJsaWMgRW50cnlMb2dNZXRhZGF0YShsb25nIGxvZ0lkKSB7CiAgICAg\nICAgICAgIHRoaXMuZW50cnlMb2dJZCA9IGxvZ0lkOwoKICAgICAgICAgICAg\ndG90YWxTaXplID0gcmVtYWluaW5nU2l6ZSA9IDA7CiAgICAgICAgICAgIGxl\nZGdlcnNNYXAgPSBuZXcgQ29uY3VycmVudEhhc2hNYXA8TG9uZywgTG9uZz4o\nKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIGFkZExlZGdlclNp\nemUobG9uZyBsZWRnZXJJZCwgbG9uZyBzaXplKSB7CiAgICAgICAgICAgIHRv\ndGFsU2l6ZSArPSBzaXplOwogICAgICAgICAgICByZW1haW5pbmdTaXplICs9\nIHNpemU7CiAgICAgICAgICAgIExvbmcgbGVkZ2VyU2l6ZSA9IGxlZGdlcnNN\nYXAuZ2V0KGxlZGdlcklkKTsKICAgICAgICAgICAgaWYgKG51bGwgPT0gbGVk\nZ2VyU2l6ZSkgewogICAgICAgICAgICAgICAgbGVkZ2VyU2l6ZSA9IDBMOwog\nICAgICAgICAgICB9CiAgICAgICAgICAgIGxlZGdlclNpemUgKz0gc2l6ZTsK\nICAgICAgICAgICAgbGVkZ2Vyc01hcC5wdXQobGVkZ2VySWQsIGxlZGdlclNp\nemUpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgcmVtb3ZlTGVk\nZ2VyKGxvbmcgbGVkZ2VySWQpIHsKICAgICAgICAgICAgTG9uZyBzaXplID0g\nbGVkZ2Vyc01hcC5yZW1vdmUobGVkZ2VySWQpOwogICAgICAgICAgICBpZiAo\nbnVsbCA9PSBzaXplKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAg\nICAgICAgIH0KICAgICAgICAgICAgcmVtYWluaW5nU2l6ZSAtPSBzaXplOwog\nICAgICAgIH0KCiAgICAgICAgcHVibGljIGJvb2xlYW4gY29udGFpbnNMZWRn\nZXIobG9uZyBsZWRnZXJJZCkgewogICAgICAgICAgICByZXR1cm4gbGVkZ2Vy\nc01hcC5jb250YWluc0tleShsZWRnZXJJZCk7CiAgICAgICAgfQoKICAgICAg\nICBwdWJsaWMgZG91YmxlIGdldFVzYWdlKCkgewogICAgICAgICAgICBpZiAo\ndG90YWxTaXplID09IDBMKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gMC4w\nZjsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gKGRvdWJsZSly\nZW1haW5pbmdTaXplIC8gdG90YWxTaXplOwogICAgICAgIH0KCiAgICAgICAg\ncHVibGljIGJvb2xlYW4gaXNFbXB0eSgpIHsKICAgICAgICAgICAgcmV0dXJu\nIGxlZGdlcnNNYXAuaXNFbXB0eSgpOwogICAgICAgIH0KCiAgICAgICAgQE92\nZXJyaWRlCiAgICAgICAgcHVibGljIFN0cmluZyB0b1N0cmluZygpIHsKICAg\nICAgICAgICAgU3RyaW5nQnVpbGRlciBzYiA9IG5ldyBTdHJpbmdCdWlsZGVy\nKCk7CiAgICAgICAgICAgIHNiLmFwcGVuZCgieyB0b3RhbFNpemUgPSAiKS5h\ncHBlbmQodG90YWxTaXplKS5hcHBlbmQoIiwgcmVtYWluaW5nU2l6ZSA9ICIp\nCiAgICAgICAgICAgICAgLmFwcGVuZChyZW1haW5pbmdTaXplKS5hcHBlbmQo\nIiwgbGVkZ2Vyc01hcCA9ICIpLmFwcGVuZChsZWRnZXJzTWFwKS5hcHBlbmQo\nIiB9Iik7CiAgICAgICAgICAgIHJldHVybiBzYi50b1N0cmluZygpOwogICAg\nICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEEgc2Nhbm5lciB1c2VkIHRv\nIGV4dHJhY3QgZW50cnkgbG9nIG1ldGEgZnJvbSBlbnRyeSBsb2cgZmlsZXMu\nCiAgICAgKi8KICAgIHN0YXRpYyBjbGFzcyBFeHRyYWN0aW9uU2Nhbm5lciBp\nbXBsZW1lbnRzIEVudHJ5TG9nU2Nhbm5lciB7CiAgICAgICAgRW50cnlMb2dN\nZXRhZGF0YSBtZXRhOwoKICAgICAgICBwdWJsaWMgRXh0cmFjdGlvblNjYW5u\nZXIoRW50cnlMb2dNZXRhZGF0YSBtZXRhKSB7CiAgICAgICAgICAgIHRoaXMu\nbWV0YSA9IG1ldGE7CiAgICAgICAgfQoKICAgICAgICBAT3ZlcnJpZGUKICAg\nICAgICBwdWJsaWMgYm9vbGVhbiBhY2NlcHQobG9uZyBsZWRnZXJJZCkgewog\nICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgQE92\nZXJyaWRlCiAgICAgICAgcHVibGljIHZvaWQgcHJvY2Vzcyhsb25nIGxlZGdl\ncklkLCBsb25nIG9mZnNldCwgQnl0ZUJ1ZmZlciBlbnRyeSkgewogICAgICAg\nICAgICAvLyBhZGQgbmV3IGVudHJ5IHNpemUgb2YgYSBsZWRnZXIgdG8gZW50\ncnkgbG9nIG1ldGEKICAgICAgICAgICAgbWV0YS5hZGRMZWRnZXJTaXplKGxl\nZGdlcklkLCBlbnRyeS5saW1pdCgpICsgNCk7CiAgICAgICAgfQogICAgfQoK\nICAgIC8qKgogICAgICogTWV0aG9kIHRvIHJlYWQgaW4gYWxsIG9mIHRoZSBl\nbnRyeSBsb2dzICh0aG9zZSB0aGF0IHdlIGhhdmVuJ3QgZG9uZSBzbyB5ZXQp\nLAogICAgICogYW5kIGZpbmQgdGhlIHNldCBvZiBsZWRnZXIgSUQncyB0aGF0\nIG1ha2UgdXAgZWFjaCBlbnRyeSBsb2cgZmlsZS4KICAgICAqCiAgICAgKiBA\ncGFyYW0gZW50cnlMb2dNZXRhTWFwCiAgICAgKiAgICAgICAgICBFeGlzdGlu\nZyBFbnRyeUxvZ3MgdG8gTWV0YQogICAgICogQHRocm93cyBJT0V4Y2VwdGlv\nbgogICAgICovCiAgICBwcm90ZWN0ZWQgTWFwPExvbmcsIEVudHJ5TG9nTWV0\nYWRhdGE+IGV4dHJhY3RNZXRhRnJvbUVudHJ5TG9ncyhNYXA8TG9uZywgRW50\ncnlMb2dNZXRhZGF0YT4gZW50cnlMb2dNZXRhTWFwKSB7CiAgICAgICAgLy8g\nRXh0cmFjdCBpdCBmb3IgZXZlcnkgZW50cnkgbG9nIGV4Y2VwdCBmb3IgdGhl\nIGN1cnJlbnQgb25lLgogICAgICAgIC8vIEVudHJ5IExvZyBJRCdzIGFyZSBq\ndXN0IGEgbG9uZyB2YWx1ZSB0aGF0IHN0YXJ0cyBhdCAwIGFuZCBpbmNyZW1l\nbnRzCiAgICAgICAgLy8gYnkgMSB3aGVuIHRoZSBsb2cgZmlsbHMgdXAgYW5k\nIHdlIHJvbGwgdG8gYSBuZXcgb25lLgogICAgICAgIGxvbmcgY3VyTG9nSWQg\nPSBlbnRyeUxvZ2dlci5nZXRMZWFzdFVuZmx1c2hlZExvZ0lkKCk7CiAgICAg\nICAgYm9vbGVhbiBoYXNFeGNlcHRpb25XaGVuU2NhbiA9IGZhbHNlOwogICAg\nICAgIGZvciAobG9uZyBlbnRyeUxvZ0lkID0gc2Nhbm5lZExvZ0lkOyBlbnRy\neUxvZ0lkIDwgY3VyTG9nSWQ7IGVudHJ5TG9nSWQrKykgewogICAgICAgICAg\nICAvLyBDb21iIHRoZSBjdXJyZW50IGVudHJ5IGxvZyBmaWxlIGlmIGl0IGhh\ncyBub3QgYWxyZWFkeSBiZWVuIGV4dHJhY3RlZC4KICAgICAgICAgICAgaWYg\nKGVudHJ5TG9nTWV0YU1hcC5jb250YWluc0tleShlbnRyeUxvZ0lkKSkgewog\nICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAg\nICAgICAgIC8vIGNoZWNrIHdoZXRoZXIgbG9nIGZpbGUgZXhpc3RzIG9yIG5v\ndAogICAgICAgICAgICAvLyBpZiBpdCBkb2Vzbid0IGV4aXN0LCB0aGlzIGxv\nZyBmaWxlIG1pZ2h0IGhhdmUgYmVlbiBnYXJiYWdlIGNvbGxlY3RlZC4KICAg\nICAgICAgICAgaWYgKCFlbnRyeUxvZ2dlci5sb2dFeGlzdHMoZW50cnlMb2dJ\nZCkpIHsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9\nCgogICAgICAgICAgICBMT0cuaW5mbygiRXh0cmFjdGluZyBlbnRyeSBsb2cg\nbWV0YSBmcm9tIGVudHJ5TG9nSWQ6IHt9IiwgZW50cnlMb2dJZCk7CgogICAg\nICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgLy8gUmVhZCB0aHJvdWdo\nIHRoZSBlbnRyeSBsb2cgZmlsZSBhbmQgZXh0cmFjdCB0aGUgZW50cnkgbG9n\nIG1ldGEKICAgICAgICAgICAgICAgIEVudHJ5TG9nTWV0YWRhdGEgZW50cnlM\nb2dNZXRhID0gZXh0cmFjdE1ldGFGcm9tRW50cnlMb2coZW50cnlMb2dnZXIs\nIGVudHJ5TG9nSWQpOwogICAgICAgICAgICAgICAgZW50cnlMb2dNZXRhTWFw\nLnB1dChlbnRyeUxvZ0lkLCBlbnRyeUxvZ01ldGEpOwogICAgICAgICAgICB9\nIGNhdGNoIChJT0V4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAgICBoYXNF\neGNlcHRpb25XaGVuU2NhbiA9IHRydWU7CiAgICAgICAgICAgICAgICBMT0cu\nd2FybigiUHJlbWF0dXJlIGV4Y2VwdGlvbiB3aGVuIHByb2Nlc3NpbmcgIiAr\nIGVudHJ5TG9nSWQgKwogICAgICAgICAgICAgICAgICAgICAgICAgIiByZWNv\ndmVyeSB3aWxsIHRha2UgY2FyZSBvZiB0aGUgcHJvYmxlbSIsIGUpOwogICAg\nICAgICAgICB9CgogICAgICAgICAgICAvLyBpZiBzY2FuIGZhaWxlZCBvbiBz\nb21lIGVudHJ5IGxvZywgd2UgZG9uJ3QgbW92ZSAnc2Nhbm5lZExvZ0lkJyB0\nbyBuZXh0IGlkCiAgICAgICAgICAgIC8vIGlmIHNjYW4gc3VjY2VlZCwgd2Ug\nZG9uJ3QgbmVlZCB0byBzY2FuIGl0IGFnYWluIGR1cmluZyBuZXh0IGdjIHJ1\nbiwKICAgICAgICAgICAgLy8gd2UgbW92ZSAnc2Nhbm5lZExvZ0lkJyB0byBu\nZXh0IGlkCiAgICAgICAgICAgIGlmICghaGFzRXhjZXB0aW9uV2hlblNjYW4p\nIHsKICAgICAgICAgICAgICAgICsrc2Nhbm5lZExvZ0lkOwogICAgICAgICAg\nICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBlbnRyeUxvZ01ldGFNYXA7\nCiAgICB9CgogICAgc3RhdGljIEVudHJ5TG9nTWV0YWRhdGEgZXh0cmFjdE1l\ndGFGcm9tRW50cnlMb2coRW50cnlMb2dnZXIgZW50cnlMb2dnZXIsIGxvbmcg\nZW50cnlMb2dJZCkKICAgICAgICAgICAgdGhyb3dzIElPRXhjZXB0aW9uIHsK\nICAgICAgICBFbnRyeUxvZ01ldGFkYXRhIGVudHJ5TG9nTWV0YSA9IG5ldyBF\nbnRyeUxvZ01ldGFkYXRhKGVudHJ5TG9nSWQpOwogICAgICAgIEV4dHJhY3Rp\nb25TY2FubmVyIHNjYW5uZXIgPSBuZXcgRXh0cmFjdGlvblNjYW5uZXIoZW50\ncnlMb2dNZXRhKTsKICAgICAgICAvLyBSZWFkIHRocm91Z2ggdGhlIGVudHJ5\nIGxvZyBmaWxlIGFuZCBleHRyYWN0IHRoZSBlbnRyeSBsb2cgbWV0YQogICAg\nICAgIGVudHJ5TG9nZ2VyLnNjYW5FbnRyeUxvZyhlbnRyeUxvZ0lkLCBzY2Fu\nbmVyKTsKICAgICAgICBMT0cuZGVidWcoIlJldHJpZXZlZCBlbnRyeSBsb2cg\nbWV0YSBkYXRhIGVudHJ5TG9nSWQ6IHt9LCBtZXRhOiB7fSIsCiAgICAgICAg\nICAgICAgICAgIGVudHJ5TG9nSWQsIGVudHJ5TG9nTWV0YSk7CiAgICAgICAg\ncmV0dXJuIGVudHJ5TG9nTWV0YTsKICAgIH0KfQo=\n","encoding":"base64"}

