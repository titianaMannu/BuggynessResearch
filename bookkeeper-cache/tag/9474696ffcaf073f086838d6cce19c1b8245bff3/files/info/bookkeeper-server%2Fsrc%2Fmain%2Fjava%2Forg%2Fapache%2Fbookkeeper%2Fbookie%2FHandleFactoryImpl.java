{"sha":"45be76397a02b1e32df02eb0a8b16d50ebdd7e00","node_id":"MDQ6QmxvYjE1NzU5NTY6NDViZTc2Mzk3YTAyYjFlMzJkZjAyZWIwYThiMTZkNTBlYmRkN2UwMA==","size":2683,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/45be76397a02b1e32df02eb0a8b16d50ebdd7e00","content":"LyoKICoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9y\nIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBU\naGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhl\nIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNl\nIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBs\naWFuY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEg\nY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBl\naXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZv\nciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Np\nb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICoK\nICovCgpwYWNrYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci5ib29raWU7Cgpp\nbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5j\nb25jdXJyZW50LkNvbmN1cnJlbnRIYXNoTWFwOwppbXBvcnQgamF2YS51dGls\nLmNvbmN1cnJlbnQuQ29uY3VycmVudE1hcDsKCmNsYXNzIEhhbmRsZUZhY3Rv\ncnlJbXBsIGltcGxlbWVudHMgSGFuZGxlRmFjdG9yeSB7CiAgICBDb25jdXJy\nZW50TWFwPExvbmcsIExlZGdlckRlc2NyaXB0b3I+IGxlZGdlcnMgPSBuZXcg\nQ29uY3VycmVudEhhc2hNYXA8TG9uZywgTGVkZ2VyRGVzY3JpcHRvcj4oKTsK\nICAgIENvbmN1cnJlbnRNYXA8TG9uZywgTGVkZ2VyRGVzY3JpcHRvcj4gcmVh\nZE9ubHlMZWRnZXJzCiAgICAgICAgPSBuZXcgQ29uY3VycmVudEhhc2hNYXA8\nTG9uZywgTGVkZ2VyRGVzY3JpcHRvcj4oKTsKCiAgICBmaW5hbCBMZWRnZXJT\ndG9yYWdlIGxlZGdlclN0b3JhZ2U7CgogICAgSGFuZGxlRmFjdG9yeUltcGwo\nTGVkZ2VyU3RvcmFnZSBsZWRnZXJTdG9yYWdlKSB7CiAgICAgICAgdGhpcy5s\nZWRnZXJTdG9yYWdlID0gbGVkZ2VyU3RvcmFnZTsKICAgIH0KCiAgICBAT3Zl\ncnJpZGUKICAgIHB1YmxpYyBMZWRnZXJEZXNjcmlwdG9yIGdldEhhbmRsZShs\nb25nIGxlZGdlcklkLCBieXRlW10gbWFzdGVyS2V5KQogICAgICAgICAgICB0\naHJvd3MgSU9FeGNlcHRpb24sIEJvb2tpZUV4Y2VwdGlvbiB7CiAgICAgICAg\nTGVkZ2VyRGVzY3JpcHRvciBoYW5kbGUgPSBudWxsOwogICAgICAgIGlmIChu\ndWxsID09IChoYW5kbGUgPSBsZWRnZXJzLmdldChsZWRnZXJJZCkpKSB7CiAg\nICAgICAgICAgIC8vIExlZGdlckRlc2NyaXB0b3IjY3JlYXRlIHNldHMgdGhl\nIG1hc3RlciBrZXkgaW4gdGhlIGxlZGdlciBzdG9yYWdlLCBjYWxsaW5nIGl0\nCiAgICAgICAgICAgIC8vIHR3aWNlIG9uIHRoZSBzYW1lIGxlZGdlcklkIGlz\nIHNhZmUgYmVjYXVzZSBpdCBldmVudHVhbGx5IHB1dHMgYSB2YWx1ZSBpbiB0\naGUgbGVkZ2VyIGNhY2hlCiAgICAgICAgICAgIC8vIHRoYXQgZ3VhcmFudGVl\ncyBzeW5jaHJvbml6ZWQgYWNjZXNzIGFjcm9zcyBhbGwgY2FjaGVkIGVudHJp\nZXMuCiAgICAgICAgICAgIGhhbmRsZSA9IGxlZGdlcnMucHV0SWZBYnNlbnQo\nbGVkZ2VySWQsIExlZGdlckRlc2NyaXB0b3IuY3JlYXRlKG1hc3RlcktleSwg\nbGVkZ2VySWQsIGxlZGdlclN0b3JhZ2UpKTsKICAgICAgICAgICAgaWYgKG51\nbGwgPT0gaGFuZGxlKSB7CiAgICAgICAgICAgICAgICBoYW5kbGUgPSBsZWRn\nZXJzLmdldChsZWRnZXJJZCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAg\nICAgICAgaGFuZGxlLmNoZWNrQWNjZXNzKG1hc3RlcktleSk7CiAgICAgICAg\ncmV0dXJuIGhhbmRsZTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1Ymxp\nYyBMZWRnZXJEZXNjcmlwdG9yIGdldFJlYWRPbmx5SGFuZGxlKGxvbmcgbGVk\nZ2VySWQpCiAgICAgICAgICAgIHRocm93cyBJT0V4Y2VwdGlvbiwgQm9va2ll\nLk5vTGVkZ2VyRXhjZXB0aW9uIHsKICAgICAgICBMZWRnZXJEZXNjcmlwdG9y\nIGhhbmRsZSA9IG51bGw7CiAgICAgICAgaWYgKG51bGwgPT0gKGhhbmRsZSA9\nIHJlYWRPbmx5TGVkZ2Vycy5nZXQobGVkZ2VySWQpKSkgewogICAgICAgICAg\nICBoYW5kbGUgPSByZWFkT25seUxlZGdlcnMucHV0SWZBYnNlbnQobGVkZ2Vy\nSWQsIExlZGdlckRlc2NyaXB0b3IuY3JlYXRlUmVhZE9ubHkobGVkZ2VySWQs\nIGxlZGdlclN0b3JhZ2UpKTsKICAgICAgICAgICAgaWYgKG51bGwgPT0gaGFu\nZGxlKSB7CiAgICAgICAgICAgICAgICBoYW5kbGUgPSByZWFkT25seUxlZGdl\ncnMuZ2V0KGxlZGdlcklkKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAg\nICAgICByZXR1cm4gaGFuZGxlOwogICAgfQp9Cg==\n","encoding":"base64"}

