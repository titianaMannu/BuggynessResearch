{"sha":"e6d2edd92d43d15205b8919cfef3e9582a79a905","node_id":"MDQ6QmxvYjE1NzU5NTY6ZTZkMmVkZDkyZDQzZDE1MjA1Yjg5MTljZmVmM2U5NTgyYTc5YTkwNQ==","size":6336,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/e6d2edd92d43d15205b8919cfef3e9582a79a905","content":"LyoKICoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9y\nIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBU\naGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhl\nIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNl\nIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBs\naWFuY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEg\nY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBl\naXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZv\nciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Np\nb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICoK\nICovCgpwYWNrYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci5ib29raWU7Cgpp\nbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKCmltcG9ydCBvcmcuYXBhY2hl\nLmJvb2trZWVwZXIuY29uZi5TZXJ2ZXJDb25maWd1cmF0aW9uOwppbXBvcnQg\nb3JnLmFwYWNoZS5ib29ra2VlcGVyLnN0YXRzLk51bGxTdGF0c0xvZ2dlcjsK\naW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5zdGF0cy5TdGF0c0xvZ2dl\ncjsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci51dGlsLlNuYXBzaG90\nTWFwOwppbXBvcnQgb3JnLnNsZjRqLkxvZ2dlcjsKaW1wb3J0IG9yZy5zbGY0\nai5Mb2dnZXJGYWN0b3J5OwoKLyoqCiAqIEltcGxlbWVudGF0aW9uIG9mIExl\nZGdlckNhY2hlIGludGVyZmFjZS4KICogVGhpcyBjbGFzcyBzZXJ2ZXMgdHdv\nIHB1cnBvc2VzLgogKi8KcHVibGljIGNsYXNzIExlZGdlckNhY2hlSW1wbCBp\nbXBsZW1lbnRzIExlZGdlckNhY2hlIHsKICAgIHByaXZhdGUgZmluYWwgc3Rh\ndGljIExvZ2dlciBMT0cgPSBMb2dnZXJGYWN0b3J5LmdldExvZ2dlcihMZWRn\nZXJDYWNoZUltcGwuY2xhc3MpOwoKICAgIHByaXZhdGUgZmluYWwgSW5kZXhJ\nbk1lbVBhZ2VNZ3IgaW5kZXhQYWdlTWFuYWdlcjsKICAgIHByaXZhdGUgZmlu\nYWwgSW5kZXhQZXJzaXN0ZW5jZU1nciBpbmRleFBlcnNpc3RlbmNlTWFuYWdl\ncjsKICAgIHByaXZhdGUgZmluYWwgaW50IHBhZ2VTaXplOwogICAgcHJpdmF0\nZSBmaW5hbCBpbnQgZW50cmllc1BlclBhZ2U7CgogICAgcHVibGljIExlZGdl\nckNhY2hlSW1wbChTZXJ2ZXJDb25maWd1cmF0aW9uIGNvbmYsIFNuYXBzaG90\nTWFwPExvbmcsIEJvb2xlYW4+IGFjdGl2ZUxlZGdlcnMsCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgIExlZGdlckRpcnNNYW5hZ2VyIGxlZGdlckRpcnNN\nYW5hZ2VyKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgIHRoaXMoY29u\nZiwgYWN0aXZlTGVkZ2VycywgbGVkZ2VyRGlyc01hbmFnZXIsIE51bGxTdGF0\nc0xvZ2dlci5JTlNUQU5DRSk7CiAgICB9CgogICAgcHVibGljIExlZGdlckNh\nY2hlSW1wbChTZXJ2ZXJDb25maWd1cmF0aW9uIGNvbmYsIFNuYXBzaG90TWFw\nPExvbmcsIEJvb2xlYW4+IGFjdGl2ZUxlZGdlcnMsCiAgICAgICAgICAgICAg\nICAgICAgICAgICAgIExlZGdlckRpcnNNYW5hZ2VyIGxlZGdlckRpcnNNYW5h\nZ2VyLCBTdGF0c0xvZ2dlciBzdGF0c0xvZ2dlcikgdGhyb3dzIElPRXhjZXB0\naW9uIHsKICAgICAgICB0aGlzLnBhZ2VTaXplID0gY29uZi5nZXRQYWdlU2l6\nZSgpOwogICAgICAgIHRoaXMuZW50cmllc1BlclBhZ2UgPSBwYWdlU2l6ZSAv\nIDg7CiAgICAgICAgdGhpcy5pbmRleFBlcnNpc3RlbmNlTWFuYWdlciA9IG5l\ndyBJbmRleFBlcnNpc3RlbmNlTWdyKHBhZ2VTaXplLCBlbnRyaWVzUGVyUGFn\nZSwgY29uZiwgYWN0aXZlTGVkZ2VycywKICAgICAgICAgICAgICAgIGxlZGdl\nckRpcnNNYW5hZ2VyLCBzdGF0c0xvZ2dlcik7CiAgICAgICAgdGhpcy5pbmRl\neFBhZ2VNYW5hZ2VyID0gbmV3IEluZGV4SW5NZW1QYWdlTWdyKHBhZ2VTaXpl\nLCBlbnRyaWVzUGVyUGFnZSwgY29uZiwKICAgICAgICAgICAgICAgIGluZGV4\nUGVyc2lzdGVuY2VNYW5hZ2VyLCBzdGF0c0xvZ2dlcik7CiAgICB9CgogICAg\nSW5kZXhQZXJzaXN0ZW5jZU1nciBnZXRJbmRleFBlcnNpc3RlbmNlTWFuYWdl\ncigpIHsKICAgICAgICByZXR1cm4gaW5kZXhQZXJzaXN0ZW5jZU1hbmFnZXI7\nCiAgICB9CgogICAgSW5kZXhJbk1lbVBhZ2VNZ3IgZ2V0SW5kZXhQYWdlTWFu\nYWdlcigpIHsKICAgICAgICByZXR1cm4gaW5kZXhQYWdlTWFuYWdlcjsKICAg\nIH0KCiAgICAvKioKICAgICAqIEByZXR1cm4gcGFnZSBzaXplIHVzZWQgaW4g\nbGVkZ2VyIGNhY2hlCiAgICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0UGFnZVNp\nemUoKSB7CiAgICAgICAgcmV0dXJuIHBhZ2VTaXplOwogICAgfQoKICAgIEBP\ndmVycmlkZQogICAgcHVibGljIHZvaWQgcHV0RW50cnlPZmZzZXQobG9uZyBs\nZWRnZXIsIGxvbmcgZW50cnksIGxvbmcgb2Zmc2V0KSB0aHJvd3MgSU9FeGNl\ncHRpb24gewogICAgICAgIGluZGV4UGFnZU1hbmFnZXIucHV0RW50cnlPZmZz\nZXQobGVkZ2VyLCBlbnRyeSwgb2Zmc2V0KTsKICAgIH0KCiAgICBAT3ZlcnJp\nZGUKICAgIHB1YmxpYyBsb25nIGdldEVudHJ5T2Zmc2V0KGxvbmcgbGVkZ2Vy\nLCBsb25nIGVudHJ5KSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgIHJl\ndHVybiBpbmRleFBhZ2VNYW5hZ2VyLmdldEVudHJ5T2Zmc2V0KGxlZGdlciwg\nZW50cnkpOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQg\nZmx1c2hMZWRnZXIoYm9vbGVhbiBkb0FsbCkgdGhyb3dzIElPRXhjZXB0aW9u\nIHsKICAgICAgICBpbmRleFBhZ2VNYW5hZ2VyLmZsdXNoT25lT3JNb3JlTGVk\nZ2Vycyhkb0FsbCk7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMg\nbG9uZyBnZXRMYXN0RW50cnkobG9uZyBsZWRnZXJJZCkgdGhyb3dzIElPRXhj\nZXB0aW9uIHsKICAgICAgICAvLyBHZXQgdGhlIGhpZ2hlc3QgZW50cnkgZnJv\nbSB0aGUgcGFnZXMgdGhhdCBhcmUgaW4gbWVtb3J5CiAgICAgICAgbG9uZyBs\nYXN0RW50cnlJbk1lbSA9IGluZGV4UGFnZU1hbmFnZXIuZ2V0TGFzdEVudHJ5\nSW5NZW0obGVkZ2VySWQpOwogICAgICAgIC8vIFNvbWUgaW5kZXggcGFnZXMg\nbWF5IGhhdmUgYmVlbiBldmljdGVkIGZyb20gbWVtb3J5LCByZXRyaWV2ZSB0\naGUgbGFzdCBlbnRyeQogICAgICAgIC8vIGZyb20gdGhlIHBlcnNpc3RlbnQg\nc3RvcmUuIFdlIHdpbGwgY2hlY2sgaWYgdGhlcmUgY291bGQgYmUgYW4gZW50\ncnkgYmV5b25kIHRoZQogICAgICAgIC8vIGxhc3QgaW4gbWVtIGVudHJ5IGFu\nZCBvbmx5IHRoZW4gYXR0ZW1wdCB0byBnZXQgdGhlIGxhc3QgcGVyc2lzdGVk\nIGVudHJ5IGZyb20gdGhlIGZpbGUKICAgICAgICAvLyBUaGUgbGF0dGVyIGlz\nIGp1c3QgYW4gb3B0aW1pemF0aW9uCiAgICAgICAgbG9uZyBsYXN0RW50cnkg\nPSBpbmRleFBlcnNpc3RlbmNlTWFuYWdlci5nZXRQZXJzaXN0RW50cnlCZXlv\nbmRJbk1lbShsZWRnZXJJZCwgbGFzdEVudHJ5SW5NZW0pOwogICAgICAgIHJl\ndHVybiBsYXN0RW50cnk7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGlzIG1l\ndGhvZCBpcyBjYWxsZWQgd2hlbmV2ZXIgYSBsZWRnZXIgaXMgZGVsZXRlZCBi\neSB0aGUgQm9va0tlZXBlciBDbGllbnQKICAgICAqIGFuZCB3ZSB3YW50IHRv\nIHJlbW92ZSBhbGwgcmVsZXZhbnQgZGF0YSBmb3IgaXQgc3RvcmVkIGluIHRo\nZSBMZWRnZXJDYWNoZS4KICAgICAqLwogICAgQE92ZXJyaWRlCiAgICBwdWJs\naWMgdm9pZCBkZWxldGVMZWRnZXIobG9uZyBsZWRnZXJJZCkgdGhyb3dzIElP\nRXhjZXB0aW9uIHsKICAgICAgICBMT0cuZGVidWcoIkRlbGV0aW5nIGxlZGdl\ncklkOiB7fSIsIGxlZGdlcklkKTsKCiAgICAgICAgaW5kZXhQYWdlTWFuYWdl\nci5yZW1vdmVQYWdlc0ZvckxlZGdlcihsZWRnZXJJZCk7CiAgICAgICAgaW5k\nZXhQZXJzaXN0ZW5jZU1hbmFnZXIucmVtb3ZlTGVkZ2VyKGxlZGdlcklkKTsK\nICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBieXRlW10gcmVhZE1h\nc3RlcktleShsb25nIGxlZGdlcklkKSB0aHJvd3MgSU9FeGNlcHRpb24sIEJv\nb2tpZUV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGluZGV4UGVyc2lzdGVu\nY2VNYW5hZ2VyLnJlYWRNYXN0ZXJLZXkobGVkZ2VySWQpOwogICAgfQoKICAg\nIEBPdmVycmlkZQogICAgcHVibGljIGJvb2xlYW4gc2V0RmVuY2VkKGxvbmcg\nbGVkZ2VySWQpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJu\nIGluZGV4UGVyc2lzdGVuY2VNYW5hZ2VyLnNldEZlbmNlZChsZWRnZXJJZCk7\nCiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgYm9vbGVhbiBpc0Zl\nbmNlZChsb25nIGxlZGdlcklkKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAg\nICAgIHJldHVybiBpbmRleFBlcnNpc3RlbmNlTWFuYWdlci5pc0ZlbmNlZChs\nZWRnZXJJZCk7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9p\nZCBzZXRNYXN0ZXJLZXkobG9uZyBsZWRnZXJJZCwgYnl0ZVtdIG1hc3Rlcktl\neSkgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICBpbmRleFBlcnNpc3Rl\nbmNlTWFuYWdlci5zZXRNYXN0ZXJLZXkobGVkZ2VySWQsIG1hc3RlcktleSk7\nCiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgYm9vbGVhbiBsZWRn\nZXJFeGlzdHMobG9uZyBsZWRnZXJJZCkgdGhyb3dzIElPRXhjZXB0aW9uIHsK\nICAgICAgICByZXR1cm4gaW5kZXhQZXJzaXN0ZW5jZU1hbmFnZXIubGVkZ2Vy\nRXhpc3RzKGxlZGdlcklkKTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1\nYmxpYyBMZWRnZXJDYWNoZUJlYW4gZ2V0Sk1YQmVhbigpIHsKICAgICAgICBy\nZXR1cm4gbmV3IExlZGdlckNhY2hlQmVhbigpIHsKICAgICAgICAgICAgQE92\nZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0TmFtZSgpIHsK\nICAgICAgICAgICAgICAgIHJldHVybiAiTGVkZ2VyQ2FjaGUiOwogICAgICAg\nICAgICB9CgogICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVi\nbGljIGJvb2xlYW4gaXNIaWRkZW4oKSB7CiAgICAgICAgICAgICAgICByZXR1\ncm4gZmFsc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIEBPdmVycmlk\nZQogICAgICAgICAgICBwdWJsaWMgaW50IGdldFBhZ2VDb3VudCgpIHsKICAg\nICAgICAgICAgICAgIHJldHVybiBMZWRnZXJDYWNoZUltcGwudGhpcy5pbmRl\neFBhZ2VNYW5hZ2VyLmdldE51bVVzZWRQYWdlcygpOwogICAgICAgICAgICB9\nCgogICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIGlu\ndCBnZXRQYWdlU2l6ZSgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBMZWRn\nZXJDYWNoZUltcGwudGhpcy5nZXRQYWdlU2l6ZSgpOwogICAgICAgICAgICB9\nCgogICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIGlu\ndCBnZXRPcGVuRmlsZUxpbWl0KCkgewogICAgICAgICAgICAgICAgcmV0dXJu\nIExlZGdlckNhY2hlSW1wbC50aGlzLmluZGV4UGVyc2lzdGVuY2VNYW5hZ2Vy\nLmdldE9wZW5GaWxlTGltaXQoKTsKICAgICAgICAgICAgfQoKICAgICAgICAg\nICAgQE92ZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyBpbnQgZ2V0UGFnZUxp\nbWl0KCkgewogICAgICAgICAgICAgICAgcmV0dXJuIExlZGdlckNhY2hlSW1w\nbC50aGlzLmluZGV4UGFnZU1hbmFnZXIuZ2V0UGFnZUxpbWl0KCk7CiAgICAg\nICAgICAgIH0KCiAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICBw\ndWJsaWMgaW50IGdldE51bU9wZW5MZWRnZXJzKCkgewogICAgICAgICAgICAg\nICAgcmV0dXJuIExlZGdlckNhY2hlSW1wbC50aGlzLmluZGV4UGVyc2lzdGVu\nY2VNYW5hZ2VyLmdldE51bU9wZW5MZWRnZXJzKCk7CiAgICAgICAgICAgIH0K\nICAgICAgICB9OwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZv\naWQgY2xvc2UoKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgIGluZGV4\nUGVyc2lzdGVuY2VNYW5hZ2VyLmNsb3NlKCk7CiAgICB9Cn0K\n","encoding":"base64"}

