{"sha":"49d8e5915d762dc2971d70dbf28517ffbe705e10","node_id":"MDQ6QmxvYjE1NzU5NTY6NDlkOGU1OTE1ZDc2MmRjMjk3MWQ3MGRiZjI4NTE3ZmZiZTcwNWUxMA==","size":33694,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/49d8e5915d762dc2971d70dbf28517ffbe705e10","content":"LyoqCiAqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91\nbmRhdGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRv\nciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAq\nIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGlu\nZm9ybWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRo\nZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5z\nZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21w\nbGlhbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBh\nIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICBodHRwOi8vd3d3LmFw\nYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJl\ncXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0\naW5nLAogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5z\nZSBpcyBkaXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRI\nT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwg\nZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBm\nb3IgdGhlCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNz\naW9ucyBhbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAq\nCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci5jbGllbnQ7Cgpp\nbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5j\nb25jdXJyZW50LkNvdW50RG93bkxhdGNoOwppbXBvcnQgamF2YS51dGlsLmNv\nbmN1cnJlbnQuRXhlY3V0b3JzOwppbXBvcnQgamF2YS51dGlsLmNvbmN1cnJl\nbnQuU2NoZWR1bGVkRXhlY3V0b3JTZXJ2aWNlOwppbXBvcnQgamF2YS51dGls\nLmNvbmN1cnJlbnQuVGltZVVuaXQ7CmltcG9ydCBqYXZhLnV0aWwuY29uY3Vy\ncmVudC5sb2Nrcy5SZWVudHJhbnRSZWFkV3JpdGVMb2NrOwoKaW1wb3J0IG9y\nZy5hcGFjaGUuYm9va2tlZXBlci5jbGllbnQuQXN5bmNDYWxsYmFjay5DcmVh\ndGVDYWxsYmFjazsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5jbGll\nbnQuQXN5bmNDYWxsYmFjay5EZWxldGVDYWxsYmFjazsKaW1wb3J0IG9yZy5h\ncGFjaGUuYm9va2tlZXBlci5jbGllbnQuQXN5bmNDYWxsYmFjay5PcGVuQ2Fs\nbGJhY2s7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY2xpZW50LkFz\neW5jQ2FsbGJhY2suSXNDbG9zZWRDYWxsYmFjazsKaW1wb3J0IG9yZy5hcGFj\naGUuYm9va2tlZXBlci5jb25mLkNsaWVudENvbmZpZ3VyYXRpb247CmltcG9y\ndCBvcmcuYXBhY2hlLmJvb2trZWVwZXIubWV0YS5DbGVhbnVwTGVkZ2VyTWFu\nYWdlcjsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5tZXRhLkxlZGdl\nck1hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIubWV0YS5M\nZWRnZXJNYW5hZ2VyRmFjdG9yeTsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tl\nZXBlci5wcm90by5Cb29raWVDbGllbnQ7CmltcG9ydCBvcmcuYXBhY2hlLmJv\nb2trZWVwZXIucHJvdG8uQm9va2tlZXBlckludGVybmFsQ2FsbGJhY2tzLkdl\nbmVyaWNDYWxsYmFjazsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5z\ndGF0cy5OdWxsU3RhdHNMb2dnZXI7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2tr\nZWVwZXIuc3RhdHMuU3RhdHNMb2dnZXI7CmltcG9ydCBvcmcuYXBhY2hlLmJv\nb2trZWVwZXIuc3RhdHMuT3BTdGF0c0xvZ2dlcjsKaW1wb3J0IG9yZy5hcGFj\naGUuYm9va2tlZXBlci51dGlsLk9yZGVyZWRTYWZlRXhlY3V0b3I7CmltcG9y\ndCBvcmcuYXBhY2hlLmJvb2trZWVwZXIudXRpbC5SZWZsZWN0aW9uVXRpbHM7\nCmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIudXRpbC5aa1V0aWxzOwpp\nbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLnpvb2tlZXBlci5ab29LZWVw\nZXJXYXRjaGVyQmFzZTsKaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb25m\naWd1cmF0aW9uLkNvbmZpZ3VyYXRpb25FeGNlcHRpb247CmltcG9ydCBvcmcu\nYXBhY2hlLnpvb2tlZXBlci5LZWVwZXJFeGNlcHRpb247CmltcG9ydCBvcmcu\nYXBhY2hlLnpvb2tlZXBlci5ab29LZWVwZXI7CmltcG9ydCBvcmcuamJvc3Mu\nbmV0dHkuY2hhbm5lbC5zb2NrZXQuQ2xpZW50U29ja2V0Q2hhbm5lbEZhY3Rv\ncnk7CmltcG9ydCBvcmcuamJvc3MubmV0dHkuY2hhbm5lbC5zb2NrZXQubmlv\nLk5pb0NsaWVudFNvY2tldENoYW5uZWxGYWN0b3J5OwppbXBvcnQgb3JnLnNs\nZjRqLkxvZ2dlcjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJGYWN0b3J5OwoK\naW1wb3J0IGNvbS5nb29nbGUuY29tbW9uLnV0aWwuY29uY3VycmVudC5UaHJl\nYWRGYWN0b3J5QnVpbGRlcjsKCi8qKgogKiBCb29rS2VlcGVyIGNsaWVudC4g\nV2UgYXNzdW1lIHRoZXJlIGlzIG9uZSBzaW5nbGUgd3JpdGVyIHRvIGEgbGVk\nZ2VyIGF0IGFueQogKiB0aW1lLgogKgogKiBUaGVyZSBhcmUgZm91ciBwb3Nz\naWJsZSBvcGVyYXRpb25zOiBzdGFydCBhIG5ldyBsZWRnZXIsIHdyaXRlIHRv\nIGEgbGVkZ2VyLAogKiByZWFkIGZyb20gYSBsZWRnZXIgYW5kIGRlbGV0ZSBh\nIGxlZGdlci4KICoKICogVGhlIGV4Y2VwdGlvbnMgcmVzdWx0aW5nIGZyb20g\nc3luY2hyb25vdXMgY2FsbHMgYW5kIGVycm9yIGNvZGUgcmVzdWx0aW5nIGZy\nb20KICogYXN5bmNocm9ub3VzIGNhbGxzIGNhbiBiZSBmb3VuZCBpbiB0aGUg\nY2xhc3Mge0BsaW5rIEJLRXhjZXB0aW9ufS4KICoKICoKICovCgpwdWJsaWMg\nY2xhc3MgQm9va0tlZXBlciB7CgogICAgc3RhdGljIGZpbmFsIExvZ2dlciBM\nT0cgPSBMb2dnZXJGYWN0b3J5LmdldExvZ2dlcihCb29rS2VlcGVyLmNsYXNz\nKTsKCiAgICBmaW5hbCBab29LZWVwZXIgems7CiAgICBmaW5hbCBDbGllbnRT\nb2NrZXRDaGFubmVsRmFjdG9yeSBjaGFubmVsRmFjdG9yeTsKCiAgICAvLyBU\naGUgc3RhdHMgbG9nZ2VyIGZvciB0aGlzIGNsaWVudC4KICAgIHByaXZhdGUg\nZmluYWwgU3RhdHNMb2dnZXIgc3RhdHNMb2dnZXI7CiAgICBwcml2YXRlIE9w\nU3RhdHNMb2dnZXIgY3JlYXRlT3BMb2dnZXI7CiAgICBwcml2YXRlIE9wU3Rh\ndHNMb2dnZXIgb3Blbk9wTG9nZ2VyOwogICAgcHJpdmF0ZSBPcFN0YXRzTG9n\nZ2VyIGRlbGV0ZU9wTG9nZ2VyOwogICAgcHJpdmF0ZSBPcFN0YXRzTG9nZ2Vy\nIHJlYWRPcExvZ2dlcjsKICAgIHByaXZhdGUgT3BTdGF0c0xvZ2dlciBhZGRP\ncExvZ2dlcjsKCiAgICAvLyB3aGV0aGVyIHRoZSBzb2NrZXQgZmFjdG9yeSBp\ncyBvbmUgd2UgY3JlYXRlZCwgb3IgaXMgb3duZWQgYnkgd2hvZXZlcgogICAg\nLy8gaW5zdGFudGlhdGVkIHVzCiAgICBib29sZWFuIG93bkNoYW5uZWxGYWN0\nb3J5ID0gZmFsc2U7CiAgICAvLyB3aGV0aGVyIHRoZSB6ayBoYW5kbGUgaXMg\nb25lIHdlIGNyZWF0ZWQsIG9yIGlzIG93bmVkIGJ5IHdob2V2ZXIKICAgIC8v\nIGluc3RhbnRpYXRlZCB1cwogICAgYm9vbGVhbiBvd25aS0hhbmRsZSA9IGZh\nbHNlOwoKICAgIGZpbmFsIEJvb2tpZUNsaWVudCBib29raWVDbGllbnQ7CiAg\nICBmaW5hbCBCb29raWVXYXRjaGVyIGJvb2tpZVdhdGNoZXI7CgogICAgZmlu\nYWwgT3JkZXJlZFNhZmVFeGVjdXRvciBtYWluV29ya2VyUG9vbDsKICAgIGZp\nbmFsIFNjaGVkdWxlZEV4ZWN1dG9yU2VydmljZSBzY2hlZHVsZXI7CgogICAg\nLy8gTGVkZ2VyIG1hbmFnZXIgcmVzcG9uc2libGUgZm9yIGhvdyB0byBzdG9y\nZSBsZWRnZXIgbWV0YSBkYXRhCiAgICBmaW5hbCBMZWRnZXJNYW5hZ2VyRmFj\ndG9yeSBsZWRnZXJNYW5hZ2VyRmFjdG9yeTsKICAgIGZpbmFsIExlZGdlck1h\nbmFnZXIgbGVkZ2VyTWFuYWdlcjsKCiAgICAvLyBFbnNlbWJsZSBQbGFjZW1l\nbnQgUG9saWN5CiAgICBmaW5hbCBFbnNlbWJsZVBsYWNlbWVudFBvbGljeSBw\nbGFjZW1lbnRQb2xpY3k7CgogICAgZmluYWwgQ2xpZW50Q29uZmlndXJhdGlv\nbiBjb25mOwoKICAgIC8vIENsb3NlIFN0YXRlCiAgICBib29sZWFuIGNsb3Nl\nZCA9IGZhbHNlOwogICAgZmluYWwgUmVlbnRyYW50UmVhZFdyaXRlTG9jayBj\nbG9zZUxvY2sgPSBuZXcgUmVlbnRyYW50UmVhZFdyaXRlTG9jaygpOwoKICAg\nIHB1YmxpYyBzdGF0aWMgY2xhc3MgQnVpbGRlciB7CiAgICAgICAgZmluYWwg\nQ2xpZW50Q29uZmlndXJhdGlvbiBjb25mOwoKICAgICAgICBab29LZWVwZXIg\nemsgPSBudWxsOwogICAgICAgIENsaWVudFNvY2tldENoYW5uZWxGYWN0b3J5\nIGNoYW5uZWxGYWN0b3J5ID0gbnVsbDsKICAgICAgICBTdGF0c0xvZ2dlciBz\ndGF0c0xvZ2dlciA9IE51bGxTdGF0c0xvZ2dlci5JTlNUQU5DRTsKCiAgICAg\nICAgQnVpbGRlcihDbGllbnRDb25maWd1cmF0aW9uIGNvbmYpIHsKICAgICAg\nICAgICAgdGhpcy5jb25mID0gY29uZjsKICAgICAgICB9CgogICAgICAgIHB1\nYmxpYyBCdWlsZGVyIHNldENoYW5uZWxGYWN0b3J5KENsaWVudFNvY2tldENo\nYW5uZWxGYWN0b3J5IGYpIHsKICAgICAgICAgICAgY2hhbm5lbEZhY3Rvcnkg\nPSBmOwogICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICB9CgogICAg\nICAgIHB1YmxpYyBCdWlsZGVyIHNldFpvb2tlZXBlcihab29LZWVwZXIgemsp\nIHsKICAgICAgICAgICAgdGhpcy56ayA9IHprOwogICAgICAgICAgICByZXR1\ncm4gdGhpczsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBCdWlsZGVyIHNl\ndFN0YXRzTG9nZ2VyKFN0YXRzTG9nZ2VyIHN0YXRzTG9nZ2VyKSB7CiAgICAg\nICAgICAgIHRoaXMuc3RhdHNMb2dnZXIgPSBzdGF0c0xvZ2dlcjsKICAgICAg\nICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMg\nQm9va0tlZXBlciBidWlsZCgpIHRocm93cyBJT0V4Y2VwdGlvbiwgSW50ZXJy\ndXB0ZWRFeGNlcHRpb24sIEtlZXBlckV4Y2VwdGlvbiB7CiAgICAgICAgICAg\nIGJvb2xlYW4gb3duWksgPSBmYWxzZTsKICAgICAgICAgICAgYm9vbGVhbiBv\nd25DaGFubmVsRmFjdG9yeSA9IGZhbHNlOwogICAgICAgICAgICBpZiAoemsg\nPT0gbnVsbCkgewogICAgICAgICAgICAgICAgb3duWksgPSB0cnVlOwogICAg\nICAgICAgICAgICAgWm9vS2VlcGVyV2F0Y2hlckJhc2UgdyA9IG5ldyBab29L\nZWVwZXJXYXRjaGVyQmFzZShjb25mLmdldFprVGltZW91dCgpKTsKICAgICAg\nICAgICAgICAgIHprID0gWmtVdGlscy5jcmVhdGVDb25uZWN0ZWRab29rZWVw\nZXJDbGllbnQoY29uZi5nZXRaa1NlcnZlcnMoKSwgdyk7CiAgICAgICAgICAg\nICAgICB3LndhaXRGb3JDb25uZWN0aW9uKCk7CiAgICAgICAgICAgIH0KICAg\nICAgICAgICAgaWYgKGNoYW5uZWxGYWN0b3J5ID09IG51bGwpIHsKICAgICAg\nICAgICAgICAgIG93bkNoYW5uZWxGYWN0b3J5ID0gdHJ1ZTsKICAgICAgICAg\nICAgICAgIFRocmVhZEZhY3RvcnlCdWlsZGVyIHRmYiA9IG5ldyBUaHJlYWRG\nYWN0b3J5QnVpbGRlcigpOwogICAgICAgICAgICAgICAgY2hhbm5lbEZhY3Rv\ncnkgPSBuZXcgTmlvQ2xpZW50U29ja2V0Q2hhbm5lbEZhY3RvcnkoCiAgICAg\nICAgICAgICAgICAgICAgICAgIEV4ZWN1dG9ycy5uZXdDYWNoZWRUaHJlYWRQ\nb29sKHRmYi5zZXROYW1lRm9ybWF0KAogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJCb29r\nS2VlcGVyLU5JT0Jvc3MtJWQiKS5idWlsZCgpKSwKICAgICAgICAgICAgICAg\nICAgICAgICAgRXhlY3V0b3JzLm5ld0NhY2hlZFRocmVhZFBvb2wodGZiLnNl\ndE5hbWVGb3JtYXQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkJvb2tLZWVwZXItTklP\nV29ya2VyLSVkIikuYnVpbGQoKSkpOwogICAgICAgICAgICB9CgogICAgICAg\nICAgICBCb29rS2VlcGVyIGJrID0gbmV3IEJvb2tLZWVwZXIoY29uZiwgemss\nIGNoYW5uZWxGYWN0b3J5LCBzdGF0c0xvZ2dlcik7CiAgICAgICAgICAgIGJr\nLm93blpLSGFuZGxlID0gb3duWks7CiAgICAgICAgICAgIGJrLm93bkNoYW5u\nZWxGYWN0b3J5ID0gb3duQ2hhbm5lbEZhY3Rvcnk7CgogICAgICAgICAgICBy\nZXR1cm4gYms7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBzdGF0aWMg\nQnVpbGRlciBmb3JDb25maWcoZmluYWwgQ2xpZW50Q29uZmlndXJhdGlvbiBj\nb25mKSB7CiAgICAgICAgcmV0dXJuIG5ldyBCdWlsZGVyKGNvbmYpOwogICAg\nfQoKICAgIC8qKgogICAgICogQ3JlYXRlIGEgYm9va2tlZXBlciBjbGllbnQu\nIEEgem9va2VlcGVyIGNsaWVudCBhbmQgYSBjbGllbnQgc29ja2V0IGZhY3Rv\ncnkKICAgICAqIHdpbGwgYmUgaW5zdGFudGlhdGVkIGFzIHBhcnQgb2YgdGhp\ncyBjb25zdHJ1Y3Rvci4KICAgICAqCiAgICAgKiBAcGFyYW0gc2VydmVycwog\nICAgICogICAgICAgICAgQSBsaXN0IG9mIG9uZSBvZiBtb3JlIHNlcnZlcnMg\nb24gd2hpY2ggem9va2VlcGVyIGlzIHJ1bm5pbmcuIFRoZQogICAgICogICAg\nICAgICAgY2xpZW50IGFzc3VtZXMgdGhhdCB0aGUgcnVubmluZyBib29raWVz\nIGhhdmUgYmVlbiByZWdpc3RlcmVkIHdpdGgKICAgICAqICAgICAgICAgIHpv\nb2tlZXBlciB1bmRlciB0aGUgcGF0aAogICAgICogICAgICAgICAge0BsaW5r\nIEJvb2tpZVdhdGNoZXIjYm9va2llUmVnaXN0cmF0aW9uUGF0aH0KICAgICAq\nIEB0aHJvd3MgSU9FeGNlcHRpb24KICAgICAqIEB0aHJvd3MgSW50ZXJydXB0\nZWRFeGNlcHRpb24KICAgICAqIEB0aHJvd3MgS2VlcGVyRXhjZXB0aW9uCiAg\nICAgKi8KICAgIHB1YmxpYyBCb29rS2VlcGVyKFN0cmluZyBzZXJ2ZXJzKSB0\naHJvd3MgSU9FeGNlcHRpb24sIEludGVycnVwdGVkRXhjZXB0aW9uLAogICAg\nICAgIEtlZXBlckV4Y2VwdGlvbiB7CiAgICAgICAgdGhpcyhuZXcgQ2xpZW50\nQ29uZmlndXJhdGlvbigpLnNldFprU2VydmVycyhzZXJ2ZXJzKSk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBDcmVhdGUgYSBib29ra2VlcGVyIGNsaWVudCB1\nc2luZyBhIGNvbmZpZ3VyYXRpb24gb2JqZWN0LgogICAgICogQSB6b29rZWVw\nZXIgY2xpZW50IGFuZCBhIGNsaWVudCBzb2NrZXQgZmFjdG9yeSB3aWxsIGJl\nCiAgICAgKiBpbnN0YW50aWF0ZWQgYXMgcGFydCBvZiB0aGlzIGNvbnN0cnVj\ndG9yLgogICAgICoKICAgICAqIEBwYXJhbSBjb25mCiAgICAgKiAgICAgICAg\nICBDbGllbnQgQ29uZmlndXJhdGlvbiBvYmplY3QKICAgICAqIEB0aHJvd3Mg\nSU9FeGNlcHRpb24KICAgICAqIEB0aHJvd3MgSW50ZXJydXB0ZWRFeGNlcHRp\nb24KICAgICAqIEB0aHJvd3MgS2VlcGVyRXhjZXB0aW9uCiAgICAgKi8KICAg\nIHB1YmxpYyBCb29rS2VlcGVyKGZpbmFsIENsaWVudENvbmZpZ3VyYXRpb24g\nY29uZikKICAgICAgICAgICAgdGhyb3dzIElPRXhjZXB0aW9uLCBJbnRlcnJ1\ncHRlZEV4Y2VwdGlvbiwgS2VlcGVyRXhjZXB0aW9uIHsKICAgICAgICB0aGlz\nLmNvbmYgPSBjb25mOwogICAgICAgIFpvb0tlZXBlcldhdGNoZXJCYXNlIHcg\nPSBuZXcgWm9vS2VlcGVyV2F0Y2hlckJhc2UoY29uZi5nZXRaa1RpbWVvdXQo\nKSk7CiAgICAgICAgdGhpcy56ayA9IFprVXRpbHMKICAgICAgICAgICAgICAg\nIC5jcmVhdGVDb25uZWN0ZWRab29rZWVwZXJDbGllbnQoY29uZi5nZXRaa1Nl\ncnZlcnMoKSwgdyk7CiAgICAgICAgVGhyZWFkRmFjdG9yeUJ1aWxkZXIgdGZi\nID0gbmV3IFRocmVhZEZhY3RvcnlCdWlsZGVyKCk7CiAgICAgICAgdGhpcy5j\naGFubmVsRmFjdG9yeSA9IG5ldyBOaW9DbGllbnRTb2NrZXRDaGFubmVsRmFj\ndG9yeSgKICAgICAgICAgICAgICAgIEV4ZWN1dG9ycy5uZXdDYWNoZWRUaHJl\nYWRQb29sKHRmYi5zZXROYW1lRm9ybWF0KAogICAgICAgICAgICAgICAgICAg\nICAgICAiQm9va0tlZXBlci1OSU9Cb3NzLSVkIikuYnVpbGQoKSksCiAgICAg\nICAgICAgICAgICBFeGVjdXRvcnMubmV3Q2FjaGVkVGhyZWFkUG9vbCh0ZmIu\nc2V0TmFtZUZvcm1hdCgKICAgICAgICAgICAgICAgICAgICAgICAgIkJvb2tL\nZWVwZXItTklPV29ya2VyLSVkIikuYnVpbGQoKSkpOwogICAgICAgIHRoaXMu\nc2NoZWR1bGVyID0gRXhlY3V0b3JzLm5ld1NpbmdsZVRocmVhZFNjaGVkdWxl\nZEV4ZWN1dG9yKHRmYgogICAgICAgICAgICAgICAgLnNldE5hbWVGb3JtYXQo\nIkJvb2tLZWVwZXJDbGllbnRTY2hlZHVsZXItJWQiKS5idWlsZCgpKTsKICAg\nICAgICB0aGlzLnN0YXRzTG9nZ2VyID0gTnVsbFN0YXRzTG9nZ2VyLklOU1RB\nTkNFOwogICAgICAgIGluaXRPcExvZ2dlcnModGhpcy5zdGF0c0xvZ2dlcik7\nCiAgICAgICAgLy8gaW5pdGlhbGl6ZSB0aGUgZW5zZW1ibGUgcGxhY2VtZW50\nCiAgICAgICAgdGhpcy5wbGFjZW1lbnRQb2xpY3kgPSBpbml0aWFsaXplRW5z\nZW1ibGVQbGFjZW1lbnRQb2xpY3koY29uZik7CgogICAgICAgIG1haW5Xb3Jr\nZXJQb29sID0gbmV3IE9yZGVyZWRTYWZlRXhlY3V0b3IoY29uZi5nZXROdW1X\nb3JrZXJUaHJlYWRzKCksCiAgICAgICAgICAgICAgICAiQm9va0tlZXBlckNs\naWVudFdvcmtlciIpOwogICAgICAgIGJvb2tpZUNsaWVudCA9IG5ldyBCb29r\naWVDbGllbnQoY29uZiwgY2hhbm5lbEZhY3RvcnksIG1haW5Xb3JrZXJQb29s\nKTsKICAgICAgICBib29raWVXYXRjaGVyID0gbmV3IEJvb2tpZVdhdGNoZXIo\nY29uZiwgc2NoZWR1bGVyLCBwbGFjZW1lbnRQb2xpY3ksIHRoaXMpOwogICAg\nICAgIGJvb2tpZVdhdGNoZXIucmVhZEJvb2tpZXNCbG9ja2luZygpOwoKICAg\nICAgICBsZWRnZXJNYW5hZ2VyRmFjdG9yeSA9IExlZGdlck1hbmFnZXJGYWN0\nb3J5Lm5ld0xlZGdlck1hbmFnZXJGYWN0b3J5KGNvbmYsIHprKTsKICAgICAg\nICBsZWRnZXJNYW5hZ2VyID0gbmV3IENsZWFudXBMZWRnZXJNYW5hZ2VyKGxl\nZGdlck1hbmFnZXJGYWN0b3J5Lm5ld0xlZGdlck1hbmFnZXIoKSk7CgogICAg\nICAgIG93bkNoYW5uZWxGYWN0b3J5ID0gdHJ1ZTsKICAgICAgICBvd25aS0hh\nbmRsZSA9IHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYSBi\nb29ra2VlcGVyIGNsaWVudCBidXQgdXNlIHRoZSBwYXNzZWQgaW4gem9va2Vl\ncGVyIGNsaWVudCBpbnN0ZWFkCiAgICAgKiBvZiBpbnN0YW50aWF0aW5nIG9u\nZS4KICAgICAqCiAgICAgKiBAcGFyYW0gY29uZgogICAgICogICAgICAgICAg\nQ2xpZW50IENvbmZpZ3VyYXRpb24gb2JqZWN0CiAgICAgKiAgICAgICAgICB7\nQGxpbmsgQ2xpZW50Q29uZmlndXJhdGlvbn0KICAgICAqIEBwYXJhbSB6awog\nICAgICogICAgICAgICAgWm9va2VlcGVyIGNsaWVudCBpbnN0YW5jZSBjb25u\nZWN0ZWQgdG8gdGhlIHpvb2tlZXBlciB3aXRoIHdoaWNoCiAgICAgKiAgICAg\nICAgICB0aGUgYm9va2llcyBoYXZlIHJlZ2lzdGVyZWQKICAgICAqIEB0aHJv\nd3MgSU9FeGNlcHRpb24KICAgICAqIEB0aHJvd3MgSW50ZXJydXB0ZWRFeGNl\ncHRpb24KICAgICAqIEB0aHJvd3MgS2VlcGVyRXhjZXB0aW9uCiAgICAgKi8K\nICAgIHB1YmxpYyBCb29rS2VlcGVyKENsaWVudENvbmZpZ3VyYXRpb24gY29u\nZiwgWm9vS2VlcGVyIHprKQogICAgICAgICAgICB0aHJvd3MgSU9FeGNlcHRp\nb24sIEludGVycnVwdGVkRXhjZXB0aW9uLCBLZWVwZXJFeGNlcHRpb24gewoK\nICAgICAgICB0aGlzKGNvbmYsIHprLCBuZXcgTmlvQ2xpZW50U29ja2V0Q2hh\nbm5lbEZhY3RvcnkoCiAgICAgICAgICAgICAgICBFeGVjdXRvcnMubmV3Q2Fj\naGVkVGhyZWFkUG9vbChuZXcgVGhyZWFkRmFjdG9yeUJ1aWxkZXIoKQogICAg\nICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZUZvcm1hdCgiQm9va0tlZXBl\nci1OSU9Cb3NzLSVkIikuYnVpbGQoKSksCiAgICAgICAgICAgICAgICBFeGVj\ndXRvcnMubmV3Q2FjaGVkVGhyZWFkUG9vbChuZXcgVGhyZWFkRmFjdG9yeUJ1\naWxkZXIoKQogICAgICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZUZvcm1h\ndCgiQm9va0tlZXBlci1OSU9Xb3JrZXItJWQiKS5idWlsZCgpKSkpOwogICAg\nICAgIG93bkNoYW5uZWxGYWN0b3J5ID0gdHJ1ZTsKICAgIH0KCiAgICAvKioK\nICAgICAqIENyZWF0ZSBhIGJvb2trZWVwZXIgY2xpZW50IGJ1dCB1c2UgdGhl\nIHBhc3NlZCBpbiB6b29rZWVwZXIgY2xpZW50IGFuZAogICAgICogY2xpZW50\nIHNvY2tldCBjaGFubmVsIGZhY3RvcnkgaW5zdGVhZCBvZiBpbnN0YW50aWF0\naW5nIHRob3NlLgogICAgICoKICAgICAqIEBwYXJhbSBjb25mCiAgICAgKiAg\nICAgICAgICBDbGllbnQgQ29uZmlndXJhdGlvbiBPYmplY3QKICAgICAqICAg\nICAgICAgIHtAbGluayBDbGllbnRDb25maWd1cmF0aW9ufQogICAgICogQHBh\ncmFtIHprCiAgICAgKiAgICAgICAgICBab29rZWVwZXIgY2xpZW50IGluc3Rh\nbmNlIGNvbm5lY3RlZCB0byB0aGUgem9va2VlcGVyIHdpdGggd2hpY2gKICAg\nICAqICAgICAgICAgIHRoZSBib29raWVzIGhhdmUgcmVnaXN0ZXJlZC4gVGhl\nIFpvb0tlZXBlciBjbGllbnQgbXVzdCBiZSBjb25uZWN0ZWQKICAgICAqICAg\nICAgICAgIGJlZm9yZSBpdCBpcyBwYXNzZWQgdG8gQm9va0tlZXBlci4gT3Ro\nZXJ3aXNlIGEgS2VlcGVyRXhjZXB0aW9uIGlzIHRocm93bi4KICAgICAqIEBw\nYXJhbSBjaGFubmVsRmFjdG9yeQogICAgICogICAgICAgICAgQSBmYWN0b3J5\nIHRoYXQgd2lsbCBiZSB1c2VkIHRvIGNyZWF0ZSBjb25uZWN0aW9ucyB0byB0\naGUgYm9va2llcwogICAgICogQHRocm93cyBJT0V4Y2VwdGlvbgogICAgICog\nQHRocm93cyBJbnRlcnJ1cHRlZEV4Y2VwdGlvbgogICAgICogQHRocm93cyBL\nZWVwZXJFeGNlcHRpb24gaWYgdGhlIHBhc3NlZCB6ayBoYW5kbGUgaXMgbm90\nIGNvbm5lY3RlZAogICAgICovCiAgICBwdWJsaWMgQm9va0tlZXBlcihDbGll\nbnRDb25maWd1cmF0aW9uIGNvbmYsIFpvb0tlZXBlciB6aywgQ2xpZW50U29j\na2V0Q2hhbm5lbEZhY3RvcnkgY2hhbm5lbEZhY3RvcnkpCiAgICAgICAgICAg\nIHRocm93cyBJT0V4Y2VwdGlvbiwgSW50ZXJydXB0ZWRFeGNlcHRpb24sIEtl\nZXBlckV4Y2VwdGlvbiB7CiAgICAgICAgdGhpcyhjb25mLCB6aywgY2hhbm5l\nbEZhY3RvcnksIE51bGxTdGF0c0xvZ2dlci5JTlNUQU5DRSk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBDb250cnVjdG9yIGZvciB1c2Ugd2l0aCB0aGUgYnVp\nbGRlci4gT3RoZXIgY29uc3RydWN0b3JzIGFsc28gdXNlIGl0LgogICAgICov\nCiAgICBwcml2YXRlIEJvb2tLZWVwZXIoQ2xpZW50Q29uZmlndXJhdGlvbiBj\nb25mLCBab29LZWVwZXIgemssCiAgICAgICAgICAgICAgICAgICAgICAgQ2xp\nZW50U29ja2V0Q2hhbm5lbEZhY3RvcnkgY2hhbm5lbEZhY3RvcnksIFN0YXRz\nTG9nZ2VyIHN0YXRzTG9nZ2VyKQogICAgICAgICAgICB0aHJvd3MgSU9FeGNl\ncHRpb24sIEludGVycnVwdGVkRXhjZXB0aW9uLCBLZWVwZXJFeGNlcHRpb24g\newogICAgICAgIGlmICh6ayA9PSBudWxsIHx8IGNoYW5uZWxGYWN0b3J5ID09\nIG51bGwpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IE51bGxQb2ludGVyRXhj\nZXB0aW9uKCk7CiAgICAgICAgfQogICAgICAgIGlmICghemsuZ2V0U3RhdGUo\nKS5pc0Nvbm5lY3RlZCgpKSB7CiAgICAgICAgICAgIExPRy5lcnJvcigiVW5j\nb25uZWN0ZWQgem9va2VlcGVyIGhhbmRsZSBwYXNzZWQgdG8gYm9va2tlZXBl\nciIpOwogICAgICAgICAgICB0aHJvdyBLZWVwZXJFeGNlcHRpb24uY3JlYXRl\nKEtlZXBlckV4Y2VwdGlvbi5Db2RlLkNPTk5FQ1RJT05MT1NTKTsKICAgICAg\nICB9CiAgICAgICAgdGhpcy5jb25mID0gY29uZjsKICAgICAgICB0aGlzLnpr\nID0gems7CiAgICAgICAgdGhpcy5jaGFubmVsRmFjdG9yeSA9IGNoYW5uZWxG\nYWN0b3J5OwogICAgICAgIFRocmVhZEZhY3RvcnlCdWlsZGVyIHRmYiA9IG5l\ndyBUaHJlYWRGYWN0b3J5QnVpbGRlcigpLnNldE5hbWVGb3JtYXQoCiAgICAg\nICAgICAgICAgICAiQm9va0tlZXBlckNsaWVudFNjaGVkdWxlci0lZCIpOwog\nICAgICAgIHRoaXMuc2NoZWR1bGVyID0gRXhlY3V0b3JzCiAgICAgICAgICAg\nICAgICAubmV3U2luZ2xlVGhyZWFkU2NoZWR1bGVkRXhlY3V0b3IodGZiLmJ1\naWxkKCkpOwogICAgICAgIHRoaXMuc3RhdHNMb2dnZXIgPSBzdGF0c0xvZ2dl\nci5zY29wZShCb29rS2VlcGVyQ2xpZW50U3RhdHMuQ0xJRU5UX1NDT1BFKTsK\nICAgICAgICBpbml0T3BMb2dnZXJzKHRoaXMuc3RhdHNMb2dnZXIpOwoKICAg\nICAgICAvLyBpbml0aWFsaXplIHRoZSBlbnNlbWJsZSBwbGFjZW1lbnQKICAg\nICAgICB0aGlzLnBsYWNlbWVudFBvbGljeSA9IGluaXRpYWxpemVFbnNlbWJs\nZVBsYWNlbWVudFBvbGljeShjb25mKTsKCiAgICAgICAgbWFpbldvcmtlclBv\nb2wgPSBuZXcgT3JkZXJlZFNhZmVFeGVjdXRvcihjb25mLmdldE51bVdvcmtl\nclRocmVhZHMoKSwKICAgICAgICAgICAgICAgICJCb29rS2VlcGVyQ2xpZW50\nV29ya2VyIik7CiAgICAgICAgYm9va2llQ2xpZW50ID0gbmV3IEJvb2tpZUNs\naWVudChjb25mLCBjaGFubmVsRmFjdG9yeSwgbWFpbldvcmtlclBvb2wsIHN0\nYXRzTG9nZ2VyKTsKICAgICAgICBib29raWVXYXRjaGVyID0gbmV3IEJvb2tp\nZVdhdGNoZXIoY29uZiwgc2NoZWR1bGVyLCBwbGFjZW1lbnRQb2xpY3ksIHRo\naXMpOwogICAgICAgIGJvb2tpZVdhdGNoZXIucmVhZEJvb2tpZXNCbG9ja2lu\nZygpOwoKICAgICAgICBsZWRnZXJNYW5hZ2VyRmFjdG9yeSA9IExlZGdlck1h\nbmFnZXJGYWN0b3J5Lm5ld0xlZGdlck1hbmFnZXJGYWN0b3J5KGNvbmYsIHpr\nKTsKICAgICAgICBsZWRnZXJNYW5hZ2VyID0gbmV3IENsZWFudXBMZWRnZXJN\nYW5hZ2VyKGxlZGdlck1hbmFnZXJGYWN0b3J5Lm5ld0xlZGdlck1hbmFnZXIo\nKSk7CiAgICB9CgogICAgcHJpdmF0ZSBFbnNlbWJsZVBsYWNlbWVudFBvbGlj\neSBpbml0aWFsaXplRW5zZW1ibGVQbGFjZW1lbnRQb2xpY3koQ2xpZW50Q29u\nZmlndXJhdGlvbiBjb25mKQogICAgICAgIHRocm93cyBJT0V4Y2VwdGlvbiB7\nCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgQ2xhc3M8PyBleHRlbmRzIEVu\nc2VtYmxlUGxhY2VtZW50UG9saWN5PiBwb2xpY3lDbHMgPSBjb25mLmdldEVu\nc2VtYmxlUGxhY2VtZW50UG9saWN5KCk7CiAgICAgICAgICAgIHJldHVybiBS\nZWZsZWN0aW9uVXRpbHMubmV3SW5zdGFuY2UocG9saWN5Q2xzKS5pbml0aWFs\naXplKGNvbmYpOwogICAgICAgIH0gY2F0Y2ggKENvbmZpZ3VyYXRpb25FeGNl\ncHRpb24gZSkgewogICAgICAgICAgICB0aHJvdyBuZXcgSU9FeGNlcHRpb24o\nIkZhaWxlZCB0byBpbml0aWFsaXplIGVuc2VtYmxlIHBsYWNlbWVudCBwb2xp\nY3kgOiAiLCBlKTsKICAgICAgICB9CiAgICB9CgogICAgaW50IGdldFJldHVy\nblJjKGludCByYykgewogICAgICAgIGlmIChCS0V4Y2VwdGlvbi5Db2RlLk9L\nID09IHJjKSB7CiAgICAgICAgICAgIHJldHVybiByYzsKICAgICAgICB9IGVs\nc2UgewogICAgICAgICAgICBpZiAoYm9va2llQ2xpZW50LmlzQ2xvc2VkKCkp\nIHsKICAgICAgICAgICAgICAgIHJldHVybiBCS0V4Y2VwdGlvbi5Db2RlLkNs\naWVudENsb3NlZEV4Y2VwdGlvbjsKICAgICAgICAgICAgfSBlbHNlIHsKICAg\nICAgICAgICAgICAgIHJldHVybiByYzsKICAgICAgICAgICAgfQogICAgICAg\nIH0KICAgIH0KCiAgICBMZWRnZXJNYW5hZ2VyIGdldExlZGdlck1hbmFnZXIo\nKSB7CiAgICAgICAgcmV0dXJuIGxlZGdlck1hbmFnZXI7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBUaGVyZSBhcmUgMiBkaWdlc3QgdHlwZXMgdGhhdCBjYW4g\nYmUgdXNlZCBmb3IgdmVyaWZpY2F0aW9uLiBUaGUgQ1JDMzIgaXMKICAgICAq\nIGNoZWFwIHRvIGNvbXB1dGUgYnV0IGRvZXMgbm90IHByb3RlY3QgYWdhaW5z\ndCBieXphbnRpbmUgYm9va2llcyAoaS5lLiwgYQogICAgICogYm9va2llIG1p\nZ2h0IHJlcG9ydCBmYWtlIGJ5dGVzIGFuZCBhIG1hdGNoaW5nIENSQzMyKS4g\nVGhlIE1BQyBjb2RlIGlzIG1vcmUKICAgICAqIGV4cGVuc2l2ZSB0byBjb21w\ndXRlLCBidXQgaXMgcHJvdGVjdGVkIGJ5IGEgcGFzc3dvcmQsIGkuZS4sIGEg\nYm9va2llIGNhbid0CiAgICAgKiByZXBvcnQgZmFrZSBieXRlcyB3aXRoIGEg\nbWF0aGNoaW5nIE1BQyB1bmxlc3MgaXQga25vd3MgdGhlIHBhc3N3b3JkCiAg\nICAgKi8KICAgIHB1YmxpYyBlbnVtIERpZ2VzdFR5cGUgewogICAgICAgIE1B\nQywgQ1JDMzIKICAgIH0KCiAgICBab29LZWVwZXIgZ2V0WmtIYW5kbGUoKSB7\nCiAgICAgICAgcmV0dXJuIHprOwogICAgfQoKICAgIHByb3RlY3RlZCBDbGll\nbnRDb25maWd1cmF0aW9uIGdldENvbmYoKSB7CiAgICAgICAgcmV0dXJuIGNv\nbmY7CiAgICB9CgogICAgU3RhdHNMb2dnZXIgZ2V0U3RhdHNMb2dnZXIoKSB7\nCiAgICAgICAgcmV0dXJuIHN0YXRzTG9nZ2VyOwogICAgfQoKICAgIC8qKgog\nICAgICogR2V0IHRoZSBCb29raWVDbGllbnQsIGN1cnJlbnRseSB1c2VkIGZv\nciBkb2luZyBib29raWUgcmVjb3ZlcnkuCiAgICAgKgogICAgICogQHJldHVy\nbiBCb29raWVDbGllbnQgZm9yIHRoZSBCb29rS2VlcGVyIGluc3RhbmNlLgog\nICAgICovCiAgICBCb29raWVDbGllbnQgZ2V0Qm9va2llQ2xpZW50KCkgewog\nICAgICAgIHJldHVybiBib29raWVDbGllbnQ7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBDcmVhdGVzIGEgbmV3IGxlZGdlciBhc3luY2hyb25vdXNseS4gVG8g\nY3JlYXRlIGEgbGVkZ2VyLCB3ZSBuZWVkIHRvIHNwZWNpZnkKICAgICAqIHRo\nZSBlbnNlbWJsZSBzaXplLCB0aGUgcXVvcnVtIHNpemUsIHRoZSBkaWdlc3Qg\ndHlwZSwgYSBwYXNzd29yZCwgYSBjYWxsYmFjawogICAgICogaW1wbGVtZW50\nYXRpb24sIGFuZCBhbiBvcHRpb25hbCBjb250cm9sIG9iamVjdC4gVGhlIGVu\nc2VtYmxlIHNpemUgaXMgaG93CiAgICAgKiBtYW55IGJvb2tpZXMgdGhlIGVu\ndHJpZXMgc2hvdWxkIGJlIHN0cmlwZWQgYW1vbmcgYW5kIHRoZSBxdW9ydW0g\nc2l6ZSBpcyB0aGUKICAgICAqIGRlZ3JlZSBvZiByZXBsaWNhdGlvbiBvZiBl\nYWNoIGVudHJ5LiBUaGUgZGlnZXN0IHR5cGUgaXMgZWl0aGVyIGEgTUFDIG9y\nIGEKICAgICAqIENSQy4gTm90ZSB0aGF0IHRoZSBDUkMgb3B0aW9uIGlzIG5v\ndCBhYmxlIHRvIHByb3RlY3QgYSBjbGllbnQgYWdhaW5zdCBhCiAgICAgKiBi\nb29raWUgdGhhdCByZXBsYWNlcyBhbiBlbnRyeS4gVGhlIHBhc3N3b3JkIGlz\nIHVzZWQgbm90IG9ubHkgdG8KICAgICAqIGF1dGhlbnRpY2F0ZSBhY2Nlc3Mg\ndG8gYSBsZWRnZXIsIGJ1dCBhbHNvIHRvIHZlcmlmeSBlbnRyaWVzIGluIGxl\nZGdlcnMuCiAgICAgKgogICAgICogQHBhcmFtIGVuc1NpemUKICAgICAqICAg\nICAgICAgIG51bWJlciBvZiBib29raWVzIG92ZXIgd2hpY2ggdG8gc3RyaXBl\nIGVudHJpZXMKICAgICAqIEBwYXJhbSB3cml0ZVF1b3J1bVNpemUKICAgICAq\nICAgICAgICAgIG51bWJlciBvZiBib29raWVzIGVhY2ggZW50cnkgd2lsbCBi\nZSB3cml0dGVuIHRvLiBlYWNoIG9mIHRoZXNlIGJvb2tpZXMKICAgICAqICAg\nICAgICAgIG11c3QgYWNrbm93bGVkZ2UgdGhlIGVudHJ5IGJlZm9yZSB0aGUg\nY2FsbCBpcyBjb21wbGV0ZWQuCiAgICAgKiBAcGFyYW0gZGlnZXN0VHlwZQog\nICAgICogICAgICAgICAgZGlnZXN0IHR5cGUsIGVpdGhlciBNQUMgb3IgQ1JD\nMzIKICAgICAqIEBwYXJhbSBwYXNzd2QKICAgICAqICAgICAgICAgIHBhc3N3\nb3JkCiAgICAgKiBAcGFyYW0gY2IKICAgICAqICAgICAgICAgIGNyZWF0ZUNh\nbGxiYWNrIGltcGxlbWVudGF0aW9uCiAgICAgKiBAcGFyYW0gY3R4CiAgICAg\nKiAgICAgICAgICBvcHRpb25hbCBjb250cm9sIG9iamVjdAogICAgICovCiAg\nICBwdWJsaWMgdm9pZCBhc3luY0NyZWF0ZUxlZGdlcihmaW5hbCBpbnQgZW5z\nU2l6ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFs\nIGludCB3cml0ZVF1b3J1bVNpemUsCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICBmaW5hbCBEaWdlc3RUeXBlIGRpZ2VzdFR5cGUsCiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbCBieXRlW10gcGFz\nc3dkLCBmaW5hbCBDcmVhdGVDYWxsYmFjayBjYiwgZmluYWwgT2JqZWN0IGN0\neCkKICAgIHsKICAgICAgICBhc3luY0NyZWF0ZUxlZGdlcihlbnNTaXplLCB3\ncml0ZVF1b3J1bVNpemUsIHdyaXRlUXVvcnVtU2l6ZSwgZGlnZXN0VHlwZSwg\ncGFzc3dkLCBjYiwgY3R4KTsKICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0\nZXMgYSBuZXcgbGVkZ2VyIGFzeW5jaHJvbm91c2x5LiBMZWRnZXJzIGNyZWF0\nZWQgd2l0aCB0aGlzIGNhbGwgaGF2ZQogICAgICogYSBzZXBhcmF0ZSB3cml0\nZSBxdW9ydW0gYW5kIGFjayBxdW9ydW0gc2l6ZS4gVGhlIHdyaXRlIHF1b3J1\nbSBtdXN0IGJlIGxhcmdlciB0aGFuCiAgICAgKiB0aGUgYWNrIHF1b3J1bS4K\nICAgICAqCiAgICAgKiBTZXBhcmF0aW5nIHRoZSB3cml0ZSBhbmQgdGhlIGFj\nayBxdW9ydW0gYWxsb3dzIHRoZSBCb29rS2VlcGVyIGNsaWVudCB0byBjb250\naW51ZQogICAgICogd3JpdGluZyB3aGVuIGEgYm9va2llIGhhcyBmYWlsZWQg\nYnV0IHRoZSBmYWlsdXJlIGhhcyBub3QgeWV0IGJlZW4gZGV0ZWN0ZWQuIERl\ndGVjdGluZwogICAgICogYSBib29raWUgaGFzIGZhaWxlZCBjYW4gdGFrZSBh\nIG51bWJlciBvZiBzZWNvbmRzLCBhcyBjb25maWd1cmVkIGJ5IHRoZSByZWFk\nIHRpbWVvdXQKICAgICAqIHtAbGluayBDbGllbnRDb25maWd1cmF0aW9uI2dl\ndFJlYWRUaW1lb3V0KCl9LiBPbmNlIHRoZSBib29raWUgZmFpbHVyZSBpcyBk\nZXRlY3RlZCwKICAgICAqIHRoYXQgYm9va2llIHdpbGwgYmUgcmVtb3ZlZCBm\ncm9tIHRoZSBlbnNlbWJsZS4KICAgICAqCiAgICAgKiBUaGUgb3RoZXIgcGFy\nYW1ldGVycyBtYXRjaCB0aG9zZSBvZiB7QGxpbmsgI2FzeW5jQ3JlYXRlTGVk\nZ2VyKGludCwgaW50LCBEaWdlc3RUeXBlLCBieXRlW10sCiAgICAgKiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXN5bmNDYWxsYmFj\nay5DcmVhdGVDYWxsYmFjaywgT2JqZWN0KX0KICAgICAqCiAgICAgKiBAcGFy\nYW0gZW5zU2l6ZQogICAgICogICAgICAgICAgbnVtYmVyIG9mIGJvb2tpZXMg\nb3ZlciB3aGljaCB0byBzdHJpcGUgZW50cmllcwogICAgICogQHBhcmFtIHdy\naXRlUXVvcnVtU2l6ZQogICAgICogICAgICAgICAgbnVtYmVyIG9mIGJvb2tp\nZXMgZWFjaCBlbnRyeSB3aWxsIGJlIHdyaXR0ZW4gdG8KICAgICAqIEBwYXJh\nbSBhY2tRdW9ydW1TaXplCiAgICAgKiAgICAgICAgICBudW1iZXIgb2YgYm9v\na2llcyB3aGljaCBtdXN0IGFja25vd2xlZGdlIGFuIGVudHJ5IGJlZm9yZSB0\naGUgY2FsbCBpcyBjb21wbGV0ZWQKICAgICAqIEBwYXJhbSBkaWdlc3RUeXBl\nCiAgICAgKiAgICAgICAgICBkaWdlc3QgdHlwZSwgZWl0aGVyIE1BQyBvciBD\nUkMzMgogICAgICogQHBhcmFtIHBhc3N3ZAogICAgICogICAgICAgICAgcGFz\nc3dvcmQKICAgICAqIEBwYXJhbSBjYgogICAgICogICAgICAgICAgY3JlYXRl\nQ2FsbGJhY2sgaW1wbGVtZW50YXRpb24KICAgICAqIEBwYXJhbSBjdHgKICAg\nICAqICAgICAgICAgIG9wdGlvbmFsIGNvbnRyb2wgb2JqZWN0CiAgICAgKi8K\nCiAgICBwdWJsaWMgdm9pZCBhc3luY0NyZWF0ZUxlZGdlcihmaW5hbCBpbnQg\nZW5zU2l6ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZp\nbmFsIGludCB3cml0ZVF1b3J1bVNpemUsCiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICBmaW5hbCBpbnQgYWNrUXVvcnVtU2l6ZSwKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsIERpZ2VzdFR5cGUg\nZGlnZXN0VHlwZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIGZpbmFsIGJ5dGVbXSBwYXNzd2QsIGZpbmFsIENyZWF0ZUNhbGxiYWNrIGNi\nLCBmaW5hbCBPYmplY3QgY3R4KSB7CiAgICAgICAgaWYgKHdyaXRlUXVvcnVt\nU2l6ZSA8IGFja1F1b3J1bVNpemUpIHsKICAgICAgICAgICAgdGhyb3cgbmV3\nIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiV3JpdGUgcXVvcnVtIG11c3Qg\nYmUgbGFyZ2VyIHRoYW4gYWNrIHF1b3J1bSIpOwogICAgICAgIH0KICAgICAg\nICBjbG9zZUxvY2sucmVhZExvY2soKS5sb2NrKCk7CiAgICAgICAgdHJ5IHsK\nICAgICAgICAgICAgaWYgKGNsb3NlZCkgewogICAgICAgICAgICAgICAgY2Iu\nY3JlYXRlQ29tcGxldGUoQktFeGNlcHRpb24uQ29kZS5DbGllbnRDbG9zZWRF\neGNlcHRpb24sIG51bGwsIGN0eCk7CiAgICAgICAgICAgICAgICByZXR1cm47\nCiAgICAgICAgICAgIH0KICAgICAgICAgICAgbmV3IExlZGdlckNyZWF0ZU9w\nKEJvb2tLZWVwZXIudGhpcywgZW5zU2l6ZSwgd3JpdGVRdW9ydW1TaXplLAog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNrUXVvcnVtU2l6ZSwg\nZGlnZXN0VHlwZSwgcGFzc3dkLCBjYiwgY3R4KQogICAgICAgICAgICAgICAg\nLmluaXRpYXRlKCk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAg\nY2xvc2VMb2NrLnJlYWRMb2NrKCkudW5sb2NrKCk7CiAgICAgICAgfQogICAg\nfQoKCiAgICAvKioKICAgICAqIENyZWF0ZXMgYSBuZXcgbGVkZ2VyLiBEZWZh\ndWx0IG9mIDMgc2VydmVycywgYW5kIHF1b3J1bSBvZiAyIHNlcnZlcnMuCiAg\nICAgKgogICAgICogQHBhcmFtIGRpZ2VzdFR5cGUKICAgICAqICAgICAgICAg\nIGRpZ2VzdCB0eXBlLCBlaXRoZXIgTUFDIG9yIENSQzMyCiAgICAgKiBAcGFy\nYW0gcGFzc3dkCiAgICAgKiAgICAgICAgICBwYXNzd29yZAogICAgICogQHJl\ndHVybiBhIGhhbmRsZSB0byB0aGUgbmV3bHkgY3JlYXRlZCBsZWRnZXIKICAg\nICAqIEB0aHJvd3MgSW50ZXJydXB0ZWRFeGNlcHRpb24KICAgICAqIEB0aHJv\nd3MgQktFeGNlcHRpb24KICAgICAqLwogICAgcHVibGljIExlZGdlckhhbmRs\nZSBjcmVhdGVMZWRnZXIoRGlnZXN0VHlwZSBkaWdlc3RUeXBlLCBieXRlIHBh\nc3N3ZFtdKQogICAgICAgICAgICB0aHJvd3MgQktFeGNlcHRpb24sIEludGVy\ncnVwdGVkRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gY3JlYXRlTGVkZ2Vy\nKDMsIDIsIGRpZ2VzdFR5cGUsIHBhc3N3ZCk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBTeW5jaHJvbm91cyBjYWxsIHRvIGNyZWF0ZSBsZWRnZXIuIFBhcmFt\nZXRlcnMgbWF0Y2ggdGhvc2Ugb2YKICAgICAqIHtAbGluayAjYXN5bmNDcmVh\ndGVMZWRnZXIoaW50LCBpbnQsIERpZ2VzdFR5cGUsIGJ5dGVbXSwKICAgICAq\nICAgICAgICAgICAgICAgICAgICAgICAgICAgQXN5bmNDYWxsYmFjay5DcmVh\ndGVDYWxsYmFjaywgT2JqZWN0KX0KICAgICAqCiAgICAgKiBAcGFyYW0gZW5z\nU2l6ZQogICAgICogQHBhcmFtIHFTaXplCiAgICAgKiBAcGFyYW0gZGlnZXN0\nVHlwZQogICAgICogQHBhcmFtIHBhc3N3ZAogICAgICogQHJldHVybiBhIGhh\nbmRsZSB0byB0aGUgbmV3bHkgY3JlYXRlZCBsZWRnZXIKICAgICAqIEB0aHJv\nd3MgSW50ZXJydXB0ZWRFeGNlcHRpb24KICAgICAqIEB0aHJvd3MgQktFeGNl\ncHRpb24KICAgICAqLwogICAgcHVibGljIExlZGdlckhhbmRsZSBjcmVhdGVM\nZWRnZXIoaW50IGVuc1NpemUsIGludCBxU2l6ZSwKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIERpZ2VzdFR5cGUgZGlnZXN0VHlwZSwg\nYnl0ZSBwYXNzd2RbXSkKICAgICAgICAgICAgdGhyb3dzIEludGVycnVwdGVk\nRXhjZXB0aW9uLCBCS0V4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGNyZWF0\nZUxlZGdlcihlbnNTaXplLCBxU2l6ZSwgcVNpemUsIGRpZ2VzdFR5cGUsIHBh\nc3N3ZCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBTeW5jaHJvbm91cyBjYWxs\nIHRvIGNyZWF0ZSBsZWRnZXIuIFBhcmFtZXRlcnMgbWF0Y2ggdGhvc2Ugb2YK\nICAgICAqIHtAbGluayAjYXN5bmNDcmVhdGVMZWRnZXIoaW50LCBpbnQsIGlu\ndCwgRGlnZXN0VHlwZSwgYnl0ZVtdLAogICAgICogICAgICAgICAgICAgICAg\nICAgICAgICAgICBBc3luY0NhbGxiYWNrLkNyZWF0ZUNhbGxiYWNrLCBPYmpl\nY3QpfQogICAgICoKICAgICAqIEBwYXJhbSBlbnNTaXplCiAgICAgKiBAcGFy\nYW0gd3JpdGVRdW9ydW1TaXplCiAgICAgKiBAcGFyYW0gYWNrUXVvcnVtU2l6\nZQogICAgICogQHBhcmFtIGRpZ2VzdFR5cGUKICAgICAqIEBwYXJhbSBwYXNz\nd2QKICAgICAqIEByZXR1cm4gYSBoYW5kbGUgdG8gdGhlIG5ld2x5IGNyZWF0\nZWQgbGVkZ2VyCiAgICAgKiBAdGhyb3dzIEludGVycnVwdGVkRXhjZXB0aW9u\nCiAgICAgKiBAdGhyb3dzIEJLRXhjZXB0aW9uCiAgICAgKi8KICAgIHB1Ymxp\nYyBMZWRnZXJIYW5kbGUgY3JlYXRlTGVkZ2VyKGludCBlbnNTaXplLCBpbnQg\nd3JpdGVRdW9ydW1TaXplLCBpbnQgYWNrUXVvcnVtU2l6ZSwKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgIERpZ2VzdFR5cGUgZGlnZXN0\nVHlwZSwgYnl0ZSBwYXNzd2RbXSkKICAgICAgICAgICAgdGhyb3dzIEludGVy\ncnVwdGVkRXhjZXB0aW9uLCBCS0V4Y2VwdGlvbiB7CiAgICAgICAgU3luY0Nv\ndW50ZXIgY291bnRlciA9IG5ldyBTeW5jQ291bnRlcigpOwogICAgICAgIGNv\ndW50ZXIuaW5jKCk7CiAgICAgICAgLyoKICAgICAgICAgKiBDYWxscyBhc3lu\nY2hyb25vdXMgdmVyc2lvbgogICAgICAgICAqLwogICAgICAgIGFzeW5jQ3Jl\nYXRlTGVkZ2VyKGVuc1NpemUsIHdyaXRlUXVvcnVtU2l6ZSwgYWNrUXVvcnVt\nU2l6ZSwgZGlnZXN0VHlwZSwgcGFzc3dkLAogICAgICAgICAgICAgICAgICAg\nICAgICAgIG5ldyBTeW5jQ3JlYXRlQ2FsbGJhY2soKSwgY291bnRlcik7Cgog\nICAgICAgIC8qCiAgICAgICAgICogV2FpdAogICAgICAgICAqLwogICAgICAg\nIGNvdW50ZXIuYmxvY2soMCk7CiAgICAgICAgaWYgKGNvdW50ZXIuZ2V0cmMo\nKSAhPSBCS0V4Y2VwdGlvbi5Db2RlLk9LKSB7CiAgICAgICAgICAgIExPRy5l\ncnJvcigiRXJyb3Igd2hpbGUgY3JlYXRpbmcgbGVkZ2VyIDoge30iLCBjb3Vu\ndGVyLmdldHJjKCkpOwogICAgICAgICAgICB0aHJvdyBCS0V4Y2VwdGlvbi5j\ncmVhdGUoY291bnRlci5nZXRyYygpKTsKICAgICAgICB9IGVsc2UgaWYgKGNv\ndW50ZXIuZ2V0TGgoKSA9PSBudWxsKSB7CiAgICAgICAgICAgIExPRy5lcnJv\ncigiVW5leHBlY3RlZCBjb25kaXRpb24gOiBubyBsZWRnZXIgaGFuZGxlIHJl\ndHVybmVkIGZvciBhIHN1Y2Nlc3MgbGVkZ2VyIGNyZWF0aW9uIik7CiAgICAg\nICAgICAgIHRocm93IEJLRXhjZXB0aW9uLmNyZWF0ZShCS0V4Y2VwdGlvbi5D\nb2RlLlVuZXhwZWN0ZWRDb25kaXRpb25FeGNlcHRpb24pOwogICAgICAgIH0K\nCiAgICAgICAgcmV0dXJuIGNvdW50ZXIuZ2V0TGgoKTsKICAgIH0KCiAgICAv\nKioKICAgICAqIE9wZW4gZXhpc3RpbmcgbGVkZ2VyIGFzeW5jaHJvbm91c2x5\nIGZvciByZWFkaW5nLgogICAgICoKICAgICAqIE9wZW5pbmcgYSBsZWRnZXIg\nd2l0aCB0aGlzIG1ldGhvZCBpbnZva2VzIGZlbmNpbmcgYW5kIHJlY292ZXJ5\nIG9uIHRoZSBsZWRnZXIKICAgICAqIGlmIHRoZSBsZWRnZXIgaGFzIG5vdCBi\nZWVuIGNsb3NlZC4gRmVuY2luZyB3aWxsIGJsb2NrIGFsbCBvdGhlciBjbGll\nbnRzIGZyb20KICAgICAqIHdyaXRpbmcgdG8gdGhlIGxlZGdlci4gUmVjb3Zl\ncnkgd2lsbCBtYWtlIHN1cmUgdGhhdCB0aGUgbGVkZ2VyIGlzIGNsb3NlZAog\nICAgICogYmVmb3JlIHJlYWRpbmcgZnJvbSBpdC4KICAgICAqCiAgICAgKiBS\nZWNvdmVyeSBhbHNvIG1ha2VzIHN1cmUgdGhhdCBhbnkgZW50cmllcyB3aGlj\naCByZWFjaGVkIG9uZSBib29raWUsIGJ1dCBub3QgYQogICAgICogcXVvcnVt\nLCB3aWxsIGJlIHJlcGxpY2F0ZWQgdG8gYSBxdW9ydW0gb2YgYm9va2llcy4g\nVGhpcyBvY2N1cnMgaW4gY2FzZXMgd2VyZQogICAgICogdGhlIHdyaXRlciBv\nZiBhIGxlZGdlciBjcmFzaGVzIGFmdGVyIHNlbmRpbmcgYSB3cml0ZSByZXF1\nZXN0IHRvIG9uZSBib29raWUgYnV0CiAgICAgKiBiZWZvcmUgYmVpbmcgYWJs\nZSB0byBzZW5kIGl0IHRvIHRoZSByZXN0IG9mIHRoZSBib29raWVzIGluIHRo\nZSBxdW9ydW0uCiAgICAgKgogICAgICogSWYgdGhlIGxlZGdlciBpcyBhbHJl\nYWR5IGNsb3NlZCwgbmVpdGhlciBmZW5jaW5nIG5vciByZWNvdmVyeSB3aWxs\nIGJlIGFwcGxpZWQuCiAgICAgKgogICAgICogQHNlZSBMZWRnZXJIYW5kbGUj\nYXN5bmNDbG9zZQogICAgICoKICAgICAqIEBwYXJhbSBsSWQKICAgICAqICAg\nICAgICAgIGxlZGdlciBpZGVudGlmaWVyCiAgICAgKiBAcGFyYW0gZGlnZXN0\nVHlwZQogICAgICogICAgICAgICAgZGlnZXN0IHR5cGUsIGVpdGhlciBNQUMg\nb3IgQ1JDMzIKICAgICAqIEBwYXJhbSBwYXNzd2QKICAgICAqICAgICAgICAg\nIHBhc3N3b3JkCiAgICAgKiBAcGFyYW0gY3R4CiAgICAgKiAgICAgICAgICBv\ncHRpb25hbCBjb250cm9sIG9iamVjdAogICAgICovCiAgICBwdWJsaWMgdm9p\nZCBhc3luY09wZW5MZWRnZXIoZmluYWwgbG9uZyBsSWQsIGZpbmFsIERpZ2Vz\ndFR5cGUgZGlnZXN0VHlwZSwgZmluYWwgYnl0ZSBwYXNzd2RbXSwKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbCBPcGVuQ2FsbGJhY2sg\nY2IsIGZpbmFsIE9iamVjdCBjdHgpIHsKICAgICAgICBjbG9zZUxvY2sucmVh\nZExvY2soKS5sb2NrKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYg\nKGNsb3NlZCkgewogICAgICAgICAgICAgICAgY2Iub3BlbkNvbXBsZXRlKEJL\nRXhjZXB0aW9uLkNvZGUuQ2xpZW50Q2xvc2VkRXhjZXB0aW9uLCBudWxsLCBj\ndHgpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAg\nICAgICAgICAgIG5ldyBMZWRnZXJPcGVuT3AoQm9va0tlZXBlci50aGlzLCBs\nSWQsIGRpZ2VzdFR5cGUsIHBhc3N3ZCwgY2IsIGN0eCkuaW5pdGlhdGUoKTsK\nICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBjbG9zZUxvY2sucmVh\nZExvY2soKS51bmxvY2soKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAg\nICAgKiBPcGVuIGV4aXN0aW5nIGxlZGdlciBhc3luY2hyb25vdXNseSBmb3Ig\ncmVhZGluZywgYnV0IGl0IGRvZXMgbm90IHRyeSB0bwogICAgICogcmVjb3Zl\nciB0aGUgbGVkZ2VyIGlmIGl0IGlzIG5vdCB5ZXQgY2xvc2VkLiBUaGUgYXBw\nbGljYXRpb24gbmVlZHMgdG8gdXNlCiAgICAgKiBpdCBjYXJlZnVsbHksIHNp\nbmNlIHRoZSB3cml0ZXIgbWlnaHQgaGF2ZSBjcmFzaGVkIGFuZCBsZWRnZXIg\nd2lsbCByZW1haW4KICAgICAqIHVuc2VhbGVkIGZvcmV2ZXIgaWYgdGhlcmUg\naXMgbm8gZXh0ZXJuYWwgbWVjaGFuaXNtIHRvIGRldGVjdCB0aGUgZmFpbHVy\nZQogICAgICogb2YgdGhlIHdyaXRlciBhbmQgdGhlIGxlZGdlciBpcyBub3Qg\nb3BlbiBpbiBhIHNhZmUgbWFubmVyLCBpbnZva2luZyB0aGUKICAgICAqIHJl\nY292ZXJ5IHByb2NlZHVyZS4KICAgICAqCiAgICAgKiBPcGVuaW5nIGEgbGVk\nZ2VyIHdpdGhvdXQgcmVjb3ZlcnkgZG9lcyBub3QgZmVuY2UgdGhlIGxlZGdl\nci4gQXMgc3VjaCwgb3RoZXIKICAgICAqIGNsaWVudHMgY2FuIGNvbnRpbnVl\nIHRvIHdyaXRlIHRvIHRoZSBsZWRnZXIuCiAgICAgKgogICAgICogVGhpcyBt\nZXRob2QgcmV0dXJucyBhIHJlYWQgb25seSBsZWRnZXIgaGFuZGxlLiBJdCB3\naWxsIG5vdCBiZSBwb3NzaWJsZQogICAgICogdG8gYWRkIGVudHJpZXMgdG8g\ndGhlIGxlZGdlci4gQW55IGF0dGVtcHQgdG8gYWRkIGVudHJpZXMgd2lsbCB0\naHJvdyBhbgogICAgICogZXhjZXB0aW9uLgogICAgICoKICAgICAqIFJlYWRz\nIGZyb20gdGhlIHJldHVybmVkIGxlZGdlciB3aWxsIG9ubHkgYmUgYWJsZSB0\nbyByZWFkIGVudHJpZXMgdXAgdW50aWwKICAgICAqIHRoZSBsYXN0Q29uZmly\nbWVkRW50cnkgYXQgdGhlIHBvaW50IGluIHRpbWUgYXQgd2hpY2ggdGhlIGxl\nZGdlciB3YXMgb3BlbmVkLgogICAgICoKICAgICAqIEBwYXJhbSBsSWQKICAg\nICAqICAgICAgICAgIGxlZGdlciBpZGVudGlmaWVyCiAgICAgKiBAcGFyYW0g\nZGlnZXN0VHlwZQogICAgICogICAgICAgICAgZGlnZXN0IHR5cGUsIGVpdGhl\nciBNQUMgb3IgQ1JDMzIKICAgICAqIEBwYXJhbSBwYXNzd2QKICAgICAqICAg\nICAgICAgIHBhc3N3b3JkCiAgICAgKiBAcGFyYW0gY3R4CiAgICAgKiAgICAg\nICAgICBvcHRpb25hbCBjb250cm9sIG9iamVjdAogICAgICovCiAgICBwdWJs\naWMgdm9pZCBhc3luY09wZW5MZWRnZXJOb1JlY292ZXJ5KGZpbmFsIGxvbmcg\nbElkLCBmaW5hbCBEaWdlc3RUeXBlIGRpZ2VzdFR5cGUsIGZpbmFsIGJ5dGUg\ncGFzc3dkW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIGZpbmFsIE9wZW5DYWxsYmFjayBjYiwgZmluYWwgT2JqZWN0IGN0\neCkgewogICAgICAgIGNsb3NlTG9jay5yZWFkTG9jaygpLmxvY2soKTsKICAg\nICAgICB0cnkgewogICAgICAgICAgICBpZiAoY2xvc2VkKSB7CiAgICAgICAg\nICAgICAgICBjYi5vcGVuQ29tcGxldGUoQktFeGNlcHRpb24uQ29kZS5DbGll\nbnRDbG9zZWRFeGNlcHRpb24sIG51bGwsIGN0eCk7CiAgICAgICAgICAgICAg\nICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbmV3IExlZGdl\nck9wZW5PcChCb29rS2VlcGVyLnRoaXMsIGxJZCwgZGlnZXN0VHlwZSwgcGFz\nc3dkLCBjYiwgY3R4KS5pbml0aWF0ZVdpdGhvdXRSZWNvdmVyeSgpOwogICAg\nICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIGNsb3NlTG9jay5yZWFkTG9j\naygpLnVubG9jaygpOwogICAgICAgIH0KICAgIH0KCgogICAgLyoqCiAgICAg\nKiBTeW5jaHJvbm91cyBvcGVuIGxlZGdlciBjYWxsCiAgICAgKgogICAgICog\nQHNlZSAjYXN5bmNPcGVuTGVkZ2VyCiAgICAgKiBAcGFyYW0gbElkCiAgICAg\nKiAgICAgICAgICBsZWRnZXIgaWRlbnRpZmllcgogICAgICogQHBhcmFtIGRp\nZ2VzdFR5cGUKICAgICAqICAgICAgICAgIGRpZ2VzdCB0eXBlLCBlaXRoZXIg\nTUFDIG9yIENSQzMyCiAgICAgKiBAcGFyYW0gcGFzc3dkCiAgICAgKiAgICAg\nICAgICBwYXNzd29yZAogICAgICogQHJldHVybiBhIGhhbmRsZSB0byB0aGUg\nb3BlbiBsZWRnZXIKICAgICAqIEB0aHJvd3MgSW50ZXJydXB0ZWRFeGNlcHRp\nb24KICAgICAqIEB0aHJvd3MgQktFeGNlcHRpb24KICAgICAqLwoKICAgIHB1\nYmxpYyBMZWRnZXJIYW5kbGUgb3BlbkxlZGdlcihsb25nIGxJZCwgRGlnZXN0\nVHlwZSBkaWdlc3RUeXBlLCBieXRlIHBhc3N3ZFtdKQogICAgICAgICAgICB0\naHJvd3MgQktFeGNlcHRpb24sIEludGVycnVwdGVkRXhjZXB0aW9uIHsKICAg\nICAgICBTeW5jQ291bnRlciBjb3VudGVyID0gbmV3IFN5bmNDb3VudGVyKCk7\nCiAgICAgICAgY291bnRlci5pbmMoKTsKCiAgICAgICAgLyoKICAgICAgICAg\nKiBDYWxscyBhc3luYyBvcGVuIGxlZGdlcgogICAgICAgICAqLwogICAgICAg\nIGFzeW5jT3BlbkxlZGdlcihsSWQsIGRpZ2VzdFR5cGUsIHBhc3N3ZCwgbmV3\nIFN5bmNPcGVuQ2FsbGJhY2soKSwgY291bnRlcik7CgogICAgICAgIC8qCiAg\nICAgICAgICogV2FpdAogICAgICAgICAqLwogICAgICAgIGNvdW50ZXIuYmxv\nY2soMCk7CiAgICAgICAgaWYgKGNvdW50ZXIuZ2V0cmMoKSAhPSBCS0V4Y2Vw\ndGlvbi5Db2RlLk9LKQogICAgICAgICAgICB0aHJvdyBCS0V4Y2VwdGlvbi5j\ncmVhdGUoY291bnRlci5nZXRyYygpKTsKCiAgICAgICAgcmV0dXJuIGNvdW50\nZXIuZ2V0TGgoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFN5bmNocm9ub3Vz\nLCB1bnNhZmUgb3BlbiBsZWRnZXIgY2FsbAogICAgICoKICAgICAqIEBzZWUg\nI2FzeW5jT3BlbkxlZGdlck5vUmVjb3ZlcnkKICAgICAqIEBwYXJhbSBsSWQK\nICAgICAqICAgICAgICAgIGxlZGdlciBpZGVudGlmaWVyCiAgICAgKiBAcGFy\nYW0gZGlnZXN0VHlwZQogICAgICogICAgICAgICAgZGlnZXN0IHR5cGUsIGVp\ndGhlciBNQUMgb3IgQ1JDMzIKICAgICAqIEBwYXJhbSBwYXNzd2QKICAgICAq\nICAgICAgICAgIHBhc3N3b3JkCiAgICAgKiBAcmV0dXJuIGEgaGFuZGxlIHRv\nIHRoZSBvcGVuIGxlZGdlcgogICAgICogQHRocm93cyBJbnRlcnJ1cHRlZEV4\nY2VwdGlvbgogICAgICogQHRocm93cyBCS0V4Y2VwdGlvbgogICAgICovCgog\nICAgcHVibGljIExlZGdlckhhbmRsZSBvcGVuTGVkZ2VyTm9SZWNvdmVyeShs\nb25nIGxJZCwgRGlnZXN0VHlwZSBkaWdlc3RUeXBlLCBieXRlIHBhc3N3ZFtd\nKQogICAgICAgICAgICB0aHJvd3MgQktFeGNlcHRpb24sIEludGVycnVwdGVk\nRXhjZXB0aW9uIHsKICAgICAgICBTeW5jQ291bnRlciBjb3VudGVyID0gbmV3\nIFN5bmNDb3VudGVyKCk7CiAgICAgICAgY291bnRlci5pbmMoKTsKCiAgICAg\nICAgLyoKICAgICAgICAgKiBDYWxscyBhc3luYyBvcGVuIGxlZGdlcgogICAg\nICAgICAqLwogICAgICAgIGFzeW5jT3BlbkxlZGdlck5vUmVjb3ZlcnkobElk\nLCBkaWdlc3RUeXBlLCBwYXNzd2QsCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICBuZXcgU3luY09wZW5DYWxsYmFjaygpLCBjb3VudGVyKTsK\nCiAgICAgICAgLyoKICAgICAgICAgKiBXYWl0CiAgICAgICAgICovCiAgICAg\nICAgY291bnRlci5ibG9jaygwKTsKICAgICAgICBpZiAoY291bnRlci5nZXRy\nYygpICE9IEJLRXhjZXB0aW9uLkNvZGUuT0spCiAgICAgICAgICAgIHRocm93\nIEJLRXhjZXB0aW9uLmNyZWF0ZShjb3VudGVyLmdldHJjKCkpOwoKICAgICAg\nICByZXR1cm4gY291bnRlci5nZXRMaCgpOwogICAgfQoKICAgIC8qKgogICAg\nICogRGVsZXRlcyBhIGxlZGdlciBhc3luY2hyb25vdXNseS4KICAgICAqCiAg\nICAgKiBAcGFyYW0gbElkCiAgICAgKiAgICAgICAgICAgIGxlZGdlciBJZAog\nICAgICogQHBhcmFtIGNiCiAgICAgKiAgICAgICAgICAgIGRlbGV0ZUNhbGxi\nYWNrIGltcGxlbWVudGF0aW9uCiAgICAgKiBAcGFyYW0gY3R4CiAgICAgKiAg\nICAgICAgICAgIG9wdGlvbmFsIGNvbnRyb2wgb2JqZWN0CiAgICAgKi8KICAg\nIHB1YmxpYyB2b2lkIGFzeW5jRGVsZXRlTGVkZ2VyKGZpbmFsIGxvbmcgbElk\nLCBmaW5hbCBEZWxldGVDYWxsYmFjayBjYiwgZmluYWwgT2JqZWN0IGN0eCkg\newogICAgICAgIGNsb3NlTG9jay5yZWFkTG9jaygpLmxvY2soKTsKICAgICAg\nICB0cnkgewogICAgICAgICAgICBpZiAoY2xvc2VkKSB7CiAgICAgICAgICAg\nICAgICBjYi5kZWxldGVDb21wbGV0ZShCS0V4Y2VwdGlvbi5Db2RlLkNsaWVu\ndENsb3NlZEV4Y2VwdGlvbiwgY3R4KTsKICAgICAgICAgICAgICAgIHJldHVy\nbjsKICAgICAgICAgICAgfQogICAgICAgICAgICBuZXcgTGVkZ2VyRGVsZXRl\nT3AoQm9va0tlZXBlci50aGlzLCBsSWQsIGNiLCBjdHgpLmluaXRpYXRlKCk7\nCiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgY2xvc2VMb2NrLnJl\nYWRMb2NrKCkudW5sb2NrKCk7CiAgICAgICAgfQogICAgfQoKCiAgICAvKioK\nICAgICAqIFN5bmNocm9ub3VzIGNhbGwgdG8gZGVsZXRlIGEgbGVkZ2VyLiBQ\nYXJhbWV0ZXJzIG1hdGNoIHRob3NlIG9mCiAgICAgKiB7QGxpbmsgI2FzeW5j\nRGVsZXRlTGVkZ2VyKGxvbmcsIEFzeW5jQ2FsbGJhY2suRGVsZXRlQ2FsbGJh\nY2ssIE9iamVjdCl9CiAgICAgKgogICAgICogQHBhcmFtIGxJZAogICAgICog\nICAgICAgICAgICBsZWRnZXJJZAogICAgICogQHRocm93cyBJbnRlcnJ1cHRl\nZEV4Y2VwdGlvbgogICAgICogQHRocm93cyBCS0V4Y2VwdGlvbi5CS05vU3Vj\naExlZGdlckV4aXN0c0V4Y2VwdGlvbiBpZiB0aGUgbGVkZ2VyIGRvZXNuJ3Qg\nZXhpc3QKICAgICAqIEB0aHJvd3MgQktFeGNlcHRpb24KICAgICAqLwogICAg\ncHVibGljIHZvaWQgZGVsZXRlTGVkZ2VyKGxvbmcgbElkKSB0aHJvd3MgSW50\nZXJydXB0ZWRFeGNlcHRpb24sIEJLRXhjZXB0aW9uIHsKICAgICAgICBTeW5j\nQ291bnRlciBjb3VudGVyID0gbmV3IFN5bmNDb3VudGVyKCk7CiAgICAgICAg\nY291bnRlci5pbmMoKTsKICAgICAgICAvLyBDYWxsIGFzeW5jaHJvbm91cyB2\nZXJzaW9uCiAgICAgICAgYXN5bmNEZWxldGVMZWRnZXIobElkLCBuZXcgU3lu\nY0RlbGV0ZUNhbGxiYWNrKCksIGNvdW50ZXIpOwogICAgICAgIC8vIFdhaXQK\nICAgICAgICBjb3VudGVyLmJsb2NrKDApOwogICAgICAgIGlmIChjb3VudGVy\nLmdldHJjKCkgIT0gQktFeGNlcHRpb24uQ29kZS5PSykgewogICAgICAgICAg\nICBMT0cuZXJyb3IoIkVycm9yIGRlbGV0aW5nIGxlZGdlciAiICsgbElkICsg\nIiA6ICIgKyBjb3VudGVyLmdldHJjKCkpOwogICAgICAgICAgICB0aHJvdyBC\nS0V4Y2VwdGlvbi5jcmVhdGUoY291bnRlci5nZXRyYygpKTsKICAgICAgICB9\nCiAgICB9CgogICAgLyoqCiAgICAgKiBDaGVjayBhc3luY2hyb25vdXNseSB3\naGV0aGVyIHRoZSBsZWRnZXIgd2l0aCBpZGVudGlmaWVyIDxpPmxJZDwvaT4K\nICAgICAqIGhhcyBiZWVuIGNsb3NlZC4KICAgICAqCiAgICAgKiBAcGFyYW0g\nbElkICAgbGVkZ2VyIGlkZW50aWZpZXIKICAgICAqIEBwYXJhbSBjYiAgICBj\nYWxsYmFjayBtZXRob2QKICAgICAqLwogICAgcHVibGljIHZvaWQgYXN5bmNJ\nc0Nsb3NlZChsb25nIGxJZCwgZmluYWwgSXNDbG9zZWRDYWxsYmFjayBjYiwg\nZmluYWwgT2JqZWN0IGN0eCl7CiAgICAgICAgbGVkZ2VyTWFuYWdlci5yZWFk\nTGVkZ2VyTWV0YWRhdGEobElkLCBuZXcgR2VuZXJpY0NhbGxiYWNrPExlZGdl\nck1ldGFkYXRhPigpewogICAgICAgICAgICBwdWJsaWMgdm9pZCBvcGVyYXRp\nb25Db21wbGV0ZShpbnQgcmMsIExlZGdlck1ldGFkYXRhIGxtKXsKICAgICAg\nICAgICAgICAgIGlmIChyYyA9PSBCS0V4Y2VwdGlvbi5Db2RlLk9LKSB7CiAg\nICAgICAgICAgICAgICAgICAgY2IuaXNDbG9zZWRDb21wbGV0ZShyYywgbG0u\naXNDbG9zZWQoKSwgY3R4KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAg\nICAgICAgICAgICAgICAgICAgY2IuaXNDbG9zZWRDb21wbGV0ZShyYywgZmFs\nc2UsIGN0eCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAg\nICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIENoZWNrIHdoZXRoZXIg\ndGhlIGxlZGdlciB3aXRoIGlkZW50aWZpZXIgPGk+bElkPC9pPgogICAgICog\naGFzIGJlZW4gY2xvc2VkLgogICAgICoKICAgICAqIEBwYXJhbSBsSWQKICAg\nICAqIEByZXR1cm4gYm9vbGVhbiB0cnVlIGlmIGxlZGdlciBoYXMgYmVlbiBj\nbG9zZWQKICAgICAqIEB0aHJvd3MgQktFeGNlcHRpb24KICAgICAqLwogICAg\ncHVibGljIGJvb2xlYW4gaXNDbG9zZWQobG9uZyBsSWQpCiAgICB0aHJvd3Mg\nQktFeGNlcHRpb24sIEludGVycnVwdGVkRXhjZXB0aW9uIHsKICAgICAgICBm\naW5hbCBjbGFzcyBSZXN1bHQgewogICAgICAgICAgICBpbnQgcmM7CiAgICAg\nICAgICAgIGJvb2xlYW4gaXNDbG9zZWQ7CiAgICAgICAgICAgIGZpbmFsIENv\ndW50RG93bkxhdGNoIG5vdGlmaWVyID0gbmV3IENvdW50RG93bkxhdGNoKDEp\nOwogICAgICAgIH0KCiAgICAgICAgZmluYWwgUmVzdWx0IHJlc3VsdCA9IG5l\ndyBSZXN1bHQoKTsKCiAgICAgICAgZmluYWwgSXNDbG9zZWRDYWxsYmFjayBj\nYiA9IG5ldyBJc0Nsb3NlZENhbGxiYWNrKCl7CiAgICAgICAgICAgIHB1Ymxp\nYyB2b2lkIGlzQ2xvc2VkQ29tcGxldGUoaW50IHJjLCBib29sZWFuIGlzQ2xv\nc2VkLCBPYmplY3QgY3R4KXsKICAgICAgICAgICAgICAgICAgICByZXN1bHQu\naXNDbG9zZWQgPSBpc0Nsb3NlZDsKICAgICAgICAgICAgICAgICAgICByZXN1\nbHQucmMgPSByYzsKICAgICAgICAgICAgICAgICAgICByZXN1bHQubm90aWZp\nZXIuY291bnREb3duKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAg\nICAgICAvKgogICAgICAgICAqIENhbGwgYXN5bmNocm9ub3VzIHZlcnNpb24g\nb2YgaXNDbG9zZWQKICAgICAgICAgKi8KICAgICAgICBhc3luY0lzQ2xvc2Vk\nKGxJZCwgY2IsIG51bGwpOwoKICAgICAgICAvKgogICAgICAgICAqIFdhaXQg\nZm9yIGNhbGxiYWNrCiAgICAgICAgICovCiAgICAgICAgcmVzdWx0Lm5vdGlm\naWVyLmF3YWl0KCk7CgogICAgICAgIGlmIChyZXN1bHQucmMgIT0gQktFeGNl\ncHRpb24uQ29kZS5PSykgewogICAgICAgICAgICB0aHJvdyBCS0V4Y2VwdGlv\nbi5jcmVhdGUocmVzdWx0LnJjKTsKICAgICAgICB9CgogICAgICAgIHJldHVy\nbiByZXN1bHQuaXNDbG9zZWQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBTaHV0\ncyBkb3duIGNsaWVudC4KICAgICAqCiAgICAgKi8KICAgIHB1YmxpYyB2b2lk\nIGNsb3NlKCkgdGhyb3dzIEludGVycnVwdGVkRXhjZXB0aW9uLCBCS0V4Y2Vw\ndGlvbiB7CiAgICAgICAgY2xvc2VMb2NrLndyaXRlTG9jaygpLmxvY2soKTsK\nICAgICAgICB0cnkgewogICAgICAgICAgICBpZiAoY2xvc2VkKSB7CiAgICAg\nICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAg\nY2xvc2VkID0gdHJ1ZTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAg\nICBjbG9zZUxvY2sud3JpdGVMb2NrKCkudW5sb2NrKCk7CiAgICAgICAgfQoK\nICAgICAgICAvLyBDbG9zZSBib29raWUgY2xpZW50IHNvIGFsbCBwZW5kaW5n\nIGJvb2tpZSByZXF1ZXN0cyB3b3VsZCBiZSBmYWlsZWQKICAgICAgICAvLyB3\naGljaCB3aWxsIHJlamVjdCBhbnkgaW5jb21pbmcgYm9va2llIHJlcXVlc3Rz\nLgogICAgICAgIGJvb2tpZUNsaWVudC5jbG9zZSgpOwogICAgICAgIHRyeSB7\nCiAgICAgICAgICAgIC8vIENsb3NlIGxlZGdlciBtYW5hZ2Ugc28gYWxsIHBl\nbmRpbmcgbWV0YWRhdGEgcmVxdWVzdHMgd291bGQgYmUgZmFpbGVkCiAgICAg\nICAgICAgIC8vIHdoaWNoIHdpbGwgcmVqZWN0IGFueSBpbmNvbWluZyBtZXRh\nZGF0YSByZXF1ZXN0cy4KICAgICAgICAgICAgbGVkZ2VyTWFuYWdlci5jbG9z\nZSgpOwogICAgICAgICAgICBsZWRnZXJNYW5hZ2VyRmFjdG9yeS51bmluaXRp\nYWxpemUoKTsKICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBpZSkgewog\nICAgICAgICAgICBMT0cuZXJyb3IoIkZhaWxlZCB0byBjbG9zZSBsZWRnZXIg\nbWFuYWdlciA6ICIsIGllKTsKICAgICAgICB9CgogICAgICAgIC8vIENsb3Nl\nIHRoZSBzY2hlZHVsZXIKICAgICAgICBzY2hlZHVsZXIuc2h1dGRvd24oKTsK\nICAgICAgICBpZiAoIXNjaGVkdWxlci5hd2FpdFRlcm1pbmF0aW9uKDEwLCBU\naW1lVW5pdC5TRUNPTkRTKSkgewogICAgICAgICAgICBMT0cud2FybigiVGhl\nIHNjaGVkdWxlciBkaWQgbm90IHNodXRkb3duIGNsZWFubHkiKTsKICAgICAg\nICB9CiAgICAgICAgbWFpbldvcmtlclBvb2wuc2h1dGRvd24oKTsKICAgICAg\nICBpZiAoIW1haW5Xb3JrZXJQb29sLmF3YWl0VGVybWluYXRpb24oMTAsIFRp\nbWVVbml0LlNFQ09ORFMpKSB7CiAgICAgICAgICAgIExPRy53YXJuKCJUaGUg\nbWFpbldvcmtlclBvb2wgZGlkIG5vdCBzaHV0ZG93biBjbGVhbmx5Iik7CiAg\nICAgICAgfQoKICAgICAgICBpZiAob3duQ2hhbm5lbEZhY3RvcnkpIHsKICAg\nICAgICAgICAgY2hhbm5lbEZhY3RvcnkucmVsZWFzZUV4dGVybmFsUmVzb3Vy\nY2VzKCk7CiAgICAgICAgfQogICAgICAgIGlmIChvd25aS0hhbmRsZSkgewog\nICAgICAgICAgICB6ay5jbG9zZSgpOwogICAgICAgIH0KICAgIH0KCiAgICBw\ncml2YXRlIHN0YXRpYyBjbGFzcyBTeW5jQ3JlYXRlQ2FsbGJhY2sgaW1wbGVt\nZW50cyBDcmVhdGVDYWxsYmFjayB7CiAgICAgICAgLyoqCiAgICAgICAgICog\nQ3JlYXRlIGNhbGxiYWNrIGltcGxlbWVudGF0aW9uIGZvciBzeW5jaHJvbm91\ncyBjcmVhdGUgY2FsbC4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBy\nYwogICAgICAgICAqICAgICAgICAgIHJldHVybiBjb2RlCiAgICAgICAgICog\nQHBhcmFtIGxoCiAgICAgICAgICogICAgICAgICAgbGVkZ2VyIGhhbmRsZSBv\nYmplY3QKICAgICAgICAgKiBAcGFyYW0gY3R4CiAgICAgICAgICogICAgICAg\nICAgb3B0aW9uYWwgY29udHJvbCBvYmplY3QKICAgICAgICAgKi8KICAgICAg\nICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgdm9pZCBjcmVhdGVDb21wbGV0\nZShpbnQgcmMsIExlZGdlckhhbmRsZSBsaCwgT2JqZWN0IGN0eCkgewogICAg\nICAgICAgICBTeW5jQ291bnRlciBjb3VudGVyID0gKFN5bmNDb3VudGVyKSBj\ndHg7CiAgICAgICAgICAgIGNvdW50ZXIuc2V0TGgobGgpOwogICAgICAgICAg\nICBjb3VudGVyLnNldHJjKHJjKTsKICAgICAgICAgICAgY291bnRlci5kZWMo\nKTsKICAgICAgICB9CiAgICB9CgogICAgc3RhdGljIGNsYXNzIFN5bmNPcGVu\nQ2FsbGJhY2sgaW1wbGVtZW50cyBPcGVuQ2FsbGJhY2sgewogICAgICAgIC8q\nKgogICAgICAgICAqIENhbGxiYWNrIG1ldGhvZCBmb3Igc3luY2hyb25vdXMg\nb3BlbiBvcGVyYXRpb24KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBy\nYwogICAgICAgICAqICAgICAgICAgIHJldHVybiBjb2RlCiAgICAgICAgICog\nQHBhcmFtIGxoCiAgICAgICAgICogICAgICAgICAgbGVkZ2VyIGhhbmRsZQog\nICAgICAgICAqIEBwYXJhbSBjdHgKICAgICAgICAgKiAgICAgICAgICBvcHRp\nb25hbCBjb250cm9sIG9iamVjdAogICAgICAgICAqLwogICAgICAgIEBPdmVy\ncmlkZQogICAgICAgIHB1YmxpYyB2b2lkIG9wZW5Db21wbGV0ZShpbnQgcmMs\nIExlZGdlckhhbmRsZSBsaCwgT2JqZWN0IGN0eCkgewogICAgICAgICAgICBT\neW5jQ291bnRlciBjb3VudGVyID0gKFN5bmNDb3VudGVyKSBjdHg7CiAgICAg\nICAgICAgIGNvdW50ZXIuc2V0TGgobGgpOwoKICAgICAgICAgICAgTE9HLmRl\nYnVnKCJPcGVuIGNvbXBsZXRlOiB7fSIsIHJjKTsKCiAgICAgICAgICAgIGNv\ndW50ZXIuc2V0cmMocmMpOwogICAgICAgICAgICBjb3VudGVyLmRlYygpOwog\nICAgICAgIH0KICAgIH0KCiAgICBwcml2YXRlIHN0YXRpYyBjbGFzcyBTeW5j\nRGVsZXRlQ2FsbGJhY2sgaW1wbGVtZW50cyBEZWxldGVDYWxsYmFjayB7CiAg\nICAgICAgLyoqCiAgICAgICAgICogRGVsZXRlIGNhbGxiYWNrIGltcGxlbWVu\ndGF0aW9uIGZvciBzeW5jaHJvbm91cyBkZWxldGUgY2FsbC4KICAgICAgICAg\nKgogICAgICAgICAqIEBwYXJhbSByYwogICAgICAgICAqICAgICAgICAgICAg\ncmV0dXJuIGNvZGUKICAgICAgICAgKiBAcGFyYW0gY3R4CiAgICAgICAgICog\nICAgICAgICAgICBvcHRpb25hbCBjb250cm9sIG9iamVjdAogICAgICAgICAq\nLwogICAgICAgIEBPdmVycmlkZQogICAgICAgIHB1YmxpYyB2b2lkIGRlbGV0\nZUNvbXBsZXRlKGludCByYywgT2JqZWN0IGN0eCkgewogICAgICAgICAgICBT\neW5jQ291bnRlciBjb3VudGVyID0gKFN5bmNDb3VudGVyKSBjdHg7CiAgICAg\nICAgICAgIGNvdW50ZXIuc2V0cmMocmMpOwogICAgICAgICAgICBjb3VudGVy\nLmRlYygpOwogICAgICAgIH0KICAgIH0KCiAgICBwcml2YXRlIGZpbmFsIHZv\naWQgaW5pdE9wTG9nZ2VycyhTdGF0c0xvZ2dlciBzdGF0cykgewogICAgICAg\nIGNyZWF0ZU9wTG9nZ2VyID0gc3RhdHMuZ2V0T3BTdGF0c0xvZ2dlcihCb29r\nS2VlcGVyQ2xpZW50U3RhdHMuQ1JFQVRFX09QKTsKICAgICAgICBkZWxldGVP\ncExvZ2dlciA9IHN0YXRzLmdldE9wU3RhdHNMb2dnZXIoQm9va0tlZXBlckNs\naWVudFN0YXRzLkRFTEVURV9PUCk7CiAgICAgICAgb3Blbk9wTG9nZ2VyID0g\nc3RhdHMuZ2V0T3BTdGF0c0xvZ2dlcihCb29rS2VlcGVyQ2xpZW50U3RhdHMu\nT1BFTl9PUCk7CiAgICAgICAgcmVhZE9wTG9nZ2VyID0gc3RhdHMuZ2V0T3BT\ndGF0c0xvZ2dlcihCb29rS2VlcGVyQ2xpZW50U3RhdHMuUkVBRF9PUCk7CiAg\nICAgICAgYWRkT3BMb2dnZXIgPSBzdGF0cy5nZXRPcFN0YXRzTG9nZ2VyKEJv\nb2tLZWVwZXJDbGllbnRTdGF0cy5BRERfT1ApOwogICAgfQoKICAgIE9wU3Rh\ndHNMb2dnZXIgZ2V0Q3JlYXRlT3BMb2dnZXIoKSB7IHJldHVybiBjcmVhdGVP\ncExvZ2dlcjsgfQogICAgT3BTdGF0c0xvZ2dlciBnZXRPcGVuT3BMb2dnZXIo\nKSB7IHJldHVybiBvcGVuT3BMb2dnZXI7IH0KICAgIE9wU3RhdHNMb2dnZXIg\nZ2V0RGVsZXRlT3BMb2dnZXIoKSB7IHJldHVybiBkZWxldGVPcExvZ2dlcjsg\nfQogICAgT3BTdGF0c0xvZ2dlciBnZXRSZWFkT3BMb2dnZXIoKSB7IHJldHVy\nbiByZWFkT3BMb2dnZXI7IH0KICAgIE9wU3RhdHNMb2dnZXIgZ2V0QWRkT3BM\nb2dnZXIoKSB7IHJldHVybiBhZGRPcExvZ2dlcjsgfQp9Cg==\n","encoding":"base64"}

