{"sha":"5f2d2c31c7decee7f9acdd45c0ac2e4161846f90","node_id":"MDQ6QmxvYjE1NzU5NTY6NWYyZDJjMzFjN2RlY2VlN2Y5YWNkZDQ1YzBhYzJlNDE2MTg0NmY5MA==","size":3466,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/5f2d2c31c7decee7f9acdd45c0ac2e4161846f90","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgaHR0cDovL3d3dy5hcGFj\naGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1\naXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGlu\nZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2Ug\naXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9V\nVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhl\nciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3Ig\ndGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci5jbGllbnQ7CgppbXBvcnQgamF2\nYS51dGlsLkFycmF5TGlzdDsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9u\nczsKaW1wb3J0IGphdmEudXRpbC5IYXNoU2V0OwppbXBvcnQgamF2YS51dGls\nLkxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuU2V0OwoKaW1wb3J0IG9yZy5hcGFj\naGUuYm9va2tlZXBlci5jbGllbnQuQktFeGNlcHRpb24uQktOb3RFbm91Z2hC\nb29raWVzRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVy\nLm5ldC5Cb29raWVTb2NrZXRBZGRyZXNzOwppbXBvcnQgb3JnLmFwYWNoZS5j\nb21tb25zLmNvbmZpZ3VyYXRpb24uQ29uZmlndXJhdGlvbjsKCi8qKgogKiBE\nZWZhdWx0IEVuc2VtYmxlIFBsYWNlbWVudCBQb2xpY3ksIHdoaWNoIHBpY2tz\nIGJvb2tpZXMgcmFuZG9tbHkKICovCnB1YmxpYyBjbGFzcyBEZWZhdWx0RW5z\nZW1ibGVQbGFjZW1lbnRQb2xpY3kgaW1wbGVtZW50cyBFbnNlbWJsZVBsYWNl\nbWVudFBvbGljeSB7CgogICAgc3RhdGljIGZpbmFsIFNldDxCb29raWVTb2Nr\nZXRBZGRyZXNzPiBFTVBUWV9TRVQgPSBuZXcgSGFzaFNldDxCb29raWVTb2Nr\nZXRBZGRyZXNzPigpOwoKICAgIHByaXZhdGUgU2V0PEJvb2tpZVNvY2tldEFk\nZHJlc3M+IGtub3duQm9va2llcyA9IG5ldyBIYXNoU2V0PEJvb2tpZVNvY2tl\ndEFkZHJlc3M+KCk7CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgQXJyYXlM\naXN0PEJvb2tpZVNvY2tldEFkZHJlc3M+IG5ld0Vuc2VtYmxlKGludCBlbnNl\nbWJsZVNpemUsIGludCBxdW9ydW1TaXplLAogICAgICAgICAgICBTZXQ8Qm9v\na2llU29ja2V0QWRkcmVzcz4gZXhjbHVkZUJvb2tpZXMpIHRocm93cyBCS05v\ndEVub3VnaEJvb2tpZXNFeGNlcHRpb24gewogICAgICAgIEFycmF5TGlzdDxC\nb29raWVTb2NrZXRBZGRyZXNzPiBuZXdCb29raWVzID0gbmV3IEFycmF5TGlz\ndDxCb29raWVTb2NrZXRBZGRyZXNzPihlbnNlbWJsZVNpemUpOwogICAgICAg\nIGlmIChlbnNlbWJsZVNpemUgPD0gMCkgewogICAgICAgICAgICByZXR1cm4g\nbmV3Qm9va2llczsKICAgICAgICB9CiAgICAgICAgTGlzdDxCb29raWVTb2Nr\nZXRBZGRyZXNzPiBhbGxCb29raWVzOwogICAgICAgIHN5bmNocm9uaXplZCAo\ndGhpcykgewogICAgICAgICAgICBhbGxCb29raWVzID0gbmV3IEFycmF5TGlz\ndDxCb29raWVTb2NrZXRBZGRyZXNzPihrbm93bkJvb2tpZXMpOwogICAgICAg\nIH0KICAgICAgICBDb2xsZWN0aW9ucy5zaHVmZmxlKGFsbEJvb2tpZXMpOwog\nICAgICAgIGZvciAoQm9va2llU29ja2V0QWRkcmVzcyBib29raWUgOiBhbGxC\nb29raWVzKSB7CiAgICAgICAgICAgIGlmIChleGNsdWRlQm9va2llcy5jb250\nYWlucyhib29raWUpKSB7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAg\nICAgICAgICAgfQogICAgICAgICAgICBuZXdCb29raWVzLmFkZChib29raWUp\nOwogICAgICAgICAgICAtLWVuc2VtYmxlU2l6ZTsKICAgICAgICAgICAgaWYg\nKGVuc2VtYmxlU2l6ZSA9PSAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4g\nbmV3Qm9va2llczsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0\naHJvdyBuZXcgQktOb3RFbm91Z2hCb29raWVzRXhjZXB0aW9uKCk7CiAgICB9\nCgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgQm9va2llU29ja2V0QWRkcmVz\ncyByZXBsYWNlQm9va2llKEJvb2tpZVNvY2tldEFkZHJlc3MgYm9va2llVG9S\nZXBsYWNlLAogICAgICAgICAgICBTZXQ8Qm9va2llU29ja2V0QWRkcmVzcz4g\nZXhjbHVkZUJvb2tpZXMpIHRocm93cyBCS05vdEVub3VnaEJvb2tpZXNFeGNl\ncHRpb24gewogICAgICAgIEFycmF5TGlzdDxCb29raWVTb2NrZXRBZGRyZXNz\nPiBhZGRyZXNzZXMgPSBuZXdFbnNlbWJsZSgxLCAxLCBleGNsdWRlQm9va2ll\ncyk7CiAgICAgICAgcmV0dXJuIGFkZHJlc3Nlcy5nZXQoMCk7CiAgICB9Cgog\nICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgc3luY2hyb25pemVkIFNldDxCb29r\naWVTb2NrZXRBZGRyZXNzPiBvbkNsdXN0ZXJDaGFuZ2VkKFNldDxCb29raWVT\nb2NrZXRBZGRyZXNzPiB3cml0YWJsZUJvb2tpZXMsCiAgICAgICAgICAgIFNl\ndDxCb29raWVTb2NrZXRBZGRyZXNzPiByZWFkT25seUJvb2tpZXMpIHsKICAg\nICAgICBIYXNoU2V0PEJvb2tpZVNvY2tldEFkZHJlc3M+IGRlYWRCb29raWVz\nOwogICAgICAgIGRlYWRCb29raWVzID0gbmV3IEhhc2hTZXQ8Qm9va2llU29j\na2V0QWRkcmVzcz4oa25vd25Cb29raWVzKTsKICAgICAgICBkZWFkQm9va2ll\ncy5yZW1vdmVBbGwod3JpdGFibGVCb29raWVzKTsKICAgICAgICAvLyByZWFk\nb25seSBib29raWVzIHNob3VsZCBub3QgYmUgdHJlYXRlZCBhcyBkZWFkIGJv\nb2tpZXMKICAgICAgICBkZWFkQm9va2llcy5yZW1vdmVBbGwocmVhZE9ubHlC\nb29raWVzKTsKICAgICAgICBrbm93bkJvb2tpZXMgPSB3cml0YWJsZUJvb2tp\nZXM7CiAgICAgICAgcmV0dXJuIGRlYWRCb29raWVzOwogICAgfQoKICAgIEBP\ndmVycmlkZQogICAgcHVibGljIEVuc2VtYmxlUGxhY2VtZW50UG9saWN5IGlu\naXRpYWxpemUoQ29uZmlndXJhdGlvbiBjb25mKSB7CiAgICAgICAgcmV0dXJu\nIHRoaXM7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCB1\nbmluaXRhbGl6ZSgpIHsKICAgICAgICAvLyBkbyBub3RoaW5nCiAgICB9Cgp9\nCg==\n","encoding":"base64"}

