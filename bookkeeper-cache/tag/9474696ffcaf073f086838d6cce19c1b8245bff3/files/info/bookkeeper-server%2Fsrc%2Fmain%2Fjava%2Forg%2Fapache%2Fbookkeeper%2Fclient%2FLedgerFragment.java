{"sha":"6aadb8aaa1fc77cb12731fa24e1087bc3e67dda4","node_id":"MDQ6QmxvYjE1NzU5NTY6NmFhZGI4YWFhMWZjNzdjYjEyNzMxZmEyNGUxMDg3YmMzZTY3ZGRhNA==","size":4713,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/6aadb8aaa1fc77cb12731fa24e1087bc3e67dda4","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICBodHRwOi8vd3d3LmFwYWNo\nZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVp\ncmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5n\nLAogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBp\ncyBkaXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VU\nIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0\naGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3Ig\ndGhlCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9u\ncyBhbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqCiAq\nLwpwYWNrYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci5jbGllbnQ7CgppbXBv\ncnQgamF2YS51dGlsLkFycmF5TGlzdDsKaW1wb3J0IGphdmEudXRpbC5MaXN0\nOwppbXBvcnQgamF2YS51dGlsLlNvcnRlZE1hcDsKCmltcG9ydCBvcmcuYXBh\nY2hlLmJvb2trZWVwZXIubmV0LkJvb2tpZVNvY2tldEFkZHJlc3M7CgovKioK\nICogUmVwcmVzZW50cyB0aGUgZW50cmllcyBvZiBhIHNlZ21lbnQgb2YgYSBs\nZWRnZXIgd2hpY2ggYXJlIHN0b3JlZCBvbiBhIHNpbmdsZQogKiBib29raWUg\naW4gdGhlIHNlZ21lbnRzIGJvb2tpZSBlbnNlbWJsZS4KICogCiAqIFVzZWQg\nZm9yIGNoZWNraW5nIGFuZCByZWNvdmVyeQogKi8KcHVibGljIGNsYXNzIExl\nZGdlckZyYWdtZW50IHsKICAgIHByaXZhdGUgZmluYWwgaW50IGJvb2tpZUlu\nZGV4OwogICAgcHJpdmF0ZSBmaW5hbCBMaXN0PEJvb2tpZVNvY2tldEFkZHJl\nc3M+IGVuc2VtYmxlOwogICAgcHJpdmF0ZSBmaW5hbCBsb25nIGZpcnN0RW50\ncnlJZDsKICAgIHByaXZhdGUgZmluYWwgbG9uZyBsYXN0S25vd25FbnRyeUlk\nOwogICAgcHJpdmF0ZSBmaW5hbCBsb25nIGxlZGdlcklkOwogICAgcHJpdmF0\nZSBmaW5hbCBEaXN0cmlidXRpb25TY2hlZHVsZSBzY2hlZHVsZTsKICAgIHBy\naXZhdGUgZmluYWwgYm9vbGVhbiBpc0xlZGdlckNsb3NlZDsKCiAgICBMZWRn\nZXJGcmFnbWVudChMZWRnZXJIYW5kbGUgbGgsIGxvbmcgZmlyc3RFbnRyeUlk\nLAogICAgICAgICAgICBsb25nIGxhc3RLbm93bkVudHJ5SWQsIGludCBib29r\naWVJbmRleCkgewogICAgICAgIHRoaXMubGVkZ2VySWQgPSBsaC5nZXRJZCgp\nOwogICAgICAgIHRoaXMuZmlyc3RFbnRyeUlkID0gZmlyc3RFbnRyeUlkOwog\nICAgICAgIHRoaXMubGFzdEtub3duRW50cnlJZCA9IGxhc3RLbm93bkVudHJ5\nSWQ7CiAgICAgICAgdGhpcy5ib29raWVJbmRleCA9IGJvb2tpZUluZGV4Owog\nICAgICAgIHRoaXMuZW5zZW1ibGUgPSBsaC5nZXRMZWRnZXJNZXRhZGF0YSgp\nLmdldEVuc2VtYmxlKGZpcnN0RW50cnlJZCk7CiAgICAgICAgdGhpcy5zY2hl\nZHVsZSA9IGxoLmdldERpc3RyaWJ1dGlvblNjaGVkdWxlKCk7CiAgICAgICAg\nU29ydGVkTWFwPExvbmcsIEFycmF5TGlzdDxCb29raWVTb2NrZXRBZGRyZXNz\nPj4gZW5zZW1ibGVzID0gbGgKICAgICAgICAgICAgICAgIC5nZXRMZWRnZXJN\nZXRhZGF0YSgpLmdldEVuc2VtYmxlcygpOwogICAgICAgIHRoaXMuaXNMZWRn\nZXJDbG9zZWQgPSBsaC5nZXRMZWRnZXJNZXRhZGF0YSgpLmlzQ2xvc2VkKCkK\nICAgICAgICAgICAgICAgIHx8ICFlbnNlbWJsZS5lcXVhbHMoZW5zZW1ibGVz\nLmdldChlbnNlbWJsZXMubGFzdEtleSgpKSk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBSZXR1cm5zIHRydWUsIGlmIGFuZCBvbmx5IGlmIHRoZSBsZWRnZXIg\nZnJhZ21lbnQgd2lsbCBuZXZlciBiZSBtb2RpZmllZAogICAgICogYnkgYW55\nIG9mIHRoZSBjbGllbnRzIGluIGZ1dHVyZSwgb3RoZXJ3aXNlIGZhbHNlLiBp\nLmUsCiAgICAgKiA8b2w+CiAgICAgKiA8bGk+SWYgbGVkZ2VyIGlzIGluIGNs\nb3NlZCBzdGF0ZSwgdGhlbiBubyBvdGhlciBjbGllbnRzIGNhbiBtb2RpZnkg\ndGhpcwogICAgICogZnJhZ21lbnQuPC9saT4KICAgICAqIDxsaT5JZiBsZWRn\nZXIgaXMgbm90IGluIGNsb3NlZCBzdGF0ZSBhbmQgdGhlIGN1cnJlbnQgZnJh\nZ21lbnQgaXMgbm90IGEKICAgICAqIGxhc3QgZnJhZ21lbnQsIHRoZW4gbm8g\nb25lIHdpbGwgbW9kaWZ5IHRoaXMgZnJhZ21lbnQuPC9saT4KICAgICAqIDwv\nb2w+CiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlzQ2xvc2VkKCkgewog\nICAgICAgIHJldHVybiBpc0xlZGdlckNsb3NlZDsKICAgIH0KCiAgICBsb25n\nIGdldExlZGdlcklkKCkgewogICAgICAgIHJldHVybiBsZWRnZXJJZDsKICAg\nIH0KCiAgICBsb25nIGdldEZpcnN0RW50cnlJZCgpIHsKICAgICAgICByZXR1\ncm4gZmlyc3RFbnRyeUlkOwogICAgfQoKICAgIGxvbmcgZ2V0TGFzdEtub3du\nRW50cnlJZCgpIHsKICAgICAgICByZXR1cm4gbGFzdEtub3duRW50cnlJZDsK\nICAgIH0KCiAgICAvKioKICAgICAqIEdldHMgdGhlIGZhaWxlZEJvb2tpZSBh\nZGRyZXNzCiAgICAgKi8KICAgIHB1YmxpYyBCb29raWVTb2NrZXRBZGRyZXNz\nIGdldEFkZHJlc3MoKSB7CiAgICAgICAgcmV0dXJuIGVuc2VtYmxlLmdldChi\nb29raWVJbmRleCk7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogR2V0cyB0\naGUgZmFpbGVkQm9va2llIGluZGV4CiAgICAgKi8KICAgIHB1YmxpYyBpbnQg\nZ2V0Qm9va2llc0luZGV4KCkgewogICAgICAgIHJldHVybiBib29raWVJbmRl\neDsKICAgIH0KCiAgICAvKioKICAgICAqIEdldHMgdGhlIGZpcnN0IHN0b3Jl\nZCBlbnRyeSBpZCBvZiB0aGUgZnJhZ21lbnQgaW4gZmFpbGVkIGJvb2tpZS4K\nICAgICAqIAogICAgICogQHJldHVybiBlbnRyeUlkCiAgICAgKi8KICAgIHB1\nYmxpYyBsb25nIGdldEZpcnN0U3RvcmVkRW50cnlJZCgpIHsKICAgICAgICBs\nb25nIGZpcnN0RW50cnkgPSBmaXJzdEVudHJ5SWQ7CgogICAgICAgIGZvciAo\naW50IGkgPSAwOyBpIDwgZW5zZW1ibGUuc2l6ZSgpICYmIGZpcnN0RW50cnkg\nPD0gbGFzdEtub3duRW50cnlJZDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChz\nY2hlZHVsZS5oYXNFbnRyeShmaXJzdEVudHJ5LCBib29raWVJbmRleCkpIHsK\nICAgICAgICAgICAgICAgIHJldHVybiBmaXJzdEVudHJ5OwogICAgICAgICAg\nICB9IGVsc2UgewogICAgICAgICAgICAgICAgZmlyc3RFbnRyeSsrOwogICAg\nICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBMZWRnZXJIYW5k\nbGUuSU5WQUxJRF9FTlRSWV9JRDsKICAgIH0KCiAgICAvKioKICAgICAqIEdl\ndHMgdGhlIGxhc3Qgc3RvcmVkIGVudHJ5IGlkIG9mIHRoZSBmcmFnbWVudCBp\nbiBmYWlsZWQgYm9va2llLgogICAgICogCiAgICAgKiBAcmV0dXJuIGVudHJ5\nSWQKICAgICAqLwogICAgcHVibGljIGxvbmcgZ2V0TGFzdFN0b3JlZEVudHJ5\nSWQoKSB7CiAgICAgICAgbG9uZyBsYXN0RW50cnkgPSBsYXN0S25vd25FbnRy\neUlkOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZW5zZW1ibGUuc2l6\nZSgpICYmIGxhc3RFbnRyeSA+PSBmaXJzdEVudHJ5SWQ7IGkrKykgewogICAg\nICAgICAgICBpZiAoc2NoZWR1bGUuaGFzRW50cnkobGFzdEVudHJ5LCBib29r\naWVJbmRleCkpIHsKICAgICAgICAgICAgICAgIHJldHVybiBsYXN0RW50cnk7\nCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBsYXN0RW50\ncnktLTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4g\nTGVkZ2VySGFuZGxlLklOVkFMSURfRU5UUllfSUQ7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBHZXRzIHRoZSBlbnNlbWJsZSBvZiBmcmFnbWVudAogICAgICog\nCiAgICAgKiBAcmV0dXJuIHRoZSBlbnNlbWJsZSBmb3IgdGhlIHNlZ21lbnQg\nd2hpY2ggdGhpcyBmcmFnbWVudCBpcyBhIHBhcnQgb2YKICAgICAqLwogICAg\ncHVibGljIExpc3Q8Qm9va2llU29ja2V0QWRkcmVzcz4gZ2V0RW5zZW1ibGUo\nKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZW5zZW1ibGU7CiAgICB9CgogICAg\nQE92ZXJyaWRlCiAgICBwdWJsaWMgU3RyaW5nIHRvU3RyaW5nKCkgewogICAg\nICAgIHJldHVybiBTdHJpbmcuZm9ybWF0KCJGcmFnbWVudChMZWRnZXJJRDog\nJWQsIEZpcnN0RW50cnlJRDogJWRbJWRdLCAiCiAgICAgICAgICAgICAgICAr\nICJMYXN0S25vd25FbnRyeUlEOiAlZFslZF0sIEhvc3Q6ICVzLCBDbG9zZWQ6\nICVzKSIsIGxlZGdlcklkLCBmaXJzdEVudHJ5SWQsCiAgICAgICAgICAgICAg\nICBnZXRGaXJzdFN0b3JlZEVudHJ5SWQoKSwgbGFzdEtub3duRW50cnlJZCwg\nZ2V0TGFzdFN0b3JlZEVudHJ5SWQoKSwKICAgICAgICAgICAgICAgIGdldEFk\nZHJlc3MoKSwgaXNMZWRnZXJDbG9zZWQpOwogICAgfQp9\n","encoding":"base64"}

