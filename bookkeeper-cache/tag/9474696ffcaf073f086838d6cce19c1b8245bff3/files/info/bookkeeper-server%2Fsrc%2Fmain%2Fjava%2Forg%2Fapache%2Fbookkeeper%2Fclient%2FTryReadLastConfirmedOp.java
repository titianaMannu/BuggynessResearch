{"sha":"01b81c9ff53c829550d4f906a5182d64638302dd","node_id":"MDQ6QmxvYjE1NzU5NTY6MDFiODFjOWZmNTNjODI5NTUwZDRmOTA2YTUxODJkNjQ2MzgzMDJkZA==","size":4722,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/01b81c9ff53c829550d4f906a5182d64638302dd","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY2xpZW50OwoKaW1wb3J0IG9y\nZy5hcGFjaGUuYm9va2tlZXBlci5jbGllbnQuRGlnZXN0TWFuYWdlci5SZWNv\ndmVyeURhdGE7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY2xpZW50\nLlJlYWRMYXN0Q29uZmlybWVkT3AuTGFzdENvbmZpcm1lZERhdGFDYWxsYmFj\nazsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5wcm90by5Cb29raWVQ\ncm90b2NvbDsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5wcm90by5C\nb29ra2VlcGVySW50ZXJuYWxDYWxsYmFja3MuUmVhZEVudHJ5Q2FsbGJhY2s7\nCmltcG9ydCBvcmcuamJvc3MubmV0dHkuYnVmZmVyLkNoYW5uZWxCdWZmZXI7\nCmltcG9ydCBvcmcuc2xmNGouTG9nZ2VyOwppbXBvcnQgb3JnLnNsZjRqLkxv\nZ2dlckZhY3Rvcnk7CgppbXBvcnQgamF2YS51dGlsLkxpc3Q7CgovKioKICog\nVGhpcyBvcCBpcyB0cnkgdG8gcmVhZCBsYXN0IGNvbmZpcm1lZCB3aXRob3V0\nIGludm9sdmluZyBxdW9ydW0gY292ZXJhZ2UgY2hlY2tpbmcuCiAqIFVzZSB7\nQGxpbmsgUmVhZExhc3RDb25maXJtZWRPcH0gaWYgeW91IG5lZWQgcXVvcnVt\nIGNvdmVyYWdlIGNoZWNraW5nLgogKi8KY2xhc3MgVHJ5UmVhZExhc3RDb25m\naXJtZWRPcCBpbXBsZW1lbnRzIFJlYWRFbnRyeUNhbGxiYWNrIHsKCiAgICBz\ndGF0aWMgZmluYWwgTG9nZ2VyIExPRyA9IExvZ2dlckZhY3RvcnkuZ2V0TG9n\nZ2VyKFRyeVJlYWRMYXN0Q29uZmlybWVkT3AuY2xhc3MpOwoKICAgIGZpbmFs\nIExlZGdlckhhbmRsZSBsaDsKICAgIGZpbmFsIExhc3RDb25maXJtZWREYXRh\nQ2FsbGJhY2sgY2I7CgogICAgaW50IG51bVJlc3BvbnNlc1BlbmRpbmc7CiAg\nICB2b2xhdGlsZSBib29sZWFuIGhhc1ZhbGlkUmVzcG9uc2UgPSBmYWxzZTsK\nICAgIHZvbGF0aWxlIGJvb2xlYW4gY29tcGxldGVkID0gZmFsc2U7CiAgICBS\nZWNvdmVyeURhdGEgbWF4UmVjb3ZlcmVkRGF0YTsKCiAgICBUcnlSZWFkTGFz\ndENvbmZpcm1lZE9wKExlZGdlckhhbmRsZSBsaCwgTGFzdENvbmZpcm1lZERh\ndGFDYWxsYmFjayBjYiwgbG9uZyBsYWMpIHsKICAgICAgICB0aGlzLmxoID0g\nbGg7CiAgICAgICAgdGhpcy5jYiA9IGNiOwogICAgICAgIHRoaXMubWF4UmVj\nb3ZlcmVkRGF0YSA9IG5ldyBSZWNvdmVyeURhdGEobGFjLCAwKTsKICAgICAg\nICB0aGlzLm51bVJlc3BvbnNlc1BlbmRpbmcgPSBsaC5tZXRhZGF0YS5nZXRF\nbnNlbWJsZVNpemUoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBpbml0aWF0\nZSgpIHsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGxoLm1ldGFkYXRh\nLmN1cnJlbnRFbnNlbWJsZS5zaXplKCk7IGkrKykgewogICAgICAgICAgICBs\naC5iay5ib29raWVDbGllbnQucmVhZEVudHJ5KGxoLm1ldGFkYXRhLmN1cnJl\nbnRFbnNlbWJsZS5nZXQoaSksCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgbGgubGVkZ2VySWQsCiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgQm9va2llUHJvdG9jb2wuTEFTVF9B\nRERfQ09ORklSTUVELAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgIHRoaXMsIGkpOwogICAgICAgIH0KICAgIH0KCiAgICBAT3Zl\ncnJpZGUKICAgIHB1YmxpYyB2b2lkIHJlYWRFbnRyeUNvbXBsZXRlKGludCBy\nYywgbG9uZyBsZWRnZXJJZCwgbG9uZyBlbnRyeUlkLCBDaGFubmVsQnVmZmVy\nIGJ1ZmZlciwgT2JqZWN0IGN0eCkgewogICAgICAgIGlmIChMT0cuaXNUcmFj\nZUVuYWJsZWQoKSkgewogICAgICAgICAgICBMT0cudHJhY2UoIlRyeVJlYWRM\nYXN0Q29uZmlybWVkIHJlY2VpdmVkIHJlc3BvbnNlIGZvciAobGlkPXt9LCBl\naWQ9e30pIDoge30iLAogICAgICAgICAgICAgICAgICAgIG5ldyBPYmplY3Rb\nXSB7IGxlZGdlcklkLCBlbnRyeUlkLCByYyB9KTsKICAgICAgICB9CgogICAg\nICAgIGludCBib29raWVJbmRleCA9IChJbnRlZ2VyKSBjdHg7CiAgICAgICAg\nbnVtUmVzcG9uc2VzUGVuZGluZy0tOwogICAgICAgIGlmIChCS0V4Y2VwdGlv\nbi5Db2RlLk9LID09IHJjKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAg\nICAgICAgICBSZWNvdmVyeURhdGEgcmVjb3ZlcnlEYXRhID0gbGgubWFjTWFu\nYWdlci52ZXJpZnlEaWdlc3RBbmRSZXR1cm5MYXN0Q29uZmlybWVkKGJ1ZmZl\ncik7CiAgICAgICAgICAgICAgICBpZiAoTE9HLmlzVHJhY2VFbmFibGVkKCkp\nIHsKICAgICAgICAgICAgICAgICAgICBMT0cudHJhY2UoIlJlY2VpdmVkIGxh\nc3RBZGRDb25maXJtZWQgKGxhYz17fSwgbGVuZ3RoPXt9KSBmcm9tIGJvb2tp\nZSh7fSkgZm9yIChsaWQ9e30pLiIsCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICBuZXcgT2JqZWN0W10geyByZWNvdmVyeURhdGEubGFzdEFkZENvbmZp\ncm1lZCwgcmVjb3ZlcnlEYXRhLmxlbmd0aCwgYm9va2llSW5kZXgsIGxlZGdl\ncklkIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYg\nKHJlY292ZXJ5RGF0YS5sYXN0QWRkQ29uZmlybWVkID4gbWF4UmVjb3ZlcmVk\nRGF0YS5sYXN0QWRkQ29uZmlybWVkKSB7CiAgICAgICAgICAgICAgICAgICAg\nbWF4UmVjb3ZlcmVkRGF0YSA9IHJlY292ZXJ5RGF0YTsKICAgICAgICAgICAg\nICAgICAgICAvLyBjYWxsYmFjayBpbW1lZGlhdGVseQogICAgICAgICAgICAg\nICAgICAgIGNiLnJlYWRMYXN0Q29uZmlybWVkRGF0YUNvbXBsZXRlKEJLRXhj\nZXB0aW9uLkNvZGUuT0ssIG1heFJlY292ZXJlZERhdGEpOwogICAgICAgICAg\nICAgICAgfQogICAgICAgICAgICAgICAgaGFzVmFsaWRSZXNwb25zZSA9IHRy\ndWU7CiAgICAgICAgICAgIH0gY2F0Y2ggKEJLRXhjZXB0aW9uLkJLRGlnZXN0\nTWF0Y2hFeGNlcHRpb24gZSkgewogICAgICAgICAgICAgICAgTE9HLmVycm9y\nKCJNYWMgbWlzbWF0Y2ggZm9yIGxlZGdlcjogIiArIGxlZGdlcklkICsgIiwg\nZW50cnk6ICIgKyBlbnRyeUlkCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nKyAiIHdoaWxlIHJlYWRpbmcgbGFzdCBlbnRyeSBmcm9tIGJvb2tpZTogIgog\nICAgICAgICAgICAgICAgICAgICAgICAgICsgbGgubWV0YWRhdGEuY3VycmVu\ndEVuc2VtYmxlLmdldChib29raWVJbmRleCkpOwogICAgICAgICAgICB9CiAg\nICAgICAgfSBlbHNlIGlmIChCS0V4Y2VwdGlvbi5Db2RlLlVuYXV0aG9yaXpl\nZEFjY2Vzc0V4Y2VwdGlvbiA9PSByYyAmJiAhY29tcGxldGVkKSB7CiAgICAg\nICAgICAgIGNiLnJlYWRMYXN0Q29uZmlybWVkRGF0YUNvbXBsZXRlKHJjLCBt\nYXhSZWNvdmVyZWREYXRhKTsKICAgICAgICAgICAgY29tcGxldGVkID0gdHJ1\nZTsKICAgICAgICB9IGVsc2UgaWYgKEJLRXhjZXB0aW9uLkNvZGUuTm9TdWNo\nTGVkZ2VyRXhpc3RzRXhjZXB0aW9uID09IHJjIHx8CiAgICAgICAgICAgICAg\nICAgICBCS0V4Y2VwdGlvbi5Db2RlLk5vU3VjaEVudHJ5RXhjZXB0aW9uID09\nIHJjKSB7CiAgICAgICAgICAgIGhhc1ZhbGlkUmVzcG9uc2UgPSB0cnVlOwog\nICAgICAgIH0KICAgICAgICBpZiAobnVtUmVzcG9uc2VzUGVuZGluZyA9PSAw\nICYmICFjb21wbGV0ZWQpIHsKICAgICAgICAgICAgaWYgKCFoYXNWYWxpZFJl\nc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAvLyBubyBzdWNjZXNzIGNhbGxl\nZAogICAgICAgICAgICAgICAgY2IucmVhZExhc3RDb25maXJtZWREYXRhQ29t\ncGxldGUoQktFeGNlcHRpb24uQ29kZS5MZWRnZXJSZWNvdmVyeUV4Y2VwdGlv\nbiwgbWF4UmVjb3ZlcmVkRGF0YSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAg\nICAgICAgICAgICAgICAvLyBjYWxsYmFjawogICAgICAgICAgICAgICAgY2Iu\ncmVhZExhc3RDb25maXJtZWREYXRhQ29tcGxldGUoQktFeGNlcHRpb24uQ29k\nZS5PSywgbWF4UmVjb3ZlcmVkRGF0YSk7CiAgICAgICAgICAgIH0KICAgICAg\nICAgICAgY29tcGxldGVkID0gdHJ1ZTsKICAgICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

