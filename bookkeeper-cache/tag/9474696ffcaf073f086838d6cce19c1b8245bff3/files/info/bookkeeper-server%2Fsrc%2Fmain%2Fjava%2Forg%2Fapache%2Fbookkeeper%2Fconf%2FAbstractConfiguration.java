{"sha":"3ec2b5a1c305a8807d1299b36b99af51b022ab71","node_id":"MDQ6QmxvYjE1NzU5NTY6M2VjMmI1YTFjMzA1YTg4MDdkMTI5OWIzNmI5OWFmNTFiMDIyYWI3MQ==","size":7684,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/3ec2b5a1c305a8807d1299b36b99af51b022ab71","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY29uZjsKCmltcG9ydCBqYXZh\nLm5ldC5VUkw7CgppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvbmZpZ3Vy\nYXRpb24uQ29tcG9zaXRlQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFj\naGUuY29tbW9ucy5jb25maWd1cmF0aW9uLkNvbmZpZ3VyYXRpb247CmltcG9y\ndCBvcmcuYXBhY2hlLmNvbW1vbnMuY29uZmlndXJhdGlvbi5Db25maWd1cmF0\naW9uRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvbmZp\nZ3VyYXRpb24uUHJvcGVydGllc0NvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcu\nYXBhY2hlLmNvbW1vbnMuY29uZmlndXJhdGlvbi5TeXN0ZW1Db25maWd1cmF0\naW9uOwoKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5tZXRhLkxlZGdl\nck1hbmFnZXJGYWN0b3J5OwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVy\nLnV0aWwuUmVmbGVjdGlvblV0aWxzOwoKaW1wb3J0IG9yZy5zbGY0ai5Mb2dn\nZXI7CmltcG9ydCBvcmcuc2xmNGouTG9nZ2VyRmFjdG9yeTsKCi8qKgogKiBB\nYnN0cmFjdCBjb25maWd1cmF0aW9uCiAqLwpwdWJsaWMgYWJzdHJhY3QgY2xh\nc3MgQWJzdHJhY3RDb25maWd1cmF0aW9uIGV4dGVuZHMgQ29tcG9zaXRlQ29u\nZmlndXJhdGlvbiB7CgogICAgc3RhdGljIGZpbmFsIExvZ2dlciBMT0cgPSBM\nb2dnZXJGYWN0b3J5LmdldExvZ2dlcihBYnN0cmFjdENvbmZpZ3VyYXRpb24u\nY2xhc3MpOwoKICAgIHByb3RlY3RlZCBzdGF0aWMgZmluYWwgQ2xhc3NMb2Fk\nZXIgZGVmYXVsdExvYWRlcjsKICAgIHN0YXRpYyB7CiAgICAgICAgQ2xhc3NM\nb2FkZXIgbG9hZGVyID0gVGhyZWFkLmN1cnJlbnRUaHJlYWQoKS5nZXRDb250\nZXh0Q2xhc3NMb2FkZXIoKTsKICAgICAgICBpZiAobnVsbCA9PSBsb2FkZXIp\nIHsKICAgICAgICAgICAgbG9hZGVyID0gQWJzdHJhY3RDb25maWd1cmF0aW9u\nLmNsYXNzLmdldENsYXNzTG9hZGVyKCk7CiAgICAgICAgfQogICAgICAgIGRl\nZmF1bHRMb2FkZXIgPSBsb2FkZXI7CiAgICB9CgogICAgLy8gTGVkZ2VyIE1h\nbmFnZXIKICAgIHByb3RlY3RlZCBmaW5hbCBzdGF0aWMgU3RyaW5nIExFREdF\nUl9NQU5BR0VSX1RZUEUgPSAibGVkZ2VyTWFuYWdlclR5cGUiOwogICAgcHJv\ndGVjdGVkIGZpbmFsIHN0YXRpYyBTdHJpbmcgTEVER0VSX01BTkFHRVJfRkFD\nVE9SWV9DTEFTUyA9ICJsZWRnZXJNYW5hZ2VyRmFjdG9yeUNsYXNzIjsKICAg\nIHByb3RlY3RlZCBmaW5hbCBzdGF0aWMgU3RyaW5nIFpLX0xFREdFUlNfUk9P\nVF9QQVRIID0gInprTGVkZ2Vyc1Jvb3RQYXRoIjsKICAgIHByb3RlY3RlZCBm\naW5hbCBzdGF0aWMgU3RyaW5nIEFWQUlMQUJMRV9OT0RFID0gImF2YWlsYWJs\nZSI7CiAgICBwcm90ZWN0ZWQgZmluYWwgc3RhdGljIFN0cmluZyBSRVJFUExJ\nQ0FUSU9OX0VOVFJZX0JBVENIX1NJWkUgPSAicmVyZXBsaWNhdGlvbkVudHJ5\nQmF0Y2hTaXplIjsKCiAgICAvLyBNZXRhc3RvcmUgc2V0dGluZ3MsIG9ubHkg\nYmVpbmcgdXNlZCB3aGVuIExFREdFUl9NQU5BR0VSX0ZBQ1RPUllfQ0xBU1Mg\naXMgTVNMZWRnZXJNYW5hZ2VyRmFjdG9yeQogICAgcHJvdGVjdGVkIGZpbmFs\nIHN0YXRpYyBTdHJpbmcgTUVUQVNUT1JFX0lNUExfQ0xBU1MgPSAibWV0YXN0\nb3JlSW1wbENsYXNzIjsKICAgIHByb3RlY3RlZCBmaW5hbCBzdGF0aWMgU3Ry\naW5nIE1FVEFTVE9SRV9NQVhfRU5UUklFU19QRVJfU0NBTiA9ICJtZXRhc3Rv\ncmVNYXhFbnRyaWVzUGVyU2NhbiI7CgogICAgcHJvdGVjdGVkIEFic3RyYWN0\nQ29uZmlndXJhdGlvbigpIHsKICAgICAgICBzdXBlcigpOwogICAgICAgIC8v\nIGFkZCBjb25maWd1cmF0aW9uIGZvciBzeXN0ZW0gcHJvcGVydGllcwogICAg\nICAgIGFkZENvbmZpZ3VyYXRpb24obmV3IFN5c3RlbUNvbmZpZ3VyYXRpb24o\nKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBZb3UgY2FuIGxvYWQgY29uZmln\ndXJhdGlvbnMgaW4gcHJlY2VkZW5jZSBvcmRlci4gVGhlIGZpcnN0IG9uZSB0\nYWtlcwogICAgICogcHJlY2VkZW5jZSBvdmVyIGFueSBsb2FkZWQgbGF0ZXIu\nCiAgICAgKgogICAgICogQHBhcmFtIGNvbmZVUkwKICAgICAqICAgICAgICAg\nIENvbmZpZ3VyYXRpb24gVVJMCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIGxv\nYWRDb25mKFVSTCBjb25mVVJMKSB0aHJvd3MgQ29uZmlndXJhdGlvbkV4Y2Vw\ndGlvbiB7CiAgICAgICAgQ29uZmlndXJhdGlvbiBsb2FkZWRDb25mID0gbmV3\nIFByb3BlcnRpZXNDb25maWd1cmF0aW9uKGNvbmZVUkwpOwogICAgICAgIGFk\nZENvbmZpZ3VyYXRpb24obG9hZGVkQ29uZik7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBZb3UgY2FuIGxvYWQgY29uZmlndXJhdGlvbiBmcm9tIG90aGVyIGNv\nbmZpZ3VyYXRpb24KICAgICAqCiAgICAgKiBAcGFyYW0gYmFzZUNvbmYKICAg\nICAqICAgICAgICAgIE90aGVyIENvbmZpZ3VyYXRpb24KICAgICAqLwogICAg\ncHVibGljIHZvaWQgbG9hZENvbmYoQWJzdHJhY3RDb25maWd1cmF0aW9uIGJh\nc2VDb25mKSB7CiAgICAgICAgYWRkQ29uZmlndXJhdGlvbihiYXNlQ29uZik7\nIAogICAgfQoKICAgIC8qKgogICAgICogTG9hZCBjb25maWd1cmF0aW9uIGZy\nb20gb3RoZXIgY29uZmlndXJhdGlvbiBvYmplY3QKICAgICAqCiAgICAgKiBA\ncGFyYW0gb3RoZXJDb25mCiAgICAgKiAgICAgICAgICBPdGhlciBjb25maWd1\ncmF0aW9uIG9iamVjdAogICAgICovCiAgICBwdWJsaWMgdm9pZCBsb2FkQ29u\nZihDb25maWd1cmF0aW9uIG90aGVyQ29uZikgewogICAgICAgIGFkZENvbmZp\nZ3VyYXRpb24ob3RoZXJDb25mKTsKICAgIH0KCiAgICAvKioKICAgICAqIFNl\ndCBMZWRnZXIgTWFuYWdlciBUeXBlLgogICAgICoKICAgICAqIEBwYXJhbSBs\nbVR5cGUKICAgICAqICAgICAgICAgIExlZGdlciBNYW5hZ2VyIFR5cGUKICAg\nICAqIEBkZXByZWNhdGVkIHJlcGxhY2VkIGJ5IHtAbGluayAjc2V0TGVkZ2Vy\nTWFuYWdlckZhY3RvcnlDbGFzc30KICAgICAqLwogICAgQERlcHJlY2F0ZWQK\nICAgIHB1YmxpYyB2b2lkIHNldExlZGdlck1hbmFnZXJUeXBlKFN0cmluZyBs\nbVR5cGUpIHsKICAgICAgICBzZXRQcm9wZXJ0eShMRURHRVJfTUFOQUdFUl9U\nWVBFLCBsbVR5cGUpOyAKICAgIH0KCiAgICAvKioKICAgICAqIEdldCBMZWRn\nZXIgTWFuYWdlciBUeXBlLgogICAgICoKICAgICAqIEByZXR1cm4gbGVkZ2Vy\nIG1hbmFnZXIgdHlwZQogICAgICogQHRocm93cyBDb25maWd1cmF0aW9uRXhj\nZXB0aW9uCiAgICAgKiBAZGVwcmVjYXRlZCByZXBsYWNlZCBieSB7QGxpbmsg\nI2dldExlZGdlck1hbmFnZXJGYWN0b3J5Q2xhc3MoKX0KICAgICAqLwogICAg\nQERlcHJlY2F0ZWQKICAgIHB1YmxpYyBTdHJpbmcgZ2V0TGVkZ2VyTWFuYWdl\nclR5cGUoKSB7CiAgICAgICAgcmV0dXJuIGdldFN0cmluZyhMRURHRVJfTUFO\nQUdFUl9UWVBFKTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCBMZWRnZXIg\nTWFuYWdlciBGYWN0b3J5IENsYXNzIE5hbWUuCiAgICAgKgogICAgICogQHBh\ncmFtIGZhY3RvcnlDbGFzc05hbWUKICAgICAqICAgICAgICAgIExlZGdlciBN\nYW5hZ2VyIEZhY3RvcnkgQ2xhc3MgTmFtZQogICAgICovCiAgICBwdWJsaWMg\ndm9pZCBzZXRMZWRnZXJNYW5hZ2VyRmFjdG9yeUNsYXNzTmFtZShTdHJpbmcg\nZmFjdG9yeUNsYXNzTmFtZSkgewogICAgICAgIHNldFByb3BlcnR5KExFREdF\nUl9NQU5BR0VSX0ZBQ1RPUllfQ0xBU1MsIGZhY3RvcnlDbGFzc05hbWUpOwog\nICAgfQoKICAgIC8qKgogICAgICogU2V0IExlZGdlciBNYW5hZ2VyIEZhY3Rv\ncnkgQ2xhc3MuCiAgICAgKgogICAgICogQHBhcmFtIGZhY3RvcnlDbGFzcwog\nICAgICogICAgICAgICAgTGVkZ2VyIE1hbmFnZXIgRmFjdG9yeSBDbGFzcwog\nICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRMZWRnZXJNYW5hZ2VyRmFjdG9y\neUNsYXNzKENsYXNzPD8gZXh0ZW5kcyBMZWRnZXJNYW5hZ2VyRmFjdG9yeT4g\nZmFjdG9yeUNsYXNzKSB7CiAgICAgICAgc2V0UHJvcGVydHkoTEVER0VSX01B\nTkFHRVJfRkFDVE9SWV9DTEFTUywgZmFjdG9yeUNsYXNzLmdldE5hbWUoKSk7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgbGVkZ2VyIG1hbmFnZXIgZmFj\ndG9yeSBjbGFzcy4KICAgICAqCiAgICAgKiBAcmV0dXJuIGxlZGdlciBtYW5h\nZ2VyIGZhY3RvcnkgY2xhc3MKICAgICAqLwogICAgcHVibGljIENsYXNzPD8g\nZXh0ZW5kcyBMZWRnZXJNYW5hZ2VyRmFjdG9yeT4gZ2V0TGVkZ2VyTWFuYWdl\nckZhY3RvcnlDbGFzcygpCiAgICAgICAgdGhyb3dzIENvbmZpZ3VyYXRpb25F\neGNlcHRpb24gewogICAgICAgIHJldHVybiBSZWZsZWN0aW9uVXRpbHMuZ2V0\nQ2xhc3ModGhpcywgTEVER0VSX01BTkFHRVJfRkFDVE9SWV9DTEFTUywKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsIExl\nZGdlck1hbmFnZXJGYWN0b3J5LmNsYXNzLAogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdExvYWRlcik7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBTZXQgWmsgTGVkZ2VycyBSb290IFBhdGguCiAgICAg\nKgogICAgICogQHBhcmFtIHprTGVkZ2Vyc1BhdGggemsgbGVkZ2VycyByb290\nIHBhdGgKICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0WmtMZWRnZXJzUm9v\ndFBhdGgoU3RyaW5nIHprTGVkZ2Vyc1BhdGgpIHsKICAgICAgICBzZXRQcm9w\nZXJ0eShaS19MRURHRVJTX1JPT1RfUEFUSCwgemtMZWRnZXJzUGF0aCk7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBHZXQgWmsgTGVkZ2VycyBSb290IFBhdGgu\nCiAgICAgKgogICAgICogQHJldHVybiB6ayBsZWRnZXJzIHJvb3QgcGF0aAog\nICAgICovCiAgICBwdWJsaWMgU3RyaW5nIGdldFprTGVkZ2Vyc1Jvb3RQYXRo\nKCkgewogICAgICAgIHJldHVybiBnZXRTdHJpbmcoWktfTEVER0VSU19ST09U\nX1BBVEgsICIvbGVkZ2VycyIpOwogICAgfQoKICAgIC8qKgogICAgICogR2V0\nIHRoZSBub2RlIHVuZGVyIHdoaWNoIGF2YWlsYWJsZSBib29raWVzIGFyZSBz\ndG9yZWQKICAgICAqCiAgICAgKiBAcmV0dXJuIE5vZGUgdW5kZXIgd2hpY2gg\nYXZhaWxhYmxlIGJvb2tpZXMgYXJlIHN0b3JlZC4KICAgICAqLwogICAgcHVi\nbGljIFN0cmluZyBnZXRaa0F2YWlsYWJsZUJvb2tpZXNQYXRoKCkgewogICAg\nICAgIHJldHVybiBnZXRaa0xlZGdlcnNSb290UGF0aCgpICsgIi8iICsgQVZB\nSUxBQkxFX05PREU7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogU2V0IHRo\nZSBtYXggZW50cmllcyB0byBrZWVwIGluIGZyYWdtZW50IGZvciByZS1yZXBs\naWNhdGlvbi4gSWYgZnJhZ21lbnQKICAgICAqIGhhcyBtb3JlIGVudHJpZXMg\ndGhhbiB0aGlzIGNvdW50LCB0aGVuIHRoZSBvcmlnaW5hbCBmcmFnbWVudCB3\naWxsIGJlCiAgICAgKiBzcGxpdCBpbnRvIG11bHRpcGxlIHNtYWxsIGxvZ2lj\nYWwgZnJhZ21lbnRzIGJ5IGtlZXBpbmcgbWF4IGVudHJpZXMgY291bnQKICAg\nICAqIHRvIHJlcmVwbGljYXRpb25FbnRyeUJhdGNoU2l6ZS4gU28sIHJlLXJl\ncGxpY2F0aW9uIHdpbGwgaGFwcGVuIGluIGJhdGNoZXMKICAgICAqIHdpc2Uu\nCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFJlcmVwbGljYXRpb25FbnRy\neUJhdGNoU2l6ZShsb25nIHJlcmVwbGljYXRpb25FbnRyeUJhdGNoU2l6ZSkg\newogICAgICAgIHNldFByb3BlcnR5KFJFUkVQTElDQVRJT05fRU5UUllfQkFU\nQ0hfU0laRSwgcmVyZXBsaWNhdGlvbkVudHJ5QmF0Y2hTaXplKTsKICAgIH0K\nCiAgICAvKioKICAgICAqIEdldCB0aGUgcmUtcmVwbGljYXRpb24gZW50cnkg\nYmF0Y2ggc2l6ZQogICAgICovCiAgICBwdWJsaWMgbG9uZyBnZXRSZXJlcGxp\nY2F0aW9uRW50cnlCYXRjaFNpemUoKSB7CiAgICAgICAgcmV0dXJuIGdldExv\nbmcoUkVSRVBMSUNBVElPTl9FTlRSWV9CQVRDSF9TSVpFLCAxMCk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBHZXQgbWV0YXN0b3JlIGltcGxlbWVudGF0aW9u\nIGNsYXNzLgogICAgICoKICAgICAqIEByZXR1cm4gbWV0YXN0b3JlIGltcGxl\nbWVudGF0aW9uIGNsYXNzIG5hbWUuCiAgICAgKi8KICAgIHB1YmxpYyBTdHJp\nbmcgZ2V0TWV0YXN0b3JlSW1wbENsYXNzKCkgewogICAgICAgIHJldHVybiBn\nZXRTdHJpbmcoTUVUQVNUT1JFX0lNUExfQ0xBU1MpOwogICAgfQoKICAgIC8q\nKgogICAgICogU2V0IG1ldGFzdG9yZSBpbXBsZW1lbnRhdGlvbiBjbGFzcy4K\nICAgICAqCiAgICAgKiBAcGFyYW0gbWV0YXN0b3JlSW1wbENsYXNzCiAgICAg\nKiAgICAgICAgICBNZXRhc3RvcmUgaW1wbGVtZW50YXRpb24gQ2xhc3MgbmFt\nZS4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0TWV0YXN0b3JlSW1wbENs\nYXNzKFN0cmluZyBtZXRhc3RvcmVJbXBsQ2xhc3MpIHsKICAgICAgICBzZXRQ\ncm9wZXJ0eShNRVRBU1RPUkVfSU1QTF9DTEFTUywgbWV0YXN0b3JlSW1wbENs\nYXNzKTsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCBtYXggZW50cmllcyBw\nZXIgc2NhbiBpbiBtZXRhc3RvcmUuCiAgICAgKgogICAgICogQHJldHVybiBt\nYXggZW50cmllcyBwZXIgc2NhbiBpbiBtZXRhc3RvcmUuCiAgICAgKi8KICAg\nIHB1YmxpYyBpbnQgZ2V0TWV0YXN0b3JlTWF4RW50cmllc1BlclNjYW4oKSB7\nCiAgICAgICAgcmV0dXJuIGdldEludChNRVRBU1RPUkVfTUFYX0VOVFJJRVNf\nUEVSX1NDQU4sIDUwKTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCBtYXgg\nZW50cmllcyBwZXIgc2NhbiBpbiBtZXRhc3RvcmUuCiAgICAgKgogICAgICog\nQHBhcmFtIG1heEVudHJpZXMKICAgICAqICAgICAgICAgIE1heCBlbnRyaWVz\nIHBlciBzY2FuIGluIG1ldGFzdG9yZS4KICAgICAqLwogICAgcHVibGljIHZv\naWQgc2V0TWV0YXN0b3JlTWF4RW50cmllc1BlclNjYW4oaW50IG1heEVudHJp\nZXMpIHsKICAgICAgICBzZXRQcm9wZXJ0eShNRVRBU1RPUkVfTUFYX0VOVFJJ\nRVNfUEVSX1NDQU4sIG1heEVudHJpZXMpOwogICAgfQp9Cg==\n","encoding":"base64"}

