{"sha":"a8731124807ff59eab8566e91376e8d1a1937e7a","node_id":"MDQ6QmxvYjE1NzU5NTY6YTg3MzExMjQ4MDdmZjU5ZWFiODU2NmU5MTM3NmU4ZDFhMTkzN2U3YQ==","size":7935,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/a8731124807ff59eab8566e91376e8d1a1937e7a","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIubWV0YTsKCmltcG9ydCBvcmcu\nYXBhY2hlLmJvb2trZWVwZXIuY2xpZW50LkJLRXhjZXB0aW9uOwppbXBvcnQg\nb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNsaWVudC5MZWRnZXJNZXRhZGF0YTsK\naW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5wcm90by5Cb29ra2VlcGVy\nSW50ZXJuYWxDYWxsYmFja3MuR2VuZXJpY0NhbGxiYWNrOwppbXBvcnQgb3Jn\nLmFwYWNoZS5ib29ra2VlcGVyLnByb3RvLkJvb2trZWVwZXJJbnRlcm5hbENh\nbGxiYWNrcy5MZWRnZXJNZXRhZGF0YUxpc3RlbmVyOwppbXBvcnQgb3JnLmFw\nYWNoZS5ib29ra2VlcGVyLnByb3RvLkJvb2trZWVwZXJJbnRlcm5hbENhbGxi\nYWNrcy5Qcm9jZXNzb3I7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIu\ndmVyc2lvbmluZy5WZXJzaW9uOwppbXBvcnQgb3JnLmFwYWNoZS56b29rZWVw\nZXIuQXN5bmNDYWxsYmFjazsKCmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9u\nOwppbXBvcnQgamF2YS51dGlsLkhhc2hTZXQ7CmltcG9ydCBqYXZhLnV0aWwu\nU2V0OwppbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuQ29uY3VycmVudEhh\nc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5Db25jdXJyZW50\nTWFwOwppbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQubG9ja3MuUmVlbnRy\nYW50UmVhZFdyaXRlTG9jazsKCnB1YmxpYyBjbGFzcyBDbGVhbnVwTGVkZ2Vy\nTWFuYWdlciBpbXBsZW1lbnRzIExlZGdlck1hbmFnZXIgewoKICAgIHByaXZh\ndGUgY2xhc3MgQ2xlYW51cEdlbmVyaWNDYWxsYmFjazxUPiBpbXBsZW1lbnRz\nIEdlbmVyaWNDYWxsYmFjazxUPiB7CgogICAgICAgIHByaXZhdGUgZmluYWwg\nR2VuZXJpY0NhbGxiYWNrPFQ+IGNiOwoKICAgICAgICBDbGVhbnVwR2VuZXJp\nY0NhbGxiYWNrKEdlbmVyaWNDYWxsYmFjazxUPiBjYikgewogICAgICAgICAg\nICB0aGlzLmNiID0gY2I7CiAgICAgICAgICAgIGFkZENhbGxiYWNrKGNiKTsK\nICAgICAgICB9CgogICAgICAgIEBPdmVycmlkZQogICAgICAgIHB1YmxpYyB2\nb2lkIG9wZXJhdGlvbkNvbXBsZXRlKGludCByYywgVCByZXN1bHQpIHsKICAg\nICAgICAgICAgY2xvc2VMb2NrLnJlYWRMb2NrKCkubG9jaygpOwogICAgICAg\nICAgICB0cnkgewogICAgICAgICAgICAgICAgaWYgKCFjbG9zZWQgJiYgbnVs\nbCAhPSByZW1vdmVDYWxsYmFjayhjYikpIHsKICAgICAgICAgICAgICAgICAg\nICBjYi5vcGVyYXRpb25Db21wbGV0ZShyYywgcmVzdWx0KTsKICAgICAgICAg\nICAgICAgIH0KICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAg\nICAgIGNsb3NlTG9jay5yZWFkTG9jaygpLnVubG9jaygpOwogICAgICAgICAg\nICB9CiAgICAgICAgfQogICAgfQoKICAgIHByaXZhdGUgc3RhdGljIGNsYXNz\nIENsb3NlZExlZGdlclJhbmdlSXRlcmF0b3IgaW1wbGVtZW50cyBMZWRnZXJS\nYW5nZUl0ZXJhdG9yIHsKCiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHVi\nbGljIGJvb2xlYW4gaGFzTmV4dCgpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAg\nICAgICAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlvbigiTGVkZ2VyIG1hbmFn\nZXIgaXMgY2xvc2VkLiIpOwogICAgICAgIH0KCiAgICAgICAgQE92ZXJyaWRl\nCiAgICAgICAgcHVibGljIExlZGdlclJhbmdlIG5leHQoKSB0aHJvd3MgSU9F\neGNlcHRpb24gewogICAgICAgICAgICB0aHJvdyBuZXcgSU9FeGNlcHRpb24o\nIkxlZGdlciBtYW5hZ2VyIGlzIGNsb3NlZC4iKTsKICAgICAgICB9CiAgICB9\nCgogICAgcHJpdmF0ZSBmaW5hbCBMZWRnZXJNYW5hZ2VyIHVuZGVybHlpbmc7\nCiAgICBwcml2YXRlIGZpbmFsIENvbmN1cnJlbnRNYXA8R2VuZXJpY0NhbGxi\nYWNrLCBHZW5lcmljQ2FsbGJhY2s+IGNhbGxiYWNrcyA9CiAgICAgICAgbmV3\nIENvbmN1cnJlbnRIYXNoTWFwPEdlbmVyaWNDYWxsYmFjaywgR2VuZXJpY0Nh\nbGxiYWNrPigpOwogICAgcHJpdmF0ZSBib29sZWFuIGNsb3NlZCA9IGZhbHNl\nOwogICAgcHJpdmF0ZSBmaW5hbCBSZWVudHJhbnRSZWFkV3JpdGVMb2NrIGNs\nb3NlTG9jayA9IG5ldyBSZWVudHJhbnRSZWFkV3JpdGVMb2NrKCk7CgogICAg\ncHVibGljIENsZWFudXBMZWRnZXJNYW5hZ2VyKExlZGdlck1hbmFnZXIgbG0p\nIHsKICAgICAgICB0aGlzLnVuZGVybHlpbmcgPSBsbTsKICAgIH0KCiAgICBw\ncml2YXRlIHZvaWQgYWRkQ2FsbGJhY2soR2VuZXJpY0NhbGxiYWNrIGNhbGxi\nYWNrKSB7CiAgICAgICAgY2FsbGJhY2tzLnB1dChjYWxsYmFjaywgY2FsbGJh\nY2spOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgcmVn\naXN0ZXJMZWRnZXJNZXRhZGF0YUxpc3RlbmVyKGxvbmcgbGVkZ2VySWQsIExl\nZGdlck1ldGFkYXRhTGlzdGVuZXIgbGlzdGVuZXIpIHsKICAgICAgICB1bmRl\ncmx5aW5nLnJlZ2lzdGVyTGVkZ2VyTWV0YWRhdGFMaXN0ZW5lcihsZWRnZXJJ\nZCwgbGlzdGVuZXIpOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGlj\nIHZvaWQgdW5yZWdpc3RlckxlZGdlck1ldGFkYXRhTGlzdGVuZXIobG9uZyBs\nZWRnZXJJZCwgTGVkZ2VyTWV0YWRhdGFMaXN0ZW5lciBsaXN0ZW5lcikgewog\nICAgICAgIHVuZGVybHlpbmcudW5yZWdpc3RlckxlZGdlck1ldGFkYXRhTGlz\ndGVuZXIobGVkZ2VySWQsIGxpc3RlbmVyKTsKICAgIH0KCiAgICBwcml2YXRl\nIEdlbmVyaWNDYWxsYmFjayByZW1vdmVDYWxsYmFjayhHZW5lcmljQ2FsbGJh\nY2sgY2FsbGJhY2spIHsKICAgICAgICByZXR1cm4gY2FsbGJhY2tzLnJlbW92\nZShjYWxsYmFjayk7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMg\ndm9pZCBjcmVhdGVMZWRnZXIoTGVkZ2VyTWV0YWRhdGEgbWV0YWRhdGEsCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgR2VuZXJpY0NhbGxiYWNrPExv\nbmc+IGNiKSB7CiAgICAgICAgY2xvc2VMb2NrLnJlYWRMb2NrKCkubG9jaygp\nOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGlmIChjbG9zZWQpIHsKICAg\nICAgICAgICAgICAgIGNiLm9wZXJhdGlvbkNvbXBsZXRlKEJLRXhjZXB0aW9u\nLkNvZGUuQ2xpZW50Q2xvc2VkRXhjZXB0aW9uLCBudWxsKTsKICAgICAgICAg\nICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICB1bmRl\ncmx5aW5nLmNyZWF0ZUxlZGdlcihtZXRhZGF0YSwgbmV3IENsZWFudXBHZW5l\ncmljQ2FsbGJhY2s8TG9uZz4oY2IpKTsKICAgICAgICB9IGZpbmFsbHkgewog\nICAgICAgICAgICBjbG9zZUxvY2sucmVhZExvY2soKS51bmxvY2soKTsKICAg\nICAgICB9CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBy\nZW1vdmVMZWRnZXJNZXRhZGF0YShsb25nIGxlZGdlcklkLCBWZXJzaW9uIHZl\ncnNpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBH\nZW5lcmljQ2FsbGJhY2s8Vm9pZD4gdmIpIHsKICAgICAgICBjbG9zZUxvY2su\ncmVhZExvY2soKS5sb2NrKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\naWYgKGNsb3NlZCkgewogICAgICAgICAgICAgICAgdmIub3BlcmF0aW9uQ29t\ncGxldGUoQktFeGNlcHRpb24uQ29kZS5DbGllbnRDbG9zZWRFeGNlcHRpb24s\nIG51bGwpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9\nCiAgICAgICAgICAgIHVuZGVybHlpbmcucmVtb3ZlTGVkZ2VyTWV0YWRhdGEo\nbGVkZ2VySWQsIHZlcnNpb24sCiAgICAgICAgICAgICAgICAgICAgbmV3IENs\nZWFudXBHZW5lcmljQ2FsbGJhY2s8Vm9pZD4odmIpKTsKICAgICAgICB9IGZp\nbmFsbHkgewogICAgICAgICAgICBjbG9zZUxvY2sucmVhZExvY2soKS51bmxv\nY2soKTsKICAgICAgICB9CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJs\naWMgdm9pZCByZWFkTGVkZ2VyTWV0YWRhdGEobG9uZyBsZWRnZXJJZCwKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBHZW5lcmljQ2FsbGJh\nY2s8TGVkZ2VyTWV0YWRhdGE+IHJlYWRDYikgewogICAgICAgIGNsb3NlTG9j\nay5yZWFkTG9jaygpLmxvY2soKTsKICAgICAgICB0cnkgewogICAgICAgICAg\nICBpZiAoY2xvc2VkKSB7CiAgICAgICAgICAgICAgICByZWFkQ2Iub3BlcmF0\naW9uQ29tcGxldGUoQktFeGNlcHRpb24uQ29kZS5DbGllbnRDbG9zZWRFeGNl\ncHRpb24sIG51bGwpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAg\nICAgICB9CiAgICAgICAgICAgIHVuZGVybHlpbmcucmVhZExlZGdlck1ldGFk\nYXRhKGxlZGdlcklkLCBuZXcgQ2xlYW51cEdlbmVyaWNDYWxsYmFjazxMZWRn\nZXJNZXRhZGF0YT4ocmVhZENiKSk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAg\nICAgICAgICAgY2xvc2VMb2NrLnJlYWRMb2NrKCkudW5sb2NrKCk7CiAgICAg\nICAgfQogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgd3Jp\ndGVMZWRnZXJNZXRhZGF0YShsb25nIGxlZGdlcklkLCBMZWRnZXJNZXRhZGF0\nYSBtZXRhZGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgR2VuZXJpY0NhbGxiYWNrPFZvaWQ+IGNiKSB7CiAgICAgICAgY2xvc2VM\nb2NrLnJlYWRMb2NrKCkubG9jaygpOwogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIGlmIChjbG9zZWQpIHsKICAgICAgICAgICAgICAgIGNiLm9wZXJhdGlv\nbkNvbXBsZXRlKEJLRXhjZXB0aW9uLkNvZGUuQ2xpZW50Q2xvc2VkRXhjZXB0\naW9uLCBudWxsKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAg\nICAgfQogICAgICAgICAgICB1bmRlcmx5aW5nLndyaXRlTGVkZ2VyTWV0YWRh\ndGEobGVkZ2VySWQsIG1ldGFkYXRhLAogICAgICAgICAgICAgICAgICAgIG5l\ndyBDbGVhbnVwR2VuZXJpY0NhbGxiYWNrPFZvaWQ+KGNiKSk7CiAgICAgICAg\nfSBmaW5hbGx5IHsKICAgICAgICAgICAgY2xvc2VMb2NrLnJlYWRMb2NrKCku\ndW5sb2NrKCk7CiAgICAgICAgfQogICAgfQoKICAgIEBPdmVycmlkZQogICAg\ncHVibGljIHZvaWQgYXN5bmNQcm9jZXNzTGVkZ2VycyhQcm9jZXNzb3I8TG9u\nZz4gcHJvY2Vzc29yLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICBmaW5hbCBBc3luY0NhbGxiYWNrLlZvaWRDYWxsYmFjayBmaW5hbENi\nLCBmaW5hbCBPYmplY3QgY29udGV4dCwKICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgZmluYWwgaW50IHN1Y2Nlc3NSYywgZmluYWwgaW50\nIGZhaWx1cmVSYykgewogICAgICAgIGNsb3NlTG9jay5yZWFkTG9jaygpLmxv\nY2soKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBpZiAoY2xvc2VkKSB7\nCiAgICAgICAgICAgICAgICBmaW5hbENiLnByb2Nlc3NSZXN1bHQoZmFpbHVy\nZVJjLCBudWxsLCBjb250ZXh0KTsKICAgICAgICAgICAgICAgIHJldHVybjsK\nICAgICAgICAgICAgfQogICAgICAgICAgICBmaW5hbCBHZW5lcmljQ2FsbGJh\nY2s8Vm9pZD4gc3R1YiA9IG5ldyBHZW5lcmljQ2FsbGJhY2s8Vm9pZD4oKSB7\nCiAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgIHB1\nYmxpYyB2b2lkIG9wZXJhdGlvbkNvbXBsZXRlKGludCByYywgVm9pZCByZXN1\nbHQpIHsKICAgICAgICAgICAgICAgICAgICBmaW5hbENiLnByb2Nlc3NSZXN1\nbHQoZmFpbHVyZVJjLCBudWxsLCBjb250ZXh0KTsKICAgICAgICAgICAgICAg\nIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgYWRkQ2FsbGJhY2soc3R1\nYik7CiAgICAgICAgICAgIHVuZGVybHlpbmcuYXN5bmNQcm9jZXNzTGVkZ2Vy\ncyhwcm9jZXNzb3IsIG5ldyBBc3luY0NhbGxiYWNrLlZvaWRDYWxsYmFjaygp\nIHsKICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAg\ncHVibGljIHZvaWQgcHJvY2Vzc1Jlc3VsdChpbnQgcmMsIFN0cmluZyBwYXRo\nLCBPYmplY3QgY3R4KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwg\nIT0gcmVtb3ZlQ2FsbGJhY2soc3R1YikpIHsKICAgICAgICAgICAgICAgICAg\nICAgICAgZmluYWxDYi5wcm9jZXNzUmVzdWx0KHJjLCBwYXRoLCBjdHgpOwog\nICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAg\nICAgICAgfSwgY29udGV4dCwgc3VjY2Vzc1JjLCBmYWlsdXJlUmMpOwogICAg\nICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIGNsb3NlTG9jay5yZWFkTG9j\naygpLnVubG9jaygpOwogICAgICAgIH0KICAgIH0KCiAgICBAT3ZlcnJpZGUK\nICAgIHB1YmxpYyBMZWRnZXJSYW5nZUl0ZXJhdG9yIGdldExlZGdlclJhbmdl\ncygpIHsKICAgICAgICBjbG9zZUxvY2sucmVhZExvY2soKS5sb2NrKCk7CiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKGNsb3NlZCkgewogICAgICAg\nICAgICAgICAgcmV0dXJuIG5ldyBDbG9zZWRMZWRnZXJSYW5nZUl0ZXJhdG9y\nKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHVuZGVybHlp\nbmcuZ2V0TGVkZ2VyUmFuZ2VzKCk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAg\nICAgICAgICAgY2xvc2VMb2NrLnJlYWRMb2NrKCkudW5sb2NrKCk7CiAgICAg\nICAgfQogICAgfQoKICAgIEBPdmVycmlkZQogICAgQFN1cHByZXNzV2Fybmlu\nZ3MoInVuY2hlY2tlZCIpCiAgICBwdWJsaWMgdm9pZCBjbG9zZSgpIHRocm93\ncyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgU2V0PEdlbmVyaWNDYWxsYmFjaz4g\na2V5czsKICAgICAgICBjbG9zZUxvY2sud3JpdGVMb2NrKCkubG9jaygpOwog\nICAgICAgIHRyeSB7CiAgICAgICAgICAgIGlmIChjbG9zZWQpIHsKICAgICAg\nICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBj\nbG9zZWQgPSB0cnVlOwogICAgICAgICAgICBrZXlzID0gbmV3IEhhc2hTZXQ8\nR2VuZXJpY0NhbGxiYWNrPihjYWxsYmFja3Mua2V5U2V0KCkpOwogICAgICAg\nIH0gZmluYWxseSB7CiAgICAgICAgICAgIGNsb3NlTG9jay53cml0ZUxvY2so\nKS51bmxvY2soKTsKICAgICAgICB9CiAgICAgICAgZm9yIChHZW5lcmljQ2Fs\nbGJhY2sga2V5IDoga2V5cykgewogICAgICAgICAgICBHZW5lcmljQ2FsbGJh\nY2sgY2FsbGJhY2sgPSBjYWxsYmFja3MucmVtb3ZlKGtleSk7CiAgICAgICAg\nICAgIGlmIChudWxsICE9IGNhbGxiYWNrKSB7CiAgICAgICAgICAgICAgICBj\nYWxsYmFjay5vcGVyYXRpb25Db21wbGV0ZShCS0V4Y2VwdGlvbi5Db2RlLkNs\naWVudENsb3NlZEV4Y2VwdGlvbiwgbnVsbCk7CiAgICAgICAgICAgIH0KICAg\nICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

