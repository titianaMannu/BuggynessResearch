{"sha":"7c3cf5c994c7a8a61e8ad1cea70bab9c0c2720ec","node_id":"MDQ6QmxvYjE1NzU5NTY6N2MzY2Y1Yzk5NGM3YThhNjFlOGFkMWNlYTcwYmFiOWMwYzI3MjBlYw==","size":10271,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/7c3cf5c994c7a8a61e8ad1cea70bab9c0c2720ec","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIubWV0YTsKCi8qKgogKiBM\naWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFT\nRikgdW5kZXIgb25lCiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBh\nZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQogKiBkaXN0cmlidXRl\nZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbgog\nKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGlj\nZW5zZXMgdGhpcyBmaWxlCiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExp\nY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUKICogIkxpY2Vuc2UiKTsgeW91IG1h\neSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZQogKiB3\naXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRo\nZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcv\nbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5\nIGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0\nd2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0\ncmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJB\nTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJl\nc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3Bl\nY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBs\naW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgppbXBvcnQgamF2\nYS5pby5JT0V4Y2VwdGlvbjsKCmltcG9ydCBvcmcuc2xmNGouTG9nZ2VyOwpp\nbXBvcnQgb3JnLnNsZjRqLkxvZ2dlckZhY3Rvcnk7CgppbXBvcnQgb3JnLmFw\nYWNoZS5ib29ra2VlcGVyLnJlcGxpY2F0aW9uLlJlcGxpY2F0aW9uRXhjZXB0\naW9uOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNvbmYuQWJzdHJh\nY3RDb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVy\nLnV0aWwuUmVmbGVjdGlvblV0aWxzOwppbXBvcnQgb3JnLmFwYWNoZS5jb21t\nb25zLmNvbmZpZ3VyYXRpb24uQ29uZmlndXJhdGlvbkV4Y2VwdGlvbjsKaW1w\nb3J0IG9yZy5hcGFjaGUuem9va2VlcGVyLktlZXBlckV4Y2VwdGlvbjsKaW1w\nb3J0IG9yZy5hcGFjaGUuem9va2VlcGVyLlpvb0tlZXBlcjsKCnB1YmxpYyBh\nYnN0cmFjdCBjbGFzcyBMZWRnZXJNYW5hZ2VyRmFjdG9yeSB7CgogICAgc3Rh\ndGljIGZpbmFsIExvZ2dlciBMT0cgPSBMb2dnZXJGYWN0b3J5LmdldExvZ2dl\ncihMZWRnZXJNYW5hZ2VyRmFjdG9yeS5jbGFzcyk7CiAgICAvLyB2MSBsYXlv\ndXQKICAgIHN0YXRpYyBmaW5hbCBpbnQgVjEgPSAxOwoKICAgIC8qKgogICAg\nICogUmV0dXJuIGN1cnJlbnQgZmFjdG9yeSB2ZXJzaW9uLgogICAgICoKICAg\nICAqIEByZXR1cm4gY3VycmVudCB2ZXJzaW9uIHVzZWQgYnkgZmFjdG9yeS4K\nICAgICAqLwogICAgcHVibGljIGFic3RyYWN0IGludCBnZXRDdXJyZW50VmVy\nc2lvbigpOwoKICAgIC8qKgogICAgICogSW5pdGlhbGl6ZSBhIGZhY3Rvcnku\nCiAgICAgKgogICAgICogQHBhcmFtIGNvbmYKICAgICAqICAgICAgICAgIENv\nbmZpZ3VyYXRpb24gb2JqZWN0IHVzZWQgdG8gaW5pdGlhbGl6ZSBmYWN0b3J5\nCiAgICAgKiBAcGFyYW0gemsKICAgICAqICAgICAgICAgIEF2YWlsYWJsZSB6\nb29rZWVwZXIgaGFuZGxlIGZvciBsZWRnZXIgbWFuYWdlciB0byB1c2UuCiAg\nICAgKiBAcGFyYW0gZmFjdG9yeVZlcnNpb24KICAgICAqICAgICAgICAgIFdo\nYXQgdmVyc2lvbiB1c2VkIHRvIGluaXRpYWxpemUgZmFjdG9yeS4KICAgICAq\nIEByZXR1cm4gbGVkZ2VyIG1hbmFnZXIgZmFjdG9yeSBpbnN0YW5jZQogICAg\nICogQHRocm93cyBJT0V4Y2VwdGlvbiB3aGVuIGZhaWwgdG8gaW5pdGlhbGl6\nZSB0aGUgZmFjdG9yeS4KICAgICAqLwogICAgcHVibGljIGFic3RyYWN0IExl\nZGdlck1hbmFnZXJGYWN0b3J5IGluaXRpYWxpemUoZmluYWwgQWJzdHJhY3RD\nb25maWd1cmF0aW9uIGNvbmYsCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbCBab29LZWVwZXIgemss\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICBmaW5hbCBpbnQgZmFjdG9yeVZlcnNpb24pCiAgICB0aHJvd3Mg\nSU9FeGNlcHRpb247CgogICAgLyoqCiAgICAgKiBVbmluaXRpYWxpemUgdGhl\nIGZhY3RvcnkuCiAgICAgKgogICAgICogQHRocm93cyBJT0V4Y2VwdGlvbiB3\naGVuIGZhaWwgdG8gdW5pbml0aWFsaXplIHRoZSBmYWN0b3J5LgogICAgICov\nCiAgICBwdWJsaWMgYWJzdHJhY3Qgdm9pZCB1bmluaXRpYWxpemUoKSB0aHJv\nd3MgSU9FeGNlcHRpb247CgogICAgLyoqCiAgICAgKiByZXR1cm4gbGVkZ2Vy\nIG1hbmFnZXIgZm9yIGNsaWVudC1zaWRlIHRvIG1hbmFnZSBsZWRnZXIgbWV0\nYWRhdGEuCiAgICAgKgogICAgICogQHJldHVybiBsZWRnZXIgbWFuYWdlcgog\nICAgICogQHNlZSBMZWRnZXJNYW5hZ2VyCiAgICAgKi8KICAgIHB1YmxpYyBh\nYnN0cmFjdCBMZWRnZXJNYW5hZ2VyIG5ld0xlZGdlck1hbmFnZXIoKTsKCiAg\nICAvKioKICAgICAqIFJldHVybiBhIGxlZGdlciB1bmRlcnJlcGxpY2F0aW9u\nIG1hbmFnZXIsIHdoaWNoIGlzIHVzZWQgdG8KICAgICAqIG1hcmsgbGVkZ2Vy\ncyBhcyB1bnJlcGxpY2F0ZWQsIGFuZCB0byByZXRyaWV2ZSBhIGxlZGdlciB3\naGljaAogICAgICogaXMgdW5kZXJyZXBsaWNhdGVkIHNvIHRoYXQgaXQgY2Fu\nIGJlIHJlcmVwbGljYXRlZC4KICAgICAqCiAgICAgKiBAcmV0dXJuIGxlZGdl\nciB1bmRlcnJlcGxpY2F0aW9uIG1hbmFnZXIKICAgICAqIEBzZWUgTGVkZ2Vy\nVW5kZXJyZXBsaWNhdGlvbk1hbmFnZXIKICAgICAqLwogICAgcHVibGljIGFi\nc3RyYWN0IExlZGdlclVuZGVycmVwbGljYXRpb25NYW5hZ2VyIG5ld0xlZGdl\nclVuZGVycmVwbGljYXRpb25NYW5hZ2VyKCkKICAgICAgICAgICAgdGhyb3dz\nIEtlZXBlckV4Y2VwdGlvbiwgSW50ZXJydXB0ZWRFeGNlcHRpb24sIFJlcGxp\nY2F0aW9uRXhjZXB0aW9uLkNvbXBhdGliaWxpdHlFeGNlcHRpb247CgogICAg\nLyoqCiAgICAgKiBDcmVhdGUgbmV3IExlZGdlciBNYW5hZ2VyIEZhY3Rvcnku\nCiAgICAgKgogICAgICogQHBhcmFtIGNvbmYKICAgICAqICAgICAgICAgIENv\nbmZpZ3VyYXRpb24gT2JqZWN0LgogICAgICogQHBhcmFtIHprCiAgICAgKiAg\nICAgICAgICBab29LZWVwZXIgQ2xpZW50IEhhbmRsZSwgdGFsayB0byB6ayB0\nbyBrbm93IHdoaWNoIGxlZGdlciBtYW5hZ2VyIGlzIHVzZWQuCiAgICAgKiBA\ncmV0dXJuIG5ldyBsZWRnZXIgbWFuYWdlciBmYWN0b3J5CiAgICAgKiBAdGhy\nb3dzIElPRXhjZXB0aW9uCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgTGVk\nZ2VyTWFuYWdlckZhY3RvcnkgbmV3TGVkZ2VyTWFuYWdlckZhY3RvcnkoCiAg\nICAgICAgZmluYWwgQWJzdHJhY3RDb25maWd1cmF0aW9uIGNvbmYsIGZpbmFs\nIFpvb0tlZXBlciB6aykKICAgICAgICAgICAgdGhyb3dzIElPRXhjZXB0aW9u\nLCBLZWVwZXJFeGNlcHRpb24sIEludGVycnVwdGVkRXhjZXB0aW9uIHsKICAg\nICAgICBDbGFzczw/IGV4dGVuZHMgTGVkZ2VyTWFuYWdlckZhY3Rvcnk+IGZh\nY3RvcnlDbGFzczsKICAgICAgICB0cnkgewogICAgICAgICAgICBmYWN0b3J5\nQ2xhc3MgPSBjb25mLmdldExlZGdlck1hbmFnZXJGYWN0b3J5Q2xhc3MoKTsK\nICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICB0\naHJvdyBuZXcgSU9FeGNlcHRpb24oIkZhaWxlZCB0byBnZXQgbGVkZ2VyIG1h\nbmFnZXIgZmFjdG9yeSBjbGFzcyBmcm9tIGNvbmZpZ3VyYXRpb24gOiAiLCBl\nKTsKICAgICAgICB9CiAgICAgICAgU3RyaW5nIGxlZGdlclJvb3RQYXRoID0g\nY29uZi5nZXRaa0xlZGdlcnNSb290UGF0aCgpOwoKICAgICAgICBpZiAobnVs\nbCA9PSBsZWRnZXJSb290UGF0aCB8fCBsZWRnZXJSb290UGF0aC5sZW5ndGgo\nKSA9PSAwKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlvbigi\nRW1wdHkgTGVkZ2VyIFJvb3QgUGF0aC4iKTsKICAgICAgICB9CgogICAgICAg\nIC8vIGlmIHprIGlzIG51bGwsIHJldHVybiB0aGUgZGVmYXVsdCBsZWRnZXIg\nbWFuYWdlcgogICAgICAgIGlmICh6ayA9PSBudWxsKSB7CiAgICAgICAgICAg\nIHJldHVybiBuZXcgRmxhdExlZGdlck1hbmFnZXJGYWN0b3J5KCkKICAgICAg\nICAgICAgICAgICAgIC5pbml0aWFsaXplKGNvbmYsIG51bGwsIEZsYXRMZWRn\nZXJNYW5hZ2VyRmFjdG9yeS5DVVJfVkVSU0lPTik7CiAgICAgICAgfQoKICAg\nICAgICBMZWRnZXJNYW5hZ2VyRmFjdG9yeSBsbUZhY3Rvcnk7CgogICAgICAg\nIC8vIGNoZWNrIHRoYXQgdGhlIGNvbmZpZ3VyZWQgbGVkZ2VyIG1hbmFnZXIg\naXMKICAgICAgICAvLyBjb21wYXRpYmxlIHdpdGggdGhlIGV4aXN0aW5nIGxh\neW91dAogICAgICAgIExlZGdlckxheW91dCBsYXlvdXQgPSBMZWRnZXJMYXlv\ndXQucmVhZExheW91dCh6aywgbGVkZ2VyUm9vdFBhdGgpOwogICAgICAgIGlm\nIChsYXlvdXQgPT0gbnVsbCkgeyAvLyBubyBleGlzdGluZyBsYXlvdXQKICAg\nICAgICAgICAgbG1GYWN0b3J5ID0gY3JlYXRlTmV3TE1GYWN0b3J5KGNvbmYs\nIHprLCBmYWN0b3J5Q2xhc3MpOwogICAgICAgICAgICByZXR1cm4gbG1GYWN0\nb3J5CiAgICAgICAgICAgICAgICAgICAgLmluaXRpYWxpemUoY29uZiwgemss\nIGxtRmFjdG9yeS5nZXRDdXJyZW50VmVyc2lvbigpKTsKICAgICAgICB9CiAg\nICAgICAgTE9HLmRlYnVnKCJyZWFkIGxlZGdlciBsYXlvdXQge30iLCBsYXlv\ndXQpOwoKICAgICAgICAvLyB0aGVyZSBpcyBleGlzdGluZyBsYXlvdXQsIHdl\nIG5lZWQgdG8gbG9vayBpbnRvIHRoZSBsYXlvdXQuCiAgICAgICAgLy8gaGFu\nZGxlIHByZSBWMiBsYXlvdXQKICAgICAgICBpZiAobGF5b3V0LmdldExheW91\ndEZvcm1hdFZlcnNpb24oKSA8PSBWMSkgewogICAgICAgICAgICAvLyBwcmUg\nVjIgbGF5b3V0IHdlIHVzZSB0eXBlIG9mIGxlZGdlciBtYW5hZ2VyCiAgICAg\nICAgICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJkZXByZWNhdGlvbiIpCiAgICAg\nICAgICAgIFN0cmluZyBsbVR5cGUgPSBjb25mLmdldExlZGdlck1hbmFnZXJU\neXBlKCk7CiAgICAgICAgICAgIGlmIChsbVR5cGUgIT0gbnVsbCAmJiAhbGF5\nb3V0LmdldE1hbmFnZXJGYWN0b3J5Q2xhc3MoKS5lcXVhbHMobG1UeXBlKSkg\newogICAgICAgICAgICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKCJDb25m\naWd1cmVkIGxheW91dCAiICsgbG1UeXBlCiAgICAgICAgICAgICAgICAgICAg\nICAgICsgIiBkb2VzIG5vdCBtYXRjaCBleGlzdGluZyBsYXlvdXQgIiAgKyBs\nYXlvdXQuZ2V0TWFuYWdlckZhY3RvcnlDbGFzcygpKTsKICAgICAgICAgICAg\nfQoKICAgICAgICAgICAgLy8gY3JlYXRlIHRoZSBsZWRnZXIgbWFuYWdlcgog\nICAgICAgICAgICBpZiAoRmxhdExlZGdlck1hbmFnZXJGYWN0b3J5Lk5BTUUu\nZXF1YWxzKGxheW91dC5nZXRNYW5hZ2VyRmFjdG9yeUNsYXNzKCkpKSB7CiAg\nICAgICAgICAgICAgICBsbUZhY3RvcnkgPSBuZXcgRmxhdExlZGdlck1hbmFn\nZXJGYWN0b3J5KCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoSGllcmFyY2hp\nY2FsTGVkZ2VyTWFuYWdlckZhY3RvcnkuTkFNRS5lcXVhbHMobGF5b3V0Lmdl\ndE1hbmFnZXJGYWN0b3J5Q2xhc3MoKSkpIHsKICAgICAgICAgICAgICAgIGxt\nRmFjdG9yeSA9IG5ldyBIaWVyYXJjaGljYWxMZWRnZXJNYW5hZ2VyRmFjdG9y\neSgpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhy\nb3cgbmV3IElPRXhjZXB0aW9uKCJVbmtub3duIGxlZGdlciBtYW5hZ2VyIHR5\ncGU6ICIgKyBsbVR5cGUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJl\ndHVybiBsbUZhY3RvcnkuaW5pdGlhbGl6ZShjb25mLCB6aywgbGF5b3V0Lmdl\ndE1hbmFnZXJWZXJzaW9uKCkpOwogICAgICAgIH0KCiAgICAgICAgLy8gaGFu\nZGxlIFYyIGxheW91dCBjYXNlCiAgICAgICAgaWYgKGZhY3RvcnlDbGFzcyAh\nPSBudWxsICYmCiAgICAgICAgICAgICFsYXlvdXQuZ2V0TWFuYWdlckZhY3Rv\ncnlDbGFzcygpLmVxdWFscyhmYWN0b3J5Q2xhc3MuZ2V0TmFtZSgpKSkgewoK\nICAgICAgICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKCJDb25maWd1cmVk\nIGxheW91dCAiICsgZmFjdG9yeUNsYXNzLmdldE5hbWUoKQogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICsgIiBkb2VzIG5vdCBtYXRjaCBleGlz\ndGluZyBsYXlvdXQgIiAgKyBsYXlvdXQuZ2V0TWFuYWdlckZhY3RvcnlDbGFz\ncygpKTsKICAgICAgICB9CiAgICAgICAgaWYgKGZhY3RvcnlDbGFzcyA9PSBu\ndWxsKSB7CiAgICAgICAgICAgIC8vIG5vIGZhY3Rvcnkgc3BlY2lmaWVkIGlu\nIGNvbmZpZ3VyYXRpb24KICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\nICAgIENsYXNzPD8+IHRoZUNscyA9IENsYXNzLmZvck5hbWUobGF5b3V0Lmdl\ndE1hbmFnZXJGYWN0b3J5Q2xhc3MoKSk7CiAgICAgICAgICAgICAgICBpZiAo\nIUxlZGdlck1hbmFnZXJGYWN0b3J5LmNsYXNzLmlzQXNzaWduYWJsZUZyb20o\ndGhlQ2xzKSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBJT0V4\nY2VwdGlvbigiV3JvbmcgbGVkZ2VyIG1hbmFnZXIgZmFjdG9yeSAiICsgbGF5\nb3V0LmdldE1hbmFnZXJGYWN0b3J5Q2xhc3MoKSk7CiAgICAgICAgICAgICAg\nICB9CiAgICAgICAgICAgICAgICBmYWN0b3J5Q2xhc3MgPSB0aGVDbHMuYXNT\ndWJjbGFzcyhMZWRnZXJNYW5hZ2VyRmFjdG9yeS5jbGFzcyk7CiAgICAgICAg\nICAgIH0gY2F0Y2ggKENsYXNzTm90Rm91bmRFeGNlcHRpb24gY25mZSkgewog\nICAgICAgICAgICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKCJGYWlsZWQg\ndG8gaW5zdGFudGlhdGUgbGVkZ2VyIG1hbmFnZXIgZmFjdG9yeSAiICsgbGF5\nb3V0LmdldE1hbmFnZXJGYWN0b3J5Q2xhc3MoKSk7CiAgICAgICAgICAgIH0K\nICAgICAgICB9CiAgICAgICAgLy8gaW5zdGFudGlhdGUgYSBmYWN0b3J5CiAg\nICAgICAgbG1GYWN0b3J5ID0gUmVmbGVjdGlvblV0aWxzLm5ld0luc3RhbmNl\nKGZhY3RvcnlDbGFzcyk7CiAgICAgICAgcmV0dXJuIGxtRmFjdG9yeS5pbml0\naWFsaXplKGNvbmYsIHprLCBsYXlvdXQuZ2V0TWFuYWdlclZlcnNpb24oKSk7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGVzIHRoZSBuZXcgbGF5b3V0\nIGFuZCBzdG9yZXMgaW4gem9va2VlcGVyIGFuZCByZXR1cm5zIHRoZQogICAg\nICogTGVkZ2VyTWFuYWdlckZhY3RvcnkgaW5zdGFuY2UuCiAgICAgKi8KICAg\nIHByaXZhdGUgc3RhdGljIExlZGdlck1hbmFnZXJGYWN0b3J5IGNyZWF0ZU5l\nd0xNRmFjdG9yeSgKICAgICAgICAgICAgZmluYWwgQWJzdHJhY3RDb25maWd1\ncmF0aW9uIGNvbmYsIGZpbmFsIFpvb0tlZXBlciB6aywKICAgICAgICAgICAg\nQ2xhc3M8PyBleHRlbmRzIExlZGdlck1hbmFnZXJGYWN0b3J5PiBmYWN0b3J5\nQ2xhc3MpCiAgICAgICAgICAgIHRocm93cyBJT0V4Y2VwdGlvbiwgS2VlcGVy\nRXhjZXB0aW9uLCBJbnRlcnJ1cHRlZEV4Y2VwdGlvbiB7CgogICAgICAgIFN0\ncmluZyBsZWRnZXJSb290UGF0aCA9IGNvbmYuZ2V0WmtMZWRnZXJzUm9vdFBh\ndGgoKTsKICAgICAgICBMZWRnZXJNYW5hZ2VyRmFjdG9yeSBsbUZhY3Rvcnk7\nCiAgICAgICAgTGVkZ2VyTGF5b3V0IGxheW91dDsKICAgICAgICAvLyB1c2Ug\nZGVmYXVsdCBsZWRnZXIgbWFuYWdlciBmYWN0b3J5IGlmIG5vIG9uZSBwcm92\naWRlZAogICAgICAgIGlmIChmYWN0b3J5Q2xhc3MgPT0gbnVsbCkgewogICAg\nICAgICAgICAvLyBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSwgY2hlY2sg\nbWFuYWdlciB0eXBlCiAgICAgICAgICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJk\nZXByZWNhdGlvbiIpCiAgICAgICAgICAgIFN0cmluZyBsbVR5cGUgPSBjb25m\nLmdldExlZGdlck1hbmFnZXJUeXBlKCk7CiAgICAgICAgICAgIGlmIChsbVR5\ncGUgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgZmFjdG9yeUNsYXNzID0g\nRmxhdExlZGdlck1hbmFnZXJGYWN0b3J5LmNsYXNzOwogICAgICAgICAgICB9\nIGVsc2UgewogICAgICAgICAgICAgICAgaWYgKEZsYXRMZWRnZXJNYW5hZ2Vy\nRmFjdG9yeS5OQU1FLmVxdWFscyhsbVR5cGUpKSB7CiAgICAgICAgICAgICAg\nICAgICAgZmFjdG9yeUNsYXNzID0gRmxhdExlZGdlck1hbmFnZXJGYWN0b3J5\nLmNsYXNzOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChIaWVyYXJjaGlj\nYWxMZWRnZXJNYW5hZ2VyRmFjdG9yeS5OQU1FLmVxdWFscyhsbVR5cGUpKSB7\nCiAgICAgICAgICAgICAgICAgICAgZmFjdG9yeUNsYXNzID0gSGllcmFyY2hp\nY2FsTGVkZ2VyTWFuYWdlckZhY3RvcnkuY2xhc3M7CiAgICAgICAgICAgICAg\nICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBJT0V4\nY2VwdGlvbigiVW5rbm93biBsZWRnZXIgbWFuYWdlciB0eXBlOiAiCiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICArIGxtVHlwZSk7CiAgICAgICAgICAg\nICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGxtRmFj\ndG9yeSA9IFJlZmxlY3Rpb25VdGlscy5uZXdJbnN0YW5jZShmYWN0b3J5Q2xh\nc3MpOwoKICAgICAgICBsYXlvdXQgPSBuZXcgTGVkZ2VyTGF5b3V0KGZhY3Rv\ncnlDbGFzcy5nZXROYW1lKCksCiAgICAgICAgICAgICAgICBsbUZhY3Rvcnku\nZ2V0Q3VycmVudFZlcnNpb24oKSk7CiAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgbGF5b3V0LnN0b3JlKHprLCBsZWRnZXJSb290UGF0aCk7CiAgICAgICAg\nfSBjYXRjaCAoS2VlcGVyRXhjZXB0aW9uLk5vZGVFeGlzdHNFeGNlcHRpb24g\nbmVlKSB7CiAgICAgICAgICAgIExlZGdlckxheW91dCBsYXlvdXQyID0gTGVk\nZ2VyTGF5b3V0LnJlYWRMYXlvdXQoemssIGxlZGdlclJvb3RQYXRoKTsKICAg\nICAgICAgICAgaWYgKCFsYXlvdXQyLmVxdWFscyhsYXlvdXQpKSB7CiAgICAg\nICAgICAgICAgICB0aHJvdyBuZXcgSU9FeGNlcHRpb24oCiAgICAgICAgICAg\nICAgICAgICAgICAgICJDb250ZW50aW9uIHdyaXRpbmcgdG8gbGF5b3V0IHRv\nIHpvb2tlZXBlciwgIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICsgIiBvdGhlciBsYXlvdXQgIiArIGxheW91dDIKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICArICIgaXMgaW5jb21wYXRpYmxlIHdpdGggb3Vy\nICIgKyAibGF5b3V0ICIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICArIGxheW91dCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAg\ncmV0dXJuIGxtRmFjdG9yeTsKICAgIH0KCiAgICAvKioKICAgICAqIEZvcm1h\ndCB0aGUgbGVkZ2VyIG1ldGFkYXRhIGZvciBMZWRnZXJNYW5hZ2VyCiAgICAg\nKiAKICAgICAqIEBwYXJhbSBjb25mCiAgICAgKiAgICAgICAgICAgIENvbmZp\nZ3VyYXRpb24gaW5zdGFuY2UKICAgICAqIEBwYXJhbSB6awogICAgICogICAg\nICAgICAgICBab29rZWVwZXIgaW5zdGFuY2UKICAgICAqLwogICAgcHVibGlj\nIHZvaWQgZm9ybWF0KGZpbmFsIEFic3RyYWN0Q29uZmlndXJhdGlvbiBjb25m\nLCBmaW5hbCBab29LZWVwZXIgemspCiAgICAgICAgICAgIHRocm93cyBJbnRl\ncnJ1cHRlZEV4Y2VwdGlvbiwgS2VlcGVyRXhjZXB0aW9uLCBJT0V4Y2VwdGlv\nbiB7CiAgICAgICAgCiAgICAgICAgQ2xhc3M8PyBleHRlbmRzIExlZGdlck1h\nbmFnZXJGYWN0b3J5PiBmYWN0b3J5Q2xhc3M7CiAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgZmFjdG9yeUNsYXNzID0gY29uZi5nZXRMZWRnZXJNYW5hZ2Vy\nRmFjdG9yeUNsYXNzKCk7CiAgICAgICAgfSBjYXRjaCAoQ29uZmlndXJhdGlv\nbkV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJT0V4Y2Vw\ndGlvbigiRmFpbGVkIHRvIGdldCBsZWRnZXIgbWFuYWdlciBmYWN0b3J5IGNs\nYXNzIGZyb20gY29uZmlndXJhdGlvbiA6ICIsIGUpOwogICAgICAgIH0KICAg\nICAgIAogICAgICAgIExlZGdlckxheW91dCBsYXlvdXQgPSBMZWRnZXJMYXlv\ndXQucmVhZExheW91dCh6aywKICAgICAgICAgICAgICAgIGNvbmYuZ2V0WmtM\nZWRnZXJzUm9vdFBhdGgoKSk7CiAgICAgICAgbGF5b3V0LmRlbGV0ZSh6aywg\nY29uZi5nZXRaa0xlZGdlcnNSb290UGF0aCgpKTsKICAgICAgICAvLyBDcmVh\ndGUgbmV3IGxheW91dCBpbmZvcm1hdGlvbiBhZ2Fpbi4gICAgICAgIAogICAg\nICAgIGNyZWF0ZU5ld0xNRmFjdG9yeShjb25mLCB6aywgZmFjdG9yeUNsYXNz\nKTsKICAgIH0KfQo=\n","encoding":"base64"}

