{"sha":"a7cc953a33c59dc946af2786c1399d9787463103","node_id":"MDQ6QmxvYjE1NzU5NTY6YTdjYzk1M2EzM2M1OWRjOTQ2YWYyNzg2YzEzOTlkOTc4NzQ2MzEwMw==","size":3534,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/a7cc953a33c59dc946af2786c1399d9787463103","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIubWV0YXN0b3JlOwoKaW1wb3J0\nIHN0YXRpYyBvcmcuYXBhY2hlLmJvb2trZWVwZXIubWV0YXN0b3JlLkluTWVt\nb3J5TWV0YXN0b3JlVGFibGUuY2xvbmVWYWx1ZTsKCmltcG9ydCBqYXZhLmlv\nLklPRXhjZXB0aW9uOwppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsKaW1w\nb3J0IGphdmEudXRpbC5JdGVyYXRvcjsKaW1wb3J0IGphdmEudXRpbC5MaXN0\nOwppbXBvcnQgamF2YS51dGlsLk1hcDsKaW1wb3J0IGphdmEudXRpbC5TZXQ7\nCmltcG9ydCBqYXZhLnV0aWwuU29ydGVkTWFwOwppbXBvcnQgamF2YS51dGls\nLmNvbmN1cnJlbnQuU2NoZWR1bGVkRXhlY3V0b3JTZXJ2aWNlOwoKaW1wb3J0\nIG9yZy5hcGFjaGUuYm9va2tlZXBlci5tZXRhc3RvcmUuTVNFeGNlcHRpb24u\nQ29kZTsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci52ZXJzaW9uaW5n\nLlZlcnNpb25lZDsKCmltcG9ydCBjb20uZ29vZ2xlLmNvbW1vbi5jb2xsZWN0\nLkltbXV0YWJsZVNvcnRlZE1hcDsKCmNsYXNzIEluTWVtb3J5TWV0YXN0b3Jl\nQ3Vyc29yIGltcGxlbWVudHMgTWV0YXN0b3JlQ3Vyc29yIHsKCiAgICBwcml2\nYXRlIGZpbmFsIFNjaGVkdWxlZEV4ZWN1dG9yU2VydmljZSBzY2hlZHVsZXI7\nCiAgICBwcml2YXRlIGZpbmFsIEl0ZXJhdG9yPE1hcC5FbnRyeTxTdHJpbmcs\nIFZlcnNpb25lZDxWYWx1ZT4+PiBpdGVyOwogICAgcHJpdmF0ZSBmaW5hbCBT\nZXQ8U3RyaW5nPiBmaWVsZHM7CgogICAgcHVibGljIEluTWVtb3J5TWV0YXN0\nb3JlQ3Vyc29yKFNvcnRlZE1hcDxTdHJpbmcsIFZlcnNpb25lZDxWYWx1ZT4+\nIG1hcCwgU2V0PFN0cmluZz4gZmllbGRzLAogICAgICAgICAgICBTY2hlZHVs\nZWRFeGVjdXRvclNlcnZpY2Ugc2NoZWR1bGVyKSB7CiAgICAgICAgLy8gY29w\neSBhbiBtYXAgZm9yIGl0ZXJhdG9yIHRvIGF2b2lkIGNvbmN1cnJlbnQgbW9k\naWZpY2F0aW9uIHByb2JsZW0uCiAgICAgICAgdGhpcy5pdGVyID0gSW1tdXRh\nYmxlU29ydGVkTWFwLmNvcHlPZlNvcnRlZChtYXApLmVudHJ5U2V0KCkuaXRl\ncmF0b3IoKTsKICAgICAgICB0aGlzLmZpZWxkcyA9IGZpZWxkczsKICAgICAg\nICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjsKICAgIH0KCiAgICBAT3Zl\ncnJpZGUKICAgIHB1YmxpYyBib29sZWFuIGhhc01vcmVFbnRyaWVzKCkgewog\nICAgICAgIHJldHVybiBpdGVyLmhhc05leHQoKTsKICAgIH0KCiAgICBAT3Zl\ncnJpZGUKICAgIHB1YmxpYyBJdGVyYXRvcjxNZXRhc3RvcmVUYWJsZUl0ZW0+\nIHJlYWRFbnRyaWVzKGludCBudW1FbnRyaWVzKQogICAgdGhyb3dzIE1TRXhj\nZXB0aW9uIHsKICAgICAgICBpZiAobnVtRW50cmllcyA8IDApIHsKICAgICAg\nICAgICAgdGhyb3cgTVNFeGNlcHRpb24uY3JlYXRlKENvZGUuSWxsZWdhbE9w\nKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHVuc2FmZVJlYWRFbnRyaWVz\nKG51bUVudHJpZXMpOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGlj\nIHZvaWQgYXN5bmNSZWFkRW50cmllcyhmaW5hbCBpbnQgbnVtRW50cmllcywg\nZmluYWwgUmVhZEVudHJpZXNDYWxsYmFjayBjYiwgZmluYWwgT2JqZWN0IGN0\neCkgewogICAgICAgIHNjaGVkdWxlci5zdWJtaXQobmV3IFJ1bm5hYmxlKCkg\newogICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIHZv\naWQgcnVuKCkgewogICAgICAgICAgICAgICAgaWYgKG51bUVudHJpZXMgPCAw\nKSB7CiAgICAgICAgICAgICAgICAgICAgY2IuY29tcGxldGUoQ29kZS5JbGxl\nZ2FsT3AuZ2V0Q29kZSgpLCBudWxsLCBjdHgpOwogICAgICAgICAgICAgICAg\nICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAg\nIEl0ZXJhdG9yPE1ldGFzdG9yZVRhYmxlSXRlbT4gcmVzdWx0ID0gdW5zYWZl\nUmVhZEVudHJpZXMobnVtRW50cmllcyk7CiAgICAgICAgICAgICAgICBjYi5j\nb21wbGV0ZShDb2RlLk9LLmdldENvZGUoKSwgcmVzdWx0LCBjdHgpOwogICAg\nICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9CgogICAgcHJpdmF0ZSBJdGVy\nYXRvcjxNZXRhc3RvcmVUYWJsZUl0ZW0+IHVuc2FmZVJlYWRFbnRyaWVzKGlu\ndCBudW1FbnRyaWVzKSB7CiAgICAgICAgTGlzdDxNZXRhc3RvcmVUYWJsZUl0\nZW0+IGVudHJpZXMgPSBuZXcgQXJyYXlMaXN0PE1ldGFzdG9yZVRhYmxlSXRl\nbT4oKTsKICAgICAgICBpbnQgbkNvdW50ID0gMDsKICAgICAgICB3aGlsZSAo\naXRlci5oYXNOZXh0KCkgJiYgbkNvdW50IDwgbnVtRW50cmllcykgewogICAg\nICAgICAgICBNYXAuRW50cnk8U3RyaW5nLCBWZXJzaW9uZWQ8VmFsdWU+PiBl\nbnRyeSA9IGl0ZXIubmV4dCgpOwogICAgICAgICAgICBWZXJzaW9uZWQ8VmFs\ndWU+IHZhbHVlID0gZW50cnkuZ2V0VmFsdWUoKTsKICAgICAgICAgICAgVmVy\nc2lvbmVkPFZhbHVlPiB2diA9IGNsb25lVmFsdWUodmFsdWUuZ2V0VmFsdWUo\nKSwgdmFsdWUuZ2V0VmVyc2lvbigpLCBmaWVsZHMpOwogICAgICAgICAgICBT\ndHJpbmcga2V5ID0gZW50cnkuZ2V0S2V5KCk7CiAgICAgICAgICAgIGVudHJp\nZXMuYWRkKG5ldyBNZXRhc3RvcmVUYWJsZUl0ZW0oa2V5LCB2dikpOwogICAg\nICAgICAgICArK25Db3VudDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGVu\ndHJpZXMuaXRlcmF0b3IoKTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1\nYmxpYyB2b2lkIGNsb3NlKCkgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAg\nICAvLyBkbyBub3RoaW5nCiAgICB9Cn0K\n","encoding":"base64"}

