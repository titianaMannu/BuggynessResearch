{"sha":"cba1f7ebdad4d7ce36c5e12d7c30da49ccfa089a","node_id":"MDQ6QmxvYjE1NzU5NTY6Y2JhMWY3ZWJkYWQ0ZDdjZTM2YzVlMTJkN2MzMGRhNDljY2ZhMDg5YQ==","size":5349,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/cba1f7ebdad4d7ce36c5e12d7c30da49ccfa089a","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KLy8g\nVGhpcyBjb2RlIGhhcyBiZWVuIGNvcGllZCBmcm9tIGhhZG9vcC1jb21tb24g\nMC4yMy4xCnBhY2thZ2Ugb3JnLmFwYWNoZS5ib29ra2VlcGVyLm5ldDsKCmlt\ncG9ydCBqYXZhLnV0aWwuSGFzaFNldDsKaW1wb3J0IGphdmEudXRpbC5NYXA7\nCmltcG9ydCBqYXZhLnV0aWwuU2V0OwoKaW1wb3J0IG9yZy5hcGFjaGUuYm9v\na2tlZXBlci5jb25mLkNvbmZpZ3VyYWJsZTsKaW1wb3J0IG9yZy5hcGFjaGUu\nY29tbW9ucy5jb25maWd1cmF0aW9uLkNvbmZpZ3VyYXRpb247CgovKioKICog\nVGhpcyBpcyBhIGJhc2UgY2xhc3MgZm9yIEROUyB0byBTd2l0Y2ggbWFwcGlu\nZ3MuIDxwLz4gSXQgaXMgbm90IG1hbmRhdG9yeSB0bwogKiBkZXJpdmUge0Bs\naW5rIEROU1RvU3dpdGNoTWFwcGluZ30gaW1wbGVtZW50YXRpb25zIGZyb20g\naXQsIGJ1dCBpdCBpcyBzdHJvbmdseQogKiByZWNvbW1lbmRlZCwgYXMgaXQg\nbWFrZXMgaXQgZWFzeSBmb3IgdGhlIEhhZG9vcCBkZXZlbG9wZXJzIHRvIGFk\nZCBuZXcgbWV0aG9kcwogKiB0byB0aGlzIGJhc2UgY2xhc3MgdGhhdCBhcmUg\nYXV0b21hdGljYWxseSBwaWNrZWQgdXAgYnkgYWxsIGltcGxlbWVudGF0aW9u\ncy4KICogPHAvPgogKgogKiBUaGlzIGNsYXNzIGRvZXMgbm90IGV4dGVuZCB0\naGUgPGNvZGU+Q29uZmlndXJlZDwvY29kZT4KICogYmFzZSBjbGFzcywgYW5k\nIHNob3VsZCBub3QgYmUgY2hhbmdlZCB0byBkbyBzbywgYXMgaXQgY2F1c2Vz\nIHByb2JsZW1zCiAqIGZvciBzdWJjbGFzc2VzLiBUaGUgY29uc3RydWN0b3Ig\nb2YgdGhlIDxjb2RlPkNvbmZpZ3VyZWQ8L2NvZGU+IGNhbGxzCiAqIHRoZSAg\ne0BsaW5rICNzZXRDb25mKENvbmZpZ3VyYXRpb24pfSBtZXRob2QsIHdoaWNo\nIHdpbGwgY2FsbCBpbnRvIHRoZQogKiBzdWJjbGFzc2VzIGJlZm9yZSB0aGV5\nIGhhdmUgYmVlbiBmdWxseSBjb25zdHJ1Y3RlZC4KICoKICovCnB1YmxpYyBh\nYnN0cmFjdCBjbGFzcyBBYnN0cmFjdEROU1RvU3dpdGNoTWFwcGluZyBpbXBs\nZW1lbnRzIEROU1RvU3dpdGNoTWFwcGluZywgQ29uZmlndXJhYmxlIHsKCiAg\nICBwcml2YXRlIENvbmZpZ3VyYXRpb24gY29uZjsKCiAgICAvKioKICAgICAq\nIENyZWF0ZSBhbiB1bmNvbmZpZ3VyZWQgaW5zdGFuY2UKICAgICAqLwogICAg\ncHJvdGVjdGVkIEFic3RyYWN0RE5TVG9Td2l0Y2hNYXBwaW5nKCkgewogICAg\nfQoKICAgIC8qKgogICAgICogQ3JlYXRlIGFuIGluc3RhbmNlLCBjYWNoaW5n\nIHRoZSBjb25maWd1cmF0aW9uIGZpbGUuCiAgICAgKiBUaGlzIGNvbnN0cnVj\ndG9yIGRvZXMgbm90IGNhbGwge0BsaW5rICNzZXRDb25mKENvbmZpZ3VyYXRp\nb24pfTsgaWYKICAgICAqIGEgc3ViY2xhc3MgZXh0cmFjdHMgaW5mb3JtYXRp\nb24gaW4gdGhhdCBtZXRob2QsIGl0IG11c3QgY2FsbCBpdCBleHBsaWNpdGx5\nLgogICAgICogQHBhcmFtIGNvbmYgdGhlIGNvbmZpZ3VyYXRpb24KICAgICAq\nLwogICAgcHJvdGVjdGVkIEFic3RyYWN0RE5TVG9Td2l0Y2hNYXBwaW5nKENv\nbmZpZ3VyYXRpb24gY29uZikgewogICAgICAgIHRoaXMuY29uZiA9IGNvbmY7\nCiAgICB9CgogICAgcHVibGljIENvbmZpZ3VyYXRpb24gZ2V0Q29uZigpIHsK\nICAgICAgICByZXR1cm4gY29uZjsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBz\nZXRDb25mKENvbmZpZ3VyYXRpb24gY29uZikgewogICAgICAgIHRoaXMuY29u\nZiA9IGNvbmY7CiAgICB9CgogICAgLyoqCiAgICAgKiBQcmVkaWNhdGUgdGhh\ndCBpbmRpY2F0ZXMgdGhhdCB0aGUgc3dpdGNoIG1hcHBpbmcgaXMga25vd24g\ndG8gYmUKICAgICAqIHNpbmdsZS1zd2l0Y2guIFRoZSBiYXNlIGNsYXNzIHJl\ndHVybnMgZmFsc2U6IGl0IGFzc3VtZXMgYWxsIG1hcHBpbmdzIGFyZQogICAg\nICogbXVsdGktcmFjay4gU3ViY2xhc3NlcyBtYXkgb3ZlcnJpZGUgdGhpcyB3\naXRoIG1ldGhvZHMgdGhhdCBhcmUgbW9yZSBhd2FyZQogICAgICogb2YgdGhl\naXIgdG9wb2xvZ2llcy4KICAgICAqCiAgICAgKiA8cC8+CiAgICAgKgogICAg\nICogVGhpcyBtZXRob2QgaXMgdXNlZCB3aGVuIHBhcnRzIG9mIEhhZG9vcCBu\nZWVkIGtub3cgd2hldGhlciB0byBhcHBseQogICAgICogc2luZ2xlIHJhY2sg\ndnMgbXVsdGktcmFjayBwb2xpY2llcywgc3VjaCBhcyBkdXJpbmcgYmxvY2sg\ncGxhY2VtZW50LgogICAgICogU3VjaCBhbGdvcml0aG1zIGJlaGF2ZSBkaWZm\nZXJlbnRseSBpZiB0aGV5IGFyZSBvbiBtdWx0aS1zd2l0Y2ggc3lzdGVtcy4K\nICAgICAqIDwvcD4KICAgICAqCiAgICAgKiBAcmV0dXJuIHRydWUgaWYgdGhl\nIG1hcHBpbmcgdGhpbmtzIHRoYXQgaXQgaXMgb24gYSBzaW5nbGUgc3dpdGNo\nCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlzU2luZ2xlU3dpdGNoKCkg\newogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAvKioKICAgICAq\nIEdldCBhIGNvcHkgb2YgdGhlIG1hcCAoZm9yIGRpYWdub3N0aWNzKQogICAg\nICogQHJldHVybiBhIGNsb25lIG9mIHRoZSBtYXAgb3IgbnVsbCBmb3Igbm9u\nZSBrbm93bgogICAgICovCiAgICBwdWJsaWMgTWFwPFN0cmluZywgU3RyaW5n\nPiBnZXRTd2l0Y2hNYXAoKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBHZW5lcmF0ZSBhIHN0cmluZyBsaXN0aW5nIHRo\nZSBzd2l0Y2ggbWFwcGluZyBpbXBsZW1lbnRhdGlvbiwKICAgICAqIHRoZSBt\nYXBwaW5nIGZvciBldmVyeSBrbm93biBub2RlIGFuZCB0aGUgbnVtYmVyIG9m\nIG5vZGVzIGFuZAogICAgICogdW5pcXVlIHN3aXRjaGVzIGtub3duIGFib3V0\nIC1lYWNoIGVudHJ5IHRvIGEgc2VwYXJhdGUgbGluZS4KICAgICAqIEByZXR1\ncm4gYSBzdHJpbmcgdGhhdCBjYW4gYmUgcHJlc2VudGVkIHRvIHRoZSBvcHMg\ndGVhbSBvciB1c2VkIGluCiAgICAgKiBkZWJ1ZyBtZXNzYWdlcy4KICAgICAq\nLwogICAgcHVibGljIFN0cmluZyBkdW1wVG9wb2xvZ3koKSB7CiAgICAgICAg\nTWFwPFN0cmluZywgU3RyaW5nPiByYWNrID0gZ2V0U3dpdGNoTWFwKCk7CiAg\nICAgICAgU3RyaW5nQnVpbGRlciBidWlsZGVyID0gbmV3IFN0cmluZ0J1aWxk\nZXIoKTsKICAgICAgICBidWlsZGVyLmFwcGVuZCgiTWFwcGluZzogIikuYXBw\nZW5kKHRvU3RyaW5nKCkpLmFwcGVuZCgiXG4iKTsKICAgICAgICBpZiAocmFj\nayAhPSBudWxsKSB7CiAgICAgICAgICAgIGJ1aWxkZXIuYXBwZW5kKCJNYXA6\nXG4iKTsKICAgICAgICAgICAgU2V0PFN0cmluZz4gc3dpdGNoZXMgPSBuZXcg\nSGFzaFNldDxTdHJpbmc+KCk7CiAgICAgICAgICAgIGZvciAoTWFwLkVudHJ5\nPFN0cmluZywgU3RyaW5nPiBlbnRyeSA6IHJhY2suZW50cnlTZXQoKSkgewog\nICAgICAgICAgICAgICAgYnVpbGRlci5hcHBlbmQoIiAgIikuYXBwZW5kKGVu\ndHJ5LmdldEtleSgpKS5hcHBlbmQoIiAtPiAiKS5hcHBlbmQoZW50cnkuZ2V0\nVmFsdWUoKSkuYXBwZW5kKCJcbiIpOwogICAgICAgICAgICAgICAgc3dpdGNo\nZXMuYWRkKGVudHJ5LmdldFZhbHVlKCkpOwogICAgICAgICAgICB9CiAgICAg\nICAgICAgIGJ1aWxkZXIuYXBwZW5kKCJOb2RlczogIikuYXBwZW5kKHJhY2su\nc2l6ZSgpKS5hcHBlbmQoIlxuIik7CiAgICAgICAgICAgIGJ1aWxkZXIuYXBw\nZW5kKCJTd2l0Y2hlczogIikuYXBwZW5kKHN3aXRjaGVzLnNpemUoKSkuYXBw\nZW5kKCJcbiIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGJ1aWxk\nZXIuYXBwZW5kKCJObyB0b3BvbG9neSBpbmZvcm1hdGlvbiIpOwogICAgICAg\nIH0KICAgICAgICByZXR1cm4gYnVpbGRlci50b1N0cmluZygpOwogICAgfQoK\nICAgIHByb3RlY3RlZCBib29sZWFuIGlzU2luZ2xlU3dpdGNoQnlTY3JpcHRQ\nb2xpY3koKSB7CiAgICAgICAgcmV0dXJuIGNvbmYgIT0gbnVsbCAmJiBjb25m\nLmdldFN0cmluZyhDb21tb25Db25maWd1cmF0aW9uS2V5cy5ORVRfVE9QT0xP\nR1lfU0NSSVBUX0ZJTEVfTkFNRV9LRVkpID09IG51bGw7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBRdWVyeSBmb3IgYSB7QGxpbmsgRE5TVG9Td2l0Y2hNYXBw\naW5nfSBpbnN0YW5jZSBiZWluZyBvbiBhIHNpbmdsZQogICAgICogc3dpdGNo\nLgogICAgICogPHAvPgogICAgICogVGhpcyBwcmVkaWNhdGUgc2ltcGx5IGFz\nc3VtZXMgdGhhdCBhbGwgbWFwcGluZ3Mgbm90IGRlcml2ZWQgZnJvbQogICAg\nICogdGhpcyBjbGFzcyBhcmUgbXVsdGktc3dpdGNoLgogICAgICogQHBhcmFt\nIG1hcHBpbmcgdGhlIG1hcHBpbmcgdG8gcXVlcnkKICAgICAqIEByZXR1cm4g\ndHJ1ZSBpZiB0aGUgYmFzZSBjbGFzcyBzYXlzIGl0IGlzIHNpbmdsZSBzd2l0\nY2gsIG9yIHRoZSBtYXBwaW5nCiAgICAgKiBpcyBub3QgZGVyaXZlZCBmcm9t\nIHRoaXMgY2xhc3MuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgYm9vbGVh\nbiBpc01hcHBpbmdTaW5nbGVTd2l0Y2goRE5TVG9Td2l0Y2hNYXBwaW5nIG1h\ncHBpbmcpIHsKICAgICAgICByZXR1cm4gbWFwcGluZyAhPSBudWxsICYmIG1h\ncHBpbmcgaW5zdGFuY2VvZiBBYnN0cmFjdEROU1RvU3dpdGNoTWFwcGluZwog\nICAgICAgICAgICAgICAgJiYgKChBYnN0cmFjdEROU1RvU3dpdGNoTWFwcGlu\nZykgbWFwcGluZykuaXNTaW5nbGVTd2l0Y2goKTsKICAgIH0KCn0K\n","encoding":"base64"}

