{"sha":"96acbc2409fa39ee5c0a7da7f1ef734b27470c42","node_id":"MDQ6QmxvYjE1NzU5NTY6OTZhY2JjMjQwOWZhMzllZTVjMGE3ZGE3ZjFlZjczNGIyNzQ3MGM0Mg==","size":4809,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/96acbc2409fa39ee5c0a7da7f1ef734b27470c42","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KLy8g\nVGhpcyBjb2RlIGhhcyBiZWVuIGNvcGllZCBmcm9tIGhhZG9vcC1jb21tb24g\nMC4yMy4xCnBhY2thZ2Ugb3JnLmFwYWNoZS5ib29ra2VlcGVyLm5ldDsKCmlt\ncG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0OwppbXBvcnQgamF2YS51dGlsLkhh\nc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGphdmEudXRp\nbC5NYXA7CmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5Db25jdXJyZW50\nSGFzaE1hcDsKCi8qKgogKiBBIGNhY2hlZCBpbXBsZW1lbnRhdGlvbiBvZiBE\nTlNUb1N3aXRjaE1hcHBpbmcgdGhhdCB0YWtlcyBhbgogKiByYXcgRE5TVG9T\nd2l0Y2hNYXBwaW5nIGFuZCBzdG9yZXMgdGhlIHJlc29sdmVkIG5ldHdvcmsg\nbG9jYXRpb24gaW4KICogYSBjYWNoZS4gVGhlIGZvbGxvd2luZyBjYWxscyB0\nbyBhIHJlc29sdmVkIG5ldHdvcmsgbG9jYXRpb24KICogd2lsbCBnZXQgaXRz\nIGxvY2F0aW9uIGZyb20gdGhlIGNhY2hlLgogKgogKi8KcHVibGljIGNsYXNz\nIENhY2hlZEROU1RvU3dpdGNoTWFwcGluZyBleHRlbmRzIEFic3RyYWN0RE5T\nVG9Td2l0Y2hNYXBwaW5nIHsKICBwcml2YXRlIE1hcDxTdHJpbmcsIFN0cmlu\nZz4gY2FjaGUgPSBuZXcgQ29uY3VycmVudEhhc2hNYXA8U3RyaW5nLCBTdHJp\nbmc+KCk7CgogIC8qKgogICAqIFRoZSB1bmNhY2hlZCBtYXBwaW5nCiAgICov\nCiAgcHJvdGVjdGVkIGZpbmFsIEROU1RvU3dpdGNoTWFwcGluZyByYXdNYXBw\naW5nOwoKICAvKioKICAgKiBjYWNoZSBhIHJhdyBETlMgbWFwcGluZwogICAq\nIEBwYXJhbSByYXdNYXBwaW5nIHRoZSByYXcgbWFwcGluZyB0byBjYWNoZQog\nICAqLwogIHB1YmxpYyBDYWNoZWRETlNUb1N3aXRjaE1hcHBpbmcoRE5TVG9T\nd2l0Y2hNYXBwaW5nIHJhd01hcHBpbmcpIHsKICAgIHRoaXMucmF3TWFwcGlu\nZyA9IHJhd01hcHBpbmc7CiAgfQoKICAvKioKICAgKiBAcGFyYW0gbmFtZXMg\nYSBsaXN0IG9mIGhvc3RuYW1lcyB0byBwcm9iZSBmb3IgYmVpbmcgY2FjaGVk\nCiAgICogQHJldHVybiB0aGUgaG9zdHMgZnJvbSAnbmFtZXMnIHRoYXQgaGF2\nZSBub3QgYmVlbiBjYWNoZWQgcHJldmlvdXNseQogICAqLwogIHByaXZhdGUg\nTGlzdDxTdHJpbmc+IGdldFVuY2FjaGVkSG9zdHMoTGlzdDxTdHJpbmc+IG5h\nbWVzKSB7CiAgICAvLyBmaW5kIG91dCBhbGwgbmFtZXMgd2l0aG91dCBjYWNo\nZWQgcmVzb2x2ZWQgbG9jYXRpb24KICAgIExpc3Q8U3RyaW5nPiB1bkNhY2hl\nZEhvc3RzID0gbmV3IEFycmF5TGlzdDxTdHJpbmc+KG5hbWVzLnNpemUoKSk7\nCiAgICBmb3IgKFN0cmluZyBuYW1lIDogbmFtZXMpIHsKICAgICAgaWYgKGNh\nY2hlLmdldChuYW1lKSA9PSBudWxsKSB7CiAgICAgICAgdW5DYWNoZWRIb3N0\ncy5hZGQobmFtZSk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB1bkNhY2hl\nZEhvc3RzOwogIH0KCiAgLyoqCiAgICogQ2FjaGVzIHRoZSByZXNvbHZlZCBo\nb3N0OnJhY2sgbWFwcGluZ3MuIFRoZSB0d28gbGlzdAogICAqIHBhcmFtZXRl\ncnMgbXVzdCBiZSBvZiBlcXVhbCBzaXplLgogICAqCiAgICogQHBhcmFtIHVu\nY2FjaGVkSG9zdHMgYSBsaXN0IG9mIGhvc3RzIHRoYXQgd2VyZSB1bmNhY2hl\nZAogICAqIEBwYXJhbSByZXNvbHZlZEhvc3RzIGEgbGlzdCBvZiByZXNvbHZl\nZCBob3N0IGVudHJpZXMgd2hlcmUgdGhlIGVsZW1lbnQKICAgKiBhdCBpbmRl\neChpKSBpcyB0aGUgcmVzb2x2ZWQgdmFsdWUgZm9yIHRoZSBlbnRyeSBpbiB1\nbmNhY2hlZEhvc3RzW2ldCiAgICovCiAgcHJpdmF0ZSB2b2lkIGNhY2hlUmVz\nb2x2ZWRIb3N0cyhMaXN0PFN0cmluZz4gdW5jYWNoZWRIb3N0cywKICAgICAg\nTGlzdDxTdHJpbmc+IHJlc29sdmVkSG9zdHMpIHsKICAgIC8vIENhY2hlIHRo\nZSByZXN1bHQKICAgIGlmIChyZXNvbHZlZEhvc3RzICE9IG51bGwpIHsKICAg\nICAgZm9yIChpbnQgaT0wOyBpPHVuY2FjaGVkSG9zdHMuc2l6ZSgpOyBpKysp\nIHsKICAgICAgICBjYWNoZS5wdXQodW5jYWNoZWRIb3N0cy5nZXQoaSksIHJl\nc29sdmVkSG9zdHMuZ2V0KGkpKTsKICAgICAgfQogICAgfQogIH0KCiAgLyoq\nCiAgICogQHBhcmFtIG5hbWVzIGEgbGlzdCBvZiBob3N0bmFtZXMgdG8gbG9v\nayB1cCAoY2FuIGJlIGJlIGVtcHR5KQogICAqIEByZXR1cm4gdGhlIGNhY2hl\nZCByZXNvbHV0aW9uIG9mIHRoZSBsaXN0IG9mIGhvc3RuYW1lcy9hZGRyZXNz\nZXMuCiAgICogIG9yIG51bGwgaWYgYW55IG9mIHRoZSBuYW1lcyBhcmUgbm90\nIGN1cnJlbnRseSBpbiB0aGUgY2FjaGUKICAgKi8KICBwcml2YXRlIExpc3Q8\nU3RyaW5nPiBnZXRDYWNoZWRIb3N0cyhMaXN0PFN0cmluZz4gbmFtZXMpIHsK\nICAgIExpc3Q8U3RyaW5nPiByZXN1bHQgPSBuZXcgQXJyYXlMaXN0PFN0cmlu\nZz4obmFtZXMuc2l6ZSgpKTsKICAgIC8vIENvbnN0cnVjdCB0aGUgcmVzdWx0\nCiAgICBmb3IgKFN0cmluZyBuYW1lIDogbmFtZXMpIHsKICAgICAgU3RyaW5n\nIG5ldHdvcmtMb2NhdGlvbiA9IGNhY2hlLmdldChuYW1lKTsKICAgICAgaWYg\nKG5ldHdvcmtMb2NhdGlvbiAhPSBudWxsKSB7CiAgICAgICAgcmVzdWx0LmFk\nZChuZXR3b3JrTG9jYXRpb24pOwogICAgICB9IGVsc2UgewogICAgICAgIHJl\ndHVybiBudWxsOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gcmVzdWx0Owog\nIH0KCiAgQE92ZXJyaWRlCiAgcHVibGljIExpc3Q8U3RyaW5nPiByZXNvbHZl\nKExpc3Q8U3RyaW5nPiBuYW1lcykgewogICAgLy8gbm9ybWFsaXplIGFsbCBp\nbnB1dCBuYW1lcyB0byBiZSBpbiB0aGUgZm9ybSBvZiBJUCBhZGRyZXNzZXMK\nICAgIG5hbWVzID0gTmV0VXRpbHMubm9ybWFsaXplSG9zdE5hbWVzKG5hbWVz\nKTsKCiAgICBMaXN0IDxTdHJpbmc+IHJlc3VsdCA9IG5ldyBBcnJheUxpc3Q8\nU3RyaW5nPihuYW1lcy5zaXplKCkpOwogICAgaWYgKG5hbWVzLmlzRW1wdHko\nKSkgewogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICAgIExpc3Q8U3Ry\naW5nPiB1bmNhY2hlZEhvc3RzID0gZ2V0VW5jYWNoZWRIb3N0cyhuYW1lcyk7\nCgogICAgLy8gUmVzb2x2ZSB0aGUgdW5jYWNoZWQgaG9zdHMKICAgIExpc3Q8\nU3RyaW5nPiByZXNvbHZlZEhvc3RzID0gcmF3TWFwcGluZy5yZXNvbHZlKHVu\nY2FjaGVkSG9zdHMpOwogICAgLy9jYWNoZSB0aGVtCiAgICBjYWNoZVJlc29s\ndmVkSG9zdHModW5jYWNoZWRIb3N0cywgcmVzb2x2ZWRIb3N0cyk7CiAgICAv\nL25vdyBsb29rIHVwIHRoZSBlbnRpcmUgbGlzdCBpbiB0aGUgY2FjaGUKICAg\nIHJldHVybiBnZXRDYWNoZWRIb3N0cyhuYW1lcyk7CgogIH0KCiAgLyoqCiAg\nICogR2V0IHRoZSAoaG9zdCB4IHN3aXRjaCkgbWFwLgogICAqIEByZXR1cm4g\nYSBjb3B5IG9mIHRoZSBjYWNoZWQgbWFwIG9mIGhvc3RzIHRvIHJhY2sKICAg\nKi8KICBAT3ZlcnJpZGUKICBwdWJsaWMgTWFwPFN0cmluZywgU3RyaW5nPiBn\nZXRTd2l0Y2hNYXAoKSB7CiAgICBNYXA8U3RyaW5nLCBTdHJpbmcgPiBzd2l0\nY2hNYXAgPSBuZXcgSGFzaE1hcDxTdHJpbmcsIFN0cmluZz4oY2FjaGUpOwog\nICAgcmV0dXJuIHN3aXRjaE1hcDsKICB9CgoKICBAT3ZlcnJpZGUKICBwdWJs\naWMgU3RyaW5nIHRvU3RyaW5nKCkgewogICAgcmV0dXJuICJjYWNoZWQgc3dp\ndGNoIG1hcHBpbmcgcmVsYXlpbmcgdG8gIiArIHJhd01hcHBpbmc7CiAgfQoK\nICAvKioKICAgKiBEZWxlZ2F0ZSB0aGUgc3dpdGNoIHRvcG9sb2d5IHF1ZXJ5\nIHRvIHRoZSByYXcgbWFwcGluZywgdmlhCiAgICoge0BsaW5rIEFic3RyYWN0\nRE5TVG9Td2l0Y2hNYXBwaW5nI2lzTWFwcGluZ1NpbmdsZVN3aXRjaChETlNU\nb1N3aXRjaE1hcHBpbmcpfQogICAqIEByZXR1cm4gdHJ1ZSBpZmYgdGhlIHJh\ndyBtYXBwZXIgaXMgY29uc2lkZXJlZCBzaW5nbGUtc3dpdGNoLgogICAqLwog\nIEBPdmVycmlkZQogIHB1YmxpYyBib29sZWFuIGlzU2luZ2xlU3dpdGNoKCkg\newogICAgcmV0dXJuIGlzTWFwcGluZ1NpbmdsZVN3aXRjaChyYXdNYXBwaW5n\nKTsKICB9CgogIEBPdmVycmlkZQogIHB1YmxpYyB2b2lkIHJlbG9hZENhY2hl\nZE1hcHBpbmdzKCkgewogICAgY2FjaGUuY2xlYXIoKTsKICB9Cn0K\n","encoding":"base64"}

