{"sha":"a5dce939076ce7468b053c0b82baff50743a8ae0","node_id":"MDQ6QmxvYjE1NzU5NTY6YTVkY2U5MzkwNzZjZTc0NjhiMDUzYzBiODJiYWZmNTA3NDNhOGFlMA==","size":13352,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/a5dce939076ce7468b053c0b82baff50743a8ae0","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KLy8g\nVGhpcyBjb2RlIGhhcyBiZWVuIGNvcGllZCBmcm9tIGhhZG9vcC1jb21tb24g\nMi4wLjQtYWxwaGEKcGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIubmV0\nOwoKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXI7CmltcG9ydCBvcmcuc2xmNGou\nTG9nZ2VyRmFjdG9yeTsKCmltcG9ydCBqYXZhLm5ldC5JbmV0QWRkcmVzczsK\naW1wb3J0IGphdmEubmV0Lk5ldHdvcmtJbnRlcmZhY2U7CmltcG9ydCBqYXZh\nLm5ldC5Tb2NrZXRFeGNlcHRpb247CmltcG9ydCBqYXZhLm5ldC5Vbmtub3du\nSG9zdEV4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsK\naW1wb3J0IGphdmEudXRpbC5FbnVtZXJhdGlvbjsKaW1wb3J0IGphdmEudXRp\nbC5MaW5rZWRIYXNoU2V0OwppbXBvcnQgamF2YS51dGlsLlZlY3RvcjsKCmlt\ncG9ydCBqYXZheC5uYW1pbmcuTmFtaW5nRXhjZXB0aW9uOwppbXBvcnQgamF2\nYXgubmFtaW5nLmRpcmVjdG9yeS5BdHRyaWJ1dGVzOwppbXBvcnQgamF2YXgu\nbmFtaW5nLmRpcmVjdG9yeS5EaXJDb250ZXh0OwppbXBvcnQgamF2YXgubmFt\naW5nLmRpcmVjdG9yeS5Jbml0aWFsRGlyQ29udGV4dDsKCi8qKgogKiBBIGNs\nYXNzIHRoYXQgcHJvdmlkZXMgZGlyZWN0IGFuZCByZXZlcnNlIGxvb2t1cCBm\ndW5jdGlvbmFsaXRpZXMsIGFsbG93aW5nCiAqIHRoZSBxdWVyeWluZyBvZiBz\ncGVjaWZpYyBuZXR3b3JrIGludGVyZmFjZXMgb3IgbmFtZXNlcnZlcnMuCiAq\nLwpwdWJsaWMgY2xhc3MgRE5TIHsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5h\nbCBMb2dnZXIgTE9HID0gTG9nZ2VyRmFjdG9yeS5nZXRMb2dnZXIoRE5TLmNs\nYXNzKTsKCiAgICAvKioKICAgICAqIFRoZSBjYWNoZWQgaG9zdG5hbWUgLWlu\naXRpYWxseSBudWxsLgogICAgICovCgogICAgcHJpdmF0ZSBzdGF0aWMgZmlu\nYWwgU3RyaW5nIGNhY2hlZEhvc3RuYW1lID0gcmVzb2x2ZUxvY2FsSG9zdG5h\nbWUoKTsKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBjYWNoZWRI\nb3N0QWRkcmVzcyA9IHJlc29sdmVMb2NhbEhvc3RJUEFkZHJlc3MoKTsKICAg\nIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBMT0NBTEhPU1QgPSAibG9j\nYWxob3N0IjsKCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGhvc3RuYW1l\nIGFzc29jaWF0ZWQgd2l0aCB0aGUgc3BlY2lmaWVkIElQIGFkZHJlc3MgYnkg\ndGhlCiAgICAgKiBwcm92aWRlZCBuYW1lc2VydmVyLgogICAgICogPHAvPgog\nICAgICogTG9vcGJhY2sgYWRkcmVzc2VzCiAgICAgKgogICAgICogQHBhcmFt\nIGhvc3RJcCBUaGUgYWRkcmVzcyB0byByZXZlcnNlIGxvb2t1cAogICAgICog\nQHBhcmFtIG5zICAgICBUaGUgaG9zdCBuYW1lIG9mIGEgcmVhY2hhYmxlIERO\nUyBzZXJ2ZXIKICAgICAqIEByZXR1cm4gVGhlIGhvc3QgbmFtZSBhc3NvY2lh\ndGVkIHdpdGggdGhlIHByb3ZpZGVkIElQCiAgICAgKiBAdGhyb3dzIE5hbWlu\nZ0V4Y2VwdGlvbiBJZiBhIE5hbWluZ0V4Y2VwdGlvbiBpcyBlbmNvdW50ZXJl\nZAogICAgICovCiAgICBwdWJsaWMgc3RhdGljIFN0cmluZyByZXZlcnNlRG5z\nKEluZXRBZGRyZXNzIGhvc3RJcCwgU3RyaW5nIG5zKQogICAgICAgICAgICB0\naHJvd3MgTmFtaW5nRXhjZXB0aW9uIHsKICAgICAgICAvLwogICAgICAgIC8v\nIEJ1aWxkcyB0aGUgcmV2ZXJzZSBJUCBsb29rdXAgZm9ybQogICAgICAgIC8v\nIFRoaXMgaXMgZm9ybWVkIGJ5IHJldmVyc2luZyB0aGUgSVAgbnVtYmVycyBh\nbmQgYXBwZW5kaW5nIGluLWFkZHIuYXJwYQogICAgICAgIC8vCiAgICAgICAg\nU3RyaW5nW10gcGFydHMgPSBob3N0SXAuZ2V0SG9zdEFkZHJlc3MoKS5zcGxp\ndCgiXFwuIik7CiAgICAgICAgU3RyaW5nIHJldmVyc2VJUCA9IHBhcnRzWzNd\nICsgIi4iICsgcGFydHNbMl0gKyAiLiIgKyBwYXJ0c1sxXSArICIuIgogICAg\nICAgICAgICAgICAgKyBwYXJ0c1swXSArICIuaW4tYWRkci5hcnBhIjsKCiAg\nICAgICAgRGlyQ29udGV4dCBpY3R4ID0gbmV3IEluaXRpYWxEaXJDb250ZXh0\nKCk7CiAgICAgICAgQXR0cmlidXRlcyBhdHRyaWJ1dGU7CiAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgYXR0cmlidXRlID0gaWN0eC5nZXRBdHRyaWJ1dGVz\nKCJkbnM6Ly8iICAgICAgICAgICAgICAgLy8gVXNlICJkbnM6Ly8vIiBpZiB0\naGUgZGVmYXVsdAogICAgICAgICAgICAgICAgICAgICsgKChucyA9PSBudWxs\nKSA/ICIiIDogbnMpICsKICAgICAgICAgICAgICAgICAgICAvLyBuYW1lc2Vy\ndmVyIGlzIHRvIGJlIHVzZWQKICAgICAgICAgICAgICAgICAgICAiLyIgKyBy\nZXZlcnNlSVAsIG5ldyBTdHJpbmdbXXsiUFRSIn0pOwogICAgICAgIH0gZmlu\nYWxseSB7CiAgICAgICAgICAgIGljdHguY2xvc2UoKTsKICAgICAgICB9Cgog\nICAgICAgIHJldHVybiBhdHRyaWJ1dGUuZ2V0KCJQVFIiKS5nZXQoKS50b1N0\ncmluZygpOwogICAgfQoKICAgIC8qKgogICAgICogQHJldHVybiBOZXR3b3Jr\nSW50ZXJmYWNlIGZvciB0aGUgZ2l2ZW4gc3ViaW50ZXJmYWNlIG5hbWUgKGVn\nIGV0aDA6MCkKICAgICAqIG9yIG51bGwgaWYgbm8gaW50ZXJmYWNlIHdpdGgg\ndGhlIGdpdmVuIG5hbWUgY2FuIGJlIGZvdW5kCiAgICAgKi8KICAgIHByaXZh\ndGUgc3RhdGljIE5ldHdvcmtJbnRlcmZhY2UgZ2V0U3ViaW50ZXJmYWNlKFN0\ncmluZyBzdHJJbnRlcmZhY2UpCiAgICAgICAgICAgIHRocm93cyBTb2NrZXRF\neGNlcHRpb24gewogICAgICAgIEVudW1lcmF0aW9uPE5ldHdvcmtJbnRlcmZh\nY2U+IG5pZnMgPQogICAgICAgICAgICAgICAgTmV0d29ya0ludGVyZmFjZS5n\nZXROZXR3b3JrSW50ZXJmYWNlcygpOwoKICAgICAgICB3aGlsZSAobmlmcy5o\nYXNNb3JlRWxlbWVudHMoKSkgewogICAgICAgICAgICBFbnVtZXJhdGlvbjxO\nZXR3b3JrSW50ZXJmYWNlPiBzdWJOaWZzID0KICAgICAgICAgICAgICAgICAg\nICBuaWZzLm5leHRFbGVtZW50KCkuZ2V0U3ViSW50ZXJmYWNlcygpOwoKICAg\nICAgICAgICAgd2hpbGUgKHN1Yk5pZnMuaGFzTW9yZUVsZW1lbnRzKCkpIHsK\nICAgICAgICAgICAgICAgIE5ldHdvcmtJbnRlcmZhY2UgbmlmID0gc3ViTmlm\ncy5uZXh0RWxlbWVudCgpOwogICAgICAgICAgICAgICAgaWYgKG5pZi5nZXRO\nYW1lKCkuZXF1YWxzKHN0ckludGVyZmFjZSkpIHsKICAgICAgICAgICAgICAg\nICAgICByZXR1cm4gbmlmOwogICAgICAgICAgICAgICAgfQogICAgICAgICAg\nICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAg\nIC8qKgogICAgICogQHBhcmFtIG5pZiBuZXR3b3JrIGludGVyZmFjZSB0byBn\nZXQgYWRkcmVzc2VzIGZvcgogICAgICogQHJldHVybiBzZXQgY29udGFpbmlu\nZyBhZGRyZXNzZXMgZm9yIGVhY2ggc3ViaW50ZXJmYWNlIG9mIG5pZiwKICAg\nICAqIHNlZSBiZWxvdyBmb3IgdGhlIHJhdGlvbmFsZSBmb3IgdXNpbmcgYW4g\nb3JkZXJlZCBzZXQKICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgTGlua2Vk\nSGFzaFNldDxJbmV0QWRkcmVzcz4gZ2V0U3ViaW50ZXJmYWNlSW5ldEFkZHJz\nKAogICAgICAgICAgICBOZXR3b3JrSW50ZXJmYWNlIG5pZikgewogICAgICAg\nIExpbmtlZEhhc2hTZXQ8SW5ldEFkZHJlc3M+IGFkZHJzID0gbmV3IExpbmtl\nZEhhc2hTZXQ8SW5ldEFkZHJlc3M+KCk7CiAgICAgICAgRW51bWVyYXRpb248\nTmV0d29ya0ludGVyZmFjZT4gc3ViTmlmcyA9IG5pZi5nZXRTdWJJbnRlcmZh\nY2VzKCk7CiAgICAgICAgd2hpbGUgKHN1Yk5pZnMuaGFzTW9yZUVsZW1lbnRz\nKCkpIHsKICAgICAgICAgICAgTmV0d29ya0ludGVyZmFjZSBzdWJOaWYgPSBz\ndWJOaWZzLm5leHRFbGVtZW50KCk7CiAgICAgICAgICAgIGFkZHJzLmFkZEFs\nbChDb2xsZWN0aW9ucy5saXN0KHN1Yk5pZi5nZXRJbmV0QWRkcmVzc2VzKCkp\nKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGFkZHJzOwogICAgfQoKICAg\nIC8qKgogICAgICogTGlrZSB7QGxpbmsgRE5TI2dldElQcyhTdHJpbmcsIGJv\nb2xlYW4pLCBidXQgcmV0dXJucyBhbGwKICAgICAqIElQcyBhc3NvY2lhdGVk\nIHdpdGggdGhlIGdpdmVuIGludGVyZmFjZSBhbmQgaXRzIHN1YmludGVyZmFj\nZXMuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgU3RyaW5nW10gZ2V0SVBz\nKFN0cmluZyBzdHJJbnRlcmZhY2UpCiAgICAgICAgICAgIHRocm93cyBVbmtu\nb3duSG9zdEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGdldElQcyhzdHJJ\nbnRlcmZhY2UsIHRydWUpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJu\ncyBhbGwgdGhlIElQcyBhc3NvY2lhdGVkIHdpdGggdGhlIHByb3ZpZGVkIGlu\ndGVyZmFjZSwgaWYgYW55LCBpbgogICAgICogdGV4dHVhbCBmb3JtLgogICAg\nICoKICAgICAqIEBwYXJhbSBzdHJJbnRlcmZhY2UgICAgICAgIFRoZSBuYW1l\nIG9mIHRoZSBuZXR3b3JrIGludGVyZmFjZSBvciBzdWItaW50ZXJmYWNlIHRv\nIHF1ZXJ5CiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZWcg\nZXRoMCBvciBldGgwOjApIG9yIHRoZSBzdHJpbmcgImRlZmF1bHQiCiAgICAg\nKiBAcGFyYW0gcmV0dXJuU3ViaW50ZXJmYWNlcyBXaGV0aGVyIHRvIHJldHVy\nbiBJUHMgYXNzb2NpYXRlZCB3aXRoIHN1YmludGVyZmFjZXMgb2YKICAgICAq\nICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSBnaXZlbiBpbnRlcmZh\nY2UKICAgICAqIEByZXR1cm4gQSBzdHJpbmcgdmVjdG9yIG9mIGFsbCB0aGUg\nSVBzIGFzc29jaWF0ZWQgd2l0aCB0aGUgcHJvdmlkZWQKICAgICAqIGludGVy\nZmFjZS4gVGhlIGxvY2FsIGhvc3QgSVAgaXMgcmV0dXJuZWQgaWYgdGhlIGlu\ndGVyZmFjZQogICAgICogbmFtZSAiZGVmYXVsdCIgaXMgc3BlY2lmaWVkIG9y\nIHRoZXJlIGlzIGFuIEkvTyBlcnJvciBsb29raW5nCiAgICAgKiBmb3IgdGhl\nIGdpdmVuIGludGVyZmFjZS4KICAgICAqIEB0aHJvd3MgVW5rbm93bkhvc3RF\neGNlcHRpb24gSWYgdGhlIGdpdmVuIGludGVyZmFjZSBpcyBpbnZhbGlkCiAg\nICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgU3RyaW5nW10gZ2V0SVBzKFN0cmlu\nZyBzdHJJbnRlcmZhY2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICBib29sZWFuIHJldHVyblN1YmludGVyZmFjZXMpIHRocm93cyBVbmtu\nb3duSG9zdEV4Y2VwdGlvbiB7CiAgICAgICAgaWYgKCJkZWZhdWx0Ii5lcXVh\nbHMoc3RySW50ZXJmYWNlKSkgewogICAgICAgICAgICByZXR1cm4gbmV3IFN0\ncmluZ1tde2NhY2hlZEhvc3RBZGRyZXNzfTsKICAgICAgICB9CiAgICAgICAg\nTmV0d29ya0ludGVyZmFjZSBuZXRJZjsKICAgICAgICB0cnkgewogICAgICAg\nICAgICBuZXRJZiA9IE5ldHdvcmtJbnRlcmZhY2UuZ2V0QnlOYW1lKHN0cklu\ndGVyZmFjZSk7CiAgICAgICAgICAgIGlmIChuZXRJZiA9PSBudWxsKSB7CiAg\nICAgICAgICAgICAgICBuZXRJZiA9IGdldFN1YmludGVyZmFjZShzdHJJbnRl\ncmZhY2UpOwogICAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoU29ja2V0\nRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgTE9HLndhcm4oIkkvTyBlcnJv\nciBmaW5kaW5nIGludGVyZmFjZSAiICsgc3RySW50ZXJmYWNlICsKICAgICAg\nICAgICAgICAgICAgICAiOiAiICsgZS5nZXRNZXNzYWdlKCkpOwogICAgICAg\nICAgICByZXR1cm4gbmV3IFN0cmluZ1tde2NhY2hlZEhvc3RBZGRyZXNzfTsK\nICAgICAgICB9CiAgICAgICAgaWYgKG5ldElmID09IG51bGwpIHsKICAgICAg\nICAgICAgdGhyb3cgbmV3IFVua25vd25Ib3N0RXhjZXB0aW9uKCJObyBzdWNo\nIGludGVyZmFjZSAiICsgc3RySW50ZXJmYWNlKTsKICAgICAgICB9CgogICAg\nICAgIC8vIE5COiBVc2luZyBhIExpbmtlZEhhc2hTZXQgdG8gcHJlc2VydmUg\ndGhlIG9yZGVyIGZvciBjYWxsZXJzCiAgICAgICAgLy8gdGhhdCBkZXBlbmQg\nb24gYSBwYXJ0aWN1bGFyIGVsZW1lbnQgYmVpbmcgMXN0IGluIHRoZSBhcnJh\neS4KICAgICAgICAvLyBGb3IgZXhhbXBsZSwgZ2V0RGVmYXVsdElQIGFsd2F5\ncyByZXR1cm5zIHRoZSBmaXJzdCBlbGVtZW50LgogICAgICAgIExpbmtlZEhh\nc2hTZXQ8SW5ldEFkZHJlc3M+IGFsbEFkZHJzID0gbmV3IExpbmtlZEhhc2hT\nZXQ8SW5ldEFkZHJlc3M+KCk7CiAgICAgICAgYWxsQWRkcnMuYWRkQWxsKENv\nbGxlY3Rpb25zLmxpc3QobmV0SWYuZ2V0SW5ldEFkZHJlc3NlcygpKSk7CiAg\nICAgICAgaWYgKCFyZXR1cm5TdWJpbnRlcmZhY2VzKSB7CiAgICAgICAgICAg\nIGFsbEFkZHJzLnJlbW92ZUFsbChnZXRTdWJpbnRlcmZhY2VJbmV0QWRkcnMo\nbmV0SWYpKTsKICAgICAgICB9CgogICAgICAgIFN0cmluZyBpcHNbXSA9IG5l\ndyBTdHJpbmdbYWxsQWRkcnMuc2l6ZSgpXTsKICAgICAgICBpbnQgaSA9IDA7\nCiAgICAgICAgZm9yIChJbmV0QWRkcmVzcyBhZGRyIDogYWxsQWRkcnMpIHsK\nICAgICAgICAgICAgaXBzW2krK10gPSBhZGRyLmdldEhvc3RBZGRyZXNzKCk7\nCiAgICAgICAgfQogICAgICAgIHJldHVybiBpcHM7CiAgICB9CgoKICAgIC8q\nKgogICAgICogUmV0dXJucyB0aGUgZmlyc3QgYXZhaWxhYmxlIElQIGFkZHJl\nc3MgYXNzb2NpYXRlZCB3aXRoIHRoZSBwcm92aWRlZAogICAgICogbmV0d29y\nayBpbnRlcmZhY2Ugb3IgdGhlIGxvY2FsIGhvc3QgSVAgaWYgImRlZmF1bHQi\nIGlzIGdpdmVuLgogICAgICoKICAgICAqIEBwYXJhbSBzdHJJbnRlcmZhY2Ug\nVGhlIG5hbWUgb2YgdGhlIG5ldHdvcmsgaW50ZXJmYWNlIG9yIHN1YmludGVy\nZmFjZSB0byBxdWVyeQogICAgICogICAgICAgICAgICAgICAgICAgICAoZS5n\nLiBldGgwIG9yIGV0aDA6MCkgb3IgdGhlIHN0cmluZyAiZGVmYXVsdCIKICAg\nICAqIEByZXR1cm4gVGhlIElQIGFkZHJlc3MgaW4gdGV4dCBmb3JtLCB0aGUg\nbG9jYWwgaG9zdCBJUCBpcyByZXR1cm5lZAogICAgICogaWYgdGhlIGludGVy\nZmFjZSBuYW1lICJkZWZhdWx0IiBpcyBzcGVjaWZpZWQKICAgICAqIEB0aHJv\nd3MgVW5rbm93bkhvc3RFeGNlcHRpb24gSWYgdGhlIGdpdmVuIGludGVyZmFj\nZSBpcyBpbnZhbGlkCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgU3RyaW5n\nIGdldERlZmF1bHRJUChTdHJpbmcgc3RySW50ZXJmYWNlKQogICAgICAgICAg\nICB0aHJvd3MgVW5rbm93bkhvc3RFeGNlcHRpb24gewogICAgICAgIFN0cmlu\nZ1tdIGlwcyA9IGdldElQcyhzdHJJbnRlcmZhY2UpOwogICAgICAgIHJldHVy\nbiBpcHNbMF07CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFsbCB0\naGUgaG9zdCBuYW1lcyBhc3NvY2lhdGVkIGJ5IHRoZSBwcm92aWRlZCBuYW1l\nc2VydmVyIHdpdGggdGhlCiAgICAgKiBhZGRyZXNzIGJvdW5kIHRvIHRoZSBz\ncGVjaWZpZWQgbmV0d29yayBpbnRlcmZhY2UKICAgICAqCiAgICAgKiBAcGFy\nYW0gc3RySW50ZXJmYWNlIFRoZSBuYW1lIG9mIHRoZSBuZXR3b3JrIGludGVy\nZmFjZSBvciBzdWJpbnRlcmZhY2UgdG8gcXVlcnkKICAgICAqICAgICAgICAg\nICAgICAgICAgICAgKGUuZy4gZXRoMCBvciBldGgwOjApCiAgICAgKiBAcGFy\nYW0gbmFtZXNlcnZlciAgIFRoZSBETlMgaG9zdCBuYW1lCiAgICAgKiBAcmV0\ndXJuIEEgc3RyaW5nIHZlY3RvciBvZiBhbGwgaG9zdCBuYW1lcyBhc3NvY2lh\ndGVkIHdpdGggdGhlIElQcyB0aWVkIHRvCiAgICAgKiB0aGUgc3BlY2lmaWVk\nIGludGVyZmFjZQogICAgICogQHRocm93cyBVbmtub3duSG9zdEV4Y2VwdGlv\nbiBpZiB0aGUgZ2l2ZW4gaW50ZXJmYWNlIGlzIGludmFsaWQKICAgICAqLwog\nICAgcHVibGljIHN0YXRpYyBTdHJpbmdbXSBnZXRIb3N0cyhTdHJpbmcgc3Ry\nSW50ZXJmYWNlLCBTdHJpbmcgbmFtZXNlcnZlcikKICAgICAgICAgICAgdGhy\nb3dzIFVua25vd25Ib3N0RXhjZXB0aW9uIHsKICAgICAgICBTdHJpbmdbXSBp\ncHMgPSBnZXRJUHMoc3RySW50ZXJmYWNlKTsKICAgICAgICBWZWN0b3I8U3Ry\naW5nPiBob3N0cyA9IG5ldyBWZWN0b3I8U3RyaW5nPigpOwogICAgICAgIGZv\nciAoaW50IGN0ciA9IDA7IGN0ciA8IGlwcy5sZW5ndGg7IGN0cisrKSB7CiAg\nICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBob3N0cy5hZGQocmV2\nZXJzZURucyhJbmV0QWRkcmVzcy5nZXRCeU5hbWUoaXBzW2N0cl0pLAogICAg\nICAgICAgICAgICAgICAgICAgICBuYW1lc2VydmVyKSk7CiAgICAgICAgICAg\nIH0gY2F0Y2ggKFVua25vd25Ib3N0RXhjZXB0aW9uIGlnbm9yZWQpIHsKICAg\nICAgICAgICAgfSBjYXRjaCAoTmFtaW5nRXhjZXB0aW9uIGlnbm9yZWQpIHsK\nICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoaG9zdHMuaXNF\nbXB0eSgpKSB7CiAgICAgICAgICAgIExPRy53YXJuKCJVbmFibGUgdG8gZGV0\nZXJtaW5lIGhvc3RuYW1lIGZvciBpbnRlcmZhY2UgIiArIHN0ckludGVyZmFj\nZSk7CiAgICAgICAgICAgIHJldHVybiBuZXcgU3RyaW5nW117Y2FjaGVkSG9z\ndG5hbWV9OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBo\nb3N0cy50b0FycmF5KG5ldyBTdHJpbmdbaG9zdHMuc2l6ZSgpXSk7CiAgICAg\nICAgfQogICAgfQoKCiAgICAvKioKICAgICAqIERldGVybWluZSB0aGUgbG9j\nYWwgaG9zdG5hbWU7IHJldHJpZXZpbmcgaXQgZnJvbSBjYWNoZSBpZiBpdCBp\ncyBrbm93bgogICAgICogSWYgd2UgY2Fubm90IGRldGVybWluZSBvdXIgaG9z\ndCBuYW1lLCByZXR1cm4gImxvY2FsaG9zdCIKICAgICAqCiAgICAgKiBAcmV0\ndXJuIHRoZSBsb2NhbCBob3N0bmFtZSBvciAibG9jYWxob3N0IgogICAgICov\nCiAgICBwcml2YXRlIHN0YXRpYyBTdHJpbmcgcmVzb2x2ZUxvY2FsSG9zdG5h\nbWUoKSB7CiAgICAgICAgU3RyaW5nIGxvY2FsaG9zdDsKICAgICAgICB0cnkg\newogICAgICAgICAgICBsb2NhbGhvc3QgPSBJbmV0QWRkcmVzcy5nZXRMb2Nh\nbEhvc3QoKS5nZXRDYW5vbmljYWxIb3N0TmFtZSgpOwogICAgICAgIH0gY2F0\nY2ggKFVua25vd25Ib3N0RXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgTE9H\nLndhcm4oIlVuYWJsZSB0byBkZXRlcm1pbmUgbG9jYWwgaG9zdG5hbWUgIgog\nICAgICAgICAgICAgICAgICAgICsgIi1mYWxsaW5nIGJhY2sgdG8gXCIiICsg\nTE9DQUxIT1NUICsgIlwiIiwgZSk7CiAgICAgICAgICAgIGxvY2FsaG9zdCA9\nIExPQ0FMSE9TVDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGxvY2FsaG9z\ndDsKICAgIH0KCgogICAgLyoqCiAgICAgKiBHZXQgdGhlIElQQWRkcmVzcyBv\nZiB0aGUgbG9jYWwgaG9zdCBhcyBhIHN0cmluZy4KICAgICAqIFRoaXMgd2ls\nbCBiZSBhIGxvb3AgYmFjayB2YWx1ZSBpZiB0aGUgbG9jYWwgaG9zdCBhZGRy\nZXNzIGNhbm5vdCBiZQogICAgICogZGV0ZXJtaW5lZC4KICAgICAqIElmIHRo\nZSBsb29wYmFjayBhZGRyZXNzIG9mICJsb2NhbGhvc3QiIGRvZXMgbm90IHJl\nc29sdmUsIHRoZW4gdGhlIHN5c3RlbSdzCiAgICAgKiBuZXR3b3JrIGlzIGlu\nIHN1Y2ggYSBzdGF0ZSB0aGF0IG5vdGhpbmcgaXMgZ29pbmcgdG8gd29yay4g\nQSBtZXNzYWdlIGlzCiAgICAgKiBsb2dnZWQgYXQgdGhlIGVycm9yIGxldmVs\nIGFuZCBhIG51bGwgcG9pbnRlciByZXR1cm5lZCwgYSBwb2ludGVyCiAgICAg\nKiB3aGljaCB3aWxsIHRyaWdnZXIgZmFpbHVyZXMgbGF0ZXIgb24gdGhlIGFw\ncGxpY2F0aW9uCiAgICAgKgogICAgICogQHJldHVybiB0aGUgSVBBZGRyZXNz\nIG9mIHRoZSBsb2NhbCBob3N0IG9yIG51bGwgZm9yIGEgc2VyaW91cyBwcm9i\nbGVtLgogICAgICovCiAgICBwcml2YXRlIHN0YXRpYyBTdHJpbmcgcmVzb2x2\nZUxvY2FsSG9zdElQQWRkcmVzcygpIHsKICAgICAgICBTdHJpbmcgYWRkcmVz\nczsKICAgICAgICB0cnkgewogICAgICAgICAgICBhZGRyZXNzID0gSW5ldEFk\nZHJlc3MuZ2V0TG9jYWxIb3N0KCkuZ2V0SG9zdEFkZHJlc3MoKTsKICAgICAg\nICB9IGNhdGNoIChVbmtub3duSG9zdEV4Y2VwdGlvbiBlKSB7CiAgICAgICAg\nICAgIExPRy53YXJuKCJVbmFibGUgdG8gZGV0ZXJtaW5lIGFkZHJlc3Mgb2Yg\ndGhlIGhvc3QiCiAgICAgICAgICAgICAgICAgICAgKyAiLWZhbGxpbmcgYmFj\nayB0byBcIiIgKyBMT0NBTEhPU1QgKyAiXCIgYWRkcmVzcyIsIGUpOwogICAg\nICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgYWRkcmVzcyA9IEluZXRB\nZGRyZXNzLmdldEJ5TmFtZShMT0NBTEhPU1QpLmdldEhvc3RBZGRyZXNzKCk7\nCiAgICAgICAgICAgIH0gY2F0Y2ggKFVua25vd25Ib3N0RXhjZXB0aW9uIG5v\nTG9jYWxIb3N0QWRkcmVzc0V4Y2VwdGlvbikgewogICAgICAgICAgICAgICAg\nLy9hdCB0aGlzIHBvaW50LCBkZWVwIHRyb3VibGUKICAgICAgICAgICAgICAg\nIExPRy5lcnJvcigiVW5hYmxlIHRvIGRldGVybWluZSBsb2NhbCBsb29wYmFj\nayBhZGRyZXNzICIKICAgICAgICAgICAgICAgICAgICAgICAgKyAib2YgXCIi\nICsgTE9DQUxIT1NUICsgIlwiICIgKwogICAgICAgICAgICAgICAgICAgICAg\nICAiLXRoaXMgc3lzdGVtJ3MgbmV0d29yayBjb25maWd1cmF0aW9uIGlzIHVu\nc3VwcG9ydGVkIiwgZSk7CiAgICAgICAgICAgICAgICBhZGRyZXNzID0gbnVs\nbDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gYWRk\ncmVzczsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYWxsIHRoZSBo\nb3N0IG5hbWVzIGFzc29jaWF0ZWQgYnkgdGhlIGRlZmF1bHQgbmFtZXNlcnZl\nciB3aXRoIHRoZQogICAgICogYWRkcmVzcyBib3VuZCB0byB0aGUgc3BlY2lm\naWVkIG5ldHdvcmsgaW50ZXJmYWNlCiAgICAgKgogICAgICogQHBhcmFtIHN0\nckludGVyZmFjZSBUaGUgbmFtZSBvZiB0aGUgbmV0d29yayBpbnRlcmZhY2Ug\ndG8gcXVlcnkgKGUuZy4gZXRoMCkKICAgICAqIEByZXR1cm4gVGhlIGxpc3Qg\nb2YgaG9zdCBuYW1lcyBhc3NvY2lhdGVkIHdpdGggSVBzIGJvdW5kIHRvIHRo\nZSBuZXR3b3JrCiAgICAgKiBpbnRlcmZhY2UKICAgICAqIEB0aHJvd3MgVW5r\nbm93bkhvc3RFeGNlcHRpb24gSWYgb25lIGlzIGVuY291bnRlcmVkIHdoaWxl\nIHF1ZXJ5aW5nIHRoZSBkZWZhdWx0IGludGVyZmFjZQogICAgICovCiAgICBw\ndWJsaWMgc3RhdGljIFN0cmluZ1tdIGdldEhvc3RzKFN0cmluZyBzdHJJbnRl\ncmZhY2UpCiAgICAgICAgICAgIHRocm93cyBVbmtub3duSG9zdEV4Y2VwdGlv\nbiB7CiAgICAgICAgcmV0dXJuIGdldEhvc3RzKHN0ckludGVyZmFjZSwgbnVs\nbCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBkZWZhdWx0\nIChmaXJzdCkgaG9zdCBuYW1lIGFzc29jaWF0ZWQgYnkgdGhlIHByb3ZpZGVk\nCiAgICAgKiBuYW1lc2VydmVyIHdpdGggdGhlIGFkZHJlc3MgYm91bmQgdG8g\ndGhlIHNwZWNpZmllZCBuZXR3b3JrIGludGVyZmFjZQogICAgICoKICAgICAq\nIEBwYXJhbSBzdHJJbnRlcmZhY2UgVGhlIG5hbWUgb2YgdGhlIG5ldHdvcmsg\naW50ZXJmYWNlIHRvIHF1ZXJ5IChlLmcuIGV0aDApCiAgICAgKiBAcGFyYW0g\nbmFtZXNlcnZlciAgIFRoZSBETlMgaG9zdCBuYW1lCiAgICAgKiBAcmV0dXJu\nIFRoZSBkZWZhdWx0IGhvc3QgbmFtZXMgYXNzb2NpYXRlZCB3aXRoIElQcyBi\nb3VuZCB0byB0aGUgbmV0d29yawogICAgICogaW50ZXJmYWNlCiAgICAgKiBA\ndGhyb3dzIFVua25vd25Ib3N0RXhjZXB0aW9uIElmIG9uZSBpcyBlbmNvdW50\nZXJlZCB3aGlsZSBxdWVyeWluZyB0aGUgZGVmYXVsdCBpbnRlcmZhY2UKICAg\nICAqLwogICAgcHVibGljIHN0YXRpYyBTdHJpbmcgZ2V0RGVmYXVsdEhvc3Qo\nU3RyaW5nIHN0ckludGVyZmFjZSwgU3RyaW5nIG5hbWVzZXJ2ZXIpCiAgICAg\nICAgICAgIHRocm93cyBVbmtub3duSG9zdEV4Y2VwdGlvbiB7CiAgICAgICAg\naWYgKCJkZWZhdWx0Ii5lcXVhbHMoc3RySW50ZXJmYWNlKSkgewogICAgICAg\nICAgICByZXR1cm4gY2FjaGVkSG9zdG5hbWU7CiAgICAgICAgfQoKICAgICAg\nICBpZiAoImRlZmF1bHQiLmVxdWFscyhuYW1lc2VydmVyKSkgewogICAgICAg\nICAgICByZXR1cm4gZ2V0RGVmYXVsdEhvc3Qoc3RySW50ZXJmYWNlKTsKICAg\nICAgICB9CgogICAgICAgIFN0cmluZ1tdIGhvc3RzID0gZ2V0SG9zdHMoc3Ry\nSW50ZXJmYWNlLCBuYW1lc2VydmVyKTsKICAgICAgICByZXR1cm4gaG9zdHNb\nMF07CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBkZWZhdWx0\nIChmaXJzdCkgaG9zdCBuYW1lIGFzc29jaWF0ZWQgYnkgdGhlIGRlZmF1bHQK\nICAgICAqIG5hbWVzZXJ2ZXIgd2l0aCB0aGUgYWRkcmVzcyBib3VuZCB0byB0\naGUgc3BlY2lmaWVkIG5ldHdvcmsgaW50ZXJmYWNlCiAgICAgKgogICAgICog\nQHBhcmFtIHN0ckludGVyZmFjZSBUaGUgbmFtZSBvZiB0aGUgbmV0d29yayBp\nbnRlcmZhY2UgdG8gcXVlcnkgKGUuZy4gZXRoMCkuCiAgICAgKiAgICAgICAg\nICAgICAgICAgICAgIE11c3Qgbm90IGJlIG51bGwuCiAgICAgKiBAcmV0dXJu\nIFRoZSBkZWZhdWx0IGhvc3QgbmFtZSBhc3NvY2lhdGVkIHdpdGggSVBzIGJv\ndW5kIHRvIHRoZSBuZXR3b3JrCiAgICAgKiBpbnRlcmZhY2UKICAgICAqIEB0\naHJvd3MgVW5rbm93bkhvc3RFeGNlcHRpb24gSWYgb25lIGlzIGVuY291bnRl\ncmVkIHdoaWxlIHF1ZXJ5aW5nIHRoZSBkZWZhdWx0IGludGVyZmFjZQogICAg\nICovCiAgICBwdWJsaWMgc3RhdGljIFN0cmluZyBnZXREZWZhdWx0SG9zdChT\ndHJpbmcgc3RySW50ZXJmYWNlKQogICAgICAgICAgICB0aHJvd3MgVW5rbm93\nbkhvc3RFeGNlcHRpb24gewogICAgICAgIHJldHVybiBnZXREZWZhdWx0SG9z\ndChzdHJJbnRlcmZhY2UsIG51bGwpOwogICAgfQoKfQo=\n","encoding":"base64"}

