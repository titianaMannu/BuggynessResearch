{"sha":"f1a4b85cec3edc6563de27b1063abc901a521f41","node_id":"MDQ6QmxvYjE1NzU5NTY6ZjFhNGI4NWNlYzNlZGM2NTYzZGUyN2IxMDYzYWJjOTAxYTUyMWY0MQ==","size":5942,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/f1a4b85cec3edc6563de27b1063abc901a521f41","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KLy8g\nVGhpcyBjb2RlIGhhcyBiZWVuIGNvcGllZCBmcm9tIGhhZG9vcC1jb21tb24g\nMC4yMy4xCnBhY2thZ2Ugb3JnLmFwYWNoZS5ib29ra2VlcGVyLm5ldDsKCi8q\nKiBBIGJhc2UgY2xhc3MgdGhhdCBpbXBsZW1lbnRzIGludGVyZmFjZSBOb2Rl\nCiAqCiAqLwpwdWJsaWMgY2xhc3MgTm9kZUJhc2UgaW1wbGVtZW50cyBOb2Rl\nIHsKICAgIC8qKiBQYXRoIHNlcGFyYXRvciB7QHZhbHVlfSAqLwogICAgcHVi\nbGljIGZpbmFsIHN0YXRpYyBjaGFyIFBBVEhfU0VQQVJBVE9SID0gJy8nOwog\nICAgLyoqIFBhdGggc2VwYXJhdG9yIGFzIGEgc3RyaW5nIHtAdmFsdWV9ICov\nCiAgICBwdWJsaWMgZmluYWwgc3RhdGljIFN0cmluZyBQQVRIX1NFUEFSQVRP\nUl9TVFIgPSAiLyI7CiAgICAvKiogc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9m\nIHJvb3Qge0B2YWx1ZX0gKi8KICAgIHB1YmxpYyBmaW5hbCBzdGF0aWMgU3Ry\naW5nIFJPT1QgPSAiIjsKCiAgICBwcm90ZWN0ZWQgU3RyaW5nIG5hbWU7IC8v\naG9zdDpwb3J0IwogICAgcHJvdGVjdGVkIFN0cmluZyBsb2NhdGlvbjsgLy9z\ndHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBub2RlJ3MgbG9jYXRpb24K\nICAgIHByb3RlY3RlZCBpbnQgbGV2ZWw7IC8vd2hpY2ggbGV2ZWwgb2YgdGhl\nIHRyZWUgdGhlIG5vZGUgcmVzaWRlcwogICAgcHJvdGVjdGVkIE5vZGUgcGFy\nZW50OyAvL2l0cyBwYXJlbnQKCiAgICAvKiogRGVmYXVsdCBjb25zdHJ1Y3Rv\nciAqLwogICAgcHVibGljIE5vZGVCYXNlKCkgewogICAgfQoKICAgIC8qKiBD\nb25zdHJ1Y3QgYSBub2RlIGZyb20gaXRzIHBhdGgKICAgICAqIEBwYXJhbSBw\nYXRoCiAgICAgKiAgIGEgY29uY2F0ZW5hdGlvbiBvZiB0aGlzIG5vZGUncyBs\nb2NhdGlvbiwgdGhlIHBhdGggc2VwZXJhdG9yLCBhbmQgaXRzIG5hbWUKICAg\nICAqLwogICAgcHVibGljIE5vZGVCYXNlKFN0cmluZyBwYXRoKSB7CiAgICAg\nICAgcGF0aCA9IG5vcm1hbGl6ZShwYXRoKTsKICAgICAgICBpbnQgaW5kZXgg\nPSBwYXRoLmxhc3RJbmRleE9mKFBBVEhfU0VQQVJBVE9SKTsKICAgICAgICBp\nZiAoaW5kZXggPT0gLTEpIHsKICAgICAgICAgICAgc2V0KFJPT1QsIHBhdGgp\nOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNldChwYXRoLnN1YnN0\ncmluZyhpbmRleCArIDEpLCBwYXRoLnN1YnN0cmluZygwLCBpbmRleCkpOwog\nICAgICAgIH0KICAgIH0KCiAgICAvKiogQ29uc3RydWN0IGEgbm9kZSBmcm9t\nIGl0cyBuYW1lIGFuZCBpdHMgbG9jYXRpb24KICAgICAqIEBwYXJhbSBuYW1l\nIHRoaXMgbm9kZSdzIG5hbWUgKGNhbiBiZSBudWxsLCBtdXN0IG5vdCBjb250\nYWluIHtAbGluayAjUEFUSF9TRVBBUkFUT1J9KQogICAgICogQHBhcmFtIGxv\nY2F0aW9uIHRoaXMgbm9kZSdzIGxvY2F0aW9uCiAgICAgKi8KICAgIHB1Ymxp\nYyBOb2RlQmFzZShTdHJpbmcgbmFtZSwgU3RyaW5nIGxvY2F0aW9uKSB7CiAg\nICAgICAgc2V0KG5hbWUsIG5vcm1hbGl6ZShsb2NhdGlvbikpOwogICAgfQoK\nICAgIC8qKiBDb25zdHJ1Y3QgYSBub2RlIGZyb20gaXRzIG5hbWUgYW5kIGl0\ncyBsb2NhdGlvbgogICAgICogQHBhcmFtIG5hbWUgdGhpcyBub2RlJ3MgbmFt\nZSAoY2FuIGJlIG51bGwsIG11c3Qgbm90IGNvbnRhaW4ge0BsaW5rICNQQVRI\nX1NFUEFSQVRPUn0pCiAgICAgKiBAcGFyYW0gbG9jYXRpb24gdGhpcyBub2Rl\nJ3MgbG9jYXRpb24KICAgICAqIEBwYXJhbSBwYXJlbnQgdGhpcyBub2RlJ3Mg\ncGFyZW50IG5vZGUKICAgICAqIEBwYXJhbSBsZXZlbCB0aGlzIG5vZGUncyBs\nZXZlbCBpbiB0aGUgdHJlZQogICAgICovCiAgICBwdWJsaWMgTm9kZUJhc2Uo\nU3RyaW5nIG5hbWUsIFN0cmluZyBsb2NhdGlvbiwgTm9kZSBwYXJlbnQsIGlu\ndCBsZXZlbCkgewogICAgICAgIHNldChuYW1lLCBub3JtYWxpemUobG9jYXRp\nb24pKTsKICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDsKICAgICAgICB0\naGlzLmxldmVsID0gbGV2ZWw7CiAgICB9CgogICAgLyoqCiAgICAgKiBzZXQg\ndGhpcyBub2RlJ3MgbmFtZSBhbmQgbG9jYXRpb24KICAgICAqIEBwYXJhbSBu\nYW1lIHRoZSAobnVsbGFibGUpIG5hbWUgLXdoaWNoIGNhbm5vdCBjb250YWlu\nIHRoZSB7QGxpbmsgI1BBVEhfU0VQQVJBVE9SfQogICAgICogQHBhcmFtIGxv\nY2F0aW9uIHRoZSBsb2NhdGlvbgogICAgICovCiAgICBwcml2YXRlIHZvaWQg\nc2V0KFN0cmluZyBuYW1lLCBTdHJpbmcgbG9jYXRpb24pIHsKICAgICAgICBp\nZiAobmFtZSAhPSBudWxsICYmIG5hbWUuY29udGFpbnMoUEFUSF9TRVBBUkFU\nT1JfU1RSKSkKICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVu\ndEV4Y2VwdGlvbigiTmV0d29yayBsb2NhdGlvbiBuYW1lIGNvbnRhaW5zIC86\nICIgKyBuYW1lKTsKICAgICAgICB0aGlzLm5hbWUgPSAobmFtZSA9PSBudWxs\nKSA/ICIiIDogbmFtZTsKICAgICAgICB0aGlzLmxvY2F0aW9uID0gbG9jYXRp\nb247CiAgICB9CgogICAgLyoqIEByZXR1cm4gdGhpcyBub2RlJ3MgbmFtZSAq\nLwogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgU3RyaW5nIGdldE5hbWUoKSB7\nCiAgICAgICAgcmV0dXJuIG5hbWU7CiAgICB9CgogICAgLyoqIEByZXR1cm4g\ndGhpcyBub2RlJ3MgbmV0d29yayBsb2NhdGlvbiAqLwogICAgQE92ZXJyaWRl\nCiAgICBwdWJsaWMgU3RyaW5nIGdldE5ldHdvcmtMb2NhdGlvbigpIHsKICAg\nICAgICByZXR1cm4gbG9jYXRpb247CiAgICB9CgogICAgLyoqIFNldCB0aGlz\nIG5vZGUncyBuZXR3b3JrIGxvY2F0aW9uCiAgICAgKiBAcGFyYW0gbG9jYXRp\nb24gdGhlIGxvY2F0aW9uCiAgICAgKi8KICAgIEBPdmVycmlkZQogICAgcHVi\nbGljIHZvaWQgc2V0TmV0d29ya0xvY2F0aW9uKFN0cmluZyBsb2NhdGlvbikg\newogICAgICAgIHRoaXMubG9jYXRpb24gPSBsb2NhdGlvbjsKICAgIH0KCiAg\nICAvKioKICAgICAqIEdldCB0aGUgcGF0aCBvZiBhIG5vZGUKICAgICAqIEBw\nYXJhbSBub2RlIGEgbm9uLW51bGwgbm9kZQogICAgICogQHJldHVybiB0aGUg\ncGF0aCBvZiBhIG5vZGUKICAgICAqLwogICAgcHVibGljIHN0YXRpYyBTdHJp\nbmcgZ2V0UGF0aChOb2RlIG5vZGUpIHsKICAgICAgICByZXR1cm4gbm9kZS5n\nZXROZXR3b3JrTG9jYXRpb24oKSArIFBBVEhfU0VQQVJBVE9SX1NUUiArIG5v\nZGUuZ2V0TmFtZSgpOwogICAgfQoKICAgIC8qKiBAcmV0dXJuIHRoaXMgbm9k\nZSdzIHBhdGggYXMgaXRzIHN0cmluZyByZXByZXNlbnRhdGlvbiAqLwogICAg\nQE92ZXJyaWRlCiAgICBwdWJsaWMgU3RyaW5nIHRvU3RyaW5nKCkgewogICAg\nICAgIHJldHVybiBnZXRQYXRoKHRoaXMpOwogICAgfQoKICAgIC8qKiBOb3Jt\nYWxpemUgYSBwYXRoIGJ5IHN0cmlwcGluZyBvZmYgYW55IHRyYWlsaW5nIHtA\nbGluayAjUEFUSF9TRVBBUkFUT1J9CiAgICAgKiBAcGFyYW0gcGF0aCBwYXRo\nIHRvIG5vcm1hbGl6ZS4KICAgICAqIEByZXR1cm4gdGhlIG5vcm1hbGlzZWQg\ncGF0aAogICAgICogSWYgPGk+cGF0aDwvaT5pcyBudWxsIG9yIGVtcHR5IHtA\nbGluayAjUk9PVH0gaXMgcmV0dXJuZWQKICAgICAqIEB0aHJvd3MgSWxsZWdh\nbEFyZ3VtZW50RXhjZXB0aW9uIGlmIHRoZSBmaXJzdCBjaGFyYWN0ZXIgb2Yg\nYSBub24gZW1wdHkgcGF0aAogICAgICogaXMgbm90IHtAbGluayAjUEFUSF9T\nRVBBUkFUT1J9CiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgU3RyaW5nIG5v\ncm1hbGl6ZShTdHJpbmcgcGF0aCkgewogICAgICAgIGlmIChwYXRoID09IG51\nbGwgfHwgcGF0aC5sZW5ndGgoKSA9PSAwKQogICAgICAgICAgICByZXR1cm4g\nUk9PVDsKCiAgICAgICAgaWYgKHBhdGguY2hhckF0KDApICE9IFBBVEhfU0VQ\nQVJBVE9SKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1l\nbnRFeGNlcHRpb24oIk5ldHdvcmsgTG9jYXRpb24gcGF0aCBkb2VzIG5vdCBz\ndGFydCB3aXRoICIgKyBQQVRIX1NFUEFSQVRPUl9TVFIgKyAiOiAiCiAgICAg\nICAgICAgICAgICAgICAgKyBwYXRoKTsKICAgICAgICB9CgogICAgICAgIGlu\ndCBsZW4gPSBwYXRoLmxlbmd0aCgpOwogICAgICAgIGlmIChwYXRoLmNoYXJB\ndChsZW4gLSAxKSA9PSBQQVRIX1NFUEFSQVRPUikgewogICAgICAgICAgICBy\nZXR1cm4gcGF0aC5zdWJzdHJpbmcoMCwgbGVuIC0gMSk7CiAgICAgICAgfQog\nICAgICAgIHJldHVybiBwYXRoOwogICAgfQoKICAgIC8qKiBAcmV0dXJuIHRo\naXMgbm9kZSdzIHBhcmVudCAqLwogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMg\nTm9kZSBnZXRQYXJlbnQoKSB7CiAgICAgICAgcmV0dXJuIHBhcmVudDsKICAg\nIH0KCiAgICAvKiogU2V0IHRoaXMgbm9kZSdzIHBhcmVudAogICAgICogQHBh\ncmFtIHBhcmVudCB0aGUgcGFyZW50CiAgICAgKi8KICAgIEBPdmVycmlkZQog\nICAgcHVibGljIHZvaWQgc2V0UGFyZW50KE5vZGUgcGFyZW50KSB7CiAgICAg\nICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7CiAgICB9CgogICAgLyoqIEByZXR1\ncm4gdGhpcyBub2RlJ3MgbGV2ZWwgaW4gdGhlIHRyZWUuCiAgICAgKiBFLmcu\nIHRoZSByb290IG9mIGEgdHJlZSByZXR1cm5zIDAgYW5kIGl0cyBjaGlsZHJl\nbiByZXR1cm4gMQogICAgICovCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBp\nbnQgZ2V0TGV2ZWwoKSB7CiAgICAgICAgcmV0dXJuIGxldmVsOwogICAgfQoK\nICAgIC8qKiBTZXQgdGhpcyBub2RlJ3MgbGV2ZWwgaW4gdGhlIHRyZWUKICAg\nICAqIEBwYXJhbSBsZXZlbCB0aGUgbGV2ZWwKICAgICAqLwogICAgQE92ZXJy\naWRlCiAgICBwdWJsaWMgdm9pZCBzZXRMZXZlbChpbnQgbGV2ZWwpIHsKICAg\nICAgICB0aGlzLmxldmVsID0gbGV2ZWw7CiAgICB9CgogICAgcHVibGljIHN0\nYXRpYyBpbnQgbG9jYXRpb25Ub0RlcHRoKFN0cmluZyBsb2NhdGlvbikgewog\nICAgICAgIFN0cmluZyBub3JtYWxpemVkTG9jYXRpb24gPSBub3JtYWxpemUo\nbG9jYXRpb24pOwogICAgICAgIGludCBsZW5ndGggPSBub3JtYWxpemVkTG9j\nYXRpb24ubGVuZ3RoKCk7CiAgICAgICAgaW50IGRlcHRoID0gMDsKICAgICAg\nICBmb3IgKGludCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgICAg\nICAgIGlmIChub3JtYWxpemVkTG9jYXRpb24uY2hhckF0KGkpID09IFBBVEhf\nU0VQQVJBVE9SKSB7CiAgICAgICAgICAgICAgICBkZXB0aCsrOwogICAgICAg\nICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBkZXB0aDsKICAgIH0K\nfQo=\n","encoding":"base64"}

