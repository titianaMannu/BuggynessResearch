{"sha":"1671cc888b7ffa77e683851fd9949f072b9a71e2","node_id":"MDQ6QmxvYjE1NzU5NTY6MTY3MWNjODg4YjdmZmE3N2U2ODM4NTFmZDk5NDlmMDcyYjlhNzFlMg==","size":9345,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/1671cc888b7ffa77e683851fd9949f072b9a71e2","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KLy8g\nVGhpcyBjb2RlIGhhcyBiZWVuIGNvcGllZCBmcm9tIGhhZG9vcC1jb21tb24g\nMC4yMy4xCnBhY2thZ2Ugb3JnLmFwYWNoZS5ib29ra2VlcGVyLm5ldDsKCmlt\ncG9ydCBqYXZhLmlvLkZpbGU7CmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0\nOwppbXBvcnQgamF2YS51dGlsLkxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuU3Ry\naW5nVG9rZW5pemVyOwoKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci51\ndGlsLlNoZWxsLlNoZWxsQ29tbWFuZEV4ZWN1dG9yOwppbXBvcnQgb3JnLmFw\nYWNoZS5jb21tb25zLmNvbmZpZ3VyYXRpb24uQ29uZmlndXJhdGlvbjsKaW1w\nb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5sb2dnaW5nLkxvZzsKaW1wb3J0IG9y\nZy5hcGFjaGUuY29tbW9ucy5sb2dnaW5nLkxvZ0ZhY3Rvcnk7CgovKioKICog\nVGhpcyBjbGFzcyBpbXBsZW1lbnRzIHRoZSB7QGxpbmsgRE5TVG9Td2l0Y2hN\nYXBwaW5nfSBpbnRlcmZhY2UgdXNpbmcgYQogKiBzY3JpcHQgY29uZmlndXJl\nZCB2aWEgdGhlCiAqIHtAbGluayBDb21tb25Db25maWd1cmF0aW9uS2V5cyNO\nRVRfVE9QT0xPR1lfU0NSSVBUX0ZJTEVfTkFNRV9LRVl9IG9wdGlvbi4KICog\nPHAvPgogKiBJdCBjb250YWlucyBhIHN0YXRpYyBjbGFzcyA8Y29kZT5SYXdT\nY3JpcHRCYXNlZE1hcHBpbmc8L2NvZGU+IHRoYXQgcGVyZm9ybXMKICogdGhl\nIHdvcms6IHJlYWRpbmcgdGhlIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVycywg\nZXhlY3V0aW5nIGFueSBkZWZpbmVkCiAqIHNjcmlwdCwgaGFuZGxpbmcgZXJy\nb3JzIGFuZCBzdWNoIGxpa2UuIFRoZSBvdXRlcgogKiBjbGFzcyBleHRlbmRz\nIHtAbGluayBDYWNoZWRETlNUb1N3aXRjaE1hcHBpbmd9IHRvIGNhY2hlIHRo\nZSBkZWxlZ2F0ZWQKICogcXVlcmllcy4KICogPHAvPgogKiBUaGlzIEROUyBt\nYXBwZXIncyB7QGxpbmsgI2lzU2luZ2xlU3dpdGNoKCl9IHByZWRpY2F0ZSBy\nZXR1cm5zCiAqIHRydWUgaWYgYW5kIG9ubHkgaWYgYSBzY3JpcHQgaXMgZGVm\naW5lZC4KICovCnB1YmxpYyBmaW5hbCBjbGFzcyBTY3JpcHRCYXNlZE1hcHBp\nbmcgZXh0ZW5kcyBDYWNoZWRETlNUb1N3aXRjaE1hcHBpbmcgewoKICAgIC8q\nKgogICAgICogTWluaW11bSBudW1iZXIgb2YgYXJndW1lbnRzOiB7QHZhbHVl\nfQogICAgICovCiAgICBzdGF0aWMgZmluYWwgaW50IE1JTl9BTExPV0FCTEVf\nQVJHUyA9IDE7CgogICAgLyoqCiAgICAgKiBEZWZhdWx0IG51bWJlciBvZiBh\ncmd1bWVudHM6IHtAdmFsdWV9CiAgICAgKi8KICAgIHN0YXRpYyBmaW5hbCBp\nbnQgREVGQVVMVF9BUkdfQ09VTlQgPSBDb21tb25Db25maWd1cmF0aW9uS2V5\ncy5ORVRfVE9QT0xPR1lfU0NSSVBUX05VTUJFUl9BUkdTX0RFRkFVTFQ7Cgog\nICAgLyoqCiAgICAgKiBrZXkgdG8gdGhlIHNjcmlwdCBmaWxlbmFtZSB7QHZh\nbHVlfQogICAgICovCiAgICBzdGF0aWMgZmluYWwgU3RyaW5nIFNDUklQVF9G\nSUxFTkFNRV9LRVkgPSBDb21tb25Db25maWd1cmF0aW9uS2V5cy5ORVRfVE9Q\nT0xPR1lfU0NSSVBUX0ZJTEVfTkFNRV9LRVk7CiAgICAvKioKICAgICAqIGtl\neSB0byB0aGUgYXJndW1lbnQgY291bnQgdGhhdCB0aGUgc2NyaXB0IHN1cHBv\ncnRzCiAgICAgKiB7QHZhbHVlfQogICAgICovCiAgICBzdGF0aWMgZmluYWwg\nU3RyaW5nIFNDUklQVF9BUkdfQ09VTlRfS0VZID0gQ29tbW9uQ29uZmlndXJh\ndGlvbktleXMuTkVUX1RPUE9MT0dZX1NDUklQVF9OVU1CRVJfQVJHU19LRVk7\nCiAgICAvKioKICAgICAqIFRleHQgdXNlZCBpbiB0aGUge0BsaW5rICN0b1N0\ncmluZygpfSBtZXRob2QgaWYgdGhlcmUgaXMgbm8gc3RyaW5nCiAgICAgKiB7\nQHZhbHVlfQogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmlu\nZyBOT19TQ1JJUFQgPSAibm8gc2NyaXB0IjsKCiAgICAvKioKICAgICAqIENy\nZWF0ZSBhbiBpbnN0YW5jZSB3aXRoIHRoZSBkZWZhdWx0IGNvbmZpZ3VyYXRp\nb24uCiAgICAgKiA8L3A+CiAgICAgKiBDYWxsaW5nIHtAbGluayAjc2V0Q29u\nZihDb25maWd1cmF0aW9uKX0gd2lsbCB0cmlnZ2VyIGEKICAgICAqIHJlLWV2\nYWx1YXRpb24gb2YgdGhlIGNvbmZpZ3VyYXRpb24gc2V0dGluZ3MgYW5kIHNv\nIGJlIHVzZWQgdG8KICAgICAqIHNldCB1cCB0aGUgbWFwcGluZyBzY3JpcHQu\nCiAgICAgKgogICAgICovCiAgICBwdWJsaWMgU2NyaXB0QmFzZWRNYXBwaW5n\nKCkgewogICAgICAgIHN1cGVyKG5ldyBSYXdTY3JpcHRCYXNlZE1hcHBpbmco\nKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYW4gaW5zdGFuY2Ug\nZnJvbSB0aGUgZ2l2ZW4gY29uZmlndXJhdGlvbgogICAgICogQHBhcmFtIGNv\nbmYgY29uZmlndXJhdGlvbgogICAgICovCiAgICBwdWJsaWMgU2NyaXB0QmFz\nZWRNYXBwaW5nKENvbmZpZ3VyYXRpb24gY29uZikgewogICAgICAgIHRoaXMo\nKTsKICAgICAgICBzZXRDb25mKGNvbmYpOwogICAgfQoKICAgIC8qKgogICAg\nICogR2V0IHRoZSBjYWNoZWQgbWFwcGluZyBhbmQgY29udmVydCBpdCB0byBp\ndHMgcmVhbCB0eXBlCiAgICAgKiBAcmV0dXJuIHRoZSBpbm5lciByYXcgc2Ny\naXB0IG1hcHBpbmcuCiAgICAgKi8KICAgIHByaXZhdGUgUmF3U2NyaXB0QmFz\nZWRNYXBwaW5nIGdldFJhd01hcHBpbmcoKSB7CiAgICAgICAgcmV0dXJuIChS\nYXdTY3JpcHRCYXNlZE1hcHBpbmcpIHJhd01hcHBpbmc7CiAgICB9CgogICAg\nQE92ZXJyaWRlCiAgICBwdWJsaWMgQ29uZmlndXJhdGlvbiBnZXRDb25mKCkg\newogICAgICAgIHJldHVybiBnZXRSYXdNYXBwaW5nKCkuZ2V0Q29uZigpOwog\nICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIFN0cmluZyB0b1N0cmlu\nZygpIHsKICAgICAgICByZXR1cm4gInNjcmlwdC1iYXNlZCBtYXBwaW5nIHdp\ndGggIiArIGdldFJhd01hcHBpbmcoKS50b1N0cmluZygpOwogICAgfQoKICAg\nIC8qKgogICAgICoge0Bpbmhlcml0RG9jfQogICAgICogPHAvPgogICAgICog\nVGhpcyB3aWxsIGdldCBjYWxsZWQgaW4gdGhlIHN1cGVyY2xhc3MgY29uc3Ry\ndWN0b3IsIHNvIGEgY2hlY2sgaXMgbmVlZGVkCiAgICAgKiB0byBlbnN1cmUg\ndGhhdCB0aGUgcmF3IG1hcHBpbmcgaXMgZGVmaW5lZCBiZWZvcmUgdHJ5aW5n\nIHRvIHJlbGF5aW5nIGEgbnVsbAogICAgICogY29uZmlndXJhdGlvbi4KICAg\nICAqIEBwYXJhbSBjb25mCiAgICAgKi8KICAgIEBPdmVycmlkZQogICAgcHVi\nbGljIHZvaWQgc2V0Q29uZihDb25maWd1cmF0aW9uIGNvbmYpIHsKICAgICAg\nICBzdXBlci5zZXRDb25mKGNvbmYpOwogICAgICAgIGdldFJhd01hcHBpbmco\nKS5zZXRDb25mKGNvbmYpOwogICAgfQoKICAgIC8qKgogICAgICogVGhpcyBp\ncyB0aGUgdW5jYWNoZWQgc2NyaXB0IG1hcHBpbmcgdGhhdCBpcyBmZWQgaW50\nbyB0aGUgY2FjaGUgbWFuYWdlZAogICAgICogYnkgdGhlIHN1cGVyY2xhc3Mg\ne0BsaW5rIENhY2hlZEROU1RvU3dpdGNoTWFwcGluZ30KICAgICAqLwogICAg\ncHJpdmF0ZSBzdGF0aWMgZmluYWwgY2xhc3MgUmF3U2NyaXB0QmFzZWRNYXBw\naW5nIGV4dGVuZHMgQWJzdHJhY3RETlNUb1N3aXRjaE1hcHBpbmcgewogICAg\nICAgIHByaXZhdGUgU3RyaW5nIHNjcmlwdE5hbWU7CiAgICAgICAgcHJpdmF0\nZSBpbnQgbWF4QXJnczsgLy9tYXggaG9zdG5hbWVzIHBlciBjYWxsIG9mIHRo\nZSBzY3JpcHQKICAgICAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2cgTE9H\nID0gTG9nRmFjdG9yeS5nZXRMb2coU2NyaXB0QmFzZWRNYXBwaW5nLmNsYXNz\nKTsKCiAgICAgICAgLyoqCiAgICAgICAgICogU2V0IHRoZSBjb25maWd1cmF0\naW9uIGFuZCBleHRyYWN0IHRoZSBjb25maWd1cmF0aW9uIHBhcmFtZXRlcnMg\nb2YgaW50ZXJlc3QKICAgICAgICAgKiBAcGFyYW0gY29uZiB0aGUgbmV3IGNv\nbmZpZ3VyYXRpb24KICAgICAgICAgKi8KICAgICAgICBAT3ZlcnJpZGUKICAg\nICAgICBwdWJsaWMgdm9pZCBzZXRDb25mKENvbmZpZ3VyYXRpb24gY29uZikg\newogICAgICAgICAgICBzdXBlci5zZXRDb25mKGNvbmYpOwogICAgICAgICAg\nICBpZiAoY29uZiAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBzY3JpcHRO\nYW1lID0gY29uZi5nZXRTdHJpbmcoU0NSSVBUX0ZJTEVOQU1FX0tFWSk7CiAg\nICAgICAgICAgICAgICBtYXhBcmdzID0gY29uZi5nZXRJbnQoU0NSSVBUX0FS\nR19DT1VOVF9LRVksIERFRkFVTFRfQVJHX0NPVU5UKTsKICAgICAgICAgICAg\nfSBlbHNlIHsKICAgICAgICAgICAgICAgIHNjcmlwdE5hbWUgPSBudWxsOwog\nICAgICAgICAgICAgICAgbWF4QXJncyA9IDA7CiAgICAgICAgICAgIH0KICAg\nICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIENvbnN0cnVjdG9yLiBU\naGUgbWFwcGluZyBpcyBub3QgcmVhZHkgdG8gdXNlIHVudGlsCiAgICAgICAg\nICoge0BsaW5rICNzZXRDb25mKENvbmZpZ3VyYXRpb24pfSBoYXMgYmVlbiBj\nYWxsZWQKICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgUmF3U2NyaXB0QmFz\nZWRNYXBwaW5nKCkgewogICAgICAgIH0KCiAgICAgICAgQE92ZXJyaWRlCiAg\nICAgICAgcHVibGljIExpc3Q8U3RyaW5nPiByZXNvbHZlKExpc3Q8U3RyaW5n\nPiBuYW1lcykgewogICAgICAgICAgICBMaXN0PFN0cmluZz4gbSA9IG5ldyBB\ncnJheUxpc3Q8U3RyaW5nPihuYW1lcy5zaXplKCkpOwoKICAgICAgICAgICAg\naWYgKG5hbWVzLmlzRW1wdHkoKSkgewogICAgICAgICAgICAgICAgcmV0dXJu\nIG07CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChzY3JpcHROYW1l\nID09IG51bGwpIHsKICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBp\nIDwgbmFtZXMuc2l6ZSgpOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBt\nLmFkZChOZXR3b3JrVG9wb2xvZ3kuREVGQVVMVF9SQUNLKTsKICAgICAgICAg\nICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBtOwogICAgICAgICAg\nICB9CgogICAgICAgICAgICBTdHJpbmcgb3V0cHV0ID0gcnVuUmVzb2x2ZUNv\nbW1hbmQobmFtZXMpOwogICAgICAgICAgICBpZiAob3V0cHV0ICE9IG51bGwp\nIHsKICAgICAgICAgICAgICAgIFN0cmluZ1Rva2VuaXplciBhbGxTd2l0Y2hJ\nbmZvID0gbmV3IFN0cmluZ1Rva2VuaXplcihvdXRwdXQpOwogICAgICAgICAg\nICAgICAgd2hpbGUgKGFsbFN3aXRjaEluZm8uaGFzTW9yZVRva2VucygpKSB7\nCiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIHN3aXRjaEluZm8gPSBhbGxT\nd2l0Y2hJbmZvLm5leHRUb2tlbigpOwogICAgICAgICAgICAgICAgICAgIG0u\nYWRkKHN3aXRjaEluZm8pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAg\nICAgICAgIGlmIChtLnNpemUoKSAhPSBuYW1lcy5zaXplKCkpIHsKICAgICAg\nICAgICAgICAgICAgICAvLyBpbnZhbGlkIG51bWJlciBvZiBlbnRyaWVzIHJl\ndHVybmVkIGJ5IHRoZSBzY3JpcHQKICAgICAgICAgICAgICAgICAgICBMT0cu\nZXJyb3IoIlNjcmlwdCAiICsgc2NyaXB0TmFtZSArICIgcmV0dXJuZWQgIiAr\nIEludGVnZXIudG9TdHJpbmcobS5zaXplKCkpICsgIiB2YWx1ZXMgd2hlbiAi\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIEludGVnZXIudG9TdHJp\nbmcobmFtZXMuc2l6ZSgpKSArICIgd2VyZSBleHBlY3RlZC4iKTsKICAgICAg\nICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgIH0K\nICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIGFuIGVy\ncm9yIG9jY3VycmVkLiByZXR1cm4gbnVsbCB0byBzaWduaWZ5IHRoaXMuCiAg\nICAgICAgICAgICAgICAvLyAoZXhuIHdhcyBhbHJlYWR5IGxvZ2dlZCBpbiBy\ndW5SZXNvbHZlQ29tbWFuZCkKICAgICAgICAgICAgICAgIHJldHVybiBudWxs\nOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gbTsKICAgICAg\nICB9CgogICAgICAgIC8qKgogICAgICAgICAqIEJ1aWxkIGFuZCBleGVjdXRl\nIHRoZSByZXNvbHV0aW9uIGNvbW1hbmQuIFRoZSBjb21tYW5kIGlzCiAgICAg\nICAgICogZXhlY3V0ZWQgaW4gdGhlIGRpcmVjdG9yeSBzcGVjaWZpZWQgYnkg\ndGhlIHN5c3RlbSBwcm9wZXJ0eQogICAgICAgICAqICJ1c2VyLmRpciIgaWYg\nc2V0OyBvdGhlcndpc2UgdGhlIGN1cnJlbnQgd29ya2luZyBkaXJlY3Rvcnkg\naXMgdXNlZAogICAgICAgICAqIEBwYXJhbSBhcmdzIGEgbGlzdCBvZiBhcmd1\nbWVudHMKICAgICAgICAgKiBAcmV0dXJuIG51bGwgaWYgdGhlIG51bWJlciBv\nZiBhcmd1bWVudHMgaXMgb3V0IG9mIHJhbmdlLAogICAgICAgICAqIG9yIHRo\nZSBvdXRwdXQgb2YgdGhlIGNvbW1hbmQuCiAgICAgICAgICovCiAgICAgICAg\ncHJpdmF0ZSBTdHJpbmcgcnVuUmVzb2x2ZUNvbW1hbmQoTGlzdDxTdHJpbmc+\nIGFyZ3MpIHsKICAgICAgICAgICAgaW50IGxvb3BDb3VudCA9IDA7CiAgICAg\nICAgICAgIGlmIChhcmdzLnNpemUoKSA9PSAwKSB7CiAgICAgICAgICAgICAg\nICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgICBTdHJp\nbmdCdWlsZGVyIGFsbE91dHB1dCA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7CiAg\nICAgICAgICAgIGludCBudW1Qcm9jZXNzZWQgPSAwOwogICAgICAgICAgICBp\nZiAobWF4QXJncyA8IE1JTl9BTExPV0FCTEVfQVJHUykgewogICAgICAgICAg\nICAgICAgTE9HLndhcm4oIkludmFsaWQgdmFsdWUgIiArIEludGVnZXIudG9T\ndHJpbmcobWF4QXJncykgKyAiIGZvciAiICsgU0NSSVBUX0FSR19DT1VOVF9L\nRVkKICAgICAgICAgICAgICAgICAgICAgICAgKyAiOyBtdXN0IGJlID49ICIg\nKyBJbnRlZ2VyLnRvU3RyaW5nKE1JTl9BTExPV0FCTEVfQVJHUykpOwogICAg\nICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIH0KCiAgICAg\nICAgICAgIHdoaWxlIChudW1Qcm9jZXNzZWQgIT0gYXJncy5zaXplKCkpIHsK\nICAgICAgICAgICAgICAgIGludCBzdGFydCA9IG1heEFyZ3MgKiBsb29wQ291\nbnQ7CiAgICAgICAgICAgICAgICBMaXN0PFN0cmluZz4gY21kTGlzdCA9IG5l\ndyBBcnJheUxpc3Q8U3RyaW5nPigpOwogICAgICAgICAgICAgICAgY21kTGlz\ndC5hZGQoc2NyaXB0TmFtZSk7CiAgICAgICAgICAgICAgICBmb3IgKG51bVBy\nb2Nlc3NlZCA9IHN0YXJ0OwogICAgICAgICAgICAgICAgICAgICBudW1Qcm9j\nZXNzZWQgPCAoc3RhcnQgKyBtYXhBcmdzKSAmJiBudW1Qcm9jZXNzZWQgPCBh\ncmdzLnNpemUoKTsKICAgICAgICAgICAgICAgICAgICAgbnVtUHJvY2Vzc2Vk\nKyspIHsKICAgICAgICAgICAgICAgICAgICBjbWRMaXN0LmFkZChhcmdzLmdl\ndChudW1Qcm9jZXNzZWQpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAg\nICAgICAgIEZpbGUgZGlyID0gbnVsbDsKICAgICAgICAgICAgICAgIFN0cmlu\nZyB1c2VyRGlyOwogICAgICAgICAgICAgICAgaWYgKCh1c2VyRGlyID0gU3lz\ndGVtLmdldFByb3BlcnR5KCJ1c2VyLmRpciIpKSAhPSBudWxsKSB7CiAgICAg\nICAgICAgICAgICAgICAgZGlyID0gbmV3IEZpbGUodXNlckRpcik7CiAgICAg\nICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBTaGVsbENvbW1hbmRFeGVj\ndXRvciBzID0gbmV3IFNoZWxsQ29tbWFuZEV4ZWN1dG9yKGNtZExpc3QudG9B\ncnJheShuZXcgU3RyaW5nW2NtZExpc3Quc2l6ZSgpXSksIGRpcik7CiAgICAg\nICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHMuZXhlY3V0\nZSgpOwogICAgICAgICAgICAgICAgICAgIGFsbE91dHB1dC5hcHBlbmQocy5n\nZXRPdXRwdXQoKSkuYXBwZW5kKCIgIik7CiAgICAgICAgICAgICAgICB9IGNh\ndGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICAgICAgICAgIExPRy53\nYXJuKCJFeGNlcHRpb24gcnVubmluZyAiICsgcywgZSk7CiAgICAgICAgICAg\nICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICB9CiAgICAg\nICAgICAgICAgICBsb29wQ291bnQrKzsKICAgICAgICAgICAgfQogICAgICAg\nICAgICByZXR1cm4gYWxsT3V0cHV0LnRvU3RyaW5nKCk7CiAgICAgICAgfQoK\nICAgICAgICAvKioKICAgICAgICAgKiBEZWNsYXJlIHRoYXQgdGhlIG1hcHBl\nciBpcyBzaW5nbGUtc3dpdGNoZWQgaWYgYSBzY3JpcHQgd2FzIG5vdCBuYW1l\nZAogICAgICAgICAqIGluIHRoZSBjb25maWd1cmF0aW9uLgogICAgICAgICAq\nIEByZXR1cm4gdHJ1ZSBpZmYgdGhlcmUgaXMgbm8gc2NyaXB0CiAgICAgICAg\nICovCiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHVibGljIGJvb2xlYW4g\naXNTaW5nbGVTd2l0Y2goKSB7CiAgICAgICAgICAgIHJldHVybiBzY3JpcHRO\nYW1lID09IG51bGw7CiAgICAgICAgfQoKICAgICAgICBAT3ZlcnJpZGUKICAg\nICAgICBwdWJsaWMgU3RyaW5nIHRvU3RyaW5nKCkgewogICAgICAgICAgICBy\nZXR1cm4gc2NyaXB0TmFtZSAhPSBudWxsID8gKCJzY3JpcHQgIiArIHNjcmlw\ndE5hbWUpIDogTk9fU0NSSVBUOwogICAgICAgIH0KCiAgICAgICAgQE92ZXJy\naWRlCiAgICAgICAgcHVibGljIHZvaWQgcmVsb2FkQ2FjaGVkTWFwcGluZ3Mo\nKSB7CiAgICAgICAgICAgIC8vIE5vdGhpbmcgdG8gZG8gaGVyZSwgc2luY2Ug\nUmF3U2NyaXB0QmFzZWRNYXBwaW5nIGhhcyBubyBjYWNoZSwgYW5kCiAgICAg\nICAgICAgIC8vIGRvZXMgbm90IGluaGVyaXQgZnJvbSBDYWNoZWRETlNUb1N3\naXRjaE1hcHBpbmcKICAgICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

