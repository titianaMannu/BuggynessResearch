{"sha":"e6e7802ddd3cc1c5f5c55047d606326621219db5","node_id":"MDQ6QmxvYjE1NzU5NTY6ZTZlNzgwMmRkZDNjYzFjNWY1YzU1MDQ3ZDYwNjMyNjYyMTIxOWRiNQ==","size":4928,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/e6e7802ddd3cc1c5f5c55047d606326621219db5","content":"LyoKICoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9y\nIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBU\naGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhl\nIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNl\nIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBs\naWFuY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEg\nY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBl\naXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZv\nciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Np\nb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICoK\nICovCgpwYWNrYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci5wcm90bzsKCmlt\ncG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5MaW5rZWRCbG9ja2luZ1F1ZXVl\nOwppbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuYXRvbWljLkF0b21pY0lu\ndGVnZXI7CgppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNsaWVudC5M\nZWRnZXJNZXRhZGF0YTsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5u\nZXQuQm9va2llU29ja2V0QWRkcmVzczsKaW1wb3J0IG9yZy5hcGFjaGUuem9v\na2VlcGVyLkFzeW5jQ2FsbGJhY2s7CmltcG9ydCBvcmcuamJvc3MubmV0dHku\nYnVmZmVyLkNoYW5uZWxCdWZmZXI7CmltcG9ydCBvcmcuc2xmNGouTG9nZ2Vy\nOwppbXBvcnQgb3JnLnNsZjRqLkxvZ2dlckZhY3Rvcnk7CgovKioKICogRGVj\nbGFyYXRpb24gb2YgYSBjYWxsYmFjayBpbnRlcmZhY2VzIHVzZWQgaW4gYm9v\na2tlZXBlciBjbGllbnQgbGlicmFyeSBidXQKICogbm90IGV4cG9zZWQgdG8g\ndGhlIGNsaWVudCBhcHBsaWNhdGlvbi4KICovCgpwdWJsaWMgY2xhc3MgQm9v\na2tlZXBlckludGVybmFsQ2FsbGJhY2tzIHsKCiAgICBzdGF0aWMgZmluYWwg\nTG9nZ2VyIExPRyA9IExvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKEJvb2trZWVw\nZXJJbnRlcm5hbENhbGxiYWNrcy5jbGFzcyk7CgogICAgLyoqCiAgICAgKiBD\nYWxsYmFjayBmb3IgY2FsbHMgZnJvbSBCb29raWVDbGllbnQgb2JqZWN0cy4g\nU3VjaCBjYWxscyBhcmUgZm9yIHJlcGxpZXMKICAgICAqIG9mIHdyaXRlIG9w\nZXJhdGlvbnMgKG9wZXJhdGlvbnMgdG8gYWRkIGFuIGVudHJ5IHRvIGEgbGVk\nZ2VyKS4KICAgICAqCiAgICAgKi8KCiAgICAvKioKICAgICAqIExpc3RlbmVy\nIG9uIGxlZGdlciBtZXRhZGF0YSBjaGFuZ2VzLgogICAgICovCiAgICBwdWJs\naWMgaW50ZXJmYWNlIExlZGdlck1ldGFkYXRhTGlzdGVuZXIgewogICAgICAg\nIC8qKgogICAgICAgICAqIFRyaWdnZXJlZCBlYWNoIHRpbWUgbGVkZ2VyIG1l\ndGFkYXRhIGNoYW5nZWQuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0g\nbGVkZ2VySWQKICAgICAgICAgKiAgICAgICAgICBsZWRnZXIgaWQuCiAgICAg\nICAgICogQHBhcmFtIG1ldGFkYXRhCiAgICAgICAgICogICAgICAgICAgbmV3\nIGxlZGdlciBtZXRhZGF0YS4KICAgICAgICAgKi8KICAgICAgICB2b2lkIG9u\nQ2hhbmdlZChsb25nIGxlZGdlcklkLCBMZWRnZXJNZXRhZGF0YSBtZXRhZGF0\nYSk7CiAgICB9CgogICAgcHVibGljIGludGVyZmFjZSBXcml0ZUNhbGxiYWNr\nIHsKICAgICAgICB2b2lkIHdyaXRlQ29tcGxldGUoaW50IHJjLCBsb25nIGxl\nZGdlcklkLCBsb25nIGVudHJ5SWQsIEJvb2tpZVNvY2tldEFkZHJlc3MgYWRk\nciwgT2JqZWN0IGN0eCk7CiAgICB9CgogICAgcHVibGljIGludGVyZmFjZSBH\nZW5lcmljQ2FsbGJhY2s8VD4gewogICAgICAgIHZvaWQgb3BlcmF0aW9uQ29t\ncGxldGUoaW50IHJjLCBUIHJlc3VsdCk7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBEZWNsYXJhdGlvbiBvZiBhIGNhbGxiYWNrIGltcGxlbWVudGF0aW9uIGZv\nciBjYWxscyBmcm9tIEJvb2tpZUNsaWVudCBvYmplY3RzLgogICAgICogU3Vj\naCBjYWxscyBhcmUgZm9yIHJlcGxpZXMgb2YgcmVhZCBvcGVyYXRpb25zIChv\ncGVyYXRpb25zIHRvIHJlYWQgYW4gZW50cnkKICAgICAqIGZyb20gYSBsZWRn\nZXIpLgogICAgICoKICAgICAqLwoKICAgIHB1YmxpYyBpbnRlcmZhY2UgUmVh\nZEVudHJ5Q2FsbGJhY2sgewogICAgICAgIHZvaWQgcmVhZEVudHJ5Q29tcGxl\ndGUoaW50IHJjLCBsb25nIGxlZGdlcklkLCBsb25nIGVudHJ5SWQsIENoYW5u\nZWxCdWZmZXIgYnVmZmVyLCBPYmplY3QgY3R4KTsKICAgIH0KCiAgICAvKioK\nICAgICAqIFRoaXMgaXMgYSBtdWx0aSBjYWxsYmFjayBvYmplY3QgdGhhdCB3\nYWl0cyBmb3IgYWxsIG9mCiAgICAgKiB0aGUgbXVsdGlwbGUgYXN5bmMgb3Bl\ncmF0aW9ucyB0byBjb21wbGV0ZS4gSWYgYW55IGZhaWwsIHRoZW4gd2UgaW52\nb2tlCiAgICAgKiB0aGUgZmluYWwgY2FsbGJhY2sgd2l0aCBhIHByb3ZpZGVk\nIGZhaWx1cmVSYwogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIE11\nbHRpQ2FsbGJhY2sgaW1wbGVtZW50cyBBc3luY0NhbGxiYWNrLlZvaWRDYWxs\nYmFjayB7CiAgICAgICAgLy8gTnVtYmVyIG9mIGV4cGVjdGVkIGNhbGxiYWNr\ncwogICAgICAgIGZpbmFsIGludCBleHBlY3RlZDsKICAgICAgICBmaW5hbCBp\nbnQgZmFpbHVyZVJjOwogICAgICAgIGZpbmFsIGludCBzdWNjZXNzUmM7CiAg\nICAgICAgLy8gRmluYWwgY2FsbGJhY2sgYW5kIHRoZSBjb3JyZXNwb25kaW5n\nIGNvbnRleHQgdG8gaW52b2tlCiAgICAgICAgZmluYWwgQXN5bmNDYWxsYmFj\nay5Wb2lkQ2FsbGJhY2sgY2I7CiAgICAgICAgZmluYWwgT2JqZWN0IGNvbnRl\neHQ7CiAgICAgICAgLy8gVGhpcyBrZWVwcyB0cmFjayBvZiBob3cgbWFueSBv\ncGVyYXRpb25zIGhhdmUgY29tcGxldGVkCiAgICAgICAgZmluYWwgQXRvbWlj\nSW50ZWdlciBkb25lID0gbmV3IEF0b21pY0ludGVnZXIoKTsKICAgICAgICAv\nLyBMaXN0IG9mIHRoZSBleGNlcHRpb25zIGZyb20gb3BlcmF0aW9ucyB0aGF0\nIGNvbXBsZXRlZCB1bnN1Y2Nlc3NmdWxseQogICAgICAgIGZpbmFsIExpbmtl\nZEJsb2NraW5nUXVldWU8SW50ZWdlcj4gZXhjZXB0aW9ucyA9IG5ldyBMaW5r\nZWRCbG9ja2luZ1F1ZXVlPEludGVnZXI+KCk7CgogICAgICAgIHB1YmxpYyBN\ndWx0aUNhbGxiYWNrKGludCBleHBlY3RlZCwgQXN5bmNDYWxsYmFjay5Wb2lk\nQ2FsbGJhY2sgY2IsIE9iamVjdCBjb250ZXh0LCBpbnQgc3VjY2Vzc1JjLCBp\nbnQgZmFpbHVyZVJjKSB7CiAgICAgICAgICAgIHRoaXMuZXhwZWN0ZWQgPSBl\neHBlY3RlZDsKICAgICAgICAgICAgdGhpcy5jYiA9IGNiOwogICAgICAgICAg\nICB0aGlzLmNvbnRleHQgPSBjb250ZXh0OwogICAgICAgICAgICB0aGlzLmZh\naWx1cmVSYyA9IGZhaWx1cmVSYzsKICAgICAgICAgICAgdGhpcy5zdWNjZXNz\nUmMgPSBzdWNjZXNzUmM7CiAgICAgICAgICAgIGlmIChleHBlY3RlZCA9PSAw\nKSB7CiAgICAgICAgICAgICAgICBjYi5wcm9jZXNzUmVzdWx0KHN1Y2Nlc3NS\nYywgbnVsbCwgY29udGV4dCk7CiAgICAgICAgICAgIH0KICAgICAgICB9Cgog\nICAgICAgIHByaXZhdGUgdm9pZCB0aWNrKCkgewogICAgICAgICAgICBpZiAo\nZG9uZS5pbmNyZW1lbnRBbmRHZXQoKSA9PSBleHBlY3RlZCkgewogICAgICAg\nICAgICAgICAgaWYgKGV4Y2VwdGlvbnMuaXNFbXB0eSgpKSB7CiAgICAgICAg\nICAgICAgICAgICAgY2IucHJvY2Vzc1Jlc3VsdChzdWNjZXNzUmMsIG51bGws\nIGNvbnRleHQpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAg\nICAgICAgICAgICBjYi5wcm9jZXNzUmVzdWx0KGZhaWx1cmVSYywgbnVsbCwg\nY29udGV4dCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAg\nICAgICB9CgogICAgICAgIEBPdmVycmlkZQogICAgICAgIHB1YmxpYyB2b2lk\nIHByb2Nlc3NSZXN1bHQoaW50IHJjLCBTdHJpbmcgcGF0aCwgT2JqZWN0IGN0\neCkgewogICAgICAgICAgICBpZiAocmMgIT0gc3VjY2Vzc1JjKSB7CiAgICAg\nICAgICAgICAgICBMT0cuZXJyb3IoIkVycm9yIGluIG11bHRpIGNhbGxiYWNr\nIDogIiArIHJjKTsKICAgICAgICAgICAgICAgIGV4Y2VwdGlvbnMuYWRkKHJj\nKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aWNrKCk7CiAgICAgICAg\nfQoKICAgIH0KCiAgICAvKioKICAgICAqIFByb2Nlc3NvciB0byBwcm9jZXNz\nIGEgc3BlY2lmaWMgZWxlbWVudAogICAgICovCiAgICBwdWJsaWMgc3RhdGlj\nIGludGVyZmFjZSBQcm9jZXNzb3I8VD4gewogICAgICAgIC8qKgogICAgICAg\nICAqIFByb2Nlc3MgYSBzcGVjaWZpYyBlbGVtZW50CiAgICAgICAgICoKICAg\nICAgICAgKiBAcGFyYW0gZGF0YQogICAgICAgICAqICAgICAgICAgIGRhdGEg\ndG8gcHJvY2VzcwogICAgICAgICAqIEBwYXJhbSBpdGVyYXRpb25DYWxsYmFj\nawogICAgICAgICAqICAgICAgICAgIENhbGxiYWNrIHRvIGludm9rZSB3aGVu\nIHByb2Nlc3MgaGFzIGJlZW4gZG9uZS4KICAgICAgICAgKi8KICAgICAgICBw\ndWJsaWMgdm9pZCBwcm9jZXNzKFQgZGF0YSwgQXN5bmNDYWxsYmFjay5Wb2lk\nQ2FsbGJhY2sgY2IpOwogICAgfQoKfQo=\n","encoding":"base64"}

