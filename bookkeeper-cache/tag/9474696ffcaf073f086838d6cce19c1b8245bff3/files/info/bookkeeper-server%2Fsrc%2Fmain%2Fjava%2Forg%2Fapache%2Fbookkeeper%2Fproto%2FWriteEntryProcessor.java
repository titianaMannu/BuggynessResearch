{"sha":"719c937dea9baefc44edd87b85026ef37439b25f","node_id":"MDQ6QmxvYjE1NzU5NTY6NzE5YzkzN2RlYTliYWVmYzQ0ZWRkODdiODUwMjZlZjM3NDM5YjI1Zg==","size":4174,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/719c937dea9baefc44edd87b85026ef37439b25f","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIucHJvdG87CgppbXBvcnQgamF2\nYS5pby5JT0V4Y2VwdGlvbjsKCmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVw\nZXIuYm9va2llLkJvb2tpZUV4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUu\nYm9va2tlZXBlci5uZXQuQm9va2llU29ja2V0QWRkcmVzczsKaW1wb3J0IG9y\nZy5hcGFjaGUuYm9va2tlZXBlci5wcm90by5Cb29raWVQcm90b2NvbC5SZXF1\nZXN0OwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLnByb3RvLkJvb2tr\nZWVwZXJJbnRlcm5hbENhbGxiYWNrcy5Xcml0ZUNhbGxiYWNrOwppbXBvcnQg\nb3JnLmFwYWNoZS5ib29ra2VlcGVyLnV0aWwuTWF0aFV0aWxzOwppbXBvcnQg\nb3JnLmpib3NzLm5ldHR5LmNoYW5uZWwuQ2hhbm5lbDsKaW1wb3J0IG9yZy5z\nbGY0ai5Mb2dnZXI7CmltcG9ydCBvcmcuc2xmNGouTG9nZ2VyRmFjdG9yeTsK\nCi8qKgogKiBQcm9jZXNzZXMgYWRkIGVudHJ5IHJlcXVlc3RzCiAqLwpjbGFz\ncyBXcml0ZUVudHJ5UHJvY2Vzc29yIGV4dGVuZHMgUGFja2V0UHJvY2Vzc29y\nQmFzZSBpbXBsZW1lbnRzIFdyaXRlQ2FsbGJhY2sgewoKICAgIHByaXZhdGUg\nZmluYWwgc3RhdGljIExvZ2dlciBMT0cgPSBMb2dnZXJGYWN0b3J5LmdldExv\nZ2dlcihXcml0ZUVudHJ5UHJvY2Vzc29yLmNsYXNzKTsKCiAgICBsb25nIHN0\nYXJ0VGltZU5hbm9zOwoKICAgIHB1YmxpYyBXcml0ZUVudHJ5UHJvY2Vzc29y\nKFJlcXVlc3QgcmVxdWVzdCwgQ2hhbm5lbCBjaGFubmVsLAogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgQm9va2llUmVxdWVzdFByb2Nlc3NvciBy\nZXF1ZXN0UHJvY2Vzc29yKSB7CiAgICAgICAgc3VwZXIocmVxdWVzdCwgY2hh\nbm5lbCwgcmVxdWVzdFByb2Nlc3Nvcik7CiAgICB9CgogICAgQE92ZXJyaWRl\nCiAgICBwcm90ZWN0ZWQgdm9pZCBwcm9jZXNzUGFja2V0KCkgewogICAgICAg\nIGFzc2VydCAocmVxdWVzdCBpbnN0YW5jZW9mIEJvb2tpZVByb3RvY29sLkFk\nZFJlcXVlc3QpOwogICAgICAgIEJvb2tpZVByb3RvY29sLkFkZFJlcXVlc3Qg\nYWRkID0gKEJvb2tpZVByb3RvY29sLkFkZFJlcXVlc3QpIHJlcXVlc3Q7Cgog\nICAgICAgIGlmIChyZXF1ZXN0UHJvY2Vzc29yLmJvb2tpZS5pc1JlYWRPbmx5\nKCkpIHsKICAgICAgICAgICAgTE9HLndhcm4oIkJvb2tpZVNlcnZlciBpcyBy\ndW5uaW5nIGluIHJlYWRvbmx5IG1vZGUsIgogICAgICAgICAgICAgICAgICAg\nICsgIiBzbyByZWplY3RpbmcgdGhlIHJlcXVlc3QgZnJvbSB0aGUgY2xpZW50\nISIpOwogICAgICAgICAgICBzZW5kUmVzcG9uc2UoQm9va2llUHJvdG9jb2wu\nRVJFQURPTkxZLAogICAgICAgICAgICAgICAgICAgICAgICAgUmVzcG9uc2VC\ndWlsZGVyLmJ1aWxkRXJyb3JSZXNwb25zZShCb29raWVQcm90b2NvbC5FUkVB\nRE9OTFksIGFkZCksCiAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0\nUHJvY2Vzc29yLmFkZFJlcXVlc3RTdGF0cyk7CiAgICAgICAgICAgIHJldHVy\nbjsKICAgICAgICB9CgogICAgICAgIHN0YXJ0VGltZU5hbm9zID0gTWF0aFV0\naWxzLm5vd0luTmFubygpOwogICAgICAgIGludCByYyA9IEJvb2tpZVByb3Rv\nY29sLkVPSzsKICAgICAgICB0cnkgewogICAgICAgICAgICBpZiAoYWRkLmlz\nUmVjb3ZlcnlBZGQoKSkgewogICAgICAgICAgICAgICAgcmVxdWVzdFByb2Nl\nc3Nvci5ib29raWUucmVjb3ZlcnlBZGRFbnRyeShhZGQuZ2V0RGF0YUFzQnl0\nZUJ1ZmZlcigpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICB0aGlzLCBjaGFubmVsLCBhZGQuZ2V0\nTWFzdGVyS2V5KCkpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAg\nICAgICAgcmVxdWVzdFByb2Nlc3Nvci5ib29raWUuYWRkRW50cnkoYWRkLmdl\ndERhdGFBc0J5dGVCdWZmZXIoKSwKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsIGNoYW5uZWwsIGFkZC5n\nZXRNYXN0ZXJLZXkoKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGNhdGNo\nIChJT0V4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIExPRy5lcnJvcigiRXJy\nb3Igd3JpdGluZyAiICsgYWRkLCBlKTsKICAgICAgICAgICAgcmMgPSBCb29r\naWVQcm90b2NvbC5FSU87CiAgICAgICAgfSBjYXRjaCAoQm9va2llRXhjZXB0\naW9uLkxlZGdlckZlbmNlZEV4Y2VwdGlvbiBsZmUpIHsKICAgICAgICAgICAg\nTE9HLmVycm9yKCJBdHRlbXB0IHRvIHdyaXRlIHRvIGZlbmNlZCBsZWRnZXIi\nLCBsZmUpOwogICAgICAgICAgICByYyA9IEJvb2tpZVByb3RvY29sLkVGRU5D\nRUQ7CiAgICAgICAgfSBjYXRjaCAoQm9va2llRXhjZXB0aW9uIGUpIHsKICAg\nICAgICAgICAgTE9HLmVycm9yKCJVbmF1dGhvcml6ZWQgYWNjZXNzIHRvIGxl\nZGdlciAiICsgYWRkLmdldExlZGdlcklkKCksIGUpOwogICAgICAgICAgICBy\nYyA9IEJvb2tpZVByb3RvY29sLkVVQTsKICAgICAgICB9CiAgICAgICAgaWYg\nKHJjICE9IEJvb2tpZVByb3RvY29sLkVPSykgewogICAgICAgICAgICByZXF1\nZXN0UHJvY2Vzc29yLmFkZEVudHJ5U3RhdHMucmVnaXN0ZXJGYWlsZWRFdmVu\ndChNYXRoVXRpbHMuZWxhcHNlZE1TZWMoc3RhcnRUaW1lTmFub3MpKTsKICAg\nICAgICAgICAgc2VuZFJlc3BvbnNlKHJjLAogICAgICAgICAgICAgICAgICAg\nICAgICAgUmVzcG9uc2VCdWlsZGVyLmJ1aWxkRXJyb3JSZXNwb25zZShyYywg\nYWRkKSwKICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RQcm9jZXNz\nb3IuYWRkUmVxdWVzdFN0YXRzKTsKICAgICAgICB9CiAgICB9CgogICAgQE92\nZXJyaWRlCiAgICBwdWJsaWMgdm9pZCB3cml0ZUNvbXBsZXRlKGludCByYywg\nbG9uZyBsZWRnZXJJZCwgbG9uZyBlbnRyeUlkLAogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICBCb29raWVTb2NrZXRBZGRyZXNzIGFkZHIsIE9iamVj\ndCBjdHgpIHsKICAgICAgICBpZiAoQm9va2llUHJvdG9jb2wuRU9LID09IHJj\nKSB7CiAgICAgICAgICAgIHJlcXVlc3RQcm9jZXNzb3IuYWRkRW50cnlTdGF0\ncy5yZWdpc3RlclN1Y2Nlc3NmdWxFdmVudChNYXRoVXRpbHMuZWxhcHNlZE1T\nZWMoc3RhcnRUaW1lTmFub3MpKTsKICAgICAgICB9IGVsc2UgewogICAgICAg\nICAgICByZXF1ZXN0UHJvY2Vzc29yLmFkZEVudHJ5U3RhdHMucmVnaXN0ZXJG\nYWlsZWRFdmVudChNYXRoVXRpbHMuZWxhcHNlZE1TZWMoc3RhcnRUaW1lTmFu\nb3MpKTsKICAgICAgICB9CiAgICAgICAgc2VuZFJlc3BvbnNlKHJjLAogICAg\nICAgICAgICAgICAgICAgICBSZXNwb25zZUJ1aWxkZXIuYnVpbGRBZGRSZXNw\nb25zZShyZXF1ZXN0KSwKICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFBy\nb2Nlc3Nvci5hZGRSZXF1ZXN0U3RhdHMpOwogICAgfQp9Cg==\n","encoding":"base64"}

