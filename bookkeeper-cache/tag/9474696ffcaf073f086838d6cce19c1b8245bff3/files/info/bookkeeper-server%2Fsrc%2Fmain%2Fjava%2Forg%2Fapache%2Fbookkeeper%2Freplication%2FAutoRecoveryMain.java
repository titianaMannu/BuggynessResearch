{"sha":"dd08f71b6274e9ec22f9d8770a7779f6fceca095","node_id":"MDQ6QmxvYjE1NzU5NTY6ZGQwOGY3MWI2Mjc0ZTllYzIyZjlkODc3MGE3Nzc5ZjZmY2VjYTA5NQ==","size":10426,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/dd08f71b6274e9ec22f9d8770a7779f6fceca095","content":"LyoqCiAqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91\nbmRhdGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRv\nciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAq\nIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGlu\nZm9ybWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRo\nZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5z\nZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21w\nbGlhbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBh\nIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICBodHRwOi8vd3d3LmFw\nYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJl\ncXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0\naW5nLAogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5z\nZSBpcyBkaXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRI\nT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwg\nZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBm\nb3IgdGhlCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNz\naW9ucyBhbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAq\nCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci5yZXBsaWNhdGlv\nbjsKCmltcG9ydCBqYXZhLmlvLkZpbGU7CmltcG9ydCBqYXZhLmlvLklPRXhj\nZXB0aW9uOwppbXBvcnQgamF2YS5uZXQuTWFsZm9ybWVkVVJMRXhjZXB0aW9u\nOwoKaW1wb3J0IGNvbS5nb29nbGUuY29tbW9uLmFubm90YXRpb25zLlZpc2li\nbGVGb3JUZXN0aW5nOwoKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5i\nb29raWUuQm9va2llOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmJv\nb2tpZS5Cb29raWVDcml0aWNhbFRocmVhZDsKaW1wb3J0IG9yZy5hcGFjaGUu\nYm9va2tlZXBlci5ib29raWUuRXhpdENvZGU7CmltcG9ydCBvcmcuYXBhY2hl\nLmJvb2trZWVwZXIuY29uZi5TZXJ2ZXJDb25maWd1cmF0aW9uOwppbXBvcnQg\nb3JnLmFwYWNoZS5ib29ra2VlcGVyLnJlcGxpY2F0aW9uLlJlcGxpY2F0aW9u\nRXhjZXB0aW9uLkNvbXBhdGliaWxpdHlFeGNlcHRpb247CmltcG9ydCBvcmcu\nYXBhY2hlLmJvb2trZWVwZXIucmVwbGljYXRpb24uUmVwbGljYXRpb25FeGNl\ncHRpb24uVW5hdmFpbGFibGVFeGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hl\nLmJvb2trZWVwZXIuc3RhdHMuTnVsbFN0YXRzTG9nZ2VyOwppbXBvcnQgb3Jn\nLmFwYWNoZS5ib29ra2VlcGVyLnN0YXRzLlN0YXRzTG9nZ2VyOwppbXBvcnQg\nb3JnLmFwYWNoZS5ib29ra2VlcGVyLnV0aWwuWmtVdGlsczsKaW1wb3J0IG9y\nZy5hcGFjaGUuYm9va2tlZXBlci56b29rZWVwZXIuWm9vS2VlcGVyV2F0Y2hl\nckJhc2U7CmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMuY2xpLkJhc2ljUGFy\nc2VyOwppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNsaS5Db21tYW5kTGlu\nZTsKaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jbGkuSGVscEZvcm1hdHRl\ncjsKaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jbGkuT3B0aW9uczsKaW1w\nb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jbGkuUGFyc2VFeGNlcHRpb247Cmlt\ncG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMuY29uZmlndXJhdGlvbi5Db25maWd1\ncmF0aW9uRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS56b29rZWVwZXIu\nS2VlcGVyRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS56b29rZWVwZXIu\nV2F0Y2hlZEV2ZW50OwppbXBvcnQgb3JnLmFwYWNoZS56b29rZWVwZXIuV2F0\nY2hlcjsKaW1wb3J0IG9yZy5hcGFjaGUuem9va2VlcGVyLlpvb0tlZXBlcjsK\naW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXI7CmltcG9ydCBvcmcuc2xmNGouTG9n\nZ2VyRmFjdG9yeTsKCmltcG9ydCBzdGF0aWMgb3JnLmFwYWNoZS5ib29ra2Vl\ncGVyLnJlcGxpY2F0aW9uLlJlcGxpY2F0aW9uU3RhdHMuQVVESVRPUl9TQ09Q\nRTsKaW1wb3J0IHN0YXRpYyBvcmcuYXBhY2hlLmJvb2trZWVwZXIucmVwbGlj\nYXRpb24uUmVwbGljYXRpb25TdGF0cy5SRVBMSUNBVElPTl9XT1JLRVJfU0NP\nUEU7CgovKioKICogQ2xhc3MgdG8gc3RhcnQvc3RvcCB0aGUgQXV0b1JlY292\nZXJ5IGRhZW1vbnMgQXVkaXRvciBhbmQgUmVwbGljYXRpb25Xb3JrZXIKICov\nCnB1YmxpYyBjbGFzcyBBdXRvUmVjb3ZlcnlNYWluIHsKICAgIHByaXZhdGUg\nc3RhdGljIGZpbmFsIExvZ2dlciBMT0cgPSBMb2dnZXJGYWN0b3J5CiAgICAg\nICAgICAgIC5nZXRMb2dnZXIoQXV0b1JlY292ZXJ5TWFpbi5jbGFzcyk7Cgog\nICAgcHJpdmF0ZSBTZXJ2ZXJDb25maWd1cmF0aW9uIGNvbmY7CiAgICBab29L\nZWVwZXIgems7CiAgICBBdWRpdG9yRWxlY3RvciBhdWRpdG9yRWxlY3RvcjsK\nICAgIFJlcGxpY2F0aW9uV29ya2VyIHJlcGxpY2F0aW9uV29ya2VyOwogICAg\ncHJpdmF0ZSBBdXRvUmVjb3ZlcnlEZWF0aFdhdGNoZXIgZGVhdGhXYXRjaGVy\nOwogICAgcHJpdmF0ZSBpbnQgZXhpdENvZGU7CiAgICBwcml2YXRlIHZvbGF0\naWxlIGJvb2xlYW4gc2h1dHRpbmdEb3duID0gZmFsc2U7CiAgICBwcml2YXRl\nIHZvbGF0aWxlIGJvb2xlYW4gcnVubmluZyA9IGZhbHNlOwoKICAgIHB1Ymxp\nYyBBdXRvUmVjb3ZlcnlNYWluKFNlcnZlckNvbmZpZ3VyYXRpb24gY29uZikg\ndGhyb3dzIElPRXhjZXB0aW9uLAogICAgICAgICAgICBJbnRlcnJ1cHRlZEV4\nY2VwdGlvbiwgS2VlcGVyRXhjZXB0aW9uLCBVbmF2YWlsYWJsZUV4Y2VwdGlv\nbiwKICAgICAgICAgICAgQ29tcGF0aWJpbGl0eUV4Y2VwdGlvbiB7CiAgICAg\nICAgdGhpcyhjb25mLCBOdWxsU3RhdHNMb2dnZXIuSU5TVEFOQ0UpOwogICAg\nfQoKICAgIHB1YmxpYyBBdXRvUmVjb3ZlcnlNYWluKFNlcnZlckNvbmZpZ3Vy\nYXRpb24gY29uZiwgU3RhdHNMb2dnZXIgc3RhdHNMb2dnZXIpCiAgICAgICAg\nICAgIHRocm93cyBJT0V4Y2VwdGlvbiwgSW50ZXJydXB0ZWRFeGNlcHRpb24s\nIEtlZXBlckV4Y2VwdGlvbiwgVW5hdmFpbGFibGVFeGNlcHRpb24sCiAgICAg\nICAgICAgIENvbXBhdGliaWxpdHlFeGNlcHRpb24gewogICAgICAgIHRoaXMu\nY29uZiA9IGNvbmY7CiAgICAgICAgWm9vS2VlcGVyV2F0Y2hlckJhc2UgdyA9\nIG5ldyBab29LZWVwZXJXYXRjaGVyQmFzZShjb25mLmdldFprVGltZW91dCgp\nKSB7CiAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICBwdWJsaWMg\ndm9pZCBwcm9jZXNzKFdhdGNoZWRFdmVudCBldmVudCkgewogICAgICAgICAg\nICAgICAgLy8gQ2hlY2sgZm9yIGV4cGlyZWQgY29ubmVjdGlvbi4KICAgICAg\nICAgICAgICAgIGlmIChldmVudC5nZXRTdGF0ZSgpLmVxdWFscyhXYXRjaGVy\nLkV2ZW50LktlZXBlclN0YXRlLkV4cGlyZWQpKSB7CiAgICAgICAgICAgICAg\nICAgICAgTE9HLmVycm9yKCJaSyBjbGllbnQgY29ubmVjdGlvbiB0byB0aGUi\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICArICIgWksgc2VydmVyIGhh\ncyBleHBpcmVkISIpOwogICAgICAgICAgICAgICAgICAgIHNodXRkb3duKEV4\naXRDb2RlLlpLX0VYUElSRUQpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsK\nICAgICAgICAgICAgICAgICAgICBzdXBlci5wcm9jZXNzKGV2ZW50KTsKICAg\nICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAg\nICAgemsgPSBaa1V0aWxzLmNyZWF0ZUNvbm5lY3RlZFpvb2tlZXBlckNsaWVu\ndChjb25mLmdldFprU2VydmVycygpLCB3KTsKICAgICAgICBhdWRpdG9yRWxl\nY3RvciA9IG5ldyBBdWRpdG9yRWxlY3RvcihCb29raWUuZ2V0Qm9va2llQWRk\ncmVzcyhjb25mKS50b1N0cmluZygpLCBjb25mLAogICAgICAgICAgICAgICAg\nemssIHN0YXRzTG9nZ2VyLnNjb3BlKEFVRElUT1JfU0NPUEUpKTsKICAgICAg\nICByZXBsaWNhdGlvbldvcmtlciA9IG5ldyBSZXBsaWNhdGlvbldvcmtlcih6\naywgY29uZiwKICAgICAgICAgICAgICAgIEJvb2tpZS5nZXRCb29raWVBZGRy\nZXNzKGNvbmYpLCBzdGF0c0xvZ2dlci5zY29wZShSRVBMSUNBVElPTl9XT1JL\nRVJfU0NPUEUpKTsKICAgICAgICBkZWF0aFdhdGNoZXIgPSBuZXcgQXV0b1Jl\nY292ZXJ5RGVhdGhXYXRjaGVyKHRoaXMpOwogICAgfQoKICAgIC8qCiAgICAg\nKiBTdGFydCBkYWVtb25zCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHN0YXJ0\nKCkgdGhyb3dzIFVuYXZhaWxhYmxlRXhjZXB0aW9uIHsKICAgICAgICBhdWRp\ndG9yRWxlY3Rvci5zdGFydCgpOwogICAgICAgIHJlcGxpY2F0aW9uV29ya2Vy\nLnN0YXJ0KCk7CiAgICAgICAgZGVhdGhXYXRjaGVyLnN0YXJ0KCk7CiAgICAg\nICAgcnVubmluZyA9IHRydWU7CiAgICB9CgogICAgLyoKICAgICAqIFdhaXRz\nIHRpbGwgYWxsIGRhZW1vbnMgam9pbnMKICAgICAqLwogICAgcHVibGljIHZv\naWQgam9pbigpIHRocm93cyBJbnRlcnJ1cHRlZEV4Y2VwdGlvbiB7CiAgICAg\nICAgZGVhdGhXYXRjaGVyLmpvaW4oKTsKICAgIH0KCiAgICAvKgogICAgICog\nU2h1dGRvd24gYWxsIGRhZW1vbnMgZ3JhY2VmdWxseQogICAgICovCiAgICBw\ndWJsaWMgdm9pZCBzaHV0ZG93bigpIHsKICAgICAgICBzaHV0ZG93bihFeGl0\nQ29kZS5PSyk7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIHNodXRkb3duKGlu\ndCBleGl0Q29kZSkgewogICAgICAgIGlmIChzaHV0dGluZ0Rvd24pIHsKICAg\nICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBMT0cuaW5mbygi\nU2h1dHRpbmcgZG93biBBdXRvUmVjb3ZlcnkiKTsKICAgICAgICBzaHV0dGlu\nZ0Rvd24gPSB0cnVlOwogICAgICAgIHJ1bm5pbmcgPSBmYWxzZTsKICAgICAg\nICB0aGlzLmV4aXRDb2RlID0gZXhpdENvZGU7CiAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgZGVhdGhXYXRjaGVyLmludGVycnVwdCgpOwogICAgICAgICAg\nICBkZWF0aFdhdGNoZXIuam9pbigpOwogICAgICAgIH0gY2F0Y2ggKEludGVy\ncnVwdGVkRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgVGhyZWFkLmN1cnJl\nbnRUaHJlYWQoKS5pbnRlcnJ1cHQoKTsKICAgICAgICAgICAgTE9HLndhcm4o\nIkludGVycnVwdGVkIHNodXR0aW5nIGRvd24gYXV0byByZWNvdmVyeSIsIGUp\nOwogICAgICAgIH0KCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgYXVkaXRv\nckVsZWN0b3Iuc2h1dGRvd24oKTsKICAgICAgICB9IGNhdGNoIChJbnRlcnJ1\ncHRlZEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIFRocmVhZC5jdXJyZW50\nVGhyZWFkKCkuaW50ZXJydXB0KCk7CiAgICAgICAgICAgIExPRy53YXJuKCJJ\nbnRlcnJ1cHRlZCBzaHV0dGluZyBkb3duIGF1ZGl0b3IgZWxlY3RvciIsIGUp\nOwogICAgICAgIH0KICAgICAgICByZXBsaWNhdGlvbldvcmtlci5zaHV0ZG93\nbigpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHprLmNsb3NlKCk7CiAg\nICAgICAgfSBjYXRjaCAoSW50ZXJydXB0ZWRFeGNlcHRpb24gZSkgewogICAg\nICAgICAgICBUaHJlYWQuY3VycmVudFRocmVhZCgpLmludGVycnVwdCgpOwog\nICAgICAgICAgICBMT0cud2FybigiSW50ZXJydXB0ZWQgc2h1dHRpbmcgZG93\nbiBhdXRvIHJlY292ZXJ5IiwgZSk7CiAgICAgICAgfQogICAgfQoKICAgIHBy\naXZhdGUgaW50IGdldEV4aXRDb2RlKCkgewogICAgICAgIHJldHVybiBleGl0\nQ29kZTsKICAgIH0KCiAgICBAVmlzaWJsZUZvclRlc3RpbmcKICAgIHB1Ymxp\nYyBBdWRpdG9yIGdldEF1ZGl0b3IoKSB7CiAgICAgICAgcmV0dXJuIGF1ZGl0\nb3JFbGVjdG9yLmdldEF1ZGl0b3IoKTsKICAgIH0KCiAgICAvKiogSXMgYXV0\nby1yZWNvdmVyeSBzZXJ2aWNlIHJ1bm5pbmc/ICovCiAgICBwdWJsaWMgYm9v\nbGVhbiBpc0F1dG9SZWNvdmVyeVJ1bm5pbmcoKSB7CiAgICAgICAgcmV0dXJu\nIHJ1bm5pbmc7CiAgICB9CgogICAgLyoKICAgICAqIERlYXRoV2F0Y2hlciBm\nb3IgQXV0b1JlY292ZXJ5IGRhZW1vbnMuCiAgICAgKi8KICAgIHByaXZhdGUg\nc3RhdGljIGNsYXNzIEF1dG9SZWNvdmVyeURlYXRoV2F0Y2hlciBleHRlbmRz\nIEJvb2tpZUNyaXRpY2FsVGhyZWFkIHsKICAgICAgICBwcml2YXRlIGludCB3\nYXRjaEludGVydmFsOwogICAgICAgIHByaXZhdGUgQXV0b1JlY292ZXJ5TWFp\nbiBhdXRvUmVjb3ZlcnlNYWluOwoKICAgICAgICBwdWJsaWMgQXV0b1JlY292\nZXJ5RGVhdGhXYXRjaGVyKEF1dG9SZWNvdmVyeU1haW4gYXV0b1JlY292ZXJ5\nTWFpbikgewogICAgICAgICAgICBzdXBlcigiQXV0b1JlY292ZXJ5RGVhdGhX\nYXRjaGVyLSIKICAgICAgICAgICAgICAgICAgICArIGF1dG9SZWNvdmVyeU1h\naW4uY29uZi5nZXRCb29raWVQb3J0KCkpOwogICAgICAgICAgICB0aGlzLmF1\ndG9SZWNvdmVyeU1haW4gPSBhdXRvUmVjb3ZlcnlNYWluOwogICAgICAgICAg\nICB3YXRjaEludGVydmFsID0gYXV0b1JlY292ZXJ5TWFpbi5jb25mLmdldERl\nYXRoV2F0Y2hJbnRlcnZhbCgpOwogICAgICAgIH0KCiAgICAgICAgQE92ZXJy\naWRlCiAgICAgICAgcHVibGljIHZvaWQgcnVuKCkgewogICAgICAgICAgICB3\naGlsZSAodHJ1ZSkgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgICAgICAgICBUaHJlYWQuc2xlZXAod2F0Y2hJbnRlcnZhbCk7CiAgICAg\nICAgICAgICAgICB9IGNhdGNoIChJbnRlcnJ1cHRlZEV4Y2VwdGlvbiBpZSkg\newogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAg\nfQogICAgICAgICAgICAgICAgLy8gSWYgYW55IG9uZSBzZXJ2aWNlIG5vdCBy\ndW5uaW5nLCB0aGVuIHNodXRkb3duIHBlZXIuCiAgICAgICAgICAgICAgICBp\nZiAoIWF1dG9SZWNvdmVyeU1haW4uYXVkaXRvckVsZWN0b3IuaXNSdW5uaW5n\nKCkKICAgICAgICAgICAgICAgICAgICB8fCAhYXV0b1JlY292ZXJ5TWFpbi5y\nZXBsaWNhdGlvbldvcmtlci5pc1J1bm5pbmcoKSkgewogICAgICAgICAgICAg\nICAgICAgIGF1dG9SZWNvdmVyeU1haW4uc2h1dGRvd24oRXhpdENvZGUuU0VS\nVkVSX0VYQ0VQVElPTik7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAg\nICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9\nCgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgT3B0aW9ucyBvcHRzID0gbmV3\nIE9wdGlvbnMoKTsKICAgIHN0YXRpYyB7CiAgICAgICAgb3B0cy5hZGRPcHRp\nb24oImMiLCAiY29uZiIsIHRydWUsICJCb29raWUgc2VydmVyIGNvbmZpZ3Vy\nYXRpb24iKTsKICAgICAgICBvcHRzLmFkZE9wdGlvbigiaCIsICJoZWxwIiwg\nZmFsc2UsICJQcmludCBoZWxwIG1lc3NhZ2UiKTsKICAgIH0KCiAgICAvKgog\nICAgICogUHJpbnQgdXNhZ2UKICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMg\ndm9pZCBwcmludFVzYWdlKCkgewogICAgICAgIEhlbHBGb3JtYXR0ZXIgaGYg\nPSBuZXcgSGVscEZvcm1hdHRlcigpOwogICAgICAgIGhmLnByaW50SGVscCgi\nQXV0b1JlY292ZXJ5TWFpbiBbb3B0aW9uc11cbiIsIG9wdHMpOwogICAgfQoK\nICAgIC8qCiAgICAgKiBsb2FkIGNvbmZpZ3VyYXRpb25zIGZyb20gZmlsZS4K\nICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCBsb2FkQ29uZkZpbGUo\nU2VydmVyQ29uZmlndXJhdGlvbiBjb25mLCBTdHJpbmcgY29uZkZpbGUpCiAg\nICAgICAgICAgIHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gewog\nICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNvbmYubG9hZENvbmYobmV3IEZp\nbGUoY29uZkZpbGUpLnRvVVJJKCkudG9VUkwoKSk7CiAgICAgICAgfSBjYXRj\naCAoTWFsZm9ybWVkVVJMRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgTE9H\nLmVycm9yKCJDb3VsZCBub3Qgb3BlbiBjb25maWd1cmF0aW9uIGZpbGU6ICIg\nKyBjb25mRmlsZSwgZSk7CiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2Fs\nQXJndW1lbnRFeGNlcHRpb24oKTsKICAgICAgICB9IGNhdGNoIChDb25maWd1\ncmF0aW9uRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgTE9HLmVycm9yKCJN\nYWxmb3JtZWQgY29uZmlndXJhdGlvbiBmaWxlOiAiICsgY29uZkZpbGUsIGUp\nOwogICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0\naW9uKCk7CiAgICAgICAgfQogICAgICAgIExPRy5pbmZvKCJVc2luZyBjb25m\naWd1cmF0aW9uIGZpbGUgIiArIGNvbmZGaWxlKTsKICAgIH0KCiAgICAvKgog\nICAgICogUGFyc2UgY29uc29sZSBhcmdzCiAgICAgKi8KICAgIHByaXZhdGUg\nc3RhdGljIFNlcnZlckNvbmZpZ3VyYXRpb24gcGFyc2VBcmdzKFN0cmluZ1td\nIGFyZ3MpCiAgICAgICAgICAgIHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNl\ncHRpb24gewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIEJhc2ljUGFyc2Vy\nIHBhcnNlciA9IG5ldyBCYXNpY1BhcnNlcigpOwogICAgICAgICAgICBDb21t\nYW5kTGluZSBjbWRMaW5lID0gcGFyc2VyLnBhcnNlKG9wdHMsIGFyZ3MpOwoK\nICAgICAgICAgICAgaWYgKGNtZExpbmUuaGFzT3B0aW9uKCdoJykpIHsKICAg\nICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRp\nb24oKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgU2VydmVyQ29uZmln\ndXJhdGlvbiBjb25mID0gbmV3IFNlcnZlckNvbmZpZ3VyYXRpb24oKTsKICAg\nICAgICAgICAgU3RyaW5nW10gbGVmdEFyZ3MgPSBjbWRMaW5lLmdldEFyZ3Mo\nKTsKCiAgICAgICAgICAgIGlmIChjbWRMaW5lLmhhc09wdGlvbignYycpKSB7\nCiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBsZWZ0QXJncyAmJiBsZWZ0\nQXJncy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cg\nbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigpOwogICAgICAgICAgICAg\nICAgfQogICAgICAgICAgICAgICAgU3RyaW5nIGNvbmZGaWxlID0gY21kTGlu\nZS5nZXRPcHRpb25WYWx1ZSgiYyIpOwogICAgICAgICAgICAgICAgbG9hZENv\nbmZGaWxlKGNvbmYsIGNvbmZGaWxlKTsKICAgICAgICAgICAgfQoKICAgICAg\nICAgICAgaWYgKG51bGwgIT0gbGVmdEFyZ3MgJiYgbGVmdEFyZ3MubGVuZ3Ro\nID4gMCkgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1\nbWVudEV4Y2VwdGlvbigpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJl\ndHVybiBjb25mOwogICAgICAgIH0gY2F0Y2ggKFBhcnNlRXhjZXB0aW9uIGUp\nIHsKICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2Vw\ndGlvbihlKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHN0YXRpYyB2\nb2lkIG1haW4oU3RyaW5nW10gYXJncykgewogICAgICAgIFNlcnZlckNvbmZp\nZ3VyYXRpb24gY29uZiA9IG51bGw7CiAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgY29uZiA9IHBhcnNlQXJncyhhcmdzKTsKICAgICAgICB9IGNhdGNoIChJ\nbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWFlKSB7CiAgICAgICAgICAgIExP\nRy5lcnJvcigiRXJyb3IgcGFyc2luZyBjb21tYW5kIGxpbmUgYXJndW1lbnRz\nIDogIiwgaWFlKTsKICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKGlh\nZS5nZXRNZXNzYWdlKCkpOwogICAgICAgICAgICBwcmludFVzYWdlKCk7CiAg\nICAgICAgICAgIFN5c3RlbS5leGl0KEV4aXRDb2RlLklOVkFMSURfQ09ORik7\nCiAgICAgICAgfQoKICAgICAgICB0cnkgewogICAgICAgICAgICBmaW5hbCBB\ndXRvUmVjb3ZlcnlNYWluIGF1dG9SZWNvdmVyeU1haW4gPSBuZXcgQXV0b1Jl\nY292ZXJ5TWFpbihjb25mKTsKICAgICAgICAgICAgYXV0b1JlY292ZXJ5TWFp\nbi5zdGFydCgpOwogICAgICAgICAgICBSdW50aW1lLmdldFJ1bnRpbWUoKS5h\nZGRTaHV0ZG93bkhvb2sobmV3IFRocmVhZCgpIHsKICAgICAgICAgICAgICAg\nIEBPdmVycmlkZQogICAgICAgICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkg\newogICAgICAgICAgICAgICAgICAgIGF1dG9SZWNvdmVyeU1haW4uc2h1dGRv\nd24oKTsKICAgICAgICAgICAgICAgICAgICBMT0cuaW5mbygiU2h1dGRvd24g\nQXV0b1JlY292ZXJ5TWFpbiBzdWNjZXNzZnVsbHkiKTsKICAgICAgICAgICAg\nICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIExPRy5pbmZvKCJS\nZWdpc3RlciBzaHV0ZG93biBob29rIHN1Y2Nlc3NmdWxseSIpOwogICAgICAg\nICAgICBhdXRvUmVjb3ZlcnlNYWluLmpvaW4oKTsKICAgICAgICAgICAgU3lz\ndGVtLmV4aXQoYXV0b1JlY292ZXJ5TWFpbi5nZXRFeGl0Q29kZSgpKTsKICAg\nICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBMT0cu\nZXJyb3IoIkV4Y2VwdGlvbiBydW5uaW5nIEF1dG9SZWNvdmVyeU1haW4gOiAi\nLCBlKTsKICAgICAgICAgICAgU3lzdGVtLmV4aXQoRXhpdENvZGUuU0VSVkVS\nX0VYQ0VQVElPTik7CiAgICAgICAgfQogICAgfQp9Cg==\n","encoding":"base64"}

