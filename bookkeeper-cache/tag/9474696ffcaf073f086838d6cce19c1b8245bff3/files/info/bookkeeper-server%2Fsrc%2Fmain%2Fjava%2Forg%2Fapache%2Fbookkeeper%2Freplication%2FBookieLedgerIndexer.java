{"sha":"1b4efafc1f40c5769fb4c9515aecc666e0d7d755","node_id":"MDQ6QmxvYjE1NzU5NTY6MWI0ZWZhZmMxZjQwYzU3NjlmYjRjOTUxNWFlY2M2NjZlMGQ3ZDc1NQ==","size":5867,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/1b4efafc1f40c5769fb4c9515aecc666e0d7d755","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIucmVwbGljYXRpb247CgppbXBv\ncnQgamF2YS51dGlsLkFycmF5TGlzdDsKaW1wb3J0IGphdmEudXRpbC5Db2xs\nZWN0aW9uczsKaW1wb3J0IGphdmEudXRpbC5IYXNoU2V0OwppbXBvcnQgamF2\nYS51dGlsLkxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuTWFwOwppbXBvcnQgamF2\nYS51dGlsLlNldDsKaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkNvbmN1\ncnJlbnRIYXNoTWFwOwppbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuQ291\nbnREb3duTGF0Y2g7CgppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNs\naWVudC5CS0V4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBl\nci5jbGllbnQuTGVkZ2VyTWV0YWRhdGE7CmltcG9ydCBvcmcuYXBhY2hlLmJv\nb2trZWVwZXIubWV0YS5MZWRnZXJNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNo\nZS5ib29ra2VlcGVyLm5ldC5Cb29raWVTb2NrZXRBZGRyZXNzOwppbXBvcnQg\nb3JnLmFwYWNoZS5ib29ra2VlcGVyLnByb3RvLkJvb2trZWVwZXJJbnRlcm5h\nbENhbGxiYWNrcy5HZW5lcmljQ2FsbGJhY2s7CmltcG9ydCBvcmcuYXBhY2hl\nLmJvb2trZWVwZXIucHJvdG8uQm9va2tlZXBlckludGVybmFsQ2FsbGJhY2tz\nLlByb2Nlc3NvcjsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5yZXBs\naWNhdGlvbi5SZXBsaWNhdGlvbkV4Y2VwdGlvbi5CS0F1ZGl0RXhjZXB0aW9u\nOwppbXBvcnQgb3JnLmFwYWNoZS56b29rZWVwZXIuQXN5bmNDYWxsYmFjazsK\naW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXI7CmltcG9ydCBvcmcuc2xmNGouTG9n\nZ2VyRmFjdG9yeTsKCi8qKgogKiBQcmVwYXJpbmcgYm9va2llIHZzIGl0cyBj\nb3JyZXNwb25kaW5nIGxlZGdlcnMuIFRoaXMgd2lsbCBhbHdheXMgbG9vayB1\ncCB0aGUKICogbGVkZ2VybWFuYWdlciBmb3IgbGVkZ2VyIG1ldGFkYXRhIGFu\nZCB3aWxsIGdlbmVyYXRlIGluZGV4ZXMuCiAqLwpwdWJsaWMgY2xhc3MgQm9v\na2llTGVkZ2VySW5kZXhlciB7CgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwg\nTG9nZ2VyIExPRyA9IExvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKEJvb2tpZUxl\nZGdlckluZGV4ZXIuY2xhc3MpOwogICAgcHJpdmF0ZSBmaW5hbCBMZWRnZXJN\nYW5hZ2VyIGxlZGdlck1hbmFnZXI7CgogICAgcHVibGljIEJvb2tpZUxlZGdl\nckluZGV4ZXIoTGVkZ2VyTWFuYWdlciBsZWRnZXJNYW5hZ2VyKSB7CiAgICAg\nICAgdGhpcy5sZWRnZXJNYW5hZ2VyID0gbGVkZ2VyTWFuYWdlcjsKICAgIH0K\nCiAgICAvKioKICAgICAqIEdlbmVyYXRpbmcgYm9va2llIHZzIGl0cyBsZWRn\nZXJzIG1hcCBieSByZWFkaW5nIGFsbCB0aGUgbGVkZ2VycyBpbiBlYWNoCiAg\nICAgKiBib29raWUgYW5kIHBhcnNpbmcgaXRzIG1ldGFkYXRhLgogICAgICoK\nICAgICAqIEByZXR1cm4gYm9va2llMmxlZGdlcnNNYXAgbWFwIG9mIGJvb2tp\nZSB2cyBsZWRnZXJzCiAgICAgKiBAdGhyb3dzIEJLQXVkaXRFeGNlcHRpb24K\nICAgICAqICAgICAgICAgICAgIGV4Y2VwdGlvbiB3aGlsZSBnZXR0aW5nIGJv\nb2tpZS1sZWRnZXJzCiAgICAgKi8KICAgIHB1YmxpYyBNYXA8U3RyaW5nLCBT\nZXQ8TG9uZz4+IGdldEJvb2tpZVRvTGVkZ2VySW5kZXgoKQogICAgICAgICAg\nICB0aHJvd3MgQktBdWRpdEV4Y2VwdGlvbiB7CiAgICAgICAgLy8gYm9va2ll\nIHZzIGxlZGdlcnMgbWFwCiAgICAgICAgZmluYWwgQ29uY3VycmVudEhhc2hN\nYXA8U3RyaW5nLCBTZXQ8TG9uZz4+IGJvb2tpZTJsZWRnZXJzTWFwCiAgICAg\nICAgICAgID0gbmV3IENvbmN1cnJlbnRIYXNoTWFwPFN0cmluZywgU2V0PExv\nbmc+PigpOwogICAgICAgIGZpbmFsIENvdW50RG93bkxhdGNoIGxlZGdlckNv\nbGxlY3RvckxhdGNoID0gbmV3IENvdW50RG93bkxhdGNoKDEpOwoKICAgICAg\nICBQcm9jZXNzb3I8TG9uZz4gbGVkZ2VyUHJvY2Vzc29yID0gbmV3IFByb2Nl\nc3NvcjxMb25nPigpIHsKICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAg\nICAgIHB1YmxpYyB2b2lkIHByb2Nlc3MoZmluYWwgTG9uZyBsZWRnZXJJZCwK\nICAgICAgICAgICAgICAgICAgICBmaW5hbCBBc3luY0NhbGxiYWNrLlZvaWRD\nYWxsYmFjayBpdGVyQ2FsbGJhY2spIHsKICAgICAgICAgICAgICAgIEdlbmVy\naWNDYWxsYmFjazxMZWRnZXJNZXRhZGF0YT4gZ2VuZXJpY0NhbGxiYWNrID0g\nbmV3IEdlbmVyaWNDYWxsYmFjazxMZWRnZXJNZXRhZGF0YT4oKSB7CiAgICAg\nICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICAgICAg\ncHVibGljIHZvaWQgb3BlcmF0aW9uQ29tcGxldGUoZmluYWwgaW50IHJjLAog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgTGVkZ2VyTWV0YWRhdGEgbGVk\nZ2VyTWV0YWRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJj\nID09IEJLRXhjZXB0aW9uLkNvZGUuT0spIHsKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgIGZvciAoTWFwLkVudHJ5PExvbmcsIEFycmF5TGlzdDxCb29r\naWVTb2NrZXRBZGRyZXNzPj4gZW5zZW1ibGUgOiBsZWRnZXJNZXRhZGF0YQog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0RW5zZW1i\nbGVzKCkuZW50cnlTZXQoKSkgewogICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIGZvciAoQm9va2llU29ja2V0QWRkcmVzcyBib29raWUgOiBlbnNl\nbWJsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nLmdldFZhbHVlKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgcHV0TGVkZ2VyKGJvb2tpZTJsZWRnZXJzTWFwLAogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9va2llLnRv\nU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICBsZWRnZXJJZCk7CiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAg\nICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgTE9HLndhcm4oIlVuYWJsZSB0byByZWFkIHRoZSBsZWRn\nZXI6IiArIGxlZGdlcklkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICsgIiBpbmZvcm1hdGlvbiIpOwogICAgICAgICAgICAgICAgICAg\nICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZXJDYWxsYmFjay5w\ncm9jZXNzUmVzdWx0KHJjLCBudWxsLCBudWxsKTsKICAgICAgICAgICAgICAg\nICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgbGVk\nZ2VyTWFuYWdlci5yZWFkTGVkZ2VyTWV0YWRhdGEobGVkZ2VySWQsIGdlbmVy\naWNDYWxsYmFjayk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAg\nIC8vIFJlYWRpbmcgdGhlIHJlc3VsdCBhZnRlciBwcm9jZXNzaW5nIGFsbCB0\naGUgbGVkZ2VycwogICAgICAgIGZpbmFsIExpc3Q8SW50ZWdlcj4gcmVzdWx0\nQ29kZSA9IG5ldyBBcnJheUxpc3Q8SW50ZWdlcj4oMSk7CiAgICAgICAgbGVk\nZ2VyTWFuYWdlci5hc3luY1Byb2Nlc3NMZWRnZXJzKGxlZGdlclByb2Nlc3Nv\nciwKICAgICAgICAgICAgICAgIG5ldyBBc3luY0NhbGxiYWNrLlZvaWRDYWxs\nYmFjaygpIHsKCiAgICAgICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAg\nICAgICAgICAgICAgICAgcHVibGljIHZvaWQgcHJvY2Vzc1Jlc3VsdChpbnQg\ncmMsIFN0cmluZyBzLCBPYmplY3Qgb2JqKSB7CiAgICAgICAgICAgICAgICAg\nICAgICAgIHJlc3VsdENvZGUuYWRkKHJjKTsKICAgICAgICAgICAgICAgICAg\nICAgICAgbGVkZ2VyQ29sbGVjdG9yTGF0Y2guY291bnREb3duKCk7CiAgICAg\nICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgbnVsbCwgQktF\neGNlcHRpb24uQ29kZS5PSywgQktFeGNlcHRpb24uQ29kZS5SZWFkRXhjZXB0\naW9uKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZWRnZXJDb2xsZWN0\nb3JMYXRjaC5hd2FpdCgpOwogICAgICAgIH0gY2F0Y2ggKEludGVycnVwdGVk\nRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgVGhyZWFkLmN1cnJlbnRUaHJl\nYWQoKS5pbnRlcnJ1cHQoKTsKICAgICAgICAgICAgdGhyb3cgbmV3IEJLQXVk\naXRFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAgICAgIkV4Y2VwdGlvbiB3\naGlsZSBnZXR0aW5nIHRoZSBib29raWUtbGVkZ2VycyIsIGUpOwogICAgICAg\nIH0KICAgICAgICBpZiAoIXJlc3VsdENvZGUuY29udGFpbnMoQktFeGNlcHRp\nb24uQ29kZS5PSykpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEJLQXVkaXRF\neGNlcHRpb24oCiAgICAgICAgICAgICAgICAgICAgIkV4Y2VwdGlvbiB3aGls\nZSBnZXR0aW5nIHRoZSBib29raWUtbGVkZ2VycyIsIEJLRXhjZXB0aW9uCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAuY3JlYXRlKHJlc3VsdENvZGUu\nZ2V0KDApKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBib29raWUybGVk\nZ2Vyc01hcDsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgcHV0TGVkZ2VyKENv\nbmN1cnJlbnRIYXNoTWFwPFN0cmluZywgU2V0PExvbmc+PiBib29raWUybGVk\nZ2Vyc01hcCwKICAgICAgICAgICAgU3RyaW5nIGJvb2tpZSwgbG9uZyBsZWRn\nZXJJZCkgewogICAgICAgIFNldDxMb25nPiBsZWRnZXJzID0gYm9va2llMmxl\nZGdlcnNNYXAuZ2V0KGJvb2tpZSk7CiAgICAgICAgLy8gY3JlYXRlcyBhbiBl\nbXB0eSBsaXN0IGFuZCBhZGQgdG8gYm9va2llIGZvciBrZWVwaW5nIGl0cyBs\nZWRnZXJzCiAgICAgICAgaWYgKGxlZGdlcnMgPT0gbnVsbCkgewogICAgICAg\nICAgICBsZWRnZXJzID0gQ29sbGVjdGlvbnMuc3luY2hyb25pemVkU2V0KG5l\ndyBIYXNoU2V0PExvbmc+KCkpOwogICAgICAgICAgICBTZXQ8TG9uZz4gb2xk\nTGVkZ2VycyA9IGJvb2tpZTJsZWRnZXJzTWFwLnB1dElmQWJzZW50KGJvb2tp\nZSwgbGVkZ2Vycyk7CiAgICAgICAgICAgIGlmIChvbGRMZWRnZXJzICE9IG51\nbGwpIHsKICAgICAgICAgICAgICAgIGxlZGdlcnMgPSBvbGRMZWRnZXJzOwog\nICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGxlZGdlcnMuYWRkKGxl\nZGdlcklkKTsKICAgIH0KfQo=\n","encoding":"base64"}

