{"sha":"e770bb09c914906ee3e4d7ac1e81250548b96054","node_id":"MDQ6QmxvYjE1NzU5NTY6ZTc3MGJiMDljOTE0OTA2ZWUzZTRkN2FjMWU4MTI1MDU0OGI5NjA1NA==","size":25268,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/e770bb09c914906ee3e4d7ac1e81250548b96054","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KLyog\nQ29waWVkIHdob2xlc2FsZSBmcm9tIGhhZG9vcC1jb21tb24gMC4yMy4xCnBh\nY2thZ2Ugb3JnLmFwYWNoZS5oYWRvb3AuZnM7CiovCnBhY2thZ2Ugb3JnLmFw\nYWNoZS5ib29ra2VlcGVyLnV0aWw7CgppbXBvcnQgamF2YS5pby5CdWZmZXJl\nZFJlYWRlcjsKaW1wb3J0IGphdmEuaW8uRmlsZTsKaW1wb3J0IGphdmEuaW8u\nRmlsZU5vdEZvdW5kRXhjZXB0aW9uOwppbXBvcnQgamF2YS5pby5JT0V4Y2Vw\ndGlvbjsKaW1wb3J0IGphdmEuaW8uSW5wdXRTdHJlYW1SZWFkZXI7CmltcG9y\ndCBqYXZhLnV0aWwuQXJyYXlzOwoKaW1wb3J0IHN0YXRpYyBjb20uZ29vZ2xl\nLmNvbW1vbi5iYXNlLkNoYXJzZXRzLlVURl84OwoKLyoqCiAqIENsYXNzIGZv\nciBjcmVhdGluZyBoYXJkbGlua3MuCiAqIFN1cHBvcnRzIFVuaXgvTGludXgs\nIFdpblhQLzIwMDMvVmlzdGEgdmlhIEN5Z3dpbiwgYW5kIE1hYyBPUyBYLgog\nKiAKICogVGhlIEhhcmRMaW5rIGNsYXNzIHdhcyBmb3JtZXJseSBhIHN0YXRp\nYyBpbm5lciBjbGFzcyBvZiBGU1V0aWwsCiAqIGFuZCB0aGUgbWV0aG9kcyBw\ncm92aWRlZCB3ZXJlIGJsYXRhbnRseSBub24tdGhyZWFkLXNhZmUuCiAqIFRv\nIGVuYWJsZSB2b2x1bWUtcGFyYWxsZWwgVXBkYXRlIHNuYXBzaG90cywgd2Ug\nbm93IHByb3ZpZGUgc3RhdGljIAogKiB0aHJlYWRzYWZlIG1ldGhvZHMgdGhh\ndCBhbGxvY2F0ZSBuZXcgYnVmZmVyIHN0cmluZyBhcnJheXMKICogdXBvbiBl\nYWNoIGNhbGwuICBXZSBhbHNvIHByb3ZpZGUgYW4gQVBJIHRvIGhhcmRsaW5r\nIGFsbCBmaWxlcyBpbiBhCiAqIGRpcmVjdG9yeSB3aXRoIGEgc2luZ2xlIGNv\nbW1hbmQsIHdoaWNoIGlzIHVwIHRvIDEyOCB0aW1lcyBtb3JlIAogKiBlZmZp\nY2llbnQgLSBhbmQgbWluaW1pemVzIHRoZSBpbXBhY3Qgb2YgdGhlIGV4dHJh\nIGJ1ZmZlciBjcmVhdGlvbnMuCiAqLwpwdWJsaWMgY2xhc3MgSGFyZExpbmsg\neyAKCiAgcHVibGljIGVudW0gT1NUeXBlIHsKICAgIE9TX1RZUEVfVU5JWCwK\nICAgIE9TX1RZUEVfV0lOWFAsCiAgICBPU19UWVBFX1NPTEFSSVMsCiAgICBP\nU19UWVBFX01BQwogIH0KICAKICBwdWJsaWMgc3RhdGljIGZpbmFsIE9TVHlw\nZSBvc1R5cGU7CiAgcHJpdmF0ZSBzdGF0aWMgSGFyZExpbmtDb21tYW5kR2V0\ndGVyIGdldEhhcmRMaW5rQ29tbWFuZDsKICAKICBwdWJsaWMgZmluYWwgTGlu\na1N0YXRzIGxpbmtTdGF0czsgLy9ub3Qgc3RhdGljCiAgCiAgLy9pbml0aWFs\naXplIHRoZSBjb21tYW5kICJnZXR0ZXJzIiBzdGF0aWNhbGx5LCBzbyBjYW4g\ndXNlIHRoZWlyIAogIC8vbWV0aG9kcyB3aXRob3V0IGluc3RhbnRpYXRpbmcg\ndGhlIEhhcmRMaW5rIG9iamVjdAogIHN0YXRpYyB7IAogICAgb3NUeXBlID0g\nZ2V0T1NUeXBlKCk7CiAgICBpZiAob3NUeXBlID09IE9TVHlwZS5PU19UWVBF\nX1dJTlhQKSB7CiAgICAgIC8vIFdpbmRvd3MKICAgICAgZ2V0SGFyZExpbmtD\nb21tYW5kID0gbmV3IEhhcmRMaW5rQ0dXaW4oKTsKICAgIH0gZWxzZSB7CiAg\nICAgIC8vIFVuaXgKICAgICAgZ2V0SGFyZExpbmtDb21tYW5kID0gbmV3IEhh\ncmRMaW5rQ0dVbml4KCk7CiAgICAgIC8vb3ZlcnJpZGUgZ2V0TGlua0NvdW50\nQ29tbWFuZCBmb3IgdGhlIHBhcnRpY3VsYXIgVW5peCB2YXJpYW50CiAgICAg\nIC8vTGludXggaXMgYWxyZWFkeSBzZXQgYXMgdGhlIGRlZmF1bHQgLSB7InN0\nYXQiLCItYyVoIiwgbnVsbH0KICAgICAgaWYgKG9zVHlwZSA9PSBPU1R5cGUu\nT1NfVFlQRV9NQUMpIHsKICAgICAgICBTdHJpbmdbXSBsaW5rQ291bnRDbWRU\nZW1wbGF0ZSA9IHsic3RhdCIsIi1mJWwiLCBudWxsfTsKICAgICAgICBIYXJk\nTGlua0NHVW5peC5zZXRMaW5rQ291bnRDbWRUZW1wbGF0ZShsaW5rQ291bnRD\nbWRUZW1wbGF0ZSk7CiAgICAgIH0gZWxzZSBpZiAob3NUeXBlID09IE9TVHlw\nZS5PU19UWVBFX1NPTEFSSVMpIHsKICAgICAgICBTdHJpbmdbXSBsaW5rQ291\nbnRDbWRUZW1wbGF0ZSA9IHsibHMiLCItbCIsIG51bGx9OwogICAgICAgIEhh\ncmRMaW5rQ0dVbml4LnNldExpbmtDb3VudENtZFRlbXBsYXRlKGxpbmtDb3Vu\ndENtZFRlbXBsYXRlKTsgICAgICAgIAogICAgICB9CiAgICB9CiAgfQoKICBw\ndWJsaWMgSGFyZExpbmsoKSB7CiAgICBsaW5rU3RhdHMgPSBuZXcgTGlua1N0\nYXRzKCk7CiAgfQogIAogIHN0YXRpYyBwcml2YXRlIE9TVHlwZSBnZXRPU1R5\ncGUoKSB7CiAgICBTdHJpbmcgb3NOYW1lID0gU3lzdGVtLmdldFByb3BlcnR5\nKCJvcy5uYW1lIik7CiAgICBpZiAob3NOYW1lLmNvbnRhaW5zKCJXaW5kb3dz\nIikgJiYKICAgICAgICAgICAgKG9zTmFtZS5jb250YWlucygiWFAiKSAKICAg\nICAgICAgICAgfHwgb3NOYW1lLmNvbnRhaW5zKCIyMDAzIikgCiAgICAgICAg\nICAgIHx8IG9zTmFtZS5jb250YWlucygiVmlzdGEiKQogICAgICAgICAgICB8\nfCBvc05hbWUuY29udGFpbnMoIldpbmRvd3NfNyIpCiAgICAgICAgICAgIHx8\nIG9zTmFtZS5jb250YWlucygiV2luZG93cyA3IikgCiAgICAgICAgICAgIHx8\nIG9zTmFtZS5jb250YWlucygiV2luZG93czciKSkpIHsKICAgICAgcmV0dXJu\nIE9TVHlwZS5PU19UWVBFX1dJTlhQOwogICAgfQogICAgZWxzZSBpZiAob3NO\nYW1lLmNvbnRhaW5zKCJTdW5PUyIpIAogICAgICAgICAgICB8fCBvc05hbWUu\nY29udGFpbnMoIlNvbGFyaXMiKSkgewogICAgICAgcmV0dXJuIE9TVHlwZS5P\nU19UWVBFX1NPTEFSSVM7CiAgICB9CiAgICBlbHNlIGlmIChvc05hbWUuY29u\ndGFpbnMoIk1hYyIpKSB7CiAgICAgICByZXR1cm4gT1NUeXBlLk9TX1RZUEVf\nTUFDOwogICAgfQogICAgZWxzZSB7CiAgICAgIHJldHVybiBPU1R5cGUuT1Nf\nVFlQRV9VTklYOwogICAgfQogIH0KICAKICAvKioKICAgKiBUaGlzIGFic3Ry\nYWN0IGNsYXNzIGJyaWRnZXMgdGhlIE9TLWRlcGVuZGVudCBpbXBsZW1lbnRh\ndGlvbnMgb2YgdGhlIAogICAqIG5lZWRlZCBmdW5jdGlvbmFsaXR5IGZvciBj\ncmVhdGluZyBoYXJkbGlua3MgYW5kIHF1ZXJ5aW5nIGxpbmsgY291bnRzLgog\nICAqIFRoZSBwYXJ0aWN1bGFyIGltcGxlbWVudGF0aW9uIGNsYXNzIGlzIGNo\nb3NlbiBkdXJpbmcgCiAgICogc3RhdGljIGluaXRpYWxpemF0aW9uIHBoYXNl\nIG9mIHRoZSBIYXJkTGluayBjbGFzcy4KICAgKiBUaGUgImdldHRlciIgbWV0\naG9kcyBjb25zdHJ1Y3Qgc2hlbGwgY29tbWFuZCBzdHJpbmdzIGZvciB2YXJp\nb3VzIHB1cnBvc2VzLgogICAqLwogIHByaXZhdGUgc3RhdGljIGFic3RyYWN0\nIGNsYXNzIEhhcmRMaW5rQ29tbWFuZEdldHRlciB7CgogICAgLyoqCiAgICAg\nKiBHZXQgdGhlIGNvbW1hbmQgc3RyaW5nIG5lZWRlZCB0byBoYXJkbGluayBh\nIGJ1bmNoIG9mIGZpbGVzIGZyb20KICAgICAqIGEgc2luZ2xlIHNvdXJjZSBk\naXJlY3RvcnkgaW50byBhIHRhcmdldCBkaXJlY3RvcnkuICBUaGUgc291cmNl\nIGRpcmVjdG9yeQogICAgICogaXMgbm90IHNwZWNpZmllZCBoZXJlLCBidXQg\ndGhlIGNvbW1hbmQgd2lsbCBiZSBleGVjdXRlZCB1c2luZyB0aGUgc291cmNl\nCiAgICAgKiBkaXJlY3RvcnkgYXMgdGhlICJjdXJyZW50IHdvcmtpbmcgZGly\nZWN0b3J5IiBvZiB0aGUgc2hlbGwgaW52b2NhdGlvbi4KICAgICAqIAogICAg\nICogQHBhcmFtIGZpbGVCYXNlTmFtZXMgLSBhcnJheSBvZiBwYXRoLWxlc3Mg\nZmlsZSBuYW1lcywgcmVsYXRpdmUKICAgICAqICAgICAgICAgICAgdG8gdGhl\nIHNvdXJjZSBkaXJlY3RvcnkKICAgICAqIEBwYXJhbSBsaW5rRGlyIC0gdGFy\nZ2V0IGRpcmVjdG9yeSB3aGVyZSB0aGUgaGFyZGxpbmtzIHdpbGwgYmUgcHV0\nCiAgICAgKiBAcmV0dXJuIC0gYW4gYXJyYXkgb2YgU3RyaW5ncyBzdWl0YWJs\nZSBmb3IgdXNlIGFzIGEgc2luZ2xlIHNoZWxsIGNvbW1hbmQKICAgICAqICAg\nICAgICAgICAgd2l0aCB7QGxpbmsgUnVudGltZS5leGVjKCl9CiAgICAgKiBA\ndGhyb3dzIElPRXhjZXB0aW9uIC0gaWYgYW55IG9mIHRoZSBmaWxlIG9yIHBh\ndGggbmFtZXMgbWlzYmVoYXZlCiAgICAgKi8KICAgIGFic3RyYWN0IFN0cmlu\nZ1tdIGxpbmtNdWx0KFN0cmluZ1tdIGZpbGVCYXNlTmFtZXMsIEZpbGUgbGlu\na0RpcikgCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3dzIElPRXhj\nZXB0aW9uOwogICAgCiAgICAvKioKICAgICAqIEdldCB0aGUgY29tbWFuZCBz\ndHJpbmcgbmVlZGVkIHRvIGhhcmRsaW5rIGEgc2luZ2xlIGZpbGUKICAgICAq\nLwogICAgYWJzdHJhY3QgU3RyaW5nW10gbGlua09uZShGaWxlIGZpbGUsIEZp\nbGUgbGlua05hbWUpIHRocm93cyBJT0V4Y2VwdGlvbjsKICAgIAogICAgLyoq\nCiAgICAgKiBHZXQgdGhlIGNvbW1hbmQgc3RyaW5nIHRvIHF1ZXJ5IHRoZSBo\nYXJkbGluayBjb3VudCBvZiBhIGZpbGUKICAgICAqLwogICAgYWJzdHJhY3Qg\nU3RyaW5nW10gbGlua0NvdW50KEZpbGUgZmlsZSkgdGhyb3dzIElPRXhjZXB0\naW9uOwogICAgCiAgICAvKioKICAgICAqIENhbGN1bGF0ZSB0aGUgdG90YWwg\nc3RyaW5nIGxlbmd0aCBvZiB0aGUgc2hlbGwgY29tbWFuZAogICAgICogcmVz\ndWx0aW5nIGZyb20gZXhlY3V0aW9uIG9mIGxpbmtNdWx0LCBwbHVzIHRoZSBs\nZW5ndGggb2YgdGhlCiAgICAgKiBzb3VyY2UgZGlyZWN0b3J5IG5hbWUgKHdo\naWNoIHdpbGwgYWxzbyBiZSBwcm92aWRlZCB0byB0aGUgc2hlbGwpCiAgICAg\nKiAKICAgICAqIEBwYXJhbSBmaWxlRGlyIC0gc291cmNlIGRpcmVjdG9yeSwg\ncGFyZW50IG9mIGZpbGVCYXNlTmFtZXMKICAgICAqIEBwYXJhbSBmaWxlQmFz\nZU5hbWVzIC0gYXJyYXkgb2YgcGF0aC1sZXNzIGZpbGUgbmFtZXMsIHJlbGF0\naXZlCiAgICAgKiAgICAgICAgICAgIHRvIHRoZSBzb3VyY2UgZGlyZWN0b3J5\nCiAgICAgKiBAcGFyYW0gbGlua0RpciAtIHRhcmdldCBkaXJlY3Rvcnkgd2hl\ncmUgdGhlIGhhcmRsaW5rcyB3aWxsIGJlIHB1dAogICAgICogQHJldHVybiAt\nIHRvdGFsIGRhdGEgbGVuZ3RoIChtdXN0IG5vdCBleGNlZWQgbWF4QWxsb3dl\nZENtZEFyZ0xlbmd0aCkKICAgICAqIEB0aHJvd3MgSU9FeGNlcHRpb24KICAg\nICAqLwogICAgYWJzdHJhY3QgaW50IGdldExpbmtNdWx0QXJnTGVuZ3RoKAog\nICAgICAgICAgICAgICAgICAgICBGaWxlIGZpbGVEaXIsIFN0cmluZ1tdIGZp\nbGVCYXNlTmFtZXMsIEZpbGUgbGlua0RpcikgCiAgICAgICAgICAgICAgICAg\nICAgIHRocm93cyBJT0V4Y2VwdGlvbjsKICAgIAogICAgLyoqCiAgICAgKiBH\nZXQgdGhlIG1heGltdW0gYWxsb3dlZCBzdHJpbmcgbGVuZ3RoIG9mIGEgc2hl\nbGwgY29tbWFuZCBvbiB0aGlzIE9TLAogICAgICogd2hpY2ggaXMganVzdCB0\naGUgZG9jdW1lbnRlZCBtaW5pbXVtIGd1YXJhbnRlZWQgc3VwcG9ydGVkIGNv\nbW1hbmQKICAgICAqIGxlbmd0aCAtIGFwcnguIDMyS0IgZm9yIFVuaXgsIGFu\nZCA4S0IgZm9yIFdpbmRvd3MuCiAgICAgKi8KICAgIGFic3RyYWN0IGludCBn\nZXRNYXhBbGxvd2VkQ21kQXJnTGVuZ3RoKCk7IAogIH0KICAKICAvKioKICAg\nKiBJbXBsZW1lbnRhdGlvbiBvZiBIYXJkTGlua0NvbW1hbmRHZXR0ZXIgY2xh\nc3MgZm9yIFVuaXgKICAgKi8KICBzdGF0aWMgY2xhc3MgSGFyZExpbmtDR1Vu\naXggZXh0ZW5kcyBIYXJkTGlua0NvbW1hbmRHZXR0ZXIgewogICAgcHJpdmF0\nZSBzdGF0aWMgU3RyaW5nW10gaGFyZExpbmtDb21tYW5kID0geyJsbiIsIG51\nbGwsIG51bGx9OwogICAgcHJpdmF0ZSBzdGF0aWMgU3RyaW5nW10gaGFyZExp\nbmtNdWx0UHJlZml4ID0geyJsbiJ9OwogICAgcHJpdmF0ZSBzdGF0aWMgU3Ry\naW5nW10gaGFyZExpbmtNdWx0U3VmZml4ID0ge251bGx9OwogICAgcHJpdmF0\nZSBzdGF0aWMgU3RyaW5nW10gZ2V0TGlua0NvdW50Q29tbWFuZCA9IHsic3Rh\ndCIsIi1jJWgiLCBudWxsfTsKICAgIC8vVW5peCBndWFyYW50ZWVzIGF0IGxl\nYXN0IDMySyBieXRlcyBjbWQgbGVuZ3RoLgogICAgLy9TdWJ0cmFjdCBhbm90\naGVyIDY0YiB0byBhbGxvdyBmb3IgSmF2YSAnZXhlYycgb3ZlcmhlYWQKICAg\nIHByaXZhdGUgc3RhdGljIGZpbmFsIGludCBtYXhBbGxvd2VkQ21kQXJnTGVu\nZ3RoID0gMzIqMTAyNCAtIDY1OwogICAgCiAgICBwcml2YXRlIHN0YXRpYyBz\neW5jaHJvbml6ZWQgCiAgICB2b2lkIHNldExpbmtDb3VudENtZFRlbXBsYXRl\nKFN0cmluZ1tdIHRlbXBsYXRlKSB7CiAgICAgIC8vTWF5IHVwZGF0ZSB0aGlz\nIGZvciBzcGVjaWZpYyB1bml4IHZhcmlhbnRzLCAKICAgICAgLy9hZnRlciBz\ndGF0aWMgaW5pdGlhbGl6YXRpb24gcGhhc2UKICAgICAgZ2V0TGlua0NvdW50\nQ29tbWFuZCA9IHRlbXBsYXRlOwogICAgfQogICAgCiAgICAvKgogICAgICog\nQHNlZSBvcmcuYXBhY2hlLmhhZG9vcC5mcy5IYXJkTGluay5IYXJkTGlua0Nv\nbW1hbmRHZXR0ZXIjbGlua09uZShqYXZhLmlvLkZpbGUsIGphdmEuaW8uRmls\nZSkKICAgICAqLwogICAgQE92ZXJyaWRlCiAgICBTdHJpbmdbXSBsaW5rT25l\nKEZpbGUgZmlsZSwgRmlsZSBsaW5rTmFtZSkgCiAgICB0aHJvd3MgSU9FeGNl\ncHRpb24gewogICAgICBTdHJpbmdbXSBidWYgPSBuZXcgU3RyaW5nW2hhcmRM\naW5rQ29tbWFuZC5sZW5ndGhdOwogICAgICBTeXN0ZW0uYXJyYXljb3B5KGhh\ncmRMaW5rQ29tbWFuZCwgMCwgYnVmLCAwLCBoYXJkTGlua0NvbW1hbmQubGVu\nZ3RoKTsKICAgICAgLy91bml4IHdhbnRzIGFyZ3VtZW50IG9yZGVyOiAibG4g\nPGV4aXN0aW5nPiA8bmV3PiIKICAgICAgYnVmWzFdID0gbWFrZVNoZWxsUGF0\naChmaWxlKTsgCiAgICAgIGJ1ZlsyXSA9IG1ha2VTaGVsbFBhdGgobGlua05h\nbWUpOwogICAgICByZXR1cm4gYnVmOwogICAgfQogICAgCiAgICAvKgogICAg\nICogQHNlZSBvcmcuYXBhY2hlLmhhZG9vcC5mcy5IYXJkTGluay5IYXJkTGlu\na0NvbW1hbmRHZXR0ZXIjbGlua011bHQoamF2YS5sYW5nLlN0cmluZ1tdLCBq\nYXZhLmlvLkZpbGUpCiAgICAgKi8KICAgIEBPdmVycmlkZQogICAgU3RyaW5n\nW10gbGlua011bHQoU3RyaW5nW10gZmlsZUJhc2VOYW1lcywgRmlsZSBsaW5r\nRGlyKSAKICAgIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgIFN0cmluZ1td\nIGJ1ZiA9IG5ldyBTdHJpbmdbZmlsZUJhc2VOYW1lcy5sZW5ndGggCiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBoYXJkTGlua011bHRQcmVm\naXgubGVuZ3RoIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsg\naGFyZExpbmtNdWx0U3VmZml4Lmxlbmd0aF07CiAgICAgIGludCBtYXJrPTA7\nCiAgICAgIFN5c3RlbS5hcnJheWNvcHkoaGFyZExpbmtNdWx0UHJlZml4LCAw\nLCBidWYsIG1hcmssIAogICAgICAgICAgICAgICAgICAgICAgIGhhcmRMaW5r\nTXVsdFByZWZpeC5sZW5ndGgpOwogICAgICBtYXJrICs9IGhhcmRMaW5rTXVs\ndFByZWZpeC5sZW5ndGg7CiAgICAgIFN5c3RlbS5hcnJheWNvcHkoZmlsZUJh\nc2VOYW1lcywgMCwgYnVmLCBtYXJrLCBmaWxlQmFzZU5hbWVzLmxlbmd0aCk7\nCiAgICAgIG1hcmsgKz0gZmlsZUJhc2VOYW1lcy5sZW5ndGg7CiAgICAgIGJ1\nZlttYXJrXSA9IG1ha2VTaGVsbFBhdGgobGlua0Rpcik7CiAgICAgIHJldHVy\nbiBidWY7CiAgICB9CiAgICAKICAgIC8qCiAgICAgKiBAc2VlIG9yZy5hcGFj\naGUuaGFkb29wLmZzLkhhcmRMaW5rLkhhcmRMaW5rQ29tbWFuZEdldHRlciNs\naW5rQ291bnQoamF2YS5pby5GaWxlKQogICAgICovCiAgICBAT3ZlcnJpZGUK\nICAgIFN0cmluZ1tdIGxpbmtDb3VudChGaWxlIGZpbGUpIAogICAgdGhyb3dz\nIElPRXhjZXB0aW9uIHsKICAgICAgU3RyaW5nW10gYnVmID0gbmV3IFN0cmlu\nZ1tnZXRMaW5rQ291bnRDb21tYW5kLmxlbmd0aF07CiAgICAgIFN5c3RlbS5h\ncnJheWNvcHkoZ2V0TGlua0NvdW50Q29tbWFuZCwgMCwgYnVmLCAwLCAKICAg\nICAgICAgICAgICAgICAgICAgICBnZXRMaW5rQ291bnRDb21tYW5kLmxlbmd0\naCk7CiAgICAgIGJ1ZltnZXRMaW5rQ291bnRDb21tYW5kLmxlbmd0aCAtIDFd\nID0gbWFrZVNoZWxsUGF0aChmaWxlKTsKICAgICAgcmV0dXJuIGJ1ZjsKICAg\nIH0KICAgIAogICAgLyoKICAgICAqIEBzZWUgb3JnLmFwYWNoZS5oYWRvb3Au\nZnMuSGFyZExpbmsuSGFyZExpbmtDb21tYW5kR2V0dGVyI2dldExpbmtNdWx0\nQXJnTGVuZ3RoKGphdmEuaW8uRmlsZSwgamF2YS5sYW5nLlN0cmluZ1tdLCBq\nYXZhLmlvLkZpbGUpCiAgICAgKi8KICAgIEBPdmVycmlkZQogICAgaW50IGdl\ndExpbmtNdWx0QXJnTGVuZ3RoKEZpbGUgZmlsZURpciwgU3RyaW5nW10gZmls\nZUJhc2VOYW1lcywgRmlsZSBsaW5rRGlyKSAKICAgIHRocm93cyBJT0V4Y2Vw\ndGlvbnsKICAgICAgaW50IHN1bSA9IDA7CiAgICAgIGZvciAoU3RyaW5nIHgg\nOiBmaWxlQmFzZU5hbWVzKSB7CiAgICAgICAgLy8gYWRkIDEgdG8gYWNjb3Vu\ndCBmb3IgdGVybWluYWwgbnVsbCBvciBkZWxpbWl0ZXIgc3BhY2UKICAgICAg\nICBzdW0gKz0gMSArICgoeCA9PSBudWxsKSA/IDAgOiB4Lmxlbmd0aCgpKTsK\nICAgICAgfQogICAgICBzdW0gKz0gMiArIG1ha2VTaGVsbFBhdGgoZmlsZURp\ncikubGVuZ3RoKCkKICAgICAgICAgICAgICsgbWFrZVNoZWxsUGF0aChsaW5r\nRGlyKS5sZW5ndGgoKTsKICAgICAgLy9hZGQgdGhlIGZpeGVkIG92ZXJoZWFk\nIG9mIHRoZSBoYXJkTGlua011bHQgcHJlZml4IGFuZCBzdWZmaXgKICAgICAg\nc3VtICs9IDM7IC8vbGVuZ3RoKCJsbiIpICsgMQogICAgICByZXR1cm4gc3Vt\nOwogICAgfQogICAgCiAgICAvKgogICAgICogQHNlZSBvcmcuYXBhY2hlLmhh\nZG9vcC5mcy5IYXJkTGluay5IYXJkTGlua0NvbW1hbmRHZXR0ZXIjZ2V0TWF4\nQWxsb3dlZENtZEFyZ0xlbmd0aCgpCiAgICAgKi8KICAgIEBPdmVycmlkZQog\nICAgaW50IGdldE1heEFsbG93ZWRDbWRBcmdMZW5ndGgoKSB7CiAgICAgIHJl\ndHVybiBtYXhBbGxvd2VkQ21kQXJnTGVuZ3RoOwogICAgfQogIH0KICAKICAK\nICAvKioKICAgKiBJbXBsZW1lbnRhdGlvbiBvZiBIYXJkTGlua0NvbW1hbmRH\nZXR0ZXIgY2xhc3MgZm9yIFdpbmRvd3MKICAgKiAKICAgKiBOb3RlIHRoYXQg\ndGhlIGxpbmtDb3VudCBzaGVsbCBjb21tYW5kIGZvciBXaW5kb3dzIGlzIGFj\ndHVhbGx5CiAgICogYSBDeWd3aW4gc2hlbGwgY29tbWFuZCwgYW5kIGRlcGVu\nZHMgb24gJHtjeWd3aW59L2JpbgogICAqIGJlaW5nIGluIHRoZSBXaW5kb3dz\nIFBBVEggZW52aXJvbm1lbnQgdmFyaWFibGUsIHNvCiAgICogc3RhdC5leGUg\nY2FuIGJlIGZvdW5kLgogICAqLwogIHN0YXRpYyBjbGFzcyBIYXJkTGlua0NH\nV2luIGV4dGVuZHMgSGFyZExpbmtDb21tYW5kR2V0dGVyIHsKICAgIC8vVGhl\nIFdpbmRvd3MgY29tbWFuZCBnZXR0ZXIgaW1wbCBjbGFzcyBhbmQgaXRzIG1l\nbWJlciBmaWVsZHMgYXJlCiAgICAvL3BhY2thZ2UtcHJpdmF0ZSAoImRlZmF1\nbHQiKSBhY2Nlc3MgaW5zdGVhZCBvZiAicHJpdmF0ZSIgdG8gYXNzaXN0IAog\nICAgLy91bml0IHRlc3RpbmcgKHNvcnQgb2YpIG9uIG5vbi1XaW4gc2VydmVy\ncwoKICAgIHN0YXRpYyBTdHJpbmdbXSBoYXJkTGlua0NvbW1hbmQgPSB7CiAg\nICAgICAgICAgICAgICAgICAgICAgICJmc3V0aWwiLCJoYXJkbGluayIsImNy\nZWF0ZSIsIG51bGwsIG51bGx9OwogICAgc3RhdGljIFN0cmluZ1tdIGhhcmRM\naW5rTXVsdFByZWZpeCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgImNt\nZCIsIi9xIiwiL2MiLCJmb3IiLCAiJWYiLCAiaW4iLCAiKCJ9OwogICAgc3Rh\ndGljIFN0cmluZyAgIGhhcmRMaW5rTXVsdERpciA9ICJcXCVmIjsKICAgIHN0\nYXRpYyBTdHJpbmdbXSBoYXJkTGlua011bHRTdWZmaXggPSB7CiAgICAgICAg\nICAgICAgICAgICAgICAgICIpIiwgImRvIiwgImZzdXRpbCIsICJoYXJkbGlu\nayIsICJjcmVhdGUiLCBudWxsLCAKICAgICAgICAgICAgICAgICAgICAgICAg\nIiVmIiwgIjE+TlVMIn07CiAgICBzdGF0aWMgU3RyaW5nW10gZ2V0TGlua0Nv\ndW50Q29tbWFuZCA9IHsic3RhdCIsIi1jJWgiLCBudWxsfTsKICAgIC8vV2lu\nZG93cyBndWFyYW50ZWVzIG9ubHkgOEsgLSAxIGJ5dGVzIGNtZCBsZW5ndGgu\nCiAgICAvL1N1YnRyYWN0IGFub3RoZXIgNjRiIHRvIGFsbG93IGZvciBKYXZh\nICdleGVjJyBvdmVyaGVhZAogICAgc3RhdGljIGZpbmFsIGludCBtYXhBbGxv\nd2VkQ21kQXJnTGVuZ3RoID0gOCoxMDI0IC0gNjU7CgogICAgLyoKICAgICAq\nIEBzZWUgb3JnLmFwYWNoZS5oYWRvb3AuZnMuSGFyZExpbmsuSGFyZExpbmtD\nb21tYW5kR2V0dGVyI2xpbmtPbmUoamF2YS5pby5GaWxlLCBqYXZhLmlvLkZp\nbGUpCiAgICAgKi8KICAgIEBPdmVycmlkZQogICAgU3RyaW5nW10gbGlua09u\nZShGaWxlIGZpbGUsIEZpbGUgbGlua05hbWUpIAogICAgdGhyb3dzIElPRXhj\nZXB0aW9uIHsKICAgICAgU3RyaW5nW10gYnVmID0gbmV3IFN0cmluZ1toYXJk\nTGlua0NvbW1hbmQubGVuZ3RoXTsKICAgICAgU3lzdGVtLmFycmF5Y29weSho\nYXJkTGlua0NvbW1hbmQsIDAsIGJ1ZiwgMCwgaGFyZExpbmtDb21tYW5kLmxl\nbmd0aCk7CiAgICAgIC8vd2luZG93cyB3YW50cyBhcmd1bWVudCBvcmRlcjog\nImNyZWF0ZSA8bmV3PiA8ZXhpc3Rpbmc+IgogICAgICBidWZbNF0gPSBmaWxl\nLmdldENhbm9uaWNhbFBhdGgoKTsgCiAgICAgIGJ1ZlszXSA9IGxpbmtOYW1l\nLmdldENhbm9uaWNhbFBhdGgoKTsKICAgICAgcmV0dXJuIGJ1ZjsKICAgIH0K\nICAgIAogICAgLyoKICAgICAqIEBzZWUgb3JnLmFwYWNoZS5oYWRvb3AuZnMu\nSGFyZExpbmsuSGFyZExpbmtDb21tYW5kR2V0dGVyI2xpbmtNdWx0KGphdmEu\nbGFuZy5TdHJpbmdbXSwgamF2YS5pby5GaWxlKQogICAgICovCiAgICBAT3Zl\ncnJpZGUKICAgIFN0cmluZ1tdIGxpbmtNdWx0KFN0cmluZ1tdIGZpbGVCYXNl\nTmFtZXMsIEZpbGUgbGlua0RpcikgCiAgICB0aHJvd3MgSU9FeGNlcHRpb24g\newogICAgICBTdHJpbmdbXSBidWYgPSBuZXcgU3RyaW5nW2ZpbGVCYXNlTmFt\nZXMubGVuZ3RoIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsg\naGFyZExpbmtNdWx0UHJlZml4Lmxlbmd0aCAKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICArIGhhcmRMaW5rTXVsdFN1ZmZpeC5sZW5ndGhdOwog\nICAgICBTdHJpbmcgdGQgPSBsaW5rRGlyLmdldENhbm9uaWNhbFBhdGgoKSAr\nIGhhcmRMaW5rTXVsdERpcjsKICAgICAgaW50IG1hcms9MDsKICAgICAgU3lz\ndGVtLmFycmF5Y29weShoYXJkTGlua011bHRQcmVmaXgsIDAsIGJ1ZiwgbWFy\naywgCiAgICAgICAgICAgICAgICAgICAgICAgaGFyZExpbmtNdWx0UHJlZml4\nLmxlbmd0aCk7CiAgICAgIG1hcmsgKz0gaGFyZExpbmtNdWx0UHJlZml4Lmxl\nbmd0aDsKICAgICAgU3lzdGVtLmFycmF5Y29weShmaWxlQmFzZU5hbWVzLCAw\nLCBidWYsIG1hcmssIGZpbGVCYXNlTmFtZXMubGVuZ3RoKTsKICAgICAgbWFy\nayArPSBmaWxlQmFzZU5hbWVzLmxlbmd0aDsKICAgICAgU3lzdGVtLmFycmF5\nY29weShoYXJkTGlua011bHRTdWZmaXgsIDAsIGJ1ZiwgbWFyaywgCiAgICAg\nICAgICAgICAgICAgICAgICAgaGFyZExpbmtNdWx0U3VmZml4Lmxlbmd0aCk7\nCiAgICAgIG1hcmsgKz0gaGFyZExpbmtNdWx0U3VmZml4Lmxlbmd0aDsKICAg\nICAgYnVmW21hcmsgLSAzXSA9IHRkOwogICAgICByZXR1cm4gYnVmOwogICAg\nfQogICAgCiAgICAvKgogICAgICogQHNlZSBvcmcuYXBhY2hlLmhhZG9vcC5m\ncy5IYXJkTGluay5IYXJkTGlua0NvbW1hbmRHZXR0ZXIjbGlua0NvdW50KGph\ndmEuaW8uRmlsZSkKICAgICAqLwogICAgQE92ZXJyaWRlCiAgICBTdHJpbmdb\nXSBsaW5rQ291bnQoRmlsZSBmaWxlKSAKICAgIHRocm93cyBJT0V4Y2VwdGlv\nbiB7CiAgICAgIFN0cmluZ1tdIGJ1ZiA9IG5ldyBTdHJpbmdbZ2V0TGlua0Nv\ndW50Q29tbWFuZC5sZW5ndGhdOwogICAgICBTeXN0ZW0uYXJyYXljb3B5KGdl\ndExpbmtDb3VudENvbW1hbmQsIDAsIGJ1ZiwgMCwgCiAgICAgICAgICAgICAg\nICAgICAgICAgZ2V0TGlua0NvdW50Q29tbWFuZC5sZW5ndGgpOwogICAgICAv\nL1RoZSBsaW5rQ291bnQgY29tbWFuZCBpcyBhY3R1YWxseSBhIEN5Z3dpbiBz\naGVsbCBjb21tYW5kLAogICAgICAvL25vdCBhIFdpbmRvd3Mgc2hlbGwgY29t\nbWFuZCwgc28gd2Ugc2hvdWxkIHVzZSAibWFrZVNoZWxsUGF0aCgpIgogICAg\nICAvL2luc3RlYWQgb2YgImdldENhbm9uaWNhbFBhdGgoKSIuICBIb3dldmVy\nLCB0aGF0IGNhdXNlcyBhbm90aGVyCiAgICAgIC8vc2hlbGwgZXhlYyB0byAi\nY3lncGF0aC5leGUiLCBhbmQgInN0YXQuZXhlIiBhY3R1YWxseSBjYW4gaGFu\nZGxlCiAgICAgIC8vRE9TLXN0eWxlIHBhdGhzIChpdCBqdXN0IHByaW50cyBh\nIGNvdXBsZSBodW5kcmVkIGJ5dGVzIG9mIHdhcm5pbmcKICAgICAgLy90byBz\ndGRlcnIpLCBzbyB3ZSB1c2UgdGhlIG1vcmUgZWZmaWNpZW50ICJnZXRDYW5v\nbmljYWxQYXRoKCkiLgogICAgICBidWZbZ2V0TGlua0NvdW50Q29tbWFuZC5s\nZW5ndGggLSAxXSA9IGZpbGUuZ2V0Q2Fub25pY2FsUGF0aCgpOwogICAgICBy\nZXR1cm4gYnVmOwogICAgfQogICAgCiAgICAvKgogICAgICogQHNlZSBvcmcu\nYXBhY2hlLmhhZG9vcC5mcy5IYXJkTGluay5IYXJkTGlua0NvbW1hbmRHZXR0\nZXIjZ2V0TGlua011bHRBcmdMZW5ndGgoamF2YS5pby5GaWxlLCBqYXZhLmxh\nbmcuU3RyaW5nW10sIGphdmEuaW8uRmlsZSkKICAgICAqLwogICAgQE92ZXJy\naWRlCiAgICBpbnQgZ2V0TGlua011bHRBcmdMZW5ndGgoRmlsZSBmaWxlRGly\nLCBTdHJpbmdbXSBmaWxlQmFzZU5hbWVzLCBGaWxlIGxpbmtEaXIpIAogICAg\ndGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgaW50IHN1bSA9IDA7CiAgICAg\nIGZvciAoU3RyaW5nIHggOiBmaWxlQmFzZU5hbWVzKSB7CiAgICAgICAgLy8g\nYWRkIDEgdG8gYWNjb3VudCBmb3IgdGVybWluYWwgbnVsbCBvciBkZWxpbWl0\nZXIgc3BhY2UKICAgICAgICBzdW0gKz0gMSArICgoeCA9PSBudWxsKSA/IDAg\nOiB4Lmxlbmd0aCgpKTsKICAgICAgfQogICAgICBzdW0gKz0gMiArIGZpbGVE\naXIuZ2V0Q2Fub25pY2FsUGF0aCgpLmxlbmd0aCgpICsKICAgICAgICAgICAg\nICAgbGlua0Rpci5nZXRDYW5vbmljYWxQYXRoKCkubGVuZ3RoKCk7CiAgICAg\nIC8vYWRkIHRoZSBmaXhlZCBvdmVyaGVhZCBvZiB0aGUgaGFyZExpbmtNdWx0\nIGNvbW1hbmQgCiAgICAgIC8vKHByZWZpeCwgc3VmZml4LCBhbmQgRGlyIHN1\nZmZpeCkKICAgICAgc3VtICs9ICgiY21kLmV4ZSAvcSAvYyBmb3IgJWYgaW4g\nKCApIGRvICIKICAgICAgICAgICAgICArICJmc3V0aWwgaGFyZGxpbmsgY3Jl\nYXRlIFxcJWYgJWYgMT5OVUwgIikubGVuZ3RoKCk7CiAgICAgIHJldHVybiBz\ndW07CiAgICB9CiAgICAKICAgIC8qCiAgICAgKiBAc2VlIG9yZy5hcGFjaGUu\naGFkb29wLmZzLkhhcmRMaW5rLkhhcmRMaW5rQ29tbWFuZEdldHRlciNnZXRN\nYXhBbGxvd2VkQ21kQXJnTGVuZ3RoKCkKICAgICAqLwogICAgQE92ZXJyaWRl\nCiAgICBpbnQgZ2V0TWF4QWxsb3dlZENtZEFyZ0xlbmd0aCgpIHsKICAgICAg\ncmV0dXJuIG1heEFsbG93ZWRDbWRBcmdMZW5ndGg7CiAgICB9CiAgfQogIAog\nIAogIC8qKgogICAqIENhbGN1bGF0ZSB0aGUgbm9taW5hbCBsZW5ndGggb2Yg\nYWxsIGNvbnRyaWJ1dG9ycyB0byB0aGUgdG90YWwgCiAgICogY29tbWFuZHN0\ncmluZyBsZW5ndGgsIGluY2x1ZGluZyBmaXhlZCBvdmVyaGVhZCBvZiB0aGUg\nT1MtZGVwZW5kZW50IAogICAqIGNvbW1hbmQuICBJdCdzIHByb3RlY3RlZCBy\nYXRoZXIgdGhhbiBwcml2YXRlLCB0byBhc3Npc3QgdW5pdCB0ZXN0aW5nLAog\nICAqIGJ1dCByZWFsIGNsaWVudHMgYXJlIG5vdCBleHBlY3RlZCB0byBuZWVk\nIGl0IC0tIHNlZSB0aGUgd2F5IAogICAqIGNyZWF0ZUhhcmRMaW5rTXVsdCgp\nIHVzZXMgaXQgaW50ZXJuYWxseSBzbyB0aGUgdXNlciBkb2Vzbid0IG5lZWQg\ndG8gd29ycnkKICAgKiBhYm91dCBpdC4KICAgKiAKICAgKiBAcGFyYW0gZmls\nZURpciAtIHNvdXJjZSBkaXJlY3RvcnksIHBhcmVudCBvZiBmaWxlQmFzZU5h\nbWVzCiAgICogQHBhcmFtIGZpbGVCYXNlTmFtZXMgLSBhcnJheSBvZiBwYXRo\nLWxlc3MgZmlsZSBuYW1lcywgcmVsYXRpdmUKICAgKiAgICAgICAgICAgIHRv\nIHRoZSBzb3VyY2UgZGlyZWN0b3J5CiAgICogQHBhcmFtIGxpbmtEaXIgLSB0\nYXJnZXQgZGlyZWN0b3J5IHdoZXJlIHRoZSBoYXJkbGlua3Mgd2lsbCBiZSBw\ndXQKICAgKiBAcmV0dXJuIC0gdG90YWwgZGF0YSBsZW5ndGggKG11c3Qgbm90\nIGV4Y2VlZCBtYXhBbGxvd2VkQ21kQXJnTGVuZ3RoKQogICAqIEB0aHJvd3Mg\nSU9FeGNlcHRpb24KICAgKi8KICBwcm90ZWN0ZWQgc3RhdGljIGludCBnZXRM\naW5rTXVsdEFyZ0xlbmd0aCgKICAgICAgICAgIEZpbGUgZmlsZURpciwgU3Ry\naW5nW10gZmlsZUJhc2VOYW1lcywgRmlsZSBsaW5rRGlyKSAKICB0aHJvd3Mg\nSU9FeGNlcHRpb24gewogICAgcmV0dXJuIGdldEhhcmRMaW5rQ29tbWFuZC5n\nZXRMaW5rTXVsdEFyZ0xlbmd0aChmaWxlRGlyLCAKICAgICAgICAgIGZpbGVC\nYXNlTmFtZXMsIGxpbmtEaXIpOwogIH0KICAKICAvKioKICAgKiBSZXR1cm4g\ndGhpcyBwcml2YXRlIHZhbHVlIGZvciB1c2UgYnkgdW5pdCB0ZXN0cy4KICAg\nKiBTaGVsbCBjb21tYW5kcyBhcmUgbm90IGFsbG93ZWQgdG8gaGF2ZSBhIHRv\ndGFsIHN0cmluZyBsZW5ndGgKICAgKiBleGNlZWRpbmcgdGhpcyBzaXplLgog\nICAqLwogIHByb3RlY3RlZCBzdGF0aWMgaW50IGdldE1heEFsbG93ZWRDbWRB\ncmdMZW5ndGgoKSB7CiAgICByZXR1cm4gZ2V0SGFyZExpbmtDb21tYW5kLmdl\ndE1heEFsbG93ZWRDbWRBcmdMZW5ndGgoKTsKICB9CiAgCiAgLyoKICAgKiAq\nKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioq\nKioqKioqCiAgICogQ29tcGxleGl0eSBpcyBhYm92ZS4gIFVzZXItdmlzaWJs\nZSBmdW5jdGlvbmFsaXR5IGlzIGJlbG93CiAgICogKioqKioqKioqKioqKioq\nKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogICAqLwoK\nICAvKioKICAgKiBDcmVhdGVzIGEgaGFyZGxpbmsgCiAgICogQHBhcmFtIGZp\nbGUgLSBleGlzdGluZyBzb3VyY2UgZmlsZQogICAqIEBwYXJhbSBsaW5rTmFt\nZSAtIGRlc2lyZWQgdGFyZ2V0IGxpbmsgZmlsZQogICAqLwogIHB1YmxpYyBz\ndGF0aWMgdm9pZCBjcmVhdGVIYXJkTGluayhGaWxlIGZpbGUsIEZpbGUgbGlu\na05hbWUpIAogIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICBpZiAoZmlsZSA9\nPSBudWxsKSB7CiAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlvbigKICAgICAg\nICAgICJpbnZhbGlkIGFyZ3VtZW50cyB0byBjcmVhdGVIYXJkTGluazogc291\ncmNlIGZpbGUgaXMgbnVsbCIpOwogICAgfQogICAgaWYgKGxpbmtOYW1lID09\nIG51bGwpIHsKICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKAogICAgICAg\nICAgImludmFsaWQgYXJndW1lbnRzIHRvIGNyZWF0ZUhhcmRMaW5rOiBsaW5r\nIG5hbWUgaXMgbnVsbCIpOwogICAgfQoJICAvLyBjb25zdHJ1Y3QgYW5kIGV4\nZWN1dGUgc2hlbGwgY29tbWFuZAogICAgU3RyaW5nW10gaGFyZExpbmtDb21t\nYW5kID0gZ2V0SGFyZExpbmtDb21tYW5kLmxpbmtPbmUoZmlsZSwgbGlua05h\nbWUpOwogICAgUHJvY2VzcyBwcm9jZXNzID0gUnVudGltZS5nZXRSdW50aW1l\nKCkuZXhlYyhoYXJkTGlua0NvbW1hbmQpOwogICAgdHJ5IHsKICAgICAgaWYg\nKHByb2Nlc3Mud2FpdEZvcigpICE9IDApIHsKICAgICAgICBTdHJpbmcgZXJy\nTXNnID0gbmV3IEJ1ZmZlcmVkUmVhZGVyKG5ldyBJbnB1dFN0cmVhbVJlYWRl\ncigKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgcHJvY2Vzcy5nZXRJbnB1dFN0cmVhbSgpLCBVVEZfOCkpLnJl\nYWRMaW5lKCk7CiAgICAgICAgaWYgKGVyck1zZyA9PSBudWxsKSAgZXJyTXNn\nID0gIiI7CiAgICAgICAgU3RyaW5nIGlucE1zZyA9IG5ldyBCdWZmZXJlZFJl\nYWRlcihuZXcgSW5wdXRTdHJlYW1SZWFkZXIoCiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3MuZ2V0\nRXJyb3JTdHJlYW0oKSwgVVRGXzgpKS5yZWFkTGluZSgpOwogICAgICAgIGlm\nIChpbnBNc2cgPT0gbnVsbCkgIGlucE1zZyA9ICIiOwogICAgICAgIHRocm93\nIG5ldyBJT0V4Y2VwdGlvbihlcnJNc2cgKyBpbnBNc2cpOwogICAgICB9CiAg\nICB9IGNhdGNoIChJbnRlcnJ1cHRlZEV4Y2VwdGlvbiBlKSB7CiAgICAgIHRo\ncm93IG5ldyBJT0V4Y2VwdGlvbihlKTsKICAgIH0gZmluYWxseSB7CiAgICAg\nIHByb2Nlc3MuZGVzdHJveSgpOwogICAgfQogIH0KCiAgLyoqCiAgICogQ3Jl\nYXRlcyBoYXJkbGlua3MgZnJvbSBtdWx0aXBsZSBleGlzdGluZyBmaWxlcyB3\naXRoaW4gb25lIHBhcmVudAogICAqIGRpcmVjdG9yeSwgaW50byBvbmUgdGFy\nZ2V0IGRpcmVjdG9yeS4KICAgKiBAcGFyYW0gcGFyZW50RGlyIC0gZGlyZWN0\nb3J5IGNvbnRhaW5pbmcgc291cmNlIGZpbGVzCiAgICogQHBhcmFtIGZpbGVC\nYXNlTmFtZXMgLSBsaXN0IG9mIHBhdGgtbGVzcyBmaWxlIG5hbWVzLCBhcyBy\nZXR1cm5lZCBieSAKICAgKiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVu\ndERpci5saXN0KCkKICAgKiBAcGFyYW0gbGlua0RpciAtIHdoZXJlIHRoZSBo\nYXJkbGlua3Mgc2hvdWxkIGJlIHB1dC4gIEl0IG11c3QgYWxyZWFkeSBleGlz\ndC4KICAgKiAKICAgKiBJZiB0aGUgbGlzdCBvZiBmaWxlcyBpcyB0b28gbG9u\nZyAob3ZlcmZsb3dzIG1heEFsbG93ZWRDbWRBcmdMZW5ndGgpLAogICAqIHdl\nIHdpbGwgYXV0b21hdGljYWxseSBzcGxpdCBpdCBpbnRvIG11bHRpcGxlIGlu\ndm9jYXRpb25zIG9mIHRoZQogICAqIHVuZGVybHlpbmcgbWV0aG9kLgogICAq\nLwogIHB1YmxpYyBzdGF0aWMgdm9pZCBjcmVhdGVIYXJkTGlua011bHQoRmls\nZSBwYXJlbnREaXIsIFN0cmluZ1tdIGZpbGVCYXNlTmFtZXMsIAogICAgICBG\naWxlIGxpbmtEaXIpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAvL1RoaXMg\naXMgdGhlIHB1YmxpYyBtZXRob2QgYWxsIG5vbi10ZXN0IGNsaWVudHMgYXJl\nIGV4cGVjdGVkIHRvIHVzZS4KICAgIC8vTm9ybWFsIGNhc2UgLSBhbGxvdyB1\ncCB0byBtYXhBbGxvd2VkQ21kQXJnTGVuZ3RoIGNoYXJhY3RlcnMgaW4gdGhl\nIGNtZAogICAgY3JlYXRlSGFyZExpbmtNdWx0KHBhcmVudERpciwgZmlsZUJh\nc2VOYW1lcywgbGlua0RpciwgCiAgICAgICAgICAgICAgICAgICAgICAgZ2V0\nSGFyZExpbmtDb21tYW5kLmdldE1heEFsbG93ZWRDbWRBcmdMZW5ndGgoKSk7\nCiAgfQoKICAvKgogICAqIEltcGxlbWVudHMge0BsaW5rIGNyZWF0ZUhhcmRM\naW5rTXVsdH0gd2l0aCBhZGRlZCB2YXJpYWJsZSAgIm1heExlbmd0aCIsCiAg\nICogdG8gZWFzZSB1bml0IHRlc3Rpbmcgb2YgdGhlIGF1dG8tc3BsaXR0aW5n\nIGZlYXR1cmUgZm9yIGxvbmcgbGlzdHMuCiAgICogTGlrZXdpc2Ugd2h5IGl0\nIHJldHVybnMgImNhbGxDb3VudCIsIHRoZSBudW1iZXIgb2Ygc3ViLWFycmF5\ncyB0aGF0CiAgICogdGhlIGZpbGUgbGlzdCBoYWQgdG8gYmUgc3BsaXQgaW50\nby4KICAgKiBOb24tdGVzdCBjbGllbnRzIGFyZSBleHBlY3RlZCB0byBjYWxs\nIHRoZSBwdWJsaWMgbWV0aG9kIGluc3RlYWQuCiAgICovCiAgcHJvdGVjdGVk\nIHN0YXRpYyBpbnQgY3JlYXRlSGFyZExpbmtNdWx0KEZpbGUgcGFyZW50RGly\nLCAKICAgICAgU3RyaW5nW10gZmlsZUJhc2VOYW1lcywgRmlsZSBsaW5rRGly\nLCBpbnQgbWF4TGVuZ3RoKSAKICB0aHJvd3MgSU9FeGNlcHRpb24gewogICAg\naWYgKHBhcmVudERpciA9PSBudWxsKSB7CiAgICAgIHRocm93IG5ldyBJT0V4\nY2VwdGlvbigKICAgICAgICAgICJpbnZhbGlkIGFyZ3VtZW50cyB0byBjcmVh\ndGVIYXJkTGlua011bHQ6IHBhcmVudCBkaXJlY3RvcnkgaXMgbnVsbCIpOwog\nICAgfQogICAgaWYgKGxpbmtEaXIgPT0gbnVsbCkgewogICAgICB0aHJvdyBu\nZXcgSU9FeGNlcHRpb24oCiAgICAgICAgICAiaW52YWxpZCBhcmd1bWVudHMg\ndG8gY3JlYXRlSGFyZExpbmtNdWx0OiBsaW5rIGRpcmVjdG9yeSBpcyBudWxs\nIik7CiAgICB9CiAgICBpZiAoZmlsZUJhc2VOYW1lcyA9PSBudWxsKSB7CiAg\nICAgIHRocm93IG5ldyBJT0V4Y2VwdGlvbigKICAgICAgICAgICJpbnZhbGlk\nIGFyZ3VtZW50cyB0byBjcmVhdGVIYXJkTGlua011bHQ6ICIKICAgICAgICAg\nICsgImZpbGVuYW1lIGxpc3QgY2FuIGJlIGVtcHR5IGJ1dCBub3QgbnVsbCIp\nOwogICAgfQogICAgaWYgKGZpbGVCYXNlTmFtZXMubGVuZ3RoID09IDApIHsK\nICAgICAgLy90aGUgT1MgY21kcyBjYW4ndCBoYW5kbGUgZW1wdHkgbGlzdCBv\nZiBmaWxlbmFtZXMsIAogICAgICAvL2J1dCBpdCdzIGxlZ2FsLCBzbyBqdXN0\nIHJldHVybi4KICAgICAgcmV0dXJuIDA7IAogICAgfQogICAgaWYgKCFsaW5r\nRGlyLmV4aXN0cygpKSB7CiAgICAgIHRocm93IG5ldyBGaWxlTm90Rm91bmRF\neGNlcHRpb24obGlua0RpciArICIgbm90IGZvdW5kLiIpOwogICAgfQoKICAg\nIC8vaWYgdGhlIGxpc3QgaXMgdG9vIGxvbmcsIHNwbGl0IGludG8gbXVsdGlw\nbGUgaW52b2NhdGlvbnMKICAgIGludCBjYWxsQ291bnQgPSAwOwogICAgaWYg\nKGdldExpbmtNdWx0QXJnTGVuZ3RoKHBhcmVudERpciwgZmlsZUJhc2VOYW1l\ncywgbGlua0RpcikgPiBtYXhMZW5ndGgKICAgICAgICAgICYmIGZpbGVCYXNl\nTmFtZXMubGVuZ3RoID4gMSkgewogICAgICBTdHJpbmdbXSBsaXN0MSA9IEFy\ncmF5cy5jb3B5T2YoZmlsZUJhc2VOYW1lcywgZmlsZUJhc2VOYW1lcy5sZW5n\ndGgvMik7CiAgICAgIGNhbGxDb3VudCArPSBjcmVhdGVIYXJkTGlua011bHQo\ncGFyZW50RGlyLCBsaXN0MSwgbGlua0RpciwgbWF4TGVuZ3RoKTsKICAgICAg\nU3RyaW5nW10gbGlzdDIgPSBBcnJheXMuY29weU9mUmFuZ2UoZmlsZUJhc2VO\nYW1lcywgZmlsZUJhc2VOYW1lcy5sZW5ndGgvMiwKICAgICAgICAgIGZpbGVC\nYXNlTmFtZXMubGVuZ3RoKTsKICAgICAgY2FsbENvdW50ICs9IGNyZWF0ZUhh\ncmRMaW5rTXVsdChwYXJlbnREaXIsIGxpc3QyLCBsaW5rRGlyLCBtYXhMZW5n\ndGgpOyAgCiAgICAgIHJldHVybiBjYWxsQ291bnQ7CiAgICB9IGVsc2Ugewog\nICAgICBjYWxsQ291bnQgPSAxOwogICAgfQogICAgCiAgICAvLyBjb25zdHJ1\nY3QgYW5kIGV4ZWN1dGUgc2hlbGwgY29tbWFuZAogICAgU3RyaW5nW10gaGFy\nZExpbmtDb21tYW5kID0gZ2V0SGFyZExpbmtDb21tYW5kLmxpbmtNdWx0KGZp\nbGVCYXNlTmFtZXMsIAogICAgICAgIGxpbmtEaXIpOwogICAgUHJvY2VzcyBw\ncm9jZXNzID0gUnVudGltZS5nZXRSdW50aW1lKCkuZXhlYyhoYXJkTGlua0Nv\nbW1hbmQsIG51bGwsIAogICAgICAgIHBhcmVudERpcik7CiAgICB0cnkgewog\nICAgICBpZiAocHJvY2Vzcy53YWl0Rm9yKCkgIT0gMCkgewogICAgICAgIFN0\ncmluZyBlcnJNc2cgPSBuZXcgQnVmZmVyZWRSZWFkZXIobmV3IElucHV0U3Ry\nZWFtUmVhZGVyKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICBwcm9jZXNzLmdldElucHV0U3RyZWFtKCksIFVU\nRl84KSkucmVhZExpbmUoKTsKICAgICAgICBpZiAoZXJyTXNnID09IG51bGwp\nICBlcnJNc2cgPSAiIjsKICAgICAgICBTdHJpbmcgaW5wTXNnID0gbmV3IEJ1\nZmZlcmVkUmVhZGVyKG5ldyBJbnB1dFN0cmVhbVJlYWRlcigKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJv\nY2Vzcy5nZXRFcnJvclN0cmVhbSgpLCBVVEZfOCkpLnJlYWRMaW5lKCk7CiAg\nICAgICAgaWYgKGlucE1zZyA9PSBudWxsKSAgaW5wTXNnID0gIiI7CiAgICAg\nICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKGVyck1zZyArIGlucE1zZyk7CiAg\nICAgIH0KICAgIH0gY2F0Y2ggKEludGVycnVwdGVkRXhjZXB0aW9uIGUpIHsK\nICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKGUpOwogICAgfSBmaW5hbGx5\nIHsKICAgICAgcHJvY2Vzcy5kZXN0cm95KCk7CiAgICB9CiAgICByZXR1cm4g\nY2FsbENvdW50OwogIH0KCiAgIC8qKgogICAqIFJldHJpZXZlcyB0aGUgbnVt\nYmVyIG9mIGxpbmtzIHRvIHRoZSBzcGVjaWZpZWQgZmlsZS4KICAgKi8KICBw\ndWJsaWMgc3RhdGljIGludCBnZXRMaW5rQ291bnQoRmlsZSBmaWxlTmFtZSkg\ndGhyb3dzIElPRXhjZXB0aW9uIHsKICAgIGlmIChmaWxlTmFtZSA9PSBudWxs\nKSB7CiAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlvbigKICAgICAgICAgICJp\nbnZhbGlkIGFyZ3VtZW50IHRvIGdldExpbmtDb3VudDogZmlsZSBuYW1lIGlz\nIG51bGwiKTsKICAgIH0KICAgIGlmICghZmlsZU5hbWUuZXhpc3RzKCkpIHsK\nICAgICAgdGhyb3cgbmV3IEZpbGVOb3RGb3VuZEV4Y2VwdGlvbihmaWxlTmFt\nZSArICIgbm90IGZvdW5kLiIpOwogICAgfQoKICAgIC8vIGNvbnN0cnVjdCBh\nbmQgZXhlY3V0ZSBzaGVsbCBjb21tYW5kCiAgICBTdHJpbmdbXSBjbWQgPSBn\nZXRIYXJkTGlua0NvbW1hbmQubGlua0NvdW50KGZpbGVOYW1lKTsKICAgIFN0\ncmluZyBpbnBNc2cgPSBudWxsOwogICAgU3RyaW5nIGVyck1zZyA9IG51bGw7\nCiAgICBpbnQgZXhpdFZhbHVlID0gLTE7CiAgICBCdWZmZXJlZFJlYWRlciBp\nbiA9IG51bGw7CiAgICBCdWZmZXJlZFJlYWRlciBlcnIgPSBudWxsOwoKICAg\nIFByb2Nlc3MgcHJvY2VzcyA9IFJ1bnRpbWUuZ2V0UnVudGltZSgpLmV4ZWMo\nY21kKTsKICAgIHRyeSB7CiAgICAgIGV4aXRWYWx1ZSA9IHByb2Nlc3Mud2Fp\ndEZvcigpOwogICAgICBpbiA9IG5ldyBCdWZmZXJlZFJlYWRlcihuZXcgSW5w\ndXRTdHJlYW1SZWFkZXIoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgcHJvY2Vzcy5nZXRJbnB1dFN0cmVhbSgpLCBVVEZfOCkpOwog\nICAgICBpbnBNc2cgPSBpbi5yZWFkTGluZSgpOwogICAgICBlcnIgPSBuZXcg\nQnVmZmVyZWRSZWFkZXIobmV3IElucHV0U3RyZWFtUmVhZGVyKAogICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmdldEVy\ncm9yU3RyZWFtKCksIFVURl84KSk7CiAgICAgIGVyck1zZyA9IGVyci5yZWFk\nTGluZSgpOwogICAgICBpZiAoaW5wTXNnID09IG51bGwgfHwgZXhpdFZhbHVl\nICE9IDApIHsKICAgICAgICB0aHJvdyBjcmVhdGVJT0V4Y2VwdGlvbihmaWxl\nTmFtZSwgaW5wTXNnLCBlcnJNc2csIGV4aXRWYWx1ZSwgbnVsbCk7CiAgICAg\nIH0KICAgICAgaWYgKG9zVHlwZSA9PSBPU1R5cGUuT1NfVFlQRV9TT0xBUklT\nKSB7CiAgICAgICAgU3RyaW5nW10gcmVzdWx0ID0gaW5wTXNnLnNwbGl0KCJc\nXHMrIik7CiAgICAgICAgcmV0dXJuIEludGVnZXIucGFyc2VJbnQocmVzdWx0\nWzFdKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gSW50ZWdlci5w\nYXJzZUludChpbnBNc2cpOwogICAgICB9CiAgICB9IGNhdGNoIChOdW1iZXJG\nb3JtYXRFeGNlcHRpb24gZSkgewogICAgICB0aHJvdyBjcmVhdGVJT0V4Y2Vw\ndGlvbihmaWxlTmFtZSwgaW5wTXNnLCBlcnJNc2csIGV4aXRWYWx1ZSwgZSk7\nCiAgICB9IGNhdGNoIChJbnRlcnJ1cHRlZEV4Y2VwdGlvbiBlKSB7CiAgICAg\nIHRocm93IGNyZWF0ZUlPRXhjZXB0aW9uKGZpbGVOYW1lLCBpbnBNc2csIGVy\nck1zZywgZXhpdFZhbHVlLCBlKTsKICAgIH0gZmluYWxseSB7CiAgICAgIHBy\nb2Nlc3MuZGVzdHJveSgpOwogICAgICBpZiAoaW4gIT0gbnVsbCkgaW4uY2xv\nc2UoKTsKICAgICAgaWYgKGVyciAhPSBudWxsKSBlcnIuY2xvc2UoKTsKICAg\nIH0KICB9CiAgCiAgLyogQ3JlYXRlIGFuIElPRXhjZXB0aW9uIGZvciBmYWls\naW5nIHRvIGdldCBsaW5rIGNvdW50LiAqLwogIHByaXZhdGUgc3RhdGljIElP\nRXhjZXB0aW9uIGNyZWF0ZUlPRXhjZXB0aW9uKEZpbGUgZiwgU3RyaW5nIG1l\nc3NhZ2UsCiAgICAgIFN0cmluZyBlcnJvciwgaW50IGV4aXR2YWx1ZSwgRXhj\nZXB0aW9uIGNhdXNlKSB7CiAgICAKICAgIGZpbmFsIFN0cmluZyB3aW5FcnJN\nc2cgPSAiOyBXaW5kb3dzIGVycm9ycyBpbiBnZXRMaW5rQ291bnQgYXJlIG9m\ndGVuIGR1ZSAiCiAgICAgICAgICsgInRvIEN5Z3dpbiBtaXNjb25maWd1cmF0\naW9uIjsKCiAgICBmaW5hbCBTdHJpbmcgcyA9ICJGYWlsZWQgdG8gZ2V0IGxp\nbmsgY291bnQgb24gZmlsZSAiICsgZgogICAgICAgICsgIjogbWVzc2FnZT0i\nICsgbWVzc2FnZQogICAgICAgICsgIjsgZXJyb3I9IiArIGVycm9yCiAgICAg\nICAgKyAoKG9zVHlwZSA9PSBPU1R5cGUuT1NfVFlQRV9XSU5YUCkgPyB3aW5F\ncnJNc2cgOiAiIikKICAgICAgICArICI7IGV4aXQgdmFsdWU9IiArIGV4aXR2\nYWx1ZTsKICAgIHJldHVybiAoY2F1c2UgPT0gbnVsbCkgPyBuZXcgSU9FeGNl\ncHRpb24ocykgOiBuZXcgSU9FeGNlcHRpb24ocywgY2F1c2UpOwogIH0KICAK\nICAKICAvKioKICAgKiBIYXJkTGluayBzdGF0aXN0aWNzIGNvdW50ZXJzIGFu\nZCBtZXRob2RzLgogICAqIE5vdCBtdWx0aS10aHJlYWQgc2FmZSwgb2J2aW91\nc2x5LgogICAqIEluaXQgaXMgY2FsbGVkIGR1cmluZyBIYXJkTGluayBpbnN0\nYW50aWF0aW9uLCBhYm92ZS4KICAgKiAKICAgKiBUaGVzZSBhcmUgaW50ZW5k\nZWQgZm9yIHVzZSBieSBrbm93bGVkZ2VhYmxlIGNsaWVudHMsIG5vdCBpbnRl\ncm5hbGx5LCAKICAgKiBiZWNhdXNlIG1hbnkgb2YgdGhlIGludGVybmFsIG1l\ndGhvZHMgYXJlIHN0YXRpYyBhbmQgY2FuJ3QgdXBkYXRlIHRoZXNlCiAgICog\ncGVyLWluc3RhbmNlIGNvdW50ZXJzLgogICAqLwogIHB1YmxpYyBzdGF0aWMg\nY2xhc3MgTGlua1N0YXRzIHsKICAgIHB1YmxpYyBpbnQgY291bnREaXJzID0g\nMDsgCiAgICBwdWJsaWMgaW50IGNvdW50U2luZ2xlTGlua3MgPSAwOyAKICAg\nIHB1YmxpYyBpbnQgY291bnRNdWx0TGlua3MgPSAwOyAKICAgIHB1YmxpYyBp\nbnQgY291bnRGaWxlc011bHRMaW5rcyA9IDA7IAogICAgcHVibGljIGludCBj\nb3VudEVtcHR5RGlycyA9IDA7IAogICAgcHVibGljIGludCBjb3VudFBoeXNp\nY2FsRmlsZUNvcGllcyA9IDA7CiAgCiAgICBwdWJsaWMgdm9pZCBjbGVhcigp\nIHsKICAgICAgY291bnREaXJzID0gMDsgCiAgICAgIGNvdW50U2luZ2xlTGlu\na3MgPSAwOyAKICAgICAgY291bnRNdWx0TGlua3MgPSAwOyAKICAgICAgY291\nbnRGaWxlc011bHRMaW5rcyA9IDA7IAogICAgICBjb3VudEVtcHR5RGlycyA9\nIDA7IAogICAgICBjb3VudFBoeXNpY2FsRmlsZUNvcGllcyA9IDA7CiAgICB9\nCiAgICAKICAgIHB1YmxpYyBTdHJpbmcgcmVwb3J0KCkgewogICAgICByZXR1\ncm4gIkhhcmRMaW5rU3RhdHM6ICIgKyBjb3VudERpcnMgKyAiIERpcmVjdG9y\naWVzLCBpbmNsdWRpbmcgIiAKICAgICAgKyBjb3VudEVtcHR5RGlycyArICIg\nRW1wdHkgRGlyZWN0b3JpZXMsICIgCiAgICAgICsgY291bnRTaW5nbGVMaW5r\ncyAKICAgICAgKyAiIHNpbmdsZSBMaW5rIG9wZXJhdGlvbnMsICIgKyBjb3Vu\ndE11bHRMaW5rcyAKICAgICAgKyAiIG11bHRpLUxpbmsgb3BlcmF0aW9ucywg\nbGlua2luZyAiICsgY291bnRGaWxlc011bHRMaW5rcyAKICAgICAgKyAiIGZp\nbGVzLCB0b3RhbCAiICsgKGNvdW50U2luZ2xlTGlua3MgKyBjb3VudEZpbGVz\nTXVsdExpbmtzKSAKICAgICAgKyAiIGxpbmthYmxlIGZpbGVzLiAgQWxzbyBw\naHlzaWNhbGx5IGNvcGllZCAiIAogICAgICArIGNvdW50UGh5c2ljYWxGaWxl\nQ29waWVzICsgIiBvdGhlciBmaWxlcy4iOwogICAgfQogIH0KCiAgLyoqCiAg\nICogQ29udmVydCBhIG9zLW5hdGl2ZSBmaWxlbmFtZSB0byBhIHBhdGggdGhh\ndCB3b3JrcyBmb3IgdGhlIHNoZWxsLgogICAqIEBwYXJhbSBmaWxlbmFtZSBU\naGUgZmlsZW5hbWUgdG8gY29udmVydAogICAqIEByZXR1cm4gVGhlIHVuaXgg\ncGF0aG5hbWUKICAgKiBAdGhyb3dzIElPRXhjZXB0aW9uIG9uIHdpbmRvd3Ms\nIHRoZXJlIGNhbiBiZSBwcm9ibGVtcyB3aXRoIHRoZSBzdWJwcm9jZXNzCiAg\nICovCiAgcHVibGljIHN0YXRpYyBTdHJpbmcgbWFrZVNoZWxsUGF0aChGaWxl\nIGZpbGUpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICBTdHJpbmcgZmlsZW5h\nbWUgPSBmaWxlLmdldENhbm9uaWNhbFBhdGgoKTsKICAgIGlmIChTeXN0ZW0u\nZ2V0UHJvcGVydHkoIm9zLm5hbWUiKS5zdGFydHNXaXRoKCJXaW5kb3dzIikp\nIHsKICAgICAgQnVmZmVyZWRSZWFkZXIgciA9IG51bGw7CiAgICAgIHRyeSB7\nCiAgICAgICAgUHJvY2Vzc0J1aWxkZXIgcGIgPSBuZXcgUHJvY2Vzc0J1aWxk\nZXIoImN5Z3BhdGgiLCAiLXUiLCBmaWxlbmFtZSk7CiAgICAgICAgUHJvY2Vz\ncyBwID0gcGIuc3RhcnQoKTsKICAgICAgICBpbnQgZXJyID0gcC53YWl0Rm9y\nKCk7CiAgICAgICAgaWYgKGVyciAhPSAwKSB7CiAgICAgICAgICAgIHRocm93\nIG5ldyBJT0V4Y2VwdGlvbigiQ291bGRuJ3QgcmVzb2x2ZSBwYXRoICIKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgZmlsZW5hbWUgKyAi\nKCIgKyBlcnIgKyAiKSIpOwogICAgICAgIH0KICAgICAgICByID0gbmV3IEJ1\nZmZlcmVkUmVhZGVyKG5ldyBJbnB1dFN0cmVhbVJlYWRlcihwLmdldElucHV0\nU3RyZWFtKCksIFVURl84KSk7CiAgICAgICAgcmV0dXJuIHIucmVhZExpbmUo\nKTsKICAgICAgfSBjYXRjaCAoSW50ZXJydXB0ZWRFeGNlcHRpb24gaWUpIHsK\nICAgICAgICB0aHJvdyBuZXcgSU9FeGNlcHRpb24oIkNvdWxkbid0IHJlc29s\ndmUgcGF0aCAiICsgZmlsZW5hbWUsIGllKTsKICAgICAgfSBmaW5hbGx5IHsK\nICAgICAgICBpZiAociAhPSBudWxsKSB7CiAgICAgICAgICByLmNsb3NlKCk7\nCiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgewogICAgICByZXR1cm4g\nZmlsZW5hbWU7CiAgICB9CiAgfQp9Cgo=\n","encoding":"base64"}

