{"sha":"5e8559461e33f733701e8482b5403e8d3c0c7a57","node_id":"MDQ6QmxvYjE1NzU5NTY6NWU4NTU5NDYxZTMzZjczMzcwMWU4NDgyYjU0MDNlOGQzYzBjN2E1Nw==","size":3496,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/5e8559461e33f733701e8482b5403e8d3c0c7a57","content":"LyoKICoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9y\nIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBU\naGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhl\nIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNl\nIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBs\naWFuY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEg\nY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBl\naXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZv\nciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Np\nb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICoK\nICovCnBhY2thZ2Ugb3JnLmFwYWNoZS5ib29ra2VlcGVyLnV0aWw7CgppbXBv\ncnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEubmlvLkJ5dGVC\ndWZmZXI7CmltcG9ydCBqYXZhLm5pby5jaGFubmVscy5Xcml0YWJsZUJ5dGVD\naGFubmVsOwoKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXI7CgovKioKICogQW4g\ndXRpbGl0eSBjbGFzcyBmb3IgSS9PIHJlbGF0ZWQgZnVuY3Rpb25hbGl0eS4K\nICovCnB1YmxpYyBjbGFzcyBJT1V0aWxzIHsKCiAgICAvKioKICAgICAqIENs\nb3NlIHRoZSBDbG9zZWFibGUgb2JqZWN0cyBhbmQgPGI+aWdub3JlPC9iPiBh\nbnkge0BsaW5rIElPRXhjZXB0aW9ufSBvcgogICAgICogbnVsbCBwb2ludGVy\ncy4gTXVzdCBvbmx5IGJlIHVzZWQgZm9yIGNsZWFudXAgaW4gZXhjZXB0aW9u\nIGhhbmRsZXJzLgogICAgICoKICAgICAqIEBwYXJhbSBsb2cKICAgICAqICAg\nICAgICAgICAgdGhlIGxvZyB0byByZWNvcmQgcHJvYmxlbXMgdG8gYXQgZGVi\ndWcgbGV2ZWwuIENhbiBiZSBudWxsLgogICAgICogQHBhcmFtIGNsb3NlYWJs\nZXMKICAgICAqICAgICAgICAgICAgdGhlIG9iamVjdHMgdG8gY2xvc2UKICAg\nICAqLwogICAgcHVibGljIHN0YXRpYyB2b2lkIGNsb3NlKExvZ2dlciBsb2cs\nIGphdmEuaW8uQ2xvc2VhYmxlLi4uIGNsb3NlYWJsZXMpIHsKICAgICAgICBm\nb3IgKGphdmEuaW8uQ2xvc2VhYmxlIGMgOiBjbG9zZWFibGVzKSB7CiAgICAg\nICAgICAgIGlmIChjICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIHRyeSB7\nCiAgICAgICAgICAgICAgICAgICAgYy5jbG9zZSgpOwogICAgICAgICAgICAg\nICAgfSBjYXRjaCAoSU9FeGNlcHRpb24gZSkgewogICAgICAgICAgICAgICAg\nICAgIGlmIChsb2cgIT0gbnVsbCAmJiBsb2cuaXNEZWJ1Z0VuYWJsZWQoKSkg\newogICAgICAgICAgICAgICAgICAgICAgICBsb2cuZGVidWcoIkV4Y2VwdGlv\nbiBpbiBjbG9zaW5nICIgKyBjLCBlKTsKICAgICAgICAgICAgICAgICAgICB9\nCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAg\nICB9CgogICAgLyoqCiAgICAgKiBDb25maXJtIHByb21wdCBmb3IgdGhlIGNv\nbnNvbGUgb3BlcmF0aW9ucy4KICAgICAqCiAgICAgKiBAcGFyYW0gcHJvbXB0\nCiAgICAgKiAgICAgICAgICAgIFByb21wdCBtZXNzYWdlIHRvIGJlIGRpc3Bs\nYXllZCBvbiBjb25zb2xlCiAgICAgKiBAcmV0dXJuIFJldHVybnMgdHJ1ZSBp\nZiBjb25maXJtZWQgYXMgJ1knLCByZXR1cm5zIGZhbHNlIGlmIGNvbmZpcm1l\nZCBhcwogICAgICogICAgICAgICAnTicKICAgICAqIEB0aHJvd3MgSU9FeGNl\ncHRpb24KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBib29sZWFuIGNvbmZp\ncm1Qcm9tcHQoU3RyaW5nIHByb21wdCkgdGhyb3dzIElPRXhjZXB0aW9uIHsK\nICAgICAgICB3aGlsZSAodHJ1ZSkgewogICAgICAgICAgICBTeXN0ZW0ub3V0\nLnByaW50KHByb21wdCArICIgKFkgb3IgTikgIik7CiAgICAgICAgICAgIFN0\ncmluZ0J1aWxkZXIgcmVzcG9uc2VCdWlsZGVyID0gbmV3IFN0cmluZ0J1aWxk\nZXIoKTsKICAgICAgICAgICAgd2hpbGUgKHRydWUpIHsKICAgICAgICAgICAg\nICAgIGludCBjID0gU3lzdGVtLmluLnJlYWQoKTsKICAgICAgICAgICAgICAg\nIGlmIChjID09IC0xIHx8IGMgPT0gJ1xyJyB8fCBjID09ICdcbicpIHsKICAg\nICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAg\nICAgICAgICAgICAgIHJlc3BvbnNlQnVpbGRlci5hcHBlbmQoKGNoYXIpIGMp\nOwogICAgICAgICAgICB9CgogICAgICAgICAgICBTdHJpbmcgcmVzcG9uc2Ug\nPSByZXNwb25zZUJ1aWxkZXIudG9TdHJpbmcoKTsKICAgICAgICAgICAgaWYg\nKHJlc3BvbnNlLmVxdWFsc0lnbm9yZUNhc2UoInkiKQogICAgICAgICAgICAg\nICAgICAgIHx8IHJlc3BvbnNlLmVxdWFsc0lnbm9yZUNhc2UoInllcyIpKSB7\nCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfSBl\nbHNlIGlmIChyZXNwb25zZS5lcXVhbHNJZ25vcmVDYXNlKCJuIikKICAgICAg\nICAgICAgICAgICAgICB8fCByZXNwb25zZS5lcXVhbHNJZ25vcmVDYXNlKCJu\nbyIpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAg\nICAgIH0KICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKCJJbnZhbGlk\nIGlucHV0OiAiICsgcmVzcG9uc2UpOwogICAgICAgICAgICAvLyBlbHNlIGFz\nayB0aGVtIGFnYWluCiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICog\nV3JpdGUgYSBCeXRlQnVmZmVyIHRvIGEgV3JpdGFibGVCeXRlQ2hhbm5lbCwg\naGFuZGxpbmcgc2hvcnQgd3JpdGVzLgogICAgICoKICAgICAqIEBwYXJhbSBi\nYyAgICAgICAgICAgICAgIFRoZSBXcml0YWJsZUJ5dGVDaGFubmVsIHRvIHdy\naXRlIHRvCiAgICAgKiBAcGFyYW0gYnVmICAgICAgICAgICAgICBUaGUgaW5w\ndXQgYnVmZmVyCiAgICAgKiBAdGhyb3dzIElPRXhjZXB0aW9uICAgICBPbiBJ\nL08gZXJyb3IKICAgICAqLwogICAgcHVibGljIHN0YXRpYyB2b2lkIHdyaXRl\nRnVsbHkoV3JpdGFibGVCeXRlQ2hhbm5lbCBiYywgQnl0ZUJ1ZmZlciBidWYp\nCiAgICAgICAgICAgIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgZG8g\newogICAgICAgICAgICBiYy53cml0ZShidWYpOwogICAgICAgIH0gd2hpbGUg\nKGJ1Zi5yZW1haW5pbmcoKSA+IDApOwogICAgfQp9Cg==\n","encoding":"base64"}

