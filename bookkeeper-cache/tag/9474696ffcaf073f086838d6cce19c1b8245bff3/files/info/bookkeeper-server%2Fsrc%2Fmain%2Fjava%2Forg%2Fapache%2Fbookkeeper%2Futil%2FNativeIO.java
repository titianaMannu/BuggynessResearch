{"sha":"24488425b97048ef98335605e73d481cc9dda3e2","node_id":"MDQ6QmxvYjE1NzU5NTY6MjQ0ODg0MjViOTcwNDhlZjk4MzM1NjA1ZTczZDQ4MWNjOWRkYTNlMg==","size":4417,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/24488425b97048ef98335605e73d481cc9dda3e2","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCnBh\nY2thZ2Ugb3JnLmFwYWNoZS5ib29ra2VlcGVyLnV0aWw7CgppbXBvcnQgamF2\nYS5sYW5nLnJlZmxlY3QuRmllbGQ7CmltcG9ydCBqYXZhLmlvLkZpbGVEZXNj\ncmlwdG9yOwppbXBvcnQgb3JnLnNsZjRqLkxvZ2dlcjsKaW1wb3J0IG9yZy5z\nbGY0ai5Mb2dnZXJGYWN0b3J5OwppbXBvcnQgY29tLnN1bi5qbmEuTGFzdEVy\ncm9yRXhjZXB0aW9uOwppbXBvcnQgY29tLnN1bi5qbmEuTmF0aXZlOwoKcHVi\nbGljIGZpbmFsIGNsYXNzIE5hdGl2ZUlPIHsKICAgIHByaXZhdGUgc3RhdGlj\nIGZpbmFsIExvZ2dlciBMT0cgPSBMb2dnZXJGYWN0b3J5LmdldExvZ2dlcihO\nYXRpdmVJTy5jbGFzcyk7CgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgaW50\nIFBPU0lYX0ZBRFZfRE9OVE5FRUQgPSA0OyAvKiBmYWR2aXNlLmggKi8KCiAg\nICBwcml2YXRlIHN0YXRpYyBib29sZWFuIGluaXRpYWxpemVkID0gZmFsc2U7\nCiAgICBwcml2YXRlIHN0YXRpYyBib29sZWFuIGZhZHZpc2VQb3NzaWJsZSA9\nIHRydWU7CgogICAgc3RhdGljIHsKICAgICAgICB0cnkgewogICAgICAgICAg\nICBOYXRpdmUucmVnaXN0ZXIoImMiKTsKICAgICAgICAgICAgaW5pdGlhbGl6\nZWQgPSB0cnVlOwogICAgICAgIH0gY2F0Y2ggKE5vQ2xhc3NEZWZGb3VuZEVy\ncm9yIGUpIHsKICAgICAgICAgICAgTE9HLmluZm8oIkpOQSBub3QgZm91bmQu\nIE5hdGl2ZSBtZXRob2RzIHdpbGwgYmUgZGlzYWJsZWQuIik7CiAgICAgICAg\nfSBjYXRjaCAoVW5zYXRpc2ZpZWRMaW5rRXJyb3IgZSkgewogICAgICAgICAg\nICBMT0cuaW5mbygiVW5hYmxlIHRvIGxpbmsgQyBsaWJyYXJ5LiBOYXRpdmUg\nbWV0aG9kcyB3aWxsIGJlIGRpc2FibGVkLiIpOwogICAgICAgIH0gY2F0Y2gg\nKE5vU3VjaE1ldGhvZEVycm9yIGUpIHsKICAgICAgICAgICAgTE9HLndhcm4o\nIk9ic29sZXRlIHZlcnNpb24gb2YgSk5BIHByZXNlbnQ7IHVuYWJsZSB0byBy\nZWdpc3RlciBDIGxpYnJhcnkiKTsKICAgICAgICB9CiAgICB9CgogICAgLy8g\nZmFkdmljZQogICAgcHVibGljIHN0YXRpYyBuYXRpdmUgaW50IHBvc2l4X2Zh\nZHZpc2UoaW50IGZkLCBsb25nIG9mZnNldCwgbG9uZyBsZW4sIGludCBmbGFn\nKSB0aHJvd3MgTGFzdEVycm9yRXhjZXB0aW9uOwoKICAgIHByaXZhdGUgTmF0\naXZlSU8oKSB7fQoKICAgIHByaXZhdGUgc3RhdGljIEZpZWxkIGdldEZpZWxk\nQnlSZWZsZWN0aW9uKENsYXNzIGNscywgU3RyaW5nIGZpZWxkTmFtZSkgewog\nICAgICAgIEZpZWxkIGZpZWxkID0gbnVsbDsKCiAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgZmllbGQgPSBjbHMuZ2V0RGVjbGFyZWRGaWVsZChmaWVsZE5h\nbWUpOwogICAgICAgICAgICBmaWVsZC5zZXRBY2Nlc3NpYmxlKHRydWUpOwog\nICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIC8v\nIFdlIGRvbid0IHJlYWxseSBleHBlY3QgdGhpcyBzbyB0aHJvdyBhbiBhc3Nl\ncnRpb24gdG8KICAgICAgICAgICAgLy8gY2F0Y2ggdGhpcyBkdXJpbmcgZGV2\nZWxvcG1lbnQKICAgICAgICAgICAgYXNzZXJ0IGZhbHNlOwogICAgICAgICAg\nICBMT0cud2FybigiVW5hYmxlIHRvIHJlYWQge30gZmllbGQgZnJvbSB7fSIs\nIGZpZWxkTmFtZSwgY2xzLmdldE5hbWUoKSk7CiAgICAgICAgfQoKICAgICAg\nICByZXR1cm4gZmllbGQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBzeXN0\nZW0gZmlsZSBkZXNjcmlwdG9yIChpbnQpIGZyb20gRmlsZURlc2NyaXB0b3Ig\nb2JqZWN0LgogICAgICogQHBhcmFtIGRlc2NyaXB0b3IgLSBGaWxlRGVzY3Jp\ncHRvciBvYmplY3QgdG8gZ2V0IGZkIGZyb20KICAgICAqIEByZXR1cm4gZmls\nZSBkZXNjcmlwdG9yLCAtMSBvciBlcnJvcgogICAgICovCiAgICBwdWJsaWMg\nc3RhdGljIGludCBnZXRTeXNGaWxlRGVzY3JpcHRvcihGaWxlRGVzY3JpcHRv\nciBkZXNjcmlwdG9yKSB7CiAgICAgICAgRmllbGQgZmllbGQgPSBnZXRGaWVs\nZEJ5UmVmbGVjdGlvbihkZXNjcmlwdG9yLmdldENsYXNzKCksICJmZCIpOwog\nICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBmaWVsZC5nZXRJbnQo\nZGVzY3JpcHRvcik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsK\nICAgICAgICAgICAgTE9HLndhcm4oIlVuYWJsZSB0byByZWFkIGZkIGZpZWxk\nIGZyb20gamF2YS5pby5GaWxlRGVzY3JpcHRvciIpOwogICAgICAgIH0KCiAg\nICAgICAgcmV0dXJuIC0xOwogICAgfQoKICAgIC8qKgogICAgICogUmVtb3Zl\nIHBhZ2VzIGZyb20gdGhlIGZpbGUgc3lzdGVtIHBhZ2UgY2FjaGUgd2hlbiB0\naGV5IHdvbnQKICAgICAqIGJlIGFjY2Vzc2VkIGFnYWluCiAgICAgKgogICAg\nICogQHBhcmFtIGZkICAgICBUaGUgZmlsZSBkZXNjcmlwdG9yIG9mIHRoZSBz\nb3VyY2UgZmlsZS4KICAgICAqIEBwYXJhbSBvZmZzZXQgVGhlIG9mZnNldCB3\naXRoaW4gdGhlIGZpbGUuCiAgICAgKiBAcGFyYW0gbGVuICAgIFRoZSBsZW5n\ndGggdG8gYmUgZmx1c2hlZC4KICAgICAqCiAgICAgKiBAdGhyb3dzIG5vdGhp\nbmcgPT4gQmVzdCBlZmZvcnQKICAgICAqLwoKICAgIHB1YmxpYyBzdGF0aWMg\ndm9pZCBiZXN0RWZmb3J0UmVtb3ZlRnJvbVBhZ2VDYWNoZShpbnQgZmQsIGxv\nbmcgb2Zmc2V0LCBsb25nIGxlbikgewogICAgICAgIGlmICghaW5pdGlhbGl6\nZWQgfHwgIWZhZHZpc2VQb3NzaWJsZSB8fCBmZCA8IDApIHsKICAgICAgICAg\nICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAg\nICBwb3NpeF9mYWR2aXNlKGZkLCBvZmZzZXQsIGxlbiwgUE9TSVhfRkFEVl9E\nT05UTkVFRCk7CiAgICAgICAgfSBjYXRjaCAoVW5zdXBwb3J0ZWRPcGVyYXRp\nb25FeGNlcHRpb24gdW9lKSB7CiAgICAgICAgICAgIExPRy53YXJuKCJwb3Np\neF9mYWR2aXNlIGlzIG5vdCBzdXBwb3J0ZWQgOiAiLCB1b2UpOwogICAgICAg\nICAgICBmYWR2aXNlUG9zc2libGUgPSBmYWxzZTsKICAgICAgICB9IGNhdGNo\nIChVbnNhdGlzZmllZExpbmtFcnJvciB1bGUpIHsKICAgICAgICAgICAgLy8g\naWYgSk5BIGlzIHVuYXZhaWxhYmxlIGp1c3Qgc2tpcHBpbmcgRGlyZWN0IEkv\nTwogICAgICAgICAgICAvLyBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzIHdpbGwg\nYWN0IGxpa2Ugbm9ybWFsIFJhbmRvbUFjY2Vzc0ZpbGUKICAgICAgICAgICAg\nTE9HLndhcm4oIlVuc2F0aXNmaWVkIExpbmsgZXJyb3I6IHBvc2l4X2ZhZHZp\nc2UgZmFpbGVkIG9uIGZpbGUgZGVzY3JpcHRvciB7fSwgb2Zmc2V0IHt9IDog\nIiwKICAgICAgICAgICAgICAgICAgICBuZXcgT2JqZWN0W10geyBmZCwgb2Zm\nc2V0LCB1bGUgfSk7CiAgICAgICAgICAgIGZhZHZpc2VQb3NzaWJsZSA9IGZh\nbHNlOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAg\nICAgIC8vIFRoaXMgaXMgYmVzdCBlZmZvcnQgYW55d2F5IHNvIGxldHMganVz\ndCBsb2cgdGhhdCB0aGVyZSB3YXMgYW4KICAgICAgICAgICAgLy8gZXhjZXB0\naW9uIGFuZCBmb3JnZXQKICAgICAgICAgICAgTE9HLndhcm4oIlVua25vd24g\nZXhjZXB0aW9uOiBwb3NpeF9mYWR2aXNlIGZhaWxlZCBvbiBmaWxlIGRlc2Ny\naXB0b3Ige30sIG9mZnNldCB7fSA6ICIsCiAgICAgICAgICAgICAgICAgICAg\nbmV3IE9iamVjdFtdIHsgZmQsIG9mZnNldCwgZSB9KTsKICAgICAgICB9CiAg\nICB9Cgp9Cg==\n","encoding":"base64"}

