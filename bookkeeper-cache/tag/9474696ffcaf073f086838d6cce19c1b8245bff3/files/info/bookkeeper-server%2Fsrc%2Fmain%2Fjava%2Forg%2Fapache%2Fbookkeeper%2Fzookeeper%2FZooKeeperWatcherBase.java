{"sha":"707b8420cdd11fc1cf8a2b025d8bca090520d53b","node_id":"MDQ6QmxvYjE1NzU5NTY6NzA3Yjg0MjBjZGQxMWZjMWNmOGEyYjAyNWQ4YmNhMDkwNTIwZDUzYg==","size":4451,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/707b8420cdd11fc1cf8a2b025d8bca090520d53b","content":"LyoqCiAqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91\nbmRhdGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRv\nciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAq\nIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGlu\nZm9ybWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRo\nZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5z\nZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21w\nbGlhbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBh\nIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICBodHRwOi8vd3d3LmFw\nYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJl\ncXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0\naW5nLAogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5z\nZSBpcyBkaXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRI\nT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwg\nZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBm\nb3IgdGhlCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNz\naW9ucyBhbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAq\nCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci56b29rZWVwZXI7\nCgppbXBvcnQgamF2YS51dGlsLlNldDsKaW1wb3J0IGphdmEudXRpbC5jb25j\ndXJyZW50LkNvcHlPbldyaXRlQXJyYXlTZXQ7CmltcG9ydCBqYXZhLnV0aWwu\nY29uY3VycmVudC5Db3VudERvd25MYXRjaDsKaW1wb3J0IGphdmEudXRpbC5j\nb25jdXJyZW50LlRpbWVVbml0OwoKaW1wb3J0IG9yZy5hcGFjaGUuem9va2Vl\ncGVyLktlZXBlckV4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuem9va2Vl\ncGVyLldhdGNoZWRFdmVudDsKaW1wb3J0IG9yZy5hcGFjaGUuem9va2VlcGVy\nLldhdGNoZXI7CmltcG9ydCBvcmcuYXBhY2hlLnpvb2tlZXBlci5XYXRjaGVy\nLkV2ZW50LkV2ZW50VHlwZTsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXI7Cmlt\ncG9ydCBvcmcuc2xmNGouTG9nZ2VyRmFjdG9yeTsKCi8qKgogKiBXYXRjaGVy\nIGZvciByZWNlaXZpbmcgem9va2VlcGVyIHNlcnZlciBjb25uZWN0aW9uIGV2\nZW50cy4KICovCnB1YmxpYyBjbGFzcyBab29LZWVwZXJXYXRjaGVyQmFzZSBp\nbXBsZW1lbnRzIFdhdGNoZXIgewogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwg\nTG9nZ2VyIExPRyA9IExvZ2dlckZhY3RvcnkKICAgICAgICAgICAgLmdldExv\nZ2dlcihab29LZWVwZXJXYXRjaGVyQmFzZS5jbGFzcyk7CgogICAgcHJpdmF0\nZSBmaW5hbCBpbnQgemtTZXNzaW9uVGltZU91dDsKICAgIHByaXZhdGUgQ291\nbnREb3duTGF0Y2ggY2xpZW50Q29ubmVjdExhdGNoID0gbmV3IENvdW50RG93\nbkxhdGNoKDEpOwogICAgcHJpdmF0ZSBmaW5hbCBDb3B5T25Xcml0ZUFycmF5\nU2V0PFdhdGNoZXI+IGNoaWxkV2F0Y2hlcnMgPQogICAgICAgICAgICBuZXcg\nQ29weU9uV3JpdGVBcnJheVNldDxXYXRjaGVyPigpOwoKICAgIHB1YmxpYyBa\nb29LZWVwZXJXYXRjaGVyQmFzZShpbnQgemtTZXNzaW9uVGltZU91dCkgewog\nICAgICAgIHRoaXMuemtTZXNzaW9uVGltZU91dCA9IHprU2Vzc2lvblRpbWVP\ndXQ7CiAgICB9CgogICAgcHVibGljIFpvb0tlZXBlcldhdGNoZXJCYXNlKGlu\ndCB6a1Nlc3Npb25UaW1lT3V0LCBTZXQ8V2F0Y2hlcj4gY2hpbGRXYXRjaGVy\ncykgewogICAgICAgIHRoaXMuemtTZXNzaW9uVGltZU91dCA9IHprU2Vzc2lv\nblRpbWVPdXQ7CiAgICAgICAgdGhpcy5jaGlsZFdhdGNoZXJzLmFkZEFsbChj\naGlsZFdhdGNoZXJzKTsKICAgIH0KCiAgICBwdWJsaWMgWm9vS2VlcGVyV2F0\nY2hlckJhc2UgYWRkQ2hpbGRXYXRjaGVyKFdhdGNoZXIgd2F0Y2hlcikgewog\nICAgICAgIHRoaXMuY2hpbGRXYXRjaGVycy5hZGQod2F0Y2hlcik7CiAgICAg\nICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgcHVibGljIFpvb0tlZXBlcldh\ndGNoZXJCYXNlIHJlbW92ZUNoaWxkV2F0Y2hlcihXYXRjaGVyIHdhdGNoZXIp\nIHsKICAgICAgICB0aGlzLmNoaWxkV2F0Y2hlcnMucmVtb3ZlKHdhdGNoZXIp\nOwogICAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICAgIEBPdmVycmlkZQog\nICAgcHVibGljIHZvaWQgcHJvY2VzcyhXYXRjaGVkRXZlbnQgZXZlbnQpIHsK\nICAgICAgICAvLyBJZiBldmVudCB0eXBlIGlzIE5PTkUsIHRoaXMgaXMgYSBj\nb25uZWN0aW9uIHN0YXR1cyBjaGFuZ2UKICAgICAgICBpZiAoZXZlbnQuZ2V0\nVHlwZSgpICE9IEV2ZW50VHlwZS5Ob25lKSB7CiAgICAgICAgICAgIExPRy5k\nZWJ1ZygiUmVjaWV2ZWQgZXZlbnQ6IHt9LCBwYXRoOiB7fSBmcm9tIFpvb0tl\nZXBlciBzZXJ2ZXIiLAogICAgICAgICAgICAgICAgICAgIGV2ZW50LmdldFR5\ncGUoKSwgZXZlbnQuZ2V0UGF0aCgpKTsKICAgICAgICAgICAgLy8gbm90aWZ5\nIHRoZSBjaGlsZCB3YXRjaGVycwogICAgICAgICAgICBub3RpZnlFdmVudChl\ndmVudCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAg\nIExPRy5kZWJ1ZygiUmVjaWV2ZWQge30gZnJvbSBab29LZWVwZXIgc2VydmVy\nIiwgZXZlbnQuZ2V0U3RhdGUoKSk7CiAgICAgICAgLy8gVE9ETzogTmVlZHMg\ndG8gaGFuZGxlIEF1dGhGYWlsZWQsIFNhc2xBdXRoZW50aWNhdGVkIGV2ZW50\ncwogICAgICAgIHN3aXRjaCAoZXZlbnQuZ2V0U3RhdGUoKSkgewogICAgICAg\nIGNhc2UgU3luY0Nvbm5lY3RlZDoKICAgICAgICAgICAgY2xpZW50Q29ubmVj\ndExhdGNoLmNvdW50RG93bigpOwogICAgICAgICAgICBicmVhazsKICAgICAg\nICBjYXNlIERpc2Nvbm5lY3RlZDoKICAgICAgICAgICAgY2xpZW50Q29ubmVj\ndExhdGNoID0gbmV3IENvdW50RG93bkxhdGNoKDEpOwogICAgICAgICAgICBM\nT0cuZGVidWcoIklnbm9yaW5nIERpc2Nvbm5lY3RlZCBldmVudCBmcm9tIFpv\nb0tlZXBlciBzZXJ2ZXIiKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAg\nY2FzZSBFeHBpcmVkOgogICAgICAgICAgICBjbGllbnRDb25uZWN0TGF0Y2gg\nPSBuZXcgQ291bnREb3duTGF0Y2goMSk7CiAgICAgICAgICAgIExPRy5lcnJv\ncigiWm9vS2VlcGVyIGNsaWVudCBjb25uZWN0aW9uIHRvIHRoZSBab29LZWVw\nZXIgc2VydmVyIGhhcyBleHBpcmVkISIpOwogICAgICAgICAgICBicmVhazsK\nICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAvLyBkbyBub3RoaW5nCiAg\nICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICAvLyBub3RpZnkg\ndGhlIGNoaWxkIHdhdGNoZXJzCiAgICAgICAgbm90aWZ5RXZlbnQoZXZlbnQp\nOwogICAgfQoKICAgIC8qKgogICAgICogV2FpdGluZyBmb3IgdGhlIFN5bmND\nb25uZWN0ZWQgZXZlbnQgZnJvbSB0aGUgWm9vS2VlcGVyIHNlcnZlcgogICAg\nICogCiAgICAgKiBAdGhyb3dzIEtlZXBlckV4Y2VwdGlvbgogICAgICogICAg\nICAgICAgICAgd2hlbiB0aGVyZSBpcyBubyBjb25uZWN0aW9uCiAgICAgKiBA\ndGhyb3dzIEludGVycnVwdGVkRXhjZXB0aW9uCiAgICAgKiAgICAgICAgICAg\nICBpbnRlcnJ1cHRlZCB3aGlsZSB3YWl0aW5nIGZvciBjb25uZWN0aW9uCiAg\nICAgKi8KICAgIHB1YmxpYyB2b2lkIHdhaXRGb3JDb25uZWN0aW9uKCkgdGhy\nb3dzIEtlZXBlckV4Y2VwdGlvbiwgSW50ZXJydXB0ZWRFeGNlcHRpb24gewog\nICAgICAgIGlmICghY2xpZW50Q29ubmVjdExhdGNoLmF3YWl0KHprU2Vzc2lv\nblRpbWVPdXQsIFRpbWVVbml0Lk1JTExJU0VDT05EUykpIHsKICAgICAgICAg\nICAgdGhyb3cgS2VlcGVyRXhjZXB0aW9uLmNyZWF0ZShLZWVwZXJFeGNlcHRp\nb24uQ29kZS5DT05ORUNUSU9OTE9TUyk7CiAgICAgICAgfQogICAgfQoKICAg\nIC8qKgogICAgICogUmV0dXJuIHpvb2tlZXBlciBzZXNzaW9uIHRpbWUgb3V0\nCiAgICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0WmtTZXNzaW9uVGltZU91dCgp\nIHsKICAgICAgICByZXR1cm4gemtTZXNzaW9uVGltZU91dDsKICAgIH0KCiAg\nICAvKioKICAgICAqIE5vdGlmeSBFdmVudCB0byBjaGlsZCB3YXRjaGVycy4K\nICAgICAqIAogICAgICogQHBhcmFtIGV2ZW50CiAgICAgKiAgICAgICAgICBX\nYXRjaGVkIGV2ZW50IHJlY2VpdmVkIGZyb20gWm9vS2VlcGVyLgogICAgICov\nCiAgICBwcml2YXRlIHZvaWQgbm90aWZ5RXZlbnQoV2F0Y2hlZEV2ZW50IGV2\nZW50KSB7CiAgICAgICAgLy8gbm90aWZ5IGNoaWxkIHdhdGNoZXJzCiAgICAg\nICAgZm9yIChXYXRjaGVyIHcgOiBjaGlsZFdhdGNoZXJzKSB7CiAgICAgICAg\nICAgIHcucHJvY2VzcyhldmVudCk7CiAgICAgICAgfQogICAgfQoKfQo=\n","encoding":"base64"}

