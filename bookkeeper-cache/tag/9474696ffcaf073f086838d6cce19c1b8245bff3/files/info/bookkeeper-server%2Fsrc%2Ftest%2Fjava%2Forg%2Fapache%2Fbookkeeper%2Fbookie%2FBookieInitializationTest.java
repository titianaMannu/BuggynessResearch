{"sha":"f19583f51fa9e82b56727d5d2c49c6873d6ea8c4","node_id":"MDQ6QmxvYjE1NzU5NTY6ZjE5NTgzZjUxZmE5ZTgyYjU2NzI3ZDVkMmM0OWM2ODczZDZlYThjNA==","size":16999,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/f19583f51fa9e82b56727d5d2c49c6873d6ea8c4","content":"LyoqCiAqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91\nbmRhdGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRv\nciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAq\nIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGlu\nZm9ybWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRo\nZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5z\nZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21w\nbGlhbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBh\nIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICBodHRwOi8vd3d3LmFw\nYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJl\ncXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0\naW5nLAogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5z\nZSBpcyBkaXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRI\nT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwg\nZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBm\nb3IgdGhlCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNz\naW9ucyBhbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAq\nCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci5ib29raWU7Cgpp\nbXBvcnQgc3RhdGljIG9yZy5qdW5pdC5Bc3NlcnQuZmFpbDsKCmltcG9ydCBq\nYXZhLmlvLkZpbGU7CmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uOwppbXBv\ncnQgamF2YS5uZXQuQmluZEV4Y2VwdGlvbjsKaW1wb3J0IGphdmEubmV0Lklu\nZXRBZGRyZXNzOwppbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuQ291bnRE\nb3duTGF0Y2g7CmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5UaW1lVW5p\ndDsKCmltcG9ydCBvcmcuamJvc3MubmV0dHkuY2hhbm5lbC5DaGFubmVsRXhj\nZXB0aW9uOwppbXBvcnQganVuaXQuZnJhbWV3b3JrLkFzc2VydDsKCmltcG9y\ndCBvcmcuYXBhY2hlLmJvb2trZWVwZXIuYm9va2llLkxlZGdlckRpcnNNYW5h\nZ2VyLk5vV3JpdGFibGVMZWRnZXJEaXJFeGNlcHRpb247CmltcG9ydCBvcmcu\nYXBhY2hlLmJvb2trZWVwZXIuY29uZi5UZXN0QktDb25maWd1cmF0aW9uOwpp\nbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNvbmYuQ2xpZW50Q29uZmln\ndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5jb25mLlNl\ncnZlckNvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVw\nZXIuY2xpZW50LkJvb2tLZWVwZXJBZG1pbjsKaW1wb3J0IG9yZy5hcGFjaGUu\nYm9va2tlZXBlci5wcm90by5Cb29raWVTZXJ2ZXI7CmltcG9ydCBvcmcuYXBh\nY2hlLmJvb2trZWVwZXIudGVzdC5ab29LZWVwZXJVdGlsOwppbXBvcnQgb3Jn\nLmFwYWNoZS5ib29ra2VlcGVyLnV0aWwuRGlza0NoZWNrZXIuRGlza0Vycm9y\nRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmlvLkZpbGVV\ndGlsczsKaW1wb3J0IG9yZy5hcGFjaGUuem9va2VlcGVyLldhdGNoZWRFdmVu\ndDsKaW1wb3J0IG9yZy5hcGFjaGUuem9va2VlcGVyLldhdGNoZXI7CmltcG9y\ndCBvcmcuYXBhY2hlLnpvb2tlZXBlci5ab29LZWVwZXI7CmltcG9ydCBvcmcu\nYXBhY2hlLnpvb2tlZXBlci5kYXRhLlN0YXQ7CmltcG9ydCBvcmcuYXBhY2hl\nLnpvb2tlZXBlci5LZWVwZXJFeGNlcHRpb247CmltcG9ydCBvcmcuanVuaXQu\nQWZ0ZXI7CmltcG9ydCBvcmcuanVuaXQuQmVmb3JlOwppbXBvcnQgb3JnLmp1\nbml0LlRlc3Q7CmltcG9ydCBvcmcuc2xmNGouTG9nZ2VyOwppbXBvcnQgb3Jn\nLnNsZjRqLkxvZ2dlckZhY3Rvcnk7CgovKioKICogVGVzdGluZyBib29raWUg\naW5pdGlhbGl6YXRpb24gY2FzZXMKICovCnB1YmxpYyBjbGFzcyBCb29raWVJ\nbml0aWFsaXphdGlvblRlc3QgewogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwg\nTG9nZ2VyIExPRyA9IExvZ2dlckZhY3RvcnkKICAgICAgICAgICAgLmdldExv\nZ2dlcihCb29raWVJbml0aWFsaXphdGlvblRlc3QuY2xhc3MpOwogICAgWm9v\nS2VlcGVyVXRpbCB6a3V0aWw7CiAgICBab29LZWVwZXIgemtjID0gbnVsbDsK\nICAgIFpvb0tlZXBlciBuZXd6ayA9IG51bGw7CgogICAgQEJlZm9yZQogICAg\ncHVibGljIHZvaWQgc2V0dXBab29LZWVwZXIoKSB0aHJvd3MgRXhjZXB0aW9u\nIHsKICAgICAgICB6a3V0aWwgPSBuZXcgWm9vS2VlcGVyVXRpbCgpOwogICAg\nICAgIHprdXRpbC5zdGFydFNlcnZlcigpOwogICAgICAgIHprYyA9IHprdXRp\nbC5nZXRab29LZWVwZXJDbGllbnQoKTsKICAgIH0KCiAgICBAQWZ0ZXIKICAg\nIHB1YmxpYyB2b2lkIHRlYXJEb3duWm9vS2VlcGVyKCkgdGhyb3dzIEV4Y2Vw\ndGlvbiB7CiAgICAgICAgaWYgKG5ld3prICE9IG51bGwpIHsKICAgICAgICAg\nICAgbmV3emsuY2xvc2UoKTsKICAgICAgICB9CiAgICAgICAgemt1dGlsLmtp\nbGxTZXJ2ZXIoKTsKICAgIH0KCiAgICBwcml2YXRlIHN0YXRpYyBjbGFzcyBN\nb2NrQm9va2llIGV4dGVuZHMgQm9va2llIHsKICAgICAgICBNb2NrQm9va2ll\nKFNlcnZlckNvbmZpZ3VyYXRpb24gY29uZikgdGhyb3dzIElPRXhjZXB0aW9u\nLAogICAgICAgICAgICAgICAgS2VlcGVyRXhjZXB0aW9uLCBJbnRlcnJ1cHRl\nZEV4Y2VwdGlvbiwgQm9va2llRXhjZXB0aW9uIHsKICAgICAgICAgICAgc3Vw\nZXIoY29uZik7CiAgICAgICAgfQoKICAgICAgICB2b2lkIHRlc3RSZWdpc3Rl\nckJvb2tpZShTZXJ2ZXJDb25maWd1cmF0aW9uIGNvbmYpIHRocm93cyBJT0V4\nY2VwdGlvbiB7CiAgICAgICAgICAgIHN1cGVyLnJlZ2lzdGVyQm9va2llKGNv\nbmYpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFZlcmlmeSB0\naGUgYm9va2llIHNlcnZlciBleGl0IGNvZGUuIE9uIFpvb0tlZXBlciBleGNl\ncHRpb24sIHNob3VsZCByZXR1cm4KICAgICAqIGV4aXQgY29kZSBaS19SRUdf\nRkFJTCA9IDQKICAgICAqLwogICAgQFRlc3QodGltZW91dCA9IDIwMDAwKQog\nICAgcHVibGljIHZvaWQgdGVzdEV4aXRDb2RlWktfUkVHX0ZBSUwoKSB0aHJv\nd3MgRXhjZXB0aW9uIHsKICAgICAgICBGaWxlIHRtcERpciA9IEZpbGUuY3Jl\nYXRlVGVtcEZpbGUoImJvb2tpZSIsICJ0ZXN0Iik7CiAgICAgICAgdG1wRGly\nLmRlbGV0ZSgpOwogICAgICAgIHRtcERpci5ta2RpcigpOwoKICAgICAgICBm\naW5hbCBTZXJ2ZXJDb25maWd1cmF0aW9uIGNvbmYgPSBUZXN0QktDb25maWd1\ncmF0aW9uLm5ld1NlcnZlckNvbmZpZ3VyYXRpb24oKQogICAgICAgICAgICAg\nICAgLnNldFprU2VydmVycyhudWxsKS5zZXRKb3VybmFsRGlyTmFtZSh0bXBE\naXIuZ2V0UGF0aCgpKQogICAgICAgICAgICAgICAgLnNldExlZGdlckRpck5h\nbWVzKG5ldyBTdHJpbmdbXSB7IHRtcERpci5nZXRQYXRoKCkgfSk7CgogICAg\nICAgIC8vIHNpbXVsYXRpbmcgWm9vS2VlcGVyIGV4Y2VwdGlvbiBieSBhc3Np\nZ25pbmcgYSBjbG9zZWQgemsgY2xpZW50IHRvIGJrCiAgICAgICAgQm9va2ll\nU2VydmVyIGJrU2VydmVyID0gbmV3IEJvb2tpZVNlcnZlcihjb25mKSB7CiAg\nICAgICAgICAgIHByb3RlY3RlZCBCb29raWUgbmV3Qm9va2llKFNlcnZlckNv\nbmZpZ3VyYXRpb24gY29uZikKICAgICAgICAgICAgICAgICAgICB0aHJvd3Mg\nSU9FeGNlcHRpb24sIEtlZXBlckV4Y2VwdGlvbiwgSW50ZXJydXB0ZWRFeGNl\ncHRpb24sCiAgICAgICAgICAgICAgICAgICAgQm9va2llRXhjZXB0aW9uIHsK\nICAgICAgICAgICAgICAgIE1vY2tCb29raWUgYm9va2llID0gbmV3IE1vY2tC\nb29raWUoY29uZik7CiAgICAgICAgICAgICAgICBib29raWUuemsgPSB6a2M7\nCiAgICAgICAgICAgICAgICB6a2MuY2xvc2UoKTsKICAgICAgICAgICAgICAg\nIHJldHVybiBib29raWU7CiAgICAgICAgICAgIH07CiAgICAgICAgfTsKCiAg\nICAgICAgYmtTZXJ2ZXIuc3RhcnQoKTsKICAgICAgICBia1NlcnZlci5qb2lu\nKCk7CiAgICAgICAgQXNzZXJ0LmFzc2VydEVxdWFscygiRmFpbGVkIHRvIHJl\ndHVybiBFeGl0Q29kZS5aS19SRUdfRkFJTCIsCiAgICAgICAgICAgICAgICBF\neGl0Q29kZS5aS19SRUdfRkFJTCwgYmtTZXJ2ZXIuZ2V0RXhpdENvZGUoKSk7\nCiAgICB9CgogICAgQFRlc3QodGltZW91dCA9IDIwMDAwKQogICAgcHVibGlj\nIHZvaWQgdGVzdEJvb2tpZVJlZ2lzdHJhdGlvbldpdGhTYW1lWm9vS2VlcGVy\nQ2xpZW50KCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgRmlsZSB0bXBE\naXIgPSBGaWxlLmNyZWF0ZVRlbXBGaWxlKCJib29raWUiLCAidGVzdCIpOwog\nICAgICAgIHRtcERpci5kZWxldGUoKTsKICAgICAgICB0bXBEaXIubWtkaXIo\nKTsKCiAgICAgICAgZmluYWwgU2VydmVyQ29uZmlndXJhdGlvbiBjb25mID0g\nVGVzdEJLQ29uZmlndXJhdGlvbi5uZXdTZXJ2ZXJDb25maWd1cmF0aW9uKCkK\nICAgICAgICAgICAgICAgIC5zZXRaa1NlcnZlcnMobnVsbCkuc2V0Sm91cm5h\nbERpck5hbWUodG1wRGlyLmdldFBhdGgoKSkKICAgICAgICAgICAgICAgIC5z\nZXRMZWRnZXJEaXJOYW1lcyhuZXcgU3RyaW5nW10geyB0bXBEaXIuZ2V0UGF0\naCgpIH0pOwoKICAgICAgICBmaW5hbCBTdHJpbmcgYmtSZWdQYXRoID0gY29u\nZi5nZXRaa0F2YWlsYWJsZUJvb2tpZXNQYXRoKCkgKyAiLyIKICAgICAgICAg\nICAgICAgICsgSW5ldEFkZHJlc3MuZ2V0TG9jYWxIb3N0KCkuZ2V0SG9zdEFk\nZHJlc3MoKSArICI6IgogICAgICAgICAgICAgICAgKyBjb25mLmdldEJvb2tp\nZVBvcnQoKTsKCiAgICAgICAgTW9ja0Jvb2tpZSBiID0gbmV3IE1vY2tCb29r\naWUoY29uZik7CiAgICAgICAgYi56ayA9IHprYzsKICAgICAgICBiLnRlc3RS\nZWdpc3RlckJvb2tpZShjb25mKTsKICAgICAgICBBc3NlcnQuYXNzZXJ0Tm90\nTnVsbCgiQm9va2llIHJlZ2lzdHJhdGlvbiBub2RlIGRvZXNuJ3QgZXhpc3Rz\nISIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgemtjLmV4aXN0cyhi\na1JlZ1BhdGgsIGZhbHNlKSk7CgogICAgICAgIC8vIHRlc3QgcmVnaXN0ZXIg\nYm9va2llIGFnYWluIGlmIHRoZSByZWdpc3RlcmF0aW9uIG5vZGUgaXMgY3Jl\nYXRlZCBieSBpdHNlbGYuCiAgICAgICAgYi50ZXN0UmVnaXN0ZXJCb29raWUo\nY29uZik7CiAgICAgICAgQXNzZXJ0LmFzc2VydE5vdE51bGwoIkJvb2tpZSBy\nZWdpc3RyYXRpb24gbm9kZSBkb2Vzbid0IGV4aXN0cyEiLAogICAgICAgICAg\nICAgICAgemtjLmV4aXN0cyhia1JlZ1BhdGgsIGZhbHNlKSk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBWZXJpZnkgdGhlIGJvb2tpZSByZWcuIFJlc3RhcnRp\nbmcgYm9va2llIHNlcnZlciB3aWxsIHdhaXQgZm9yIHRoZSBzZXNzaW9uCiAg\nICAgKiB0aW1lb3V0IHdoZW4gcHJldmlvdXMgcmVnIG5vZGUgZXhpc3RzIGlu\nIHprLiBPbiB6Tm9kZSBkZWxldGUgZXZlbnQsCiAgICAgKiBzaG91bGQgY29u\ndGludWUgc3RhcnR1cAogICAgICovCiAgICBAVGVzdCh0aW1lb3V0ID0gMjAw\nMDApCiAgICBwdWJsaWMgdm9pZCB0ZXN0Qm9va2llUmVnaXN0cmF0aW9uKCkg\ndGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgRmlsZSB0bXBEaXIgPSBGaWxl\nLmNyZWF0ZVRlbXBGaWxlKCJib29raWUiLCAidGVzdCIpOwogICAgICAgIHRt\ncERpci5kZWxldGUoKTsKICAgICAgICB0bXBEaXIubWtkaXIoKTsKCiAgICAg\nICAgZmluYWwgU2VydmVyQ29uZmlndXJhdGlvbiBjb25mID0gVGVzdEJLQ29u\nZmlndXJhdGlvbi5uZXdTZXJ2ZXJDb25maWd1cmF0aW9uKCkKICAgICAgICAg\nICAgICAgIC5zZXRaa1NlcnZlcnMobnVsbCkuc2V0Sm91cm5hbERpck5hbWUo\ndG1wRGlyLmdldFBhdGgoKSkKICAgICAgICAgICAgICAgIC5zZXRMZWRnZXJE\naXJOYW1lcyhuZXcgU3RyaW5nW10geyB0bXBEaXIuZ2V0UGF0aCgpIH0pOwoK\nICAgICAgICBmaW5hbCBTdHJpbmcgYmtSZWdQYXRoID0gY29uZi5nZXRaa0F2\nYWlsYWJsZUJvb2tpZXNQYXRoKCkgKyAiLyIKICAgICAgICAgICAgICAgICsg\nSW5ldEFkZHJlc3MuZ2V0TG9jYWxIb3N0KCkuZ2V0SG9zdEFkZHJlc3MoKSAr\nICI6IgogICAgICAgICAgICAgICAgKyBjb25mLmdldEJvb2tpZVBvcnQoKTsK\nCiAgICAgICAgTW9ja0Jvb2tpZSBiID0gbmV3IE1vY2tCb29raWUoY29uZik7\nCiAgICAgICAgYi56ayA9IHprYzsKICAgICAgICBiLnRlc3RSZWdpc3RlckJv\nb2tpZShjb25mKTsKICAgICAgICBTdGF0IGJrUmVnTm9kZTEgPSB6a2MuZXhp\nc3RzKGJrUmVnUGF0aCwgZmFsc2UpOwogICAgICAgIEFzc2VydC5hc3NlcnRO\nb3ROdWxsKCJCb29raWUgcmVnaXN0cmF0aW9uIG5vZGUgZG9lc24ndCBleGlz\ndHMhIiwKICAgICAgICAgICAgICAgIGJrUmVnTm9kZTEpOwoKICAgICAgICAv\nLyBzaW11bGF0aW5nIGJvb2tpZSByZXN0YXJ0LCBvbiByZXN0YXJ0IGJvb2tp\nZSB3aWxsIGNyZWF0ZSBuZXcKICAgICAgICAvLyB6a2NsaWVudCBhbmQgZG9p\nbmcgdGhlIHJlZ2lzdHJhdGlvbi4KICAgICAgICBjcmVhdGVOZXdaS0NsaWVu\ndCgpOwogICAgICAgIGIuemsgPSBuZXd6azsKCiAgICAgICAgLy8gZGVsZXRp\nbmcgdGhlIHpub2RlLCBzbyB0aGF0IHRoZSBib29raWUgcmVnaXN0cmF0aW9u\nIHNob3VsZAogICAgICAgIC8vIGNvbnRpbnVlIHN1Y2Nlc3NmdWxseSBvbiBO\nb2RlRGVsZXRlZCBldmVudAogICAgICAgIG5ldyBUaHJlYWQoKSB7CiAgICAg\nICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICBwdWJsaWMgdm9pZCBydW4o\nKSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAg\nIFRocmVhZC5zbGVlcChjb25mLmdldFprVGltZW91dCgpIC8gMyk7CiAgICAg\nICAgICAgICAgICAgICAgemtjLmRlbGV0ZShia1JlZ1BhdGgsIC0xKTsKICAg\nICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAg\nICAgICAgICAgICAgLy8gTm90IGhhbmRsaW5nLCBzaW5jZSB0aGUgdGVzdFJl\nZ2lzdGVyQm9va2llIHdpbGwgZmFpbAogICAgICAgICAgICAgICAgICAgIExP\nRy5lcnJvcigiRmFpbGVkIHRvIGRlbGV0ZSB0aGUgem5vZGUgOiIgKyBia1Jl\nZ1BhdGgsIGUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAg\nICAgICAgfS5zdGFydCgpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGIu\ndGVzdFJlZ2lzdGVyQm9va2llKGNvbmYpOwogICAgICAgIH0gY2F0Y2ggKElP\nRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgVGhyb3dhYmxlIHQgPSBlLmdl\ndENhdXNlKCk7CiAgICAgICAgICAgIGlmICh0IGluc3RhbmNlb2YgS2VlcGVy\nRXhjZXB0aW9uKSB7CiAgICAgICAgICAgICAgICBLZWVwZXJFeGNlcHRpb24g\na2UgPSAoS2VlcGVyRXhjZXB0aW9uKSB0OwogICAgICAgICAgICAgICAgQXNz\nZXJ0LmFzc2VydFRydWUoIkVycm9yQ29kZToiICsga2UuY29kZSgpCiAgICAg\nICAgICAgICAgICAgICAgICAgICsgIiwgUmVnaXN0cmF0aW9uIG5vZGUgZXhp\nc3RzIiwKICAgICAgICAgICAgICAgICAgICAgICAga2UuY29kZSgpICE9IEtl\nZXBlckV4Y2VwdGlvbi5Db2RlLk5PREVFWElTVFMpOwogICAgICAgICAgICB9\nCiAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgfQoKICAgICAgICAvLyB2\nZXJpZnkgZXBoZW1lcmFsIG93bmVyIG9mIHRoZSBia1JlZyB6bm9kZQogICAg\nICAgIFN0YXQgYmtSZWdOb2RlMiA9IG5ld3prLmV4aXN0cyhia1JlZ1BhdGgs\nIGZhbHNlKTsKICAgICAgICBBc3NlcnQuYXNzZXJ0Tm90TnVsbCgiQm9va2ll\nIHJlZ2lzdHJhdGlvbiBoYXMgYmVlbiBmYWlsZWQiLCBia1JlZ05vZGUyKTsK\nICAgICAgICBBc3NlcnQuYXNzZXJ0VHJ1ZSgiQm9va2llIGlzIHJlZmVycmlu\nZyB0byBvbGQgcmVnaXN0cmF0aW9uIHpub2RlOiIKICAgICAgICAgICAgICAg\nICsgYmtSZWdOb2RlMSArICIsIE5ldyBaTm9kZToiICsgYmtSZWdOb2RlMiwg\nYmtSZWdOb2RlMQogICAgICAgICAgICAgICAgLmdldEVwaGVtZXJhbE93bmVy\nKCkgIT0gYmtSZWdOb2RlMi5nZXRFcGhlbWVyYWxPd25lcigpKTsKICAgIH0K\nCiAgICAvKioKICAgICAqIFZlcmlmeSB0aGUgYm9va2llIHJlZ2lzdHJhdGlv\nbiwgaXQgc2hvdWxkIHRocm93CiAgICAgKiBLZWVwZXJFeGNlcHRpb24uTm9k\nZUV4aXN0c0V4Y2VwdGlvbiBpZiB0aGUgem5vZGUgc3RpbGwgZXhpc3RzIGV2\nZW4gYWZ0ZXIKICAgICAqIHRoZSB6ayBzZXNzaW9uIHRpbWVvdXQuCiAgICAg\nKi8KICAgIEBUZXN0KHRpbWVvdXQgPSAzMDAwMCkKICAgIHB1YmxpYyB2b2lk\nIHRlc3RSZWdOb2RlRXhpc3RzQWZ0ZXJTZXNzaW9uVGltZU91dCgpIHRocm93\ncyBFeGNlcHRpb24gewogICAgICAgIEZpbGUgdG1wRGlyID0gRmlsZS5jcmVh\ndGVUZW1wRmlsZSgiYm9va2llIiwgInRlc3QiKTsKICAgICAgICB0bXBEaXIu\nZGVsZXRlKCk7CiAgICAgICAgdG1wRGlyLm1rZGlyKCk7CgogICAgICAgIFNl\ncnZlckNvbmZpZ3VyYXRpb24gY29uZiA9IFRlc3RCS0NvbmZpZ3VyYXRpb24u\nbmV3U2VydmVyQ29uZmlndXJhdGlvbigpLnNldFprU2VydmVycyhudWxsKQog\nICAgICAgICAgICAgICAgLnNldEpvdXJuYWxEaXJOYW1lKHRtcERpci5nZXRQ\nYXRoKCkpLnNldExlZGdlckRpck5hbWVzKAogICAgICAgICAgICAgICAgICAg\nICAgICBuZXcgU3RyaW5nW10geyB0bXBEaXIuZ2V0UGF0aCgpIH0pOwoKICAg\nICAgICBTdHJpbmcgYmtSZWdQYXRoID0gY29uZi5nZXRaa0F2YWlsYWJsZUJv\nb2tpZXNQYXRoKCkgKyAiLyIKICAgICAgICAgICAgICAgICsgSW5ldEFkZHJl\nc3MuZ2V0TG9jYWxIb3N0KCkuZ2V0SG9zdEFkZHJlc3MoKSArICI6IgogICAg\nICAgICAgICAgICAgKyBjb25mLmdldEJvb2tpZVBvcnQoKTsKCiAgICAgICAg\nTW9ja0Jvb2tpZSBiID0gbmV3IE1vY2tCb29raWUoY29uZik7CiAgICAgICAg\nYi56ayA9IHprYzsKICAgICAgICBiLnRlc3RSZWdpc3RlckJvb2tpZShjb25m\nKTsKICAgICAgICBTdGF0IGJrUmVnTm9kZTEgPSB6a2MuZXhpc3RzKGJrUmVn\nUGF0aCwgZmFsc2UpOwogICAgICAgIEFzc2VydC5hc3NlcnROb3ROdWxsKCJC\nb29raWUgcmVnaXN0cmF0aW9uIG5vZGUgZG9lc24ndCBleGlzdHMhIiwKICAg\nICAgICAgICAgICAgIGJrUmVnTm9kZTEpOwoKICAgICAgICAvLyBzaW11bGF0\naW5nIGJvb2tpZSByZXN0YXJ0LCBvbiByZXN0YXJ0IGJvb2tpZSB3aWxsIGNy\nZWF0ZSBuZXcKICAgICAgICAvLyB6a2NsaWVudCBhbmQgZG9pbmcgdGhlIHJl\nZ2lzdHJhdGlvbi4KICAgICAgICBjcmVhdGVOZXdaS0NsaWVudCgpOwogICAg\nICAgIGIuemsgPSBuZXd6azsKICAgICAgICB0cnkgewogICAgICAgICAgICBi\nLnRlc3RSZWdpc3RlckJvb2tpZShjb25mKTsKICAgICAgICAgICAgZmFpbCgi\nU2hvdWxkIHRocm93IE5vZGVFeGlzdHNFeGNlcHRpb24gYXMgdGhlIHpub2Rl\nIGlzIG5vdCBnZXR0aW5nIGV4cGlyZWQiKTsKICAgICAgICB9IGNhdGNoIChJ\nT0V4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIFRocm93YWJsZSB0ID0gZS5n\nZXRDYXVzZSgpOwogICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIEtlZXBl\nckV4Y2VwdGlvbikgewogICAgICAgICAgICAgICAgS2VlcGVyRXhjZXB0aW9u\nIGtlID0gKEtlZXBlckV4Y2VwdGlvbikgdDsKICAgICAgICAgICAgICAgIEFz\nc2VydC5hc3NlcnRUcnVlKCJFcnJvckNvZGU6IiArIGtlLmNvZGUoKQogICAg\nICAgICAgICAgICAgICAgICAgICArICIsIFJlZ2lzdHJhdGlvbiBub2RlIGRv\nZXNuJ3QgZXhpc3RzIiwKICAgICAgICAgICAgICAgICAgICAgICAga2UuY29k\nZSgpID09IEtlZXBlckV4Y2VwdGlvbi5Db2RlLk5PREVFWElTVFMpOwoKICAg\nICAgICAgICAgICAgIC8vIHZlcmlmeSBlcGhlbWVyYWwgb3duZXIgb2YgdGhl\nIGJrUmVnIHpub2RlCiAgICAgICAgICAgICAgICBTdGF0IGJrUmVnTm9kZTIg\nPSBuZXd6ay5leGlzdHMoYmtSZWdQYXRoLCBmYWxzZSk7CiAgICAgICAgICAg\nICAgICBBc3NlcnQuYXNzZXJ0Tm90TnVsbCgiQm9va2llIHJlZ2lzdHJhdGlv\nbiBoYXMgYmVlbiBmYWlsZWQiLAogICAgICAgICAgICAgICAgICAgICAgICBi\na1JlZ05vZGUyKTsKICAgICAgICAgICAgICAgIEFzc2VydC5hc3NlcnRUcnVl\nKAogICAgICAgICAgICAgICAgICAgICAgICAiQm9va2llIHdyb25nbHkgcmVn\naXN0ZXJlZC4gT2xkIHJlZ2lzdHJhdGlvbiB6bm9kZToiCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgKyBia1JlZ05vZGUxICsgIiwgTmV3IHpu\nb2RlOiIgKyBia1JlZ05vZGUyLAogICAgICAgICAgICAgICAgICAgICAgICBi\na1JlZ05vZGUxLmdldEVwaGVtZXJhbE93bmVyKCkgPT0gYmtSZWdOb2RlMgog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXRFcGhlbWVyYWxP\nd25lcigpKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAg\nfQogICAgICAgICAgICB0aHJvdyBlOwogICAgICAgIH0KICAgIH0KCiAgICAv\nKioKICAgICAqIFZlcmlmeSBkdXBsaWNhdGUgYm9va2llIHNlcnZlciBzdGFy\ndHVwLiBTaG91bGQgdGhyb3cKICAgICAqIGphdmEubmV0LkJpbmRFeGNlcHRp\nb24gaWYgYWxyZWFkeSBCSyBzZXJ2ZXIgaXMgcnVubmluZwogICAgICovCiAg\nICBAVGVzdCh0aW1lb3V0ID0gMjAwMDApCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nRHVwbGljYXRlQm9va2llU2VydmVyU3RhcnR1cCgpIHRocm93cyBFeGNlcHRp\nb24gewogICAgICAgIEZpbGUgdG1wRGlyID0gRmlsZS5jcmVhdGVUZW1wRmls\nZSgiYm9va2llIiwgInRlc3QiKTsKICAgICAgICB0bXBEaXIuZGVsZXRlKCk7\nCiAgICAgICAgdG1wRGlyLm1rZGlyKCk7CgogICAgICAgIFNlcnZlckNvbmZp\nZ3VyYXRpb24gY29uZiA9IFRlc3RCS0NvbmZpZ3VyYXRpb24ubmV3U2VydmVy\nQ29uZmlndXJhdGlvbigpOwogICAgICAgIGludCBwb3J0ID0gMTI1NTU7CiAg\nICAgICAgY29uZi5zZXRaa1NlcnZlcnMobnVsbCkuc2V0Qm9va2llUG9ydChw\nb3J0KS5zZXRKb3VybmFsRGlyTmFtZSgKICAgICAgICAgICAgICAgIHRtcERp\nci5nZXRQYXRoKCkpLnNldExlZGdlckRpck5hbWVzKAogICAgICAgICAgICAg\nICAgbmV3IFN0cmluZ1tdIHsgdG1wRGlyLmdldFBhdGgoKSB9KTsKICAgICAg\nICBCb29raWVTZXJ2ZXIgYnMxID0gbmV3IEJvb2tpZVNlcnZlcihjb25mKTsK\nICAgICAgICBiczEuc3RhcnQoKTsKCiAgICAgICAgLy8gc3RhcnRpbmcgYmsg\nc2VydmVyIHdpdGggc2FtZSBjb25mCiAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgQm9va2llU2VydmVyIGJzMiA9IG5ldyBCb29raWVTZXJ2ZXIoY29uZik7\nCiAgICAgICAgICAgIGJzMi5zdGFydCgpOwogICAgICAgICAgICBmYWlsKCJT\naG91bGQgdGhyb3cgQmluZEV4Y2VwdGlvbiwgYXMgdGhlIGJrIHNlcnZlciBp\ncyBhbHJlYWR5IHJ1bm5pbmchIik7CiAgICAgICAgfSBjYXRjaCAoQ2hhbm5l\nbEV4Y2VwdGlvbiBjZSkgewogICAgICAgICAgICBBc3NlcnQuYXNzZXJ0VHJ1\nZSgiU2hvdWxkIGJlIGNhdXNlZCBieSBhIGJpbmQgZXhjZXB0aW9uIiwKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgY2UuZ2V0Q2F1c2UoKSBpbnN0\nYW5jZW9mIEJpbmRFeGNlcHRpb24pOwogICAgICAgICAgICBBc3NlcnQuYXNz\nZXJ0VHJ1ZSgiQktTZXJ2ZXIgYWxsb3dlZCBkdXBsaWNhdGUgc3RhcnR1cHMh\nIiwKICAgICAgICAgICAgICAgICAgICBjZS5nZXRDYXVzZSgpLmdldE1lc3Nh\nZ2UoKS5jb250YWlucygiQWRkcmVzcyBhbHJlYWR5IGluIHVzZSIpKTsKICAg\nICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBWZXJpZnkgYm9va2llIHN0\nYXJ0IGJlaGF2aW91ciB3aGVuIFpLIFNlcnZlciBpcyBub3QgcnVubmluZy4K\nICAgICAqLwogICAgQFRlc3QodGltZW91dCA9IDIwMDAwKQogICAgcHVibGlj\nIHZvaWQgdGVzdFN0YXJ0Qm9va2llV2l0aG91dFpLU2VydmVyKCkgdGhyb3dz\nIEV4Y2VwdGlvbiB7CiAgICAgICAgemt1dGlsLmtpbGxTZXJ2ZXIoKTsKCiAg\nICAgICAgRmlsZSB0bXBEaXIgPSBGaWxlLmNyZWF0ZVRlbXBGaWxlKCJib29r\naWUiLCAidGVzdCIpOwogICAgICAgIHRtcERpci5kZWxldGUoKTsKICAgICAg\nICB0bXBEaXIubWtkaXIoKTsKCiAgICAgICAgZmluYWwgU2VydmVyQ29uZmln\ndXJhdGlvbiBjb25mID0gVGVzdEJLQ29uZmlndXJhdGlvbi5uZXdTZXJ2ZXJD\nb25maWd1cmF0aW9uKCkKICAgICAgICAgICAgICAgIC5zZXRaa1NlcnZlcnMo\nemt1dGlsLmdldFpvb0tlZXBlckNvbm5lY3RTdHJpbmcoKSkKICAgICAgICAg\nICAgICAgIC5zZXRaa1RpbWVvdXQoNTAwMCkuc2V0Sm91cm5hbERpck5hbWUo\ndG1wRGlyLmdldFBhdGgoKSkKICAgICAgICAgICAgICAgIC5zZXRMZWRnZXJE\naXJOYW1lcyhuZXcgU3RyaW5nW10geyB0bXBEaXIuZ2V0UGF0aCgpIH0pOwog\nICAgICAgIHRyeSB7CiAgICAgICAgICAgIG5ldyBCb29raWUoY29uZik7CiAg\nICAgICAgICAgIGZhaWwoIlNob3VsZCB0aHJvdyBDb25uZWN0aW9uTG9zc0V4\nY2VwdGlvbiBhcyBaS1NlcnZlciBpcyBub3QgcnVubmluZyEiKTsKICAgICAg\nICB9IGNhdGNoIChLZWVwZXJFeGNlcHRpb24uQ29ubmVjdGlvbkxvc3NFeGNl\ncHRpb24gZSkgewogICAgICAgICAgICAvLyBleHBlY3RlZCBiZWhhdmlvdXIK\nICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBGaWxlVXRpbHMuZGVs\nZXRlRGlyZWN0b3J5KHRtcERpcik7CiAgICAgICAgfQogICAgfQoKICAgIC8q\nKgogICAgICogVmVyaWZ5IHRoYXQgaWYgSSB0cnkgdG8gc3RhcnQgYSBib29r\naWUgd2l0aG91dCB6ayBpbml0aWFsaXplZCwgaXQgd29uJ3QKICAgICAqIHBy\nZXZlbnQgbWUgZnJvbSBzdGFydGluZyB0aGUgYm9va2llIHdoZW4gemsgaXMg\naW5pdGlhbGl6ZWQKICAgICAqLwogICAgQFRlc3QodGltZW91dCA9IDIwMDAw\nKQogICAgcHVibGljIHZvaWQgdGVzdFN0YXJ0Qm9va2llV2l0aG91dFpLSW5p\ndGlhbGl6ZWQoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBGaWxlIHRt\ncERpciA9IEZpbGUuY3JlYXRlVGVtcEZpbGUoImJvb2tpZSIsICJ0ZXN0Iik7\nCiAgICAgICAgdG1wRGlyLmRlbGV0ZSgpOwogICAgICAgIHRtcERpci5ta2Rp\ncigpOwogICAgICAgIGZpbmFsIFN0cmluZyBaS19ST09UID0gIi9sZWRnZXJz\nMiI7CgogICAgICAgIGZpbmFsIFNlcnZlckNvbmZpZ3VyYXRpb24gY29uZiA9\nIFRlc3RCS0NvbmZpZ3VyYXRpb24ubmV3U2VydmVyQ29uZmlndXJhdGlvbigp\nCiAgICAgICAgICAgIC5zZXRaa1NlcnZlcnMoemt1dGlsLmdldFpvb0tlZXBl\nckNvbm5lY3RTdHJpbmcoKSkKICAgICAgICAgICAgLnNldFprVGltZW91dCg1\nMDAwKS5zZXRKb3VybmFsRGlyTmFtZSh0bXBEaXIuZ2V0UGF0aCgpKQogICAg\nICAgICAgICAuc2V0TGVkZ2VyRGlyTmFtZXMobmV3IFN0cmluZ1tdIHsgdG1w\nRGlyLmdldFBhdGgoKSB9KTsKICAgICAgICBjb25mLnNldFprTGVkZ2Vyc1Jv\nb3RQYXRoKFpLX1JPT1QpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHRy\neSB7CiAgICAgICAgICAgICAgICBuZXcgQm9va2llKGNvbmYpOwogICAgICAg\nICAgICAgICAgZmFpbCgiU2hvdWxkIHRocm93IE5vTm9kZUV4Y2VwdGlvbiIp\nOwogICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAg\nICAgICAgICAgLy8gc2hvdWxkbid0IGJlIGFibGUgdG8gc3RhcnQKICAgICAg\nICAgICAgfQogICAgICAgICAgICBDbGllbnRDb25maWd1cmF0aW9uIGNsaWVu\ndENvbmYgPSBuZXcgQ2xpZW50Q29uZmlndXJhdGlvbigpOwogICAgICAgICAg\nICBjbGllbnRDb25mLnNldFprU2VydmVycyh6a3V0aWwuZ2V0Wm9vS2VlcGVy\nQ29ubmVjdFN0cmluZygpKTsKICAgICAgICAgICAgY2xpZW50Q29uZi5zZXRa\na0xlZGdlcnNSb290UGF0aChaS19ST09UKTsKICAgICAgICAgICAgQm9va0tl\nZXBlckFkbWluLmZvcm1hdChjbGllbnRDb25mLCBmYWxzZSwgZmFsc2UpOwoK\nICAgICAgICAgICAgQm9va2llIGIgPSBuZXcgQm9va2llKGNvbmYpOwogICAg\nICAgICAgICBiLnNodXRkb3duKCk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAg\nICAgICAgICAgRmlsZVV0aWxzLmRlbGV0ZURpcmVjdG9yeSh0bXBEaXIpOwog\nICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIENoZWNrIGRpc2sgZnVs\nbC4gRXhwZWN0ZWQgdG8gdGhyb3cgTm9Xcml0YWJsZUxlZGdlckRpckV4Y2Vw\ndGlvbgogICAgICogZHVyaW5nIGJvb2tpZSBpbml0aWFsaXNhdGlvbi4KICAg\nICAqLwogICAgQFRlc3QodGltZW91dCA9IDMwMDAwLCBleHBlY3RlZCA9IE5v\nV3JpdGFibGVMZWRnZXJEaXJFeGNlcHRpb24uY2xhc3MpCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0V2l0aERpc2tGdWxsKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAg\nICAgICAgRmlsZSB0ZW1wRGlyID0gRmlsZS5jcmVhdGVUZW1wRmlsZSgiRGlz\na0NoZWNrIiwgInRlc3QiKTsKICAgICAgICB0ZW1wRGlyLmRlbGV0ZSgpOwog\nICAgICAgIHRlbXBEaXIubWtkaXIoKTsKICAgICAgICBsb25nIHVzYWJsZVNw\nYWNlID0gdGVtcERpci5nZXRVc2FibGVTcGFjZSgpOwogICAgICAgIGxvbmcg\ndG90YWxTcGFjZSA9IHRlbXBEaXIuZ2V0VG90YWxTcGFjZSgpOwogICAgICAg\nIGZpbmFsIFNlcnZlckNvbmZpZ3VyYXRpb24gY29uZiA9IFRlc3RCS0NvbmZp\nZ3VyYXRpb24ubmV3U2VydmVyQ29uZmlndXJhdGlvbigpCiAgICAgICAgICAg\nICAgICAuc2V0WmtTZXJ2ZXJzKHprdXRpbC5nZXRab29LZWVwZXJDb25uZWN0\nU3RyaW5nKCkpCiAgICAgICAgICAgICAgICAuc2V0WmtUaW1lb3V0KDUwMDAp\nLnNldEpvdXJuYWxEaXJOYW1lKHRlbXBEaXIuZ2V0UGF0aCgpKQogICAgICAg\nICAgICAgICAgLnNldExlZGdlckRpck5hbWVzKG5ldyBTdHJpbmdbXSB7IHRl\nbXBEaXIuZ2V0UGF0aCgpIH0pOwogICAgICAgIGNvbmYuc2V0RGlza1VzYWdl\nVGhyZXNob2xkKCgxZiAtICgoZmxvYXQpIHVzYWJsZVNwYWNlIC8gKGZsb2F0\nKSB0b3RhbFNwYWNlKSkgLSAwLjA1Zik7CiAgICAgICAgY29uZi5zZXREaXNr\nVXNhZ2VXYXJuVGhyZXNob2xkKCgxZiAtICgoZmxvYXQpIHVzYWJsZVNwYWNl\nIC8gKGZsb2F0KSB0b3RhbFNwYWNlKSkgLSAwLjI1Zik7CiAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgbmV3IEJvb2tpZShjb25mKTsKICAgICAgICB9IGZp\nbmFsbHkgewogICAgICAgICAgICBGaWxlVXRpbHMuZGVsZXRlRGlyZWN0b3J5\nKHRlbXBEaXIpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIENo\nZWNrIGRpc2sgZXJyb3IgZm9yIGZpbGUuIEV4cGVjdGVkIHRvIHRocm93IERp\nc2tFcnJvckV4Y2VwdGlvbi4KICAgICAqLwogICAgQFRlc3QodGltZW91dCA9\nIDMwMDAwLCBleHBlY3RlZCA9IERpc2tFcnJvckV4Y2VwdGlvbi5jbGFzcykK\nICAgIHB1YmxpYyB2b2lkIHRlc3RXaXRoRGlza0Vycm9yKCkgdGhyb3dzIEV4\nY2VwdGlvbiB7CiAgICAgICAgRmlsZSBwYXJlbnQgPSBGaWxlLmNyZWF0ZVRl\nbXBGaWxlKCJEaXNrQ2hlY2siLCAidGVzdCIpOwogICAgICAgIHBhcmVudC5k\nZWxldGUoKTsKICAgICAgICBwYXJlbnQubWtkaXIoKTsKICAgICAgICBGaWxl\nIGNoaWxkID0gRmlsZS5jcmVhdGVUZW1wRmlsZSgiRGlza0NoZWNrIiwgInRl\nc3QiLCBwYXJlbnQpOwogICAgICAgIGZpbmFsIFNlcnZlckNvbmZpZ3VyYXRp\nb24gY29uZiA9IFRlc3RCS0NvbmZpZ3VyYXRpb24ubmV3U2VydmVyQ29uZmln\ndXJhdGlvbigpCiAgICAgICAgICAgICAgICAuc2V0WmtTZXJ2ZXJzKHprdXRp\nbC5nZXRab29LZWVwZXJDb25uZWN0U3RyaW5nKCkpCiAgICAgICAgICAgICAg\nICAuc2V0WmtUaW1lb3V0KDUwMDApLnNldEpvdXJuYWxEaXJOYW1lKGNoaWxk\nLmdldFBhdGgoKSkKICAgICAgICAgICAgICAgIC5zZXRMZWRnZXJEaXJOYW1l\ncyhuZXcgU3RyaW5nW10geyBjaGlsZC5nZXRQYXRoKCkgfSk7CiAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgLy8gTGVkZ2VyRGlyc01hbmFnZXIjaW5pdCgp\nIGlzIHVzZWQgaW4gQm9va2llIGluc3RhbnRpYXRpb24uCiAgICAgICAgICAg\nIC8vIFNpbXVsYXRpbmcgZGlzayBlcnJvcnMgYnkgZGlyZWN0bHkgY2FsbGlu\nZyAjaW5pdAogICAgICAgICAgICBMZWRnZXJEaXJzTWFuYWdlciBsZG0gPSBu\nZXcgTGVkZ2VyRGlyc01hbmFnZXIoY29uZiwgY29uZi5nZXRMZWRnZXJEaXJz\nKCkpOwogICAgICAgICAgICBsZG0uaW5pdCgpOwogICAgICAgIH0gZmluYWxs\neSB7CiAgICAgICAgICAgIEZpbGVVdGlscy5kZWxldGVEaXJlY3RvcnkocGFy\nZW50KTsKICAgICAgICB9CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIGNyZWF0\nZU5ld1pLQ2xpZW50KCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgLy8g\nY3JlYXRlIGEgem9va2VlcGVyIGNsaWVudAogICAgICAgIExPRy5kZWJ1Zygi\nSW5zdGFudGlhdGUgWksgQ2xpZW50Iik7CiAgICAgICAgZmluYWwgQ291bnRE\nb3duTGF0Y2ggbGF0Y2ggPSBuZXcgQ291bnREb3duTGF0Y2goMSk7CiAgICAg\nICAgbmV3emsgPSBuZXcgWm9vS2VlcGVyKHprdXRpbC5nZXRab29LZWVwZXJD\nb25uZWN0U3RyaW5nKCksIDEwMDAwLAogICAgICAgICAgICAgICAgbmV3IFdh\ndGNoZXIoKSB7CiAgICAgICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAg\nICAgICAgICAgICAgICAgcHVibGljIHZvaWQgcHJvY2VzcyhXYXRjaGVkRXZl\nbnQgZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gaGFuZGxl\nIHNlc3Npb24gZGlzY29ubmVjdHMgYW5kIGV4cGlyZXMKICAgICAgICAgICAg\nICAgICAgICAgICAgaWYgKGV2ZW50LmdldFN0YXRlKCkuZXF1YWxzKAogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdhdGNoZXIuRXZlbnQuS2Vl\ncGVyU3RhdGUuU3luY0Nvbm5lY3RlZCkpIHsKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgIGxhdGNoLmNvdW50RG93bigpOwogICAgICAgICAgICAgICAg\nICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAg\nICAgfSk7CiAgICAgICAgaWYgKCFsYXRjaC5hd2FpdCgxMDAwMCwgVGltZVVu\naXQuTUlMTElTRUNPTkRTKSkgewogICAgICAgICAgICBuZXd6ay5jbG9zZSgp\nOwogICAgICAgICAgICBmYWlsKCJDb3VsZCBub3QgY29ubmVjdCB0byB6b29r\nZWVwZXIgc2VydmVyIik7CiAgICAgICAgfQogICAgfQp9Cg==\n","encoding":"base64"}

