{"sha":"17460435ab1a9a25b0cc162d4ffd49f96130c09c","node_id":"MDQ6QmxvYjE1NzU5NTY6MTc0NjA0MzVhYjFhOWEyNWIwY2MxNjJkNGZmZDQ5Zjk2MTMwYzA5Yw==","size":5090,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/17460435ab1a9a25b0cc162d4ffd49f96130c09c","content":"LyoKICoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9y\nIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBU\naGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhl\nIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNl\nIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBs\naWFuY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEg\nY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBl\naXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZv\nciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Np\nb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICoK\nICovCnBhY2thZ2Ugb3JnLmFwYWNoZS5ib29ra2VlcGVyLmJvb2tpZTsKCmlt\ncG9ydCBqYXZhLm5pby5CeXRlQnVmZmVyOwppbXBvcnQgamF2YS51dGlsLlJh\nbmRvbTsKaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkNvdW50RG93bkxh\ndGNoOwppbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuVGltZVVuaXQ7Cgpp\nbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNsaWVudC5CS0V4Y2VwdGlv\nbjsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5jbGllbnQuTGVkZ2Vy\nSGFuZGxlOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNsaWVudC5B\nc3luY0NhbGxiYWNrLkFkZENhbGxiYWNrOwppbXBvcnQgb3JnLmFwYWNoZS5i\nb29ra2VlcGVyLmNsaWVudC5Cb29rS2VlcGVyLkRpZ2VzdFR5cGU7CmltcG9y\ndCBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY29uZi5TZXJ2ZXJDb25maWd1cmF0\naW9uOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLnRlc3QuQm9va0tl\nZXBlckNsdXN0ZXJUZXN0Q2FzZTsKaW1wb3J0IG9yZy5qdW5pdC5UZXN0Owpp\nbXBvcnQgb3JnLnNsZjRqLkxvZ2dlcjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dn\nZXJGYWN0b3J5OwoKaW1wb3J0IHN0YXRpYyBvcmcuanVuaXQuQXNzZXJ0Lio7\nCgpwdWJsaWMgY2xhc3MgQm9va2llU2h1dGRvd25UZXN0IGV4dGVuZHMgQm9v\na0tlZXBlckNsdXN0ZXJUZXN0Q2FzZSB7CgogICAgcHJpdmF0ZSBmaW5hbCBz\ndGF0aWMgTG9nZ2VyIExPRyA9IExvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKEJv\nb2tpZVNodXRkb3duVGVzdC5jbGFzcyk7CgogICAgcHVibGljIEJvb2tpZVNo\ndXRkb3duVGVzdCgpIHsKICAgICAgICBzdXBlcigzKTsKICAgIH0KCiAgICBw\ncml2YXRlIExlZGdlckhhbmRsZSBsaDsKICAgIHByaXZhdGUgaW50IG51bUVu\ndHJpZXNUb1dyaXRlID0gMjAwOwogICAgcHJpdmF0ZSBpbnQgbWF4SW50ID0g\nMjE0NzQ4MzY0NzsKICAgIHByaXZhdGUgUmFuZG9tIHJuZyA9IG5ldyBSYW5k\nb20oU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCkpOwogICAgcHJpdmF0ZSBE\naWdlc3RUeXBlIGRpZ2VzdFR5cGUgPSBEaWdlc3RUeXBlLkNSQzMyOwoKICAg\nIGNsYXNzIFN5bmNPYmogewogICAgfQoKICAgIC8qKgogICAgICogVGVzdHMg\ndmVyaWZpZXMgdGhlIGJvb2trZWVwZXIgc2h1dGRvd24gd2hpbGUgd3JpdGlu\nZyBlbnRyaWVzLgogICAgICogQ29udGludW91c2x5IHJlc3RhcnRpbmcgdGhl\nIGJvb2tpZSBzZXJ2ZXIgdG8gc2VlIGFsbCB0aGUgZXh0ZXJuYWwKICAgICAq\nIHJlc291cmNlcyBhcmUgcmVsZWFzaW5nIHByb3Blcmx5LiBCT09LS0VFUEVS\nLTY3OAogICAgICovCiAgICBAVGVzdCh0aW1lb3V0ID0gMTUwMDAwKQogICAg\ncHVibGljIHZvaWQgdGVzdEJvb2tpZVJlc3RhcnRDb250aW51b3VzbHkoKSB0\naHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBmb3IgKGludCBpbmRleCA9IDA7\nIGluZGV4IDwgMTAwOyBpbmRleCsrKSB7CiAgICAgICAgICAgIFN5bmNPYmog\nc3luYyA9IG5ldyBTeW5jT2JqKCk7CiAgICAgICAgICAgIHRyeSB7CiAgICAg\nICAgICAgICAgICAvLyBDcmVhdGUgYSBsZWRnZXIKICAgICAgICAgICAgICAg\nIGxoID0gYmtjLmNyZWF0ZUxlZGdlcigzLCAyLCBkaWdlc3RUeXBlLCAiYWFh\nIi5nZXRCeXRlcygpKTsKICAgICAgICAgICAgICAgIExPRy5pbmZvKCJMZWRn\nZXIgSUQ6ICIgKyBsaC5nZXRJZCgpKTsKICAgICAgICAgICAgICAgIGZvciAo\naW50IGkgPSAwOyBpIDwgbnVtRW50cmllc1RvV3JpdGU7IGkrKykgewogICAg\nICAgICAgICAgICAgICAgIEJ5dGVCdWZmZXIgZW50cnkgPSBCeXRlQnVmZmVy\nLmFsbG9jYXRlKDQpOwogICAgICAgICAgICAgICAgICAgIGVudHJ5LnB1dElu\ndChybmcubmV4dEludChtYXhJbnQpKTsKICAgICAgICAgICAgICAgICAgICBl\nbnRyeS5wb3NpdGlvbigwKTsKCiAgICAgICAgICAgICAgICAgICAgbGguYXN5\nbmNBZGRFbnRyeShlbnRyeS5hcnJheSgpLAogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgbmV3IExlZGdlckVudHJ5QWRkQ2FsbGJhY2soKSwgc3luYyk7\nCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgTE9HLmluZm8o\nIldyb3RlICIgKyBudW1FbnRyaWVzVG9Xcml0ZQogICAgICAgICAgICAgICAg\nICAgICAgICArICIgYW5kIG5vdyBnb2luZyB0byBmYWlsIGJvb2tpZS4iKTsK\nICAgICAgICAgICAgICAgIC8vIFNodXRkb3duIG9uZSBCb29raWUgc2VydmVy\nIGFuZCByZXN0YXJ0aW5nIG5ldyBvbmUgdG8gY29udGludWUKICAgICAgICAg\nICAgICAgIC8vIHdyaXRpbmcKICAgICAgICAgICAgICAgIGJzQ29uZnMucmVt\nb3ZlKDApOwogICAgICAgICAgICAgICAgYnMuZ2V0KDApLnNodXRkb3duKCk7\nCiAgICAgICAgICAgICAgICBicy5yZW1vdmUoMCk7CiAgICAgICAgICAgICAg\nICBzdGFydE5ld0Jvb2tpZSgpOwogICAgICAgICAgICAgICAgTE9HLmluZm8o\nIlNodXRkb3duIG9uZSBib29raWUgc2VydmVyIGFuZCBzdGFydGVkIG5ldyBi\nb29raWUgc2VydmVyLi4uIik7CiAgICAgICAgICAgIH0gY2F0Y2ggKEJLRXhj\nZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgIExPRy5lcnJvcigiQ2F1Z2h0\nIEJLRXhjZXB0aW9uIiwgZSk7CiAgICAgICAgICAgICAgICBmYWlsKGUudG9T\ndHJpbmcoKSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKEludGVycnVwdGVkRXhj\nZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgIExPRy5lcnJvcigiQ2F1Z2h0\nIEludGVycnVwdGVkRXhjZXB0aW9uIiwgZSk7CiAgICAgICAgICAgICAgICBm\nYWlsKGUudG9TdHJpbmcoKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAg\nICB9CgogICAgcHJpdmF0ZSBjbGFzcyBMZWRnZXJFbnRyeUFkZENhbGxiYWNr\nIGltcGxlbWVudHMgQWRkQ2FsbGJhY2sgewogICAgICAgIEBPdmVycmlkZQog\nICAgICAgIHB1YmxpYyB2b2lkIGFkZENvbXBsZXRlKGludCByYywgTGVkZ2Vy\nSGFuZGxlIGxoLCBsb25nIGVudHJ5SWQsCiAgICAgICAgICAgICAgICBPYmpl\nY3QgY3R4KSB7CiAgICAgICAgICAgIFN5bmNPYmogeCA9IChTeW5jT2JqKSBj\ndHg7CiAgICAgICAgICAgIHN5bmNocm9uaXplZCAoeCkgewogICAgICAgICAg\nICAgICAgeC5ub3RpZnkoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAg\nIH0KCiAgICAvKioKICAgICAqIFRlc3Qgd2hldGhlciBCb29raWUgY2FuIGJl\nIHNodXRkb3duIHdoZW4gdGhlIGNhbGwgY29tZXMgaW5zaWRlIGJvb2tpZSB0\naHJlYWQuCiAgICAgKgogICAgICogQHRocm93cyBFeGNlcHRpb24KICAgICAq\nLwogICAgQFRlc3QodGltZW91dCA9IDYwMDAwKQogICAgcHVibGljIHZvaWQg\ndGVzdEJvb2tpZVNodXRkb3duRnJvbUJvb2tpZVRocmVhZCgpIHRocm93cyBF\neGNlcHRpb24gewogICAgICAgIFNlcnZlckNvbmZpZ3VyYXRpb24gY29uZiA9\nIGJzQ29uZnMuZ2V0KDApOwogICAgICAgIGtpbGxCb29raWUoMCk7CiAgICAg\nICAgZmluYWwgQ291bnREb3duTGF0Y2ggbGF0Y2ggPSBuZXcgQ291bnREb3du\nTGF0Y2goMSk7CiAgICAgICAgZmluYWwgQ291bnREb3duTGF0Y2ggc2h1dGRv\nd25Db21wbGV0ZSA9IG5ldyBDb3VudERvd25MYXRjaCgxKTsKICAgICAgICBC\nb29raWUgYm9va2llID0gbmV3IEJvb2tpZShjb25mKSB7CiAgICAgICAgICAg\nIEBPdmVycmlkZQogICAgICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB7CiAg\nICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGxhdGNo\nLmF3YWl0KCk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChJbnRlcnJ1cHRl\nZEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gSWdub3Jl\nCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0cmlnZ2VyQm9v\na2llU2h1dGRvd24oRXhpdENvZGUuQk9PS0lFX0VYQ0VQVElPTik7CiAgICAg\nICAgICAgIH0KCiAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICBz\neW5jaHJvbml6ZWQgaW50IHNodXRkb3duKGludCBleGl0Q29kZSkgewogICAg\nICAgICAgICAgICAgc3VwZXIuc2h1dGRvd24oZXhpdENvZGUpOwogICAgICAg\nICAgICAgICAgc2h1dGRvd25Db21wbGV0ZS5jb3VudERvd24oKTsKICAgICAg\nICAgICAgICAgIHJldHVybiBleGl0Q29kZTsKICAgICAgICAgICAgfQogICAg\nICAgIH07CiAgICAgICAgYm9va2llLnN0YXJ0KCk7CiAgICAgICAgLy8gYWZ0\nZXIgMSBzZWMgc3RvcCAuCiAgICAgICAgVGhyZWFkLnNsZWVwKDEwMDApOwog\nICAgICAgIGxhdGNoLmNvdW50RG93bigpOwogICAgICAgIHNodXRkb3duQ29t\ncGxldGUuYXdhaXQoNTAwMCwgVGltZVVuaXQuTUlMTElTRUNPTkRTKTsKICAg\nIH0KfQo=\n","encoding":"base64"}

