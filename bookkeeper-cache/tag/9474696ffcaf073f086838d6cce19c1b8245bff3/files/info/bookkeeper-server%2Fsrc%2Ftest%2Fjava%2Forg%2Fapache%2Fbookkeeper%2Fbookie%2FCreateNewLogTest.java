{"sha":"51b25bc297d90cb20cd95f07c0ad7afe1c4c957b","node_id":"MDQ6QmxvYjE1NzU5NTY6NTFiMjViYzI5N2Q5MGNiMjBjZDk1ZjA3YzBhZDdhZmUxYzRjOTU3Yg==","size":3498,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/51b25bc297d90cb20cd95f07c0ad7afe1c4c957b","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCnBh\nY2thZ2Ugb3JnLmFwYWNoZS5ib29ra2VlcGVyLmJvb2tpZTsKCmltcG9ydCBq\nYXZhLmlvLkZpbGU7CgppbXBvcnQganVuaXQuZnJhbWV3b3JrLkFzc2VydDsK\nCmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY29uZi5TZXJ2ZXJDb25m\naWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNvbmYu\nVGVzdEJLQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5qdW5pdC5BZnRlcjsK\naW1wb3J0IG9yZy5qdW5pdC5CZWZvcmU7CmltcG9ydCBvcmcuanVuaXQuVGVz\ndDsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXI7CmltcG9ydCBvcmcuc2xmNGou\nTG9nZ2VyRmFjdG9yeTsKCnB1YmxpYyBjbGFzcyBDcmVhdGVOZXdMb2dUZXN0\nIHsKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvZ2dlciBMT0cgPSBMb2dn\nZXJGYWN0b3J5CiAgICAuZ2V0TG9nZ2VyKENyZWF0ZU5ld0xvZ1Rlc3QuY2xh\nc3MpOwogICAgICAgIAogICAgcHJpdmF0ZSBTdHJpbmdbXSBsZWRnZXJEaXJz\nOyAKICAgIHByaXZhdGUgaW50IG51bURpcnMgPSAxMDA7CiAgICAKICAgIEBC\nZWZvcmUKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgdGhyb3dzIEV4Y2VwdGlv\nbnsKICAgICAgICBsZWRnZXJEaXJzID0gbmV3IFN0cmluZ1tudW1EaXJzXTsK\nICAgICAgICBmb3IoaW50IGkgPSAwOyBpIDwgbnVtRGlyczsgaSsrKXsKICAg\nICAgICAgICAgRmlsZSB0ZW1wID0gRmlsZS5jcmVhdGVUZW1wRmlsZSgiYm9v\na2llIiwgInRlc3QiKTsKICAgICAgICAgICAgdGVtcC5kZWxldGUoKTsKICAg\nICAgICAgICAgdGVtcC5ta2RpcigpOwogICAgICAgICAgICBGaWxlIGN1cnJl\nbnRUZW1wID0gbmV3IEZpbGUodGVtcC5nZXRBYnNvbHV0ZUZpbGUoKSArICIv\nY3VycmVudCIpOwogICAgICAgICAgICBjdXJyZW50VGVtcC5ta2RpcigpOwog\nICAgICAgICAgICBsZWRnZXJEaXJzW2ldID0gdGVtcC5nZXRQYXRoKCk7CiAg\nICAgICAgfSAgICAgICAgCiAgICB9CiAgICAKICAgIEBBZnRlcgogICAgcHVi\nbGljIHZvaWQgdGVhckRvd24oKSB0aHJvd3MgRXhjZXB0aW9uewogICAgICAg\nIGZvcihpbnQgaSA9IDA7IGkgPCBudW1EaXJzOyBpKyspewogICAgICAgICAg\nICBGaWxlIGYgPSBuZXcgRmlsZShsZWRnZXJEaXJzW2ldKTsKICAgICAgICAg\nICAgZGVsZXRlUmVjdXJzaXZlKGYpOwogICAgICAgIH0KICAgIH0KICAgIAog\nICAgcHJpdmF0ZSB2b2lkIGRlbGV0ZVJlY3Vyc2l2ZShGaWxlIGYpIHsKICAg\nICAgICBpZiAoZi5pc0RpcmVjdG9yeSgpKXsKICAgICAgICAgICAgZm9yIChG\naWxlIGMgOiBmLmxpc3RGaWxlcygpKXsKICAgICAgICAgICAgICAgIGRlbGV0\nZVJlY3Vyc2l2ZShjKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAg\nICAKICAgICAgICBmLmRlbGV0ZSgpOwogICAgfQogICAgCiAgICAvKioKICAg\nICAqIENoZWNrcyBpZiBuZXcgbG9nIGZpbGUgaWQgaXMgdmVyaWZpZWQgYWdh\naW5zdCBhbGwgZGlyZWN0b3JpZXMuCiAgICAgKiAKICAgICAqIHtAbGluayBo\ndHRwczovL2lzc3Vlcy5hcGFjaGUub3JnL2ppcmEvYnJvd3NlL0JPT0tLRUVQ\nRVItNDY1fQogICAgICogCiAgICAgKiBAdGhyb3dzIEV4Y2VwdGlvbgogICAg\nICovCiAgICBAVGVzdCh0aW1lb3V0PTYwMDAwKQogICAgcHVibGljIHZvaWQg\ndGVzdENyZWF0ZU5ld0xvZygpIHRocm93cyBFeGNlcHRpb24gewogICAgICAg\nIFNlcnZlckNvbmZpZ3VyYXRpb24gY29uZiA9IFRlc3RCS0NvbmZpZ3VyYXRp\nb24ubmV3U2VydmVyQ29uZmlndXJhdGlvbigpOwogICAgICAgICAgICAgICAg\nICAgICAKICAgICAgICAvLyBDcmVhdGluZyBhIG5ldyBjb25maWd1cmF0aW9u\nIHdpdGggYSBudW1iZXIgb2YgCiAgICAgICAgLy8gbGVkZ2VyIGRpcmVjdG9y\naWVzLgogICAgICAgIGNvbmYuc2V0TGVkZ2VyRGlyTmFtZXMobGVkZ2VyRGly\ncyk7CiAgICAgICAgTGVkZ2VyRGlyc01hbmFnZXIgbGVkZ2VyRGlyc01hbmFn\nZXIgPSBuZXcgTGVkZ2VyRGlyc01hbmFnZXIoY29uZiwgY29uZi5nZXRMZWRn\nZXJEaXJzKCkpOwogICAgICAgIEVudHJ5TG9nZ2VyIGVsID0gbmV3IEVudHJ5\nTG9nZ2VyKGNvbmYsIGxlZGdlckRpcnNNYW5hZ2VyKTsKICAgICAgICAKICAg\nICAgICAvLyBFeHRyYWN0ZWQgZnJvbSBjcmVhdGVOZXdMb2coKQogICAgICAg\nIFN0cmluZyBsb2dGaWxlTmFtZSA9IExvbmcudG9IZXhTdHJpbmcoMSkgKyAi\nLmxvZyI7CiAgICAgICAgRmlsZSBkaXIgPSBsZWRnZXJEaXJzTWFuYWdlci5w\naWNrUmFuZG9tV3JpdGFibGVEaXIoKTsKICAgICAgICBMT0cuaW5mbygiUGlj\na2VkIHRoaXMgZGlyZWN0b3J5OiAiICsgZGlyKTsKICAgICAgICBGaWxlIG5l\nd0xvZ0ZpbGUgPSBuZXcgRmlsZShkaXIsIGxvZ0ZpbGVOYW1lKTsKICAgICAg\nICBuZXdMb2dGaWxlLmNyZWF0ZU5ld0ZpbGUoKTsKICAgICAgICAKICAgICAg\nICAvLyBDYWxscyBjcmVhdGVOZXdMb2csIGFuZCB3aXRoIHRoZSBudW1iZXIg\nb2YgZGlyZWN0b3JpZXMgd2UKICAgICAgICAvLyBhcmUgdXNpbmcsIGlmIGl0\nIHBpY2tzIG9uZSBhdCByYW5kb20gaXQgd2lsbCBmYWlsLgogICAgICAgIGVs\nLmNyZWF0ZU5ld0xvZygpOwogICAgICAgIExPRy5pbmZvKCJUaGlzIGlzIHRo\nZSBjdXJyZW50IGxvZyBpZDogIiArIGVsLmdldEN1cnJlbnRMb2dJZCgpKTsK\nICAgICAgICBBc3NlcnQuYXNzZXJ0VHJ1ZSgiV3JvbmcgbG9nIGlkIiwgZWwu\nZ2V0Q3VycmVudExvZ0lkKCkgPiAxKTsKICAgIH0KCn0K\n","encoding":"base64"}

