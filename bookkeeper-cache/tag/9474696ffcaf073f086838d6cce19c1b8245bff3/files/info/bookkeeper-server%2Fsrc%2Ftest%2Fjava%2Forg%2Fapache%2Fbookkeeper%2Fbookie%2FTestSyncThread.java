{"sha":"d947dff97514d2177a72a0d9224c277b8bec9ed6","node_id":"MDQ6QmxvYjE1NzU5NTY6ZDk0N2RmZjk3NTE0ZDIxNzdhNzJhMGQ5MjI0YzI3N2I4YmVjOWVkNg==","size":12074,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/d947dff97514d2177a72a0d9224c277b8bec9ed6","content":"LyoqCiAqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91\nbmRhdGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRv\nciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAq\nIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGlu\nZm9ybWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRo\nZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5z\nZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21w\nbGlhbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBh\nIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICBodHRwOi8vd3d3LmFw\nYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJl\ncXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0\naW5nLAogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5z\nZSBpcyBkaXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRI\nT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwg\nZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBm\nb3IgdGhlCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNz\naW9ucyBhbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAq\nCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci5ib29raWU7Cgpp\nbXBvcnQgamF2YS5pby5GaWxlOwppbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlv\nbjsKaW1wb3J0IGphdmEubmlvLkJ5dGVCdWZmZXI7CgppbXBvcnQgamF2YS51\ndGlsLmNvbmN1cnJlbnQuRXhlY3V0b3JTZXJ2aWNlOwppbXBvcnQgamF2YS51\ndGlsLmNvbmN1cnJlbnQuRXhlY3V0b3JzOwppbXBvcnQgamF2YS51dGlsLmNv\nbmN1cnJlbnQuQ2FsbGFibGU7CmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVu\ndC5GdXR1cmU7CmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5UaW1lVW5p\ndDsKaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkNvdW50RG93bkxhdGNo\nOwppbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuYXRvbWljLkF0b21pY0Jv\nb2xlYW47CmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5hdG9taWMuQXRv\nbWljSW50ZWdlcjsKCmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY29u\nZi5UZXN0QktDb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5ib29r\na2VlcGVyLmNvbmYuU2VydmVyQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5h\ncGFjaGUuYm9va2tlZXBlci5ib29raWUuQ2hlY2twb2ludFNvdXJjZS5DaGVj\na3BvaW50OwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmJvb2tpZS5M\nZWRnZXJEaXJzTWFuYWdlci5MZWRnZXJEaXJzTGlzdGVuZXI7CmltcG9ydCBv\ncmcuYXBhY2hlLmJvb2trZWVwZXIuYm9va2llLkxlZGdlckRpcnNNYW5hZ2Vy\nLk5vV3JpdGFibGVMZWRnZXJEaXJFeGNlcHRpb247CgppbXBvcnQgb3JnLmFw\nYWNoZS5ib29ra2VlcGVyLmpteC5CS01CZWFuSW5mbzsKCmltcG9ydCBvcmcu\nc2xmNGouTG9nZ2VyOwppbXBvcnQgb3JnLnNsZjRqLkxvZ2dlckZhY3Rvcnk7\nCgppbXBvcnQgb3JnLmp1bml0LlRlc3Q7CmltcG9ydCBvcmcuanVuaXQuQmVm\nb3JlOwppbXBvcnQgb3JnLmp1bml0LkFmdGVyOwoKaW1wb3J0IHN0YXRpYyBv\ncmcuanVuaXQuQXNzZXJ0Lio7CgpwdWJsaWMgY2xhc3MgVGVzdFN5bmNUaHJl\nYWQgewogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9nZ2VyIExPRyA9IExv\nZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKFRlc3RTeW5jVGhyZWFkLmNsYXNzKTsK\nCiAgICBFeGVjdXRvclNlcnZpY2UgZXhlY3V0b3IgPSBudWxsOwoKICAgIEBC\nZWZvcmUKICAgIHB1YmxpYyB2b2lkIHNldHVwRXhlY3V0b3IoKSB7CiAgICAg\nICAgZXhlY3V0b3IgPSBFeGVjdXRvcnMubmV3U2luZ2xlVGhyZWFkRXhlY3V0\nb3IoKTsKICAgIH0KCiAgICBAQWZ0ZXIKICAgIHB1YmxpYyB2b2lkIHRlYXJk\nb3duRXhlY3V0b3IoKSB7CiAgICAgICAgaWYgKGV4ZWN1dG9yICE9IG51bGwp\nIHsKICAgICAgICAgICAgZXhlY3V0b3Iuc2h1dGRvd25Ob3coKTsKICAgICAg\nICAgICAgZXhlY3V0b3IgPSBudWxsOwogICAgICAgIH0KICAgIH0KCiAgICAv\nKioKICAgICAqIFRlc3QgdGhhdCBpZiBhIGZsdXNoIGlzIHRha2luZyBhIGxv\nbmcgdGltZSwKICAgICAqIHRoZSBzeW5jIHRocmVhZCB3aWxsIG5vdCBzaHV0\nZG93biB1bnRpbCBpdAogICAgICogaGFzIGZpbmlzaGVkLgogICAgICovCiAg\nICBAVGVzdCh0aW1lb3V0PTYwMDAwKQogICAgcHVibGljIHZvaWQgdGVzdFN5\nbmNUaHJlYWRMb25nU2h1dGRvd24oKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAg\nICAgICBpbnQgZmx1c2hJbnRlcnZhbCA9IDEwMDsKICAgICAgICBTZXJ2ZXJD\nb25maWd1cmF0aW9uIGNvbmYgPSBUZXN0QktDb25maWd1cmF0aW9uLm5ld1Nl\ncnZlckNvbmZpZ3VyYXRpb24oKTsKICAgICAgICBDaGVja3BvaW50U291cmNl\nIGNoZWNrcG9pbnRTb3VyY2UgPSBuZXcgRHVtbXlDaGVja3BvaW50U291cmNl\nKCk7CiAgICAgICAgTGVkZ2VyRGlyc0xpc3RlbmVyIGxpc3RlbmVyID0gbmV3\nIER1bW15TGVkZ2VyRGlyc0xpc3RlbmVyKCk7CgogICAgICAgIGZpbmFsIENv\ndW50RG93bkxhdGNoIGNoZWNrcG9pbnRDYWxsZWRMYXRjaCA9IG5ldyBDb3Vu\ndERvd25MYXRjaCgxKTsKICAgICAgICBmaW5hbCBDb3VudERvd25MYXRjaCBj\naGVja3BvaW50TGF0Y2ggPSBuZXcgQ291bnREb3duTGF0Y2goMSk7CgogICAg\nICAgIGZpbmFsIENvdW50RG93bkxhdGNoIGZsdXNoQ2FsbGVkTGF0Y2ggPSBu\nZXcgQ291bnREb3duTGF0Y2goMSk7CiAgICAgICAgZmluYWwgQ291bnREb3du\nTGF0Y2ggZmx1c2hMYXRjaCA9IG5ldyBDb3VudERvd25MYXRjaCgxKTsKICAg\nICAgICBmaW5hbCBBdG9taWNCb29sZWFuIGZhaWxlZFNvbWV3aGVyZSA9IG5l\ndyBBdG9taWNCb29sZWFuKGZhbHNlKTsKICAgICAgICBMZWRnZXJTdG9yYWdl\nIHN0b3JhZ2UgPSBuZXcgRHVtbXlMZWRnZXJTdG9yYWdlKCkgewogICAgICAg\nICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICBwdWJsaWMgdm9p\nZCBmbHVzaCgpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgICAgICAg\nICAgICAgZmx1c2hDYWxsZWRMYXRjaC5jb3VudERvd24oKTsKICAgICAgICAg\nICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBmbHVz\naExhdGNoLmF3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAo\nSW50ZXJydXB0ZWRFeGNlcHRpb24gaWUpIHsKICAgICAgICAgICAgICAgICAg\nICAgICAgVGhyZWFkLmN1cnJlbnRUaHJlYWQoKS5pbnRlcnJ1cHQoKTsKICAg\nICAgICAgICAgICAgICAgICAgICAgTE9HLmVycm9yKCJJbnRlcnJ1cHRlZCBp\nbiBmbHVzaCB0aHJlYWQiLCBpZSk7CiAgICAgICAgICAgICAgICAgICAgICAg\nIGZhaWxlZFNvbWV3aGVyZS5zZXQodHJ1ZSk7CiAgICAgICAgICAgICAgICAg\nICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIEBPdmVy\ncmlkZQogICAgICAgICAgICAgICAgcHVibGljIENoZWNrcG9pbnQgY2hlY2tw\nb2ludChDaGVja3BvaW50IGNoZWNrcG9pbnQpCiAgICAgICAgICAgICAgICAg\nICAgICAgIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgICAgICAgICAg\nICAgY2hlY2twb2ludENhbGxlZExhdGNoLmNvdW50RG93bigpOwogICAgICAg\nICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNo\nZWNrcG9pbnRMYXRjaC5hd2FpdCgpOwogICAgICAgICAgICAgICAgICAgIH0g\nY2F0Y2ggKEludGVycnVwdGVkRXhjZXB0aW9uIGllKSB7CiAgICAgICAgICAg\nICAgICAgICAgICAgIFRocmVhZC5jdXJyZW50VGhyZWFkKCkuaW50ZXJydXB0\nKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIExPRy5lcnJvcigiSW50ZXJy\ndXB0ZWQgaW4gY2hlY2twb2ludCB0aHJlYWQiLCBpZSk7CiAgICAgICAgICAg\nICAgICAgICAgICAgIGZhaWxlZFNvbWV3aGVyZS5zZXQodHJ1ZSk7CiAgICAg\nICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBj\naGVja3BvaW50OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwoK\nICAgICAgICBmaW5hbCBTeW5jVGhyZWFkIHQgPSBuZXcgU3luY1RocmVhZChj\nb25mLCBsaXN0ZW5lciwgc3RvcmFnZSwgY2hlY2twb2ludFNvdXJjZSk7CiAg\nICAgICAgdC5zdGFydCgpOwogICAgICAgIGFzc2VydFRydWUoIkNoZWNrcG9p\nbnQgc2hvdWxkIGhhdmUgYmVlbiBjYWxsZWQiLAogICAgICAgICAgICAgICAg\nICAgY2hlY2twb2ludENhbGxlZExhdGNoLmF3YWl0KDEwLCBUaW1lVW5pdC5T\nRUNPTkRTKSk7CiAgICAgICAgRnV0dXJlPEJvb2xlYW4+IGRvbmUgPSBleGVj\ndXRvci5zdWJtaXQobmV3IENhbGxhYmxlPEJvb2xlYW4+KCkgewogICAgICAg\nICAgICAgICAgcHVibGljIEJvb2xlYW4gY2FsbCgpIHsKICAgICAgICAgICAg\nICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICB0LnNodXRk\nb3duKCk7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoSW50ZXJydXB0\nZWRFeGNlcHRpb24gaWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgVGhy\nZWFkLmN1cnJlbnRUaHJlYWQoKS5pbnRlcnJ1cHQoKTsKICAgICAgICAgICAg\nICAgICAgICAgICAgTE9HLmVycm9yKCJJbnRlcnJ1cHRlZCBzaHV0dGluZyBk\nb3duIHN5bmMgdGhyZWFkIiwgaWUpOwogICAgICAgICAgICAgICAgICAgICAg\nICBmYWlsZWRTb21ld2hlcmUuc2V0KHRydWUpOwogICAgICAgICAgICAgICAg\nICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfQog\nICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAg\nICAgfQogICAgICAgICAgICB9KTsKICAgICAgICBjaGVja3BvaW50TGF0Y2gu\nY291bnREb3duKCk7CiAgICAgICAgYXNzZXJ0RmFsc2UoIlNodXRkb3duIHNo\nb3VsZG4ndCBoYXZlIGZpbmlzaGVkIiwgZG9uZS5pc0RvbmUoKSk7CiAgICAg\nICAgYXNzZXJ0VHJ1ZSgiRmx1c2ggc2hvdWxkIGhhdmUgYmVlbiBjYWxsZWQi\nLAogICAgICAgICAgICAgICAgICAgZmx1c2hDYWxsZWRMYXRjaC5hd2FpdCgx\nMCwgVGltZVVuaXQuU0VDT05EUykpOwoKICAgICAgICBhc3NlcnRGYWxzZSgi\nU2h1dGRvd24gc2hvdWxkbid0IGhhdmUgZmluaXNoZWQiLCBkb25lLmlzRG9u\nZSgpKTsKICAgICAgICBmbHVzaExhdGNoLmNvdW50RG93bigpOwoKICAgICAg\nICBhc3NlcnRUcnVlKCJTaHV0ZG93biBzaG91bGQgaGF2ZSBmaW5pc2hlZCBz\ndWNjZXNzZnVsbHkiLCBkb25lLmdldCgxMCwgVGltZVVuaXQuU0VDT05EUykp\nOwogICAgICAgIGFzc2VydEZhbHNlKCJTaG91bGRuJ3QgaGF2ZSBmYWlsZWQg\nYW55d2hlcmUiLCBmYWlsZWRTb21ld2hlcmUuZ2V0KCkpOwogICAgfQoKICAg\nIC8qKgogICAgICogVGVzdCB0aGF0IHN5bmMgdGhyZWFkIHN1c3BlbnNpb24g\nd29ya3MuCiAgICAgKiBpLmUuIHdoZW4gd2Ugc3VzcGVuZCB0aGUgc3luY3Ro\ncmVhZCwgbm90aGluZwogICAgICogd2lsbCBiZSBzeW5jZWQuCiAgICAgKi8K\nICAgIEBUZXN0KHRpbWVvdXQ9NjAwMDApCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nU3luY1RocmVhZFN1c3BlbnNpb24oKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAg\nICAgICBpbnQgZmx1c2hJbnRlcnZhbCA9IDEwMDsKICAgICAgICBTZXJ2ZXJD\nb25maWd1cmF0aW9uIGNvbmYgPSBUZXN0QktDb25maWd1cmF0aW9uLm5ld1Nl\ncnZlckNvbmZpZ3VyYXRpb24oKTsKICAgICAgICBDaGVja3BvaW50U291cmNl\nIGNoZWNrcG9pbnRTb3VyY2UgPSBuZXcgRHVtbXlDaGVja3BvaW50U291cmNl\nKCk7CiAgICAgICAgTGVkZ2VyRGlyc0xpc3RlbmVyIGxpc3RlbmVyID0gbmV3\nIER1bW15TGVkZ2VyRGlyc0xpc3RlbmVyKCk7CgogICAgICAgIGZpbmFsIEF0\nb21pY0ludGVnZXIgY2hlY2twb2ludENvdW50ID0gbmV3IEF0b21pY0ludGVn\nZXIoMCk7CiAgICAgICAgTGVkZ2VyU3RvcmFnZSBzdG9yYWdlID0gbmV3IER1\nbW15TGVkZ2VyU3RvcmFnZSgpIHsKICAgICAgICAgICAgICAgIEBPdmVycmlk\nZQogICAgICAgICAgICAgICAgcHVibGljIENoZWNrcG9pbnQgY2hlY2twb2lu\ndChDaGVja3BvaW50IGNoZWNrcG9pbnQpCiAgICAgICAgICAgICAgICAgICAg\nICAgIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgICAgICAgICAgICAg\nY2hlY2twb2ludENvdW50LmluY3JlbWVudEFuZEdldCgpOwogICAgICAgICAg\nICAgICAgICAgIHJldHVybiBjaGVja3BvaW50OwogICAgICAgICAgICAgICAg\nfQogICAgICAgICAgICB9OwogICAgICAgIGZpbmFsIFN5bmNUaHJlYWQgdCA9\nIG5ldyBTeW5jVGhyZWFkKGNvbmYsIGxpc3RlbmVyLCBzdG9yYWdlLCBjaGVj\na3BvaW50U291cmNlKTsKICAgICAgICB0LnN0YXJ0KCk7CiAgICAgICAgd2hp\nbGUgKGNoZWNrcG9pbnRDb3VudC5nZXQoKSA9PSAwKSB7CiAgICAgICAgICAg\nIFRocmVhZC5zbGVlcChmbHVzaEludGVydmFsKTsKICAgICAgICB9CiAgICAg\nICAgdC5zdXNwZW5kU3luYygpOwogICAgICAgIFRocmVhZC5zbGVlcChmbHVz\naEludGVydmFsKTsKICAgICAgICBpbnQgY291bnQgPSBjaGVja3BvaW50Q291\nbnQuZ2V0KCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCAxMDsgaSsr\nKSB7CiAgICAgICAgICAgIGFzc2VydEVxdWFscygiQ2hlY2twb2ludCBjb3Vu\ndCBzaG91bGRuJ3QgY2hhbmdlIiwgY291bnQsIGNoZWNrcG9pbnRDb3VudC5n\nZXQoKSk7CiAgICAgICAgfQogICAgICAgIHQucmVzdW1lU3luYygpOwogICAg\nICAgIGludCBpID0gMDsKICAgICAgICB3aGlsZSAoY2hlY2twb2ludENvdW50\nLmdldCgpID09IGNvdW50KSB7CiAgICAgICAgICAgIFRocmVhZC5zbGVlcChm\nbHVzaEludGVydmFsKTsKICAgICAgICAgICAgaSsrOwogICAgICAgICAgICBp\nZiAoaSA+IDEwMCkgewogICAgICAgICAgICAgICAgZmFpbCgiQ2hlY2twb2lu\ndGluZyBuZXZlciByZXN1bWVkIik7CiAgICAgICAgICAgIH0KICAgICAgICB9\nCiAgICAgICAgdC5zaHV0ZG93bigpOwogICAgfQoKICAgIC8qKgogICAgICog\nVGVzdCB0aGF0IGlmIHRoZSBsZWRnZXIgc3RvcmFnZSB0aHJvd3MgYQogICAg\nICogcnVudGltZSBleGNlcHRpb24sIHRoZSBib29raWUgd2lsbCBiZSB0b2xk\nCiAgICAgKiB0byBzaHV0ZG93bi4KICAgICAqLwogICAgQFRlc3QodGltZW91\ndD02MDAwMCkKICAgIHB1YmxpYyB2b2lkIHRlc3RTeW5jVGhyZWFkU2h1dGRv\nd25PbkVycm9yKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgaW50IGZs\ndXNoSW50ZXJ2YWwgPSAxMDA7CiAgICAgICAgU2VydmVyQ29uZmlndXJhdGlv\nbiBjb25mID0gVGVzdEJLQ29uZmlndXJhdGlvbi5uZXdTZXJ2ZXJDb25maWd1\ncmF0aW9uKCk7CiAgICAgICAgQ2hlY2twb2ludFNvdXJjZSBjaGVja3BvaW50\nU291cmNlID0gbmV3IER1bW15Q2hlY2twb2ludFNvdXJjZSgpOwogICAgICAg\nIGZpbmFsIENvdW50RG93bkxhdGNoIGZhdGFsTGF0Y2ggPSBuZXcgQ291bnRE\nb3duTGF0Y2goMSk7CiAgICAgICAgTGVkZ2VyRGlyc0xpc3RlbmVyIGxpc3Rl\nbmVyID0gbmV3IER1bW15TGVkZ2VyRGlyc0xpc3RlbmVyKCkgewogICAgICAg\nICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICBwdWJsaWMgdm9p\nZCBmYXRhbEVycm9yKCkgewogICAgICAgICAgICAgICAgICAgIGZhdGFsTGF0\nY2guY291bnREb3duKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAg\nIH07CgogICAgICAgIExlZGdlclN0b3JhZ2Ugc3RvcmFnZSA9IG5ldyBEdW1t\neUxlZGdlclN0b3JhZ2UoKSB7CiAgICAgICAgICAgICAgICBAT3ZlcnJpZGUK\nICAgICAgICAgICAgICAgIHB1YmxpYyBDaGVja3BvaW50IGNoZWNrcG9pbnQo\nQ2hlY2twb2ludCBjaGVja3BvaW50KQogICAgICAgICAgICAgICAgICAgICAg\nICB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgICAgICAgICAgICAgIHRo\ncm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKCJGYXRhbCBlcnJvciBpbiBzeW5j\nIHRocmVhZCIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9Owog\nICAgICAgIGZpbmFsIFN5bmNUaHJlYWQgdCA9IG5ldyBTeW5jVGhyZWFkKGNv\nbmYsIGxpc3RlbmVyLCBzdG9yYWdlLCBjaGVja3BvaW50U291cmNlKTsKICAg\nICAgICB0LnN0YXJ0KCk7CiAgICAgICAgYXNzZXJ0VHJ1ZSgiU2hvdWxkIGhh\ndmUgY2FsbGVkIGZhdGFsIGVycm9yIiwgZmF0YWxMYXRjaC5hd2FpdCgxMCwg\nVGltZVVuaXQuU0VDT05EUykpOwogICAgICAgIHQuc2h1dGRvd24oKTsKICAg\nIH0KCiAgICAvKioKICAgICAqIFRlc3QgdGhhdCBpZiB0aGUgbGVkZ2VyIHN0\nb3JhZ2UgdGhyb3dzCiAgICAgKiBhIGRpc2sgZnVsbCBleGNlcHRpb24sIHRo\nZSBvd25lciBvZiB0aGUgc3luYwogICAgICogdGhyZWFkIHdpbGwgYmUgbm90\naWZpZWQuCiAgICAgKi8KICAgIEBUZXN0KHRpbWVvdXQ9NjAwMDApCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0U3luY1RocmVhZERpc2tzRnVsbCgpIHRocm93cyBF\neGNlcHRpb24gewogICAgICAgIGludCBmbHVzaEludGVydmFsID0gMTAwOwog\nICAgICAgIFNlcnZlckNvbmZpZ3VyYXRpb24gY29uZiA9IFRlc3RCS0NvbmZp\nZ3VyYXRpb24ubmV3U2VydmVyQ29uZmlndXJhdGlvbigpOwogICAgICAgIENo\nZWNrcG9pbnRTb3VyY2UgY2hlY2twb2ludFNvdXJjZSA9IG5ldyBEdW1teUNo\nZWNrcG9pbnRTb3VyY2UoKTsKICAgICAgICBmaW5hbCBDb3VudERvd25MYXRj\naCBkaXNrRnVsbExhdGNoID0gbmV3IENvdW50RG93bkxhdGNoKDEpOwogICAg\nICAgIExlZGdlckRpcnNMaXN0ZW5lciBsaXN0ZW5lciA9IG5ldyBEdW1teUxl\nZGdlckRpcnNMaXN0ZW5lcigpIHsKICAgICAgICAgICAgICAgIEBPdmVycmlk\nZQogICAgICAgICAgICAgICAgcHVibGljIHZvaWQgYWxsRGlza3NGdWxsKCkg\newogICAgICAgICAgICAgICAgICAgIGRpc2tGdWxsTGF0Y2guY291bnREb3du\nKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAg\nIExlZGdlclN0b3JhZ2Ugc3RvcmFnZSA9IG5ldyBEdW1teUxlZGdlclN0b3Jh\nZ2UoKSB7CiAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAg\nICAgIHB1YmxpYyBDaGVja3BvaW50IGNoZWNrcG9pbnQoQ2hlY2twb2ludCBj\naGVja3BvaW50KQogICAgICAgICAgICAgICAgICAgICAgICB0aHJvd3MgSU9F\neGNlcHRpb24gewogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb1dy\naXRhYmxlTGVkZ2VyRGlyRXhjZXB0aW9uKCJEaXNrIGZ1bGwgZXJyb3IgaW4g\nc3luYyB0aHJlYWQiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAg\nfTsKICAgICAgICBmaW5hbCBTeW5jVGhyZWFkIHQgPSBuZXcgU3luY1RocmVh\nZChjb25mLCBsaXN0ZW5lciwgc3RvcmFnZSwgY2hlY2twb2ludFNvdXJjZSk7\nCiAgICAgICAgdC5zdGFydCgpOwogICAgICAgIGFzc2VydFRydWUoIlNob3Vs\nZCBoYXZlIGRpc2sgZnVsbCBlcnJvciIsIGRpc2tGdWxsTGF0Y2guYXdhaXQo\nMTAsIFRpbWVVbml0LlNFQ09ORFMpKTsKICAgICAgICB0LnNodXRkb3duKCk7\nCiAgICB9CgogICAgcHJpdmF0ZSBzdGF0aWMgY2xhc3MgRHVtbXlDaGVja3Bv\naW50U291cmNlIGltcGxlbWVudHMgQ2hlY2twb2ludFNvdXJjZSB7CiAgICAg\nICAgQE92ZXJyaWRlCiAgICAgICAgcHVibGljIENoZWNrcG9pbnQgbmV3Q2hl\nY2twb2ludCgpIHsKICAgICAgICAgICAgcmV0dXJuIENoZWNrcG9pbnQuTUFY\nOwogICAgICAgIH0KCiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHVibGlj\nIHZvaWQgY2hlY2twb2ludENvbXBsZXRlKENoZWNrcG9pbnQgY2hlY2twb2lu\ndCwgYm9vbGVhbiBjb21wYWN0KQogICAgICAgICAgICAgICAgdGhyb3dzIElP\nRXhjZXB0aW9uIHsKICAgICAgICB9CiAgICB9CiAgICBwcml2YXRlIHN0YXRp\nYyBjbGFzcyBEdW1teUxlZGdlclN0b3JhZ2UgaW1wbGVtZW50cyBMZWRnZXJT\ndG9yYWdlIHsKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgdm9p\nZCBzdGFydCgpIHsKICAgICAgICB9CgogICAgICAgIEBPdmVycmlkZQogICAg\nICAgIHB1YmxpYyB2b2lkIHNodXRkb3duKCkgdGhyb3dzIEludGVycnVwdGVk\nRXhjZXB0aW9uIHsKICAgICAgICB9CgogICAgICAgIEBPdmVycmlkZQogICAg\nICAgIHB1YmxpYyBib29sZWFuIGxlZGdlckV4aXN0cyhsb25nIGxlZGdlcklk\nKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgICAgICByZXR1cm4gdHJ1\nZTsKICAgICAgICB9CgogICAgICAgIEBPdmVycmlkZQogICAgICAgIHB1Ymxp\nYyBib29sZWFuIHNldEZlbmNlZChsb25nIGxlZGdlcklkKSB0aHJvd3MgSU9F\neGNlcHRpb24gewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9\nCgogICAgICAgIEBPdmVycmlkZQogICAgICAgIHB1YmxpYyBib29sZWFuIGlz\nRmVuY2VkKGxvbmcgbGVkZ2VySWQpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAg\nICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIEBP\ndmVycmlkZQogICAgICAgIHB1YmxpYyB2b2lkIHNldE1hc3RlcktleShsb25n\nIGxlZGdlcklkLCBieXRlW10gbWFzdGVyS2V5KQogICAgICAgICAgICAgICAg\ndGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICB9CgogICAgICAgIEBPdmVy\ncmlkZQogICAgICAgIHB1YmxpYyBieXRlW10gcmVhZE1hc3RlcktleShsb25n\nIGxlZGdlcklkKQogICAgICAgICAgICAgICAgdGhyb3dzIElPRXhjZXB0aW9u\nLCBCb29raWVFeGNlcHRpb24gewogICAgICAgICAgICByZXR1cm4gbmV3IGJ5\ndGVbMF07CiAgICAgICAgfQoKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBw\ndWJsaWMgbG9uZyBhZGRFbnRyeShCeXRlQnVmZmVyIGVudHJ5KSB0aHJvd3Mg\nSU9FeGNlcHRpb24gewogICAgICAgICAgICByZXR1cm4gMUw7CiAgICAgICAg\nfQoKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgQnl0ZUJ1ZmZl\nciBnZXRFbnRyeShsb25nIGxlZGdlcklkLCBsb25nIGVudHJ5SWQpCiAgICAg\nICAgICAgICAgICB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgICAgICBy\nZXR1cm4gbnVsbDsKICAgICAgICB9CgogICAgICAgIEBPdmVycmlkZQogICAg\nICAgIHB1YmxpYyB2b2lkIGZsdXNoKCkgdGhyb3dzIElPRXhjZXB0aW9uIHsK\nICAgICAgICB9CgogICAgICAgIEBPdmVycmlkZQogICAgICAgIHB1YmxpYyBD\naGVja3BvaW50IGNoZWNrcG9pbnQoQ2hlY2twb2ludCBjaGVja3BvaW50KQog\nICAgICAgICAgICAgICAgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICAg\nICAgcmV0dXJuIGNoZWNrcG9pbnQ7CiAgICAgICAgfQoKICAgICAgICBAT3Zl\ncnJpZGUKICAgICAgICBwdWJsaWMgQktNQmVhbkluZm8gZ2V0Sk1YQmVhbigp\nIHsgcmV0dXJuIG51bGw7IH0KICAgIH0KCiAgICBwcml2YXRlIHN0YXRpYyBj\nbGFzcyBEdW1teUxlZGdlckRpcnNMaXN0ZW5lcgogICAgICAgIGltcGxlbWVu\ndHMgTGVkZ2VyRGlyc01hbmFnZXIuTGVkZ2VyRGlyc0xpc3RlbmVyIHsKICAg\nICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgdm9pZCBkaXNrRmFpbGVk\nKEZpbGUgZGlzaykgewogICAgICAgIH0KCiAgICAgICAgQE92ZXJyaWRlCiAg\nICAgICAgcHVibGljIHZvaWQgZGlza0FsbW9zdEZ1bGwoRmlsZSBkaXNrKSB7\nCiAgICAgICAgfQoKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMg\ndm9pZCBkaXNrRnVsbChGaWxlIGRpc2spIHsKICAgICAgICB9CgogICAgICAg\nIEBPdmVycmlkZQogICAgICAgIHB1YmxpYyB2b2lkIGFsbERpc2tzRnVsbCgp\nIHsKICAgICAgICB9CgogICAgICAgIEBPdmVycmlkZQogICAgICAgIHB1Ymxp\nYyB2b2lkIGZhdGFsRXJyb3IoKSB7CiAgICAgICAgfQoKICAgICAgICBAT3Zl\ncnJpZGUKICAgICAgICBwdWJsaWMgdm9pZCBkaXNrV3JpdGFibGUoRmlsZSBk\naXNrKSB7CiAgICAgICAgfQoKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBw\ndWJsaWMgdm9pZCBkaXNrSnVzdFdyaXRhYmxlKEZpbGUgZGlzaykgewogICAg\nICAgIH0KICAgIH0KfQo=\n","encoding":"base64"}

