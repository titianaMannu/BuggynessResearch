{"sha":"64d994cf992e40665fe8d365c7dbdb8b72aa80db","node_id":"MDQ6QmxvYjE1NzU5NTY6NjRkOTk0Y2Y5OTJlNDA2NjVmZThkMzY1YzdkYmRiOGI3MmFhODBkYg==","size":9361,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/64d994cf992e40665fe8d365c7dbdb8b72aa80db","content":"LyoKICoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9y\nIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBU\naGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhl\nIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNl\nIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBs\naWFuY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEg\nY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBl\naXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZv\nciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Np\nb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICoK\nICovCgpwYWNrYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci5ib29raWU7Cgpp\nbXBvcnQgc3RhdGljIG9yZy5qdW5pdC5Bc3NlcnQuYXNzZXJ0VHJ1ZTsKaW1w\nb3J0IHN0YXRpYyBvcmcuanVuaXQuQXNzZXJ0LmZhaWw7CgppbXBvcnQgamF2\nYS5pby5CdWZmZXJlZFdyaXRlcjsKaW1wb3J0IGphdmEuaW8uRmlsZTsKaW1w\nb3J0IGphdmEuaW8uRmlsZU91dHB1dFN0cmVhbTsKaW1wb3J0IGphdmEuaW8u\nT3V0cHV0U3RyZWFtV3JpdGVyOwppbXBvcnQgamF2YS5pby5QcmludFN0cmVh\nbTsKaW1wb3J0IGphdmEuaW8uUmFuZG9tQWNjZXNzRmlsZTsKaW1wb3J0IGph\ndmEubmlvLkJ5dGVCdWZmZXI7CmltcG9ydCBqYXZhLm5pby5jaGFubmVscy5G\naWxlQ2hhbm5lbDsKaW1wb3J0IGphdmEudXRpbC5BcnJheXM7CgppbXBvcnQg\nb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNsaWVudC5DbGllbnRVdGlsOwppbXBv\ncnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNsaWVudC5MZWRnZXJIYW5kbGU7\nCmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY29uZi5TZXJ2ZXJDb25m\naWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNvbmYu\nVGVzdEJLQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tl\nZXBlci50ZXN0LlBvcnRNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5ib29r\na2VlcGVyLnRlc3QuWm9vS2VlcGVyVXRpbDsKaW1wb3J0IG9yZy5hcGFjaGUu\nem9va2VlcGVyLlpvb0tlZXBlcjsKaW1wb3J0IG9yZy5qdW5pdC5BZnRlcjsK\naW1wb3J0IG9yZy5qdW5pdC5CZWZvcmU7CmltcG9ydCBvcmcuanVuaXQuVGVz\ndDsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXI7CmltcG9ydCBvcmcuc2xmNGou\nTG9nZ2VyRmFjdG9yeTsKCnB1YmxpYyBjbGFzcyBVcGdyYWRlVGVzdCB7CiAg\nICBwcml2YXRlIGZpbmFsIHN0YXRpYyBMb2dnZXIgTE9HID0gTG9nZ2VyRmFj\ndG9yeS5nZXRMb2dnZXIoRmlsZUluZm8uY2xhc3MpOwoKICAgIFpvb0tlZXBl\nclV0aWwgemt1dGlsOwogICAgWm9vS2VlcGVyIHprYyA9IG51bGw7CiAgICBm\naW5hbCBzdGF0aWMgaW50IGJvb2tpZVBvcnQgPSBQb3J0TWFuYWdlci5uZXh0\nRnJlZVBvcnQoKTsKCiAgICBAQmVmb3JlCiAgICBwdWJsaWMgdm9pZCBzZXR1\ncFpvb0tlZXBlcigpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIHprdXRp\nbCA9IG5ldyBab29LZWVwZXJVdGlsKCk7CiAgICAgICAgemt1dGlsLnN0YXJ0\nU2VydmVyKCk7CiAgICAgICAgemtjID0gemt1dGlsLmdldFpvb0tlZXBlckNs\naWVudCgpOwogICAgfQoKICAgIEBBZnRlcgogICAgcHVibGljIHZvaWQgdGVh\nckRvd25ab29LZWVwZXIoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICB6\na3V0aWwua2lsbFNlcnZlcigpOwogICAgfQoKICAgIHN0YXRpYyB2b2lkIHdy\naXRlTGVkZ2VyRGlyKEZpbGUgZGlyLAogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgYnl0ZVtdIG1hc3RlcktleSkKICAgICAgICAgICAgdGhyb3dz\nIEV4Y2VwdGlvbiB7CiAgICAgICAgbG9uZyBsZWRnZXJJZCA9IDE7CgogICAg\nICAgIEZpbGUgZm4gPSBuZXcgRmlsZShkaXIsIEluZGV4UGVyc2lzdGVuY2VN\nZ3IuZ2V0TGVkZ2VyTmFtZShsZWRnZXJJZCkpOwogICAgICAgIGZuLmdldFBh\ncmVudEZpbGUoKS5ta2RpcnMoKTsKICAgICAgICBGaWxlSW5mbyBmaSA9IG5l\ndyBGaWxlSW5mbyhmbiwgbWFzdGVyS2V5KTsKICAgICAgICAvLyBmb3JjZSBj\ncmVhdGlvbiBvZiBpbmRleCBmaWxlCiAgICAgICAgZmkud3JpdGUobmV3IEJ5\ndGVCdWZmZXJbXXsgQnl0ZUJ1ZmZlci5hbGxvY2F0ZSgwKSB9LCAwKTsKICAg\nICAgICBmaS5jbG9zZSh0cnVlKTsKCiAgICAgICAgbG9uZyBsb2dJZCA9IDA7\nCiAgICAgICAgQnl0ZUJ1ZmZlciBMT0dGSUxFX0hFQURFUiA9IEJ5dGVCdWZm\nZXIuYWxsb2NhdGUoMTAyNCk7CiAgICAgICAgTE9HRklMRV9IRUFERVIucHV0\nKCJCS0xPIi5nZXRCeXRlcygpKTsKICAgICAgICBGaWxlQ2hhbm5lbCBsb2dm\naWxlID0gbmV3IFJhbmRvbUFjY2Vzc0ZpbGUoCiAgICAgICAgICAgICAgICBu\nZXcgRmlsZShkaXIsIExvbmcudG9IZXhTdHJpbmcobG9nSWQpKyIubG9nIiks\nICJydyIpLmdldENoYW5uZWwoKTsKICAgICAgICBsb2dmaWxlLndyaXRlKChC\neXRlQnVmZmVyKSBMT0dGSUxFX0hFQURFUi5jbGVhcigpKTsKICAgICAgICBs\nb2dmaWxlLmNsb3NlKCk7CiAgICB9CgogICAgc3RhdGljIEpvdXJuYWxDaGFu\nbmVsIHdyaXRlSm91cm5hbChGaWxlIGpvdXJuYWxEaXIsIGludCBudW1FbnRy\naWVzLCBieXRlW10gbWFzdGVyS2V5KQogICAgICAgICAgICB0aHJvd3MgRXhj\nZXB0aW9uIHsKICAgICAgICBsb25nIGxvZ0lkID0gU3lzdGVtLmN1cnJlbnRU\naW1lTWlsbGlzKCk7CiAgICAgICAgSm91cm5hbENoYW5uZWwgamMgPSBuZXcg\nSm91cm5hbENoYW5uZWwoam91cm5hbERpciwgbG9nSWQpOwoKICAgICAgICBC\ndWZmZXJlZENoYW5uZWwgYmMgPSBqYy5nZXRCdWZmZXJlZENoYW5uZWwoKTsK\nCiAgICAgICAgbG9uZyBsZWRnZXJJZCA9IDE7CiAgICAgICAgYnl0ZVtdIGRh\ndGEgPSBuZXcgYnl0ZVsxMDI0XTsKICAgICAgICBBcnJheXMuZmlsbChkYXRh\nLCAoYnl0ZSknWCcpOwogICAgICAgIGxvbmcgbGFzdENvbmZpcm1lZCA9IExl\nZGdlckhhbmRsZS5JTlZBTElEX0VOVFJZX0lEOwoKICAgICAgICBmb3IgKGlu\ndCBpID0gMTsgaSA8PSBudW1FbnRyaWVzOyBpKyspIHsKICAgICAgICAgICAg\nQnl0ZUJ1ZmZlciBwYWNrZXQgPSBDbGllbnRVdGlsLmdlbmVyYXRlUGFja2V0\nKGxlZGdlcklkLCBpLCBsYXN0Q29uZmlybWVkLAogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSpk\nYXRhLmxlbmd0aCwgZGF0YSkudG9CeXRlQnVmZmVyKCk7CiAgICAgICAgICAg\nIGxhc3RDb25maXJtZWQgPSBpOwogICAgICAgICAgICBCeXRlQnVmZmVyIGxl\nbkJ1ZmYgPSBCeXRlQnVmZmVyLmFsbG9jYXRlKDQpOwogICAgICAgICAgICBs\nZW5CdWZmLnB1dEludChwYWNrZXQucmVtYWluaW5nKCkpOwogICAgICAgICAg\nICBsZW5CdWZmLmZsaXAoKTsKCiAgICAgICAgICAgIGJjLndyaXRlKGxlbkJ1\nZmYpOwogICAgICAgICAgICBiYy53cml0ZShwYWNrZXQpOwogICAgICAgIH0K\nICAgICAgICBiYy5mbHVzaCh0cnVlKTsKCiAgICAgICAgcmV0dXJuIGpjOwog\nICAgfQoKICAgIHN0YXRpYyBTdHJpbmcgbmV3VjFKb3VybmFsRGlyZWN0b3J5\nKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgRmlsZSBkID0gRmlsZS5j\ncmVhdGVUZW1wRmlsZSgiYm9va2llIiwgInRtcGRpciIpOwogICAgICAgIGQu\nZGVsZXRlKCk7CiAgICAgICAgZC5ta2RpcnMoKTsKICAgICAgICB3cml0ZUpv\ndXJuYWwoZCwgMTAwLCAiZm9vYmFyIi5nZXRCeXRlcygpKS5jbG9zZSgpOwog\nICAgICAgIHJldHVybiBkLmdldFBhdGgoKTsKICAgIH0KCiAgICBzdGF0aWMg\nU3RyaW5nIG5ld1YxTGVkZ2VyRGlyZWN0b3J5KCkgdGhyb3dzIEV4Y2VwdGlv\nbiB7CiAgICAgICAgRmlsZSBkID0gRmlsZS5jcmVhdGVUZW1wRmlsZSgiYm9v\na2llIiwgInRtcGRpciIpOwogICAgICAgIGQuZGVsZXRlKCk7CiAgICAgICAg\nZC5ta2RpcnMoKTsKICAgICAgICB3cml0ZUxlZGdlckRpcihkLCAiZm9vYmFy\nIi5nZXRCeXRlcygpKTsKICAgICAgICByZXR1cm4gZC5nZXRQYXRoKCk7CiAg\nICB9CgogICAgc3RhdGljIHZvaWQgY3JlYXRlVmVyc2lvbjJGaWxlKFN0cmlu\nZyBkaXIpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIEZpbGUgdmVyc2lv\nbkZpbGUgPSBuZXcgRmlsZShkaXIsICJWRVJTSU9OIik7CgogICAgICAgIEZp\nbGVPdXRwdXRTdHJlYW0gZm9zID0gbmV3IEZpbGVPdXRwdXRTdHJlYW0odmVy\nc2lvbkZpbGUpOwogICAgICAgIEJ1ZmZlcmVkV3JpdGVyIGJ3ID0gbnVsbDsK\nICAgICAgICB0cnkgewogICAgICAgICAgICBidyA9IG5ldyBCdWZmZXJlZFdy\naXRlcihuZXcgT3V0cHV0U3RyZWFtV3JpdGVyKGZvcykpOwogICAgICAgICAg\nICBidy53cml0ZShTdHJpbmcudmFsdWVPZigyKSk7CiAgICAgICAgfSBmaW5h\nbGx5IHsKICAgICAgICAgICAgaWYgKGJ3ICE9IG51bGwpIHsKICAgICAgICAg\nICAgICAgIGJ3LmNsb3NlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAg\nZm9zLmNsb3NlKCk7CiAgICAgICAgfQogICAgfQoKICAgIHN0YXRpYyBTdHJp\nbmcgbmV3VjJKb3VybmFsRGlyZWN0b3J5KCkgdGhyb3dzIEV4Y2VwdGlvbiB7\nCiAgICAgICAgU3RyaW5nIGQgPSBuZXdWMUpvdXJuYWxEaXJlY3RvcnkoKTsK\nICAgICAgICBjcmVhdGVWZXJzaW9uMkZpbGUoZCk7CiAgICAgICAgcmV0dXJu\nIGQ7CiAgICB9CgogICAgc3RhdGljIFN0cmluZyBuZXdWMkxlZGdlckRpcmVj\ndG9yeSgpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIFN0cmluZyBkID0g\nbmV3VjFMZWRnZXJEaXJlY3RvcnkoKTsKICAgICAgICBjcmVhdGVWZXJzaW9u\nMkZpbGUoZCk7CiAgICAgICAgcmV0dXJuIGQ7CiAgICB9CgogICAgcHJpdmF0\nZSBzdGF0aWMgdm9pZCB0ZXN0VXBncmFkZVByb2NlZWR1cmUoU3RyaW5nIHpr\nU2VydmVycywgU3RyaW5nIGpvdXJuYWxEaXIsIFN0cmluZyBsZWRnZXJEaXIp\nIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIFNlcnZlckNvbmZpZ3VyYXRp\nb24gY29uZiA9IFRlc3RCS0NvbmZpZ3VyYXRpb24ubmV3U2VydmVyQ29uZmln\ndXJhdGlvbigpCiAgICAgICAgICAgIC5zZXRaa1NlcnZlcnMoemtTZXJ2ZXJz\nKQogICAgICAgICAgICAuc2V0Sm91cm5hbERpck5hbWUoam91cm5hbERpcikK\nICAgICAgICAgICAgLnNldExlZGdlckRpck5hbWVzKG5ldyBTdHJpbmdbXSB7\nIGxlZGdlckRpciB9KQogICAgICAgICAgICAuc2V0Qm9va2llUG9ydChib29r\naWVQb3J0KTsKICAgICAgICBCb29raWUgYiA9IG51bGw7CiAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgYiA9IG5ldyBCb29raWUoY29uZik7CiAgICAgICAg\nICAgIGZhaWwoIlNob3VsZG4ndCBoYXZlIGJlZW4gYWJsZSB0byBzdGFydCIp\nOwogICAgICAgIH0gY2F0Y2ggKEJvb2tpZUV4Y2VwdGlvbi5JbnZhbGlkQ29v\na2llRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgLy8gY29ycmVjdCBiZWhh\ndmlvdXIKICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgid3JvbmcgZXhjZXB0aW9u\nIiwgZS5nZXRNZXNzYWdlKCkuY29udGFpbnMoInVwZ3JhZGUgbmVlZGVkIikp\nOwogICAgICAgIH0KCiAgICAgICAgRmlsZVN5c3RlbVVwZ3JhZGUudXBncmFk\nZShjb25mKTsgLy8gc2hvdWxkIHdvcmsgZmluZQogICAgICAgIGIgPSBuZXcg\nQm9va2llKGNvbmYpOwogICAgICAgIGIuc3RhcnQoKTsKICAgICAgICBiLnNo\ndXRkb3duKCk7CiAgICAgICAgYiA9IG51bGw7CgogICAgICAgIEZpbGVTeXN0\nZW1VcGdyYWRlLnJvbGxiYWNrKGNvbmYpOwogICAgICAgIHRyeSB7CiAgICAg\nICAgICAgIGIgPSBuZXcgQm9va2llKGNvbmYpOwogICAgICAgICAgICBmYWls\nKCJTaG91bGRuJ3QgaGF2ZSBiZWVuIGFibGUgdG8gc3RhcnQiKTsKICAgICAg\nICB9IGNhdGNoIChCb29raWVFeGNlcHRpb24uSW52YWxpZENvb2tpZUV4Y2Vw\ndGlvbiBlKSB7CiAgICAgICAgICAgIC8vIGNvcnJlY3QgYmVoYXZpb3VyCiAg\nICAgICAgICAgIGFzc2VydFRydWUoIndyb25nIGV4Y2VwdGlvbiIsIGUuZ2V0\nTWVzc2FnZSgpLmNvbnRhaW5zKCJ1cGdyYWRlIG5lZWRlZCIpKTsKICAgICAg\nICB9CgogICAgICAgIEZpbGVTeXN0ZW1VcGdyYWRlLnVwZ3JhZGUoY29uZik7\nCiAgICAgICAgRmlsZVN5c3RlbVVwZ3JhZGUuZmluYWxpemVVcGdyYWRlKGNv\nbmYpOwogICAgICAgIGIgPSBuZXcgQm9va2llKGNvbmYpOwogICAgICAgIGIu\nc3RhcnQoKTsKICAgICAgICBiLnNodXRkb3duKCk7CiAgICAgICAgYiA9IG51\nbGw7CiAgICB9CgogICAgQFRlc3QodGltZW91dD02MDAwMCkKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RVcGdyYWRlVjF0b0N1cnJlbnQoKSB0aHJvd3MgRXhjZXB0\naW9uIHsKICAgICAgICBTdHJpbmcgam91cm5hbERpciA9IG5ld1YxSm91cm5h\nbERpcmVjdG9yeSgpOwogICAgICAgIFN0cmluZyBsZWRnZXJEaXIgPSBuZXdW\nMUxlZGdlckRpcmVjdG9yeSgpOwogICAgICAgIHRlc3RVcGdyYWRlUHJvY2Vl\nZHVyZSh6a3V0aWwuZ2V0Wm9vS2VlcGVyQ29ubmVjdFN0cmluZygpLCBqb3Vy\nbmFsRGlyLCBsZWRnZXJEaXIpOwogICAgfQoKICAgIEBUZXN0KHRpbWVvdXQ9\nNjAwMDApCiAgICBwdWJsaWMgdm9pZCB0ZXN0VXBncmFkZVYydG9DdXJyZW50\nKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgU3RyaW5nIGpvdXJuYWxE\naXIgPSBuZXdWMkpvdXJuYWxEaXJlY3RvcnkoKTsKICAgICAgICBTdHJpbmcg\nbGVkZ2VyRGlyID0gbmV3VjJMZWRnZXJEaXJlY3RvcnkoKTsKICAgICAgICB0\nZXN0VXBncmFkZVByb2NlZWR1cmUoemt1dGlsLmdldFpvb0tlZXBlckNvbm5l\nY3RTdHJpbmcoKSwgam91cm5hbERpciwgbGVkZ2VyRGlyKTsKICAgIH0KCiAg\nICBAVGVzdCh0aW1lb3V0PTYwMDAwKQogICAgcHVibGljIHZvaWQgdGVzdFVw\nZ3JhZGVDdXJyZW50KCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgU3Ry\naW5nIGpvdXJuYWxEaXIgPSBuZXdWMkpvdXJuYWxEaXJlY3RvcnkoKTsKICAg\nICAgICBTdHJpbmcgbGVkZ2VyRGlyID0gbmV3VjJMZWRnZXJEaXJlY3Rvcnko\nKTsKICAgICAgICB0ZXN0VXBncmFkZVByb2NlZWR1cmUoemt1dGlsLmdldFpv\nb0tlZXBlckNvbm5lY3RTdHJpbmcoKSwgam91cm5hbERpciwgbGVkZ2VyRGly\nKTsKICAgICAgICAvLyBVcGdyYWRlIGFnYWluCiAgICAgICAgU2VydmVyQ29u\nZmlndXJhdGlvbiBjb25mID0gVGVzdEJLQ29uZmlndXJhdGlvbi5uZXdTZXJ2\nZXJDb25maWd1cmF0aW9uKCkKICAgICAgICAgICAgLnNldFprU2VydmVycyh6\na3V0aWwuZ2V0Wm9vS2VlcGVyQ29ubmVjdFN0cmluZygpKQogICAgICAgICAg\nICAuc2V0Sm91cm5hbERpck5hbWUoam91cm5hbERpcikKICAgICAgICAgICAg\nLnNldExlZGdlckRpck5hbWVzKG5ldyBTdHJpbmdbXSB7IGxlZGdlckRpciB9\nKQogICAgICAgICAgICAuc2V0Qm9va2llUG9ydChib29raWVQb3J0KTsKICAg\nICAgICBGaWxlU3lzdGVtVXBncmFkZS51cGdyYWRlKGNvbmYpOyAvLyBzaG91\nbGQgd29yayBmaW5lIHdpdGggY3VycmVudCBkaXJlY3RvcnkKICAgICAgICBC\nb29raWUgYiA9IG5ldyBCb29raWUoY29uZik7CiAgICAgICAgYi5zdGFydCgp\nOwogICAgICAgIGIuc2h1dGRvd24oKTsKICAgIH0KCiAgICBAVGVzdCh0aW1l\nb3V0PTYwMDAwKQogICAgcHVibGljIHZvaWQgdGVzdENvbW1hbmRMaW5lKCkg\ndGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgUHJpbnRTdHJlYW0gb3JpZ2Vy\nciA9IFN5c3RlbS5lcnI7CiAgICAgICAgUHJpbnRTdHJlYW0gb3JpZ291dCA9\nIFN5c3RlbS5vdXQ7CgogICAgICAgIEZpbGUgb3V0cHV0ID0gRmlsZS5jcmVh\ndGVUZW1wRmlsZSgiYm9va2llIiwgInN0ZG91dCIpOwogICAgICAgIEZpbGUg\nZXJyb3V0cHV0ID0gRmlsZS5jcmVhdGVUZW1wRmlsZSgiYm9va2llIiwgInN0\nZGVyciIpOwogICAgICAgIFN5c3RlbS5zZXRPdXQobmV3IFByaW50U3RyZWFt\nKG91dHB1dCkpOwogICAgICAgIFN5c3RlbS5zZXRFcnIobmV3IFByaW50U3Ry\nZWFtKGVycm91dHB1dCkpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIEZp\nbGVTeXN0ZW1VcGdyYWRlLm1haW4obmV3IFN0cmluZ1tdIHsgIi1oIiB9KTsK\nICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIC8vIHRlc3Qgd2l0\naG91dCBjb25mCiAgICAgICAgICAgICAgICBGaWxlU3lzdGVtVXBncmFkZS5t\nYWluKG5ldyBTdHJpbmdbXSB7ICItdSIgfSk7CiAgICAgICAgICAgICAgICBm\nYWlsKCJTaG91bGQgaGF2ZSBmYWlsZWQiKTsKICAgICAgICAgICAgfSBjYXRj\naCAoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlhZSkgewogICAgICAgICAg\nICAgICAgYXNzZXJ0VHJ1ZSgiV3JvbmcgZXhjZXB0aW9uICIgKyBpYWUuZ2V0\nTWVzc2FnZSgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICBpYWUuZ2V0\nTWVzc2FnZSgpLmNvbnRhaW5zKCJ3aXRob3V0IGNvbmZpZ3VyYXRpb24iKSk7\nCiAgICAgICAgICAgIH0KICAgICAgICAgICAgRmlsZSBmID0gRmlsZS5jcmVh\ndGVUZW1wRmlsZSgiYm9va2llIiwgInRtcGNvbmYiKTsKICAgICAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgICAgIC8vIHRlc3Qgd2l0aG91dCB1cGdyYWRl\nIG9wCiAgICAgICAgICAgICAgICBGaWxlU3lzdGVtVXBncmFkZS5tYWluKG5l\ndyBTdHJpbmdbXSB7ICItLWNvbmYiLCBmLmdldFBhdGgoKSB9KTsKICAgICAg\nICAgICAgICAgIGZhaWwoIlNob3VsZCBoYXZlIGZhaWxlZCIpOwogICAgICAg\nICAgICB9IGNhdGNoIChJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWFlKSB7\nCiAgICAgICAgICAgICAgICBhc3NlcnRUcnVlKCJXcm9uZyBleGNlcHRpb24g\nIiArIGlhZS5nZXRNZXNzYWdlKCksCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgIGlhZS5nZXRNZXNzYWdlKCkuY29udGFpbnMoIk11c3Qgc3BlY2lmeSAt\ndXBncmFkZSIpKTsKICAgICAgICAgICAgfQogICAgICAgIH0gZmluYWxseSB7\nCiAgICAgICAgICAgIFN5c3RlbS5zZXRPdXQob3JpZ291dCk7CiAgICAgICAg\nICAgIFN5c3RlbS5zZXRFcnIob3JpZ2Vycik7CiAgICAgICAgfQogICAgfQp9\nCg==\n","encoding":"base64"}

