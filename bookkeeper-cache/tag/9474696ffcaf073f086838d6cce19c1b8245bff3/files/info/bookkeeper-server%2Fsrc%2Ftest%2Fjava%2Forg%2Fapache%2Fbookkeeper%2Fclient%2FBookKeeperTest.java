{"sha":"364e48eb6e5e1eba3d2d2aa6f80ac24a93feeb47","node_id":"MDQ6QmxvYjE1NzU5NTY6MzY0ZTQ4ZWI2ZTVlMWViYTNkMmQyYWE2ZjgwYWMyNGE5M2ZlZWI0Nw==","size":8902,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/364e48eb6e5e1eba3d2d2aa6f80ac24a93feeb47","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY2xpZW50OwoKLyoKKgoq\nIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAo\nQVNGKSB1bmRlciBvbmUKKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2Ug\nYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKKiBkaXN0cmlidXRl\nZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbgoq\nIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNl\nbnNlcyB0aGlzIGZpbGUKKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNl\nbnNlLCBWZXJzaW9uIDIuMCAodGhlCiogIkxpY2Vuc2UiKTsgeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZQoqIHdpdGgg\ndGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKKgoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCioKKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJs\nZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsCiogc29mdHdhcmUgZGlz\ndHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24g\nYW4KKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09O\nRElUSU9OUyBPRiBBTlkKKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBs\naWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUKKiBzcGVjaWZpYyBsYW5n\ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zCiog\ndW5kZXIgdGhlIExpY2Vuc2UuCioKKi8KCmltcG9ydCBqYXZhLnV0aWwuY29u\nY3VycmVudC5Db3VudERvd25MYXRjaDsKaW1wb3J0IGphdmEudXRpbC5jb25j\ndXJyZW50LlRpbWVVbml0OwppbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQu\nYXRvbWljLkF0b21pY0ludGVnZXI7CmltcG9ydCBqYXZhLnV0aWwuY29uY3Vy\ncmVudC5hdG9taWMuQXRvbWljQm9vbGVhbjsKCmltcG9ydCBvcmcuYXBhY2hl\nLmJvb2trZWVwZXIuY29uZi5DbGllbnRDb25maWd1cmF0aW9uOwppbXBvcnQg\nb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNsaWVudC5Bc3luY0NhbGxiYWNrLkFk\nZENhbGxiYWNrOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNsaWVu\ndC5Cb29rS2VlcGVyLkRpZ2VzdFR5cGU7CmltcG9ydCBvcmcuYXBhY2hlLmJv\nb2trZWVwZXIudGVzdC5CYXNlVGVzdENhc2U7CmltcG9ydCBvcmcuYXBhY2hl\nLnpvb2tlZXBlci5ab29LZWVwZXI7CmltcG9ydCBvcmcuYXBhY2hlLnpvb2tl\nZXBlci5XYXRjaGVyOwppbXBvcnQgb3JnLmFwYWNoZS56b29rZWVwZXIuV2F0\nY2hlZEV2ZW50OwppbXBvcnQgb3JnLmFwYWNoZS56b29rZWVwZXIuS2VlcGVy\nRXhjZXB0aW9uOwoKaW1wb3J0IG9yZy5qdW5pdC5Bc3NlcnQ7CmltcG9ydCBv\ncmcuanVuaXQuVGVzdDsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXI7CmltcG9y\ndCBvcmcuc2xmNGouTG9nZ2VyRmFjdG9yeTsKCmltcG9ydCBzdGF0aWMgb3Jn\nLmp1bml0LkFzc2VydC4qOwoKLyoqCiAqIFRlc3RzIG9mIHRoZSBtYWluIEJv\nb2tLZWVwZXIgY2xpZW50CiAqLwpwdWJsaWMgY2xhc3MgQm9va0tlZXBlclRl\nc3QgZXh0ZW5kcyBCYXNlVGVzdENhc2UgewogICAgcHJpdmF0ZSBmaW5hbCBz\ndGF0aWMgTG9nZ2VyIExPRyA9IExvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKEJv\nb2tLZWVwZXJUZXN0LmNsYXNzKTsKCiAgICBEaWdlc3RUeXBlIGRpZ2VzdFR5\ncGU7CgogICAgcHVibGljIEJvb2tLZWVwZXJUZXN0KERpZ2VzdFR5cGUgZGln\nZXN0VHlwZSkgewogICAgICAgIHN1cGVyKDQpOwoKICAgICAgICB0aGlzLmRp\nZ2VzdFR5cGUgPSBkaWdlc3RUeXBlOwogICAgfQoKICAgIEBUZXN0KHRpbWVv\ndXQ9NjAwMDApCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q29uc3RydWN0aW9uWmtE\nZWxheSgpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIENsaWVudENvbmZp\nZ3VyYXRpb24gY29uZiA9IG5ldyBDbGllbnRDb25maWd1cmF0aW9uKCkKICAg\nICAgICAgICAgLnNldFprU2VydmVycyh6a1V0aWwuZ2V0Wm9vS2VlcGVyQ29u\nbmVjdFN0cmluZygpKQogICAgICAgICAgICAuc2V0WmtUaW1lb3V0KDIwMDAw\nKTsKCiAgICAgICAgQ291bnREb3duTGF0Y2ggbCA9IG5ldyBDb3VudERvd25M\nYXRjaCgxKTsKICAgICAgICB6a1V0aWwuc2xlZXBTZXJ2ZXIoNSwgbCk7CiAg\nICAgICAgbC5hd2FpdCgpOwoKICAgICAgICBCb29rS2VlcGVyIGJrYyA9IG5l\ndyBCb29rS2VlcGVyKGNvbmYpOwogICAgICAgIGJrYy5jcmVhdGVMZWRnZXIo\nZGlnZXN0VHlwZSwgInRlc3RQYXNzd2QiLmdldEJ5dGVzKCkpLmNsb3NlKCk7\nCiAgICAgICAgYmtjLmNsb3NlKCk7CiAgICB9CgogICAgQFRlc3QodGltZW91\ndD02MDAwMCkKICAgIHB1YmxpYyB2b2lkIHRlc3RDb25zdHJ1Y3Rpb25Ob3RD\nb25uZWN0ZWRFeHBsaWNpdFprKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAg\nICAgQ2xpZW50Q29uZmlndXJhdGlvbiBjb25mID0gbmV3IENsaWVudENvbmZp\nZ3VyYXRpb24oKQogICAgICAgICAgICAuc2V0WmtTZXJ2ZXJzKHprVXRpbC5n\nZXRab29LZWVwZXJDb25uZWN0U3RyaW5nKCkpCiAgICAgICAgICAgIC5zZXRa\na1RpbWVvdXQoMjAwMDApOwoKICAgICAgICBDb3VudERvd25MYXRjaCBsID0g\nbmV3IENvdW50RG93bkxhdGNoKDEpOwogICAgICAgIHprVXRpbC5zbGVlcFNl\ncnZlcig1LCBsKTsKICAgICAgICBsLmF3YWl0KCk7CgogICAgICAgIFpvb0tl\nZXBlciB6ayA9IG5ldyBab29LZWVwZXIoemtVdGlsLmdldFpvb0tlZXBlckNv\nbm5lY3RTdHJpbmcoKSwgMTAwMDAsCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICBuZXcgV2F0Y2hlcigpIHsKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICBwdWJsaWMgdm9pZCBwcm9jZXNzKFdhdGNoZWRFdmVudCBldmVudCkg\newogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgIGFzc2VydEZhbHNlKCJa\nSyBzaG91bGRuJ3QgaGF2ZSBjb25uZWN0ZWQgeWV0IiwgemsuZ2V0U3RhdGUo\nKS5pc0Nvbm5lY3RlZCgpKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBC\nb29rS2VlcGVyIGJrYyA9IG5ldyBCb29rS2VlcGVyKGNvbmYsIHprKTsKICAg\nICAgICAgICAgZmFpbCgiU2hvdWxkbid0IGJlIGFibGUgdG8gY29uc3RydWN0\nIHdpdGggdW5jb25uZWN0ZWQgemsiKTsKICAgICAgICB9IGNhdGNoIChLZWVw\nZXJFeGNlcHRpb24uQ29ubmVjdGlvbkxvc3NFeGNlcHRpb24gY2xlKSB7CiAg\nICAgICAgICAgIC8vIGNvcnJlY3QgYmVoYXZpb3VyCiAgICAgICAgfQogICAg\nfQoKICAgIC8qKgogICAgICogVGVzdCB0aGF0IGJvb2trZWVwZXIgaXMgbm90\nIGFibGUgdG8gb3BlbiBsZWRnZXJzIGlmCiAgICAgKiBpdCBwcm92aWRlcyB0\naGUgd3JvbmcgcGFzc3dvcmQgb3Igd3JvbmcgZGlnZXN0CiAgICAgKi8KICAg\nIEBUZXN0KHRpbWVvdXQ9NjAwMDApCiAgICBwdWJsaWMgdm9pZCB0ZXN0Qm9v\na2tlZXBlclBhc3N3b3JkKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAg\nQ2xpZW50Q29uZmlndXJhdGlvbiBjb25mID0gbmV3IENsaWVudENvbmZpZ3Vy\nYXRpb24oKQogICAgICAgICAgICAuc2V0WmtTZXJ2ZXJzKHprVXRpbC5nZXRa\nb29LZWVwZXJDb25uZWN0U3RyaW5nKCkpOwogICAgICAgIEJvb2tLZWVwZXIg\nYmtjID0gbmV3IEJvb2tLZWVwZXIoY29uZik7CgogICAgICAgIERpZ2VzdFR5\ncGUgZGlnZXN0Q29ycmVjdCA9IGRpZ2VzdFR5cGU7CiAgICAgICAgYnl0ZVtd\nIHBhc3N3ZENvcnJlY3QgPSAiQUFBQUFBQSIuZ2V0Qnl0ZXMoKTsKICAgICAg\nICBEaWdlc3RUeXBlIGRpZ2VzdEJhZCA9IGRpZ2VzdFR5cGUgPT0gRGlnZXN0\nVHlwZS5NQUMgPyBEaWdlc3RUeXBlLkNSQzMyIDogRGlnZXN0VHlwZS5NQUM7\nCiAgICAgICAgYnl0ZVtdIHBhc3N3ZEJhZCA9ICJCQkJCQkJCIi5nZXRCeXRl\ncygpOwoKCiAgICAgICAgTGVkZ2VySGFuZGxlIGxoID0gbnVsbDsKICAgICAg\nICB0cnkgewogICAgICAgICAgICBsaCA9IGJrYy5jcmVhdGVMZWRnZXIoZGln\nZXN0Q29ycmVjdCwgcGFzc3dkQ29ycmVjdCk7CiAgICAgICAgICAgIGxvbmcg\naWQgPSBsaC5nZXRJZCgpOwogICAgICAgICAgICBmb3IgKGludCBpID0gMDsg\naSA8IDEwMDsgaSsrKSB7CiAgICAgICAgICAgICAgICBsaC5hZGRFbnRyeSgi\nZm9vYmFyIi5nZXRCeXRlcygpKTsKICAgICAgICAgICAgfQogICAgICAgICAg\nICBsaC5jbG9zZSgpOwoKICAgICAgICAgICAgLy8gdHJ5IG9wZW4gd2l0aCBi\nYWQgcGFzc3dkCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBi\na2Mub3BlbkxlZGdlcihpZCwgZGlnZXN0Q29ycmVjdCwgcGFzc3dkQmFkKTsK\nICAgICAgICAgICAgICAgIGZhaWwoIlNob3VsZG4ndCBiZSBhYmxlIHRvIG9w\nZW4gd2l0aCBiYWQgcGFzc3dkIik7CiAgICAgICAgICAgIH0gY2F0Y2ggKEJL\nRXhjZXB0aW9uLkJLVW5hdXRob3JpemVkQWNjZXNzRXhjZXB0aW9uIGJrZSkg\newogICAgICAgICAgICAgICAgLy8gY29ycmVjdCBiZWhhdmlvdXIKICAgICAg\nICAgICAgfQoKICAgICAgICAgICAgLy8gdHJ5IG9wZW4gd2l0aCBiYWQgZGln\nZXN0CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBia2Mub3Bl\nbkxlZGdlcihpZCwgZGlnZXN0QmFkLCBwYXNzd2RDb3JyZWN0KTsKICAgICAg\nICAgICAgICAgIGZhaWwoIlNob3VsZG4ndCBiZSBhYmxlIHRvIG9wZW4gd2l0\naCBiYWQgZGlnZXN0Iik7CiAgICAgICAgICAgIH0gY2F0Y2ggKEJLRXhjZXB0\naW9uLkJLRGlnZXN0TWF0Y2hFeGNlcHRpb24gYmtlKSB7CiAgICAgICAgICAg\nICAgICAvLyBjb3JyZWN0IGJlaGF2aW91cgogICAgICAgICAgICB9CgogICAg\nICAgICAgICAvLyB0cnkgb3BlbiB3aXRoIGJvdGggYmFkCiAgICAgICAgICAg\nIHRyeSB7CiAgICAgICAgICAgICAgICBia2Mub3BlbkxlZGdlcihpZCwgZGln\nZXN0QmFkLCBwYXNzd2RCYWQpOwogICAgICAgICAgICAgICAgZmFpbCgiU2hv\ndWxkbid0IGJlIGFibGUgdG8gb3BlbiB3aXRoIGJhZCBwYXNzd2QgYW5kIGRp\nZ2VzdCIpOwogICAgICAgICAgICB9IGNhdGNoIChCS0V4Y2VwdGlvbi5CS1Vu\nYXV0aG9yaXplZEFjY2Vzc0V4Y2VwdGlvbiBia2UpIHsKICAgICAgICAgICAg\nICAgIC8vIGNvcnJlY3QgYmVoYXZpb3VyCiAgICAgICAgICAgIH0KCiAgICAg\nICAgICAgIC8vIHRyeSBvcGVuIHdpdGggYm90aCBjb3JyZWN0CiAgICAgICAg\nICAgIGJrYy5vcGVuTGVkZ2VyKGlkLCBkaWdlc3RDb3JyZWN0LCBwYXNzd2RD\nb3JyZWN0KS5jbG9zZSgpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAg\nICAgIGlmIChsaCAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBsaC5jbG9z\nZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJrYy5jbG9zZSgpOwog\nICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFRlc3RzIHRoYXQgd2hl\nbiB0cnlpbmcgdG8gdXNlIGEgY2xvc2VkIEJLIGNsaWVudCBvYmplY3Qgd2Ug\nZ2V0CiAgICAgKiBhIGNhbGxiYWNrIGVycm9yIGFuZCBub3QgYW4gSW50ZXJy\ndXB0ZWRFeGNlcHRpb24uCiAgICAgKiBAdGhyb3dzIEV4Y2VwdGlvbgogICAg\nICovCiAgICBAVGVzdCh0aW1lb3V0PTYwMDAwKQogICAgcHVibGljIHZvaWQg\ndGVzdEFzeW5jUmVhZFdpdGhFcnJvcigpIHRocm93cyBFeGNlcHRpb24gewog\nICAgICAgIExlZGdlckhhbmRsZSBsaCA9IGJrYy5jcmVhdGVMZWRnZXIoMywg\nMywgRGlnZXN0VHlwZS5DUkMzMiwgInRlc3RQYXNzd2QiLmdldEJ5dGVzKCkp\nOwogICAgICAgIGJrYy5jbG9zZSgpOwoKICAgICAgICBmaW5hbCBBdG9taWNJ\nbnRlZ2VyIHJlc3VsdCA9IG5ldyBBdG9taWNJbnRlZ2VyKDApOwogICAgICAg\nIGZpbmFsIENvdW50RG93bkxhdGNoIGNvdW50ZXIgPSBuZXcgQ291bnREb3du\nTGF0Y2goMSk7CgogICAgICAgIC8vIFRyeSB0byB3cml0ZSwgd2Ugc2hvdWQg\nZ2V0IGFuZCBlcnJvciBjYWxsYmFjayBidXQgbm90IGFuIGV4Y2VwdGlvbgog\nICAgICAgIGxoLmFzeW5jQWRkRW50cnkoInRlc3QiLmdldEJ5dGVzKCksIG5l\ndyBBZGRDYWxsYmFjaygpIHsKICAgICAgICAgICAgcHVibGljIHZvaWQgYWRk\nQ29tcGxldGUoaW50IHJjLCBMZWRnZXJIYW5kbGUgbGgsIGxvbmcgZW50cnlJ\nZCwgT2JqZWN0IGN0eCkgewogICAgICAgICAgICAgICAgcmVzdWx0LnNldChy\nYyk7CiAgICAgICAgICAgICAgICBjb3VudGVyLmNvdW50RG93bigpOwogICAg\nICAgICAgICB9CiAgICAgICAgfSwgbnVsbCk7CgogICAgICAgIGNvdW50ZXIu\nYXdhaXQoKTsKCiAgICAgICAgQXNzZXJ0LmFzc2VydFRydWUocmVzdWx0Lmdl\ndCgpICE9IDApOwogICAgfQoKICAgIC8qKgogICAgICogVGVzdCB0aGF0IGJv\nb2trZWVwZXIgd2lsbCBjbG9zZSBjbGVhbmx5IGlmIGNsb3NlIGlzIGlzc3Vl\nZAogICAgICogd2hpbGUgYW5vdGhlciBvcGVyYXRpb24gaXMgaW4gcHJvZ3Jl\nc3MuCiAgICAgKi8KICAgIEBUZXN0KHRpbWVvdXQ9NjAwMDApCiAgICBwdWJs\naWMgdm9pZCB0ZXN0Q2xvc2VEdXJpbmdPcCgpIHRocm93cyBFeGNlcHRpb24g\newogICAgICAgIENsaWVudENvbmZpZ3VyYXRpb24gY29uZiA9IG5ldyBDbGll\nbnRDb25maWd1cmF0aW9uKCkKICAgICAgICAgICAgLnNldFprU2VydmVycyh6\na1V0aWwuZ2V0Wm9vS2VlcGVyQ29ubmVjdFN0cmluZygpKTsKICAgICAgICBm\nb3IgKGludCBpID0gMDsgaSA8IDEwMDsgaSsrKSB7CiAgICAgICAgICAgIGZp\nbmFsIEJvb2tLZWVwZXIgY2xpZW50ID0gbmV3IEJvb2tLZWVwZXIoY29uZik7\nCiAgICAgICAgICAgIGZpbmFsIENvdW50RG93bkxhdGNoIGwgPSBuZXcgQ291\nbnREb3duTGF0Y2goMSk7CiAgICAgICAgICAgIGZpbmFsIEF0b21pY0Jvb2xl\nYW4gc3VjY2VzcyA9IG5ldyBBdG9taWNCb29sZWFuKGZhbHNlKTsKICAgICAg\nICAgICAgVGhyZWFkIHQgPSBuZXcgVGhyZWFkKCkgewogICAgICAgICAgICAg\nICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsKICAgICAgICAgICAgICAgICAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIExlZGdl\nckhhbmRsZSBsaCA9IGNsaWVudC5jcmVhdGVMZWRnZXIoMywgMywgZGlnZXN0\nVHlwZSwgInRlc3RQYXNzd2QiLmdldEJ5dGVzKCkpOwogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgc3RhcnROZXdCb29raWUoKTsKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIGtpbGxCb29raWUoMCk7CiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICBsaC5hc3luY0FkZEVudHJ5KCJ0ZXN0Ii5nZXRCeXRl\ncygpLCBuZXcgQWRkQ2FsbGJhY2soKSB7CiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBhZGRDb21wbGV0ZShpbnQg\ncmMsIExlZGdlckhhbmRsZSBsaCwgbG9uZyBlbnRyeUlkLCBPYmplY3QgY3R4\nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAv\nLyBub29wLCB3ZSBkb24ndCBjYXJlIGlmIHRoaXMgY29tcGxldGVzCiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICB9LCBudWxsKTsKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgIGNsaWVudC5jbG9zZSgpOwogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgc3VjY2Vzcy5zZXQodHJ1ZSk7CiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICBsLmNvdW50RG93bigpOwogICAgICAgICAgICAgICAg\nICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgTE9HLmVycm9yKCJFcnJvciBydW5uaW5nIHRlc3Qi\nLCBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3Muc2V0\nKGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwuY291bnRE\nb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAg\nICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB0LnN0\nYXJ0KCk7CiAgICAgICAgICAgIGFzc2VydFRydWUoIkNsb3NlIG5ldmVyIGNv\nbXBsZXRlZCIsIGwuYXdhaXQoMTAsIFRpbWVVbml0LlNFQ09ORFMpKTsKICAg\nICAgICAgICAgYXNzZXJ0VHJ1ZSgiQ2xvc2Ugd2FzIG5vdCBzdWNjZXNzZnVs\nIiwgc3VjY2Vzcy5nZXQoKSk7CiAgICAgICAgfQogICAgfQoKICAgIEBUZXN0\nKHRpbWVvdXQ9NjAwMDApCiAgICBwdWJsaWMgdm9pZCB0ZXN0SXNDbG9zZWQo\nKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBDbGllbnRDb25maWd1cmF0\naW9uIGNvbmYgPSBuZXcgQ2xpZW50Q29uZmlndXJhdGlvbigpCiAgICAgICAg\nLnNldFprU2VydmVycyh6a1V0aWwuZ2V0Wm9vS2VlcGVyQ29ubmVjdFN0cmlu\nZygpKTsKCiAgICAgICAgQm9va0tlZXBlciBia2MgPSBuZXcgQm9va0tlZXBl\ncihjb25mKTsKICAgICAgICBMZWRnZXJIYW5kbGUgbGggPSBia2MuY3JlYXRl\nTGVkZ2VyKGRpZ2VzdFR5cGUsICJ0ZXN0UGFzc3dkIi5nZXRCeXRlcygpKTsK\nICAgICAgICBMb25nIGxJZCA9IGxoLmdldElkKCk7CgogICAgICAgIGxoLmFk\nZEVudHJ5KCIwMDAiLmdldEJ5dGVzKCkpOwogICAgICAgIGJvb2xlYW4gcmVz\ndWx0ID0gYmtjLmlzQ2xvc2VkKGxJZCk7CiAgICAgICAgQXNzZXJ0LmFzc2Vy\ndFRydWUoIkxlZGdlciBzaG91bGRuJ3QgYmUgZmxhZ2dlZCBhcyBjbG9zZWQh\nIiwhcmVzdWx0KTsKCiAgICAgICAgbGguY2xvc2UoKTsKICAgICAgICByZXN1\nbHQgPSBia2MuaXNDbG9zZWQobElkKTsKICAgICAgICBBc3NlcnQuYXNzZXJ0\nVHJ1ZSgiTGVkZ2VyIHNob3VsZCBiZSBmbGFnZ2VkIGFzIGNsb3NlZCEiLHJl\nc3VsdCk7CgogICAgICAgIGJrYy5jbG9zZSgpOwogICAgfQp9Cg==\n","encoding":"base64"}

