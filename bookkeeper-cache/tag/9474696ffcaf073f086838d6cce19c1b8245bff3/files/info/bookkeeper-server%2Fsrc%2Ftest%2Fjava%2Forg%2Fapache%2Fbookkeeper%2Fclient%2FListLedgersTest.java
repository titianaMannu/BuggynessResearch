{"sha":"d34c0648f9e0ee9251994de9e07f712f4260c6b2","node_id":"MDQ6QmxvYjE1NzU5NTY6ZDM0YzA2NDhmOWUwZWU5MjUxOTk0ZGU5ZTA3ZjcxMmY0MjYwYzZiMg==","size":3640,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/d34c0648f9e0ee9251994de9e07f712f4260c6b2","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUgb3IgbW9yZQogKiBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuIFNlZSB0aGUgTk9USUNFIGZpbGUgZGlzdHJp\nYnV0ZWQgd2l0aCB0aGlzCiAqIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24gcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuIFRoZSBBU0YK\nICogbGljZW5zZXMgdGhpcyBmaWxlIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hl\nIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUKICogIkxpY2Vuc2UiKTsgeW91\nIG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3\naXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2Yg\ndGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xp\nY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBh\ncHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdh\ncmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJp\nYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywgV0lUSE9VVAogKiBXQVJSQU5U\nSUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNz\nIG9yIGltcGxpZWQuIFNlZSB0aGUKICogTGljZW5zZSBmb3IgdGhlIHNwZWNp\nZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRh\ndGlvbnMgdW5kZXIKICogdGhlIExpY2Vuc2UuCiAqLwoKcGFja2FnZSBvcmcu\nYXBhY2hlLmJvb2trZWVwZXIuY2xpZW50OwoKaW1wb3J0IGphdmEudXRpbC5J\ndGVyYXRvcjsKCmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY2xpZW50\nLkJvb2tLZWVwZXIuRGlnZXN0VHlwZTsKaW1wb3J0IG9yZy5hcGFjaGUuYm9v\na2tlZXBlci5jb25mLkNsaWVudENvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcu\nYXBhY2hlLmJvb2trZWVwZXIudGVzdC5CYXNlVGVzdENhc2U7CgppbXBvcnQg\nb3JnLmFwYWNoZS56b29rZWVwZXIuS2VlcGVyRXhjZXB0aW9uOwoKaW1wb3J0\nIG9yZy5qdW5pdC5Bc3NlcnQ7CmltcG9ydCBvcmcuanVuaXQuVGVzdDsKaW1w\nb3J0IG9yZy5zbGY0ai5Mb2dnZXI7CmltcG9ydCBvcmcuc2xmNGouTG9nZ2Vy\nRmFjdG9yeTsKCnB1YmxpYyBjbGFzcyBMaXN0TGVkZ2Vyc1Rlc3QgZXh0ZW5k\ncyBCYXNlVGVzdENhc2UgewogICAgcHJpdmF0ZSBmaW5hbCBzdGF0aWMgTG9n\nZ2VyIExPRyA9IExvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKExpc3RMZWRnZXJz\nVGVzdC5jbGFzcyk7CgogICAgRGlnZXN0VHlwZSBkaWdlc3RUeXBlOwoKICAg\nIHB1YmxpYyBMaXN0TGVkZ2Vyc1Rlc3QgKERpZ2VzdFR5cGUgZGlnZXN0VHlw\nZSkgewogICAgICAgIHN1cGVyKDQpOwogICAgICAgIHRoaXMuZGlnZXN0VHlw\nZSA9IGRpZ2VzdFR5cGU7CiAgICB9CgogICAgQFRlc3QodGltZW91dD02MDAw\nMCkKICAgIHB1YmxpYyB2b2lkIHRlc3RMaXN0TGVkZ2VycygpCiAgICB0aHJv\nd3MgRXhjZXB0aW9uIHsKICAgICAgICBpbnQgbnVtT2ZMZWRnZXJzID0gMTA7\nCgogICAgICAgIENsaWVudENvbmZpZ3VyYXRpb24gY29uZiA9IG5ldyBDbGll\nbnRDb25maWd1cmF0aW9uKCkKICAgICAgICAuc2V0WmtTZXJ2ZXJzKHprVXRp\nbC5nZXRab29LZWVwZXJDb25uZWN0U3RyaW5nKCkpOwoKICAgICAgICBCb29r\nS2VlcGVyIGJrYyA9IG5ldyBCb29rS2VlcGVyKGNvbmYpOwogICAgICAgIGZv\nciAoaW50IGkgPSAwOyBpIDwgbnVtT2ZMZWRnZXJzIDsgaSsrKSB7CiAgICAg\nICAgICAgIGJrYy5jcmVhdGVMZWRnZXIoZGlnZXN0VHlwZSwgInRlc3RQYXNz\nd2QiLgogICAgICAgICAgICAgICAgICAgIGdldEJ5dGVzKCkpLmNsb3NlKCk7\nCiAgICAgICAgfQoKICAgICAgICBCb29rS2VlcGVyQWRtaW4gYWRtaW4gPSBu\nZXcgQm9va0tlZXBlckFkbWluKHprVXRpbC4KICAgICAgICAgICAgICAgIGdl\ndFpvb0tlZXBlckNvbm5lY3RTdHJpbmcoKSk7CiAgICAgICAgSXRlcmFibGU8\nTG9uZz4gaXRlcmFibGUgPSBhZG1pbi5saXN0TGVkZ2VycygpOwoKICAgICAg\nICBpbnQgY291bnRlciA9IDA7CiAgICAgICAgZm9yIChMb25nIGxJZDogaXRl\ncmFibGUpIHsKICAgICAgICAgICAgY291bnRlcisrOwogICAgICAgIH0KCiAg\nICAgICAgQXNzZXJ0LmFzc2VydFRydWUoIldyb25nIG51bWJlciBvZiBsZWRn\nZXJzOiAiICsgbnVtT2ZMZWRnZXJzLAogICAgICAgICAgICAgICAgY291bnRl\nciA9PSBudW1PZkxlZGdlcnMpOwogICAgfQoKICAgIEBUZXN0KHRpbWVvdXQ9\nNjAwMDApCiAgICBwdWJsaWMgdm9pZCB0ZXN0RW1wdHlMaXN0KCkKICAgIHRo\ncm93cyBFeGNlcHRpb24gewogICAgICAgIENsaWVudENvbmZpZ3VyYXRpb24g\nY29uZiA9IG5ldyBDbGllbnRDb25maWd1cmF0aW9uKCkKICAgICAgICAuc2V0\nWmtTZXJ2ZXJzKHprVXRpbC5nZXRab29LZWVwZXJDb25uZWN0U3RyaW5nKCkp\nOwoKICAgICAgICBCb29rS2VlcGVyQWRtaW4gYWRtaW4gPSBuZXcgQm9va0tl\nZXBlckFkbWluKHprVXRpbC4KICAgICAgICAgICAgICAgIGdldFpvb0tlZXBl\nckNvbm5lY3RTdHJpbmcoKSk7CiAgICAgICAgSXRlcmFibGU8TG9uZz4gaXRl\ncmFibGUgPSBhZG1pbi5saXN0TGVkZ2VycygpOwoKICAgICAgICBBc3NlcnQu\nYXNzZXJ0RmFsc2UoIlRoZXJlIHNob3VsZCBiZSBubyBsZWRnZXIiLCBpdGVy\nYWJsZS5pdGVyYXRvcigpLmhhc05leHQoKSk7CiAgICB9CgogICAgQFRlc3Qo\ndGltZW91dD02MDAwMCkKICAgIHB1YmxpYyB2b2lkIHRlc3RSZW1vdmVOb3RT\ndXBwb3J0ZWQoKQogICAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgaW50\nIG51bU9mTGVkZ2VycyA9IDE7CgogICAgICAgIENsaWVudENvbmZpZ3VyYXRp\nb24gY29uZiA9IG5ldyBDbGllbnRDb25maWd1cmF0aW9uKCkKICAgICAgICAu\nc2V0WmtTZXJ2ZXJzKHprVXRpbC5nZXRab29LZWVwZXJDb25uZWN0U3RyaW5n\nKCkpOwoKICAgICAgICBCb29rS2VlcGVyIGJrYyA9IG5ldyBCb29rS2VlcGVy\nKGNvbmYpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbnVtT2ZMZWRn\nZXJzIDsgaSsrKSB7CiAgICAgICAgICAgIGJrYy5jcmVhdGVMZWRnZXIoZGln\nZXN0VHlwZSwgInRlc3RQYXNzd2QiLgogICAgICAgICAgICAgICAgICAgIGdl\ndEJ5dGVzKCkpLmNsb3NlKCk7CiAgICAgICAgfQoKICAgICAgICBCb29rS2Vl\ncGVyQWRtaW4gYWRtaW4gPSBuZXcgQm9va0tlZXBlckFkbWluKHprVXRpbC4K\nICAgICAgICAgICAgICAgIGdldFpvb0tlZXBlckNvbm5lY3RTdHJpbmcoKSk7\nCiAgICAgICAgSXRlcmF0b3I8TG9uZz4gaXRlcmF0b3IgPSBhZG1pbi5saXN0\nTGVkZ2VycygpLml0ZXJhdG9yKCk7CiAgICAgICAgaXRlcmF0b3IubmV4dCgp\nOwogICAgICAgIHRyeXsKICAgICAgICAgICAgaXRlcmF0b3IucmVtb3ZlKCk7\nCiAgICAgICAgfSBjYXRjaCAoVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRp\nb24gZSkgewogICAgICAgICAgICAvLyBUaGlzIGV4Y2VwdGlvbiBpcyBleHBl\nY3RlZAogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBB\nc3NlcnQuZmFpbCgiUmVtb3ZlIGlzIG5vdCBzdXBwb3J0ZWQsIHdlIHNob3Vs\nbid0IGhhdmUgcmVhY2hlZCB0aGlzIHBvaW50Iik7CgogICAgfQp9Cg==\n","encoding":"base64"}

