{"sha":"b5f5e322af75b7139aa6686da2cb9bdb4a42d412","node_id":"MDQ6QmxvYjE1NzU5NTY6YjVmNWUzMjJhZjc1YjcxMzlhYTY2ODZkYTJjYjliZGI0YTQyZDQxMg==","size":14926,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/b5f5e322af75b7139aa6686da2cb9bdb4a42d412","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgaHR0cDovL3d3dy5hcGFj\naGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1\naXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGlu\nZywgc29mdHdhcmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2Ug\naXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9V\nVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhl\nciBleHByZXNzIG9yIGltcGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3Ig\ndGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQKICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci5jbGllbnQ7CgppbXBvcnQgc3Rh\ndGljIG9yZy5hcGFjaGUuYm9va2tlZXBlci5jbGllbnQuUmFja2F3YXJlRW5z\nZW1ibGVQbGFjZW1lbnRQb2xpY3kuUkVQUF9ETlNfUkVTT0xWRVJfQ0xBU1M7\nCgppbXBvcnQgamF2YS5uZXQuSW5ldEFkZHJlc3M7CmltcG9ydCBqYXZhLnV0\naWwuQXJyYXlMaXN0OwppbXBvcnQgamF2YS51dGlsLkhhc2hTZXQ7CmltcG9y\ndCBqYXZhLnV0aWwuU2V0OwoKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBl\nci5jbGllbnQuQktFeGNlcHRpb24uQktOb3RFbm91Z2hCb29raWVzRXhjZXB0\naW9uOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLm5ldC5Cb29raWVT\nb2NrZXRBZGRyZXNzOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLm5l\ndC5OZXR3b3JrVG9wb2xvZ3k7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVw\nZXIudXRpbC5TdGF0aWNETlNSZXNvbHZlcjsKaW1wb3J0IG9yZy5hcGFjaGUu\nY29tbW9ucy5jb25maWd1cmF0aW9uLkNvbXBvc2l0ZUNvbmZpZ3VyYXRpb247\nCmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMuY29uZmlndXJhdGlvbi5Db25m\naWd1cmF0aW9uOwppbXBvcnQgb3JnLmp1bml0LkFmdGVyOwppbXBvcnQgb3Jn\nLmp1bml0LkJlZm9yZTsKaW1wb3J0IG9yZy5qdW5pdC5UZXN0OwppbXBvcnQg\nb3JnLnNsZjRqLkxvZ2dlcjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJGYWN0\nb3J5OwoKaW1wb3J0IHN0YXRpYyBvcmcuanVuaXQuQXNzZXJ0Lio7CgpwdWJs\naWMgY2xhc3MgVGVzdFJhY2thd2FyZUVuc2VtYmxlUGxhY2VtZW50UG9saWN5\nIHsKCiAgICBzdGF0aWMgZmluYWwgTG9nZ2VyIExPRyA9IExvZ2dlckZhY3Rv\ncnkuZ2V0TG9nZ2VyKFRlc3RSYWNrYXdhcmVFbnNlbWJsZVBsYWNlbWVudFBv\nbGljeS5jbGFzcyk7CgogICAgUmFja2F3YXJlRW5zZW1ibGVQbGFjZW1lbnRQ\nb2xpY3kgcmVwcDsKICAgIENvbmZpZ3VyYXRpb24gY29uZiA9IG5ldyBDb21w\nb3NpdGVDb25maWd1cmF0aW9uKCk7CgogICAgQEJlZm9yZQogICAgcHVibGlj\nIHZvaWQgc2V0VXAoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBTdGF0\naWNETlNSZXNvbHZlci5yZXNldCgpOwogICAgICAgIFN0YXRpY0ROU1Jlc29s\ndmVyLmFkZE5vZGVUb1JhY2soSW5ldEFkZHJlc3MuZ2V0TG9jYWxIb3N0KCku\nZ2V0SG9zdEFkZHJlc3MoKSwgTmV0d29ya1RvcG9sb2d5LkRFRkFVTFRfUkFD\nSyk7CiAgICAgICAgU3RhdGljRE5TUmVzb2x2ZXIuYWRkTm9kZVRvUmFjaygi\nMTI3LjAuMC4xIiwgTmV0d29ya1RvcG9sb2d5LkRFRkFVTFRfUkFDSyk7CiAg\nICAgICAgU3RhdGljRE5TUmVzb2x2ZXIuYWRkTm9kZVRvUmFjaygibG9jYWxo\nb3N0IiwgTmV0d29ya1RvcG9sb2d5LkRFRkFVTFRfUkFDSyk7CiAgICAgICAg\nTE9HLmluZm8oIlNldCB1cCBzdGF0aWMgRE5TIFJlc29sdmVyLiIpOwogICAg\nICAgIGNvbmYuc2V0UHJvcGVydHkoUkVQUF9ETlNfUkVTT0xWRVJfQ0xBU1Ms\nIFN0YXRpY0ROU1Jlc29sdmVyLmNsYXNzLmdldE5hbWUoKSk7CiAgICAgICAg\ncmVwcCA9IG5ldyBSYWNrYXdhcmVFbnNlbWJsZVBsYWNlbWVudFBvbGljeSgp\nOwogICAgICAgIHJlcHAuaW5pdGlhbGl6ZShjb25mKTsKICAgIH0KCiAgICBA\nQWZ0ZXIKICAgIHB1YmxpYyB2b2lkIHRlYXJEb3duKCkgdGhyb3dzIEV4Y2Vw\ndGlvbiB7CiAgICAgICAgcmVwcC51bmluaXRhbGl6ZSgpOwogICAgfQoKICAg\nIEBUZXN0KHRpbWVvdXQgPSA2MDAwMCkKICAgIHB1YmxpYyB2b2lkIHRlc3RS\nZXBsYWNlQm9va2llV2l0aEVub3VnaEJvb2tpZXNJblNhbWVSYWNrKCkgdGhy\nb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgQm9va2llU29ja2V0QWRkcmVzcyBh\nZGRyMSA9IG5ldyBCb29raWVTb2NrZXRBZGRyZXNzKCIxMjcuMC4wLjEiLCAz\nMTgxKTsKICAgICAgICBCb29raWVTb2NrZXRBZGRyZXNzIGFkZHIyID0gbmV3\nIEJvb2tpZVNvY2tldEFkZHJlc3MoIjEyNy4wLjAuMiIsIDMxODEpOwogICAg\nICAgIEJvb2tpZVNvY2tldEFkZHJlc3MgYWRkcjMgPSBuZXcgQm9va2llU29j\na2V0QWRkcmVzcygiMTI3LjAuMC4zIiwgMzE4MSk7CiAgICAgICAgQm9va2ll\nU29ja2V0QWRkcmVzcyBhZGRyNCA9IG5ldyBCb29raWVTb2NrZXRBZGRyZXNz\nKCIxMjcuMC4wLjQiLCAzMTgxKTsKICAgICAgICAvLyB1cGRhdGUgZG5zIG1h\ncHBpbmcKICAgICAgICBTdGF0aWNETlNSZXNvbHZlci5hZGROb2RlVG9SYWNr\nKGFkZHIxLmdldFNvY2tldEFkZHJlc3MoKS5nZXRBZGRyZXNzKCkuZ2V0SG9z\ndEFkZHJlc3MoKSwKICAgICAgICAgICAgICAgIE5ldHdvcmtUb3BvbG9neS5E\nRUZBVUxUX1JBQ0spOwogICAgICAgIFN0YXRpY0ROU1Jlc29sdmVyLmFkZE5v\nZGVUb1JhY2soYWRkcjIuZ2V0U29ja2V0QWRkcmVzcygpLmdldEFkZHJlc3Mo\nKS5nZXRIb3N0QWRkcmVzcygpLCAiL3IyIik7CiAgICAgICAgU3RhdGljRE5T\nUmVzb2x2ZXIuYWRkTm9kZVRvUmFjayhhZGRyMy5nZXRTb2NrZXRBZGRyZXNz\nKCkuZ2V0QWRkcmVzcygpLmdldEhvc3RBZGRyZXNzKCksICIvcjIiKTsKICAg\nICAgICBTdGF0aWNETlNSZXNvbHZlci5hZGROb2RlVG9SYWNrKGFkZHI0Lmdl\ndFNvY2tldEFkZHJlc3MoKS5nZXRBZGRyZXNzKCkuZ2V0SG9zdEFkZHJlc3Mo\nKSwgIi9yMyIpOwogICAgICAgIC8vIFVwZGF0ZSBjbHVzdGVyCiAgICAgICAg\nU2V0PEJvb2tpZVNvY2tldEFkZHJlc3M+IGFkZHJzID0gbmV3IEhhc2hTZXQ8\nQm9va2llU29ja2V0QWRkcmVzcz4oKTsKICAgICAgICBhZGRycy5hZGQoYWRk\ncjEpOwogICAgICAgIGFkZHJzLmFkZChhZGRyMik7CiAgICAgICAgYWRkcnMu\nYWRkKGFkZHIzKTsKICAgICAgICBhZGRycy5hZGQoYWRkcjQpOwogICAgICAg\nIHJlcHAub25DbHVzdGVyQ2hhbmdlZChhZGRycywgbmV3IEhhc2hTZXQ8Qm9v\na2llU29ja2V0QWRkcmVzcz4oKSk7CiAgICAgICAgLy8gcmVwbGFjZSBub2Rl\nIHVuZGVyIHIyCiAgICAgICAgQm9va2llU29ja2V0QWRkcmVzcyByZXBsYWNl\nZEJvb2tpZSA9IHJlcHAucmVwbGFjZUJvb2tpZShhZGRyMiwgbmV3IEhhc2hT\nZXQ8Qm9va2llU29ja2V0QWRkcmVzcz4oKSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKGFkZHIzLCByZXBsYWNlZEJvb2tpZSk7CiAgICB9CgogICAgQFRlc3Qo\ndGltZW91dCA9IDYwMDAwKQogICAgcHVibGljIHZvaWQgdGVzdFJlcGxhY2VC\nb29raWVXaXRoRW5vdWdoQm9va2llc0luRGlmZmVyZW50UmFjaygpIHRocm93\ncyBFeGNlcHRpb24gewogICAgICAgIEJvb2tpZVNvY2tldEFkZHJlc3MgYWRk\ncjEgPSBuZXcgQm9va2llU29ja2V0QWRkcmVzcygiMTI3LjAuMC4xIiwgMzE4\nMSk7CiAgICAgICAgQm9va2llU29ja2V0QWRkcmVzcyBhZGRyMiA9IG5ldyBC\nb29raWVTb2NrZXRBZGRyZXNzKCIxMjcuMC4wLjIiLCAzMTgxKTsKICAgICAg\nICBCb29raWVTb2NrZXRBZGRyZXNzIGFkZHIzID0gbmV3IEJvb2tpZVNvY2tl\ndEFkZHJlc3MoIjEyNy4wLjAuMyIsIDMxODEpOwogICAgICAgIEJvb2tpZVNv\nY2tldEFkZHJlc3MgYWRkcjQgPSBuZXcgQm9va2llU29ja2V0QWRkcmVzcygi\nMTI3LjAuMC40IiwgMzE4MSk7CiAgICAgICAgLy8gdXBkYXRlIGRucyBtYXBw\naW5nCiAgICAgICAgU3RhdGljRE5TUmVzb2x2ZXIuYWRkTm9kZVRvUmFjayhh\nZGRyMS5nZXRTb2NrZXRBZGRyZXNzKCkuZ2V0QWRkcmVzcygpLmdldEhvc3RB\nZGRyZXNzKCksCiAgICAgICAgICAgICAgICBOZXR3b3JrVG9wb2xvZ3kuREVG\nQVVMVF9SQUNLKTsKICAgICAgICBTdGF0aWNETlNSZXNvbHZlci5hZGROb2Rl\nVG9SYWNrKGFkZHIyLmdldFNvY2tldEFkZHJlc3MoKS5nZXRBZGRyZXNzKCku\nZ2V0SG9zdEFkZHJlc3MoKSwgIi9yMiIpOwogICAgICAgIFN0YXRpY0ROU1Jl\nc29sdmVyLmFkZE5vZGVUb1JhY2soYWRkcjMuZ2V0U29ja2V0QWRkcmVzcygp\nLmdldEFkZHJlc3MoKS5nZXRIb3N0QWRkcmVzcygpLCAiL3IzIik7CiAgICAg\nICAgU3RhdGljRE5TUmVzb2x2ZXIuYWRkTm9kZVRvUmFjayhhZGRyNC5nZXRT\nb2NrZXRBZGRyZXNzKCkuZ2V0QWRkcmVzcygpLmdldEhvc3RBZGRyZXNzKCks\nICIvcjQiKTsKICAgICAgICAvLyBVcGRhdGUgY2x1c3RlcgogICAgICAgIFNl\ndDxCb29raWVTb2NrZXRBZGRyZXNzPiBhZGRycyA9IG5ldyBIYXNoU2V0PEJv\nb2tpZVNvY2tldEFkZHJlc3M+KCk7CiAgICAgICAgYWRkcnMuYWRkKGFkZHIx\nKTsKICAgICAgICBhZGRycy5hZGQoYWRkcjIpOwogICAgICAgIGFkZHJzLmFk\nZChhZGRyMyk7CiAgICAgICAgYWRkcnMuYWRkKGFkZHI0KTsKICAgICAgICBy\nZXBwLm9uQ2x1c3RlckNoYW5nZWQoYWRkcnMsIG5ldyBIYXNoU2V0PEJvb2tp\nZVNvY2tldEFkZHJlc3M+KCkpOwogICAgICAgIC8vIHJlcGxhY2Ugbm9kZSB1\nbmRlciByMgogICAgICAgIFNldDxCb29raWVTb2NrZXRBZGRyZXNzPiBleGNs\ndWRlZEFkZHJzID0gbmV3IEhhc2hTZXQ8Qm9va2llU29ja2V0QWRkcmVzcz4o\nKTsKICAgICAgICBleGNsdWRlZEFkZHJzLmFkZChhZGRyMSk7CiAgICAgICAg\nQm9va2llU29ja2V0QWRkcmVzcyByZXBsYWNlZEJvb2tpZSA9IHJlcHAucmVw\nbGFjZUJvb2tpZShhZGRyMiwgZXhjbHVkZWRBZGRycyk7CgogICAgICAgIGFz\nc2VydEZhbHNlKGFkZHIxLmVxdWFscyhyZXBsYWNlZEJvb2tpZSkpOwogICAg\nICAgIGFzc2VydFRydWUoYWRkcjMuZXF1YWxzKHJlcGxhY2VkQm9va2llKSB8\nfCBhZGRyNC5lcXVhbHMocmVwbGFjZWRCb29raWUpKTsKICAgIH0KCiAgICBA\nVGVzdCh0aW1lb3V0ID0gNjAwMDApCiAgICBwdWJsaWMgdm9pZCB0ZXN0UmVw\nbGFjZUJvb2tpZVdpdGhOb3RFbm91Z2hCb29raWVzKCkgdGhyb3dzIEV4Y2Vw\ndGlvbiB7CiAgICAgICAgQm9va2llU29ja2V0QWRkcmVzcyBhZGRyMSA9IG5l\ndyBCb29raWVTb2NrZXRBZGRyZXNzKCIxMjcuMC4wLjEiLCAzMTgxKTsKICAg\nICAgICBCb29raWVTb2NrZXRBZGRyZXNzIGFkZHIyID0gbmV3IEJvb2tpZVNv\nY2tldEFkZHJlc3MoIjEyNy4wLjAuMiIsIDMxODEpOwogICAgICAgIEJvb2tp\nZVNvY2tldEFkZHJlc3MgYWRkcjMgPSBuZXcgQm9va2llU29ja2V0QWRkcmVz\ncygiMTI3LjAuMC4zIiwgMzE4MSk7CiAgICAgICAgQm9va2llU29ja2V0QWRk\ncmVzcyBhZGRyNCA9IG5ldyBCb29raWVTb2NrZXRBZGRyZXNzKCIxMjcuMC4w\nLjQiLCAzMTgxKTsKICAgICAgICAvLyB1cGRhdGUgZG5zIG1hcHBpbmcKICAg\nICAgICBTdGF0aWNETlNSZXNvbHZlci5hZGROb2RlVG9SYWNrKGFkZHIxLmdl\ndFNvY2tldEFkZHJlc3MoKS5nZXRBZGRyZXNzKCkuZ2V0SG9zdEFkZHJlc3Mo\nKSwKICAgICAgICAgICAgICAgIE5ldHdvcmtUb3BvbG9neS5ERUZBVUxUX1JB\nQ0spOwogICAgICAgIFN0YXRpY0ROU1Jlc29sdmVyLmFkZE5vZGVUb1JhY2so\nYWRkcjIuZ2V0U29ja2V0QWRkcmVzcygpLmdldEFkZHJlc3MoKS5nZXRIb3N0\nQWRkcmVzcygpLCAiL3IyIik7CiAgICAgICAgU3RhdGljRE5TUmVzb2x2ZXIu\nYWRkTm9kZVRvUmFjayhhZGRyMy5nZXRTb2NrZXRBZGRyZXNzKCkuZ2V0QWRk\ncmVzcygpLmdldEhvc3RBZGRyZXNzKCksICIvcjMiKTsKICAgICAgICBTdGF0\naWNETlNSZXNvbHZlci5hZGROb2RlVG9SYWNrKGFkZHI0LmdldFNvY2tldEFk\nZHJlc3MoKS5nZXRBZGRyZXNzKCkuZ2V0SG9zdEFkZHJlc3MoKSwgIi9yNCIp\nOwogICAgICAgIC8vIFVwZGF0ZSBjbHVzdGVyCiAgICAgICAgU2V0PEJvb2tp\nZVNvY2tldEFkZHJlc3M+IGFkZHJzID0gbmV3IEhhc2hTZXQ8Qm9va2llU29j\na2V0QWRkcmVzcz4oKTsKICAgICAgICBhZGRycy5hZGQoYWRkcjEpOwogICAg\nICAgIGFkZHJzLmFkZChhZGRyMik7CiAgICAgICAgYWRkcnMuYWRkKGFkZHIz\nKTsKICAgICAgICBhZGRycy5hZGQoYWRkcjQpOwogICAgICAgIHJlcHAub25D\nbHVzdGVyQ2hhbmdlZChhZGRycywgbmV3IEhhc2hTZXQ8Qm9va2llU29ja2V0\nQWRkcmVzcz4oKSk7CiAgICAgICAgLy8gcmVwbGFjZSBub2RlIHVuZGVyIHIy\nCiAgICAgICAgU2V0PEJvb2tpZVNvY2tldEFkZHJlc3M+IGV4Y2x1ZGVkQWRk\ncnMgPSBuZXcgSGFzaFNldDxCb29raWVTb2NrZXRBZGRyZXNzPigpOwogICAg\nICAgIGV4Y2x1ZGVkQWRkcnMuYWRkKGFkZHIxKTsKICAgICAgICBleGNsdWRl\nZEFkZHJzLmFkZChhZGRyMyk7CiAgICAgICAgZXhjbHVkZWRBZGRycy5hZGQo\nYWRkcjQpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJlcHAucmVwbGFj\nZUJvb2tpZShhZGRyMiwgZXhjbHVkZWRBZGRycyk7CiAgICAgICAgICAgIGZh\naWwoIlNob3VsZCB0aHJvdyBCS05vdEVub3VnaEJvb2tpZXNFeGNlcHRpb24g\nd2hlbiB0aGVyZSBpcyBub3QgZW5vdWdoIGJvb2tpZXMiKTsKICAgICAgICB9\nIGNhdGNoIChCS05vdEVub3VnaEJvb2tpZXNFeGNlcHRpb24gYm5lYmUpIHsK\nICAgICAgICAgICAgLy8gc2hvdWxkIHRocm93IG5vdCBlbm91CiAgICAgICAg\nfQogICAgfQoKICAgIEBUZXN0KHRpbWVvdXQgPSA2MDAwMCkKICAgIHB1Ymxp\nYyB2b2lkIHRlc3ROZXdFbnNlbWJsZVdpdGhTaW5nbGVSYWNrKCkgdGhyb3dz\nIEV4Y2VwdGlvbiB7CiAgICAgICAgQm9va2llU29ja2V0QWRkcmVzcyBhZGRy\nMSA9IG5ldyBCb29raWVTb2NrZXRBZGRyZXNzKCIxMjcuMC4wLjEiLCAzMTgx\nKTsKICAgICAgICBCb29raWVTb2NrZXRBZGRyZXNzIGFkZHIyID0gbmV3IEJv\nb2tpZVNvY2tldEFkZHJlc3MoIjEyNy4wLjAuMiIsIDMxODEpOwogICAgICAg\nIEJvb2tpZVNvY2tldEFkZHJlc3MgYWRkcjMgPSBuZXcgQm9va2llU29ja2V0\nQWRkcmVzcygiMTI3LjAuMC4zIiwgMzE4MSk7CiAgICAgICAgQm9va2llU29j\na2V0QWRkcmVzcyBhZGRyNCA9IG5ldyBCb29raWVTb2NrZXRBZGRyZXNzKCIx\nMjcuMC4wLjQiLCAzMTgxKTsKICAgICAgICAvLyBVcGRhdGUgY2x1c3Rlcgog\nICAgICAgIFNldDxCb29raWVTb2NrZXRBZGRyZXNzPiBhZGRycyA9IG5ldyBI\nYXNoU2V0PEJvb2tpZVNvY2tldEFkZHJlc3M+KCk7CiAgICAgICAgYWRkcnMu\nYWRkKGFkZHIxKTsKICAgICAgICBhZGRycy5hZGQoYWRkcjIpOwogICAgICAg\nIGFkZHJzLmFkZChhZGRyMyk7CiAgICAgICAgYWRkcnMuYWRkKGFkZHI0KTsK\nICAgICAgICByZXBwLm9uQ2x1c3RlckNoYW5nZWQoYWRkcnMsIG5ldyBIYXNo\nU2V0PEJvb2tpZVNvY2tldEFkZHJlc3M+KCkpOwogICAgICAgIHRyeSB7CiAg\nICAgICAgICAgIEFycmF5TGlzdDxCb29raWVTb2NrZXRBZGRyZXNzPiBlbnNl\nbWJsZSA9IHJlcHAubmV3RW5zZW1ibGUoMywgMiwgbmV3IEhhc2hTZXQ8Qm9v\na2llU29ja2V0QWRkcmVzcz4oKSk7CiAgICAgICAgICAgIGFzc2VydEVxdWFs\ncygwLCBnZXROdW1Db3ZlcmVkV3JpdGVRdW9ydW1zKGVuc2VtYmxlLCAyKSk7\nCiAgICAgICAgICAgIEFycmF5TGlzdDxCb29raWVTb2NrZXRBZGRyZXNzPiBl\nbnNlbWJsZTIgPSByZXBwLm5ld0Vuc2VtYmxlKDQsIDIsIG5ldyBIYXNoU2V0\nPEJvb2tpZVNvY2tldEFkZHJlc3M+KCkpOwogICAgICAgICAgICBhc3NlcnRF\ncXVhbHMoMCwgZ2V0TnVtQ292ZXJlZFdyaXRlUXVvcnVtcyhlbnNlbWJsZTIs\nIDIpKTsKICAgICAgICB9IGNhdGNoIChCS05vdEVub3VnaEJvb2tpZXNFeGNl\ncHRpb24gYm5lYmUpIHsKICAgICAgICAgICAgZmFpbCgiU2hvdWxkIG5vdCBn\nZXQgbm90IGVub3VnaCBib29raWVzIGV4Y2VwdGlvbiBldmVuIHRoZXJlIGlz\nIG9ubHkgb25lIHJhY2suIik7CiAgICAgICAgfQogICAgfQoKICAgIEBUZXN0\nKHRpbWVvdXQgPSA2MDAwMCkKICAgIHB1YmxpYyB2b2lkIHRlc3ROZXdFbnNl\nbWJsZVdpdGhNdWx0aXBsZVJhY2tzKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAg\nICAgICAgQm9va2llU29ja2V0QWRkcmVzcyBhZGRyMSA9IG5ldyBCb29raWVT\nb2NrZXRBZGRyZXNzKCIxMjcuMC4wLjEiLCAzMTgxKTsKICAgICAgICBCb29r\naWVTb2NrZXRBZGRyZXNzIGFkZHIyID0gbmV3IEJvb2tpZVNvY2tldEFkZHJl\nc3MoIjEyNy4wLjAuMiIsIDMxODEpOwogICAgICAgIEJvb2tpZVNvY2tldEFk\nZHJlc3MgYWRkcjMgPSBuZXcgQm9va2llU29ja2V0QWRkcmVzcygiMTI3LjAu\nMC4zIiwgMzE4MSk7CiAgICAgICAgQm9va2llU29ja2V0QWRkcmVzcyBhZGRy\nNCA9IG5ldyBCb29raWVTb2NrZXRBZGRyZXNzKCIxMjcuMC4wLjQiLCAzMTgx\nKTsKICAgICAgICAvLyB1cGRhdGUgZG5zIG1hcHBpbmcKICAgICAgICBTdGF0\naWNETlNSZXNvbHZlci5hZGROb2RlVG9SYWNrKGFkZHIxLmdldFNvY2tldEFk\nZHJlc3MoKS5nZXRBZGRyZXNzKCkuZ2V0SG9zdEFkZHJlc3MoKSwKICAgICAg\nICAgICAgICAgIE5ldHdvcmtUb3BvbG9neS5ERUZBVUxUX1JBQ0spOwogICAg\nICAgIFN0YXRpY0ROU1Jlc29sdmVyLmFkZE5vZGVUb1JhY2soYWRkcjIuZ2V0\nU29ja2V0QWRkcmVzcygpLmdldEFkZHJlc3MoKS5nZXRIb3N0QWRkcmVzcygp\nLCAiL3IyIik7CiAgICAgICAgU3RhdGljRE5TUmVzb2x2ZXIuYWRkTm9kZVRv\nUmFjayhhZGRyMy5nZXRTb2NrZXRBZGRyZXNzKCkuZ2V0QWRkcmVzcygpLmdl\ndEhvc3RBZGRyZXNzKCksICIvcjIiKTsKICAgICAgICBTdGF0aWNETlNSZXNv\nbHZlci5hZGROb2RlVG9SYWNrKGFkZHI0LmdldFNvY2tldEFkZHJlc3MoKS5n\nZXRBZGRyZXNzKCkuZ2V0SG9zdEFkZHJlc3MoKSwgIi9yMiIpOwogICAgICAg\nIC8vIFVwZGF0ZSBjbHVzdGVyCiAgICAgICAgU2V0PEJvb2tpZVNvY2tldEFk\nZHJlc3M+IGFkZHJzID0gbmV3IEhhc2hTZXQ8Qm9va2llU29ja2V0QWRkcmVz\ncz4oKTsKICAgICAgICBhZGRycy5hZGQoYWRkcjEpOwogICAgICAgIGFkZHJz\nLmFkZChhZGRyMik7CiAgICAgICAgYWRkcnMuYWRkKGFkZHIzKTsKICAgICAg\nICBhZGRycy5hZGQoYWRkcjQpOwogICAgICAgIHJlcHAub25DbHVzdGVyQ2hh\nbmdlZChhZGRycywgbmV3IEhhc2hTZXQ8Qm9va2llU29ja2V0QWRkcmVzcz4o\nKSk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgQXJyYXlMaXN0PEJvb2tp\nZVNvY2tldEFkZHJlc3M+IGVuc2VtYmxlID0gcmVwcC5uZXdFbnNlbWJsZSgz\nLCAyLCBuZXcgSGFzaFNldDxCb29raWVTb2NrZXRBZGRyZXNzPigpKTsKICAg\nICAgICAgICAgaW50IG51bUNvdmVyZWQgPSBnZXROdW1Db3ZlcmVkV3JpdGVR\ndW9ydW1zKGVuc2VtYmxlLCAyKTsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZShu\ndW1Db3ZlcmVkID49IDEgJiYgbnVtQ292ZXJlZCA8IDMpOwogICAgICAgICAg\nICBBcnJheUxpc3Q8Qm9va2llU29ja2V0QWRkcmVzcz4gZW5zZW1ibGUyID0g\ncmVwcC5uZXdFbnNlbWJsZSg0LCAyLCBuZXcgSGFzaFNldDxCb29raWVTb2Nr\nZXRBZGRyZXNzPigpKTsKICAgICAgICAgICAgbnVtQ292ZXJlZCA9IGdldE51\nbUNvdmVyZWRXcml0ZVF1b3J1bXMoZW5zZW1ibGUyLCAyKTsKICAgICAgICAg\nICAgYXNzZXJ0VHJ1ZShudW1Db3ZlcmVkID49IDEgJiYgbnVtQ292ZXJlZCA8\nIDMpOwogICAgICAgIH0gY2F0Y2ggKEJLTm90RW5vdWdoQm9va2llc0V4Y2Vw\ndGlvbiBibmViZSkgewogICAgICAgICAgICBmYWlsKCJTaG91bGQgbm90IGdl\ndCBub3QgZW5vdWdoIGJvb2tpZXMgZXhjZXB0aW9uIGV2ZW4gdGhlcmUgaXMg\nb25seSBvbmUgcmFjay4iKTsKICAgICAgICB9CiAgICB9CgogICAgQFRlc3Qo\ndGltZW91dCA9IDkwMDAwKQogICAgcHVibGljIHZvaWQgdGVzdE5ld0Vuc2Vt\nYmxlV2l0aEVub3VnaFJhY2tzKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAg\nICAgQm9va2llU29ja2V0QWRkcmVzcyBhZGRyMSA9IG5ldyBCb29raWVTb2Nr\nZXRBZGRyZXNzKCIxMjcuMC4wLjEiLCAzMTgxKTsKICAgICAgICBCb29raWVT\nb2NrZXRBZGRyZXNzIGFkZHIyID0gbmV3IEJvb2tpZVNvY2tldEFkZHJlc3Mo\nIjEyNy4wLjAuMiIsIDMxODEpOwogICAgICAgIEJvb2tpZVNvY2tldEFkZHJl\nc3MgYWRkcjMgPSBuZXcgQm9va2llU29ja2V0QWRkcmVzcygiMTI3LjAuMC4z\nIiwgMzE4MSk7CiAgICAgICAgQm9va2llU29ja2V0QWRkcmVzcyBhZGRyNCA9\nIG5ldyBCb29raWVTb2NrZXRBZGRyZXNzKCIxMjcuMC4wLjQiLCAzMTgxKTsK\nICAgICAgICBCb29raWVTb2NrZXRBZGRyZXNzIGFkZHI1ID0gbmV3IEJvb2tp\nZVNvY2tldEFkZHJlc3MoIjEyNy4wLjAuNSIsIDMxODEpOwogICAgICAgIEJv\nb2tpZVNvY2tldEFkZHJlc3MgYWRkcjYgPSBuZXcgQm9va2llU29ja2V0QWRk\ncmVzcygiMTI3LjAuMC42IiwgMzE4MSk7CiAgICAgICAgQm9va2llU29ja2V0\nQWRkcmVzcyBhZGRyNyA9IG5ldyBCb29raWVTb2NrZXRBZGRyZXNzKCIxMjcu\nMC4wLjciLCAzMTgxKTsKICAgICAgICBCb29raWVTb2NrZXRBZGRyZXNzIGFk\nZHI4ID0gbmV3IEJvb2tpZVNvY2tldEFkZHJlc3MoIjEyNy4wLjAuOCIsIDMx\nODEpOwogICAgICAgIC8vIHVwZGF0ZSBkbnMgbWFwcGluZwogICAgICAgIFN0\nYXRpY0ROU1Jlc29sdmVyLmFkZE5vZGVUb1JhY2soYWRkcjEuZ2V0U29ja2V0\nQWRkcmVzcygpLmdldEFkZHJlc3MoKS5nZXRIb3N0QWRkcmVzcygpLAogICAg\nICAgICAgICAgICAgTmV0d29ya1RvcG9sb2d5LkRFRkFVTFRfUkFDSyk7CiAg\nICAgICAgU3RhdGljRE5TUmVzb2x2ZXIuYWRkTm9kZVRvUmFjayhhZGRyMi5n\nZXRTb2NrZXRBZGRyZXNzKCkuZ2V0QWRkcmVzcygpLmdldEhvc3RBZGRyZXNz\nKCksICIvcjIiKTsKICAgICAgICBTdGF0aWNETlNSZXNvbHZlci5hZGROb2Rl\nVG9SYWNrKGFkZHIzLmdldFNvY2tldEFkZHJlc3MoKS5nZXRBZGRyZXNzKCku\nZ2V0SG9zdEFkZHJlc3MoKSwgIi9yMyIpOwogICAgICAgIFN0YXRpY0ROU1Jl\nc29sdmVyLmFkZE5vZGVUb1JhY2soYWRkcjQuZ2V0U29ja2V0QWRkcmVzcygp\nLmdldEFkZHJlc3MoKS5nZXRIb3N0QWRkcmVzcygpLCAiL3I0Iik7CiAgICAg\nICAgU3RhdGljRE5TUmVzb2x2ZXIuYWRkTm9kZVRvUmFjayhhZGRyNS5nZXRT\nb2NrZXRBZGRyZXNzKCkuZ2V0QWRkcmVzcygpLmdldEhvc3RBZGRyZXNzKCks\nCiAgICAgICAgICAgICAgICBOZXR3b3JrVG9wb2xvZ3kuREVGQVVMVF9SQUNL\nKTsKICAgICAgICBTdGF0aWNETlNSZXNvbHZlci5hZGROb2RlVG9SYWNrKGFk\nZHI2LmdldFNvY2tldEFkZHJlc3MoKS5nZXRBZGRyZXNzKCkuZ2V0SG9zdEFk\nZHJlc3MoKSwgIi9yMiIpOwogICAgICAgIFN0YXRpY0ROU1Jlc29sdmVyLmFk\nZE5vZGVUb1JhY2soYWRkcjcuZ2V0U29ja2V0QWRkcmVzcygpLmdldEFkZHJl\nc3MoKS5nZXRIb3N0QWRkcmVzcygpLCAiL3IzIik7CiAgICAgICAgU3RhdGlj\nRE5TUmVzb2x2ZXIuYWRkTm9kZVRvUmFjayhhZGRyOC5nZXRTb2NrZXRBZGRy\nZXNzKCkuZ2V0QWRkcmVzcygpLmdldEhvc3RBZGRyZXNzKCksICIvcjQiKTsK\nICAgICAgICAvLyBVcGRhdGUgY2x1c3RlcgogICAgICAgIFNldDxCb29raWVT\nb2NrZXRBZGRyZXNzPiBhZGRycyA9IG5ldyBIYXNoU2V0PEJvb2tpZVNvY2tl\ndEFkZHJlc3M+KCk7CiAgICAgICAgYWRkcnMuYWRkKGFkZHIxKTsKICAgICAg\nICBhZGRycy5hZGQoYWRkcjIpOwogICAgICAgIGFkZHJzLmFkZChhZGRyMyk7\nCiAgICAgICAgYWRkcnMuYWRkKGFkZHI0KTsKICAgICAgICBhZGRycy5hZGQo\nYWRkcjUpOwogICAgICAgIGFkZHJzLmFkZChhZGRyNik7CiAgICAgICAgYWRk\ncnMuYWRkKGFkZHI3KTsKICAgICAgICBhZGRycy5hZGQoYWRkcjgpOwogICAg\nICAgIHJlcHAub25DbHVzdGVyQ2hhbmdlZChhZGRycywgbmV3IEhhc2hTZXQ8\nQm9va2llU29ja2V0QWRkcmVzcz4oKSk7CiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgQXJyYXlMaXN0PEJvb2tpZVNvY2tldEFkZHJlc3M+IGVuc2VtYmxl\nMSA9IHJlcHAubmV3RW5zZW1ibGUoMywgMiwgbmV3IEhhc2hTZXQ8Qm9va2ll\nU29ja2V0QWRkcmVzcz4oKSk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscygz\nLCBnZXROdW1Db3ZlcmVkV3JpdGVRdW9ydW1zKGVuc2VtYmxlMSwgMikpOwog\nICAgICAgICAgICBBcnJheUxpc3Q8Qm9va2llU29ja2V0QWRkcmVzcz4gZW5z\nZW1ibGUyID0gcmVwcC5uZXdFbnNlbWJsZSg0LCAyLCBuZXcgSGFzaFNldDxC\nb29raWVTb2NrZXRBZGRyZXNzPigpKTsKICAgICAgICAgICAgYXNzZXJ0RXF1\nYWxzKDQsIGdldE51bUNvdmVyZWRXcml0ZVF1b3J1bXMoZW5zZW1ibGUyLCAy\nKSk7CiAgICAgICAgfSBjYXRjaCAoQktOb3RFbm91Z2hCb29raWVzRXhjZXB0\naW9uIGJuZWJlKSB7CiAgICAgICAgICAgIGZhaWwoIlNob3VsZCBub3QgZ2V0\nIG5vdCBlbm91Z2ggYm9va2llcyBleGNlcHRpb24gZXZlbiB0aGVyZSBpcyBv\nbmx5IG9uZSByYWNrLiIpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAg\nICAqIFRlc3QgZm9yIEJPT0tLRUVQRVItNjMzCiAgICAgKi8KICAgIEBUZXN0\nKHRpbWVvdXQgPSA2MDAwMCkKICAgIHB1YmxpYyB2b2lkIHRlc3RSZW1vdmVC\nb29raWVGcm9tQ2x1c3RlcigpIHsKICAgICAgICBCb29raWVTb2NrZXRBZGRy\nZXNzIGFkZHIxID0gbmV3IEJvb2tpZVNvY2tldEFkZHJlc3MoIjEyNy4wLjAu\nMSIsIDMxODEpOwogICAgICAgIEJvb2tpZVNvY2tldEFkZHJlc3MgYWRkcjIg\nPSBuZXcgQm9va2llU29ja2V0QWRkcmVzcygiMTI3LjAuMC4yIiwgMzE4MSk7\nCiAgICAgICAgQm9va2llU29ja2V0QWRkcmVzcyBhZGRyMyA9IG5ldyBCb29r\naWVTb2NrZXRBZGRyZXNzKCIxMjcuMC4wLjMiLCAzMTgxKTsKICAgICAgICBC\nb29raWVTb2NrZXRBZGRyZXNzIGFkZHI0ID0gbmV3IEJvb2tpZVNvY2tldEFk\nZHJlc3MoIjEyNy4wLjAuNCIsIDMxODEpOwogICAgICAgIC8vIHVwZGF0ZSBk\nbnMgbWFwcGluZwogICAgICAgIFN0YXRpY0ROU1Jlc29sdmVyLmFkZE5vZGVU\nb1JhY2soYWRkcjEuZ2V0U29ja2V0QWRkcmVzcygpLmdldEFkZHJlc3MoKS5n\nZXRIb3N0QWRkcmVzcygpLAogICAgICAgICAgICAgICAgTmV0d29ya1RvcG9s\nb2d5LkRFRkFVTFRfUkFDSyk7CiAgICAgICAgU3RhdGljRE5TUmVzb2x2ZXIu\nYWRkTm9kZVRvUmFjayhhZGRyMi5nZXRTb2NrZXRBZGRyZXNzKCkuZ2V0QWRk\ncmVzcygpLmdldEhvc3RBZGRyZXNzKCksICIvcjIiKTsKICAgICAgICBTdGF0\naWNETlNSZXNvbHZlci5hZGROb2RlVG9SYWNrKGFkZHIzLmdldFNvY2tldEFk\nZHJlc3MoKS5nZXRBZGRyZXNzKCkuZ2V0SG9zdEFkZHJlc3MoKSwgIi9yMiIp\nOwogICAgICAgIFN0YXRpY0ROU1Jlc29sdmVyLmFkZE5vZGVUb1JhY2soYWRk\ncjQuZ2V0U29ja2V0QWRkcmVzcygpLmdldEFkZHJlc3MoKS5nZXRIb3N0QWRk\ncmVzcygpLCAiL3IzIik7CiAgICAgICAgLy8gVXBkYXRlIGNsdXN0ZXIKICAg\nICAgICBTZXQ8Qm9va2llU29ja2V0QWRkcmVzcz4gYWRkcnMgPSBuZXcgSGFz\naFNldDxCb29raWVTb2NrZXRBZGRyZXNzPigpOwogICAgICAgIGFkZHJzLmFk\nZChhZGRyMSk7CiAgICAgICAgYWRkcnMuYWRkKGFkZHIyKTsKICAgICAgICBh\nZGRycy5hZGQoYWRkcjMpOwogICAgICAgIGFkZHJzLmFkZChhZGRyNCk7CiAg\nICAgICAgcmVwcC5vbkNsdXN0ZXJDaGFuZ2VkKGFkZHJzLCBuZXcgSGFzaFNl\ndDxCb29raWVTb2NrZXRBZGRyZXNzPigpKTsKICAgICAgICBhZGRycy5yZW1v\ndmUoYWRkcjEpOwogICAgICAgIHJlcHAub25DbHVzdGVyQ2hhbmdlZChhZGRy\ncywgbmV3IEhhc2hTZXQ8Qm9va2llU29ja2V0QWRkcmVzcz4oKSk7CiAgICB9\nCgogICAgcHJpdmF0ZSBpbnQgZ2V0TnVtQ292ZXJlZFdyaXRlUXVvcnVtcyhB\ncnJheUxpc3Q8Qm9va2llU29ja2V0QWRkcmVzcz4gZW5zZW1ibGUsIGludCB3\ncml0ZVF1b3J1bVNpemUpCiAgICAgICAgICAgIHRocm93cyBFeGNlcHRpb24g\newogICAgICAgIGludCBlbnNlbWJsZVNpemUgPSBlbnNlbWJsZS5zaXplKCk7\nCiAgICAgICAgaW50IG51bUNvdmVyZWRXcml0ZVF1b3J1bXMgPSAwOwogICAg\nICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZW5zZW1ibGVTaXplOyBpKyspIHsK\nICAgICAgICAgICAgU2V0PFN0cmluZz4gcmFja3MgPSBuZXcgSGFzaFNldDxT\ndHJpbmc+KCk7CiAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgd3Jp\ndGVRdW9ydW1TaXplOyBqKyspIHsKICAgICAgICAgICAgICAgIGludCBib29r\naWVJZHggPSAoaSArIGopICUgZW5zZW1ibGVTaXplOwogICAgICAgICAgICAg\nICAgQm9va2llU29ja2V0QWRkcmVzcyBhZGRyID0gZW5zZW1ibGUuZ2V0KGJv\nb2tpZUlkeCk7CiAgICAgICAgICAgICAgICByYWNrcy5hZGQoU3RhdGljRE5T\nUmVzb2x2ZXIuZ2V0UmFjayhhZGRyLmdldFNvY2tldEFkZHJlc3MoKS5nZXRB\nZGRyZXNzKCkuZ2V0SG9zdEFkZHJlc3MoKSkpOwogICAgICAgICAgICB9CiAg\nICAgICAgICAgIG51bUNvdmVyZWRXcml0ZVF1b3J1bXMgKz0gKHJhY2tzLnNp\nemUoKSA+IDEgPyAxIDogMCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBu\ndW1Db3ZlcmVkV3JpdGVRdW9ydW1zOwogICAgfQp9Cg==\n","encoding":"base64"}

