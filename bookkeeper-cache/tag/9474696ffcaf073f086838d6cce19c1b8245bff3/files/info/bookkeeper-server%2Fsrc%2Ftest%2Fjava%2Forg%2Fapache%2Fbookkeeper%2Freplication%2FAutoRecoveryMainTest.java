{"sha":"5a50568d2af234d4acbd877ac9419242cf02cb44","node_id":"MDQ6QmxvYjE1NzU5NTY6NWE1MDU2OGQyYWYyMzRkNGFjYmQ4NzdhYzk0MTkyNDJjZjAyY2I0NA==","size":3972,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/5a50568d2af234d4acbd877ac9419242cf02cb44","content":"LyoqCiAqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91\nbmRhdGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRv\nciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAq\nIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGlu\nZm9ybWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRo\nZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5z\nZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21w\nbGlhbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBh\nIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICBodHRwOi8vd3d3LmFw\nYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJl\ncXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0\naW5nLAogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5z\nZSBpcyBkaXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRI\nT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwg\nZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBm\nb3IgdGhlCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNz\naW9ucyBhbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAq\nCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci5yZXBsaWNhdGlv\nbjsKCmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIudGVzdC5Cb29rS2Vl\ncGVyQ2x1c3RlclRlc3RDYXNlOwoKaW1wb3J0IG9yZy5qdW5pdC5UZXN0OwoK\naW1wb3J0IHN0YXRpYyBvcmcuanVuaXQuQXNzZXJ0Lio7CgovKgogKiBUZXN0\nIHRoZSBBdWRpdG9yUGVlcgogKi8KcHVibGljIGNsYXNzIEF1dG9SZWNvdmVy\neU1haW5UZXN0IGV4dGVuZHMgQm9va0tlZXBlckNsdXN0ZXJUZXN0Q2FzZSB7\nCgogICAgcHVibGljIEF1dG9SZWNvdmVyeU1haW5UZXN0KCkgewogICAgICAg\nIHN1cGVyKDMpOwogICAgfQoKICAgIC8qCiAgICAgKiB0ZXN0IHRoZSBzdGFy\ndHVwIG9mIHRoZSBhdWRpdG9yRWxlY3RvciBhbmQgUlcuCiAgICAgKi8KICAg\nIEBUZXN0KHRpbWVvdXQ9NjAwMDApCiAgICBwdWJsaWMgdm9pZCB0ZXN0U3Rh\ncnR1cCgpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIEF1dG9SZWNvdmVy\neU1haW4gbWFpbiA9IG5ldyBBdXRvUmVjb3ZlcnlNYWluKGJzQ29uZnMuZ2V0\nKDApKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBtYWluLnN0YXJ0KCk7\nCiAgICAgICAgICAgIFRocmVhZC5zbGVlcCg1MDApOwogICAgICAgICAgICBh\nc3NlcnRUcnVlKCJBdWRpdG9yRWxlY3RvciBzaG91bGQgYmUgcnVubmluZyIs\nCiAgICAgICAgICAgICAgICAgICAgbWFpbi5hdWRpdG9yRWxlY3Rvci5pc1J1\nbm5pbmcoKSk7CiAgICAgICAgICAgIGFzc2VydFRydWUoIlJlcGxpY2F0aW9u\nIHdvcmtlciBzaG91bGQgYmUgcnVubmluZyIsCiAgICAgICAgICAgICAgICAg\nICAgbWFpbi5yZXBsaWNhdGlvbldvcmtlci5pc1J1bm5pbmcoKSk7CiAgICAg\nICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgbWFpbi5zaHV0ZG93bigpOwog\nICAgICAgIH0KICAgIH0KCiAgICAvKgogICAgICogVGVzdCB0aGUgc2h1dGRv\nd24gb2YgYWxsIGRhZW1vbnMKICAgICAqLwogICAgQFRlc3QodGltZW91dD02\nMDAwMCkKICAgIHB1YmxpYyB2b2lkIHRlc3RTaHV0ZG93bigpIHRocm93cyBF\neGNlcHRpb24gewogICAgICAgIEF1dG9SZWNvdmVyeU1haW4gbWFpbiA9IG5l\ndyBBdXRvUmVjb3ZlcnlNYWluKGJzQ29uZnMuZ2V0KDApKTsKICAgICAgICBt\nYWluLnN0YXJ0KCk7CiAgICAgICAgVGhyZWFkLnNsZWVwKDUwMCk7CiAgICAg\nICAgYXNzZXJ0VHJ1ZSgiQXVkaXRvckVsZWN0b3Igc2hvdWxkIGJlIHJ1bm5p\nbmciLAogICAgICAgICAgICAgICAgbWFpbi5hdWRpdG9yRWxlY3Rvci5pc1J1\nbm5pbmcoKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZSgiUmVwbGljYXRpb24gd29y\na2VyIHNob3VsZCBiZSBydW5uaW5nIiwKICAgICAgICAgICAgICAgIG1haW4u\ncmVwbGljYXRpb25Xb3JrZXIuaXNSdW5uaW5nKCkpOwoKICAgICAgICBtYWlu\nLnNodXRkb3duKCk7CiAgICAgICAgYXNzZXJ0RmFsc2UoIkF1ZGl0b3JFbGVj\ndG9yIHNob3VsZCBub3QgYmUgcnVubmluZyIsCiAgICAgICAgICAgICAgICBt\nYWluLmF1ZGl0b3JFbGVjdG9yLmlzUnVubmluZygpKTsKICAgICAgICBhc3Nl\ncnRGYWxzZSgiUmVwbGljYXRpb24gd29ya2VyIHNob3VsZCBub3QgYmUgcnVu\nbmluZyIsCiAgICAgICAgICAgICAgICBtYWluLnJlcGxpY2F0aW9uV29ya2Vy\nLmlzUnVubmluZygpKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRlc3QgdGhh\ndCwgaWYgYW4gYXV0b3JlY292ZXJ5IGxvb3NlcyBpdHMgWksgY29ubmVjdGlv\nbi9zZXNzaW9uCiAgICAgKiBpdCB3aWxsIHNodXRkb3duLgogICAgICovCiAg\nICBAVGVzdCh0aW1lb3V0PTYwMDAwKQogICAgcHVibGljIHZvaWQgdGVzdEF1\ndG9SZWNvdmVyeVNlc3Npb25Mb3NzKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAg\nICAgICAgQXV0b1JlY292ZXJ5TWFpbiBtYWluMSA9IG5ldyBBdXRvUmVjb3Zl\ncnlNYWluKGJzQ29uZnMuZ2V0KDApKTsKICAgICAgICBBdXRvUmVjb3ZlcnlN\nYWluIG1haW4yID0gbmV3IEF1dG9SZWNvdmVyeU1haW4oYnNDb25mcy5nZXQo\nMSkpOwogICAgICAgIG1haW4xLnN0YXJ0KCk7CiAgICAgICAgbWFpbjIuc3Rh\ncnQoKTsKICAgICAgICBUaHJlYWQuc2xlZXAoNTAwKTsKICAgICAgICBhc3Nl\ncnRUcnVlKCJBdWRpdG9yRWxlY3RvcnMgc2hvdWxkIGJlIHJ1bm5pbmciLAog\nICAgICAgICAgICAgICAgbWFpbjEuYXVkaXRvckVsZWN0b3IuaXNSdW5uaW5n\nKCkgJiYgbWFpbjIuYXVkaXRvckVsZWN0b3IuaXNSdW5uaW5nKCkpOwogICAg\nICAgIGFzc2VydFRydWUoIlJlcGxpY2F0aW9uIHdvcmtlcnMgc2hvdWxkIGJl\nIHJ1bm5pbmciLAogICAgICAgICAgICAgICAgbWFpbjEucmVwbGljYXRpb25X\nb3JrZXIuaXNSdW5uaW5nKCkgJiYgbWFpbjIucmVwbGljYXRpb25Xb3JrZXIu\naXNSdW5uaW5nKCkpOwoKICAgICAgICB6a1V0aWwuZXhwaXJlU2Vzc2lvbiht\nYWluMS56ayk7CiAgICAgICAgemtVdGlsLmV4cGlyZVNlc3Npb24obWFpbjIu\nemspOwoKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IDEwOyBpKyspIHsg\nLy8gZ2l2ZSBpdCAxMCBzZWNvbmRzIHRvIHNodXRkb3duCiAgICAgICAgICAg\nIGlmICghbWFpbjEuYXVkaXRvckVsZWN0b3IuaXNSdW5uaW5nKCkKICAgICAg\nICAgICAgICAgICYmICFtYWluMi5hdWRpdG9yRWxlY3Rvci5pc1J1bm5pbmco\nKQogICAgICAgICAgICAgICAgJiYgIW1haW4xLnJlcGxpY2F0aW9uV29ya2Vy\nLmlzUnVubmluZygpCiAgICAgICAgICAgICAgICAmJiAhbWFpbjIucmVwbGlj\nYXRpb25Xb3JrZXIuaXNSdW5uaW5nKCkpIHsKICAgICAgICAgICAgICAgIGJy\nZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIFRocmVhZC5zbGVlcCgx\nMDAwKTsKICAgICAgICB9CiAgICAgICAgYXNzZXJ0RmFsc2UoIkVsZWN0b3Ix\nIHNob3VsZCBoYXZlIHNodXRkb3duIiwgbWFpbjEuYXVkaXRvckVsZWN0b3Iu\naXNSdW5uaW5nKCkpOwogICAgICAgIGFzc2VydEZhbHNlKCJFbGVjdG9yMiBz\naG91bGQgaGF2ZSBzaHV0ZG93biIsIG1haW4yLmF1ZGl0b3JFbGVjdG9yLmlz\nUnVubmluZygpKTsKICAgICAgICBhc3NlcnRGYWxzZSgiUlcxIHNob3VsZCBo\nYXZlIHNodXRkb3duIiwgbWFpbjEucmVwbGljYXRpb25Xb3JrZXIuaXNSdW5u\naW5nKCkpOwogICAgICAgIGFzc2VydEZhbHNlKCJSVzIgc2hvdWxkIGhhdmUg\nc2h1dGRvd24iLCBtYWluMi5yZXBsaWNhdGlvbldvcmtlci5pc1J1bm5pbmco\nKSk7CiAgICB9Cn0K\n","encoding":"base64"}

