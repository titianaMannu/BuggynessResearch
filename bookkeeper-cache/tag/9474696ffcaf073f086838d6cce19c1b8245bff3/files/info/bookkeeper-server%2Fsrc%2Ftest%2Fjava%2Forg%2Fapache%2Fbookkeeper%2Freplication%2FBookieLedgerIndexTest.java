{"sha":"2872397118ad0d9941d625bbc98ff0c9e0816131","node_id":"MDQ6QmxvYjE1NzU5NTY6Mjg3MjM5NzExOGFkMGQ5OTQxZDYyNWJiYzk4ZmYwYzllMDgxNjEzMQ==","size":8801,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/2872397118ad0d9941d625bbc98ff0c9e0816131","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIucmVwbGljYXRpb247CgppbXBv\ncnQgamF2YS5pby5GaWxlOwppbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsK\naW1wb3J0IGphdmEubmlvLkJ5dGVCdWZmZXI7CmltcG9ydCBqYXZhLnV0aWwu\nQXJyYXlMaXN0OwppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247CmltcG9y\ndCBqYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGphdmEudXRpbC5NYXA7CmltcG9y\ndCBqYXZhLnV0aWwuUmFuZG9tOwppbXBvcnQgamF2YS51dGlsLlNldDsKCmlt\ncG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY2xpZW50LkJLRXhjZXB0aW9u\nOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNsaWVudC5MZWRnZXJI\nYW5kbGU7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY2xpZW50LkJv\nb2tLZWVwZXIuRGlnZXN0VHlwZTsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tl\nZXBlci5tZXRhLkxlZGdlck1hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLmJv\nb2trZWVwZXIubWV0YS5MZWRnZXJNYW5hZ2VyRmFjdG9yeTsKaW1wb3J0IG9y\nZy5hcGFjaGUuYm9va2tlZXBlci5tZXRhLk1TTGVkZ2VyTWFuYWdlckZhY3Rv\ncnk7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIucmVwbGljYXRpb24u\nUmVwbGljYXRpb25FeGNlcHRpb24uQktBdWRpdEV4Y2VwdGlvbjsKaW1wb3J0\nIG9yZy5hcGFjaGUuYm9va2tlZXBlci50ZXN0Lk11bHRpTGVkZ2VyTWFuYWdl\nclRlc3RDYXNlOwppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmlvLkZpbGVV\ndGlsczsKaW1wb3J0IG9yZy5hcGFjaGUuem9va2VlcGVyLktlZXBlckV4Y2Vw\ndGlvbjsKaW1wb3J0IG9yZy5qdW5pdC5BZnRlcjsKaW1wb3J0IG9yZy5qdW5p\ndC5CZWZvcmU7CmltcG9ydCBvcmcuanVuaXQuVGVzdDsKaW1wb3J0IG9yZy5z\nbGY0ai5Mb2dnZXI7CmltcG9ydCBvcmcuc2xmNGouTG9nZ2VyRmFjdG9yeTsK\nCmltcG9ydCBzdGF0aWMgb3JnLmp1bml0LkFzc2VydC4qOwoKLyoqCiAqIFRl\nc3RzIHZlcmlmaWVzIGJvb2tpZSB2cyBsZWRnZXIgbWFwcGluZyBnZW5lcmF0\naW5nIGJ5IHRoZSBCb29raWVMZWRnZXJJbmRleGVyCiAqLwpwdWJsaWMgY2xh\nc3MgQm9va2llTGVkZ2VySW5kZXhUZXN0IGV4dGVuZHMgTXVsdGlMZWRnZXJN\nYW5hZ2VyVGVzdENhc2UgewoKICAgIC8vIERlcGVuZGluZyBvbiB0aGUgdGFz\ndGUsIHNlbGVjdCB0aGUgYW1vdW50IG9mIGxvZ2dpbmcKICAgIC8vIGJ5IGRl\nY29tbWVudGluZyBvbmUgb2YgdGhlIHR3byBsaW5lcyBiZWxvdwogICAgLy8g\ncHJpdmF0ZSBmaW5hbCBzdGF0aWMgTG9nZ2VyIExPRyA9IExvZ2dlci5nZXRS\nb290TG9nZ2VyKCk7CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2dnZXIg\nTE9HID0gTG9nZ2VyRmFjdG9yeQogICAgICAgICAgICAuZ2V0TG9nZ2VyKEJv\nb2tpZUxlZGdlckluZGV4VGVzdC5jbGFzcyk7CgogICAgcHJpdmF0ZSBSYW5k\nb20gcm5nOyAvLyBSYW5kb20gTnVtYmVyIEdlbmVyYXRvcgogICAgcHJpdmF0\nZSBBcnJheUxpc3Q8Ynl0ZVtdPiBlbnRyaWVzOyAvLyBnZW5lcmF0ZWQgZW50\ncmllcwogICAgcHJpdmF0ZSBmaW5hbCBEaWdlc3RUeXBlIGRpZ2VzdFR5cGUg\nPSBEaWdlc3RUeXBlLkNSQzMyOwogICAgcHJpdmF0ZSBpbnQgbnVtYmVyT2ZM\nZWRnZXJzID0gMzsKICAgIHByaXZhdGUgTGlzdDxMb25nPiBsZWRnZXJMaXN0\nOwogICAgcHJpdmF0ZSBMZWRnZXJNYW5hZ2VyRmFjdG9yeSBuZXdMZWRnZXJN\nYW5hZ2VyRmFjdG9yeTsKICAgIHByaXZhdGUgTGVkZ2VyTWFuYWdlciBsZWRn\nZXJNYW5hZ2VyOwoKICAgIHB1YmxpYyBCb29raWVMZWRnZXJJbmRleFRlc3Qo\nU3RyaW5nIGxlZGdlck1hbmFnZXJGYWN0b3J5KQogICAgICAgICAgICB0aHJv\nd3MgSU9FeGNlcHRpb24sIEtlZXBlckV4Y2VwdGlvbiwgSW50ZXJydXB0ZWRF\neGNlcHRpb24gewogICAgICAgIHN1cGVyKDMpOwogICAgICAgIExPRy5pbmZv\nKCJSdW5uaW5nIHRlc3QgY2FzZSB1c2luZyBsZWRnZXIgbWFuYWdlciA6ICIK\nICAgICAgICAgICAgICAgICsgbGVkZ2VyTWFuYWdlckZhY3RvcnkpOwogICAg\nICAgIC8vIHNldCBsZWRnZXIgbWFuYWdlciBuYW1lCiAgICAgICAgYmFzZUNv\nbmYuc2V0TGVkZ2VyTWFuYWdlckZhY3RvcnlDbGFzc05hbWUobGVkZ2VyTWFu\nYWdlckZhY3RvcnkpOwogICAgICAgIGJhc2VDbGllbnRDb25mLnNldExlZGdl\nck1hbmFnZXJGYWN0b3J5Q2xhc3NOYW1lKGxlZGdlck1hbmFnZXJGYWN0b3J5\nKTsKICAgIH0KCiAgICBAQmVmb3JlCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgp\nIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIHN1cGVyLnNldFVwKCk7CiAg\nICAgICAgcm5nID0gbmV3IFJhbmRvbShTeXN0ZW0uY3VycmVudFRpbWVNaWxs\naXMoKSk7IC8vIEluaXRpYWxpemUgdGhlIFJhbmRvbQogICAgICAgIC8vIE51\nbWJlciBHZW5lcmF0b3IKICAgICAgICBlbnRyaWVzID0gbmV3IEFycmF5TGlz\ndDxieXRlW10+KCk7IC8vIGluaXRpYWxpemUgdGhlIGVudHJpZXMgbGlzdAog\nICAgICAgIGxlZGdlckxpc3QgPSBuZXcgQXJyYXlMaXN0PExvbmc+KDMpOwog\nICAgICAgIC8vIGluaXRpYWxpemUgbGVkZ2VyIG1hbmFnZXIKICAgICAgICBu\nZXdMZWRnZXJNYW5hZ2VyRmFjdG9yeSA9IExlZGdlck1hbmFnZXJGYWN0b3J5\nLm5ld0xlZGdlck1hbmFnZXJGYWN0b3J5KAogICAgICAgICAgICAgICAgYmFz\nZUNvbmYsIHprYyk7CiAgICAgICAgbGVkZ2VyTWFuYWdlciA9IG5ld0xlZGdl\nck1hbmFnZXJGYWN0b3J5Lm5ld0xlZGdlck1hbmFnZXIoKTsKICAgIH0KCiAg\nICBAQWZ0ZXIKICAgIHB1YmxpYyB2b2lkIHRlYXJEb3duKCkgdGhyb3dzIEV4\nY2VwdGlvbiB7CiAgICAgICAgc3VwZXIudGVhckRvd24oKTsKICAgICAgICBp\nZiAobnVsbCAhPSBuZXdMZWRnZXJNYW5hZ2VyRmFjdG9yeSkgewogICAgICAg\nICAgICBuZXdMZWRnZXJNYW5hZ2VyRmFjdG9yeS51bmluaXRpYWxpemUoKTsK\nICAgICAgICAgICAgbmV3TGVkZ2VyTWFuYWdlckZhY3RvcnkgPSBudWxsOwog\nICAgICAgIH0KICAgICAgICBpZiAobnVsbCAhPSBsZWRnZXJNYW5hZ2VyKSB7\nCiAgICAgICAgICAgIGxlZGdlck1hbmFnZXIuY2xvc2UoKTsKICAgICAgICAg\nICAgbGVkZ2VyTWFuYWdlciA9IG51bGw7CiAgICAgICAgfQogICAgfQoKICAg\nIC8qKgogICAgICogVmVyaWZ5IHRoZSBib29raWUtbGVkZ2VyIG1hcHBpbmcg\nd2l0aCBtaW5pbXVtIG51bWJlciBvZiBib29raWVzIGFuZCBmZXcKICAgICAq\nIGxlZGdlcnMKICAgICAqLwogICAgQFRlc3QodGltZW91dD02MDAwMCkKICAg\nIHB1YmxpYyB2b2lkIHRlc3RTaW1wbGVCb29raWVMZWRnZXJNYXBwaW5nKCkg\ndGhyb3dzIEV4Y2VwdGlvbiB7CgogICAgICAgIGZvciAoaW50IGkgPSAwOyBp\nIDwgbnVtYmVyT2ZMZWRnZXJzOyBpKyspIHsKICAgICAgICAgICAgY3JlYXRl\nQW5kQWRkRW50cmllc1RvTGVkZ2VyKCkuY2xvc2UoKTsKICAgICAgICB9Cgog\nICAgICAgIEJvb2tpZUxlZGdlckluZGV4ZXIgYm9va2llTGVkZ2VySW5kZXgg\nPSBuZXcgQm9va2llTGVkZ2VySW5kZXhlcigKICAgICAgICAgICAgICAgIGxl\nZGdlck1hbmFnZXIpOwoKICAgICAgICBNYXA8U3RyaW5nLCBTZXQ8TG9uZz4+\nIGJvb2tpZVRvTGVkZ2VySW5kZXggPSBib29raWVMZWRnZXJJbmRleAogICAg\nICAgICAgICAgICAgLmdldEJvb2tpZVRvTGVkZ2VySW5kZXgoKTsKCiAgICAg\nICAgYXNzZXJ0RXF1YWxzKCJNaXNzZWQgZmV3IGJvb2tpZXMgaW4gdGhlIGJv\nb2tpZS1sZWRnZXIgbWFwcGluZyEiLCAzLAogICAgICAgICAgICAgICAgYm9v\na2llVG9MZWRnZXJJbmRleC5zaXplKCkpOwogICAgICAgIENvbGxlY3Rpb248\nU2V0PExvbmc+PiBiazJsZWRnZXJFbnRyeSA9IGJvb2tpZVRvTGVkZ2VySW5k\nZXgudmFsdWVzKCk7CiAgICAgICAgZm9yIChTZXQ8TG9uZz4gbGVkZ2VycyA6\nIGJrMmxlZGdlckVudHJ5KSB7CiAgICAgICAgICAgIGFzc2VydEVxdWFscygi\nTWlzc2VkIGZldyBsZWRnZXJzIGluIHRoZSBib29raWUtbGVkZ2VyIG1hcHBp\nbmchIiwgMywKICAgICAgICAgICAgICAgICAgICBsZWRnZXJzLnNpemUoKSk7\nCiAgICAgICAgICAgIGZvciAoTG9uZyBsZWRnZXJJZCA6IGxlZGdlcnMpIHsK\nICAgICAgICAgICAgICAgIGFzc2VydFRydWUoIlVua25vd24gbGVkZ2VyLWJv\nb2tpZSBtYXBwaW5nIiwgbGVkZ2VyTGlzdAogICAgICAgICAgICAgICAgICAg\nICAgICAuY29udGFpbnMobGVkZ2VySWQpKTsKICAgICAgICAgICAgfQogICAg\nICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFZlcmlmeSBsZWRnZXIgaW5k\nZXggd2l0aCBmYWlsZWQgYm9va2llcyBhbmQgdGhyb3dzIGV4Y2VwdGlvbgog\nICAgICovCiAgICBAVGVzdCh0aW1lb3V0PTYwMDAwKQogICAgcHVibGljIHZv\naWQgdGVzdFdpdGhvdXRab29rZWVwZXIoKSB0aHJvd3MgRXhjZXB0aW9uIHsK\nICAgICAgICAvLyBUaGlzIHRlc3QgY2FzZSBpcyBmb3IgbGVkZ2VyIG1ldGFk\nYXRhIHRoYXQgc3RvcmVkIGluIFpvb0tlZXBlci4gQXMKICAgICAgICAvLyBm\nYXIgYXMgTVNMZWRnZXJNYW5hZ2VyRmFjdG9yeSwgbGVkZ2VyIG1ldGFkYXRh\nIGFyZSBzdG9yZWQgaW4gb3RoZXIKICAgICAgICAvLyBzdG9yYWdlLiBTbyB0\naGlzIHRlc3QgaXMgbm90IHN1aXRhYmxlIGZvciBNU0xlZGdlck1hbmFnZXJG\nYWN0b3J5LgogICAgICAgIGlmIChuZXdMZWRnZXJNYW5hZ2VyRmFjdG9yeSBp\nbnN0YW5jZW9mIE1TTGVkZ2VyTWFuYWdlckZhY3RvcnkpIHsKICAgICAgICAg\nICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgZm9yIChpbnQgaSA9IDA7\nIGkgPCBudW1iZXJPZkxlZGdlcnM7IGkrKykgewogICAgICAgICAgICBjcmVh\ndGVBbmRBZGRFbnRyaWVzVG9MZWRnZXIoKS5jbG9zZSgpOwogICAgICAgIH0K\nCiAgICAgICAgQm9va2llTGVkZ2VySW5kZXhlciBib29raWVMZWRnZXJJbmRl\neCA9IG5ldyBCb29raWVMZWRnZXJJbmRleGVyKAogICAgICAgICAgICAgICAg\nbGVkZ2VyTWFuYWdlcik7CiAgICAgICAgc3RvcFpLQ2x1c3RlcigpOwogICAg\nICAgIHRyeSB7CiAgICAgICAgICAgIGJvb2tpZUxlZGdlckluZGV4LmdldEJv\nb2tpZVRvTGVkZ2VySW5kZXgoKTsKICAgICAgICAgICAgZmFpbCgiTXVzdCB0\naHJvdyBleGNlcHRpb24gYXMgem9va2VlcGVyIGFyZSBub3QgcnVubmluZyEi\nKTsKICAgICAgICB9IGNhdGNoIChCS0F1ZGl0RXhjZXB0aW9uIGJrQXVkaXRF\neGNlcHRpb24pIHsKICAgICAgICAgICAgLy8gZXhwZWN0ZWQgYmVoYXZpb3Vy\nCiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogVmVyaWZ5IGluZGV4\naW5nIHdpdGggbXVsdGlwbGUgZW5zZW1ibGUgcmVmb3JtYXRpb24KICAgICAq\nLwogICAgQFRlc3QodGltZW91dD02MDAwMCkKICAgIHB1YmxpYyB2b2lkIHRl\nc3RFbnNlbWJsZVJlZm9ybWF0aW9uKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgTGVkZ2VySGFuZGxlIGxoMSA9IGNy\nZWF0ZUFuZEFkZEVudHJpZXNUb0xlZGdlcigpOwogICAgICAgICAgICBMZWRn\nZXJIYW5kbGUgbGgyID0gY3JlYXRlQW5kQWRkRW50cmllc1RvTGVkZ2VyKCk7\nCgogICAgICAgICAgICBzdGFydE5ld0Jvb2tpZSgpOwogICAgICAgICAgICBz\naHV0ZG93bkJvb2tpZShicy5zaXplKCkgLSAyKTsKCiAgICAgICAgICAgIC8v\nIGFkZCBmZXcgbW9yZSBlbnRyaWVzIGFmdGVyIGVuc2VtYmxlIHJlZm9ybWF0\naW9uCiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgMTA7IGkrKykg\newogICAgICAgICAgICAgICAgQnl0ZUJ1ZmZlciBlbnRyeSA9IEJ5dGVCdWZm\nZXIuYWxsb2NhdGUoNCk7CiAgICAgICAgICAgICAgICBlbnRyeS5wdXRJbnQo\ncm5nLm5leHRJbnQoSW50ZWdlci5NQVhfVkFMVUUpKTsKICAgICAgICAgICAg\nICAgIGVudHJ5LnBvc2l0aW9uKDApOwoKICAgICAgICAgICAgICAgIGVudHJp\nZXMuYWRkKGVudHJ5LmFycmF5KCkpOwogICAgICAgICAgICAgICAgbGgxLmFk\nZEVudHJ5KGVudHJ5LmFycmF5KCkpOwogICAgICAgICAgICAgICAgbGgyLmFk\nZEVudHJ5KGVudHJ5LmFycmF5KCkpOwogICAgICAgICAgICB9CgogICAgICAg\nICAgICBCb29raWVMZWRnZXJJbmRleGVyIGJvb2tpZUxlZGdlckluZGV4ID0g\nbmV3IEJvb2tpZUxlZGdlckluZGV4ZXIoCiAgICAgICAgICAgICAgICAgICAg\nbGVkZ2VyTWFuYWdlcik7CgogICAgICAgICAgICBNYXA8U3RyaW5nLCBTZXQ8\nTG9uZz4+IGJvb2tpZVRvTGVkZ2VySW5kZXggPSBib29raWVMZWRnZXJJbmRl\neAogICAgICAgICAgICAgICAgICAgIC5nZXRCb29raWVUb0xlZGdlckluZGV4\nKCk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscygiTWlzc2VkIGZldyBib29r\naWVzIGluIHRoZSBib29raWUtbGVkZ2VyIG1hcHBpbmchIiwgNCwKICAgICAg\nICAgICAgICAgICAgICBib29raWVUb0xlZGdlckluZGV4LnNpemUoKSk7CiAg\nICAgICAgICAgIENvbGxlY3Rpb248U2V0PExvbmc+PiBiazJsZWRnZXJFbnRy\neSA9IGJvb2tpZVRvTGVkZ2VySW5kZXgudmFsdWVzKCk7CiAgICAgICAgICAg\nIGZvciAoU2V0PExvbmc+IGxlZGdlcnMgOiBiazJsZWRnZXJFbnRyeSkgewog\nICAgICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKAogICAgICAgICAgICAgICAg\nICAgICAgICAiTWlzc2VkIGZldyBsZWRnZXJzIGluIHRoZSBib29raWUtbGVk\nZ2VyIG1hcHBpbmchIiwgMiwKICAgICAgICAgICAgICAgICAgICAgICAgbGVk\nZ2Vycy5zaXplKCkpOwogICAgICAgICAgICAgICAgZm9yIChMb25nIGxlZGdl\nck5vZGUgOiBsZWRnZXJzKSB7CiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0\nVHJ1ZSgiVW5rbm93biBsZWRnZXItYm9va2llIG1hcHBpbmciLCBsZWRnZXJM\naXN0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29udGFpbnMobGVk\nZ2VyTm9kZSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAg\nICAgICAgfSBjYXRjaCAoQktFeGNlcHRpb24gZSkgewogICAgICAgICAgICBM\nT0cuZXJyb3IoIlRlc3QgZmFpbGVkIiwgZSk7CiAgICAgICAgICAgIGZhaWwo\nIlRlc3QgZmFpbGVkIGR1ZSB0byBCb29rS2VlcGVyIGV4Y2VwdGlvbiIpOwog\nICAgICAgIH0gY2F0Y2ggKEludGVycnVwdGVkRXhjZXB0aW9uIGUpIHsKICAg\nICAgICAgICAgTE9HLmVycm9yKCJUZXN0IGZhaWxlZCIsIGUpOwogICAgICAg\nICAgICBmYWlsKCJUZXN0IGZhaWxlZCBkdWUgdG8gaW50ZXJydXB0aW9uIik7\nCiAgICAgICAgfQogICAgfQoKICAgIHByaXZhdGUgdm9pZCBzaHV0ZG93bkJv\nb2tpZShpbnQgYmtTaHV0ZG93bkluZGV4KSB0aHJvd3MgSU9FeGNlcHRpb24g\newogICAgICAgIGJzLnJlbW92ZShia1NodXRkb3duSW5kZXgpLnNodXRkb3du\nKCk7CiAgICAgICAgRmlsZSBmID0gdG1wRGlycy5yZW1vdmUoYmtTaHV0ZG93\nbkluZGV4KTsKICAgICAgICBGaWxlVXRpbHMuZGVsZXRlRGlyZWN0b3J5KGYp\nOwogICAgfQoKICAgIHByaXZhdGUgTGVkZ2VySGFuZGxlIGNyZWF0ZUFuZEFk\nZEVudHJpZXNUb0xlZGdlcigpIHRocm93cyBCS0V4Y2VwdGlvbiwKICAgICAg\nICAgICAgSW50ZXJydXB0ZWRFeGNlcHRpb24gewogICAgICAgIGludCBudW1F\nbnRyaWVzVG9Xcml0ZSA9IDIwOwogICAgICAgIC8vIENyZWF0ZSBhIGxlZGdl\ncgogICAgICAgIExlZGdlckhhbmRsZSBsaCA9IGJrYy5jcmVhdGVMZWRnZXIo\nZGlnZXN0VHlwZSwgImFkbWluIi5nZXRCeXRlcygpKTsKICAgICAgICBMT0cu\naW5mbygiTGVkZ2VyIElEOiAiICsgbGguZ2V0SWQoKSk7CiAgICAgICAgZm9y\nIChpbnQgaSA9IDA7IGkgPCBudW1FbnRyaWVzVG9Xcml0ZTsgaSsrKSB7CiAg\nICAgICAgICAgIEJ5dGVCdWZmZXIgZW50cnkgPSBCeXRlQnVmZmVyLmFsbG9j\nYXRlKDQpOwogICAgICAgICAgICBlbnRyeS5wdXRJbnQocm5nLm5leHRJbnQo\nSW50ZWdlci5NQVhfVkFMVUUpKTsKICAgICAgICAgICAgZW50cnkucG9zaXRp\nb24oMCk7CgogICAgICAgICAgICBlbnRyaWVzLmFkZChlbnRyeS5hcnJheSgp\nKTsKICAgICAgICAgICAgbGguYWRkRW50cnkoZW50cnkuYXJyYXkoKSk7CiAg\nICAgICAgfQogICAgICAgIGxlZGdlckxpc3QuYWRkKGxoLmdldElkKCkpOwog\nICAgICAgIHJldHVybiBsaDsKICAgIH0KfQo=\n","encoding":"base64"}

