{"sha":"e1ccf6895eba5f8c4ecffe3ab637cbd20bf902d2","node_id":"MDQ6QmxvYjE1NzU5NTY6ZTFjY2Y2ODk1ZWJhNWY4YzRlY2ZmZTNhYjYzN2NiZDIwYmY5MDJkMg==","size":3976,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/e1ccf6895eba5f8c4ecffe3ab637cbd20bf902d2","content":"LyoqCiAqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91\nbmRhdGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRv\nciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAq\nIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGlu\nZm9ybWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRo\nZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5z\nZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21w\nbGlhbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBh\nIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICBodHRwOi8vd3d3LmFw\nYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJl\ncXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0\naW5nLAogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5z\nZSBpcyBkaXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRI\nT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwg\nZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBm\nb3IgdGhlCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNz\naW9ucyBhbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAq\nCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci5yZXBsaWNhdGlv\nbjsKCmltcG9ydCBqYXZhLm5ldC5JbmV0QWRkcmVzczsKaW1wb3J0IGphdmEu\ndXRpbC5BcnJheUxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuRW51bWVyYXRpb247\nCmltcG9ydCBqYXZhLnV0aWwuTWFwLkVudHJ5OwppbXBvcnQgamF2YS51dGls\nLlNldDsKCmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY2xpZW50LkJv\nb2tLZWVwZXI7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY2xpZW50\nLkxlZGdlckVudHJ5OwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNs\naWVudC5MZWRnZXJIYW5kbGU7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVw\nZXIuY2xpZW50LkxlZGdlckhhbmRsZUFkYXB0ZXI7CmltcG9ydCBvcmcuYXBh\nY2hlLmJvb2trZWVwZXIubmV0LkJvb2tpZVNvY2tldEFkZHJlc3M7CmltcG9y\ndCBvcmcuYXBhY2hlLmJvb2trZWVwZXIudGVzdC5Cb29rS2VlcGVyQ2x1c3Rl\nclRlc3RDYXNlOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLnV0aWwu\nQm9va0tlZXBlckNvbnN0YW50czsKaW1wb3J0IG9yZy5qdW5pdC5UZXN0OwoK\naW1wb3J0IHN0YXRpYyBvcmcuanVuaXQuQXNzZXJ0Lio7CgpwdWJsaWMgY2xh\nc3MgVGVzdEF1dG9SZWNvdmVyeUFsb25nV2l0aEJvb2tpZVNlcnZlcnMgZXh0\nZW5kcwogICAgICAgIEJvb2tLZWVwZXJDbHVzdGVyVGVzdENhc2UgewoKICAg\nIHByaXZhdGUgU3RyaW5nIGJhc2VQYXRoID0gIiI7CgogICAgcHVibGljIFRl\nc3RBdXRvUmVjb3ZlcnlBbG9uZ1dpdGhCb29raWVTZXJ2ZXJzKCkgewogICAg\nICAgIHN1cGVyKDMpOwogICAgICAgIGJhc2VDb25mLnNldEF1dG9SZWNvdmVy\neURhZW1vbkVuYWJsZWQodHJ1ZSk7CiAgICAgICAgYmFzZVBhdGggPSBiYXNl\nQ2xpZW50Q29uZi5nZXRaa0xlZGdlcnNSb290UGF0aCgpICsgJy8nCiAgICAg\nICAgICAgICAgICArIEJvb2tLZWVwZXJDb25zdGFudHMuVU5ERVJfUkVQTElD\nQVRJT05fTk9ERQogICAgICAgICAgICAgICAgKyBCb29rS2VlcGVyQ29uc3Rh\nbnRzLkRFRkFVTFRfWktfTEVER0VSU19ST09UX1BBVEg7CiAgICB9CgogICAg\nLyoqIFRlc3RzIHRoYXQgdGhlIGF1dG8gcmVjb3Zlcnkgc2VydmljZSBhbG9u\nZyB3aXRoIEJvb2tpZSBzZXJ2ZXJzIGl0c2VsZiAqLwogICAgQFRlc3QodGlt\nZW91dCA9IDYwMDAwKQogICAgcHVibGljIHZvaWQgdGVzdEF1dG9SZWNvdmVy\neUFsb25nV2l0aEJvb2tpZVNlcnZlcnMoKSB0aHJvd3MgRXhjZXB0aW9uIHsK\nICAgICAgICBMZWRnZXJIYW5kbGUgbGggPSBia2MuY3JlYXRlTGVkZ2VyKDMs\nIDMsIEJvb2tLZWVwZXIuRGlnZXN0VHlwZS5DUkMzMiwKICAgICAgICAgICAg\nICAgICJ0ZXN0cGFzc3dkIi5nZXRCeXRlcygpKTsKICAgICAgICBieXRlW10g\ndGVzdERhdGEgPSAidGVzdEJ1aWx0QXV0b1JlY292ZXJ5Ii5nZXRCeXRlcygp\nOwoKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IDEwOyBpKyspIHsKICAg\nICAgICAgICAgbGguYWRkRW50cnkodGVzdERhdGEpOwogICAgICAgIH0KICAg\nICAgICBsaC5jbG9zZSgpOwogICAgICAgIEJvb2tpZVNvY2tldEFkZHJlc3Mg\ncmVwbGljYVRvS2lsbCA9IExlZGdlckhhbmRsZUFkYXB0ZXIKICAgICAgICAg\nICAgICAgIC5nZXRMZWRnZXJNZXRhZGF0YShsaCkuZ2V0RW5zZW1ibGVzKCku\nZ2V0KDBMKS5nZXQoMCk7CgogICAgICAgIGtpbGxCb29raWUocmVwbGljYVRv\nS2lsbCk7CgogICAgICAgIGludCBzdGFydE5ld0Jvb2tpZSA9IHN0YXJ0TmV3\nQm9va2llKCk7CiAgICAgICAgQm9va2llU29ja2V0QWRkcmVzcyBuZXdCa0Fk\nZHIgPSBuZXcgQm9va2llU29ja2V0QWRkcmVzcyhJbmV0QWRkcmVzcwogICAg\nICAgICAgICAgICAgLmdldExvY2FsSG9zdCgpLmdldEhvc3RBZGRyZXNzKCks\nIHN0YXJ0TmV3Qm9va2llKTsKCiAgICAgICAgd2hpbGUgKFJlcGxpY2F0aW9u\nVGVzdFV0aWwuaXNMZWRnZXJJblVuZGVyUmVwbGljYXRpb24oemtjLCBsaC5n\nZXRJZCgpLAogICAgICAgICAgICAgICAgYmFzZVBhdGgpKSB7CiAgICAgICAg\nICAgIFRocmVhZC5zbGVlcCgxMDApOwogICAgICAgIH0KCiAgICAgICAgLy8g\nS2lsbGluZyBhbGwgYm9va2llcyBleGNlcHQgbmV3bHkgcmVwbGljYXRlZCBi\nb29raWUKICAgICAgICBTZXQ8RW50cnk8TG9uZywgQXJyYXlMaXN0PEJvb2tp\nZVNvY2tldEFkZHJlc3M+Pj4gZW50cnlTZXQgPSBMZWRnZXJIYW5kbGVBZGFw\ndGVyCiAgICAgICAgICAgICAgICAuZ2V0TGVkZ2VyTWV0YWRhdGEobGgpLmdl\ndEVuc2VtYmxlcygpLmVudHJ5U2V0KCk7CiAgICAgICAgZm9yIChFbnRyeTxM\nb25nLCBBcnJheUxpc3Q8Qm9va2llU29ja2V0QWRkcmVzcz4+IGVudHJ5IDog\nZW50cnlTZXQpIHsKICAgICAgICAgICAgQXJyYXlMaXN0PEJvb2tpZVNvY2tl\ndEFkZHJlc3M+IGJvb2tpZXMgPSBlbnRyeS5nZXRWYWx1ZSgpOwogICAgICAg\nICAgICBmb3IgKEJvb2tpZVNvY2tldEFkZHJlc3MgYm9va2llIDogYm9va2ll\ncykgewogICAgICAgICAgICAgICAgaWYgKGJvb2tpZS5lcXVhbHMobmV3QmtB\nZGRyKSkgewogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAg\nICAgICAgICAgfQogICAgICAgICAgICAgICAga2lsbEJvb2tpZShib29raWUp\nOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBTaG91bGQg\nYmUgYWJsZSB0byByZWFkIHRoZSBlbnRyaWVzIGZyb20gMC05CiAgICAgICAg\nTGVkZ2VySGFuZGxlIGxocyA9IGJrYy5vcGVuTGVkZ2VyTm9SZWNvdmVyeShs\naC5nZXRJZCgpLAogICAgICAgICAgICAgICAgQm9va0tlZXBlci5EaWdlc3RU\neXBlLkNSQzMyLCAidGVzdHBhc3N3ZCIuZ2V0Qnl0ZXMoKSk7CiAgICAgICAg\nRW51bWVyYXRpb248TGVkZ2VyRW50cnk+IGVudHJpZXMgPSBsaHMucmVhZEVu\ndHJpZXMoMCwgOSk7CiAgICAgICAgYXNzZXJ0VHJ1ZSgiU2hvdWxkIGhhdmUg\ndGhlIGVsZW1lbnRzIiwgZW50cmllcy5oYXNNb3JlRWxlbWVudHMoKSk7CiAg\nICAgICAgd2hpbGUgKGVudHJpZXMuaGFzTW9yZUVsZW1lbnRzKCkpIHsKICAg\nICAgICAgICAgTGVkZ2VyRW50cnkgZW50cnkgPSBlbnRyaWVzLm5leHRFbGVt\nZW50KCk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscygidGVzdEJ1aWx0QXV0\nb1JlY292ZXJ5IiwgbmV3IFN0cmluZyhlbnRyeS5nZXRFbnRyeSgpKSk7CiAg\nICAgICAgfQogICAgfQp9Cg==\n","encoding":"base64"}

