{"sha":"778a804822c7752764899b554c5bd8a8865ab4c8","node_id":"MDQ6QmxvYjE1NzU5NTY6Nzc4YTgwNDgyMmM3NzUyNzY0ODk5YjU1NGM1YmQ4YTg4NjVhYjRjOA==","size":4320,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/778a804822c7752764899b554c5bd8a8865ab4c8","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIudGVzdDsKCi8qCiAqCiAq\nIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAo\nQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNl\nIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRpc3RyaWJ1\ndGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9u\nCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBs\naWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUg\nTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIpOyB5b3Ug\nbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlCiAq\nIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2Yg\ndGhlIExpY2Vuc2UgYXQKICoKICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcv\nbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5\nIGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAogKiBz\nb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0\ncmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJB\nTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVyIGV4\ncHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlCiAq\nIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQg\nbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqCiAqLwoKaW1w\nb3J0IGphdmEuaW8uSU9FeGNlcHRpb247CmltcG9ydCBqYXZhLnV0aWwuQXJy\nYXlzOwppbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuRXhlY3V0b3JzOwoK\naW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5jb25mLkNsaWVudENvbmZp\nZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIubmV0LkJv\nb2tpZVNvY2tldEFkZHJlc3M7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVw\nZXIucHJvdG8uQm9va2llQ2xpZW50OwppbXBvcnQgb3JnLmFwYWNoZS5ib29r\na2VlcGVyLnByb3RvLkJvb2tpZVByb3RvY29sOwppbXBvcnQgb3JnLmFwYWNo\nZS5ib29ra2VlcGVyLnByb3RvLkJvb2trZWVwZXJJbnRlcm5hbENhbGxiYWNr\ncy5Xcml0ZUNhbGxiYWNrOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVy\nLnV0aWwuT3JkZXJlZFNhZmVFeGVjdXRvcjsKaW1wb3J0IG9yZy5qYm9zcy5u\nZXR0eS5idWZmZXIuQ2hhbm5lbEJ1ZmZlcnM7CmltcG9ydCBvcmcuamJvc3Mu\nbmV0dHkuY2hhbm5lbC5zb2NrZXQuQ2xpZW50U29ja2V0Q2hhbm5lbEZhY3Rv\ncnk7CmltcG9ydCBvcmcuamJvc3MubmV0dHkuY2hhbm5lbC5zb2NrZXQubmlv\nLk5pb0NsaWVudFNvY2tldENoYW5uZWxGYWN0b3J5OwppbXBvcnQgb3JnLnNs\nZjRqLkxvZ2dlcjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJGYWN0b3J5OwoK\nLyoqCiAqIFRoaXMgY2xhc3MgdGVzdHMgQm9va2llQ2xpZW50LiBJdCBqdXN0\nIHNlbmRzIHRoZSBhIG5ldyBlbnRyeSB0byBpdHNlbGYuCiAqCiAqCiAqCiAq\nLwoKY2xhc3MgTG9vcGJhY2tDbGllbnQgaW1wbGVtZW50cyBXcml0ZUNhbGxi\nYWNrIHsKICAgIHByaXZhdGUgZmluYWwgc3RhdGljIExvZ2dlciBMT0cgPSBM\nb2dnZXJGYWN0b3J5LmdldExvZ2dlcihMb29wYmFja0NsaWVudC5jbGFzcyk7\nCiAgICBCb29raWVDbGllbnQgY2xpZW50OwogICAgc3RhdGljIGludCByZWN2\nVGltZW91dCA9IDIwMDA7CiAgICBsb25nIGJlZ2luID0gMDsKICAgIGludCBs\naW1pdDsKICAgIE9yZGVyZWRTYWZlRXhlY3V0b3IgZXhlY3V0b3I7CgogICAg\nc3RhdGljIGNsYXNzIENvdW50ZXIgewogICAgICAgIGludCBjOwogICAgICAg\nIGludCBsaW1pdDsKCiAgICAgICAgQ291bnRlcihpbnQgbGltaXQpIHsKICAg\nICAgICAgICAgdGhpcy5jID0gMDsKICAgICAgICAgICAgdGhpcy5saW1pdCA9\nIGxpbWl0OwogICAgICAgIH0KCiAgICAgICAgc3luY2hyb25pemVkIHZvaWQg\naW5jcmVtZW50KCkgewogICAgICAgICAgICBpZiAoKytjID09IGxpbWl0KQog\nICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoKTsKICAgICAgICB9CiAgICB9\nCgogICAgTG9vcGJhY2tDbGllbnQoQ2xpZW50U29ja2V0Q2hhbm5lbEZhY3Rv\ncnkgY2hhbm5lbEZhY3RvcnksIE9yZGVyZWRTYWZlRXhlY3V0b3IgZXhlY3V0\nb3IsIGxvbmcgYmVnaW4sIGludCBsaW1pdCkgdGhyb3dzIElPRXhjZXB0aW9u\nIHsKICAgICAgICB0aGlzLmNsaWVudCA9IG5ldyBCb29raWVDbGllbnQobmV3\nIENsaWVudENvbmZpZ3VyYXRpb24oKSwgY2hhbm5lbEZhY3RvcnksIGV4ZWN1\ndG9yKTsKICAgICAgICB0aGlzLmJlZ2luID0gYmVnaW47CiAgICB9CgogICAg\ndm9pZCB3cml0ZShsb25nIGxlZGdlcklkLCBsb25nIGVudHJ5LCBieXRlW10g\nZGF0YSwgQm9va2llU29ja2V0QWRkcmVzcyBhZGRyLCBXcml0ZUNhbGxiYWNr\nIGNiLCBPYmplY3QgY3R4KQogICAgICAgICAgICB0aHJvd3MgSU9FeGNlcHRp\nb24sIEludGVycnVwdGVkRXhjZXB0aW9uIHsKICAgICAgICBMT0cuaW5mbygi\nTGVkZ2VyIGlkOiAiICsgbGVkZ2VySWQgKyAiLCBFbnRyeTogIiArIGVudHJ5\nKTsKICAgICAgICBieXRlW10gcGFzc3dkID0gbmV3IGJ5dGVbMjBdOwogICAg\nICAgIEFycmF5cy5maWxsKHBhc3N3ZCwgKGJ5dGUpICdhJyk7CgogICAgICAg\nIGNsaWVudC5hZGRFbnRyeShhZGRyLCBsZWRnZXJJZCwgcGFzc3dkLCBlbnRy\neSwgQ2hhbm5lbEJ1ZmZlcnMud3JhcHBlZEJ1ZmZlcihkYXRhKSwgY2IsIGN0\neCwgQm9va2llUHJvdG9jb2wuRkxBR19OT05FKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCB3cml0ZUNvbXBsZXRlKGludCByYywgbG9uZyBsZWRnZXJJZCwg\nbG9uZyBlbnRyeUlkLCBCb29raWVTb2NrZXRBZGRyZXNzIGFkZHIsIE9iamVj\ndCBjdHgpIHsKICAgICAgICBDb3VudGVyIGNvdW50ZXIgPSAoQ291bnRlcikg\nY3R4OwogICAgICAgIGNvdW50ZXIuaW5jcmVtZW50KCk7CiAgICB9CgogICAg\ncHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nIGFyZ3NbXSkgewogICAg\nICAgIGJ5dGVbXSBkYXRhID0gbmV3IGJ5dGVbSW50ZWdlci5wYXJzZUludChh\ncmdzWzBdKV07CiAgICAgICAgSW50ZWdlciBsaW1pdCA9IEludGVnZXIucGFy\nc2VJbnQoYXJnc1sxXSk7CiAgICAgICAgQ291bnRlciBjID0gbmV3IENvdW50\nZXIobGltaXQpOwogICAgICAgIGxvbmcgbGVkZ2VySWQgPSBMb25nLnZhbHVl\nT2YoIjAiKS5sb25nVmFsdWUoKTsKICAgICAgICBsb25nIGJlZ2luID0gU3lz\ndGVtLmN1cnJlbnRUaW1lTWlsbGlzKCk7CgogICAgICAgIExvb3BiYWNrQ2xp\nZW50IGxiOwogICAgICAgIENsaWVudFNvY2tldENoYW5uZWxGYWN0b3J5IGNo\nYW5uZWxGYWN0b3J5ID0gbmV3IE5pb0NsaWVudFNvY2tldENoYW5uZWxGYWN0\nb3J5KEV4ZWN1dG9ycy5uZXdDYWNoZWRUaHJlYWRQb29sKCksIEV4ZWN1dG9y\ncwogICAgICAgICAgICAgICAgLm5ld0NhY2hlZFRocmVhZFBvb2woKSk7CiAg\nICAgICAgT3JkZXJlZFNhZmVFeGVjdXRvciBleGVjdXRvciA9IG5ldyBPcmRl\ncmVkU2FmZUV4ZWN1dG9yKDIsICJCb29raWVDbGllbnRTY2hlZHVsZXIiKTsK\nICAgICAgICB0cnkgewogICAgICAgICAgICBCb29raWVTb2NrZXRBZGRyZXNz\nIGFkZHIgPSBuZXcgQm9va2llU29ja2V0QWRkcmVzcygiMTI3LjAuMC4xIiwg\nSW50ZWdlci52YWx1ZU9mKGFyZ3NbMl0pLmludFZhbHVlKCkpOwogICAgICAg\nICAgICBsYiA9IG5ldyBMb29wYmFja0NsaWVudChjaGFubmVsRmFjdG9yeSwg\nZXhlY3V0b3IsIGJlZ2luLCBsaW1pdC5pbnRWYWx1ZSgpKTsKCiAgICAgICAg\nICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbGltaXQ7IGkrKykgewogICAgICAg\nICAgICAgICAgbGIud3JpdGUobGVkZ2VySWQsIGksIGRhdGEsIGFkZHIsIGxi\nLCBjKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgc3luY2hyb25pemVk\nIChjKSB7CiAgICAgICAgICAgICAgICBjLndhaXQoKTsKICAgICAgICAgICAg\nICAgIFN5c3RlbS5vdXQucHJpbnRsbigiVGltZSB0byB3cml0ZSBhbGwgZW50\ncmllczogIiArIChTeXN0ZW0uY3VycmVudFRpbWVNaWxsaXMoKSAtIGJlZ2lu\nKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlv\nbiBlKSB7CiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7CiAgICAg\nICAgfSBjYXRjaCAoSW50ZXJydXB0ZWRFeGNlcHRpb24gZSkgewogICAgICAg\nICAgICBlLnByaW50U3RhY2tUcmFjZSgpOwogICAgICAgIH0KICAgIH0KCn0K\n","encoding":"base64"}

