{"sha":"c0bdfa60d4b7f4cdc641f64944e61f3df6addfd4","node_id":"MDQ6QmxvYjE1NzU5NTY6YzBiZGZhNjBkNGI3ZjRjZGM2NDFmNjQ5NDRlNjFmM2RmNmFkZGZkNA==","size":4032,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/c0bdfa60d4b7f4cdc641f64944e61f3df6addfd4","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIudXRpbDsKCmltcG9ydCBzdGF0\naWMgb3JnLmp1bml0LkFzc2VydC5hc3NlcnRUcnVlOwoKaW1wb3J0IGphdmEu\naW8uRmlsZTsKaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247CgppbXBvcnQg\nb3JnLmFwYWNoZS5ib29ra2VlcGVyLnV0aWwuRGlza0NoZWNrZXIuRGlza0Vy\ncm9yRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLnV0\naWwuRGlza0NoZWNrZXIuRGlza091dE9mU3BhY2VFeGNlcHRpb247CmltcG9y\ndCBvcmcuYXBhY2hlLmJvb2trZWVwZXIudXRpbC5EaXNrQ2hlY2tlci5EaXNr\nV2FyblRocmVzaG9sZEV4Y2VwdGlvbjsKaW1wb3J0IG9yZy5qdW5pdC5CZWZv\ncmU7CmltcG9ydCBvcmcuanVuaXQuVGVzdDsKCi8qKgogKiBUZXN0IHRvIHZl\ncmlmeSB7QGxpbmsgRGlza0NoZWNrZXJ9CiAqCiAqLwpwdWJsaWMgY2xhc3Mg\nVGVzdERpc2tDaGVja2VyIHsKCiAgICBEaXNrQ2hlY2tlciBkaXNrQ2hlY2tl\ncjsKCiAgICBAQmVmb3JlCiAgICBwdWJsaWMgdm9pZCBzZXR1cCgpIHsKICAg\nICAgICBkaXNrQ2hlY2tlciA9IG5ldyBEaXNrQ2hlY2tlcigwLjk1ZiwgMC45\nNWYpOwogICAgfQoKICAgIC8qKgogICAgICogQ2hlY2sgdGhlIGRpc2sgZnVs\nbAogICAgICovCiAgICBAVGVzdChleHBlY3RlZCA9IERpc2tPdXRPZlNwYWNl\nRXhjZXB0aW9uLmNsYXNzKQogICAgcHVibGljIHZvaWQgdGVzdENoZWNrRGlz\na0Z1bGwoKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgIEZpbGUgZmls\nZSA9IEZpbGUuY3JlYXRlVGVtcEZpbGUoIkRpc2tDaGVjayIsICJ0ZXN0Iik7\nCiAgICAgICAgbG9uZyB1c2FibGVTcGFjZSA9IGZpbGUuZ2V0VXNhYmxlU3Bh\nY2UoKTsKICAgICAgICBsb25nIHRvdGFsU3BhY2UgPSBmaWxlLmdldFRvdGFs\nU3BhY2UoKTsKICAgICAgICBmbG9hdCB0aHJlc2hvbGQgPQogICAgICAgICAg\nICAgICAgKDFmIC0gKChmbG9hdCkgdXNhYmxlU3BhY2UgLyAoZmxvYXQpIHRv\ndGFsU3BhY2UpKSAtIDAuMDVmOwogICAgICAgIGRpc2tDaGVja2VyLnNldERp\nc2tTcGFjZVRocmVzaG9sZCh0aHJlc2hvbGQsIHRocmVzaG9sZCk7CiAgICAg\nICAgZGlza0NoZWNrZXIuY2hlY2tEaXNrRnVsbChmaWxlKTsKICAgIH0KCiAg\nICBAVGVzdChleHBlY3RlZCA9IERpc2tXYXJuVGhyZXNob2xkRXhjZXB0aW9u\nLmNsYXNzKQogICAgcHVibGljIHZvaWQgdGVzdERpc2tXYXJuVGhyZXNob2xk\nRXhjZXB0aW9uKCkgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICBGaWxl\nIGZpbGUgPSBGaWxlLmNyZWF0ZVRlbXBGaWxlKCJEaXNrQ2hlY2siLCAidGVz\ndCIpOwogICAgICAgIGxvbmcgdXNhYmxlU3BhY2UgPSBmaWxlLmdldFVzYWJs\nZVNwYWNlKCk7CiAgICAgICAgbG9uZyB0b3RhbFNwYWNlID0gZmlsZS5nZXRU\nb3RhbFNwYWNlKCk7CiAgICAgICAgZmxvYXQgZGlza1NwYWNlVGhyZXNob2xk\nID0KICAgICAgICAgICAgICAgICgxZiAtICgoZmxvYXQpIHVzYWJsZVNwYWNl\nIC8gKGZsb2F0KSB0b3RhbFNwYWNlKSkgKyAwLjAxZjsKICAgICAgICBmbG9h\ndCBkaXNrV2FyblRocmVzaG9sZCA9CiAgICAgICAgICAgICAgICAoMWYgLSAo\nKGZsb2F0KSB1c2FibGVTcGFjZSAvIChmbG9hdCkgdG90YWxTcGFjZSkpIC0g\nMC4wNWY7CiAgICAgICAgZGlza0NoZWNrZXIuc2V0RGlza1NwYWNlVGhyZXNo\nb2xkKGRpc2tTcGFjZVRocmVzaG9sZCwgZGlza1dhcm5UaHJlc2hvbGQpOwog\nICAgICAgIGRpc2tDaGVja2VyLmNoZWNrRGlza0Z1bGwoZmlsZSk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBDaGVjayBkaXNrIGZ1bGwgb24gbm9uIGV4aXN0\nIGZpbGUuIGluIHRoaXMgY2FzZSBpdCBzaG91bGQgY2hlY2sgZm9yCiAgICAg\nKiBwYXJlbnQgZmlsZQogICAgICovCiAgICBAVGVzdCh0aW1lb3V0ID0gMzAw\nMDAsIGV4cGVjdGVkID0gRGlza091dE9mU3BhY2VFeGNlcHRpb24uY2xhc3Mp\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q2hlY2tEaXNrRnVsbE9uTm9uRXhpc3RG\naWxlKCkgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICBGaWxlIGZpbGUg\nPSBGaWxlLmNyZWF0ZVRlbXBGaWxlKCJEaXNrQ2hlY2siLCAidGVzdCIpOwog\nICAgICAgIGxvbmcgdXNhYmxlU3BhY2UgPSBmaWxlLmdldFVzYWJsZVNwYWNl\nKCk7CiAgICAgICAgbG9uZyB0b3RhbFNwYWNlID0gZmlsZS5nZXRUb3RhbFNw\nYWNlKCk7CiAgICAgICAgZmxvYXQgdGhyZXNob2xkID0gKDFmIC0gKChmbG9h\ndCkgdXNhYmxlU3BhY2UgLyAoZmxvYXQpIHRvdGFsU3BhY2UpKSAtIDAuMDVm\nOwogICAgICAgIGRpc2tDaGVja2VyLnNldERpc2tTcGFjZVRocmVzaG9sZCh0\naHJlc2hvbGQsIHRocmVzaG9sZCk7CiAgICAgICAgYXNzZXJ0VHJ1ZShmaWxl\nLmRlbGV0ZSgpKTsKICAgICAgICBkaXNrQ2hlY2tlci5jaGVja0Rpc2tGdWxs\nKGZpbGUpOwogICAgfQoKICAgIC8qKgogICAgICogQ2hlY2sgZGlzayBlcnJv\nciBmb3IgZmlsZQogICAgICovCiAgICBAVGVzdCh0aW1lb3V0ID0gMzAwMDAs\nIGV4cGVjdGVkID0gRGlza0Vycm9yRXhjZXB0aW9uLmNsYXNzKQogICAgcHVi\nbGljIHZvaWQgdGVzdENoZWNrRGlza0Vycm9yRm9yRmlsZSgpIHRocm93cyBF\neGNlcHRpb24gewogICAgICAgIEZpbGUgcGFyZW50ID0gRmlsZS5jcmVhdGVU\nZW1wRmlsZSgiRGlza0NoZWNrIiwgInRlc3QiKTsKICAgICAgICBwYXJlbnQu\nZGVsZXRlKCk7CiAgICAgICAgcGFyZW50Lm1rZGlyKCk7CiAgICAgICAgRmls\nZSBjaGlsZCA9IEZpbGUuY3JlYXRlVGVtcEZpbGUoIkRpc2tDaGVjayIsICJ0\nZXN0IiwgcGFyZW50KTsKICAgICAgICBkaXNrQ2hlY2tlci5jaGVja0Rpcihj\naGlsZCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDaGVjayBkaXNrIGVycm9y\nIGZvciB2YWxpZCBkaXIuCiAgICAgKi8KICAgIEBUZXN0KHRpbWVvdXQ9NjAw\nMDApCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q2hlY2tEaXNrRXJyb3JGb3JEaXIo\nKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBGaWxlIHBhcmVudCA9IEZp\nbGUuY3JlYXRlVGVtcEZpbGUoIkRpc2tDaGVjayIsICJ0ZXN0Iik7CiAgICAg\nICAgcGFyZW50LmRlbGV0ZSgpOwogICAgICAgIHBhcmVudC5ta2RpcigpOwog\nICAgICAgIEZpbGUgY2hpbGQgPSBGaWxlLmNyZWF0ZVRlbXBGaWxlKCJEaXNr\nQ2hlY2siLCAidGVzdCIsIHBhcmVudCk7CiAgICAgICAgY2hpbGQuZGVsZXRl\nKCk7CiAgICAgICAgY2hpbGQubWtkaXIoKTsKICAgICAgICBkaXNrQ2hlY2tl\nci5jaGVja0RpcihjaGlsZCk7CiAgICB9Cn0K\n","encoding":"base64"}

