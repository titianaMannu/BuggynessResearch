{"sha":"156290b678ec51bf8151c74e15c27131775d3cd0","node_id":"MDQ6QmxvYjE1NzU5NTY6MTU2MjkwYjY3OGVjNTFiZjgxNTFjNzRlMTVjMjcxMzE3NzVkM2NkMA==","size":3186,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/156290b678ec51bf8151c74e15c27131775d3cd0","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUgb3IgbW9yZQogKiBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuIFNlZSB0aGUgTk9USUNFIGZpbGUgZGlzdHJp\nYnV0ZWQgd2l0aCB0aGlzCiAqIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24gcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuIFRoZSBBU0YK\nICogbGljZW5zZXMgdGhpcyBmaWxlIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hl\nIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUKICogIkxpY2Vuc2UiKTsgeW91\nIG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3\naXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2Yg\ndGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xp\nY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBh\ncHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdh\ncmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJp\nYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywgV0lUSE9VVAogKiBXQVJSQU5U\nSUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNz\nIG9yIGltcGxpZWQuIFNlZSB0aGUKICogTGljZW5zZSBmb3IgdGhlIHNwZWNp\nZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRh\ndGlvbnMgdW5kZXIKICogdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5h\ncGFjaGUuYm9va2tlZXBlci5zdGF0czsKCmltcG9ydCBjb20uY29kYWhhbGUu\nbWV0cmljcy5UaW1lcjsKaW1wb3J0IGNvbS5jb2RhaGFsZS5tZXRyaWNzLk1l\ndHJpY1JlZ2lzdHJ5OwppbXBvcnQgc3RhdGljIGNvbS5jb2RhaGFsZS5tZXRy\naWNzLk1ldHJpY1JlZ2lzdHJ5Lm5hbWU7CgppbXBvcnQgb3JnLmFwYWNoZS5i\nb29ra2VlcGVyLnN0YXRzLkNvdW50ZXI7CmltcG9ydCBvcmcuYXBhY2hlLmJv\nb2trZWVwZXIuc3RhdHMuR2F1Z2U7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2tr\nZWVwZXIuc3RhdHMuT3BTdGF0c0xvZ2dlcjsKaW1wb3J0IG9yZy5hcGFjaGUu\nYm9va2tlZXBlci5zdGF0cy5TdGF0c0xvZ2dlcjsKCnB1YmxpYyBjbGFzcyBD\nb2RhaGFsZVN0YXRzTG9nZ2VyIGltcGxlbWVudHMgU3RhdHNMb2dnZXIgewog\nICAgcHJvdGVjdGVkIGZpbmFsIFN0cmluZyBiYXNlbmFtZTsKICAgIGZpbmFs\nIE1ldHJpY1JlZ2lzdHJ5IG1ldHJpY3M7CgogICAgQ29kYWhhbGVTdGF0c0xv\nZ2dlcihNZXRyaWNSZWdpc3RyeSBtZXRyaWNzLCBTdHJpbmcgYmFzZW5hbWUp\nIHsKICAgICAgICB0aGlzLm1ldHJpY3MgPSBtZXRyaWNzOwogICAgICAgIHRo\naXMuYmFzZW5hbWUgPSBiYXNlbmFtZTsKICAgIH0KCiAgICBAT3ZlcnJpZGUK\nICAgIHB1YmxpYyBPcFN0YXRzTG9nZ2VyIGdldE9wU3RhdHNMb2dnZXIoU3Ry\naW5nIHN0YXROYW1lKSB7CiAgICAgICAgVGltZXIgc3VjY2VzcyA9IG1ldHJp\nY3MudGltZXIobmFtZShiYXNlbmFtZSwgc3RhdE5hbWUpKTsKICAgICAgICBU\naW1lciBmYWlsdXJlID0gbWV0cmljcy50aW1lcihuYW1lKGJhc2VuYW1lLCBz\ndGF0TmFtZSsiLWZhaWwiKSk7CiAgICAgICAgcmV0dXJuIG5ldyBDb2RhaGFs\nZU9wU3RhdHNMb2dnZXIoc3VjY2VzcywgZmFpbHVyZSk7CiAgICB9CgogICAg\nQE92ZXJyaWRlCiAgICBwdWJsaWMgQ291bnRlciBnZXRDb3VudGVyKFN0cmlu\nZyBzdGF0TmFtZSkgewogICAgICAgIGZpbmFsIGNvbS5jb2RhaGFsZS5tZXRy\naWNzLkNvdW50ZXIgYyA9IG1ldHJpY3MuY291bnRlcihuYW1lKGJhc2VuYW1l\nLCBzdGF0TmFtZSkpOwogICAgICAgIHJldHVybiBuZXcgQ291bnRlcigpIHsK\nICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyBzeW5j\naHJvbml6ZWQgdm9pZCBjbGVhcigpIHsKICAgICAgICAgICAgICAgIGxvbmcg\nY3VyID0gYy5nZXRDb3VudCgpOwogICAgICAgICAgICAgICAgYy5kZWMoY3Vy\nKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAg\nICAgICAgIHB1YmxpYyBMb25nIGdldCgpIHsKICAgICAgICAgICAgICAgIHJl\ndHVybiBjLmdldENvdW50KCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAg\nIEBPdmVycmlkZQogICAgICAgICAgICBwdWJsaWMgdm9pZCBpbmMoKSB7CiAg\nICAgICAgICAgICAgICBjLmluYygpOwogICAgICAgICAgICB9CgogICAgICAg\nICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIHZvaWQgZGVjKCkg\newogICAgICAgICAgICAgICAgYy5kZWMoKTsKICAgICAgICAgICAgfQoKICAg\nICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIGFk\nZChsb25nIGRlbHRhKSB7CiAgICAgICAgICAgICAgICBjLmluYyhkZWx0YSk7\nCiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgfQoKICAgIEBPdmVycmlk\nZQogICAgcHVibGljIDxUIGV4dGVuZHMgTnVtYmVyPiB2b2lkIHJlZ2lzdGVy\nR2F1Z2UoZmluYWwgU3RyaW5nIHN0YXROYW1lLCBmaW5hbCBHYXVnZTxUPiBn\nYXVnZSkgewogICAgICAgIFN0cmluZyBtZXRyaWNOYW1lID0gbmFtZShiYXNl\nbmFtZSwgc3RhdE5hbWUpOwogICAgICAgIG1ldHJpY3MucmVtb3ZlKG1ldHJp\nY05hbWUpOwoKICAgICAgICBtZXRyaWNzLnJlZ2lzdGVyKG1ldHJpY05hbWUs\nIG5ldyBjb20uY29kYWhhbGUubWV0cmljcy5HYXVnZTxUPigpIHsKICAgICAg\nICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgcHVibGljIFQg\nZ2V0VmFsdWUoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdhdWdl\nLmdldFNhbXBsZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9\nKTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBTdGF0c0xvZ2dl\nciBzY29wZShTdHJpbmcgc2NvcGUpIHsKICAgICAgICBTdHJpbmcgc2NvcGVO\nYW1lOwogICAgICAgIGlmICgwID09IGJhc2VuYW1lLmxlbmd0aCgpKSB7CiAg\nICAgICAgICAgIHNjb3BlTmFtZSA9IHNjb3BlOwogICAgICAgIH0gZWxzZSB7\nCiAgICAgICAgICAgIHNjb3BlTmFtZSA9IG5hbWUoYmFzZW5hbWUsIHNjb3Bl\nKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG5ldyBDb2RhaGFsZVN0YXRz\nTG9nZ2VyKG1ldHJpY3MsIHNjb3BlTmFtZSk7CiAgICB9Cn0K\n","encoding":"base64"}

