{"sha":"ba969bad79096341d8edf48404010d3fb730e7c5","node_id":"MDQ6QmxvYjE1NzU5NTY6YmE5NjliYWQ3OTA5NjM0MWQ4ZWRmNDg0MDQwMTBkM2ZiNzMwZTdjNQ==","size":3164,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/ba969bad79096341d8edf48404010d3fb730e7c5","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUgb3IgbW9yZQogKiBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuIFNlZSB0aGUgTk9USUNFIGZpbGUgZGlzdHJp\nYnV0ZWQgd2l0aCB0aGlzCiAqIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24gcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuIFRoZSBBU0YK\nICogbGljZW5zZXMgdGhpcyBmaWxlIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hl\nIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUKICogIkxpY2Vuc2UiKTsgeW91\nIG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3\naXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2Yg\ndGhlIExpY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xp\nY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBh\ncHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdh\ncmUKICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJp\nYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywgV0lUSE9VVAogKiBXQVJSQU5U\nSUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNz\nIG9yIGltcGxpZWQuIFNlZSB0aGUKICogTGljZW5zZSBmb3IgdGhlIHNwZWNp\nZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRh\ndGlvbnMgdW5kZXIKICogdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5h\ncGFjaGUuYm9va2tlZXBlci5zdGF0cy50d2l0dGVyLm9zdHJpY2g7CgppbXBv\ncnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLnN0YXRzLk9wU3RhdHNEYXRhOwpp\nbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLnN0YXRzLk9wU3RhdHNMb2dn\nZXI7CgpjbGFzcyBPcFN0YXRzTG9nZ2VySW1wbCBpbXBsZW1lbnRzIE9wU3Rh\ndHNMb2dnZXIgewoKICAgIHN0YXRpYyBmaW5hbCBkb3VibGVbXSBQRVJDRU5U\nSUxFUyA9IG5ldyBkb3VibGVbXSB7CiAgICAgICAgICAgIDAuMSwgMC41LCAw\nLjksIDAuOTksIDAuOTk5LCAwLjk5OTkKICAgIH07CgogICAgcHJpdmF0ZSBm\naW5hbCBTdHJpbmcgc2NvcGU7CiAgICBwcml2YXRlIGZpbmFsIGNvbS50d2l0\ndGVyLm9zdHJpY2guc3RhdHMuQ291bnRlciBzdWNjZXNzQ291bnRlcjsKICAg\nIHByaXZhdGUgZmluYWwgY29tLnR3aXR0ZXIub3N0cmljaC5zdGF0cy5Db3Vu\ndGVyIGZhaWx1cmVDb3VudGVyOwogICAgcHJpdmF0ZSBmaW5hbCBjb20udHdp\ndHRlci5vc3RyaWNoLnN0YXRzLk1ldHJpYyBzdWNjZXNzTWV0cmljOwogICAg\ncHJpdmF0ZSBmaW5hbCBjb20udHdpdHRlci5vc3RyaWNoLnN0YXRzLk1ldHJp\nYyBmYWlsdXJlTWV0cmljOwoKICAgIE9wU3RhdHNMb2dnZXJJbXBsKFN0cmlu\nZyBzY29wZSwgY29tLnR3aXR0ZXIub3N0cmljaC5zdGF0cy5TdGF0c1Byb3Zp\nZGVyIHN0YXRzUHJvdmlkZXIpIHsKICAgICAgICB0aGlzLnNjb3BlID0gc2Nv\ncGU7CiAgICAgICAgc3VjY2Vzc0NvdW50ZXIgPSBzdGF0c1Byb3ZpZGVyLmdl\ndENvdW50ZXIoc3RhdE5hbWUoInJlcXVlc3RzL3N1Y2Nlc3MiKSk7CiAgICAg\nICAgZmFpbHVyZUNvdW50ZXIgPSBzdGF0c1Byb3ZpZGVyLmdldENvdW50ZXIo\nc3RhdE5hbWUoInJlcXVlc3RzL2ZhaWx1cmUiKSk7CiAgICAgICAgc3VjY2Vz\nc01ldHJpYyA9IHN0YXRzUHJvdmlkZXIuZ2V0TWV0cmljKHN0YXROYW1lKCJs\nYXRlbmN5L3N1Y2Nlc3MiKSk7CiAgICAgICAgZmFpbHVyZU1ldHJpYyA9IHN0\nYXRzUHJvdmlkZXIuZ2V0TWV0cmljKHN0YXROYW1lKCJsYXRlbmN5L2ZhaWx1\ncmUiKSk7CiAgICB9CgogICAgcHJpdmF0ZSBTdHJpbmcgc3RhdE5hbWUoU3Ry\naW5nIHN0YXROYW1lKSB7CiAgICAgICAgcmV0dXJuIFN0cmluZy5mb3JtYXQo\nIiVzLyVzIiwgc2NvcGUsIHN0YXROYW1lKTsKICAgIH0KCiAgICBAT3ZlcnJp\nZGUKICAgIHB1YmxpYyB2b2lkIHJlZ2lzdGVyRmFpbGVkRXZlbnQobG9uZyBl\ndmVudExhdGVuY3lNaWxsaXMpIHsKICAgICAgICBmYWlsdXJlTWV0cmljLmFk\nZCgoaW50KWV2ZW50TGF0ZW5jeU1pbGxpcyk7CiAgICAgICAgZmFpbHVyZUNv\ndW50ZXIuaW5jcigpOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGlj\nIHZvaWQgcmVnaXN0ZXJTdWNjZXNzZnVsRXZlbnQobG9uZyBldmVudExhdGVu\nY3lNaWxsaXMpIHsKICAgICAgICBzdWNjZXNzTWV0cmljLmFkZCgoaW50KWV2\nZW50TGF0ZW5jeU1pbGxpcyk7CiAgICAgICAgc3VjY2Vzc0NvdW50ZXIuaW5j\ncigpOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIE9wU3RhdHNE\nYXRhIHRvT3BTdGF0c0RhdGEoKSB7CiAgICAgICAgbG9uZyBudW1TdWNjZXNz\nID0gc3VjY2Vzc0NvdW50ZXIuYXBwbHkoKTsKICAgICAgICBsb25nIG51bUZh\naWx1cmVzID0gZmFpbHVyZUNvdW50ZXIuYXBwbHkoKTsKICAgICAgICBjb20u\ndHdpdHRlci5vc3RyaWNoLnN0YXRzLkRpc3RyaWJ1dGlvbiBkaXN0cmlidXRp\nb24gPSBzdWNjZXNzTWV0cmljLmFwcGx5KCk7CiAgICAgICAgY29tLnR3aXR0\nZXIub3N0cmljaC5zdGF0cy5IaXN0b2dyYW0gaGlzdG9ncmFtID0gZGlzdHJp\nYnV0aW9uLmhpc3RvZ3JhbSgpOwogICAgICAgIGRvdWJsZSBhdmdMYXRlbmN5\nID0gZGlzdHJpYnV0aW9uLmF2ZXJhZ2UoKTsKICAgICAgICBsb25nW10gcGVy\nY2VudGlsZXMgPSBuZXcgbG9uZ1tQRVJDRU5USUxFUy5sZW5ndGhdOwogICAg\nICAgIGludCBpID0gMDsKICAgICAgICBmb3IgKGRvdWJsZSBwZXJjZW50aWxl\nIDogUEVSQ0VOVElMRVMpIHsKICAgICAgICAgICAgcGVyY2VudGlsZXNbaV0g\nPSBoaXN0b2dyYW0uZ2V0UGVyY2VudGlsZShwZXJjZW50aWxlKTsKICAgICAg\nICAgICAgKytpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbmV3IE9wU3Rh\ndHNEYXRhKG51bVN1Y2Nlc3MsIG51bUZhaWx1cmVzLCBhdmdMYXRlbmN5LCBw\nZXJjZW50aWxlcyk7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMg\ndm9pZCBjbGVhcigpIHsKICAgICAgICBzdWNjZXNzQ291bnRlci5yZXNldCgp\nOwogICAgICAgIGZhaWx1cmVDb3VudGVyLnJlc2V0KCk7CiAgICAgICAgc3Vj\nY2Vzc01ldHJpYy5jbGVhcigpOwogICAgICAgIGZhaWx1cmVNZXRyaWMuY2xl\nYXIoKTsKICAgIH0KfQo=\n","encoding":"base64"}

