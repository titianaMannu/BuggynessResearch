{"sha":"1d4f95555ac34c9ddff68e913c0b865b09de581c","node_id":"MDQ6QmxvYjE1NzU5NTY6MWQ0Zjk1NTU1YWMzNGM5ZGRmZjY4ZTkxM2MwYjg2NWIwOWRlNTgxYw==","size":9554,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/1d4f95555ac34c9ddff68e913c0b865b09de581c","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQubmV0dHk7CgppbXBvcnQg\namF2YS5uZXQuSW5ldFNvY2tldEFkZHJlc3M7CgppbXBvcnQgb3JnLmpib3Nz\nLm5ldHR5LmNoYW5uZWwuQ2hhbm5lbDsKCmltcG9ydCBvcmcuYXBhY2hlLmhl\nZHdpZy5jbGllbnQuZGF0YS5QdWJTdWJEYXRhOwppbXBvcnQgb3JnLmFwYWNo\nZS5oZWR3aWcuY2xpZW50LmRhdGEuVG9waWNTdWJzY3JpYmVyOwppbXBvcnQg\nb3JnLmFwYWNoZS5oZWR3aWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2wuQ2xv\nc2VTdWJzY3JpcHRpb25SZXF1ZXN0OwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3\naWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2wuQ29uc3VtZVJlcXVlc3Q7Cmlt\ncG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5QdWJTdWJQcm90b2Nv\nbC5NZXNzYWdlU2VxSWQ7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90\nb2NvbC5QdWJTdWJQcm90b2NvbC5PcGVyYXRpb25UeXBlOwppbXBvcnQgb3Jn\nLmFwYWNoZS5oZWR3aWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2wuUHVibGlz\naFJlcXVlc3Q7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5Q\ndWJTdWJQcm90b2NvbC5QdWJTdWJSZXF1ZXN0OwppbXBvcnQgb3JnLmFwYWNo\nZS5oZWR3aWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2wuUHJvdG9jb2xWZXJz\naW9uOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcucHJvdG9jb2wuUHViU3Vi\nUHJvdG9jb2wuU3Vic2NyaWJlUmVxdWVzdDsKaW1wb3J0IG9yZy5hcGFjaGUu\naGVkd2lnLnByb3RvY29sLlB1YlN1YlByb3RvY29sLlN1YnNjcmlwdGlvbk9w\ndGlvbnM7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5QdWJT\ndWJQcm90b2NvbC5TdWJzY3JpcHRpb25QcmVmZXJlbmNlczsKaW1wb3J0IG9y\nZy5hcGFjaGUuaGVkd2lnLnByb3RvY29sLlB1YlN1YlByb3RvY29sLlVuc3Vi\nc2NyaWJlUmVxdWVzdDsKCi8qKgogKiBVdGlsaXRpZXMgZm9yIG5ldHdvcmsg\nb3BlcmF0aW9ucy4KICovCnB1YmxpYyBjbGFzcyBOZXRVdGlscyB7CgogICAg\nLyoqCiAgICAgKiBIZWxwZXIgc3RhdGljIG1ldGhvZCB0byBnZXQgdGhlIFN0\ncmluZyBIb3N0bmFtZTpQb3J0IGZyb20gYSBuZXR0eQogICAgICogQ2hhbm5l\nbC4gQXNzdW1wdGlvbiBpcyB0aGF0IHRoZSBuZXR0eSBDaGFubmVsIHdhcyBv\ncmlnaW5hbGx5IGNyZWF0ZWQgd2l0aAogICAgICogYW4gSW5ldFNvY2tldEFk\nZHJlc3MuIFRoaXMgaXMgdHJ1ZSB3aXRoIHRoZSBIZWR3aWcgbmV0dHkgaW1w\nbGVtZW50YXRpb24uCiAgICAgKgogICAgICogQHBhcmFtIGNoYW5uZWwKICAg\nICAqICAgICAgICAgICAgTmV0dHkgY2hhbm5lbCB0byBleHRyYWN0IHRoZSBo\nb3N0bmFtZSBhbmQgcG9ydCBmcm9tLgogICAgICogQHJldHVybiBTdHJpbmcg\ncmVwcmVzZW50YXRpb24gb2YgdGhlIEhvc3RuYW1lOlBvcnQgZnJvbSB0aGUg\nTmV0dHkgQ2hhbm5lbAogICAgICovCiAgICBwdWJsaWMgc3RhdGljIEluZXRT\nb2NrZXRBZGRyZXNzIGdldEhvc3RGcm9tQ2hhbm5lbChDaGFubmVsIGNoYW5u\nZWwpIHsKICAgICAgICByZXR1cm4gKEluZXRTb2NrZXRBZGRyZXNzKSBjaGFu\nbmVsLmdldFJlbW90ZUFkZHJlc3MoKTsKICAgIH0KCiAgICAvKioKICAgICAq\nIFRoaXMgaXMgYSBoZWxwZXIgbWV0aG9kIHRvIGJ1aWxkIHRoZSBhY3R1YWwg\ncHViL3N1YiBtZXNzYWdlLgogICAgICoKICAgICAqIEBwYXJhbSB0eG5JZAog\nICAgICogICAgICAgICAgICBUcmFuc2FjdGlvbiBJZC4KICAgICAqIEBwYXJh\nbSBwdWJTdWJEYXRhCiAgICAgKiAgICAgICAgICAgIFB1Ymxpc2ggY2FsbCdz\nIGRhdGEgd3JhcHBlciBvYmplY3QuCiAgICAgKiBAcmV0dXJuIHB1YiBzdWIg\ncmVxdWVzdCB0byBzZW5kCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgUHVi\nU3ViUmVxdWVzdC5CdWlsZGVyIGJ1aWxkUHViU3ViUmVxdWVzdChsb25nIHR4\nbklkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIFB1YlN1YkRhdGEgcHViU3ViRGF0YSkgewog\nICAgICAgIC8vIENyZWF0ZSBhIFB1YlN1YlJlcXVlc3QKICAgICAgICBQdWJT\ndWJSZXF1ZXN0LkJ1aWxkZXIgcHVic3ViUmVxdWVzdEJ1aWxkZXIgPSBQdWJT\ndWJSZXF1ZXN0Lm5ld0J1aWxkZXIoKTsKICAgICAgICBwdWJzdWJSZXF1ZXN0\nQnVpbGRlci5zZXRQcm90b2NvbFZlcnNpb24oUHJvdG9jb2xWZXJzaW9uLlZF\nUlNJT05fT05FKTsKICAgICAgICBwdWJzdWJSZXF1ZXN0QnVpbGRlci5zZXRU\neXBlKHB1YlN1YkRhdGEub3BlcmF0aW9uVHlwZSk7CiAgICAgICAgLy8gZm9y\nIGNvbnN1bWUgcmVxdWVzdCwgd2UgZG9uJ3QgbmVlZCB0byBjYXJlIGFib3V0\nIHRyaWVkIHNlcnZlcnMgbGlzdAogICAgICAgIGlmIChPcGVyYXRpb25UeXBl\nLkNPTlNVTUUgIT0gcHViU3ViRGF0YS5vcGVyYXRpb25UeXBlKSB7CiAgICAg\nICAgICAgIGlmIChwdWJTdWJEYXRhLnRyaWVkU2VydmVycyAhPSBudWxsICYm\nIHB1YlN1YkRhdGEudHJpZWRTZXJ2ZXJzLnNpemUoKSA+IDApIHsKICAgICAg\nICAgICAgICAgIHB1YnN1YlJlcXVlc3RCdWlsZGVyLmFkZEFsbFRyaWVkU2Vy\ndmVycyhwdWJTdWJEYXRhLnRyaWVkU2VydmVycyk7CiAgICAgICAgICAgIH0K\nICAgICAgICB9CiAgICAgICAgcHVic3ViUmVxdWVzdEJ1aWxkZXIuc2V0VHhu\nSWQodHhuSWQpOwogICAgICAgIHB1YnN1YlJlcXVlc3RCdWlsZGVyLnNldFNo\nb3VsZENsYWltKHB1YlN1YkRhdGEuc2hvdWxkQ2xhaW0pOwogICAgICAgIHB1\nYnN1YlJlcXVlc3RCdWlsZGVyLnNldFRvcGljKHB1YlN1YkRhdGEudG9waWMp\nOwoKICAgICAgICBzd2l0Y2ggKHB1YlN1YkRhdGEub3BlcmF0aW9uVHlwZSkg\newogICAgICAgIGNhc2UgUFVCTElTSDoKICAgICAgICAgICAgLy8gU2V0IHRo\nZSBQdWJsaXNoUmVxdWVzdCBpbnRvIHRoZSBvdXRlciBQdWJTdWJSZXF1ZXN0\nCiAgICAgICAgICAgIHB1YnN1YlJlcXVlc3RCdWlsZGVyLnNldFB1Ymxpc2hS\nZXF1ZXN0KGJ1aWxkUHVibGlzaFJlcXVlc3QocHViU3ViRGF0YSkpOwogICAg\nICAgICAgICBicmVhazsKICAgICAgICBjYXNlIFNVQlNDUklCRToKICAgICAg\nICAgICAgLy8gU2V0IHRoZSBTdWJzY3JpYmVSZXF1ZXN0IGludG8gdGhlIG91\ndGVyIFB1YlN1YlJlcXVlc3QKICAgICAgICAgICAgcHVic3ViUmVxdWVzdEJ1\naWxkZXIuc2V0U3Vic2NyaWJlUmVxdWVzdChidWlsZFN1YnNjcmliZVJlcXVl\nc3QocHViU3ViRGF0YSkpOwogICAgICAgICAgICBicmVhazsKICAgICAgICBj\nYXNlIFVOU1VCU0NSSUJFOgogICAgICAgICAgICAvLyBTZXQgdGhlIFVuc3Vi\nc2NyaWJlUmVxdWVzdCBpbnRvIHRoZSBvdXRlciBQdWJTdWJSZXF1ZXN0CiAg\nICAgICAgICAgIHB1YnN1YlJlcXVlc3RCdWlsZGVyLnNldFVuc3Vic2NyaWJl\nUmVxdWVzdChidWlsZFVuc3Vic2NyaWJlUmVxdWVzdChwdWJTdWJEYXRhKSk7\nCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgQ0xPU0VTVUJTQ1JJ\nUFRJT046CiAgICAgICAgICAgIC8vIFNldCB0aGUgQ2xvc2VTdWJzY3JpcHRp\nb25SZXF1ZXN0IGludG8gdGhlIG91dGVyIFB1YlN1YlJlcXVlc3QKICAgICAg\nICAgICAgcHVic3ViUmVxdWVzdEJ1aWxkZXIuc2V0Q2xvc2VTdWJzY3JpcHRp\nb25SZXF1ZXN0KAogICAgICAgICAgICAgICAgYnVpbGRDbG9zZVN1YnNjcmlw\ndGlvblJlcXVlc3QocHViU3ViRGF0YSkpOwogICAgICAgICAgICBicmVhazsK\nICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdh\nbEFyZ3VtZW50RXhjZXB0aW9uKCJVbmtub3duIGFyZ3VtZW50IHR5cGUgIiAr\nIHB1YlN1YkRhdGEub3BlcmF0aW9uVHlwZSk7CiAgICAgICAgfQoKICAgICAg\nICAvLyBVcGRhdGUgdGhlIFB1YlN1YkRhdGEgd2l0aCB0aGUgdHhuSWQgYW5k\nIHRoZSByZXF1ZXN0V3JpdGVUaW1lCiAgICAgICAgcHViU3ViRGF0YS50eG5J\nZCA9IHR4bklkOwogICAgICAgIHB1YlN1YkRhdGEucmVxdWVzdFdyaXRlVGlt\nZSA9IFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpOwoKICAgICAgICByZXR1\ncm4gcHVic3ViUmVxdWVzdEJ1aWxkZXI7CiAgICB9CgogICAgLy8gYnVpbGQg\ncHVibGlzaCByZXF1ZXN0CiAgICBwcml2YXRlIHN0YXRpYyBQdWJsaXNoUmVx\ndWVzdC5CdWlsZGVyIGJ1aWxkUHVibGlzaFJlcXVlc3QoUHViU3ViRGF0YSBw\ndWJTdWJEYXRhKSB7CiAgICAgICAgUHVibGlzaFJlcXVlc3QuQnVpbGRlciBw\ndWJsaXNoUmVxdWVzdEJ1aWxkZXIgPSBQdWJsaXNoUmVxdWVzdC5uZXdCdWls\nZGVyKCk7CiAgICAgICAgcHVibGlzaFJlcXVlc3RCdWlsZGVyLnNldE1zZyhw\ndWJTdWJEYXRhLm1zZyk7CiAgICAgICAgcmV0dXJuIHB1Ymxpc2hSZXF1ZXN0\nQnVpbGRlcjsKICAgIH0KCiAgICAvLyBidWlsZCBzdWJzY3JpYmUgcmVxdWVz\ndAogICAgcHJpdmF0ZSBzdGF0aWMgU3Vic2NyaWJlUmVxdWVzdC5CdWlsZGVy\nIGJ1aWxkU3Vic2NyaWJlUmVxdWVzdChQdWJTdWJEYXRhIHB1YlN1YkRhdGEp\nIHsgU3Vic2NyaWJlUmVxdWVzdC5CdWlsZGVyIHN1YnNjcmliZVJlcXVlc3RC\ndWlsZGVyID0gU3Vic2NyaWJlUmVxdWVzdC5uZXdCdWlsZGVyKCk7CiAgICAg\nICAgc3Vic2NyaWJlUmVxdWVzdEJ1aWxkZXIuc2V0U3Vic2NyaWJlcklkKHB1\nYlN1YkRhdGEuc3Vic2NyaWJlcklkKTsKICAgICAgICBzdWJzY3JpYmVSZXF1\nZXN0QnVpbGRlci5zZXRDcmVhdGVPckF0dGFjaChwdWJTdWJEYXRhLm9wdGlv\nbnMuZ2V0Q3JlYXRlT3JBdHRhY2goKSk7CiAgICAgICAgc3Vic2NyaWJlUmVx\ndWVzdEJ1aWxkZXIuc2V0Rm9yY2VBdHRhY2gocHViU3ViRGF0YS5vcHRpb25z\nLmdldEZvcmNlQXR0YWNoKCkpOwogICAgICAgIC8vIEZvciBub3csIGFsbCBz\ndWJzY3JpYmVzIHNob3VsZCB3YWl0IGZvciBhbGwgY3Jvc3MtcmVnaW9uYWwK\nICAgICAgICAvLyBzdWJzY3JpcHRpb25zIHRvIGJlIGVzdGFibGlzaGVkIGJl\nZm9yZSByZXR1cm5pbmcuCiAgICAgICAgc3Vic2NyaWJlUmVxdWVzdEJ1aWxk\nZXIuc2V0U3luY2hyb25vdXModHJ1ZSk7CiAgICAgICAgLy8gc2V0IHN1YnNj\ncmlwdGlvbiBwcmVmZXJlbmNlcwogICAgICAgIFN1YnNjcmlwdGlvblByZWZl\ncmVuY2VzLkJ1aWxkZXIgcHJlZmVyZW5jZXNCdWlsZGVyID0KICAgICAgICAg\nICAgb3B0aW9uczJQcmVmZXJlbmNlcyhwdWJTdWJEYXRhLm9wdGlvbnMpOwog\nICAgICAgIC8vIGJhY2t3YXJkIGNvbXBhdGFibGUgd2l0aCA0LjEuMAogICAg\nICAgIGlmIChwcmVmZXJlbmNlc0J1aWxkZXIuaGFzTWVzc2FnZUJvdW5kKCkp\nIHsKICAgICAgICAgICAgc3Vic2NyaWJlUmVxdWVzdEJ1aWxkZXIuc2V0TWVz\nc2FnZUJvdW5kKHByZWZlcmVuY2VzQnVpbGRlci5nZXRNZXNzYWdlQm91bmQo\nKSk7CiAgICAgICAgfSAKICAgICAgICBzdWJzY3JpYmVSZXF1ZXN0QnVpbGRl\nci5zZXRQcmVmZXJlbmNlcyhwcmVmZXJlbmNlc0J1aWxkZXIpOwogICAgICAg\nIHJldHVybiBzdWJzY3JpYmVSZXF1ZXN0QnVpbGRlcjsKICAgIH0KCiAgICAv\nLyBidWlsZCB1bnN1YnNjcmliZSByZXF1ZXN0CiAgICBwcml2YXRlIHN0YXRp\nYyBVbnN1YnNjcmliZVJlcXVlc3QuQnVpbGRlciBidWlsZFVuc3Vic2NyaWJl\nUmVxdWVzdChQdWJTdWJEYXRhIHB1YlN1YkRhdGEpIHsKICAgICAgICAvLyBD\ncmVhdGUgdGhlIFVuU3Vic2NyaWJlUmVxdWVzdAogICAgICAgIFVuc3Vic2Ny\naWJlUmVxdWVzdC5CdWlsZGVyIHVuc3Vic2NyaWJlUmVxdWVzdEJ1aWxkZXIg\nPSBVbnN1YnNjcmliZVJlcXVlc3QubmV3QnVpbGRlcigpOwogICAgICAgIHVu\nc3Vic2NyaWJlUmVxdWVzdEJ1aWxkZXIuc2V0U3Vic2NyaWJlcklkKHB1YlN1\nYkRhdGEuc3Vic2NyaWJlcklkKTsKICAgICAgICByZXR1cm4gdW5zdWJzY3Jp\nYmVSZXF1ZXN0QnVpbGRlcjsKICAgIH0KCiAgICAvLyBidWlsZCBjbG9zZXN1\nYnNjcmlwdGlvbiByZXF1ZXN0CiAgICBwcml2YXRlIHN0YXRpYyBDbG9zZVN1\nYnNjcmlwdGlvblJlcXVlc3QuQnVpbGRlcgogICAgICAgIGJ1aWxkQ2xvc2VT\ndWJzY3JpcHRpb25SZXF1ZXN0KFB1YlN1YkRhdGEgcHViU3ViRGF0YSkgewog\nICAgICAgIC8vIENyZWF0ZSB0aGUgQ2xvc2VTdWJzY3JpcHRpb25SZXF1ZXN0\nCiAgICAgICAgQ2xvc2VTdWJzY3JpcHRpb25SZXF1ZXN0LkJ1aWxkZXIgY2xv\nc2VTdWJzY3JpcHRpb25SZXF1ZXN0QnVpbGRlciA9CiAgICAgICAgICAgIENs\nb3NlU3Vic2NyaXB0aW9uUmVxdWVzdC5uZXdCdWlsZGVyKCk7CiAgICAgICAg\nY2xvc2VTdWJzY3JpcHRpb25SZXF1ZXN0QnVpbGRlci5zZXRTdWJzY3JpYmVy\nSWQocHViU3ViRGF0YS5zdWJzY3JpYmVySWQpOwogICAgICAgIHJldHVybiBj\nbG9zZVN1YnNjcmlwdGlvblJlcXVlc3RCdWlsZGVyOwogICAgfQoKICAgIC8q\nKgogICAgICogQnVpbGQgY29uc3VtZSByZXF1ZXN0CiAgICAgKgogICAgICog\nQHBhcmFtIHR4bklkCiAgICAgKiAgICAgICAgICBUcmFuc2FjdGlvbiBJZC4K\nICAgICAqIEBwYXJhbSB0b3BpY1N1YnNjcmliZXIKICAgICAqICAgICAgICAg\nIFRvcGljIFN1YnNjcmliZXIuCiAgICAgKiBAcGFyYW0gbWVzc2FnZVNlcUlk\nCiAgICAgKiAgICAgICAgICBNZXNzYWdlIFNlcSBJZC4KICAgICAqIEByZXR1\ncm4gcHViL3N1YiByZXF1ZXN0LgogICAgICovCiAgICBwdWJsaWMgc3RhdGlj\nIFB1YlN1YlJlcXVlc3QuQnVpbGRlciBidWlsZENvbnN1bWVSZXF1ZXN0KGxv\nbmcgdHhuSWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgIFRvcGljU3Vic2NyaWJlciB0b3Bp\nY1N1YnNjcmliZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXFJZCBtZXNz\nYWdlU2VxSWQpIHsKICAgICAgICAvLyBDcmVhdGUgYSBQdWJTdWJSZXF1ZXN0\nCiAgICAgICAgUHViU3ViUmVxdWVzdC5CdWlsZGVyIHB1YnN1YlJlcXVlc3RC\ndWlsZGVyID0gUHViU3ViUmVxdWVzdC5uZXdCdWlsZGVyKCk7CiAgICAgICAg\ncHVic3ViUmVxdWVzdEJ1aWxkZXIuc2V0UHJvdG9jb2xWZXJzaW9uKFByb3Rv\nY29sVmVyc2lvbi5WRVJTSU9OX09ORSk7CiAgICAgICAgcHVic3ViUmVxdWVz\ndEJ1aWxkZXIuc2V0VHlwZShPcGVyYXRpb25UeXBlLkNPTlNVTUUpOwoKICAg\nICAgICBwdWJzdWJSZXF1ZXN0QnVpbGRlci5zZXRUeG5JZCh0eG5JZCk7CiAg\nICAgICAgcHVic3ViUmVxdWVzdEJ1aWxkZXIuc2V0VG9waWModG9waWNTdWJz\nY3JpYmVyLmdldFRvcGljKCkpOwoKICAgICAgICAvLyBDcmVhdGUgdGhlIENv\nbnN1bWVSZXF1ZXN0CiAgICAgICAgQ29uc3VtZVJlcXVlc3QuQnVpbGRlciBj\nb25zdW1lUmVxdWVzdEJ1aWxkZXIgPSBDb25zdW1lUmVxdWVzdC5uZXdCdWls\nZGVyKCk7CiAgICAgICAgY29uc3VtZVJlcXVlc3RCdWlsZGVyLnNldFN1YnNj\ncmliZXJJZCh0b3BpY1N1YnNjcmliZXIuZ2V0U3Vic2NyaWJlcklkKCkpOwog\nICAgICAgIGNvbnN1bWVSZXF1ZXN0QnVpbGRlci5zZXRNc2dJZChtZXNzYWdl\nU2VxSWQpOwoKICAgICAgICBwdWJzdWJSZXF1ZXN0QnVpbGRlci5zZXRDb25z\ndW1lUmVxdWVzdChjb25zdW1lUmVxdWVzdEJ1aWxkZXIpOwoKICAgICAgICBy\nZXR1cm4gcHVic3ViUmVxdWVzdEJ1aWxkZXI7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBDb252ZXJ0IGNsaWVudC1zaWRlIHN1YnNjcmlwdGlvbiBvcHRpb25z\nIHRvIHN1YnNjcmlwdGlvbiBwcmVmZXJlbmNlcwogICAgICoKICAgICAqIEBw\nYXJhbSBvcHRpb25zCiAgICAgKiAgICAgICAgICBDbGllbnQtU2lkZSBzdWJz\nY3JpcHRpb24gb3B0aW9ucwogICAgICogQHJldHVybiBzdWJzY3JpcHRpb24g\ncHJlZmVyZW5jZXMKICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgU3Vic2Ny\naXB0aW9uUHJlZmVyZW5jZXMuQnVpbGRlciBvcHRpb25zMlByZWZlcmVuY2Vz\nKFN1YnNjcmlwdGlvbk9wdGlvbnMgb3B0aW9ucykgewogICAgICAgIC8vIHBy\nZXBhcmUgc3Vic2NyaXB0aW9uIHByZWZlcmVuY2VzCiAgICAgICAgU3Vic2Ny\naXB0aW9uUHJlZmVyZW5jZXMuQnVpbGRlciBwcmVmZXJlbmNlc0J1aWxkZXIg\nPQogICAgICAgICAgICBTdWJzY3JpcHRpb25QcmVmZXJlbmNlcy5uZXdCdWls\nZGVyKCk7CgogICAgICAgIC8vIHNldCBtZXNzYWdlIGJvdW5kCiAgICAgICAg\naWYgKG9wdGlvbnMuZ2V0TWVzc2FnZUJvdW5kKCkgPiAwKSB7CiAgICAgICAg\nICAgIHByZWZlcmVuY2VzQnVpbGRlci5zZXRNZXNzYWdlQm91bmQob3B0aW9u\ncy5nZXRNZXNzYWdlQm91bmQoKSk7CiAgICAgICAgfQoKICAgICAgICAvLyBz\nZXQgbWVzc2FnZSBmaWx0ZXIKICAgICAgICBpZiAob3B0aW9ucy5oYXNNZXNz\nYWdlRmlsdGVyKCkpIHsKICAgICAgICAgICAgcHJlZmVyZW5jZXNCdWlsZGVy\nLnNldE1lc3NhZ2VGaWx0ZXIob3B0aW9ucy5nZXRNZXNzYWdlRmlsdGVyKCkp\nOwogICAgICAgIH0KCiAgICAgICAgLy8gc2V0IHVzZXIgb3B0aW9ucwogICAg\nICAgIGlmIChvcHRpb25zLmhhc09wdGlvbnMoKSkgewogICAgICAgICAgICBw\ncmVmZXJlbmNlc0J1aWxkZXIuc2V0T3B0aW9ucyhvcHRpb25zLmdldE9wdGlv\nbnMoKSk7CiAgICAgICAgfQoKICAgICAgICAvLyBzZXQgbWVzc2FnZSB3aW5k\nb3cgc2l6ZSBpZiBzZXQKICAgICAgICBpZiAob3B0aW9ucy5oYXNNZXNzYWdl\nV2luZG93U2l6ZSgpICYmIG9wdGlvbnMuZ2V0TWVzc2FnZVdpbmRvd1NpemUo\nKSA+IDApIHsKICAgICAgICAgICAgcHJlZmVyZW5jZXNCdWlsZGVyLnNldE1l\nc3NhZ2VXaW5kb3dTaXplKG9wdGlvbnMuZ2V0TWVzc2FnZVdpbmRvd1NpemUo\nKSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcHJlZmVyZW5jZXNCdWls\nZGVyOwogICAgfQoKfQo=\n","encoding":"base64"}

