{"sha":"26db51499e2337ce62f3abd59a3a40dbf0059920","node_id":"MDQ6QmxvYjE1NzU5NTY6MjZkYjUxNDk5ZTIzMzdjZTYyZjNhYmQ1OWEzYTQwZGJmMDA1OTkyMA==","size":5987,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/26db51499e2337ce62f3abd59a3a40dbf0059920","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCnBh\nY2thZ2Ugb3JnLmFwYWNoZS5oZWR3aWcuam1zOwoKaW1wb3J0IG9yZy5zbGY0\nai5Mb2dnZXI7CgppbXBvcnQgamF2YXguam1zLkpNU0V4Y2VwdGlvbjsKCgov\nKioKICAgIFNwZWNpZmljIHRvIGptcyBwYWNrYWdlIC0gTk9UIHRvIGJlIHVz\nZWQgZWxzZXdoZXJlLgoKICAgIFRoZSB1dGlsIGNsYXNzIGFsbG93cyBmb3Ig\nbWFuYWdpbmcgdGhlIGN1cnJlbnQgcmVhZGluZXNzICdzdGF0ZScgb2YgdGhl\nIG9iamVjdCB3aGljaCBob3N0cyBpdAogICAgYWxvbmcgdGhlIGF4aXMgb2Yg\nU3RhdGVNYW5hZ2VyLlN0YXRlIHdoaWxlIGJlaW5nIE1UIHNhZmUuIFJpZ2h0\nIG5vdywgYm90aCBDb25uZWN0aW9uIGFuZCBTZXNzaW9uIG1ha2UgdXNlIG9m\nIGl0LgoKICAgIFRoZSBsb2NrT2JqZWN0IGlzIHVzZWQgdG8gZG8gdGltZWQg\nd2FpdCdzICh3aGljaCB0aGUgaG9zdCBvYmplY3Qgd2lsbCBub3RpZnkgb24p\nIGluIGNhc2Ugb2YgYXN5bmMgc3RhdGUgY2hhbmdlcy4KCgogICAgVGhpcyBp\ncyBub3QgYSBnZW5lcmFsIHB1cnBvc2UgY29kZSwgYnV0IHNwZWNpZmljIHRv\nIHN0YXRlIHRyYW5zaXRpb25zIG1lbnRpb25lZCBpbiBqbXMgc3BlYy4KCgog\nICAgQWxsIHVzZSBvZiB0aGUgY2xhc3MgZ29lcyBsaWtlIHRoaXMgOgoKCiAg\nICBTdGF0ZU1hbmFnZXIuU3RhdGUgcHJldlN0YXRlOwogICAgYWNxdWlyZSBs\nb2NrOgogICAgICAgIGlmIGluIHRyYW5zaXRpb24gc3RhdGUsIHdhaXQuCiAg\nICAgICAgaWYgaW4gZXhwZWN0ZWQgc3RhdGUsIHJldHVybi4KICAgICAgICBp\nZiBpbiBlcnJvciBzdGF0ZSwgcmV0dXJuL3Rocm93IGV4Y2VwdGlvbi4KICAg\nICAgICBpZiBpbiB2YWxpZCBzdGF0ZSB0cmFuc2l0aW9uIHN0YXRlIC0KICAg\nICAgICAgICAgcHJldlN0YXRlID0gY3VycmVudFN0YXRlLgogICAgICAgICAg\nICBzZXQgdG8gY29ycmVzcG9uZGluZyB0cmFuc2l0aW9uIHN0YXRlIChTVEFS\nVElORywgQ0xPU0lORywgZXRjKS4KICAgICAgICBPdGhlciBtZXRob2Qgc3Bl\nY2lmaWMgY2hhbmdlcy4KICAgIHJlbGVhc2UgbG9jazoKCiAgICBuZXh0U3Rh\ndGUgPSBwcmV2U3RhdGUgKGluIGNhc2Ugc3RhdGUgY2hhbmdlIGZhaWxlZCwg\ncmV2ZXJ0KS4KCiAgICB0cnkgewogICAgICAgIGF0dGVtcHQgc3RhdGUgY2hh\nbmdlLgogICAgICAgIG9uIHN1Y2Nlc3MgbmV4dFN0YXRlID0gbmV4dCB2YWxp\nZCBzdGF0ZSBmb3IgdGhpcyBtZXRob2QuCiAgICB9IGZpbmFsbHkgewogICAg\nICAgIGFjcXVpcmUgbG9jazoKICAgICAgICAgIGNoYW5nZSBzdGF0ZSB0byBu\nZXh0U3RhdGUKICAgICAgICByZWxlYXNlIGxvY2s6CiAgICB9CgogICAgKiBT\nbyBhdCBhbnkgZ2l2ZW4gcG9pbnQgb2YgdGltZSwgdGhlIHN0YXRlIHdpbGwg\nYmUgaW4gdHJhbnNpdGlvbiBPTkxZIHdoZW4gdGhlcmUgaXMgYW4gYXR0ZW1w\ndAogICAgICAgICAgICBiZWluZyBtYWRlIHRvIHRyYW5zaXRpb24uCiAgICAq\nIFRoZSBzdGF0ZSB3aWxsIGFsd2F5cyBiZSBpbiBhIGZpbmFsIHN0YXRlIGF0\nIGFsbCBvdGhlciBwb2ludHMgb2YgdGltZS4KICAgICogTm8gYXR0ZW1wdCB3\naWxsIGJlIG1hZGUgdG8gY2hhbmdlIHN0YXRlIHdoaWxlIGEgdHJhbnNpdGlv\nbiBzdGF0ZSBpcyBjdXJyZW50bHkgaW4gcHJvZ3Jlc3MuCiAqLwpmaW5hbCBj\nbGFzcyBTdGF0ZU1hbmFnZXIgewogIHB1YmxpYyBzdGF0aWMgZmluYWwgbG9u\nZyBXQUlUX1RJTUVfRk9SX1RSQU5TSUVOVF9TVEFURV9DSEFOR0UgPQogICAg\nICBMb25nLmdldExvbmcoIldBSVRfVElNRV9GT1JfVFJBTlNJRU5UX1NUQVRF\nX0NIQU5HRSIsIDE2MDAwTCk7CgogIHN0YXRpYyBlbnVtIFN0YXRlIHsKICAg\nICAgICBTVEFSVElORyh0cnVlLCBmYWxzZSwgdHJ1ZSksCiAgICAgICAgU1RB\nUlRFRCh0cnVlLCBmYWxzZSwgZmFsc2UpLAogICAgICAgIFNUT1BQSU5HKGZh\nbHNlLCBmYWxzZSwgdHJ1ZSksCiAgICAgICAgU1RPUFBFRChmYWxzZSwgZmFs\nc2UsIGZhbHNlKSwKICAgICAgICBDTE9TSU5HKGZhbHNlLCB0cnVlLCB0cnVl\nKSwKICAgICAgICBDTE9TRUQoZmFsc2UsIHRydWUsIGZhbHNlKTsKCiAgICAg\nICAgcHJpdmF0ZSBmaW5hbCBib29sZWFuIGluU3RhcnRNb2RlOwogICAgICAg\nIHByaXZhdGUgZmluYWwgYm9vbGVhbiBpbkNsb3NlTW9kZTsKICAgICAgICBw\ncml2YXRlIGZpbmFsIGJvb2xlYW4gaW5UcmFuc2l0aW9uTW9kZTsKCiAgICAg\nICAgU3RhdGUoYm9vbGVhbiBpblN0YXJ0TW9kZSwgYm9vbGVhbiBpbkNsb3Nl\nTW9kZSwgYm9vbGVhbiBpblRyYW5zaXRpb25Nb2RlKSB7CiAgICAgICAgICAg\nIHRoaXMuaW5TdGFydE1vZGUgPSBpblN0YXJ0TW9kZTsKICAgICAgICAgICAg\ndGhpcy5pbkNsb3NlTW9kZSA9IGluQ2xvc2VNb2RlOwogICAgICAgICAgICB0\naGlzLmluVHJhbnNpdGlvbk1vZGUgPSBpblRyYW5zaXRpb25Nb2RlOwogICAg\nICAgIH0KCiAgICAgICAgcHVibGljIGJvb2xlYW4gaXNJblN0YXJ0TW9kZSgp\nIHsKICAgICAgICAgICAgcmV0dXJuIGluU3RhcnRNb2RlOwogICAgICAgIH0K\nCiAgICAgICAgcHVibGljIGJvb2xlYW4gaXNJbkNsb3NlTW9kZSgpIHsKICAg\nICAgICAgICAgcmV0dXJuIGluQ2xvc2VNb2RlOwogICAgICAgIH0KCiAgICAg\nICAgcHVibGljIGJvb2xlYW4gaXNJblRyYW5zaXRpb25Nb2RlKCkgewogICAg\nICAgICAgICByZXR1cm4gaW5UcmFuc2l0aW9uTW9kZTsKICAgICAgICB9CiAg\nICB9CgogICAgLy8gRE8gTk9UIGRvIHNvbWV0aGluZyBzaWxseSBsaWtlIFN0\nYXRlLlNUQVJUSU5HID09IGN1cnJlbnRTdGF0ZSB8fCBTdGF0ZS5TVEFSVEVE\nID09IGN1cnJlbnRTdGF0ZSwgZXRjICEKICAgIHByaXZhdGUgdm9sYXRpbGUg\nU3RhdGUgY3VycmVudFN0YXRlOwogICAgcHJpdmF0ZSBmaW5hbCBPYmplY3Qg\nbG9ja09iamVjdDsKCiAgICBTdGF0ZU1hbmFnZXIoU3RhdGUgc3RhcnRTdGFy\ndCwgT2JqZWN0IGxvY2tPYmplY3QpewogICAgICAgIHRoaXMuY3VycmVudFN0\nYXRlID0gc3RhcnRTdGFydDsKICAgICAgICB0aGlzLmxvY2tPYmplY3QgPSBs\nb2NrT2JqZWN0OwogICAgfQoKICAgIFN0YXRlIGdldEN1cnJlbnRTdGF0ZSgp\nIHsKICAgICAgICByZXR1cm4gY3VycmVudFN0YXRlOwogICAgfQoKICAgIGJv\nb2xlYW4gaXNTdGFydGVkKCkgewogICAgICAgIHJldHVybiBTdGF0ZS5TVEFS\nVEVEID09IGN1cnJlbnRTdGF0ZTsKICAgIH0KCiAgICBib29sZWFuIGlzSW5T\ndGFydE1vZGUoKSB7CiAgICAgICAgcmV0dXJuIGN1cnJlbnRTdGF0ZS5pc0lu\nU3RhcnRNb2RlKCk7CiAgICB9CgogICAgYm9vbGVhbiBpc1N0b3BwZWQoKSB7\nCiAgICAgICAgcmV0dXJuIFN0YXRlLlNUT1BQRUQgPT0gY3VycmVudFN0YXRl\nOwogICAgfQoKICAgIGJvb2xlYW4gaXNDbG9zZWQoKSB7CiAgICAgICAgcmV0\ndXJuIFN0YXRlLkNMT1NFRCA9PSBjdXJyZW50U3RhdGU7CiAgICB9CgogICAg\nLy8gTk9UIGxvY2tpbmcgZXhwbGljaXRseSA6IHR5cGljYWxseSwgYWxyZWFk\neSBsb2NrZWQgb24gbG9ja09iamVjdAogICAgYm9vbGVhbiBpc0luQ2xvc2VN\nb2RlKCkgewogICAgICAgIHJldHVybiBjdXJyZW50U3RhdGUuaXNJbkNsb3Nl\nTW9kZSgpOwogICAgfQoKICAgIC8vIE5PVCBsb2NraW5nIGV4cGxpY2l0bHkg\nOiB0eXBpY2FsbHksIGFscmVhZHkgbG9ja2VkIG9uIGxvY2tPYmplY3QKICAg\nIGJvb2xlYW4gaXNUcmFuc2l0aW9uU3RhdGUoKSB7CiAgICAgICAgcmV0dXJu\nIGN1cnJlbnRTdGF0ZS5pc0luVHJhbnNpdGlvbk1vZGUoKTsKICAgIH0KCiAg\nICB2b2lkIHNldEN1cnJlbnRTdGF0ZShTdGF0ZSBjdXJyZW50U3RhdGUpIHsK\nICAgICAgICB0aGlzLmN1cnJlbnRTdGF0ZSA9IGN1cnJlbnRTdGF0ZTsKICAg\nIH0KCiAgICAvLyBOT1QgbG9ja2luZyBleHBsaWNpdGx5IDogTVVTVCBiZSBh\nbHJlYWR5IGxvY2tlZCBvbiBsb2NrT2JqZWN0CiAgICB2b2lkIHdhaXRGb3JU\ncmFuc2llbnRTdGF0ZUNoYW5nZShsb25nIHRpbWVvdXQsIExvZ2dlciBsb2dn\nZXIpIHRocm93cyBKTVNFeGNlcHRpb24gewogICAgICAgIGZpbmFsIGxvbmcg\nc3RhcnRUaW1lID0gU2Vzc2lvbkltcGwuY3VycmVudFRpbWVNaWxsaXMoKTsK\nICAgICAgICBmaW5hbCBpbnQgV0FJVF9VTklUID0gMTAwOwogICAgICAgIGlu\ndCByZXRyeUNvdW50ID0gKGludCkodGltZW91dCAvIFdBSVRfVU5JVCk7Cgog\nICAgICAgIHdoaWxlIChpc1RyYW5zaXRpb25TdGF0ZSgpKSB7CiAgICAgICAg\nICAgIHRyeSB7CiAgICAgICAgICAgICAgICAvLyBJZiB3ZSBhcmUgTk9UIGxv\nY2tlZCBvbiBsb2NrT2JqZWN0LCB0aGlzIHdpbGwgdGhyb3cgZXhjZXB0aW9u\nICEKICAgICAgICAgICAgICAgIGxvY2tPYmplY3Qud2FpdChXQUlUX1VOSVQp\nOwogICAgICAgICAgICB9IGNhdGNoIChJbnRlcnJ1cHRlZEV4Y2VwdGlvbiBl\nKSB7CiAgICAgICAgICAgICAgICAvLyBidWJibGUgaXQgdXAuCiAgICAgICAg\nICAgICAgICBKTVNFeGNlcHRpb24gamV4ID0gbmV3IEpNU0V4Y2VwdGlvbigi\nVGhyZWFkIGludGVycnVwdGVkIC4uLiAiICsgZSk7CiAgICAgICAgICAgICAg\nICBqZXguc2V0TGlua2VkRXhjZXB0aW9uKGUpOwogICAgICAgICAgICAgICAg\ndGhyb3cgamV4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHJ5Q291\nbnQgLS07CiAgICAgICAgICAgIGlmIChyZXRyeUNvdW50IDw9IDApIHsKICAg\nICAgICAgICAgICAgIGlmIChsb2dnZXIuaXNEZWJ1Z0VuYWJsZWQoKSkgRGVi\ndWdVdGlsLmR1bXBBbGxTdGFja3RyYWNlcyhsb2dnZXIpOwogICAgICAgICAg\nICAgICAgLy8gdGhyb3cgbmV3IEpNU0V4Y2VwdGlvbigid2FpdCB0aW1lb3V0\nICIgKyAoU2Vzc2lvbkltcGwuY3VycmVudFRpbWVNaWxsaXMoKSAtIHN0YXJ0\nVGltZSkpOwogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpNU0V4Y2VwdGlv\nbigid2FpdCBmb3IgIiArIChTZXNzaW9uSW1wbC5jdXJyZW50VGltZU1pbGxp\ncygpIC0gc3RhcnRUaW1lKSArICIgdGltZW91dCIpOwogICAgICAgICAgICB9\nCiAgICAgICAgfQogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIFN0\ncmluZyB0b1N0cmluZygpIHsKICAgICAgICBmaW5hbCBTdHJpbmdCdWlsZGVy\nIHNiID0gbmV3IFN0cmluZ0J1aWxkZXIoKTsKICAgICAgICBzYi5hcHBlbmQo\nIlN0YXRlTWFuYWdlciIpOwogICAgICAgIHNiLmFwcGVuZCgie2N1cnJlbnRT\ndGF0ZT0iKS5hcHBlbmQoY3VycmVudFN0YXRlKTsKICAgICAgICBzYi5hcHBl\nbmQoJ30nKTsKICAgICAgICByZXR1cm4gc2IudG9TdHJpbmcoKTsKICAgIH0K\nfQo=\n","encoding":"base64"}

