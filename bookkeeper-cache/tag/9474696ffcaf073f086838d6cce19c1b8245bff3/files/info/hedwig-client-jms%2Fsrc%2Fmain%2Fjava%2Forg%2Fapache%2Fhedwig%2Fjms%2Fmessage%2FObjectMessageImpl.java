{"sha":"ba26c4c1b55a1b6e6a441ef4bc33a6841f520d1a","node_id":"MDQ6QmxvYjE1NzU5NTY6YmEyNmM0YzFiNTVhMWI2ZTZhNDQxZWY0YmMzM2E2ODQxZjUyMGQxYQ==","size":6110,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/ba26c4c1b55a1b6e6a441ef4bc33a6841f520d1a","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5qbXMubWVzc2FnZTsKCmltcG9ydCBj\nb20uZ29vZ2xlLnByb3RvYnVmLkJ5dGVTdHJpbmc7CmltcG9ydCBvcmcuYXBh\nY2hlLmhlZHdpZy5qbXMuU2Vzc2lvbkltcGw7CmltcG9ydCBvcmcuYXBhY2hl\nLmhlZHdpZy5wcm90b2NvbC5QdWJTdWJQcm90b2NvbDsKCmltcG9ydCBqYXZh\neC5qbXMuSk1TRXhjZXB0aW9uOwppbXBvcnQgamF2YXguam1zLk1lc3NhZ2U7\nCmltcG9ydCBqYXZheC5qbXMuTWVzc2FnZU5vdFdyaXRlYWJsZUV4Y2VwdGlv\nbjsKaW1wb3J0IGphdmF4Lmptcy5PYmplY3RNZXNzYWdlOwppbXBvcnQgamF2\nYS5pby5CeXRlQXJyYXlJbnB1dFN0cmVhbTsKaW1wb3J0IGphdmEuaW8uQnl0\nZUFycmF5T3V0cHV0U3RyZWFtOwppbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlv\nbjsKaW1wb3J0IGphdmEuaW8uT2JqZWN0SW5wdXRTdHJlYW07CmltcG9ydCBq\nYXZhLmlvLk9iamVjdE91dHB1dFN0cmVhbTsKaW1wb3J0IGphdmEuaW8uU2Vy\naWFsaXphYmxlOwppbXBvcnQgamF2YS51dGlsLk1hcDsKCi8qKgogKiByZWFk\nL3dyaXRlIHNlcmlhbGl6YWJsZSBqYXZhIG9iamVjdCAuLi4KICoKICovCnB1\nYmxpYyBjbGFzcyBPYmplY3RNZXNzYWdlSW1wbCBleHRlbmRzIE1lc3NhZ2VJ\nbXBsIGltcGxlbWVudHMgT2JqZWN0TWVzc2FnZSB7CiAgICBwcml2YXRlIFNl\ncmlhbGl6YWJsZSBwYXlsb2FkOwogICAgcHJpdmF0ZSBib29sZWFuIHJlYWRN\nb2RlOwoKICAgIHB1YmxpYyBPYmplY3RNZXNzYWdlSW1wbChTZXNzaW9uSW1w\nbCBzZXNzaW9uLCBTZXJpYWxpemFibGUgcGF5bG9hZCkgewogICAgICAgIHN1\ncGVyKHNlc3Npb24pOwogICAgICAgIHRoaXMucGF5bG9hZCA9IHBheWxvYWQ7\nCiAgICAgICAgdGhpcy5yZWFkTW9kZSA9IGZhbHNlOwogICAgfQoKICAgIHB1\nYmxpYyBPYmplY3RNZXNzYWdlSW1wbChTZXNzaW9uSW1wbCBzZXNzaW9uLCBP\nYmplY3RNZXNzYWdlSW1wbCBtZXNzYWdlLCBTdHJpbmcgc291cmNlVG9waWNO\nYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBzdWJz\nY3JpYmVySWQpIHRocm93cyBKTVNFeGNlcHRpb24gewogICAgICAgIHN1cGVy\nKHNlc3Npb24sIChNZXNzYWdlSW1wbCkgbWVzc2FnZSwgc291cmNlVG9waWNO\nYW1lLCBzdWJzY3JpYmVySWQpOwoKICAgICAgICB0aGlzLnBheWxvYWQgPSBj\nb3B5U2VyaWFsaXphYmxlKG1lc3NhZ2UuZ2V0T2JqZWN0KCkpOwogICAgICAg\nIHRoaXMucmVhZE1vZGUgPSBtZXNzYWdlLnJlYWRNb2RlOwogICAgfQoKICAg\nIHByaXZhdGUgU2VyaWFsaXphYmxlIGNvcHlTZXJpYWxpemFibGUoU2VyaWFs\naXphYmxlIG9iamVjdCkgdGhyb3dzIEpNU0V4Y2VwdGlvbiB7CiAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgQnl0ZUFycmF5T3V0cHV0U3RyZWFtIGJhb3Mg\nPSBuZXcgQnl0ZUFycmF5T3V0cHV0U3RyZWFtKDEyOCk7CiAgICAgICAgICAg\nIE9iamVjdE91dHB1dFN0cmVhbSBvb3MgPSBuZXcgT2JqZWN0T3V0cHV0U3Ry\nZWFtKGJhb3MpOwogICAgICAgICAgICBvb3Mud3JpdGVPYmplY3Qob2JqZWN0\nKTsKICAgICAgICAgICAgb29zLmZsdXNoKCk7CiAgICAgICAgICAgIG9vcy5j\nbG9zZSgpOwogICAgICAgICAgICBiYW9zLmZsdXNoKCk7CiAgICAgICAgICAg\nIGJhb3MuY2xvc2UoKTsKCiAgICAgICAgICAgIE9iamVjdElucHV0U3RyZWFt\nIG9pcyA9IG5ldyBPYmplY3RJbnB1dFN0cmVhbShuZXcgQnl0ZUFycmF5SW5w\ndXRTdHJlYW0oYmFvcy50b0J5dGVBcnJheSgpKSk7CiAgICAgICAgICAgIHJl\ndHVybiAoU2VyaWFsaXphYmxlKSBvaXMucmVhZE9iamVjdCgpOwogICAgICAg\nIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGUpewogICAgICAgICAgICBKTVNFeGNl\ncHRpb24gam1zRXggPSBuZXcgamF2YXguam1zLklsbGVnYWxTdGF0ZUV4Y2Vw\ndGlvbigiVW5leHBlY3RlZCBleGNlcHRpb24iKTsKICAgICAgICAgICAgam1z\nRXguc2V0TGlua2VkRXhjZXB0aW9uKGUpOwogICAgICAgICAgICB0aHJvdyBq\nbXNFeDsKICAgICAgICB9IGNhdGNoIChDbGFzc05vdEZvdW5kRXhjZXB0aW9u\nIGUpIHsKICAgICAgICAgICAgSk1TRXhjZXB0aW9uIGptc0V4ID0gbmV3IGph\ndmF4Lmptcy5JbGxlZ2FsU3RhdGVFeGNlcHRpb24oIlVuZXhwZWN0ZWQgZXhj\nZXB0aW9uIik7CiAgICAgICAgICAgIGptc0V4LnNldExpbmtlZEV4Y2VwdGlv\nbihlKTsKICAgICAgICAgICAgdGhyb3cgam1zRXg7CiAgICAgICAgfQogICAg\nfQoKICAgIC8vIFRvIGNsb25lIGEgbWVzc2FnZSBmcm9tIGEgT2JqZWN0TWVz\nc2FnZSB3aGljaCBpcyBOT1QgT2JqZWN0TWVzc2FnZUltcGwKICAgIC8vIENo\nYW5naW5nIG9yZGVyIG9mIHBhcmFtZXRlciB0byBOT1QgYWNjaWRlbnRhbGx5\nIGNsYXNoIHdpdGggdGhlIGNvbnN0cnVjdG9yIGFib3ZlLgogICAgLy8gVGhp\ncyBpcyBtaWRseSBjb25mdXNpbmcsIGJ1dCBoZWxwcyBhIGxvdCBpbiBwcmV2\nZW50aW5nIGFjY2lkZW50YWwgYnVncyAhCiAgICBwdWJsaWMgT2JqZWN0TWVz\nc2FnZUltcGwoT2JqZWN0TWVzc2FnZSBtZXNzYWdlLCBTZXNzaW9uSW1wbCBz\nZXNzaW9uKSB0aHJvd3MgSk1TRXhjZXB0aW9uIHsKICAgICAgICBzdXBlcigo\nTWVzc2FnZSkgbWVzc2FnZSwgc2Vzc2lvbik7CgogICAgICAgIGlmIChtZXNz\nYWdlIGluc3RhbmNlb2YgT2JqZWN0TWVzc2FnZUltcGwpIHsKICAgICAgICAg\nICAgdGhyb3cgbmV3IEpNU0V4Y2VwdGlvbigiQ29kaW5nIGJ1ZyAtIHNob3Vs\nZCB1c2UgdGhpcyBjb25zdHJ1Y3RvciBPTkxZIGZvciBub24gT2JqZWN0TWVz\nc2FnZUltcGwgbWVzc2FnZXMiKTsKICAgICAgICB9CgoKICAgICAgICB0aGlz\nLnBheWxvYWQgPSBtZXNzYWdlLmdldE9iamVjdCgpOwogICAgICAgIHRoaXMu\ncmVhZE1vZGUgPSBmYWxzZTsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0TWVz\nc2FnZUltcGwoU2Vzc2lvbkltcGwgc2Vzc2lvbiwgUHViU3ViUHJvdG9jb2wu\nTWVzc2FnZSBtZXNzYWdlLCBNYXA8U3RyaW5nLCBPYmplY3Q+IHByb3BlcnRp\nZXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIHNvdXJj\nZVRvcGljTmFtZSwgU3RyaW5nIHN1YnNjcmliZXJJZCwgUnVubmFibGUgYWNr\nUnVubmFibGUpIHRocm93cyBKTVNFeGNlcHRpb24gewogICAgICAgIHN1cGVy\nKHNlc3Npb24sIG1lc3NhZ2UsIHByb3BlcnRpZXMsIHNvdXJjZVRvcGljTmFt\nZSwgc3Vic2NyaWJlcklkLCBhY2tSdW5uYWJsZSk7CgogICAgICAgIHRyeSB7\nCiAgICAgICAgICAgIHRoaXMucGF5bG9hZCA9IGhhc0JvZHlGcm9tUHJvcGVy\ndGllcygpID8KICAgICAgICAgICAgICAgIChTZXJpYWxpemFibGUpIE1lc3Nh\nZ2VVdGlsLmJ5dGVzVG9PYmplY3QobWVzc2FnZS5nZXRCb2R5KCkudG9CeXRl\nQXJyYXkoKSkgOiBudWxsOwogICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9u\nIGUpIHsKICAgICAgICAgICAgSk1TRXhjZXB0aW9uIGV4ID0gbmV3IEpNU0V4\nY2VwdGlvbigiVW5hYmxlIHRvIHJlYWQgbWVzc2FnZSBkYXRhIC4uICIgKyBl\nKTsKICAgICAgICAgICAgZXguc2V0TGlua2VkRXhjZXB0aW9uKGUpOwogICAg\nICAgICAgICB0aHJvdyBleDsKICAgICAgICB9CiAgICAgICAgdGhpcy5yZWFk\nTW9kZSA9IHRydWU7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwcm90ZWN0\nZWQgTWVzc2FnZVV0aWwuU3VwcG9ydGVkTWVzc2FnZVR5cGVzIGdldEptc01l\nc3NhZ2VUeXBlKCkgewogICAgICAgIHJldHVybiBNZXNzYWdlVXRpbC5TdXBw\nb3J0ZWRNZXNzYWdlVHlwZXMuT0JKRUNUOwogICAgfQoKICAgIEBPdmVycmlk\nZQogICAgcHVibGljIFB1YlN1YlByb3RvY29sLk1lc3NhZ2UgZ2VuZXJhdGVI\nZWR3aWdNZXNzYWdlKCkgdGhyb3dzIEpNU0V4Y2VwdGlvbiB7CiAgICAgICAg\nUHViU3ViUHJvdG9jb2wuTWVzc2FnZS5CdWlsZGVyIGJ1aWxkZXIgPSBQdWJT\ndWJQcm90b2NvbC5NZXNzYWdlLm5ld0J1aWxkZXIoKTsKICAgICAgICBzdXBl\nci5wb3B1bGF0ZUJ1aWxkZXJXaXRoSGVhZGVycyhidWlsZGVyKTsKCiAgICAg\nICAgLy8gTm93IHNldCBib2R5IGFuZCB0eXBlLgogICAgICAgIHRyeSB7CiAg\nICAgICAgICAgIGlmICghIGlzQm9keUVtcHR5KCkpIGJ1aWxkZXIuc2V0Qm9k\neShCeXRlU3RyaW5nLmNvcHlGcm9tKE1lc3NhZ2VVdGlsLm9iamVjdFRvQnl0\nZXModGhpcy5wYXlsb2FkKSkpOwogICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0\naW9uIGUpIHsKICAgICAgICAgICAgSk1TRXhjZXB0aW9uIGV4ID0gbmV3IEpN\nU0V4Y2VwdGlvbigiVW5hYmxlIHRvIHJlYWQgbWVzc2FnZSBkYXRhIC4uICIg\nKyBlKTsKICAgICAgICAgICAgZXguc2V0TGlua2VkRXhjZXB0aW9uKGUpOwog\nICAgICAgICAgICB0aHJvdyBleDsKICAgICAgICB9CgogICAgICAgIHJldHVy\nbiBidWlsZGVyLmJ1aWxkKCk7CiAgICB9CgogICAgcHJvdGVjdGVkIGJvb2xl\nYW4gaXNCb2R5RW1wdHkoKXsKICAgICAgICByZXR1cm4gbnVsbCA9PSB0aGlz\nLnBheWxvYWQ7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9p\nZCBzZXRPYmplY3QoU2VyaWFsaXphYmxlIHBheWxvYWQpIHRocm93cyBKTVNF\neGNlcHRpb24gewogICAgICAgIGlmIChyZWFkTW9kZSkgdGhyb3cgbmV3IE1l\nc3NhZ2VOb3RXcml0ZWFibGVFeGNlcHRpb24oIk1lc3NhZ2Ugbm90IHdyaXRh\nYmxlIik7CiAgICAgICAgdGhpcy5wYXlsb2FkID0gcGF5bG9hZDsKICAgIH0K\nCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBTZXJpYWxpemFibGUgZ2V0T2Jq\nZWN0KCkgdGhyb3dzIEpNU0V4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIHBh\neWxvYWQ7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBj\nbGVhckJvZHkoKSB0aHJvd3MgSk1TRXhjZXB0aW9uIHsKICAgICAgICBzdXBl\nci5jbGVhckJvZHkoKTsKICAgICAgICAvLyBhbGxvdyByZWFkIGFuZCB3cml0\nZS4KICAgICAgICB0aGlzLnBheWxvYWQgPSBudWxsOwogICAgICAgIHRoaXMu\ncmVhZE1vZGUgPSBmYWxzZTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1\nYmxpYyB2b2lkIHJlc2V0KCkgdGhyb3dzIEpNU0V4Y2VwdGlvbiB7CiAgICAg\nICAgaWYgKHRoaXMucmVhZE1vZGUpIHJldHVybiA7CiAgICAgICAgdGhpcy5y\nZWFkTW9kZSA9IHRydWU7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBPYmpl\nY3RNZXNzYWdlSW1wbCBjcmVhdGVDbG9uZShTZXNzaW9uSW1wbCBzZXNzaW9u\nLCBTdHJpbmcgc291cmNlVG9waWNOYW1lLCBTdHJpbmcgc3Vic2NyaWJlcklk\nKQogICAgICAgIHRocm93cyBKTVNFeGNlcHRpb24gewoKICAgICAgICByZXR1\ncm4gbmV3IE9iamVjdE1lc3NhZ2VJbXBsKHNlc3Npb24sIHRoaXMsIHNvdXJj\nZVRvcGljTmFtZSwgc3Vic2NyaWJlcklkKTsKICAgIH0KfQo=\n","encoding":"base64"}

