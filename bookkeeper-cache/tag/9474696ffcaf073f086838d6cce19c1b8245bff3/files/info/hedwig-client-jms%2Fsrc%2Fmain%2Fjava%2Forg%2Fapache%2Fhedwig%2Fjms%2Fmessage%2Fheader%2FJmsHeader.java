{"sha":"c4b51233e6c750c1d0ba5d5c52f9ff5573f01e9c","node_id":"MDQ6QmxvYjE1NzU5NTY6YzRiNTEyMzNlNmM3NTBjMWQwYmE1ZDVjNTJmOWZmNTU3M2YwMWU5Yw==","size":39120,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/c4b51233e6c750c1d0ba5d5c52f9ff5573f01e9c","content":"Ly8gR2VuZXJhdGVkIGJ5IHRoZSBwcm90b2NvbCBidWZmZXIgY29tcGlsZXIu\nICBETyBOT1QgRURJVCEKLy8gc291cmNlOiBzcmMvbWFpbi9wcm90b2J1Zi9K\nbXNIZWFkZXIucHJvdG8KCnBhY2thZ2Ugb3JnLmFwYWNoZS5oZWR3aWcuam1z\nLm1lc3NhZ2UuaGVhZGVyOwoKcHVibGljIGZpbmFsIGNsYXNzIEptc0hlYWRl\nciB7CiAgcHJpdmF0ZSBKbXNIZWFkZXIoKSB7fQogIHB1YmxpYyBzdGF0aWMg\ndm9pZCByZWdpc3RlckFsbEV4dGVuc2lvbnMoCiAgICAgIGNvbS5nb29nbGUu\ncHJvdG9idWYuRXh0ZW5zaW9uUmVnaXN0cnkgcmVnaXN0cnkpIHsKICB9CiAg\ncHVibGljIGVudW0gUHJvdG9jb2xWZXJzaW9uCiAgICAgIGltcGxlbWVudHMg\nY29tLmdvb2dsZS5wcm90b2J1Zi5Qcm90b2NvbE1lc3NhZ2VFbnVtIHsKICAg\nIFZFUlNJT05fT05FKDAsIDEpLAogICAgOwogICAgCiAgICBwdWJsaWMgc3Rh\ndGljIGZpbmFsIGludCBWRVJTSU9OX09ORV9WQUxVRSA9IDE7CiAgICAKICAg\nIAogICAgcHVibGljIGZpbmFsIGludCBnZXROdW1iZXIoKSB7IHJldHVybiB2\nYWx1ZTsgfQogICAgCiAgICBwdWJsaWMgc3RhdGljIFByb3RvY29sVmVyc2lv\nbiB2YWx1ZU9mKGludCB2YWx1ZSkgewogICAgICBzd2l0Y2ggKHZhbHVlKSB7\nCiAgICAgICAgY2FzZSAxOiByZXR1cm4gVkVSU0lPTl9PTkU7CiAgICAgICAg\nZGVmYXVsdDogcmV0dXJuIG51bGw7CiAgICAgIH0KICAgIH0KICAgIAogICAg\ncHVibGljIHN0YXRpYyBjb20uZ29vZ2xlLnByb3RvYnVmLkludGVybmFsLkVu\ndW1MaXRlTWFwPFByb3RvY29sVmVyc2lvbj4KICAgICAgICBpbnRlcm5hbEdl\ndFZhbHVlTWFwKCkgewogICAgICByZXR1cm4gaW50ZXJuYWxWYWx1ZU1hcDsK\nICAgIH0KICAgIHByaXZhdGUgc3RhdGljIGNvbS5nb29nbGUucHJvdG9idWYu\nSW50ZXJuYWwuRW51bUxpdGVNYXA8UHJvdG9jb2xWZXJzaW9uPgogICAgICAg\nIGludGVybmFsVmFsdWVNYXAgPQogICAgICAgICAgbmV3IGNvbS5nb29nbGUu\ncHJvdG9idWYuSW50ZXJuYWwuRW51bUxpdGVNYXA8UHJvdG9jb2xWZXJzaW9u\nPigpIHsKICAgICAgICAgICAgcHVibGljIFByb3RvY29sVmVyc2lvbiBmaW5k\nVmFsdWVCeU51bWJlcihpbnQgbnVtYmVyKSB7CiAgICAgICAgICAgICAgcmV0\ndXJuIFByb3RvY29sVmVyc2lvbi52YWx1ZU9mKG51bWJlcik7CiAgICAgICAg\nICAgIH0KICAgICAgICAgIH07CiAgICAKICAgIHB1YmxpYyBmaW5hbCBjb20u\nZ29vZ2xlLnByb3RvYnVmLkRlc2NyaXB0b3JzLkVudW1WYWx1ZURlc2NyaXB0\nb3IKICAgICAgICBnZXRWYWx1ZURlc2NyaXB0b3IoKSB7CiAgICAgIHJldHVy\nbiBnZXREZXNjcmlwdG9yKCkuZ2V0VmFsdWVzKCkuZ2V0KGluZGV4KTsKICAg\nIH0KICAgIHB1YmxpYyBmaW5hbCBjb20uZ29vZ2xlLnByb3RvYnVmLkRlc2Ny\naXB0b3JzLkVudW1EZXNjcmlwdG9yCiAgICAgICAgZ2V0RGVzY3JpcHRvckZv\nclR5cGUoKSB7CiAgICAgIHJldHVybiBnZXREZXNjcmlwdG9yKCk7CiAgICB9\nCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGNvbS5nb29nbGUucHJvdG9idWYu\nRGVzY3JpcHRvcnMuRW51bURlc2NyaXB0b3IKICAgICAgICBnZXREZXNjcmlw\ndG9yKCkgewogICAgICByZXR1cm4gb3JnLmFwYWNoZS5oZWR3aWcuam1zLm1l\nc3NhZ2UuaGVhZGVyLkptc0hlYWRlci5nZXREZXNjcmlwdG9yKCkuZ2V0RW51\nbVR5cGVzKCkuZ2V0KDApOwogICAgfQogICAgCiAgICBwcml2YXRlIHN0YXRp\nYyBmaW5hbCBQcm90b2NvbFZlcnNpb25bXSBWQUxVRVMgPSB7CiAgICAgIFZF\nUlNJT05fT05FLCAKICAgIH07CiAgICAKICAgIHB1YmxpYyBzdGF0aWMgUHJv\ndG9jb2xWZXJzaW9uIHZhbHVlT2YoCiAgICAgICAgY29tLmdvb2dsZS5wcm90\nb2J1Zi5EZXNjcmlwdG9ycy5FbnVtVmFsdWVEZXNjcmlwdG9yIGRlc2MpIHsK\nICAgICAgaWYgKGRlc2MuZ2V0VHlwZSgpICE9IGdldERlc2NyaXB0b3IoKSkg\newogICAgICAgIHRocm93IG5ldyBqYXZhLmxhbmcuSWxsZWdhbEFyZ3VtZW50\nRXhjZXB0aW9uKAogICAgICAgICAgIkVudW1WYWx1ZURlc2NyaXB0b3IgaXMg\nbm90IGZvciB0aGlzIHR5cGUuIik7CiAgICAgIH0KICAgICAgcmV0dXJuIFZB\nTFVFU1tkZXNjLmdldEluZGV4KCldOwogICAgfQogICAgCiAgICBwcml2YXRl\nIGZpbmFsIGludCBpbmRleDsKICAgIHByaXZhdGUgZmluYWwgaW50IHZhbHVl\nOwogICAgCiAgICBwcml2YXRlIFByb3RvY29sVmVyc2lvbihpbnQgaW5kZXgs\nIGludCB2YWx1ZSkgewogICAgICB0aGlzLmluZGV4ID0gaW5kZXg7CiAgICAg\nIHRoaXMudmFsdWUgPSB2YWx1ZTsKICAgIH0KICAgIAogICAgLy8gQEBwcm90\nb2NfaW5zZXJ0aW9uX3BvaW50KGVudW1fc2NvcGU6SGVkd2lnLkptcy5IZWFk\nZXIuUHJvdG9jb2xWZXJzaW9uKQogIH0KICAKICBwdWJsaWMgaW50ZXJmYWNl\nIEptc1ZhbHVlT3JCdWlsZGVyCiAgICAgIGV4dGVuZHMgY29tLmdvb2dsZS5w\ncm90b2J1Zi5NZXNzYWdlT3JCdWlsZGVyIHsKICAgIAogICAgLy8gcmVxdWly\nZWQgLkhlZHdpZy5KbXMuSGVhZGVyLkptc1ZhbHVlLlZhbHVlVHlwZSB0eXBl\nID0gMTsKICAgIGJvb2xlYW4gaGFzVHlwZSgpOwogICAgb3JnLmFwYWNoZS5o\nZWR3aWcuam1zLm1lc3NhZ2UuaGVhZGVyLkptc0hlYWRlci5KbXNWYWx1ZS5W\nYWx1ZVR5cGUgZ2V0VHlwZSgpOwogICAgCiAgICAvLyBvcHRpb25hbCBib29s\nIGJvb2xlYW5WYWx1ZSA9IDI7CiAgICBib29sZWFuIGhhc0Jvb2xlYW5WYWx1\nZSgpOwogICAgYm9vbGVhbiBnZXRCb29sZWFuVmFsdWUoKTsKICAgIAogICAg\nLy8gb3B0aW9uYWwgc2ludDMyIGJ5dGVWYWx1ZSA9IDM7CiAgICBib29sZWFu\nIGhhc0J5dGVWYWx1ZSgpOwogICAgaW50IGdldEJ5dGVWYWx1ZSgpOwogICAg\nCiAgICAvLyBvcHRpb25hbCBzaW50MzIgc2hvcnRWYWx1ZSA9IDQ7CiAgICBi\nb29sZWFuIGhhc1Nob3J0VmFsdWUoKTsKICAgIGludCBnZXRTaG9ydFZhbHVl\nKCk7CiAgICAKICAgIC8vIG9wdGlvbmFsIHNpbnQzMiBpbnRWYWx1ZSA9IDU7\nCiAgICBib29sZWFuIGhhc0ludFZhbHVlKCk7CiAgICBpbnQgZ2V0SW50VmFs\ndWUoKTsKICAgIAogICAgLy8gb3B0aW9uYWwgc2ludDY0IGxvbmdWYWx1ZSA9\nIDY7CiAgICBib29sZWFuIGhhc0xvbmdWYWx1ZSgpOwogICAgbG9uZyBnZXRM\nb25nVmFsdWUoKTsKICAgIAogICAgLy8gb3B0aW9uYWwgZmxvYXQgZmxvYXRW\nYWx1ZSA9IDc7CiAgICBib29sZWFuIGhhc0Zsb2F0VmFsdWUoKTsKICAgIGZs\nb2F0IGdldEZsb2F0VmFsdWUoKTsKICAgIAogICAgLy8gb3B0aW9uYWwgZG91\nYmxlIGRvdWJsZVZhbHVlID0gODsKICAgIGJvb2xlYW4gaGFzRG91YmxlVmFs\ndWUoKTsKICAgIGRvdWJsZSBnZXREb3VibGVWYWx1ZSgpOwogICAgCiAgICAv\nLyBvcHRpb25hbCBzdHJpbmcgc3RyaW5nVmFsdWUgPSA5OwogICAgYm9vbGVh\nbiBoYXNTdHJpbmdWYWx1ZSgpOwogICAgU3RyaW5nIGdldFN0cmluZ1ZhbHVl\nKCk7CiAgICAKICAgIC8vIG9wdGlvbmFsIGJ5dGVzIGJ5dGVzVmFsdWUgPSAx\nMDsKICAgIGJvb2xlYW4gaGFzQnl0ZXNWYWx1ZSgpOwogICAgY29tLmdvb2ds\nZS5wcm90b2J1Zi5CeXRlU3RyaW5nIGdldEJ5dGVzVmFsdWUoKTsKICB9CiAg\ncHVibGljIHN0YXRpYyBmaW5hbCBjbGFzcyBKbXNWYWx1ZSBleHRlbmRzCiAg\nICAgIGNvbS5nb29nbGUucHJvdG9idWYuR2VuZXJhdGVkTWVzc2FnZQogICAg\nICBpbXBsZW1lbnRzIEptc1ZhbHVlT3JCdWlsZGVyIHsKICAgIC8vIFVzZSBK\nbXNWYWx1ZS5uZXdCdWlsZGVyKCkgdG8gY29uc3RydWN0LgogICAgcHJpdmF0\nZSBKbXNWYWx1ZShCdWlsZGVyIGJ1aWxkZXIpIHsKICAgICAgc3VwZXIoYnVp\nbGRlcik7CiAgICB9CiAgICBwcml2YXRlIEptc1ZhbHVlKGJvb2xlYW4gbm9J\nbml0KSB7fQogICAgCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBKbXNWYWx1\nZSBkZWZhdWx0SW5zdGFuY2U7CiAgICBwdWJsaWMgc3RhdGljIEptc1ZhbHVl\nIGdldERlZmF1bHRJbnN0YW5jZSgpIHsKICAgICAgcmV0dXJuIGRlZmF1bHRJ\nbnN0YW5jZTsKICAgIH0KICAgIAogICAgcHVibGljIEptc1ZhbHVlIGdldERl\nZmF1bHRJbnN0YW5jZUZvclR5cGUoKSB7CiAgICAgIHJldHVybiBkZWZhdWx0\nSW5zdGFuY2U7CiAgICB9CiAgICAKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwg\nY29tLmdvb2dsZS5wcm90b2J1Zi5EZXNjcmlwdG9ycy5EZXNjcmlwdG9yCiAg\nICAgICAgZ2V0RGVzY3JpcHRvcigpIHsKICAgICAgcmV0dXJuIG9yZy5hcGFj\naGUuaGVkd2lnLmptcy5tZXNzYWdlLmhlYWRlci5KbXNIZWFkZXIuaW50ZXJu\nYWxfc3RhdGljX0hlZHdpZ19KbXNfSGVhZGVyX0ptc1ZhbHVlX2Rlc2NyaXB0\nb3I7CiAgICB9CiAgICAKICAgIHByb3RlY3RlZCBjb20uZ29vZ2xlLnByb3Rv\nYnVmLkdlbmVyYXRlZE1lc3NhZ2UuRmllbGRBY2Nlc3NvclRhYmxlCiAgICAg\nICAgaW50ZXJuYWxHZXRGaWVsZEFjY2Vzc29yVGFibGUoKSB7CiAgICAgIHJl\ndHVybiBvcmcuYXBhY2hlLmhlZHdpZy5qbXMubWVzc2FnZS5oZWFkZXIuSm1z\nSGVhZGVyLmludGVybmFsX3N0YXRpY19IZWR3aWdfSm1zX0hlYWRlcl9KbXNW\nYWx1ZV9maWVsZEFjY2Vzc29yVGFibGU7CiAgICB9CiAgICAKICAgIHB1Ymxp\nYyBlbnVtIFZhbHVlVHlwZQogICAgICAgIGltcGxlbWVudHMgY29tLmdvb2ds\nZS5wcm90b2J1Zi5Qcm90b2NvbE1lc3NhZ2VFbnVtIHsKICAgICAgQk9PTEVB\nTigwLCAxKSwKICAgICAgQllURSgxLCAyKSwKICAgICAgU0hPUlQoMiwgMyks\nCiAgICAgIElOVCgzLCA0KSwKICAgICAgTE9ORyg0LCA1KSwKICAgICAgRkxP\nQVQoNSwgNiksCiAgICAgIERPVUJMRSg2LCA3KSwKICAgICAgU1RSSU5HKDcs\nIDgpLAogICAgICBCWVRFUyg4LCA5KSwKICAgICAgOwogICAgICAKICAgICAg\ncHVibGljIHN0YXRpYyBmaW5hbCBpbnQgQk9PTEVBTl9WQUxVRSA9IDE7CiAg\nICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IEJZVEVfVkFMVUUgPSAyOwog\nICAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBTSE9SVF9WQUxVRSA9IDM7\nCiAgICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IElOVF9WQUxVRSA9IDQ7\nCiAgICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IExPTkdfVkFMVUUgPSA1\nOwogICAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBGTE9BVF9WQUxVRSA9\nIDY7CiAgICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IERPVUJMRV9WQUxV\nRSA9IDc7CiAgICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IFNUUklOR19W\nQUxVRSA9IDg7CiAgICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IEJZVEVT\nX1ZBTFVFID0gOTsKICAgICAgCiAgICAgIAogICAgICBwdWJsaWMgZmluYWwg\naW50IGdldE51bWJlcigpIHsgcmV0dXJuIHZhbHVlOyB9CiAgICAgIAogICAg\nICBwdWJsaWMgc3RhdGljIFZhbHVlVHlwZSB2YWx1ZU9mKGludCB2YWx1ZSkg\newogICAgICAgIHN3aXRjaCAodmFsdWUpIHsKICAgICAgICAgIGNhc2UgMTog\ncmV0dXJuIEJPT0xFQU47CiAgICAgICAgICBjYXNlIDI6IHJldHVybiBCWVRF\nOwogICAgICAgICAgY2FzZSAzOiByZXR1cm4gU0hPUlQ7CiAgICAgICAgICBj\nYXNlIDQ6IHJldHVybiBJTlQ7CiAgICAgICAgICBjYXNlIDU6IHJldHVybiBM\nT05HOwogICAgICAgICAgY2FzZSA2OiByZXR1cm4gRkxPQVQ7CiAgICAgICAg\nICBjYXNlIDc6IHJldHVybiBET1VCTEU7CiAgICAgICAgICBjYXNlIDg6IHJl\ndHVybiBTVFJJTkc7CiAgICAgICAgICBjYXNlIDk6IHJldHVybiBCWVRFUzsK\nICAgICAgICAgIGRlZmF1bHQ6IHJldHVybiBudWxsOwogICAgICAgIH0KICAg\nICAgfQogICAgICAKICAgICAgcHVibGljIHN0YXRpYyBjb20uZ29vZ2xlLnBy\nb3RvYnVmLkludGVybmFsLkVudW1MaXRlTWFwPFZhbHVlVHlwZT4KICAgICAg\nICAgIGludGVybmFsR2V0VmFsdWVNYXAoKSB7CiAgICAgICAgcmV0dXJuIGlu\ndGVybmFsVmFsdWVNYXA7CiAgICAgIH0KICAgICAgcHJpdmF0ZSBzdGF0aWMg\nY29tLmdvb2dsZS5wcm90b2J1Zi5JbnRlcm5hbC5FbnVtTGl0ZU1hcDxWYWx1\nZVR5cGU+CiAgICAgICAgICBpbnRlcm5hbFZhbHVlTWFwID0KICAgICAgICAg\nICAgbmV3IGNvbS5nb29nbGUucHJvdG9idWYuSW50ZXJuYWwuRW51bUxpdGVN\nYXA8VmFsdWVUeXBlPigpIHsKICAgICAgICAgICAgICBwdWJsaWMgVmFsdWVU\neXBlIGZpbmRWYWx1ZUJ5TnVtYmVyKGludCBudW1iZXIpIHsKICAgICAgICAg\nICAgICAgIHJldHVybiBWYWx1ZVR5cGUudmFsdWVPZihudW1iZXIpOwogICAg\nICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgCiAgICAgIHB1Ymxp\nYyBmaW5hbCBjb20uZ29vZ2xlLnByb3RvYnVmLkRlc2NyaXB0b3JzLkVudW1W\nYWx1ZURlc2NyaXB0b3IKICAgICAgICAgIGdldFZhbHVlRGVzY3JpcHRvcigp\nIHsKICAgICAgICByZXR1cm4gZ2V0RGVzY3JpcHRvcigpLmdldFZhbHVlcygp\nLmdldChpbmRleCk7CiAgICAgIH0KICAgICAgcHVibGljIGZpbmFsIGNvbS5n\nb29nbGUucHJvdG9idWYuRGVzY3JpcHRvcnMuRW51bURlc2NyaXB0b3IKICAg\nICAgICAgIGdldERlc2NyaXB0b3JGb3JUeXBlKCkgewogICAgICAgIHJldHVy\nbiBnZXREZXNjcmlwdG9yKCk7CiAgICAgIH0KICAgICAgcHVibGljIHN0YXRp\nYyBmaW5hbCBjb20uZ29vZ2xlLnByb3RvYnVmLkRlc2NyaXB0b3JzLkVudW1E\nZXNjcmlwdG9yCiAgICAgICAgICBnZXREZXNjcmlwdG9yKCkgewogICAgICAg\nIHJldHVybiBvcmcuYXBhY2hlLmhlZHdpZy5qbXMubWVzc2FnZS5oZWFkZXIu\nSm1zSGVhZGVyLkptc1ZhbHVlLmdldERlc2NyaXB0b3IoKS5nZXRFbnVtVHlw\nZXMoKS5nZXQoMCk7CiAgICAgIH0KICAgICAgCiAgICAgIHByaXZhdGUgc3Rh\ndGljIGZpbmFsIFZhbHVlVHlwZVtdIFZBTFVFUyA9IHsKICAgICAgICBCT09M\nRUFOLCBCWVRFLCBTSE9SVCwgSU5ULCBMT05HLCBGTE9BVCwgRE9VQkxFLCBT\nVFJJTkcsIEJZVEVTLCAKICAgICAgfTsKICAgICAgCiAgICAgIHB1YmxpYyBz\ndGF0aWMgVmFsdWVUeXBlIHZhbHVlT2YoCiAgICAgICAgICBjb20uZ29vZ2xl\nLnByb3RvYnVmLkRlc2NyaXB0b3JzLkVudW1WYWx1ZURlc2NyaXB0b3IgZGVz\nYykgewogICAgICAgIGlmIChkZXNjLmdldFR5cGUoKSAhPSBnZXREZXNjcmlw\ndG9yKCkpIHsKICAgICAgICAgIHRocm93IG5ldyBqYXZhLmxhbmcuSWxsZWdh\nbEFyZ3VtZW50RXhjZXB0aW9uKAogICAgICAgICAgICAiRW51bVZhbHVlRGVz\nY3JpcHRvciBpcyBub3QgZm9yIHRoaXMgdHlwZS4iKTsKICAgICAgICB9CiAg\nICAgICAgcmV0dXJuIFZBTFVFU1tkZXNjLmdldEluZGV4KCldOwogICAgICB9\nCiAgICAgIAogICAgICBwcml2YXRlIGZpbmFsIGludCBpbmRleDsKICAgICAg\ncHJpdmF0ZSBmaW5hbCBpbnQgdmFsdWU7CiAgICAgIAogICAgICBwcml2YXRl\nIFZhbHVlVHlwZShpbnQgaW5kZXgsIGludCB2YWx1ZSkgewogICAgICAgIHRo\naXMuaW5kZXggPSBpbmRleDsKICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7\nCiAgICAgIH0KICAgICAgCiAgICAgIC8vIEBAcHJvdG9jX2luc2VydGlvbl9w\nb2ludChlbnVtX3Njb3BlOkhlZHdpZy5KbXMuSGVhZGVyLkptc1ZhbHVlLlZh\nbHVlVHlwZSkKICAgIH0KICAgIAogICAgcHJpdmF0ZSBpbnQgYml0RmllbGQw\nXzsKICAgIC8vIHJlcXVpcmVkIC5IZWR3aWcuSm1zLkhlYWRlci5KbXNWYWx1\nZS5WYWx1ZVR5cGUgdHlwZSA9IDE7CiAgICBwdWJsaWMgc3RhdGljIGZpbmFs\nIGludCBUWVBFX0ZJRUxEX05VTUJFUiA9IDE7CiAgICBwcml2YXRlIG9yZy5h\ncGFjaGUuaGVkd2lnLmptcy5tZXNzYWdlLmhlYWRlci5KbXNIZWFkZXIuSm1z\nVmFsdWUuVmFsdWVUeXBlIHR5cGVfOwogICAgcHVibGljIGJvb2xlYW4gaGFz\nVHlwZSgpIHsKICAgICAgcmV0dXJuICgoYml0RmllbGQwXyAmIDB4MDAwMDAw\nMDEpID09IDB4MDAwMDAwMDEpOwogICAgfQogICAgcHVibGljIG9yZy5hcGFj\naGUuaGVkd2lnLmptcy5tZXNzYWdlLmhlYWRlci5KbXNIZWFkZXIuSm1zVmFs\ndWUuVmFsdWVUeXBlIGdldFR5cGUoKSB7CiAgICAgIHJldHVybiB0eXBlXzsK\nICAgIH0KICAgIAogICAgLy8gb3B0aW9uYWwgYm9vbCBib29sZWFuVmFsdWUg\nPSAyOwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgQk9PTEVBTlZBTFVF\nX0ZJRUxEX05VTUJFUiA9IDI7CiAgICBwcml2YXRlIGJvb2xlYW4gYm9vbGVh\nblZhbHVlXzsKICAgIHB1YmxpYyBib29sZWFuIGhhc0Jvb2xlYW5WYWx1ZSgp\nIHsKICAgICAgcmV0dXJuICgoYml0RmllbGQwXyAmIDB4MDAwMDAwMDIpID09\nIDB4MDAwMDAwMDIpOwogICAgfQogICAgcHVibGljIGJvb2xlYW4gZ2V0Qm9v\nbGVhblZhbHVlKCkgewogICAgICByZXR1cm4gYm9vbGVhblZhbHVlXzsKICAg\nIH0KICAgIAogICAgLy8gb3B0aW9uYWwgc2ludDMyIGJ5dGVWYWx1ZSA9IDM7\nCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBCWVRFVkFMVUVfRklFTERf\nTlVNQkVSID0gMzsKICAgIHByaXZhdGUgaW50IGJ5dGVWYWx1ZV87CiAgICBw\ndWJsaWMgYm9vbGVhbiBoYXNCeXRlVmFsdWUoKSB7CiAgICAgIHJldHVybiAo\nKGJpdEZpZWxkMF8gJiAweDAwMDAwMDA0KSA9PSAweDAwMDAwMDA0KTsKICAg\nIH0KICAgIHB1YmxpYyBpbnQgZ2V0Qnl0ZVZhbHVlKCkgewogICAgICByZXR1\ncm4gYnl0ZVZhbHVlXzsKICAgIH0KICAgIAogICAgLy8gb3B0aW9uYWwgc2lu\ndDMyIHNob3J0VmFsdWUgPSA0OwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBp\nbnQgU0hPUlRWQUxVRV9GSUVMRF9OVU1CRVIgPSA0OwogICAgcHJpdmF0ZSBp\nbnQgc2hvcnRWYWx1ZV87CiAgICBwdWJsaWMgYm9vbGVhbiBoYXNTaG9ydFZh\nbHVlKCkgewogICAgICByZXR1cm4gKChiaXRGaWVsZDBfICYgMHgwMDAwMDAw\nOCkgPT0gMHgwMDAwMDAwOCk7CiAgICB9CiAgICBwdWJsaWMgaW50IGdldFNo\nb3J0VmFsdWUoKSB7CiAgICAgIHJldHVybiBzaG9ydFZhbHVlXzsKICAgIH0K\nICAgIAogICAgLy8gb3B0aW9uYWwgc2ludDMyIGludFZhbHVlID0gNTsKICAg\nIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IElOVFZBTFVFX0ZJRUxEX05VTUJF\nUiA9IDU7CiAgICBwcml2YXRlIGludCBpbnRWYWx1ZV87CiAgICBwdWJsaWMg\nYm9vbGVhbiBoYXNJbnRWYWx1ZSgpIHsKICAgICAgcmV0dXJuICgoYml0Rmll\nbGQwXyAmIDB4MDAwMDAwMTApID09IDB4MDAwMDAwMTApOwogICAgfQogICAg\ncHVibGljIGludCBnZXRJbnRWYWx1ZSgpIHsKICAgICAgcmV0dXJuIGludFZh\nbHVlXzsKICAgIH0KICAgIAogICAgLy8gb3B0aW9uYWwgc2ludDY0IGxvbmdW\nYWx1ZSA9IDY7CiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBMT05HVkFM\nVUVfRklFTERfTlVNQkVSID0gNjsKICAgIHByaXZhdGUgbG9uZyBsb25nVmFs\ndWVfOwogICAgcHVibGljIGJvb2xlYW4gaGFzTG9uZ1ZhbHVlKCkgewogICAg\nICByZXR1cm4gKChiaXRGaWVsZDBfICYgMHgwMDAwMDAyMCkgPT0gMHgwMDAw\nMDAyMCk7CiAgICB9CiAgICBwdWJsaWMgbG9uZyBnZXRMb25nVmFsdWUoKSB7\nCiAgICAgIHJldHVybiBsb25nVmFsdWVfOwogICAgfQogICAgCiAgICAvLyBv\ncHRpb25hbCBmbG9hdCBmbG9hdFZhbHVlID0gNzsKICAgIHB1YmxpYyBzdGF0\naWMgZmluYWwgaW50IEZMT0FUVkFMVUVfRklFTERfTlVNQkVSID0gNzsKICAg\nIHByaXZhdGUgZmxvYXQgZmxvYXRWYWx1ZV87CiAgICBwdWJsaWMgYm9vbGVh\nbiBoYXNGbG9hdFZhbHVlKCkgewogICAgICByZXR1cm4gKChiaXRGaWVsZDBf\nICYgMHgwMDAwMDA0MCkgPT0gMHgwMDAwMDA0MCk7CiAgICB9CiAgICBwdWJs\naWMgZmxvYXQgZ2V0RmxvYXRWYWx1ZSgpIHsKICAgICAgcmV0dXJuIGZsb2F0\nVmFsdWVfOwogICAgfQogICAgCiAgICAvLyBvcHRpb25hbCBkb3VibGUgZG91\nYmxlVmFsdWUgPSA4OwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgRE9V\nQkxFVkFMVUVfRklFTERfTlVNQkVSID0gODsKICAgIHByaXZhdGUgZG91Ymxl\nIGRvdWJsZVZhbHVlXzsKICAgIHB1YmxpYyBib29sZWFuIGhhc0RvdWJsZVZh\nbHVlKCkgewogICAgICByZXR1cm4gKChiaXRGaWVsZDBfICYgMHgwMDAwMDA4\nMCkgPT0gMHgwMDAwMDA4MCk7CiAgICB9CiAgICBwdWJsaWMgZG91YmxlIGdl\ndERvdWJsZVZhbHVlKCkgewogICAgICByZXR1cm4gZG91YmxlVmFsdWVfOwog\nICAgfQogICAgCiAgICAvLyBvcHRpb25hbCBzdHJpbmcgc3RyaW5nVmFsdWUg\nPSA5OwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgU1RSSU5HVkFMVUVf\nRklFTERfTlVNQkVSID0gOTsKICAgIHByaXZhdGUgamF2YS5sYW5nLk9iamVj\ndCBzdHJpbmdWYWx1ZV87CiAgICBwdWJsaWMgYm9vbGVhbiBoYXNTdHJpbmdW\nYWx1ZSgpIHsKICAgICAgcmV0dXJuICgoYml0RmllbGQwXyAmIDB4MDAwMDAx\nMDApID09IDB4MDAwMDAxMDApOwogICAgfQogICAgcHVibGljIFN0cmluZyBn\nZXRTdHJpbmdWYWx1ZSgpIHsKICAgICAgamF2YS5sYW5nLk9iamVjdCByZWYg\nPSBzdHJpbmdWYWx1ZV87CiAgICAgIGlmIChyZWYgaW5zdGFuY2VvZiBTdHJp\nbmcpIHsKICAgICAgICByZXR1cm4gKFN0cmluZykgcmVmOwogICAgICB9IGVs\nc2UgewogICAgICAgIGNvbS5nb29nbGUucHJvdG9idWYuQnl0ZVN0cmluZyBi\ncyA9IAogICAgICAgICAgICAoY29tLmdvb2dsZS5wcm90b2J1Zi5CeXRlU3Ry\naW5nKSByZWY7CiAgICAgICAgU3RyaW5nIHMgPSBicy50b1N0cmluZ1V0Zjgo\nKTsKICAgICAgICBpZiAoY29tLmdvb2dsZS5wcm90b2J1Zi5JbnRlcm5hbC5p\nc1ZhbGlkVXRmOChicykpIHsKICAgICAgICAgIHN0cmluZ1ZhbHVlXyA9IHM7\nCiAgICAgICAgfQogICAgICAgIHJldHVybiBzOwogICAgICB9CiAgICB9CiAg\nICBwcml2YXRlIGNvbS5nb29nbGUucHJvdG9idWYuQnl0ZVN0cmluZyBnZXRT\ndHJpbmdWYWx1ZUJ5dGVzKCkgewogICAgICBqYXZhLmxhbmcuT2JqZWN0IHJl\nZiA9IHN0cmluZ1ZhbHVlXzsKICAgICAgaWYgKHJlZiBpbnN0YW5jZW9mIFN0\ncmluZykgewogICAgICAgIGNvbS5nb29nbGUucHJvdG9idWYuQnl0ZVN0cmlu\nZyBiID0gCiAgICAgICAgICAgIGNvbS5nb29nbGUucHJvdG9idWYuQnl0ZVN0\ncmluZy5jb3B5RnJvbVV0ZjgoKFN0cmluZykgcmVmKTsKICAgICAgICBzdHJp\nbmdWYWx1ZV8gPSBiOwogICAgICAgIHJldHVybiBiOwogICAgICB9IGVsc2Ug\newogICAgICAgIHJldHVybiAoY29tLmdvb2dsZS5wcm90b2J1Zi5CeXRlU3Ry\naW5nKSByZWY7CiAgICAgIH0KICAgIH0KICAgIAogICAgLy8gb3B0aW9uYWwg\nYnl0ZXMgYnl0ZXNWYWx1ZSA9IDEwOwogICAgcHVibGljIHN0YXRpYyBmaW5h\nbCBpbnQgQllURVNWQUxVRV9GSUVMRF9OVU1CRVIgPSAxMDsKICAgIHByaXZh\ndGUgY29tLmdvb2dsZS5wcm90b2J1Zi5CeXRlU3RyaW5nIGJ5dGVzVmFsdWVf\nOwogICAgcHVibGljIGJvb2xlYW4gaGFzQnl0ZXNWYWx1ZSgpIHsKICAgICAg\ncmV0dXJuICgoYml0RmllbGQwXyAmIDB4MDAwMDAyMDApID09IDB4MDAwMDAy\nMDApOwogICAgfQogICAgcHVibGljIGNvbS5nb29nbGUucHJvdG9idWYuQnl0\nZVN0cmluZyBnZXRCeXRlc1ZhbHVlKCkgewogICAgICByZXR1cm4gYnl0ZXNW\nYWx1ZV87CiAgICB9CiAgICAKICAgIHByaXZhdGUgdm9pZCBpbml0RmllbGRz\nKCkgewogICAgICB0eXBlXyA9IG9yZy5hcGFjaGUuaGVkd2lnLmptcy5tZXNz\nYWdlLmhlYWRlci5KbXNIZWFkZXIuSm1zVmFsdWUuVmFsdWVUeXBlLkJPT0xF\nQU47CiAgICAgIGJvb2xlYW5WYWx1ZV8gPSBmYWxzZTsKICAgICAgYnl0ZVZh\nbHVlXyA9IDA7CiAgICAgIHNob3J0VmFsdWVfID0gMDsKICAgICAgaW50VmFs\ndWVfID0gMDsKICAgICAgbG9uZ1ZhbHVlXyA9IDBMOwogICAgICBmbG9hdFZh\nbHVlXyA9IDBGOwogICAgICBkb3VibGVWYWx1ZV8gPSAwRDsKICAgICAgc3Ry\naW5nVmFsdWVfID0gIiI7CiAgICAgIGJ5dGVzVmFsdWVfID0gY29tLmdvb2ds\nZS5wcm90b2J1Zi5CeXRlU3RyaW5nLkVNUFRZOwogICAgfQogICAgcHJpdmF0\nZSBieXRlIG1lbW9pemVkSXNJbml0aWFsaXplZCA9IC0xOwogICAgcHVibGlj\nIGZpbmFsIGJvb2xlYW4gaXNJbml0aWFsaXplZCgpIHsKICAgICAgYnl0ZSBp\nc0luaXRpYWxpemVkID0gbWVtb2l6ZWRJc0luaXRpYWxpemVkOwogICAgICBp\nZiAoaXNJbml0aWFsaXplZCAhPSAtMSkgcmV0dXJuIGlzSW5pdGlhbGl6ZWQg\nPT0gMTsKICAgICAgCiAgICAgIGlmICghaGFzVHlwZSgpKSB7CiAgICAgICAg\nbWVtb2l6ZWRJc0luaXRpYWxpemVkID0gMDsKICAgICAgICByZXR1cm4gZmFs\nc2U7CiAgICAgIH0KICAgICAgbWVtb2l6ZWRJc0luaXRpYWxpemVkID0gMTsK\nICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lk\nIHdyaXRlVG8oY29tLmdvb2dsZS5wcm90b2J1Zi5Db2RlZE91dHB1dFN0cmVh\nbSBvdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93cyBqYXZh\nLmlvLklPRXhjZXB0aW9uIHsKICAgICAgZ2V0U2VyaWFsaXplZFNpemUoKTsK\nICAgICAgaWYgKCgoYml0RmllbGQwXyAmIDB4MDAwMDAwMDEpID09IDB4MDAw\nMDAwMDEpKSB7CiAgICAgICAgb3V0cHV0LndyaXRlRW51bSgxLCB0eXBlXy5n\nZXROdW1iZXIoKSk7CiAgICAgIH0KICAgICAgaWYgKCgoYml0RmllbGQwXyAm\nIDB4MDAwMDAwMDIpID09IDB4MDAwMDAwMDIpKSB7CiAgICAgICAgb3V0cHV0\nLndyaXRlQm9vbCgyLCBib29sZWFuVmFsdWVfKTsKICAgICAgfQogICAgICBp\nZiAoKChiaXRGaWVsZDBfICYgMHgwMDAwMDAwNCkgPT0gMHgwMDAwMDAwNCkp\nIHsKICAgICAgICBvdXRwdXQud3JpdGVTSW50MzIoMywgYnl0ZVZhbHVlXyk7\nCiAgICAgIH0KICAgICAgaWYgKCgoYml0RmllbGQwXyAmIDB4MDAwMDAwMDgp\nID09IDB4MDAwMDAwMDgpKSB7CiAgICAgICAgb3V0cHV0LndyaXRlU0ludDMy\nKDQsIHNob3J0VmFsdWVfKTsKICAgICAgfQogICAgICBpZiAoKChiaXRGaWVs\nZDBfICYgMHgwMDAwMDAxMCkgPT0gMHgwMDAwMDAxMCkpIHsKICAgICAgICBv\ndXRwdXQud3JpdGVTSW50MzIoNSwgaW50VmFsdWVfKTsKICAgICAgfQogICAg\nICBpZiAoKChiaXRGaWVsZDBfICYgMHgwMDAwMDAyMCkgPT0gMHgwMDAwMDAy\nMCkpIHsKICAgICAgICBvdXRwdXQud3JpdGVTSW50NjQoNiwgbG9uZ1ZhbHVl\nXyk7CiAgICAgIH0KICAgICAgaWYgKCgoYml0RmllbGQwXyAmIDB4MDAwMDAw\nNDApID09IDB4MDAwMDAwNDApKSB7CiAgICAgICAgb3V0cHV0LndyaXRlRmxv\nYXQoNywgZmxvYXRWYWx1ZV8pOwogICAgICB9CiAgICAgIGlmICgoKGJpdEZp\nZWxkMF8gJiAweDAwMDAwMDgwKSA9PSAweDAwMDAwMDgwKSkgewogICAgICAg\nIG91dHB1dC53cml0ZURvdWJsZSg4LCBkb3VibGVWYWx1ZV8pOwogICAgICB9\nCiAgICAgIGlmICgoKGJpdEZpZWxkMF8gJiAweDAwMDAwMTAwKSA9PSAweDAw\nMDAwMTAwKSkgewogICAgICAgIG91dHB1dC53cml0ZUJ5dGVzKDksIGdldFN0\ncmluZ1ZhbHVlQnl0ZXMoKSk7CiAgICAgIH0KICAgICAgaWYgKCgoYml0Rmll\nbGQwXyAmIDB4MDAwMDAyMDApID09IDB4MDAwMDAyMDApKSB7CiAgICAgICAg\nb3V0cHV0LndyaXRlQnl0ZXMoMTAsIGJ5dGVzVmFsdWVfKTsKICAgICAgfQog\nICAgICBnZXRVbmtub3duRmllbGRzKCkud3JpdGVUbyhvdXRwdXQpOwogICAg\nfQogICAgCiAgICBwcml2YXRlIGludCBtZW1vaXplZFNlcmlhbGl6ZWRTaXpl\nID0gLTE7CiAgICBwdWJsaWMgaW50IGdldFNlcmlhbGl6ZWRTaXplKCkgewog\nICAgICBpbnQgc2l6ZSA9IG1lbW9pemVkU2VyaWFsaXplZFNpemU7CiAgICAg\nIGlmIChzaXplICE9IC0xKSByZXR1cm4gc2l6ZTsKICAgIAogICAgICBzaXpl\nID0gMDsKICAgICAgaWYgKCgoYml0RmllbGQwXyAmIDB4MDAwMDAwMDEpID09\nIDB4MDAwMDAwMDEpKSB7CiAgICAgICAgc2l6ZSArPSBjb20uZ29vZ2xlLnBy\nb3RvYnVmLkNvZGVkT3V0cHV0U3RyZWFtCiAgICAgICAgICAuY29tcHV0ZUVu\ndW1TaXplKDEsIHR5cGVfLmdldE51bWJlcigpKTsKICAgICAgfQogICAgICBp\nZiAoKChiaXRGaWVsZDBfICYgMHgwMDAwMDAwMikgPT0gMHgwMDAwMDAwMikp\nIHsKICAgICAgICBzaXplICs9IGNvbS5nb29nbGUucHJvdG9idWYuQ29kZWRP\ndXRwdXRTdHJlYW0KICAgICAgICAgIC5jb21wdXRlQm9vbFNpemUoMiwgYm9v\nbGVhblZhbHVlXyk7CiAgICAgIH0KICAgICAgaWYgKCgoYml0RmllbGQwXyAm\nIDB4MDAwMDAwMDQpID09IDB4MDAwMDAwMDQpKSB7CiAgICAgICAgc2l6ZSAr\nPSBjb20uZ29vZ2xlLnByb3RvYnVmLkNvZGVkT3V0cHV0U3RyZWFtCiAgICAg\nICAgICAuY29tcHV0ZVNJbnQzMlNpemUoMywgYnl0ZVZhbHVlXyk7CiAgICAg\nIH0KICAgICAgaWYgKCgoYml0RmllbGQwXyAmIDB4MDAwMDAwMDgpID09IDB4\nMDAwMDAwMDgpKSB7CiAgICAgICAgc2l6ZSArPSBjb20uZ29vZ2xlLnByb3Rv\nYnVmLkNvZGVkT3V0cHV0U3RyZWFtCiAgICAgICAgICAuY29tcHV0ZVNJbnQz\nMlNpemUoNCwgc2hvcnRWYWx1ZV8pOwogICAgICB9CiAgICAgIGlmICgoKGJp\ndEZpZWxkMF8gJiAweDAwMDAwMDEwKSA9PSAweDAwMDAwMDEwKSkgewogICAg\nICAgIHNpemUgKz0gY29tLmdvb2dsZS5wcm90b2J1Zi5Db2RlZE91dHB1dFN0\ncmVhbQogICAgICAgICAgLmNvbXB1dGVTSW50MzJTaXplKDUsIGludFZhbHVl\nXyk7CiAgICAgIH0KICAgICAgaWYgKCgoYml0RmllbGQwXyAmIDB4MDAwMDAw\nMjApID09IDB4MDAwMDAwMjApKSB7CiAgICAgICAgc2l6ZSArPSBjb20uZ29v\nZ2xlLnByb3RvYnVmLkNvZGVkT3V0cHV0U3RyZWFtCiAgICAgICAgICAuY29t\ncHV0ZVNJbnQ2NFNpemUoNiwgbG9uZ1ZhbHVlXyk7CiAgICAgIH0KICAgICAg\naWYgKCgoYml0RmllbGQwXyAmIDB4MDAwMDAwNDApID09IDB4MDAwMDAwNDAp\nKSB7CiAgICAgICAgc2l6ZSArPSBjb20uZ29vZ2xlLnByb3RvYnVmLkNvZGVk\nT3V0cHV0U3RyZWFtCiAgICAgICAgICAuY29tcHV0ZUZsb2F0U2l6ZSg3LCBm\nbG9hdFZhbHVlXyk7CiAgICAgIH0KICAgICAgaWYgKCgoYml0RmllbGQwXyAm\nIDB4MDAwMDAwODApID09IDB4MDAwMDAwODApKSB7CiAgICAgICAgc2l6ZSAr\nPSBjb20uZ29vZ2xlLnByb3RvYnVmLkNvZGVkT3V0cHV0U3RyZWFtCiAgICAg\nICAgICAuY29tcHV0ZURvdWJsZVNpemUoOCwgZG91YmxlVmFsdWVfKTsKICAg\nICAgfQogICAgICBpZiAoKChiaXRGaWVsZDBfICYgMHgwMDAwMDEwMCkgPT0g\nMHgwMDAwMDEwMCkpIHsKICAgICAgICBzaXplICs9IGNvbS5nb29nbGUucHJv\ndG9idWYuQ29kZWRPdXRwdXRTdHJlYW0KICAgICAgICAgIC5jb21wdXRlQnl0\nZXNTaXplKDksIGdldFN0cmluZ1ZhbHVlQnl0ZXMoKSk7CiAgICAgIH0KICAg\nICAgaWYgKCgoYml0RmllbGQwXyAmIDB4MDAwMDAyMDApID09IDB4MDAwMDAy\nMDApKSB7CiAgICAgICAgc2l6ZSArPSBjb20uZ29vZ2xlLnByb3RvYnVmLkNv\nZGVkT3V0cHV0U3RyZWFtCiAgICAgICAgICAuY29tcHV0ZUJ5dGVzU2l6ZSgx\nMCwgYnl0ZXNWYWx1ZV8pOwogICAgICB9CiAgICAgIHNpemUgKz0gZ2V0VW5r\nbm93bkZpZWxkcygpLmdldFNlcmlhbGl6ZWRTaXplKCk7CiAgICAgIG1lbW9p\nemVkU2VyaWFsaXplZFNpemUgPSBzaXplOwogICAgICByZXR1cm4gc2l6ZTsK\nICAgIH0KICAgIAogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgbG9uZyBzZXJp\nYWxWZXJzaW9uVUlEID0gMEw7CiAgICBAamF2YS5sYW5nLk92ZXJyaWRlCiAg\nICBwcm90ZWN0ZWQgamF2YS5sYW5nLk9iamVjdCB3cml0ZVJlcGxhY2UoKQog\nICAgICAgIHRocm93cyBqYXZhLmlvLk9iamVjdFN0cmVhbUV4Y2VwdGlvbiB7\nCiAgICAgIHJldHVybiBzdXBlci53cml0ZVJlcGxhY2UoKTsKICAgIH0KICAg\nIAogICAgcHVibGljIHN0YXRpYyBvcmcuYXBhY2hlLmhlZHdpZy5qbXMubWVz\nc2FnZS5oZWFkZXIuSm1zSGVhZGVyLkptc1ZhbHVlIHBhcnNlRnJvbSgKICAg\nICAgICBjb20uZ29vZ2xlLnByb3RvYnVmLkJ5dGVTdHJpbmcgZGF0YSkKICAg\nICAgICB0aHJvd3MgY29tLmdvb2dsZS5wcm90b2J1Zi5JbnZhbGlkUHJvdG9j\nb2xCdWZmZXJFeGNlcHRpb24gewogICAgICByZXR1cm4gbmV3QnVpbGRlcigp\nLm1lcmdlRnJvbShkYXRhKS5idWlsZFBhcnNlZCgpOwogICAgfQogICAgcHVi\nbGljIHN0YXRpYyBvcmcuYXBhY2hlLmhlZHdpZy5qbXMubWVzc2FnZS5oZWFk\nZXIuSm1zSGVhZGVyLkptc1ZhbHVlIHBhcnNlRnJvbSgKICAgICAgICBjb20u\nZ29vZ2xlLnByb3RvYnVmLkJ5dGVTdHJpbmcgZGF0YSwKICAgICAgICBjb20u\nZ29vZ2xlLnByb3RvYnVmLkV4dGVuc2lvblJlZ2lzdHJ5TGl0ZSBleHRlbnNp\nb25SZWdpc3RyeSkKICAgICAgICB0aHJvd3MgY29tLmdvb2dsZS5wcm90b2J1\nZi5JbnZhbGlkUHJvdG9jb2xCdWZmZXJFeGNlcHRpb24gewogICAgICByZXR1\ncm4gbmV3QnVpbGRlcigpLm1lcmdlRnJvbShkYXRhLCBleHRlbnNpb25SZWdp\nc3RyeSkKICAgICAgICAgICAgICAgLmJ1aWxkUGFyc2VkKCk7CiAgICB9CiAg\nICBwdWJsaWMgc3RhdGljIG9yZy5hcGFjaGUuaGVkd2lnLmptcy5tZXNzYWdl\nLmhlYWRlci5KbXNIZWFkZXIuSm1zVmFsdWUgcGFyc2VGcm9tKGJ5dGVbXSBk\nYXRhKQogICAgICAgIHRocm93cyBjb20uZ29vZ2xlLnByb3RvYnVmLkludmFs\naWRQcm90b2NvbEJ1ZmZlckV4Y2VwdGlvbiB7CiAgICAgIHJldHVybiBuZXdC\ndWlsZGVyKCkubWVyZ2VGcm9tKGRhdGEpLmJ1aWxkUGFyc2VkKCk7CiAgICB9\nCiAgICBwdWJsaWMgc3RhdGljIG9yZy5hcGFjaGUuaGVkd2lnLmptcy5tZXNz\nYWdlLmhlYWRlci5KbXNIZWFkZXIuSm1zVmFsdWUgcGFyc2VGcm9tKAogICAg\nICAgIGJ5dGVbXSBkYXRhLAogICAgICAgIGNvbS5nb29nbGUucHJvdG9idWYu\nRXh0ZW5zaW9uUmVnaXN0cnlMaXRlIGV4dGVuc2lvblJlZ2lzdHJ5KQogICAg\nICAgIHRocm93cyBjb20uZ29vZ2xlLnByb3RvYnVmLkludmFsaWRQcm90b2Nv\nbEJ1ZmZlckV4Y2VwdGlvbiB7CiAgICAgIHJldHVybiBuZXdCdWlsZGVyKCku\nbWVyZ2VGcm9tKGRhdGEsIGV4dGVuc2lvblJlZ2lzdHJ5KQogICAgICAgICAg\nICAgICAuYnVpbGRQYXJzZWQoKTsKICAgIH0KICAgIHB1YmxpYyBzdGF0aWMg\nb3JnLmFwYWNoZS5oZWR3aWcuam1zLm1lc3NhZ2UuaGVhZGVyLkptc0hlYWRl\nci5KbXNWYWx1ZSBwYXJzZUZyb20oamF2YS5pby5JbnB1dFN0cmVhbSBpbnB1\ndCkKICAgICAgICB0aHJvd3MgamF2YS5pby5JT0V4Y2VwdGlvbiB7CiAgICAg\nIHJldHVybiBuZXdCdWlsZGVyKCkubWVyZ2VGcm9tKGlucHV0KS5idWlsZFBh\ncnNlZCgpOwogICAgfQogICAgcHVibGljIHN0YXRpYyBvcmcuYXBhY2hlLmhl\nZHdpZy5qbXMubWVzc2FnZS5oZWFkZXIuSm1zSGVhZGVyLkptc1ZhbHVlIHBh\ncnNlRnJvbSgKICAgICAgICBqYXZhLmlvLklucHV0U3RyZWFtIGlucHV0LAog\nICAgICAgIGNvbS5nb29nbGUucHJvdG9idWYuRXh0ZW5zaW9uUmVnaXN0cnlM\naXRlIGV4dGVuc2lvblJlZ2lzdHJ5KQogICAgICAgIHRocm93cyBqYXZhLmlv\nLklPRXhjZXB0aW9uIHsKICAgICAgcmV0dXJuIG5ld0J1aWxkZXIoKS5tZXJn\nZUZyb20oaW5wdXQsIGV4dGVuc2lvblJlZ2lzdHJ5KQogICAgICAgICAgICAg\nICAuYnVpbGRQYXJzZWQoKTsKICAgIH0KICAgIHB1YmxpYyBzdGF0aWMgb3Jn\nLmFwYWNoZS5oZWR3aWcuam1zLm1lc3NhZ2UuaGVhZGVyLkptc0hlYWRlci5K\nbXNWYWx1ZSBwYXJzZURlbGltaXRlZEZyb20oamF2YS5pby5JbnB1dFN0cmVh\nbSBpbnB1dCkKICAgICAgICB0aHJvd3MgamF2YS5pby5JT0V4Y2VwdGlvbiB7\nCiAgICAgIEJ1aWxkZXIgYnVpbGRlciA9IG5ld0J1aWxkZXIoKTsKICAgICAg\naWYgKGJ1aWxkZXIubWVyZ2VEZWxpbWl0ZWRGcm9tKGlucHV0KSkgewogICAg\nICAgIHJldHVybiBidWlsZGVyLmJ1aWxkUGFyc2VkKCk7CiAgICAgIH0gZWxz\nZSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgIH0KICAgIHB1\nYmxpYyBzdGF0aWMgb3JnLmFwYWNoZS5oZWR3aWcuam1zLm1lc3NhZ2UuaGVh\nZGVyLkptc0hlYWRlci5KbXNWYWx1ZSBwYXJzZURlbGltaXRlZEZyb20oCiAg\nICAgICAgamF2YS5pby5JbnB1dFN0cmVhbSBpbnB1dCwKICAgICAgICBjb20u\nZ29vZ2xlLnByb3RvYnVmLkV4dGVuc2lvblJlZ2lzdHJ5TGl0ZSBleHRlbnNp\nb25SZWdpc3RyeSkKICAgICAgICB0aHJvd3MgamF2YS5pby5JT0V4Y2VwdGlv\nbiB7CiAgICAgIEJ1aWxkZXIgYnVpbGRlciA9IG5ld0J1aWxkZXIoKTsKICAg\nICAgaWYgKGJ1aWxkZXIubWVyZ2VEZWxpbWl0ZWRGcm9tKGlucHV0LCBleHRl\nbnNpb25SZWdpc3RyeSkpIHsKICAgICAgICByZXR1cm4gYnVpbGRlci5idWls\nZFBhcnNlZCgpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBudWxs\nOwogICAgICB9CiAgICB9CiAgICBwdWJsaWMgc3RhdGljIG9yZy5hcGFjaGUu\naGVkd2lnLmptcy5tZXNzYWdlLmhlYWRlci5KbXNIZWFkZXIuSm1zVmFsdWUg\ncGFyc2VGcm9tKAogICAgICAgIGNvbS5nb29nbGUucHJvdG9idWYuQ29kZWRJ\nbnB1dFN0cmVhbSBpbnB1dCkKICAgICAgICB0aHJvd3MgamF2YS5pby5JT0V4\nY2VwdGlvbiB7CiAgICAgIHJldHVybiBuZXdCdWlsZGVyKCkubWVyZ2VGcm9t\nKGlucHV0KS5idWlsZFBhcnNlZCgpOwogICAgfQogICAgcHVibGljIHN0YXRp\nYyBvcmcuYXBhY2hlLmhlZHdpZy5qbXMubWVzc2FnZS5oZWFkZXIuSm1zSGVh\nZGVyLkptc1ZhbHVlIHBhcnNlRnJvbSgKICAgICAgICBjb20uZ29vZ2xlLnBy\nb3RvYnVmLkNvZGVkSW5wdXRTdHJlYW0gaW5wdXQsCiAgICAgICAgY29tLmdv\nb2dsZS5wcm90b2J1Zi5FeHRlbnNpb25SZWdpc3RyeUxpdGUgZXh0ZW5zaW9u\nUmVnaXN0cnkpCiAgICAgICAgdGhyb3dzIGphdmEuaW8uSU9FeGNlcHRpb24g\newogICAgICByZXR1cm4gbmV3QnVpbGRlcigpLm1lcmdlRnJvbShpbnB1dCwg\nZXh0ZW5zaW9uUmVnaXN0cnkpCiAgICAgICAgICAgICAgIC5idWlsZFBhcnNl\nZCgpOwogICAgfQogICAgCiAgICBwdWJsaWMgc3RhdGljIEJ1aWxkZXIgbmV3\nQnVpbGRlcigpIHsgcmV0dXJuIEJ1aWxkZXIuY3JlYXRlKCk7IH0KICAgIHB1\nYmxpYyBCdWlsZGVyIG5ld0J1aWxkZXJGb3JUeXBlKCkgeyByZXR1cm4gbmV3\nQnVpbGRlcigpOyB9CiAgICBwdWJsaWMgc3RhdGljIEJ1aWxkZXIgbmV3QnVp\nbGRlcihvcmcuYXBhY2hlLmhlZHdpZy5qbXMubWVzc2FnZS5oZWFkZXIuSm1z\nSGVhZGVyLkptc1ZhbHVlIHByb3RvdHlwZSkgewogICAgICByZXR1cm4gbmV3\nQnVpbGRlcigpLm1lcmdlRnJvbShwcm90b3R5cGUpOwogICAgfQogICAgcHVi\nbGljIEJ1aWxkZXIgdG9CdWlsZGVyKCkgeyByZXR1cm4gbmV3QnVpbGRlcih0\naGlzKTsgfQogICAgCiAgICBAamF2YS5sYW5nLk92ZXJyaWRlCiAgICBwcm90\nZWN0ZWQgQnVpbGRlciBuZXdCdWlsZGVyRm9yVHlwZSgKICAgICAgICBjb20u\nZ29vZ2xlLnByb3RvYnVmLkdlbmVyYXRlZE1lc3NhZ2UuQnVpbGRlclBhcmVu\ndCBwYXJlbnQpIHsKICAgICAgQnVpbGRlciBidWlsZGVyID0gbmV3IEJ1aWxk\nZXIocGFyZW50KTsKICAgICAgcmV0dXJuIGJ1aWxkZXI7CiAgICB9CiAgICBw\ndWJsaWMgc3RhdGljIGZpbmFsIGNsYXNzIEJ1aWxkZXIgZXh0ZW5kcwogICAg\nICAgIGNvbS5nb29nbGUucHJvdG9idWYuR2VuZXJhdGVkTWVzc2FnZS5CdWls\nZGVyPEJ1aWxkZXI+CiAgICAgICBpbXBsZW1lbnRzIG9yZy5hcGFjaGUuaGVk\nd2lnLmptcy5tZXNzYWdlLmhlYWRlci5KbXNIZWFkZXIuSm1zVmFsdWVPckJ1\naWxkZXIgewogICAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGNvbS5nb29nbGUu\ncHJvdG9idWYuRGVzY3JpcHRvcnMuRGVzY3JpcHRvcgogICAgICAgICAgZ2V0\nRGVzY3JpcHRvcigpIHsKICAgICAgICByZXR1cm4gb3JnLmFwYWNoZS5oZWR3\naWcuam1zLm1lc3NhZ2UuaGVhZGVyLkptc0hlYWRlci5pbnRlcm5hbF9zdGF0\naWNfSGVkd2lnX0ptc19IZWFkZXJfSm1zVmFsdWVfZGVzY3JpcHRvcjsKICAg\nICAgfQogICAgICAKICAgICAgcHJvdGVjdGVkIGNvbS5nb29nbGUucHJvdG9i\ndWYuR2VuZXJhdGVkTWVzc2FnZS5GaWVsZEFjY2Vzc29yVGFibGUKICAgICAg\nICAgIGludGVybmFsR2V0RmllbGRBY2Nlc3NvclRhYmxlKCkgewogICAgICAg\nIHJldHVybiBvcmcuYXBhY2hlLmhlZHdpZy5qbXMubWVzc2FnZS5oZWFkZXIu\nSm1zSGVhZGVyLmludGVybmFsX3N0YXRpY19IZWR3aWdfSm1zX0hlYWRlcl9K\nbXNWYWx1ZV9maWVsZEFjY2Vzc29yVGFibGU7CiAgICAgIH0KICAgICAgCiAg\nICAgIC8vIENvbnN0cnVjdCB1c2luZyBvcmcuYXBhY2hlLmhlZHdpZy5qbXMu\nbWVzc2FnZS5oZWFkZXIuSm1zSGVhZGVyLkptc1ZhbHVlLm5ld0J1aWxkZXIo\nKQogICAgICBwcml2YXRlIEJ1aWxkZXIoKSB7CiAgICAgICAgbWF5YmVGb3Jj\nZUJ1aWxkZXJJbml0aWFsaXphdGlvbigpOwogICAgICB9CiAgICAgIAogICAg\nICBwcml2YXRlIEJ1aWxkZXIoQnVpbGRlclBhcmVudCBwYXJlbnQpIHsKICAg\nICAgICBzdXBlcihwYXJlbnQpOwogICAgICAgIG1heWJlRm9yY2VCdWlsZGVy\nSW5pdGlhbGl6YXRpb24oKTsKICAgICAgfQogICAgICBwcml2YXRlIHZvaWQg\nbWF5YmVGb3JjZUJ1aWxkZXJJbml0aWFsaXphdGlvbigpIHsKICAgICAgICBp\nZiAoY29tLmdvb2dsZS5wcm90b2J1Zi5HZW5lcmF0ZWRNZXNzYWdlLmFsd2F5\nc1VzZUZpZWxkQnVpbGRlcnMpIHsKICAgICAgICB9CiAgICAgIH0KICAgICAg\ncHJpdmF0ZSBzdGF0aWMgQnVpbGRlciBjcmVhdGUoKSB7CiAgICAgICAgcmV0\ndXJuIG5ldyBCdWlsZGVyKCk7CiAgICAgIH0KICAgICAgCiAgICAgIHB1Ymxp\nYyBCdWlsZGVyIGNsZWFyKCkgewogICAgICAgIHN1cGVyLmNsZWFyKCk7CiAg\nICAgICAgdHlwZV8gPSBvcmcuYXBhY2hlLmhlZHdpZy5qbXMubWVzc2FnZS5o\nZWFkZXIuSm1zSGVhZGVyLkptc1ZhbHVlLlZhbHVlVHlwZS5CT09MRUFOOwog\nICAgICAgIGJpdEZpZWxkMF8gPSAoYml0RmllbGQwXyAmIH4weDAwMDAwMDAx\nKTsKICAgICAgICBib29sZWFuVmFsdWVfID0gZmFsc2U7CiAgICAgICAgYml0\nRmllbGQwXyA9IChiaXRGaWVsZDBfICYgfjB4MDAwMDAwMDIpOwogICAgICAg\nIGJ5dGVWYWx1ZV8gPSAwOwogICAgICAgIGJpdEZpZWxkMF8gPSAoYml0Rmll\nbGQwXyAmIH4weDAwMDAwMDA0KTsKICAgICAgICBzaG9ydFZhbHVlXyA9IDA7\nCiAgICAgICAgYml0RmllbGQwXyA9IChiaXRGaWVsZDBfICYgfjB4MDAwMDAw\nMDgpOwogICAgICAgIGludFZhbHVlXyA9IDA7CiAgICAgICAgYml0RmllbGQw\nXyA9IChiaXRGaWVsZDBfICYgfjB4MDAwMDAwMTApOwogICAgICAgIGxvbmdW\nYWx1ZV8gPSAwTDsKICAgICAgICBiaXRGaWVsZDBfID0gKGJpdEZpZWxkMF8g\nJiB+MHgwMDAwMDAyMCk7CiAgICAgICAgZmxvYXRWYWx1ZV8gPSAwRjsKICAg\nICAgICBiaXRGaWVsZDBfID0gKGJpdEZpZWxkMF8gJiB+MHgwMDAwMDA0MCk7\nCiAgICAgICAgZG91YmxlVmFsdWVfID0gMEQ7CiAgICAgICAgYml0RmllbGQw\nXyA9IChiaXRGaWVsZDBfICYgfjB4MDAwMDAwODApOwogICAgICAgIHN0cmlu\nZ1ZhbHVlXyA9ICIiOwogICAgICAgIGJpdEZpZWxkMF8gPSAoYml0RmllbGQw\nXyAmIH4weDAwMDAwMTAwKTsKICAgICAgICBieXRlc1ZhbHVlXyA9IGNvbS5n\nb29nbGUucHJvdG9idWYuQnl0ZVN0cmluZy5FTVBUWTsKICAgICAgICBiaXRG\naWVsZDBfID0gKGJpdEZpZWxkMF8gJiB+MHgwMDAwMDIwMCk7CiAgICAgICAg\ncmV0dXJuIHRoaXM7CiAgICAgIH0KICAgICAgCiAgICAgIHB1YmxpYyBCdWls\nZGVyIGNsb25lKCkgewogICAgICAgIHJldHVybiBjcmVhdGUoKS5tZXJnZUZy\nb20oYnVpbGRQYXJ0aWFsKCkpOwogICAgICB9CiAgICAgIAogICAgICBwdWJs\naWMgY29tLmdvb2dsZS5wcm90b2J1Zi5EZXNjcmlwdG9ycy5EZXNjcmlwdG9y\nCiAgICAgICAgICBnZXREZXNjcmlwdG9yRm9yVHlwZSgpIHsKICAgICAgICBy\nZXR1cm4gb3JnLmFwYWNoZS5oZWR3aWcuam1zLm1lc3NhZ2UuaGVhZGVyLkpt\nc0hlYWRlci5KbXNWYWx1ZS5nZXREZXNjcmlwdG9yKCk7CiAgICAgIH0KICAg\nICAgCiAgICAgIHB1YmxpYyBvcmcuYXBhY2hlLmhlZHdpZy5qbXMubWVzc2Fn\nZS5oZWFkZXIuSm1zSGVhZGVyLkptc1ZhbHVlIGdldERlZmF1bHRJbnN0YW5j\nZUZvclR5cGUoKSB7CiAgICAgICAgcmV0dXJuIG9yZy5hcGFjaGUuaGVkd2ln\nLmptcy5tZXNzYWdlLmhlYWRlci5KbXNIZWFkZXIuSm1zVmFsdWUuZ2V0RGVm\nYXVsdEluc3RhbmNlKCk7CiAgICAgIH0KICAgICAgCiAgICAgIHB1YmxpYyBv\ncmcuYXBhY2hlLmhlZHdpZy5qbXMubWVzc2FnZS5oZWFkZXIuSm1zSGVhZGVy\nLkptc1ZhbHVlIGJ1aWxkKCkgewogICAgICAgIG9yZy5hcGFjaGUuaGVkd2ln\nLmptcy5tZXNzYWdlLmhlYWRlci5KbXNIZWFkZXIuSm1zVmFsdWUgcmVzdWx0\nID0gYnVpbGRQYXJ0aWFsKCk7CiAgICAgICAgaWYgKCFyZXN1bHQuaXNJbml0\naWFsaXplZCgpKSB7CiAgICAgICAgICB0aHJvdyBuZXdVbmluaXRpYWxpemVk\nTWVzc2FnZUV4Y2VwdGlvbihyZXN1bHQpOwogICAgICAgIH0KICAgICAgICBy\nZXR1cm4gcmVzdWx0OwogICAgICB9CiAgICAgIAogICAgICBwcml2YXRlIG9y\nZy5hcGFjaGUuaGVkd2lnLmptcy5tZXNzYWdlLmhlYWRlci5KbXNIZWFkZXIu\nSm1zVmFsdWUgYnVpbGRQYXJzZWQoKQogICAgICAgICAgdGhyb3dzIGNvbS5n\nb29nbGUucHJvdG9idWYuSW52YWxpZFByb3RvY29sQnVmZmVyRXhjZXB0aW9u\nIHsKICAgICAgICBvcmcuYXBhY2hlLmhlZHdpZy5qbXMubWVzc2FnZS5oZWFk\nZXIuSm1zSGVhZGVyLkptc1ZhbHVlIHJlc3VsdCA9IGJ1aWxkUGFydGlhbCgp\nOwogICAgICAgIGlmICghcmVzdWx0LmlzSW5pdGlhbGl6ZWQoKSkgewogICAg\nICAgICAgdGhyb3cgbmV3VW5pbml0aWFsaXplZE1lc3NhZ2VFeGNlcHRpb24o\nCiAgICAgICAgICAgIHJlc3VsdCkuYXNJbnZhbGlkUHJvdG9jb2xCdWZmZXJF\neGNlcHRpb24oKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdDsK\nICAgICAgfQogICAgICAKICAgICAgcHVibGljIG9yZy5hcGFjaGUuaGVkd2ln\nLmptcy5tZXNzYWdlLmhlYWRlci5KbXNIZWFkZXIuSm1zVmFsdWUgYnVpbGRQ\nYXJ0aWFsKCkgewogICAgICAgIG9yZy5hcGFjaGUuaGVkd2lnLmptcy5tZXNz\nYWdlLmhlYWRlci5KbXNIZWFkZXIuSm1zVmFsdWUgcmVzdWx0ID0gbmV3IG9y\nZy5hcGFjaGUuaGVkd2lnLmptcy5tZXNzYWdlLmhlYWRlci5KbXNIZWFkZXIu\nSm1zVmFsdWUodGhpcyk7CiAgICAgICAgaW50IGZyb21fYml0RmllbGQwXyA9\nIGJpdEZpZWxkMF87CiAgICAgICAgaW50IHRvX2JpdEZpZWxkMF8gPSAwOwog\nICAgICAgIGlmICgoKGZyb21fYml0RmllbGQwXyAmIDB4MDAwMDAwMDEpID09\nIDB4MDAwMDAwMDEpKSB7CiAgICAgICAgICB0b19iaXRGaWVsZDBfIHw9IDB4\nMDAwMDAwMDE7CiAgICAgICAgfQogICAgICAgIHJlc3VsdC50eXBlXyA9IHR5\ncGVfOwogICAgICAgIGlmICgoKGZyb21fYml0RmllbGQwXyAmIDB4MDAwMDAw\nMDIpID09IDB4MDAwMDAwMDIpKSB7CiAgICAgICAgICB0b19iaXRGaWVsZDBf\nIHw9IDB4MDAwMDAwMDI7CiAgICAgICAgfQogICAgICAgIHJlc3VsdC5ib29s\nZWFuVmFsdWVfID0gYm9vbGVhblZhbHVlXzsKICAgICAgICBpZiAoKChmcm9t\nX2JpdEZpZWxkMF8gJiAweDAwMDAwMDA0KSA9PSAweDAwMDAwMDA0KSkgewog\nICAgICAgICAgdG9fYml0RmllbGQwXyB8PSAweDAwMDAwMDA0OwogICAgICAg\nIH0KICAgICAgICByZXN1bHQuYnl0ZVZhbHVlXyA9IGJ5dGVWYWx1ZV87CiAg\nICAgICAgaWYgKCgoZnJvbV9iaXRGaWVsZDBfICYgMHgwMDAwMDAwOCkgPT0g\nMHgwMDAwMDAwOCkpIHsKICAgICAgICAgIHRvX2JpdEZpZWxkMF8gfD0gMHgw\nMDAwMDAwODsKICAgICAgICB9CiAgICAgICAgcmVzdWx0LnNob3J0VmFsdWVf\nID0gc2hvcnRWYWx1ZV87CiAgICAgICAgaWYgKCgoZnJvbV9iaXRGaWVsZDBf\nICYgMHgwMDAwMDAxMCkgPT0gMHgwMDAwMDAxMCkpIHsKICAgICAgICAgIHRv\nX2JpdEZpZWxkMF8gfD0gMHgwMDAwMDAxMDsKICAgICAgICB9CiAgICAgICAg\ncmVzdWx0LmludFZhbHVlXyA9IGludFZhbHVlXzsKICAgICAgICBpZiAoKChm\ncm9tX2JpdEZpZWxkMF8gJiAweDAwMDAwMDIwKSA9PSAweDAwMDAwMDIwKSkg\newogICAgICAgICAgdG9fYml0RmllbGQwXyB8PSAweDAwMDAwMDIwOwogICAg\nICAgIH0KICAgICAgICByZXN1bHQubG9uZ1ZhbHVlXyA9IGxvbmdWYWx1ZV87\nCiAgICAgICAgaWYgKCgoZnJvbV9iaXRGaWVsZDBfICYgMHgwMDAwMDA0MCkg\nPT0gMHgwMDAwMDA0MCkpIHsKICAgICAgICAgIHRvX2JpdEZpZWxkMF8gfD0g\nMHgwMDAwMDA0MDsKICAgICAgICB9CiAgICAgICAgcmVzdWx0LmZsb2F0VmFs\ndWVfID0gZmxvYXRWYWx1ZV87CiAgICAgICAgaWYgKCgoZnJvbV9iaXRGaWVs\nZDBfICYgMHgwMDAwMDA4MCkgPT0gMHgwMDAwMDA4MCkpIHsKICAgICAgICAg\nIHRvX2JpdEZpZWxkMF8gfD0gMHgwMDAwMDA4MDsKICAgICAgICB9CiAgICAg\nICAgcmVzdWx0LmRvdWJsZVZhbHVlXyA9IGRvdWJsZVZhbHVlXzsKICAgICAg\nICBpZiAoKChmcm9tX2JpdEZpZWxkMF8gJiAweDAwMDAwMTAwKSA9PSAweDAw\nMDAwMTAwKSkgewogICAgICAgICAgdG9fYml0RmllbGQwXyB8PSAweDAwMDAw\nMTAwOwogICAgICAgIH0KICAgICAgICByZXN1bHQuc3RyaW5nVmFsdWVfID0g\nc3RyaW5nVmFsdWVfOwogICAgICAgIGlmICgoKGZyb21fYml0RmllbGQwXyAm\nIDB4MDAwMDAyMDApID09IDB4MDAwMDAyMDApKSB7CiAgICAgICAgICB0b19i\naXRGaWVsZDBfIHw9IDB4MDAwMDAyMDA7CiAgICAgICAgfQogICAgICAgIHJl\nc3VsdC5ieXRlc1ZhbHVlXyA9IGJ5dGVzVmFsdWVfOwogICAgICAgIHJlc3Vs\ndC5iaXRGaWVsZDBfID0gdG9fYml0RmllbGQwXzsKICAgICAgICBvbkJ1aWx0\nKCk7CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfQogICAgICAKICAg\nICAgcHVibGljIEJ1aWxkZXIgbWVyZ2VGcm9tKGNvbS5nb29nbGUucHJvdG9i\ndWYuTWVzc2FnZSBvdGhlcikgewogICAgICAgIGlmIChvdGhlciBpbnN0YW5j\nZW9mIG9yZy5hcGFjaGUuaGVkd2lnLmptcy5tZXNzYWdlLmhlYWRlci5KbXNI\nZWFkZXIuSm1zVmFsdWUpIHsKICAgICAgICAgIHJldHVybiBtZXJnZUZyb20o\nKG9yZy5hcGFjaGUuaGVkd2lnLmptcy5tZXNzYWdlLmhlYWRlci5KbXNIZWFk\nZXIuSm1zVmFsdWUpb3RoZXIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAg\nICBzdXBlci5tZXJnZUZyb20ob3RoZXIpOwogICAgICAgICAgcmV0dXJuIHRo\naXM7CiAgICAgICAgfQogICAgICB9CiAgICAgIAogICAgICBwdWJsaWMgQnVp\nbGRlciBtZXJnZUZyb20ob3JnLmFwYWNoZS5oZWR3aWcuam1zLm1lc3NhZ2Uu\naGVhZGVyLkptc0hlYWRlci5KbXNWYWx1ZSBvdGhlcikgewogICAgICAgIGlm\nIChvdGhlciA9PSBvcmcuYXBhY2hlLmhlZHdpZy5qbXMubWVzc2FnZS5oZWFk\nZXIuSm1zSGVhZGVyLkptc1ZhbHVlLmdldERlZmF1bHRJbnN0YW5jZSgpKSBy\nZXR1cm4gdGhpczsKICAgICAgICBpZiAob3RoZXIuaGFzVHlwZSgpKSB7CiAg\nICAgICAgICBzZXRUeXBlKG90aGVyLmdldFR5cGUoKSk7CiAgICAgICAgfQog\nICAgICAgIGlmIChvdGhlci5oYXNCb29sZWFuVmFsdWUoKSkgewogICAgICAg\nICAgc2V0Qm9vbGVhblZhbHVlKG90aGVyLmdldEJvb2xlYW5WYWx1ZSgpKTsK\nICAgICAgICB9CiAgICAgICAgaWYgKG90aGVyLmhhc0J5dGVWYWx1ZSgpKSB7\nCiAgICAgICAgICBzZXRCeXRlVmFsdWUob3RoZXIuZ2V0Qnl0ZVZhbHVlKCkp\nOwogICAgICAgIH0KICAgICAgICBpZiAob3RoZXIuaGFzU2hvcnRWYWx1ZSgp\nKSB7CiAgICAgICAgICBzZXRTaG9ydFZhbHVlKG90aGVyLmdldFNob3J0VmFs\ndWUoKSk7CiAgICAgICAgfQogICAgICAgIGlmIChvdGhlci5oYXNJbnRWYWx1\nZSgpKSB7CiAgICAgICAgICBzZXRJbnRWYWx1ZShvdGhlci5nZXRJbnRWYWx1\nZSgpKTsKICAgICAgICB9CiAgICAgICAgaWYgKG90aGVyLmhhc0xvbmdWYWx1\nZSgpKSB7CiAgICAgICAgICBzZXRMb25nVmFsdWUob3RoZXIuZ2V0TG9uZ1Zh\nbHVlKCkpOwogICAgICAgIH0KICAgICAgICBpZiAob3RoZXIuaGFzRmxvYXRW\nYWx1ZSgpKSB7CiAgICAgICAgICBzZXRGbG9hdFZhbHVlKG90aGVyLmdldEZs\nb2F0VmFsdWUoKSk7CiAgICAgICAgfQogICAgICAgIGlmIChvdGhlci5oYXNE\nb3VibGVWYWx1ZSgpKSB7CiAgICAgICAgICBzZXREb3VibGVWYWx1ZShvdGhl\nci5nZXREb3VibGVWYWx1ZSgpKTsKICAgICAgICB9CiAgICAgICAgaWYgKG90\naGVyLmhhc1N0cmluZ1ZhbHVlKCkpIHsKICAgICAgICAgIHNldFN0cmluZ1Zh\nbHVlKG90aGVyLmdldFN0cmluZ1ZhbHVlKCkpOwogICAgICAgIH0KICAgICAg\nICBpZiAob3RoZXIuaGFzQnl0ZXNWYWx1ZSgpKSB7CiAgICAgICAgICBzZXRC\neXRlc1ZhbHVlKG90aGVyLmdldEJ5dGVzVmFsdWUoKSk7CiAgICAgICAgfQog\nICAgICAgIHRoaXMubWVyZ2VVbmtub3duRmllbGRzKG90aGVyLmdldFVua25v\nd25GaWVsZHMoKSk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KICAg\nICAgCiAgICAgIHB1YmxpYyBmaW5hbCBib29sZWFuIGlzSW5pdGlhbGl6ZWQo\nKSB7CiAgICAgICAgaWYgKCFoYXNUeXBlKCkpIHsKICAgICAgICAgIAogICAg\nICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICByZXR1cm4g\ndHJ1ZTsKICAgICAgfQogICAgICAKICAgICAgcHVibGljIEJ1aWxkZXIgbWVy\nZ2VGcm9tKAogICAgICAgICAgY29tLmdvb2dsZS5wcm90b2J1Zi5Db2RlZElu\ncHV0U3RyZWFtIGlucHV0LAogICAgICAgICAgY29tLmdvb2dsZS5wcm90b2J1\nZi5FeHRlbnNpb25SZWdpc3RyeUxpdGUgZXh0ZW5zaW9uUmVnaXN0cnkpCiAg\nICAgICAgICB0aHJvd3MgamF2YS5pby5JT0V4Y2VwdGlvbiB7CiAgICAgICAg\nY29tLmdvb2dsZS5wcm90b2J1Zi5Vbmtub3duRmllbGRTZXQuQnVpbGRlciB1\nbmtub3duRmllbGRzID0KICAgICAgICAgIGNvbS5nb29nbGUucHJvdG9idWYu\nVW5rbm93bkZpZWxkU2V0Lm5ld0J1aWxkZXIoCiAgICAgICAgICAgIHRoaXMu\nZ2V0VW5rbm93bkZpZWxkcygpKTsKICAgICAgICB3aGlsZSAodHJ1ZSkgewog\nICAgICAgICAgaW50IHRhZyA9IGlucHV0LnJlYWRUYWcoKTsKICAgICAgICAg\nIHN3aXRjaCAodGFnKSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAg\nICAgICB0aGlzLnNldFVua25vd25GaWVsZHModW5rbm93bkZpZWxkcy5idWls\nZCgpKTsKICAgICAgICAgICAgICBvbkNoYW5nZWQoKTsKICAgICAgICAgICAg\nICByZXR1cm4gdGhpczsKICAgICAgICAgICAgZGVmYXVsdDogewogICAgICAg\nICAgICAgIGlmICghcGFyc2VVbmtub3duRmllbGQoaW5wdXQsIHVua25vd25G\naWVsZHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBl\neHRlbnNpb25SZWdpc3RyeSwgdGFnKSkgewogICAgICAgICAgICAgICAgdGhp\ncy5zZXRVbmtub3duRmllbGRzKHVua25vd25GaWVsZHMuYnVpbGQoKSk7CiAg\nICAgICAgICAgICAgICBvbkNoYW5nZWQoKTsKICAgICAgICAgICAgICAgIHJl\ndHVybiB0aGlzOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBicmVh\nazsKICAgICAgICAgICAgfQogICAgICAgICAgICBjYXNlIDg6IHsKICAgICAg\nICAgICAgICBpbnQgcmF3VmFsdWUgPSBpbnB1dC5yZWFkRW51bSgpOwogICAg\nICAgICAgICAgIG9yZy5hcGFjaGUuaGVkd2lnLmptcy5tZXNzYWdlLmhlYWRl\nci5KbXNIZWFkZXIuSm1zVmFsdWUuVmFsdWVUeXBlIHZhbHVlID0gb3JnLmFw\nYWNoZS5oZWR3aWcuam1zLm1lc3NhZ2UuaGVhZGVyLkptc0hlYWRlci5KbXNW\nYWx1ZS5WYWx1ZVR5cGUudmFsdWVPZihyYXdWYWx1ZSk7CiAgICAgICAgICAg\nICAgaWYgKHZhbHVlID09IG51bGwpIHsKICAgICAgICAgICAgICAgIHVua25v\nd25GaWVsZHMubWVyZ2VWYXJpbnRGaWVsZCgxLCByYXdWYWx1ZSk7CiAgICAg\nICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGJpdEZpZWxkMF8g\nfD0gMHgwMDAwMDAwMTsKICAgICAgICAgICAgICAgIHR5cGVfID0gdmFsdWU7\nCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGJyZWFrOwogICAgICAg\nICAgICB9CiAgICAgICAgICAgIGNhc2UgMTY6IHsKICAgICAgICAgICAgICBi\naXRGaWVsZDBfIHw9IDB4MDAwMDAwMDI7CiAgICAgICAgICAgICAgYm9vbGVh\nblZhbHVlXyA9IGlucHV0LnJlYWRCb29sKCk7CiAgICAgICAgICAgICAgYnJl\nYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2FzZSAyNDogewogICAg\nICAgICAgICAgIGJpdEZpZWxkMF8gfD0gMHgwMDAwMDAwNDsKICAgICAgICAg\nICAgICBieXRlVmFsdWVfID0gaW5wdXQucmVhZFNJbnQzMigpOwogICAgICAg\nICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhc2Ug\nMzI6IHsKICAgICAgICAgICAgICBiaXRGaWVsZDBfIHw9IDB4MDAwMDAwMDg7\nCiAgICAgICAgICAgICAgc2hvcnRWYWx1ZV8gPSBpbnB1dC5yZWFkU0ludDMy\nKCk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAg\nICAgICAgY2FzZSA0MDogewogICAgICAgICAgICAgIGJpdEZpZWxkMF8gfD0g\nMHgwMDAwMDAxMDsKICAgICAgICAgICAgICBpbnRWYWx1ZV8gPSBpbnB1dC5y\nZWFkU0ludDMyKCk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAg\nIH0KICAgICAgICAgICAgY2FzZSA0ODogewogICAgICAgICAgICAgIGJpdEZp\nZWxkMF8gfD0gMHgwMDAwMDAyMDsKICAgICAgICAgICAgICBsb25nVmFsdWVf\nID0gaW5wdXQucmVhZFNJbnQ2NCgpOwogICAgICAgICAgICAgIGJyZWFrOwog\nICAgICAgICAgICB9CiAgICAgICAgICAgIGNhc2UgNjE6IHsKICAgICAgICAg\nICAgICBiaXRGaWVsZDBfIHw9IDB4MDAwMDAwNDA7CiAgICAgICAgICAgICAg\nZmxvYXRWYWx1ZV8gPSBpbnB1dC5yZWFkRmxvYXQoKTsKICAgICAgICAgICAg\nICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBjYXNlIDY1OiB7\nCiAgICAgICAgICAgICAgYml0RmllbGQwXyB8PSAweDAwMDAwMDgwOwogICAg\nICAgICAgICAgIGRvdWJsZVZhbHVlXyA9IGlucHV0LnJlYWREb3VibGUoKTsK\nICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAg\nICBjYXNlIDc0OiB7CiAgICAgICAgICAgICAgYml0RmllbGQwXyB8PSAweDAw\nMDAwMTAwOwogICAgICAgICAgICAgIHN0cmluZ1ZhbHVlXyA9IGlucHV0LnJl\nYWRCeXRlcygpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9\nCiAgICAgICAgICAgIGNhc2UgODI6IHsKICAgICAgICAgICAgICBiaXRGaWVs\nZDBfIHw9IDB4MDAwMDAyMDA7CiAgICAgICAgICAgICAgYnl0ZXNWYWx1ZV8g\nPSBpbnB1dC5yZWFkQnl0ZXMoKTsKICAgICAgICAgICAgICBicmVhazsKICAg\nICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAg\nICAKICAgICAgcHJpdmF0ZSBpbnQgYml0RmllbGQwXzsKICAgICAgCiAgICAg\nIC8vIHJlcXVpcmVkIC5IZWR3aWcuSm1zLkhlYWRlci5KbXNWYWx1ZS5WYWx1\nZVR5cGUgdHlwZSA9IDE7CiAgICAgIHByaXZhdGUgb3JnLmFwYWNoZS5oZWR3\naWcuam1zLm1lc3NhZ2UuaGVhZGVyLkptc0hlYWRlci5KbXNWYWx1ZS5WYWx1\nZVR5cGUgdHlwZV8gPSBvcmcuYXBhY2hlLmhlZHdpZy5qbXMubWVzc2FnZS5o\nZWFkZXIuSm1zSGVhZGVyLkptc1ZhbHVlLlZhbHVlVHlwZS5CT09MRUFOOwog\nICAgICBwdWJsaWMgYm9vbGVhbiBoYXNUeXBlKCkgewogICAgICAgIHJldHVy\nbiAoKGJpdEZpZWxkMF8gJiAweDAwMDAwMDAxKSA9PSAweDAwMDAwMDAxKTsK\nICAgICAgfQogICAgICBwdWJsaWMgb3JnLmFwYWNoZS5oZWR3aWcuam1zLm1l\nc3NhZ2UuaGVhZGVyLkptc0hlYWRlci5KbXNWYWx1ZS5WYWx1ZVR5cGUgZ2V0\nVHlwZSgpIHsKICAgICAgICByZXR1cm4gdHlwZV87CiAgICAgIH0KICAgICAg\ncHVibGljIEJ1aWxkZXIgc2V0VHlwZShvcmcuYXBhY2hlLmhlZHdpZy5qbXMu\nbWVzc2FnZS5oZWFkZXIuSm1zSGVhZGVyLkptc1ZhbHVlLlZhbHVlVHlwZSB2\nYWx1ZSkgewogICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7CiAgICAgICAg\nICB0aHJvdyBuZXcgTnVsbFBvaW50ZXJFeGNlcHRpb24oKTsKICAgICAgICB9\nCiAgICAgICAgYml0RmllbGQwXyB8PSAweDAwMDAwMDAxOwogICAgICAgIHR5\ncGVfID0gdmFsdWU7CiAgICAgICAgb25DaGFuZ2VkKCk7CiAgICAgICAgcmV0\ndXJuIHRoaXM7CiAgICAgIH0KICAgICAgcHVibGljIEJ1aWxkZXIgY2xlYXJU\neXBlKCkgewogICAgICAgIGJpdEZpZWxkMF8gPSAoYml0RmllbGQwXyAmIH4w\neDAwMDAwMDAxKTsKICAgICAgICB0eXBlXyA9IG9yZy5hcGFjaGUuaGVkd2ln\nLmptcy5tZXNzYWdlLmhlYWRlci5KbXNIZWFkZXIuSm1zVmFsdWUuVmFsdWVU\neXBlLkJPT0xFQU47CiAgICAgICAgb25DaGFuZ2VkKCk7CiAgICAgICAgcmV0\ndXJuIHRoaXM7CiAgICAgIH0KICAgICAgCiAgICAgIC8vIG9wdGlvbmFsIGJv\nb2wgYm9vbGVhblZhbHVlID0gMjsKICAgICAgcHJpdmF0ZSBib29sZWFuIGJv\nb2xlYW5WYWx1ZV8gOwogICAgICBwdWJsaWMgYm9vbGVhbiBoYXNCb29sZWFu\nVmFsdWUoKSB7CiAgICAgICAgcmV0dXJuICgoYml0RmllbGQwXyAmIDB4MDAw\nMDAwMDIpID09IDB4MDAwMDAwMDIpOwogICAgICB9CiAgICAgIHB1YmxpYyBi\nb29sZWFuIGdldEJvb2xlYW5WYWx1ZSgpIHsKICAgICAgICByZXR1cm4gYm9v\nbGVhblZhbHVlXzsKICAgICAgfQogICAgICBwdWJsaWMgQnVpbGRlciBzZXRC\nb29sZWFuVmFsdWUoYm9vbGVhbiB2YWx1ZSkgewogICAgICAgIGJpdEZpZWxk\nMF8gfD0gMHgwMDAwMDAwMjsKICAgICAgICBib29sZWFuVmFsdWVfID0gdmFs\ndWU7CiAgICAgICAgb25DaGFuZ2VkKCk7CiAgICAgICAgcmV0dXJuIHRoaXM7\nCiAgICAgIH0KICAgICAgcHVibGljIEJ1aWxkZXIgY2xlYXJCb29sZWFuVmFs\ndWUoKSB7CiAgICAgICAgYml0RmllbGQwXyA9IChiaXRGaWVsZDBfICYgfjB4\nMDAwMDAwMDIpOwogICAgICAgIGJvb2xlYW5WYWx1ZV8gPSBmYWxzZTsKICAg\nICAgICBvbkNoYW5nZWQoKTsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAg\nfQogICAgICAKICAgICAgLy8gb3B0aW9uYWwgc2ludDMyIGJ5dGVWYWx1ZSA9\nIDM7CiAgICAgIHByaXZhdGUgaW50IGJ5dGVWYWx1ZV8gOwogICAgICBwdWJs\naWMgYm9vbGVhbiBoYXNCeXRlVmFsdWUoKSB7CiAgICAgICAgcmV0dXJuICgo\nYml0RmllbGQwXyAmIDB4MDAwMDAwMDQpID09IDB4MDAwMDAwMDQpOwogICAg\nICB9CiAgICAgIHB1YmxpYyBpbnQgZ2V0Qnl0ZVZhbHVlKCkgewogICAgICAg\nIHJldHVybiBieXRlVmFsdWVfOwogICAgICB9CiAgICAgIHB1YmxpYyBCdWls\nZGVyIHNldEJ5dGVWYWx1ZShpbnQgdmFsdWUpIHsKICAgICAgICBiaXRGaWVs\nZDBfIHw9IDB4MDAwMDAwMDQ7CiAgICAgICAgYnl0ZVZhbHVlXyA9IHZhbHVl\nOwogICAgICAgIG9uQ2hhbmdlZCgpOwogICAgICAgIHJldHVybiB0aGlzOwog\nICAgICB9CiAgICAgIHB1YmxpYyBCdWlsZGVyIGNsZWFyQnl0ZVZhbHVlKCkg\newogICAgICAgIGJpdEZpZWxkMF8gPSAoYml0RmllbGQwXyAmIH4weDAwMDAw\nMDA0KTsKICAgICAgICBieXRlVmFsdWVfID0gMDsKICAgICAgICBvbkNoYW5n\nZWQoKTsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQogICAgICAKICAg\nICAgLy8gb3B0aW9uYWwgc2ludDMyIHNob3J0VmFsdWUgPSA0OwogICAgICBw\ncml2YXRlIGludCBzaG9ydFZhbHVlXyA7CiAgICAgIHB1YmxpYyBib29sZWFu\nIGhhc1Nob3J0VmFsdWUoKSB7CiAgICAgICAgcmV0dXJuICgoYml0RmllbGQw\nXyAmIDB4MDAwMDAwMDgpID09IDB4MDAwMDAwMDgpOwogICAgICB9CiAgICAg\nIHB1YmxpYyBpbnQgZ2V0U2hvcnRWYWx1ZSgpIHsKICAgICAgICByZXR1cm4g\nc2hvcnRWYWx1ZV87CiAgICAgIH0KICAgICAgcHVibGljIEJ1aWxkZXIgc2V0\nU2hvcnRWYWx1ZShpbnQgdmFsdWUpIHsKICAgICAgICBiaXRGaWVsZDBfIHw9\nIDB4MDAwMDAwMDg7CiAgICAgICAgc2hvcnRWYWx1ZV8gPSB2YWx1ZTsKICAg\nICAgICBvbkNoYW5nZWQoKTsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAg\nfQogICAgICBwdWJsaWMgQnVpbGRlciBjbGVhclNob3J0VmFsdWUoKSB7CiAg\nICAgICAgYml0RmllbGQwXyA9IChiaXRGaWVsZDBfICYgfjB4MDAwMDAwMDgp\nOwogICAgICAgIHNob3J0VmFsdWVfID0gMDsKICAgICAgICBvbkNoYW5nZWQo\nKTsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQogICAgICAKICAgICAg\nLy8gb3B0aW9uYWwgc2ludDMyIGludFZhbHVlID0gNTsKICAgICAgcHJpdmF0\nZSBpbnQgaW50VmFsdWVfIDsKICAgICAgcHVibGljIGJvb2xlYW4gaGFzSW50\nVmFsdWUoKSB7CiAgICAgICAgcmV0dXJuICgoYml0RmllbGQwXyAmIDB4MDAw\nMDAwMTApID09IDB4MDAwMDAwMTApOwogICAgICB9CiAgICAgIHB1YmxpYyBp\nbnQgZ2V0SW50VmFsdWUoKSB7CiAgICAgICAgcmV0dXJuIGludFZhbHVlXzsK\nICAgICAgfQogICAgICBwdWJsaWMgQnVpbGRlciBzZXRJbnRWYWx1ZShpbnQg\ndmFsdWUpIHsKICAgICAgICBiaXRGaWVsZDBfIHw9IDB4MDAwMDAwMTA7CiAg\nICAgICAgaW50VmFsdWVfID0gdmFsdWU7CiAgICAgICAgb25DaGFuZ2VkKCk7\nCiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KICAgICAgcHVibGljIEJ1\naWxkZXIgY2xlYXJJbnRWYWx1ZSgpIHsKICAgICAgICBiaXRGaWVsZDBfID0g\nKGJpdEZpZWxkMF8gJiB+MHgwMDAwMDAxMCk7CiAgICAgICAgaW50VmFsdWVf\nID0gMDsKICAgICAgICBvbkNoYW5nZWQoKTsKICAgICAgICByZXR1cm4gdGhp\nczsKICAgICAgfQogICAgICAKICAgICAgLy8gb3B0aW9uYWwgc2ludDY0IGxv\nbmdWYWx1ZSA9IDY7CiAgICAgIHByaXZhdGUgbG9uZyBsb25nVmFsdWVfIDsK\nICAgICAgcHVibGljIGJvb2xlYW4gaGFzTG9uZ1ZhbHVlKCkgewogICAgICAg\nIHJldHVybiAoKGJpdEZpZWxkMF8gJiAweDAwMDAwMDIwKSA9PSAweDAwMDAw\nMDIwKTsKICAgICAgfQogICAgICBwdWJsaWMgbG9uZyBnZXRMb25nVmFsdWUo\nKSB7CiAgICAgICAgcmV0dXJuIGxvbmdWYWx1ZV87CiAgICAgIH0KICAgICAg\ncHVibGljIEJ1aWxkZXIgc2V0TG9uZ1ZhbHVlKGxvbmcgdmFsdWUpIHsKICAg\nICAgICBiaXRGaWVsZDBfIHw9IDB4MDAwMDAwMjA7CiAgICAgICAgbG9uZ1Zh\nbHVlXyA9IHZhbHVlOwogICAgICAgIG9uQ2hhbmdlZCgpOwogICAgICAgIHJl\ndHVybiB0aGlzOwogICAgICB9CiAgICAgIHB1YmxpYyBCdWlsZGVyIGNsZWFy\nTG9uZ1ZhbHVlKCkgewogICAgICAgIGJpdEZpZWxkMF8gPSAoYml0RmllbGQw\nXyAmIH4weDAwMDAwMDIwKTsKICAgICAgICBsb25nVmFsdWVfID0gMEw7CiAg\nICAgICAgb25DaGFuZ2VkKCk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAg\nIH0KICAgICAgCiAgICAgIC8vIG9wdGlvbmFsIGZsb2F0IGZsb2F0VmFsdWUg\nPSA3OwogICAgICBwcml2YXRlIGZsb2F0IGZsb2F0VmFsdWVfIDsKICAgICAg\ncHVibGljIGJvb2xlYW4gaGFzRmxvYXRWYWx1ZSgpIHsKICAgICAgICByZXR1\ncm4gKChiaXRGaWVsZDBfICYgMHgwMDAwMDA0MCkgPT0gMHgwMDAwMDA0MCk7\nCiAgICAgIH0KICAgICAgcHVibGljIGZsb2F0IGdldEZsb2F0VmFsdWUoKSB7\nCiAgICAgICAgcmV0dXJuIGZsb2F0VmFsdWVfOwogICAgICB9CiAgICAgIHB1\nYmxpYyBCdWlsZGVyIHNldEZsb2F0VmFsdWUoZmxvYXQgdmFsdWUpIHsKICAg\nICAgICBiaXRGaWVsZDBfIHw9IDB4MDAwMDAwNDA7CiAgICAgICAgZmxvYXRW\nYWx1ZV8gPSB2YWx1ZTsKICAgICAgICBvbkNoYW5nZWQoKTsKICAgICAgICBy\nZXR1cm4gdGhpczsKICAgICAgfQogICAgICBwdWJsaWMgQnVpbGRlciBjbGVh\nckZsb2F0VmFsdWUoKSB7CiAgICAgICAgYml0RmllbGQwXyA9IChiaXRGaWVs\nZDBfICYgfjB4MDAwMDAwNDApOwogICAgICAgIGZsb2F0VmFsdWVfID0gMEY7\nCiAgICAgICAgb25DaGFuZ2VkKCk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAg\nICAgIH0KICAgICAgCiAgICAgIC8vIG9wdGlvbmFsIGRvdWJsZSBkb3VibGVW\nYWx1ZSA9IDg7CiAgICAgIHByaXZhdGUgZG91YmxlIGRvdWJsZVZhbHVlXyA7\nCiAgICAgIHB1YmxpYyBib29sZWFuIGhhc0RvdWJsZVZhbHVlKCkgewogICAg\nICAgIHJldHVybiAoKGJpdEZpZWxkMF8gJiAweDAwMDAwMDgwKSA9PSAweDAw\nMDAwMDgwKTsKICAgICAgfQogICAgICBwdWJsaWMgZG91YmxlIGdldERvdWJs\nZVZhbHVlKCkgewogICAgICAgIHJldHVybiBkb3VibGVWYWx1ZV87CiAgICAg\nIH0KICAgICAgcHVibGljIEJ1aWxkZXIgc2V0RG91YmxlVmFsdWUoZG91Ymxl\nIHZhbHVlKSB7CiAgICAgICAgYml0RmllbGQwXyB8PSAweDAwMDAwMDgwOwog\nICAgICAgIGRvdWJsZVZhbHVlXyA9IHZhbHVlOwogICAgICAgIG9uQ2hhbmdl\nZCgpOwogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9CiAgICAgIHB1Ymxp\nYyBCdWlsZGVyIGNsZWFyRG91YmxlVmFsdWUoKSB7CiAgICAgICAgYml0Rmll\nbGQwXyA9IChiaXRGaWVsZDBfICYgfjB4MDAwMDAwODApOwogICAgICAgIGRv\ndWJsZVZhbHVlXyA9IDBEOwogICAgICAgIG9uQ2hhbmdlZCgpOwogICAgICAg\nIHJldHVybiB0aGlzOwogICAgICB9CiAgICAgIAogICAgICAvLyBvcHRpb25h\nbCBzdHJpbmcgc3RyaW5nVmFsdWUgPSA5OwogICAgICBwcml2YXRlIGphdmEu\nbGFuZy5PYmplY3Qgc3RyaW5nVmFsdWVfID0gIiI7CiAgICAgIHB1YmxpYyBi\nb29sZWFuIGhhc1N0cmluZ1ZhbHVlKCkgewogICAgICAgIHJldHVybiAoKGJp\ndEZpZWxkMF8gJiAweDAwMDAwMTAwKSA9PSAweDAwMDAwMTAwKTsKICAgICAg\nfQogICAgICBwdWJsaWMgU3RyaW5nIGdldFN0cmluZ1ZhbHVlKCkgewogICAg\nICAgIGphdmEubGFuZy5PYmplY3QgcmVmID0gc3RyaW5nVmFsdWVfOwogICAg\nICAgIGlmICghKHJlZiBpbnN0YW5jZW9mIFN0cmluZykpIHsKICAgICAgICAg\nIFN0cmluZyBzID0gKChjb20uZ29vZ2xlLnByb3RvYnVmLkJ5dGVTdHJpbmcp\nIHJlZikudG9TdHJpbmdVdGY4KCk7CiAgICAgICAgICBzdHJpbmdWYWx1ZV8g\nPSBzOwogICAgICAgICAgcmV0dXJuIHM7CiAgICAgICAgfSBlbHNlIHsKICAg\nICAgICAgIHJldHVybiAoU3RyaW5nKSByZWY7CiAgICAgICAgfQogICAgICB9\nCiAgICAgIHB1YmxpYyBCdWlsZGVyIHNldFN0cmluZ1ZhbHVlKFN0cmluZyB2\nYWx1ZSkgewogICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7CiAgICB0aHJv\ndyBuZXcgTnVsbFBvaW50ZXJFeGNlcHRpb24oKTsKICB9CiAgYml0RmllbGQw\nXyB8PSAweDAwMDAwMTAwOwogICAgICAgIHN0cmluZ1ZhbHVlXyA9IHZhbHVl\nOwogICAgICAgIG9uQ2hhbmdlZCgpOwogICAgICAgIHJldHVybiB0aGlzOwog\nICAgICB9CiAgICAgIHB1YmxpYyBCdWlsZGVyIGNsZWFyU3RyaW5nVmFsdWUo\nKSB7CiAgICAgICAgYml0RmllbGQwXyA9IChiaXRGaWVsZDBfICYgfjB4MDAw\nMDAxMDApOwogICAgICAgIHN0cmluZ1ZhbHVlXyA9IGdldERlZmF1bHRJbnN0\nYW5jZSgpLmdldFN0cmluZ1ZhbHVlKCk7CiAgICAgICAgb25DaGFuZ2VkKCk7\nCiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KICAgICAgdm9pZCBzZXRT\ndHJpbmdWYWx1ZShjb20uZ29vZ2xlLnByb3RvYnVmLkJ5dGVTdHJpbmcgdmFs\ndWUpIHsKICAgICAgICBiaXRGaWVsZDBfIHw9IDB4MDAwMDAxMDA7CiAgICAg\nICAgc3RyaW5nVmFsdWVfID0gdmFsdWU7CiAgICAgICAgb25DaGFuZ2VkKCk7\nCiAgICAgIH0KICAgICAgCiAgICAgIC8vIG9wdGlvbmFsIGJ5dGVzIGJ5dGVz\nVmFsdWUgPSAxMDsKICAgICAgcHJpdmF0ZSBjb20uZ29vZ2xlLnByb3RvYnVm\nLkJ5dGVTdHJpbmcgYnl0ZXNWYWx1ZV8gPSBjb20uZ29vZ2xlLnByb3RvYnVm\nLkJ5dGVTdHJpbmcuRU1QVFk7CiAgICAgIHB1YmxpYyBib29sZWFuIGhhc0J5\ndGVzVmFsdWUoKSB7CiAgICAgICAgcmV0dXJuICgoYml0RmllbGQwXyAmIDB4\nMDAwMDAyMDApID09IDB4MDAwMDAyMDApOwogICAgICB9CiAgICAgIHB1Ymxp\nYyBjb20uZ29vZ2xlLnByb3RvYnVmLkJ5dGVTdHJpbmcgZ2V0Qnl0ZXNWYWx1\nZSgpIHsKICAgICAgICByZXR1cm4gYnl0ZXNWYWx1ZV87CiAgICAgIH0KICAg\nICAgcHVibGljIEJ1aWxkZXIgc2V0Qnl0ZXNWYWx1ZShjb20uZ29vZ2xlLnBy\nb3RvYnVmLkJ5dGVTdHJpbmcgdmFsdWUpIHsKICAgICAgICBpZiAodmFsdWUg\nPT0gbnVsbCkgewogICAgdGhyb3cgbmV3IE51bGxQb2ludGVyRXhjZXB0aW9u\nKCk7CiAgfQogIGJpdEZpZWxkMF8gfD0gMHgwMDAwMDIwMDsKICAgICAgICBi\neXRlc1ZhbHVlXyA9IHZhbHVlOwogICAgICAgIG9uQ2hhbmdlZCgpOwogICAg\nICAgIHJldHVybiB0aGlzOwogICAgICB9CiAgICAgIHB1YmxpYyBCdWlsZGVy\nIGNsZWFyQnl0ZXNWYWx1ZSgpIHsKICAgICAgICBiaXRGaWVsZDBfID0gKGJp\ndEZpZWxkMF8gJiB+MHgwMDAwMDIwMCk7CiAgICAgICAgYnl0ZXNWYWx1ZV8g\nPSBnZXREZWZhdWx0SW5zdGFuY2UoKS5nZXRCeXRlc1ZhbHVlKCk7CiAgICAg\nICAgb25DaGFuZ2VkKCk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0K\nICAgICAgCiAgICAgIC8vIEBAcHJvdG9jX2luc2VydGlvbl9wb2ludChidWls\nZGVyX3Njb3BlOkhlZHdpZy5KbXMuSGVhZGVyLkptc1ZhbHVlKQogICAgfQog\nICAgCiAgICBzdGF0aWMgewogICAgICBkZWZhdWx0SW5zdGFuY2UgPSBuZXcg\nSm1zVmFsdWUodHJ1ZSk7CiAgICAgIGRlZmF1bHRJbnN0YW5jZS5pbml0Rmll\nbGRzKCk7CiAgICB9CiAgICAKICAgIC8vIEBAcHJvdG9jX2luc2VydGlvbl9w\nb2ludChjbGFzc19zY29wZTpIZWR3aWcuSm1zLkhlYWRlci5KbXNWYWx1ZSkK\nICB9CiAgCiAgcHJpdmF0ZSBzdGF0aWMgY29tLmdvb2dsZS5wcm90b2J1Zi5E\nZXNjcmlwdG9ycy5EZXNjcmlwdG9yCiAgICBpbnRlcm5hbF9zdGF0aWNfSGVk\nd2lnX0ptc19IZWFkZXJfSm1zVmFsdWVfZGVzY3JpcHRvcjsKICBwcml2YXRl\nIHN0YXRpYwogICAgY29tLmdvb2dsZS5wcm90b2J1Zi5HZW5lcmF0ZWRNZXNz\nYWdlLkZpZWxkQWNjZXNzb3JUYWJsZQogICAgICBpbnRlcm5hbF9zdGF0aWNf\nSGVkd2lnX0ptc19IZWFkZXJfSm1zVmFsdWVfZmllbGRBY2Nlc3NvclRhYmxl\nOwogIAogIHB1YmxpYyBzdGF0aWMgY29tLmdvb2dsZS5wcm90b2J1Zi5EZXNj\ncmlwdG9ycy5GaWxlRGVzY3JpcHRvcgogICAgICBnZXREZXNjcmlwdG9yKCkg\newogICAgcmV0dXJuIGRlc2NyaXB0b3I7CiAgfQogIHByaXZhdGUgc3RhdGlj\nIGNvbS5nb29nbGUucHJvdG9idWYuRGVzY3JpcHRvcnMuRmlsZURlc2NyaXB0\nb3IKICAgICAgZGVzY3JpcHRvcjsKICBzdGF0aWMgewogICAgamF2YS5sYW5n\nLlN0cmluZ1tdIGRlc2NyaXB0b3JEYXRhID0gewogICAgICAiXG4hc3JjL21h\naW4vcHJvdG9idWYvSm1zSGVhZGVyLnByb3RvXDAyMlwwMjFIZWQiICsKICAg\nICAgIndpZy5KbXMuSGVhZGVyXCJcMzQzXDAwMlxuXDAxMEptc1ZhbHVlXDAy\nMjNcblwwMDR0eXBlXDAzMFwwMDEgXDAwMigiICsKICAgICAgIlwwMTYyJS5I\nZWR3aWcuSm1zLkhlYWRlci5KbXNWYWx1ZS5WYWx1ZVR5cGUiICsKICAgICAg\nIlwwMjJcMDI0XG5cMDE0Ym9vbGVhblZhbHVlXDAzMFwwMDIgXDAwMShcMDEw\nXDAyMlwwMjFcblx0Ynl0ZVZhbHVlXDAzMFwwMDMgXDAwMSgiICsKICAgICAg\nIlwwMjFcMDIyXDAyMlxuXG5zaG9ydFZhbHVlXDAzMFwwMDQgXDAwMShcMDIx\nXDAyMlwwMjBcblwwMTBpbnRWYWx1ZVwwMzBcMDA1IFwwMDEoXDAyMVwwMjIi\nICsKICAgICAgIlwwMjFcblx0bG9uZ1ZhbHVlXDAzMFwwMDYgXDAwMShcMDIy\nXDAyMlwwMjJcblxuZmxvYXRWYWx1ZVwwMzBcMDA3IFwwMDEoXDAwMlwwMjJc\nMDIzIiArCiAgICAgICJcblwwMTNkb3VibGVWYWx1ZVwwMzBcMDEwIFwwMDEo\nXDAwMVwwMjJcMDIzXG5cMDEzc3RyaW5nVmFsdWVcMDMwXHQgXDAwMShcdCIg\nKwogICAgICAiXDAyMlwwMjJcblxuYnl0ZXNWYWx1ZVwwMzBcbiBcMDAxKFww\nMTRcIm5cblx0VmFsdWVUeXBlXDAyMlwwMTNcblwwMDdCT08iICsKICAgICAg\nIkxFQU5cMDIwXDAwMVwwMjJcMDEwXG5cMDA0QllURVwwMjBcMDAyXDAyMlx0\nXG5cMDA1U0hPUlRcMDIwXDAwM1wwMjJcMDA3XG5cMDAzSU5UXDAyMFwwMDRc\nMDIyXDAxMFxuXDAwNCIgKwogICAgICAiTE9OR1wwMjBcMDA1XDAyMlx0XG5c\nMDA1RkxPQVRcMDIwXDAwNlwwMjJcblxuXDAwNkRPVUJMRVwwMjBcMDA3XDAy\nMlxuXG5cMDA2U1RSSU5HXDAyMCIsCiAgICAgICJcMDEwXDAyMlx0XG5cMDA1\nQllURVNcMDIwXHQqXCJcblwwMTdQcm90b2NvbFZlcnNpb25cMDIyXDAxN1xu\nXDAxM1ZFUlNJIiArCiAgICAgICJPTl9PTkVcMDIwXDAwMUIoXG4kb3JnLmFw\nYWNoZS5oZWR3aWcuam1zLm1lc3NhZyIgKwogICAgICAiZS5oZWFkZXJIXDAw\nMSIKICAgIH07CiAgICBjb20uZ29vZ2xlLnByb3RvYnVmLkRlc2NyaXB0b3Jz\nLkZpbGVEZXNjcmlwdG9yLkludGVybmFsRGVzY3JpcHRvckFzc2lnbmVyIGFz\nc2lnbmVyID0KICAgICAgbmV3IGNvbS5nb29nbGUucHJvdG9idWYuRGVzY3Jp\ncHRvcnMuRmlsZURlc2NyaXB0b3IuSW50ZXJuYWxEZXNjcmlwdG9yQXNzaWdu\nZXIoKSB7CiAgICAgICAgcHVibGljIGNvbS5nb29nbGUucHJvdG9idWYuRXh0\nZW5zaW9uUmVnaXN0cnkgYXNzaWduRGVzY3JpcHRvcnMoCiAgICAgICAgICAg\nIGNvbS5nb29nbGUucHJvdG9idWYuRGVzY3JpcHRvcnMuRmlsZURlc2NyaXB0\nb3Igcm9vdCkgewogICAgICAgICAgZGVzY3JpcHRvciA9IHJvb3Q7CiAgICAg\nICAgICBpbnRlcm5hbF9zdGF0aWNfSGVkd2lnX0ptc19IZWFkZXJfSm1zVmFs\ndWVfZGVzY3JpcHRvciA9CiAgICAgICAgICAgIGdldERlc2NyaXB0b3IoKS5n\nZXRNZXNzYWdlVHlwZXMoKS5nZXQoMCk7CiAgICAgICAgICBpbnRlcm5hbF9z\ndGF0aWNfSGVkd2lnX0ptc19IZWFkZXJfSm1zVmFsdWVfZmllbGRBY2Nlc3Nv\nclRhYmxlID0gbmV3CiAgICAgICAgICAgIGNvbS5nb29nbGUucHJvdG9idWYu\nR2VuZXJhdGVkTWVzc2FnZS5GaWVsZEFjY2Vzc29yVGFibGUoCiAgICAgICAg\nICAgICAgaW50ZXJuYWxfc3RhdGljX0hlZHdpZ19KbXNfSGVhZGVyX0ptc1Zh\nbHVlX2Rlc2NyaXB0b3IsCiAgICAgICAgICAgICAgbmV3IGphdmEubGFuZy5T\ndHJpbmdbXSB7ICJUeXBlIiwgIkJvb2xlYW5WYWx1ZSIsICJCeXRlVmFsdWUi\nLCAiU2hvcnRWYWx1ZSIsICJJbnRWYWx1ZSIsICJMb25nVmFsdWUiLCAiRmxv\nYXRWYWx1ZSIsICJEb3VibGVWYWx1ZSIsICJTdHJpbmdWYWx1ZSIsICJCeXRl\nc1ZhbHVlIiwgfSwKICAgICAgICAgICAgICBvcmcuYXBhY2hlLmhlZHdpZy5q\nbXMubWVzc2FnZS5oZWFkZXIuSm1zSGVhZGVyLkptc1ZhbHVlLmNsYXNzLAog\nICAgICAgICAgICAgIG9yZy5hcGFjaGUuaGVkd2lnLmptcy5tZXNzYWdlLmhl\nYWRlci5KbXNIZWFkZXIuSm1zVmFsdWUuQnVpbGRlci5jbGFzcyk7CiAgICAg\nICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgIH07CiAgICBjb20u\nZ29vZ2xlLnByb3RvYnVmLkRlc2NyaXB0b3JzLkZpbGVEZXNjcmlwdG9yCiAg\nICAgIC5pbnRlcm5hbEJ1aWxkR2VuZXJhdGVkRmlsZUZyb20oZGVzY3JpcHRv\nckRhdGEsCiAgICAgICAgbmV3IGNvbS5nb29nbGUucHJvdG9idWYuRGVzY3Jp\ncHRvcnMuRmlsZURlc2NyaXB0b3JbXSB7CiAgICAgICAgfSwgYXNzaWduZXIp\nOwogIH0KICAKICAvLyBAQHByb3RvY19pbnNlcnRpb25fcG9pbnQob3V0ZXJf\nY2xhc3Nfc2NvcGUpCn0K\n","encoding":"base64"}

