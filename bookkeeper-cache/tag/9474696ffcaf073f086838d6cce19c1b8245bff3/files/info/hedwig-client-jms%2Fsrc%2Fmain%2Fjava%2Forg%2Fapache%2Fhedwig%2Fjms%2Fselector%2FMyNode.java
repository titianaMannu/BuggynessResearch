{"sha":"b23b3e105915515c883f048aa5e43c87d3fca609","node_id":"MDQ6QmxvYjE1NzU5NTY6YjIzYjNlMTA1OTE1NTE1Yzg4M2YwNDhhYTVlNDNjODdkM2ZjYTYwOQ==","size":3759,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/b23b3e105915515c883f048aa5e43c87d3fca609","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5qbXMuc2VsZWN0b3I7CgppbXBvcnQg\nb3JnLnNsZjRqLkxvZ2dlcjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJGYWN0\nb3J5OwoKCi8qKgogKiBSb290IG9mIGFsbCBub2RlcyBpbiB0aGUgQVNUIGdl\nbmVyYXRlZC4KICogRW5jYXBzdWxhdGVzIHN0YXRlIGZvciBldmFsdWF0aW9u\nIG9mIHRoZSBhc3QgYnkgYW4gaW50ZXJwcmV0ZXIuCiAqLwpwdWJsaWMgY2xh\nc3MgTXlOb2RlIHsKCiAgICBmaW5hbCBzdGF0aWMgTG9nZ2VyIGxvZ2dlciA9\nIExvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKE15Tm9kZS5jbGFzcyk7CgogICAg\nLy8gVGhpcyBpcyBzZSBmb3IgY2FzZSBvZiBjb25zdGFudCB2YWx1ZSBsaXRl\ncmFscy4KICAgIHByaXZhdGUgU2VsZWN0b3JDb25zdGFudCBzZWxlY3RvckNv\nbnN0YW50OwoKICAgIC8vIFRoaXMgaXMgdGhlIGFjdHVhbCBleHByZXNzaW9u\nIHRvIGV2YWx1YXRlLgogICAgcHJpdmF0ZSBFeHByRnVuY3Rpb24gZXhwckZ1\nbmN0aW9uOwoKICAgIC8vIENhbGxlZCB3aGlsZSBpbnRlcnByZXRpbmcgLi4K\nICAgIHB1YmxpYyBTZWxlY3RvckNvbnN0YW50IGdldENvbnN0YW50VmFsdWUo\nKSB0aHJvd3MgU2VsZWN0b3JFdmFsdWF0aW9uRXhjZXB0aW9uIHsKICAgICAg\nICBpZiAobnVsbCA9PSBzZWxlY3RvckNvbnN0YW50KQogICAgICAgICAgICB0\naHJvdyBuZXcgU2VsZWN0b3JFdmFsdWF0aW9uRXhjZXB0aW9uKGdldENsYXNz\nKCkgKwogICAgICAgICAgICAgICAgIiBVbmV4cGVjdGVkIG5vdCB0byBoYXZl\nIGV2YWxEYXRhIHBvcHVsYXRlZCBmb3IgIiArIHRoaXMpOwogICAgICAgIHJl\ndHVybiBzZWxlY3RvckNvbnN0YW50OwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIGFkZFRvU3RyaW5nU2V0KFN0cmluZyBzdHIpIHRocm93cyBQYXJzZUV4Y2Vw\ndGlvbiB7CiAgICAgICAgaWYgKG51bGwgPT0gc2VsZWN0b3JDb25zdGFudCkg\ndGhyb3cgbmV3IFBhcnNlRXhjZXB0aW9uKGdldENsYXNzKCkgKwogICAgICAg\nICAgICAiIFVuZXhwZWN0ZWQgbm90IHRvIGhhdmUgZXZhbERhdGEgcG9wdWxh\ndGVkIGZvciAiICsgdGhpcyk7CiAgICAgICAgc2VsZWN0b3JDb25zdGFudC5h\nZGRUb1N0cmluZ1NldChzdHIpOwogICAgfQoKICAgIC8vIENhbGxlZCB3aGls\nZSBwYXJzaW5nIC4uCiAgICBwdWJsaWMgdm9pZCBzZXRDb25zdGFudFZhbHVl\nKFNlbGVjdG9yQ29uc3RhbnQgc2VsZWN0b3JEYXRhKSB0aHJvd3MgUGFyc2VF\neGNlcHRpb24gewogICAgICAgIGlmIChudWxsICE9IHRoaXMuc2VsZWN0b3JD\nb25zdGFudCkKICAgICAgICAgICAgdGhyb3cgbmV3IFBhcnNlRXhjZXB0aW9u\nKGdldENsYXNzKCkgKyAiIFZhbHVlIGFscmVhZHkgc2V0ID8gcHJldiA6ICIg\nKwogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RvckNvbnN0YW50ICsgIiwg\nbmV3IDogIiArIHNlbGVjdG9yRGF0YSk7CgogICAgICAgIGlmIChNeU5vZGUu\nbG9nZ2VyLmlzVHJhY2VFbmFibGVkKCkpIE15Tm9kZS5sb2dnZXIudHJhY2Uo\nIlNldHRpbmcgY29uc3RhbnQgdmFsdWUgIiArCiAgICAgICAgICAgIHNlbGVj\ndG9yRGF0YSArICIgZm9yICIgKyB0aGlzKTsKCiAgICAgICAgdGhpcy5zZWxl\nY3RvckNvbnN0YW50ID0gc2VsZWN0b3JEYXRhOwogICAgfQoKCiAgICAvLyBD\nYWxsZWQgd2hpbGUgaW50ZXJwcmV0aW5nIC4uCiAgICBwdWJsaWMgRXhwckZ1\nbmN0aW9uIGdldEV4cHJGdW5jdGlvbigpIHRocm93cyBTZWxlY3RvckV2YWx1\nYXRpb25FeGNlcHRpb24gewogICAgICAgIGlmIChudWxsID09IGV4cHJGdW5j\ndGlvbikKICAgICAgICAgICAgdGhyb3cgbmV3IFNlbGVjdG9yRXZhbHVhdGlv\nbkV4Y2VwdGlvbihnZXRDbGFzcygpICsKICAgICAgICAgICAgICAgICIgVW5l\neHBlY3RlZCBub3QgdG8gaGF2ZSBleHByRnVuY3Rpb24gcG9wdWxhdGVkIGZv\nciAiICsgdGhpcyk7CiAgICAgICAgcmV0dXJuIGV4cHJGdW5jdGlvbjsKICAg\nIH0KCiAgICAvLyBDYWxsZWQgd2hpbGUgcGFyc2luZyAuLgogICAgcHVibGlj\nIHZvaWQgc2V0RXhwckZ1bmN0aW9uKEV4cHJGdW5jdGlvbiBleHByRnVuY3Rp\nb24pIHRocm93cyBQYXJzZUV4Y2VwdGlvbiB7CiAgICAgICAgaWYgKG51bGwg\nIT0gdGhpcy5leHByRnVuY3Rpb24pCiAgICAgICAgICAgIHRocm93IG5ldyBQ\nYXJzZUV4Y2VwdGlvbihnZXRDbGFzcygpICsgIiBleHByRnVuY3Rpb24gYWxy\nZWFkeSBzZXQgPyBwcmV2IDogIiArCiAgICAgICAgICAgICAgICB0aGlzLmV4\ncHJGdW5jdGlvbiArICIsIG5ldyA6ICIgKyBleHByRnVuY3Rpb24pOwoKICAg\nICAgICBpZiAoTXlOb2RlLmxvZ2dlci5pc1RyYWNlRW5hYmxlZCgpKSBNeU5v\nZGUubG9nZ2VyLnRyYWNlKCJTZXR0aW5nIGZ1bmN0aW9uIGV4cHIgIiArCiAg\nICAgICAgICAgIGV4cHJGdW5jdGlvbiArICIgZm9yICIgKyB0aGlzKTsKCiAg\nICAgICAgdGhpcy5leHByRnVuY3Rpb24gPSBleHByRnVuY3Rpb247CiAgICB9\nCgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgU3RyaW5nIHRvU3RyaW5nKCkg\newogICAgICAgIGZpbmFsIFN0cmluZ0J1aWxkZXIgc2IgPSBuZXcgU3RyaW5n\nQnVpbGRlcigpOwogICAgICAgIHNiLmFwcGVuZCgiTXlOb2RlIik7CiAgICAg\nICAgc2IuYXBwZW5kKCJ7c2VsZWN0b3JDb25zdGFudD0iKS5hcHBlbmQoc2Vs\nZWN0b3JDb25zdGFudCk7CiAgICAgICAgc2IuYXBwZW5kKCIsIGV4cHJGdW5j\ndGlvbj0iKS5hcHBlbmQoZXhwckZ1bmN0aW9uKTsKICAgICAgICBzYi5hcHBl\nbmQoJ30nKTsKICAgICAgICByZXR1cm4gc2IudG9TdHJpbmcoKTsKICAgIH0K\nCgoKCiAgICAvLyBJbnRlcm5hbCB0byB0aGUgcGFyc2VyIC0gRE8gTk9UIHVz\nZSBvdXRzaWRlICEKICAgIFNlbGVjdG9yQ29uc3RhbnQgZ2V0Q29uc3RhbnRW\nYWx1ZUludGVybmFsKCkgeyByZXR1cm4gc2VsZWN0b3JDb25zdGFudDsgfQog\nICAgRXhwckZ1bmN0aW9uIGdldEV4cHJGdW5jdGlvbkludGVybmFsKCkgeyBy\nZXR1cm4gZXhwckZ1bmN0aW9uOyB9Cn0K\n","encoding":"base64"}

