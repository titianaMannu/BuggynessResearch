{"sha":"e4af1c75d8ec6b47fa81432de654f7a240708a7f","node_id":"MDQ6QmxvYjE1NzU5NTY6ZTRhZjFjNzVkOGVjNmI0N2ZhODE0MzJkZTY1NGY3YTI0MDcwOGE3Zg==","size":6787,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/e4af1c75d8ec6b47fa81432de654f7a240708a7f","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5qbXMuc2VsZWN0b3I7CgppbXBvcnQg\namF2YS51dGlsLkNvbGxlY3Rpb25zOwppbXBvcnQgamF2YS51dGlsLlNldDsK\nCi8qKgogKiBBIGNvbnN0YW50IGluIHRoZSBBU1QgZW5kcyB1cCBnZXR0aW5n\nIHB1c2hlZCBpbnRvIHRoZSBzdGFjayBhcyB0aGlzLgogKi8KcHVibGljIGNs\nYXNzIFNlbGVjdG9yQ29uc3RhbnQgewoKICAgIHB1YmxpYyBlbnVtIFNlbGVj\ndG9yRGF0YVR5cGUge0JPT0xFQU4sIElOVCwgRE9VQkxFLCBTVFJJTkcsIFNU\nUklOR19TRVR9CgogICAgcHVibGljIGZpbmFsIFNlbGVjdG9yRGF0YVR5cGUg\ndHlwZTsKCiAgICBwcml2YXRlIGZpbmFsIEJvb2xlYW4gYm9vbFZhbHVlOwog\nICAgcHJpdmF0ZSBmaW5hbCBJbnRlZ2VyIGludFZhbHVlOwogICAgcHJpdmF0\nZSBmaW5hbCBEb3VibGUgZG91YmxlVmFsdWU7CiAgICBwcml2YXRlIGZpbmFs\nIFN0cmluZyBzdHJpbmdWYWx1ZTsKCiAgICBwcml2YXRlIGZpbmFsIFNldDxT\ndHJpbmc+IHN0cmluZ1NldDsKCiAgICBwdWJsaWMgU2VsZWN0b3JDb25zdGFu\ndChCb29sZWFuIGJvb2xWYWx1ZSkgewogICAgICAgIHRoaXMudHlwZSA9IFNl\nbGVjdG9yRGF0YVR5cGUuQk9PTEVBTjsKICAgICAgICB0aGlzLmJvb2xWYWx1\nZSA9IGJvb2xWYWx1ZTsKICAgICAgICB0aGlzLmludFZhbHVlID0gbnVsbDsK\nICAgICAgICB0aGlzLmRvdWJsZVZhbHVlID0gbnVsbDsKICAgICAgICB0aGlz\nLnN0cmluZ1ZhbHVlID0gbnVsbDsKICAgICAgICB0aGlzLnN0cmluZ1NldCA9\nIG51bGw7CiAgICB9CgogICAgcHVibGljIFNlbGVjdG9yQ29uc3RhbnQoSW50\nZWdlciBpbnRWYWx1ZSkgewogICAgICAgIHRoaXMudHlwZSA9IFNlbGVjdG9y\nRGF0YVR5cGUuSU5UOwogICAgICAgIHRoaXMuYm9vbFZhbHVlID0gbnVsbDsK\nICAgICAgICB0aGlzLmludFZhbHVlID0gaW50VmFsdWU7CiAgICAgICAgdGhp\ncy5kb3VibGVWYWx1ZSA9IG51bGw7CiAgICAgICAgdGhpcy5zdHJpbmdWYWx1\nZSA9IG51bGw7CiAgICAgICAgdGhpcy5zdHJpbmdTZXQgPSBudWxsOwogICAg\nfQoKICAgIHB1YmxpYyBTZWxlY3RvckNvbnN0YW50KERvdWJsZSBkb3VibGVW\nYWx1ZSkgewogICAgICAgIHRoaXMudHlwZSA9IFNlbGVjdG9yRGF0YVR5cGUu\nRE9VQkxFOwogICAgICAgIHRoaXMuYm9vbFZhbHVlID0gbnVsbDsKICAgICAg\nICB0aGlzLmludFZhbHVlID0gbnVsbDsKICAgICAgICB0aGlzLmRvdWJsZVZh\nbHVlID0gZG91YmxlVmFsdWU7CiAgICAgICAgdGhpcy5zdHJpbmdWYWx1ZSA9\nIG51bGw7CiAgICAgICAgdGhpcy5zdHJpbmdTZXQgPSBudWxsOwogICAgfQoK\nICAgIHB1YmxpYyBTZWxlY3RvckNvbnN0YW50KFN0cmluZyBzdHJpbmdWYWx1\nZSkgewogICAgICAgIHRoaXMudHlwZSA9IFNlbGVjdG9yRGF0YVR5cGUuU1RS\nSU5HOwogICAgICAgIHRoaXMuYm9vbFZhbHVlID0gbnVsbDsKICAgICAgICB0\naGlzLmludFZhbHVlID0gbnVsbDsKICAgICAgICB0aGlzLmRvdWJsZVZhbHVl\nID0gbnVsbDsKICAgICAgICB0aGlzLnN0cmluZ1ZhbHVlID0gc3RyaW5nVmFs\ndWU7CiAgICAgICAgdGhpcy5zdHJpbmdTZXQgPSBudWxsOwogICAgfQoKICAg\nIHB1YmxpYyBTZWxlY3RvckNvbnN0YW50KFNldDxTdHJpbmc+IHN0cmluZ1Nl\ndCkgewogICAgICAgIHRoaXMudHlwZSA9IFNlbGVjdG9yRGF0YVR5cGUuU1RS\nSU5HX1NFVDsKICAgICAgICB0aGlzLmJvb2xWYWx1ZSA9IG51bGw7CiAgICAg\nICAgdGhpcy5pbnRWYWx1ZSA9IG51bGw7CiAgICAgICAgdGhpcy5kb3VibGVW\nYWx1ZSA9IG51bGw7CiAgICAgICAgdGhpcy5zdHJpbmdWYWx1ZSA9IG51bGw7\nCiAgICAgICAgdGhpcy5zdHJpbmdTZXQgPSBzdHJpbmdTZXQ7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgYWRkVG9TdHJpbmdTZXQoU3RyaW5nIHZhbHVlKSB0\naHJvd3MgUGFyc2VFeGNlcHRpb24gewogICAgICAgIGlmIChTZWxlY3RvckRh\ndGFUeXBlLlNUUklOR19TRVQgIT0gdHlwZSkKICAgICAgICAgICAgdGhyb3cg\nbmV3IFBhcnNlRXhjZXB0aW9uKGdldENsYXNzKCkgKyAiIEF0dGVtcHRpbmcg\ndG8gYWRkIHRvIGEgbm9uLXN0cmluZ19saXN0IHR5cGUgOiAiICsgdHlwZSk7\nCiAgICAgICAgaWYgKG51bGwgPT0gdGhpcy5zdHJpbmdTZXQpIHRocm93IG5l\ndyBQYXJzZUV4Y2VwdGlvbihnZXRDbGFzcygpICsKICAgICAgICAgICAgIiBB\ndHRlbXB0aW5nIHRvIGFkZCB0byBhIG51bGwgc3RyaW5nX2xpc3QgOiAiICsg\nc3RyaW5nU2V0KTsKICAgICAgICB0aGlzLnN0cmluZ1NldC5hZGQodmFsdWUp\nOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGlzTnVsbCgpIHsKICAgICAg\nICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICAgICAgY2FzZSBCT09MRUFOOgog\nICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gYm9vbFZhbHVlOwogICAg\nICAgICAgICBjYXNlIElOVDoKICAgICAgICAgICAgICAgIHJldHVybiBudWxs\nID09IGludFZhbHVlOwogICAgICAgICAgICBjYXNlIERPVUJMRToKICAgICAg\nICAgICAgICAgIHJldHVybiBudWxsID09IGRvdWJsZVZhbHVlOwogICAgICAg\nICAgICBjYXNlIFNUUklORzoKICAgICAgICAgICAgICAgIHJldHVybiBudWxs\nID09IHN0cmluZ1ZhbHVlOwogICAgICAgICAgICBjYXNlIFNUUklOR19TRVQ6\nCiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PSBzdHJpbmdTZXQ7CiAg\nICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcg\nSWxsZWdhbFN0YXRlRXhjZXB0aW9uKGdldENsYXNzKCkgKyAiIFVua25vd24g\ndHlwZSA/ICIgKyB0eXBlKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGlj\nIGJvb2xlYW4gaXNUcnVlKCkgdGhyb3dzIFNlbGVjdG9yRXZhbHVhdGlvbkV4\nY2VwdGlvbiB7CiAgICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgICAg\nIGNhc2UgQk9PTEVBTjoKICAgICAgICAgICAgICAgIHJldHVybiBudWxsICE9\nIGJvb2xWYWx1ZSAmJiBCb29sZWFuLlRSVUUuZXF1YWxzKGJvb2xWYWx1ZSk7\nCiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICB0aHJvdyBu\nZXcgU2VsZWN0b3JFdmFsdWF0aW9uRXhjZXB0aW9uKGdldENsYXNzKCkgKyAi\nIFVuZXhwZWN0ZWQgdHlwZSAiICsgdHlwZSArCiAgICAgICAgICAgICAgICAg\nICAgIiwgdmFsdWUgIiArIGdldFZhbHVlQXNTdHJpbmcoKSk7CiAgICAgICAg\nfQogICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgZ2V0VmFsdWVBc1N0cmluZygp\nIHRocm93cyBTZWxlY3RvckV2YWx1YXRpb25FeGNlcHRpb24gewogICAgICAg\nIHN3aXRjaCAodHlwZSkgewogICAgICAgICAgICBjYXNlIEJPT0xFQU46CiAg\nICAgICAgICAgICAgICByZXR1cm4gQm9vbGVhbi50b1N0cmluZyhib29sVmFs\ndWUpOwogICAgICAgICAgICBjYXNlIElOVDoKICAgICAgICAgICAgICAgIHJl\ndHVybiBJbnRlZ2VyLnRvU3RyaW5nKGludFZhbHVlKTsKICAgICAgICAgICAg\nY2FzZSBET1VCTEU6CiAgICAgICAgICAgICAgICByZXR1cm4gRG91YmxlLnRv\nU3RyaW5nKGRvdWJsZVZhbHVlKTsKICAgICAgICAgICAgY2FzZSBTVFJJTkc6\nCiAgICAgICAgICAgICAgICByZXR1cm4gc3RyaW5nVmFsdWU7CiAgICAgICAg\nICAgIGNhc2UgU1RSSU5HX1NFVDoKICAgICAgICAgICAgICAgIHJldHVybiBu\ndWxsICE9IHN0cmluZ1NldCA/IHN0cmluZ1NldC50b1N0cmluZygpIDogIm51\nbGwiOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgdGhy\nb3cgbmV3IFNlbGVjdG9yRXZhbHVhdGlvbkV4Y2VwdGlvbihnZXRDbGFzcygp\nICsgIiBVbmV4cGVjdGVkIHR5cGUgOiAiICsgdHlwZSk7CiAgICAgICAgfQog\nICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgdG9TdHJpbmcoKSB7CiAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgICAg\nICAgICBjYXNlIEJPT0xFQU46CiAgICAgICAgICAgICAgICAgICAgcmV0dXJu\nICJib29sZWFuIDogIiArIGdldFZhbHVlQXNTdHJpbmcoKTsKICAgICAgICAg\nICAgICAgIGNhc2UgSU5UOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAi\naW50IDogIiArIGdldFZhbHVlQXNTdHJpbmcoKTsKICAgICAgICAgICAgICAg\nIGNhc2UgRE9VQkxFOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAiZG91\nYmxlIDogIiArIGdldFZhbHVlQXNTdHJpbmcoKTsKICAgICAgICAgICAgICAg\nIGNhc2UgU1RSSU5HOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAic3Ry\naW5nIDogIiArIGdldFZhbHVlQXNTdHJpbmcoKTsKICAgICAgICAgICAgICAg\nIGNhc2UgU1RSSU5HX1NFVDoKICAgICAgICAgICAgICAgICAgICByZXR1cm4g\nInN0cmluZ19saXN0IDogIiArIGdldFZhbHVlQXNTdHJpbmcoKTsKICAgICAg\nICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgdGhyb3cg\nbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbihnZXRDbGFzcygpICsgIiBVbmV4\ncGVjdGVkIHR5cGUiKTsKICAgICAgICAgICAgfQogICAgICAgIH0gY2F0Y2gg\nKFNlbGVjdG9yRXZhbHVhdGlvbkV4Y2VwdGlvbiBzZUV4KSB7CiAgICAgICAg\nICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oZ2V0Q2xhc3Mo\nKSArICIgVW5leHBlY3RlZCBleGNlcHRpb24iLCBzZUV4KTsKICAgICAgICB9\nCiAgICB9CgogICAgcHVibGljIEJvb2xlYW4gZ2V0Qm9vbFZhbHVlKCkgdGhy\nb3dzIFNlbGVjdG9yRXZhbHVhdGlvbkV4Y2VwdGlvbiB7CiAgICAgICAgaWYg\nKFNlbGVjdG9yRGF0YVR5cGUuQk9PTEVBTiAhPSB0eXBlKQogICAgICAgICAg\nICB0aHJvdyBuZXcgU2VsZWN0b3JFdmFsdWF0aW9uRXhjZXB0aW9uKGdldENs\nYXNzKCkgKyAiIElsbGVnYWwgYWNjZXNzIHRvIGJvb2xlYW4gZm9yIHR5cGUg\nIiArIHR5cGUpOwogICAgICAgIHJldHVybiBib29sVmFsdWU7CiAgICB9Cgog\nICAgcHVibGljIEludGVnZXIgZ2V0SW50VmFsdWUoKSB0aHJvd3MgU2VsZWN0\nb3JFdmFsdWF0aW9uRXhjZXB0aW9uIHsKICAgICAgICBpZiAoU2VsZWN0b3JE\nYXRhVHlwZS5JTlQgIT0gdHlwZSkKICAgICAgICAgICAgdGhyb3cgbmV3IFNl\nbGVjdG9yRXZhbHVhdGlvbkV4Y2VwdGlvbihnZXRDbGFzcygpICsgIiBJbGxl\nZ2FsIGFjY2VzcyB0byBib29sZWFuIGZvciB0eXBlICIgKyB0eXBlKTsKICAg\nICAgICByZXR1cm4gaW50VmFsdWU7CiAgICB9CgogICAgcHVibGljIERvdWJs\nZSBnZXREb3VibGVWYWx1ZSgpIHRocm93cyBTZWxlY3RvckV2YWx1YXRpb25F\neGNlcHRpb24gewogICAgICAgIGlmIChTZWxlY3RvckRhdGFUeXBlLkRPVUJM\nRSAhPSB0eXBlKQogICAgICAgICAgICB0aHJvdyBuZXcgU2VsZWN0b3JFdmFs\ndWF0aW9uRXhjZXB0aW9uKGdldENsYXNzKCkgKyAiIElsbGVnYWwgYWNjZXNz\nIHRvIGJvb2xlYW4gZm9yIHR5cGUgIiArIHR5cGUpOwogICAgICAgIHJldHVy\nbiBkb3VibGVWYWx1ZTsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nIGdldFN0\ncmluZ1ZhbHVlKCkgdGhyb3dzIFNlbGVjdG9yRXZhbHVhdGlvbkV4Y2VwdGlv\nbiB7CiAgICAgICAgaWYgKFNlbGVjdG9yRGF0YVR5cGUuU1RSSU5HICE9IHR5\ncGUpCiAgICAgICAgICAgIHRocm93IG5ldyBTZWxlY3RvckV2YWx1YXRpb25F\neGNlcHRpb24oZ2V0Q2xhc3MoKSArICIgSWxsZWdhbCBhY2Nlc3MgdG8gYm9v\nbGVhbiBmb3IgdHlwZSAiICsgdHlwZSk7CiAgICAgICAgcmV0dXJuIHN0cmlu\nZ1ZhbHVlOwogICAgfQoKICAgIHB1YmxpYyBTZXQ8U3RyaW5nPiBnZXRTdHJp\nbmdTZXQoKSB0aHJvd3MgU2VsZWN0b3JFdmFsdWF0aW9uRXhjZXB0aW9uIHsK\nICAgICAgICBpZiAoU2VsZWN0b3JEYXRhVHlwZS5TVFJJTkdfU0VUICE9IHR5\ncGUpCiAgICAgICAgICAgIHRocm93IG5ldyBTZWxlY3RvckV2YWx1YXRpb25F\neGNlcHRpb24oZ2V0Q2xhc3MoKSArICIgSWxsZWdhbCBhY2Nlc3MgdG8gYm9v\nbGVhbiBmb3IgdHlwZSAiICsgdHlwZSk7CiAgICAgICAgLy8gd3JhcCB0byBw\ncmV2ZW50IGNoYW5nZXMgLi4uCiAgICAgICAgcmV0dXJuIENvbGxlY3Rpb25z\nLnVubW9kaWZpYWJsZVNldChzdHJpbmdTZXQpOwogICAgfQp9Cg==\n","encoding":"base64"}

