{"sha":"dedda05f4d77f6ccd9505c223a1e01012ce2cc57","node_id":"MDQ6QmxvYjE1NzU5NTY6ZGVkZGEwNWY0ZDc3ZjZjY2Q5NTA1YzIyM2ExZTAxMDEyY2UyY2M1Nw==","size":10318,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/dedda05f4d77f6ccd9505c223a1e01012ce2cc57","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5qbXMuc2VsZWN0b3I7CgovKioKICog\nVG8gZHVtcCB0aGUgQVNUIC0gdXNlZCBPTkxZIGZvciBkZWJ1Z2dpbmcKICov\nCnB1YmxpYyBjbGFzcyBUcmVlRHVtcGVyU2VsZWN0b3JQYXJzZXJWaXNpdG9y\nIGltcGxlbWVudHMgU2VsZWN0b3JQYXJzZXJWaXNpdG9yewoKICAgIHByaXZh\ndGUgc3RhdGljIGZpbmFsIGludCBJTkRFTlRfUEVSX0xFVkVMID0gNDsKCiAg\nICBwcml2YXRlIHN0YXRpYyB2b2lkIGVtaXREZWJ1ZyhTaW1wbGVOb2RlIG5v\nZGUsIFNlbGVjdG9yRXZhbFN0YXRlIGRhdGEsIGJvb2xlYW4gc3RhcnQpCiAg\nICAgICAgdGhyb3dzIFNlbGVjdG9yRXZhbHVhdGlvbkV4Y2VwdGlvbiB7Cgog\nICAgICAgIGlmICghc3RhcnQgJiYgMCA9PSBub2RlLmpqdEdldE51bUNoaWxk\ncmVuKCkpIHJldHVybiA7CgogICAgICAgIGZpbmFsIFN0cmluZ0J1aWxkZXIg\nc2IgPSBuZXcgU3RyaW5nQnVpbGRlcigpOwogICAgICAgIGludCBjb3VudCA9\nIGRhdGEuZ2V0RGVidWdJbmRlbnRDb3VudCgpOwogICAgICAgIGZvciAoaW50\nIGkgPSAwO2kgPCBjb3VudCAqIElOREVOVF9QRVJfTEVWRUw7IGkgKyspewog\nICAgICAgICAgICBzYi5hcHBlbmQoJyAnKTsKICAgICAgICB9CgogICAgICAg\nIHNiLmFwcGVuZChub2RlLmdldENsYXNzKCkuZ2V0TmFtZSgpKS5hcHBlbmQo\nIiAtPiAiKS5hcHBlbmQobm9kZSk7CiAgICAgICAgc2IuYXBwZW5kKCIsIENv\nbnN0YW50IC0+ICIpLmFwcGVuZChub2RlLmdldENvbnN0YW50VmFsdWVJbnRl\ncm5hbCgpKTsKICAgICAgICBzYi5hcHBlbmQoIiwgRnVuYyAtPiAiKS5hcHBl\nbmQobm9kZS5nZXRFeHByRnVuY3Rpb25JbnRlcm5hbCgpKTsKICAgICAgICBp\nZiAoMCAhPSBub2RlLmpqdEdldE51bUNoaWxkcmVuKCkpIHNiLmFwcGVuZChz\ndGFydCA/ICIgT1BFTiIgOiAiIENMT1NFIik7CgogICAgICAgIE15Tm9kZS5s\nb2dnZXIudHJhY2Uoc2IudG9TdHJpbmcoKSk7CiAgICB9CgogICAgQE92ZXJy\naWRlCiAgICBwdWJsaWMgT2JqZWN0IHZpc2l0KFNpbXBsZU5vZGUgbm9kZSwg\nU2VsZWN0b3JFdmFsU3RhdGUgZGF0YSkgdGhyb3dzIFNlbGVjdG9yRXZhbHVh\ndGlvbkV4Y2VwdGlvbiB7CiAgICAgICAgZW1pdERlYnVnKG5vZGUsIGRhdGEs\nIHRydWUpOwogICAgICAgIGRhdGEuc2V0RGVidWdJbmRlbnRDb3VudChkYXRh\nLmdldERlYnVnSW5kZW50Q291bnQoKSArIDEpOwogICAgICAgIG5vZGUuY2hp\nbGRyZW5BY2NlcHQodGhpcywgZGF0YSk7CiAgICAgICAgZGF0YS5zZXREZWJ1\nZ0luZGVudENvdW50KGRhdGEuZ2V0RGVidWdJbmRlbnRDb3VudCgpIC0gMSk7\nCiAgICAgICAgZW1pdERlYnVnKG5vZGUsIGRhdGEsIGZhbHNlKTsKICAgICAg\nICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1Ymxp\nYyBPYmplY3QgdmlzaXQoQVNUT3JFeHByIG5vZGUsIFNlbGVjdG9yRXZhbFN0\nYXRlIGRhdGEpIHRocm93cyBTZWxlY3RvckV2YWx1YXRpb25FeGNlcHRpb24g\newogICAgICAgIGVtaXREZWJ1Zyhub2RlLCBkYXRhLCB0cnVlKTsKICAgICAg\nICBkYXRhLnNldERlYnVnSW5kZW50Q291bnQoZGF0YS5nZXREZWJ1Z0luZGVu\ndENvdW50KCkgKyAxKTsKICAgICAgICBub2RlLmNoaWxkcmVuQWNjZXB0KHRo\naXMsIGRhdGEpOwogICAgICAgIGRhdGEuc2V0RGVidWdJbmRlbnRDb3VudChk\nYXRhLmdldERlYnVnSW5kZW50Q291bnQoKSAtIDEpOwogICAgICAgIGVtaXRE\nZWJ1Zyhub2RlLCBkYXRhLCBmYWxzZSk7CiAgICAgICAgcmV0dXJuIG51bGw7\nCiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgT2JqZWN0IHZpc2l0\nKEFTVEFuZEV4cHIgbm9kZSwgU2VsZWN0b3JFdmFsU3RhdGUgZGF0YSkgdGhy\nb3dzIFNlbGVjdG9yRXZhbHVhdGlvbkV4Y2VwdGlvbiB7CiAgICAgICAgZW1p\ndERlYnVnKG5vZGUsIGRhdGEsIHRydWUpOwogICAgICAgIGRhdGEuc2V0RGVi\ndWdJbmRlbnRDb3VudChkYXRhLmdldERlYnVnSW5kZW50Q291bnQoKSArIDEp\nOwogICAgICAgIG5vZGUuY2hpbGRyZW5BY2NlcHQodGhpcywgZGF0YSk7CiAg\nICAgICAgZGF0YS5zZXREZWJ1Z0luZGVudENvdW50KGRhdGEuZ2V0RGVidWdJ\nbmRlbnRDb3VudCgpIC0gMSk7CiAgICAgICAgZW1pdERlYnVnKG5vZGUsIGRh\ndGEsIGZhbHNlKTsKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICBA\nT3ZlcnJpZGUKICAgIHB1YmxpYyBPYmplY3QgdmlzaXQoQVNUTm90RXhwciBu\nb2RlLCBTZWxlY3RvckV2YWxTdGF0ZSBkYXRhKSB0aHJvd3MgU2VsZWN0b3JF\ndmFsdWF0aW9uRXhjZXB0aW9uIHsKICAgICAgICBlbWl0RGVidWcobm9kZSwg\nZGF0YSwgdHJ1ZSk7CiAgICAgICAgZGF0YS5zZXREZWJ1Z0luZGVudENvdW50\nKGRhdGEuZ2V0RGVidWdJbmRlbnRDb3VudCgpICsgMSk7CiAgICAgICAgbm9k\nZS5jaGlsZHJlbkFjY2VwdCh0aGlzLCBkYXRhKTsKICAgICAgICBkYXRhLnNl\ndERlYnVnSW5kZW50Q291bnQoZGF0YS5nZXREZWJ1Z0luZGVudENvdW50KCkg\nLSAxKTsKICAgICAgICBlbWl0RGVidWcobm9kZSwgZGF0YSwgZmFsc2UpOwog\nICAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIEBPdmVycmlkZQogICAg\ncHVibGljIE9iamVjdCB2aXNpdChBU1RHcmVhdGVyVGhhbiBub2RlLCBTZWxl\nY3RvckV2YWxTdGF0ZSBkYXRhKSB0aHJvd3MgU2VsZWN0b3JFdmFsdWF0aW9u\nRXhjZXB0aW9uIHsKICAgICAgICBlbWl0RGVidWcobm9kZSwgZGF0YSwgdHJ1\nZSk7CiAgICAgICAgZGF0YS5zZXREZWJ1Z0luZGVudENvdW50KGRhdGEuZ2V0\nRGVidWdJbmRlbnRDb3VudCgpICsgMSk7CiAgICAgICAgbm9kZS5jaGlsZHJl\nbkFjY2VwdCh0aGlzLCBkYXRhKTsKICAgICAgICBkYXRhLnNldERlYnVnSW5k\nZW50Q291bnQoZGF0YS5nZXREZWJ1Z0luZGVudENvdW50KCkgLSAxKTsKICAg\nICAgICBlbWl0RGVidWcobm9kZSwgZGF0YSwgZmFsc2UpOwogICAgICAgIHJl\ndHVybiBudWxsOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIE9i\namVjdCB2aXNpdChBU1RMZXNzVGhhbiBub2RlLCBTZWxlY3RvckV2YWxTdGF0\nZSBkYXRhKSB0aHJvd3MgU2VsZWN0b3JFdmFsdWF0aW9uRXhjZXB0aW9uIHsK\nICAgICAgICBlbWl0RGVidWcobm9kZSwgZGF0YSwgdHJ1ZSk7CiAgICAgICAg\nZGF0YS5zZXREZWJ1Z0luZGVudENvdW50KGRhdGEuZ2V0RGVidWdJbmRlbnRD\nb3VudCgpICsgMSk7CiAgICAgICAgbm9kZS5jaGlsZHJlbkFjY2VwdCh0aGlz\nLCBkYXRhKTsKICAgICAgICBkYXRhLnNldERlYnVnSW5kZW50Q291bnQoZGF0\nYS5nZXREZWJ1Z0luZGVudENvdW50KCkgLSAxKTsKICAgICAgICBlbWl0RGVi\ndWcobm9kZSwgZGF0YSwgZmFsc2UpOwogICAgICAgIHJldHVybiBudWxsOwog\nICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIE9iamVjdCB2aXNpdChB\nU1RMZXNzVGhhbkVxdWFsVG8gbm9kZSwgU2VsZWN0b3JFdmFsU3RhdGUgZGF0\nYSkgdGhyb3dzIFNlbGVjdG9yRXZhbHVhdGlvbkV4Y2VwdGlvbiB7CiAgICAg\nICAgZW1pdERlYnVnKG5vZGUsIGRhdGEsIHRydWUpOwogICAgICAgIGRhdGEu\nc2V0RGVidWdJbmRlbnRDb3VudChkYXRhLmdldERlYnVnSW5kZW50Q291bnQo\nKSArIDEpOwogICAgICAgIG5vZGUuY2hpbGRyZW5BY2NlcHQodGhpcywgZGF0\nYSk7CiAgICAgICAgZGF0YS5zZXREZWJ1Z0luZGVudENvdW50KGRhdGEuZ2V0\nRGVidWdJbmRlbnRDb3VudCgpIC0gMSk7CiAgICAgICAgZW1pdERlYnVnKG5v\nZGUsIGRhdGEsIGZhbHNlKTsKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0K\nCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBPYmplY3QgdmlzaXQoQVNUR3Jl\nYXRlclRoYW5FcXVhbFRvIG5vZGUsIFNlbGVjdG9yRXZhbFN0YXRlIGRhdGEp\nIHRocm93cyBTZWxlY3RvckV2YWx1YXRpb25FeGNlcHRpb24gewogICAgICAg\nIGVtaXREZWJ1Zyhub2RlLCBkYXRhLCB0cnVlKTsKICAgICAgICBkYXRhLnNl\ndERlYnVnSW5kZW50Q291bnQoZGF0YS5nZXREZWJ1Z0luZGVudENvdW50KCkg\nKyAxKTsKICAgICAgICBub2RlLmNoaWxkcmVuQWNjZXB0KHRoaXMsIGRhdGEp\nOwogICAgICAgIGRhdGEuc2V0RGVidWdJbmRlbnRDb3VudChkYXRhLmdldERl\nYnVnSW5kZW50Q291bnQoKSAtIDEpOwogICAgICAgIGVtaXREZWJ1Zyhub2Rl\nLCBkYXRhLCBmYWxzZSk7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9Cgog\nICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgT2JqZWN0IHZpc2l0KEFTVEVxdWFs\nVG8gbm9kZSwgU2VsZWN0b3JFdmFsU3RhdGUgZGF0YSkgdGhyb3dzIFNlbGVj\ndG9yRXZhbHVhdGlvbkV4Y2VwdGlvbiB7CiAgICAgICAgZW1pdERlYnVnKG5v\nZGUsIGRhdGEsIHRydWUpOwogICAgICAgIGRhdGEuc2V0RGVidWdJbmRlbnRD\nb3VudChkYXRhLmdldERlYnVnSW5kZW50Q291bnQoKSArIDEpOwogICAgICAg\nIG5vZGUuY2hpbGRyZW5BY2NlcHQodGhpcywgZGF0YSk7CiAgICAgICAgZGF0\nYS5zZXREZWJ1Z0luZGVudENvdW50KGRhdGEuZ2V0RGVidWdJbmRlbnRDb3Vu\ndCgpIC0gMSk7CiAgICAgICAgZW1pdERlYnVnKG5vZGUsIGRhdGEsIGZhbHNl\nKTsKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICBAT3ZlcnJpZGUK\nICAgIHB1YmxpYyBPYmplY3QgdmlzaXQoQVNUTm90RXF1YWxUbyBub2RlLCBT\nZWxlY3RvckV2YWxTdGF0ZSBkYXRhKSB0aHJvd3MgU2VsZWN0b3JFdmFsdWF0\naW9uRXhjZXB0aW9uIHsKICAgICAgICBlbWl0RGVidWcobm9kZSwgZGF0YSwg\ndHJ1ZSk7CiAgICAgICAgZGF0YS5zZXREZWJ1Z0luZGVudENvdW50KGRhdGEu\nZ2V0RGVidWdJbmRlbnRDb3VudCgpICsgMSk7CiAgICAgICAgbm9kZS5jaGls\nZHJlbkFjY2VwdCh0aGlzLCBkYXRhKTsKICAgICAgICBkYXRhLnNldERlYnVn\nSW5kZW50Q291bnQoZGF0YS5nZXREZWJ1Z0luZGVudENvdW50KCkgLSAxKTsK\nICAgICAgICBlbWl0RGVidWcobm9kZSwgZGF0YSwgZmFsc2UpOwogICAgICAg\nIHJldHVybiBudWxsOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGlj\nIE9iamVjdCB2aXNpdChBU1RJc051bGxFeHByIG5vZGUsIFNlbGVjdG9yRXZh\nbFN0YXRlIGRhdGEpIHRocm93cyBTZWxlY3RvckV2YWx1YXRpb25FeGNlcHRp\nb24gewogICAgICAgIGVtaXREZWJ1Zyhub2RlLCBkYXRhLCB0cnVlKTsKICAg\nICAgICBkYXRhLnNldERlYnVnSW5kZW50Q291bnQoZGF0YS5nZXREZWJ1Z0lu\nZGVudENvdW50KCkgKyAxKTsKICAgICAgICBub2RlLmNoaWxkcmVuQWNjZXB0\nKHRoaXMsIGRhdGEpOwogICAgICAgIGRhdGEuc2V0RGVidWdJbmRlbnRDb3Vu\ndChkYXRhLmdldERlYnVnSW5kZW50Q291bnQoKSAtIDEpOwogICAgICAgIGVt\naXREZWJ1Zyhub2RlLCBkYXRhLCBmYWxzZSk7CiAgICAgICAgcmV0dXJuIG51\nbGw7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgT2JqZWN0IHZp\nc2l0KEFTVEJldHdlZW5FeHByIG5vZGUsIFNlbGVjdG9yRXZhbFN0YXRlIGRh\ndGEpIHRocm93cyBTZWxlY3RvckV2YWx1YXRpb25FeGNlcHRpb24gewogICAg\nICAgIGVtaXREZWJ1Zyhub2RlLCBkYXRhLCB0cnVlKTsKICAgICAgICBkYXRh\nLnNldERlYnVnSW5kZW50Q291bnQoZGF0YS5nZXREZWJ1Z0luZGVudENvdW50\nKCkgKyAxKTsKICAgICAgICBub2RlLmNoaWxkcmVuQWNjZXB0KHRoaXMsIGRh\ndGEpOwogICAgICAgIGRhdGEuc2V0RGVidWdJbmRlbnRDb3VudChkYXRhLmdl\ndERlYnVnSW5kZW50Q291bnQoKSAtIDEpOwogICAgICAgIGVtaXREZWJ1Zyhu\nb2RlLCBkYXRhLCBmYWxzZSk7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9\nCgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgT2JqZWN0IHZpc2l0KEFTVElu\nRXhwciBub2RlLCBTZWxlY3RvckV2YWxTdGF0ZSBkYXRhKSB0aHJvd3MgU2Vs\nZWN0b3JFdmFsdWF0aW9uRXhjZXB0aW9uIHsKICAgICAgICBlbWl0RGVidWco\nbm9kZSwgZGF0YSwgdHJ1ZSk7CiAgICAgICAgZGF0YS5zZXREZWJ1Z0luZGVu\ndENvdW50KGRhdGEuZ2V0RGVidWdJbmRlbnRDb3VudCgpICsgMSk7CiAgICAg\nICAgbm9kZS5jaGlsZHJlbkFjY2VwdCh0aGlzLCBkYXRhKTsKICAgICAgICBk\nYXRhLnNldERlYnVnSW5kZW50Q291bnQoZGF0YS5nZXREZWJ1Z0luZGVudENv\ndW50KCkgLSAxKTsKICAgICAgICBlbWl0RGVidWcobm9kZSwgZGF0YSwgZmFs\nc2UpOwogICAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIEBPdmVycmlk\nZQogICAgcHVibGljIE9iamVjdCB2aXNpdChBU1RMaWtlRXhwciBub2RlLCBT\nZWxlY3RvckV2YWxTdGF0ZSBkYXRhKSB0aHJvd3MgU2VsZWN0b3JFdmFsdWF0\naW9uRXhjZXB0aW9uIHsKICAgICAgICBlbWl0RGVidWcobm9kZSwgZGF0YSwg\ndHJ1ZSk7CiAgICAgICAgZGF0YS5zZXREZWJ1Z0luZGVudENvdW50KGRhdGEu\nZ2V0RGVidWdJbmRlbnRDb3VudCgpICsgMSk7CiAgICAgICAgbm9kZS5jaGls\nZHJlbkFjY2VwdCh0aGlzLCBkYXRhKTsKICAgICAgICBkYXRhLnNldERlYnVn\nSW5kZW50Q291bnQoZGF0YS5nZXREZWJ1Z0luZGVudENvdW50KCkgLSAxKTsK\nICAgICAgICBlbWl0RGVidWcobm9kZSwgZGF0YSwgZmFsc2UpOwogICAgICAg\nIHJldHVybiBudWxsOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGlj\nIE9iamVjdCB2aXNpdChBU1RBZGRFeHByIG5vZGUsIFNlbGVjdG9yRXZhbFN0\nYXRlIGRhdGEpIHRocm93cyBTZWxlY3RvckV2YWx1YXRpb25FeGNlcHRpb24g\newogICAgICAgIGVtaXREZWJ1Zyhub2RlLCBkYXRhLCB0cnVlKTsKICAgICAg\nICBkYXRhLnNldERlYnVnSW5kZW50Q291bnQoZGF0YS5nZXREZWJ1Z0luZGVu\ndENvdW50KCkgKyAxKTsKICAgICAgICBub2RlLmNoaWxkcmVuQWNjZXB0KHRo\naXMsIGRhdGEpOwogICAgICAgIGRhdGEuc2V0RGVidWdJbmRlbnRDb3VudChk\nYXRhLmdldERlYnVnSW5kZW50Q291bnQoKSAtIDEpOwogICAgICAgIGVtaXRE\nZWJ1Zyhub2RlLCBkYXRhLCBmYWxzZSk7CiAgICAgICAgcmV0dXJuIG51bGw7\nCiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgT2JqZWN0IHZpc2l0\nKEFTVFN1YkV4cHIgbm9kZSwgU2VsZWN0b3JFdmFsU3RhdGUgZGF0YSkgdGhy\nb3dzIFNlbGVjdG9yRXZhbHVhdGlvbkV4Y2VwdGlvbiB7CiAgICAgICAgZW1p\ndERlYnVnKG5vZGUsIGRhdGEsIHRydWUpOwogICAgICAgIGRhdGEuc2V0RGVi\ndWdJbmRlbnRDb3VudChkYXRhLmdldERlYnVnSW5kZW50Q291bnQoKSArIDEp\nOwogICAgICAgIG5vZGUuY2hpbGRyZW5BY2NlcHQodGhpcywgZGF0YSk7CiAg\nICAgICAgZGF0YS5zZXREZWJ1Z0luZGVudENvdW50KGRhdGEuZ2V0RGVidWdJ\nbmRlbnRDb3VudCgpIC0gMSk7CiAgICAgICAgZW1pdERlYnVnKG5vZGUsIGRh\ndGEsIGZhbHNlKTsKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICBA\nT3ZlcnJpZGUKICAgIHB1YmxpYyBPYmplY3QgdmlzaXQoQVNURGl2aWRlRXhw\nciBub2RlLCBTZWxlY3RvckV2YWxTdGF0ZSBkYXRhKSB0aHJvd3MgU2VsZWN0\nb3JFdmFsdWF0aW9uRXhjZXB0aW9uIHsKICAgICAgICBlbWl0RGVidWcobm9k\nZSwgZGF0YSwgdHJ1ZSk7CiAgICAgICAgZGF0YS5zZXREZWJ1Z0luZGVudENv\ndW50KGRhdGEuZ2V0RGVidWdJbmRlbnRDb3VudCgpICsgMSk7CiAgICAgICAg\nbm9kZS5jaGlsZHJlbkFjY2VwdCh0aGlzLCBkYXRhKTsKICAgICAgICBkYXRh\nLnNldERlYnVnSW5kZW50Q291bnQoZGF0YS5nZXREZWJ1Z0luZGVudENvdW50\nKCkgLSAxKTsKICAgICAgICBlbWl0RGVidWcobm9kZSwgZGF0YSwgZmFsc2Up\nOwogICAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIEBPdmVycmlkZQog\nICAgcHVibGljIE9iamVjdCB2aXNpdChBU1RNdWx0aXBseUV4cHIgbm9kZSwg\nU2VsZWN0b3JFdmFsU3RhdGUgZGF0YSkgdGhyb3dzIFNlbGVjdG9yRXZhbHVh\ndGlvbkV4Y2VwdGlvbiB7CiAgICAgICAgZW1pdERlYnVnKG5vZGUsIGRhdGEs\nIHRydWUpOwogICAgICAgIGRhdGEuc2V0RGVidWdJbmRlbnRDb3VudChkYXRh\nLmdldERlYnVnSW5kZW50Q291bnQoKSArIDEpOwogICAgICAgIG5vZGUuY2hp\nbGRyZW5BY2NlcHQodGhpcywgZGF0YSk7CiAgICAgICAgZGF0YS5zZXREZWJ1\nZ0luZGVudENvdW50KGRhdGEuZ2V0RGVidWdJbmRlbnRDb3VudCgpIC0gMSk7\nCiAgICAgICAgZW1pdERlYnVnKG5vZGUsIGRhdGEsIGZhbHNlKTsKICAgICAg\nICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1Ymxp\nYyBPYmplY3QgdmlzaXQoQVNUTmVnYXRlRXhwciBub2RlLCBTZWxlY3RvckV2\nYWxTdGF0ZSBkYXRhKSB0aHJvd3MgU2VsZWN0b3JFdmFsdWF0aW9uRXhjZXB0\naW9uIHsKICAgICAgICBlbWl0RGVidWcobm9kZSwgZGF0YSwgdHJ1ZSk7CiAg\nICAgICAgZGF0YS5zZXREZWJ1Z0luZGVudENvdW50KGRhdGEuZ2V0RGVidWdJ\nbmRlbnRDb3VudCgpICsgMSk7CiAgICAgICAgbm9kZS5jaGlsZHJlbkFjY2Vw\ndCh0aGlzLCBkYXRhKTsKICAgICAgICBkYXRhLnNldERlYnVnSW5kZW50Q291\nbnQoZGF0YS5nZXREZWJ1Z0luZGVudENvdW50KCkgLSAxKTsKICAgICAgICBl\nbWl0RGVidWcobm9kZSwgZGF0YSwgZmFsc2UpOwogICAgICAgIHJldHVybiBu\ndWxsOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIE9iamVjdCB2\naXNpdChBU1RMb29rdXBFeHByIG5vZGUsIFNlbGVjdG9yRXZhbFN0YXRlIGRh\ndGEpIHRocm93cyBTZWxlY3RvckV2YWx1YXRpb25FeGNlcHRpb24gewogICAg\nICAgIGVtaXREZWJ1Zyhub2RlLCBkYXRhLCB0cnVlKTsKICAgICAgICBkYXRh\nLnNldERlYnVnSW5kZW50Q291bnQoZGF0YS5nZXREZWJ1Z0luZGVudENvdW50\nKCkgKyAxKTsKICAgICAgICBub2RlLmNoaWxkcmVuQWNjZXB0KHRoaXMsIGRh\ndGEpOwogICAgICAgIGRhdGEuc2V0RGVidWdJbmRlbnRDb3VudChkYXRhLmdl\ndERlYnVnSW5kZW50Q291bnQoKSAtIDEpOwogICAgICAgIGVtaXREZWJ1Zyhu\nb2RlLCBkYXRhLCBmYWxzZSk7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9\nCgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgT2JqZWN0IHZpc2l0KEFTVENv\nbnN0YW50IG5vZGUsIFNlbGVjdG9yRXZhbFN0YXRlIGRhdGEpIHRocm93cyBT\nZWxlY3RvckV2YWx1YXRpb25FeGNlcHRpb24gewogICAgICAgIGVtaXREZWJ1\nZyhub2RlLCBkYXRhLCB0cnVlKTsKICAgICAgICBpZiAoMCAhPSBub2RlLmpq\ndEdldE51bUNoaWxkcmVuKCkpIHRocm93IG5ldyBTZWxlY3RvckV2YWx1YXRp\nb25FeGNlcHRpb24oZ2V0Q2xhc3MoKSArCiAgICAgICAgICAgICIgcGFyc2Ug\nZXJyb3IgPyAiICsgbm9kZSk7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9\nCgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgT2JqZWN0IHZpc2l0KEFTVFN0\ncmluZ1ZhcmFyZ1BhcmFtcyBub2RlLCBTZWxlY3RvckV2YWxTdGF0ZSBkYXRh\nKSB0aHJvd3MgU2VsZWN0b3JFdmFsdWF0aW9uRXhjZXB0aW9uIHsKICAgICAg\nICBlbWl0RGVidWcobm9kZSwgZGF0YSwgdHJ1ZSk7CiAgICAgICAgaWYgKDAg\nIT0gbm9kZS5qanRHZXROdW1DaGlsZHJlbigpKSB0aHJvdyBuZXcgU2VsZWN0\nb3JFdmFsdWF0aW9uRXhjZXB0aW9uKGdldENsYXNzKCkgKwogICAgICAgICAg\nICAiIHBhcnNlIGVycm9yID8gIiArIG5vZGUpOwogICAgICAgIHJldHVybiBu\ndWxsOwogICAgfQp9Cg==\n","encoding":"base64"}

