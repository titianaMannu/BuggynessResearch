{"sha":"59170e7944e00ad9e0fbad0c3627a133e778a213","node_id":"MDQ6QmxvYjE1NzU5NTY6NTkxNzBlNzk0NGUwMGFkOWUwZmJhZDBjMzYyN2ExMzNlNzc4YTIxMw==","size":2798,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/59170e7944e00ad9e0fbad0c3627a133e778a213","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5qbXMuc2VsZWN0b3I7CgppbXBvcnQg\nb3JnLmFwYWNoZS5oZWR3aWcuam1zLm1lc3NhZ2UuTWVzc2FnZUltcGw7Cgov\nKioKICogVW5hcnkgYXJpdGhlbWF0aWMgb3BlcmF0aW9ucwogKi8KcHVibGlj\nIGFic3RyYWN0IGNsYXNzIFVuYXJ5QXJpdGhtZXRpY0Z1bmN0aW9uIGltcGxl\nbWVudHMgRXhwckZ1bmN0aW9uIHsKCiAgICBwdWJsaWMgc3RhdGljIGZpbmFs\nIFVuYXJ5QXJpdGhtZXRpY0Z1bmN0aW9uIE5FR0FURV9GVU5DVElPTiA9IG5l\ndyBVbmFyeUFyaXRobWV0aWNGdW5jdGlvbigpIHsKCiAgICAgICAgQE92ZXJy\naWRlCiAgICAgICAgcHJvdGVjdGVkIFNlbGVjdG9yQ29uc3RhbnQgZXZhbHVh\ndGVJbXBsKFNlbGVjdG9yQ29uc3RhbnQgdmFsdWUsIE1lc3NhZ2VJbXBsIG1l\nc3NhZ2UpCiAgICAgICAgICAgIHRocm93cyBTZWxlY3RvckV2YWx1YXRpb25F\neGNlcHRpb24gewoKICAgICAgICAgICAgc3dpdGNoICh2YWx1ZS50eXBlKSB7\nCiAgICAgICAgICAgICAgICBjYXNlIElOVDogewogICAgICAgICAgICAgICAg\nICAgIEludGVnZXIgdmFsID0gdmFsdWUuZ2V0SW50VmFsdWUoKTsKICAgICAg\nICAgICAgICAgICAgICBpZiAobnVsbCA9PSB2YWwpIHJldHVybiBuZXcgU2Vs\nZWN0b3JDb25zdGFudCgoSW50ZWdlcikgbnVsbCk7CiAgICAgICAgICAgICAg\nICAgICAgcmV0dXJuIG5ldyBTZWxlY3RvckNvbnN0YW50KC0oaW50KSB2YWwp\nOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2FzZSBET1VC\nTEU6IHsKICAgICAgICAgICAgICAgICAgICBEb3VibGUgdmFsID0gdmFsdWUu\nZ2V0RG91YmxlVmFsdWUoKTsKICAgICAgICAgICAgICAgICAgICBpZiAobnVs\nbCA9PSB2YWwpIHJldHVybiBuZXcgU2VsZWN0b3JDb25zdGFudCgoRG91Ymxl\nKSBudWxsKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFNlbGVj\ndG9yQ29uc3RhbnQoLShkb3VibGUpIHZhbCk7CiAgICAgICAgICAgICAgICB9\nCiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAg\nIHRocm93IG5ldyBTZWxlY3RvckV2YWx1YXRpb25FeGNlcHRpb24oZ2V0Q2xh\nc3MoKSArICIgSW52YWxpZCB2YWx1ZSB0eXBlID8gIiArIHZhbHVlKTsKICAg\nICAgICAgICAgfQogICAgICAgIH0KICAgIH07CgogICAgcHVibGljIHZvaWQg\nZXZhbHVhdGUoU2VsZWN0b3JFdmFsU3RhdGUgc3RhdGUpIHRocm93cyBTZWxl\nY3RvckV2YWx1YXRpb25FeGNlcHRpb24gewogICAgICAgIGlmIChzdGF0ZS5n\nZXRTdGFjaygpLnNpemUoKSA8IDEpCiAgICAgICAgICAgIHRocm93IG5ldyBT\nZWxlY3RvckV2YWx1YXRpb25FeGNlcHRpb24oZ2V0Q2xhc3MoKSArICIgc3Rh\nY2sgY29ycnVwdGlvbiA/ICIgKyBzdGF0ZS5nZXRTdGFjaygpKTsKCiAgICAg\nICAgU2VsZWN0b3JDb25zdGFudCB2YWx1ZSA9IHN0YXRlLmdldFN0YWNrKCku\ncG9wKCk7CgogICAgICAgIFNlbGVjdG9yQ29uc3RhbnQgcmVzdWx0ID0gZXZh\nbHVhdGVJbXBsKHZhbHVlLCBzdGF0ZS5nZXRNZXNzYWdlKCkpOwoKICAgICAg\nICBpZiAobnVsbCAhPSByZXN1bHQpIHN0YXRlLmdldFN0YWNrKCkucHVzaChy\nZXN1bHQpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgdGhyb3cgbmV3IFNl\nbGVjdG9yRXZhbHVhdGlvbkV4Y2VwdGlvbihnZXRDbGFzcygpICsKICAgICAg\nICAgICAgICAgICIgVW5leHBlY3RlZCB0byByZXR1cm4gYSBudWxsIHJlc3Bv\nbnNlIGluIGJpbmFyeSBmdW5jdGlvbiBldmFsdWF0aW9uIik7CiAgICB9Cgog\nICAgcHJvdGVjdGVkIGFic3RyYWN0IFNlbGVjdG9yQ29uc3RhbnQgZXZhbHVh\ndGVJbXBsKFNlbGVjdG9yQ29uc3RhbnQgdmFsdWUsIE1lc3NhZ2VJbXBsIG1l\nc3NhZ2UpCiAgICAgICAgdGhyb3dzIFNlbGVjdG9yRXZhbHVhdGlvbkV4Y2Vw\ndGlvbjsKCgoKICAgIEBPdmVycmlkZQogICAgcHVibGljIFN0cmluZyB0b1N0\ncmluZygpewogICAgICAgIHJldHVybiBnZXRDbGFzcygpLmdldE5hbWUoKTsK\nICAgIH0KfQo=\n","encoding":"base64"}

