{"sha":"24957d374e1786df465588b017e02fb2dfa29bd0","node_id":"MDQ6QmxvYjE1NzU5NTY6MjQ5NTdkMzc0ZTE3ODZkZjQ2NTU4OGIwMTdlMDJmYjJkZmEyOWJkMA==","size":13237,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/24957d374e1786df465588b017e02fb2dfa29bd0","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5qbXMuc2VsZWN0b3I7CgppbXBvcnQg\nb3JnLmFwYWNoZS5oZWR3aWcuam1zLm1lc3NhZ2UuTWVzc2FnZUltcGw7Cgov\nKioKICogQ29tcGFyaXNvbiBvZiB2YWx1ZXMgLi4KICovCnB1YmxpYyBhYnN0\ncmFjdCBjbGFzcyBWYWx1ZUNvbXBhcmlzb25GdW5jdGlvbiBleHRlbmRzIEJp\nbmFyeUV4cHJGdW5jdGlvbiB7CgogICAgcHJvdGVjdGVkIFNlbGVjdG9yQ29u\nc3RhbnQgZXZhbHVhdGVJbXBsKFNlbGVjdG9yQ29uc3RhbnQgbGVmdCwgU2Vs\nZWN0b3JDb25zdGFudCByaWdodCwKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICBNZXNzYWdlSW1wbCBtZXNzYWdlKSB0aHJv\nd3MgU2VsZWN0b3JFdmFsdWF0aW9uRXhjZXB0aW9uIHsKCiAgICAgICAgc3dp\ndGNoIChsZWZ0LnR5cGUpIHsKICAgICAgICAgICAgY2FzZSBJTlQ6IHsKICAg\nICAgICAgICAgICAgIHN3aXRjaCAocmlnaHQudHlwZSkgewogICAgICAgICAg\nICAgICAgICAgIGNhc2UgSU5UOgogICAgICAgICAgICAgICAgICAgICAgICBy\nZXR1cm4gbmV3IFNlbGVjdG9yQ29uc3RhbnQoY29tcGFyZVdpdGhJbnQobGVm\ndC5nZXRJbnRWYWx1ZSgpLCByaWdodC5nZXRJbnRWYWx1ZSgpKSk7CiAgICAg\nICAgICAgICAgICAgICAgY2FzZSBET1VCTEU6CiAgICAgICAgICAgICAgICAg\nICAgICAgIHJldHVybiBuZXcgU2VsZWN0b3JDb25zdGFudChjb21wYXJlV2l0\naEludChsZWZ0LmdldEludFZhbHVlKCksIHJpZ2h0LmdldERvdWJsZVZhbHVl\nKCkpKTsKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAg\nICAgICAgICAgICAgICB0aHJvdyBuZXcgU2VsZWN0b3JFdmFsdWF0aW9uRXhj\nZXB0aW9uKGdldENsYXNzKCkgKyAiIFVuZXhwZWN0ZWQgdHlwZSA6ICIgKwog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQudHlwZSArICIuIGxl\nZnQgOiAiICsgbGVmdCArICIsIHJpZ2h0IDogIiArIHJpZ2h0KTsKICAgICAg\nICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBjYXNlIERP\nVUJMRTogewogICAgICAgICAgICAgICAgc3dpdGNoIChyaWdodC50eXBlKSB7\nCiAgICAgICAgICAgICAgICAgICAgY2FzZSBJTlQ6CiAgICAgICAgICAgICAg\nICAgICAgICAgIHJldHVybiBuZXcgU2VsZWN0b3JDb25zdGFudChjb21wYXJl\nV2l0aERvdWJsZShsZWZ0LmdldERvdWJsZVZhbHVlKCksIHJpZ2h0LmdldElu\ndFZhbHVlKCkpKTsKICAgICAgICAgICAgICAgICAgICBjYXNlIERPVUJMRToK\nICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBTZWxlY3RvckNv\nbnN0YW50KGNvbXBhcmVXaXRoRG91YmxlKGxlZnQuZ2V0RG91YmxlVmFsdWUo\nKSwgcmlnaHQuZ2V0RG91YmxlVmFsdWUoKSkpOwogICAgICAgICAgICAgICAg\nICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5l\ndyBTZWxlY3RvckV2YWx1YXRpb25FeGNlcHRpb24oZ2V0Q2xhc3MoKSArICIg\nVW5leHBlY3RlZCB0eXBlIDogIiArCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICByaWdodC50eXBlICsgIi4gbGVmdCA6ICIgKyBsZWZ0ICsgIiwgcmln\naHQgOiAiICsgcmlnaHQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAg\nICB9CiAgICAgICAgICAgIGNhc2UgQk9PTEVBTjogewogICAgICAgICAgICAg\nICAgc3dpdGNoIChyaWdodC50eXBlKSB7CiAgICAgICAgICAgICAgICAgICAg\nY2FzZSBCT09MRUFOOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4g\nbmV3IFNlbGVjdG9yQ29uc3RhbnQoY29tcGFyZVdpdGhCb29sZWFuKGxlZnQu\nZ2V0Qm9vbFZhbHVlKCksIHJpZ2h0LmdldEJvb2xWYWx1ZSgpKSk7CiAgICAg\nICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAg\nICAgdGhyb3cgbmV3IFNlbGVjdG9yRXZhbHVhdGlvbkV4Y2VwdGlvbihnZXRD\nbGFzcygpICsgIiBVbmV4cGVjdGVkIHR5cGUgOiAiICsKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIHJpZ2h0LnR5cGUgKyAiLiBsZWZ0IDogIiArIGxl\nZnQgKyAiLCByaWdodCA6ICIgKyByaWdodCk7CiAgICAgICAgICAgICAgICB9\nCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNhc2UgU1RSSU5HOiB7CiAg\nICAgICAgICAgICAgICBzd2l0Y2ggKHJpZ2h0LnR5cGUpIHsKICAgICAgICAg\nICAgICAgICAgICBjYXNlIFNUUklORzoKICAgICAgICAgICAgICAgICAgICAg\nICAgcmV0dXJuIG5ldyBTZWxlY3RvckNvbnN0YW50KGNvbXBhcmVXaXRoU3Ry\naW5nKGxlZnQuZ2V0U3RyaW5nVmFsdWUoKSwgcmlnaHQuZ2V0U3RyaW5nVmFs\ndWUoKSkpOwogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAg\nICAgICAgICAgICAgICAgIHRocm93IG5ldyBTZWxlY3RvckV2YWx1YXRpb25F\neGNlcHRpb24oZ2V0Q2xhc3MoKSArICIgVW5leHBlY3RlZCB0eXBlIDogIiAr\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByaWdodC50eXBlICsgIi4g\nbGVmdCA6ICIgKyBsZWZ0ICsgIiwgcmlnaHQgOiAiICsgcmlnaHQpOwogICAg\nICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBkZWZh\ndWx0OgogICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNlbGVjdG9yRXZhbHVh\ndGlvbkV4Y2VwdGlvbihnZXRDbGFzcygpICsgIiBVbnN1cHBvcnRlZCB0eXBl\nIDogIiArCiAgICAgICAgICAgICAgICAgICAgbGVmdC50eXBlICsgIi4gbGVm\ndCA6ICIgKyBsZWZ0ICsgIiwgcmlnaHQgOiAiICsgcmlnaHQpOwogICAgICAg\nIH0KICAgIH0KCiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgQm9vbGVhbiBjb21w\nYXJlV2l0aEludChJbnRlZ2VyIGxlZnQsIERvdWJsZSByaWdodCkgdGhyb3dz\nIFNlbGVjdG9yRXZhbHVhdGlvbkV4Y2VwdGlvbjsKCiAgICBwcm90ZWN0ZWQg\nYWJzdHJhY3QgQm9vbGVhbiBjb21wYXJlV2l0aEludChJbnRlZ2VyIGxlZnQs\nIEludGVnZXIgcmlnaHQpIHRocm93cyBTZWxlY3RvckV2YWx1YXRpb25FeGNl\ncHRpb247CgogICAgcHJvdGVjdGVkIGFic3RyYWN0IEJvb2xlYW4gY29tcGFy\nZVdpdGhEb3VibGUoRG91YmxlIGxlZnQsIERvdWJsZSByaWdodCkgdGhyb3dz\nIFNlbGVjdG9yRXZhbHVhdGlvbkV4Y2VwdGlvbjsKCiAgICBwcm90ZWN0ZWQg\nYWJzdHJhY3QgQm9vbGVhbiBjb21wYXJlV2l0aERvdWJsZShEb3VibGUgbGVm\ndCwgSW50ZWdlciByaWdodCkgdGhyb3dzIFNlbGVjdG9yRXZhbHVhdGlvbkV4\nY2VwdGlvbjsKCiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgQm9vbGVhbiBjb21w\nYXJlV2l0aFN0cmluZyhTdHJpbmcgbGVmdCwgU3RyaW5nIHJpZ2h0KSB0aHJv\nd3MgU2VsZWN0b3JFdmFsdWF0aW9uRXhjZXB0aW9uOwoKICAgIHByb3RlY3Rl\nZCBhYnN0cmFjdCBCb29sZWFuIGNvbXBhcmVXaXRoQm9vbGVhbihCb29sZWFu\nIGxlZnQsIEJvb2xlYW4gcmlnaHQpIHRocm93cyBTZWxlY3RvckV2YWx1YXRp\nb25FeGNlcHRpb247CgoKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgVmFsdWVD\nb21wYXJpc29uRnVuY3Rpb24gR1JFQVRFUl9USEFOX0ZVTkNUSU9OID0gbmV3\nIFZhbHVlQ29tcGFyaXNvbkZ1bmN0aW9uKCkgewogICAgICAgIEBPdmVycmlk\nZQogICAgICAgIHByb3RlY3RlZCBCb29sZWFuIGNvbXBhcmVXaXRoSW50KElu\ndGVnZXIgbGVmdCwgRG91YmxlIHJpZ2h0KSB7CiAgICAgICAgICAgIGlmIChu\ndWxsID09IGxlZnQgfHwgbnVsbCA9PSByaWdodCkgcmV0dXJuIG51bGw7CiAg\nICAgICAgICAgIHJldHVybiAoZG91YmxlKSBsZWZ0ID4gcmlnaHQ7CiAgICAg\nICAgfQoKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwcm90ZWN0ZWQgQm9v\nbGVhbiBjb21wYXJlV2l0aEludChJbnRlZ2VyIGxlZnQsIEludGVnZXIgcmln\naHQpIHsKICAgICAgICAgICAgaWYgKG51bGwgPT0gbGVmdCB8fCBudWxsID09\nIHJpZ2h0KSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgcmV0dXJuIGxlZnQg\nPiByaWdodDsKICAgICAgICB9CgogICAgICAgIEBPdmVycmlkZQogICAgICAg\nIHByb3RlY3RlZCBCb29sZWFuIGNvbXBhcmVXaXRoRG91YmxlKERvdWJsZSBs\nZWZ0LCBEb3VibGUgcmlnaHQpIHRocm93cyBTZWxlY3RvckV2YWx1YXRpb25F\neGNlcHRpb24gewogICAgICAgICAgICBpZiAobnVsbCA9PSBsZWZ0IHx8IG51\nbGwgPT0gcmlnaHQpIHJldHVybiBudWxsOwogICAgICAgICAgICByZXR1cm4g\nbGVmdCA+IHJpZ2h0OwogICAgICAgIH0KCiAgICAgICAgQE92ZXJyaWRlCiAg\nICAgICAgcHJvdGVjdGVkIEJvb2xlYW4gY29tcGFyZVdpdGhEb3VibGUoRG91\nYmxlIGxlZnQsIEludGVnZXIgcmlnaHQpIHsKICAgICAgICAgICAgaWYgKG51\nbGwgPT0gbGVmdCB8fCBudWxsID09IHJpZ2h0KSByZXR1cm4gbnVsbDsKICAg\nICAgICAgICAgcmV0dXJuIGxlZnQgPiAoZG91YmxlKSByaWdodDsKICAgICAg\nICB9CgogICAgICAgIEBPdmVycmlkZQogICAgICAgIHByb3RlY3RlZCBCb29s\nZWFuIGNvbXBhcmVXaXRoU3RyaW5nKFN0cmluZyBsZWZ0LCBTdHJpbmcgcmln\naHQpIHRocm93cyBTZWxlY3RvckV2YWx1YXRpb25FeGNlcHRpb24gewogICAg\nICAgICAgICB0aHJvdyBuZXcgU2VsZWN0b3JFdmFsdWF0aW9uRXhjZXB0aW9u\nKGdldENsYXNzKCkKICAgICAgICAgICAgICAgICAgICArICIgVW5zdXBwb3J0\nZWQgc3RyaW5nIGNvbXBhcmlzb24gZm9yIGdyZWF0ZXJfdGhhbiBvcGVyYXRv\nciIpOwogICAgICAgIH0KCiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHJv\ndGVjdGVkIEJvb2xlYW4gY29tcGFyZVdpdGhCb29sZWFuKEJvb2xlYW4gbGVm\ndCwgQm9vbGVhbiByaWdodCkgdGhyb3dzIFNlbGVjdG9yRXZhbHVhdGlvbkV4\nY2VwdGlvbiB7CiAgICAgICAgICAgIHRocm93IG5ldyBTZWxlY3RvckV2YWx1\nYXRpb25FeGNlcHRpb24oZ2V0Q2xhc3MoKQogICAgICAgICAgICAgICAgICAg\nICsgIiBVbnN1cHBvcnRlZCBib29sZWFuIGNvbXBhcmlzb24gZm9yIGdyZWF0\nZXJfdGhhbiBvcGVyYXRvciIpOwogICAgICAgIH0KICAgIH07CgoKICAgIHB1\nYmxpYyBzdGF0aWMgZmluYWwgVmFsdWVDb21wYXJpc29uRnVuY3Rpb24gR1JF\nQVRFUl9USEFOX0VRVUFMX1RPX0ZVTkNUSU9OID0gbmV3IFZhbHVlQ29tcGFy\naXNvbkZ1bmN0aW9uKCkgewogICAgICAgIEBPdmVycmlkZQogICAgICAgIHBy\nb3RlY3RlZCBCb29sZWFuIGNvbXBhcmVXaXRoSW50KEludGVnZXIgbGVmdCwg\nRG91YmxlIHJpZ2h0KSB7CiAgICAgICAgICAgIGlmIChudWxsID09IGxlZnQg\nfHwgbnVsbCA9PSByaWdodCkgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIHJl\ndHVybiAoZG91YmxlKSBsZWZ0ID49IHJpZ2h0OwogICAgICAgIH0KCiAgICAg\nICAgQE92ZXJyaWRlCiAgICAgICAgcHJvdGVjdGVkIEJvb2xlYW4gY29tcGFy\nZVdpdGhJbnQoSW50ZWdlciBsZWZ0LCBJbnRlZ2VyIHJpZ2h0KSB7CiAgICAg\nICAgICAgIGlmIChudWxsID09IGxlZnQgfHwgbnVsbCA9PSByaWdodCkgcmV0\ndXJuIG51bGw7CiAgICAgICAgICAgIHJldHVybiBsZWZ0ID49IHJpZ2h0Owog\nICAgICAgIH0KCiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHJvdGVjdGVk\nIEJvb2xlYW4gY29tcGFyZVdpdGhEb3VibGUoRG91YmxlIGxlZnQsIERvdWJs\nZSByaWdodCkgdGhyb3dzIFNlbGVjdG9yRXZhbHVhdGlvbkV4Y2VwdGlvbiB7\nCiAgICAgICAgICAgIGlmIChudWxsID09IGxlZnQgfHwgbnVsbCA9PSByaWdo\ndCkgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIHJldHVybiBsZWZ0ID49IHJp\nZ2h0OwogICAgICAgIH0KCiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHJv\ndGVjdGVkIEJvb2xlYW4gY29tcGFyZVdpdGhEb3VibGUoRG91YmxlIGxlZnQs\nIEludGVnZXIgcmlnaHQpIHsKICAgICAgICAgICAgaWYgKG51bGwgPT0gbGVm\ndCB8fCBudWxsID09IHJpZ2h0KSByZXR1cm4gbnVsbDsKICAgICAgICAgICAg\ncmV0dXJuIGxlZnQgPj0gKGRvdWJsZSkgcmlnaHQ7CiAgICAgICAgfQoKICAg\nICAgICBAT3ZlcnJpZGUKICAgICAgICBwcm90ZWN0ZWQgQm9vbGVhbiBjb21w\nYXJlV2l0aFN0cmluZyhTdHJpbmcgbGVmdCwgU3RyaW5nIHJpZ2h0KSB0aHJv\nd3MgU2VsZWN0b3JFdmFsdWF0aW9uRXhjZXB0aW9uIHsKICAgICAgICAgICAg\ndGhyb3cgbmV3IFNlbGVjdG9yRXZhbHVhdGlvbkV4Y2VwdGlvbihnZXRDbGFz\ncygpICsKICAgICAgICAgICAgICAgICIgVW5zdXBwb3J0ZWQgc3RyaW5nIGNv\nbXBhcmlzb24gZm9yIGdyZWF0ZXJfdGhhbiBvcGVyYXRvciIpOwogICAgICAg\nIH0KCiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHJvdGVjdGVkIEJvb2xl\nYW4gY29tcGFyZVdpdGhCb29sZWFuKEJvb2xlYW4gbGVmdCwgQm9vbGVhbiBy\naWdodCkgdGhyb3dzIFNlbGVjdG9yRXZhbHVhdGlvbkV4Y2VwdGlvbiB7CiAg\nICAgICAgICAgIHRocm93IG5ldyBTZWxlY3RvckV2YWx1YXRpb25FeGNlcHRp\nb24oZ2V0Q2xhc3MoKSArCiAgICAgICAgICAgICAgICAiIFVuc3VwcG9ydGVk\nIGJvb2xlYW4gY29tcGFyaXNvbiBmb3IgZ3JlYXRlcl90aGFuIG9wZXJhdG9y\nIik7CiAgICAgICAgfQogICAgfTsKCiAgICBwdWJsaWMgc3RhdGljIGZpbmFs\nIFZhbHVlQ29tcGFyaXNvbkZ1bmN0aW9uIExFU1NfVEhBTl9GVU5DVElPTiA9\nIG5ldyBWYWx1ZUNvbXBhcmlzb25GdW5jdGlvbigpIHsKICAgICAgICBAT3Zl\ncnJpZGUKICAgICAgICBwcm90ZWN0ZWQgQm9vbGVhbiBjb21wYXJlV2l0aElu\ndChJbnRlZ2VyIGxlZnQsIERvdWJsZSByaWdodCkgewogICAgICAgICAgICBp\nZiAobnVsbCA9PSBsZWZ0IHx8IG51bGwgPT0gcmlnaHQpIHJldHVybiBudWxs\nOwogICAgICAgICAgICByZXR1cm4gKGRvdWJsZSkgbGVmdCA8IHJpZ2h0Owog\nICAgICAgIH0KCiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHJvdGVjdGVk\nIEJvb2xlYW4gY29tcGFyZVdpdGhJbnQoSW50ZWdlciBsZWZ0LCBJbnRlZ2Vy\nIHJpZ2h0KSB7CiAgICAgICAgICAgIGlmIChudWxsID09IGxlZnQgfHwgbnVs\nbCA9PSByaWdodCkgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIHJldHVybiBs\nZWZ0IDwgcmlnaHQ7CiAgICAgICAgfQoKICAgICAgICBAT3ZlcnJpZGUKICAg\nICAgICBwcm90ZWN0ZWQgQm9vbGVhbiBjb21wYXJlV2l0aERvdWJsZShEb3Vi\nbGUgbGVmdCwgRG91YmxlIHJpZ2h0KSB0aHJvd3MgU2VsZWN0b3JFdmFsdWF0\naW9uRXhjZXB0aW9uIHsKICAgICAgICAgICAgaWYgKG51bGwgPT0gbGVmdCB8\nfCBudWxsID09IHJpZ2h0KSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgcmV0\ndXJuIGxlZnQgPCByaWdodDsKICAgICAgICB9CgogICAgICAgIEBPdmVycmlk\nZQogICAgICAgIHByb3RlY3RlZCBCb29sZWFuIGNvbXBhcmVXaXRoRG91Ymxl\nKERvdWJsZSBsZWZ0LCBJbnRlZ2VyIHJpZ2h0KSB7CiAgICAgICAgICAgIGlm\nIChudWxsID09IGxlZnQgfHwgbnVsbCA9PSByaWdodCkgcmV0dXJuIG51bGw7\nCiAgICAgICAgICAgIHJldHVybiBsZWZ0IDwgKGRvdWJsZSkgcmlnaHQ7CiAg\nICAgICAgfQoKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwcm90ZWN0ZWQg\nQm9vbGVhbiBjb21wYXJlV2l0aFN0cmluZyhTdHJpbmcgbGVmdCwgU3RyaW5n\nIHJpZ2h0KSB0aHJvd3MgU2VsZWN0b3JFdmFsdWF0aW9uRXhjZXB0aW9uIHsK\nICAgICAgICAgICAgdGhyb3cgbmV3IFNlbGVjdG9yRXZhbHVhdGlvbkV4Y2Vw\ndGlvbihnZXRDbGFzcygpICsKICAgICAgICAgICAgICAgICIgVW5zdXBwb3J0\nZWQgc3RyaW5nIGNvbXBhcmlzb24gZm9yIGdyZWF0ZXJfdGhhbiBvcGVyYXRv\nciIpOwogICAgICAgIH0KCiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHJv\ndGVjdGVkIEJvb2xlYW4gY29tcGFyZVdpdGhCb29sZWFuKEJvb2xlYW4gbGVm\ndCwgQm9vbGVhbiByaWdodCkgdGhyb3dzIFNlbGVjdG9yRXZhbHVhdGlvbkV4\nY2VwdGlvbiB7CiAgICAgICAgICAgIHRocm93IG5ldyBTZWxlY3RvckV2YWx1\nYXRpb25FeGNlcHRpb24oZ2V0Q2xhc3MoKSArCiAgICAgICAgICAgICAgICAi\nIFVuc3VwcG9ydGVkIGJvb2xlYW4gY29tcGFyaXNvbiBmb3IgZ3JlYXRlcl90\naGFuIG9wZXJhdG9yIik7CiAgICAgICAgfQogICAgfTsKCgogICAgcHVibGlj\nIHN0YXRpYyBmaW5hbCBWYWx1ZUNvbXBhcmlzb25GdW5jdGlvbiBMRVNTX1RI\nQU5fRVFVQUxfVE9fRlVOQ1RJT04gPSBuZXcgVmFsdWVDb21wYXJpc29uRnVu\nY3Rpb24oKSB7CiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHJvdGVjdGVk\nIEJvb2xlYW4gY29tcGFyZVdpdGhJbnQoSW50ZWdlciBsZWZ0LCBEb3VibGUg\ncmlnaHQpIHsKICAgICAgICAgICAgaWYgKG51bGwgPT0gbGVmdCB8fCBudWxs\nID09IHJpZ2h0KSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgcmV0dXJuIChk\nb3VibGUpIGxlZnQgPD0gcmlnaHQ7CiAgICAgICAgfQoKICAgICAgICBAT3Zl\ncnJpZGUKICAgICAgICBwcm90ZWN0ZWQgQm9vbGVhbiBjb21wYXJlV2l0aElu\ndChJbnRlZ2VyIGxlZnQsIEludGVnZXIgcmlnaHQpIHsKICAgICAgICAgICAg\naWYgKG51bGwgPT0gbGVmdCB8fCBudWxsID09IHJpZ2h0KSByZXR1cm4gbnVs\nbDsKICAgICAgICAgICAgcmV0dXJuIGxlZnQgPD0gcmlnaHQ7CiAgICAgICAg\nfQoKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwcm90ZWN0ZWQgQm9vbGVh\nbiBjb21wYXJlV2l0aERvdWJsZShEb3VibGUgbGVmdCwgRG91YmxlIHJpZ2h0\nKSB0aHJvd3MgU2VsZWN0b3JFdmFsdWF0aW9uRXhjZXB0aW9uIHsKICAgICAg\nICAgICAgaWYgKG51bGwgPT0gbGVmdCB8fCBudWxsID09IHJpZ2h0KSByZXR1\ncm4gbnVsbDsKICAgICAgICAgICAgcmV0dXJuIGxlZnQgPD0gcmlnaHQ7CiAg\nICAgICAgfQoKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwcm90ZWN0ZWQg\nQm9vbGVhbiBjb21wYXJlV2l0aERvdWJsZShEb3VibGUgbGVmdCwgSW50ZWdl\nciByaWdodCkgewogICAgICAgICAgICBpZiAobnVsbCA9PSBsZWZ0IHx8IG51\nbGwgPT0gcmlnaHQpIHJldHVybiBudWxsOwogICAgICAgICAgICByZXR1cm4g\nbGVmdCA8PSAoZG91YmxlKSByaWdodDsKICAgICAgICB9CgogICAgICAgIEBP\ndmVycmlkZQogICAgICAgIHByb3RlY3RlZCBCb29sZWFuIGNvbXBhcmVXaXRo\nU3RyaW5nKFN0cmluZyBsZWZ0LCBTdHJpbmcgcmlnaHQpIHRocm93cyBTZWxl\nY3RvckV2YWx1YXRpb25FeGNlcHRpb24gewogICAgICAgICAgICB0aHJvdyBu\nZXcgU2VsZWN0b3JFdmFsdWF0aW9uRXhjZXB0aW9uKGdldENsYXNzKCkgKwog\nICAgICAgICAgICAgICAgIiBVbnN1cHBvcnRlZCBzdHJpbmcgY29tcGFyaXNv\nbiBmb3IgZ3JlYXRlcl90aGFuIG9wZXJhdG9yIik7CiAgICAgICAgfQoKICAg\nICAgICBAT3ZlcnJpZGUKICAgICAgICBwcm90ZWN0ZWQgQm9vbGVhbiBjb21w\nYXJlV2l0aEJvb2xlYW4oQm9vbGVhbiBsZWZ0LCBCb29sZWFuIHJpZ2h0KSB0\naHJvd3MgU2VsZWN0b3JFdmFsdWF0aW9uRXhjZXB0aW9uIHsKICAgICAgICAg\nICAgdGhyb3cgbmV3IFNlbGVjdG9yRXZhbHVhdGlvbkV4Y2VwdGlvbihnZXRD\nbGFzcygpICsKICAgICAgICAgICAgICAgICIgVW5zdXBwb3J0ZWQgYm9vbGVh\nbiBjb21wYXJpc29uIGZvciBncmVhdGVyX3RoYW4gb3BlcmF0b3IiKTsKICAg\nICAgICB9CiAgICB9OwoKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgVmFsdWVD\nb21wYXJpc29uRnVuY3Rpb24gRVFVQUxfVE9fRlVOQ1RJT04gPSBuZXcgVmFs\ndWVDb21wYXJpc29uRnVuY3Rpb24oKSB7CiAgICAgICAgQE92ZXJyaWRlCiAg\nICAgICAgcHJvdGVjdGVkIEJvb2xlYW4gY29tcGFyZVdpdGhJbnQoSW50ZWdl\nciBsZWZ0LCBEb3VibGUgcmlnaHQpIHsKICAgICAgICAgICAgaWYgKG51bGwg\nPT0gbGVmdCB8fCBudWxsID09IHJpZ2h0KSByZXR1cm4gbnVsbDsKICAgICAg\nICAgICAgcmV0dXJuIChkb3VibGUpIGxlZnQgPT0gcmlnaHQ7CiAgICAgICAg\nfQoKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwcm90ZWN0ZWQgQm9vbGVh\nbiBjb21wYXJlV2l0aEludChJbnRlZ2VyIGxlZnQsIEludGVnZXIgcmlnaHQp\nIHsKICAgICAgICAgICAgaWYgKG51bGwgPT0gbGVmdCB8fCBudWxsID09IHJp\nZ2h0KSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgcmV0dXJuIChpbnQpIGxl\nZnQgPT0gcmlnaHQ7CiAgICAgICAgfQoKICAgICAgICBAT3ZlcnJpZGUKICAg\nICAgICBwcm90ZWN0ZWQgQm9vbGVhbiBjb21wYXJlV2l0aERvdWJsZShEb3Vi\nbGUgbGVmdCwgRG91YmxlIHJpZ2h0KSB0aHJvd3MgU2VsZWN0b3JFdmFsdWF0\naW9uRXhjZXB0aW9uIHsKICAgICAgICAgICAgaWYgKG51bGwgPT0gbGVmdCB8\nfCBudWxsID09IHJpZ2h0KSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgcmV0\ndXJuIChkb3VibGUpIGxlZnQgPT0gcmlnaHQ7CiAgICAgICAgfQoKICAgICAg\nICBAT3ZlcnJpZGUKICAgICAgICBwcm90ZWN0ZWQgQm9vbGVhbiBjb21wYXJl\nV2l0aERvdWJsZShEb3VibGUgbGVmdCwgSW50ZWdlciByaWdodCkgewogICAg\nICAgICAgICBpZiAobnVsbCA9PSBsZWZ0IHx8IG51bGwgPT0gcmlnaHQpIHJl\ndHVybiBudWxsOwogICAgICAgICAgICByZXR1cm4gbGVmdCA9PSAoZG91Ymxl\nKSByaWdodDsKICAgICAgICB9CgogICAgICAgIEBPdmVycmlkZQogICAgICAg\nIHByb3RlY3RlZCBCb29sZWFuIGNvbXBhcmVXaXRoU3RyaW5nKFN0cmluZyBs\nZWZ0LCBTdHJpbmcgcmlnaHQpIHRocm93cyBTZWxlY3RvckV2YWx1YXRpb25F\neGNlcHRpb24gewogICAgICAgICAgICBpZiAobnVsbCA9PSBsZWZ0IHx8IG51\nbGwgPT0gcmlnaHQpIHJldHVybiBudWxsOwogICAgICAgICAgICByZXR1cm4g\nbGVmdC5lcXVhbHMocmlnaHQpOwogICAgICAgIH0KCiAgICAgICAgQE92ZXJy\naWRlCiAgICAgICAgcHJvdGVjdGVkIEJvb2xlYW4gY29tcGFyZVdpdGhCb29s\nZWFuKEJvb2xlYW4gbGVmdCwgQm9vbGVhbiByaWdodCkgdGhyb3dzIFNlbGVj\ndG9yRXZhbHVhdGlvbkV4Y2VwdGlvbiB7CiAgICAgICAgICAgIGlmIChudWxs\nID09IGxlZnQgfHwgbnVsbCA9PSByaWdodCkgcmV0dXJuIG51bGw7CiAgICAg\nICAgICAgIHJldHVybiBsZWZ0LmVxdWFscyhyaWdodCk7CiAgICAgICAgfQog\nICAgfTsKCgogICAgcHVibGljIHN0YXRpYyBmaW5hbCBWYWx1ZUNvbXBhcmlz\nb25GdW5jdGlvbiBOT1RfRVFVQUxfVE9fRlVOQ1RJT04gPSBuZXcgVmFsdWVD\nb21wYXJpc29uRnVuY3Rpb24oKSB7CiAgICAgICAgQE92ZXJyaWRlCiAgICAg\nICAgcHJvdGVjdGVkIEJvb2xlYW4gY29tcGFyZVdpdGhJbnQoSW50ZWdlciBs\nZWZ0LCBEb3VibGUgcmlnaHQpIHsKICAgICAgICAgICAgaWYgKG51bGwgPT0g\nbGVmdCB8fCBudWxsID09IHJpZ2h0KSByZXR1cm4gbnVsbDsKICAgICAgICAg\nICAgcmV0dXJuIChkb3VibGUpIGxlZnQgIT0gcmlnaHQ7CiAgICAgICAgfQoK\nICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwcm90ZWN0ZWQgQm9vbGVhbiBj\nb21wYXJlV2l0aEludChJbnRlZ2VyIGxlZnQsIEludGVnZXIgcmlnaHQpIHsK\nICAgICAgICAgICAgaWYgKG51bGwgPT0gbGVmdCB8fCBudWxsID09IHJpZ2h0\nKSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgcmV0dXJuIChpbnQpIGxlZnQg\nIT0gcmlnaHQ7CiAgICAgICAgfQoKICAgICAgICBAT3ZlcnJpZGUKICAgICAg\nICBwcm90ZWN0ZWQgQm9vbGVhbiBjb21wYXJlV2l0aERvdWJsZShEb3VibGUg\nbGVmdCwgRG91YmxlIHJpZ2h0KSB0aHJvd3MgU2VsZWN0b3JFdmFsdWF0aW9u\nRXhjZXB0aW9uIHsKICAgICAgICAgICAgaWYgKG51bGwgPT0gbGVmdCB8fCBu\ndWxsID09IHJpZ2h0KSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgcmV0dXJu\nIChkb3VibGUpIGxlZnQgIT0gcmlnaHQ7CiAgICAgICAgfQoKICAgICAgICBA\nT3ZlcnJpZGUKICAgICAgICBwcm90ZWN0ZWQgQm9vbGVhbiBjb21wYXJlV2l0\naERvdWJsZShEb3VibGUgbGVmdCwgSW50ZWdlciByaWdodCkgewogICAgICAg\nICAgICBpZiAobnVsbCA9PSBsZWZ0IHx8IG51bGwgPT0gcmlnaHQpIHJldHVy\nbiBudWxsOwogICAgICAgICAgICByZXR1cm4gbGVmdCAhPSAoZG91YmxlKSBy\naWdodDsKICAgICAgICB9CgogICAgICAgIEBPdmVycmlkZQogICAgICAgIHBy\nb3RlY3RlZCBCb29sZWFuIGNvbXBhcmVXaXRoU3RyaW5nKFN0cmluZyBsZWZ0\nLCBTdHJpbmcgcmlnaHQpIHRocm93cyBTZWxlY3RvckV2YWx1YXRpb25FeGNl\ncHRpb24gewogICAgICAgICAgICBpZiAobnVsbCA9PSBsZWZ0IHx8IG51bGwg\nPT0gcmlnaHQpIHJldHVybiBudWxsOwogICAgICAgICAgICByZXR1cm4gIWxl\nZnQuZXF1YWxzKHJpZ2h0KTsKICAgICAgICB9CgogICAgICAgIEBPdmVycmlk\nZQogICAgICAgIHByb3RlY3RlZCBCb29sZWFuIGNvbXBhcmVXaXRoQm9vbGVh\nbihCb29sZWFuIGxlZnQsIEJvb2xlYW4gcmlnaHQpIHRocm93cyBTZWxlY3Rv\nckV2YWx1YXRpb25FeGNlcHRpb24gewogICAgICAgICAgICBpZiAobnVsbCA9\nPSBsZWZ0IHx8IG51bGwgPT0gcmlnaHQpIHJldHVybiBudWxsOwogICAgICAg\nICAgICByZXR1cm4gIWxlZnQuZXF1YWxzKHJpZ2h0KTsKICAgICAgICB9CiAg\nICB9OwoKCgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgU3RyaW5nIHRvU3Ry\naW5nKCl7CiAgICAgICAgcmV0dXJuIGdldENsYXNzKCkuZ2V0TmFtZSgpOwog\nICAgfQp9Cg==\n","encoding":"base64"}

