{"sha":"caf4b3e316804e7355f21ced76d3083abbcfb8e6","node_id":"MDQ6QmxvYjE1NzU5NTY6Y2FmNGIzZTMxNjgwNGU3MzU1ZjIxY2VkNzZkMzA4M2FiYmNmYjhlNg==","size":3963,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/caf4b3e316804e7355f21ced76d3083abbcfb8e6","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5qbXMuc3BpOwoKaW1wb3J0IG9yZy5h\ncGFjaGUuaGVkd2lnLmptcy5TZXNzaW9uSW1wbDsKCmltcG9ydCBqYXZheC5q\nbXMuRGVsaXZlcnlNb2RlOwppbXBvcnQgamF2YXguam1zLkpNU0V4Y2VwdGlv\nbjsKaW1wb3J0IGphdmF4Lmptcy5NZXNzYWdlUHJvZHVjZXI7CgovKioKICoK\nICovCnB1YmxpYyBhYnN0cmFjdCBjbGFzcyBNZXNzYWdlUHJvZHVjZXJJbXBs\nIGltcGxlbWVudHMgTWVzc2FnZVByb2R1Y2VyIHsKCiAgICBzdGF0aWMgZmlu\nYWwgaW50IERFRkFVTFRfUFJJT1JJVFkgPSA0OwoKICAgIHByaXZhdGUgZmlu\nYWwgU2Vzc2lvbkltcGwgc2Vzc2lvbjsKCiAgICAvLyBXZSBkb250IHJlYWxs\neSB1c2UgdGhpcyAtIHNpbmNlIHdlIGFsd2F5cyBwb3B1bGF0ZSBtZXNzYWdl\nLWlkIDogZm91bmQgaW4gcmVzcG9uc2Ugb2YgcHVibGlzaC4KICAgIHByaXZh\ndGUgYm9vbGVhbiBkaXNhYmxlTWVzc2FnZUlEID0gZmFsc2U7CiAgICAvLyBX\nZSBjYW4gc3VwcG9ydCB0aGlzLCBidXQgZG9udCAtIHdpbGwgb3Zlcmx5IGNv\nbXBsaWNhdGUgc29tZSBhc3BlY3RzIG9mIHRoZSBjb2RlIDogZGVmZXJyaW5n\nIGZvciBub3cKICAgIC8vICh3ZSB3aWxsIG5lZWQgdG8gcGFzcyB0aGlzIGFy\nb3VuZCBhbG9uZyBhbGwgZmFpbHVyZSBwYXRocykuCiAgICBwcml2YXRlIGJv\nb2xlYW4gZGlzYWJsZU1lc3NhZ2VUaW1lc3RhbXAgPSBmYWxzZTsKICAgIC8v\nIEhlZHdpZyBzdXBwb3J0cyBvbmx5IFBFUlNJU1RFTlQgbW9kZSwgc28gc2V0\ndGluZyB0byBhbnl0aWhuZyBlbHNlIHdpbGwganVzdCBjYXVzZSBpdCB0byBi\nZSBpZ25vcmVkLgogICAgcHJpdmF0ZSBpbnQgZGVsaXZlcnlNb2RlID0gRGVs\naXZlcnlNb2RlLlBFUlNJU1RFTlQ7CiAgICAvLyBIZWR3aWcgZG9lcyBub3Qg\nc3VwcG9ydCBwcmlvcml0aWVzLCBzbyBldmVyeXRoaW5nIGlzIGF0IGRlZmF1\nbHQgcHJpb3JpdHkgIQogICAgLy8gdGhpcyBkb2VzIG5vdCBpbmZsdWVuY2Ug\nYWN0dWFsIG1lc3NhZ2UgZGVsaXZlcnkuCiAgICBwcml2YXRlIGludCBkZWZh\ndWx0UHJpb3JpdHkgPSBERUZBVUxUX1BSSU9SSVRZOwogICAgLy8gSGVkd2ln\nIGRvZXMgbm90IHN1cHBvcnQgVFRMIChpaXJjKSwgc28gd2UgYWxsb3cgc2V0\ndGluZy9xdWVyeWluZyB0aGlzLCBidXQgaXQgaGFzIG5vCiAgICAvLyBhY3R1\nYWwgaW1wYWN0IG9uIHRoZSBtZXNzYWdlIGRlbGl2ZXJ5L2V4cGlyeS4KICAg\nIHByaXZhdGUgbG9uZyB0aW1lVG9MaXZlID0gMDsKCiAgICBwcm90ZWN0ZWQg\nTWVzc2FnZVByb2R1Y2VySW1wbChTZXNzaW9uSW1wbCBzZXNzaW9uKSB7CiAg\nICAgICAgdGhpcy5zZXNzaW9uID0gc2Vzc2lvbjsKICAgIH0KCiAgICBAT3Zl\ncnJpZGUKICAgIHB1YmxpYyB2b2lkIHNldERpc2FibGVNZXNzYWdlSUQoYm9v\nbGVhbiBkaXNhYmxlTWVzc2FnZUlEKSB0aHJvd3MgSk1TRXhjZXB0aW9uIHsK\nICAgICAgICB0aGlzLmRpc2FibGVNZXNzYWdlSUQgPSBkaXNhYmxlTWVzc2Fn\nZUlEOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIGJvb2xlYW4g\nZ2V0RGlzYWJsZU1lc3NhZ2VJRCgpIHRocm93cyBKTVNFeGNlcHRpb24gewog\nICAgICAgIHJldHVybiBkaXNhYmxlTWVzc2FnZUlEOwogICAgfQoKICAgIHBy\nb3RlY3RlZCBTZXNzaW9uSW1wbCBnZXRTZXNzaW9uKCkgewogICAgICAgIHJl\ndHVybiBzZXNzaW9uOwogICAgfQoKCiAgICBAT3ZlcnJpZGUKICAgIHB1Ymxp\nYyB2b2lkIHNldERpc2FibGVNZXNzYWdlVGltZXN0YW1wKGJvb2xlYW4gZGlz\nYWJsZU1lc3NhZ2VUaW1lc3RhbXApIHRocm93cyBKTVNFeGNlcHRpb24gewog\nICAgICAgIHRoaXMuZGlzYWJsZU1lc3NhZ2VUaW1lc3RhbXAgPSBkaXNhYmxl\nTWVzc2FnZVRpbWVzdGFtcDsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1\nYmxpYyBib29sZWFuIGdldERpc2FibGVNZXNzYWdlVGltZXN0YW1wKCkgdGhy\nb3dzIEpNU0V4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGRpc2FibGVNZXNz\nYWdlVGltZXN0YW1wOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGlj\nIHZvaWQgc2V0RGVsaXZlcnlNb2RlKGludCBkZWxpdmVyeU1vZGUpIHRocm93\ncyBKTVNFeGNlcHRpb24gewogICAgICAgIGlmIChEZWxpdmVyeU1vZGUuTk9O\nX1BFUlNJU1RFTlQgIT0gZGVsaXZlcnlNb2RlICYmCiAgICAgICAgICAgIERl\nbGl2ZXJ5TW9kZS5QRVJTSVNURU5UICE9IGRlbGl2ZXJ5TW9kZSkgewogICAg\nICAgICAgICB0aHJvdyBuZXcgSk1TRXhjZXB0aW9uKCJJbnZhbGlkIGRlbGl2\nZXJ5IG1vZGUgc3BlY2lmaWVkIDogIiArIGRlbGl2ZXJ5TW9kZSk7CiAgICAg\nICAgfQoKICAgICAgICAvLyBpZiAoRGVsaXZlcnlNb2RlLk5PTl9QRVJTSVNU\nRU5UID09IGRlbGl2ZXJ5TW9kZSkKICAgICAgICAvLyB0aHJvdyBuZXcgSk1T\nRXhjZXB0aW9uKCJub24tcGVyc2lzdGVudCBkZWxpdmVyeSBtb2RlIGlzIG5v\ndCB5ZXQgc3VwcG9ydGVkIik7CiAgICAgICAgdGhpcy5kZWxpdmVyeU1vZGUg\nPSBkZWxpdmVyeU1vZGU7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJs\naWMgaW50IGdldERlbGl2ZXJ5TW9kZSgpIHRocm93cyBKTVNFeGNlcHRpb24g\newogICAgICAgIHJldHVybiBkZWxpdmVyeU1vZGU7CiAgICB9CgoKICAgIEBP\ndmVycmlkZQogICAgcHVibGljIHZvaWQgc2V0UHJpb3JpdHkoaW50IGRlZmF1\nbHRQcmlvcml0eSkgdGhyb3dzIEpNU0V4Y2VwdGlvbiB7CiAgICAgICAgLy8g\nTm90IHN1cHBvcnRlZCwgd2Ugc2ltcGx5IGFsbG93IGl0IHRvIGJlIHNldCBh\nbmQgcmV0cmlldmVkIC4uLgogICAgICAgIHRoaXMuZGVmYXVsdFByaW9yaXR5\nID0gZGVmYXVsdFByaW9yaXR5OwogICAgfQoKICAgIEBPdmVycmlkZQogICAg\ncHVibGljIGludCBnZXRQcmlvcml0eSgpIHRocm93cyBKTVNFeGNlcHRpb24g\newogICAgICAgIHJldHVybiBkZWZhdWx0UHJpb3JpdHk7CiAgICB9CgoKICAg\nIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgc2V0VGltZVRvTGl2ZShsb25n\nIHRpbWVUb0xpdmUpIHRocm93cyBKTVNFeGNlcHRpb24gewogICAgICAgIHRo\naXMudGltZVRvTGl2ZSA9IHRpbWVUb0xpdmU7CiAgICB9CgogICAgQE92ZXJy\naWRlCiAgICBwdWJsaWMgbG9uZyBnZXRUaW1lVG9MaXZlKCkgdGhyb3dzIEpN\nU0V4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIHRpbWVUb0xpdmU7CiAgICB9\nCn0K\n","encoding":"base64"}

