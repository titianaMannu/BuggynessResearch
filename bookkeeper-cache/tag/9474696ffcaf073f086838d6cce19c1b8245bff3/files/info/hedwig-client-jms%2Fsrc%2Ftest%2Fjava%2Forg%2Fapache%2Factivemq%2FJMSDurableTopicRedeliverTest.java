{"sha":"343919a9573575613b2779b50fc9e24406dbaebf","node_id":"MDQ6QmxvYjE1NzU5NTY6MzQzOTE5YTk1NzM1NzU2MTNiMjc3OWI1MGZjOWUyNDQwNmRiYWViZg==","size":2825,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/343919a9573575613b2779b50fc9e24406dbaebf","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUgb3IgbW9yZQogKiBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlIGRpc3Ry\naWJ1dGVkIHdpdGgKICogdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLgogKiBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byBZb3UgdW5kZXIgdGhlIEFwYWNo\nZSBMaWNlbnNlLCBWZXJzaW9uIDIuMAogKiAodGhlICJMaWNlbnNlIik7IHlv\ndSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ug\nd2l0aAogKiB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBv\nZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hl\nLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWly\nZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcs\nIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlz\nIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQg\nV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIg\nZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRo\nZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5k\nCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFja2Fn\nZSBvcmcuYXBhY2hlLmFjdGl2ZW1xOwoKaW1wb3J0IGphdmF4Lmptcy5Ub3Bp\nYzsKaW1wb3J0IGphdmF4Lmptcy5NZXNzYWdlOwppbXBvcnQgamF2YXguam1z\nLlNlc3Npb247CmltcG9ydCBqYXZheC5qbXMuVGV4dE1lc3NhZ2U7CgppbXBv\ncnQgb3JnLnNsZjRqLkxvZ2dlcjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJG\nYWN0b3J5OwoKcHVibGljIGNsYXNzIEpNU0R1cmFibGVUb3BpY1JlZGVsaXZl\nclRlc3QgZXh0ZW5kcyBKbXNUb3BpY1JlZGVsaXZlclRlc3QgewoKICAgIHBy\naXZhdGUgc3RhdGljIGZpbmFsIExvZ2dlciBMT0cgPSBMb2dnZXJGYWN0b3J5\nLmdldExvZ2dlcihKTVNEdXJhYmxlVG9waWNSZWRlbGl2ZXJUZXN0LmNsYXNz\nKTsKCiAgICBwcm90ZWN0ZWQgdm9pZCBzZXRVcCgpIHRocm93cyBFeGNlcHRp\nb24gewogICAgICAgIGR1cmFibGUgPSB0cnVlOwogICAgICAgIHN1cGVyLnNl\ndFVwKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZW5kcyBhbmQgY29uc3Vt\nZXMgdGhlIG1lc3NhZ2VzLgogICAgICoKICAgICAqIEB0aHJvd3MgRXhjZXB0\naW9uCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RSZWRlbGl2ZXJOZXdT\nZXNzaW9uKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgU3RyaW5nIHRl\neHQgPSAiVEVTVDogIiArIFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpOwog\nICAgICAgIE1lc3NhZ2Ugc2VuZE1lc3NhZ2UgPSBzZXNzaW9uLmNyZWF0ZVRl\neHRNZXNzYWdlKHRleHQpOwoKICAgICAgICBpZiAodmVyYm9zZSkgewogICAg\nICAgICAgICBMT0cuaW5mbygiQWJvdXQgdG8gc2VuZCBhIG1lc3NhZ2U6ICIg\nKyBzZW5kTWVzc2FnZSArICIgd2l0aCB0ZXh0OiAiICsgdGV4dCk7CiAgICAg\nICAgfQogICAgICAgIHByb2R1Y2VyLnNlbmQocHJvZHVjZXJEZXN0aW5hdGlv\nbiwgc2VuZE1lc3NhZ2UpOwoKICAgICAgICAvLyByZWNlaXZlIGJ1dCBkb24n\ndCBhY2tub3dsZWRnZQogICAgICAgIE1lc3NhZ2UgdW5hY2tNZXNzYWdlID0g\nY29uc3VtZXIucmVjZWl2ZSgxMDAwKTsKICAgICAgICBhc3NlcnROb3ROdWxs\nKHVuYWNrTWVzc2FnZSk7CiAgICAgICAgU3RyaW5nIHVuYWNrSWQgPSB1bmFj\na01lc3NhZ2UuZ2V0Sk1TTWVzc2FnZUlEKCk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKCgoVGV4dE1lc3NhZ2UpdW5hY2tNZXNzYWdlKS5nZXRUZXh0KCksIHRl\neHQpOwogICAgICAgIGFzc2VydEZhbHNlKHVuYWNrTWVzc2FnZS5nZXRKTVNS\nZWRlbGl2ZXJlZCgpKTsKICAgICAgICBjb25zdW1lU2Vzc2lvbi5jbG9zZSgp\nOwogICAgICAgIGNvbnN1bWVyLmNsb3NlKCk7CgogICAgICAgIC8vIHJlY2Vp\ndmUgdGhlbiBhY2tub3dsZWRnZQogICAgICAgIGNvbnN1bWVTZXNzaW9uID0g\nY29ubmVjdGlvbi5jcmVhdGVTZXNzaW9uKGZhbHNlLCBTZXNzaW9uLkNMSUVO\nVF9BQ0tOT1dMRURHRSk7CiAgICAgICAgY29uc3VtZXIgPSBjcmVhdGVDb25z\ndW1lcigpOwogICAgICAgIE1lc3NhZ2UgYWNrTWVzc2FnZSA9IGNvbnN1bWVy\nLnJlY2VpdmUoMTAwMCk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChhY2tNZXNz\nYWdlKTsKICAgICAgICBhY2tNZXNzYWdlLmFja25vd2xlZGdlKCk7CiAgICAg\nICAgU3RyaW5nIGFja0lkID0gYWNrTWVzc2FnZS5nZXRKTVNNZXNzYWdlSUQo\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoKChUZXh0TWVzc2FnZSlhY2tNZXNz\nYWdlKS5nZXRUZXh0KCksIHRleHQpOwogICAgICAgIC8vIGFzc2VydFRydWUo\nYWNrTWVzc2FnZS5nZXRKTVNSZWRlbGl2ZXJlZCgpKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHModW5hY2tJZCwgYWNrSWQpOwogICAgICAgIGNvbnN1bWVTZXNz\naW9uLmNsb3NlKCk7CiAgICAgICAgY29uc3VtZXIuY2xvc2UoKTsKCiAgICAg\nICAgY29uc3VtZVNlc3Npb24gPSBjb25uZWN0aW9uLmNyZWF0ZVNlc3Npb24o\nZmFsc2UsIFNlc3Npb24uQ0xJRU5UX0FDS05PV0xFREdFKTsKICAgICAgICBj\nb25zdW1lciA9IGNyZWF0ZUNvbnN1bWVyKCk7CiAgICAgICAgYXNzZXJ0TnVs\nbChjb25zdW1lci5yZWNlaXZlKDEwMDApKTsKICAgIH0KfQo=\n","encoding":"base64"}

