{"sha":"24551f381c3b57af08a2ebfea57a7955eae2c48e","node_id":"MDQ6QmxvYjE1NzU5NTY6MjQ1NTFmMzgxYzNiNTdhZjA4YTJlYmZlYTU3YTc5NTVlYWUyYzQ4ZQ==","size":5683,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/24551f381c3b57af08a2ebfea57a7955eae2c48e","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUgb3IgbW9yZQogKiBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlIGRpc3Ry\naWJ1dGVkIHdpdGgKICogdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLgogKiBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byBZb3UgdW5kZXIgdGhlIEFwYWNo\nZSBMaWNlbnNlLCBWZXJzaW9uIDIuMAogKiAodGhlICJMaWNlbnNlIik7IHlv\ndSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ug\nd2l0aAogKiB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBv\nZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hl\nLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWly\nZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcs\nIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlz\nIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQg\nV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIg\nZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRo\nZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5k\nCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFja2Fn\nZSBvcmcuYXBhY2hlLmFjdGl2ZW1xOwoKaW1wb3J0IGphdmF4Lmptcy5Db25u\nZWN0aW9uOwppbXBvcnQgamF2YXguam1zLkpNU0V4Y2VwdGlvbjsKaW1wb3J0\nIGphdmF4Lmptcy5NZXNzYWdlOwppbXBvcnQgamF2YXguam1zLk1lc3NhZ2VD\nb25zdW1lcjsKaW1wb3J0IGphdmF4Lmptcy5NZXNzYWdlUHJvZHVjZXI7Cmlt\ncG9ydCBqYXZheC5qbXMuU2Vzc2lvbjsKaW1wb3J0IGphdmF4Lmptcy5UZXh0\nTWVzc2FnZTsKaW1wb3J0IGphdmF4Lmptcy5Ub3BpYzsKCi8qKgogKgogKi8K\ncHVibGljIGNsYXNzIEpNU0luZGl2aWR1YWxBY2tUZXN0IGV4dGVuZHMgVGVz\ndFN1cHBvcnQgewoKICAgIHByaXZhdGUgQ29ubmVjdGlvbiBjb25uZWN0aW9u\nOwoKICAgIHByb3RlY3RlZCB2b2lkIHNldFVwKCkgdGhyb3dzIEV4Y2VwdGlv\nbiB7CiAgICAgICAgc3VwZXIuc2V0VXAoKTsKICAgICAgICBjb25uZWN0aW9u\nID0gY3JlYXRlQ29ubmVjdGlvbigpOwogICAgfQoKICAgIC8qKgogICAgICog\nQHNlZSBqdW5pdC5mcmFtZXdvcmsuVGVzdENhc2UjdGVhckRvd24oKQogICAg\nICovCiAgICBwcm90ZWN0ZWQgdm9pZCB0ZWFyRG93bigpIHRocm93cyBFeGNl\ncHRpb24gewogICAgICAgIGlmIChjb25uZWN0aW9uICE9IG51bGwpIHsKICAg\nICAgICAgICAgY29ubmVjdGlvbi5jbG9zZSgpOwogICAgICAgICAgICBjb25u\nZWN0aW9uID0gbnVsbDsKICAgICAgICB9CiAgICAgICAgc3VwZXIudGVhckRv\nd24oKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRlc3RzIGlmIGFja25vd2xl\nZGdlZCBtZXNzYWdlcyBhcmUgYmVpbmcgY29uc3VtZWQuCiAgICAgKgogICAg\nICogQHRocm93cyBKTVNFeGNlcHRpb24KICAgICAqLwogICAgcHVibGljIHZv\naWQgdGVzdEFja2VkTWVzc2FnZUFyZUNvbnN1bWVkKCkgdGhyb3dzIEpNU0V4\nY2VwdGlvbiB7CiAgICAgICAgY29ubmVjdGlvbi5zdGFydCgpOwogICAgICAg\nIFNlc3Npb24gc2Vzc2lvbiA9IGNvbm5lY3Rpb24uY3JlYXRlU2Vzc2lvbihm\nYWxzZSwgU2Vzc2lvbi5DTElFTlRfQUNLTk9XTEVER0UpOwogICAgICAgIFRv\ncGljIHF1ZXVlID0gc2Vzc2lvbi5jcmVhdGVUb3BpYyhnZXRRdWV1ZU5hbWUo\nKSk7CiAgICAgICAgTWVzc2FnZVByb2R1Y2VyIHByb2R1Y2VyID0gc2Vzc2lv\nbi5jcmVhdGVQcm9kdWNlcihxdWV1ZSk7CiAgICAgICAgTWVzc2FnZUNvbnN1\nbWVyIGNvbnN1bWVyID0gc2Vzc2lvbi5jcmVhdGVEdXJhYmxlU3Vic2NyaWJl\ncihxdWV1ZSwgInN1YnNjcmliZXItaWQxIik7CgogICAgICAgIHByb2R1Y2Vy\nLnNlbmQoc2Vzc2lvbi5jcmVhdGVUZXh0TWVzc2FnZSgiSGVsbG8iKSk7Cgog\nICAgICAgIC8vIENvbnN1bWUgdGhlIG1lc3NhZ2UuLi4KICAgICAgICBNZXNz\nYWdlIG1zZyA9IGNvbnN1bWVyLnJlY2VpdmUoMTAwMCk7CiAgICAgICAgYXNz\nZXJ0Tm90TnVsbChtc2cpOwogICAgICAgIG1zZy5hY2tub3dsZWRnZSgpOwoK\nICAgICAgICAvLyBSZXNldCB0aGUgc2Vzc2lvbi4KICAgICAgICBzZXNzaW9u\nLmNsb3NlKCk7CiAgICAgICAgc2Vzc2lvbiA9IGNvbm5lY3Rpb24uY3JlYXRl\nU2Vzc2lvbihmYWxzZSwgU2Vzc2lvbi5DTElFTlRfQUNLTk9XTEVER0UpOwoK\nICAgICAgICAvLyBBdHRlbXB0IHRvIENvbnN1bWUgdGhlIG1lc3NhZ2UuLi4K\nICAgICAgICBjb25zdW1lciA9IHNlc3Npb24uY3JlYXRlRHVyYWJsZVN1YnNj\ncmliZXIocXVldWUsICJzdWJzY3JpYmVyLWlkMSIpOwogICAgICAgIG1zZyA9\nIGNvbnN1bWVyLnJlY2VpdmUoMTAwMCk7CiAgICAgICAgYXNzZXJ0TnVsbCht\nc2cpOwoKICAgICAgICBzZXNzaW9uLmNsb3NlKCk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBUZXN0cyBpZiBhY2tub3dsZWRnZWQgbWVzc2FnZXMgYXJlIGJl\naW5nIGNvbnN1bWVkLgogICAgICoKICAgICAqIEB0aHJvd3MgSk1TRXhjZXB0\naW9uCiAgICAgKi8KICAgIC8vIFRoaXMgdGVzdCBjYW50LCB1bmZvcnR1bmF0\nZWx5LCBwYXNzCiAgICAvLy0gaW4gaGVkd2lnLCBhY2tub3dsZWRnZSBpcyBh\nIEFDS05PV0xFREdFIFVOVElMLiBTbyB0aGUgbGFzdCBhY2sgd2lsbCBhY2sg\nYWxsIG1lc3NhZ2VzIHVudGlsIHRoZW4gLi4uCiAgICAvKgogICAgcHVibGlj\nIHZvaWQgdGVzdExhc3RNZXNzYWdlQWNrZWQoKSB0aHJvd3MgSk1TRXhjZXB0\naW9uIHsKICAgICAgICBjb25uZWN0aW9uLnN0YXJ0KCk7CiAgICAgICAgU2Vz\nc2lvbiBzZXNzaW9uID0gY29ubmVjdGlvbi5jcmVhdGVTZXNzaW9uKGZhbHNl\nLCBTZXNzaW9uLkNMSUVOVF9BQ0tOT1dMRURHRSk7CiAgICAgICAgVG9waWMg\ncXVldWUgPSBzZXNzaW9uLmNyZWF0ZVRvcGljKGdldFF1ZXVlTmFtZSgpKTsK\nICAgICAgICBNZXNzYWdlUHJvZHVjZXIgcHJvZHVjZXIgPSBzZXNzaW9uLmNy\nZWF0ZVByb2R1Y2VyKHF1ZXVlKTsKICAgICAgICBNZXNzYWdlQ29uc3VtZXIg\nY29uc3VtZXIgPSBzZXNzaW9uLmNyZWF0ZUR1cmFibGVTdWJzY3JpYmVyKHF1\nZXVlLCAic3Vic2NyaWJlci1pZDIiKTsKICAgICAgICBUZXh0TWVzc2FnZSBt\nc2cxID0gc2Vzc2lvbi5jcmVhdGVUZXh0TWVzc2FnZSgibXNnMSIpOwogICAg\nICAgIFRleHRNZXNzYWdlIG1zZzIgPSBzZXNzaW9uLmNyZWF0ZVRleHRNZXNz\nYWdlKCJtc2cyIik7CiAgICAgICAgVGV4dE1lc3NhZ2UgbXNnMyA9IHNlc3Np\nb24uY3JlYXRlVGV4dE1lc3NhZ2UoIm1zZzMiKTsKICAgICAgICBwcm9kdWNl\nci5zZW5kKG1zZzEpOwogICAgICAgIHByb2R1Y2VyLnNlbmQobXNnMik7CiAg\nICAgICAgcHJvZHVjZXIuc2VuZChtc2czKTsKCiAgICAgICAgLy8gQ29uc3Vt\nZSB0aGUgbWVzc2FnZS4uLgogICAgICAgIE1lc3NhZ2UgbXNnID0gY29uc3Vt\nZXIucmVjZWl2ZSgxMDAwKTsKICAgICAgICBhc3NlcnROb3ROdWxsKG1zZyk7\nCiAgICAgICAgbXNnID0gY29uc3VtZXIucmVjZWl2ZSgxMDAwKTsKICAgICAg\nICBhc3NlcnROb3ROdWxsKG1zZyk7CiAgICAgICAgbXNnID0gY29uc3VtZXIu\ncmVjZWl2ZSgxMDAwKTsKICAgICAgICBhc3NlcnROb3ROdWxsKG1zZyk7CiAg\nICAgICAgbXNnLmFja25vd2xlZGdlKCk7CgogICAgICAgIC8vIFJlc2V0IHRo\nZSBzZXNzaW9uLgogICAgICAgIHNlc3Npb24uY2xvc2UoKTsKICAgICAgICBz\nZXNzaW9uID0gY29ubmVjdGlvbi5jcmVhdGVTZXNzaW9uKGZhbHNlLCBTZXNz\naW9uLkNMSUVOVF9BQ0tOT1dMRURHRSk7CgogICAgICAgIC8vIEF0dGVtcHQg\ndG8gQ29uc3VtZSB0aGUgbWVzc2FnZS4uLgogICAgICAgIGNvbnN1bWVyID0g\nc2Vzc2lvbi5jcmVhdGVEdXJhYmxlU3Vic2NyaWJlcihxdWV1ZSwgInN1YnNj\ncmliZXItaWQyIik7CiAgICAgICAgbXNnID0gY29uc3VtZXIucmVjZWl2ZSgx\nMDAwKTsKICAgICAgICBhc3NlcnROb3ROdWxsKG1zZyk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKG1zZzEsbXNnKTsKICAgICAgICBtc2cgPSBjb25zdW1lci5y\nZWNlaXZlKDEwMDApOwogICAgICAgIGFzc2VydE5vdE51bGwobXNnKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMobXNnMixtc2cpOwogICAgICAgIG1zZyA9IGNv\nbnN1bWVyLnJlY2VpdmUoMTAwMCk7CiAgICAgICAgYXNzZXJ0TnVsbChtc2cp\nOwogICAgICAgIHNlc3Npb24uY2xvc2UoKTsKICAgIH0KICAgICovCgogICAg\nLyoqCiAgICAgKiBUZXN0cyBpZiB1bmFja25vd2xlZGdlZCBtZXNzYWdlcyBh\ncmUgYmVpbmcgcmUtZGVsaXZlcmVkIHdoZW4gdGhlIGNvbnN1bWVyIGNvbm5l\nY3RzIGFnYWluLgogICAgICoKICAgICAqIEB0aHJvd3MgSk1TRXhjZXB0aW9u\nCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RVbkFja2VkTWVzc2FnZUFy\nZU5vdENvbnN1bWVkT25TZXNzaW9uQ2xvc2UoKSB0aHJvd3MgSk1TRXhjZXB0\naW9uIHsKICAgICAgICBjb25uZWN0aW9uLnN0YXJ0KCk7CiAgICAgICAgU2Vz\nc2lvbiBzZXNzaW9uID0gY29ubmVjdGlvbi5jcmVhdGVTZXNzaW9uKGZhbHNl\nLCBTZXNzaW9uLkNMSUVOVF9BQ0tOT1dMRURHRSk7CiAgICAgICAgVG9waWMg\ncXVldWUgPSBzZXNzaW9uLmNyZWF0ZVRvcGljKGdldFF1ZXVlTmFtZSgpKTsK\nICAgICAgICBNZXNzYWdlUHJvZHVjZXIgcHJvZHVjZXIgPSBzZXNzaW9uLmNy\nZWF0ZVByb2R1Y2VyKHF1ZXVlKTsKICAgICAgICBNZXNzYWdlQ29uc3VtZXIg\nY29uc3VtZXIgPSBzZXNzaW9uLmNyZWF0ZUR1cmFibGVTdWJzY3JpYmVyKHF1\nZXVlLCAic3Vic2NyaWJlci1pZDMiKTsKICAgICAgICBwcm9kdWNlci5zZW5k\nKHNlc3Npb24uY3JlYXRlVGV4dE1lc3NhZ2UoIkhlbGxvIikpOwoKICAgICAg\nICAvLyBDb25zdW1lIHRoZSBtZXNzYWdlLi4uCiAgICAgICAgTWVzc2FnZSBt\nc2cgPSBjb25zdW1lci5yZWNlaXZlKDEwMDApOwogICAgICAgIGFzc2VydE5v\ndE51bGwobXNnKTsKICAgICAgICAvLyBEb24ndCBhY2sgdGhlIG1lc3NhZ2Uu\nCgogICAgICAgIC8vIFJlc2V0IHRoZSBzZXNzaW9uLiAgVGhpcyBzaG91bGQg\nY2F1c2UgdGhlIHVuYWNrbm93bGVkZ2VkIG1lc3NhZ2UgdG8gYmUgcmUtZGVs\naXZlcmVkLgogICAgICAgIHNlc3Npb24uY2xvc2UoKTsKICAgICAgICBzZXNz\naW9uID0gY29ubmVjdGlvbi5jcmVhdGVTZXNzaW9uKGZhbHNlLCBTZXNzaW9u\nLkNMSUVOVF9BQ0tOT1dMRURHRSk7CgogICAgICAgIC8vIEF0dGVtcHQgdG8g\nQ29uc3VtZSB0aGUgbWVzc2FnZS4uLgogICAgICAgIGNvbnN1bWVyID0gc2Vz\nc2lvbi5jcmVhdGVEdXJhYmxlU3Vic2NyaWJlcihxdWV1ZSwgInN1YnNjcmli\nZXItaWQzIik7CiAgICAgICAgbXNnID0gY29uc3VtZXIucmVjZWl2ZSgyMDAw\nKTsKICAgICAgICBhc3NlcnROb3ROdWxsKG1zZyk7CiAgICAgICAgbXNnLmFj\na25vd2xlZGdlKCk7CgogICAgICAgIHNlc3Npb24uY2xvc2UoKTsKICAgIH0K\nCiAgICBwcm90ZWN0ZWQgU3RyaW5nIGdldFF1ZXVlTmFtZSgpIHsKICAgICAg\nICByZXR1cm4gZ2V0Q2xhc3MoKS5nZXROYW1lKCkgKyAiLiIgKyBnZXROYW1l\nKCk7CiAgICB9Cgp9Cg==\n","encoding":"base64"}

