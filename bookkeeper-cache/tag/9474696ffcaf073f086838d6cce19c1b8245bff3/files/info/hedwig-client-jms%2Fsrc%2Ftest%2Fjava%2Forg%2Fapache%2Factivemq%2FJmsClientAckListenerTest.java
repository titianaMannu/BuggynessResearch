{"sha":"78d7fb3de4597a348f9cdf381302bdf9d57f1e71","node_id":"MDQ6QmxvYjE1NzU5NTY6NzhkN2ZiM2RlNDU5N2EzNDhmOWNkZjM4MTMwMmJkZjlkNTdmMWU3MQ==","size":4181,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/78d7fb3de4597a348f9cdf381302bdf9d57f1e71","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUgb3IgbW9yZQogKiBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlIGRpc3Ry\naWJ1dGVkIHdpdGgKICogdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLgogKiBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byBZb3UgdW5kZXIgdGhlIEFwYWNo\nZSBMaWNlbnNlLCBWZXJzaW9uIDIuMAogKiAodGhlICJMaWNlbnNlIik7IHlv\ndSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ug\nd2l0aAogKiB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBv\nZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hl\nLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWly\nZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcs\nIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlz\nIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQg\nV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIg\nZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRo\nZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5k\nCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFja2Fn\nZSBvcmcuYXBhY2hlLmFjdGl2ZW1xOwoKaW1wb3J0IGphdmF4Lmptcy5Ub3Bp\nYzsKaW1wb3J0IGphdmF4Lmptcy5Db25uZWN0aW9uOwppbXBvcnQgamF2YXgu\nam1zLk1lc3NhZ2U7CmltcG9ydCBqYXZheC5qbXMuTWVzc2FnZUNvbnN1bWVy\nOwppbXBvcnQgamF2YXguam1zLk1lc3NhZ2VMaXN0ZW5lcjsKaW1wb3J0IGph\ndmF4Lmptcy5NZXNzYWdlUHJvZHVjZXI7CmltcG9ydCBqYXZheC5qbXMuU2Vz\nc2lvbjsKCnB1YmxpYyBjbGFzcyBKbXNDbGllbnRBY2tMaXN0ZW5lclRlc3Qg\nZXh0ZW5kcyBUZXN0U3VwcG9ydCBpbXBsZW1lbnRzIE1lc3NhZ2VMaXN0ZW5l\nciB7CgogICAgcHJpdmF0ZSBDb25uZWN0aW9uIGNvbm5lY3Rpb247CiAgICBw\ncml2YXRlIGJvb2xlYW4gZG9udEFjazsKCiAgICBwcm90ZWN0ZWQgdm9pZCBz\nZXRVcCgpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIHN1cGVyLnNldFVw\nKCk7CiAgICAgICAgY29ubmVjdGlvbiA9IGNyZWF0ZUNvbm5lY3Rpb24oKTsK\nICAgIH0KCiAgICAvKioKICAgICAqIEBzZWUganVuaXQuZnJhbWV3b3JrLlRl\nc3RDYXNlI3RlYXJEb3duKCkKICAgICAqLwogICAgcHJvdGVjdGVkIHZvaWQg\ndGVhckRvd24oKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBpZiAoY29u\nbmVjdGlvbiAhPSBudWxsKSB7CiAgICAgICAgICAgIGNvbm5lY3Rpb24uY2xv\nc2UoKTsKICAgICAgICAgICAgY29ubmVjdGlvbiA9IG51bGw7CiAgICAgICAg\nfQogICAgICAgIHN1cGVyLnRlYXJEb3duKCk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBUZXN0cyBpZiBhY2tub3dsZWdlZCBtZXNzYWdlcyBhcmUgYmVpbmcg\nY29uc3VtZWQuCiAgICAgKgogICAgICogQHRocm93cyBqYXZheC5qbXMuSk1T\nRXhjZXB0aW9uCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RBY2tlZE1l\nc3NhZ2VBcmVDb25zdW1lZCgpIHRocm93cyBFeGNlcHRpb24gewogICAgICAg\nIGNvbm5lY3Rpb24uc3RhcnQoKTsKICAgICAgICBTZXNzaW9uIHNlc3Npb24g\nPSBjb25uZWN0aW9uLmNyZWF0ZVNlc3Npb24oZmFsc2UsIFNlc3Npb24uQ0xJ\nRU5UX0FDS05PV0xFREdFKTsKICAgICAgICBUb3BpYyBxdWV1ZSA9IHNlc3Np\nb24uY3JlYXRlVG9waWMoInRlc3QiKTsKICAgICAgICBNZXNzYWdlUHJvZHVj\nZXIgcHJvZHVjZXIgPSBzZXNzaW9uLmNyZWF0ZVByb2R1Y2VyKHF1ZXVlKTsK\nICAgICAgICBwcm9kdWNlci5zZW5kKHNlc3Npb24uY3JlYXRlVGV4dE1lc3Nh\nZ2UoIkhlbGxvIikpOwoKICAgICAgICAvLyBDb25zdW1lIHRoZSBtZXNzYWdl\nLi4uCiAgICAgICAgTWVzc2FnZUNvbnN1bWVyIGNvbnN1bWVyID0gc2Vzc2lv\nbi5jcmVhdGVEdXJhYmxlU3Vic2NyaWJlcihxdWV1ZSwgInN1YnNjcmliZXIt\naWQxIik7CiAgICAgICAgY29uc3VtZXIuc2V0TWVzc2FnZUxpc3RlbmVyKHRo\naXMpOwoKICAgICAgICBUaHJlYWQuc2xlZXAoMTAwMDApOwoKICAgICAgICAv\nLyBSZXNldCB0aGUgc2Vzc2lvbi4KICAgICAgICBzZXNzaW9uLmNsb3NlKCk7\nCgogICAgICAgIHNlc3Npb24gPSBjb25uZWN0aW9uLmNyZWF0ZVNlc3Npb24o\nZmFsc2UsIFNlc3Npb24uQ0xJRU5UX0FDS05PV0xFREdFKTsKCiAgICAgICAg\nLy8gQXR0ZW1wdCB0byBDb25zdW1lIHRoZSBtZXNzYWdlLi4uCiAgICAgICAg\nY29uc3VtZXIgPSBzZXNzaW9uLmNyZWF0ZUR1cmFibGVTdWJzY3JpYmVyKHF1\nZXVlLCAic3Vic2NyaWJlci1pZDEiKTsKICAgICAgICBNZXNzYWdlIG1zZyA9\nIGNvbnN1bWVyLnJlY2VpdmUoMTAwMCk7CiAgICAgICAgYXNzZXJ0TnVsbCht\nc2cpOwoKICAgICAgICBzZXNzaW9uLmNsb3NlKCk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBUZXN0cyBpZiB1bmFja25vd2xlZ2VkIG1lc3NhZ2VzIGFyZSBi\nZWluZyByZWRlbGl2ZXJlZCB3aGVuIHRoZSBjb25zdW1lcgogICAgICogY29u\nbmVjdHMgYWdhaW4uCiAgICAgKgogICAgICogQHRocm93cyBqYXZheC5qbXMu\nSk1TRXhjZXB0aW9uCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RVbkFj\na2VkTWVzc2FnZUFyZU5vdENvbnN1bWVkT25TZXNzaW9uQ2xvc2UoKSB0aHJv\nd3MgRXhjZXB0aW9uIHsKICAgICAgICBjb25uZWN0aW9uLnN0YXJ0KCk7CiAg\nICAgICAgLy8gZG9uJ3QgYWtub3dsZWRnZSBtZXNzYWdlIG9uIG9uTWVzc2Fn\nZSgpIGNhbGwKICAgICAgICBkb250QWNrID0gdHJ1ZTsKICAgICAgICBTZXNz\naW9uIHNlc3Npb24gPSBjb25uZWN0aW9uLmNyZWF0ZVNlc3Npb24oZmFsc2Us\nIFNlc3Npb24uQ0xJRU5UX0FDS05PV0xFREdFKTsKICAgICAgICBUb3BpYyBx\ndWV1ZSA9IHNlc3Npb24uY3JlYXRlVG9waWMoInRlc3QiKTsKICAgICAgICBN\nZXNzYWdlUHJvZHVjZXIgcHJvZHVjZXIgPSBzZXNzaW9uLmNyZWF0ZVByb2R1\nY2VyKHF1ZXVlKTsKICAgICAgICAvLyBDb25zdW1lIHRoZSBtZXNzYWdlLi4u\nCiAgICAgICAgTWVzc2FnZUNvbnN1bWVyIGNvbnN1bWVyID0gc2Vzc2lvbi5j\ncmVhdGVEdXJhYmxlU3Vic2NyaWJlcihxdWV1ZSwgInN1YnNjcmliZXItaWQy\nIik7CiAgICAgICAgY29uc3VtZXIuc2V0TWVzc2FnZUxpc3RlbmVyKHRoaXMp\nOwoKICAgICAgICAvLyBEb24ndCBhY2sgdGhlIG1lc3NhZ2UuCiAgICAgICAg\ncHJvZHVjZXIuc2VuZChzZXNzaW9uLmNyZWF0ZVRleHRNZXNzYWdlKCJIZWxs\nbyIpKTsKCiAgICAgICAgLy8gUmVzZXQgdGhlIHNlc3Npb24uIFRoaXMgc2hv\ndWxkIGNhdXNlIHRoZSBVbmFja2VkIG1lc3NhZ2UgdG8gYmUKICAgICAgICAv\nLyByZWRlbGl2ZXJlZC4KICAgICAgICBzZXNzaW9uLmNsb3NlKCk7CgogICAg\nICAgIFRocmVhZC5zbGVlcCgxMDAwMCk7CiAgICAgICAgc2Vzc2lvbiA9IGNv\nbm5lY3Rpb24uY3JlYXRlU2Vzc2lvbihmYWxzZSwgU2Vzc2lvbi5DTElFTlRf\nQUNLTk9XTEVER0UpOwogICAgICAgIC8vIEF0dGVtcHQgdG8gQ29uc3VtZSB0\naGUgbWVzc2FnZS4uLgogICAgICAgIGNvbnN1bWVyID0gc2Vzc2lvbi5jcmVh\ndGVEdXJhYmxlU3Vic2NyaWJlcihxdWV1ZSwgInN1YnNjcmliZXItaWQyIik7\nCiAgICAgICAgTWVzc2FnZSBtc2cgPSBjb25zdW1lci5yZWNlaXZlKDIwMDAp\nOwogICAgICAgIGFzc2VydE5vdE51bGwobXNnKTsKICAgICAgICBtc2cuYWNr\nbm93bGVkZ2UoKTsKCiAgICAgICAgc2Vzc2lvbi5jbG9zZSgpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIG9uTWVzc2FnZShNZXNzYWdlIG1lc3NhZ2UpIHsK\nCiAgICAgICAgYXNzZXJ0Tm90TnVsbChtZXNzYWdlKTsKICAgICAgICBpZiAo\nIWRvbnRBY2spIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAg\nIG1lc3NhZ2UuYWNrbm93bGVkZ2UoKTsKICAgICAgICAgICAgfSBjYXRjaCAo\nRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1Ry\nYWNlKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgfQoKICAgIH0KfQo=\n","encoding":"base64"}

