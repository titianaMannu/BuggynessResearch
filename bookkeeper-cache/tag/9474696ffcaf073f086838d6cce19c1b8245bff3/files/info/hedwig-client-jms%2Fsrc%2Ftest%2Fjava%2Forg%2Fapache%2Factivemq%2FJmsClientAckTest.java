{"sha":"c4aa3c6d70ba91bac5053c95465d44642f8829d0","node_id":"MDQ6QmxvYjE1NzU5NTY6YzRhYTNjNmQ3MGJhOTFiYWM1MDUzYzk1NDY1ZDQ0NjQyZjg4MjlkMA==","size":5183,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/c4aa3c6d70ba91bac5053c95465d44642f8829d0","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUgb3IgbW9yZQogKiBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlIGRpc3Ry\naWJ1dGVkIHdpdGgKICogdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLgogKiBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byBZb3UgdW5kZXIgdGhlIEFwYWNo\nZSBMaWNlbnNlLCBWZXJzaW9uIDIuMAogKiAodGhlICJMaWNlbnNlIik7IHlv\ndSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ug\nd2l0aAogKiB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBv\nZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hl\nLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWly\nZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcs\nIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlz\nIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQg\nV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIg\nZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRo\nZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5k\nCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFja2Fn\nZSBvcmcuYXBhY2hlLmFjdGl2ZW1xOwoKaW1wb3J0IGphdmF4Lmptcy5Ub3Bp\nYzsKaW1wb3J0IGphdmF4Lmptcy5Db25uZWN0aW9uOwppbXBvcnQgamF2YXgu\nam1zLkpNU0V4Y2VwdGlvbjsKaW1wb3J0IGphdmF4Lmptcy5NZXNzYWdlOwpp\nbXBvcnQgamF2YXguam1zLk1lc3NhZ2VDb25zdW1lcjsKaW1wb3J0IGphdmF4\nLmptcy5NZXNzYWdlUHJvZHVjZXI7CmltcG9ydCBqYXZheC5qbXMuU2Vzc2lv\nbjsKCnB1YmxpYyBjbGFzcyBKbXNDbGllbnRBY2tUZXN0IGV4dGVuZHMgVGVz\ndFN1cHBvcnQgewoKICAgIHByaXZhdGUgQ29ubmVjdGlvbiBjb25uZWN0aW9u\nOwoKICAgIHByb3RlY3RlZCB2b2lkIHNldFVwKCkgdGhyb3dzIEV4Y2VwdGlv\nbiB7CiAgICAgICAgc3VwZXIuc2V0VXAoKTsKICAgICAgICBjb25uZWN0aW9u\nID0gY3JlYXRlQ29ubmVjdGlvbigpOwogICAgfQoKICAgIC8qKgogICAgICog\nQHNlZSBqdW5pdC5mcmFtZXdvcmsuVGVzdENhc2UjdGVhckRvd24oKQogICAg\nICovCiAgICBwcm90ZWN0ZWQgdm9pZCB0ZWFyRG93bigpIHRocm93cyBFeGNl\ncHRpb24gewogICAgICAgIGlmIChjb25uZWN0aW9uICE9IG51bGwpIHsKICAg\nICAgICAgICAgY29ubmVjdGlvbi5jbG9zZSgpOwogICAgICAgICAgICBjb25u\nZWN0aW9uID0gbnVsbDsKICAgICAgICB9CiAgICAgICAgc3VwZXIudGVhckRv\nd24oKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRlc3RzIGlmIGFja25vd2xl\nZGdlZCBtZXNzYWdlcyBhcmUgYmVpbmcgY29uc3VtZWQuCiAgICAgKgogICAg\nICogQHRocm93cyBKTVNFeGNlcHRpb24KICAgICAqLwogICAgcHVibGljIHZv\naWQgdGVzdEFja2VkTWVzc2FnZUFyZUNvbnN1bWVkKCkgdGhyb3dzIEpNU0V4\nY2VwdGlvbiB7CiAgICAgICAgY29ubmVjdGlvbi5zdGFydCgpOwogICAgICAg\nIFNlc3Npb24gc2Vzc2lvbiA9IGNvbm5lY3Rpb24uY3JlYXRlU2Vzc2lvbihm\nYWxzZSwgU2Vzc2lvbi5DTElFTlRfQUNLTk9XTEVER0UpOwogICAgICAgIFRv\ncGljIHF1ZXVlID0gc2Vzc2lvbi5jcmVhdGVUb3BpYyhnZXRRdWV1ZU5hbWUo\nKSk7CiAgICAgICAgTWVzc2FnZVByb2R1Y2VyIHByb2R1Y2VyID0gc2Vzc2lv\nbi5jcmVhdGVQcm9kdWNlcihxdWV1ZSk7CiAgICAgICAgTWVzc2FnZUNvbnN1\nbWVyIGNvbnN1bWVyID0gc2Vzc2lvbi5jcmVhdGVEdXJhYmxlU3Vic2NyaWJl\ncihxdWV1ZSwgInN1YnNjcmliZXItaWQxIik7CiAgICAgICAgcHJvZHVjZXIu\nc2VuZChzZXNzaW9uLmNyZWF0ZVRleHRNZXNzYWdlKCJIZWxsbyIpKTsKCiAg\nICAgICAgLy8gQ29uc3VtZSB0aGUgbWVzc2FnZS4uLgogICAgICAgIE1lc3Nh\nZ2UgbXNnID0gY29uc3VtZXIucmVjZWl2ZSgxMDAwKTsKICAgICAgICBhc3Nl\ncnROb3ROdWxsKG1zZyk7CiAgICAgICAgbXNnLmFja25vd2xlZGdlKCk7Cgog\nICAgICAgIC8vIFJlc2V0IHRoZSBzZXNzaW9uLgogICAgICAgIHNlc3Npb24u\nY2xvc2UoKTsKICAgICAgICBzZXNzaW9uID0gY29ubmVjdGlvbi5jcmVhdGVT\nZXNzaW9uKGZhbHNlLCBTZXNzaW9uLkNMSUVOVF9BQ0tOT1dMRURHRSk7Cgog\nICAgICAgIC8vIEF0dGVtcHQgdG8gQ29uc3VtZSB0aGUgbWVzc2FnZS4uLgog\nICAgICAgIGNvbnN1bWVyID0gc2Vzc2lvbi5jcmVhdGVEdXJhYmxlU3Vic2Ny\naWJlcihxdWV1ZSwgInN1YnNjcmliZXItaWQxIik7CiAgICAgICAgbXNnID0g\nY29uc3VtZXIucmVjZWl2ZSgxMDAwKTsKICAgICAgICBhc3NlcnROdWxsKG1z\nZyk7CgogICAgICAgIHNlc3Npb24uY2xvc2UoKTsKICAgIH0KCiAgICAvKioK\nICAgICAqIFRlc3RzIGlmIGFja25vd2xlZGdlZCBtZXNzYWdlcyBhcmUgYmVp\nbmcgY29uc3VtZWQuCiAgICAgKgogICAgICogQHRocm93cyBKTVNFeGNlcHRp\nb24KICAgICAqLwogICAgcHVibGljIHZvaWQgdGVzdExhc3RNZXNzYWdlQWNr\nZWQoKSB0aHJvd3MgSk1TRXhjZXB0aW9uIHsKICAgICAgICBjb25uZWN0aW9u\nLnN0YXJ0KCk7CiAgICAgICAgU2Vzc2lvbiBzZXNzaW9uID0gY29ubmVjdGlv\nbi5jcmVhdGVTZXNzaW9uKGZhbHNlLCBTZXNzaW9uLkNMSUVOVF9BQ0tOT1dM\nRURHRSk7CiAgICAgICAgVG9waWMgcXVldWUgPSBzZXNzaW9uLmNyZWF0ZVRv\ncGljKGdldFF1ZXVlTmFtZSgpKTsKICAgICAgICBNZXNzYWdlUHJvZHVjZXIg\ncHJvZHVjZXIgPSBzZXNzaW9uLmNyZWF0ZVByb2R1Y2VyKHF1ZXVlKTsKICAg\nICAgICBNZXNzYWdlQ29uc3VtZXIgY29uc3VtZXIgPSBzZXNzaW9uLmNyZWF0\nZUR1cmFibGVTdWJzY3JpYmVyKHF1ZXVlLCAic3Vic2NyaWJlci1pZDIiKTsK\nICAgICAgICBwcm9kdWNlci5zZW5kKHNlc3Npb24uY3JlYXRlVGV4dE1lc3Nh\nZ2UoIkhlbGxvIikpOwogICAgICAgIHByb2R1Y2VyLnNlbmQoc2Vzc2lvbi5j\ncmVhdGVUZXh0TWVzc2FnZSgiSGVsbG8yIikpOwogICAgICAgIHByb2R1Y2Vy\nLnNlbmQoc2Vzc2lvbi5jcmVhdGVUZXh0TWVzc2FnZSgiSGVsbG8zIikpOwoK\nICAgICAgICAvLyBDb25zdW1lIHRoZSBtZXNzYWdlLi4uCiAgICAgICAgTWVz\nc2FnZSBtc2cgPSBjb25zdW1lci5yZWNlaXZlKDEwMDApOwogICAgICAgIGFz\nc2VydE5vdE51bGwobXNnKTsKICAgICAgICBtc2cgPSBjb25zdW1lci5yZWNl\naXZlKDEwMDApOwogICAgICAgIGFzc2VydE5vdE51bGwobXNnKTsKICAgICAg\nICBtc2cgPSBjb25zdW1lci5yZWNlaXZlKDEwMDApOwogICAgICAgIGFzc2Vy\ndE5vdE51bGwobXNnKTsKICAgICAgICBtc2cuYWNrbm93bGVkZ2UoKTsKCiAg\nICAgICAgLy8gUmVzZXQgdGhlIHNlc3Npb24uCiAgICAgICAgc2Vzc2lvbi5j\nbG9zZSgpOwogICAgICAgIHNlc3Npb24gPSBjb25uZWN0aW9uLmNyZWF0ZVNl\nc3Npb24oZmFsc2UsIFNlc3Npb24uQ0xJRU5UX0FDS05PV0xFREdFKTsKCiAg\nICAgICAgLy8gQXR0ZW1wdCB0byBDb25zdW1lIHRoZSBtZXNzYWdlLi4uCiAg\nICAgICAgY29uc3VtZXIgPSBzZXNzaW9uLmNyZWF0ZUR1cmFibGVTdWJzY3Jp\nYmVyKHF1ZXVlLCAic3Vic2NyaWJlci1pZDIiKTsKICAgICAgICBtc2cgPSBj\nb25zdW1lci5yZWNlaXZlKDEwMDApOwogICAgICAgIGFzc2VydE51bGwobXNn\nKTsKCiAgICAgICAgc2Vzc2lvbi5jbG9zZSgpOwogICAgfQoKICAgIC8qKgog\nICAgICogVGVzdHMgaWYgdW5hY2tub3dsZWRnZWQgbWVzc2FnZXMgYXJlIGJl\naW5nIHJlLWRlbGl2ZXJlZCB3aGVuIHRoZSBjb25zdW1lciBjb25uZWN0cyBh\nZ2Fpbi4KICAgICAqCiAgICAgKiBAdGhyb3dzIEpNU0V4Y2VwdGlvbgogICAg\nICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0VW5BY2tlZE1lc3NhZ2VBcmVOb3RD\nb25zdW1lZE9uU2Vzc2lvbkNsb3NlKCkgdGhyb3dzIEpNU0V4Y2VwdGlvbiB7\nCiAgICAgICAgY29ubmVjdGlvbi5zdGFydCgpOwogICAgICAgIFNlc3Npb24g\nc2Vzc2lvbiA9IGNvbm5lY3Rpb24uY3JlYXRlU2Vzc2lvbihmYWxzZSwgU2Vz\nc2lvbi5DTElFTlRfQUNLTk9XTEVER0UpOwogICAgICAgIFRvcGljIHF1ZXVl\nID0gc2Vzc2lvbi5jcmVhdGVUb3BpYyhnZXRRdWV1ZU5hbWUoKSk7CiAgICAg\nICAgTWVzc2FnZVByb2R1Y2VyIHByb2R1Y2VyID0gc2Vzc2lvbi5jcmVhdGVQ\ncm9kdWNlcihxdWV1ZSk7CiAgICAgICAgTWVzc2FnZUNvbnN1bWVyIGNvbnN1\nbWVyID0gc2Vzc2lvbi5jcmVhdGVEdXJhYmxlU3Vic2NyaWJlcihxdWV1ZSwg\nInN1YnNjcmliZXItaWQzIik7CiAgICAgICAgcHJvZHVjZXIuc2VuZChzZXNz\naW9uLmNyZWF0ZVRleHRNZXNzYWdlKCJIZWxsbyIpKTsKCiAgICAgICAgLy8g\nQ29uc3VtZSB0aGUgbWVzc2FnZS4uLgogICAgICAgIE1lc3NhZ2UgbXNnID0g\nY29uc3VtZXIucmVjZWl2ZSgxMDAwKTsKICAgICAgICBhc3NlcnROb3ROdWxs\nKG1zZyk7CiAgICAgICAgLy8gRG9uJ3QgYWNrIHRoZSBtZXNzYWdlLgoKICAg\nICAgICAvLyBSZXNldCB0aGUgc2Vzc2lvbi4gIFRoaXMgc2hvdWxkIGNhdXNl\nIHRoZSB1bmFja25vd2xlZGdlZCBtZXNzYWdlIHRvIGJlIHJlLWRlbGl2ZXJl\nZC4KICAgICAgICBzZXNzaW9uLmNsb3NlKCk7CiAgICAgICAgc2Vzc2lvbiA9\nIGNvbm5lY3Rpb24uY3JlYXRlU2Vzc2lvbihmYWxzZSwgU2Vzc2lvbi5DTElF\nTlRfQUNLTk9XTEVER0UpOwoKICAgICAgICAvLyBBdHRlbXB0IHRvIENvbnN1\nbWUgdGhlIG1lc3NhZ2UuLi4KICAgICAgICBjb25zdW1lciA9IHNlc3Npb24u\nY3JlYXRlRHVyYWJsZVN1YnNjcmliZXIocXVldWUsICJzdWJzY3JpYmVyLWlk\nMyIpOwogICAgICAgIG1zZyA9IGNvbnN1bWVyLnJlY2VpdmUoMjAwMCk7CiAg\nICAgICAgYXNzZXJ0Tm90TnVsbChtc2cpOwogICAgICAgIG1zZy5hY2tub3ds\nZWRnZSgpOwoKICAgICAgICBzZXNzaW9uLmNsb3NlKCk7CiAgICB9CgogICAg\ncHJvdGVjdGVkIFN0cmluZyBnZXRRdWV1ZU5hbWUoKSB7CiAgICAgICAgcmV0\ndXJuIGdldENsYXNzKCkuZ2V0TmFtZSgpICsgIi4iICsgZ2V0TmFtZSgpOwog\nICAgfQoKfQo=\n","encoding":"base64"}

