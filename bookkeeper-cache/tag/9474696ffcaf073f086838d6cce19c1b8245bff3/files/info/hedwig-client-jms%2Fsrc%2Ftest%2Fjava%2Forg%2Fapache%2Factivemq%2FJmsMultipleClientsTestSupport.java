{"sha":"3873a0f48525032aa57d90bef4c8c9401cf23665","node_id":"MDQ6QmxvYjE1NzU5NTY6Mzg3M2EwZjQ4NTI1MDMyYWE1N2Q5MGJlZjRjOGM5NDAxY2YyMzY2NQ==","size":10181,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/3873a0f48525032aa57d90bef4c8c9401cf23665","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUgb3IgbW9yZQogKiBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlIGRpc3Ry\naWJ1dGVkIHdpdGgKICogdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLgogKiBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byBZb3UgdW5kZXIgdGhlIEFwYWNo\nZSBMaWNlbnNlLCBWZXJzaW9uIDIuMAogKiAodGhlICJMaWNlbnNlIik7IHlv\ndSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ug\nd2l0aAogKiB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBv\nZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hl\nLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWly\nZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcs\nIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlz\nIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQg\nV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIg\nZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRo\nZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5k\nCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFja2Fn\nZSBvcmcuYXBhY2hlLmFjdGl2ZW1xOwoKaW1wb3J0IGphdmEubmV0LlVSSTsK\naW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmptcy5TZXNzaW9uSW1wbDsKaW1w\nb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmptcy5zcGkuSGVkd2lnQ29ubmVjdGlv\nbkZhY3RvcnlJbXBsOwppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsKaW1w\nb3J0IGphdmEudXRpbC5BcnJheXM7CmltcG9ydCBqYXZhLnV0aWwuQ29sbGVj\ndGlvbnM7CmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsKaW1wb3J0IGphdmEu\ndXRpbC5JdGVyYXRvcjsKaW1wb3J0IGphdmEudXRpbC5MaXN0OwppbXBvcnQg\namF2YS51dGlsLk1hcDsKaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LmF0\nb21pYy5BdG9taWNJbnRlZ2VyOwoKaW1wb3J0IGphdmF4Lmptcy5Db25uZWN0\naW9uOwppbXBvcnQgamF2YXguam1zLkNvbm5lY3Rpb25GYWN0b3J5OwppbXBv\ncnQgamF2YXguam1zLkRlbGl2ZXJ5TW9kZTsKaW1wb3J0IGphdmF4Lmptcy5E\nZXN0aW5hdGlvbjsKaW1wb3J0IGphdmF4Lmptcy5KTVNFeGNlcHRpb247Cmlt\ncG9ydCBqYXZheC5qbXMuTWVzc2FnZUNvbnN1bWVyOwppbXBvcnQgamF2YXgu\nam1zLk1lc3NhZ2VQcm9kdWNlcjsKaW1wb3J0IGphdmF4Lmptcy5TZXNzaW9u\nOwppbXBvcnQgamF2YXguam1zLlRleHRNZXNzYWdlOwppbXBvcnQgamF2YXgu\nam1zLlRvcGljU3Vic2NyaWJlcjsKCgoKaW1wb3J0IGphdmF4Lmptcy5EZXN0\naW5hdGlvbjsKCgppbXBvcnQgb3JnLmFwYWNoZS5hY3RpdmVtcS51dGlsLk1l\nc3NhZ2VJZExpc3Q7CgovKioKICogVGVzdCBjYXNlIHN1cHBvcnQgdXNlZCB0\nbyB0ZXN0IG11bHRpcGxlIG1lc3NhZ2UgY29tc3VtZXJzIGFuZCBtZXNzYWdl\nCiAqIHByb2R1Y2VycyBjb25uZWN0aW5nIHRvIGEgc2luZ2xlIGJyb2tlci4K\nICovCnB1YmxpYyBjbGFzcyBKbXNNdWx0aXBsZUNsaWVudHNUZXN0U3VwcG9y\ndCBleHRlbmRzIENvbWJpbmF0aW9uVGVzdFN1cHBvcnQgewoKICAgIHByb3Rl\nY3RlZCBNYXA8TWVzc2FnZUNvbnN1bWVyLCBNZXNzYWdlSWRMaXN0PiBjb25z\ndW1lcnMKICAgICAgICA9IG5ldyBIYXNoTWFwPE1lc3NhZ2VDb25zdW1lciwg\nTWVzc2FnZUlkTGlzdD4oKTsgLy8gTWFwIG9mIGNvbnN1bWVyIHdpdGggbWVz\nc2FnZXMgcmVjZWl2ZWQKICAgIHByb3RlY3RlZCBpbnQgY29uc3VtZXJDb3Vu\ndCA9IDE7CiAgICBwcm90ZWN0ZWQgaW50IHByb2R1Y2VyQ291bnQgPSAxOwoK\nICAgIHByb3RlY3RlZCBpbnQgbWVzc2FnZVNpemUgPSAxMDI0OwoKICAgIHBy\nb3RlY3RlZCBib29sZWFuIHVzZUNvbmN1cnJlbnRTZW5kID0gdHJ1ZTsKICAg\nIHByb3RlY3RlZCBib29sZWFuIGF1dG9GYWlsID0gdHJ1ZTsKICAgIHByb3Rl\nY3RlZCBib29sZWFuIGR1cmFibGU7CiAgICBwdWJsaWMgYm9vbGVhbiB0b3Bp\nYzsKICAgIHByb3RlY3RlZCBib29sZWFuIHBlcnNpc3RlbnQ7CgogICAgcHJv\ndGVjdGVkIERlc3RpbmF0aW9uIGRlc3RpbmF0aW9uOwogICAgcHJvdGVjdGVk\nIExpc3Q8Q29ubmVjdGlvbj4gY29ubmVjdGlvbnMgPSBDb2xsZWN0aW9ucy5z\neW5jaHJvbml6ZWRMaXN0KG5ldyBBcnJheUxpc3Q8Q29ubmVjdGlvbj4oKSk7\nCiAgICBwcm90ZWN0ZWQgTWVzc2FnZUlkTGlzdCBhbGxNZXNzYWdlc0xpc3Qg\nPSBuZXcgTWVzc2FnZUlkTGlzdCgpOwoKICAgIHByaXZhdGUgQXRvbWljSW50\nZWdlciBwcm9kdWNlckxvY2s7CgogICAgcHJvdGVjdGVkIHZvaWQgc3RhcnRQ\ncm9kdWNlcnMoRGVzdGluYXRpb24gZGVzdCwgaW50IG1zZ0NvdW50KSB0aHJv\nd3MgRXhjZXB0aW9uIHsKICAgICAgICBzdGFydFByb2R1Y2VycyhjcmVhdGVD\nb25uZWN0aW9uRmFjdG9yeSgpLCBkZXN0LCBtc2dDb3VudCk7CiAgICB9Cgog\nICAgcHJvdGVjdGVkIHZvaWQgc3RhcnRQcm9kdWNlcnMoZmluYWwgQ29ubmVj\ndGlvbkZhY3RvcnkgZmFjdG9yeSwKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgIGZpbmFsIERlc3RpbmF0aW9uIGRlc3QsIGZpbmFsIGludCBt\nc2dDb3VudCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgLy8gVXNlIGNv\nbmN1cnJlbnQgc2VuZAogICAgICAgIGlmICh1c2VDb25jdXJyZW50U2VuZCkg\newogICAgICAgICAgICBwcm9kdWNlckxvY2sgPSBuZXcgQXRvbWljSW50ZWdl\ncihwcm9kdWNlckNvdW50KTsKCiAgICAgICAgICAgIGZvciAoaW50IGkgPSAw\nOyBpIDwgcHJvZHVjZXJDb3VudDsgaSsrKSB7CiAgICAgICAgICAgICAgICBU\naHJlYWQgdCA9IG5ldyBUaHJlYWQobmV3IFJ1bm5hYmxlKCkgewogICAgICAg\nICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsKICAgICAgICAgICAg\nICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIHNlbmRNZXNzYWdlcyhmYWN0b3J5LmNyZWF0ZUNvbm5lY3Rpb24oKSwgZGVz\ndCwgbXNnQ291bnQpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNo\nIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAg\nZS5wcmludFN0YWNrVHJhY2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAg\nfQoKICAgICAgICAgICAgICAgICAgICAgICAgc3luY2hyb25pemVkIChwcm9k\ndWNlckxvY2spIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1\nY2VyTG9jay5kZWNyZW1lbnRBbmRHZXQoKTsKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgIHByb2R1Y2VyTG9jay5ub3RpZnlBbGwoKTsKICAgICAgICAg\nICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAg\nICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIHQuc3RhcnQoKTsKICAg\nICAgICAgICAgfQoKICAgICAgICAgICAgLy8gV2FpdCBmb3IgYWxsIHByb2R1\nY2VycyB0byBmaW5pc2ggc2VuZGluZwogICAgICAgICAgICBzeW5jaHJvbml6\nZWQgKHByb2R1Y2VyTG9jaykgewogICAgICAgICAgICAgICAgd2hpbGUgKHBy\nb2R1Y2VyTG9jay5nZXQoKSAhPSAwKSB7CiAgICAgICAgICAgICAgICAgICAg\ncHJvZHVjZXJMb2NrLndhaXQoMjAwMCk7CiAgICAgICAgICAgICAgICB9CiAg\nICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIFVzZSBzZXJpYWxpemVkIHNl\nbmQKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmb3IgKGludCBpID0g\nMDsgaSA8IHByb2R1Y2VyQ291bnQ7IGkrKykgewogICAgICAgICAgICAgICAg\nc2VuZE1lc3NhZ2VzKGZhY3RvcnkuY3JlYXRlQ29ubmVjdGlvbigpLCBkZXN0\nLCBtc2dDb3VudCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cgog\nICAgcHJvdGVjdGVkIHZvaWQgc2VuZE1lc3NhZ2VzKENvbm5lY3Rpb24gY29u\nbmVjdGlvbiwgRGVzdGluYXRpb24gZGVzdGluYXRpb24sIGludCBjb3VudCkg\ndGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgY29ubmVjdGlvbnMuYWRkKGNv\nbm5lY3Rpb24pOwogICAgICAgIGNvbm5lY3Rpb24uc3RhcnQoKTsKCiAgICAg\nICAgU2Vzc2lvbiBzZXNzaW9uID0gY29ubmVjdGlvbi5jcmVhdGVTZXNzaW9u\nKGZhbHNlLCBTZXNzaW9uLkFVVE9fQUNLTk9XTEVER0UpOwogICAgICAgIE1l\nc3NhZ2VQcm9kdWNlciBwcm9kdWNlciA9IHNlc3Npb24uY3JlYXRlUHJvZHVj\nZXIoZGVzdGluYXRpb24pOwogICAgICAgIHByb2R1Y2VyLnNldERlbGl2ZXJ5\nTW9kZShwZXJzaXN0ZW50ID8gRGVsaXZlcnlNb2RlLlBFUlNJU1RFTlQgOiBE\nZWxpdmVyeU1vZGUuTk9OX1BFUlNJU1RFTlQpOwoKICAgICAgICBmb3IgKGlu\ndCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKICAgICAgICAgICAgVGV4dE1l\nc3NhZ2UgbXNnID0gY3JlYXRlVGV4dE1lc3NhZ2Uoc2Vzc2lvbiwgIiIgKyBp\nKTsKICAgICAgICAgICAgcHJvZHVjZXIuc2VuZChtc2cpOwogICAgICAgIH0K\nCiAgICAgICAgcHJvZHVjZXIuY2xvc2UoKTsKICAgICAgICBzZXNzaW9uLmNs\nb3NlKCk7CiAgICAgICAgY29ubmVjdGlvbi5jbG9zZSgpOwogICAgfQoKICAg\nIHByb3RlY3RlZCBUZXh0TWVzc2FnZSBjcmVhdGVUZXh0TWVzc2FnZShTZXNz\naW9uIHNlc3Npb24sIFN0cmluZyBpbml0VGV4dCkgdGhyb3dzIEV4Y2VwdGlv\nbiB7CiAgICAgICAgVGV4dE1lc3NhZ2UgbXNnID0gc2Vzc2lvbi5jcmVhdGVU\nZXh0TWVzc2FnZSgpOwoKICAgICAgICAvLyBQYWQgbWVzc2FnZSB0ZXh0CiAg\nICAgICAgaWYgKGluaXRUZXh0Lmxlbmd0aCgpIDwgbWVzc2FnZVNpemUpIHsK\nICAgICAgICAgICAgY2hhcltdIGRhdGEgPSBuZXcgY2hhclttZXNzYWdlU2l6\nZSAtIGluaXRUZXh0Lmxlbmd0aCgpXTsKICAgICAgICAgICAgQXJyYXlzLmZp\nbGwoZGF0YSwgJyonKTsKICAgICAgICAgICAgU3RyaW5nIHN0ciA9IG5ldyBT\ndHJpbmcoZGF0YSk7CiAgICAgICAgICAgIG1zZy5zZXRUZXh0KGluaXRUZXh0\nICsgc3RyKTsKCiAgICAgICAgICAgIC8vIERvIG5vdCBwYWQgbWVzc2FnZSB0\nZXh0CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbXNnLnNldFRleHQo\naW5pdFRleHQpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG1zZzsKICAg\nIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBzdGFydENvbnN1bWVycyhEZXN0aW5h\ndGlvbiBkZXN0KSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBzdGFydENv\nbnN1bWVycyhjcmVhdGVDb25uZWN0aW9uRmFjdG9yeSgpLCBkZXN0KTsKICAg\nIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBzdGFydENvbnN1bWVycyhDb25uZWN0\naW9uRmFjdG9yeSBmYWN0b3J5LCBEZXN0aW5hdGlvbiBkZXN0KSB0aHJvd3Mg\nRXhjZXB0aW9uIHsKICAgICAgICBNZXNzYWdlQ29uc3VtZXIgY29uc3VtZXI7\nCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb25zdW1lckNvdW50OyBp\nKyspIHsKICAgICAgICAgICAgaWYgKGR1cmFibGUgJiYgdG9waWMpIHsKICAg\nICAgICAgICAgICAgIGNvbnN1bWVyID0gY3JlYXRlRHVyYWJsZVN1YnNjcmli\nZXIoZmFjdG9yeS5jcmVhdGVDb25uZWN0aW9uKCksIGRlc3QsICJjb25zdW1l\nciIgKyAoaSArIDEpKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAg\nICAgICAgIGNvbnN1bWVyID0gY3JlYXRlTWVzc2FnZUNvbnN1bWVyKGZhY3Rv\ncnkuY3JlYXRlQ29ubmVjdGlvbigpLCBkZXN0KTsKICAgICAgICAgICAgfQog\nICAgICAgICAgICBNZXNzYWdlSWRMaXN0IGxpc3QgPSBuZXcgTWVzc2FnZUlk\nTGlzdCgpOwogICAgICAgICAgICBsaXN0LnNldFBhcmVudChhbGxNZXNzYWdl\nc0xpc3QpOwogICAgICAgICAgICBjb25zdW1lci5zZXRNZXNzYWdlTGlzdGVu\nZXIobGlzdCk7CiAgICAgICAgICAgIGNvbnN1bWVycy5wdXQoY29uc3VtZXIs\nIGxpc3QpOwogICAgICAgIH0KICAgIH0KCiAgICBwcm90ZWN0ZWQgTWVzc2Fn\nZUNvbnN1bWVyIGNyZWF0ZU1lc3NhZ2VDb25zdW1lcihDb25uZWN0aW9uIGNv\nbm4sIERlc3RpbmF0aW9uIGRlc3QpIHRocm93cyBFeGNlcHRpb24gewogICAg\nICAgIGNvbm5lY3Rpb25zLmFkZChjb25uKTsKCiAgICAgICAgU2Vzc2lvbiBz\nZXNzID0gY29ubi5jcmVhdGVTZXNzaW9uKGZhbHNlLCBTZXNzaW9uLkFVVE9f\nQUNLTk9XTEVER0UpOwogICAgICAgIGZpbmFsIE1lc3NhZ2VDb25zdW1lciBj\nb25zdW1lciA9IHNlc3MuY3JlYXRlQ29uc3VtZXIoZGVzdCk7CiAgICAgICAg\nY29ubi5zdGFydCgpOwoKICAgICAgICByZXR1cm4gY29uc3VtZXI7CiAgICB9\nCgogICAgcHJvdGVjdGVkIFRvcGljU3Vic2NyaWJlciBjcmVhdGVEdXJhYmxl\nU3Vic2NyaWJlcihDb25uZWN0aW9uIGNvbm4sIERlc3RpbmF0aW9uIGRlc3Qs\nIFN0cmluZyBuYW1lKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBjb25u\nLnNldENsaWVudElEKG5hbWUpOwogICAgICAgIGNvbm5lY3Rpb25zLmFkZChj\nb25uKTsKICAgICAgICBjb25uLnN0YXJ0KCk7CgogICAgICAgIFNlc3Npb24g\nc2VzcyA9IGNvbm4uY3JlYXRlU2Vzc2lvbihmYWxzZSwgU2Vzc2lvbi5BVVRP\nX0FDS05PV0xFREdFKTsKICAgICAgICBmaW5hbCBUb3BpY1N1YnNjcmliZXIg\nY29uc3VtZXIgPSBzZXNzLmNyZWF0ZUR1cmFibGVTdWJzY3JpYmVyKChqYXZh\neC5qbXMuVG9waWMpZGVzdCwgbmFtZSk7CgogICAgICAgIHJldHVybiBjb25z\ndW1lcjsKICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCB3YWl0Rm9yQWxsTWVz\nc2FnZXNUb0JlUmVjZWl2ZWQoaW50IG1lc3NhZ2VDb3VudCkgdGhyb3dzIEV4\nY2VwdGlvbiB7CiAgICAgICAgYWxsTWVzc2FnZXNMaXN0LndhaXRGb3JNZXNz\nYWdlc1RvQXJyaXZlKG1lc3NhZ2VDb3VudCk7CiAgICB9CgogICAgcHJvdGVj\ndGVkIERlc3RpbmF0aW9uIGNyZWF0ZURlc3RpbmF0aW9uKCkgdGhyb3dzIEpN\nU0V4Y2VwdGlvbiB7CiAgICAgICAgU3RyaW5nIG5hbWUgPSAiLiIgKyBnZXRD\nbGFzcygpLmdldE5hbWUoKSArICIuIiArIGdldE5hbWUoKTsKICAgICAgICAv\nLyBlbnN1cmUgbm90IGluYWR2ZXJ0ZW50bHkgY29tcG9zaXRlIGJlY2F1c2Ug\nb2YgY29tYm9zCiAgICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZSgnICcsJ18n\nKTsKICAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKCcsJywnJicpOwogICAg\nICAgIGlmICh0b3BpYykgewogICAgICAgICAgICBkZXN0aW5hdGlvbiA9IFNl\nc3Npb25JbXBsLmFzVG9waWMoIlRvcGljIiArIG5hbWUpOwogICAgICAgICAg\nICByZXR1cm4gKERlc3RpbmF0aW9uKWRlc3RpbmF0aW9uOwogICAgICAgIH0g\nZWxzZSB7CiAgICAgICAgICAgIGRlc3RpbmF0aW9uID0gU2Vzc2lvbkltcGwu\nYXNUb3BpYygiUXVldWUiICsgbmFtZSk7CiAgICAgICAgICAgIHJldHVybiAo\nRGVzdGluYXRpb24pZGVzdGluYXRpb247CiAgICAgICAgfQogICAgfQoKICAg\nIHByb3RlY3RlZCBDb25uZWN0aW9uRmFjdG9yeSBjcmVhdGVDb25uZWN0aW9u\nRmFjdG9yeSgpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIHJldHVybiBu\nZXcgSGVkd2lnQ29ubmVjdGlvbkZhY3RvcnlJbXBsKCk7CiAgICB9CgogICAg\ncHJvdGVjdGVkIHZvaWQgc2V0VXAoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAg\nICAgICBzdXBlci5zZXRBdXRvRmFpbChhdXRvRmFpbCk7CiAgICAgICAgc3Vw\nZXIuc2V0VXAoKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCB0ZWFyRG93\nbigpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIGZvciAoSXRlcmF0b3I8\nQ29ubmVjdGlvbj4gaXRlciA9IGNvbm5lY3Rpb25zLml0ZXJhdG9yKCk7IGl0\nZXIuaGFzTmV4dCgpOykgewogICAgICAgICAgICBDb25uZWN0aW9uIGNvbm4g\nPSBpdGVyLm5leHQoKTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\nICAgIGNvbm4uY2xvc2UoKTsKICAgICAgICAgICAgfSBjYXRjaCAoVGhyb3dh\nYmxlIGUpIHsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBhbGxN\nZXNzYWdlc0xpc3QuZmx1c2hNZXNzYWdlcygpOwogICAgICAgIGNvbnN1bWVy\ncy5jbGVhcigpOwogICAgICAgIHN1cGVyLnRlYXJEb3duKCk7CiAgICB9Cgog\nICAgLyoKICAgICAqIFNvbWUgaGVscGZ1bCBhc3NlcnRpb25zIGZvciBtdWx0\naXBsZSBjb25zdW1lcnMuCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIGFz\nc2VydENvbnN1bWVyUmVjZWl2ZWRBdExlYXN0WE1lc3NhZ2VzKE1lc3NhZ2VD\nb25zdW1lciBjb25zdW1lciwgaW50IG1zZ0NvdW50KSB7CiAgICAgICAgTWVz\nc2FnZUlkTGlzdCBtZXNzYWdlSWRMaXN0ID0gY29uc3VtZXJzLmdldChjb25z\ndW1lcik7CiAgICAgICAgbWVzc2FnZUlkTGlzdC5hc3NlcnRBdExlYXN0TWVz\nc2FnZXNSZWNlaXZlZChtc2dDb3VudCk7CiAgICB9CgogICAgcHJvdGVjdGVk\nIHZvaWQgYXNzZXJ0Q29uc3VtZXJSZWNlaXZlZEF0TW9zdFhNZXNzYWdlcyhN\nZXNzYWdlQ29uc3VtZXIgY29uc3VtZXIsIGludCBtc2dDb3VudCkgewogICAg\nICAgIE1lc3NhZ2VJZExpc3QgbWVzc2FnZUlkTGlzdCA9IGNvbnN1bWVycy5n\nZXQoY29uc3VtZXIpOwogICAgICAgIG1lc3NhZ2VJZExpc3QuYXNzZXJ0QXRN\nb3N0TWVzc2FnZXNSZWNlaXZlZChtc2dDb3VudCk7CiAgICB9CgogICAgcHJv\ndGVjdGVkIHZvaWQgYXNzZXJ0Q29uc3VtZXJSZWNlaXZlZFhNZXNzYWdlcyhN\nZXNzYWdlQ29uc3VtZXIgY29uc3VtZXIsIGludCBtc2dDb3VudCkgewogICAg\nICAgIE1lc3NhZ2VJZExpc3QgbWVzc2FnZUlkTGlzdCA9IGNvbnN1bWVycy5n\nZXQoY29uc3VtZXIpOwogICAgICAgIG1lc3NhZ2VJZExpc3QuYXNzZXJ0TWVz\nc2FnZXNSZWNlaXZlZE5vV2FpdChtc2dDb3VudCk7CiAgICB9CgogICAgcHJv\ndGVjdGVkIHZvaWQgYXNzZXJ0RWFjaENvbnN1bWVyUmVjZWl2ZWRBdExlYXN0\nWE1lc3NhZ2VzKGludCBtc2dDb3VudCkgewogICAgICAgIGZvciAoSXRlcmF0\nb3I8TWVzc2FnZUNvbnN1bWVyPiBpID0gY29uc3VtZXJzLmtleVNldCgpLml0\nZXJhdG9yKCk7IGkuaGFzTmV4dCgpOykgewogICAgICAgICAgICBhc3NlcnRD\nb25zdW1lclJlY2VpdmVkQXRMZWFzdFhNZXNzYWdlcyhpLm5leHQoKSwgbXNn\nQ291bnQpOwogICAgICAgIH0KICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBh\nc3NlcnRFYWNoQ29uc3VtZXJSZWNlaXZlZEF0TW9zdFhNZXNzYWdlcyhpbnQg\nbXNnQ291bnQpIHsKICAgICAgICBmb3IgKEl0ZXJhdG9yPE1lc3NhZ2VDb25z\ndW1lcj4gaSA9IGNvbnN1bWVycy5rZXlTZXQoKS5pdGVyYXRvcigpOyBpLmhh\nc05leHQoKTspIHsKICAgICAgICAgICAgYXNzZXJ0Q29uc3VtZXJSZWNlaXZl\nZEF0TW9zdFhNZXNzYWdlcyhpLm5leHQoKSwgbXNnQ291bnQpOwogICAgICAg\nIH0KICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBhc3NlcnRFYWNoQ29uc3Vt\nZXJSZWNlaXZlZFhNZXNzYWdlcyhpbnQgbXNnQ291bnQpIHsKICAgICAgICBm\nb3IgKEl0ZXJhdG9yPE1lc3NhZ2VDb25zdW1lcj4gaSA9IGNvbnN1bWVycy5r\nZXlTZXQoKS5pdGVyYXRvcigpOyBpLmhhc05leHQoKTspIHsKICAgICAgICAg\nICAgYXNzZXJ0Q29uc3VtZXJSZWNlaXZlZFhNZXNzYWdlcyhpLm5leHQoKSwg\nbXNnQ291bnQpOwogICAgICAgIH0KICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9p\nZCBhc3NlcnRUb3RhbE1lc3NhZ2VzUmVjZWl2ZWQoaW50IG1zZ0NvdW50KSB7\nCiAgICAgICAgYWxsTWVzc2FnZXNMaXN0LmFzc2VydE1lc3NhZ2VzUmVjZWl2\nZWROb1dhaXQobXNnQ291bnQpOwoKICAgICAgICAvLyBub3cgbGV0cyBjb3Vu\ndCB0aGUgaW5kaXZpZHVhbCBtZXNzYWdlcyByZWNlaXZlZAogICAgICAgIGlu\ndCB0b3RhbE1zZyA9IDA7CiAgICAgICAgZm9yIChJdGVyYXRvcjxNZXNzYWdl\nQ29uc3VtZXI+IGkgPSBjb25zdW1lcnMua2V5U2V0KCkuaXRlcmF0b3IoKTsg\naS5oYXNOZXh0KCk7KSB7CiAgICAgICAgICAgIE1lc3NhZ2VJZExpc3QgbWVz\nc2FnZUlkTGlzdCA9IGNvbnN1bWVycy5nZXQoaS5uZXh0KCkpOwogICAgICAg\nICAgICB0b3RhbE1zZyArPSBtZXNzYWdlSWRMaXN0LmdldE1lc3NhZ2VDb3Vu\ndCgpOwogICAgICAgIH0KICAgICAgICBhc3NlcnRFcXVhbHMoIlRvdGFsIG9m\nIGNvbnN1bWVycyBtZXNzYWdlIGNvdW50IiwgbXNnQ291bnQsIHRvdGFsTXNn\nKTsKICAgIH0KfQo=\n","encoding":"base64"}

