{"sha":"7b60106ec70858e54dfccb6241ecaac575f5338c","node_id":"MDQ6QmxvYjE1NzU5NTY6N2I2MDEwNmVjNzA4NThlNTRkZmNjYjYyNDFlY2FhYzU3NWY1MzM4Yw==","size":3985,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/7b60106ec70858e54dfccb6241ecaac575f5338c","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUgb3IgbW9yZQogKiBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlIGRpc3Ry\naWJ1dGVkIHdpdGgKICogdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLgogKiBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byBZb3UgdW5kZXIgdGhlIEFwYWNo\nZSBMaWNlbnNlLCBWZXJzaW9uIDIuMAogKiAodGhlICJMaWNlbnNlIik7IHlv\ndSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ug\nd2l0aAogKiB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBv\nZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hl\nLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWly\nZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcs\nIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlz\nIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQg\nV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIg\nZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRo\nZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5k\nCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFja2Fn\nZSBvcmcuYXBhY2hlLmFjdGl2ZW1xOwoKCmltcG9ydCBqYXZheC5qbXMuQ29u\nbmVjdGlvbjsKaW1wb3J0IGphdmF4Lmptcy5EZWxpdmVyeU1vZGU7CmltcG9y\ndCBqYXZheC5qbXMuSk1TRXhjZXB0aW9uOwppbXBvcnQgamF2YXguam1zLk1l\nc3NhZ2VDb25zdW1lcjsKaW1wb3J0IGphdmF4Lmptcy5NZXNzYWdlTGlzdGVu\nZXI7CmltcG9ydCBqYXZheC5qbXMuTWVzc2FnZVByb2R1Y2VyOwppbXBvcnQg\namF2YXguam1zLlNlc3Npb247CmltcG9ydCBqYXZheC5qbXMuVG9waWM7Cmlt\ncG9ydCBqYXZheC5qbXMuTWVzc2FnZTsKCnB1YmxpYyBjbGFzcyBKbXNTZW5k\nV2l0aEFzeW5jQ2FsbGJhY2tUZXN0IGV4dGVuZHMgVGVzdFN1cHBvcnQgewoK\nICAgIHByaXZhdGUgQ29ubmVjdGlvbiBjb25uZWN0aW9uOwoKICAgIHByb3Rl\nY3RlZCB2b2lkIHNldFVwKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAg\nc3VwZXIuc2V0VXAoKTsKICAgICAgICBjb25uZWN0aW9uID0gY3JlYXRlQ29u\nbmVjdGlvbigpOwogICAgfQoKICAgIC8qKgogICAgICogQHNlZSBqdW5pdC5m\ncmFtZXdvcmsuVGVzdENhc2UjdGVhckRvd24oKQogICAgICovCiAgICBwcm90\nZWN0ZWQgdm9pZCB0ZWFyRG93bigpIHRocm93cyBFeGNlcHRpb24gewogICAg\nICAgIGlmIChjb25uZWN0aW9uICE9IG51bGwpIHsKICAgICAgICAgICAgY29u\nbmVjdGlvbi5jbG9zZSgpOwogICAgICAgICAgICBjb25uZWN0aW9uID0gbnVs\nbDsKICAgICAgICB9CiAgICAgICAgc3VwZXIudGVhckRvd24oKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0QXN5bmNDYWxsYmFja0lzRmFzdGVyKCkg\ndGhyb3dzIEpNU0V4Y2VwdGlvbiwgSW50ZXJydXB0ZWRFeGNlcHRpb24gewog\nICAgICAgIGNvbm5lY3Rpb24uc3RhcnQoKTsKCiAgICAgICAgU2Vzc2lvbiBz\nZXNzaW9uID0gY29ubmVjdGlvbi5jcmVhdGVTZXNzaW9uKGZhbHNlLCBTZXNz\naW9uLkFVVE9fQUNLTk9XTEVER0UpOwogICAgICAgIFRvcGljIHF1ZXVlID0g\nc2Vzc2lvbi5jcmVhdGVUb3BpYyhnZXROYW1lKCkpOwoKICAgICAgICAvLyBz\nZXR1cCBhIGNvbnN1bWVyIHRvIGRyYWluIG1lc3NhZ2VzLi4KICAgICAgICBN\nZXNzYWdlQ29uc3VtZXIgY29uc3VtZXIgPSBzZXNzaW9uLmNyZWF0ZUNvbnN1\nbWVyKHF1ZXVlKTsKICAgICAgICBjb25zdW1lci5zZXRNZXNzYWdlTGlzdGVu\nZXIobmV3IE1lc3NhZ2VMaXN0ZW5lcigpIHsKICAgICAgICAgICAgQE92ZXJy\naWRlCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9uTWVzc2FnZShNZXNzYWdl\nIG1lc3NhZ2UpIHsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAg\nICAvLyB3YXJtdXAuLi4KICAgICAgICBmb3IoaW50IGk9MDsgaSA8IDEwOyBp\nKyspIHsKICAgICAgICAgICAgYmVuY2htYXJrTm9uQ2FsbGJhY2tSYXRlKCk7\nCiAgICAgICAgICAgIGJlbmNobWFya0NhbGxiYWNrUmF0ZSgpOwogICAgICAg\nIH0KCiAgICAgICAgZG91YmxlIGNhbGxiYWNrUmF0ZSA9IGJlbmNobWFya0Nh\nbGxiYWNrUmF0ZSgpOwogICAgICAgIGRvdWJsZSBub25DYWxsYmFja1JhdGUg\nPSBiZW5jaG1hcmtOb25DYWxsYmFja1JhdGUoKTsKCiAgICAgICAgU3lzdGVt\nLm91dC5wcmludGxuKFN0cmluZy5mb3JtYXQoIkFzeW5jQ2FsbGJhY2sgU2Vu\nZCByYXRlOiAlLC4yZiBtL3MiLCBjYWxsYmFja1JhdGUpKTsKICAgICAgICBT\neXN0ZW0ub3V0LnByaW50bG4oU3RyaW5nLmZvcm1hdCgiTm9uQXN5bmNDYWxs\nYmFjayBTZW5kIHJhdGU6ICUsLjJmIG0vcyIsIG5vbkNhbGxiYWNrUmF0ZSkp\nOwoKICAgICAgICAvLyB0aGVyZSBpcyBubyBzdWNoIHJlcXVpcmVtZW50IGlu\nIGhlZHdpZyBjYXNlIDotKQogICAgICAgIC8vIFRoZSBhc3luYyBzdHlsZSBI\nQVMgdG8gYmUgZmFzdGVyIHRoYW4gdGhlIG5vbi1hc3luYyBzdHlsZS4uCiAg\nICAgICAgLy8gYXNzZXJ0VHJ1ZSggY2FsbGJhY2tSYXRlL25vbkNhbGxiYWNr\nUmF0ZSA+IDEuNSApOwogICAgfQoKICAgIHByaXZhdGUgZG91YmxlIGJlbmNo\nbWFya05vbkNhbGxiYWNrUmF0ZSgpIHRocm93cyBKTVNFeGNlcHRpb24gewog\nICAgICAgIFNlc3Npb24gc2Vzc2lvbiA9IGNvbm5lY3Rpb24uY3JlYXRlU2Vz\nc2lvbihmYWxzZSwgU2Vzc2lvbi5BVVRPX0FDS05PV0xFREdFKTsKICAgICAg\nICBUb3BpYyBxdWV1ZSA9IHNlc3Npb24uY3JlYXRlVG9waWMoZ2V0TmFtZSgp\nKTsKICAgICAgICBpbnQgY291bnQgPSAxMDAwOwogICAgICAgIE1lc3NhZ2VQ\ncm9kdWNlciBwcm9kdWNlciA9IHNlc3Npb24uY3JlYXRlUHJvZHVjZXIocXVl\ndWUpOwogICAgICAgIHByb2R1Y2VyLnNldERlbGl2ZXJ5TW9kZShEZWxpdmVy\neU1vZGUuUEVSU0lTVEVOVCk7CiAgICAgICAgbG9uZyBzdGFydCA9IFN5c3Rl\nbS5jdXJyZW50VGltZU1pbGxpcygpOwogICAgICAgIGZvciAoaW50IGkgPSAw\nOyBpIDwgY291bnQ7IGkrKykgewogICAgICAgICAgICBwcm9kdWNlci5zZW5k\nKHNlc3Npb24uY3JlYXRlVGV4dE1lc3NhZ2UoIkhlbGxvIikpOwogICAgICAg\nIH0KICAgICAgICByZXR1cm4gMTAwMC4wICogY291bnQgLyAoU3lzdGVtLmN1\ncnJlbnRUaW1lTWlsbGlzKCkgLSBzdGFydCk7CiAgICB9CgogICAgcHJpdmF0\nZSBkb3VibGUgYmVuY2htYXJrQ2FsbGJhY2tSYXRlKCkgdGhyb3dzIEpNU0V4\nY2VwdGlvbiwgSW50ZXJydXB0ZWRFeGNlcHRpb24gewogICAgICAgIFNlc3Np\nb24gc2Vzc2lvbiA9IGNvbm5lY3Rpb24uY3JlYXRlU2Vzc2lvbihmYWxzZSwg\nU2Vzc2lvbi5BVVRPX0FDS05PV0xFREdFKTsKICAgICAgICBUb3BpYyBxdWV1\nZSA9IHNlc3Npb24uY3JlYXRlVG9waWMoZ2V0TmFtZSgpKTsKICAgICAgICBp\nbnQgY291bnQgPSAxMDAwOwogICAgICAgIE1lc3NhZ2VQcm9kdWNlciBwcm9k\ndWNlciA9IHNlc3Npb24uY3JlYXRlUHJvZHVjZXIocXVldWUpOwogICAgICAg\nIHByb2R1Y2VyLnNldERlbGl2ZXJ5TW9kZShEZWxpdmVyeU1vZGUuUEVSU0lT\nVEVOVCk7CiAgICAgICAgbG9uZyBzdGFydCA9IFN5c3RlbS5jdXJyZW50VGlt\nZU1pbGxpcygpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgY291bnQ7\nIGkrKykgewogICAgICAgICAgICBwcm9kdWNlci5zZW5kKHNlc3Npb24uY3Jl\nYXRlVGV4dE1lc3NhZ2UoIkhlbGxvIikpOwogICAgICAgIH0KICAgICAgICBy\nZXR1cm4gMTAwMC4wICogY291bnQgLyAoU3lzdGVtLmN1cnJlbnRUaW1lTWls\nbGlzKCkgLSBzdGFydCk7CiAgICB9Cgp9Cg==\n","encoding":"base64"}

