{"sha":"82ec6aefa3cedf5c078dc571dcbaeb60bd4517e6","node_id":"MDQ6QmxvYjE1NzU5NTY6ODJlYzZhZWZhM2NlZGY1YzA3OGRjNTcxZGNiYWViNjBiZDQ1MTdlNg==","size":5642,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/82ec6aefa3cedf5c078dc571dcbaeb60bd4517e6","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUgb3IgbW9yZQogKiBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlIGRpc3Ry\naWJ1dGVkIHdpdGgKICogdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLgogKiBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byBZb3UgdW5kZXIgdGhlIEFwYWNo\nZSBMaWNlbnNlLCBWZXJzaW9uIDIuMAogKiAodGhlICJMaWNlbnNlIik7IHlv\ndSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ug\nd2l0aAogKiB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBv\nZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hl\nLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWly\nZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcs\nIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlz\nIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQg\nV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIg\nZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRo\nZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5k\nCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFja2Fn\nZSBvcmcuYXBhY2hlLmFjdGl2ZW1xOwoKaW1wb3J0IGphdmF4Lmptcy5Ub3Bp\nYzsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmptcy5NZXNzYWdpbmdTZXNz\naW9uRmFjYWRlOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuam1zLnNwaS5I\nZWR3aWdDb25uZWN0aW9uRmFjdG9yeUltcGw7CmltcG9ydCBvcmcuYXBhY2hl\nLmhlZHdpZy5qbXMuc3BpLkhlZHdpZ0Nvbm5lY3Rpb25JbXBsOwoKaW1wb3J0\nIGphdmEuaW8uRmlsZTsKaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247Cmlt\ncG9ydCBqYXZhLm5ldC5VUkk7CmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0\nOwppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb25zOwppbXBvcnQgamF2YS51\ndGlsLkl0ZXJhdG9yOwppbXBvcnQgamF2YS51dGlsLkxpc3Q7CmltcG9ydCBq\nYXZhLnV0aWwuY29uY3VycmVudC5hdG9taWMuQXRvbWljTG9uZzsKCmltcG9y\ndCBqYXZheC5qbXMuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmF4Lmptcy5Db25u\nZWN0aW9uRmFjdG9yeTsKaW1wb3J0IGphdmF4Lmptcy5EZXN0aW5hdGlvbjsK\naW1wb3J0IGphdmF4Lmptcy5KTVNFeGNlcHRpb247CmltcG9ydCBqYXZheC5q\nbXMuTWVzc2FnZUNvbnN1bWVyOwppbXBvcnQgamF2YXguam1zLk1lc3NhZ2VQ\ncm9kdWNlcjsKaW1wb3J0IGphdmF4Lmptcy5TZXNzaW9uOwoKCgppbXBvcnQg\namF2YXguam1zLkRlc3RpbmF0aW9uOwoKLyoqCiAqIFRlc3QgY2FzZXMgdXNl\nZCB0byB0ZXN0IHRoZSBKTVMgbWVzc2FnZSBjb25zdW1lci4KICovCnB1Ymxp\nYyBjbGFzcyBKbXNUZXN0U3VwcG9ydCBleHRlbmRzIENvbWJpbmF0aW9uVGVz\ndFN1cHBvcnQgewoKICAgIHN0YXRpYyBmaW5hbCBwcml2YXRlIEF0b21pY0xv\nbmcgVEVTVF9DT1VOVEVSID0gbmV3IEF0b21pY0xvbmcoKTsKICAgIHB1Ymxp\nYyBTdHJpbmcgdXNlck5hbWU7CiAgICBwdWJsaWMgU3RyaW5nIHBhc3N3b3Jk\nOwogICAgcHVibGljIFN0cmluZyBtZXNzYWdlVGV4dFByZWZpeCA9ICIiOwoK\nICAgIHByb3RlY3RlZCBDb25uZWN0aW9uRmFjdG9yeSBmYWN0b3J5OwogICAg\ncHJvdGVjdGVkIEhlZHdpZ0Nvbm5lY3Rpb25JbXBsIGNvbm5lY3Rpb247Cgog\nICAgcHJvdGVjdGVkIExpc3Q8Q29ubmVjdGlvbj4gY29ubmVjdGlvbnMgPSBD\nb2xsZWN0aW9ucy5zeW5jaHJvbml6ZWRMaXN0KG5ldyBBcnJheUxpc3Q8Q29u\nbmVjdGlvbj4oKSk7CgogICAgLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAg\nIC8vCiAgICAvLyBUZXN0IHN1cHBvcnQgbWV0aG9kcy4KICAgIC8vCiAgICAv\nLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgcHJvdGVjdGVkIERlc3RpbmF0\naW9uIGNyZWF0ZURlc3RpbmF0aW9uKFNlc3Npb24gc2Vzc2lvbiwKICAgICAg\nICAgICAgTWVzc2FnaW5nU2Vzc2lvbkZhY2FkZS5EZXN0aW5hdGlvblR5cGUg\ndHlwZSkgdGhyb3dzIEpNU0V4Y2VwdGlvbiB7CiAgICAgICAgU3RyaW5nIHRl\nc3RNZXRob2QgPSBnZXROYW1lKCk7CiAgICAgICAgaWYoIHRlc3RNZXRob2Qu\naW5kZXhPZigiICIpPjAgKSB7CiAgICAgICAgICAgIHRlc3RNZXRob2QgPSB0\nZXN0TWV0aG9kLnN1YnN0cmluZygwLCB0ZXN0TWV0aG9kLmluZGV4T2YoIiAi\nKSk7CiAgICAgICAgfQogICAgICAgIFN0cmluZyBuYW1lID0gIlRFU1QuIiAr\nIGdldENsYXNzKCkuZ2V0TmFtZSgpICsgIi4iICt0ZXN0TWV0aG9kKyIuIitU\nRVNUX0NPVU5URVIuZ2V0QW5kSW5jcmVtZW50KCk7CiAgICAgICAgc3dpdGNo\nICh0eXBlKSB7CiAgICAgICAgY2FzZSBRVUVVRToKICAgICAgICAgICAgcmV0\ndXJuIChEZXN0aW5hdGlvbilzZXNzaW9uLmNyZWF0ZVRvcGljKG5hbWUpOwog\nICAgICAgIGNhc2UgVE9QSUM6CiAgICAgICAgICAgIHJldHVybiAoRGVzdGlu\nYXRpb24pc2Vzc2lvbi5jcmVhdGVUb3BpYyhuYW1lKTsKICAgICAgICBkZWZh\ndWx0OgogICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhj\nZXB0aW9uKCJ0eXBlOiAiICsgdHlwZSk7CiAgICAgICAgfQogICAgfQoKICAg\nIHByb3RlY3RlZCB2b2lkIHNlbmRNZXNzYWdlcyhEZXN0aW5hdGlvbiBkZXN0\naW5hdGlvbiwgaW50IGNvdW50KSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAg\nICBDb25uZWN0aW9uRmFjdG9yeSBmYWN0b3J5ID0gY3JlYXRlQ29ubmVjdGlv\nbkZhY3RvcnkoKTsKICAgICAgICBDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSBm\nYWN0b3J5LmNyZWF0ZUNvbm5lY3Rpb24oKTsKICAgICAgICBjb25uZWN0aW9u\nLnN0YXJ0KCk7CiAgICAgICAgc2VuZE1lc3NhZ2VzKGNvbm5lY3Rpb24sIGRl\nc3RpbmF0aW9uLCBjb3VudCk7CiAgICAgICAgY29ubmVjdGlvbi5jbG9zZSgp\nOwogICAgfQoKICAgIHByb3RlY3RlZCB2b2lkIHNlbmRNZXNzYWdlcyhDb25u\nZWN0aW9uIGNvbm5lY3Rpb24sIERlc3RpbmF0aW9uIGRlc3RpbmF0aW9uLCBp\nbnQgY291bnQpIHRocm93cyBKTVNFeGNlcHRpb24gewogICAgICAgIFNlc3Np\nb24gc2Vzc2lvbiA9IGNvbm5lY3Rpb24uY3JlYXRlU2Vzc2lvbihmYWxzZSwg\nU2Vzc2lvbi5BVVRPX0FDS05PV0xFREdFKTsKICAgICAgICBzZW5kTWVzc2Fn\nZXMoc2Vzc2lvbiwgZGVzdGluYXRpb24sIGNvdW50KTsKICAgICAgICBzZXNz\naW9uLmNsb3NlKCk7CiAgICB9CgogICAgcHJvdGVjdGVkIHZvaWQgc2VuZE1l\nc3NhZ2VzKFNlc3Npb24gc2Vzc2lvbiwgRGVzdGluYXRpb24gZGVzdGluYXRp\nb24sIGludCBjb3VudCkgdGhyb3dzIEpNU0V4Y2VwdGlvbiB7CiAgICAgICAg\nTWVzc2FnZVByb2R1Y2VyIHByb2R1Y2VyID0gc2Vzc2lvbi5jcmVhdGVQcm9k\ndWNlcihkZXN0aW5hdGlvbik7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkg\nPCBjb3VudDsgaSsrKSB7CiAgICAgICAgICAgIHByb2R1Y2VyLnNlbmQoc2Vz\nc2lvbi5jcmVhdGVUZXh0TWVzc2FnZShtZXNzYWdlVGV4dFByZWZpeCAgKyBp\nKSk7CiAgICAgICAgfQogICAgICAgIHByb2R1Y2VyLmNsb3NlKCk7CiAgICB9\nCgogICAgcHJvdGVjdGVkIENvbm5lY3Rpb25GYWN0b3J5IGNyZWF0ZUNvbm5l\nY3Rpb25GYWN0b3J5KCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0\ndXJuIG5ldyBIZWR3aWdDb25uZWN0aW9uRmFjdG9yeUltcGwoKTsKICAgIH0K\nCiAgICBwcm90ZWN0ZWQgdm9pZCBzZXRVcCgpIHRocm93cyBFeGNlcHRpb24g\newogICAgICAgIHN1cGVyLnNldFVwKCk7CgogICAgICAgIGlmIChTeXN0ZW0u\nZ2V0UHJvcGVydHkoImJhc2VkaXIiKSA9PSBudWxsKSB7CiAgICAgICAgICAg\nIEZpbGUgZmlsZSA9IG5ldyBGaWxlKCIuIik7CiAgICAgICAgICAgIFN5c3Rl\nbS5zZXRQcm9wZXJ0eSgiYmFzZWRpciIsIGZpbGUuZ2V0QWJzb2x1dGVQYXRo\nKCkpOwogICAgICAgIH0KCiAgICAgICAgZmFjdG9yeSA9IGNyZWF0ZUNvbm5l\nY3Rpb25GYWN0b3J5KCk7CiAgICAgICAgY29ubmVjdGlvbiA9IChIZWR3aWdD\nb25uZWN0aW9uSW1wbClmYWN0b3J5LmNyZWF0ZUNvbm5lY3Rpb24odXNlck5h\nbWUsIHBhc3N3b3JkKTsKICAgICAgICBjb25uZWN0aW9ucy5hZGQoY29ubmVj\ndGlvbik7CiAgICB9CgogICAgcHJvdGVjdGVkIHZvaWQgdGVhckRvd24oKSB0\naHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ZXIg\nPSBjb25uZWN0aW9ucy5pdGVyYXRvcigpOyBpdGVyLmhhc05leHQoKTspIHsK\nICAgICAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gKENvbm5lY3Rpb24paXRl\nci5uZXh0KCk7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBj\nb25uLmNsb3NlKCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKFRocm93YWJsZSBl\nKSB7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaXRlci5yZW1vdmUoKTsK\nICAgICAgICB9CiAgICAgICAgc3VwZXIudGVhckRvd24oKTsKICAgIH0KCiAg\nICBwcm90ZWN0ZWQgdm9pZCBzYWZlQ2xvc2UoQ29ubmVjdGlvbiBjKSB7CiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgYy5jbG9zZSgpOwogICAgICAgIH0g\nY2F0Y2ggKFRocm93YWJsZSBlKSB7CiAgICAgICAgfQogICAgfQoKICAgIHBy\nb3RlY3RlZCB2b2lkIHNhZmVDbG9zZShTZXNzaW9uIHMpIHsKICAgICAgICB0\ncnkgewogICAgICAgICAgICBzLmNsb3NlKCk7CiAgICAgICAgfSBjYXRjaCAo\nVGhyb3dhYmxlIGUpIHsKICAgICAgICB9CiAgICB9CgogICAgcHJvdGVjdGVk\nIHZvaWQgc2FmZUNsb3NlKE1lc3NhZ2VDb25zdW1lciBjKSB7CiAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgYy5jbG9zZSgpOwogICAgICAgIH0gY2F0Y2gg\nKFRocm93YWJsZSBlKSB7CiAgICAgICAgfQogICAgfQoKICAgIHByb3RlY3Rl\nZCB2b2lkIHNhZmVDbG9zZShNZXNzYWdlUHJvZHVjZXIgcCkgewogICAgICAg\nIHRyeSB7CiAgICAgICAgICAgIHAuY2xvc2UoKTsKICAgICAgICB9IGNhdGNo\nIChUaHJvd2FibGUgZSkgewogICAgICAgIH0KICAgIH0KCiAgICBwcm90ZWN0\nZWQgdm9pZCBwcm9maWxlclBhdXNlKFN0cmluZyBwcm9tcHQpIHRocm93cyBJ\nT0V4Y2VwdGlvbiB7CiAgICAgICAgaWYgKFN5c3RlbS5nZXRQcm9wZXJ0eSgi\ncHJvZmlsZXIiKSAhPSBudWxsKSB7CiAgICAgICAgICAgIHBhdXNlKHByb21w\ndCk7CiAgICAgICAgfQogICAgfQoKICAgIHByb3RlY3RlZCB2b2lkIHBhdXNl\nKFN0cmluZyBwcm9tcHQpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAg\nU3lzdGVtLm91dC5wcmludGxuKCk7CiAgICAgICAgU3lzdGVtLm91dC5wcmlu\ndGxuKHByb21wdCArICI+IFByZXNzIGVudGVyIHRvIGNvbnRpbnVlOiAiKTsK\nICAgICAgICB3aGlsZSAoU3lzdGVtLmluLnJlYWQoKSAhPSAnXG4nKSB7CiAg\nICAgICAgfQogICAgfQoKfQo=\n","encoding":"base64"}

