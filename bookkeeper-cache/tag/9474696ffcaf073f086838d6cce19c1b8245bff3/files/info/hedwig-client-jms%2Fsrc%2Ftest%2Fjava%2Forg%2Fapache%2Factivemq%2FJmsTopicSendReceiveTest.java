{"sha":"dc590d87b982b625e78ca028e3d55f39ec0c2124","node_id":"MDQ6QmxvYjE1NzU5NTY6ZGM1OTBkODdiOTgyYjYyNWU3OGNhMDI4ZTNkNTVmMzllYzBjMjEyNA==","size":3503,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/dc590d87b982b625e78ca028e3d55f39ec0c2124","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUgb3IgbW9yZQogKiBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlIGRpc3Ry\naWJ1dGVkIHdpdGgKICogdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLgogKiBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byBZb3UgdW5kZXIgdGhlIEFwYWNo\nZSBMaWNlbnNlLCBWZXJzaW9uIDIuMAogKiAodGhlICJMaWNlbnNlIik7IHlv\ndSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ug\nd2l0aAogKiB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBv\nZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hl\nLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWly\nZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcs\nIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlz\nIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQg\nV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIg\nZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRo\nZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5k\nCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFja2Fn\nZSBvcmcuYXBhY2hlLmFjdGl2ZW1xOwoKaW1wb3J0IGphdmF4Lmptcy5Db25u\nZWN0aW9uOwppbXBvcnQgamF2YXguam1zLkRlbGl2ZXJ5TW9kZTsKaW1wb3J0\nIGphdmF4Lmptcy5KTVNFeGNlcHRpb247CmltcG9ydCBqYXZheC5qbXMuTWVz\nc2FnZUNvbnN1bWVyOwppbXBvcnQgamF2YXguam1zLlNlc3Npb247CmltcG9y\ndCBqYXZheC5qbXMuVG9waWM7CmltcG9ydCBqYXZheC5qbXMuVG9waWNDb25u\nZWN0aW9uOwoKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXI7CmltcG9ydCBvcmcu\nc2xmNGouTG9nZ2VyRmFjdG9yeTsKCnB1YmxpYyBjbGFzcyBKbXNUb3BpY1Nl\nbmRSZWNlaXZlVGVzdCBleHRlbmRzIEptc1NlbmRSZWNlaXZlVGVzdFN1cHBv\ncnQgewogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9nZ2VyIExPRyA9IExv\nZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKEptc1RvcGljU2VuZFJlY2VpdmVUZXN0\nLmNsYXNzKTsKCiAgICBwcm90ZWN0ZWQgQ29ubmVjdGlvbiBjb25uZWN0aW9u\nOwoKICAgIHByb3RlY3RlZCB2b2lkIHNldFVwKCkgdGhyb3dzIEV4Y2VwdGlv\nbiB7CiAgICAgICAgc3VwZXIuc2V0VXAoKTsKCiAgICAgICAgY29ubmVjdGlv\nbkZhY3RvcnkgPSBjcmVhdGVDb25uZWN0aW9uRmFjdG9yeSgpOwogICAgICAg\nIGNvbm5lY3Rpb24gPSBjcmVhdGVDb25uZWN0aW9uKCFkdXJhYmxlKTsKICAg\nICAgICBpZiAoZHVyYWJsZSkgewogICAgICAgICAgICBjb25uZWN0aW9uLnNl\ndENsaWVudElEKGdldENsYXNzKCkuZ2V0TmFtZSgpKTsKICAgICAgICB9Cgog\nICAgICAgIExPRy5pbmZvKCJDcmVhdGVkIGNvbm5lY3Rpb246ICIgKyBjb25u\nZWN0aW9uKTsKCiAgICAgICAgc2Vzc2lvbiA9ICgoVG9waWNDb25uZWN0aW9u\nKSBjb25uZWN0aW9uKS5jcmVhdGVUb3BpY1Nlc3Npb24oZmFsc2UsIFNlc3Np\nb24uQVVUT19BQ0tOT1dMRURHRSk7CgogICAgICAgIExPRy5pbmZvKCJDcmVh\ndGVkIHNlc3Npb246ICIgKyBzZXNzaW9uKTsKICAgICAgICBwcm9kdWNlciA9\nIHNlc3Npb24uY3JlYXRlUHJvZHVjZXIobnVsbCk7CiAgICAgICAgcHJvZHVj\nZXIuc2V0RGVsaXZlcnlNb2RlKGRlbGl2ZXJ5TW9kZSk7CgogICAgICAgIExP\nRy5pbmZvKCJDcmVhdGVkIHByb2R1Y2VyOiAiICsgcHJvZHVjZXIgKyAiIGRl\nbGl2ZXJ5IG1vZGUgPSAiCiAgICAgICAgICAgICAgICAgKyAoZGVsaXZlcnlN\nb2RlID09IERlbGl2ZXJ5TW9kZS5QRVJTSVNURU5UID8gIlBFUlNJU1RFTlQi\nIDogIk5PTl9QRVJTSVNURU5UIikpOwoKICAgICAgICBpZiAodG9waWMpIHsK\nICAgICAgICAgICAgY29uc3VtZXJEZXN0aW5hdGlvbiA9IHNlc3Npb24uY3Jl\nYXRlVG9waWMoZ2V0Q29uc3VtZXJTdWJqZWN0KCkpOwogICAgICAgICAgICBw\ncm9kdWNlckRlc3RpbmF0aW9uID0gc2Vzc2lvbi5jcmVhdGVUb3BpYyhnZXRQ\ncm9kdWNlclN1YmplY3QoKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAg\nICAgY29uc3VtZXJEZXN0aW5hdGlvbiA9IHNlc3Npb24uY3JlYXRlVG9waWMo\nZ2V0Q29uc3VtZXJTdWJqZWN0KCkpOwogICAgICAgICAgICBwcm9kdWNlckRl\nc3RpbmF0aW9uID0gc2Vzc2lvbi5jcmVhdGVUb3BpYyhnZXRQcm9kdWNlclN1\nYmplY3QoKSk7CiAgICAgICAgfQoKICAgICAgICBMT0cuaW5mbygiQ3JlYXRl\nZCAgY29uc3VtZXIgZGVzdGluYXRpb246ICIgKyBjb25zdW1lckRlc3RpbmF0\naW9uCiAgICAgICAgICAgICAgICAgKyAiIG9mIHR5cGU6ICIgKyBjb25zdW1l\nckRlc3RpbmF0aW9uLmdldENsYXNzKCkpOwogICAgICAgIExPRy5pbmZvKCJD\ncmVhdGVkICBwcm9kdWNlciBkZXN0aW5hdGlvbjogIiArIHByb2R1Y2VyRGVz\ndGluYXRpb24KICAgICAgICAgICAgICAgICArICIgb2YgdHlwZTogIiArIHBy\nb2R1Y2VyRGVzdGluYXRpb24uZ2V0Q2xhc3MoKSk7CiAgICAgICAgY29uc3Vt\nZXIgPSBjcmVhdGVDb25zdW1lcigpOwogICAgICAgIGNvbnN1bWVyLnNldE1l\nc3NhZ2VMaXN0ZW5lcih0aGlzKTsKICAgICAgICBjb25uZWN0aW9uLnN0YXJ0\nKCk7CgogICAgICAgIC8vIGxvZy5pbmZvKCJDcmVhdGVkIGNvbm5lY3Rpb246\nICIgKyBjb25uZWN0aW9uKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgTWVzc2Fn\nZUNvbnN1bWVyIGNyZWF0ZUNvbnN1bWVyKCkgdGhyb3dzIEpNU0V4Y2VwdGlv\nbiB7CiAgICAgICAgaWYgKGR1cmFibGUpIHsKICAgICAgICAgICAgTE9HLmlu\nZm8oIkNyZWF0aW5nIGR1cmFibGUgY29uc3VtZXIiKTsKICAgICAgICAgICAg\ncmV0dXJuIHNlc3Npb24uY3JlYXRlRHVyYWJsZVN1YnNjcmliZXIoKFRvcGlj\nKWNvbnN1bWVyRGVzdGluYXRpb24sIGdldE5hbWUoKSk7CiAgICAgICAgfQog\nICAgICAgIHJldHVybiBzZXNzaW9uLmNyZWF0ZUNvbnN1bWVyKGNvbnN1bWVy\nRGVzdGluYXRpb24pOwogICAgfQoKICAgIHByb3RlY3RlZCB2b2lkIHRlYXJE\nb3duKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgTE9HLmluZm8oIkR1\nbXBpbmcgc3RhdHMuLi4iKTsKICAgICAgICAvLyBjb25uZWN0aW9uRmFjdG9y\neS5nZXRTdGF0cygpLnJlc2V0KCk7CgogICAgICAgIExPRy5pbmZvKCJDbG9z\naW5nIGRvd24gY29ubmVjdGlvbiIpOwoKICAgICAgICAvKiogVE9ETyB3ZSBz\naG91bGQgYmUgYWJsZSB0byBzaHV0IGRvd24gcHJvcGVybHkgKi8KICAgICAg\nICBzZXNzaW9uLmNsb3NlKCk7CiAgICAgICAgY29ubmVjdGlvbi5jbG9zZSgp\nOwoKICAgICAgICBzdXBlci50ZWFyRG93bigpOwogICAgfQoKfQo=\n","encoding":"base64"}

