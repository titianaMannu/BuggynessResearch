{"sha":"1d187240e4c77264422e3640fd14c34e2dbc184b","node_id":"MDQ6QmxvYjE1NzU5NTY6MWQxODcyNDBlNGM3NzI2NDQyMmUzNjQwZmQxNGMzNGUyZGJjMTg0Yg==","size":4590,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/1d187240e4c77264422e3640fd14c34e2dbc184b","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUgb3IgbW9yZQogKiBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlIGRpc3Ry\naWJ1dGVkIHdpdGgKICogdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLgogKiBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byBZb3UgdW5kZXIgdGhlIEFwYWNo\nZSBMaWNlbnNlLCBWZXJzaW9uIDIuMAogKiAodGhlICJMaWNlbnNlIik7IHlv\ndSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ug\nd2l0aAogKiB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBv\nZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hl\nLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWly\nZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcs\nIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlz\nIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQg\nV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIg\nZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRo\nZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5k\nCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCi8qKgog\nKiBUaGUgU2ltcGxlUXVldWVSZWNlaXZlciBjbGFzcyBjb25zaXN0cyBvbmx5\nIG9mIGEgbWFpbiBtZXRob2QsCiAqIHdoaWNoIGZldGNoZXMgb25lIG9yIG1v\ncmUgbWVzc2FnZXMgZnJvbSBhIHF1ZXVlIHVzaW5nCiAqIHN5bmNocm9ub3Vz\nIG1lc3NhZ2UgZGVsaXZlcnkuICBSdW4gdGhpcyBwcm9ncmFtIGluIGNvbmp1\nbmN0aW9uCiAqIHdpdGggU2ltcGxlUXVldWVTZW5kZXIuICBTcGVjaWZ5IGEg\ncXVldWUgbmFtZSBvbiB0aGUgY29tbWFuZAogKiBsaW5lIHdoZW4geW91IHJ1\nbiB0aGUgcHJvZ3JhbS4KICovCnBhY2thZ2Ugb3JnLmFwYWNoZS5hY3RpdmVt\ncS5kZW1vOwoKaW1wb3J0IGphdmF4Lmptcy5Ub3BpYzsKaW1wb3J0IGphdmF4\nLmptcy5Db25uZWN0aW9uOwppbXBvcnQgamF2YXguam1zLkNvbm5lY3Rpb25G\nYWN0b3J5OwppbXBvcnQgamF2YXguam1zLkRlc3RpbmF0aW9uOwppbXBvcnQg\namF2YXguam1zLkpNU0V4Y2VwdGlvbjsKaW1wb3J0IGphdmF4Lmptcy5NZXNz\nYWdlOwppbXBvcnQgamF2YXguam1zLk1lc3NhZ2VDb25zdW1lcjsKaW1wb3J0\nIGphdmF4Lmptcy5TZXNzaW9uOwppbXBvcnQgamF2YXguam1zLlRleHRNZXNz\nYWdlOwppbXBvcnQgamF2YXgubmFtaW5nLkNvbnRleHQ7CmltcG9ydCBqYXZh\neC5uYW1pbmcuSW5pdGlhbENvbnRleHQ7CmltcG9ydCBqYXZheC5uYW1pbmcu\nTmFtaW5nRXhjZXB0aW9uOwoKLyoqCiAqIEEgc2ltcGxlIHBvbHltb3JwaGlj\nIEpNUyBjb25zdW1lciB3aGljaCBjYW4gd29yayB3aXRoIFF1ZXVlcyBvciBU\nb3BpY3Mgd2hpY2gKICogdXNlcyBKTkRJIHRvIGxvb2t1cCB0aGUgSk1TIGNv\nbm5lY3Rpb24gZmFjdG9yeSBhbmQgZGVzdGluYXRpb24KICovCnB1YmxpYyBm\naW5hbCBjbGFzcyBTaW1wbGVDb25zdW1lciB7CgogICAgcHJpdmF0ZSBzdGF0\naWMgZmluYWwgb3JnLmFwYWNoZS5jb21tb25zLmxvZ2dpbmcuTG9nIExPRyA9\nIG9yZy5hcGFjaGUuY29tbW9ucy5sb2dnaW5nLkxvZ0ZhY3RvcnkKICAgICAg\nICAuZ2V0TG9nKFNpbXBsZUNvbnN1bWVyLmNsYXNzKTsKCiAgICBwcml2YXRl\nIFNpbXBsZUNvbnN1bWVyKCkgewogICAgfQoKICAgIC8qKgogICAgICogQHBh\ncmFtIGFyZ3MgdGhlIHF1ZXVlIHVzZWQgYnkgdGhlIGV4YW1wbGUKICAgICAq\nLwogICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykg\newogICAgICAgIFN0cmluZyBkZXN0aW5hdGlvbk5hbWUgPSBudWxsOwogICAg\nICAgIENvbnRleHQgam5kaUNvbnRleHQgPSBudWxsOwogICAgICAgIENvbm5l\nY3Rpb25GYWN0b3J5IGNvbm5lY3Rpb25GYWN0b3J5ID0gbnVsbDsKICAgICAg\nICBDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSBudWxsOwogICAgICAgIFNlc3Np\nb24gc2Vzc2lvbiA9IG51bGw7CiAgICAgICAgRGVzdGluYXRpb24gZGVzdGlu\nYXRpb24gPSBudWxsOwogICAgICAgIE1lc3NhZ2VDb25zdW1lciBjb25zdW1l\nciA9IG51bGw7CgogICAgICAgIC8qCiAgICAgICAgICogUmVhZCBkZXN0aW5h\ndGlvbiBuYW1lIGZyb20gY29tbWFuZCBsaW5lIGFuZCBkaXNwbGF5IGl0Lgog\nICAgICAgICAqLwogICAgICAgIGlmIChhcmdzLmxlbmd0aCAhPSAxKSB7CiAg\nICAgICAgICAgIExPRy5pbmZvKCJVc2FnZTogamF2YSBTaW1wbGVDb25zdW1l\nciA8ZGVzdGluYXRpb24tbmFtZT4iKTsKICAgICAgICAgICAgU3lzdGVtLmV4\naXQoMSk7CiAgICAgICAgfQogICAgICAgIGRlc3RpbmF0aW9uTmFtZSA9IGFy\nZ3NbMF07CiAgICAgICAgTE9HLmluZm8oIkRlc3RpbmF0aW9uIG5hbWUgaXMg\nIiArIGRlc3RpbmF0aW9uTmFtZSk7CgogICAgICAgIC8qCiAgICAgICAgICog\nQ3JlYXRlIGEgSk5ESSBBUEkgSW5pdGlhbENvbnRleHQgb2JqZWN0CiAgICAg\nICAgICovCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgam5kaUNvbnRleHQg\nPSBuZXcgSW5pdGlhbENvbnRleHQoKTsKICAgICAgICB9IGNhdGNoIChOYW1p\nbmdFeGNlcHRpb24gZSkgewogICAgICAgICAgICBMT0cuaW5mbygiQ291bGQg\nbm90IGNyZWF0ZSBKTkRJIEFQSSAiICsgImNvbnRleHQ6ICIgKyBlLnRvU3Ry\naW5nKCkpOwogICAgICAgICAgICBTeXN0ZW0uZXhpdCgxKTsKICAgICAgICB9\nCgogICAgICAgIC8qCiAgICAgICAgICogTG9vayB1cCBjb25uZWN0aW9uIGZh\nY3RvcnkgYW5kIGRlc3RpbmF0aW9uLgogICAgICAgICAqLwogICAgICAgIHRy\neSB7CiAgICAgICAgICAgIGNvbm5lY3Rpb25GYWN0b3J5ID0gKENvbm5lY3Rp\nb25GYWN0b3J5KWpuZGlDb250ZXh0Lmxvb2t1cCgiQ29ubmVjdGlvbkZhY3Rv\ncnkiKTsKICAgICAgICAgICAgZGVzdGluYXRpb24gPSAoRGVzdGluYXRpb24p\nam5kaUNvbnRleHQubG9va3VwKGRlc3RpbmF0aW9uTmFtZSk7CiAgICAgICAg\nfSBjYXRjaCAoTmFtaW5nRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgTE9H\nLmluZm8oIkpOREkgQVBJIGxvb2t1cCBmYWlsZWQ6ICIgKyBlLnRvU3RyaW5n\nKCkpOwogICAgICAgICAgICBTeXN0ZW0uZXhpdCgxKTsKICAgICAgICB9Cgog\nICAgICAgIC8qCiAgICAgICAgICogQ3JlYXRlIGNvbm5lY3Rpb24uIENyZWF0\nZSBzZXNzaW9uIGZyb20gY29ubmVjdGlvbjsgZmFsc2UgbWVhbnMKICAgICAg\nICAgKiBzZXNzaW9uIGlzIG5vdCB0cmFuc2FjdGVkLiBDcmVhdGUgcmVjZWl2\nZXIsIHRoZW4gc3RhcnQgbWVzc2FnZQogICAgICAgICAqIGRlbGl2ZXJ5LiBS\nZWNlaXZlIGFsbCB0ZXh0IG1lc3NhZ2VzIGZyb20gZGVzdGluYXRpb24gdW50\naWwgYSBub24tdGV4dAogICAgICAgICAqIG1lc3NhZ2UgaXMgcmVjZWl2ZWQg\naW5kaWNhdGluZyBlbmQgb2YgbWVzc2FnZSBzdHJlYW0uIENsb3NlCiAgICAg\nICAgICogY29ubmVjdGlvbi4KICAgICAgICAgKi8KICAgICAgICB0cnkgewog\nICAgICAgICAgICBjb25uZWN0aW9uID0gY29ubmVjdGlvbkZhY3RvcnkuY3Jl\nYXRlQ29ubmVjdGlvbigpOwogICAgICAgICAgICBzZXNzaW9uID0gY29ubmVj\ndGlvbi5jcmVhdGVTZXNzaW9uKGZhbHNlLCBTZXNzaW9uLkFVVE9fQUNLTk9X\nTEVER0UpOwogICAgICAgICAgICBjb25zdW1lciA9IHNlc3Npb24uY3JlYXRl\nQ29uc3VtZXIoZGVzdGluYXRpb24pOwogICAgICAgICAgICBjb25uZWN0aW9u\nLnN0YXJ0KCk7CiAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7CiAgICAgICAg\nICAgICAgICBNZXNzYWdlIG0gPSBjb25zdW1lci5yZWNlaXZlKDEpOwogICAg\nICAgICAgICAgICAgaWYgKG0gIT0gbnVsbCkgewogICAgICAgICAgICAgICAg\nICAgIGlmIChtIGluc3RhbmNlb2YgVGV4dE1lc3NhZ2UpIHsKICAgICAgICAg\nICAgICAgICAgICAgICAgVGV4dE1lc3NhZ2UgbWVzc2FnZSA9IChUZXh0TWVz\nc2FnZSltOwogICAgICAgICAgICAgICAgICAgICAgICBMT0cuaW5mbygiUmVh\nZGluZyBtZXNzYWdlOiAiICsgbWVzc2FnZS5nZXRUZXh0KCkpOwogICAgICAg\nICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAg\nIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAg\nIH0KICAgICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKEpNU0V4Y2VwdGlv\nbiBlKSB7CiAgICAgICAgICAgIExPRy5pbmZvKCJFeGNlcHRpb24gb2NjdXJy\nZWQ6ICIgKyBlKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBp\nZiAoY29ubmVjdGlvbiAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICB0cnkg\newogICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uY2xvc2UoKTsKICAg\nICAgICAgICAgICAgIH0gY2F0Y2ggKEpNU0V4Y2VwdGlvbiBlKSB7CiAgICAg\nICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

