{"sha":"4facc3dc3a9baa5280d1f06d3c11864b6c02f380","node_id":"MDQ6QmxvYjE1NzU5NTY6NGZhY2MzZGMzYTliYWE1MjgwZDFmMDZkM2MxMTg2NGI2YzAyZjM4MA==","size":4817,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/4facc3dc3a9baa5280d1f06d3c11864b6c02f380","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUgb3IgbW9yZQogKiBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlIGRpc3Ry\naWJ1dGVkIHdpdGgKICogdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLgogKiBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byBZb3UgdW5kZXIgdGhlIEFwYWNo\nZSBMaWNlbnNlLCBWZXJzaW9uIDIuMAogKiAodGhlICJMaWNlbnNlIik7IHlv\ndSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ug\nd2l0aAogKiB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBv\nZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hl\nLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWly\nZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcs\nIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlz\nIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQg\nV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIg\nZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRo\nZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5k\nCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCi8qKgog\nKiBUaGUgU2ltcGxlUXVldWVTZW5kZXIgY2xhc3MgY29uc2lzdHMgb25seSBv\nZiBhIG1haW4gbWV0aG9kLAogKiB3aGljaCBzZW5kcyBzZXZlcmFsIG1lc3Nh\nZ2VzIHRvIGEgcXVldWUuCiAqCiAqIFJ1biB0aGlzIHByb2dyYW0gaW4gY29u\nanVuY3Rpb24gd2l0aCBTaW1wbGVRdWV1ZVJlY2VpdmVyLgogKiBTcGVjaWZ5\nIGEgcXVldWUgbmFtZSBvbiB0aGUgY29tbWFuZCBsaW5lIHdoZW4geW91IHJ1\nbiB0aGUKICogcHJvZ3JhbS4gIEJ5IGRlZmF1bHQsIHRoZSBwcm9ncmFtIHNl\nbmRzIG9uZSBtZXNzYWdlLiAgU3BlY2lmeQogKiBhIG51bWJlciBhZnRlciB0\naGUgcXVldWUgbmFtZSB0byBzZW5kIHRoYXQgbnVtYmVyIG9mIG1lc3NhZ2Vz\nLgogKi8KcGFja2FnZSBvcmcuYXBhY2hlLmFjdGl2ZW1xLmRlbW87CgovLyBT\nVEFSVCBTTklQUEVUOiBkZW1vCgppbXBvcnQgamF2YXguam1zLlRvcGljOwpp\nbXBvcnQgamF2YXguam1zLkNvbm5lY3Rpb247CmltcG9ydCBqYXZheC5qbXMu\nQ29ubmVjdGlvbkZhY3Rvcnk7CmltcG9ydCBqYXZheC5qbXMuRGVzdGluYXRp\nb247CmltcG9ydCBqYXZheC5qbXMuSk1TRXhjZXB0aW9uOwppbXBvcnQgamF2\nYXguam1zLk1lc3NhZ2VQcm9kdWNlcjsKaW1wb3J0IGphdmF4Lmptcy5TZXNz\naW9uOwppbXBvcnQgamF2YXguam1zLlRleHRNZXNzYWdlOwppbXBvcnQgamF2\nYXgubmFtaW5nLkNvbnRleHQ7CmltcG9ydCBqYXZheC5uYW1pbmcuSW5pdGlh\nbENvbnRleHQ7CmltcG9ydCBqYXZheC5uYW1pbmcuTmFtaW5nRXhjZXB0aW9u\nOwoKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXI7CmltcG9ydCBvcmcuc2xmNGou\nTG9nZ2VyRmFjdG9yeTsKCi8qKgogKiBBIHNpbXBsZSBwb2x5bW9ycGhpYyBK\nTVMgcHJvZHVjZXIgd2hpY2ggY2FuIHdvcmsgd2l0aCBRdWV1ZXMgb3IgVG9w\naWNzIHdoaWNoCiAqIHVzZXMgSk5ESSB0byBsb29rdXAgdGhlIEpNUyBjb25u\nZWN0aW9uIGZhY3RvcnkgYW5kIGRlc3RpbmF0aW9uCiAqLwpwdWJsaWMgZmlu\nYWwgY2xhc3MgU2ltcGxlUHJvZHVjZXIgewoKICAgIHByaXZhdGUgc3RhdGlj\nIGZpbmFsIExvZ2dlciBMT0cgPSBMb2dnZXJGYWN0b3J5LmdldExvZ2dlcihT\naW1wbGVQcm9kdWNlci5jbGFzcyk7CgogICAgcHJpdmF0ZSBTaW1wbGVQcm9k\ndWNlcigpIHsKICAgIH0KCiAgICAvKioKICAgICAqIEBwYXJhbSBhcmdzIHRo\nZSBkZXN0aW5hdGlvbiBuYW1lIHRvIHNlbmQgdG8gYW5kIG9wdGlvbmFsbHks\nIHRoZSBudW1iZXIgb2YKICAgICAqICAgICAgICAgICAgICAgIG1lc3NhZ2Vz\nIHRvIHNlbmQKICAgICAqLwogICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4o\nU3RyaW5nW10gYXJncykgewogICAgICAgIENvbnRleHQgam5kaUNvbnRleHQg\nPSBudWxsOwogICAgICAgIENvbm5lY3Rpb25GYWN0b3J5IGNvbm5lY3Rpb25G\nYWN0b3J5ID0gbnVsbDsKICAgICAgICBDb25uZWN0aW9uIGNvbm5lY3Rpb24g\nPSBudWxsOwogICAgICAgIFNlc3Npb24gc2Vzc2lvbiA9IG51bGw7CiAgICAg\nICAgRGVzdGluYXRpb24gZGVzdGluYXRpb24gPSBudWxsOwogICAgICAgIE1l\nc3NhZ2VQcm9kdWNlciBwcm9kdWNlciA9IG51bGw7CiAgICAgICAgU3RyaW5n\nIGRlc3RpbmF0aW9uTmFtZSA9IG51bGw7CiAgICAgICAgZmluYWwgaW50IG51\nbU1zZ3M7CgogICAgICAgIGlmICgoYXJncy5sZW5ndGggPCAxKSB8fCAoYXJn\ncy5sZW5ndGggPiAyKSkgewogICAgICAgICAgICBMT0cuaW5mbygiVXNhZ2U6\nIGphdmEgU2ltcGxlUHJvZHVjZXIgPGRlc3RpbmF0aW9uLW5hbWU+IFs8bnVt\nYmVyLW9mLW1lc3NhZ2VzPl0iKTsKICAgICAgICAgICAgU3lzdGVtLmV4aXQo\nMSk7CiAgICAgICAgfQogICAgICAgIGRlc3RpbmF0aW9uTmFtZSA9IGFyZ3Nb\nMF07CiAgICAgICAgTE9HLmluZm8oIkRlc3RpbmF0aW9uIG5hbWUgaXMgIiAr\nIGRlc3RpbmF0aW9uTmFtZSk7CiAgICAgICAgaWYgKGFyZ3MubGVuZ3RoID09\nIDIpIHsKICAgICAgICAgICAgbnVtTXNncyA9IChuZXcgSW50ZWdlcihhcmdz\nWzFdKSkuaW50VmFsdWUoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAg\nICBudW1Nc2dzID0gMTsKICAgICAgICB9CgogICAgICAgIC8qCiAgICAgICAg\nICogQ3JlYXRlIGEgSk5ESSBBUEkgSW5pdGlhbENvbnRleHQgb2JqZWN0CiAg\nICAgICAgICovCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgam5kaUNvbnRl\neHQgPSBuZXcgSW5pdGlhbENvbnRleHQoKTsKICAgICAgICB9IGNhdGNoIChO\nYW1pbmdFeGNlcHRpb24gZSkgewogICAgICAgICAgICBMT0cuaW5mbygiQ291\nbGQgbm90IGNyZWF0ZSBKTkRJIEFQSSBjb250ZXh0OiAiICsgZS50b1N0cmlu\nZygpKTsKICAgICAgICAgICAgU3lzdGVtLmV4aXQoMSk7CiAgICAgICAgfQoK\nICAgICAgICAvKgogICAgICAgICAqIExvb2sgdXAgY29ubmVjdGlvbiBmYWN0\nb3J5IGFuZCBkZXN0aW5hdGlvbi4KICAgICAgICAgKi8KICAgICAgICB0cnkg\newogICAgICAgICAgICBjb25uZWN0aW9uRmFjdG9yeSA9IChDb25uZWN0aW9u\nRmFjdG9yeSlqbmRpQ29udGV4dC5sb29rdXAoIkNvbm5lY3Rpb25GYWN0b3J5\nIik7CiAgICAgICAgICAgIGRlc3RpbmF0aW9uID0gKERlc3RpbmF0aW9uKWpu\nZGlDb250ZXh0Lmxvb2t1cChkZXN0aW5hdGlvbk5hbWUpOwogICAgICAgIH0g\nY2F0Y2ggKE5hbWluZ0V4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIExPRy5p\nbmZvKCJKTkRJIEFQSSBsb29rdXAgZmFpbGVkOiAiICsgZSk7CiAgICAgICAg\nICAgIFN5c3RlbS5leGl0KDEpOwogICAgICAgIH0KCiAgICAgICAgLyoKICAg\nICAgICAgKiBDcmVhdGUgY29ubmVjdGlvbi4gQ3JlYXRlIHNlc3Npb24gZnJv\nbSBjb25uZWN0aW9uOyBmYWxzZSBtZWFucwogICAgICAgICAqIHNlc3Npb24g\naXMgbm90IHRyYW5zYWN0ZWQuIENyZWF0ZSBzZW5kZXIgYW5kIHRleHQgbWVz\nc2FnZS4gU2VuZAogICAgICAgICAqIG1lc3NhZ2VzLCB2YXJ5aW5nIHRleHQg\nc2xpZ2h0bHkuIFNlbmQgZW5kLW9mLW1lc3NhZ2VzIG1lc3NhZ2UuCiAgICAg\nICAgICogRmluYWxseSwgY2xvc2UgY29ubmVjdGlvbi4KICAgICAgICAgKi8K\nICAgICAgICB0cnkgewogICAgICAgICAgICBjb25uZWN0aW9uID0gY29ubmVj\ndGlvbkZhY3RvcnkuY3JlYXRlQ29ubmVjdGlvbigpOwogICAgICAgICAgICBz\nZXNzaW9uID0gY29ubmVjdGlvbi5jcmVhdGVTZXNzaW9uKGZhbHNlLCBTZXNz\naW9uLkFVVE9fQUNLTk9XTEVER0UpOwogICAgICAgICAgICBwcm9kdWNlciA9\nIHNlc3Npb24uY3JlYXRlUHJvZHVjZXIoZGVzdGluYXRpb24pOwogICAgICAg\nICAgICBUZXh0TWVzc2FnZSBtZXNzYWdlID0gc2Vzc2lvbi5jcmVhdGVUZXh0\nTWVzc2FnZSgpOwogICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG51\nbU1zZ3M7IGkrKykgewogICAgICAgICAgICAgICAgbWVzc2FnZS5zZXRUZXh0\nKCJUaGlzIGlzIG1lc3NhZ2UgIiArIChpICsgMSkpOwogICAgICAgICAgICAg\nICAgTE9HLmluZm8oIlNlbmRpbmcgbWVzc2FnZTogIiArIG1lc3NhZ2UuZ2V0\nVGV4dCgpKTsKICAgICAgICAgICAgICAgIHByb2R1Y2VyLnNlbmQobWVzc2Fn\nZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8qCiAgICAgICAgICAg\nICAqIFNlbmQgYSBub24tdGV4dCBjb250cm9sIG1lc3NhZ2UgaW5kaWNhdGlu\nZyBlbmQgb2YgbWVzc2FnZXMuCiAgICAgICAgICAgICAqLwogICAgICAgICAg\nICBwcm9kdWNlci5zZW5kKHNlc3Npb24uY3JlYXRlTWVzc2FnZSgpKTsKICAg\nICAgICB9IGNhdGNoIChKTVNFeGNlcHRpb24gZSkgewogICAgICAgICAgICBM\nT0cuaW5mbygiRXhjZXB0aW9uIG9jY3VycmVkOiAiICsgZSk7CiAgICAgICAg\nfSBmaW5hbGx5IHsKICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb24gIT0gbnVs\nbCkgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAg\nICBjb25uZWN0aW9uLmNsb3NlKCk7CiAgICAgICAgICAgICAgICB9IGNhdGNo\nIChKTVNFeGNlcHRpb24gZSkgewogICAgICAgICAgICAgICAgfQogICAgICAg\nICAgICB9CiAgICAgICAgfQogICAgfQp9CgovLyBFTkQgU05JUFBFVDogZGVt\nbwo=\n","encoding":"base64"}

