{"sha":"66880af9c96463c11a338adba9aab34c2590f127","node_id":"MDQ6QmxvYjE1NzU5NTY6NjY4ODBhZjljOTY0NjNjMTFhMzM4YWRiYTlhYWIzNGMyNTkwZjEyNw==","size":5006,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/66880af9c96463c11a338adba9aab34c2590f127","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUgb3IgbW9yZQogKiBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlIGRpc3Ry\naWJ1dGVkIHdpdGgKICogdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLgogKiBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byBZb3UgdW5kZXIgdGhlIEFwYWNo\nZSBMaWNlbnNlLCBWZXJzaW9uIDIuMAogKiAodGhlICJMaWNlbnNlIik7IHlv\ndSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ug\nd2l0aAogKiB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBv\nZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hl\nLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWly\nZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcs\nIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlz\nIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQg\nV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIg\nZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRo\nZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5k\nCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFja2Fn\nZSBvcmcuYXBhY2hlLmFjdGl2ZW1xLmxvYWQ7CgoKaW1wb3J0IGphdmF4Lmpt\ncy5Ub3BpYzsKaW1wb3J0IGphdmF4Lmptcy5Db25uZWN0aW9uOwppbXBvcnQg\namF2YXguam1zLkNvbm5lY3Rpb25GYWN0b3J5OwppbXBvcnQgamF2YXguam1z\nLkRlbGl2ZXJ5TW9kZTsKaW1wb3J0IGphdmF4Lmptcy5EZXN0aW5hdGlvbjsK\naW1wb3J0IGphdmF4Lmptcy5KTVNFeGNlcHRpb247CmltcG9ydCBqYXZheC5q\nbXMuU2Vzc2lvbjsKaW1wb3J0IGp1bml0LmZyYW1ld29yay5UZXN0Q2FzZTsK\naW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLkptc1Rlc3RCYXNlOwppbXBvcnQg\nb3JnLmFwYWNoZS5oZWR3aWcuam1zLnNwaS5IZWR3aWdDb25uZWN0aW9uRmFj\ndG9yeUltcGw7CgppbXBvcnQgb3JnLmp1bml0Lklnbm9yZTsKaW1wb3J0IG9y\nZy5zbGY0ai5Mb2dnZXI7CmltcG9ydCBvcmcuc2xmNGouTG9nZ2VyRmFjdG9y\neTsKCi8vIEZvciBub3csIGlnbm9yZSBpdCAuLi4KQElnbm9yZQpwdWJsaWMg\nY2xhc3MgTG9hZFRlc3QgZXh0ZW5kcyBKbXNUZXN0QmFzZSB7CgogICAgcHJp\ndmF0ZSBzdGF0aWMgZmluYWwgTG9nZ2VyIExPRyA9IExvZ2dlckZhY3Rvcnku\nZ2V0TG9nZ2VyKExvYWRUZXN0LmNsYXNzKTsKCiAgICBwcm90ZWN0ZWQgTG9h\nZENvbnRyb2xsZXIgY29udHJvbGxlcjsKICAgIHByb3RlY3RlZCBMb2FkQ2xp\nZW50W10gY2xpZW50czsKICAgIHByb3RlY3RlZCBDb25uZWN0aW9uRmFjdG9y\neSBmYWN0b3J5OwogICAgcHJvdGVjdGVkIERlc3RpbmF0aW9uIGRlc3RpbmF0\naW9uOwogICAgcHJvdGVjdGVkIGludCBudW1iZXJPZkNsaWVudHMgPSA1MDsK\nICAgIHByb3RlY3RlZCBpbnQgZGVsaXZlcnlNb2RlID0gRGVsaXZlcnlNb2Rl\nLlBFUlNJU1RFTlQ7CiAgICBwcm90ZWN0ZWQgaW50IGJhdGNoU2l6ZSA9IDEw\nMDA7CiAgICBwcm90ZWN0ZWQgaW50IG51bWJlck9mQmF0Y2hlcyA9IDEwOwog\nICAgcHJvdGVjdGVkIGludCB0aW1lb3V0ID0gSW50ZWdlci5NQVhfVkFMVUU7\nCiAgICBwcm90ZWN0ZWQgYm9vbGVhbiBjb25uZWN0aW9uUGVyTWVzc2FnZSA9\nIGZhbHNlOwogICAgcHJvdGVjdGVkIENvbm5lY3Rpb24gbWFuYWdlbWVudENv\nbm5lY3Rpb247CiAgICBwcm90ZWN0ZWQgU2Vzc2lvbiBtYW5hZ2VtZW50U2Vz\nc2lvbjsKCiAgICAvKioKICAgICAqIFNldHMgdXAgYSB0ZXN0IHdoZXJlIHRo\nZSBwcm9kdWNlciBhbmQgY29uc3VtZXIgaGF2ZSB0aGVpciBvd24gY29ubmVj\ndGlvbi4KICAgICAqCiAgICAgKiBAc2VlIGp1bml0LmZyYW1ld29yay5UZXN0\nQ2FzZSNzZXRVcCgpCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIHNldFVw\nKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgc3VwZXIuc2V0VXAoKTsK\nICAgICAgICBmYWN0b3J5ID0gY3JlYXRlQ29ubmVjdGlvbkZhY3RvcnkoKTsK\nICAgICAgICBtYW5hZ2VtZW50Q29ubmVjdGlvbiA9IGZhY3RvcnkuY3JlYXRl\nQ29ubmVjdGlvbigpOwogICAgICAgIG1hbmFnZW1lbnRTZXNzaW9uID0gbWFu\nYWdlbWVudENvbm5lY3Rpb24uY3JlYXRlU2Vzc2lvbihmYWxzZSwgU2Vzc2lv\nbi5BVVRPX0FDS05PV0xFREdFKTsKCiAgICAgICAgRGVzdGluYXRpb24gc3Rh\ncnREZXN0aW5hdGlvbiA9IGNyZWF0ZURlc3RpbmF0aW9uKG1hbmFnZW1lbnRT\nZXNzaW9uLCBnZXRDbGFzcygpKyIuc3RhcnQiKTsKICAgICAgICBEZXN0aW5h\ndGlvbiBlbmREZXN0aW5hdGlvbiA9IGNyZWF0ZURlc3RpbmF0aW9uKG1hbmFn\nZW1lbnRTZXNzaW9uLCBnZXRDbGFzcygpKyIuZW5kIik7CiAgICAgICAgTE9H\nLmluZm8oIlJ1bm5pbmcgd2l0aCAiICsgbnVtYmVyT2ZDbGllbnRzICsgIiBj\nbGllbnRzIC0gc2VuZGluZyAiCiAgICAgICAgICAgICAgICArIG51bWJlck9m\nQmF0Y2hlcyArICIgYmF0Y2hlcyBvZiAiICsgYmF0Y2hTaXplICsgIiBtZXNz\nYWdlcyIpOwogICAgICAgIGNvbnRyb2xsZXIgPSBuZXcgTG9hZENvbnRyb2xs\nZXIoIkNvbnRyb2xsZXIiLGZhY3RvcnkpOwogICAgICAgIGNvbnRyb2xsZXIu\nc2V0QmF0Y2hTaXplKGJhdGNoU2l6ZSk7CiAgICAgICAgY29udHJvbGxlci5z\nZXROdW1iZXJPZkJhdGNoZXMobnVtYmVyT2ZCYXRjaGVzKTsKICAgICAgICBj\nb250cm9sbGVyLnNldERlbGl2ZXJ5TW9kZShkZWxpdmVyeU1vZGUpOwogICAg\nICAgIGNvbnRyb2xsZXIuc2V0Q29ubmVjdGlvblBlck1lc3NhZ2UoY29ubmVj\ndGlvblBlck1lc3NhZ2UpOwogICAgICAgIGNvbnRyb2xsZXIuc2V0U3RhcnRE\nZXN0aW5hdGlvbihzdGFydERlc3RpbmF0aW9uKTsKICAgICAgICBjb250cm9s\nbGVyLnNldE5leHREZXN0aW5hdGlvbihlbmREZXN0aW5hdGlvbik7CiAgICAg\nICAgY29udHJvbGxlci5zZXRUaW1lb3V0KHRpbWVvdXQpOwogICAgICAgIGNs\naWVudHMgPSBuZXcgTG9hZENsaWVudFtudW1iZXJPZkNsaWVudHNdOwogICAg\nICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbnVtYmVyT2ZDbGllbnRzOyBpKysp\nIHsKICAgICAgICAgICAgRGVzdGluYXRpb24gaW5EZXN0aW5hdGlvbiA9IG51\nbGw7CiAgICAgICAgICAgIGlmIChpPT0wKSB7CiAgICAgICAgICAgICAgICBp\nbkRlc3RpbmF0aW9uID0gc3RhcnREZXN0aW5hdGlvbjsKICAgICAgICAgICAg\nfWVsc2UgewogICAgICAgICAgICAgICAgaW5EZXN0aW5hdGlvbiA9IGNyZWF0\nZURlc3RpbmF0aW9uKG1hbmFnZW1lbnRTZXNzaW9uLCBnZXRDbGFzcygpICsg\nIi5jbGllbnQuIisoaSkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIERl\nc3RpbmF0aW9uIG91dERlc3RpbmF0aW9uID0gbnVsbDsKICAgICAgICAgICAg\naWYgKGk9PShudW1iZXJPZkNsaWVudHMtMSkpIHsKICAgICAgICAgICAgICAg\nIG91dERlc3RpbmF0aW9uID0gZW5kRGVzdGluYXRpb247CiAgICAgICAgICAg\nIH1lbHNlIHsKICAgICAgICAgICAgICAgIG91dERlc3RpbmF0aW9uID0gY3Jl\nYXRlRGVzdGluYXRpb24obWFuYWdlbWVudFNlc3Npb24sIGdldENsYXNzKCkg\nKyAiLmNsaWVudC4iKyhpKzEpKTsKICAgICAgICAgICAgfQogICAgICAgICAg\nICBMb2FkQ2xpZW50IGNsaWVudCA9IG5ldyBMb2FkQ2xpZW50KCJjbGllbnQo\nIitpKyIpIixmYWN0b3J5KTsKICAgICAgICAgICAgY2xpZW50LnNldFRpbWVv\ndXQodGltZW91dCk7CiAgICAgICAgICAgIGNsaWVudC5zZXREZWxpdmVyeU1v\nZGUoZGVsaXZlcnlNb2RlKTsKICAgICAgICAgICAgY2xpZW50LnNldENvbm5l\nY3Rpb25QZXJNZXNzYWdlKGNvbm5lY3Rpb25QZXJNZXNzYWdlKTsKICAgICAg\nICAgICAgY2xpZW50LnNldFN0YXJ0RGVzdGluYXRpb24oaW5EZXN0aW5hdGlv\nbik7CiAgICAgICAgICAgIGNsaWVudC5zZXROZXh0RGVzdGluYXRpb24ob3V0\nRGVzdGluYXRpb24pOwogICAgICAgICAgICBjbGllbnRzW2ldID0gY2xpZW50\nOwogICAgICAgIH0KICAgICAgICBzdXBlci5zZXRVcCgpOwogICAgfQoKICAg\nIHByb3RlY3RlZCB2b2lkIHRlYXJEb3duKCkgdGhyb3dzIEV4Y2VwdGlvbiB7\nCiAgICAgICAgc3VwZXIudGVhckRvd24oKTsKICAgICAgICBtYW5hZ2VtZW50\nQ29ubmVjdGlvbi5jbG9zZSgpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBp\nIDwgbnVtYmVyT2ZDbGllbnRzOyBpKyspIHsKICAgICAgICAgICAgY2xpZW50\nc1tpXS5zdG9wKCk7CiAgICAgICAgfQogICAgICAgIGNvbnRyb2xsZXIuc3Rv\ncCgpOwogICAgfQoKICAgIHByb3RlY3RlZCBEZXN0aW5hdGlvbiBjcmVhdGVE\nZXN0aW5hdGlvbihTZXNzaW9uIHMsIFN0cmluZyBkZXN0aW5hdGlvbk5hbWUp\nIHRocm93cyBKTVNFeGNlcHRpb24gewogICAgICAgIHJldHVybiBzLmNyZWF0\nZVRvcGljKGRlc3RpbmF0aW9uTmFtZSk7CiAgICB9CgogICAgcHJvdGVjdGVk\nIEhlZHdpZ0Nvbm5lY3Rpb25GYWN0b3J5SW1wbCBjcmVhdGVDb25uZWN0aW9u\nRmFjdG9yeSgpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIHJldHVybiBu\nZXcgSGVkd2lnQ29ubmVjdGlvbkZhY3RvcnlJbXBsKCk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgdGVzdExvYWQoKSB0aHJvd3MgSk1TRXhjZXB0aW9uLCBJ\nbnRlcnJ1cHRlZEV4Y2VwdGlvbiB7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7\nIGkgPCBudW1iZXJPZkNsaWVudHM7IGkrKykgewogICAgICAgICAgICBjbGll\nbnRzW2ldLnN0YXJ0KCk7CiAgICAgICAgfQogICAgICAgIGNvbnRyb2xsZXIu\nc3RhcnQoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoKGJhdGNoU2l6ZSogbnVt\nYmVyT2ZCYXRjaGVzKSxjb250cm9sbGVyLmF3YWl0VGVzdENvbXBsZXRlKCkp\nOwogICAgfQoKfQo=\n","encoding":"base64"}

