{"sha":"a03fab9671685b343070130722c5a1e96360af3a","node_id":"MDQ6QmxvYjE1NzU5NTY6YTAzZmFiOTY3MTY4NWIzNDMwNzAxMzA3MjJjNWExZTk2MzYwYWYzYQ==","size":6627,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/a03fab9671685b343070130722c5a1e96360af3a","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUgb3IgbW9yZQogKiBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlIGRpc3Ry\naWJ1dGVkIHdpdGgKICogdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLgogKiBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byBZb3UgdW5kZXIgdGhlIEFwYWNo\nZSBMaWNlbnNlLCBWZXJzaW9uIDIuMAogKiAodGhlICJMaWNlbnNlIik7IHlv\ndSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ug\nd2l0aAogKiB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBv\nZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hl\nLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWly\nZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcs\nIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlz\nIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQg\nV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIg\nZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRo\nZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5k\nCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFja2Fn\nZSBvcmcuYXBhY2hlLmFjdGl2ZW1xLnBlcmY7CgppbXBvcnQgamF2YXguam1z\nLkNvbm5lY3Rpb247CmltcG9ydCBqYXZheC5qbXMuSk1TRXhjZXB0aW9uOwpp\nbXBvcnQgamF2YXguam1zLk1hcE1lc3NhZ2U7CmltcG9ydCBqYXZheC5qbXMu\nTWVzc2FnZTsKaW1wb3J0IGphdmF4Lmptcy5NZXNzYWdlUHJvZHVjZXI7Cmlt\ncG9ydCBqYXZheC5qbXMuU2Vzc2lvbjsKaW1wb3J0IGphdmF4Lmptcy5Ub3Bp\nYzsKaW1wb3J0IGphdmF4Lmptcy5Ub3BpY1N1YnNjcmliZXI7CmltcG9ydCBq\ndW5pdC5mcmFtZXdvcmsuQXNzZXJ0OwppbXBvcnQganVuaXQuZnJhbWV3b3Jr\nLkFzc2VydGlvbkZhaWxlZEVycm9yOwppbXBvcnQganVuaXQuZnJhbWV3b3Jr\nLlRlc3RDYXNlOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuSm1zVGVzdEJh\nc2U7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5qbXMuc3BpLkhlZHdpZ0Nv\nbm5lY3Rpb25GYWN0b3J5SW1wbDsKCmltcG9ydCBvcmcuanVuaXQuSWdub3Jl\nOwppbXBvcnQgb3JnLnNsZjRqLkxvZ2dlcjsKaW1wb3J0IG9yZy5zbGY0ai5M\nb2dnZXJGYWN0b3J5OwoKLy8gRm9yIG5vdywgaWdub3JlIGl0IC4uLgpASWdu\nb3JlCnB1YmxpYyBjbGFzcyBJbmFjdGl2ZUR1cmFibGVUb3BpY1Rlc3QgZXh0\nZW5kcyBKbXNUZXN0QmFzZSB7CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCB0\ncmFuc2llbnQgTG9nZ2VyIExPRyA9IExvZ2dlckZhY3RvcnkuZ2V0TG9nZ2Vy\nKEluYWN0aXZlRHVyYWJsZVRvcGljVGVzdC5jbGFzcyk7CgogICAgcHJpdmF0\nZSBzdGF0aWMgZmluYWwgaW50IE1FU1NBR0VfQ09VTlQgPSAyMDAwOwogICAg\ncHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIERFRkFVTFRfUEFTU1dPUkQg\nPSAiIjsKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBVU0VSTkFN\nRSA9ICJ0ZXN0dXNlciI7CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJp\nbmcgQ0xJRU5USUQgPSAibXl0ZXN0Y2xpZW50IjsKICAgIHByaXZhdGUgc3Rh\ndGljIGZpbmFsIFN0cmluZyBUT1BJQ19OQU1FID0gInRlc3RldmVudCI7CiAg\nICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgU1VCSUQgPSAic3Vic2Ny\naXB0aW9uMSI7CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBpbnQgREVMSVZF\nUllfTU9ERSA9IGphdmF4Lmptcy5EZWxpdmVyeU1vZGUuUEVSU0lTVEVOVDsK\nICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGludCBERUxJVkVSWV9QUklPUklU\nWSA9IGphdmF4Lmptcy5NZXNzYWdlLkRFRkFVTFRfUFJJT1JJVFk7CiAgICBw\ncml2YXRlIENvbm5lY3Rpb24gY29ubmVjdGlvbjsKICAgIHByaXZhdGUgTWVz\nc2FnZVByb2R1Y2VyIHB1Ymxpc2hlcjsKICAgIHByaXZhdGUgVG9waWNTdWJz\nY3JpYmVyIHN1YnNjcmliZXI7CiAgICBwcml2YXRlIFRvcGljIHRvcGljOwog\nICAgcHJpdmF0ZSBTZXNzaW9uIHNlc3Npb247CiAgICBwcml2YXRlIEhlZHdp\nZ0Nvbm5lY3Rpb25GYWN0b3J5SW1wbCBjb25uZWN0aW9uRmFjdG9yeTsKCiAg\nICBAT3ZlcnJpZGUKICAgIHByb3RlY3RlZCB2b2lkIHNldFVwKCkgdGhyb3dz\nIEV4Y2VwdGlvbiB7CiAgICAgICAgc3VwZXIuc2V0VXAoKTsKCiAgICAgICAg\nY29ubmVjdGlvbkZhY3RvcnkgPSBuZXcgSGVkd2lnQ29ubmVjdGlvbkZhY3Rv\ncnlJbXBsKCk7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwcm90ZWN0ZWQg\ndm9pZCB0ZWFyRG93bigpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIHN1\ncGVyLnRlYXJEb3duKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdDFD\ncmVhdGVTdWJzY3JpcHRpb24oKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAg\nICB0cnkgewogICAgICAgICAgICAvKgogICAgICAgICAgICAgKiBTdGVwIDEg\nLSBFc3RhYmxpc2ggYSBjb25uZWN0aW9uIHdpdGggYSBjbGllbnQgaWQgYW5k\nIGNyZWF0ZSBhCiAgICAgICAgICAgICAqIGR1cmFibGUgc3Vic2NyaXB0aW9u\nCiAgICAgICAgICAgICAqLwogICAgICAgICAgICBjb25uZWN0aW9uID0gY29u\nbmVjdGlvbkZhY3RvcnkuY3JlYXRlQ29ubmVjdGlvbihVU0VSTkFNRSwgREVG\nQVVMVF9QQVNTV09SRCk7CiAgICAgICAgICAgIGFzc2VydE5vdE51bGwoY29u\nbmVjdGlvbik7CiAgICAgICAgICAgIGNvbm5lY3Rpb24uc2V0Q2xpZW50SUQo\nQ0xJRU5USUQpOwogICAgICAgICAgICBjb25uZWN0aW9uLnN0YXJ0KCk7CiAg\nICAgICAgICAgIHNlc3Npb24gPSBjb25uZWN0aW9uLmNyZWF0ZVNlc3Npb24o\nZmFsc2UsIGphdmF4Lmptcy5TZXNzaW9uLkNMSUVOVF9BQ0tOT1dMRURHRSk7\nCiAgICAgICAgICAgIGFzc2VydE5vdE51bGwoc2Vzc2lvbik7CiAgICAgICAg\nICAgIHRvcGljID0gc2Vzc2lvbi5jcmVhdGVUb3BpYyhUT1BJQ19OQU1FKTsK\nICAgICAgICAgICAgYXNzZXJ0Tm90TnVsbCh0b3BpYyk7CiAgICAgICAgICAg\nIHN1YnNjcmliZXIgPSBzZXNzaW9uLmNyZWF0ZUR1cmFibGVTdWJzY3JpYmVy\nKHRvcGljLCBTVUJJRCwgIiIsIGZhbHNlKTsKICAgICAgICAgICAgYXNzZXJ0\nTm90TnVsbChzdWJzY3JpYmVyKTsKICAgICAgICAgICAgc3Vic2NyaWJlci5j\nbG9zZSgpOwogICAgICAgICAgICBzZXNzaW9uLmNsb3NlKCk7CiAgICAgICAg\nICAgIGNvbm5lY3Rpb24uY2xvc2UoKTsKICAgICAgICB9IGNhdGNoIChKTVNF\neGNlcHRpb24gZXgpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\nICAgIGNvbm5lY3Rpb24uY2xvc2UoKTsKICAgICAgICAgICAgfSBjYXRjaCAo\nRXhjZXB0aW9uIGlnbm9yZSkgewogICAgICAgICAgICB9CiAgICAgICAgICAg\nIHRocm93IG5ldyBBc3NlcnRpb25GYWlsZWRFcnJvcigiQ3JlYXRlIFN1YnNj\ncmlwdGlvbiBjYXVnaHQ6ICIgKyBleCk7CiAgICAgICAgfQogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHRlc3QyUHJvZHVjZXJUZXN0Q2FzZSgpIHsKICAgICAg\nICAvKgogICAgICAgICAqIFN0ZXAgMiAtIEVzdGFibGlzaCBhIGNvbm5lY3Rp\nb24gd2l0aG91dCBhIGNsaWVudCBpZCBhbmQgY3JlYXRlIGEKICAgICAgICAg\nKiBwcm9kdWNlciBhbmQgc3RhcnQgcHVtcGluZyBtZXNzYWdlcy4gV2Ugd2ls\nbCBnZXQgaHVuZwogICAgICAgICAqLwogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIGNvbm5lY3Rpb24gPSBjb25uZWN0aW9uRmFjdG9yeS5jcmVhdGVDb25u\nZWN0aW9uKFVTRVJOQU1FLCBERUZBVUxUX1BBU1NXT1JEKTsKICAgICAgICAg\nICAgYXNzZXJ0Tm90TnVsbChjb25uZWN0aW9uKTsKICAgICAgICAgICAgc2Vz\nc2lvbiA9IGNvbm5lY3Rpb24uY3JlYXRlU2Vzc2lvbihmYWxzZSwgamF2YXgu\nam1zLlNlc3Npb24uQ0xJRU5UX0FDS05PV0xFREdFKTsKICAgICAgICAgICAg\nYXNzZXJ0Tm90TnVsbChzZXNzaW9uKTsKICAgICAgICAgICAgdG9waWMgPSBz\nZXNzaW9uLmNyZWF0ZVRvcGljKFRPUElDX05BTUUpOwogICAgICAgICAgICBh\nc3NlcnROb3ROdWxsKHRvcGljKTsKICAgICAgICAgICAgcHVibGlzaGVyID0g\nc2Vzc2lvbi5jcmVhdGVQcm9kdWNlcih0b3BpYyk7CiAgICAgICAgICAgIGFz\nc2VydE5vdE51bGwocHVibGlzaGVyKTsKICAgICAgICAgICAgTWFwTWVzc2Fn\nZSBtc2cgPSBzZXNzaW9uLmNyZWF0ZU1hcE1lc3NhZ2UoKTsKICAgICAgICAg\nICAgYXNzZXJ0Tm90TnVsbChtc2cpOwogICAgICAgICAgICBtc2cuc2V0U3Ry\naW5nKCJrZXkxIiwgInZhbHVlMSIpOwogICAgICAgICAgICBpbnQgbG9vcDsK\nICAgICAgICAgICAgZm9yIChsb29wID0gMDsgbG9vcCA8IE1FU1NBR0VfQ09V\nTlQ7IGxvb3ArKykgewogICAgICAgICAgICAgICAgbXNnLnNldEludCgia2V5\nMiIsIGxvb3ApOwogICAgICAgICAgICAgICAgcHVibGlzaGVyLnNlbmQobXNn\nLCBERUxJVkVSWV9NT0RFLCBERUxJVkVSWV9QUklPUklUWSwgTWVzc2FnZS5E\nRUZBVUxUX1RJTUVfVE9fTElWRSk7CiAgICAgICAgICAgICAgICBpZiAobG9v\ncCAlIDUwMDAgPT0gMCkgewogICAgICAgICAgICAgICAgICAgIExPRy5pbmZv\nKCJTZW50ICIgKyBsb29wICsgIiBtZXNzYWdlcyIpOwogICAgICAgICAgICAg\nICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIEFzc2VydC5hc3NlcnRF\ncXVhbHMobG9vcCwgTUVTU0FHRV9DT1VOVCk7CiAgICAgICAgICAgIHB1Ymxp\nc2hlci5jbG9zZSgpOwogICAgICAgICAgICBzZXNzaW9uLmNsb3NlKCk7CiAg\nICAgICAgICAgIGNvbm5lY3Rpb24uc3RvcCgpOwogICAgICAgICAgICBjb25u\nZWN0aW9uLnN0b3AoKTsKICAgICAgICB9IGNhdGNoIChKTVNFeGNlcHRpb24g\nZXgpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbm5l\nY3Rpb24uY2xvc2UoKTsKICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9u\nIGlnbm9yZSkgewogICAgICAgICAgICB9CiAgICAgICAgICAgIHRocm93IG5l\ndyBBc3NlcnRpb25GYWlsZWRFcnJvcigiQ3JlYXRlIFN1YnNjcmlwdGlvbiBj\nYXVnaHQ6ICIgKyBleCk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHRlc3QzQ3JlYXRlU3Vic2NyaXB0aW9uKCkgdGhyb3dzIEV4Y2VwdGlv\nbiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgLyoKICAgICAgICAgICAg\nICogU3RlcCAxIC0gRXN0YWJsaXNoIGEgY29ubmVjdGlvbiB3aXRoIGEgY2xp\nZW50IGlkIGFuZCBjcmVhdGUgYQogICAgICAgICAgICAgKiBkdXJhYmxlIHN1\nYnNjcmlwdGlvbgogICAgICAgICAgICAgKi8KICAgICAgICAgICAgY29ubmVj\ndGlvbiA9IGNvbm5lY3Rpb25GYWN0b3J5LmNyZWF0ZUNvbm5lY3Rpb24oVVNF\nUk5BTUUsIERFRkFVTFRfUEFTU1dPUkQpOwogICAgICAgICAgICBhc3NlcnRO\nb3ROdWxsKGNvbm5lY3Rpb24pOwogICAgICAgICAgICBjb25uZWN0aW9uLnNl\ndENsaWVudElEKENMSUVOVElEKTsKICAgICAgICAgICAgY29ubmVjdGlvbi5z\ndGFydCgpOwogICAgICAgICAgICBzZXNzaW9uID0gY29ubmVjdGlvbi5jcmVh\ndGVTZXNzaW9uKGZhbHNlLCBqYXZheC5qbXMuU2Vzc2lvbi5BVVRPX0FDS05P\nV0xFREdFKTsKICAgICAgICAgICAgYXNzZXJ0Tm90TnVsbChzZXNzaW9uKTsK\nICAgICAgICAgICAgdG9waWMgPSBzZXNzaW9uLmNyZWF0ZVRvcGljKFRPUElD\nX05BTUUpOwogICAgICAgICAgICBhc3NlcnROb3ROdWxsKHRvcGljKTsKICAg\nICAgICAgICAgc3Vic2NyaWJlciA9IHNlc3Npb24uY3JlYXRlRHVyYWJsZVN1\nYnNjcmliZXIodG9waWMsIFNVQklELCAiIiwgZmFsc2UpOwogICAgICAgICAg\nICBhc3NlcnROb3ROdWxsKHN1YnNjcmliZXIpOwogICAgICAgICAgICBpbnQg\nbG9vcDsKICAgICAgICAgICAgZm9yIChsb29wID0gMDsgbG9vcCA8IE1FU1NB\nR0VfQ09VTlQ7IGxvb3ArKykgewogICAgICAgICAgICAgICAgTWVzc2FnZSBt\nc2cgPSBzdWJzY3JpYmVyLnJlY2VpdmUoKTsKICAgICAgICAgICAgICAgIGlm\nIChsb29wICUgNTAwID09IDApIHsKICAgICAgICAgICAgICAgICAgICBMT0cu\nZGVidWcoIlJlY2VpdmVkICIgKyBsb29wICsgIiBtZXNzYWdlcyIpOwogICAg\nICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMu\nYXNzZXJ0RXF1YWxzKGxvb3AsIE1FU1NBR0VfQ09VTlQpOwogICAgICAgICAg\nICBzdWJzY3JpYmVyLmNsb3NlKCk7CiAgICAgICAgICAgIHNlc3Npb24uY2xv\nc2UoKTsKICAgICAgICAgICAgY29ubmVjdGlvbi5jbG9zZSgpOwogICAgICAg\nIH0gY2F0Y2ggKEpNU0V4Y2VwdGlvbiBleCkgewogICAgICAgICAgICB0cnkg\newogICAgICAgICAgICAgICAgY29ubmVjdGlvbi5jbG9zZSgpOwogICAgICAg\nICAgICB9IGNhdGNoIChFeGNlcHRpb24gaWdub3JlKSB7CiAgICAgICAgICAg\nIH0KICAgICAgICAgICAgdGhyb3cgbmV3IEFzc2VydGlvbkZhaWxlZEVycm9y\nKCJDcmVhdGUgU3Vic2NyaXB0aW9uIGNhdWdodDogIiArIGV4KTsKICAgICAg\nICB9CiAgICB9Cn0K\n","encoding":"base64"}

