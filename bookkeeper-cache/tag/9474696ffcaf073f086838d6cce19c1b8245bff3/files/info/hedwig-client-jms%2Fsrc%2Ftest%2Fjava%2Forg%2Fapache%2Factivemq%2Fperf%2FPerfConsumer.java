{"sha":"9eefad588cdbd246b04b18c5a87bc4696b304ecc","node_id":"MDQ6QmxvYjE1NzU5NTY6OWVlZmFkNTg4Y2RiZDI0NmIwNGIxOGM1YTg3YmM0Njk2YjMwNGVjYw==","size":4284,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/9eefad588cdbd246b04b18c5a87bc4696b304ecc","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUgb3IgbW9yZQogKiBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlIGRpc3Ry\naWJ1dGVkIHdpdGgKICogdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLgogKiBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byBZb3UgdW5kZXIgdGhlIEFwYWNo\nZSBMaWNlbnNlLCBWZXJzaW9uIDIuMAogKiAodGhlICJMaWNlbnNlIik7IHlv\ndSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ug\nd2l0aAogKiB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBv\nZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hl\nLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWly\nZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcs\nIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlz\nIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQg\nV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIg\nZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRo\nZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5k\nCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFja2Fn\nZSBvcmcuYXBhY2hlLmFjdGl2ZW1xLnBlcmY7CgppbXBvcnQgamF2YXguam1z\nLkNvbm5lY3Rpb247CmltcG9ydCBqYXZheC5qbXMuQ29ubmVjdGlvbkZhY3Rv\ncnk7CmltcG9ydCBqYXZheC5qbXMuRGVzdGluYXRpb247CmltcG9ydCBqYXZh\neC5qbXMuSk1TRXhjZXB0aW9uOwppbXBvcnQgamF2YXguam1zLk1lc3NhZ2U7\nCmltcG9ydCBqYXZheC5qbXMuTWVzc2FnZUNvbnN1bWVyOwppbXBvcnQgamF2\nYXguam1zLk1lc3NhZ2VMaXN0ZW5lcjsKaW1wb3J0IGphdmF4Lmptcy5TZXNz\naW9uOwppbXBvcnQgamF2YXguam1zLlRvcGljOwoKaW1wb3J0IG9yZy5hcGFj\naGUuaGVkd2lnLmptcy5MUlVDYWNoZVNldDsKaW1wb3J0IG9yZy5zbGY0ai5M\nb2dnZXI7CmltcG9ydCBvcmcuc2xmNGouTG9nZ2VyRmFjdG9yeTsKCi8qKgog\nKgogKi8KcHVibGljIGNsYXNzIFBlcmZDb25zdW1lciBpbXBsZW1lbnRzIE1l\nc3NhZ2VMaXN0ZW5lciB7CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2dn\nZXIgTE9HID0gTG9nZ2VyRmFjdG9yeS5nZXRMb2dnZXIoUGVyZkNvbnN1bWVy\nLmNsYXNzKTsKICAgIHByb3RlY3RlZCBDb25uZWN0aW9uIGNvbm5lY3Rpb247\nCiAgICBwcm90ZWN0ZWQgTWVzc2FnZUNvbnN1bWVyIGNvbnN1bWVyOwogICAg\ncHJvdGVjdGVkIGxvbmcgc2xlZXBEdXJhdGlvbjsKICAgIHByb3RlY3RlZCBs\nb25nIGluaXRpYWxEZWxheTsKICAgIHByb3RlY3RlZCBib29sZWFuIGVuYWJs\nZUF1ZGl0ID0gZmFsc2U7CiAgICBwcm90ZWN0ZWQgYm9vbGVhbiBmaXJzdE1l\nc3NhZ2UgPXRydWU7CiAgICBwcm90ZWN0ZWQgU3RyaW5nIGxhc3RNc2dJZDsK\nCiAgICBwcm90ZWN0ZWQgUGVyZlJhdGUgcmF0ZSA9IG5ldyBQZXJmUmF0ZSgp\nOwoKICAgIHB1YmxpYyBQZXJmQ29uc3VtZXIoQ29ubmVjdGlvbkZhY3Rvcnkg\nZmFjLCBEZXN0aW5hdGlvbiBkZXN0LCBTdHJpbmcgY29uc3VtZXJOYW1lKSB0\naHJvd3MgSk1TRXhjZXB0aW9uIHsKICAgICAgICBjb25uZWN0aW9uID0gZmFj\nLmNyZWF0ZUNvbm5lY3Rpb24oKTsKICAgICAgICBjb25uZWN0aW9uLnNldENs\naWVudElEKGNvbnN1bWVyTmFtZSk7CiAgICAgICAgU2Vzc2lvbiBzID0gY29u\nbmVjdGlvbi5jcmVhdGVTZXNzaW9uKGZhbHNlLCBTZXNzaW9uLkFVVE9fQUNL\nTk9XTEVER0UpOwogICAgICAgIGlmIChkZXN0IGluc3RhbmNlb2YgVG9waWMg\nJiYgY29uc3VtZXJOYW1lICE9IG51bGwgJiYgY29uc3VtZXJOYW1lLmxlbmd0\naCgpID4gMCkgewogICAgICAgICAgICBjb25zdW1lciA9IHMuY3JlYXRlRHVy\nYWJsZVN1YnNjcmliZXIoKFRvcGljKWRlc3QsIGNvbnN1bWVyTmFtZSk7CiAg\nICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc3VtZXIgPSBzLmNyZWF0\nZUNvbnN1bWVyKGRlc3QpOwogICAgICAgIH0KICAgICAgICBjb25zdW1lci5z\nZXRNZXNzYWdlTGlzdGVuZXIodGhpcyk7CiAgICB9CgogICAgcHVibGljIFBl\ncmZDb25zdW1lcihDb25uZWN0aW9uRmFjdG9yeSBmYWMsIERlc3RpbmF0aW9u\nIGRlc3QpIHRocm93cyBKTVNFeGNlcHRpb24gewogICAgICAgIHRoaXMoZmFj\nLCBkZXN0LCBudWxsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzdGFydCgp\nIHRocm93cyBKTVNFeGNlcHRpb24gewogICAgICAgIGNvbm5lY3Rpb24uc3Rh\ncnQoKTsKICAgICAgICByYXRlLnJlc2V0KCk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgc3RvcCgpIHRocm93cyBKTVNFeGNlcHRpb24gewogICAgICAgIGNv\nbm5lY3Rpb24uc3RvcCgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNodXRE\nb3duKCkgdGhyb3dzIEpNU0V4Y2VwdGlvbiB7CiAgICAgICAgY29ubmVjdGlv\nbi5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyBQZXJmUmF0ZSBnZXRSYXRl\nKCkgewogICAgICAgIHJldHVybiByYXRlOwogICAgfQoKICAgIHByaXZhdGUg\nTFJVQ2FjaGVTZXQ8U3RyaW5nPiBtZXNzYWdlSWRDYWNoZSA9IG5ldyBMUlVD\nYWNoZVNldDxTdHJpbmc+KDIwNDgsIGZhbHNlKTsKICAgIHB1YmxpYyB2b2lk\nIG9uTWVzc2FnZShNZXNzYWdlIG1zZykgewogICAgICAgIGlmIChmaXJzdE1l\nc3NhZ2UpIHsKICAgICAgICAgICAgZmlyc3RNZXNzYWdlPWZhbHNlOwogICAg\nICAgICAgICBpZiAoZ2V0SW5pdGlhbERlbGF5KCkgPiAwKSB7CiAgICAgICAg\nICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIFRocmVhZC5zbGVl\ncChnZXRJbml0aWFsRGVsYXkoKSk7CiAgICAgICAgICAgICAgICB9IGNhdGNo\nIChJbnRlcnJ1cHRlZEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAgICB9\nCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmF0ZS5pbmNyZW1l\nbnQoKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBpZiAoZW5hYmxlQXVk\naXQgJiYgdGhpcy5tZXNzYWdlSWRDYWNoZS5jb250YWlucyhtc2cuZ2V0Sk1T\nTWVzc2FnZUlEKCkpKXsKICAgICAgICAgICAgICAgIExPRy5lcnJvcigiRHVw\nbGljYXRlIE1lc3NhZ2UhIiArIG1zZyk7CiAgICAgICAgICAgIH0KICAgICAg\nICAgICAgbGFzdE1zZ0lkPW1zZy5nZXRKTVNNZXNzYWdlSUQoKTsKICAgICAg\nICAgICAgdGhpcy5tZXNzYWdlSWRDYWNoZS5hZGQobGFzdE1zZ0lkKTsKICAg\nICAgICB9IGNhdGNoIChKTVNFeGNlcHRpb24gZTEpIHsKICAgICAgICAgICAg\nZTEucHJpbnRTdGFja1RyYWNlKCk7CiAgICAgICAgfQogICAgICAgIHRyeSB7\nCiAgICAgICAgICAgIGlmIChzbGVlcER1cmF0aW9uICE9IDApIHsKICAgICAg\nICAgICAgICAgIFRocmVhZC5zbGVlcChzbGVlcER1cmF0aW9uKTsKICAgICAg\nICAgICAgfQogICAgICAgIH0gY2F0Y2ggKEludGVycnVwdGVkRXhjZXB0aW9u\nIGUpIHsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHN5bmNocm9uaXpl\nZCBsb25nIGdldFNsZWVwRHVyYXRpb24oKSB7CiAgICAgICAgcmV0dXJuIHNs\nZWVwRHVyYXRpb247CiAgICB9CgogICAgcHVibGljIHN5bmNocm9uaXplZCB2\nb2lkIHNldFNsZWVwRHVyYXRpb24obG9uZyBzbGVlcER1cmF0aW9uKSB7CiAg\nICAgICAgdGhpcy5zbGVlcER1cmF0aW9uID0gc2xlZXBEdXJhdGlvbjsKICAg\nIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBpc0VuYWJsZUF1ZGl0KCkgewogICAg\nICAgIHJldHVybiBlbmFibGVBdWRpdDsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBzZXRFbmFibGVBdWRpdChib29sZWFuIGRvQXVkaXQpIHsKICAgICAgICB0\naGlzLmVuYWJsZUF1ZGl0ID0gZG9BdWRpdDsKICAgIH0KCiAgICAvKioKICAg\nICAqIEByZXR1cm4gdGhlIGluaXRpYWxEZWxheQogICAgICovCiAgICBwdWJs\naWMgbG9uZyBnZXRJbml0aWFsRGVsYXkoKSB7CiAgICAgICAgcmV0dXJuIGlu\naXRpYWxEZWxheTsKICAgIH0KCiAgICAvKioKICAgICAqIEBwYXJhbSBpbml0\naWFsRGVsYXkgdGhlIGluaXRpYWxEZWxheSB0byBzZXQKICAgICAqLwogICAg\ncHVibGljIHZvaWQgc2V0SW5pdGlhbERlbGF5KGxvbmcgaW5pdGlhbERlbGF5\nKSB7CiAgICAgICAgdGhpcy5pbml0aWFsRGVsYXkgPSBpbml0aWFsRGVsYXk7\nCiAgICB9Cn0K\n","encoding":"base64"}

