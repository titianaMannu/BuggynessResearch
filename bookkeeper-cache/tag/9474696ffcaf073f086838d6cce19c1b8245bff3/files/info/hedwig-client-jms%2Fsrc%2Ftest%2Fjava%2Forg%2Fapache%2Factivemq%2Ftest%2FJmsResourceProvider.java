{"sha":"e05770edcadf814fb5937f9863b80b68ce9a1da2","node_id":"MDQ6QmxvYjE1NzU5NTY6ZTA1NzcwZWRjYWRmODE0ZmI1OTM3Zjk4NjNiODBiNjhjZTlhMWRhMg==","size":6607,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/e05770edcadf814fb5937f9863b80b68ce9a1da2","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUgb3IgbW9yZQogKiBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlIGRpc3Ry\naWJ1dGVkIHdpdGgKICogdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLgogKiBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byBZb3UgdW5kZXIgdGhlIEFwYWNo\nZSBMaWNlbnNlLCBWZXJzaW9uIDIuMAogKiAodGhlICJMaWNlbnNlIik7IHlv\ndSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ug\nd2l0aAogKiB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBv\nZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hl\nLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWly\nZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcs\nIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlz\nIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQg\nV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIg\nZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRo\nZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5k\nCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFja2Fn\nZSBvcmcuYXBhY2hlLmFjdGl2ZW1xLnRlc3Q7CgppbXBvcnQgamF2YXguam1z\nLkNvbm5lY3Rpb247CmltcG9ydCBqYXZheC5qbXMuQ29ubmVjdGlvbkNvbnN1\nbWVyOwppbXBvcnQgamF2YXguam1zLkNvbm5lY3Rpb25GYWN0b3J5OwppbXBv\ncnQgamF2YXguam1zLkRlbGl2ZXJ5TW9kZTsKaW1wb3J0IGphdmF4Lmptcy5E\nZXN0aW5hdGlvbjsKaW1wb3J0IGphdmF4Lmptcy5KTVNFeGNlcHRpb247Cmlt\ncG9ydCBqYXZheC5qbXMuTWVzc2FnZUNvbnN1bWVyOwppbXBvcnQgamF2YXgu\nam1zLk1lc3NhZ2VQcm9kdWNlcjsKaW1wb3J0IGphdmF4Lmptcy5TZXJ2ZXJT\nZXNzaW9uUG9vbDsKaW1wb3J0IGphdmF4Lmptcy5TZXNzaW9uOwppbXBvcnQg\namF2YXguam1zLlRvcGljOwoKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmpt\ncy5zcGkuSGVkd2lnQ29ubmVjdGlvbkZhY3RvcnlJbXBsOwoKcHVibGljIGNs\nYXNzIEptc1Jlc291cmNlUHJvdmlkZXIgewoKICAgIHByaXZhdGUgYm9vbGVh\nbiB0cmFuc2FjdGVkOwogICAgcHJpdmF0ZSBpbnQgYWNrTW9kZSA9IFNlc3Np\nb24uQVVUT19BQ0tOT1dMRURHRTsKICAgIHByaXZhdGUgYm9vbGVhbiBpc1Rv\ncGljOwogICAgcHJpdmF0ZSBpbnQgZGVsaXZlcnlNb2RlID0gRGVsaXZlcnlN\nb2RlLlBFUlNJU1RFTlQ7CiAgICBwcml2YXRlIFN0cmluZyBkdXJhYmxlTmFt\nZSA9ICJEdW1teU5hbWUiOwogICAgcHJpdmF0ZSBTdHJpbmcgY2xpZW50SUQg\nPSBnZXRDbGFzcygpLmdldE5hbWUoKTsKCiAgICAvKioKICAgICAqIENyZWF0\nZXMgYSBjb25uZWN0aW9uIGZhY3RvcnkuCiAgICAgKgogICAgICogQHNlZSBv\ncmcuYXBhY2hlLmFjdGl2ZW1xLnRlc3QuSm1zUmVzb3VyY2VQcm92aWRlciNj\ncmVhdGVDb25uZWN0aW9uRmFjdG9yeSgpCiAgICAgKi8KICAgIHB1YmxpYyBD\nb25uZWN0aW9uRmFjdG9yeSBjcmVhdGVDb25uZWN0aW9uRmFjdG9yeSgpIHRo\ncm93cyBFeGNlcHRpb24gewogICAgICAgIHJldHVybiBuZXcgSGVkd2lnQ29u\nbmVjdGlvbkZhY3RvcnlJbXBsKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBD\ncmVhdGVzIGEgY29ubmVjdGlvbi4KICAgICAqCiAgICAgKiBAc2VlIG9yZy5h\ncGFjaGUuYWN0aXZlbXEudGVzdC5KbXNSZXNvdXJjZVByb3ZpZGVyI2NyZWF0\nZUNvbm5lY3Rpb24oamF2YXguam1zLkNvbm5lY3Rpb25GYWN0b3J5KQogICAg\nICovCiAgICBwdWJsaWMgQ29ubmVjdGlvbiBjcmVhdGVDb25uZWN0aW9uKENv\nbm5lY3Rpb25GYWN0b3J5IGNmKSB0aHJvd3MgSk1TRXhjZXB0aW9uIHsKICAg\nICAgICBDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSBjZi5jcmVhdGVDb25uZWN0\naW9uKCk7CiAgICAgICAgaWYgKGdldENsaWVudElEKCkgIT0gbnVsbCkgewog\nICAgICAgICAgICBjb25uZWN0aW9uLnNldENsaWVudElEKGdldENsaWVudElE\nKCkpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gY29ubmVjdGlvbjsKICAg\nIH0KCiAgICAvKioKICAgICAqIEBzZWUgb3JnLmFwYWNoZS5hY3RpdmVtcS50\nZXN0Lkptc1Jlc291cmNlUHJvdmlkZXIjY3JlYXRlU2Vzc2lvbihqYXZheC5q\nbXMuQ29ubmVjdGlvbikKICAgICAqLwogICAgcHVibGljIFNlc3Npb24gY3Jl\nYXRlU2Vzc2lvbihDb25uZWN0aW9uIGNvbm4pIHRocm93cyBKTVNFeGNlcHRp\nb24gewogICAgICAgIHJldHVybiBjb25uLmNyZWF0ZVNlc3Npb24odHJhbnNh\nY3RlZCwgYWNrTW9kZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAc2VlIG9y\nZy5hcGFjaGUuYWN0aXZlbXEudGVzdC5KbXNSZXNvdXJjZVByb3ZpZGVyI2Ny\nZWF0ZUNvbnN1bWVyKGphdmF4Lmptcy5TZXNzaW9uLAogICAgICogICAgICBq\nYXZheC5qbXMuRGVzdGluYXRpb24pCiAgICAgKi8KICAgIHB1YmxpYyBNZXNz\nYWdlQ29uc3VtZXIgY3JlYXRlQ29uc3VtZXIoU2Vzc2lvbiBzZXNzaW9uLCBE\nZXN0aW5hdGlvbiBkZXN0aW5hdGlvbikgdGhyb3dzIEpNU0V4Y2VwdGlvbiB7\nCiAgICAgICAgaWYgKGlzRHVyYWJsZVN1YnNjcmliZXIoKSkgewogICAgICAg\nICAgICByZXR1cm4gc2Vzc2lvbi5jcmVhdGVEdXJhYmxlU3Vic2NyaWJlcigo\nVG9waWMpZGVzdGluYXRpb24sIGR1cmFibGVOYW1lKTsKICAgICAgICB9CiAg\nICAgICAgcmV0dXJuIHNlc3Npb24uY3JlYXRlQ29uc3VtZXIoZGVzdGluYXRp\nb24pOwogICAgfQoKICAgIC8qKgogICAgICogQ3JlYXRlcyBhIGNvbm5lY3Rp\nb24gZm9yIGEgY29uc3VtZXIuCiAgICAgKgogICAgICogQHBhcmFtIHNzcCAt\nIFNlcnZlclNlc3Npb25Qb29sCiAgICAgKiBAcmV0dXJuIENvbm5lY3Rpb25D\nb25zdW1lcgogICAgICovCiAgICBwdWJsaWMgQ29ubmVjdGlvbkNvbnN1bWVy\nIGNyZWF0ZUNvbm5lY3Rpb25Db25zdW1lcihDb25uZWN0aW9uIGNvbm5lY3Rp\nb24sCiAgICAgICAgICAgIERlc3RpbmF0aW9uIGRlc3RpbmF0aW9uLCBTZXJ2\nZXJTZXNzaW9uUG9vbCBzc3ApIHRocm93cyBKTVNFeGNlcHRpb24gewogICAg\nICAgIHJldHVybiBjb25uZWN0aW9uLmNyZWF0ZUNvbm5lY3Rpb25Db25zdW1l\ncihkZXN0aW5hdGlvbiwgbnVsbCwgc3NwLCAxKTsKICAgIH0KCiAgICAvKioK\nICAgICAqIENyZWF0ZXMgYSBwcm9kdWNlci4KICAgICAqCiAgICAgKiBAc2Vl\nIG9yZy5hcGFjaGUuYWN0aXZlbXEudGVzdC5KbXNSZXNvdXJjZVByb3ZpZGVy\nI2NyZWF0ZVByb2R1Y2VyKGphdmF4Lmptcy5TZXNzaW9uLAogICAgICogICAg\nICBqYXZheC5qbXMuRGVzdGluYXRpb24pCiAgICAgKi8KICAgIHB1YmxpYyBN\nZXNzYWdlUHJvZHVjZXIgY3JlYXRlUHJvZHVjZXIoU2Vzc2lvbiBzZXNzaW9u\nLCBEZXN0aW5hdGlvbiBkZXN0aW5hdGlvbikgdGhyb3dzIEpNU0V4Y2VwdGlv\nbiB7CiAgICAgICAgTWVzc2FnZVByb2R1Y2VyIHByb2R1Y2VyID0gc2Vzc2lv\nbi5jcmVhdGVQcm9kdWNlcihkZXN0aW5hdGlvbik7CiAgICAgICAgcHJvZHVj\nZXIuc2V0RGVsaXZlcnlNb2RlKGRlbGl2ZXJ5TW9kZSk7CiAgICAgICAgcmV0\ndXJuIHByb2R1Y2VyOwogICAgfQoKICAgIC8qKgogICAgICogQ3JlYXRlcyBh\nIGRlc3RpbmF0aW9uLCB3aGljaCBjYW4gZWl0aGVyIGEgdG9waWMgb3IgYSBx\ndWV1ZS4KICAgICAqCiAgICAgKiBAc2VlIG9yZy5hcGFjaGUuYWN0aXZlbXEu\ndGVzdC5KbXNSZXNvdXJjZVByb3ZpZGVyI2NyZWF0ZURlc3RpbmF0aW9uKGph\ndmF4Lmptcy5TZXNzaW9uLAogICAgICogICAgICBqYXZhLmxhbmcuU3RyaW5n\nKQogICAgICovCiAgICBwdWJsaWMgRGVzdGluYXRpb24gY3JlYXRlRGVzdGlu\nYXRpb24oU2Vzc2lvbiBzZXNzaW9uLCBTdHJpbmcgbmFtZSkgdGhyb3dzIEpN\nU0V4Y2VwdGlvbiB7CiAgICAgICAgaWYgKGlzVG9waWMpIHsKICAgICAgICAg\nICAgcmV0dXJuIHNlc3Npb24uY3JlYXRlVG9waWMoIlRPUElDLiIgKyBuYW1l\nKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gc2Vzc2lv\nbi5jcmVhdGVUb3BpYygiUVVFVUUuIiArIG5hbWUpOwogICAgICAgIH0KICAg\nIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgc3Vic2Ny\naWJlciBpcyBkdXJhYmxlLgogICAgICoKICAgICAqIEByZXR1cm4gaXNEdXJh\nYmxlU3Vic2NyaWJlcgogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBpc0R1\ncmFibGVTdWJzY3JpYmVyKCkgewogICAgICAgIHJldHVybiBpc1RvcGljICYm\nIGR1cmFibGVOYW1lICE9IG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBS\nZXR1cm5zIHRoZSBhY2tub3dsZWRnZW1lbnQgbW9kZS4KICAgICAqCiAgICAg\nKiBAcmV0dXJuIFJldHVybnMgdGhlIGFja01vZGUuCiAgICAgKi8KICAgIHB1\nYmxpYyBpbnQgZ2V0QWNrTW9kZSgpIHsKICAgICAgICByZXR1cm4gYWNrTW9k\nZTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldHMgdGhlIGFjbmtub3dsZWRn\nZW1lbnQgbW9kZS4KICAgICAqCiAgICAgKiBAcGFyYW0gYWNrTW9kZSBUaGUg\nYWNrTW9kZSB0byBzZXQuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldEFj\na01vZGUoaW50IGFja01vZGUpIHsKICAgICAgICB0aGlzLmFja01vZGUgPSBh\nY2tNb2RlOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0cnVlIGlm\nIHRoZSBkZXN0aW5hdGlvbiBpcyBhIHRvcGljLCBmYWxzZSBpZiB0aGUgZGVz\ndGluYXRpb24gaXMgYQogICAgICogcXVldWUuCiAgICAgKgogICAgICogQHJl\ndHVybiBSZXR1cm5zIHRoZSBpc1RvcGljLgogICAgICovCiAgICBwdWJsaWMg\nYm9vbGVhbiBpc1RvcGljKCkgewogICAgICAgIHJldHVybiBpc1RvcGljOwog\nICAgfQoKICAgIC8qKgogICAgICogQHBhcmFtIGlzVG9waWMgVGhlIGlzVG9w\naWMgdG8gc2V0LgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRUb3BpYyhi\nb29sZWFuIGlzVG9waWMpIHsKICAgICAgICB0aGlzLmlzVG9waWMgPSBpc1Rv\ncGljOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRydWUgaWYgdGhl\nIHNlc3Npb24gaXMgdHJhbnNhY3RlZC4KICAgICAqCiAgICAgKiBAcmV0dXJu\nIFJldHVybnMgdGhlIHRyYW5zYWN0ZWQuCiAgICAgKi8KICAgIHB1YmxpYyBi\nb29sZWFuIGlzVHJhbnNhY3RlZCgpIHsKICAgICAgICByZXR1cm4gdHJhbnNh\nY3RlZDsKICAgIH0KCiAgICAvKioKICAgICAqIFNldHMgdGhlIHNlc3Npb24g\ndG8gYmUgdHJhbnNhY3RlZC4KICAgICAqCiAgICAgKiBAcGFyYW0gdHJhbnNh\nY3RlZAogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRUcmFuc2FjdGVkKGJv\nb2xlYW4gdHJhbnNhY3RlZCkgewogICAgICAgIHRoaXMudHJhbnNhY3RlZCA9\nIHRyYW5zYWN0ZWQ7CiAgICAgICAgaWYgKHRyYW5zYWN0ZWQpIHsKICAgICAg\nICAgICAgc2V0QWNrTW9kZShTZXNzaW9uLlNFU1NJT05fVFJBTlNBQ1RFRCk7\nCiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUg\nZGVsaXZlcnkgbW9kZS4KICAgICAqCiAgICAgKiBAcmV0dXJuIGRlbGl2ZXJ5\nTW9kZQogICAgICovCiAgICBwdWJsaWMgaW50IGdldERlbGl2ZXJ5TW9kZSgp\nIHsKICAgICAgICByZXR1cm4gZGVsaXZlcnlNb2RlOwogICAgfQoKICAgIC8q\nKgogICAgICogU2V0cyB0aGUgZGVsaXZlcnkgbW9kZS4KICAgICAqCiAgICAg\nKiBAcGFyYW0gZGVsaXZlcnlNb2RlCiAgICAgKi8KICAgIHB1YmxpYyB2b2lk\nIHNldERlbGl2ZXJ5TW9kZShpbnQgZGVsaXZlcnlNb2RlKSB7CiAgICAgICAg\ndGhpcy5kZWxpdmVyeU1vZGUgPSBkZWxpdmVyeU1vZGU7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBjbGllbnQgaWQuCiAgICAgKgogICAg\nICogQHJldHVybiBjbGllbnRJRAogICAgICovCiAgICBwdWJsaWMgU3RyaW5n\nIGdldENsaWVudElEKCkgewogICAgICAgIHJldHVybiBjbGllbnRJRDsKICAg\nIH0KCiAgICAvKioKICAgICAqIFNldHMgdGhlIGNsaWVudCBpZC4KICAgICAq\nCiAgICAgKiBAcGFyYW0gY2xpZW50SUQKICAgICAqLwogICAgcHVibGljIHZv\naWQgc2V0Q2xpZW50SUQoU3RyaW5nIGNsaWVudElEKSB7CiAgICAgICAgdGhp\ncy5jbGllbnRJRCA9IGNsaWVudElEOwogICAgfQoKICAgIC8qKgogICAgICog\nUmV0dXJucyB0aGUgZHVyYWJsZSBuYW1lIG9mIHRoZSBwcm92aWRlci4KICAg\nICAqCiAgICAgKiBAcmV0dXJuIGR1cmFibGVOYW1lCiAgICAgKi8KICAgIHB1\nYmxpYyBTdHJpbmcgZ2V0RHVyYWJsZU5hbWUoKSB7CiAgICAgICAgcmV0dXJu\nIGR1cmFibGVOYW1lOwogICAgfQoKICAgIC8qKgogICAgICogU2V0cyB0aGUg\nZHVyYWJsZSBuYW1lIG9mIHRoZSBwcm92aWRlci4KICAgICAqCiAgICAgKiBA\ncGFyYW0gZHVyYWJsZU5hbWUKICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0\nRHVyYWJsZU5hbWUoU3RyaW5nIGR1cmFibGVOYW1lKSB7CiAgICAgICAgdGhp\ncy5kdXJhYmxlTmFtZSA9IGR1cmFibGVOYW1lOwogICAgfQp9Cg==\n","encoding":"base64"}

