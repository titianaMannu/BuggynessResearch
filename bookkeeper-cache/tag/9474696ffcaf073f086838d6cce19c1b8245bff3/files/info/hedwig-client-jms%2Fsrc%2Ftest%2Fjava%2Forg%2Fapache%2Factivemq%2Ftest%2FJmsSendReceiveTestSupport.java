{"sha":"bc150df3461fffad145e0aba43c75f94c17a13a8","node_id":"MDQ6QmxvYjE1NzU5NTY6YmMxNTBkZjM0NjFmZmZhZDE0NWUwYWJhNDNjNzVmOTRjMTdhMTNhOA==","size":8915,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/bc150df3461fffad145e0aba43c75f94c17a13a8","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUgb3IgbW9yZQogKiBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlIGRpc3Ry\naWJ1dGVkIHdpdGgKICogdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLgogKiBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byBZb3UgdW5kZXIgdGhlIEFwYWNo\nZSBMaWNlbnNlLCBWZXJzaW9uIDIuMAogKiAodGhlICJMaWNlbnNlIik7IHlv\ndSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ug\nd2l0aAogKiB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBv\nZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hl\nLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWly\nZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcs\nIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlz\nIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQg\nV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIg\nZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRo\nZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5k\nCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFja2Fn\nZSBvcmcuYXBhY2hlLmFjdGl2ZW1xLnRlc3Q7CgppbXBvcnQgamF2YS51dGls\nLkFycmF5TGlzdDsKaW1wb3J0IGphdmEudXRpbC5BcnJheXM7CmltcG9ydCBq\nYXZhLnV0aWwuQ29sbGVjdGlvbnM7CmltcG9ydCBqYXZhLnV0aWwuRGF0ZTsK\naW1wb3J0IGphdmEudXRpbC5JdGVyYXRvcjsKaW1wb3J0IGphdmEudXRpbC5M\naXN0OwoKaW1wb3J0IGphdmF4Lmptcy5EZWxpdmVyeU1vZGU7CmltcG9ydCBq\nYXZheC5qbXMuRGVzdGluYXRpb247CmltcG9ydCBqYXZheC5qbXMuSk1TRXhj\nZXB0aW9uOwppbXBvcnQgamF2YXguam1zLk1lc3NhZ2U7CmltcG9ydCBqYXZh\neC5qbXMuTWVzc2FnZUNvbnN1bWVyOwppbXBvcnQgamF2YXguam1zLk1lc3Nh\nZ2VMaXN0ZW5lcjsKaW1wb3J0IGphdmF4Lmptcy5NZXNzYWdlUHJvZHVjZXI7\nCmltcG9ydCBqYXZheC5qbXMuU2Vzc2lvbjsKaW1wb3J0IGphdmF4Lmptcy5U\nZXh0TWVzc2FnZTsKCmltcG9ydCBqdW5pdC5mcmFtZXdvcmsuQXNzZXJ0aW9u\nRmFpbGVkRXJyb3I7CgppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuam1zLlNl\nc3Npb25JbXBsOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuam1zLnNwaS5I\nZWR3aWdDb25uZWN0aW9uSW1wbDsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXI7\nCmltcG9ydCBvcmcuc2xmNGouTG9nZ2VyRmFjdG9yeTsKCnB1YmxpYyBhYnN0\ncmFjdCBjbGFzcyBKbXNTZW5kUmVjZWl2ZVRlc3RTdXBwb3J0IGV4dGVuZHMg\nb3JnLmFwYWNoZS5hY3RpdmVtcS5UZXN0U3VwcG9ydCBpbXBsZW1lbnRzIE1l\nc3NhZ2VMaXN0ZW5lciB7CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2dn\nZXIgTE9HID0gTG9nZ2VyRmFjdG9yeS5nZXRMb2dnZXIoSm1zU2VuZFJlY2Vp\ndmVUZXN0U3VwcG9ydC5jbGFzcyk7CgogICAgcHJvdGVjdGVkIFN0cmluZ1td\nIGRhdGE7CiAgICBwcm90ZWN0ZWQgU2Vzc2lvbiBzZXNzaW9uOwogICAgcHJv\ndGVjdGVkIFNlc3Npb24gY29uc3VtZVNlc3Npb247CiAgICBwcm90ZWN0ZWQg\nTWVzc2FnZUNvbnN1bWVyIGNvbnN1bWVyOwogICAgcHJvdGVjdGVkIE1lc3Nh\nZ2VQcm9kdWNlciBwcm9kdWNlcjsKICAgIHByb3RlY3RlZCBEZXN0aW5hdGlv\nbiBjb25zdW1lckRlc3RpbmF0aW9uOwogICAgcHJvdGVjdGVkIERlc3RpbmF0\naW9uIHByb2R1Y2VyRGVzdGluYXRpb247CiAgICBwcm90ZWN0ZWQgTGlzdDxN\nZXNzYWdlPiBtZXNzYWdlcyA9IGNyZWF0ZUNvbmN1cnJlbnRMaXN0KCk7CiAg\nICBwcm90ZWN0ZWQgYm9vbGVhbiBkdXJhYmxlID0gdHJ1ZTsKICAgIHByb3Rl\nY3RlZCBpbnQgZGVsaXZlcnlNb2RlID0gRGVsaXZlcnlNb2RlLlBFUlNJU1RF\nTlQ7CiAgICBwcm90ZWN0ZWQgZmluYWwgT2JqZWN0IGxvY2sgPSBuZXcgT2Jq\nZWN0KCk7CiAgICBwcm90ZWN0ZWQgYm9vbGVhbiB2ZXJib3NlOwogICAgcHJv\ndGVjdGVkIGJvb2xlYW4gdXNlU2VwYXJhdGVTZXNzaW9uOwogICAgcHJvdGVj\ndGVkIGJvb2xlYW4gbGFyZ2VNZXNzYWdlczsKICAgIHByb3RlY3RlZCBpbnQg\nbGFyZ2VNZXNzYWdlTG9vcFNpemUgPSA0ICogMTAyNDsKCiAgICBwcm90ZWN0\nZWQgaW50IG1lc3NhZ2VDb3VudERlZjsKCiAgICAvKgogICAgICogQHNlZSBq\ndW5pdC5mcmFtZXdvcmsuVGVzdENhc2Ujc2V0VXAoKQogICAgICovCiAgICBw\ncm90ZWN0ZWQgdm9pZCBzZXRVcCgpIHRocm93cyBFeGNlcHRpb24gewogICAg\nICAgIHN1cGVyLnNldFVwKCk7CiAgICAgICAgbWVzc2FnZUNvdW50RGVmID0g\nMTAwOwogICAgICAgIHsKICAgICAgICAgICAgaW50IHRlbXAgPSBJbnRlZ2Vy\nLmdldEludGVnZXIoIm1lc3NhZ2VDb3VudCIsIC0xKTsKCiAgICAgICAgICAg\nIGlmICh0ZW1wID4gMCkgewogICAgICAgICAgICAgICAgbWVzc2FnZUNvdW50\nRGVmID0gdGVtcDsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAg\naW5pdGlhbGl6ZURhdGEobWVzc2FnZUNvdW50RGVmKTsKICAgIH0KCiAgICBw\ncm90ZWN0ZWQgdm9pZCBpbml0aWFsaXplRGF0YShpbnQgbWVzc2FnZUNvdW50\nKSB7CiAgICAgICAgTE9HLmluZm8oIk1lc3NhZ2UgY291bnQgZm9yIHRlc3Qg\nY2FzZSBpczogIiArIG1lc3NhZ2VDb3VudCk7CiAgICAgICAgZGF0YSA9IG5l\ndyBTdHJpbmdbbWVzc2FnZUNvdW50XTsKICAgICAgICBmb3IgKGludCBpID0g\nMDsgaSA8IG1lc3NhZ2VDb3VudDsgaSsrKSB7CiAgICAgICAgICAgIGRhdGFb\naV0gPSBjcmVhdGVNZXNzYWdlVGV4dChpKTsKICAgICAgICB9CiAgICB9CgoK\nICAgIHByb3RlY3RlZCB2b2lkIGluaXRpYWxpemVEYXRhKEhlZHdpZ0Nvbm5l\nY3Rpb25JbXBsIGNvbm5lY3Rpb24sIFNlc3Npb25JbXBsIHNlc3Npb24pIHsK\nICAgICAgICBpbnQgbWVzc2FnZUNvdW50ID0gMTAwOwogICAgICAgIGlmIChz\nZXNzaW9uLmdldFRyYW5zYWN0ZWQoKSB8fCBTZXNzaW9uLkNMSUVOVF9BQ0tO\nT1dMRURHRSA9PSBzZXNzaW9uLmdldEFja25vd2xlZGdlTW9kZSgpKXsKICAg\nICAgICAgICAgbWVzc2FnZUNvdW50ID0gY29ubmVjdGlvbi5nZXRIZWR3aWdD\nbGllbnRDb25maWcoKS5nZXRNYXhpbXVtT3V0c3RhbmRpbmdNZXNzYWdlcygp\nIC0gMTsKICAgICAgICB9CgogICAgICAgIGluaXRpYWxpemVEYXRhKG1lc3Nh\nZ2VDb3VudCk7CiAgICB9CgogICAgcHJvdGVjdGVkIFN0cmluZyBjcmVhdGVN\nZXNzYWdlVGV4dChpbnQgaSkgewogICAgICAgIGlmIChsYXJnZU1lc3NhZ2Vz\nKSB7CiAgICAgICAgICAgIHJldHVybiBjcmVhdGVNZXNzYWdlQm9keVRleHQo\nKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gIlRleHQg\nZm9yIG1lc3NhZ2U6ICIgKyBpICsgIiBhdCAiICsgbmV3IERhdGUoKTsKICAg\nICAgICB9CiAgICB9CgogICAgcHJvdGVjdGVkIFN0cmluZyBjcmVhdGVNZXNz\nYWdlQm9keVRleHQoKSB7CiAgICAgICAgU3RyaW5nQnVmZmVyIGJ1ZmZlciA9\nIG5ldyBTdHJpbmdCdWZmZXIoKTsKICAgICAgICBmb3IgKGludCBpID0gMDsg\naSA8IGxhcmdlTWVzc2FnZUxvb3BTaXplOyBpKyspIHsKICAgICAgICAgICAg\nYnVmZmVyLmFwcGVuZCgiMDEyMzQ1Njc4OSIpOwogICAgICAgIH0KICAgICAg\nICByZXR1cm4gYnVmZmVyLnRvU3RyaW5nKCk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBUZXN0IGlmIGFsbCB0aGUgbWVzc2FnZXMgc2VudCBhcmUgYmVpbmcg\ncmVjZWl2ZWQuCiAgICAgKgogICAgICogQHRocm93cyBFeGNlcHRpb24KICAg\nICAqLwogICAgcHVibGljIHZvaWQgdGVzdFNlbmRSZWNlaXZlKCkgdGhyb3dz\nIEV4Y2VwdGlvbiB7CiAgICAgICAgaW5pdGlhbGl6ZURhdGEoKEhlZHdpZ0Nv\nbm5lY3Rpb25JbXBsKSAoKFNlc3Npb25JbXBsKXNlc3Npb24pLmdldENvbm5l\nY3Rpb24oKSwgKFNlc3Npb25JbXBsKSBzZXNzaW9uKTsKICAgICAgICBUaHJl\nYWQuc2xlZXAoMTAwMCk7CiAgICAgICAgbWVzc2FnZXMuY2xlYXIoKTsKICAg\nICAgICBMT0cuaW5mbygiY2xlYXJlZCBtZXNzYWdlcywgbm93IHNlbmRpbmcg\ndGhlIG1lc3NhZ2VzIik7CgogICAgICAgIHNlbmRNZXNzYWdlcygpOwoKICAg\nICAgICBhc3NlcnRNZXNzYWdlc0FyZVJlY2VpdmVkKCk7CiAgICAgICAgTE9H\nLmluZm8oIiIgKyBkYXRhLmxlbmd0aCArICIgbWVzc2FnZXMocykgcmVjZWl2\nZWQsIGNsb3NpbmcgZG93biBjb25uZWN0aW9ucyIpOwogICAgfQoKICAgIHBy\nb3RlY3RlZCB2b2lkIHNlbmRNZXNzYWdlcygpIHRocm93cyBFeGNlcHRpb24g\newogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkr\nKykgewogICAgICAgICAgICBNZXNzYWdlIG1lc3NhZ2UgPSBjcmVhdGVNZXNz\nYWdlKGkpOwogICAgICAgICAgICBjb25maWd1cmVNZXNzYWdlKG1lc3NhZ2Up\nOwogICAgICAgICAgICBpZiAodmVyYm9zZSkgewogICAgICAgICAgICAgICAg\nTE9HLmluZm8oIkFib3V0IHRvIHNlbmQgYSBtZXNzYWdlOiAiICsgbWVzc2Fn\nZSArICIgd2l0aCB0ZXh0OiAiICsgZGF0YVtpXSk7CiAgICAgICAgICAgIH0K\nICAgICAgICAgICAgc2VuZE1lc3NhZ2UoaSwgbWVzc2FnZSk7CiAgICAgICAg\nfQogICAgICAgIExPRy5pbmZvKCJTZW50ICIgKyBkYXRhLmxlbmd0aCArICIg\nbWVzc2FnZXMgdG8gIiArIHByb2R1Y2VyRGVzdGluYXRpb24pOwogICAgfQoK\nICAgIHByb3RlY3RlZCB2b2lkIHNlbmRNZXNzYWdlKGludCBpbmRleCwgTWVz\nc2FnZSBtZXNzYWdlKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBwcm9k\ndWNlci5zZW5kKHByb2R1Y2VyRGVzdGluYXRpb24sIG1lc3NhZ2UpOwogICAg\nfQoKICAgIHByb3RlY3RlZCBNZXNzYWdlIGNyZWF0ZU1lc3NhZ2UoaW50IGlu\nZGV4KSB0aHJvd3MgSk1TRXhjZXB0aW9uIHsKICAgICAgICBNZXNzYWdlIG1l\nc3NhZ2UgPSBzZXNzaW9uLmNyZWF0ZVRleHRNZXNzYWdlKGRhdGFbaW5kZXhd\nKTsKICAgICAgICByZXR1cm4gbWVzc2FnZTsKICAgIH0KCiAgICAvKioKICAg\nICAqIEEgaG9vayB0byBhbGxvdyB0aGUgbWVzc2FnZSB0byBiZSBjb25maWd1\ncmVkIHN1Y2ggYXMgYWRkaW5nIGV4dHJhIGhlYWRlcnMKICAgICAqCiAgICAg\nKiBAdGhyb3dzIEpNU0V4Y2VwdGlvbgogICAgICovCiAgICBwcm90ZWN0ZWQg\ndm9pZCBjb25maWd1cmVNZXNzYWdlKE1lc3NhZ2UgbWVzc2FnZSkgdGhyb3dz\nIEpNU0V4Y2VwdGlvbiB7CiAgICB9CgogICAgLyoqCiAgICAgKiBXYWl0cyB0\nbyByZWNlaXZlIHRoZSBtZXNzYWdlcyBhbmQgcGVyZm9ybXMgdGhlIHRlc3Qg\naWYgYWxsIG1lc3NhZ2VzIGhhdmUKICAgICAqIGJlZW4gcmVjZWl2ZWQgYW5k\nIGFyZSBpbiBzZXF1ZW50aWFsIG9yZGVyLgogICAgICoKICAgICAqIEB0aHJv\nd3MgSk1TRXhjZXB0aW9uCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIGFz\nc2VydE1lc3NhZ2VzQXJlUmVjZWl2ZWQoKSB0aHJvd3MgSk1TRXhjZXB0aW9u\nIHsKICAgICAgICB3YWl0Rm9yTWVzc2FnZXNUb0JlRGVsaXZlcmVkKCk7CiAg\nICAgICAgYXNzZXJ0TWVzc2FnZXNSZWNlaXZlZEFyZVZhbGlkKG1lc3NhZ2Vz\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRlc3RzIGlmIHRoZSBtZXNzYWdl\ncyBoYXZlIGFsbCBiZWVuIHJlY2VpdmVkIGFuZCBhcmUgaW4gc2VxdWVudGlh\nbCBvcmRlci4KICAgICAqCiAgICAgKiBAcGFyYW0gcmVjZWl2ZWRNZXNzYWdl\ncwogICAgICogQHRocm93cyBKTVNFeGNlcHRpb24KICAgICAqLwogICAgcHJv\ndGVjdGVkIHZvaWQgYXNzZXJ0TWVzc2FnZXNSZWNlaXZlZEFyZVZhbGlkKExp\nc3Q8TWVzc2FnZT4gcmVjZWl2ZWRNZXNzYWdlcykgdGhyb3dzIEpNU0V4Y2Vw\ndGlvbiB7CiAgICAgICAgTGlzdDxPYmplY3Q+IGNvcHlPZk1lc3NhZ2VzID0g\nQXJyYXlzLmFzTGlzdChyZWNlaXZlZE1lc3NhZ2VzLnRvQXJyYXkoKSk7CiAg\nICAgICAgaW50IGNvdW50ZXIgPSAwOwoKICAgICAgICBpZiAoZGF0YS5sZW5n\ndGggIT0gY29weU9mTWVzc2FnZXMuc2l6ZSgpKSB7CiAgICAgICAgICAgIGZv\nciAoSXRlcmF0b3I8T2JqZWN0PiBpdGVyID0gY29weU9mTWVzc2FnZXMuaXRl\ncmF0b3IoKTsgaXRlci5oYXNOZXh0KCk7KSB7CiAgICAgICAgICAgICAgICBP\nYmplY3QgbWVzc2FnZSA9IGl0ZXIubmV4dCgpOwogICAgICAgICAgICAgICAg\nTE9HLmluZm8oIjw9PSAiICsgY291bnRlcisrICsgIiA9ICIgKyBtZXNzYWdl\nKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgYXNzZXJ0RXF1\nYWxzKCJJbnZhbGlkIG51bWJlciBvZiBtZXNzYWdlcyByZWNlaXZlZCIsIGRh\ndGEubGVuZ3RoLCByZWNlaXZlZE1lc3NhZ2VzLnNpemUoKSk7CgogICAgICAg\nIGZvciAoaW50IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykgewogICAg\nICAgICAgICBNZXNzYWdlIHJlY2VpdmVkID0gcmVjZWl2ZWRNZXNzYWdlcy5n\nZXQoaSk7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBhc3Nl\ncnRNZXNzYWdlVmFsaWQoaSwgcmVjZWl2ZWQpOwogICAgICAgICAgICB9IGNh\ndGNoIChBc3NlcnRpb25GYWlsZWRFcnJvciBlKSB7CiAgICAgICAgICAgICAg\nICBmb3IgKGludCBqID0gMDsgaiA8IGRhdGEubGVuZ3RoOyBqKyspIHsKICAg\nICAgICAgICAgICAgICAgICBNZXNzYWdlIG0gPSByZWNlaXZlZE1lc3NhZ2Vz\nLmdldChqKTsKICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50\nbG4oaisiID0+ICIrbS5nZXRKTVNNZXNzYWdlSUQoKSk7CiAgICAgICAgICAg\nICAgICB9CiAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICB9\nCiAgICAgICAgfQogICAgfQoKICAgIHByb3RlY3RlZCB2b2lkIGFzc2VydE1l\nc3NhZ2VWYWxpZChpbnQgaW5kZXgsIE1lc3NhZ2UgbWVzc2FnZSkgdGhyb3dz\nIEpNU0V4Y2VwdGlvbiB7CiAgICAgICAgVGV4dE1lc3NhZ2UgdGV4dE1lc3Nh\nZ2UgPSAoVGV4dE1lc3NhZ2UpbWVzc2FnZTsKICAgICAgICBTdHJpbmcgdGV4\ndCA9IHRleHRNZXNzYWdlLmdldFRleHQoKTsKCiAgICAgICAgaWYgKHZlcmJv\nc2UpIHsKICAgICAgICAgICAgTE9HLmluZm8oIlJlY2VpdmVkIFRleHQ6ICIg\nKyB0ZXh0KTsKICAgICAgICB9CgogICAgICAgIGFzc2VydEVxdWFscygiTWVz\nc2FnZTogIiArIGluZGV4LCBkYXRhW2luZGV4XSwgdGV4dCk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBXYWl0cyBmb3IgdGhlIG1lc3NhZ2VzIHRvIGJlIGRl\nbGl2ZXJlZCBvciB3aGVuIHRoZSB3YWl0IHRpbWUgaGFzIGJlZW4KICAgICAq\nIHJlYWNoZWQuCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIHdhaXRGb3JN\nZXNzYWdlc1RvQmVEZWxpdmVyZWQoKSB7CiAgICAgICAgZmluYWwgbG9uZyBt\nYXhXYWl0VGltZSA9IDIwMDAwOwogICAgICAgIGZpbmFsIGxvbmcgc3RhcnQg\nPSBTeXN0ZW0uY3VycmVudFRpbWVNaWxsaXMoKTsKICAgICAgICBsb25nIHdh\naXRUaW1lID0gbWF4V2FpdFRpbWU7CgogICAgICAgIHN5bmNocm9uaXplZCAo\nbG9jaykgewogICAgICAgICAgICB3aGlsZSAobWVzc2FnZXMuc2l6ZSgpIDwg\nZGF0YS5sZW5ndGggJiYgd2FpdFRpbWUgPj0gMCkgewogICAgICAgICAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBsb2NrLndhaXQoMjAwKTsK\nICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEludGVycnVwdGVkRXhjZXB0aW9u\nIGUpIHsKICAgICAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgp\nOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHdhaXRUaW1l\nID0gbWF4V2FpdFRpbWUgLSAoU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCkg\nLSBzdGFydCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAg\nLyoqCiAgICAgKiBAc2VlIGphdmF4Lmptcy5NZXNzYWdlTGlzdGVuZXIjb25N\nZXNzYWdlKGphdmF4Lmptcy5NZXNzYWdlKQogICAgICovCiAgICBwdWJsaWMg\ndm9pZCBvbk1lc3NhZ2UoTWVzc2FnZSBtZXNzYWdlKSB7CiAgICAgICAgY29u\nc3VtZU1lc3NhZ2UobWVzc2FnZSwgbWVzc2FnZXMpOwogICAgfQoKICAgIC8q\nKgogICAgICogQ29uc3VtZXMgYSByZWNlaXZlZCBtZXNzYWdlLgogICAgICoK\nICAgICAqIEBwYXJhbSBtZXNzYWdlIC0gYSBuZXdseSByZWNlaXZlZCBtZXNz\nYWdlLgogICAgICogQHBhcmFtIG1lc3NhZ2VMaXN0IC0gbGlzdCBjb250YWlu\naW5nIHRoZSByZWNlaXZlZCBtZXNzYWdlcy4KICAgICAqLwogICAgcHJvdGVj\ndGVkIHZvaWQgY29uc3VtZU1lc3NhZ2UoTWVzc2FnZSBtZXNzYWdlLCBMaXN0\nPE1lc3NhZ2U+IG1lc3NhZ2VMaXN0KSB7CiAgICAgICAgaWYgKHZlcmJvc2Up\nIHsKICAgICAgICAgICAgTE9HLmluZm8oIlJlY2VpdmVkIG1lc3NhZ2U6ICIg\nKyBtZXNzYWdlKTsKICAgICAgICB9CgogICAgICAgIG1lc3NhZ2VMaXN0LmFk\nZChtZXNzYWdlKTsKCiAgICAgICAgaWYgKG1lc3NhZ2VMaXN0LnNpemUoKSA+\nPSBkYXRhLmxlbmd0aCkgewogICAgICAgICAgICBzeW5jaHJvbml6ZWQgKGxv\nY2spIHsKICAgICAgICAgICAgICAgIGxvY2subm90aWZ5QWxsKCk7CiAgICAg\nICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVh\ndGVzIGEgc3luY2hyb25pemVkIGxpc3QuCiAgICAgKgogICAgICogQHJldHVy\nbiBhIHN5bmNocm9uaXplZCB2aWV3IG9mIHRoZSBzcGVjaWZpZWQgbGlzdC4K\nICAgICAqLwogICAgcHJvdGVjdGVkIExpc3Q8TWVzc2FnZT4gY3JlYXRlQ29u\nY3VycmVudExpc3QoKSB7CiAgICAgICAgcmV0dXJuIENvbGxlY3Rpb25zLnN5\nbmNocm9uaXplZExpc3QobmV3IEFycmF5TGlzdDxNZXNzYWdlPigpKTsKICAg\nIH0KfQo=\n","encoding":"base64"}

