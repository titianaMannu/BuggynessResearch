{"sha":"0fcde3394ec03d8ddecf0f0b738d2b674ca76bde","node_id":"MDQ6QmxvYjE1NzU5NTY6MGZjZGUzMzk0ZWMwM2Q4ZGRlY2YwZjBiNzM4ZDJiNjc0Y2E3NmJkZQ==","size":4099,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/0fcde3394ec03d8ddecf0f0b738d2b674ca76bde","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUgb3IgbW9yZQogKiBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlIGRpc3Ry\naWJ1dGVkIHdpdGgKICogdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLgogKiBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byBZb3UgdW5kZXIgdGhlIEFwYWNo\nZSBMaWNlbnNlLCBWZXJzaW9uIDIuMAogKiAodGhlICJMaWNlbnNlIik7IHlv\ndSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ug\nd2l0aAogKiB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBv\nZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hl\nLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWly\nZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcs\nIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlz\nIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQg\nV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIg\nZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRo\nZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5k\nCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFja2Fn\nZSBvcmcuYXBhY2hlLmFjdGl2ZW1xLnRlc3Q7CgppbXBvcnQgamF2YXguam1z\nLkNvbm5lY3Rpb247CmltcG9ydCBqYXZheC5qbXMuRGVsaXZlcnlNb2RlOwpp\nbXBvcnQgamF2YXguam1zLkpNU0V4Y2VwdGlvbjsKaW1wb3J0IGphdmF4Lmpt\ncy5NZXNzYWdlQ29uc3VtZXI7CmltcG9ydCBqYXZheC5qbXMuU2Vzc2lvbjsK\naW1wb3J0IGphdmF4Lmptcy5Ub3BpYzsKCmltcG9ydCBvcmcuYXBhY2hlLmhl\nZHdpZy5qbXMuU2Vzc2lvbkltcGw7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdp\nZy5qbXMuc3BpLkhlZHdpZ0Nvbm5lY3Rpb25JbXBsOwppbXBvcnQgb3JnLnNs\nZjRqLkxvZ2dlcjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJGYWN0b3J5OwoK\ncHVibGljIGNsYXNzIEptc1RvcGljU2VuZFJlY2VpdmVUZXN0IGV4dGVuZHMg\nSm1zU2VuZFJlY2VpdmVUZXN0U3VwcG9ydCB7CiAgICBwcml2YXRlIHN0YXRp\nYyBmaW5hbCBMb2dnZXIgTE9HID0gTG9nZ2VyRmFjdG9yeS5nZXRMb2dnZXIo\nSm1zVG9waWNTZW5kUmVjZWl2ZVRlc3QuY2xhc3MpOwoKICAgIHByb3RlY3Rl\nZCBDb25uZWN0aW9uIGNvbm5lY3Rpb247CgogICAgcHJvdGVjdGVkIHZvaWQg\nc2V0VXAoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBzdXBlci5zZXRV\ncCgpOwoKICAgICAgICBjb25uZWN0aW9uRmFjdG9yeSA9IGNyZWF0ZUNvbm5l\nY3Rpb25GYWN0b3J5KCk7CiAgICAgICAgY29ubmVjdGlvbiA9IGNyZWF0ZUNv\nbm5lY3Rpb24oIWR1cmFibGUpOwogICAgICAgIGlmIChkdXJhYmxlKSB7CiAg\nICAgICAgICAgIGNvbm5lY3Rpb24uc2V0Q2xpZW50SUQoZ2V0Q2xhc3MoKS5n\nZXROYW1lKCkpOwogICAgICAgIH0KCiAgICAgICAgTE9HLmluZm8oIkNyZWF0\nZWQgY29ubmVjdGlvbjogIiArIGNvbm5lY3Rpb24pOwoKICAgICAgICBzZXNz\naW9uID0gY29ubmVjdGlvbi5jcmVhdGVTZXNzaW9uKGZhbHNlLCBTZXNzaW9u\nLkFVVE9fQUNLTk9XTEVER0UpOwogICAgICAgIGNvbnN1bWVTZXNzaW9uID0g\nY3JlYXRlQ29uc3VtZXJTZXNzaW9uKCk7CgogICAgICAgIExPRy5pbmZvKCJD\ncmVhdGVkIHNlc3Npb246ICIgKyBzZXNzaW9uKTsKICAgICAgICBMT0cuaW5m\nbygiQ3JlYXRlZCBjb25zdW1lU2Vzc2lvbjogIiArIGNvbnN1bWVTZXNzaW9u\nKTsKICAgICAgICBwcm9kdWNlciA9IHNlc3Npb24uY3JlYXRlUHJvZHVjZXIo\nbnVsbCk7CiAgICAgICAgcHJvZHVjZXIuc2V0RGVsaXZlcnlNb2RlKGRlbGl2\nZXJ5TW9kZSk7CgogICAgICAgIExPRy5pbmZvKCJDcmVhdGVkIHByb2R1Y2Vy\nOiAiICsgcHJvZHVjZXIgKyAiIGRlbGl2ZXJ5IG1vZGUgPSAiCiAgICAgICAg\nICAgICAgICAgKyAoZGVsaXZlcnlNb2RlID09IERlbGl2ZXJ5TW9kZS5QRVJT\nSVNURU5UID8gIlBFUlNJU1RFTlQiIDogIk5PTl9QRVJTSVNURU5UIikpOwoK\nICAgICAgICBjb25zdW1lckRlc3RpbmF0aW9uID0gc2Vzc2lvbi5jcmVhdGVU\nb3BpYyhnZXRDb25zdW1lclN1YmplY3QoKSk7CiAgICAgICAgcHJvZHVjZXJE\nZXN0aW5hdGlvbiA9IHNlc3Npb24uY3JlYXRlVG9waWMoZ2V0UHJvZHVjZXJT\ndWJqZWN0KCkpOwoKICAgICAgICBMT0cuaW5mbygiQ3JlYXRlZCAgY29uc3Vt\nZXIgZGVzdGluYXRpb246ICIgKyBjb25zdW1lckRlc3RpbmF0aW9uCiAgICAg\nICAgICAgICAgICAgKyAiIG9mIHR5cGU6ICIgKyBjb25zdW1lckRlc3RpbmF0\naW9uLmdldENsYXNzKCkpOwogICAgICAgIExPRy5pbmZvKCJDcmVhdGVkICBw\ncm9kdWNlciBkZXN0aW5hdGlvbjogIiArIHByb2R1Y2VyRGVzdGluYXRpb24K\nICAgICAgICAgICAgICAgICArICIgb2YgdHlwZTogIiArIHByb2R1Y2VyRGVz\ndGluYXRpb24uZ2V0Q2xhc3MoKSk7CiAgICAgICAgY29uc3VtZXIgPSBjcmVh\ndGVDb25zdW1lcigpOwogICAgICAgIGNvbnN1bWVyLnNldE1lc3NhZ2VMaXN0\nZW5lcih0aGlzKTsKICAgICAgICBzdGFydENvbm5lY3Rpb24oKTsKCiAgICAg\nICAgTE9HLmluZm8oIkNyZWF0ZWQgY29ubmVjdGlvbjogIiArIGNvbm5lY3Rp\nb24pOwogICAgfQoKICAgIHByb3RlY3RlZCB2b2lkIHN0YXJ0Q29ubmVjdGlv\nbigpIHRocm93cyBKTVNFeGNlcHRpb24gewogICAgICAgIGNvbm5lY3Rpb24u\nc3RhcnQoKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCB0ZWFyRG93bigp\nIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIExPRy5pbmZvKCJEdW1waW5n\nIHN0YXRzLi4uIik7CiAgICAgICAgLy8gVE9ETwogICAgICAgIC8vIGNvbm5l\nY3Rpb25GYWN0b3J5LmdldEZhY3RvcnlTdGF0cygpLmR1bXAobmV3IEluZGVu\ndFByaW50ZXIoKSk7CgogICAgICAgIExPRy5pbmZvKCJDbG9zaW5nIGRvd24g\nY29ubmVjdGlvbiIpOwoKICAgICAgICAvKiogVE9ETyB3ZSBzaG91bGQgYmUg\nYWJsZSB0byBzaHV0IGRvd24gcHJvcGVybHkgKi8KICAgICAgICBzZXNzaW9u\nLmNsb3NlKCk7CiAgICAgICAgY29ubmVjdGlvbi5jbG9zZSgpOwogICAgICAg\nIHN1cGVyLnRlYXJEb3duKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVh\ndGVzIGEgc2Vzc2lvbi4KICAgICAqCiAgICAgKiBAcmV0dXJuIHNlc3Npb24K\nICAgICAqIEB0aHJvd3MgSk1TRXhjZXB0aW9uCiAgICAgKi8KICAgIHByb3Rl\nY3RlZCBTZXNzaW9uIGNyZWF0ZUNvbnN1bWVyU2Vzc2lvbigpIHRocm93cyBK\nTVNFeGNlcHRpb24gewogICAgICAgIGlmICh1c2VTZXBhcmF0ZVNlc3Npb24p\nIHsKICAgICAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb24uY3JlYXRlU2Vzc2lv\nbihmYWxzZSwgU2Vzc2lvbi5BVVRPX0FDS05PV0xFREdFKTsKICAgICAgICB9\nIGVsc2UgewogICAgICAgICAgICByZXR1cm4gc2Vzc2lvbjsKICAgICAgICB9\nCiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGVzIGEgZHVyYWJsZSBzdXNj\ncmliZXIgb3IgYSBjb25zdW1lci4KICAgICAqCiAgICAgKiBAcmV0dXJuIE1l\nc3NhZ2VDb25zdW1lciAtIGR1cmFibGUgc3VzY3JpYmVyIG9yIGNvbnN1bWVy\nLgogICAgICogQHRocm93cyBKTVNFeGNlcHRpb24KICAgICAqLwogICAgcHJv\ndGVjdGVkIE1lc3NhZ2VDb25zdW1lciBjcmVhdGVDb25zdW1lcigpIHRocm93\ncyBKTVNFeGNlcHRpb24gewogICAgICAgIGlmIChkdXJhYmxlKSB7CiAgICAg\nICAgICAgIExPRy5pbmZvKCJDcmVhdGluZyBkdXJhYmxlIGNvbnN1bWVyIik7\nCiAgICAgICAgICAgIHJldHVybiBjb25zdW1lU2Vzc2lvbi5jcmVhdGVEdXJh\nYmxlU3Vic2NyaWJlcigoVG9waWMpY29uc3VtZXJEZXN0aW5hdGlvbiwgZ2V0\nTmFtZSgpKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGNvbnN1bWVTZXNz\naW9uLmNyZWF0ZUNvbnN1bWVyKGNvbnN1bWVyRGVzdGluYXRpb24pOwogICAg\nfQp9Cg==\n","encoding":"base64"}

