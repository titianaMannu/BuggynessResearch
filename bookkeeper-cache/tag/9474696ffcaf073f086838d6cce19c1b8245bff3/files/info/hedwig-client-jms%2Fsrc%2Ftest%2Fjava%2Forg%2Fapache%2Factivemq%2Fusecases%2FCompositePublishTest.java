{"sha":"7833e019c3720720a65ef6aad4e58757ce767044","node_id":"MDQ6QmxvYjE1NzU5NTY6NzgzM2UwMTljMzcyMDcyMGE2NWVmNmFhZDRlNTg3NTdjZTc2NzA0NA==","size":5277,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/7833e019c3720720a65ef6aad4e58757ce767044","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUgb3IgbW9yZQogKiBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlIGRpc3Ry\naWJ1dGVkIHdpdGgKICogdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLgogKiBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byBZb3UgdW5kZXIgdGhlIEFwYWNo\nZSBMaWNlbnNlLCBWZXJzaW9uIDIuMAogKiAodGhlICJMaWNlbnNlIik7IHlv\ndSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ug\nd2l0aAogKiB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBv\nZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hl\nLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWly\nZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcs\nIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlz\nIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQg\nV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIg\nZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRo\nZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5k\nCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFja2Fn\nZSBvcmcuYXBhY2hlLmFjdGl2ZW1xLnVzZWNhc2VzOwoKaW1wb3J0IGphdmEu\ndXRpbC5MaXN0OwoKaW1wb3J0IGphdmF4Lmptcy5Db25uZWN0aW9uOwppbXBv\ncnQgamF2YXguam1zLkRlc3RpbmF0aW9uOwppbXBvcnQgamF2YXguam1zLkpN\nU0V4Y2VwdGlvbjsKaW1wb3J0IGphdmF4Lmptcy5NZXNzYWdlOwppbXBvcnQg\namF2YXguam1zLk1lc3NhZ2VDb25zdW1lcjsKaW1wb3J0IGphdmF4Lmptcy5N\nZXNzYWdlTGlzdGVuZXI7CmltcG9ydCBqYXZheC5qbXMuU2Vzc2lvbjsKCmlt\ncG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5qbXMuU2Vzc2lvbkltcGw7CmltcG9y\ndCBvcmcuYXBhY2hlLmhlZHdpZy5qbXMuc3BpLkhlZHdpZ0Nvbm5lY3Rpb25G\nYWN0b3J5SW1wbDsKCmltcG9ydCBvcmcuYXBhY2hlLmFjdGl2ZW1xLnRlc3Qu\nSm1zU2VuZFJlY2VpdmVUZXN0U3VwcG9ydDsKaW1wb3J0IG9yZy5zbGY0ai5M\nb2dnZXI7CmltcG9ydCBvcmcuc2xmNGouTG9nZ2VyRmFjdG9yeTsKCnB1Ymxp\nYyBjbGFzcyBDb21wb3NpdGVQdWJsaXNoVGVzdCBleHRlbmRzIEptc1NlbmRS\nZWNlaXZlVGVzdFN1cHBvcnQgewogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwg\nTG9nZ2VyIExPRyA9IExvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKENvbXBvc2l0\nZVB1Ymxpc2hUZXN0LmNsYXNzKTsKCiAgICBwcm90ZWN0ZWQgQ29ubmVjdGlv\nbiBzZW5kQ29ubmVjdGlvbjsKICAgIHByb3RlY3RlZCBDb25uZWN0aW9uIHJl\nY2VpdmVDb25uZWN0aW9uOwogICAgcHJvdGVjdGVkIFNlc3Npb24gcmVjZWl2\nZVNlc3Npb247CiAgICBwcm90ZWN0ZWQgTWVzc2FnZUNvbnN1bWVyW10gY29u\nc3VtZXJzOwogICAgcHJvdGVjdGVkIExpc3RbXSBtZXNzYWdlTGlzdHM7Cgog\nICAgQFN1cHByZXNzV2FybmluZ3MoInVuY2hlY2tlZCIpCiAgICBwcm90ZWN0\nZWQgdm9pZCBzZXRVcCgpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIHN1\ncGVyLnNldFVwKCk7CgogICAgICAgIGNvbm5lY3Rpb25GYWN0b3J5ID0gY3Jl\nYXRlQ29ubmVjdGlvbkZhY3RvcnkoKTsKCiAgICAgICAgc2VuZENvbm5lY3Rp\nb24gPSBjcmVhdGVDb25uZWN0aW9uKGZhbHNlKTsKICAgICAgICBzZW5kQ29u\nbmVjdGlvbi5zdGFydCgpOwoKICAgICAgICByZWNlaXZlQ29ubmVjdGlvbiA9\nIGNyZWF0ZUNvbm5lY3Rpb24oZmFsc2UpOwogICAgICAgIHJlY2VpdmVDb25u\nZWN0aW9uLnN0YXJ0KCk7CgogICAgICAgIExPRy5pbmZvKCJDcmVhdGVkIHNl\nbmRDb25uZWN0aW9uOiAiICsgc2VuZENvbm5lY3Rpb24pOwogICAgICAgIExP\nRy5pbmZvKCJDcmVhdGVkIHJlY2VpdmVDb25uZWN0aW9uOiAiICsgcmVjZWl2\nZUNvbm5lY3Rpb24pOwoKICAgICAgICBzZXNzaW9uID0gc2VuZENvbm5lY3Rp\nb24uY3JlYXRlU2Vzc2lvbihmYWxzZSwgU2Vzc2lvbi5BVVRPX0FDS05PV0xF\nREdFKTsKICAgICAgICByZWNlaXZlU2Vzc2lvbiA9IHJlY2VpdmVDb25uZWN0\naW9uLmNyZWF0ZVNlc3Npb24oZmFsc2UsIFNlc3Npb24uQVVUT19BQ0tOT1dM\nRURHRSk7CgogICAgICAgIExPRy5pbmZvKCJDcmVhdGVkIHNlbmRTZXNzaW9u\nOiAiICsgc2Vzc2lvbik7CiAgICAgICAgTE9HLmluZm8oIkNyZWF0ZWQgcmVj\nZWl2ZVNlc3Npb246ICIgKyByZWNlaXZlU2Vzc2lvbik7CgogICAgICAgIHBy\nb2R1Y2VyID0gc2Vzc2lvbi5jcmVhdGVQcm9kdWNlcihudWxsKTsKCiAgICAg\nICAgTE9HLmluZm8oIkNyZWF0ZWQgcHJvZHVjZXI6ICIgKyBwcm9kdWNlcik7\nCgogICAgICAgIGNvbnN1bWVyRGVzdGluYXRpb24gPSBzZXNzaW9uLmNyZWF0\nZVRvcGljKGdldENvbnN1bWVyU3ViamVjdCgpKTsKICAgICAgICBwcm9kdWNl\nckRlc3RpbmF0aW9uID0gc2Vzc2lvbi5jcmVhdGVUb3BpYyhnZXRQcm9kdWNl\nclN1YmplY3QoKSk7CgogICAgICAgIExPRy5pbmZvKCJDcmVhdGVkICBjb25z\ndW1lciBkZXN0aW5hdGlvbjogIiArIGNvbnN1bWVyRGVzdGluYXRpb24KICAg\nICAgICAgICAgICAgICArICIgb2YgdHlwZTogIiArIGNvbnN1bWVyRGVzdGlu\nYXRpb24uZ2V0Q2xhc3MoKSk7CiAgICAgICAgTE9HLmluZm8oIkNyZWF0ZWQg\nIHByb2R1Y2VyIGRlc3RpbmF0aW9uOiAiICsgcHJvZHVjZXJEZXN0aW5hdGlv\nbgogICAgICAgICAgICAgICAgICsgIiBvZiB0eXBlOiAiICsgcHJvZHVjZXJE\nZXN0aW5hdGlvbi5nZXRDbGFzcygpKTsKCiAgICAgICAgRGVzdGluYXRpb25b\nXSBkZXN0aW5hdGlvbnMgPSBnZXREZXN0aW5hdGlvbnMoKTsKICAgICAgICBj\nb25zdW1lcnMgPSBuZXcgTWVzc2FnZUNvbnN1bWVyW2Rlc3RpbmF0aW9ucy5s\nZW5ndGhdOwogICAgICAgIG1lc3NhZ2VMaXN0cyA9IG5ldyBMaXN0W2Rlc3Rp\nbmF0aW9ucy5sZW5ndGhdOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwg\nZGVzdGluYXRpb25zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIERlc3Rp\nbmF0aW9uIGRlc3QgPSBkZXN0aW5hdGlvbnNbaV07CiAgICAgICAgICAgIG1l\nc3NhZ2VMaXN0c1tpXSA9IGNyZWF0ZUNvbmN1cnJlbnRMaXN0KCk7CiAgICAg\nICAgICAgIGNvbnN1bWVyc1tpXSA9IHJlY2VpdmVTZXNzaW9uLmNyZWF0ZUNv\nbnN1bWVyKGRlc3QpOwogICAgICAgICAgICBjb25zdW1lcnNbaV0uc2V0TWVz\nc2FnZUxpc3RlbmVyKGNyZWF0ZU1lc3NhZ2VMaXN0ZW5lcihpLCBtZXNzYWdl\nTGlzdHNbaV0pKTsKICAgICAgICB9CgogICAgICAgIExPRy5pbmZvKCJTdGFy\ndGVkIGNvbm5lY3Rpb25zIik7CiAgICB9CgogICAgcHJvdGVjdGVkIE1lc3Nh\nZ2VMaXN0ZW5lciBjcmVhdGVNZXNzYWdlTGlzdGVuZXIoaW50IGksIGZpbmFs\nIExpc3Q8TWVzc2FnZT4gbWVzc2FnZUxpc3QpIHsKICAgICAgICByZXR1cm4g\nbmV3IE1lc3NhZ2VMaXN0ZW5lcigpIHsKICAgICAgICAgICAgcHVibGljIHZv\naWQgb25NZXNzYWdlKE1lc3NhZ2UgbWVzc2FnZSkgewogICAgICAgICAgICAg\nICAgY29uc3VtZU1lc3NhZ2UobWVzc2FnZSwgbWVzc2FnZUxpc3QpOwogICAg\nICAgICAgICB9CiAgICAgICAgfTsKICAgIH0KCiAgICAvKioKICAgICAqIFJl\ndHVybnMgdGhlIHN1YmplY3Qgb24gd2hpY2ggd2UgcHVibGlzaAogICAgICov\nCiAgICBwcm90ZWN0ZWQgU3RyaW5nIGdldFN1YmplY3QoKSB7CiAgICAgICAg\nLy8gcmV0dXJuIGdldFByZWZpeCgpICsgIkZPTy5CQVIsIiArIGdldFByZWZp\neCgpICsgIkZPTy5YLlkiOwogICAgICAgIHJldHVybiBnZXRQcmVmaXgoKSAr\nICJGT08uQkFSIjsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhl\nIGRlc3RpbmF0aW9ucyB0byB3aGljaCB3ZSBjb25zdW1lCiAgICAgKi8KICAg\nIHByb3RlY3RlZCBEZXN0aW5hdGlvbltdIGdldERlc3RpbmF0aW9ucygpIHsK\nICAgICAgICAvLyByZXR1cm4gbmV3IERlc3RpbmF0aW9uW10ge1Nlc3Npb25J\nbXBsLmFzVG9waWMoZ2V0UHJlZml4KCkgKyAiRk9PLkJBUiIpLAogICAgICAg\nIC8vIFNlc3Npb25JbXBsLmFzVG9waWMoZ2V0UHJlZml4KCkgKyAiRk9PLioi\nKSwgU2Vzc2lvbkltcGwuYXNUb3BpYyhnZXRQcmVmaXgoKSArICJGT08uWC5Z\nIil9OwogICAgICAgIHJldHVybiBuZXcgRGVzdGluYXRpb25bXSB7U2Vzc2lv\nbkltcGwuYXNUb3BpYyhnZXRQcmVmaXgoKSArICJGT08uQkFSIil9OwogICAg\nfQoKICAgIHByb3RlY3RlZCBTdHJpbmcgZ2V0UHJlZml4KCkgewogICAgICAg\nIHJldHVybiBzdXBlci5nZXRTdWJqZWN0KCkgKyAiLiI7CiAgICB9CgogICAg\nQFN1cHByZXNzV2FybmluZ3MoInVuY2hlY2tlZCIpCiAgICBwcm90ZWN0ZWQg\ndm9pZCBhc3NlcnRNZXNzYWdlc0FyZVJlY2VpdmVkKCkgdGhyb3dzIEpNU0V4\nY2VwdGlvbiB7CiAgICAgICAgd2FpdEZvck1lc3NhZ2VzVG9CZURlbGl2ZXJl\nZCgpOwogICAgICAgIGludCBzaXplID0gbWVzc2FnZUxpc3RzLmxlbmd0aDsK\nICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHNpemU7IGkrKykgewogICAg\nICAgICAgICBMT0cuaW5mbygiTWVzc2FnZSBsaXN0OiAiICsgaSArICIgY29u\ndGFpbnM6ICIgKyBtZXNzYWdlTGlzdHNbaV0uc2l6ZSgpICsgIiBtZXNzYWdl\nKHMpIik7CiAgICAgICAgfQogICAgICAgIHNpemUgPSBtZXNzYWdlTGlzdHMu\nbGVuZ3RoOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc2l6ZTsgaSsr\nKSB7CiAgICAgICAgICAgIGFzc2VydE1lc3NhZ2VzUmVjZWl2ZWRBcmVWYWxp\nZChtZXNzYWdlTGlzdHNbaV0pOwogICAgICAgIH0KICAgIH0KCiAgICBwcm90\nZWN0ZWQgSGVkd2lnQ29ubmVjdGlvbkZhY3RvcnlJbXBsIGNyZWF0ZUNvbm5l\nY3Rpb25GYWN0b3J5KCkgewogICAgICAgIHJldHVybiBuZXcgSGVkd2lnQ29u\nbmVjdGlvbkZhY3RvcnlJbXBsKCk7CiAgICB9CgogICAgcHJvdGVjdGVkIHZv\naWQgdGVhckRvd24oKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBzZXNz\naW9uLmNsb3NlKCk7CiAgICAgICAgcmVjZWl2ZVNlc3Npb24uY2xvc2UoKTsK\nCiAgICAgICAgc2VuZENvbm5lY3Rpb24uY2xvc2UoKTsKICAgICAgICByZWNl\naXZlQ29ubmVjdGlvbi5jbG9zZSgpOwogICAgICAgIHN1cGVyLnRlYXJEb3du\nKCk7CiAgICB9Cn0K\n","encoding":"base64"}

