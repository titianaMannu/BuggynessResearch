{"sha":"0a9968b50f8f50fadf378ea041ee37363ff2fc8b","node_id":"MDQ6QmxvYjE1NzU5NTY6MGE5OTY4YjUwZjhmNTBmYWRmMzc4ZWEwNDFlZTM3MzYzZmYyZmM4Yg==","size":5006,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/0a9968b50f8f50fadf378ea041ee37363ff2fc8b","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUgb3IgbW9yZQogKiBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlIGRpc3Ry\naWJ1dGVkIHdpdGgKICogdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLgogKiBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byBZb3UgdW5kZXIgdGhlIEFwYWNo\nZSBMaWNlbnNlLCBWZXJzaW9uIDIuMAogKiAodGhlICJMaWNlbnNlIik7IHlv\ndSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ug\nd2l0aAogKiB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBv\nZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hl\nLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWly\nZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcs\nIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlz\nIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQg\nV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIg\nZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRo\nZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5k\nCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFja2Fn\nZSBvcmcuYXBhY2hlLmFjdGl2ZW1xLnVzZWNhc2VzOwoKaW1wb3J0IGphdmEu\ndXRpbC5jb25jdXJyZW50LlRpbWVVbml0OwppbXBvcnQgamF2YXguam1zLkpN\nU0V4Y2VwdGlvbjsKaW1wb3J0IGphdmF4Lmptcy5NZXNzYWdlOwppbXBvcnQg\namF2YXguam1zLk1lc3NhZ2VQcm9kdWNlcjsKaW1wb3J0IGphdmF4Lmptcy5T\nZXNzaW9uOwppbXBvcnQgamF2YXguam1zLlRleHRNZXNzYWdlOwppbXBvcnQg\namF2YXguam1zLlRvcGljOwppbXBvcnQgamF2YXguam1zLlRvcGljQ29ubmVj\ndGlvbjsKaW1wb3J0IGphdmF4Lmptcy5Ub3BpY1Nlc3Npb247CmltcG9ydCBq\nYXZheC5qbXMuVG9waWNTdWJzY3JpYmVyOwoKaW1wb3J0IG9yZy5hcGFjaGUu\naGVkd2lnLkptc1Rlc3RCYXNlOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcu\nam1zLnNwaS5IZWR3aWdDb25uZWN0aW9uRmFjdG9yeUltcGw7CgoKCmltcG9y\ndCBvcmcuYXBhY2hlLmNvbW1vbnMubGFuZy5SYW5kb21TdHJpbmdVdGlsczsK\naW1wb3J0IG9yZy5qdW5pdC5UZXN0OwppbXBvcnQgb3JnLnNsZjRqLkxvZ2dl\ncjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJGYWN0b3J5OwoKCmltcG9ydCBz\ndGF0aWMgb3JnLmp1bml0LkFzc2VydC5hc3NlcnROb3ROdWxsOwoKcHVibGlj\nIGNsYXNzIER1cmFibGVTdWJzY3JpcHRpb25IYW5nVGVzdENhc2UgZXh0ZW5k\ncyBKbXNUZXN0QmFzZSB7CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2dn\nZXIgTE9HID0gTG9nZ2VyRmFjdG9yeS5nZXRMb2dnZXIoRHVyYWJsZVN1YnNj\ncmlwdGlvbkhhbmdUZXN0Q2FzZS5jbGFzcyk7CiAgICBmaW5hbCBzdGF0aWMg\nU3RyaW5nIGNsaWVudElEID0gIm15SWQiOwogICAgcHJpdmF0ZSBzdGF0aWMg\nZmluYWwgU3RyaW5nIHRvcGljTmFtZSA9ICJteVRvcGljIjsKICAgIHByaXZh\ndGUgc3RhdGljIGZpbmFsIFN0cmluZyBkdXJhYmxlU3ViTmFtZSA9ICJteVN1\nYiI7CgogICAgcHVibGljIHZvaWQgdGVzdEhhbmdpbmcoKSB0aHJvd3MgRXhj\nZXB0aW9uCiAgICB7CiAgICAgICAgcmVnaXN0ZXJEdXJhYmxlU3Vic2NyaXB0\naW9uKCk7CiAgICAgICAgcHJvZHVjZUV4cGlyZWRBbmRPbmVOb25FeHBpcmVk\nTWVzc2FnZXMoMTAwMCk7CiAgICAgICAgVGltZVVuaXQuU0VDT05EUy5zbGVl\ncCgxMCk7IC8vIG1ha2Ugc3VyZSBtZXNzYWdlcyBhcmUgZXhwaXJlZAogICAg\nICAgIGludCBudW1NZXNzYWdlcyA9IGNvbGxlY3RNZXNzYWdlc0Zyb21EdXJh\nYmxlU3Vic2NyaXB0aW9uRm9yT25lTWludXRlKCk7CiAgICAgICAgYXNzZXJ0\nIDEgPT0gbnVtTWVzc2FnZXMgOiAiRXhwZWN0ZWQgIiArIDEgKyAiLCByZWNl\naXZlZCAiICsgbnVtTWVzc2FnZXM7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lk\nIHByb2R1Y2VFeHBpcmVkQW5kT25lTm9uRXhwaXJlZE1lc3NhZ2VzKGZpbmFs\nIGludCBtZXNzYWdlQ291bnQpIHRocm93cyBKTVNFeGNlcHRpb24gewogICAg\nICAgIEhlZHdpZ0Nvbm5lY3Rpb25GYWN0b3J5SW1wbCBjb25uZWN0aW9uRmFj\ndG9yeSA9IG5ldyBIZWR3aWdDb25uZWN0aW9uRmFjdG9yeUltcGwoKTsKICAg\nICAgICBUb3BpY0Nvbm5lY3Rpb24gY29ubmVjdGlvbiA9IGNvbm5lY3Rpb25G\nYWN0b3J5LmNyZWF0ZVRvcGljQ29ubmVjdGlvbigpOwogICAgICAgIFRvcGlj\nU2Vzc2lvbiBzZXNzaW9uID0gY29ubmVjdGlvbi5jcmVhdGVUb3BpY1Nlc3Np\nb24oZmFsc2UsIFNlc3Npb24uQVVUT19BQ0tOT1dMRURHRSk7CiAgICAgICAg\nVG9waWMgdG9waWMgPSBzZXNzaW9uLmNyZWF0ZVRvcGljKHRvcGljTmFtZSk7\nCiAgICAgICAgTWVzc2FnZVByb2R1Y2VyIHByb2R1Y2VyID0gc2Vzc2lvbi5j\ncmVhdGVQcm9kdWNlcih0b3BpYyk7CiAgICAgICAgcHJvZHVjZXIuc2V0VGlt\nZVRvTGl2ZShUaW1lVW5pdC5TRUNPTkRTLnRvTWlsbGlzKDEpKTsKICAgICAg\nICBmb3IoaW50IGk9MDsgaTxtZXNzYWdlQ291bnQ7IGkrKykgewogICAgICAg\nICAgICBzZW5kUmFuZG9tTWVzc2FnZShzZXNzaW9uLCBwcm9kdWNlcik7CiAg\nICAgICAgfQogICAgICAgIHByb2R1Y2VyLnNldFRpbWVUb0xpdmUoVGltZVVu\naXQuREFZUy50b01pbGxpcygxKSk7CiAgICAgICAgc2VuZFJhbmRvbU1lc3Nh\nZ2Uoc2Vzc2lvbiwgcHJvZHVjZXIpOwogICAgICAgIGNvbm5lY3Rpb24uY2xv\nc2UoKTsKICAgICAgICBMT0cuaW5mbygicHJvZHVjZUV4cGlyZWRBbmRPbmVO\nb25FeHBpcmVkTWVzc2FnZXMgZG9uZSIpOwogICAgfQoKICAgIHByaXZhdGUg\ndm9pZCByZWdpc3RlckR1cmFibGVTdWJzY3JpcHRpb24oKSB0aHJvd3MgSk1T\nRXhjZXB0aW9uCiAgICB7CiAgICAgICAgSGVkd2lnQ29ubmVjdGlvbkZhY3Rv\ncnlJbXBsIGNvbm5lY3Rpb25GYWN0b3J5ID0gbmV3IEhlZHdpZ0Nvbm5lY3Rp\nb25GYWN0b3J5SW1wbCgpOwogICAgICAgIFRvcGljQ29ubmVjdGlvbiBjb25u\nZWN0aW9uID0gY29ubmVjdGlvbkZhY3RvcnkuY3JlYXRlVG9waWNDb25uZWN0\naW9uKCk7CiAgICAgICAgY29ubmVjdGlvbi5zZXRDbGllbnRJRChjbGllbnRJ\nRCk7CiAgICAgICAgVG9waWNTZXNzaW9uIHRvcGljU2Vzc2lvbiA9IGNvbm5l\nY3Rpb24uY3JlYXRlVG9waWNTZXNzaW9uKGZhbHNlLCBTZXNzaW9uLkFVVE9f\nQUNLTk9XTEVER0UpOwogICAgICAgIFRvcGljIHRvcGljID0gdG9waWNTZXNz\naW9uLmNyZWF0ZVRvcGljKHRvcGljTmFtZSk7CiAgICAgICAgVG9waWNTdWJz\nY3JpYmVyIGR1cmFibGVTdWJzY3JpYmVyID0gdG9waWNTZXNzaW9uLmNyZWF0\nZUR1cmFibGVTdWJzY3JpYmVyKHRvcGljLCBkdXJhYmxlU3ViTmFtZSk7CiAg\nICAgICAgY29ubmVjdGlvbi5zdGFydCgpOwogICAgICAgIGR1cmFibGVTdWJz\nY3JpYmVyLmNsb3NlKCk7CiAgICAgICAgY29ubmVjdGlvbi5jbG9zZSgpOwog\nICAgICAgIExPRy5pbmZvKCJEdXJhYmxlIFN1YiBSZWdpc3RlcmVkIik7CiAg\nICB9CgogICAgcHJpdmF0ZSBpbnQgY29sbGVjdE1lc3NhZ2VzRnJvbUR1cmFi\nbGVTdWJzY3JpcHRpb25Gb3JPbmVNaW51dGUoKSB0aHJvd3MgRXhjZXB0aW9u\nCiAgICB7CiAgICAgICAgSGVkd2lnQ29ubmVjdGlvbkZhY3RvcnlJbXBsIGNv\nbm5lY3Rpb25GYWN0b3J5ID0gbmV3IEhlZHdpZ0Nvbm5lY3Rpb25GYWN0b3J5\nSW1wbCgpOwogICAgICAgIFRvcGljQ29ubmVjdGlvbiBjb25uZWN0aW9uID0g\nY29ubmVjdGlvbkZhY3RvcnkuY3JlYXRlVG9waWNDb25uZWN0aW9uKCk7Cgog\nICAgICAgIGNvbm5lY3Rpb24uc2V0Q2xpZW50SUQoY2xpZW50SUQpOwogICAg\nICAgIFRvcGljU2Vzc2lvbiB0b3BpY1Nlc3Npb24gPSBjb25uZWN0aW9uLmNy\nZWF0ZVRvcGljU2Vzc2lvbihmYWxzZSwgU2Vzc2lvbi5BVVRPX0FDS05PV0xF\nREdFKTsKICAgICAgICBUb3BpYyB0b3BpYyA9IHRvcGljU2Vzc2lvbi5jcmVh\ndGVUb3BpYyh0b3BpY05hbWUpOwogICAgICAgIGNvbm5lY3Rpb24uc3RhcnQo\nKTsKICAgICAgICBUb3BpY1N1YnNjcmliZXIgc3Vic2NyaWJlciA9IHRvcGlj\nU2Vzc2lvbi5jcmVhdGVEdXJhYmxlU3Vic2NyaWJlcih0b3BpYywgZHVyYWJs\nZVN1Yk5hbWUpOwogICAgICAgIExPRy5pbmZvKCJBYm91dCB0byByZWNlaXZl\nIG1lc3NhZ2VzIik7CiAgICAgICAgaW50IHJldHZhbCA9IDA7CiAgICAgICAg\nd2hpbGUgKHRydWUpewogICAgICAgICAgICBNZXNzYWdlIG1lc3NhZ2UgPSBz\ndWJzY3JpYmVyLnJlY2VpdmUoMjAwMCk7CiAgICAgICAgICAgIGlmIChudWxs\nID09IG1lc3NhZ2UpIHsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAg\nICAgICB9CiAgICAgICAgICAgIHJldHZhbCArKzsKICAgICAgICB9CiAgICAg\nICAgc3Vic2NyaWJlci5jbG9zZSgpOwogICAgICAgIGNvbm5lY3Rpb24uY2xv\nc2UoKTsKICAgICAgICBMT0cuaW5mbygiY29sbGVjdE1lc3NhZ2VzRnJvbUR1\ncmFibGVTdWJzY3JpcHRpb25Gb3JPbmVNaW51dGUgZG9uZSIpOwoKICAgICAg\nICByZXR1cm4gcmV0dmFsOwogICAgfQoKICAgIHByaXZhdGUgdm9pZCBzZW5k\nUmFuZG9tTWVzc2FnZShUb3BpY1Nlc3Npb24gc2Vzc2lvbiwgTWVzc2FnZVBy\nb2R1Y2VyIHByb2R1Y2VyKSB0aHJvd3MgSk1TRXhjZXB0aW9uIHsKICAgICAg\nICBUZXh0TWVzc2FnZSB0ZXh0TWVzc2FnZSA9IHNlc3Npb24uY3JlYXRlVGV4\ndE1lc3NhZ2UoKTsKICAgICAgICB0ZXh0TWVzc2FnZS5zZXRUZXh0KFJhbmRv\nbVN0cmluZ1V0aWxzLnJhbmRvbSg1MDAsICJhYmNkZWZnaGlqa2xtbm9wcXJz\ndHV2d3h5eiIpKTsKICAgICAgICBwcm9kdWNlci5zZW5kKHRleHRNZXNzYWdl\nKTsKICAgIH0KfQo=\n","encoding":"base64"}

