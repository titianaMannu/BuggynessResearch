{"sha":"fa7b0eae6534393d42aecbb1fa09322b966cbc2c","node_id":"MDQ6QmxvYjE1NzU5NTY6ZmE3YjBlYWU2NTM0MzkzZDQyYWVjYmIxZmEwOTMyMmI5NjZjYmMyYw==","size":10253,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/fa7b0eae6534393d42aecbb1fa09322b966cbc2c","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUgb3IgbW9yZQogKiBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlIGRpc3Ry\naWJ1dGVkIHdpdGgKICogdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLgogKiBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byBZb3UgdW5kZXIgdGhlIEFwYWNo\nZSBMaWNlbnNlLCBWZXJzaW9uIDIuMAogKiAodGhlICJMaWNlbnNlIik7IHlv\ndSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ug\nd2l0aAogKiB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBv\nZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hl\nLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWly\nZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcs\nIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlz\nIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQg\nV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIg\nZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRo\nZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5k\nCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFja2Fn\nZSBvcmcuYXBhY2hlLmFjdGl2ZW1xLnVzZWNhc2VzOwoKaW1wb3J0IGphdmF4\nLmptcy5Ub3BpYzsKaW1wb3J0IGphdmEudXRpbC5WZWN0b3I7CmltcG9ydCBq\nYXZhLnV0aWwuY29uY3VycmVudC5Db3VudERvd25MYXRjaDsKaW1wb3J0IGph\ndmEudXRpbC5jb25jdXJyZW50LlRpbWVVbml0OwppbXBvcnQgamF2YS51dGls\nLmNvbmN1cnJlbnQuYXRvbWljLkF0b21pY0ludGVnZXI7CmltcG9ydCBqYXZh\neC5qbXMuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmF4Lmptcy5NZXNzYWdlQ29u\nc3VtZXI7CmltcG9ydCBqYXZheC5qbXMuTWVzc2FnZVByb2R1Y2VyOwppbXBv\ncnQgamF2YXguam1zLk9iamVjdE1lc3NhZ2U7CmltcG9ydCBqYXZheC5qbXMu\nU2Vzc2lvbjsKCmltcG9ydCBqdW5pdC5mcmFtZXdvcmsuVGVzdDsKCmltcG9y\ndCBvcmcuYXBhY2hlLmhlZHdpZy5qbXMuU2Vzc2lvbkltcGw7CmltcG9ydCBv\ncmcuYXBhY2hlLmhlZHdpZy5qbXMuc3BpLkhlZHdpZ0Nvbm5lY3Rpb25GYWN0\nb3J5SW1wbDsKaW1wb3J0IG9yZy5hcGFjaGUuYWN0aXZlbXEuQ29tYmluYXRp\nb25UZXN0U3VwcG9ydDsKCmltcG9ydCBqYXZheC5qbXMuRGVzdGluYXRpb247\nCgoKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXI7CmltcG9ydCBvcmcuc2xmNGou\nTG9nZ2VyRmFjdG9yeTsKCgpwdWJsaWMgY2xhc3MgT2JqZWN0TWVzc2FnZU5v\ndFNlcmlhbGl6YWJsZVRlc3QgZXh0ZW5kcyBDb21iaW5hdGlvblRlc3RTdXBw\nb3J0IHsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2dnZXIgTE9HID0g\nTG9nZ2VyRmFjdG9yeS5nZXRMb2dnZXIoT2JqZWN0TWVzc2FnZU5vdFNlcmlh\nbGl6YWJsZVRlc3QuY2xhc3MpOwoKICAgIEF0b21pY0ludGVnZXIgbnVtUmVj\nZWl2ZWQgPSBuZXcgQXRvbWljSW50ZWdlcigwKTsKICAgIGZpbmFsIFZlY3Rv\ncjxUaHJvd2FibGU+IGV4Y2VwdGlvbnMgPSBuZXcgVmVjdG9yPFRocm93YWJs\nZT4oKTsKCiAgICBwdWJsaWMgc3RhdGljIFRlc3Qgc3VpdGUoKSB7CiAgICAg\nICAgcmV0dXJuIHN1aXRlKE9iamVjdE1lc3NhZ2VOb3RTZXJpYWxpemFibGVU\nZXN0LmNsYXNzKTsKICAgIH0KCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFp\nbihTdHJpbmdbXSBhcmdzKSB7CiAgICAgICAganVuaXQudGV4dHVpLlRlc3RS\ndW5uZXIucnVuKHN1aXRlKCkpOwogICAgfQoKICAgIHByb3RlY3RlZCB2b2lk\nIHNldFVwKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgc3VwZXIuc2V0\nVXAoKTsKICAgICAgICBleGNlcHRpb25zLmNsZWFyKCk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgdGVzdFNlbmROb3RTZXJpYWxpemVhYmxlT2JqZWN0TWVz\nc2FnZSgpIHRocm93cyBFeGNlcHRpb24gewoKICAgICAgICBmaW5hbCAgRGVz\ndGluYXRpb24gZGVzdGluYXRpb24gPSBTZXNzaW9uSW1wbC5hc1RvcGljKCJ0\nZXN0VCIpOwogICAgICAgIGZpbmFsIE15T2JqZWN0IG9iaiA9IG5ldyBNeU9i\namVjdCgiQSBtZXNzYWdlIik7CgogICAgICAgIGZpbmFsIENvdW50RG93bkxh\ndGNoIGNvbnN1bWVyU3RhcnRlZCA9IG5ldyBDb3VudERvd25MYXRjaCgxKTsK\nCiAgICAgICAgVGhyZWFkIHZtQ29uc3VtZXJUaHJlYWQgPSBuZXcgVGhyZWFk\nKCJDb25zdW1lciBUaHJlYWQiKSB7CiAgICAgICAgICAgICAgICBwdWJsaWMg\ndm9pZCBydW4oKSB7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgICAgICAgICBIZWR3aWdDb25uZWN0aW9uRmFjdG9yeUltcGwgZmFj\ndG9yeSA9IG5ldyBIZWR3aWdDb25uZWN0aW9uRmFjdG9yeUltcGwoKTsKCiAg\nICAgICAgICAgICAgICAgICAgQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gZmFj\ndG9yeS5jcmVhdGVDb25uZWN0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAg\nU2Vzc2lvbiBzZXNzaW9uID0gY29ubmVjdGlvbi5jcmVhdGVTZXNzaW9uKGZh\nbHNlLCBTZXNzaW9uLkFVVE9fQUNLTk9XTEVER0UpOwogICAgICAgICAgICAg\nICAgICAgIE1lc3NhZ2VDb25zdW1lciBjb25zdW1lciA9IHNlc3Npb24uY3Jl\nYXRlQ29uc3VtZXIoZGVzdGluYXRpb24pOwogICAgICAgICAgICAgICAgICAg\nIGNvbm5lY3Rpb24uc3RhcnQoKTsKICAgICAgICAgICAgICAgICAgICBjb25z\ndW1lclN0YXJ0ZWQuY291bnREb3duKCk7CiAgICAgICAgICAgICAgICAgICAg\nT2JqZWN0TWVzc2FnZSBtZXNzYWdlID0gKE9iamVjdE1lc3NhZ2UpIGNvbnN1\nbWVyLnJlY2VpdmUoMzAwMDApOwogICAgICAgICAgICAgICAgICAgIGlmICgg\nbWVzc2FnZSAhPSBudWxsICkgewogICAgICAgICAgICAgICAgICAgICAgICBN\neU9iamVjdCBvYmplY3QgPSAoTXlPYmplY3QpbWVzc2FnZS5nZXRPYmplY3Qo\nKTsKICAgICAgICAgICAgICAgICAgICAgICAgTE9HLmluZm8oIkdvdCBtZXNz\nYWdlICIgKyBvYmplY3QuZ2V0TWVzc2FnZSgpKTsKICAgICAgICAgICAgICAg\nICAgICAgICAgbnVtUmVjZWl2ZWQuaW5jcmVtZW50QW5kR2V0KCk7CiAgICAg\nICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNvbnN1bWVy\nLmNsb3NlKCk7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoVGhyb3dh\nYmxlIGV4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdGlvbnMu\nYWRkKGV4KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAg\nICB9CiAgICAgICAgICAgIH07CiAgICAgICAgdm1Db25zdW1lclRocmVhZC5z\ndGFydCgpOwoKICAgICAgICBUaHJlYWQgcHJvZHVjaW5nVGhyZWFkID0gbmV3\nIFRocmVhZCgiUHJvZHVjaW5nIFRocmVhZCIpIHsKICAgICAgICAgICAgICAg\nIHB1YmxpYyB2b2lkIHJ1bigpIHsKICAgICAgICAgICAgICAgICAgICB0cnkg\newogICAgICAgICAgICAgICAgICAgICAgICBIZWR3aWdDb25uZWN0aW9uRmFj\ndG9yeUltcGwgZmFjdG9yeSA9IG5ldyBIZWR3aWdDb25uZWN0aW9uRmFjdG9y\neUltcGwoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIENvbm5lY3Rpb24g\nY29ubmVjdGlvbiA9IGZhY3RvcnkuY3JlYXRlQ29ubmVjdGlvbigpOwogICAg\nICAgICAgICAgICAgICAgICAgICBTZXNzaW9uIHNlc3Npb24gPSBjb25uZWN0\naW9uLmNyZWF0ZVNlc3Npb24oZmFsc2UsIFNlc3Npb24uQVVUT19BQ0tOT1dM\nRURHRSk7CiAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VQcm9kdWNl\nciBwcm9kdWNlciA9IHNlc3Npb24uY3JlYXRlUHJvZHVjZXIoZGVzdGluYXRp\nb24pOwogICAgICAgICAgICAgICAgICAgICAgICBPYmplY3RNZXNzYWdlIG1l\nc3NhZ2UgPSBzZXNzaW9uLmNyZWF0ZU9iamVjdE1lc3NhZ2UoKTsKICAgICAg\nICAgICAgICAgICAgICAgICAgbWVzc2FnZS5zZXRPYmplY3Qob2JqKTsKICAg\nICAgICAgICAgICAgICAgICAgICAgcHJvZHVjZXIuc2VuZChtZXNzYWdlKTsK\nICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjZXIuY2xvc2UoKTsKICAg\nICAgICAgICAgICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUgZXgpIHsKICAg\nICAgICAgICAgICAgICAgICAgICAgZXhjZXB0aW9ucy5hZGQoZXgpOwogICAg\nICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAg\nICAgfTsKCiAgICAgICAgYXNzZXJ0VHJ1ZSgiY29uc3VtZXJzIHN0YXJ0ZWQi\nLCBjb25zdW1lclN0YXJ0ZWQuYXdhaXQoMTAsIFRpbWVVbml0LlNFQ09ORFMp\nKTsKICAgICAgICBwcm9kdWNpbmdUaHJlYWQuc3RhcnQoKTsKCiAgICAgICAg\ndm1Db25zdW1lclRocmVhZC5qb2luKCk7CiAgICAgICAgcHJvZHVjaW5nVGhy\nZWFkLmpvaW4oKTsKCiAgICAgICAgYXNzZXJ0IG9iai5nZXRXcml0ZU9iamVj\ndENhbGxlZCgpID4gMCA6ICJ3cml0ZU9iamVjdCBub3QgY2FsbGVkIjsKICAg\nICAgICBhc3NlcnQgMCA9PSBvYmouZ2V0UmVhZE9iamVjdENhbGxlZCgpIDog\nInJlYWRPYmplY3QgY2FsbGVkIjsKICAgICAgICBhc3NlcnQgMCA9PSBvYmou\nZ2V0UmVhZE9iamVjdE5vRGF0YUNhbGxlZCgpIDogInJlYWRPYmplY3ROb0Rh\ndGEgY2FsbGVkID8iOwoKICAgICAgICBhc3NlcnRFcXVhbHMoIkdvdCBleHBl\nY3RlZCBtZXNzYWdlcyIsIDEsIG51bVJlY2VpdmVkLmdldCgpKTsKICAgICAg\nICBhc3NlcnRUcnVlKCJubyB1bmV4cGVjdGVkIGV4Y2VwdGlvbnM6ICIgKyBl\neGNlcHRpb25zLCBleGNlcHRpb25zLmlzRW1wdHkoKSk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgdGVzdFNlbmROb3RTZXJpYWxpemVhYmxlT2JqZWN0TWVz\nc2FnZU92ZXJUY3AoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBmaW5h\nbCAgRGVzdGluYXRpb24gZGVzdGluYXRpb24gPSBTZXNzaW9uSW1wbC5hc1Rv\ncGljKCJ0ZXN0VG9waWMiKTsKICAgICAgICBmaW5hbCBNeU9iamVjdCBvYmog\nPSBuZXcgTXlPYmplY3QoIkEgbWVzc2FnZSIpOwoKICAgICAgICBmaW5hbCBD\nb3VudERvd25MYXRjaCBjb25zdW1lclN0YXJ0ZWQgPSBuZXcgQ291bnREb3du\nTGF0Y2goMyk7CiAgICAgICAgZmluYWwgVmVjdG9yPFRocm93YWJsZT4gZXhj\nZXB0aW9ucyA9IG5ldyBWZWN0b3I8VGhyb3dhYmxlPigpOwogICAgICAgIFRo\ncmVhZCB2bUNvbnN1bWVyVGhyZWFkID0gbmV3IFRocmVhZCgiQ29uc3VtZXIg\nVGhyZWFkIikgewogICAgICAgICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkg\newogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAg\nICAgICAgIEhlZHdpZ0Nvbm5lY3Rpb25GYWN0b3J5SW1wbCBmYWN0b3J5ID0g\nbmV3IEhlZHdpZ0Nvbm5lY3Rpb25GYWN0b3J5SW1wbCgpOwoKICAgICAgICAg\nICAgICAgICAgICAgICAgQ29ubmVjdGlvbiBjb25uZWN0aW9uID0gZmFjdG9y\neS5jcmVhdGVDb25uZWN0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgICAg\nIFNlc3Npb24gc2Vzc2lvbiA9IGNvbm5lY3Rpb24uY3JlYXRlU2Vzc2lvbihm\nYWxzZSwgU2Vzc2lvbi5BVVRPX0FDS05PV0xFREdFKTsKICAgICAgICAgICAg\nICAgICAgICAgICAgTWVzc2FnZUNvbnN1bWVyIGNvbnN1bWVyID0gc2Vzc2lv\nbi5jcmVhdGVDb25zdW1lcihkZXN0aW5hdGlvbik7CiAgICAgICAgICAgICAg\nICAgICAgICAgIGNvbm5lY3Rpb24uc3RhcnQoKTsKICAgICAgICAgICAgICAg\nICAgICAgICAgY29uc3VtZXJTdGFydGVkLmNvdW50RG93bigpOwogICAgICAg\nICAgICAgICAgICAgICAgICBPYmplY3RNZXNzYWdlIG1lc3NhZ2UgPSAoT2Jq\nZWN0TWVzc2FnZSljb25zdW1lci5yZWNlaXZlKDMwMDAwKTsKICAgICAgICAg\nICAgICAgICAgICAgICAgaWYgKCBtZXNzYWdlICE9IG51bGwgKSB7CiAgICAg\nICAgICAgICAgICAgICAgICAgIE15T2JqZWN0IG9iamVjdCA9IChNeU9iamVj\ndCltZXNzYWdlLmdldE9iamVjdCgpOwogICAgICAgICAgICAgICAgICAgICAg\nICBMT0cuaW5mbygiR290IG1lc3NhZ2UgIiArIG9iamVjdC5nZXRNZXNzYWdl\nKCkpOwogICAgICAgICAgICAgICAgICAgICAgICBudW1SZWNlaXZlZC5pbmNy\nZW1lbnRBbmRHZXQoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAg\nICAgICAgICAgICAgICAgIGNvbnN1bWVyLmNsb3NlKCk7CiAgICAgICAgICAg\nICAgICAgICAgfSBjYXRjaCAoVGhyb3dhYmxlIGV4KSB7CiAgICAgICAgICAg\nICAgICAgICAgICAgIGV4Y2VwdGlvbnMuYWRkKGV4KTsKICAgICAgICAgICAg\nICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAg\nICAgICAgdm1Db25zdW1lclRocmVhZC5zdGFydCgpOwoKICAgICAgICBUaHJl\nYWQgdGNwQ29uc3VtZXJUaHJlYWQgPSBuZXcgVGhyZWFkKCJDb25zdW1lciBU\naHJlYWQiKSB7CiAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB7\nCiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKCiAgICAgICAgICAgICAgICAg\nICAgSGVkd2lnQ29ubmVjdGlvbkZhY3RvcnlJbXBsIGZhY3RvcnkgPQogICAg\nICAgICAgICAgICAgICAgICAgICBuZXcgSGVkd2lnQ29ubmVjdGlvbkZhY3Rv\ncnlJbXBsKCk7CgogICAgICAgICAgICAgICAgICAgIENvbm5lY3Rpb24gY29u\nbmVjdGlvbiA9IGZhY3RvcnkuY3JlYXRlQ29ubmVjdGlvbigpOwogICAgICAg\nICAgICAgICAgICAgIFNlc3Npb24gc2Vzc2lvbiA9IGNvbm5lY3Rpb24uY3Jl\nYXRlU2Vzc2lvbihmYWxzZSwgU2Vzc2lvbi5BVVRPX0FDS05PV0xFREdFKTsK\nICAgICAgICAgICAgICAgICAgICBNZXNzYWdlQ29uc3VtZXIgY29uc3VtZXIg\nPSBzZXNzaW9uLmNyZWF0ZUNvbnN1bWVyKGRlc3RpbmF0aW9uKTsKICAgICAg\nICAgICAgICAgICAgICBjb25uZWN0aW9uLnN0YXJ0KCk7CiAgICAgICAgICAg\nICAgICAgICAgY29uc3VtZXJTdGFydGVkLmNvdW50RG93bigpOwogICAgICAg\nICAgICAgICAgICAgIE9iamVjdE1lc3NhZ2UgbWVzc2FnZSA9IChPYmplY3RN\nZXNzYWdlKWNvbnN1bWVyLnJlY2VpdmUoMzAwMDApOwogICAgICAgICAgICAg\nICAgICAgIGlmICggbWVzc2FnZSAhPSBudWxsICkgewogICAgICAgICAgICAg\nICAgICAgICAgICBNeU9iamVjdCBvYmplY3QgPSAoTXlPYmplY3QpbWVzc2Fn\nZS5nZXRPYmplY3QoKTsKICAgICAgICAgICAgICAgICAgICAgICAgTE9HLmlu\nZm8oIkdvdCBtZXNzYWdlICIgKyBvYmplY3QuZ2V0TWVzc2FnZSgpKTsKICAg\nICAgICAgICAgICAgICAgICAgICAgbnVtUmVjZWl2ZWQuaW5jcmVtZW50QW5k\nR2V0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCBvYmplY3Qu\nZ2V0UmVhZE9iamVjdENhbGxlZCgpID4gMCA6ICJyZWFkT2JqZWN0IGNhbGxl\nZCI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAg\nIGNvbnN1bWVyLmNsb3NlKCk7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRj\naCAoVGhyb3dhYmxlIGV4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGV4\nY2VwdGlvbnMuYWRkKGV4KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAg\nICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgdGNwQ29uc3Vt\nZXJUaHJlYWQuc3RhcnQoKTsKCgogICAgICAgIFRocmVhZCBub3RoZXJWbUNv\nbnN1bWVyVGhyZWFkID0gbmV3IFRocmVhZCgiQ29uc3VtZXIgVGhyZWFkIikg\newogICAgICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB7CiAgICAgICAgICAg\nICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIEhlZHdpZ0Nvbm5lY3Rp\nb25GYWN0b3J5SW1wbCBmYWN0b3J5ID0gbmV3IEhlZHdpZ0Nvbm5lY3Rpb25G\nYWN0b3J5SW1wbCgpOwoKICAgICAgICAgICAgICAgICAgICBDb25uZWN0aW9u\nIGNvbm5lY3Rpb24gPSBmYWN0b3J5LmNyZWF0ZUNvbm5lY3Rpb24oKTsKICAg\nICAgICAgICAgICAgICAgICBTZXNzaW9uIHNlc3Npb24gPSBjb25uZWN0aW9u\nLmNyZWF0ZVNlc3Npb24oZmFsc2UsIFNlc3Npb24uQVVUT19BQ0tOT1dMRURH\nRSk7CiAgICAgICAgICAgICAgICAgICAgTWVzc2FnZUNvbnN1bWVyIGNvbnN1\nbWVyID0gc2Vzc2lvbi5jcmVhdGVDb25zdW1lcihkZXN0aW5hdGlvbik7CiAg\nICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zdGFydCgpOwogICAgICAg\nICAgICAgICAgICAgIGNvbnN1bWVyU3RhcnRlZC5jb3VudERvd24oKTsKICAg\nICAgICAgICAgICAgICAgICBPYmplY3RNZXNzYWdlIG1lc3NhZ2UgPSAoT2Jq\nZWN0TWVzc2FnZSljb25zdW1lci5yZWNlaXZlKDMwMDAwKTsKICAgICAgICAg\nICAgICAgICAgICBpZiAoIG1lc3NhZ2UgIT0gbnVsbCApIHsKICAgICAgICAg\nICAgICAgICAgICAgICAgTXlPYmplY3Qgb2JqZWN0ID0gKE15T2JqZWN0KW1l\nc3NhZ2UuZ2V0T2JqZWN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIExP\nRy5pbmZvKCJHb3QgbWVzc2FnZSAiICsgb2JqZWN0LmdldE1lc3NhZ2UoKSk7\nCiAgICAgICAgICAgICAgICAgICAgICAgIG51bVJlY2VpdmVkLmluY3JlbWVu\ndEFuZEdldCgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAg\nICAgICAgICBjb25zdW1lci5jbG9zZSgpOwogICAgICAgICAgICAgICAgfSBj\nYXRjaCAoVGhyb3dhYmxlIGV4KSB7CiAgICAgICAgICAgICAgICAgICAgZXhj\nZXB0aW9ucy5hZGQoZXgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAg\nICB9CiAgICAgICAgfTsKICAgICAgICBub3RoZXJWbUNvbnN1bWVyVGhyZWFk\nLnN0YXJ0KCk7CgogICAgICAgIFRocmVhZCBwcm9kdWNpbmdUaHJlYWQgPSBu\nZXcgVGhyZWFkKCJQcm9kdWNpbmcgVGhyZWFkIikgewogICAgICAgICAgICBw\ndWJsaWMgdm9pZCBydW4oKSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAg\nICAgICAgICAgICAgICAgIEhlZHdpZ0Nvbm5lY3Rpb25GYWN0b3J5SW1wbCBm\nYWN0b3J5ID0gbmV3IEhlZHdpZ0Nvbm5lY3Rpb25GYWN0b3J5SW1wbCgpOwoK\nICAgICAgICAgICAgICAgICAgICBDb25uZWN0aW9uIGNvbm5lY3Rpb24gPSBm\nYWN0b3J5LmNyZWF0ZUNvbm5lY3Rpb24oKTsKICAgICAgICAgICAgICAgICAg\nICBTZXNzaW9uIHNlc3Npb24gPSBjb25uZWN0aW9uLmNyZWF0ZVNlc3Npb24o\nZmFsc2UsIFNlc3Npb24uQVVUT19BQ0tOT1dMRURHRSk7CiAgICAgICAgICAg\nICAgICAgICAgTWVzc2FnZVByb2R1Y2VyIHByb2R1Y2VyID0gc2Vzc2lvbi5j\ncmVhdGVQcm9kdWNlcihkZXN0aW5hdGlvbik7CiAgICAgICAgICAgICAgICAg\nICAgT2JqZWN0TWVzc2FnZSBtZXNzYWdlID0gKE9iamVjdE1lc3NhZ2Upc2Vz\nc2lvbi5jcmVhdGVPYmplY3RNZXNzYWdlKCk7CiAgICAgICAgICAgICAgICAg\nICAgbWVzc2FnZS5zZXRPYmplY3Qob2JqKTsKICAgICAgICAgICAgICAgICAg\nICBwcm9kdWNlci5zZW5kKG1lc3NhZ2UpOwogICAgICAgICAgICAgICAgICAg\nIHByb2R1Y2VyLmNsb3NlKCk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChU\naHJvd2FibGUgZXgpIHsKICAgICAgICAgICAgICAgICAgICBleGNlcHRpb25z\nLmFkZChleCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAg\nICAgICAgICAgfTsKCiAgICAgICAgYXNzZXJ0VHJ1ZSgiY29uc3VtZXJzIHN0\nYXJ0ZWQiLCBjb25zdW1lclN0YXJ0ZWQuYXdhaXQoMTAsIFRpbWVVbml0LlNF\nQ09ORFMpKTsKICAgICAgICBwcm9kdWNpbmdUaHJlYWQuc3RhcnQoKTsKCiAg\nICAgICAgdm1Db25zdW1lclRocmVhZC5qb2luKCk7CiAgICAgICAgdGNwQ29u\nc3VtZXJUaHJlYWQuam9pbigpOwogICAgICAgIG5vdGhlclZtQ29uc3VtZXJU\naHJlYWQuam9pbigpOwogICAgICAgIHByb2R1Y2luZ1RocmVhZC5qb2luKCk7\nCgogICAgICAgIGFzc2VydEVxdWFscygid3JpdGVPYmplY3QgY2FsbGVkIiwg\nMSwgb2JqLmdldFdyaXRlT2JqZWN0Q2FsbGVkKCkpOwogICAgICAgIGFzc2Vy\ndEVxdWFscygicmVhZE9iamVjdCBjYWxsZWQiLCAwLCBvYmouZ2V0UmVhZE9i\namVjdENhbGxlZCgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoInJlYWRPYmpl\nY3ROb0RhdGEgY2FsbGVkIiwgMCwgb2JqLmdldFJlYWRPYmplY3ROb0RhdGFD\nYWxsZWQoKSk7CgogICAgICAgIGFzc2VydEVxdWFscygiR290IGV4cGVjdGVk\nIG1lc3NhZ2VzIiwgMywgbnVtUmVjZWl2ZWQuZ2V0KCkpOwogICAgICAgIGFz\nc2VydFRydWUoIm5vIHVuZXhwZWN0ZWQgZXhjZXB0aW9uczogIiArIGV4Y2Vw\ndGlvbnMsIGV4Y2VwdGlvbnMuaXNFbXB0eSgpKTsKICAgIH0KfQo=\n","encoding":"base64"}

