{"sha":"c2902cf85729ce2b6b8535b2ce0c9c7a1d26e129","node_id":"MDQ6QmxvYjE1NzU5NTY6YzI5MDJjZjg1NzI5Y2UyYjZiODUzNWIyY2UwYzljN2ExZDI2ZTEyOQ==","size":5102,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/c2902cf85729ce2b6b8535b2ce0c9c7a1d26e129","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUgb3IgbW9yZQogKiBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlIGRpc3Ry\naWJ1dGVkIHdpdGgKICogdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLgogKiBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byBZb3UgdW5kZXIgdGhlIEFwYWNo\nZSBMaWNlbnNlLCBWZXJzaW9uIDIuMAogKiAodGhlICJMaWNlbnNlIik7IHlv\ndSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ug\nd2l0aAogKiB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBv\nZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hl\nLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWly\nZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcs\nIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlz\nIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQg\nV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIg\nZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRo\nZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5k\nCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFja2Fn\nZSBvcmcuYXBhY2hlLmFjdGl2ZW1xLnVzZWNhc2VzOwoKaW1wb3J0IGphdmF4\nLmptcy5Ub3BpYzsKaW1wb3J0IGphdmF4Lmptcy5Db25uZWN0aW9uOwoKaW1w\nb3J0IG9yZy5hcGFjaGUuaGVkd2lnLkptc1Rlc3RCYXNlOwppbXBvcnQgb3Jn\nLmFwYWNoZS5oZWR3aWcuam1zLlNlc3Npb25JbXBsOwppbXBvcnQgamF2YXgu\nam1zLkRlc3RpbmF0aW9uOwppbXBvcnQgamF2YXguam1zLkpNU0V4Y2VwdGlv\nbjsKaW1wb3J0IGphdmF4Lmptcy5NZXNzYWdlOwppbXBvcnQgamF2YXguam1z\nLlRleHRNZXNzYWdlOwoKaW1wb3J0IGp1bml0LmZyYW1ld29yay5UZXN0Q2Fz\nZTsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmptcy5zcGkuSGVkd2lnQ29u\nbmVjdGlvbkZhY3RvcnlJbXBsOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcu\nam1zLm1lc3NhZ2UuTWVzc2FnZUltcGw7CgoKaW1wb3J0IG9yZy5qdW5pdC5J\nZ25vcmU7CmltcG9ydCBvcmcuc2xmNGouTG9nZ2VyOwppbXBvcnQgb3JnLnNs\nZjRqLkxvZ2dlckZhY3Rvcnk7CgovKioKICogVXNlZnVsIGJhc2UgY2xhc3Mg\nZm9yIHVuaXQgdGVzdCBjYXNlcwogKi8KLy8gRG9lcyBub3QgY29udGFpbiBh\nbnkgdGVzdGNhc2VzLgpASWdub3JlCnB1YmxpYyBjbGFzcyBUZXN0U3VwcG9y\ndCBleHRlbmRzIEptc1Rlc3RCYXNlIHsKICAgIHByaXZhdGUgc3RhdGljIGZp\nbmFsIExvZ2dlciBMT0cgPSBMb2dnZXJGYWN0b3J5LmdldExvZ2dlcihUZXN0\nU3VwcG9ydC5jbGFzcyk7CgogICAgcHJvdGVjdGVkIEhlZHdpZ0Nvbm5lY3Rp\nb25GYWN0b3J5SW1wbCBjb25uZWN0aW9uRmFjdG9yeTsKICAgIHByb3RlY3Rl\nZCBib29sZWFuIHRvcGljID0gdHJ1ZTsKCiAgICBwdWJsaWMgVGVzdFN1cHBv\ncnQoKSB7CiAgICAgICAgc3VwZXIoKTsKICAgIH0KCiAgICBwdWJsaWMgVGVz\ndFN1cHBvcnQoU3RyaW5nIG5hbWUpIHsKICAgICAgICBzdXBlcihuYW1lKTsK\nICAgIH0KCiAgICBwcm90ZWN0ZWQgTWVzc2FnZUltcGwgY3JlYXRlTWVzc2Fn\nZSgpIHsKICAgICAgICByZXR1cm4gbmV3IE1lc3NhZ2VJbXBsKG51bGwpOwog\nICAgfQoKICAgIHByb3RlY3RlZCBEZXN0aW5hdGlvbiBjcmVhdGVEZXN0aW5h\ndGlvbihTdHJpbmcgc3ViamVjdCkgewogICAgICAgIGlmICh0b3BpYykgewog\nICAgICAgICAgICByZXR1cm4gU2Vzc2lvbkltcGwuYXNUb3BpYyhzdWJqZWN0\nKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gU2Vzc2lv\nbkltcGwuYXNUb3BpYyhzdWJqZWN0KTsKICAgICAgICB9CiAgICB9CgogICAg\ncHJvdGVjdGVkIHZvaWQgYXNzZXJ0VGV4dE1lc3NhZ2VzRXF1YWwoTWVzc2Fn\nZVtdIGZpcnN0U2V0LCBNZXNzYWdlW10gc2Vjb25kU2V0KSB0aHJvd3MgSk1T\nRXhjZXB0aW9uIHsKICAgICAgICBhc3NlcnRUZXh0TWVzc2FnZXNFcXVhbCgi\nIiwgZmlyc3RTZXQsIHNlY29uZFNldCk7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBAcGFyYW0gbWVzc3NhZ2UKICAgICAqIEBwYXJhbSBmaXJzdFNldAogICAg\nICogQHBhcmFtIHNlY29uZFNldAogICAgICovCiAgICBwcm90ZWN0ZWQgdm9p\nZCBhc3NlcnRUZXh0TWVzc2FnZXNFcXVhbChTdHJpbmcgbWVzc3NhZ2UsIE1l\nc3NhZ2VbXSBmaXJzdFNldCwKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIE1lc3NhZ2VbXSBzZWNvbmRTZXQpIHRocm93cyBK\nTVNFeGNlcHRpb24gewogICAgICAgIGFzc2VydEVxdWFscygiTWVzc2FnZSBj\nb3VudCBkb2VzIG5vdCBtYXRjaDogIiArIG1lc3NzYWdlLCBmaXJzdFNldC5s\nZW5ndGgsIHNlY29uZFNldC5sZW5ndGgpOwogICAgICAgIGZvciAoaW50IGkg\nPSAwOyBpIDwgc2Vjb25kU2V0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAg\nIFRleHRNZXNzYWdlIG0xID0gKFRleHRNZXNzYWdlKWZpcnN0U2V0W2ldOwog\nICAgICAgICAgICBUZXh0TWVzc2FnZSBtMiA9IChUZXh0TWVzc2FnZSlzZWNv\nbmRTZXRbaV07CiAgICAgICAgICAgIGFzc2VydFRleHRNZXNzYWdlRXF1YWwo\nIk1lc3NhZ2UgIiArIChpICsgMSkgKyAiIGRpZCBub3QgbWF0Y2ggOiAiLCBt\nMSwgbTIpOwogICAgICAgIH0KICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBh\nc3NlcnRFcXVhbHMoVGV4dE1lc3NhZ2UgbTEsIFRleHRNZXNzYWdlIG0yKSB0\naHJvd3MgSk1TRXhjZXB0aW9uIHsKICAgICAgICBhc3NlcnRFcXVhbHMoIiIs\nIG0xLCBtMik7CiAgICB9CgogICAgLyoqCiAgICAgKiBAcGFyYW0gbWVzc2Fn\nZQogICAgICogQHBhcmFtIGZpcnN0U2V0CiAgICAgKiBAcGFyYW0gc2Vjb25k\nU2V0CiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIGFzc2VydFRleHRNZXNz\nYWdlRXF1YWwoU3RyaW5nIG1lc3NhZ2UsIFRleHRNZXNzYWdlIG0xLCBUZXh0\nTWVzc2FnZSBtMikgdGhyb3dzIEpNU0V4Y2VwdGlvbiB7CiAgICAgICAgYXNz\nZXJ0RmFsc2UobWVzc2FnZSArICI6IGV4cGVjdGVkIHsiICsgbTEgKyAifSwg\nYnV0IHdhcyB7IiArIG0yICsgIn0iLCBtMSA9PSBudWxsIF4gbTIgPT0gbnVs\nbCk7CiAgICAgICAgaWYgKG0xID09IG51bGwpIHsKICAgICAgICAgICAgcmV0\ndXJuOwogICAgICAgIH0KICAgICAgICBhc3NlcnRFcXVhbHMobWVzc2FnZSwg\nbTEuZ2V0VGV4dCgpLCBtMi5nZXRUZXh0KCkpOwogICAgfQoKICAgIHByb3Rl\nY3RlZCB2b2lkIGFzc2VydEVxdWFscyhNZXNzYWdlIG0xLCBNZXNzYWdlIG0y\nKSB0aHJvd3MgSk1TRXhjZXB0aW9uIHsKICAgICAgICBhc3NlcnRFcXVhbHMo\nIiIsIG0xLCBtMik7CiAgICB9CgogICAgLyoqCiAgICAgKiBAcGFyYW0gbWVz\nc2FnZQogICAgICogQHBhcmFtIGZpcnN0U2V0CiAgICAgKiBAcGFyYW0gc2Vj\nb25kU2V0CiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIGFzc2VydEVxdWFs\ncyhTdHJpbmcgbWVzc2FnZSwgTWVzc2FnZSBtMSwgTWVzc2FnZSBtMikgdGhy\nb3dzIEpNU0V4Y2VwdGlvbiB7CiAgICAgICAgYXNzZXJ0RmFsc2UobWVzc2Fn\nZSArICI6IGV4cGVjdGVkIHsiICsgbTEgKyAifSwgYnV0IHdhcyB7IiArIG0y\nICsgIn0iLCBtMSA9PSBudWxsIF4gbTIgPT0gbnVsbCk7CiAgICAgICAgaWYg\nKG0xID09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0K\nICAgICAgICBhc3NlcnRUcnVlKG1lc3NhZ2UgKyAiOiBleHBlY3RlZCB7IiAr\nIG0xICsgIn0sIGJ1dCB3YXMgeyIgKyBtMiArICJ9IiwgbTEuZ2V0Q2xhc3Mo\nKSA9PSBtMi5nZXRDbGFzcygpKTsKICAgICAgICBpZiAobTEgaW5zdGFuY2Vv\nZiBUZXh0TWVzc2FnZSkgewogICAgICAgICAgICBhc3NlcnRUZXh0TWVzc2Fn\nZUVxdWFsKG1lc3NhZ2UsIChUZXh0TWVzc2FnZSltMSwgKFRleHRNZXNzYWdl\nKW0yKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhc3NlcnRFcXVh\nbHMobWVzc2FnZSwgbTEsIG0yKTsKICAgICAgICB9CiAgICB9CgogICAgcHJv\ndGVjdGVkIEhlZHdpZ0Nvbm5lY3Rpb25GYWN0b3J5SW1wbCBjcmVhdGVDb25u\nZWN0aW9uRmFjdG9yeSgpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIHJl\ndHVybiBuZXcgSGVkd2lnQ29ubmVjdGlvbkZhY3RvcnlJbXBsKCk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBGYWN0b3J5IG1ldGhvZCB0byBjcmVhdGUgYSBu\nZXcgY29ubmVjdGlvbgogICAgICovCiAgICBwcm90ZWN0ZWQgQ29ubmVjdGlv\nbiBjcmVhdGVDb25uZWN0aW9uKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAg\nICAgcmV0dXJuIGdldENvbm5lY3Rpb25GYWN0b3J5KCkuY3JlYXRlQ29ubmVj\ndGlvbigpOwogICAgfQoKICAgIHB1YmxpYyBIZWR3aWdDb25uZWN0aW9uRmFj\ndG9yeUltcGwgZ2V0Q29ubmVjdGlvbkZhY3RvcnkoKSB0aHJvd3MgRXhjZXB0\naW9uIHsKICAgICAgICBpZiAoY29ubmVjdGlvbkZhY3RvcnkgPT0gbnVsbCkg\newogICAgICAgICAgICBjb25uZWN0aW9uRmFjdG9yeSA9IGNyZWF0ZUNvbm5l\nY3Rpb25GYWN0b3J5KCk7CiAgICAgICAgICAgIGFzc2VydFRydWUoIlNob3Vs\nZCBoYXZlIGNyZWF0ZWQgYSBjb25uZWN0aW9uIGZhY3RvcnkhIiwgY29ubmVj\ndGlvbkZhY3RvcnkgIT0gbnVsbCk7CiAgICAgICAgfQogICAgICAgIHJldHVy\nbiBjb25uZWN0aW9uRmFjdG9yeTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgU3Ry\naW5nIGdldENvbnN1bWVyU3ViamVjdCgpIHsKICAgICAgICByZXR1cm4gZ2V0\nU3ViamVjdCgpOwogICAgfQoKICAgIHByb3RlY3RlZCBTdHJpbmcgZ2V0UHJv\nZHVjZXJTdWJqZWN0KCkgewogICAgICAgIHJldHVybiBnZXRTdWJqZWN0KCk7\nCiAgICB9CgogICAgcHJvdGVjdGVkIFN0cmluZyBnZXRTdWJqZWN0KCkgewog\nICAgICAgIHJldHVybiBnZXRDbGFzcygpLmdldE5hbWUoKSArICIuIiArIGdl\ndE5hbWUoKTsKICAgIH0KfQo=\n","encoding":"base64"}

