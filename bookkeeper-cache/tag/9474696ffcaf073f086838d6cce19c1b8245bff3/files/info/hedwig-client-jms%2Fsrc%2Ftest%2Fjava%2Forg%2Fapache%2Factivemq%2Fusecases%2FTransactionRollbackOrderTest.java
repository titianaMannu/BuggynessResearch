{"sha":"375004be89d3a4c498246fe6250c8cf2b72a1517","node_id":"MDQ6QmxvYjE1NzU5NTY6Mzc1MDA0YmU4OWQzYTRjNDk4MjQ2ZmU2MjUwYzhjZjJiNzJhMTUxNw==","size":5743,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/375004be89d3a4c498246fe6250c8cf2b72a1517","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUgb3IgbW9yZQogKiBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlIGRpc3Ry\naWJ1dGVkIHdpdGgKICogdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLgogKiBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZSB0byBZb3UgdW5kZXIgdGhlIEFwYWNo\nZSBMaWNlbnNlLCBWZXJzaW9uIDIuMAogKiAodGhlICJMaWNlbnNlIik7IHlv\ndSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ug\nd2l0aAogKiB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBv\nZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hl\nLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWly\nZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcs\nIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlz\nIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQg\nV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIg\nZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRo\nZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5k\nCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFja2Fn\nZSBvcmcuYXBhY2hlLmFjdGl2ZW1xLnVzZWNhc2VzOwoKaW1wb3J0IGphdmF4\nLmptcy5Ub3BpYzsKCmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5KbXNUZXN0\nQmFzZTsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmptcy5TZXNzaW9uSW1w\nbDsKaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7CmltcG9ydCBqYXZhLnV0\naWwuTGlzdDsKaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkNvdW50RG93\nbkxhdGNoOwoKaW1wb3J0IGphdmF4Lmptcy5Db25uZWN0aW9uOwppbXBvcnQg\namF2YXguam1zLkRlc3RpbmF0aW9uOwppbXBvcnQgamF2YXguam1zLkpNU0V4\nY2VwdGlvbjsKaW1wb3J0IGphdmF4Lmptcy5NZXNzYWdlOwppbXBvcnQgamF2\nYXguam1zLk1lc3NhZ2VDb25zdW1lcjsKaW1wb3J0IGphdmF4Lmptcy5NZXNz\nYWdlTGlzdGVuZXI7CmltcG9ydCBqYXZheC5qbXMuTWVzc2FnZVByb2R1Y2Vy\nOwppbXBvcnQgamF2YXguam1zLlNlc3Npb247CmltcG9ydCBqYXZheC5qbXMu\nVGV4dE1lc3NhZ2U7CgppbXBvcnQganVuaXQuZnJhbWV3b3JrLlRlc3RDYXNl\nOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuam1zLnNwaS5IZWR3aWdDb25u\nZWN0aW9uRmFjdG9yeUltcGw7CgppbXBvcnQgb3JnLnNsZjRqLkxvZ2dlcjsK\naW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJGYWN0b3J5OwoKLyoqCiAqIFRlc3Qg\nY2FzZSBmb3IgQU1RLTI2OAogKi8KcHVibGljIGZpbmFsIGNsYXNzIFRyYW5z\nYWN0aW9uUm9sbGJhY2tPcmRlclRlc3QgZXh0ZW5kcyBKbXNUZXN0QmFzZSB7\nCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2dnZXIgTE9HID0gTG9nZ2Vy\nRmFjdG9yeS5nZXRMb2dnZXIoVHJhbnNhY3Rpb25Sb2xsYmFja09yZGVyVGVz\ndC5jbGFzcyk7CgogICAgcHJpdmF0ZSB2b2xhdGlsZSBTdHJpbmcgcmVjZWl2\nZWRUZXh0OwoKICAgIHByaXZhdGUgU2Vzc2lvbiBwcm9kdWNlclNlc3Npb247\nCiAgICBwcml2YXRlIFNlc3Npb24gY29uc3VtZXJTZXNzaW9uOwogICAgcHJp\ndmF0ZSBEZXN0aW5hdGlvbiBxdWV1ZTsKCiAgICBwcml2YXRlIE1lc3NhZ2VQ\ncm9kdWNlciBwcm9kdWNlcjsKICAgIHByaXZhdGUgTWVzc2FnZUNvbnN1bWVy\nIGNvbnN1bWVyOwogICAgcHJpdmF0ZSBDb25uZWN0aW9uIGNvbm5lY3Rpb247\nCiAgICBwcml2YXRlIENvdW50RG93bkxhdGNoIGxhdGNoID0gbmV3IENvdW50\nRG93bkxhdGNoKDEpOwogICAgcHJpdmF0ZSBpbnQgbnVtTWVzc2FnZXMgPSA1\nOwogICAgcHJpdmF0ZSBMaXN0PFN0cmluZz4gbXNnU2VudCA9IG5ldyBBcnJh\neUxpc3Q8U3RyaW5nPigpOwogICAgcHJpdmF0ZSBMaXN0PFN0cmluZz4gbXNn\nQ29tbWl0dGVkID0gbmV3IEFycmF5TGlzdDxTdHJpbmc+KCk7CiAgICBwcml2\nYXRlIExpc3Q8U3RyaW5nPiBtc2dSb2xsZWRCYWNrID0gbmV3IEFycmF5TGlz\ndDxTdHJpbmc+KCk7CiAgICBwcml2YXRlIExpc3Q8U3RyaW5nPiBtc2dSZWRl\nbGl2ZXJlZCA9IG5ldyBBcnJheUxpc3Q8U3RyaW5nPigpOwoKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RUcmFuc2FjdGlvbigpIHRocm93cyBFeGNlcHRpb24gewoK\nICAgICAgICBIZWR3aWdDb25uZWN0aW9uRmFjdG9yeUltcGwgZmFjdG9yeSA9\nIG5ldyBIZWR3aWdDb25uZWN0aW9uRmFjdG9yeUltcGwoKTsKCiAgICAgICAg\nY29ubmVjdGlvbiA9IGZhY3RvcnkuY3JlYXRlQ29ubmVjdGlvbigpOwogICAg\nICAgIHF1ZXVlID0gU2Vzc2lvbkltcGwuYXNUb3BpYyhnZXRDbGFzcygpLmdl\ndE5hbWUoKSArICIuIiArIGdldE5hbWUoKSk7CgogICAgICAgIHByb2R1Y2Vy\nU2Vzc2lvbiA9IGNvbm5lY3Rpb24uY3JlYXRlU2Vzc2lvbihmYWxzZSwgU2Vz\nc2lvbi5BVVRPX0FDS05PV0xFREdFKTsKICAgICAgICBjb25zdW1lclNlc3Np\nb24gPSBjb25uZWN0aW9uLmNyZWF0ZVNlc3Npb24odHJ1ZSwgMCk7CgogICAg\nICAgIHByb2R1Y2VyID0gcHJvZHVjZXJTZXNzaW9uLmNyZWF0ZVByb2R1Y2Vy\nKHF1ZXVlKTsKCiAgICAgICAgY29uc3VtZXIgPSBjb25zdW1lclNlc3Npb24u\nY3JlYXRlQ29uc3VtZXIocXVldWUpOwogICAgICAgIGNvbnN1bWVyLnNldE1l\nc3NhZ2VMaXN0ZW5lcihuZXcgTWVzc2FnZUxpc3RlbmVyKCkgewoKICAgICAg\nICAgICAgaW50IG1zZ0NvdW50OwogICAgICAgICAgICBpbnQgbXNnQ29tbWl0\ndGVkQ291bnQ7CgogICAgICAgICAgICBwdWJsaWMgdm9pZCBvbk1lc3NhZ2Uo\nTWVzc2FnZSBtKSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAg\nICAgICAgICAgIG1zZ0NvdW50Kys7CiAgICAgICAgICAgICAgICAgICAgVGV4\ndE1lc3NhZ2UgdG0gPSAoVGV4dE1lc3NhZ2UpbTsKICAgICAgICAgICAgICAg\nICAgICByZWNlaXZlZFRleHQgPSB0bS5nZXRUZXh0KCk7CgogICAgICAgICAg\nICAgICAgICAgIGlmICh0bS5nZXRKTVNSZWRlbGl2ZXJlZCgpKSB7CiAgICAg\nICAgICAgICAgICAgICAgICAgIG1zZ1JlZGVsaXZlcmVkLmFkZChyZWNlaXZl\nZFRleHQpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAg\nICAgICAgTE9HLmluZm8oImNvbnN1bWVyIHJlY2VpdmVkIG1lc3NhZ2U6ICIg\nKyByZWNlaXZlZFRleHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAr\nICh0bS5nZXRKTVNSZWRlbGl2ZXJlZCgpID8gIiAqKiBSZWRlbGl2ZXJlZCAq\nKiIgOiAiIikpOwogICAgICAgICAgICAgICAgICAgIGlmIChtc2dDb3VudCA9\nPSAzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1zZ1JvbGxlZEJhY2su\nYWRkKHJlY2VpdmVkVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNv\nbnN1bWVyU2Vzc2lvbi5yb2xsYmFjaygpOwogICAgICAgICAgICAgICAgICAg\nICAgICBMT0cuaW5mbygiW21zZzogIiArIHJlY2VpdmVkVGV4dCArICJdICoq\nIHJvbGxlZCBiYWNrICoqIik7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNl\nIHsKICAgICAgICAgICAgICAgICAgICAgICAgbXNnQ29tbWl0dGVkQ291bnQr\nKzsKICAgICAgICAgICAgICAgICAgICAgICAgbXNnQ29tbWl0dGVkLmFkZChy\nZWNlaXZlZFRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdW1l\nclNlc3Npb24uY29tbWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIExP\nRy5pbmZvKCJbbXNnOiAiICsgcmVjZWl2ZWRUZXh0ICsgIl0gY29tbWl0dGVk\nIHRyYW5zYWN0aW9uICIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAg\nICAgICAgICAgICAgICBpZiAobXNnQ29tbWl0dGVkQ291bnQgPT0gbnVtTWVz\nc2FnZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGF0Y2guY291bnRE\nb3duKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAg\nfSBjYXRjaCAoSk1TRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgICAg\nICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdW1lclNlc3Np\nb24ucm9sbGJhY2soKTsKICAgICAgICAgICAgICAgICAgICAgICAgTE9HLmlu\nZm8oInJvbGxlZCBiYWNrIHRyYW5zYWN0aW9uIik7CiAgICAgICAgICAgICAg\nICAgICAgfSBjYXRjaCAoSk1TRXhjZXB0aW9uIGUxKSB7CiAgICAgICAgICAg\nICAgICAgICAgICAgIExPRy5pbmZvKGUxLnRvU3RyaW5nKCkpOwogICAgICAg\nICAgICAgICAgICAgICAgICBlMS5wcmludFN0YWNrVHJhY2UoKTsKICAgICAg\nICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgTE9HLmluZm8o\nZS50b1N0cmluZygpKTsKICAgICAgICAgICAgICAgICAgICBlLnByaW50U3Rh\nY2tUcmFjZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAg\nICAgICAgfSk7CiAgICAgICAgY29ubmVjdGlvbi5zdGFydCgpOwoKICAgICAg\nICBUZXh0TWVzc2FnZSB0bSA9IG51bGw7CiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgZm9yIChpbnQgaSA9IDE7IGkgPD0gbnVtTWVzc2FnZXM7IGkrKykg\newogICAgICAgICAgICAgICAgdG0gPSBwcm9kdWNlclNlc3Npb24uY3JlYXRl\nVGV4dE1lc3NhZ2UoKTsKICAgICAgICAgICAgICAgIHRtLnNldFRleHQoIkhl\nbGxvICIgKyBpKTsKICAgICAgICAgICAgICAgIG1zZ1NlbnQuYWRkKHRtLmdl\ndFRleHQoKSk7CiAgICAgICAgICAgICAgICBwcm9kdWNlci5zZW5kKHRtKTsK\nICAgICAgICAgICAgICAgIExPRy5pbmZvKCJwcm9kdWNlciBzZW50IG1lc3Nh\nZ2U6ICIgKyB0bS5nZXRUZXh0KCkpOwogICAgICAgICAgICB9CiAgICAgICAg\nfSBjYXRjaCAoSk1TRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgZS5wcmlu\ndFN0YWNrVHJhY2UoKTsKICAgICAgICB9CgogICAgICAgIExPRy5pbmZvKCJX\nYWl0aW5nIGZvciBsYXRjaCIpOwogICAgICAgIGxhdGNoLmF3YWl0KCk7Cgog\nICAgICAgIGFzc2VydEVxdWFscygxLCBtc2dSb2xsZWRCYWNrLnNpemUoKSk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIG1zZ1JlZGVsaXZlcmVkLnNpemUo\nKSk7CgogICAgICAgIExPRy5pbmZvKCJtc2cgUm9sbGVkQmFjayA9ICIgKyBt\nc2dSb2xsZWRCYWNrLmdldCgwKSk7CiAgICAgICAgTE9HLmluZm8oIm1zZyBS\nZWRlbGl2ZXJlZCA9ICIgKyBtc2dSZWRlbGl2ZXJlZC5nZXQoMCkpOwoKICAg\nICAgICBhc3NlcnRFcXVhbHMobXNnUm9sbGVkQmFjay5nZXQoMCksIG1zZ1Jl\nZGVsaXZlcmVkLmdldCgwKSk7CgogICAgICAgIGFzc2VydEVxdWFscyhudW1N\nZXNzYWdlcywgbXNnU2VudC5zaXplKCkpOwogICAgICAgIGFzc2VydEVxdWFs\ncyhudW1NZXNzYWdlcywgbXNnQ29tbWl0dGVkLnNpemUoKSk7CgogICAgICAg\nIGFzc2VydEVxdWFscyhtc2dTZW50LCBtc2dDb21taXR0ZWQpOwoKICAgIH0K\nCiAgICBwcm90ZWN0ZWQgdm9pZCB0ZWFyRG93bigpIHRocm93cyBFeGNlcHRp\nb24gewogICAgICAgIGlmIChjb25uZWN0aW9uICE9IG51bGwpIHsKICAgICAg\nICAgICAgTE9HLmluZm8oIkNsb3NpbmcgdGhlIGNvbm5lY3Rpb24iKTsKICAg\nICAgICAgICAgY29ubmVjdGlvbi5jbG9zZSgpOwogICAgICAgIH0KICAgICAg\nICBzdXBlci50ZWFyRG93bigpOwogICAgfQp9Cg==\n","encoding":"base64"}

