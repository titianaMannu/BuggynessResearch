{"sha":"ecf8830ea8d0b10d33aef09323a8751a4e3da1fe","node_id":"MDQ6QmxvYjE1NzU5NTY6ZWNmODgzMGVhOGQwYjEwZDMzYWVmMDkzMjNhODc1MWE0ZTNkYTFmZQ==","size":3400,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/ecf8830ea8d0b10d33aef09323a8751a4e3da1fe","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCnBh\nY2thZ2Ugb3JnLmFwYWNoZS5oZWR3aWc7CgppbXBvcnQgb3JnLmFwYWNoZS5o\nZWR3aWcuc2VydmVyLkhlZHdpZ0h1YlRlc3RCYXNlOwppbXBvcnQgb3JnLmFw\nYWNoZS5oZWR3aWcuc2VydmVyLkhlZHdpZ0h1YlRlc3RCYXNlOwppbXBvcnQg\namF2YS5pby4qOwoKLyoqCiAqIERvZXMgYW55IGptcyBzcGVjaWZpYyBpbml0\naWFsaXphdGlvbnMKICovCnB1YmxpYyBjbGFzcyBKbXNUZXN0QmFzZSBleHRl\nbmRzIEhlZHdpZ0h1YlRlc3RCYXNlIHsKICAgIHByb3RlY3RlZCBTdHJpbmcg\nZ2VuZXJhdGVkQ29uZmlnOwoKICAgIHB1YmxpYyBKbXNUZXN0QmFzZSgpewog\nICAgICAgIHN1cGVyKDEpOwogICAgfQoKICAgIHB1YmxpYyBKbXNUZXN0QmFz\nZShTdHJpbmcgbmFtZSl7CiAgICAgICAgc3VwZXIobmFtZSwgMSk7CiAgICB9\nCgogICAgcHJpdmF0ZSB2b2lkIGluaXQoKSB7CiAgICAgICAgLy8gc2luZ2xl\nIGJvb2tpZQogICAgICAgIHRoaXMubnVtQm9va2llcyA9IDE7CiAgICAgICAg\nLy8gaXMgdGhpcyByZXF1aXJlZCA/CiAgICAgICAgLy8gZGlzYWJsZSBzc2wK\nICAgICAgICB0aGlzLnNzbEVuYWJsZWQgPSBmYWxzZTsKICAgICAgICAvLyBO\nb3Qgc3VyZSB3aHkgaXQgd29ya3Mgb25seSBpbiBzdGFuZGFsb25lIG1vZGUg\nLSBzb21ldGhpbmcgZm9yIGhlZHdpZyBmb2xrcyB0byBkZWJ1ZyA/CiAgICAg\nICAgdGhpcy5zdGFuZGFsb25lID0gdHJ1ZTsKICAgICAgICAvLyB0aGlzLnN0\nYW5kYWxvbmUgPSBmYWxzZTsKICAgICAgICAvLyByZXF1aXJlZCA/CiAgICAg\nICAgLy8gdGhpcy5yZWFkRGVsYXkgPSAxTDsKICAgIH0KCiAgICBAT3ZlcnJp\nZGUKICAgIHByb3RlY3RlZCB2b2lkIHNldFVwKCkgdGhyb3dzIEV4Y2VwdGlv\nbiB7CiAgICAgICAgaW5pdCgpOwogICAgICAgIHN1cGVyLnNldFVwKCk7CiAg\nICAgICAgLy8gTm93IGdlbmVyYXRlIEhFRFdJR19DTElFTlRfQ09ORklHX0ZJ\nTEUgYW5kIHNldCB0aGUgcmlnaHQgaG9zdC9wb3J0IHRvIGl0LgogICAgICAg\nIHRoaXMuZ2VuZXJhdGVkQ29uZmlnID0gZ2VuZXJhdGVDb25maWcobmV3IEh1\nYkNsaWVudENvbmZpZ3VyYXRpb24oKQogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgLmdldERlZmF1bHRTZXJ2ZXJIZWR3\naWdTb2NrZXRBZGRyZXNzKCkuZ2V0UG9ydCgpKTsKICAgICAgICBTeXN0ZW0u\nc2V0UHJvcGVydHkob3JnLmFwYWNoZS5oZWR3aWcuam1zLkNvbm5lY3Rpb25J\nbXBsLkhFRFdJR19DTElFTlRfQ09ORklHX0ZJTEUsIGdlbmVyYXRlZENvbmZp\nZyk7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwcm90ZWN0ZWQgdm9pZCB0\nZWFyRG93bigpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIHN1cGVyLnRl\nYXJEb3duKCk7CiAgICAgICAgLy8gYmVzdCBjYXNlCiAgICAgICAgaWYgKG51\nbGwgIT0gZ2VuZXJhdGVkQ29uZmlnKSB7CiAgICAgICAgICAgIChuZXcgRmls\nZShnZW5lcmF0ZWRDb25maWcpKS5kZWxldGUoKTsKICAgICAgICAgICAgZ2Vu\nZXJhdGVkQ29uZmlnID0gbnVsbDsKICAgICAgICB9CiAgICB9CgogICAgLy8g\nT3ZlcnJpZGUgb25seSBzdGFuZGFsb25lLCBzc2xFbmFibGVkLCBzZXJ2ZXIg\ncG9ydCAtIHRoZSBjb25maWcgd2UgcmVseSBvbi4KICAgIHByb3RlY3RlZCBT\ndHJpbmcgZ2VuZXJhdGVDb25maWcoaW50IHNlcnZlclBvcnQpIHRocm93cyBJ\nT0V4Y2VwdGlvbiB7CiAgICAgICAgRmlsZSBjb25maWdGaWxlID0gRmlsZS5j\ncmVhdGVUZW1wRmlsZSgiam1zXyIsICIuY29uZiIpOwogICAgICAgIEJ1ZmZl\ncmVkV3JpdGVyIHdyaXRlciA9IG5ldyBCdWZmZXJlZFdyaXRlcihuZXcgT3V0\ncHV0U3RyZWFtV3JpdGVyKG5ldyBGaWxlT3V0cHV0U3RyZWFtKGNvbmZpZ0Zp\nbGUpLCAidXRmLTgiKSk7CiAgICAgICAgd3JpdGVyLndyaXRlKCIjIFRoZSBk\nZWZhdWx0IEhlZHdpZyBzZXJ2ZXIgaG9zdCB0byBjb250YWN0XG4iCiAgICAg\nICAgICAgICAgICAgICAgICsgImRlZmF1bHRfc2VydmVyX2hvc3Q9IiArIEhP\nU1QgKyAiOiIgKyBzZXJ2ZXJQb3J0ICsgIlxuIik7CiAgICAgICAgd3JpdGVy\nLndyaXRlKCIjIEZsYWcgaW5kaWNhdGluZyBpZiB0aGUgc2VydmVyIHNob3Vs\nZCBhbHNvIG9wZXJhdGUgaW4gU1NMIG1vZGUuXG5zc2xfZW5hYmxlZD1mYWxz\nZVxuIik7CiAgICAgICAgd3JpdGVyLmZsdXNoKCk7CiAgICAgICAgd3JpdGVy\nLmNsb3NlKCk7CiAgICAgICAgY29uZmlnRmlsZS5kZWxldGVPbkV4aXQoKTsK\nICAgICAgICByZXR1cm4gY29uZmlnRmlsZS5nZXRBYnNvbHV0ZVBhdGgoKTsK\nICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBzdGFydEh1YlNlcnZlcnMoKSB0\naHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBzdXBlci5zdGFydEh1YlNlcnZl\ncnMoKTsKICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oInN0YXJ0SHViU2Vy\ndmVycyBkb25lIC4uLiAiICsgc2VydmVyc0xpc3QpOwogICAgfQoKCiAgICBw\ncm90ZWN0ZWQgdm9pZCBzdG9wSHViU2VydmVycygpIHRocm93cyBFeGNlcHRp\nb24gewogICAgICAgIHN1cGVyLnN0b3BIdWJTZXJ2ZXJzKCk7CiAgICAgICAg\nU3lzdGVtLm91dC5wcmludGxuKCJzdG9wSHViU2VydmVycyBkb25lIC4uLiAi\nICsgc2VydmVyc0xpc3QpOwogICAgfQp9Cg==\n","encoding":"base64"}

