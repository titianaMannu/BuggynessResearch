{"sha":"237c7dec646a12202b15e56607836f4fce82acab","node_id":"MDQ6QmxvYjE1NzU5NTY6MjM3YzdkZWM2NDZhMTIyMDJiMTVlNTY2MDc4MzZmNGZjZTgyYWNhYg==","size":22945,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/237c7dec646a12202b15e56607836f4fce82acab","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIuY29tbW9uOwoKaW1wb3J0\nIGphdmEuaW8uRmlsZUlucHV0U3RyZWFtOwppbXBvcnQgamF2YS5pby5GaWxl\nTm90Rm91bmRFeGNlcHRpb247CmltcG9ydCBqYXZhLmlvLklucHV0U3RyZWFt\nOwppbXBvcnQgamF2YS5uZXQuSW5ldEFkZHJlc3M7CmltcG9ydCBqYXZhLm5l\ndC5VUkw7CmltcG9ydCBqYXZhLm5ldC5Vbmtub3duSG9zdEV4Y2VwdGlvbjsK\naW1wb3J0IGphdmEudXRpbC5BcnJheXM7CmltcG9ydCBqYXZhLnV0aWwuTGlu\na2VkTGlzdDsKaW1wb3J0IGphdmEudXRpbC5MaXN0OwoKaW1wb3J0IG9yZy5h\ncGFjaGUuYm9va2tlZXBlci51dGlsLlJlZmxlY3Rpb25VdGlsczsKaW1wb3J0\nIG9yZy5hcGFjaGUuY29tbW9ucy5jb25maWd1cmF0aW9uLkNvbmZpZ3VyYXRp\nb25FeGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMubGFuZy5T\ndHJpbmdVdGlsczsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmNvbmYuQWJz\ndHJhY3RDb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcu\nc2VydmVyLm1ldGEuTWV0YWRhdGFNYW5hZ2VyRmFjdG9yeTsKaW1wb3J0IG9y\nZy5hcGFjaGUuaGVkd2lnLnNlcnZlci50b3BpY3MuSHViTG9hZDsKaW1wb3J0\nIG9yZy5hcGFjaGUuaGVkd2lnLnV0aWwuSGVkd2lnU29ja2V0QWRkcmVzczsK\nCmltcG9ydCBjb20uZ29vZ2xlLnByb3RvYnVmLkJ5dGVTdHJpbmc7CgpwdWJs\naWMgY2xhc3MgU2VydmVyQ29uZmlndXJhdGlvbiBleHRlbmRzIEFic3RyYWN0\nQ29uZmlndXJhdGlvbiB7CiAgICBwdWJsaWMgZmluYWwgc3RhdGljIFN0cmlu\nZyBSRUdJT04gPSAicmVnaW9uIjsKICAgIHByb3RlY3RlZCBmaW5hbCBzdGF0\naWMgU3RyaW5nIE1BWF9NRVNTQUdFX1NJWkUgPSAibWF4X21lc3NhZ2Vfc2l6\nZSI7CiAgICBwcm90ZWN0ZWQgZmluYWwgc3RhdGljIFN0cmluZyBSRUFEQUhF\nQURfQ09VTlQgPSAicmVhZGFoZWFkX2NvdW50IjsKICAgIHByb3RlY3RlZCBm\naW5hbCBzdGF0aWMgU3RyaW5nIFJFQURBSEVBRF9TSVpFID0gInJlYWRhaGVh\nZF9zaXplIjsKICAgIHByb3RlY3RlZCBmaW5hbCBzdGF0aWMgU3RyaW5nIENB\nQ0hFX1NJWkUgPSAiY2FjaGVfc2l6ZSI7CiAgICBwcm90ZWN0ZWQgZmluYWwg\nc3RhdGljIFN0cmluZyBDQUNIRV9FTlRSWV9UVEwgPSAiY2FjaGVfZW50cnlf\ndHRsIjsKICAgIHByb3RlY3RlZCBmaW5hbCBzdGF0aWMgU3RyaW5nIFNDQU5f\nQkFDS09GRl9NU0VDID0gInNjYW5fYmFja29mZl9tcyI7CiAgICBwcm90ZWN0\nZWQgZmluYWwgc3RhdGljIFN0cmluZyBTRVJWRVJfUE9SVCA9ICJzZXJ2ZXJf\ncG9ydCI7CiAgICBwcm90ZWN0ZWQgZmluYWwgc3RhdGljIFN0cmluZyBTU0xf\nU0VSVkVSX1BPUlQgPSAic3NsX3NlcnZlcl9wb3J0IjsKICAgIHByb3RlY3Rl\nZCBmaW5hbCBzdGF0aWMgU3RyaW5nIFpLX1BSRUZJWCA9ICJ6a19wcmVmaXgi\nOwogICAgcHJvdGVjdGVkIGZpbmFsIHN0YXRpYyBTdHJpbmcgWktfSE9TVCA9\nICJ6a19ob3N0IjsKICAgIHByb3RlY3RlZCBmaW5hbCBzdGF0aWMgU3RyaW5n\nIFpLX1RJTUVPVVQgPSAiemtfdGltZW91dCI7CiAgICBwcm90ZWN0ZWQgZmlu\nYWwgc3RhdGljIFN0cmluZyBSRUFEQUhFQURfRU5BQkxFRCA9ICJyZWFkYWhl\nYWRfZW5hYmxlZCI7CiAgICBwcm90ZWN0ZWQgZmluYWwgc3RhdGljIFN0cmlu\nZyBTVEFOREFMT05FID0gInN0YW5kYWxvbmUiOwogICAgcHJvdGVjdGVkIGZp\nbmFsIHN0YXRpYyBTdHJpbmcgUkVHSU9OUyA9ICJyZWdpb25zIjsKICAgIHBy\nb3RlY3RlZCBmaW5hbCBzdGF0aWMgU3RyaW5nIENFUlRfTkFNRSA9ICJjZXJ0\nX25hbWUiOwogICAgcHJvdGVjdGVkIGZpbmFsIHN0YXRpYyBTdHJpbmcgQ0VS\nVF9QQVRIID0gImNlcnRfcGF0aCI7CiAgICBwcm90ZWN0ZWQgZmluYWwgc3Rh\ndGljIFN0cmluZyBQQVNTV09SRCA9ICJwYXNzd29yZCI7CiAgICBwcm90ZWN0\nZWQgZmluYWwgc3RhdGljIFN0cmluZyBTU0xfRU5BQkxFRCA9ICJzc2xfZW5h\nYmxlZCI7CiAgICBwcm90ZWN0ZWQgZmluYWwgc3RhdGljIFN0cmluZyBDT05T\nVU1FX0lOVEVSVkFMID0gImNvbnN1bWVfaW50ZXJ2YWwiOwogICAgcHJvdGVj\ndGVkIGZpbmFsIHN0YXRpYyBTdHJpbmcgSU5JVF9OVU1fVE9QSUNTID0gImlu\naXRfbnVtX3RvcGljcyI7CiAgICBwcm90ZWN0ZWQgZmluYWwgc3RhdGljIFN0\ncmluZyBNQVhfTlVNX1RPUElDUyA9ICJtYXhfbnVtX3RvcGljcyI7CiAgICBw\ncm90ZWN0ZWQgZmluYWwgc3RhdGljIFN0cmluZyBSRVRFTlRJT05fU0VDUyA9\nICJyZXRlbnRpb25fc2VjcyI7CiAgICBwcm90ZWN0ZWQgZmluYWwgc3RhdGlj\nIFN0cmluZyBSRVRFTlRJT05fU0VDU19BRlRFUl9BQ0NFU1MgPSAicmV0ZW50\naW9uX3NlY3NfYWZ0ZXJfYWNjZXNzIjsKICAgIHByb3RlY3RlZCBmaW5hbCBz\ndGF0aWMgU3RyaW5nIElOVEVSX1JFR0lPTl9TU0xfRU5BQkxFRCA9ICJpbnRl\ncl9yZWdpb25fc3NsX2VuYWJsZWQiOwogICAgcHJvdGVjdGVkIGZpbmFsIHN0\nYXRpYyBTdHJpbmcgTUVTU0FHRVNfQ09OU1VNRURfVEhSRUFEX1JVTl9JTlRF\nUlZBTCA9ICJtZXNzYWdlc19jb25zdW1lZF90aHJlYWRfcnVuX2ludGVydmFs\nIjsKICAgIHByb3RlY3RlZCBmaW5hbCBzdGF0aWMgU3RyaW5nIEJLX0VOU0VN\nQkxFX1NJWkUgPSAiYmtfZW5zZW1ibGVfc2l6ZSI7CiAgICBARGVwcmVjYXRl\nZAogICAgcHJvdGVjdGVkIGZpbmFsIHN0YXRpYyBTdHJpbmcgQktfUVVPUlVN\nX1NJWkUgPSAiYmtfcXVvcnVtX3NpemUiOwogICAgcHJvdGVjdGVkIGZpbmFs\nIHN0YXRpYyBTdHJpbmcgQktfV1JJVEVfUVVPUlVNX1NJWkUgPSAiYmtfd3Jp\ndGVfcXVvcnVtX3NpemUiOwogICAgcHJvdGVjdGVkIGZpbmFsIHN0YXRpYyBT\ndHJpbmcgQktfQUNLX1FVT1JVTV9TSVpFID0gImJrX2Fja19xdW9ydW1fc2l6\nZSI7CiAgICBwcm90ZWN0ZWQgZmluYWwgc3RhdGljIFN0cmluZyBSRVRSWV9S\nRU1PVEVfU1VCU0NSSUJFX1RIUkVBRF9SVU5fSU5URVJWQUwgPSAicmV0cnlf\ncmVtb3RlX3N1YnNjcmliZV90aHJlYWRfcnVuX2ludGVydmFsIjsKICAgIHBy\nb3RlY3RlZCBmaW5hbCBzdGF0aWMgU3RyaW5nIERFRkFVTFRfTUVTU0FHRV9X\nSU5ET1dfU0laRSA9CiAgICAgICAgImRlZmF1bHRfbWVzc2FnZV93aW5kb3df\nc2l6ZSI7CiAgICBwcm90ZWN0ZWQgZmluYWwgc3RhdGljIFN0cmluZyBOVU1f\nUkVBREFIRUFEX0NBQ0hFX1RIUkVBRFMgPSAibnVtX3JlYWRhaGVhZF9jYWNo\nZV90aHJlYWRzIjsKICAgIHByb3RlY3RlZCBmaW5hbCBzdGF0aWMgU3RyaW5n\nIE5VTV9ERUxJVkVSWV9USFJFQURTID0gIm51bV9kZWxpdmVyeV90aHJlYWRz\nIjsKCiAgICBwcm90ZWN0ZWQgZmluYWwgc3RhdGljIFN0cmluZyBNQVhfRU5U\nUklFU19QRVJfTEVER0VSID0gIm1heF9lbnRyaWVzX3Blcl9sZWRnZXIiOwog\nICAgcHJvdGVjdGVkIGZpbmFsIHN0YXRpYyBTdHJpbmcgUkVCQUxBTkNFX1RP\nTEVSQU5DRV9QRVJDRU5UQUdFID0gInJlYmFsYW5jZV90b2xlcmFuY2UiOwog\nICAgcHJvdGVjdGVkIGZpbmFsIHN0YXRpYyBTdHJpbmcgUkVCQUxBTkNFX01B\nWF9TSEVEID0gInJlYmFsYW5jZV9tYXhfc2hlZCI7CiAgICBwcm90ZWN0ZWQg\nZmluYWwgc3RhdGljIFN0cmluZyBSRUJBTEFOQ0VfSU5URVJWQUxfU0VDID0g\nInJlYmFsYW5jZV9pbnRlcnZhbF9zZWMiOwoKICAgIC8vIG1hbmFnZXIgcmVs\nYXRlZCBzZXR0aW5ncwogICAgcHJvdGVjdGVkIGZpbmFsIHN0YXRpYyBTdHJp\nbmcgTUVUQURBVEFfTUFOQUdFUl9CQVNFRF9UT1BJQ19NQU5BR0VSX0VOQUJM\nRUQgPSAibWV0YWRhdGFfbWFuYWdlcl9iYXNlZF90b3BpY19tYW5hZ2VyX2Vu\nYWJsZWQiOwogICAgcHJvdGVjdGVkIGZpbmFsIHN0YXRpYyBTdHJpbmcgTUVU\nQURBVEFfTUFOQUdFUl9GQUNUT1JZX0NMQVNTID0gIm1ldGFkYXRhX21hbmFn\nZXJfZmFjdG9yeV9jbGFzcyI7CgogICAgLy8gbWV0YXN0b3JlIHNldHRpbmdz\nLCBvbmx5IGJlaW5nIHVzZWQgd2hlbiBNRVRBREFUQV9NQU5BR0VSX0ZBQ1RP\nUllfQ0xBU1MgaXMgTXNNZXRhZGF0YU1hbmFnZXJGYWN0b3J5CiAgICBwcm90\nZWN0ZWQgZmluYWwgc3RhdGljIFN0cmluZyBNRVRBU1RPUkVfSU1QTF9DTEFT\nUyA9ICJtZXRhc3RvcmVfaW1wbF9jbGFzcyI7CiAgICBwcm90ZWN0ZWQgZmlu\nYWwgc3RhdGljIFN0cmluZyBNRVRBU1RPUkVfTUFYX0VOVFJJRVNfUEVSX1ND\nQU4gPSAibWV0YXN0b3JlTWF4RW50cmllc1BlclNjYW4iOwoKICAgIHByaXZh\ndGUgc3RhdGljIENsYXNzTG9hZGVyIGRlZmF1bHRMb2FkZXI7CiAgICBzdGF0\naWMgewogICAgICAgIGRlZmF1bHRMb2FkZXIgPSBUaHJlYWQuY3VycmVudFRo\ncmVhZCgpLmdldENvbnRleHRDbGFzc0xvYWRlcigpOwogICAgICAgIGlmIChu\ndWxsID09IGRlZmF1bHRMb2FkZXIpIHsKICAgICAgICAgICAgZGVmYXVsdExv\nYWRlciA9IFNlcnZlckNvbmZpZ3VyYXRpb24uY2xhc3MuZ2V0Q2xhc3NMb2Fk\nZXIoKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gdGhlc2UgYXJlIHRoZSBk\nZXJpdmVkIGF0dHJpYnV0ZXMKICAgIHByb3RlY3RlZCBCeXRlU3RyaW5nIG15\nUmVnaW9uQnl0ZVN0cmluZyA9IG51bGw7CiAgICBwcm90ZWN0ZWQgSGVkd2ln\nU29ja2V0QWRkcmVzcyBteVNlcnZlckFkZHJlc3MgPSBudWxsOwogICAgcHJv\ndGVjdGVkIExpc3Q8U3RyaW5nPiByZWdpb25MaXN0ID0gbnVsbDsKCiAgICAv\nLyBBbHRob3VnaCB0aGlzIG1ldGhvZCBpcyBub3QgY3VycmVudGx5IHVzZWQs\nIGN1cnJlbnRseSBtYWludGFpbmluZyBpdCBsaWtlCiAgICAvLyB0aGlzIHNv\nIHRoYXQgd2UgY2FuIHN1cHBvcnQgb24tdGhlLWZseSBjaGFuZ2VzIGluIGNv\nbmZpZ3VyYXRpb24KICAgIHByb3RlY3RlZCB2b2lkIHJlZnJlc2hEZXJpdmVk\nQXR0cmlidXRlcygpIHsKICAgICAgICByZWZyZXNoTXlSZWdpb25CeXRlU3Ry\naW5nKCk7CiAgICAgICAgcmVmcmVzaE15U2VydmVyQWRkcmVzcygpOwogICAg\nICAgIHJlZnJlc2hSZWdpb25MaXN0KCk7CiAgICB9CgogICAgQE92ZXJyaWRl\nCiAgICBwdWJsaWMgdm9pZCBsb2FkQ29uZihVUkwgY29uZlVSTCkgdGhyb3dz\nIENvbmZpZ3VyYXRpb25FeGNlcHRpb24gewogICAgICAgIHN1cGVyLmxvYWRD\nb25mKGNvbmZVUkwpOwogICAgICAgIHJlZnJlc2hEZXJpdmVkQXR0cmlidXRl\ncygpOwogICAgfQoKICAgIHB1YmxpYyBpbnQgZ2V0TWF4aW11bU1lc3NhZ2VT\naXplKCkgewogICAgICAgIHJldHVybiBjb25mLmdldEludChNQVhfTUVTU0FH\nRV9TSVpFLCAxMjU4MjkxKTsgLyogMS4yTSAqLwogICAgfQoKICAgIHB1Ymxp\nYyBTdHJpbmcgZ2V0TXlSZWdpb24oKSB7CiAgICAgICAgcmV0dXJuIGNvbmYu\nZ2V0U3RyaW5nKFJFR0lPTiwgInN0YW5kYWxvbmUiKTsKICAgIH0KCiAgICBw\ncm90ZWN0ZWQgdm9pZCByZWZyZXNoTXlSZWdpb25CeXRlU3RyaW5nKCkgewog\nICAgICAgIG15UmVnaW9uQnl0ZVN0cmluZyA9IEJ5dGVTdHJpbmcuY29weUZy\nb21VdGY4KGdldE15UmVnaW9uKCkpOwogICAgfQoKICAgIHByb3RlY3RlZCB2\nb2lkIHJlZnJlc2hNeVNlcnZlckFkZHJlc3MoKSB7CiAgICAgICAgdHJ5IHsK\nICAgICAgICAgICAgLy8gVXNlIHRoZSByYXcgSVAgYWRkcmVzcyBhcyB0aGUg\naG9zdG5hbWUKICAgICAgICAgICAgbXlTZXJ2ZXJBZGRyZXNzID0gbmV3IEhl\nZHdpZ1NvY2tldEFkZHJlc3MoSW5ldEFkZHJlc3MuZ2V0TG9jYWxIb3N0KCku\nZ2V0SG9zdEFkZHJlc3MoKSwgZ2V0U2VydmVyUG9ydCgpLAogICAgICAgICAg\nICAgICAgICAgIGdldFNTTFNlcnZlclBvcnQoKSk7CiAgICAgICAgfSBjYXRj\naCAoVW5rbm93bkhvc3RFeGNlcHRpb24gZSkgewogICAgICAgICAgICB0aHJv\ndyBuZXcgUnVudGltZUV4Y2VwdGlvbihlKTsKICAgICAgICB9CiAgICB9Cgog\nICAgLy8gVGhlIGV4cGVjdGVkIGZvcm1hdCBmb3IgdGhlIHJlZ2lvbnMgcGFy\nYW1ldGVyIGlzIEhvc3RuYW1lOlBvcnQ6U1NMUG9ydAogICAgLy8gd2l0aCBz\ncGFjZXMgaW4gYmV0d2VlbiBlYWNoIG9mIHRoZSByZWdpb25zLgogICAgcHJv\ndGVjdGVkIHZvaWQgcmVmcmVzaFJlZ2lvbkxpc3QoKSB7CiAgICAgICAgU3Ry\naW5nIHJlZ2lvbnMgPSBjb25mLmdldFN0cmluZyhSRUdJT05TLCAiIik7CiAg\nICAgICAgaWYgKHJlZ2lvbnMuaXNFbXB0eSgpKSB7CiAgICAgICAgICAgIHJl\nZ2lvbkxpc3QgPSBuZXcgTGlua2VkTGlzdDxTdHJpbmc+KCk7CiAgICAgICAg\nfSBlbHNlIHsKICAgICAgICAgICAgcmVnaW9uTGlzdCA9IEFycmF5cy5hc0xp\nc3QocmVnaW9ucy5zcGxpdCgiICIpKTsKICAgICAgICB9CiAgICB9CgogICAg\ncHVibGljIEJ5dGVTdHJpbmcgZ2V0TXlSZWdpb25CeXRlU3RyaW5nKCkgewog\nICAgICAgIGlmIChteVJlZ2lvbkJ5dGVTdHJpbmcgPT0gbnVsbCkgewogICAg\nICAgICAgICByZWZyZXNoTXlSZWdpb25CeXRlU3RyaW5nKCk7CiAgICAgICAg\nfQogICAgICAgIHJldHVybiBteVJlZ2lvbkJ5dGVTdHJpbmc7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBNYXhpbXVtIG51bWJlciBvZiBtZXNzYWdlcyB0byBy\nZWFkIGFoZWFkLiBEZWZhdWx0IGlzIDEwLgogICAgICoKICAgICAqIEByZXR1\ncm4gaW50CiAgICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0UmVhZEFoZWFkQ291\nbnQoKSB7CiAgICAgICAgcmV0dXJuIGNvbmYuZ2V0SW50KFJFQURBSEVBRF9D\nT1VOVCwgMTApOwogICAgfQoKICAgIC8qKgogICAgICogTWF4aW11bSBudW1i\nZXIgb2YgYnl0ZXMgdG8gcmVhZCBhaGVhZC4gRGVmYXVsdCBpcyA0TUIuCiAg\nICAgKgogICAgICogQHJldHVybiBsb25nCiAgICAgKi8KICAgIHB1YmxpYyBs\nb25nIGdldFJlYWRBaGVhZFNpemVCeXRlcygpIHsKICAgICAgICByZXR1cm4g\nY29uZi5nZXRMb25nKFJFQURBSEVBRF9TSVpFLCA0ICogMTAyNCAqIDEwMjQp\nOyAvLyA0TQogICAgfQoKICAgIC8qKgogICAgICogTWF4aW11bSBjYWNoZSBz\naXplLiBCeSBkZWZhdWx0IGlzIHRoZSBzbWFsbGVzdCBvZiAyRyBvcgogICAg\nICogaGFsZiB0aGUgaGVhcCBzaXplLgogICAgICoKICAgICAqIEByZXR1cm4g\nbG9uZwogICAgICovCiAgICBwdWJsaWMgbG9uZyBnZXRNYXhpbXVtQ2FjaGVT\naXplKCkgewogICAgICAgIC8vIDJHIG9yIGhhbGYgb2YgdGhlIG1heGltdW0g\nYW1vdW50IG9mIG1lbW9yeSB0aGUgSlZNIHVzZXMKICAgICAgICByZXR1cm4g\nY29uZi5nZXRMb25nKENBQ0hFX1NJWkUsIE1hdGgubWluKDIgKiAxMDI0TCAq\nIDEwMjRMICogMTAyNEwsIFJ1bnRpbWUuZ2V0UnVudGltZSgpLm1heE1lbW9y\neSgpIC8gMikpOwogICAgfQoKICAgIC8qKgogICAgICogQ2FjaGUgRW50cnkg\nVFRMLiBCeSBkZWZhdWx0IGlzIDAsIGNhY2hlIGVudHJ5IHdpbGwgbm90IGJl\nIGV2aWN0ZWQKICAgICAqIHVudGlsIHRoZSBjYWNoZSBpcyBmdWxsZmlsbGVk\nIG9yIHRoZSBtZXNzYWdlcyBhcmUgYWxyZWFkeSBjb25zdW1lZC4KICAgICAq\nIFRoZSBUVEwgaXMgb25seSBjaGVja2VkIHdoZW4gdHJ5aW5nIGFkZGluZyBh\nIG5ldyBlbnRyeSBpbnRvIHRoZSBjYWNoZS4KICAgICAqCiAgICAgKiBAcmV0\ndXJuIGNhY2hlIGVudHJ5IHR0bC4KICAgICAqLwogICAgcHVibGljIGxvbmcg\nZ2V0Q2FjaGVFbnRyeVRUTCgpIHsKICAgICAgICByZXR1cm4gY29uZi5nZXRM\nb25nKENBQ0hFX0VOVFJZX1RUTCwgMEwpOwogICAgfQoKICAgIC8qKgogICAg\nICogQWZ0ZXIgYSBzY2FuIG9mIGEgbG9nIGZhaWxzLCBob3cgbG9uZyBiZWZv\ncmUgd2UgcmV0cnkgKGluIG1zZWMpCiAgICAgKgogICAgICogQHJldHVybiBs\nb25nCiAgICAgKi8KICAgIHB1YmxpYyBsb25nIGdldFNjYW5CYWNrb2ZmUGVy\naW9kTXMoKSB7CiAgICAgICAgcmV0dXJuIGNvbmYuZ2V0TG9uZyhTQ0FOX0JB\nQ0tPRkZfTVNFQywgMTAwMCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1\ncm5zIHNlcnZlciBwb3J0LgogICAgICoKICAgICAqIEByZXR1cm4gaW50CiAg\nICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0U2VydmVyUG9ydCgpIHsKICAgICAg\nICByZXR1cm4gY29uZi5nZXRJbnQoU0VSVkVSX1BPUlQsIDQwODApOwogICAg\nfQoKICAgIC8qKgogICAgICogUmV0dXJucyBTU0wgc2VydmVyIHBvcnQuCiAg\nICAgKgogICAgICogQHJldHVybiBpbnQKICAgICAqLwogICAgcHVibGljIGlu\ndCBnZXRTU0xTZXJ2ZXJQb3J0KCkgewogICAgICAgIHJldHVybiBjb25mLmdl\ndEludChTU0xfU0VSVkVSX1BPUlQsIDk4NzYpOwogICAgfQoKICAgIC8qKgog\nICAgICogUmV0dXJucyBab29LZWVwZXIgcGF0aCBwcmVmaXguCiAgICAgKgog\nICAgICogQHJldHVybiBzdHJpbmcKICAgICAqLwogICAgcHVibGljIFN0cmlu\nZyBnZXRaa1ByZWZpeCgpIHsKICAgICAgICByZXR1cm4gY29uZi5nZXRTdHJp\nbmcoWktfUFJFRklYLCAiL2hlZHdpZyIpOwogICAgfQoKICAgIHB1YmxpYyBT\ndHJpbmdCdWlsZGVyIGdldFprUmVnaW9uUHJlZml4KFN0cmluZ0J1aWxkZXIg\nc2IpIHsKICAgICAgICByZXR1cm4gc2IuYXBwZW5kKGdldFprUHJlZml4KCkp\nLmFwcGVuZCgiLyIpLmFwcGVuZChnZXRNeVJlZ2lvbigpKTsKICAgIH0KCiAg\nICAvKioKICAgICAqIEdldCB6bm9kZSBwYXRoIHRvIHN0b3JlIG1hbmFnZXIg\nbGF5b3V0cy4KICAgICAqCiAgICAgKiBAcGFyYW0gc2IKICAgICAqICAgICAg\nICAgIFN0cmluZ0J1aWxkZXIgdG8gc3RvcmUgem5vZGUgcGF0aCB0byBzdG9y\nZSBtYW5hZ2VyIGxheW91dHMuCiAgICAgKiBAcmV0dXJuIHpub2RlIHBhdGgg\ndG8gc3RvcmUgbWFuYWdlciBsYXlvdXRzLgogICAgICovCiAgICBwdWJsaWMg\nU3RyaW5nQnVpbGRlciBnZXRaa01hbmFnZXJzUHJlZml4KFN0cmluZ0J1aWxk\nZXIgc2IpIHsKICAgICAgICByZXR1cm4gZ2V0WmtSZWdpb25QcmVmaXgoc2Ip\nLmFwcGVuZCgiL21hbmFnZXJzIik7CiAgICB9CgogICAgcHVibGljIFN0cmlu\nZ0J1aWxkZXIgZ2V0WmtUb3BpY3NQcmVmaXgoU3RyaW5nQnVpbGRlciBzYikg\newogICAgICAgIHJldHVybiBnZXRaa1JlZ2lvblByZWZpeChzYikuYXBwZW5k\nKCIvdG9waWNzIik7CiAgICB9CgogICAgcHVibGljIFN0cmluZ0J1aWxkZXIg\nZ2V0WmtUb3BpY1BhdGgoU3RyaW5nQnVpbGRlciBzYiwgQnl0ZVN0cmluZyB0\nb3BpYykgewogICAgICAgIHJldHVybiBnZXRaa1RvcGljc1ByZWZpeChzYiku\nYXBwZW5kKCIvIikuYXBwZW5kKHRvcGljLnRvU3RyaW5nVXRmOCgpKTsKICAg\nIH0KCiAgICBwdWJsaWMgU3RyaW5nQnVpbGRlciBnZXRaa0hvc3RzUHJlZml4\nKFN0cmluZ0J1aWxkZXIgc2IpIHsKICAgICAgICByZXR1cm4gZ2V0WmtSZWdp\nb25QcmVmaXgoc2IpLmFwcGVuZCgiL2hvc3RzIik7CiAgICB9CgogICAgcHVi\nbGljIEhlZHdpZ1NvY2tldEFkZHJlc3MgZ2V0U2VydmVyQWRkcigpIHsKICAg\nICAgICBpZiAobXlTZXJ2ZXJBZGRyZXNzID09IG51bGwpIHsKICAgICAgICAg\nICAgcmVmcmVzaE15U2VydmVyQWRkcmVzcygpOwogICAgICAgIH0KICAgICAg\nICByZXR1cm4gbXlTZXJ2ZXJBZGRyZXNzOwogICAgfQoKICAgIC8qKgogICAg\nICogUmV0dXJuIFpvb0tlZXBlciBsaXN0IG9mIHNlcnZlcnMuIERlZmF1bHQg\naXMgbG9jYWxob3N0LgogICAgICoKICAgICAqIEByZXR1cm4gU3RyaW5nCiAg\nICAgKi8KICAgIHB1YmxpYyBTdHJpbmcgZ2V0WmtIb3N0KCkgewogICAgICAg\nIExpc3Qgc2VydmVycyA9IGNvbmYuZ2V0TGlzdChaS19IT1NULCBudWxsKTsK\nICAgICAgICBpZiAobnVsbCA9PSBzZXJ2ZXJzIHx8IDAgPT0gc2VydmVycy5z\naXplKCkpIHsKICAgICAgICAgICAgcmV0dXJuICJsb2NhbGhvc3QiOwogICAg\nICAgIH0KICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuam9pbihzZXJ2ZXJz\nLCAiLCIpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIFpvb0tlZXBl\nciBzZXNzaW9uIHRpbWVvdXQuIERlZmF1bHQgaXMgMnMuCiAgICAgKgogICAg\nICogQHJldHVybiBpbnQKICAgICAqLwogICAgcHVibGljIGludCBnZXRaa1Rp\nbWVvdXQoKSB7CiAgICAgICAgcmV0dXJuIGNvbmYuZ2V0SW50KFpLX1RJTUVP\nVVQsIDIwMDApOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0cnVl\nIGlmIHJlYWQtYWhlYWQgZW5hYmxlZC4gRGVmYXVsdCBpcyB0cnVlLgogICAg\nICoKICAgICAqIEByZXR1cm4gYm9vbGVhbgogICAgICovCiAgICBwdWJsaWMg\nYm9vbGVhbiBnZXRSZWFkQWhlYWRFbmFibGVkKCkgewogICAgICAgIHJldHVy\nbiBjb25mLmdldEJvb2xlYW4oUkVBREFIRUFEX0VOQUJMRUQsIHRydWUpCiAg\nICAgICAgICAgIHx8IGNvbmYuZ2V0Qm9vbGVhbigicmVhZGhlYWRfZW5hYmxl\nZCIpOwogICAgICAgIC8vIHRoZSBrZXkgd2FzIG1pc3NwZWx0IGluIGEgcHJl\ndmlvdXMgdmVyc2lvbiwgc28gY29tcGVuc2F0ZSBoZXJlCiAgICB9CgogICAg\nLyoqCiAgICAgKiBSZXR1cm5zIHRydWUgaWYgc3RhbmRhbG9uZS4gRGVmYXVs\ndCBpcyBmYWxzZS4KICAgICAqCiAgICAgKiBAcmV0dXJuIGJvb2xlYW4KICAg\nICAqLwogICAgcHVibGljIGJvb2xlYW4gaXNTdGFuZGFsb25lKCkgewogICAg\nICAgIHJldHVybiBjb25mLmdldEJvb2xlYW4oU1RBTkRBTE9ORSwgZmFsc2Up\nOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBsaXN0IG9mIHJlZ2lv\nbnMuCiAgICAgKgogICAgICogQHJldHVybiBMaXN0PFN0cmluZz4KICAgICAq\nLwogICAgcHVibGljIExpc3Q8U3RyaW5nPiBnZXRSZWdpb25zKCkgewogICAg\nICAgIGlmIChyZWdpb25MaXN0ID09IG51bGwpIHsKICAgICAgICAgICAgcmVm\ncmVzaFJlZ2lvbkxpc3QoKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJl\nZ2lvbkxpc3Q7CiAgICB9CgogICAgLyoqCiAgICAgKiAgUmV0dXJucyB0aGUg\nbmFtZSBvZiB0aGUgU1NMIGNlcnRpZmljYXRlIGlmIGF2YWlsYWJsZSBhcyBh\nIHJlc291cmNlLgogICAgICoKICAgICAqIEByZXR1cm4gU3RyaW5nCiAgICAg\nKi8KICAgIHB1YmxpYyBTdHJpbmcgZ2V0Q2VydE5hbWUoKSB7CiAgICAgICAg\ncmV0dXJuIGNvbmYuZ2V0U3RyaW5nKENFUlRfTkFNRSwgIiIpOwogICAgfQoK\nICAgIC8qKgogICAgICogVGhpcyBpcyB0aGUgcGF0aCB0byB0aGUgU1NMIGNl\ncnRpZmljYXRlIGlmIGl0IGlzIGF2YWlsYWJsZSBhcyBhIGZpbGUuCiAgICAg\nKgogICAgICogQHJldHVybiBTdHJpbmcKICAgICAqLwogICAgcHVibGljIFN0\ncmluZyBnZXRDZXJ0UGF0aCgpIHsKICAgICAgICByZXR1cm4gY29uZi5nZXRT\ndHJpbmcoQ0VSVF9QQVRILCAiIik7CiAgICB9CgogICAgLy8gVGhpcyBtZXRo\nb2QgcmV0dXJuIHRoZSBTU0wgY2VydGlmaWNhdGUgYXMgYW4gSW5wdXRTdHJl\nYW0gYmFzZWQgb24gaWYgaXQKICAgIC8vIGlzIGNvbmZpZ3VyZWQgdG8gYmUg\nYXZhaWxhYmxlIGFzIGEgcmVzb3VyY2Ugb3IgYXMgYSBmaWxlLiBJZiBub3Ro\naW5nIGlzCiAgICAvLyBjb25maWd1cmVkIGNvcnJlY3RseSwgdGhlbiBhIENv\nbmZpZ3VyYXRpb25FeGNlcHRpb24gd2lsbCBiZSB0aHJvd24gYXMKICAgIC8v\nIHdlIGRvIG5vdCBrbm93IGhvdyB0byBvYnRhaW4gdGhlIFNTTCBjZXJ0aWZp\nY2F0ZSBzdHJlYW0uCiAgICBwdWJsaWMgSW5wdXRTdHJlYW0gZ2V0Q2VydFN0\ncmVhbSgpIHRocm93cyBGaWxlTm90Rm91bmRFeGNlcHRpb24sIENvbmZpZ3Vy\nYXRpb25FeGNlcHRpb24gewogICAgICAgIFN0cmluZyBjZXJ0TmFtZSA9IGdl\ndENlcnROYW1lKCk7CiAgICAgICAgU3RyaW5nIGNlcnRQYXRoID0gZ2V0Q2Vy\ndFBhdGgoKTsKICAgICAgICBpZiAoY2VydE5hbWUgIT0gbnVsbCAmJiAhY2Vy\ndE5hbWUuaXNFbXB0eSgpKSB7CiAgICAgICAgICAgIHJldHVybiBnZXRDbGFz\ncygpLmdldFJlc291cmNlQXNTdHJlYW0oY2VydE5hbWUpOwogICAgICAgIH0g\nZWxzZSBpZiAoY2VydFBhdGggIT0gbnVsbCAmJiAhY2VydFBhdGguaXNFbXB0\neSgpKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgRmlsZUlucHV0U3RyZWFt\nKGNlcnRQYXRoKTsKICAgICAgICB9IGVsc2UKICAgICAgICAgICAgdGhyb3cg\nbmV3IENvbmZpZ3VyYXRpb25FeGNlcHRpb24oIlNTTCBDZXJ0aWZpY2F0ZSBj\nb25maWd1cmF0aW9uIGRvZXMgbm90IGhhdmUgcmVzb3VyY2UgbmFtZSBvciBw\nYXRoIHNldCEiKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhl\nIHBhc3N3b3JkIHVzZWQgZm9yIEJvb2tLZWVwZXIgbGVkZ2Vycy4gRGVmYXVs\ndAogICAgICogaXMgdGhlIGVtcHR5IHN0cmluZy4KICAgICAqCiAgICAgKiBA\ncmV0dXJuCiAgICAgKi8KICAgIHB1YmxpYyBTdHJpbmcgZ2V0UGFzc3dvcmQo\nKSB7CiAgICAgICAgcmV0dXJuIGNvbmYuZ2V0U3RyaW5nKFBBU1NXT1JELCAi\nIik7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRydWUgaWYgU1NM\nIGlzIGVuYWJsZWQuIERlZmF1bHQgaXMgZmFsc2UuCiAgICAgKgogICAgICog\nQHJldHVybiBib29sZWFuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlz\nU1NMRW5hYmxlZCgpIHsKICAgICAgICByZXR1cm4gY29uZi5nZXRCb29sZWFu\nKFNTTF9FTkFCTEVELCBmYWxzZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBH\nZXRzIHRoZSBudW1iZXIgb2YgbWVzc2FnZXMgY29uc3VtZWQgYmVmb3JlIHBl\ncnNpc3RpbmcKICAgICAqIGluZm9ybWF0aW9uIGFib3V0IGNvbnN1bWVkIG1l\nc3NhZ2VzLiBBIHZhbHVlIGdyZWF0ZXIgdGhhbgogICAgICogb25lIGF2b2lk\ncyBwZXJzaXN0aW5nIGluZm9ybWF0aW9uIGFib3V0IGNvbnN1bWVkIG1lc3Nh\nZ2VzCiAgICAgKiB1cG9uIGV2ZXJ5IGNvbnN1bWVkIG1lc3NhZ2UuIERlZmF1\nbHQgaXMgNTAuCiAgICAgKgogICAgICogQHJldHVybiBpbnQKICAgICAqLwog\nICAgcHVibGljIGludCBnZXRDb25zdW1lSW50ZXJ2YWwoKSB7CiAgICAgICAg\ncmV0dXJuIGNvbmYuZ2V0SW50KENPTlNVTUVfSU5URVJWQUwsIDUwKTsKICAg\nIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGludGVydmFsIHRvIHJl\nbGVhc2UgYSB0b3BpYy4gSWYgdGhpcwogICAgICogcGFyYW1ldGVyIGlzIGdy\nZWF0ZXIgdGhhbiB6ZXJvLCB0aGVuIHNjaGVkdWxlIGEKICAgICAqIHRhc2sg\ndG8gcmVsZWFzZSBhbiBvd25lZCB0b3BpYy4gRGVmYXVsdCBpcyAwIChuZXZl\nciByZWxlYXNlZCkuCiAgICAgKgogICAgICogQHJldHVybiBpbnQKICAgICAq\nLwogICAgcHVibGljIGludCBnZXRSZXRlbnRpb25TZWNzKCkgewogICAgICAg\nIHJldHVybiBjb25mLmdldEludChSRVRFTlRJT05fU0VDUywgMCk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBTcGVjaWZpZXMgdGhhdCB0aGUgdG9waWMgc2hv\ndWxkIGJlIGF1dG9tYXRpY2FsbHkgcmVsZWFzZWQKICAgICAqIG9uY2UgYSBm\naXhlZCBkdXJhdGlvbiBhZnRlciB0aGUgdG9waWMgaXMgb3duZWQsIGEgbWVz\nc2FnZSBpcwogICAgICogcHVibGlzaGVkLCBvciBhIG1lc3NhZ2UgaXMgZGVs\naXZlcmVkLgogICAgICoKICAgICAqIEByZXR1cm4gdGhlIGxlbmd0aCBvZiB0\naW1lIGFmdGVyIGFuIGVudHJ5IGlzIGxhc3QgYWNjZXNzZWQgdGhhdAogICAg\nICogICAgICAgICBpdCBzaG91bGQgYmUgYXV0b21hdGljYWxseSByZW1vdmVk\nLgogICAgICovCiAgICBwdWJsaWMgaW50IGdldFJldGVudGlvblNlY3NBZnRl\nckFjY2VzcygpIHsKICAgICAgICByZXR1cm4gY29uZi5nZXRJbnQoUkVURU5U\nSU9OX1NFQ1NfQUZURVJfQUNDRVNTLCAwKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIE1heCBudW1iZXIgb2YgdG9waWNzIGZvciBhIGh1YiBzZXJ2ZXIgdG8g\nc2VydmUuCiAgICAgKgogICAgICogQHJldHVybiBtYXggbnVtYmVyIG9mIHRv\ncGljcyBmb3IgYSBodWIgc2VydmVyIHRvIHNlcnZlLgogICAgICovCiAgICBw\ndWJsaWMgaW50IGdldE1heE51bVRvcGljcygpIHsKICAgICAgICByZXR1cm4g\nY29uZi5nZXRJbnQoTUFYX05VTV9UT1BJQ1MsIEludGVnZXIuTUFYX1ZBTFVF\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIE1pbmltdW0gc2l6ZSBvZiBpbnRl\ncm5hbCBzdHJ1Y3R1cmUgdG8gc3RvcmUgdG9waWNzLgogICAgICoKICAgICAq\nIEByZXR1cm4gaW5pdCBudW1iZXIgb2YgdG9waWNzIGZvciBhIGh1YiBzZXJ2\nZXIuCiAgICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0SW5pdE51bVRvcGljcygp\nIHsKICAgICAgICByZXR1cm4gY29uZi5nZXRJbnQoSU5JVF9OVU1fVE9QSUNT\nLCAxMjgpOwogICAgfQoKICAgIC8qKgogICAgICogVHJ1ZSBpZiBTU0wgaXMg\nZW5hYmxlZCBhY3Jvc3MgcmVnaW9ucy4KICAgICAqCiAgICAgKiBAcmV0dXJu\nIGJvb2xlYW4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gaXNJbnRlclJl\nZ2lvblNTTEVuYWJsZWQoKSB7CiAgICAgICAgcmV0dXJuIGNvbmYuZ2V0Qm9v\nbGVhbihJTlRFUl9SRUdJT05fU1NMX0VOQUJMRUQsIGZhbHNlKTsKICAgIH0K\nCiAgICAvKioKICAgICAqIFRoaXMgcGFyYW1ldGVyIGlzIHVzZWQgdG8gZGV0\nZXJtaW5lIGhvdyBvZnRlbiB3ZSBydW4gdGhlCiAgICAgKiBTdWJzY3JpcHRp\nb25NYW5hZ2VyJ3MgTWVzc2FnZXMgQ29uc3VtZWQgdGltZXIgdGFzayB0aHJl\nYWQKICAgICAqIChpbiBtaWxsaXNlY29uZHMpLgogICAgICoKICAgICAqIEBy\nZXR1cm4gaW50CiAgICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0TWVzc2FnZXND\nb25zdW1lZFRocmVhZFJ1bkludGVydmFsKCkgewogICAgICAgIHJldHVybiBj\nb25mLmdldEludChNRVNTQUdFU19DT05TVU1FRF9USFJFQURfUlVOX0lOVEVS\nVkFMLCA2MDAwMCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGlzIHBhcmFt\nZXRlciBpcyB1c2VkIHRvIGRldGVybWluZSBob3cgb2Z0ZW4gd2UgcnVuIGEg\ndGhyZWFkCiAgICAgKiB0byByZXRyeSB0aG9zZSBmYWlsZWQgcmVtb3RlIHN1\nYnNjcmlwdGlvbnMgaW4gYXN5bmNocm9ub3VzIG1vZGUKICAgICAqIChpbiBt\naWxsaXNlY29uZHMpLgogICAgICoKICAgICAqIEByZXR1cm4gaW50CiAgICAg\nKi8KICAgIHB1YmxpYyBpbnQgZ2V0UmV0cnlSZW1vdGVTdWJzY3JpYmVUaHJl\nYWRSdW5JbnRlcnZhbCgpIHsKICAgICAgICByZXR1cm4gY29uZi5nZXRJbnQo\nUkVUUllfUkVNT1RFX1NVQlNDUklCRV9USFJFQURfUlVOX0lOVEVSVkFMLCAx\nMjAwMDApOwogICAgfQoKICAgIC8qKgogICAgICogVGhpcyBwYXJhbWV0ZXIg\naXMgZm9yIHNldHRpbmcgdGhlIGRlZmF1bHQgbWF4aW11bSBudW1iZXIgb2Yg\nbWVzc2FnZXMgd2hpY2gKICAgICAqIGNhbiBiZSBkZWxpdmVyZWQgdG8gYSBz\ndWJzY3JpYmVyIHdpdGhvdXQgYmVpbmcgY29uc3VtZWQuCiAgICAgKiB3ZSBw\nYXVzZSBtZXNzYWdlcyBkZWxpdmVyeSB0byBhIHN1YnNjcmliZXIgd2hlbiBy\nZWFjaGluZyB0aGUgd2luZG93IHNpemUKICAgICAqCiAgICAgKiBAcmV0dXJu\nIGludAogICAgICovCiAgICBwdWJsaWMgaW50IGdldERlZmF1bHRNZXNzYWdl\nV2luZG93U2l6ZSgpIHsKICAgICAgICByZXR1cm4gY29uZi5nZXRJbnQoREVG\nQVVMVF9NRVNTQUdFX1dJTkRPV19TSVpFLCAwKTsKICAgIH0KCiAgICAvKioK\nICAgICAqIFRoaXMgcGFyYW1ldGVyIGlzIHVzZWQgd2hlbiBCb29ra2VlcGVy\nIGlzIHRoZSBwZXJzaXN0ZW5jZQogICAgICogc3RvcmUgYW5kIGluZGljYXRl\ncyB3aGF0IHRoZSBlbnNlbWJsZSBzaXplIGlzIChpLmUuIGhvdwogICAgICog\nbWFueSBib29raWUgc2VydmVycyB0byBzdHJpcGUgdGhlIGxlZGdlciBlbnRy\naWVzIGFjcm9zcykuCiAgICAgKgogICAgICogQHJldHVybiBpbnQKICAgICAq\nLwogICAgcHVibGljIGludCBnZXRCa0Vuc2VtYmxlU2l6ZSgpIHsKICAgICAg\nICByZXR1cm4gY29uZi5nZXRJbnQoQktfRU5TRU1CTEVfU0laRSwgMyk7CiAg\nICB9CgoKICAgIC8qKgogICAgICogVGhpcyBwYXJhbWV0ZXIgaXMgdXNlZCB3\naGVuIEJvb2trZWVwZXIgaXMgdGhlIHBlcnNpc3RlbmNlIHN0b3JlCiAgICAg\nKiBhbmQgaW5kaWNhdGVzIHdoYXQgdGhlIHF1b3J1bSBzaXplIGlzIChpLmUu\nIGhvdyBtYW55IHJlZHVuZGFudAogICAgICogY29waWVzIG9mIGVhY2ggbGVk\nZ2VyIGVudHJ5IGlzIHdyaXR0ZW4pLgogICAgICoKICAgICAqIEByZXR1cm4g\naW50CiAgICAgKiBAZGVwcmVjYXRlZCBwbGVhc2UgdXNlICNnZXRCa1dyaXRl\nUXVvcnVtU2l6ZSgpIGFuZCAjZ2V0QmtBY2tRdW9ydW1TaXplKCkKICAgICAq\nLwogICAgQERlcHJlY2F0ZWQKICAgIHByb3RlY3RlZCBpbnQgZ2V0QmtRdW9y\ndW1TaXplKCkgewogICAgICAgIHJldHVybiBjb25mLmdldEludChCS19RVU9S\nVU1fU0laRSwgMik7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIHdy\naXRlIHF1b3J1bSBzaXplIGZvciBCb29rS2VlcGVyIGNsaWVudCwgd2hpY2gg\naXMgdXNlZCB0bwogICAgICogaW5kaWNhdGUgaG93IG1hbnkgcmVkdW5kYW50\nIGNvcGllcyBvZiBlYWNoIGxlZGdlciBlbnRyeSBpcyB3cml0dGVuLgogICAg\nICoKICAgICAqIEByZXR1cm4gd3JpdGUgcXVvcnVtIHNpemUgZm9yIEJvb2tL\nZWVwZXIgY2xpZW50LgogICAgICovCiAgICBwdWJsaWMgaW50IGdldEJrV3Jp\ndGVRdW9ydW1TaXplKCkgewogICAgICAgIGlmIChjb25mLmNvbnRhaW5zS2V5\nKEJLX1dSSVRFX1FVT1JVTV9TSVpFKSkgewogICAgICAgICAgICByZXR1cm4g\nY29uZi5nZXRJbnQoQktfV1JJVEVfUVVPUlVNX1NJWkUsIDIpOwogICAgICAg\nIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBnZXRCa1F1b3J1bVNpemUo\nKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIGFj\nayBxdW9ydW0gc2l6ZSBmb3IgQm9va0tlZXBlciBjbGllbnQuCiAgICAgKgog\nICAgICogQHJldHVybiBhY2sgcXVvcnVtIHNpemUgZm9yIEJvb2tLZWVwZXIg\nY2xpZW50LgogICAgICovCiAgICBwdWJsaWMgaW50IGdldEJrQWNrUXVvcnVt\nU2l6ZSgpIHsKICAgICAgICBpZiAoY29uZi5jb250YWluc0tleShCS19BQ0tf\nUVVPUlVNX1NJWkUpKSB7CiAgICAgICAgICAgIHJldHVybiBjb25mLmdldElu\ndChCS19BQ0tfUVVPUlVNX1NJWkUsIDIpOwogICAgICAgIH0gZWxzZSB7CiAg\nICAgICAgICAgIHJldHVybiBnZXRCa1F1b3J1bVNpemUoKTsKICAgICAgICB9\nCiAgICB9CgogICAgLyoqCiAgICAgKiBUaGlzIHBhcmFtZXRlciBpcyB1c2Vk\nIHdoZW4gQm9va0tlZXBlciBpcyB0aGUgcGVyc2lzdGVuY2Ugc3RvcmFnZSwK\nICAgICAqIGFuZCBpbmRpY2F0ZXMgd2hlbiB0aGUgbnVtYmVyIG9mIGVudHJp\nZXMgc3RvcmVkIGluIGEgbGVkZ2VyIHJlYWNoCiAgICAgKiB0aGUgdGhyZXNo\nb2xkLCBodWIgc2VydmVyIHdpbGwgb3BlbiBhIG5ldyBsZWRnZXIgdG8gd3Jp\ndGUuCiAgICAgKgogICAgICogQHJldHVybiBtYXggZW50cmllcyBwZXIgbGVk\nZ2VyCiAgICAgKi8KICAgIHB1YmxpYyBsb25nIGdldE1heEVudHJpZXNQZXJM\nZWRnZXIoKSB7CiAgICAgICAgcmV0dXJuIGNvbmYuZ2V0TG9uZyhNQVhfRU5U\nUklFU19QRVJfTEVER0VSLCAwTCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBH\nZXQgdGhlIHRvbGVyYW5jZSBwZXJjZW50YWdlIGZvciB0aGUgcmViYWxhbmNl\nci4gVGhlIHJlYmFsYW5jZXIgd2lsbCBub3QKICAgICAqIHNoZWQgbG9hZCBp\nZiBpdCdzIGN1cnJlbnQgbG9hZCBpcyBsZXNzIHRoYW4gYXZlcmFnZSArIGF2\nZXJhZ2UqdG9sZXJhbmNlUGVyY2VudGFnZS8xMDAuMAogICAgICoKICAgICAq\nIEByZXR1cm4gdGhlIHRvbGVyYW5jZSBwZXJjZW50YWdlIGZvciB0aGUgcmVi\nYWxhbmNlci4KICAgICAqLwogICAgcHVibGljIGRvdWJsZSBnZXRSZWJhbGFu\nY2VUb2xlcmFuY2UoKSB7CiAgICAgICAgcmV0dXJuIGNvbmYuZ2V0RG91Ymxl\nKFJFQkFMQU5DRV9UT0xFUkFOQ0VfUEVSQ0VOVEFHRSwgMTAuMCk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBHZXQgdGhlIG1heGltdW0gbG9hZCB0aGUgcmVi\nYWxhbmNlciBjYW4gc2hlZCBhdCBvbmNlLiBEZWZhdWx0IGlzIDUwLgogICAg\nICogQHJldHVybgogICAgICovCiAgICBwdWJsaWMgSHViTG9hZCBnZXRSZWJh\nbGFuY2VNYXhTaGVkKCkgewogICAgICAgIHJldHVybiBuZXcgSHViTG9hZChj\nb25mLmdldExvbmcoUkVCQUxBTkNFX01BWF9TSEVELCA1MCkpOwogICAgfQoK\nICAgIC8qKgogICAgICogR2V0IHRoZSBpbnRlcnZhbChpbiBzZWNvbmRzKSBi\nZXR3ZWVuIHJlYmFsYW5jaW5nIGF0dGVtcHRzLiBUaGUgZGVmYXVsdCBpcwog\nICAgICogNSBtaW51dGVzLgogICAgICogQHJldHVybgogICAgICovCiAgICBw\ndWJsaWMgbG9uZyBnZXRSZWJhbGFuY2VJbnRlcnZhbCgpIHsKICAgICAgICBy\nZXR1cm4gY29uZi5nZXRMb25nKFJFQkFMQU5DRV9JTlRFUlZBTF9TRUMsIDMw\nMCk7CiAgICB9CgogICAgLyoKICAgICAqIElzIHRoaXMgYSB2YWxpZCBjb25m\naWd1cmF0aW9uIHRoYXQgd2UgY2FuIHJ1biB3aXRoPyBUaGlzIGNvZGUgbWln\naHQgZ3JvdwogICAgICogb3ZlciB0aW1lLgogICAgICovCiAgICBwdWJsaWMg\ndm9pZCB2YWxpZGF0ZSgpIHRocm93cyBDb25maWd1cmF0aW9uRXhjZXB0aW9u\nIHsKICAgICAgICBpZiAoIWdldFprUHJlZml4KCkuc3RhcnRzV2l0aCgiLyIp\nKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBDb25maWd1cmF0aW9uRXhjZXB0\naW9uKFpLX1BSRUZJWCArICIgbXVzdCBzdGFydCB3aXRoIGEgLyIpOwogICAg\nICAgIH0KICAgICAgICAvLyBWYWxpZGF0ZSB0aGF0IGlmIFJlZ2lvbnMgZXhp\nc3QgYW5kIGludGVyLXJlZ2lvbiBjb21tdW5pY2F0aW9uIGlzIFNTTAogICAg\nICAgIC8vIGVuYWJsZWQsIHRoYXQgdGhlIFJlZ2lvbnMgY29ycmVzcG9uZCB0\nbyB2YWxpZCBIZWR3aWdTb2NrZXRBZGRyZXNzZXMsCiAgICAgICAgLy8gbmFt\nZWx5IHRoYXQgU1NMIHBvcnRzIGFyZSBwcmVzZW50LgogICAgICAgIGlmIChp\nc0ludGVyUmVnaW9uU1NMRW5hYmxlZCgpICYmIGdldFJlZ2lvbnMoKS5zaXpl\nKCkgPiAwKSB7CiAgICAgICAgICAgIGZvciAoU3RyaW5nIGh1YlN0cmluZyA6\nIGdldFJlZ2lvbnMoKSkgewogICAgICAgICAgICAgICAgSGVkd2lnU29ja2V0\nQWRkcmVzcyBodWIgPSBuZXcgSGVkd2lnU29ja2V0QWRkcmVzcyhodWJTdHJp\nbmcpOwogICAgICAgICAgICAgICAgaWYgKGh1Yi5nZXRTU0xTb2NrZXRBZGRy\nZXNzKCkgPT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcg\nQ29uZmlndXJhdGlvbkV4Y2VwdGlvbigiUmVnaW9uIGRlZmluZWQgZG9lcyBu\nb3QgaGF2ZSByZXF1aXJlZCBTU0wgcG9ydDogIiArIGh1YlN0cmluZyk7CiAg\nICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy8gVmFsaWRhdGUgdGhh\ndCB0aGUgQm9va2tlZXBlciBlbnNlbWJsZSBzaXplID49IHF1b3J1bSBzaXpl\nLgogICAgICAgIGlmIChnZXRCa0Vuc2VtYmxlU2l6ZSgpIDwgZ2V0QmtXcml0\nZVF1b3J1bVNpemUoKSkgewogICAgICAgICAgICB0aHJvdyBuZXcgQ29uZmln\ndXJhdGlvbkV4Y2VwdGlvbigiQksgZW5zZW1ibGUgc2l6ZSAoIiArIGdldEJr\nRW5zZW1ibGVTaXplKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgKyAiKSBpcyBsZXNzIHRoYW4gdGhlIHdyaXRlIHF1\nb3J1bSBzaXplICgiICsgZ2V0QmtXcml0ZVF1b3J1bVNpemUoKSArICIpIik7\nCiAgICAgICAgfQoKICAgICAgICBpZiAoZ2V0QmtXcml0ZVF1b3J1bVNpemUo\nKSA8IGdldEJrQWNrUXVvcnVtU2l6ZSgpKSB7CiAgICAgICAgICAgIHRocm93\nIG5ldyBDb25maWd1cmF0aW9uRXhjZXB0aW9uKCJCSyB3cml0ZSBxdW9ydW0g\nc2l6ZSAoIiArIGdldEJrV3JpdGVRdW9ydW1TaXplKCkKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAiKSBpcyBsZXNz\nIHRoYW4gdGhlIGFjayBxdW9ydW0gc2l6ZSAoIiArIGdldEJrQWNrUXVvcnVt\nU2l6ZSgpICsgIikiKTsKICAgICAgICB9CiAgICAgICAgLy8gVmFsaWRhdGUg\ndGhhdCB0aGUgcmViYWxhbmNlIHRvbGVyYW5jZSBwZXJjZW50YWdlIGlzIG5v\ndCBuZWdhdGl2ZS4KICAgICAgICBpZiAoZ2V0UmViYWxhbmNlVG9sZXJhbmNl\nKCkgPCAwLjApIHsKICAgICAgICAgICAgdGhyb3cgbmV3IENvbmZpZ3VyYXRp\nb25FeGNlcHRpb24oIlRoZSByZWJhbGFuY2UgdG9sZXJhbmNlIHBlcmNlbnRh\nZ2UgY2Fubm90IGJlIG5lZ2F0aXZlLiIpOwogICAgICAgIH0KICAgICAgICAv\nLyBWYWxpZGF0ZSB0aGF0IHRoZSBtYXhpbXVtIGxvYWQgdG8gc2hlZCBkdXJp\nbmcgYSByZWJhbGFuY2UgaXMgbm90IG5lZ2F0aXZlLgogICAgICAgIGlmIChn\nZXRSZWJhbGFuY2VNYXhTaGVkKCkuZ2V0TnVtVG9waWNzKCkgPCAwTCkgewog\nICAgICAgICAgICB0aHJvdyBuZXcgQ29uZmlndXJhdGlvbkV4Y2VwdGlvbigi\nVGhlIG1heGltdW0gbG9hZCB0byBzaGVkIGR1cmluZyBhIHJlYmFsYW5jZSBj\nYW5ub3QgYmUgbmVnYXRpdmUuIik7CiAgICAgICAgfQogICAgICAgIC8vIGFk\nZCBvdGhlciBjaGVja3MgaGVyZQogICAgfQoKICAgIC8qKgogICAgICogR2V0\nIG51bWJlciBvZiByZWFkIGFoZWFkIGNhY2hlIHRocmVhZHMuCiAgICAgKgog\nICAgICogQHJldHVybiBudW1iZXIgb2YgcmVhZCBhaGVhZCBjYWNoZSB0aHJl\nYWRzLgogICAgICovCiAgICBwdWJsaWMgaW50IGdldE51bVJlYWRBaGVhZENh\nY2hlVGhyZWFkcygpIHsKICAgICAgICByZXR1cm4gY29uZi5nZXRJbnQoTlVN\nX1JFQURBSEVBRF9DQUNIRV9USFJFQURTLCBSdW50aW1lLmdldFJ1bnRpbWUo\nKS5hdmFpbGFibGVQcm9jZXNzb3JzKCkpOwogICAgfQoKICAgIC8qKgogICAg\nICogR2V0IG51bWJlciBvZiBkZWxpdmVyeSB0aHJlYWRzCiAgICAgKgogICAg\nICogQHJldHVybiBudW1iZXIgb2YgZGVsaXZlcnkgdGhyZWFkcy4KICAgICAq\nLwogICAgcHVibGljIGludCBnZXROdW1EZWxpdmVyeVRocmVhZHMoKSB7CiAg\nICAgICAgcmV0dXJuIGNvbmYuZ2V0SW50KE5VTV9ERUxJVkVSWV9USFJFQURT\nLCBSdW50aW1lLmdldFJ1bnRpbWUoKS5hdmFpbGFibGVQcm9jZXNzb3JzKCkp\nOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciBlbmFibGUgbWV0YWRh\ndGEgbWFuYWdlciBiYXNlZCB0b3BpYyBtYW5hZ2VyLgogICAgICoKICAgICAq\nIEByZXR1cm4gdHJ1ZSBpZiBlbmFibGVkIG1ldGFkYXRhIG1hbmFnZXIgYmFz\nZWQgdG9waWMgbWFuYWdlci4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4g\naXNNZXRhZGF0YU1hbmFnZXJCYXNlZFRvcGljTWFuYWdlckVuYWJsZWQoKSB7\nCiAgICAgICAgcmV0dXJuIGNvbmYuZ2V0Qm9vbGVhbihNRVRBREFUQV9NQU5B\nR0VSX0JBU0VEX1RPUElDX01BTkFHRVJfRU5BQkxFRCwgZmFsc2UpOwogICAg\nfQoKICAgIC8qKgogICAgICogR2V0IG1ldGFkYXRhIG1hbmFnZXIgZmFjdG9y\neSBjbGFzcy4KICAgICAqCiAgICAgKiBAcmV0dXJuIG1hbmFnZXIgY2xhc3MK\nICAgICAqLwogICAgcHVibGljIENsYXNzPD8gZXh0ZW5kcyBNZXRhZGF0YU1h\nbmFnZXJGYWN0b3J5PiBnZXRNZXRhZGF0YU1hbmFnZXJGYWN0b3J5Q2xhc3Mo\nKQogICAgdGhyb3dzIENvbmZpZ3VyYXRpb25FeGNlcHRpb24gewogICAgICAg\nIHJldHVybiBSZWZsZWN0aW9uVXRpbHMuZ2V0Q2xhc3MoY29uZiwgTUVUQURB\nVEFfTUFOQUdFUl9GQUNUT1JZX0NMQVNTLAogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgbnVsbCwgTWV0YWRhdGFNYW5hZ2VyRmFj\ndG9yeS5jbGFzcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIGRlZmF1bHRMb2FkZXIpOwogICAgfQoKICAgIC8qKgogICAgICog\nU2V0IG1ldGFkYXRhIG1hbmFnZXIgZmFjdG9yeSBjbGFzcyBuYW1lCiAgICAg\nKgogICAgICogQHBhcmFtIG1hbmFnZXJDbHNOYW1lCiAgICAgKiAgICAgICAg\nICBNYW5hZ2VyIENsYXNzIE5hbWUKICAgICAqIEByZXR1cm4gc2VydmVyIGNv\nbmZpZ3VyYXRpb24KICAgICAqLwogICAgcHVibGljIFNlcnZlckNvbmZpZ3Vy\nYXRpb24gc2V0TWV0YWRhdGFNYW5hZ2VyRmFjdG9yeU5hbWUoU3RyaW5nIG1h\nbmFnZXJDbHNOYW1lKSB7CiAgICAgICAgY29uZi5zZXRQcm9wZXJ0eShNRVRB\nREFUQV9NQU5BR0VSX0ZBQ1RPUllfQ0xBU1MsIG1hbmFnZXJDbHNOYW1lKTsK\nICAgICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICAvKioKICAgICAqIEdl\ndCBtZXRhc3RvcmUgaW1wbGVtZW50YXRpb24gY2xhc3MuCiAgICAgKgogICAg\nICogQHJldHVybiBtZXRhc3RvcmUgaW1wbGVtZW50YXRpb24gY2xhc3MgbmFt\nZS4KICAgICAqLwogICAgcHVibGljIFN0cmluZyBnZXRNZXRhc3RvcmVJbXBs\nQ2xhc3MoKSB7CiAgICAgICAgcmV0dXJuIGNvbmYuZ2V0U3RyaW5nKE1FVEFT\nVE9SRV9JTVBMX0NMQVNTKTsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCBt\nYXggZW50cmllcyBwZXIgc2NhbiBpbiBtZXRhc3RvcmUuCiAgICAgKgogICAg\nICogQHJldHVybiBtYXggZW50cmllcyBwZXIgc2NhbiBpbiBtZXRhc3RvcmUu\nCiAgICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0TWV0YXN0b3JlTWF4RW50cmll\nc1BlclNjYW4oKSB7CiAgICAgICAgcmV0dXJuIGNvbmYuZ2V0SW50KE1FVEFT\nVE9SRV9NQVhfRU5UUklFU19QRVJfU0NBTiwgNTApOwogICAgfQp9Cg==\n","encoding":"base64"}

