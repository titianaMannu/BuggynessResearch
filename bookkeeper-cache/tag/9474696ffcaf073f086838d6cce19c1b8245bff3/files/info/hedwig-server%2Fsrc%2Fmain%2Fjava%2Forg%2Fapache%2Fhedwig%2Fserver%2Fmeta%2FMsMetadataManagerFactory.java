{"sha":"b44ca91ce9e0f672281698e29635411c68e64c60","node_id":"MDQ6QmxvYjE1NzU5NTY6YjQ0Y2E5MWNlOWUwZjY3MjI4MTY5OGUyOTYzNTQxMWM2OGU2NGM2MA==","size":41023,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/b44ca91ce9e0f672281698e29635411c68e64c60","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIubWV0YTsKCmltcG9ydCBq\nYXZhLmlvLklPRXhjZXB0aW9uOwppbXBvcnQgamF2YS5pby5VbnN1cHBvcnRl\nZEVuY29kaW5nRXhjZXB0aW9uOwppbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9y\nOwppbXBvcnQgamF2YS51dGlsLk1hcDsKaW1wb3J0IGphdmEudXRpbC5jb25j\ndXJyZW50LkNvbmN1cnJlbnRIYXNoTWFwOwoKaW1wb3J0IHN0YXRpYyBjb20u\nZ29vZ2xlLmNvbW1vbi5iYXNlLkNoYXJzZXRzLlVURl84OwppbXBvcnQgY29t\nLmdvb2dsZS5wcm90b2J1Zi5CeXRlU3RyaW5nOwppbXBvcnQgY29tLmdvb2ds\nZS5wcm90b2J1Zi5UZXh0Rm9ybWF0OwppbXBvcnQgY29tLmdvb2dsZS5wcm90\nb2J1Zi5UZXh0Rm9ybWF0LlBhcnNlRXhjZXB0aW9uOwoKaW1wb3J0IG9yZy5z\nbGY0ai5Mb2dnZXI7CmltcG9ydCBvcmcuc2xmNGouTG9nZ2VyRmFjdG9yeTsK\nCmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIubWV0YXN0b3JlLk1ldGFT\ndG9yZTsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5tZXRhc3RvcmUu\nTWV0YXN0b3JlQ2FsbGJhY2s7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVw\nZXIubWV0YXN0b3JlLk1ldGFzdG9yZUN1cnNvcjsKaW1wb3J0IG9yZy5hcGFj\naGUuYm9va2tlZXBlci5tZXRhc3RvcmUuTWV0YXN0b3JlQ3Vyc29yLlJlYWRF\nbnRyaWVzQ2FsbGJhY2s7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIu\nbWV0YXN0b3JlLk1ldGFzdG9yZUV4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFj\naGUuYm9va2tlZXBlci5tZXRhc3RvcmUuTWV0YXN0b3JlRmFjdG9yeTsKaW1w\nb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5tZXRhc3RvcmUuTWV0YXN0b3Jl\nU2Nhbm5hYmxlVGFibGU7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIu\nbWV0YXN0b3JlLk1ldGFzdG9yZVNjYW5uYWJsZVRhYmxlLk9yZGVyOwppbXBv\ncnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLm1ldGFzdG9yZS5NZXRhc3RvcmVU\nYWJsZTsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5tZXRhc3RvcmUu\nTWV0YXN0b3JlVXRpbHM7CgppbXBvcnQgc3RhdGljIG9yZy5hcGFjaGUuYm9v\na2tlZXBlci5tZXRhc3RvcmUuTWV0YXN0b3JlVGFibGUuKjsKaW1wb3J0IG9y\nZy5hcGFjaGUuYm9va2tlZXBlci5tZXRhc3RvcmUuTWV0YXN0b3JlVGFibGVJ\ndGVtOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLm1ldGFzdG9yZS5N\nU0V4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5tZXRh\nc3RvcmUuVmFsdWU7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIudmVy\nc2lvbmluZy5WZXJzaW9uOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVy\nLnZlcnNpb25pbmcuVmVyc2lvbmVkOwoKaW1wb3J0IG9yZy5hcGFjaGUuaGVk\nd2lnLmV4Y2VwdGlvbnMuUHViU3ViRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFw\nYWNoZS5oZWR3aWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2wuTGVkZ2VyUmFu\nZ2VzOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcucHJvdG9jb2wuUHViU3Vi\nUHJvdG9jb2wuU3RhdHVzQ29kZTsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2ln\nLnByb3RvY29sLlB1YlN1YlByb3RvY29sLlN1YnNjcmlwdGlvbkRhdGE7Cmlt\ncG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5QdWJTdWJQcm90b2Nv\nbC5TdWJzY3JpcHRpb25QcmVmZXJlbmNlczsKaW1wb3J0IG9yZy5hcGFjaGUu\naGVkd2lnLnByb3RvY29sLlB1YlN1YlByb3RvY29sLlN1YnNjcmlwdGlvblN0\nYXRlOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcucHJvdG9leHRlbnNpb25z\nLlN1YnNjcmlwdGlvblN0YXRlVXRpbHM7CmltcG9ydCBvcmcuYXBhY2hlLmhl\nZHdpZy5zZXJ2ZXIuY29tbW9uLlNlcnZlckNvbmZpZ3VyYXRpb247CmltcG9y\ndCBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIudG9waWNzLkh1YkluZm87Cmlt\ncG9ydCBvcmcuYXBhY2hlLmhlZHdpZy51dGlsLkNhbGxiYWNrOwoKaW1wb3J0\nIG9yZy5hcGFjaGUuem9va2VlcGVyLlpvb0tlZXBlcjsKCi8qKgogKiBNZXRh\nZGF0YU1hbmFnZXJGYWN0b3J5IGZvciBwbHVnLWluIG1ldGFkYXRhIHN0b3Jh\nZ2UuCiAqLwpwdWJsaWMgY2xhc3MgTXNNZXRhZGF0YU1hbmFnZXJGYWN0b3J5\nIGV4dGVuZHMgTWV0YWRhdGFNYW5hZ2VyRmFjdG9yeSB7CiAgICBwcm90ZWN0\nZWQgZmluYWwgc3RhdGljIExvZ2dlciBsb2dnZXIgPSBMb2dnZXJGYWN0b3J5\nLmdldExvZ2dlcihNc01ldGFkYXRhTWFuYWdlckZhY3RvcnkuY2xhc3MpOwoK\nICAgIHN0YXRpYyBmaW5hbCBTdHJpbmcgVVRGOCA9ICJVVEYtOCI7CgogICAg\nc3RhdGljIGZpbmFsIGludCBDVVJfVkVSU0lPTiA9IDE7CgogICAgc3RhdGlj\nIGZpbmFsIFN0cmluZyBPV05FUl9UQUJMRV9OQU1FID0gIm93bmVyIjsKICAg\nIHN0YXRpYyBmaW5hbCBTdHJpbmcgUEVSU0lTVF9UQUJMRV9OQU1FID0gInBl\ncnNpc3QiOwogICAgc3RhdGljIGZpbmFsIFN0cmluZyBTVUJfVEFCTEVfTkFN\nRSA9ICJzdWIiOwoKICAgIHN0YXRpYyBjbGFzcyBTeW5jUmVzdWx0PFQ+IHsK\nICAgICAgICBUIHZhbHVlOwogICAgICAgIGludCByYzsKICAgICAgICBib29s\nZWFuIGZpbmlzaGVkID0gZmFsc2U7CgogICAgICAgIHB1YmxpYyBzeW5jaHJv\nbml6ZWQgdm9pZCBjb21wbGV0ZShpbnQgcmMsIFQgdmFsdWUpIHsKICAgICAg\nICAgICAgdGhpcy5yYyA9IHJjOwogICAgICAgICAgICB0aGlzLnZhbHVlID0g\ndmFsdWU7CiAgICAgICAgICAgIGZpbmlzaGVkID0gdHJ1ZTsKCiAgICAgICAg\nICAgIG5vdGlmeSgpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHN5bmNo\ncm9uaXplZCB2b2lkIGJsb2NrKCkgdGhyb3dzIEludGVycnVwdGVkRXhjZXB0\naW9uIHsKICAgICAgICAgICAgd2hpbGUgKCFmaW5pc2hlZCkgewogICAgICAg\nICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAg\nICAgICBwdWJsaWMgaW50IGdldFJldHVybkNvZGUoKSB7CiAgICAgICAgICAg\nIHJldHVybiByYzsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBUIGdldFZh\nbHVlKCkgewogICAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgfQog\nICAgfQoKICAgIE1ldGFTdG9yZSBtZXRhc3RvcmU7CiAgICBNZXRhc3RvcmVU\nYWJsZSBvd25lclRhYmxlOwogICAgTWV0YXN0b3JlVGFibGUgcGVyc2lzdFRh\nYmxlOwogICAgTWV0YXN0b3JlU2Nhbm5hYmxlVGFibGUgc3ViVGFibGU7CiAg\nICBTZXJ2ZXJDb25maWd1cmF0aW9uIGNmZzsKCiAgICBAT3ZlcnJpZGUKICAg\nIHB1YmxpYyBNZXRhZGF0YU1hbmFnZXJGYWN0b3J5IGluaXRpYWxpemUoU2Vy\ndmVyQ29uZmlndXJhdGlvbiBjZmcsIFpvb0tlZXBlciB6aywgaW50IHZlcnNp\nb24pIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgaWYgKENVUl9WRVJT\nSU9OICE9IHZlcnNpb24pIHsKICAgICAgICAgICAgdGhyb3cgbmV3IElPRXhj\nZXB0aW9uKCJJbmNvbXBhdGlibGUgTXNNZXRhZGF0YU1hbmFnZXJGYWN0b3J5\nIHZlcnNpb24gIiArIHZlcnNpb24KICAgICAgICAgICAgICAgICAgICArICIg\nZm91bmQsIGV4cGVjdGVkIHZlcnNpb24gIiArIENVUl9WRVJTSU9OKTsKICAg\nICAgICB9CiAgICAgICAgdGhpcy5jZmcgPSBjZmc7CiAgICAgICAgdHJ5IHsK\nICAgICAgICAgICAgbWV0YXN0b3JlID0gTWV0YXN0b3JlRmFjdG9yeS5jcmVh\ndGVNZXRhU3RvcmUoY2ZnLmdldE1ldGFzdG9yZUltcGxDbGFzcygpKTsKICAg\nICAgICAgICAgLy8gVE9ETzogbmVlZCB0byBzdG9yZSBtZXRhc3RvcmUgY2xh\nc3MgYW5kIHZlcnNpb24gaW4gc29tZSBwbGFjZS4KICAgICAgICAgICAgbWV0\nYXN0b3JlLmluaXQoY2ZnLmdldENvbmYoKSwgbWV0YXN0b3JlLmdldFZlcnNp\nb24oKSk7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAg\nICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKCJMb2FkIG1ldGFzdG9yZSBm\nYWlsZWQgOiAiLCBlKTsKICAgICAgICB9CgogICAgICAgIHRyeSB7CiAgICAg\nICAgICAgIG93bmVyVGFibGUgPSBtZXRhc3RvcmUuY3JlYXRlVGFibGUoT1dO\nRVJfVEFCTEVfTkFNRSk7CiAgICAgICAgICAgIGlmIChvd25lclRhYmxlID09\nIG51bGwpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlv\nbigiY3JlYXRlIG93bmVyIHRhYmxlIGZhaWxlZCIpOwogICAgICAgICAgICB9\nCgogICAgICAgICAgICBwZXJzaXN0VGFibGUgPSBtZXRhc3RvcmUuY3JlYXRl\nVGFibGUoUEVSU0lTVF9UQUJMRV9OQU1FKTsKICAgICAgICAgICAgaWYgKHBl\ncnNpc3RUYWJsZSA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBu\nZXcgSU9FeGNlcHRpb24oImNyZWF0ZSBwZXJzaXN0ZW5jZSB0YWJsZSBmYWls\nZWQiKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgc3ViVGFibGUgPSBt\nZXRhc3RvcmUuY3JlYXRlU2Nhbm5hYmxlVGFibGUoU1VCX1RBQkxFX05BTUUp\nOwogICAgICAgICAgICBpZiAoc3ViVGFibGUgPT0gbnVsbCkgewogICAgICAg\nICAgICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKCJjcmVhdGUgc3Vic2Ny\naXB0aW9uIHRhYmxlIGZhaWxlZCIpOwogICAgICAgICAgICB9CiAgICAgICAg\nfSBjYXRjaCAoTWV0YXN0b3JlRXhjZXB0aW9uIG1lKSB7CiAgICAgICAgICAg\nIHRocm93IG5ldyBJT0V4Y2VwdGlvbigiRmFpbGVkIHRvIGNyZWF0ZSB0YWJs\nZXMgOiAiLCBtZSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdGhpczsK\nICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBpbnQgZ2V0Q3VycmVu\ndFZlcnNpb24oKSB7CiAgICAgICAgcmV0dXJuIENVUl9WRVJTSU9OOwogICAg\nfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgc2h1dGRvd24oKSB7\nCiAgICAgICAgaWYgKG1ldGFzdG9yZSA9PSBudWxsKSB7CiAgICAgICAgICAg\nIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmIChvd25lclRhYmxlICE9\nIG51bGwpIHsKICAgICAgICAgICAgb3duZXJUYWJsZS5jbG9zZSgpOwogICAg\nICAgICAgICBvd25lclRhYmxlID0gbnVsbDsKICAgICAgICB9CgogICAgICAg\nIGlmIChwZXJzaXN0VGFibGUgIT0gbnVsbCkgewogICAgICAgICAgICBwZXJz\naXN0VGFibGUuY2xvc2UoKTsKICAgICAgICAgICAgcGVyc2lzdFRhYmxlID0g\nbnVsbDsKICAgICAgICB9CgogICAgICAgIGlmIChzdWJUYWJsZSAhPSBudWxs\nKSB7CiAgICAgICAgICAgIHN1YlRhYmxlLmNsb3NlKCk7CiAgICAgICAgICAg\nIHN1YlRhYmxlID0gbnVsbDsKICAgICAgICB9CgogICAgICAgIG1ldGFzdG9y\nZS5jbG9zZSgpOwogICAgICAgIG1ldGFzdG9yZSA9IG51bGw7CiAgICB9Cgog\nICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgSXRlcmF0b3I8Qnl0ZVN0cmluZz4g\nZ2V0VG9waWNzKCkgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICBTeW5j\nUmVzdWx0PE1ldGFzdG9yZUN1cnNvcj4gc3luID0gbmV3IFN5bmNSZXN1bHQ8\nTWV0YXN0b3JlQ3Vyc29yPigpOwogICAgICAgIHBlcnNpc3RUYWJsZS5vcGVu\nQ3Vyc29yKE5PTl9GSUVMRFMsIG5ldyBNZXRhc3RvcmVDYWxsYmFjazxNZXRh\nc3RvcmVDdXJzb3I+KCkgewogICAgICAgICAgICBwdWJsaWMgdm9pZCBjb21w\nbGV0ZShpbnQgcmMsIE1ldGFzdG9yZUN1cnNvciBjdXJzb3IsIE9iamVjdCBj\ndHgpIHsKICAgICAgICAgICAgICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJ1bmNo\nZWNrZWQiKQogICAgICAgICAgICAgICAgU3luY1Jlc3VsdDxNZXRhc3RvcmVD\ndXJzb3I+IHN5biA9IChTeW5jUmVzdWx0PE1ldGFzdG9yZUN1cnNvcj4pIGN0\neDsKICAgICAgICAgICAgICAgIHN5bi5jb21wbGV0ZShyYywgY3Vyc29yKTsK\nICAgICAgICAgICAgfQogICAgICAgIH0sIHN5bik7CiAgICAgICAgdHJ5IHsK\nICAgICAgICAgICAgc3luLmJsb2NrKCk7CiAgICAgICAgfSBjYXRjaCAoRXhj\nZXB0aW9uIGUpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9u\nKCJJbnRlcnJ1cHRlZCBvbiBnZXR0aW5nIHRvcGljcyBsaXN0IDogIiwgZSk7\nCiAgICAgICAgfQoKICAgICAgICBpZiAoc3luLmdldFJldHVybkNvZGUoKSAh\nPSBNU0V4Y2VwdGlvbi5Db2RlLk9LLmdldENvZGUoKSkgewogICAgICAgICAg\nICB0aHJvdyBuZXcgSU9FeGNlcHRpb24oIkZhaWxlZCB0byBnZXQgdG9waWNz\nIDogIiwgTVNFeGNlcHRpb24uY3JlYXRlKAogICAgICAgICAgICAgICAgICAg\nIE1TRXhjZXB0aW9uLkNvZGUuZ2V0KHN5bi5nZXRSZXR1cm5Db2RlKCkpLCAi\nIikpOwogICAgICAgIH0KCiAgICAgICAgZmluYWwgTWV0YXN0b3JlQ3Vyc29y\nIGN1cnNvciA9IHN5bi5nZXRWYWx1ZSgpOwogICAgICAgIHJldHVybiBuZXcg\nSXRlcmF0b3I8Qnl0ZVN0cmluZz4oKSB7CiAgICAgICAgICAgIEl0ZXJhdG9y\nPE1ldGFzdG9yZVRhYmxlSXRlbT4gaXRlbUl0ZXIgPSBudWxsOwoKICAgICAg\nICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyBib29sZWFuIGhh\nc05leHQoKSB7CiAgICAgICAgICAgICAgICB3aGlsZSAobnVsbCA9PSBpdGVt\nSXRlciB8fCAhaXRlbUl0ZXIuaGFzTmV4dCgpKSB7CiAgICAgICAgICAgICAg\nICAgICAgaWYgKCFjdXJzb3IuaGFzTW9yZUVudHJpZXMoKSkgewogICAgICAg\nICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAg\nICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAg\nICAgICAgICAgICAgICBpdGVtSXRlciA9IGN1cnNvci5yZWFkRW50cmllcyhj\nZmcuZ2V0TWV0YXN0b3JlTWF4RW50cmllc1BlclNjYW4oKSk7CiAgICAgICAg\nICAgICAgICAgICAgfSBjYXRjaCAoTVNFeGNlcHRpb24gbXNlKSB7CiAgICAg\nICAgICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCJJbnRlcnJ1cHRlZCB3\naGVuIGl0ZXJhdGluZyB0aGUgdG9waWNzIGxpc3QgOiAiLCBtc2UpOwogICAg\nICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAg\nICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAg\ncmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIEBPdmVy\ncmlkZQogICAgICAgICAgICBwdWJsaWMgQnl0ZVN0cmluZyBuZXh0KCkgewog\nICAgICAgICAgICAgICAgTWV0YXN0b3JlVGFibGVJdGVtIHQgPSBpdGVtSXRl\nci5uZXh0KCk7CiAgICAgICAgICAgICAgICByZXR1cm4gQnl0ZVN0cmluZy5j\nb3B5RnJvbVV0ZjgodC5nZXRLZXkoKSk7CiAgICAgICAgICAgIH0KCiAgICAg\nICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICBwdWJsaWMgdm9pZCByZW1v\ndmUoKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRP\ncGVyYXRpb25FeGNlcHRpb24oIkRvZXNuJ3Qgc3VwcG9ydCByZW1vdmUgdG9w\naWMgZnJvbSB0b3BpYyBpdGVyYXRvci4iKTsKICAgICAgICAgICAgfQogICAg\nICAgIH07CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgVG9waWNP\nd25lcnNoaXBNYW5hZ2VyIG5ld1RvcGljT3duZXJzaGlwTWFuYWdlcigpIHsK\nICAgICAgICByZXR1cm4gbmV3IE1zVG9waWNPd25lcnNoaXBNYW5hZ2VySW1w\nbChvd25lclRhYmxlKTsKICAgIH0KCiAgICBzdGF0aWMgY2xhc3MgTXNUb3Bp\nY093bmVyc2hpcE1hbmFnZXJJbXBsIGltcGxlbWVudHMgVG9waWNPd25lcnNo\naXBNYW5hZ2VyIHsKCiAgICAgICAgc3RhdGljIGZpbmFsIFN0cmluZyBPV05F\nUl9GSUVMRCA9ICJvd25lciI7CgogICAgICAgIGZpbmFsIE1ldGFzdG9yZVRh\nYmxlIG93bmVyVGFibGU7CgogICAgICAgIE1zVG9waWNPd25lcnNoaXBNYW5h\nZ2VySW1wbChNZXRhc3RvcmVUYWJsZSBvd25lclRhYmxlKSB7CiAgICAgICAg\nICAgIHRoaXMub3duZXJUYWJsZSA9IG93bmVyVGFibGU7CiAgICAgICAgfQoK\nICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgdm9pZCBjbG9zZSgp\nIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgICAgIC8vIGRvIG5vdGhp\nbmcKICAgICAgICB9CgogICAgICAgIEBPdmVycmlkZQogICAgICAgIHB1Ymxp\nYyB2b2lkIHJlYWRPd25lckluZm8oZmluYWwgQnl0ZVN0cmluZyB0b3BpYywg\nZmluYWwgQ2FsbGJhY2s8VmVyc2lvbmVkPEh1YkluZm8+PiBjYWxsYmFjaywg\nT2JqZWN0IGN0eCkgewogICAgICAgICAgICBvd25lclRhYmxlLmdldCh0b3Bp\nYy50b1N0cmluZ1V0ZjgoKSwgbmV3IE1ldGFzdG9yZUNhbGxiYWNrPFZlcnNp\nb25lZDxWYWx1ZT4+KCkgewogICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAg\nICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBjb21wbGV0ZShpbnQgcmMsIFZl\ncnNpb25lZDxWYWx1ZT4gdmFsdWUsIE9iamVjdCBjdHgpIHsKICAgICAgICAg\nICAgICAgICAgICBpZiAoTVNFeGNlcHRpb24uQ29kZS5Ob0tleS5nZXRDb2Rl\nKCkgPT0gcmMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2su\nb3BlcmF0aW9uRmluaXNoZWQoY3R4LCBudWxsKTsKICAgICAgICAgICAgICAg\nICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAg\nICAgICAgICAgICAgICAgaWYgKE1TRXhjZXB0aW9uLkNvZGUuT0suZ2V0Q29k\nZSgpICE9IHJjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ0Vycm9y\nQW5kRmluaXNoT3BlcmF0aW9uKCJDb3VsZCBub3QgcmVhZCBvd25lcnNoaXAg\nZm9yIHRvcGljICIgKyB0b3BpYy50b1N0cmluZ1V0ZjgoKSwKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaywgY3R4LCByYyk7CiAg\nICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAg\nICAgICB9CgogICAgICAgICAgICAgICAgICAgIEh1YkluZm8gb3duZXIgPSBu\ndWxsOwogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAg\nICAgICAgICAgIGJ5dGVbXSBkYXRhID0gdmFsdWUuZ2V0VmFsdWUoKS5nZXRG\naWVsZChPV05FUl9GSUVMRCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlm\nIChkYXRhICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIG93bmVyID0gSHViSW5mby5wYXJzZShuZXcgU3RyaW5nKGRhdGEsIFVURl84\nKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAg\nICAgICB9IGNhdGNoIChIdWJJbmZvLkludmFsaWRIdWJJbmZvRXhjZXB0aW9u\nIGloaWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4o\nIkZhaWxlZCB0byBwYXJzZSBodWIgaW5mbyBmb3IgdG9waWMgIiArIHRvcGlj\nLnRvU3RyaW5nVXRmOCgpLCBpaGllKTsKICAgICAgICAgICAgICAgICAgICB9\nCiAgICAgICAgICAgICAgICAgICAgVmVyc2lvbiB2ZXJzaW9uID0gdmFsdWUu\nZ2V0VmVyc2lvbigpOwogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLm9w\nZXJhdGlvbkZpbmlzaGVkKGN0eCwgbmV3IFZlcnNpb25lZDxIdWJJbmZvPihv\nd25lciwgdmVyc2lvbikpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAg\nICB9LCBjdHgpOwogICAgICAgIH0KCiAgICAgICAgQE92ZXJyaWRlCiAgICAg\nICAgcHVibGljIHZvaWQgd3JpdGVPd25lckluZm8oZmluYWwgQnl0ZVN0cmlu\nZyB0b3BpYywgZmluYWwgSHViSW5mbyBvd25lciwgZmluYWwgVmVyc2lvbiB2\nZXJzaW9uLAogICAgICAgICAgICAgICAgZmluYWwgQ2FsbGJhY2s8VmVyc2lv\nbj4gY2FsbGJhY2ssIE9iamVjdCBjdHgpIHsKICAgICAgICAgICAgVmFsdWUg\ndmFsdWUgPSBuZXcgVmFsdWUoKTsKICAgICAgICAgICAgdmFsdWUuc2V0Rmll\nbGQoT1dORVJfRklFTEQsIG93bmVyLnRvU3RyaW5nKCkuZ2V0Qnl0ZXMoVVRG\nXzgpKTsKCiAgICAgICAgICAgIG93bmVyVGFibGUucHV0KHRvcGljLnRvU3Ry\naW5nVXRmOCgpLCB2YWx1ZSwgdmVyc2lvbiwgbmV3IE1ldGFzdG9yZUNhbGxi\nYWNrPFZlcnNpb24+KCkgewogICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAg\nICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBjb21wbGV0ZShpbnQgcmMsIFZl\ncnNpb24gdmVyLCBPYmplY3QgY3R4KSB7CiAgICAgICAgICAgICAgICAgICAg\naWYgKE1TRXhjZXB0aW9uLkNvZGUuT0suZ2V0Q29kZSgpID09IHJjKSB7CiAg\nICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLm9wZXJhdGlvbkZpbmlz\naGVkKGN0eCwgdmVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJu\nOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoTVNFeGNlcHRpb24u\nQ29kZS5Ob0tleS5nZXRDb2RlKCkgPT0gcmMpIHsKICAgICAgICAgICAgICAg\nICAgICAgICAgLy8gbm8gbm9kZQogICAgICAgICAgICAgICAgICAgICAgICBj\nYWxsYmFjay5vcGVyYXRpb25GYWlsZWQoCiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgY3R4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIFB1YlN1YkV4Y2VwdGlvbi5jcmVhdGUoU3RhdHVzQ29kZS5OT19UT1BJ\nQ19PV05FUl9JTkZPLCAiTm8gb3duZXIgaW5mbyBmb3VuZCBmb3IgdG9waWMg\nIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyB0\nb3BpYy50b1N0cmluZ1V0ZjgoKSkpOwogICAgICAgICAgICAgICAgICAgICAg\nICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChNU0V4\nY2VwdGlvbi5Db2RlLktleUV4aXN0cy5nZXRDb2RlKCkgPT0gcmMpIHsKICAg\nICAgICAgICAgICAgICAgICAgICAgLy8ga2V5IGV4aXN0cwogICAgICAgICAg\nICAgICAgICAgICAgICBjYWxsYmFjay5vcGVyYXRpb25GYWlsZWQoCiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LAogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIFB1YlN1YkV4Y2VwdGlvbi5jcmVhdGUoU3Rh\ndHVzQ29kZS5UT1BJQ19PV05FUl9JTkZPX0VYSVNUUywgIk93bmVyIGluZm8g\nb2YgdG9waWMgIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgKyB0b3BpYy50b1N0cmluZ1V0ZjgoKSArICIgZXhpc3RlZC4iKSk7\nCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAg\nICAgICAgICB9IGVsc2UgaWYgKE1TRXhjZXB0aW9uLkNvZGUuQmFkVmVyc2lv\nbi5nZXRDb2RlKCkgPT0gcmMpIHsKICAgICAgICAgICAgICAgICAgICAgICAg\nLy8gYmFkIHZlcnNpb24KICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJh\nY2sub3BlcmF0aW9uRmFpbGVkKGN0eCwgUHViU3ViRXhjZXB0aW9uLmNyZWF0\nZShTdGF0dXNDb2RlLkJBRF9WRVJTSU9OLAogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICJCYWQgdmVyc2lvbiBwcm92aWRlZCB0byB1cGRhdGUg\nb3duZXIgaW5mbyBvZiB0b3BpYyAiICsgdG9waWMudG9TdHJpbmdVdGY4KCkp\nKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAg\nICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxv\nZ0Vycm9yQW5kRmluaXNoT3BlcmF0aW9uKCJGYWlsZWQgdG8gdXBkYXRlIG93\nbmVyc2hpcCBvZiB0b3BpYyAiICsgdG9waWMudG9TdHJpbmdVdGY4KCkKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICArICIgdG8gIiArIG93bmVy\nLCBjYWxsYmFjaywgY3R4LCByYyk7CiAgICAgICAgICAgICAgICAgICAgICAg\nIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAg\nICB9CiAgICAgICAgICAgIH0sIGN0eCk7CiAgICAgICAgfQoKICAgICAgICBA\nT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgdm9pZCBkZWxldGVPd25lckluZm8o\nZmluYWwgQnl0ZVN0cmluZyB0b3BpYywgVmVyc2lvbiB2ZXJzaW9uLCBmaW5h\nbCBDYWxsYmFjazxWb2lkPiBjYWxsYmFjaywKICAgICAgICAgICAgICAgIE9i\namVjdCBjdHgpIHsKICAgICAgICAgICAgb3duZXJUYWJsZS5yZW1vdmUodG9w\naWMudG9TdHJpbmdVdGY4KCksIHZlcnNpb24sIG5ldyBNZXRhc3RvcmVDYWxs\nYmFjazxWb2lkPigpIHsKICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAg\nICAgICAgICAgICAgcHVibGljIHZvaWQgY29tcGxldGUoaW50IHJjLCBWb2lk\nIHZhbHVlLCBPYmplY3QgY3R4KSB7CiAgICAgICAgICAgICAgICAgICAgaWYg\nKE1TRXhjZXB0aW9uLkNvZGUuT0suZ2V0Q29kZSgpID09IHJjKSB7CiAgICAg\nICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygiU3VjY2Vzc2Z1bGx5\nIGRlbGV0ZWQgb3duZXIgaW5mbyBmb3IgdG9waWMge30iLCB0b3BpYy50b1N0\ncmluZ1V0ZjgoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNr\nLm9wZXJhdGlvbkZpbmlzaGVkKGN0eCwgbnVsbCk7CiAgICAgICAgICAgICAg\nICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9IGVsc2Ug\naWYgKE1TRXhjZXB0aW9uLkNvZGUuTm9LZXkuZ2V0Q29kZSgpID09IHJjKSB7\nCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vIG5vZGUKICAgICAgICAg\nICAgICAgICAgICAgICAgY2FsbGJhY2sub3BlcmF0aW9uRmFpbGVkKAogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eCwKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICBQdWJTdWJFeGNlcHRpb24uY3JlYXRlKFN0\nYXR1c0NvZGUuTk9fVE9QSUNfT1dORVJfSU5GTywgIk5vIG93bmVyIGluZm8g\nZm91bmQgZm9yIHRvcGljICIKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICsgdG9waWMudG9TdHJpbmdVdGY4KCkpKTsKICAgICAg\nICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAg\nIH0gZWxzZSBpZiAoTVNFeGNlcHRpb24uQ29kZS5CYWRWZXJzaW9uLmdldENv\nZGUoKSA9PSByYykgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBiYWQg\ndmVyc2lvbgogICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5vcGVy\nYXRpb25GYWlsZWQoY3R4LCBQdWJTdWJFeGNlcHRpb24uY3JlYXRlKFN0YXR1\nc0NvZGUuQkFEX1ZFUlNJT04sCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIkJhZCB2ZXJzaW9uIHByb3ZpZGVkIHRvIGRlbGV0ZSBvd25lciBp\nbmZvIG9mIHRvcGljICIgKyB0b3BpYy50b1N0cmluZ1V0ZjgoKSkpOwogICAg\nICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAg\nICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nRXJyb3JB\nbmRGaW5pc2hPcGVyYXRpb24oIkZhaWxlZCB0byBkZWxldGUgb3duZXIgaW5m\nbyBmb3IgdG9waWMgIiArIHRvcGljLnRvU3RyaW5nVXRmOCgpLAogICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLCBjdHgsIHJjKTsK\nICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAg\nICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgY3R4\nKTsKICAgICAgICB9CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMg\nVG9waWNQZXJzaXN0ZW5jZU1hbmFnZXIgbmV3VG9waWNQZXJzaXN0ZW5jZU1h\nbmFnZXIoKSB7CiAgICAgICAgcmV0dXJuIG5ldyBNc1RvcGljUGVyc2lzdGVu\nY2VNYW5hZ2VySW1wbChwZXJzaXN0VGFibGUpOwogICAgfQoKICAgIHN0YXRp\nYyBjbGFzcyBNc1RvcGljUGVyc2lzdGVuY2VNYW5hZ2VySW1wbCBpbXBsZW1l\nbnRzIFRvcGljUGVyc2lzdGVuY2VNYW5hZ2VyIHsKCiAgICAgICAgc3RhdGlj\nIGZpbmFsIFN0cmluZyBQRVJTSVNUX0ZJRUxEID0gInByc3QiOwoKICAgICAg\nICBmaW5hbCBNZXRhc3RvcmVUYWJsZSBwZXJzaXN0VGFibGU7CgogICAgICAg\nIE1zVG9waWNQZXJzaXN0ZW5jZU1hbmFnZXJJbXBsKE1ldGFzdG9yZVRhYmxl\nIHBlcnNpc3RUYWJsZSkgewogICAgICAgICAgICB0aGlzLnBlcnNpc3RUYWJs\nZSA9IHBlcnNpc3RUYWJsZTsKICAgICAgICB9CgogICAgICAgIEBPdmVycmlk\nZQogICAgICAgIHB1YmxpYyB2b2lkIGNsb3NlKCkgdGhyb3dzIElPRXhjZXB0\naW9uIHsKICAgICAgICAgICAgLy8gZG8gbm90aGluZwogICAgICAgIH0KCiAg\nICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHVibGljIHZvaWQgcmVhZFRvcGlj\nUGVyc2lzdGVuY2VJbmZvKGZpbmFsIEJ5dGVTdHJpbmcgdG9waWMsIGZpbmFs\nIENhbGxiYWNrPFZlcnNpb25lZDxMZWRnZXJSYW5nZXM+PiBjYWxsYmFjaywK\nICAgICAgICAgICAgICAgIE9iamVjdCBjdHgpIHsKICAgICAgICAgICAgcGVy\nc2lzdFRhYmxlLmdldCh0b3BpYy50b1N0cmluZ1V0ZjgoKSwgbmV3IE1ldGFz\ndG9yZUNhbGxiYWNrPFZlcnNpb25lZDxWYWx1ZT4+KCkgewogICAgICAgICAg\nICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBj\nb21wbGV0ZShpbnQgcmMsIFZlcnNpb25lZDxWYWx1ZT4gdmFsdWUsIE9iamVj\ndCBjdHgpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoTVNFeGNlcHRpb24u\nQ29kZS5PSy5nZXRDb2RlKCkgPT0gcmMpIHsKICAgICAgICAgICAgICAgICAg\nICAgICAgYnl0ZVtdIGRhdGEgPSB2YWx1ZS5nZXRWYWx1ZSgpLmdldEZpZWxk\nKFBFUlNJU1RfRklFTEQpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAo\nZGF0YSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBw\nYXJzZUFuZFJldHVyblRvcGljTGVkZ2VyUmFuZ2VzKHRvcGljLCBkYXRhLCB2\nYWx1ZS5nZXRWZXJzaW9uKCksIGNhbGxiYWNrLCBjdHgpOwogICAgICAgICAg\nICAgICAgICAgICAgICB9IGVsc2UgeyAvLyBudWxsIGRhdGEgaXMgc2FtZSBh\ncyBOb0tleQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2su\nb3BlcmF0aW9uRmluaXNoZWQoY3R4LCBudWxsKTsKICAgICAgICAgICAgICAg\nICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoTVNF\neGNlcHRpb24uQ29kZS5Ob0tleS5nZXRDb2RlKCkgPT0gcmMpIHsKICAgICAg\nICAgICAgICAgICAgICAgICAgY2FsbGJhY2sub3BlcmF0aW9uRmluaXNoZWQo\nY3R4LCBudWxsKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAg\nICAgICAgICAgICAgICAgICAgICBsb2dFcnJvckFuZEZpbmlzaE9wZXJhdGlv\nbigiQ291bGQgbm90IHJlYWQgbGVkZ2VycyBub2RlIGZvciB0b3BpYyAiICsg\ndG9waWMudG9TdHJpbmdVdGY4KCksCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgY2FsbGJhY2ssIGN0eCwgcmMpOwogICAgICAgICAgICAgICAg\nICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgY3R4KTsK\nICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIFBhcnNlIGxlZGdl\nciByYW5nZXMgZGF0YSBhbmQgcmV0dXJuIGl0IHRocnUgY2FsbGJhY2suCiAg\nICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gdG9waWMKICAgICAgICAgKiAg\nICAgICAgICAgIFRvcGljIG5hbWUKICAgICAgICAgKiBAcGFyYW0gZGF0YQog\nICAgICAgICAqICAgICAgICAgICAgVG9waWMgTGVkZ2VyIFJhbmdlcyBkYXRh\nCiAgICAgICAgICogQHBhcmFtIHZlcnNpb24KICAgICAgICAgKiAgICAgICAg\nICAgIFZlcnNpb24gb2YgdGhlIHRvcGljIGxlZGdlciByYW5nZXMgZGF0YQog\nICAgICAgICAqIEBwYXJhbSBjYWxsYmFjawogICAgICAgICAqICAgICAgICAg\nICAgQ2FsbGJhY2sgdG8gcmV0dXJuIGxlZGdlciByYW5nZXMKICAgICAgICAg\nKiBAcGFyYW0gY3R4CiAgICAgICAgICogICAgICAgICAgICBDb250ZXh0IG9m\nIHRoZSBjYWxsYmFjawogICAgICAgICAqLwogICAgICAgIHByaXZhdGUgdm9p\nZCBwYXJzZUFuZFJldHVyblRvcGljTGVkZ2VyUmFuZ2VzKEJ5dGVTdHJpbmcg\ndG9waWMsIGJ5dGVbXSBkYXRhLCBWZXJzaW9uIHZlcnNpb24sCiAgICAgICAg\nICAgICAgICBDYWxsYmFjazxWZXJzaW9uZWQ8TGVkZ2VyUmFuZ2VzPj4gY2Fs\nbGJhY2ssIE9iamVjdCBjdHgpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgICAgIExlZGdlclJhbmdlcy5CdWlsZGVyIHJhbmdlc0J1aWxkZXIg\nPSBMZWRnZXJSYW5nZXMubmV3QnVpbGRlcigpOwogICAgICAgICAgICAgICAg\nVGV4dEZvcm1hdC5tZXJnZShuZXcgU3RyaW5nKGRhdGEsIFVURjgpLCByYW5n\nZXNCdWlsZGVyKTsKICAgICAgICAgICAgICAgIExlZGdlclJhbmdlcyBsciA9\nIHJhbmdlc0J1aWxkZXIuYnVpbGQoKTsKICAgICAgICAgICAgICAgIFZlcnNp\nb25lZDxMZWRnZXJSYW5nZXM+IHJhbmdlcyA9IG5ldyBWZXJzaW9uZWQ8TGVk\nZ2VyUmFuZ2VzPihsciwgdmVyc2lvbik7CiAgICAgICAgICAgICAgICBjYWxs\nYmFjay5vcGVyYXRpb25GaW5pc2hlZChjdHgsIHJhbmdlcyk7CiAgICAgICAg\nICAgIH0gY2F0Y2ggKFBhcnNlRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAg\nICAgIFN0cmluZ0J1aWxkZXIgc2IgPSBuZXcgU3RyaW5nQnVpbGRlcigpOwog\nICAgICAgICAgICAgICAgc2IuYXBwZW5kKCJMZWRnZXIgcmFuZ2VzIGZvciB0\nb3BpYyAiKS5hcHBlbmQodG9waWMudG9TdHJpbmdVdGY4KCkpCiAgICAgICAg\nICAgICAgICAgICAgICAgIC5hcHBlbmQoIiBjb3VsZCBub3QgYmUgZGVzZXJp\nYWxpemVkLiIpOwogICAgICAgICAgICAgICAgU3RyaW5nIG1zZyA9IHNiLnRv\nU3RyaW5nKCk7CiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IobXNnLCBl\nKTsKICAgICAgICAgICAgICAgIGNhbGxiYWNrLm9wZXJhdGlvbkZhaWxlZChj\ndHgsIG5ldyBQdWJTdWJFeGNlcHRpb24uVW5leHBlY3RlZENvbmRpdGlvbkV4\nY2VwdGlvbihtc2cpKTsKICAgICAgICAgICAgfSBjYXRjaCAoVW5zdXBwb3J0\nZWRFbmNvZGluZ0V4Y2VwdGlvbiB1ZWUpIHsKICAgICAgICAgICAgICAgIFN0\ncmluZ0J1aWxkZXIgc2IgPSBuZXcgU3RyaW5nQnVpbGRlcigpOwogICAgICAg\nICAgICAgICAgc2IuYXBwZW5kKCJMZWRnZXIgcmFuZ2VzIGZvciB0b3BpYyAi\nKS5hcHBlbmQodG9waWMudG9TdHJpbmdVdGY4KCkpLmFwcGVuZCgiIGlzIG5v\ndCBVVEYtOCBlbmNvZGVkLiIpOwogICAgICAgICAgICAgICAgU3RyaW5nIG1z\nZyA9IHNiLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICBsb2dnZXIuZXJy\nb3IobXNnLCB1ZWUpOwogICAgICAgICAgICAgICAgY2FsbGJhY2sub3BlcmF0\naW9uRmFpbGVkKGN0eCwgbmV3IFB1YlN1YkV4Y2VwdGlvbi5VbmV4cGVjdGVk\nQ29uZGl0aW9uRXhjZXB0aW9uKG1zZykpOwogICAgICAgICAgICB9CiAgICAg\nICAgfQoKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgdm9pZCB3\ncml0ZVRvcGljUGVyc2lzdGVuY2VJbmZvKGZpbmFsIEJ5dGVTdHJpbmcgdG9w\naWMsIExlZGdlclJhbmdlcyByYW5nZXMsIGZpbmFsIFZlcnNpb24gdmVyc2lv\nbiwKICAgICAgICAgICAgICAgIGZpbmFsIENhbGxiYWNrPFZlcnNpb24+IGNh\nbGxiYWNrLCBPYmplY3QgY3R4KSB7CiAgICAgICAgICAgIFZhbHVlIHZhbHVl\nID0gbmV3IFZhbHVlKCk7CiAgICAgICAgICAgIHZhbHVlLnNldEZpZWxkKFBF\nUlNJU1RfRklFTEQsIFRleHRGb3JtYXQucHJpbnRUb1N0cmluZyhyYW5nZXMp\nLmdldEJ5dGVzKFVURl84KSk7CgogICAgICAgICAgICBwZXJzaXN0VGFibGUu\ncHV0KHRvcGljLnRvU3RyaW5nVXRmOCgpLCB2YWx1ZSwgdmVyc2lvbiwgbmV3\nIE1ldGFzdG9yZUNhbGxiYWNrPFZlcnNpb24+KCkgewogICAgICAgICAgICAg\nICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBjb21w\nbGV0ZShpbnQgcmMsIFZlcnNpb24gdmVyLCBPYmplY3QgY3R4KSB7CiAgICAg\nICAgICAgICAgICAgICAgaWYgKE1TRXhjZXB0aW9uLkNvZGUuT0suZ2V0Q29k\nZSgpID09IHJjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNr\nLm9wZXJhdGlvbkZpbmlzaGVkKGN0eCwgdmVyKTsKICAgICAgICAgICAgICAg\nICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBp\nZiAoTVNFeGNlcHRpb24uQ29kZS5Ob0tleS5nZXRDb2RlKCkgPT0gcmMpIHsK\nICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm8gbm9kZQogICAgICAgICAg\nICAgICAgICAgICAgICBjYWxsYmFjay5vcGVyYXRpb25GYWlsZWQoY3R4LCBQ\ndWJTdWJFeGNlcHRpb24uY3JlYXRlKFN0YXR1c0NvZGUuTk9fVE9QSUNfUEVS\nU0lTVEVOQ0VfSU5GTywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAiTm8gcGVyc2lzdGVuY2UgaW5mbyBmb3VuZCBmb3IgdG9waWMgIiArIHRv\ncGljLnRvU3RyaW5nVXRmOCgpKSk7CiAgICAgICAgICAgICAgICAgICAgICAg\nIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKE1TRXhj\nZXB0aW9uLkNvZGUuS2V5RXhpc3RzLmdldENvZGUoKSA9PSByYykgewogICAg\nICAgICAgICAgICAgICAgICAgICAvLyBrZXkgZXhpc3RzCiAgICAgICAgICAg\nICAgICAgICAgICAgIGNhbGxiYWNrLm9wZXJhdGlvbkZhaWxlZChjdHgsIFB1\nYlN1YkV4Y2VwdGlvbi5jcmVhdGUoU3RhdHVzQ29kZS5UT1BJQ19QRVJTSVNU\nRU5DRV9JTkZPX0VYSVNUUywKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAiUGVyc2lzdGVuY2UgaW5mbyBvZiB0b3BpYyAiICsgdG9waWMudG9T\ndHJpbmdVdGY4KCkgKyAiIGV4aXN0ZWQuIikpOwogICAgICAgICAgICAgICAg\nICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlm\nIChNU0V4Y2VwdGlvbi5Db2RlLkJhZFZlcnNpb24uZ2V0Q29kZSgpID09IHJj\nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhZCB2ZXJzaW9uCiAg\nICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLm9wZXJhdGlvbkZhaWxl\nZChjdHgsIFB1YlN1YkV4Y2VwdGlvbi5jcmVhdGUoU3RhdHVzQ29kZS5CQURf\nVkVSU0lPTiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQmFk\nIHZlcnNpb24gcHJvdmlkZWQgdG8gdXBkYXRlIHBlcnNpc3RlbmNlIGluZm8g\nb2YgdG9waWMgIiArIHRvcGljLnRvU3RyaW5nVXRmOCgpKSk7CiAgICAgICAg\nICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9\nIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBsb2dFcnJvckFuZEZp\nbmlzaE9wZXJhdGlvbigiQ291bGQgbm90IHdyaXRlIGxlZGdlcnMgbm9kZSBm\nb3IgdG9waWMgIiArIHRvcGljLnRvU3RyaW5nVXRmOCgpLAogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLCBjdHgsIHJjKTsKICAg\nICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAg\nICAgIH0sIGN0eCk7CiAgICAgICAgfQoKICAgICAgICBAT3ZlcnJpZGUKICAg\nICAgICBwdWJsaWMgdm9pZCBkZWxldGVUb3BpY1BlcnNpc3RlbmNlSW5mbyhm\naW5hbCBCeXRlU3RyaW5nIHRvcGljLCBmaW5hbCBWZXJzaW9uIHZlcnNpb24s\nCiAgICAgICAgICAgICAgICBmaW5hbCBDYWxsYmFjazxWb2lkPiBjYWxsYmFj\naywgT2JqZWN0IGN0eCkgewogICAgICAgICAgICBwZXJzaXN0VGFibGUucmVt\nb3ZlKHRvcGljLnRvU3RyaW5nVXRmOCgpLCB2ZXJzaW9uLCBuZXcgTWV0YXN0\nb3JlQ2FsbGJhY2s8Vm9pZD4oKSB7CiAgICAgICAgICAgICAgICBAT3ZlcnJp\nZGUKICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIGNvbXBsZXRlKGludCBy\nYywgVm9pZCB2YWx1ZSwgT2JqZWN0IGN0eCkgewogICAgICAgICAgICAgICAg\nICAgIGlmIChNU0V4Y2VwdGlvbi5Db2RlLk9LLmdldENvZGUoKSA9PSByYykg\newogICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoIlN1Y2Nl\nc3NmdWxseSBkZWxldGVkIHBlcnNpc3RlbmNlIGluZm8gZm9yIHRvcGljIHt9\nLiIsIHRvcGljLnRvU3RyaW5nVXRmOCgpKTsKICAgICAgICAgICAgICAgICAg\nICAgICAgY2FsbGJhY2sub3BlcmF0aW9uRmluaXNoZWQoY3R4LCBudWxsKTsK\nICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAg\nICAgICAgIH0gZWxzZSBpZiAoTVNFeGNlcHRpb24uQ29kZS5Ob0tleS5nZXRD\nb2RlKCkgPT0gcmMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm8g\nbm9kZQogICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5vcGVyYXRp\nb25GYWlsZWQoY3R4LCBQdWJTdWJFeGNlcHRpb24uY3JlYXRlKFN0YXR1c0Nv\nZGUuTk9fVE9QSUNfUEVSU0lTVEVOQ0VfSU5GTywKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAiTm8gcGVyc2lzdGVuY2UgaW5mbyBmb3VuZCBm\nb3IgdG9waWMgIiArIHRvcGljLnRvU3RyaW5nVXRmOCgpKSk7CiAgICAgICAg\nICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9\nIGVsc2UgaWYgKE1TRXhjZXB0aW9uLkNvZGUuQmFkVmVyc2lvbi5nZXRDb2Rl\nKCkgPT0gcmMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmFkIHZl\ncnNpb24KICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sub3BlcmF0\naW9uRmFpbGVkKGN0eCwgUHViU3ViRXhjZXB0aW9uLmNyZWF0ZShTdGF0dXND\nb2RlLkJBRF9WRVJTSU9OLAogICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICJCYWQgdmVyc2lvbiBwcm92aWRlZCB0byBkZWxldGUgcGVyc2lzdGVu\nY2UgaW5mbyBvZiB0b3BpYyAiICsgdG9waWMudG9TdHJpbmdVdGY4KCkpKTsK\nICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAg\nICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ0Vy\ncm9yQW5kRmluaXNoT3BlcmF0aW9uKCJGYWlsZWQgdG8gZGVsZXRlIHBlcnNp\nc3RlbmNlIGluZm8gdG9waWM6ICIgKyB0b3BpYy50b1N0cmluZ1V0ZjgoKQog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgIiwgdmVyc2lvbjog\nIiArIHZlcnNpb24sIGNhbGxiYWNrLCBjdHgsIHJjLCBTdGF0dXNDb2RlLlNF\nUlZJQ0VfRE9XTik7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsK\nICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAg\nICAgICAgIH0sIGN0eCk7CiAgICAgICAgfQogICAgfQoKICAgIEBPdmVycmlk\nZQogICAgcHVibGljIFN1YnNjcmlwdGlvbkRhdGFNYW5hZ2VyIG5ld1N1YnNj\ncmlwdGlvbkRhdGFNYW5hZ2VyKCkgewogICAgICAgIHJldHVybiBuZXcgTXNT\ndWJzY3JpcHRpb25EYXRhTWFuYWdlckltcGwoY2ZnLCBzdWJUYWJsZSk7CiAg\nICB9CgogICAgc3RhdGljIGNsYXNzIE1zU3Vic2NyaXB0aW9uRGF0YU1hbmFn\nZXJJbXBsIGltcGxlbWVudHMgU3Vic2NyaXB0aW9uRGF0YU1hbmFnZXIgewoK\nICAgICAgICBzdGF0aWMgZmluYWwgU3RyaW5nIFNVQl9TVEFURV9GSUVMRCA9\nICJzdWJfc3RhdGUiOwogICAgICAgIHN0YXRpYyBmaW5hbCBTdHJpbmcgU1VC\nX1BSRUZTX0ZJRUxEID0gInN1Yl9wcmVmZXJlbmNlcyI7CgogICAgICAgIHN0\nYXRpYyBmaW5hbCBjaGFyIFRPUElDX1NVQl9GSVJTVF9TRVBBUkFUT1IgPSAn\nXDAwMSc7CiAgICAgICAgc3RhdGljIGZpbmFsIGNoYXIgVE9QSUNfU1VCX0xB\nU1RfU0VQQVJBVE9SID0gJ1wwMDInOwoKICAgICAgICBmaW5hbCBTZXJ2ZXJD\nb25maWd1cmF0aW9uIGNmZzsKICAgICAgICBmaW5hbCBNZXRhc3RvcmVTY2Fu\nbmFibGVUYWJsZSBzdWJUYWJsZTsKCiAgICAgICAgTXNTdWJzY3JpcHRpb25E\nYXRhTWFuYWdlckltcGwoU2VydmVyQ29uZmlndXJhdGlvbiBjZmcsIE1ldGFz\ndG9yZVNjYW5uYWJsZVRhYmxlIHN1YlRhYmxlKSB7CiAgICAgICAgICAgIHRo\naXMuY2ZnID0gY2ZnOwogICAgICAgICAgICB0aGlzLnN1YlRhYmxlID0gc3Vi\nVGFibGU7CiAgICAgICAgfQoKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBw\ndWJsaWMgdm9pZCBjbG9zZSgpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAg\nICAgICAgIC8vIGRvIG5vdGhpbmcKICAgICAgICB9CgogICAgICAgIHByaXZh\ndGUgU3RyaW5nIGdldFN1YnNjcmlwdGlvbktleShCeXRlU3RyaW5nIHRvcGlj\nLCBCeXRlU3RyaW5nIHN1YnNjcmliZXJJZCkgewogICAgICAgICAgICByZXR1\ncm4gbmV3IFN0cmluZ0J1aWxkZXIodG9waWMudG9TdHJpbmdVdGY4KCkpLmFw\ncGVuZChUT1BJQ19TVUJfRklSU1RfU0VQQVJBVE9SKQogICAgICAgICAgICAg\nICAgICAgIC5hcHBlbmQoc3Vic2NyaWJlcklkLnRvU3RyaW5nVXRmOCgpKS50\nb1N0cmluZygpOwogICAgICAgIH0KCiAgICAgICAgcHJpdmF0ZSBWYWx1ZSBz\ndWJzY3JpcHRpb25EYXRhMlZhbHVlKFN1YnNjcmlwdGlvbkRhdGEgc3ViRGF0\nYSkgewogICAgICAgICAgICBWYWx1ZSB2YWx1ZSA9IG5ldyBWYWx1ZSgpOwog\nICAgICAgICAgICBpZiAoc3ViRGF0YS5oYXNTdGF0ZSgpKSB7CiAgICAgICAg\nICAgICAgICB2YWx1ZS5zZXRGaWVsZChTVUJfU1RBVEVfRklFTEQsIFRleHRG\nb3JtYXQucHJpbnRUb1N0cmluZyhzdWJEYXRhLmdldFN0YXRlKCkpLmdldEJ5\ndGVzKFVURl84KSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHN1\nYkRhdGEuaGFzUHJlZmVyZW5jZXMoKSkgewogICAgICAgICAgICAgICAgdmFs\ndWUuc2V0RmllbGQoU1VCX1BSRUZTX0ZJRUxELCBUZXh0Rm9ybWF0LnByaW50\nVG9TdHJpbmcoc3ViRGF0YS5nZXRQcmVmZXJlbmNlcygpKS5nZXRCeXRlcyhV\nVEZfOCkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB2YWx1\nZTsKICAgICAgICB9CgogICAgICAgIEBPdmVycmlkZQogICAgICAgIHB1Ymxp\nYyB2b2lkIGNyZWF0ZVN1YnNjcmlwdGlvbkRhdGEoZmluYWwgQnl0ZVN0cmlu\nZyB0b3BpYywgZmluYWwgQnl0ZVN0cmluZyBzdWJzY3JpYmVySWQsCiAgICAg\nICAgICAgICAgICBmaW5hbCBTdWJzY3JpcHRpb25EYXRhIHN1YkRhdGEsIGZp\nbmFsIENhbGxiYWNrPFZlcnNpb24+IGNhbGxiYWNrLCBPYmplY3QgY3R4KSB7\nCiAgICAgICAgICAgIFN0cmluZyBrZXkgPSBnZXRTdWJzY3JpcHRpb25LZXko\ndG9waWMsIHN1YnNjcmliZXJJZCk7CiAgICAgICAgICAgIFZhbHVlIHZhbHVl\nID0gc3Vic2NyaXB0aW9uRGF0YTJWYWx1ZShzdWJEYXRhKTsKCiAgICAgICAg\nICAgIHN1YlRhYmxlLnB1dChrZXksIHZhbHVlLCBWZXJzaW9uLk5FVywgbmV3\nIE1ldGFzdG9yZUNhbGxiYWNrPFZlcnNpb24+KCkgewogICAgICAgICAgICAg\nICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBjb21w\nbGV0ZShpbnQgcmMsIFZlcnNpb24gdmVyLCBPYmplY3QgY3R4KSB7CiAgICAg\nICAgICAgICAgICAgICAgaWYgKHJjID09IE1TRXhjZXB0aW9uLkNvZGUuT0su\nZ2V0Q29kZSgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsb2dn\nZXIuaXNEZWJ1Z0VuYWJsZWQoKSkgewogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgbG9nZ2VyLmRlYnVnKCJTdWNjZXNzZnVsbHkgY3JlYXRlIHN1YnNj\ncmlwdGlvbiBmb3IgdG9waWM6ICIgKyB0b3BpYy50b1N0cmluZ1V0ZjgoKQog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArICIsIHN1YnNj\ncmliZXJJZDogIiArIHN1YnNjcmliZXJJZC50b1N0cmluZ1V0ZjgoKSArICIs\nIGRhdGE6ICIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nKyBTdWJzY3JpcHRpb25TdGF0ZVV0aWxzLnRvU3RyaW5nKHN1YkRhdGEpKTsK\nICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAg\nICAgICBjYWxsYmFjay5vcGVyYXRpb25GaW5pc2hlZChjdHgsIHZlcik7CiAg\nICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyYyA9PSBNU0V4Y2VwdGlv\nbi5Db2RlLktleUV4aXN0cy5nZXRDb2RlKCkpIHsKICAgICAgICAgICAgICAg\nICAgICAgICAgY2FsbGJhY2sub3BlcmF0aW9uRmFpbGVkKGN0eCwgUHViU3Vi\nRXhjZXB0aW9uLmNyZWF0ZSgKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICBTdGF0dXNDb2RlLlNVQlNDUklQVElPTl9TVEFURV9FWElTVFMsCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlN1YnNjcmlwdGlvbiBk\nYXRhIGZvciAodG9waWM6IiArIHRvcGljLnRvU3RyaW5nVXRmOCgpICsgIiwg\nc3Vic2NyaWJlcjoiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICArIHN1YnNjcmliZXJJZC50b1N0cmluZ1V0ZjgoKSArICIpIGV4\naXN0ZWQuIikpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAg\nICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAg\nICAgICAgbG9nRXJyb3JBbmRGaW5pc2hPcGVyYXRpb24oIkZhaWxlZCB0byBj\ncmVhdGUgdG9waWM6ICIgKyB0b3BpYy50b1N0cmluZ1V0ZjgoKQogICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICsgIiwgc3Vic2NyaWJlcklkOiAi\nICsgc3Vic2NyaWJlcklkLnRvU3RyaW5nVXRmOCgpICsgIiwgZGF0YTogIgog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgU3Vic2NyaXB0aW9u\nU3RhdGVVdGlscy50b1N0cmluZyhzdWJEYXRhKSwgY2FsbGJhY2ssIGN0eCwg\ncmMpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0K\nICAgICAgICAgICAgfSwgY3R4KTsKICAgICAgICB9CgogICAgICAgIEBPdmVy\ncmlkZQogICAgICAgIHB1YmxpYyBib29sZWFuIGlzUGFydGlhbFVwZGF0ZVN1\ncHBvcnRlZCgpIHsKICAgICAgICAgICAgLy8gVE9ETzogSGVyZSB3ZSBhc3N1\nbWUgTWV0YXN0b3JlIHN1cHBvcnQgcGFydGlhbCB1cGRhdGUsIGJ1dCB0aGlz\nCiAgICAgICAgICAgIC8vIG1heWJlIGluY29ycmVjdC4KICAgICAgICAgICAg\ncmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICBAT3ZlcnJpZGUKICAg\nICAgICBwdWJsaWMgdm9pZCByZXBsYWNlU3Vic2NyaXB0aW9uRGF0YShmaW5h\nbCBCeXRlU3RyaW5nIHRvcGljLCBmaW5hbCBCeXRlU3RyaW5nIHN1YnNjcmli\nZXJJZCwKICAgICAgICAgICAgICAgIGZpbmFsIFN1YnNjcmlwdGlvbkRhdGEg\nc3ViRGF0YSwgZmluYWwgVmVyc2lvbiB2ZXJzaW9uLCBmaW5hbCBDYWxsYmFj\nazxWZXJzaW9uPiBjYWxsYmFjaywKICAgICAgICAgICAgICAgIGZpbmFsIE9i\namVjdCBjdHgpIHsKICAgICAgICAgICAgdXBkYXRlU3Vic2NyaXB0aW9uRGF0\nYSh0b3BpYywgc3Vic2NyaWJlcklkLCBzdWJEYXRhLCB2ZXJzaW9uLCBjYWxs\nYmFjaywgY3R4KTsKICAgICAgICB9CgogICAgICAgIEBPdmVycmlkZQogICAg\nICAgIHB1YmxpYyB2b2lkIHVwZGF0ZVN1YnNjcmlwdGlvbkRhdGEoZmluYWwg\nQnl0ZVN0cmluZyB0b3BpYywgZmluYWwgQnl0ZVN0cmluZyBzdWJzY3JpYmVy\nSWQsCiAgICAgICAgICAgICAgICBmaW5hbCBTdWJzY3JpcHRpb25EYXRhIHN1\nYkRhdGEsIGZpbmFsIFZlcnNpb24gdmVyc2lvbiwgZmluYWwgQ2FsbGJhY2s8\nVmVyc2lvbj4gY2FsbGJhY2ssCiAgICAgICAgICAgICAgICBmaW5hbCBPYmpl\nY3QgY3R4KSB7CiAgICAgICAgICAgIFN0cmluZyBrZXkgPSBnZXRTdWJzY3Jp\ncHRpb25LZXkodG9waWMsIHN1YnNjcmliZXJJZCk7CiAgICAgICAgICAgIFZh\nbHVlIHZhbHVlID0gc3Vic2NyaXB0aW9uRGF0YTJWYWx1ZShzdWJEYXRhKTsK\nCiAgICAgICAgICAgIHN1YlRhYmxlLnB1dChrZXksIHZhbHVlLCB2ZXJzaW9u\nLCBuZXcgTWV0YXN0b3JlQ2FsbGJhY2s8VmVyc2lvbj4oKSB7CiAgICAgICAg\nICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lk\nIGNvbXBsZXRlKGludCByYywgVmVyc2lvbiB2ZXJzaW9uLCBPYmplY3QgY3R4\nKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJjID09IE1TRXhjZXB0aW9u\nLkNvZGUuT0suZ2V0Q29kZSgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAg\nIGlmIChsb2dnZXIuaXNEZWJ1Z0VuYWJsZWQoKSkgewogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCJTdWNjZXNzZnVsbHkgdXBk\nYXRlZCBzdWJzY3JpcHRpb24gZGF0YSBmb3IgdG9waWM6ICIgKyB0b3BpYy50\nb1N0cmluZ1V0ZjgoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICArICIsIHN1YnNjcmliZXJJZDogIiArIHN1YnNjcmliZXJJZC50b1N0\ncmluZ1V0ZjgoKSArICIsIGRhdGE6ICIKICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgKyBTdWJzY3JpcHRpb25TdGF0ZVV0aWxzLnRvU3Ry\naW5nKHN1YkRhdGEpICsgIiwgdmVyc2lvbjogIiArIHZlcnNpb24pOwogICAg\nICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAg\nIGNhbGxiYWNrLm9wZXJhdGlvbkZpbmlzaGVkKGN0eCwgdmVyc2lvbik7CiAg\nICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyYyA9PSBNU0V4Y2VwdGlv\nbi5Db2RlLk5vS2V5LmdldENvZGUoKSkgewogICAgICAgICAgICAgICAgICAg\nICAgICAvLyBubyBub2RlCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxi\nYWNrLm9wZXJhdGlvbkZhaWxlZChjdHgsIFB1YlN1YkV4Y2VwdGlvbi5jcmVh\ndGUoU3RhdHVzQ29kZS5OT19TVUJTQ1JJUFRJT05fU1RBVEUsCiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgIk5vIHN1YnNjcmlwdGlvbiBkYXRh\nIGZvdW5kIGZvciAodG9waWM6IiArIHRvcGljLnRvU3RyaW5nVXRmOCgpICsg\nIiwgc3Vic2NyaWJlcjoiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICArIHN1YnNjcmliZXJJZC50b1N0cmluZ1V0ZjgoKSArICIp\nLiIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAg\nICAgICAgICAgICAgIH0gZWxzZSBpZiAocmMgPT0gTVNFeGNlcHRpb24uQ29k\nZS5CYWRWZXJzaW9uLmdldENvZGUoKSkgewogICAgICAgICAgICAgICAgICAg\nICAgICAvLyBiYWQgdmVyc2lvbgogICAgICAgICAgICAgICAgICAgICAgICBj\nYWxsYmFjay5vcGVyYXRpb25GYWlsZWQoY3R4LCBQdWJTdWJFeGNlcHRpb24u\nY3JlYXRlKFN0YXR1c0NvZGUuQkFEX1ZFUlNJT04sCiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIkJhZCB2ZXJzaW9uIHByb3ZpZGVkIHRvIHVw\nZGF0ZSBzdWJzY3JpcHRpb24gZGF0YSBvZiB0b3BpYyAiICsgdG9waWMudG9T\ndHJpbmdVdGY4KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICsgIiBzdWJzY3JpYmVySWQgIiArIHN1YnNjcmliZXJJZCkpOwog\nICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAg\nICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nRXJy\nb3JBbmRGaW5pc2hPcGVyYXRpb24oCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgIkZhaWxlZCB0byB1cGRhdGUgc3Vic2NyaXB0aW9uIGRhdGEg\nZm9yIHRvcGljOiAiICsgdG9waWMudG9TdHJpbmdVdGY4KCkKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgIiwgc3Vic2NyaWJl\ncklkOiAiICsgc3Vic2NyaWJlcklkLnRvU3RyaW5nVXRmOCgpICsgIiwgZGF0\nYTogIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nKyBTdWJzY3JpcHRpb25TdGF0ZVV0aWxzLnRvU3RyaW5nKHN1YkRhdGEpICsg\nIiwgdmVyc2lvbjogIiArIHZlcnNpb24sIGNhbGxiYWNrLAogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIGN0eCwgcmMpOwogICAgICAgICAgICAg\nICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgY3R4\nKTsKICAgICAgICB9CgogICAgICAgIEBPdmVycmlkZQogICAgICAgIHB1Ymxp\nYyB2b2lkIGRlbGV0ZVN1YnNjcmlwdGlvbkRhdGEoZmluYWwgQnl0ZVN0cmlu\nZyB0b3BpYywgZmluYWwgQnl0ZVN0cmluZyBzdWJzY3JpYmVySWQsIFZlcnNp\nb24gdmVyc2lvbiwKICAgICAgICAgICAgICAgIGZpbmFsIENhbGxiYWNrPFZv\naWQ+IGNhbGxiYWNrLCBPYmplY3QgY3R4KSB7CiAgICAgICAgICAgIFN0cmlu\nZyBrZXkgPSBnZXRTdWJzY3JpcHRpb25LZXkodG9waWMsIHN1YnNjcmliZXJJ\nZCk7CiAgICAgICAgICAgIHN1YlRhYmxlLnJlbW92ZShrZXksIHZlcnNpb24s\nIG5ldyBNZXRhc3RvcmVDYWxsYmFjazxWb2lkPigpIHsKICAgICAgICAgICAg\nICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgcHVibGljIHZvaWQgY29t\ncGxldGUoaW50IHJjLCBWb2lkIHZhbHVlLCBPYmplY3QgY3R4KSB7CiAgICAg\nICAgICAgICAgICAgICAgaWYgKHJjID09IE1TRXhjZXB0aW9uLkNvZGUuT0su\nZ2V0Q29kZSgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5k\nZWJ1ZygiU3VjY2Vzc2Z1bGx5IGRlbGV0ZSBzdWJzY3JpcHRpb24gZm9yIHRv\ncGljOiB7fSwgc3Vic2NyaWJlcklkOiB7fS4iLAogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIHRvcGljLnRvU3RyaW5nVXRmOCgpLCBzdWJzY3Jp\nYmVySWQudG9TdHJpbmdVdGY4KCkpOwogICAgICAgICAgICAgICAgICAgICAg\nICBjYWxsYmFjay5vcGVyYXRpb25GaW5pc2hlZChjdHgsIG51bGwpOwogICAg\nICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAg\nICAgfSBlbHNlIGlmIChyYyA9PSBNU0V4Y2VwdGlvbi5Db2RlLkJhZFZlcnNp\nb24uZ2V0Q29kZSgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJh\nZCB2ZXJzaW9uCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLm9w\nZXJhdGlvbkZhaWxlZChjdHgsIFB1YlN1YkV4Y2VwdGlvbi5jcmVhdGUoU3Rh\ndHVzQ29kZS5CQURfVkVSU0lPTiwKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAiQmFkIHZlcnNpb24gcHJvdmlkZWQgdG8gZGVsZXRlIHN1YnNj\ncmlwdG9pbiBkYXRhIG9mIHRvcGljICIgKyB0b3BpYy50b1N0cmluZ1V0Zjgo\nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAi\nIHN1YnNjcmliZXJJZCAiICsgc3Vic2NyaWJlcklkKSk7CiAgICAgICAgICAg\nICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9IGVs\nc2UgaWYgKHJjID09IE1TRXhjZXB0aW9uLkNvZGUuTm9LZXkuZ2V0Q29kZSgp\nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vIG5vZGUKICAgICAg\nICAgICAgICAgICAgICAgICAgY2FsbGJhY2sub3BlcmF0aW9uRmFpbGVkKGN0\neCwgUHViU3ViRXhjZXB0aW9uLmNyZWF0ZShTdGF0dXNDb2RlLk5PX1NVQlND\nUklQVElPTl9TVEFURSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAiTm8gc3Vic2NyaXB0aW9uIGRhdGEgZm91bmQgZm9yICh0b3BpYzoiICsg\ndG9waWMudG9TdHJpbmdVdGY4KCkgKyAiLCBzdWJzY3JpYmVyOiIKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgc3Vic2NyaWJl\ncklkLnRvU3RyaW5nVXRmOCgpICsgIikuIikpOwogICAgICAgICAgICAgICAg\nICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsK\nICAgICAgICAgICAgICAgICAgICAgICAgbG9nRXJyb3JBbmRGaW5pc2hPcGVy\nYXRpb24oIkZhaWxlZCB0byBkZWxldGUgc3Vic2NyaXB0aW9uIHRvcGljOiAi\nICsgdG9waWMudG9TdHJpbmdVdGY4KCkKICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICArICIsIHN1YnNjcmliZXJJZDogIiArIHN1YnNjcmliZXJJ\nZC50b1N0cmluZ1V0ZjgoKSwgY2FsbGJhY2ssIGN0eCwgcmMsCiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgU3RhdHVzQ29kZS5TRVJWSUNFX0RP\nV04pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0K\nICAgICAgICAgICAgfSwgY3R4KTsKICAgICAgICB9CgogICAgICAgIHByaXZh\ndGUgU3Vic2NyaXB0aW9uRGF0YSB2YWx1ZTJTdWJzY3JpcHRpb25EYXRhKFZh\nbHVlIHZhbHVlKSB0aHJvd3MgUGFyc2VFeGNlcHRpb24sCiAgICAgICAgICAg\nICAgICBVbnN1cHBvcnRlZEVuY29kaW5nRXhjZXB0aW9uIHsKICAgICAgICAg\nICAgU3Vic2NyaXB0aW9uRGF0YS5CdWlsZGVyIGJ1aWxkZXIgPSBTdWJzY3Jp\ncHRpb25EYXRhLm5ld0J1aWxkZXIoKTsKCiAgICAgICAgICAgIGJ5dGVbXSBz\ndGF0ZURhdGEgPSB2YWx1ZS5nZXRGaWVsZChTVUJfU1RBVEVfRklFTEQpOwog\nICAgICAgICAgICBpZiAobnVsbCAhPSBzdGF0ZURhdGEpIHsKICAgICAgICAg\nICAgICAgIFN1YnNjcmlwdGlvblN0YXRlLkJ1aWxkZXIgc3RhdGVCdWlsZGVy\nID0gU3Vic2NyaXB0aW9uU3RhdGUubmV3QnVpbGRlcigpOwogICAgICAgICAg\nICAgICAgVGV4dEZvcm1hdC5tZXJnZShuZXcgU3RyaW5nKHN0YXRlRGF0YSwg\nVVRGOCksIHN0YXRlQnVpbGRlcik7CiAgICAgICAgICAgICAgICBTdWJzY3Jp\ncHRpb25TdGF0ZSBzdGF0ZSA9IHN0YXRlQnVpbGRlci5idWlsZCgpOwogICAg\nICAgICAgICAgICAgYnVpbGRlci5zZXRTdGF0ZShzdGF0ZSk7CiAgICAgICAg\nICAgIH0KCiAgICAgICAgICAgIGJ5dGVbXSBwcmVmc0RhdGEgPSB2YWx1ZS5n\nZXRGaWVsZChTVUJfUFJFRlNfRklFTEQpOwogICAgICAgICAgICBpZiAobnVs\nbCAhPSBwcmVmc0RhdGEpIHsKICAgICAgICAgICAgICAgIFN1YnNjcmlwdGlv\nblByZWZlcmVuY2VzLkJ1aWxkZXIgcHJlZmVyZW5jZXNCdWlsZGVyID0gU3Vi\nc2NyaXB0aW9uUHJlZmVyZW5jZXMubmV3QnVpbGRlcigpOwogICAgICAgICAg\nICAgICAgVGV4dEZvcm1hdC5tZXJnZShuZXcgU3RyaW5nKHByZWZzRGF0YSwg\nVVRGOCksIHByZWZlcmVuY2VzQnVpbGRlcik7CiAgICAgICAgICAgICAgICBT\ndWJzY3JpcHRpb25QcmVmZXJlbmNlcyBwcmVmZXJlbmNlcyA9IHByZWZlcmVu\nY2VzQnVpbGRlci5idWlsZCgpOwogICAgICAgICAgICAgICAgYnVpbGRlci5z\nZXRQcmVmZXJlbmNlcyhwcmVmZXJlbmNlcyk7CiAgICAgICAgICAgIH0KCiAg\nICAgICAgICAgIHJldHVybiBidWlsZGVyLmJ1aWxkKCk7CiAgICAgICAgfQoK\nICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgdm9pZCByZWFkU3Vi\nc2NyaXB0aW9uRGF0YShmaW5hbCBCeXRlU3RyaW5nIHRvcGljLCBmaW5hbCBC\neXRlU3RyaW5nIHN1YnNjcmliZXJJZCwKICAgICAgICAgICAgICAgIGZpbmFs\nIENhbGxiYWNrPFZlcnNpb25lZDxTdWJzY3JpcHRpb25EYXRhPj4gY2FsbGJh\nY2ssIE9iamVjdCBjdHgpIHsKICAgICAgICAgICAgU3RyaW5nIGtleSA9IGdl\ndFN1YnNjcmlwdGlvbktleSh0b3BpYywgc3Vic2NyaWJlcklkKTsKICAgICAg\nICAgICAgc3ViVGFibGUuZ2V0KGtleSwgbmV3IE1ldGFzdG9yZUNhbGxiYWNr\nPFZlcnNpb25lZDxWYWx1ZT4+KCkgewogICAgICAgICAgICAgICAgQE92ZXJy\naWRlCiAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBjb21wbGV0ZShpbnQg\ncmMsIFZlcnNpb25lZDxWYWx1ZT4gdmFsdWUsIE9iamVjdCBjdHgpIHsKICAg\nICAgICAgICAgICAgICAgICBpZiAocmMgPT0gTVNFeGNlcHRpb24uQ29kZS5O\nb0tleS5nZXRDb2RlKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2Fs\nbGJhY2sub3BlcmF0aW9uRmluaXNoZWQoY3R4LCBudWxsKTsKICAgICAgICAg\nICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0K\nCiAgICAgICAgICAgICAgICAgICAgaWYgKHJjICE9IE1TRXhjZXB0aW9uLkNv\nZGUuT0suZ2V0Q29kZSgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxv\nZ0Vycm9yQW5kRmluaXNoT3BlcmF0aW9uKAogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICJDb3VsZCBub3QgcmVhZCBzdWJzY3JpcHRpb24gZGF0\nYSBmb3IgdG9waWM6ICIgKyB0b3BpYy50b1N0cmluZ1V0ZjgoKQogICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAiLCBzdWJzY3Jp\nYmVySWQ6ICIgKyBzdWJzY3JpYmVySWQudG9TdHJpbmdVdGY4KCksIGNhbGxi\nYWNrLCBjdHgsIHJjKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJu\nOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgVmVyc2lvbmVkPFN1YnNj\ncmlwdGlvbkRhdGE+IHN1YkRhdGEgPSBuZXcgVmVyc2lvbmVkPFN1YnNjcmlw\ndGlvbkRhdGE+KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZh\nbHVlMlN1YnNjcmlwdGlvbkRhdGEodmFsdWUuZ2V0VmFsdWUoKSksIHZhbHVl\nLmdldFZlcnNpb24oKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChs\nb2dnZXIuaXNEZWJ1Z0VuYWJsZWQoKSkgewogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgbG9nZ2VyLmRlYnVnKCJGb3VuZCBzdWJzY3JpcHRpb24gd2hp\nbGUgYWNxdWlyaW5nIHRvcGljOiAiICsgdG9waWMudG9TdHJpbmdVdGY4KCkK\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAiLCBzdWJz\nY3JpYmVySWQ6ICIgKyBzdWJzY3JpYmVySWQudG9TdHJpbmdVdGY4KCkgKyAi\nLCBkYXRhOiAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICsgU3Vic2NyaXB0aW9uU3RhdGVVdGlscy50b1N0cmluZyhzdWJEYXRhLmdl\ndFZhbHVlKCkpICsgIiwgdmVyc2lvbjogIgogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICArIHN1YkRhdGEuZ2V0VmVyc2lvbigpKTsKICAg\nICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAg\nICBjYWxsYmFjay5vcGVyYXRpb25GaW5pc2hlZChjdHgsIHN1YkRhdGEpOwog\nICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKFBhcnNlRXhjZXB0aW9uIGUp\nIHsKICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nQnVpbGRlciBzYiA9\nIG5ldyBTdHJpbmdCdWlsZGVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAg\nIHNiLmFwcGVuZCgiRmFpbGVkIHRvIGRlc2VyaWFsaXplIHN1YnNjcmlwdGlv\nbiBkYXRhIGZvciB0b3BpYzoiKS5hcHBlbmQodG9waWMudG9TdHJpbmdVdGY4\nKCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgi\nLCBzdWJzY3JpYmVySWQ6ICIpLmFwcGVuZChzdWJzY3JpYmVySWQudG9TdHJp\nbmdVdGY4KCkpOwogICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgbXNn\nID0gc2IudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9n\nZ2VyLmVycm9yKG1zZywgZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNh\nbGxiYWNrLm9wZXJhdGlvbkZhaWxlZChjdHgsIG5ldyBQdWJTdWJFeGNlcHRp\nb24uVW5leHBlY3RlZENvbmRpdGlvbkV4Y2VwdGlvbihtc2cpKTsKICAgICAg\nICAgICAgICAgICAgICB9IGNhdGNoIChVbnN1cHBvcnRlZEVuY29kaW5nRXhj\nZXB0aW9uIHVlZSkgewogICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmdC\ndWlsZGVyIHNiID0gbmV3IFN0cmluZ0J1aWxkZXIoKTsKICAgICAgICAgICAg\nICAgICAgICAgICAgc2IuYXBwZW5kKCJTdWJzY3JpcHRpb24gZGF0YSBmb3Ig\ndG9waWM6ICIpLmFwcGVuZCh0b3BpYy50b1N0cmluZ1V0ZjgoKSkKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCIsIHN1YnNjcmli\nZXJJZDogIikuYXBwZW5kKHN1YnNjcmliZXJJZC50b1N0cmluZ1V0ZjgoKSkK\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCIgaXMg\nbm90IFVGVC04IGVuY29kZWQiKTsKICAgICAgICAgICAgICAgICAgICAgICAg\nU3RyaW5nIG1zZyA9IHNiLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICAg\nICAgICAgIGxvZ2dlci5lcnJvcihtc2csIHVlZSk7CiAgICAgICAgICAgICAg\nICAgICAgICAgIGNhbGxiYWNrLm9wZXJhdGlvbkZhaWxlZChjdHgsIG5ldyBQ\ndWJTdWJFeGNlcHRpb24uVW5leHBlY3RlZENvbmRpdGlvbkV4Y2VwdGlvbiht\nc2cpKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9\nCiAgICAgICAgICAgIH0sIGN0eCk7CiAgICAgICAgfQoKICAgICAgICBwcml2\nYXRlIFN0cmluZyBnZXRTdWJzY3JpcHRpb25QcmVmaXgoQnl0ZVN0cmluZyB0\nb3BpYywgY2hhciBzZXApIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBTdHJp\nbmdCdWlsZGVyKHRvcGljLnRvU3RyaW5nVXRmOCgpKS5hcHBlbmQoc2VwKS50\nb1N0cmluZygpOwogICAgICAgIH0KCiAgICAgICAgcHJpdmF0ZSB2b2lkIHJl\nYWRTdWJzY3JpcHRpb25zKGZpbmFsIEJ5dGVTdHJpbmcgdG9waWMsIGZpbmFs\nIGludCBrZXlMZW5ndGgsIGZpbmFsIE1ldGFzdG9yZUN1cnNvciBjdXJzb3Is\nCiAgICAgICAgICAgICAgICBmaW5hbCBNYXA8Qnl0ZVN0cmluZywgVmVyc2lv\nbmVkPFN1YnNjcmlwdGlvbkRhdGE+PiB0b3BpY1N1YnMsCiAgICAgICAgICAg\nICAgICBmaW5hbCBDYWxsYmFjazxNYXA8Qnl0ZVN0cmluZywgVmVyc2lvbmVk\nPFN1YnNjcmlwdGlvbkRhdGE+Pj4gY2FsbGJhY2ssIE9iamVjdCBjdHgpIHsK\nICAgICAgICAgICAgaWYgKCFjdXJzb3IuaGFzTW9yZUVudHJpZXMoKSkgewog\nICAgICAgICAgICAgICAgY2FsbGJhY2sub3BlcmF0aW9uRmluaXNoZWQoY3R4\nLCB0b3BpY1N1YnMpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAg\nICAgICB9CiAgICAgICAgICAgIFJlYWRFbnRyaWVzQ2FsbGJhY2sgcmVhZENi\nID0gbmV3IFJlYWRFbnRyaWVzQ2FsbGJhY2soKSB7CiAgICAgICAgICAgICAg\nICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIGNvbXBs\nZXRlKGludCByYywgSXRlcmF0b3I8TWV0YXN0b3JlVGFibGVJdGVtPiBpdGVt\ncywgT2JqZWN0IGN0eCkgewogICAgICAgICAgICAgICAgICAgIGlmIChyYyAh\nPSBNU0V4Y2VwdGlvbi5Db2RlLk9LLmdldENvZGUoKSkgewogICAgICAgICAg\nICAgICAgICAgICAgICBsb2dFcnJvckFuZEZpbmlzaE9wZXJhdGlvbigiQ291\nbGQgbm90IHJlYWQgc3Vic2NyaWJlcnMgZm9yIGN1cnNvciAiICsgY3Vyc29y\nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLCBj\ndHgsIHJjKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAg\nICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB3aGlsZSAo\naXRlbXMuaGFzTmV4dCgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIE1l\ndGFzdG9yZVRhYmxlSXRlbSBpdGVtID0gaXRlbXMubmV4dCgpOwogICAgICAg\nICAgICAgICAgICAgICAgICBmaW5hbCBCeXRlU3RyaW5nIHN1YnNjcmliZXJJ\nZCA9IEJ5dGVTdHJpbmcuY29weUZyb21VdGY4KGl0ZW0uZ2V0S2V5KCkuc3Vi\nc3RyaW5nKGtleUxlbmd0aCkpOwogICAgICAgICAgICAgICAgICAgICAgICB0\ncnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgVmVyc2lvbmVkPFZh\nbHVlPiB2diA9IGl0ZW0uZ2V0VmFsdWUoKTsKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgIFZlcnNpb25lZDxTdWJzY3JpcHRpb25EYXRhPiBzdWJEYXRh\nID0gbmV3IFZlcnNpb25lZDxTdWJzY3JpcHRpb25EYXRhPigKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUyU3Vic2NyaXB0aW9u\nRGF0YSh2di5nZXRWYWx1ZSgpKSwgdnYuZ2V0VmVyc2lvbigpKTsKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIHRvcGljU3Vicy5wdXQoc3Vic2NyaWJl\ncklkLCBzdWJEYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRj\naCAoUGFyc2VFeGNlcHRpb24gZSkgewogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgU3RyaW5nQnVpbGRlciBzYiA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYi5hcHBlbmQoIkZhaWxl\nZCB0byBkZXNlcmlhbGl6ZSBzdWJzY3JpcHRpb24gZGF0YSBmb3IgdG9waWM6\nICIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBl\nbmQodG9waWMudG9TdHJpbmdVdGY4KCkpLmFwcGVuZCgiLCBzdWJzY3JpYmVy\nSWQ6ICIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5h\ncHBlbmQoc3Vic2NyaWJlcklkLnRvU3RyaW5nVXRmOCgpKTsKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIFN0cmluZyBtc2cgPSBzYi50b1N0cmluZygp\nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKG1z\nZywgZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5v\ncGVyYXRpb25GYWlsZWQoY3R4LCBuZXcgUHViU3ViRXhjZXB0aW9uLlVuZXhw\nZWN0ZWRDb25kaXRpb25FeGNlcHRpb24obXNnKSk7CiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAg\nIH0gY2F0Y2ggKFVuc3VwcG9ydGVkRW5jb2RpbmdFeGNlcHRpb24gZSkgewog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nQnVpbGRlciBzYiA9\nIG5ldyBTdHJpbmdCdWlsZGVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICBzYi5hcHBlbmQoIlN1YnNjcmlwdGlvbiBkYXRhIGZvciB0b3BpYzog\nIikuYXBwZW5kKHRvcGljLnRvU3RyaW5nVXRmOCgpKQogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCIsIHN1YnNjcmliZXJJ\nZDogIikuYXBwZW5kKHN1YnNjcmliZXJJZC50b1N0cmluZ1V0ZjgoKSkKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgiIGlz\nIG5vdCBVVEYtOCBlbmNvZGVkLiIpOwogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgU3RyaW5nIG1zZyA9IHNiLnRvU3RyaW5nKCk7CiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IobXNnLCBlKTsKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLm9wZXJhdGlvbkZhaWxl\nZChjdHgsIG5ldyBQdWJTdWJFeGNlcHRpb24uVW5leHBlY3RlZENvbmRpdGlv\nbkV4Y2VwdGlvbihtc2cpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAg\nICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZWFkU3Vic2NyaXB0\naW9ucyh0b3BpYywga2V5TGVuZ3RoLCBjdXJzb3IsIHRvcGljU3VicywgY2Fs\nbGJhY2ssIGN0eCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07\nCiAgICAgICAgICAgIGN1cnNvci5hc3luY1JlYWRFbnRyaWVzKGNmZy5nZXRN\nZXRhc3RvcmVNYXhFbnRyaWVzUGVyU2NhbigpLCByZWFkQ2IsIGN0eCk7CiAg\nICAgICAgfQoKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgdm9p\nZCByZWFkU3Vic2NyaXB0aW9ucyhmaW5hbCBCeXRlU3RyaW5nIHRvcGljLAog\nICAgICAgICAgICAgICAgZmluYWwgQ2FsbGJhY2s8TWFwPEJ5dGVTdHJpbmcs\nIFZlcnNpb25lZDxTdWJzY3JpcHRpb25EYXRhPj4+IGNhbGxiYWNrLCBPYmpl\nY3QgY3R4KSB7CiAgICAgICAgICAgIGZpbmFsIFN0cmluZyBmaXJzdEtleSA9\nIGdldFN1YnNjcmlwdGlvblByZWZpeCh0b3BpYywgVE9QSUNfU1VCX0ZJUlNU\nX1NFUEFSQVRPUik7CiAgICAgICAgICAgIFN0cmluZyBsYXN0S2V5ID0gZ2V0\nU3Vic2NyaXB0aW9uUHJlZml4KHRvcGljLCBUT1BJQ19TVUJfTEFTVF9TRVBB\nUkFUT1IpOwogICAgICAgICAgICBzdWJUYWJsZS5vcGVuQ3Vyc29yKGZpcnN0\nS2V5LCB0cnVlLCBsYXN0S2V5LCB0cnVlLCBPcmRlci5BU0MsIEFMTF9GSUVM\nRFMsCiAgICAgICAgICAgICAgICAgICAgbmV3IE1ldGFzdG9yZUNhbGxiYWNr\nPE1ldGFzdG9yZUN1cnNvcj4oKSB7CiAgICAgICAgICAgICAgICAgICAgICAg\nIEBPdmVycmlkZQogICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWMgdm9p\nZCBjb21wbGV0ZShpbnQgcmMsIE1ldGFzdG9yZUN1cnNvciBjdXJzb3IsIE9i\namVjdCBjdHgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChy\nYyAhPSBNU0V4Y2VwdGlvbi5Db2RlLk9LLmdldENvZGUoKSkgewogICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ0Vycm9yQW5kRmluaXNoT3Bl\ncmF0aW9uKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIkNvdWxkIG5vdCByZWFkIHN1YnNjcmliZXJzIGZvciB0b3BpYyAiICsg\ndG9waWMudG9TdHJpbmdVdGY4KCksIGNhbGxiYWNrLCBjdHgsCiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYyk7CiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIGZpbmFsIE1hcDxCeXRlU3RyaW5nLCBWZXJzaW9uZWQ8U3Vic2NyaXB0aW9u\nRGF0YT4+IHRvcGljU3VicyA9CiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgIG5ldyBDb25jdXJyZW50SGFzaE1hcDxCeXRlU3RyaW5nLCBW\nZXJzaW9uZWQ8U3Vic2NyaXB0aW9uRGF0YT4+KCk7CiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICByZWFkU3Vic2NyaXB0aW9ucyh0b3BpYywgZmlyc3RL\nZXkubGVuZ3RoKCksIGN1cnNvciwgdG9waWNTdWJzLCBjYWxsYmFjaywgY3R4\nKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAg\nICAgIH0sIGN0eCk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICog\nY2FsbGJhY2sgZmluaXNoIG9wZXJhdGlvbiB3aXRoIGV4Y2VwdGlvbiBzcGVj\naWZ5IGJ5IGNvZGUsIHJlZ2FyZGxlc3Mgb2YKICAgICAqIHRoZSB2YWx1ZSBv\nZiByZXR1cm4gY29kZSByYy4KICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMg\nPFQ+IHZvaWQgbG9nRXJyb3JBbmRGaW5pc2hPcGVyYXRpb24oU3RyaW5nIG1z\nZywgQ2FsbGJhY2s8VD4gY2FsbGJhY2ssIE9iamVjdCBjdHgsIGludCByYywK\nICAgICAgICAgICAgU3RhdHVzQ29kZSBjb2RlKSB7CiAgICAgICAgbG9nZ2Vy\nLmVycm9yKG1zZywgTVNFeGNlcHRpb24uY3JlYXRlKE1TRXhjZXB0aW9uLkNv\nZGUuZ2V0KHJjKSwgIiIpKTsKICAgICAgICBjYWxsYmFjay5vcGVyYXRpb25G\nYWlsZWQoY3R4LCBQdWJTdWJFeGNlcHRpb24uY3JlYXRlKGNvZGUsIG1zZykp\nOwogICAgfQoKICAgIC8qKgogICAgICogY2FsbGJhY2sgZmluaXNoIG9wZXJh\ndGlvbiB3aXRoIGNvcnJlc3BvbmRpbmcgUHViU3ViRXhjZXB0aW9uIGNvbnZl\ncnRlZAogICAgICogZnJvbSByZXR1cm4gY29kZSByYy4KICAgICAqLwogICAg\ncHJpdmF0ZSBzdGF0aWMgPFQ+IHZvaWQgbG9nRXJyb3JBbmRGaW5pc2hPcGVy\nYXRpb24oU3RyaW5nIG1zZywgQ2FsbGJhY2s8VD4gY2FsbGJhY2ssIE9iamVj\ndCBjdHgsIGludCByYykgewogICAgICAgIFN0YXR1c0NvZGUgY29kZTsKCiAg\nICAgICAgaWYgKHJjID09IE1TRXhjZXB0aW9uLkNvZGUuTm9LZXkuZ2V0Q29k\nZSgpKSB7CiAgICAgICAgICAgIGNvZGUgPSBTdGF0dXNDb2RlLk5PX1NVQ0hf\nVE9QSUM7CiAgICAgICAgfSBlbHNlIGlmIChyYyA9PSBNU0V4Y2VwdGlvbi5D\nb2RlLlNlcnZpY2VEb3duLmdldENvZGUoKSkgewogICAgICAgICAgICBjb2Rl\nID0gU3RhdHVzQ29kZS5TRVJWSUNFX0RPV047CiAgICAgICAgfSBlbHNlIHsK\nICAgICAgICAgICAgY29kZSA9IFN0YXR1c0NvZGUuVU5FWFBFQ1RFRF9DT05E\nSVRJT047CiAgICAgICAgfQoKICAgICAgICBsb2dFcnJvckFuZEZpbmlzaE9w\nZXJhdGlvbihtc2csIGNhbGxiYWNrLCBjdHgsIHJjLCBjb2RlKTsKICAgIH0K\nCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIGZvcm1hdChTZXJ2ZXJD\nb25maWd1cmF0aW9uIGNmZywgWm9vS2VlcGVyIHprKSB0aHJvd3MgSU9FeGNl\ncHRpb24gewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGludCBtYXhFbnRy\naWVzUGVyU2NhbiA9IGNmZy5nZXRNZXRhc3RvcmVNYXhFbnRyaWVzUGVyU2Nh\nbigpOwoKICAgICAgICAgICAgLy8gY2xlYW4gdG9waWMgb3duZXJzaGlwIHRh\nYmxlLgogICAgICAgICAgICBsb2dnZXIuaW5mbygiQ2xlYW5pbmcgdG9waWMg\nb3duZXJzaGlwIHRhYmxlIC4uLiIpOwogICAgICAgICAgICBNZXRhc3RvcmVV\ndGlscy5jbGVhblRhYmxlKG93bmVyVGFibGUsIG1heEVudHJpZXNQZXJTY2Fu\nKTsKICAgICAgICAgICAgbG9nZ2VyLmluZm8oIkNsZWFuZWQgdG9waWMgb3du\nZXJzaGlwIHRhYmxlIHN1Y2Nlc3NmdWxseS4iKTsKCiAgICAgICAgICAgIC8v\nIGNsZWFuIHRvcGljIHN1YnNjcmlwdGlvbiB0YWJsZS4KICAgICAgICAgICAg\nbG9nZ2VyLmluZm8oIkNsZWFuaW5nIHRvcGljIHN1YnNjcmlwdGlvbiB0YWJs\nZSAuLi4iKTsKICAgICAgICAgICAgTWV0YXN0b3JlVXRpbHMuY2xlYW5UYWJs\nZShzdWJUYWJsZSwgbWF4RW50cmllc1BlclNjYW4pOwogICAgICAgICAgICBs\nb2dnZXIuaW5mbygiQ2xlYW5lZCB0b3BpYyBzdWJzY3JpcHRpb24gdGFibGUg\nc3VjY2Vzc2Z1bGx5LiIpOwoKICAgICAgICAgICAgLy8gY2xlYW4gdG9waWMg\ncGVyc2lzdGVuY2UgaW5mbyB0YWJsZS4KICAgICAgICAgICAgbG9nZ2VyLmlu\nZm8oIkNsZWFuaW5nIHRvcGljIHBlcnNpc3RlbmNlIGluZm8gdGFibGUgLi4u\nIik7CiAgICAgICAgICAgIE1ldGFzdG9yZVV0aWxzLmNsZWFuVGFibGUocGVy\nc2lzdFRhYmxlLCBtYXhFbnRyaWVzUGVyU2Nhbik7CiAgICAgICAgICAgIGxv\nZ2dlci5pbmZvKCJDbGVhbmVkIHRvcGljIHBlcnNpc3RlbmNlIGluZm8gdGFi\nbGUgc3VjY2Vzc2Z1bGx5LiIpOwogICAgICAgIH0gY2F0Y2ggKE1TRXhjZXB0\naW9uIG1zZSkgewogICAgICAgICAgICB0aHJvdyBuZXcgSU9FeGNlcHRpb24o\nIkV4Y2VwdGlvbiB3aGVuIGZvcm1hdHRpbmcgaGVkd2lnIG1ldGFzdG9yZSA6\nICIsIG1zZSk7CiAgICAgICAgfSBjYXRjaCAoSW50ZXJydXB0ZWRFeGNlcHRp\nb24gaWUpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKCJJ\nbnRlcnJ1cHRlZCB3aGVuIGZvcm1hdHRpbmcgaGVkd2lnIG1ldGFzdG9yZSA6\nICIsIGllKTsKICAgICAgICB9CiAgICB9Cgp9Cg==\n","encoding":"base64"}

