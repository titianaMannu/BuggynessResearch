{"sha":"09abf6714b542a94628e2e3742cd13e66bf88175","node_id":"MDQ6QmxvYjE1NzU5NTY6MDlhYmY2NzE0YjU0MmE5NDYyOGUyZTM3NDJjZDEzZTY2YmY4ODE3NQ==","size":32164,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/09abf6714b542a94628e2e3742cd13e66bf88175","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIucGVyc2lzdGVuY2U7Cgpp\nbXBvcnQgamF2YS51dGlsLkhhc2hTZXQ7CmltcG9ydCBqYXZhLnV0aWwuSXRl\ncmF0b3I7CmltcG9ydCBqYXZhLnV0aWwuTGlua2VkTGlzdDsKaW1wb3J0IGph\ndmEudXRpbC5RdWV1ZTsKaW1wb3J0IGphdmEudXRpbC5TZXQ7CmltcG9ydCBq\nYXZhLnV0aWwuU29ydGVkTWFwOwppbXBvcnQgamF2YS51dGlsLlNvcnRlZFNl\ndDsKaW1wb3J0IGphdmEudXRpbC5UcmVlTWFwOwppbXBvcnQgamF2YS51dGls\nLlRyZWVTZXQ7CmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5Db25jdXJy\nZW50SGFzaE1hcDsKaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkNvbmN1\ncnJlbnRNYXA7CmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5SZWplY3Rl\nZEV4ZWN1dGlvbkV4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5jb25jdXJy\nZW50LmF0b21pYy5BdG9taWNJbnRlZ2VyOwppbXBvcnQgamF2YS51dGlsLmNv\nbmN1cnJlbnQuYXRvbWljLkF0b21pY0xvbmc7CgppbXBvcnQgb3JnLmFwYWNo\nZS5ib29ra2VlcGVyLnV0aWwuTWF0aFV0aWxzOwppbXBvcnQgb3JnLmFwYWNo\nZS5ib29ra2VlcGVyLnV0aWwuT3JkZXJlZFNhZmVFeGVjdXRvcjsKaW1wb3J0\nIG9yZy5hcGFjaGUuYm9va2tlZXBlci51dGlsLlNhZmVSdW5uYWJsZTsKaW1w\nb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmV4Y2VwdGlvbnMuUHViU3ViRXhjZXB0\naW9uOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuZXhjZXB0aW9ucy5QdWJT\ndWJFeGNlcHRpb24uU2VydmVyTm90UmVzcG9uc2libGVGb3JUb3BpY0V4Y2Vw\ndGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnByb3RvY29sLlB1YlN1\nYlByb3RvY29sOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcucHJvdG9jb2wu\nUHViU3ViUHJvdG9jb2wuTWVzc2FnZTsKaW1wb3J0IG9yZy5hcGFjaGUuaGVk\nd2lnLnByb3RvY29sLlB1YlN1YlByb3RvY29sLk1lc3NhZ2VTZXFJZDsKaW1w\nb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnByb3RvZXh0ZW5zaW9ucy5NZXNzYWdl\nSWRVdGlsczsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnNlcnZlci5jb21t\nb24uU2VydmVyQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVk\nd2lnLnNlcnZlci5qbXguSGVkd2lnSk1YU2VydmljZTsKaW1wb3J0IG9yZy5h\ncGFjaGUuaGVkd2lnLnNlcnZlci5qbXguSGVkd2lnTUJlYW5JbmZvOwppbXBv\ncnQgb3JnLmFwYWNoZS5oZWR3aWcuc2VydmVyLmpteC5IZWR3aWdNQmVhblJl\nZ2lzdHJ5OwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcudXRpbC5DYWxsYmFj\nazsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXI7CmltcG9ydCBvcmcuc2xmNGou\nTG9nZ2VyRmFjdG9yeTsKCmltcG9ydCBjb20uZ29vZ2xlLnByb3RvYnVmLkJ5\ndGVTdHJpbmc7CgpwdWJsaWMgY2xhc3MgUmVhZEFoZWFkQ2FjaGUgaW1wbGVt\nZW50cyBQZXJzaXN0ZW5jZU1hbmFnZXIsIEhlZHdpZ0pNWFNlcnZpY2UgewoK\nICAgIHN0YXRpYyBMb2dnZXIgbG9nZ2VyID0gTG9nZ2VyRmFjdG9yeS5nZXRM\nb2dnZXIoUmVhZEFoZWFkQ2FjaGUuY2xhc3MpOwoKICAgIHByb3RlY3RlZCBp\nbnRlcmZhY2UgQ2FjaGVSZXF1ZXN0IHsKICAgICAgICBwdWJsaWMgdm9pZCBw\nZXJmb3JtUmVxdWVzdCgpOwogICAgfQoKICAgIC8qKgogICAgICogVGhlIHVu\nZGVybHlpbmcgcGVyc2lzdGVuY2UgbWFuYWdlciB0aGF0IHdpbGwgYmUgdXNl\nZCBmb3IgcGVyc2lzdGVuY2UgYW5kCiAgICAgKiBzY2FubmluZyBiZWxvdyB0\naGUgY2FjaGUKICAgICAqLwogICAgcHJvdGVjdGVkIFBlcnNpc3RlbmNlTWFu\nYWdlcldpdGhSYW5nZVNjYW4gcmVhbFBlcnNpc3RlbmNlTWFuYWdlcjsKCiAg\nICAvKioKICAgICAqIFRoZSBzdHJ1Y3R1cmUgZm9yIHRoZSBjYWNoZQogICAg\nICovCiAgICBwcm90ZWN0ZWQgQ29uY3VycmVudE1hcDxDYWNoZUtleSwgQ2Fj\naGVWYWx1ZT4gY2FjaGUgPQogICAgICAgIG5ldyBDb25jdXJyZW50SGFzaE1h\ncDxDYWNoZUtleSwgQ2FjaGVWYWx1ZT4oKTsKCiAgICAvKioKICAgICAqIFdl\nIGFsc28gd2FudCB0byB0cmFjayB0aGUgZW50cmllcyBpbiBzZXEtaWQgb3Jk\nZXIgc28gdGhhdCB3ZSBjYW4gY2xlYW4gdXAKICAgICAqIGVudHJpZXMgYWZ0\nZXIgdGhlIGxhc3Qgc3Vic2NyaWJlcgogICAgICovCiAgICBwcm90ZWN0ZWQg\nQ29uY3VycmVudE1hcDxCeXRlU3RyaW5nLCBTb3J0ZWRTZXQ8TG9uZz4+IG9y\nZGVyZWRJbmRleE9uU2VxSWQgPQogICAgICAgIG5ldyBDb25jdXJyZW50SGFz\naE1hcDxCeXRlU3RyaW5nLCBTb3J0ZWRTZXQ8TG9uZz4+KCk7CgogICAgLyoq\nCiAgICAgKiBQYXJ0aXRpb24gQ2FjaGUgaW50byBTZXJ2ZXJhbCBTZWdtZW50\ncyBmb3Igc2ltcGxpZnkgc3luY2hyb25pemF0aW9uLgogICAgICogRWFjaCBz\nZWdtZW50IG1haW50YWlucyBpdHMgdGltZSBpbmRleCBhbmQgc2VnbWVudCBz\naXplLgogICAgICovCiAgICBzdGF0aWMgY2xhc3MgQ2FjaGVTZWdtZW50IHsK\nCiAgICAgICAgLyoqCiAgICAgICAgICogV2Ugd2FudCB0byBrZWVwIHRyYWNr\nIG9mIHdoZW4gZW50cmllcyB3ZXJlIGFkZGVkIGluIHRoZSBjYWNoZSwgc28g\ndGhhdCB3ZQogICAgICAgICAqIGNhbiByZW1vdmUgdGhlbSBpbiBhIEZJRk8g\nZmFzaGlvbgogICAgICAgICAqLwogICAgICAgIHByb3RlY3RlZCBTb3J0ZWRN\nYXA8TG9uZywgU2V0PENhY2hlS2V5Pj4gdGltZUluZGV4T2ZBZGRpdGlvbiA9\nIG5ldyBUcmVlTWFwPExvbmcsIFNldDxDYWNoZUtleT4+KCk7CgogICAgICAg\nIC8qKgogICAgICAgICAqIFdlIG1haW50YWluIGFuIGVzdGltYXRlIG9mIHRo\nZSBjdXJyZW50IHNpemUgb2YgZWFjaCBjYWNoZSBzZWdtZW50LAogICAgICAg\nICAqIHNvIHRoYXQgdGhlIHRocmVhZCBrbm93IHdoZW4gdG8gZXZpY3QgZW50\ncmllcyBmcm9tIGNhY2hlIHNlZ21lbnQuCiAgICAgICAgICovCiAgICAgICAg\ncHJvdGVjdGVkIEF0b21pY0xvbmcgcHJlc2VudFNlZ21lbnRTaXplID0gbmV3\nIEF0b21pY0xvbmcoMCk7CgogICAgfQoKICAgIC8qKgogICAgICogV2UgbWFp\nbnRhaW4gYW4gZXN0aW1hdGUgb2YgdGhlIGN1cnJlbnQgc2l6ZSBvZiB0aGUg\nY2FjaGUsIHNvIHRoYXQgd2Uga25vdwogICAgICogd2hlbiB0byBldmljdCBl\nbnRyaWVzLgogICAgICovCiAgICBwcm90ZWN0ZWQgQXRvbWljTG9uZyBwcmVz\nZW50Q2FjaGVTaXplID0gbmV3IEF0b21pY0xvbmcoMCk7CgogICAgLyoqCiAg\nICAgKiBOdW0gcGVuZGluZyByZXF1ZXN0cy4KICAgICAqLwogICAgcHJvdGVj\ndGVkIEF0b21pY0ludGVnZXIgbnVtUGVuZGluZ1JlcXVlc3RzID0gbmV3IEF0\nb21pY0ludGVnZXIoMCk7CgogICAgLyoqCiAgICAgKiBDYWNoZSBzZWdtZW50\nIGZvciBkaWZmZXJlbnQgdGhyZWFkcwogICAgICovCiAgICBwcm90ZWN0ZWQg\nZmluYWwgVGhyZWFkTG9jYWw8Q2FjaGVTZWdtZW50PiBjYWNoZVNlZ21lbnQg\nPQogICAgICAgIG5ldyBUaHJlYWRMb2NhbDxDYWNoZVNlZ21lbnQ+KCkgewog\nICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHJvdGVjdGVkIENh\nY2hlU2VnbWVudCBpbml0aWFsVmFsdWUoKSB7CiAgICAgICAgICAgICAgICBy\nZXR1cm4gbmV3IENhY2hlU2VnbWVudCgpOwogICAgICAgICAgICB9CiAgICAg\nICAgfTsKCiAgICAvKioKICAgICAqIE9uZSBpbnN0YW5jZSBvZiBhIGNhbGxi\nYWNrIHRoYXQgd2Ugd2lsbCBwYXNzIHRvIHRoZSB1bmRlcmx5aW5nCiAgICAg\nKiBwZXJzaXN0ZW5jZSBtYW5hZ2VyIHdoZW4gYXNraW5nIGl0IHRvIHBlcnNp\nc3QgbWVzc2FnZXMKICAgICAqLwogICAgcHJvdGVjdGVkIFBlcnNpc3RDYWxs\nYmFjayBwZXJzaXN0Q2FsbGJhY2tJbnN0YW5jZSA9IG5ldyBQZXJzaXN0Q2Fs\nbGJhY2soKTsKCiAgICAvKioKICAgICAqIDIga2luZHMgb2YgZXhjZXB0aW9u\ncyB0aGF0IHdlIHdpbGwgdXNlIHRvIHNpZ25hbCBlcnJvciBmcm9tIHJlYWRh\naGVhZAogICAgICovCiAgICBwcm90ZWN0ZWQgTm9TdWNoU2VxSWRFeGNlcHRp\nb24gbm9TdWNoU2VxSWRFeGNlcHRpb25JbnN0YW5jZSA9IG5ldyBOb1N1Y2hT\nZXFJZEV4Y2VwdGlvbigpOwogICAgcHJvdGVjdGVkIFJlYWRBaGVhZEV4Y2Vw\ndGlvbiByZWFkQWhlYWRFeGNlcHRpb25JbnN0YW5jZSA9IG5ldyBSZWFkQWhl\nYWRFeGNlcHRpb24oKTsKCiAgICBwcm90ZWN0ZWQgU2VydmVyQ29uZmlndXJh\ndGlvbiBjZmc7CiAgICAvLyBCb29sZWFuIGluZGljYXRpbmcgaWYgdGhpcyB0\naHJlYWQgc2hvdWxkIGNvbnRpbnVlIHJ1bm5pbmcuIFRoaXMgaXMgdXNlZAog\nICAgLy8gd2hlbiB3ZSB3YW50IHRvIHN0b3AgdGhlIHRocmVhZCBkdXJpbmcg\nYSBQdWJTdWJTZXJ2ZXIgc2h1dGRvd24uCiAgICBwcm90ZWN0ZWQgdm9sYXRp\nbGUgYm9vbGVhbiBrZWVwUnVubmluZyA9IHRydWU7CgogICAgcHJvdGVjdGVk\nIGZpbmFsIE9yZGVyZWRTYWZlRXhlY3V0b3IgY2FjaGVXb3JrZXJzOwogICAg\ncHJvdGVjdGVkIGZpbmFsIGludCBudW1DYWNoZVdvcmtlcnM7CiAgICBwcm90\nZWN0ZWQgdm9sYXRpbGUgbG9uZyBtYXhTZWdtZW50U2l6ZTsKICAgIHByb3Rl\nY3RlZCB2b2xhdGlsZSBsb25nIGNhY2hlRW50cnlUVEw7CgogICAgLy8gSk1Y\nIEJlYW5zCiAgICBSZWFkQWhlYWRDYWNoZUJlYW4gam14Q2FjaGVCZWFuID0g\nbnVsbDsKCiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yLiBTdGFydHMgdGhl\nIGNhY2hlIG1haW50YWluZXIgdGhyZWFkCiAgICAgKgogICAgICogQHBhcmFt\nIHJlYWxQZXJzaXN0ZW5jZU1hbmFnZXIKICAgICAqLwogICAgcHVibGljIFJl\nYWRBaGVhZENhY2hlKFBlcnNpc3RlbmNlTWFuYWdlcldpdGhSYW5nZVNjYW4g\ncmVhbFBlcnNpc3RlbmNlTWFuYWdlciwgU2VydmVyQ29uZmlndXJhdGlvbiBj\nZmcpIHsKICAgICAgICB0aGlzLnJlYWxQZXJzaXN0ZW5jZU1hbmFnZXIgPSBy\nZWFsUGVyc2lzdGVuY2VNYW5hZ2VyOwogICAgICAgIHRoaXMuY2ZnID0gY2Zn\nOwogICAgICAgIG51bUNhY2hlV29ya2VycyA9IGNmZy5nZXROdW1SZWFkQWhl\nYWRDYWNoZVRocmVhZHMoKTsKICAgICAgICBjYWNoZVdvcmtlcnMgPSBuZXcg\nT3JkZXJlZFNhZmVFeGVjdXRvcihudW1DYWNoZVdvcmtlcnMsCiAgICAgICAg\nICAgICAgICAiUmVhZEFoZWFkQ2FjaGVTY2hlZHVsZXIiKTsKICAgICAgICBy\nZWxvYWRDb25mKGNmZyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZWxvYWQg\nY29uZmlndXJhdGlvbgogICAgICoKICAgICAqIEBwYXJhbSBjb25mCiAgICAg\nKiAgICAgICAgICBTZXJ2ZXIgY29uZmlndXJhdGlvbiBvYmplY3QKICAgICAq\nLwogICAgcHJvdGVjdGVkIHZvaWQgcmVsb2FkQ29uZihTZXJ2ZXJDb25maWd1\ncmF0aW9uIGNmZykgewogICAgICAgIG1heFNlZ21lbnRTaXplID0gY2ZnLmdl\ndE1heGltdW1DYWNoZVNpemUoKSAvIG51bUNhY2hlV29ya2VyczsKICAgICAg\nICBjYWNoZUVudHJ5VFRMID0gY2ZnLmdldENhY2hlRW50cnlUVEwoKTsKICAg\nIH0KCiAgICBwdWJsaWMgUmVhZEFoZWFkQ2FjaGUgc3RhcnQoKSB7CiAgICAg\nICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgLyoqCiAgICAgKiA9PT09PT09\nPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09\nPT09PT09PT09PT09PT09PT09PT0KICAgICAqIE1ldGhvZHMgb2Yge0BsaW5r\nIFBlcnNpc3RlbmNlTWFuYWdlcn0gdGhhdCB3ZSB3aWxsIHBhc3Mgc3RyYWln\naHQgZG93biB0bwogICAgICogdGhlIHJlYWwgcGVyc2lzdGVuY2UgbWFuYWdl\nci4KICAgICAqLwoKICAgIEBPdmVycmlkZQogICAgcHVibGljIGxvbmcgZ2V0\nU2VxSWRBZnRlclNraXBwaW5nKEJ5dGVTdHJpbmcgdG9waWMsIGxvbmcgc2Vx\nSWQsIGludCBza2lwQW1vdW50KSB7CiAgICAgICAgcmV0dXJuIHJlYWxQZXJz\naXN0ZW5jZU1hbmFnZXIuZ2V0U2VxSWRBZnRlclNraXBwaW5nKHRvcGljLCBz\nZXFJZCwgc2tpcEFtb3VudCk7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBw\ndWJsaWMgTWVzc2FnZVNlcUlkIGdldEN1cnJlbnRTZXFJZEZvclRvcGljKEJ5\ndGVTdHJpbmcgdG9waWMpIHRocm93cyBTZXJ2ZXJOb3RSZXNwb25zaWJsZUZv\nclRvcGljRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gcmVhbFBlcnNpc3Rl\nbmNlTWFuYWdlci5nZXRDdXJyZW50U2VxSWRGb3JUb3BpYyh0b3BpYyk7CiAg\nICB9CgogICAgLyoqCiAgICAgKiA9PT09PT09PT09PT09PT09PT09PT09PT09\nPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09\nPT0KICAgICAqIE90aGVyIG1ldGhvZHMgb2Yge0BsaW5rIFBlcnNpc3RlbmNl\nTWFuYWdlcn0gdGhhdCB0aGUgY2FjaGUgbmVlZHMgdG8gdGFrZQogICAgICog\nc29tZSBhY3Rpb24gb24uCiAgICAgKgogICAgICogMS4gUGVyc2lzdDogV2Ug\ncGFzcyBpdCB0aHJvdWdoIHRvIHRoZSByZWFsIHBlcnNpc3RlbmNlIG1hbmFn\nZXIgYnV0IGluc2VydAogICAgICogb3VyIGNhbGxiYWNrIG9uIHRoZSByZXR1\ncm4gcGF0aAogICAgICoKICAgICAqLwogICAgQE92ZXJyaWRlCiAgICBwdWJs\naWMgdm9pZCBwZXJzaXN0TWVzc2FnZShQZXJzaXN0UmVxdWVzdCByZXF1ZXN0\nKSB7CiAgICAgICAgLy8gbWFrZSBhIG5ldyBQZXJzaXN0UmVxdWVzdCBvYmpl\nY3Qgc28gdGhhdCB3ZSBjYW4gaW5zZXJ0IG91ciBvd24KICAgICAgICAvLyBj\nYWxsYmFjayBpbiB0aGUgbWlkZGxlLiBBc3NpZ24gdGhlIG9yaWdpbmFsIHJl\ncXVlc3QgYXMgdGhlIGNvbnRleHQKICAgICAgICAvLyBmb3IgdGhlIGNhbGxi\nYWNrLgoKICAgICAgICBQZXJzaXN0UmVxdWVzdCBuZXdSZXF1ZXN0ID0gbmV3\nIFBlcnNpc3RSZXF1ZXN0KHJlcXVlc3QuZ2V0VG9waWMoKSwgcmVxdWVzdC5n\nZXRNZXNzYWdlKCksCiAgICAgICAgICAgICAgICBwZXJzaXN0Q2FsbGJhY2tJ\nbnN0YW5jZSwgcmVxdWVzdCk7CiAgICAgICAgcmVhbFBlcnNpc3RlbmNlTWFu\nYWdlci5wZXJzaXN0TWVzc2FnZShuZXdSZXF1ZXN0KTsKICAgIH0KCiAgICAv\nKioKICAgICAqIFRoZSBjYWxsYmFjayB0aGF0IHdlIGluc2VydCBvbiB0aGUg\ncGVyc2lzdCByZXF1ZXN0IHJldHVybiBwYXRoLiBUaGUKICAgICAqIGNhbGxi\nYWNrIHNpbXBseSBmb3JtcyBhIHtAbGluayBQZXJzaXN0UmVzcG9uc2V9IG9i\namVjdCBhbmQgaW5zZXJ0cyBpdCBpbgogICAgICogdGhlIHJlcXVlc3QgcXVl\ndWUgdG8gYmUgaGFuZGxlZCBzZXJpYWxseSBieSB0aGUgY2FjaGUgbWFpbnRh\naW5lciB0aHJlYWQuCiAgICAgKgogICAgICovCiAgICBwdWJsaWMgY2xhc3Mg\nUGVyc2lzdENhbGxiYWNrIGltcGxlbWVudHMgQ2FsbGJhY2s8UHViU3ViUHJv\ndG9jb2wuTWVzc2FnZVNlcUlkPiB7CgogICAgICAgIC8qKgogICAgICAgICAq\nIEluIGNhc2UgdGhlcmUgaXMgYSBmYWlsdXJlIGluIHBlcnNpc3RpbmcsIGp1\nc3QgcGFzcyBpdCB0byB0aGUKICAgICAgICAgKiBvcmlnaW5hbCBjYWxsYmFj\nawogICAgICAgICAqLwogICAgICAgIEBPdmVycmlkZQogICAgICAgIHB1Ymxp\nYyB2b2lkIG9wZXJhdGlvbkZhaWxlZChPYmplY3QgY3R4LCBQdWJTdWJFeGNl\ncHRpb24gZXhjZXB0aW9uKSB7CiAgICAgICAgICAgIFBlcnNpc3RSZXF1ZXN0\nIG9yaWdpbmFsUmVxdWVzdCA9IChQZXJzaXN0UmVxdWVzdCkgY3R4OwogICAg\nICAgICAgICBDYWxsYmFjazxQdWJTdWJQcm90b2NvbC5NZXNzYWdlU2VxSWQ+\nIG9yaWdpbmFsQ2FsbGJhY2sgPSBvcmlnaW5hbFJlcXVlc3QuZ2V0Q2FsbGJh\nY2soKTsKICAgICAgICAgICAgT2JqZWN0IG9yaWdpbmFsQ29udGV4dCA9IG9y\naWdpbmFsUmVxdWVzdC5nZXRDdHgoKTsKICAgICAgICAgICAgb3JpZ2luYWxD\nYWxsYmFjay5vcGVyYXRpb25GYWlsZWQob3JpZ2luYWxDb250ZXh0LCBleGNl\ncHRpb24pOwogICAgICAgIH0KCiAgICAgICAgLyoqCiAgICAgICAgICogV2hl\nbiB0aGUgcGVyc2lzdCBmaW5pc2hlcywgd2UgZmlyc3Qgbm90aWZ5IHRoZSBv\ncmlnaW5hbCBjYWxsYmFjayBvZgogICAgICAgICAqIHN1Y2Nlc3MsIGFuZCB0\naGVuIG9wcG9ydHVuaXN0aWNhbGx5IHRyZWF0IHRoZSBtZXNzYWdlIGFzIGlm\nIGl0IGp1c3QKICAgICAgICAgKiBjYW1lIGluIHRocm91Z2ggYSBzY2FuCiAg\nICAgICAgICovCiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHVibGljIHZv\naWQgb3BlcmF0aW9uRmluaXNoZWQoT2JqZWN0IGN0eCwgUHViU3ViUHJvdG9j\nb2wuTWVzc2FnZVNlcUlkIHJlc3VsdE9mT3BlcmF0aW9uKSB7CiAgICAgICAg\nICAgIFBlcnNpc3RSZXF1ZXN0IG9yaWdpbmFsUmVxdWVzdCA9IChQZXJzaXN0\nUmVxdWVzdCkgY3R4OwoKICAgICAgICAgICAgLy8gTGV0cyBjYWxsIHRoZSBv\ncmlnaW5hbCBjYWxsYmFjayBmaXJzdCBzbyB0aGF0IHRoZSBwdWJsaXNoZXIg\nY2FuCiAgICAgICAgICAgIC8vIGhlYXIgc3VjY2VzcwogICAgICAgICAgICBv\ncmlnaW5hbFJlcXVlc3QuZ2V0Q2FsbGJhY2soKS5vcGVyYXRpb25GaW5pc2hl\nZChvcmlnaW5hbFJlcXVlc3QuZ2V0Q3R4KCksIHJlc3VsdE9mT3BlcmF0aW9u\nKTsKCiAgICAgICAgICAgIC8vIE9yaWdpbmFsIG1lc3NhZ2UgdGhhdCB3YXMg\ncGVyc2lzdGVkIGRpZG4ndCBoYXZlIHRoZSBsb2NhbCBzZXEtaWQuCiAgICAg\nICAgICAgIC8vIExldHMgYWRkIHRoYXQgaW4KICAgICAgICAgICAgTWVzc2Fn\nZSBtZXNzYWdlV2l0aExvY2FsU2VxSWQgPSBNZXNzYWdlSWRVdGlscy5tZXJn\nZUxvY2FsU2VxSWQob3JpZ2luYWxSZXF1ZXN0LmdldE1lc3NhZ2UoKSwKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1\nbHRPZk9wZXJhdGlvbi5nZXRMb2NhbENvbXBvbmVudCgpKTsKCiAgICAgICAg\nICAgIC8vIE5vdyBlbnF1ZXVlIGEgcmVxdWVzdCB0byBhZGQgdGhpcyBuZXds\neSBwZXJzaXN0ZWQgbWVzc2FnZSB0byBvdXIKICAgICAgICAgICAgLy8gY2Fj\naGUKICAgICAgICAgICAgQ2FjaGVLZXkgY2FjaGVLZXkgPSBuZXcgQ2FjaGVL\nZXkob3JpZ2luYWxSZXF1ZXN0LmdldFRvcGljKCksIHJlc3VsdE9mT3BlcmF0\naW9uLmdldExvY2FsQ29tcG9uZW50KCkpOwoKICAgICAgICAgICAgZW5xdWV1\nZVdpdGhvdXRGYWlsdXJlQnlUb3BpYyhjYWNoZUtleS5nZXRUb3BpYygpLAog\nICAgICAgICAgICAgICAgICAgIG5ldyBTY2FuUmVzcG9uc2UoY2FjaGVLZXks\nIG1lc3NhZ2VXaXRoTG9jYWxTZXFJZCkpOwogICAgICAgIH0KCiAgICB9Cgog\nICAgcHJvdGVjdGVkIHZvaWQgZW5xdWV1ZVdpdGhvdXRGYWlsdXJlQnlUb3Bp\nYyhCeXRlU3RyaW5nIHRvcGljLCBmaW5hbCBDYWNoZVJlcXVlc3Qgb2JqKSB7\nCiAgICAgICAgaWYgKCFrZWVwUnVubmluZykgewogICAgICAgICAgICByZXR1\ncm47CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICAgIG51bVBl\nbmRpbmdSZXF1ZXN0cy5pbmNyZW1lbnRBbmRHZXQoKTsKICAgICAgICAgICAg\nY2FjaGVXb3JrZXJzLnN1Ym1pdE9yZGVyZWQodG9waWMsIG5ldyBTYWZlUnVu\nbmFibGUoKSB7CiAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAg\nICAgICAgIHB1YmxpYyB2b2lkIHNhZmVSdW4oKSB7CiAgICAgICAgICAgICAg\nICAgICAgbnVtUGVuZGluZ1JlcXVlc3RzLmRlY3JlbWVudEFuZEdldCgpOwog\nICAgICAgICAgICAgICAgICAgIG9iai5wZXJmb3JtUmVxdWVzdCgpOwogICAg\nICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9IGNhdGNo\nIChSZWplY3RlZEV4ZWN1dGlvbkV4Y2VwdGlvbiByZWUpIHsKICAgICAgICAg\nICAgbG9nZ2VyLmVycm9yKCJGYWlsZWQgdG8gc3VibWl0IGNhY2hlIHJlcXVl\nc3QgZm9yIHRvcGljICIgKyB0b3BpYy50b1N0cmluZ1V0ZjgoKSArICIgOiAi\nLCByZWUpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEFub3Ro\nZXIgbWV0aG9kIGZyb20ge0BsaW5rIFBlcnNpc3RlbmNlTWFuYWdlcn0uCiAg\nICAgKgogICAgICogMi4gU2NhbiAtIFNpbmNlIHRoZSBzY2FuIG5lZWRzIHRv\nIHRvdWNoIHRoZSBjYWNoZSwgd2Ugd2lsbCBqdXN0IGVucXVldWUKICAgICAq\nIHRoZSBzY2FuIHJlcXVlc3QgYW5kIGxldCB0aGUgY2FjaGUgbWFpbnRhaW5l\nciB0aHJlYWQgaGFuZGxlIGl0LgogICAgICovCiAgICBAT3ZlcnJpZGUKICAg\nIHB1YmxpYyB2b2lkIHNjYW5TaW5nbGVNZXNzYWdlKFNjYW5SZXF1ZXN0IHJl\ncXVlc3QpIHsKICAgICAgICAvLyBMZXQgdGhlIHNjYW4gcmVxdWVzdHMgYmUg\nc2VyaWFsaXplZCB0aHJvdWdoIHRoZSBxdWV1ZQogICAgICAgIGVucXVldWVX\naXRob3V0RmFpbHVyZUJ5VG9waWMocmVxdWVzdC5nZXRUb3BpYygpLAogICAg\nICAgICAgICAgICAgbmV3IFNjYW5SZXF1ZXN0V3JhcHBlcihyZXF1ZXN0KSk7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBBbm90aGVyIG1ldGhvZCBmcm9tIHtA\nbGluayBQZXJzaXN0ZW5jZU1hbmFnZXJ9LgogICAgICoKICAgICAqIDMuIEVu\ncXVldWUgdGhlIHJlcXVlc3Qgc28gdGhhdCB0aGUgY2FjaGUgbWFpbnRhaW5l\nciB0aHJlYWQgY2FuIGRlbGV0ZSBhbGwKICAgICAqIG1lc3NhZ2UtaWRzIG9s\nZGVyIHRoYW4gdGhlIG9uZSBzcGVjaWZpZWQKICAgICAqLwogICAgQE92ZXJy\naWRlCiAgICBwdWJsaWMgdm9pZCBkZWxpdmVyZWRVbnRpbChCeXRlU3RyaW5n\nIHRvcGljLCBMb25nIHNlcUlkKSB7CiAgICAgICAgZW5xdWV1ZVdpdGhvdXRG\nYWlsdXJlQnlUb3BpYyh0b3BpYywgbmV3IERlbGl2ZXJlZFVudGlsKHRvcGlj\nLCBzZXFJZCkpOwogICAgfQoKICAgIC8qKgogICAgICogQW5vdGhlciBtZXRo\nb2QgZnJvbSB7QGxpbmsgUGVyc2lzdGVuY2VNYW5hZ2VyfS4KICAgICAqCiAg\nICAgKiBTaW5jZSB0aGlzIGlzIGEgY2FjaGUgbGF5ZXIgb24gdG9wIG9mIGFu\nIHVuZGVybHlpbmcgcGVyc2lzdGVuY2UgbWFuYWdlciwKICAgICAqIHdlIGNh\nbiBqdXN0IGNhbGwgdGhlIGNvbnN1bWVkVW50aWwgbWV0aG9kIHRoZXJlLiBU\naGUgbWVzc2FnZXMgb2xkZXIgdGhhbgogICAgICogdGhlIGxhdGVzdCBvbmUg\ncGFzc2VkIGhlcmUgd29uJ3QgYmUgYWNjZXNzZWQgYW55bW9yZSBzbyB0aGV5\nIHNob3VsZCBqdXN0CiAgICAgKiBnZXQgYWdlZCBvdXQgb2YgdGhlIGNhY2hl\nIGV2ZW50dWFsbHkuIEZvciBub3csIHRoZXJlIGlzIG5vIG5lZWQgdG8KICAg\nICAqIHByb2FjdGl2ZWx5IHJlbW92ZSB0aG9zZSBlbnRyaWVzIGZyb20gdGhl\nIGNhY2hlLgogICAgICovCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lk\nIGNvbnN1bWVkVW50aWwoQnl0ZVN0cmluZyB0b3BpYywgTG9uZyBzZXFJZCkg\newogICAgICAgIHJlYWxQZXJzaXN0ZW5jZU1hbmFnZXIuY29uc3VtZWRVbnRp\nbCh0b3BpYywgc2VxSWQpOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVi\nbGljIHZvaWQgc2V0TWVzc2FnZUJvdW5kKEJ5dGVTdHJpbmcgdG9waWMsIElu\ndGVnZXIgYm91bmQpIHsKICAgICAgICByZWFsUGVyc2lzdGVuY2VNYW5hZ2Vy\nLnNldE1lc3NhZ2VCb3VuZCh0b3BpYywgYm91bmQpOwogICAgfQoKICAgIEBP\ndmVycmlkZQogICAgcHVibGljIHZvaWQgY2xlYXJNZXNzYWdlQm91bmQoQnl0\nZVN0cmluZyB0b3BpYykgewogICAgICAgIHJlYWxQZXJzaXN0ZW5jZU1hbmFn\nZXIuY2xlYXJNZXNzYWdlQm91bmQodG9waWMpOwogICAgfQoKICAgIEBPdmVy\ncmlkZQogICAgcHVibGljIHZvaWQgY29uc3VtZVRvQm91bmQoQnl0ZVN0cmlu\nZyB0b3BpYykgewogICAgICAgIHJlYWxQZXJzaXN0ZW5jZU1hbmFnZXIuY29u\nc3VtZVRvQm91bmQodG9waWMpOwogICAgfQoKICAgIC8qKgogICAgICogU3Rv\ncCB0aGUgcmVhZGFoZWFkIGNhY2hlLgogICAgICovCiAgICBAT3ZlcnJpZGUK\nICAgIHB1YmxpYyB2b2lkIHN0b3AoKSB7CiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAga2VlcFJ1bm5pbmcgPSBmYWxzZTsKICAgICAgICAgICAgY2FjaGVX\nb3JrZXJzLnNodXRkb3duKCk7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9u\nIGUpIHsKICAgICAgICAgICAgbG9nZ2VyLndhcm4oIkZhaWxlZCB0byBzaHV0\nIGRvd24gY2FjaGUgd29ya2VycyA6ICIsIGUpOwogICAgICAgIH0KICAgIH0K\nCiAgICAvKioKICAgICAqIFRoZSByZWFkYWhlYWQgcG9saWN5IGlzIHNpbXBs\nZTogV2UgY2hlY2sgaWYgYW4gZW50cnkgYWxyZWFkeSBleGlzdHMgZm9yCiAg\nICAgKiB0aGUgbWVzc2FnZSBiZWluZyByZXF1ZXN0ZWQuIElmIGFuIGVudHJ5\nIGV4aXN0cywgaXQgbWVhbnMgdGhhdCBlaXRoZXIKICAgICAqIHRoYXQgbWVz\nc2FnZSBpcyBhbHJlYWR5IGluIHRoZSBjYWNoZSwgb3IgYSByZWFkIGZvciB0\naGF0IG1lc3NhZ2UgaXMKICAgICAqIG91dHN0YW5kaW5nLiBJbiB0aGF0IGNh\nc2UsIHdlIGxvb2sgYSBsaXR0bGUgYWhlYWQgKGJ5IHJlYWRBaGVhZENvdW50\nLzIpCiAgICAgKiBhbmQgaXNzdWUgYSByYW5nZSByZWFkIG9mIHJlYWRBaGVh\nZENvdW50LzIgbWVzc2FnZXMuIFRoZSBpZGVhIGlzIHRvCiAgICAgKiBlbnN1\ncmUgdGhhdCB0aGUgbmV4dCByZWFkQWhlYWRDb3VudCBtZXNzYWdlcyBhcmUg\nYWx3YXlzIGF2YWlsYWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJuIHRoZSBy\nYW5nZSBzY2FuIHRoYXQgc2hvdWxkIGJlIGlzc3VlZCBmb3IgcmVhZCBhaGVh\nZAogICAgICovCiAgICBwcm90ZWN0ZWQgUmFuZ2VTY2FuUmVxdWVzdCBkb1Jl\nYWRBaGVhZChTY2FuUmVxdWVzdCByZXF1ZXN0KSB7CiAgICAgICAgQnl0ZVN0\ncmluZyB0b3BpYyA9IHJlcXVlc3QuZ2V0VG9waWMoKTsKICAgICAgICBMb25n\nIHNlcUlkID0gcmVxdWVzdC5nZXRTdGFydFNlcUlkKCk7CgogICAgICAgIGlu\ndCByZWFkQWhlYWRDb3VudCA9IGNmZy5nZXRSZWFkQWhlYWRDb3VudCgpOwog\nICAgICAgIC8vIFRvIHByZXZlbnQgdXMgZnJvbSBnZXR0aW5nIHNjcmV3ZWQg\nYnkgYmFkIGNvbmZpZ3VyYXRpb24KICAgICAgICByZWFkQWhlYWRDb3VudCA9\nIE1hdGgubWF4KDEsIHJlYWRBaGVhZENvdW50KTsKCiAgICAgICAgUmFuZ2VT\nY2FuUmVxdWVzdCByZWFkQWhlYWRSZXF1ZXN0ID0gZG9SZWFkQWhlYWRTdGFy\ndGluZ0Zyb20odG9waWMsIHNlcUlkLCByZWFkQWhlYWRDb3VudCk7CgogICAg\nICAgIGlmIChyZWFkQWhlYWRSZXF1ZXN0ICE9IG51bGwpIHsKICAgICAgICAg\nICAgcmV0dXJuIHJlYWRBaGVhZFJlcXVlc3Q7CiAgICAgICAgfQoKICAgICAg\nICAvLyBzdGFydCBrZXkgd2FzIGFscmVhZHkgdGhlcmUgaW4gdGhlIGNhY2hl\nIHNvIG5vIHJlYWRhaGVhZCBoYXBwZW5lZCwKICAgICAgICAvLyBsZXRzIGxv\nb2sgYSBsaXR0bGUgYmV5b25kCiAgICAgICAgc2VxSWQgPSByZWFsUGVyc2lz\ndGVuY2VNYW5hZ2VyLmdldFNlcUlkQWZ0ZXJTa2lwcGluZyh0b3BpYywgc2Vx\nSWQsIHJlYWRBaGVhZENvdW50IC8gMik7CgogICAgICAgIHJlYWRBaGVhZFJl\ncXVlc3QgPSBkb1JlYWRBaGVhZFN0YXJ0aW5nRnJvbSh0b3BpYywgc2VxSWQs\nIHJlYWRBaGVhZENvdW50IC8gMik7CgogICAgICAgIHJldHVybiByZWFkQWhl\nYWRSZXF1ZXN0OwogICAgfQoKICAgIC8qKgogICAgICogVGhpcyBtZXRob2Qg\nanVzdCBjaGVja3MgaWYgdGhlIHByb3ZpZGVkIHNlcS1pZCBhbHJlYWR5IGV4\naXN0cyBpbiB0aGUKICAgICAqIGNhY2hlLiBJZiBub3QsIGEgcmFuZ2UgcmVh\nZCBvZiB0aGUgc3BlY2lmaWVkIGFtb3VudCBpcyBpc3N1ZWQuCiAgICAgKgog\nICAgICogQHBhcmFtIHRvcGljCiAgICAgKiBAcGFyYW0gc2VxSWQKICAgICAq\nIEBwYXJhbSByZWFkQWhlYWRDb3VudAogICAgICogQHJldHVybiBUaGUgcmFu\nZ2UgcmVhZCB0aGF0IHNob3VsZCBiZSBpc3N1ZWQKICAgICAqLwogICAgcHJv\ndGVjdGVkIFJhbmdlU2NhblJlcXVlc3QgZG9SZWFkQWhlYWRTdGFydGluZ0Zy\nb20oQnl0ZVN0cmluZyB0b3BpYywgbG9uZyBzZXFJZCwgaW50IHJlYWRBaGVh\nZENvdW50KSB7CgogICAgICAgIGxvbmcgc3RhcnRTZXFJZCA9IHNlcUlkOwog\nICAgICAgIFF1ZXVlPENhY2hlS2V5PiBpbnN0YWxsZWRTdHVicyA9IG5ldyBM\naW5rZWRMaXN0PENhY2hlS2V5PigpOwoKICAgICAgICBpbnQgaSA9IDA7Cgog\nICAgICAgIGZvciAoOyBpIDwgcmVhZEFoZWFkQ291bnQ7IGkrKykgewogICAg\nICAgICAgICBDYWNoZUtleSBjYWNoZUtleSA9IG5ldyBDYWNoZUtleSh0b3Bp\nYywgc2VxSWQpOwoKICAgICAgICAgICAgLy8gRXZlbiBpZiBhIHN0dWIgZXhp\nc3RzLCBpdCBtZWFucyB0aGF0IGEgc2NhbiBmb3IgdGhhdCBpcwogICAgICAg\nICAgICAvLyBvdXRzdGFuZGluZwogICAgICAgICAgICBpZiAoY2FjaGUuY29u\ndGFpbnNLZXkoY2FjaGVLZXkpKSB7CiAgICAgICAgICAgICAgICBicmVhazsK\nICAgICAgICAgICAgfQogICAgICAgICAgICBDYWNoZVZhbHVlIGNhY2hlVmFs\ndWUgPSBuZXcgQ2FjaGVWYWx1ZSgpOwogICAgICAgICAgICBpZiAobnVsbCAh\nPSBjYWNoZS5wdXRJZkFic2VudChjYWNoZUtleSwgY2FjaGVWYWx1ZSkpIHsK\nICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCJJdCBpcyB1bmV4cGVjdGVk\nIHRoYXQgbW9yZSB0aGFuIG9uZSB0aHJlYWRzIGFyZSBhZGRpbmcgbWVzc2Fn\nZSB0byBjYWNoZSBrZXkge30iCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICArIiBhdCB0aGUgc2FtZSB0aW1lLiIsIGNhY2hlS2V5KTsKICAgICAgICAg\nICAgfQoKICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCJBZGRpbmcgY2FjaGUg\nc3R1YiBmb3I6IHt9IiwgY2FjaGVLZXkpOwogICAgICAgICAgICBpbnN0YWxs\nZWRTdHVicy5hZGQoY2FjaGVLZXkpOwoKICAgICAgICAgICAgc2VxSWQgPSBy\nZWFsUGVyc2lzdGVuY2VNYW5hZ2VyLmdldFNlcUlkQWZ0ZXJTa2lwcGluZyh0\nb3BpYywgc2VxSWQsIDEpOwogICAgICAgIH0KCiAgICAgICAgLy8gc28gaG93\nIG1hbnkgZGlkIHdlIGRlY2lkZSB0byByZWFkYWhlYWQKICAgICAgICBpZiAo\naSA9PSAwKSB7CiAgICAgICAgICAgIC8vIG5vIHJlYWRhaGVhZCwgaGVuY2Ug\ncmV0dXJuIGZhbHNlCiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAg\nIH0KCiAgICAgICAgbG9uZyByZWFkQWhlYWRTaXplTGltaXQgPSBjZmcuZ2V0\nUmVhZEFoZWFkU2l6ZUJ5dGVzKCk7CiAgICAgICAgUmVhZEFoZWFkU2NhbkNh\nbGxiYWNrIGNhbGxiYWNrID0gbmV3IFJlYWRBaGVhZFNjYW5DYWxsYmFjayhp\nbnN0YWxsZWRTdHVicywgdG9waWMpOwogICAgICAgIFJhbmdlU2NhblJlcXVl\nc3QgcmFuZ2VTY2FuUmVxdWVzdCA9IG5ldyBSYW5nZVNjYW5SZXF1ZXN0KHRv\ncGljLCBzdGFydFNlcUlkLCBpLCByZWFkQWhlYWRTaXplTGltaXQsIGNhbGxi\nYWNrLAogICAgICAgICAgICAgICAgbnVsbCk7CgogICAgICAgIHJldHVybiBy\nYW5nZVNjYW5SZXF1ZXN0OwoKICAgIH0KCiAgICAvKioKICAgICAqIFRoaXMg\naXMgdGhlIGNhbGxiYWNrIHRoYXQgaXMgdXNlZCBmb3IgdGhlIHJhbmdlIHNj\nYW5zLgogICAgICovCiAgICBwcm90ZWN0ZWQgY2xhc3MgUmVhZEFoZWFkU2Nh\nbkNhbGxiYWNrIGltcGxlbWVudHMgU2NhbkNhbGxiYWNrIHsKICAgICAgICBR\ndWV1ZTxDYWNoZUtleT4gaW5zdGFsbGVkU3R1YnM7CiAgICAgICAgQnl0ZVN0\ncmluZyB0b3BpYzsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ29uc3RydWN0\nb3IKICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBpbnN0YWxsZWRTdHVi\ncwogICAgICAgICAqICAgICAgICAgICAgVGhlIGxpc3Qgb2Ygc3R1YnMgdGhh\ndCB3ZXJlIGluc3RhbGxlZCBmb3IgdGhpcyByYW5nZSBzY2FuCiAgICAgICAg\nICogQHBhcmFtIHRvcGljCiAgICAgICAgICovCiAgICAgICAgcHVibGljIFJl\nYWRBaGVhZFNjYW5DYWxsYmFjayhRdWV1ZTxDYWNoZUtleT4gaW5zdGFsbGVk\nU3R1YnMsIEJ5dGVTdHJpbmcgdG9waWMpIHsKICAgICAgICAgICAgdGhpcy5p\nbnN0YWxsZWRTdHVicyA9IGluc3RhbGxlZFN0dWJzOwogICAgICAgICAgICB0\naGlzLnRvcGljID0gdG9waWM7CiAgICAgICAgfQoKICAgICAgICBAT3ZlcnJp\nZGUKICAgICAgICBwdWJsaWMgdm9pZCBtZXNzYWdlU2Nhbm5lZChPYmplY3Qg\nY3R4LCBNZXNzYWdlIG1lc3NhZ2UpIHsKCiAgICAgICAgICAgIC8vIEFueSBt\nZXNzYWdlIHdlIHJlYWQgaXMgcG90ZW50aWFsbHkgdXNlZnVsIGZvciB1cywg\nc28gbGV0cyBmaXJzdAogICAgICAgICAgICAvLyBlbnF1ZXVlIGl0CiAgICAg\nICAgICAgIENhY2hlS2V5IGNhY2hlS2V5ID0gbmV3IENhY2hlS2V5KHRvcGlj\nLCBtZXNzYWdlLmdldE1zZ0lkKCkuZ2V0TG9jYWxDb21wb25lbnQoKSk7CiAg\nICAgICAgICAgIGVucXVldWVXaXRob3V0RmFpbHVyZUJ5VG9waWModG9waWMs\nIG5ldyBTY2FuUmVzcG9uc2UoY2FjaGVLZXksIG1lc3NhZ2UpKTsKCiAgICAg\nICAgICAgIC8vIE5vdyBsZXRzIHNlZSBpZiB0aGlzIG1lc3NhZ2UgaXMgdGhl\nIG9uZSB3ZSB3ZXJlIGV4cGVjdGluZwogICAgICAgICAgICBDYWNoZUtleSBl\neHBlY3RlZEtleSA9IGluc3RhbGxlZFN0dWJzLnBlZWsoKTsKCiAgICAgICAg\nICAgIGlmIChleHBlY3RlZEtleSA9PSBudWxsKSB7CiAgICAgICAgICAgICAg\nICAvLyBXYXMgbm90IGV4cGVjdGluZyBhbnkgbW9yZSBtZXNzYWdlcyB0byBj\nb21lIGluLCBidXQgdGhleSBjYW1lCiAgICAgICAgICAgICAgICAvLyBpbiBz\nbyB3ZSB3aWxsIGtlZXAgdGhlbQogICAgICAgICAgICAgICAgcmV0dXJuOwog\nICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoZXhwZWN0ZWRLZXkuZXF1\nYWxzKGNhY2hlS2V5KSkgewogICAgICAgICAgICAgICAgLy8gd2hhdCB3ZSBn\nb3QgaXMgd2hhdCB3ZSBleHBlY3RlZCwgZGVxdWV1ZSBpdCBzbyB3ZSBnZXQg\ndGhlCiAgICAgICAgICAgICAgICAvLyBuZXh0IGV4cGVjdGVkIG9uZQogICAg\nICAgICAgICAgICAgaW5zdGFsbGVkU3R1YnMucG9sbCgpOwogICAgICAgICAg\nICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBJ\nZiByZWFjaGVkIGhlcmUsIHdoYXQgd2Ugc2Nhbm5lZCB3YXMgbm90IHdoYXQg\nd2Ugd2VyZSBleHBlY3RpbmcuCiAgICAgICAgICAgIC8vIFRoaXMgbWVhbnMg\ndGhhdCB3ZSBoYXZlIHdyb25nIHN0dWJzIGluc3RhbGxlZCBpbiB0aGUgY2Fj\naGUuIFdlCiAgICAgICAgICAgIC8vIHNob3VsZCByZW1vdmUgdGhlbSwgc28g\ndGhhdCB3aG9ldmVyIGlzIHdhaXRpbmcgb24gdGhlbSBjYW4gcmV0cnkuCiAg\nICAgICAgICAgIC8vIFRoaXMgc2hvdWxkbid0IGJlIGhhcHBlbmluZyB1c3Vh\nbGx5CiAgICAgICAgICAgIGxvZ2dlci53YXJuKCJVbmV4cGVjdGVkIG1lc3Nh\nZ2Ugc2VxLWlkOiAiICsgbWVzc2FnZS5nZXRNc2dJZCgpLmdldExvY2FsQ29t\ncG9uZW50KCkgKyAiIG9uIHRvcGljOiAiCiAgICAgICAgICAgICAgICAgICAg\nICAgICsgdG9waWMudG9TdHJpbmdVdGY4KCkgKyAiIGZyb20gcmVhZGFoZWFk\nIHNjYW4sIHdhcyBleHBlY3Rpbmcgc2VxLWlkOiAiICsgZXhwZWN0ZWRLZXku\nc2VxSWQKICAgICAgICAgICAgICAgICAgICAgICAgKyAiIHRvcGljOiAiICsg\nZXhwZWN0ZWRLZXkudG9waWMudG9TdHJpbmdVdGY4KCkgKyAiIGluc3RhbGxl\nZFN0dWJzOiAiICsgaW5zdGFsbGVkU3R1YnMpOwogICAgICAgICAgICBlbnF1\nZXVlRGVsZXRlT2ZSZW1haW5pbmdTdHVicyhub1N1Y2hTZXFJZEV4Y2VwdGlv\nbkluc3RhbmNlKTsKCiAgICAgICAgfQoKICAgICAgICBAT3ZlcnJpZGUKICAg\nICAgICBwdWJsaWMgdm9pZCBzY2FuRmFpbGVkKE9iamVjdCBjdHgsIEV4Y2Vw\ndGlvbiBleGNlcHRpb24pIHsKICAgICAgICAgICAgZW5xdWV1ZURlbGV0ZU9m\nUmVtYWluaW5nU3R1YnMoZXhjZXB0aW9uKTsKICAgICAgICB9CgogICAgICAg\nIEBPdmVycmlkZQogICAgICAgIHB1YmxpYyB2b2lkIHNjYW5GaW5pc2hlZChP\nYmplY3QgY3R4LCBSZWFzb25Gb3JGaW5pc2ggcmVhc29uKSB7CiAgICAgICAg\nICAgIC8vIElmIHRoZSBzY2FuIGZpbmlzaGVkIGJlY2F1c2Ugbm8gbW9yZSBt\nZXNzYWdlcyBhcmUgcHJlc2VudCwgaXRzIG9rCiAgICAgICAgICAgIC8vIHRv\nIGxlYXZlIHRoZSBzdHVicyBpbiBwbGFjZSBiZWNhdXNlIHRoZXkgd2lsbCBn\nZXQgZmlsbGVkIGluIGFzCiAgICAgICAgICAgIC8vIG5ldyBwdWJsaXNoZXMg\naGFwcGVuLiBIb3dldmVyLCBpZiB0aGUgc2NhbiBmaW5pc2hlZCBkdWUgdG8g\nc29tZQogICAgICAgICAgICAvLyBvdGhlciByZWFzb24sIGUuZy4sIHJlYWQg\nYWhlYWQgc2l6ZSBsaW1pdCB3YXMgcmVhY2hlZCwgd2Ugd2FudCB0bwogICAg\nICAgICAgICAvLyBkZWxldGUgdGhlIHN0dWJzLCBzbyB0aGF0IHdoZW4gdGhl\nIHRpbWUgY29tZXMsIHdlIGNhbiBzY2hlZHVsZQogICAgICAgICAgICAvLyBh\nbm90aGVyIHJlYWRhaGVhZCByZXF1ZXN0LgogICAgICAgICAgICBpZiAocmVh\nc29uICE9IFJlYXNvbkZvckZpbmlzaC5OT19NT1JFX01FU1NBR0VTKSB7CiAg\nICAgICAgICAgICAgICBlbnF1ZXVlRGVsZXRlT2ZSZW1haW5pbmdTdHVicyhy\nZWFkQWhlYWRFeGNlcHRpb25JbnN0YW5jZSk7CiAgICAgICAgICAgIH0KICAg\nICAgICB9CgogICAgICAgIHByaXZhdGUgdm9pZCBlbnF1ZXVlRGVsZXRlT2ZS\nZW1haW5pbmdTdHVicyhFeGNlcHRpb24gcmVhc29uKSB7CiAgICAgICAgICAg\nIENhY2hlS2V5IGluc3RhbGxlZFN0dWI7CiAgICAgICAgICAgIHdoaWxlICgo\naW5zdGFsbGVkU3R1YiA9IGluc3RhbGxlZFN0dWJzLnBvbGwoKSkgIT0gbnVs\nbCkgewogICAgICAgICAgICAgICAgZW5xdWV1ZVdpdGhvdXRGYWlsdXJlQnlU\nb3BpYyhpbnN0YWxsZWRTdHViLmdldFRvcGljKCksCiAgICAgICAgICAgICAg\nICAgICAgICAgIG5ldyBFeGNlcHRpb25PbkNhY2hlS2V5KGluc3RhbGxlZFN0\ndWIsIHJlYXNvbikpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoK\nICAgIHByb3RlY3RlZCBzdGF0aWMgY2xhc3MgSGFzaFNldENhY2hlS2V5RmFj\ndG9yeSBpbXBsZW1lbnRzIEZhY3Rvcnk8U2V0PENhY2hlS2V5Pj4gewogICAg\nICAgIHByb3RlY3RlZCBmaW5hbCBzdGF0aWMgSGFzaFNldENhY2hlS2V5RmFj\ndG9yeSBpbnN0YW5jZSA9IG5ldyBIYXNoU2V0Q2FjaGVLZXlGYWN0b3J5KCk7\nCgogICAgICAgIEBPdmVycmlkZQogICAgICAgIHB1YmxpYyBTZXQ8Q2FjaGVL\nZXk+IG5ld0luc3RhbmNlKCkgewogICAgICAgICAgICByZXR1cm4gbmV3IEhh\nc2hTZXQ8Q2FjaGVLZXk+KCk7CiAgICAgICAgfQogICAgfQoKICAgIHByb3Rl\nY3RlZCBzdGF0aWMgY2xhc3MgVHJlZVNldExvbmdGYWN0b3J5IGltcGxlbWVu\ndHMgRmFjdG9yeTxTb3J0ZWRTZXQ8TG9uZz4+IHsKICAgICAgICBwcm90ZWN0\nZWQgZmluYWwgc3RhdGljIFRyZWVTZXRMb25nRmFjdG9yeSBpbnN0YW5jZSA9\nIG5ldyBUcmVlU2V0TG9uZ0ZhY3RvcnkoKTsKCiAgICAgICAgQE92ZXJyaWRl\nCiAgICAgICAgcHVibGljIFNvcnRlZFNldDxMb25nPiBuZXdJbnN0YW5jZSgp\nIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBUcmVlU2V0PExvbmc+KCk7CiAg\nICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogRm9yIGFkZGluZyB0aGUg\nbWVzc2FnZSB0byB0aGUgY2FjaGUsIHdlIGRvIHNvbWUgYm9va2VlcGluZyBz\ndWNoIGFzIHRoZQogICAgICogdG90YWwgc2l6ZSBvZiBjYWNoZSwgb3JkZXIg\naW4gd2hpY2ggZW50cmllcyB3ZXJlIGFkZGVkIGV0Yy4gSWYgdGhlIHNpemUK\nICAgICAqIG9mIHRoZSBjYWNoZSBoYXMgZXhjZWVkZWQgb3VyIGJ1ZGdldCwg\nb2xkIGVudHJpZXMgYXJlIGNvbGxlY3RlZC4KICAgICAqCiAgICAgKiBAcGFy\nYW0gY2FjaGVLZXkKICAgICAqIEBwYXJhbSBtZXNzYWdlCiAgICAgKi8KICAg\nIHByb3RlY3RlZCB2b2lkIGFkZE1lc3NhZ2VUb0NhY2hlKGZpbmFsIENhY2hl\nS2V5IGNhY2hlS2V5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgZmluYWwgTWVzc2FnZSBtZXNzYWdlLCBmaW5hbCBsb25nIGN1cnJU\naW1lKSB7CiAgICAgICAgbG9nZ2VyLmRlYnVnKCJBZGRpbmcgbXNnIHt9IHRv\nIHJlYWRhaGVhZCBjYWNoZSIsIGNhY2hlS2V5KTsKCiAgICAgICAgQ2FjaGVW\nYWx1ZSBjYWNoZVZhbHVlOwogICAgICAgIGlmICgoY2FjaGVWYWx1ZSA9IGNh\nY2hlLmdldChjYWNoZUtleSkpID09IG51bGwpIHsKICAgICAgICAgICAgY2Fj\naGVWYWx1ZSA9IG5ldyBDYWNoZVZhbHVlKCk7CiAgICAgICAgICAgIENhY2hl\nVmFsdWUgb2xkVmFsdWUgPSBjYWNoZS5wdXRJZkFic2VudChjYWNoZUtleSwg\nY2FjaGVWYWx1ZSk7CiAgICAgICAgICAgIGlmIChudWxsICE9IG9sZFZhbHVl\nKSB7CiAgICAgICAgICAgICAgICBsb2dnZXIud2FybigiV2VpcmQhIFNob3Vs\nZCBub3QgaGF2ZSB0d28gdGhyZWFkcyBhZGRpbmcgbWVzc2FnZSB0byBjYWNo\nZSBrZXkge30gYXQgdGhlIHNhbWUgdGltZS4iLAogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgY2FjaGVLZXkpOwogICAgICAgICAgICAgICAgY2FjaGVW\nYWx1ZSA9IG9sZFZhbHVlOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAg\nICAgICBDYWNoZVNlZ21lbnQgc2VnbWVudCA9IGNhY2hlU2VnbWVudC5nZXQo\nKTsKICAgICAgICBpZiAoY2FjaGVWYWx1ZS5pc1N0dWIoKSkgeyAvLyB1cGRh\ndGUgY2FjaGUgc2l6ZSBvbmx5IHdoZW4gY2FjaGUgdmFsdWUgaXMgYSBzdHVi\nCiAgICAgICAgICAgIGludCBzaXplID0gbWVzc2FnZS5nZXRCb2R5KCkuc2l6\nZSgpOwoKICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSBjYWNoZSBzaXplCiAg\nICAgICAgICAgIHNlZ21lbnQucHJlc2VudFNlZ21lbnRTaXplLmFkZEFuZEdl\ndChzaXplKTsKICAgICAgICAgICAgcHJlc2VudENhY2hlU2l6ZS5hZGRBbmRH\nZXQoc2l6ZSk7CiAgICAgICAgfQoKICAgICAgICBzeW5jaHJvbml6ZWQgKGNh\nY2hlVmFsdWUpIHsKICAgICAgICAgICAgLy8gZmluYWxseSBhZGQgdGhlIG1l\nc3NhZ2UgdG8gdGhlIGNhY2hlCiAgICAgICAgICAgIGNhY2hlVmFsdWUuc2V0\nTWVzc2FnZUFuZEludm9rZUNhbGxiYWNrcyhtZXNzYWdlLCBjdXJyVGltZSk7\nCiAgICAgICAgfQoKICAgICAgICAvLyBtYWludGFpbiB0aGUgaW5kZXggb2Yg\nc2VxLWlkCiAgICAgICAgLy8gbm8gbG9jayBzaW5jZSB0aHJlYWRzIGFyZSBw\nYXJ0aXRpb25lZCBieSB0b3BpY3MKICAgICAgICBNYXBNZXRob2RzLmFkZFRv\nTXVsdGlNYXAob3JkZXJlZEluZGV4T25TZXFJZCwgY2FjaGVLZXkuZ2V0VG9w\naWMoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVL\nZXkuZ2V0U2VxSWQoKSwgVHJlZVNldExvbmdGYWN0b3J5Lmluc3RhbmNlKTsK\nCiAgICAgICAgLy8gbWFpbnRhaW4gdGhlIHRpbWUgaW5kZXggb2YgYWRkaXRp\nb24KICAgICAgICBNYXBNZXRob2RzLmFkZFRvTXVsdGlNYXAoc2VnbWVudC50\naW1lSW5kZXhPZkFkZGl0aW9uLCBjdXJyVGltZSwKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgY2FjaGVLZXksIEhhc2hTZXRDYWNoZUtleUZh\nY3RvcnkuaW5zdGFuY2UpOwoKICAgICAgICBjb2xsZWN0T2xkT3JFeHBpcmVk\nQ2FjaGVFbnRyaWVzKHNlZ21lbnQpOwogICAgfQoKICAgIHByb3RlY3RlZCB2\nb2lkIHJlbW92ZU1lc3NhZ2VGcm9tQ2FjaGUoZmluYWwgQ2FjaGVLZXkgY2Fj\naGVLZXksIEV4Y2VwdGlvbiBleGNlcHRpb24sCiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsIGJvb2xlYW4gbWFpbnRh\naW5UaW1lSW5kZXgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgIGZpbmFsIGJvb2xlYW4gbWFpbnRhaW5TZXFJZEluZGV4KSB7\nCiAgICAgICAgQ2FjaGVWYWx1ZSBjYWNoZVZhbHVlID0gY2FjaGUucmVtb3Zl\nKGNhY2hlS2V5KTsKCiAgICAgICAgaWYgKGNhY2hlVmFsdWUgPT0gbnVsbCkg\newogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBDYWNo\nZVNlZ21lbnQgc2VnbWVudCA9IGNhY2hlU2VnbWVudC5nZXQoKTsKCiAgICAg\nICAgbG9uZyB0aW1lT2ZBZGRpdGlvbiA9IDA7CiAgICAgICAgc3luY2hyb25p\nemVkIChjYWNoZVZhbHVlKSB7CiAgICAgICAgICAgIGlmIChjYWNoZVZhbHVl\nLmlzU3R1YigpKSB7CiAgICAgICAgICAgICAgICBjYWNoZVZhbHVlLnNldEVy\ncm9yQW5kSW52b2tlQ2FsbGJhY2tzKGV4Y2VwdGlvbik7CiAgICAgICAgICAg\nICAgICAvLyBTdHVicyBhcmUgbm90IHByZXNlbnQgaW4gdGhlIGluZGV4ZXMs\nIHNvIGRvbid0IG5lZWQgdG8gbWFpbnRhaW4KICAgICAgICAgICAgICAgIC8v\nIGluZGV4ZXMgaGVyZQogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAg\nICAgICB9CgogICAgICAgICAgICBpbnQgc2l6ZSA9IDAgLSBjYWNoZVZhbHVl\nLmdldE1lc3NhZ2UoKS5nZXRCb2R5KCkuc2l6ZSgpOwogICAgICAgICAgICBw\ncmVzZW50Q2FjaGVTaXplLmFkZEFuZEdldChzaXplKTsKICAgICAgICAgICAg\nc2VnbWVudC5wcmVzZW50U2VnbWVudFNpemUuYWRkQW5kR2V0KHNpemUpOwog\nICAgICAgICAgICB0aW1lT2ZBZGRpdGlvbiA9IGNhY2hlVmFsdWUuZ2V0VGlt\nZU9mQWRkaXRpb24oKTsKICAgICAgICB9CgogICAgICAgIGlmIChtYWludGFp\nblNlcUlkSW5kZXgpIHsKICAgICAgICAgICAgTWFwTWV0aG9kcy5yZW1vdmVG\ncm9tTXVsdGlNYXAob3JkZXJlZEluZGV4T25TZXFJZCwgY2FjaGVLZXkuZ2V0\nVG9waWMoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgY2FjaGVLZXkuZ2V0U2VxSWQoKSk7CiAgICAgICAgfQogICAgICAg\nIGlmIChtYWludGFpblRpbWVJbmRleCkgewogICAgICAgICAgICBNYXBNZXRo\nb2RzLnJlbW92ZUZyb21NdWx0aU1hcChzZWdtZW50LnRpbWVJbmRleE9mQWRk\naXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIHRpbWVPZkFkZGl0aW9uLCBjYWNoZUtleSk7CiAgICAgICAgfQogICAg\nfQoKICAgIC8qKgogICAgICogQ29sbGVjdGlvbiBvZiBvbGQgZW50cmllcyBp\ncyBzaW1wbGUuIEp1c3QgY29sbGVjdCBpbiBpbnNlcnQtdGltZSBvcmRlciwK\nICAgICAqIG9sZGVzdCB0byBuZXdlc3QuCiAgICAgKi8KICAgIHByb3RlY3Rl\nZCB2b2lkIGNvbGxlY3RPbGRPckV4cGlyZWRDYWNoZUVudHJpZXMoQ2FjaGVT\nZWdtZW50IHNlZ21lbnQpIHsKICAgICAgICBpZiAoY2FjaGVFbnRyeVRUTCA+\nIDApIHsKICAgICAgICAgICAgLy8gY2xlYXIgZXhwaXJlZCBlbnRyaWVzCiAg\nICAgICAgICAgIHdoaWxlICghc2VnbWVudC50aW1lSW5kZXhPZkFkZGl0aW9u\nLmlzRW1wdHkoKSkgewogICAgICAgICAgICAgICAgTG9uZyBlYXJsaWVzdFRp\nbWUgPSBzZWdtZW50LnRpbWVJbmRleE9mQWRkaXRpb24uZmlyc3RLZXkoKTsK\nICAgICAgICAgICAgICAgIGlmIChNYXRoVXRpbHMubm93KCkgLSBlYXJsaWVz\ndFRpbWUgPCBjYWNoZUVudHJ5VFRMKSB7CiAgICAgICAgICAgICAgICAgICAg\nYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjb2xs\nZWN0Q2FjaGVFbnRyaWVzQXRUaW1lc3RhbXAoc2VnbWVudCwgZWFybGllc3RU\naW1lKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgd2hpbGUg\nKHNlZ21lbnQucHJlc2VudFNlZ21lbnRTaXplLmdldCgpID4gbWF4U2VnbWVu\ndFNpemUgJiYKICAgICAgICAgICAgICAgIXNlZ21lbnQudGltZUluZGV4T2ZB\nZGRpdGlvbi5pc0VtcHR5KCkpIHsKICAgICAgICAgICAgTG9uZyBlYXJsaWVz\ndFRpbWUgPSBzZWdtZW50LnRpbWVJbmRleE9mQWRkaXRpb24uZmlyc3RLZXko\nKTsKICAgICAgICAgICAgY29sbGVjdENhY2hlRW50cmllc0F0VGltZXN0YW1w\nKHNlZ21lbnQsIGVhcmxpZXN0VGltZSk7CiAgICAgICAgfQogICAgfQoKICAg\nIHByaXZhdGUgdm9pZCBjb2xsZWN0Q2FjaGVFbnRyaWVzQXRUaW1lc3RhbXAo\nQ2FjaGVTZWdtZW50IHNlZ21lbnQsIGxvbmcgdGltZXN0YW1wKSB7CiAgICAg\nICAgU2V0PENhY2hlS2V5PiBvbGRDYWNoZUVudHJpZXMgPSBzZWdtZW50LnRp\nbWVJbmRleE9mQWRkaXRpb24uZ2V0KHRpbWVzdGFtcCk7CgogICAgICAgIC8v\nIE5vdGU6IG9ubHkgY29uY3JldGUgY2FjaGUgZW50cmllcywgYW5kIG5vdCBz\ndHVicyBhcmUgaW4gdGhlIHRpbWUKICAgICAgICAvLyBpbmRleC4gSGVuY2Ug\ndGhlcmUgY2FuIGJlIG5vIGNhbGxiYWNrcyBwZW5kaW5nIG9uIHRoZXNlIGNh\nY2hlCiAgICAgICAgLy8gZW50cmllcy4gSGVuY2Ugc2FmZSB0byByZW1vdmUg\ndGhlbSBkaXJlY3RseS4KICAgICAgICBmb3IgKEl0ZXJhdG9yPENhY2hlS2V5\nPiBpdGVyID0gb2xkQ2FjaGVFbnRyaWVzLml0ZXJhdG9yKCk7IGl0ZXIuaGFz\nTmV4dCgpOykgewogICAgICAgICAgICBmaW5hbCBDYWNoZUtleSBjYWNoZUtl\neSA9IGl0ZXIubmV4dCgpOwoKICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCJS\nZW1vdmluZyB7fSBmcm9tIGNhY2hlIGJlY2F1c2UgaXQncyB0aGUgb2xkZXN0\nLiIsIGNhY2hlS2V5KTsKICAgICAgICAgICAgcmVtb3ZlTWVzc2FnZUZyb21D\nYWNoZShjYWNoZUtleSwgcmVhZEFoZWFkRXhjZXB0aW9uSW5zdGFuY2UsIC8v\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWFpbnRh\naW5UaW1lSW5kZXg9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nLy8gbWFpbnRhaW5TZXFJZEluZGV4PQogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgIHRydWUpOwogICAgICAgIH0KCiAgICAgICAgc2VnbWVu\ndC50aW1lSW5kZXhPZkFkZGl0aW9uLnJlbW92ZSh0aW1lc3RhbXApOwogICAg\nfQoKICAgIC8qKgogICAgICogPT09PT09PT09PT09PT09PT09PT09PT09PT09\nPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09\nCiAgICAgKiBUaGUgcmVzdCBpcyBqdXN0IHNpbXBsZSB3cmFwcGVyIGNsYXNz\nZXMuCiAgICAgKgogICAgICovCgogICAgcHJvdGVjdGVkIGNsYXNzIEV4Y2Vw\ndGlvbk9uQ2FjaGVLZXkgaW1wbGVtZW50cyBDYWNoZVJlcXVlc3QgewogICAg\nICAgIENhY2hlS2V5IGNhY2hlS2V5OwogICAgICAgIEV4Y2VwdGlvbiBleGNl\ncHRpb247CgogICAgICAgIHB1YmxpYyBFeGNlcHRpb25PbkNhY2hlS2V5KENh\nY2hlS2V5IGNhY2hlS2V5LCBFeGNlcHRpb24gZXhjZXB0aW9uKSB7CiAgICAg\nICAgICAgIHRoaXMuY2FjaGVLZXkgPSBjYWNoZUtleTsKICAgICAgICAgICAg\ndGhpcy5leGNlcHRpb24gPSBleGNlcHRpb247CiAgICAgICAgfQoKICAgICAg\nICAvKioKICAgICAgICAgKiBJZiBmb3Igc29tZSByZWFzb24sIGFuIG91dHN0\nYW5kaW5nIHJlYWQgb24gYSBjYWNoZSBzdHViIGZhaWxzLAogICAgICAgICAq\nIGV4Y2VwdGlvbiBmb3IgdGhhdCBrZXkgaXMgZW5xdWV1ZWQgYnkgdGhlCiAg\nICAgICAgICoge0BsaW5rIFJlYWRBaGVhZFNjYW5DYWxsYmFja30uIFRvIGhh\nbmRsZSB0aGlzLCB3ZSBzaW1wbHkgc2VuZCBlcnJvcgogICAgICAgICAqIG9u\nIHRoZSBjYWxsYmFja3MgcmVnaXN0ZXJlZCBmb3IgdGhhdCBzdHViLCBhbmQg\nZGVsZXRlIHRoZSBlbnRyeSBmcm9tCiAgICAgICAgICogdGhlIGNhY2hlCiAg\nICAgICAgICovCiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHVibGljIHZv\naWQgcGVyZm9ybVJlcXVlc3QoKSB7CiAgICAgICAgICAgIHJlbW92ZU1lc3Nh\nZ2VGcm9tQ2FjaGUoY2FjaGVLZXksIGV4Y2VwdGlvbiwKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAvLyBtYWludGFpblRpbWVJbmRleD0K\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlLAogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1haW50YWluU2Vx\nSWRJbmRleD0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0\ncnVlKTsKICAgICAgICB9CgogICAgfQoKICAgIEBTdXBwcmVzc1dhcm5pbmdz\nKCJzZXJpYWwiKQogICAgcHJvdGVjdGVkIHN0YXRpYyBjbGFzcyBOb1N1Y2hT\nZXFJZEV4Y2VwdGlvbiBleHRlbmRzIEV4Y2VwdGlvbiB7CgogICAgICAgIHB1\nYmxpYyBOb1N1Y2hTZXFJZEV4Y2VwdGlvbigpIHsKICAgICAgICAgICAgc3Vw\nZXIoIk5vIHN1Y2ggc2VxLWlkIik7CiAgICAgICAgfQogICAgfQoKICAgIEBT\ndXBwcmVzc1dhcm5pbmdzKCJzZXJpYWwiKQogICAgcHJvdGVjdGVkIHN0YXRp\nYyBjbGFzcyBSZWFkQWhlYWRFeGNlcHRpb24gZXh0ZW5kcyBFeGNlcHRpb24g\newogICAgICAgIHB1YmxpYyBSZWFkQWhlYWRFeGNlcHRpb24oKSB7CiAgICAg\nICAgICAgIHN1cGVyKCJSZWFkYWhlYWQgZmFpbGVkIik7CiAgICAgICAgfQog\nICAgfQoKICAgIHB1YmxpYyBjbGFzcyBDYW5jZWxTY2FuUmVxdWVzdE9wIGlt\ncGxlbWVudHMgQ2FjaGVSZXF1ZXN0IHsKCiAgICAgICAgZmluYWwgQ2FuY2Vs\nU2NhblJlcXVlc3QgcmVxdWVzdDsKCiAgICAgICAgcHVibGljIENhbmNlbFNj\nYW5SZXF1ZXN0T3AoQ2FuY2VsU2NhblJlcXVlc3QgcmVxdWVzdCkgewogICAg\nICAgICAgICB0aGlzLnJlcXVlc3QgPSByZXF1ZXN0OwogICAgICAgIH0KCiAg\nICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHVibGljIHZvaWQgcGVyZm9ybVJl\ncXVlc3QoKSB7CiAgICAgICAgICAgIC8vIGNhbmNlbCBzY2FuIHJlcXVlc3QK\nICAgICAgICAgICAgY2FuY2VsU2NhblJlcXVlc3QocmVxdWVzdC5nZXRTY2Fu\nUmVxdWVzdCgpKTsKICAgICAgICB9CgogICAgICAgIHZvaWQgY2FuY2VsU2Nh\nblJlcXVlc3QoU2NhblJlcXVlc3QgcmVxdWVzdCkgewogICAgICAgICAgICBp\nZiAobnVsbCA9PSByZXF1ZXN0KSB7CiAgICAgICAgICAgICAgICAvLyBub3Ro\naW5nIHRvIGNhbmNlbAogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAg\nICAgICB9CgogICAgICAgICAgICBDYWNoZUtleSBjYWNoZUtleSA9IG5ldyBD\nYWNoZUtleShyZXF1ZXN0LmdldFRvcGljKCksIHJlcXVlc3QuZ2V0U3RhcnRT\nZXFJZCgpKTsKICAgICAgICAgICAgQ2FjaGVWYWx1ZSBjYWNoZVZhbHVlID0g\nY2FjaGUuZ2V0KGNhY2hlS2V5KTsKICAgICAgICAgICAgaWYgKG51bGwgPT0g\nY2FjaGVWYWx1ZSkgewogICAgICAgICAgICAgICAgLy8gY2FjaGUgdmFsdWUg\naXMgZXZpY3RlZAogICAgICAgICAgICAgICAgLy8gc28gaXQncyBjYWxsYmFj\nayB3b3VsZCBiZSBjYWxsZWQsIHdlIGRvbid0IG5lZWQgdG8gd29ycnkgYWJv\ndXQKICAgICAgICAgICAgICAgIC8vIGNhbmNlbCBpdC4gc2luY2UgaXQgd2Fz\nIHRyZWF0ZWQgYXMgZXhlY3V0ZWQuCiAgICAgICAgICAgICAgICByZXR1cm47\nCiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2FjaGVWYWx1ZS5yZW1vdmVD\nYWxsYmFjayhyZXF1ZXN0LmdldENhbGxiYWNrKCksIHJlcXVlc3QuZ2V0Q3R4\nKCkpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjYW5jZWxT\nY2FuUmVxdWVzdChCeXRlU3RyaW5nIHRvcGljLCBDYW5jZWxTY2FuUmVxdWVz\ndCByZXF1ZXN0KSB7CiAgICAgICAgZW5xdWV1ZVdpdGhvdXRGYWlsdXJlQnlU\nb3BpYyh0b3BpYywgbmV3IENhbmNlbFNjYW5SZXF1ZXN0T3AocmVxdWVzdCkp\nOwogICAgfQoKICAgIHByb3RlY3RlZCBjbGFzcyBTY2FuUmVzcG9uc2UgaW1w\nbGVtZW50cyBDYWNoZVJlcXVlc3QgewogICAgICAgIENhY2hlS2V5IGNhY2hl\nS2V5OwogICAgICAgIE1lc3NhZ2UgbWVzc2FnZTsKCiAgICAgICAgcHVibGlj\nIFNjYW5SZXNwb25zZShDYWNoZUtleSBjYWNoZUtleSwgTWVzc2FnZSBtZXNz\nYWdlKSB7CiAgICAgICAgICAgIHRoaXMuY2FjaGVLZXkgPSBjYWNoZUtleTsK\nICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKICAgICAgICB9\nCgogICAgICAgIEBPdmVycmlkZQogICAgICAgIHB1YmxpYyB2b2lkIHBlcmZv\ncm1SZXF1ZXN0KCkgewogICAgICAgICAgICBhZGRNZXNzYWdlVG9DYWNoZShj\nYWNoZUtleSwgbWVzc2FnZSwgTWF0aFV0aWxzLm5vdygpKTsKICAgICAgICB9\nCgogICAgfQoKICAgIHByb3RlY3RlZCBjbGFzcyBEZWxpdmVyZWRVbnRpbCBp\nbXBsZW1lbnRzIENhY2hlUmVxdWVzdCB7CiAgICAgICAgQnl0ZVN0cmluZyB0\nb3BpYzsKICAgICAgICBMb25nIHNlcUlkOwoKICAgICAgICBwdWJsaWMgRGVs\naXZlcmVkVW50aWwoQnl0ZVN0cmluZyB0b3BpYywgTG9uZyBzZXFJZCkgewog\nICAgICAgICAgICB0aGlzLnRvcGljID0gdG9waWM7CiAgICAgICAgICAgIHRo\naXMuc2VxSWQgPSBzZXFJZDsKICAgICAgICB9CgogICAgICAgIEBPdmVycmlk\nZQogICAgICAgIHB1YmxpYyB2b2lkIHBlcmZvcm1SZXF1ZXN0KCkgewogICAg\nICAgICAgICBTb3J0ZWRTZXQ8TG9uZz4gb3JkZXJlZFNlcUlkcyA9IG9yZGVy\nZWRJbmRleE9uU2VxSWQuZ2V0KHRvcGljKTsKICAgICAgICAgICAgaWYgKG9y\nZGVyZWRTZXFJZHMgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgcmV0dXJu\nOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBmb2N1cyBvbiB0aGUg\nc2V0IG9mIG1lc3NhZ2VzIHdpdGggc2VxLWlkcyA8PSB0aGUgb25lIHRoYXQK\nICAgICAgICAgICAgLy8gaGFzIGJlZW4gZGVsaXZlcmVkIHVudGlsCiAgICAg\nICAgICAgIFNvcnRlZFNldDxMb25nPiBoZWFkU2V0ID0gb3JkZXJlZFNlcUlk\ncy5oZWFkU2V0KHNlcUlkICsgMSk7CgogICAgICAgICAgICBmb3IgKEl0ZXJh\ndG9yPExvbmc+IGl0ZXIgPSBoZWFkU2V0Lml0ZXJhdG9yKCk7IGl0ZXIuaGFz\nTmV4dCgpOykgewogICAgICAgICAgICAgICAgTG9uZyBzZXFJZCA9IGl0ZXIu\nbmV4dCgpOwogICAgICAgICAgICAgICAgQ2FjaGVLZXkgY2FjaGVLZXkgPSBu\nZXcgQ2FjaGVLZXkodG9waWMsIHNlcUlkKTsKCiAgICAgICAgICAgICAgICBs\nb2dnZXIuZGVidWcoIlJlbW92aW5nIHt9IGZyb20gY2FjaGUgYmVjYXVzZSBl\ndmVyeSBzdWJzY3JpYmVyIGhhcyBtb3ZlZCBwYXN0IiwKICAgICAgICAgICAg\nICAgICAgICBjYWNoZUtleSk7CgogICAgICAgICAgICAgICAgcmVtb3ZlTWVz\nc2FnZUZyb21DYWNoZShjYWNoZUtleSwgcmVhZEFoZWFkRXhjZXB0aW9uSW5z\ndGFuY2UsIC8vCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIC8vIG1haW50YWluVGltZUluZGV4PQogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICB0cnVlLAogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAvLyBtYWludGFpblNlcUlkSW5kZXg9CiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbHNlKTsK\nICAgICAgICAgICAgICAgIGl0ZXIucmVtb3ZlKCk7CiAgICAgICAgICAgIH0K\nCiAgICAgICAgICAgIGlmIChvcmRlcmVkU2VxSWRzLmlzRW1wdHkoKSkgewog\nICAgICAgICAgICAgICAgb3JkZXJlZEluZGV4T25TZXFJZC5yZW1vdmUodG9w\naWMpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIHByb3Rl\nY3RlZCBjbGFzcyBTY2FuUmVxdWVzdFdyYXBwZXIgaW1wbGVtZW50cyBDYWNo\nZVJlcXVlc3QgewogICAgICAgIFNjYW5SZXF1ZXN0IHJlcXVlc3Q7CgogICAg\nICAgIHB1YmxpYyBTY2FuUmVxdWVzdFdyYXBwZXIoU2NhblJlcXVlc3QgcmVx\ndWVzdCkgewogICAgICAgICAgICB0aGlzLnJlcXVlc3QgPSByZXF1ZXN0Owog\nICAgICAgIH0KCiAgICAgICAgLyoqCiAgICAgICAgICogVG8gaGFuZGxlIGEg\nc2NhbiByZXF1ZXN0LCB3ZSBmaXJzdCB0cnkgdG8gZG8gcmVhZGFoZWFkICh3\naGljaCBtaWdodAogICAgICAgICAqIGNhdXNlIGEgcmFuZ2UgcmVhZCB0byBi\nZSBpc3N1ZWQgdG8gdGhlIHVuZGVybHlpbmcgcGVyc2lzdGVuY2UKICAgICAg\nICAgKiBtYW5hZ2VyKS4gVGhlIHJlYWRhaGVhZCB3aWxsIHB1dCBhIHN0dWIg\naW4gdGhlIGNhY2hlLCBpZiB0aGUgbWVzc2FnZQogICAgICAgICAqIGlzIG5v\ndCBhbHJlYWR5IHByZXNlbnQgaW4gdGhlIGNhY2hlLiBUaGUgc2NhbiBjYWxs\nYmFjayB0aGF0IGlzIHBhcnQKICAgICAgICAgKiBvZiB0aGUgc2NhbiByZXF1\nZXN0IGlzIGFkZGVkIHRvIHRoaXMgc3R1YiwgYW5kIHdpbGwgYmUgY2FsbGVk\nIGxhdGVyCiAgICAgICAgICogd2hlbiB0aGUgbWVzc2FnZSBhcnJpdmVzIGFz\nIGEgcmVzdWx0IG9mIHRoZSByYW5nZSBzY2FuIGlzc3VlZCB0byB0aGUKICAg\nICAgICAgKiB1bmRlcmx5aW5nIHBlcnNpc3RlbmNlIG1hbmFnZXIuCiAgICAg\nICAgICovCgogICAgICAgIEBPdmVycmlkZQogICAgICAgIHB1YmxpYyB2b2lk\nIHBlcmZvcm1SZXF1ZXN0KCkgewoKICAgICAgICAgICAgUmFuZ2VTY2FuUmVx\ndWVzdCByZWFkQWhlYWRSZXF1ZXN0ID0gZG9SZWFkQWhlYWQocmVxdWVzdCk7\nCgogICAgICAgICAgICAvLyBSZWFkIGFoZWFkIG11c3QgaGF2ZSBpbnN0YWxs\nZWQgYXQgbGVhc3QgYSBzdHViIGZvciB1cywgc28gdGhpcwogICAgICAgICAg\nICAvLyBjYW4ndCBiZSBudWxsCiAgICAgICAgICAgIENhY2hlS2V5IGNhY2hl\nS2V5ID0gbmV3IENhY2hlS2V5KHJlcXVlc3QuZ2V0VG9waWMoKSwgcmVxdWVz\ndC5nZXRTdGFydFNlcUlkKCkpOwogICAgICAgICAgICBDYWNoZVZhbHVlIGNh\nY2hlVmFsdWUgPSBjYWNoZS5nZXQoY2FjaGVLZXkpOwogICAgICAgICAgICBp\nZiAobnVsbCA9PSBjYWNoZVZhbHVlKSB7CiAgICAgICAgICAgICAgICBsb2dn\nZXIuZXJyb3IoIkNhY2hlIGtleSB7fSBpcyByZW1vdmVkIGFmdGVyIGluc3Rh\nbGxpbmcgc3R1YiB3aGVuIHNjYW5uaW5nLiIsIGNhY2hlS2V5KTsKICAgICAg\nICAgICAgICAgIC8vIHJlaXNzdWUgdGhlIHJlcXVlc3QKICAgICAgICAgICAg\nICAgIHNjYW5TaW5nbGVNZXNzYWdlKHJlcXVlc3QpOwogICAgICAgICAgICAg\nICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBzeW5jaHJv\nbml6ZWQgKGNhY2hlVmFsdWUpIHsKICAgICAgICAgICAgICAgIC8vIEFkZCBv\ndXIgY2FsbGJhY2sgdG8gdGhlIHN0dWIuIElmIHRoZSBjYWNoZSB2YWx1ZSB3\nYXMgYWxyZWFkeSBhCiAgICAgICAgICAgICAgICAvLyBjb25jcmV0ZSBtZXNz\nYWdlLCB0aGUgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgcmlnaHQgYXdheQog\nICAgICAgICAgICAgICAgY2FjaGVWYWx1ZS5hZGRDYWxsYmFjayhyZXF1ZXN0\nLmdldENhbGxiYWNrKCksIHJlcXVlc3QuZ2V0Q3R4KCkpOwogICAgICAgICAg\nICB9CgogICAgICAgICAgICBpZiAocmVhZEFoZWFkUmVxdWVzdCAhPSBudWxs\nKSB7CiAgICAgICAgICAgICAgICByZWFsUGVyc2lzdGVuY2VNYW5hZ2VyLnNj\nYW5NZXNzYWdlcyhyZWFkQWhlYWRSZXF1ZXN0KTsKICAgICAgICAgICAgfQog\nICAgICAgIH0KICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lk\nIHJlZ2lzdGVySk1YKEhlZHdpZ01CZWFuSW5mbyBwYXJlbnQpIHsKICAgICAg\nICB0cnkgewogICAgICAgICAgICBqbXhDYWNoZUJlYW4gPSBuZXcgUmVhZEFo\nZWFkQ2FjaGVCZWFuKHRoaXMpOwogICAgICAgICAgICBIZWR3aWdNQmVhblJl\nZ2lzdHJ5LmdldEluc3RhbmNlKCkucmVnaXN0ZXIoam14Q2FjaGVCZWFuLCBw\nYXJlbnQpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAg\nICAgICAgIGxvZ2dlci53YXJuKCJGYWlsZWQgdG8gcmVnaXN0ZXIgcmVhZGFo\nZWFkIGNhY2hlIHdpdGggSk1YIiwgZSk7CiAgICAgICAgICAgIGpteENhY2hl\nQmVhbiA9IG51bGw7CiAgICAgICAgfQogICAgfQoKICAgIEBPdmVycmlkZQog\nICAgcHVibGljIHZvaWQgdW5yZWdpc3RlckpNWCgpIHsKICAgICAgICB0cnkg\newogICAgICAgICAgICBpZiAoam14Q2FjaGVCZWFuICE9IG51bGwpIHsKICAg\nICAgICAgICAgICAgIEhlZHdpZ01CZWFuUmVnaXN0cnkuZ2V0SW5zdGFuY2Uo\nKS51bnJlZ2lzdGVyKGpteENhY2hlQmVhbik7CiAgICAgICAgICAgIH0KICAg\nICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBsb2dn\nZXIud2FybigiRmFpbGVkIHRvIHVucmVnaXN0ZXIgcmVhZGFoZWFkIGNhY2hl\nIHdpdGggSk1YIiwgZSk7CiAgICAgICAgfQogICAgfQp9Cg==\n","encoding":"base64"}

