{"sha":"f11c4160540fa624fe4e0a52b591851cf80706ec","node_id":"MDQ6QmxvYjE1NzU5NTY6ZjExYzQxNjA1NDBmYTYyNGZlNGUwYTUyYjU5MTg1MWNmODA3MDZlYw==","size":4583,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/f11c4160540fa624fe4e0a52b591851cf80706ec","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy56b29rZWVwZXI7CgppbXBvcnQgamF2\nYS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5MaXN0OwoKaW1w\nb3J0IG9yZy5zbGY0ai5Mb2dnZXI7CmltcG9ydCBvcmcuc2xmNGouTG9nZ2Vy\nRmFjdG9yeTsKaW1wb3J0IG9yZy5hcGFjaGUuem9va2VlcGVyLkFzeW5jQ2Fs\nbGJhY2s7CmltcG9ydCBvcmcuYXBhY2hlLnpvb2tlZXBlci5DcmVhdGVNb2Rl\nOwppbXBvcnQgb3JnLmFwYWNoZS56b29rZWVwZXIuS2VlcGVyRXhjZXB0aW9u\nOwppbXBvcnQgb3JnLmFwYWNoZS56b29rZWVwZXIuWm9vS2VlcGVyOwppbXBv\ncnQgb3JnLmFwYWNoZS56b29rZWVwZXIuS2VlcGVyRXhjZXB0aW9uLkNvZGU7\nCmltcG9ydCBvcmcuYXBhY2hlLnpvb2tlZXBlci5kYXRhLkFDTDsKCmltcG9y\ndCBvcmcuYXBhY2hlLmhlZHdpZy51dGlsLlBhdGhVdGlsczsKCnB1YmxpYyBj\nbGFzcyBaa1V0aWxzIHsKCiAgICBzdGF0aWMgTG9nZ2VyIGxvZ2dlciA9IExv\nZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKFprVXRpbHMuY2xhc3MpOwoKICAgIHN0\nYXRpYyBjbGFzcyBTeW5jT2JqZWN0IHsKICAgICAgICBpbnQgcmM7CiAgICAg\nICAgU3RyaW5nIHBhdGg7CiAgICAgICAgYm9vbGVhbiBjYWxsZWQgPSBmYWxz\nZTsKICAgIH0KCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgY3JlYXRlRnVsbFBh\ndGhPcHRpbWlzdGljKGZpbmFsIFpvb0tlZXBlciB6aywgZmluYWwgU3RyaW5n\nIG9yaWdpbmFsUGF0aCwgZmluYWwgYnl0ZVtdIGRhdGEsCiAgICAgICAgICAg\nIGZpbmFsIExpc3Q8QUNMPiBhY2wsIGZpbmFsIENyZWF0ZU1vZGUgY3JlYXRl\nTW9kZSkKICAgIHRocm93cyBLZWVwZXJFeGNlcHRpb24sIElPRXhjZXB0aW9u\nLCBJbnRlcnJ1cHRlZEV4Y2VwdGlvbiB7CiAgICAgICAgZmluYWwgU3luY09i\namVjdCBzeW5jT2JqID0gbmV3IFN5bmNPYmplY3QoKTsKCiAgICAgICAgY3Jl\nYXRlRnVsbFBhdGhPcHRpbWlzdGljKAogICAgICAgICAgICB6aywgb3JpZ2lu\nYWxQYXRoLCBkYXRhLCBhY2wsIGNyZWF0ZU1vZGUsCiAgICAgICAgICAgIG5l\ndyBTYWZlQXN5bmNaS0NhbGxiYWNrLlN0cmluZ0NhbGxiYWNrKCkgewogICAg\nICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICBwdWJsaWMg\ndm9pZCBzYWZlUHJvY2Vzc1Jlc3VsdChmaW5hbCBpbnQgcmMsIFN0cmluZyBw\nYXRoLCBPYmplY3QgY3R4LCBTdHJpbmcgbmFtZSkgewogICAgICAgICAgICAg\nICAgICAgIHN5bmNocm9uaXplZCAoc3luY09iaikgewogICAgICAgICAgICAg\nICAgICAgICAgICBzeW5jT2JqLnJjID0gcmM7CiAgICAgICAgICAgICAgICAg\nICAgICAgIHN5bmNPYmoucGF0aCA9IHBhdGg7CiAgICAgICAgICAgICAgICAg\nICAgICAgIHN5bmNPYmouY2FsbGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAg\nICAgICAgICAgc3luY09iai5ub3RpZnkoKTsKICAgICAgICAgICAgICAgICAg\nICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIHN5bmNPYmoK\nICAgICAgICApOwoKICAgICAgICBzeW5jaHJvbml6ZWQgKHN5bmNPYmopIHsK\nICAgICAgICAgICAgd2hpbGUgKCFzeW5jT2JqLmNhbGxlZCkgewogICAgICAg\nICAgICAgICAgc3luY09iai53YWl0KCk7CiAgICAgICAgICAgIH0KICAgICAg\nICB9CgogICAgICAgIGlmIChDb2RlLk9LLmludFZhbHVlKCkgIT0gc3luY09i\nai5yYykgewogICAgICAgICAgICB0aHJvdyBLZWVwZXJFeGNlcHRpb24uY3Jl\nYXRlKEtlZXBlckV4Y2VwdGlvbi5Db2RlLmdldChzeW5jT2JqLnJjKSwgc3lu\nY09iai5wYXRoKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHN0YXRp\nYyB2b2lkIGNyZWF0ZUZ1bGxQYXRoT3B0aW1pc3RpYyhmaW5hbCBab29LZWVw\nZXIgemssIGZpbmFsIFN0cmluZyBvcmlnaW5hbFBhdGgsIGZpbmFsIGJ5dGVb\nXSBkYXRhLAogICAgICAgICAgICBmaW5hbCBMaXN0PEFDTD4gYWNsLCBmaW5h\nbCBDcmVhdGVNb2RlIGNyZWF0ZU1vZGUsIGZpbmFsIEFzeW5jQ2FsbGJhY2su\nU3RyaW5nQ2FsbGJhY2sgY2FsbGJhY2ssCiAgICAgICAgICAgIGZpbmFsIE9i\namVjdCBjdHgpIHsKCiAgICAgICAgemsuY3JlYXRlKG9yaWdpbmFsUGF0aCwg\nZGF0YSwgYWNsLCBjcmVhdGVNb2RlLCBuZXcgU2FmZUFzeW5jWktDYWxsYmFj\nay5TdHJpbmdDYWxsYmFjaygpIHsKICAgICAgICAgICAgQE92ZXJyaWRlCiAg\nICAgICAgICAgIHB1YmxpYyB2b2lkIHNhZmVQcm9jZXNzUmVzdWx0KGludCBy\nYywgU3RyaW5nIHBhdGgsIE9iamVjdCBjdHgsIFN0cmluZyBuYW1lKSB7Cgog\nICAgICAgICAgICAgICAgaWYgKHJjICE9IENvZGUuTk9OT0RFLmludFZhbHVl\nKCkpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5wcm9jZXNzUmVz\ndWx0KHJjLCBwYXRoLCBjdHgsIG5hbWUpOwogICAgICAgICAgICAgICAgICAg\nIHJldHVybjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAv\nLyBTaW5jZSBJIGdvdCBhIG5vbm9kZSwgaXQgbWVhbnMgdGhhdCBteSBwYXJl\nbnRzIGRvbid0IGV4aXN0CiAgICAgICAgICAgICAgICAvLyBjcmVhdGUgbW9k\nZSBpcyBwZXJzaXN0ZW50IHNpbmNlIGVwaGVtZXJhbCBub2RlcyBjYW4ndCBi\nZQogICAgICAgICAgICAgICAgLy8gcGFyZW50cwogICAgICAgICAgICAgICAg\nWmtVdGlscy5jcmVhdGVGdWxsUGF0aE9wdGltaXN0aWMoemssIFBhdGhVdGls\ncy5wYXJlbnQob3JpZ2luYWxQYXRoKSwgbmV3IGJ5dGVbMF0sIGFjbCwKICAg\nICAgICAgICAgICAgIENyZWF0ZU1vZGUuUEVSU0lTVEVOVCwgbmV3IFNhZmVB\nc3luY1pLQ2FsbGJhY2suU3RyaW5nQ2FsbGJhY2soKSB7CgogICAgICAgICAg\nICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgICAgIHB1Ymxp\nYyB2b2lkIHNhZmVQcm9jZXNzUmVzdWx0KGludCByYywgU3RyaW5nIHBhdGgs\nIE9iamVjdCBjdHgsIFN0cmluZyBuYW1lKSB7CiAgICAgICAgICAgICAgICAg\nICAgICAgIGlmIChyYyA9PSBDb2RlLk9LLmludFZhbHVlKCkgfHwgcmMgPT0g\nQ29kZS5OT0RFRVhJU1RTLmludFZhbHVlKCkpIHsKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgIC8vIHN1Y2NlZWRlZCBpbiBjcmVhdGluZyB0aGUgcGFy\nZW50LCBub3cKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNyZWF0\nZSB0aGUgb3JpZ2luYWwgcGF0aAogICAgICAgICAgICAgICAgICAgICAgICAg\nICAgWmtVdGlscy5jcmVhdGVGdWxsUGF0aE9wdGltaXN0aWMoemssIG9yaWdp\nbmFsUGF0aCwgZGF0YSwgYWNsLCBjcmVhdGVNb2RlLCBjYWxsYmFjaywKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgIGN0eCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0g\nZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5w\ncm9jZXNzUmVzdWx0KHJjLCBwYXRoLCBjdHgsIG5hbWUpOwogICAgICAgICAg\nICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAg\nICAgICAgICAgfSwgY3R4KTsKICAgICAgICAgICAgfQogICAgICAgIH0sIGN0\neCk7CgogICAgfQoKICAgIHB1YmxpYyBzdGF0aWMgS2VlcGVyRXhjZXB0aW9u\nIGxvZ0Vycm9yQW5kQ3JlYXRlWktFeGNlcHRpb24oU3RyaW5nIG1zZywgU3Ry\naW5nIHBhdGgsIGludCByYykgewogICAgICAgIEtlZXBlckV4Y2VwdGlvbiBr\nZSA9IEtlZXBlckV4Y2VwdGlvbi5jcmVhdGUoQ29kZS5nZXQocmMpLCBwYXRo\nKTsKICAgICAgICBsb2dnZXIuZXJyb3IobXNnICsgIix6a1BhdGg6ICIgKyBw\nYXRoLCBrZSk7CiAgICAgICAgcmV0dXJuIGtlOwogICAgfQoKfQo=\n","encoding":"base64"}

