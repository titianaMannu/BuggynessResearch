{"sha":"6fa34076133dc90b3495637459cbffe4b18284ba","node_id":"MDQ6QmxvYjE1NzU5NTY6NmZhMzQwNzYxMzNkYzkwYjM0OTU2Mzc0NTljYmZmZTRiMTgyODRiYQ==","size":9273,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/6fa34076133dc90b3495637459cbffe4b18284ba","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQ7CgppbXBvcnQgamF2YS5p\nby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkNv\ndW50RG93bkxhdGNoOwppbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuVGlt\nZVVuaXQ7CgppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuY2xpZW50LmFwaS5N\nZXNzYWdlSGFuZGxlcjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmNsaWVu\ndC5hcGkuUHVibGlzaGVyOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuY2xp\nZW50LmFwaS5TdWJzY3JpYmVyOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcu\nZXhjZXB0aW9ucy5QdWJTdWJFeGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hl\nLmhlZHdpZy5wcm90b2NvbC5QdWJTdWJQcm90b2NvbC5NZXNzYWdlOwppbXBv\ncnQgb3JnLmFwYWNoZS5oZWR3aWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2wu\nU3Vic2NyaWJlUmVxdWVzdC5DcmVhdGVPckF0dGFjaDsKaW1wb3J0IG9yZy5h\ncGFjaGUuaGVkd2lnLnByb3RvY29sLlB1YlN1YlByb3RvY29sLlN1YnNjcmlw\ndGlvbk9wdGlvbnM7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIu\nSGVkd2lnSHViVGVzdEJhc2U7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5z\nZXJ2ZXIuZGVsaXZlcnkuRGVsaXZlcnlNYW5hZ2VyOwppbXBvcnQgb3JnLmFw\nYWNoZS5oZWR3aWcuc2VydmVyLmRlbGl2ZXJ5LkZJRk9EZWxpdmVyeU1hbmFn\nZXI7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIubmV0dHkuUHVi\nU3ViU2VydmVyOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcudXRpbC5DYWxs\nYmFjazsKaW1wb3J0IG9yZy5qdW5pdC5UZXN0OwoKaW1wb3J0IGNvbS5nb29n\nbGUucHJvdG9idWYuQnl0ZVN0cmluZzsKCmltcG9ydCBzdGF0aWMgb3JnLmp1\nbml0LkFzc2VydC4qOwoKcHVibGljIGNsYXNzIFRlc3RTdWJBZnRlckNsb3Nl\nU3ViIGV4dGVuZHMgSGVkd2lnSHViVGVzdEJhc2UgewoKICAgIGNsYXNzIFRl\nc3RDbGllbnRDb25maWd1cmF0aW9uIGV4dGVuZHMgSHViQ2xpZW50Q29uZmln\ndXJhdGlvbiB7CgogICAgICAgIGJvb2xlYW4gaXNTdWJzY3JpcHRpb25DaGFu\nbmVsU2hhcmluZ0VuYWJsZWQ7CgogICAgICAgIFRlc3RDbGllbnRDb25maWd1\ncmF0aW9uKGJvb2xlYW4gaXNTdWJzY3JpcHRpb25DaGFubmVsU2hhcmluZ0Vu\nYWJsZWQpIHsKICAgICAgICAgICAgdGhpcy5pc1N1YnNjcmlwdGlvbkNoYW5u\nZWxTaGFyaW5nRW5hYmxlZCA9IGlzU3Vic2NyaXB0aW9uQ2hhbm5lbFNoYXJp\nbmdFbmFibGVkOwogICAgICAgIH0KCiAgICAgICAgQE92ZXJyaWRlCiAgICAg\nICAgcHVibGljIGJvb2xlYW4gaXNTdWJzY3JpcHRpb25DaGFubmVsU2hhcmlu\nZ0VuYWJsZWQoKSB7CiAgICAgICAgICAgIHJldHVybiBpc1N1YnNjcmlwdGlv\nbkNoYW5uZWxTaGFyaW5nRW5hYmxlZDsKICAgICAgICB9CiAgICB9CgogICAg\ncHJpdmF0ZSB2b2lkIHNsZWVwRGVsaXZlcnlNYW5hZ2VyKGZpbmFsIENvdW50\nRG93bkxhdGNoIHdha2V1cExhdGNoKQogICAgICAgICAgICB0aHJvd3MgSU9F\neGNlcHRpb24gewogICAgICAgIFB1YlN1YlNlcnZlciBzZXJ2ZXIgPSBzZXJ2\nZXJzTGlzdC5nZXQoMCk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbCgiVGhlcmUg\nc2hvdWxkIGJlIGF0IGxlYXN0IG9uZSBwdWJzdWIgc2VydmVyIiwgc2VydmVy\nKTsKICAgICAgICBEZWxpdmVyeU1hbmFnZXIgZG0gPSBzZXJ2ZXIuZ2V0RGVs\naXZlcnlNYW5hZ2VyKCk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbCgiRGVsaXZl\ncnkgbWFuYWdlciBzaG91bGQgbm90IGJlIG51bGwgb25jZSBzZXJ2ZXIgaGFz\nIHN0YXJ0ZWQiLCBkbSk7CiAgICAgICAgYXNzZXJ0VHJ1ZSgiRGVsaXZlcnkg\nbWFuYWdlciBpcyB3cm9uZyB0eXBlIiwgZG0gaW5zdGFuY2VvZiBGSUZPRGVs\naXZlcnlNYW5hZ2VyKTsKICAgICAgICBmaW5hbCBGSUZPRGVsaXZlcnlNYW5h\nZ2VyIGZkbSA9IChGSUZPRGVsaXZlcnlNYW5hZ2VyKWRtOwoKICAgICAgICBU\naHJlYWQgc2xlZXBlciA9IG5ldyBUaHJlYWQoKSB7CiAgICAgICAgICAgICAg\nICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigp\nIHsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAg\nICAgICAgICBmZG0uc3VzcGVuZFByb2Nlc3NpbmcoKTsKICAgICAgICAgICAg\nICAgICAgICAgICAgd2FrZXVwTGF0Y2guYXdhaXQoKTsKICAgICAgICAgICAg\nICAgICAgICAgICAgZmRtLnJlc3VtZVByb2Nlc3NpbmcoKTsKICAgICAgICAg\nICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAg\nICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoIkVycm9yIHN1c3BlbmRpbmcg\nZGVsaXZlcnkgbWFuYWdlciIsIGUpOwogICAgICAgICAgICAgICAgICAgIH0K\nICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICBzbGVl\ncGVyLnN0YXJ0KCk7CiAgICB9CgogICAgLyoqCiAgICAgKiB7QGxpbmsgaHR0\ncHM6Ly9pc3N1ZXMuYXBhY2hlLm9yZy9qaXJhL2Jyb3dzZS9CT09LS0VFUEVS\nLTUwN30KICAgICAqLwogICAgLyogVE9ETzogQWRkIHRoaXMgdGVzdCBjYXNl\nIGJhY2sgYWZ0ZXIgQk9PS0tFRVBFUi0zNyBpcyBmaXhlZAogICAgQFRlc3Qo\ndGltZW91dD0xNTAwMCkKICAgIHB1YmxpYyB2b2lkIHRlc3RTdWJBZnRlckNs\nb3NlU3ViRm9yU2ltcGxlQ2xpZW50KCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAg\nICAgICAgcnVuU3ViQWZ0ZXJDbG9zZVN1YlRlc3QoZmFsc2UpOwogICAgfQog\nICAgKi8KCiAgICAvKioKICAgICAqIHtAbGluayBodHRwczovL2lzc3Vlcy5h\ncGFjaGUub3JnL2ppcmEvYnJvd3NlL0JPT0tLRUVQRVItNTA3fQogICAgICov\nCiAgICBAVGVzdCh0aW1lb3V0PTE1MDAwKQogICAgcHVibGljIHZvaWQgdGVz\ndFN1YkFmdGVyQ2xvc2VTdWJGb3JNdWx0aXBsZXhDbGllbnQoKSB0aHJvd3Mg\nRXhjZXB0aW9uIHsKICAgICAgICBydW5TdWJBZnRlckNsb3NlU3ViVGVzdCh0\ncnVlKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgcnVuU3ViQWZ0ZXJDbG9z\nZVN1YlRlc3QoYm9vbGVhbiBzaGFyZWRTdWJzY3JpcHRpb25DaGFubmVsKSB0\naHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBIZWR3aWdDbGllbnQgY2xpZW50\nID0gbmV3IEhlZHdpZ0NsaWVudChuZXcgVGVzdENsaWVudENvbmZpZ3VyYXRp\nb24oc2hhcmVkU3Vic2NyaXB0aW9uQ2hhbm5lbCkpOwogICAgICAgIFB1Ymxp\nc2hlciBwdWJsaXNoZXIgPSBjbGllbnQuZ2V0UHVibGlzaGVyKCk7CiAgICAg\nICAgZmluYWwgU3Vic2NyaWJlciBzdWJzY3JpYmVyID0gY2xpZW50LmdldFN1\nYnNjcmliZXIoKTsKCiAgICAgICAgZmluYWwgQnl0ZVN0cmluZyB0b3BpYyA9\nIEJ5dGVTdHJpbmcuY29weUZyb21VdGY4KCJUZXN0U3ViQWZ0ZXJDbG9zZVN1\nYi0iICsgc2hhcmVkU3Vic2NyaXB0aW9uQ2hhbm5lbCk7CiAgICAgICAgZmlu\nYWwgQnl0ZVN0cmluZyBzdWJpZCA9IEJ5dGVTdHJpbmcuY29weUZyb21VdGY4\nKCJteXN1YiIpOwoKICAgICAgICBmaW5hbCBDb3VudERvd25MYXRjaCB3YWtl\ndXBMYXRjaCA9IG5ldyBDb3VudERvd25MYXRjaCgxKTsKICAgICAgICBmaW5h\nbCBDb3VudERvd25MYXRjaCBjbG9zZUxhdGNoID0gbmV3IENvdW50RG93bkxh\ndGNoKDEpOwogICAgICAgIGZpbmFsIENvdW50RG93bkxhdGNoIHN1YkxhdGNo\nID0gbmV3IENvdW50RG93bkxhdGNoKDEpOwogICAgICAgIGZpbmFsIENvdW50\nRG93bkxhdGNoIGRlbGl2ZXJMYXRjaCA9IG5ldyBDb3VudERvd25MYXRjaCgx\nKTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgU3Vic2NyaXB0aW9uT3B0\naW9ucyBvcHRzID0gU3Vic2NyaXB0aW9uT3B0aW9ucy5uZXdCdWlsZGVyKCkK\nICAgICAgICAgICAgICAgIC5zZXRDcmVhdGVPckF0dGFjaChDcmVhdGVPckF0\ndGFjaC5DUkVBVEVfT1JfQVRUQUNIKS5idWlsZCgpOwogICAgICAgICAgICBz\ndWJzY3JpYmVyLnN1YnNjcmliZSh0b3BpYywgc3ViaWQsIG9wdHMpOwogICAg\nICAgICAgICBzbGVlcERlbGl2ZXJ5TWFuYWdlcih3YWtldXBMYXRjaCk7CiAg\nICAgICAgICAgIHN1YnNjcmliZXIuYXN5bmNDbG9zZVN1YnNjcmlwdGlvbih0\nb3BpYywgc3ViaWQsIG5ldyBDYWxsYmFjazxWb2lkPigpIHsKICAgICAgICAg\nICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgcHVibGljIHZvaWQg\nb3BlcmF0aW9uRmluaXNoZWQoT2JqZWN0IGN0eCwgVm9pZCByZXN1bHRPZk9w\nZXJhdGlvbikgewogICAgICAgICAgICAgICAgICAgIGNsb3NlTGF0Y2guY291\nbnREb3duKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBA\nT3ZlcnJpZGUKICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9wZXJhdGlv\nbkZhaWxlZChPYmplY3QgY3R4LCBQdWJTdWJFeGNlcHRpb24gZXhjZXB0aW9u\nKSB7CiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCJDbG9zZXN1\nYiBmYWlsZWQgOiAiLCBleGNlcHRpb24pOwogICAgICAgICAgICAgICAgfQog\nICAgICAgICAgICB9LCBudWxsKTsKCiAgICAgICAgICAgIFN1YnNjcmlwdGlv\nbk9wdGlvbnMgb3B0c0F0dGFjaCA9IFN1YnNjcmlwdGlvbk9wdGlvbnMubmV3\nQnVpbGRlcigpCiAgICAgICAgICAgICAgICAuc2V0Q3JlYXRlT3JBdHRhY2go\nQ3JlYXRlT3JBdHRhY2guQVRUQUNIKS5idWlsZCgpOwogICAgICAgICAgICBz\ndWJzY3JpYmVyLmFzeW5jU3Vic2NyaWJlKHRvcGljLCBzdWJpZCwgb3B0c0F0\ndGFjaCwgbmV3IENhbGxiYWNrPFZvaWQ+KCkgewogICAgICAgICAgICAgICAg\nQE92ZXJyaWRlCiAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBvcGVyYXRp\nb25GaW5pc2hlZChPYmplY3QgY3R4LCBWb2lkIHJlc3VsdE9mT3BlcmF0aW9u\nKSB7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAg\nICAgICAgICAgc3Vic2NyaWJlci5zdGFydERlbGl2ZXJ5KHRvcGljLCBzdWJp\nZCwgbmV3IE1lc3NhZ2VIYW5kbGVyKCkgewogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICBwdWJsaWMgdm9pZCBkZWxpdmVyKEJ5dGVTdHJpbmcgdG9waWMsIEJ5dGVT\ndHJpbmcgc3ViaWQsIE1lc3NhZ2UgbXNnLAogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYWxsYmFjazxWb2lkPiBj\nYWxsYmFjaywgT2JqZWN0IGNvbnRleHQpIHsKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICBkZWxpdmVyTGF0Y2guY291bnREb3duKCk7CiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAg\nICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlv\nbiBjbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJv\ncigiRmFpbGVkIHRvIHN0YXJ0IGRlbGl2ZXJ5IDogIiwgY25zZSk7CiAgICAg\nICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHN1YkxhdGNo\nLmNvdW50RG93bigpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAg\nICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBvcGVy\nYXRpb25GYWlsZWQoT2JqZWN0IGN0eCwgUHViU3ViRXhjZXB0aW9uIGV4Y2Vw\ndGlvbikgewogICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcigiRmFp\nbGVkIHRvIHN1YnNjcmliZXIgOiAiLCBleGNlcHRpb24pOwogICAgICAgICAg\nICAgICAgfQogICAgICAgICAgICB9LCBudWxsKTsKICAgICAgICAgICAgLy8g\nTWFrZSB0aGUgZGVsaXZlcnkgbWFuYWdlciB0aHJlYWQgc2xlZXAgZm9yIGEg\nd2hpbGUuCiAgICAgICAgICAgIC8vIEJlZm9yZSB7QGxpbmsgaHR0cHM6Ly9p\nc3N1ZXMuYXBhY2hlLm9yZy9qaXJhL2Jyb3dzZS9CT09LS0VFUEVSLTUwN30s\nCiAgICAgICAgICAgIC8vIHN1YnNjcmliZSB3b3VsZCBzdWNjZWVkIGJlZm9y\nZSBjbG9zZXN1Yiwgd2hpbGUgY2xvc2VzdWIgd291bGQgY2xlYXIKICAgICAg\nICAgICAgLy8gYSBzdWNjZXNzZnVsIHN1YnNjcmlwdGlvbiB3L28gbm90aWZ5\naW5nIHRoZSBjbGllbnQuCiAgICAgICAgICAgIFRpbWVVbml0LlNFQ09ORFMu\nc2xlZXAoMik7CiAgICAgICAgICAgIC8vIHdha2UgdXAgZmlmbyBkZWxpdmVy\neSB0aHJlYWQKICAgICAgICAgICAgd2FrZXVwTGF0Y2guY291bnREb3duKCk7\nCiAgICAgICAgICAgIC8vIHdhaXQgY2xvc2Ugc3ViIHRvIHN1Y2NlZWQKICAg\nICAgICAgICAgYXNzZXJ0VHJ1ZSgiQXN5bmMgY2xvc2Ugc3Vic2NyaXB0aW9u\nIHNob3VsZCBzdWNjZWVkLiIsCiAgICAgICAgICAgICAgICAgICAgICAgY2xv\nc2VMYXRjaC5hd2FpdCg1LCBUaW1lVW5pdC5TRUNPTkRTKSk7CiAgICAgICAg\nICAgIGFzc2VydFRydWUoIlN1YnNjcmliZSBzaG91bGQgc3VjY2VlZC4iLAog\nICAgICAgICAgICAgICAgICAgICAgIHN1YkxhdGNoLmF3YWl0KDUsIFRpbWVV\nbml0LlNFQ09ORFMpKTsKICAgICAgICAgICAgLy8gcHVibGlzaCBhIG1lc3Nh\nZ2UKICAgICAgICAgICAgcHVibGlzaGVyLnB1Ymxpc2godG9waWMsIE1lc3Nh\nZ2UubmV3QnVpbGRlcigpLnNldEJvZHkodG9waWMpLmJ1aWxkKCkpOwogICAg\nICAgICAgICAvLyB3YWl0IGZvciBzZWNvbmRzIHRvIHJlY2VpdmUgbWVzc2Fn\nZQogICAgICAgICAgICBhc3NlcnRUcnVlKCJNZXNzYWdlIHNob3VsZCBiZSBy\nZWNlaXZlZCB0aHJvdWdoIHN1Y2Nlc3NmdWwgc3Vic2NyaXB0aW9uLiIsCiAg\nICAgICAgICAgICAgICAgICAgICAgZGVsaXZlckxhdGNoLmF3YWl0KDUsIFRp\nbWVVbml0LlNFQ09ORFMpKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAg\nICAgICBjbGllbnQuY2xvc2UoKTsKICAgICAgICB9CiAgICB9CgogICAgLyoq\nCiAgICAgKiBUZXN0IHRoYXQgaWYgd2UgY2xvc2UgYSBzdWJzY3JpcHRpb24g\nYW5kIG9wZW4gYWdhaW4gaW1tZWRpYXRlbHksIHdlIGRvbid0CiAgICAgKiBn\nZXQgYSBUT1BJQ19CVVNZLiBUaGlzIHJhY2UgZXhpc3RlZCBiZWNhdXNlIHRo\nZSBzaW1wbGUgY2xpZW50IHNpbXBseSBjbG9zZWQKICAgICAqIHRoZSBjb25u\nZWN0aW9uIHdoZW4gY2xvc2luZyBhIHN1YnNjcmlwdGlvbiwgYW5kIGFub3Ro\nZXIgY2xpZW50IGNvdWxkIHRyeSB0bwogICAgICogYXR0YWNoIHRvIHRoZSBz\ndWJzY3JpcHRpb24gYmVmb3JlIHRoZSBjaGFubmVsIGRpc2Nvbm5lY3RlZCBl\ndmVudCBvY2N1cnMuCiAgICAgKgogICAgICoge0BsaW5rIGh0dHBzOi8vaXNz\ndWVzLmFwYWNoZS5vcmcvamlyYS9icm93c2UvQk9PS0tFRVBFUi01MTN9CiAg\nICAgKi8KICAgIEBUZXN0KHRpbWVvdXQ9MTUwMDApCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0U2ltcGxlQ2xpZW50RG9lc250R2V0VG9waWNCdXN5KCkgdGhyb3dz\nIEV4Y2VwdGlvbiB7CiAgICAgICAgLy8gcnVuIHRlbiB0aW1lcyB0byBpbmNy\nZWFzZSBjaGFuY2Ugb2YgaGl0dGluZyByYWNlCiAgICAgICAgZm9yIChpbnQg\naSA9IDA7IGkgPCAxMDsgaSsrKSB7CiAgICAgICAgICAgIEhlZHdpZ0NsaWVu\ndCBjbGllbnQxID0gbmV3IEhlZHdpZ0NsaWVudChuZXcgVGVzdENsaWVudENv\nbmZpZ3VyYXRpb24oZmFsc2UpKTsKICAgICAgICAgICAgU3Vic2NyaWJlciBz\ndWJzY3JpYmVyMSA9IGNsaWVudDEuZ2V0U3Vic2NyaWJlcigpOwogICAgICAg\nICAgICBIZWR3aWdDbGllbnQgY2xpZW50MiA9IG5ldyBIZWR3aWdDbGllbnQo\nbmV3IFRlc3RDbGllbnRDb25maWd1cmF0aW9uKGZhbHNlKSk7CiAgICAgICAg\nICAgIFN1YnNjcmliZXIgc3Vic2NyaWJlcjIgPSBjbGllbnQyLmdldFN1YnNj\ncmliZXIoKTsKCiAgICAgICAgICAgIGZpbmFsIEJ5dGVTdHJpbmcgdG9waWMg\nPSBCeXRlU3RyaW5nLmNvcHlGcm9tVXRmOCgiVGVzdFNpbXBsZUNsaWVudFRv\ncGljQnVzeSIpOwogICAgICAgICAgICBmaW5hbCBCeXRlU3RyaW5nIHN1Ymlk\nID0gQnl0ZVN0cmluZy5jb3B5RnJvbVV0ZjgoIm15c3ViIik7CgogICAgICAg\nICAgICBTdWJzY3JpcHRpb25PcHRpb25zIG9wdHMxID0gU3Vic2NyaXB0aW9u\nT3B0aW9ucy5uZXdCdWlsZGVyKCkKICAgICAgICAgICAgICAgIC5zZXRDcmVh\ndGVPckF0dGFjaChDcmVhdGVPckF0dGFjaC5DUkVBVEVfT1JfQVRUQUNIKS5i\ndWlsZCgpOwogICAgICAgICAgICBzdWJzY3JpYmVyMS5zdWJzY3JpYmUodG9w\naWMsIHN1YmlkLCBvcHRzMSk7CiAgICAgICAgICAgIHN1YnNjcmliZXIxLmNs\nb3NlU3Vic2NyaXB0aW9uKHRvcGljLCBzdWJpZCk7CgogICAgICAgICAgICBT\ndWJzY3JpcHRpb25PcHRpb25zIG9wdHMyID0gU3Vic2NyaXB0aW9uT3B0aW9u\ncy5uZXdCdWlsZGVyKCkKICAgICAgICAgICAgICAgIC5zZXRDcmVhdGVPckF0\ndGFjaChDcmVhdGVPckF0dGFjaC5BVFRBQ0gpLmJ1aWxkKCk7CiAgICAgICAg\nICAgIHN1YnNjcmliZXIyLnN1YnNjcmliZSh0b3BpYywgc3ViaWQsIG9wdHMy\nKTsKICAgICAgICAgICAgc3Vic2NyaWJlcjIuY2xvc2VTdWJzY3JpcHRpb24o\ndG9waWMsIHN1YmlkKTsKCiAgICAgICAgICAgIGNsaWVudDEuY2xvc2UoKTsK\nICAgICAgICAgICAgY2xpZW50Mi5jbG9zZSgpOwogICAgICAgIH0KICAgIH0K\nfQoK\n","encoding":"base64"}

