{"sha":"8e9b8f6689a235dc8c68f2b75fb13e400c2c84c7","node_id":"MDQ6QmxvYjE1NzU5NTY6OGU5YjhmNjY4OWEyMzVkYzhjNjhmMmI3NWZiMTNlNDAwYzJjODRjNw==","size":17825,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/8e9b8f6689a235dc8c68f2b75fb13e400c2c84c7","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIuZmlsdGVyOwoKaW1wb3J0\nIG9yZy5qdW5pdC5BZnRlcjsKaW1wb3J0IG9yZy5qdW5pdC5CZWZvcmU7Cmlt\ncG9ydCBvcmcuanVuaXQuVGVzdDsKaW1wb3J0IHN0YXRpYyBvcmcuanVuaXQu\nQXNzZXJ0Lio7CgppbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0\nIGphdmEudXRpbC5NYXA7CmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5D\nb3VudERvd25MYXRjaDsKaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LlRp\nbWVVbml0OwppbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuYXRvbWljLkF0\nb21pY0ludGVnZXI7CgppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLnV0\naWwuUmVmbGVjdGlvblV0aWxzOwppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25z\nLmNvbmZpZ3VyYXRpb24uQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFj\naGUuY29tbW9ucy5jb25maWd1cmF0aW9uLkNvbmZpZ3VyYXRpb25FeGNlcHRp\nb247CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQuSGVkd2lnQ2xp\nZW50OwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuY2xpZW50LmFwaS5NZXNz\nYWdlSGFuZGxlcjsKaW1wb3J0IGNvbS5nb29nbGUucHJvdG9idWYuQnl0ZVN0\ncmluZzsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmV4Y2VwdGlvbnMuUHVi\nU3ViRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcucHJvdG9j\nb2wuUHViU3ViUHJvdG9jb2w7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5w\ncm90b2NvbC5QdWJTdWJQcm90b2NvbC5NZXNzYWdlOwppbXBvcnQgb3JnLmFw\nYWNoZS5oZWR3aWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2wuTWVzc2FnZUhl\nYWRlcjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnByb3RvY29sLlB1YlN1\nYlByb3RvY29sLlN1YnNjcmliZVJlcXVlc3QuQ3JlYXRlT3JBdHRhY2g7Cmlt\ncG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5QdWJTdWJQcm90b2Nv\nbC5TdWJzY3JpcHRpb25PcHRpb25zOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3\naWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2wuU3Vic2NyaXB0aW9uUHJlZmVy\nZW5jZXM7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2V4dGVuc2lv\nbnMuTWFwVXRpbHM7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2V4\ndGVuc2lvbnMuU3Vic2NyaXB0aW9uU3RhdGVVdGlsczsKCmltcG9ydCBvcmcu\nYXBhY2hlLmhlZHdpZy5jbGllbnQuYXBpLkNsaWVudDsKaW1wb3J0IG9yZy5h\ncGFjaGUuaGVkd2lnLmNsaWVudC5hcGkuU3Vic2NyaWJlcjsKaW1wb3J0IG9y\nZy5hcGFjaGUuaGVkd2lnLmNsaWVudC5hcGkuUHVibGlzaGVyOwppbXBvcnQg\nb3JnLmFwYWNoZS5oZWR3aWcuY2xpZW50LmNvbmYuQ2xpZW50Q29uZmlndXJh\ndGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmZpbHRlci5DbGllbnRN\nZXNzYWdlRmlsdGVyOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuZmlsdGVy\nLk1lc3NhZ2VGaWx0ZXJCYXNlOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcu\nZmlsdGVyLlNlcnZlck1lc3NhZ2VGaWx0ZXI7CmltcG9ydCBvcmcuYXBhY2hl\nLmhlZHdpZy51dGlsLkNhbGxiYWNrOwoKaW1wb3J0IG9yZy5hcGFjaGUuaGVk\nd2lnLnNlcnZlci5IZWR3aWdIdWJUZXN0QmFzZTsKCnB1YmxpYyBjbGFzcyBU\nZXN0TWVzc2FnZUZpbHRlciBleHRlbmRzIEhlZHdpZ0h1YlRlc3RCYXNlIHsK\nCiAgICAvLyBDbGllbnQgc2lkZSB2YXJpYWJsZXMKICAgIHByb3RlY3RlZCBD\nbGllbnRDb25maWd1cmF0aW9uIGNvbmY7CiAgICBwcm90ZWN0ZWQgSGVkd2ln\nQ2xpZW50IGNsaWVudDsKICAgIHByb3RlY3RlZCBQdWJsaXNoZXIgcHVibGlz\naGVyOwogICAgcHJvdGVjdGVkIFN1YnNjcmliZXIgc3Vic2NyaWJlcjsKCiAg\nICBzdGF0aWMgZmluYWwgU3RyaW5nIE9QVF9NT0QgPSAiTU9EIjsKCiAgICBz\ndGF0aWMgY2xhc3MgTW9kTWVzc2FnZUZpbHRlciBpbXBsZW1lbnRzIFNlcnZl\nck1lc3NhZ2VGaWx0ZXIsIENsaWVudE1lc3NhZ2VGaWx0ZXIgewoKICAgICAg\nICBpbnQgbW9kOwoKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMg\nU2VydmVyTWVzc2FnZUZpbHRlciBpbml0aWFsaXplKENvbmZpZ3VyYXRpb24g\nY29uZikgewogICAgICAgICAgICAvLyBkbyBub3RoaW5nCiAgICAgICAgICAg\nIHJldHVybiB0aGlzOwogICAgICAgIH0KCiAgICAgICAgQE92ZXJyaWRlCiAg\nICAgICAgcHVibGljIHZvaWQgdW5pbml0aWFsaXplKCkgewogICAgICAgICAg\nICAvLyBkbyBub3RoaW5nOwogICAgICAgIH0KCiAgICAgICAgQE92ZXJyaWRl\nCiAgICAgICAgcHVibGljIE1lc3NhZ2VGaWx0ZXJCYXNlIHNldFN1YnNjcmlw\ndGlvblByZWZlcmVuY2VzKEJ5dGVTdHJpbmcgdG9waWMsCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIEJ5dGVTdHJpbmcgc3Vic2NyaWJlcklkLAogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBT\ndWJzY3JpcHRpb25QcmVmZXJlbmNlcyBwcmVmZXJlbmNlcykgewogICAgICAg\nICAgICBNYXA8U3RyaW5nLCBCeXRlU3RyaW5nPiB1c2VyT3B0aW9ucyA9IFN1\nYnNjcmlwdGlvblN0YXRlVXRpbHMuYnVpbGRVc2VyT3B0aW9ucyhwcmVmZXJl\nbmNlcyk7CiAgICAgICAgICAgIEJ5dGVTdHJpbmcgbW9kVmFsdWUgPSB1c2Vy\nT3B0aW9ucy5nZXQoT1BUX01PRCk7CiAgICAgICAgICAgIGlmIChudWxsID09\nIG1vZFZhbHVlKSB7CiAgICAgICAgICAgICAgICBtb2QgPSAwOwogICAgICAg\nICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgbW9kID0gSW50ZWdlci52\nYWx1ZU9mKG1vZFZhbHVlLnRvU3RyaW5nVXRmOCgpKTsKICAgICAgICAgICAg\nfQogICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICB9CgogICAgICAg\nIEBPdmVycmlkZQogICAgICAgIHB1YmxpYyBib29sZWFuIHRlc3RNZXNzYWdl\nKE1lc3NhZ2UgbXNnKSB7CiAgICAgICAgICAgIGludCB2YWx1ZSA9IEludGVn\nZXIudmFsdWVPZihtc2cuZ2V0Qm9keSgpLnRvU3RyaW5nVXRmOCgpKTsKICAg\nICAgICAgICAgcmV0dXJuIDAgPT0gdmFsdWUgJSBtb2Q7CiAgICAgICAgfQog\nICAgfQoKICAgIHN0YXRpYyBjbGFzcyBIZWFkZXJNZXNzYWdlRmlsdGVyIGlt\ncGxlbWVudHMgU2VydmVyTWVzc2FnZUZpbHRlciwgQ2xpZW50TWVzc2FnZUZp\nbHRlciB7CiAgICAgICAgaW50IG1vZDsKICAgICAgICBAT3ZlcnJpZGUKICAg\nICAgICBwdWJsaWMgU2VydmVyTWVzc2FnZUZpbHRlciBpbml0aWFsaXplKENv\nbmZpZ3VyYXRpb24gY29uZikgewogICAgICAgICAgICAvLyBkbyBub3RoaW5n\nCiAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgIH0KCiAgICAgICAg\nQE92ZXJyaWRlCiAgICAgICAgcHVibGljIHZvaWQgdW5pbml0aWFsaXplKCkg\newogICAgICAgICAgICAvLyBkbyBub3RoaW5nCiAgICAgICAgfQoKICAgICAg\nICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgTWVzc2FnZUZpbHRlckJhc2Ug\nc2V0U3Vic2NyaXB0aW9uUHJlZmVyZW5jZXMoQnl0ZVN0cmluZyB0b3BpYywK\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgQnl0ZVN0cmluZyBzdWJzY3JpYmVySWQsCiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgIFN1YnNjcmlwdGlvblByZWZlcmVuY2VzIHByZWZlcmVuY2Vz\nKSB7CiAgICAgICAgICAgIC8vIGRvIG5vdGhpbmcgbm93CiAgICAgICAgICAg\nIHJldHVybiB0aGlzOwogICAgICAgIH0KCiAgICAgICAgQE92ZXJyaWRlCiAg\nICAgICAgcHVibGljIGJvb2xlYW4gdGVzdE1lc3NhZ2UoTWVzc2FnZSBtc2cp\nIHsKICAgICAgICAgICAgaWYgKG1zZy5oYXNIZWFkZXIoKSkgewogICAgICAg\nICAgICAgICAgTWVzc2FnZUhlYWRlciBoZWFkZXIgPSBtc2cuZ2V0SGVhZGVy\nKCk7CiAgICAgICAgICAgICAgICBpZiAoaGVhZGVyLmhhc1Byb3BlcnRpZXMo\nKSkgewogICAgICAgICAgICAgICAgICAgIE1hcDxTdHJpbmcsIEJ5dGVTdHJp\nbmc+IHByb3BzID0gTWFwVXRpbHMuYnVpbGRNYXAoaGVhZGVyLmdldFByb3Bl\ncnRpZXMoKSk7CiAgICAgICAgICAgICAgICAgICAgQnl0ZVN0cmluZyB2YWx1\nZSA9IHByb3BzLmdldChPUFRfTU9EKTsKICAgICAgICAgICAgICAgICAgICBp\nZiAobnVsbCA9PSB2YWx1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICBy\nZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAg\nICAgICAgICAgIGludCBpbnRWYWx1ZSA9IEludGVnZXIudmFsdWVPZih2YWx1\nZS50b1N0cmluZ1V0ZjgoKSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKDAg\nIT0gaW50VmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJu\nIGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAg\nICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAg\nICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAg\nICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0\ndXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAg\nIHB1YmxpYyBUZXN0TWVzc2FnZUZpbHRlcigpIHsKICAgICAgICBzdXBlcigx\nKTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIEBCZWZvcmUKICAgIHB1Ymxp\nYyB2b2lkIHNldFVwKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgc3Vw\nZXIuc2V0VXAoKTsKCiAgICAgICAgY29uZiA9IG5ldyBIdWJDbGllbnRDb25m\naWd1cmF0aW9uKCkgewogICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAg\nICAgcHVibGljIGJvb2xlYW4gaXNBdXRvU2VuZENvbnN1bWVNZXNzYWdlRW5h\nYmxlZCgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAg\nICAgICAgfQogICAgICAgIH07CiAgICAgICAgY2xpZW50ID0gbmV3IEhlZHdp\nZ0NsaWVudChjb25mKTsKICAgICAgICBwdWJsaXNoZXIgPSBjbGllbnQuZ2V0\nUHVibGlzaGVyKCk7CiAgICAgICAgc3Vic2NyaWJlciA9IGNsaWVudC5nZXRT\ndWJzY3JpYmVyKCk7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBAQWZ0ZXIK\nICAgIHB1YmxpYyB2b2lkIHRlYXJEb3duKCkgdGhyb3dzIEV4Y2VwdGlvbiB7\nCiAgICAgICAgY2xpZW50LmNsb3NlKCk7CiAgICAgICAgc3VwZXIudGVhckRv\nd24oKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgcHVibGlzaE51bXMoQnl0\nZVN0cmluZyB0b3BpYywgaW50IHN0YXJ0LCBpbnQgbnVtLCBpbnQgTSkgdGhy\nb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgZm9yIChpbnQgaT0xOyBpPD1udW07\nIGkrKykgewogICAgICAgICAgICBQdWJTdWJQcm90b2NvbC5NYXAuQnVpbGRl\nciBwcm9wc0J1aWxkZXIgPSBQdWJTdWJQcm90b2NvbC5NYXAubmV3QnVpbGRl\ncigpCiAgICAgICAgICAgICAgICAuYWRkRW50cmllcyhQdWJTdWJQcm90b2Nv\nbC5NYXAuRW50cnkubmV3QnVpbGRlcigpLnNldEtleShPUFRfTU9EKQogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKEJ5dGVTdHJpbmcu\nY29weUZyb21VdGY4KFN0cmluZy52YWx1ZU9mKChzdGFydCArIGkpICUgTSkp\nKSk7CiAgICAgICAgICAgIE1lc3NhZ2VIZWFkZXIuQnVpbGRlciBoZWFkZXJC\ndWlsZGVyID0gTWVzc2FnZUhlYWRlci5uZXdCdWlsZGVyKCkuc2V0UHJvcGVy\ndGllcyhwcm9wc0J1aWxkZXIpOwogICAgICAgICAgICBNZXNzYWdlIG1zZyA9\nIE1lc3NhZ2UubmV3QnVpbGRlcigpLnNldEJvZHkoCiAgICAgICAgICAgICAg\nICAgICAgICAgICAgQnl0ZVN0cmluZy5jb3B5RnJvbVV0ZjgoU3RyaW5nLnZh\nbHVlT2YoKHN0YXJ0ICsgaSkpKSkKICAgICAgICAgICAgICAgICAgICAgICAg\nICAuc2V0SGVhZGVyKGhlYWRlckJ1aWxkZXIpLmJ1aWxkKCk7CiAgICAgICAg\nICAgIHB1Ymxpc2hlci5wdWJsaXNoKHRvcGljLCBtc2cpOwogICAgICAgIH0K\nICAgIH0KCiAgICBwcml2YXRlIHZvaWQgcmVjZWl2ZU51bU1vZE0oZmluYWwg\nQnl0ZVN0cmluZyB0b3BpYywgZmluYWwgQnl0ZVN0cmluZyBzdWJpZCwKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbCBTdHJpbmcgZmls\ndGVyQ2xhc3NOYW1lLCBmaW5hbCBDbGllbnRNZXNzYWdlRmlsdGVyIGZpbHRl\nciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbCBpbnQg\nc3RhcnQsIGZpbmFsIGludCBudW0sIGZpbmFsIGludCBNLAogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIGZpbmFsIGJvb2xlYW4gY29uc3VtZSkK\nICAgIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIFB1YlN1YlByb3RvY29s\nLk1hcCB1c2VyT3B0aW9ucyA9IFB1YlN1YlByb3RvY29sLk1hcC5uZXdCdWls\nZGVyKCkKICAgICAgICAgICAgLmFkZEVudHJpZXMoUHViU3ViUHJvdG9jb2wu\nTWFwLkVudHJ5Lm5ld0J1aWxkZXIoKS5zZXRLZXkoT1BUX01PRCkKICAgICAg\nICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKEJ5dGVTdHJpbmcuY29weUZy\nb21VdGY4KFN0cmluZy52YWx1ZU9mKE0pKSkpLmJ1aWxkKCk7CiAgICAgICAg\nU3Vic2NyaXB0aW9uT3B0aW9ucy5CdWlsZGVyIG9wdGlvbnNCdWlsZGVyID0g\nU3Vic2NyaXB0aW9uT3B0aW9ucy5uZXdCdWlsZGVyKCkKICAgICAgICAgICAg\nLnNldENyZWF0ZU9yQXR0YWNoKENyZWF0ZU9yQXR0YWNoLkFUVEFDSCkKICAg\nICAgICAgICAgLnNldE9wdGlvbnModXNlck9wdGlvbnMpOwogICAgICAgIGlm\nIChudWxsICE9IGZpbHRlckNsYXNzTmFtZSkgewogICAgICAgICAgICBvcHRp\nb25zQnVpbGRlci5zZXRNZXNzYWdlRmlsdGVyKGZpbHRlckNsYXNzTmFtZSk7\nCiAgICAgICAgfQogICAgICAgIHN1YnNjcmliZXIuc3Vic2NyaWJlKHRvcGlj\nLCBzdWJpZCwgb3B0aW9uc0J1aWxkZXIuYnVpbGQoKSk7CgogICAgICAgIGZp\nbmFsIGludCBiYXNlID0gc3RhcnQgKyBNIC0gc3RhcnQgJSBNOwoKICAgICAg\nICBmaW5hbCBBdG9taWNJbnRlZ2VyIGV4cGVjdGVkID0gbmV3IEF0b21pY0lu\ndGVnZXIoYmFzZSk7CiAgICAgICAgZmluYWwgQ291bnREb3duTGF0Y2ggbGF0\nY2ggPSBuZXcgQ291bnREb3duTGF0Y2goMSk7CiAgICAgICAgTWVzc2FnZUhh\nbmRsZXIgbXNnSGFuZGxlciA9IG5ldyBNZXNzYWdlSGFuZGxlcigpIHsKICAg\nICAgICAgICAgc3luY2hyb25pemVkIHB1YmxpYyB2b2lkIGRlbGl2ZXIoQnl0\nZVN0cmluZyB0b3BpYywgQnl0ZVN0cmluZyBzdWJzY3JpYmVySWQsCiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lc3Nh\nZ2UgbXNnLCBDYWxsYmFjazxWb2lkPiBjYWxsYmFjaywKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0IGNvbnRl\neHQpIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAg\nICAgaW50IHZhbHVlID0gSW50ZWdlci52YWx1ZU9mKG1zZy5nZXRCb2R5KCku\ndG9TdHJpbmdVdGY4KCkpOwogICAgICAgICAgICAgICAgICAgIC8vIGR1cGxp\nY2F0ZWQgbWVzc2FnZXMgcmVjZWl2ZWQsIGlnbm9yZSB0aGVtCiAgICAgICAg\nICAgICAgICAgICAgaWYgKHZhbHVlID4gc3RhcnQpIHsKICAgICAgICAgICAg\nICAgICAgICAgICAgaWYgKHZhbHVlID09IGV4cGVjdGVkLmdldCgpKSB7CiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZC5hZGRBbmRHZXQo\nTSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoIkRpZCBub3QgcmVj\nZWl2ZSBleHBlY3RlZCB2YWx1ZSwgZXhwZWN0ZWQge30sIGdvdCB7fSIsCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0\nZWQuZ2V0KCksIHZhbHVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIGV4cGVjdGVkLnNldCgwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIGxhdGNoLmNvdW50RG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICB9\nCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleHBlY3RlZC5nZXQoKSA9\nPSAoYmFzZSArIG51bSAqIE0pKSB7CiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICBsYXRjaC5jb3VudERvd24oKTsKICAgICAgICAgICAgICAgICAgICAg\nICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAg\nICBjYWxsYmFjay5vcGVyYXRpb25GaW5pc2hlZChjb250ZXh0LCBudWxsKTsK\nICAgICAgICAgICAgICAgICAgICBpZiAoY29uc3VtZSkgewogICAgICAgICAg\nICAgICAgICAgICAgICBzdWJzY3JpYmVyLmNvbnN1bWUodG9waWMsIHN1Ymlk\nLCBtc2cuZ2V0TXNnSWQoKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAg\nICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAg\nICAgICAgICAgICBsb2dnZXIuZXJyb3IoIlJlY2VpdmVkIGJhZCBtZXNzYWdl\nIiwgZSk7CiAgICAgICAgICAgICAgICAgICAgbGF0Y2guY291bnREb3duKCk7\nCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9Owog\nICAgICAgIGlmIChudWxsICE9IGZpbHRlcikgewogICAgICAgICAgICBzdWJz\nY3JpYmVyLnN0YXJ0RGVsaXZlcnlXaXRoRmlsdGVyKHRvcGljLCBzdWJpZCwg\nbXNnSGFuZGxlciwgZmlsdGVyKTsKICAgICAgICB9IGVsc2UgewogICAgICAg\nICAgICBzdWJzY3JpYmVyLnN0YXJ0RGVsaXZlcnkodG9waWMsIHN1YmlkLCBt\nc2dIYW5kbGVyKTsKICAgICAgICB9CiAgICAgICAgYXNzZXJ0VHJ1ZSgiVGlt\nZWQgb3V0IHdhaXRpbmcgZm9yIG1lc3NhZ2VzIG1vZCAiICsgTSArICIgZXhw\nZWN0ZWQgaXMgIiArIGV4cGVjdGVkLmdldCgpLAogICAgICAgICAgICAgICAg\nICAgbGF0Y2guYXdhaXQoMTAsIFRpbWVVbml0LlNFQ09ORFMpKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoIlNob3VsZCBiZSBleHBlY3RlZCBtZXNzYWdlIHdp\ndGggIiArIChiYXNlICsgbnVtICogTSksIChiYXNlICsgbnVtKk0pLCBleHBl\nY3RlZC5nZXQoKSk7CiAgICAgICAgc3Vic2NyaWJlci5zdG9wRGVsaXZlcnko\ndG9waWMsIHN1YmlkKTsKICAgICAgICBzdWJzY3JpYmVyLmNsb3NlU3Vic2Ny\naXB0aW9uKHRvcGljLCBzdWJpZCk7CiAgICB9CgogICAgQFRlc3QodGltZW91\ndD02MDAwMCkKICAgIHB1YmxpYyB2b2lkIHRlc3RTZXJ2ZXJTaWRlTWVzc2Fn\nZUZpbHRlcigpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIEJ5dGVTdHJp\nbmcgdG9waWMgPSBCeXRlU3RyaW5nLmNvcHlGcm9tVXRmOCgiVGVzdE1lc3Nh\nZ2VGaWx0ZXIiKTsKICAgICAgICBCeXRlU3RyaW5nIHN1YmlkID0gQnl0ZVN0\ncmluZy5jb3B5RnJvbVV0ZjgoIm15c3ViIik7CgogICAgICAgIFN1YnNjcmlw\ndGlvbk9wdGlvbnMgb3B0cyA9IFN1YnNjcmlwdGlvbk9wdGlvbnMubmV3QnVp\nbGRlcigpCiAgICAgICAgICAgIC5zZXRDcmVhdGVPckF0dGFjaChDcmVhdGVP\nckF0dGFjaC5DUkVBVEVfT1JfQVRUQUNIKS5idWlsZCgpOwogICAgICAgIHN1\nYnNjcmliZXIuc3Vic2NyaWJlKHRvcGljLCBzdWJpZCwgb3B0cyk7CiAgICAg\nICAgc3Vic2NyaWJlci5jbG9zZVN1YnNjcmlwdGlvbih0b3BpYywgc3ViaWQp\nOwogICAgICAgIHB1Ymxpc2hOdW1zKHRvcGljLCAwLCAxMDAsIDIpOwogICAg\nICAgIHJlY2VpdmVOdW1Nb2RNKHRvcGljLCBzdWJpZCwgTW9kTWVzc2FnZUZp\nbHRlci5jbGFzcy5nZXROYW1lKCksIG51bGwsIDAsIDUwLCAyLCB0cnVlKTsK\nICAgIH0KCiAgICBAVGVzdCh0aW1lb3V0PTYwMDAwKQogICAgcHVibGljIHZv\naWQgdGVzdEludmFsaWRTZXJ2ZXJTaWRlTWVzc2FnZUZpbHRlcigpIHRocm93\ncyBFeGNlcHRpb24gewogICAgICAgIEJ5dGVTdHJpbmcgdG9waWMgPSBCeXRl\nU3RyaW5nLmNvcHlGcm9tVXRmOCgiVGVzdEludmFsaWRNZXNzYWdlRmlsdGVy\nIik7CiAgICAgICAgQnl0ZVN0cmluZyBzdWJpZCA9IEJ5dGVTdHJpbmcuY29w\neUZyb21VdGY4KCJteXN1YiIpOwoKICAgICAgICBTdWJzY3JpcHRpb25PcHRp\nb25zIG9wdGlvbnMgPSBTdWJzY3JpcHRpb25PcHRpb25zLm5ld0J1aWxkZXIo\nKQogICAgICAgICAgICAuc2V0Q3JlYXRlT3JBdHRhY2goQ3JlYXRlT3JBdHRh\nY2guQ1JFQVRFX09SX0FUVEFDSCkKICAgICAgICAgICAgLnNldE1lc3NhZ2VG\naWx0ZXIoIkludmFsaWRfTWVzc2FnZV9GaWx0ZXIiKS5idWlsZCgpOwogICAg\nICAgIHRyeSB7CiAgICAgICAgICAgIHN1YnNjcmliZXIuc3Vic2NyaWJlKHRv\ncGljLCBzdWJpZCwgb3B0aW9ucyk7CiAgICAgICAgICAgIC8vIGNvdW4ndCBy\nZWFjaCBoZXJlCiAgICAgICAgICAgIGZhaWwoIlNob3VsZCBmYWlsIHN1YnNj\ncmliZSB3aXRoIGludmFsaWQgbWVzc2FnZSBmaWx0ZXIiKTsKICAgICAgICB9\nIGNhdGNoIChQdWJTdWJFeGNlcHRpb24gcHNlKSB7CiAgICAgICAgICAgIGFz\nc2VydFRydWUoIlNob3VsZCByZXNwb25kIHdpdGggSU5WQUxJRF9NRVNTQUdF\nX0ZJTFRFUiIsCiAgICAgICAgICAgICAgICAgICAgICAgcHNlLmdldE1lc3Nh\nZ2UoKS5jb250YWlucygiSU5WQUxJRF9NRVNTQUdFX0ZJTFRFUiIpKTsKICAg\nICAgICB9CiAgICB9CgogICAgQFRlc3QodGltZW91dD02MDAwMCkKICAgIHB1\nYmxpYyB2b2lkIHRlc3RDaGFuZ2VTdWJzY3JpcHRpb25QcmVmZXJlbmNlcygp\nIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIEJ5dGVTdHJpbmcgdG9waWMg\nPSBCeXRlU3RyaW5nLmNvcHlGcm9tVXRmOCgiVGVzdENoYW5nZVN1YnNjcmlw\ndGlvblByZWZlcmVuY2VzIik7CiAgICAgICAgQnl0ZVN0cmluZyBzdWJpZCA9\nIEJ5dGVTdHJpbmcuY29weUZyb21VdGY4KCJteXN1YiIpOwoKICAgICAgICBT\ndWJzY3JpcHRpb25PcHRpb25zIG9wdHMgPSBTdWJzY3JpcHRpb25PcHRpb25z\nLm5ld0J1aWxkZXIoKQogICAgICAgICAgICAuc2V0Q3JlYXRlT3JBdHRhY2go\nQ3JlYXRlT3JBdHRhY2guQ1JFQVRFX09SX0FUVEFDSCkuYnVpbGQoKTsKICAg\nICAgICBzdWJzY3JpYmVyLnN1YnNjcmliZSh0b3BpYywgc3ViaWQsIG9wdHMp\nOwogICAgICAgIHN1YnNjcmliZXIuY2xvc2VTdWJzY3JpcHRpb24odG9waWMs\nIHN1YmlkKTsKCiAgICAgICAgcHVibGlzaE51bXModG9waWMsIDAsIDEwMCwg\nMik7CiAgICAgICAgcmVjZWl2ZU51bU1vZE0odG9waWMsIHN1YmlkLCBNb2RN\nZXNzYWdlRmlsdGVyLmNsYXNzLmdldE5hbWUoKSwgbnVsbCwgMCwgNTAsIDIs\nIGZhbHNlKTsKICAgICAgICByZWNlaXZlTnVtTW9kTSh0b3BpYywgc3ViaWQs\nIE1vZE1lc3NhZ2VGaWx0ZXIuY2xhc3MuZ2V0TmFtZSgpLCBudWxsLCAwLCAy\nNSwgNCwgZmFsc2UpOwogICAgICAgIHJlY2VpdmVOdW1Nb2RNKHRvcGljLCBz\ndWJpZCwgTW9kTWVzc2FnZUZpbHRlci5jbGFzcy5nZXROYW1lKCksIG51bGws\nIDAsIDMzLCAzLCB0cnVlKTsKCiAgICAgICAgLy8gY2hhbmdlIG1vZCB0byBy\nZWNlaXZlIG51bWJlcnMgbW9kIDUKICAgICAgICBwdWJsaXNoTnVtcyh0b3Bp\nYywgMTAwLCAxMDAsIDUpOwogICAgICAgIHJlY2VpdmVOdW1Nb2RNKHRvcGlj\nLCBzdWJpZCwgTW9kTWVzc2FnZUZpbHRlci5jbGFzcy5nZXROYW1lKCksIG51\nbGwsIDEwMCwgMjAsIDUsIHRydWUpOwoKICAgICAgICAvLyBjaGFuZ2UgbW9k\nIHRvIHJlY2VpdmUgbnVtYmVycyBtb2QgNwogICAgICAgIHB1Ymxpc2hOdW1z\nKHRvcGljLCAyMDAsIDEwMCwgNyk7CiAgICAgICAgcmVjZWl2ZU51bU1vZE0o\ndG9waWMsIHN1YmlkLCBNb2RNZXNzYWdlRmlsdGVyLmNsYXNzLmdldE5hbWUo\nKSwgbnVsbCwgMjAwLCAxNCwgNywgdHJ1ZSk7CiAgICB9CgogICAgQFRlc3Qo\ndGltZW91dD02MDAwMCkKICAgIHB1YmxpYyB2b2lkIHRlc3RDaGFuZ2VTZXJ2\nZXJTaWRlTWVzc2FnZUZpbHRlcigpIHRocm93cyBFeGNlcHRpb24gewogICAg\nICAgIEJ5dGVTdHJpbmcgdG9waWMgPSBCeXRlU3RyaW5nLmNvcHlGcm9tVXRm\nOCgiVGVzdENoYW5nZU1lc3NhZ2VGaWx0ZXIiKTsKICAgICAgICBCeXRlU3Ry\naW5nIHN1YmlkID0gQnl0ZVN0cmluZy5jb3B5RnJvbVV0ZjgoIm15c3ViIik7\nCgogICAgICAgIFN1YnNjcmlwdGlvbk9wdGlvbnMgb3B0cyA9IFN1YnNjcmlw\ndGlvbk9wdGlvbnMubmV3QnVpbGRlcigpCiAgICAgICAgICAgIC5zZXRDcmVh\ndGVPckF0dGFjaChDcmVhdGVPckF0dGFjaC5DUkVBVEVfT1JfQVRUQUNIKS5i\ndWlsZCgpOwogICAgICAgIHN1YnNjcmliZXIuc3Vic2NyaWJlKHRvcGljLCBz\ndWJpZCwgb3B0cyk7CiAgICAgICAgc3Vic2NyaWJlci5jbG9zZVN1YnNjcmlw\ndGlvbih0b3BpYywgc3ViaWQpOwoKICAgICAgICBwdWJsaXNoTnVtcyh0b3Bp\nYywgMCwgMTAwLCAzKTsKICAgICAgICByZWNlaXZlTnVtTW9kTSh0b3BpYywg\nc3ViaWQsIE1vZE1lc3NhZ2VGaWx0ZXIuY2xhc3MuZ2V0TmFtZSgpLCBudWxs\nLCAwLCA1MCwgMiwgZmFsc2UpOwogICAgICAgIHJlY2VpdmVOdW1Nb2RNKHRv\ncGljLCBzdWJpZCwgTW9kTWVzc2FnZUZpbHRlci5jbGFzcy5nZXROYW1lKCks\nIG51bGwsIDAsIDI1LCA0LCBmYWxzZSk7CiAgICAgICAgcmVjZWl2ZU51bU1v\nZE0odG9waWMsIHN1YmlkLCBIZWFkZXJNZXNzYWdlRmlsdGVyLmNsYXNzLmdl\ndE5hbWUoKSwgbnVsbCwgMCwgMzMsIDMsIHRydWUpOwoKICAgICAgICBwdWJs\naXNoTnVtcyh0b3BpYywgMjAwLCAxMDAsIDcpOwogICAgICAgIHJlY2VpdmVO\ndW1Nb2RNKHRvcGljLCBzdWJpZCwgSGVhZGVyTWVzc2FnZUZpbHRlci5jbGFz\ncy5nZXROYW1lKCksIG51bGwsIDIwMCwgMTQsIDcsIHRydWUpOwogICAgfQoK\nICAgIEBUZXN0KHRpbWVvdXQ9NjAwMDApCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nRml4SW52YWxpZFNlcnZlclNpZGVNZXNzYWdlRmlsdGVyKCkgdGhyb3dzIEV4\nY2VwdGlvbiB7CiAgICAgICAgQnl0ZVN0cmluZyB0b3BpYyA9IEJ5dGVTdHJp\nbmcuY29weUZyb21VdGY4KCJUZXN0Rml4TWVzc2FnZUZpbHRlciIpOwogICAg\nICAgIEJ5dGVTdHJpbmcgc3ViaWQgPSBCeXRlU3RyaW5nLmNvcHlGcm9tVXRm\nOCgibXlzdWIiKTsKCiAgICAgICAgU3Vic2NyaXB0aW9uT3B0aW9ucyBvcHRz\nID0gU3Vic2NyaXB0aW9uT3B0aW9ucy5uZXdCdWlsZGVyKCkKICAgICAgICAg\nICAgLnNldENyZWF0ZU9yQXR0YWNoKENyZWF0ZU9yQXR0YWNoLkNSRUFURV9P\nUl9BVFRBQ0gpLmJ1aWxkKCk7CiAgICAgICAgc3Vic2NyaWJlci5zdWJzY3Jp\nYmUodG9waWMsIHN1YmlkLCBvcHRzKTsKICAgICAgICBzdWJzY3JpYmVyLmNs\nb3NlU3Vic2NyaXB0aW9uKHRvcGljLCBzdWJpZCk7CgogICAgICAgIHB1Ymxp\nc2hOdW1zKHRvcGljLCAwLCAxMDAsIDMpOwogICAgICAgIHRyeSB7CiAgICAg\nICAgICAgIHJlY2VpdmVOdW1Nb2RNKHRvcGljLCBzdWJpZCwgIkludmFsaWRf\nTWVzc2FnZV9GaWx0ZXIiLCBudWxsLCAwLCAzMywgMywgdHJ1ZSk7CiAgICAg\nICAgICAgIC8vIGNvdW4ndCByZWFjaCBoZXJlCiAgICAgICAgICAgIGZhaWwo\nIlNob3VsZCBmYWlsIHN1YnNjcmliZSB3aXRoIGludmFsaWQgbWVzc2FnZSBm\naWx0ZXIiKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gcHNlKSB7CiAg\nICAgICAgICAgIGFzc2VydFRydWUoIlNob3VsZCByZXNwb25kIHdpdGggSU5W\nQUxJRF9NRVNTQUdFX0ZJTFRFUiIsCiAgICAgICAgICAgICAgICAgICAgICAg\ncHNlLmdldE1lc3NhZ2UoKS5jb250YWlucygiSU5WQUxJRF9NRVNTQUdFX0ZJ\nTFRFUiIpKTsKICAgICAgICB9CiAgICAgICAgcmVjZWl2ZU51bU1vZE0odG9w\naWMsIHN1YmlkLCBIZWFkZXJNZXNzYWdlRmlsdGVyLmNsYXNzLmdldE5hbWUo\nKSwgbnVsbCwgMCwgMzMsIDMsIHRydWUpOwogICAgfQoKICAgIEBUZXN0KHRp\nbWVvdXQ9NjAwMDApCiAgICBwdWJsaWMgdm9pZCB0ZXN0TnVsbENsaWVudE1l\nc3NhZ2VGaWx0ZXIoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBCeXRl\nU3RyaW5nIHRvcGljID0gQnl0ZVN0cmluZy5jb3B5RnJvbVV0ZjgoIlRlc3RO\ndWxsQ2xpZW50TWVzc2FnZUZpbHRlciIpOwogICAgICAgIEJ5dGVTdHJpbmcg\nc3ViaWQgPSBCeXRlU3RyaW5nLmNvcHlGcm9tVXRmOCgibXlzdWIiKTsKICAg\nICAgICBTdWJzY3JpcHRpb25PcHRpb25zIG9wdHMgPSBTdWJzY3JpcHRpb25P\ncHRpb25zLm5ld0J1aWxkZXIoKQogICAgICAgICAgICAuc2V0Q3JlYXRlT3JB\ndHRhY2goQ3JlYXRlT3JBdHRhY2guQ1JFQVRFX09SX0FUVEFDSCkuYnVpbGQo\nKTsKICAgICAgICBzdWJzY3JpYmVyLnN1YnNjcmliZSh0b3BpYywgc3ViaWQs\nIG9wdHMpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHN1YnNjcmliZXIu\nc3RhcnREZWxpdmVyeVdpdGhGaWx0ZXIodG9waWMsIHN1YmlkLCBudWxsLCBu\nZXcgTW9kTWVzc2FnZUZpbHRlcigpKTsKICAgICAgICAgICAgZmFpbCgiU2hv\ndWxkIGZhaWwgc3RhcnQgZGVsaXZlcnkgd2l0aCBmaWx0ZXIgdXNpbmcgbnVs\nbCBtZXNzYWdlIGhhbmRsZXIuIik7CiAgICAgICAgfSBjYXRjaCAoTnVsbFBv\naW50ZXJFeGNlcHRpb24gbnBlKSB7CiAgICAgICAgfQoKICAgICAgICB0cnkg\newogICAgICAgICAgICBzdWJzY3JpYmVyLnN0YXJ0RGVsaXZlcnlXaXRoRmls\ndGVyKHRvcGljLCBzdWJpZCwgbmV3IE1lc3NhZ2VIYW5kbGVyKCkgewogICAg\nICAgICAgICAgICAgcHVibGljIHZvaWQgZGVsaXZlcihCeXRlU3RyaW5nIHRv\ncGljLCBCeXRlU3RyaW5nIHN1YnNjcmliZXJJZCwKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZSBtc2csIENhbGxiYWNrPFZv\naWQ+IGNhbGxiYWNrLCBPYmplY3QgY29udGV4dCkgewogICAgICAgICAgICAg\nICAgICAgIC8vIGRvIG5vdGhpbmcKICAgICAgICAgICAgICAgIH0KICAgICAg\nICAgICAgfSwgbnVsbCk7CiAgICAgICAgICAgIGZhaWwoIlNob3VsZCBmYWls\nIHN0YXJ0IGRlbGl2ZXJ5IHdpdGggZmlsdGVyIHVzaW5nIG51bGwgbWVzc2Fn\nZSBmaWx0ZXIuIik7CiAgICAgICAgfSBjYXRjaCAoTnVsbFBvaW50ZXJFeGNl\ncHRpb24gbnBlKSB7CiAgICAgICAgfQogICAgfQoKICAgIEBUZXN0KHRpbWVv\ndXQ9NjAwMDApCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q2xpZW50U2lkZU1lc3Nh\nZ2VGaWx0ZXIoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBCeXRlU3Ry\naW5nIHRvcGljID0gQnl0ZVN0cmluZy5jb3B5RnJvbVV0ZjgoIlRlc3RDbGll\nbnRNZXNzYWdlRmlsdGVyIik7CiAgICAgICAgQnl0ZVN0cmluZyBzdWJpZCA9\nIEJ5dGVTdHJpbmcuY29weUZyb21VdGY4KCJteXN1YiIpOwoKICAgICAgICBT\ndWJzY3JpcHRpb25PcHRpb25zIG9wdHMgPSBTdWJzY3JpcHRpb25PcHRpb25z\nLm5ld0J1aWxkZXIoKQogICAgICAgICAgICAuc2V0Q3JlYXRlT3JBdHRhY2go\nQ3JlYXRlT3JBdHRhY2guQ1JFQVRFX09SX0FUVEFDSCkuYnVpbGQoKTsKICAg\nICAgICBzdWJzY3JpYmVyLnN1YnNjcmliZSh0b3BpYywgc3ViaWQsIG9wdHMp\nOwogICAgICAgIHN1YnNjcmliZXIuY2xvc2VTdWJzY3JpcHRpb24odG9waWMs\nIHN1YmlkKTsKICAgICAgICBwdWJsaXNoTnVtcyh0b3BpYywgMCwgMTAwLCAy\nKTsKICAgICAgICByZWNlaXZlTnVtTW9kTSh0b3BpYywgc3ViaWQsIG51bGws\nIG5ldyBNb2RNZXNzYWdlRmlsdGVyKCksIDAsIDUwLCAyLCB0cnVlKTsKICAg\nIH0KCiAgICBAVGVzdCh0aW1lb3V0PTYwMDAwKQogICAgcHVibGljIHZvaWQg\ndGVzdENoYW5nZVN1YnNjcmlwdGlvblByZWZlcmVuY2VzRm9yQ2xpZW50Rmls\ndGVyKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgQnl0ZVN0cmluZyB0\nb3BpYyA9IEJ5dGVTdHJpbmcuY29weUZyb21VdGY4KCJUZXN0Q2hhbmdlU3Vi\nc2NyaXB0aW9uUHJlZmVyZW5jZXNGb3JDbGllbnRGaWx0ZXIiKTsKICAgICAg\nICBCeXRlU3RyaW5nIHN1YmlkID0gQnl0ZVN0cmluZy5jb3B5RnJvbVV0Zjgo\nIm15c3ViIik7CgogICAgICAgIFN1YnNjcmlwdGlvbk9wdGlvbnMgb3B0cyA9\nIFN1YnNjcmlwdGlvbk9wdGlvbnMubmV3QnVpbGRlcigpCiAgICAgICAgICAg\nIC5zZXRDcmVhdGVPckF0dGFjaChDcmVhdGVPckF0dGFjaC5DUkVBVEVfT1Jf\nQVRUQUNIKS5idWlsZCgpOwogICAgICAgIHN1YnNjcmliZXIuc3Vic2NyaWJl\nKHRvcGljLCBzdWJpZCwgb3B0cyk7CiAgICAgICAgc3Vic2NyaWJlci5jbG9z\nZVN1YnNjcmlwdGlvbih0b3BpYywgc3ViaWQpOwoKICAgICAgICBwdWJsaXNo\nTnVtcyh0b3BpYywgMCwgMTAwLCAyKTsKICAgICAgICByZWNlaXZlTnVtTW9k\nTSh0b3BpYywgc3ViaWQsIG51bGwsIG5ldyBNb2RNZXNzYWdlRmlsdGVyKCks\nIDAsIDUwLCAyLCBmYWxzZSk7CiAgICAgICAgcmVjZWl2ZU51bU1vZE0odG9w\naWMsIHN1YmlkLCBudWxsLCBuZXcgTW9kTWVzc2FnZUZpbHRlcigpLCAwLCAy\nNSwgNCwgZmFsc2UpOwogICAgICAgIHJlY2VpdmVOdW1Nb2RNKHRvcGljLCBz\ndWJpZCwgbnVsbCwgbmV3IE1vZE1lc3NhZ2VGaWx0ZXIoKSwgMCwgMzMsIDMs\nIHRydWUpOwogICAgfQoKICAgIEBUZXN0KHRpbWVvdXQ9NjAwMDApCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0Q2hhbmdlQ2xpZW50U2lkZU1lc3NhZ2VGaWx0ZXIo\nKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBCeXRlU3RyaW5nIHRvcGlj\nID0gQnl0ZVN0cmluZy5jb3B5RnJvbVV0ZjgoIlRlc3RDaGFuZ2VDbGllbnRT\naWRlTWVzc2FnZUZpbHRlciIpOwogICAgICAgIEJ5dGVTdHJpbmcgc3ViaWQg\nPSBCeXRlU3RyaW5nLmNvcHlGcm9tVXRmOCgibXlzdWIiKTsKCiAgICAgICAg\nU3Vic2NyaXB0aW9uT3B0aW9ucyBvcHRzID0gU3Vic2NyaXB0aW9uT3B0aW9u\ncy5uZXdCdWlsZGVyKCkKICAgICAgICAgICAgLnNldENyZWF0ZU9yQXR0YWNo\nKENyZWF0ZU9yQXR0YWNoLkNSRUFURV9PUl9BVFRBQ0gpLmJ1aWxkKCk7CiAg\nICAgICAgc3Vic2NyaWJlci5zdWJzY3JpYmUodG9waWMsIHN1YmlkLCBvcHRz\nKTsKICAgICAgICBzdWJzY3JpYmVyLmNsb3NlU3Vic2NyaXB0aW9uKHRvcGlj\nLCBzdWJpZCk7CgogICAgICAgIHB1Ymxpc2hOdW1zKHRvcGljLCAwLCAxMDAs\nIDMpOwogICAgICAgIHJlY2VpdmVOdW1Nb2RNKHRvcGljLCBzdWJpZCwgbnVs\nbCwgbmV3IE1vZE1lc3NhZ2VGaWx0ZXIoKSwgMCwgNTAsIDIsIGZhbHNlKTsK\nICAgICAgICByZWNlaXZlTnVtTW9kTSh0b3BpYywgc3ViaWQsIG51bGwsIG5l\ndyBIZWFkZXJNZXNzYWdlRmlsdGVyKCksIDAsIDMzLCAzLCB0cnVlKTsKICAg\nIH0KfQo=\n","encoding":"base64"}

