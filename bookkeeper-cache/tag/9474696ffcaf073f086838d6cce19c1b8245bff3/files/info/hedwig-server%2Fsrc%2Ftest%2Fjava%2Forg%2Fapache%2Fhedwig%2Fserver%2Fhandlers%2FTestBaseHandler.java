{"sha":"4a5c63d4b35b6848c6cc90dd0ff6838482be2fd9","node_id":"MDQ6QmxvYjE1NzU5NTY6NGE1YzYzZDRiMzViNjg0OGM2Y2M5MGRkMGZmNjgzODQ4MmJlMmZkOQ==","size":3897,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/4a5c63d4b35b6848c6cc90dd0ff6838482be2fd9","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIuaGFuZGxlcnM7CgppbXBv\ncnQgamF2YS51dGlsLkxpc3Q7CgppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmNo\nYW5uZWwuQ2hhbm5lbDsKaW1wb3J0IG9yZy5qdW5pdC5CZWZvcmU7CmltcG9y\ndCBvcmcuanVuaXQuVGVzdDsKCmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5w\ncm90b2NvbC5QdWJTdWJQcm90b2NvbC5QdWJTdWJSZXF1ZXN0OwppbXBvcnQg\nb3JnLmFwYWNoZS5oZWR3aWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2wuUHVi\nU3ViUmVzcG9uc2U7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2Nv\nbC5QdWJTdWJQcm90b2NvbC5TdGF0dXNDb2RlOwppbXBvcnQgb3JnLmFwYWNo\nZS5oZWR3aWcuc2VydmVyLmNvbW1vbi5TZXJ2ZXJDb25maWd1cmF0aW9uOwpp\nbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuc2VydmVyLm5ldHR5LldyaXRlUmVj\nb3JkaW5nQ2hhbm5lbDsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnNlcnZl\nci50b3BpY3MuU3R1YlRvcGljTWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFjaGUu\naGVkd2lnLnNlcnZlci50b3BpY3MuVG9waWNNYW5hZ2VyOwoKaW1wb3J0IHN0\nYXRpYyBvcmcuanVuaXQuQXNzZXJ0Lio7CgpwdWJsaWMgY2xhc3MgVGVzdEJh\nc2VIYW5kbGVyIHsKCiAgICBNeUJhc2VIYW5kbGVyIGhhbmRsZXI7CiAgICBT\ndHViVG9waWNNYW5hZ2VyIHRtOwogICAgUHViU3ViUmVxdWVzdCByZXF1ZXN0\nID0gUHViU3ViUmVxdWVzdC5nZXREZWZhdWx0SW5zdGFuY2UoKTsKICAgIFdy\naXRlUmVjb3JkaW5nQ2hhbm5lbCBjaGFubmVsID0gbmV3IFdyaXRlUmVjb3Jk\naW5nQ2hhbm5lbCgpOwoKICAgIHByb3RlY3RlZCBjbGFzcyBNeUJhc2VIYW5k\nbGVyIGV4dGVuZHMgQmFzZUhhbmRsZXIgewoKICAgICAgICBwdWJsaWMgTXlC\nYXNlSGFuZGxlcihUb3BpY01hbmFnZXIgdG0sIFNlcnZlckNvbmZpZ3VyYXRp\nb24gY29uZikgewogICAgICAgICAgICBzdXBlcih0bSwgY29uZik7CiAgICAg\nICAgfQoKICAgICAgICBQdWJTdWJSZXF1ZXN0IHJlcXVlc3Q7CgogICAgICAg\nIHB1YmxpYyBQdWJTdWJSZXF1ZXN0IGdldFJlcXVlc3QoKSB7CiAgICAgICAg\nICAgIHJldHVybiByZXF1ZXN0OwogICAgICAgIH0KCiAgICAgICAgQE92ZXJy\naWRlCiAgICAgICAgcHVibGljIHZvaWQgaGFuZGxlUmVxdWVzdEF0T3duZXIo\nUHViU3ViUmVxdWVzdCByZXF1ZXN0LCBDaGFubmVsIGNoYW5uZWwpIHsKICAg\nICAgICAgICAgdGhpcy5yZXF1ZXN0ID0gcmVxdWVzdDsKICAgICAgICB9Cgog\nICAgfQoKICAgIEBCZWZvcmUKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgdGhy\nb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgU2VydmVyQ29uZmlndXJhdGlvbiBj\nb25mID0gbmV3IFNlcnZlckNvbmZpZ3VyYXRpb24oKTsKICAgICAgICB0bSA9\nIG5ldyBTdHViVG9waWNNYW5hZ2VyKGNvbmYpOwogICAgICAgIGhhbmRsZXIg\nPSBuZXcgTXlCYXNlSGFuZGxlcih0bSwgY29uZik7CiAgICAgICAgcmVxdWVz\ndCA9IFB1YlN1YlJlcXVlc3QuZ2V0RGVmYXVsdEluc3RhbmNlKCk7CiAgICAg\nICAgY2hhbm5lbCA9IG5ldyBXcml0ZVJlY29yZGluZ0NoYW5uZWwoKTsKICAg\nIH0KCiAgICBwdWJsaWMgUHViU3ViUmVzcG9uc2UgZ2V0UHViU3ViUmVzcG9u\nc2UoV3JpdGVSZWNvcmRpbmdDaGFubmVsIGNoYW5uZWwpIHsKICAgICAgICBM\naXN0PE9iamVjdD4gbWVzc2FnZXMgPSBjaGFubmVsLmdldE1lc3NhZ2VzV3Jp\ndHRlbigpOwogICAgICAgIGFzc2VydEVxdWFscyhtZXNzYWdlcy5zaXplKCks\nIDEpOwoKICAgICAgICBPYmplY3QgbWVzc2FnZSA9IG1lc3NhZ2VzLmdldCgw\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMobWVzc2FnZS5nZXRDbGFzcygpLCBQ\ndWJTdWJSZXNwb25zZS5jbGFzcyk7CgogICAgICAgIHJldHVybiAoUHViU3Vi\nUmVzcG9uc2UpIG1lc3NhZ2U7CiAgICB9CgogICAgQFRlc3QodGltZW91dD02\nMDAwMCkKICAgIHB1YmxpYyB2b2lkIHRlc3RIYW5kbGVSZXF1ZXN0T25SZWRp\ncmVjdCgpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIHRtLnNldFNob3Vs\nZE93bkV2ZXJ5TmV3VG9waWMoZmFsc2UpOwogICAgICAgIGhhbmRsZXIuaGFu\nZGxlUmVxdWVzdChyZXF1ZXN0LCBjaGFubmVsKTsKCiAgICAgICAgUHViU3Vi\nUmVzcG9uc2UgcmVzcG9uc2UgPSBnZXRQdWJTdWJSZXNwb25zZShjaGFubmVs\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMocmVzcG9uc2UuZ2V0U3RhdHVzQ29k\nZSgpLCBTdGF0dXNDb2RlLk5PVF9SRVNQT05TSUJMRV9GT1JfVE9QSUMpOwog\nICAgICAgIGFzc2VydEVxdWFscyhyZXF1ZXN0LmdldFR4bklkKCksIHJlc3Bv\nbnNlLmdldFR4bklkKCkpOwogICAgICAgIGFzc2VydE51bGwoaGFuZGxlci5n\nZXRSZXF1ZXN0KCkpOwoKICAgIH0KCiAgICBAVGVzdCh0aW1lb3V0PTYwMDAw\nKQogICAgcHVibGljIHZvaWQgdGVzdEhhbmRsZVJlcXVlc3RPbk93bmVyKCkg\ndGhyb3dzIEV4Y2VwdGlvbiB7CgogICAgICAgIHRtLnNldFNob3VsZE93bkV2\nZXJ5TmV3VG9waWModHJ1ZSk7CiAgICAgICAgaGFuZGxlci5oYW5kbGVSZXF1\nZXN0KHJlcXVlc3QsIGNoYW5uZWwpOwogICAgICAgIGFzc2VydEVxdWFscygw\nLCBjaGFubmVsLmdldE1lc3NhZ2VzV3JpdHRlbigpLnNpemUoKSk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKGhhbmRsZXIuZ2V0UmVxdWVzdCgpLCByZXF1ZXN0\nKTsKCiAgICB9CgogICAgQFRlc3QodGltZW91dD02MDAwMCkKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RIYW5kbGVSZXF1ZXN0T25FcnJvcigpIHRocm93cyBFeGNl\ncHRpb24gewoKICAgICAgICB0bS5zZXRTaG91bGRFcnJvcih0cnVlKTsKICAg\nICAgICBoYW5kbGVyLmhhbmRsZVJlcXVlc3QocmVxdWVzdCwgY2hhbm5lbCk7\nCgogICAgICAgIFB1YlN1YlJlc3BvbnNlIHJlc3BvbnNlID0gZ2V0UHViU3Vi\nUmVzcG9uc2UoY2hhbm5lbCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKHJlc3Bv\nbnNlLmdldFN0YXR1c0NvZGUoKSwgU3RhdHVzQ29kZS5TRVJWSUNFX0RPV04p\nOwogICAgICAgIGFzc2VydEVxdWFscyhyZXF1ZXN0LmdldFR4bklkKCksIHJl\nc3BvbnNlLmdldFR4bklkKCkpOwogICAgICAgIGFzc2VydE51bGwoaGFuZGxl\nci5nZXRSZXF1ZXN0KCkpOwoKICAgIH0KCn0K\n","encoding":"base64"}

