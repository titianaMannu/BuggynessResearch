{"sha":"241f45bbcb88e54f96be30c222ab1a9c6b65924b","node_id":"MDQ6QmxvYjE1NzU5NTY6MjQxZjQ1YmJjYjg4ZTU0Zjk2YmUzMGMyMjJhYjFhOWM2YjY1OTI0Yg==","size":10247,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/241f45bbcb88e54f96be30c222ab1a9c6b65924b","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIubmV0dHk7CgppbXBvcnQg\namF2YS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEubGFuZy5UaHJlYWQu\nVW5jYXVnaHRFeGNlcHRpb25IYW5kbGVyOwppbXBvcnQgamF2YS5uZXQuSW5l\ndFNvY2tldEFkZHJlc3M7CmltcG9ydCBqYXZhLnV0aWwuTGlua2VkTGlzdDsK\naW1wb3J0IGphdmEudXRpbC5MaXN0OwppbXBvcnQgamF2YS51dGlsLmNvbmN1\ncnJlbnQuRXhlY3V0b3JzOwppbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQu\nU3luY2hyb25vdXNRdWV1ZTsKCmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMu\nY29uZmlndXJhdGlvbi5Db25maWd1cmF0aW9uRXhjZXB0aW9uOwppbXBvcnQg\nb3JnLmFwYWNoZS56b29rZWVwZXIuV2F0Y2hlZEV2ZW50OwppbXBvcnQgb3Jn\nLmFwYWNoZS56b29rZWVwZXIuV2F0Y2hlcjsKaW1wb3J0IG9yZy5hcGFjaGUu\nem9va2VlcGVyLlpvb0tlZXBlcjsKaW1wb3J0IG9yZy5qdW5pdC5UZXN0OwoK\naW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci50ZXN0LlBvcnRNYW5hZ2Vy\nOwppbXBvcnQgY29tLmdvb2dsZS5wcm90b2J1Zi5CeXRlU3RyaW5nOwppbXBv\ncnQgb3JnLmFwYWNoZS5oZWR3aWcuY2xpZW50LmNvbmYuQ2xpZW50Q29uZmln\ndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmNsaWVudC5IZWR3\naWdDbGllbnQ7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQuYXBp\nLlB1Ymxpc2hlcjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmV4Y2VwdGlv\nbnMuUHViU3ViRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcu\ncHJvdG9jb2wuUHViU3ViUHJvdG9jb2wuTWVzc2FnZTsKaW1wb3J0IG9yZy5h\ncGFjaGUuaGVkd2lnLnNlcnZlci5QdWJTdWJTZXJ2ZXJTdGFuZEFsb25lVGVz\ndEJhc2U7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIuY29tbW9u\nLlNlcnZlckNvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdp\nZy5zZXJ2ZXIudG9waWNzLkFic3RyYWN0VG9waWNNYW5hZ2VyOwppbXBvcnQg\nb3JnLmFwYWNoZS5oZWR3aWcuc2VydmVyLnRvcGljcy5Ub3BpY01hbmFnZXI7\nCmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIuTG9nZ2luZ0V4Y2Vw\ndGlvbkhhbmRsZXI7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy51dGlsLkNh\nbGxiYWNrOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcudXRpbC5IZWR3aWdT\nb2NrZXRBZGRyZXNzOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuem9va2Vl\ncGVyLlNhZmVBc3luY1pLQ2FsbGJhY2s7CgppbXBvcnQgc3RhdGljIG9yZy5q\ndW5pdC5Bc3NlcnQuKjsKCnB1YmxpYyBjbGFzcyBUZXN0UHViU3ViU2VydmVy\nIGV4dGVuZHMgUHViU3ViU2VydmVyU3RhbmRBbG9uZVRlc3RCYXNlIHsKCiAg\nICBAVGVzdCh0aW1lb3V0PTYwMDAwKQogICAgcHVibGljIHZvaWQgdGVzdFNl\nY29uZFNlcnZlcigpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIFB1YlN1\nYlNlcnZlciBzZXJ2ZXIxID0gbmV3IFB1YlN1YlNlcnZlcihuZXcgU3RhbmRB\nbG9uZVNlcnZlckNvbmZpZ3VyYXRpb24oKSB7CiAgICAgICAgICAgICAgICBA\nT3ZlcnJpZGUKICAgICAgICAgICAgICAgIHB1YmxpYyBpbnQgZ2V0U2VydmVy\nUG9ydCgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuZ2V0\nU2VydmVyUG9ydCgpICsgMTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAg\nICAgfSwgbmV3IENsaWVudENvbmZpZ3VyYXRpb24oKSwgbmV3IExvZ2dpbmdF\neGNlcHRpb25IYW5kbGVyKCkpOwogICAgICAgIHNlcnZlcjEuc3RhcnQoKTsK\nICAgICAgICBzZXJ2ZXIxLnNodXRkb3duKCk7CiAgICB9CgogICAgY2xhc3Mg\nUmVjb3JkaW5nVW5jYXVnaHRFeGNlcHRpb25IYW5kbGVyIGltcGxlbWVudHMg\nVGhyZWFkLlVuY2F1Z2h0RXhjZXB0aW9uSGFuZGxlciB7CiAgICAgICAgU3lu\nY2hyb25vdXNRdWV1ZTxUaHJvd2FibGU+IHF1ZXVlOwoKICAgICAgICBwdWJs\naWMgUmVjb3JkaW5nVW5jYXVnaHRFeGNlcHRpb25IYW5kbGVyKFN5bmNocm9u\nb3VzUXVldWU8VGhyb3dhYmxlPiBxdWV1ZSkgewogICAgICAgICAgICB0aGlz\nLnF1ZXVlID0gcXVldWU7CiAgICAgICAgfQoKICAgICAgICBAT3ZlcnJpZGUK\nICAgICAgICBwdWJsaWMgdm9pZCB1bmNhdWdodEV4Y2VwdGlvbihUaHJlYWQg\ndCwgVGhyb3dhYmxlIGUpIHsKICAgICAgICAgICAgcXVldWUuYWRkKGUpOwog\nICAgICAgIH0KCiAgICB9CgogICAgcHJpdmF0ZSBpbnRlcmZhY2UgVG9waWNN\nYW5hZ2VySW5zdGFudGlhdG9yIHsKICAgICAgICBwdWJsaWMgVG9waWNNYW5h\nZ2VyIGluc3RhbnRpYXRlVG9waWNNYW5hZ2VyKCkgdGhyb3dzIElPRXhjZXB0\naW9uOwogICAgfQoKICAgIFB1YlN1YlNlcnZlciBzdGFydFNlcnZlcihmaW5h\nbCBVbmNhdWdodEV4Y2VwdGlvbkhhbmRsZXIgdW5jYXVnaHRFeGNlcHRpb25I\nYW5kbGVyLCBmaW5hbCBpbnQgcG9ydCwKICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICBmaW5hbCBUb3BpY01hbmFnZXJJbnN0YW50aWF0b3IgaW5zdGFu\ndGlhdG9yKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBQdWJTdWJTZXJ2\nZXIgc2VydmVyID0gbmV3IFB1YlN1YlNlcnZlcihuZXcgU3RhbmRBbG9uZVNl\ncnZlckNvbmZpZ3VyYXRpb24oKSB7CiAgICAgICAgICAgIEBPdmVycmlkZQog\nICAgICAgICAgICBwdWJsaWMgaW50IGdldFNlcnZlclBvcnQoKSB7CiAgICAg\nICAgICAgICAgICByZXR1cm4gcG9ydDsKICAgICAgICAgICAgfQoKICAgICAg\nICB9LCBuZXcgQ2xpZW50Q29uZmlndXJhdGlvbigpLCB1bmNhdWdodEV4Y2Vw\ndGlvbkhhbmRsZXIpIHsKCiAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAg\nICAgICBwcm90ZWN0ZWQgVG9waWNNYW5hZ2VyIGluc3RhbnRpYXRlVG9waWNN\nYW5hZ2VyKCkgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICAgICAgICAg\nIHJldHVybiBpbnN0YW50aWF0b3IuaW5zdGFudGlhdGVUb3BpY01hbmFnZXIo\nKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgc2VydmVyLnN0\nYXJ0KCk7CiAgICAgICAgcmV0dXJuIHNlcnZlcjsKCiAgICB9CgogICAgcHVi\nbGljIHZvaWQgcnVuUHVibGlzaFJlcXVlc3QoZmluYWwgaW50IHBvcnQpIHRo\ncm93cyBFeGNlcHRpb24gewogICAgICAgIFB1Ymxpc2hlciBwdWJsaXNoZXIg\nPSBuZXcgSGVkd2lnQ2xpZW50KG5ldyBDbGllbnRDb25maWd1cmF0aW9uKCkg\newogICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIElu\nZXRTb2NrZXRBZGRyZXNzIGdldERlZmF1bHRTZXJ2ZXJIb3N0KCkgewogICAg\nICAgICAgICAgICAgcmV0dXJuIG5ldyBJbmV0U29ja2V0QWRkcmVzcygibG9j\nYWxob3N0IiwgcG9ydCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KS5nZXRQ\ndWJsaXNoZXIoKTsKCiAgICAgICAgcHVibGlzaGVyLmFzeW5jUHVibGlzaChC\neXRlU3RyaW5nLmNvcHlGcm9tVXRmOCgiYmxhaCIpLCBNZXNzYWdlLm5ld0J1\naWxkZXIoKS5zZXRCb2R5KAogICAgICAgIEJ5dGVTdHJpbmcuY29weUZyb21V\ndGY4KCJibGFoIikpLmJ1aWxkKCksIG5ldyBDYWxsYmFjazxWb2lkPigpIHsK\nICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyB2b2lk\nIG9wZXJhdGlvbkZhaWxlZChPYmplY3QgY3R4LCBQdWJTdWJFeGNlcHRpb24g\nZXhjZXB0aW9uKSB7CiAgICAgICAgICAgICAgICBhc3NlcnRUcnVlKGZhbHNl\nKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAg\nICAgICAgIHB1YmxpYyB2b2lkIG9wZXJhdGlvbkZpbmlzaGVkKE9iamVjdCBj\ndHgsIFZvaWQgcmVzdWx0T2ZPcGVyYXRpb24pIHsKICAgICAgICAgICAgICAg\nIGFzc2VydFRydWUoZmFsc2UpOwogICAgICAgICAgICB9CgogICAgICAgIH0s\nIG51bGwpOwogICAgfQoKICAgIEBUZXN0KHRpbWVvdXQ9NjAwMDApCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0VW5jYXVnaHRFeGNlcHRpb25Jbk5ldHR5VGhyZWFk\nKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CgogICAgICAgIFN5bmNocm9ub3VzUXVl\ndWU8VGhyb3dhYmxlPiBxdWV1ZSA9IG5ldyBTeW5jaHJvbm91c1F1ZXVlPFRo\ncm93YWJsZT4oKTsKICAgICAgICBSZWNvcmRpbmdVbmNhdWdodEV4Y2VwdGlv\nbkhhbmRsZXIgdW5jYXVnaHRFeGNlcHRpb25IYW5kbGVyID0gbmV3IFJlY29y\nZGluZ1VuY2F1Z2h0RXhjZXB0aW9uSGFuZGxlcihxdWV1ZSk7CiAgICAgICAg\nZmluYWwgaW50IHBvcnQgPSBQb3J0TWFuYWdlci5uZXh0RnJlZVBvcnQoKTsK\nCiAgICAgICAgUHViU3ViU2VydmVyIHNlcnZlciA9IHN0YXJ0U2VydmVyKHVu\nY2F1Z2h0RXhjZXB0aW9uSGFuZGxlciwgcG9ydCwgbmV3IFRvcGljTWFuYWdl\nckluc3RhbnRpYXRvcigpIHsKCiAgICAgICAgICAgIEBPdmVycmlkZQogICAg\nICAgICAgICBwdWJsaWMgVG9waWNNYW5hZ2VyIGluc3RhbnRpYXRlVG9waWNN\nYW5hZ2VyKCkgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICAgICAgICAg\nIHJldHVybiBuZXcgQWJzdHJhY3RUb3BpY01hbmFnZXIobmV3IFNlcnZlckNv\nbmZpZ3VyYXRpb24oKSwgRXhlY3V0b3JzLm5ld1NpbmdsZVRocmVhZFNjaGVk\ndWxlZEV4ZWN1dG9yKCkpIHsKICAgICAgICAgICAgICAgICAgICBAT3ZlcnJp\nZGUKICAgICAgICAgICAgICAgICAgICBwcm90ZWN0ZWQgdm9pZCByZWFsR2V0\nT3duZXIoQnl0ZVN0cmluZyB0b3BpYywgYm9vbGVhbiBzaG91bGRDbGFpbSwK\nICAgICAgICAgICAgICAgICAgICBDYWxsYmFjazxIZWR3aWdTb2NrZXRBZGRy\nZXNzPiBjYiwgT2JqZWN0IGN0eCkgewogICAgICAgICAgICAgICAgICAgICAg\nICB0aHJvdyBuZXcgUnVudGltZUV4Y2VwdGlvbigidGhpcyBleGNlcHRpb24g\nc2hvdWxkIGJlIHVuY2F1Z2h0Iik7CiAgICAgICAgICAgICAgICAgICAgfQoK\nICAgICAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAg\nICAgICBwcm90ZWN0ZWQgdm9pZCBwb3N0UmVsZWFzZUNsZWFudXAoQnl0ZVN0\ncmluZyB0b3BpYywgQ2FsbGJhY2s8Vm9pZD4gY2IsIE9iamVjdCBjdHgpIHsK\nICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAg\nICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIHJ1blB1Ymxpc2hSZXF1\nZXN0KHBvcnQpOwogICAgICAgIGFzc2VydEVxdWFscyhSdW50aW1lRXhjZXB0\naW9uLmNsYXNzLCBxdWV1ZS50YWtlKCkuZ2V0Q2xhc3MoKSk7CiAgICAgICAg\nc2VydmVyLnNodXRkb3duKCk7CiAgICB9CgogICAgQFRlc3QodGltZW91dD02\nMDAwMCkKICAgIHB1YmxpYyB2b2lkIHRlc3RVbmNhdWdodEV4Y2VwdGlvbklu\nWktUaHJlYWQoKSB0aHJvd3MgRXhjZXB0aW9uIHsKCiAgICAgICAgU3luY2hy\nb25vdXNRdWV1ZTxUaHJvd2FibGU+IHF1ZXVlID0gbmV3IFN5bmNocm9ub3Vz\nUXVldWU8VGhyb3dhYmxlPigpOwogICAgICAgIFJlY29yZGluZ1VuY2F1Z2h0\nRXhjZXB0aW9uSGFuZGxlciB1bmNhdWdodEV4Y2VwdGlvbkhhbmRsZXIgPSBu\nZXcgUmVjb3JkaW5nVW5jYXVnaHRFeGNlcHRpb25IYW5kbGVyKHF1ZXVlKTsK\nICAgICAgICBmaW5hbCBpbnQgcG9ydCA9IFBvcnRNYW5hZ2VyLm5leHRGcmVl\nUG9ydCgpOwogICAgICAgIGZpbmFsIFN0cmluZyBob3N0UG9ydCA9ICIxMjcu\nMC4wLjE6IiArIFBvcnRNYW5hZ2VyLm5leHRGcmVlUG9ydCgpOwoKICAgICAg\nICBQdWJTdWJTZXJ2ZXIgc2VydmVyID0gc3RhcnRTZXJ2ZXIodW5jYXVnaHRF\neGNlcHRpb25IYW5kbGVyLCBwb3J0LCBuZXcgVG9waWNNYW5hZ2VySW5zdGFu\ndGlhdG9yKCkgewoKICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAg\nIHB1YmxpYyBUb3BpY01hbmFnZXIgaW5zdGFudGlhdGVUb3BpY01hbmFnZXIo\nKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgICAgICAgICAgcmV0dXJu\nIG5ldyBBYnN0cmFjdFRvcGljTWFuYWdlcihuZXcgU2VydmVyQ29uZmlndXJh\ndGlvbigpLCBFeGVjdXRvcnMubmV3U2luZ2xlVGhyZWFkU2NoZWR1bGVkRXhl\nY3V0b3IoKSkgewoKICAgICAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAg\nICAgICAgICAgICAgICAgICBwcm90ZWN0ZWQgdm9pZCByZWFsR2V0T3duZXIo\nQnl0ZVN0cmluZyB0b3BpYywgYm9vbGVhbiBzaG91bGRDbGFpbSwKICAgICAg\nICAgICAgICAgICAgICBDYWxsYmFjazxIZWR3aWdTb2NrZXRBZGRyZXNzPiBj\nYiwgT2JqZWN0IGN0eCkgewogICAgICAgICAgICAgICAgICAgICAgICBab29L\nZWVwZXIgem9va2VlcGVyOwogICAgICAgICAgICAgICAgICAgICAgICB0cnkg\newogICAgICAgICAgICAgICAgICAgICAgICAgICAgem9va2VlcGVyID0gbmV3\nIFpvb0tlZXBlcihob3N0UG9ydCwgNjAwMDAsIG5ldyBXYXRjaGVyKCkgewog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHByb2Nl\nc3MoV2F0Y2hlZEV2ZW50IGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIC8vIFRPRE8gQXV0by1nZW5lcmF0ZWQgbWV0aG9k\nIHN0dWIKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAg\nICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKGUp\nOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAg\nICAgICAgICB6b29rZWVwZXIuZ2V0RGF0YSgiL2Zha2UiLCBmYWxzZSwgbmV3\nIFNhZmVBc3luY1pLQ2FsbGJhY2suRGF0YUNhbGxiYWNrKCkgewogICAgICAg\nICAgICAgICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBzYWZlUHJvY2Vzc1Jlc3VsdChp\nbnQgcmMsIFN0cmluZyBwYXRoLCBPYmplY3QgY3R4LCBieXRlW10gZGF0YSwK\nICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZy5hcGFjaGUuem9va2Vl\ncGVyLmRhdGEuU3RhdCBzdGF0KSB7CiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oIlRoaXMgc2hv\ndWxkIGdvIHRvIHRoZSB1bmNhdWdodCBleGNlcHRpb24gaGFuZGxlciIpOwog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAg\nICAgICAgICAgfSwgbnVsbCk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAg\nICAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgICAg\nICBwcm90ZWN0ZWQgdm9pZCBwb3N0UmVsZWFzZUNsZWFudXAoQnl0ZVN0cmlu\nZyB0b3BpYywgQ2FsbGJhY2s8Vm9pZD4gY2IsIE9iamVjdCBjdHgpIHsKICAg\nICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAg\nICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIHJ1blB1Ymxpc2hSZXF1ZXN0\nKHBvcnQpOwogICAgICAgIGFzc2VydEVxdWFscyhSdW50aW1lRXhjZXB0aW9u\nLmNsYXNzLCBxdWV1ZS50YWtlKCkuZ2V0Q2xhc3MoKSk7CiAgICAgICAgc2Vy\ndmVyLnNodXRkb3duKCk7CiAgICB9CgogICAgQFRlc3QodGltZW91dD02MDAw\nMCkKICAgIHB1YmxpYyB2b2lkIHRlc3RJbnZhbGlkU2VydmVyQ29uZmlndXJh\ndGlvbigpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIGJvb2xlYW4gc3Vj\nY2VzcyA9IGZhbHNlOwogICAgICAgIFNlcnZlckNvbmZpZ3VyYXRpb24gY29u\nZiA9IG5ldyBTZXJ2ZXJDb25maWd1cmF0aW9uKCkgewogICAgICAgICAgICBA\nT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIGJvb2xlYW4gaXNJbnRlclJl\nZ2lvblNTTEVuYWJsZWQoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gY29u\nZi5nZXRCb29sZWFuKElOVEVSX1JFR0lPTl9TU0xfRU5BQkxFRCwgdHJ1ZSk7\nCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAg\nICAgICBwdWJsaWMgTGlzdDxTdHJpbmc+IGdldFJlZ2lvbnMoKSB7CiAgICAg\nICAgICAgICAgICBMaXN0PFN0cmluZz4gcmVnaW9uc0xpc3QgPSBuZXcgTGlu\na2VkTGlzdDxTdHJpbmc+KCk7CiAgICAgICAgICAgICAgICByZWdpb25zTGlz\ndC5hZGQoInJlZ2lvbkhvc3QxOjQwODA6OTg3NiIpOwogICAgICAgICAgICAg\nICAgcmVnaW9uc0xpc3QuYWRkKCJyZWdpb25Ib3N0Mjo0MDgwIik7CiAgICAg\nICAgICAgICAgICByZWdpb25zTGlzdC5hZGQoInJlZ2lvbkhvc3QzOjQwODA6\nOTg3NiIpOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2lvbnNMaXN0Owog\nICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICB0cnkgewogICAgICAg\nICAgICBjb25mLnZhbGlkYXRlKCk7CiAgICAgICAgfQogICAgICAgIGNhdGNo\nIChDb25maWd1cmF0aW9uRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgbG9n\nZ2VyLmVycm9yKCJJbnZhbGlkIGNvbmZpZ3VyYXRpb246ICIsIGUpOwogICAg\nICAgICAgICBzdWNjZXNzID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgYXNz\nZXJ0VHJ1ZShzdWNjZXNzKTsKICAgIH0KCiAgICBAVGVzdCh0aW1lb3V0PTYw\nMDAwKQogICAgcHVibGljIHZvaWQgdGVzdFZhbGlkU2VydmVyQ29uZmlndXJh\ndGlvbigpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIGJvb2xlYW4gc3Vj\nY2VzcyA9IHRydWU7CiAgICAgICAgU2VydmVyQ29uZmlndXJhdGlvbiBjb25m\nID0gbmV3IFNlcnZlckNvbmZpZ3VyYXRpb24oKSB7CiAgICAgICAgICAgIEBP\ndmVycmlkZQogICAgICAgICAgICBwdWJsaWMgYm9vbGVhbiBpc0ludGVyUmVn\naW9uU1NMRW5hYmxlZCgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBjb25m\nLmdldEJvb2xlYW4oSU5URVJfUkVHSU9OX1NTTF9FTkFCTEVELCB0cnVlKTsK\nICAgICAgICAgICAgfQoKICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAg\nICAgIHB1YmxpYyBMaXN0PFN0cmluZz4gZ2V0UmVnaW9ucygpIHsKICAgICAg\nICAgICAgICAgIExpc3Q8U3RyaW5nPiByZWdpb25zTGlzdCA9IG5ldyBMaW5r\nZWRMaXN0PFN0cmluZz4oKTsKICAgICAgICAgICAgICAgIHJlZ2lvbnNMaXN0\nLmFkZCgicmVnaW9uSG9zdDE6NDA4MDo5ODc2Iik7CiAgICAgICAgICAgICAg\nICByZWdpb25zTGlzdC5hZGQoInJlZ2lvbkhvc3QyOjQwODA6MjkzOCIpOwog\nICAgICAgICAgICAgICAgcmVnaW9uc0xpc3QuYWRkKCJyZWdpb25Ib3N0Mzo0\nMDgwOjk4NzYiKTsKICAgICAgICAgICAgICAgIHJldHVybiByZWdpb25zTGlz\ndDsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgY29uZi52YWxpZGF0ZSgpOwogICAgICAgIH0KICAgICAgICBj\nYXRjaCAoQ29uZmlndXJhdGlvbkV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAg\nIGxvZ2dlci5lcnJvcigiSW52YWxpZCBjb25maWd1cmF0aW9uOiAiLCBlKTsK\nICAgICAgICAgICAgc3VjY2VzcyA9IGZhbHNlOwogICAgICAgIH0KICAgICAg\nICBhc3NlcnRUcnVlKHN1Y2Nlc3MpOwogICAgfQoKfQo=\n","encoding":"base64"}

