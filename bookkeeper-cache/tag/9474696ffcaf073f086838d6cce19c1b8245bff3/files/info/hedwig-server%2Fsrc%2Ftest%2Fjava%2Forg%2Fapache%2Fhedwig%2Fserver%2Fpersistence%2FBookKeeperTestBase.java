{"sha":"a932ffd7b8d7eec231a8922bf6f09957d5819152","node_id":"MDQ6QmxvYjE1NzU5NTY6YTkzMmZmZDdiOGQ3ZWVjMjMxYTg5MjJiZjZmMDk5NTdkNTgxOTE1Mg==","size":8807,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/a932ffd7b8d7eec231a8922bf6f09957d5819152","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIucGVyc2lzdGVuY2U7Cgpp\nbXBvcnQgamF2YS5uZXQuSW5ldEFkZHJlc3M7CmltcG9ydCBqYXZhLm5pby5C\neXRlQnVmZmVyOwppbXBvcnQgamF2YS5pby5GaWxlOwppbXBvcnQgamF2YS5p\nby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5MaW5rZWRMaXN0Owpp\nbXBvcnQgamF2YS51dGlsLkxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuUmFuZG9t\nOwoKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5yZXBsaWNhdGlvbi5S\nZXBsaWNhdGlvbkV4Y2VwdGlvbi5Db21wYXRpYmlsaXR5RXhjZXB0aW9uOwpp\nbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLnJlcGxpY2F0aW9uLlJlcGxp\nY2F0aW9uRXhjZXB0aW9uLlVuYXZhaWxhYmxlRXhjZXB0aW9uOwppbXBvcnQg\nb3JnLmFwYWNoZS5ib29ra2VlcGVyLnRlc3QuUG9ydE1hbmFnZXI7CgppbXBv\ncnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmJvb2tpZS5Cb29raWU7CmltcG9y\ndCBvcmcuYXBhY2hlLmJvb2trZWVwZXIuYm9va2llLkJvb2tpZUV4Y2VwdGlv\nbjsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5jb25mLkNsaWVudENv\nbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY29u\nZi5TZXJ2ZXJDb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5ib29r\na2VlcGVyLmNsaWVudC5Cb29rS2VlcGVyOwppbXBvcnQgb3JnLmFwYWNoZS5i\nb29ra2VlcGVyLnByb3RvLkJvb2tpZVNlcnZlcjsKaW1wb3J0IG9yZy5hcGFj\naGUuem9va2VlcGVyLkNyZWF0ZU1vZGU7CmltcG9ydCBvcmcuYXBhY2hlLnpv\nb2tlZXBlci5LZWVwZXJFeGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hlLnpv\nb2tlZXBlci5ab29LZWVwZXI7CmltcG9ydCBvcmcuYXBhY2hlLnpvb2tlZXBl\nci5ab29EZWZzLklkczsKaW1wb3J0IG9yZy5qdW5pdC5BZnRlcjsKaW1wb3J0\nIG9yZy5qdW5pdC5CZWZvcmU7CmltcG9ydCBvcmcuanVuaXQuVGVzdDsKCmlt\ncG9ydCBvcmcuYXBhY2hlLmhlZHdpZy51dGlsLkZpbGVVdGlsczsKaW1wb3J0\nIG9yZy5hcGFjaGUuaGVkd2lnLnpvb2tlZXBlci5ab29LZWVwZXJUZXN0QmFz\nZTsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXI7CmltcG9ydCBvcmcuc2xmNGou\nTG9nZ2VyRmFjdG9yeTsKCi8qKgogKiBUaGlzIGlzIGEgYmFzZSBjbGFzcyBm\nb3IgYW55IHRlc3RzIHRoYXQgcmVxdWlyZSBhIEJvb2tLZWVwZXIgY2xpZW50\nL3NlcnZlcgogKiBzZXR1cC4KICoKICovCnB1YmxpYyBjbGFzcyBCb29rS2Vl\ncGVyVGVzdEJhc2UgZXh0ZW5kcyBab29LZWVwZXJUZXN0QmFzZSB7CiAgICBw\ncml2YXRlIHN0YXRpYyBMb2dnZXIgTE9HID0gTG9nZ2VyRmFjdG9yeS5nZXRM\nb2dnZXIoQm9va0tlZXBlclRlc3RCYXNlLmNsYXNzKTsKCiAgICBjbGFzcyBU\nZXN0Qm9va2llIGV4dGVuZHMgQm9va2llIHsKICAgICAgICBmaW5hbCBsb25n\nIHJlYWREZWxheTsKCiAgICAgICAgcHVibGljIFRlc3RCb29raWUoU2VydmVy\nQ29uZmlndXJhdGlvbiBjb25mLCBsb25nIHJlYWREZWxheSkKICAgICAgICAg\nICAgdGhyb3dzIElPRXhjZXB0aW9uLCBLZWVwZXJFeGNlcHRpb24sIEludGVy\ncnVwdGVkRXhjZXB0aW9uLCBCb29raWVFeGNlcHRpb24gewogICAgICAgICAg\nICBzdXBlcihjb25mKTsKICAgICAgICAgICAgdGhpcy5yZWFkRGVsYXkgPSBy\nZWFkRGVsYXk7CiAgICAgICAgfQoKICAgICAgICBAT3ZlcnJpZGUKICAgICAg\nICBwdWJsaWMgQnl0ZUJ1ZmZlciByZWFkRW50cnkobG9uZyBsZWRnZXJJZCwg\nbG9uZyBlbnRyeUlkKQogICAgICAgICAgICB0aHJvd3MgSU9FeGNlcHRpb24s\nIE5vTGVkZ2VyRXhjZXB0aW9uIHsKICAgICAgICAgICAgaWYgKHJlYWREZWxh\neSA+IDApIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAg\nICAgICAgVGhyZWFkLnNsZWVwKHJlYWREZWxheSk7CiAgICAgICAgICAgICAg\nICB9IGNhdGNoIChJbnRlcnJ1cHRlZEV4Y2VwdGlvbiBpZSkgewogICAgICAg\nICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBz\ndXBlci5yZWFkRW50cnkobGVkZ2VySWQsIGVudHJ5SWQpOwogICAgICAgIH0K\nICAgIH0KCiAgICBjbGFzcyBUZXN0Qm9va2llU2VydmVyIGV4dGVuZHMgQm9v\na2llU2VydmVyIHsKICAgICAgICBwdWJsaWMgVGVzdEJvb2tpZVNlcnZlcihT\nZXJ2ZXJDb25maWd1cmF0aW9uIGNvbmYpCiAgICAgICAgICAgIHRocm93cyBJ\nT0V4Y2VwdGlvbiwKICAgICAgICAgICAgICAgIEtlZXBlckV4Y2VwdGlvbiwg\nSW50ZXJydXB0ZWRFeGNlcHRpb24sIEJvb2tpZUV4Y2VwdGlvbiwKICAgICAg\nICAgICAgICAgIFVuYXZhaWxhYmxlRXhjZXB0aW9uLCBDb21wYXRpYmlsaXR5\nRXhjZXB0aW9uIHsKICAgICAgICAgICAgc3VwZXIoY29uZik7CiAgICAgICAg\nfQoKICAgICAgICBwcm90ZWN0ZWQgQm9va2llIG5ld0Jvb2tpZShTZXJ2ZXJD\nb25maWd1cmF0aW9uIGNvbmYpCiAgICAgICAgICAgIHRocm93cyBJT0V4Y2Vw\ndGlvbiwgS2VlcGVyRXhjZXB0aW9uLCBJbnRlcnJ1cHRlZEV4Y2VwdGlvbiwg\nQm9va2llRXhjZXB0aW9uIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBUZXN0\nQm9va2llKGNvbmYsIHJlYWREZWxheSk7CiAgICAgICAgfQogICAgfQoKICAg\nIC8vIEJvb2tLZWVwZXIgU2VydmVyIHZhcmlhYmxlcwogICAgcHJpdmF0ZSBM\naXN0PEJvb2tpZVNlcnZlcj4gYm9va2llc0xpc3Q7CiAgICBwcml2YXRlIExp\nc3Q8U2VydmVyQ29uZmlndXJhdGlvbj4gYmtDb25mc0xpc3Q7CgogICAgLy8g\nU3RyaW5nIGNvbnN0YW50cyB1c2VkIGZvciBjcmVhdGluZyB0aGUgYm9va2ll\nIHNlcnZlciBmaWxlcy4KICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmlu\nZyBQUkVGSVggPSAiYm9va2llIjsKICAgIHByaXZhdGUgc3RhdGljIGZpbmFs\nIFN0cmluZyBTVUZGSVggPSAidGVzdCI7CgogICAgLy8gcmVhZERlbGF5CiAg\nICBwcm90ZWN0ZWQgbG9uZyByZWFkRGVsYXk7CgogICAgLy8gVmFyaWFibGUg\ndG8gZGVjaWRlIGhvdyBtYW55IGJvb2tpZSBzZXJ2ZXJzIHRvIHNldCB1cC4K\nICAgIHByaXZhdGUgZmluYWwgaW50IG51bUJvb2tpZXM7CiAgICAvLyBCb29r\nS2VlcGVyIGNsaWVudCBpbnN0YW5jZQogICAgcHJvdGVjdGVkIEJvb2tLZWVw\nZXIgYms7CgogICAgcHJvdGVjdGVkIFNlcnZlckNvbmZpZ3VyYXRpb24gYmFz\nZUNvbmYgPSBuZXdTZXJ2ZXJDb25maWd1cmF0aW9uKCk7CiAgICBwcm90ZWN0\nZWQgQ2xpZW50Q29uZmlndXJhdGlvbiBiYXNlQ2xpZW50Q29uZiA9IG5ldyBD\nbGllbnRDb25maWd1cmF0aW9uKCk7CgogICAgLy8gQ29uc3RydWN0b3IKICAg\nIHB1YmxpYyBCb29rS2VlcGVyVGVzdEJhc2UoaW50IG51bUJvb2tpZXMpIHsK\nICAgICAgICB0aGlzKG51bUJvb2tpZXMsIDBMKTsKICAgIH0KCiAgICBwdWJs\naWMgQm9va0tlZXBlclRlc3RCYXNlKGludCBudW1Cb29raWVzLCBsb25nIHJl\nYWREZWxheSkgewogICAgICAgIHRoaXMubnVtQm9va2llcyA9IG51bUJvb2tp\nZXM7CiAgICAgICAgdGhpcy5yZWFkRGVsYXkgPSByZWFkRGVsYXk7CiAgICB9\nCgogICAgcHVibGljIEJvb2tLZWVwZXJUZXN0QmFzZSgpIHsKICAgICAgICAv\nLyBCeSBkZWZhdWx0LCB1c2UgMyBib29raWVzLgogICAgICAgIHRoaXMoMyk7\nCiAgICB9CgogICAgLy8gR2V0dGVyIGZvciB0aGUgWm9vS2VlcGVyIGNsaWVu\ndCBpbnN0YW5jZSB0aGF0IHRoZSBwYXJlbnQgY2xhc3Mgc2V0cyB1cC4KICAg\nIHByb3RlY3RlZCBab29LZWVwZXIgZ2V0Wm9vS2VlcGVyQ2xpZW50KCkgewog\nICAgICAgIHJldHVybiB6azsKICAgIH0KCiAgICAvLyBHaXZlIGp1bml0IGEg\nZmFrZSB0ZXN0IHNvIHRoYXQgaXRzIGhhcHB5CiAgICBAVGVzdCh0aW1lb3V0\nPTYwMDAwKQogICAgcHVibGljIHZvaWQgdGVzdE5vdGhpbmcoKSB0aHJvd3Mg\nRXhjZXB0aW9uIHsKCiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBAQmVmb3Jl\nCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpIHRocm93cyBFeGNlcHRpb24gewog\nICAgICAgIHN1cGVyLnNldFVwKCk7CiAgICAgICAgLy8gSW5pdGlhbGl6ZSB0\naGUgemsgY2xpZW50IHdpdGggdmFsdWVzCiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgemsuY3JlYXRlKCIvbGVkZ2VycyIsIG5ldyBieXRlWzBdLCBJZHMu\nT1BFTl9BQ0xfVU5TQUZFLCBDcmVhdGVNb2RlLlBFUlNJU1RFTlQpOwogICAg\nICAgICAgICB6ay5jcmVhdGUoIi9sZWRnZXJzL2F2YWlsYWJsZSIsIG5ldyBi\neXRlWzBdLCBJZHMuT1BFTl9BQ0xfVU5TQUZFLCBDcmVhdGVNb2RlLlBFUlNJ\nU1RFTlQpOwogICAgICAgIH0gY2F0Y2ggKEtlZXBlckV4Y2VwdGlvbiBlKSB7\nCiAgICAgICAgICAgIExPRy5lcnJvcigiRXJyb3Igc2V0dGluZyB1cCIsIGUp\nOwogICAgICAgIH0gY2F0Y2ggKEludGVycnVwdGVkRXhjZXB0aW9uIGUpIHsK\nICAgICAgICAgICAgTE9HLmVycm9yKCJFcnJvciBzZXR0aW5nIHVwIiwgZSk7\nCiAgICAgICAgfQoKICAgICAgICAvLyBDcmVhdGUgQm9va2llIFNlcnZlcnMK\nICAgICAgICBib29raWVzTGlzdCA9IG5ldyBMaW5rZWRMaXN0PEJvb2tpZVNl\ncnZlcj4oKTsKICAgICAgICBia0NvbmZzTGlzdCA9IG5ldyBMaW5rZWRMaXN0\nPFNlcnZlckNvbmZpZ3VyYXRpb24+KCk7CgogICAgICAgIGZvciAoaW50IGkg\nPSAwOyBpIDwgbnVtQm9va2llczsgaSsrKSB7CiAgICAgICAgICAgIHN0YXJ0\nVXBOZXdCb29raWVTZXJ2ZXIoKTsKICAgICAgICB9CgogICAgICAgIC8vIENy\nZWF0ZSB0aGUgQm9va0tlZXBlciBjbGllbnQKICAgICAgICBiayA9IG5ldyBC\nb29rS2VlcGVyKGhvc3RQb3J0KTsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5n\nIGdldFprSG9zdFBvcnQoKSB7CiAgICAgICAgcmV0dXJuIGhvc3RQb3J0Owog\nICAgfQoKICAgIEBPdmVycmlkZQogICAgQEFmdGVyCiAgICBwdWJsaWMgdm9p\nZCB0ZWFyRG93bigpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIC8vIFNo\ndXRkb3duIGFsbCBvZiB0aGUgYm9va2llIHNlcnZlcnMKICAgICAgICBmb3Ig\nKEJvb2tpZVNlcnZlciBicyA6IGJvb2tpZXNMaXN0KSB7CiAgICAgICAgICAg\nIGJzLnNodXRkb3duKCk7CiAgICAgICAgfQogICAgICAgIC8vIENsb3NlIHRo\nZSBCb29rS2VlcGVyIGNsaWVudAogICAgICAgIGJrLmNsb3NlKCk7CiAgICAg\nICAgc3VwZXIudGVhckRvd24oKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBz\ndG9wQWxsQm9va2llU2VydmVycygpIHRocm93cyBFeGNlcHRpb24gewogICAg\nICAgIGZvciAoQm9va2llU2VydmVyIGJzIDogYm9va2llc0xpc3QpIHsKICAg\nICAgICAgICAgYnMuc2h1dGRvd24oKTsKICAgICAgICB9CiAgICAgICAgYm9v\na2llc0xpc3QuY2xlYXIoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzdGFy\ndEFsbEJvb2tpZVNlcnZlcnMoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAg\nICBmb3IgKFNlcnZlckNvbmZpZ3VyYXRpb24gY29uZiA6IGJrQ29uZnNMaXN0\nKSB7CiAgICAgICAgICAgIGJvb2tpZXNMaXN0LmFkZChzdGFydEJvb2tpZShj\nb25mKSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIHN1c3Bl\nbmRBbGxCb29raWVTZXJ2ZXJzKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAg\nICAgZm9yIChCb29raWVTZXJ2ZXIgYnMgOiBib29raWVzTGlzdCkgewogICAg\nICAgICAgICBicy5zdXNwZW5kUHJvY2Vzc2luZygpOwogICAgICAgIH0KICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCByZXN1bWVBbGxCb29raWVTZXJ2ZXJzKCkg\ndGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgZm9yIChCb29raWVTZXJ2ZXIg\nYnMgOiBib29raWVzTGlzdCkgewogICAgICAgICAgICBicy5yZXN1bWVQcm9j\nZXNzaW5nKCk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRl\nYXJEb3duT25lQm9va2llU2VydmVyKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAg\nICAgICAgUmFuZG9tIHIgPSBuZXcgUmFuZG9tKCk7CiAgICAgICAgaW50IGJp\nID0gci5uZXh0SW50KGJvb2tpZXNMaXN0LnNpemUoKSk7CiAgICAgICAgQm9v\na2llU2VydmVyIGJzID0gYm9va2llc0xpc3QuZ2V0KGJpKTsKICAgICAgICBi\ncy5zaHV0ZG93bigpOwogICAgICAgIGJvb2tpZXNMaXN0LnJlbW92ZShiaSk7\nCiAgICAgICAgYmtDb25mc0xpc3QucmVtb3ZlKGJpKTsKICAgIH0KICAgIAog\nICAgcHVibGljIHZvaWQgc3RhcnRVcE5ld0Jvb2tpZVNlcnZlcigpIHRocm93\ncyBFeGNlcHRpb24gewogICAgICAgIGludCBwb3J0ID0gUG9ydE1hbmFnZXIu\nbmV4dEZyZWVQb3J0KCk7CiAgICAgICAgRmlsZSB0bXBEaXIgPSBGaWxlVXRp\nbHMuY3JlYXRlVGVtcERpcmVjdG9yeSgKICAgICAgICAgICAgICAgIFBSRUZJ\nWCArIHBvcnQsIFNVRkZJWCk7CiAgICAgICAgU2VydmVyQ29uZmlndXJhdGlv\nbiBjb25mID0gbmV3U2VydmVyQ29uZmlndXJhdGlvbigKICAgICAgICAgICAg\nICAgIHBvcnQsIGhvc3RQb3J0LCB0bXBEaXIsIG5ldyBGaWxlW10geyB0bXBE\naXIgfSk7CiAgICAgICAgYm9va2llc0xpc3QuYWRkKHN0YXJ0Qm9va2llKGNv\nbmYpKTsKICAgICAgICBia0NvbmZzTGlzdC5hZGQoY29uZik7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBIZWxwZXIgbWV0aG9kIHRvIHN0YXJ0dXAgYSBib29r\naWUgc2VydmVyIHVzaW5nIGEgY29uZmlndXJhdGlvbiBvYmplY3QKICAgICAq\nCiAgICAgKiBAcGFyYW0gY29uZgogICAgICogICAgICAgICAgICBTZXJ2ZXIg\nQ29uZmlndXJhdGlvbiBPYmplY3QKICAgICAqCiAgICAgKi8KICAgIHByaXZh\ndGUgQm9va2llU2VydmVyIHN0YXJ0Qm9va2llKFNlcnZlckNvbmZpZ3VyYXRp\nb24gY29uZikgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgQm9va2llU2Vy\ndmVyIHNlcnZlciA9IG5ldyBUZXN0Qm9va2llU2VydmVyKGNvbmYpOwogICAg\nICAgIHNlcnZlci5zdGFydCgpOwoKICAgICAgICBpbnQgcG9ydCA9IGNvbmYu\nZ2V0Qm9va2llUG9ydCgpOwogICAgICAgIHdoaWxlKHprLmV4aXN0cygiL2xl\nZGdlcnMvYXZhaWxhYmxlLyIgKyBJbmV0QWRkcmVzcy5nZXRMb2NhbEhvc3Qo\nKS5nZXRIb3N0QWRkcmVzcygpICsgIjoiICsgcG9ydCwgZmFsc2UpID09IG51\nbGwpIHsKICAgICAgICAgICAgVGhyZWFkLnNsZWVwKDUwMCk7CiAgICAgICAg\nfQoKICAgICAgICByZXR1cm4gc2VydmVyOwogICAgfQoKICAgIC8vIGNvbnN0\ncnVjdCB0aGUgYmFzaWMgc2VydmVyIGNvbmZpZ3VyYXRpb24gZm9yIGJvb2tr\nZWVwZXIgdGVzdGluZwogICAgcHJpdmF0ZSBzdGF0aWMgU2VydmVyQ29uZmln\ndXJhdGlvbiBuZXdTZXJ2ZXJDb25maWd1cmF0aW9uKCkgewogICAgICAgIFNl\ncnZlckNvbmZpZ3VyYXRpb24gY29uZiA9IG5ldyBTZXJ2ZXJDb25maWd1cmF0\naW9uKCk7CiAgICAgICAgY29uZi5zZXRKb3VybmFsRmx1c2hXaGVuUXVldWVF\nbXB0eSh0cnVlKTsKICAgICAgICBjb25mLnNldEpvdXJuYWxBZGFwdGl2ZUdy\nb3VwV3JpdGVzKGZhbHNlKTsKICAgICAgICByZXR1cm4gY29uZjsKICAgIH0K\nCiAgICBwcm90ZWN0ZWQgU2VydmVyQ29uZmlndXJhdGlvbiBuZXdTZXJ2ZXJD\nb25maWd1cmF0aW9uKGludCBwb3J0LCBTdHJpbmcgemtTZXJ2ZXJzLCBGaWxl\nIGpvdXJuYWxEaXIsIEZpbGVbXSBsZWRnZXJEaXJzKSB7CiAgICAgICAgU2Vy\ndmVyQ29uZmlndXJhdGlvbiBjb25mID0gbmV3IFNlcnZlckNvbmZpZ3VyYXRp\nb24oYmFzZUNvbmYpOwogICAgICAgIGNvbmYuc2V0QWxsb3dMb29wYmFjayh0\ncnVlKTsKICAgICAgICBjb25mLnNldEJvb2tpZVBvcnQocG9ydCk7CiAgICAg\nICAgY29uZi5zZXRaa1NlcnZlcnMoemtTZXJ2ZXJzKTsKICAgICAgICBjb25m\nLnNldEpvdXJuYWxEaXJOYW1lKGpvdXJuYWxEaXIuZ2V0UGF0aCgpKTsKICAg\nICAgICBTdHJpbmdbXSBsZWRnZXJEaXJOYW1lcyA9IG5ldyBTdHJpbmdbbGVk\nZ2VyRGlycy5sZW5ndGhdOwogICAgICAgIGZvciAoaW50IGk9MDsgaTxsZWRn\nZXJEaXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGxlZGdlckRpck5h\nbWVzW2ldID0gbGVkZ2VyRGlyc1tpXS5nZXRQYXRoKCk7CiAgICAgICAgfQog\nICAgICAgIGNvbmYuc2V0TGVkZ2VyRGlyTmFtZXMobGVkZ2VyRGlyTmFtZXMp\nOwogICAgICAgIHJldHVybiBjb25mOwogICAgfQoKfQo=\n","encoding":"base64"}

