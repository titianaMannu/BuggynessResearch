{"sha":"a54d0d45629c505f84563d516638689e9f997dee","node_id":"MDQ6QmxvYjE1NzU5NTY6YTU0ZDBkNDU2MjljNTA1Zjg0NTYzZDUxNjYzODY4OWU5Zjk5N2RlZQ==","size":8833,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/a54d0d45629c505f84563d516638689e9f997dee","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIudG9waWNzOwoKaW1wb3J0\nIGphdmEudXRpbC5BcnJheUxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuQXJyYXlz\nOwppbXBvcnQgamF2YS51dGlsLkhhc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwu\nTGlzdDsKaW1wb3J0IGphdmEudXRpbC5NYXA7CmltcG9ydCBqYXZhLnV0aWwu\nY29uY3VycmVudC5TeW5jaHJvbm91c1F1ZXVlOwoKaW1wb3J0IGp1bml0LmZy\nYW1ld29yay5Bc3NlcnQ7CgppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuZXhj\nZXB0aW9ucy5QdWJTdWJFeGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hlLmhl\nZHdpZy51dGlsLkNhbGxiYWNrOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcu\ndXRpbC5Db25jdXJyZW5jeVV0aWxzOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3\naWcudXRpbC5IZWR3aWdTb2NrZXRBZGRyZXNzOwppbXBvcnQgb3JnLmp1bml0\nLlRlc3Q7CgppbXBvcnQgY29tLmdvb2dsZS5wcm90b2J1Zi5CeXRlU3RyaW5n\nOwoKcHVibGljIGNsYXNzIFRlc3RUb3BpY0Jhc2VkTG9hZFNoZWRkZXIgewoK\nICAgIGZpbmFsIHByb3RlY3RlZCBTeW5jaHJvbm91c1F1ZXVlPEJvb2xlYW4+\nIHN0YXR1c1F1ZXVlID0gbmV3IFN5bmNocm9ub3VzUXVldWU8Qm9vbGVhbj4o\nKTsKICAgIHByaXZhdGUgaW50IG15VG9waWNzID0gMTA7CiAgICBwcml2YXRl\nIGludCBudW1IdWJzID0gMTA7CiAgICBwcml2YXRlIExpc3Q8Qnl0ZVN0cmlu\nZz4gbW9ja1RvcGljTGlzdDsKICAgIHByaXZhdGUgZmluYWwgSHViTG9hZCBp\nbmZpbml0ZU1heExvYWQgPSBuZXcgSHViTG9hZCgxMDAwMDAwMCk7CiAgICBN\nYXA8SHViSW5mbywgSHViTG9hZD4gbW9ja0xvYWRNYXAgPSBuZXcgSGFzaE1h\ncDxIdWJJbmZvLCBIdWJMb2FkPigpOwoKICAgIGNsYXNzIE1vY2tUb3BpY0Jh\nc2VkTG9hZFNoZWRkZXIgZXh0ZW5kcyBUb3BpY0Jhc2VkTG9hZFNoZWRkZXIg\newogICAgICAgIC8vIFRoaXMgaXMgc2V0IGJ5IHRoZSByZWR1Y2VMb2FkVG8g\nZnVuY3Rpb24uCiAgICAgICAgcHVibGljIEh1YkxvYWQgdGFyZ2V0TG9hZDsK\nICAgICAgICBwdWJsaWMgTW9ja1RvcGljQmFzZWRMb2FkU2hlZGRlcihUb3Bp\nY01hbmFnZXIgdG0sIExpc3Q8Qnl0ZVN0cmluZz4gdG9waWNMaXN0LAogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERvdWJsZSB0\nb2xlcmFuY2VQZXJjZW50YWdlLCBIdWJMb2FkIG1heExvYWRUb1NoZWQpIHsK\nICAgICAgICAgICAgc3VwZXIodG0sIHRvcGljTGlzdCwgdG9sZXJhbmNlUGVy\nY2VudGFnZSwgbWF4TG9hZFRvU2hlZCk7CiAgICAgICAgfQogICAgICAgIEBP\ndmVycmlkZQogICAgICAgIHB1YmxpYyB2b2lkIHJlZHVjZUxvYWRUbyhIdWJM\nb2FkIHRhcmdldExvYWQsIGZpbmFsIENhbGxiYWNrPExvbmc+IGNhbGxiYWNr\nLCBmaW5hbCBPYmplY3QgY3R4KSB7CiAgICAgICAgICAgIHRoaXMudGFyZ2V0\nTG9hZCA9IHRhcmdldExvYWQ7CiAgICAgICAgICAgIC8vIEluZGljYXRlcyB0\naGF0IHdlIHJlbGVhc2VkIHRoZXNlIG1hbnkgdG9waWNzLgogICAgICAgICAg\nICBjYWxsYmFjay5vcGVyYXRpb25GaW5pc2hlZChjdHgsIHRhcmdldExvYWQu\ndG9IdWJMb2FkRGF0YSgpLmdldE51bVRvcGljcygpKTsKICAgICAgICB9CiAg\nICB9CiAgICBwdWJsaWMgQ2FsbGJhY2s8Qm9vbGVhbj4gZ2V0U2hlZExvYWRD\nYWxsYmFjayhmaW5hbCBNb2NrVG9waWNCYXNlZExvYWRTaGVkZGVyIGxzLCBm\naW5hbCBIdWJMb2FkIGV4cGVjdGVkLAogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWwgQm9vbGVhbiBzaG91\nbGRSZWxlYXNlLCBmaW5hbCBCb29sZWFuIHNob3VsZEZhaWwpIHsKICAgICAg\nICByZXR1cm4gbmV3IENhbGxiYWNrPEJvb2xlYW4+KCkgewogICAgICAgICAg\nICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIHZvaWQgb3BlcmF0aW9u\nRmluaXNoZWQoT2JqZWN0IG8sIEJvb2xlYW4gYUJvb2xlYW4pIHsKICAgICAg\nICAgICAgICAgIEJvb2xlYW4gc3RhdHVzID0gZmFsc2U7CiAgICAgICAgICAg\nICAgICBzdGF0dXMgPSAoYUJvb2xlYW4gPT0gc2hvdWxkUmVsZWFzZSk7CiAg\nICAgICAgICAgICAgICBpZiAoc2hvdWxkUmVsZWFzZSkgewogICAgICAgICAg\nICAgICAgICAgIHN0YXR1cyAmPSAobHMudGFyZ2V0TG9hZCAhPSBudWxsKTsK\nICAgICAgICAgICAgICAgICAgICBzdGF0dXMgJj0gKGV4cGVjdGVkLm51bVRv\ncGljcyA9PSBscy50YXJnZXRMb2FkLm51bVRvcGljcyk7CiAgICAgICAgICAg\nICAgICB9CiAgICAgICAgICAgICAgICBmaW5hbCBCb29sZWFuIHN0YXR1c1Rv\nUHV0ID0gc3RhdHVzOwogICAgICAgICAgICAgICAgbmV3IFRocmVhZChuZXcg\nUnVubmFibGUoKSB7CiAgICAgICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAg\nICAgICAgICAgICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkgewogICAgICAg\nICAgICAgICAgICAgICAgICBDb25jdXJyZW5jeVV0aWxzLnB1dChzdGF0dXNR\ndWV1ZSwgc3RhdHVzVG9QdXQpOwogICAgICAgICAgICAgICAgICAgIH0KICAg\nICAgICAgICAgICAgIH0pLnN0YXJ0KCk7CiAgICAgICAgICAgIH0KCiAgICAg\nICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICBwdWJsaWMgdm9pZCBvcGVy\nYXRpb25GYWlsZWQoT2JqZWN0IG8sIFB1YlN1YkV4Y2VwdGlvbiBlKSB7CiAg\nICAgICAgICAgICAgICBuZXcgVGhyZWFkKG5ldyBSdW5uYWJsZSgpIHsKICAg\nICAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgICAg\nICBwdWJsaWMgdm9pZCBydW4oKSB7CiAgICAgICAgICAgICAgICAgICAgICAg\nIENvbmN1cnJlbmN5VXRpbHMucHV0KHN0YXR1c1F1ZXVlLCBzaG91bGRGYWls\nKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KS5z\ndGFydCgpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgIH0KCiAgICBw\ncml2YXRlIExpc3Q8Qnl0ZVN0cmluZz4gZ2V0TW9ja1RvcGljTGlzdChpbnQg\nbnVtVG9waWNzKSB7CiAgICAgICAgTGlzdDxCeXRlU3RyaW5nPiB0b3BpY3Mg\nPSBuZXcgQXJyYXlMaXN0PEJ5dGVTdHJpbmc+KCk7CiAgICAgICAgZm9yIChp\nbnQgaSA9IDA7IGkgPCBudW1Ub3BpY3M7IGkrKykgewogICAgICAgICAgICB0\nb3BpY3MuYWRkKEJ5dGVTdHJpbmcuY29weUZyb21VdGY4KCJNeVRvcGljXyIg\nKyBpKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0b3BpY3M7CiAgICB9\nCgogICAgcHJpdmF0ZSBIdWJJbmZvIGdldEh1YkluZm8oaW50IGh1Yk51bSkg\newogICAgICAgIHJldHVybiBuZXcgSHViSW5mbyhuZXcgSGVkd2lnU29ja2V0\nQWRkcmVzcygibXlodWIudGVzdGRvbWFpbi5mb28iK2h1Yk51bSsiOjQwODA6\nNDA4MCIpLCAwKTsKICAgIH0KCiAgICBwcml2YXRlIHN5bmNocm9uaXplZCB2\nb2lkIGluaXRpYWxpemUoaW50IG15VG9waWNzLCBpbnQgbnVtSHVicywgaW50\nW10gb3RoZXJIdWJzTG9hZCkgewogICAgICAgIGlmIChudWxsICE9IG90aGVy\nSHVic0xvYWQpIHsKICAgICAgICAgICAgQXNzZXJ0LmFzc2VydFRydWUob3Ro\nZXJIdWJzTG9hZC5sZW5ndGggPT0gbnVtSHVicyAtIDEpOwogICAgICAgIH0K\nICAgICAgICB0aGlzLm15VG9waWNzID0gbXlUb3BpY3M7CiAgICAgICAgbW9j\na1RvcGljTGlzdCA9IGdldE1vY2tUb3BpY0xpc3QodGhpcy5teVRvcGljcyk7\nCiAgICAgICAgdGhpcy5udW1IdWJzID0gbnVtSHViczsKICAgICAgICB0aGlz\nLm1vY2tMb2FkTWFwLmNsZWFyKCk7CiAgICAgICAgdGhpcy5tb2NrTG9hZE1h\ncC5wdXQoZ2V0SHViSW5mbygwKSwgbmV3IEh1YkxvYWQodGhpcy5teVRvcGlj\ncykpOwogICAgICAgIGZvciAoaW50IGkgPSAxOyBpIDwgdGhpcy5udW1IdWJz\nOyBpKyspIHsKICAgICAgICAgICAgdGhpcy5tb2NrTG9hZE1hcC5wdXQoZ2V0\nSHViSW5mbyhpKSwgbmV3IEh1YkxvYWQob3RoZXJIdWJzTG9hZFtpLTFdKSk7\nCiAgICAgICAgfQogICAgfQoKICAgIHByaXZhdGUgaW50W10gZ2V0RXF1YWxM\nb2FkRGlzdHJpYnV0aW9uQXJyYXkoaW50IG4sIGludCBsb2FkKSB7CiAgICAg\nICAgaWYgKG4gPT0gMCkgewogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAg\nICAgICB9CiAgICAgICAgaW50W10gcmV0TG9hZCA9IG5ldyBpbnRbbl07CiAg\nICAgICAgQXJyYXlzLmZpbGwocmV0TG9hZCwgbG9hZCk7CiAgICAgICAgcmV0\ndXJuIHJldExvYWQ7CiAgICB9CgogICAgQFRlc3QodGltZW91dCA9IDYwMDAw\nKQogICAgcHVibGljIHN5bmNocm9uaXplZCAgdm9pZCB0ZXN0QWxsSHVic1Nh\nbWVUb3BpY3MoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICAvLyBBbGwg\naHVicyBoYXZlIHRoZSBzYW1lIG51bWJlciBvZiB0b3BpY3MuIFdlIHNob3Vs\nZCBub3QgcmVsZWFzZSBhbnkgdG9waWNzIGV2ZW4gd2l0aCBhCiAgICAgICAg\nLy8gdG9sZXJhbmNlIG9mIDAuMC4KICAgICAgICBpbml0aWFsaXplKDEwLCAx\nMCwgZ2V0RXF1YWxMb2FkRGlzdHJpYnV0aW9uQXJyYXkoOSwgMTApKTsKICAg\nICAgICBNb2NrVG9waWNCYXNlZExvYWRTaGVkZGVyIHRibHMgPSBuZXcgTW9j\na1RvcGljQmFzZWRMb2FkU2hlZGRlcihudWxsLCBtb2NrVG9waWNMaXN0LCAw\nLjAsIGluZmluaXRlTWF4TG9hZCk7CiAgICAgICAgdGJscy5zaGVkTG9hZCht\nb2NrTG9hZE1hcCwgZ2V0U2hlZExvYWRDYWxsYmFjayh0YmxzLCBudWxsLCBm\nYWxzZSwgZmFsc2UpLCBudWxsKTsKICAgICAgICBBc3NlcnQuYXNzZXJ0VHJ1\nZShzdGF0dXNRdWV1ZS50YWtlKCkpOwogICAgfQoKICAgIEBUZXN0KHRpbWVv\ndXQgPSA2MDAwMCkKICAgIHB1YmxpYyBzeW5jaHJvbml6ZWQgdm9pZCB0ZXN0\nT25lSHViVW5lcXVhbFRvcGljcygpIHRocm93cyBFeGNlcHRpb24gewogICAg\nICAgIC8vIFRoZSBodWIgaGFzIDIwIHRvcGljcyB3aGlsZSB0aGUgYXZlcmFn\nZSBpcyAxMS4gU2hvdWxkIHJlZHVjZSB0aGUgbG9hZCB0byAxMS4KICAgICAg\nICBpbml0aWFsaXplKDIwLCAxMCwgZ2V0RXF1YWxMb2FkRGlzdHJpYnV0aW9u\nQXJyYXkoOSwgMTApKTsKICAgICAgICBNb2NrVG9waWNCYXNlZExvYWRTaGVk\nZGVyIHRibHMgPSBuZXcgTW9ja1RvcGljQmFzZWRMb2FkU2hlZGRlcihudWxs\nLCBtb2NrVG9waWNMaXN0LCAwLjAsIGluZmluaXRlTWF4TG9hZCk7CiAgICAg\nICAgdGJscy5zaGVkTG9hZChtb2NrTG9hZE1hcCwgZ2V0U2hlZExvYWRDYWxs\nYmFjayh0YmxzLCBuZXcgSHViTG9hZCgxMSksIHRydWUsIGZhbHNlKSwgbnVs\nbCk7CiAgICAgICAgQXNzZXJ0LmFzc2VydFRydWUoc3RhdHVzUXVldWUudGFr\nZSgpKTsKICAgIH0KCiAgICBAVGVzdCh0aW1lb3V0ID0gNjAwMDApCiAgICBw\ndWJsaWMgc3luY2hyb25pemVkIHZvaWQgdGVzdE9uZUh1YlVuZXF1YWxUb3Bp\nY3NXaXRoVG9sZXJhbmNlKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAg\nLy8gVGhlIGh1YiBoYXMgMjAgdG9waWNzIGFuZCBhdmVyYWdlIGlzIDExLiBT\naG91bGQgc3RpbGwgcmVsZWFzZSBhcyB0b2xlcmFuY2UgbGV2ZWwgb2YgNTAu\nMCBpcwogICAgICAgIC8vIGJyZWFjaGVkLiBTaG91bGQgZ2V0IGRvd24gdG8g\nYXZlcmFnZS4KICAgICAgICBpbml0aWFsaXplKDIwLCAxMCwgZ2V0RXF1YWxM\nb2FkRGlzdHJpYnV0aW9uQXJyYXkoOSwgMTApKTsKICAgICAgICBNb2NrVG9w\naWNCYXNlZExvYWRTaGVkZGVyIHRibHMgPSBuZXcgTW9ja1RvcGljQmFzZWRM\nb2FkU2hlZGRlcihudWxsLCBtb2NrVG9waWNMaXN0LCA1MC4wLCBpbmZpbml0\nZU1heExvYWQpOwogICAgICAgIHRibHMuc2hlZExvYWQobW9ja0xvYWRNYXAs\nIGdldFNoZWRMb2FkQ2FsbGJhY2sodGJscywgbmV3IEh1YkxvYWQoMTEpLCB0\ncnVlLCBmYWxzZSksIG51bGwpOwogICAgICAgIEFzc2VydC5hc3NlcnRUcnVl\nKHN0YXR1c1F1ZXVlLnRha2UoKSk7CgogICAgICAgIC8vIEEgdG9sZXJhbmNl\nIGxldmVsIG9mIDEwMC4wIHNob3VsZCByZXN1bHQgaW4gdGhlIGh1YiBub3Qg\ncmVsZWFzaW5nIHRvcGljcy4KICAgICAgICB0YmxzID0gbmV3IE1vY2tUb3Bp\nY0Jhc2VkTG9hZFNoZWRkZXIobnVsbCwgbW9ja1RvcGljTGlzdCwgMTAwLjAs\nIGluZmluaXRlTWF4TG9hZCk7CiAgICAgICAgdGJscy5zaGVkTG9hZChtb2Nr\nTG9hZE1hcCwgZ2V0U2hlZExvYWRDYWxsYmFjayh0YmxzLCBudWxsLCBmYWxz\nZSwgZmFsc2UpLCBudWxsKTsKICAgICAgICBBc3NlcnQuYXNzZXJ0VHJ1ZShz\ndGF0dXNRdWV1ZS50YWtlKCkpOwogICAgfQoKICAgIEBUZXN0KHRpbWVvdXQg\nPSA2MDAwMCkKICAgIHB1YmxpYyBzeW5jaHJvbml6ZWQgdm9pZCB0ZXN0TWF4\nTG9hZFNoZWQoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICAvLyBUaGUg\naHViIHNob3VsZCBub3Qgc2hlZCBtb3JlIHRoYW4gbWF4TG9hZFNoZWQgdG9w\naWNzLgogICAgICAgIGluaXRpYWxpemUoMjAsIDEwLCBnZXRFcXVhbExvYWRE\naXN0cmlidXRpb25BcnJheSg5LCAxMCkpOwogICAgICAgIE1vY2tUb3BpY0Jh\nc2VkTG9hZFNoZWRkZXIgdGJscyA9IG5ldyBNb2NrVG9waWNCYXNlZExvYWRT\naGVkZGVyKG51bGwsIG1vY2tUb3BpY0xpc3QsIDAuMCwgbmV3IEh1YkxvYWQo\nNSkpOwogICAgICAgIC8vIE91ciBsb2FkIHNob3VsZCByZWR1Y2UgdG8gMTUu\nCiAgICAgICAgdGJscy5zaGVkTG9hZChtb2NrTG9hZE1hcCwgZ2V0U2hlZExv\nYWRDYWxsYmFjayh0YmxzLCBuZXcgSHViTG9hZCgxNSksIHRydWUsIGZhbHNl\nKSwgbnVsbCk7CiAgICAgICAgQXNzZXJ0LmFzc2VydFRydWUoc3RhdHVzUXVl\ndWUudGFrZSgpKTsKCiAgICAgICAgLy8gV2Ugc2hvdWxkIHJlZHVjZSB0byAx\nMSBldmVuIHdoZW4gbWF4TG9hZFNoZWQgYW5kIGF2ZXJhZ2UgcmVzdWx0IGlu\nIHRoZSBzYW1lCiAgICAgICAgLy8gdmFsdWVzCiAgICAgICAgdGJscyA9IG5l\ndyBNb2NrVG9waWNCYXNlZExvYWRTaGVkZGVyKG51bGwsIG1vY2tUb3BpY0xp\nc3QsIDAuMCwgbmV3IEh1YkxvYWQoOSkpOwogICAgICAgIHRibHMuc2hlZExv\nYWQobW9ja0xvYWRNYXAsIGdldFNoZWRMb2FkQ2FsbGJhY2sodGJscywgbmV3\nIEh1YkxvYWQoMTEpLCB0cnVlLCBmYWxzZSksIG51bGwpOwogICAgICAgIEFz\nc2VydC5hc3NlcnRUcnVlKHN0YXR1c1F1ZXVlLnRha2UoKSk7CiAgICB9Cgog\nICAgQFRlc3QodGltZW91dCA9IDYwMDAwKQogICAgcHVibGljIHN5bmNocm9u\naXplZCB2b2lkIHRlc3RTaW5nbGVIdWJMb2FkU2hlZCgpIHRocm93cyBFeGNl\ncHRpb24gewogICAgICAgIC8vIElmIHRoaXMgaXMgdGhlIG9ubHkgaHViIGlu\nIHRoZSBjbHVzdGVyLCBpdCBzaG91bGQgbm90IHJlbGVhc2UgYW55IHRvcGlj\ncy4KICAgICAgICBpbml0aWFsaXplKDIwLCAxLCBudWxsKTsKICAgICAgICBN\nb2NrVG9waWNCYXNlZExvYWRTaGVkZGVyIHRibHMgPSBuZXcgTW9ja1RvcGlj\nQmFzZWRMb2FkU2hlZGRlcihudWxsLCBtb2NrVG9waWNMaXN0LCAwLjAsIGlu\nZmluaXRlTWF4TG9hZCk7CiAgICAgICAgdGJscy5zaGVkTG9hZChtb2NrTG9h\nZE1hcCwgZ2V0U2hlZExvYWRDYWxsYmFjayh0YmxzLCBudWxsLCBmYWxzZSwg\nZmFsc2UpLCBudWxsKTsKICAgICAgICBBc3NlcnQuYXNzZXJ0VHJ1ZShzdGF0\ndXNRdWV1ZS50YWtlKCkpOwogICAgfQoKICAgIEBUZXN0KHRpbWVvdXQgPSA2\nMDAwMCkKICAgIHB1YmxpYyBzeW5jaHJvbml6ZWQgdm9pZCB0ZXN0VW5kZXJs\nb2FkZWRDbHVzdGVyTG9hZFNoZWQoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAg\nICAgICAvLyBIb2xkIG9uIHRvIGF0IGxlYXN0IG9uZSB0b3BpYyB3aGlsZSBz\naGVkZGluZyBsb2FkIChpZiBjbHVzdGVyIGlzIHVuZGVybG9hZGVkKQogICAg\nICAgIGluaXRpYWxpemUoNSwgMTAsIGdldEVxdWFsTG9hZERpc3RyaWJ1dGlv\nbkFycmF5KDksIDApKTsKICAgICAgICBNb2NrVG9waWNCYXNlZExvYWRTaGVk\nZGVyIHRibHMgPSBuZXcgTW9ja1RvcGljQmFzZWRMb2FkU2hlZGRlcihudWxs\nLCBtb2NrVG9waWNMaXN0LCAwLjAsIGluZmluaXRlTWF4TG9hZCk7CiAgICAg\nICAgdGJscy5zaGVkTG9hZChtb2NrTG9hZE1hcCwgZ2V0U2hlZExvYWRDYWxs\nYmFjayh0YmxzLCBuZXcgSHViTG9hZCgxKSwgdHJ1ZSwgZmFsc2UpLCBudWxs\nKTsKICAgICAgICBBc3NlcnQuYXNzZXJ0VHJ1ZShzdGF0dXNRdWV1ZS50YWtl\nKCkpOwogICAgfQp9Cg==\n","encoding":"base64"}

