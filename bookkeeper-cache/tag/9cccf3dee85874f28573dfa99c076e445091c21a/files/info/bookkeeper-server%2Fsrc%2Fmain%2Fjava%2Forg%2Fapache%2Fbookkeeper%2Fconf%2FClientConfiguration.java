{"sha":"d39acfab232d1ab4ca730af2c884272eabb3e0c8","node_id":"MDQ6QmxvYjE1NzU5NTY6ZDM5YWNmYWIyMzJkMWFiNGNhNzMwYWYyYzg4NDI3MmVhYmIzZTBjOA==","size":13276,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/d39acfab232d1ab4ca730af2c884272eabb3e0c8","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY29uZjsKCmltcG9ydCBzdGF0\naWMgY29tLmdvb2dsZS5jb21tb24uYmFzZS5DaGFyc2V0cy5VVEZfODsKCmlt\ncG9ydCBqYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGphdmEudXRpbC5jb25jdXJy\nZW50LlRpbWVVbml0OwoKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5j\nbGllbnQuQm9va0tlZXBlci5EaWdlc3RUeXBlOwoKaW1wb3J0IG9yZy5hcGFj\naGUuY29tbW9ucy5sYW5nLlN0cmluZ1V0aWxzOwoKLyoqCiAqIENvbmZpZ3Vy\nYXRpb24gc2V0dGluZ3MgZm9yIGNsaWVudCBzaWRlCiAqLwpwdWJsaWMgY2xh\nc3MgQ2xpZW50Q29uZmlndXJhdGlvbiBleHRlbmRzIEFic3RyYWN0Q29uZmln\ndXJhdGlvbiB7CgogICAgLy8gWm9va2VlcGVyIFBhcmFtZXRlcnMKICAgIHBy\nb3RlY3RlZCBmaW5hbCBzdGF0aWMgU3RyaW5nIFpLX1RJTUVPVVQgPSAiemtU\naW1lb3V0IjsKICAgIHByb3RlY3RlZCBmaW5hbCBzdGF0aWMgU3RyaW5nIFpL\nX1NFUlZFUlMgPSAiemtTZXJ2ZXJzIjsKCiAgICAvLyBUaHJvdHRsZSB2YWx1\nZQogICAgcHJvdGVjdGVkIGZpbmFsIHN0YXRpYyBTdHJpbmcgVEhST1RUTEUg\nPSAidGhyb3R0bGUiOwoKICAgIC8vIERpZ2VzdCBUeXBlCiAgICBwcm90ZWN0\nZWQgZmluYWwgc3RhdGljIFN0cmluZyBESUdFU1RfVFlQRSA9ICJkaWdlc3RU\neXBlIjsKICAgIC8vIFBhc3N3ZAogICAgcHJvdGVjdGVkIGZpbmFsIHN0YXRp\nYyBTdHJpbmcgUEFTU1dEID0gInBhc3N3ZCI7CgogICAgLy8gTklPIFBhcmFt\nZXRlcnMKICAgIHByb3RlY3RlZCBmaW5hbCBzdGF0aWMgU3RyaW5nIENMSUVO\nVF9UQ1BfTk9ERUxBWSA9ICJjbGllbnRUY3BOb0RlbGF5IjsKICAgIHByb3Rl\nY3RlZCBmaW5hbCBzdGF0aWMgU3RyaW5nIFJFQURfVElNRU9VVCA9ICJyZWFk\nVGltZW91dCI7CiAgICBwcm90ZWN0ZWQgZmluYWwgc3RhdGljIFN0cmluZyBT\nUEVDVUxBVElWRV9SRUFEX1RJTUVPVVQgPSAic3BlY3VsYXRpdmVSZWFkVGlt\nZW91dCI7CiAgICAvLyBUaW1lb3V0IFNldHRpbmcKICAgIHByb3RlY3RlZCBm\naW5hbCBzdGF0aWMgU3RyaW5nIEFERF9FTlRSWV9USU1FT1VUX1NFQyA9ICJh\nZGRFbnRyeVRpbWVvdXRTZWMiOwogICAgcHJvdGVjdGVkIGZpbmFsIHN0YXRp\nYyBTdHJpbmcgUkVBRF9FTlRSWV9USU1FT1VUX1NFQyA9ICJyZWFkRW50cnlU\naW1lb3V0U2VjIjsKICAgIHByb3RlY3RlZCBmaW5hbCBzdGF0aWMgU3RyaW5n\nIFRJTUVPVVRfVEFTS19JTlRFUlZBTF9NSUxMSVMgPSAidGltZW91dFRhc2tJ\nbnRlcnZhbE1pbGxpcyI7CgogICAgLy8gTnVtYmVyIFdva2VyIFRocmVhZHMK\nICAgIHByb3RlY3RlZCBmaW5hbCBzdGF0aWMgU3RyaW5nIE5VTV9XT1JLRVJf\nVEhSRUFEUyA9ICJudW1Xb3JrZXJUaHJlYWRzIjsKCiAgICAvKioKICAgICAq\nIENvbnN0cnVjdCBhIGRlZmF1bHQgY2xpZW50LXNpZGUgY29uZmlndXJhdGlv\nbgogICAgICovCiAgICBwdWJsaWMgQ2xpZW50Q29uZmlndXJhdGlvbigpIHsK\nICAgICAgICBzdXBlcigpOwogICAgfQoKICAgIC8qKgogICAgICogQ29uc3Ry\ndWN0IGEgY2xpZW50LXNpZGUgY29uZmlndXJhdGlvbiB1c2luZyBhIGJhc2Ug\nY29uZmlndXJhdGlvbgogICAgICoKICAgICAqIEBwYXJhbSBjb25mCiAgICAg\nKiAgICAgICAgICBCYXNlIGNvbmZpZ3VyYXRpb24KICAgICAqLwogICAgcHVi\nbGljIENsaWVudENvbmZpZ3VyYXRpb24oQWJzdHJhY3RDb25maWd1cmF0aW9u\nIGNvbmYpIHsKICAgICAgICBzdXBlcigpOwogICAgICAgIGxvYWRDb25mKGNv\nbmYpOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IHRocm90dGxlIHZhbHVl\nCiAgICAgKgogICAgICogQHJldHVybiB0aHJvdHRsZSB2YWx1ZQogICAgICog\nQHNlZSAjc2V0VGhyb3R0bGVWYWx1ZQogICAgICovCiAgICBwdWJsaWMgaW50\nIGdldFRocm90dGxlVmFsdWUoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0\nSW50KFRIUk9UVExFLCA1MDAwKTsKICAgIH0KCiAgICAvKioKICAgICAqIFNl\ndCB0aHJvdHRsZSB2YWx1ZS4KICAgICAqCiAgICAgKiBTaW5jZSBCb29rS2Vl\ncGVyIHByb2Nlc3MgcmVxdWVzdHMgaW4gYXN5bmNocm91cyB3YXksIGl0IHdp\nbGwgaG9sZHMgCiAgICAgKiB0aG9zZSBwZW5kaW5nIHJlcXVlc3QgaW4gcXVl\ndWUuIFlvdSBtYXkgZWFzaWx5IHJ1biBpdCBvdXQgb2YgbWVtb3J5CiAgICAg\nKiBpZiBwcm9kdWNpbmcgdG9vIG1hbnkgcmVxdWVzdHMgdGhhbiB0aGUgY2Fw\nYWJpbGl0eSBvZiBib29raWUgc2VydmVycyBjYW4gaGFuZGxlLgogICAgICog\nVG8gcHJldmVudCB0aGF0IGZyb20gaGFwcGVkaW5nLCB5b3UgY2FuIHNldCBh\nIHRocm90dGxlIHZhbHVlIGhlcmUuCiAgICAgKgogICAgICogQHBhcmFtIHRo\ncm90dGxlCiAgICAgKiAgICAgICAgICBUaHJvdHRsZSBWYWx1ZQogICAgICog\nQHJldHVybiBjbGllbnQgY29uZmlndXJhdGlvbgogICAgICovCiAgICBwdWJs\naWMgQ2xpZW50Q29uZmlndXJhdGlvbiBzZXRUaHJvdHRsZVZhbHVlKGludCB0\naHJvdHRsZSkgewogICAgICAgIHRoaXMuc2V0UHJvcGVydHkoVEhST1RUTEUs\nIEludGVnZXIudG9TdHJpbmcodGhyb3R0bGUpKTsKICAgICAgICByZXR1cm4g\ndGhpczsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCBkaWdlc3QgdHlwZSB1\nc2VkIGluIGJvb2trZWVwZXIgYWRtaW4KICAgICAqCiAgICAgKiBAcmV0dXJu\nIGRpZ2VzdCB0eXBlCiAgICAgKiBAc2VlICNzZXRCb29raWVSZWNvdmVyeURp\nZ2VzdFR5cGUKICAgICAqLwogICAgcHVibGljIERpZ2VzdFR5cGUgZ2V0Qm9v\na2llUmVjb3ZlcnlEaWdlc3RUeXBlKCkgewogICAgICAgIHJldHVybiBEaWdl\nc3RUeXBlLnZhbHVlT2YodGhpcy5nZXRTdHJpbmcoRElHRVNUX1RZUEUsIERp\nZ2VzdFR5cGUuQ1JDMzIudG9TdHJpbmcoKSkpOwogICAgfQoKICAgIC8qKgog\nICAgICogU2V0IGRpZ2VzdCB0eXBlIHVzZWQgaW4gYm9va2tlZXBlciBhZG1p\nbi4KICAgICAqCiAgICAgKiBEaWdlc3QgVHlwZSBhbmQgUGFzc3dkIHVzZWQg\ndG8gb3BlbiBsZWRnZXJzIGZvciBhZG1pbiB0b29sCiAgICAgKiBGb3Igbm93\nLCBhc3N1bWUgdGhhdCBhbGwgbGVkZ2VycyB3ZXJlIGNyZWF0ZWQgd2l0aCB0\naGUgc2FtZSBEaWdlc3RUeXBlCiAgICAgKiBhbmQgcGFzc3dvcmQuIEluIHRo\nZSBmdXR1cmUsIHRoaXMgYWRtaW4gdG9vbCB3aWxsIG5lZWQgdG8ga25vdyBm\nb3IgZWFjaAogICAgICogbGVkZ2VyLCB3aGF0IHdhcyB0aGUgRGlnZXN0VHlw\nZSBhbmQgcGFzc3dvcmQgdXNlZCB0byBjcmVhdGUgaXQgYmVmb3JlIGl0CiAg\nICAgKiBjYW4gb3BlbiBpdC4gVGhlc2UgdmFsdWVzIHdpbGwgY29tZSBmcm9t\nIFN5c3RlbSBwcm9wZXJ0aWVzLCB0aG91Z2ggZml4ZWQKICAgICAqIGRlZmF1\nbHRzIGFyZSBkZWZpbmVkIGhlcmUuCiAgICAgKgogICAgICogQHBhcmFtIGRp\nZ2VzdFR5cGUKICAgICAqICAgICAgICAgIERpZ2VzdCBUeXBlCiAgICAgKiBA\ncmV0dXJuIGNsaWVudCBjb25maWd1cmF0aW9uCiAgICAgKi8KICAgIHB1Ymxp\nYyBDbGllbnRDb25maWd1cmF0aW9uIHNldEJvb2tpZVJlY292ZXJ5RGlnZXN0\nVHlwZShEaWdlc3RUeXBlIGRpZ2VzdFR5cGUpIHsKICAgICAgICB0aGlzLnNl\ndFByb3BlcnR5KERJR0VTVF9UWVBFLCBkaWdlc3RUeXBlLnRvU3RyaW5nKCkp\nOwogICAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICAgIC8qKgogICAgICog\nR2V0IHBhc3N3ZCB1c2VkIGluIGJvb2trZWVwZXIgYWRtaW4KICAgICAqCiAg\nICAgKiBAcmV0dXJuIHBhc3N3b3JkCiAgICAgKiBAc2VlICNzZXRCb29raWVS\nZWNvdmVyeVBhc3N3ZAogICAgICovCiAgICBwdWJsaWMgYnl0ZVtdIGdldEJv\nb2tpZVJlY292ZXJ5UGFzc3dkKCkgewogICAgICAgIHJldHVybiB0aGlzLmdl\ndFN0cmluZyhQQVNTV0QsICIiKS5nZXRCeXRlcygpOwogICAgfQoKICAgIC8q\nKgogICAgICogU2V0IHBhc3N3ZCB1c2VkIGluIGJvb2trZWVwZXIgYWRtaW4u\nCiAgICAgKgogICAgICogRGlnZXN0IFR5cGUgYW5kIFBhc3N3ZCB1c2VkIHRv\nIG9wZW4gbGVkZ2VycyBmb3IgYWRtaW4gdG9vbAogICAgICogRm9yIG5vdywg\nYXNzdW1lIHRoYXQgYWxsIGxlZGdlcnMgd2VyZSBjcmVhdGVkIHdpdGggdGhl\nIHNhbWUgRGlnZXN0VHlwZQogICAgICogYW5kIHBhc3N3b3JkLiBJbiB0aGUg\nZnV0dXJlLCB0aGlzIGFkbWluIHRvb2wgd2lsbCBuZWVkIHRvIGtub3cgZm9y\nIGVhY2gKICAgICAqIGxlZGdlciwgd2hhdCB3YXMgdGhlIERpZ2VzdFR5cGUg\nYW5kIHBhc3N3b3JkIHVzZWQgdG8gY3JlYXRlIGl0IGJlZm9yZSBpdAogICAg\nICogY2FuIG9wZW4gaXQuIFRoZXNlIHZhbHVlcyB3aWxsIGNvbWUgZnJvbSBT\neXN0ZW0gcHJvcGVydGllcywgdGhvdWdoIGZpeGVkCiAgICAgKiBkZWZhdWx0\ncyBhcmUgZGVmaW5lZCBoZXJlLgogICAgICoKICAgICAqIEBwYXJhbSBwYXNz\nd2QKICAgICAqICAgICAgICAgIFBhc3N3b3JkCiAgICAgKiBAcmV0dXJuIGNs\naWVudCBjb25maWd1cmF0aW9uCiAgICAgKi8KICAgIHB1YmxpYyBDbGllbnRD\nb25maWd1cmF0aW9uIHNldEJvb2tpZVJlY292ZXJ5UGFzc3dkKGJ5dGVbXSBw\nYXNzd2QpIHsKICAgICAgICBzZXRQcm9wZXJ0eShQQVNTV0QsIG5ldyBTdHJp\nbmcocGFzc3dkKSk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBJcyB0Y3AgY29ubmVjdGlvbiBubyBkZWxheS4KICAgICAq\nCiAgICAgKiBAcmV0dXJuIHRjcCBzb2NrZXQgbm9kZWxheSBzZXR0aW5nCiAg\nICAgKiBAc2VlICNzZXRDbGllbnRUY3BOb0RlbGF5CiAgICAgKi8KICAgIHB1\nYmxpYyBib29sZWFuIGdldENsaWVudFRjcE5vRGVsYXkoKSB7CiAgICAgICAg\ncmV0dXJuIGdldEJvb2xlYW4oQ0xJRU5UX1RDUF9OT0RFTEFZLCB0cnVlKTsK\nICAgIH0KCiAgICAvKioKICAgICAqIFNldCBzb2NrZXQgbm9kZWxheSBzZXR0\naW5nLgogICAgICoKICAgICAqIFRoaXMgc2V0dGluZ3MgaXMgdXNlZCB0byBl\nbmFibGVkL2Rpc2FibGVkIE5hZ2xlJ3MgYWxnb3JpdGhtLCB3aGljaCBpcyBh\nIG1lYW5zIG9mCiAgICAgKiBpbXByb3ZpbmcgdGhlIGVmZmljaWVuY3kgb2Yg\nVENQL0lQIG5ldHdvcmtzIGJ5IHJlZHVjaW5nIHRoZSBudW1iZXIgb2YgcGFj\na2V0cwogICAgICogdGhhdCBuZWVkIHRvIGJlIHNlbnQgb3ZlciB0aGUgbmV0\nd29yay4gSWYgeW91IGFyZSBzZW5kaW5nIG1hbnkgc21hbGwgbWVzc2FnZXMs\nIAogICAgICogc3VjaCB0aGF0IG1vcmUgdGhhbiBvbmUgY2FuIGZpdCBpbiBh\nIHNpbmdsZSBJUCBwYWNrZXQsIHNldHRpbmcgY2xpZW50LnRjcG5vZGVsYXkK\nICAgICAqIHRvIGZhbHNlIHRvIGVuYWJsZSBOYWdsZSBhbGdvcml0aG0gY2Fu\nIHByb3ZpZGUgYmV0dGVyIHBlcmZvcm1hbmNlLgogICAgICogPGJyPgogICAg\nICogRGVmYXVsdCB2YWx1ZSBpcyB0cnVlLgogICAgICoKICAgICAqIEBwYXJh\nbSBub0RlbGF5CiAgICAgKiAgICAgICAgICBOb0RlbGF5IHNldHRpbmcKICAg\nICAqIEByZXR1cm4gY2xpZW50IGNvbmZpZ3VyYXRpb24KICAgICAqLwogICAg\ncHVibGljIENsaWVudENvbmZpZ3VyYXRpb24gc2V0Q2xpZW50VGNwTm9EZWxh\neShib29sZWFuIG5vRGVsYXkpIHsKICAgICAgICBzZXRQcm9wZXJ0eShDTElF\nTlRfVENQX05PREVMQVksIEJvb2xlYW4udG9TdHJpbmcobm9EZWxheSkpOwog\nICAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICAgIC8qKgogICAgICogR2V0\nIHpvb2tlZXBlciBzZXJ2ZXJzIHRvIGNvbm5lY3QKICAgICAqCiAgICAgKiBA\ncmV0dXJuIHpvb2tlZXBlciBzZXJ2ZXJzCiAgICAgKi8KICAgIHB1YmxpYyBT\ndHJpbmcgZ2V0WmtTZXJ2ZXJzKCkgewogICAgICAgIExpc3Q8T2JqZWN0PiBz\nZXJ2ZXJzID0gZ2V0TGlzdChaS19TRVJWRVJTLCBudWxsKTsKICAgICAgICBp\nZiAobnVsbCA9PSBzZXJ2ZXJzIHx8IDAgPT0gc2VydmVycy5zaXplKCkpIHsK\nICAgICAgICAgICAgcmV0dXJuICJsb2NhbGhvc3QiOwogICAgICAgIH0KICAg\nICAgICByZXR1cm4gU3RyaW5nVXRpbHMuam9pbihzZXJ2ZXJzLCAiLCIpOwog\nICAgfQoKICAgIC8qKgogICAgICogU2V0IHpvb2tlZXBlciBzZXJ2ZXJzIHRv\nIGNvbm5lY3QKICAgICAqCiAgICAgKiBAcGFyYW0gemtTZXJ2ZXJzCiAgICAg\nKiAgICAgICAgICBab29LZWVwZXIgc2VydmVycyB0byBjb25uZWN0CiAgICAg\nKi8KICAgIHB1YmxpYyBDbGllbnRDb25maWd1cmF0aW9uIHNldFprU2VydmVy\ncyhTdHJpbmcgemtTZXJ2ZXJzKSB7CiAgICAgICAgc2V0UHJvcGVydHkoWktf\nU0VSVkVSUywgemtTZXJ2ZXJzKTsKICAgICAgICByZXR1cm4gdGhpczsKICAg\nIH0KCiAgICAvKioKICAgICAqIEdldCB6b29rZWVwZXIgdGltZW91dAogICAg\nICoKICAgICAqIEByZXR1cm4gem9va2VlcGVyIGNsaWVudCB0aW1lb3V0CiAg\nICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0WmtUaW1lb3V0KCkgewogICAgICAg\nIHJldHVybiBnZXRJbnQoWktfVElNRU9VVCwgMTAwMDApOwogICAgfQoKICAg\nIC8qKgogICAgICogU2V0IHpvb2tlZXBlciB0aW1lb3V0CiAgICAgKgogICAg\nICogQHBhcmFtIHprVGltZW91dAogICAgICogICAgICAgICAgWm9vS2VlcGVy\nIGNsaWVudCB0aW1lb3V0CiAgICAgKiBAcmV0dXJuIGNsaWVudCBjb25maWd1\ncmF0aW9uCiAgICAgKi8KICAgIHB1YmxpYyBDbGllbnRDb25maWd1cmF0aW9u\nIHNldFprVGltZW91dChpbnQgemtUaW1lb3V0KSB7CiAgICAgICAgc2V0UHJv\ncGVydHkoWktfVElNRU9VVCwgSW50ZWdlci50b1N0cmluZyh6a1RpbWVvdXQp\nKTsKICAgICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICAvKioKICAgICAq\nIEdldCB0aGUgc29ja2V0IHJlYWQgdGltZW91dC4gVGhpcyBpcyB0aGUgbnVt\nYmVyIG9mCiAgICAgKiBzZWNvbmRzIHdlIHdhaXQgd2l0aG91dCBoZWFyaW5n\nIGEgcmVzcG9uc2UgZnJvbSBhIGJvb2tpZQogICAgICogYmVmb3JlIHdlIGNv\nbnNpZGVyIGl0IGZhaWxlZC4KICAgICAqCiAgICAgKiBUaGUgZGVmYXVsdCBp\ncyA1IHNlY29uZHMuCiAgICAgKgogICAgICogQHJldHVybiB0aGUgY3VycmVu\ndCByZWFkIHRpbWVvdXQgaW4gc2Vjb25kcwogICAgICogQGRlcHJlY2F0ZWQg\ndXNlIHtAbGluayBnZXRSZWFkRW50cnlUaW1lb3V0KCl9IG9yIHtAbGluayBn\nZXRBZGRFbnRyeVRpbWVvdXQoKX0gaW5zdGVhZAogICAgICovCiAgICBARGVw\ncmVjYXRlZAogICAgcHVibGljIGludCBnZXRSZWFkVGltZW91dCgpIHsKICAg\nICAgICByZXR1cm4gZ2V0SW50KFJFQURfVElNRU9VVCwgNSk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBTZXQgdGhlIHNvY2tldCByZWFkIHRpbWVvdXQuCiAg\nICAgKiBAc2VlICNnZXRSZWFkVGltZW91dCgpCiAgICAgKiBAcGFyYW0gdGlt\nZW91dCBUaGUgbmV3IHJlYWQgdGltZW91dCBpbiBzZWNvbmRzCiAgICAgKiBA\ncmV0dXJuIGNsaWVudCBjb25maWd1cmF0aW9uCiAgICAgKiBAZGVwcmVjYXRl\nZCB1c2Uge0BsaW5rIHNldFJlYWRFbnRyeVRpbWVvdXQoaW50KX0gb3Ige0Bs\naW5rIHNldEFkZEVudHJ5VGltZW91dChpbnQpfSBpbnN0ZWFkCiAgICAgKi8K\nICAgIEBEZXByZWNhdGVkCiAgICBwdWJsaWMgQ2xpZW50Q29uZmlndXJhdGlv\nbiBzZXRSZWFkVGltZW91dChpbnQgdGltZW91dCkgewogICAgICAgIHNldFBy\nb3BlcnR5KFJFQURfVElNRU9VVCwgSW50ZWdlci50b1N0cmluZyh0aW1lb3V0\nKSk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBHZXQgdGhlIHRpbWVvdXQgZm9yIGFkZCByZXF1ZXN0LiBUaGlzIGlzIHRo\nZSBudW1iZXIgb2Ygc2Vjb25kcyB3ZSB3YWl0IHdpdGhvdXQgaGVhcmluZwog\nICAgICogYSByZXNwb25zZSBmb3IgYWRkIHJlcXVlc3QgZnJvbSBhIGJvb2tp\nZSBiZWZvcmUgd2UgY29uc2lkZXIgaXQgZmFpbGVkLgogICAgICoKICAgICAq\nIFRoZSBkZWZhdWx0IHZhbHVlIGlzIDUgc2Vjb25kIGZvciBiYWNrd2FyZHMg\nY29tcGF0aWJpbGl0eS4KICAgICAqCiAgICAgKiBAcmV0dXJuIGFkZCBlbnRy\neSB0aW1lb3V0LgogICAgICovCiAgICBAU3VwcHJlc3NXYXJuaW5ncygiZGVw\ncmVjYXRpb24iKQogICAgcHVibGljIGludCBnZXRBZGRFbnRyeVRpbWVvdXQo\nKSB7CiAgICAgICAgcmV0dXJuIGdldEludChBRERfRU5UUllfVElNRU9VVF9T\nRUMsIGdldFJlYWRUaW1lb3V0KCkpOwogICAgfQoKICAgIC8qKgogICAgICog\nU2V0IHRpbWVvdXQgZm9yIGFkZCBlbnRyeSByZXF1ZXN0LgogICAgICogQHNl\nZSAjZ2V0QWRkRW50cnlUaW1lb3V0KCkKICAgICAqCiAgICAgKiBAcGFyYW0g\ndGltZW91dAogICAgICogICAgICAgICAgVGhlIG5ldyBhZGQgZW50cnkgdGlt\nZW91dCBpbiBzZWNvbmRzLgogICAgICogQHJldHVybiBjbGllbnQgY29uZmln\ndXJhdGlvbi4KICAgICAqLwogICAgcHVibGljIENsaWVudENvbmZpZ3VyYXRp\nb24gc2V0QWRkRW50cnlUaW1lb3V0KGludCB0aW1lb3V0KSB7CiAgICAgICAg\nc2V0UHJvcGVydHkoQUREX0VOVFJZX1RJTUVPVVRfU0VDLCB0aW1lb3V0KTsK\nICAgICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICAvKioKICAgICAqIEdl\ndCB0aGUgdGltZW91dCBmb3IgcmVhZCBlbnRyeS4gVGhpcyBpcyB0aGUgbnVt\nYmVyIG9mIHNlY29uZHMgd2Ugd2FpdCB3aXRob3V0IGhlYXJpbmcKICAgICAq\nIGEgcmVzcG9uc2UgZm9yIHJlYWQgZW50cnkgcmVxdWVzdCBmcm9tIGEgYm9v\na2llIGJlZm9yZSB3ZSBjb25zaWRlciBpdCBmYWlsZWQuIEJ5IGRlZmF1bHQs\nCiAgICAgKiB3ZSB1c2Ugc29ja2V0IHRpbWVvdXQgc3BlY2lmaWVkIGF0IHtA\nbGluayAjZ2V0UmVhZFRpbWVvdXQoKX0uCiAgICAgKgogICAgICogQHJldHVy\nbiByZWFkIGVudHJ5IHRpbWVvdXQuCiAgICAgKi8KICAgIEBTdXBwcmVzc1dh\ncm5pbmdzKCJkZXByZWNhdGlvbiIpCiAgICBwdWJsaWMgaW50IGdldFJlYWRF\nbnRyeVRpbWVvdXQoKSB7CiAgICAgICAgcmV0dXJuIGdldEludChSRUFEX0VO\nVFJZX1RJTUVPVVRfU0VDLCBnZXRSZWFkVGltZW91dCgpKTsKICAgIH0KCiAg\nICAvKioKICAgICAqIFNldCB0aGUgdGltZW91dCBmb3IgcmVhZCBlbnRyeSBy\nZXF1ZXN0LgogICAgICogQHNlZSAjZ2V0UmVhZEVudHJ5VGltZW91dCgpCiAg\nICAgKgogICAgICogQHBhcmFtIHRpbWVvdXQKICAgICAqICAgICAgICAgIFRo\nZSBuZXcgcmVhZCBlbnRyeSB0aW1lb3V0IGluIHNlY29uZHMuCiAgICAgKiBA\ncmV0dXJuIGNsaWVudCBjb25maWd1cmF0aW9uLgogICAgICovCiAgICBwdWJs\naWMgQ2xpZW50Q29uZmlndXJhdGlvbiBzZXRSZWFkRW50cnlUaW1lb3V0KGlu\ndCB0aW1lb3V0KSB7CiAgICAgICAgc2V0UHJvcGVydHkoUkVBRF9FTlRSWV9U\nSU1FT1VUX1NFQywgdGltZW91dCk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIGludGVydmFsIGJldHdlZW4g\nc3VjY2Vzc2l2ZSBleGVjdXRpb25zIG9mIHRoZSBQZXJDaGFubmVsQm9va2ll\nQ2xpZW50J3MKICAgICAqIFRpbWVvdXRUYXNrLiBUaGlzIHZhbHVlIGlzIGlu\nIG1pbGxpc2Vjb25kcy4gRXZlcnkgWCBtaWxsaXNlY29uZHMsIHRoZSB0aW1l\nb3V0IHRhc2sKICAgICAqIHdpbGwgYmUgZXhlY3V0ZWQgYW5kIGl0IHdpbGwg\nZXJyb3Igb3V0IGVudHJpZXMgdGhhdCBoYXZlIHRpbWVkIG91dC4KICAgICAq\nCiAgICAgKiBXZSBkbyBpdCBtb3JlIGFnZ3Jlc3NpdmUgdG8gbm90IGFjY3Vt\ndWxhdGUgcGVuZGluZyByZXF1ZXN0cyBkdWUgdG8gc2xvdyByZXNwb25zZXMu\nCiAgICAgKiBAcmV0dXJuCiAgICAgKi8KICAgIHB1YmxpYyBsb25nIGdldFRp\nbWVvdXRUYXNrSW50ZXJ2YWxNaWxsaXMoKSB7CiAgICAgICAgcmV0dXJuIGdl\ndExvbmcoVElNRU9VVF9UQVNLX0lOVEVSVkFMX01JTExJUywKICAgICAgICAg\nICAgICAgIFRpbWVVbml0LlNFQ09ORFMudG9NaWxsaXMoTWF0aC5taW4oZ2V0\nQWRkRW50cnlUaW1lb3V0KCksIGdldFJlYWRFbnRyeVRpbWVvdXQoKSkpKTsK\nICAgIH0KCiAgICBwdWJsaWMgQ2xpZW50Q29uZmlndXJhdGlvbiBzZXRUaW1l\nb3V0VGFza0ludGVydmFsTWlsbGlzKGxvbmcgdGltZW91dE1pbGxpcykgewog\nICAgICAgIHNldFByb3BlcnR5KFRJTUVPVVRfVEFTS19JTlRFUlZBTF9NSUxM\nSVMsIExvbmcudG9TdHJpbmcodGltZW91dE1pbGxpcykpOwogICAgICAgIHJl\ndHVybiB0aGlzOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IHRoZSBudW1i\nZXIgb2Ygd29ya2VyIHRocmVhZHMuIFRoaXMgaXMgdGhlIG51bWJlciBvZgog\nICAgICogd29ya2VyIHRocmVhZHMgdXNlZCBieSBib29ra2VlcGVyIGNsaWVu\ndCB0byBzdWJtaXQgb3BlcmF0aW9ucy4KICAgICAqCiAgICAgKiBAcmV0dXJu\nIHRoZSBudW1iZXIgb2Ygd29ya2VyIHRocmVhZHMKICAgICAqLwogICAgcHVi\nbGljIGludCBnZXROdW1Xb3JrZXJUaHJlYWRzKCkgewogICAgICAgIHJldHVy\nbiBnZXRJbnQoTlVNX1dPUktFUl9USFJFQURTLCBSdW50aW1lLmdldFJ1bnRp\nbWUoKS5hdmFpbGFibGVQcm9jZXNzb3JzKCkpOwogICAgfQoKICAgIC8qKgog\nICAgICogU2V0IHRoZSBudW1iZXIgb2Ygd29ya2VyIHRocmVhZHMuCiAgICAg\nKgogICAgICogPHA+CiAgICAgKiBOT1RFOiBzZXR0aW5nIHRoZSBudW1iZXIg\nb2Ygd29ya2VyIHRocmVhZHMgYWZ0ZXIgQm9va0tlZXBlciBvYmplY3QgaXMg\nY29uc3RydWN0ZWQKICAgICAqIHdpbGwgbm90IHRha2UgYW55IGVmZmVjdCBv\nbiB0aGUgbnVtYmVyIG9mIHRocmVhZHMgaW4gdGhlIHBvb2wuCiAgICAgKiA8\nL3A+CiAgICAgKgogICAgICogQHNlZSAjZ2V0TnVtV29ya2VyVGhyZWFkcygp\nCiAgICAgKiBAcGFyYW0gbnVtVGhyZWFkcyBudW1iZXIgb2Ygd29ya2VyIHRo\ncmVhZHMgdXNlZCBmb3IgYm9va2tlZXBlcgogICAgICogQHJldHVybiBjbGll\nbnQgY29uZmlndXJhdGlvbgogICAgICovCiAgICBwdWJsaWMgQ2xpZW50Q29u\nZmlndXJhdGlvbiBzZXROdW1Xb3JrZXJUaHJlYWRzKGludCBudW1UaHJlYWRz\nKSB7CiAgICAgICAgc2V0UHJvcGVydHkoTlVNX1dPUktFUl9USFJFQURTLCBu\ndW1UaHJlYWRzKTsKICAgICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICAv\nKioKICAgICAqIEdldCB0aGUgcGVyaW9kIG9mIHRpbWUgYWZ0ZXIgd2hpY2gg\nYSBzcGVjdWxhdGl2ZSBlbnRyeSByZWFkIHNob3VsZCBiZSB0cmlnZ2VyZWQu\nCiAgICAgKiBBIHNwZWN1bGF0aXZlIGVudHJ5IHJlYWQgaXMgc2VudCB0byB0\naGUgbmV4dCByZXBsaWNhIGJvb2tpZSBiZWZvcmUKICAgICAqIGFuIGVycm9y\nIG9yIHJlc3BvbnNlIGhhcyBiZWVuIHJlY2VpdmVkIGZvciB0aGUgcHJldmlv\ndXMgZW50cnkgcmVhZCByZXF1ZXN0LgogICAgICoKICAgICAqIEEgc3BlY3Vs\nYXRpdmUgZW50cnkgcmVhZCBpcyBvbmx5IHNlbnQgaWYgd2UgaGF2ZSBub3Qg\naGVhcmQgZnJvbSB0aGUgY3VycmVudAogICAgICogcmVwbGljYSBib29raWUg\nZHVyaW5nIHRoZSBlbnRpcmUgcmVhZCBvcGVyYXRpb24gd2hpY2ggbWF5IGNv\nbXByaXNlIG9mIG1hbnkgZW50cmllcy4KICAgICAqCiAgICAgKiBTcGVjdWxh\ndGl2ZSByZWFkcyBhbGxvdyB0aGUgY2xpZW50IHRvIGF2b2lkIGhhdmluZyB0\nbyB3YWl0IGZvciB0aGUgY29ubmVjdCB0aW1lb3V0CiAgICAgKiBpbiB0aGUg\nY2FzZSB0aGF0IGEgYm9va2llIGhhcyBmYWlsZWQuIEl0IGluZHVjZXMgaGln\naGVyIGxvYWQgb24gdGhlIG5ldHdvcmsgYW5kIG9uCiAgICAgKiBib29raWVz\nLiBUaGlzIHNob3VsZCBiZSB0YWtlbiBpbnRvIGFjY291bnQgYmVmb3JlIGNo\nYW5naW5nIHRoaXMgY29uZmlndXJhdGlvbiB2YWx1ZS4KICAgICAqCiAgICAg\nKiBAc2VlIG9yZy5hcGFjaGUuYm9va2tlZXBlci5jbGllbnQuTGVkZ2VySGFu\nZGxlI2FzeW5jUmVhZEVudHJpZXMKICAgICAqIEByZXR1cm4gdGhlIHNwZWN1\nbGF0aXZlIHJlYWQgdGltZW91dCBpbiBtaWxsaXNlY29uZHMuIERlZmF1bHQg\nMjAwMC4KICAgICAqLwogICAgcHVibGljIGludCBnZXRTcGVjdWxhdGl2ZVJl\nYWRUaW1lb3V0KCkgewogICAgICAgIHJldHVybiBnZXRJbnQoU1BFQ1VMQVRJ\nVkVfUkVBRF9USU1FT1VULCAyMDAwKTsKICAgIH0KCiAgICAvKioKICAgICAq\nIFNldCB0aGUgc3BlY3VsYXRpdmUgcmVhZCB0aW1lb3V0LiBBIGxvd2VyIHRp\nbWVvdXQgd2lsbCByZWR1Y2UgcmVhZCBsYXRlbmN5IGluIHRoZQogICAgICog\nY2FzZSBvZiBhIGZhaWxlZCBib29raWUsIHdoaWxlIGluY3JlYXNpbmcgdGhl\nIGxvYWQgb24gYm9va2llcyBhbmQgdGhlIG5ldHdvcmsuCiAgICAgKgogICAg\nICogVGhlIGRlZmF1bHQgaXMgMjAwMCBtaWxsaXNlY29uZHMuIEEgdmFsdWUg\nb2YgMCB3aWxsIGRpc2FibGUgc3BlY3VsYXRpdmUgcmVhZHMKICAgICAqIGNv\nbXBsZXRlbHkuCiAgICAgKgogICAgICogQHNlZSAjZ2V0U3BlY3VsYXRpdmVS\nZWFkVGltZW91dCgpCiAgICAgKiBAcGFyYW0gdGltZW91dCB0aGUgdGltZW91\ndCB2YWx1ZSwgaW4gbWlsbGlzZWNvbmRzCiAgICAgKiBAcmV0dXJuIGNsaWVu\ndCBjb25maWd1cmF0aW9uCiAgICAgKi8KICAgIHB1YmxpYyBDbGllbnRDb25m\naWd1cmF0aW9uIHNldFNwZWN1bGF0aXZlUmVhZFRpbWVvdXQoaW50IHRpbWVv\ndXQpIHsKICAgICAgICBzZXRQcm9wZXJ0eShTUEVDVUxBVElWRV9SRUFEX1RJ\nTUVPVVQsIHRpbWVvdXQpOwogICAgICAgIHJldHVybiB0aGlzOwogICAgfQp9\nCg==\n","encoding":"base64"}

