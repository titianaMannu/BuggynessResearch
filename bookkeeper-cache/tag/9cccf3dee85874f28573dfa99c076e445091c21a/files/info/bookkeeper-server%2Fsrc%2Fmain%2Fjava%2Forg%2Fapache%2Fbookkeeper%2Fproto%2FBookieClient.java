{"sha":"1c3458600ab25309456408c5ee81f7c078d3bd3c","node_id":"MDQ6QmxvYjE1NzU5NTY6MWMzNDU4NjAwYWIyNTMwOTQ1NjQwOGM1ZWU4MWY3YzA3OGQzYmQzYw==","size":10715,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/1c3458600ab25309456408c5ee81f7c078d3bd3c","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIucHJvdG87CgovKgogKgog\nKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24g\nKEFTRikgdW5kZXIgb25lCiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5z\nZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQogKiBkaXN0cmli\ndXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlv\nbgogKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0Yg\nbGljZW5zZXMgdGhpcyBmaWxlCiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hl\nIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUKICogIkxpY2Vuc2UiKTsgeW91\nIG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZQog\nKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9m\nIHRoZSBMaWNlbnNlIGF0CiAqCiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3Jn\nL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBi\neSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywKICog\nc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlz\ndHJpYnV0ZWQgb24gYW4KICogIkFTIElTIiBCQVNJUywgV0lUSE9VVCBXQVJS\nQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZCiAqIEtJTkQsIGVpdGhlciBl\neHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZQog\nKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5k\nIGxpbWl0YXRpb25zCiAqIHVuZGVyIHRoZSBMaWNlbnNlLgogKgogKi8KCmlt\ncG9ydCBzdGF0aWMgY29tLmdvb2dsZS5jb21tb24uYmFzZS5DaGFyc2V0cy5V\nVEZfODsKCmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uOwppbXBvcnQgamF2\nYS5uZXQuSW5ldFNvY2tldEFkZHJlc3M7CmltcG9ydCBqYXZhLnV0aWwuSGFz\naFNldDsKaW1wb3J0IGphdmEudXRpbC5TZXQ7CmltcG9ydCBqYXZhLnV0aWwu\nY29uY3VycmVudC5Db25jdXJyZW50SGFzaE1hcDsKaW1wb3J0IGphdmEudXRp\nbC5jb25jdXJyZW50LkV4ZWN1dG9yczsKaW1wb3J0IGphdmEudXRpbC5jb25j\ndXJyZW50LlNjaGVkdWxlZEV4ZWN1dG9yU2VydmljZTsKaW1wb3J0IGphdmEu\ndXRpbC5jb25jdXJyZW50LmF0b21pYy5BdG9taWNMb25nOwppbXBvcnQgamF2\nYS51dGlsLmNvbmN1cnJlbnQubG9ja3MuUmVlbnRyYW50UmVhZFdyaXRlTG9j\nazsKCmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY2xpZW50LkJLRXhj\nZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNvbmYuQ2xp\nZW50Q29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBl\nci5wcm90by5Cb29ra2VlcGVySW50ZXJuYWxDYWxsYmFja3MuR2VuZXJpY0Nh\nbGxiYWNrOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLnByb3RvLkJv\nb2trZWVwZXJJbnRlcm5hbENhbGxiYWNrcy5SZWFkRW50cnlDYWxsYmFjazsK\naW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5wcm90by5Cb29ra2VlcGVy\nSW50ZXJuYWxDYWxsYmFja3MuV3JpdGVDYWxsYmFjazsKaW1wb3J0IG9yZy5h\ncGFjaGUuYm9va2tlZXBlci51dGlsLk9yZGVyZWRTYWZlRXhlY3V0b3I7Cmlt\ncG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIudXRpbC5TYWZlUnVubmFibGU7\nCmltcG9ydCBvcmcuamJvc3MubmV0dHkuYnVmZmVyLkNoYW5uZWxCdWZmZXI7\nCmltcG9ydCBvcmcuamJvc3MubmV0dHkuYnVmZmVyLkNoYW5uZWxCdWZmZXJz\nOwppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmNoYW5uZWwuc29ja2V0LkNsaWVu\ndFNvY2tldENoYW5uZWxGYWN0b3J5OwppbXBvcnQgb3JnLmpib3NzLm5ldHR5\nLmNoYW5uZWwuc29ja2V0Lm5pby5OaW9DbGllbnRTb2NrZXRDaGFubmVsRmFj\ndG9yeTsKaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LmxvY2tzLlJlZW50\ncmFudFJlYWRXcml0ZUxvY2s7CgppbXBvcnQgb3JnLnNsZjRqLkxvZ2dlcjsK\naW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJGYWN0b3J5OwoKLyoqCiAqIEltcGxl\nbWVudHMgdGhlIGNsaWVudC1zaWRlIHBhcnQgb2YgdGhlIEJvb2tLZWVwZXIg\ncHJvdG9jb2wuCiAqCiAqLwpwdWJsaWMgY2xhc3MgQm9va2llQ2xpZW50IHsK\nICAgIHN0YXRpYyBmaW5hbCBMb2dnZXIgTE9HID0gTG9nZ2VyRmFjdG9yeS5n\nZXRMb2dnZXIoQm9va2llQ2xpZW50LmNsYXNzKTsKCiAgICAvLyBUaGlzIGlz\nIGdsb2JhbCBzdGF0ZSB0aGF0IHNob3VsZCBiZSBhY3Jvc3MgYWxsIEJvb2tp\nZUNsaWVudHMKICAgIGZpbmFsIEF0b21pY0xvbmcgdG90YWxCeXRlc091dHN0\nYW5kaW5nID0gbmV3IEF0b21pY0xvbmcoKTsKCiAgICBmaW5hbCBPcmRlcmVk\nU2FmZUV4ZWN1dG9yIGV4ZWN1dG9yOwogICAgZmluYWwgQ2xpZW50U29ja2V0\nQ2hhbm5lbEZhY3RvcnkgY2hhbm5lbEZhY3Rvcnk7CiAgICBmaW5hbCBDb25j\ndXJyZW50SGFzaE1hcDxJbmV0U29ja2V0QWRkcmVzcywgUGVyQ2hhbm5lbEJv\nb2tpZUNsaWVudD4gY2hhbm5lbHMgPQogICAgICAgIG5ldyBDb25jdXJyZW50\nSGFzaE1hcDxJbmV0U29ja2V0QWRkcmVzcywgUGVyQ2hhbm5lbEJvb2tpZUNs\naWVudD4oKTsKICAgIGZpbmFsIFNjaGVkdWxlZEV4ZWN1dG9yU2VydmljZSB0\naW1lb3V0RXhlY3V0b3IgPSBFeGVjdXRvcnMubmV3U2luZ2xlVGhyZWFkU2No\nZWR1bGVkRXhlY3V0b3IoKTsKICAgIHByaXZhdGUgZmluYWwgQ2xpZW50Q29u\nZmlndXJhdGlvbiBjb25mOwogICAgcHJpdmF0ZSB2b2xhdGlsZSBib29sZWFu\nIGNsb3NlZDsKICAgIHByaXZhdGUgZmluYWwgUmVlbnRyYW50UmVhZFdyaXRl\nTG9jayBjbG9zZUxvY2s7CgogICAgcHVibGljIEJvb2tpZUNsaWVudChDbGll\nbnRDb25maWd1cmF0aW9uIGNvbmYsIENsaWVudFNvY2tldENoYW5uZWxGYWN0\nb3J5IGNoYW5uZWxGYWN0b3J5LCBPcmRlcmVkU2FmZUV4ZWN1dG9yIGV4ZWN1\ndG9yKSB7CiAgICAgICAgdGhpcy5jb25mID0gY29uZjsKICAgICAgICB0aGlz\nLmNoYW5uZWxGYWN0b3J5ID0gY2hhbm5lbEZhY3Rvcnk7CiAgICAgICAgdGhp\ncy5leGVjdXRvciA9IGV4ZWN1dG9yOwogICAgICAgIHRoaXMuY2xvc2VkID0g\nZmFsc2U7CiAgICAgICAgdGhpcy5jbG9zZUxvY2sgPSBuZXcgUmVlbnRyYW50\nUmVhZFdyaXRlTG9jaygpOwogICAgfQoKICAgIHB1YmxpYyBQZXJDaGFubmVs\nQm9va2llQ2xpZW50IGxvb2t1cENsaWVudChJbmV0U29ja2V0QWRkcmVzcyBh\nZGRyKSB7CiAgICAgICAgUGVyQ2hhbm5lbEJvb2tpZUNsaWVudCBjaGFubmVs\nID0gY2hhbm5lbHMuZ2V0KGFkZHIpOwoKICAgICAgICBpZiAoY2hhbm5lbCA9\nPSBudWxsKSB7CiAgICAgICAgICAgIGNsb3NlTG9jay5yZWFkTG9jaygpLmxv\nY2soKTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGlmIChj\nbG9zZWQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAg\nICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNoYW5uZWwgPSBuZXcg\nUGVyQ2hhbm5lbEJvb2tpZUNsaWVudChjb25mLCBleGVjdXRvciwgY2hhbm5l\nbEZhY3RvcnksIGFkZHIsIHRvdGFsQnl0ZXNPdXRzdGFuZGluZywKICAgICAg\nICAgICAgICAgICAgICAgICAgdGltZW91dEV4ZWN1dG9yKTsKICAgICAgICAg\nICAgICAgIFBlckNoYW5uZWxCb29raWVDbGllbnQgcHJldkNoYW5uZWwgPSBj\naGFubmVscy5wdXRJZkFic2VudChhZGRyLCBjaGFubmVsKTsKICAgICAgICAg\nICAgICAgIGlmIChwcmV2Q2hhbm5lbCAhPSBudWxsKSB7CiAgICAgICAgICAg\nICAgICAgICAgY2hhbm5lbCA9IHByZXZDaGFubmVsOwogICAgICAgICAgICAg\nICAgfQogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAg\nY2xvc2VMb2NrLnJlYWRMb2NrKCkudW5sb2NrKCk7CiAgICAgICAgICAgIH0K\nICAgICAgICB9CgogICAgICAgIHJldHVybiBjaGFubmVsOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIGNsb3NlQ2xpZW50cyhTZXQ8SW5ldFNvY2tldEFkZHJl\nc3M+IGFkZHJzKSB7CiAgICAgICAgZmluYWwgSGFzaFNldDxQZXJDaGFubmVs\nQm9va2llQ2xpZW50PiBjbGllbnRzID0gbmV3IEhhc2hTZXQ8UGVyQ2hhbm5l\nbEJvb2tpZUNsaWVudD4oKTsKICAgICAgICBmb3IgKEluZXRTb2NrZXRBZGRy\nZXNzIGEgOiBhZGRycykgewogICAgICAgICAgICBQZXJDaGFubmVsQm9va2ll\nQ2xpZW50IGMgPSBjaGFubmVscy5nZXQoYSk7CiAgICAgICAgICAgIGlmIChj\nICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIGNsaWVudHMuYWRkKGMpOwog\nICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoY2xpZW50cy5z\naXplKCkgPT0gMCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQog\nICAgICAgIGV4ZWN1dG9yLnN1Ym1pdChuZXcgU2FmZVJ1bm5hYmxlKCkgewog\nICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICBwdWJs\naWMgdm9pZCBzYWZlUnVuKCkgewogICAgICAgICAgICAgICAgICAgIGZvciAo\nUGVyQ2hhbm5lbEJvb2tpZUNsaWVudCBjIDogY2xpZW50cykgewogICAgICAg\nICAgICAgICAgICAgICAgICBjLmRpc2Nvbm5lY3QoKTsKICAgICAgICAgICAg\nICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIGFkZEVudHJ5KGZpbmFsIEluZXRTb2Nr\nZXRBZGRyZXNzIGFkZHIsIGZpbmFsIGxvbmcgbGVkZ2VySWQsIGZpbmFsIGJ5\ndGVbXSBtYXN0ZXJLZXksIGZpbmFsIGxvbmcgZW50cnlJZCwKICAgICAgICAg\nICAgZmluYWwgQ2hhbm5lbEJ1ZmZlciB0b1NlbmQsIGZpbmFsIFdyaXRlQ2Fs\nbGJhY2sgY2IsIGZpbmFsIE9iamVjdCBjdHgsIGZpbmFsIGludCBvcHRpb25z\nKSB7CiAgICAgICAgZmluYWwgUGVyQ2hhbm5lbEJvb2tpZUNsaWVudCBjbGll\nbnQgPSBsb29rdXBDbGllbnQoYWRkcik7CiAgICAgICAgaWYgKGNsaWVudCA9\nPSBudWxsKSB7CiAgICAgICAgICAgIGNiLndyaXRlQ29tcGxldGUoQktFeGNl\ncHRpb24uQ29kZS5Cb29raWVIYW5kbGVOb3RBdmFpbGFibGVFeGNlcHRpb24s\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVkZ2VySWQsIGVudHJ5\nSWQsIGFkZHIsIGN0eCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9\nCgogICAgICAgIGNsaWVudC5jb25uZWN0SWZOZWVkZWRBbmREb09wKG5ldyBH\nZW5lcmljQ2FsbGJhY2s8Vm9pZD4oKSB7CiAgICAgICAgICAgIEBPdmVycmlk\nZQogICAgICAgICAgICBwdWJsaWMgdm9pZCBvcGVyYXRpb25Db21wbGV0ZShm\naW5hbCBpbnQgcmMsIFZvaWQgcmVzdWx0KSB7CiAgICAgICAgICAgICAgICBp\nZiAocmMgIT0gQktFeGNlcHRpb24uQ29kZS5PSykgewogICAgICAgICAgICAg\nICAgICAgIGV4ZWN1dG9yLnN1Ym1pdE9yZGVyZWQobGVkZ2VySWQsIG5ldyBT\nYWZlUnVubmFibGUoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIEBPdmVy\ncmlkZQogICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBzYWZl\nUnVuKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2Iud3JpdGVD\nb21wbGV0ZShyYywgbGVkZ2VySWQsIGVudHJ5SWQsIGFkZHIsIGN0eCk7CiAg\nICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9\nKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAg\nICB9CiAgICAgICAgICAgICAgICBjbGllbnQuYWRkRW50cnkobGVkZ2VySWQs\nIG1hc3RlcktleSwgZW50cnlJZCwgdG9TZW5kLCBjYiwgY3R4LCBvcHRpb25z\nKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHJlYWRFbnRyeUFuZEZlbmNlTGVkZ2VyKGZpbmFsIEluZXRTb2Nr\nZXRBZGRyZXNzIGFkZHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICBmaW5hbCBsb25nIGxlZGdlcklkLAogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWwgYnl0ZVtdIG1hc3Rl\ncktleSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIGZpbmFsIGxvbmcgZW50cnlJZCwKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIGZpbmFsIFJlYWRFbnRyeUNhbGxiYWNrIGNiLAog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWwg\nT2JqZWN0IGN0eCkgewogICAgICAgIGZpbmFsIFBlckNoYW5uZWxCb29raWVD\nbGllbnQgY2xpZW50ID0gbG9va3VwQ2xpZW50KGFkZHIpOwogICAgICAgIGlm\nIChjbGllbnQgPT0gbnVsbCkgewogICAgICAgICAgICBjYi5yZWFkRW50cnlD\nb21wbGV0ZShCS0V4Y2VwdGlvbi5Db2RlLkJvb2tpZUhhbmRsZU5vdEF2YWls\nYWJsZUV4Y2VwdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgbGVkZ2VySWQsIGVudHJ5SWQsIG51bGwsIGN0eCk7CiAgICAgICAgICAg\nIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGNsaWVudC5jb25uZWN0SWZO\nZWVkZWRBbmREb09wKG5ldyBHZW5lcmljQ2FsbGJhY2s8Vm9pZD4oKSB7CiAg\nICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICBwdWJsaWMgdm9pZCBv\ncGVyYXRpb25Db21wbGV0ZShmaW5hbCBpbnQgcmMsIFZvaWQgcmVzdWx0KSB7\nCiAgICAgICAgICAgICAgICBpZiAocmMgIT0gQktFeGNlcHRpb24uQ29kZS5P\nSykgewogICAgICAgICAgICAgICAgICAgIGV4ZWN1dG9yLnN1Ym1pdE9yZGVy\nZWQobGVkZ2VySWQsIG5ldyBTYWZlUnVubmFibGUoKSB7CiAgICAgICAgICAg\nICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgICAgICAg\nICBwdWJsaWMgdm9pZCBzYWZlUnVuKCkgewogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgY2IucmVhZEVudHJ5Q29tcGxldGUocmMsIGxlZGdlcklkLCBl\nbnRyeUlkLCBudWxsLCBjdHgpOwogICAgICAgICAgICAgICAgICAgICAgICB9\nCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAg\ncmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2xp\nZW50LnJlYWRFbnRyeUFuZEZlbmNlTGVkZ2VyKGxlZGdlcklkLCBtYXN0ZXJL\nZXksIGVudHJ5SWQsIGNiLCBjdHgpOwogICAgICAgICAgICB9CiAgICAgICAg\nfSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgcmVhZEVudHJ5KGZpbmFsIElu\nZXRTb2NrZXRBZGRyZXNzIGFkZHIsIGZpbmFsIGxvbmcgbGVkZ2VySWQsIGZp\nbmFsIGxvbmcgZW50cnlJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICBm\naW5hbCBSZWFkRW50cnlDYWxsYmFjayBjYiwgZmluYWwgT2JqZWN0IGN0eCkg\newogICAgICAgIGZpbmFsIFBlckNoYW5uZWxCb29raWVDbGllbnQgY2xpZW50\nID0gbG9va3VwQ2xpZW50KGFkZHIpOwogICAgICAgIGlmIChjbGllbnQgPT0g\nbnVsbCkgewogICAgICAgICAgICBjYi5yZWFkRW50cnlDb21wbGV0ZShCS0V4\nY2VwdGlvbi5Db2RlLkJvb2tpZUhhbmRsZU5vdEF2YWlsYWJsZUV4Y2VwdGlv\nbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVkZ2VySWQs\nIGVudHJ5SWQsIG51bGwsIGN0eCk7CiAgICAgICAgICAgIHJldHVybjsKICAg\nICAgICB9CgogICAgICAgIGNsaWVudC5jb25uZWN0SWZOZWVkZWRBbmREb09w\nKG5ldyBHZW5lcmljQ2FsbGJhY2s8Vm9pZD4oKSB7CiAgICAgICAgICAgIEBP\ndmVycmlkZQogICAgICAgICAgICBwdWJsaWMgdm9pZCBvcGVyYXRpb25Db21w\nbGV0ZShmaW5hbCBpbnQgcmMsIFZvaWQgcmVzdWx0KSB7CiAgICAgICAgICAg\nICAgICBpZiAocmMgIT0gQktFeGNlcHRpb24uQ29kZS5PSykgewogICAgICAg\nICAgICAgICAgICAgIGV4ZWN1dG9yLnN1Ym1pdE9yZGVyZWQobGVkZ2VySWQs\nIG5ldyBTYWZlUnVubmFibGUoKSB7CiAgICAgICAgICAgICAgICAgICAgICAg\nIEBPdmVycmlkZQogICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWMgdm9p\nZCBzYWZlUnVuKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2Iu\ncmVhZEVudHJ5Q29tcGxldGUocmMsIGxlZGdlcklkLCBlbnRyeUlkLCBudWxs\nLCBjdHgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAg\nICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAg\nICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2xpZW50LnJlYWRFbnRy\neShsZWRnZXJJZCwgZW50cnlJZCwgY2IsIGN0eCk7CiAgICAgICAgICAgIH0K\nICAgICAgICB9KTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjbG9zZSgpIHsK\nICAgICAgICBjbG9zZUxvY2sud3JpdGVMb2NrKCkubG9jaygpOwogICAgICAg\nIHRyeSB7CiAgICAgICAgICAgIGNsb3NlZCA9IHRydWU7CiAgICAgICAgICAg\nIGZvciAoUGVyQ2hhbm5lbEJvb2tpZUNsaWVudCBjaGFubmVsOiBjaGFubmVs\ncy52YWx1ZXMoKSkgewogICAgICAgICAgICAgICAgY2hhbm5lbC5jbG9zZSgp\nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNoYW5uZWxzLmNsZWFyKCk7\nCiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgY2xvc2VMb2NrLndy\naXRlTG9jaygpLnVubG9jaygpOwogICAgICAgIH0KICAgIH0KCiAgICBwcml2\nYXRlIHN0YXRpYyBjbGFzcyBDb3VudGVyIHsKICAgICAgICBpbnQgaTsKICAg\nICAgICBpbnQgdG90YWw7CgogICAgICAgIHN5bmNocm9uaXplZCB2b2lkIGlu\nYygpIHsKICAgICAgICAgICAgaSsrOwogICAgICAgICAgICB0b3RhbCsrOwog\nICAgICAgIH0KCiAgICAgICAgc3luY2hyb25pemVkIHZvaWQgZGVjKCkgewog\nICAgICAgICAgICBpLS07CiAgICAgICAgICAgIG5vdGlmeUFsbCgpOwogICAg\nICAgIH0KCiAgICAgICAgc3luY2hyb25pemVkIHZvaWQgd2FpdChpbnQgbGlt\naXQpIHRocm93cyBJbnRlcnJ1cHRlZEV4Y2VwdGlvbiB7CiAgICAgICAgICAg\nIHdoaWxlIChpID4gbGltaXQpIHsKICAgICAgICAgICAgICAgIHdhaXQoKTsK\nICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgc3luY2hyb25pemVk\nIGludCB0b3RhbCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRvdGFsOwogICAg\nICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEBwYXJhbSBhcmdzCiAgICAg\nKiBAdGhyb3dzIElPRXhjZXB0aW9uCiAgICAgKiBAdGhyb3dzIE51bWJlckZv\ncm1hdEV4Y2VwdGlvbgogICAgICogQHRocm93cyBJbnRlcnJ1cHRlZEV4Y2Vw\ndGlvbgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJp\nbmdbXSBhcmdzKSB0aHJvd3MgTnVtYmVyRm9ybWF0RXhjZXB0aW9uLCBJT0V4\nY2VwdGlvbiwgSW50ZXJydXB0ZWRFeGNlcHRpb24gewogICAgICAgIGlmIChh\ncmdzLmxlbmd0aCAhPSAzKSB7CiAgICAgICAgICAgIFN5c3RlbS5lcnIucHJp\nbnRsbigiVVNBR0U6IEJvb2tpZUNsaWVudCBib29raWVIb3N0IHBvcnQgbGVk\nZ2VyIyIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAg\nIFdyaXRlQ2FsbGJhY2sgY2IgPSBuZXcgV3JpdGVDYWxsYmFjaygpIHsKCiAg\nICAgICAgICAgIHB1YmxpYyB2b2lkIHdyaXRlQ29tcGxldGUoaW50IHJjLCBs\nb25nIGxlZGdlciwgbG9uZyBlbnRyeSwgSW5ldFNvY2tldEFkZHJlc3MgYWRk\nciwgT2JqZWN0IGN0eCkgewogICAgICAgICAgICAgICAgQ291bnRlciBjb3Vu\ndGVyID0gKENvdW50ZXIpIGN0eDsKICAgICAgICAgICAgICAgIGNvdW50ZXIu\nZGVjKCk7CiAgICAgICAgICAgICAgICBpZiAocmMgIT0gMCkgewogICAgICAg\nICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbigicmMgPSAiICsgcmMg\nKyAiIGZvciAiICsgZW50cnkgKyAiQCIgKyBsZWRnZXIpOwogICAgICAgICAg\nICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBDb3Vu\ndGVyIGNvdW50ZXIgPSBuZXcgQ291bnRlcigpOwogICAgICAgIGJ5dGUgaGVs\nbG9bXSA9ICJoZWxsbyIuZ2V0Qnl0ZXMoKTsKICAgICAgICBsb25nIGxlZGdl\nciA9IExvbmcucGFyc2VMb25nKGFyZ3NbMl0pOwogICAgICAgIENsaWVudFNv\nY2tldENoYW5uZWxGYWN0b3J5IGNoYW5uZWxGYWN0b3J5ID0gbmV3IE5pb0Ns\naWVudFNvY2tldENoYW5uZWxGYWN0b3J5KEV4ZWN1dG9ycy5uZXdDYWNoZWRU\naHJlYWRQb29sKCksIEV4ZWN1dG9ycwogICAgICAgICAgICAgICAgLm5ld0Nh\nY2hlZFRocmVhZFBvb2woKSk7CiAgICAgICAgT3JkZXJlZFNhZmVFeGVjdXRv\nciBleGVjdXRvciA9IG5ldyBPcmRlcmVkU2FmZUV4ZWN1dG9yKDEpOwogICAg\nICAgIEJvb2tpZUNsaWVudCBiYyA9IG5ldyBCb29raWVDbGllbnQobmV3IENs\naWVudENvbmZpZ3VyYXRpb24oKSwgY2hhbm5lbEZhY3RvcnksIGV4ZWN1dG9y\nKTsKICAgICAgICBJbmV0U29ja2V0QWRkcmVzcyBhZGRyID0gbmV3IEluZXRT\nb2NrZXRBZGRyZXNzKGFyZ3NbMF0sIEludGVnZXIucGFyc2VJbnQoYXJnc1sx\nXSkpOwoKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IDEwMDAwMDsgaSsr\nKSB7CiAgICAgICAgICAgIGNvdW50ZXIuaW5jKCk7CiAgICAgICAgICAgIGJj\nLmFkZEVudHJ5KGFkZHIsIGxlZGdlciwgbmV3IGJ5dGVbMF0sIGksIENoYW5u\nZWxCdWZmZXJzLndyYXBwZWRCdWZmZXIoaGVsbG8pLCBjYiwgY291bnRlciwg\nMCk7CiAgICAgICAgfQogICAgICAgIGNvdW50ZXIud2FpdCgwKTsKICAgICAg\nICBTeXN0ZW0ub3V0LnByaW50bG4oIlRvdGFsID0gIiArIGNvdW50ZXIudG90\nYWwoKSk7CiAgICAgICAgY2hhbm5lbEZhY3RvcnkucmVsZWFzZUV4dGVybmFs\nUmVzb3VyY2VzKCk7CiAgICAgICAgZXhlY3V0b3Iuc2h1dGRvd24oKTsKICAg\nIH0KfQo=\n","encoding":"base64"}

