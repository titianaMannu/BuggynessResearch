{"sha":"09f2eccb1b99f09d0ed7f7587608ac1d62802db4","node_id":"MDQ6QmxvYjE1NzU5NTY6MDlmMmVjY2IxYjk5ZjA5ZDBlZDdmNzU4NzYwOGFjMWQ2MjgwMmRiNA==","size":4907,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/09f2eccb1b99f09d0ed7f7587608ac1d62802db4","content":"LyoKICoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9y\nIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBU\naGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhl\nIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNl\nIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBs\naWFuY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEg\nY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBl\naXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZv\nciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Np\nb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICoK\nICovCgpwYWNrYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci5wcm90bzsKCmlt\ncG9ydCBqYXZhLm5ldC5JbmV0U29ja2V0QWRkcmVzczsKaW1wb3J0IGphdmEu\ndXRpbC5jb25jdXJyZW50LkxpbmtlZEJsb2NraW5nUXVldWU7CmltcG9ydCBq\nYXZhLnV0aWwuY29uY3VycmVudC5hdG9taWMuQXRvbWljSW50ZWdlcjsKCmlt\ncG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY2xpZW50LkxlZGdlck1ldGFk\nYXRhOwppbXBvcnQgb3JnLmFwYWNoZS56b29rZWVwZXIuQXN5bmNDYWxsYmFj\nazsKaW1wb3J0IG9yZy5qYm9zcy5uZXR0eS5idWZmZXIuQ2hhbm5lbEJ1ZmZl\ncjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXI7CmltcG9ydCBvcmcuc2xmNGou\nTG9nZ2VyRmFjdG9yeTsKCi8qKgogKiBEZWNsYXJhdGlvbiBvZiBhIGNhbGxi\nYWNrIGludGVyZmFjZXMgdXNlZCBpbiBib29ra2VlcGVyIGNsaWVudCBsaWJy\nYXJ5IGJ1dAogKiBub3QgZXhwb3NlZCB0byB0aGUgY2xpZW50IGFwcGxpY2F0\naW9uLgogKi8KCnB1YmxpYyBjbGFzcyBCb29ra2VlcGVySW50ZXJuYWxDYWxs\nYmFja3MgewoKICAgIHN0YXRpYyBmaW5hbCBMb2dnZXIgTE9HID0gTG9nZ2Vy\nRmFjdG9yeS5nZXRMb2dnZXIoQm9va2tlZXBlckludGVybmFsQ2FsbGJhY2tz\nLmNsYXNzKTsKCiAgICAvKioKICAgICAqIENhbGxiYWNrIGZvciBjYWxscyBm\ncm9tIEJvb2tpZUNsaWVudCBvYmplY3RzLiBTdWNoIGNhbGxzIGFyZSBmb3Ig\ncmVwbGllcwogICAgICogb2Ygd3JpdGUgb3BlcmF0aW9ucyAob3BlcmF0aW9u\ncyB0byBhZGQgYW4gZW50cnkgdG8gYSBsZWRnZXIpLgogICAgICoKICAgICAq\nLwoKICAgIC8qKgogICAgICogTGlzdGVuZXIgb24gbGVkZ2VyIG1ldGFkYXRh\nIGNoYW5nZXMuCiAgICAgKi8KICAgIHB1YmxpYyBpbnRlcmZhY2UgTGVkZ2Vy\nTWV0YWRhdGFMaXN0ZW5lciB7CiAgICAgICAgLyoqCiAgICAgICAgICogVHJp\nZ2dlcmVkIGVhY2ggdGltZSBsZWRnZXIgbWV0YWRhdGEgY2hhbmdlZC4KICAg\nICAgICAgKgogICAgICAgICAqIEBwYXJhbSBsZWRnZXJJZAogICAgICAgICAq\nICAgICAgICAgIGxlZGdlciBpZC4KICAgICAgICAgKiBAcGFyYW0gbWV0YWRh\ndGEKICAgICAgICAgKiAgICAgICAgICBuZXcgbGVkZ2VyIG1ldGFkYXRhLgog\nICAgICAgICAqLwogICAgICAgIHZvaWQgb25DaGFuZ2VkKGxvbmcgbGVkZ2Vy\nSWQsIExlZGdlck1ldGFkYXRhIG1ldGFkYXRhKTsKICAgIH0KCiAgICBwdWJs\naWMgaW50ZXJmYWNlIFdyaXRlQ2FsbGJhY2sgewogICAgICAgIHZvaWQgd3Jp\ndGVDb21wbGV0ZShpbnQgcmMsIGxvbmcgbGVkZ2VySWQsIGxvbmcgZW50cnlJ\nZCwgSW5ldFNvY2tldEFkZHJlc3MgYWRkciwgT2JqZWN0IGN0eCk7CiAgICB9\nCgogICAgcHVibGljIGludGVyZmFjZSBHZW5lcmljQ2FsbGJhY2s8VD4gewog\nICAgICAgIHZvaWQgb3BlcmF0aW9uQ29tcGxldGUoaW50IHJjLCBUIHJlc3Vs\ndCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBEZWNsYXJhdGlvbiBvZiBhIGNh\nbGxiYWNrIGltcGxlbWVudGF0aW9uIGZvciBjYWxscyBmcm9tIEJvb2tpZUNs\naWVudCBvYmplY3RzLgogICAgICogU3VjaCBjYWxscyBhcmUgZm9yIHJlcGxp\nZXMgb2YgcmVhZCBvcGVyYXRpb25zIChvcGVyYXRpb25zIHRvIHJlYWQgYW4g\nZW50cnkKICAgICAqIGZyb20gYSBsZWRnZXIpLgogICAgICoKICAgICAqLwoK\nICAgIHB1YmxpYyBpbnRlcmZhY2UgUmVhZEVudHJ5Q2FsbGJhY2sgewogICAg\nICAgIHZvaWQgcmVhZEVudHJ5Q29tcGxldGUoaW50IHJjLCBsb25nIGxlZGdl\ncklkLCBsb25nIGVudHJ5SWQsIENoYW5uZWxCdWZmZXIgYnVmZmVyLCBPYmpl\nY3QgY3R4KTsKICAgIH0KCiAgICAvKioKICAgICAqIFRoaXMgaXMgYSBtdWx0\naSBjYWxsYmFjayBvYmplY3QgdGhhdCB3YWl0cyBmb3IgYWxsIG9mCiAgICAg\nKiB0aGUgbXVsdGlwbGUgYXN5bmMgb3BlcmF0aW9ucyB0byBjb21wbGV0ZS4g\nSWYgYW55IGZhaWwsIHRoZW4gd2UgaW52b2tlCiAgICAgKiB0aGUgZmluYWwg\nY2FsbGJhY2sgd2l0aCBhIHByb3ZpZGVkIGZhaWx1cmVSYwogICAgICovCiAg\nICBwdWJsaWMgc3RhdGljIGNsYXNzIE11bHRpQ2FsbGJhY2sgaW1wbGVtZW50\ncyBBc3luY0NhbGxiYWNrLlZvaWRDYWxsYmFjayB7CiAgICAgICAgLy8gTnVt\nYmVyIG9mIGV4cGVjdGVkIGNhbGxiYWNrcwogICAgICAgIGZpbmFsIGludCBl\neHBlY3RlZDsKICAgICAgICBmaW5hbCBpbnQgZmFpbHVyZVJjOwogICAgICAg\nIGZpbmFsIGludCBzdWNjZXNzUmM7CiAgICAgICAgLy8gRmluYWwgY2FsbGJh\nY2sgYW5kIHRoZSBjb3JyZXNwb25kaW5nIGNvbnRleHQgdG8gaW52b2tlCiAg\nICAgICAgZmluYWwgQXN5bmNDYWxsYmFjay5Wb2lkQ2FsbGJhY2sgY2I7CiAg\nICAgICAgZmluYWwgT2JqZWN0IGNvbnRleHQ7CiAgICAgICAgLy8gVGhpcyBr\nZWVwcyB0cmFjayBvZiBob3cgbWFueSBvcGVyYXRpb25zIGhhdmUgY29tcGxl\ndGVkCiAgICAgICAgZmluYWwgQXRvbWljSW50ZWdlciBkb25lID0gbmV3IEF0\nb21pY0ludGVnZXIoKTsKICAgICAgICAvLyBMaXN0IG9mIHRoZSBleGNlcHRp\nb25zIGZyb20gb3BlcmF0aW9ucyB0aGF0IGNvbXBsZXRlZCB1bnN1Y2Nlc3Nm\ndWxseQogICAgICAgIGZpbmFsIExpbmtlZEJsb2NraW5nUXVldWU8SW50ZWdl\ncj4gZXhjZXB0aW9ucyA9IG5ldyBMaW5rZWRCbG9ja2luZ1F1ZXVlPEludGVn\nZXI+KCk7CgogICAgICAgIHB1YmxpYyBNdWx0aUNhbGxiYWNrKGludCBleHBl\nY3RlZCwgQXN5bmNDYWxsYmFjay5Wb2lkQ2FsbGJhY2sgY2IsIE9iamVjdCBj\nb250ZXh0LCBpbnQgc3VjY2Vzc1JjLCBpbnQgZmFpbHVyZVJjKSB7CiAgICAg\nICAgICAgIHRoaXMuZXhwZWN0ZWQgPSBleHBlY3RlZDsKICAgICAgICAgICAg\ndGhpcy5jYiA9IGNiOwogICAgICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250\nZXh0OwogICAgICAgICAgICB0aGlzLmZhaWx1cmVSYyA9IGZhaWx1cmVSYzsK\nICAgICAgICAgICAgdGhpcy5zdWNjZXNzUmMgPSBzdWNjZXNzUmM7CiAgICAg\nICAgICAgIGlmIChleHBlY3RlZCA9PSAwKSB7CiAgICAgICAgICAgICAgICBj\nYi5wcm9jZXNzUmVzdWx0KHN1Y2Nlc3NSYywgbnVsbCwgY29udGV4dCk7CiAg\nICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHByaXZhdGUgdm9pZCB0\naWNrKCkgewogICAgICAgICAgICBpZiAoZG9uZS5pbmNyZW1lbnRBbmRHZXQo\nKSA9PSBleHBlY3RlZCkgewogICAgICAgICAgICAgICAgaWYgKGV4Y2VwdGlv\nbnMuaXNFbXB0eSgpKSB7CiAgICAgICAgICAgICAgICAgICAgY2IucHJvY2Vz\nc1Jlc3VsdChzdWNjZXNzUmMsIG51bGwsIGNvbnRleHQpOwogICAgICAgICAg\nICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjYi5wcm9jZXNz\nUmVzdWx0KGZhaWx1cmVSYywgbnVsbCwgY29udGV4dCk7CiAgICAgICAgICAg\nICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIEBPdmVy\ncmlkZQogICAgICAgIHB1YmxpYyB2b2lkIHByb2Nlc3NSZXN1bHQoaW50IHJj\nLCBTdHJpbmcgcGF0aCwgT2JqZWN0IGN0eCkgewogICAgICAgICAgICBpZiAo\ncmMgIT0gc3VjY2Vzc1JjKSB7CiAgICAgICAgICAgICAgICBMT0cuZXJyb3Io\nIkVycm9yIGluIG11bHRpIGNhbGxiYWNrIDogIiArIHJjKTsKICAgICAgICAg\nICAgICAgIGV4Y2VwdGlvbnMuYWRkKHJjKTsKICAgICAgICAgICAgfQogICAg\nICAgICAgICB0aWNrKCk7CiAgICAgICAgfQoKICAgIH0KCiAgICAvKioKICAg\nICAqIFByb2Nlc3NvciB0byBwcm9jZXNzIGEgc3BlY2lmaWMgZWxlbWVudAog\nICAgICovCiAgICBwdWJsaWMgc3RhdGljIGludGVyZmFjZSBQcm9jZXNzb3I8\nVD4gewogICAgICAgIC8qKgogICAgICAgICAqIFByb2Nlc3MgYSBzcGVjaWZp\nYyBlbGVtZW50CiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gZGF0YQog\nICAgICAgICAqICAgICAgICAgIGRhdGEgdG8gcHJvY2VzcwogICAgICAgICAq\nIEBwYXJhbSBpdGVyYXRpb25DYWxsYmFjawogICAgICAgICAqICAgICAgICAg\nIENhbGxiYWNrIHRvIGludm9rZSB3aGVuIHByb2Nlc3MgaGFzIGJlZW4gZG9u\nZS4KICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgdm9pZCBwcm9jZXNzKFQg\nZGF0YSwgQXN5bmNDYWxsYmFjay5Wb2lkQ2FsbGJhY2sgY2IpOwogICAgfQoK\nfQo=\n","encoding":"base64"}

