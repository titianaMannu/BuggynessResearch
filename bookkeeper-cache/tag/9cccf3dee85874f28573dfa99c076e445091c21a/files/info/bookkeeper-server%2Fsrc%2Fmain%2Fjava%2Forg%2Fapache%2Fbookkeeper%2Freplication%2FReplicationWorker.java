{"sha":"6584e2a5cfe6f9fa9491c36c708ea184007b63f9","node_id":"MDQ6QmxvYjE1NzU5NTY6NjU4NGUyYTVjZmU2ZjlmYTk0OTFjMzZjNzA4ZWExODQwMDdiNjNmOQ==","size":16896,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/6584e2a5cfe6f9fa9491c36c708ea184007b63f9","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUgCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZSAKICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24gCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUgCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UgCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQgCiAqIAogKiAgIGh0dHA6Ly93\nd3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMCAKICogCiAqIFVu\nbGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8g\naW4gd3JpdGluZywgCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRo\nZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIAogKiAiQVMgSVMiIEJB\nU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkg\nCiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhl\nIExpY2Vuc2UgZm9yIHRoZSAKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJu\naW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyAKICogdW5kZXIgdGhl\nIExpY2Vuc2UuIAogKiAKICovCnBhY2thZ2Ugb3JnLmFwYWNoZS5ib29ra2Vl\ncGVyLnJlcGxpY2F0aW9uOwoKaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247\nCmltcG9ydCBqYXZhLm5ldC5JbmV0U29ja2V0QWRkcmVzczsKaW1wb3J0IGph\ndmEudXRpbC5MaXN0OwppbXBvcnQgamF2YS51dGlsLlNldDsKaW1wb3J0IGph\ndmEudXRpbC5UaW1lcjsKaW1wb3J0IGphdmEudXRpbC5UaW1lclRhc2s7Cmlt\ncG9ydCBqYXZhLnV0aWwuU29ydGVkTWFwOwppbXBvcnQgamF2YS51dGlsLkFy\ncmF5TGlzdDsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOwppbXBvcnQg\namF2YS51dGlsLmNvbmN1cnJlbnQuQ291bnREb3duTGF0Y2g7CgppbXBvcnQg\nb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNsaWVudC5CS0V4Y2VwdGlvbjsKaW1w\nb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5jbGllbnQuQm9va0tlZXBlcjsK\naW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5jbGllbnQuQm9va0tlZXBl\nckFkbWluOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNsaWVudC5M\nZWRnZXJDaGVja2VyOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNs\naWVudC5MZWRnZXJGcmFnbWVudDsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tl\nZXBlci5jbGllbnQuTGVkZ2VySGFuZGxlOwppbXBvcnQgb3JnLmFwYWNoZS5i\nb29ra2VlcGVyLmNsaWVudC5MZWRnZXJNZXRhZGF0YTsKaW1wb3J0IG9yZy5h\ncGFjaGUuYm9va2tlZXBlci5jbGllbnQuQktFeGNlcHRpb24uQktCb29raWVI\nYW5kbGVOb3RBdmFpbGFibGVFeGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hl\nLmJvb2trZWVwZXIuY2xpZW50LkJLRXhjZXB0aW9uLkJLTm9TdWNoTGVkZ2Vy\nRXhpc3RzRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVy\nLmNsaWVudC5CS0V4Y2VwdGlvbi5CS1JlYWRFeGNlcHRpb247CmltcG9ydCBv\ncmcuYXBhY2hlLmJvb2trZWVwZXIuY29uZi5DbGllbnRDb25maWd1cmF0aW9u\nOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNvbmYuU2VydmVyQ29u\nZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5tZXRh\nLkxlZGdlck1hbmFnZXJGYWN0b3J5OwppbXBvcnQgb3JnLmFwYWNoZS5ib29r\na2VlcGVyLm1ldGEuTGVkZ2VyVW5kZXJyZXBsaWNhdGlvbk1hbmFnZXI7Cmlt\ncG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIucHJvdG8uQm9va2tlZXBlcklu\ndGVybmFsQ2FsbGJhY2tzLkdlbmVyaWNDYWxsYmFjazsKaW1wb3J0IG9yZy5h\ncGFjaGUuYm9va2tlZXBlci5yZXBsaWNhdGlvbi5SZXBsaWNhdGlvbkV4Y2Vw\ndGlvbi5Db21wYXRpYmlsaXR5RXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNo\nZS5ib29ra2VlcGVyLnJlcGxpY2F0aW9uLlJlcGxpY2F0aW9uRXhjZXB0aW9u\nLlVuYXZhaWxhYmxlRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS56b29r\nZWVwZXIuS2VlcGVyRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS56b29r\nZWVwZXIuWm9vS2VlcGVyOwppbXBvcnQgb3JnLnNsZjRqLkxvZ2dlcjsKaW1w\nb3J0IG9yZy5zbGY0ai5Mb2dnZXJGYWN0b3J5OwoKLyoqCiAqIFJlcGxpY2F0\naW9uV29ya2VyIHdpbGwgdGFrZSB0aGUgZnJhZ21lbnRzIG9uZSBieSBvbmUg\nZnJvbQogKiBaS0xlZGdlclVuZGVycmVwbGljYXRpb25NYW5hZ2VyIGFuZCBy\nZXBsaWNhdGVzIHRvIGl0LgogKi8KcHVibGljIGNsYXNzIFJlcGxpY2F0aW9u\nV29ya2VyIGltcGxlbWVudHMgUnVubmFibGUgewogICAgcHJpdmF0ZSBzdGF0\naWMgTG9nZ2VyIExPRyA9IExvZ2dlckZhY3RvcnkKICAgICAgICAgICAgLmdl\ndExvZ2dlcihSZXBsaWNhdGlvbldvcmtlci5jbGFzcyk7CiAgICBmaW5hbCBw\ncml2YXRlIExlZGdlclVuZGVycmVwbGljYXRpb25NYW5hZ2VyIHVuZGVycmVw\nbGljYXRpb25NYW5hZ2VyOwogICAgcHJpdmF0ZSBTZXJ2ZXJDb25maWd1cmF0\naW9uIGNvbmY7CiAgICBwcml2YXRlIFpvb0tlZXBlciB6a2M7CiAgICBwcml2\nYXRlIHZvbGF0aWxlIGJvb2xlYW4gd29ya2VyUnVubmluZyA9IGZhbHNlOwog\nICAgZmluYWwgcHJpdmF0ZSBCb29rS2VlcGVyQWRtaW4gYWRtaW47CiAgICBw\ncml2YXRlIExlZGdlckNoZWNrZXIgbGVkZ2VyQ2hlY2tlcjsKICAgIHByaXZh\ndGUgSW5ldFNvY2tldEFkZHJlc3MgdGFyZ2V0Qm9va2llOwogICAgcHJpdmF0\nZSBCb29rS2VlcGVyIGJrYzsKICAgIHByaXZhdGUgVGhyZWFkIHdvcmtlclRo\ncmVhZDsKICAgIHByaXZhdGUgbG9uZyBvcGVuTGVkZ2VyUmVyZXBsaWNhdGlv\nbkdyYWNlUGVyaW9kOwogICAgcHJpdmF0ZSBUaW1lciBwZW5kaW5nUmVwbGlj\nYXRpb25UaW1lcjsKCiAgICAvKioKICAgICAqIFJlcGxpY2F0aW9uIHdvcmtl\nciBmb3IgcmVwbGljYXRpbmcgdGhlIGxlZGdlciBmcmFnbWVudHMgZnJvbQog\nICAgICogVW5kZXJSZXBsaWNhdGlvbk1hbmFnZXIgdG8gdGhlIHRhcmdldEJv\nb2tpZS4gVGhpcyB0YXJnZXQgYm9va2llIHdpbGwgYmUgYQogICAgICogbG9j\nYWwgYm9va2llLgogICAgICogCiAgICAgKiBAcGFyYW0gemtjCiAgICAgKiAg\nICAgICAgICAgIC0gWksgaW5zdGFuY2UKICAgICAqIEBwYXJhbSBjb25mCiAg\nICAgKiAgICAgICAgICAgIC0gY29uZmlndXJhdGlvbnMKICAgICAqIEBwYXJh\nbSB0YXJnZXRCS0FkZHIKICAgICAqICAgICAgICAgICAgLSB0byB3aGVyZSBy\nZXBsaWNhdGlvbiBzaG91bGQgaGFwcGVuLiBJZGVhbGx5IHRoaXMgd2lsbCBi\nZQogICAgICogICAgICAgICAgICBsb2NhbCBCb29raWUgYWRkcmVzcy4KICAg\nICAqLwogICAgcHVibGljIFJlcGxpY2F0aW9uV29ya2VyKGZpbmFsIFpvb0tl\nZXBlciB6a2MsCiAgICAgICAgICAgIGZpbmFsIFNlcnZlckNvbmZpZ3VyYXRp\nb24gY29uZiwgSW5ldFNvY2tldEFkZHJlc3MgdGFyZ2V0QktBZGRyKQogICAg\nICAgICAgICB0aHJvd3MgQ29tcGF0aWJpbGl0eUV4Y2VwdGlvbiwgS2VlcGVy\nRXhjZXB0aW9uLAogICAgICAgICAgICBJbnRlcnJ1cHRlZEV4Y2VwdGlvbiwg\nSU9FeGNlcHRpb24gewogICAgICAgIHRoaXMuemtjID0gemtjOwogICAgICAg\nIHRoaXMuY29uZiA9IGNvbmY7CiAgICAgICAgdGhpcy50YXJnZXRCb29raWUg\nPSB0YXJnZXRCS0FkZHI7CiAgICAgICAgTGVkZ2VyTWFuYWdlckZhY3Rvcnkg\nbUZhY3RvcnkgPSBMZWRnZXJNYW5hZ2VyRmFjdG9yeQogICAgICAgICAgICAg\nICAgLm5ld0xlZGdlck1hbmFnZXJGYWN0b3J5KHRoaXMuY29uZiwgdGhpcy56\na2MpOwogICAgICAgIHRoaXMudW5kZXJyZXBsaWNhdGlvbk1hbmFnZXIgPSBt\nRmFjdG9yeQogICAgICAgICAgICAgICAgLm5ld0xlZGdlclVuZGVycmVwbGlj\nYXRpb25NYW5hZ2VyKCk7CiAgICAgICAgdGhpcy5ia2MgPSBuZXcgQm9va0tl\nZXBlcihuZXcgQ2xpZW50Q29uZmlndXJhdGlvbihjb25mKSwgemtjKTsKICAg\nICAgICB0aGlzLmFkbWluID0gbmV3IEJvb2tLZWVwZXJBZG1pbihia2MpOwog\nICAgICAgIHRoaXMubGVkZ2VyQ2hlY2tlciA9IG5ldyBMZWRnZXJDaGVja2Vy\nKGJrYyk7CiAgICAgICAgdGhpcy53b3JrZXJUaHJlYWQgPSBuZXcgVGhyZWFk\nKHRoaXMsICJSZXBsaWNhdGlvbldvcmtlciIpOwogICAgICAgIHRoaXMub3Bl\nbkxlZGdlclJlcmVwbGljYXRpb25HcmFjZVBlcmlvZCA9IGNvbmYKICAgICAg\nICAgICAgICAgIC5nZXRPcGVuTGVkZ2VyUmVyZXBsaWNhdGlvbkdyYWNlUGVy\naW9kKCk7CiAgICAgICAgdGhpcy5wZW5kaW5nUmVwbGljYXRpb25UaW1lciA9\nIG5ldyBUaW1lcigiUGVuZGluZ1JlcGxpY2F0aW9uVGltZXIiKTsKICAgIH0K\nCiAgICAvKiogU3RhcnQgdGhlIHJlcGxpY2F0aW9uIHdvcmtlciAqLwogICAg\ncHVibGljIHZvaWQgc3RhcnQoKSB7CiAgICAgICAgdGhpcy53b3JrZXJUaHJl\nYWQuc3RhcnQoKTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2\nb2lkIHJ1bigpIHsKICAgICAgICB3b3JrZXJSdW5uaW5nID0gdHJ1ZTsKICAg\nICAgICB3aGlsZSAod29ya2VyUnVubmluZykgewogICAgICAgICAgICB0cnkg\newogICAgICAgICAgICAgICAgcmVyZXBsaWNhdGUoKTsKICAgICAgICAgICAg\nfSBjYXRjaCAoSW50ZXJydXB0ZWRFeGNlcHRpb24gZSkgewogICAgICAgICAg\nICAgICAgc2h1dGRvd24oKTsKICAgICAgICAgICAgICAgIFRocmVhZC5jdXJy\nZW50VGhyZWFkKCkuaW50ZXJydXB0KCk7CiAgICAgICAgICAgICAgICBMT0cu\naW5mbygiSW50ZXJydXB0ZWRFeGNlcHRpb24gIgogICAgICAgICAgICAgICAg\nICAgICAgICArICJ3aGlsZSByZXBsaWNhdGluZyBmcmFnbWVudHMiLCBlKTsK\nICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfSBjYXRjaCAo\nQktFeGNlcHRpb24gZSkgewogICAgICAgICAgICAgICAgc2h1dGRvd24oKTsK\nICAgICAgICAgICAgICAgIExPRy5lcnJvcigiQktFeGNlcHRpb24gd2hpbGUg\ncmVwbGljYXRpbmcgZnJhZ21lbnRzIiwgZSk7CiAgICAgICAgICAgICAgICBy\nZXR1cm47CiAgICAgICAgICAgIH0gY2F0Y2ggKFVuYXZhaWxhYmxlRXhjZXB0\naW9uIGUpIHsKICAgICAgICAgICAgICAgIHNodXRkb3duKCk7CiAgICAgICAg\nICAgICAgICBMT0cuZXJyb3IoIlVuYXZhaWxhYmxlRXhjZXB0aW9uICIKICAg\nICAgICAgICAgICAgICAgICAgICAgKyAid2hpbGUgcmVwbGljYXRpbmcgZnJh\nZ21lbnRzIiwgZSk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAg\nICAgIH0KICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXBsaWNh\ndGVzIHRoZSB1bmRlciByZXBsaWNhdGVkIGZyYWdtZW50cyBmcm9tIGZhaWxl\nZCBib29raWUgbGVkZ2VyIHRvCiAgICAgKiB0YXJnZXRCb29raWUKICAgICAq\nLwogICAgcHJpdmF0ZSB2b2lkIHJlcmVwbGljYXRlKCkgdGhyb3dzIEludGVy\ncnVwdGVkRXhjZXB0aW9uLCBCS0V4Y2VwdGlvbiwKICAgICAgICAgICAgVW5h\ndmFpbGFibGVFeGNlcHRpb24gewogICAgICAgIGxvbmcgbGVkZ2VySWRUb1Jl\ncGxpY2F0ZSA9IHVuZGVycmVwbGljYXRpb25NYW5hZ2VyCiAgICAgICAgICAg\nICAgICAuZ2V0TGVkZ2VyVG9SZXJlcGxpY2F0ZSgpOwogICAgICAgIExPRy5k\nZWJ1ZygiR29pbmcgdG8gcmVwbGljYXRlIHRoZSBmcmFnbWVudHMgb2YgdGhl\nIGxlZGdlcjoge30iLCBsZWRnZXJJZFRvUmVwbGljYXRlKTsKICAgICAgICBM\nZWRnZXJIYW5kbGUgbGg7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGgg\nPSBhZG1pbi5vcGVuTGVkZ2VyTm9SZWNvdmVyeShsZWRnZXJJZFRvUmVwbGlj\nYXRlKTsKICAgICAgICB9IGNhdGNoIChCS05vU3VjaExlZGdlckV4aXN0c0V4\nY2VwdGlvbiBlKSB7CiAgICAgICAgICAgIC8vIExlZGdlciBtaWdodCBoYXZl\nIGJlZW4gZGVsZXRlZCBieSB1c2VyCiAgICAgICAgICAgIExPRy5pbmZvKCJC\nS05vU3VjaExlZGdlckV4aXN0c0V4Y2VwdGlvbiB3aGlsZSBvcGVuaW5nICIK\nICAgICAgICAgICAgICAgICAgICArICJsZWRnZXIgZm9yIHJlcGxpY2F0aW9u\nLiBPdGhlciBjbGllbnRzICIKICAgICAgICAgICAgICAgICAgICArICJtaWdo\ndCBoYXZlIGRlbGV0ZWQgdGhlIGxlZGdlci4gIgogICAgICAgICAgICAgICAg\nICAgICsgIlNvLCBubyBoYXJtIHRvIGNvbnRpbnVlIik7CiAgICAgICAgICAg\nIHVuZGVycmVwbGljYXRpb25NYW5hZ2VyLm1hcmtMZWRnZXJSZXBsaWNhdGVk\nKGxlZGdlcklkVG9SZXBsaWNhdGUpOwogICAgICAgICAgICByZXR1cm47CiAg\nICAgICAgfSBjYXRjaCAoQktSZWFkRXhjZXB0aW9uIGUpIHsKICAgICAgICAg\nICAgTE9HLmluZm8oIkJLUmVhZEV4Y2VwdGlvbiB3aGlsZSIKICAgICAgICAg\nICAgICAgICAgICArICIgb3BlbmluZyBsZWRnZXIgZm9yIHJlcGxpY2F0aW9u\nLiIKICAgICAgICAgICAgICAgICAgICArICIgRW5vdWdoIEJvb2tpZXMgbWln\naHQgbm90IGhhdmUgYXZhaWxhYmxlIgogICAgICAgICAgICAgICAgICAgICsg\nIlNvLCBubyBoYXJtIHRvIGNvbnRpbnVlIik7CiAgICAgICAgICAgIHVuZGVy\ncmVwbGljYXRpb25NYW5hZ2VyCiAgICAgICAgICAgICAgICAgICAgLnJlbGVh\nc2VVbmRlcnJlcGxpY2F0ZWRMZWRnZXIobGVkZ2VySWRUb1JlcGxpY2F0ZSk7\nCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGNhdGNoIChCS0Jvb2tp\nZUhhbmRsZU5vdEF2YWlsYWJsZUV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAg\nIExPRy5pbmZvKCJCS0Jvb2tpZUhhbmRsZU5vdEF2YWlsYWJsZUV4Y2VwdGlv\nbiB3aGlsZSIKICAgICAgICAgICAgICAgICAgICArICIgb3BlbmluZyBsZWRn\nZXIgZm9yIHJlcGxpY2F0aW9uLiIKICAgICAgICAgICAgICAgICAgICArICIg\nRW5vdWdoIEJvb2tpZXMgbWlnaHQgbm90IGhhdmUgYXZhaWxhYmxlIgogICAg\nICAgICAgICAgICAgICAgICsgIlNvLCBubyBoYXJtIHRvIGNvbnRpbnVlIik7\nCiAgICAgICAgICAgIHVuZGVycmVwbGljYXRpb25NYW5hZ2VyCiAgICAgICAg\nICAgICAgICAgICAgLnJlbGVhc2VVbmRlcnJlcGxpY2F0ZWRMZWRnZXIobGVk\nZ2VySWRUb1JlcGxpY2F0ZSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAg\nICB9CiAgICAgICAgU2V0PExlZGdlckZyYWdtZW50PiBmcmFnbWVudHMgPSBn\nZXRVbmRlcnJlcGxpY2F0ZWRGcmFnbWVudHMobGgpOwogICAgICAgIExPRy5k\nZWJ1ZygiRm91bmRzIGZyYWdtZW50cyB7fSBmb3IgcmVwbGljYXRpb24gZnJv\nbSBsZWRnZXI6IHt9IiwgZnJhZ21lbnRzLCBsZWRnZXJJZFRvUmVwbGljYXRl\nKTsKCiAgICAgICAgYm9vbGVhbiBmb3VuZE9wZW5GcmFnbWVudHMgPSBmYWxz\nZTsKICAgICAgICBmb3IgKExlZGdlckZyYWdtZW50IGxlZGdlckZyYWdtZW50\nIDogZnJhZ21lbnRzKSB7CiAgICAgICAgICAgIGlmICghbGVkZ2VyRnJhZ21l\nbnQuaXNDbG9zZWQoKSkgewogICAgICAgICAgICAgICAgZm91bmRPcGVuRnJh\nZ21lbnRzID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAg\nICAgICAgICB9IGVsc2UgaWYgKGlzVGFyZ2V0Qm9va2llRXhpc3RzSW5GcmFn\nbWVudEVuc2VtYmxlKGxoLAogICAgICAgICAgICAgICAgICAgIGxlZGdlckZy\nYWdtZW50KSkgewogICAgICAgICAgICAgICAgTE9HLmRlYnVnKCJUYXJnZXQg\nQm9va2llW3t9XSBmb3VuZCBpbiB0aGUgZnJhZ21lbnQgZW5zZW1ibGU6IHt9\nIiwgdGFyZ2V0Qm9va2llLAogICAgICAgICAgICAgICAgICAgICAgICBsZWRn\nZXJGcmFnbWVudC5nZXRFbnNlbWJsZSgpKTsKICAgICAgICAgICAgICAgIGNv\nbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRyeSB7CiAgICAg\nICAgICAgICAgICBhZG1pbi5yZXBsaWNhdGVMZWRnZXJGcmFnbWVudChsaCwg\nbGVkZ2VyRnJhZ21lbnQsIHRhcmdldEJvb2tpZSk7CiAgICAgICAgICAgIH0g\nY2F0Y2ggKEJLRXhjZXB0aW9uLkJLQm9va2llSGFuZGxlTm90QXZhaWxhYmxl\nRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgIExPRy53YXJuKCJCS0Jv\nb2tpZUhhbmRsZU5vdEF2YWlsYWJsZUV4Y2VwdGlvbiAiCiAgICAgICAgICAg\nICAgICAgICAgICAgICsgIndoaWxlIHJlcGxpY2F0aW5nIHRoZSBmcmFnbWVu\ndCIsIGUpOwogICAgICAgICAgICB9IGNhdGNoIChCS0V4Y2VwdGlvbi5CS0xl\nZGdlclJlY292ZXJ5RXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgIExP\nRy53YXJuKCJCS0xlZGdlclJlY292ZXJ5RXhjZXB0aW9uICIKICAgICAgICAg\nICAgICAgICAgICAgICAgKyAid2hpbGUgcmVwbGljYXRpbmcgdGhlIGZyYWdt\nZW50IiwgZSk7CiAgICAgICAgICAgICAgICBpZiAoYWRtaW4uZ2V0UmVhZE9u\nbHlCb29raWVzKCkuY29udGFpbnModGFyZ2V0Qm9va2llKSkgewogICAgICAg\nICAgICAgICAgICAgIHRocm93IG5ldyBCS0V4Y2VwdGlvbi5CS1dyaXRlT25S\nZWFkT25seUJvb2tpZUV4Y2VwdGlvbigpOwogICAgICAgICAgICAgICAgfQog\nICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoZm91bmRPcGVu\nRnJhZ21lbnRzIHx8IGlzTGFzdFNlZ21lbnRPcGVuQW5kTWlzc2luZ0Jvb2tp\nZXMobGgpKSB7CiAgICAgICAgICAgIGRlZmVyTGVkZ2VyTG9ja1JlbGVhc2Uo\nbGVkZ2VySWRUb1JlcGxpY2F0ZSk7CiAgICAgICAgICAgIHJldHVybjsKICAg\nICAgICB9CiAgICAgICAgCiAgICAgICAgZnJhZ21lbnRzID0gZ2V0VW5kZXJy\nZXBsaWNhdGVkRnJhZ21lbnRzKGxoKTsKICAgICAgICBpZiAoZnJhZ21lbnRz\nLnNpemUoKSA9PSAwKSB7CiAgICAgICAgICAgIExPRy5pbmZvKCJMZWRnZXIg\ncmVwbGljYXRlZCBzdWNjZXNzZnVsbHkuIGxlZGdlciBpZCBpczogIgogICAg\nICAgICAgICAgICAgICAgICsgbGVkZ2VySWRUb1JlcGxpY2F0ZSk7CiAgICAg\nICAgICAgIHVuZGVycmVwbGljYXRpb25NYW5hZ2VyLm1hcmtMZWRnZXJSZXBs\naWNhdGVkKGxlZGdlcklkVG9SZXBsaWNhdGUpOwogICAgICAgIH0gZWxzZSB7\nCiAgICAgICAgICAgIC8vIFJlbGVhc2luZyB0aGUgdW5kZXJSZXBsaWNhdGlv\nbiBsZWRnZXIgbG9jayBhbmQgY29tcGV0ZQogICAgICAgICAgICAvLyBmb3Ig\ndGhlIHJlcGxpY2F0aW9uIGFnYWluIGZvciB0aGUgcGVuZGluZyBmcmFnbWVu\ndHMKICAgICAgICAgICAgdW5kZXJyZXBsaWNhdGlvbk1hbmFnZXIKICAgICAg\nICAgICAgICAgICAgICAucmVsZWFzZVVuZGVycmVwbGljYXRlZExlZGdlcihs\nZWRnZXJJZFRvUmVwbGljYXRlKTsKICAgICAgICB9CiAgICB9CgogICAgLyoq\nCiAgICAgKiBXaGVuIGNoZWNraW5nIHRoZSBmcmFnbWVudHMgb2YgYSBsZWRn\nZXIsIHRoZXJlIGlzIGEgY29ybmVyIGNhc2UKICAgICAqIHdoZXJlIGlmIHRo\nZSBsYXN0IHNlZ21lbnQvZW5zZW1ibGUgaXMgb3BlbiwgYnV0IG5vdGhpbmcg\naGFzIGJlZW4gd3JpdHRlbiB0bwogICAgICogc29tZSBvZiB0aGUgcXVvcnVt\ncyBpbiB0aGUgZW5zZW1ibGUsIGJvb2tpZXMgY2FuIGZhaWwgd2l0aG91dCBh\nbnkgYWN0aW9uIGJlaW5nCiAgICAgKiB0YWtlbi4gVGhpcyBpcyBmaW5lLCB1\nbnRpbCBlbm91Z2ggYm9va2llcyBmYWlsIHRvIGNhdXNlIGEgcXVvcnVtIHRv\nIGJlY29tZQogICAgICogdW5hdmFpbGFibGUsIGJ5IHdoaWNoIHRpbWUgdGhl\nIGxlZGdlciBpcyB1bnJlY292ZXJhYmxlLgogICAgICoKICAgICAqIEZvciBl\neGFtcGxlLCBpZiBpbiBhIEUzUTIsIG9ubHkgMSBlbnRyeSBpcyB3cml0dGVu\nIGFuZCB0aGUgbGFzdCBib29raWUKICAgICAqIGluIHRoZSBlbnNlbWJsZSBm\nYWlscywgbm90aGluZyBoYXMgYmVlbiB3cml0dGVuIHRvIGl0LCBzbyBub3Ro\naW5nIG5lZWRzIHRvIGJlCiAgICAgKiByZWNvdmVyZWQuIEJ1dCBpZiB0aGUg\nc2Vjb25kIHRvIGxhc3QgYm9va2llIGZhaWxzLCB3ZSd2ZSBub3cgbG9zdCBx\ndW9ydW0gZm9yCiAgICAgKiB0aGUgc2Vjb25kIGVudHJ5LCBzbyBpdCdzIGlt\ncG9zc2libGUgdG8gc2VlIGlmIHRoZSBzZWNvbmQgaGFzIGJlZW4gd3JpdHRl\nbiBvcgogICAgICogbm90LgogICAgICoKICAgICAqIFRvIGF2b2lkIHRoaXMg\nc2l0dWF0aW9uLCB3ZSBuZWVkIHRvIGNoZWNrIGlmIGJvb2tpZXMgaW4gdGhl\nIGZpbmFsIG9wZW4gZW5zZW1ibGUKICAgICAqIGFyZSB1bmF2YWlsYWJsZSwg\nYW5kIHRha2UgYWN0aW9uIGlmIHNvLiBUaGUgYWN0aW9uIHRvIHRha2UgaXMg\ndG8gY2xvc2UgdGhlIGxlZGdlciwKICAgICAqIGFmdGVyIGEgZ3JhY2UgcGVy\naW9kIGFzIHRoZSB3cml0dGluZyBjbGllbnQgbWF5IHJlcGxhY2UgdGhlIGZh\ndWx0eSBib29raWUgb24gaXRzCiAgICAgKiBvd24uCiAgICAgKgogICAgICog\nTWlzc2luZyBib29raWVzIGluIGNsb3NlZCBsZWRnZXJzIGFyZSBmaW5lLCBh\ncyB3ZSBrbm93IHRoZSBsYXN0IGNvbmZpcm1lZCBhZGQsIHNvCiAgICAgKiB3\nZSBjYW4gdGVsbCB3aGljaCBlbnRyaWVzIGFyZSBzdXBwb3NlZCB0byBleGlz\ndCBhbmQgcmVyZXBsaWNhdGUgdGhlbSBpZiBuZWNlc3NhcnkuCiAgICAgKi8K\nICAgIHByaXZhdGUgYm9vbGVhbiBpc0xhc3RTZWdtZW50T3BlbkFuZE1pc3Np\nbmdCb29raWVzKExlZGdlckhhbmRsZSBsaCkgdGhyb3dzIEJLRXhjZXB0aW9u\nIHsKICAgICAgICBMZWRnZXJNZXRhZGF0YSBtZCA9IGFkbWluLmdldExlZGdl\nck1ldGFkYXRhKGxoKTsKICAgICAgICBpZiAobWQuaXNDbG9zZWQoKSkgewog\nICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBT\nb3J0ZWRNYXA8TG9uZywgQXJyYXlMaXN0PEluZXRTb2NrZXRBZGRyZXNzPj4g\nZW5zZW1ibGVzCiAgICAgICAgICAgID0gYWRtaW4uZ2V0TGVkZ2VyTWV0YWRh\ndGEobGgpLmdldEVuc2VtYmxlcygpOwogICAgICAgIEFycmF5TGlzdDxJbmV0\nU29ja2V0QWRkcmVzcz4gZmluYWxFbnNlbWJsZSA9IGVuc2VtYmxlcy5nZXQo\nZW5zZW1ibGVzLmxhc3RLZXkoKSk7CiAgICAgICAgQ29sbGVjdGlvbjxJbmV0\nU29ja2V0QWRkcmVzcz4gYXZhaWxhYmxlID0gYWRtaW4uZ2V0QXZhaWxhYmxl\nQm9va2llcygpOwogICAgICAgIGZvciAoSW5ldFNvY2tldEFkZHJlc3MgYiA6\nIGZpbmFsRW5zZW1ibGUpIHsKICAgICAgICAgICAgaWYgKCFhdmFpbGFibGUu\nY29udGFpbnMoYikpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwog\nICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsK\nICAgIH0KCiAgICAvKiogR2V0cyB0aGUgdW5kZXIgcmVwbGljYXRlZCBmcmFn\nbWVudHMgKi8KICAgIHByaXZhdGUgU2V0PExlZGdlckZyYWdtZW50PiBnZXRV\nbmRlcnJlcGxpY2F0ZWRGcmFnbWVudHMoTGVkZ2VySGFuZGxlIGxoKQogICAg\nICAgICAgICB0aHJvd3MgSW50ZXJydXB0ZWRFeGNlcHRpb24gewogICAgICAg\nIENoZWNrZXJDYWxsYmFjayBjaGVja2VyQ2IgPSBuZXcgQ2hlY2tlckNhbGxi\nYWNrKCk7CiAgICAgICAgbGVkZ2VyQ2hlY2tlci5jaGVja0xlZGdlcihsaCwg\nY2hlY2tlckNiKTsKICAgICAgICBTZXQ8TGVkZ2VyRnJhZ21lbnQ+IGZyYWdt\nZW50cyA9IGNoZWNrZXJDYi53YWl0QW5kR2V0UmVzdWx0KCk7CiAgICAgICAg\ncmV0dXJuIGZyYWdtZW50czsKICAgIH0KCiAgICAvKioKICAgICAqIFNjaGVk\ndWxlcyBhIHRpbWVyIHRhc2sgZm9yIHJlbGVhc2luZyB0aGUgbG9jayB3aGlj\naCB3aWxsIGJlIHNjaGVkdWxlZAogICAgICogYWZ0ZXIgb3BlbiBsZWRnZXIg\nZnJhZ21lbnQgcmVwbGljYXRpb24gdGltZS4gTGVkZ2VyIHdpbGwgYmUgZmVu\nY2VkIGlmIGl0CiAgICAgKiBpcyBzdGlsbCBpbiBvcGVuIHN0YXRlIHdoZW4g\ndGltZXIgdGFzayBmaXJlZAogICAgICovCiAgICBwcml2YXRlIHZvaWQgZGVm\nZXJMZWRnZXJMb2NrUmVsZWFzZShmaW5hbCBsb25nIGxlZGdlcklkKSB7CiAg\nICAgICAgbG9uZyBncmFjZVBlcmlvZCA9IHRoaXMub3BlbkxlZGdlclJlcmVw\nbGljYXRpb25HcmFjZVBlcmlvZDsKICAgICAgICBUaW1lclRhc2sgdGltZXJU\nYXNrID0gbmV3IFRpbWVyVGFzaygpIHsKICAgICAgICAgICAgQE92ZXJyaWRl\nCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsKICAgICAgICAgICAg\nICAgIExlZGdlckhhbmRsZSBsaCA9IG51bGw7CiAgICAgICAgICAgICAgICB0\ncnkgewogICAgICAgICAgICAgICAgICAgIGxoID0gYWRtaW4ub3BlbkxlZGdl\nck5vUmVjb3ZlcnkobGVkZ2VySWQpOwogICAgICAgICAgICAgICAgICAgIGlm\nIChpc0xhc3RTZWdtZW50T3BlbkFuZE1pc3NpbmdCb29raWVzKGxoKSkgewog\nICAgICAgICAgICAgICAgICAgICAgICBsaCA9IGFkbWluLm9wZW5MZWRnZXIo\nbGVkZ2VySWQpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAg\nICAgICAgICAgU2V0PExlZGdlckZyYWdtZW50PiBmcmFnbWVudHMgPSBnZXRV\nbmRlcnJlcGxpY2F0ZWRGcmFnbWVudHMobGgpOwogICAgICAgICAgICAgICAg\nICAgIGZvciAoTGVkZ2VyRnJhZ21lbnQgZnJhZ21lbnQgOiBmcmFnbWVudHMp\nIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmcmFnbWVudC5pc0Ns\nb3NlZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaCA9IGFk\nbWluLm9wZW5MZWRnZXIobGVkZ2VySWQpOwogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAg\nICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGNhdGNoIChJ\nbnRlcnJ1cHRlZEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAgICAgICAg\nVGhyZWFkLmN1cnJlbnRUaHJlYWQoKS5pbnRlcnJ1cHQoKTsKICAgICAgICAg\nICAgICAgICAgICBMT0cuaW5mbygiSW50ZXJydXB0ZWRFeGNlcHRpb24gIgog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAid2hpbGUgcmVwbGljYXRp\nbmcgZnJhZ21lbnRzIiwgZSk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChC\nS05vU3VjaExlZGdlckV4aXN0c0V4Y2VwdGlvbiBia25zbGUpIHsKICAgICAg\nICAgICAgICAgICAgICBMT0cuZGVidWcoIkxlZGdlciB3YXMgZGVsZXRlZCwg\nc2FmZSB0byBjb250aW51ZSIsIGJrbnNsZSk7CiAgICAgICAgICAgICAgICB9\nIGNhdGNoIChCS0V4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAgICAgICAg\nTE9HLmVycm9yKCJCS0V4Y2VwdGlvbiB3aGlsZSBmZW5jaW5nIHRoZSBsZWRn\nZXIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICArICIgZm9yIHJlcmVw\nbGljYXRpb24gb2YgcG9zdHBvbmVkIGxlZGdlcnMiLCBlKTsKICAgICAgICAg\nICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsK\nICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxoICE9IG51bGwpIHsKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgIGxoLmNsb3NlKCk7CiAgICAgICAg\nICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGNhdGNo\nIChJbnRlcnJ1cHRlZEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAgICAg\nICAgICAgIFRocmVhZC5jdXJyZW50VGhyZWFkKCkuaW50ZXJydXB0KCk7CiAg\nICAgICAgICAgICAgICAgICAgICAgIExPRy5pbmZvKCJJbnRlcnJ1cHRlZEV4\nY2VwdGlvbiB3aGlsZSBjbG9zaW5nICIKICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICArICJsZWRnZXIiLCBlKTsKICAgICAgICAgICAgICAgICAg\nICB9IGNhdGNoIChCS0V4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAgICAg\nICAgICAgIC8vIExldHMgZ28gYWhlYWQgYW5kIHJlbGVhc2UgdGhlIGxvY2su\nIENhdGNoIGFjdHVhbAogICAgICAgICAgICAgICAgICAgICAgICAvLyBleGNl\ncHRpb24gaW4gbm9ybWFsIHJlcGxpY2F0aW9uIGZsb3cgYW5kIHRha2UKICAg\nICAgICAgICAgICAgICAgICAgICAgLy8gYWN0aW9uLgogICAgICAgICAgICAg\nICAgICAgICAgICBMT0cud2FybigiQktFeGNlcHRpb24gd2hpbGUgY2xvc2lu\nZyBsZWRnZXIgIiwgZSk7CiAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5\nIHsKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIHVuZGVycmVwbGljYXRpb25NYW5hZ2VyCiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZWxlYXNlVW5kZXJy\nZXBsaWNhdGVkTGVkZ2VyKGxlZGdlcklkKTsKICAgICAgICAgICAgICAgICAg\nICAgICAgfSBjYXRjaCAoVW5hdmFpbGFibGVFeGNlcHRpb24gZSkgewogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgc2h1dGRvd24oKTsKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIExPRy5lcnJvcigiVW5hdmFpbGFibGVFeGNl\ncHRpb24gIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAr\nICJ3aGlsZSByZXBsaWNhdGluZyBmcmFnbWVudHMiLCBlKTsKICAgICAgICAg\nICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAg\nICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAg\ncGVuZGluZ1JlcGxpY2F0aW9uVGltZXIuc2NoZWR1bGUodGltZXJUYXNrLCBn\ncmFjZVBlcmlvZCk7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogU3RvcCB0\naGUgcmVwbGljYXRpb24gd29ya2VyIHNlcnZpY2UKICAgICAqLwogICAgcHVi\nbGljIHZvaWQgc2h1dGRvd24oKSB7CiAgICAgICAgc3luY2hyb25pemVkICh0\naGlzKSB7CiAgICAgICAgICAgIGlmICghd29ya2VyUnVubmluZykgewogICAg\nICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAg\nIHdvcmtlclJ1bm5pbmcgPSBmYWxzZTsKICAgICAgICB9CiAgICAgICAgdGhp\ncy5wZW5kaW5nUmVwbGljYXRpb25UaW1lci5jYW5jZWwoKTsKICAgICAgICB0\ncnkgewogICAgICAgICAgICB0aGlzLndvcmtlclRocmVhZC5pbnRlcnJ1cHQo\nKTsKICAgICAgICAgICAgdGhpcy53b3JrZXJUaHJlYWQuam9pbigpOwogICAg\nICAgIH0gY2F0Y2ggKEludGVycnVwdGVkRXhjZXB0aW9uIGUpIHsKICAgICAg\nICAgICAgTE9HLmVycm9yKCJJbnRlcnJ1cHRlZCBkdXJpbmcgc2h1dHRpbmcg\nZG93biByZXBsaWNhdGlvbiB3b3JrZXIgOiAiLAogICAgICAgICAgICAgICAg\nICAgIGUpOwogICAgICAgICAgICBUaHJlYWQuY3VycmVudFRocmVhZCgpLmlu\ndGVycnVwdCgpOwogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAg\nICBia2MuY2xvc2UoKTsKICAgICAgICB9IGNhdGNoIChJbnRlcnJ1cHRlZEV4\nY2VwdGlvbiBlKSB7CiAgICAgICAgICAgIExPRy53YXJuKCJJbnRlcnJ1cHRl\nZCB3aGlsZSBjbG9zaW5nIHRoZSBCb29raWUgY2xpZW50IiwgZSk7CiAgICAg\nICAgICAgIFRocmVhZC5jdXJyZW50VGhyZWFkKCkuaW50ZXJydXB0KCk7CiAg\nICAgICAgfSBjYXRjaCAoQktFeGNlcHRpb24gZSkgewogICAgICAgICAgICBM\nT0cud2FybigiRXhjZXB0aW9uIHdoaWxlIGNsb3NpbmcgdGhlIEJvb2tpZSBj\nbGllbnQiLCBlKTsKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgdW5kZXJyZXBsaWNhdGlvbk1hbmFnZXIuY2xvc2UoKTsKICAgICAgICB9\nIGNhdGNoIChVbmF2YWlsYWJsZUV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAg\nIExPRy53YXJuKCJFeGNlcHRpb24gd2hpbGUgY2xvc2luZyB0aGUgIgogICAg\nICAgICAgICAgICAgICAgICsgIlprTGVkZ2VyVW5kZXJyZXBsaWF0aW9uTWFu\nYWdlciIsIGUpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEdp\ndmVzIHRoZSBydW5uaW5nIHN0YXR1cyBvZiBSZXBsaWNhdGlvbldvcmtlcgog\nICAgICovCiAgICBib29sZWFuIGlzUnVubmluZygpIHsKICAgICAgICByZXR1\ncm4gd29ya2VyUnVubmluZzsKICAgIH0KCiAgICBwcml2YXRlIGJvb2xlYW4g\naXNUYXJnZXRCb29raWVFeGlzdHNJbkZyYWdtZW50RW5zZW1ibGUoTGVkZ2Vy\nSGFuZGxlIGxoLAogICAgICAgICAgICBMZWRnZXJGcmFnbWVudCBsZWRnZXJG\ncmFnbWVudCkgewogICAgICAgIExpc3Q8SW5ldFNvY2tldEFkZHJlc3M+IGVu\nc2VtYmxlID0gbGVkZ2VyRnJhZ21lbnQuZ2V0RW5zZW1ibGUoKTsKICAgICAg\nICBmb3IgKEluZXRTb2NrZXRBZGRyZXNzIGJrQWRkciA6IGVuc2VtYmxlKSB7\nCiAgICAgICAgICAgIGlmICh0YXJnZXRCb29raWUuZXF1YWxzKGJrQWRkcikp\nIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9\nCiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAv\nKiogTGVkZ2VyIGNoZWNrZXIgY2FsbCBiYWNrICovCiAgICBwcml2YXRlIHN0\nYXRpYyBjbGFzcyBDaGVja2VyQ2FsbGJhY2sgaW1wbGVtZW50cwogICAgICAg\nICAgICBHZW5lcmljQ2FsbGJhY2s8U2V0PExlZGdlckZyYWdtZW50Pj4gewog\nICAgICAgIHByaXZhdGUgU2V0PExlZGdlckZyYWdtZW50PiByZXN1bHQgPSBu\ndWxsOwogICAgICAgIHByaXZhdGUgQ291bnREb3duTGF0Y2ggbGF0Y2ggPSBu\nZXcgQ291bnREb3duTGF0Y2goMSk7CgogICAgICAgIEBPdmVycmlkZQogICAg\nICAgIHB1YmxpYyB2b2lkIG9wZXJhdGlvbkNvbXBsZXRlKGludCByYywgU2V0\nPExlZGdlckZyYWdtZW50PiByZXN1bHQpIHsKICAgICAgICAgICAgdGhpcy5y\nZXN1bHQgPSByZXN1bHQ7CiAgICAgICAgICAgIGxhdGNoLmNvdW50RG93bigp\nOwogICAgICAgIH0KCiAgICAgICAgLyoqCiAgICAgICAgICogV2FpdCB1bnRp\nbCBvcGVyYXRpb24gY29tcGxldGUgY2FsbCBiYWNrIGNvbWVzIGFuZCByZXR1\ncm4gdGhlIGxlZGdlcgogICAgICAgICAqIGZyYWdtZW50cyBzZXQKICAgICAg\nICAgKi8KICAgICAgICBTZXQ8TGVkZ2VyRnJhZ21lbnQ+IHdhaXRBbmRHZXRS\nZXN1bHQoKSB0aHJvd3MgSW50ZXJydXB0ZWRFeGNlcHRpb24gewogICAgICAg\nICAgICBsYXRjaC5hd2FpdCgpOwogICAgICAgICAgICByZXR1cm4gcmVzdWx0\nOwogICAgICAgIH0KICAgIH0KCn0K\n","encoding":"base64"}

