{"sha":"f58d5ea97248a9d5025e10101697bfa87935a0f3","node_id":"MDQ6QmxvYjE1NzU5NTY6ZjU4ZDVlYTk3MjQ4YTlkNTAyNWUxMDEwMTY5N2JmYTg3OTM1YTBmMw==","size":9309,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/f58d5ea97248a9d5025e10101697bfa87935a0f3","content":"LyoKICoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9y\nIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBU\naGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhl\nIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNl\nIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBs\naWFuY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEg\nY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBl\naXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZv\nciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Np\nb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICoK\nICovCgpwYWNrYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci5ib29raWU7Cgpp\nbXBvcnQgamF2YS51dGlsLkFycmF5czsKCmltcG9ydCBqYXZhLm5pby5CeXRl\nQnVmZmVyOwppbXBvcnQgamF2YS5uaW8uY2hhbm5lbHMuRmlsZUNoYW5uZWw7\nCgppbXBvcnQgamF2YS5pby5GaWxlOwppbXBvcnQgamF2YS5pby5JT0V4Y2Vw\ndGlvbjsKCmltcG9ydCBqYXZhLmlvLkZpbGVPdXRwdXRTdHJlYW07CmltcG9y\ndCBqYXZhLmlvLk91dHB1dFN0cmVhbVdyaXRlcjsKaW1wb3J0IGphdmEuaW8u\nQnVmZmVyZWRXcml0ZXI7CmltcG9ydCBqYXZhLmlvLlByaW50U3RyZWFtOwpp\nbXBvcnQgamF2YS5pby5SYW5kb21BY2Nlc3NGaWxlOwoKaW1wb3J0IG9yZy5q\ndW5pdC5CZWZvcmU7CmltcG9ydCBvcmcuanVuaXQuQWZ0ZXI7CmltcG9ydCBv\ncmcuanVuaXQuVGVzdDsKaW1wb3J0IHN0YXRpYyBvcmcuanVuaXQuQXNzZXJ0\nLio7CgppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNsaWVudC5DbGll\nbnRVdGlsOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNsaWVudC5M\nZWRnZXJIYW5kbGU7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY29u\nZi5TZXJ2ZXJDb25maWd1cmF0aW9uOwoKaW1wb3J0IG9yZy5hcGFjaGUuem9v\na2VlcGVyLlpvb0tlZXBlcjsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBl\nci50ZXN0Llpvb0tlZXBlclV0aWw7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2tr\nZWVwZXIudGVzdC5Qb3J0TWFuYWdlcjsKCmltcG9ydCBvcmcuc2xmNGouTG9n\nZ2VyOwppbXBvcnQgb3JnLnNsZjRqLkxvZ2dlckZhY3Rvcnk7CgpwdWJsaWMg\nY2xhc3MgVXBncmFkZVRlc3QgewogICAgc3RhdGljIExvZ2dlciBMT0cgPSBM\nb2dnZXJGYWN0b3J5LmdldExvZ2dlcihGaWxlSW5mby5jbGFzcyk7CgogICAg\nWm9vS2VlcGVyVXRpbCB6a3V0aWw7CiAgICBab29LZWVwZXIgemtjID0gbnVs\nbDsKICAgIGZpbmFsIHN0YXRpYyBpbnQgYm9va2llUG9ydCA9IFBvcnRNYW5h\nZ2VyLm5leHRGcmVlUG9ydCgpOwoKICAgIEBCZWZvcmUKICAgIHB1YmxpYyB2\nb2lkIHNldHVwWm9vS2VlcGVyKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAg\nICAgemt1dGlsID0gbmV3IFpvb0tlZXBlclV0aWwoKTsKICAgICAgICB6a3V0\naWwuc3RhcnRTZXJ2ZXIoKTsKICAgICAgICB6a2MgPSB6a3V0aWwuZ2V0Wm9v\nS2VlcGVyQ2xpZW50KCk7CiAgICB9CgogICAgQEFmdGVyCiAgICBwdWJsaWMg\ndm9pZCB0ZWFyRG93blpvb0tlZXBlcigpIHRocm93cyBFeGNlcHRpb24gewog\nICAgICAgIHprdXRpbC5raWxsU2VydmVyKCk7CiAgICB9CgogICAgc3RhdGlj\nIHZvaWQgd3JpdGVMZWRnZXJEaXIoRmlsZSBkaXIsCiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICBieXRlW10gbWFzdGVyS2V5KQogICAgICAgICAg\nICB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBsb25nIGxlZGdlcklkID0g\nMTsKCiAgICAgICAgRmlsZSBmbiA9IG5ldyBGaWxlKGRpciwgTGVkZ2VyQ2Fj\naGVJbXBsLmdldExlZGdlck5hbWUobGVkZ2VySWQpKTsKICAgICAgICBmbi5n\nZXRQYXJlbnRGaWxlKCkubWtkaXJzKCk7CiAgICAgICAgRmlsZUluZm8gZmkg\nPSBuZXcgRmlsZUluZm8oZm4sIG1hc3RlcktleSk7CiAgICAgICAgLy8gZm9y\nY2UgY3JlYXRpb24gb2YgaW5kZXggZmlsZQogICAgICAgIGZpLndyaXRlKG5l\ndyBCeXRlQnVmZmVyW117IEJ5dGVCdWZmZXIuYWxsb2NhdGUoMCkgfSwgMCk7\nCiAgICAgICAgZmkuY2xvc2UodHJ1ZSk7CgogICAgICAgIGxvbmcgbG9nSWQg\nPSAwOwogICAgICAgIEJ5dGVCdWZmZXIgTE9HRklMRV9IRUFERVIgPSBCeXRl\nQnVmZmVyLmFsbG9jYXRlKDEwMjQpOwogICAgICAgIExPR0ZJTEVfSEVBREVS\nLnB1dCgiQktMTyIuZ2V0Qnl0ZXMoKSk7CiAgICAgICAgRmlsZUNoYW5uZWwg\nbG9nZmlsZSA9IG5ldyBSYW5kb21BY2Nlc3NGaWxlKAogICAgICAgICAgICAg\nICAgbmV3IEZpbGUoZGlyLCBMb25nLnRvSGV4U3RyaW5nKGxvZ0lkKSsiLmxv\nZyIpLCAicnciKS5nZXRDaGFubmVsKCk7CiAgICAgICAgbG9nZmlsZS53cml0\nZSgoQnl0ZUJ1ZmZlcikgTE9HRklMRV9IRUFERVIuY2xlYXIoKSk7CiAgICAg\nICAgbG9nZmlsZS5jbG9zZSgpOwogICAgfQoKICAgIHN0YXRpYyBKb3VybmFs\nQ2hhbm5lbCB3cml0ZUpvdXJuYWwoRmlsZSBqb3VybmFsRGlyLCBpbnQgbnVt\nRW50cmllcywgYnl0ZVtdIG1hc3RlcktleSkKICAgICAgICAgICAgdGhyb3dz\nIEV4Y2VwdGlvbiB7CiAgICAgICAgbG9uZyBsb2dJZCA9IFN5c3RlbS5jdXJy\nZW50VGltZU1pbGxpcygpOwogICAgICAgIEpvdXJuYWxDaGFubmVsIGpjID0g\nbmV3IEpvdXJuYWxDaGFubmVsKGpvdXJuYWxEaXIsIGxvZ0lkKTsKCiAgICAg\nICAgQnVmZmVyZWRDaGFubmVsIGJjID0gamMuZ2V0QnVmZmVyZWRDaGFubmVs\nKCk7CgogICAgICAgIGxvbmcgbGVkZ2VySWQgPSAxOwogICAgICAgIGJ5dGVb\nXSBkYXRhID0gbmV3IGJ5dGVbMTAyNF07CiAgICAgICAgQXJyYXlzLmZpbGwo\nZGF0YSwgKGJ5dGUpJ1gnKTsKICAgICAgICBsb25nIGxhc3RDb25maXJtZWQg\nPSBMZWRnZXJIYW5kbGUuSU5WQUxJRF9FTlRSWV9JRDsKCiAgICAgICAgZm9y\nIChpbnQgaSA9IDE7IGkgPD0gbnVtRW50cmllczsgaSsrKSB7CiAgICAgICAg\nICAgIEJ5dGVCdWZmZXIgcGFja2V0ID0gQ2xpZW50VXRpbC5nZW5lcmF0ZVBh\nY2tldChsZWRnZXJJZCwgaSwgbGFzdENvbmZpcm1lZCwKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIGkqZGF0YS5sZW5ndGgsIGRhdGEpLnRvQnl0ZUJ1ZmZlcigpOwogICAgICAg\nICAgICBsYXN0Q29uZmlybWVkID0gaTsKICAgICAgICAgICAgQnl0ZUJ1ZmZl\nciBsZW5CdWZmID0gQnl0ZUJ1ZmZlci5hbGxvY2F0ZSg0KTsKICAgICAgICAg\nICAgbGVuQnVmZi5wdXRJbnQocGFja2V0LnJlbWFpbmluZygpKTsKICAgICAg\nICAgICAgbGVuQnVmZi5mbGlwKCk7CgogICAgICAgICAgICBiYy53cml0ZShs\nZW5CdWZmKTsKICAgICAgICAgICAgYmMud3JpdGUocGFja2V0KTsKICAgICAg\nICB9CiAgICAgICAgYmMuZmx1c2godHJ1ZSk7CgogICAgICAgIHJldHVybiBq\nYzsKICAgIH0KCiAgICBzdGF0aWMgU3RyaW5nIG5ld1YxSm91cm5hbERpcmVj\ndG9yeSgpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIEZpbGUgZCA9IEZp\nbGUuY3JlYXRlVGVtcEZpbGUoImJvb2tpZSIsICJ0bXBkaXIiKTsKICAgICAg\nICBkLmRlbGV0ZSgpOwogICAgICAgIGQubWtkaXJzKCk7CiAgICAgICAgd3Jp\ndGVKb3VybmFsKGQsIDEwMCwgImZvb2JhciIuZ2V0Qnl0ZXMoKSkuY2xvc2Uo\nKTsKICAgICAgICByZXR1cm4gZC5nZXRQYXRoKCk7CiAgICB9CgogICAgc3Rh\ndGljIFN0cmluZyBuZXdWMUxlZGdlckRpcmVjdG9yeSgpIHRocm93cyBFeGNl\ncHRpb24gewogICAgICAgIEZpbGUgZCA9IEZpbGUuY3JlYXRlVGVtcEZpbGUo\nImJvb2tpZSIsICJ0bXBkaXIiKTsKICAgICAgICBkLmRlbGV0ZSgpOwogICAg\nICAgIGQubWtkaXJzKCk7CiAgICAgICAgd3JpdGVMZWRnZXJEaXIoZCwgImZv\nb2JhciIuZ2V0Qnl0ZXMoKSk7CiAgICAgICAgcmV0dXJuIGQuZ2V0UGF0aCgp\nOwogICAgfQoKICAgIHN0YXRpYyB2b2lkIGNyZWF0ZVZlcnNpb24yRmlsZShT\ndHJpbmcgZGlyKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBGaWxlIHZl\ncnNpb25GaWxlID0gbmV3IEZpbGUoZGlyLCAiVkVSU0lPTiIpOwoKICAgICAg\nICBGaWxlT3V0cHV0U3RyZWFtIGZvcyA9IG5ldyBGaWxlT3V0cHV0U3RyZWFt\nKHZlcnNpb25GaWxlKTsKICAgICAgICBCdWZmZXJlZFdyaXRlciBidyA9IG51\nbGw7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgYncgPSBuZXcgQnVmZmVy\nZWRXcml0ZXIobmV3IE91dHB1dFN0cmVhbVdyaXRlcihmb3MpKTsKICAgICAg\nICAgICAgYncud3JpdGUoU3RyaW5nLnZhbHVlT2YoMikpOwogICAgICAgIH0g\nZmluYWxseSB7CiAgICAgICAgICAgIGlmIChidyAhPSBudWxsKSB7CiAgICAg\nICAgICAgICAgICBidy5jbG9zZSgpOwogICAgICAgICAgICB9CiAgICAgICAg\nICAgIGZvcy5jbG9zZSgpOwogICAgICAgIH0KICAgIH0KCiAgICBzdGF0aWMg\nU3RyaW5nIG5ld1YySm91cm5hbERpcmVjdG9yeSgpIHRocm93cyBFeGNlcHRp\nb24gewogICAgICAgIFN0cmluZyBkID0gbmV3VjFKb3VybmFsRGlyZWN0b3J5\nKCk7CiAgICAgICAgY3JlYXRlVmVyc2lvbjJGaWxlKGQpOwogICAgICAgIHJl\ndHVybiBkOwogICAgfQoKICAgIHN0YXRpYyBTdHJpbmcgbmV3VjJMZWRnZXJE\naXJlY3RvcnkoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBTdHJpbmcg\nZCA9IG5ld1YxTGVkZ2VyRGlyZWN0b3J5KCk7CiAgICAgICAgY3JlYXRlVmVy\nc2lvbjJGaWxlKGQpOwogICAgICAgIHJldHVybiBkOwogICAgfQoKICAgIHBy\naXZhdGUgc3RhdGljIHZvaWQgdGVzdFVwZ3JhZGVQcm9jZWVkdXJlKFN0cmlu\nZyB6a1NlcnZlcnMsIFN0cmluZyBqb3VybmFsRGlyLCBTdHJpbmcgbGVkZ2Vy\nRGlyKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBTZXJ2ZXJDb25maWd1\ncmF0aW9uIGNvbmYgPSBuZXcgU2VydmVyQ29uZmlndXJhdGlvbigpCiAgICAg\nICAgICAgIC5zZXRBbGxvd0xvb3BiYWNrKHRydWUpCiAgICAgICAgICAgIC5z\nZXRaa1NlcnZlcnMoemtTZXJ2ZXJzKQogICAgICAgICAgICAuc2V0Sm91cm5h\nbERpck5hbWUoam91cm5hbERpcikKICAgICAgICAgICAgLnNldExlZGdlckRp\nck5hbWVzKG5ldyBTdHJpbmdbXSB7IGxlZGdlckRpciB9KQogICAgICAgICAg\nICAuc2V0Qm9va2llUG9ydChib29raWVQb3J0KTsKICAgICAgICBCb29raWUg\nYiA9IG51bGw7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgYiA9IG5ldyBC\nb29raWUoY29uZik7CiAgICAgICAgICAgIGZhaWwoIlNob3VsZG4ndCBoYXZl\nIGJlZW4gYWJsZSB0byBzdGFydCIpOwogICAgICAgIH0gY2F0Y2ggKEJvb2tp\nZUV4Y2VwdGlvbi5JbnZhbGlkQ29va2llRXhjZXB0aW9uIGUpIHsKICAgICAg\nICAgICAgLy8gY29ycmVjdCBiZWhhdmlvdXIKICAgICAgICAgICAgYXNzZXJ0\nVHJ1ZSgid3JvbmcgZXhjZXB0aW9uIiwgZS5nZXRNZXNzYWdlKCkuY29udGFp\nbnMoInVwZ3JhZGUgbmVlZGVkIikpOwogICAgICAgIH0KCiAgICAgICAgRmls\nZVN5c3RlbVVwZ3JhZGUudXBncmFkZShjb25mKTsgLy8gc2hvdWxkIHdvcmsg\nZmluZQogICAgICAgIGIgPSBuZXcgQm9va2llKGNvbmYpOwogICAgICAgIGIu\nc3RhcnQoKTsKICAgICAgICBiLnNodXRkb3duKCk7CiAgICAgICAgYiA9IG51\nbGw7CgogICAgICAgIEZpbGVTeXN0ZW1VcGdyYWRlLnJvbGxiYWNrKGNvbmYp\nOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGIgPSBuZXcgQm9va2llKGNv\nbmYpOwogICAgICAgICAgICBmYWlsKCJTaG91bGRuJ3QgaGF2ZSBiZWVuIGFi\nbGUgdG8gc3RhcnQiKTsKICAgICAgICB9IGNhdGNoIChCb29raWVFeGNlcHRp\nb24uSW52YWxpZENvb2tpZUV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIC8v\nIGNvcnJlY3QgYmVoYXZpb3VyCiAgICAgICAgICAgIGFzc2VydFRydWUoIndy\nb25nIGV4Y2VwdGlvbiIsIGUuZ2V0TWVzc2FnZSgpLmNvbnRhaW5zKCJ1cGdy\nYWRlIG5lZWRlZCIpKTsKICAgICAgICB9CgogICAgICAgIEZpbGVTeXN0ZW1V\ncGdyYWRlLnVwZ3JhZGUoY29uZik7CiAgICAgICAgRmlsZVN5c3RlbVVwZ3Jh\nZGUuZmluYWxpemVVcGdyYWRlKGNvbmYpOwogICAgICAgIGIgPSBuZXcgQm9v\na2llKGNvbmYpOwogICAgICAgIGIuc3RhcnQoKTsKICAgICAgICBiLnNodXRk\nb3duKCk7CiAgICAgICAgYiA9IG51bGw7CiAgICB9CgogICAgQFRlc3QodGlt\nZW91dD02MDAwMCkKICAgIHB1YmxpYyB2b2lkIHRlc3RVcGdyYWRlVjF0b0N1\ncnJlbnQoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBTdHJpbmcgam91\ncm5hbERpciA9IG5ld1YxSm91cm5hbERpcmVjdG9yeSgpOwogICAgICAgIFN0\ncmluZyBsZWRnZXJEaXIgPSBuZXdWMUxlZGdlckRpcmVjdG9yeSgpOwogICAg\nICAgIHRlc3RVcGdyYWRlUHJvY2VlZHVyZSh6a3V0aWwuZ2V0Wm9vS2VlcGVy\nQ29ubmVjdFN0cmluZygpLCBqb3VybmFsRGlyLCBsZWRnZXJEaXIpOwogICAg\nfQoKICAgIEBUZXN0KHRpbWVvdXQ9NjAwMDApCiAgICBwdWJsaWMgdm9pZCB0\nZXN0VXBncmFkZVYydG9DdXJyZW50KCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAg\nICAgICAgU3RyaW5nIGpvdXJuYWxEaXIgPSBuZXdWMkpvdXJuYWxEaXJlY3Rv\ncnkoKTsKICAgICAgICBTdHJpbmcgbGVkZ2VyRGlyID0gbmV3VjJMZWRnZXJE\naXJlY3RvcnkoKTsKICAgICAgICB0ZXN0VXBncmFkZVByb2NlZWR1cmUoemt1\ndGlsLmdldFpvb0tlZXBlckNvbm5lY3RTdHJpbmcoKSwgam91cm5hbERpciwg\nbGVkZ2VyRGlyKTsKICAgIH0KCiAgICBAVGVzdCh0aW1lb3V0PTYwMDAwKQog\nICAgcHVibGljIHZvaWQgdGVzdFVwZ3JhZGVDdXJyZW50KCkgdGhyb3dzIEV4\nY2VwdGlvbiB7CiAgICAgICAgU3RyaW5nIGpvdXJuYWxEaXIgPSBuZXdWMkpv\ndXJuYWxEaXJlY3RvcnkoKTsKICAgICAgICBTdHJpbmcgbGVkZ2VyRGlyID0g\nbmV3VjJMZWRnZXJEaXJlY3RvcnkoKTsKICAgICAgICB0ZXN0VXBncmFkZVBy\nb2NlZWR1cmUoemt1dGlsLmdldFpvb0tlZXBlckNvbm5lY3RTdHJpbmcoKSwg\nam91cm5hbERpciwgbGVkZ2VyRGlyKTsKICAgICAgICAvLyBVcGdyYWRlIGFn\nYWluCiAgICAgICAgU2VydmVyQ29uZmlndXJhdGlvbiBjb25mID0gbmV3IFNl\ncnZlckNvbmZpZ3VyYXRpb24oKQogICAgICAgICAgICAuc2V0QWxsb3dMb29w\nYmFjayh0cnVlKQogICAgICAgICAgICAuc2V0WmtTZXJ2ZXJzKHprdXRpbC5n\nZXRab29LZWVwZXJDb25uZWN0U3RyaW5nKCkpCiAgICAgICAgICAgIC5zZXRK\nb3VybmFsRGlyTmFtZShqb3VybmFsRGlyKQogICAgICAgICAgICAuc2V0TGVk\nZ2VyRGlyTmFtZXMobmV3IFN0cmluZ1tdIHsgbGVkZ2VyRGlyIH0pCiAgICAg\nICAgICAgIC5zZXRCb29raWVQb3J0KGJvb2tpZVBvcnQpOwogICAgICAgIEZp\nbGVTeXN0ZW1VcGdyYWRlLnVwZ3JhZGUoY29uZik7IC8vIHNob3VsZCB3b3Jr\nIGZpbmUgd2l0aCBjdXJyZW50IGRpcmVjdG9yeQogICAgICAgIEJvb2tpZSBi\nID0gbmV3IEJvb2tpZShjb25mKTsKICAgICAgICBiLnN0YXJ0KCk7CiAgICAg\nICAgYi5zaHV0ZG93bigpOwogICAgfQoKICAgIEBUZXN0KHRpbWVvdXQ9NjAw\nMDApCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q29tbWFuZExpbmUoKSB0aHJvd3Mg\nRXhjZXB0aW9uIHsKICAgICAgICBQcmludFN0cmVhbSBvcmlnZXJyID0gU3lz\ndGVtLmVycjsKICAgICAgICBQcmludFN0cmVhbSBvcmlnb3V0ID0gU3lzdGVt\nLm91dDsKCiAgICAgICAgRmlsZSBvdXRwdXQgPSBGaWxlLmNyZWF0ZVRlbXBG\naWxlKCJib29raWUiLCAic3Rkb3V0Iik7CiAgICAgICAgRmlsZSBlcnJvdXRw\ndXQgPSBGaWxlLmNyZWF0ZVRlbXBGaWxlKCJib29raWUiLCAic3RkZXJyIik7\nCiAgICAgICAgU3lzdGVtLnNldE91dChuZXcgUHJpbnRTdHJlYW0ob3V0cHV0\nKSk7CiAgICAgICAgU3lzdGVtLnNldEVycihuZXcgUHJpbnRTdHJlYW0oZXJy\nb3V0cHV0KSk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgRmlsZVN5c3Rl\nbVVwZ3JhZGUubWFpbihuZXcgU3RyaW5nW10geyAiLWgiIH0pOwogICAgICAg\nICAgICB0cnkgewogICAgICAgICAgICAgICAgLy8gdGVzdCB3aXRob3V0IGNv\nbmYKICAgICAgICAgICAgICAgIEZpbGVTeXN0ZW1VcGdyYWRlLm1haW4obmV3\nIFN0cmluZ1tdIHsgIi11IiB9KTsKICAgICAgICAgICAgICAgIGZhaWwoIlNo\nb3VsZCBoYXZlIGZhaWxlZCIpOwogICAgICAgICAgICB9IGNhdGNoIChJbGxl\nZ2FsQXJndW1lbnRFeGNlcHRpb24gaWFlKSB7CiAgICAgICAgICAgICAgICBh\nc3NlcnRUcnVlKCJXcm9uZyBleGNlcHRpb24gIiArIGlhZS5nZXRNZXNzYWdl\nKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGlhZS5nZXRNZXNzYWdl\nKCkuY29udGFpbnMoIndpdGhvdXQgY29uZmlndXJhdGlvbiIpKTsKICAgICAg\nICAgICAgfQogICAgICAgICAgICBGaWxlIGYgPSBGaWxlLmNyZWF0ZVRlbXBG\naWxlKCJib29raWUiLCAidG1wY29uZiIpOwogICAgICAgICAgICB0cnkgewog\nICAgICAgICAgICAgICAgLy8gdGVzdCB3aXRob3V0IHVwZ3JhZGUgb3AKICAg\nICAgICAgICAgICAgIEZpbGVTeXN0ZW1VcGdyYWRlLm1haW4obmV3IFN0cmlu\nZ1tdIHsgIi0tY29uZiIsIGYuZ2V0UGF0aCgpIH0pOwogICAgICAgICAgICAg\nICAgZmFpbCgiU2hvdWxkIGhhdmUgZmFpbGVkIik7CiAgICAgICAgICAgIH0g\nY2F0Y2ggKElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpYWUpIHsKICAgICAg\nICAgICAgICAgIGFzc2VydFRydWUoIldyb25nIGV4Y2VwdGlvbiAiICsgaWFl\nLmdldE1lc3NhZ2UoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgaWFl\nLmdldE1lc3NhZ2UoKS5jb250YWlucygiTXVzdCBzcGVjaWZ5IC11cGdyYWRl\nIikpOwogICAgICAgICAgICB9CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAg\nICAgICAgU3lzdGVtLnNldE91dChvcmlnb3V0KTsKICAgICAgICAgICAgU3lz\ndGVtLnNldEVycihvcmlnZXJyKTsKICAgICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

