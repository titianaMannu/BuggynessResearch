{"sha":"27e65c306e0a9f3583285e02a6d7013cb8e5f97d","node_id":"MDQ6QmxvYjE1NzU5NTY6MjdlNjVjMzA2ZTBhOWYzNTgzMjg1ZTAyYTZkNzAxM2NiOGU1Zjk3ZA==","size":4733,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/27e65c306e0a9f3583285e02a6d7013cb8e5f97d","content":"LyoqCiAqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91\nbmRhdGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRv\nciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAq\nIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGlu\nZm9ybWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRo\nZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5z\nZSIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21w\nbGlhbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBh\nIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICBodHRwOi8vd3d3LmFw\nYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJl\ncXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0\naW5nLAogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5z\nZSBpcyBkaXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRI\nT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwg\nZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBm\nb3IgdGhlCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNz\naW9ucyBhbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAq\nCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci5yZXBsaWNhdGlv\nbjsKCmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIudGVzdC5Cb29rS2Vl\ncGVyQ2x1c3RlclRlc3RDYXNlOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2Vl\ncGVyLnRlc3QuVGVzdENhbGxiYWNrczsKCmltcG9ydCBqYXZhLnV0aWwuTGlz\ndDsKaW1wb3J0IGphdmEubmV0LkluZXRTb2NrZXRBZGRyZXNzOwoKaW1wb3J0\nIG9yZy5hcGFjaGUuYm9va2tlZXBlci51dGlsLlN0cmluZ1V0aWxzOwppbXBv\ncnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLnpvb2tlZXBlci5ab29LZWVwZXJX\nYXRjaGVyQmFzZTsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5jbGll\nbnQuQm9va0tlZXBlci5EaWdlc3RUeXBlOwppbXBvcnQgb3JnLmFwYWNoZS5i\nb29ra2VlcGVyLmNsaWVudC5MZWRnZXJIYW5kbGU7CmltcG9ydCBvcmcuYXBh\nY2hlLmJvb2trZWVwZXIuY2xpZW50LkxlZGdlckhhbmRsZUFkYXB0ZXI7Cmlt\ncG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY2xpZW50LkxlZGdlck1ldGFk\nYXRhOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNvbmYuU2VydmVy\nQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5t\nZXRhLkxlZGdlck1hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVw\nZXIubWV0YS5MZWRnZXJNYW5hZ2VyRmFjdG9yeTsKaW1wb3J0IG9yZy5hcGFj\naGUuYm9va2tlZXBlci5tZXRhLkxlZGdlclVuZGVycmVwbGljYXRpb25NYW5h\nZ2VyOwoKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci51dGlsLlprVXRp\nbHM7CgppbXBvcnQgb3JnLmFwYWNoZS56b29rZWVwZXIuWm9vS2VlcGVyOwpp\nbXBvcnQgb3JnLmp1bml0LkJlZm9yZTsKaW1wb3J0IG9yZy5qdW5pdC5BZnRl\ncjsKaW1wb3J0IG9yZy5qdW5pdC5UZXN0OwppbXBvcnQgc3RhdGljIG9yZy5q\ndW5pdC5Bc3NlcnQuYXNzZXJ0RXF1YWxzOwoKaW1wb3J0IG9yZy5zbGY0ai5M\nb2dnZXI7CmltcG9ydCBvcmcuc2xmNGouTG9nZ2VyRmFjdG9yeTsKCi8qKgog\nKiBUaGlzIHRlc3QgdmVyaWZpZXMgdGhhdCB0aGUgcGVyaW9kIGNoZWNrIG9u\nIHRoZSBhdWRpdG9yCiAqIHdpbGwgcGljayB1cCBvbiBtaXNzaW5nIGRhdGEg\naW4gdGhlIGNsaWVudAogKi8KcHVibGljIGNsYXNzIEF1ZGl0b3JQZXJpb2Rp\nY0Jvb2tpZUNoZWNrVGVzdCBleHRlbmRzIEJvb2tLZWVwZXJDbHVzdGVyVGVz\ndENhc2UgewogICAgcHJpdmF0ZSBmaW5hbCBzdGF0aWMgTG9nZ2VyIExPRyA9\nIExvZ2dlckZhY3RvcnkKICAgICAgICAgICAgLmdldExvZ2dlcihBdWRpdG9y\nUGVyaW9kaWNCb29raWVDaGVja1Rlc3QuY2xhc3MpOwoKICAgIHByaXZhdGUg\nQXVkaXRvckVsZWN0b3IgYXVkaXRvckVsZWN0b3IgPSBudWxsOwogICAgcHJp\ndmF0ZSBab29LZWVwZXIgYXVkaXRvclpvb2tlZXBlciA9IG51bGw7CgogICAg\ncHJpdmF0ZSBmaW5hbCBzdGF0aWMgaW50IENIRUNLX0lOVEVSVkFMID0gMTsg\nLy8gcnVuIGV2ZXJ5IHNlY29uZAoKICAgIHB1YmxpYyBBdWRpdG9yUGVyaW9k\naWNCb29raWVDaGVja1Rlc3QoKSB7CiAgICAgICAgc3VwZXIoMyk7CiAgICAg\nICAgYmFzZUNvbmYuc2V0UGFnZUxpbWl0KDEpOyAvLyB0byBtYWtlIGl0IGVh\nc3kgdG8gcHVzaCBsZWRnZXIgb3V0IG9mIGNhY2hlCiAgICAgICAgYmFzZUNv\nbmYuc2V0QWxsb3dMb29wYmFjayh0cnVlKTsKICAgIH0KCiAgICBAQmVmb3Jl\nCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgdGhyb3dz\nIEV4Y2VwdGlvbiB7CiAgICAgICAgc3VwZXIuc2V0VXAoKTsKCiAgICAgICAg\nU2VydmVyQ29uZmlndXJhdGlvbiBjb25mID0gbmV3IFNlcnZlckNvbmZpZ3Vy\nYXRpb24oYnNDb25mcy5nZXQoMCkpOwogICAgICAgIGNvbmYuc2V0QWxsb3dM\nb29wYmFjayh0cnVlKTsKICAgICAgICBjb25mLnNldEF1ZGl0b3JQZXJpb2Rp\nY0Jvb2tpZUNoZWNrSW50ZXJ2YWwoQ0hFQ0tfSU5URVJWQUwpOwogICAgICAg\nIFN0cmluZyBhZGRyID0gU3RyaW5nVXRpbHMuYWRkclRvU3RyaW5nKGJzLmdl\ndCgwKS5nZXRMb2NhbEFkZHJlc3MoKSk7CgogICAgICAgIFpvb0tlZXBlcldh\ndGNoZXJCYXNlIHcgPSBuZXcgWm9vS2VlcGVyV2F0Y2hlckJhc2UoMTAwMDAp\nOwogICAgICAgIGF1ZGl0b3Jab29rZWVwZXIgPSBaa1V0aWxzLmNyZWF0ZUNv\nbm5lY3RlZFpvb2tlZXBlckNsaWVudCgKICAgICAgICAgICAgICAgIHprVXRp\nbC5nZXRab29LZWVwZXJDb25uZWN0U3RyaW5nKCksIHcpOwoKICAgICAgICBh\ndWRpdG9yRWxlY3RvciA9IG5ldyBBdWRpdG9yRWxlY3RvcihhZGRyLCBjb25m\nLAogICAgICAgICAgICAgICAgYXVkaXRvclpvb2tlZXBlcik7CiAgICAgICAg\nYXVkaXRvckVsZWN0b3Iuc3RhcnQoKTsKICAgIH0KCiAgICBAQWZ0ZXIKICAg\nIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgdGVhckRvd24oKSB0aHJvd3Mg\nRXhjZXB0aW9uIHsKICAgICAgICBhdWRpdG9yRWxlY3Rvci5zaHV0ZG93bigp\nOwogICAgICAgIGF1ZGl0b3Jab29rZWVwZXIuY2xvc2UoKTsKCiAgICAgICAg\nc3VwZXIudGVhckRvd24oKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRlc3Qg\ndGhhdCB0aGUgcGVyaW9kaWMgYm9va2llIGNoZWNrZXIgd29ya3MKICAgICAq\nLwogICAgQFRlc3QodGltZW91dD0zMDAwMCkKICAgIHB1YmxpYyB2b2lkIHRl\nc3RQZXJpb2RpY0Jvb2tpZUNoZWNrSW50ZXJ2YWwoKSB0aHJvd3MgRXhjZXB0\naW9uIHsKICAgICAgICBMZWRnZXJNYW5hZ2VyRmFjdG9yeSBtRmFjdG9yeSA9\nIExlZGdlck1hbmFnZXJGYWN0b3J5Lm5ld0xlZGdlck1hbmFnZXJGYWN0b3J5\nKGJzQ29uZnMuZ2V0KDApLCB6a2MpOwogICAgICAgIExlZGdlck1hbmFnZXIg\nbGVkZ2VyTWFuYWdlciA9IG1GYWN0b3J5Lm5ld0xlZGdlck1hbmFnZXIoKTsK\nICAgICAgICBmaW5hbCBMZWRnZXJVbmRlcnJlcGxpY2F0aW9uTWFuYWdlciB1\nbmRlclJlcGxpY2F0aW9uTWFuYWdlciA9IG1GYWN0b3J5Lm5ld0xlZGdlclVu\nZGVycmVwbGljYXRpb25NYW5hZ2VyKCk7CiAgICAgICAgZmluYWwgaW50IG51\nbUxlZGdlcnMgPSAxOwoKICAgICAgICBMZWRnZXJIYW5kbGUgbGggPSBia2Mu\nY3JlYXRlTGVkZ2VyKDMsIDMsIERpZ2VzdFR5cGUuQ1JDMzIsICJwYXNzd2Qi\nLmdldEJ5dGVzKCkpOwogICAgICAgIExlZGdlck1ldGFkYXRhIG1kID0gTGVk\nZ2VySGFuZGxlQWRhcHRlci5nZXRMZWRnZXJNZXRhZGF0YShsaCk7CgogICAg\nICAgIExpc3Q8SW5ldFNvY2tldEFkZHJlc3M+IGVuc2VtYmxlID0gbWQuZ2V0\nRW5zZW1ibGVzKCkuZ2V0KDBMKTsKICAgICAgICBlbnNlbWJsZS5zZXQoMCwg\nbmV3IEluZXRTb2NrZXRBZGRyZXNzKCIxLjEuMS4xIiwgMTAwMCkpOwoKICAg\nICAgICBUZXN0Q2FsbGJhY2tzLkdlbmVyaWNDYWxsYmFja0Z1dHVyZTxWb2lk\nPiBjYiA9IG5ldyBUZXN0Q2FsbGJhY2tzLkdlbmVyaWNDYWxsYmFja0Z1dHVy\nZTxWb2lkPigpOwogICAgICAgIGxlZGdlck1hbmFnZXIud3JpdGVMZWRnZXJN\nZXRhZGF0YShsaC5nZXRJZCgpLCBtZCwgY2IpOwogICAgICAgIGNiLmdldCgp\nOwoKICAgICAgICBsb25nIHVuZGVyUmVwbGljYXRlZExlZGdlciA9IC0xOwog\nICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgMTA7IGkrKykgewogICAgICAg\nICAgICB1bmRlclJlcGxpY2F0ZWRMZWRnZXIgPSB1bmRlclJlcGxpY2F0aW9u\nTWFuYWdlci5wb2xsTGVkZ2VyVG9SZXJlcGxpY2F0ZSgpOwogICAgICAgICAg\nICBpZiAodW5kZXJSZXBsaWNhdGVkTGVkZ2VyICE9IC0xKSB7CiAgICAgICAg\nICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBUaHJl\nYWQuc2xlZXAoQ0hFQ0tfSU5URVJWQUwqMTAwMCk7CiAgICAgICAgfQogICAg\nICAgIGFzc2VydEVxdWFscygiTGVkZ2VyIHNob3VsZCBiZSB1bmRlciByZXBs\naWNhdGVkIiwgbGguZ2V0SWQoKSwgdW5kZXJSZXBsaWNhdGVkTGVkZ2VyKTsK\nICAgIH0KfQo=\n","encoding":"base64"}

