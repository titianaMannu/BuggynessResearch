{"sha":"670d42c96f5a3c11474f39143d049bc2ed3374b5","node_id":"MDQ6QmxvYjE1NzU5NTY6NjcwZDQyYzk2ZjVhM2MxMTQ3NGYzOTE0M2QwNDliYzJlZDMzNzRiNQ==","size":8910,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/670d42c96f5a3c11474f39143d049bc2ed3374b5","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIudGVzdDsKCi8qCiAqCiAq\nIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAo\nQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNl\nIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRpc3RyaWJ1\ndGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9u\nCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBs\naWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUg\nTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIpOyB5b3Ug\nbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlCiAq\nIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2Yg\ndGhlIExpY2Vuc2UgYXQKICoKICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcv\nbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5\nIGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAogKiBz\nb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0\ncmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJB\nTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVyIGV4\ncHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlCiAq\nIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQg\nbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqCiAqLwoKaW1w\nb3J0IGphdmEuaW8uRmlsZTsKaW1wb3J0IGphdmEubmV0LkluZXRTb2NrZXRB\nZGRyZXNzOwppbXBvcnQgamF2YS5uaW8uQnl0ZUJ1ZmZlcjsKaW1wb3J0IGph\ndmEudXRpbC5BcnJheXM7CmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5F\neGVjdXRvcnM7CgppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmJ1ZmZlci5DaGFu\nbmVsQnVmZmVyOwppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmJ1ZmZlci5DaGFu\nbmVsQnVmZmVyczsKaW1wb3J0IG9yZy5qYm9zcy5uZXR0eS5jaGFubmVsLnNv\nY2tldC5DbGllbnRTb2NrZXRDaGFubmVsRmFjdG9yeTsKaW1wb3J0IG9yZy5q\nYm9zcy5uZXR0eS5jaGFubmVsLnNvY2tldC5uaW8uTmlvQ2xpZW50U29ja2V0\nQ2hhbm5lbEZhY3Rvcnk7CmltcG9ydCBvcmcuanVuaXQuVGVzdDsKaW1wb3J0\nIG9yZy5hcGFjaGUuYm9va2tlZXBlci5jb25mLkNsaWVudENvbmZpZ3VyYXRp\nb247CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY29uZi5TZXJ2ZXJD\nb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNs\naWVudC5CS0V4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBl\nci5wcm90by5Cb29raWVDbGllbnQ7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2tr\nZWVwZXIucHJvdG8uQm9va2llUHJvdG9jb2w7CmltcG9ydCBvcmcuYXBhY2hl\nLmJvb2trZWVwZXIucHJvdG8uQm9va2llU2VydmVyOwppbXBvcnQgb3JnLmFw\nYWNoZS5ib29ra2VlcGVyLnByb3RvLkJvb2trZWVwZXJJbnRlcm5hbENhbGxi\nYWNrcy5SZWFkRW50cnlDYWxsYmFjazsKaW1wb3J0IG9yZy5hcGFjaGUuYm9v\na2tlZXBlci5wcm90by5Cb29ra2VlcGVySW50ZXJuYWxDYWxsYmFja3MuV3Jp\ndGVDYWxsYmFjazsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci51dGls\nLk9yZGVyZWRTYWZlRXhlY3V0b3I7CmltcG9ydCBvcmcuc2xmNGouTG9nZ2Vy\nOwppbXBvcnQgb3JnLnNsZjRqLkxvZ2dlckZhY3Rvcnk7CgppbXBvcnQganVu\naXQuZnJhbWV3b3JrLlRlc3RDYXNlOwoKcHVibGljIGNsYXNzIEJvb2tpZUNs\naWVudFRlc3QgZXh0ZW5kcyBUZXN0Q2FzZSB7CiAgICBzdGF0aWMgTG9nZ2Vy\nIExPRyA9IExvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKEJvb2tpZUNsaWVudFRl\nc3QuY2xhc3MpOwogICAgQm9va2llU2VydmVyIGJzOwogICAgRmlsZSB0bXBE\naXI7CiAgICBwdWJsaWMgaW50IHBvcnQgPSAxMzY0NTsKICAgIHB1YmxpYyBD\nbGllbnRTb2NrZXRDaGFubmVsRmFjdG9yeSBjaGFubmVsRmFjdG9yeTsKICAg\nIHB1YmxpYyBPcmRlcmVkU2FmZUV4ZWN1dG9yIGV4ZWN1dG9yOwogICAgU2Vy\ndmVyQ29uZmlndXJhdGlvbiBjb25mOwoKICAgIEBPdmVycmlkZQogICAgcHVi\nbGljIHZvaWQgc2V0VXAoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICB0\nbXBEaXIgPSBGaWxlLmNyZWF0ZVRlbXBGaWxlKCJib29raWUiLCAidGVzdCIp\nOwogICAgICAgIHRtcERpci5kZWxldGUoKTsKICAgICAgICB0bXBEaXIubWtk\naXIoKTsKCiAgICAgICAgLy8gU2luY2UgdGhpcyB0ZXN0IGRvZXMgbm90IHJl\nbHkgb24gdGhlIEJvb2tLZWVwZXIgY2xpZW50IG5lZWRpbmcgdG8KICAgICAg\nICAvLyBrbm93IHZpYSBab29LZWVwZXIgd2hpY2ggQm9va2llcyBhcmUgYXZh\naWxhYmxlLCBva2F5LCBzbyBwYXNzIGluIG51bGwKICAgICAgICAvLyBmb3Ig\ndGhlIHprU2VydmVycyBpbnB1dCBwYXJhbWV0ZXIgd2hlbiBjb25zdHJ1Y3Rp\nbmcgdGhlIEJvb2tpZVNlcnZlci4KICAgICAgICBTZXJ2ZXJDb25maWd1cmF0\naW9uIGNvbmYgPSBuZXcgU2VydmVyQ29uZmlndXJhdGlvbigpOwogICAgICAg\nIGNvbmYuc2V0WmtTZXJ2ZXJzKG51bGwpLnNldEJvb2tpZVBvcnQocG9ydCkK\nICAgICAgICAgICAgLnNldEpvdXJuYWxEaXJOYW1lKHRtcERpci5nZXRQYXRo\nKCkpCiAgICAgICAgICAgIC5zZXRBbGxvd0xvb3BiYWNrKHRydWUpCiAgICAg\nICAgICAgIC5zZXRMZWRnZXJEaXJOYW1lcyhuZXcgU3RyaW5nW10geyB0bXBE\naXIuZ2V0UGF0aCgpIH0pOwogICAgICAgIGJzID0gbmV3IEJvb2tpZVNlcnZl\ncihjb25mKTsKICAgICAgICBicy5zdGFydCgpOwogICAgICAgIGNoYW5uZWxG\nYWN0b3J5ID0gbmV3IE5pb0NsaWVudFNvY2tldENoYW5uZWxGYWN0b3J5KEV4\nZWN1dG9ycy5uZXdDYWNoZWRUaHJlYWRQb29sKCksIEV4ZWN1dG9ycwogICAg\nICAgICAgICAgICAgLm5ld0NhY2hlZFRocmVhZFBvb2woKSk7CiAgICAgICAg\nZXhlY3V0b3IgPSBuZXcgT3JkZXJlZFNhZmVFeGVjdXRvcigyKTsKICAgIH0K\nCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIHRlYXJEb3duKCkgdGhy\nb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgYnMuc2h1dGRvd24oKTsKICAgICAg\nICByZWN1cnNpdmVEZWxldGUodG1wRGlyKTsKICAgICAgICBjaGFubmVsRmFj\ndG9yeS5yZWxlYXNlRXh0ZXJuYWxSZXNvdXJjZXMoKTsKICAgICAgICBleGVj\ndXRvci5zaHV0ZG93bigpOwogICAgfQoKICAgIHByaXZhdGUgc3RhdGljIHZv\naWQgcmVjdXJzaXZlRGVsZXRlKEZpbGUgZGlyKSB7CiAgICAgICAgRmlsZSBj\naGlsZHJlbltdID0gZGlyLmxpc3RGaWxlcygpOwogICAgICAgIGlmIChjaGls\nZHJlbiAhPSBudWxsKSB7CiAgICAgICAgICAgIGZvciAoRmlsZSBjaGlsZCA6\nIGNoaWxkcmVuKSB7CiAgICAgICAgICAgICAgICByZWN1cnNpdmVEZWxldGUo\nY2hpbGQpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGRpci5k\nZWxldGUoKTsKICAgIH0KCiAgICBzdGF0aWMgY2xhc3MgUmVzdWx0U3RydWN0\nIHsKICAgICAgICBpbnQgcmM7CiAgICAgICAgQnl0ZUJ1ZmZlciBlbnRyeTsK\nICAgIH0KCiAgICBSZWFkRW50cnlDYWxsYmFjayByZWNiID0gbmV3IFJlYWRF\nbnRyeUNhbGxiYWNrKCkgewoKICAgICAgICBwdWJsaWMgdm9pZCByZWFkRW50\ncnlDb21wbGV0ZShpbnQgcmMsIGxvbmcgbGVkZ2VySWQsIGxvbmcgZW50cnlJ\nZCwgQ2hhbm5lbEJ1ZmZlciBiYiwgT2JqZWN0IGN0eCkgewogICAgICAgICAg\nICBSZXN1bHRTdHJ1Y3QgcnMgPSAoUmVzdWx0U3RydWN0KSBjdHg7CiAgICAg\nICAgICAgIHN5bmNocm9uaXplZCAocnMpIHsKICAgICAgICAgICAgICAgIHJz\nLnJjID0gcmM7CiAgICAgICAgICAgICAgICBpZiAoYmIgIT0gbnVsbCkgewog\nICAgICAgICAgICAgICAgICAgIGJiLnJlYWRlckluZGV4KDE2KTsKICAgICAg\nICAgICAgICAgICAgICBycy5lbnRyeSA9IGJiLnRvQnl0ZUJ1ZmZlcigpOwog\nICAgICAgICAgICAgICAgICAgIHJzLm5vdGlmeUFsbCgpOwogICAgICAgICAg\nICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgIH07CgogICAg\nV3JpdGVDYWxsYmFjayB3cmNiID0gbmV3IFdyaXRlQ2FsbGJhY2soKSB7CiAg\nICAgICAgcHVibGljIHZvaWQgd3JpdGVDb21wbGV0ZShpbnQgcmMsIGxvbmcg\nbGVkZ2VySWQsIGxvbmcgZW50cnlJZCwgSW5ldFNvY2tldEFkZHJlc3MgYWRk\nciwgT2JqZWN0IGN0eCkgewogICAgICAgICAgICBpZiAoY3R4ICE9IG51bGwp\nIHsKICAgICAgICAgICAgICAgIHN5bmNocm9uaXplZCAoY3R4KSB7CiAgICAg\nICAgICAgICAgICAgICAgY3R4Lm5vdGlmeUFsbCgpOwogICAgICAgICAgICAg\nICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKCiAgICBAVGVz\ndCh0aW1lb3V0PTYwMDAwKQogICAgcHVibGljIHZvaWQgdGVzdFdyaXRlR2Fw\ncygpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIGZpbmFsIE9iamVjdCBu\nb3RpZnlPYmplY3QgPSBuZXcgT2JqZWN0KCk7CiAgICAgICAgYnl0ZVtdIHBh\nc3N3ZCA9IG5ldyBieXRlWzIwXTsKICAgICAgICBBcnJheXMuZmlsbChwYXNz\nd2QsIChieXRlKSAnYScpOwogICAgICAgIEluZXRTb2NrZXRBZGRyZXNzIGFk\nZHIgPSBuZXcgSW5ldFNvY2tldEFkZHJlc3MoIjEyNy4wLjAuMSIsIHBvcnQp\nOwogICAgICAgIFJlc3VsdFN0cnVjdCBhcmMgPSBuZXcgUmVzdWx0U3RydWN0\nKCk7CgogICAgICAgIEJvb2tpZUNsaWVudCBiYyA9IG5ldyBCb29raWVDbGll\nbnQobmV3IENsaWVudENvbmZpZ3VyYXRpb24oKSwgY2hhbm5lbEZhY3Rvcnks\nIGV4ZWN1dG9yKTsKICAgICAgICBDaGFubmVsQnVmZmVyIGJiOwogICAgICAg\nIGJiID0gY3JlYXRlQnl0ZUJ1ZmZlcigxLCAxLCAxKTsKICAgICAgICBiYy5h\nZGRFbnRyeShhZGRyLCAxLCBwYXNzd2QsIDEsIGJiLCB3cmNiLCBhcmMsIEJv\nb2tpZVByb3RvY29sLkZMQUdfTk9ORSk7CiAgICAgICAgc3luY2hyb25pemVk\nIChhcmMpIHsKICAgICAgICAgICAgYXJjLndhaXQoMTAwMCk7CiAgICAgICAg\nICAgIGJjLnJlYWRFbnRyeShhZGRyLCAxLCAxLCByZWNiLCBhcmMpOwogICAg\nICAgICAgICBhcmMud2FpdCgxMDAwKTsKICAgICAgICAgICAgYXNzZXJ0RXF1\nYWxzKDAsIGFyYy5yYyk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscygxLCBh\ncmMuZW50cnkuZ2V0SW50KCkpOwogICAgICAgIH0KICAgICAgICBiYiA9IGNy\nZWF0ZUJ5dGVCdWZmZXIoMiwgMSwgMik7CiAgICAgICAgYmMuYWRkRW50cnko\nYWRkciwgMSwgcGFzc3dkLCAyLCBiYiwgd3JjYiwgbnVsbCwgQm9va2llUHJv\ndG9jb2wuRkxBR19OT05FKTsKICAgICAgICBiYiA9IGNyZWF0ZUJ5dGVCdWZm\nZXIoMywgMSwgMyk7CiAgICAgICAgYmMuYWRkRW50cnkoYWRkciwgMSwgcGFz\nc3dkLCAzLCBiYiwgd3JjYiwgbnVsbCwgQm9va2llUHJvdG9jb2wuRkxBR19O\nT05FKTsKICAgICAgICBiYiA9IGNyZWF0ZUJ5dGVCdWZmZXIoNSwgMSwgNSk7\nCiAgICAgICAgYmMuYWRkRW50cnkoYWRkciwgMSwgcGFzc3dkLCA1LCBiYiwg\nd3JjYiwgbnVsbCwgQm9va2llUHJvdG9jb2wuRkxBR19OT05FKTsKICAgICAg\nICBiYiA9IGNyZWF0ZUJ5dGVCdWZmZXIoNywgMSwgNyk7CiAgICAgICAgYmMu\nYWRkRW50cnkoYWRkciwgMSwgcGFzc3dkLCA3LCBiYiwgd3JjYiwgbnVsbCwg\nQm9va2llUHJvdG9jb2wuRkxBR19OT05FKTsKICAgICAgICBzeW5jaHJvbml6\nZWQgKG5vdGlmeU9iamVjdCkgewogICAgICAgICAgICBiYiA9IGNyZWF0ZUJ5\ndGVCdWZmZXIoMTEsIDEsIDExKTsKICAgICAgICAgICAgYmMuYWRkRW50cnko\nYWRkciwgMSwgcGFzc3dkLCAxMSwgYmIsIHdyY2IsIG5vdGlmeU9iamVjdCwg\nQm9va2llUHJvdG9jb2wuRkxBR19OT05FKTsKICAgICAgICAgICAgbm90aWZ5\nT2JqZWN0LndhaXQoKTsKICAgICAgICB9CiAgICAgICAgc3luY2hyb25pemVk\nIChhcmMpIHsKICAgICAgICAgICAgYmMucmVhZEVudHJ5KGFkZHIsIDEsIDYs\nIHJlY2IsIGFyYyk7CiAgICAgICAgICAgIGFyYy53YWl0KDEwMDApOwogICAg\nICAgICAgICBhc3NlcnRFcXVhbHMoQktFeGNlcHRpb24uQ29kZS5Ob1N1Y2hF\nbnRyeUV4Y2VwdGlvbiwgYXJjLnJjKTsKICAgICAgICB9CiAgICAgICAgc3lu\nY2hyb25pemVkIChhcmMpIHsKICAgICAgICAgICAgYmMucmVhZEVudHJ5KGFk\nZHIsIDEsIDcsIHJlY2IsIGFyYyk7CiAgICAgICAgICAgIGFyYy53YWl0KDEw\nMDApOwogICAgICAgICAgICBhc3NlcnRFcXVhbHMoMCwgYXJjLnJjKTsKICAg\nICAgICAgICAgYXNzZXJ0RXF1YWxzKDcsIGFyYy5lbnRyeS5nZXRJbnQoKSk7\nCiAgICAgICAgfQogICAgICAgIHN5bmNocm9uaXplZCAoYXJjKSB7CiAgICAg\nICAgICAgIGJjLnJlYWRFbnRyeShhZGRyLCAxLCAxLCByZWNiLCBhcmMpOwog\nICAgICAgICAgICBhcmMud2FpdCgxMDAwKTsKICAgICAgICAgICAgYXNzZXJ0\nRXF1YWxzKDAsIGFyYy5yYyk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscygx\nLCBhcmMuZW50cnkuZ2V0SW50KCkpOwogICAgICAgIH0KICAgICAgICBzeW5j\naHJvbml6ZWQgKGFyYykgewogICAgICAgICAgICBiYy5yZWFkRW50cnkoYWRk\nciwgMSwgMiwgcmVjYiwgYXJjKTsKICAgICAgICAgICAgYXJjLndhaXQoMTAw\nMCk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscygwLCBhcmMucmMpOwogICAg\nICAgICAgICBhc3NlcnRFcXVhbHMoMiwgYXJjLmVudHJ5LmdldEludCgpKTsK\nICAgICAgICB9CiAgICAgICAgc3luY2hyb25pemVkIChhcmMpIHsKICAgICAg\nICAgICAgYmMucmVhZEVudHJ5KGFkZHIsIDEsIDMsIHJlY2IsIGFyYyk7CiAg\nICAgICAgICAgIGFyYy53YWl0KDEwMDApOwogICAgICAgICAgICBhc3NlcnRF\ncXVhbHMoMCwgYXJjLnJjKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKDMs\nIGFyYy5lbnRyeS5nZXRJbnQoKSk7CiAgICAgICAgfQogICAgICAgIHN5bmNo\ncm9uaXplZCAoYXJjKSB7CiAgICAgICAgICAgIGJjLnJlYWRFbnRyeShhZGRy\nLCAxLCA0LCByZWNiLCBhcmMpOwogICAgICAgICAgICBhcmMud2FpdCgxMDAw\nKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKEJLRXhjZXB0aW9uLkNvZGUu\nTm9TdWNoRW50cnlFeGNlcHRpb24sIGFyYy5yYyk7CiAgICAgICAgfQogICAg\nICAgIHN5bmNocm9uaXplZCAoYXJjKSB7CiAgICAgICAgICAgIGJjLnJlYWRF\nbnRyeShhZGRyLCAxLCAxMSwgcmVjYiwgYXJjKTsKICAgICAgICAgICAgYXJj\nLndhaXQoMTAwMCk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscygwLCBhcmMu\ncmMpOwogICAgICAgICAgICBhc3NlcnRFcXVhbHMoMTEsIGFyYy5lbnRyeS5n\nZXRJbnQoKSk7CiAgICAgICAgfQogICAgICAgIHN5bmNocm9uaXplZCAoYXJj\nKSB7CiAgICAgICAgICAgIGJjLnJlYWRFbnRyeShhZGRyLCAxLCA1LCByZWNi\nLCBhcmMpOwogICAgICAgICAgICBhcmMud2FpdCgxMDAwKTsKICAgICAgICAg\nICAgYXNzZXJ0RXF1YWxzKDAsIGFyYy5yYyk7CiAgICAgICAgICAgIGFzc2Vy\ndEVxdWFscyg1LCBhcmMuZW50cnkuZ2V0SW50KCkpOwogICAgICAgIH0KICAg\nICAgICBzeW5jaHJvbml6ZWQgKGFyYykgewogICAgICAgICAgICBiYy5yZWFk\nRW50cnkoYWRkciwgMSwgMTAsIHJlY2IsIGFyYyk7CiAgICAgICAgICAgIGFy\nYy53YWl0KDEwMDApOwogICAgICAgICAgICBhc3NlcnRFcXVhbHMoQktFeGNl\ncHRpb24uQ29kZS5Ob1N1Y2hFbnRyeUV4Y2VwdGlvbiwgYXJjLnJjKTsKICAg\nICAgICB9CiAgICAgICAgc3luY2hyb25pemVkIChhcmMpIHsKICAgICAgICAg\nICAgYmMucmVhZEVudHJ5KGFkZHIsIDEsIDEyLCByZWNiLCBhcmMpOwogICAg\nICAgICAgICBhcmMud2FpdCgxMDAwKTsKICAgICAgICAgICAgYXNzZXJ0RXF1\nYWxzKEJLRXhjZXB0aW9uLkNvZGUuTm9TdWNoRW50cnlFeGNlcHRpb24sIGFy\nYy5yYyk7CiAgICAgICAgfQogICAgICAgIHN5bmNocm9uaXplZCAoYXJjKSB7\nCiAgICAgICAgICAgIGJjLnJlYWRFbnRyeShhZGRyLCAxLCAxMywgcmVjYiwg\nYXJjKTsKICAgICAgICAgICAgYXJjLndhaXQoMTAwMCk7CiAgICAgICAgICAg\nIGFzc2VydEVxdWFscyhCS0V4Y2VwdGlvbi5Db2RlLk5vU3VjaEVudHJ5RXhj\nZXB0aW9uLCBhcmMucmMpOwogICAgICAgIH0KICAgIH0KCiAgICBwcml2YXRl\nIENoYW5uZWxCdWZmZXIgY3JlYXRlQnl0ZUJ1ZmZlcihpbnQgaSwgbG9uZyBs\naWQsIGxvbmcgZWlkKSB7CiAgICAgICAgQnl0ZUJ1ZmZlciBiYjsKICAgICAg\nICBiYiA9IEJ5dGVCdWZmZXIuYWxsb2NhdGUoNCArIDE2KTsKICAgICAgICBi\nYi5wdXRMb25nKGxpZCk7CiAgICAgICAgYmIucHV0TG9uZyhlaWQpOwogICAg\nICAgIGJiLnB1dEludChpKTsKICAgICAgICBiYi5mbGlwKCk7CiAgICAgICAg\ncmV0dXJuIENoYW5uZWxCdWZmZXJzLndyYXBwZWRCdWZmZXIoYmIpOwogICAg\nfQoKICAgIEBUZXN0KHRpbWVvdXQ9NjAwMDApCiAgICBwdWJsaWMgdm9pZCB0\nZXN0Tm9MZWRnZXIoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBSZXN1\nbHRTdHJ1Y3QgYXJjID0gbmV3IFJlc3VsdFN0cnVjdCgpOwogICAgICAgIElu\nZXRTb2NrZXRBZGRyZXNzIGFkZHIgPSBuZXcgSW5ldFNvY2tldEFkZHJlc3Mo\nIjEyNy4wLjAuMSIsIHBvcnQpOwogICAgICAgIEJvb2tpZUNsaWVudCBiYyA9\nIG5ldyBCb29raWVDbGllbnQobmV3IENsaWVudENvbmZpZ3VyYXRpb24oKSwg\nY2hhbm5lbEZhY3RvcnksIGV4ZWN1dG9yKTsKICAgICAgICBzeW5jaHJvbml6\nZWQgKGFyYykgewogICAgICAgICAgICBiYy5yZWFkRW50cnkoYWRkciwgMiwg\nMTMsIHJlY2IsIGFyYyk7CiAgICAgICAgICAgIGFyYy53YWl0KDEwMDApOwog\nICAgICAgICAgICBhc3NlcnRFcXVhbHMoQktFeGNlcHRpb24uQ29kZS5Ob1N1\nY2hFbnRyeUV4Y2VwdGlvbiwgYXJjLnJjKTsKICAgICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

