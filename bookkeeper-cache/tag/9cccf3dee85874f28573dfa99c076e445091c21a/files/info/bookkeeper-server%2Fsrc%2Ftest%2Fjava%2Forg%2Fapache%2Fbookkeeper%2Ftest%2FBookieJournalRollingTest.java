{"sha":"54a85bcb8e6a37293f4710f15249b35c5f305267","node_id":"MDQ6QmxvYjE1NzU5NTY6NTRhODViY2I4ZTZhMzcyOTNmNDcxMGYxNTI0OWIzNWM1ZjMwNTI2Nw==","size":9069,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/54a85bcb8e6a37293f4710f15249b35c5f305267","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIudGVzdDsKCi8qCiAqCiAq\nIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAo\nQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNl\nIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRpc3RyaWJ1\ndGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9u\nCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBs\naWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUg\nTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIpOyB5b3Ug\nbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlCiAq\nIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2Yg\ndGhlIExpY2Vuc2UgYXQKICoKICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcv\nbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5\nIGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAogKiBz\nb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0\ncmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJB\nTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVyIGV4\ncHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlCiAq\nIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQg\nbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqCiAqLwppbXBv\ncnQgamF2YS5pby5GaWxlOwppbXBvcnQgamF2YS51dGlsLkVudW1lcmF0aW9u\nOwppbXBvcnQgamF2YS51dGlsLkxpc3Q7CgppbXBvcnQgb3JnLmFwYWNoZS5i\nb29ra2VlcGVyLmNvbmYuU2VydmVyQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9y\nZy5hcGFjaGUuYm9va2tlZXBlci5ib29raWUuQm9va2llOwppbXBvcnQgb3Jn\nLmFwYWNoZS5ib29ra2VlcGVyLmNsaWVudC5MZWRnZXJFbnRyeTsKaW1wb3J0\nIG9yZy5hcGFjaGUuYm9va2tlZXBlci5jbGllbnQuTGVkZ2VySGFuZGxlOwpp\nbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNsaWVudC5Cb29rS2VlcGVy\nLkRpZ2VzdFR5cGU7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIucHJv\ndG8uQm9va2llU2VydmVyOwoKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXI7Cmlt\ncG9ydCBvcmcuc2xmNGouTG9nZ2VyRmFjdG9yeTsKCmltcG9ydCBvcmcuanVu\naXQuQXNzZXJ0OwppbXBvcnQgb3JnLmp1bml0LkFmdGVyOwppbXBvcnQgb3Jn\nLmp1bml0LkJlZm9yZTsKaW1wb3J0IG9yZy5qdW5pdC5UZXN0OwoKLyoqCiAq\nIFRoaXMgY2xhc3MgdGVzdHMgdGhhdCBib29raWUgcm9sbGluZyBqb3VybmFs\ncwogKi8KcHVibGljIGNsYXNzIEJvb2tpZUpvdXJuYWxSb2xsaW5nVGVzdCBl\neHRlbmRzIEJvb2tLZWVwZXJDbHVzdGVyVGVzdENhc2UgewogICAgc3RhdGlj\nIExvZ2dlciBMT0cgPSBMb2dnZXJGYWN0b3J5LmdldExvZ2dlcihCb29raWVK\nb3VybmFsUm9sbGluZ1Rlc3QuY2xhc3MpOwoKICAgIERpZ2VzdFR5cGUgZGln\nZXN0VHlwZTsKCiAgICBwdWJsaWMgQm9va2llSm91cm5hbFJvbGxpbmdUZXN0\nKCkgewogICAgICAgIHN1cGVyKDMpOwogICAgICAgIHRoaXMuZGlnZXN0VHlw\nZSA9IERpZ2VzdFR5cGUuQ1JDMzI7CiAgICB9CgogICAgQEJlZm9yZQogICAg\nQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpIHRocm93cyBFeGNl\ncHRpb24gewogICAgICAgIC8vIFNldCB1cCB0aGUgY29uZmlndXJhdGlvbiBw\ncm9wZXJ0aWVzIG5lZWRlZC4KICAgICAgICBiYXNlQ29uZi5zZXRNYXhKb3Vy\nbmFsU2l6ZSgxKTsKICAgICAgICBiYXNlQ29uZi5zZXRNYXhCYWNrdXBKb3Vy\nbmFscygxKTsKICAgICAgICBzdXBlci5zZXRVcCgpOwogICAgfQoKICAgIEBB\nZnRlcgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCB0ZWFyRG93bigp\nIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIHN1cGVyLnRlYXJEb3duKCk7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBDb21tb24gbWV0aG9kIHRvIGNyZWF0\nZSBsZWRnZXJzIGFuZCB3cml0ZSBlbnRyaWVzIHRvIHRoZW0uCiAgICAgKi8K\nICAgIHByaXZhdGUgTGVkZ2VySGFuZGxlW10gd3JpdGVMZWRnZXJFbnRyaWVz\nKGludCBudW1MZWRnZXJzLCBpbnQgbXNnU2l6ZSwgaW50IG51bU1zZ3MpIHRo\ncm93cyBFeGNlcHRpb24gewogICAgICAgIC8vIENyZWF0ZSB0aGUgbGVkZ2Vy\ncwogICAgICAgIExlZGdlckhhbmRsZVtdIGxocyA9IG5ldyBMZWRnZXJIYW5k\nbGVbbnVtTGVkZ2Vyc107CiAgICAgICAgbG9uZ1tdIGxlZGdlcklkcyA9IG5l\ndyBsb25nW251bUxlZGdlcnNdOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBp\nIDwgbnVtTGVkZ2VyczsgaSsrKSB7CiAgICAgICAgICAgIGxoc1tpXSA9IGJr\nYy5jcmVhdGVMZWRnZXIoZGlnZXN0VHlwZSwgIiIuZ2V0Qnl0ZXMoKSk7CiAg\nICAgICAgICAgIGxlZGdlcklkc1tpXSA9IGxoc1tpXS5nZXRJZCgpOwogICAg\nICAgIH0KICAgICAgICB3cml0ZUxlZGdlckVudHJpZXMobGhzLCBtc2dTaXpl\nLCBudW1Nc2dzKTsKICAgICAgICAvLyBSZXR1cm4gdGhlIGxlZGdlciBoYW5k\nbGVzIHRvIHRoZSBpbnNlcnRlZCBsZWRnZXJzIGFuZCBlbnRyaWVzCiAgICAg\nICAgcmV0dXJuIGxoczsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgd3JpdGVM\nZWRnZXJFbnRyaWVzKExlZGdlckhhbmRsZVtdIGxocywgaW50IG1zZ1NpemUs\nIGludCBudW1Nc2dzKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICAvLyBD\ncmVhdGUgYSBkdW1teSBtZXNzYWdlIHN0cmluZyB0byB3cml0ZSBhcyBsZWRn\nZXIgZW50cmllcwogICAgICAgIFN0cmluZ0J1aWxkZXIgbXNnU0IgPSBuZXcg\nU3RyaW5nQnVpbGRlcigpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwg\nbXNnU2l6ZTsgaSsrKSB7CiAgICAgICAgICAgIG1zZ1NCLmFwcGVuZCgiYSIp\nOwogICAgICAgIH0KICAgICAgICBTdHJpbmcgbXNnID0gbXNnU0IudG9TdHJp\nbmcoKTsKCiAgICAgICAgLy8gV3JpdGUgYWxsIG9mIHRoZSBlbnRyaWVzIGZv\nciBhbGwgb2YgdGhlIGxlZGdlcnMKICAgICAgICBmb3IgKGludCBpID0gMDsg\naSA8IG51bU1zZ3M7IGkrKykgewogICAgICAgICAgICBmb3IgKGludCBqID0g\nMDsgaiA8IGxocy5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgU3Ry\naW5nQnVpbGRlciBzYiA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7CiAgICAgICAg\nICAgICAgICBzYi5hcHBlbmQobGhzW2pdLmdldElkKCkpLmFwcGVuZCgnLScp\nLmFwcGVuZChpKS5hcHBlbmQoJy0nKQogICAgICAgICAgICAgICAgICAuYXBw\nZW5kKG1zZyk7CiAgICAgICAgICAgICAgICBsaHNbal0uYWRkRW50cnkoc2Iu\ndG9TdHJpbmcoKS5nZXRCeXRlcygpKTsKICAgICAgICAgICAgfQogICAgICAg\nIH0KICAgIH0KCiAgICBwcml2YXRlIHZvaWQgdmFsaWRMZWRnZXJFbnRyaWVz\nKGxvbmdbXSBsZWRnZXJJZHMsIGludCBtc2dTaXplLCBpbnQgbnVtTXNncykg\ndGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgLy8gT3BlbiB0aGUgbGVkZ2Vy\ncwogICAgICAgIExlZGdlckhhbmRsZVtdIGxocyA9IG5ldyBMZWRnZXJIYW5k\nbGVbbGVkZ2VySWRzLmxlbmd0aF07CiAgICAgICAgZm9yIChpbnQgaSA9IDA7\nIGkgPCBsaHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgbGhzW2ldID0g\nYmtjLm9wZW5MZWRnZXIobGVkZ2VySWRzW2ldLCBkaWdlc3RUeXBlLCAiIi5n\nZXRCeXRlcygpKTsKICAgICAgICB9CgogICAgICAgIFN0cmluZ0J1aWxkZXIg\nbXNnU0IgPSBuZXcgU3RyaW5nQnVpbGRlcigpOwogICAgICAgIGZvciAoaW50\nIGkgPSAwOyBpIDwgbXNnU2l6ZTsgaSsrKSB7CiAgICAgICAgICAgIG1zZ1NC\nLmFwcGVuZCgiYSIpOwogICAgICAgIH0KICAgICAgICBTdHJpbmcgbXNnID0g\nbXNnU0IudG9TdHJpbmcoKTsKCiAgICAgICAgaW50IG51bVRvUmVhZCA9IDEw\nOwogICAgICAgIC8vIHJlYWQgYWxsIG9mIHRoZSBlbnRyaWVzIGZvciBhbGwg\ndGhlIGxlZGdlcnMKICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IGxocy5s\nZW5ndGg7IGorKykgewogICAgICAgICAgICBpbnQgc3RhcnQgPSAwOwogICAg\nICAgICAgICBpbnQgcmVhZCA9IE1hdGgubWluKG51bVRvUmVhZCwgbnVtTXNn\ncyAtIHN0YXJ0KTsKICAgICAgICAgICAgaW50IGVuZCA9IHN0YXJ0ICsgcmVh\nZCAtIDE7CiAgICAgICAgICAgIGludCBlbnRyeUlkID0gMDsKICAgICAgICAg\nICAgaWYgKExPRy5pc0RlYnVnRW5hYmxlZCgpKSB7CiAgICAgICAgICAgICAg\nICBMT0cuZGVidWcoIlZhbGlkYXRpbmcgRW50cmllcyBvZiBMZWRnZXIgIiAr\nIGxlZGdlcklkc1tqXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgd2hp\nbGUgKHN0YXJ0IDwgbnVtTXNncykgewogICAgICAgICAgICAgICAgRW51bWVy\nYXRpb248TGVkZ2VyRW50cnk+IHNlcSA9IGxoc1tqXS5yZWFkRW50cmllcyhz\ndGFydCwgZW5kKTsKICAgICAgICAgICAgICAgIGFzc2VydFRydWUoIkVudW1l\ncmF0aW9uIG9mIGxlZGdlciBlbnRyaWVzIGhhcyBubyBlbGVtZW50Iiwgc2Vx\nLmhhc01vcmVFbGVtZW50cygpID09IHRydWUpOwogICAgICAgICAgICAgICAg\nd2hpbGUgKHNlcS5oYXNNb3JlRWxlbWVudHMoKSkgewogICAgICAgICAgICAg\nICAgICAgIExlZGdlckVudHJ5IGUgPSBzZXEubmV4dEVsZW1lbnQoKTsKICAg\nICAgICAgICAgICAgICAgICBhc3NlcnRFcXVhbHMoZW50cnlJZCwgZS5nZXRF\nbnRyeUlkKCkpOwoKICAgICAgICAgICAgICAgICAgICBTdHJpbmdCdWlsZGVy\nIHNiID0gbmV3IFN0cmluZ0J1aWxkZXIoKTsKICAgICAgICAgICAgICAgICAg\nICBzYi5hcHBlbmQobGVkZ2VySWRzW2pdKS5hcHBlbmQoJy0nKS5hcHBlbmQo\nZW50cnlJZCkuYXBwZW5kKCctJykKICAgICAgICAgICAgICAgICAgICAgIC5h\ncHBlbmQobXNnKTsKICAgICAgICAgICAgICAgICAgICBBc3NlcnQuYXNzZXJ0\nQXJyYXlFcXVhbHMoc2IudG9TdHJpbmcoKS5nZXRCeXRlcygpLCBlLmdldEVu\ndHJ5KCkpOwogICAgICAgICAgICAgICAgICAgIGVudHJ5SWQrKzsKICAgICAg\nICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGFzc2VydEVxdWFscyhlbnRy\neUlkIC0gMSwgZW5kKTsKICAgICAgICAgICAgICAgIHN0YXJ0ID0gZW5kICsg\nMTsKICAgICAgICAgICAgICAgIHJlYWQgPSBNYXRoLm1pbihudW1Ub1JlYWQs\nIG51bU1zZ3MgLSBzdGFydCk7CiAgICAgICAgICAgICAgICBlbmQgPSBzdGFy\ndCArIHJlYWQgLSAxOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoK\nICAgIC8qKgogICAgICogVGhpcyB0ZXN0IHdyaXRlcyBlbm91Z2ggbGVkZ2Vy\nIGVudHJpZXMgdG8gcm9sbCBvdmVyIHRoZSBqb3VybmFscwogICAgICoKICAg\nICAqIEl0IHdpbGwgdGhlbiBrZWVwIG9ubHkgMSBqb3VybmFsIGZpbGUgYmVm\nb3JlIGxhc3QgbWFya2VkIGpvdXJuYWwKICAgICAqCiAgICAgKiBAdGhyb3dz\nIEV4Y2VwdGlvbgogICAgICovCiAgICBAVGVzdCh0aW1lb3V0PTYwMDAwKQog\nICAgcHVibGljIHZvaWQgdGVzdEpvdXJuYWxSb2xsaW5nKCkgdGhyb3dzIEV4\nY2VwdGlvbiB7CiAgICAgICAgaWYgKExPRy5pc0RlYnVnRW5hYmxlZCgpKSB7\nCiAgICAgICAgICAgIExPRy5kZWJ1ZygiVGVzdGluZyBKb3VybmFsIFJvbGxp\nbmciKTsKICAgICAgICB9CiAgICAgICAgLy8gV3JpdGUgZW5vdWdoIGxlZGdl\nciBlbnRyaWVzIHNvIHRoYXQgd2Ugcm9sbCBvdmVyIGpvdXJuYWxzCiAgICAg\nICAgTGVkZ2VySGFuZGxlW10gbGhzID0gd3JpdGVMZWRnZXJFbnRyaWVzKDQs\nIDEwMjQsIDEwMjQpOwogICAgICAgIGxvbmdbXSBsZWRnZXJJZHMgPSBuZXcg\nbG9uZ1tsaHMubGVuZ3RoXTsKICAgICAgICBmb3IgKGludCBpPTA7IGk8bGhz\nLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGxlZGdlcklkc1tpXSA9IGxo\nc1tpXS5nZXRJZCgpOwogICAgICAgIH0KCiAgICAgICAgLy8gU2xlZXAgZm9y\nIGEgd2hpbGUgdG8gZW5zdXJlIGRhdGEgYXJlIGZsdXNoZWQKICAgICAgICBU\naHJlYWQuc2xlZXAoMjAwMCk7CgogICAgICAgIC8vIHZlcmlmeSB0aGF0IHdl\nIG9ubHkga2VlcCBhdCBtb3N0IGpvdXJuYWwgZmlsZXMgCiAgICAgICAgZm9y\nIChGaWxlIGpvdXJuYWxEaXIgOiB0bXBEaXJzKSB7CiAgICAgICAgICAgIEZp\nbGVbXSBqb3VybmFscyA9IGpvdXJuYWxEaXIubGlzdEZpbGVzKCk7CiAgICAg\nICAgICAgIGludCBudW1Kb3VybmFscyA9IDA7CiAgICAgICAgICAgIGZvciAo\nRmlsZSBmIDogam91cm5hbHMpIHsKICAgICAgICAgICAgICAgIGlmICghZi5n\nZXROYW1lKCkuZW5kc1dpdGgoIi50eG4iKSkgewogICAgICAgICAgICAgICAg\nICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAg\nICAgKytudW1Kb3VybmFsczsKICAgICAgICAgICAgfQogICAgICAgICAgICBh\nc3NlcnRUcnVlKG51bUpvdXJuYWxzIDw9IDIpOwogICAgICAgIH0KCiAgICAg\nICAgLy8gcmVzdGFydCBib29raWVzIAogICAgICAgIC8vIGVuc3VyZSBhZnRl\nciByZXN0YXJ0IHdlIGNhbiByZWFkIHRoZSBlbnRyaWVzIHNpbmNlIGpvdXJu\nYWxzIHJvbGxzCiAgICAgICAgcmVzdGFydEJvb2tpZXMoKTsKICAgICAgICB2\nYWxpZExlZGdlckVudHJpZXMobGVkZ2VySWRzLCAxMDI0LCAxMDI0KTsKICAg\nIH0KCiAgICAvKioKICAgICAqIFRoaXMgdGVzdCB3cml0ZXMgZW5vdWdoIGxl\nZGdlciBlbnRyaWVzIHRvIHJvbGwgb3ZlciB0aGUgam91cm5hbHMKICAgICAq\nIHdpdGhvdXQgc3luYyB1cAogICAgICoKICAgICAqIEB0aHJvd3MgRXhjZXB0\naW9uCiAgICAgKi8KICAgIEBUZXN0KHRpbWVvdXQ9NjAwMDApCiAgICBwdWJs\naWMgdm9pZCB0ZXN0Sm91cm5hbFJvbGxpbmdXaXRob3V0U3luY3VwKCkgdGhy\nb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgaWYgKExPRy5pc0RlYnVnRW5hYmxl\nZCgpKSB7CiAgICAgICAgICAgIExPRy5kZWJ1ZygiVGVzdGluZyBKb3VybmFs\nIFJvbGxpbmcgd2l0aG91dCBzeW5jIHVwIik7CiAgICAgICAgfQoKICAgICAg\nICAvLyBzZXQgZmx1c2ggaW50ZXJ2YWwgdG8gYSBsYXJnZSB2YWx1ZQogICAg\nICAgIFNlcnZlckNvbmZpZ3VyYXRpb24gbmV3Q29uZiA9IG5ldyBTZXJ2ZXJD\nb25maWd1cmF0aW9uKCk7CiAgICAgICAgbmV3Q29uZi5zZXRBbGxvd0xvb3Bi\nYWNrKHRydWUpOwogICAgICAgIG5ld0NvbmYuc2V0Rmx1c2hJbnRlcnZhbCg5\nOTk5OTk5OTkpOwogICAgICAgIC8vIHJlc3RhcnQgYm9va2llcwogICAgICAg\nIHJlc3RhcnRCb29raWVzKG5ld0NvbmYpOwoKICAgICAgICAvLyBXcml0ZSBl\nbm91Z2ggbGVkZ2VyIGVudHJpZXMgc28gdGhhdCB3ZSByb2xsIG92ZXIgam91\ncm5hbHMKICAgICAgICBMZWRnZXJIYW5kbGVbXSBsaHMgPSB3cml0ZUxlZGdl\nckVudHJpZXMoNCwgMTAyNCwgMTAyNCk7CiAgICAgICAgbG9uZ1tdIGxlZGdl\ncklkcyA9IG5ldyBsb25nW2xocy5sZW5ndGhdOwogICAgICAgIGZvciAoaW50\nIGk9MDsgaTxsaHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgbGVkZ2Vy\nSWRzW2ldID0gbGhzW2ldLmdldElkKCk7CiAgICAgICAgfQoKICAgICAgICAv\nLyBsZWRnZXIgaW5kZXhlcyBhcmUgbm90IGZsdXNoZWQKICAgICAgICAvLyBh\nbmQgYWZ0ZXIgYm9va2llcyByZXN0YXJ0ZWQsIGpvdXJuYWxzIHdpbGwgYmUg\ncmVsYXllZAogICAgICAgIC8vIGVuc3VyZSB0aGF0IHdlIGNhbiBzdGlsbCBy\nZWFkIHRoZSBlbnRyaWVzCiAgICAgICAgcmVzdGFydEJvb2tpZXMobmV3Q29u\nZik7CiAgICAgICAgdmFsaWRMZWRnZXJFbnRyaWVzKGxlZGdlcklkcywgMTAy\nNCwgMTAyNCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGlzIHRlc3Qgd3Jp\ndGVzIGVub3VnaCBsZWRnZXIgZW50cmllcyB0byByb2xsIG92ZXIgdGhlIGpv\ndXJuYWxzCiAgICAgKiB3aXRob3V0IHN5bmMgdXAKICAgICAqCiAgICAgKiBA\ndGhyb3dzIEV4Y2VwdGlvbgogICAgICovCiAgICBAVGVzdCh0aW1lb3V0PTYw\nMDAwKQogICAgcHVibGljIHZvaWQgdGVzdFJlcGxheURlbGV0ZWRMZWRnZXJK\nb3VybmFsRW50cmllcygpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIGlm\nIChMT0cuaXNEZWJ1Z0VuYWJsZWQoKSkgewogICAgICAgICAgICBMT0cuZGVi\ndWcoIlRlc3RpbmcgcmVwbGF5aW5nIGpvdXJuYWwgZW50cmllcyB3aG9zZSBs\nZWRnZXIgaGFzIGJlZW4gcmVtb3ZlZC4iKTsKICAgICAgICB9CgogICAgICAg\nIC8vIFdyaXRlIGVudHJpZXMKICAgICAgICBMZWRnZXJIYW5kbGVbXSBsaHMg\nPSB3cml0ZUxlZGdlckVudHJpZXMoMSwgMTAyNCwgMTApOwogICAgICAgIC8v\nIFdhaXQgdW50aWwgYWxsIGVudHJpZXMgYXJlIGZsdXNoZWQgYW5kIGxhc3Qg\nbWFyayByb2xscwogICAgICAgIFRocmVhZC5zbGVlcCgzICogYmFzZUNvbmYu\nZ2V0Rmx1c2hJbnRlcnZhbCgpKTsKCiAgICAgICAgLy8gcmVzdGFydCBib29r\naWVzIHdpdGggZmx1c2ggaW50ZXJ2YWwgc2V0IHRvIGEgbGFyZ2UgdmFsdWUK\nICAgICAgICBTZXJ2ZXJDb25maWd1cmF0aW9uIG5ld0NvbmYgPSBuZXcgU2Vy\ndmVyQ29uZmlndXJhdGlvbigpOwogICAgICAgIG5ld0NvbmYuc2V0Rmx1c2hJ\nbnRlcnZhbCg5OTk5OTk5OTkpOwogICAgICAgIG5ld0NvbmYuc2V0QWxsb3dM\nb29wYmFjayh0cnVlKTsKICAgICAgICAvLyByZXN0YXJ0IGJvb2tpZXMKICAg\nICAgICByZXN0YXJ0Qm9va2llcyhuZXdDb25mKTsKCiAgICAgICAgLy8gV3Jp\ndGUgZW50cmllcyBhZ2FpbiB0byBsZXQgdGhlbSBleGlzdGVkIGluIGpvdXJu\nYWwKICAgICAgICB3cml0ZUxlZGdlckVudHJpZXMobGhzLCAxMDI0LCAxMCk7\nCgogICAgICAgIC8vIGRlbGV0ZSB0aGVtCiAgICAgICAgZm9yIChMZWRnZXJI\nYW5kbGUgbGggOiBsaHMpIHsKICAgICAgICAgICAgYmtjLmRlbGV0ZUxlZGdl\ncihsaC5nZXRJZCgpKTsKICAgICAgICB9CiAgICAgICAgLy8gd2FpdCBmb3Ig\nZ2MKICAgICAgICBUaHJlYWQuc2xlZXAoMiAqIG5ld0NvbmYuZ2V0R2NXYWl0\nVGltZSgpKTsKCiAgICAgICAgLy8gcmVzdGFydCBib29raWVzIGFnYWluIHRv\nIHRyaWdnZXIgcmVwbGF5aW5nIGpvdXJuYWwKICAgICAgICByZXN0YXJ0Qm9v\na2llcyhuZXdDb25mKTsKICAgIH0KCn0K\n","encoding":"base64"}

