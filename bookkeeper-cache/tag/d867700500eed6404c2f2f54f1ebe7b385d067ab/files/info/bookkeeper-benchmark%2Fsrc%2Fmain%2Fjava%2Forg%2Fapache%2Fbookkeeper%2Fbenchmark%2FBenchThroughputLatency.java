{"sha":"59cc32ea590fcb4fd57f4be195b83c3db76bbcb7","node_id":"MDQ6QmxvYjE1NzU5NTY6NTljYzMyZWE1OTBmY2I0ZmQ1N2Y0YmUxOTViODNjM2RiNzZiYmNiNw==","size":16743,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/59cc32ea590fcb4fd57f4be195b83c3db76bbcb7","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgIGh0dHA6Ly93d3cuYXBhY2hl\nLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWly\nZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcs\nCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlz\nIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhPVVQg\nV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0\naGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25z\nIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICoKICov\nCnBhY2thZ2Ugb3JnLmFwYWNoZS5ib29ra2VlcGVyLmJlbmNobWFyazsKCmlt\ncG9ydCBqYXZhLmlvLkJ1ZmZlcmVkT3V0cHV0U3RyZWFtOwppbXBvcnQgamF2\nYS5pby5GaWxlT3V0cHV0U3RyZWFtOwppbXBvcnQgamF2YS5pby5JT0V4Y2Vw\ndGlvbjsKaW1wb3J0IGphdmEuaW8uT3V0cHV0U3RyZWFtOwppbXBvcnQgamF2\nYS51dGlsLkFycmF5TGlzdDsKaW1wb3J0IGphdmEudXRpbC5BcnJheXM7Cmlt\ncG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbnM7CmltcG9ydCBqYXZhLnV0aWwu\nUmFuZG9tOwppbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuQ291bnREb3du\nTGF0Y2g7CmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5TZW1hcGhvcmU7\nCmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5UaW1lVW5pdDsKaW1wb3J0\nIGphdmEudXRpbC5jb25jdXJyZW50LmF0b21pYy5BdG9taWNMb25nOwppbXBv\ncnQgamF2YS51dGlsLlRpbWVyOwppbXBvcnQgamF2YS51dGlsLlRpbWVyVGFz\nazsKCmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY2xpZW50LkJLRXhj\nZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNsaWVudC5C\nb29rS2VlcGVyOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNsaWVu\ndC5MZWRnZXJIYW5kbGU7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIu\nY2xpZW50LkFzeW5jQ2FsbGJhY2suQWRkQ2FsbGJhY2s7CmltcG9ydCBvcmcu\nYXBhY2hlLmJvb2trZWVwZXIuY29uZi5DbGllbnRDb25maWd1cmF0aW9uOwpp\nbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNsaS5Db21tYW5kTGluZTsKaW1w\nb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jbGkuQ29tbWFuZExpbmVQYXJzZXI7\nCmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMuY2xpLkhlbHBGb3JtYXR0ZXI7\nCmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMuY2xpLk9wdGlvbnM7CmltcG9y\ndCBvcmcuYXBhY2hlLmNvbW1vbnMuY2xpLlBhcnNlRXhjZXB0aW9uOwppbXBv\ncnQgb3JnLmFwYWNoZS5jb21tb25zLmNsaS5Qb3NpeFBhcnNlcjsKaW1wb3J0\nIG9yZy5hcGFjaGUuem9va2VlcGVyLkNyZWF0ZU1vZGU7CmltcG9ydCBvcmcu\nYXBhY2hlLnpvb2tlZXBlci5LZWVwZXJFeGNlcHRpb247CmltcG9ydCBvcmcu\nYXBhY2hlLnpvb2tlZXBlci5XYXRjaGVkRXZlbnQ7CmltcG9ydCBvcmcuYXBh\nY2hlLnpvb2tlZXBlci5XYXRjaGVyOwppbXBvcnQgb3JnLmFwYWNoZS56b29r\nZWVwZXIuWm9vRGVmczsKaW1wb3J0IG9yZy5hcGFjaGUuem9va2VlcGVyLlpv\nb0tlZXBlcjsKaW1wb3J0IG9yZy5hcGFjaGUuem9va2VlcGVyLldhdGNoZXIu\nRXZlbnQuRXZlbnRUeXBlOwppbXBvcnQgb3JnLmFwYWNoZS56b29rZWVwZXIu\nV2F0Y2hlci5FdmVudC5LZWVwZXJTdGF0ZTsKaW1wb3J0IG9yZy5zbGY0ai5M\nb2dnZXI7CmltcG9ydCBvcmcuc2xmNGouTG9nZ2VyRmFjdG9yeTsKCnB1Ymxp\nYyBjbGFzcyBCZW5jaFRocm91Z2hwdXRMYXRlbmN5IGltcGxlbWVudHMgQWRk\nQ2FsbGJhY2ssIFJ1bm5hYmxlIHsKICAgIHN0YXRpYyBMb2dnZXIgTE9HID0g\nTG9nZ2VyRmFjdG9yeS5nZXRMb2dnZXIoQmVuY2hUaHJvdWdocHV0TGF0ZW5j\neS5jbGFzcyk7CgogICAgQm9va0tlZXBlciBiazsKICAgIExlZGdlckhhbmRs\nZSBsaFtdOwogICAgQXRvbWljTG9uZyBjb3VudGVyOwoKICAgIFNlbWFwaG9y\nZSBzZW07CiAgICBpbnQgbnVtYmVyT2ZMZWRnZXJzID0gMTsKICAgIGZpbmFs\nIGludCBzZW5kTGltaXQ7CiAgICBmaW5hbCBsb25nIGxhdGVuY2llc1tdOwoK\nICAgIHN0YXRpYyBjbGFzcyBDb250ZXh0IHsKICAgICAgICBsb25nIGxvY2Fs\nU3RhcnRUaW1lOwogICAgICAgIGxvbmcgaWQ7CgogICAgICAgIENvbnRleHQo\nbG9uZyBpZCwgbG9uZyB0aW1lKXsKICAgICAgICAgICAgdGhpcy5pZCA9IGlk\nOwogICAgICAgICAgICB0aGlzLmxvY2FsU3RhcnRUaW1lID0gdGltZTsKICAg\nICAgICB9CiAgICB9CgogICAgcHVibGljIEJlbmNoVGhyb3VnaHB1dExhdGVu\nY3koaW50IGVuc2VtYmxlLCBpbnQgcVNpemUsIGJ5dGVbXSBwYXNzd2QsCiAg\nICAgICAgICAgIGludCBudW1iZXJPZkxlZGdlcnMsIGludCBzZW5kTGltaXQs\nIENsaWVudENvbmZpZ3VyYXRpb24gY29uZikKICAgICAgICAgICAgdGhyb3dz\nIEtlZXBlckV4Y2VwdGlvbiwgSU9FeGNlcHRpb24sIEludGVycnVwdGVkRXhj\nZXB0aW9uIHsKICAgICAgICB0aGlzLnNlbSA9IG5ldyBTZW1hcGhvcmUoY29u\nZi5nZXRUaHJvdHRsZVZhbHVlKCkpOwogICAgICAgIGJrID0gbmV3IEJvb2tL\nZWVwZXIoY29uZik7CiAgICAgICAgdGhpcy5jb3VudGVyID0gbmV3IEF0b21p\nY0xvbmcoMCk7CiAgICAgICAgdGhpcy5udW1iZXJPZkxlZGdlcnMgPSBudW1i\nZXJPZkxlZGdlcnM7CiAgICAgICAgdGhpcy5zZW5kTGltaXQgPSBzZW5kTGlt\naXQ7CiAgICAgICAgdGhpcy5sYXRlbmNpZXMgPSBuZXcgbG9uZ1tzZW5kTGlt\naXRdOwogICAgICAgIHRyeXsKICAgICAgICAgICAgbGggPSBuZXcgTGVkZ2Vy\nSGFuZGxlW3RoaXMubnVtYmVyT2ZMZWRnZXJzXTsKCiAgICAgICAgICAgIGZv\ncihpbnQgaSA9IDA7IGkgPCB0aGlzLm51bWJlck9mTGVkZ2VyczsgaSsrKSB7\nCiAgICAgICAgICAgICAgICBsaFtpXSA9IGJrLmNyZWF0ZUxlZGdlcihlbnNl\nbWJsZSwgcVNpemUsIEJvb2tLZWVwZXIuRGlnZXN0VHlwZS5DUkMzMiwKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3ZCk7\nCiAgICAgICAgICAgICAgICBMT0cuaW5mbygiTGVkZ2VyIEhhbmRsZTogIiAr\nIGxoW2ldLmdldElkKCkpOwogICAgICAgICAgICB9CiAgICAgICAgfSBjYXRj\naCAoQktFeGNlcHRpb24gZSkgewogICAgICAgICAgICBlLnByaW50U3RhY2tU\ncmFjZSgpOwogICAgICAgIH0KICAgIH0KCiAgICBSYW5kb20gcmFuZCA9IG5l\ndyBSYW5kb20oKTsKICAgIHB1YmxpYyB2b2lkIGNsb3NlKCkgdGhyb3dzIElu\ndGVycnVwdGVkRXhjZXB0aW9uLCBCS0V4Y2VwdGlvbiB7CiAgICAgICAgZm9y\nKGludCBpID0gMDsgaSA8IG51bWJlck9mTGVkZ2VyczsgaSsrKSB7CiAgICAg\nICAgICAgIGxoW2ldLmNsb3NlKCk7CiAgICAgICAgfQogICAgICAgIGJrLmNs\nb3NlKCk7CiAgICB9CgogICAgbG9uZyBwcmV2aW91cyA9IDA7CiAgICBieXRl\nIGJ5dGVzW107CgogICAgdm9pZCBzZXRFbnRyeURhdGEoYnl0ZSBkYXRhW10p\nIHsKICAgICAgICBieXRlcyA9IGRhdGE7CiAgICB9CgogICAgaW50IGxhc3RM\nZWRnZXIgPSAwOwogICAgcHJpdmF0ZSBpbnQgZ2V0UmFuZG9tTGVkZ2VyKCkg\newogICAgICAgICByZXR1cm4gcmFuZC5uZXh0SW50KG51bWJlck9mTGVkZ2Vy\ncyk7CiAgICB9CgogICAgaW50IGxhdGVuY3lJbmRleCA9IC0xOwogICAgQXRv\nbWljTG9uZyBjb21wbGV0ZWRSZXF1ZXN0cyA9IG5ldyBBdG9taWNMb25nKDAp\nOwoKICAgIGxvbmcgZHVyYXRpb24gPSAtMTsKICAgIHN5bmNocm9uaXplZCBw\ndWJsaWMgbG9uZyBnZXREdXJhdGlvbigpIHsKICAgICAgICByZXR1cm4gZHVy\nYXRpb247CiAgICB9CgogICAgcHVibGljIHZvaWQgcnVuKCkgewogICAgICAg\nIExPRy5pbmZvKCJSdW5uaW5nLi4uIik7CiAgICAgICAgbG9uZyBzdGFydCA9\nIHByZXZpb3VzID0gU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCk7CgogICAg\nICAgIGludCBzZW50ID0gMDsKCiAgICAgICAgVGhyZWFkIHJlcG9ydGVyID0g\nbmV3IFRocmVhZCgpIHsKICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1\nbigpIHsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAg\nICAgICAgICAgICB3aGlsZSh0cnVlKSB7CiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICBUaHJlYWQuc2xlZXAoMTAwMCk7CiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICBMT0cuaW5mbygibXM6IHt9IHJlcToge30iLCBTeXN0ZW0u\nY3VycmVudFRpbWVNaWxsaXMoKSwgY29tcGxldGVkUmVxdWVzdHMuZ2V0QW5k\nU2V0KDApKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAg\nICAgICAgICAgIH0gY2F0Y2ggKEludGVycnVwdGVkRXhjZXB0aW9uIGllKSB7\nCiAgICAgICAgICAgICAgICAgICAgICAgIExPRy5pbmZvKCJDYXVnaHQgaW50\nZXJydXB0ZWQgZXhjZXB0aW9uLCBnb2luZyBhd2F5Iik7CiAgICAgICAgICAg\nICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9Owog\nICAgICAgIHJlcG9ydGVyLnN0YXJ0KCk7CiAgICAgICAgbG9uZyBiZWZvcmVT\nZW5kID0gU3lzdGVtLm5hbm9UaW1lKCk7CgogICAgICAgIHdoaWxlKCFUaHJl\nYWQuY3VycmVudFRocmVhZCgpLmlzSW50ZXJydXB0ZWQoKSAmJiBzZW50IDwg\nc2VuZExpbWl0KSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAg\nICBzZW0uYWNxdWlyZSgpOwogICAgICAgICAgICAgICAgaWYgKHNlbnQgPT0g\nMTAwMDApIHsKICAgICAgICAgICAgICAgICAgICBsb25nIGFmdGVyU2VuZCA9\nIFN5c3RlbS5uYW5vVGltZSgpOwogICAgICAgICAgICAgICAgICAgIGxvbmcg\ndGltZSA9IGFmdGVyU2VuZCAtIGJlZm9yZVNlbmQ7CiAgICAgICAgICAgICAg\nICAgICAgTE9HLmluZm8oIlRpbWUgdG8gc2VuZCBmaXJzdCBiYXRjaDoge31z\nIHt9bnMgIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lLzEw\nMDAvMTAwMC8xMDAwLCB0aW1lKTsKICAgICAgICAgICAgICAgIH0KICAgICAg\nICAgICAgfSBjYXRjaCAoSW50ZXJydXB0ZWRFeGNlcHRpb24gZSkgewogICAg\nICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAg\nIGZpbmFsIGludCBpbmRleCA9IGdldFJhbmRvbUxlZGdlcigpOwogICAgICAg\nICAgICBMZWRnZXJIYW5kbGUgaCA9IGxoW2luZGV4XTsKICAgICAgICAgICAg\naWYgKGggPT0gbnVsbCkgewogICAgICAgICAgICAgICAgTE9HLmVycm9yKCJI\nYW5kbGUgIiArIGluZGV4ICsgIiBpcyBudWxsISIpOwogICAgICAgICAgICB9\nIGVsc2UgewogICAgICAgICAgICAgICAgbG9uZyBuYW5vVGltZSA9IFN5c3Rl\nbS5uYW5vVGltZSgpOwogICAgICAgICAgICAgICAgbGhbaW5kZXhdLmFzeW5j\nQWRkRW50cnkoYnl0ZXMsIHRoaXMsIG5ldyBDb250ZXh0KHNlbnQsIG5hbm9U\naW1lKSk7CiAgICAgICAgICAgICAgICBjb3VudGVyLmluY3JlbWVudEFuZEdl\ndCgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHNlbnQrKzsKICAgICAg\nICB9CiAgICAgICAgTE9HLmluZm8oIlNlbnQ6ICIgICsgc2VudCk7CiAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgaW50IGkgPSAwOwogICAgICAgICAgICB3\naGlsZSh0aGlzLmNvdW50ZXIuZ2V0KCkgPiAwKSB7CiAgICAgICAgICAgICAg\nICBUaHJlYWQuc2xlZXAoMTAwMCk7CiAgICAgICAgICAgICAgICBpKys7CiAg\nICAgICAgICAgICAgICBpZiAoaSA+IDMwKSB7CiAgICAgICAgICAgICAgICAg\nICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAg\nICAgICB9IGNhdGNoKEludGVycnVwdGVkRXhjZXB0aW9uIGUpIHsKICAgICAg\nICAgICAgTE9HLmVycm9yKCJJbnRlcnJ1cHRlZCB3aGlsZSB3YWl0aW5nIiwg\nZSk7CiAgICAgICAgfQogICAgICAgIHN5bmNocm9uaXplZCh0aGlzKSB7CiAg\nICAgICAgICAgIGR1cmF0aW9uID0gU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlz\nKCkgLSBzdGFydDsKICAgICAgICB9CiAgICAgICAgdGhyb3VnaHB1dCA9IHNl\nbnQqMTAwMC9nZXREdXJhdGlvbigpOwoKICAgICAgICByZXBvcnRlci5pbnRl\ncnJ1cHQoKTsKICAgICAgICB0cnkgewogICAgICAgICAgICByZXBvcnRlci5q\nb2luKCk7CiAgICAgICAgfSBjYXRjaCAoSW50ZXJydXB0ZWRFeGNlcHRpb24g\naWUpIHsKICAgICAgICAgICAgLy8gaWdub3JlCiAgICAgICAgfQogICAgICAg\nIExPRy5pbmZvKCJGaW5pc2hlZCBwcm9jZXNzaW5nIGluIG1zOiAiICsgZ2V0\nRHVyYXRpb24oKSArICIgdHAgPSAiICsgdGhyb3VnaHB1dCk7CiAgICB9Cgog\nICAgbG9uZyB0aHJvdWdocHV0ID0gLTE7CiAgICBwdWJsaWMgbG9uZyBnZXRU\naHJvdWdocHV0KCkgewogICAgICAgIHJldHVybiB0aHJvdWdocHV0OwogICAg\nfQoKICAgIGxvbmcgdGhyZXNob2xkID0gMjAwMDA7CiAgICBsb25nIHJ1bm5p\nbmdBdmVyYWdlQ291bnRlciA9IDA7CiAgICBsb25nIHRvdGFsVGltZSA9IDA7\nCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIGFkZENvbXBsZXRlKGlu\ndCByYywgTGVkZ2VySGFuZGxlIGxoLCBsb25nIGVudHJ5SWQsIE9iamVjdCBj\ndHgpIHsKICAgICAgICBDb250ZXh0IGNvbnRleHQgPSAoQ29udGV4dCkgY3R4\nOwoKICAgICAgICAvLyB3ZSBuZWVkIHRvIHVzZSB0aGUgaWQgcGFzc2VkIGlu\nIHRoZSBjb250ZXh0IGluIHRoZSBjYXNlIG9mCiAgICAgICAgLy8gbXVsdGlw\nbGUgbGVkZ2VycywgYW5kIGl0IHdvcmtzIGV2ZW4gd2l0aCBvbmUgbGVkZ2Vy\nCiAgICAgICAgZW50cnlJZCA9IGNvbnRleHQuaWQ7CiAgICAgICAgbG9uZyBu\nZXdUaW1lID0gU3lzdGVtLm5hbm9UaW1lKCkgLSBjb250ZXh0LmxvY2FsU3Rh\ncnRUaW1lOwoKICAgICAgICBzZW0ucmVsZWFzZSgpOwogICAgICAgIGNvdW50\nZXIuZGVjcmVtZW50QW5kR2V0KCk7CgogICAgICAgIGlmIChyYyA9PSAwKSB7\nCiAgICAgICAgICAgIGxhdGVuY2llc1soaW50KWVudHJ5SWRdID0gbmV3VGlt\nZTsKICAgICAgICAgICAgY29tcGxldGVkUmVxdWVzdHMuaW5jcmVtZW50QW5k\nR2V0KCk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBzdGF0aWMgdm9p\nZCBtYWluKFN0cmluZ1tdIGFyZ3MpCiAgICAgICAgICAgIHRocm93cyBLZWVw\nZXJFeGNlcHRpb24sIElPRXhjZXB0aW9uLCBJbnRlcnJ1cHRlZEV4Y2VwdGlv\nbiwgUGFyc2VFeGNlcHRpb24sIEJLRXhjZXB0aW9uIHsKICAgICAgICBPcHRp\nb25zIG9wdGlvbnMgPSBuZXcgT3B0aW9ucygpOwogICAgICAgIG9wdGlvbnMu\nYWRkT3B0aW9uKCJ0aW1lIiwgdHJ1ZSwgIlJ1bm5pbmcgdGltZSAoc2Vjb25k\ncyksIGRlZmF1bHQgNjAiKTsKICAgICAgICBvcHRpb25zLmFkZE9wdGlvbigi\nZW50cnlzaXplIiwgdHJ1ZSwgIkVudHJ5IHNpemUgKGJ5dGVzKSwgZGVmYXVs\ndCAxMDI0Iik7CiAgICAgICAgb3B0aW9ucy5hZGRPcHRpb24oImVuc2VtYmxl\nIiwgdHJ1ZSwgIkVuc2VtYmxlIHNpemUsIGRlZmF1bHQgMyIpOwogICAgICAg\nIG9wdGlvbnMuYWRkT3B0aW9uKCJxdW9ydW0iLCB0cnVlLCAiUXVvcnVtIHNp\nemUsIGRlZmF1bHQgMiIpOwogICAgICAgIG9wdGlvbnMuYWRkT3B0aW9uKCJ0\naHJvdHRsZSIsIHRydWUsICJNYXggb3V0c3RhbmRpbmcgcmVxdWVzdHMsIGRl\nZmF1bHQgMTAwMDAiKTsKICAgICAgICBvcHRpb25zLmFkZE9wdGlvbigibGVk\nZ2VycyIsIHRydWUsICJOdW1iZXIgb2YgbGVkZ2VycywgZGVmYXVsdCAxIik7\nCiAgICAgICAgb3B0aW9ucy5hZGRPcHRpb24oInpvb2tlZXBlciIsIHRydWUs\nICJab29rZWVwZXIgZW5zZW1ibGUsIGRlZmF1bHQgXCJsb2NhbGhvc3Q6MjE4\nMVwiIik7CiAgICAgICAgb3B0aW9ucy5hZGRPcHRpb24oInBhc3N3b3JkIiwg\ndHJ1ZSwgIlBhc3N3b3JkIHVzZWQgdG8gY3JlYXRlIGxlZGdlcnMgKGRlZmF1\nbHQgJ2JlbmNoUGFzc3dkJykiKTsKICAgICAgICBvcHRpb25zLmFkZE9wdGlv\nbigiY29vcmRub2RlIiwgdHJ1ZSwgIkNvb3JkaW5hdGlvbiB6bm9kZSBmb3Ig\nbXVsdGkgY2xpZW50IGJlbmNobWFya3MgKG9wdGlvbmFsKSIpOwogICAgICAg\nIG9wdGlvbnMuYWRkT3B0aW9uKCJ0aW1lb3V0IiwgdHJ1ZSwgIk51bWJlciBv\nZiBzZWNvbmRzIGFmdGVyIHdoaWNoIHRvIGdpdmUgdXAiKTsKICAgICAgICBv\ncHRpb25zLmFkZE9wdGlvbigic29ja2V0dGltZW91dCIsIHRydWUsICJTb2Nr\nZXQgdGltZW91dCBmb3IgYm9va2tlZXBlciBjbGllbnQuIEluIHNlY29uZHMu\nIERlZmF1bHQgNSIpOwogICAgICAgIG9wdGlvbnMuYWRkT3B0aW9uKCJza2lw\nd2FybXVwIiwgZmFsc2UsICJTa2lwIHdhcm0gdXAsIGRlZmF1bHQgZmFsc2Ui\nKTsKICAgICAgICBvcHRpb25zLmFkZE9wdGlvbigic2VuZGxpbWl0IiwgdHJ1\nZSwgIk1heCBudW1iZXIgb2YgZW50cmllcyB0byBzZW5kLiBEZWZhdWx0IDIw\nMDAwMDAwIik7CiAgICAgICAgb3B0aW9ucy5hZGRPcHRpb24oImhlbHAiLCBm\nYWxzZSwgIlRoaXMgbWVzc2FnZSIpOwoKICAgICAgICBDb21tYW5kTGluZVBh\ncnNlciBwYXJzZXIgPSBuZXcgUG9zaXhQYXJzZXIoKTsKICAgICAgICBDb21t\nYW5kTGluZSBjbWQgPSBwYXJzZXIucGFyc2Uob3B0aW9ucywgYXJncyk7Cgog\nICAgICAgIGlmIChjbWQuaGFzT3B0aW9uKCJoZWxwIikpIHsKICAgICAgICAg\nICAgSGVscEZvcm1hdHRlciBmb3JtYXR0ZXIgPSBuZXcgSGVscEZvcm1hdHRl\ncigpOwogICAgICAgICAgICBmb3JtYXR0ZXIucHJpbnRIZWxwKCJCZW5jaFRo\ncm91Z2hwdXRMYXRlbmN5IDxvcHRpb25zPiIsIG9wdGlvbnMpOwogICAgICAg\nICAgICBTeXN0ZW0uZXhpdCgtMSk7CiAgICAgICAgfQoKICAgICAgICBsb25n\nIHJ1bm5pbmdUaW1lID0gTG9uZy52YWx1ZU9mKGNtZC5nZXRPcHRpb25WYWx1\nZSgidGltZSIsICI2MCIpKTsKICAgICAgICBTdHJpbmcgc2VydmVycyA9IGNt\nZC5nZXRPcHRpb25WYWx1ZSgiem9va2VlcGVyIiwgImxvY2FsaG9zdDoyMTgx\nIik7CiAgICAgICAgaW50IGVudHJ5c2l6ZSA9IEludGVnZXIudmFsdWVPZihj\nbWQuZ2V0T3B0aW9uVmFsdWUoImVudHJ5c2l6ZSIsICIxMDI0IikpOwoKICAg\nICAgICBpbnQgbGVkZ2VycyA9IEludGVnZXIudmFsdWVPZihjbWQuZ2V0T3B0\naW9uVmFsdWUoImxlZGdlcnMiLCAiMSIpKTsKICAgICAgICBpbnQgZW5zZW1i\nbGUgPSBJbnRlZ2VyLnZhbHVlT2YoY21kLmdldE9wdGlvblZhbHVlKCJlbnNl\nbWJsZSIsICIzIikpOwogICAgICAgIGludCBxdW9ydW0gPSBJbnRlZ2VyLnZh\nbHVlT2YoY21kLmdldE9wdGlvblZhbHVlKCJxdW9ydW0iLCAiMiIpKTsKICAg\nICAgICBpbnQgdGhyb3R0bGUgPSBJbnRlZ2VyLnZhbHVlT2YoY21kLmdldE9w\ndGlvblZhbHVlKCJ0aHJvdHRsZSIsICIxMDAwMCIpKTsKICAgICAgICBpbnQg\nc2VuZExpbWl0ID0gSW50ZWdlci52YWx1ZU9mKGNtZC5nZXRPcHRpb25WYWx1\nZSgic2VuZGxpbWl0IiwgIjIwMDAwMDAwIikpOwoKICAgICAgICBmaW5hbCBp\nbnQgc29ja1RpbWVvdXQgPSBJbnRlZ2VyLnZhbHVlT2YoY21kLmdldE9wdGlv\nblZhbHVlKCJzb2NrZXR0aW1lb3V0IiwgIjUiKSk7CgogICAgICAgIFN0cmlu\nZyBjb29yZGluYXRpb25abm9kZSA9IGNtZC5nZXRPcHRpb25WYWx1ZSgiY29v\ncmRub2RlIik7CiAgICAgICAgZmluYWwgYnl0ZVtdIHBhc3N3ZCA9IGNtZC5n\nZXRPcHRpb25WYWx1ZSgicGFzc3dvcmQiLCAiYmVuY2hQYXNzd2QiKS5nZXRC\neXRlcygpOwoKICAgICAgICBUaW1lciB0aW1lb3V0ZXIgPSBuZXcgVGltZXIo\nKTsKICAgICAgICBpZiAoY21kLmhhc09wdGlvbigidGltZW91dCIpKSB7CiAg\nICAgICAgICAgIGZpbmFsIGxvbmcgdGltZW91dCA9IExvbmcudmFsdWVPZihj\nbWQuZ2V0T3B0aW9uVmFsdWUoInRpbWVvdXQiLCAiMzYwIikpICogMTAwMDsK\nCiAgICAgICAgICAgIHRpbWVvdXRlci5zY2hlZHVsZShuZXcgVGltZXJUYXNr\nKCkgewogICAgICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsK\nICAgICAgICAgICAgICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKCJU\naW1pbmcgb3V0IGJlbmNobWFyayBhZnRlciAiICsgdGltZW91dCArICJtcyIp\nOwogICAgICAgICAgICAgICAgICAgICAgICBTeXN0ZW0uZXhpdCgtMSk7CiAg\nICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgdGltZW91\ndCk7CiAgICAgICAgfQoKICAgICAgICBMT0cud2FybigiKFBhcmFtZXRlcnMg\ncmVjZWl2ZWQpIHJ1bm5pbmcgdGltZTogIiArIHJ1bm5pbmdUaW1lICsKICAg\nICAgICAgICAgICAgICIsIGVudHJ5IHNpemU6ICIgKyBlbnRyeXNpemUgKyAi\nLCBlbnNlbWJsZSBzaXplOiAiICsgZW5zZW1ibGUgKwogICAgICAgICAgICAg\nICAgIiwgcXVvcnVtIHNpemU6ICIgKyBxdW9ydW0gKwogICAgICAgICAgICAg\nICAgIiwgdGhyb3R0bGU6ICIgKyB0aHJvdHRsZSArCiAgICAgICAgICAgICAg\nICAiLCBudW1iZXIgb2YgbGVkZ2VyczogIiArIGxlZGdlcnMgKwogICAgICAg\nICAgICAgICAgIiwgemsgc2VydmVyczogIiArIHNlcnZlcnMpOwoKICAgICAg\nICBsb25nIHRvdGFsVGltZSA9IHJ1bm5pbmdUaW1lKjEwMDA7CgogICAgICAg\nIC8vIERvIGEgd2FybXVwIHJ1bgogICAgICAgIFRocmVhZCB0aHJlYWQ7Cgog\nICAgICAgIGJ5dGUgZGF0YVtdID0gbmV3IGJ5dGVbZW50cnlzaXplXTsKICAg\nICAgICBBcnJheXMuZmlsbChkYXRhLCAoYnl0ZSkneCcpOwoKICAgICAgICBD\nbGllbnRDb25maWd1cmF0aW9uIGNvbmYgPSBuZXcgQ2xpZW50Q29uZmlndXJh\ndGlvbigpOwogICAgICAgIGNvbmYuc2V0VGhyb3R0bGVWYWx1ZSh0aHJvdHRs\nZSkuc2V0UmVhZFRpbWVvdXQoc29ja1RpbWVvdXQpLnNldFprU2VydmVycyhz\nZXJ2ZXJzKTsKCiAgICAgICAgaWYgKCFjbWQuaGFzT3B0aW9uKCJza2lwd2Fy\nbXVwIikpIHsKICAgICAgICAgICAgbG9uZyB0aHJvdWdocHV0OwogICAgICAg\nICAgICBMT0cuaW5mbygiU3RhcnRpbmcgd2FybXVwIik7CgogICAgICAgICAg\nICB0aHJvdWdocHV0ID0gd2FybVVwKGRhdGEsIGxlZGdlcnMsIGVuc2VtYmxl\nLCBxdW9ydW0sIHBhc3N3ZCwgY29uZik7CiAgICAgICAgICAgIExPRy5pbmZv\nKCJXYXJtdXAgdHA6ICIgKyB0aHJvdWdocHV0KTsKICAgICAgICAgICAgTE9H\nLmluZm8oIldhcm11cCBwaGFzZSBmaW5pc2hlZCIpOwogICAgICAgIH0KCgog\nICAgICAgIC8vIE5vdyBkbyB0aGUgYmVuY2htYXJrCiAgICAgICAgQmVuY2hU\naHJvdWdocHV0TGF0ZW5jeSBiZW5jaCA9IG5ldyBCZW5jaFRocm91Z2hwdXRM\nYXRlbmN5KGVuc2VtYmxlLCBxdW9ydW0sIHBhc3N3ZCwKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgbGVkZ2Vycywgc2VuZExpbWl0LCBjb25mKTsKICAgICAgICBi\nZW5jaC5zZXRFbnRyeURhdGEoZGF0YSk7CiAgICAgICAgdGhyZWFkID0gbmV3\nIFRocmVhZChiZW5jaCk7CiAgICAgICAgWm9vS2VlcGVyIHprID0gbnVsbDsK\nCiAgICAgICAgaWYgKGNvb3JkaW5hdGlvblpub2RlICE9IG51bGwpIHsKICAg\nICAgICAgICAgZmluYWwgQ291bnREb3duTGF0Y2ggY29ubmVjdExhdGNoID0g\nbmV3IENvdW50RG93bkxhdGNoKDEpOwogICAgICAgICAgICB6ayA9IG5ldyBa\nb29LZWVwZXIoc2VydmVycywgMTUwMDAsIG5ldyBXYXRjaGVyKCkgewogICAg\nICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgICAg\nIHB1YmxpYyB2b2lkIHByb2Nlc3MoV2F0Y2hlZEV2ZW50IGV2ZW50KSB7CiAg\nICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5nZXRTdGF0ZSgpID09\nIEtlZXBlclN0YXRlLlN5bmNDb25uZWN0ZWQpIHsKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgIGNvbm5lY3RMYXRjaC5jb3VudERvd24oKTsKICAgICAg\nICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH19KTsK\nICAgICAgICAgICAgaWYgKCFjb25uZWN0TGF0Y2guYXdhaXQoMTAsIFRpbWVV\nbml0LlNFQ09ORFMpKSB7CiAgICAgICAgICAgICAgICBMT0cuZXJyb3IoIkNv\ndWxkbid0IGNvbm5lY3QgdG8gem9va2VlcGVyIGF0ICIgKyBzZXJ2ZXJzKTsK\nICAgICAgICAgICAgICAgIHprLmNsb3NlKCk7CiAgICAgICAgICAgICAgICBT\neXN0ZW0uZXhpdCgtMSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZp\nbmFsIENvdW50RG93bkxhdGNoIGxhdGNoID0gbmV3IENvdW50RG93bkxhdGNo\nKDEpOwogICAgICAgICAgICBMT0cuaW5mbygiV2FpdGluZyBmb3IgIiArIGNv\nb3JkaW5hdGlvblpub2RlKTsKICAgICAgICAgICAgaWYgKHprLmV4aXN0cyhj\nb29yZGluYXRpb25abm9kZSwgbmV3IFdhdGNoZXIoKSB7CiAgICAgICAgICAg\nICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHBy\nb2Nlc3MoV2F0Y2hlZEV2ZW50IGV2ZW50KSB7CiAgICAgICAgICAgICAgICAg\nICAgaWYgKGV2ZW50LmdldFR5cGUoKSA9PSBFdmVudFR5cGUuTm9kZUNyZWF0\nZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGF0Y2guY291bnREb3du\nKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfX0p\nICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIGxhdGNoLmNvdW50RG93bigp\nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxhdGNoLmF3YWl0KCk7CiAg\nICAgICAgICAgIExPRy5pbmZvKCJDb29yZGluYXRpb24gem5vZGUgY3JlYXRl\nZCIpOwogICAgICAgIH0KICAgICAgICB0aHJlYWQuc3RhcnQoKTsKICAgICAg\nICBUaHJlYWQuc2xlZXAodG90YWxUaW1lKTsKICAgICAgICB0aHJlYWQuaW50\nZXJydXB0KCk7CiAgICAgICAgdGhyZWFkLmpvaW4oKTsKCiAgICAgICAgTE9H\nLmluZm8oIkNhbGN1bGF0aW5nIHBlcmNlbnRpbGVzIik7CgogICAgICAgIGlu\ndCBudW1sYXQgPSAwOwogICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBiZW5j\naC5sYXRlbmNpZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKGJl\nbmNoLmxhdGVuY2llc1tpXSA+IDApIHsKICAgICAgICAgICAgICAgIG51bWxh\ndCsrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGludCBudW1j\nb21wbGV0aW9ucyA9IG51bWxhdDsKICAgICAgICBudW1sYXQgPSBNYXRoLm1p\nbihiZW5jaC5zZW5kTGltaXQsIG51bWxhdCk7CiAgICAgICAgbG9uZ1tdIGxh\ndGVuY3kgPSBuZXcgbG9uZ1tudW1sYXRdOwogICAgICAgIGludCBqID0wOwog\nICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBiZW5jaC5sYXRlbmNpZXMubGVu\nZ3RoICYmIGogPCBudW1sYXQ7IGkrKykgewogICAgICAgICAgICBpZiAoYmVu\nY2gubGF0ZW5jaWVzW2ldID4gMCkgewogICAgICAgICAgICAgICAgbGF0ZW5j\neVtqKytdID0gYmVuY2gubGF0ZW5jaWVzW2ldOwogICAgICAgICAgICB9CiAg\nICAgICAgfQogICAgICAgIEFycmF5cy5zb3J0KGxhdGVuY3kpOwoKICAgICAg\nICBsb25nIHRwID0gKGxvbmcpKChkb3VibGUpKG51bWNvbXBsZXRpb25zKjEw\nMDAuMCkvKGRvdWJsZSliZW5jaC5nZXREdXJhdGlvbigpKTsKCiAgICAgICAg\nTE9HLmluZm8obnVtY29tcGxldGlvbnMgKyAiIGNvbXBsZXRpb25zIGluICIg\nKyBiZW5jaC5nZXREdXJhdGlvbigpICsgIiBzZWNvbmRzOiAiICsgdHAgKyAi\nIG9wcy9zZWMiKTsKCiAgICAgICAgaWYgKHprICE9IG51bGwpIHsKICAgICAg\nICAgICAgemsuY3JlYXRlKGNvb3JkaW5hdGlvblpub2RlICsgIi93b3JrZXIt\nIiwKICAgICAgICAgICAgICAgICAgICAgICgidHAgIiArIHRwICsgIiBkdXJh\ndGlvbiAiICsgYmVuY2guZ2V0RHVyYXRpb24oKSkuZ2V0Qnl0ZXMoKSwKICAg\nICAgICAgICAgICAgICAgICAgIFpvb0RlZnMuSWRzLk9QRU5fQUNMX1VOU0FG\nRSwgQ3JlYXRlTW9kZS5QRVJTSVNURU5UX1NFUVVFTlRJQUwpOwogICAgICAg\nICAgICB6ay5jbG9zZSgpOwogICAgICAgIH0KCiAgICAgICAgLy8gZHVtcCB0\naGUgbGF0ZW5jaWVzIGZvciBsYXRlciBkZWJ1Z2dpbmcgKGl0IHdpbGwgYmUg\nc29ydGVkIGJ5IGVudHJ5aWQpCiAgICAgICAgT3V0cHV0U3RyZWFtIGZvcyA9\nIG5ldyBCdWZmZXJlZE91dHB1dFN0cmVhbShuZXcgRmlsZU91dHB1dFN0cmVh\nbSgibGF0ZW5jeUR1bXAuZGF0IikpOwoKICAgICAgICBmb3IoTG9uZyBsOiBs\nYXRlbmN5KSB7CiAgICAgICAgICAgIGZvcy53cml0ZSgoTG9uZy50b1N0cmlu\nZyhsKSsiXHQiKyhsLzEwMDAwMDApKyAibXNcbiIpLmdldEJ5dGVzKCkpOwog\nICAgICAgIH0KICAgICAgICBmb3MuZmx1c2goKTsKICAgICAgICBmb3MuY2xv\nc2UoKTsKCiAgICAgICAgLy8gbm93IGdldCB0aGUgbGF0ZW5jaWVzCiAgICAg\nICAgTE9HLmluZm8oIjk5dGggcGVyY2VudGlsZSBsYXRlbmN5OiB7fSIsIHBl\ncmNlbnRpbGUobGF0ZW5jeSwgOTkpKTsKICAgICAgICBMT0cuaW5mbygiOTV0\naCBwZXJjZW50aWxlIGxhdGVuY3k6IHt9IiwgcGVyY2VudGlsZShsYXRlbmN5\nLCA5NSkpOwoKICAgICAgICBiZW5jaC5jbG9zZSgpOwogICAgICAgIHRpbWVv\ndXRlci5jYW5jZWwoKTsKICAgIH0KCiAgICBwcml2YXRlIHN0YXRpYyBkb3Vi\nbGUgcGVyY2VudGlsZShsb25nW10gbGF0ZW5jeSwgaW50IHBlcmNlbnRpbGUp\nIHsKICAgICAgICBpbnQgc2l6ZSA9IGxhdGVuY3kubGVuZ3RoOwogICAgICAg\nIGludCBzYW1wbGVTaXplID0gKHNpemUgKiBwZXJjZW50aWxlKSAvIDEwMDsK\nICAgICAgICBsb25nIHRvdGFsID0gMDsKICAgICAgICBpbnQgY291bnQgPSAw\nOwogICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBzYW1wbGVTaXplOyBpKysp\nIHsKICAgICAgICAgICAgdG90YWwgKz0gbGF0ZW5jeVtpXTsKICAgICAgICAg\nICAgY291bnQrKzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuICgoZG91Ymxl\nKXRvdGFsLyhkb3VibGUpY291bnQpLzEwMDAwMDAuMDsKICAgIH0KCiAgICBw\ncml2YXRlIHN0YXRpYyBsb25nIHdhcm1VcChieXRlW10gZGF0YSwgaW50IGxl\nZGdlcnMsIGludCBlbnNlbWJsZSwgaW50IHFTaXplLAogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgYnl0ZVtdIHBhc3N3ZCwgQ2xpZW50Q29uZmln\ndXJhdGlvbiBjb25mKQogICAgICAgICAgICB0aHJvd3MgS2VlcGVyRXhjZXB0\naW9uLCBJT0V4Y2VwdGlvbiwgSW50ZXJydXB0ZWRFeGNlcHRpb24sIEJLRXhj\nZXB0aW9uIHsKICAgICAgICBmaW5hbCBDb3VudERvd25MYXRjaCBjb25uZWN0\nTGF0Y2ggPSBuZXcgQ291bnREb3duTGF0Y2goMSk7CiAgICAgICAgZmluYWwg\naW50IGJvb2tpZXM7CiAgICAgICAgU3RyaW5nIGJvb2tpZVJlZ2lzdHJhdGlv\nblBhdGggPSBjb25mLmdldFprQXZhaWxhYmxlQm9va2llc1BhdGgoKTsKICAg\nICAgICBab29LZWVwZXIgemsgPSBudWxsOwogICAgICAgIHRyeSB7CiAgICAg\nICAgICAgIGZpbmFsIFN0cmluZyBzZXJ2ZXJzID0gY29uZi5nZXRaa1NlcnZl\ncnMoKTsKICAgICAgICAgICAgemsgPSBuZXcgWm9vS2VlcGVyKHNlcnZlcnMs\nIDE1MDAwLCBuZXcgV2F0Y2hlcigpIHsKICAgICAgICAgICAgICAgICAgICBA\nT3ZlcnJpZGUKICAgICAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBwcm9j\nZXNzKFdhdGNoZWRFdmVudCBldmVudCkgewogICAgICAgICAgICAgICAgICAg\nICAgICBpZiAoZXZlbnQuZ2V0U3RhdGUoKSA9PSBLZWVwZXJTdGF0ZS5TeW5j\nQ29ubmVjdGVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25u\nZWN0TGF0Y2guY291bnREb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAg\nIH0KICAgICAgICAgICAgICAgICAgICB9fSk7CiAgICAgICAgICAgIGlmICgh\nY29ubmVjdExhdGNoLmF3YWl0KDEwLCBUaW1lVW5pdC5TRUNPTkRTKSkgewog\nICAgICAgICAgICAgICAgTE9HLmVycm9yKCJDb3VsZG4ndCBjb25uZWN0IHRv\nIHpvb2tlZXBlciBhdCAiICsgc2VydmVycyk7CiAgICAgICAgICAgICAgICB0\naHJvdyBuZXcgSU9FeGNlcHRpb24oIkNvdWxkbid0IGNvbm5lY3QgdG8gem9v\na2VlcGVyICIgKyBzZXJ2ZXJzKTsKICAgICAgICAgICAgfQogICAgICAgICAg\nICBib29raWVzID0gemsuZ2V0Q2hpbGRyZW4oYm9va2llUmVnaXN0cmF0aW9u\nUGF0aCwgZmFsc2UpLnNpemUoKTsKICAgICAgICB9IGZpbmFsbHkgewogICAg\nICAgICAgICBpZiAoemsgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgemsu\nY2xvc2UoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgQmVu\nY2hUaHJvdWdocHV0TGF0ZW5jeSB3YXJtdXAgPSBuZXcgQmVuY2hUaHJvdWdo\ncHV0TGF0ZW5jeShib29raWVzLCBib29raWVzLCBwYXNzd2QsCiAgICAgICAg\nICAgICAgICBsZWRnZXJzLCA1MDAwMCwgY29uZik7CiAgICAgICAgd2FybXVw\nLnNldEVudHJ5RGF0YShkYXRhKTsKICAgICAgICBUaHJlYWQgdGhyZWFkID0g\nbmV3IFRocmVhZCh3YXJtdXApOwogICAgICAgIHRocmVhZC5zdGFydCgpOwog\nICAgICAgIHRocmVhZC5qb2luKCk7CiAgICAgICAgd2FybXVwLmNsb3NlKCk7\nCiAgICAgICAgcmV0dXJuIHdhcm11cC5nZXRUaHJvdWdocHV0KCk7CiAgICB9\nCn0K\n","encoding":"base64"}

