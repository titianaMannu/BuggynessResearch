{"sha":"9c3e051ebfda32abb8607b10388791f806eada84","node_id":"MDQ6QmxvYjE1NzU5NTY6OWMzZTA1MWViZmRhMzJhYmI4NjA3YjEwMzg4NzkxZjgwNmVhZGE4NA==","size":16634,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/9c3e051ebfda32abb8607b10388791f806eada84","content":"LyoKICoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9y\nIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBU\naGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhl\nIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNl\nIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBs\naWFuY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEg\nY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBl\naXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZv\nciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Np\nb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICoK\nICovCgpwYWNrYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci5ib29raWU7Cgpp\nbXBvcnQgamF2YS5pby5CdWZmZXJlZFJlYWRlcjsKaW1wb3J0IGphdmEuaW8u\nQnVmZmVyZWRXcml0ZXI7CmltcG9ydCBqYXZhLmlvLkZpbGU7CmltcG9ydCBq\nYXZhLmlvLkZpbGVGaWx0ZXI7CmltcG9ydCBqYXZhLmlvLkZpbGVJbnB1dFN0\ncmVhbTsKaW1wb3J0IGphdmEuaW8uRmlsZU5vdEZvdW5kRXhjZXB0aW9uOwpp\nbXBvcnQgamF2YS5pby5GaWxlT3V0cHV0U3RyZWFtOwppbXBvcnQgamF2YS5p\nby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEuaW8uSW5wdXRTdHJlYW1SZWFk\nZXI7CmltcG9ydCBqYXZhLmlvLk91dHB1dFN0cmVhbVdyaXRlcjsKaW1wb3J0\nIGphdmEuaW8uUmFuZG9tQWNjZXNzRmlsZTsKaW1wb3J0IGphdmEubmlvLkJ5\ndGVCdWZmZXI7CmltcG9ydCBqYXZhLm5pby5jaGFubmVscy5GaWxlQ2hhbm5l\nbDsKaW1wb3J0IGphdmEudXRpbC5BcnJheXM7CmltcG9ydCBqYXZhLnV0aWwu\nQXJyYXlMaXN0OwppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb25zOwppbXBv\ncnQgamF2YS51dGlsLkxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVu\ndC5Db25jdXJyZW50SGFzaE1hcDsKCmltcG9ydCBvcmcuc2xmNGouTG9nZ2Vy\nOwppbXBvcnQgb3JnLnNsZjRqLkxvZ2dlckZhY3Rvcnk7CgppbXBvcnQgb3Jn\nLmFwYWNoZS5ib29ra2VlcGVyLmNvbmYuU2VydmVyQ29uZmlndXJhdGlvbjsK\naW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci51dGlsLklPVXRpbHM7Cgov\nKioKICogVGhpcyBjbGFzcyBtYW5hZ2VzIHRoZSB3cml0aW5nIG9mIHRoZSBi\nb29ra2VlcGVyIGVudHJpZXMuIEFsbCB0aGUgbmV3CiAqIGVudHJpZXMgYXJl\nIHdyaXR0ZW4gdG8gYSBjb21tb24gbG9nLiBUaGUgTGVkZ2VyQ2FjaGUgd2ls\nbCBoYXZlIHBvaW50ZXJzCiAqIGludG8gZmlsZXMgY3JlYXRlZCBieSB0aGlz\nIGNsYXNzIHdpdGggb2Zmc2V0cyBpbnRvIHRoZSBmaWxlcyB0byBmaW5kCiAq\nIHRoZSBhY3R1YWwgbGVkZ2VyIGVudHJ5LiBUaGUgZW50cnkgbG9nIGZpbGVz\nIGNyZWF0ZWQgYnkgdGhpcyBjbGFzcyBhcmUKICogaWRlbnRpZmllZCBieSBh\nIGxvbmcuCiAqLwpwdWJsaWMgY2xhc3MgRW50cnlMb2dnZXIgewogICAgcHJp\ndmF0ZSBzdGF0aWMgZmluYWwgTG9nZ2VyIExPRyA9IExvZ2dlckZhY3Rvcnku\nZ2V0TG9nZ2VyKEVudHJ5TG9nZ2VyLmNsYXNzKTsKICAgIHByaXZhdGUgRmls\nZSBkaXJzW107CgogICAgcHJpdmF0ZSBsb25nIGxvZ0lkOwogICAgLyoqCiAg\nICAgKiBUaGUgbWF4aW11bSBzaXplIG9mIGEgZW50cnkgbG9nZ2VyIGZpbGUu\nCiAgICAgKi8KICAgIGZpbmFsIGxvbmcgbG9nU2l6ZUxpbWl0OwogICAgcHJp\ndmF0ZSB2b2xhdGlsZSBCdWZmZXJlZENoYW5uZWwgbG9nQ2hhbm5lbDsKICAg\nIC8qKgogICAgICogVGhlIDFLIGJsb2NrIGF0IHRoZSBoZWFkIG9mIHRoZSBl\nbnRyeSBsb2dnZXIgZmlsZQogICAgICogdGhhdCBjb250YWlucyB0aGUgZmlu\nZ2VycHJpbnQgYW5kIChmdXR1cmUpIG1ldGEtZGF0YQogICAgICovCiAgICBm\naW5hbCBzdGF0aWMgaW50IExPR0ZJTEVfSEVBREVSX1NJWkUgPSAxMDI0Owog\nICAgZmluYWwgQnl0ZUJ1ZmZlciBMT0dGSUxFX0hFQURFUiA9IEJ5dGVCdWZm\nZXIuYWxsb2NhdGUoTE9HRklMRV9IRUFERVJfU0laRSk7CgogICAgZmluYWwg\nc3RhdGljIGxvbmcgTUIgPSAxMDI0ICogMTAyNDsKCiAgICAvKioKICAgICAq\nIFNjYW4gZW50cmllcyBpbiBhIGVudHJ5IGxvZyBmaWxlLgogICAgICovCiAg\nICBzdGF0aWMgaW50ZXJmYWNlIEVudHJ5TG9nU2Nhbm5lciB7CiAgICAgICAg\nLyoqCiAgICAgICAgICogVGVzdHMgd2hldGhlciBvciBub3QgdGhlIGVudHJp\nZXMgYmVsb25ncyB0byB0aGUgc3BlY2lmaWVkIGxlZGdlcgogICAgICAgICAq\nIHNob3VsZCBiZSBwcm9jZXNzZWQuCiAgICAgICAgICoKICAgICAgICAgKiBA\ncGFyYW0gbGVkZ2VySWQKICAgICAgICAgKiAgICAgICAgICBMZWRnZXIgSUQu\nCiAgICAgICAgICogQHJldHVybiB0cnVlIGlmIGFuZCBvbmx5IHRoZSBlbnRy\naWVzIG9mIHRoZSBsZWRnZXIgc2hvdWxkIGJlIHNjYW5uZWQuCiAgICAgICAg\nICovCiAgICAgICAgcHVibGljIGJvb2xlYW4gYWNjZXB0KGxvbmcgbGVkZ2Vy\nSWQpOwoKICAgICAgICAvKioKICAgICAgICAgKiBQcm9jZXNzIGFuIGVudHJ5\nLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIGxlZGdlcklkCiAgICAg\nICAgICogICAgICAgICAgTGVkZ2VyIElELgogICAgICAgICAqIEBwYXJhbSBl\nbnRyeQogICAgICAgICAqICAgICAgICAgIEVudHJ5IEJ5dGVCdWZmZXIKICAg\nICAgICAgKiBAdGhyb3dzIElPRXhjZXB0aW9uCiAgICAgICAgICovCiAgICAg\nICAgcHVibGljIHZvaWQgcHJvY2Vzcyhsb25nIGxlZGdlcklkLCBCeXRlQnVm\nZmVyIGVudHJ5KSB0aHJvd3MgSU9FeGNlcHRpb247CiAgICB9CgogICAgLyoq\nCiAgICAgKiBDcmVhdGUgYW4gRW50cnlMb2dnZXIgdGhhdCBzdG9yZXMgaXQn\ncyBsb2cgZmlsZXMgaW4gdGhlIGdpdmVuCiAgICAgKiBkaXJlY3Rvcmllcwog\nICAgICovCiAgICBwdWJsaWMgRW50cnlMb2dnZXIoU2VydmVyQ29uZmlndXJh\ndGlvbiBjb25mKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgIHRoaXMu\nZGlycyA9IEJvb2tpZS5nZXRDdXJyZW50RGlyZWN0b3JpZXMoY29uZi5nZXRM\nZWRnZXJEaXJzKCkpOwogICAgICAgIC8vIGxvZyBzaXplIGxpbWl0CiAgICAg\nICAgdGhpcy5sb2dTaXplTGltaXQgPSBjb25mLmdldEVudHJ5TG9nU2l6ZUxp\nbWl0KCk7CgogICAgICAgIC8vIEluaXRpYWxpemUgdGhlIGVudHJ5IGxvZyBo\nZWFkZXIgYnVmZmVyLiBUaGlzIGNhbm5vdCBiZSBhIHN0YXRpYyBvYmplY3QK\nICAgICAgICAvLyBzaW5jZSBpbiBvdXIgdW5pdCB0ZXN0cywgd2UgcnVuIG11\nbHRpcGxlIEJvb2tpZXMgYW5kIHRodXMgRW50cnlMb2dnZXJzCiAgICAgICAg\nLy8gd2l0aGluIHRoZSBzYW1lIEpWTS4gQWxsIG9mIHRoZXNlIEJvb2tpZSBp\nbnN0YW5jZXMgYWNjZXNzIHRoaXMgaGVhZGVyCiAgICAgICAgLy8gc28gdGhl\ncmUgY2FuIGJlIHJhY2UgY29uZGl0aW9ucyB3aGVuIGVudHJ5IGxvZ3MgYXJl\nIHJvbGxlZCBvdmVyIGFuZAogICAgICAgIC8vIHRoaXMgaGVhZGVyIGJ1ZmZl\nciBpcyBjbGVhcmVkIGJlZm9yZSB3cml0aW5nIGl0IGludG8gdGhlIG5ldyBs\nb2dDaGFubmVsLgogICAgICAgIExPR0ZJTEVfSEVBREVSLnB1dCgiQktMTyIu\nZ2V0Qnl0ZXMoKSk7CiAgICAgICAgLy8gRmluZCB0aGUgbGFyZ2VzdCBsb2dJ\nZAogICAgICAgIGxvZ0lkID0gLTE7CiAgICAgICAgZm9yKEZpbGUgZGlyOiBk\naXJzKSB7CiAgICAgICAgICAgIGlmICghZGlyLmV4aXN0cygpKSB7CiAgICAg\nICAgICAgICAgICB0aHJvdyBuZXcgRmlsZU5vdEZvdW5kRXhjZXB0aW9uKAog\nICAgICAgICAgICAgICAgICAgICAgICAiRW50cnkgbG9nIGRpcmVjdG9yeSBk\nb2VzIG5vdCBleGlzdCIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxv\nbmcgbGFzdExvZ0lkID0gZ2V0TGFzdExvZ0lkKGRpcik7CiAgICAgICAgICAg\nIGlmIChsYXN0TG9nSWQgPiBsb2dJZCkgewogICAgICAgICAgICAgICAgbG9n\nSWQgPSBsYXN0TG9nSWQ7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAg\nICAgY3JlYXRlTmV3TG9nKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBNYXBz\nIGVudHJ5IGxvZyBmaWxlcyB0byBvcGVuIGNoYW5uZWxzLgogICAgICovCiAg\nICBwcml2YXRlIENvbmN1cnJlbnRIYXNoTWFwPExvbmcsIEJ1ZmZlcmVkQ2hh\nbm5lbD4gY2hhbm5lbHMgPSBuZXcgQ29uY3VycmVudEhhc2hNYXA8TG9uZywg\nQnVmZmVyZWRDaGFubmVsPigpOwoKICAgIHN5bmNocm9uaXplZCBsb25nIGdl\ndEN1cnJlbnRMb2dJZCgpIHsKICAgICAgICByZXR1cm4gbG9nSWQ7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBDcmVhdGVzIGEgbmV3IGxvZyBmaWxlCiAgICAg\nKi8KICAgIHByaXZhdGUgdm9pZCBjcmVhdGVOZXdMb2coKSB0aHJvd3MgSU9F\neGNlcHRpb24gewogICAgICAgIExpc3Q8RmlsZT4gbGlzdCA9IEFycmF5cy5h\nc0xpc3QoZGlycyk7CiAgICAgICAgQ29sbGVjdGlvbnMuc2h1ZmZsZShsaXN0\nKTsKICAgICAgICBpZiAobG9nQ2hhbm5lbCAhPSBudWxsKSB7CiAgICAgICAg\nICAgIGxvZ0NoYW5uZWwuZmx1c2godHJ1ZSk7CiAgICAgICAgfQoKICAgICAg\nICAvLyBJdCB3b3VsZCBiZXR0ZXIgbm90IHRvIG92ZXJ3cml0ZSBleGlzdGlu\nZyBlbnRyeSBsb2cgZmlsZXMKICAgICAgICBGaWxlIG5ld0xvZ0ZpbGUgPSBu\ndWxsOwogICAgICAgIGRvIHsKICAgICAgICAgICAgU3RyaW5nIGxvZ0ZpbGVO\nYW1lID0gTG9uZy50b0hleFN0cmluZygrK2xvZ0lkKSArICIubG9nIjsKICAg\nICAgICAgICAgZm9yIChGaWxlIGRpciA6IGxpc3QpIHsKICAgICAgICAgICAg\nICAgIG5ld0xvZ0ZpbGUgPSBuZXcgRmlsZShkaXIsIGxvZ0ZpbGVOYW1lKTsK\nICAgICAgICAgICAgICAgIGlmIChuZXdMb2dGaWxlLmV4aXN0cygpKSB7CiAg\nICAgICAgICAgICAgICAgICAgTE9HLndhcm4oIkZvdW5kIGV4aXN0ZWQgZW50\ncnkgbG9nICIgKyBuZXdMb2dGaWxlCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICsgIiB3aGVuIHRyeWluZyB0byBjcmVhdGUgaXQgYXMgYSBuZXcgbG9n\nLiIpOwogICAgICAgICAgICAgICAgICAgIG5ld0xvZ0ZpbGUgPSBudWxsOwog\nICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQog\nICAgICAgICAgICB9CiAgICAgICAgfSB3aGlsZSAobmV3TG9nRmlsZSA9PSBu\ndWxsKTsKCiAgICAgICAgbG9nQ2hhbm5lbCA9IG5ldyBCdWZmZXJlZENoYW5u\nZWwobmV3IFJhbmRvbUFjY2Vzc0ZpbGUobmV3TG9nRmlsZSwgInJ3IikuZ2V0\nQ2hhbm5lbCgpLCA2NCoxMDI0KTsKICAgICAgICBsb2dDaGFubmVsLndyaXRl\nKChCeXRlQnVmZmVyKSBMT0dGSUxFX0hFQURFUi5jbGVhcigpKTsKICAgICAg\nICBjaGFubmVscy5wdXQobG9nSWQsIGxvZ0NoYW5uZWwpOwogICAgICAgIGZv\ncihGaWxlIGY6IGRpcnMpIHsKICAgICAgICAgICAgc2V0TGFzdExvZ0lkKGYs\nIGxvZ0lkKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBSZW1v\ndmUgZW50cnkgbG9nLgogICAgICoKICAgICAqIEBwYXJhbSBlbnRyeUxvZ0lk\nCiAgICAgKiAgICAgICAgICBFbnRyeSBMb2cgRmlsZSBJZAogICAgICovCiAg\nICBwcm90ZWN0ZWQgYm9vbGVhbiByZW1vdmVFbnRyeUxvZyhsb25nIGVudHJ5\nTG9nSWQpIHsKICAgICAgICBCdWZmZXJlZENoYW5uZWwgYmMgPSBjaGFubmVs\ncy5yZW1vdmUoZW50cnlMb2dJZCk7CiAgICAgICAgaWYgKG51bGwgIT0gYmMp\nIHsKICAgICAgICAgICAgLy8gY2xvc2UgaXRzIHVuZGVybHlpbmcgZmlsZSBj\naGFubmVsLCBzbyBpdCBjb3VsZCBiZSBkZWxldGVkIHJlYWxseQogICAgICAg\nICAgICB0cnkgewogICAgICAgICAgICAgICAgYmMuZ2V0RmlsZUNoYW5uZWwo\nKS5jbG9zZSgpOwogICAgICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBp\nZSkgewogICAgICAgICAgICAgICAgTE9HLndhcm4oIkV4Y2VwdGlvbiB3aGls\nZSBjbG9zaW5nIGdhcmJhZ2UgY29sbGVjdGVkIGVudHJ5TG9nIGZpbGUgOiAi\nLCBpZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgRmlsZSBl\nbnRyeUxvZ0ZpbGU7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZW50cnlM\nb2dGaWxlID0gZmluZEZpbGUoZW50cnlMb2dJZCk7CiAgICAgICAgfSBjYXRj\naCAoRmlsZU5vdEZvdW5kRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgTE9H\nLmVycm9yKCJUcnlpbmcgdG8gZGVsZXRlIGFuIGVudHJ5TG9nIGZpbGUgdGhh\ndCBjb3VsZCBub3QgYmUgZm91bmQ6ICIKICAgICAgICAgICAgICAgICAgICAr\nIGVudHJ5TG9nSWQgKyAiLmxvZyIpOwogICAgICAgICAgICByZXR1cm4gZmFs\nc2U7CiAgICAgICAgfQogICAgICAgIGlmICghZW50cnlMb2dGaWxlLmRlbGV0\nZSgpKSB7CiAgICAgICAgICAgIExPRy53YXJuKCJDb3VsZCBub3QgZGVsZXRl\nIGVudHJ5IGxvZyBmaWxlIHt9IiwgZW50cnlMb2dGaWxlKTsKICAgICAgICB9\nCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiB3\ncml0ZXMgdGhlIGdpdmVuIGlkIHRvIHRoZSAibGFzdElkIiBmaWxlIGluIHRo\nZSBnaXZlbiBkaXJlY3RvcnkuCiAgICAgKi8KICAgIHByaXZhdGUgdm9pZCBz\nZXRMYXN0TG9nSWQoRmlsZSBkaXIsIGxvbmcgbG9nSWQpIHRocm93cyBJT0V4\nY2VwdGlvbiB7CiAgICAgICAgRmlsZU91dHB1dFN0cmVhbSBmb3M7CiAgICAg\nICAgZm9zID0gbmV3IEZpbGVPdXRwdXRTdHJlYW0obmV3IEZpbGUoZGlyLCAi\nbGFzdElkIikpOwogICAgICAgIEJ1ZmZlcmVkV3JpdGVyIGJ3ID0gbmV3IEJ1\nZmZlcmVkV3JpdGVyKG5ldyBPdXRwdXRTdHJlYW1Xcml0ZXIoZm9zKSk7CiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgYncud3JpdGUoTG9uZy50b0hleFN0\ncmluZyhsb2dJZCkgKyAiXG4iKTsKICAgICAgICAgICAgYncuZmx1c2goKTsK\nICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICB0cnkgewogICAgICAg\nICAgICAgICAgYncuY2xvc2UoKTsKICAgICAgICAgICAgfSBjYXRjaCAoSU9F\neGNlcHRpb24gZSkgewogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoK\nICAgIHByaXZhdGUgbG9uZyBnZXRMYXN0TG9nSWQoRmlsZSBkaXIpIHsKICAg\nICAgICBsb25nIGlkID0gcmVhZExhc3RMb2dJZChkaXIpOwogICAgICAgIC8v\nIHJlYWQgc3VjY2VzcwogICAgICAgIGlmIChpZCA+IDApIHsKICAgICAgICAg\nICAgcmV0dXJuIGlkOwogICAgICAgIH0KICAgICAgICAvLyByZWFkIGZhaWxl\nZCwgc2NhbiB0aGUgbGVkZ2VyIGRpcmVjdG9yaWVzIHRvIGZpbmQgYmlnZ2Vz\ndCBsb2cgaWQKICAgICAgICBGaWxlW10gbG9nRmlsZXMgPSBkaXIubGlzdEZp\nbGVzKG5ldyBGaWxlRmlsdGVyKCkgewogICAgICAgICAgICBAT3ZlcnJpZGUK\nICAgICAgICAgICAgcHVibGljIGJvb2xlYW4gYWNjZXB0KEZpbGUgZmlsZSkg\newogICAgICAgICAgICAgICAgcmV0dXJuIGZpbGUuZ2V0TmFtZSgpLmVuZHNX\naXRoKCIubG9nIik7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAg\nICBMaXN0PExvbmc+IGxvZ3MgPSBuZXcgQXJyYXlMaXN0PExvbmc+KCk7CiAg\nICAgICAgZm9yIChGaWxlIGxmIDogbG9nRmlsZXMpIHsKICAgICAgICAgICAg\nU3RyaW5nIGlkU3RyaW5nID0gbGYuZ2V0TmFtZSgpLnNwbGl0KCJcXC4iKVsw\nXTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGxvbmcgbGlk\nID0gTG9uZy5wYXJzZUxvbmcoaWRTdHJpbmcsIDE2KTsKICAgICAgICAgICAg\nICAgIGxvZ3MuYWRkKGxpZCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKE51bWJl\nckZvcm1hdEV4Y2VwdGlvbiBuZmUpIHsKICAgICAgICAgICAgfQogICAgICAg\nIH0KICAgICAgICAvLyBubyBsb2cgZmlsZSBmb3VuZCBpbiB0aGlzIGRpcmVj\ndG9yeQogICAgICAgIGlmICgwID09IGxvZ3Muc2l6ZSgpKSB7CiAgICAgICAg\nICAgIHJldHVybiAtMTsKICAgICAgICB9CiAgICAgICAgLy8gb3JkZXIgdGhl\nIGNvbGxlY3Rpb25zCiAgICAgICAgQ29sbGVjdGlvbnMuc29ydChsb2dzKTsK\nICAgICAgICByZXR1cm4gbG9ncy5nZXQobG9ncy5zaXplKCkgLSAxKTsKICAg\nIH0KCiAgICAvKioKICAgICAqIHJlYWRzIGlkIGZyb20gdGhlICJsYXN0SWQi\nIGZpbGUgaW4gdGhlIGdpdmVuIGRpcmVjdG9yeS4KICAgICAqLwogICAgcHJp\ndmF0ZSBsb25nIHJlYWRMYXN0TG9nSWQoRmlsZSBmKSB7CiAgICAgICAgRmls\nZUlucHV0U3RyZWFtIGZpczsKICAgICAgICB0cnkgewogICAgICAgICAgICBm\naXMgPSBuZXcgRmlsZUlucHV0U3RyZWFtKG5ldyBGaWxlKGYsICJsYXN0SWQi\nKSk7CiAgICAgICAgfSBjYXRjaCAoRmlsZU5vdEZvdW5kRXhjZXB0aW9uIGUp\nIHsKICAgICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgIH0KICAgICAgICBC\ndWZmZXJlZFJlYWRlciBiciA9IG5ldyBCdWZmZXJlZFJlYWRlcihuZXcgSW5w\ndXRTdHJlYW1SZWFkZXIoZmlzKSk7CiAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgU3RyaW5nIGxhc3RJZFN0cmluZyA9IGJyLnJlYWRMaW5lKCk7CiAgICAg\nICAgICAgIHJldHVybiBMb25nLnBhcnNlTG9uZyhsYXN0SWRTdHJpbmcsIDE2\nKTsKICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBlKSB7CiAgICAgICAg\nICAgIHJldHVybiAtMTsKICAgICAgICB9IGNhdGNoKE51bWJlckZvcm1hdEV4\nY2VwdGlvbiBlKSB7CiAgICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICB9\nIGZpbmFsbHkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAg\nYnIuY2xvc2UoKTsKICAgICAgICAgICAgfSBjYXRjaCAoSU9FeGNlcHRpb24g\nZSkgewogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIHN5bmNo\ncm9uaXplZCB2b2lkIGZsdXNoKCkgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAg\nICAgICBpZiAobG9nQ2hhbm5lbCAhPSBudWxsKSB7CiAgICAgICAgICAgIGxv\nZ0NoYW5uZWwuZmx1c2godHJ1ZSk7CiAgICAgICAgfQogICAgfQogICAgc3lu\nY2hyb25pemVkIGxvbmcgYWRkRW50cnkobG9uZyBsZWRnZXIsIEJ5dGVCdWZm\nZXIgZW50cnkpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgaWYgKGxv\nZ0NoYW5uZWwucG9zaXRpb24oKSArIGVudHJ5LnJlbWFpbmluZygpICsgNCA+\nIGxvZ1NpemVMaW1pdCkgewogICAgICAgICAgICBjcmVhdGVOZXdMb2coKTsK\nICAgICAgICB9CiAgICAgICAgQnl0ZUJ1ZmZlciBidWZmID0gQnl0ZUJ1ZmZl\nci5hbGxvY2F0ZSg0KTsKICAgICAgICBidWZmLnB1dEludChlbnRyeS5yZW1h\naW5pbmcoKSk7CiAgICAgICAgYnVmZi5mbGlwKCk7CiAgICAgICAgbG9nQ2hh\nbm5lbC53cml0ZShidWZmKTsKICAgICAgICBsb25nIHBvcyA9IGxvZ0NoYW5u\nZWwucG9zaXRpb24oKTsKICAgICAgICBsb2dDaGFubmVsLndyaXRlKGVudHJ5\nKTsKICAgICAgICAvL2xvZ0NoYW5uZWwuZmx1c2goZmFsc2UpOwoKICAgICAg\nICByZXR1cm4gKGxvZ0lkIDw8IDMyTCkgfCBwb3M7CiAgICB9CgogICAgYnl0\nZVtdIHJlYWRFbnRyeShsb25nIGxlZGdlcklkLCBsb25nIGVudHJ5SWQsIGxv\nbmcgbG9jYXRpb24pIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgbG9u\nZyBlbnRyeUxvZ0lkID0gbG9jYXRpb24gPj4gMzJMOwogICAgICAgIGxvbmcg\ncG9zID0gbG9jYXRpb24gJiAweGZmZmZmZmZmTDsKICAgICAgICBCeXRlQnVm\nZmVyIHNpemVCdWZmID0gQnl0ZUJ1ZmZlci5hbGxvY2F0ZSg0KTsKICAgICAg\nICBwb3MgLT0gNDsgLy8gd2Ugd2FudCB0byBnZXQgdGhlIGxlZGdlcklkIGFu\nZCBsZW5ndGggdG8gY2hlY2sKICAgICAgICBCdWZmZXJlZENoYW5uZWwgZmM7\nCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZmMgPSBnZXRDaGFubmVsRm9y\nTG9nSWQoZW50cnlMb2dJZCk7CiAgICAgICAgfSBjYXRjaCAoRmlsZU5vdEZv\ndW5kRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgRmlsZU5vdEZvdW5kRXhj\nZXB0aW9uIG5ld2UgPSBuZXcgRmlsZU5vdEZvdW5kRXhjZXB0aW9uKGUuZ2V0\nTWVzc2FnZSgpICsgIiBmb3IgIiArIGxlZGdlcklkICsgIiB3aXRoIGxvY2F0\naW9uICIgKyBsb2NhdGlvbik7CiAgICAgICAgICAgIG5ld2Uuc2V0U3RhY2tU\ncmFjZShlLmdldFN0YWNrVHJhY2UoKSk7CiAgICAgICAgICAgIHRocm93IG5l\nd2U7CiAgICAgICAgfQogICAgICAgIGlmIChmYy5yZWFkKHNpemVCdWZmLCBw\nb3MpICE9IHNpemVCdWZmLmNhcGFjaXR5KCkpIHsKICAgICAgICAgICAgdGhy\nb3cgbmV3IElPRXhjZXB0aW9uKCJTaG9ydCByZWFkIGZyb20gZW50cnlsb2cg\nIiArIGVudHJ5TG9nSWQpOwogICAgICAgIH0KICAgICAgICBwb3MgKz0gNDsK\nICAgICAgICBzaXplQnVmZi5mbGlwKCk7CiAgICAgICAgaW50IGVudHJ5U2l6\nZSA9IHNpemVCdWZmLmdldEludCgpOwogICAgICAgIC8vIGVudHJ5U2l6ZSBk\nb2VzIG5vdCBpbmNsdWRlIHRoZSBsZWRnZXJJZAogICAgICAgIGlmIChlbnRy\neVNpemUgPiBNQikgewogICAgICAgICAgICBMT0cuZXJyb3IoIlNhbml0eSBj\naGVjayBmYWlsZWQgZm9yIGVudHJ5IHNpemUgb2YgIiArIGVudHJ5U2l6ZSAr\nICIgYXQgbG9jYXRpb24gIiArIHBvcyArICIgaW4gIiArIGVudHJ5TG9nSWQp\nOwoKICAgICAgICB9CiAgICAgICAgYnl0ZSBkYXRhW10gPSBuZXcgYnl0ZVtl\nbnRyeVNpemVdOwogICAgICAgIEJ5dGVCdWZmZXIgYnVmZiA9IEJ5dGVCdWZm\nZXIud3JhcChkYXRhKTsKICAgICAgICBpbnQgcmMgPSBmYy5yZWFkKGJ1ZmYs\nIHBvcyk7CiAgICAgICAgaWYgKCByYyAhPSBkYXRhLmxlbmd0aCkgewogICAg\nICAgICAgICB0aHJvdyBuZXcgSU9FeGNlcHRpb24oIlNob3J0IHJlYWQgZm9y\nICIgKyBsZWRnZXJJZCArICJAIiArIGVudHJ5SWQgKyAiIGluICIgKyBlbnRy\neUxvZ0lkICsgIkAiICsgcG9zICsgIigiK3JjKyIhPSIrZGF0YS5sZW5ndGgr\nIikiKTsKICAgICAgICB9CiAgICAgICAgYnVmZi5mbGlwKCk7CiAgICAgICAg\nbG9uZyB0aGlzTGVkZ2VySWQgPSBidWZmLmdldExvbmcoKTsKICAgICAgICBp\nZiAodGhpc0xlZGdlcklkICE9IGxlZGdlcklkKSB7CiAgICAgICAgICAgIHRo\ncm93IG5ldyBJT0V4Y2VwdGlvbigicHJvYmxlbSBmb3VuZCBpbiAiICsgZW50\ncnlMb2dJZCArICJAIiArIGVudHJ5SWQgKyAiIGF0IHBvc2l0aW9uICsgIiAr\nIHBvcyArICIgZW50cnkgYmVsb25ncyB0byAiICsgdGhpc0xlZGdlcklkICsg\nIiBub3QgIiArIGxlZGdlcklkKTsKICAgICAgICB9CiAgICAgICAgbG9uZyB0\naGlzRW50cnlJZCA9IGJ1ZmYuZ2V0TG9uZygpOwogICAgICAgIGlmICh0aGlz\nRW50cnlJZCAhPSBlbnRyeUlkKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJ\nT0V4Y2VwdGlvbigicHJvYmxlbSBmb3VuZCBpbiAiICsgZW50cnlMb2dJZCAr\nICJAIiArIGVudHJ5SWQgKyAiIGF0IHBvc2l0aW9uICsgIiArIHBvcyArICIg\nZW50cnkgaXMgIiArIHRoaXNFbnRyeUlkICsgIiBub3QgIiArIGVudHJ5SWQp\nOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGRhdGE7CiAgICB9CgogICAg\ncHJpdmF0ZSBCdWZmZXJlZENoYW5uZWwgZ2V0Q2hhbm5lbEZvckxvZ0lkKGxv\nbmcgZW50cnlMb2dJZCkgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICBC\ndWZmZXJlZENoYW5uZWwgZmMgPSBjaGFubmVscy5nZXQoZW50cnlMb2dJZCk7\nCiAgICAgICAgaWYgKGZjICE9IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJu\nIGZjOwogICAgICAgIH0KICAgICAgICBGaWxlIGZpbGUgPSBmaW5kRmlsZShl\nbnRyeUxvZ0lkKTsKICAgICAgICAvLyBnZXQgY2hhbm5lbCBpcyB1c2VkIHRv\nIG9wZW4gYW4gZXhpc3RpbmcgZW50cnkgbG9nIGZpbGUKICAgICAgICAvLyBp\ndCB3b3VsZCBiZSBiZXR0ZXIgdG8gb3BlbiB1c2luZyByZWFkIG1vZGUKICAg\nICAgICBGaWxlQ2hhbm5lbCBuZXdGYyA9IG5ldyBSYW5kb21BY2Nlc3NGaWxl\nKGZpbGUsICJyIikuZ2V0Q2hhbm5lbCgpOwogICAgICAgIC8vIElmIHRoZSBm\naWxlIGFscmVhZHkgZXhpc3RzIGJlZm9yZSBjcmVhdGluZyBhIEJ1ZmZlcmVk\nQ2hhbm5lbCBsYXllciBhYm92ZSBpdCwKICAgICAgICAvLyBzZXQgdGhlIEZp\nbGVDaGFubmVsJ3MgcG9zaXRpb24gdG8gdGhlIGVuZCBzbyB0aGUgd3JpdGUg\nYnVmZmVyIGtub3dzIHdoZXJlIHRvIHN0YXJ0LgogICAgICAgIG5ld0ZjLnBv\nc2l0aW9uKG5ld0ZjLnNpemUoKSk7CiAgICAgICAgZmMgPSBuZXcgQnVmZmVy\nZWRDaGFubmVsKG5ld0ZjLCA4MTkyKTsKCiAgICAgICAgQnVmZmVyZWRDaGFu\nbmVsIG9sZGZjID0gY2hhbm5lbHMucHV0SWZBYnNlbnQoZW50cnlMb2dJZCwg\nZmMpOwogICAgICAgIGlmIChvbGRmYyAhPSBudWxsKSB7CiAgICAgICAgICAg\nIG5ld0ZjLmNsb3NlKCk7CiAgICAgICAgICAgIHJldHVybiBvbGRmYzsKICAg\nICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gZmM7CiAgICAgICAg\nfQogICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciB0aGUgbG9nIGZpbGUg\nZXhpc3RzIG9yIG5vdC4KICAgICAqLwogICAgYm9vbGVhbiBsb2dFeGlzdHMo\nbG9uZyBsb2dJZCkgewogICAgICAgIGZvciAoRmlsZSBkIDogZGlycykgewog\nICAgICAgICAgICBGaWxlIGYgPSBuZXcgRmlsZShkLCBMb25nLnRvSGV4U3Ry\naW5nKGxvZ0lkKSArICIubG9nIik7CiAgICAgICAgICAgIGlmIChmLmV4aXN0\ncygpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAg\nICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9Cgog\nICAgcHJpdmF0ZSBGaWxlIGZpbmRGaWxlKGxvbmcgbG9nSWQpIHRocm93cyBG\naWxlTm90Rm91bmRFeGNlcHRpb24gewogICAgICAgIGZvcihGaWxlIGQ6IGRp\ncnMpIHsKICAgICAgICAgICAgRmlsZSBmID0gbmV3IEZpbGUoZCwgTG9uZy50\nb0hleFN0cmluZyhsb2dJZCkrIi5sb2ciKTsKICAgICAgICAgICAgaWYgKGYu\nZXhpc3RzKCkpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmOwogICAgICAg\nICAgICB9CiAgICAgICAgfQogICAgICAgIHRocm93IG5ldyBGaWxlTm90Rm91\nbmRFeGNlcHRpb24oIk5vIGZpbGUgZm9yIGxvZyAiICsgTG9uZy50b0hleFN0\ncmluZyhsb2dJZCkpOwogICAgfQoKICAgIC8qKgogICAgICogU2NhbiBlbnRy\neSBsb2cKICAgICAqCiAgICAgKiBAcGFyYW0gZW50cnlMb2dJZAogICAgICog\nICAgICAgICAgRW50cnkgTG9nIElkCiAgICAgKiBAcGFyYW0gc2Nhbm5lcgog\nICAgICogICAgICAgICAgRW50cnkgTG9nIFNjYW5uZXIKICAgICAqIEB0aHJv\nd3MgSU9FeGNlcHRpb24KICAgICAqLwogICAgcHJvdGVjdGVkIHZvaWQgc2Nh\nbkVudHJ5TG9nKGxvbmcgZW50cnlMb2dJZCwgRW50cnlMb2dTY2FubmVyIHNj\nYW5uZXIpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgQnl0ZUJ1ZmZl\nciBzaXplQnVmZiA9IEJ5dGVCdWZmZXIuYWxsb2NhdGUoNCk7CiAgICAgICAg\nQnl0ZUJ1ZmZlciBsaWRCdWZmID0gQnl0ZUJ1ZmZlci5hbGxvY2F0ZSg4KTsK\nICAgICAgICBCdWZmZXJlZENoYW5uZWwgYmM7CiAgICAgICAgLy8gR2V0IHRo\nZSBCdWZmZXJlZENoYW5uZWwgZm9yIHRoZSBjdXJyZW50IGVudHJ5IGxvZyBm\naWxlCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgYmMgPSBnZXRDaGFubmVs\nRm9yTG9nSWQoZW50cnlMb2dJZCk7CiAgICAgICAgfSBjYXRjaCAoSU9FeGNl\ncHRpb24gZSkgewogICAgICAgICAgICBMT0cud2FybigiRmFpbGVkIHRvIGdl\ndCBjaGFubmVsIHRvIHNjYW4gZW50cnkgbG9nOiAiICsgZW50cnlMb2dJZCAr\nICIubG9nIik7CiAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgfQogICAg\nICAgIC8vIFN0YXJ0IHRoZSByZWFkIHBvc2l0aW9uIGluIHRoZSBjdXJyZW50\nIGVudHJ5IGxvZyBmaWxlIHRvIGJlIGFmdGVyCiAgICAgICAgLy8gdGhlIGhl\nYWRlciB3aGVyZSBhbGwgb2YgdGhlIGxlZGdlciBlbnRyaWVzIGFyZS4KICAg\nICAgICBsb25nIHBvcyA9IExPR0ZJTEVfSEVBREVSX1NJWkU7CiAgICAgICAg\nLy8gUmVhZCB0aHJvdWdoIHRoZSBlbnRyeSBsb2cgZmlsZSBhbmQgZXh0cmFj\ndCB0aGUgbGVkZ2VyIElEJ3MuCiAgICAgICAgd2hpbGUgKHRydWUpIHsKICAg\nICAgICAgICAgLy8gQ2hlY2sgaWYgd2UndmUgZmluaXNoZWQgcmVhZGluZyB0\naGUgZW50cnkgbG9nIGZpbGUuCiAgICAgICAgICAgIGlmIChwb3MgPj0gYmMu\nc2l6ZSgpKSB7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAg\nfQogICAgICAgICAgICBpZiAoYmMucmVhZChzaXplQnVmZiwgcG9zKSAhPSBz\naXplQnVmZi5jYXBhY2l0eSgpKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBu\nZXcgSU9FeGNlcHRpb24oIlNob3J0IHJlYWQgZm9yIGVudHJ5IHNpemUgZnJv\nbSBlbnRyeWxvZyAiICsgZW50cnlMb2dJZCk7CiAgICAgICAgICAgIH0KICAg\nICAgICAgICAgcG9zICs9IDQ7CiAgICAgICAgICAgIHNpemVCdWZmLmZsaXAo\nKTsKICAgICAgICAgICAgaW50IGVudHJ5U2l6ZSA9IHNpemVCdWZmLmdldElu\ndCgpOwogICAgICAgICAgICBpZiAoZW50cnlTaXplID4gTUIpIHsKICAgICAg\nICAgICAgICAgIExPRy53YXJuKCJGb3VuZCBsYXJnZSBzaXplIGVudHJ5IG9m\nICIgKyBlbnRyeVNpemUgKyAiIGF0IGxvY2F0aW9uICIgKyBwb3MgKyAiIGlu\nICIKICAgICAgICAgICAgICAgICAgICAgICAgKyBlbnRyeUxvZ0lkKTsKICAg\nICAgICAgICAgfQogICAgICAgICAgICBzaXplQnVmZi5jbGVhcigpOwogICAg\nICAgICAgICAvLyB0cnkgdG8gcmVhZCBsZWRnZXIgaWQgZmlyc3QKICAgICAg\nICAgICAgaWYgKGJjLnJlYWQobGlkQnVmZiwgcG9zKSAhPSBsaWRCdWZmLmNh\ncGFjaXR5KCkpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBJT0V4Y2Vw\ndGlvbigiU2hvcnQgcmVhZCBmb3IgbGVkZ2VyIGlkIGZyb20gZW50cnlsb2cg\nIiArIGVudHJ5TG9nSWQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxp\nZEJ1ZmYuZmxpcCgpOwogICAgICAgICAgICBsb25nIGxpZCA9IGxpZEJ1ZmYu\nZ2V0TG9uZygpOwogICAgICAgICAgICBsaWRCdWZmLmNsZWFyKCk7CiAgICAg\nICAgICAgIGlmICghc2Nhbm5lci5hY2NlcHQobGlkKSkgewogICAgICAgICAg\nICAgICAgLy8gc2tpcCB0aGlzIGVudHJ5CiAgICAgICAgICAgICAgICBwb3Mg\nKz0gZW50cnlTaXplOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAg\nICAgICAgIH0KICAgICAgICAgICAgLy8gcmVhZCB0aGUgZW50cnkKICAgICAg\nICAgICAgYnl0ZSBkYXRhW10gPSBuZXcgYnl0ZVtlbnRyeVNpemVdOwogICAg\nICAgICAgICBCeXRlQnVmZmVyIGJ1ZmYgPSBCeXRlQnVmZmVyLndyYXAoZGF0\nYSk7CiAgICAgICAgICAgIGludCByYyA9IGJjLnJlYWQoYnVmZiwgcG9zKTsK\nICAgICAgICAgICAgaWYgKHJjICE9IGRhdGEubGVuZ3RoKSB7CiAgICAgICAg\nICAgICAgICB0aHJvdyBuZXcgSU9FeGNlcHRpb24oIlNob3J0IHJlYWQgZm9y\nIGxlZGdlciBlbnRyeSBmcm9tIGVudHJ5TG9nICIgKyBlbnRyeUxvZ0lkCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgIkAiICsgcG9z\nICsgIigiICsgcmMgKyAiIT0iICsgZGF0YS5sZW5ndGggKyAiKSIpOwogICAg\nICAgICAgICB9CiAgICAgICAgICAgIGJ1ZmYuZmxpcCgpOwogICAgICAgICAg\nICAvLyBwcm9jZXNzIHRoZSBlbnRyeQogICAgICAgICAgICBzY2FubmVyLnBy\nb2Nlc3MobGlkLCBidWZmKTsKICAgICAgICAgICAgLy8gQWR2YW5jZSBwb3Np\ndGlvbiB0byB0aGUgbmV4dCBlbnRyeQogICAgICAgICAgICBwb3MgKz0gZW50\ncnlTaXplOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFNodXRk\nb3duIG1ldGhvZCB0byBncmFjZWZ1bGx5IHN0b3AgZW50cnkgbG9nZ2VyLgog\nICAgICovCiAgICBwdWJsaWMgdm9pZCBzaHV0ZG93bigpIHsKICAgICAgICAv\nLyBzaW5jZSBsb2dDaGFubmVsIGlzIGJ1ZmZlcmVkIGNoYW5uZWwsIGRvIGZs\ndXNoIHdoZW4gc2h1dHRpbmcgZG93bgogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIGZsdXNoKCk7CiAgICAgICAgICAgIGxvZ0NoYW5uZWwuZ2V0RmlsZUNo\nYW5uZWwoKS5jbG9zZSgpOwogICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9u\nIGllKSB7CiAgICAgICAgICAgIC8vIHdlIGhhdmUgbm8gaWRlYSBob3cgdG8g\nYXZvaWQgaW8gZXhjZXB0aW9uIGR1cmluZyBzaHV0dGluZyBkb3duLCBzbyBq\ndXN0IGlnbm9yZSBpdAogICAgICAgICAgICBMT0cuZXJyb3IoIkVycm9yIGZs\ndXNoIGVudHJ5IGxvZyBkdXJpbmcgc2h1dHRpbmcgZG93biwgd2hpY2ggbWF5\nIGNhdXNlIGVudHJ5IGxvZyBjb3JydXB0ZWQuIiwgaWUpOwogICAgICAgIH0g\nZmluYWxseSB7CiAgICAgICAgICAgIGlmIChsb2dDaGFubmVsLmdldEZpbGVD\naGFubmVsKCkuaXNPcGVuKCkpIHsKICAgICAgICAgICAgICAgIElPVXRpbHMu\nY2xvc2UoTE9HLCBsb2dDaGFubmVsLmdldEZpbGVDaGFubmVsKCkpOwogICAg\nICAgICAgICB9CiAgICAgICAgfQogICAgfQoKfQo=\n","encoding":"base64"}

