{"sha":"558e8cf151911d834ee63c9b8a6e5bdc6bf335e1","node_id":"MDQ6QmxvYjE1NzU5NTY6NTU4ZThjZjE1MTkxMWQ4MzRlZTYzYzliOGE2ZTViZGM2YmYzMzVlMQ==","size":2292,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/558e8cf151911d834ee63c9b8a6e5bdc6bf335e1","content":"LyoKICoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9y\nIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBU\naGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhl\nIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNl\nIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBs\naWFuY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEg\nY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBl\naXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZv\nciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Np\nb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICoK\nICovCgpwYWNrYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci5ib29raWU7Cgpp\nbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5I\nYXNoTWFwOwoKY2xhc3MgSGFuZGxlRmFjdG9yeUltcGwgaW1wbGVtZW50cyBI\nYW5kbGVGYWN0b3J5IHsKICAgIEhhc2hNYXA8TG9uZywgTGVkZ2VyRGVzY3Jp\ncHRvcj4gbGVkZ2VycyA9IG5ldyBIYXNoTWFwPExvbmcsIExlZGdlckRlc2Ny\naXB0b3I+KCk7CiAgICBIYXNoTWFwPExvbmcsIExlZGdlckRlc2NyaXB0b3I+\nIHJlYWRPbmx5TGVkZ2VycwogICAgICAgID0gbmV3IEhhc2hNYXA8TG9uZywg\nTGVkZ2VyRGVzY3JpcHRvcj4oKTsKCiAgICBmaW5hbCBMZWRnZXJTdG9yYWdl\nIGxlZGdlclN0b3JhZ2U7CgogICAgSGFuZGxlRmFjdG9yeUltcGwoTGVkZ2Vy\nU3RvcmFnZSBsZWRnZXJTdG9yYWdlKSB7CiAgICAgICAgdGhpcy5sZWRnZXJT\ndG9yYWdlID0gbGVkZ2VyU3RvcmFnZTsKICAgIH0KCiAgICBAT3ZlcnJpZGUK\nICAgIHB1YmxpYyBMZWRnZXJEZXNjcmlwdG9yIGdldEhhbmRsZShsb25nIGxl\nZGdlcklkLCBieXRlW10gbWFzdGVyS2V5KQogICAgICAgICAgICB0aHJvd3Mg\nSU9FeGNlcHRpb24sIEJvb2tpZUV4Y2VwdGlvbiB7CiAgICAgICAgTGVkZ2Vy\nRGVzY3JpcHRvciBoYW5kbGUgPSBudWxsOwogICAgICAgIHN5bmNocm9uaXpl\nZCAobGVkZ2VycykgewogICAgICAgICAgICBoYW5kbGUgPSBsZWRnZXJzLmdl\ndChsZWRnZXJJZCk7CiAgICAgICAgICAgIGlmIChoYW5kbGUgPT0gbnVsbCkg\newogICAgICAgICAgICAgICAgaGFuZGxlID0gTGVkZ2VyRGVzY3JpcHRvci5j\ncmVhdGUobWFzdGVyS2V5LCBsZWRnZXJJZCwgbGVkZ2VyU3RvcmFnZSk7CiAg\nICAgICAgICAgICAgICBsZWRnZXJzLnB1dChsZWRnZXJJZCwgaGFuZGxlKTsK\nICAgICAgICAgICAgfQogICAgICAgICAgICBoYW5kbGUuY2hlY2tBY2Nlc3Mo\nbWFzdGVyS2V5KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGhhbmRsZTsK\nICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBMZWRnZXJEZXNjcmlw\ndG9yIGdldFJlYWRPbmx5SGFuZGxlKGxvbmcgbGVkZ2VySWQpCiAgICAgICAg\nICAgIHRocm93cyBJT0V4Y2VwdGlvbiwgQm9va2llLk5vTGVkZ2VyRXhjZXB0\naW9uIHsKICAgICAgICBMZWRnZXJEZXNjcmlwdG9yIGhhbmRsZSA9IG51bGw7\nCiAgICAgICAgc3luY2hyb25pemVkIChsZWRnZXJzKSB7CiAgICAgICAgICAg\nIGhhbmRsZSA9IHJlYWRPbmx5TGVkZ2Vycy5nZXQobGVkZ2VySWQpOwogICAg\nICAgICAgICBpZiAoaGFuZGxlID09IG51bGwpIHsKICAgICAgICAgICAgICAg\nIGhhbmRsZSA9IExlZGdlckRlc2NyaXB0b3IuY3JlYXRlUmVhZE9ubHkobGVk\nZ2VySWQsIGxlZGdlclN0b3JhZ2UpOwogICAgICAgICAgICAgICAgcmVhZE9u\nbHlMZWRnZXJzLnB1dChsZWRnZXJJZCwgaGFuZGxlKTsKICAgICAgICAgICAg\nfQogICAgICAgIH0KICAgICAgICByZXR1cm4gaGFuZGxlOwogICAgfQp9\n","encoding":"base64"}

