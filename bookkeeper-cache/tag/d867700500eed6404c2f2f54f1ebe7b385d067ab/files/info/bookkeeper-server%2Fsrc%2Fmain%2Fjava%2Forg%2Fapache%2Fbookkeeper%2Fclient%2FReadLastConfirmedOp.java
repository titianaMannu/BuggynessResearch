{"sha":"f20ee8882cd24509eb346fd878077d3a969171e2","node_id":"MDQ6QmxvYjE1NzU5NTY6ZjIwZWU4ODgyY2QyNDUwOWViMzQ2ZmQ4NzgwNzdkM2E5NjkxNzFlMg==","size":5508,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/f20ee8882cd24509eb346fd878077d3a969171e2","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY2xpZW50OwovKiBMaWNl\nbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikg\ndW5kZXIgb25lCiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3Jl\nZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQogKiBkaXN0cmlidXRlZCB3\naXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbgogKiBy\nZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5z\nZXMgdGhpcyBmaWxlCiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUKICogIkxpY2Vuc2UiKTsgeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZQogKiB3aXRo\nIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBM\naWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGlj\nZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFw\ncGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2Fy\nZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmli\ndXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJ\nRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mg\nb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lm\naWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1p\ndGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgppbXBvcnQgamF2YS51\ndGlsLkVudW1TZXQ7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY2xp\nZW50LkFzeW5jQ2FsbGJhY2suUmVhZExhc3RDb25maXJtZWRDYWxsYmFjazsK\naW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5jbGllbnQuQktFeGNlcHRp\nb24uQktEaWdlc3RNYXRjaEV4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUu\nYm9va2tlZXBlci5jbGllbnQuRGlnZXN0TWFuYWdlci5SZWNvdmVyeURhdGE7\nCmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIucHJvdG8uQm9va2tlZXBl\nckludGVybmFsQ2FsbGJhY2tzLlJlYWRFbnRyeUNhbGxiYWNrOwppbXBvcnQg\nb3JnLmFwYWNoZS5ib29ra2VlcGVyLnByb3RvLkJvb2tpZVByb3RvY29sOwpp\nbXBvcnQgb3JnLnNsZjRqLkxvZ2dlcjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dn\nZXJGYWN0b3J5OwppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmJ1ZmZlci5DaGFu\nbmVsQnVmZmVyOwoKLyoqCiAqIFRoaXMgY2xhc3MgZW5jYXBzdWxhdGVkIHRo\nZSByZWFkIGxhc3QgY29uZmlybWVkIG9wZXJhdGlvbi4KICoKICovCmNsYXNz\nIFJlYWRMYXN0Q29uZmlybWVkT3AgaW1wbGVtZW50cyBSZWFkRW50cnlDYWxs\nYmFjayB7CiAgICBzdGF0aWMgZmluYWwgTG9nZ2VyIExPRyA9IExvZ2dlckZh\nY3RvcnkuZ2V0TG9nZ2VyKExlZGdlclJlY292ZXJ5T3AuY2xhc3MpOwogICAg\nTGVkZ2VySGFuZGxlIGxoOwogICAgaW50IG51bVJlc3BvbnNlc1BlbmRpbmc7\nCiAgICBSZWNvdmVyeURhdGEgbWF4UmVjb3ZlcmVkRGF0YTsKICAgIHZvbGF0\naWxlIGJvb2xlYW4gY29tcGxldGVkID0gZmFsc2U7CgogICAgTGFzdENvbmZp\ncm1lZERhdGFDYWxsYmFjayBjYjsKICAgIGZpbmFsIERpc3RyaWJ1dGlvblNj\naGVkdWxlLlF1b3J1bUNvdmVyYWdlU2V0IGNvdmVyYWdlU2V0OwoKICAgIC8q\nKgogICAgICogV3JhcHBlciB0byBnZXQgYWxsIHJlY292ZXJlZCBkYXRhIGZy\nb20gdGhlIHJlcXVlc3QKICAgICAqLwogICAgaW50ZXJmYWNlIExhc3RDb25m\naXJtZWREYXRhQ2FsbGJhY2sgewogICAgICAgIHB1YmxpYyB2b2lkIHJlYWRM\nYXN0Q29uZmlybWVkRGF0YUNvbXBsZXRlKGludCByYywgUmVjb3ZlcnlEYXRh\nIGRhdGEpOwogICAgfQoKICAgIHB1YmxpYyBSZWFkTGFzdENvbmZpcm1lZE9w\nKExlZGdlckhhbmRsZSBsaCwgTGFzdENvbmZpcm1lZERhdGFDYWxsYmFjayBj\nYikgewogICAgICAgIHRoaXMuY2IgPSBjYjsKICAgICAgICB0aGlzLm1heFJl\nY292ZXJlZERhdGEgPSBuZXcgUmVjb3ZlcnlEYXRhKExlZGdlckhhbmRsZS5J\nTlZBTElEX0VOVFJZX0lELCAwKTsKICAgICAgICB0aGlzLmxoID0gbGg7CiAg\nICAgICAgdGhpcy5udW1SZXNwb25zZXNQZW5kaW5nID0gbGgubWV0YWRhdGEu\nZW5zZW1ibGVTaXplOwogICAgICAgIHRoaXMuY292ZXJhZ2VTZXQgPSBsaC5k\naXN0cmlidXRpb25TY2hlZHVsZS5nZXRDb3ZlcmFnZVNldCgpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIGluaXRpYXRlKCkgewogICAgICAgIGZvciAoaW50\nIGkgPSAwOyBpIDwgbGgubWV0YWRhdGEuY3VycmVudEVuc2VtYmxlLnNpemUo\nKTsgaSsrKSB7CiAgICAgICAgICAgIGxoLmJrLmJvb2tpZUNsaWVudC5yZWFk\nRW50cnkobGgubWV0YWRhdGEuY3VycmVudEVuc2VtYmxlLmdldChpKSwKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaC5sZWRn\nZXJJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICBCb29raWVQcm90b2NvbC5MQVNUX0FERF9DT05GSVJNRUQsCiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcywgaSk7CiAg\nICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIGluaXRpYXRlV2l0aEZl\nbmNpbmcoKSB7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBsaC5tZXRh\nZGF0YS5jdXJyZW50RW5zZW1ibGUuc2l6ZSgpOyBpKyspIHsKICAgICAgICAg\nICAgbGguYmsuYm9va2llQ2xpZW50LnJlYWRFbnRyeUFuZEZlbmNlTGVkZ2Vy\nKGxoLm1ldGFkYXRhLmN1cnJlbnRFbnNlbWJsZS5nZXQoaSksCiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICBsaC5sZWRnZXJJZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgIGxoLmxlZGdlcktleSwKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIEJvb2tpZVByb3RvY29sLkxBU1RfQUREX0NPTkZJUk1FRCwKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIHRoaXMsIGkpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgc3lu\nY2hyb25pemVkIHZvaWQgcmVhZEVudHJ5Q29tcGxldGUoZmluYWwgaW50IHJj\nLCBmaW5hbCBsb25nIGxlZGdlcklkLCBmaW5hbCBsb25nIGVudHJ5SWQsCiAg\nICAgICAgICAgIGZpbmFsIENoYW5uZWxCdWZmZXIgYnVmZmVyLCBmaW5hbCBP\nYmplY3QgY3R4KSB7CiAgICAgICAgaW50IGJvb2tpZUluZGV4ID0gKEludGVn\nZXIpIGN0eDsKCiAgICAgICAgbnVtUmVzcG9uc2VzUGVuZGluZy0tOwogICAg\nICAgIGJvb2xlYW4gaGVhcmRWYWxpZFJlc3BvbnNlID0gZmFsc2U7CiAgICAg\nICAgaWYgKHJjID09IEJLRXhjZXB0aW9uLkNvZGUuT0spIHsKICAgICAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgICAgIFJlY292ZXJ5RGF0YSByZWNvdmVy\neURhdGEgPSBsaC5tYWNNYW5hZ2VyLnZlcmlmeURpZ2VzdEFuZFJldHVybkxh\nc3RDb25maXJtZWQoYnVmZmVyKTsKICAgICAgICAgICAgICAgIGlmIChyZWNv\ndmVyeURhdGEubGFzdEFkZENvbmZpcm1lZCA+IG1heFJlY292ZXJlZERhdGEu\nbGFzdEFkZENvbmZpcm1lZCkgewogICAgICAgICAgICAgICAgICAgIG1heFJl\nY292ZXJlZERhdGEgPSByZWNvdmVyeURhdGE7CiAgICAgICAgICAgICAgICB9\nCiAgICAgICAgICAgICAgICBoZWFyZFZhbGlkUmVzcG9uc2UgPSB0cnVlOwog\nICAgICAgICAgICB9IGNhdGNoIChCS0RpZ2VzdE1hdGNoRXhjZXB0aW9uIGUp\nIHsKICAgICAgICAgICAgICAgIC8vIFRvbyBiYWQsIHRoaXMgYm9va2llIGRp\nZG4ndCBnaXZlIHVzIGEgdmFsaWQgYW5zd2VyLCB3ZQogICAgICAgICAgICAg\nICAgLy8gc3RpbGwgbWlnaHQgYmUgYWJsZSB0byByZWNvdmVyIHRob3VnaCBz\nbyBjb250aW51ZQogICAgICAgICAgICAgICAgTE9HLmVycm9yKCJNYWMgbWlz\nbWF0Y2ggd2hpbGUgcmVhZGluZyBsYXN0IGVudHJ5IGZyb20gYm9va2llOiAi\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgKyBsaC5tZXRhZGF0YS5jdXJy\nZW50RW5zZW1ibGUuZ2V0KGJvb2tpZUluZGV4KSk7CiAgICAgICAgICAgIH0K\nICAgICAgICB9CgogICAgICAgIGlmIChyYyA9PSBCS0V4Y2VwdGlvbi5Db2Rl\nLk5vU3VjaExlZGdlckV4aXN0c0V4Y2VwdGlvbiB8fCByYyA9PSBCS0V4Y2Vw\ndGlvbi5Db2RlLk5vU3VjaEVudHJ5RXhjZXB0aW9uKSB7CiAgICAgICAgICAg\nIC8vIHRoaXMgc3RpbGwgY291bnRzIGFzIGEgdmFsaWQgcmVzcG9uc2UsIGUu\nZy4sIGlmIHRoZSBjbGllbnQgY3Jhc2hlZCB3aXRob3V0IHdyaXRpbmcgYW55\nIGVudHJ5CiAgICAgICAgICAgIGhlYXJkVmFsaWRSZXNwb25zZSA9IHRydWU7\nCiAgICAgICAgfQoKICAgICAgICBpZiAocmMgPT0gQktFeGNlcHRpb24uQ29k\nZS5VbmF1dGhvcml6ZWRBY2Nlc3NFeGNlcHRpb24gICYmICFjb21wbGV0ZWQp\nIHsKICAgICAgICAgICAgY2IucmVhZExhc3RDb25maXJtZWREYXRhQ29tcGxl\ndGUocmMsIG1heFJlY292ZXJlZERhdGEpOwogICAgICAgICAgICBjb21wbGV0\nZWQgPSB0cnVlOwogICAgICAgIH0KICAgICAgICAvLyBvdGhlciByZXR1cm4g\nY29kZXMgZG9udCBjb3VudCBhcyB2YWxpZCByZXNwb25zZXMKICAgICAgICBp\nZiAoaGVhcmRWYWxpZFJlc3BvbnNlCiAgICAgICAgICAgICYmIGNvdmVyYWdl\nU2V0LmFkZEJvb2tpZUFuZENoZWNrQ292ZXJlZChib29raWVJbmRleCkKICAg\nICAgICAgICAgJiYgIWNvbXBsZXRlZCkgewogICAgICAgICAgICBjb21wbGV0\nZWQgPSB0cnVlOwogICAgICAgICAgICBpZiAoTE9HLmlzRGVidWdFbmFibGVk\nKCkpIHsKICAgICAgICAgICAgICAgIExPRy5kZWJ1ZygiUmVhZCBDb21wbGV0\nZSB3aXRoIGVub3VnaCB2YWxpZFJlc3BvbnNlcyIpOwogICAgICAgICAgICB9\nCgogICAgICAgICAgICBjYi5yZWFkTGFzdENvbmZpcm1lZERhdGFDb21wbGV0\nZShCS0V4Y2VwdGlvbi5Db2RlLk9LLCBtYXhSZWNvdmVyZWREYXRhKTsKICAg\nICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKG51bVJl\nc3BvbnNlc1BlbmRpbmcgPT0gMCAmJiAhY29tcGxldGVkKSB7CiAgICAgICAg\nICAgIC8vIEhhdmUgZ290IGFsbCByZXNwb25zZXMgYmFjayBidXQgd2FzIHN0\naWxsIG5vdCBlbm91Z2gsIGp1c3QgZmFpbCB0aGUgb3BlcmF0aW9uCiAgICAg\nICAgICAgIExPRy5lcnJvcigiV2hpbGUgcmVhZExhc3RDb25maXJtZWQgbGVk\nZ2VyOiAiICsgbGVkZ2VySWQgKyAiIGRpZCBub3QgaGVhciBzdWNjZXNzIHJl\nc3BvbnNlcyBmcm9tIGFsbCBxdW9ydW1zIik7CiAgICAgICAgICAgIGNiLnJl\nYWRMYXN0Q29uZmlybWVkRGF0YUNvbXBsZXRlKEJLRXhjZXB0aW9uLkNvZGUu\nTGVkZ2VyUmVjb3ZlcnlFeGNlcHRpb24sIG1heFJlY292ZXJlZERhdGEpOwog\nICAgICAgIH0KCiAgICB9Cn0K\n","encoding":"base64"}

