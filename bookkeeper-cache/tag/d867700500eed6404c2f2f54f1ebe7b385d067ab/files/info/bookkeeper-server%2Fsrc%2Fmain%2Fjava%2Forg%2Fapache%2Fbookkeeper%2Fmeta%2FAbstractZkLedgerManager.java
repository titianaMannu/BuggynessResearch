{"sha":"ce5346166448b40912b08958e262d65316c41b8e","node_id":"MDQ6QmxvYjE1NzU5NTY6Y2U1MzQ2MTY2NDQ4YjQwOTEyYjA4OTU4ZTI2MmQ2NTMxNmM0MWI4ZQ==","size":11095,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/ce5346166448b40912b08958e262d65316c41b8e","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIubWV0YTsKCi8qKgogKiBM\naWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFT\nRikgdW5kZXIgb25lCiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBh\nZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQogKiBkaXN0cmlidXRl\nZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbgog\nKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGlj\nZW5zZXMgdGhpcyBmaWxlCiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExp\nY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUKICogIkxpY2Vuc2UiKTsgeW91IG1h\neSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZQogKiB3\naXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRo\nZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcv\nbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5\nIGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0\nd2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0\ncmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJB\nTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJl\nc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3Bl\nY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBs\naW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgppbXBvcnQgamF2\nYS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5IYXNoU2V0Owpp\nbXBvcnQgamF2YS51dGlsLkxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuU2V0Owpp\nbXBvcnQgamF2YS51dGlsLk1hcDsKCmltcG9ydCBvcmcuYXBhY2hlLmJvb2tr\nZWVwZXIuY29uZi5BYnN0cmFjdENvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcu\nYXBhY2hlLmJvb2trZWVwZXIubWV0YS5MZWRnZXJNYW5hZ2VyOwppbXBvcnQg\nb3JnLmFwYWNoZS5ib29ra2VlcGVyLnByb3RvLkJvb2trZWVwZXJJbnRlcm5h\nbENhbGxiYWNrcy5HZW5lcmljQ2FsbGJhY2s7CmltcG9ydCBvcmcuYXBhY2hl\nLmJvb2trZWVwZXIucHJvdG8uQm9va2tlZXBlckludGVybmFsQ2FsbGJhY2tz\nLk11bHRpQ2FsbGJhY2s7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIu\ncHJvdG8uQm9va2tlZXBlckludGVybmFsQ2FsbGJhY2tzLlByb2Nlc3NvcjsK\naW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXI7CmltcG9ydCBvcmcuc2xmNGouTG9n\nZ2VyRmFjdG9yeTsKCmltcG9ydCBvcmcuYXBhY2hlLnpvb2tlZXBlci5Bc3lu\nY0NhbGxiYWNrOwppbXBvcnQgb3JnLmFwYWNoZS56b29rZWVwZXIuS2VlcGVy\nRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS56b29rZWVwZXIuS2VlcGVy\nRXhjZXB0aW9uLkNvZGU7CmltcG9ydCBvcmcuYXBhY2hlLnpvb2tlZXBlci5a\nb29LZWVwZXI7CgovKioKICogQWJzdHJhY3QgbGVkZ2VyIG1hbmFnZXIgYmFz\nZWQgb24gem9va2VlcGVyLCB3aGljaCBwcm92aWRlcyBjb21tb24gbWV0aG9k\ncyBzdWNoIGFzIHF1ZXJ5IHprIG5vZGVzLgogKi8KYWJzdHJhY3QgY2xhc3Mg\nQWJzdHJhY3Raa0xlZGdlck1hbmFnZXIgaW1wbGVtZW50cyBMZWRnZXJNYW5h\nZ2VyIHsKCiAgICBzdGF0aWMgTG9nZ2VyIExPRyA9IExvZ2dlckZhY3Rvcnku\nZ2V0TG9nZ2VyKEFic3RyYWN0WmtMZWRnZXJNYW5hZ2VyLmNsYXNzKTsKCiAg\nICAvLyBMZWRnZXIgTm9kZSBQcmVmaXgKICAgIHN0YXRpYyBwdWJsaWMgZmlu\nYWwgU3RyaW5nIExFREdFUl9OT0RFX1BSRUZJWCA9ICJMIjsKICAgIHN0YXRp\nYyBmaW5hbCBTdHJpbmcgQVZBSUxBQkxFX05PREUgPSAiYXZhaWxhYmxlIjsK\nICAgIHN0YXRpYyBmaW5hbCBTdHJpbmcgQ09PS0lFU19OT0RFID0gImNvb2tp\nZXMiOwoKICAgIHByb3RlY3RlZCBmaW5hbCBBYnN0cmFjdENvbmZpZ3VyYXRp\nb24gY29uZjsKICAgIHByb3RlY3RlZCBmaW5hbCBab29LZWVwZXIgems7CiAg\nICBwcm90ZWN0ZWQgZmluYWwgU3RyaW5nIGxlZGdlclJvb3RQYXRoOwoKICAg\nIC8qKgogICAgICogWm9vS2VlcGVyLWJhc2VkIExlZGdlciBNYW5hZ2VyIENv\nbnN0cnVjdG9yCiAgICAgKgogICAgICogQHBhcmFtIGNvbmYKICAgICAqICAg\nICAgICAgIENvbmZpZ3VyYXRpb24gb2JqZWN0CiAgICAgKiBAcGFyYW0gemsK\nICAgICAqICAgICAgICAgIFpvb0tlZXBlciBDbGllbnQgSGFuZGxlCiAgICAg\nKiBAcGFyYW0gbGVkZ2VyUm9vdFBhdGgKICAgICAqICAgICAgICAgIFpvb0tl\nZXBlciBQYXRoIHRvIHN0b3JlIGxlZGdlciBtZXRhZGF0YQogICAgICovCiAg\nICBwcm90ZWN0ZWQgQWJzdHJhY3Raa0xlZGdlck1hbmFnZXIoQWJzdHJhY3RD\nb25maWd1cmF0aW9uIGNvbmYsIFpvb0tlZXBlciB6aywKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgbGVkZ2VyUm9vdFBh\ndGgpIHsKICAgICAgICB0aGlzLmNvbmYgPSBjb25mOwogICAgICAgIHRoaXMu\nemsgPSB6azsKICAgICAgICB0aGlzLmxlZGdlclJvb3RQYXRoID0gbGVkZ2Vy\nUm9vdFBhdGg7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgYWxsIHRoZSBs\nZWRnZXJzIGluIGEgc2luZ2xlIHprIG5vZGUKICAgICAqCiAgICAgKiBAcGFy\nYW0gbm9kZVBhdGgKICAgICAqICAgICAgICAgIFpvb2tlZXBlciBub2RlIHBh\ndGgKICAgICAqIEBwYXJhbSBnZXRMZWRnZXJzQ2FsbGJhY2sKICAgICAqICAg\nICAgICAgIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIHByb2Nlc3MgbGVkZ2VycyBp\nbiBhIHNpbmdsZSBub2RlCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIGFz\neW5jR2V0TGVkZ2Vyc0luU2luZ2xlTm9kZShmaW5hbCBTdHJpbmcgbm9kZVBh\ndGgsIGZpbmFsIEdlbmVyaWNDYWxsYmFjazxIYXNoU2V0PExvbmc+PiBnZXRM\nZWRnZXJzQ2FsbGJhY2spIHsKICAgICAgICAvLyBGaXJzdCBzeW5jIFpLIHRv\nIG1ha2Ugc3VyZSB3ZSdyZSByZWFkaW5nIHRoZSBsYXRlc3QgYWN0aXZlL2F2\nYWlsYWJsZSBsZWRnZXIgbm9kZXMuCiAgICAgICAgemsuc3luYyhub2RlUGF0\naCwgbmV3IEFzeW5jQ2FsbGJhY2suVm9pZENhbGxiYWNrKCkgewogICAgICAg\nICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIHZvaWQgcHJvY2Vz\nc1Jlc3VsdChpbnQgcmMsIFN0cmluZyBwYXRoLCBPYmplY3QgY3R4KSB7CiAg\nICAgICAgICAgICAgICBpZiAoTE9HLmlzRGVidWdFbmFibGVkKCkpIHsKICAg\nICAgICAgICAgICAgICAgICBMT0cuZGVidWcoIlN5bmMgbm9kZSBwYXRoICIg\nKyBwYXRoICsgIiByZXR1cm4gOiAiICsgcmMpOwogICAgICAgICAgICAgICAg\nfQogICAgICAgICAgICAgICAgaWYgKHJjICE9IENvZGUuT0suaW50VmFsdWUo\nKSkgewogICAgICAgICAgICAgICAgICAgIExPRy5lcnJvcigiWksgZXJyb3Ig\nc3luY2luZyB0aGUgbGVkZ2VycyBub2RlIHdoZW4gZ2V0dGluZyBjaGlsZHJl\nbjogIiwgS2VlcGVyRXhjZXB0aW9uCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAuY3JlYXRlKEtlZXBlckV4Y2VwdGlvbi5Db2RlLmdldChyYyksIHBh\ndGgpKTsKICAgICAgICAgICAgICAgICAgICBnZXRMZWRnZXJzQ2FsbGJhY2su\nb3BlcmF0aW9uQ29tcGxldGUocmMsIG51bGwpOwogICAgICAgICAgICAgICAg\nICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAg\nIC8vIFN5bmMgaGFzIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkgc28gbm93IHdl\nIGNhbiBwb2xsIFpLCiAgICAgICAgICAgICAgICAvLyBhbmQgcmVhZCBpbiB0\naGUgbGF0ZXN0IHNldCBvZiBhY3RpdmUgbGVkZ2VyIG5vZGVzLgogICAgICAg\nICAgICAgICAgZG9Bc3luY0dldExlZGdlcnNJblNpbmdsZU5vZGUobm9kZVBh\ndGgsIGdldExlZGdlcnNDYWxsYmFjayk7CiAgICAgICAgICAgIH0KICAgICAg\nICB9LCBudWxsKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgZG9Bc3luY0dl\ndExlZGdlcnNJblNpbmdsZU5vZGUoZmluYWwgU3RyaW5nIG5vZGVQYXRoLAog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIGZpbmFsIEdlbmVyaWNDYWxsYmFjazxIYXNoU2V0PExvbmc+PiBnZXRMZWRn\nZXJzQ2FsbGJhY2spIHsKICAgICAgICB6ay5nZXRDaGlsZHJlbihub2RlUGF0\naCwgZmFsc2UsIG5ldyBBc3luY0NhbGxiYWNrLkNoaWxkcmVuQ2FsbGJhY2so\nKSB7CiAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICBwdWJsaWMg\ndm9pZCBwcm9jZXNzUmVzdWx0KGludCByYywgU3RyaW5nIHBhdGgsIE9iamVj\ndCBjdHgsIExpc3Q8U3RyaW5nPiBsZWRnZXJOb2RlcykgewogICAgICAgICAg\nICAgICAgaWYgKHJjICE9IENvZGUuT0suaW50VmFsdWUoKSkgewogICAgICAg\nICAgICAgICAgICAgIExPRy5lcnJvcigiRXJyb3IgcG9sbGluZyBaSyBmb3Ig\ndGhlIGF2YWlsYWJsZSBsZWRnZXIgbm9kZXM6ICIsIEtlZXBlckV4Y2VwdGlv\nbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNyZWF0ZShLZWVwZXJF\neGNlcHRpb24uQ29kZS5nZXQocmMpLCBwYXRoKSk7CiAgICAgICAgICAgICAg\nICAgICAgZ2V0TGVkZ2Vyc0NhbGxiYWNrLm9wZXJhdGlvbkNvbXBsZXRlKHJj\nLCBudWxsKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAg\nICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoTE9HLmlzRGVidWdFbmFi\nbGVkKCkpIHsKICAgICAgICAgICAgICAgICAgICBMT0cuZGVidWcoIlJldHJp\nZXZlZCBjdXJyZW50IHNldCBvZiBsZWRnZXIgbm9kZXM6ICIgKyBsZWRnZXJO\nb2Rlcyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyBD\nb252ZXJ0IHRoZSBaSyByZXRyaWV2ZWQgbGVkZ2VyIG5vZGVzIHRvIGEgSGFz\naFNldCBmb3IgZWFzaWVyIGNvbXBhcmlzb25zLgogICAgICAgICAgICAgICAg\nSGFzaFNldDxMb25nPiBhbGxBY3RpdmVMZWRnZXJzID0gbmV3IEhhc2hTZXQ8\nTG9uZz4obGVkZ2VyTm9kZXMuc2l6ZSgpLCAxLjBmKTsKICAgICAgICAgICAg\nICAgIGZvciAoU3RyaW5nIGxlZGdlck5vZGUgOiBsZWRnZXJOb2Rlcykgewog\nICAgICAgICAgICAgICAgICAgIGlmIChpc1NwZWNpYWxabm9kZShsZWRnZXJO\nb2RlKSkgewogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAg\nICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsK\nICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29udmVydCB0aGUgbm9kZSBw\nYXRoIHRvIGxlZGdlciBpZCBhY2NvcmRpbmcgdG8gZGlmZmVyZW50IGxlZGdl\nciBtYW5hZ2VyIGltcGxlbWVudGF0aW9uCiAgICAgICAgICAgICAgICAgICAg\nICAgIGFsbEFjdGl2ZUxlZGdlcnMuYWRkKGdldExlZGdlcklkKHBhdGggKyAi\nLyIgKyBsZWRnZXJOb2RlKSk7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRj\naCAoSU9FeGNlcHRpb24gaWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAg\nTE9HLndhcm4oIkVycm9yIGV4dHJhY3RpbmcgbGVkZ2VySWQgZnJvbSBaSyBs\nZWRnZXIgbm9kZTogIiArIGxlZGdlck5vZGUpOwogICAgICAgICAgICAgICAg\nICAgICAgICAvLyBUaGlzIGlzIGEgcHJldHR5IGJhZCBlcnJvciBhcyBpdCBp\nbmRpY2F0ZXMgYSBsZWRnZXIgbm9kZSBpbiBaSwogICAgICAgICAgICAgICAg\nICAgICAgICAvLyBoYXMgYW4gaW5jb3JyZWN0IGZvcm1hdC4gRm9yIG5vdyBq\ndXN0IGNvbnRpbnVlIGFuZCBjb25zaWRlcgogICAgICAgICAgICAgICAgICAg\nICAgICAvLyB0aGlzIGFzIGEgbm9uLWV4aXN0ZW50IGxlZGdlci4KICAgICAg\nICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAg\nICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGdldExl\nZGdlcnNDYWxsYmFjay5vcGVyYXRpb25Db21wbGV0ZShyYywgYWxsQWN0aXZl\nTGVkZ2Vycyk7CgogICAgICAgICAgICB9CiAgICAgICAgfSwgbnVsbCk7CiAg\nICB9CgogICAgcHJpdmF0ZSBzdGF0aWMgY2xhc3MgR2V0TGVkZ2Vyc0N0eCB7\nCiAgICAgICAgaW50IHJjOwogICAgICAgIGJvb2xlYW4gZG9uZSA9IGZhbHNl\nOwogICAgICAgIEhhc2hTZXQ8TG9uZz4gbGVkZ2VycyA9IG51bGw7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBHZXQgYWxsIHRoZSBsZWRnZXJzIGluIGEgc2lu\nZ2xlIHprIG5vZGUKICAgICAqCiAgICAgKiBAcGFyYW0gbm9kZVBhdGgKICAg\nICAqICAgICAgICAgIFpvb2tlZXBlciBub2RlIHBhdGgKICAgICAqIEB0aHJv\nd3MgSU9FeGNlcHRpb24KICAgICAqIEB0aHJvd3MgSW50ZXJydXB0ZWRFeGNl\ncHRpb24KICAgICAqLwogICAgcHJvdGVjdGVkIEhhc2hTZXQ8TG9uZz4gZ2V0\nTGVkZ2Vyc0luU2luZ2xlTm9kZShmaW5hbCBTdHJpbmcgbm9kZVBhdGgpCiAg\nICAgICAgdGhyb3dzIElPRXhjZXB0aW9uLCBJbnRlcnJ1cHRlZEV4Y2VwdGlv\nbiB7CiAgICAgICAgZmluYWwgR2V0TGVkZ2Vyc0N0eCBjdHggPSBuZXcgR2V0\nTGVkZ2Vyc0N0eCgpOwogICAgICAgIGlmIChMT0cuaXNEZWJ1Z0VuYWJsZWQo\nKSkgewogICAgICAgICAgICBMT0cuZGVidWcoIlRyeSB0byBnZXQgbGVkZ2Vy\ncyBvZiBub2RlIDogIiArIG5vZGVQYXRoKTsKICAgICAgICB9CiAgICAgICAg\nYXN5bmNHZXRMZWRnZXJzSW5TaW5nbGVOb2RlKG5vZGVQYXRoLCBuZXcgR2Vu\nZXJpY0NhbGxiYWNrPEhhc2hTZXQ8TG9uZz4+KCkgewogICAgICAgICAgICAg\nICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBvcGVy\nYXRpb25Db21wbGV0ZShpbnQgcmMsIEhhc2hTZXQ8TG9uZz4gemtBY3RpdmVM\nZWRnZXJzKSB7CiAgICAgICAgICAgICAgICAgICAgc3luY2hyb25pemVkIChj\ndHgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKENvZGUuT0suaW50\nVmFsdWUoKSA9PSByYykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAg\nY3R4LmxlZGdlcnMgPSB6a0FjdGl2ZUxlZGdlcnM7CiAgICAgICAgICAgICAg\nICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnJjID0g\ncmM7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5kb25lID0gdHJ1ZTsK\nICAgICAgICAgICAgICAgICAgICAgICAgY3R4Lm5vdGlmeUFsbCgpOwogICAg\nICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAg\nICAgfSk7CgogICAgICAgIHN5bmNocm9uaXplZCAoY3R4KSB7CiAgICAgICAg\nICAgIHdoaWxlIChjdHguZG9uZSA9PSBmYWxzZSkgewogICAgICAgICAgICAg\nICAgY3R4LndhaXQoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAg\nICBpZiAoQ29kZS5PSy5pbnRWYWx1ZSgpICE9IGN0eC5yYykgewogICAgICAg\nICAgICB0aHJvdyBuZXcgSU9FeGNlcHRpb24oIkVycm9yIG9uIGdldHRpbmcg\nbGVkZ2VycyBmcm9tIG5vZGUgIiArIG5vZGVQYXRoKTsKICAgICAgICB9CiAg\nICAgICAgcmV0dXJuIGN0eC5sZWRnZXJzOwogICAgfQoKICAgIC8qKgogICAg\nICogUHJvY2VzcyBsZWRnZXJzIGluIGEgc2luZ2xlIHprIG5vZGUuCiAgICAg\nKgogICAgICogPHA+CiAgICAgKiBmb3IgZWFjaCBsZWRnZXIgZm91bmQgaW4g\ndGhpcyB6ayBub2RlLCBwcm9jZXNzb3IjcHJvY2VzcyhsZWRnZXJJZCkgd2ls\nbCBiZSB0cmlnZ2VycmVkCiAgICAgKiB0byBwcm9jZXNzIGEgc3BlY2lmaWMg\nbGVkZ2VyLiBhZnRlciBhbGwgbGVkZ2VycyBoYXMgYmVlbiBwcm9jZXNzZWQs\nIHRoZSBmaW5hbENiIHdpbGwKICAgICAqIGJlIGNhbGxlZCB3aXRoIHByb3Zp\nZGVkIGNvbnRleHQgb2JqZWN0LiBUaGUgUkMgcGFzc2VkIHRvIGZpbmFsQ2Ig\naXMgZGVjaWRlZCBieSA6CiAgICAgKiA8dWw+CiAgICAgKiA8bGk+IEFsbCBs\nZWRnZXJzIGFyZSBwcm9jZXNzZWQgc3VjY2Vzc2Z1bGx5LCBzdWNjZXNzUmMg\nd2lsbCBiZSBwYXNzZWQuCiAgICAgKiA8bGk+IEVpdGhlciBsZWRnZXIgaXMg\ncHJvY2Vzc2VkIGZhaWxlZCwgZmFpbHVyZVJjIHdpbGwgYmUgcGFzc2VkLgog\nICAgICogPC91bD4KICAgICAqIDwvcD4KICAgICAqCiAgICAgKiBAcGFyYW0g\ncGF0aAogICAgICogICAgICAgICAgWmsgbm9kZSBwYXRoIHRvIHN0b3JlIGxl\nZGdlcnMKICAgICAqIEBwYXJhbSBwcm9jZXNzb3IKICAgICAqICAgICAgICAg\nIFByb2Nlc3NvciBwcm92aWRlZCB0byBwcm9jZXNzIGxlZGdlcgogICAgICog\nQHBhcmFtIGZpbmFsQ2IKICAgICAqICAgICAgICAgIENhbGxiYWNrIG9iamVj\ndCB3aGVuIGFsbCBsZWRnZXJzIGFyZSBwcm9jZXNzZWQKICAgICAqIEBwYXJh\nbSBjdHgKICAgICAqICAgICAgICAgIENvbnRleHQgb2JqZWN0IHBhc3NlZCB0\nbyBmaW5hbENiCiAgICAgKiBAcGFyYW0gc3VjY2Vzc1JjCiAgICAgKiAgICAg\nICAgICBSQyBwYXNzZWQgdG8gZmluYWxDYiB3aGVuIGFsbCBsZWRnZXJzIGFy\nZSBwcm9jZXNzZWQgc3VjY2Vzc2Z1bGx5CiAgICAgKiBAcGFyYW0gZmFpbHVy\nZVJjCiAgICAgKiAgICAgICAgICBSQyBwYXNzZWQgdG8gZmluYWxDYiB3aGVu\nIGVpdGhlciBsZWRnZXIgaXMgcHJvY2Vzc2VkIGZhaWxlZAogICAgICovCiAg\nICBwcm90ZWN0ZWQgdm9pZCBhc3luY1Byb2Nlc3NMZWRnZXJzSW5TaW5nbGVO\nb2RlKAogICAgICAgICAgICBmaW5hbCBTdHJpbmcgcGF0aCwgZmluYWwgUHJv\nY2Vzc29yPExvbmc+IHByb2Nlc3NvciwKICAgICAgICAgICAgZmluYWwgQXN5\nbmNDYWxsYmFjay5Wb2lkQ2FsbGJhY2sgZmluYWxDYiwgZmluYWwgT2JqZWN0\nIGN0eCwKICAgICAgICAgICAgZmluYWwgaW50IHN1Y2Nlc3NSYywgZmluYWwg\naW50IGZhaWx1cmVSYykgewogICAgICAgIGFzeW5jR2V0TGVkZ2Vyc0luU2lu\nZ2xlTm9kZShwYXRoLCBuZXcgR2VuZXJpY0NhbGxiYWNrPEhhc2hTZXQ8TG9u\nZz4+KCkgewogICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVi\nbGljIHZvaWQgb3BlcmF0aW9uQ29tcGxldGUoaW50IHJjLCBIYXNoU2V0PExv\nbmc+IHprQWN0aXZlTGVkZ2VycykgewogICAgICAgICAgICAgICAgaWYgKENv\nZGUuT0suaW50VmFsdWUoKSAhPSByYykgewogICAgICAgICAgICAgICAgICAg\nIGZpbmFsQ2IucHJvY2Vzc1Jlc3VsdChmYWlsdXJlUmMsIG51bGwsIGN0eCk7\nCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAg\nfQoKICAgICAgICAgICAgICAgIGlmIChMT0cuaXNEZWJ1Z0VuYWJsZWQoKSkg\newogICAgICAgICAgICAgICAgICAgIExPRy5kZWJ1ZygiUHJvY2Vzc2luZyBs\nZWRnZXJzIDogIiArIHprQWN0aXZlTGVkZ2Vycyk7CiAgICAgICAgICAgICAg\nICB9CgogICAgICAgICAgICAgICAgLy8gbm8gbGVkZ2VycyBmb3VuZCwgcmV0\ndXJuIGRpcmVjdGx5CiAgICAgICAgICAgICAgICBpZiAoemtBY3RpdmVMZWRn\nZXJzLnNpemUoKSA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgZmluYWxD\nYi5wcm9jZXNzUmVzdWx0KHN1Y2Nlc3NSYywgbnVsbCwgY3R4KTsKICAgICAg\nICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAg\nICAgICAgICAgICAgTXVsdGlDYWxsYmFjayBtY2IgPSBuZXcgTXVsdGlDYWxs\nYmFjayh6a0FjdGl2ZUxlZGdlcnMuc2l6ZSgpLCBmaW5hbENiLCBjdHgsCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIHN1Y2Nlc3NSYywgZmFpbHVyZVJjKTsKICAgICAgICAgICAgICAg\nIC8vIHN0YXJ0IGxvb3Agb3ZlciBhbGwgbGVkZ2VycwogICAgICAgICAgICAg\nICAgZm9yIChMb25nIGxlZGdlciA6IHprQWN0aXZlTGVkZ2VycykgewogICAg\nICAgICAgICAgICAgICAgIHByb2Nlc3Nvci5wcm9jZXNzKGxlZGdlciwgbWNi\nKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0p\nOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciB0aGUgem5vZGUgYSBz\ncGVjaWFsIHpub2RlCiAgICAgKgogICAgICogQHBhcmFtIHpub2RlCiAgICAg\nKiAgICAgICAgICBabm9kZSBOYW1lCiAgICAgKiBAcmV0dXJuIHRydWUgIGlm\nIHRoZSB6bm9kZSBpcyBhIHNwZWNpYWwgem5vZGUgb3RoZXJ3aXNlIGZhbHNl\nCiAgICAgKi8KICAgIHByb3RlY3RlZCBib29sZWFuIGlzU3BlY2lhbFpub2Rl\nKFN0cmluZyB6bm9kZSkgewogICAgICAgIGlmIChBVkFJTEFCTEVfTk9ERS5l\ncXVhbHMoem5vZGUpCiAgICAgICAgICAgIHx8IENPT0tJRVNfTk9ERS5lcXVh\nbHMoem5vZGUpCiAgICAgICAgICAgIHx8IExlZGdlckxheW91dC5MQVlPVVRf\nWk5PREUuZXF1YWxzKHpub2RlKSkgewogICAgICAgICAgICByZXR1cm4gdHJ1\nZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAg\nIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgY2xvc2UoKSB7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBEbyBnYXJiYWdlIGNvbGxlY3RpbmcgY29tcGFyaW5n\nIGhvc3RlZCBsZWRnZXJzIGFuZCB6ayBsZWRnZXJzCiAgICAgKgogICAgICog\nQHBhcmFtIGdjCiAgICAgKiAgICAgICAgICBHYXJiYWdlIGNvbGxlY3RvciB0\nbyBkbyBnYXJiYWdlIGNvbGxlY3Rpb24gd2hlbiBmb3VuZCBpbmFjdGl2ZS9k\nZWxldGVkIGxlZGdlcnMKICAgICAqIEBwYXJhbSBia0FjdGl2ZUxlZGdlcnMK\nICAgICAqICAgICAgICAgIEFjdGl2ZSBsZWRnZXJzIGhvc3RlZCBpbiBib29r\naWUgc2VydmVyCiAgICAgKiBAcGFyYW0gemtBbGxMZWRnZXJzCiAgICAgKiAg\nICAgICAgICBBbGwgbGVkZ2VycyBzdG9yZWQgaW4gem9va2VlcGVyCiAgICAg\nKi8KICAgIHZvaWQgZG9HYyhHYXJiYWdlQ29sbGVjdG9yIGdjLCBNYXA8TG9u\nZywgQm9vbGVhbj4gYmtBY3RpdmVMZWRnZXJzLCBTZXQ8TG9uZz4gemtBbGxM\nZWRnZXJzKSB7CiAgICAgICAgLy8gcmVtb3ZlIGFueSBhY3RpdmUgbGVkZ2Vy\ncyB0aGF0IGRvZXNuJ3QgZXhpc3QgaW4gemsKICAgICAgICBmb3IgKExvbmcg\nYmtMaWQgOiBia0FjdGl2ZUxlZGdlcnMua2V5U2V0KCkpIHsKICAgICAgICAg\nICAgaWYgKCF6a0FsbExlZGdlcnMuY29udGFpbnMoYmtMaWQpKSB7CiAgICAg\nICAgICAgICAgICAvLyByZW1vdmUgaXQgZnJvbSBjdXJyZW50IGFjdGl2ZSBs\nZWRnZXIKICAgICAgICAgICAgICAgIGJrQWN0aXZlTGVkZ2Vycy5yZW1vdmUo\nYmtMaWQpOwogICAgICAgICAgICAgICAgZ2MuZ2MoYmtMaWQpOwogICAgICAg\nICAgICB9CiAgICAgICAgfQogICAgfQp9Cg==\n","encoding":"base64"}

