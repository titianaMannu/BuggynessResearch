{"sha":"1300974382d34066b8935cf399f0ad6a1455e008","node_id":"MDQ6QmxvYjE1NzU5NTY6MTMwMDk3NDM4MmQzNDA2NmI4OTM1Y2YzOTlmMGFkNmExNDU1ZTAwOA==","size":6520,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/1300974382d34066b8935cf399f0ad6a1455e008","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIubWV0YTsKCi8qKgogKiBM\naWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFT\nRikgdW5kZXIgb25lCiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBh\nZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQogKiBkaXN0cmlidXRl\nZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbgog\nKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGlj\nZW5zZXMgdGhpcyBmaWxlCiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExp\nY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUKICogIkxpY2Vuc2UiKTsgeW91IG1h\neSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZQogKiB3\naXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRo\nZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcv\nbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5\nIGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0\nd2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0\ncmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJB\nTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJl\nc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3Bl\nY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBs\naW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgppbXBvcnQgamF2\nYS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5IYXNoU2V0Owpp\nbXBvcnQgamF2YS51dGlsLk1hcDsKaW1wb3J0IGphdmEudXRpbC5TZXQ7Cgpp\nbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNsaWVudC5MZWRnZXJNZXRh\nZGF0YTsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5jb25mLkFic3Ry\nYWN0Q29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBl\nci5wcm90by5Cb29ra2VlcGVySW50ZXJuYWxDYWxsYmFja3MuR2VuZXJpY0Nh\nbGxiYWNrOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLnByb3RvLkJv\nb2trZWVwZXJJbnRlcm5hbENhbGxiYWNrcy5Qcm9jZXNzb3I7CmltcG9ydCBv\ncmcuYXBhY2hlLmJvb2trZWVwZXIudXRpbC5TdHJpbmdVdGlsczsKaW1wb3J0\nIG9yZy5hcGFjaGUuYm9va2tlZXBlci51dGlsLlprVXRpbHM7CmltcG9ydCBv\ncmcuYXBhY2hlLnpvb2tlZXBlci5Bc3luY0NhbGxiYWNrOwppbXBvcnQgb3Jn\nLmFwYWNoZS56b29rZWVwZXIuQXN5bmNDYWxsYmFjay5TdHJpbmdDYWxsYmFj\nazsKaW1wb3J0IG9yZy5hcGFjaGUuem9va2VlcGVyLkNyZWF0ZU1vZGU7Cmlt\ncG9ydCBvcmcuYXBhY2hlLnpvb2tlZXBlci5LZWVwZXJFeGNlcHRpb24uQ29k\nZTsKaW1wb3J0IG9yZy5hcGFjaGUuem9va2VlcGVyLlpvb0RlZnMuSWRzOwpp\nbXBvcnQgb3JnLmFwYWNoZS56b29rZWVwZXIuWm9vS2VlcGVyOwppbXBvcnQg\nb3JnLnNsZjRqLkxvZ2dlcjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJGYWN0\nb3J5OwoKLyoqCiAqIE1hbmFnZSBhbGwgbGVkZ2VycyBpbiBhIHNpbmdsZSB6\nayBub2RlLgogKgogKiA8cD4KICogQWxsIGxlZGdlcnMnIG1ldGFkYXRhIGFy\nZSBwdXQgaW4gYSBzaW5nbGUgemsgbm9kZSwgY3JlYXRlZCB1c2luZyB6ayBz\nZXF1ZW50aWFsIG5vZGUuCiAqIEVhY2ggbGVkZ2VyIG5vZGUgaXMgcHJlZml4\nZWQgd2l0aCAnTCcuCiAqIDwvcD4KICogPHA+CiAqIEFsbCBhY3RpdmVkIGxl\nZGdlcnMgZm91bmQgaW4gYm9va2llIHNlcnZlciBzaWRlIGlzIG1hbmFnZWQg\naW4gYSBoYXNoIG1hcC4KICogPC9wPgogKiA8cD4KICogR2FyYmFnZSBjb2xs\nZWN0aW9uIGluIEZsYXRMZWRnZXJNYW5hZ2VyIGlzIHByb2Nzc2VkIGFzIGJl\nbG93OgogKiA8dWw+CiAqIDxsaT4gZmV0Y2ggYWxsIGV4aXN0ZWQgbGVkZ2Vy\ncyBmcm9tIHpvb2tlZXBlciwgc2FpZCA8Yj56a0FjdGl2ZUxlZGdlcnM8L2I+\nCiAqIDxsaT4gZmV0Y2ggYWxsIGFjdGl2ZSBsZWRnZXJzIGZyb20gYm9va2ll\nIHNlcnZlciwgc2FpZCA8Yj5ia0FjdGl2ZUxlZGdlcnM8L2I+CiAqIDxsaT4g\nbG9vcCBvdmVyIDxiPmJrQWN0aXZlTGVkZ2VyczwvYj4gdG8gZmluZCB0aG9z\nZSBsZWRnZXJzIGFyZW4ndCBleGlzdGVkIGluCiAqIDxiPnprQWN0aXZlTGVk\nZ2VyczwvYj4sIGRvIGdhcmJhZ2UgY29sbGVjdGlvbiBvbiB0aGVtLgogKiA8\nL3VsPgogKiA8L3A+CiAqLwpjbGFzcyBGbGF0TGVkZ2VyTWFuYWdlciBleHRl\nbmRzIEFic3RyYWN0WmtMZWRnZXJNYW5hZ2VyIHsKCiAgICBzdGF0aWMgZmlu\nYWwgTG9nZ2VyIExPRyA9IExvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKEZsYXRM\nZWRnZXJNYW5hZ2VyLmNsYXNzKTsKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwg\nU3RyaW5nIE5BTUUgPSAiZmxhdCI7CiAgICBwdWJsaWMgc3RhdGljIGZpbmFs\nIGludCBDVVJfVkVSU0lPTiA9IDE7CgogICAgLy8gcGF0aCBwcmVmaXggdG8g\nc3RvcmUgbGVkZ2VyIHpub2RlcwogICAgcHJpdmF0ZSBmaW5hbCBTdHJpbmcg\nbGVkZ2VyUHJlZml4OwogICAgLy8gaGFzaCBtYXAgdG8gc3RvcmUgYWxsIGFj\ndGl2ZSBsZWRnZXIgaWRzCiAgICBwcml2YXRlIFNuYXBzaG90TWFwPExvbmcs\nIEJvb2xlYW4+IGFjdGl2ZUxlZGdlcnM7CgogICAgLyoqCiAgICAgKiBDb25z\ndHJ1Y3RvcgogICAgICoKICAgICAqIEBwYXJhbSBjb25mCiAgICAgKiAgICAg\nICAgICBDb25maWd1cmF0aW9uIG9iamVjdAogICAgICogQHBhcmFtIHprCiAg\nICAgKiAgICAgICAgICBab29LZWVwZXIgQ2xpZW50IEhhbmRsZQogICAgICog\nQHBhcmFtIGxlZGdlclJvb3RQYXRoCiAgICAgKiAgICAgICAgICBab29LZWVw\nZXIgUGF0aCB0byBzdG9yZSBsZWRnZXIgbWV0YWRhdGEKICAgICAqIEB0aHJv\nd3MgSU9FeGNlcHRpb24gd2hlbiB2ZXJzaW9uIGlzIG5vdCBjb21wYXRpYmxl\nCiAgICAgKi8KICAgIHB1YmxpYyBGbGF0TGVkZ2VyTWFuYWdlcihBYnN0cmFj\ndENvbmZpZ3VyYXRpb24gY29uZiwgWm9vS2VlcGVyIHprLAogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIFN0cmluZyBsZWRnZXJSb290UGF0aCwgaW50\nIGxheW91dFZlcnNpb24pCiAgICAgICAgdGhyb3dzIElPRXhjZXB0aW9uIHsK\nICAgICAgICBzdXBlcihjb25mLCB6aywgbGVkZ2VyUm9vdFBhdGgpOwoKICAg\nICAgICBpZiAobGF5b3V0VmVyc2lvbiAhPSBDVVJfVkVSU0lPTikgewogICAg\nICAgICAgICB0aHJvdyBuZXcgSU9FeGNlcHRpb24oIkluY29tcGF0aWJsZSBs\nYXlvdXQgdmVyc2lvbiBmb3VuZCA6ICIgCiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICArIGxheW91dFZlcnNpb24pOwogICAgICAgIH0KCiAg\nICAgICAgbGVkZ2VyUHJlZml4ID0gbGVkZ2VyUm9vdFBhdGggKyAiLyIgKyBM\nRURHRVJfTk9ERV9QUkVGSVg7CiAgICAgICAgYWN0aXZlTGVkZ2VycyA9IG5l\ndyBTbmFwc2hvdE1hcDxMb25nLCBCb29sZWFuPigpOwogICAgfQoKICAgIEBP\ndmVycmlkZQogICAgcHVibGljIHZvaWQgbmV3TGVkZ2VyUGF0aChmaW5hbCBH\nZW5lcmljQ2FsbGJhY2s8U3RyaW5nPiBjYiwgZmluYWwgTGVkZ2VyTWV0YWRh\ndGEgbWV0YWRhdGEpIHsKICAgICAgICBTdHJpbmdDYWxsYmFjayBzY2IgPSBu\nZXcgU3RyaW5nQ2FsbGJhY2soKSB7CiAgICAgICAgICAgIEBPdmVycmlkZQog\nICAgICAgICAgICBwdWJsaWMgdm9pZCBwcm9jZXNzUmVzdWx0KGludCByYywg\nU3RyaW5nIHBhdGgsIE9iamVjdCBjdHgsCiAgICAgICAgICAgICAgICAgICAg\nU3RyaW5nIG5hbWUpIHsKICAgICAgICAgICAgICAgIGlmIChDb2RlLk9LLmlu\ndFZhbHVlKCkgIT0gcmMpIHsKICAgICAgICAgICAgICAgICAgICBjYi5vcGVy\nYXRpb25Db21wbGV0ZShyYywgbnVsbCk7CiAgICAgICAgICAgICAgICB9IGVs\nc2UgewogICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSB6bm9kZSBzdGF0\ndXMKICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YS51cGRhdGVabm9kZVN0\nYXR1cygwKTsKICAgICAgICAgICAgICAgICAgICBjYi5vcGVyYXRpb25Db21w\nbGV0ZShyYywgbmFtZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAg\nIH0KICAgICAgICB9OwogICAgICAgIFprVXRpbHMuY3JlYXRlRnVsbFBhdGhP\ncHRpbWlzdGljKHprLCBsZWRnZXJQcmVmaXgsIG1ldGFkYXRhLnNlcmlhbGl6\nZSgpLAogICAgICAgICAgICBJZHMuT1BFTl9BQ0xfVU5TQUZFLCBDcmVhdGVN\nb2RlLlBFUlNJU1RFTlRfU0VRVUVOVElBTCwgc2NiLCBudWxsKTsKICAgIH0K\nCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBTdHJpbmcgZ2V0TGVkZ2VyUGF0\naChsb25nIGxlZGdlcklkKSB7CiAgICAgICAgU3RyaW5nQnVpbGRlciBzYiA9\nIG5ldyBTdHJpbmdCdWlsZGVyKCk7CiAgICAgICAgc2IuYXBwZW5kKGxlZGdl\nclByZWZpeCkKICAgICAgICAgIC5hcHBlbmQoU3RyaW5nVXRpbHMuZ2V0WktT\ndHJpbmdJZChsZWRnZXJJZCkpOwogICAgICAgIHJldHVybiBzYi50b1N0cmlu\nZygpOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIGxvbmcgZ2V0\nTGVkZ2VySWQoU3RyaW5nIG5vZGVOYW1lKSB0aHJvd3MgSU9FeGNlcHRpb24g\newogICAgICAgIGxvbmcgbGVkZ2VySWQ7CiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgU3RyaW5nIHBhcnRzW10gPSBub2RlTmFtZS5zcGxpdChsZWRnZXJQ\ncmVmaXgpOwogICAgICAgICAgICBsZWRnZXJJZCA9IExvbmcucGFyc2VMb25n\nKHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdKTsKICAgICAgICB9IGNhdGNoIChO\ndW1iZXJGb3JtYXRFeGNlcHRpb24gZSkgewogICAgICAgICAgICB0aHJvdyBu\nZXcgSU9FeGNlcHRpb24oZSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBs\nZWRnZXJJZDsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lk\nIGFzeW5jUHJvY2Vzc0xlZGdlcnMoZmluYWwgUHJvY2Vzc29yPExvbmc+IHBy\nb2Nlc3NvciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nZmluYWwgQXN5bmNDYWxsYmFjay5Wb2lkQ2FsbGJhY2sgZmluYWxDYiwgZmlu\nYWwgT2JqZWN0IGN0eCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgZmluYWwgaW50IHN1Y2Nlc3NSYywgZmluYWwgaW50IGZhaWx1cmVS\nYykgewogICAgICAgIGFzeW5jUHJvY2Vzc0xlZGdlcnNJblNpbmdsZU5vZGUo\nbGVkZ2VyUm9vdFBhdGgsIHByb2Nlc3NvciwgZmluYWxDYiwgY3R4LCBzdWNj\nZXNzUmMsIGZhaWx1cmVSYyk7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBw\ndWJsaWMgdm9pZCBhZGRBY3RpdmVMZWRnZXIobG9uZyBsZWRnZXJJZCwgYm9v\nbGVhbiBhY3RpdmUpIHsKICAgICAgICBhY3RpdmVMZWRnZXJzLnB1dChsZWRn\nZXJJZCwgYWN0aXZlKTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1Ymxp\nYyB2b2lkIHJlbW92ZUFjdGl2ZUxlZGdlcihsb25nIGxlZGdlcklkKSB7CiAg\nICAgICAgYWN0aXZlTGVkZ2Vycy5yZW1vdmUobGVkZ2VySWQpOwogICAgfQoK\nICAgIEBPdmVycmlkZQogICAgcHVibGljIGJvb2xlYW4gY29udGFpbnNBY3Rp\ndmVMZWRnZXIobG9uZyBsZWRnZXJJZCkgewogICAgICAgIHJldHVybiBhY3Rp\ndmVMZWRnZXJzLmNvbnRhaW5zS2V5KGxlZGdlcklkKTsKICAgIH0KCiAgICBA\nT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIGdhcmJhZ2VDb2xsZWN0TGVkZ2Vy\ncyhHYXJiYWdlQ29sbGVjdG9yIGdjKSB7CiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgLy8gY3JlYXRlIGEgc25hcHNob3QgZmlyc3QKICAgICAgICAgICAg\nTWFwPExvbmcsIEJvb2xlYW4+IGJrQWN0aXZlTGVkZ2VycyA9IGFjdGl2ZUxl\nZGdlcnMuc25hcHNob3QoKTsKICAgICAgICAgICAgU2V0PExvbmc+IHprQWN0\naXZlTGVkZ2VycyA9IGdldExlZGdlcnNJblNpbmdsZU5vZGUobGVkZ2VyUm9v\ndFBhdGgpOwogICAgICAgICAgICBpZiAoTE9HLmlzRGVidWdFbmFibGVkKCkp\nIHsKICAgICAgICAgICAgICAgIExPRy5kZWJ1ZygiQWxsIGFjdGl2ZSBsZWRn\nZXJzIGZyb20gWks6ICIgKyB6a0FjdGl2ZUxlZGdlcnMpOwogICAgICAgICAg\nICAgICAgTE9HLmRlYnVnKCJDdXJyZW50IGFjdGl2ZSBsZWRnZXJzIGZyb20g\nQm9va2llOiAiICsgYmtBY3RpdmVMZWRnZXJzLmtleVNldCgpKTsKICAgICAg\nICAgICAgfQogICAgICAgICAgICBkb0djKGdjLCBia0FjdGl2ZUxlZGdlcnMs\nIHprQWN0aXZlTGVkZ2Vycyk7CiAgICAgICAgfSBjYXRjaCAoSU9FeGNlcHRp\nb24gaWUpIHsKICAgICAgICAgICAgTE9HLndhcm4oIkVycm9yIGR1cmluZyBn\nYXJiYWdlIGNvbGxlY3RpbmcgbGVkZ2VycyBmcm9tICIgKyBsZWRnZXJSb290\nUGF0aCwgaWUpOwogICAgICAgIH0gY2F0Y2ggKEludGVycnVwdGVkRXhjZXB0\naW9uIGludGUpIHsKICAgICAgICAgICAgTE9HLndhcm4oIkludGVycnVwdGVk\nIGR1cmluZyBnYXJiYWdlIGNvbGxlY3RpbmcgbGVkZ2VycyBmcm9tICIgKyBs\nZWRnZXJSb290UGF0aCwgaW50ZSk7CiAgICAgICAgfQogICAgfQp9Cg==\n","encoding":"base64"}

