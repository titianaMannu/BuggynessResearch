{"sha":"491a3e404e8a15f10c31317c1bd6203ee3638821","node_id":"MDQ6QmxvYjE1NzU5NTY6NDkxYTNlNDA0ZThhMTVmMTBjMzEzMTdjMWJkNjIwM2VlMzYzODgyMQ==","size":4276,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/491a3e404e8a15f10c31317c1bd6203ee3638821","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIubWV0YTsKCi8qKgogKiBM\naWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFT\nRikgdW5kZXIgb25lCiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBh\nZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQogKiBkaXN0cmlidXRl\nZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbgog\nKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGlj\nZW5zZXMgdGhpcyBmaWxlCiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExp\nY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUKICogIkxpY2Vuc2UiKTsgeW91IG1h\neSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZQogKiB3\naXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRo\nZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcv\nbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5\nIGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0\nd2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0\ncmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJB\nTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJl\nc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3Bl\nY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBs\naW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgppbXBvcnQgamF2\nYS5pby5JT0V4Y2VwdGlvbjsKCmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVw\nZXIuY29uZi5BYnN0cmFjdENvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBh\nY2hlLnpvb2tlZXBlci5ab29LZWVwZXI7CmltcG9ydCBvcmcuYXBhY2hlLnpv\nb2tlZXBlci5LZWVwZXJFeGNlcHRpb247CgovKioKICogPGNvZGU+TGVkZ2Vy\nTWFuYWdlckZhY3Rvcnk8L2NvZGU+IHRha2VzIHJlc3BvbnNpYmlsaXR5IG9m\nIGNyZWF0aW5nIG5ldyBsZWRnZXIgbWFuYWdlci4KICovCnB1YmxpYyBjbGFz\ncyBMZWRnZXJNYW5hZ2VyRmFjdG9yeSB7CiAgICAvKioKICAgICAqIENyZWF0\nZSBuZXcgTGVkZ2VyIE1hbmFnZXIuCiAgICAgKgogICAgICogQHBhcmFtIGNv\nbmYKICAgICAqICAgICAgICAgIENvbmZpZ3VyYXRpb24gT2JqZWN0LgogICAg\nICogQHBhcmFtIHprCiAgICAgKiAgICAgICAgICBab29LZWVwZXIgQ2xpZW50\nIEhhbmRsZSwgdGFsayB0byB6ayB0byBrbm93IHdoaWNoIGxlZGdlciBtYW5h\nZ2VyIGlzIHVzZWQuCiAgICAgKiBAcmV0dXJuIG5ldyBsZWRnZXIgbWFuYWdl\ncgogICAgICogQHRocm93cyBJT0V4Y2VwdGlvbgogICAgICovCiAgICBwdWJs\naWMgc3RhdGljIExlZGdlck1hbmFnZXIgbmV3TGVkZ2VyTWFuYWdlcigKICAg\nICAgICBmaW5hbCBBYnN0cmFjdENvbmZpZ3VyYXRpb24gY29uZiwgZmluYWwg\nWm9vS2VlcGVyIHprKQogICAgICAgICAgICB0aHJvd3MgSU9FeGNlcHRpb24s\nIEtlZXBlckV4Y2VwdGlvbiwgSW50ZXJydXB0ZWRFeGNlcHRpb24gewogICAg\nICAgIFN0cmluZyBsbVR5cGUgPSBjb25mLmdldExlZGdlck1hbmFnZXJUeXBl\nKCk7CiAgICAgICAgU3RyaW5nIGxlZGdlclJvb3RQYXRoID0gY29uZi5nZXRa\na0xlZGdlcnNSb290UGF0aCgpOwogICAgICAgICAgICAKICAgICAgICBpZiAo\nbnVsbCA9PSBsZWRnZXJSb290UGF0aCB8fCBsZWRnZXJSb290UGF0aC5sZW5n\ndGgoKSA9PSAwKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlv\nbigiRW1wdHkgTGVkZ2VyIFJvb3QgUGF0aC4iKTsKICAgICAgICB9CiAgICAg\nICAgCiAgICAgICAgLy8gaWYgemsgaXMgbnVsbCwgcmV0dXJuIHRoZSBkZWZh\ndWx0IGxlZGdlciBtYW5hZ2VyCiAgICAgICAgaWYgKHprID09IG51bGwpIHsK\nICAgICAgICAgICAgcmV0dXJuIG5ldyBGbGF0TGVkZ2VyTWFuYWdlcihjb25m\nLCBudWxsLAogICAgICAgICAgICAgICAgICAgIGxlZGdlclJvb3RQYXRoLCBG\nbGF0TGVkZ2VyTWFuYWdlci5DVVJfVkVSU0lPTik7CiAgICAgICAgfQoKICAg\nICAgICAvLyBjaGVjayB0aGF0IHRoZSBjb25maWd1cmVkIGxlZGdlciBtYW5h\nZ2VyIGlzCiAgICAgICAgLy8gY29tcGF0aWJsZSB3aXRoIHRoZSBleGlzdGlu\nZyBsYXlvdXQKICAgICAgICBMZWRnZXJMYXlvdXQgbGF5b3V0ID0gTGVkZ2Vy\nTGF5b3V0LnJlYWRMYXlvdXQoemssIGxlZGdlclJvb3RQYXRoKTsKICAgICAg\nICBpZiAobGF5b3V0ID09IG51bGwpIHsgLy8gbm8gZXhpc3RpbmcgbGF5b3V0\nCiAgICAgICAgICAgIGlmIChsbVR5cGUgPT0gbnVsbCAKICAgICAgICAgICAg\nICAgIHx8IGxtVHlwZS5lcXVhbHMoRmxhdExlZGdlck1hbmFnZXIuTkFNRSkp\nIHsKICAgICAgICAgICAgICAgIGxheW91dCA9IG5ldyBMZWRnZXJMYXlvdXQo\nRmxhdExlZGdlck1hbmFnZXIuTkFNRSwgCiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIEZsYXRMZWRnZXJNYW5hZ2VyLkNVUl9W\nRVJTSU9OKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChsbVR5cGUuZXF1YWxz\nKEhpZXJhcmNoaWNhbExlZGdlck1hbmFnZXIuTkFNRSkpIHsKICAgICAgICAg\nICAgICAgIGxheW91dCA9IG5ldyBMZWRnZXJMYXlvdXQoSGllcmFyY2hpY2Fs\nTGVkZ2VyTWFuYWdlci5OQU1FLCAKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgSGllcmFyY2hpY2FsTGVkZ2VyTWFuYWdlci5D\nVVJfVkVSU0lPTik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAg\nICAgICB0aHJvdyBuZXcgSU9FeGNlcHRpb24oIlVua25vd24gbGVkZ2VyIG1h\nbmFnZXIgdHlwZSAiICsgbG1UeXBlKTsKICAgICAgICAgICAgfQogICAgICAg\nICAgICB0cnkgewogICAgICAgICAgICAgICAgbGF5b3V0LnN0b3JlKHprLCBs\nZWRnZXJSb290UGF0aCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKEtlZXBlckV4\nY2VwdGlvbi5Ob2RlRXhpc3RzRXhjZXB0aW9uIG5lZSkgewogICAgICAgICAg\nICAgICAgTGVkZ2VyTGF5b3V0IGxheW91dDIgPSBMZWRnZXJMYXlvdXQucmVh\nZExheW91dCh6aywgbGVkZ2VyUm9vdFBhdGgpOwogICAgICAgICAgICAgICAg\naWYgKCFsYXlvdXQyLmVxdWFscyhsYXlvdXQpKSB7CiAgICAgICAgICAgICAg\nICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKCJDb250ZW50aW9uIHdyaXRp\nbmcgdG8gbGF5b3V0IHRvIHpvb2tlZXBlciwgIgogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgKyAiIG90aGVyIGxheW91dCAiICsgbGF5b3V0MiArICIg\naXMgaW5jb21wYXRpYmxlIHdpdGggb3VyICIKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICsgImxheW91dCAiICsgbGF5b3V0KTsKICAgICAgICAgICAg\nICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAobG1UeXBl\nICE9IG51bGwgJiYgIWxheW91dC5nZXRNYW5hZ2VyVHlwZSgpLmVxdWFscyhs\nbVR5cGUpKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlvbigi\nQ29uZmlndXJlZCBsYXlvdXQgIiArIGxtVHlwZQogICAgICAgICAgICAgICAg\nICAgICsgIiBkb2VzIG5vdCBtYXRjaCBleGlzdGluZyBsYXlvdXQgIiArIGxh\neW91dC5nZXRNYW5hZ2VyVHlwZSgpKTsKICAgICAgICB9CgogICAgICAgIC8v\nIGNyZWF0ZSB0aGUgbGVkZ2VyIG1hbmFnZXIKICAgICAgICBpZiAoRmxhdExl\nZGdlck1hbmFnZXIuTkFNRS5lcXVhbHMobGF5b3V0LmdldE1hbmFnZXJUeXBl\nKCkpKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgRmxhdExlZGdlck1hbmFn\nZXIoY29uZiwgemssIGxlZGdlclJvb3RQYXRoLCAKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICBsYXlvdXQuZ2V0TWFuYWdlclZl\ncnNpb24oKSk7CiAgICAgICAgfSBlbHNlIGlmIChIaWVyYXJjaGljYWxMZWRn\nZXJNYW5hZ2VyLk5BTUUuZXF1YWxzKGxheW91dC5nZXRNYW5hZ2VyVHlwZSgp\nKSkgewogICAgICAgICAgICByZXR1cm4gbmV3IEhpZXJhcmNoaWNhbExlZGdl\nck1hbmFnZXIoY29uZiwgemssIGxlZGdlclJvb3RQYXRoLAogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5b3V0\nLmdldE1hbmFnZXJWZXJzaW9uKCkpOwogICAgICAgIH0gZWxzZSB7CiAgICAg\nICAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlvbigiVW5rbm93biBsZWRnZXIg\nbWFuYWdlciB0eXBlOiAiICsgbG1UeXBlKTsKICAgICAgICB9CiAgICB9Cgp9\nCg==\n","encoding":"base64"}

