{"sha":"c222f0591666452cb27215b4bf6c6756b3e15f27","node_id":"MDQ6QmxvYjE1NzU5NTY6YzIyMmYwNTkxNjY2NDUyY2IyNzIxNWI0YmY2YzY3NTZiM2UxNWYyNw==","size":4073,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/c222f0591666452cb27215b4bf6c6756b3e15f27","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIubWV0YTsKCi8qKgogKiBM\naWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFT\nRikgdW5kZXIgb25lCiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBh\nZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQogKiBkaXN0cmlidXRl\nZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbgog\nKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGlj\nZW5zZXMgdGhpcyBmaWxlCiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExp\nY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUKICogIkxpY2Vuc2UiKTsgeW91IG1h\neSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZQogKiB3\naXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRo\nZSBMaWNlbnNlIGF0CiAqCiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcv\nbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5\nIGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0\nd2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0\ncmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJB\nTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJl\nc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3Bl\nY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBs\naW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICovCgppbXBvcnQgamF2\nYS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50\nLkNvbmN1cnJlbnRTa2lwTGlzdE1hcDsKaW1wb3J0IGphdmEudXRpbC5jb25j\ndXJyZW50LkNvbmN1cnJlbnRIYXNoTWFwOwoKaW1wb3J0IGphdmEudXRpbC5N\nYXA7CmltcG9ydCBqYXZhLnV0aWwuTmF2aWdhYmxlTWFwOwppbXBvcnQgamF2\nYS51dGlsLmNvbmN1cnJlbnQubG9ja3MuUmVlbnRyYW50UmVhZFdyaXRlTG9j\nazsKCi8qKgogKiBBIHNuYXBzaG90YWJsZSBtYXAuCiAqLwpjbGFzcyBTbmFw\nc2hvdE1hcDxLLCBWPiB7CiAgICAvLyBzdG9yZXMgcmVjZW50IHVwZGF0ZXMK\nICAgIHZvbGF0aWxlIE1hcDxLLCBWPiB1cGRhdGVzOwogICAgdm9sYXRpbGUg\nTWFwPEssIFY+IHVwZGF0ZXNUb01lcmdlOwogICAgLy8gbWFwIHN0b3JlcyBh\nbGwgc25hcHNob3QgZGF0YQogICAgdm9sYXRpbGUgTmF2aWdhYmxlTWFwPEss\nIFY+IHNuYXBzaG90OwoKICAgIGZpbmFsIFJlZW50cmFudFJlYWRXcml0ZUxv\nY2sgbG9jayA9IG5ldyBSZWVudHJhbnRSZWFkV3JpdGVMb2NrKCk7CgogICAg\ncHVibGljIFNuYXBzaG90TWFwKCkgewogICAgICAgIHVwZGF0ZXMgPSBuZXcg\nQ29uY3VycmVudEhhc2hNYXA8SywgVj4oKTsKICAgICAgICB1cGRhdGVzVG9N\nZXJnZSA9IG5ldyBDb25jdXJyZW50SGFzaE1hcDxLLCBWPigpOwogICAgICAg\nIHNuYXBzaG90ID0gbmV3IENvbmN1cnJlbnRTa2lwTGlzdE1hcDxLLCBWPigp\nOwogICAgfQoKICAgIC8qKgogICAgICogQ3JlYXRlIGEgc25hcHNob3Qgb2Yg\nY3VycmVudCBtYXAuCiAgICAgKgogICAgICogQHJldHVybiBhIHNuYXBzaG90\nIG9mIGN1cnJlbnQgbWFwLgogICAgICovCiAgICBwdWJsaWMgTmF2aWdhYmxl\nTWFwPEssIFY+IHNuYXBzaG90KCkgewogICAgICAgIHRoaXMubG9jay53cml0\nZUxvY2soKS5sb2NrKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYg\nKHVwZGF0ZXMuaXNFbXB0eSgpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4g\nc25hcHNob3Q7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gcHV0IHVw\nZGF0ZXMgZm9yIG1lcmdlIHRvIHNuYXBzaG90CiAgICAgICAgICAgIHVwZGF0\nZXNUb01lcmdlID0gdXBkYXRlczsKICAgICAgICAgICAgdXBkYXRlcyA9IG5l\ndyBDb25jdXJyZW50SGFzaE1hcDxLLCBWPigpOwogICAgICAgIH0gZmluYWxs\neSB7CiAgICAgICAgICAgIHRoaXMubG9jay53cml0ZUxvY2soKS51bmxvY2so\nKTsKICAgICAgICB9CiAgICAgICAgLy8gbWVyZ2luZyB0aGUgdXBkYXRlcyB0\nbyBzbmFwc2hvdAogICAgICAgIGZvciAoTWFwLkVudHJ5PEssIFY+IGVudHJ5\nIDogdXBkYXRlc1RvTWVyZ2UuZW50cnlTZXQoKSkgewogICAgICAgICAgICBz\nbmFwc2hvdC5wdXQoZW50cnkuZ2V0S2V5KCksIGVudHJ5LmdldFZhbHVlKCkp\nOwogICAgICAgIH0KICAgICAgICAvLyBjbGVhciB1cGRhdGVzVG9NZXJnZQog\nICAgICAgIHRoaXMubG9jay53cml0ZUxvY2soKS5sb2NrKCk7CiAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgdXBkYXRlc1RvTWVyZ2UgPSBuZXcgQ29uY3Vy\ncmVudEhhc2hNYXA8SywgVj4oKTsKICAgICAgICB9IGZpbmFsbHkgewogICAg\nICAgICAgICB0aGlzLmxvY2sud3JpdGVMb2NrKCkudW5sb2NrKCk7CiAgICAg\nICAgfQogICAgICAgIHJldHVybiBzbmFwc2hvdDsKICAgIH0KCiAgICAvKioK\nICAgICAqIEFzc29jaWF0ZXMgdGhlIHNwZWNpZmllZCB2YWx1ZSB3aXRoIHRo\nZSBzcGVjaWZpZWQga2V5IGluIHRoaXMgbWFwLgogICAgICoKICAgICAqIEBw\nYXJhbSBrZXkKICAgICAqICAgICAgICAgIEtleSB3aXRoIHdoaWNoIHRoZSBz\ncGVjaWZpZWQgdmFsdWUgaXMgdG8gYmUgYXNzb2NpYXRlZC4KICAgICAqIEBw\nYXJhbSB2YWx1ZQogICAgICogICAgICAgICAgVmFsdWUgdG8gYmUgYXNzb2Np\nYXRlZCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5LgogICAgICovCiAgICBwdWJs\naWMgdm9pZCBwdXQoSyBrZXksIFYgdmFsdWUpIHsKICAgICAgICB0aGlzLmxv\nY2sucmVhZExvY2soKS5sb2NrKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgdXBkYXRlcy5wdXQoa2V5LCB2YWx1ZSk7CiAgICAgICAgfSBmaW5hbGx5\nIHsKICAgICAgICAgICAgdGhpcy5sb2NrLnJlYWRMb2NrKCkudW5sb2NrKCk7\nCiAgICAgICAgfQoKICAgIH0KCiAgICAvKioKICAgICAqIFJlbW92ZXMgdGhl\nIG1hcHBpbmcgZm9yIHRoZSBrZXkgZnJvbSB0aGlzIG1hcCBpZiBpdCBpcyBw\ncmVzZW50LgogICAgICoKICAgICAqIEBwYXJhbSBrZXkKICAgICAqICAgICAg\nICAgIEtleSB3aG9zZSBtYXBwaW5nIGlzIHRvIGJlIHJlbW92ZWQgZnJvbSB0\naGlzIG1hcC4KICAgICAqLwogICAgcHVibGljIHZvaWQgcmVtb3ZlKEsga2V5\nKSB7CiAgICAgICAgdGhpcy5sb2NrLnJlYWRMb2NrKCkubG9jaygpOwogICAg\nICAgIHRyeSB7CiAgICAgICAgICAgIC8vIGZpcnN0IHJlbW92ZSB1cGRhdGVz\nCiAgICAgICAgICAgIHVwZGF0ZXMucmVtb3ZlKGtleSk7CiAgICAgICAgICAg\nIHVwZGF0ZXNUb01lcmdlLnJlbW92ZShrZXkpOwogICAgICAgICAgICAvLyB0\naGVuIHJlbW92ZSBzbmFwc2hvdAogICAgICAgICAgICBzbmFwc2hvdC5yZW1v\ndmUoa2V5KTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICB0aGlz\nLmxvY2sucmVhZExvY2soKS51bmxvY2soKTsKICAgICAgICB9CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBtYXAgY29udGFp\nbnMgYSBtYXBwaW5nIGZvciB0aGUgc3BlY2lmaWVkIGtleS4KICAgICAqCiAg\nICAgKiBAcGFyYW0ga2V5CiAgICAgKiAgICAgICAgICBLZXkgd2hvc2UgcHJl\nc2VuY2UgaXMgaW4gdGhlIG1hcCB0byBiZSB0ZXN0ZWQuCiAgICAgKiBAcmV0\ndXJuIHRydWUgaWYgdGhlIG1hcCBjb250YWlucyBhIG1hcHBpbmcgZm9yIHRo\nZSBzcGVjaWZpZWQga2V5LgogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBj\nb250YWluc0tleShLIGtleSkgewogICAgICAgIHRoaXMubG9jay5yZWFkTG9j\naygpLmxvY2soKTsKICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4g\ndXBkYXRlcy5jb250YWluc0tleShrZXkpCiAgICAgICAgICAgICAgICAgfCB1\ncGRhdGVzVG9NZXJnZS5jb250YWluc0tleShrZXkpCiAgICAgICAgICAgICAg\nICAgfCBzbmFwc2hvdC5jb250YWluc0tleShrZXkpOwogICAgICAgIH0gZmlu\nYWxseSB7CiAgICAgICAgICAgIHRoaXMubG9jay5yZWFkTG9jaygpLnVubG9j\naygpOwogICAgICAgIH0KICAgIH0KfQo=\n","encoding":"base64"}

