{"sha":"57fbd3e044414fe7d85d33ecfdea6e4b7f574efb","node_id":"MDQ6QmxvYjE1NzU5NTY6NTdmYmQzZTA0NDQxNGZlN2Q4NWQzM2VjZmRlYTZlNGI3ZjU3NGVmYg==","size":25001,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/57fbd3e044414fe7d85d33ecfdea6e4b7f574efb","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KLyog\nQ29waWVkIHdob2xlc2FsZSBmcm9tIGhhZG9vcC1jb21tb24gMC4yMy4xCnBh\nY2thZ2Ugb3JnLmFwYWNoZS5oYWRvb3AuZnM7CiovCnBhY2thZ2Ugb3JnLmFw\nYWNoZS5ib29ra2VlcGVyLnV0aWw7CgppbXBvcnQgamF2YS5pby5CdWZmZXJl\nZFJlYWRlcjsKaW1wb3J0IGphdmEuaW8uRmlsZTsKaW1wb3J0IGphdmEuaW8u\nRmlsZU5vdEZvdW5kRXhjZXB0aW9uOwppbXBvcnQgamF2YS5pby5JT0V4Y2Vw\ndGlvbjsKaW1wb3J0IGphdmEuaW8uSW5wdXRTdHJlYW1SZWFkZXI7CmltcG9y\ndCBqYXZhLnV0aWwuQXJyYXlzOwoKLyoqCiAqIENsYXNzIGZvciBjcmVhdGlu\nZyBoYXJkbGlua3MuCiAqIFN1cHBvcnRzIFVuaXgvTGludXgsIFdpblhQLzIw\nMDMvVmlzdGEgdmlhIEN5Z3dpbiwgYW5kIE1hYyBPUyBYLgogKiAKICogVGhl\nIEhhcmRMaW5rIGNsYXNzIHdhcyBmb3JtZXJseSBhIHN0YXRpYyBpbm5lciBj\nbGFzcyBvZiBGU1V0aWwsCiAqIGFuZCB0aGUgbWV0aG9kcyBwcm92aWRlZCB3\nZXJlIGJsYXRhbnRseSBub24tdGhyZWFkLXNhZmUuCiAqIFRvIGVuYWJsZSB2\nb2x1bWUtcGFyYWxsZWwgVXBkYXRlIHNuYXBzaG90cywgd2Ugbm93IHByb3Zp\nZGUgc3RhdGljIAogKiB0aHJlYWRzYWZlIG1ldGhvZHMgdGhhdCBhbGxvY2F0\nZSBuZXcgYnVmZmVyIHN0cmluZyBhcnJheXMKICogdXBvbiBlYWNoIGNhbGwu\nICBXZSBhbHNvIHByb3ZpZGUgYW4gQVBJIHRvIGhhcmRsaW5rIGFsbCBmaWxl\ncyBpbiBhCiAqIGRpcmVjdG9yeSB3aXRoIGEgc2luZ2xlIGNvbW1hbmQsIHdo\naWNoIGlzIHVwIHRvIDEyOCB0aW1lcyBtb3JlIAogKiBlZmZpY2llbnQgLSBh\nbmQgbWluaW1pemVzIHRoZSBpbXBhY3Qgb2YgdGhlIGV4dHJhIGJ1ZmZlciBj\ncmVhdGlvbnMuCiAqLwpwdWJsaWMgY2xhc3MgSGFyZExpbmsgeyAKCiAgcHVi\nbGljIGVudW0gT1NUeXBlIHsKICAgIE9TX1RZUEVfVU5JWCwKICAgIE9TX1RZ\nUEVfV0lOWFAsCiAgICBPU19UWVBFX1NPTEFSSVMsCiAgICBPU19UWVBFX01B\nQwogIH0KICAKICBwdWJsaWMgc3RhdGljIGZpbmFsIE9TVHlwZSBvc1R5cGU7\nCiAgcHJpdmF0ZSBzdGF0aWMgSGFyZExpbmtDb21tYW5kR2V0dGVyIGdldEhh\ncmRMaW5rQ29tbWFuZDsKICAKICBwdWJsaWMgZmluYWwgTGlua1N0YXRzIGxp\nbmtTdGF0czsgLy9ub3Qgc3RhdGljCiAgCiAgLy9pbml0aWFsaXplIHRoZSBj\nb21tYW5kICJnZXR0ZXJzIiBzdGF0aWNhbGx5LCBzbyBjYW4gdXNlIHRoZWly\nIAogIC8vbWV0aG9kcyB3aXRob3V0IGluc3RhbnRpYXRpbmcgdGhlIEhhcmRM\naW5rIG9iamVjdAogIHN0YXRpYyB7IAogICAgb3NUeXBlID0gZ2V0T1NUeXBl\nKCk7CiAgICBpZiAob3NUeXBlID09IE9TVHlwZS5PU19UWVBFX1dJTlhQKSB7\nCiAgICAgIC8vIFdpbmRvd3MKICAgICAgZ2V0SGFyZExpbmtDb21tYW5kID0g\nbmV3IEhhcmRMaW5rQ0dXaW4oKTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIFVu\naXgKICAgICAgZ2V0SGFyZExpbmtDb21tYW5kID0gbmV3IEhhcmRMaW5rQ0dV\nbml4KCk7CiAgICAgIC8vb3ZlcnJpZGUgZ2V0TGlua0NvdW50Q29tbWFuZCBm\nb3IgdGhlIHBhcnRpY3VsYXIgVW5peCB2YXJpYW50CiAgICAgIC8vTGludXgg\naXMgYWxyZWFkeSBzZXQgYXMgdGhlIGRlZmF1bHQgLSB7InN0YXQiLCItYyVo\nIiwgbnVsbH0KICAgICAgaWYgKG9zVHlwZSA9PSBPU1R5cGUuT1NfVFlQRV9N\nQUMpIHsKICAgICAgICBTdHJpbmdbXSBsaW5rQ291bnRDbWRUZW1wbGF0ZSA9\nIHsic3RhdCIsIi1mJWwiLCBudWxsfTsKICAgICAgICBIYXJkTGlua0NHVW5p\neC5zZXRMaW5rQ291bnRDbWRUZW1wbGF0ZShsaW5rQ291bnRDbWRUZW1wbGF0\nZSk7CiAgICAgIH0gZWxzZSBpZiAob3NUeXBlID09IE9TVHlwZS5PU19UWVBF\nX1NPTEFSSVMpIHsKICAgICAgICBTdHJpbmdbXSBsaW5rQ291bnRDbWRUZW1w\nbGF0ZSA9IHsibHMiLCItbCIsIG51bGx9OwogICAgICAgIEhhcmRMaW5rQ0dV\nbml4LnNldExpbmtDb3VudENtZFRlbXBsYXRlKGxpbmtDb3VudENtZFRlbXBs\nYXRlKTsgICAgICAgIAogICAgICB9CiAgICB9CiAgfQoKICBwdWJsaWMgSGFy\nZExpbmsoKSB7CiAgICBsaW5rU3RhdHMgPSBuZXcgTGlua1N0YXRzKCk7CiAg\nfQogIAogIHN0YXRpYyBwcml2YXRlIE9TVHlwZSBnZXRPU1R5cGUoKSB7CiAg\nICBTdHJpbmcgb3NOYW1lID0gU3lzdGVtLmdldFByb3BlcnR5KCJvcy5uYW1l\nIik7CiAgICBpZiAob3NOYW1lLmNvbnRhaW5zKCJXaW5kb3dzIikgJiYKICAg\nICAgICAgICAgKG9zTmFtZS5jb250YWlucygiWFAiKSAKICAgICAgICAgICAg\nfHwgb3NOYW1lLmNvbnRhaW5zKCIyMDAzIikgCiAgICAgICAgICAgIHx8IG9z\nTmFtZS5jb250YWlucygiVmlzdGEiKQogICAgICAgICAgICB8fCBvc05hbWUu\nY29udGFpbnMoIldpbmRvd3NfNyIpCiAgICAgICAgICAgIHx8IG9zTmFtZS5j\nb250YWlucygiV2luZG93cyA3IikgCiAgICAgICAgICAgIHx8IG9zTmFtZS5j\nb250YWlucygiV2luZG93czciKSkpIHsKICAgICAgcmV0dXJuIE9TVHlwZS5P\nU19UWVBFX1dJTlhQOwogICAgfQogICAgZWxzZSBpZiAob3NOYW1lLmNvbnRh\naW5zKCJTdW5PUyIpIAogICAgICAgICAgICB8fCBvc05hbWUuY29udGFpbnMo\nIlNvbGFyaXMiKSkgewogICAgICAgcmV0dXJuIE9TVHlwZS5PU19UWVBFX1NP\nTEFSSVM7CiAgICB9CiAgICBlbHNlIGlmIChvc05hbWUuY29udGFpbnMoIk1h\nYyIpKSB7CiAgICAgICByZXR1cm4gT1NUeXBlLk9TX1RZUEVfTUFDOwogICAg\nfQogICAgZWxzZSB7CiAgICAgIHJldHVybiBPU1R5cGUuT1NfVFlQRV9VTklY\nOwogICAgfQogIH0KICAKICAvKioKICAgKiBUaGlzIGFic3RyYWN0IGNsYXNz\nIGJyaWRnZXMgdGhlIE9TLWRlcGVuZGVudCBpbXBsZW1lbnRhdGlvbnMgb2Yg\ndGhlIAogICAqIG5lZWRlZCBmdW5jdGlvbmFsaXR5IGZvciBjcmVhdGluZyBo\nYXJkbGlua3MgYW5kIHF1ZXJ5aW5nIGxpbmsgY291bnRzLgogICAqIFRoZSBw\nYXJ0aWN1bGFyIGltcGxlbWVudGF0aW9uIGNsYXNzIGlzIGNob3NlbiBkdXJp\nbmcgCiAgICogc3RhdGljIGluaXRpYWxpemF0aW9uIHBoYXNlIG9mIHRoZSBI\nYXJkTGluayBjbGFzcy4KICAgKiBUaGUgImdldHRlciIgbWV0aG9kcyBjb25z\ndHJ1Y3Qgc2hlbGwgY29tbWFuZCBzdHJpbmdzIGZvciB2YXJpb3VzIHB1cnBv\nc2VzLgogICAqLwogIHByaXZhdGUgc3RhdGljIGFic3RyYWN0IGNsYXNzIEhh\ncmRMaW5rQ29tbWFuZEdldHRlciB7CgogICAgLyoqCiAgICAgKiBHZXQgdGhl\nIGNvbW1hbmQgc3RyaW5nIG5lZWRlZCB0byBoYXJkbGluayBhIGJ1bmNoIG9m\nIGZpbGVzIGZyb20KICAgICAqIGEgc2luZ2xlIHNvdXJjZSBkaXJlY3Rvcnkg\naW50byBhIHRhcmdldCBkaXJlY3RvcnkuICBUaGUgc291cmNlIGRpcmVjdG9y\neQogICAgICogaXMgbm90IHNwZWNpZmllZCBoZXJlLCBidXQgdGhlIGNvbW1h\nbmQgd2lsbCBiZSBleGVjdXRlZCB1c2luZyB0aGUgc291cmNlCiAgICAgKiBk\naXJlY3RvcnkgYXMgdGhlICJjdXJyZW50IHdvcmtpbmcgZGlyZWN0b3J5IiBv\nZiB0aGUgc2hlbGwgaW52b2NhdGlvbi4KICAgICAqIAogICAgICogQHBhcmFt\nIGZpbGVCYXNlTmFtZXMgLSBhcnJheSBvZiBwYXRoLWxlc3MgZmlsZSBuYW1l\ncywgcmVsYXRpdmUKICAgICAqICAgICAgICAgICAgdG8gdGhlIHNvdXJjZSBk\naXJlY3RvcnkKICAgICAqIEBwYXJhbSBsaW5rRGlyIC0gdGFyZ2V0IGRpcmVj\ndG9yeSB3aGVyZSB0aGUgaGFyZGxpbmtzIHdpbGwgYmUgcHV0CiAgICAgKiBA\ncmV0dXJuIC0gYW4gYXJyYXkgb2YgU3RyaW5ncyBzdWl0YWJsZSBmb3IgdXNl\nIGFzIGEgc2luZ2xlIHNoZWxsIGNvbW1hbmQKICAgICAqICAgICAgICAgICAg\nd2l0aCB7QGxpbmsgUnVudGltZS5leGVjKCl9CiAgICAgKiBAdGhyb3dzIElP\nRXhjZXB0aW9uIC0gaWYgYW55IG9mIHRoZSBmaWxlIG9yIHBhdGggbmFtZXMg\nbWlzYmVoYXZlCiAgICAgKi8KICAgIGFic3RyYWN0IFN0cmluZ1tdIGxpbmtN\ndWx0KFN0cmluZ1tdIGZpbGVCYXNlTmFtZXMsIEZpbGUgbGlua0RpcikgCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3dzIElPRXhjZXB0aW9uOwog\nICAgCiAgICAvKioKICAgICAqIEdldCB0aGUgY29tbWFuZCBzdHJpbmcgbmVl\nZGVkIHRvIGhhcmRsaW5rIGEgc2luZ2xlIGZpbGUKICAgICAqLwogICAgYWJz\ndHJhY3QgU3RyaW5nW10gbGlua09uZShGaWxlIGZpbGUsIEZpbGUgbGlua05h\nbWUpIHRocm93cyBJT0V4Y2VwdGlvbjsKICAgIAogICAgLyoqCiAgICAgKiBH\nZXQgdGhlIGNvbW1hbmQgc3RyaW5nIHRvIHF1ZXJ5IHRoZSBoYXJkbGluayBj\nb3VudCBvZiBhIGZpbGUKICAgICAqLwogICAgYWJzdHJhY3QgU3RyaW5nW10g\nbGlua0NvdW50KEZpbGUgZmlsZSkgdGhyb3dzIElPRXhjZXB0aW9uOwogICAg\nCiAgICAvKioKICAgICAqIENhbGN1bGF0ZSB0aGUgdG90YWwgc3RyaW5nIGxl\nbmd0aCBvZiB0aGUgc2hlbGwgY29tbWFuZAogICAgICogcmVzdWx0aW5nIGZy\nb20gZXhlY3V0aW9uIG9mIGxpbmtNdWx0LCBwbHVzIHRoZSBsZW5ndGggb2Yg\ndGhlCiAgICAgKiBzb3VyY2UgZGlyZWN0b3J5IG5hbWUgKHdoaWNoIHdpbGwg\nYWxzbyBiZSBwcm92aWRlZCB0byB0aGUgc2hlbGwpCiAgICAgKiAKICAgICAq\nIEBwYXJhbSBmaWxlRGlyIC0gc291cmNlIGRpcmVjdG9yeSwgcGFyZW50IG9m\nIGZpbGVCYXNlTmFtZXMKICAgICAqIEBwYXJhbSBmaWxlQmFzZU5hbWVzIC0g\nYXJyYXkgb2YgcGF0aC1sZXNzIGZpbGUgbmFtZXMsIHJlbGF0aXZlCiAgICAg\nKiAgICAgICAgICAgIHRvIHRoZSBzb3VyY2UgZGlyZWN0b3J5CiAgICAgKiBA\ncGFyYW0gbGlua0RpciAtIHRhcmdldCBkaXJlY3Rvcnkgd2hlcmUgdGhlIGhh\ncmRsaW5rcyB3aWxsIGJlIHB1dAogICAgICogQHJldHVybiAtIHRvdGFsIGRh\ndGEgbGVuZ3RoIChtdXN0IG5vdCBleGNlZWQgbWF4QWxsb3dlZENtZEFyZ0xl\nbmd0aCkKICAgICAqIEB0aHJvd3MgSU9FeGNlcHRpb24KICAgICAqLwogICAg\nYWJzdHJhY3QgaW50IGdldExpbmtNdWx0QXJnTGVuZ3RoKAogICAgICAgICAg\nICAgICAgICAgICBGaWxlIGZpbGVEaXIsIFN0cmluZ1tdIGZpbGVCYXNlTmFt\nZXMsIEZpbGUgbGlua0RpcikgCiAgICAgICAgICAgICAgICAgICAgIHRocm93\ncyBJT0V4Y2VwdGlvbjsKICAgIAogICAgLyoqCiAgICAgKiBHZXQgdGhlIG1h\neGltdW0gYWxsb3dlZCBzdHJpbmcgbGVuZ3RoIG9mIGEgc2hlbGwgY29tbWFu\nZCBvbiB0aGlzIE9TLAogICAgICogd2hpY2ggaXMganVzdCB0aGUgZG9jdW1l\nbnRlZCBtaW5pbXVtIGd1YXJhbnRlZWQgc3VwcG9ydGVkIGNvbW1hbmQKICAg\nICAqIGxlbmd0aCAtIGFwcnguIDMyS0IgZm9yIFVuaXgsIGFuZCA4S0IgZm9y\nIFdpbmRvd3MuCiAgICAgKi8KICAgIGFic3RyYWN0IGludCBnZXRNYXhBbGxv\nd2VkQ21kQXJnTGVuZ3RoKCk7IAogIH0KICAKICAvKioKICAgKiBJbXBsZW1l\nbnRhdGlvbiBvZiBIYXJkTGlua0NvbW1hbmRHZXR0ZXIgY2xhc3MgZm9yIFVu\naXgKICAgKi8KICBzdGF0aWMgY2xhc3MgSGFyZExpbmtDR1VuaXggZXh0ZW5k\ncyBIYXJkTGlua0NvbW1hbmRHZXR0ZXIgewogICAgcHJpdmF0ZSBzdGF0aWMg\nU3RyaW5nW10gaGFyZExpbmtDb21tYW5kID0geyJsbiIsIG51bGwsIG51bGx9\nOwogICAgcHJpdmF0ZSBzdGF0aWMgU3RyaW5nW10gaGFyZExpbmtNdWx0UHJl\nZml4ID0geyJsbiJ9OwogICAgcHJpdmF0ZSBzdGF0aWMgU3RyaW5nW10gaGFy\nZExpbmtNdWx0U3VmZml4ID0ge251bGx9OwogICAgcHJpdmF0ZSBzdGF0aWMg\nU3RyaW5nW10gZ2V0TGlua0NvdW50Q29tbWFuZCA9IHsic3RhdCIsIi1jJWgi\nLCBudWxsfTsKICAgIC8vVW5peCBndWFyYW50ZWVzIGF0IGxlYXN0IDMySyBi\neXRlcyBjbWQgbGVuZ3RoLgogICAgLy9TdWJ0cmFjdCBhbm90aGVyIDY0YiB0\nbyBhbGxvdyBmb3IgSmF2YSAnZXhlYycgb3ZlcmhlYWQKICAgIHByaXZhdGUg\nc3RhdGljIGZpbmFsIGludCBtYXhBbGxvd2VkQ21kQXJnTGVuZ3RoID0gMzIq\nMTAyNCAtIDY1OwogICAgCiAgICBwcml2YXRlIHN0YXRpYyBzeW5jaHJvbml6\nZWQgCiAgICB2b2lkIHNldExpbmtDb3VudENtZFRlbXBsYXRlKFN0cmluZ1td\nIHRlbXBsYXRlKSB7CiAgICAgIC8vTWF5IHVwZGF0ZSB0aGlzIGZvciBzcGVj\naWZpYyB1bml4IHZhcmlhbnRzLCAKICAgICAgLy9hZnRlciBzdGF0aWMgaW5p\ndGlhbGl6YXRpb24gcGhhc2UKICAgICAgZ2V0TGlua0NvdW50Q29tbWFuZCA9\nIHRlbXBsYXRlOwogICAgfQogICAgCiAgICAvKgogICAgICogQHNlZSBvcmcu\nYXBhY2hlLmhhZG9vcC5mcy5IYXJkTGluay5IYXJkTGlua0NvbW1hbmRHZXR0\nZXIjbGlua09uZShqYXZhLmlvLkZpbGUsIGphdmEuaW8uRmlsZSkKICAgICAq\nLwogICAgQE92ZXJyaWRlCiAgICBTdHJpbmdbXSBsaW5rT25lKEZpbGUgZmls\nZSwgRmlsZSBsaW5rTmFtZSkgCiAgICB0aHJvd3MgSU9FeGNlcHRpb24gewog\nICAgICBTdHJpbmdbXSBidWYgPSBuZXcgU3RyaW5nW2hhcmRMaW5rQ29tbWFu\nZC5sZW5ndGhdOwogICAgICBTeXN0ZW0uYXJyYXljb3B5KGhhcmRMaW5rQ29t\nbWFuZCwgMCwgYnVmLCAwLCBoYXJkTGlua0NvbW1hbmQubGVuZ3RoKTsKICAg\nICAgLy91bml4IHdhbnRzIGFyZ3VtZW50IG9yZGVyOiAibG4gPGV4aXN0aW5n\nPiA8bmV3PiIKICAgICAgYnVmWzFdID0gbWFrZVNoZWxsUGF0aChmaWxlKTsg\nCiAgICAgIGJ1ZlsyXSA9IG1ha2VTaGVsbFBhdGgobGlua05hbWUpOwogICAg\nICByZXR1cm4gYnVmOwogICAgfQogICAgCiAgICAvKgogICAgICogQHNlZSBv\ncmcuYXBhY2hlLmhhZG9vcC5mcy5IYXJkTGluay5IYXJkTGlua0NvbW1hbmRH\nZXR0ZXIjbGlua011bHQoamF2YS5sYW5nLlN0cmluZ1tdLCBqYXZhLmlvLkZp\nbGUpCiAgICAgKi8KICAgIEBPdmVycmlkZQogICAgU3RyaW5nW10gbGlua011\nbHQoU3RyaW5nW10gZmlsZUJhc2VOYW1lcywgRmlsZSBsaW5rRGlyKSAKICAg\nIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgIFN0cmluZ1tdIGJ1ZiA9IG5l\ndyBTdHJpbmdbZmlsZUJhc2VOYW1lcy5sZW5ndGggCiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgKyBoYXJkTGlua011bHRQcmVmaXgubGVuZ3Ro\nIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgaGFyZExpbmtN\ndWx0U3VmZml4Lmxlbmd0aF07CiAgICAgIGludCBtYXJrPTA7CiAgICAgIFN5\nc3RlbS5hcnJheWNvcHkoaGFyZExpbmtNdWx0UHJlZml4LCAwLCBidWYsIG1h\ncmssIAogICAgICAgICAgICAgICAgICAgICAgIGhhcmRMaW5rTXVsdFByZWZp\neC5sZW5ndGgpOwogICAgICBtYXJrICs9IGhhcmRMaW5rTXVsdFByZWZpeC5s\nZW5ndGg7CiAgICAgIFN5c3RlbS5hcnJheWNvcHkoZmlsZUJhc2VOYW1lcywg\nMCwgYnVmLCBtYXJrLCBmaWxlQmFzZU5hbWVzLmxlbmd0aCk7CiAgICAgIG1h\ncmsgKz0gZmlsZUJhc2VOYW1lcy5sZW5ndGg7CiAgICAgIGJ1ZlttYXJrXSA9\nIG1ha2VTaGVsbFBhdGgobGlua0Rpcik7CiAgICAgIHJldHVybiBidWY7CiAg\nICB9CiAgICAKICAgIC8qCiAgICAgKiBAc2VlIG9yZy5hcGFjaGUuaGFkb29w\nLmZzLkhhcmRMaW5rLkhhcmRMaW5rQ29tbWFuZEdldHRlciNsaW5rQ291bnQo\namF2YS5pby5GaWxlKQogICAgICovCiAgICBAT3ZlcnJpZGUKICAgIFN0cmlu\nZ1tdIGxpbmtDb3VudChGaWxlIGZpbGUpIAogICAgdGhyb3dzIElPRXhjZXB0\naW9uIHsKICAgICAgU3RyaW5nW10gYnVmID0gbmV3IFN0cmluZ1tnZXRMaW5r\nQ291bnRDb21tYW5kLmxlbmd0aF07CiAgICAgIFN5c3RlbS5hcnJheWNvcHko\nZ2V0TGlua0NvdW50Q29tbWFuZCwgMCwgYnVmLCAwLCAKICAgICAgICAgICAg\nICAgICAgICAgICBnZXRMaW5rQ291bnRDb21tYW5kLmxlbmd0aCk7CiAgICAg\nIGJ1ZltnZXRMaW5rQ291bnRDb21tYW5kLmxlbmd0aCAtIDFdID0gbWFrZVNo\nZWxsUGF0aChmaWxlKTsKICAgICAgcmV0dXJuIGJ1ZjsKICAgIH0KICAgIAog\nICAgLyoKICAgICAqIEBzZWUgb3JnLmFwYWNoZS5oYWRvb3AuZnMuSGFyZExp\nbmsuSGFyZExpbmtDb21tYW5kR2V0dGVyI2dldExpbmtNdWx0QXJnTGVuZ3Ro\nKGphdmEuaW8uRmlsZSwgamF2YS5sYW5nLlN0cmluZ1tdLCBqYXZhLmlvLkZp\nbGUpCiAgICAgKi8KICAgIEBPdmVycmlkZQogICAgaW50IGdldExpbmtNdWx0\nQXJnTGVuZ3RoKEZpbGUgZmlsZURpciwgU3RyaW5nW10gZmlsZUJhc2VOYW1l\ncywgRmlsZSBsaW5rRGlyKSAKICAgIHRocm93cyBJT0V4Y2VwdGlvbnsKICAg\nICAgaW50IHN1bSA9IDA7CiAgICAgIGZvciAoU3RyaW5nIHggOiBmaWxlQmFz\nZU5hbWVzKSB7CiAgICAgICAgLy8gYWRkIDEgdG8gYWNjb3VudCBmb3IgdGVy\nbWluYWwgbnVsbCBvciBkZWxpbWl0ZXIgc3BhY2UKICAgICAgICBzdW0gKz0g\nMSArICgoeCA9PSBudWxsKSA/IDAgOiB4Lmxlbmd0aCgpKTsKICAgICAgfQog\nICAgICBzdW0gKz0gMiArIG1ha2VTaGVsbFBhdGgoZmlsZURpcikubGVuZ3Ro\nKCkKICAgICAgICAgICAgICsgbWFrZVNoZWxsUGF0aChsaW5rRGlyKS5sZW5n\ndGgoKTsKICAgICAgLy9hZGQgdGhlIGZpeGVkIG92ZXJoZWFkIG9mIHRoZSBo\nYXJkTGlua011bHQgcHJlZml4IGFuZCBzdWZmaXgKICAgICAgc3VtICs9IDM7\nIC8vbGVuZ3RoKCJsbiIpICsgMQogICAgICByZXR1cm4gc3VtOwogICAgfQog\nICAgCiAgICAvKgogICAgICogQHNlZSBvcmcuYXBhY2hlLmhhZG9vcC5mcy5I\nYXJkTGluay5IYXJkTGlua0NvbW1hbmRHZXR0ZXIjZ2V0TWF4QWxsb3dlZENt\nZEFyZ0xlbmd0aCgpCiAgICAgKi8KICAgIEBPdmVycmlkZQogICAgaW50IGdl\ndE1heEFsbG93ZWRDbWRBcmdMZW5ndGgoKSB7CiAgICAgIHJldHVybiBtYXhB\nbGxvd2VkQ21kQXJnTGVuZ3RoOwogICAgfQogIH0KICAKICAKICAvKioKICAg\nKiBJbXBsZW1lbnRhdGlvbiBvZiBIYXJkTGlua0NvbW1hbmRHZXR0ZXIgY2xh\nc3MgZm9yIFdpbmRvd3MKICAgKiAKICAgKiBOb3RlIHRoYXQgdGhlIGxpbmtD\nb3VudCBzaGVsbCBjb21tYW5kIGZvciBXaW5kb3dzIGlzIGFjdHVhbGx5CiAg\nICogYSBDeWd3aW4gc2hlbGwgY29tbWFuZCwgYW5kIGRlcGVuZHMgb24gJHtj\neWd3aW59L2JpbgogICAqIGJlaW5nIGluIHRoZSBXaW5kb3dzIFBBVEggZW52\naXJvbm1lbnQgdmFyaWFibGUsIHNvCiAgICogc3RhdC5leGUgY2FuIGJlIGZv\ndW5kLgogICAqLwogIHN0YXRpYyBjbGFzcyBIYXJkTGlua0NHV2luIGV4dGVu\nZHMgSGFyZExpbmtDb21tYW5kR2V0dGVyIHsKICAgIC8vVGhlIFdpbmRvd3Mg\nY29tbWFuZCBnZXR0ZXIgaW1wbCBjbGFzcyBhbmQgaXRzIG1lbWJlciBmaWVs\nZHMgYXJlCiAgICAvL3BhY2thZ2UtcHJpdmF0ZSAoImRlZmF1bHQiKSBhY2Nl\nc3MgaW5zdGVhZCBvZiAicHJpdmF0ZSIgdG8gYXNzaXN0IAogICAgLy91bml0\nIHRlc3RpbmcgKHNvcnQgb2YpIG9uIG5vbi1XaW4gc2VydmVycwoKICAgIHN0\nYXRpYyBTdHJpbmdbXSBoYXJkTGlua0NvbW1hbmQgPSB7CiAgICAgICAgICAg\nICAgICAgICAgICAgICJmc3V0aWwiLCJoYXJkbGluayIsImNyZWF0ZSIsIG51\nbGwsIG51bGx9OwogICAgc3RhdGljIFN0cmluZ1tdIGhhcmRMaW5rTXVsdFBy\nZWZpeCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgImNtZCIsIi9xIiwi\nL2MiLCJmb3IiLCAiJWYiLCAiaW4iLCAiKCJ9OwogICAgc3RhdGljIFN0cmlu\nZyAgIGhhcmRMaW5rTXVsdERpciA9ICJcXCVmIjsKICAgIHN0YXRpYyBTdHJp\nbmdbXSBoYXJkTGlua011bHRTdWZmaXggPSB7CiAgICAgICAgICAgICAgICAg\nICAgICAgICIpIiwgImRvIiwgImZzdXRpbCIsICJoYXJkbGluayIsICJjcmVh\ndGUiLCBudWxsLCAKICAgICAgICAgICAgICAgICAgICAgICAgIiVmIiwgIjE+\nTlVMIn07CiAgICBzdGF0aWMgU3RyaW5nW10gZ2V0TGlua0NvdW50Q29tbWFu\nZCA9IHsic3RhdCIsIi1jJWgiLCBudWxsfTsKICAgIC8vV2luZG93cyBndWFy\nYW50ZWVzIG9ubHkgOEsgLSAxIGJ5dGVzIGNtZCBsZW5ndGguCiAgICAvL1N1\nYnRyYWN0IGFub3RoZXIgNjRiIHRvIGFsbG93IGZvciBKYXZhICdleGVjJyBv\ndmVyaGVhZAogICAgc3RhdGljIGZpbmFsIGludCBtYXhBbGxvd2VkQ21kQXJn\nTGVuZ3RoID0gOCoxMDI0IC0gNjU7CgogICAgLyoKICAgICAqIEBzZWUgb3Jn\nLmFwYWNoZS5oYWRvb3AuZnMuSGFyZExpbmsuSGFyZExpbmtDb21tYW5kR2V0\ndGVyI2xpbmtPbmUoamF2YS5pby5GaWxlLCBqYXZhLmlvLkZpbGUpCiAgICAg\nKi8KICAgIEBPdmVycmlkZQogICAgU3RyaW5nW10gbGlua09uZShGaWxlIGZp\nbGUsIEZpbGUgbGlua05hbWUpIAogICAgdGhyb3dzIElPRXhjZXB0aW9uIHsK\nICAgICAgU3RyaW5nW10gYnVmID0gbmV3IFN0cmluZ1toYXJkTGlua0NvbW1h\nbmQubGVuZ3RoXTsKICAgICAgU3lzdGVtLmFycmF5Y29weShoYXJkTGlua0Nv\nbW1hbmQsIDAsIGJ1ZiwgMCwgaGFyZExpbmtDb21tYW5kLmxlbmd0aCk7CiAg\nICAgIC8vd2luZG93cyB3YW50cyBhcmd1bWVudCBvcmRlcjogImNyZWF0ZSA8\nbmV3PiA8ZXhpc3Rpbmc+IgogICAgICBidWZbNF0gPSBmaWxlLmdldENhbm9u\naWNhbFBhdGgoKTsgCiAgICAgIGJ1ZlszXSA9IGxpbmtOYW1lLmdldENhbm9u\naWNhbFBhdGgoKTsKICAgICAgcmV0dXJuIGJ1ZjsKICAgIH0KICAgIAogICAg\nLyoKICAgICAqIEBzZWUgb3JnLmFwYWNoZS5oYWRvb3AuZnMuSGFyZExpbmsu\nSGFyZExpbmtDb21tYW5kR2V0dGVyI2xpbmtNdWx0KGphdmEubGFuZy5TdHJp\nbmdbXSwgamF2YS5pby5GaWxlKQogICAgICovCiAgICBAT3ZlcnJpZGUKICAg\nIFN0cmluZ1tdIGxpbmtNdWx0KFN0cmluZ1tdIGZpbGVCYXNlTmFtZXMsIEZp\nbGUgbGlua0RpcikgCiAgICB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICBT\ndHJpbmdbXSBidWYgPSBuZXcgU3RyaW5nW2ZpbGVCYXNlTmFtZXMubGVuZ3Ro\nIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgaGFyZExpbmtN\ndWx0UHJlZml4Lmxlbmd0aCAKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICArIGhhcmRMaW5rTXVsdFN1ZmZpeC5sZW5ndGhdOwogICAgICBTdHJp\nbmcgdGQgPSBsaW5rRGlyLmdldENhbm9uaWNhbFBhdGgoKSArIGhhcmRMaW5r\nTXVsdERpcjsKICAgICAgaW50IG1hcms9MDsKICAgICAgU3lzdGVtLmFycmF5\nY29weShoYXJkTGlua011bHRQcmVmaXgsIDAsIGJ1ZiwgbWFyaywgCiAgICAg\nICAgICAgICAgICAgICAgICAgaGFyZExpbmtNdWx0UHJlZml4Lmxlbmd0aCk7\nCiAgICAgIG1hcmsgKz0gaGFyZExpbmtNdWx0UHJlZml4Lmxlbmd0aDsKICAg\nICAgU3lzdGVtLmFycmF5Y29weShmaWxlQmFzZU5hbWVzLCAwLCBidWYsIG1h\ncmssIGZpbGVCYXNlTmFtZXMubGVuZ3RoKTsKICAgICAgbWFyayArPSBmaWxl\nQmFzZU5hbWVzLmxlbmd0aDsKICAgICAgU3lzdGVtLmFycmF5Y29weShoYXJk\nTGlua011bHRTdWZmaXgsIDAsIGJ1ZiwgbWFyaywgCiAgICAgICAgICAgICAg\nICAgICAgICAgaGFyZExpbmtNdWx0U3VmZml4Lmxlbmd0aCk7CiAgICAgIG1h\ncmsgKz0gaGFyZExpbmtNdWx0U3VmZml4Lmxlbmd0aDsKICAgICAgYnVmW21h\ncmsgLSAzXSA9IHRkOwogICAgICByZXR1cm4gYnVmOwogICAgfQogICAgCiAg\nICAvKgogICAgICogQHNlZSBvcmcuYXBhY2hlLmhhZG9vcC5mcy5IYXJkTGlu\nay5IYXJkTGlua0NvbW1hbmRHZXR0ZXIjbGlua0NvdW50KGphdmEuaW8uRmls\nZSkKICAgICAqLwogICAgQE92ZXJyaWRlCiAgICBTdHJpbmdbXSBsaW5rQ291\nbnQoRmlsZSBmaWxlKSAKICAgIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAg\nIFN0cmluZ1tdIGJ1ZiA9IG5ldyBTdHJpbmdbZ2V0TGlua0NvdW50Q29tbWFu\nZC5sZW5ndGhdOwogICAgICBTeXN0ZW0uYXJyYXljb3B5KGdldExpbmtDb3Vu\ndENvbW1hbmQsIDAsIGJ1ZiwgMCwgCiAgICAgICAgICAgICAgICAgICAgICAg\nZ2V0TGlua0NvdW50Q29tbWFuZC5sZW5ndGgpOwogICAgICAvL1RoZSBsaW5r\nQ291bnQgY29tbWFuZCBpcyBhY3R1YWxseSBhIEN5Z3dpbiBzaGVsbCBjb21t\nYW5kLAogICAgICAvL25vdCBhIFdpbmRvd3Mgc2hlbGwgY29tbWFuZCwgc28g\nd2Ugc2hvdWxkIHVzZSAibWFrZVNoZWxsUGF0aCgpIgogICAgICAvL2luc3Rl\nYWQgb2YgImdldENhbm9uaWNhbFBhdGgoKSIuICBIb3dldmVyLCB0aGF0IGNh\ndXNlcyBhbm90aGVyCiAgICAgIC8vc2hlbGwgZXhlYyB0byAiY3lncGF0aC5l\neGUiLCBhbmQgInN0YXQuZXhlIiBhY3R1YWxseSBjYW4gaGFuZGxlCiAgICAg\nIC8vRE9TLXN0eWxlIHBhdGhzIChpdCBqdXN0IHByaW50cyBhIGNvdXBsZSBo\ndW5kcmVkIGJ5dGVzIG9mIHdhcm5pbmcKICAgICAgLy90byBzdGRlcnIpLCBz\nbyB3ZSB1c2UgdGhlIG1vcmUgZWZmaWNpZW50ICJnZXRDYW5vbmljYWxQYXRo\nKCkiLgogICAgICBidWZbZ2V0TGlua0NvdW50Q29tbWFuZC5sZW5ndGggLSAx\nXSA9IGZpbGUuZ2V0Q2Fub25pY2FsUGF0aCgpOwogICAgICByZXR1cm4gYnVm\nOwogICAgfQogICAgCiAgICAvKgogICAgICogQHNlZSBvcmcuYXBhY2hlLmhh\nZG9vcC5mcy5IYXJkTGluay5IYXJkTGlua0NvbW1hbmRHZXR0ZXIjZ2V0TGlu\na011bHRBcmdMZW5ndGgoamF2YS5pby5GaWxlLCBqYXZhLmxhbmcuU3RyaW5n\nW10sIGphdmEuaW8uRmlsZSkKICAgICAqLwogICAgQE92ZXJyaWRlCiAgICBp\nbnQgZ2V0TGlua011bHRBcmdMZW5ndGgoRmlsZSBmaWxlRGlyLCBTdHJpbmdb\nXSBmaWxlQmFzZU5hbWVzLCBGaWxlIGxpbmtEaXIpIAogICAgdGhyb3dzIElP\nRXhjZXB0aW9uIHsKICAgICAgaW50IHN1bSA9IDA7CiAgICAgIGZvciAoU3Ry\naW5nIHggOiBmaWxlQmFzZU5hbWVzKSB7CiAgICAgICAgLy8gYWRkIDEgdG8g\nYWNjb3VudCBmb3IgdGVybWluYWwgbnVsbCBvciBkZWxpbWl0ZXIgc3BhY2UK\nICAgICAgICBzdW0gKz0gMSArICgoeCA9PSBudWxsKSA/IDAgOiB4Lmxlbmd0\naCgpKTsKICAgICAgfQogICAgICBzdW0gKz0gMiArIGZpbGVEaXIuZ2V0Q2Fu\nb25pY2FsUGF0aCgpLmxlbmd0aCgpICsKICAgICAgICAgICAgICAgbGlua0Rp\nci5nZXRDYW5vbmljYWxQYXRoKCkubGVuZ3RoKCk7CiAgICAgIC8vYWRkIHRo\nZSBmaXhlZCBvdmVyaGVhZCBvZiB0aGUgaGFyZExpbmtNdWx0IGNvbW1hbmQg\nCiAgICAgIC8vKHByZWZpeCwgc3VmZml4LCBhbmQgRGlyIHN1ZmZpeCkKICAg\nICAgc3VtICs9ICgiY21kLmV4ZSAvcSAvYyBmb3IgJWYgaW4gKCApIGRvICIK\nICAgICAgICAgICAgICArICJmc3V0aWwgaGFyZGxpbmsgY3JlYXRlIFxcJWYg\nJWYgMT5OVUwgIikubGVuZ3RoKCk7CiAgICAgIHJldHVybiBzdW07CiAgICB9\nCiAgICAKICAgIC8qCiAgICAgKiBAc2VlIG9yZy5hcGFjaGUuaGFkb29wLmZz\nLkhhcmRMaW5rLkhhcmRMaW5rQ29tbWFuZEdldHRlciNnZXRNYXhBbGxvd2Vk\nQ21kQXJnTGVuZ3RoKCkKICAgICAqLwogICAgQE92ZXJyaWRlCiAgICBpbnQg\nZ2V0TWF4QWxsb3dlZENtZEFyZ0xlbmd0aCgpIHsKICAgICAgcmV0dXJuIG1h\neEFsbG93ZWRDbWRBcmdMZW5ndGg7CiAgICB9CiAgfQogIAogIAogIC8qKgog\nICAqIENhbGN1bGF0ZSB0aGUgbm9taW5hbCBsZW5ndGggb2YgYWxsIGNvbnRy\naWJ1dG9ycyB0byB0aGUgdG90YWwgCiAgICogY29tbWFuZHN0cmluZyBsZW5n\ndGgsIGluY2x1ZGluZyBmaXhlZCBvdmVyaGVhZCBvZiB0aGUgT1MtZGVwZW5k\nZW50IAogICAqIGNvbW1hbmQuICBJdCdzIHByb3RlY3RlZCByYXRoZXIgdGhh\nbiBwcml2YXRlLCB0byBhc3Npc3QgdW5pdCB0ZXN0aW5nLAogICAqIGJ1dCBy\nZWFsIGNsaWVudHMgYXJlIG5vdCBleHBlY3RlZCB0byBuZWVkIGl0IC0tIHNl\nZSB0aGUgd2F5IAogICAqIGNyZWF0ZUhhcmRMaW5rTXVsdCgpIHVzZXMgaXQg\naW50ZXJuYWxseSBzbyB0aGUgdXNlciBkb2Vzbid0IG5lZWQgdG8gd29ycnkK\nICAgKiBhYm91dCBpdC4KICAgKiAKICAgKiBAcGFyYW0gZmlsZURpciAtIHNv\ndXJjZSBkaXJlY3RvcnksIHBhcmVudCBvZiBmaWxlQmFzZU5hbWVzCiAgICog\nQHBhcmFtIGZpbGVCYXNlTmFtZXMgLSBhcnJheSBvZiBwYXRoLWxlc3MgZmls\nZSBuYW1lcywgcmVsYXRpdmUKICAgKiAgICAgICAgICAgIHRvIHRoZSBzb3Vy\nY2UgZGlyZWN0b3J5CiAgICogQHBhcmFtIGxpbmtEaXIgLSB0YXJnZXQgZGly\nZWN0b3J5IHdoZXJlIHRoZSBoYXJkbGlua3Mgd2lsbCBiZSBwdXQKICAgKiBA\ncmV0dXJuIC0gdG90YWwgZGF0YSBsZW5ndGggKG11c3Qgbm90IGV4Y2VlZCBt\nYXhBbGxvd2VkQ21kQXJnTGVuZ3RoKQogICAqIEB0aHJvd3MgSU9FeGNlcHRp\nb24KICAgKi8KICBwcm90ZWN0ZWQgc3RhdGljIGludCBnZXRMaW5rTXVsdEFy\nZ0xlbmd0aCgKICAgICAgICAgIEZpbGUgZmlsZURpciwgU3RyaW5nW10gZmls\nZUJhc2VOYW1lcywgRmlsZSBsaW5rRGlyKSAKICB0aHJvd3MgSU9FeGNlcHRp\nb24gewogICAgcmV0dXJuIGdldEhhcmRMaW5rQ29tbWFuZC5nZXRMaW5rTXVs\ndEFyZ0xlbmd0aChmaWxlRGlyLCAKICAgICAgICAgIGZpbGVCYXNlTmFtZXMs\nIGxpbmtEaXIpOwogIH0KICAKICAvKioKICAgKiBSZXR1cm4gdGhpcyBwcml2\nYXRlIHZhbHVlIGZvciB1c2UgYnkgdW5pdCB0ZXN0cy4KICAgKiBTaGVsbCBj\nb21tYW5kcyBhcmUgbm90IGFsbG93ZWQgdG8gaGF2ZSBhIHRvdGFsIHN0cmlu\nZyBsZW5ndGgKICAgKiBleGNlZWRpbmcgdGhpcyBzaXplLgogICAqLwogIHBy\nb3RlY3RlZCBzdGF0aWMgaW50IGdldE1heEFsbG93ZWRDbWRBcmdMZW5ndGgo\nKSB7CiAgICByZXR1cm4gZ2V0SGFyZExpbmtDb21tYW5kLmdldE1heEFsbG93\nZWRDbWRBcmdMZW5ndGgoKTsKICB9CiAgCiAgLyoKICAgKiAqKioqKioqKioq\nKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAg\nICogQ29tcGxleGl0eSBpcyBhYm92ZS4gIFVzZXItdmlzaWJsZSBmdW5jdGlv\nbmFsaXR5IGlzIGJlbG93CiAgICogKioqKioqKioqKioqKioqKioqKioqKioq\nKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogICAqLwoKICAvKioKICAg\nKiBDcmVhdGVzIGEgaGFyZGxpbmsgCiAgICogQHBhcmFtIGZpbGUgLSBleGlz\ndGluZyBzb3VyY2UgZmlsZQogICAqIEBwYXJhbSBsaW5rTmFtZSAtIGRlc2ly\nZWQgdGFyZ2V0IGxpbmsgZmlsZQogICAqLwogIHB1YmxpYyBzdGF0aWMgdm9p\nZCBjcmVhdGVIYXJkTGluayhGaWxlIGZpbGUsIEZpbGUgbGlua05hbWUpIAog\nIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICBpZiAoZmlsZSA9PSBudWxsKSB7\nCiAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlvbigKICAgICAgICAgICJpbnZh\nbGlkIGFyZ3VtZW50cyB0byBjcmVhdGVIYXJkTGluazogc291cmNlIGZpbGUg\naXMgbnVsbCIpOwogICAgfQogICAgaWYgKGxpbmtOYW1lID09IG51bGwpIHsK\nICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKAogICAgICAgICAgImludmFs\naWQgYXJndW1lbnRzIHRvIGNyZWF0ZUhhcmRMaW5rOiBsaW5rIG5hbWUgaXMg\nbnVsbCIpOwogICAgfQoJICAvLyBjb25zdHJ1Y3QgYW5kIGV4ZWN1dGUgc2hl\nbGwgY29tbWFuZAogICAgU3RyaW5nW10gaGFyZExpbmtDb21tYW5kID0gZ2V0\nSGFyZExpbmtDb21tYW5kLmxpbmtPbmUoZmlsZSwgbGlua05hbWUpOwogICAg\nUHJvY2VzcyBwcm9jZXNzID0gUnVudGltZS5nZXRSdW50aW1lKCkuZXhlYyho\nYXJkTGlua0NvbW1hbmQpOwogICAgdHJ5IHsKICAgICAgaWYgKHByb2Nlc3Mu\nd2FpdEZvcigpICE9IDApIHsKICAgICAgICBTdHJpbmcgZXJyTXNnID0gbmV3\nIEJ1ZmZlcmVkUmVhZGVyKG5ldyBJbnB1dFN0cmVhbVJlYWRlcigKICAgICAg\nICAgICAgcHJvY2Vzcy5nZXRJbnB1dFN0cmVhbSgpKSkucmVhZExpbmUoKTsK\nICAgICAgICBpZiAoZXJyTXNnID09IG51bGwpICBlcnJNc2cgPSAiIjsKICAg\nICAgICBTdHJpbmcgaW5wTXNnID0gbmV3IEJ1ZmZlcmVkUmVhZGVyKG5ldyBJ\nbnB1dFN0cmVhbVJlYWRlcigKICAgICAgICAgICAgcHJvY2Vzcy5nZXRFcnJv\nclN0cmVhbSgpKSkucmVhZExpbmUoKTsKICAgICAgICBpZiAoaW5wTXNnID09\nIG51bGwpICBpbnBNc2cgPSAiIjsKICAgICAgICB0aHJvdyBuZXcgSU9FeGNl\ncHRpb24oZXJyTXNnICsgaW5wTXNnKTsKICAgICAgfQogICAgfSBjYXRjaCAo\nSW50ZXJydXB0ZWRFeGNlcHRpb24gZSkgewogICAgICB0aHJvdyBuZXcgSU9F\neGNlcHRpb24oZSk7CiAgICB9IGZpbmFsbHkgewogICAgICBwcm9jZXNzLmRl\nc3Ryb3koKTsKICAgIH0KICB9CgogIC8qKgogICAqIENyZWF0ZXMgaGFyZGxp\nbmtzIGZyb20gbXVsdGlwbGUgZXhpc3RpbmcgZmlsZXMgd2l0aGluIG9uZSBw\nYXJlbnQKICAgKiBkaXJlY3RvcnksIGludG8gb25lIHRhcmdldCBkaXJlY3Rv\ncnkuCiAgICogQHBhcmFtIHBhcmVudERpciAtIGRpcmVjdG9yeSBjb250YWlu\naW5nIHNvdXJjZSBmaWxlcwogICAqIEBwYXJhbSBmaWxlQmFzZU5hbWVzIC0g\nbGlzdCBvZiBwYXRoLWxlc3MgZmlsZSBuYW1lcywgYXMgcmV0dXJuZWQgYnkg\nCiAgICogICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnREaXIubGlzdCgp\nCiAgICogQHBhcmFtIGxpbmtEaXIgLSB3aGVyZSB0aGUgaGFyZGxpbmtzIHNo\nb3VsZCBiZSBwdXQuICBJdCBtdXN0IGFscmVhZHkgZXhpc3QuCiAgICogCiAg\nICogSWYgdGhlIGxpc3Qgb2YgZmlsZXMgaXMgdG9vIGxvbmcgKG92ZXJmbG93\ncyBtYXhBbGxvd2VkQ21kQXJnTGVuZ3RoKSwKICAgKiB3ZSB3aWxsIGF1dG9t\nYXRpY2FsbHkgc3BsaXQgaXQgaW50byBtdWx0aXBsZSBpbnZvY2F0aW9ucyBv\nZiB0aGUKICAgKiB1bmRlcmx5aW5nIG1ldGhvZC4KICAgKi8KICBwdWJsaWMg\nc3RhdGljIHZvaWQgY3JlYXRlSGFyZExpbmtNdWx0KEZpbGUgcGFyZW50RGly\nLCBTdHJpbmdbXSBmaWxlQmFzZU5hbWVzLCAKICAgICAgRmlsZSBsaW5rRGly\nKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgLy9UaGlzIGlzIHRoZSBwdWJs\naWMgbWV0aG9kIGFsbCBub24tdGVzdCBjbGllbnRzIGFyZSBleHBlY3RlZCB0\nbyB1c2UuCiAgICAvL05vcm1hbCBjYXNlIC0gYWxsb3cgdXAgdG8gbWF4QWxs\nb3dlZENtZEFyZ0xlbmd0aCBjaGFyYWN0ZXJzIGluIHRoZSBjbWQKICAgIGNy\nZWF0ZUhhcmRMaW5rTXVsdChwYXJlbnREaXIsIGZpbGVCYXNlTmFtZXMsIGxp\nbmtEaXIsIAogICAgICAgICAgICAgICAgICAgICAgIGdldEhhcmRMaW5rQ29t\nbWFuZC5nZXRNYXhBbGxvd2VkQ21kQXJnTGVuZ3RoKCkpOwogIH0KCiAgLyoK\nICAgKiBJbXBsZW1lbnRzIHtAbGluayBjcmVhdGVIYXJkTGlua011bHR9IHdp\ndGggYWRkZWQgdmFyaWFibGUgICJtYXhMZW5ndGgiLAogICAqIHRvIGVhc2Ug\ndW5pdCB0ZXN0aW5nIG9mIHRoZSBhdXRvLXNwbGl0dGluZyBmZWF0dXJlIGZv\nciBsb25nIGxpc3RzLgogICAqIExpa2V3aXNlIHdoeSBpdCByZXR1cm5zICJj\nYWxsQ291bnQiLCB0aGUgbnVtYmVyIG9mIHN1Yi1hcnJheXMgdGhhdAogICAq\nIHRoZSBmaWxlIGxpc3QgaGFkIHRvIGJlIHNwbGl0IGludG8uCiAgICogTm9u\nLXRlc3QgY2xpZW50cyBhcmUgZXhwZWN0ZWQgdG8gY2FsbCB0aGUgcHVibGlj\nIG1ldGhvZCBpbnN0ZWFkLgogICAqLwogIHByb3RlY3RlZCBzdGF0aWMgaW50\nIGNyZWF0ZUhhcmRMaW5rTXVsdChGaWxlIHBhcmVudERpciwgCiAgICAgIFN0\ncmluZ1tdIGZpbGVCYXNlTmFtZXMsIEZpbGUgbGlua0RpciwgaW50IG1heExl\nbmd0aCkgCiAgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgIGlmIChwYXJlbnRE\naXIgPT0gbnVsbCkgewogICAgICB0aHJvdyBuZXcgSU9FeGNlcHRpb24oCiAg\nICAgICAgICAiaW52YWxpZCBhcmd1bWVudHMgdG8gY3JlYXRlSGFyZExpbmtN\ndWx0OiBwYXJlbnQgZGlyZWN0b3J5IGlzIG51bGwiKTsKICAgIH0KICAgIGlm\nIChsaW5rRGlyID09IG51bGwpIHsKICAgICAgdGhyb3cgbmV3IElPRXhjZXB0\naW9uKAogICAgICAgICAgImludmFsaWQgYXJndW1lbnRzIHRvIGNyZWF0ZUhh\ncmRMaW5rTXVsdDogbGluayBkaXJlY3RvcnkgaXMgbnVsbCIpOwogICAgfQog\nICAgaWYgKGZpbGVCYXNlTmFtZXMgPT0gbnVsbCkgewogICAgICB0aHJvdyBu\nZXcgSU9FeGNlcHRpb24oCiAgICAgICAgICAiaW52YWxpZCBhcmd1bWVudHMg\ndG8gY3JlYXRlSGFyZExpbmtNdWx0OiAiCiAgICAgICAgICArICJmaWxlbmFt\nZSBsaXN0IGNhbiBiZSBlbXB0eSBidXQgbm90IG51bGwiKTsKICAgIH0KICAg\nIGlmIChmaWxlQmFzZU5hbWVzLmxlbmd0aCA9PSAwKSB7CiAgICAgIC8vdGhl\nIE9TIGNtZHMgY2FuJ3QgaGFuZGxlIGVtcHR5IGxpc3Qgb2YgZmlsZW5hbWVz\nLCAKICAgICAgLy9idXQgaXQncyBsZWdhbCwgc28ganVzdCByZXR1cm4uCiAg\nICAgIHJldHVybiAwOyAKICAgIH0KICAgIGlmICghbGlua0Rpci5leGlzdHMo\nKSkgewogICAgICB0aHJvdyBuZXcgRmlsZU5vdEZvdW5kRXhjZXB0aW9uKGxp\nbmtEaXIgKyAiIG5vdCBmb3VuZC4iKTsKICAgIH0KCiAgICAvL2lmIHRoZSBs\naXN0IGlzIHRvbyBsb25nLCBzcGxpdCBpbnRvIG11bHRpcGxlIGludm9jYXRp\nb25zCiAgICBpbnQgY2FsbENvdW50ID0gMDsKICAgIGlmIChnZXRMaW5rTXVs\ndEFyZ0xlbmd0aChwYXJlbnREaXIsIGZpbGVCYXNlTmFtZXMsIGxpbmtEaXIp\nID4gbWF4TGVuZ3RoCiAgICAgICAgICAmJiBmaWxlQmFzZU5hbWVzLmxlbmd0\naCA+IDEpIHsKICAgICAgU3RyaW5nW10gbGlzdDEgPSBBcnJheXMuY29weU9m\nKGZpbGVCYXNlTmFtZXMsIGZpbGVCYXNlTmFtZXMubGVuZ3RoLzIpOwogICAg\nICBjYWxsQ291bnQgKz0gY3JlYXRlSGFyZExpbmtNdWx0KHBhcmVudERpciwg\nbGlzdDEsIGxpbmtEaXIsIG1heExlbmd0aCk7CiAgICAgIFN0cmluZ1tdIGxp\nc3QyID0gQXJyYXlzLmNvcHlPZlJhbmdlKGZpbGVCYXNlTmFtZXMsIGZpbGVC\nYXNlTmFtZXMubGVuZ3RoLzIsCiAgICAgICAgICBmaWxlQmFzZU5hbWVzLmxl\nbmd0aCk7CiAgICAgIGNhbGxDb3VudCArPSBjcmVhdGVIYXJkTGlua011bHQo\ncGFyZW50RGlyLCBsaXN0MiwgbGlua0RpciwgbWF4TGVuZ3RoKTsgIAogICAg\nICByZXR1cm4gY2FsbENvdW50OwogICAgfSBlbHNlIHsKICAgICAgY2FsbENv\ndW50ID0gMTsKICAgIH0KICAgIAogICAgLy8gY29uc3RydWN0IGFuZCBleGVj\ndXRlIHNoZWxsIGNvbW1hbmQKICAgIFN0cmluZ1tdIGhhcmRMaW5rQ29tbWFu\nZCA9IGdldEhhcmRMaW5rQ29tbWFuZC5saW5rTXVsdChmaWxlQmFzZU5hbWVz\nLCAKICAgICAgICBsaW5rRGlyKTsKICAgIFByb2Nlc3MgcHJvY2VzcyA9IFJ1\nbnRpbWUuZ2V0UnVudGltZSgpLmV4ZWMoaGFyZExpbmtDb21tYW5kLCBudWxs\nLCAKICAgICAgICBwYXJlbnREaXIpOwogICAgdHJ5IHsKICAgICAgaWYgKHBy\nb2Nlc3Mud2FpdEZvcigpICE9IDApIHsKICAgICAgICBTdHJpbmcgZXJyTXNn\nID0gbmV3IEJ1ZmZlcmVkUmVhZGVyKG5ldyBJbnB1dFN0cmVhbVJlYWRlcigK\nICAgICAgICAgICAgcHJvY2Vzcy5nZXRJbnB1dFN0cmVhbSgpKSkucmVhZExp\nbmUoKTsKICAgICAgICBpZiAoZXJyTXNnID09IG51bGwpICBlcnJNc2cgPSAi\nIjsKICAgICAgICBTdHJpbmcgaW5wTXNnID0gbmV3IEJ1ZmZlcmVkUmVhZGVy\nKG5ldyBJbnB1dFN0cmVhbVJlYWRlcigKICAgICAgICAgICAgcHJvY2Vzcy5n\nZXRFcnJvclN0cmVhbSgpKSkucmVhZExpbmUoKTsKICAgICAgICBpZiAoaW5w\nTXNnID09IG51bGwpICBpbnBNc2cgPSAiIjsKICAgICAgICB0aHJvdyBuZXcg\nSU9FeGNlcHRpb24oZXJyTXNnICsgaW5wTXNnKTsKICAgICAgfQogICAgfSBj\nYXRjaCAoSW50ZXJydXB0ZWRFeGNlcHRpb24gZSkgewogICAgICB0aHJvdyBu\nZXcgSU9FeGNlcHRpb24oZSk7CiAgICB9IGZpbmFsbHkgewogICAgICBwcm9j\nZXNzLmRlc3Ryb3koKTsKICAgIH0KICAgIHJldHVybiBjYWxsQ291bnQ7CiAg\nfQoKICAgLyoqCiAgICogUmV0cmlldmVzIHRoZSBudW1iZXIgb2YgbGlua3Mg\ndG8gdGhlIHNwZWNpZmllZCBmaWxlLgogICAqLwogIHB1YmxpYyBzdGF0aWMg\naW50IGdldExpbmtDb3VudChGaWxlIGZpbGVOYW1lKSB0aHJvd3MgSU9FeGNl\ncHRpb24gewogICAgaWYgKGZpbGVOYW1lID09IG51bGwpIHsKICAgICAgdGhy\nb3cgbmV3IElPRXhjZXB0aW9uKAogICAgICAgICAgImludmFsaWQgYXJndW1l\nbnQgdG8gZ2V0TGlua0NvdW50OiBmaWxlIG5hbWUgaXMgbnVsbCIpOwogICAg\nfQogICAgaWYgKCFmaWxlTmFtZS5leGlzdHMoKSkgewogICAgICB0aHJvdyBu\nZXcgRmlsZU5vdEZvdW5kRXhjZXB0aW9uKGZpbGVOYW1lICsgIiBub3QgZm91\nbmQuIik7CiAgICB9CgogICAgLy8gY29uc3RydWN0IGFuZCBleGVjdXRlIHNo\nZWxsIGNvbW1hbmQKICAgIFN0cmluZ1tdIGNtZCA9IGdldEhhcmRMaW5rQ29t\nbWFuZC5saW5rQ291bnQoZmlsZU5hbWUpOwogICAgU3RyaW5nIGlucE1zZyA9\nIG51bGw7CiAgICBTdHJpbmcgZXJyTXNnID0gbnVsbDsKICAgIGludCBleGl0\nVmFsdWUgPSAtMTsKICAgIEJ1ZmZlcmVkUmVhZGVyIGluID0gbnVsbDsKICAg\nIEJ1ZmZlcmVkUmVhZGVyIGVyciA9IG51bGw7CgogICAgUHJvY2VzcyBwcm9j\nZXNzID0gUnVudGltZS5nZXRSdW50aW1lKCkuZXhlYyhjbWQpOwogICAgdHJ5\nIHsKICAgICAgZXhpdFZhbHVlID0gcHJvY2Vzcy53YWl0Rm9yKCk7CiAgICAg\nIGluID0gbmV3IEJ1ZmZlcmVkUmVhZGVyKG5ldyBJbnB1dFN0cmVhbVJlYWRl\ncigKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3Mu\nZ2V0SW5wdXRTdHJlYW0oKSkpOwogICAgICBpbnBNc2cgPSBpbi5yZWFkTGlu\nZSgpOwogICAgICBlcnIgPSBuZXcgQnVmZmVyZWRSZWFkZXIobmV3IElucHV0\nU3RyZWFtUmVhZGVyKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIHByb2Nlc3MuZ2V0RXJyb3JTdHJlYW0oKSkpOwogICAgICBlcnJNc2cg\nPSBlcnIucmVhZExpbmUoKTsKICAgICAgaWYgKGlucE1zZyA9PSBudWxsIHx8\nIGV4aXRWYWx1ZSAhPSAwKSB7CiAgICAgICAgdGhyb3cgY3JlYXRlSU9FeGNl\ncHRpb24oZmlsZU5hbWUsIGlucE1zZywgZXJyTXNnLCBleGl0VmFsdWUsIG51\nbGwpOwogICAgICB9CiAgICAgIGlmIChvc1R5cGUgPT0gT1NUeXBlLk9TX1RZ\nUEVfU09MQVJJUykgewogICAgICAgIFN0cmluZ1tdIHJlc3VsdCA9IGlucE1z\nZy5zcGxpdCgiXFxzKyIpOwogICAgICAgIHJldHVybiBJbnRlZ2VyLnBhcnNl\nSW50KHJlc3VsdFsxXSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJu\nIEludGVnZXIucGFyc2VJbnQoaW5wTXNnKTsKICAgICAgfQogICAgfSBjYXRj\naCAoTnVtYmVyRm9ybWF0RXhjZXB0aW9uIGUpIHsKICAgICAgdGhyb3cgY3Jl\nYXRlSU9FeGNlcHRpb24oZmlsZU5hbWUsIGlucE1zZywgZXJyTXNnLCBleGl0\nVmFsdWUsIGUpOwogICAgfSBjYXRjaCAoSW50ZXJydXB0ZWRFeGNlcHRpb24g\nZSkgewogICAgICB0aHJvdyBjcmVhdGVJT0V4Y2VwdGlvbihmaWxlTmFtZSwg\naW5wTXNnLCBlcnJNc2csIGV4aXRWYWx1ZSwgZSk7CiAgICB9IGZpbmFsbHkg\newogICAgICBwcm9jZXNzLmRlc3Ryb3koKTsKICAgICAgaWYgKGluICE9IG51\nbGwpIGluLmNsb3NlKCk7CiAgICAgIGlmIChlcnIgIT0gbnVsbCkgZXJyLmNs\nb3NlKCk7CiAgICB9CiAgfQogIAogIC8qIENyZWF0ZSBhbiBJT0V4Y2VwdGlv\nbiBmb3IgZmFpbGluZyB0byBnZXQgbGluayBjb3VudC4gKi8KICBwcml2YXRl\nIHN0YXRpYyBJT0V4Y2VwdGlvbiBjcmVhdGVJT0V4Y2VwdGlvbihGaWxlIGYs\nIFN0cmluZyBtZXNzYWdlLAogICAgICBTdHJpbmcgZXJyb3IsIGludCBleGl0\ndmFsdWUsIEV4Y2VwdGlvbiBjYXVzZSkgewogICAgCiAgICBmaW5hbCBTdHJp\nbmcgd2luRXJyTXNnID0gIjsgV2luZG93cyBlcnJvcnMgaW4gZ2V0TGlua0Nv\ndW50IGFyZSBvZnRlbiBkdWUgIgogICAgICAgICArICJ0byBDeWd3aW4gbWlz\nY29uZmlndXJhdGlvbiI7CgogICAgZmluYWwgU3RyaW5nIHMgPSAiRmFpbGVk\nIHRvIGdldCBsaW5rIGNvdW50IG9uIGZpbGUgIiArIGYKICAgICAgICArICI6\nIG1lc3NhZ2U9IiArIG1lc3NhZ2UKICAgICAgICArICI7IGVycm9yPSIgKyBl\ncnJvcgogICAgICAgICsgKChvc1R5cGUgPT0gT1NUeXBlLk9TX1RZUEVfV0lO\nWFApID8gd2luRXJyTXNnIDogIiIpCiAgICAgICAgKyAiOyBleGl0IHZhbHVl\nPSIgKyBleGl0dmFsdWU7CiAgICByZXR1cm4gKGNhdXNlID09IG51bGwpID8g\nbmV3IElPRXhjZXB0aW9uKHMpIDogbmV3IElPRXhjZXB0aW9uKHMsIGNhdXNl\nKTsKICB9CiAgCiAgCiAgLyoqCiAgICogSGFyZExpbmsgc3RhdGlzdGljcyBj\nb3VudGVycyBhbmQgbWV0aG9kcy4KICAgKiBOb3QgbXVsdGktdGhyZWFkIHNh\nZmUsIG9idmlvdXNseS4KICAgKiBJbml0IGlzIGNhbGxlZCBkdXJpbmcgSGFy\nZExpbmsgaW5zdGFudGlhdGlvbiwgYWJvdmUuCiAgICogCiAgICogVGhlc2Ug\nYXJlIGludGVuZGVkIGZvciB1c2UgYnkga25vd2xlZGdlYWJsZSBjbGllbnRz\nLCBub3QgaW50ZXJuYWxseSwgCiAgICogYmVjYXVzZSBtYW55IG9mIHRoZSBp\nbnRlcm5hbCBtZXRob2RzIGFyZSBzdGF0aWMgYW5kIGNhbid0IHVwZGF0ZSB0\naGVzZQogICAqIHBlci1pbnN0YW5jZSBjb3VudGVycy4KICAgKi8KICBwdWJs\naWMgc3RhdGljIGNsYXNzIExpbmtTdGF0cyB7CiAgICBwdWJsaWMgaW50IGNv\ndW50RGlycyA9IDA7IAogICAgcHVibGljIGludCBjb3VudFNpbmdsZUxpbmtz\nID0gMDsgCiAgICBwdWJsaWMgaW50IGNvdW50TXVsdExpbmtzID0gMDsgCiAg\nICBwdWJsaWMgaW50IGNvdW50RmlsZXNNdWx0TGlua3MgPSAwOyAKICAgIHB1\nYmxpYyBpbnQgY291bnRFbXB0eURpcnMgPSAwOyAKICAgIHB1YmxpYyBpbnQg\nY291bnRQaHlzaWNhbEZpbGVDb3BpZXMgPSAwOwogIAogICAgcHVibGljIHZv\naWQgY2xlYXIoKSB7CiAgICAgIGNvdW50RGlycyA9IDA7IAogICAgICBjb3Vu\ndFNpbmdsZUxpbmtzID0gMDsgCiAgICAgIGNvdW50TXVsdExpbmtzID0gMDsg\nCiAgICAgIGNvdW50RmlsZXNNdWx0TGlua3MgPSAwOyAKICAgICAgY291bnRF\nbXB0eURpcnMgPSAwOyAKICAgICAgY291bnRQaHlzaWNhbEZpbGVDb3BpZXMg\nPSAwOwogICAgfQogICAgCiAgICBwdWJsaWMgU3RyaW5nIHJlcG9ydCgpIHsK\nICAgICAgcmV0dXJuICJIYXJkTGlua1N0YXRzOiAiICsgY291bnREaXJzICsg\nIiBEaXJlY3RvcmllcywgaW5jbHVkaW5nICIgCiAgICAgICsgY291bnRFbXB0\neURpcnMgKyAiIEVtcHR5IERpcmVjdG9yaWVzLCAiIAogICAgICArIGNvdW50\nU2luZ2xlTGlua3MgCiAgICAgICsgIiBzaW5nbGUgTGluayBvcGVyYXRpb25z\nLCAiICsgY291bnRNdWx0TGlua3MgCiAgICAgICsgIiBtdWx0aS1MaW5rIG9w\nZXJhdGlvbnMsIGxpbmtpbmcgIiArIGNvdW50RmlsZXNNdWx0TGlua3MgCiAg\nICAgICsgIiBmaWxlcywgdG90YWwgIiArIChjb3VudFNpbmdsZUxpbmtzICsg\nY291bnRGaWxlc011bHRMaW5rcykgCiAgICAgICsgIiBsaW5rYWJsZSBmaWxl\ncy4gIEFsc28gcGh5c2ljYWxseSBjb3BpZWQgIiAKICAgICAgKyBjb3VudFBo\neXNpY2FsRmlsZUNvcGllcyArICIgb3RoZXIgZmlsZXMuIjsKICAgIH0KICB9\nCgogIC8qKgogICAqIENvbnZlcnQgYSBvcy1uYXRpdmUgZmlsZW5hbWUgdG8g\nYSBwYXRoIHRoYXQgd29ya3MgZm9yIHRoZSBzaGVsbC4KICAgKiBAcGFyYW0g\nZmlsZW5hbWUgVGhlIGZpbGVuYW1lIHRvIGNvbnZlcnQKICAgKiBAcmV0dXJu\nIFRoZSB1bml4IHBhdGhuYW1lCiAgICogQHRocm93cyBJT0V4Y2VwdGlvbiBv\nbiB3aW5kb3dzLCB0aGVyZSBjYW4gYmUgcHJvYmxlbXMgd2l0aCB0aGUgc3Vi\ncHJvY2VzcwogICAqLwogIHB1YmxpYyBzdGF0aWMgU3RyaW5nIG1ha2VTaGVs\nbFBhdGgoRmlsZSBmaWxlKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgU3Ry\naW5nIGZpbGVuYW1lID0gZmlsZS5nZXRDYW5vbmljYWxQYXRoKCk7CiAgICBp\nZiAoU3lzdGVtLmdldFByb3BlcnR5KCJvcy5uYW1lIikuc3RhcnRzV2l0aCgi\nV2luZG93cyIpKSB7CiAgICAgIEJ1ZmZlcmVkUmVhZGVyIHIgPSBudWxsOwog\nICAgICB0cnkgewogICAgICAgIFByb2Nlc3NCdWlsZGVyIHBiID0gbmV3IFBy\nb2Nlc3NCdWlsZGVyKCJjeWdwYXRoIiwgIi11IiwgZmlsZW5hbWUpOwogICAg\nICAgIFByb2Nlc3MgcCA9IHBiLnN0YXJ0KCk7CiAgICAgICAgaW50IGVyciA9\nIHAud2FpdEZvcigpOwogICAgICAgIGlmIChlcnIgIT0gMCkgewogICAgICAg\nICAgICB0aHJvdyBuZXcgSU9FeGNlcHRpb24oIkNvdWxkbid0IHJlc29sdmUg\ncGF0aCAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIGZp\nbGVuYW1lICsgIigiICsgZXJyICsgIikiKTsKICAgICAgICB9CiAgICAgICAg\nciA9IG5ldyBCdWZmZXJlZFJlYWRlcihuZXcgSW5wdXRTdHJlYW1SZWFkZXIo\ncC5nZXRJbnB1dFN0cmVhbSgpKSk7CiAgICAgICAgcmV0dXJuIHIucmVhZExp\nbmUoKTsKICAgICAgfSBjYXRjaCAoSW50ZXJydXB0ZWRFeGNlcHRpb24gaWUp\nIHsKICAgICAgICB0aHJvdyBuZXcgSU9FeGNlcHRpb24oIkNvdWxkbid0IHJl\nc29sdmUgcGF0aCAiICsgZmlsZW5hbWUsIGllKTsKICAgICAgfSBmaW5hbGx5\nIHsKICAgICAgICBpZiAociAhPSBudWxsKSB7CiAgICAgICAgICByLmNsb3Nl\nKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgewogICAgICByZXR1\ncm4gZmlsZW5hbWU7CiAgICB9CiAgfQp9Cgo=\n","encoding":"base64"}

