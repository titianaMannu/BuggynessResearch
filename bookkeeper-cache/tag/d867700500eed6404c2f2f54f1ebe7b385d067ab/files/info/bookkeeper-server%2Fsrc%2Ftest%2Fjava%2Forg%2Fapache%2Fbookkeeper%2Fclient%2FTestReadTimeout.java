{"sha":"eed9905dee872829e2987d640e7d8025689851bd","node_id":"MDQ6QmxvYjE1NzU5NTY6ZWVkOTkwNWRlZTg3MjgyOWUyOTg3ZDY0MGU3ZDgwMjU2ODk4NTFiZA==","size":3722,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/eed9905dee872829e2987d640e7d8025689851bd","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY2xpZW50OwoKLyoKICoK\nICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9u\nIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vu\nc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlzdHJp\nYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRp\nb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNG\nIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNo\nZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7IHlv\ndSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2UK\nICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBv\nZiB0aGUgTGljZW5zZSBhdAogKgogKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9y\nZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQg\nYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsCiAq\nIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRp\nc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhPVVQgV0FS\nUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBlaXRoZXIg\nZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUK\nICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFu\nZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICoKICovCgpp\nbXBvcnQgb3JnLmp1bml0Lio7CmltcG9ydCBqYXZhLm5ldC5JbmV0U29ja2V0\nQWRkcmVzczsKaW1wb3J0IGphdmEudXRpbC5FbnVtZXJhdGlvbjsKaW1wb3J0\nIGphdmEudXRpbC5jb25jdXJyZW50LkN5Y2xpY0JhcnJpZXI7CmltcG9ydCBq\nYXZhLnV0aWwuY29uY3VycmVudC5Db3VudERvd25MYXRjaDsKaW1wb3J0IGph\ndmEudXRpbC5jb25jdXJyZW50LmF0b21pYy5BdG9taWNCb29sZWFuOwppbXBv\ncnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNvbmYuQ2xpZW50Q29uZmlndXJh\ndGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5jbGllbnQuQXN5\nbmNDYWxsYmFjay5BZGRDYWxsYmFjazsKCmltcG9ydCBvcmcuYXBhY2hlLmJv\nb2trZWVwZXIuY2xpZW50LkxlZGdlckhhbmRsZTsKaW1wb3J0IG9yZy5hcGFj\naGUuYm9va2tlZXBlci5jbGllbnQuTGVkZ2VyRW50cnk7CmltcG9ydCBvcmcu\nYXBhY2hlLmJvb2trZWVwZXIuY2xpZW50LkJvb2tLZWVwZXI7CmltcG9ydCBv\ncmcuYXBhY2hlLmJvb2trZWVwZXIuY2xpZW50LkJvb2tLZWVwZXJBZG1pbjsK\naW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci5jbGllbnQuQktFeGNlcHRp\nb247CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY2xpZW50LkJvb2tL\nZWVwZXIuRGlnZXN0VHlwZTsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBl\nci50ZXN0LkJvb2tLZWVwZXJDbHVzdGVyVGVzdENhc2U7CmltcG9ydCBqYXZh\nLnV0aWwuSGFzaFNldDsKaW1wb3J0IGphdmEudXRpbC5TZXQ7CgppbXBvcnQg\nb3JnLnNsZjRqLkxvZ2dlcjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJGYWN0\nb3J5OwoKLyoqCiAqIFRoaXMgdW5pdCB0ZXN0IHRlc3RzIGxlZGdlciBmZW5j\naW5nOwogKgogKi8KcHVibGljIGNsYXNzIFRlc3RSZWFkVGltZW91dCBleHRl\nbmRzIEJvb2tLZWVwZXJDbHVzdGVyVGVzdENhc2UgewogICAgc3RhdGljIExv\nZ2dlciBMT0cgPSBMb2dnZXJGYWN0b3J5LmdldExvZ2dlcihUZXN0UmVhZFRp\nbWVvdXQuY2xhc3MpOwoKICAgIERpZ2VzdFR5cGUgZGlnZXN0VHlwZTsKCiAg\nICBwdWJsaWMgVGVzdFJlYWRUaW1lb3V0KCkgewogICAgICAgIHN1cGVyKDEw\nKTsKICAgICAgICB0aGlzLmRpZ2VzdFR5cGUgPSBEaWdlc3RUeXBlLkNSQzMy\nOwogICAgfQoKICAgIEBUZXN0CiAgICBwdWJsaWMgdm9pZCB0ZXN0UmVhZFRp\nbWVvdXQoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBmaW5hbCBBdG9t\naWNCb29sZWFuIGNvbXBsZXRlZCA9IG5ldyBBdG9taWNCb29sZWFuKGZhbHNl\nKTsKCiAgICAgICAgTGVkZ2VySGFuZGxlIHdyaXRlbGggPSBia2MuY3JlYXRl\nTGVkZ2VyKDMsMyxkaWdlc3RUeXBlLCAidGVzdFBhc3N3ZCIuZ2V0Qnl0ZXMo\nKSk7CiAgICAgICAgU3RyaW5nIHRtcCA9ICJGb29iYXIiOwogICAgICAgIAog\nICAgICAgIGZpbmFsIGludCBudW1FbnRyaWVzID0gMTA7CiAgICAgICAgZm9y\nIChpbnQgaSA9IDA7IGkgPCBudW1FbnRyaWVzOyBpKyspIHsKICAgICAgICAg\nICAgd3JpdGVsaC5hZGRFbnRyeSh0bXAuZ2V0Qnl0ZXMoKSk7CiAgICAgICAg\nfQogICAgICAgIAogICAgICAgIFNldDxJbmV0U29ja2V0QWRkcmVzcz4gYmVm\nb3JlU2V0ID0gbmV3IEhhc2hTZXQ8SW5ldFNvY2tldEFkZHJlc3M+KCk7CiAg\nICAgICAgZm9yIChJbmV0U29ja2V0QWRkcmVzcyBhZGRyIDogd3JpdGVsaC5n\nZXRMZWRnZXJNZXRhZGF0YSgpLmdldEVuc2VtYmxlKG51bUVudHJpZXMpKSB7\nCiAgICAgICAgICAgIGJlZm9yZVNldC5hZGQoYWRkcik7CiAgICAgICAgfQoK\nICAgICAgICBmaW5hbCBJbmV0U29ja2V0QWRkcmVzcyBib29raWVUb1NsZWVw\nIAogICAgICAgICAgICA9IHdyaXRlbGguZ2V0TGVkZ2VyTWV0YWRhdGEoKS5n\nZXRFbnNlbWJsZShudW1FbnRyaWVzKS5nZXQoMCk7CiAgICAgICAgaW50IHNs\nZWVwdGltZSA9IGJhc2VDbGllbnRDb25mLmdldFJlYWRUaW1lb3V0KCkqMzsK\nICAgICAgICBDb3VudERvd25MYXRjaCBsYXRjaCA9IG5ldyBDb3VudERvd25M\nYXRjaCgxKTsKICAgICAgICBzbGVlcEJvb2tpZShib29raWVUb1NsZWVwLCBz\nbGVlcHRpbWUsIGxhdGNoKTsKICAgICAgICBsYXRjaC5hd2FpdCgpOwoKICAg\nICAgICB3cml0ZWxoLmFzeW5jQWRkRW50cnkodG1wLmdldEJ5dGVzKCksIAog\nICAgICAgICAgICAgICAgbmV3IEFkZENhbGxiYWNrKCkgewogICAgICAgICAg\nICAgICAgICAgIHB1YmxpYyB2b2lkIGFkZENvbXBsZXRlKGludCByYywgTGVk\nZ2VySGFuZGxlIGxoLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICBsb25nIGVudHJ5SWQsIE9iamVjdCBjdHgpIHsKICAg\nICAgICAgICAgICAgICAgICAgICAgY29tcGxldGVkLnNldCh0cnVlKTsKICAg\nICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCBudWxsKTsK\nICAgICAgICBUaHJlYWQuc2xlZXAoKGJhc2VDbGllbnRDb25mLmdldFJlYWRU\naW1lb3V0KCkqMykqMTAwMCk7CiAgICAgICAgQXNzZXJ0LmFzc2VydFRydWUo\nIldyaXRlIHJlcXVlc3QgZGlkIG5vdCBmaW5pc2giLCBjb21wbGV0ZWQuZ2V0\nKCkpOwoKICAgICAgICBTZXQ8SW5ldFNvY2tldEFkZHJlc3M+IGFmdGVyU2V0\nID0gbmV3IEhhc2hTZXQ8SW5ldFNvY2tldEFkZHJlc3M+KCk7CiAgICAgICAg\nZm9yIChJbmV0U29ja2V0QWRkcmVzcyBhZGRyIDogd3JpdGVsaC5nZXRMZWRn\nZXJNZXRhZGF0YSgpLmdldEVuc2VtYmxlKG51bUVudHJpZXMrMSkpIHsKICAg\nICAgICAgICAgYWZ0ZXJTZXQuYWRkKGFkZHIpOwogICAgICAgIH0KICAgICAg\nICBiZWZvcmVTZXQucmVtb3ZlQWxsKGFmdGVyU2V0KTsKICAgICAgICBBc3Nl\ncnQuYXNzZXJ0VHJ1ZSgiQm9va2llIHNldCBzaG91bGQgbm90IG1hdGNoIiwg\nYmVmb3JlU2V0LnNpemUoKSAhPSAwKTsKICAgIH0KfQo=\n","encoding":"base64"}

