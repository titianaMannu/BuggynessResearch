{"sha":"2dcad980f2da2aa46be1b1ce071f1996f9dfc880","node_id":"MDQ6QmxvYjE1NzU5NTY6MmRjYWQ5ODBmMmRhMmFhNDZiZTFiMWNlMDcxZjE5OTZmOWRmYzg4MA==","size":4603,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/2dcad980f2da2aa46be1b1ce071f1996f9dfc880","content":"LyoKICoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9y\nIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBU\naGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhl\nIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNl\nIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBs\naWFuY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEg\nY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFTSVMsIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQogKiBLSU5ELCBl\naXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZv\nciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Np\nb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGljZW5zZS4KICoK\nICovCgpwYWNrYWdlIG9yZy5hcGFjaGUuYm9va2tlZXBlci5wcm90bzsKCmlt\ncG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIudXRpbC5PcmRlcmVkU2FmZUV4\nZWN1dG9yOwppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmNoYW5uZWwuc29ja2V0\nLm5pby5OaW9DbGllbnRTb2NrZXRDaGFubmVsRmFjdG9yeTsKaW1wb3J0IG9y\nZy5hcGFjaGUuYm9va2tlZXBlci5wcm90by5Cb29ra2VlcGVySW50ZXJuYWxD\nYWxsYmFja3MuR2VuZXJpY0NhbGxiYWNrOwppbXBvcnQgb3JnLmFwYWNoZS5i\nb29ra2VlcGVyLnByb3RvLkJvb2trZWVwZXJJbnRlcm5hbENhbGxiYWNrcy5S\nZWFkRW50cnlDYWxsYmFjazsKaW1wb3J0IG9yZy5qYm9zcy5uZXR0eS5idWZm\nZXIuQ2hhbm5lbEJ1ZmZlcjsKCmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVw\nZXIuY2xpZW50LkJLRXhjZXB0aW9uOwoKaW1wb3J0IG9yZy5hcGFjaGUuYm9v\na2tlZXBlci50ZXN0LkJhc2VUZXN0Q2FzZTsKaW1wb3J0IG9yZy5hcGFjaGUu\nYm9va2tlZXBlci50ZXN0LkJvb2tpZUNsaWVudFRlc3Q7CmltcG9ydCBzdGF0\naWMgb3JnLmp1bml0LkFzc2VydC4qOwppbXBvcnQgb3JnLmp1bml0LlRlc3Q7\nCmltcG9ydCBvcmcuanVuaXQuQmVmb3JlOwppbXBvcnQgb3JnLmp1bml0LkFm\ndGVyOwoKaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LlRpbWVVbml0OwoK\naW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkNvdW50RG93bkxhdGNoOwpp\nbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuYXRvbWljLkF0b21pY0ludGVn\nZXI7CmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5hdG9taWMuQXRvbWlj\nTG9uZzsKaW1wb3J0IGphdmEubmV0LkluZXRTb2NrZXRBZGRyZXNzOwppbXBv\ncnQgamF2YS5uZXQuSW5ldEFkZHJlc3M7CgpwdWJsaWMgY2xhc3MgVGVzdFBy\nb3RvVmVyc2lvbnMgewogICAgcHJpdmF0ZSBCb29raWVDbGllbnRUZXN0IGJh\nc2U7CgogICAgQEJlZm9yZQogICAgcHVibGljIHZvaWQgc2V0dXAoKSB0aHJv\nd3MgRXhjZXB0aW9uIHsKICAgICAgICBiYXNlID0gbmV3IEJvb2tpZUNsaWVu\ndFRlc3QoKTsKICAgICAgICBiYXNlLnNldFVwKCk7CiAgICB9CgogICAgQEFm\ndGVyCiAgICBwdWJsaWMgdm9pZCB0ZWFyZG93bigpIHRocm93cyBFeGNlcHRp\nb24gewogICAgICAgIGJhc2UudGVhckRvd24oKTsKICAgIH0KCiAgICBwcml2\nYXRlIHZvaWQgdGVzdFZlcnNpb24oaW50IHZlcnNpb24sIGludCBleHBlY3Rl\nZHJlc3VsdCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgUGVyQ2hhbm5l\nbEJvb2tpZUNsaWVudCBiYyA9IG5ldyBQZXJDaGFubmVsQm9va2llQ2xpZW50\nKGJhc2UuZXhlY3V0b3IsIGJhc2UuY2hhbm5lbEZhY3RvcnksIAogICAgICAg\nICAgICAgICAgbmV3IEluZXRTb2NrZXRBZGRyZXNzKEluZXRBZGRyZXNzLmdl\ndExvY2FsSG9zdCgpLCBiYXNlLnBvcnQpLCBuZXcgQXRvbWljTG9uZygwKSk7\nCiAgICAgICAgZmluYWwgQXRvbWljSW50ZWdlciBvdXRlcnJjID0gbmV3IEF0\nb21pY0ludGVnZXIoLTEpOwogICAgICAgIGZpbmFsIENvdW50RG93bkxhdGNo\nIGNvbm5lY3RMYXRjaCA9IG5ldyBDb3VudERvd25MYXRjaCgxKTsKICAgICAg\nICBiYy5jb25uZWN0SWZOZWVkZWRBbmREb09wKG5ldyBHZW5lcmljQ2FsbGJh\nY2s8Vm9pZD4oKSB7CiAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBvcGVy\nYXRpb25Db21wbGV0ZShpbnQgcmMsIFZvaWQgcmVzdWx0KSB7CiAgICAgICAg\nICAgICAgICAgICAgb3V0ZXJyYy5zZXQocmMpOwogICAgICAgICAgICAgICAg\nICAgIGNvbm5lY3RMYXRjaC5jb3VudERvd24oKTsKICAgICAgICAgICAgICAg\nIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgY29ubmVjdExhdGNoLmF3YWl0\nKDUsIFRpbWVVbml0LlNFQ09ORFMpOwogICAgICAgIAogICAgICAgIGFzc2Vy\ndEVxdWFscygiY2xpZW50IG5vdCBjb25uZWN0ZWQiLCBCS0V4Y2VwdGlvbi5D\nb2RlLk9LLCBvdXRlcnJjLmdldCgpKTsKICAgICAgICBvdXRlcnJjLnNldCgt\nMTAwMCk7CiAgICAgICAgZmluYWwgQ291bnREb3duTGF0Y2ggcmVhZExhdGNo\nID0gbmV3IENvdW50RG93bkxhdGNoKDEpOwogICAgICAgIFJlYWRFbnRyeUNh\nbGxiYWNrIGNiID0gbmV3IFJlYWRFbnRyeUNhbGxiYWNrKCkgewogICAgICAg\nICAgICAgICAgcHVibGljIHZvaWQgcmVhZEVudHJ5Q29tcGxldGUoaW50IHJj\nLCBsb25nIGxlZGdlcklkLCBsb25nIGVudHJ5SWQsIENoYW5uZWxCdWZmZXIg\nYnVmZmVyLCBPYmplY3QgY3R4KSB7CiAgICAgICAgICAgICAgICAgICAgb3V0\nZXJyYy5zZXQocmMpOwogICAgICAgICAgICAgICAgICAgIHJlYWRMYXRjaC5j\nb3VudERvd24oKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsK\nICAgICAgICBiYy5yZWFkQ29tcGxldGlvbnMucHV0KGJjLm5ld0NvbXBsZXRp\nb25LZXkoMSwgMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBu\nZXcgUGVyQ2hhbm5lbEJvb2tpZUNsaWVudC5SZWFkQ29tcGxldGlvbihjYiwg\ndGhpcykpOwogICAgICAgIAogICAgICAgIGludCB0b3RhbEhlYWRlclNpemUg\nPSA0IC8vIGZvciB0aGUgbGVuZ3RoIG9mIHRoZSBwYWNrZXQKICAgICAgICAg\nICAgKyA0IC8vIGZvciByZXF1ZXN0IHR5cGUKICAgICAgICAgICAgKyA4IC8v\nIGZvciBsZWRnZXJJZAogICAgICAgICAgICArIDg7IC8vIGZvciBlbnRyeUlk\nCgogICAgICAgIC8vIFRoaXMgd2lsbCBuZWVkIHRvIHVwZGF0ZWQgaWYgdGhl\nIHByb3RvY29sIGZvciByZWFkIGNoYW5nZXMKICAgICAgICBDaGFubmVsQnVm\nZmVyIHRtcEVudHJ5ID0gYmMuY2hhbm5lbC5nZXRDb25maWcoKS5nZXRCdWZm\nZXJGYWN0b3J5KCkuZ2V0QnVmZmVyKHRvdGFsSGVhZGVyU2l6ZSk7CiAgICAg\nICAgdG1wRW50cnkud3JpdGVJbnQodG90YWxIZWFkZXJTaXplIC0gNCk7CiAg\nICAgICAgdG1wRW50cnkud3JpdGVJbnQobmV3IEJvb2tpZVByb3RvY29sLlBh\nY2tldEhlYWRlcigoYnl0ZSl2ZXJzaW9uLCBCb29raWVQcm90b2NvbC5SRUFE\nRU5UUlksIChzaG9ydCkwKS50b0ludCgpKTsKICAgICAgICB0bXBFbnRyeS53\ncml0ZUxvbmcoMSk7CiAgICAgICAgdG1wRW50cnkud3JpdGVMb25nKDEpOwog\nICAgICAgIAogICAgICAgIAogICAgICAgIGJjLmNoYW5uZWwud3JpdGUodG1w\nRW50cnkpLmF3YWl0VW5pbnRlcnJ1cHRpYmx5KCk7CiAgICAgICAgcmVhZExh\ndGNoLmF3YWl0KDUsIFRpbWVVbml0LlNFQ09ORFMpOwogICAgICAgIGFzc2Vy\ndEVxdWFscygiRXhwZWN0ZWQgcmVzdWx0IGRpZmZlcnMiLCBleHBlY3RlZHJl\nc3VsdCwgb3V0ZXJyYy5nZXQoKSk7CiAgICAgICAgCiAgICAgICAgYmMuY2xv\nc2UoKTsKICAgIH0KCiAgICBAVGVzdAogICAgcHVibGljIHZvaWQgdGVzdFZl\ncnNpb25zKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgdGVzdFZlcnNp\nb24oQm9va2llUHJvdG9jb2wuTE9XRVNUX0NPTVBBVF9QUk9UT0NPTF9WRVJT\nSU9OLTEsIEJLRXhjZXB0aW9uLkNvZGUuUHJvdG9jb2xWZXJzaW9uRXhjZXB0\naW9uKTsKICAgICAgICB0ZXN0VmVyc2lvbihCb29raWVQcm90b2NvbC5MT1dF\nU1RfQ09NUEFUX1BST1RPQ09MX1ZFUlNJT04sIEJLRXhjZXB0aW9uLkNvZGUu\nTm9TdWNoRW50cnlFeGNlcHRpb24pOwogICAgICAgIHRlc3RWZXJzaW9uKEJv\nb2tpZVByb3RvY29sLkNVUlJFTlRfUFJPVE9DT0xfVkVSU0lPTiwgQktFeGNl\ncHRpb24uQ29kZS5Ob1N1Y2hFbnRyeUV4Y2VwdGlvbik7CiAgICAgICAgdGVz\ndFZlcnNpb24oQm9va2llUHJvdG9jb2wuQ1VSUkVOVF9QUk9UT0NPTF9WRVJT\nSU9OKzEsIEJLRXhjZXB0aW9uLkNvZGUuUHJvdG9jb2xWZXJzaW9uRXhjZXB0\naW9uKTsKICAgIH0KfQ==\n","encoding":"base64"}

