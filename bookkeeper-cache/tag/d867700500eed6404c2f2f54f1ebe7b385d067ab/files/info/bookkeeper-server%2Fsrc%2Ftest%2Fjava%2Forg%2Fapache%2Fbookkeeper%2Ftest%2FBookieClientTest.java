{"sha":"773d7698b28b8884a4ef3d9d433127b5d42cc411","node_id":"MDQ6QmxvYjE1NzU5NTY6NzczZDc2OThiMjhiODg4NGE0ZWYzZDlkNDMzMTI3YjVkNDJjYzQxMQ==","size":8872,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/773d7698b28b8884a4ef3d9d433127b5d42cc411","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIudGVzdDsKCi8qCiAqCiAq\nIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAo\nQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNl\nIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRpc3RyaWJ1\ndGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9u\nCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBs\naWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUg\nTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIpOyB5b3Ug\nbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlCiAq\nIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2Yg\ndGhlIExpY2Vuc2UgYXQKICoKICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcv\nbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5\nIGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAogKiBz\nb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0\ncmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJB\nTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVyIGV4\ncHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlCiAq\nIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQg\nbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqCiAqLwoKaW1w\nb3J0IGphdmEuaW8uRmlsZTsKaW1wb3J0IGphdmEubmV0LkluZXRTb2NrZXRB\nZGRyZXNzOwppbXBvcnQgamF2YS5uaW8uQnl0ZUJ1ZmZlcjsKaW1wb3J0IGph\ndmEudXRpbC5BcnJheXM7CmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5F\neGVjdXRvcnM7CgppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmJ1ZmZlci5DaGFu\nbmVsQnVmZmVyOwppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmJ1ZmZlci5DaGFu\nbmVsQnVmZmVyczsKaW1wb3J0IG9yZy5qYm9zcy5uZXR0eS5jaGFubmVsLnNv\nY2tldC5DbGllbnRTb2NrZXRDaGFubmVsRmFjdG9yeTsKaW1wb3J0IG9yZy5q\nYm9zcy5uZXR0eS5jaGFubmVsLnNvY2tldC5uaW8uTmlvQ2xpZW50U29ja2V0\nQ2hhbm5lbEZhY3Rvcnk7CmltcG9ydCBvcmcuanVuaXQuVGVzdDsKaW1wb3J0\nIG9yZy5hcGFjaGUuYm9va2tlZXBlci5jb25mLkNsaWVudENvbmZpZ3VyYXRp\nb247CmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVwZXIuY29uZi5TZXJ2ZXJD\nb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5ib29ra2VlcGVyLmNs\naWVudC5CS0V4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBl\nci5wcm90by5Cb29raWVDbGllbnQ7CmltcG9ydCBvcmcuYXBhY2hlLmJvb2tr\nZWVwZXIucHJvdG8uQm9va2llUHJvdG9jb2w7CmltcG9ydCBvcmcuYXBhY2hl\nLmJvb2trZWVwZXIucHJvdG8uQm9va2llU2VydmVyOwppbXBvcnQgb3JnLmFw\nYWNoZS5ib29ra2VlcGVyLnByb3RvLkJvb2trZWVwZXJJbnRlcm5hbENhbGxi\nYWNrcy5SZWFkRW50cnlDYWxsYmFjazsKaW1wb3J0IG9yZy5hcGFjaGUuYm9v\na2tlZXBlci5wcm90by5Cb29ra2VlcGVySW50ZXJuYWxDYWxsYmFja3MuV3Jp\ndGVDYWxsYmFjazsKaW1wb3J0IG9yZy5hcGFjaGUuYm9va2tlZXBlci51dGls\nLk9yZGVyZWRTYWZlRXhlY3V0b3I7CmltcG9ydCBvcmcuc2xmNGouTG9nZ2Vy\nOwppbXBvcnQgb3JnLnNsZjRqLkxvZ2dlckZhY3Rvcnk7CgppbXBvcnQganVu\naXQuZnJhbWV3b3JrLlRlc3RDYXNlOwoKcHVibGljIGNsYXNzIEJvb2tpZUNs\naWVudFRlc3QgZXh0ZW5kcyBUZXN0Q2FzZSB7CiAgICBzdGF0aWMgTG9nZ2Vy\nIExPRyA9IExvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKEJvb2tpZUNsaWVudFRl\nc3QuY2xhc3MpOwogICAgQm9va2llU2VydmVyIGJzOwogICAgRmlsZSB0bXBE\naXI7CiAgICBwdWJsaWMgaW50IHBvcnQgPSAxMzY0NTsKICAgIHB1YmxpYyBD\nbGllbnRTb2NrZXRDaGFubmVsRmFjdG9yeSBjaGFubmVsRmFjdG9yeTsKICAg\nIHB1YmxpYyBPcmRlcmVkU2FmZUV4ZWN1dG9yIGV4ZWN1dG9yOwogICAgU2Vy\ndmVyQ29uZmlndXJhdGlvbiBjb25mID0gbmV3IFNlcnZlckNvbmZpZ3VyYXRp\nb24oKTsKCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkg\ndGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgdG1wRGlyID0gRmlsZS5jcmVh\ndGVUZW1wRmlsZSgiYm9va2llIiwgInRlc3QiKTsKICAgICAgICB0bXBEaXIu\nZGVsZXRlKCk7CiAgICAgICAgdG1wRGlyLm1rZGlyKCk7CgogICAgICAgIC8v\nIFNpbmNlIHRoaXMgdGVzdCBkb2VzIG5vdCByZWx5IG9uIHRoZSBCb29rS2Vl\ncGVyIGNsaWVudCBuZWVkaW5nIHRvCiAgICAgICAgLy8ga25vdyB2aWEgWm9v\nS2VlcGVyIHdoaWNoIEJvb2tpZXMgYXJlIGF2YWlsYWJsZSwgb2theSwgc28g\ncGFzcyBpbiBudWxsCiAgICAgICAgLy8gZm9yIHRoZSB6a1NlcnZlcnMgaW5w\ndXQgcGFyYW1ldGVyIHdoZW4gY29uc3RydWN0aW5nIHRoZSBCb29raWVTZXJ2\nZXIuCiAgICAgICAgU2VydmVyQ29uZmlndXJhdGlvbiBjb25mID0gbmV3IFNl\ncnZlckNvbmZpZ3VyYXRpb24oKTsKICAgICAgICBjb25mLnNldFprU2VydmVy\ncyhudWxsKS5zZXRCb29raWVQb3J0KHBvcnQpCiAgICAgICAgICAgIC5zZXRK\nb3VybmFsRGlyTmFtZSh0bXBEaXIuZ2V0UGF0aCgpKQogICAgICAgICAgICAu\nc2V0TGVkZ2VyRGlyTmFtZXMobmV3IFN0cmluZ1tdIHsgdG1wRGlyLmdldFBh\ndGgoKSB9KTsKICAgICAgICBicyA9IG5ldyBCb29raWVTZXJ2ZXIoY29uZik7\nCiAgICAgICAgYnMuc3RhcnQoKTsKICAgICAgICBjaGFubmVsRmFjdG9yeSA9\nIG5ldyBOaW9DbGllbnRTb2NrZXRDaGFubmVsRmFjdG9yeShFeGVjdXRvcnMu\nbmV3Q2FjaGVkVGhyZWFkUG9vbCgpLCBFeGVjdXRvcnMKICAgICAgICAgICAg\nICAgIC5uZXdDYWNoZWRUaHJlYWRQb29sKCkpOwogICAgICAgIGV4ZWN1dG9y\nID0gbmV3IE9yZGVyZWRTYWZlRXhlY3V0b3IoMik7CiAgICB9CgogICAgQE92\nZXJyaWRlCiAgICBwdWJsaWMgdm9pZCB0ZWFyRG93bigpIHRocm93cyBFeGNl\ncHRpb24gewogICAgICAgIGJzLnNodXRkb3duKCk7CiAgICAgICAgcmVjdXJz\naXZlRGVsZXRlKHRtcERpcik7CiAgICAgICAgY2hhbm5lbEZhY3RvcnkucmVs\nZWFzZUV4dGVybmFsUmVzb3VyY2VzKCk7CiAgICAgICAgZXhlY3V0b3Iuc2h1\ndGRvd24oKTsKICAgIH0KCiAgICBwcml2YXRlIHN0YXRpYyB2b2lkIHJlY3Vy\nc2l2ZURlbGV0ZShGaWxlIGRpcikgewogICAgICAgIEZpbGUgY2hpbGRyZW5b\nXSA9IGRpci5saXN0RmlsZXMoKTsKICAgICAgICBpZiAoY2hpbGRyZW4gIT0g\nbnVsbCkgewogICAgICAgICAgICBmb3IgKEZpbGUgY2hpbGQgOiBjaGlsZHJl\nbikgewogICAgICAgICAgICAgICAgcmVjdXJzaXZlRGVsZXRlKGNoaWxkKTsK\nICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBkaXIuZGVsZXRlKCk7\nCiAgICB9CgogICAgc3RhdGljIGNsYXNzIFJlc3VsdFN0cnVjdCB7CiAgICAg\nICAgaW50IHJjOwogICAgICAgIEJ5dGVCdWZmZXIgZW50cnk7CiAgICB9Cgog\nICAgUmVhZEVudHJ5Q2FsbGJhY2sgcmVjYiA9IG5ldyBSZWFkRW50cnlDYWxs\nYmFjaygpIHsKCiAgICAgICAgcHVibGljIHZvaWQgcmVhZEVudHJ5Q29tcGxl\ndGUoaW50IHJjLCBsb25nIGxlZGdlcklkLCBsb25nIGVudHJ5SWQsIENoYW5u\nZWxCdWZmZXIgYmIsIE9iamVjdCBjdHgpIHsKICAgICAgICAgICAgUmVzdWx0\nU3RydWN0IHJzID0gKFJlc3VsdFN0cnVjdCkgY3R4OwogICAgICAgICAgICBz\neW5jaHJvbml6ZWQgKHJzKSB7CiAgICAgICAgICAgICAgICBycy5yYyA9IHJj\nOwogICAgICAgICAgICAgICAgaWYgKGJiICE9IG51bGwpIHsKICAgICAgICAg\nICAgICAgICAgICBiYi5yZWFkZXJJbmRleCgxNik7CiAgICAgICAgICAgICAg\nICAgICAgcnMuZW50cnkgPSBiYi50b0J5dGVCdWZmZXIoKTsKICAgICAgICAg\nICAgICAgICAgICBycy5ub3RpZnlBbGwoKTsKICAgICAgICAgICAgICAgIH0K\nICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICB9OwoKICAgIFdyaXRlQ2Fs\nbGJhY2sgd3JjYiA9IG5ldyBXcml0ZUNhbGxiYWNrKCkgewogICAgICAgIHB1\nYmxpYyB2b2lkIHdyaXRlQ29tcGxldGUoaW50IHJjLCBsb25nIGxlZGdlcklk\nLCBsb25nIGVudHJ5SWQsIEluZXRTb2NrZXRBZGRyZXNzIGFkZHIsIE9iamVj\ndCBjdHgpIHsKICAgICAgICAgICAgaWYgKGN0eCAhPSBudWxsKSB7CiAgICAg\nICAgICAgICAgICBzeW5jaHJvbml6ZWQgKGN0eCkgewogICAgICAgICAgICAg\nICAgICAgIGN0eC5ub3RpZnlBbGwoKTsKICAgICAgICAgICAgICAgIH0KICAg\nICAgICAgICAgfQogICAgICAgIH0KICAgIH07CgogICAgQFRlc3QKICAgIHB1\nYmxpYyB2b2lkIHRlc3RXcml0ZUdhcHMoKSB0aHJvd3MgRXhjZXB0aW9uIHsK\nICAgICAgICBmaW5hbCBPYmplY3Qgbm90aWZ5T2JqZWN0ID0gbmV3IE9iamVj\ndCgpOwogICAgICAgIGJ5dGVbXSBwYXNzd2QgPSBuZXcgYnl0ZVsyMF07CiAg\nICAgICAgQXJyYXlzLmZpbGwocGFzc3dkLCAoYnl0ZSkgJ2EnKTsKICAgICAg\nICBJbmV0U29ja2V0QWRkcmVzcyBhZGRyID0gbmV3IEluZXRTb2NrZXRBZGRy\nZXNzKCIxMjcuMC4wLjEiLCBwb3J0KTsKICAgICAgICBSZXN1bHRTdHJ1Y3Qg\nYXJjID0gbmV3IFJlc3VsdFN0cnVjdCgpOwoKICAgICAgICBCb29raWVDbGll\nbnQgYmMgPSBuZXcgQm9va2llQ2xpZW50KG5ldyBDbGllbnRDb25maWd1cmF0\naW9uKCksIGNoYW5uZWxGYWN0b3J5LCBleGVjdXRvcik7CiAgICAgICAgQ2hh\nbm5lbEJ1ZmZlciBiYjsKICAgICAgICBiYiA9IGNyZWF0ZUJ5dGVCdWZmZXIo\nMSwgMSwgMSk7CiAgICAgICAgYmMuYWRkRW50cnkoYWRkciwgMSwgcGFzc3dk\nLCAxLCBiYiwgd3JjYiwgYXJjLCBCb29raWVQcm90b2NvbC5GTEFHX05PTkUp\nOwogICAgICAgIHN5bmNocm9uaXplZCAoYXJjKSB7CiAgICAgICAgICAgIGFy\nYy53YWl0KDEwMDApOwogICAgICAgICAgICBiYy5yZWFkRW50cnkoYWRkciwg\nMSwgMSwgcmVjYiwgYXJjKTsKICAgICAgICAgICAgYXJjLndhaXQoMTAwMCk7\nCiAgICAgICAgICAgIGFzc2VydEVxdWFscygwLCBhcmMucmMpOwogICAgICAg\nICAgICBhc3NlcnRFcXVhbHMoMSwgYXJjLmVudHJ5LmdldEludCgpKTsKICAg\nICAgICB9CiAgICAgICAgYmIgPSBjcmVhdGVCeXRlQnVmZmVyKDIsIDEsIDIp\nOwogICAgICAgIGJjLmFkZEVudHJ5KGFkZHIsIDEsIHBhc3N3ZCwgMiwgYmIs\nIHdyY2IsIG51bGwsIEJvb2tpZVByb3RvY29sLkZMQUdfTk9ORSk7CiAgICAg\nICAgYmIgPSBjcmVhdGVCeXRlQnVmZmVyKDMsIDEsIDMpOwogICAgICAgIGJj\nLmFkZEVudHJ5KGFkZHIsIDEsIHBhc3N3ZCwgMywgYmIsIHdyY2IsIG51bGws\nIEJvb2tpZVByb3RvY29sLkZMQUdfTk9ORSk7CiAgICAgICAgYmIgPSBjcmVh\ndGVCeXRlQnVmZmVyKDUsIDEsIDUpOwogICAgICAgIGJjLmFkZEVudHJ5KGFk\nZHIsIDEsIHBhc3N3ZCwgNSwgYmIsIHdyY2IsIG51bGwsIEJvb2tpZVByb3Rv\nY29sLkZMQUdfTk9ORSk7CiAgICAgICAgYmIgPSBjcmVhdGVCeXRlQnVmZmVy\nKDcsIDEsIDcpOwogICAgICAgIGJjLmFkZEVudHJ5KGFkZHIsIDEsIHBhc3N3\nZCwgNywgYmIsIHdyY2IsIG51bGwsIEJvb2tpZVByb3RvY29sLkZMQUdfTk9O\nRSk7CiAgICAgICAgc3luY2hyb25pemVkIChub3RpZnlPYmplY3QpIHsKICAg\nICAgICAgICAgYmIgPSBjcmVhdGVCeXRlQnVmZmVyKDExLCAxLCAxMSk7CiAg\nICAgICAgICAgIGJjLmFkZEVudHJ5KGFkZHIsIDEsIHBhc3N3ZCwgMTEsIGJi\nLCB3cmNiLCBub3RpZnlPYmplY3QsIEJvb2tpZVByb3RvY29sLkZMQUdfTk9O\nRSk7CiAgICAgICAgICAgIG5vdGlmeU9iamVjdC53YWl0KCk7CiAgICAgICAg\nfQogICAgICAgIHN5bmNocm9uaXplZCAoYXJjKSB7CiAgICAgICAgICAgIGJj\nLnJlYWRFbnRyeShhZGRyLCAxLCA2LCByZWNiLCBhcmMpOwogICAgICAgICAg\nICBhcmMud2FpdCgxMDAwKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKEJL\nRXhjZXB0aW9uLkNvZGUuTm9TdWNoRW50cnlFeGNlcHRpb24sIGFyYy5yYyk7\nCiAgICAgICAgfQogICAgICAgIHN5bmNocm9uaXplZCAoYXJjKSB7CiAgICAg\nICAgICAgIGJjLnJlYWRFbnRyeShhZGRyLCAxLCA3LCByZWNiLCBhcmMpOwog\nICAgICAgICAgICBhcmMud2FpdCgxMDAwKTsKICAgICAgICAgICAgYXNzZXJ0\nRXF1YWxzKDAsIGFyYy5yYyk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscyg3\nLCBhcmMuZW50cnkuZ2V0SW50KCkpOwogICAgICAgIH0KICAgICAgICBzeW5j\naHJvbml6ZWQgKGFyYykgewogICAgICAgICAgICBiYy5yZWFkRW50cnkoYWRk\nciwgMSwgMSwgcmVjYiwgYXJjKTsKICAgICAgICAgICAgYXJjLndhaXQoMTAw\nMCk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscygwLCBhcmMucmMpOwogICAg\nICAgICAgICBhc3NlcnRFcXVhbHMoMSwgYXJjLmVudHJ5LmdldEludCgpKTsK\nICAgICAgICB9CiAgICAgICAgc3luY2hyb25pemVkIChhcmMpIHsKICAgICAg\nICAgICAgYmMucmVhZEVudHJ5KGFkZHIsIDEsIDIsIHJlY2IsIGFyYyk7CiAg\nICAgICAgICAgIGFyYy53YWl0KDEwMDApOwogICAgICAgICAgICBhc3NlcnRF\ncXVhbHMoMCwgYXJjLnJjKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKDIs\nIGFyYy5lbnRyeS5nZXRJbnQoKSk7CiAgICAgICAgfQogICAgICAgIHN5bmNo\ncm9uaXplZCAoYXJjKSB7CiAgICAgICAgICAgIGJjLnJlYWRFbnRyeShhZGRy\nLCAxLCAzLCByZWNiLCBhcmMpOwogICAgICAgICAgICBhcmMud2FpdCgxMDAw\nKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKDAsIGFyYy5yYyk7CiAgICAg\nICAgICAgIGFzc2VydEVxdWFscygzLCBhcmMuZW50cnkuZ2V0SW50KCkpOwog\nICAgICAgIH0KICAgICAgICBzeW5jaHJvbml6ZWQgKGFyYykgewogICAgICAg\nICAgICBiYy5yZWFkRW50cnkoYWRkciwgMSwgNCwgcmVjYiwgYXJjKTsKICAg\nICAgICAgICAgYXJjLndhaXQoMTAwMCk7CiAgICAgICAgICAgIGFzc2VydEVx\ndWFscyhCS0V4Y2VwdGlvbi5Db2RlLk5vU3VjaEVudHJ5RXhjZXB0aW9uLCBh\ncmMucmMpOwogICAgICAgIH0KICAgICAgICBzeW5jaHJvbml6ZWQgKGFyYykg\newogICAgICAgICAgICBiYy5yZWFkRW50cnkoYWRkciwgMSwgMTEsIHJlY2Is\nIGFyYyk7CiAgICAgICAgICAgIGFyYy53YWl0KDEwMDApOwogICAgICAgICAg\nICBhc3NlcnRFcXVhbHMoMCwgYXJjLnJjKTsKICAgICAgICAgICAgYXNzZXJ0\nRXF1YWxzKDExLCBhcmMuZW50cnkuZ2V0SW50KCkpOwogICAgICAgIH0KICAg\nICAgICBzeW5jaHJvbml6ZWQgKGFyYykgewogICAgICAgICAgICBiYy5yZWFk\nRW50cnkoYWRkciwgMSwgNSwgcmVjYiwgYXJjKTsKICAgICAgICAgICAgYXJj\nLndhaXQoMTAwMCk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscygwLCBhcmMu\ncmMpOwogICAgICAgICAgICBhc3NlcnRFcXVhbHMoNSwgYXJjLmVudHJ5Lmdl\ndEludCgpKTsKICAgICAgICB9CiAgICAgICAgc3luY2hyb25pemVkIChhcmMp\nIHsKICAgICAgICAgICAgYmMucmVhZEVudHJ5KGFkZHIsIDEsIDEwLCByZWNi\nLCBhcmMpOwogICAgICAgICAgICBhcmMud2FpdCgxMDAwKTsKICAgICAgICAg\nICAgYXNzZXJ0RXF1YWxzKEJLRXhjZXB0aW9uLkNvZGUuTm9TdWNoRW50cnlF\neGNlcHRpb24sIGFyYy5yYyk7CiAgICAgICAgfQogICAgICAgIHN5bmNocm9u\naXplZCAoYXJjKSB7CiAgICAgICAgICAgIGJjLnJlYWRFbnRyeShhZGRyLCAx\nLCAxMiwgcmVjYiwgYXJjKTsKICAgICAgICAgICAgYXJjLndhaXQoMTAwMCk7\nCiAgICAgICAgICAgIGFzc2VydEVxdWFscyhCS0V4Y2VwdGlvbi5Db2RlLk5v\nU3VjaEVudHJ5RXhjZXB0aW9uLCBhcmMucmMpOwogICAgICAgIH0KICAgICAg\nICBzeW5jaHJvbml6ZWQgKGFyYykgewogICAgICAgICAgICBiYy5yZWFkRW50\ncnkoYWRkciwgMSwgMTMsIHJlY2IsIGFyYyk7CiAgICAgICAgICAgIGFyYy53\nYWl0KDEwMDApOwogICAgICAgICAgICBhc3NlcnRFcXVhbHMoQktFeGNlcHRp\nb24uQ29kZS5Ob1N1Y2hFbnRyeUV4Y2VwdGlvbiwgYXJjLnJjKTsKICAgICAg\nICB9CiAgICB9CgogICAgcHJpdmF0ZSBDaGFubmVsQnVmZmVyIGNyZWF0ZUJ5\ndGVCdWZmZXIoaW50IGksIGxvbmcgbGlkLCBsb25nIGVpZCkgewogICAgICAg\nIEJ5dGVCdWZmZXIgYmI7CiAgICAgICAgYmIgPSBCeXRlQnVmZmVyLmFsbG9j\nYXRlKDQgKyAxNik7CiAgICAgICAgYmIucHV0TG9uZyhsaWQpOwogICAgICAg\nIGJiLnB1dExvbmcoZWlkKTsKICAgICAgICBiYi5wdXRJbnQoaSk7CiAgICAg\nICAgYmIuZmxpcCgpOwogICAgICAgIHJldHVybiBDaGFubmVsQnVmZmVycy53\ncmFwcGVkQnVmZmVyKGJiKTsKICAgIH0KCiAgICBAVGVzdAogICAgcHVibGlj\nIHZvaWQgdGVzdE5vTGVkZ2VyKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAg\nICAgUmVzdWx0U3RydWN0IGFyYyA9IG5ldyBSZXN1bHRTdHJ1Y3QoKTsKICAg\nICAgICBJbmV0U29ja2V0QWRkcmVzcyBhZGRyID0gbmV3IEluZXRTb2NrZXRB\nZGRyZXNzKCIxMjcuMC4wLjEiLCBwb3J0KTsKICAgICAgICBCb29raWVDbGll\nbnQgYmMgPSBuZXcgQm9va2llQ2xpZW50KG5ldyBDbGllbnRDb25maWd1cmF0\naW9uKCksIGNoYW5uZWxGYWN0b3J5LCBleGVjdXRvcik7CiAgICAgICAgc3lu\nY2hyb25pemVkIChhcmMpIHsKICAgICAgICAgICAgYmMucmVhZEVudHJ5KGFk\nZHIsIDIsIDEzLCByZWNiLCBhcmMpOwogICAgICAgICAgICBhcmMud2FpdCgx\nMDAwKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKEJLRXhjZXB0aW9uLkNv\nZGUuTm9TdWNoRW50cnlFeGNlcHRpb24sIGFyYy5yYyk7CiAgICAgICAgfQog\nICAgfQp9Cg==\n","encoding":"base64"}

