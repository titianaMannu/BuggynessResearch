{"sha":"2d3593ea04da2b5800ed404c1d342ef0aed8e0f0","node_id":"MDQ6QmxvYjE1NzU5NTY6MmQzNTkzZWEwNGRhMmI1ODAwZWQ0MDRjMWQzNDJlZjBhZWQ4ZTBmMA==","size":5827,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/2d3593ea04da2b5800ed404c1d342ef0aed8e0f0","content":"cGFja2FnZSBvcmcuYXBhY2hlLmJvb2trZWVwZXIudGVzdDsKCi8qCiAqCiAq\nIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAo\nQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNl\nIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRpc3RyaWJ1\ndGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9u\nCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBs\naWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUg\nTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIpOyB5b3Ug\nbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlCiAq\nIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2Yg\ndGhlIExpY2Vuc2UgYXQKICoKICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcv\nbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5\nIGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAogKiBz\nb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0\ncmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJB\nTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVyIGV4\ncHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlCiAq\nIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQg\nbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqCiAqLwoKaW1w\nb3J0IGphdmEuaW8uRmlsZTsKCmltcG9ydCBvcmcuYXBhY2hlLmJvb2trZWVw\nZXIuY2xpZW50LkxlZGdlckhhbmRsZTsKaW1wb3J0IG9yZy5hcGFjaGUuYm9v\na2tlZXBlci5jbGllbnQuQm9va0tlZXBlci5EaWdlc3RUeXBlOwppbXBvcnQg\nb3JnLmFwYWNoZS5ib29ra2VlcGVyLnByb3RvLkJvb2tpZVNlcnZlcjsKaW1w\nb3J0IG9yZy5zbGY0ai5Mb2dnZXI7CmltcG9ydCBvcmcuc2xmNGouTG9nZ2Vy\nRmFjdG9yeTsKaW1wb3J0IG9yZy5qdW5pdC5CZWZvcmU7CmltcG9ydCBvcmcu\nanVuaXQuVGVzdDsKCi8qKgogKiBUaGlzIGNsYXNzIHRlc3RzIHRoZSBsZWRn\nZXIgZGVsZXRlIGZ1bmN0aW9uYWxpdHkgYm90aCBmcm9tIHRoZSBCb29rS2Vl\ncGVyCiAqIGNsaWVudCBhbmQgdGhlIHNlcnZlciBzaWRlLgogKi8KcHVibGlj\nIGNsYXNzIExlZGdlckRlbGV0ZVRlc3QgZXh0ZW5kcyBCb29rS2VlcGVyQ2x1\nc3RlclRlc3RDYXNlIHsKICAgIHN0YXRpYyBMb2dnZXIgTE9HID0gTG9nZ2Vy\nRmFjdG9yeS5nZXRMb2dnZXIoTGVkZ2VyRGVsZXRlVGVzdC5jbGFzcyk7CiAg\nICBEaWdlc3RUeXBlIGRpZ2VzdFR5cGU7CgogICAgcHVibGljIExlZGdlckRl\nbGV0ZVRlc3QoKSB7CiAgICAgICAgc3VwZXIoMyk7CiAgICAgICAgdGhpcy5k\naWdlc3RUeXBlID0gRGlnZXN0VHlwZS5DUkMzMjsKICAgIH0KCiAgICBAQmVm\nb3JlCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgdGhy\nb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgLy8gU2V0IHVwIHRoZSBjb25maWd1\ncmF0aW9uIHByb3BlcnRpZXMgbmVlZGVkLgogICAgICAgIGJhc2VDb25mLnNl\ndEVudHJ5TG9nU2l6ZUxpbWl0KDIgKiAxMDI0ICogMTAyNEwpOwogICAgICAg\nIGJhc2VDb25mLnNldEdjV2FpdFRpbWUoMTAwMCk7CiAgICAgICAgc3VwZXIu\nc2V0VXAoKTsKICAgIH0KCiAgICAvKioKICAgICAqIENvbW1vbiBtZXRob2Qg\ndG8gY3JlYXRlIGxlZGdlcnMgYW5kIHdyaXRlIGVudHJpZXMgdG8gdGhlbS4K\nICAgICAqLwogICAgcHJpdmF0ZSBMZWRnZXJIYW5kbGVbXSB3cml0ZUxlZGdl\nckVudHJpZXMoaW50IG51bUxlZGdlcnMsIGludCBtc2dTaXplLCBpbnQgbnVt\nTXNncykgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgLy8gQ3JlYXRlIHRo\nZSBsZWRnZXJzCiAgICAgICAgTGVkZ2VySGFuZGxlW10gbGhzID0gbmV3IExl\nZGdlckhhbmRsZVtudW1MZWRnZXJzXTsKICAgICAgICBmb3IgKGludCBpID0g\nMDsgaSA8IG51bUxlZGdlcnM7IGkrKykgewogICAgICAgICAgICBsaHNbaV0g\nPSBia2MuY3JlYXRlTGVkZ2VyKGRpZ2VzdFR5cGUsICIiLmdldEJ5dGVzKCkp\nOwogICAgICAgIH0KCiAgICAgICAgLy8gQ3JlYXRlIGEgZHVtbXkgbWVzc2Fn\nZSBzdHJpbmcgdG8gd3JpdGUgYXMgbGVkZ2VyIGVudHJpZXMKICAgICAgICBT\ndHJpbmdCdWlsZGVyIG1zZ1NCID0gbmV3IFN0cmluZ0J1aWxkZXIoKTsKICAg\nICAgICBmb3IgKGludCBpID0gMDsgaSA8IG1zZ1NpemU7IGkrKykgewogICAg\nICAgICAgICBtc2dTQi5hcHBlbmQoImEiKTsKICAgICAgICB9CiAgICAgICAg\nU3RyaW5nIG1zZyA9IG1zZ1NCLnRvU3RyaW5nKCk7CgogICAgICAgIC8vIFdy\naXRlIGFsbCBvZiB0aGUgZW50cmllcyBmb3IgYWxsIG9mIHRoZSBsZWRnZXJz\nCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBudW1Nc2dzOyBpKyspIHsK\nICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBudW1MZWRnZXJzOyBq\nKyspIHsKICAgICAgICAgICAgICAgIGxoc1tqXS5hZGRFbnRyeShtc2cuZ2V0\nQnl0ZXMoKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8v\nIFJldHVybiB0aGUgbGVkZ2VyIGhhbmRsZXMgdG8gdGhlIGluc2VydGVkIGxl\nZGdlcnMgYW5kIGVudHJpZXMKICAgICAgICByZXR1cm4gbGhzOwogICAgfQoK\nICAgIC8qKgogICAgICogVGhpcyB0ZXN0IHdyaXRlcyBlbm91Z2ggbGVkZ2Vy\nIGVudHJpZXMgdG8gcm9sbCBvdmVyIHRoZSBlbnRyeSBsb2cgZmlsZS4KICAg\nICAqIEl0IHdpbGwgdGhlbiBkZWxldGUgYWxsIG9mIHRoZSBsZWRnZXJzIGZy\nb20gdGhlIGNsaWVudCBhbmQgbGV0IHRoZQogICAgICogc2VydmVyJ3MgRW50\ncnlMb2dnZXIgZ2FyYmFnZSBjb2xsZWN0b3IgdGhyZWFkIGRlbGV0ZSB0aGUg\naW5pdGlhbCBlbnRyeQogICAgICogbG9nIGZpbGUuCiAgICAgKgogICAgICog\nQHRocm93cyBFeGNlcHRpb24KICAgICAqLwogICAgQFRlc3QKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RMZWRnZXJEZWxldGUoKSB0aHJvd3MgRXhjZXB0aW9uIHsK\nICAgICAgICAvLyBXcml0ZSBlbm91Z2ggbGVkZ2VyIGVudHJpZXMgc28gdGhh\ndCB3ZSByb2xsIG92ZXIgdGhlIGluaXRpYWwgZW50cnlMb2cgKDAubG9nKQog\nICAgICAgIExlZGdlckhhbmRsZVtdIGxocyA9IHdyaXRlTGVkZ2VyRW50cmll\ncygzLCAxMDI0LCAxMDI0KTsKCiAgICAgICAgLy8gRGVsZXRlIGFsbCBvZiB0\naGVzZSBsZWRnZXJzIGZyb20gdGhlIEJvb2tLZWVwZXIgY2xpZW50CiAgICAg\nICAgZm9yIChMZWRnZXJIYW5kbGUgbGggOiBsaHMpIHsKICAgICAgICAgICAg\nYmtjLmRlbGV0ZUxlZGdlcihsaC5nZXRJZCgpKTsKICAgICAgICB9CiAgICAg\nICAgTE9HLmluZm8oIkZpbmlzaGVkIGRlbGV0aW5nIGFsbCBsZWRnZXJzIHNv\nIHdhaXRpbmcgZm9yIHRoZSBHQyB0aHJlYWQgdG8gY2xlYW4gdXAgdGhlIGVu\ndHJ5TG9ncyIpOwogICAgICAgIFRocmVhZC5zbGVlcCgyMDAwKTsKCiAgICAg\nICAgLy8gVmVyaWZ5IHRoYXQgdGhlIGZpcnN0IGVudHJ5IGxvZyAoMC5sb2cp\nIGhhcyBiZWVuIGRlbGV0ZWQgZnJvbSBhbGwgb2YgdGhlIEJvb2tpZSBTZXJ2\nZXJzLgogICAgICAgIGZvciAoRmlsZSBsZWRnZXJEaXJlY3RvcnkgOiB0bXBE\naXJzKSB7CiAgICAgICAgICAgIGZvciAoRmlsZSBmIDogbGVkZ2VyRGlyZWN0\nb3J5Lmxpc3RGaWxlcygpKSB7CiAgICAgICAgICAgICAgICBhc3NlcnRGYWxz\nZSgiRm91bmQgdGhlIGVudHJ5IGxvZyBmaWxlICgwLmxvZykgdGhhdCBzaG91\nbGQgaGF2ZSBiZWVuIGRlbGV0ZWQgaW4gbGVkZ2VyRGlyZWN0b3J5OiAiCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICArIGxlZGdlckRpcmVjdG9yeSwg\nZi5pc0ZpbGUoKSAmJiBmLmdldE5hbWUoKS5lcXVhbHMoIjAubG9nIikpOwog\nICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICog\nVGhpcyB0ZXN0IGlzIHNpbWlsYXIgdG8gdGVzdExlZGdlckRlbGV0ZSgpIGV4\nY2VwdCBpdCB3aWxsIHN0b3AgYW5kCiAgICAgKiByZXN0YXJ0IHRoZSBCb29r\naWUgU2VydmVycyBhZnRlciBpdCBoYXMgd3JpdHRlbiBvdXQgdGhlIGxlZGdl\nciBlbnRyaWVzLgogICAgICogT24gcmVzdGFydCwgdGhlcmUgd2lsbCBiZSBl\neGlzdGluZyBlbnRyeSBsb2dzIGFuZCBsZWRnZXIgaW5kZXggZmlsZXMgZm9y\nCiAgICAgKiB0aGUgRW50cnlMb2dnZXIgYW5kIExlZGdlckNhY2hlIHRvIHJl\nYWQgYW5kIHN0b3JlIGludG8gbWVtb3J5LgogICAgICoKICAgICAqIEB0aHJv\nd3MgRXhjZXB0aW9uCiAgICAgKi8KICAgIEBUZXN0CiAgICBwdWJsaWMgdm9p\nZCB0ZXN0TGVkZ2VyRGVsZXRlV2l0aEV4aXN0aW5nRW50cnlMb2dzKCkgdGhy\nb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgLy8gV3JpdGUgZW5vdWdoIGxlZGdl\nciBlbnRyaWVzIHNvIHRoYXQgd2Ugcm9sbCBvdmVyIHRoZSBpbml0aWFsIGVu\ndHJ5TG9nICgwLmxvZykKICAgICAgICBMZWRnZXJIYW5kbGVbXSBsaHMgPSB3\ncml0ZUxlZGdlckVudHJpZXMoMywgMTAyNCwgMTAyNCk7CgogICAgICAgIC8q\nCiAgICAgICAgICogU2h1dGRvd24gdGhlIEJvb2tpZSBTZXJ2ZXJzIGFuZCBy\nZXN0YXJ0IHRoZW0gdXNpbmcgdGhlIHNhbWUgbGVkZ2VyCiAgICAgICAgICog\nZGlyZWN0b3JpZXMuIFRoaXMgd2lsbCB0ZXN0IHRoZSByZWFkaW5nIG9mIHBy\nZS1leGlzdGluZyBsZWRnZXIgaW5kZXgKICAgICAgICAgKiBmaWxlcyBpbiB0\naGUgTGVkZ2VyQ2FjaGUgZHVyaW5nIHN0YXJ0dXAgb2YgYSBCb29raWUgU2Vy\ndmVyLgogICAgICAgICAqLwogICAgICAgIHJlc3RhcnRCb29raWVzKCk7Cgog\nICAgICAgIC8vIERlbGV0ZSBhbGwgb2YgdGhlc2UgbGVkZ2VycyBmcm9tIHRo\nZSBCb29rS2VlcGVyIGNsaWVudAogICAgICAgIGZvciAoTGVkZ2VySGFuZGxl\nIGxoIDogbGhzKSB7CiAgICAgICAgICAgIGJrYy5kZWxldGVMZWRnZXIobGgu\nZ2V0SWQoKSk7CiAgICAgICAgfQogICAgICAgIExPRy5pbmZvKCJGaW5pc2hl\nZCBkZWxldGluZyBhbGwgbGVkZ2VycyBzbyB3YWl0aW5nIGZvciB0aGUgR0Mg\ndGhyZWFkIHRvIGNsZWFuIHVwIHRoZSBlbnRyeUxvZ3MiKTsKICAgICAgICBU\naHJlYWQuc2xlZXAoMjAwMCk7CgogICAgICAgIC8qCiAgICAgICAgICogVmVy\naWZ5IHRoYXQgdGhlIGZpcnN0IHR3byBlbnRyeSBsb2dzIChbMCwxXS5sb2cp\nIGhhdmUgYmVlbiBkZWxldGVkCiAgICAgICAgICogZnJvbSBhbGwgb2YgdGhl\nIEJvb2tpZSBTZXJ2ZXJzLiBXaGVuIHdlIHJlc3RhcnQgdGhlIHNlcnZlcnMg\naW4gdGhpcwogICAgICAgICAqIHRlc3QsIGEgbmV3IGVudHJ5IGxvZyBpcyBj\ncmVhdGVkLiBXZSBrbm93IHRoZW4gdGhhdCB0aGUgZmlyc3QgdHdvCiAgICAg\nICAgICogZW50cnkgbG9ncyBzaG91bGQgYmUgZGVsZXRlZC4KICAgICAgICAg\nKi8KICAgICAgICBmb3IgKEZpbGUgbGVkZ2VyRGlyZWN0b3J5IDogdG1wRGly\ncykgewogICAgICAgICAgICBmb3IgKEZpbGUgZiA6IGxlZGdlckRpcmVjdG9y\neS5saXN0RmlsZXMoKSkgewogICAgICAgICAgICAgICAgYXNzZXJ0RmFsc2Uo\nIkZvdW5kIHRoZSBlbnRyeSBsb2cgZmlsZSAoWzAsMV0ubG9nKSB0aGF0IHNo\nb3VsZCBoYXZlIGJlZW4gZGVsZXRlZCBpbiBsZWRnZXJEaXJlY3Rvcnk6ICIK\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgbGVkZ2VyRGlyZWN0b3J5\nLCBmLmlzRmlsZSgpICYmIChmLmdldE5hbWUoKS5lcXVhbHMoIjAubG9nIikg\nfHwgZi5nZXROYW1lKCkuZXF1YWxzKCIxLmxvZyIpKSk7CiAgICAgICAgICAg\nIH0KICAgICAgICB9CiAgICB9Cgp9Cg==\n","encoding":"base64"}

