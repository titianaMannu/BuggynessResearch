{"sha":"cc5e93778a041724de8a050276fcc3497f14c21b","node_id":"MDQ6QmxvYjE1NzU5NTY6Y2M1ZTkzNzc4YTA0MTcyNGRlOGEwNTAyNzZmY2MzNDk3ZjE0YzIxYg==","size":6994,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/cc5e93778a041724de8a050276fcc3497f14c21b","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQuYmVuY2htYXJrOwoKaW1w\nb3J0IGphdmEuaW8uRmlsZTsKaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50\nLkNhbGxhYmxlOwoKaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb25maWd1\ncmF0aW9uLkNvbmZpZ3VyYXRpb25FeGNlcHRpb247CmltcG9ydCBvcmcuc2xm\nNGouTG9nZ2VyOwppbXBvcnQgb3JnLnNsZjRqLkxvZ2dlckZhY3Rvcnk7Cmlt\ncG9ydCBvcmcuamJvc3MubmV0dHkubG9nZ2luZy5JbnRlcm5hbExvZ2dlckZh\nY3Rvcnk7CmltcG9ydCBvcmcuamJvc3MubmV0dHkubG9nZ2luZy5Mb2c0Skxv\nZ2dlckZhY3Rvcnk7CgppbXBvcnQgY29tLmdvb2dsZS5wcm90b2J1Zi5CeXRl\nU3RyaW5nOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcudXRpbC5IZWR3aWdT\nb2NrZXRBZGRyZXNzOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuY2xpZW50\nLmNvbmYuQ2xpZW50Q29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUu\naGVkd2lnLmNsaWVudC5IZWR3aWdDbGllbnQ7CmltcG9ydCBvcmcuYXBhY2hl\nLmhlZHdpZy5jbGllbnQuYXBpLlB1Ymxpc2hlcjsKaW1wb3J0IG9yZy5hcGFj\naGUuaGVkd2lnLmNsaWVudC5hcGkuU3Vic2NyaWJlcjsKCmltcG9ydCBvcmcu\nYXBhY2hlLmNvbW1vbnMuY2xpLkhlbHBGb3JtYXR0ZXI7CmltcG9ydCBvcmcu\nYXBhY2hlLmNvbW1vbnMuY2xpLk9wdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUu\nY29tbW9ucy5jbGkuT3B0aW9uczsKaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9u\ncy5jbGkuQ29tbWFuZExpbmU7CmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMu\nY2xpLkNvbW1hbmRMaW5lUGFyc2VyOwppbXBvcnQgb3JnLmFwYWNoZS5jb21t\nb25zLmNsaS5Qb3NpeFBhcnNlcjsKaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9u\ncy5jbGkuUGFyc2VFeGNlcHRpb247CgpwdWJsaWMgY2xhc3MgSGVkd2lnQmVu\nY2htYXJrIGltcGxlbWVudHMgQ2FsbGFibGU8Vm9pZD4gewogICAgcHJvdGVj\ndGVkIHN0YXRpYyBmaW5hbCBMb2dnZXIgbG9nZ2VyID0gTG9nZ2VyRmFjdG9y\neS5nZXRMb2dnZXIoSGVkd2lnQmVuY2htYXJrLmNsYXNzKTsKCiAgICBzdGF0\naWMgZmluYWwgU3RyaW5nIFRPUElDX1BSRUZJWCA9ICJ0b3BpYyI7CgogICAg\ncHJpdmF0ZSBmaW5hbCBIZWR3aWdDbGllbnQgY2xpZW50OwogICAgcHJpdmF0\nZSBmaW5hbCBQdWJsaXNoZXIgcHVibGlzaGVyOwogICAgcHJpdmF0ZSBmaW5h\nbCBTdWJzY3JpYmVyIHN1YnNjcmliZXI7CiAgICBwcml2YXRlIGZpbmFsIENv\nbW1hbmRMaW5lIGNtZDsKCiAgICBwdWJsaWMgSGVkd2lnQmVuY2htYXJrKENs\naWVudENvbmZpZ3VyYXRpb24gY2ZnLCBDb21tYW5kTGluZSBjbWQpIHsKICAg\nICAgICBjbGllbnQgPSBuZXcgSGVkd2lnQ2xpZW50KGNmZyk7CiAgICAgICAg\ncHVibGlzaGVyID0gY2xpZW50LmdldFB1Ymxpc2hlcigpOwogICAgICAgIHN1\nYnNjcmliZXIgPSBjbGllbnQuZ2V0U3Vic2NyaWJlcigpOwogICAgICAgIHRo\naXMuY21kID0gY21kOwogICAgfQoKICAgIHN0YXRpYyBib29sZWFuIGFtSVJl\nc3BvbnNpYmxlRm9yVG9waWMoaW50IHRvcGljTnVtLCBpbnQgcGFydGl0aW9u\nSW5kZXgsIGludCBudW1QYXJ0aXRpb25zKSB7CiAgICAgICAgcmV0dXJuIHRv\ncGljTnVtICUgbnVtUGFydGl0aW9ucyA9PSBwYXJ0aXRpb25JbmRleDsKICAg\nIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBWb2lkIGNhbGwoKSB0aHJv\nd3MgRXhjZXB0aW9uIHsKCiAgICAgICAgLy8KICAgICAgICAvLyBQYXJhbWV0\nZXJzLgogICAgICAgIC8vCgogICAgICAgIC8vIFdoYXQgcHJvZ3JhbSB0byBy\ndW46IHB1Yiwgc3ViIChzdWJzY3JpcHRpb24gYmVuY2htYXJrKSwgcmVjdi4K\nICAgICAgICBmaW5hbCBTdHJpbmcgbW9kZSA9IGNtZC5nZXRPcHRpb25WYWx1\nZSgibW9kZSIsIiIpOwoKICAgICAgICAvLyBOdW1iZXIgb2YgcmVxdWVzdHMg\ndG8gbWFrZSAocHVibGlzaGVzIG9yIHN1YnNjcmliZXMpLgogICAgICAgIGlu\ndCBudW1Ub3BpY3MgPSBJbnRlZ2VyLnZhbHVlT2YoY21kLmdldE9wdGlvblZh\nbHVlKCJuVG9waWNzIiwgIjUwIikpOwogICAgICAgIGludCBudW1NZXNzYWdl\ncyA9IEludGVnZXIudmFsdWVPZihjbWQuZ2V0T3B0aW9uVmFsdWUoIm5Nc2dz\nIiwgIjEwMDAiKSk7CiAgICAgICAgaW50IG51bVJlZ2lvbnMgPSBJbnRlZ2Vy\nLnZhbHVlT2YoY21kLmdldE9wdGlvblZhbHVlKCJuUmVnaW9ucyIsICIxIikp\nOwogICAgICAgIGludCBzdGFydFRvcGljTGFiZWwgPSBJbnRlZ2VyLnZhbHVl\nT2YoY21kLmdldE9wdGlvblZhbHVlKCJzdGFydFRvcGljTGFiZWwiLCAiMCIp\nKTsKICAgICAgICBpbnQgcGFydGl0aW9uSW5kZXggPSBJbnRlZ2VyLnZhbHVl\nT2YoY21kLmdldE9wdGlvblZhbHVlKCJwYXJ0aXRpb25JbmRleCIsICIwIikp\nOwogICAgICAgIGludCBudW1QYXJ0aXRpb25zID0gSW50ZWdlci52YWx1ZU9m\nKGNtZC5nZXRPcHRpb25WYWx1ZSgiblBhcnRpdGlvbnMiLCAiMSIpKTsKCiAg\nICAgICAgaW50IHJlcGxpY2FJbmRleCA9IEludGVnZXIudmFsdWVPZihjbWQu\nZ2V0T3B0aW9uVmFsdWUoInJlcGxpY2FJbmRleCIsICIwIikpOwoKICAgICAg\nICBpbnQgcmF0ZSA9IEludGVnZXIudmFsdWVPZihjbWQuZ2V0T3B0aW9uVmFs\ndWUoInJhdGUiLCAiMCIpKTsKICAgICAgICBpbnQgblBhcmFsbGVsID0gSW50\nZWdlci52YWx1ZU9mKGNtZC5nZXRPcHRpb25WYWx1ZSgibnBhciIsICIxMDAi\nKSk7CiAgICAgICAgaW50IG1zZ1NpemUgPSBJbnRlZ2VyLnZhbHVlT2YoY21k\nLmdldE9wdGlvblZhbHVlKCJtc2dTaXplIiwgIjEwMjQiKSk7CgogICAgICAg\nIC8vIE51bWJlciBvZiB3YXJtdXAgc3Vic2NyaXB0aW9ucyB0byBtYWtlLgog\nICAgICAgIGZpbmFsIGludCBuV2FybXVwcyA9IEludGVnZXIudmFsdWVPZihj\nbWQuZ2V0T3B0aW9uVmFsdWUoIm53YXJtdXBzIiwgIjEwMDAiKSk7CgogICAg\nICAgIGlmIChtb2RlLmVxdWFscygic3ViIikpIHsKICAgICAgICAgICAgQmVu\nY2htYXJrU3Vic2NyaWJlciBiZW5jaG1hcmtTdWIgPSBuZXcgQmVuY2htYXJr\nU3Vic2NyaWJlcihudW1Ub3BpY3MsIDAsIDEsIHN0YXJ0VG9waWNMYWJlbCwg\nMCwgMSwKICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLCBCeXRlU3Ry\naW5nLmNvcHlGcm9tVXRmOCgibXlTdWIiKSk7CgogICAgICAgICAgICBiZW5j\naG1hcmtTdWIud2FybXVwKG5XYXJtdXBzKTsKICAgICAgICAgICAgYmVuY2ht\nYXJrU3ViLmNhbGwoKTsKCiAgICAgICAgfSBlbHNlIGlmIChtb2RlLmVxdWFs\ncygicmVjdiIpKSB7CgogICAgICAgICAgICBCZW5jaG1hcmtTdWJzY3JpYmVy\nIGJlbmNobWFya1N1YiA9IG5ldyBCZW5jaG1hcmtTdWJzY3JpYmVyKG51bVRv\ncGljcywgbnVtTWVzc2FnZXMsIG51bVJlZ2lvbnMsCiAgICAgICAgICAgICAg\nICAgICAgc3RhcnRUb3BpY0xhYmVsLCBwYXJ0aXRpb25JbmRleCwgbnVtUGFy\ndGl0aW9ucywgc3Vic2NyaWJlciwgQnl0ZVN0cmluZy5jb3B5RnJvbVV0Zjgo\nInN1Yi0iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIHJlcGxpY2FJ\nbmRleCkpOwoKICAgICAgICAgICAgYmVuY2htYXJrU3ViLmNhbGwoKTsKCiAg\nICAgICAgfSBlbHNlIGlmIChtb2RlLmVxdWFscygicHViIikpIHsKICAgICAg\nICAgICAgLy8gT2ZmZXJlZCBsb2FkIGluIG1zZ3Mvc2Vjb25kLgogICAgICAg\nICAgICBCZW5jaG1hcmtQdWJsaXNoZXIgYmVuY2htYXJrUHViID0gbmV3IEJl\nbmNobWFya1B1Ymxpc2hlcihudW1Ub3BpY3MsIG51bU1lc3NhZ2VzLCBudW1S\nZWdpb25zLAogICAgICAgICAgICAgICAgICAgIHN0YXJ0VG9waWNMYWJlbCwg\ncGFydGl0aW9uSW5kZXgsIG51bVBhcnRpdGlvbnMsIHB1Ymxpc2hlciwgc3Vi\nc2NyaWJlciwgbXNnU2l6ZSwgblBhcmFsbGVsLCByYXRlKTsKICAgICAgICAg\nICAgYmVuY2htYXJrUHViLndhcm11cChuV2FybXVwcyk7CiAgICAgICAgICAg\nIGJlbmNobWFya1B1Yi5jYWxsKCk7CgogICAgICAgIH0gZWxzZSB7CiAgICAg\nICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oInVua25vd24gbW9kZTogIiAr\nIG1vZGUpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9\nCgogICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykg\ndGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgT3B0aW9ucyBvcHRpb25zID0g\nbmV3IE9wdGlvbnMoKTsKICAgICAgICBvcHRpb25zLmFkZE9wdGlvbigibW9k\nZSIsIHRydWUsICJzdWIsIHJlY3YsIG9yIHB1YiIpOwogICAgICAgIG9wdGlv\nbnMuYWRkT3B0aW9uKCJuVG9waWNzIiwgdHJ1ZSwgIk51bWJlciBvZiB0b3Bp\nY3MsIGRlZmF1bHQgNTAiKTsKICAgICAgICBvcHRpb25zLmFkZE9wdGlvbigi\nbk1zZ3MiLCB0cnVlLCAiTnVtYmVyIG9mIG1lc3NhZ2VzLCBkZWZhdWx0IDEw\nMDAiKTsKICAgICAgICBvcHRpb25zLmFkZE9wdGlvbigiblJlZ2lvbnMiLCB0\ncnVlLCAiTnVtYmVyIG9mIHJlZ3Npb25zLCBkZWZhdWx0IDEiKTsKICAgICAg\nICBvcHRpb25zLmFkZE9wdGlvbigic3RhcnRUb3BpY0xhYmVsIiwgdHJ1ZSwK\nICAgICAgICAgICAgICAgICAgICAgICAgICAiUHJlZml4IG9mIHRvcGljIGxh\nYmVscy4gTXVzdCBiZSBudW1lcmljLiBEZWZhdWx0IDAiKTsKICAgICAgICBv\ncHRpb25zLmFkZE9wdGlvbigicGFydGl0aW9uSW5kZXgiLCB0cnVlLCAiSWYg\ncGFydGl0aW9uaW5nLCB0aGUgcGFydGl0aW9uIGluZGV4IGZvciB0aGlzIGNs\naWVudCIpOwogICAgICAgIG9wdGlvbnMuYWRkT3B0aW9uKCJuUGFydGl0aW9u\ncyIsIHRydWUsICJOdW1iZXIgb2YgcGFydGl0aW9ucywgZGVmYXVsdCAxIik7\nCiAgICAgICAgb3B0aW9ucy5hZGRPcHRpb24oInJlcGxpY2FJbmRleCIsIHRy\ndWUsICJkZWZhdWx0IDAiKTsKICAgICAgICBvcHRpb25zLmFkZE9wdGlvbigi\ncmF0ZSIsIHRydWUsICJkZWZhdWx0IDAiKTsKICAgICAgICBvcHRpb25zLmFk\nZE9wdGlvbigibnBhciIsIHRydWUsICJkZWZhdWx0IDEwMCIpOwogICAgICAg\nIG9wdGlvbnMuYWRkT3B0aW9uKCJtc2dTaXplIiwgdHJ1ZSwgIlNpemUgb2Yg\nbWVzc2FnZXMsIGRlZmF1bHQgMTAyNCIpOwogICAgICAgIG9wdGlvbnMuYWRk\nT3B0aW9uKCJud2FybXVwcyIsIHRydWUsICJOdW1iZXIgb2Ygd2FybXVwIG1l\nc3NhZ2VzLCBkZWZhdWx0IDEwMDAiKTsKICAgICAgICBvcHRpb25zLmFkZE9w\ndGlvbigiZGVmYXVsdEh1YiIsIHRydWUsICJEZWZhdWx0IGhlZHdpZyBodWIg\ndG8gY29ubmVjdCB0bywgZGVmYXVsdCBsb2NhbGhvc3Q6NDA4MCIpOwoKICAg\nICAgICBDb21tYW5kTGluZVBhcnNlciBwYXJzZXIgPSBuZXcgUG9zaXhQYXJz\nZXIoKTsKICAgICAgICBmaW5hbCBDb21tYW5kTGluZSBjbWQgPSBwYXJzZXIu\ncGFyc2Uob3B0aW9ucywgYXJncyk7CgogICAgICAgIGlmIChjbWQuaGFzT3B0\naW9uKCJoZWxwIikpIHsKICAgICAgICAgICAgSGVscEZvcm1hdHRlciBmb3Jt\nYXR0ZXIgPSBuZXcgSGVscEZvcm1hdHRlcigpOwogICAgICAgICAgICBmb3Jt\nYXR0ZXIucHJpbnRIZWxwKCJIZWR3aWdCZW5jaG1hcmsgPG9wdGlvbnM+Iiwg\nb3B0aW9ucyk7CiAgICAgICAgICAgIFN5c3RlbS5leGl0KC0xKTsKICAgICAg\nICB9CgogICAgICAgIENsaWVudENvbmZpZ3VyYXRpb24gY2ZnID0gbmV3IENs\naWVudENvbmZpZ3VyYXRpb24oKSB7CiAgICAgICAgICAgICAgICBwdWJsaWMg\nSGVkd2lnU29ja2V0QWRkcmVzcyBnZXREZWZhdWx0U2VydmVySGVkd2lnU29j\na2V0QWRkcmVzcygpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3\nIEhlZHdpZ1NvY2tldEFkZHJlc3MoY21kLmdldE9wdGlvblZhbHVlKCJkZWZh\ndWx0SHViIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJsb2NhbGhvc3Q6\nNDA4MCIpKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBw\ndWJsaWMgYm9vbGVhbiBpc1NTTEVuYWJsZWQoKSB7CiAgICAgICAgICAgICAg\nICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAg\nICAgICB9OwoKICAgICAgICBJbnRlcm5hbExvZ2dlckZhY3Rvcnkuc2V0RGVm\nYXVsdEZhY3RvcnkobmV3IExvZzRKTG9nZ2VyRmFjdG9yeSgpKTsKCiAgICAg\nICAgSGVkd2lnQmVuY2htYXJrIGFwcCA9IG5ldyBIZWR3aWdCZW5jaG1hcmso\nY2ZnLCBjbWQpOwogICAgICAgIGFwcC5jYWxsKCk7CiAgICAgICAgU3lzdGVt\nLmV4aXQoMCk7CiAgICB9Cgp9Cg==\n","encoding":"base64"}

