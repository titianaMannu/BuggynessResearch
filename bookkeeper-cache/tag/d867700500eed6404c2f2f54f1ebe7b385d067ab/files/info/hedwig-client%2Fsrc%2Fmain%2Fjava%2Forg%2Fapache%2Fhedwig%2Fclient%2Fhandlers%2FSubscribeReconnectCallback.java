{"sha":"6c79feebd80db01efe365cac9c736dc256299ecb","node_id":"MDQ6QmxvYjE1NzU5NTY6NmM3OWZlZWJkODBkYjAxZWZlMzY1Y2FjOWM3MzZkYzI1NjI5OWVjYg==","size":5000,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/6c79feebd80db01efe365cac9c736dc256299ecb","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQuaGFuZGxlcnM7CgppbXBv\ncnQgamF2YS51dGlsLlRpbWVyVGFzazsKCmltcG9ydCBvcmcuc2xmNGouTG9n\nZ2VyOwppbXBvcnQgb3JnLnNsZjRqLkxvZ2dlckZhY3Rvcnk7CgppbXBvcnQg\nb3JnLmFwYWNoZS5oZWR3aWcuY2xpZW50LmFwaS5NZXNzYWdlSGFuZGxlcjsK\naW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmNsaWVudC5jb25mLkNsaWVudENv\nbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQu\nZGF0YS5QdWJTdWJEYXRhOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuY2xp\nZW50LmV4Y2VwdGlvbnMuQWxyZWFkeVN0YXJ0RGVsaXZlcnlFeGNlcHRpb247\nCmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQubmV0dHkuSGVkd2ln\nQ2xpZW50SW1wbDsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmNsaWVudC5u\nZXR0eS5IZWR3aWdTdWJzY3JpYmVyOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3\naWcuZXhjZXB0aW9ucy5QdWJTdWJFeGNlcHRpb247CgppbXBvcnQgb3JnLmFw\nYWNoZS5oZWR3aWcuZXhjZXB0aW9ucy5QdWJTdWJFeGNlcHRpb24uQ2xpZW50\nTm90U3Vic2NyaWJlZEV4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVk\nd2lnLnV0aWwuQ2FsbGJhY2s7CgovKioKICogVGhpcyBjbGFzcyBpcyB1c2Vk\nIHdoZW4gYSBTdWJzY3JpYmUgY2hhbm5lbCBnZXRzIGRpc2Nvbm5lY3RlZCBh\nbmQgd2UgYXR0ZW1wdAogKiB0byByZS1lc3RhYmxpc2ggdGhlIGNvbm5lY3Rp\nb24uIE9uY2UgdGhlIGNvbm5lY3Rpb24gdG8gdGhlIHNlcnZlciBob3N0IGZv\ncgogKiB0aGUgdG9waWMgaXMgY29tcGxldGVkLCB3ZSBuZWVkIHRvIHJlc3Rh\ncnQgZGVsaXZlcnkgZm9yIHRoYXQgdG9waWMgaWYgdGhhdAogKiB3YXMgdGhl\nIGNhc2UgYmVmb3JlIHRoZSBvcmlnaW5hbCBjaGFubmVsIGdvdCBkaXNjb25u\nZWN0ZWQuIFRoaXMgYXN5bmMKICogY2FsbGJhY2sgd2lsbCBiZSB0aGUgaG9v\nayBmb3IgdGhpcy4KICoKICovCnB1YmxpYyBjbGFzcyBTdWJzY3JpYmVSZWNv\nbm5lY3RDYWxsYmFjayBpbXBsZW1lbnRzIENhbGxiYWNrPFZvaWQ+IHsKCiAg\nICBwcml2YXRlIHN0YXRpYyBMb2dnZXIgbG9nZ2VyID0gTG9nZ2VyRmFjdG9y\neS5nZXRMb2dnZXIoU3Vic2NyaWJlUmVjb25uZWN0Q2FsbGJhY2suY2xhc3Mp\nOwoKICAgIC8vIFByaXZhdGUgbWVtYmVyIHZhcmlhYmxlcwogICAgcHJpdmF0\nZSBmaW5hbCBQdWJTdWJEYXRhIG9yaWdTdWJEYXRhOwogICAgcHJpdmF0ZSBm\naW5hbCBIZWR3aWdDbGllbnRJbXBsIGNsaWVudDsKICAgIHByaXZhdGUgZmlu\nYWwgSGVkd2lnU3Vic2NyaWJlciBzdWI7CiAgICBwcml2YXRlIGZpbmFsIENs\naWVudENvbmZpZ3VyYXRpb24gY2ZnOwoKICAgIC8vIENvbnN0cnVjdG9yCiAg\nICBwdWJsaWMgU3Vic2NyaWJlUmVjb25uZWN0Q2FsbGJhY2soUHViU3ViRGF0\nYSBvcmlnU3ViRGF0YSwgSGVkd2lnQ2xpZW50SW1wbCBjbGllbnQpIHsKICAg\nICAgICB0aGlzLm9yaWdTdWJEYXRhID0gb3JpZ1N1YkRhdGE7CiAgICAgICAg\ndGhpcy5jbGllbnQgPSBjbGllbnQ7CiAgICAgICAgdGhpcy5zdWIgPSBjbGll\nbnQuZ2V0U3Vic2NyaWJlcigpOwogICAgICAgIHRoaXMuY2ZnID0gY2xpZW50\nLmdldENvbmZpZ3VyYXRpb24oKTsKICAgIH0KCiAgICBjbGFzcyBTdWJzY3Jp\nYmVSZWNvbm5lY3RSZXRyeVRhc2sgZXh0ZW5kcyBUaW1lclRhc2sgewogICAg\nICAgIEBPdmVycmlkZQogICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsKICAg\nICAgICAgICAgaWYgKGxvZ2dlci5pc0RlYnVnRW5hYmxlZCgpKQogICAgICAg\nICAgICAgICAgbG9nZ2VyLmRlYnVnKCJSZXRyeWluZyBzdWJzY3JpYmUgcmVj\nb25uZWN0IHJlcXVlc3QgZm9yIG9yaWdTdWJEYXRhOiAiICsgb3JpZ1N1YkRh\ndGEpOwogICAgICAgICAgICAvLyBDbGVhciBvdXQgYWxsIG9mIHRoZSBzZXJ2\nZXJzIHdlJ3ZlIGNvbnRhY3RlZCBvciBhdHRlbXB0ZWQgdG8gZnJvbQogICAg\nICAgICAgICAvLyB0aGlzIHJlcXVlc3QuCiAgICAgICAgICAgIG9yaWdTdWJE\nYXRhLmNsZWFyU2VydmVyc0xpc3QoKTsKICAgICAgICAgICAgY2xpZW50LmRv\nQ29ubmVjdChvcmlnU3ViRGF0YSwgY2ZnLmdldERlZmF1bHRTZXJ2ZXJIb3N0\nKCkpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCBvcGVyYXRp\nb25GaW5pc2hlZChPYmplY3QgY3R4LCBWb2lkIHJlc3VsdE9mT3BlcmF0aW9u\nKSB7CiAgICAgICAgaWYgKGxvZ2dlci5pc0RlYnVnRW5hYmxlZCgpKQogICAg\nICAgICAgICBsb2dnZXIuZGVidWcoIlN1YnNjcmliZSByZWNvbm5lY3Qgc3Vj\nY2VlZGVkIGZvciBvcmlnU3ViRGF0YTogIiArIG9yaWdTdWJEYXRhKTsKICAg\nICAgICAvLyBOb3cgd2Ugd2FudCB0byByZXN0YXJ0IGRlbGl2ZXJ5IGZvciB0\naGUgc3Vic2NyaXB0aW9uIGNoYW5uZWwgb25seQogICAgICAgIC8vIGlmIGRl\nbGl2ZXJ5IHdhcyBzdGFydGVkIGF0IHRoZSB0aW1lIHRoZSBvcmlnaW5hbCBz\ndWJzY3JpYmUgY2hhbm5lbAogICAgICAgIC8vIHdhcyBkaXNjb25uZWN0ZWQu\nCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgc3ViLnJlc3RhcnREZWxpdmVy\neShvcmlnU3ViRGF0YS50b3BpYywgb3JpZ1N1YkRhdGEuc3Vic2NyaWJlcklk\nKTsKICAgICAgICB9IGNhdGNoIChDbGllbnROb3RTdWJzY3JpYmVkRXhjZXB0\naW9uIGUpIHsKICAgICAgICAgICAgLy8gVGhpcyBleGNlcHRpb24gc2hvdWxk\nIG5ldmVyIGJlIHRocm93biBoZXJlIGJ1dCBqdXN0IGluIGNhc2UsCiAgICAg\nICAgICAgIC8vIGxvZyBhbiBlcnJvciBhbmQganVzdCBrZWVwIHJldHJ5aW5n\nIHRoZSBzdWJzY3JpYmUgcmVxdWVzdC4KICAgICAgICAgICAgbG9nZ2VyLmVy\ncm9yKCJTdWJzY3JpYmUgd2FzIHN1Y2Nlc3NmdWwgYnV0IGVycm9yIHN0YXJ0\naW5nIGRlbGl2ZXJ5IGZvciB0b3BpYzogIgogICAgICAgICAgICAgICAgICAg\nICAgICAgKyBvcmlnU3ViRGF0YS50b3BpYy50b1N0cmluZ1V0ZjgoKSArICIs\nIHN1YnNjcmliZXJJZDogIgogICAgICAgICAgICAgICAgICAgICAgICAgKyBv\ncmlnU3ViRGF0YS5zdWJzY3JpYmVySWQudG9TdHJpbmdVdGY4KCksIGUpOwog\nICAgICAgICAgICByZXRyeVN1YnNjcmliZVJlcXVlc3QoKTsKICAgICAgICB9\nIGNhdGNoIChBbHJlYWR5U3RhcnREZWxpdmVyeUV4Y2VwdGlvbiBhc2RlKSB7\nCiAgICAgICAgICAgIC8vIHNob3VsZCBub3QgcmVhY2ggaGVyZQogICAgICAg\nIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCBvcGVyYXRpb25GYWlsZWQoT2Jq\nZWN0IGN0eCwgUHViU3ViRXhjZXB0aW9uIGV4Y2VwdGlvbikgewogICAgICAg\nIC8vIElmIHRoZSBzdWJzY3JpYmUgcmVjb25uZWN0IGZhaWxzLCBqdXN0IGtl\nZXAgcmV0cnlpbmcgdGhlIHN1YnNjcmliZQogICAgICAgIC8vIHJlcXVlc3Qu\nIFRoZXJlIGlzbid0IGEgd2F5IHRvIGZsYWcgdG8gdGhlIGFwcGxpY2F0aW9u\nIGxheWVyIHRoYXQKICAgICAgICAvLyBhIHRvcGljIHN1YnNjcmlwdGlvbiBo\nYXMgZmFpbGVkLiBTbyBpbnN0ZWFkLCB3ZSdsbCBqdXN0IGtlZXAKICAgICAg\nICAvLyByZXRyeWluZyBpbiB0aGUgYmFja2dyb3VuZCB1bnRpbCBzdWNjZXNz\nLgogICAgICAgIGxvZ2dlci5lcnJvcigiU3Vic2NyaWJlIHJlY29ubmVjdCBm\nYWlsZWQgd2l0aCBlcnJvcjogIiArIGV4Y2VwdGlvbi5nZXRNZXNzYWdlKCkp\nOwogICAgICAgIHJldHJ5U3Vic2NyaWJlUmVxdWVzdCgpOwogICAgfQoKICAg\nIHByaXZhdGUgdm9pZCByZXRyeVN1YnNjcmliZVJlcXVlc3QoKSB7CiAgICAg\nICAgLy8gSWYgdGhlIGNsaWVudCBoYXMgc3RvcHBlZCwgdGhlcmUgaXMgbm8g\nbmVlZCB0byBwcm9jZWVkIHdpdGggYW55CiAgICAgICAgLy8gY2FsbGJhY2sg\nbG9naWMgaGVyZS4KICAgICAgICBpZiAoY2xpZW50Lmhhc1N0b3BwZWQoKSkK\nICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICAvLyBSZXRyeSB0aGUgc3Vi\nc2NyaWJlIHJlcXVlc3QgYnV0IG9ubHkgYWZ0ZXIgd2FpdGluZyBmb3IgYQog\nICAgICAgIC8vIHByZWNvbmZpZ3VyZWQgYW1vdW50IG9mIHRpbWUuCiAgICAg\nICAgY2xpZW50LmdldENsaWVudFRpbWVyKCkuc2NoZWR1bGUobmV3IFN1YnNj\ncmliZVJlY29ubmVjdFJldHJ5VGFzaygpLAogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIGNsaWVudC5nZXRDb25maWd1cmF0aW9u\nKCkuZ2V0U3Vic2NyaWJlUmVjb25uZWN0UmV0cnlXYWl0VGltZSgpKTsKICAg\nIH0KfQo=\n","encoding":"base64"}

