{"sha":"db38fa06705052e4e87dc16befeea0ee7a983ef2","node_id":"MDQ6QmxvYjE1NzU5NTY6ZGIzOGZhMDY3MDUwNTJlNGU4N2RjMTZiZWZlZWEwZWU3YTk4M2VmMg==","size":6424,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/db38fa06705052e4e87dc16befeea0ee7a983ef2","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQubmV0dHk7CgppbXBvcnQg\namF2YS5uZXQuSW5ldFNvY2tldEFkZHJlc3M7CmltcG9ydCBqYXZhLnV0aWwu\nTGlua2VkTGlzdDsKCmltcG9ydCBvcmcuc2xmNGouTG9nZ2VyOwppbXBvcnQg\nb3JnLnNsZjRqLkxvZ2dlckZhY3Rvcnk7CmltcG9ydCBvcmcuamJvc3MubmV0\ndHkuY2hhbm5lbC5DaGFubmVsRnV0dXJlOwppbXBvcnQgb3JnLmpib3NzLm5l\ndHR5LmNoYW5uZWwuQ2hhbm5lbEZ1dHVyZUxpc3RlbmVyOwoKaW1wb3J0IGNv\nbS5nb29nbGUucHJvdG9idWYuQnl0ZVN0cmluZzsKaW1wb3J0IG9yZy5hcGFj\naGUuaGVkd2lnLmNsaWVudC5jb25mLkNsaWVudENvbmZpZ3VyYXRpb247Cmlt\ncG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQuZGF0YS5QdWJTdWJEYXRh\nOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuZXhjZXB0aW9ucy5QdWJTdWJF\neGNlcHRpb24uQ291bGROb3RDb25uZWN0RXhjZXB0aW9uOwppbXBvcnQgb3Jn\nLmFwYWNoZS5oZWR3aWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2wuT3BlcmF0\naW9uVHlwZTsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnV0aWwuSGVkd2ln\nU29ja2V0QWRkcmVzczsKCnB1YmxpYyBjbGFzcyBDb25uZWN0Q2FsbGJhY2sg\naW1wbGVtZW50cyBDaGFubmVsRnV0dXJlTGlzdGVuZXIgewoKICAgIHByaXZh\ndGUgc3RhdGljIExvZ2dlciBsb2dnZXIgPSBMb2dnZXJGYWN0b3J5LmdldExv\nZ2dlcihDb25uZWN0Q2FsbGJhY2suY2xhc3MpOwoKICAgIC8vIFByaXZhdGUg\nbWVtYmVyIHZhcmlhYmxlcwogICAgcHJpdmF0ZSBQdWJTdWJEYXRhIHB1YlN1\nYkRhdGE7CiAgICBwcml2YXRlIEluZXRTb2NrZXRBZGRyZXNzIGhvc3Q7CiAg\nICBwcml2YXRlIGZpbmFsIEhlZHdpZ0NsaWVudEltcGwgY2xpZW50OwogICAg\ncHJpdmF0ZSBmaW5hbCBIZWR3aWdQdWJsaXNoZXIgcHViOwogICAgcHJpdmF0\nZSBmaW5hbCBIZWR3aWdTdWJzY3JpYmVyIHN1YjsKICAgIHByaXZhdGUgZmlu\nYWwgQ2xpZW50Q29uZmlndXJhdGlvbiBjZmc7CgogICAgLy8gQ29uc3RydWN0\nb3IKICAgIHB1YmxpYyBDb25uZWN0Q2FsbGJhY2soUHViU3ViRGF0YSBwdWJT\ndWJEYXRhLCBJbmV0U29ja2V0QWRkcmVzcyBob3N0LCBIZWR3aWdDbGllbnRJ\nbXBsIGNsaWVudCkgewogICAgICAgIHN1cGVyKCk7CiAgICAgICAgdGhpcy5w\ndWJTdWJEYXRhID0gcHViU3ViRGF0YTsKICAgICAgICB0aGlzLmhvc3QgPSBo\nb3N0OwogICAgICAgIHRoaXMuY2xpZW50ID0gY2xpZW50OwogICAgICAgIHRo\naXMucHViID0gY2xpZW50LmdldFB1Ymxpc2hlcigpOwogICAgICAgIHRoaXMu\nc3ViID0gY2xpZW50LmdldFN1YnNjcmliZXIoKTsKICAgICAgICB0aGlzLmNm\nZyA9IGNsaWVudC5nZXRDb25maWd1cmF0aW9uKCk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgb3BlcmF0aW9uQ29tcGxldGUoQ2hhbm5lbEZ1dHVyZSBmdXR1\ncmUpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIC8vIElmIHRoZSBjbGll\nbnQgaGFzIHN0b3BwZWQsIHRoZXJlIGlzIG5vIG5lZWQgdG8gcHJvY2VlZCB3\naXRoIGFueQogICAgICAgIC8vIGNhbGxiYWNrIGxvZ2ljIGhlcmUuCiAgICAg\nICAgaWYgKGNsaWVudC5oYXNTdG9wcGVkKCkpIHsKICAgICAgICAgICAgZnV0\ndXJlLmdldENoYW5uZWwoKS5jbG9zZSgpOwogICAgICAgICAgICByZXR1cm47\nCiAgICAgICAgfQoKICAgICAgICAvLyBDaGVjayBpZiB0aGUgY29ubmVjdGlv\nbiB0byB0aGUgc2VydmVyIHdhcyBkb25lIHN1Y2Nlc3NmdWxseS4KICAgICAg\nICBpZiAoIWZ1dHVyZS5pc1N1Y2Nlc3MoKSkgewogICAgICAgICAgICBsb2dn\nZXIuZXJyb3IoIkVycm9yIGNvbm5lY3RpbmcgdG8gaG9zdDogIiArIGhvc3Qp\nOwoKICAgICAgICAgICAgZnV0dXJlLmdldENoYW5uZWwoKS5jbG9zZSgpOwoK\nICAgICAgICAgICAgLy8gSWYgd2Ugd2VyZSBub3QgYWJsZSB0byBjb25uZWN0\nIHRvIHRoZSBob3N0LCBpdCBjb3VsZCBiZSBkb3duLgogICAgICAgICAgICBC\neXRlU3RyaW5nIGhvc3RTdHJpbmcgPSBCeXRlU3RyaW5nLmNvcHlGcm9tVXRm\nOChIZWR3aWdTb2NrZXRBZGRyZXNzLnNvY2tBZGRyU3RyKGhvc3QpKTsKICAg\nICAgICAgICAgaWYgKHB1YlN1YkRhdGEuY29ubmVjdEZhaWxlZFNlcnZlcnMg\nIT0gbnVsbCAmJiBwdWJTdWJEYXRhLmNvbm5lY3RGYWlsZWRTZXJ2ZXJzLmNv\nbnRhaW5zKGhvc3RTdHJpbmcpKSB7CiAgICAgICAgICAgICAgICAvLyBXZSd2\nZSBhbHJlYWR5IHRyaWVkIHRvIGNvbm5lY3QgdG8gdGhpcyBob3N0IGJlZm9y\nZSBzbyBqdXN0CiAgICAgICAgICAgICAgICAvLyBpbnZva2UgdGhlIG9wZXJh\ndGlvbkZhaWxlZCBjYWxsYmFjay4KICAgICAgICAgICAgICAgIGxvZ2dlci5l\ncnJvcigiRXJyb3IgY29ubmVjdGluZyB0byBob3N0IG1vcmUgdGhhbiBvbmNl\nIHNvIGp1c3QgaW52b2tlIHRoZSBvcGVyYXRpb25GYWlsZWQgY2FsbGJhY2sh\nIik7CiAgICAgICAgICAgICAgICBwdWJTdWJEYXRhLmNhbGxiYWNrLm9wZXJh\ndGlvbkZhaWxlZChwdWJTdWJEYXRhLmNvbnRleHQsIG5ldyBDb3VsZE5vdENv\nbm5lY3RFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgIkNvdWxkIG5vdCBjb25uZWN0\nIHRvIGhvc3Q6ICIgKyBob3N0KSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAg\nICAgICAgICAgICAgICBpZiAobG9nZ2VyLmlzRGVidWdFbmFibGVkKCkpCiAg\nICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCJUcnkgdG8gY29ubmVj\ndCB0byBzZXJ2ZXI6ICIgKyBob3N0ICsgIiBhZ2FpbiBmb3IgcHViU3ViRGF0\nYTogIiArIHB1YlN1YkRhdGEpOwogICAgICAgICAgICAgICAgLy8gS2VlcCB0\ncmFjayBvZiB0aGlzIGN1cnJlbnQgc2VydmVyIHRoYXQgd2UgZmFpbGVkIHRv\nIGNvbm5lY3QKICAgICAgICAgICAgICAgIC8vIHRvIGJ1dCByZXRyeSB0aGUg\ncmVxdWVzdCBvbiB0aGUgZGVmYXVsdCBzZXJ2ZXIgaG9zdC9WSVAuCiAgICAg\nICAgICAgICAgICAvLyBUaGUgdG9waWMySG9zdCBtYXBwaW5nIG1pZ2h0IG5l\nZWQgdG8gYmUgdXBkYXRlZC4KICAgICAgICAgICAgICAgIGlmIChwdWJTdWJE\nYXRhLmNvbm5lY3RGYWlsZWRTZXJ2ZXJzID09IG51bGwpCiAgICAgICAgICAg\nICAgICAgICAgcHViU3ViRGF0YS5jb25uZWN0RmFpbGVkU2VydmVycyA9IG5l\ndyBMaW5rZWRMaXN0PEJ5dGVTdHJpbmc+KCk7CiAgICAgICAgICAgICAgICBw\ndWJTdWJEYXRhLmNvbm5lY3RGYWlsZWRTZXJ2ZXJzLmFkZChob3N0U3RyaW5n\nKTsKICAgICAgICAgICAgICAgIGNsaWVudC5kb0Nvbm5lY3QocHViU3ViRGF0\nYSwgY2ZnLmdldERlZmF1bHRTZXJ2ZXJIb3N0KCkpOwogICAgICAgICAgICB9\nCgogICAgICAgICAgICAvLyBGaW5pc2hlZCB3aXRoIGZhaWx1cmUgbG9naWMg\nc28ganVzdCByZXR1cm4uCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9\nCgogICAgICAgIC8vIE5vdyB0aGF0IHdlIGhhdmUgY29ubmVjdGVkIHN1Y2Nl\nc3NmdWxseSB0byB0aGUgc2VydmVyLCBzZWUgd2hhdCB0eXBlCiAgICAgICAg\nLy8gb2YgUHViU3ViIHJlcXVlc3QgdGhpcyB3YXMuCiAgICAgICAgaWYgKGxv\nZ2dlci5pc0RlYnVnRW5hYmxlZCgpKQogICAgICAgICAgICBsb2dnZXIuZGVi\ndWcoIkNvbm5lY3Rpb24gdG8gaG9zdDogIiArIGhvc3QgKyAiIHdhcyBzdWNj\nZXNzZnVsIGZvciBwdWJTdWJEYXRhOiAiICsgcHViU3ViRGF0YSk7CiAgICAg\nICAgaWYgKHB1YlN1YkRhdGEub3BlcmF0aW9uVHlwZS5lcXVhbHMoT3BlcmF0\naW9uVHlwZS5QVUJMSVNIKSkgewogICAgICAgICAgICAvLyBQdWJsaXNoIFJl\ncXVlc3Qgc28gc3RvcmUgdGhpcyBDaGFubmVsIGNvbm5lY3Rpb24gaW4gdGhl\nCiAgICAgICAgICAgIC8vIEhlZHdpZ1B1Ymxpc2hlciBNYXAgKGlmIGl0IGRv\nZXNuJ3QgZXhpc3QgeWV0KSBhbmQgdGhlbgogICAgICAgICAgICAvLyBkbyB0\naGUgcHVibGlzaCBvbiB0aGUgY2FjaGVkIGNoYW5uZWwgbWFwcGVkIHRvIHRo\nZSBob3N0LgogICAgICAgICAgICAvLyBOb3RlIHRoYXQgZHVlIHRvIHJhY2Ug\nY29uY3VycmVuY3kgc2l0dWF0aW9ucywgaXQgaXMKICAgICAgICAgICAgLy8g\ncG9zc2libGUgdGhhdCB0aGUgY2FjaGVkIGNoYW5uZWwgaXMgbm90IHRoZSBz\nYW1lIG9uZQogICAgICAgICAgICAvLyBhcyB0aGUgY2hhbm5lbCBlc3RhYmxp\nc2hlZCBoZXJlLiBJZiB0aGF0IGlzIHRoZSBjYXNlLAogICAgICAgICAgICAv\nLyB0aGlzIGNoYW5uZWwgd2lsbCBiZSBjbG9zZWQgYnV0IHdlJ2xsIGFsd2F5\ncyBwdWJsaXNoIG9uIHRoZQogICAgICAgICAgICAvLyBjYWNoZWQgY2hhbm5l\nbCBpbiB0aGUgSGVkd2lnUHVibGlzaGVyLmhvc3QyQ2hhbm5lbCBtYXAuCiAg\nICAgICAgICAgIHB1Yi5zdG9yZUhvc3QyQ2hhbm5lbE1hcHBpbmcoZnV0dXJl\nLmdldENoYW5uZWwoKSk7CiAgICAgICAgICAgIHB1Yi5kb1B1Ymxpc2gocHVi\nU3ViRGF0YSwgcHViLmhvc3QyQ2hhbm5lbC5nZXQoSGVkd2lnQ2xpZW50SW1w\nbC5nZXRIb3N0RnJvbUNoYW5uZWwoZnV0dXJlLmdldENoYW5uZWwoKSkpKTsK\nICAgICAgICB9IGVsc2UgaWYgKHB1YlN1YkRhdGEub3BlcmF0aW9uVHlwZS5l\ncXVhbHMoT3BlcmF0aW9uVHlwZS5VTlNVQlNDUklCRSkpIHsKICAgICAgICAg\nICAgLy8gVW5zdWJzY3JpYmUgUmVxdWVzdCBzbyBzdG9yZSB0aGlzIENoYW5u\nZWwgY29ubmVjdGlvbiBpbiB0aGUKICAgICAgICAgICAgLy8gSGVkd2lnUHVi\nbGlzaGVyIE1hcCAoaWYgaXQgZG9lc24ndCBleGlzdCB5ZXQpIGFuZCB0aGVu\nIGRvIHRoZQogICAgICAgICAgICAvLyB1bnN1YnNjcmliZS4gVW5zdWJzY3Jp\nYmUgcmVxdWVzdHMgd2lsbCBzaGFyZSBhbmQgcmV1c2UKICAgICAgICAgICAg\nLy8gdGhlIG5ldHR5IENoYW5uZWwgY29ubmVjdGlvbnMgdGhhdCBQdWJsaXNo\nIHJlcXVlc3RzIHVzZS4KICAgICAgICAgICAgcHViLnN0b3JlSG9zdDJDaGFu\nbmVsTWFwcGluZyhmdXR1cmUuZ2V0Q2hhbm5lbCgpKTsKICAgICAgICAgICAg\nc3ViLmRvU3ViVW5zdWIocHViU3ViRGF0YSwgcHViLmhvc3QyQ2hhbm5lbC5n\nZXQoSGVkd2lnQ2xpZW50SW1wbC5nZXRIb3N0RnJvbUNoYW5uZWwoZnV0dXJl\nLmdldENoYW5uZWwoKSkpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAg\nICAvLyBTdWJzY3JpYmUgUmVxdWVzdC4gV2UgZG8gbm90IHN0b3JlIHRoZSBD\naGFubmVsIGNvbm5lY3Rpb24geWV0IGZvcgogICAgICAgICAgICAvLyBTdWJz\nY3JpYmVzIGhlcmUuIFRoaXMgd2lsbCBiZSBkb25lIG9ubHkgd2hlbiB3ZSd2\nZSBmb3VuZCB0aGUKICAgICAgICAgICAgLy8gcmlnaHQgc2VydmVyIHRvcGlj\nIG1hc3Rlci4gVGhhdCBpcyBvbmx5IGRldGVybWluZWQgd2hlbiB3ZQogICAg\nICAgICAgICAvLyByZWNlaXZlIGEgc3VjY2Vzc2Z1bCBzZXJ2ZXIgYWNrIHJl\nc3BvbnNlIHRvIHRoZSBTdWJzY3JpYmUKICAgICAgICAgICAgLy8gcmVxdWVz\ndCAoaGFuZGxlZCBpbiBSZXNwb25zZUhhbmRsZXIpLiBUaGVyZSBpcyBubyBu\nZWVkIHRvIHN0b3JlCiAgICAgICAgICAgIC8vIHRoZSBVbnN1YnNjcmliZSBj\naGFubmVsIGNvbm5lY3Rpb24gYXMgd2Ugd29uJ3QgdXNlIGl0IGFnYWluLgog\nICAgICAgICAgICBzdWIuZG9TdWJVbnN1YihwdWJTdWJEYXRhLCBmdXR1cmUu\nZ2V0Q2hhbm5lbCgpKTsKICAgICAgICB9CiAgICB9Cgp9Cg==\n","encoding":"base64"}

