{"sha":"0b99238b91f0049a41ef7d9d6f12e65393eb2d0d","node_id":"MDQ6QmxvYjE1NzU5NTY6MGI5OTIzOGI5MWYwMDQ5YTQxZWY3ZDlkNmYxMmU2NTM5M2ViMmQwZA==","size":16362,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/0b99238b91f0049a41ef7d9d6f12e65393eb2d0d","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQubmV0dHk7CgppbXBvcnQg\namF2YS5uZXQuSW5ldFNvY2tldEFkZHJlc3M7CmltcG9ydCBqYXZhLnV0aWwu\nTGlua2VkTGlzdDsKaW1wb3J0IGphdmEudXRpbC5MaXN0OwppbXBvcnQgamF2\nYS51dGlsLlRpbWVyOwppbXBvcnQgamF2YS51dGlsLlRpbWVyVGFzazsKaW1w\nb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkNvbmN1cnJlbnRIYXNoTWFwOwpp\nbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuQ29uY3VycmVudE1hcDsKaW1w\nb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkV4ZWN1dG9yczsKaW1wb3J0IGph\ndmEudXRpbC5jb25jdXJyZW50LmF0b21pYy5BdG9taWNMb25nOwoKaW1wb3J0\nIG9yZy5zbGY0ai5Mb2dnZXI7CmltcG9ydCBvcmcuc2xmNGouTG9nZ2VyRmFj\ndG9yeTsKaW1wb3J0IG9yZy5qYm9zcy5uZXR0eS5ib290c3RyYXAuQ2xpZW50\nQm9vdHN0cmFwOwppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmNoYW5uZWwuQ2hh\nbm5lbDsKaW1wb3J0IG9yZy5qYm9zcy5uZXR0eS5jaGFubmVsLkNoYW5uZWxG\nYWN0b3J5OwppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmNoYW5uZWwuQ2hhbm5l\nbEZ1dHVyZTsKaW1wb3J0IG9yZy5qYm9zcy5uZXR0eS5jaGFubmVsLnNvY2tl\ndC5uaW8uTmlvQ2xpZW50U29ja2V0Q2hhbm5lbEZhY3Rvcnk7CgppbXBvcnQg\nY29tLmdvb2dsZS5wcm90b2J1Zi5CeXRlU3RyaW5nOwppbXBvcnQgb3JnLmFw\nYWNoZS5oZWR3aWcuY2xpZW50LmFwaS5DbGllbnQ7CmltcG9ydCBvcmcuYXBh\nY2hlLmhlZHdpZy5jbGllbnQuY29uZi5DbGllbnRDb25maWd1cmF0aW9uOwpp\nbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuY2xpZW50LmRhdGEuUHViU3ViRGF0\nYTsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmNsaWVudC5oYW5kbGVycy5N\nZXNzYWdlQ29uc3VtZUNhbGxiYWNrOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3\naWcuY2xpZW50LnNzbC5Tc2xDbGllbnRDb250ZXh0RmFjdG9yeTsKaW1wb3J0\nIG9yZy5hcGFjaGUuaGVkd2lnLmV4Y2VwdGlvbnMuUHViU3ViRXhjZXB0aW9u\nLlVuY2VydGFpblN0YXRlRXhjZXB0aW9uOwoKLyoqCiAqIFRoaXMgaXMgYSB0\nb3AgbGV2ZWwgSGVkd2lnIENsaWVudCBjbGFzcyB0aGF0IGVuY2Fwc3VsYXRl\ncyB0aGUgY29tbW9uCiAqIGZ1bmN0aW9uYWxpdHkgbmVlZGVkIGZvciBib3Ro\nIFB1Ymxpc2ggYW5kIFN1YnNjcmliZSBvcGVyYXRpb25zLgogKgogKi8KcHVi\nbGljIGNsYXNzIEhlZHdpZ0NsaWVudEltcGwgaW1wbGVtZW50cyBDbGllbnQg\newoKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvZ2dlciBsb2dnZXIgPSBM\nb2dnZXJGYWN0b3J5LmdldExvZ2dlcihIZWR3aWdDbGllbnRJbXBsLmNsYXNz\nKTsKCiAgICAvLyBHbG9iYWwgY291bnRlciB1c2VkIGZvciBnZW5lcmF0aW5n\nIHVuaXF1ZSB0cmFuc2FjdGlvbiBJRCdzIGZvcgogICAgLy8gcHVibGlzaCBh\nbmQgc3Vic2NyaWJlIHJlcXVlc3RzCiAgICBwcm90ZWN0ZWQgZmluYWwgQXRv\nbWljTG9uZyBnbG9iYWxDb3VudGVyID0gbmV3IEF0b21pY0xvbmcoKTsKICAg\nIC8vIFN0YXRpYyBTdHJpbmcgY29uc3RhbnRzCiAgICBwcm90ZWN0ZWQgc3Rh\ndGljIGZpbmFsIFN0cmluZyBDT0xPTiA9ICI6IjsKCiAgICAvLyBUaGUgTmV0\ndHkgc29ja2V0IGZhY3RvcnkgZm9yIG1ha2luZyBjb25uZWN0aW9ucyB0byB0\naGUgc2VydmVyLgogICAgcHJvdGVjdGVkIGZpbmFsIENoYW5uZWxGYWN0b3J5\nIHNvY2tldEZhY3Rvcnk7CiAgICAvLyBXaGV0aGVyIHRoZSBzb2NrZXQgZmFj\ndG9yeSBpcyBvbmUgd2UgY3JlYXRlZCBvciBpcyBvd25lZCBieSB3aG9ldmVy\nCiAgICAvLyBpbnN0YW50aWF0ZWQgdXMuCiAgICBwcm90ZWN0ZWQgYm9vbGVh\nbiBvd25DaGFubmVsRmFjdG9yeSA9IGZhbHNlOwoKICAgIC8vIFBpcGVsaW5l\nRmFjdG9yeSB0byBjcmVhdGUgbmV0dHkgY2xpZW50IGNoYW5uZWxzIHRvIHRo\nZSBhcHByb3ByaWF0ZSBzZXJ2ZXIKICAgIHByaXZhdGUgQ2xpZW50Q2hhbm5l\nbFBpcGVsaW5lRmFjdG9yeSBwaXBlbGluZUZhY3Rvcnk7CgogICAgLy8gQ29u\nY3VycmVudCBNYXAgdG8gc3RvcmUgdGhlIG1hcHBpbmcgZnJvbSB0aGUgVG9w\naWMgdG8gdGhlIEhvc3QuCiAgICAvLyBUaGlzIGNvdWxkIGNoYW5nZSBvdmVy\nIHRpbWUgc2luY2Ugc2VydmVycyBjYW4gZHJvcCBtYXN0ZXJzaGlwIG9mIHRv\ncGljcwogICAgLy8gZm9yIGxvYWQgYmFsYW5jaW5nIG9yIGZhaWxvdmVyLiBJ\nZiBhIHNlcnZlciBob3N0IGV2ZXIgZ29lcyBkb3duLCB3ZSdkCiAgICAvLyBh\nbHNvIHdhbnQgdG8gcmVtb3ZlIGFsbCB0b3BpYyBtYXBwaW5ncyB0aGUgaG9z\ndCB3YXMgcmVzcG9uc2libGUgZm9yLgogICAgLy8gVGhlIHNlY29uZCBNYXAg\naXMgdXNlZCBhcyB0aGUgaW52ZXJ0ZWQgdmVyc2lvbiBvZiB0aGUgZmlyc3Qg\nb25lLgogICAgcHJvdGVjdGVkIGZpbmFsIENvbmN1cnJlbnRNYXA8Qnl0ZVN0\ncmluZywgSW5ldFNvY2tldEFkZHJlc3M+IHRvcGljMkhvc3QgPSBuZXcgQ29u\nY3VycmVudEhhc2hNYXA8Qnl0ZVN0cmluZywgSW5ldFNvY2tldEFkZHJlc3M+\nKCk7CiAgICBwcml2YXRlIGZpbmFsIENvbmN1cnJlbnRNYXA8SW5ldFNvY2tl\ndEFkZHJlc3MsIExpc3Q8Qnl0ZVN0cmluZz4+IGhvc3QyVG9waWNzID0gbmV3\nIENvbmN1cnJlbnRIYXNoTWFwPEluZXRTb2NrZXRBZGRyZXNzLCBMaXN0PEJ5\ndGVTdHJpbmc+PigpOwoKICAgIC8vIEVhY2ggY2xpZW50IGluc3RhbnRpYXRp\nb24gd2lsbCBoYXZlIGEgVGltZXIgZm9yIHJ1bm5pbmcgcmVjdXJyaW5nCiAg\nICAvLyB0aHJlYWRzLiBPbmUgc3VjaCB0aW1lciB0YXNrIHRocmVhZCB0byBp\ncyB0byB0aW1lb3V0IGxvbmcgcnVubmluZwogICAgLy8gUHViU3ViUmVxdWVz\ndHMgdGhhdCBhcmUgd2FpdGluZyBmb3IgYW4gYWNrIHJlc3BvbnNlIGZyb20g\ndGhlIHNlcnZlci4KICAgIHByaXZhdGUgZmluYWwgVGltZXIgY2xpZW50VGlt\nZXIgPSBuZXcgVGltZXIodHJ1ZSk7CgogICAgLy8gQm9vbGVhbiBpbmRpY2F0\naW5nIGlmIHRoZSBjbGllbnQgaXMgcnVubmluZyBvciBoYXMgc3RvcHBlZC4K\nICAgIC8vIE9uY2Ugd2Ugc3RvcCB0aGUgY2xpZW50LCB3ZSBzaG91bGQgc2lk\nZXN0ZXAgYWxsIG9mIHRoZSBjb25uZWN0LAogICAgLy8gd3JpdGUgY2FsbGJh\nY2sgYW5kIGNoYW5uZWwgZGlzY29ubmVjdGVkIGxvZ2ljLgogICAgcHJpdmF0\nZSBib29sZWFuIGlzU3RvcHBlZCA9IGZhbHNlOwoKICAgIHByaXZhdGUgSGVk\nd2lnU3Vic2NyaWJlciBzdWI7CiAgICBwcml2YXRlIGZpbmFsIEhlZHdpZ1B1\nYmxpc2hlciBwdWI7CiAgICBwcml2YXRlIGZpbmFsIENsaWVudENvbmZpZ3Vy\nYXRpb24gY2ZnOwogICAgcHJpdmF0ZSBmaW5hbCBNZXNzYWdlQ29uc3VtZUNh\nbGxiYWNrIGNvbnN1bWVDYjsKICAgIHByaXZhdGUgU3NsQ2xpZW50Q29udGV4\ndEZhY3Rvcnkgc3NsRmFjdG9yeSA9IG51bGw7CgogICAgcHVibGljIHN0YXRp\nYyBDbGllbnQgY3JlYXRlKENsaWVudENvbmZpZ3VyYXRpb24gY2ZnKSB7CiAg\nICAgICAgcmV0dXJuIG5ldyBIZWR3aWdDbGllbnRJbXBsKGNmZyk7CiAgICB9\nCgogICAgcHVibGljIHN0YXRpYyBDbGllbnQgY3JlYXRlKENsaWVudENvbmZp\nZ3VyYXRpb24gY2ZnLCBDaGFubmVsRmFjdG9yeSBzb2NrZXRGYWN0b3J5KSB7\nCiAgICAgICAgcmV0dXJuIG5ldyBIZWR3aWdDbGllbnRJbXBsKGNmZywgc29j\na2V0RmFjdG9yeSk7CiAgICB9CgogICAgLy8gQmFzZSBjb25zdHJ1Y3RvciB0\naGF0IHRha2VzIGluIGEgQ29uZmlndXJhdGlvbiBvYmplY3QuCiAgICAvLyBU\naGlzIHdpbGwgY3JlYXRlIGl0cyBvd24gY2xpZW50IHNvY2tldCBjaGFubmVs\nIGZhY3RvcnkuCiAgICBwcm90ZWN0ZWQgSGVkd2lnQ2xpZW50SW1wbChDbGll\nbnRDb25maWd1cmF0aW9uIGNmZykgewogICAgICAgIHRoaXMoY2ZnLCBuZXcg\nTmlvQ2xpZW50U29ja2V0Q2hhbm5lbEZhY3RvcnkoRXhlY3V0b3JzLm5ld0Nh\nY2hlZFRocmVhZFBvb2woKSwgRXhlY3V0b3JzLm5ld0NhY2hlZFRocmVhZFBv\nb2woKSkpOwogICAgICAgIG93bkNoYW5uZWxGYWN0b3J5ID0gdHJ1ZTsKICAg\nIH0KCiAgICAvLyBDb25zdHJ1Y3RvciB0aGF0IHRha2VzIGluIGEgQ29uZmln\ndXJhdGlvbiBvYmplY3QgYW5kIGEgQ2hhbm5lbEZhY3RvcnkKICAgIC8vIHRo\nYXQgaGFzIGFscmVhZHkgYmVlbiBpbnN0YW50aWF0ZWQgYnkgdGhlIGNhbGxl\nci4KICAgIHByb3RlY3RlZCBIZWR3aWdDbGllbnRJbXBsKENsaWVudENvbmZp\nZ3VyYXRpb24gY2ZnLCBDaGFubmVsRmFjdG9yeSBzb2NrZXRGYWN0b3J5KSB7\nCiAgICAgICAgdGhpcy5jZmcgPSBjZmc7CiAgICAgICAgdGhpcy5zb2NrZXRG\nYWN0b3J5ID0gc29ja2V0RmFjdG9yeTsKICAgICAgICBwdWIgPSBuZXcgSGVk\nd2lnUHVibGlzaGVyKHRoaXMpOwogICAgICAgIHN1YiA9IG5ldyBIZWR3aWdT\ndWJzY3JpYmVyKHRoaXMpOwogICAgICAgIHBpcGVsaW5lRmFjdG9yeSA9IG5l\ndyBDbGllbnRDaGFubmVsUGlwZWxpbmVGYWN0b3J5KHRoaXMpOwogICAgICAg\nIGNvbnN1bWVDYiA9IG5ldyBNZXNzYWdlQ29uc3VtZUNhbGxiYWNrKHRoaXMp\nOwogICAgICAgIGlmIChjZmcuaXNTU0xFbmFibGVkKCkpIHsKICAgICAgICAg\nICAgc3NsRmFjdG9yeSA9IG5ldyBTc2xDbGllbnRDb250ZXh0RmFjdG9yeShj\nZmcpOwogICAgICAgIH0KICAgICAgICAvLyBTY2hlZHVsZSBhbGwgb2YgdGhl\nIGNsaWVudCB0aW1lciB0YXNrcy4gQ3VycmVudGx5IHdlIG9ubHkgaGF2ZSB0\naGUKICAgICAgICAvLyBSZXF1ZXN0IFRpbWVvdXQgdGFzay4KICAgICAgICBj\nbGllbnRUaW1lci5zY2hlZHVsZShuZXcgUHViU3ViUmVxdWVzdFRpbWVvdXRU\nYXNrKCksIDAsIGNmZy5nZXRUaW1lb3V0VGhyZWFkUnVuSW50ZXJ2YWwoKSk7\nCiAgICB9CgogICAgLy8gUHVibGljIGdldHRlcnMgZm9yIHRoZSB2YXJpb3Vz\nIGNvbXBvbmVudHMgb2YgYSBjbGllbnQuCiAgICBwdWJsaWMgQ2xpZW50Q29u\nZmlndXJhdGlvbiBnZXRDb25maWd1cmF0aW9uKCkgewogICAgICAgIHJldHVy\nbiBjZmc7CiAgICB9CgogICAgcHVibGljIEhlZHdpZ1N1YnNjcmliZXIgZ2V0\nU3Vic2NyaWJlcigpIHsKICAgICAgICByZXR1cm4gc3ViOwogICAgfQoKICAg\nIC8vIFByb3RlY3RlZCBtZXRob2QgdG8gc2V0IHRoZSBzdWJzY3JpYmVyLiBU\naGlzIGlzIG5lZWRlZCBjdXJyZW50bHkgZm9yIGh1YgogICAgLy8gdmVyc2lv\nbnMgb2YgdGhlIGNsaWVudCBzdWJzY3JpYmVyLgogICAgcHJvdGVjdGVkIHZv\naWQgc2V0U3Vic2NyaWJlcihIZWR3aWdTdWJzY3JpYmVyIHN1YikgewogICAg\nICAgIHRoaXMuc3ViID0gc3ViOwogICAgfQoKICAgIHB1YmxpYyBIZWR3aWdQ\ndWJsaXNoZXIgZ2V0UHVibGlzaGVyKCkgewogICAgICAgIHJldHVybiBwdWI7\nCiAgICB9CgogICAgcHVibGljIE1lc3NhZ2VDb25zdW1lQ2FsbGJhY2sgZ2V0\nQ29uc3VtZUNhbGxiYWNrKCkgewogICAgICAgIHJldHVybiBjb25zdW1lQ2I7\nCiAgICB9CgogICAgcHVibGljIFNzbENsaWVudENvbnRleHRGYWN0b3J5IGdl\ndFNzbEZhY3RvcnkoKSB7CiAgICAgICAgcmV0dXJuIHNzbEZhY3Rvcnk7CiAg\nICB9CgogICAgLy8gV2UgbmVlZCB0byBkZWFsIHdpdGggdGhlIHBvc3NpYmxl\nIHByb2JsZW0gb2YgYSBQdWJTdWIgcmVxdWVzdCBiZWluZwogICAgLy8gd3Jp\ndHRlbiB0byBzdWNjZXNzZnVsbHkgdG8gdGhlIHNlcnZlciBob3N0IGJ1dCBm\nb3Igc29tZSByZWFzb24sIHRoZQogICAgLy8gYWNrIG1lc3NhZ2UgYmFjayBu\nZXZlciBjb21lcy4gV2hhdCBjb3VsZCBoYXBwZW4gaXMgdGhhdCB0aGUgVm9p\nZENhbGxiYWNrCiAgICAvLyBzdG9yZWQgaW4gdGhlIFJlc3BvbnNlSGFuZGxl\nci50eG4yUHVibGlzaERhdGEgbWFwIHdpbGwgbmV2ZXIgYmUgY2FsbGVkLgog\nICAgLy8gV2Ugc2hvdWxkIGhhdmUgYSBjb25maWd1cmVkIHRpbWVvdXQgc28g\naWYgdGhhdCBwYXNzZXMgZnJvbSB0aGUgdGltZSBhCiAgICAvLyB3cml0ZSB3\nYXMgc3VjY2Vzc2Z1bGx5IGRvbmUgdG8gdGhlIHNlcnZlciwgd2UgY2FuIGZh\naWwgdGhpcyBhc3luYyBQdWJTdWIKICAgIC8vIHRyYW5zYWN0aW9uLiBUaGUg\nY2FsbGVyIGNvdWxkIHBvc3NpYmx5IHJlZG8gdGhlIHRyYW5zYWN0aW9uIGlm\nIG5lZWRlZCBhdAogICAgLy8gYSBsYXRlciB0aW1lLiBDcmVhdGluZyBhIHRp\nbWVvdXQgY2xlYW5lciBUaW1lclRhc2sgdG8gZG8gdGhpcyBoZXJlLgogICAg\nY2xhc3MgUHViU3ViUmVxdWVzdFRpbWVvdXRUYXNrIGV4dGVuZHMgVGltZXJU\nYXNrIHsKICAgICAgICAvKioKICAgICAgICAgKiBJbXBsZW1lbnQgdGhlIFRp\nbWVyVGFzaydzIGFic3RyYWN0IHJ1biBtZXRob2QuCiAgICAgICAgICovCiAg\nICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHVibGljIHZvaWQgcnVuKCkgewog\nICAgICAgICAgICBpZiAobG9nZ2VyLmlzRGVidWdFbmFibGVkKCkpCiAgICAg\nICAgICAgICAgICBsb2dnZXIuZGVidWcoIlJ1bm5pbmcgdGhlIFB1YlN1YlJl\ncXVlc3QgVGltZW91dCBUYXNrIik7CiAgICAgICAgICAgIC8vIExvb3AgdGhy\nb3VnaCBhbGwgb3V0c3RhbmRpbmcgUHViU3ViRGF0YSByZXF1ZXN0cyBhbmQg\nY2hlY2sgaWYKICAgICAgICAgICAgLy8gdGhlIHJlcXVlc3RXcml0ZVRpbWUg\naGFzIHRpbWVkIG91dCBjb21wYXJlZCB0byB0aGUgY3VycmVudCB0aW1lLgog\nICAgICAgICAgICBsb25nIGN1clRpbWUgPSBTeXN0ZW0uY3VycmVudFRpbWVN\naWxsaXMoKTsKICAgICAgICAgICAgbG9uZyB0aW1lb3V0SW50ZXJ2YWwgPSBj\nZmcuZ2V0U2VydmVyQWNrUmVzcG9uc2VUaW1lb3V0KCk7CgogICAgICAgICAg\nICAvLyBGaXJzdCBjaGVjayB0aGUgUmVzcG9uc2VIYW5kbGVycyBhc3NvY2lh\ndGVkIHdpdGggY2FjaGVkCiAgICAgICAgICAgIC8vIGNoYW5uZWxzIGluIEhl\nZHdpZ1B1Ymxpc2hlci5ob3N0MkNoYW5uZWwuIFRoaXMgc3RvcmVzIHRoZQog\nICAgICAgICAgICAvLyBjaGFubmVscyB1c2VkIGZvciBQdWJsaXNoIGFuZCBV\nbnN1YnNjcmliZSByZXF1ZXN0cy4KICAgICAgICAgICAgZm9yIChDaGFubmVs\nIGNoYW5uZWwgOiBwdWIuaG9zdDJDaGFubmVsLnZhbHVlcygpKSB7CiAgICAg\nICAgICAgICAgICBSZXNwb25zZUhhbmRsZXIgcmVzcG9uc2VIYW5kbGVyID0g\nZ2V0UmVzcG9uc2VIYW5kbGVyRnJvbUNoYW5uZWwoY2hhbm5lbCk7CiAgICAg\nICAgICAgICAgICBmb3IgKFB1YlN1YkRhdGEgcHViU3ViRGF0YSA6IHJlc3Bv\nbnNlSGFuZGxlci50eG4yUHViU3ViRGF0YS52YWx1ZXMoKSkgewogICAgICAg\nICAgICAgICAgICAgIGNoZWNrUHViU3ViRGF0YVRvVGltZU91dChwdWJTdWJE\nYXRhLCByZXNwb25zZUhhbmRsZXIsIGN1clRpbWUsIHRpbWVvdXRJbnRlcnZh\nbCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAg\nICAgLy8gTm93IGRvIHRoZSBzYW1lIGZvciB0aGUgY2FjaGVkIGNoYW5uZWxz\nIGluCiAgICAgICAgICAgIC8vIEhlZHdpZ1N1YnNjcmliZXIudG9waWNTdWJz\nY3JpYmVyMkNoYW5uZWwuIFRoaXMgc3RvcmVzIHRoZQogICAgICAgICAgICAv\nLyBjaGFubmVscyB1c2VkIGV4Y2x1c2l2ZWx5IGZvciBTdWJzY3JpYmUgcmVx\ndWVzdHMuCiAgICAgICAgICAgIGZvciAoQ2hhbm5lbCBjaGFubmVsIDogc3Vi\nLnRvcGljU3Vic2NyaWJlcjJDaGFubmVsLnZhbHVlcygpKSB7CiAgICAgICAg\nICAgICAgICBSZXNwb25zZUhhbmRsZXIgcmVzcG9uc2VIYW5kbGVyID0gZ2V0\nUmVzcG9uc2VIYW5kbGVyRnJvbUNoYW5uZWwoY2hhbm5lbCk7CiAgICAgICAg\nICAgICAgICBmb3IgKFB1YlN1YkRhdGEgcHViU3ViRGF0YSA6IHJlc3BvbnNl\nSGFuZGxlci50eG4yUHViU3ViRGF0YS52YWx1ZXMoKSkgewogICAgICAgICAg\nICAgICAgICAgIGNoZWNrUHViU3ViRGF0YVRvVGltZU91dChwdWJTdWJEYXRh\nLCByZXNwb25zZUhhbmRsZXIsIGN1clRpbWUsIHRpbWVvdXRJbnRlcnZhbCk7\nCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9Cgog\nICAgICAgIHByaXZhdGUgdm9pZCBjaGVja1B1YlN1YkRhdGFUb1RpbWVPdXQo\nUHViU3ViRGF0YSBwdWJTdWJEYXRhLCBSZXNwb25zZUhhbmRsZXIgcmVzcG9u\nc2VIYW5kbGVyLCBsb25nIGN1clRpbWUsCiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICBsb25nIHRpbWVvdXRJbnRlcnZh\nbCkgewogICAgICAgICAgICBpZiAoY3VyVGltZSA+IHB1YlN1YkRhdGEucmVx\ndWVzdFdyaXRlVGltZSArIHRpbWVvdXRJbnRlcnZhbCkgewogICAgICAgICAg\nICAgICAgLy8gQ3VycmVudCBQdWJTdWJSZXF1ZXN0IGhhcyB0aW1lZCBvdXQg\nc28gcmVtb3ZlIGl0IGZyb20gdGhlCiAgICAgICAgICAgICAgICAvLyBSZXNw\nb25zZUhhbmRsZXIncyBtYXAgYW5kIGludm9rZSB0aGUgVm9pZENhbGxiYWNr\nJ3MKICAgICAgICAgICAgICAgIC8vIG9wZXJhdGlvbkZhaWxlZCBtZXRob2Qu\nCiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoIkN1cnJlbnQgUHViU3Vi\nUmVxdWVzdCBoYXMgdGltZWQgb3V0IGZvciBwdWJTdWJEYXRhOiAiICsgcHVi\nU3ViRGF0YSk7CiAgICAgICAgICAgICAgICByZXNwb25zZUhhbmRsZXIudHhu\nMlB1YlN1YkRhdGEucmVtb3ZlKHB1YlN1YkRhdGEudHhuSWQpOwogICAgICAg\nICAgICAgICAgcHViU3ViRGF0YS5jYWxsYmFjay5vcGVyYXRpb25GYWlsZWQo\ncHViU3ViRGF0YS5jb250ZXh0LCBuZXcgVW5jZXJ0YWluU3RhdGVFeGNlcHRp\nb24oCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIlNlcnZlciBhY2sgcmVzcG9uc2UgbmV2ZXIgcmVj\nZWl2ZWQgc28gUHViU3ViUmVxdWVzdCBoYXMgdGltZWQgb3V0ISIpKTsKICAg\nICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAvLyBXaGVuIHdlIGFy\nZSBkb25lIHdpdGggdGhlIGNsaWVudCwgdGhpcyBpcyBhIGNsZWFuIHdheSB0\nbyBncmFjZWZ1bGx5IGNsb3NlCiAgICAvLyBhbGwgY2hhbm5lbHMvc29ja2V0\ncyBjcmVhdGVkIGJ5IHRoZSBjbGllbnQgYW5kIHRvIGFsc28gcmVsZWFzZSBh\nbGwKICAgIC8vIHJlc291cmNlcyB1c2VkIGJ5IG5ldHR5LgogICAgcHVibGlj\nIHZvaWQgY2xvc2UoKSB7CiAgICAgICAgbG9nZ2VyLmluZm8oIlN0b3BwaW5n\nIHRoZSBjbGllbnQhIik7CiAgICAgICAgLy8gU2V0IHRoZSBjbGllbnQgYm9v\nbGVhbiBmbGFnIHRvIGluZGljYXRlIHRoZSBjbGllbnQgaGFzIHN0b3BwZWQu\nCiAgICAgICAgaXNTdG9wcGVkID0gdHJ1ZTsKICAgICAgICAvLyBTdG9wIHRo\nZSB0aW1lciBhbmQgYWxsIHRpbWVyIHRhc2sgdGhyZWFkcy4KICAgICAgICBj\nbGllbnRUaW1lci5jYW5jZWwoKTsKCiAgICAgICAgcHViLmNsb3NlKCk7CiAg\nICAgICAgc3ViLmNsb3NlKCk7CgogICAgICAgIC8vIENsZWFyIG91dCBhbGwg\nTWFwcy4KICAgICAgICB0b3BpYzJIb3N0LmNsZWFyKCk7CiAgICAgICAgaG9z\ndDJUb3BpY3MuY2xlYXIoKTsKCiAgICAgICAgLy8gUmVsZWFzZSByZXNvdXJj\nZXMgdXNlZCBieSB0aGUgQ2hhbm5lbEZhY3Rvcnkgb24gdGhlIGNsaWVudCBp\nZiB3ZSBhcmUKICAgICAgICAvLyB0aGUgb3duZXIgdGhhdCBjcmVhdGVkIGl0\nLgogICAgICAgIGlmIChvd25DaGFubmVsRmFjdG9yeSkgewogICAgICAgICAg\nICBzb2NrZXRGYWN0b3J5LnJlbGVhc2VFeHRlcm5hbFJlc291cmNlcygpOwog\nICAgICAgIH0KICAgICAgICBsb2dnZXIuaW5mbygiQ29tcGxldGVkIHN0b3Bw\naW5nIHRoZSBjbGllbnQhIik7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGlz\nIGlzIGEgaGVscGVyIG1ldGhvZCB0byBkbyB0aGUgY29ubmVjdCBhdHRlbXB0\nIHRvIHRoZSBzZXJ2ZXIgZ2l2ZW4gdGhlCiAgICAgKiBpbnB1dHRlZCBob3N0\nL3BvcnQuIFRoaXMgY2FuIGJlIHVzZWQgdG8gY29ubmVjdCB0byB0aGUgZGVm\nYXVsdCBzZXJ2ZXIKICAgICAqIGhvc3QvcG9ydCB3aGljaCBpcyB0aGUgVklQ\nLiBUaGF0IHdpbGwgcGljayBhIHNlcnZlciBpbiB0aGUgY2x1c3RlciBhdAog\nICAgICogcmFuZG9tIHRvIGNvbm5lY3QgdG8gZm9yIHRoZSBpbml0aWFsIFB1\nYlN1YiBhdHRlbXB0ICh3aXRoIHJlZGlyZWN0IGxvZ2ljCiAgICAgKiBiZWlu\nZyBkb25lIGF0IHRoZSBzZXJ2ZXIgc2lkZSkuIEFkZGl0aW9uYWxseSwgdGhp\ncyBjb3VsZCBiZSBjYWxsZWQgYWZ0ZXIKICAgICAqIHRoZSBjbGllbnQgbWFr\nZXMgYW4gaW5pdGlhbCBQdWJTdWIgYXR0ZW1wdCBhdCBhIHNlcnZlciwgYW5k\nIGlzIHJlZGlyZWN0ZWQKICAgICAqIHRvIHRoZSBvbmUgdGhhdCBpcyByZXNw\nb25zaWJsZSBmb3IgdGhlIHRvcGljLiBPbmNlIHRoZSBjb25uZWN0IHRvIHRo\nZQogICAgICogc2VydmVyIGlzIGRvbmUsIHdlIHdpbGwgcGVyZm9ybSB0aGUg\nY29ycmVzcG9uZGluZyBQdWJTdWIgd3JpdGUgb24gdGhhdAogICAgICogY2hh\nbm5lbC4KICAgICAqCiAgICAgKiBAcGFyYW0gcHViU3ViRGF0YQogICAgICog\nICAgICAgICAgICBQdWJTdWIgY2FsbCdzIGRhdGEgd3JhcHBlciBvYmplY3QK\nICAgICAqIEBwYXJhbSBzZXJ2ZXJIb3N0CiAgICAgKiAgICAgICAgICAgIElu\ncHV0IHNlcnZlciBob3N0IHRvIGNvbm5lY3QgdG8gb2YgdHlwZSBJbmV0U29j\na2V0QWRkcmVzcwogICAgICovCiAgICBwdWJsaWMgdm9pZCBkb0Nvbm5lY3Qo\nUHViU3ViRGF0YSBwdWJTdWJEYXRhLCBJbmV0U29ja2V0QWRkcmVzcyBzZXJ2\nZXJIb3N0KSB7CiAgICAgICAgaWYgKGxvZ2dlci5pc0RlYnVnRW5hYmxlZCgp\nKQogICAgICAgICAgICBsb2dnZXIuZGVidWcoIkNvbm5lY3RpbmcgdG8gaG9z\ndDogIiArIHNlcnZlckhvc3QgKyAiIHdpdGggcHViU3ViRGF0YTogIiArIHB1\nYlN1YkRhdGEpOwogICAgICAgIC8vIFNldCB1cCB0aGUgQ2xpZW50Qm9vdFN0\ncmFwIHNvIHdlIGNhbiBjcmVhdGUgYSBuZXcgQ2hhbm5lbCBjb25uZWN0aW9u\nCiAgICAgICAgLy8gdG8gdGhlIHNlcnZlci4KICAgICAgICBDbGllbnRCb290\nc3RyYXAgYm9vdHN0cmFwID0gbmV3IENsaWVudEJvb3RzdHJhcChzb2NrZXRG\nYWN0b3J5KTsKICAgICAgICBib290c3RyYXAuc2V0UGlwZWxpbmVGYWN0b3J5\nKHBpcGVsaW5lRmFjdG9yeSk7CiAgICAgICAgYm9vdHN0cmFwLnNldE9wdGlv\nbigidGNwTm9EZWxheSIsIHRydWUpOwogICAgICAgIGJvb3RzdHJhcC5zZXRP\ncHRpb24oImtlZXBBbGl2ZSIsIHRydWUpOwoKICAgICAgICAvLyBTdGFydCB0\naGUgY29ubmVjdGlvbiBhdHRlbXB0IHRvIHRoZSBpbnB1dCBzZXJ2ZXIgaG9z\ndC4KICAgICAgICBDaGFubmVsRnV0dXJlIGZ1dHVyZSA9IGJvb3RzdHJhcC5j\nb25uZWN0KHNlcnZlckhvc3QpOwogICAgICAgIGZ1dHVyZS5hZGRMaXN0ZW5l\ncihuZXcgQ29ubmVjdENhbGxiYWNrKHB1YlN1YkRhdGEsIHNlcnZlckhvc3Qs\nIHRoaXMpKTsKICAgIH0KCiAgICAvKioKICAgICAqIEhlbHBlciBtZXRob2Qg\ndG8gc3RvcmUgdGhlIHRvcGljMkhvc3QgbWFwcGluZyBpbiB0aGUgSGVkd2ln\nQ2xpZW50IGNhY2hlCiAgICAgKiBtYXAuIFRoaXMgbWV0aG9kIGlzIGFzc3Vt\nZWQgdG8gYmUgY2FsbGVkIHdoZW4gd2UndmUgZG9uZSBhIHN1Y2Nlc3NmdWwK\nICAgICAqIGNvbm5lY3Rpb24gdG8gdGhlIGNvcnJlY3Qgc2VydmVyIHRvcGlj\nIG1hc3Rlci4KICAgICAqCiAgICAgKiBAcGFyYW0gcHViU3ViRGF0YQogICAg\nICogICAgICAgICAgICBQdWJTdWIgd3JhcHBlciBkYXRhCiAgICAgKiBAcGFy\nYW0gY2hhbm5lbAogICAgICogICAgICAgICAgICBOZXR0eSBDaGFubmVsCiAg\nICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIHN0b3JlVG9waWMySG9zdE1hcHBp\nbmcoUHViU3ViRGF0YSBwdWJTdWJEYXRhLCBDaGFubmVsIGNoYW5uZWwpIHsK\nICAgICAgICAvLyBSZXRyaWV2ZSB0aGUgc2VydmVyIGhvc3QgdGhhdCB3ZSd2\nZSBjb25uZWN0ZWQgdG8gYW5kIHN0b3JlIHRoZQogICAgICAgIC8vIG1hcHBp\nbmcgZnJvbSB0aGUgdG9waWMgdG8gdGhpcyBob3N0LiBGb3IgYWxsIG90aGVy\nIG5vbi1yZWRpcmVjdGVkCiAgICAgICAgLy8gc2VydmVyIHN0YXR1c2VzLCB3\nZSBjb25zaWRlciB0aGF0IGFzIGEgc3VjY2Vzc2Z1bCBjb25uZWN0aW9uIHRv\nIHRoZQogICAgICAgIC8vIGNvcnJlY3QgdG9waWMgbWFzdGVyLgogICAgICAg\nIEluZXRTb2NrZXRBZGRyZXNzIGhvc3QgPSBnZXRIb3N0RnJvbUNoYW5uZWwo\nY2hhbm5lbCk7CiAgICAgICAgaWYgKHRvcGljMkhvc3QuY29udGFpbnNLZXko\ncHViU3ViRGF0YS50b3BpYykgJiYgdG9waWMySG9zdC5nZXQocHViU3ViRGF0\nYS50b3BpYykuZXF1YWxzKGhvc3QpKSB7CiAgICAgICAgICAgIC8vIEVudHJ5\nIGluIG1hcCBleGlzdHMgZm9yIHRoZSB0b3BpYyBidXQgaXQgaXMgdGhlIHNh\nbWUgYXMgdGhlCiAgICAgICAgICAgIC8vIGN1cnJlbnQgaG9zdC4gSW4gdGhp\ncyBjYXNlIHRoZXJlIGlzIG5vdGhpbmcgdG8gZG8uCiAgICAgICAgICAgIHJl\ndHVybjsKICAgICAgICB9CgogICAgICAgIC8vIFN0b3JlIHRoZSByZWxldmFu\ndCBtYXBwaW5ncyBmb3IgdGhpcyB0b3BpYyBhbmQgaG9zdCBjb21iaW5hdGlv\nbi4KICAgICAgICBpZiAobG9nZ2VyLmlzRGVidWdFbmFibGVkKCkpCiAgICAg\nICAgICAgIGxvZ2dlci5kZWJ1ZygiU3RvcmluZyBpbmZvIGZvciB0b3BpYzog\nIiArIHB1YlN1YkRhdGEudG9waWMudG9TdHJpbmdVdGY4KCkgKyAiLCBvbGQg\naG9zdDogIgogICAgICAgICAgICAgICAgICAgICAgICAgKyB0b3BpYzJIb3N0\nLmdldChwdWJTdWJEYXRhLnRvcGljKSArICIsIG5ldyBob3N0OiAiICsgaG9z\ndCk7CiAgICAgICAgdG9waWMySG9zdC5wdXQocHViU3ViRGF0YS50b3BpYywg\naG9zdCk7CiAgICAgICAgaWYgKGhvc3QyVG9waWNzLmNvbnRhaW5zS2V5KGhv\nc3QpKSB7CiAgICAgICAgICAgIGhvc3QyVG9waWNzLmdldChob3N0KS5hZGQo\ncHViU3ViRGF0YS50b3BpYyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAg\nICAgTGlua2VkTGlzdDxCeXRlU3RyaW5nPiB0b3BpY3NMaXN0ID0gbmV3IExp\nbmtlZExpc3Q8Qnl0ZVN0cmluZz4oKTsKICAgICAgICAgICAgdG9waWNzTGlz\ndC5hZGQocHViU3ViRGF0YS50b3BpYyk7CiAgICAgICAgICAgIGhvc3QyVG9w\naWNzLnB1dChob3N0LCB0b3BpY3NMaXN0KTsKICAgICAgICB9CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBIZWxwZXIgc3RhdGljIG1ldGhvZCB0byBnZXQgdGhl\nIFN0cmluZyBIb3N0bmFtZTpQb3J0IGZyb20gYSBuZXR0eQogICAgICogQ2hh\nbm5lbC4gQXNzdW1wdGlvbiBpcyB0aGF0IHRoZSBuZXR0eSBDaGFubmVsIHdh\ncyBvcmlnaW5hbGx5IGNyZWF0ZWQgd2l0aAogICAgICogYW4gSW5ldFNvY2tl\ndEFkZHJlc3MuIFRoaXMgaXMgdHJ1ZSB3aXRoIHRoZSBIZWR3aWcgbmV0dHkg\naW1wbGVtZW50YXRpb24uCiAgICAgKgogICAgICogQHBhcmFtIGNoYW5uZWwK\nICAgICAqICAgICAgICAgICAgTmV0dHkgY2hhbm5lbCB0byBleHRyYWN0IHRo\nZSBob3N0bmFtZSBhbmQgcG9ydCBmcm9tLgogICAgICogQHJldHVybiBTdHJp\nbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIEhvc3RuYW1lOlBvcnQgZnJvbSB0\naGUgTmV0dHkgQ2hhbm5lbAogICAgICovCiAgICBwdWJsaWMgc3RhdGljIElu\nZXRTb2NrZXRBZGRyZXNzIGdldEhvc3RGcm9tQ2hhbm5lbChDaGFubmVsIGNo\nYW5uZWwpIHsKICAgICAgICByZXR1cm4gKEluZXRTb2NrZXRBZGRyZXNzKSBj\naGFubmVsLmdldFJlbW90ZUFkZHJlc3MoKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIEhlbHBlciBzdGF0aWMgbWV0aG9kIHRvIGdldCB0aGUgUmVzcG9uc2VI\nYW5kbGVyIGluc3RhbmNlIGZyb20gYSBDaGFubmVsCiAgICAgKiB2aWEgdGhl\nIENoYW5uZWxQaXBlbGluZSBpdCBpcyBhc3NvY2lhdGVkIHdpdGguIFRoZSBh\nc3N1bXB0aW9uIGlzIHRoYXQgdGhlCiAgICAgKiBsYXN0IENoYW5uZWxIYW5k\nbGVyIHRpZWQgdG8gdGhlIENoYW5uZWxQaXBlbGluZSBpcyB0aGUgUmVzcG9u\nc2VIYW5kbGVyLgogICAgICoKICAgICAqIEBwYXJhbSBjaGFubmVsCiAgICAg\nKiAgICAgICAgICAgIENoYW5uZWwgd2UgYXJlIHJldHJpZXZpbmcgdGhlIFJl\nc3BvbnNlSGFuZGxlciBpbnN0YW5jZSBmb3IKICAgICAqIEByZXR1cm4gUmVz\ncG9uc2VIYW5kbGVyIEluc3RhbmNlIHRpZWQgdG8gdGhlIENoYW5uZWwncyBQ\naXBlbGluZQogICAgICovCiAgICBwdWJsaWMgc3RhdGljIFJlc3BvbnNlSGFu\nZGxlciBnZXRSZXNwb25zZUhhbmRsZXJGcm9tQ2hhbm5lbChDaGFubmVsIGNo\nYW5uZWwpIHsKICAgICAgICByZXR1cm4gKFJlc3BvbnNlSGFuZGxlcikgY2hh\nbm5lbC5nZXRQaXBlbGluZSgpLmdldExhc3QoKTsKICAgIH0KCiAgICAvLyBQ\ndWJsaWMgZ2V0dGVyIGZvciBlbnRyaWVzIGluIHRoZSB0b3BpYzJIb3N0IE1h\ncC4KICAgIHB1YmxpYyBJbmV0U29ja2V0QWRkcmVzcyBnZXRIb3N0Rm9yVG9w\naWMoQnl0ZVN0cmluZyB0b3BpYykgewogICAgICAgIHJldHVybiB0b3BpYzJI\nb3N0LmdldCh0b3BpYyk7CiAgICB9CgogICAgLy8gSWYgYSBzZXJ2ZXIgaG9z\ndCBnb2VzIGRvd24gb3IgdGhlIGNoYW5uZWwgdG8gaXQgZ2V0cyBkaXNjb25u\nZWN0ZWQsCiAgICAvLyB3ZSB3YW50IHRvIGNsZWFyIG91dCBhbGwgcmVsZXZh\nbnQgY2FjaGVkIGluZm9ybWF0aW9uLiBXZSdsbAogICAgLy8gbmVlZCB0byBy\nZW1vdmUgYWxsIG9mIHRoZSB0b3BpYyBtYXBwaW5ncyB0aGF0IHRoZSBob3N0\nIHdhcwogICAgLy8gcmVzcG9uc2libGUgZm9yLgogICAgcHVibGljIHZvaWQg\nY2xlYXJBbGxUb3BpY3NGb3JIb3N0KEluZXRTb2NrZXRBZGRyZXNzIGhvc3Qp\nIHsKICAgICAgICBpZiAobG9nZ2VyLmlzRGVidWdFbmFibGVkKCkpCiAgICAg\nICAgICAgIGxvZ2dlci5kZWJ1ZygiQ2xlYXJpbmcgYWxsIHRvcGljcyBmb3Ig\naG9zdDogIiArIGhvc3QpOwogICAgICAgIC8vIEZvciBlYWNoIG9mIHRoZSB0\nb3BpY3MgdGhhdCB0aGUgaG9zdCB3YXMgcmVzcG9uc2libGUgZm9yLAogICAg\nICAgIC8vIHJlbW92ZSBpdCBmcm9tIHRoZSB0b3BpYzJIb3N0IG1hcHBpbmcu\nCiAgICAgICAgaWYgKGhvc3QyVG9waWNzLmNvbnRhaW5zS2V5KGhvc3QpKSB7\nCiAgICAgICAgICAgIGZvciAoQnl0ZVN0cmluZyB0b3BpYyA6IGhvc3QyVG9w\naWNzLmdldChob3N0KSkgewogICAgICAgICAgICAgICAgaWYgKGxvZ2dlci5p\nc0RlYnVnRW5hYmxlZCgpKQogICAgICAgICAgICAgICAgICAgIGxvZ2dlci5k\nZWJ1ZygiUmVtb3ZpbmcgbWFwcGluZyBmb3IgdG9waWM6ICIgKyB0b3BpYy50\nb1N0cmluZ1V0ZjgoKSArICIgZnJvbSBob3N0OiAiICsgaG9zdCk7CiAgICAg\nICAgICAgICAgICB0b3BpYzJIb3N0LnJlbW92ZSh0b3BpYyk7CiAgICAgICAg\nICAgIH0KICAgICAgICAgICAgLy8gTm93IGl0IGlzIHNhZmUgdG8gcmVtb3Zl\nIHRoZSBob3N0MlRvcGljcyBtYXBwaW5nIGVudHJ5LgogICAgICAgICAgICBo\nb3N0MlRvcGljcy5yZW1vdmUoaG9zdCk7CiAgICAgICAgfQogICAgfQoKICAg\nIC8vIFB1YmxpYyBnZXR0ZXIgdG8gc2VlIGlmIHRoZSBjbGllbnQgaGFzIGJl\nZW4gc3RvcHBlZC4KICAgIHB1YmxpYyBib29sZWFuIGhhc1N0b3BwZWQoKSB7\nCiAgICAgICAgcmV0dXJuIGlzU3RvcHBlZDsKICAgIH0KCiAgICAvLyBQdWJs\naWMgZ2V0dGVyIHRvIGdldCB0aGUgY2xpZW50J3MgVGltZXIgb2JqZWN0Lgog\nICAgLy8gVGhpcyBpcyBzbyB3ZSBjYW4gcmV1c2UgdGhpcyBhbmQgbm90IGhh\ndmUgdG8gY3JlYXRlIG11bHRpcGxlIFRpbWVyCiAgICAvLyBvYmplY3RzLgog\nICAgcHVibGljIFRpbWVyIGdldENsaWVudFRpbWVyKCkgewogICAgICAgIHJl\ndHVybiBjbGllbnRUaW1lcjsKICAgIH0KCn0K\n","encoding":"base64"}

