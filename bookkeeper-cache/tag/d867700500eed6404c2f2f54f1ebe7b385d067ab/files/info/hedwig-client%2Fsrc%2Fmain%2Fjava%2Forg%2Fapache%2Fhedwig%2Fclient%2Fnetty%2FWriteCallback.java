{"sha":"515e8f343134683f89807977b603166efd469f6b","node_id":"MDQ6QmxvYjE1NzU5NTY6NTE1ZThmMzQzMTM0NjgzZjg5ODA3OTc3YjYwMzE2NmVmZDQ2OWY2Yg==","size":5051,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/515e8f343134683f89807977b603166efd469f6b","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQubmV0dHk7CgppbXBvcnQg\namF2YS5uZXQuSW5ldFNvY2tldEFkZHJlc3M7CmltcG9ydCBqYXZhLnV0aWwu\nTGlua2VkTGlzdDsKCmltcG9ydCBvcmcuc2xmNGouTG9nZ2VyOwppbXBvcnQg\nb3JnLnNsZjRqLkxvZ2dlckZhY3Rvcnk7CmltcG9ydCBvcmcuamJvc3MubmV0\ndHkuY2hhbm5lbC5DaGFubmVsRnV0dXJlOwppbXBvcnQgb3JnLmpib3NzLm5l\ndHR5LmNoYW5uZWwuQ2hhbm5lbEZ1dHVyZUxpc3RlbmVyOwoKaW1wb3J0IGNv\nbS5nb29nbGUucHJvdG9idWYuQnl0ZVN0cmluZzsKaW1wb3J0IG9yZy5hcGFj\naGUuaGVkd2lnLmNsaWVudC5jb25mLkNsaWVudENvbmZpZ3VyYXRpb247Cmlt\ncG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQuZGF0YS5QdWJTdWJEYXRh\nOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuZXhjZXB0aW9ucy5QdWJTdWJF\neGNlcHRpb24uU2VydmljZURvd25FeGNlcHRpb247CmltcG9ydCBvcmcuYXBh\nY2hlLmhlZHdpZy51dGlsLkhlZHdpZ1NvY2tldEFkZHJlc3M7CgpwdWJsaWMg\nY2xhc3MgV3JpdGVDYWxsYmFjayBpbXBsZW1lbnRzIENoYW5uZWxGdXR1cmVM\naXN0ZW5lciB7CgogICAgcHJpdmF0ZSBzdGF0aWMgTG9nZ2VyIGxvZ2dlciA9\nIExvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKFdyaXRlQ2FsbGJhY2suY2xhc3Mp\nOwoKICAgIC8vIFByaXZhdGUgbWVtYmVyIHZhcmlhYmxlcwogICAgcHJpdmF0\nZSBQdWJTdWJEYXRhIHB1YlN1YkRhdGE7CiAgICBwcml2YXRlIGZpbmFsIEhl\nZHdpZ0NsaWVudEltcGwgY2xpZW50OwogICAgcHJpdmF0ZSBmaW5hbCBDbGll\nbnRDb25maWd1cmF0aW9uIGNmZzsKCiAgICAvLyBDb25zdHJ1Y3RvcgogICAg\ncHVibGljIFdyaXRlQ2FsbGJhY2soUHViU3ViRGF0YSBwdWJTdWJEYXRhLCBI\nZWR3aWdDbGllbnRJbXBsIGNsaWVudCkgewogICAgICAgIHN1cGVyKCk7CiAg\nICAgICAgdGhpcy5wdWJTdWJEYXRhID0gcHViU3ViRGF0YTsKICAgICAgICB0\naGlzLmNsaWVudCA9IGNsaWVudDsKICAgICAgICB0aGlzLmNmZyA9IGNsaWVu\ndC5nZXRDb25maWd1cmF0aW9uKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nb3BlcmF0aW9uQ29tcGxldGUoQ2hhbm5lbEZ1dHVyZSBmdXR1cmUpIHRocm93\ncyBFeGNlcHRpb24gewogICAgICAgIC8vIElmIHRoZSBjbGllbnQgaGFzIHN0\nb3BwZWQsIHRoZXJlIGlzIG5vIG5lZWQgdG8gcHJvY2VlZAogICAgICAgIC8v\nIHdpdGggYW55IGNhbGxiYWNrIGxvZ2ljIGhlcmUuCiAgICAgICAgaWYgKGNs\naWVudC5oYXNTdG9wcGVkKCkpIHsKICAgICAgICAgICAgZnV0dXJlLmdldENo\nYW5uZWwoKS5jbG9zZSgpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAg\nfQoKICAgICAgICAvLyBXaGVuIHRoZSB3cml0ZSBvcGVyYXRpb24gdG8gdGhl\nIHNlcnZlciBpcyBkb25lLCB3ZSBqdXN0IG5lZWQgdG8gY2hlY2sKICAgICAg\nICAvLyBpZiBpdCB3YXMgc3VjY2Vzc2Z1bCBvciBub3QuCiAgICAgICAgSW5l\ndFNvY2tldEFkZHJlc3MgaG9zdCA9IEhlZHdpZ0NsaWVudEltcGwuZ2V0SG9z\ndEZyb21DaGFubmVsKGZ1dHVyZS5nZXRDaGFubmVsKCkpOwogICAgICAgIGlm\nICghZnV0dXJlLmlzU3VjY2VzcygpKSB7CiAgICAgICAgICAgIGxvZ2dlci5l\ncnJvcigiRXJyb3Igd3JpdGluZyBvbiBjaGFubmVsIHRvIGhvc3Q6ICIgKyBo\nb3N0KTsKICAgICAgICAgICAgLy8gT24gYSB3cml0ZSBmYWlsdXJlIGZvciBh\nIFB1YlN1YlJlcXVlc3QsIHdlIGFsc28gd2FudCB0byByZW1vdmUKICAgICAg\nICAgICAgLy8gdGhlIHNhdmVkIHR4bklkIHRvIFB1YlN1YkRhdGEgaW4gdGhl\nIFJlc3BvbnNlSGFuZGxlci4gVGhlc2UKICAgICAgICAgICAgLy8gcmVxdWVz\ndHMgd2lsbCBub3QgcmVjZWl2ZSBhbiBhY2sgcmVzcG9uc2UgZnJvbSB0aGUg\nc2VydmVyCiAgICAgICAgICAgIC8vIHNvIHRoZXJlIGlzIG5vIHBvaW50IHN0\nb3JpbmcgdGhhdCBpbmZvcm1hdGlvbiB0aGVyZSBhbnltb3JlLgogICAgICAg\nICAgICBIZWR3aWdDbGllbnRJbXBsLmdldFJlc3BvbnNlSGFuZGxlckZyb21D\naGFubmVsKGZ1dHVyZS5nZXRDaGFubmVsKCkpLnR4bjJQdWJTdWJEYXRhLnJl\nbW92ZShwdWJTdWJEYXRhLnR4bklkKTsKCiAgICAgICAgICAgIGZ1dHVyZS5n\nZXRDaGFubmVsKCkuY2xvc2UoKTsKCiAgICAgICAgICAgIC8vIElmIHdlIHdl\ncmUgbm90IGFibGUgdG8gd3JpdGUgb24gdGhlIGNoYW5uZWwgdG8gdGhlIHNl\ncnZlciBob3N0LAogICAgICAgICAgICAvLyB0aGUgaG9zdCBjb3VsZCBoYXZl\nIGRpZWQgb3Igc29tZXRoaW5nIGlzIHdyb25nIHdpdGggdGhlIGNoYW5uZWwK\nICAgICAgICAgICAgLy8gY29ubmVjdGlvbiB3aGVyZSB3ZSBjYW4gY29ubmVj\ndCB0byB0aGUgaG9zdCwgYnV0IG5vdCB3cml0ZSB0byBpdC4KICAgICAgICAg\nICAgQnl0ZVN0cmluZyBob3N0U3RyaW5nID0gKGhvc3QgPT0gbnVsbCkgPyBu\ndWxsIDogQnl0ZVN0cmluZy5jb3B5RnJvbVV0ZjgoSGVkd2lnU29ja2V0QWRk\ncmVzcy5zb2NrQWRkclN0cihob3N0KSk7CiAgICAgICAgICAgIGlmIChwdWJT\ndWJEYXRhLndyaXRlRmFpbGVkU2VydmVycyAhPSBudWxsICYmIHB1YlN1YkRh\ndGEud3JpdGVGYWlsZWRTZXJ2ZXJzLmNvbnRhaW5zKGhvc3RTdHJpbmcpKSB7\nCiAgICAgICAgICAgICAgICAvLyBXZSd2ZSBhbHJlYWR5IHRyaWVkIHRvIHdy\naXRlIHRvIHRoaXMgc2VydmVyIHByZXZpb3VzbHkgYW5kCiAgICAgICAgICAg\nICAgICAvLyBmYWlsZWQsIHNvIGludm9rZSB0aGUgb3BlcmF0aW9uRmFpbGVk\nIGNhbGxiYWNrLgogICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCJFcnJv\nciB3cml0aW5nIHRvIGhvc3QgbW9yZSB0aGFuIG9uY2Ugc28ganVzdCBpbnZv\na2UgdGhlIG9wZXJhdGlvbkZhaWxlZCBjYWxsYmFjayEiKTsKICAgICAgICAg\nICAgICAgIHB1YlN1YkRhdGEuY2FsbGJhY2sub3BlcmF0aW9uRmFpbGVkKHB1\nYlN1YkRhdGEuY29udGV4dCwgbmV3IFNlcnZpY2VEb3duRXhjZXB0aW9uKAog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICJFcnJvciB3aGlsZSB3cml0aW5nIG1lc3NhZ2UgdG8gc2Vy\ndmVyOiAiICsgaG9zdFN0cmluZykpOwogICAgICAgICAgICB9IGVsc2Ugewog\nICAgICAgICAgICAgICAgaWYgKGxvZ2dlci5pc0RlYnVnRW5hYmxlZCgpKQog\nICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygiVHJ5IHRvIHNlbmQg\ndGhlIFB1YlN1YlJlcXVlc3QgYWdhaW4gdG8gdGhlIGRlZmF1bHQgc2VydmVy\nIGhvc3QvVklQIGZvciBwdWJTdWJEYXRhOiAiCiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICsgcHViU3ViRGF0YSk7CiAgICAgICAgICAgICAg\nICAvLyBLZWVwIHRyYWNrIG9mIHRoaXMgY3VycmVudCBzZXJ2ZXIgdGhhdCB3\nZSBmYWlsZWQgdG8gd3JpdGUgdG8KICAgICAgICAgICAgICAgIC8vIGJ1dCBy\nZXRyeSB0aGUgcmVxdWVzdCBvbiB0aGUgZGVmYXVsdCBzZXJ2ZXIgaG9zdC9W\nSVAuCiAgICAgICAgICAgICAgICBpZiAocHViU3ViRGF0YS53cml0ZUZhaWxl\nZFNlcnZlcnMgPT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICBwdWJTdWJE\nYXRhLndyaXRlRmFpbGVkU2VydmVycyA9IG5ldyBMaW5rZWRMaXN0PEJ5dGVT\ndHJpbmc+KCk7CiAgICAgICAgICAgICAgICBwdWJTdWJEYXRhLndyaXRlRmFp\nbGVkU2VydmVycy5hZGQoaG9zdFN0cmluZyk7CiAgICAgICAgICAgICAgICBj\nbGllbnQuZG9Db25uZWN0KHB1YlN1YkRhdGEsIGNmZy5nZXREZWZhdWx0U2Vy\ndmVySG9zdCgpKTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAg\nICAgICAgICAgIC8vIE5vdyB0aGF0IHRoZSB3cml0ZSB0byB0aGUgc2VydmVy\nIGlzIGRvbmUsIHdlIGhhdmUgdG8gd2FpdCBmb3IgaXQKICAgICAgICAgICAg\nLy8gdG8gcmVzcG9uZC4gVGhlIFJlc3BvbnNlSGFuZGxlciB3aWxsIHRha2Ug\nY2FyZSBvZiB0aGUgYWNrCiAgICAgICAgICAgIC8vIHJlc3BvbnNlIGZyb20g\ndGhlIHNlcnZlciBiZWZvcmUgd2UgY2FuIGRldGVybWluZSBpZiB0aGUgYXN5\nbmMKICAgICAgICAgICAgLy8gUHViU3ViIGNhbGwgaGFzIHJlYWxseSBjb21w\nbGV0ZWQgc3VjY2Vzc2Z1bGx5IG9yIG5vdC4KICAgICAgICAgICAgaWYgKGxv\nZ2dlci5pc0RlYnVnRW5hYmxlZCgpKQogICAgICAgICAgICAgICAgbG9nZ2Vy\nLmRlYnVnKCJTdWNjZXNzZnVsbHkgd3JvdGUgdG8gaG9zdDogIiArIGhvc3Qg\nKyAiIGZvciBwdWJTdWJEYXRhOiAiICsgcHViU3ViRGF0YSk7CiAgICAgICAg\nfQogICAgfQoKfQo=\n","encoding":"base64"}

