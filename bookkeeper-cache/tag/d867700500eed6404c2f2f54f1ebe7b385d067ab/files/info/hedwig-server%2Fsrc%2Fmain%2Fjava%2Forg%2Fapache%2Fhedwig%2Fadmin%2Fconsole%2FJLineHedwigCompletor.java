{"sha":"c600a292549b51d9ae682d2dae0225ad27cf4f4a","node_id":"MDQ6QmxvYjE1NzU5NTY6YzYwMGEyOTI1NDliNTFkOWFlNjgyZDJkYWUwMjI1YWQyN2NmNGY0YQ==","size":3442,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/c600a292549b51d9ae682d2dae0225ad27cf4f4a","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KCnBh\nY2thZ2Ugb3JnLmFwYWNoZS5oZWR3aWcuYWRtaW4uY29uc29sZTsKCmltcG9y\ndCBqYXZhLnV0aWwuTGlzdDsKCmltcG9ydCBvcmcuYXBhY2hlLnpvb2tlZXBl\nci5LZWVwZXJFeGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5h\nZG1pbi5IZWR3aWdBZG1pbjsKCmltcG9ydCBqbGluZS5Db21wbGV0b3I7Cgpp\nbXBvcnQgc3RhdGljIG9yZy5hcGFjaGUuaGVkd2lnLmFkbWluLmNvbnNvbGUu\nSGVkd2lnQ29tbWFuZHMuKjsKCi8qKgogKiBBIGpsaW5lIGNvbXBsZXRvciBm\nb3IgaGVkd2lnIGNvbnNvbGUKICovCnB1YmxpYyBjbGFzcyBKTGluZUhlZHdp\nZ0NvbXBsZXRvciBpbXBsZW1lbnRzIENvbXBsZXRvciB7CiAgICBwcml2YXRl\nIEhlZHdpZ0FkbWluIGFkbWluOwoKICAgIHB1YmxpYyBKTGluZUhlZHdpZ0Nv\nbXBsZXRvcihIZWR3aWdBZG1pbiBhZG1pbikgewogICAgICAgIHRoaXMuYWRt\naW4gPSBhZG1pbjsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBp\nbnQgY29tcGxldGUoU3RyaW5nIGJ1ZmZlciwgaW50IGN1cnNvciwgTGlzdCBj\nYW5kaWRhdGVzKSB7CiAgICAgICAgLy8gR3VhcmFudGVlIHRoYXQgdGhlIGZp\nbmFsIHRva2VuIGlzIHRoZSBvbmUgd2UncmUgZXhwYW5kaW5nCiAgICAgICAg\nYnVmZmVyID0gYnVmZmVyLnN1YnN0cmluZygwLGN1cnNvcik7CiAgICAgICAg\nU3RyaW5nW10gdG9rZW5zID0gYnVmZmVyLnNwbGl0KCIgIik7CiAgICAgICAg\naWYgKGJ1ZmZlci5lbmRzV2l0aCgiICIpKSB7CiAgICAgICAgICAgIFN0cmlu\nZ1tdIG5ld1Rva2VucyA9IG5ldyBTdHJpbmdbdG9rZW5zLmxlbmd0aCArIDFd\nOwogICAgICAgICAgICBTeXN0ZW0uYXJyYXljb3B5KHRva2VucywgMCwgbmV3\nVG9rZW5zLCAwLCB0b2tlbnMubGVuZ3RoKTsKICAgICAgICAgICAgbmV3VG9r\nZW5zW25ld1Rva2Vucy5sZW5ndGggLSAxXSA9ICIiOwogICAgICAgICAgICB0\nb2tlbnMgPSBuZXdUb2tlbnM7CiAgICAgICAgfQogICAgICAgIAogICAgICAg\nIGlmICh0b2tlbnMubGVuZ3RoID4gMiAmJgogICAgICAgICAgICBERVNDUklC\nRS5lcXVhbHNJZ25vcmVDYXNlKHRva2Vuc1swXSkgJiYKICAgICAgICAgICAg\nREVTQ1JJQkVfVE9QSUMuZXF1YWxzSWdub3JlQ2FzZSh0b2tlbnNbMV0pKSB7\nCiAgICAgICAgICAgIHJldHVybiBjb21wbGV0ZVRvcGljKGJ1ZmZlciwgdG9r\nZW5zWzJdLCBjYW5kaWRhdGVzKTsKICAgICAgICB9IGVsc2UgaWYgKHRva2Vu\ncy5sZW5ndGggPiAxICYmCiAgICAgICAgICAgICAgICAgICAoU1VCLmVxdWFs\nc0lnbm9yZUNhc2UodG9rZW5zWzBdKSB8fAogICAgICAgICAgICAgICAgICAg\nIFBVQi5lcXVhbHNJZ25vcmVDYXNlKHRva2Vuc1swXSkgfHwKICAgICAgICAg\nICAgICAgICAgICBDTE9TRVNVQi5lcXVhbHNJZ25vcmVDYXNlKHRva2Vuc1sw\nXSkgfHwKICAgICAgICAgICAgICAgICAgICBDT05TVU1FLmVxdWFsc0lnbm9y\nZUNhc2UodG9rZW5zWzBdKSB8fAogICAgICAgICAgICAgICAgICAgIENPTlNV\nTUVUTy5lcXVhbHNJZ25vcmVDYXNlKHRva2Vuc1swXSkgfHwKICAgICAgICAg\nICAgICAgICAgICBSRUFEVE9QSUMuZXF1YWxzSWdub3JlQ2FzZSh0b2tlbnNb\nMF0pKSkgewogICAgICAgICAgICByZXR1cm4gY29tcGxldGVUb3BpYyhidWZm\nZXIsIHRva2Vuc1sxXSwgY2FuZGlkYXRlcyk7CiAgICAgICAgfQogICAgICAg\nIExpc3Q8U3RyaW5nPiBjbWRzID0gSGVkd2lnQ29tbWFuZHMuZmluZENhbmRp\nZGF0ZUNvbW1hbmRzKHRva2Vucyk7CiAgICAgICAgcmV0dXJuIGNvbXBsZXRl\nQ29tbWFuZChidWZmZXIsIHRva2Vuc1t0b2tlbnMubGVuZ3RoIC0gMV0sIGNt\nZHMsIGNhbmRpZGF0ZXMpOwogICAgfQoKICAgIHByaXZhdGUgaW50IGNvbXBs\nZXRlQ29tbWFuZChTdHJpbmcgYnVmZmVyLCBTdHJpbmcgdG9rZW4sCiAgICAg\nICAgICAgIExpc3Q8U3RyaW5nPiBjb21tYW5kcywgTGlzdDxTdHJpbmc+IGNh\nbmRpZGF0ZXMpIHsKICAgICAgICBmb3IgKFN0cmluZyBjbWQgOiBjb21tYW5k\ncykgewogICAgICAgICAgICBpZiAoY21kLnN0YXJ0c1dpdGgodG9rZW4pKSB7\nCiAgICAgICAgICAgICAgICBjYW5kaWRhdGVzLmFkZChjbWQpOwogICAgICAg\nICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBidWZmZXIubGFzdElu\nZGV4T2YoIiAiKSArIDE7CiAgICB9CgogICAgcHJpdmF0ZSBpbnQgY29tcGxl\ndGVUb3BpYyhTdHJpbmcgYnVmZmVyLCBTdHJpbmcgdG9rZW4sIExpc3Q8U3Ry\naW5nPiBjYW5kaWRhdGVzKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\nTGlzdDxTdHJpbmc+IGNoaWxkcmVuID0gYWRtaW4uZ2V0VG9waWNzKCk7CiAg\nICAgICAgICAgIGZvciAoU3RyaW5nIGNoaWxkIDogY2hpbGRyZW4pIHsKICAg\nICAgICAgICAgICAgIGlmIChjaGlsZC5zdGFydHNXaXRoKHRva2VuKSkgewog\nICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZXMuYWRkKGNoaWxkKTsKICAg\nICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0gY2F0Y2gg\nKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIHJldHVybiBidWZmZXIubGVu\nZ3RoKCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBjYW5kaWRhdGVzLnNp\nemUoKSA9PSAwID8gYnVmZmVyLmxlbmd0aCgpIDogYnVmZmVyLmxhc3RJbmRl\neE9mKCIgIikgKyAxOwogICAgfQp9Cg==\n","encoding":"base64"}

