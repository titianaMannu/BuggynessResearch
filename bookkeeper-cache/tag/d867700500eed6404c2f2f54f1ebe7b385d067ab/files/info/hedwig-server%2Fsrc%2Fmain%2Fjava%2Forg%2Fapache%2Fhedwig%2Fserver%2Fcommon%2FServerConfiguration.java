{"sha":"a37e336aa1715e2e811daef73594e17054939a6e","node_id":"MDQ6QmxvYjE1NzU5NTY6YTM3ZTMzNmFhMTcxNWUyZTgxMWRhZWY3MzU5NGUxNzA1NDkzOWE2ZQ==","size":11483,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/a37e336aa1715e2e811daef73594e17054939a6e","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIuY29tbW9uOwoKaW1wb3J0\nIGphdmEuaW8uRmlsZUlucHV0U3RyZWFtOwppbXBvcnQgamF2YS5pby5GaWxl\nTm90Rm91bmRFeGNlcHRpb247CmltcG9ydCBqYXZhLmlvLklucHV0U3RyZWFt\nOwppbXBvcnQgamF2YS5uZXQuSW5ldEFkZHJlc3M7CmltcG9ydCBqYXZhLm5l\ndC5VUkw7CmltcG9ydCBqYXZhLm5ldC5Vbmtub3duSG9zdEV4Y2VwdGlvbjsK\naW1wb3J0IGphdmEudXRpbC5BcnJheXM7CmltcG9ydCBqYXZhLnV0aWwuTGlu\na2VkTGlzdDsKaW1wb3J0IGphdmEudXRpbC5MaXN0OwoKaW1wb3J0IG9yZy5h\ncGFjaGUuY29tbW9ucy5jb25maWd1cmF0aW9uLkNvbmZpZ3VyYXRpb25FeGNl\ncHRpb247CgppbXBvcnQgY29tLmdvb2dsZS5wcm90b2J1Zi5CeXRlU3RyaW5n\nOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuY29uZi5BYnN0cmFjdENvbmZp\nZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy51dGlsLkhlZHdp\nZ1NvY2tldEFkZHJlc3M7CgpwdWJsaWMgY2xhc3MgU2VydmVyQ29uZmlndXJh\ndGlvbiBleHRlbmRzIEFic3RyYWN0Q29uZmlndXJhdGlvbiB7CiAgICBwcm90\nZWN0ZWQgZmluYWwgc3RhdGljIFN0cmluZyBSRUdJT04gPSAicmVnaW9uIjsK\nICAgIHByb3RlY3RlZCBmaW5hbCBzdGF0aWMgU3RyaW5nIE1BWF9NRVNTQUdF\nX1NJWkUgPSAibWF4X21lc3NhZ2Vfc2l6ZSI7CiAgICBwcm90ZWN0ZWQgZmlu\nYWwgc3RhdGljIFN0cmluZyBSRUFEQUhFQURfQ09VTlQgPSAicmVhZGFoZWFk\nX2NvdW50IjsKICAgIHByb3RlY3RlZCBmaW5hbCBzdGF0aWMgU3RyaW5nIFJF\nQURBSEVBRF9TSVpFID0gInJlYWRhaGVhZF9zaXplIjsKICAgIHByb3RlY3Rl\nZCBmaW5hbCBzdGF0aWMgU3RyaW5nIENBQ0hFX1NJWkUgPSAiY2FjaGVfc2l6\nZSI7CiAgICBwcm90ZWN0ZWQgZmluYWwgc3RhdGljIFN0cmluZyBTQ0FOX0JB\nQ0tPRkZfTVNFQyA9ICJzY2FuX2JhY2tvZmZfbXMiOwogICAgcHJvdGVjdGVk\nIGZpbmFsIHN0YXRpYyBTdHJpbmcgU0VSVkVSX1BPUlQgPSAic2VydmVyX3Bv\ncnQiOwogICAgcHJvdGVjdGVkIGZpbmFsIHN0YXRpYyBTdHJpbmcgU1NMX1NF\nUlZFUl9QT1JUID0gInNzbF9zZXJ2ZXJfcG9ydCI7CiAgICBwcm90ZWN0ZWQg\nZmluYWwgc3RhdGljIFN0cmluZyBaS19QUkVGSVggPSAiemtfcHJlZml4IjsK\nICAgIHByb3RlY3RlZCBmaW5hbCBzdGF0aWMgU3RyaW5nIFpLX0hPU1QgPSAi\nemtfaG9zdCI7CiAgICBwcm90ZWN0ZWQgZmluYWwgc3RhdGljIFN0cmluZyBa\nS19USU1FT1VUID0gInprX3RpbWVvdXQiOwogICAgcHJvdGVjdGVkIGZpbmFs\nIHN0YXRpYyBTdHJpbmcgUkVBREFIRUFEX0VOQUJMRUQgPSAicmVhZGFoZWFk\nX2VuYWJsZWQiOwogICAgcHJvdGVjdGVkIGZpbmFsIHN0YXRpYyBTdHJpbmcg\nU1RBTkRBTE9ORSA9ICJzdGFuZGFsb25lIjsKICAgIHByb3RlY3RlZCBmaW5h\nbCBzdGF0aWMgU3RyaW5nIFJFR0lPTlMgPSAicmVnaW9ucyI7CiAgICBwcm90\nZWN0ZWQgZmluYWwgc3RhdGljIFN0cmluZyBDRVJUX05BTUUgPSAiY2VydF9u\nYW1lIjsKICAgIHByb3RlY3RlZCBmaW5hbCBzdGF0aWMgU3RyaW5nIENFUlRf\nUEFUSCA9ICJjZXJ0X3BhdGgiOwogICAgcHJvdGVjdGVkIGZpbmFsIHN0YXRp\nYyBTdHJpbmcgUEFTU1dPUkQgPSAicGFzc3dvcmQiOwogICAgcHJvdGVjdGVk\nIGZpbmFsIHN0YXRpYyBTdHJpbmcgU1NMX0VOQUJMRUQgPSAic3NsX2VuYWJs\nZWQiOwogICAgcHJvdGVjdGVkIGZpbmFsIHN0YXRpYyBTdHJpbmcgQ09OU1VN\nRV9JTlRFUlZBTCA9ICJjb25zdW1lX2ludGVydmFsIjsKICAgIHByb3RlY3Rl\nZCBmaW5hbCBzdGF0aWMgU3RyaW5nIFJFVEVOVElPTl9TRUNTID0gInJldGVu\ndGlvbl9zZWNzIjsKICAgIHByb3RlY3RlZCBmaW5hbCBzdGF0aWMgU3RyaW5n\nIElOVEVSX1JFR0lPTl9TU0xfRU5BQkxFRCA9ICJpbnRlcl9yZWdpb25fc3Ns\nX2VuYWJsZWQiOwogICAgcHJvdGVjdGVkIGZpbmFsIHN0YXRpYyBTdHJpbmcg\nTUVTU0FHRVNfQ09OU1VNRURfVEhSRUFEX1JVTl9JTlRFUlZBTCA9ICJtZXNz\nYWdlc19jb25zdW1lZF90aHJlYWRfcnVuX2ludGVydmFsIjsKICAgIHByb3Rl\nY3RlZCBmaW5hbCBzdGF0aWMgU3RyaW5nIEJLX0VOU0VNQkxFX1NJWkUgPSAi\nYmtfZW5zZW1ibGVfc2l6ZSI7CiAgICBwcm90ZWN0ZWQgZmluYWwgc3RhdGlj\nIFN0cmluZyBCS19RVU9SVU1fU0laRSA9ICJia19xdW9ydW1fc2l6ZSI7CiAg\nICBwcm90ZWN0ZWQgZmluYWwgc3RhdGljIFN0cmluZyBSRVRSWV9SRU1PVEVf\nU1VCU0NSSUJFX1RIUkVBRF9SVU5fSU5URVJWQUwgPSAicmV0cnlfcmVtb3Rl\nX3N1YnNjcmliZV90aHJlYWRfcnVuX2ludGVydmFsIjsKCiAgICAvLyB0aGVz\nZSBhcmUgdGhlIGRlcml2ZWQgYXR0cmlidXRlcwogICAgcHJvdGVjdGVkIEJ5\ndGVTdHJpbmcgbXlSZWdpb25CeXRlU3RyaW5nID0gbnVsbDsKICAgIHByb3Rl\nY3RlZCBIZWR3aWdTb2NrZXRBZGRyZXNzIG15U2VydmVyQWRkcmVzcyA9IG51\nbGw7CiAgICBwcm90ZWN0ZWQgTGlzdDxTdHJpbmc+IHJlZ2lvbkxpc3QgPSBu\ndWxsOwoKICAgIC8vIEFsdGhvdWdoIHRoaXMgbWV0aG9kIGlzIG5vdCBjdXJy\nZW50bHkgdXNlZCwgY3VycmVudGx5IG1haW50YWluaW5nIGl0IGxpa2UKICAg\nIC8vIHRoaXMgc28gdGhhdCB3ZSBjYW4gc3VwcG9ydCBvbi10aGUtZmx5IGNo\nYW5nZXMgaW4gY29uZmlndXJhdGlvbgogICAgcHJvdGVjdGVkIHZvaWQgcmVm\ncmVzaERlcml2ZWRBdHRyaWJ1dGVzKCkgewogICAgICAgIHJlZnJlc2hNeVJl\nZ2lvbkJ5dGVTdHJpbmcoKTsKICAgICAgICByZWZyZXNoTXlTZXJ2ZXJBZGRy\nZXNzKCk7CiAgICAgICAgcmVmcmVzaFJlZ2lvbkxpc3QoKTsKICAgIH0KCiAg\nICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIGxvYWRDb25mKFVSTCBjb25m\nVVJMKSB0aHJvd3MgQ29uZmlndXJhdGlvbkV4Y2VwdGlvbiB7CiAgICAgICAg\nc3VwZXIubG9hZENvbmYoY29uZlVSTCk7CiAgICAgICAgcmVmcmVzaERlcml2\nZWRBdHRyaWJ1dGVzKCk7CiAgICB9CgogICAgcHVibGljIGludCBnZXRNYXhp\nbXVtTWVzc2FnZVNpemUoKSB7CiAgICAgICAgcmV0dXJuIGNvbmYuZ2V0SW50\nKE1BWF9NRVNTQUdFX1NJWkUsIDEyNTgyOTEpOyAvKiAxLjJNICovCiAgICB9\nCgogICAgcHVibGljIFN0cmluZyBnZXRNeVJlZ2lvbigpIHsKICAgICAgICBy\nZXR1cm4gY29uZi5nZXRTdHJpbmcoUkVHSU9OLCAic3RhbmRhbG9uZSIpOwog\nICAgfQoKICAgIHByb3RlY3RlZCB2b2lkIHJlZnJlc2hNeVJlZ2lvbkJ5dGVT\ndHJpbmcoKSB7CiAgICAgICAgbXlSZWdpb25CeXRlU3RyaW5nID0gQnl0ZVN0\ncmluZy5jb3B5RnJvbVV0ZjgoZ2V0TXlSZWdpb24oKSk7CiAgICB9CgogICAg\ncHJvdGVjdGVkIHZvaWQgcmVmcmVzaE15U2VydmVyQWRkcmVzcygpIHsKICAg\nICAgICB0cnkgewogICAgICAgICAgICAvLyBVc2UgdGhlIHJhdyBJUCBhZGRy\nZXNzIGFzIHRoZSBob3N0bmFtZQogICAgICAgICAgICBteVNlcnZlckFkZHJl\nc3MgPSBuZXcgSGVkd2lnU29ja2V0QWRkcmVzcyhJbmV0QWRkcmVzcy5nZXRM\nb2NhbEhvc3QoKS5nZXRIb3N0QWRkcmVzcygpLCBnZXRTZXJ2ZXJQb3J0KCks\nCiAgICAgICAgICAgICAgICAgICAgZ2V0U1NMU2VydmVyUG9ydCgpKTsKICAg\nICAgICB9IGNhdGNoIChVbmtub3duSG9zdEV4Y2VwdGlvbiBlKSB7CiAgICAg\nICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKGUpOwogICAgICAg\nIH0KICAgIH0KCiAgICAvLyBUaGUgZXhwZWN0ZWQgZm9ybWF0IGZvciB0aGUg\ncmVnaW9ucyBwYXJhbWV0ZXIgaXMgSG9zdG5hbWU6UG9ydDpTU0xQb3J0CiAg\nICAvLyB3aXRoIHNwYWNlcyBpbiBiZXR3ZWVuIGVhY2ggb2YgdGhlIHJlZ2lv\nbnMuCiAgICBwcm90ZWN0ZWQgdm9pZCByZWZyZXNoUmVnaW9uTGlzdCgpIHsK\nICAgICAgICBTdHJpbmcgcmVnaW9ucyA9IGNvbmYuZ2V0U3RyaW5nKFJFR0lP\nTlMsICIiKTsKICAgICAgICBpZiAocmVnaW9ucy5pc0VtcHR5KCkpIHsKICAg\nICAgICAgICAgcmVnaW9uTGlzdCA9IG5ldyBMaW5rZWRMaXN0PFN0cmluZz4o\nKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZWdpb25MaXN0ID0g\nQXJyYXlzLmFzTGlzdChyZWdpb25zLnNwbGl0KCIgIikpOwogICAgICAgIH0K\nICAgIH0KCiAgICBwdWJsaWMgQnl0ZVN0cmluZyBnZXRNeVJlZ2lvbkJ5dGVT\ndHJpbmcoKSB7CiAgICAgICAgaWYgKG15UmVnaW9uQnl0ZVN0cmluZyA9PSBu\ndWxsKSB7CiAgICAgICAgICAgIHJlZnJlc2hNeVJlZ2lvbkJ5dGVTdHJpbmco\nKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG15UmVnaW9uQnl0ZVN0cmlu\nZzsKICAgIH0KCiAgICBwdWJsaWMgaW50IGdldFJlYWRBaGVhZENvdW50KCkg\newogICAgICAgIHJldHVybiBjb25mLmdldEludChSRUFEQUhFQURfQ09VTlQs\nIDEwKTsKICAgIH0KCiAgICBwdWJsaWMgbG9uZyBnZXRSZWFkQWhlYWRTaXpl\nQnl0ZXMoKSB7CiAgICAgICAgcmV0dXJuIGNvbmYuZ2V0TG9uZyhSRUFEQUhF\nQURfU0laRSwgNCAqIDEwMjQgKiAxMDI0KTsgLy8gNE0KICAgIH0KCiAgICBw\ndWJsaWMgbG9uZyBnZXRNYXhpbXVtQ2FjaGVTaXplKCkgewogICAgICAgIC8v\nIDJHIG9yIGhhbGYgb2YgdGhlIG1heGltdW0gYW1vdW50IG9mIG1lbW9yeSB0\naGUgSlZNIHVzZXMKICAgICAgICByZXR1cm4gY29uZi5nZXRMb25nKENBQ0hF\nX1NJWkUsIE1hdGgubWluKDIgKiAxMDI0TCAqIDEwMjRMICogMTAyNEwsIFJ1\nbnRpbWUuZ2V0UnVudGltZSgpLm1heE1lbW9yeSgpIC8gMikpOwogICAgfQoK\nICAgIC8vIEFmdGVyIGEgc2NhbiBvZiBhIGxvZyBmYWlscywgaG93IGxvbmcg\nYmVmb3JlIHdlIHJldHJ5IChpbiBtc2VjKQogICAgcHVibGljIGxvbmcgZ2V0\nU2NhbkJhY2tvZmZQZXJpb2RNcygpIHsKICAgICAgICByZXR1cm4gY29uZi5n\nZXRMb25nKFNDQU5fQkFDS09GRl9NU0VDLCAxMDAwKTsKICAgIH0KCiAgICBw\ndWJsaWMgaW50IGdldFNlcnZlclBvcnQoKSB7CiAgICAgICAgcmV0dXJuIGNv\nbmYuZ2V0SW50KFNFUlZFUl9QT1JULCA0MDgwKTsKICAgIH0KCiAgICBwdWJs\naWMgaW50IGdldFNTTFNlcnZlclBvcnQoKSB7CiAgICAgICAgcmV0dXJuIGNv\nbmYuZ2V0SW50KFNTTF9TRVJWRVJfUE9SVCwgOTg3Nik7CiAgICB9CgogICAg\ncHVibGljIFN0cmluZyBnZXRaa1ByZWZpeCgpIHsKICAgICAgICByZXR1cm4g\nY29uZi5nZXRTdHJpbmcoWktfUFJFRklYLCAiL2hlZHdpZyIpOwogICAgfQoK\nICAgIHB1YmxpYyBTdHJpbmdCdWlsZGVyIGdldFprUmVnaW9uUHJlZml4KFN0\ncmluZ0J1aWxkZXIgc2IpIHsKICAgICAgICByZXR1cm4gc2IuYXBwZW5kKGdl\ndFprUHJlZml4KCkpLmFwcGVuZCgiLyIpLmFwcGVuZChnZXRNeVJlZ2lvbigp\nKTsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nQnVpbGRlciBnZXRaa1RvcGlj\nc1ByZWZpeChTdHJpbmdCdWlsZGVyIHNiKSB7CiAgICAgICAgcmV0dXJuIGdl\ndFprUmVnaW9uUHJlZml4KHNiKS5hcHBlbmQoIi90b3BpY3MiKTsKICAgIH0K\nCiAgICBwdWJsaWMgU3RyaW5nQnVpbGRlciBnZXRaa1RvcGljUGF0aChTdHJp\nbmdCdWlsZGVyIHNiLCBCeXRlU3RyaW5nIHRvcGljKSB7CiAgICAgICAgcmV0\ndXJuIGdldFprVG9waWNzUHJlZml4KHNiKS5hcHBlbmQoIi8iKS5hcHBlbmQo\ndG9waWMudG9TdHJpbmdVdGY4KCkpOwogICAgfQoKICAgIHB1YmxpYyBTdHJp\nbmdCdWlsZGVyIGdldFprSG9zdHNQcmVmaXgoU3RyaW5nQnVpbGRlciBzYikg\newogICAgICAgIHJldHVybiBnZXRaa1JlZ2lvblByZWZpeChzYikuYXBwZW5k\nKCIvaG9zdHMiKTsKICAgIH0KCiAgICBwdWJsaWMgSGVkd2lnU29ja2V0QWRk\ncmVzcyBnZXRTZXJ2ZXJBZGRyKCkgewogICAgICAgIGlmIChteVNlcnZlckFk\nZHJlc3MgPT0gbnVsbCkgewogICAgICAgICAgICByZWZyZXNoTXlTZXJ2ZXJB\nZGRyZXNzKCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBteVNlcnZlckFk\nZHJlc3M7CiAgICB9CgogICAgcHVibGljIFN0cmluZyBnZXRaa0hvc3QoKSB7\nCiAgICAgICAgcmV0dXJuIGNvbmYuZ2V0U3RyaW5nKFpLX0hPU1QsICJsb2Nh\nbGhvc3QiKTsKICAgIH0KCiAgICBwdWJsaWMgaW50IGdldFprVGltZW91dCgp\nIHsKICAgICAgICByZXR1cm4gY29uZi5nZXRJbnQoWktfVElNRU9VVCwgMjAw\nMCk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gZ2V0UmVhZEFoZWFkRW5h\nYmxlZCgpIHsKICAgICAgICByZXR1cm4gY29uZi5nZXRCb29sZWFuKFJFQURB\nSEVBRF9FTkFCTEVELCB0cnVlKQogICAgICAgICAgICB8fCBjb25mLmdldEJv\nb2xlYW4oInJlYWRoZWFkX2VuYWJsZWQiKTsKICAgICAgICAvLyB0aGUga2V5\nIHdhcyBtaXNzcGVsdCBpbiBhIHByZXZpb3VzIHZlcnNpb24sIHNvIGNvbXBl\nbnNhdGUgaGVyZQogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGlzU3RhbmRh\nbG9uZSgpIHsKICAgICAgICByZXR1cm4gY29uZi5nZXRCb29sZWFuKFNUQU5E\nQUxPTkUsIGZhbHNlKTsKICAgIH0KCiAgICBwdWJsaWMgTGlzdDxTdHJpbmc+\nIGdldFJlZ2lvbnMoKSB7CiAgICAgICAgaWYgKHJlZ2lvbkxpc3QgPT0gbnVs\nbCkgewogICAgICAgICAgICByZWZyZXNoUmVnaW9uTGlzdCgpOwogICAgICAg\nIH0KICAgICAgICByZXR1cm4gcmVnaW9uTGlzdDsKICAgIH0KCiAgICAvLyBU\naGlzIGlzIHRoZSBuYW1lIG9mIHRoZSBTU0wgY2VydGlmaWNhdGUgaWYgYXZh\naWxhYmxlIGFzIGEgcmVzb3VyY2UuCiAgICBwdWJsaWMgU3RyaW5nIGdldENl\ncnROYW1lKCkgewogICAgICAgIHJldHVybiBjb25mLmdldFN0cmluZyhDRVJU\nX05BTUUsICIiKTsKICAgIH0KCiAgICAvLyBUaGlzIGlzIHRoZSBwYXRoIHRv\nIHRoZSBTU0wgY2VydGlmaWNhdGUgaWYgaXQgaXMgYXZhaWxhYmxlIGFzIGEg\nZmlsZS4KICAgIHB1YmxpYyBTdHJpbmcgZ2V0Q2VydFBhdGgoKSB7CiAgICAg\nICAgcmV0dXJuIGNvbmYuZ2V0U3RyaW5nKENFUlRfUEFUSCwgIiIpOwogICAg\nfQoKICAgIC8vIFRoaXMgbWV0aG9kIHJldHVybiB0aGUgU1NMIGNlcnRpZmlj\nYXRlIGFzIGFuIElucHV0U3RyZWFtIGJhc2VkIG9uIGlmIGl0CiAgICAvLyBp\ncyBjb25maWd1cmVkIHRvIGJlIGF2YWlsYWJsZSBhcyBhIHJlc291cmNlIG9y\nIGFzIGEgZmlsZS4gSWYgbm90aGluZyBpcwogICAgLy8gY29uZmlndXJlZCBj\nb3JyZWN0bHksIHRoZW4gYSBDb25maWd1cmF0aW9uRXhjZXB0aW9uIHdpbGwg\nYmUgdGhyb3duIGFzCiAgICAvLyB3ZSBkbyBub3Qga25vdyBob3cgdG8gb2J0\nYWluIHRoZSBTU0wgY2VydGlmaWNhdGUgc3RyZWFtLgogICAgcHVibGljIElu\ncHV0U3RyZWFtIGdldENlcnRTdHJlYW0oKSB0aHJvd3MgRmlsZU5vdEZvdW5k\nRXhjZXB0aW9uLCBDb25maWd1cmF0aW9uRXhjZXB0aW9uIHsKICAgICAgICBT\ndHJpbmcgY2VydE5hbWUgPSBnZXRDZXJ0TmFtZSgpOwogICAgICAgIFN0cmlu\nZyBjZXJ0UGF0aCA9IGdldENlcnRQYXRoKCk7CiAgICAgICAgaWYgKGNlcnRO\nYW1lICE9IG51bGwgJiYgIWNlcnROYW1lLmlzRW1wdHkoKSkgewogICAgICAg\nICAgICByZXR1cm4gZ2V0Q2xhc3MoKS5nZXRSZXNvdXJjZUFzU3RyZWFtKGNl\ncnROYW1lKTsKICAgICAgICB9IGVsc2UgaWYgKGNlcnRQYXRoICE9IG51bGwg\nJiYgIWNlcnRQYXRoLmlzRW1wdHkoKSkgewogICAgICAgICAgICByZXR1cm4g\nbmV3IEZpbGVJbnB1dFN0cmVhbShjZXJ0UGF0aCk7CiAgICAgICAgfSBlbHNl\nCiAgICAgICAgICAgIHRocm93IG5ldyBDb25maWd1cmF0aW9uRXhjZXB0aW9u\nKCJTU0wgQ2VydGlmaWNhdGUgY29uZmlndXJhdGlvbiBkb2VzIG5vdCBoYXZl\nIHJlc291cmNlIG5hbWUgb3IgcGF0aCBzZXQhIik7CiAgICB9CgogICAgcHVi\nbGljIFN0cmluZyBnZXRQYXNzd29yZCgpIHsKICAgICAgICByZXR1cm4gY29u\nZi5nZXRTdHJpbmcoUEFTU1dPUkQsICIiKTsKICAgIH0KCiAgICBwdWJsaWMg\nYm9vbGVhbiBpc1NTTEVuYWJsZWQoKSB7CiAgICAgICAgcmV0dXJuIGNvbmYu\nZ2V0Qm9vbGVhbihTU0xfRU5BQkxFRCwgZmFsc2UpOwogICAgfQoKICAgIHB1\nYmxpYyBpbnQgZ2V0Q29uc3VtZUludGVydmFsKCkgewogICAgICAgIHJldHVy\nbiBjb25mLmdldEludChDT05TVU1FX0lOVEVSVkFMLCA1MCk7CiAgICB9Cgog\nICAgcHVibGljIGludCBnZXRSZXRlbnRpb25TZWNzKCkgewogICAgICAgIHJl\ndHVybiBjb25mLmdldEludChSRVRFTlRJT05fU0VDUywgMCk7CiAgICB9Cgog\nICAgcHVibGljIGJvb2xlYW4gaXNJbnRlclJlZ2lvblNTTEVuYWJsZWQoKSB7\nCiAgICAgICAgcmV0dXJuIGNvbmYuZ2V0Qm9vbGVhbihJTlRFUl9SRUdJT05f\nU1NMX0VOQUJMRUQsIGZhbHNlKTsKICAgIH0KCiAgICAvLyBUaGlzIHBhcmFt\nZXRlciBpcyB1c2VkIHRvIGRldGVybWluZSBob3cgb2Z0ZW4gd2UgcnVuIHRo\nZQogICAgLy8gU3Vic2NyaXB0aW9uTWFuYWdlcidzIE1lc3NhZ2VzIENvbnN1\nbWVkIHRpbWVyIHRhc2sgdGhyZWFkIChpbgogICAgLy8gbWlsbGlzZWNvbmRz\nKS4KICAgIHB1YmxpYyBpbnQgZ2V0TWVzc2FnZXNDb25zdW1lZFRocmVhZFJ1\nbkludGVydmFsKCkgewogICAgICAgIHJldHVybiBjb25mLmdldEludChNRVNT\nQUdFU19DT05TVU1FRF9USFJFQURfUlVOX0lOVEVSVkFMLCA2MDAwMCk7CiAg\nICB9CgogICAgLy8gVGhpcyBwYXJhbWV0ZXIgaXMgdXNlZCB0byBkZXRlcm1p\nbmUgaG93IG9mdGVuIHdlIHJ1biBhIHRocmVhZAogICAgLy8gdG8gcmV0cnkg\ndGhvc2UgZmFpbGVkIHJlbW90ZSBzdWJzY3JpcHRpb25zIGluIGFzeW5jaHJv\nbm91cyBtb2RlCiAgICAvLyAoaW4gbWlsbGlzZWNvbmRzKS4KICAgIHB1Ymxp\nYyBpbnQgZ2V0UmV0cnlSZW1vdGVTdWJzY3JpYmVUaHJlYWRSdW5JbnRlcnZh\nbCgpIHsKICAgICAgICByZXR1cm4gY29uZi5nZXRJbnQoUkVUUllfUkVNT1RF\nX1NVQlNDUklCRV9USFJFQURfUlVOX0lOVEVSVkFMLCAxMjAwMDApOwogICAg\nfQoKICAgIC8vIFRoaXMgcGFyYW1ldGVyIGlzIHVzZWQgd2hlbiBCb29ra2Vl\ncGVyIGlzIHRoZSBwZXJzaXN0ZW5jZSBzdG9yZQogICAgLy8gYW5kIGluZGlj\nYXRlcyB3aGF0IHRoZSBlbnNlbWJsZSBzaXplIGlzIChpLmUuIGhvdyBtYW55\nIGJvb2tpZQogICAgLy8gc2VydmVycyB0byBzdHJpcGUgdGhlIGxlZGdlciBl\nbnRyaWVzIGFjcm9zcykuCiAgICBwdWJsaWMgaW50IGdldEJrRW5zZW1ibGVT\naXplKCkgewogICAgICAgIHJldHVybiBjb25mLmdldEludChCS19FTlNFTUJM\nRV9TSVpFLCAzKTsKICAgIH0KCiAgICAvLyBUaGlzIHBhcmFtZXRlciBpcyB1\nc2VkIHdoZW4gQm9va2tlZXBlciBpcyB0aGUgcGVyc2lzdGVuY2Ugc3RvcmUK\nICAgIC8vIGFuZCBpbmRpY2F0ZXMgd2hhdCB0aGUgcXVvcnVtIHNpemUgaXMg\nKGkuZS4gaG93IG1hbnkgcmVkdW5kYW50CiAgICAvLyBjb3BpZXMgb2YgZWFj\naCBsZWRnZXIgZW50cnkgaXMgd3JpdHRlbikuCiAgICBwdWJsaWMgaW50IGdl\ndEJrUXVvcnVtU2l6ZSgpIHsKICAgICAgICByZXR1cm4gY29uZi5nZXRJbnQo\nQktfUVVPUlVNX1NJWkUsIDIpOwogICAgfQoKICAgIC8qCiAgICAgKiBJcyB0\naGlzIGEgdmFsaWQgY29uZmlndXJhdGlvbiB0aGF0IHdlIGNhbiBydW4gd2l0\naD8gVGhpcyBjb2RlIG1pZ2h0IGdyb3cKICAgICAqIG92ZXIgdGltZS4KICAg\nICAqLwogICAgcHVibGljIHZvaWQgdmFsaWRhdGUoKSB0aHJvd3MgQ29uZmln\ndXJhdGlvbkV4Y2VwdGlvbiB7CiAgICAgICAgaWYgKCFnZXRaa1ByZWZpeCgp\nLnN0YXJ0c1dpdGgoIi8iKSkgewogICAgICAgICAgICB0aHJvdyBuZXcgQ29u\nZmlndXJhdGlvbkV4Y2VwdGlvbihaS19QUkVGSVggKyAiIG11c3Qgc3RhcnQg\nd2l0aCBhIC8iKTsKICAgICAgICB9CiAgICAgICAgLy8gVmFsaWRhdGUgdGhh\ndCBpZiBSZWdpb25zIGV4aXN0IGFuZCBpbnRlci1yZWdpb24gY29tbXVuaWNh\ndGlvbiBpcyBTU0wKICAgICAgICAvLyBlbmFibGVkLCB0aGF0IHRoZSBSZWdp\nb25zIGNvcnJlc3BvbmQgdG8gdmFsaWQgSGVkd2lnU29ja2V0QWRkcmVzc2Vz\nLAogICAgICAgIC8vIG5hbWVseSB0aGF0IFNTTCBwb3J0cyBhcmUgcHJlc2Vu\ndC4KICAgICAgICBpZiAoaXNJbnRlclJlZ2lvblNTTEVuYWJsZWQoKSAmJiBn\nZXRSZWdpb25zKCkuc2l6ZSgpID4gMCkgewogICAgICAgICAgICBmb3IgKFN0\ncmluZyBodWJTdHJpbmcgOiBnZXRSZWdpb25zKCkpIHsKICAgICAgICAgICAg\nICAgIEhlZHdpZ1NvY2tldEFkZHJlc3MgaHViID0gbmV3IEhlZHdpZ1NvY2tl\ndEFkZHJlc3MoaHViU3RyaW5nKTsKICAgICAgICAgICAgICAgIGlmIChodWIu\nZ2V0U1NMU29ja2V0QWRkcmVzcygpID09IG51bGwpCiAgICAgICAgICAgICAg\nICAgICAgdGhyb3cgbmV3IENvbmZpZ3VyYXRpb25FeGNlcHRpb24oIlJlZ2lv\nbiBkZWZpbmVkIGRvZXMgbm90IGhhdmUgcmVxdWlyZWQgU1NMIHBvcnQ6ICIg\nKyBodWJTdHJpbmcpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAg\nIC8vIFZhbGlkYXRlIHRoYXQgdGhlIEJvb2trZWVwZXIgZW5zZW1ibGUgc2l6\nZSA+PSBxdW9ydW0gc2l6ZS4KICAgICAgICBpZiAoZ2V0QmtFbnNlbWJsZVNp\nemUoKSA8IGdldEJrUXVvcnVtU2l6ZSgpKSB7CiAgICAgICAgICAgIHRocm93\nIG5ldyBDb25maWd1cmF0aW9uRXhjZXB0aW9uKCJCSyBlbnNlbWJsZSBzaXpl\nICgiICsgZ2V0QmtFbnNlbWJsZVNpemUoKQogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICArICIpIGlzIGxlc3MgdGhhbiB0\naGUgcXVvcnVtIHNpemUgKCIgKyBnZXRCa1F1b3J1bVNpemUoKSArICIpIik7\nCiAgICAgICAgfQoKICAgICAgICAvLyBhZGQgb3RoZXIgY2hlY2tzIGhlcmUK\nICAgIH0KfQo=\n","encoding":"base64"}

