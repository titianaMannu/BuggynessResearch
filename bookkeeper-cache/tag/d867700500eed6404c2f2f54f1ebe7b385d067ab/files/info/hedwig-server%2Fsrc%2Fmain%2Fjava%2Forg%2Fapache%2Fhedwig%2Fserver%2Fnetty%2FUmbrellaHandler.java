{"sha":"44993225ca2e6d25b48f2c83f6c0c3b396aef0a7","node_id":"MDQ6QmxvYjE1NzU5NTY6NDQ5OTMyMjVjYTJlNmQyNWI0OGYyYzgzZjZjMGMzYjM5NmFlZjBhNw==","size":6851,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/44993225ca2e6d25b48f2c83f6c0c3b396aef0a7","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIubmV0dHk7CgppbXBvcnQg\namF2YS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5NYXA7Cgpp\nbXBvcnQgb3JnLnNsZjRqLkxvZ2dlcjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dn\nZXJGYWN0b3J5OwppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmNoYW5uZWwuQ2hh\nbm5lbDsKaW1wb3J0IG9yZy5qYm9zcy5uZXR0eS5jaGFubmVsLkNoYW5uZWxG\ndXR1cmU7CmltcG9ydCBvcmcuamJvc3MubmV0dHkuY2hhbm5lbC5DaGFubmVs\nRnV0dXJlTGlzdGVuZXI7CmltcG9ydCBvcmcuamJvc3MubmV0dHkuY2hhbm5l\nbC5DaGFubmVsSGFuZGxlckNvbnRleHQ7CmltcG9ydCBvcmcuamJvc3MubmV0\ndHkuY2hhbm5lbC5DaGFubmVsUGlwZWxpbmVDb3ZlcmFnZTsKaW1wb3J0IG9y\nZy5qYm9zcy5uZXR0eS5jaGFubmVsLkNoYW5uZWxTdGF0ZUV2ZW50OwppbXBv\ncnQgb3JnLmpib3NzLm5ldHR5LmNoYW5uZWwuRXhjZXB0aW9uRXZlbnQ7Cmlt\ncG9ydCBvcmcuamJvc3MubmV0dHkuY2hhbm5lbC5NZXNzYWdlRXZlbnQ7Cmlt\ncG9ydCBvcmcuamJvc3MubmV0dHkuY2hhbm5lbC5TaW1wbGVDaGFubmVsSGFu\nZGxlcjsKaW1wb3J0IG9yZy5qYm9zcy5uZXR0eS5jaGFubmVsLmdyb3VwLkNo\nYW5uZWxHcm91cDsKaW1wb3J0IG9yZy5qYm9zcy5uZXR0eS5oYW5kbGVyLmNv\nZGVjLmZyYW1lLkNvcnJ1cHRlZEZyYW1lRXhjZXB0aW9uOwppbXBvcnQgb3Jn\nLmpib3NzLm5ldHR5LmhhbmRsZXIuY29kZWMuZnJhbWUuVG9vTG9uZ0ZyYW1l\nRXhjZXB0aW9uOwppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmhhbmRsZXIuc3Ns\nLlNzbEhhbmRsZXI7CgppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuZXhjZXB0\naW9ucy5QdWJTdWJFeGNlcHRpb24uTWFsZm9ybWVkUmVxdWVzdEV4Y2VwdGlv\nbjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnByb3RvY29sLlB1YlN1YlBy\nb3RvY29sOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcucHJvdG9jb2wuUHVi\nU3ViUHJvdG9jb2wuT3BlcmF0aW9uVHlwZTsKaW1wb3J0IG9yZy5hcGFjaGUu\naGVkd2lnLnByb3RvY29sLlB1YlN1YlByb3RvY29sLlB1YlN1YlJlc3BvbnNl\nOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcucHJvdG9leHRlbnNpb25zLlB1\nYlN1YlJlc3BvbnNlVXRpbHM7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5z\nZXJ2ZXIuaGFuZGxlcnMuQ2hhbm5lbERpc2Nvbm5lY3RMaXN0ZW5lcjsKaW1w\nb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnNlcnZlci5oYW5kbGVycy5IYW5kbGVy\nOwoKQENoYW5uZWxQaXBlbGluZUNvdmVyYWdlKCJhbGwiKQpwdWJsaWMgY2xh\nc3MgVW1icmVsbGFIYW5kbGVyIGV4dGVuZHMgU2ltcGxlQ2hhbm5lbEhhbmRs\nZXIgewogICAgc3RhdGljIExvZ2dlciBsb2dnZXIgPSBMb2dnZXJGYWN0b3J5\nLmdldExvZ2dlcihVbWJyZWxsYUhhbmRsZXIuY2xhc3MpOwoKICAgIHByaXZh\ndGUgTWFwPE9wZXJhdGlvblR5cGUsIEhhbmRsZXI+IGhhbmRsZXJzOwogICAg\ncHJpdmF0ZSBDaGFubmVsR3JvdXAgYWxsQ2hhbm5lbHM7CiAgICBwcml2YXRl\nIENoYW5uZWxEaXNjb25uZWN0TGlzdGVuZXIgc3Vic2NyaWJlSGFuZGxlcjsK\nICAgIHByaXZhdGUgYm9vbGVhbiBpc1NTTEVuYWJsZWQgPSBmYWxzZTsKCiAg\nICBwdWJsaWMgVW1icmVsbGFIYW5kbGVyKENoYW5uZWxHcm91cCBhbGxDaGFu\nbmVscywgTWFwPE9wZXJhdGlvblR5cGUsIEhhbmRsZXI+IGhhbmRsZXJzLAog\nICAgICAgICAgICAgICAgICAgICAgICAgICBib29sZWFuIGlzU1NMRW5hYmxl\nZCkgewogICAgICAgIHRoaXMuYWxsQ2hhbm5lbHMgPSBhbGxDaGFubmVsczsK\nICAgICAgICB0aGlzLmlzU1NMRW5hYmxlZCA9IGlzU1NMRW5hYmxlZDsKICAg\nICAgICB0aGlzLmhhbmRsZXJzID0gaGFuZGxlcnM7CiAgICAgICAgc3Vic2Ny\naWJlSGFuZGxlciA9IChDaGFubmVsRGlzY29ubmVjdExpc3RlbmVyKSBoYW5k\nbGVycy5nZXQoT3BlcmF0aW9uVHlwZS5TVUJTQ1JJQkUpOwogICAgfQoKICAg\nIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgZXhjZXB0aW9uQ2F1Z2h0KENo\nYW5uZWxIYW5kbGVyQ29udGV4dCBjdHgsIEV4Y2VwdGlvbkV2ZW50IGUpIHRo\ncm93cyBFeGNlcHRpb24gewogICAgICAgIFRocm93YWJsZSB0aHJvd2FibGUg\nPSBlLmdldENhdXNlKCk7CgogICAgICAgIC8vIEFkZCBoZXJlIGlmIHRoZXJl\nIGFyZSBtb3JlIGV4Y2VwdGlvbnMgd2UgbmVlZCB0byBiZSBhYmxlIHRvIHRv\nbGVyYXRlLgogICAgICAgIC8vIDEuIElPRXhjZXB0aW9uIG1heSBiZSB0aHJv\nd24gd2hlbiBhIGNoYW5uZWwgaXMgZm9yY2VmdWxseSBjbG9zZWQgYnkKICAg\nICAgICAvLyB0aGUgb3RoZXIgZW5kLCBvciBieSB0aGUgUHJvdG9idWZEZWNv\nZGVyIHdoZW4gYW4gaW52YWxpZCBwcm90b2J1ZiBpcwogICAgICAgIC8vIHJl\nY2VpdmVkCiAgICAgICAgLy8gMi4gVG9vTG9uZ0ZyYW1lRXhjZXB0aW9uIGlz\nIHRocm93biBieSB0aGUgTGVuZ3RoQmFzZWREZWNvZGVyIGlmIGl0CiAgICAg\nICAgLy8gcmVjZWl2ZXMgYSBwYWNrZXQgdGhhdCBpcyB0b28gYmlnCiAgICAg\nICAgLy8gMy4gQ29ycnVwdGVkRnJhbUV4Y2VwdGlvbiBpcyB0aHJvd24gYnkg\ndGhlIExlbmd0aEJhc2VkRGVjb2RlciB3aGVuCiAgICAgICAgLy8gdGhlIGxl\nbmd0aCBpcyBuZWdhdGl2ZSBldGMuCiAgICAgICAgaWYgKHRocm93YWJsZSBp\nbnN0YW5jZW9mIElPRXhjZXB0aW9uIHx8IHRocm93YWJsZSBpbnN0YW5jZW9m\nIFRvb0xvbmdGcmFtZUV4Y2VwdGlvbgogICAgICAgICAgICAgICAgfHwgdGhy\nb3dhYmxlIGluc3RhbmNlb2YgQ29ycnVwdGVkRnJhbWVFeGNlcHRpb24pIHsK\nICAgICAgICAgICAgZS5nZXRDaGFubmVsKCkuY2xvc2UoKTsKICAgICAgICAg\nICAgaWYgKGxvZ2dlci5pc0RlYnVnRW5hYmxlZCgpKSB7CiAgICAgICAgICAg\nICAgICBsb2dnZXIuZGVidWcoIlVuY2F1Z2h0IGV4Y2VwdGlvbiIsIHRocm93\nYWJsZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAg\nICAgICAvLyBjYWxsIG91ciB1bmNhdWdodCBleGNlcHRpb24gaGFuZGxlciwg\nd2hpY2ggbWlnaHQgZGVjaWRlIHRvCiAgICAgICAgICAgIC8vIHNodXRkb3du\nIHRoZSBzeXN0ZW0KICAgICAgICAgICAgVGhyZWFkIHRocmVhZCA9IFRocmVh\nZC5jdXJyZW50VGhyZWFkKCk7CiAgICAgICAgICAgIHRocmVhZC5nZXRVbmNh\ndWdodEV4Y2VwdGlvbkhhbmRsZXIoKS51bmNhdWdodEV4Y2VwdGlvbih0aHJl\nYWQsIHRocm93YWJsZSk7CiAgICAgICAgfQoKICAgIH0KCiAgICBAT3ZlcnJp\nZGUKICAgIHB1YmxpYyB2b2lkIGNoYW5uZWxPcGVuKENoYW5uZWxIYW5kbGVy\nQ29udGV4dCBjdHgsIENoYW5uZWxTdGF0ZUV2ZW50IGUpIHRocm93cyBFeGNl\ncHRpb24gewogICAgICAgIC8vIElmIFNTTCBpcyBOT1QgZW5hYmxlZCwgdGhl\nbiB3ZSBjYW4gYWRkIHRoaXMgY2hhbm5lbCB0byB0aGUKICAgICAgICAvLyBD\naGFubmVsR3JvdXAuIE90aGVyd2lzZSwgdGhhdCBpcyBkb25lIHdoZW4gdGhl\nIGNoYW5uZWwgaXMgY29ubmVjdGVkCiAgICAgICAgLy8gYW5kIHRoZSBTU0wg\naGFuZHNoYWtlIGhhcyBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5LgogICAgICAg\nIGlmICghaXNTU0xFbmFibGVkKSB7CiAgICAgICAgICAgIGFsbENoYW5uZWxz\nLmFkZChjdHguZ2V0Q2hhbm5lbCgpKTsKICAgICAgICB9CiAgICB9CgogICAg\nQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBjaGFubmVsQ29ubmVjdGVkKENo\nYW5uZWxIYW5kbGVyQ29udGV4dCBjdHgsIENoYW5uZWxTdGF0ZUV2ZW50IGUp\nIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIGlmIChpc1NTTEVuYWJsZWQp\nIHsKICAgICAgICAgICAgY3R4LmdldFBpcGVsaW5lKCkuZ2V0KFNzbEhhbmRs\nZXIuY2xhc3MpLmhhbmRzaGFrZShlLmdldENoYW5uZWwoKSkuYWRkTGlzdGVu\nZXIobmV3IENoYW5uZWxGdXR1cmVMaXN0ZW5lcigpIHsKICAgICAgICAgICAg\nICAgIHB1YmxpYyB2b2lkIG9wZXJhdGlvbkNvbXBsZXRlKENoYW5uZWxGdXR1\ncmUgZnV0dXJlKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICAgICAgICAg\nICAgICBpZiAoZnV0dXJlLmlzU3VjY2VzcygpKSB7CiAgICAgICAgICAgICAg\nICAgICAgICAgIGlmIChsb2dnZXIuaXNEZWJ1Z0VuYWJsZWQoKSkgewogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCJTU0wgaGFu\nZHNoYWtlIGhhcyBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5ISIpOwogICAgICAg\nICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGFs\nbENoYW5uZWxzLmFkZChmdXR1cmUuZ2V0Q2hhbm5lbCgpKTsKICAgICAgICAg\nICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBm\ndXR1cmUuZ2V0Q2hhbm5lbCgpLmNsb3NlKCk7CiAgICAgICAgICAgICAgICAg\nICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAg\nICB9CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBjaGFu\nbmVsRGlzY29ubmVjdGVkKENoYW5uZWxIYW5kbGVyQ29udGV4dCBjdHgsIENo\nYW5uZWxTdGF0ZUV2ZW50IGUpIHRocm93cyBFeGNlcHRpb24gewogICAgICAg\nIENoYW5uZWwgY2hhbm5lbCA9IGN0eC5nZXRDaGFubmVsKCk7CiAgICAgICAg\nLy8gc3Vic2NyaWJlIGhhbmRsZXIgbmVlZHMgdG8ga25vdyBhYm91dCBjaGFu\nbmVsIGRpc2Nvbm5lY3RzCiAgICAgICAgc3Vic2NyaWJlSGFuZGxlci5jaGFu\nbmVsRGlzY29ubmVjdGVkKGNoYW5uZWwpOwogICAgICAgIGNoYW5uZWwuY2xv\nc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgc2VuZEVycm9y\nUmVzcG9uc2VUb01hbGZvcm1lZFJlcXVlc3QoQ2hhbm5lbCBjaGFubmVsLCBs\nb25nIHR4bklkLCBTdHJpbmcgbXNnKSB7CiAgICAgICAgaWYgKGxvZ2dlci5p\nc0RlYnVnRW5hYmxlZCgpKSB7CiAgICAgICAgICAgIGxvZ2dlci5kZWJ1Zygi\nTWFsZm9ybWVkIHJlcXVlc3QgZnJvbSAiICsgY2hhbm5lbC5nZXRSZW1vdGVB\nZGRyZXNzKCkgKyAiIG1zZywgPSAiICsgbXNnKTsKICAgICAgICB9CiAgICAg\nICAgTWFsZm9ybWVkUmVxdWVzdEV4Y2VwdGlvbiBtcmUgPSBuZXcgTWFsZm9y\nbWVkUmVxdWVzdEV4Y2VwdGlvbihtc2cpOwogICAgICAgIFB1YlN1YlJlc3Bv\nbnNlIHJlc3BvbnNlID0gUHViU3ViUmVzcG9uc2VVdGlscy5nZXRSZXNwb25z\nZUZvckV4Y2VwdGlvbihtcmUsIHR4bklkKTsKICAgICAgICBjaGFubmVsLndy\naXRlKHJlc3BvbnNlKTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1Ymxp\nYyB2b2lkIG1lc3NhZ2VSZWNlaXZlZChDaGFubmVsSGFuZGxlckNvbnRleHQg\nY3R4LCBNZXNzYWdlRXZlbnQgZSkgdGhyb3dzIEV4Y2VwdGlvbiB7CgogICAg\nICAgIGlmICghKGUuZ2V0TWVzc2FnZSgpIGluc3RhbmNlb2YgUHViU3ViUHJv\ndG9jb2wuUHViU3ViUmVxdWVzdCkpIHsKICAgICAgICAgICAgY3R4LnNlbmRV\ncHN0cmVhbShlKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAg\nICAgICAgUHViU3ViUHJvdG9jb2wuUHViU3ViUmVxdWVzdCByZXF1ZXN0ID0g\nKFB1YlN1YlByb3RvY29sLlB1YlN1YlJlcXVlc3QpIGUuZ2V0TWVzc2FnZSgp\nOwoKICAgICAgICBIYW5kbGVyIGhhbmRsZXIgPSBoYW5kbGVycy5nZXQocmVx\ndWVzdC5nZXRUeXBlKCkpOwogICAgICAgIENoYW5uZWwgY2hhbm5lbCA9IGN0\neC5nZXRDaGFubmVsKCk7CiAgICAgICAgbG9uZyB0eG5JZCA9IHJlcXVlc3Qu\nZ2V0VHhuSWQoKTsKCiAgICAgICAgaWYgKGhhbmRsZXIgPT0gbnVsbCkgewog\nICAgICAgICAgICBzZW5kRXJyb3JSZXNwb25zZVRvTWFsZm9ybWVkUmVxdWVz\ndChjaGFubmVsLCB0eG5JZCwgIlJlcXVlc3QgdHlwZSAiICsgcmVxdWVzdC5n\nZXRUeXBlKCkuZ2V0TnVtYmVyKCkKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgKyAiIHVua25vd24iKTsKICAgICAg\nICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaGFuZGxlci5oYW5k\nbGVSZXF1ZXN0KHJlcXVlc3QsIGNoYW5uZWwpOwogICAgICAgIFNlcnZlclN0\nYXRzLmdldEluc3RhbmNlKCkuaW5jcmVtZW50UmVxdWVzdHNSZWNlaXZlZCgp\nOwogICAgfQoKfQo=\n","encoding":"base64"}

