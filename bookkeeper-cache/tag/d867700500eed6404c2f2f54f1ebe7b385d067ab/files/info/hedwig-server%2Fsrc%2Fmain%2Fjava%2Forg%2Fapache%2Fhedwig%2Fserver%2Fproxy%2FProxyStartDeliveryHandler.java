{"sha":"e77fbceb6c7473374a3d4d38c6c55ba92151910a","node_id":"MDQ6QmxvYjE1NzU5NTY6ZTc3ZmJjZWI2Yzc0NzMzNzRhM2Q0ZDM4YzZjNTViYTkyMTUxOTEwYQ==","size":5803,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/e77fbceb6c7473374a3d4d38c6c55ba92151910a","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIucHJveHk7CgppbXBvcnQg\nb3JnLnNsZjRqLkxvZ2dlcjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJGYWN0\nb3J5OwppbXBvcnQgb3JnLmpib3NzLm5ldHR5LmNoYW5uZWwuQ2hhbm5lbDsK\naW1wb3J0IG9yZy5qYm9zcy5uZXR0eS5jaGFubmVsLkNoYW5uZWxGdXR1cmU7\nCmltcG9ydCBvcmcuamJvc3MubmV0dHkuY2hhbm5lbC5DaGFubmVsRnV0dXJl\nTGlzdGVuZXI7CgppbXBvcnQgY29tLmdvb2dsZS5wcm90b2J1Zi5CeXRlU3Ry\naW5nOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuY2xpZW50LmFwaS5NZXNz\nYWdlSGFuZGxlcjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmNsaWVudC5h\ncGkuU3Vic2NyaWJlcjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmNsaWVu\ndC5leGNlcHRpb25zLkFscmVhZHlTdGFydERlbGl2ZXJ5RXhjZXB0aW9uOwpp\nbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuZXhjZXB0aW9ucy5QdWJTdWJFeGNl\ncHRpb247CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5leGNlcHRpb25zLlB1\nYlN1YkV4Y2VwdGlvbi5DbGllbnROb3RTdWJzY3JpYmVkRXhjZXB0aW9uOwpp\nbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcucHJvdG9jb2wuUHViU3ViUHJvdG9j\nb2wuTWVzc2FnZTsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnByb3RvY29s\nLlB1YlN1YlByb3RvY29sLlByb3RvY29sVmVyc2lvbjsKaW1wb3J0IG9yZy5h\ncGFjaGUuaGVkd2lnLnByb3RvY29sLlB1YlN1YlByb3RvY29sLlB1YlN1YlJl\ncXVlc3Q7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5QdWJT\ndWJQcm90b2NvbC5QdWJTdWJSZXNwb25zZTsKaW1wb3J0IG9yZy5hcGFjaGUu\naGVkd2lnLnByb3RvY29sLlB1YlN1YlByb3RvY29sLlN0YXR1c0NvZGU7Cmlt\ncG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2V4dGVuc2lvbnMuUHViU3Vi\nUmVzcG9uc2VVdGlsczsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnNlcnZl\nci5oYW5kbGVycy5IYW5kbGVyOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcu\nc2VydmVyLm5ldHR5LlVtYnJlbGxhSGFuZGxlcjsKaW1wb3J0IG9yZy5hcGFj\naGUuaGVkd2lnLnV0aWwuQ2FsbGJhY2s7CgpwdWJsaWMgY2xhc3MgUHJveHlT\ndGFydERlbGl2ZXJ5SGFuZGxlciBpbXBsZW1lbnRzIEhhbmRsZXIgewoKICAg\nIHN0YXRpYyBmaW5hbCBMb2dnZXIgbG9nZ2VyID0gTG9nZ2VyRmFjdG9yeS5n\nZXRMb2dnZXIoUHJveHlTdGFydERlbGl2ZXJ5SGFuZGxlci5jbGFzcyk7Cgog\nICAgU3Vic2NyaWJlciBzdWJzY3JpYmVyOwogICAgQ2hhbm5lbFRyYWNrZXIg\ndHJhY2tlcjsKCiAgICBwdWJsaWMgUHJveHlTdGFydERlbGl2ZXJ5SGFuZGxl\ncihTdWJzY3JpYmVyIHN1YnNjcmliZXIsIENoYW5uZWxUcmFja2VyIHRyYWNr\nZXIpIHsKICAgICAgICB0aGlzLnN1YnNjcmliZXIgPSBzdWJzY3JpYmVyOwog\nICAgICAgIHRoaXMudHJhY2tlciA9IHRyYWNrZXI7CiAgICB9CgogICAgQE92\nZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBoYW5kbGVSZXF1ZXN0KFB1YlN1YlJl\ncXVlc3QgcmVxdWVzdCwgQ2hhbm5lbCBjaGFubmVsKSB7CgogICAgICAgIGlm\nICghcmVxdWVzdC5oYXNTdGFydERlbGl2ZXJ5UmVxdWVzdCgpKSB7CiAgICAg\nICAgICAgIFVtYnJlbGxhSGFuZGxlci5zZW5kRXJyb3JSZXNwb25zZVRvTWFs\nZm9ybWVkUmVxdWVzdChjaGFubmVsLCByZXF1ZXN0LmdldFR4bklkKCksCiAg\nICAgICAgICAgICAgICAgICAgIk1pc3Npbmcgc3RhcnQgZGVsaXZlcnkgcmVx\ndWVzdCBkYXRhIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9Cgog\nICAgICAgIGZpbmFsIEJ5dGVTdHJpbmcgdG9waWMgPSByZXF1ZXN0LmdldFRv\ncGljKCk7CiAgICAgICAgZmluYWwgQnl0ZVN0cmluZyBzdWJzY3JpYmVySWQg\nPSByZXF1ZXN0LmdldFN0YXJ0RGVsaXZlcnlSZXF1ZXN0KCkuZ2V0U3Vic2Ny\naWJlcklkKCk7CgogICAgICAgIHN5bmNocm9uaXplZCAodHJhY2tlcikgewog\nICAgICAgICAgICAvLyB0cnkgewogICAgICAgICAgICAvLyB0cmFja2VyLmNo\nZWNrQ2hhbm5lbE1hdGNoZXModG9waWMsIHN1YnNjcmliZXJJZCwgY2hhbm5l\nbCk7CiAgICAgICAgICAgIC8vIH0gY2F0Y2ggKFB1YlN1YkV4Y2VwdGlvbiBl\nKSB7CiAgICAgICAgICAgIC8vIGNoYW5uZWwud3JpdGUoUHViU3ViUmVzcG9u\nc2VVdGlscy5nZXRSZXNwb25zZUZvckV4Y2VwdGlvbihlLAogICAgICAgICAg\nICAvLyByZXF1ZXN0LmdldFR4bklkKCkpKTsKICAgICAgICAgICAgLy8gcmV0\ndXJuOwogICAgICAgICAgICAvLyB9CgogICAgICAgICAgICBmaW5hbCBDaGFu\nbmVsIHN1YnNjcmliZWRDaGFubmVsID0gdHJhY2tlci5nZXRDaGFubmVsKHRv\ncGljLCBzdWJzY3JpYmVySWQpOwoKICAgICAgICAgICAgaWYgKHN1YnNjcmli\nZWRDaGFubmVsID09IG51bGwpIHsKICAgICAgICAgICAgICAgIGNoYW5uZWwu\nd3JpdGUoUHViU3ViUmVzcG9uc2VVdGlscy5nZXRSZXNwb25zZUZvckV4Y2Vw\ndGlvbigKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBQ\ndWJTdWJFeGNlcHRpb24uQ2xpZW50Tm90U3Vic2NyaWJlZEV4Y2VwdGlvbigi\nbm8gc3Vic2NyaXB0aW9uIHRvIHN0YXJ0IGRlbGl2ZXJ5IG9uIiksCiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LmdldFR4bklk\nKCkpKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoK\nICAgICAgICAgICAgTWVzc2FnZUhhbmRsZXIgaGFuZGxlciA9IG5ldyBNZXNz\nYWdlSGFuZGxlcigpIHsKICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAg\nICAgICAgICAgICAgcHVibGljIHZvaWQgZGVsaXZlcihCeXRlU3RyaW5nIHRv\ncGljLCBCeXRlU3RyaW5nIHN1YnNjcmliZXJJZCwgTWVzc2FnZSBtc2csCiAg\nICAgICAgICAgICAgICBmaW5hbCBDYWxsYmFjazxWb2lkPiBjYWxsYmFjaywg\nZmluYWwgT2JqZWN0IGNvbnRleHQpIHsKCiAgICAgICAgICAgICAgICAgICAg\nUHViU3ViUmVzcG9uc2UgcmVzcG9uc2UgPSBQdWJTdWJSZXNwb25zZS5uZXdC\ndWlsZGVyKCkuc2V0UHJvdG9jb2xWZXJzaW9uKAogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFByb3RvY29sVmVy\nc2lvbi5WRVJTSU9OX09ORSkuc2V0U3RhdHVzQ29kZShTdGF0dXNDb2RlLlNV\nQ0NFU1MpLnNldFR4bklkKDApLnNldE1lc3NhZ2UobXNnKQogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldFRvcGlj\nKHRvcGljKS5zZXRTdWJzY3JpYmVySWQoc3Vic2NyaWJlcklkKS5idWlsZCgp\nOwoKICAgICAgICAgICAgICAgICAgICBDaGFubmVsRnV0dXJlIGZ1dHVyZSA9\nIHN1YnNjcmliZWRDaGFubmVsLndyaXRlKHJlc3BvbnNlKTsKCiAgICAgICAg\nICAgICAgICAgICAgZnV0dXJlLmFkZExpc3RlbmVyKG5ldyBDaGFubmVsRnV0\ndXJlTGlzdGVuZXIoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIEBPdmVy\ncmlkZQogICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBvcGVy\nYXRpb25Db21wbGV0ZShDaGFubmVsRnV0dXJlIGZ1dHVyZSkgdGhyb3dzIEV4\nY2VwdGlvbiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZ1\ndHVyZS5pc1N1Y2Nlc3MoKSkgewogICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIC8vIGlnbm9yaW5nIHRoaXMgZmFpbHVyZSwgYmVjYXVzZSB0aGlz\nIHdpbGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvbmx5\nIGhhcHBlbiBkdWUgdG8gY2hhbm5lbCBkaXNjb25uZWN0LgogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIC8vIENoYW5uZWwgZGlzY29ubmVjdCB3\naWxsIGluIHR1cm4gc3RvcAogICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIC8vIGRlbGl2ZXJ5LCBhbmQgc3RvcCB0aGVzZSBlcnJvcnMKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAg\nICAgLy8gVGVsbCB0aGUgaGVkd2lnIGNsaWVudCwgdGhhdCBpdCBjYW4gc2Vu\nZCBtZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbW9yZSBtZXNz\nYWdlcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sub3Bl\ncmF0aW9uRmluaXNoZWQoY29udGV4dCwgbnVsbCk7CiAgICAgICAgICAgICAg\nICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAg\nICAgICAgIH0KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGNoYW5uZWwu\nd3JpdGUoUHViU3ViUmVzcG9uc2VVdGlscy5nZXRTdWNjZXNzUmVzcG9uc2Uo\ncmVxdWVzdC5nZXRUeG5JZCgpKSk7CgogICAgICAgICAgICB0cnkgewogICAg\nICAgICAgICAgICAgc3Vic2NyaWJlci5zdGFydERlbGl2ZXJ5KHRvcGljLCBz\ndWJzY3JpYmVySWQsIGhhbmRsZXIpOwogICAgICAgICAgICB9IGNhdGNoIChD\nbGllbnROb3RTdWJzY3JpYmVkRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAg\nICAgIC8vIFRoaXMgc2hvdWxkIG5vdCBoYXBwZW4sIHNpbmNlIHdlIGFscmVh\nZHkgY2hlY2tlZCB0aGUgY29ycmVjdAogICAgICAgICAgICAgICAgLy8gY2hh\nbm5lbCBhbmQgc28gb24KICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcigi\nVW5leHBlY3RlZDogTm8gc3Vic2NyaXB0aW9uIHdoZW4gYXR0ZW1wdGluZyB0\nbyBzdGFydCBkZWxpdmVyeSIsIGUpOwogICAgICAgICAgICAgICAgdGhyb3cg\nbmV3IFJ1bnRpbWVFeGNlcHRpb24oZSk7CiAgICAgICAgICAgIH0gY2F0Y2gg\nKEFscmVhZHlTdGFydERlbGl2ZXJ5RXhjZXB0aW9uIGUpIHsKICAgICAgICAg\nICAgICAgIGxvZ2dlci5lcnJvcigiVW5leHBlY3RlZDogQWxyZWFkeSBzdGFy\ndCBkZWxpdmVyeSB3aGVuIGF0dGVtcHRpbmcgdG8gc3RhcnQgZGVsaXZlcnki\nLCBlKTsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0\naW9uKGUpOwogICAgICAgICAgICB9CgogICAgICAgIH0KCiAgICB9Cgp9Cg==\n","encoding":"base64"}

