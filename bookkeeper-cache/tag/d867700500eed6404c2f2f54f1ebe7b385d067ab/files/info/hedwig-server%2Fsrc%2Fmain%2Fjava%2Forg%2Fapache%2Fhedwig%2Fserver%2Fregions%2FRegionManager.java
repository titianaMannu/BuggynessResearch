{"sha":"060560d71089fe3a99b605f54b5039cdc851cef1","node_id":"MDQ6QmxvYjE1NzU5NTY6MDYwNTYwZDcxMDg5ZmUzYTk5YjYwNWY1NGI1MDM5Y2RjODUxY2VmMQ==","size":16996,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/060560d71089fe3a99b605f54b5039cdc851cef1","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIucmVnaW9uczsKCmltcG9y\ndCBqYXZhLnV0aWwuQXJyYXlMaXN0OwppbXBvcnQgamF2YS51dGlsLkhhc2hN\nYXA7CmltcG9ydCBqYXZhLnV0aWwuSGFzaFNldDsKaW1wb3J0IGphdmEudXRp\nbC5TZXQ7CmltcG9ydCBqYXZhLnV0aWwuVGltZXI7CmltcG9ydCBqYXZhLnV0\naWwuVGltZXJUYXNrOwppbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuQ29u\nY3VycmVudEhhc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5D\nb25jdXJyZW50TWFwOwppbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuU2No\nZWR1bGVkRXhlY3V0b3JTZXJ2aWNlOwppbXBvcnQgamF2YS51dGlsLmNvbmN1\ncnJlbnQuQ291bnREb3duTGF0Y2g7CgppbXBvcnQgb3JnLnNsZjRqLkxvZ2dl\ncjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJGYWN0b3J5OwppbXBvcnQgb3Jn\nLmFwYWNoZS56b29rZWVwZXIuWm9vS2VlcGVyOwoKaW1wb3J0IGNvbS5nb29n\nbGUucHJvdG9idWYuQnl0ZVN0cmluZzsKaW1wb3J0IG9yZy5hcGFjaGUuaGVk\nd2lnLmNsaWVudC5hcGkuTWVzc2FnZUhhbmRsZXI7CmltcG9ydCBvcmcuYXBh\nY2hlLmhlZHdpZy5jbGllbnQuZXhjZXB0aW9ucy5BbHJlYWR5U3RhcnREZWxp\ndmVyeUV4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmNsaWVu\ndC5uZXR0eS5IZWR3aWdTdWJzY3JpYmVyOwppbXBvcnQgb3JnLmFwYWNoZS5o\nZWR3aWcuZXhjZXB0aW9ucy5QdWJTdWJFeGNlcHRpb247CmltcG9ydCBvcmcu\nYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5QdWJTdWJQcm90b2NvbC5NZXNzYWdl\nOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcucHJvdG9jb2wuUHViU3ViUHJv\ndG9jb2wuTWVzc2FnZVNlcUlkOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcu\ncHJvdG9jb2wuUHViU3ViUHJvdG9jb2wuUmVnaW9uU3BlY2lmaWNTZXFJZDsK\naW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnByb3RvY29sLlB1YlN1YlByb3Rv\nY29sLlN1YnNjcmliZVJlcXVlc3QuQ3JlYXRlT3JBdHRhY2g7CmltcG9ydCBv\ncmcuYXBhY2hlLmhlZHdpZy5wcm90b2V4dGVuc2lvbnMuU3Vic2NyaXB0aW9u\nU3RhdGVVdGlsczsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnNlcnZlci5j\nb21tb24uU2VydmVyQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUu\naGVkd2lnLnNlcnZlci5jb21tb24uVG9waWNPcFF1ZXVlcjsKaW1wb3J0IG9y\nZy5hcGFjaGUuaGVkd2lnLnNlcnZlci5wZXJzaXN0ZW5jZS5QZXJzaXN0UmVx\ndWVzdDsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnNlcnZlci5wZXJzaXN0\nZW5jZS5QZXJzaXN0ZW5jZU1hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLmhl\nZHdpZy5zZXJ2ZXIuc3Vic2NyaXB0aW9ucy5TdWJzY3JpcHRpb25FdmVudExp\nc3RlbmVyOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcudXRpbC5DYWxsYmFj\nazsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnV0aWwuQ2FsbGJhY2tVdGls\nczsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnV0aWwuSGVkd2lnU29ja2V0\nQWRkcmVzczsKCnB1YmxpYyBjbGFzcyBSZWdpb25NYW5hZ2VyIGltcGxlbWVu\ndHMgU3Vic2NyaXB0aW9uRXZlbnRMaXN0ZW5lciB7CgogICAgcHJvdGVjdGVk\nIHN0YXRpYyBmaW5hbCBMb2dnZXIgTE9HR0VSID0gTG9nZ2VyRmFjdG9yeS5n\nZXRMb2dnZXIoUmVnaW9uTWFuYWdlci5jbGFzcyk7CgogICAgcHJpdmF0ZSBm\naW5hbCBCeXRlU3RyaW5nIG15U3ViSWQ7CiAgICBwcml2YXRlIGZpbmFsIFBl\ncnNpc3RlbmNlTWFuYWdlciBwbTsKICAgIHByaXZhdGUgZmluYWwgQXJyYXlM\naXN0PEhlZHdpZ0h1YkNsaWVudD4gY2xpZW50cyA9IG5ldyBBcnJheUxpc3Q8\nSGVkd2lnSHViQ2xpZW50PigpOwogICAgcHJpdmF0ZSBmaW5hbCBUb3BpY09w\nUXVldWVyIHF1ZXVlOwogICAgcHJpdmF0ZSBmaW5hbCBCeXRlU3RyaW5nIG15\nUmVnaW9uOwogICAgLy8gVGltZXIgZm9yIHJ1bm5pbmcgYSByZXRyeSB0aHJl\nYWQgdGFzayB0byByZXRyeSByZW1vdGUtc3Vic2NyaXB0aW9uIGluIGFzeW5j\naHJvbm91cyBtb2RlLgogICAgcHJpdmF0ZSBmaW5hbCBUaW1lciB0aW1lciA9\nIG5ldyBUaW1lcih0cnVlKTsKICAgIHByaXZhdGUgZmluYWwgSGFzaE1hcDxI\nZWR3aWdIdWJDbGllbnQsIFNldDxCeXRlU3RyaW5nPj4gcmV0cnlNYXAgPQog\nICAgICAgICAgICBuZXcgSGFzaE1hcDxIZWR3aWdIdWJDbGllbnQsIFNldDxC\neXRlU3RyaW5nPj4oKTsKICAgIC8vIG1hcCB1c2VkIHRvIHRyYWNrIHdoZXRo\nZXIgYSB0b3BpYyBpcyByZW1vdGUgc3Vic2NyaWJlZCBvciBub3QKICAgIHBy\naXZhdGUgZmluYWwgQ29uY3VycmVudE1hcDxCeXRlU3RyaW5nLCBCb29sZWFu\nPiB0b3BpY1N0YXR1c2VzID0KICAgICAgICAgICAgbmV3IENvbmN1cnJlbnRI\nYXNoTWFwPEJ5dGVTdHJpbmcsIEJvb2xlYW4+KCk7CgogICAgLyoqCiAgICAg\nKiBUaGlzIGlzIHRoZSBUaW1lciBUYXNrIGZvciByZXRyeWluZyBzdWJzY3Jp\nYmluZyB0byByZW1vdGUgcmVnaW9ucwogICAgICovCiAgICBjbGFzcyBSZXRy\neVN1YnNjcmliZVRhc2sgZXh0ZW5kcyBUaW1lclRhc2sgewoKICAgICAgICBA\nT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB7CiAgICAgICAg\nICAgIFNldDxIZWR3aWdIdWJDbGllbnQ+IGh1YkNsaWVudHMgPSBuZXcgSGFz\naFNldDxIZWR3aWdIdWJDbGllbnQ+KCk7CiAgICAgICAgICAgIHN5bmNocm9u\naXplZCAocmV0cnlNYXApIHsKICAgICAgICAgICAgICAgIGh1YkNsaWVudHMu\nYWRkQWxsKHJldHJ5TWFwLmtleVNldCgpKTsKICAgICAgICAgICAgfQogICAg\nICAgICAgICBpZiAoaHViQ2xpZW50cy5pc0VtcHR5KCkpIHsKICAgICAgICAg\nICAgICAgIGlmIChMT0dHRVIuaXNEZWJ1Z0VuYWJsZWQoKSkgewogICAgICAg\nICAgICAgICAgICAgIExPR0dFUi5kZWJ1ZygiWyIgKyBteVJlZ2lvbi50b1N0\ncmluZ1V0ZjgoKSArICJdIFRoZXJlIGlzIG5vIGh1YiBjbGllbnQgbmVlZHMg\ndG8gcmV0cnkgc3Vic2NyaXB0aW9ucy4iKTsKICAgICAgICAgICAgICAgIH0K\nICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAg\nICAgICBmb3IgKEhlZHdpZ0h1YkNsaWVudCBjbGllbnQgOiBodWJDbGllbnRz\nKSB7CiAgICAgICAgICAgICAgICBTZXQ8Qnl0ZVN0cmluZz4gdG9waWNzID0g\nbnVsbDsKICAgICAgICAgICAgICAgIHN5bmNocm9uaXplZCAocmV0cnlNYXAp\nIHsKICAgICAgICAgICAgICAgICAgICB0b3BpY3MgPSByZXRyeU1hcC5yZW1v\ndmUoY2xpZW50KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAg\nIGlmIChudWxsID09IHRvcGljcyB8fCB0b3BpY3MuaXNFbXB0eSgpKSB7CiAg\nICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICB9\nCiAgICAgICAgICAgICAgICBmaW5hbCBDb3VudERvd25MYXRjaCBkb25lID0g\nbmV3IENvdW50RG93bkxhdGNoKDEpOwogICAgICAgICAgICAgICAgQ2FsbGJh\nY2s8Vm9pZD4gcG9zdENiID0gbmV3IENhbGxiYWNrPFZvaWQ+KCkgewogICAg\nICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICAgICAgICAg\nIHB1YmxpYyB2b2lkIG9wZXJhdGlvbkZpbmlzaGVkKE9iamVjdCBjdHgsCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICBWb2lkIHJlc3VsdE9mT3BlcmF0\naW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmlzaCgpOwogICAg\nICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBAT3ZlcnJp\nZGUKICAgICAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBvcGVyYXRpb25G\nYWlsZWQoT2JqZWN0IGN0eCwKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIFB1YlN1YkV4Y2VwdGlvbiBleGNlcHRpb24pIHsKICAgICAgICAgICAgICAg\nICAgICAgICAgZmluaXNoKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAg\nICAgICAgICAgICAgICAgIHZvaWQgZmluaXNoKCkgewogICAgICAgICAgICAg\nICAgICAgICAgICBkb25lLmNvdW50RG93bigpOwogICAgICAgICAgICAgICAg\nICAgIH0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBDYWxs\nYmFjazxWb2lkPiBtY2IgPSBDYWxsYmFja1V0aWxzLm11bHRpQ2FsbGJhY2so\ndG9waWNzLnNpemUoKSwgcG9zdENiLCBudWxsKTsKICAgICAgICAgICAgICAg\nIGZvciAoQnl0ZVN0cmluZyB0b3BpYyA6IHRvcGljcykgewogICAgICAgICAg\nICAgICAgICAgIEJvb2xlYW4gZG9SZW1vdGVTdWJzY3JpYmUgPSB0b3BpY1N0\nYXR1c2VzLmdldCh0b3BpYyk7CiAgICAgICAgICAgICAgICAgICAgLy8gdG9w\naWMgaGFzIGJlZW4gcmVtb3ZlZCwgbm8gcmV0cnkgYWdhaW4KICAgICAgICAg\nICAgICAgICAgICBpZiAobnVsbCA9PSBkb1JlbW90ZVN1YnNjcmliZSkgewog\nICAgICAgICAgICAgICAgICAgICAgICBtY2Iub3BlcmF0aW9uRmluaXNoZWQo\nbnVsbCwgbnVsbCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVl\nOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBy\nZXRyeVN1YnNjcmliZShjbGllbnQsIHRvcGljLCBtY2IpOwogICAgICAgICAg\nICAgICAgfQogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAg\nICAgICBkb25lLmF3YWl0KCk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChJ\nbnRlcnJ1cHRlZEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAgICAgICAg\nTE9HR0VSLndhcm4oIkV4Y2VwdGlvbiBkdXJpbmcgcmV0cnlpbmcgcmVtb3Rl\nIHN1YnNjcmlwdGlvbnMgOiAiLCBlKTsKICAgICAgICAgICAgICAgIH0KICAg\nICAgICAgICAgfQogICAgICAgIH0KCiAgICB9CgogICAgcHVibGljIFJlZ2lv\nbk1hbmFnZXIoZmluYWwgUGVyc2lzdGVuY2VNYW5hZ2VyIHBtLCBmaW5hbCBT\nZXJ2ZXJDb25maWd1cmF0aW9uIGNmZywgZmluYWwgWm9vS2VlcGVyIHprLAog\nICAgICAgICAgICAgICAgICAgICAgICAgU2NoZWR1bGVkRXhlY3V0b3JTZXJ2\naWNlIHNjaGVkdWxlciwgSGVkd2lnSHViQ2xpZW50RmFjdG9yeSBodWJDbGll\nbnRGYWN0b3J5KSB7CiAgICAgICAgdGhpcy5wbSA9IHBtOwogICAgICAgIG15\nU3ViSWQgPSBCeXRlU3RyaW5nLmNvcHlGcm9tVXRmOChTdWJzY3JpcHRpb25T\ndGF0ZVV0aWxzLkhVQl9TVUJTQ1JJQkVSX1BSRUZJWCArIGNmZy5nZXRNeVJl\nZ2lvbigpKTsKICAgICAgICBxdWV1ZSA9IG5ldyBUb3BpY09wUXVldWVyKHNj\naGVkdWxlcik7CiAgICAgICAgZm9yIChmaW5hbCBTdHJpbmcgaHViIDogY2Zn\nLmdldFJlZ2lvbnMoKSkgewogICAgICAgICAgICBjbGllbnRzLmFkZChodWJD\nbGllbnRGYWN0b3J5LmNyZWF0ZShuZXcgSGVkd2lnU29ja2V0QWRkcmVzcyho\ndWIpKSk7CiAgICAgICAgfQogICAgICAgIG15UmVnaW9uID0gY2ZnLmdldE15\nUmVnaW9uQnl0ZVN0cmluZygpOwogICAgICAgIGlmIChjZmcuZ2V0UmV0cnlS\nZW1vdGVTdWJzY3JpYmVUaHJlYWRSdW5JbnRlcnZhbCgpID4gMCkgewogICAg\nICAgICAgICB0aW1lci5zY2hlZHVsZShuZXcgUmV0cnlTdWJzY3JpYmVUYXNr\nKCksIDAsIGNmZy5nZXRSZXRyeVJlbW90ZVN1YnNjcmliZVRocmVhZFJ1bklu\ndGVydmFsKCkpOwogICAgICAgIH0KICAgIH0KCiAgICBwcml2YXRlIHZvaWQg\ncHV0VG9waWNJblJldHJ5TWFwKEhlZHdpZ0h1YkNsaWVudCBjbGllbnQsIEJ5\ndGVTdHJpbmcgdG9waWMpIHsKICAgICAgICBpZiAoTE9HR0VSLmlzRGVidWdF\nbmFibGVkKCkpIHsKICAgICAgICAgICAgTE9HR0VSLmRlYnVnKCJbIiArIG15\nUmVnaW9uLnRvU3RyaW5nVXRmOCgpICsgIl0gUHV0IHRvcGljIGluIHJldHJ5\nIG1hcCA6ICIgKyB0b3BpYy50b1N0cmluZ1V0ZjgoKSk7CiAgICAgICAgfQog\nICAgICAgIHN5bmNocm9uaXplZCAocmV0cnlNYXApIHsKICAgICAgICAgICAg\nU2V0PEJ5dGVTdHJpbmc+IHRvcGljcyA9IHJldHJ5TWFwLmdldChjbGllbnQp\nOwogICAgICAgICAgICBpZiAobnVsbCA9PSB0b3BpY3MpIHsKICAgICAgICAg\nICAgICAgIHRvcGljcyA9IG5ldyBIYXNoU2V0PEJ5dGVTdHJpbmc+KCk7CiAg\nICAgICAgICAgICAgICByZXRyeU1hcC5wdXQoY2xpZW50LCB0b3BpY3MpOwog\nICAgICAgICAgICB9CiAgICAgICAgICAgIHRvcGljcy5hZGQodG9waWMpOwog\nICAgICAgIH0KICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBEbyByZW1vdGUg\nc3Vic2NyaWJlIGZvciBhIHNwZWNpZmllZCB0b3BpYy4KICAgICAqCiAgICAg\nKiBAcGFyYW0gY2xpZW50CiAgICAgKiAgICAgICAgICBIZWR3aWcgSHViIENs\naWVudCB0byBzdWJzY3JpYmUgcmVtb3RlIHRvcGljLgogICAgICogQHBhcmFt\nIHRvcGljCiAgICAgKiAgICAgICAgICBUb3BpYyB0byBzdWJzY3JpYmUuCiAg\nICAgKiBAcGFyYW0gc3luY2hyb25vdXMKICAgICAqICAgICAgICAgIFdoZXRo\nZXIgdG8gd2FpdCBmb3IgdGhlIGNhbGxiYWNrIG9mIHN1YnNjcmlwdGlvbi4K\nICAgICAqIEBwYXJhbSBtY2IKICAgICAqICAgICAgICAgIENhbGxiYWNrIHRv\nIHRyaWdnZXIgYWZ0ZXIgc3Vic2NyaXB0aW9uIGlzIGRvbmUuCiAgICAgKiBA\ncGFyYW0gY29udGV4CiAgICAgKiAgICAgICAgICBDYWxsYmFjayBjb250ZXh0\nCiAgICAgKi8KICAgIHByaXZhdGUgdm9pZCBkb1JlbW90ZVN1YnNjcmliZShm\naW5hbCBIZWR3aWdIdWJDbGllbnQgY2xpZW50LCBmaW5hbCBCeXRlU3RyaW5n\nIHRvcGljLCBmaW5hbCBib29sZWFuIHN5bmNocm9ub3VzLAogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsIENhbGxiYWNrPFZvaWQ+\nIG1jYiwgZmluYWwgT2JqZWN0IGNvbnRleHQpIHsKICAgICAgICBmaW5hbCBI\nZWR3aWdTdWJzY3JpYmVyIHN1YiA9IGNsaWVudC5nZXRTdWJzY3JpYmVyKCk7\nCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKHN1Yi5oYXNTdWJzY3Jp\ncHRpb24odG9waWMsIG15U3ViSWQpKSB7CiAgICAgICAgICAgICAgICBpZiAo\nTE9HR0VSLmlzRGVidWdFbmFibGVkKCkpIHsKICAgICAgICAgICAgICAgICAg\nICBMT0dHRVIuZGVidWcoIlsiICsgbXlSZWdpb24udG9TdHJpbmdVdGY4KCkg\nKyAiXSBjcm9zcy1yZWdpb24gc3Vic2NyaXB0aW9uIGZvciB0b3BpYyAiCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgdG9waWMudG9TdHJp\nbmdVdGY4KCkgKyAiIGhhcyBleGlzdGVkIGJlZm9yZS4iKTsKICAgICAgICAg\nICAgICAgIH0KICAgICAgICAgICAgICAgIG1jYi5vcGVyYXRpb25GaW5pc2hl\nZChudWxsLCBudWxsKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAg\nICAgICAgfQogICAgICAgIH0gY2F0Y2ggKFB1YlN1YkV4Y2VwdGlvbiBlKSB7\nCiAgICAgICAgICAgIExPR0dFUi5lcnJvcigiWyIgKyBteVJlZ2lvbi50b1N0\ncmluZ1V0ZjgoKSArICJdIGNoZWNraW5nIGNyb3NzLXJlZ2lvbiBzdWJzY3Jp\ncHRpb24gZm9yIHRvcGljICIKICAgICAgICAgICAgICAgICAgICAgICAgICsg\ndG9waWMudG9TdHJpbmdVdGY4KCkgKyAiIGZhaWxlZCAodGhpcyBpcyBzaG91\nbGQgbm90IGhhcHBlbik6ICIsIGUpOwogICAgICAgICAgICBtY2Iub3BlcmF0\naW9uRmFpbGVkKGNvbnRleHQsIGUpOwogICAgICAgICAgICByZXR1cm47CiAg\nICAgICAgfQogICAgICAgIHN1Yi5hc3luY1N1YnNjcmliZSh0b3BpYywgbXlT\ndWJJZCwgQ3JlYXRlT3JBdHRhY2guQ1JFQVRFX09SX0FUVEFDSCwgbmV3IENh\nbGxiYWNrPFZvaWQ+KCkgewogICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAg\nICAgICAgcHVibGljIHZvaWQgb3BlcmF0aW9uRmluaXNoZWQoT2JqZWN0IGN0\neCwgVm9pZCByZXN1bHRPZk9wZXJhdGlvbikgewogICAgICAgICAgICAgICAg\naWYgKExPR0dFUi5pc0RlYnVnRW5hYmxlZCgpKQogICAgICAgICAgICAgICAg\nICAgIExPR0dFUi5kZWJ1ZygiWyIgKyBteVJlZ2lvbi50b1N0cmluZ1V0Zjgo\nKSArICJdIGNyb3NzLXJlZ2lvbiBzdWJzY3JpcHRpb24gZG9uZSBmb3IgdG9w\naWMgIiArIHRvcGljLnRvU3RyaW5nVXRmOCgpKTsKICAgICAgICAgICAgICAg\nIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgc3ViLnN0YXJ0RGVsaXZlcnko\ndG9waWMsIG15U3ViSWQsIG5ldyBNZXNzYWdlSGFuZGxlcigpIHsKICAgICAg\nICAgICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICAg\nICAgICAgIHB1YmxpYyB2b2lkIGRlbGl2ZXIoZmluYWwgQnl0ZVN0cmluZyB0\nb3BpYywgQnl0ZVN0cmluZyBzdWJzY3JpYmVySWQsIE1lc3NhZ2UgbXNnLAog\nICAgICAgICAgICAgICAgICAgICAgICBmaW5hbCBDYWxsYmFjazxWb2lkPiBj\nYWxsYmFjaywgZmluYWwgT2JqZWN0IGNvbnRleHQpIHsKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIC8vIFdoZW4gbWVzc2FnZXMgYXJlIGZpcnN0IHB1\nYmxpc2hlZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9jYWxs\neSwgdGhlIFB1Ymxpc2hIYW5kbGVyIHNldHMgdGhlCiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAvLyBzb3VyY2UgcmVnaW9uIGluIHRoZSBNZXNzYWdl\nLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1zZy5oYXNTcmNS\nZWdpb24oKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1l\nc3NhZ2UubmV3QnVpbGRlcihtc2cpLnNldE1zZ0lkKAogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VxSWQubmV3QnVpbGRl\ncihtc2cuZ2V0TXNnSWQoKSkuYWRkUmVtb3RlQ29tcG9uZW50cygKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlZ2lvblNwZWNp\nZmljU2VxSWQubmV3QnVpbGRlcigpLnNldFJlZ2lvbigKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtc2cuZ2V0U3JjUmVn\naW9uKCkpLnNldFNlcUlkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIG1zZy5nZXRNc2dJZCgpLmdldExvY2FsQ29tcG9u\nZW50KCkpKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICBwbS5wZXJzaXN0TWVzc2FnZShuZXcg\nUGVyc2lzdFJlcXVlc3QodG9waWMsIG1zZywgbmV3IENhbGxiYWNrPExvbmc+\nKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBPdmVycmlk\nZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lk\nIG9wZXJhdGlvbkZpbmlzaGVkKE9iamVjdCBjdHgsIExvbmcgcmVzdWx0T2ZP\ncGVyYXRpb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgaWYgKExPR0dFUi5pc0RlYnVnRW5hYmxlZCgpKQogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgTE9HR0VSLmRlYnVnKCJbIiAr\nIG15UmVnaW9uLnRvU3RyaW5nVXRmOCgpICsgIl0gY3Jvc3MtcmVnaW9uIHJl\nY3YtZndkIHN1Y2NlZWRlZCBmb3IgdG9waWMgIgogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgdG9waWMu\ndG9TdHJpbmdVdGY4KCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICBjYWxsYmFjay5vcGVyYXRpb25GaW5pc2hlZChjb250ZXh0LCBu\ndWxsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9wZXJhdGlv\nbkZhaWxlZChPYmplY3QgY3R4LCBQdWJTdWJFeGNlcHRpb24gZXhjZXB0aW9u\nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChM\nT0dHRVIuaXNEZWJ1Z0VuYWJsZWQoKSkKICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIExPR0dFUi5lcnJvcigiWyIgKyBteVJlZ2lv\nbi50b1N0cmluZ1V0ZjgoKSArICJdIGNyb3NzLXJlZ2lvbiByZWN2LWZ3ZCBm\nYWlsZWQgZm9yIHRvcGljICIKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICArIHRvcGljLnRvU3RyaW5nVXRm\nOCgpLCBleGNlcHRpb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICBjYWxsYmFjay5vcGVyYXRpb25GYWlsZWQoY29udGV4dCwgZXhj\nZXB0aW9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBudWxsKSk7CiAgICAgICAg\nICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAg\nICAgICAgICAgICAgICAgICBpZiAoTE9HR0VSLmlzRGVidWdFbmFibGVkKCkp\nCiAgICAgICAgICAgICAgICAgICAgICAgIExPR0dFUi5kZWJ1ZygiWyIgKyBt\neVJlZ2lvbi50b1N0cmluZ1V0ZjgoKSArICJdIGNyb3NzLXJlZ2lvbiBzdGFy\ndC1kZWxpdmVyeSBzdWNjZWVkZWQgZm9yIHRvcGljICIKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICsgdG9waWMudG9TdHJpbmdVdGY4\nKCkpOwogICAgICAgICAgICAgICAgICAgIG1jYi5vcGVyYXRpb25GaW5pc2hl\nZChjdHgsIG51bGwpOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoUHViU3Vi\nRXhjZXB0aW9uIGV4KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKExPR0dF\nUi5pc0RlYnVnRW5hYmxlZCgpKQogICAgICAgICAgICAgICAgICAgICAgICBM\nT0dHRVIuZXJyb3IoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIlsiICsgbXlSZWdpb24udG9TdHJpbmdVdGY4KCkgKyAiXSBjcm9zcy1yZWdp\nb24gc3RhcnQtZGVsaXZlcnkgZmFpbGVkIGZvciB0b3BpYyAiICsgdG9waWMu\ndG9TdHJpbmdVdGY4KCksIGV4KTsKICAgICAgICAgICAgICAgICAgICBtY2Iu\nb3BlcmF0aW9uRmFpbGVkKGN0eCwgZXgpOwogICAgICAgICAgICAgICAgfSBj\nYXRjaCAoQWxyZWFkeVN0YXJ0RGVsaXZlcnlFeGNlcHRpb24gZXgpIHsKICAg\nICAgICAgICAgICAgICAgICBMT0dHRVIuZXJyb3IoIlsiICsgbXlSZWdpb24u\ndG9TdHJpbmdVdGY4KCkgKyAiXSBjcm9zcy1yZWdpb24gc3RhcnQtZGVsaXZl\ncnkgZmFpbGVkIGZvciB0b3BpYyAiCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICArIHRvcGljLnRvU3RyaW5nVXRmOCgpLCBleCk7CiAgICAgICAg\nICAgICAgICAgICAgbWNiLm9wZXJhdGlvbkZhaWxlZChjdHgsIG5ldyBQdWJT\ndWJFeGNlcHRpb24uVW5leHBlY3RlZENvbmRpdGlvbkV4Y2VwdGlvbigiY3Jv\nc3MtcmVnaW9uIHN0YXJ0LWRlbGl2ZXJ5IGZhaWxlZCA6ICIgKyBleC5nZXRN\nZXNzYWdlKCkpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoK\nICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyB2b2lk\nIG9wZXJhdGlvbkZhaWxlZChPYmplY3QgY3R4LCBQdWJTdWJFeGNlcHRpb24g\nZXhjZXB0aW9uKSB7CiAgICAgICAgICAgICAgICBpZiAoTE9HR0VSLmlzRGVi\ndWdFbmFibGVkKCkpCiAgICAgICAgICAgICAgICAgICAgTE9HR0VSLmVycm9y\nKCJbIiArIG15UmVnaW9uLnRvU3RyaW5nVXRmOCgpICsgIl0gY3Jvc3MtcmVn\naW9uIHN1YnNjcmliZSBmYWlsZWQgZm9yIHRvcGljICIgKyB0b3BpYy50b1N0\ncmluZ1V0ZjgoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nZXhjZXB0aW9uKTsKICAgICAgICAgICAgICAgIGlmICghc3luY2hyb25vdXMp\nIHsKICAgICAgICAgICAgICAgICAgICBwdXRUb3BpY0luUmV0cnlNYXAoY2xp\nZW50LCB0b3BpYyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAg\nICBtY2Iub3BlcmF0aW9uRmFpbGVkKGN0eCwgZXhjZXB0aW9uKTsKICAgICAg\nICAgICAgfQogICAgICAgIH0sIG51bGwpOwogICAgfQoKICAgIHByaXZhdGUg\ndm9pZCByZXRyeVN1YnNjcmliZShmaW5hbCBIZWR3aWdIdWJDbGllbnQgY2xp\nZW50LCBmaW5hbCBCeXRlU3RyaW5nIHRvcGljLCBmaW5hbCBDYWxsYmFjazxW\nb2lkPiBjYikgewogICAgICAgIGlmIChMT0dHRVIuaXNEZWJ1Z0VuYWJsZWQo\nKSkgewogICAgICAgICAgICBMT0dHRVIuZGVidWcoIlsiICsgbXlSZWdpb24u\ndG9TdHJpbmdVdGY4KCkgKyAiXSBSZXRyeSByZW1vdGUgc3Vic2NyaWJlIHRv\ncGljIDogIiArIHRvcGljLnRvU3RyaW5nVXRmOCgpKTsKICAgICAgICB9CiAg\nICAgICAgcXVldWUucHVzaEFuZE1heWJlUnVuKHRvcGljLCBxdWV1ZS5uZXcg\nQXN5bmNocm9ub3VzT3A8Vm9pZD4odG9waWMsIGNiLCBudWxsKSB7CiAgICAg\nICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICBwdWJsaWMgdm9pZCBydW4o\nKSB7CiAgICAgICAgICAgICAgICBCb29sZWFuIGRvUmVtb3RlU3Vic2NyaWJl\nID0gdG9waWNTdGF0dXNlcy5nZXQodG9waWMpOwogICAgICAgICAgICAgICAg\nLy8gdG9waWMgaGFzIGJlZW4gcmVtb3ZlZCwgbm8gcmV0cnkgYWdhaW4KICAg\nICAgICAgICAgICAgIGlmIChudWxsID09IGRvUmVtb3RlU3Vic2NyaWJlKSB7\nCiAgICAgICAgICAgICAgICAgICAgY2Iub3BlcmF0aW9uRmluaXNoZWQoY3R4\nLCBudWxsKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAg\nICAgICAgICB9CiAgICAgICAgICAgICAgICBkb1JlbW90ZVN1YnNjcmliZShj\nbGllbnQsIHRvcGljLCBmYWxzZSwgY2IsIGN0eCk7CiAgICAgICAgICAgIH0K\nICAgICAgICB9KTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2\nb2lkIG9uRmlyc3RMb2NhbFN1YnNjcmliZShmaW5hbCBCeXRlU3RyaW5nIHRv\ncGljLCBmaW5hbCBib29sZWFuIHN5bmNocm9ub3VzLCBmaW5hbCBDYWxsYmFj\nazxWb2lkPiBjYikgewogICAgICAgIHRvcGljU3RhdHVzZXMucHV0KHRvcGlj\nLCB0cnVlKTsKICAgICAgICAvLyBXaGVuZXZlciB3ZSBhY3F1aXJlIGEgdG9w\naWMgZHVlIHRvIGEgKGxvY2FsKSBzdWJzY3JpYmUsIHN1YnNjcmliZSBvbgog\nICAgICAgIC8vIGl0IHRvIGFsbCB0aGUgb3RoZXIgcmVnaW9ucyAoY3VycmVu\ndGx5IHVzaW5nIHNpbXBsZSBhbGwtdG8tYWxsCiAgICAgICAgLy8gdG9wb2xv\nZ3kpLgogICAgICAgIHF1ZXVlLnB1c2hBbmRNYXliZVJ1bih0b3BpYywgcXVl\ndWUubmV3IEFzeW5jaHJvbm91c09wPFZvaWQ+KHRvcGljLCBjYiwgbnVsbCkg\newogICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIHZv\naWQgcnVuKCkgewogICAgICAgICAgICAgICAgQ2FsbGJhY2s8Vm9pZD4gcG9z\ndENiID0gc3luY2hyb25vdXMgPyBjYiA6IENhbGxiYWNrVXRpbHMubG9nZ2Vy\nKExPR0dFUiwgCiAgICAgICAgICAgICAgICAgICAgICAgICJbIiArIG15UmVn\naW9uLnRvU3RyaW5nVXRmOCgpICsgIl0gYWxsIGNyb3NzLXJlZ2lvbiBzdWJz\nY3JpcHRpb25zIHN1Y2NlZWRlZCIsIAogICAgICAgICAgICAgICAgICAgICAg\nICAiWyIgKyBteVJlZ2lvbi50b1N0cmluZ1V0ZjgoKSArICJdIGF0IGxlYXN0\nIG9uZSBjcm9zcy1yZWdpb24gc3Vic2NyaXB0aW9uIGZhaWxlZCIpOwogICAg\nICAgICAgICAgICAgZmluYWwgQ2FsbGJhY2s8Vm9pZD4gbWNiID0gQ2FsbGJh\nY2tVdGlscy5tdWx0aUNhbGxiYWNrKGNsaWVudHMuc2l6ZSgpLCBwb3N0Q2Is\nIGN0eCk7CiAgICAgICAgICAgICAgICBmb3IgKGZpbmFsIEhlZHdpZ0h1YkNs\naWVudCBjbGllbnQgOiBjbGllbnRzKSB7CiAgICAgICAgICAgICAgICAgICAg\nZG9SZW1vdGVTdWJzY3JpYmUoY2xpZW50LCB0b3BpYywgc3luY2hyb25vdXMs\nIG1jYiwgY3R4KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAg\nIGlmICghc3luY2hyb25vdXMpCiAgICAgICAgICAgICAgICAgICAgY2Iub3Bl\ncmF0aW9uRmluaXNoZWQobnVsbCwgbnVsbCk7CiAgICAgICAgICAgIH0KICAg\nICAgICB9KTsKCiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9p\nZCBvbkxhc3RMb2NhbFVuc3Vic2NyaWJlKGZpbmFsIEJ5dGVTdHJpbmcgdG9w\naWMpIHsKICAgICAgICB0b3BpY1N0YXR1c2VzLnJlbW92ZSh0b3BpYyk7CiAg\nICAgICAgLy8gVE9ETyBtYXkgd2FudCB0byBlYXNlIHVwIG9uIHRoZSBlYWdl\nciB1bnN1YnNjcmliZTsgdGhpcyBpcyBkcm9wcGluZwogICAgICAgIC8vIGNy\nb3NzLXJlZ2lvbiBzdWJzY3JpcHRpb25zIEFTQVAKICAgICAgICBxdWV1ZS5w\ndXNoQW5kTWF5YmVSdW4odG9waWMsIHF1ZXVlLm5ldyBBc3luY2hyb25vdXNP\ncDxWb2lkPih0b3BpYywgbmV3IENhbGxiYWNrPFZvaWQ+KCkgewoKICAgICAg\nICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIG9wZXJh\ndGlvbkZpbmlzaGVkKE9iamVjdCBjdHgsIFZvaWQgcmVzdWx0KSB7CiAgICAg\nICAgICAgICAgICBpZiAoTE9HR0VSLmlzRGVidWdFbmFibGVkKCkpCiAgICAg\nICAgICAgICAgICAgICAgTE9HR0VSLmRlYnVnKCJbIiArIG15UmVnaW9uLnRv\nU3RyaW5nVXRmOCgpICsgIl0gY3Jvc3MtcmVnaW9uIHVuc3Vic2NyaWJlcyBz\ndWNjZWVkZWQgZm9yIHRvcGljICIgKyB0b3BpYy50b1N0cmluZ1V0ZjgoKSk7\nCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAg\nICAgICBwdWJsaWMgdm9pZCBvcGVyYXRpb25GYWlsZWQoT2JqZWN0IGN0eCwg\nUHViU3ViRXhjZXB0aW9uIGV4Y2VwdGlvbikgewogICAgICAgICAgICAgICAg\naWYgKExPR0dFUi5pc0RlYnVnRW5hYmxlZCgpKQogICAgICAgICAgICAgICAg\nICAgIExPR0dFUi5lcnJvcigiWyIgKyBteVJlZ2lvbi50b1N0cmluZ1V0Zjgo\nKSArICJdIGNyb3NzLXJlZ2lvbiB1bnN1YnNjcmliZXMgZmFpbGVkIGZvciB0\nb3BpYyAiICsgdG9waWMudG9TdHJpbmdVdGY4KCksIGV4Y2VwdGlvbik7CiAg\nICAgICAgICAgIH0KCiAgICAgICAgfSwgbnVsbCkgewogICAgICAgICAgICBA\nT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkgewogICAg\nICAgICAgICAgICAgQ2FsbGJhY2s8Vm9pZD4gbWNiID0gQ2FsbGJhY2tVdGls\ncy5tdWx0aUNhbGxiYWNrKGNsaWVudHMuc2l6ZSgpLCBjYiwgY3R4KTsKICAg\nICAgICAgICAgICAgIGZvciAoZmluYWwgSGVkd2lnSHViQ2xpZW50IGNsaWVu\ndCA6IGNsaWVudHMpIHsKICAgICAgICAgICAgICAgICAgICBmaW5hbCBIZWR3\naWdTdWJzY3JpYmVyIHN1YiA9IGNsaWVudC5nZXRTdWJzY3JpYmVyKCk7CiAg\nICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAg\nICAgaWYgKCFzdWIuaGFzU3Vic2NyaXB0aW9uKHRvcGljLCBteVN1YklkKSkg\newogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKExPR0dFUi5pc0Rl\nYnVnRW5hYmxlZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgTE9HR0VSLmRlYnVnKCJbIiArIG15UmVnaW9uLnRvU3RyaW5nVXRmOCgp\nICsgIl0gY3Jvc3MtcmVnaW9uIHN1YnNjcmlwdGlvbiBmb3IgdG9waWMgIgog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAr\nIHRvcGljLnRvU3RyaW5nVXRmOCgpICsgIiBoYXMgZXhpc3RlZCBiZWZvcmUu\nIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICBtY2Iub3BlcmF0aW9uRmluaXNoZWQobnVsbCwg\nbnVsbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsK\nICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAg\nIH0gY2F0Y2ggKFB1YlN1YkV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAg\nICAgICAgICAgIExPR0dFUi5lcnJvcigiWyIgKyBteVJlZ2lvbi50b1N0cmlu\nZ1V0ZjgoKSArICJdIGNoZWNraW5nIGNyb3NzLXJlZ2lvbiBzdWJzY3JpcHRp\nb24gZm9yIHRvcGljICIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICsgdG9waWMudG9TdHJpbmdVdGY4KCkgKyAiIGZhaWxlZCAodGhp\ncyBpcyBzaG91bGQgbm90IGhhcHBlbik6ICIsIGUpOwogICAgICAgICAgICAg\nICAgICAgICAgICBtY2Iub3BlcmF0aW9uRmFpbGVkKGN0eCwgZSk7CiAgICAg\nICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAg\nICAgIH0KICAgICAgICAgICAgICAgICAgICBzdWIuYXN5bmNVbnN1YnNjcmli\nZSh0b3BpYywgbXlTdWJJZCwgbWNiLCBudWxsKTsKICAgICAgICAgICAgICAg\nIH0KICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfQoKICAgIC8vIE1l\ndGhvZCB0byBzaHV0ZG93biBhbmQgc3RvcCBhbGwgb2YgdGhlIGNyb3NzLXJl\nZ2lvbiBIZWR3aWcgY2xpZW50cy4KICAgIHB1YmxpYyB2b2lkIHN0b3AoKSB7\nCiAgICAgICAgdGltZXIuY2FuY2VsKCk7CiAgICAgICAgZm9yIChIZWR3aWdI\ndWJDbGllbnQgY2xpZW50IDogY2xpZW50cykgewogICAgICAgICAgICBjbGll\nbnQuY2xvc2UoKTsKICAgICAgICB9CiAgICB9Cgp9Cg==\n","encoding":"base64"}

