{"sha":"523ecdc5d2a2d92b3ee1a9ebba78868feff374a2","node_id":"MDQ6QmxvYjE1NzU5NTY6NTIzZWNkYzVkMmEyZDkyYjNlZTFhOWViYmE3ODg2OGZlZmYzNzRhMg==","size":4914,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/523ecdc5d2a2d92b3ee1a9ebba78868feff374a2","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXI7CgppbXBvcnQgamF2YS51\ndGlsLkxpbmtlZExpc3Q7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKCmltcG9y\ndCBqdW5pdC5mcmFtZXdvcmsuVGVzdENhc2U7CgppbXBvcnQgb3JnLnNsZjRq\nLkxvZ2dlcjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJGYWN0b3J5OwppbXBv\ncnQgb3JnLmp1bml0LkFmdGVyOwppbXBvcnQgb3JnLmp1bml0LkJlZm9yZTsK\nCmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIuY29tbW9uLlNlcnZl\nckNvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2\nZXIubmV0dHkuUHViU3ViU2VydmVyOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3\naWcuc2VydmVyLnBlcnNpc3RlbmNlLkJvb2tLZWVwZXJUZXN0QmFzZTsKCi8q\nKgogKiBUaGlzIGlzIGEgYmFzZSBjbGFzcyBmb3IgYW55IHRlc3RzIHRoYXQg\nbmVlZCBhIEhlZHdpZyBIdWIocykgc2V0dXAgd2l0aCBhbgogKiBhc3NvY2lh\ndGVkIEJvb2tLZWVwZXIgYW5kIFpvb0tlZXBlciBpbnN0YW5jZS4KICoKICov\nCnB1YmxpYyBhYnN0cmFjdCBjbGFzcyBIZWR3aWdIdWJUZXN0QmFzZSBleHRl\nbmRzIFRlc3RDYXNlIHsKCiAgICBwcm90ZWN0ZWQgc3RhdGljIExvZ2dlciBs\nb2dnZXIgPSBMb2dnZXJGYWN0b3J5LmdldExvZ2dlcihIZWR3aWdIdWJUZXN0\nQmFzZS5jbGFzcyk7CgogICAgLy8gQm9va0tlZXBlciB2YXJpYWJsZXMKICAg\nIC8vIERlZmF1bHQgbnVtYmVyIG9mIGJvb2tpZSBzZXJ2ZXJzIHRvIHNldHVw\nLiBFeHRlbmRpbmcgY2xhc3NlcyBjYW4KICAgIC8vIG92ZXJyaWRlIHRoaXMu\nCiAgICBwcm90ZWN0ZWQgaW50IG51bUJvb2tpZXMgPSAzOwogICAgcHJvdGVj\ndGVkIGxvbmcgcmVhZERlbGF5ID0gMEw7CiAgICBwcm90ZWN0ZWQgQm9va0tl\nZXBlclRlc3RCYXNlIGJrdGI7CgogICAgLy8gUHViU3ViU2VydmVyIHZhcmlh\nYmxlcwogICAgLy8gRGVmYXVsdCBudW1iZXIgb2YgUHViU3ViU2VydmVyIGh1\nYnMgdG8gc2V0dXAuIEV4dGVuZGluZyBjbGFzc2VzIGNhbgogICAgLy8gb3Zl\ncnJpZGUgdGhpcy4KICAgIHByb3RlY3RlZCBpbnQgbnVtU2VydmVycyA9IDE7\nCiAgICBwcm90ZWN0ZWQgaW50IGluaXRpYWxTZXJ2ZXJQb3J0ID0gNDA4MDsK\nICAgIHByb3RlY3RlZCBpbnQgaW5pdGlhbFNTTFNlcnZlclBvcnQgPSA5ODc2\nOwogICAgcHJvdGVjdGVkIExpc3Q8UHViU3ViU2VydmVyPiBzZXJ2ZXJzTGlz\ndDsKCiAgICBwdWJsaWMgSGVkd2lnSHViVGVzdEJhc2UoKSB7CiAgICAgICAg\ndGhpcygxKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgSGVkd2lnSHViVGVzdEJh\nc2UoaW50IG51bVNlcnZlcnMpIHsKICAgICAgICB0aGlzLm51bVNlcnZlcnMg\nPSBudW1TZXJ2ZXJzOwogICAgfQoKICAgIC8vIERlZmF1bHQgY2hpbGQgY2xh\nc3Mgb2YgdGhlIFNlcnZlckNvbmZpZ3VyYXRpb24gdG8gYmUgdXNlZCBoZXJl\nLgogICAgLy8gRXh0ZW5kaW5nIGNsYXNzZXMgY2FuIGRlZmluZSB0aGVpciBv\nd24gKHBvc3NpYmx5IGV4dGVuZGluZyBmcm9tIHRoaXMpIGFuZAogICAgLy8g\nb3ZlcnJpZGUgdGhlIGdldFNlcnZlckNvbmZpZ3VyYXRpb24gbWV0aG9kIGJl\nbG93IHRvIHJldHVybiB0aGVpciBvd24KICAgIC8vIGNvbmZpZ3VyYXRpb24u\nCiAgICBwcm90ZWN0ZWQgY2xhc3MgSHViU2VydmVyQ29uZmlndXJhdGlvbiBl\neHRlbmRzIFNlcnZlckNvbmZpZ3VyYXRpb24gewogICAgICAgIHByaXZhdGUg\nZmluYWwgaW50IHNlcnZlclBvcnQsIHNzbFNlcnZlclBvcnQ7CgogICAgICAg\nIHB1YmxpYyBIdWJTZXJ2ZXJDb25maWd1cmF0aW9uKGludCBzZXJ2ZXJQb3J0\nLCBpbnQgc3NsU2VydmVyUG9ydCkgewogICAgICAgICAgICB0aGlzLnNlcnZl\nclBvcnQgPSBzZXJ2ZXJQb3J0OwogICAgICAgICAgICB0aGlzLnNzbFNlcnZl\nclBvcnQgPSBzc2xTZXJ2ZXJQb3J0OwogICAgICAgIH0KCiAgICAgICAgQE92\nZXJyaWRlCiAgICAgICAgcHVibGljIGludCBnZXRTZXJ2ZXJQb3J0KCkgewog\nICAgICAgICAgICByZXR1cm4gc2VydmVyUG9ydDsKICAgICAgICB9CgogICAg\nICAgIEBPdmVycmlkZQogICAgICAgIHB1YmxpYyBpbnQgZ2V0U1NMU2VydmVy\nUG9ydCgpIHsKICAgICAgICAgICAgcmV0dXJuIHNzbFNlcnZlclBvcnQ7CiAg\nICAgICAgfQoKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgU3Ry\naW5nIGdldFprSG9zdCgpIHsKICAgICAgICAgICAgcmV0dXJuIGJrdGIuZ2V0\nWmtIb3N0UG9ydCgpOwogICAgICAgIH0KCiAgICAgICAgQE92ZXJyaWRlCiAg\nICAgICAgcHVibGljIGJvb2xlYW4gaXNTU0xFbmFibGVkKCkgewogICAgICAg\nICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIEBPdmVycmlk\nZQogICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0Q2VydE5hbWUoKSB7CiAgICAg\nICAgICAgIHJldHVybiAiL3NlcnZlci5wMTIiOwogICAgICAgIH0KCiAgICAg\nICAgQE92ZXJyaWRlCiAgICAgICAgcHVibGljIFN0cmluZyBnZXRQYXNzd29y\nZCgpIHsKICAgICAgICAgICAgcmV0dXJuICJlVXlTdnAycGhNMldrIjsKICAg\nICAgICB9CiAgICB9CgogICAgLy8gTWV0aG9kIHRvIGdldCBhIFNlcnZlckNv\nbmZpZ3VyYXRpb24gZm9yIHRoZSBQdWJTdWJTZXJ2ZXJzIGNyZWF0ZWQgdXNp\nbmcKICAgIC8vIHRoZSBzcGVjaWZpZWQgcG9ydHMuIEV4dGVuZGluZyBjaGls\nZCBjbGFzc2VzIGNhbiBvdmVycmlkZSB0aGlzLiBUaGlzCiAgICAvLyBkZWZh\ndWx0IGltcGxlbWVudGF0aW9uIHdpbGwgcmV0dXJuIHRoZSBIdWJTZXJ2ZXJD\nb25maWd1cmF0aW9uIG9iamVjdAogICAgLy8gZGVmaW5lZCBhYm92ZS4KICAg\nIHByb3RlY3RlZCBTZXJ2ZXJDb25maWd1cmF0aW9uIGdldFNlcnZlckNvbmZp\nZ3VyYXRpb24oaW50IHNlcnZlclBvcnQsIGludCBzc2xTZXJ2ZXJQb3J0KSB7\nCiAgICAgICAgcmV0dXJuIG5ldyBIdWJTZXJ2ZXJDb25maWd1cmF0aW9uKHNl\ncnZlclBvcnQsIHNzbFNlcnZlclBvcnQpOwogICAgfQoKICAgIHByb3RlY3Rl\nZCB2b2lkIHN0YXJ0SHViU2VydmVycygpIHRocm93cyBFeGNlcHRpb24gewog\nICAgICAgIC8vIE5vdyBjcmVhdGUgdGhlIFB1YlN1YlNlcnZlciBIdWJzCiAg\nICAgICAgc2VydmVyc0xpc3QgPSBuZXcgTGlua2VkTGlzdDxQdWJTdWJTZXJ2\nZXI+KCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBudW1TZXJ2ZXJz\nOyBpKyspIHsKICAgICAgICAgICAgUHViU3ViU2VydmVyIHMgPSBuZXcgUHVi\nU3ViU2VydmVyKAogICAgICAgICAgICAgICAgICAgIGdldFNlcnZlckNvbmZp\nZ3VyYXRpb24oaW5pdGlhbFNlcnZlclBvcnQgKyBpLCBpbml0aWFsU1NMU2Vy\ndmVyUG9ydCArIGkpKTsKICAgICAgICAgICAgc2VydmVyc0xpc3QuYWRkKHMp\nOwogICAgICAgICAgICBzLnN0YXJ0KCk7CiAgICAgICAgfQogICAgfQogICAg\ncHJvdGVjdGVkIHZvaWQgc3RvcEh1YlNlcnZlcnMoKSB0aHJvd3MgRXhjZXB0\naW9uIHsKICAgICAgICAvLyBTaHV0ZG93biBhbGwgb2YgdGhlIFB1YlN1YlNl\ncnZlcnMKICAgICAgICBmb3IgKFB1YlN1YlNlcnZlciBzZXJ2ZXIgOiBzZXJ2\nZXJzTGlzdCkgewogICAgICAgICAgICBzZXJ2ZXIuc2h1dGRvd24oKTsKICAg\nICAgICB9CiAgICAgICAgc2VydmVyc0xpc3QuY2xlYXIoKTsKICAgIH0KCiAg\nICBAT3ZlcnJpZGUKICAgIEBCZWZvcmUKICAgIHB1YmxpYyB2b2lkIHNldFVw\nKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgbG9nZ2VyLmluZm8oIlNU\nQVJUSU5HICIgKyBnZXROYW1lKCkpOwogICAgICAgIGJrdGIgPSBuZXcgQm9v\na0tlZXBlclRlc3RCYXNlKG51bUJvb2tpZXMsIHJlYWREZWxheSk7CiAgICAg\nICAgYmt0Yi5zZXRVcCgpOwogICAgICAgIHN0YXJ0SHViU2VydmVycygpOwog\nICAgICAgIGxvZ2dlci5pbmZvKCJIZWR3aWdIdWIgdGVzdCBzZXR1cCBmaW5p\nc2hlZCIpOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgQEFmdGVyCiAgICBw\ndWJsaWMgdm9pZCB0ZWFyRG93bigpIHRocm93cyBFeGNlcHRpb24gewogICAg\nICAgIGxvZ2dlci5pbmZvKCJ0ZWFyRG93biBzdGFydGluZyIpOwogICAgICAg\nIHN0b3BIdWJTZXJ2ZXJzKCk7CiAgICAgICAgYmt0Yi50ZWFyRG93bigpOwog\nICAgICAgIGxvZ2dlci5pbmZvKCJGSU5JU0hFRCAiICsgZ2V0TmFtZSgpKTsK\nICAgIH0KCn0K\n","encoding":"base64"}

