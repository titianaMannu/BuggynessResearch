{"sha":"2bc8d23af05bc73495dd497f0ae58dbe62ffebe2","node_id":"MDQ6QmxvYjE1NzU5NTY6MmJjOGQyM2FmMDViYzczNDk1ZGQ0OTdmMGFlNThkYmU2MmZmZWJlMg==","size":4760,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/2bc8d23af05bc73495dd497f0ae58dbe62ffebe2","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXI7CgppbXBvcnQgamF2YS5p\nby5GaWxlOwppbXBvcnQgamF2YS5pby5GaWxlV3JpdGVyOwppbXBvcnQgamF2\nYS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEubmV0LkluZXRTb2NrZXRB\nZGRyZXNzOwppbXBvcnQgamF2YS5uZXQuTWFsZm9ybWVkVVJMRXhjZXB0aW9u\nOwoKaW1wb3J0IGp1bml0LmZyYW1ld29yay5Bc3NlcnQ7CgppbXBvcnQgb3Jn\nLmFwYWNoZS5jb21tb25zLmNvbmZpZ3VyYXRpb24uQ29uZmlndXJhdGlvbkV4\nY2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnNlcnZlci5jb21t\nb24uU2VydmVyQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVk\nd2lnLnNlcnZlci5uZXR0eS5QdWJTdWJTZXJ2ZXI7CmltcG9ydCBvcmcuc2xm\nNGouTG9nZ2VyOwppbXBvcnQgb3JnLnNsZjRqLkxvZ2dlckZhY3Rvcnk7Cmlt\ncG9ydCBvcmcuYXBhY2hlLnpvb2tlZXBlci5DcmVhdGVNb2RlOwppbXBvcnQg\nb3JnLmFwYWNoZS56b29rZWVwZXIuWm9vRGVmczsKaW1wb3J0IG9yZy5hcGFj\naGUuem9va2VlcGVyLlpvb0tlZXBlcjsKaW1wb3J0IG9yZy5hcGFjaGUuem9v\na2VlcGVyLnNlcnZlci5OSU9TZXJ2ZXJDbnhuRmFjdG9yeTsKaW1wb3J0IG9y\nZy5hcGFjaGUuem9va2VlcGVyLnNlcnZlci5ab29LZWVwZXJTZXJ2ZXI7Cmlt\ncG9ydCBvcmcuYXBhY2hlLnpvb2tlZXBlci50ZXN0LkNsaWVudEJhc2U7Cmlt\ncG9ydCBvcmcuanVuaXQuVGVzdDsKCnB1YmxpYyBjbGFzcyBUZXN0UHViU3Vi\nU2VydmVyU3RhcnR1cCB7CgogICAgcHJpdmF0ZSBzdGF0aWMgTG9nZ2VyIGxv\nZ2dlciA9IExvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKFRlc3RQdWJTdWJTZXJ2\nZXJTdGFydHVwLmNsYXNzKTsKCiAgICAvKioKICAgICAqIFN0YXJ0LXVwIHpv\nb2tlZXBlciArIHB1YnN1YnNlcnZlciByZWFkaW5nIGZyb20gYSBjb25maWcg\nVVJMLiBUaGVuIHN0b3AKICAgICAqIGFuZCBjbGVhbnVwLgogICAgICoKICAg\nICAqIExvb3Agb3ZlciB0aGF0LgogICAgICoKICAgICAqIElmIHRoZSBwdWJz\ndWIgc2VydmVyIGRvZXMgbm90IHdhaXQgZm9yIGl0cyB6b29rZWVwZXIgY2xp\nZW50IHRvIGJlCiAgICAgKiBjb25uZWN0ZWQsIHRoZSBwdWJzdWIgc2VydmVy\nIHdpbGwgZmFpbCBhdCBzdGFydHVwLgogICAgICoKICAgICAqLwogICAgQFRl\nc3QKICAgIHB1YmxpYyB2b2lkIHRlc3RQdWJTdWJTZXJ2ZXJJbnN0YW50aWF0\naW9uV2l0aENvbmZpZygpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIGZv\nciAoaW50IGkgPSAwOyBpIDwgMTA7IGkrKykgewogICAgICAgICAgICBsb2dn\nZXIuaW5mbygiaXRlcmF0aW9uICIgKyBpKTsKICAgICAgICAgICAgaW5zdGFu\ndGlhdGVBbmREZXN0cm95UHViU3ViU2VydmVyKCk7CiAgICAgICAgfQogICAg\nfQoKICAgIHByaXZhdGUgdm9pZCBpbnN0YW50aWF0ZUFuZERlc3Ryb3lQdWJT\ndWJTZXJ2ZXIoKSB0aHJvd3MgSU9FeGNlcHRpb24sIEludGVycnVwdGVkRXhj\nZXB0aW9uLCBDb25maWd1cmF0aW9uRXhjZXB0aW9uLAogICAgICAgIE1hbGZv\ncm1lZFVSTEV4Y2VwdGlvbiwgRXhjZXB0aW9uIHsKICAgICAgICBTdHJpbmcg\naGVkd2lnUGFyYW1zID0gImRlZmF1bHRfc2VydmVyX2hvc3Q9bG9jYWxob3N0\nOjQwODBcbiIgKyAiem9va2VlcGVyX2Nvbm5lY3Rpb25fc3RyaW5nPWxvY2Fs\naG9zdDoyMTgxXG4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsg\nInprX3RpbWVvdXQ9MjAwMFxuIjsKCiAgICAgICAgRmlsZSBoZWR3aWdDb25m\naWdGaWxlID0gbmV3IEZpbGUoU3lzdGVtLmdldFByb3BlcnR5KCJqYXZhLmlv\nLnRtcGRpciIpICsgIi9oZWR3aWcuY2ZnIik7CiAgICAgICAgd3JpdGVTdHJp\nbmdUb0ZpbGUoaGVkd2lnUGFyYW1zLCBoZWR3aWdDb25maWdGaWxlKTsKCiAg\nICAgICAgQ2xpZW50QmFzZS5zZXR1cFRlc3RFbnYoKTsKICAgICAgICBGaWxl\nIHprVG1wRGlyID0gRmlsZS5jcmVhdGVUZW1wRmlsZSgiem9va2VlcGVyIiwg\nInRlc3QiKTsKICAgICAgICB6a1RtcERpci5kZWxldGUoKTsKICAgICAgICB6\na1RtcERpci5ta2RpcigpOwoKICAgICAgICBab29LZWVwZXJTZXJ2ZXIgemtz\nID0gbmV3IFpvb0tlZXBlclNlcnZlcih6a1RtcERpciwgemtUbXBEaXIsIDIx\nODEpOwoKICAgICAgICBOSU9TZXJ2ZXJDbnhuRmFjdG9yeSBzZXJ2ZXJGYWN0\nb3J5ID0gbmV3IE5JT1NlcnZlckNueG5GYWN0b3J5KCk7CiAgICAgICAgc2Vy\ndmVyRmFjdG9yeS5jb25maWd1cmUobmV3IEluZXRTb2NrZXRBZGRyZXNzKDIx\nODEpLCAxMDApOwogICAgICAgIHNlcnZlckZhY3Rvcnkuc3RhcnR1cCh6a3Mp\nOwoKICAgICAgICBib29sZWFuIGIgPSBDbGllbnRCYXNlLndhaXRGb3JTZXJ2\nZXJVcCgiMTI3LjAuMC4xOjIxODEiLCA1MDAwKTsKICAgICAgICBTZXJ2ZXJD\nb25maWd1cmF0aW9uIHNlcnZlckNvbmYgPSBuZXcgU2VydmVyQ29uZmlndXJh\ndGlvbigpOwogICAgICAgIHNlcnZlckNvbmYubG9hZENvbmYoaGVkd2lnQ29u\nZmlnRmlsZS50b1VSSSgpLnRvVVJMKCkpOwoKICAgICAgICBsb2dnZXIuaW5m\nbygiWm9va2VlcGVyIHNlcnZlciB1cCBhbmQgcnVubmluZyEiKTsKCiAgICAg\nICAgWm9vS2VlcGVyIHprYyA9IG5ldyBab29LZWVwZXIoIjEyNy4wLjAuMSIs\nIDIxODEsIG51bGwpOwoKICAgICAgICAvLyBpbml0aWFsaXplIHRoZSB6ayBj\nbGllbnQgd2l0aCAoZmFrZSkgdmFsdWVzCiAgICAgICAgemtjLmNyZWF0ZSgi\nL2xlZGdlcnMiLCBuZXcgYnl0ZVswXSwgWm9vRGVmcy5JZHMuT1BFTl9BQ0xf\nVU5TQUZFLCBDcmVhdGVNb2RlLlBFUlNJU1RFTlQpOwogICAgICAgIHprYy5j\ncmVhdGUoIi9sZWRnZXJzL2F2YWlsYWJsZSIsIG5ldyBieXRlWzBdLCBab29E\nZWZzLklkcy5PUEVOX0FDTF9VTlNBRkUsIENyZWF0ZU1vZGUuUEVSU0lTVEVO\nVCk7CgogICAgICAgIHprYy5jbG9zZSgpOwogICAgICAgIFB1YlN1YlNlcnZl\nciBoZWR3aWdTZXJ2ZXIgPSBudWxsOwogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIGxvZ2dlci5pbmZvKCJzdGFydGluZyBoZWR3aWcgYnJva2VyISIpOwog\nICAgICAgICAgICBoZWR3aWdTZXJ2ZXIgPSBuZXcgUHViU3ViU2VydmVyKHNl\ncnZlckNvbmYpOwogICAgICAgICAgICBoZWR3aWdTZXJ2ZXIuc3RhcnQoKTsK\nICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBl\nLnByaW50U3RhY2tUcmFjZSgpOwogICAgICAgIH0KICAgICAgICBBc3NlcnQu\nYXNzZXJ0Tm90TnVsbCgiZmFpbGVkIHRvIGluc3RhbnRpYXRlIGhlZHdpZyBw\ndWIgc3ViIHNlcnZlciIsIGhlZHdpZ1NlcnZlcik7CgogICAgICAgIGhlZHdp\nZ1NlcnZlci5zaHV0ZG93bigpOwogICAgICAgIHNlcnZlckZhY3Rvcnkuc2h1\ndGRvd24oKTsKCiAgICAgICAgemtzLnNodXRkb3duKCk7CgogICAgICAgIHpr\nVG1wRGlyLmRlbGV0ZSgpOwoKICAgICAgICBDbGllbnRCYXNlLndhaXRGb3JT\nZXJ2ZXJEb3duKCJsb2NhbGhvc3Q6MjE4MSIsIDEwMDAwKTsKCiAgICB9Cgog\nICAgcHVibGljIHN0YXRpYyB2b2lkIHdyaXRlU3RyaW5nVG9GaWxlKFN0cmlu\nZyBzdHJpbmcsIEZpbGUgZikgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAg\nICBpZiAoZi5leGlzdHMoKSkgewogICAgICAgICAgICBpZiAoIWYuZGVsZXRl\nKCkpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0\naW9uKCJjYW5ub3QgY3JlYXRlIGZpbGUgIiArIGYuZ2V0QWJzb2x1dGVQYXRo\nKCkpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICghZi5j\ncmVhdGVOZXdGaWxlKCkpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRp\nbWVFeGNlcHRpb24oImNhbm5vdCBjcmVhdGUgbmV3IGZpbGUgIiArIGYuZ2V0\nQWJzb2x1dGVQYXRoKCkpOwogICAgICAgIH0KCiAgICAgICAgRmlsZVdyaXRl\nciBmdyA9IG5ldyBGaWxlV3JpdGVyKGYpOwogICAgICAgIGZ3LndyaXRlKHN0\ncmluZyk7CiAgICAgICAgZncuY2xvc2UoKTsKICAgIH0KfQo=\n","encoding":"base64"}

