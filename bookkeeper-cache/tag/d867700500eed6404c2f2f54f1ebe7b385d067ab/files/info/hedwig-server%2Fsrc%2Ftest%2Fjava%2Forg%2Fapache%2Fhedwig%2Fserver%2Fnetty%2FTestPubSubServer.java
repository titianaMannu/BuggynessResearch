{"sha":"5d64498b59540a84b702382940a578fcfca76961","node_id":"MDQ6QmxvYjE1NzU5NTY6NWQ2NDQ5OGI1OTU0MGE4NGI3MDIzODI5NDBhNTc4ZmNmY2E3Njk2MQ==","size":9860,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/5d64498b59540a84b702382940a578fcfca76961","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIubmV0dHk7CgppbXBvcnQg\namF2YS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEubGFuZy5UaHJlYWQu\nVW5jYXVnaHRFeGNlcHRpb25IYW5kbGVyOwppbXBvcnQgamF2YS5uZXQuSW5l\ndFNvY2tldEFkZHJlc3M7CmltcG9ydCBqYXZhLnV0aWwuTGlua2VkTGlzdDsK\naW1wb3J0IGphdmEudXRpbC5MaXN0OwppbXBvcnQgamF2YS51dGlsLmNvbmN1\ncnJlbnQuRXhlY3V0b3JzOwppbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQu\nU3luY2hyb25vdXNRdWV1ZTsKCmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMu\nY29uZmlndXJhdGlvbi5Db25maWd1cmF0aW9uRXhjZXB0aW9uOwppbXBvcnQg\nb3JnLmFwYWNoZS56b29rZWVwZXIuV2F0Y2hlZEV2ZW50OwppbXBvcnQgb3Jn\nLmFwYWNoZS56b29rZWVwZXIuV2F0Y2hlcjsKaW1wb3J0IG9yZy5hcGFjaGUu\nem9va2VlcGVyLlpvb0tlZXBlcjsKaW1wb3J0IG9yZy5qdW5pdC5UZXN0OwoK\naW1wb3J0IGNvbS5nb29nbGUucHJvdG9idWYuQnl0ZVN0cmluZzsKaW1wb3J0\nIG9yZy5hcGFjaGUuaGVkd2lnLmNsaWVudC5jb25mLkNsaWVudENvbmZpZ3Vy\nYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQuSGVkd2ln\nQ2xpZW50OwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuY2xpZW50LmFwaS5Q\ndWJsaXNoZXI7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5leGNlcHRpb25z\nLlB1YlN1YkV4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnBy\nb3RvY29sLlB1YlN1YlByb3RvY29sLk1lc3NhZ2U7CmltcG9ydCBvcmcuYXBh\nY2hlLmhlZHdpZy5zZXJ2ZXIuUHViU3ViU2VydmVyU3RhbmRBbG9uZVRlc3RC\nYXNlOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuc2VydmVyLmNvbW1vbi5T\nZXJ2ZXJDb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcu\nc2VydmVyLnRvcGljcy5BYnN0cmFjdFRvcGljTWFuYWdlcjsKaW1wb3J0IG9y\nZy5hcGFjaGUuaGVkd2lnLnNlcnZlci50b3BpY3MuVG9waWNNYW5hZ2VyOwpp\nbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcudXRpbC5DYWxsYmFjazsKaW1wb3J0\nIG9yZy5hcGFjaGUuaGVkd2lnLnV0aWwuSGVkd2lnU29ja2V0QWRkcmVzczsK\naW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnpvb2tlZXBlci5TYWZlQXN5bmNa\nS0NhbGxiYWNrOwoKcHVibGljIGNsYXNzIFRlc3RQdWJTdWJTZXJ2ZXIgZXh0\nZW5kcyBQdWJTdWJTZXJ2ZXJTdGFuZEFsb25lVGVzdEJhc2UgewoKICAgIEBU\nZXN0CiAgICBwdWJsaWMgdm9pZCB0ZXN0U2Vjb25kU2VydmVyKCkgdGhyb3dz\nIEV4Y2VwdGlvbiB7CiAgICAgICAgUHViU3ViU2VydmVyIHNlcnZlcjEgPSBu\nZXcgUHViU3ViU2VydmVyKG5ldyBTdGFuZEFsb25lU2VydmVyQ29uZmlndXJh\ndGlvbigpIHsKICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgIHB1\nYmxpYyBpbnQgZ2V0U2VydmVyUG9ydCgpIHsKICAgICAgICAgICAgICAgIHJl\ndHVybiBzdXBlci5nZXRTZXJ2ZXJQb3J0KCkgKyAxOwogICAgICAgICAgICB9\nCiAgICAgICAgfSk7CiAgICAgICAgc2VydmVyMS5zdGFydCgpOwogICAgICAg\nIHNlcnZlcjEuc2h1dGRvd24oKTsKICAgIH0KCiAgICBjbGFzcyBSZWNvcmRp\nbmdVbmNhdWdodEV4Y2VwdGlvbkhhbmRsZXIgaW1wbGVtZW50cyBUaHJlYWQu\nVW5jYXVnaHRFeGNlcHRpb25IYW5kbGVyIHsKICAgICAgICBTeW5jaHJvbm91\nc1F1ZXVlPFRocm93YWJsZT4gcXVldWU7CgogICAgICAgIHB1YmxpYyBSZWNv\ncmRpbmdVbmNhdWdodEV4Y2VwdGlvbkhhbmRsZXIoU3luY2hyb25vdXNRdWV1\nZTxUaHJvd2FibGU+IHF1ZXVlKSB7CiAgICAgICAgICAgIHRoaXMucXVldWUg\nPSBxdWV1ZTsKICAgICAgICB9CgogICAgICAgIEBPdmVycmlkZQogICAgICAg\nIHB1YmxpYyB2b2lkIHVuY2F1Z2h0RXhjZXB0aW9uKFRocmVhZCB0LCBUaHJv\nd2FibGUgZSkgewogICAgICAgICAgICBxdWV1ZS5hZGQoZSk7CiAgICAgICAg\nfQoKICAgIH0KCiAgICBwcml2YXRlIGludGVyZmFjZSBUb3BpY01hbmFnZXJJ\nbnN0YW50aWF0b3IgewogICAgICAgIHB1YmxpYyBUb3BpY01hbmFnZXIgaW5z\ndGFudGlhdGVUb3BpY01hbmFnZXIoKSB0aHJvd3MgSU9FeGNlcHRpb247CiAg\nICB9CgogICAgUHViU3ViU2VydmVyIHN0YXJ0U2VydmVyKGZpbmFsIFVuY2F1\nZ2h0RXhjZXB0aW9uSGFuZGxlciB1bmNhdWdodEV4Y2VwdGlvbkhhbmRsZXIs\nIGZpbmFsIGludCBwb3J0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIGZpbmFsIFRvcGljTWFuYWdlckluc3RhbnRpYXRvciBpbnN0YW50aWF0b3Ip\nIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIFB1YlN1YlNlcnZlciBzZXJ2\nZXIgPSBuZXcgUHViU3ViU2VydmVyKG5ldyBTdGFuZEFsb25lU2VydmVyQ29u\nZmlndXJhdGlvbigpIHsKICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAg\nICAgIHB1YmxpYyBpbnQgZ2V0U2VydmVyUG9ydCgpIHsKICAgICAgICAgICAg\nICAgIHJldHVybiBwb3J0OwogICAgICAgICAgICB9CgogICAgICAgIH0sIHVu\nY2F1Z2h0RXhjZXB0aW9uSGFuZGxlcikgewoKICAgICAgICAgICAgQE92ZXJy\naWRlCiAgICAgICAgICAgIHByb3RlY3RlZCBUb3BpY01hbmFnZXIgaW5zdGFu\ndGlhdGVUb3BpY01hbmFnZXIoKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAg\nICAgICAgICAgICAgcmV0dXJuIGluc3RhbnRpYXRvci5pbnN0YW50aWF0ZVRv\ncGljTWFuYWdlcigpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAg\nICBzZXJ2ZXIuc3RhcnQoKTsKICAgICAgICByZXR1cm4gc2VydmVyOwoKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBydW5QdWJsaXNoUmVxdWVzdChmaW5hbCBp\nbnQgcG9ydCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgUHVibGlzaGVy\nIHB1Ymxpc2hlciA9IG5ldyBIZWR3aWdDbGllbnQobmV3IENsaWVudENvbmZp\nZ3VyYXRpb24oKSB7CiAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAg\nICBwdWJsaWMgSW5ldFNvY2tldEFkZHJlc3MgZ2V0RGVmYXVsdFNlcnZlckhv\nc3QoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEluZXRTb2NrZXRB\nZGRyZXNzKCJsb2NhbGhvc3QiLCBwb3J0KTsKICAgICAgICAgICAgfQogICAg\nICAgIH0pLmdldFB1Ymxpc2hlcigpOwoKICAgICAgICBwdWJsaXNoZXIuYXN5\nbmNQdWJsaXNoKEJ5dGVTdHJpbmcuY29weUZyb21VdGY4KCJibGFoIiksIE1l\nc3NhZ2UubmV3QnVpbGRlcigpLnNldEJvZHkoCiAgICAgICAgQnl0ZVN0cmlu\nZy5jb3B5RnJvbVV0ZjgoImJsYWgiKSkuYnVpbGQoKSwgbmV3IENhbGxiYWNr\nPFZvaWQ+KCkgewogICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAg\ncHVibGljIHZvaWQgb3BlcmF0aW9uRmFpbGVkKE9iamVjdCBjdHgsIFB1YlN1\nYkV4Y2VwdGlvbiBleGNlcHRpb24pIHsKICAgICAgICAgICAgICAgIGFzc2Vy\ndFRydWUoZmFsc2UpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBAT3Zl\ncnJpZGUKICAgICAgICAgICAgcHVibGljIHZvaWQgb3BlcmF0aW9uRmluaXNo\nZWQoT2JqZWN0IGN0eCwgVm9pZCByZXN1bHRPZk9wZXJhdGlvbikgewogICAg\nICAgICAgICAgICAgYXNzZXJ0VHJ1ZShmYWxzZSk7CiAgICAgICAgICAgIH0K\nCiAgICAgICAgfSwgbnVsbCk7CiAgICB9CgogICAgQFRlc3QKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RVbmNhdWdodEV4Y2VwdGlvbkluTmV0dHlUaHJlYWQoKSB0\naHJvd3MgRXhjZXB0aW9uIHsKCiAgICAgICAgU3luY2hyb25vdXNRdWV1ZTxU\naHJvd2FibGU+IHF1ZXVlID0gbmV3IFN5bmNocm9ub3VzUXVldWU8VGhyb3dh\nYmxlPigpOwogICAgICAgIFJlY29yZGluZ1VuY2F1Z2h0RXhjZXB0aW9uSGFu\nZGxlciB1bmNhdWdodEV4Y2VwdGlvbkhhbmRsZXIgPSBuZXcgUmVjb3JkaW5n\nVW5jYXVnaHRFeGNlcHRpb25IYW5kbGVyKHF1ZXVlKTsKICAgICAgICBmaW5h\nbCBpbnQgcG9ydCA9IDk4NzY7CgogICAgICAgIFB1YlN1YlNlcnZlciBzZXJ2\nZXIgPSBzdGFydFNlcnZlcih1bmNhdWdodEV4Y2VwdGlvbkhhbmRsZXIsIHBv\ncnQsIG5ldyBUb3BpY01hbmFnZXJJbnN0YW50aWF0b3IoKSB7CgogICAgICAg\nICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgcHVibGljIFRvcGljTWFuYWdl\nciBpbnN0YW50aWF0ZVRvcGljTWFuYWdlcigpIHRocm93cyBJT0V4Y2VwdGlv\nbiB7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEFic3RyYWN0VG9waWNN\nYW5hZ2VyKG5ldyBTZXJ2ZXJDb25maWd1cmF0aW9uKCksIEV4ZWN1dG9ycy5u\nZXdTaW5nbGVUaHJlYWRTY2hlZHVsZWRFeGVjdXRvcigpKSB7CiAgICAgICAg\nICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAgICAgICAgICAgcHJv\ndGVjdGVkIHZvaWQgcmVhbEdldE93bmVyKEJ5dGVTdHJpbmcgdG9waWMsIGJv\nb2xlYW4gc2hvdWxkQ2xhaW0sCiAgICAgICAgICAgICAgICAgICAgQ2FsbGJh\nY2s8SGVkd2lnU29ja2V0QWRkcmVzcz4gY2IsIE9iamVjdCBjdHgpIHsKICAg\nICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRp\nb24oInRoaXMgZXhjZXB0aW9uIHNob3VsZCBiZSB1bmNhdWdodCIpOwogICAg\nICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgQE92ZXJy\naWRlCiAgICAgICAgICAgICAgICAgICAgcHJvdGVjdGVkIHZvaWQgcG9zdFJl\nbGVhc2VDbGVhbnVwKEJ5dGVTdHJpbmcgdG9waWMsIENhbGxiYWNrPFZvaWQ+\nIGNiLCBPYmplY3QgY3R4KSB7CiAgICAgICAgICAgICAgICAgICAgfQogICAg\nICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAg\nICAgICBydW5QdWJsaXNoUmVxdWVzdChwb3J0KTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoUnVudGltZUV4Y2VwdGlvbi5jbGFzcywgcXVldWUudGFrZSgpLmdl\ndENsYXNzKCkpOwogICAgICAgIHNlcnZlci5zaHV0ZG93bigpOwogICAgfQoK\nICAgIEBUZXN0CiAgICBwdWJsaWMgdm9pZCB0ZXN0VW5jYXVnaHRFeGNlcHRp\nb25JblpLVGhyZWFkKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CgogICAgICAgIFN5\nbmNocm9ub3VzUXVldWU8VGhyb3dhYmxlPiBxdWV1ZSA9IG5ldyBTeW5jaHJv\nbm91c1F1ZXVlPFRocm93YWJsZT4oKTsKICAgICAgICBSZWNvcmRpbmdVbmNh\ndWdodEV4Y2VwdGlvbkhhbmRsZXIgdW5jYXVnaHRFeGNlcHRpb25IYW5kbGVy\nID0gbmV3IFJlY29yZGluZ1VuY2F1Z2h0RXhjZXB0aW9uSGFuZGxlcihxdWV1\nZSk7CiAgICAgICAgZmluYWwgaW50IHBvcnQgPSA5ODc2OwogICAgICAgIGZp\nbmFsIFN0cmluZyBob3N0UG9ydCA9ICIxMjcuMC4wLjE6MzMyMjEiOwoKICAg\nICAgICBQdWJTdWJTZXJ2ZXIgc2VydmVyID0gc3RhcnRTZXJ2ZXIodW5jYXVn\naHRFeGNlcHRpb25IYW5kbGVyLCBwb3J0LCBuZXcgVG9waWNNYW5hZ2VySW5z\ndGFudGlhdG9yKCkgewoKICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAg\nICAgIHB1YmxpYyBUb3BpY01hbmFnZXIgaW5zdGFudGlhdGVUb3BpY01hbmFn\nZXIoKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgICAgICAgICAgcmV0\ndXJuIG5ldyBBYnN0cmFjdFRvcGljTWFuYWdlcihuZXcgU2VydmVyQ29uZmln\ndXJhdGlvbigpLCBFeGVjdXRvcnMubmV3U2luZ2xlVGhyZWFkU2NoZWR1bGVk\nRXhlY3V0b3IoKSkgewoKICAgICAgICAgICAgICAgICAgICBAT3ZlcnJpZGUK\nICAgICAgICAgICAgICAgICAgICBwcm90ZWN0ZWQgdm9pZCByZWFsR2V0T3du\nZXIoQnl0ZVN0cmluZyB0b3BpYywgYm9vbGVhbiBzaG91bGRDbGFpbSwKICAg\nICAgICAgICAgICAgICAgICBDYWxsYmFjazxIZWR3aWdTb2NrZXRBZGRyZXNz\nPiBjYiwgT2JqZWN0IGN0eCkgewogICAgICAgICAgICAgICAgICAgICAgICBa\nb29LZWVwZXIgem9va2VlcGVyOwogICAgICAgICAgICAgICAgICAgICAgICB0\ncnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgem9va2VlcGVyID0g\nbmV3IFpvb0tlZXBlcihob3N0UG9ydCwgNjAwMDAsIG5ldyBXYXRjaGVyKCkg\newogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBPdmVycmlkZQog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHBy\nb2Nlc3MoV2F0Y2hlZEV2ZW50IGV2ZW50KSB7CiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gQXV0by1nZW5lcmF0ZWQgbWV0\naG9kIHN0dWIKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAg\nICAgICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGUpIHsKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9u\nKGUpOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAg\nICAgICAgICAgICB6b29rZWVwZXIuZ2V0RGF0YSgiL2Zha2UiLCBmYWxzZSwg\nbmV3IFNhZmVBc3luY1pLQ2FsbGJhY2suRGF0YUNhbGxiYWNrKCkgewogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBzYWZlUHJvY2Vzc1Jlc3Vs\ndChpbnQgcmMsIFN0cmluZyBwYXRoLCBPYmplY3QgY3R4LCBieXRlW10gZGF0\nYSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZy5hcGFjaGUuem9v\na2VlcGVyLmRhdGEuU3RhdCBzdGF0KSB7CiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oIlRoaXMg\nc2hvdWxkIGdvIHRvIHRoZSB1bmNhdWdodCBleGNlcHRpb24gaGFuZGxlciIp\nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAg\nICAgICAgICAgICAgfSwgbnVsbCk7CiAgICAgICAgICAgICAgICAgICAgfQoK\nICAgICAgICAgICAgICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAg\nICAgICBwcm90ZWN0ZWQgdm9pZCBwb3N0UmVsZWFzZUNsZWFudXAoQnl0ZVN0\ncmluZyB0b3BpYywgQ2FsbGJhY2s8Vm9pZD4gY2IsIE9iamVjdCBjdHgpIHsK\nICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAg\nICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIHJ1blB1Ymxpc2hSZXF1\nZXN0KHBvcnQpOwogICAgICAgIGFzc2VydEVxdWFscyhSdW50aW1lRXhjZXB0\naW9uLmNsYXNzLCBxdWV1ZS50YWtlKCkuZ2V0Q2xhc3MoKSk7CiAgICAgICAg\nc2VydmVyLnNodXRkb3duKCk7CiAgICB9CgogICAgQFRlc3QKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RJbnZhbGlkU2VydmVyQ29uZmlndXJhdGlvbigpIHRocm93\ncyBFeGNlcHRpb24gewogICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IGZhbHNl\nOwogICAgICAgIFNlcnZlckNvbmZpZ3VyYXRpb24gY29uZiA9IG5ldyBTZXJ2\nZXJDb25maWd1cmF0aW9uKCkgewogICAgICAgICAgICBAT3ZlcnJpZGUKICAg\nICAgICAgICAgcHVibGljIGJvb2xlYW4gaXNJbnRlclJlZ2lvblNTTEVuYWJs\nZWQoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gY29uZi5nZXRCb29sZWFu\nKElOVEVSX1JFR0lPTl9TU0xfRU5BQkxFRCwgdHJ1ZSk7CiAgICAgICAgICAg\nIH0KCiAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICBwdWJsaWMg\nTGlzdDxTdHJpbmc+IGdldFJlZ2lvbnMoKSB7CiAgICAgICAgICAgICAgICBM\naXN0PFN0cmluZz4gcmVnaW9uc0xpc3QgPSBuZXcgTGlua2VkTGlzdDxTdHJp\nbmc+KCk7CiAgICAgICAgICAgICAgICByZWdpb25zTGlzdC5hZGQoInJlZ2lv\nbkhvc3QxOjQwODA6OTg3NiIpOwogICAgICAgICAgICAgICAgcmVnaW9uc0xp\nc3QuYWRkKCJyZWdpb25Ib3N0Mjo0MDgwIik7CiAgICAgICAgICAgICAgICBy\nZWdpb25zTGlzdC5hZGQoInJlZ2lvbkhvc3QzOjQwODA6OTg3NiIpOwogICAg\nICAgICAgICAgICAgcmV0dXJuIHJlZ2lvbnNMaXN0OwogICAgICAgICAgICB9\nCiAgICAgICAgfTsKICAgICAgICB0cnkgewogICAgICAgICAgICBjb25mLnZh\nbGlkYXRlKCk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChDb25maWd1cmF0\naW9uRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCJJ\nbnZhbGlkIGNvbmZpZ3VyYXRpb246ICIsIGUpOwogICAgICAgICAgICBzdWNj\nZXNzID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgYXNzZXJ0VHJ1ZShzdWNj\nZXNzKTsKICAgIH0KCiAgICBAVGVzdAogICAgcHVibGljIHZvaWQgdGVzdFZh\nbGlkU2VydmVyQ29uZmlndXJhdGlvbigpIHRocm93cyBFeGNlcHRpb24gewog\nICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IHRydWU7CiAgICAgICAgU2VydmVy\nQ29uZmlndXJhdGlvbiBjb25mID0gbmV3IFNlcnZlckNvbmZpZ3VyYXRpb24o\nKSB7CiAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICBwdWJsaWMg\nYm9vbGVhbiBpc0ludGVyUmVnaW9uU1NMRW5hYmxlZCgpIHsKICAgICAgICAg\nICAgICAgIHJldHVybiBjb25mLmdldEJvb2xlYW4oSU5URVJfUkVHSU9OX1NT\nTF9FTkFCTEVELCB0cnVlKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAg\nQE92ZXJyaWRlCiAgICAgICAgICAgIHB1YmxpYyBMaXN0PFN0cmluZz4gZ2V0\nUmVnaW9ucygpIHsKICAgICAgICAgICAgICAgIExpc3Q8U3RyaW5nPiByZWdp\nb25zTGlzdCA9IG5ldyBMaW5rZWRMaXN0PFN0cmluZz4oKTsKICAgICAgICAg\nICAgICAgIHJlZ2lvbnNMaXN0LmFkZCgicmVnaW9uSG9zdDE6NDA4MDo5ODc2\nIik7CiAgICAgICAgICAgICAgICByZWdpb25zTGlzdC5hZGQoInJlZ2lvbkhv\nc3QyOjQwODA6MjkzOCIpOwogICAgICAgICAgICAgICAgcmVnaW9uc0xpc3Qu\nYWRkKCJyZWdpb25Ib3N0Mzo0MDgwOjk4NzYiKTsKICAgICAgICAgICAgICAg\nIHJldHVybiByZWdpb25zTGlzdDsKICAgICAgICAgICAgfQogICAgICAgIH07\nCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY29uZi52YWxpZGF0ZSgpOwog\nICAgICAgIH0KICAgICAgICBjYXRjaCAoQ29uZmlndXJhdGlvbkV4Y2VwdGlv\nbiBlKSB7CiAgICAgICAgICAgIGxvZ2dlci5lcnJvcigiSW52YWxpZCBjb25m\naWd1cmF0aW9uOiAiLCBlKTsKICAgICAgICAgICAgc3VjY2VzcyA9IGZhbHNl\nOwogICAgICAgIH0KICAgICAgICBhc3NlcnRUcnVlKHN1Y2Nlc3MpOwogICAg\nfQoKfQo=\n","encoding":"base64"}

