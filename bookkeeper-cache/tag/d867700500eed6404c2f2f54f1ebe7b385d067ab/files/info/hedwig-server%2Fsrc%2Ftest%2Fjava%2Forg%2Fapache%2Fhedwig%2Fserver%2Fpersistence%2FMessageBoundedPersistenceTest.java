{"sha":"dec7ca773ccd2d2bf05d1de7e0617fcaf968cc49","node_id":"MDQ6QmxvYjE1NzU5NTY6ZGVjN2NhNzczY2NkMmQyYmYwNWQxZGU3ZTA2MTdmY2FmOTY4Y2M0OQ==","size":10212,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/dec7ca773ccd2d2bf05d1de7e0617fcaf968cc49","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIucGVyc2lzdGVuY2U7Cgpp\nbXBvcnQgb3JnLnNsZjRqLkxvZ2dlcjsKaW1wb3J0IG9yZy5zbGY0ai5Mb2dn\nZXJGYWN0b3J5OwppbXBvcnQgb3JnLmp1bml0LkFmdGVyOwppbXBvcnQgb3Jn\nLmp1bml0LkJlZm9yZTsKaW1wb3J0IG9yZy5qdW5pdC5UZXN0OwppbXBvcnQg\nc3RhdGljIG9yZy5qdW5pdC5Bc3NlcnQuKjsKCmltcG9ydCBqYXZhLnV0aWwu\nY29uY3VycmVudC5Db3VudERvd25MYXRjaDsKaW1wb3J0IGphdmEudXRpbC5j\nb25jdXJyZW50LlRpbWVVbml0OwppbXBvcnQgamF2YS51dGlsLmNvbmN1cnJl\nbnQuYXRvbWljLkF0b21pY0ludGVnZXI7CgppbXBvcnQgb3JnLmFwYWNoZS5o\nZWR3aWcuY2xpZW50LkhlZHdpZ0NsaWVudDsKaW1wb3J0IG9yZy5hcGFjaGUu\naGVkd2lnLmNsaWVudC5hcGkuTWVzc2FnZUhhbmRsZXI7CmltcG9ydCBjb20u\nZ29vZ2xlLnByb3RvYnVmLkJ5dGVTdHJpbmc7CmltcG9ydCBvcmcuYXBhY2hl\nLmhlZHdpZy5wcm90b2NvbC5QdWJTdWJQcm90b2NvbC5NZXNzYWdlOwppbXBv\ncnQgb3JnLmFwYWNoZS5oZWR3aWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2wu\nU3Vic2NyaWJlUmVxdWVzdC5DcmVhdGVPckF0dGFjaDsKaW1wb3J0IG9yZy5h\ncGFjaGUuaGVkd2lnLnByb3RvY29sLlB1YlN1YlByb3RvY29sLlN1YnNjcmlw\ndGlvbk9wdGlvbnM7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2Nv\nbC5QdWJTdWJQcm90b2NvbC5MZWRnZXJSYW5nZTsKaW1wb3J0IG9yZy5hcGFj\naGUuaGVkd2lnLnByb3RvY29sLlB1YlN1YlByb3RvY29sLkxlZGdlclJhbmdl\nczsKCmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQuYXBpLkNsaWVu\ndDsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmNsaWVudC5hcGkuU3Vic2Ny\naWJlcjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmNsaWVudC5hcGkuUHVi\nbGlzaGVyOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuY2xpZW50LmNvbmYu\nQ2xpZW50Q29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2ln\nLnV0aWwuQ2FsbGJhY2s7CgppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuc2Vy\ndmVyLkhlZHdpZ0h1YlRlc3RCYXNlOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3\naWcuc2VydmVyLmNvbW1vbi5TZXJ2ZXJDb25maWd1cmF0aW9uOwoKcHVibGlj\nIGNsYXNzIE1lc3NhZ2VCb3VuZGVkUGVyc2lzdGVuY2VUZXN0IGV4dGVuZHMg\nSGVkd2lnSHViVGVzdEJhc2UgewogICAgcHJvdGVjdGVkIHN0YXRpYyBMb2dn\nZXIgbG9nZ2VyID0gTG9nZ2VyRmFjdG9yeS5nZXRMb2dnZXIoTWVzc2FnZUJv\ndW5kZWRQZXJzaXN0ZW5jZVRlc3QuY2xhc3MpOwoKICAgIHByb3RlY3RlZCBj\nbGFzcyBTbWFsbFJlYWRBaGVhZFNlcnZlckNvbmZpZ3VyYXRpb24KICAgICAg\nICBleHRlbmRzIEhlZHdpZ0h1YlRlc3RCYXNlLkh1YlNlcnZlckNvbmZpZ3Vy\nYXRpb24gewogICAgICAgIFNtYWxsUmVhZEFoZWFkU2VydmVyQ29uZmlndXJh\ndGlvbihpbnQgc2VydmVyUG9ydCwgaW50IHNzbFNlcnZlclBvcnQpIHsKICAg\nICAgICAgICAgc3VwZXIoc2VydmVyUG9ydCwgc3NsU2VydmVyUG9ydCk7CiAg\nICAgICAgfQogICAgICAgIHB1YmxpYyBsb25nIGdldE1heGltdW1DYWNoZVNp\nemUoKSB7CiAgICAgICAgICAgIHJldHVybiAxOwogICAgICAgIH0KCiAgICAg\nICAgcHVibGljIGludCBnZXRSZWFkQWhlYWRDb3VudCgpIHsKICAgICAgICAg\nICAgcmV0dXJuIDE7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgaW50IGdl\ndE1lc3NhZ2VzQ29uc3VtZWRUaHJlYWRSdW5JbnRlcnZhbCgpIHsKICAgICAg\nICAgICAgcmV0dXJuIDEwMDA7IC8vIHJ1biBldmVyeSBzZWNvbmQKICAgICAg\nICB9CiAgICB9CgogICAgcHJvdGVjdGVkIFNlcnZlckNvbmZpZ3VyYXRpb24g\nZ2V0U2VydmVyQ29uZmlndXJhdGlvbihpbnQgc2VydmVyUG9ydCwgaW50IHNz\nbFNlcnZlclBvcnQpIHsKICAgICAgICByZXR1cm4gbmV3IFNtYWxsUmVhZEFo\nZWFkU2VydmVyQ29uZmlndXJhdGlvbihzZXJ2ZXJQb3J0LCBzc2xTZXJ2ZXJQ\nb3J0KTsKICAgIH0KCiAgICBwcml2YXRlIGNsYXNzIE1lc3NhZ2VCb3VuZENs\naWVudENvbmZpZ3VyYXRpb24gZXh0ZW5kcyBDbGllbnRDb25maWd1cmF0aW9u\nIHsKICAgICAgICBmaW5hbCBpbnQgbWVzc2FnZUJvdW5kOwoKICAgICAgICBw\ndWJsaWMgTWVzc2FnZUJvdW5kQ2xpZW50Q29uZmlndXJhdGlvbihpbnQgYm91\nbmQpIHsKICAgICAgICAgICAgdGhpcy5tZXNzYWdlQm91bmQgPSBib3VuZDsK\nICAgICAgICB9CgogICAgICAgIHB1YmxpYyBNZXNzYWdlQm91bmRDbGllbnRD\nb25maWd1cmF0aW9uKCkgewogICAgICAgICAgICB0aGlzKDUpOwogICAgICAg\nIH0KCiAgICAgICAgcHVibGljIGludCBnZXRTdWJzY3JpcHRpb25NZXNzYWdl\nQm91bmQoKSB7CiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlQm91bmQ7CiAg\nICAgICAgfQogICAgfQoKICAgIHByaXZhdGUgdm9pZCBzZW5kWEV4cGVjdExh\nc3RZKFB1Ymxpc2hlciBwdWIsIFN1YnNjcmliZXIgc3ViLAogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgQnl0ZVN0cmluZyB0b3BpYywgQnl0\nZVN0cmluZyBzdWJpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIGZpbmFsIGludCBYLCBmaW5hbCBpbnQgWSkgdGhyb3dzIEV4Y2VwdGlv\nbiB7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBYOyBpKyspIHsKICAg\nICAgICAgICAgcHViLnB1Ymxpc2godG9waWMsIE1lc3NhZ2UubmV3QnVpbGRl\ncigpLnNldEJvZHkoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nQnl0ZVN0cmluZy5jb3B5RnJvbVV0ZjgoU3RyaW5nLnZhbHVlT2YoaSkpKS5i\ndWlsZCgpKTsKICAgICAgICB9CiAgICAgICAgc3ViLnN1YnNjcmliZSh0b3Bp\nYywgc3ViaWQsIENyZWF0ZU9yQXR0YWNoLkFUVEFDSCk7CgogICAgICAgIGZp\nbmFsIEF0b21pY0ludGVnZXIgZXhwZWN0ZWQgPSBuZXcgQXRvbWljSW50ZWdl\ncihYIC0gWSk7CiAgICAgICAgZmluYWwgQ291bnREb3duTGF0Y2ggbGF0Y2gg\nPSBuZXcgQ291bnREb3duTGF0Y2goMSk7CiAgICAgICAgc3ViLnN0YXJ0RGVs\naXZlcnkodG9waWMsIHN1YmlkLCBuZXcgTWVzc2FnZUhhbmRsZXIgKCkgewog\nICAgICAgICAgICAgICAgc3luY2hyb25pemVkIHB1YmxpYyB2b2lkIGRlbGl2\nZXIoQnl0ZVN0cmluZyB0b3BpYywgQnl0ZVN0cmluZyBzdWJzY3JpYmVySWQs\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2Ug\nbXNnLCBDYWxsYmFjazxWb2lkPiBjYWxsYmFjaywKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgT2JqZWN0IGNvbnRleHQpIHsKICAgICAg\nICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBp\nbnQgdmFsdWUgPSBJbnRlZ2VyLnZhbHVlT2YobXNnLmdldEJvZHkoKS50b1N0\ncmluZ1V0ZjgoKSk7CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFs\ndWUgPT0gZXhwZWN0ZWQuZ2V0KCkpIHsKICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIGV4cGVjdGVkLmluY3JlbWVudEFuZEdldCgpOwogICAgICAgICAg\nICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgLy8gZXJyb3IgY29uZGl0aW9uCiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICBsb2dnZXIuZXJyb3IoIkRpZCBub3QgcmVjZWl2ZSBleHBlY3Rl\nZCB2YWx1ZSwgZXhwZWN0ZWQge30sIGdvdCB7fSIsCiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWQuZ2V0KCksIHZh\nbHVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkLnNl\ndCgwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhdGNoLmNvdW50\nRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAg\nICAgICAgICAgICAgIGlmIChleHBlY3RlZC5nZXQoKSA9PSBYKSB7CiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICBsYXRjaC5jb3VudERvd24oKTsKICAg\nICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAg\nICBjYWxsYmFjay5vcGVyYXRpb25GaW5pc2hlZChjb250ZXh0LCBudWxsKTsK\nICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewog\nICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoIlJlY2VpdmVk\nIGJhZCBtZXNzYWdlIiwgZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxh\ndGNoLmNvdW50RG93bigpOy8vIHdpbGwgZXJyb3Igb24gbWF0Y2gKICAgICAg\nICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAg\nIH0pOwogICAgICAgIGFzc2VydFRydWUoIlRpbWVkIG91dCB3YWl0aW5nIGZv\nciBtZXNzYWdlcyBZIGlzICIgKyBZCiAgICAgICAgICAgICAgICArICIgZXhw\nZWN0ZWQgaXMgY3VycmVudGx5ICIgKyBleHBlY3RlZC5nZXQoKSwgbGF0Y2gu\nYXdhaXQoMTAsIFRpbWVVbml0LlNFQ09ORFMpKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoIlNob3VsZCBiZSBleHBlY3RlZCBtZXNzYWdlIHdpdGggIiArIFgs\nIFgsIGV4cGVjdGVkLmdldCgpKTsKCiAgICAgICAgc3ViLnN0b3BEZWxpdmVy\neSh0b3BpYywgc3ViaWQpOwogICAgICAgIHN1Yi5jbG9zZVN1YnNjcmlwdGlv\nbih0b3BpYywgc3ViaWQpOwogICAgfQoKICAgIEBUZXN0CiAgICBwdWJsaWMg\ndm9pZCB0ZXN0QmFzaWNCb3VuZGluZygpIHRocm93cyBFeGNlcHRpb24gewog\nICAgICAgIENsaWVudCBjbGllbnQgPSBuZXcgSGVkd2lnQ2xpZW50KG5ldyBN\nZXNzYWdlQm91bmRDbGllbnRDb25maWd1cmF0aW9uKDUpKTsKICAgICAgICBQ\ndWJsaXNoZXIgcHViID0gY2xpZW50LmdldFB1Ymxpc2hlcigpOwogICAgICAg\nIFN1YnNjcmliZXIgc3ViID0gY2xpZW50LmdldFN1YnNjcmliZXIoKTsKCiAg\nICAgICAgQnl0ZVN0cmluZyB0b3BpYyA9IEJ5dGVTdHJpbmcuY29weUZyb21V\ndGY4KCJiYXNpY0JvdW5kaW5nVG9waWMiKTsKICAgICAgICBCeXRlU3RyaW5n\nIHN1YmlkID0gQnl0ZVN0cmluZy5jb3B5RnJvbVV0ZjgoImJhc2ljQm91bmRp\nbmdTdWJJZCIpOwogICAgICAgIHN1Yi5zdWJzY3JpYmUodG9waWMsIHN1Ymlk\nLCBDcmVhdGVPckF0dGFjaC5DUkVBVEUpOwogICAgICAgIHN1Yi5jbG9zZVN1\nYnNjcmlwdGlvbih0b3BpYywgc3ViaWQpOwoKICAgICAgICBzZW5kWEV4cGVj\ndExhc3RZKHB1Yiwgc3ViLCB0b3BpYywgc3ViaWQsIDEwMDAsIDUpOwoKICAg\nICAgICBjbGllbnQuY2xvc2UoKTsKICAgIH0KCiAgICBAVGVzdAogICAgcHVi\nbGljIHZvaWQgdGVzdE11bHRpcGxlU3Vic2NyaWJlcnMoKSB0aHJvd3MgRXhj\nZXB0aW9uIHsKICAgICAgICBCeXRlU3RyaW5nIHRvcGljID0gQnl0ZVN0cmlu\nZy5jb3B5RnJvbVV0ZjgoIm11bHRpU3ViVG9waWMiKTsKCiAgICAgICAgQ2xp\nZW50IGNsaWVudCA9IG5ldyBIZWR3aWdDbGllbnQobmV3IENsaWVudENvbmZp\nZ3VyYXRpb24oKSk7CiAgICAgICAgUHVibGlzaGVyIHB1YiA9IGNsaWVudC5n\nZXRQdWJsaXNoZXIoKTsKICAgICAgICBTdWJzY3JpYmVyIHN1YiA9IGNsaWVu\ndC5nZXRTdWJzY3JpYmVyKCk7CgogICAgICAgIFN1YnNjcmlwdGlvbk9wdGlv\nbnMgb3B0aW9uczUgPSBTdWJzY3JpcHRpb25PcHRpb25zLm5ld0J1aWxkZXIo\nKQogICAgICAgICAgICAuc2V0Q3JlYXRlT3JBdHRhY2goQ3JlYXRlT3JBdHRh\nY2guQ1JFQVRFKS5zZXRNZXNzYWdlQm91bmQoNSkuYnVpbGQoKTsKICAgICAg\nICBTdWJzY3JpcHRpb25PcHRpb25zIG9wdGlvbnMyMCA9IFN1YnNjcmlwdGlv\nbk9wdGlvbnMubmV3QnVpbGRlcigpCiAgICAgICAgICAgIC5zZXRDcmVhdGVP\nckF0dGFjaChDcmVhdGVPckF0dGFjaC5DUkVBVEUpLnNldE1lc3NhZ2VCb3Vu\nZCgyMCkuYnVpbGQoKTsKICAgICAgICBTdWJzY3JpcHRpb25PcHRpb25zIG9w\ndGlvbnNVbmJvdW5kZWQgPSBTdWJzY3JpcHRpb25PcHRpb25zLm5ld0J1aWxk\nZXIoKQogICAgICAgICAgICAuc2V0Q3JlYXRlT3JBdHRhY2goQ3JlYXRlT3JB\ndHRhY2guQ1JFQVRFKS5idWlsZCgpOwoKICAgICAgICBCeXRlU3RyaW5nIHN1\nYmlkNSA9IEJ5dGVTdHJpbmcuY29weUZyb21VdGY4KCJib3VuZDVTdWJJZCIp\nOwogICAgICAgIEJ5dGVTdHJpbmcgc3ViaWQyMCA9IEJ5dGVTdHJpbmcuY29w\neUZyb21VdGY4KCJib3VuZDIwU3ViSWQiKTsKICAgICAgICBCeXRlU3RyaW5n\nIHN1YmlkVW5ib3VuZGVkID0gQnl0ZVN0cmluZy5jb3B5RnJvbVV0ZjgoIm5v\nYm91bmRTdWJJZCIpOwoKICAgICAgICBzdWIuc3Vic2NyaWJlKHRvcGljLCBz\ndWJpZDUsIG9wdGlvbnM1KTsKICAgICAgICBzdWIuY2xvc2VTdWJzY3JpcHRp\nb24odG9waWMsIHN1YmlkNSk7CiAgICAgICAgc2VuZFhFeHBlY3RMYXN0WShw\ndWIsIHN1YiwgdG9waWMsIHN1YmlkNSwgMTAwMCwgNSk7CgogICAgICAgIHN1\nYi5zdWJzY3JpYmUodG9waWMsIHN1YmlkMjAsIG9wdGlvbnMyMCk7CiAgICAg\nICAgc3ViLmNsb3NlU3Vic2NyaXB0aW9uKHRvcGljLCBzdWJpZDIwKTsKICAg\nICAgICBzZW5kWEV4cGVjdExhc3RZKHB1Yiwgc3ViLCB0b3BpYywgc3ViaWQy\nMCwgMTAwMCwgMjApOwoKICAgICAgICBzdWIuc3Vic2NyaWJlKHRvcGljLCBz\ndWJpZFVuYm91bmRlZCwgb3B0aW9uc1VuYm91bmRlZCk7CiAgICAgICAgc3Vi\nLmNsb3NlU3Vic2NyaXB0aW9uKHRvcGljLCBzdWJpZFVuYm91bmRlZCk7Cgog\nICAgICAgIHNlbmRYRXhwZWN0TGFzdFkocHViLCBzdWIsIHRvcGljLCBzdWJp\nZFVuYm91bmRlZCwgMTAwMDAsIDEwMDAwKTsKICAgICAgICBzdWIudW5zdWJz\nY3JpYmUodG9waWMsIHN1YmlkVW5ib3VuZGVkKTsKCiAgICAgICAgc2VuZFhF\neHBlY3RMYXN0WShwdWIsIHN1YiwgdG9waWMsIHN1YmlkMjAsIDEwMDAsIDIw\nKTsKICAgICAgICBzdWIudW5zdWJzY3JpYmUodG9waWMsIHN1YmlkMjApOwoK\nICAgICAgICBzZW5kWEV4cGVjdExhc3RZKHB1Yiwgc3ViLCB0b3BpYywgc3Vi\naWQ1LCAxMDAwLCA1KTsKICAgICAgICBzdWIudW5zdWJzY3JpYmUodG9waWMs\nIHN1YmlkNSk7CgogICAgICAgIGNsaWVudC5jbG9zZSgpOwogICAgfQoKICAg\nIEBUZXN0CiAgICBwdWJsaWMgdm9pZCB0ZXN0TGVkZ2VyR0MoKSB0aHJvd3Mg\nRXhjZXB0aW9uIHsKICAgICAgICBDbGllbnQgY2xpZW50ID0gbmV3IEhlZHdp\nZ0NsaWVudChuZXcgTWVzc2FnZUJvdW5kQ2xpZW50Q29uZmlndXJhdGlvbigp\nKTsKICAgICAgICBQdWJsaXNoZXIgcHViID0gY2xpZW50LmdldFB1Ymxpc2hl\ncigpOwogICAgICAgIFN1YnNjcmliZXIgc3ViID0gY2xpZW50LmdldFN1YnNj\ncmliZXIoKTsKCiAgICAgICAgU3RyaW5nIGxlZGdlcnNQYXRoID0gIi9oZWR3\naWcvc3RhbmRhbG9uZS90b3BpY3MvdGVzdEdDVG9waWMvbGVkZ2VycyI7CiAg\nICAgICAgQnl0ZVN0cmluZyB0b3BpYyA9IEJ5dGVTdHJpbmcuY29weUZyb21V\ndGY4KCJ0ZXN0R0NUb3BpYyIpOwogICAgICAgIEJ5dGVTdHJpbmcgc3ViaWQg\nPSBCeXRlU3RyaW5nLmNvcHlGcm9tVXRmOCgidGVzdEdDU3ViSWQiKTsKICAg\nICAgICBzdWIuc3Vic2NyaWJlKHRvcGljLCBzdWJpZCwgQ3JlYXRlT3JBdHRh\nY2guQ1JFQVRFX09SX0FUVEFDSCk7CiAgICAgICAgc3ViLmNsb3NlU3Vic2Ny\naXB0aW9uKHRvcGljLCBzdWJpZCk7CgogICAgICAgIGZvciAoaW50IGkgPSAx\nOyBpIDw9IDEwMDsgaSsrKSB7CiAgICAgICAgICAgIHB1Yi5wdWJsaXNoKHRv\ncGljLCBNZXNzYWdlLm5ld0J1aWxkZXIoKS5zZXRCb2R5KAogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIEJ5dGVTdHJpbmcuY29weUZyb21VdGY4\nKFN0cmluZy52YWx1ZU9mKGkpKSkuYnVpbGQoKSk7CiAgICAgICAgfQogICAg\nICAgIExlZGdlclJhbmdlcyByID0gTGVkZ2VyUmFuZ2VzLnBhcnNlRnJvbShi\na3RiLmdldFpvb0tlZXBlckNsaWVudCgpLmdldERhdGEobGVkZ2Vyc1BhdGgs\nIGZhbHNlLCBudWxsKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJTaG91bGQg\nb25seSBoYXZlIDEgbGVkZ2VyIHlldCIsIDEsIHIuZ2V0UmFuZ2VzTGlzdCgp\nLnNpemUoKSk7CiAgICAgICAgbG9uZyBmaXJzdExlZGdlciA9IHIuZ2V0UmFu\nZ2VzTGlzdCgpLmdldCgwKS5nZXRMZWRnZXJJZCgpOwoKICAgICAgICBzdG9w\nSHViU2VydmVycygpOwogICAgICAgIHN0YXJ0SHViU2VydmVycygpOwoKICAg\nICAgICBwdWIucHVibGlzaCh0b3BpYywgTWVzc2FnZS5uZXdCdWlsZGVyKCku\nc2V0Qm9keSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJ5dGVTdHJp\nbmcuY29weUZyb21VdGY4KFN0cmluZy52YWx1ZU9mKDB4ZGVhZGJlZWYpKSku\nYnVpbGQoKSk7CgogICAgICAgIHIgPSBMZWRnZXJSYW5nZXMucGFyc2VGcm9t\nKGJrdGIuZ2V0Wm9vS2VlcGVyQ2xpZW50KCkuZ2V0RGF0YShsZWRnZXJzUGF0\naCwgZmFsc2UsIG51bGwpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIlNob3Vs\nZCBoYXZlIDIgbGVkZ2VycyBhZnRlciByZXN0YXJ0IiwgMiwgci5nZXRSYW5n\nZXNMaXN0KCkuc2l6ZSgpKTsKCiAgICAgICAgZm9yIChpbnQgaSA9IDEwMDsg\naSA8PSAyMDA7IGkrKykgewogICAgICAgICAgICBwdWIucHVibGlzaCh0b3Bp\nYywgTWVzc2FnZS5uZXdCdWlsZGVyKCkuc2V0Qm9keSgKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICBCeXRlU3RyaW5nLmNvcHlGcm9tVXRmOChT\ndHJpbmcudmFsdWVPZihpKSkpLmJ1aWxkKCkpOwogICAgICAgIH0KICAgICAg\nICBUaHJlYWQuc2xlZXAoNTAwMCk7IC8vIGdpdmUgR0MgYSBjaGFuY2UgdG8g\naGFwcGVuCgogICAgICAgIHIgPSBMZWRnZXJSYW5nZXMucGFyc2VGcm9tKGJr\ndGIuZ2V0Wm9vS2VlcGVyQ2xpZW50KCkuZ2V0RGF0YShsZWRnZXJzUGF0aCwg\nZmFsc2UsIG51bGwpKTsKICAgICAgICBsb25nIHNlY29uZExlZGdlciA9IHIu\nZ2V0UmFuZ2VzTGlzdCgpLmdldCgwKS5nZXRMZWRnZXJJZCgpOwoKICAgICAg\nICBhc3NlcnRFcXVhbHMoIlNob3VsZCBvbmx5IGhhdmUgMSBsZWRnZXIgYWZ0\nZXIgR0MiLCAxLCByLmdldFJhbmdlc0xpc3QoKS5zaXplKCkpOwoKICAgICAg\nICAvLyBlbnN1cmUgb3JpZ2luYWwgbGVkZ2VyIGRvZXNuJ3QgZXhpc3QKICAg\nICAgICBTdHJpbmcgZmlyc3RMZWRnZXJQYXRoID0gU3RyaW5nLmZvcm1hdCgi\nL2xlZGdlcnMvTCUwMTBkIiwgZmlyc3RMZWRnZXIpOwogICAgICAgIFN0cmlu\nZyBzZWNvbmRMZWRnZXJQYXRoID0gU3RyaW5nLmZvcm1hdCgiL2xlZGdlcnMv\nTCUwMTBkIiwgc2Vjb25kTGVkZ2VyKTsKICAgICAgICBhc3NlcnROdWxsKCJM\nZWRnZXIgc2hvdWxkIG5vdCBleGlzdCIsIGJrdGIuZ2V0Wm9vS2VlcGVyQ2xp\nZW50KCkuZXhpc3RzKGZpcnN0TGVkZ2VyUGF0aCwgZmFsc2UpKTsKICAgICAg\nICBhc3NlcnROb3ROdWxsKCJMZWRnZXIgc2hvdWxkIGV4aXN0IiwgYmt0Yi5n\nZXRab29LZWVwZXJDbGllbnQoKS5leGlzdHMoc2Vjb25kTGVkZ2VyUGF0aCwg\nZmFsc2UpKTsKCiAgICAgICAgY2xpZW50LmNsb3NlKCk7CiAgICB9Cn0K\n","encoding":"base64"}

