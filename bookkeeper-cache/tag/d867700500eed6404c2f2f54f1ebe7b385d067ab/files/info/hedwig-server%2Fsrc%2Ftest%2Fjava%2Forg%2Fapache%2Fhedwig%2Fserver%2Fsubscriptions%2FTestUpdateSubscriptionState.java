{"sha":"d21eef3e45f106f2df3263e2fcbcadc2223d85e1","node_id":"MDQ6QmxvYjE1NzU5NTY6ZDIxZWVmM2U0NWYxMDZmMmRmMzI2M2UyZmNiY2FkYzIyMjNkODVlMQ==","size":8955,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/d21eef3e45f106f2df3263e2fcbcadc2223d85e1","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIuc3Vic2NyaXB0aW9uczsK\nCmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5TeW5jaHJvbm91c1F1ZXVl\nOwoKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLmNsaWVudC5IZWR3aWdDbGll\nbnQ7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQuYXBpLk1lc3Nh\nZ2VIYW5kbGVyOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuY2xpZW50LmFw\naS5QdWJsaXNoZXI7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5jbGllbnQu\nYXBpLlN1YnNjcmliZXI7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5jbGll\nbnQuY29uZi5DbGllbnRDb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNo\nZS5oZWR3aWcucHJvdG9jb2wuUHViU3ViUHJvdG9jb2wuTWVzc2FnZTsKaW1w\nb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnByb3RvY29sLlB1YlN1YlByb3RvY29s\nLlN1YnNjcmliZVJlcXVlc3QuQ3JlYXRlT3JBdHRhY2g7CmltcG9ydCBvcmcu\nYXBhY2hlLmhlZHdpZy5zZXJ2ZXIuSGVkd2lnSHViVGVzdEJhc2U7CmltcG9y\ndCBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIuY29tbW9uLlNlcnZlckNvbmZp\nZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy51dGlsLkNhbGxi\nYWNrOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcudXRpbC5Db25jdXJyZW5j\neVV0aWxzOwppbXBvcnQgb3JnLmp1bml0LkFmdGVyOwppbXBvcnQgb3JnLmp1\nbml0LkJlZm9yZTsKaW1wb3J0IG9yZy5qdW5pdC5UZXN0OwoKaW1wb3J0IGNv\nbS5nb29nbGUucHJvdG9idWYuQnl0ZVN0cmluZzsKCnB1YmxpYyBjbGFzcyBU\nZXN0VXBkYXRlU3Vic2NyaXB0aW9uU3RhdGUgZXh0ZW5kcyBIZWR3aWdIdWJU\nZXN0QmFzZSB7CgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgaW50IFJFVEVO\nVElPTl9TRUNTX1ZBTFVFID0gMTAwOwoKICAgIC8vIENsaWVudCBzaWRlIHZh\ncmlhYmxlcwogICAgcHJvdGVjdGVkIEhlZHdpZ0NsaWVudCBjbGllbnQ7CiAg\nICBwcm90ZWN0ZWQgUHVibGlzaGVyIHB1Ymxpc2hlcjsKICAgIHByb3RlY3Rl\nZCBTdWJzY3JpYmVyIHN1YnNjcmliZXI7CgogICAgLy8gU3luY2hyb25vdXNR\ndWV1ZXMgdG8gdmVyaWZ5IGFzeW5jIGNhbGxzCiAgICBwcml2YXRlIGZpbmFs\nIFN5bmNocm9ub3VzUXVldWU8Qm9vbGVhbj4gcXVldWUgPSBuZXcgU3luY2hy\nb25vdXNRdWV1ZTxCb29sZWFuPigpOwoKICAgIC8vIFRlc3QgaW1wbGVtZW50\nYXRpb24gb2Ygc3Vic2NyaWJlcidzIG1lc3NhZ2UgaGFuZGxlcgogICAgY2xh\nc3MgT3JkZXJDaGVja2luZ01lc3NhZ2VIYW5kbGVyIGltcGxlbWVudHMgTWVz\nc2FnZUhhbmRsZXIgewoKICAgICAgICBCeXRlU3RyaW5nIHRvcGljOwogICAg\nICAgIEJ5dGVTdHJpbmcgc3Vic2NyaWJlcklkOwogICAgICAgIGludCBzdGFy\ndE1zZ0lkOwogICAgICAgIGludCBudW1Nc2dzOwogICAgICAgIGludCBlbmRN\nc2dJZDsKICAgICAgICBib29sZWFuIGluT3JkZXIgPSB0cnVlOwoKICAgICAg\nICBPcmRlckNoZWNraW5nTWVzc2FnZUhhbmRsZXIoQnl0ZVN0cmluZyB0b3Bp\nYywgQnl0ZVN0cmluZyBzdWJzY3JpYmVySWQsCiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIGludCBzdGFydE1zZ0lkLCBpbnQgbnVtTXNn\ncykgewogICAgICAgICAgICB0aGlzLnRvcGljID0gdG9waWM7CiAgICAgICAg\nICAgIHRoaXMuc3Vic2NyaWJlcklkID0gc3Vic2NyaWJlcklkOwogICAgICAg\nICAgICB0aGlzLnN0YXJ0TXNnSWQgPSBzdGFydE1zZ0lkOwogICAgICAgICAg\nICB0aGlzLm51bU1zZ3MgPSBudW1Nc2dzOwogICAgICAgICAgICB0aGlzLmVu\nZE1zZ0lkID0gc3RhcnRNc2dJZCArIG51bU1zZ3MgLSAxOwogICAgICAgIH0K\nCiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHVibGljIHZvaWQgZGVsaXZl\ncihCeXRlU3RyaW5nIHRoaXNUb3BpYywgQnl0ZVN0cmluZyB0aGlzU3Vic2Ny\naWJlcklkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZSBt\nc2csIENhbGxiYWNrPFZvaWQ+IGNhbGxiYWNrLCBPYmplY3QgY29udGV4dCkg\newogICAgICAgICAgICBpZiAoIXRvcGljLmVxdWFscyh0aGlzVG9waWMpIHx8\nCiAgICAgICAgICAgICAgICAhc3Vic2NyaWJlcklkLmVxdWFscyh0aGlzU3Vi\nc2NyaWJlcklkKSkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAg\nICAgICB9CiAgICAgICAgICAgIC8vIGNoZWNrIG9yZGVyCiAgICAgICAgICAg\nIGludCBtc2dJZCA9IEludGVnZXIucGFyc2VJbnQobXNnLmdldEJvZHkoKS50\nb1N0cmluZ1V0ZjgoKSk7CiAgICAgICAgICAgIGlmIChsb2dnZXIuaXNEZWJ1\nZ0VuYWJsZWQoKSkgewogICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCJS\nZWNlaXZlZCBtZXNzYWdlIDogIiArIG1zZ0lkKTsKICAgICAgICAgICAgfQoK\nICAgICAgICAgICAgaWYgKGluT3JkZXIpIHsKICAgICAgICAgICAgICAgIGlm\nIChzdGFydE1zZ0lkICE9IG1zZ0lkKSB7CiAgICAgICAgICAgICAgICAgICAg\nbG9nZ2VyLmVycm9yKCJFeHBlY3RlZCBtZXNzYWdlICIgKyBzdGFydE1zZ0lk\nICsgIiwgYnV0IHJlY2VpdmVkIG1lc3NhZ2UgIiArIG1zZ0lkKTsKICAgICAg\nICAgICAgICAgICAgICBpbk9yZGVyID0gZmFsc2U7CiAgICAgICAgICAgICAg\nICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICsrc3RhcnRNc2dJZDsK\nICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBj\nYWxsYmFjay5vcGVyYXRpb25GaW5pc2hlZChjb250ZXh0LCBudWxsKTsKICAg\nICAgICAgICAgaWYgKG1zZ0lkID09IGVuZE1zZ0lkKSB7CiAgICAgICAgICAg\nICAgICBuZXcgVGhyZWFkKG5ldyBSdW5uYWJsZSgpIHsKICAgICAgICAgICAg\nICAgICAgICBAT3ZlcnJpZGUKICAgICAgICAgICAgICAgICAgICBwdWJsaWMg\ndm9pZCBydW4oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsb2dn\nZXIuaXNEZWJ1Z0VuYWJsZWQoKSkgewogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgbG9nZ2VyLmRlYnVnKCJEZWxpdmVyIGZpbmlzaGVkISIpOwogICAg\nICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAg\nIENvbmN1cnJlbmN5VXRpbHMucHV0KHF1ZXVlLCB0cnVlKTsKICAgICAgICAg\nICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KS5zdGFydCgpOwogICAg\nICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgYm9vbGVhbiBp\nc0luT3JkZXIoKSB7CiAgICAgICAgICAgIHJldHVybiBpbk9yZGVyOwogICAg\nICAgIH0KICAgIH0KCiAgICBwdWJsaWMgVGVzdFVwZGF0ZVN1YnNjcmlwdGlv\nblN0YXRlKCkgewogICAgICAgIHN1cGVyKDEpOwogICAgfQoKICAgIHByb3Rl\nY3RlZCBjbGFzcyBOZXdIdWJTZXJ2ZXJDb25maWd1cmF0aW9uIGV4dGVuZHMg\nSHViU2VydmVyQ29uZmlndXJhdGlvbiB7CgogICAgICAgIHB1YmxpYyBOZXdI\ndWJTZXJ2ZXJDb25maWd1cmF0aW9uKGludCBzZXJ2ZXJQb3J0LCBpbnQgc3Ns\nU2VydmVyUG9ydCkgewogICAgICAgICAgICBzdXBlcihzZXJ2ZXJQb3J0LCBz\nc2xTZXJ2ZXJQb3J0KTsKICAgICAgICB9CgogICAgICAgIEBPdmVycmlkZQog\nICAgICAgIHB1YmxpYyBpbnQgZ2V0UmV0ZW50aW9uU2VjcygpIHsKICAgICAg\nICAgICAgcmV0dXJuIFJFVEVOVElPTl9TRUNTX1ZBTFVFOwogICAgICAgIH0K\nCiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwcm90ZWN0ZWQgU2VydmVyQ29u\nZmlndXJhdGlvbiBnZXRTZXJ2ZXJDb25maWd1cmF0aW9uKGludCBzZXJ2ZXJQ\nb3J0LCBpbnQgc3NsU2VydmVyUG9ydCkgewogICAgICAgIHJldHVybiBuZXcg\nTmV3SHViU2VydmVyQ29uZmlndXJhdGlvbihzZXJ2ZXJQb3J0LCBzc2xTZXJ2\nZXJQb3J0KTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgY2xhc3MgVGVzdENsaWVu\ndENvbmZpZ3VyYXRpb24gZXh0ZW5kcyBDbGllbnRDb25maWd1cmF0aW9uIHsK\nICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgYm9vbGVhbiBpc0F1\ndG9TZW5kQ29uc3VtZU1lc3NhZ2VFbmFibGVkKCkgewogICAgICAgICAgICBy\nZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICB9CgogICAgQE92ZXJyaWRlCiAg\nICBAQmVmb3JlCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpIHRocm93cyBFeGNl\ncHRpb24gewogICAgICAgIHN1cGVyLnNldFVwKCk7CiAgICAgICAgY2xpZW50\nID0gbmV3IEhlZHdpZ0NsaWVudChuZXcgVGVzdENsaWVudENvbmZpZ3VyYXRp\nb24oKSk7CiAgICAgICAgcHVibGlzaGVyID0gY2xpZW50LmdldFB1Ymxpc2hl\ncigpOwogICAgICAgIHN1YnNjcmliZXIgPSBjbGllbnQuZ2V0U3Vic2NyaWJl\ncigpOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgQEFmdGVyCiAgICBwdWJs\naWMgdm9pZCB0ZWFyRG93bigpIHRocm93cyBFeGNlcHRpb24gewogICAgICAg\nIGNsaWVudC5jbG9zZSgpOwogICAgICAgIHN1cGVyLnRlYXJEb3duKCk7CiAg\nICB9CgogICAgQFRlc3QKICAgIHB1YmxpYyB2b2lkIHRlc3RDb25zdW1lV2hl\nblRvcGljUmVsZWFzZSgpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIEJ5\ndGVTdHJpbmcgdG9waWMgPSBCeXRlU3RyaW5nLmNvcHlGcm9tVXRmOCgiVGVz\ndENvbnN1bWVXaGVuVG9waWNSZWxlYXNlIik7CiAgICAgICAgQnl0ZVN0cmlu\nZyBzdWJJZCA9IEJ5dGVTdHJpbmcuY29weUZyb21VdGY4KCJteXN1YiIpOwoK\nICAgICAgICBpbnQgc3RhcnRNc2dJZCA9IDA7CiAgICAgICAgaW50IG51bU1z\nZ3MgPSAxMDsKICAgICAgICAvLyBzdWJzY3JpYmVyIGluIGNsaWVudAogICAg\nICAgIHN1YnNjcmliZXIuc3Vic2NyaWJlKHRvcGljLCBzdWJJZCwgQ3JlYXRl\nT3JBdHRhY2guQ1JFQVRFX09SX0FUVEFDSCk7CiAgICAgICAgLy8gc3RhcnQg\nZGVsaXZlcnkKICAgICAgICBPcmRlckNoZWNraW5nTWVzc2FnZUhhbmRsZXIg\nb2NtID0gbmV3IE9yZGVyQ2hlY2tpbmdNZXNzYWdlSGFuZGxlcigKICAgICAg\nICAgICAgICAgIHRvcGljLCBzdWJJZCwgc3RhcnRNc2dJZCwgbnVtTXNncyk7\nCiAgICAgICAgc3Vic2NyaWJlci5zdGFydERlbGl2ZXJ5KHRvcGljLCBzdWJJ\nZCwgb2NtKTsKICAgICAgICBmb3IgKGludCBpPTA7IGk8bnVtTXNnczsgaSsr\nKSB7CiAgICAgICAgICAgIE1lc3NhZ2UgbXNnID0gTWVzc2FnZS5uZXdCdWls\nZGVyKCkuc2V0Qm9keSgKICAgICAgICAgICAgICAgICAgICBCeXRlU3RyaW5n\nLmNvcHlGcm9tVXRmOChJbnRlZ2VyLnRvU3RyaW5nKHN0YXJ0TXNnSWQgKyBp\nKSkpLmJ1aWxkKCk7CiAgICAgICAgICAgIHB1Ymxpc2hlci5wdWJsaXNoKHRv\ncGljLCBtc2cpOwogICAgICAgIH0KICAgICAgICBsb2dnZXIuaW5mbygiUHVi\nbGlzaCBmaW5pc2hlZC4iKTsKICAgICAgICBxdWV1ZS50YWtlKCk7CiAgICAg\nICAgbG9nZ2VyLmluZm8oIkRlbGl2ZXIgZmluaXNoZWQuIik7CiAgICAgICAg\nLy8gY2hlY2sgbWVzc2FnZXMgcmVjZWl2ZWQgaW4gb3JkZXIKICAgICAgICBh\nc3NlcnRUcnVlKG9jbS5pc0luT3JkZXIoKSk7CgogICAgICAgIC8vIHdhaXQg\nZm9yIHJldGVudGlvbiBzZWNzCiAgICAgICAgVGhyZWFkLnNsZWVwKChSRVRF\nTlRJT05fU0VDU19WQUxVRSArIDIpICogMTAwMCk7CgogICAgICAgIHN1YnNj\ncmliZXIuc3RvcERlbGl2ZXJ5KHRvcGljLCBzdWJJZCk7CiAgICAgICAgc3Vi\nc2NyaWJlci5jbG9zZVN1YnNjcmlwdGlvbih0b3BpYywgc3ViSWQpOwoKICAg\nICAgICBzdGFydE1zZ0lkID0gMjA7CiAgICAgICAgLy8gcmVjb25uZWN0IGl0\nIGFnYWluCiAgICAgICAgc3Vic2NyaWJlci5zdWJzY3JpYmUodG9waWMsIHN1\nYklkLCBDcmVhdGVPckF0dGFjaC5DUkVBVEVfT1JfQVRUQUNIKTsKICAgICAg\nICBvY20gPSBuZXcgT3JkZXJDaGVja2luZ01lc3NhZ2VIYW5kbGVyKHRvcGlj\nLCBzdWJJZCwgc3RhcnRNc2dJZCwgbnVtTXNncyk7CiAgICAgICAgc3Vic2Ny\naWJlci5zdGFydERlbGl2ZXJ5KHRvcGljLCBzdWJJZCwgb2NtKTsKICAgICAg\nICBmb3IgKGludCBpPTA7IGk8bnVtTXNnczsgaSsrKSB7CiAgICAgICAgICAg\nIE1lc3NhZ2UgbXNnID0gTWVzc2FnZS5uZXdCdWlsZGVyKCkuc2V0Qm9keSgK\nICAgICAgICAgICAgICAgICAgICBCeXRlU3RyaW5nLmNvcHlGcm9tVXRmOChJ\nbnRlZ2VyLnRvU3RyaW5nKHN0YXJ0TXNnSWQgKyBpKSkpLmJ1aWxkKCk7CiAg\nICAgICAgICAgIHB1Ymxpc2hlci5wdWJsaXNoKHRvcGljLCBtc2cpOwogICAg\nICAgIH0KICAgICAgICBxdWV1ZS50YWtlKCk7CiAgICAgICAgLy8gY2hlY2sg\nbWVzc2FnZXMgcmVjZWl2ZWQgaW4gb3JkZXIKICAgICAgICBhc3NlcnRUcnVl\nKG9jbS5pc0luT3JkZXIoKSk7CiAgICB9CgogICAgQFRlc3QKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RDb25zdW1lV2hlbkh1YlNodXRkb3duKCkgdGhyb3dzIEV4\nY2VwdGlvbiB7CiAgICAgICAgQnl0ZVN0cmluZyB0b3BpYyA9IEJ5dGVTdHJp\nbmcuY29weUZyb21VdGY4KCJUZXN0Q29uc3VtZVdoZW5IdWJTaHV0ZG93biIp\nOwogICAgICAgIEJ5dGVTdHJpbmcgc3ViSWQgPSBCeXRlU3RyaW5nLmNvcHlG\ncm9tVXRmOCgibXlzdWIiKTsKCiAgICAgICAgaW50IHN0YXJ0TXNnSWQgPSAw\nOwogICAgICAgIGludCBudW1Nc2dzID0gMTA7CiAgICAgICAgLy8gc3Vic2Ny\naWJlciBpbiBjbGllbnQKICAgICAgICBzdWJzY3JpYmVyLnN1YnNjcmliZSh0\nb3BpYywgc3ViSWQsIENyZWF0ZU9yQXR0YWNoLkNSRUFURV9PUl9BVFRBQ0gp\nOwogICAgICAgIC8vIHN0YXJ0IGRlbGl2ZXJ5CiAgICAgICAgT3JkZXJDaGVj\na2luZ01lc3NhZ2VIYW5kbGVyIG9jbSA9IG5ldyBPcmRlckNoZWNraW5nTWVz\nc2FnZUhhbmRsZXIoCiAgICAgICAgICAgICAgICB0b3BpYywgc3ViSWQsIHN0\nYXJ0TXNnSWQsIG51bU1zZ3MpOwogICAgICAgIHN1YnNjcmliZXIuc3RhcnRE\nZWxpdmVyeSh0b3BpYywgc3ViSWQsIG9jbSk7CiAgICAgICAgZm9yIChpbnQg\naT0wOyBpPG51bU1zZ3M7IGkrKykgewogICAgICAgICAgICBNZXNzYWdlIG1z\nZyA9IE1lc3NhZ2UubmV3QnVpbGRlcigpLnNldEJvZHkoCiAgICAgICAgICAg\nICAgICAgICAgQnl0ZVN0cmluZy5jb3B5RnJvbVV0ZjgoSW50ZWdlci50b1N0\ncmluZyhzdGFydE1zZ0lkICsgaSkpKS5idWlsZCgpOwogICAgICAgICAgICBw\ndWJsaXNoZXIucHVibGlzaCh0b3BpYywgbXNnKTsKICAgICAgICB9CiAgICAg\nICAgbG9nZ2VyLmluZm8oIlB1Ymxpc2ggZmluaXNoZWQuIik7CiAgICAgICAg\ncXVldWUudGFrZSgpOwogICAgICAgIGxvZ2dlci5pbmZvKCJEZWxpdmVyIGZp\nbmlzaGVkLiIpOwogICAgICAgIC8vIGNoZWNrIG1lc3NhZ2VzIHJlY2VpdmVk\nIGluIG9yZGVyCiAgICAgICAgYXNzZXJ0VHJ1ZShvY20uaXNJbk9yZGVyKCkp\nOwogICAgICAgIC8vIG1ha2Ugc3VyZSBjb25zdW1lIHJlcXVlc3Qgc2VudCB0\nbyBodWIgc2VydmVyIGJlZm9yZSBzaHV0IGRvd24KICAgICAgICBUaHJlYWQu\nc2xlZXAoMjAwMCk7CiAgICAgICAgc3Vic2NyaWJlci5zdG9wRGVsaXZlcnko\ndG9waWMsIHN1YklkKTsKICAgICAgICBzdWJzY3JpYmVyLmNsb3NlU3Vic2Ny\naXB0aW9uKHRvcGljLCBzdWJJZCk7CgogICAgICAgIHN0b3BIdWJTZXJ2ZXJz\nKCk7CiAgICAgICAgVGhyZWFkLnNsZWVwKDEwMDApOwogICAgICAgIHN0YXJ0\nSHViU2VydmVycygpOwoKICAgICAgICBzdGFydE1zZ0lkID0gMjA7CiAgICAg\nICAgLy8gcmVjb25uZWN0IGl0IGFnYWluCiAgICAgICAgc3Vic2NyaWJlci5z\ndWJzY3JpYmUodG9waWMsIHN1YklkLCBDcmVhdGVPckF0dGFjaC5DUkVBVEVf\nT1JfQVRUQUNIKTsKICAgICAgICBvY20gPSBuZXcgT3JkZXJDaGVja2luZ01l\nc3NhZ2VIYW5kbGVyKHRvcGljLCBzdWJJZCwgc3RhcnRNc2dJZCwgbnVtTXNn\ncyk7CiAgICAgICAgc3Vic2NyaWJlci5zdGFydERlbGl2ZXJ5KHRvcGljLCBz\ndWJJZCwgb2NtKTsKICAgICAgICBmb3IgKGludCBpPTA7IGk8bnVtTXNnczsg\naSsrKSB7CiAgICAgICAgICAgIE1lc3NhZ2UgbXNnID0gTWVzc2FnZS5uZXdC\ndWlsZGVyKCkuc2V0Qm9keSgKICAgICAgICAgICAgICAgICAgICBCeXRlU3Ry\naW5nLmNvcHlGcm9tVXRmOChJbnRlZ2VyLnRvU3RyaW5nKHN0YXJ0TXNnSWQg\nKyBpKSkpLmJ1aWxkKCk7CiAgICAgICAgICAgIHB1Ymxpc2hlci5wdWJsaXNo\nKHRvcGljLCBtc2cpOwogICAgICAgIH0KICAgICAgICBxdWV1ZS50YWtlKCk7\nCiAgICAgICAgLy8gY2hlY2sgbWVzc2FnZXMgcmVjZWl2ZWQgaW4gb3JkZXIK\nICAgICAgICBhc3NlcnRUcnVlKG9jbS5pc0luT3JkZXIoKSk7CiAgICB9Cn0K\n","encoding":"base64"}

