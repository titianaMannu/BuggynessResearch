{"sha":"9558acf7b50ee5ca05984d2f25e0e57a8dcbe74f","node_id":"MDQ6QmxvYjE1NzU5NTY6OTU1OGFjZjdiNTBlZTVjYTA1OTg0ZDJmMjVlMGU1N2E4ZGNiZTc0Zg==","size":9950,"url":"https://api.github.com/repos/apache/bookkeeper/git/blobs/9558acf7b50ee5ca05984d2f25e0e57a8dcbe74f","content":"LyoqCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUKICogb3IgbW9yZSBjb250cmlidXRvciBs\naWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlCiAqIGRp\nc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9y\nbWF0aW9uCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhl\nIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUKICogdG8geW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIp\nOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlh\nbmNlCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNv\ncHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBh\nY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVx\ndWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRp\nbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNl\nIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhP\nVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRo\nZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9y\nIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMg\nYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KcGFj\na2FnZSBvcmcuYXBhY2hlLmhlZHdpZy5zZXJ2ZXIuc3Vic2NyaXB0aW9uczsK\nCmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5FeGVjdXRvcnM7CmltcG9y\ndCBqYXZhLnV0aWwuY29uY3VycmVudC5TY2hlZHVsZWRFeGVjdXRvclNlcnZp\nY2U7CmltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5TeW5jaHJvbm91c1F1\nZXVlOwoKaW1wb3J0IG9yZy5qdW5pdC5Bc3NlcnQ7CmltcG9ydCBvcmcuanVu\naXQuVGVzdDsKCmltcG9ydCBjb20uZ29vZ2xlLnByb3RvYnVmLkJ5dGVTdHJp\nbmc7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5leGNlcHRpb25zLlB1YlN1\nYkV4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnByb3RvY29s\nLlB1YlN1YlByb3RvY29sLk1lc3NhZ2VTZXFJZDsKaW1wb3J0IG9yZy5hcGFj\naGUuaGVkd2lnLnByb3RvY29sLlB1YlN1YlByb3RvY29sLlN1YnNjcmliZVJl\ncXVlc3Q7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy5wcm90b2NvbC5QdWJT\ndWJQcm90b2NvbC5TdWJzY3JpYmVSZXF1ZXN0LkNyZWF0ZU9yQXR0YWNoOwpp\nbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuc2VydmVyLmNvbW1vbi5TZXJ2ZXJD\nb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5oZWR3aWcuc2VydmVy\nLnRvcGljcy5Ucml2aWFsT3duQWxsVG9waWNNYW5hZ2VyOwppbXBvcnQgb3Jn\nLmFwYWNoZS5oZWR3aWcuc2VydmVyLnBlcnNpc3RlbmNlLkxvY2FsREJQZXJz\naXN0ZW5jZU1hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy51dGls\nLkNvbmN1cnJlbmN5VXRpbHM7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy51\ndGlsLkVpdGhlcjsKaW1wb3J0IG9yZy5hcGFjaGUuaGVkd2lnLnV0aWwuQ2Fs\nbGJhY2s7CmltcG9ydCBvcmcuYXBhY2hlLmhlZHdpZy56b29rZWVwZXIuWm9v\nS2VlcGVyVGVzdEJhc2U7CgpwdWJsaWMgY2xhc3MgVGVzdFprU3Vic2NyaXB0\naW9uTWFuYWdlciBleHRlbmRzIFpvb0tlZXBlclRlc3RCYXNlIHsKICAgIFpr\nU3Vic2NyaXB0aW9uTWFuYWdlciBzbTsKICAgIFNlcnZlckNvbmZpZ3VyYXRp\nb24gY2ZnID0gbmV3IFNlcnZlckNvbmZpZ3VyYXRpb24oKTsKICAgIFN5bmNo\ncm9ub3VzUXVldWU8RWl0aGVyPE1lc3NhZ2VTZXFJZCwgUHViU3ViRXhjZXB0\naW9uPj4gbXNnSWRDYWxsYmFja1F1ZXVlID0gbmV3IFN5bmNocm9ub3VzUXVl\ndWU8RWl0aGVyPE1lc3NhZ2VTZXFJZCwgUHViU3ViRXhjZXB0aW9uPj4oKTsK\nICAgIFN5bmNocm9ub3VzUXVldWU8RWl0aGVyPEJvb2xlYW4sIFB1YlN1YkV4\nY2VwdGlvbj4+IEJvb2xlYW5DYWxsYmFja1F1ZXVlID0gbmV3IFN5bmNocm9u\nb3VzUXVldWU8RWl0aGVyPEJvb2xlYW4sIFB1YlN1YkV4Y2VwdGlvbj4+KCk7\nCgogICAgQ2FsbGJhY2s8Vm9pZD4gdm9pZENhbGxiYWNrOwogICAgQ2FsbGJh\nY2s8TWVzc2FnZVNlcUlkPiBtc2dJZENhbGxiYWNrOwoKICAgIEBPdmVycmlk\nZQogICAgcHVibGljIHZvaWQgc2V0VXAoKSB0aHJvd3MgRXhjZXB0aW9uIHsK\nICAgICAgICBzdXBlci5zZXRVcCgpOwogICAgICAgIGNmZyA9IG5ldyBTZXJ2\nZXJDb25maWd1cmF0aW9uKCk7CiAgICAgICAgZmluYWwgU2NoZWR1bGVkRXhl\nY3V0b3JTZXJ2aWNlIHNjaGVkdWxlciA9IEV4ZWN1dG9ycy5uZXdTY2hlZHVs\nZWRUaHJlYWRQb29sKDEpOwogICAgICAgIHNtID0gbmV3IFprU3Vic2NyaXB0\naW9uTWFuYWdlcih6aywgbmV3IFRyaXZpYWxPd25BbGxUb3BpY01hbmFnZXIo\nY2ZnLCBzY2hlZHVsZXIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICBMb2NhbERCUGVyc2lzdGVuY2VNYW5hZ2VyLmluc3RhbmNl\nKCksIGNmZywgc2NoZWR1bGVyKTsKICAgICAgICBtc2dJZENhbGxiYWNrID0g\nbmV3IENhbGxiYWNrPE1lc3NhZ2VTZXFJZD4oKSB7CiAgICAgICAgICAgIEBP\ndmVycmlkZQogICAgICAgICAgICBwdWJsaWMgdm9pZCBvcGVyYXRpb25GYWls\nZWQoT2JqZWN0IGN0eCwgZmluYWwgUHViU3ViRXhjZXB0aW9uIGV4Y2VwdGlv\nbikgewogICAgICAgICAgICAgICAgc2NoZWR1bGVyLmV4ZWN1dGUobmV3IFJ1\nbm5hYmxlKCkgewogICAgICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1\nbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgQ29uY3VycmVuY3lVdGls\ncy5wdXQobXNnSWRDYWxsYmFja1F1ZXVlLCBFaXRoZXIub2YoKE1lc3NhZ2VT\nZXFJZCkgbnVsbCwgZXhjZXB0aW9uKSk7CiAgICAgICAgICAgICAgICAgICAg\nfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAg\nICAgIEBPdmVycmlkZQogICAgICAgICAgICBwdWJsaWMgdm9pZCBvcGVyYXRp\nb25GaW5pc2hlZChPYmplY3QgY3R4LCBmaW5hbCBNZXNzYWdlU2VxSWQgcmVz\ndWx0T2ZPcGVyYXRpb24pIHsKICAgICAgICAgICAgICAgIHNjaGVkdWxlci5l\neGVjdXRlKG5ldyBSdW5uYWJsZSgpIHsKICAgICAgICAgICAgICAgICAgICBw\ndWJsaWMgdm9pZCBydW4oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIENv\nbmN1cnJlbmN5VXRpbHMucHV0KG1zZ0lkQ2FsbGJhY2tRdWV1ZSwgRWl0aGVy\nLm9mKHJlc3VsdE9mT3BlcmF0aW9uLCAoUHViU3ViRXhjZXB0aW9uKSBudWxs\nKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7\nCiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICB2b2lkQ2FsbGJh\nY2sgPSBuZXcgQ2FsbGJhY2s8Vm9pZD4oKSB7CiAgICAgICAgICAgIEBPdmVy\ncmlkZQogICAgICAgICAgICBwdWJsaWMgdm9pZCBvcGVyYXRpb25GYWlsZWQo\nT2JqZWN0IGN0eCwgZmluYWwgUHViU3ViRXhjZXB0aW9uIGV4Y2VwdGlvbikg\newogICAgICAgICAgICAgICAgc2NoZWR1bGVyLmV4ZWN1dGUobmV3IFJ1bm5h\nYmxlKCkgewogICAgICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigp\nIHsKICAgICAgICAgICAgICAgICAgICAgICAgQ29uY3VycmVuY3lVdGlscy5w\ndXQoQm9vbGVhbkNhbGxiYWNrUXVldWUsIEVpdGhlci5vZigoQm9vbGVhbikg\nbnVsbCwgZXhjZXB0aW9uKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAg\nICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIEBP\ndmVycmlkZQogICAgICAgICAgICBwdWJsaWMgdm9pZCBvcGVyYXRpb25GaW5p\nc2hlZChPYmplY3QgY3R4LCBWb2lkIHJlc3VsdE9mT3BlcmF0aW9uKSB7CiAg\nICAgICAgICAgICAgICBzY2hlZHVsZXIuZXhlY3V0ZShuZXcgUnVubmFibGUo\nKSB7CiAgICAgICAgICAgICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkgewog\nICAgICAgICAgICAgICAgICAgICAgICBDb25jdXJyZW5jeVV0aWxzLnB1dChC\nb29sZWFuQ2FsbGJhY2tRdWV1ZSwgRWl0aGVyLm9mKHRydWUsIChQdWJTdWJF\neGNlcHRpb24pIG51bGwpKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAg\nICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAg\nfQoKICAgIEBUZXN0CiAgICBwdWJsaWMgdm9pZCB0ZXN0QmFzaWNzKCkgdGhy\nb3dzIEV4Y2VwdGlvbiB7CgogICAgICAgIEJ5dGVTdHJpbmcgdG9waWMxID0g\nQnl0ZVN0cmluZy5jb3B5RnJvbVV0ZjgoInRvcGljMSIpOwogICAgICAgIEJ5\ndGVTdHJpbmcgc3ViMSA9IEJ5dGVTdHJpbmcuY29weUZyb21VdGY4KCJzdWIx\nIik7CgogICAgICAgIC8vCiAgICAgICAgLy8gTm8gdG9waWNzIGFjcXVpcmVk\nLgogICAgICAgIC8vCiAgICAgICAgU3Vic2NyaWJlUmVxdWVzdCBzdWJSZXF1\nZXN0ID0gU3Vic2NyaWJlUmVxdWVzdC5uZXdCdWlsZGVyKCkuc2V0U3Vic2Ny\naWJlcklkKHN1YjEpLmJ1aWxkKCk7CiAgICAgICAgTWVzc2FnZVNlcUlkIG1z\nZ0lkID0gTWVzc2FnZVNlcUlkLm5ld0J1aWxkZXIoKS5zZXRMb2NhbENvbXBv\nbmVudCgxMDApLmJ1aWxkKCk7CgogICAgICAgIHNtLnNlcnZlU3Vic2NyaWJl\nUmVxdWVzdCh0b3BpYzEsIHN1YlJlcXVlc3QsIG1zZ0lkLCBtc2dJZENhbGxi\nYWNrLCBudWxsKTsKCiAgICAgICAgQXNzZXJ0LmFzc2VydEVxdWFscyhDb25j\ndXJyZW5jeVV0aWxzLnRha2UobXNnSWRDYWxsYmFja1F1ZXVlKS5yaWdodCgp\nLmdldENsYXNzKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQdWJT\ndWJFeGNlcHRpb24uU2VydmVyTm90UmVzcG9uc2libGVGb3JUb3BpY0V4Y2Vw\ndGlvbi5jbGFzcyk7CgogICAgICAgIHNtLnVuc3Vic2NyaWJlKHRvcGljMSwg\nc3ViMSwgdm9pZENhbGxiYWNrLCBudWxsKTsKCiAgICAgICAgQXNzZXJ0LmFz\nc2VydEVxdWFscyhDb25jdXJyZW5jeVV0aWxzLnRha2UoQm9vbGVhbkNhbGxi\nYWNrUXVldWUpLnJpZ2h0KCkuZ2V0Q2xhc3MoKSwKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgIFB1YlN1YkV4Y2VwdGlvbi5TZXJ2ZXJOb3RSZXNwb25z\naWJsZUZvclRvcGljRXhjZXB0aW9uLmNsYXNzKTsKCiAgICAgICAgLy8KICAg\nICAgICAvLyBBY3F1aXJlIHRvcGljLgogICAgICAgIC8vCgogICAgICAgIHNt\nLmFjcXVpcmVkVG9waWModG9waWMxLCB2b2lkQ2FsbGJhY2ssIG51bGwpOwog\nICAgICAgIEFzc2VydC5hc3NlcnRUcnVlKEJvb2xlYW5DYWxsYmFja1F1ZXVl\nLnRha2UoKS5sZWZ0KCkpOwoKICAgICAgICBBc3NlcnQuYXNzZXJ0VHJ1ZShz\nbS50b3Ayc3ViMnNlcS5jb250YWluc0tleSh0b3BpYzEpKTsKICAgICAgICBB\nc3NlcnQuYXNzZXJ0RXF1YWxzKDAsIHNtLnRvcDJzdWIyc2VxLmdldCh0b3Bp\nYzEpLnNpemUoKSk7CgogICAgICAgIHNtLnVuc3Vic2NyaWJlKHRvcGljMSwg\nc3ViMSwgdm9pZENhbGxiYWNrLCBudWxsKTsKICAgICAgICBBc3NlcnQuYXNz\nZXJ0RXF1YWxzKENvbmN1cnJlbmN5VXRpbHMudGFrZShCb29sZWFuQ2FsbGJh\nY2tRdWV1ZSkucmlnaHQoKS5nZXRDbGFzcygpLAogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgUHViU3ViRXhjZXB0aW9uLkNsaWVudE5vdFN1YnNjcmli\nZWRFeGNlcHRpb24uY2xhc3MpOwoKICAgICAgICAvLwogICAgICAgIC8vIFRy\neSB0byBhdHRhY2ggdG8gYSBzdWJzY3JpcHRpb24uCiAgICAgICAgc3ViUmVx\ndWVzdCA9IFN1YnNjcmliZVJlcXVlc3QubmV3QnVpbGRlcigpLnNldENyZWF0\nZU9yQXR0YWNoKENyZWF0ZU9yQXR0YWNoLkFUVEFDSCkuc2V0U3Vic2NyaWJl\ncklkKHN1YjEpCiAgICAgICAgICAgICAgICAgICAgIC5idWlsZCgpOwoKICAg\nICAgICBzbS5zZXJ2ZVN1YnNjcmliZVJlcXVlc3QodG9waWMxLCBzdWJSZXF1\nZXN0LCBtc2dJZCwgbXNnSWRDYWxsYmFjaywgbnVsbCk7CiAgICAgICAgQXNz\nZXJ0LmFzc2VydEVxdWFscyhDb25jdXJyZW5jeVV0aWxzLnRha2UobXNnSWRD\nYWxsYmFja1F1ZXVlKS5yaWdodCgpLmdldENsYXNzKCksCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICBQdWJTdWJFeGNlcHRpb24uQ2xpZW50Tm90U3Vi\nc2NyaWJlZEV4Y2VwdGlvbi5jbGFzcyk7CgogICAgICAgIC8vIG5vdyBjcmVh\ndGUKICAgICAgICBzdWJSZXF1ZXN0ID0gU3Vic2NyaWJlUmVxdWVzdC5uZXdC\ndWlsZGVyKCkuc2V0Q3JlYXRlT3JBdHRhY2goQ3JlYXRlT3JBdHRhY2guQ1JF\nQVRFKS5zZXRTdWJzY3JpYmVySWQoc3ViMSkKICAgICAgICAgICAgICAgICAg\nICAgLmJ1aWxkKCk7CiAgICAgICAgc20uc2VydmVTdWJzY3JpYmVSZXF1ZXN0\nKHRvcGljMSwgc3ViUmVxdWVzdCwgbXNnSWQsIG1zZ0lkQ2FsbGJhY2ssIG51\nbGwpOwogICAgICAgIEFzc2VydC5hc3NlcnRFcXVhbHMobXNnSWQuZ2V0TG9j\nYWxDb21wb25lbnQoKSwgQ29uY3VycmVuY3lVdGlscy50YWtlKG1zZ0lkQ2Fs\nbGJhY2tRdWV1ZSkubGVmdCgpLmdldExvY2FsQ29tcG9uZW50KCkpOwogICAg\nICAgIEFzc2VydC5hc3NlcnRFcXVhbHMobXNnSWQuZ2V0TG9jYWxDb21wb25l\nbnQoKSwgc20udG9wMnN1YjJzZXEuZ2V0KHRvcGljMSkuZ2V0KHN1YjEpLmdl\ndExhc3RDb25zdW1lU2VxSWQoKQogICAgICAgICAgICAgICAgICAgICAgICAg\nICAgLmdldExvY2FsQ29tcG9uZW50KCkpOwoKICAgICAgICAvLyB0cnkgdG8g\nY3JlYXRlIGFnYWluCiAgICAgICAgc20uc2VydmVTdWJzY3JpYmVSZXF1ZXN0\nKHRvcGljMSwgc3ViUmVxdWVzdCwgbXNnSWQsIG1zZ0lkQ2FsbGJhY2ssIG51\nbGwpOwogICAgICAgIEFzc2VydC5hc3NlcnRFcXVhbHMoQ29uY3VycmVuY3lV\ndGlscy50YWtlKG1zZ0lkQ2FsbGJhY2tRdWV1ZSkucmlnaHQoKS5nZXRDbGFz\ncygpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgUHViU3ViRXhjZXB0\naW9uLkNsaWVudEFscmVhZHlTdWJzY3JpYmVkRXhjZXB0aW9uLmNsYXNzKTsK\nICAgICAgICBBc3NlcnQuYXNzZXJ0RXF1YWxzKG1zZ0lkLmdldExvY2FsQ29t\ncG9uZW50KCksIHNtLnRvcDJzdWIyc2VxLmdldCh0b3BpYzEpLmdldChzdWIx\nKS5nZXRMYXN0Q29uc3VtZVNlcUlkKCkKICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIC5nZXRMb2NhbENvbXBvbmVudCgpKTsKCiAgICAgICAgc20ubG9z\ndFRvcGljKHRvcGljMSk7CiAgICAgICAgc20uYWNxdWlyZWRUb3BpYyh0b3Bp\nYzEsIHZvaWRDYWxsYmFjaywgbnVsbCk7CiAgICAgICAgQXNzZXJ0LmFzc2Vy\ndFRydWUoQm9vbGVhbkNhbGxiYWNrUXVldWUudGFrZSgpLmxlZnQoKSk7Cgog\nICAgICAgIC8vIHRyeSB0byBhdHRhY2gKICAgICAgICBzdWJSZXF1ZXN0ID0g\nU3Vic2NyaWJlUmVxdWVzdC5uZXdCdWlsZGVyKCkuc2V0Q3JlYXRlT3JBdHRh\nY2goQ3JlYXRlT3JBdHRhY2guQVRUQUNIKS5zZXRTdWJzY3JpYmVySWQoc3Vi\nMSkKICAgICAgICAgICAgICAgICAgICAgLmJ1aWxkKCk7CiAgICAgICAgTWVz\nc2FnZVNlcUlkIG1zZ0lkMSA9IE1lc3NhZ2VTZXFJZC5uZXdCdWlsZGVyKCku\nc2V0TG9jYWxDb21wb25lbnQobXNnSWQuZ2V0TG9jYWxDb21wb25lbnQoKSAr\nIDEwKS5idWlsZCgpOwogICAgICAgIHNtLnNlcnZlU3Vic2NyaWJlUmVxdWVz\ndCh0b3BpYzEsIHN1YlJlcXVlc3QsIG1zZ0lkMSwgbXNnSWRDYWxsYmFjaywg\nbnVsbCk7CiAgICAgICAgQXNzZXJ0LmFzc2VydEVxdWFscyhtc2dJZC5nZXRM\nb2NhbENvbXBvbmVudCgpLCBtc2dJZENhbGxiYWNrUXVldWUudGFrZSgpLmxl\nZnQoKS5nZXRMb2NhbENvbXBvbmVudCgpKTsKICAgICAgICBBc3NlcnQuYXNz\nZXJ0RXF1YWxzKG1zZ0lkLmdldExvY2FsQ29tcG9uZW50KCksIHNtLnRvcDJz\ndWIyc2VxLmdldCh0b3BpYzEpLmdldChzdWIxKS5nZXRMYXN0Q29uc3VtZVNl\ncUlkKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXRMb2NhbENv\nbXBvbmVudCgpKTsKCiAgICAgICAgLy8gbm93IG1hbmlwdWxhdGUgdGhlIGNv\nbnN1bWUgcHRycwogICAgICAgIC8vIGRvbnQgZ2l2ZSBpdCBlbm91Z2ggdG8g\naGF2ZSBpdCBwZXJzaXN0IHRvIFpLCiAgICAgICAgTWVzc2FnZVNlcUlkIG1z\nZ0lkMiA9IE1lc3NhZ2VTZXFJZC5uZXdCdWlsZGVyKCkuc2V0TG9jYWxDb21w\nb25lbnQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtc2dJ\nZC5nZXRMb2NhbENvbXBvbmVudCgpICsgY2ZnLmdldENvbnN1bWVJbnRlcnZh\nbCgpIC0gMSkuYnVpbGQoKTsKICAgICAgICBzbS5zZXRDb25zdW1lU2VxSWRG\nb3JTdWJzY3JpYmVyKHRvcGljMSwgc3ViMSwgbXNnSWQyLCB2b2lkQ2FsbGJh\nY2ssIG51bGwpOwogICAgICAgIEFzc2VydC5hc3NlcnRUcnVlKEJvb2xlYW5D\nYWxsYmFja1F1ZXVlLnRha2UoKS5sZWZ0KCkpOwogICAgICAgIEFzc2VydC5h\nc3NlcnRFcXVhbHMobXNnSWQyLmdldExvY2FsQ29tcG9uZW50KCksIHNtLnRv\ncDJzdWIyc2VxLmdldCh0b3BpYzEpLmdldChzdWIxKS5nZXRMYXN0Q29uc3Vt\nZVNlcUlkKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXRMb2Nh\nbENvbXBvbmVudCgpKTsKICAgICAgICBBc3NlcnQuYXNzZXJ0RXF1YWxzKG1z\nZ0lkLmdldExvY2FsQ29tcG9uZW50KCksIHNtLnRvcDJzdWIyc2VxLmdldCh0\nb3BpYzEpLmdldChzdWIxKS5nZXRTdWJzY3JpcHRpb25TdGF0ZSgpLmdldE1z\nZ0lkKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXRMb2NhbENv\nbXBvbmVudCgpKTsKCiAgICAgICAgLy8gZ2l2ZSBpdCBtb3JlIHNvIHRoYXQg\naXQgd2lsbCB3cml0ZSB0byBaSwogICAgICAgIE1lc3NhZ2VTZXFJZCBtc2dJ\nZDMgPSBNZXNzYWdlU2VxSWQubmV3QnVpbGRlcigpLnNldExvY2FsQ29tcG9u\nZW50KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnSWQu\nZ2V0TG9jYWxDb21wb25lbnQoKSArIGNmZy5nZXRDb25zdW1lSW50ZXJ2YWwo\nKSArIDEpLmJ1aWxkKCk7CiAgICAgICAgc20uc2V0Q29uc3VtZVNlcUlkRm9y\nU3Vic2NyaWJlcih0b3BpYzEsIHN1YjEsIG1zZ0lkMywgdm9pZENhbGxiYWNr\nLCBudWxsKTsKICAgICAgICBBc3NlcnQuYXNzZXJ0VHJ1ZShCb29sZWFuQ2Fs\nbGJhY2tRdWV1ZS50YWtlKCkubGVmdCgpKTsKCiAgICAgICAgc20ubG9zdFRv\ncGljKHRvcGljMSk7CiAgICAgICAgc20uYWNxdWlyZWRUb3BpYyh0b3BpYzEs\nIHZvaWRDYWxsYmFjaywgbnVsbCk7CiAgICAgICAgQXNzZXJ0LmFzc2VydFRy\ndWUoQm9vbGVhbkNhbGxiYWNrUXVldWUudGFrZSgpLmxlZnQoKSk7CgogICAg\nICAgIEFzc2VydC5hc3NlcnRFcXVhbHMobXNnSWQzLmdldExvY2FsQ29tcG9u\nZW50KCksIHNtLnRvcDJzdWIyc2VxLmdldCh0b3BpYzEpLmdldChzdWIxKS5n\nZXRMYXN0Q29uc3VtZVNlcUlkKCkKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIC5nZXRMb2NhbENvbXBvbmVudCgpKTsKICAgICAgICBBc3NlcnQuYXNz\nZXJ0RXF1YWxzKG1zZ0lkMy5nZXRMb2NhbENvbXBvbmVudCgpLCBzbS50b3Ay\nc3ViMnNlcS5nZXQodG9waWMxKS5nZXQoc3ViMSkuZ2V0U3Vic2NyaXB0aW9u\nU3RhdGUoKS5nZXRNc2dJZCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAuZ2V0TG9jYWxDb21wb25lbnQoKSk7CgogICAgICAgIC8vIGZpbmFsbHkg\ndW5zdWJzY3JpYmUKICAgICAgICBzbS51bnN1YnNjcmliZSh0b3BpYzEsIHN1\nYjEsIHZvaWRDYWxsYmFjaywgbnVsbCk7CiAgICAgICAgQXNzZXJ0LmFzc2Vy\ndFRydWUoQm9vbGVhbkNhbGxiYWNrUXVldWUudGFrZSgpLmxlZnQoKSk7Cgog\nICAgICAgIHNtLmxvc3RUb3BpYyh0b3BpYzEpOwogICAgICAgIHNtLmFjcXVp\ncmVkVG9waWModG9waWMxLCB2b2lkQ2FsbGJhY2ssIG51bGwpOwogICAgICAg\nIEFzc2VydC5hc3NlcnRUcnVlKEJvb2xlYW5DYWxsYmFja1F1ZXVlLnRha2Uo\nKS5sZWZ0KCkpOwogICAgICAgIEFzc2VydC5hc3NlcnRGYWxzZShzbS50b3Ay\nc3ViMnNlcS5nZXQodG9waWMxKS5jb250YWluc0tleShzdWIxKSk7CgogICAg\nfQoKfQo=\n","encoding":"base64"}

