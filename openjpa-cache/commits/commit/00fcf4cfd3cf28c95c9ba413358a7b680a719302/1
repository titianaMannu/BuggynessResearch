{"sha":"00fcf4cfd3cf28c95c9ba413358a7b680a719302","node_id":"MDY6Q29tbWl0MjA2MzY0OjAwZmNmNGNmZDNjZjI4Yzk1YzliYTQxMzM1OGE3YjY4MGE3MTkzMDI=","commit":{"author":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2009-11-04T21:35:07Z"},"committer":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2009-11-04T21:35:07Z"},"message":"OPENJPA-839 fix pom data so unprovided depends will be pulled automatically by maven and mark JAXB depends as optional\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@832878 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"aff88557810ac12cb883018abd1f7dbba5536589","url":"https://api.github.com/repos/apache/openjpa/git/trees/aff88557810ac12cb883018abd1f7dbba5536589"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/00fcf4cfd3cf28c95c9ba413358a7b680a719302","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/00fcf4cfd3cf28c95c9ba413358a7b680a719302","html_url":"https://github.com/apache/openjpa/commit/00fcf4cfd3cf28c95c9ba413358a7b680a719302","comments_url":"https://api.github.com/repos/apache/openjpa/commits/00fcf4cfd3cf28c95c9ba413358a7b680a719302/comments","author":null,"committer":null,"parents":[{"sha":"faf2966816c2f6252546b519eb39f4077c1713f2","url":"https://api.github.com/repos/apache/openjpa/commits/faf2966816c2f6252546b519eb39f4077c1713f2","html_url":"https://github.com/apache/openjpa/commit/faf2966816c2f6252546b519eb39f4077c1713f2"}],"stats":{"total":193,"additions":102,"deletions":91},"files":[{"sha":"c30874514b370c756d4fbd07a531640ed7cff547","filename":"openjpa-all/pom.xml","status":"modified","additions":33,"deletions":41,"changes":74,"blob_url":"https://github.com/apache/openjpa/blob/00fcf4cfd3cf28c95c9ba413358a7b680a719302/openjpa-all/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/00fcf4cfd3cf28c95c9ba413358a7b680a719302/openjpa-all/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-all/pom.xml?ref=00fcf4cfd3cf28c95c9ba413358a7b680a719302","patch":"@@ -62,6 +62,7 @@\n                             <createDependencyReducedPom>true</createDependencyReducedPom>\n                             <createSourcesJar>true</createSourcesJar>\n                             <keepDependenciesWithProvidedScope>true</keepDependenciesWithProvidedScope>\n+                            <promoteTransitiveDependencies>true</promoteTransitiveDependencies>\n                             <!-- \n                                  Have to do this again here, as these settings\n                                  from shaded openjpa.jar get lost in the shading\n@@ -97,56 +98,47 @@\n \n     <dependencies>\n         <!--\n-            Only include openjpa.jar and its required dependencies here, which\n-            will be used by maven-shade-plugin to determine the inclusions.\n+            Only include openjpa.jar here, as the maven-shade-plugin will\n+            determine the transitive dependencies to include from it.\n         -->\n         <dependency>\n             <groupId>org.apache.openjpa</groupId>\n             <artifactId>openjpa</artifactId>\n             <version>${pom.version}</version>\n         </dependency>\n-\n-        <!-- Non-OpenJPA JARs to pull in -->\n-        <dependency>\n-            <groupId>net.sourceforge.serp</groupId>\n-            <artifactId>serp</artifactId>\n-        </dependency>\n-        <dependency>\n-            <groupId>commons-logging</groupId>\n-            <artifactId>commons-logging</artifactId>\n-        </dependency>\n-        <dependency>\n-            <groupId>commons-lang</groupId>\n-            <artifactId>commons-lang</artifactId>\n-        </dependency>\n-        <dependency>\n-            <groupId>commons-collections</groupId>\n-            <artifactId>commons-collections</artifactId>\n-        </dependency>\n+        <!-- Need to manually add back optional openjpa-jdbc depends -->\n         <dependency>\n-            <groupId>commons-pool</groupId>\n-            <artifactId>commons-pool</artifactId>\n+            <groupId>javax.xml.bind</groupId>\n+            <artifactId>jaxb-api</artifactId>\n+            <scope>compile</scope>\n+            <optional>true</optional>\n+            <exclusions>\n+                <exclusion>\n+                    <groupId>javax.xml.bind</groupId>\n+                    <artifactId>jsr173_api</artifactId>\n+                </exclusion>\n+                <exclusion>\n+                    <groupId>javax.activation</groupId>\n+                    <artifactId>activation</artifactId>\n+                </exclusion>\n+            </exclusions>\n         </dependency>\n         <dependency>\n-            <groupId>org.apache.geronimo.specs</groupId>\n-            <artifactId>geronimo-jta_1.1_spec</artifactId>\n+            <groupId>com.sun.xml.bind</groupId>\n+            <artifactId>jaxb-impl</artifactId>\n+            <scope>compile</scope>\n+            <optional>true</optional>\n+            <exclusions>\n+                <exclusion>\n+                    <groupId>javax.xml.bind</groupId>\n+                    <artifactId>jsr173_api</artifactId>\n+                </exclusion>\n+                <exclusion>\n+                    <groupId>javax.activation</groupId>\n+                    <artifactId>activation</artifactId>\n+                </exclusion>\n+            </exclusions>\n         </dependency>\n-        <dependency>\n-            <groupId>org.apache.geronimo.specs</groupId>\n-            <artifactId>geronimo-jpa_2.0_spec</artifactId>\n-        </dependency>\n-\n-        <!-- optional runtime dependencies -->\n-        <dependency>\n-            <groupId>org.apache.geronimo.specs</groupId>\n-            <artifactId>geronimo-jms_1.1_spec</artifactId>\n-        </dependency>\n-\n-        <!-- excluded optional runtime dependencies\n-        <dependency>\n-            <groupId>org.apache.geronimo.specs</groupId>\n-            <artifactId>geronimo-validation_1.0_spec</artifactId>\n-        </dependency>\n-        -->\n+        <!-- end optional openjpa-jdbc depends -->\n     </dependencies>\n </project>"},{"sha":"4c0acdd9ffe4f0ec3a2ba51b17f0926ed7250599","filename":"openjpa-jdbc/pom.xml","status":"modified","additions":4,"deletions":0,"changes":4,"blob_url":"https://github.com/apache/openjpa/blob/00fcf4cfd3cf28c95c9ba413358a7b680a719302/openjpa-jdbc/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/00fcf4cfd3cf28c95c9ba413358a7b680a719302/openjpa-jdbc/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/pom.xml?ref=00fcf4cfd3cf28c95c9ba413358a7b680a719302","patch":"@@ -42,10 +42,14 @@\n         <dependency>\n             <groupId>javax.xml.bind</groupId>\n             <artifactId>jaxb-api</artifactId>\n+            <scope>compile</scope>\n+            <optional>true</optional>\n         </dependency>\n         <dependency>\n             <groupId>com.sun.xml.bind</groupId>\n             <artifactId>jaxb-impl</artifactId>\n+            <scope>compile</scope>\n+            <optional>true</optional>\n         </dependency>\n         <dependency>\n             <groupId>hsqldb</groupId>"},{"sha":"f9e0bcc679472f25955b209e80890822d46723cf","filename":"openjpa-persistence-jdbc/pom.xml","status":"modified","additions":11,"deletions":0,"changes":11,"blob_url":"https://github.com/apache/openjpa/blob/00fcf4cfd3cf28c95c9ba413358a7b680a719302/openjpa-persistence-jdbc/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/00fcf4cfd3cf28c95c9ba413358a7b680a719302/openjpa-persistence-jdbc/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/pom.xml?ref=00fcf4cfd3cf28c95c9ba413358a7b680a719302","patch":"@@ -778,6 +778,17 @@\n             <artifactId>jakarta-regexp</artifactId>\n             <scope>test</scope>\n         </dependency>\n+        <!-- Required for org.apache.openjpa.persistence.xmlmapping tests -->\n+        <dependency>\n+            <groupId>javax.xml.bind</groupId>\n+            <artifactId>jaxb-api</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>com.sun.xml.bind</groupId>\n+            <artifactId>jaxb-impl</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n     </dependencies>\n     <build>\n         <plugins>"},{"sha":"1fadadcb8f1c8448636752b3dc52418479bc0250","filename":"openjpa/pom.xml","status":"modified","additions":54,"deletions":50,"changes":104,"blob_url":"https://github.com/apache/openjpa/blob/00fcf4cfd3cf28c95c9ba413358a7b680a719302/openjpa/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/00fcf4cfd3cf28c95c9ba413358a7b680a719302/openjpa/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa/pom.xml?ref=00fcf4cfd3cf28c95c9ba413358a7b680a719302","patch":"@@ -62,6 +62,23 @@\n                             <createDependencyReducedPom>true</createDependencyReducedPom>\n                             <createSourcesJar>true</createSourcesJar>\n                             <keepDependenciesWithProvidedScope>true</keepDependenciesWithProvidedScope>\n+                            <promoteTransitiveDependencies>true</promoteTransitiveDependencies>\n+                            <!--\n+                                 Specify a subset of depends to include,\n+                                 which must match the <dependencies> section.\n+                            -->\n+                            <artifactSet>\n+                                <includes>\n+                                    <include>org.apache.openjpa:openjpa-lib</include>\n+                                    <include>org.apache.openjpa:openjpa-kernel</include>\n+                                    <include>org.apache.openjpa:openjpa-jdbc</include>\n+                                    <include>org.apache.openjpa:openjpa-persistence</include>\n+                                    <include>org.apache.openjpa:openjpa-persistence-jdbc</include>\n+                                    <include>org.apache.openjpa:openjpa-xmlstore</include>\n+                                    <include>org.apache.openjpa:openjpa-slice</include>\n+                                </includes>\n+                            </artifactSet>\n+                            <!-- OpenJPA unique META-INF setup -->\n                             <transformers>\n                                 <!-- Need to concatinate the services resources:\n                                  org.apache.openjpa.lib.conf.ProductDerivation\n@@ -108,13 +125,12 @@\n             <artifactId>openjpa-jdbc</artifactId>\n             <version>${pom.version}</version>\n             <!-- \n-                 Need to exclude jaxb depends, so the following will not\n-                 get included in the aggregate JAR by the shade plugin:\n+                 Need to exclude jaxb, so the following will not get included\n+                 as compile depends in the aggregate JAR by the shade plugin:\n                      javax.xml.bind:jaxb-api:jar:2.0\n                      javax.xml.bind:jsr173_api:jar:1.0\n                      javax.activation:activation:jar:1.1\n                      com.sun.xml.bind:jaxb-impl:jar:2.0.5\n-            -->\n             <exclusions>\n                 <exclusion>\n                     <groupId>javax.xml.bind</groupId>\n@@ -125,7 +141,42 @@\n                     <artifactId>jaxb-impl</artifactId>\n                 </exclusion>\n             </exclusions>\n+            -->\n+        </dependency>\n+        <!-- Need to manually add back optional openjpa-jdbc depends -->\n+        <dependency>\n+            <groupId>javax.xml.bind</groupId>\n+            <artifactId>jaxb-api</artifactId>\n+            <scope>compile</scope>\n+            <optional>true</optional>\n+            <exclusions>\n+                <exclusion>\n+                    <groupId>javax.xml.bind</groupId>\n+                    <artifactId>jsr173_api</artifactId>\n+                </exclusion>\n+                <exclusion>\n+                    <groupId>javax.activation</groupId>\n+                    <artifactId>activation</artifactId>\n+                </exclusion>\n+            </exclusions>\n+        </dependency>\n+        <dependency>\n+            <groupId>com.sun.xml.bind</groupId>\n+            <artifactId>jaxb-impl</artifactId>\n+            <scope>compile</scope>\n+            <optional>true</optional>\n+            <exclusions>\n+                <exclusion>\n+                    <groupId>javax.xml.bind</groupId>\n+                    <artifactId>jsr173_api</artifactId>\n+                </exclusion>\n+                <exclusion>\n+                    <groupId>javax.activation</groupId>\n+                    <artifactId>activation</artifactId>\n+                </exclusion>\n+            </exclusions>\n         </dependency>\n+        <!-- end optional openjpa-jdbc depends -->\n         <dependency>\n             <groupId>org.apache.openjpa</groupId>\n             <artifactId>openjpa-persistence</artifactId>\n@@ -146,52 +197,5 @@\n             <artifactId>openjpa-slice</artifactId>\n             <version>${pom.version}</version>\n         </dependency>\n-\n-        <!-- JARs NOT included in aggregate JAR via maven-shade-plugin -->\n-        <dependency>\n-            <groupId>net.sourceforge.serp</groupId>\n-            <artifactId>serp</artifactId>\n-            <scope>provided</scope>\n-        </dependency>\n-        <dependency>\n-            <groupId>commons-logging</groupId>\n-            <artifactId>commons-logging</artifactId>\n-            <scope>provided</scope>\n-        </dependency>\n-        <dependency>\n-            <groupId>commons-lang</groupId>\n-            <artifactId>commons-lang</artifactId>\n-            <scope>provided</scope>\n-        </dependency>\n-        <dependency>\n-            <groupId>commons-collections</groupId>\n-            <artifactId>commons-collections</artifactId>\n-            <scope>provided</scope>\n-        </dependency>\n-        <dependency>\n-            <groupId>commons-pool</groupId>\n-            <artifactId>commons-pool</artifactId>\n-            <scope>provided</scope>\n-        </dependency>\n-        <dependency>\n-            <groupId>org.apache.geronimo.specs</groupId>\n-            <artifactId>geronimo-jta_1.1_spec</artifactId>\n-            <scope>provided</scope>\n-        </dependency>\n-        <dependency>\n-            <groupId>org.apache.geronimo.specs</groupId>\n-            <artifactId>geronimo-jpa_2.0_spec</artifactId>\n-            <scope>provided</scope>\n-        </dependency>\n-        <dependency>\n-            <groupId>org.apache.geronimo.specs</groupId>\n-            <artifactId>geronimo-jms_1.1_spec</artifactId>\n-            <scope>provided</scope>\n-        </dependency>\n-        <dependency>\n-            <groupId>org.apache.geronimo.specs</groupId>\n-            <artifactId>geronimo-validation_1.0_spec</artifactId>\n-            <scope>provided</scope>\n-        </dependency>\n     </dependencies>\n </project>"}]}

