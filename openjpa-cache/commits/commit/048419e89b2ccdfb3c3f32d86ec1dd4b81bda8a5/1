{"sha":"048419e89b2ccdfb3c3f32d86ec1dd4b81bda8a5","node_id":"MDY6Q29tbWl0MjA2MzY0OjA0ODQxOWU4OWIyY2NkZmIzYzNmMzJkODZlYzFkZDRiODFiZGE4YTU=","commit":{"author":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2009-07-20T18:36:24Z"},"committer":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2009-07-20T18:36:24Z"},"message":"OPENJPA-1184  Inverse relations not set for MapKey field when using parallel eager select.  Patch contributed by David Minor.\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@795949 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"dc33deac8376991ece54c7d785f6bff312e4e6fa","url":"https://api.github.com/repos/apache/openjpa/git/trees/dc33deac8376991ece54c7d785f6bff312e4e6fa"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/048419e89b2ccdfb3c3f32d86ec1dd4b81bda8a5","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/048419e89b2ccdfb3c3f32d86ec1dd4b81bda8a5","html_url":"https://github.com/apache/openjpa/commit/048419e89b2ccdfb3c3f32d86ec1dd4b81bda8a5","comments_url":"https://api.github.com/repos/apache/openjpa/commits/048419e89b2ccdfb3c3f32d86ec1dd4b81bda8a5/comments","author":null,"committer":null,"parents":[{"sha":"f74c5d7a69fb3dda67fb26c1c0250d48e29fe359","url":"https://api.github.com/repos/apache/openjpa/commits/f74c5d7a69fb3dda67fb26c1c0250d48e29fe359","html_url":"https://github.com/apache/openjpa/commit/f74c5d7a69fb3dda67fb26c1c0250d48e29fe359"}],"stats":{"total":3,"additions":3,"deletions":0},"files":[{"sha":"ca5324559ab1aef7a2a7887880fd0017f786ab46","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/JDBCStoreManager.java","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/apache/openjpa/blob/048419e89b2ccdfb3c3f32d86ec1dd4b81bda8a5/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/JDBCStoreManager.java","raw_url":"https://github.com/apache/openjpa/raw/048419e89b2ccdfb3c3f32d86ec1dd4b81bda8a5/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/JDBCStoreManager.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/JDBCStoreManager.java?ref=048419e89b2ccdfb3c3f32d86ec1dd4b81bda8a5","patch":"@@ -29,6 +29,7 @@\n import java.util.Collections;\n import java.util.HashSet;\n import java.util.Iterator;\n+import java.util.Map;\n import java.util.Set;\n \n import javax.sql.DataSource;\n@@ -408,6 +409,8 @@ private void setInverseRelation(OpenJPAStateManager owner,\n         for (int i = 0; i < fms.length; i++) {\n             if (res.getEager(fms[i]) != null) {\n                 Object coll =  owner.fetchObject(fms[i].getIndex());\n+                if (coll instanceof Map)\n+                    coll = ((Map)coll).values();\n                 if (coll instanceof Collection && \n                     ((Collection) coll).size() > 0) {\n                     // Found eagerly loaded collection."}]}

