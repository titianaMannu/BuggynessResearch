{"sha":"0577674fe364c8e2a18076da4f5aede890b7260b","node_id":"MDY6Q29tbWl0MjA2MzY0OjA1Nzc2NzRmZTM2NGM4ZTJhMTgwNzZkYTRmNWFlZGU4OTBiNzI2MGI=","commit":{"author":{"name":"Catalina Wei","email":"fancy@apache.org","date":"2008-04-03T05:52:38Z"},"committer":{"name":"Catalina Wei","email":"fancy@apache.org","date":"2008-04-03T05:52:38Z"},"message":"OPENJPA-555 MappingTool got NullPointerException in DB2Dictionary.isDB2ZOSV8xOrLater() \n\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/branches/1.0.x@644177 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"46cdae44e830c90b12ae08a4212ebbf367207814","url":"https://api.github.com/repos/apache/openjpa/git/trees/46cdae44e830c90b12ae08a4212ebbf367207814"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/0577674fe364c8e2a18076da4f5aede890b7260b","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/0577674fe364c8e2a18076da4f5aede890b7260b","html_url":"https://github.com/apache/openjpa/commit/0577674fe364c8e2a18076da4f5aede890b7260b","comments_url":"https://api.github.com/repos/apache/openjpa/commits/0577674fe364c8e2a18076da4f5aede890b7260b/comments","author":null,"committer":null,"parents":[{"sha":"eb7eb2ee0fda172c286b56b3a3c64f6fe691fadf","url":"https://api.github.com/repos/apache/openjpa/commits/eb7eb2ee0fda172c286b56b3a3c64f6fe691fadf","html_url":"https://github.com/apache/openjpa/commit/eb7eb2ee0fda172c286b56b3a3c64f6fe691fadf"}],"stats":{"total":19,"additions":12,"deletions":7},"files":[{"sha":"8ec05469d873f2166d34e42165ec268448c0debe","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DB2Dictionary.java","status":"modified","additions":12,"deletions":7,"changes":19,"blob_url":"https://github.com/apache/openjpa/blob/0577674fe364c8e2a18076da4f5aede890b7260b/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DB2Dictionary.java","raw_url":"https://github.com/apache/openjpa/raw/0577674fe364c8e2a18076da4f5aede890b7260b/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DB2Dictionary.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DB2Dictionary.java?ref=0577674fe364c8e2a18076da4f5aede890b7260b","patch":"@@ -359,7 +359,8 @@ protected String getForUpdateClause(JDBCFetchConfiguration fetch,\n \r\n     public boolean isDB2UDBV82OrLater() {\r\n         boolean match = false;\r\n-        if ((databaseProductVersion.indexOf(\"SQL\") != -1\r\n+        if (databaseProductName != null &&\r\n+            (databaseProductVersion.indexOf(\"SQL\") != -1\r\n             || databaseProductName.indexOf(\"DB2/\") != -1)\r\n             && ((maj == 8 && min >= 2) || (maj >= 9)))\r\n             match = true;\r\n@@ -368,7 +369,8 @@ public boolean isDB2UDBV82OrLater() {\n \r\n     public boolean isDB2ZOSV8xOrLater() {\r\n        boolean match = false;\r\n-       if ((databaseProductVersion.indexOf(\"DSN\") != -1\r\n+       if (databaseProductName != null &&\r\n+           (databaseProductVersion.indexOf(\"DSN\") != -1\r\n            || databaseProductName.indexOf(\"DB2/\") == -1)\r\n            && maj >= 8)\r\n            match = true;\r\n@@ -377,25 +379,28 @@ public boolean isDB2ZOSV8xOrLater() {\n \r\n     public boolean isDB2ISeriesV5R3OrEarlier() {\r\n        boolean match = false;\r\n-       if (databaseProductName.indexOf(\"AS\") != -1\r\n+       if (databaseProductName != null &&\r\n+           databaseProductName.indexOf(\"AS\") != -1\r\n            && ((maj == 5 && min <=3) || maj < 5))\r\n            match = true;\r\n        return match;\r\n     }\r\n \r\n     public boolean isDB2ISeriesV5R4OrLater() {\r\n        boolean match = false;\r\n-       if (databaseProductName.indexOf(\"AS\") != -1\r\n+       if (databaseProductName != null &&\r\n+           databaseProductName.indexOf(\"AS\") != -1\r\n            && (maj >=6 || (maj == 5 && min >=4)))\r\n            match = true;\r\n       return match;\r\n     }\r\n \r\n     public boolean isDB2UDBV81OrEarlier() {\r\n         boolean match = false;\r\n-        if ((databaseProductVersion.indexOf(\"SQL\") != -1 \r\n-           || databaseProductName.indexOf(\"DB2/\") != -1) &&\r\n-           ((maj == 8 && min <= 1) || maj < 8))\r\n+        if (databaseProductName != null &&\r\n+            (databaseProductVersion.indexOf(\"SQL\") != -1 \r\n+            || databaseProductName.indexOf(\"DB2/\") != -1) &&\r\n+            ((maj == 8 && min <= 1) || maj < 8))\r\n             match = true;\r\n         return match;\r\n     }\r"}]}

