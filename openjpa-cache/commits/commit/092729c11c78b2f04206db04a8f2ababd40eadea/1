{"sha":"092729c11c78b2f04206db04a8f2ababd40eadea","node_id":"MDY6Q29tbWl0MjA2MzY0OjA5MjcyOWMxMWM3OGIyZjA0MjA2ZGIwNGE4ZjJhYmFiZDQwZWFkZWE=","commit":{"author":{"name":"Patrick Linskey","email":"pcl@apache.org","date":"2007-07-25T08:32:38Z"},"committer":{"name":"Patrick Linskey","email":"pcl@apache.org","date":"2007-07-25T08:32:38Z"},"message":"Test case for selecting enum values into a new managed instance.\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@559353 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"2b7a9b0ea66af5d447068cb56690fe1b865d224d","url":"https://api.github.com/repos/apache/openjpa/git/trees/2b7a9b0ea66af5d447068cb56690fe1b865d224d"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/092729c11c78b2f04206db04a8f2ababd40eadea","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/092729c11c78b2f04206db04a8f2ababd40eadea","html_url":"https://github.com/apache/openjpa/commit/092729c11c78b2f04206db04a8f2ababd40eadea","comments_url":"https://api.github.com/repos/apache/openjpa/commits/092729c11c78b2f04206db04a8f2ababd40eadea/comments","author":null,"committer":null,"parents":[{"sha":"502d6488de4dcf3035a47f05a52e9ee34681482b","url":"https://api.github.com/repos/apache/openjpa/commits/502d6488de4dcf3035a47f05a52e9ee34681482b","html_url":"https://github.com/apache/openjpa/commit/502d6488de4dcf3035a47f05a52e9ee34681482b"}],"stats":{"total":102,"additions":102,"deletions":0},"files":[{"sha":"03d60004ea836f9f0b9b1730da2c64495fe1920b","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/fields/EnumFieldType.java","status":"added","additions":52,"deletions":0,"changes":52,"blob_url":"https://github.com/apache/openjpa/blob/092729c11c78b2f04206db04a8f2ababd40eadea/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/fields/EnumFieldType.java","raw_url":"https://github.com/apache/openjpa/raw/092729c11c78b2f04206db04a8f2ababd40eadea/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/fields/EnumFieldType.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/fields/EnumFieldType.java?ref=092729c11c78b2f04206db04a8f2ababd40eadea","patch":"@@ -0,0 +1,52 @@\n+/*\r\n+ * Licensed to the Apache Software Foundation (ASF) under one\r\n+ * or more contributor license agreements.  See the NOTICE file\r\n+ * distributed with this work for additional information\r\n+ * regarding copyright ownership.  The ASF licenses this file\r\n+ * to you under the Apache License, Version 2.0 (the\r\n+ * \"License\"); you may not use this file except in compliance\r\n+ * with the License.  You may obtain a copy of the License at\r\n+ *\r\n+ * http://www.apache.org/licenses/LICENSE-2.0\r\n+ *\r\n+ * Unless required by applicable law or agreed to in writing,\r\n+ * software distributed under the License is distributed on an\r\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n+ * KIND, either express or implied.  See the License for the\r\n+ * specific language governing permissions and limitations\r\n+ * under the License.\r\n+ */\r\n+package org.apache.openjpa.persistence.fields;\r\n+\r\n+import javax.persistence.Id;\r\n+import javax.persistence.GeneratedValue;\r\n+import javax.persistence.Entity;\r\n+\r\n+import org.apache.openjpa.persistence.DetachedState;\r\n+\r\n+@Entity\r\n+//@DetachedState(enabled = false) // ##### shouldn't need this\r\n+public class EnumFieldType {\r\n+    @Id\r\n+    @GeneratedValue\r\n+    private int intField;\r\n+\r\n+    private SampleEnum enumField;\r\n+\r\n+    // for OpenJPA\r\n+    protected EnumFieldType() {\r\n+    }\r\n+\r\n+    public EnumFieldType(int intField, SampleEnum enumField) {\r\n+        this.intField = intField;\r\n+        this.enumField = enumField;\r\n+    }\r\n+\r\n+    public void setEnumField(SampleEnum enumField) {\r\n+        this.enumField = enumField;\r\n+    }\r\n+\r\n+    public SampleEnum getEnumField() {\r\n+        return enumField;\r\n+    }\r\n+}\r"},{"sha":"85b8dde527042cb4b33ba6dc58e1c5350a7c79e4","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/fields/TestEnumQueryConstructor.java","status":"added","additions":50,"deletions":0,"changes":50,"blob_url":"https://github.com/apache/openjpa/blob/092729c11c78b2f04206db04a8f2ababd40eadea/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/fields/TestEnumQueryConstructor.java","raw_url":"https://github.com/apache/openjpa/raw/092729c11c78b2f04206db04a8f2ababd40eadea/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/fields/TestEnumQueryConstructor.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/fields/TestEnumQueryConstructor.java?ref=092729c11c78b2f04206db04a8f2ababd40eadea","patch":"@@ -0,0 +1,50 @@\n+/*\r\n+ * Licensed to the Apache Software Foundation (ASF) under one\r\n+ * or more contributor license agreements.  See the NOTICE file\r\n+ * distributed with this work for additional information\r\n+ * regarding copyright ownership.  The ASF licenses this file\r\n+ * to you under the Apache License, Version 2.0 (the\r\n+ * \"License\"); you may not use this file except in compliance\r\n+ * with the License.  You may obtain a copy of the License at\r\n+ *\r\n+ * http://www.apache.org/licenses/LICENSE-2.0\r\n+ *\r\n+ * Unless required by applicable law or agreed to in writing,\r\n+ * software distributed under the License is distributed on an\r\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n+ * KIND, either express or implied.  See the License for the\r\n+ * specific language governing permissions and limitations\r\n+ * under the License.\r\n+ */\r\n+package org.apache.openjpa.persistence.fields;\r\n+\r\n+import java.util.List;\r\n+import javax.persistence.EntityManager;\r\n+import javax.persistence.Query;\r\n+\r\n+import org.apache.openjpa.persistence.test.SingleEMTestCase;\r\n+import org.apache.openjpa.persistence.simple.AllFieldTypes;\r\n+\r\n+public class TestEnumQueryConstructor\r\n+    extends SingleEMTestCase {\r\n+\r\n+    public void setUp() {\r\n+        setUp(EnumFieldType.class, CLEAR_TABLES);\r\n+\r\n+        EnumFieldType e = new EnumFieldType();\r\n+        e.setEnumField(SampleEnum.FOO);\r\n+        EntityManager em = emf.createEntityManager();\r\n+        em.getTransaction().begin();\r\n+        em.persist(e);\r\n+        em.getTransaction().commit();\r\n+        em.close();\r\n+    }\r\n+\r\n+    public void testEnumQueryConstructor() {\r\n+        Query q = em.createQuery(\r\n+            \"select new EnumFieldType(e.intField, e.enumField) \" +\r\n+                \"from EnumFieldType e\");\r\n+        EnumFieldType e = (EnumFieldType) q.getSingleResult();\r\n+        assertEquals(SampleEnum.FOO, e.getEnumField());\r\n+    }\r\n+}\n\\ No newline at end of file"}]}

