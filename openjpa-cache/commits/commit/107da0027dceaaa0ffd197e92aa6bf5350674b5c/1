{"sha":"107da0027dceaaa0ffd197e92aa6bf5350674b5c","node_id":"MDY6Q29tbWl0MjA2MzY0OjEwN2RhMDAyN2RjZWFhYTBmZmQxOTdlOTJhYTZiZjUzNTA2NzRiNWM=","commit":{"author":{"name":"Catalina Wei","email":"fancy@apache.org","date":"2008-08-08T06:46:40Z"},"committer":{"name":"Catalina Wei","email":"fancy@apache.org","date":"2008-08-08T06:46:40Z"},"message":"OPENJPA-681 Subquery generates SQL with syntax error\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/branches/1.2.x@683877 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"a7a02274eed3203c79e3e2cf486db3058b47c493","url":"https://api.github.com/repos/apache/openjpa/git/trees/a7a02274eed3203c79e3e2cf486db3058b47c493"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/107da0027dceaaa0ffd197e92aa6bf5350674b5c","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/107da0027dceaaa0ffd197e92aa6bf5350674b5c","html_url":"https://github.com/apache/openjpa/commit/107da0027dceaaa0ffd197e92aa6bf5350674b5c","comments_url":"https://api.github.com/repos/apache/openjpa/commits/107da0027dceaaa0ffd197e92aa6bf5350674b5c/comments","author":null,"committer":null,"parents":[{"sha":"348e03fdc4f48d17e6dc55080cee33514cdfa70f","url":"https://api.github.com/repos/apache/openjpa/commits/348e03fdc4f48d17e6dc55080cee33514cdfa70f","html_url":"https://github.com/apache/openjpa/commit/348e03fdc4f48d17e6dc55080cee33514cdfa70f"}],"stats":{"total":8,"additions":6,"deletions":2},"files":[{"sha":"41afc02dfff6d963de123b19071a8092cb772672","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SelectImpl.java","status":"modified","additions":4,"deletions":2,"changes":6,"blob_url":"https://github.com/apache/openjpa/blob/107da0027dceaaa0ffd197e92aa6bf5350674b5c/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SelectImpl.java","raw_url":"https://github.com/apache/openjpa/raw/107da0027dceaaa0ffd197e92aa6bf5350674b5c/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SelectImpl.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SelectImpl.java?ref=107da0027dceaaa0ffd197e92aa6bf5350674b5c","patch":"@@ -618,8 +618,10 @@ private boolean findTableAlias(Integer alias) {\n         // if alias is defined and referenced, return true.\n         String value = \"t\" + alias.toString() + \".\";\n         if (_tableAliases != null)\n-            return _tableAliases.containsValue(value) &&\n-               _tables.containsKey(alias);\n+            if (_tableAliases.containsValue(value))\n+               return _tables.containsKey(alias);\n+           else\n+               return _joins != null;\n         else\n             return true;\n     }"},{"sha":"33f4b6d4666cdbedb108522238c0934803ba2aaa","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/query/TestSubquery.java","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/apache/openjpa/blob/107da0027dceaaa0ffd197e92aa6bf5350674b5c/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/query/TestSubquery.java","raw_url":"https://github.com/apache/openjpa/raw/107da0027dceaaa0ffd197e92aa6bf5350674b5c/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/query/TestSubquery.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/query/TestSubquery.java?ref=107da0027dceaaa0ffd197e92aa6bf5350674b5c","patch":"@@ -66,6 +66,8 @@ public void setUp() {\n             \" and (select min(o2.amount) from Customer c, in(c.orders) o2)\",\n         \"select o.oid from Customer c, in(c.orders)o where o.amount >\" +\n             \" (select sum(o2.amount) from c.orders o2)\",\n+        \"select o1.oid, c.name from Order o1, Customer c where o1.amount = \" +\n+            \" any(select o2.amount from in(c.orders) o2)\",\n     // outstanding problem subqueries:\n     //\"select o from Order o where o.amount > (select count(o) from Order o)\",\n     //\"select o from Order o where o.amount > (select count(o2) from Order o2)\","}]}

