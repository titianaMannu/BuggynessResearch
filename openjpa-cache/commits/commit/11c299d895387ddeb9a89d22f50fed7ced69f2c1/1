{"sha":"11c299d895387ddeb9a89d22f50fed7ced69f2c1","node_id":"MDY6Q29tbWl0MjA2MzY0OjExYzI5OWQ4OTUzODdkZGViOWE4OWQyMmY1MGZlZDdjZWQ2OWYyYzE=","commit":{"author":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2010-02-23T21:55:49Z"},"committer":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2010-02-23T21:55:49Z"},"message":"OPENJPA-1520 Allow using JDK 1.5 to compile/run the junits by using -Ptest-java5,test-derby -Djava5.home=<1.5 JDK home>, so we can verify that the 1.6 built artifacts will still work for 1.5 users.\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@915539 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"df161af1e97014ac07d9437c7a14579481e56c36","url":"https://api.github.com/repos/apache/openjpa/git/trees/df161af1e97014ac07d9437c7a14579481e56c36"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/11c299d895387ddeb9a89d22f50fed7ced69f2c1","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/11c299d895387ddeb9a89d22f50fed7ced69f2c1","html_url":"https://github.com/apache/openjpa/commit/11c299d895387ddeb9a89d22f50fed7ced69f2c1","comments_url":"https://api.github.com/repos/apache/openjpa/commits/11c299d895387ddeb9a89d22f50fed7ced69f2c1/comments","author":null,"committer":null,"parents":[{"sha":"baa37056999ccc33666e36109cc1d9ed634c4c92","url":"https://api.github.com/repos/apache/openjpa/commits/baa37056999ccc33666e36109cc1d9ed634c4c92","html_url":"https://github.com/apache/openjpa/commit/baa37056999ccc33666e36109cc1d9ed634c4c92"}],"stats":{"total":266,"additions":164,"deletions":102},"files":[{"sha":"8ec56f4e856647b6395b53599d7310404ce39a12","filename":"pom.xml","status":"modified","additions":164,"deletions":102,"changes":266,"blob_url":"https://github.com/apache/openjpa/blob/11c299d895387ddeb9a89d22f50fed7ced69f2c1/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/11c299d895387ddeb9a89d22f50fed7ced69f2c1/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/pom.xml?ref=11c299d895387ddeb9a89d22f50fed7ced69f2c1","patch":"@@ -153,106 +153,6 @@\n     </modules>\n \n     <profiles>\n-        <!-- =============== -->\n-        <!--  Test Profiles  -->\n-        <!-- =============== -->\n-        <!-- Default profile for testing with an embedded Apache Derby DB -->\n-        <profile>\n-            <!--\n-                Optionally, you can override the following properties:\n-                    -Dderby.version=10.2.2.0\n-            -->\n-            <id>test-derby</id>\n-            <activation>\n-                <activeByDefault>true</activeByDefault>\n-            <property>\n-                <name>test-derby</name>\n-            </property>\n-            </activation>\n-            <dependencies>\n-                <dependency>\n-                    <groupId>org.apache.derby</groupId>\n-                    <artifactId>derby</artifactId>\n-                    <version>${derby.version}</version>\n-                    <scope>test</scope>\n-                </dependency>\n-            </dependencies>\n-            <properties>\n-                <connection.driver.name>org.apache.derby.jdbc.EmbeddedDriver</connection.driver.name>\n-                <connection.url>jdbc:derby:target/database/openjpa-derby-database;create=true</connection.url>\n-                <connection.username />\n-                <connection.password />\n-            </properties>\n-        </profile>\n-        <!-- Profile for testing with an In-Memory Apache Derby DB -->\n-        <profile>\n-            <!--\n-                Optionally, you can override the following properties:\n-                    -Dderby.version=10.5.3.0_1\n-            -->\n-            <id>test-derbymem</id>\n-            <activation>\n-                <property>\n-                    <name>test-derbymem</name>\n-                </property>\n-            </activation>\n-            <dependencies>\n-                <dependency>\n-                    <groupId>org.apache.derby</groupId>\n-                    <artifactId>derby</artifactId>\n-                    <version>${derby.version}</version>\n-                    <scope>test</scope>\n-                </dependency>\n-            </dependencies>\n-            <properties>\n-                <connection.driver.name>org.apache.derby.jdbc.EmbeddedDriver</connection.driver.name>\n-                <connection.url>jdbc:derby:memory:openjpa-derby-inmem-database;create=true</connection.url>\n-                <connection.username />\n-                <connection.password />\n-            </properties>\n-        </profile>\n-        <!-- Profile for testing with Apache Derby DB network server -->\n-        <profile>\n-            <!--\n-                Example Derby Network Server profile.\n-                You must manually start a Derby network server instance and\n-                also set the following properties:\n-                    -Dopenjpa.derbynet.url=jdbc:derby://<HOST>:<PORT>/<DBNAME>;\\\n-                        create=true\n-\n-                Optionally, you can override the following properties:\n-                    -Dopenjpa.derbynet.driver=org.apache.derby.jdbc.ClientXADataSource\n-                    -Dopenjpa.derbynet.username=\n-                    -Dopenjpa.derbynet.password=\n-                    -Dderby.version=10.2.2.0\n-            -->\n-            <id>test-derbynet</id>\n-            <activation>\n-                <property>\n-                    <name>test-derbynet</name>\n-                </property>\n-            </activation>\n-            <dependencies>\n-                <dependency>\n-                    <groupId>org.apache.derby</groupId>\n-                    <artifactId>derbyclient</artifactId>\n-                    <version>${derby.version}</version>\n-                    <scope>test</scope>\n-                </dependency>\n-            </dependencies>\n-            <properties>\n-                <openjpa.derbynet.url>jdbc:derby://localhost:1527/openjpa20;create=true;traceDirectory=target;traceFile=derby.log</openjpa.derbynet.url>\n-                <openjpa.derbynet.driver>org.apache.derby.jdbc.ClientDriver</openjpa.derbynet.driver>\n-                <!-- Note: commons-dbcp requires dummy values for uid/pwd -->\n-                <openjpa.derbynet.username>uid</openjpa.derbynet.username>\n-                <openjpa.derbynet.password>pwd</openjpa.derbynet.password>\n-                <connection.driver.name>${openjpa.derbynet.driver}</connection.driver.name>\n-                <connection.url>${openjpa.derbynet.url}</connection.url>\n-                <connection.username>${openjpa.derbynet.username}</connection.username>\n-                <connection.password>${openjpa.derbynet.password}</connection.password>\n-            </properties>\n-        </profile>\n-\n \n         <!-- ================ -->\n         <!--  Build Profiles  -->\n@@ -581,6 +481,19 @@\n             </build>\n         </profile>\n \n+        <!-- =============== -->\n+        <!--  Test Profiles  -->\n+        <!-- =============== -->\n+        <profile>\n+            <id>debug</id>\n+            <activation>\n+                <activeByDefault>false</activeByDefault>\n+            </activation>\n+            <properties>\n+                <test.jvm.arguments>-Xmx${test.jvm.maxheapsize} -XX:MaxPermSize=${test.jvm.maxpermsize} -agentlib:jdwp=transport=dt_socket,server=y,address=8000</test.jvm.arguments>\n+            </properties>\n+        </profile>\n+\n         <profile>\n             <id>enable-security</id>\n             <activation>\n@@ -619,16 +532,165 @@\n             </build>\n         </profile>\n \n+        <!-- Use this profile to build/execute the junits w/ a 1.5 JDK\n+             Note: You must also specific a DB test profile, like test-derby\n+             and provide -Djava5.home=<path to 1.5 JDK, like /opt/jdk1.5.0_22>\n+        -->\n         <profile>\n-            <id>debug</id>\n+            <id>test-java5</id>\n             <activation>\n                 <activeByDefault>false</activeByDefault>\n             </activation>\n             <properties>\n-                <test.jvm.arguments>-Xmx${test.jvm.maxheapsize} -XX:MaxPermSize=${test.jvm.maxpermsize} -agentlib:jdwp=transport=dt_socket,server=y,address=8000</test.jvm.arguments>\n+                <java5.home>\"java5.home - Must be user supplied\"</java5.home>\n+            </properties>\n+            <build>\n+                <pluginManagement>\n+                    <plugins>\n+                <plugin>\n+                    <groupId>org.apache.maven.plugins</groupId>\n+                    <artifactId>maven-compiler-plugin</artifactId>\n+                    <configuration>\n+                        <source>1.5</source>\n+                        <target>1.5</target>\n+                        <excludes>\n+                            <exclude>none</exclude>\n+                        </excludes>\n+                        <testExcludes>\n+                            <exclude>**</exclude>\n+                        </testExcludes>\n+                    </configuration>\n+                    <executions>\n+                        <execution>\n+                            <id>compile-java5</id>\n+                            <configuration>\n+                                <fork>true</fork>\n+                                <executable>${java5.home}/bin/javac</executable>\n+                                <compilerVersion>1.5</compilerVersion>\n+                                <maxmem>${test.jvm.maxheapsize}</maxmem>\n+                                <excludes>\n+                                    <exclude>**</exclude>\n+                                </excludes>\n+                                <testExcludes>\n+                                    <exclude>none</exclude>\n+                                </testExcludes>\n+                            </configuration>\n+                            <goals>\n+                                <goal>testCompile</goal>\n+                            </goals>\n+                        </execution>\n+                    </executions>\n+                        </plugin>\n+                        <plugin>\n+                            <groupId>org.apache.maven.plugins</groupId>\n+                            <artifactId>maven-surefire-plugin</artifactId>\n+                            <configuration>\n+                                <jvm>${java5.home}/bin/java</jvm>\n+                            </configuration>\n+                        </plugin>\n+                    </plugins>\n+                </pluginManagement>\n+            </build>\n+        </profile>\n+\n+        <!-- Default profile for testing with an embedded Apache Derby DB -->\n+        <profile>\n+            <!--\n+                Optionally, you can override the following properties:\n+                    -Dderby.version=10.2.2.0\n+            -->\n+            <id>test-derby</id>\n+            <activation>\n+                <activeByDefault>true</activeByDefault>\n+            <property>\n+                <name>test-derby</name>\n+            </property>\n+            </activation>\n+            <dependencies>\n+                <dependency>\n+                    <groupId>org.apache.derby</groupId>\n+                    <artifactId>derby</artifactId>\n+                    <version>${derby.version}</version>\n+                    <scope>test</scope>\n+                </dependency>\n+            </dependencies>\n+            <properties>\n+                <connection.driver.name>org.apache.derby.jdbc.EmbeddedDriver</connection.driver.name>\n+                <connection.url>jdbc:derby:target/database/openjpa-derby-database;create=true</connection.url>\n+                <connection.username />\n+                <connection.password />\n             </properties>\n         </profile>\n \n+        <!-- Profile for testing with an In-Memory Apache Derby DB -->\n+        <profile>\n+            <!--\n+                Optionally, you can override the following properties:\n+                    -Dderby.version=10.5.3.0_1\n+            -->\n+            <id>test-derbymem</id>\n+            <activation>\n+                <property>\n+                    <name>test-derbymem</name>\n+                </property>\n+            </activation>\n+            <dependencies>\n+                <dependency>\n+                    <groupId>org.apache.derby</groupId>\n+                    <artifactId>derby</artifactId>\n+                    <version>${derby.version}</version>\n+                    <scope>test</scope>\n+                </dependency>\n+            </dependencies>\n+            <properties>\n+                <connection.driver.name>org.apache.derby.jdbc.EmbeddedDriver</connection.driver.name>\n+                <connection.url>jdbc:derby:memory:openjpa-derby-inmem-database;create=true</connection.url>\n+                <connection.username />\n+                <connection.password />\n+            </properties>\n+        </profile>\n+\n+        <!-- Profile for testing with Apache Derby DB network server -->\n+        <profile>\n+            <!--\n+                Example Derby Network Server profile.\n+                You must manually start a Derby network server instance and\n+                also set the following properties:\n+                    -Dopenjpa.derbynet.url=jdbc:derby://<HOST>:<PORT>/<DBNAME>;\\\n+                        create=true\n+\n+                Optionally, you can override the following properties:\n+                    -Dopenjpa.derbynet.driver=org.apache.derby.jdbc.ClientXADataSource\n+                    -Dopenjpa.derbynet.username=\n+                    -Dopenjpa.derbynet.password=\n+                    -Dderby.version=10.2.2.0\n+            -->\n+            <id>test-derbynet</id>\n+            <activation>\n+                <property>\n+                    <name>test-derbynet</name>\n+                </property>\n+            </activation>\n+            <dependencies>\n+                <dependency>\n+                    <groupId>org.apache.derby</groupId>\n+                    <artifactId>derbyclient</artifactId>\n+                    <version>${derby.version}</version>\n+                    <scope>test</scope>\n+                </dependency>\n+            </dependencies>\n+            <properties>\n+                <openjpa.derbynet.url>jdbc:derby://localhost:1527/openjpa20;create=true;traceDirectory=target;traceFile=derby.log</openjpa.derbynet.url>\n+                <openjpa.derbynet.driver>org.apache.derby.jdbc.ClientDriver</openjpa.derbynet.driver>\n+                <!-- Note: commons-dbcp requires dummy values for uid/pwd -->\n+                <openjpa.derbynet.username>uid</openjpa.derbynet.username>\n+                <openjpa.derbynet.password>pwd</openjpa.derbynet.password>\n+                <connection.driver.name>${openjpa.derbynet.driver}</connection.driver.name>\n+                <connection.url>${openjpa.derbynet.url}</connection.url>\n+                <connection.username>${openjpa.derbynet.username}</connection.username>\n+                <connection.password>${openjpa.derbynet.password}</connection.password>\n+            </properties>\n+        </profile>\n     </profiles>\n \n     <!-- default versions for dependencies that child modules may include -->"}]}

