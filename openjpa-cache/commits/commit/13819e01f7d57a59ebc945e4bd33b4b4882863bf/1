{"sha":"13819e01f7d57a59ebc945e4bd33b4b4882863bf","node_id":"MDY6Q29tbWl0MjA2MzY0OjEzODE5ZTAxZjdkNTdhNTllYmM5NDVlNGJkMzNiNGI0ODgyODYzYmY=","commit":{"author":{"name":"Milosz Tylenda","email":"mtylenda@apache.org","date":"2009-05-12T17:43:28Z"},"committer":{"name":"Milosz Tylenda","email":"mtylenda@apache.org","date":"2009-05-12T17:43:28Z"},"message":"OPENJPA-466: Get rid of possible duplicate sequence values\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@773999 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"6a0ba459a881a027a57a70f2d57fc618e9c87e72","url":"https://api.github.com/repos/apache/openjpa/git/trees/6a0ba459a881a027a57a70f2d57fc618e9c87e72"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/13819e01f7d57a59ebc945e4bd33b4b4882863bf","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/13819e01f7d57a59ebc945e4bd33b4b4882863bf","html_url":"https://github.com/apache/openjpa/commit/13819e01f7d57a59ebc945e4bd33b4b4882863bf","comments_url":"https://api.github.com/repos/apache/openjpa/commits/13819e01f7d57a59ebc945e4bd33b4b4882863bf/comments","author":null,"committer":null,"parents":[{"sha":"f221b1fa85174279010d0801f0b3d8f541129b46","url":"https://api.github.com/repos/apache/openjpa/commits/f221b1fa85174279010d0801f0b3d8f541129b46","html_url":"https://github.com/apache/openjpa/commit/f221b1fa85174279010d0801f0b3d8f541129b46"}],"stats":{"total":9,"additions":4,"deletions":5},"files":[{"sha":"e3da56391de642082c1b1a7639cd550f5630b845","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/AbstractJDBCSeq.java","status":"modified","additions":3,"deletions":2,"changes":5,"blob_url":"https://github.com/apache/openjpa/blob/13819e01f7d57a59ebc945e4bd33b4b4882863bf/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/AbstractJDBCSeq.java","raw_url":"https://github.com/apache/openjpa/raw/13819e01f7d57a59ebc945e4bd33b4b4882863bf/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/AbstractJDBCSeq.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/AbstractJDBCSeq.java?ref=13819e01f7d57a59ebc945e4bd33b4b4882863bf","patch":"@@ -57,8 +57,9 @@ public void setType(int type) {\n     public Object next(StoreContext ctx, ClassMetaData meta) {\n         JDBCStore store = getStore(ctx);\n         try {\n-            current = nextInternal(store, (ClassMapping) meta);\n-            return current;\n+            Object currentLocal = nextInternal(store, (ClassMapping) meta);\n+            current = currentLocal;\n+            return currentLocal;\n         } catch (OpenJPAException ke) {\n             throw ke;\n         } catch (SQLException se) {"},{"sha":"5c1d134655b46c7c3495b9a50306f83a8cdd68dd","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/NativeJDBCSeq.java","status":"modified","additions":1,"deletions":3,"changes":4,"blob_url":"https://github.com/apache/openjpa/blob/13819e01f7d57a59ebc945e4bd33b4b4882863bf/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/NativeJDBCSeq.java","raw_url":"https://github.com/apache/openjpa/raw/13819e01f7d57a59ebc945e4bd33b4b4882863bf/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/NativeJDBCSeq.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/NativeJDBCSeq.java?ref=13819e01f7d57a59ebc945e4bd33b4b4882863bf","patch":"@@ -296,9 +296,7 @@ private long getSequence(Connection conn)\n         try {\n             stmnt = conn.prepareStatement(_select);\n             dict.setTimeouts(stmnt, _conf, false);\n-            synchronized(this) {\n-                rs = stmnt.executeQuery();\n-            }\n+            rs = stmnt.executeQuery();\n             if (rs.next())\n                 return rs.getLong(1);\n "}]}

