{"sha":"15e1289b9583f8e9c9d98d38dcf6d9654aaf1011","node_id":"MDY6Q29tbWl0MjA2MzY0OjE1ZTEyODliOTU4M2Y4ZTljOWQ5OGQzOGRjZjZkOTY1NGFhZjEwMTE=","commit":{"author":{"name":"Marc Prud'hommeaux","email":"mprudhom@apache.org","date":"2007-04-06T21:19:53Z"},"committer":{"name":"Marc Prud'hommeaux","email":"mprudhom@apache.org","date":"2007-04-06T21:19:53Z"},"message":"OPENJPA-193 Added 'tck-profile' profile flag that enables running the JPA TCK as part of the integration-test phase\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/openjpa/trunk@526287 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"e1a249e984dfc445bae3a7b662d3cf3bffd17e8d","url":"https://api.github.com/repos/apache/openjpa/git/trees/e1a249e984dfc445bae3a7b662d3cf3bffd17e8d"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/15e1289b9583f8e9c9d98d38dcf6d9654aaf1011","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/15e1289b9583f8e9c9d98d38dcf6d9654aaf1011","html_url":"https://github.com/apache/openjpa/commit/15e1289b9583f8e9c9d98d38dcf6d9654aaf1011","comments_url":"https://api.github.com/repos/apache/openjpa/commits/15e1289b9583f8e9c9d98d38dcf6d9654aaf1011/comments","author":null,"committer":null,"parents":[{"sha":"bd93bfa284315130c4f9e9a65d091925ffa919f4","url":"https://api.github.com/repos/apache/openjpa/commits/bd93bfa284315130c4f9e9a65d091925ffa919f4","html_url":"https://github.com/apache/openjpa/commit/bd93bfa284315130c4f9e9a65d091925ffa919f4"}],"stats":{"total":26,"additions":12,"deletions":14},"files":[{"sha":"692ad7a415bfb3b4c0b543f943cbb38c706f2b2a","filename":"openjpa-integration/tck/pom.xml","status":"modified","additions":11,"deletions":14,"changes":25,"blob_url":"https://github.com/apache/openjpa/blob/15e1289b9583f8e9c9d98d38dcf6d9654aaf1011/openjpa-integration/tck/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/15e1289b9583f8e9c9d98d38dcf6d9654aaf1011/openjpa-integration/tck/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-integration/tck/pom.xml?ref=15e1289b9583f8e9c9d98d38dcf6d9654aaf1011","patch":"@@ -19,16 +19,18 @@\n     This build file is used to run the JPA TCK. It assumes that you have\n     the TCK zip file located at:\n \n-        ${user.home}/.m2/privaterepos/jpa-1_0a-tck.zip\n+        ${user.home}/.m2/privaterepos/jpa-1_0b-tck.zip\n \n     If you have that file in a different location, it can be specified with\n     the \"tck.zip\" system property.\n \n+    The TCK will only be run if you have the \"tck-profile\" enabled.\n+\n     To run a specific package of tests, use the \"jpatck.pkg.dir\" system\n     property to specify the parent directory of the tests you want to run.\n     E.g.:\n \n-        mvn integration-test -Djpatck.pkg.dir=com/sun/ts/tests/ejb30/persistence/inheritance/mappedsc/descriptors\n+        mvn integration-test -Ptck-profile -Djpatck.pkg.dir=com/sun/ts/tests/ejb30/persistence/inheritance/mappedsc/descriptors\n \n     The TCK running process will do the following:\n \n@@ -53,6 +55,9 @@\n         <version>0.9.7-incubating-SNAPSHOT</version>\n     </parent>\n \n+    <profiles>\n+    <profile>\n+    <id>tck-profile</id>\n     <build>\n         <plugins>\n             <plugin>\n@@ -66,17 +71,10 @@\n                         <echo>Running Sun JPA TCK</echo>\n \n                         <property name=\"tck.zip\" value=\n-                            \"${settings.localRepository}/../privaterepos/jpa-1_0a-tck.zip\"/>\n-                        <!-- patch from Anderson for mappedBy bug -->\n-                        <property name=\"tck.patch\" value=\n-                            \"${settings.localRepository}/../privaterepos/jpa-tck-inheritance-mappedBy.jar\"/>\n-\n+                            \"${settings.localRepository}/../privaterepos/jpa-1_0b-tck.zip\"/>\n                          <available property=\"tck.available\" file=\"${tck.zip}\"/>\n                         <fail unless=\"tck.available\">The TCK file ${tck.zip} does not exist. This file must be downloaded separately in order to be able to run the JPA TCK</fail>\n \n-                        <available property=\"tck.patch.available\" file=\"${tck.patch}\"/>\n-                        <fail unless=\"tck.patch.available\">The TCK patch ${tck.patch} does not exist. This file must be downloaded separately in order to be able to run the JPA TCK</fail>\n-\n \n                         <available property=\"tck.available\" file=\"${tck.zip}\"/>\n                         <fail unless=\"tck.available\">The TCK file specific in the \"tck.zip\" system property (${tck.zip}) does not exist. This file must be downloaded separately in order to be able to run the JPA TCK</fail>\n@@ -94,10 +92,6 @@\n                         <unzip overwrite=\"false\"\n                             src=\"${tck.zip}\" dest=\"${tck.base}\"/>\n \n-                        <!-- unpack the patch over the TCK -->\n-                        <unzip overwrite=\"true\"\n-                            src=\"${tck.patch}\" dest=\"${tck.dir}\"/>\n-\n                         <property name=\"db.driver\"\n                             value=\"org.apache.derby.jdbc.EmbeddedDriver\"/>\n                         <property name=\"db.url\"\n@@ -247,6 +241,9 @@ database.driver=${db.driver}\n             </plugin>\n         </plugins>\n     </build>\n+    </profile>\n+    </profiles>\n+\n     <dependencies>\n         <dependency>\n             <groupId>org.apache.openjpa</groupId>"},{"sha":"e512f9edfb78fb4a8848903cb3385f6cc0bcb1e9","filename":"pom.xml","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/apache/openjpa/blob/15e1289b9583f8e9c9d98d38dcf6d9654aaf1011/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/15e1289b9583f8e9c9d98d38dcf6d9654aaf1011/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/pom.xml?ref=15e1289b9583f8e9c9d98d38dcf6d9654aaf1011","patch":"@@ -103,6 +103,7 @@\n         <module>openjpa-xmlstore</module>\r\n         <module>openjpa-all</module>\r\n         <module>openjpa-project</module>\r\n+        <module>openjpa-integration</module>\r\n     </modules>\r\n     <profiles>\r\n         <profile>\r"}]}

