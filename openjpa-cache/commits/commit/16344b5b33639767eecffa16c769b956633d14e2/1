{"sha":"16344b5b33639767eecffa16c769b956633d14e2","node_id":"MDY6Q29tbWl0MjA2MzY0OjE2MzQ0YjViMzM2Mzk3NjdlZWNmZmExNmM3NjliOTU2NjMzZDE0ZTI=","commit":{"author":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2009-07-29T23:53:18Z"},"committer":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2009-07-29T23:53:18Z"},"message":"OPENJPA-1120 idEquals() broken in BigDecimalId and BigIntegerId.  Patch contributed by Dieter Von Holten with additional updates from Albert Lee.\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@799132 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"b6dcdc82b129e8849184698fd08491880c6559f8","url":"https://api.github.com/repos/apache/openjpa/git/trees/b6dcdc82b129e8849184698fd08491880c6559f8"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/16344b5b33639767eecffa16c769b956633d14e2","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/16344b5b33639767eecffa16c769b956633d14e2","html_url":"https://github.com/apache/openjpa/commit/16344b5b33639767eecffa16c769b956633d14e2","comments_url":"https://api.github.com/repos/apache/openjpa/commits/16344b5b33639767eecffa16c769b956633d14e2/comments","author":null,"committer":null,"parents":[{"sha":"8ca7664bd9192c64ca955266fa4969e4ddb642d9","url":"https://api.github.com/repos/apache/openjpa/commits/8ca7664bd9192c64ca955266fa4969e4ddb642d9","html_url":"https://github.com/apache/openjpa/commit/8ca7664bd9192c64ca955266fa4969e4ddb642d9"}],"stats":{"total":37,"additions":20,"deletions":17},"files":[{"sha":"2f9aad4391d27ef53f8caf91d5d5d014654d7df4","filename":"openjpa-kernel/src/main/java/org/apache/openjpa/util/BigDecimalId.java","status":"modified","additions":10,"deletions":8,"changes":18,"blob_url":"https://github.com/apache/openjpa/blob/16344b5b33639767eecffa16c769b956633d14e2/openjpa-kernel/src/main/java/org/apache/openjpa/util/BigDecimalId.java","raw_url":"https://github.com/apache/openjpa/raw/16344b5b33639767eecffa16c769b956633d14e2/openjpa-kernel/src/main/java/org/apache/openjpa/util/BigDecimalId.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/java/org/apache/openjpa/util/BigDecimalId.java?ref=16344b5b33639767eecffa16c769b956633d14e2","patch":"@@ -14,7 +14,7 @@\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n- * under the License.    \n+ * under the License.\n  */\n package org.apache.openjpa.util;\n \n@@ -52,23 +52,25 @@ public Object getIdObject() {\n     }\n \n     public String toString() {\n-        if (key == null)\n+        if (key == null) {\n             return \"NULL\";\n-\n+        }\n         return key.toString();\n     }\n \n     protected int idHash() {\n-        if (key != null)\n+        if (key != null) {\n             return key.hashCode();\n-\n+        }\n         return 0;\n     }\n \n     protected boolean idEquals(OpenJPAId other) {\n-        if(key == null)\n+        if ((key == null) ||\n+            (!BigDecimalId.class.isAssignableFrom(other.getClass()))) {\n             return false;\n-\n-        return key.equals(other);\n+        }\n+        return key.equals(((BigDecimalId)other).key);\n     }\n }\n+"},{"sha":"d34138ceba49163b326c8000c0bf7bf293059b58","filename":"openjpa-kernel/src/main/java/org/apache/openjpa/util/BigIntegerId.java","status":"modified","additions":10,"deletions":9,"changes":19,"blob_url":"https://github.com/apache/openjpa/blob/16344b5b33639767eecffa16c769b956633d14e2/openjpa-kernel/src/main/java/org/apache/openjpa/util/BigIntegerId.java","raw_url":"https://github.com/apache/openjpa/raw/16344b5b33639767eecffa16c769b956633d14e2/openjpa-kernel/src/main/java/org/apache/openjpa/util/BigIntegerId.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/java/org/apache/openjpa/util/BigIntegerId.java?ref=16344b5b33639767eecffa16c769b956633d14e2","patch":"@@ -14,7 +14,7 @@\n  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n  * KIND, either express or implied.  See the License for the\n  * specific language governing permissions and limitations\n- * under the License.    \n+ * under the License.\n  */\n package org.apache.openjpa.util;\n \n@@ -52,24 +52,25 @@ public Object getIdObject() {\n     }\n \n     public String toString() {\n-        if (key == null)\n+        if (key == null) {\n             return \"NULL\";\n-\n+        }\n         return key.toString();\n     }\n \n     protected int idHash() {\n-        if (key != null)\n+        if (key != null) {\n             return key.hashCode();\n-\n+        }\n         return 0;\n     }\n \n     protected boolean idEquals(OpenJPAId other) {\n-        if (key == null)\n+        if ((key == null) ||\n+             (!BigIntegerId.class.isAssignableFrom(other.getClass()))) {\n             return false;\n-\n-        return key.equals(other);\n+        }\n+        return key.equals(((BigIntegerId)other).key);\n     }\n-\n }\n+"}]}

