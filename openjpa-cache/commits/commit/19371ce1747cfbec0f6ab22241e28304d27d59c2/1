{"sha":"19371ce1747cfbec0f6ab22241e28304d27d59c2","node_id":"MDY6Q29tbWl0MjA2MzY0OjE5MzcxY2UxNzQ3Y2ZiZWMwZjZhYjIyMjQxZTI4MzA0ZDI3ZDU5YzI=","commit":{"author":{"name":"Fay Wang","email":"faywang@apache.org","date":"2009-04-02T15:40:13Z"},"committer":{"name":"Fay Wang","email":"faywang@apache.org","date":"2009-04-02T15:40:13Z"},"message":"OPENJPA-218: fix merge problem with derived identity using IdClass. The corresponding test case is checked in using JIRA-1004.\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@761328 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"31721d886e55274ac269183774c796b40376dd01","url":"https://api.github.com/repos/apache/openjpa/git/trees/31721d886e55274ac269183774c796b40376dd01"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/19371ce1747cfbec0f6ab22241e28304d27d59c2","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/19371ce1747cfbec0f6ab22241e28304d27d59c2","html_url":"https://github.com/apache/openjpa/commit/19371ce1747cfbec0f6ab22241e28304d27d59c2","comments_url":"https://api.github.com/repos/apache/openjpa/commits/19371ce1747cfbec0f6ab22241e28304d27d59c2/comments","author":null,"committer":null,"parents":[{"sha":"f21f7b5ae5d52a2897fc96916ef20fb6f0f541a8","url":"https://api.github.com/repos/apache/openjpa/commits/f21f7b5ae5d52a2897fc96916ef20fb6f0f541a8","html_url":"https://github.com/apache/openjpa/commit/f21f7b5ae5d52a2897fc96916ef20fb6f0f541a8"}],"stats":{"total":7,"additions":6,"deletions":1},"files":[{"sha":"3491ac4cb2dc5ce787e14216b1184b75c8553bc3","filename":"openjpa-kernel/src/main/java/org/apache/openjpa/enhance/PCEnhancer.java","status":"modified","additions":6,"deletions":1,"changes":7,"blob_url":"https://github.com/apache/openjpa/blob/19371ce1747cfbec0f6ab22241e28304d27d59c2/openjpa-kernel/src/main/java/org/apache/openjpa/enhance/PCEnhancer.java","raw_url":"https://github.com/apache/openjpa/raw/19371ce1747cfbec0f6ab22241e28304d27d59c2/openjpa-kernel/src/main/java/org/apache/openjpa/enhance/PCEnhancer.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/java/org/apache/openjpa/enhance/PCEnhancer.java?ref=19371ce1747cfbec0f6ab22241e28304d27d59c2","patch":"@@ -2270,8 +2270,13 @@ private void addCopyKeyFieldsFromObjectIdMethod(boolean fieldManager)\n             type = fmds[i].getObjectIdFieldType();\n             if (!fieldManager \n                 && fmds[i].getDeclaredTypeCode() == JavaTypes.PC) {\n-                // sm.getPCPrimaryKey(oid, i + pcInheritedFieldCount); \n+                // if (sm == null) return;\n                 loadManagedInstance(code, false);\n+                code.getfield().setField(SM, SMTYPE);\n+                JumpInstruction ifins = code.ifnonnull();\n+                code.vreturn();\n+                // sm.getPCPrimaryKey(oid, i + pcInheritedFieldCount); \n+                ifins.setTarget(loadManagedInstance(code, false));\n                 code.dup(); // leave orig on stack to set value into\n                 code.getfield().setField(SM, SMTYPE);\n                 code.aload().setLocal(id);"}]}

