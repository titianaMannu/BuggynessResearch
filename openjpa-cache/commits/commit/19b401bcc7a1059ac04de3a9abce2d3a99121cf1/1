{"sha":"19b401bcc7a1059ac04de3a9abce2d3a99121cf1","node_id":"MDY6Q29tbWl0MjA2MzY0OjE5YjQwMWJjYzdhMTA1OWFjMDRkZTNhOWFiY2UyZDNhOTkxMjFjZjE=","commit":{"author":{"name":"Patrick Linskey","email":"pcl@apache.org","date":"2006-07-18T22:32:16Z"},"committer":{"name":"Patrick Linskey","email":"pcl@apache.org","date":"2006-07-18T22:32:16Z"},"message":"opened up BrokerFactoryValue bootstrapping configuration a bit; added better error bootstrapping error messages\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/openjpa/trunk@423271 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"ced9b0e259d4d28b05425be77d01c5615ba9bf16","url":"https://api.github.com/repos/apache/openjpa/git/trees/ced9b0e259d4d28b05425be77d01c5615ba9bf16"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/19b401bcc7a1059ac04de3a9abce2d3a99121cf1","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/19b401bcc7a1059ac04de3a9abce2d3a99121cf1","html_url":"https://github.com/apache/openjpa/commit/19b401bcc7a1059ac04de3a9abce2d3a99121cf1","comments_url":"https://api.github.com/repos/apache/openjpa/commits/19b401bcc7a1059ac04de3a9abce2d3a99121cf1/comments","author":null,"committer":null,"parents":[{"sha":"99eb918da3e5dbf1253a57e2b0a2b41f666457a4","url":"https://api.github.com/repos/apache/openjpa/commits/99eb918da3e5dbf1253a57e2b0a2b41f666457a4","html_url":"https://github.com/apache/openjpa/commit/99eb918da3e5dbf1253a57e2b0a2b41f666457a4"}],"stats":{"total":37,"additions":26,"deletions":11},"files":[{"sha":"dd084d1bc4f3bf026f8dfe97855542df4f08a470","filename":"openjpa-kernel/src/main/java/org/apache/openjpa/conf/BrokerFactoryValue.java","status":"modified","additions":16,"deletions":6,"changes":22,"blob_url":"https://github.com/apache/openjpa/blob/19b401bcc7a1059ac04de3a9abce2d3a99121cf1/openjpa-kernel/src/main/java/org/apache/openjpa/conf/BrokerFactoryValue.java","raw_url":"https://github.com/apache/openjpa/raw/19b401bcc7a1059ac04de3a9abce2d3a99121cf1/openjpa-kernel/src/main/java/org/apache/openjpa/conf/BrokerFactoryValue.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/java/org/apache/openjpa/conf/BrokerFactoryValue.java?ref=19b401bcc7a1059ac04de3a9abce2d3a99121cf1","patch":"@@ -15,6 +15,8 @@\n  */\n package org.apache.openjpa.conf;\n \n+import java.util.List;\n+import java.util.ArrayList;\n import java.util.Collection;\n import java.util.HashSet;\n import java.util.Iterator;\n@@ -38,15 +40,13 @@\n \n     private static final String KEY = \"BrokerFactory\";\n \n-    private static final String[] ALIASES = new String[]{\n-        \"abstractstore\",\n-        \"org.apache.openjpa.abstractstore.AbstractStoreBrokerFactory\",\n-    };\n-    \n+    private static final List _aliases = new ArrayList();\n     private static final Collection _prefixes = new HashSet();\n     \n     static {\n         _prefixes.add(\"openjpa\");\n+        addDefaultAlias(\"abstractstore\",\n+            \"org.apache.openjpa.abstractstore.AbstractStoreBrokerFactory\");\n     }\n \n     public BrokerFactoryValue() {\n@@ -55,7 +55,7 @@ public BrokerFactoryValue() {\n \n     public BrokerFactoryValue(String prop) {\n         super(prop, false);\n-        setAliases(ALIASES);\n+        setAliases((String[]) _aliases.toArray(new String[_aliases.size()]));\n     }\n \n     /**\n@@ -88,4 +88,14 @@ public static String getBrokerFactoryProperty(ConfigurationProvider cp) {\n     public static void addPropertyPrefix(String prefix) {\n         _prefixes.add(prefix);\n     }\n+    \n+    \n+    /**\n+     * Add a mapping from <code>alias</code> to <code>cls</code> to the list\n+     * of default aliases for new values created after this invocation.\n+     */\n+    public static void addDefaultAlias(String alias, String cls) {\n+        _aliases.add(alias);\n+        _aliases.add(cls);\n+    }\n }"},{"sha":"dad88c5bf626c88da58cc868ac2b04afee3555fc","filename":"openjpa-kernel/src/main/java/org/apache/openjpa/kernel/Bootstrap.java","status":"modified","additions":0,"deletions":1,"changes":1,"blob_url":"https://github.com/apache/openjpa/blob/19b401bcc7a1059ac04de3a9abce2d3a99121cf1/openjpa-kernel/src/main/java/org/apache/openjpa/kernel/Bootstrap.java","raw_url":"https://github.com/apache/openjpa/raw/19b401bcc7a1059ac04de3a9abce2d3a99121cf1/openjpa-kernel/src/main/java/org/apache/openjpa/kernel/Bootstrap.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/java/org/apache/openjpa/kernel/Bootstrap.java?ref=19b401bcc7a1059ac04de3a9abce2d3a99121cf1","patch":"@@ -17,7 +17,6 @@\n \n import java.lang.reflect.InvocationTargetException;\n import java.lang.reflect.Method;\n-import java.util.Map;\n \n import org.apache.openjpa.conf.BrokerFactoryValue;\n import org.apache.openjpa.conf.ProductDerivations;"},{"sha":"454140951f9c8d9b76530c96a159711bafe482d3","filename":"openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/ConfigurationImpl.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/apache/openjpa/blob/19b401bcc7a1059ac04de3a9abce2d3a99121cf1/openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/ConfigurationImpl.java","raw_url":"https://github.com/apache/openjpa/raw/19b401bcc7a1059ac04de3a9abce2d3a99121cf1/openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/ConfigurationImpl.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/ConfigurationImpl.java?ref=19b401bcc7a1059ac04de3a9abce2d3a99121cf1","patch":"@@ -169,7 +169,7 @@ public boolean loadDefaults() {\n         if (provider == null) {\n             Log log = getConfigurationLog();\n             if (log.isTraceEnabled())\n-                log.trace(_loc.get(\"no-providers\"));\n+                log.trace(_loc.get(\"no-default-providers\"));\n             return false;\n         }\n         return true;"},{"sha":"4d8cb8d4dfb317c1c0a596a90b81a3d9c423ff4f","filename":"openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/Configurations.java","status":"modified","additions":6,"deletions":1,"changes":7,"blob_url":"https://github.com/apache/openjpa/blob/19b401bcc7a1059ac04de3a9abce2d3a99121cf1/openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/Configurations.java","raw_url":"https://github.com/apache/openjpa/raw/19b401bcc7a1059ac04de3a9abce2d3a99121cf1/openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/Configurations.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/Configurations.java?ref=19b401bcc7a1059ac04de3a9abce2d3a99121cf1","patch":"@@ -500,7 +500,12 @@ public static ConfigurationProvider load(String resource,\n                 errs.append(e.toString());\n             }\n         }\n-        String msg = (errs == null) ? resource : errs.toString();\n+        String msg;\n+        if (errs != null)\n+            msg = errs.toString();\n+        else\n+            msg = _loc.get(\"no-provider\", resource);\n+        \n         throw new MissingResourceException(msg,\n             Configurations.class.getName(), resource);\n     }"},{"sha":"6eacd172e75a2a97f6b597eb2cea43ef055a8fc4","filename":"openjpa-lib/src/main/resources/org/apache/openjpa/lib/conf/localizer.properties","status":"modified","additions":3,"deletions":2,"changes":5,"blob_url":"https://github.com/apache/openjpa/blob/19b401bcc7a1059ac04de3a9abce2d3a99121cf1/openjpa-lib/src/main/resources/org/apache/openjpa/lib/conf/localizer.properties","raw_url":"https://github.com/apache/openjpa/raw/19b401bcc7a1059ac04de3a9abce2d3a99121cf1/openjpa-lib/src/main/resources/org/apache/openjpa/lib/conf/localizer.properties","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-lib/src/main/resources/org/apache/openjpa/lib/conf/localizer.properties?ref=19b401bcc7a1059ac04de3a9abce2d3a99121cf1","patch":"@@ -43,8 +43,9 @@ not-singleton: You cannot set the value of property \"{0}\" as an object.  The \\\n cant-set-string: Configuration property \"{0}\" cannot be set from a string. \\\n \tYou must supply the object value.\n loaded-via-provider: Configuration information loaded via \"{0}\".\n-no-providers: Default configuration information couldn''t be loaded from any \\\n-\tprovider.\n+no-default-providers: Default configuration information couldn''t be loaded \\\n+\tfrom any configuration provider.\n+no-provider: No registered configuration provider could load \"{0}\".\n hook-before: An exception occurred while invoking beforeConfigurationLoad() \\\n \ton \"{0}\". This exception will be consumed.\n hook-after: An exception occurred while invoking afterConfigurationLoad() \\"}]}

