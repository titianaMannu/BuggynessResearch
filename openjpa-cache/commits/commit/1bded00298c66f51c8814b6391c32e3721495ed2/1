{"sha":"1bded00298c66f51c8814b6391c32e3721495ed2","node_id":"MDY6Q29tbWl0MjA2MzY0OjFiZGVkMDAyOThjNjZmNTFjODgxNGI2MzkxYzMyZTM3MjE0OTVlZDI=","commit":{"author":{"name":"Patrick Linskey","email":"pcl@apache.org","date":"2007-07-01T21:13:16Z"},"committer":{"name":"Patrick Linskey","email":"pcl@apache.org","date":"2007-07-01T21:13:16Z"},"message":"OPENJPA-199. Passed all local tests; I have not run against the CTS though. It *should* work against the CTS, as it was a bug on our side, and not the spec's side.\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@552363 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"5e2d7b0fe6b22af4a8bdde4a1a7443d9c14ab400","url":"https://api.github.com/repos/apache/openjpa/git/trees/5e2d7b0fe6b22af4a8bdde4a1a7443d9c14ab400"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/1bded00298c66f51c8814b6391c32e3721495ed2","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/1bded00298c66f51c8814b6391c32e3721495ed2","html_url":"https://github.com/apache/openjpa/commit/1bded00298c66f51c8814b6391c32e3721495ed2","comments_url":"https://api.github.com/repos/apache/openjpa/commits/1bded00298c66f51c8814b6391c32e3721495ed2/comments","author":null,"committer":null,"parents":[{"sha":"85b2e766cae4a55e9e32442cc889a56b8fee0d65","url":"https://api.github.com/repos/apache/openjpa/commits/85b2e766cae4a55e9e32442cc889a56b8fee0d65","html_url":"https://github.com/apache/openjpa/commit/85b2e766cae4a55e9e32442cc889a56b8fee0d65"}],"stats":{"total":57,"additions":49,"deletions":8},"files":[{"sha":"431eb3c2f24afa2d05c56d5019d2852190721c9c","filename":"openjpa-kernel/src/main/jjtree/org/apache/openjpa/kernel/jpql/JPQL.jjt","status":"modified","additions":1,"deletions":8,"changes":9,"blob_url":"https://github.com/apache/openjpa/blob/1bded00298c66f51c8814b6391c32e3721495ed2/openjpa-kernel/src/main/jjtree/org/apache/openjpa/kernel/jpql/JPQL.jjt","raw_url":"https://github.com/apache/openjpa/raw/1bded00298c66f51c8814b6391c32e3721495ed2/openjpa-kernel/src/main/jjtree/org/apache/openjpa/kernel/jpql/JPQL.jjt","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/jjtree/org/apache/openjpa/kernel/jpql/JPQL.jjt?ref=1bded00298c66f51c8814b6391c32e3721495ed2","patch":"@@ -451,14 +451,7 @@ void set_clause() : { }\n \n void update_item() #UPDATEITEM : { }\n {\n-\tupdate_field() EQ() new_value()\n-}\n-\n-\n-void update_field() #UPDATEFIELD : { }\n-{\n-\t// identification_variable() (<DOT> path_component())+\n-\t[LOOKAHEAD(1) identification_variable() <DOT>] path_component()\n+\tpath() EQ() new_value()\n }\n \n "},{"sha":"a5d96d8dc46fcf34c95cdc1086227a6dea1f58e2","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/relations/TestBulkUpdatesAndEmbeddedFields.java","status":"added","additions":48,"deletions":0,"changes":48,"blob_url":"https://github.com/apache/openjpa/blob/1bded00298c66f51c8814b6391c32e3721495ed2/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/relations/TestBulkUpdatesAndEmbeddedFields.java","raw_url":"https://github.com/apache/openjpa/raw/1bded00298c66f51c8814b6391c32e3721495ed2/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/relations/TestBulkUpdatesAndEmbeddedFields.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/relations/TestBulkUpdatesAndEmbeddedFields.java?ref=1bded00298c66f51c8814b6391c32e3721495ed2","patch":"@@ -0,0 +1,48 @@\n+/*\r\n+ * Licensed to the Apache Software Foundation (ASF) under one\r\n+ * or more contributor license agreements.  See the NOTICE file\r\n+ * distributed with this work for additional information\r\n+ * regarding copyright ownership.  The ASF licenses this file\r\n+ * to you under the Apache License, Version 2.0 (the\r\n+ * \"License\"); you may not use this file except in compliance\r\n+ * with the License.  You may obtain a copy of the License at\r\n+ *\r\n+ * http://www.apache.org/licenses/LICENSE-2.0\r\n+ *\r\n+ * Unless required by applicable law or agreed to in writing,\r\n+ * software distributed under the License is distributed on an\r\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n+ * KIND, either express or implied.  See the License for the\r\n+ * specific language governing permissions and limitations\r\n+ * under the License.    \r\n+ */\r\n+package org.apache.openjpa.persistence.relations;\r\n+\r\n+import org.apache.openjpa.persistence.test.SingleEMTestCase;\r\n+\r\n+/**\r\n+ * Tests OPENJPA-199\r\n+ */\r\n+public class TestBulkUpdatesAndEmbeddedFields\r\n+    extends SingleEMTestCase {\r\n+\r\n+    public void setUp() {\r\n+        setUp(MultipleSameTypedEmbedded.class, EmbeddableWithRelation.class,\r\n+            CLEAR_TABLES);\r\n+\r\n+        em.getTransaction().begin();\r\n+        MultipleSameTypedEmbedded pc = new MultipleSameTypedEmbedded();\r\n+        pc.setEmbed1(new EmbeddableWithRelation());\r\n+        pc.getEmbed1().setName(\"foo\");\r\n+        em.persist(pc);\r\n+        em.getTransaction().commit();\r\n+    }\r\n+\r\n+    public void testBulkUpdateOfEmbeddedField() {\r\n+        em.getTransaction().begin();\r\n+        assertEquals(1, em.createQuery(\r\n+            \"UPDATE MultipleSameTypedEmbedded o SET o.embed1.name = 'bar'\")\r\n+            .executeUpdate());\r\n+        em.getTransaction().commit();\r\n+    }\r\n+}\n\\ No newline at end of file"}]}

