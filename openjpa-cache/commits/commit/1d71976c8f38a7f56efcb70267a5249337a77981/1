{"sha":"1d71976c8f38a7f56efcb70267a5249337a77981","node_id":"MDY6Q29tbWl0MjA2MzY0OjFkNzE5NzZjOGYzOGE3ZjU2ZWZjYjcwMjY3YTUyNDkzMzdhNzc5ODE=","commit":{"author":{"name":"Richard G. Curtis","email":"curtisr7@apache.org","date":"2012-03-21T18:41:42Z"},"committer":{"name":"Richard G. Curtis","email":"curtisr7@apache.org","date":"2012-03-21T18:41:42Z"},"message":"OPENJPA-2156: Add support for generating a final class.\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@1303496 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"b057261428c244bdf087cb7cc6a8003db9241e02","url":"https://api.github.com/repos/apache/openjpa/git/trees/b057261428c244bdf087cb7cc6a8003db9241e02"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/1d71976c8f38a7f56efcb70267a5249337a77981","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/1d71976c8f38a7f56efcb70267a5249337a77981","html_url":"https://github.com/apache/openjpa/commit/1d71976c8f38a7f56efcb70267a5249337a77981","comments_url":"https://api.github.com/repos/apache/openjpa/commits/1d71976c8f38a7f56efcb70267a5249337a77981/comments","author":null,"committer":null,"parents":[{"sha":"7063dd52967a0c8532624e4e0ae849a0be39b81f","url":"https://api.github.com/repos/apache/openjpa/commits/7063dd52967a0c8532624e4e0ae849a0be39b81f","html_url":"https://github.com/apache/openjpa/commit/7063dd52967a0c8532624e4e0ae849a0be39b81f"}],"stats":{"total":24,"additions":19,"deletions":5},"files":[{"sha":"95a1d10b8fa066a45cbeb81ae6ba5b0e1e1f62d0","filename":"openjpa-persistence/src/main/java/org/apache/openjpa/persistence/util/SourceCode.java","status":"modified","additions":18,"deletions":5,"changes":23,"blob_url":"https://github.com/apache/openjpa/blob/1d71976c8f38a7f56efcb70267a5249337a77981/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/util/SourceCode.java","raw_url":"https://github.com/apache/openjpa/raw/1d71976c8f38a7f56efcb70267a5249337a77981/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/util/SourceCode.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/util/SourceCode.java?ref=1d71976c8f38a7f56efcb70267a5249337a77981","patch":"@@ -361,7 +361,8 @@ public void write(PrintWriter out, int tab) {\n \t *\n \t */\n \tpublic class Class extends Element<Class> {\n-\t\tprivate boolean isAbstract;\n+        private boolean isAbstract;\n+\t\tprivate boolean isFinal;\n \t\tprivate ClassName superCls;\n \t\tprivate List<ClassName> interfaces = new ArrayList<ClassName>();\n \t    private Set<Field> fields   = new TreeSet<Field>();\n@@ -383,10 +384,20 @@ public Class addInterface(String s) {\n \t\t\treturn this;\n \t\t}\n \t\t\n-\t\tpublic Class makeAbstract() {\n-\t\t\tisAbstract = true;\n-\t\t\treturn this;\n-\t\t}\n+        public Class makeAbstract() {\n+            if (isFinal)\n+                throw new IllegalArgumentException(_loc.get(\"src-invalid-modifier\").toString());\n+\n+            isAbstract = true;\n+            return this;\n+        }\n+\n+        public Class makeFinal() {\n+            if (isAbstract)\n+                throw new IllegalArgumentException(_loc.get(\"src-invalid-modifier\").toString());\n+            isFinal = true;\n+            return this;\n+        }\n \t\t\n \t    /**\n \t     * Adds getters and setters to every non-public field.\n@@ -449,6 +460,8 @@ public void write(PrintWriter out, int tab) {\n \t\t\tsuper.write(out, tab);\n \t\t\tif (isAbstract) \n \t\t\t    out.append(\"abstract \");\n+\t\t\tif(isFinal)\n+\t\t\t    out.append(\"final \");\n \t\t\tout.print(\"class \");\n \t\t\tout.print(type.simpleName);\n \t\t\twriteList(out, BLANK, params, PARAMS_DELIMITER, false);"},{"sha":"6fd3884743a630351b1252b0a35817914915af12","filename":"openjpa-persistence/src/main/resources/org/apache/openjpa/persistence/util/localizer.properties","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/apache/openjpa/blob/1d71976c8f38a7f56efcb70267a5249337a77981/openjpa-persistence/src/main/resources/org/apache/openjpa/persistence/util/localizer.properties","raw_url":"https://github.com/apache/openjpa/raw/1d71976c8f38a7f56efcb70267a5249337a77981/openjpa-persistence/src/main/resources/org/apache/openjpa/persistence/util/localizer.properties","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence/src/main/resources/org/apache/openjpa/persistence/util/localizer.properties?ref=1d71976c8f38a7f56efcb70267a5249337a77981","patch":"@@ -23,3 +23,4 @@ src-invalid-type: \"{0}\" is not a valid type name. It must be a valid Java packag\n Java type or token and a valid Java identifier.\n src-invalid-field: \"{0}\" is not a valid field name. \\\n It must be a non-reserved Java token and a valid Java identifier.\n+src-invalid-modifier: Unable to declare a class as abstract and final."}]}

