{"sha":"22f77ef4d21994610bd250e99230555ad56fb4d8","node_id":"MDY6Q29tbWl0MjA2MzY0OjIyZjc3ZWY0ZDIxOTk0NjEwYmQyNTBlOTkyMzA1NTVhZDU2ZmI0ZDg=","commit":{"author":{"name":"Marc Prud'hommeaux","email":"mprudhom@apache.org","date":"2007-01-29T21:07:20Z"},"committer":{"name":"Marc Prud'hommeaux","email":"mprudhom@apache.org","date":"2007-01-29T21:07:20Z"},"message":"Handle ClassNotFoundException and ClassCircularityError instances when trying to load the classes into the temporary class loader during enhancement. These exceptions will indicate that the class is not loadable, and so they couldn't have any persistent metadata anyway.\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/openjpa/trunk@501183 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"e6d976f1d9a5176dc530af6b87ba58c51350056d","url":"https://api.github.com/repos/apache/openjpa/git/trees/e6d976f1d9a5176dc530af6b87ba58c51350056d"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/22f77ef4d21994610bd250e99230555ad56fb4d8","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/22f77ef4d21994610bd250e99230555ad56fb4d8","html_url":"https://github.com/apache/openjpa/commit/22f77ef4d21994610bd250e99230555ad56fb4d8","comments_url":"https://api.github.com/repos/apache/openjpa/commits/22f77ef4d21994610bd250e99230555ad56fb4d8/comments","author":null,"committer":null,"parents":[{"sha":"5f76ea2eaff5fb3dd8c4ad5c6ed1d5554f5065a3","url":"https://api.github.com/repos/apache/openjpa/commits/5f76ea2eaff5fb3dd8c4ad5c6ed1d5554f5065a3","html_url":"https://github.com/apache/openjpa/commit/5f76ea2eaff5fb3dd8c4ad5c6ed1d5554f5065a3"}],"stats":{"total":8,"additions":8,"deletions":0},"files":[{"sha":"deb09f8567dfac945da4cc4f6d6fb19a3bdf5c86","filename":"openjpa-kernel-5/src/main/java/org/apache/openjpa/enhance/PCClassFileTransformer.java","status":"modified","additions":8,"deletions":0,"changes":8,"blob_url":"https://github.com/apache/openjpa/blob/22f77ef4d21994610bd250e99230555ad56fb4d8/openjpa-kernel-5/src/main/java/org/apache/openjpa/enhance/PCClassFileTransformer.java","raw_url":"https://github.com/apache/openjpa/raw/22f77ef4d21994610bd250e99230555ad56fb4d8/openjpa-kernel-5/src/main/java/org/apache/openjpa/enhance/PCClassFileTransformer.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel-5/src/main/java/org/apache/openjpa/enhance/PCClassFileTransformer.java?ref=22f77ef4d21994610bd250e99230555ad56fb4d8","patch":"@@ -173,6 +173,14 @@ private Boolean needsEnhance(String clsName, Class redef, byte[] bytes) {\n             if (_repos.getMetaData(c, null, false) != null)\n                 return Boolean.TRUE;\n             return null;\n+        } catch (ClassNotFoundException cnfe) {\n+            // cannot load the class: this might mean that it is a proxy\n+            // or otherwise inaccessible class\n+            return Boolean.FALSE;\n+        } catch (ClassCircularityError cce) {\n+            // this can happen if we are loading classes what this\n+            // class already depends on\n+            return Boolean.FALSE;\n         } catch (RuntimeException re) {\n             throw re;\n         } catch (Throwable t) {"}]}

