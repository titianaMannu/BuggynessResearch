{"sha":"236f409a91ba4423f6ea27045009f29877469c9d","node_id":"MDY6Q29tbWl0MjA2MzY0OjIzNmY0MDlhOTFiYTQ0MjNmNmVhMjcwNDUwMDlmMjk4Nzc0NjljOWQ=","commit":{"author":{"name":"Jeremy Bauer","email":"jrbauer@apache.org","date":"2011-09-29T15:05:08Z"},"committer":{"name":"Jeremy Bauer","email":"jrbauer@apache.org","date":"2011-09-29T15:05:08Z"},"message":"OPENJPA-2053 Added property to enable proper OSGi service tracking of the OpenJPA provider.\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@1177327 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"b89c6eddd71ba43f814633a9d2dd7a561716d8d2","url":"https://api.github.com/repos/apache/openjpa/git/trees/b89c6eddd71ba43f814633a9d2dd7a561716d8d2"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/236f409a91ba4423f6ea27045009f29877469c9d","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/236f409a91ba4423f6ea27045009f29877469c9d","html_url":"https://github.com/apache/openjpa/commit/236f409a91ba4423f6ea27045009f29877469c9d","comments_url":"https://api.github.com/repos/apache/openjpa/commits/236f409a91ba4423f6ea27045009f29877469c9d/comments","author":null,"committer":null,"parents":[{"sha":"e65b2aa518ff38e57e047aaf75710df2357b47f0","url":"https://api.github.com/repos/apache/openjpa/commits/e65b2aa518ff38e57e047aaf75710df2357b47f0","html_url":"https://github.com/apache/openjpa/commit/e65b2aa518ff38e57e047aaf75710df2357b47f0"}],"stats":{"total":6,"additions":6,"deletions":0},"files":[{"sha":"1a80ef8a05a75c3986a695236dbee6349c1d08c3","filename":"openjpa-persistence/src/main/java/org/apache/openjpa/persistence/osgi/PersistenceActivator.java","status":"modified","additions":6,"deletions":0,"changes":6,"blob_url":"https://github.com/apache/openjpa/blob/236f409a91ba4423f6ea27045009f29877469c9d/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/osgi/PersistenceActivator.java","raw_url":"https://github.com/apache/openjpa/raw/236f409a91ba4423f6ea27045009f29877469c9d/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/osgi/PersistenceActivator.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/osgi/PersistenceActivator.java?ref=236f409a91ba4423f6ea27045009f29877469c9d","patch":"@@ -49,7 +49,13 @@ public void start(BundleContext ctx) throws Exception {\n         this.ctx = ctx;\n         PersistenceProvider provider = new PersistenceProviderImpl();\n         Hashtable<String, String> props = new Hashtable<String, String>();\n+        // Aries queries for service providers by property \"javax.persistence.provider\"\n         props.put(PERSISTENCE_PROVIDER_ARIES, OSGI_PERSISTENCE_PROVIDER);\n+        // The persistence service tracker in the geronimo spec api bundle examines\n+        // the property named \"javax.persistence.PersistenceProvider\" rather than\n+        // the the property provided for Aries.  In order to properly track the OpenJPA \n+        // provider, this property must be set upon service registration.\n+        props.put(PERSISTENCE_PROVIDER, OSGI_PERSISTENCE_PROVIDER);\n         svcReg = ctx.registerService(PERSISTENCE_PROVIDER, provider, props);\n         \n         OSGiManagedRuntime.registerServiceListener(ctx);"}]}

