{"sha":"28d495e14b0bf223709c6c999132237cbc6b3c05","node_id":"MDY6Q29tbWl0MjA2MzY0OjI4ZDQ5NWUxNGIwYmYyMjM3MDljNmM5OTkxMzIyMzdjYmM2YjNjMDU=","commit":{"author":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2010-03-22T16:26:51Z"},"committer":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2010-03-22T16:26:51Z"},"message":"OPENJPA-1097 Add some doc details on how the serialization of proxies works and new behavior of using DetachedStateField to ensure proxies are removed when it is set to transient or false.\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@926160 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"b86fec3d406f0f8d14638af7ffbcc3eb3d416313","url":"https://api.github.com/repos/apache/openjpa/git/trees/b86fec3d406f0f8d14638af7ffbcc3eb3d416313"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/28d495e14b0bf223709c6c999132237cbc6b3c05","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/28d495e14b0bf223709c6c999132237cbc6b3c05","html_url":"https://github.com/apache/openjpa/commit/28d495e14b0bf223709c6c999132237cbc6b3c05","comments_url":"https://api.github.com/repos/apache/openjpa/commits/28d495e14b0bf223709c6c999132237cbc6b3c05/comments","author":null,"committer":null,"parents":[{"sha":"7c613e69d1b26903589801c66be412014e740627","url":"https://api.github.com/repos/apache/openjpa/commits/7c613e69d1b26903589801c66be412014e740627","html_url":"https://github.com/apache/openjpa/commit/7c613e69d1b26903589801c66be412014e740627"}],"stats":{"total":68,"additions":65,"deletions":3},"files":[{"sha":"4095470095906cb95a67411001d79a5979052f32","filename":"openjpa-project/src/doc/manual/ref_guide_pc.xml","status":"modified","additions":55,"deletions":0,"changes":55,"blob_url":"https://github.com/apache/openjpa/blob/28d495e14b0bf223709c6c999132237cbc6b3c05/openjpa-project/src/doc/manual/ref_guide_pc.xml","raw_url":"https://github.com/apache/openjpa/raw/28d495e14b0bf223709c6c999132237cbc6b3c05/openjpa-project/src/doc/manual/ref_guide_pc.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-project/src/doc/manual/ref_guide_pc.xml?ref=28d495e14b0bf223709c6c999132237cbc6b3c05","patch":"@@ -1534,6 +1534,61 @@ You can plug your custom proxy manager into the OpenJPA runtime through the\n </programlisting>\n                 </example>\n             </section>\n+            <section id=\"ref_guide_pc_scos_proxy_serial\">\n+                <title>\n+                    Serialization\n+                </title>\n+                <indexterm zone=\"ref_guide_pc_scos_proxy_serial\">\n+                    <primary>\n+                        proxies\n+                    </primary>\n+                    <secondary>\n+                        serialization\n+                    </secondary>\n+                </indexterm>\n+                <indexterm zone=\"ref_guide_pc_scos_proxy_serial\">\n+                    <primary>\n+                        proxies\n+                    </primary>\n+                    <secondary>\n+                        DetachedStateField\n+                    </secondary>\n+                </indexterm>\n+                <para>\n+When objects are serialized, the <literal>DetachedStateField</literal> in\n+section <xref linkend=\"ref_guide_detach_state\"/> \n+will be used to help determine when build time proxies will be removed.  \n+If runtime created proxies are being used (proxies not supplied by OpenJPA)\n+or if an entity has already been detached, then any found proxies will be\n+removed during serialization.\n+                </para>\n+                <itemizedlist>\n+                    <listitem>\n+                        <para>\n+<literal>transient</literal>: Use a transient detached state field. This gives\n+the benefits of a detached state field to local objects that are never\n+serialized, but retains serialization compatibility for client tiers without\n+access to the enhanced versions of your classes or the OpenJPA runtime.\n+All proxies will be removed during serialization.  This is the default.\n+                        </para>\n+                    </listitem>\n+                    <listitem>\n+                        <para>\n+<literal>true</literal>: Use a non-transient detached state field so that\n+objects crossing serialization barriers can still be attached efficiently. This\n+requires, however, that your client tier have the enhanced versions of your\n+classes and the OpenJPA runtime.\n+No OpenJPA provided proxies will be removed during serialization.\n+                        </para>\n+                    </listitem>\n+                    <listitem>\n+                        <para>\n+<literal>false</literal>: Do not use a detached state field.\n+All proxies will be removed during serialization.\n+                        </para>\n+                    </listitem>\n+                </itemizedlist>\n+            </section>\n         </section>\n         <section id=\"ref_guide_pc_extern\">\n             <title>"},{"sha":"a8f4699f367829439b0854d643638303fae9ea27","filename":"openjpa-project/src/doc/manual/ref_guide_remote.xml","status":"modified","additions":10,"deletions":3,"changes":13,"blob_url":"https://github.com/apache/openjpa/blob/28d495e14b0bf223709c6c999132237cbc6b3c05/openjpa-project/src/doc/manual/ref_guide_remote.xml","raw_url":"https://github.com/apache/openjpa/raw/28d495e14b0bf223709c6c999132237cbc6b3c05/openjpa-project/src/doc/manual/ref_guide_remote.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-project/src/doc/manual/ref_guide_remote.xml?ref=28d495e14b0bf223709c6c999132237cbc6b3c05","patch":"@@ -290,24 +290,31 @@ to your application. Set this property to one of the following values:\n <literal>transient</literal>: Use a transient detached state field. This gives\n the benefits of a detached state field to local objects that are never\n serialized, but retains serialization compatibility for client tiers without\n-access to the enhanced versions of your classes. This is the default.\n+access to the enhanced versions of your classes or the OpenJPA runtime.\n+This is the default.\n                                 </para>\n                             </listitem>\n                             <listitem>\n                                 <para>\n <literal>true</literal>: Use a non-transient detached state field so that\n objects crossing serialization barriers can still be attached efficiently. This\n requires, however, that your client tier have the enhanced versions of your\n-classes and the OpenJPA libraries.\n+classes and the OpenJPA runtime.\n                                 </para>\n                             </listitem>\n                             <listitem>\n                                 <para>\n-<literal>false</literal>: Do not use a detached state field.\n+<literal>false</literal>: Do not use a detached state field.  No OpenJPA runtime\n+will be required for client tiers.\n                                 </para>\n                             </listitem>\n                         </itemizedlist>\n                         <para>\n+The detached state field is also used to determine when proxies should be\n+removed from entities during serialization.  See the \n+<xref linkend=\"ref_guide_pc_scos_proxy_serial\"/> section for more details.\n+                        </para>\n+                        <para>\n You can override the setting of this property or declare your own detached state\n field on individual classes using OpenJPA's metadata extensions. See\n <xref linkend=\"ref_guide_detach_field\"/> below."}]}

