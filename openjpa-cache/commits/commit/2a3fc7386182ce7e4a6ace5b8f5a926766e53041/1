{"sha":"2a3fc7386182ce7e4a6ace5b8f5a926766e53041","node_id":"MDY6Q29tbWl0MjA2MzY0OjJhM2ZjNzM4NjE4MmNlN2U0YTZhY2U1YjhmNWE5MjY3NjZlNTMwNDE=","commit":{"author":{"name":"Mark Struberg","email":"struberg@apache.org","date":"2021-04-01T19:19:59Z"},"committer":{"name":"Mark Struberg","email":"struberg@apache.org","date":"2021-04-01T19:19:59Z"},"message":"OPENJPA-2855 revert PK name handling\n\nSeems this got broken as side effect of dd9bce0cc909bd96d706a9438bdc2a58111c481f\nwhich was for OPENJPA-2816. We need to check HerdDB again","tree":{"sha":"7504adaa558c99caa0df51729727628c4261c7ca","url":"https://api.github.com/repos/apache/openjpa/git/trees/7504adaa558c99caa0df51729727628c4261c7ca"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/2a3fc7386182ce7e4a6ace5b8f5a926766e53041","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/2a3fc7386182ce7e4a6ace5b8f5a926766e53041","html_url":"https://github.com/apache/openjpa/commit/2a3fc7386182ce7e4a6ace5b8f5a926766e53041","comments_url":"https://api.github.com/repos/apache/openjpa/commits/2a3fc7386182ce7e4a6ace5b8f5a926766e53041/comments","author":{"login":"struberg","id":79310,"node_id":"MDQ6VXNlcjc5MzEw","avatar_url":"https://avatars.githubusercontent.com/u/79310?v=4","gravatar_id":"","url":"https://api.github.com/users/struberg","html_url":"https://github.com/struberg","followers_url":"https://api.github.com/users/struberg/followers","following_url":"https://api.github.com/users/struberg/following{/other_user}","gists_url":"https://api.github.com/users/struberg/gists{/gist_id}","starred_url":"https://api.github.com/users/struberg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/struberg/subscriptions","organizations_url":"https://api.github.com/users/struberg/orgs","repos_url":"https://api.github.com/users/struberg/repos","events_url":"https://api.github.com/users/struberg/events{/privacy}","received_events_url":"https://api.github.com/users/struberg/received_events","type":"User","site_admin":false},"committer":{"login":"struberg","id":79310,"node_id":"MDQ6VXNlcjc5MzEw","avatar_url":"https://avatars.githubusercontent.com/u/79310?v=4","gravatar_id":"","url":"https://api.github.com/users/struberg","html_url":"https://github.com/struberg","followers_url":"https://api.github.com/users/struberg/followers","following_url":"https://api.github.com/users/struberg/following{/other_user}","gists_url":"https://api.github.com/users/struberg/gists{/gist_id}","starred_url":"https://api.github.com/users/struberg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/struberg/subscriptions","organizations_url":"https://api.github.com/users/struberg/orgs","repos_url":"https://api.github.com/users/struberg/repos","events_url":"https://api.github.com/users/struberg/events{/privacy}","received_events_url":"https://api.github.com/users/struberg/received_events","type":"User","site_admin":false},"parents":[{"sha":"a3bf818402bd5fd5227919f23f24509a4e09f97f","url":"https://api.github.com/repos/apache/openjpa/commits/a3bf818402bd5fd5227919f23f24509a4e09f97f","html_url":"https://github.com/apache/openjpa/commit/a3bf818402bd5fd5227919f23f24509a4e09f97f"}],"stats":{"total":5,"additions":1,"deletions":4},"files":[{"sha":"e137a8bc858773eb92274c64e8a508be99baa0e5","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/ValueTableJDBCSeq.java","status":"modified","additions":1,"deletions":4,"changes":5,"blob_url":"https://github.com/apache/openjpa/blob/2a3fc7386182ce7e4a6ace5b8f5a926766e53041/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/ValueTableJDBCSeq.java","raw_url":"https://github.com/apache/openjpa/raw/2a3fc7386182ce7e4a6ace5b8f5a926766e53041/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/ValueTableJDBCSeq.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/ValueTableJDBCSeq.java?ref=2a3fc7386182ce7e4a6ace5b8f5a926766e53041","patch":"@@ -24,7 +24,6 @@\n \n import org.apache.openjpa.jdbc.conf.JDBCConfiguration;\n import org.apache.openjpa.jdbc.conf.JDBCConfigurationImpl;\n-import org.apache.openjpa.jdbc.identifier.DBIdentifier;\n import org.apache.openjpa.jdbc.meta.ClassMapping;\n import org.apache.openjpa.jdbc.meta.MappingRepository;\n import org.apache.openjpa.jdbc.schema.Column;\n@@ -79,9 +78,7 @@ public void setPrimaryKeyValue(String value) {\n     @Override\n     protected Column addPrimaryKeyColumn(Table table) {\n         DBDictionary dict = getConfiguration().getDBDictionaryInstance();\n-        DBIdentifier delimitedColumnName = dict.fromDBName(getPrimaryKeyColumn(), DBIdentifier.DBIdentifierType.COLUMN);\n-        Column pkColumn = table.addColumn(dict.getValidColumnName\n-            (delimitedColumnName, table));\n+        Column pkColumn = table.addColumn(dict.getValidColumnName(getPrimaryKeyColumnIdentifier(), table));\n         pkColumn.setType(dict.getPreferredType(Types.VARCHAR));\n         pkColumn.setJavaType(JavaTypes.STRING);\n         pkColumn.setSize(dict.characterColumnSize);"}]}

