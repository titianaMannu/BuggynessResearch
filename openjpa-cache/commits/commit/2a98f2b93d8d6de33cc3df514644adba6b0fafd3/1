{"sha":"2a98f2b93d8d6de33cc3df514644adba6b0fafd3","node_id":"MDY6Q29tbWl0MjA2MzY0OjJhOThmMmI5M2Q4ZDZkZTMzY2MzZGY1MTQ2NDRhZGJhNmIwZmFmZDM=","commit":{"author":{"name":"Jeremy Bauer","email":"jrbauer@apache.org","date":"2009-09-24T02:32:38Z"},"committer":{"name":"Jeremy Bauer","email":"jrbauer@apache.org","date":"2009-09-24T02:32:38Z"},"message":"Fix SQL comparison failures in bidi eager tests on Oracle by using standard sql92 join syntax.\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@818349 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"4e39e71686df4072e1ff2c10ba6a48a678ce17da","url":"https://api.github.com/repos/apache/openjpa/git/trees/4e39e71686df4072e1ff2c10ba6a48a678ce17da"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/2a98f2b93d8d6de33cc3df514644adba6b0fafd3","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/2a98f2b93d8d6de33cc3df514644adba6b0fafd3","html_url":"https://github.com/apache/openjpa/commit/2a98f2b93d8d6de33cc3df514644adba6b0fafd3","comments_url":"https://api.github.com/repos/apache/openjpa/commits/2a98f2b93d8d6de33cc3df514644adba6b0fafd3/comments","author":null,"committer":null,"parents":[{"sha":"5d3fd3a726aa8f8fb32998c83ed649da068d4ed3","url":"https://api.github.com/repos/apache/openjpa/commits/5d3fd3a726aa8f8fb32998c83ed649da068d4ed3","html_url":"https://github.com/apache/openjpa/commit/5d3fd3a726aa8f8fb32998c83ed649da068d4ed3"}],"stats":{"total":13,"additions":13,"deletions":0},"files":[{"sha":"0346aabe5980dcd708ad94a095eadd293636aab4","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/relations/TestEagerBidiSQL.java","status":"modified","additions":13,"deletions":0,"changes":13,"blob_url":"https://github.com/apache/openjpa/blob/2a98f2b93d8d6de33cc3df514644adba6b0fafd3/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/relations/TestEagerBidiSQL.java","raw_url":"https://github.com/apache/openjpa/raw/2a98f2b93d8d6de33cc3df514644adba6b0fafd3/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/relations/TestEagerBidiSQL.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/relations/TestEagerBidiSQL.java?ref=2a98f2b93d8d6de33cc3df514644adba6b0fafd3","patch":"@@ -22,6 +22,10 @@\n import javax.persistence.EntityManager;\n \n import junit.textui.TestRunner;\n+\n+import org.apache.openjpa.jdbc.conf.JDBCConfiguration;\n+import org.apache.openjpa.jdbc.sql.DBDictionary;\n+import org.apache.openjpa.jdbc.sql.OracleDictionary;\n import org.apache.openjpa.persistence.OpenJPAEntityManager;\n import org.apache.openjpa.persistence.OpenJPAQuery;\n import org.apache.openjpa.persistence.test.SQLListenerTestCase;\n@@ -43,6 +47,15 @@\n     public void setUp() {\n         setUp(BidiParent.class, BidiChild.class);\n         \n+        \n+        // If using an Oracle DB, use sql92 syntax in order to get a correct\n+        // comparison of SQL.  This may not work on Oracle JDBC drivers\n+        // prior to 10.x\n+        DBDictionary dict = ((JDBCConfiguration) emf.getConfiguration())\n+            .getDBDictionaryInstance();\n+        if (dict instanceof OracleDictionary) {\n+            dict.setJoinSyntax(\"sql92\");\n+        }\n         EntityManager em = emf.createEntityManager();\n         em.getTransaction().begin();\n "}]}

