{"sha":"2c63edf463772b95c6103c7c977e44ca847bc81d","node_id":"MDY6Q29tbWl0MjA2MzY0OjJjNjNlZGY0NjM3NzJiOTVjNjEwM2M3Yzk3N2U0NGNhODQ3YmM4MWQ=","commit":{"author":{"name":"Catalina Wei","email":"fancy@apache.org","date":"2008-08-08T06:46:19Z"},"committer":{"name":"Catalina Wei","email":"fancy@apache.org","date":"2008-08-08T06:46:19Z"},"message":"OPENJPA-681 Subquery generates SQL with syntax error\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/branches/1.0.x@683875 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"ac45158614d6c195c75d94e4aca1ce9e9deab43c","url":"https://api.github.com/repos/apache/openjpa/git/trees/ac45158614d6c195c75d94e4aca1ce9e9deab43c"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/2c63edf463772b95c6103c7c977e44ca847bc81d","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/2c63edf463772b95c6103c7c977e44ca847bc81d","html_url":"https://github.com/apache/openjpa/commit/2c63edf463772b95c6103c7c977e44ca847bc81d","comments_url":"https://api.github.com/repos/apache/openjpa/commits/2c63edf463772b95c6103c7c977e44ca847bc81d/comments","author":null,"committer":null,"parents":[{"sha":"3ceab39f2e506345b1ab4292d493c798d24900cd","url":"https://api.github.com/repos/apache/openjpa/commits/3ceab39f2e506345b1ab4292d493c798d24900cd","html_url":"https://github.com/apache/openjpa/commit/3ceab39f2e506345b1ab4292d493c798d24900cd"}],"stats":{"total":8,"additions":6,"deletions":2},"files":[{"sha":"c7d4021dfa83552e828b0c8ea0b0b03f92af854f","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SelectImpl.java","status":"modified","additions":4,"deletions":2,"changes":6,"blob_url":"https://github.com/apache/openjpa/blob/2c63edf463772b95c6103c7c977e44ca847bc81d/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SelectImpl.java","raw_url":"https://github.com/apache/openjpa/raw/2c63edf463772b95c6103c7c977e44ca847bc81d/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SelectImpl.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SelectImpl.java?ref=2c63edf463772b95c6103c7c977e44ca847bc81d","patch":"@@ -522,8 +522,10 @@ private boolean findTableAlias(Integer alias) {\n         // if alias is defined and referenced, return true.\n         String value = \"t\" + alias.toString() + \".\";\n         if (_tableAliases != null)\n-            return _tableAliases.containsValue(value) &&\n-               _tables.containsKey(alias);\n+            if (_tableAliases.containsValue(value))\n+               return _tables.containsKey(alias);\n+           else\n+               return _joins != null;\n         else\n             return true;\n     }"},{"sha":"33f4b6d4666cdbedb108522238c0934803ba2aaa","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/query/TestSubquery.java","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/apache/openjpa/blob/2c63edf463772b95c6103c7c977e44ca847bc81d/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/query/TestSubquery.java","raw_url":"https://github.com/apache/openjpa/raw/2c63edf463772b95c6103c7c977e44ca847bc81d/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/query/TestSubquery.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/query/TestSubquery.java?ref=2c63edf463772b95c6103c7c977e44ca847bc81d","patch":"@@ -66,6 +66,8 @@ public void setUp() {\n             \" and (select min(o2.amount) from Customer c, in(c.orders) o2)\",\n         \"select o.oid from Customer c, in(c.orders)o where o.amount >\" +\n             \" (select sum(o2.amount) from c.orders o2)\",\n+        \"select o1.oid, c.name from Order o1, Customer c where o1.amount = \" +\n+            \" any(select o2.amount from in(c.orders) o2)\",\n     // outstanding problem subqueries:\n     //\"select o from Order o where o.amount > (select count(o) from Order o)\",\n     //\"select o from Order o where o.amount > (select count(o2) from Order o2)\","}]}

