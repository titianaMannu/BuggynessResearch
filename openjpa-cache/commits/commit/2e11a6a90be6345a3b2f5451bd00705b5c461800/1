{"sha":"2e11a6a90be6345a3b2f5451bd00705b5c461800","node_id":"MDY6Q29tbWl0MjA2MzY0OjJlMTFhNmE5MGJlNjM0NWEzYjJmNTQ1MWJkMDA3MDViNWM0NjE4MDA=","commit":{"author":{"name":"Michael Dick","email":"mikedd@apache.org","date":"2010-10-15T15:00:30Z"},"committer":{"name":"Michael Dick","email":"mikedd@apache.org","date":"2010-10-15T15:00:30Z"},"message":"OPENJPA-1835: add dummy as an invalid column name for Sybase and update testcase to use DBIdentifier to get column name. \n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@1022960 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"422a8f6bbca5b579f7cb109017cab96fc17036bc","url":"https://api.github.com/repos/apache/openjpa/git/trees/422a8f6bbca5b579f7cb109017cab96fc17036bc"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/2e11a6a90be6345a3b2f5451bd00705b5c461800","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/2e11a6a90be6345a3b2f5451bd00705b5c461800","html_url":"https://github.com/apache/openjpa/commit/2e11a6a90be6345a3b2f5451bd00705b5c461800","comments_url":"https://api.github.com/repos/apache/openjpa/commits/2e11a6a90be6345a3b2f5451bd00705b5c461800/comments","author":{"login":"mikedd","id":669432,"node_id":"MDQ6VXNlcjY2OTQzMg==","avatar_url":"https://avatars.githubusercontent.com/u/669432?v=4","gravatar_id":"","url":"https://api.github.com/users/mikedd","html_url":"https://github.com/mikedd","followers_url":"https://api.github.com/users/mikedd/followers","following_url":"https://api.github.com/users/mikedd/following{/other_user}","gists_url":"https://api.github.com/users/mikedd/gists{/gist_id}","starred_url":"https://api.github.com/users/mikedd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikedd/subscriptions","organizations_url":"https://api.github.com/users/mikedd/orgs","repos_url":"https://api.github.com/users/mikedd/repos","events_url":"https://api.github.com/users/mikedd/events{/privacy}","received_events_url":"https://api.github.com/users/mikedd/received_events","type":"User","site_admin":false},"committer":{"login":"mikedd","id":669432,"node_id":"MDQ6VXNlcjY2OTQzMg==","avatar_url":"https://avatars.githubusercontent.com/u/669432?v=4","gravatar_id":"","url":"https://api.github.com/users/mikedd","html_url":"https://github.com/mikedd","followers_url":"https://api.github.com/users/mikedd/followers","following_url":"https://api.github.com/users/mikedd/following{/other_user}","gists_url":"https://api.github.com/users/mikedd/gists{/gist_id}","starred_url":"https://api.github.com/users/mikedd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikedd/subscriptions","organizations_url":"https://api.github.com/users/mikedd/orgs","repos_url":"https://api.github.com/users/mikedd/repos","events_url":"https://api.github.com/users/mikedd/events{/privacy}","received_events_url":"https://api.github.com/users/mikedd/received_events","type":"User","site_admin":false},"parents":[{"sha":"0e9c5e52dd51d547c7f76308c9e0bd9cacae07b1","url":"https://api.github.com/repos/apache/openjpa/commits/0e9c5e52dd51d547c7f76308c9e0bd9cacae07b1","html_url":"https://github.com/apache/openjpa/commit/0e9c5e52dd51d547c7f76308c9e0bd9cacae07b1"}],"stats":{"total":11,"additions":7,"deletions":4},"files":[{"sha":"0b2a82080a64eccb52dcb0416ae427e10d698d33","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SybaseDictionary.java","status":"modified","additions":3,"deletions":1,"changes":4,"blob_url":"https://github.com/apache/openjpa/blob/2e11a6a90be6345a3b2f5451bd00705b5c461800/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SybaseDictionary.java","raw_url":"https://github.com/apache/openjpa/raw/2e11a6a90be6345a3b2f5451bd00705b5c461800/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SybaseDictionary.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SybaseDictionary.java?ref=2e11a6a90be6345a3b2f5451bd00705b5c461800","patch":"@@ -139,7 +139,7 @@ public SybaseDictionary() {\n         reservedWordSet.addAll(Arrays.asList(new String[]{\n             \"ARITH_OVERFLOW\", \"BREAK\", \"BROWSE\", \"BULK\", \"CHAR_CONVERT\",\n             \"CHECKPOINT\", \"CLUSTERED\", \"COMPUTE\", \"CONFIRM\", \"CONTROLROW\",\n-            \"DATABASE\", \"DBCC\", \"DETERMINISTIC\", \"DISK DISTINCT\", \"DUMMY\",\n+            \"DATABASE\", \"DBCC\", \"DETERMINISTIC\", \"DISK DISTINCT\", \"DUMMY\", \n             \"DUMP\", \"ENDTRAN\", \"ERRLVL\", \"ERRORDATA\", \"ERROREXIT\", \"EXCLUSIVE\",\n             \"EXIT\", \"EXP_ROW_SIZE\", \"FILLFACTOR\", \"FUNC\", \"FUNCTION\",\n             \"HOLDLOCK\", \"IDENTITY_GAP\", \"IDENTITY_INSERT\", \"IDENTITY_START\",\n@@ -157,6 +157,8 @@ public SybaseDictionary() {\n             \"TRAN\", \"TRIGGER\", \"TRUNCATE\", \"TSEQUAL\", \"UNPARTITION\", \"USE\",\n             \"USER_OPTION\", \"WAITFOR\", \"WHILE\", \"WRITETEXT\",\n         }));\n+        \n+        invalidColumnWordSet.addAll(Arrays.asList(new String [] { \"DUMMY\" } ));\n \n         // Sybase does not support foreign key delete/update action NULL,\n         // DEFAULT, CASCADE"},{"sha":"6f0250f71dd737f4165564fccf78cf997e44cfdc","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/jdbc/meta/TestBooleanValue.java","status":"modified","additions":4,"deletions":3,"changes":7,"blob_url":"https://github.com/apache/openjpa/blob/2e11a6a90be6345a3b2f5451bd00705b5c461800/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/jdbc/meta/TestBooleanValue.java","raw_url":"https://github.com/apache/openjpa/raw/2e11a6a90be6345a3b2f5451bd00705b5c461800/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/jdbc/meta/TestBooleanValue.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/jdbc/meta/TestBooleanValue.java?ref=2e11a6a90be6345a3b2f5451bd00705b5c461800","patch":"@@ -20,6 +20,7 @@\n \n import javax.persistence.*;\n import org.apache.openjpa.jdbc.conf.JDBCConfiguration;\n+import org.apache.openjpa.jdbc.identifier.DBIdentifier;\n import org.apache.openjpa.persistence.test.SingleEMFTestCase;\n import org.apache.openjpa.jdbc.schema.Column;\n \n@@ -36,14 +37,14 @@ public void testBooleanValue() {\n         em.getTransaction().begin();\n         em.persist(t0);\n         em.getTransaction().commit();\n-        Column boolCol =\n-            getMapping(EntityBool.class).getTable().getColumn(\"dummy\");\n+        Column boolCol = getMapping(EntityBool.class).getTable().getColumn(\"dummy\");\n+        DBIdentifier boolColId = boolCol.getIdentifier();\n         Query q =\n             em.createNativeQuery(\"Select \"\n                     + ((JDBCConfiguration) emf.getConfiguration())\n                         .getDBDictionaryInstance().getPlaceholderValueString(\n                             boolCol)\n-                    + \" FROM EntityBool a UNION ALL Select a.dummy \" +\n+                    + \" FROM EntityBool a UNION ALL Select a.\" + boolColId.getName()  + \" \" +\n                     \t\t\"FROM EntityBool a\");\n         q.getResultList();\n         em.close();"}]}

