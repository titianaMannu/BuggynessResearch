{"sha":"2eeca2a8ac545585a51404c94e59c63559395f05","node_id":"MDY6Q29tbWl0MjA2MzY0OjJlZWNhMmE4YWM1NDU1ODVhNTE0MDRjOTRlNTljNjM1NTkzOTVmMDU=","commit":{"author":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2009-09-23T18:44:44Z"},"committer":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2009-09-23T18:44:44Z"},"message":"OPENJPA-1315 Incorrect hashcode()/equals() implementations in QueryImpl causes NPE in Eclipse debugger.  Patch contributed by Tim McConnell.\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@818195 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"9ab65bf23f3bfc86e34c1077333b70f28c653a63","url":"https://api.github.com/repos/apache/openjpa/git/trees/9ab65bf23f3bfc86e34c1077333b70f28c653a63"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/2eeca2a8ac545585a51404c94e59c63559395f05","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/2eeca2a8ac545585a51404c94e59c63559395f05","html_url":"https://github.com/apache/openjpa/commit/2eeca2a8ac545585a51404c94e59c63559395f05","comments_url":"https://api.github.com/repos/apache/openjpa/commits/2eeca2a8ac545585a51404c94e59c63559395f05/comments","author":null,"committer":null,"parents":[{"sha":"6485137930cbfa27de554d5a1e6d75c8eff5529e","url":"https://api.github.com/repos/apache/openjpa/commits/6485137930cbfa27de554d5a1e6d75c8eff5529e","html_url":"https://github.com/apache/openjpa/commit/6485137930cbfa27de554d5a1e6d75c8eff5529e"}],"stats":{"total":8,"additions":5,"deletions":3},"files":[{"sha":"1b0728ebf4c0b248a629491add635383010e31fc","filename":"openjpa-persistence/src/main/java/org/apache/openjpa/persistence/QueryImpl.java","status":"modified","additions":5,"deletions":3,"changes":8,"blob_url":"https://github.com/apache/openjpa/blob/2eeca2a8ac545585a51404c94e59c63559395f05/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/QueryImpl.java","raw_url":"https://github.com/apache/openjpa/raw/2eeca2a8ac545585a51404c94e59c63559395f05/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/QueryImpl.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/QueryImpl.java?ref=2eeca2a8ac545585a51404c94e59c63559395f05","patch":"@@ -392,14 +392,16 @@ public LockModeType getLockMode() {\n     }\n \n \tpublic int hashCode() {\n-\t\treturn _query.hashCode();\n+        return (_query == null) ? 0 : _query.hashCode();\n \t}\n \n \tpublic boolean equals(Object other) {\n \t\tif (other == this)\n \t\t\treturn true;\n-\t\tif (!(other instanceof QueryImpl))\n-\t\t\treturn false;\n+        if ((other == null) || (other.getClass() != this.getClass()))\n+            return false;\n+        if (_query == null)\n+            return false;\n \t\treturn _query.equals(((QueryImpl) other)._query);\n \t}\n "}]}

