{"sha":"30024007cda04b1c6625f22fe4f49a64078047c4","node_id":"MDY6Q29tbWl0MjA2MzY0OjMwMDI0MDA3Y2RhMDRiMWM2NjI1ZjIyZmU0ZjQ5YTY0MDc4MDQ3YzQ=","commit":{"author":{"name":"Marc Prud'hommeaux","email":"mprudhom@apache.org","date":"2007-11-28T00:25:53Z"},"committer":{"name":"Marc Prud'hommeaux","email":"mprudhom@apache.org","date":"2007-11-28T00:25:53Z"},"message":"OPENJPA-223 Handle Indexes with multiple columns, which is a step towards a fix for OPENJPA-223\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@598829 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"84c68d4c775cf27fd3b330a8f3ec95d82f63b4b5","url":"https://api.github.com/repos/apache/openjpa/git/trees/84c68d4c775cf27fd3b330a8f3ec95d82f63b4b5"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/30024007cda04b1c6625f22fe4f49a64078047c4","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/30024007cda04b1c6625f22fe4f49a64078047c4","html_url":"https://github.com/apache/openjpa/commit/30024007cda04b1c6625f22fe4f49a64078047c4","comments_url":"https://api.github.com/repos/apache/openjpa/commits/30024007cda04b1c6625f22fe4f49a64078047c4/comments","author":null,"committer":null,"parents":[{"sha":"1946a9b0364cfffd39b4ca625dbdebcd8042b375","url":"https://api.github.com/repos/apache/openjpa/commits/1946a9b0364cfffd39b4ca625dbdebcd8042b375","html_url":"https://github.com/apache/openjpa/commit/1946a9b0364cfffd39b4ca625dbdebcd8042b375"}],"stats":{"total":5,"additions":5,"deletions":0},"files":[{"sha":"ab78b89f1662accae11ccc4170abe428e059bed5","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/meta/MappingInfo.java","status":"modified","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/apache/openjpa/blob/30024007cda04b1c6625f22fe4f49a64078047c4/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/meta/MappingInfo.java","raw_url":"https://github.com/apache/openjpa/raw/30024007cda04b1c6625f22fe4f49a64078047c4/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/meta/MappingInfo.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/meta/MappingInfo.java?ref=30024007cda04b1c6625f22fe4f49a64078047c4","patch":"@@ -813,6 +813,9 @@ protected Index createIndex(MetaDataContext context, String prefix,\n         if (_idx != null) {\n             name = _idx.getName();\n             unq = _idx.isUnique();\n+            // preserve multiple columns if they are specified in the index\n+            if (_idx.getColumns() != null && _idx.getColumns().length > 1)\n+                cols = _idx.getColumns();\n         } else\n             unq = tmplate.isUnique();\n \n@@ -1510,6 +1513,8 @@ protected void syncIndex(MetaDataContext context, Index idx) {\n         _idx = new Index();\n         _idx.setName(idx.getName());\n         _idx.setUnique(idx.isUnique());\n+        if (idx.getColumns() != null && idx.getColumns().length > 1)\n+            _idx.setColumns(idx.getColumns());\n     }\n \n     /**"}]}

