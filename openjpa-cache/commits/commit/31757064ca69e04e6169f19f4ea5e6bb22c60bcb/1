{"sha":"31757064ca69e04e6169f19f4ea5e6bb22c60bcb","node_id":"MDY6Q29tbWl0MjA2MzY0OjMxNzU3MDY0Y2E2OWUwNGU2MTY5ZjE5ZjRlYTVlNmJiMjJjNjBiY2I=","commit":{"author":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2010-01-22T16:49:12Z"},"committer":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2010-01-22T16:49:12Z"},"message":"OPENJPA-1478 add OSGi metadata back into openjpa.jar artifact for Apache Aries team.  Also updated to latest maven-bundle-plugin version.\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@902169 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"2fa2f11daa31d239ac9b862d096df2a8e8be44e0","url":"https://api.github.com/repos/apache/openjpa/git/trees/2fa2f11daa31d239ac9b862d096df2a8e8be44e0"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/31757064ca69e04e6169f19f4ea5e6bb22c60bcb","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/31757064ca69e04e6169f19f4ea5e6bb22c60bcb","html_url":"https://github.com/apache/openjpa/commit/31757064ca69e04e6169f19f4ea5e6bb22c60bcb","comments_url":"https://api.github.com/repos/apache/openjpa/commits/31757064ca69e04e6169f19f4ea5e6bb22c60bcb/comments","author":null,"committer":null,"parents":[{"sha":"79b14dd05fadfe9d07c02e4cf9ae5fbb4ce816ee","url":"https://api.github.com/repos/apache/openjpa/commits/79b14dd05fadfe9d07c02e4cf9ae5fbb4ce816ee","html_url":"https://github.com/apache/openjpa/commit/79b14dd05fadfe9d07c02e4cf9ae5fbb4ce816ee"}],"stats":{"total":47,"additions":45,"deletions":2},"files":[{"sha":"1948e62cc59b842da79d3ba08c192d407d1a84cc","filename":"openjpa/pom.xml","status":"modified","additions":44,"deletions":1,"changes":45,"blob_url":"https://github.com/apache/openjpa/blob/31757064ca69e04e6169f19f4ea5e6bb22c60bcb/openjpa/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/31757064ca69e04e6169f19f4ea5e6bb22c60bcb/openjpa/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa/pom.xml?ref=31757064ca69e04e6169f19f4ea5e6bb22c60bcb","patch":"@@ -24,7 +24,7 @@\n <project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\">\n     <modelVersion>4.0.0</modelVersion>\n     <artifactId>openjpa</artifactId>\n-    <packaging>jar</packaging>\n+    <packaging>bundle</packaging>\n     <name>OpenJPA Aggregate Jar</name>\n     <parent>\n         <groupId>org.apache.openjpa</groupId>\n@@ -105,6 +105,49 @@\n                     </execution>\n                 </executions>\n             </plugin>\n+\n+            <!-- extract the shaded jar so a bundle can be created -->\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-antrun-plugin</artifactId>\n+                <executions>\n+                    <execution>\n+                        <phase>package</phase>\n+                        <goals>\n+                            <goal>run</goal>\n+                        </goals>\n+                        <configuration>\n+                            <tasks>\n+                                <unzip src=\"${project.build.directory}/${pom.artifactId}-${pom.version}.jar\" dest=\"${project.build.directory}/classes\"/>\n+                            </tasks>\n+                        </configuration>\n+                    </execution>\n+                </executions>\n+            </plugin>\n+\n+            <!-- create an OSGi bundle -->\n+            <plugin>\n+                <groupId>org.apache.felix</groupId>\n+                <artifactId>maven-bundle-plugin</artifactId>\n+                <extensions>true</extensions>\n+                <configuration>\n+                    <instructions>\n+                        <!-- OSGi Bundle Metadata -->\n+                        <Bundle-DocURL>${project.url}</Bundle-DocURL>\n+                        <Private-Package />\n+                        <Export-Package>org.apache.openjpa.*;version=${pom.version}</Export-Package>\n+                        <Import-Package>com.ibm.*;resolution:=optional,org.postg\n+resql.*;resolution:=optional,org.apache.tools.ant.*;resolution:=optional,org.apa\n+che.log4j.*;resolution:=optional,javax.activation.xa*;resolution:=optional,javax\n+.jms.*;resolution:=optional,javax.transaction.*;resolution:=optional,javax.valid\n+ation.*;resolution:=optional,javax.xml.bind.*;resolution:=optional,serp.*;resolu\n+tion:=optional,*</Import-Package>\n+                        <!-- Eclipse metadata -->\n+                        <Eclipse-Autostart>false</Eclipse-Autostart>\n+                        <Bundle-ClassPath>.</Bundle-ClassPath>\n+                    </instructions>\n+                </configuration>\n+            </plugin>\n         </plugins>\n     </build>\n "},{"sha":"9ba742ef573b6aa461b20d8e5e7866a9a8b08b99","filename":"pom.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/apache/openjpa/blob/31757064ca69e04e6169f19f4ea5e6bb22c60bcb/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/31757064ca69e04e6169f19f4ea5e6bb22c60bcb/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/pom.xml?ref=31757064ca69e04e6169f19f4ea5e6bb22c60bcb","patch":"@@ -861,7 +861,7 @@\n                 <plugin>\n                     <groupId>org.apache.felix</groupId>\n                     <artifactId>maven-bundle-plugin</artifactId>\n-                    <version>1.4.3</version>\n+                    <version>2.0.0</version>\n                 </plugin>\n                 <plugin>\n                     <groupId>org.apache.maven.plugins</groupId>"}]}

