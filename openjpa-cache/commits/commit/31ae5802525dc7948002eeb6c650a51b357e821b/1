{"sha":"31ae5802525dc7948002eeb6c650a51b357e821b","node_id":"MDY6Q29tbWl0MjA2MzY0OjMxYWU1ODAyNTI1ZGM3OTQ4MDAyZWViNmM2NTBhNTFiMzU3ZTgyMWI=","commit":{"author":{"name":"Fay Wang","email":"faywang@apache.org","date":"2009-03-23T19:19:24Z"},"committer":{"name":"Fay Wang","email":"faywang@apache.org","date":"2009-03-23T19:19:24Z"},"message":"OPENJPA-973: allow DB2 jcc driver to access Informix\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@757512 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"ffb58c10b5c8376844f6469ca8b6d28d4cb118b1","url":"https://api.github.com/repos/apache/openjpa/git/trees/ffb58c10b5c8376844f6469ca8b6d28d4cb118b1"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/31ae5802525dc7948002eeb6c650a51b357e821b","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/31ae5802525dc7948002eeb6c650a51b357e821b","html_url":"https://github.com/apache/openjpa/commit/31ae5802525dc7948002eeb6c650a51b357e821b","comments_url":"https://api.github.com/repos/apache/openjpa/commits/31ae5802525dc7948002eeb6c650a51b357e821b/comments","author":null,"committer":null,"parents":[{"sha":"b546423063fe7c1889f7764393102f423a699483","url":"https://api.github.com/repos/apache/openjpa/commits/b546423063fe7c1889f7764393102f423a699483","html_url":"https://github.com/apache/openjpa/commit/b546423063fe7c1889f7764393102f423a699483"}],"stats":{"total":25,"additions":24,"deletions":1},"files":[{"sha":"272bb4fcb0e7948a1ee1ac3ad2c04a8e3bf3b79e","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/InformixDictionary.java","status":"modified","additions":24,"deletions":1,"changes":25,"blob_url":"https://github.com/apache/openjpa/blob/31ae5802525dc7948002eeb6c650a51b357e821b/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/InformixDictionary.java","raw_url":"https://github.com/apache/openjpa/raw/31ae5802525dc7948002eeb6c650a51b357e821b/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/InformixDictionary.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/InformixDictionary.java?ref=31ae5802525dc7948002eeb6c650a51b357e821b","patch":"@@ -73,6 +73,7 @@\n      */\n     public boolean swapSchemaAndCatalog = true;\n \n+    protected boolean useJCC = false;\n     // weak set of connections we've already executed lock mode sql on\n     private final Collection _seenConnections = new ReferenceHashSet\n         (ReferenceHashSet.WEAK);\n@@ -155,10 +156,19 @@ public void connectedConfiguration(Connection conn)\n         super.connectedConfiguration(conn);\n         if (driverVendor == null) {\n             DatabaseMetaData meta = conn.getMetaData();\n-            if (\"Informix\".equalsIgnoreCase(meta.getDriverName()))\n+            String driverName = meta.getDriverName();\n+            if (\"Informix\".equalsIgnoreCase(driverName))\n                 driverVendor = VENDOR_DATADIRECT;\n             else\n                 driverVendor = VENDOR_OTHER;\n+            \n+            if (driverName.equals(\"IBM DB2 JDBC Universal Driver Architecture\")) { \n+                useJCC = true;\n+                try {\n+                    if (meta.storesLowerCaseIdentifiers()) \n+                        schemaCase = SCHEMA_CASE_LOWER;\n+                } catch (SQLException e) {}\n+            }\n         }\n         if (isJDBC3) {\n             conn.setHoldability(ResultSet.HOLD_CURSORS_OVER_COMMIT);\n@@ -301,4 +311,17 @@ public boolean needsToCreateIndex(Index idx, Table table) {\n            return false;\n        return true;\n     }\n+    \n+    public boolean useJCC() {\n+        return useJCC;\n+    }\n+    \n+    /**\n+     * Return DB specific schemaCase \n+     */\n+    public String getSchemaCase(){\n+        return schemaCase;\n+    }\n+        \n+    \n }\n\\ No newline at end of file"}]}

