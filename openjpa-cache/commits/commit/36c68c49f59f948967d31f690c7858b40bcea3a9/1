{"sha":"36c68c49f59f948967d31f690c7858b40bcea3a9","node_id":"MDY6Q29tbWl0MjA2MzY0OjM2YzY4YzQ5ZjU5Zjk0ODk2N2QzMWY2OTBjNzg1OGI0MGJjZWEzYTk=","commit":{"author":{"name":"Catalina Wei","email":"fancy@apache.org","date":"2008-04-03T05:52:38Z"},"committer":{"name":"Catalina Wei","email":"fancy@apache.org","date":"2008-04-03T05:52:38Z"},"message":"OPENJPA-555 MappingTool got NullPointerException in DB2Dictionary.isDB2ZOSV8xOrLater() \n\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@644177 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"20c55b171aaa4f39f797f0d78b1b6060d9dbc6e9","url":"https://api.github.com/repos/apache/openjpa/git/trees/20c55b171aaa4f39f797f0d78b1b6060d9dbc6e9"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/36c68c49f59f948967d31f690c7858b40bcea3a9","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/36c68c49f59f948967d31f690c7858b40bcea3a9","html_url":"https://github.com/apache/openjpa/commit/36c68c49f59f948967d31f690c7858b40bcea3a9","comments_url":"https://api.github.com/repos/apache/openjpa/commits/36c68c49f59f948967d31f690c7858b40bcea3a9/comments","author":null,"committer":null,"parents":[{"sha":"ee8155bb60ddfdc94e94b8973455c599072a6c27","url":"https://api.github.com/repos/apache/openjpa/commits/ee8155bb60ddfdc94e94b8973455c599072a6c27","html_url":"https://github.com/apache/openjpa/commit/ee8155bb60ddfdc94e94b8973455c599072a6c27"}],"stats":{"total":19,"additions":12,"deletions":7},"files":[{"sha":"8dea6ced5bc6d8bb26e66902e421bb384af8766d","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DB2Dictionary.java","status":"modified","additions":12,"deletions":7,"changes":19,"blob_url":"https://github.com/apache/openjpa/blob/36c68c49f59f948967d31f690c7858b40bcea3a9/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DB2Dictionary.java","raw_url":"https://github.com/apache/openjpa/raw/36c68c49f59f948967d31f690c7858b40bcea3a9/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DB2Dictionary.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DB2Dictionary.java?ref=36c68c49f59f948967d31f690c7858b40bcea3a9","patch":"@@ -390,7 +390,8 @@ protected String getForUpdateClause(JDBCFetchConfiguration fetch,\n \r\n     public boolean isDB2UDBV82OrLater() {\r\n         boolean match = false;\r\n-        if ((databaseProductVersion.indexOf(\"SQL\") != -1\r\n+        if (databaseProductName != null &&\r\n+            (databaseProductVersion.indexOf(\"SQL\") != -1\r\n             || databaseProductName.indexOf(\"DB2/\") != -1)\r\n             && ((maj == 8 && min >= 2) || (maj >= 9)))\r\n             match = true;\r\n@@ -399,7 +400,8 @@ public boolean isDB2UDBV82OrLater() {\n \r\n     public boolean isDB2ZOSV8xOrLater() {\r\n        boolean match = false;\r\n-       if ((databaseProductVersion.indexOf(\"DSN\") != -1\r\n+       if (databaseProductName != null &&\r\n+           (databaseProductVersion.indexOf(\"DSN\") != -1\r\n            || databaseProductName.indexOf(\"DB2/\") == -1)\r\n            && maj >= 8)\r\n            match = true;\r\n@@ -408,25 +410,28 @@ public boolean isDB2ZOSV8xOrLater() {\n \r\n     public boolean isDB2ISeriesV5R3OrEarlier() {\r\n        boolean match = false;\r\n-       if (databaseProductName.indexOf(\"AS\") != -1\r\n+       if (databaseProductName != null &&\r\n+           databaseProductName.indexOf(\"AS\") != -1\r\n            && ((maj == 5 && min <=3) || maj < 5))\r\n            match = true;\r\n        return match;\r\n     }\r\n \r\n     public boolean isDB2ISeriesV5R4OrLater() {\r\n        boolean match = false;\r\n-       if (databaseProductName.indexOf(\"AS\") != -1\r\n+       if (databaseProductName != null &&\r\n+           databaseProductName.indexOf(\"AS\") != -1\r\n            && (maj >=6 || (maj == 5 && min >=4)))\r\n            match = true;\r\n       return match;\r\n     }\r\n \r\n     public boolean isDB2UDBV81OrEarlier() {\r\n         boolean match = false;\r\n-        if ((databaseProductVersion.indexOf(\"SQL\") != -1 \r\n-           || databaseProductName.indexOf(\"DB2/\") != -1) &&\r\n-           ((maj == 8 && min <= 1) || maj < 8))\r\n+        if (databaseProductName != null &&\r\n+            (databaseProductVersion.indexOf(\"SQL\") != -1 \r\n+            || databaseProductName.indexOf(\"DB2/\") != -1) &&\r\n+            ((maj == 8 && min <= 1) || maj < 8))\r\n             match = true;\r\n         return match;\r\n     }\r"}]}

