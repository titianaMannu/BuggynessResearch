{"sha":"3a993a604e63af1bcb25f5c2199fc74c0afc1f16","node_id":"MDY6Q29tbWl0MjA2MzY0OjNhOTkzYTYwNGU2M2FmMWJjYjI1ZjVjMjE5OWZjNzRjMGFmYzFmMTY=","commit":{"author":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2010-07-21T18:56:25Z"},"committer":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2010-07-21T18:56:25Z"},"message":"OPENJPA-1737 Fix the openjpa bundle creation so MANIFEST.MF is the first artifact entry\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/branches/2.0.x@966359 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"9500f64b4ec2d6b1614cc4b2798df89db30e0b89","url":"https://api.github.com/repos/apache/openjpa/git/trees/9500f64b4ec2d6b1614cc4b2798df89db30e0b89"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/3a993a604e63af1bcb25f5c2199fc74c0afc1f16","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/3a993a604e63af1bcb25f5c2199fc74c0afc1f16","html_url":"https://github.com/apache/openjpa/commit/3a993a604e63af1bcb25f5c2199fc74c0afc1f16","comments_url":"https://api.github.com/repos/apache/openjpa/commits/3a993a604e63af1bcb25f5c2199fc74c0afc1f16/comments","author":null,"committer":null,"parents":[{"sha":"bfffc19ab640114fb703a7e92783a136c93aa2f8","url":"https://api.github.com/repos/apache/openjpa/commits/bfffc19ab640114fb703a7e92783a136c93aa2f8","html_url":"https://github.com/apache/openjpa/commit/bfffc19ab640114fb703a7e92783a136c93aa2f8"}],"stats":{"total":67,"additions":26,"deletions":41},"files":[{"sha":"9c912e1aa7d17386214f787671196b3fd6b6175b","filename":"openjpa/pom.xml","status":"modified","additions":17,"deletions":40,"changes":57,"blob_url":"https://github.com/apache/openjpa/blob/3a993a604e63af1bcb25f5c2199fc74c0afc1f16/openjpa/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/3a993a604e63af1bcb25f5c2199fc74c0afc1f16/openjpa/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa/pom.xml?ref=3a993a604e63af1bcb25f5c2199fc74c0afc1f16","patch":"@@ -22,16 +22,19 @@\n     the release plugin.\n -->\n <project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\">\n+\n     <modelVersion>4.0.0</modelVersion>\n-    <artifactId>openjpa</artifactId>\n-    <packaging>bundle</packaging>\n-    <name>OpenJPA Aggregate Jar</name>\n+\n     <parent>\n         <groupId>org.apache.openjpa</groupId>\n         <artifactId>openjpa-parent</artifactId>\n         <version>2.0.1-SNAPSHOT</version>\n     </parent>\n \n+    <artifactId>openjpa</artifactId>\n+    <packaging>bundle</packaging>\n+    <name>OpenJPA Aggregate Jar</name>\n+\n     <build>\n         <plugins>\n             <!--\n@@ -48,6 +51,7 @@\n                     </execution>\n                 </executions>\n             </plugin>\n+\n             <!-- Create our aggregate JAR -->\n             <plugin>\n                 <groupId>org.apache.maven.plugins</groupId>\n@@ -86,61 +90,34 @@\n                                  org.apache.openjpa.kernel.exps.ExpressionParser\n                                 -->\n                                 <transformer implementation=\"org.apache.maven.plugins.shade.resource.ServicesResourceTransformer\" />\n-                                <!-- Need to add some MANIFEST.MF metadata -->\n-                                <transformer implementation=\"org.apache.maven.plugins.shade.resource.ManifestResourceTransformer\">\n-                                    <manifestEntries>\n-                                        <Main-Class>org.apache.openjpa.conf.OpenJPAVersion</Main-Class>\n-                                        <Premain-Class>org.apache.openjpa.enhance.PCEnhancerAgent</Premain-Class>\n-                                        <Agent-Class>org.apache.openjpa.enhance.InstrumentationFactory</Agent-Class>\n-                                        <Can-Redefine-Classes>true</Can-Redefine-Classes>\n-                                        <Can-Retransform-Classes>true</Can-Retransform-Classes>\n-                                        <Implementation-Title>Apache OpenJPA Aggregate JAR</Implementation-Title>\n-                                        <Specification-Title>JSR-317 Java Persistence</Specification-Title>\n-                                        <Specification-Vendor>Sun Microsystems, Inc.</Specification-Vendor>\n-                                        <Specification-Version>2.0</Specification-Version>\n-                                    </manifestEntries>\n-                                </transformer>\n                             </transformers>\n                         </configuration>\n                     </execution>\n                 </executions>\n             </plugin>\n \n-            <!-- extract the shaded jar so a bundle can be created -->\n-            <plugin>\n-                <groupId>org.apache.maven.plugins</groupId>\n-                <artifactId>maven-antrun-plugin</artifactId>\n-                <executions>\n-                    <execution>\n-                        <phase>package</phase>\n-                        <goals>\n-                            <goal>run</goal>\n-                        </goals>\n-                        <configuration>\n-                            <tasks>\n-                                <unzip src=\"${project.build.directory}/${pom.artifactId}-${pom.version}.jar\" dest=\"${project.build.directory}/classes\" />\n-                            </tasks>\n-                        </configuration>\n-                    </execution>\n-                </executions>\n-            </plugin>\n-\n             <!-- create an OSGi bundle -->\n             <plugin>\n                 <groupId>org.apache.felix</groupId>\n                 <artifactId>maven-bundle-plugin</artifactId>\n                 <extensions>true</extensions>\n                 <configuration>\n                     <instructions>\n+                        <!-- OpenJPA metadata -->\n+                        <Main-Class>org.apache.openjpa.conf.OpenJPAVersion</Main-Class>\n+                        <Premain-Class>org.apache.openjpa.enhance.PCEnhancerAgent</Premain-Class>\n+                        <Agent-Class>org.apache.openjpa.enhance.InstrumentationFactory</Agent-Class>\n+                        <Can-Redefine-Classes>true</Can-Redefine-Classes>\n+                        <Can-Retransform-Classes>true</Can-Retransform-Classes>\n+                        <Specification-Title>JSR-317 Java Persistence</Specification-Title>\n+                        <Specification-Vendor>Sun Microsystems, Inc.</Specification-Vendor>\n+                        <Specification-Version>2.0</Specification-Version>\n                         <!-- OSGi Bundle Metadata -->\n                         <Bundle-DocURL>${project.url}</Bundle-DocURL>\n                         <Bundle-Activator>org.apache.openjpa.persistence.osgi.PersistenceActivator</Bundle-Activator>\n                         <Private-Package />\n                         <Export-Package>org.apache.openjpa.*;version=${project.version}</Export-Package>\n-                        <Import-Package>com.ibm.*;resolution:=optional,org.postgresql.*;resolution:=optional,org.apache.tools.ant.*;resolution:=optional,org.apache.log4j.*;resolution:=optional,javax.activation.xa*;resolution:=optional,javax.jms.*;version=\"[1.1.0,1.2)\";resolution:=optional,javax.transaction.*;version=\"[1.1.0,1.2)\";resolution:=optional,javax.validation.*;version=\"[1.0.0,1.1)\";resolution:=optional,javax.xml.bind.*;resolution:=optional,serp.*;resolution:=optional,javax.persistence.*;version=\"[2.0.0,2.1)\",*</Import-Package>\n-                        <!-- Eclipse metadata -->\n-                        <Eclipse-Autostart>false</Eclipse-Autostart>\n-                        <Bundle-ClassPath>.</Bundle-ClassPath>\n+                        <Import-Package>com.ibm.*;resolution:=optional,org.postgresql.*;resolution:=optional,org.apache.tools.ant.*;resolution:=optional,org.apache.log4j.*;resolution:=optional,org.slf4j.*;resolution:=optional,org.apache.commons.logging.*;resolution:=optional,javax.activation.xa*;resolution:=optional,javax.jms.*;version=\"[1.1.0,1.2)\";resolution:=optional,javax.transaction.*;version=\"[1.1.0,1.2)\";resolution:=optional,javax.validation.*;version=\"[1.0.0,1.1)\";resolution:=optional,javax.xml.bind.*;resolution:=optional,serp.*;resolution:=optional,javax.persistence.*;version=\"[1.1.0,2.1)\",*</Import-Package>\n                     </instructions>\n                 </configuration>\n             </plugin>"},{"sha":"b29835df715e392666f07c9e31c74fda2c9f1db8","filename":"pom.xml","status":"modified","additions":9,"deletions":1,"changes":10,"blob_url":"https://github.com/apache/openjpa/blob/3a993a604e63af1bcb25f5c2199fc74c0afc1f16/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/3a993a604e63af1bcb25f5c2199fc74c0afc1f16/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/pom.xml?ref=3a993a604e63af1bcb25f5c2199fc74c0afc1f16","patch":"@@ -993,7 +993,15 @@\n                 <plugin>\n                     <groupId>org.apache.felix</groupId>\n                     <artifactId>maven-bundle-plugin</artifactId>\n-                    <version>2.0.0</version>\n+                    <version>2.0.1</version>\n+                    <extensions>true</extensions>\n+                    <configuration>\n+                        <instructions>\n+                            <Implementation-Title>${project.name}</Implementation-Title>\n+                            <Implementation-Version>${project.version}</Implementation-Version>\n+                            <Bundle-DocURL>${project.url}</Bundle-DocURL>\n+                        </instructions>\n+                    </configuration>\n                 </plugin>\n                 <plugin>\n                     <groupId>org.apache.maven.plugins</groupId>"}]}

