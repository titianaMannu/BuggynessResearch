{"sha":"3aea82e40c85ff6d653095a797b00a189681d64f","node_id":"MDY6Q29tbWl0MjA2MzY0OjNhZWE4MmU0MGM4NWZmNmQ2NTMwOTVhNzk3YjAwYTE4OTY4MWQ2NGY=","commit":{"author":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2010-03-02T15:17:18Z"},"committer":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2010-03-02T15:17:18Z"},"message":"OPENJPA-1546 OpenJPA doesn't work as internal JPA inside web applicaion in JBoss AS due to PersistenceMetaDataFactory trying to parse directories as unparsed XML files.  Original patch contributed by Dmitri Babaev.\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@918070 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"1016a304f6ee94206c375720caff08bddb4e0711","url":"https://api.github.com/repos/apache/openjpa/git/trees/1016a304f6ee94206c375720caff08bddb4e0711"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/3aea82e40c85ff6d653095a797b00a189681d64f","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/3aea82e40c85ff6d653095a797b00a189681d64f","html_url":"https://github.com/apache/openjpa/commit/3aea82e40c85ff6d653095a797b00a189681d64f","comments_url":"https://api.github.com/repos/apache/openjpa/commits/3aea82e40c85ff6d653095a797b00a189681d64f/comments","author":null,"committer":null,"parents":[{"sha":"06e6582ab859de863a192f05665d59dfb6256448","url":"https://api.github.com/repos/apache/openjpa/commits/06e6582ab859de863a192f05665d59dfb6256448","html_url":"https://github.com/apache/openjpa/commit/06e6582ab859de863a192f05665d59dfb6256448"}],"stats":{"total":9,"additions":9,"deletions":0},"files":[{"sha":"9c7bed23294a35e0db7e54348e595e1cc1800453","filename":"openjpa-persistence/src/main/java/org/apache/openjpa/persistence/PersistenceMetaDataFactory.java","status":"modified","additions":7,"deletions":0,"changes":7,"blob_url":"https://github.com/apache/openjpa/blob/3aea82e40c85ff6d653095a797b00a189681d64f/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/PersistenceMetaDataFactory.java","raw_url":"https://github.com/apache/openjpa/raw/3aea82e40c85ff6d653095a797b00a189681d64f/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/PersistenceMetaDataFactory.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/PersistenceMetaDataFactory.java?ref=3aea82e40c85ff6d653095a797b00a189681d64f","patch":"@@ -322,6 +322,12 @@ protected void mapPersistentTypeNames(Object rsrc, String[] names) {\n                 log.trace(\n                     _loc.get(\"map-persistent-types-skipping-non-url\", rsrc));\n             return;\n+        } else if (rsrc.toString().endsWith(\"/\")) {\n+            // OPENJPA-1546 If the rsrc URL is a directory it should not be\n+            // added to the list of the unparsed XML files\n+            if (log.isTraceEnabled())\n+                log.trace(_loc.get(\"map-persistent-types-skipping-dir\", rsrc));\n+            return;\n         }\n \n         if (log.isTraceEnabled())\n@@ -331,6 +337,7 @@ protected void mapPersistentTypeNames(Object rsrc, String[] names) {\n         if (_xml == null)\n             _xml = new HashMap<URL, Set<String>>();\n         _xml.put((URL) rsrc, new HashSet<String>(Arrays.asList(names)));\n+\n         if (_unparsed == null)\n             _unparsed = new HashSet<URL>();\n         _unparsed.add((URL) rsrc);"},{"sha":"227a95a17978534f890aef33004401c71985db8b","filename":"openjpa-persistence/src/main/resources/org/apache/openjpa/persistence/localizer.properties","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/apache/openjpa/blob/3aea82e40c85ff6d653095a797b00a189681d64f/openjpa-persistence/src/main/resources/org/apache/openjpa/persistence/localizer.properties","raw_url":"https://github.com/apache/openjpa/raw/3aea82e40c85ff6d653095a797b00a189681d64f/openjpa-persistence/src/main/resources/org/apache/openjpa/persistence/localizer.properties","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence/src/main/resources/org/apache/openjpa/persistence/localizer.properties?ref=3aea82e40c85ff6d653095a797b00a189681d64f","patch":"@@ -140,6 +140,8 @@ map-persistent-types-skipping-non-url: Skipping persistent type location \\\n map-persistent-types-skipping-class: Skipping persistent type location \\\n     association for location \"{0}\" since it is a class, and will not \\\n     need to be re-parsed later.\n+map-persistent-types-skipping-dir: Skipping persistent type location \\\n+    association for location \"{0}\" since it is a directory.\n no-setter-for-getter: No setter was found for method {0} in type {1} while \\\n     searching for persistent properties. This method will be ignored. If you \\\n     intended for this to be persistent, please add a corresponding setter, \\"}]}

