{"sha":"3f6ab72c529e9a464801bea27ed28d8974f13cde","node_id":"MDY6Q29tbWl0MjA2MzY0OjNmNmFiNzJjNTI5ZTlhNDY0ODAxYmVhMjdlZDI4ZDg5NzRmMTNjZGU=","commit":{"author":{"name":"Michael Dick","email":"mikedd@apache.org","date":"2009-08-14T01:59:56Z"},"committer":{"name":"Michael Dick","email":"mikedd@apache.org","date":"2009-08-14T01:59:56Z"},"message":"Refactoring QueryTest class and entities\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@804068 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"a4c7bf8aa23cac86199974dd12b21d23adbcf0ec","url":"https://api.github.com/repos/apache/openjpa/git/trees/a4c7bf8aa23cac86199974dd12b21d23adbcf0ec"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/3f6ab72c529e9a464801bea27ed28d8974f13cde","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/3f6ab72c529e9a464801bea27ed28d8974f13cde","html_url":"https://github.com/apache/openjpa/commit/3f6ab72c529e9a464801bea27ed28d8974f13cde","comments_url":"https://api.github.com/repos/apache/openjpa/commits/3f6ab72c529e9a464801bea27ed28d8974f13cde/comments","author":{"login":"mikedd","id":669432,"node_id":"MDQ6VXNlcjY2OTQzMg==","avatar_url":"https://avatars.githubusercontent.com/u/669432?v=4","gravatar_id":"","url":"https://api.github.com/users/mikedd","html_url":"https://github.com/mikedd","followers_url":"https://api.github.com/users/mikedd/followers","following_url":"https://api.github.com/users/mikedd/following{/other_user}","gists_url":"https://api.github.com/users/mikedd/gists{/gist_id}","starred_url":"https://api.github.com/users/mikedd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikedd/subscriptions","organizations_url":"https://api.github.com/users/mikedd/orgs","repos_url":"https://api.github.com/users/mikedd/repos","events_url":"https://api.github.com/users/mikedd/events{/privacy}","received_events_url":"https://api.github.com/users/mikedd/received_events","type":"User","site_admin":false},"committer":{"login":"mikedd","id":669432,"node_id":"MDQ6VXNlcjY2OTQzMg==","avatar_url":"https://avatars.githubusercontent.com/u/669432?v=4","gravatar_id":"","url":"https://api.github.com/users/mikedd","html_url":"https://github.com/mikedd","followers_url":"https://api.github.com/users/mikedd/followers","following_url":"https://api.github.com/users/mikedd/following{/other_user}","gists_url":"https://api.github.com/users/mikedd/gists{/gist_id}","starred_url":"https://api.github.com/users/mikedd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikedd/subscriptions","organizations_url":"https://api.github.com/users/mikedd/orgs","repos_url":"https://api.github.com/users/mikedd/repos","events_url":"https://api.github.com/users/mikedd/events{/privacy}","received_events_url":"https://api.github.com/users/mikedd/received_events","type":"User","site_admin":false},"parents":[{"sha":"c9695c2fb9dbe35e35e6d41516727772f3370bd9","url":"https://api.github.com/repos/apache/openjpa/commits/c9695c2fb9dbe35e35e6d41516727772f3370bd9","html_url":"https://github.com/apache/openjpa/commit/c9695c2fb9dbe35e35e6d41516727772f3370bd9"}],"stats":{"total":42,"additions":23,"deletions":19},"files":[{"sha":"1df26b4fcbb070c98224e81f3d4b71647d36b3c2","filename":"openjpa-persistence-jdbc/pom.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/apache/openjpa/blob/3f6ab72c529e9a464801bea27ed28d8974f13cde/openjpa-persistence-jdbc/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/3f6ab72c529e9a464801bea27ed28d8974f13cde/openjpa-persistence-jdbc/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/pom.xml?ref=3f6ab72c529e9a464801bea27ed28d8974f13cde","patch":"@@ -673,7 +673,7 @@\n                         <exclude>org/apache/openjpa/persistence/annotations/TestEntityOrderBy.java</exclude>\n                         <exclude>org/apache/openjpa/persistence/annotations/TestPropertyAccess.java</exclude>\n                         <exclude>org/apache/openjpa/persistence/annotations/TestVersion.java</exclude>\n-                        <exclude>org/apache/openjpa/persistence/cache/TestQueryCache.java</exclude>\n+                        <exclude>org/apache/openjpa/persistence/querycache/TestQueryCache.java</exclude>\n                         <exclude>org/apache/openjpa/persistence/conf/TestOpenJPAConfiguration.java</exclude>\n                         <exclude>org/apache/openjpa/persistence/datacache/TestCacheMultiThreadedLoad.java</exclude>\n                         <exclude>org/apache/openjpa/persistence/datacache/TestConcurrentDataCache.java</exclude>"},{"sha":"c1a42b97e4e4e0dc3d297b149d3c14ce0181f501","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/datacache/TestDataCacheBehavesIdentical.java","status":"modified","additions":2,"deletions":4,"changes":6,"blob_url":"https://github.com/apache/openjpa/blob/3f6ab72c529e9a464801bea27ed28d8974f13cde/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/datacache/TestDataCacheBehavesIdentical.java","raw_url":"https://github.com/apache/openjpa/raw/3f6ab72c529e9a464801bea27ed28d8974f13cde/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/datacache/TestDataCacheBehavesIdentical.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/datacache/TestDataCacheBehavesIdentical.java?ref=3f6ab72c529e9a464801bea27ed28d8974f13cde","patch":"@@ -27,10 +27,8 @@\n import org.apache.openjpa.persistence.OpenJPAEntityManagerSPI;\n import org.apache.openjpa.persistence.StoreCache;\n import org.apache.openjpa.persistence.StoreCacheImpl;\n-import org.apache.openjpa.persistence.cache.common.apps.\n-        BidirectionalOne2OneOwned;\n-import org.apache.openjpa.persistence.cache.common.apps.\n-        BidirectionalOne2OneOwner;\n+import org.apache.openjpa.persistence.querycache.common.apps.BidirectionalOne2OneOwned;\n+import org.apache.openjpa.persistence.querycache.common.apps.BidirectionalOne2OneOwner;\n import org.apache.openjpa.persistence.common.utils.AbstractTestCase;\n import org.apache.openjpa.persistence.datacache.common.apps.PObject;\n "},{"sha":"4780eac17fe1ea1dab3dc3a78586d5e5051e8269","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/querycache/TestQueryCache.java","status":"renamed","additions":11,"deletions":5,"changes":16,"blob_url":"https://github.com/apache/openjpa/blob/3f6ab72c529e9a464801bea27ed28d8974f13cde/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/querycache/TestQueryCache.java","raw_url":"https://github.com/apache/openjpa/raw/3f6ab72c529e9a464801bea27ed28d8974f13cde/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/querycache/TestQueryCache.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/querycache/TestQueryCache.java?ref=3f6ab72c529e9a464801bea27ed28d8974f13cde","patch":"@@ -16,15 +16,16 @@\n  * specific language governing permissions and limitations\n  * under the License.    \n  */\n-package org.apache.openjpa.persistence.cache;\n+package org.apache.openjpa.persistence.querycache;\n \n import java.util.List;\n+\n import javax.persistence.EntityManager;\n import javax.persistence.NamedQuery;\n \n-import org.apache.openjpa.persistence.cache.common.apps.Entity1;\n-import org.apache.openjpa.persistence.cache.common.apps.Entity2;\n import org.apache.openjpa.persistence.common.utils.AbstractTestCase;\n+import org.apache.openjpa.persistence.querycache.common.apps.Entity1;\n+import org.apache.openjpa.persistence.querycache.common.apps.Entity2;\n \n @NamedQuery(name = \"setParam1\",\n     query = \"SELECT o FROM Entity1 o WHERE o.pk LIKE :pk\")\n@@ -33,7 +34,7 @@\n     EntityManager em;\n \n     public TestQueryCache(String name) {\n-        super(name);\n+        super(name, \"\");\n         System.setProperty(\"cactus.contextURL\",\n             \"http://localhost:9000/cachecactus\");\n         em = currentEntityManager();\n@@ -111,7 +112,7 @@ public void testExecuteUpdate() {\n             .executeUpdate();\n         assertEquals(ret, 1);\n \n-//cascade remove doesn't remove the entity2\n+        // cascade remove doesn't remove the entity2\n         int retTmp = em.createQuery(\"Delete FROM Entity2 o WHERE o.pk LIKE :pk\")\n             .setParameter(\"pk\", entity1.getEntity2Field().getPk())\n             .executeUpdate();\n@@ -178,6 +179,11 @@ public void xxxtestSetParameter1() {\n \n         endTx(em);\n     }\n+    \n+    @Override\n+    public String getPersistenceUnitName() { \n+        return \"QueryCache\";\n+    }\n \n     //rest of the interface is tested by the CTS\n }","previous_filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/cache/TestQueryCache.java"},{"sha":"5adced3307364364d4f197ab422c6e68abf1596d","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/querycache/common/apps/BidirectionalOne2OneOwned.java","status":"renamed","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/apache/openjpa/blob/3f6ab72c529e9a464801bea27ed28d8974f13cde/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/querycache/common/apps/BidirectionalOne2OneOwned.java","raw_url":"https://github.com/apache/openjpa/raw/3f6ab72c529e9a464801bea27ed28d8974f13cde/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/querycache/common/apps/BidirectionalOne2OneOwned.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/querycache/common/apps/BidirectionalOne2OneOwned.java?ref=3f6ab72c529e9a464801bea27ed28d8974f13cde","patch":"@@ -1,4 +1,4 @@\n-package org.apache.openjpa.persistence.cache.common.apps;\n+package org.apache.openjpa.persistence.querycache.common.apps;\n \n import javax.persistence.*;\n /*","previous_filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/cache/common/apps/BidirectionalOne2OneOwned.java"},{"sha":"ab45f4e787858ea9e8bef805505346e2c8a91323","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/querycache/common/apps/BidirectionalOne2OneOwner.java","status":"renamed","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/apache/openjpa/blob/3f6ab72c529e9a464801bea27ed28d8974f13cde/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/querycache/common/apps/BidirectionalOne2OneOwner.java","raw_url":"https://github.com/apache/openjpa/raw/3f6ab72c529e9a464801bea27ed28d8974f13cde/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/querycache/common/apps/BidirectionalOne2OneOwner.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/querycache/common/apps/BidirectionalOne2OneOwner.java?ref=3f6ab72c529e9a464801bea27ed28d8974f13cde","patch":"@@ -17,7 +17,7 @@\n  * under the License.    \n  */\n \n-package org.apache.openjpa.persistence.cache.common.apps;\n+package org.apache.openjpa.persistence.querycache.common.apps;\n \n import javax.persistence.*;\n ","previous_filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/cache/common/apps/BidirectionalOne2OneOwner.java"},{"sha":"a1fde3fb922400052a76be713a70517718ffac12","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/querycache/common/apps/Entity1.java","status":"renamed","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/apache/openjpa/blob/3f6ab72c529e9a464801bea27ed28d8974f13cde/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/querycache/common/apps/Entity1.java","raw_url":"https://github.com/apache/openjpa/raw/3f6ab72c529e9a464801bea27ed28d8974f13cde/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/querycache/common/apps/Entity1.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/querycache/common/apps/Entity1.java?ref=3f6ab72c529e9a464801bea27ed28d8974f13cde","patch":"@@ -16,7 +16,7 @@\n  * specific language governing permissions and limitations\n  * under the License.    \n  */\n-package org.apache.openjpa.persistence.cache.common.apps;\n+package org.apache.openjpa.persistence.querycache.common.apps;\n \n import java.io.Serializable;\n import javax.persistence.Basic;","previous_filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/cache/common/apps/Entity1.java"},{"sha":"eef39e0a75962d550f73ee9a5742b5c8ce9cd55d","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/querycache/common/apps/Entity2.java","status":"renamed","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/apache/openjpa/blob/3f6ab72c529e9a464801bea27ed28d8974f13cde/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/querycache/common/apps/Entity2.java","raw_url":"https://github.com/apache/openjpa/raw/3f6ab72c529e9a464801bea27ed28d8974f13cde/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/querycache/common/apps/Entity2.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/querycache/common/apps/Entity2.java?ref=3f6ab72c529e9a464801bea27ed28d8974f13cde","patch":"@@ -16,7 +16,7 @@\n  * specific language governing permissions and limitations\n  * under the License.    \n  */\n-package org.apache.openjpa.persistence.cache.common.apps;\n+package org.apache.openjpa.persistence.querycache.common.apps;\n \n import java.io.Serializable;\n import javax.persistence.Basic;","previous_filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/cache/common/apps/Entity2.java"},{"sha":"02e549ad7d389666b54bc9f61912b07ce355aee4","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/querycache/common/apps/UnidirectionalOne2OneOwned.java","status":"renamed","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/apache/openjpa/blob/3f6ab72c529e9a464801bea27ed28d8974f13cde/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/querycache/common/apps/UnidirectionalOne2OneOwned.java","raw_url":"https://github.com/apache/openjpa/raw/3f6ab72c529e9a464801bea27ed28d8974f13cde/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/querycache/common/apps/UnidirectionalOne2OneOwned.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/querycache/common/apps/UnidirectionalOne2OneOwned.java?ref=3f6ab72c529e9a464801bea27ed28d8974f13cde","patch":"@@ -17,7 +17,7 @@\n  * under the License.    \n  */\n \n-package org.apache.openjpa.persistence.cache.common.apps;\n+package org.apache.openjpa.persistence.querycache.common.apps;\n \n import javax.persistence.*;\n /**","previous_filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/cache/common/apps/UnidirectionalOne2OneOwned.java"},{"sha":"b150d1dcab4f209c94bf4391a26fcc910018bfc2","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/querycache/common/apps/UnidirectionalOne2OneOwner.java","status":"renamed","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/apache/openjpa/blob/3f6ab72c529e9a464801bea27ed28d8974f13cde/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/querycache/common/apps/UnidirectionalOne2OneOwner.java","raw_url":"https://github.com/apache/openjpa/raw/3f6ab72c529e9a464801bea27ed28d8974f13cde/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/querycache/common/apps/UnidirectionalOne2OneOwner.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/querycache/common/apps/UnidirectionalOne2OneOwner.java?ref=3f6ab72c529e9a464801bea27ed28d8974f13cde","patch":"@@ -17,7 +17,7 @@\n  * under the License.    \n  */\n \n-package org.apache.openjpa.persistence.cache.common.apps;\n+package org.apache.openjpa.persistence.querycache.common.apps;\n \n import javax.persistence.*;\n ","previous_filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/cache/common/apps/UnidirectionalOne2OneOwner.java"},{"sha":"f176942be9f5446ae51c91456a8a2d9575095fb4","filename":"openjpa-persistence-jdbc/src/test/resources/org/apache/openjpa/persistence/querycache/common/apps/META-INF/persistence.xml","status":"renamed","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/apache/openjpa/blob/3f6ab72c529e9a464801bea27ed28d8974f13cde/openjpa-persistence-jdbc/src/test/resources/org/apache/openjpa/persistence/querycache/common/apps/META-INF/persistence.xml","raw_url":"https://github.com/apache/openjpa/raw/3f6ab72c529e9a464801bea27ed28d8974f13cde/openjpa-persistence-jdbc/src/test/resources/org/apache/openjpa/persistence/querycache/common/apps/META-INF/persistence.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/resources/org/apache/openjpa/persistence/querycache/common/apps/META-INF/persistence.xml?ref=3f6ab72c529e9a464801bea27ed28d8974f13cde","patch":"@@ -22,8 +22,8 @@\n     http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd\"\n   version=\"1.0\">\n \n-\t<persistence-unit name=\"TestConv\" transaction-type=\"RESOURCE_LOCAL\">\n-\t    <class>org.apache.openjpa.persistence.cache.common.apps.Entity1</class>\n-\t    <class>org.apache.openjpa.persistence.cache.common.apps.Entity2</class>\n+\t<persistence-unit name=\"QueryCache\" transaction-type=\"RESOURCE_LOCAL\">\n+\t    <class>org.apache.openjpa.persistence.querycache.common.apps.Entity1</class>\n+\t    <class>org.apache.openjpa.persistence.querycache.common.apps.Entity2</class>\n \t</persistence-unit>\n </persistence>","previous_filename":"openjpa-persistence-jdbc/src/test/resources/org/apache/openjpa/persistence/cache/common/apps/META-INF/persistence.xml"}]}

