{"sha":"402709a8495042a1c0eb79d6c61be48d35c82e37","node_id":"MDY6Q29tbWl0MjA2MzY0OjQwMjcwOWE4NDk1MDQyYTFjMGViNzlkNmM2MWJlNDhkMzVjODJlMzc=","commit":{"author":{"name":"Fay Wang","email":"faywang@apache.org","date":"2008-11-20T16:40:36Z"},"committer":{"name":"Fay Wang","email":"faywang@apache.org","date":"2008-11-20T16:40:36Z"},"message":"OPENJPA-742: add get LineNumber/ColumnNumber API in \nthe SourceTracker\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/branches/1.2.x@719275 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"10eb6d943b1af04f52e48bc4d43444b591d7895d","url":"https://api.github.com/repos/apache/openjpa/git/trees/10eb6d943b1af04f52e48bc4d43444b591d7895d"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/402709a8495042a1c0eb79d6c61be48d35c82e37","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/402709a8495042a1c0eb79d6c61be48d35c82e37","html_url":"https://github.com/apache/openjpa/commit/402709a8495042a1c0eb79d6c61be48d35c82e37","comments_url":"https://api.github.com/repos/apache/openjpa/commits/402709a8495042a1c0eb79d6c61be48d35c82e37/comments","author":null,"committer":null,"parents":[{"sha":"ead275493e524fba1e978ae76a7ade4e90d54f2f","url":"https://api.github.com/repos/apache/openjpa/commits/ead275493e524fba1e978ae76a7ade4e90d54f2f","html_url":"https://github.com/apache/openjpa/commit/ead275493e524fba1e978ae76a7ade4e90d54f2f"}],"stats":{"total":249,"additions":247,"deletions":2},"files":[{"sha":"d1699ea4979faaeafc14fe504d7a2f266fc53e0d","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/meta/ClassMappingInfo.java","status":"modified","additions":20,"deletions":0,"changes":20,"blob_url":"https://github.com/apache/openjpa/blob/402709a8495042a1c0eb79d6c61be48d35c82e37/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/meta/ClassMappingInfo.java","raw_url":"https://github.com/apache/openjpa/raw/402709a8495042a1c0eb79d6c61be48d35c82e37/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/meta/ClassMappingInfo.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/meta/ClassMappingInfo.java?ref=402709a8495042a1c0eb79d6c61be48d35c82e37","patch":"@@ -66,6 +66,9 @@\n     private File _file = null;\n     private int _srcType = SRC_OTHER;\n     private String[] _comments = null;\n+    private int _lineNum = 0;  \n+    private int _colNum = 0;  \n+    \n     // Unique constraints indexed by primary or secondary table name\n     private Map<String,List<Unique>> _uniques;\n \n@@ -470,4 +473,21 @@ public String getResourceName() {\n     public void setComments(String[] comments) {\n         _comments = comments;\n     }\n+    \n+    public int getLineNumber() {\n+        return _lineNum;\n+    }\n+\n+    public void setLineNumber(int lineNum) {\n+        _lineNum = lineNum;\n+    }\n+\n+    public int getColNumber() {\n+        return _colNum;\n+    }\n+\n+    public void setColNumber(int colNum) {\n+        _colNum = colNum;\n+    }\n+    \n }"},{"sha":"b724ae6931b5e12565558230d3edffea87c258d2","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/meta/QueryResultMapping.java","status":"modified","additions":18,"deletions":0,"changes":18,"blob_url":"https://github.com/apache/openjpa/blob/402709a8495042a1c0eb79d6c61be48d35c82e37/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/meta/QueryResultMapping.java","raw_url":"https://github.com/apache/openjpa/raw/402709a8495042a1c0eb79d6c61be48d35c82e37/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/meta/QueryResultMapping.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/meta/QueryResultMapping.java?ref=402709a8495042a1c0eb79d6c61be48d35c82e37","patch":"@@ -57,6 +57,8 @@\n     private File _file = null;\n     private Object _scope = null;\n     private int _srcType = SRC_OTHER;\n+    private int _lineNum = 0;  \n+    private int _colNum = 0;  \n     private int _mode = MODE_QUERY;\n     private Class _class = null;\n     private int _idx = 0;\n@@ -224,6 +226,22 @@ public void setSource(File file, Object scope, int srcType) {\n     public String getResourceName() {\n         return (_class == null) ? _name : _class.getName() + \":\" + _name;\n     }\n+    \n+    public int getLineNumber() {\n+        return _lineNum;\n+    }\n+\n+    public void setLineNumber(int lineNum) {\n+        _lineNum = lineNum;\n+    }\n+\n+    public int getColNumber() {\n+        return _colNum;\n+    }\n+\n+    public void setColNumber(int colNum) {\n+        _colNum = colNum;\n+    }\n \n     /**\n      * A persistence-capable result."},{"sha":"cde443b99b0e04c8cbaafbb0f7040e93f3967d61","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/Sequence.java","status":"modified","additions":18,"deletions":0,"changes":18,"blob_url":"https://github.com/apache/openjpa/blob/402709a8495042a1c0eb79d6c61be48d35c82e37/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/Sequence.java","raw_url":"https://github.com/apache/openjpa/raw/402709a8495042a1c0eb79d6c61be48d35c82e37/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/Sequence.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/Sequence.java?ref=402709a8495042a1c0eb79d6c61be48d35c82e37","patch":"@@ -38,6 +38,8 @@\n     private int _initial = 1;\n     private int _increment = 1;\n     private int _cache = 0;\n+    private int _lineNum = 0;  \n+    private int _colNum = 0;  \n \n     // keep track of source\n     private File _source = null;\n@@ -206,4 +208,20 @@ public int compareTo(Object other) {\n     public String toString() {\n         return getFullName();\n     }\n+    \n+    public int getLineNumber() {\n+        return _lineNum;\n+    }\n+\n+    public void setLineNumber(int lineNum) {\n+        _lineNum = lineNum;\n+    }\n+\n+    public int getColNumber() {\n+        return _colNum;\n+    }\n+\n+    public void setColNumber(int colNum) {\n+        _colNum = colNum;\n+    }\n }"},{"sha":"1f834b9600d9bd0269bbf183a61ff23e75545b69","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/Table.java","status":"modified","additions":18,"deletions":0,"changes":18,"blob_url":"https://github.com/apache/openjpa/blob/402709a8495042a1c0eb79d6c61be48d35c82e37/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/Table.java","raw_url":"https://github.com/apache/openjpa/raw/402709a8495042a1c0eb79d6c61be48d35c82e37/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/Table.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/Table.java?ref=402709a8495042a1c0eb79d6c61be48d35c82e37","patch":"@@ -61,6 +61,8 @@\n     private Index[] _idxs = null;\n     private Unique[] _unqs = null;\n     private String _comment = null;\n+    private int _lineNum = 0;  \n+    private int _colNum = 0;  \n \n     /**\n      * Default constructor.\n@@ -718,4 +720,20 @@ public String getComment() {\n     public void setComment(String comment) {\n         _comment = comment;\n     }\n+    \n+    public int getLineNumber() {\n+        return _lineNum;\n+    }\n+\n+    public void setLineNumber(int lineNum) {\n+        _lineNum = lineNum;\n+    }\n+\n+    public int getColNumber() {\n+        return _colNum;\n+    }\n+\n+    public void setColNumber(int colNum) {\n+        _colNum = colNum;\n+    }\n }"},{"sha":"c2d293215d9a8a9c20a0ed8f170cc77494caca06","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/XMLSchemaParser.java","status":"modified","additions":13,"deletions":0,"changes":13,"blob_url":"https://github.com/apache/openjpa/blob/402709a8495042a1c0eb79d6c61be48d35c82e37/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/XMLSchemaParser.java","raw_url":"https://github.com/apache/openjpa/raw/402709a8495042a1c0eb79d6c61be48d35c82e37/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/XMLSchemaParser.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/XMLSchemaParser.java?ref=402709a8495042a1c0eb79d6c61be48d35c82e37","patch":"@@ -26,6 +26,7 @@\n import java.util.LinkedList;\n \n import org.xml.sax.Attributes;\n+import org.xml.sax.Locator;\n import org.xml.sax.SAXException;\n import org.apache.openjpa.jdbc.conf.JDBCConfiguration;\n import org.apache.openjpa.jdbc.sql.DBDictionary;\n@@ -34,6 +35,8 @@\n import org.apache.openjpa.lib.util.Localizer.Message;\n import org.apache.openjpa.util.UserException;\n \n+import serp.util.Numbers;\n+\n /**\n  * Custom SAX parser used to parse {@link Schema} objects. The parser\n  * will place all parsed schemas into the current {@link SchemaGroup}, set\n@@ -404,6 +407,11 @@ private void endSchema() {\n \n     private void startSequence(Attributes attrs) {\n         Sequence seq = _schema.addSequence(attrs.getValue(\"name\"));\n+        Locator locator = getLocation().getLocator();\n+        if (locator != null) {\n+            seq.setLineNumber(Numbers.valueOf(locator.getLineNumber()));\n+            seq.setColNumber(Numbers.valueOf(locator.getColumnNumber()));\n+        }\n         seq.setSource(getSourceFile(), seq.SRC_XML);\n         try {\n             String val = attrs.getValue(\"initial-value\");\n@@ -423,6 +431,11 @@ private void startSequence(Attributes attrs) {\n     private void startTable(Attributes attrs) {\n         _table = _schema.addTable(attrs.getValue(\"name\"));\n         _table.setSource(getSourceFile(), _table.SRC_XML);\n+        Locator locator = getLocation().getLocator();\n+        if (locator != null) {\n+            _table.setLineNumber(Numbers.valueOf(locator.getLineNumber()));\n+            _table.setColNumber(Numbers.valueOf(locator.getColumnNumber()));\n+        }\n     }\n \n     private void endTable() {"},{"sha":"f3a415093b90dc38f3cd2bc67d550b34115f3d03","filename":"openjpa-kernel/src/main/java/org/apache/openjpa/meta/ClassMetaData.java","status":"modified","additions":18,"deletions":0,"changes":18,"blob_url":"https://github.com/apache/openjpa/blob/402709a8495042a1c0eb79d6c61be48d35c82e37/openjpa-kernel/src/main/java/org/apache/openjpa/meta/ClassMetaData.java","raw_url":"https://github.com/apache/openjpa/raw/402709a8495042a1c0eb79d6c61be48d35c82e37/openjpa-kernel/src/main/java/org/apache/openjpa/meta/ClassMetaData.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/java/org/apache/openjpa/meta/ClassMetaData.java?ref=402709a8495042a1c0eb79d6c61be48d35c82e37","patch":"@@ -134,6 +134,8 @@\n     private final LifecycleMetaData _lifeMeta = new LifecycleMetaData(this);\n     private File _srcFile = null;\n     private int _srcType = SRC_OTHER;\n+    private int _lineNum = 0;  \n+    private int _colNum = 0;  \n     private String[] _comments = null;\n     private int _listIndex = -1;\n     private int _srcMode = MODE_META | MODE_MAPPING;\n@@ -2171,6 +2173,22 @@ public void setSource(File file, int srcType) {\n     public String getResourceName() {\n         return _type.getName();\n     }\n+    \n+    public int getLineNumber() {\n+        return _lineNum;\n+    }\n+\n+    public void setLineNumber(int lineNum) {\n+        _lineNum = lineNum;\n+    }\n+\n+    public int getColNumber() {\n+        return _colNum;\n+    }\n+\n+    public void setColNumber(int colNum) {\n+        _colNum = colNum;\n+    }\n \n     /**\n      * The source mode this metadata has been loaded under."},{"sha":"81ff89e965d4f7eb88a21078e947ba152a6c5509","filename":"openjpa-kernel/src/main/java/org/apache/openjpa/meta/NonPersistentMetaData.java","status":"modified","additions":19,"deletions":0,"changes":19,"blob_url":"https://github.com/apache/openjpa/blob/402709a8495042a1c0eb79d6c61be48d35c82e37/openjpa-kernel/src/main/java/org/apache/openjpa/meta/NonPersistentMetaData.java","raw_url":"https://github.com/apache/openjpa/raw/402709a8495042a1c0eb79d6c61be48d35c82e37/openjpa-kernel/src/main/java/org/apache/openjpa/meta/NonPersistentMetaData.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/java/org/apache/openjpa/meta/NonPersistentMetaData.java?ref=402709a8495042a1c0eb79d6c61be48d35c82e37","patch":"@@ -40,6 +40,9 @@\n     private final int _type;\r\n \t\r\n     private File _srcFile = null;\r\n+    private int _lineNum = 0;  \r\n+    private int _colNum = 0;  \r\n+    \r\n     private int _srcType = SRC_OTHER;\r\n     private String[] _comments = null;\r\n     private int _listIndex = -1;\r\n@@ -105,6 +108,22 @@ public void setSource(File file, int srcType) {\n         _srcType = srcType;\r\n     }\r\n \r\n+    public int getLineNumber() {\r\n+        return _lineNum;\r\n+    }\r\n+\r\n+    public void setLineNumber(int lineNum) {\r\n+        _lineNum = lineNum;\r\n+    }\r\n+\r\n+    public int getColNumber() {\r\n+        return _colNum;\r\n+    }\r\n+\r\n+    public void setColNumber(int colNum) {\r\n+        _colNum = colNum;\r\n+    }\r\n+    \r\n     public String getResourceName() {\r\n         return _class.getName();\r\n     }\r"},{"sha":"948f144cb61266db5605ac08ee850052ead36b87","filename":"openjpa-kernel/src/main/java/org/apache/openjpa/meta/QueryMetaData.java","status":"modified","additions":19,"deletions":0,"changes":19,"blob_url":"https://github.com/apache/openjpa/blob/402709a8495042a1c0eb79d6c61be48d35c82e37/openjpa-kernel/src/main/java/org/apache/openjpa/meta/QueryMetaData.java","raw_url":"https://github.com/apache/openjpa/raw/402709a8495042a1c0eb79d6c61be48d35c82e37/openjpa-kernel/src/main/java/org/apache/openjpa/meta/QueryMetaData.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/java/org/apache/openjpa/meta/QueryMetaData.java?ref=402709a8495042a1c0eb79d6c61be48d35c82e37","patch":"@@ -56,6 +56,9 @@\n     private List _hintKeys;\n     private List _hintVals;\n     private String _resultSetMappingName;\n+    private int _lineNum;  \n+    private int _colNum;  \n+\n     /**\n      * Construct with the given name.\n      */\n@@ -274,4 +277,20 @@ public void setSource(File file, Object scope, int srcType) {\n     public String getResourceName() {\n         return (_class == null) ? _name : _class.getName () + \":\" + _name;\n \t}\n+    \n+    public int getLineNumber() {\n+        return _lineNum;\n+    }\n+\n+    public void setLineNumber(int lineNum) {\n+        _lineNum = lineNum;\n+    }\n+\n+    public int getColNumber() {\n+        return _colNum;\n+    }\n+\n+    public void setColNumber(int colNum) {\n+        _colNum = colNum;\n+    }\n }"},{"sha":"d575c364b8e5616527bfd6e11a1338e5be1cf8ba","filename":"openjpa-kernel/src/main/java/org/apache/openjpa/meta/SequenceMetaData.java","status":"modified","additions":18,"deletions":0,"changes":18,"blob_url":"https://github.com/apache/openjpa/blob/402709a8495042a1c0eb79d6c61be48d35c82e37/openjpa-kernel/src/main/java/org/apache/openjpa/meta/SequenceMetaData.java","raw_url":"https://github.com/apache/openjpa/raw/402709a8495042a1c0eb79d6c61be48d35c82e37/openjpa-kernel/src/main/java/org/apache/openjpa/meta/SequenceMetaData.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/java/org/apache/openjpa/meta/SequenceMetaData.java?ref=402709a8495042a1c0eb79d6c61be48d35c82e37","patch":"@@ -80,6 +80,8 @@\n     private File _source = null;\n     private Object _scope = null;\n     private int _srcType = SRC_OTHER;\n+    private int _lineNum = 0;  \n+    private int _colNum = 0;  \n     private String[] _comments = null;\n     private String _sequence = null;\n     private int _increment = -1;\n@@ -129,6 +131,22 @@ public void setSource(File file, Object scope, int srcType) {\n         _srcType = srcType;\n     }\n \n+    public int getLineNumber() {\n+        return _lineNum;\n+    }\n+\n+    public void setLineNumber(int lineNum) {\n+        _lineNum = lineNum;\n+    }\n+\n+    public int getColNumber() {\n+        return _colNum;\n+    }\n+\n+    public void setColNumber(int colNum) {\n+        _colNum = colNum;\n+    }\n+    \n     public String getResourceName() {\n         return _name;\n     }"},{"sha":"be7a2c5e468214b8a77c00f9adfe0c9c5e76df65","filename":"openjpa-lib/src/main/java/org/apache/openjpa/lib/meta/SourceTracker.java","status":"modified","additions":11,"deletions":0,"changes":11,"blob_url":"https://github.com/apache/openjpa/blob/402709a8495042a1c0eb79d6c61be48d35c82e37/openjpa-lib/src/main/java/org/apache/openjpa/lib/meta/SourceTracker.java","raw_url":"https://github.com/apache/openjpa/raw/402709a8495042a1c0eb79d6c61be48d35c82e37/openjpa-lib/src/main/java/org/apache/openjpa/lib/meta/SourceTracker.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-lib/src/main/java/org/apache/openjpa/lib/meta/SourceTracker.java?ref=402709a8495042a1c0eb79d6c61be48d35c82e37","patch":"@@ -53,4 +53,15 @@\n      * class, this would return the name of the class.\n      */\n     public String getResourceName();\n+    \n+    /**\n+     * Return the line number of the file at which this instance was parsed.\n+     */\n+    public int getLineNumber();\n+\n+    /**\n+     * Return the column number in the line of the file at which this\n+     * instance was parsed.\n+     */\n+    public int getColNumber();\n }"},{"sha":"6060bca21831fb1938c36b42d96d8829ef689560","filename":"openjpa-persistence-jdbc/src/main/java/org/apache/openjpa/persistence/jdbc/XMLPersistenceMappingParser.java","status":"modified","additions":12,"deletions":1,"changes":13,"blob_url":"https://github.com/apache/openjpa/blob/402709a8495042a1c0eb79d6c61be48d35c82e37/openjpa-persistence-jdbc/src/main/java/org/apache/openjpa/persistence/jdbc/XMLPersistenceMappingParser.java","raw_url":"https://github.com/apache/openjpa/raw/402709a8495042a1c0eb79d6c61be48d35c82e37/openjpa-persistence-jdbc/src/main/java/org/apache/openjpa/persistence/jdbc/XMLPersistenceMappingParser.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/main/java/org/apache/openjpa/persistence/jdbc/XMLPersistenceMappingParser.java?ref=402709a8495042a1c0eb79d6c61be48d35c82e37","patch":"@@ -33,6 +33,7 @@\n \n import org.apache.commons.lang.StringUtils;\n import org.xml.sax.Attributes;\n+import org.xml.sax.Locator;\n import org.xml.sax.SAXException;\n import org.apache.openjpa.jdbc.conf.JDBCConfiguration;\n import org.apache.openjpa.jdbc.meta.ClassMapping;\n@@ -61,6 +62,7 @@\n import org.apache.openjpa.util.InternalException;\n \n import static org.apache.openjpa.persistence.jdbc.MappingTag.*;\n+import serp.util.Numbers;\n \n /**\n  * Custom SAX parser used by the system to parse persistence mapping files.\n@@ -414,6 +416,11 @@ private boolean startTableGenerator(Attributes attrs) {\n         Object scope = (cur instanceof ClassMetaData)\n             ? ((ClassMetaData) cur).getDescribedType() : null;\n         seq.setSource(getSourceFile(), scope, seq.SRC_XML);\n+        Locator locator = getLocation().getLocator();\n+        if (locator != null) {\n+            seq.setLineNumber(Numbers.valueOf(locator.getLineNumber()));\n+            seq.setColNumber(Numbers.valueOf(locator.getColumnNumber()));\n+        }\n         pushElement(seq);\n         return true;\n     }\n@@ -829,7 +836,11 @@ private boolean startSQLResultSetMapping(Attributes attrs) {\n         Object scope = (cur instanceof ClassMetaData)\n             ? ((ClassMetaData) cur).getDescribedType() : null;\n         result.setSource(getSourceFile(), scope, result.SRC_XML);\n-\n+        Locator locator = getLocation().getLocator();\n+        if (locator != null) {\n+            result.setLineNumber(Numbers.valueOf(locator.getLineNumber()));\n+            result.setColNumber(Numbers.valueOf(locator.getColumnNumber()));\n+        }\n         pushElement(result);\n         return true;\n     }"},{"sha":"94e10c18bb66d0f29bcc87900a2c5f08c0cd9d8b","filename":"openjpa-persistence/src/main/java/org/apache/openjpa/persistence/AnnotationPersistenceMetaDataSerializer.java","status":"modified","additions":16,"deletions":0,"changes":16,"blob_url":"https://github.com/apache/openjpa/blob/402709a8495042a1c0eb79d6c61be48d35c82e37/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/AnnotationPersistenceMetaDataSerializer.java","raw_url":"https://github.com/apache/openjpa/raw/402709a8495042a1c0eb79d6c61be48d35c82e37/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/AnnotationPersistenceMetaDataSerializer.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/AnnotationPersistenceMetaDataSerializer.java?ref=402709a8495042a1c0eb79d6c61be48d35c82e37","patch":"@@ -1277,6 +1277,14 @@ public String getResourceName() {\n             return _seqs[0].getResourceName();\n         }\n \n+        public int getLineNumber() {\n+            return _seqs[0].getLineNumber();\n+        }\n+\n+        public int getColNumber() {\n+            return _seqs[0].getColNumber();\n+        }\n+        \n         public int compareTo(ClassSeqs other) {\n             if (other == this)\n                 return 0;\n@@ -1346,6 +1354,14 @@ public String getResourceName() {\n             return _queries[0].getResourceName();\n         }\n \n+        public int getLineNumber() {\n+            return _queries[0].getLineNumber();\n+        }\n+\n+        public int getColNumber() {\n+            return _queries[0].getColNumber();\n+        }\n+        \n         public int compareTo(ClassQueries other) {\n             if (other == this)\n                 return 0;"},{"sha":"c3bf7dc16f09d948a9ba11481219257e41ecc1ec","filename":"openjpa-persistence/src/main/java/org/apache/openjpa/persistence/PersistenceUnitInfoImpl.java","status":"modified","additions":8,"deletions":0,"changes":8,"blob_url":"https://github.com/apache/openjpa/blob/402709a8495042a1c0eb79d6c61be48d35c82e37/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/PersistenceUnitInfoImpl.java","raw_url":"https://github.com/apache/openjpa/raw/402709a8495042a1c0eb79d6c61be48d35c82e37/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/PersistenceUnitInfoImpl.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/PersistenceUnitInfoImpl.java?ref=402709a8495042a1c0eb79d6c61be48d35c82e37","patch":"@@ -471,6 +471,14 @@ public Object getSourceScope() {\n     public int getSourceType() {\n         return SRC_XML;\n     }\n+    \n+    public int getLineNumber() {\n+        return 0;\n+    }\n+        \n+    public int getColNumber() {\n+        return 0;\n+    }\n \n     public String getResourceName() {\n         return \"PersistenceUnitInfo:\" + _name;"},{"sha":"3c5a083734684de4f07c0110ca76bc1f199e0c48","filename":"openjpa-persistence/src/main/java/org/apache/openjpa/persistence/XMLPersistenceMetaDataParser.java","status":"modified","additions":23,"deletions":1,"changes":24,"blob_url":"https://github.com/apache/openjpa/blob/402709a8495042a1c0eb79d6c61be48d35c82e37/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/XMLPersistenceMetaDataParser.java","raw_url":"https://github.com/apache/openjpa/raw/402709a8495042a1c0eb79d6c61be48d35c82e37/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/XMLPersistenceMetaDataParser.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/XMLPersistenceMetaDataParser.java?ref=402709a8495042a1c0eb79d6c61be48d35c82e37","patch":"@@ -36,6 +36,7 @@\n \n import org.apache.commons.lang.StringUtils;\n import org.xml.sax.Attributes;\n+import org.xml.sax.Locator;\n import org.xml.sax.SAXException;\n import org.apache.openjpa.conf.OpenJPAConfiguration;\n import org.apache.openjpa.enhance.PersistenceCapable;\n@@ -67,6 +68,8 @@\n import static org.apache.openjpa.persistence.PersistenceStrategy.*;\n import org.apache.openjpa.util.ImplHelper;\n \n+import serp.util.Numbers;\n+\n /**\n  * Custom SAX parser used by the system to quickly parse persistence i\n  * metadata files.\n@@ -774,6 +777,11 @@ protected boolean startClass(String elem, Attributes attrs)\n         if (isMetaDataMode()) {\n             meta.setSource(getSourceFile(), meta.SRC_XML);\n             meta.setSourceMode(MODE_META, true);\n+            Locator locator = getLocation().getLocator();\n+            if (locator != null) {\n+                meta.setLineNumber(Numbers.valueOf(locator.getLineNumber()));\n+                meta.setColNumber(Numbers.valueOf(locator.getColumnNumber()));\n+            }\n             meta.setListingIndex(_clsPos);\n             String name = attrs.getValue(\"name\");\n             if (!StringUtils.isEmpty(name))\n@@ -896,6 +904,11 @@ protected boolean startSequenceGenerator(Attributes attrs) {\n         Object scope = (cur instanceof ClassMetaData)\n             ? ((ClassMetaData) cur).getDescribedType() : null;\n         meta.setSource(getSourceFile(), scope, meta.SRC_XML);\n+        Locator locator = getLocation().getLocator();\n+        if (locator != null) {\n+            meta.setLineNumber(Numbers.valueOf(locator.getLineNumber()));\n+            meta.setColNumber(Numbers.valueOf(locator.getColumnNumber()));\n+        }\n         return true;\n     }\n \n@@ -1399,7 +1412,11 @@ protected boolean startNamedQuery(Attributes attrs)\n         meta.setDefiningType(_cls);\n         meta.setQueryString(attrs.getValue(\"query\"));\n         meta.setLanguage(JPQLParser.LANG_JPQL);\n-\n+        Locator locator = getLocation().getLocator();\n+        if (locator != null) {\n+            meta.setLineNumber(Numbers.valueOf(locator.getLineNumber()));\n+            meta.setColNumber(Numbers.valueOf(locator.getColumnNumber()));\n+        }\n         Object cur = currentElement();\n         Object scope = (cur instanceof ClassMetaData)\n             ? ((ClassMetaData) cur).getDescribedType() : null;\n@@ -1482,6 +1499,11 @@ protected boolean startNamedNativeQuery(Attributes attrs)\n         Object scope = (cur instanceof ClassMetaData)\n             ? ((ClassMetaData) cur).getDescribedType() : null;\n         meta.setSource(getSourceFile(), scope, meta.SRC_XML);\n+        Locator locator = getLocation().getLocator();\n+        if (locator != null) {\n+            meta.setLineNumber(Numbers.valueOf(locator.getLineNumber()));\n+            meta.setColNumber(Numbers.valueOf(locator.getColumnNumber()));\n+        }\n         if (isMetaDataMode())\n             meta.setSourceMode(MODE_META);\n         else if (isMappingMode())"},{"sha":"c76f1f6afbc55763620149a48d5464c1139aee0e","filename":"openjpa-persistence/src/main/java/org/apache/openjpa/persistence/XMLPersistenceMetaDataSerializer.java","status":"modified","additions":16,"deletions":0,"changes":16,"blob_url":"https://github.com/apache/openjpa/blob/402709a8495042a1c0eb79d6c61be48d35c82e37/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/XMLPersistenceMetaDataSerializer.java","raw_url":"https://github.com/apache/openjpa/raw/402709a8495042a1c0eb79d6c61be48d35c82e37/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/XMLPersistenceMetaDataSerializer.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/XMLPersistenceMetaDataSerializer.java?ref=402709a8495042a1c0eb79d6c61be48d35c82e37","patch":"@@ -1229,6 +1229,14 @@ public String getResourceName() {\n             return _seqs[0].getResourceName();\n         }\n \n+        public int getLineNumber() {\n+            return _seqs[0].getLineNumber();\n+        }\n+\n+        public int getColNumber() {\n+            return _seqs[0].getColNumber();\n+        }\n+        \n         public int compareTo(ClassSeqs other) {\n             if (other == this)\n                 return 0;\n@@ -1298,6 +1306,14 @@ public String getResourceName() {\n             return _queries[0].getResourceName();\n         }\n \n+        public int getLineNumber() {\n+            return _queries[0].getLineNumber();\n+        }\n+\n+        public int getColNumber() {\n+            return _queries[0].getColNumber();\n+        }\n+\n         public int compareTo(ClassQueries other) {\n             if (other == this)\n                 return 0;"}]}

