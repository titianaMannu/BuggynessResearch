{"sha":"41c05d1bbe5f3b5c5e103ff7ae63da1fbe1b8448","node_id":"MDY6Q29tbWl0MjA2MzY0OjQxYzA1ZDFiYmU1ZjNiNWM1ZTEwM2ZmN2FlNjNkYTFmYmUxYjg0NDg=","commit":{"author":{"name":"Mark Struberg","email":"struberg@apache.org","date":"2015-07-21T11:25:35Z"},"committer":{"name":"Mark Struberg","email":"struberg@apache.org","date":"2015-07-21T11:25:35Z"},"message":"OPENJPA-2601 fix 'hint' element in orm.xml parsing\n\nTxs to Kariem Hussein for the patch!\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@1692088 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"30874090da650338820834d608532bec9c4b51bd","url":"https://api.github.com/repos/apache/openjpa/git/trees/30874090da650338820834d608532bec9c4b51bd"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/41c05d1bbe5f3b5c5e103ff7ae63da1fbe1b8448","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/41c05d1bbe5f3b5c5e103ff7ae63da1fbe1b8448","html_url":"https://github.com/apache/openjpa/commit/41c05d1bbe5f3b5c5e103ff7ae63da1fbe1b8448","comments_url":"https://api.github.com/repos/apache/openjpa/commits/41c05d1bbe5f3b5c5e103ff7ae63da1fbe1b8448/comments","author":{"login":"struberg","id":79310,"node_id":"MDQ6VXNlcjc5MzEw","avatar_url":"https://avatars.githubusercontent.com/u/79310?v=4","gravatar_id":"","url":"https://api.github.com/users/struberg","html_url":"https://github.com/struberg","followers_url":"https://api.github.com/users/struberg/followers","following_url":"https://api.github.com/users/struberg/following{/other_user}","gists_url":"https://api.github.com/users/struberg/gists{/gist_id}","starred_url":"https://api.github.com/users/struberg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/struberg/subscriptions","organizations_url":"https://api.github.com/users/struberg/orgs","repos_url":"https://api.github.com/users/struberg/repos","events_url":"https://api.github.com/users/struberg/events{/privacy}","received_events_url":"https://api.github.com/users/struberg/received_events","type":"User","site_admin":false},"committer":{"login":"struberg","id":79310,"node_id":"MDQ6VXNlcjc5MzEw","avatar_url":"https://avatars.githubusercontent.com/u/79310?v=4","gravatar_id":"","url":"https://api.github.com/users/struberg","html_url":"https://github.com/struberg","followers_url":"https://api.github.com/users/struberg/followers","following_url":"https://api.github.com/users/struberg/following{/other_user}","gists_url":"https://api.github.com/users/struberg/gists{/gist_id}","starred_url":"https://api.github.com/users/struberg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/struberg/subscriptions","organizations_url":"https://api.github.com/users/struberg/orgs","repos_url":"https://api.github.com/users/struberg/repos","events_url":"https://api.github.com/users/struberg/events{/privacy}","received_events_url":"https://api.github.com/users/struberg/received_events","type":"User","site_admin":false},"parents":[{"sha":"c4db9b05b8ef13a6053579b50ec7b82b27881674","url":"https://api.github.com/repos/apache/openjpa/commits/c4db9b05b8ef13a6053579b50ec7b82b27881674","html_url":"https://github.com/apache/openjpa/commit/c4db9b05b8ef13a6053579b50ec7b82b27881674"}],"stats":{"total":18,"additions":16,"deletions":2},"files":[{"sha":"7c4f60704a2d46f866247977d532d15fb6daf391","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/TestXMLPersistenceMetaDataParser.java","status":"modified","additions":11,"deletions":1,"changes":12,"blob_url":"https://github.com/apache/openjpa/blob/41c05d1bbe5f3b5c5e103ff7ae63da1fbe1b8448/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/TestXMLPersistenceMetaDataParser.java","raw_url":"https://github.com/apache/openjpa/raw/41c05d1bbe5f3b5c5e103ff7ae63da1fbe1b8448/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/TestXMLPersistenceMetaDataParser.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/TestXMLPersistenceMetaDataParser.java?ref=41c05d1bbe5f3b5c5e103ff7ae63da1fbe1b8448","patch":"@@ -23,6 +23,9 @@\n import java.util.Iterator;\n import java.util.List;\n \n+import org.apache.openjpa.kernel.QueryHints;\n+import org.apache.openjpa.meta.QueryMetaData;\n+import org.apache.openjpa.persistence.meta.MetamodelImpl;\n import org.apache.openjpa.persistence.test.SQLListenerTestCase;\n import javax.persistence.*;\n \n@@ -161,7 +164,14 @@ public void testManyToOneEagerFetch() {\n         em.close();\n         \n     }\n-    \n+\n+    public void testQueryHintOrmXml() {\n+        QueryMetaData[] meta = ((MetamodelImpl) emf.getMetamodel()).getRepository().getQueryMetaDatas();\n+        assertEquals(1, meta.length);\n+        assertEquals(\"Country1.literal\", meta[0].getName());\n+        assertEquals(1, meta[0].getHintKeys().length);\n+        assertEquals(QueryHints.HINT_USE_LITERAL_IN_SQL, meta[0].getHintKeys()[0]);\n+    }\n \n     private void printArrayList(ArrayList aList) {\n         Iterator itr = aList.iterator();"},{"sha":"b8728869a37292d4f4cf244b069d77df6c58d01d","filename":"openjpa-persistence-jdbc/src/test/resources/org/apache/openjpa/persistence/orm.xml","status":"modified","additions":4,"deletions":0,"changes":4,"blob_url":"https://github.com/apache/openjpa/blob/41c05d1bbe5f3b5c5e103ff7ae63da1fbe1b8448/openjpa-persistence-jdbc/src/test/resources/org/apache/openjpa/persistence/orm.xml","raw_url":"https://github.com/apache/openjpa/raw/41c05d1bbe5f3b5c5e103ff7ae63da1fbe1b8448/openjpa-persistence-jdbc/src/test/resources/org/apache/openjpa/persistence/orm.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/resources/org/apache/openjpa/persistence/orm.xml?ref=41c05d1bbe5f3b5c5e103ff7ae63da1fbe1b8448","patch":"@@ -22,6 +22,10 @@\n  xsi:schemaLocation=\"http://java.sun.com/xml/ns/persistence/orm orm_1_0.xsd\"\n  version=\"1.0\">\n     <package>org.apache.openjpa.persistence</package>\n+    <named-query name=\"Country1.literal\">\n+        <query>Select c from Country1 c where c.name = 'literal'</query>\n+        <hint name=\"openjpa.hint.UseLiteralInSQL\" value=\"true\" />\n+    </named-query>\n     <entity class=\"Security1\">\n         <table name=\"SECURITY1\" />\n         <attributes>"},{"sha":"ffecaf095cd67dbe1321781c6a6513b0f0884906","filename":"openjpa-persistence/src/main/java/org/apache/openjpa/persistence/XMLPersistenceMetaDataParser.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/apache/openjpa/blob/41c05d1bbe5f3b5c5e103ff7ae63da1fbe1b8448/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/XMLPersistenceMetaDataParser.java","raw_url":"https://github.com/apache/openjpa/raw/41c05d1bbe5f3b5c5e103ff7ae63da1fbe1b8448/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/XMLPersistenceMetaDataParser.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/XMLPersistenceMetaDataParser.java?ref=41c05d1bbe5f3b5c5e103ff7ae63da1fbe1b8448","patch":"@@ -170,7 +170,7 @@\n \n         _elems.put(\"named-query\", QUERY);\n         _elems.put(\"named-native-query\", NATIVE_QUERY);\n-        _elems.put(\"query-hint\", QUERY_HINT);\n+        _elems.put(\"hint\", QUERY_HINT);\n         _elems.put(\"query\", QUERY_STRING);\n \n         _elems.put(\"flush-mode\", FLUSH_MODE);"}]}

