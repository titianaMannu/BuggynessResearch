{"sha":"44e8ae25cfda3c7f0934c96cba6121fc270434a1","node_id":"MDY6Q29tbWl0MjA2MzY0OjQ0ZThhZTI1Y2ZkYTNjN2YwOTM0Yzk2Y2JhNjEyMWZjMjcwNDM0YTE=","commit":{"author":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2010-05-11T15:54:42Z"},"committer":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2010-05-11T15:54:42Z"},"message":"OPENJPA-1660 Add support to test with Apache Bean Validation provider\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/branches/2.0.x@943157 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"4e5bcd4aa5a560b00fd624663dfea148fb6db6b9","url":"https://api.github.com/repos/apache/openjpa/git/trees/4e5bcd4aa5a560b00fd624663dfea148fb6db6b9"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/44e8ae25cfda3c7f0934c96cba6121fc270434a1","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/44e8ae25cfda3c7f0934c96cba6121fc270434a1","html_url":"https://github.com/apache/openjpa/commit/44e8ae25cfda3c7f0934c96cba6121fc270434a1","comments_url":"https://api.github.com/repos/apache/openjpa/commits/44e8ae25cfda3c7f0934c96cba6121fc270434a1/comments","author":null,"committer":null,"parents":[{"sha":"6dd93052c8c6e596c9e118f4f35bd5ccf5b68337","url":"https://api.github.com/repos/apache/openjpa/commits/6dd93052c8c6e596c9e118f4f35bd5ccf5b68337","html_url":"https://github.com/apache/openjpa/commit/6dd93052c8c6e596c9e118f4f35bd5ccf5b68337"}],"stats":{"total":131,"additions":87,"deletions":44},"files":[{"sha":"2d201cf6a0631193fbca8b0c285f48cfbf8326a3","filename":"openjpa-integration/validation/pom.xml","status":"modified","additions":78,"deletions":43,"changes":121,"blob_url":"https://github.com/apache/openjpa/blob/44e8ae25cfda3c7f0934c96cba6121fc270434a1/openjpa-integration/validation/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/44e8ae25cfda3c7f0934c96cba6121fc270434a1/openjpa-integration/validation/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-integration/validation/pom.xml?ref=44e8ae25cfda3c7f0934c96cba6121fc270434a1","patch":"@@ -48,56 +48,37 @@\n \n     <profiles>\n         <!-- Profile for testing with Agimatec validation provider -->\n+        <!-- See http://incubator.apache.org/projects/beanvalidation.html -->\n         <profile>\n-            <id>agimatec</id>\n+            <id>bval</id>\n             <activation>\n                 <property>\n-                    <name>agimatec</name>\n+                    <name>bval</name>\n                 </property>\n             </activation>\n             <dependencies>\n-                <!-- See http://code.google.com/p/agimatec-validation/wiki/GettingStarted -->\n-                <!-- Validation API RI, which we'll test with the RI\n-                <dependency>\n-                    <groupId>javax.validation</groupId>\n-                    <artifactId>validation-api</artifactId>\n-                    <version>1.0.0.GA</version>\n-                    <scope>test</scope>\n-                </dependency>\n-                -->\n                 <dependency>\n                     <groupId>org.apache.geronimo.specs</groupId>\n                     <artifactId>geronimo-validation_1.0_spec</artifactId>\n                     <scope>test</scope>\n                 </dependency>\n                 <dependency>\n-                    <groupId>com.agimatec</groupId>\n-                    <artifactId>agimatec-jsr303</artifactId>\n-                    <version>0.9.6</version>\n+                    <groupId>org.apache.bval</groupId>\n+                    <artifactId>bval-jsr303</artifactId>\n+                    <version>0.1-incubating-SNAPSHOT</version>\n                     <scope>test</scope>\n                     <exclusions>\n                         <!-- force usage of the geronimo-validation_1.0_spec -->\n                         <exclusion>\n                             <groupId>javax.validation</groupId>\n                             <artifactId>validation-api</artifactId>\n                         </exclusion>\n-                        <!-- use our level of the geronimo-jpa_2.0_spec -->\n-                        <exclusion>\n-                            <groupId>javax.validation</groupId>\n-                            <artifactId>validation-api</artifactId>\n-                        </exclusion>\n                     </exclusions>\n                 </dependency>\n-                <dependency>\n-                    <groupId>com.agimatec</groupId>\n-                    <artifactId>agimatec-validation</artifactId>\n-                    <version>0.9.6</version>\n-                    <scope>test</scope>\n-                </dependency>\n                 <dependency>\n                     <groupId>commons-beanutils</groupId>\n                     <artifactId>commons-beanutils</artifactId>\n-                    <version>1.8.2</version>\n+                    <version>1.8.3</version>\n                     <scope>test</scope>\n                 </dependency>\n                 <dependency>\n@@ -107,23 +88,6 @@\n                     <scope>test</scope>\n                 </dependency>\n             </dependencies>\n-            <repositories>\n-                <repository>\n-                    <id>agimatec.oss.sonatype.org</id>\n-                    <name>Sonatype OSS Repository</name>\n-                    <url>http://oss.sonatype.org/content/repositories/agimatec</url>\n-                    <layout>default</layout>\n-                    <snapshots>\n-                        <enabled>true</enabled>\n-                        <checksumPolicy>ignore</checksumPolicy>\n-                        <updatePolicy>daily</updatePolicy>\n-                    </snapshots>\n-                    <releases>\n-                        <enabled>true</enabled>\n-                        <checksumPolicy>fail</checksumPolicy>\n-                    </releases>\n-                </repository>\n-            </repositories>\n         </profile>\n \n         <!-- Default profile for testing with Hibernate Bean Validation RI -->\n@@ -189,6 +153,77 @@\n                 </repository>\n             </repositories>\n         </profile>\n+\n+        <!-- OLD Profile for testing with Agimatec validation provider -->\n+        <profile>\n+            <id>agimatec</id>\n+            <activation>\n+                <property>\n+                    <name>agimatec</name>\n+                </property>\n+            </activation>\n+            <dependencies>\n+                <!-- See http://code.google.com/p/agimatec-validation/wiki/GettingStarted -->\n+                <dependency>\n+                    <groupId>org.apache.geronimo.specs</groupId>\n+                    <artifactId>geronimo-validation_1.0_spec</artifactId>\n+                    <scope>test</scope>\n+                </dependency>\n+                <dependency>\n+                    <groupId>com.agimatec</groupId>\n+                    <artifactId>agimatec-jsr303</artifactId>\n+                    <version>0.9.6</version>\n+                    <scope>test</scope>\n+                    <exclusions>\n+                        <!-- force usage of the geronimo-validation_1.0_spec -->\n+                        <exclusion>\n+                            <groupId>javax.validation</groupId>\n+                            <artifactId>validation-api</artifactId>\n+                        </exclusion>\n+                        <!-- use our level of the geronimo-jpa_2.0_spec -->\n+                        <exclusion>\n+                            <groupId>javax.validation</groupId>\n+                            <artifactId>validation-api</artifactId>\n+                        </exclusion>\n+                    </exclusions>\n+                </dependency>\n+                <dependency>\n+                    <groupId>com.agimatec</groupId>\n+                    <artifactId>agimatec-validation</artifactId>\n+                    <version>0.9.6</version>\n+                    <scope>test</scope>\n+                </dependency>\n+                <dependency>\n+                    <groupId>commons-beanutils</groupId>\n+                    <artifactId>commons-beanutils</artifactId>\n+                    <version>1.8.2</version>\n+                    <scope>test</scope>\n+                </dependency>\n+                <dependency>\n+                    <groupId>commons-lang</groupId>\n+                    <artifactId>commons-lang</artifactId>\n+                    <version>2.4</version>\n+                    <scope>test</scope>\n+                </dependency>\n+            </dependencies>\n+            <repositories>\n+                <repository>\n+                    <id>agimatec.oss.sonatype.org</id>\n+                    <name>Sonatype OSS Repository</name>\n+                    <url>http://oss.sonatype.org/content/repositories/agimatec</url>\n+                    <layout>default</layout>\n+                    <snapshots>\n+                        <enabled>true</enabled>\n+                        <checksumPolicy>ignore</checksumPolicy>\n+                        <updatePolicy>daily</updatePolicy>\n+                    </snapshots>\n+                    <releases>\n+                        <enabled>true</enabled>\n+                        <checksumPolicy>fail</checksumPolicy>\n+                    </releases>\n+                </repository>\n+            </repositories>\n+        </profile>\n     </profiles>\n \n     <dependencies>"},{"sha":"4f39abb622e36a7eb9328f6317980e684223ebef","filename":"openjpa-integration/validation/src/test/java/org/apache/openjpa/integration/validation/TestTraversableResolver.java","status":"modified","additions":9,"deletions":1,"changes":10,"blob_url":"https://github.com/apache/openjpa/blob/44e8ae25cfda3c7f0934c96cba6121fc270434a1/openjpa-integration/validation/src/test/java/org/apache/openjpa/integration/validation/TestTraversableResolver.java","raw_url":"https://github.com/apache/openjpa/raw/44e8ae25cfda3c7f0934c96cba6121fc270434a1/openjpa-integration/validation/src/test/java/org/apache/openjpa/integration/validation/TestTraversableResolver.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-integration/validation/src/test/java/org/apache/openjpa/integration/validation/TestTraversableResolver.java?ref=44e8ae25cfda3c7f0934c96cba6121fc270434a1","patch":"@@ -236,6 +236,14 @@ private void createBook(int id, String title, int pages) {\n         } catch (ClassNotFoundException e) {\n             log.trace(\"getLeafNodeFromPath: Did not find org.hibernate.validator.engine.PathImpl\");\n         }\n+        if (PathImpl == null) {\n+            try {\n+                PathImpl = Class.forName(\"org.apache.bval.jsr303.util.PathImpl\",\n+                    true, AccessController.doPrivileged(J2DoPrivHelper.getContextClassLoaderAction()));\n+            } catch (ClassNotFoundException e) {\n+                log.trace(\"getLeafNodeFromPath: Did not find org.apache.bval.jsr303.util.PathImpl\");\n+            }\n+        }\n         if (PathImpl == null) {\n             try {\n                 PathImpl = Class.forName(\"com.agimatec.validation.jsr303.util.PathImpl\",\n@@ -244,7 +252,7 @@ private void createBook(int id, String title, int pages) {\n                 log.trace(\"getLeafNodeFromPath: Did not find com.agimatec.validation.jsr303.util.PathImpl\");\n             }\n         }\n-        assertNotNull(PathImpl);\n+        assertNotNull(\"Could not load a Bean Validation provider specific PathImpl\", PathImpl);\n         try {\n             Method createPathFromString = PathImpl.getMethod(\"createPathFromString\", String.class);\n             assertNotNull(createPathFromString);"}]}

