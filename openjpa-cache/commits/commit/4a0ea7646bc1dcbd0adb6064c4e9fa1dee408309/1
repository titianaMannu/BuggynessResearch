{"sha":"4a0ea7646bc1dcbd0adb6064c4e9fa1dee408309","node_id":"MDY6Q29tbWl0MjA2MzY0OjRhMGVhNzY0NmJjMWRjYmQwYWRiNjA2NGM0ZTlmYTFkZWU0MDgzMDk=","commit":{"author":{"name":"Pinaki Poddar","email":"ppoddar@apache.org","date":"2007-01-23T23:06:29Z"},"committer":{"name":"Pinaki Poddar","email":"ppoddar@apache.org","date":"2007-01-23T23:06:29Z"},"message":"TCP RemoteCommitProviders deserializes by input streams that are smart in resolving classes.\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/openjpa/trunk@499179 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"1a45d6bf62507d325a788d64c28f7293f13caf34","url":"https://api.github.com/repos/apache/openjpa/git/trees/1a45d6bf62507d325a788d64c28f7293f13caf34"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/4a0ea7646bc1dcbd0adb6064c4e9fa1dee408309","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/4a0ea7646bc1dcbd0adb6064c4e9fa1dee408309","html_url":"https://github.com/apache/openjpa/commit/4a0ea7646bc1dcbd0adb6064c4e9fa1dee408309","comments_url":"https://api.github.com/repos/apache/openjpa/commits/4a0ea7646bc1dcbd0adb6064c4e9fa1dee408309/comments","author":null,"committer":null,"parents":[{"sha":"81c9a795ca2d6134120a82d73e60493ab48ed787","url":"https://api.github.com/repos/apache/openjpa/commits/81c9a795ca2d6134120a82d73e60493ab48ed787","html_url":"https://github.com/apache/openjpa/commit/81c9a795ca2d6134120a82d73e60493ab48ed787"}],"stats":{"total":10,"additions":6,"deletions":4},"files":[{"sha":"921fb2a4e677445693949a4f9c744fec5496311d","filename":"openjpa-kernel/src/main/java/org/apache/openjpa/event/TCPRemoteCommitProvider.java","status":"modified","additions":3,"deletions":1,"changes":4,"blob_url":"https://github.com/apache/openjpa/blob/4a0ea7646bc1dcbd0adb6064c4e9fa1dee408309/openjpa-kernel/src/main/java/org/apache/openjpa/event/TCPRemoteCommitProvider.java","raw_url":"https://github.com/apache/openjpa/raw/4a0ea7646bc1dcbd0adb6064c4e9fa1dee408309/openjpa-kernel/src/main/java/org/apache/openjpa/event/TCPRemoteCommitProvider.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/java/org/apache/openjpa/event/TCPRemoteCommitProvider.java?ref=4a0ea7646bc1dcbd0adb6064c4e9fa1dee408309","patch":"@@ -45,6 +45,7 @@\n import org.apache.openjpa.lib.util.Localizer;\n import org.apache.openjpa.util.GeneralException;\n import org.apache.openjpa.util.InternalException;\n+import org.apache.openjpa.util.Serialization;\n import org.apache.openjpa.lib.util.concurrent.ReentrantLock;\n \n import serp.util.Strings;\n@@ -660,7 +661,8 @@ private void handle(InputStream in)\n                 throws IOException, ClassNotFoundException,\n                 OptionalDataException {\n                 // This will block waiting for the next\n-                ObjectInputStream ois = new ObjectInputStream(in);\n+                ObjectInputStream ois = \n+                    new Serialization.ClassResolvingObjectInputStream(in);\n \n                 long protocolVersion = ois.readLong();\n                 if (protocolVersion != PROTOCOL_VERSION) {"},{"sha":"ba34114b48887be206151870d1103c8dfd367c95","filename":"openjpa-kernel/src/main/java/org/apache/openjpa/util/Serialization.java","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/apache/openjpa/blob/4a0ea7646bc1dcbd0adb6064c4e9fa1dee408309/openjpa-kernel/src/main/java/org/apache/openjpa/util/Serialization.java","raw_url":"https://github.com/apache/openjpa/raw/4a0ea7646bc1dcbd0adb6064c4e9fa1dee408309/openjpa-kernel/src/main/java/org/apache/openjpa/util/Serialization.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/java/org/apache/openjpa/util/Serialization.java?ref=4a0ea7646bc1dcbd0adb6064c4e9fa1dee408309","patch":"@@ -86,7 +86,7 @@ public static Object deserialize(InputStream in, StoreContext ctx) {\n     /**\n      * Object output stream that replaces persistent objects with their oids.\n      */\n-    private static class PersistentObjectOutputStream\n+    public static class PersistentObjectOutputStream\n         extends ObjectOutputStream {\n \n         private StoreContext _ctx;\n@@ -108,7 +108,7 @@ protected Object replaceObject(Object obj) {\n         }\n     }\n \n-    private static class ClassResolvingObjectInputStream\n+    public static class ClassResolvingObjectInputStream\n         extends ObjectInputStream {\n \n         public ClassResolvingObjectInputStream(InputStream delegate)\n@@ -134,7 +134,7 @@ protected void addContextClassLoaders(MultiClassLoader loader) {\n     /**\n      * Object input stream that replaces oids with their objects.\n      */\n-    private static class PersistentObjectInputStream\n+    public static class PersistentObjectInputStream\n         extends ClassResolvingObjectInputStream {\n \n         private final StoreContext _ctx;"}]}

