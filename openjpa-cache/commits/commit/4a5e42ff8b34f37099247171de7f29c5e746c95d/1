{"sha":"4a5e42ff8b34f37099247171de7f29c5e746c95d","node_id":"MDY6Q29tbWl0MjA2MzY0OjRhNWU0MmZmOGIzNGYzNzA5OTI0NzE3MWRlN2YyOWM1ZTc0NmM5NWQ=","commit":{"author":{"name":"Marc Prud'hommeaux","email":"mprudhom@apache.org","date":"2007-01-18T23:21:44Z"},"committer":{"name":"Marc Prud'hommeaux","email":"mprudhom@apache.org","date":"2007-01-18T23:21:44Z"},"message":"Guard for null in Class.getClassLoader().\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/openjpa/trunk@497635 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"86bb86ececa44b00f96dc97d1feb1a49485b5be7","url":"https://api.github.com/repos/apache/openjpa/git/trees/86bb86ececa44b00f96dc97d1feb1a49485b5be7"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/4a5e42ff8b34f37099247171de7f29c5e746c95d","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/4a5e42ff8b34f37099247171de7f29c5e746c95d","html_url":"https://github.com/apache/openjpa/commit/4a5e42ff8b34f37099247171de7f29c5e746c95d","comments_url":"https://api.github.com/repos/apache/openjpa/commits/4a5e42ff8b34f37099247171de7f29c5e746c95d/comments","author":null,"committer":null,"parents":[{"sha":"e2665ce5dd6e60ba7c2c6e8b4cb310461e87d66c","url":"https://api.github.com/repos/apache/openjpa/commits/e2665ce5dd6e60ba7c2c6e8b4cb310461e87d66c","html_url":"https://github.com/apache/openjpa/commit/e2665ce5dd6e60ba7c2c6e8b4cb310461e87d66c"}],"stats":{"total":9,"additions":7,"deletions":2},"files":[{"sha":"2735f3e96a03b459c32f534044760b1d7633ac4e","filename":"openjpa-persistence/src/main/java/org/apache/openjpa/persistence/AnnotationPersistenceMetaDataParser.java","status":"modified","additions":7,"deletions":2,"changes":9,"blob_url":"https://github.com/apache/openjpa/blob/4a5e42ff8b34f37099247171de7f29c5e746c95d/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/AnnotationPersistenceMetaDataParser.java","raw_url":"https://github.com/apache/openjpa/raw/4a5e42ff8b34f37099247171de7f29c5e746c95d/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/AnnotationPersistenceMetaDataParser.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/AnnotationPersistenceMetaDataParser.java?ref=4a5e42ff8b34f37099247171de7f29c5e746c95d","patch":"@@ -656,9 +656,14 @@ protected File getSourceFile() {\n             cls = cls.getEnclosingClass();\n \n         String rsrc = StringUtils.replace(cls.getName(), \".\", \"/\");\n-        URL url = cls.getClassLoader().getResource(rsrc + \".java\");\n+        ClassLoader loader = cls.getClassLoader();\n+        if (loader == null)\n+            loader = ClassLoader.getSystemClassLoader();\n+        if (loader == null)\n+            return null;\n+        URL url = loader.getResource(rsrc + \".java\");\n         if (url == null) {\n-            url = cls.getClassLoader().getResource(rsrc + \".class\");\n+            url = loader.getResource(rsrc + \".class\");\n             if (url == null)\n                 return null;\n         }"}]}

