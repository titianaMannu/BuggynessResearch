{"sha":"4bacdf4c3c01b0a391266e32ec41f1401ff332e4","node_id":"MDY6Q29tbWl0MjA2MzY0OjRiYWNkZjRjM2MwMWIwYTM5MTI2NmUzMmVjNDFmMTQwMWZmMzMyZTQ=","commit":{"author":{"name":"Richard G. Curtis","email":"curtisr7@apache.org","date":"2009-12-08T15:48:31Z"},"committer":{"name":"Richard G. Curtis","email":"curtisr7@apache.org","date":"2009-12-08T15:48:31Z"},"message":"OPENJPA-1415: Suppress batched OLE messages.\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/branches/1.2.x@888449 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"4d8857dd23a883ed51a9cdbeb2b7ab5da79c9122","url":"https://api.github.com/repos/apache/openjpa/git/trees/4d8857dd23a883ed51a9cdbeb2b7ab5da79c9122"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/4bacdf4c3c01b0a391266e32ec41f1401ff332e4","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/4bacdf4c3c01b0a391266e32ec41f1401ff332e4","html_url":"https://github.com/apache/openjpa/commit/4bacdf4c3c01b0a391266e32ec41f1401ff332e4","comments_url":"https://api.github.com/repos/apache/openjpa/commits/4bacdf4c3c01b0a391266e32ec41f1401ff332e4/comments","author":null,"committer":null,"parents":[{"sha":"e5ddb3de5d61b297f0a2df09563cd6bac3f5ad55","url":"https://api.github.com/repos/apache/openjpa/commits/e5ddb3de5d61b297f0a2df09563cd6bac3f5ad55","html_url":"https://github.com/apache/openjpa/commit/e5ddb3de5d61b297f0a2df09563cd6bac3f5ad55"}],"stats":{"total":30,"additions":27,"deletions":3},"files":[{"sha":"f441052d283eee2c717e413f068ea50f57ba0eab","filename":"openjpa-kernel/src/main/java/org/apache/openjpa/kernel/BrokerImpl.java","status":"modified","additions":25,"deletions":2,"changes":27,"blob_url":"https://github.com/apache/openjpa/blob/4bacdf4c3c01b0a391266e32ec41f1401ff332e4/openjpa-kernel/src/main/java/org/apache/openjpa/kernel/BrokerImpl.java","raw_url":"https://github.com/apache/openjpa/raw/4bacdf4c3c01b0a391266e32ec41f1401ff332e4/openjpa-kernel/src/main/java/org/apache/openjpa/kernel/BrokerImpl.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/java/org/apache/openjpa/kernel/BrokerImpl.java?ref=4bacdf4c3c01b0a391266e32ec41f1401ff332e4","patch":"@@ -220,6 +220,7 @@\n     private int _detachState = DETACH_LOADED;\n     private boolean _detachedNew = true;\n     private boolean _orderDirty = false;\n+    private boolean _suppressBatchOLELogging = false;\n \n     // status\n     private int _flags = 0;\n@@ -759,6 +760,23 @@ private void fireTransactionEvent(TransactionEvent trans) {\n                 _transCallbackMode);\n     }\n \n+    /**\n+     * Set whether this Broker will generate verbose optimistic lock exceptions when batching\n+     * operations. Defaults to true.\n+     * \n+     * @param b\n+     */\n+    public void setSuppressBatchOLELogging(boolean b) {\n+        _suppressBatchOLELogging = b;\n+    }\n+    \n+    /**\n+     * Return whether this Broker will generate verbose optimistic lock exceptions when batching\n+     * operations.\n+     */\n+    public boolean getSuppressBatchOLELogging() {\n+        return _suppressBatchOLELogging;\n+    }\n     ///////////\n     // Lookups\n     ///////////\n@@ -2157,8 +2175,13 @@ private OpenJPAException newFlushException(Collection exceps) {\n                     failed.add(f);\n             }\n         }\n-        if (opt && !failed.isEmpty())\n-            return new OptimisticException(failed, t);\n+        if (opt && !failed.isEmpty()) {\n+            if(_suppressBatchOLELogging == true){\n+                return new OptimisticException(_loc.get(\"broker-suppressing-exceptions\",t.length));\n+            }else{\n+                return new OptimisticException(failed, t);\n+            }\n+        }\n         if (opt)\n             return new OptimisticException(t);\n         return new StoreException(_loc.get(\"rolled-back\"))."},{"sha":"a4d439c7e2b13c526198ae5a16aed6c5e64982fa","filename":"openjpa-kernel/src/main/resources/org/apache/openjpa/kernel/localizer.properties","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/apache/openjpa/blob/4bacdf4c3c01b0a391266e32ec41f1401ff332e4/openjpa-kernel/src/main/resources/org/apache/openjpa/kernel/localizer.properties","raw_url":"https://github.com/apache/openjpa/raw/4bacdf4c3c01b0a391266e32ec41f1401ff332e4/openjpa-kernel/src/main/resources/org/apache/openjpa/kernel/localizer.properties","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/resources/org/apache/openjpa/kernel/localizer.properties?ref=4bacdf4c3c01b0a391266e32ec41f1401ff332e4","patch":"@@ -399,4 +399,5 @@ cant-serialize-pessimistic-broker: Serialization not allowed for brokers with \\\n cant-serialize-connected-broker: Serialization not allowed for brokers with \\\n     an active connection to the database.\n no-interface-metadata: No metadata was found for managed interface {0}.\n-fetch-configuration-stack-empty: Fetch configuration stack is empty.\n\\ No newline at end of file\n+fetch-configuration-stack-empty: Fetch configuration stack is empty.\n+broker-suppressing-exceptions: Suppressing \"{0}\" exceptions."}]}

