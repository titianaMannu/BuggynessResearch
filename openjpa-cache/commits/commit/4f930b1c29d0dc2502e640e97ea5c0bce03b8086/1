{"sha":"4f930b1c29d0dc2502e640e97ea5c0bce03b8086","node_id":"MDY6Q29tbWl0MjA2MzY0OjRmOTMwYjFjMjlkMGRjMjUwMmU2NDBlOTdlYTVjMGJjZTAzYjgwODY=","commit":{"author":{"name":"Albert Lee","email":"allee8285@apache.org","date":"2012-08-08T18:02:44Z"},"committer":{"name":"Albert Lee","email":"allee8285@apache.org","date":"2012-08-08T18:02:44Z"},"message":"OPENJPA-428 - Remove Id property from remaining map in Configurations\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@1370866 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"6e7e2bd243d43984039b2ce2bf7a5f97c6b80744","url":"https://api.github.com/repos/apache/openjpa/git/trees/6e7e2bd243d43984039b2ce2bf7a5f97c6b80744"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/4f930b1c29d0dc2502e640e97ea5c0bce03b8086","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/4f930b1c29d0dc2502e640e97ea5c0bce03b8086","html_url":"https://github.com/apache/openjpa/commit/4f930b1c29d0dc2502e640e97ea5c0bce03b8086","comments_url":"https://api.github.com/repos/apache/openjpa/commits/4f930b1c29d0dc2502e640e97ea5c0bce03b8086/comments","author":null,"committer":null,"parents":[{"sha":"3e787f7fe35c262388a4ac10399fd6e76a758de5","url":"https://api.github.com/repos/apache/openjpa/commits/3e787f7fe35c262388a4ac10399fd6e76a758de5","html_url":"https://github.com/apache/openjpa/commit/3e787f7fe35c262388a4ac10399fd6e76a758de5"}],"stats":{"total":95,"additions":91,"deletions":4},"files":[{"sha":"8a0008b0bca5d7a3379f7957f700d64deaccff50","filename":"openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/ConfigurationImpl.java","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/apache/openjpa/blob/4f930b1c29d0dc2502e640e97ea5c0bce03b8086/openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/ConfigurationImpl.java","raw_url":"https://github.com/apache/openjpa/raw/4f930b1c29d0dc2502e640e97ea5c0bce03b8086/openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/ConfigurationImpl.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/ConfigurationImpl.java?ref=4f930b1c29d0dc2502e640e97ea5c0bce03b8086","patch":"@@ -665,6 +665,7 @@ else if (map instanceof Properties)\n         // <prefix>.properties System property; remove that property so we\n         // we don't warn about it\n         Configurations.removeProperty(\"properties\", remaining);\n+        Configurations.removeProperty(\"Id\", remaining, map);\n \n         // now warn if there are any remaining properties that there\n         // is an unhandled prop, and remove the unknown properties"},{"sha":"2d2557b4b1da690cf55443b6a8c0249426e355a3","filename":"openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/Configurations.java","status":"modified","additions":10,"deletions":4,"changes":14,"blob_url":"https://github.com/apache/openjpa/blob/4f930b1c29d0dc2502e640e97ea5c0bce03b8086/openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/Configurations.java","raw_url":"https://github.com/apache/openjpa/raw/4f930b1c29d0dc2502e640e97ea5c0bce03b8086/openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/Configurations.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/Configurations.java?ref=4f930b1c29d0dc2502e640e97ea5c0bce03b8086","patch":"@@ -693,10 +693,16 @@ public static Object getProperty(String partialKey, Map m) {\n     public static Object removeProperty(String partialKey, Map props) {\n         if (partialKey == null || props == null || props.isEmpty())\n             return null;\n- \tif (containsProperty(partialKey, props))\n-\t    return props.remove(ProductDerivations.getConfigurationKey(partialKey, props));\n-\telse \n-\t    return null;\n+        if (containsProperty(partialKey, props))\n+            return props.remove(ProductDerivations.getConfigurationKey(partialKey, props));\n+        else \n+            return null;\n+    }\n+\n+    public static void removeProperty(String partialKey, Map<?,?> remaining, Map<?,?> props) {\n+        if (removeProperty(partialKey, remaining) != null) {\n+            removeProperty(partialKey, props);\n+        }\n     }\n \n     /**"},{"sha":"f9349afae4a4e79f000bcb48232abd6e33787d90","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/Issue428Entity.java","status":"added","additions":44,"deletions":0,"changes":44,"blob_url":"https://github.com/apache/openjpa/blob/4f930b1c29d0dc2502e640e97ea5c0bce03b8086/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/Issue428Entity.java","raw_url":"https://github.com/apache/openjpa/raw/4f930b1c29d0dc2502e640e97ea5c0bce03b8086/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/Issue428Entity.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/Issue428Entity.java?ref=4f930b1c29d0dc2502e640e97ea5c0bce03b8086","patch":"@@ -0,0 +1,44 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.openjpa.persistence;\n+\n+import javax.persistence.Entity;\n+import javax.persistence.Table;\n+\n+@Entity\n+@Table(name = \"ISSUE_428_ENTITY\")\n+public class Issue428Entity {\n+    protected double doubleField;\n+\n+    public Issue428Entity() {\n+\n+    }\n+\n+    public Issue428Entity(double df) {\n+        doubleField = df;\n+    }\n+\n+    public double getDoubleField() {\n+        return doubleField;\n+    }\n+\n+    public void setDoubleField(double doubleField) {\n+        this.doubleField = doubleField;\n+    }\n+}"},{"sha":"093b760af1367bd5593481350f55a114cf7d3e85","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/TestOpenjpaIdNotRecognizedMessage.java","status":"added","additions":36,"deletions":0,"changes":36,"blob_url":"https://github.com/apache/openjpa/blob/4f930b1c29d0dc2502e640e97ea5c0bce03b8086/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/TestOpenjpaIdNotRecognizedMessage.java","raw_url":"https://github.com/apache/openjpa/raw/4f930b1c29d0dc2502e640e97ea5c0bce03b8086/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/TestOpenjpaIdNotRecognizedMessage.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/TestOpenjpaIdNotRecognizedMessage.java?ref=4f930b1c29d0dc2502e640e97ea5c0bce03b8086","patch":"@@ -0,0 +1,36 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.openjpa.persistence;\n+\n+import org.apache.openjpa.persistence.test.SingleEMFTestCase;\n+\n+public class TestOpenjpaIdNotRecognizedMessage extends SingleEMFTestCase {\n+    \n+    public void setUp() {\n+        super.setUp(CLEAR_TABLES, Issue428Entity.class);\n+    }\n+\n+    /**\n+     * Test to illustrate the existing '\"openjpa.Id\" was not recognized' message in the trace,\n+     *  using Issue428Entity which does not have an annotated @Id field.\n+     */\n+    public void test428() {\n+        emf.createEntityManager().close();\n+    }\n+}"}]}

