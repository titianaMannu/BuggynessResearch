{"sha":"52a0f630978ee7687057e5eda128f67233a98939","node_id":"MDY6Q29tbWl0MjA2MzY0OjUyYTBmNjMwOTc4ZWU3Njg3MDU3ZTVlZGExMjhmNjcyMzNhOTg5Mzk=","commit":{"author":{"name":"Michael Dick","email":"mikedd@apache.org","date":"2008-09-08T21:19:55Z"},"committer":{"name":"Michael Dick","email":"mikedd@apache.org","date":"2008-09-08T21:19:55Z"},"message":"OPENJPA-695 adding a profile that uploads the latest zip files, manual and javadoc to openjpa.apache.org/builds/latest.\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@693275 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"ed2bab10e927fe9dc94e0a26bf6f67678e6ecbb0","url":"https://api.github.com/repos/apache/openjpa/git/trees/ed2bab10e927fe9dc94e0a26bf6f67678e6ecbb0"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/52a0f630978ee7687057e5eda128f67233a98939","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/52a0f630978ee7687057e5eda128f67233a98939","html_url":"https://github.com/apache/openjpa/commit/52a0f630978ee7687057e5eda128f67233a98939","comments_url":"https://api.github.com/repos/apache/openjpa/commits/52a0f630978ee7687057e5eda128f67233a98939/comments","author":{"login":"mikedd","id":669432,"node_id":"MDQ6VXNlcjY2OTQzMg==","avatar_url":"https://avatars.githubusercontent.com/u/669432?v=4","gravatar_id":"","url":"https://api.github.com/users/mikedd","html_url":"https://github.com/mikedd","followers_url":"https://api.github.com/users/mikedd/followers","following_url":"https://api.github.com/users/mikedd/following{/other_user}","gists_url":"https://api.github.com/users/mikedd/gists{/gist_id}","starred_url":"https://api.github.com/users/mikedd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikedd/subscriptions","organizations_url":"https://api.github.com/users/mikedd/orgs","repos_url":"https://api.github.com/users/mikedd/repos","events_url":"https://api.github.com/users/mikedd/events{/privacy}","received_events_url":"https://api.github.com/users/mikedd/received_events","type":"User","site_admin":false},"committer":{"login":"mikedd","id":669432,"node_id":"MDQ6VXNlcjY2OTQzMg==","avatar_url":"https://avatars.githubusercontent.com/u/669432?v=4","gravatar_id":"","url":"https://api.github.com/users/mikedd","html_url":"https://github.com/mikedd","followers_url":"https://api.github.com/users/mikedd/followers","following_url":"https://api.github.com/users/mikedd/following{/other_user}","gists_url":"https://api.github.com/users/mikedd/gists{/gist_id}","starred_url":"https://api.github.com/users/mikedd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikedd/subscriptions","organizations_url":"https://api.github.com/users/mikedd/orgs","repos_url":"https://api.github.com/users/mikedd/repos","events_url":"https://api.github.com/users/mikedd/events{/privacy}","received_events_url":"https://api.github.com/users/mikedd/received_events","type":"User","site_admin":false},"parents":[{"sha":"079aa06091a9337a1f5087f904c332d590659c82","url":"https://api.github.com/repos/apache/openjpa/commits/079aa06091a9337a1f5087f904c332d590659c82","html_url":"https://github.com/apache/openjpa/commit/079aa06091a9337a1f5087f904c332d590659c82"}],"stats":{"total":55,"additions":55,"deletions":0},"files":[{"sha":"fd5f4fce232daeb89ea840a961b10b4889857253","filename":"openjpa-project/pom.xml","status":"modified","additions":55,"deletions":0,"changes":55,"blob_url":"https://github.com/apache/openjpa/blob/52a0f630978ee7687057e5eda128f67233a98939/openjpa-project/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/52a0f630978ee7687057e5eda128f67233a98939/openjpa-project/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-project/pom.xml?ref=52a0f630978ee7687057e5eda128f67233a98939","patch":"@@ -303,6 +303,61 @@\n                 </pluginRepository>\n             </pluginRepositories>\n         </profile>\n+        <profile>\n+            <id>nightly-upload</id>\n+            <build>\n+                <plugins>\n+                    <plugin>\n+                        <artifactId>maven-antrun-plugin</artifactId>\n+                        <executions>\n+                            <execution>\n+                                <phase>package</phase>\n+                                <configuration>\n+                                    <tasks> \n+                                        <mkdir dir=\"target/site/tempDocs\"/>\n+                                        <unzip dest=\"target/site/tempDocs\">\n+                                            <fileset dir=\"target/site/downloads\">\n+                                                <include name=\"*binary*.zip\"/>\n+                                            </fileset>\n+                                            <patternset>\n+                                                <include name=\"**/javadoc/**\"/>\n+                                                <include name=\"**/manual/**\"/>\n+                                            </patternset>\n+                                        </unzip>\n+                                        <chmod perm=\"g+rw\">\n+                                             <fileset dir=\"target/site/downloads\"/>\n+                                        </chmod>\n+                                        <!-- chmod returns 255 on the javadoc and manual dirs -->\n+                                        <exec executable=\"chmod\">\n+                                            <arg value=\"-R\"/>\n+                                            <arg value=\"g+w\"/>\n+                                            <arg value=\"target/site/tempDocs\"/>\n+                                        </exec>\n+                                        \n+                                        <!-- From the ant manual if we need to \n+                                             preserve permissions we should use exec\n+                                          -->\n+                                        <exec executable=\"scp\">\n+                                            <arg value=\"-rp\"/>\n+                                            <arg value=\"target/site/downloads\"/>\n+                                            <arg value=\"people.apache.org:/www/openjpa.apache.org/builds/latest/\"/>\n+                                        </exec>\n+                                        <exec executable=\"scp\">\n+                                            <arg value=\"-rp\"/>\n+                                            <arg value=\"target/site/tempDocs/apache-openjpa-${pom.version}/docs/\"/>\n+                                            <arg value=\"people.apache.org:/www/openjpa.apache.org/builds/latest/\"/>\n+                                        </exec>\n+                                    </tasks>\n+                                </configuration>\n+                                <goals>\n+                                    <goal>run</goal>\n+                                </goals>\n+                            </execution>\n+                        </executions>\n+                    </plugin>\n+                </plugins>\n+            </build>\n+        </profile>\n     </profiles>\n \n     <!-- need to explicitly list dependencies for assembly to work -->"}]}

