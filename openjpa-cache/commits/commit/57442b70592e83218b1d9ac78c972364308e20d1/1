{"sha":"57442b70592e83218b1d9ac78c972364308e20d1","node_id":"MDY6Q29tbWl0MjA2MzY0OjU3NDQyYjcwNTkyZTgzMjE4YjFkOWFjNzhjOTcyMzY0MzA4ZTIwZDE=","commit":{"author":{"name":"Patrick Linskey","email":"pcl@apache.org","date":"2007-04-05T23:57:44Z"},"committer":{"name":"Patrick Linskey","email":"pcl@apache.org","date":"2007-04-05T23:57:44Z"},"message":"HSQL doesn't support locking; short-circuiting tests that require pessimistic locking\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/openjpa/trunk@526005 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"7ad4c41e761771d2e28559da39dcb52ce85751ee","url":"https://api.github.com/repos/apache/openjpa/git/trees/7ad4c41e761771d2e28559da39dcb52ce85751ee"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/57442b70592e83218b1d9ac78c972364308e20d1","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/57442b70592e83218b1d9ac78c972364308e20d1","html_url":"https://github.com/apache/openjpa/commit/57442b70592e83218b1d9ac78c972364308e20d1","comments_url":"https://api.github.com/repos/apache/openjpa/commits/57442b70592e83218b1d9ac78c972364308e20d1/comments","author":null,"committer":null,"parents":[{"sha":"7f998f10f13ea84a66b5da405f0f11a990dca0c8","url":"https://api.github.com/repos/apache/openjpa/commits/7f998f10f13ea84a66b5da405f0f11a990dca0c8","html_url":"https://github.com/apache/openjpa/commit/7f998f10f13ea84a66b5da405f0f11a990dca0c8"}],"stats":{"total":20,"additions":19,"deletions":1},"files":[{"sha":"692ebcef4415d951863752806f8b7c145a5a74c2","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/jdbc/TestIsolationLevelOverride.java","status":"modified","additions":6,"deletions":0,"changes":6,"blob_url":"https://github.com/apache/openjpa/blob/57442b70592e83218b1d9ac78c972364308e20d1/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/jdbc/TestIsolationLevelOverride.java","raw_url":"https://github.com/apache/openjpa/raw/57442b70592e83218b1d9ac78c972364308e20d1/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/jdbc/TestIsolationLevelOverride.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/jdbc/TestIsolationLevelOverride.java?ref=57442b70592e83218b1d9ac78c972364308e20d1","patch":"@@ -27,6 +27,7 @@\n import org.apache.openjpa.persistence.OpenJPAEntityManager;\n import org.apache.openjpa.jdbc.sql.DBDictionary;\n import org.apache.openjpa.jdbc.sql.DB2Dictionary;\n+import org.apache.openjpa.jdbc.sql.HSQLDictionary;\n import org.apache.openjpa.jdbc.conf.JDBCConfiguration;\n \n public class TestIsolationLevelOverride\n@@ -43,6 +44,11 @@ public void testIsolationLevelOverride() {\n             OpenJPAPersistence.cast(emf.createEntityManager());\n         DBDictionary dict = ((JDBCConfiguration) em.getConfiguration())\n             .getDBDictionaryInstance();\n+\n+        // hsql doesn't support locking; circumvent the test\n+        if (dict instanceof HSQLDictionary)\n+            return;\n+\n         sql.clear();\n         try {\n             em.getTransaction().begin();"},{"sha":"d04d6011e09dad7e647ccb6774f4ed479be5cf1e","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/jdbc/TestSelectForUpdateOverride.java","status":"modified","additions":13,"deletions":1,"changes":14,"blob_url":"https://github.com/apache/openjpa/blob/57442b70592e83218b1d9ac78c972364308e20d1/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/jdbc/TestSelectForUpdateOverride.java","raw_url":"https://github.com/apache/openjpa/raw/57442b70592e83218b1d9ac78c972364308e20d1/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/jdbc/TestSelectForUpdateOverride.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/jdbc/TestSelectForUpdateOverride.java?ref=57442b70592e83218b1d9ac78c972364308e20d1","patch":"@@ -22,6 +22,10 @@\n import org.apache.openjpa.persistence.simple.AllFieldTypes;\n import org.apache.openjpa.persistence.OpenJPAPersistence;\n import org.apache.openjpa.persistence.FetchPlan;\n+import org.apache.openjpa.persistence.OpenJPAEntityManager;\n+import org.apache.openjpa.jdbc.sql.DBDictionary;\n+import org.apache.openjpa.jdbc.sql.HSQLDictionary;\n+import org.apache.openjpa.jdbc.conf.JDBCConfiguration;\n \n public class TestSelectForUpdateOverride\n     extends SQLListenerTestCase {\n@@ -34,7 +38,15 @@ public void setUp() {\n     }\n \n     public void testSelectForUpdateOverride() {\n-        EntityManager em = emf.createEntityManager();\n+        OpenJPAEntityManager em =\n+            OpenJPAPersistence.cast(emf.createEntityManager());\n+        DBDictionary dict = ((JDBCConfiguration) em.getConfiguration())\n+            .getDBDictionaryInstance();\n+\n+        // hsql doesn't support locking; circumvent the test\n+        if (dict instanceof HSQLDictionary)\n+            return;\n+\n         sql.clear();\n         try {\n             em.getTransaction().begin();"}]}

