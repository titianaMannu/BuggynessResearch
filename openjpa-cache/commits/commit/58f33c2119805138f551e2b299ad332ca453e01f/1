{"sha":"58f33c2119805138f551e2b299ad332ca453e01f","node_id":"MDY6Q29tbWl0MjA2MzY0OjU4ZjMzYzIxMTk4MDUxMzhmNTUxZTJiMjk5YWQzMzJjYTQ1M2UwMWY=","commit":{"author":{"name":"Richard G. Curtis","email":"curtisr7@apache.org","date":"2010-04-21T18:48:29Z"},"committer":{"name":"Richard G. Curtis","email":"curtisr7@apache.org","date":"2010-04-21T18:48:29Z"},"message":"OPENJPA-1604: Doc update.\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@936436 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"5d835a7fb89573db732e843d46d641355feee516","url":"https://api.github.com/repos/apache/openjpa/git/trees/5d835a7fb89573db732e843d46d641355feee516"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/58f33c2119805138f551e2b299ad332ca453e01f","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/58f33c2119805138f551e2b299ad332ca453e01f","html_url":"https://github.com/apache/openjpa/commit/58f33c2119805138f551e2b299ad332ca453e01f","comments_url":"https://api.github.com/repos/apache/openjpa/commits/58f33c2119805138f551e2b299ad332ca453e01f/comments","author":null,"committer":null,"parents":[{"sha":"ba9dedd4d4854b34f15c47242fad406c4c0939db","url":"https://api.github.com/repos/apache/openjpa/commits/ba9dedd4d4854b34f15c47242fad406c4c0939db","html_url":"https://github.com/apache/openjpa/commit/ba9dedd4d4854b34f15c47242fad406c4c0939db"}],"stats":{"total":18,"additions":18,"deletions":0},"files":[{"sha":"166d1728bfa6de28f19627e82fedc95d18be7773","filename":"openjpa-project/src/doc/manual/ref_guide_runtime.xml","status":"modified","additions":18,"deletions":0,"changes":18,"blob_url":"https://github.com/apache/openjpa/blob/58f33c2119805138f551e2b299ad332ca453e01f/openjpa-project/src/doc/manual/ref_guide_runtime.xml","raw_url":"https://github.com/apache/openjpa/raw/58f33c2119805138f551e2b299ad332ca453e01f/openjpa-project/src/doc/manual/ref_guide_runtime.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-project/src/doc/manual/ref_guide_runtime.xml?ref=58f33c2119805138f551e2b299ad332ca453e01f","patch":"@@ -936,6 +936,24 @@ state in question to circumvent the database limitations that prevent OpenJPA\n from issuing a locking SELECT in the first place.\n                     </para>\n                 </listitem>\n+                <listitem>\n+                    <para>\n+When using the pessimistic lock manager and named queries you will see the following\n+<literal>WARNING</literal> message logged if you do not specify a lockMode on the named query\n+or you explicitly set it to <literal>LockModeType.NONE</literal>. When using the pessimistic\n+lock manager a <literal>LockModeType.NONE</literal> will always be promoted to <literal>LockModeType.READ</literal>.\n+<programlisting>\n+WARN   [main] openjpa.MetaData - Encountered a read lock level less than LockModeType.READ when processing the NamedQuery annotation \"findEmployeeById\" in class \"org.apache.openjpa.persistence.lockmgr.LockEmployee\". Setting query lock level to LockModeType.READ.\n+</programlisting>\n+If you are using the pessimistic lock manager and you truly do want to set the lock mode to NONE for a\n+given query, you can use a fetch plan to do so.\n+<programlisting>\n+OpenJPAQuery q = em.createNamedQuery(\"findEmployeeById\"); \n+FetchPlan fp = q.getFetchPlan();\n+fp.setReadLockMode(LockModeType.NONE);\n+</programlisting>\n+                    </para>\n+                </listitem>                \n             </itemizedlist>\n         </section>\n     </section>"}]}

