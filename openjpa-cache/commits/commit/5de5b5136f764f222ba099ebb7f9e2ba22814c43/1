{"sha":"5de5b5136f764f222ba099ebb7f9e2ba22814c43","node_id":"MDY6Q29tbWl0MjA2MzY0OjVkZTViNTEzNmY3NjRmMjIyYmEwOTllYmI3ZjllMmJhMjI4MTRjNDM=","commit":{"author":{"name":"Jeremy Bauer","email":"jrbauer@apache.org","date":"2010-04-15T17:24:02Z"},"committer":{"name":"Jeremy Bauer","email":"jrbauer@apache.org","date":"2010-04-15T17:24:02Z"},"message":"OPENJPA-1605 Correct regression issue with table generation issue in schema generator.  Only the first table name returned in a generic DBMD query was used to populate the schema.  This broke the reverse mapping tool, which uses a generic query by default.\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@934493 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"cc5e92ad780986e3e015a42dc62761b0b07e242f","url":"https://api.github.com/repos/apache/openjpa/git/trees/cc5e92ad780986e3e015a42dc62761b0b07e242f"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/5de5b5136f764f222ba099ebb7f9e2ba22814c43","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/5de5b5136f764f222ba099ebb7f9e2ba22814c43","html_url":"https://github.com/apache/openjpa/commit/5de5b5136f764f222ba099ebb7f9e2ba22814c43","comments_url":"https://api.github.com/repos/apache/openjpa/commits/5de5b5136f764f222ba099ebb7f9e2ba22814c43/comments","author":null,"committer":null,"parents":[{"sha":"cdc597a26bf5bcfd44213e5d57752db1bd3feccd","url":"https://api.github.com/repos/apache/openjpa/commits/cdc597a26bf5bcfd44213e5d57752db1bd3feccd","html_url":"https://github.com/apache/openjpa/commit/cdc597a26bf5bcfd44213e5d57752db1bd3feccd"}],"stats":{"total":5,"additions":4,"deletions":1},"files":[{"sha":"dcdcfd636cd95e8d3824e077394d85a6237ef105","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/SchemaGenerator.java","status":"modified","additions":4,"deletions":1,"changes":5,"blob_url":"https://github.com/apache/openjpa/blob/5de5b5136f764f222ba099ebb7f9e2ba22814c43/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/SchemaGenerator.java","raw_url":"https://github.com/apache/openjpa/raw/5de5b5136f764f222ba099ebb7f9e2ba22814c43/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/SchemaGenerator.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/SchemaGenerator.java?ref=5de5b5136f764f222ba099ebb7f9e2ba22814c43","patch":"@@ -572,9 +572,12 @@ public void generateTables(DBIdentifier schemaName, DBIdentifier tableName,\n         Schema schema;\n         Table table;\n         DBIdentifier tableSchema = DBIdentifier.NULL;\n+        DBIdentifier baseTableName = (tableName == null) ? DBIdentifier.NULL : tableName.clone();\n         for (int i = 0; cols != null && i < cols.length; i++) {\n-            if (DBIdentifier.isNull(tableName) || tableName.equals(\"%\")) {\n+            if (DBIdentifier.isNull(baseTableName) || baseTableName.equals(\"%\")) {\n                 tableName = cols[i].getTableIdentifier();\n+            } else {\n+                tableName = baseTableName;\n             }\n             if (DBIdentifier.isNull(schemaName)) {\n                 tableSchema = DBIdentifier.trimToNull(cols[i].getSchemaIdentifier());"}]}

