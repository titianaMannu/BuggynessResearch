{"sha":"5f2d51e23e1bcc86dff63fe08ebdd51886b9fdb5","node_id":"MDY6Q29tbWl0MjA2MzY0OjVmMmQ1MWUyM2UxYmNjODZkZmY2M2ZlMDhlYmRkNTE4ODZiOWZkYjU=","commit":{"author":{"name":"Catalina Wei","email":"fancy@apache.org","date":"2010-07-07T18:37:29Z"},"committer":{"name":"Catalina Wei","email":"fancy@apache.org","date":"2010-07-07T18:37:29Z"},"message":"OPENJPA-1715: OpenJPA generates wrong SQL if a result variable that references an aggregate expression is used in ORDER BY clause\nfix testcase.\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/branches/2.0.x@961472 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"e9447e3e6ea0a7da092478258fc59aac9837344e","url":"https://api.github.com/repos/apache/openjpa/git/trees/e9447e3e6ea0a7da092478258fc59aac9837344e"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/5f2d51e23e1bcc86dff63fe08ebdd51886b9fdb5","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/5f2d51e23e1bcc86dff63fe08ebdd51886b9fdb5","html_url":"https://github.com/apache/openjpa/commit/5f2d51e23e1bcc86dff63fe08ebdd51886b9fdb5","comments_url":"https://api.github.com/repos/apache/openjpa/commits/5f2d51e23e1bcc86dff63fe08ebdd51886b9fdb5/comments","author":null,"committer":null,"parents":[{"sha":"d7a9cdf3de140aeca77164029fd98e433106660f","url":"https://api.github.com/repos/apache/openjpa/commits/d7a9cdf3de140aeca77164029fd98e433106660f","html_url":"https://github.com/apache/openjpa/commit/d7a9cdf3de140aeca77164029fd98e433106660f"}],"stats":{"total":6,"additions":5,"deletions":1},"files":[{"sha":"4373b1a6e7a4cb47975a2e515864c7d96701f1df","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/jpql/expressions/TestJPQLScalarExpressions.java","status":"modified","additions":5,"deletions":1,"changes":6,"blob_url":"https://github.com/apache/openjpa/blob/5f2d51e23e1bcc86dff63fe08ebdd51886b9fdb5/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/jpql/expressions/TestJPQLScalarExpressions.java","raw_url":"https://github.com/apache/openjpa/raw/5f2d51e23e1bcc86dff63fe08ebdd51886b9fdb5/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/jpql/expressions/TestJPQLScalarExpressions.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/jpql/expressions/TestJPQLScalarExpressions.java?ref=5f2d51e23e1bcc86dff63fe08ebdd51886b9fdb5","patch":"@@ -82,7 +82,11 @@ public void testAggregateResultVariable() {\n             query.setFirstResult(1);\n             query.setMaxResults(4);\n             List<Object[]> rs = query.getResultList();\n-            assertTrue((Long)((Object[]) rs.get(0))[1] > 0);\n+            Object val = ((Object[]) rs.get(0))[1];\n+            if (val instanceof Integer)\n+                assertTrue((Integer) val > 0);\n+            else if (val instanceof Long)\n+                assertTrue((Long) val > 0);\n         }\n     }\n "}]}

