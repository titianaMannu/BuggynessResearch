{"sha":"61cacd5df6a77aa7426dfa03546d9f89fa24a0fb","node_id":"MDY6Q29tbWl0MjA2MzY0OjYxY2FjZDVkZjZhNzdhYTc0MjZkZmEwMzU0NmQ5Zjg5ZmEyNGEwZmI=","commit":{"author":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2010-01-14T19:47:44Z"},"committer":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2010-01-14T19:47:44Z"},"message":"use exclude list to skip pluggability tests during second pass\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@899377 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"2196c29c4ac19884de9607dccdf3b9cb1b3567f4","url":"https://api.github.com/repos/apache/openjpa/git/trees/2196c29c4ac19884de9607dccdf3b9cb1b3567f4"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/61cacd5df6a77aa7426dfa03546d9f89fa24a0fb","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/61cacd5df6a77aa7426dfa03546d9f89fa24a0fb","html_url":"https://github.com/apache/openjpa/commit/61cacd5df6a77aa7426dfa03546d9f89fa24a0fb","comments_url":"https://api.github.com/repos/apache/openjpa/commits/61cacd5df6a77aa7426dfa03546d9f89fa24a0fb/comments","author":null,"committer":null,"parents":[{"sha":"4f6e43a7585d53decc9ae0703b33fee8a09be25c","url":"https://api.github.com/repos/apache/openjpa/commits/4f6e43a7585d53decc9ae0703b33fee8a09be25c","html_url":"https://github.com/apache/openjpa/commit/4f6e43a7585d53decc9ae0703b33fee8a09be25c"}],"stats":{"total":19,"additions":17,"deletions":2},"files":[{"sha":"5e4cb13f63755ac7fe04c9f05b89183794ed4414","filename":"openjpa-integration/tck/tck2.xml","status":"modified","additions":17,"deletions":2,"changes":19,"blob_url":"https://github.com/apache/openjpa/blob/61cacd5df6a77aa7426dfa03546d9f89fa24a0fb/openjpa-integration/tck/tck2.xml","raw_url":"https://github.com/apache/openjpa/raw/61cacd5df6a77aa7426dfa03546d9f89fa24a0fb/openjpa-integration/tck/tck2.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-integration/tck/tck2.xml?ref=61cacd5df6a77aa7426dfa03546d9f89fa24a0fb","patch":"@@ -66,6 +66,8 @@\n         <unzip overwrite=\"true\" src=\"${tck_patches.zip}\" dest=\"${tck.base}\" />\n         <copy overwrite=\"true\"\n             file=\"${tck.dir}/bin/ts.jte\" tofile=\"${tck.dir}/bin/ts.jte.orig\" />\n+        <copy overwrite=\"true\"\n+            file=\"${tck.dir}/bin/ts.jtx\" tofile=\"${tck.dir}/bin/ts.jtx.orig\" />\n         <!-- Pluggability tests using Toplink needs this dir created -->\n         <mkdir dir=\"${tck.dir}/domains/domain1/logs\" />\n     </target>\n@@ -282,10 +284,19 @@ databaseName=${db.name}\n             <param name=\"cp.property\" value=\"${OPENJPA_CLASSPATH}\" />\n         </antcall>\n \n-        <!-- HACK - Need to exclude Pluggability tests from a normal run,\n+        <!-- Need to exclude Pluggability tests from a normal run,\n             due to the need for Toplink.\n         -->\n-        <delete dir=\"${tck.dir}/src/com/sun/ts/tests/pluggability\" />\n+        <echo append=\"false\" file=\"${tck.dir}/bin/ts.jtx\">\n+\n+## exclude pluggability tests for normal OpenJPA runs\n+com/sun/ts/tests/pluggability/contracts/Client.java#createContainerEntityManagerFactory_from_standalone\n+com/sun/ts/tests/pluggability/contracts/Client.java#getManagedClassNames_from_standalone\n+com/sun/ts/tests/pluggability/contracts/Client.java#getPersistenceProviderClassName_from_standalone\n+com/sun/ts/tests/pluggability/contracts/Client.java#getPersistenceUnitName_from_standalone\n+com/sun/ts/tests/pluggability/contracts/Client.java#getTransactionType_from_standalone\n+\n+        </echo>\n \n         <!-- backup our updated ts.jte for later debugging -->\n         <copy overwrite=\"true\"\n@@ -330,6 +341,10 @@ databaseName=${db.name}\n         <copy overwrite=\"true\"\n             file=\"${tck.dir}/bin/ts.jte\" tofile=\"${tck.base}/ts.jte.pluggability\" />\n \n+        <!-- Restore any exclude file that was provided in the zip file -->\n+        <copy overwrite=\"true\"\n+            file=\"${tck.dir}/bin/ts.jtx.orig\" tofile=\"${tck.dir}/bin/ts.jtx\" />\n+\n         <!-- first initialize the database -->\n         <echo>Calling TCK initdb.xml</echo>\n         <tsant buildfile=\"${tck.dir}/bin/initdb.xml\" target=\"init.database\" />"}]}

