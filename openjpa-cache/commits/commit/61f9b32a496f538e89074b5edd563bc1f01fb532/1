{"sha":"61f9b32a496f538e89074b5edd563bc1f01fb532","node_id":"MDY6Q29tbWl0MjA2MzY0OjYxZjliMzJhNDk2ZjUzOGU4OTA3NGI1ZWRkNTYzYmMxZjAxZmI1MzI=","commit":{"author":{"name":"Pinaki Poddar","email":"ppoddar@apache.org","date":"2009-11-16T09:19:24Z"},"committer":{"name":"Pinaki Poddar","email":"ppoddar@apache.org","date":"2009-11-16T09:19:24Z"},"message":"OPENJPA-1387: Remove non-nullable constraint from Unique column.\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@880686 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"5b76141c64345d11a39e4e2b7b2d6eb59d8c0084","url":"https://api.github.com/repos/apache/openjpa/git/trees/5b76141c64345d11a39e4e2b7b2d6eb59d8c0084"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/61f9b32a496f538e89074b5edd563bc1f01fb532","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/61f9b32a496f538e89074b5edd563bc1f01fb532","html_url":"https://github.com/apache/openjpa/commit/61f9b32a496f538e89074b5edd563bc1f01fb532","comments_url":"https://api.github.com/repos/apache/openjpa/commits/61f9b32a496f538e89074b5edd563bc1f01fb532/comments","author":null,"committer":null,"parents":[{"sha":"6cf1ca1f637adc27600a8b1722d0a9b7f65b31a0","url":"https://api.github.com/repos/apache/openjpa/commits/6cf1ca1f637adc27600a8b1722d0a9b7f65b31a0","html_url":"https://github.com/apache/openjpa/commit/6cf1ca1f637adc27600a8b1722d0a9b7f65b31a0"}],"stats":{"total":43,"additions":11,"deletions":32},"files":[{"sha":"d9e8c2ac61e6e191f59fa7d4523a0fa9b11fd992","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/Constraint.java","status":"modified","additions":2,"deletions":4,"changes":6,"blob_url":"https://github.com/apache/openjpa/blob/61f9b32a496f538e89074b5edd563bc1f01fb532/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/Constraint.java","raw_url":"https://github.com/apache/openjpa/raw/61f9b32a496f538e89074b5edd563bc1f01fb532/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/Constraint.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/Constraint.java?ref=61f9b32a496f538e89074b5edd563bc1f01fb532","patch":"@@ -24,6 +24,7 @@\n  *\n  * @author Abe White\n  */\n+@SuppressWarnings(\"serial\")\n public abstract class Constraint\n     extends ReferenceCounter {\n \n@@ -180,9 +181,6 @@ public void setDeferred(boolean deferred) {\n     public String toString() {\n         if (getName() != null)\n             return getName();\n-\n-        String name = getClass().getName();\n-        name = name.substring(name.lastIndexOf('.') + 1);\n-        return \"<\" + name.toLowerCase() + \">\";\n+        return \"<\" + getClass().getSimpleName().toLowerCase() + \">\";\n     }\n }"},{"sha":"69cc0624f34bc74b8a0556570cbc55ae2bc4fd06","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/LocalConstraint.java","status":"modified","additions":7,"deletions":8,"changes":15,"blob_url":"https://github.com/apache/openjpa/blob/61f9b32a496f538e89074b5edd563bc1f01fb532/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/LocalConstraint.java","raw_url":"https://github.com/apache/openjpa/raw/61f9b32a496f538e89074b5edd563bc1f01fb532/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/LocalConstraint.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/LocalConstraint.java?ref=61f9b32a496f538e89074b5edd563bc1f01fb532","patch":"@@ -21,7 +21,6 @@\n import java.util.ArrayList;\n import java.util.List;\n \n-import org.apache.commons.lang.ObjectUtils;\n import org.apache.openjpa.lib.util.Localizer;\n import org.apache.openjpa.util.InvalidStateException;\n \n@@ -32,13 +31,13 @@\n  *\n  * @author Abe White\n  */\n+@SuppressWarnings(\"serial\")\n public abstract class LocalConstraint\n     extends Constraint {\n \n-    private static final Localizer _loc = Localizer.forPackage\n-        (LocalConstraint.class);\n+    private static final Localizer _loc = Localizer.forPackage(LocalConstraint.class);\n \n-    private List _colList = null;\n+    private List<Column> _colList = null;\n     private Column[] _cols = null;\n \n     /**\n@@ -99,7 +98,7 @@ public void addColumn(Column col) {\n                 col == null ? null : getTable()));\n     \t\n         if (_colList == null)\n-            _colList = new ArrayList(3);\n+            _colList = new ArrayList<Column>(3);\n         else if (_colList.contains(col))\n             return;\n \n@@ -124,7 +123,7 @@ public boolean removeColumn(Column col) {\n     }\n \n     /**\n-     * Return true if the pk includes the given column.\n+     * Return true if this constraint includes the given column.\n      */\n     public boolean containsColumn(Column col) {\n         if (col == null || _colList == null)\n@@ -133,7 +132,7 @@ public boolean containsColumn(Column col) {\n     }\n \n     /**\n-     * Ref all columns in this constraint.\n+     * Reference all columns in this constraint.\n      */\n     public void refColumns() {\n         Column[] cols = getColumns();\n@@ -142,7 +141,7 @@ public void refColumns() {\n     }\n \n     /**\n-     * Deref all columns in this constraint.\n+     * Dereference all columns in this constraint.\n      */\n     public void derefColumns() {\n         Column[] cols = getColumns();"},{"sha":"12af3ed1c02c10ed63dcd9180e47f489fe789743","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/Unique.java","status":"modified","additions":2,"deletions":20,"changes":22,"blob_url":"https://github.com/apache/openjpa/blob/61f9b32a496f538e89074b5edd563bc1f01fb532/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/Unique.java","raw_url":"https://github.com/apache/openjpa/raw/61f9b32a496f538e89074b5edd563bc1f01fb532/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/Unique.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/Unique.java?ref=61f9b32a496f538e89074b5edd563bc1f01fb532","patch":"@@ -24,6 +24,7 @@\n  * @author Abe White\n  * @author Pinaki Poddar\n  */\n+@SuppressWarnings(\"serial\")\n public class Unique\n     extends LocalConstraint {\n \t\n@@ -46,26 +47,7 @@ public boolean isLogical() {\n     }\n     \n     /**\n-     * Adds the given column. \n-     * The added column is set to non-nullable because a unique constraint\n-     * on the database requires that its constituent columns are NOT NULL. \n-     * @see Column#setNotNull(boolean)\n-     */\n-    public void addColumn(Column col) {\n-    \tsuper.addColumn(col);\n-    \tcol.setNotNull(true);\n-    }\n-    \n-    /**\n-     * Set the name of the constraint. This method cannot be called if the\n-     * constraint already belongs to a table. \n-     */\n-    public void setName(String name) {\n-        super.setName(name);\n-    }\n-    \n-    /**\n-     * Return true if the structure of this primary key matches that of\n+     * Return true if the structure of this constraint matches that of\n      * the given one (same table, same columns).\n      */\n     public boolean equalsUnique(Unique unq) {"}]}

