{"sha":"6485137930cbfa27de554d5a1e6d75c8eff5529e","node_id":"MDY6Q29tbWl0MjA2MzY0OjY0ODUxMzc5MzBjYmZhMjdkZTU1NGQ1YTFlNmQ3NWM4ZWZmNTUyOWU=","commit":{"author":{"name":"Albert Lee","email":"allee8285@apache.org","date":"2009-09-23T16:14:35Z"},"committer":{"name":"Albert Lee","email":"allee8285@apache.org","date":"2009-09-23T16:14:35Z"},"message":"OPENJPA-1323 Enhanced to conform to the new spec requirement.\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@818153 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"0327a3492ba2416492b6687951999c30dd2746f7","url":"https://api.github.com/repos/apache/openjpa/git/trees/0327a3492ba2416492b6687951999c30dd2746f7"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/6485137930cbfa27de554d5a1e6d75c8eff5529e","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/6485137930cbfa27de554d5a1e6d75c8eff5529e","html_url":"https://github.com/apache/openjpa/commit/6485137930cbfa27de554d5a1e6d75c8eff5529e","comments_url":"https://api.github.com/repos/apache/openjpa/commits/6485137930cbfa27de554d5a1e6d75c8eff5529e/comments","author":null,"committer":null,"parents":[{"sha":"fbb7e1208aaa9c9462a00766e26e5147e4ab44f1","url":"https://api.github.com/repos/apache/openjpa/commits/fbb7e1208aaa9c9462a00766e26e5147e4ab44f1","html_url":"https://github.com/apache/openjpa/commit/fbb7e1208aaa9c9462a00766e26e5147e4ab44f1"}],"stats":{"total":6,"additions":4,"deletions":2},"files":[{"sha":"744851cdf3270c79d8595ff2763ba1c6783998d8","filename":"openjpa-persistence-locking/src/test/java/org/apache/openjpa/persistence/lockmgr/TestMixedLockManagerRefreshException.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/apache/openjpa/blob/6485137930cbfa27de554d5a1e6d75c8eff5529e/openjpa-persistence-locking/src/test/java/org/apache/openjpa/persistence/lockmgr/TestMixedLockManagerRefreshException.java","raw_url":"https://github.com/apache/openjpa/raw/6485137930cbfa27de554d5a1e6d75c8eff5529e/openjpa-persistence-locking/src/test/java/org/apache/openjpa/persistence/lockmgr/TestMixedLockManagerRefreshException.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-locking/src/test/java/org/apache/openjpa/persistence/lockmgr/TestMixedLockManagerRefreshException.java?ref=6485137930cbfa27de554d5a1e6d75c8eff5529e","patch":"@@ -82,7 +82,7 @@ public void testRefreshTxReqExceptions() {\n             {Act.TestEmployee, 1, Default_FirstName},\n             \n             {Act.RefreshWithLock, 1, LockModeType.NONE },\n-            {Act.TestException, 0, TransactionRequiredException.class },\n+            {Act.TestException, 0, null },\n             \n             {Act.RefreshWithLock, 1, LockModeType.READ },\n             {Act.TestException, 0, TransactionRequiredException.class },"},{"sha":"3673d2b3581da5cfb3750bb3c4ee170f1611603f","filename":"openjpa-persistence/src/main/java/org/apache/openjpa/persistence/EntityManagerImpl.java","status":"modified","additions":3,"deletions":1,"changes":4,"blob_url":"https://github.com/apache/openjpa/blob/6485137930cbfa27de554d5a1e6d75c8eff5529e/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/EntityManagerImpl.java","raw_url":"https://github.com/apache/openjpa/raw/6485137930cbfa27de554d5a1e6d75c8eff5529e/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/EntityManagerImpl.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/EntityManagerImpl.java?ref=6485137930cbfa27de554d5a1e6d75c8eff5529e","patch":"@@ -752,7 +752,9 @@ public void refresh(Object entity, LockModeType mode,\n         Map<String, Object> properties) {\n         assertNotCloseInvoked();\n         assertValidAttchedEntity(entity);\n-        _broker.assertActiveTransaction();\n+        if (mode != null && mode != LockModeType.NONE) {\n+            _broker.assertActiveTransaction();\n+        }\n         _broker.assertWriteOperation();\n \n         processLockProperties(pushFetchPlan(), mode, properties);"}]}

