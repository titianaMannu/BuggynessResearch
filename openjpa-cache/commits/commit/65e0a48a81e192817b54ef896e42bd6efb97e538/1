{"sha":"65e0a48a81e192817b54ef896e42bd6efb97e538","node_id":"MDY6Q29tbWl0MjA2MzY0OjY1ZTBhNDhhODFlMTkyODE3YjU0ZWY4OTZlNDJiZDZlZmI5N2U1Mzg=","commit":{"author":{"name":"Marc Prud'hommeaux","email":"mprudhom@apache.org","date":"2006-09-15T20:35:20Z"},"committer":{"name":"Marc Prud'hommeaux","email":"mprudhom@apache.org","date":"2006-09-15T20:35:20Z"},"message":"Workaround for HSQL bug in treating Long.MAX_VALUE as a double.\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/openjpa/trunk@446720 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"77760197ee01482d445a9afd8d1adeb0fe5d6244","url":"https://api.github.com/repos/apache/openjpa/git/trees/77760197ee01482d445a9afd8d1adeb0fe5d6244"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/65e0a48a81e192817b54ef896e42bd6efb97e538","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/65e0a48a81e192817b54ef896e42bd6efb97e538","html_url":"https://github.com/apache/openjpa/commit/65e0a48a81e192817b54ef896e42bd6efb97e538","comments_url":"https://api.github.com/repos/apache/openjpa/commits/65e0a48a81e192817b54ef896e42bd6efb97e538/comments","author":null,"committer":null,"parents":[{"sha":"b2e013390714dcd4506e99f9aacfe4abda09ce93","url":"https://api.github.com/repos/apache/openjpa/commits/b2e013390714dcd4506e99f9aacfe4abda09ce93","html_url":"https://github.com/apache/openjpa/commit/b2e013390714dcd4506e99f9aacfe4abda09ce93"}],"stats":{"total":12,"additions":12,"deletions":0},"files":[{"sha":"e5589e72a2f48e65fc7b04faad60f7550e08c4b3","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/HSQLDictionary.java","status":"modified","additions":12,"deletions":0,"changes":12,"blob_url":"https://github.com/apache/openjpa/blob/65e0a48a81e192817b54ef896e42bd6efb97e538/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/HSQLDictionary.java","raw_url":"https://github.com/apache/openjpa/raw/65e0a48a81e192817b54ef896e42bd6efb97e538/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/HSQLDictionary.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/HSQLDictionary.java?ref=65e0a48a81e192817b54ef896e42bd6efb97e538","patch":"@@ -214,6 +214,18 @@ protected SQLBuffer toOperation(String op, SQLBuffer selects,\n         return cols;\n     }\n \n+    public void setDouble(PreparedStatement stmnt, int idx, double val,\n+        Column col)\n+        throws SQLException {\n+        // HSQL has a bug where it cannot store a double if it is\n+        // exactly the same as Long.MAX_VALUE or MIN_VALUE\n+        if (val == Long.MAX_VALUE || val == Long.MIN_VALUE) {\n+            stmnt.setLong(idx, (long)val);\n+        } else  {\n+            super.setDouble(stmnt, idx, val, col);\n+        }\n+    }\n+\n     public void setBigDecimal(PreparedStatement stmnt, int idx, BigDecimal val,\n         Column col)\n         throws SQLException {"}]}

