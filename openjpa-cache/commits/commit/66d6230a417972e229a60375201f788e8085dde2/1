{"sha":"66d6230a417972e229a60375201f788e8085dde2","node_id":"MDY6Q29tbWl0MjA2MzY0OjY2ZDYyMzBhNDE3OTcyZTIyOWE2MDM3NTIwMWY3ODhlODA4NWRkZTI=","commit":{"author":{"name":"Patrick Linskey","email":"pcl@apache.org","date":"2008-02-29T18:41:16Z"},"committer":{"name":"Patrick Linskey","email":"pcl@apache.org","date":"2008-02-29T18:41:16Z"},"message":"Additional test case for enums in queries\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@632404 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"8f5cf54aba16ab812688c73c81d74b16a5bddb65","url":"https://api.github.com/repos/apache/openjpa/git/trees/8f5cf54aba16ab812688c73c81d74b16a5bddb65"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/66d6230a417972e229a60375201f788e8085dde2","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/66d6230a417972e229a60375201f788e8085dde2","html_url":"https://github.com/apache/openjpa/commit/66d6230a417972e229a60375201f788e8085dde2","comments_url":"https://api.github.com/repos/apache/openjpa/commits/66d6230a417972e229a60375201f788e8085dde2/comments","author":null,"committer":null,"parents":[{"sha":"177111b5598e4301c2d4e2de7c86b7e0a8acef88","url":"https://api.github.com/repos/apache/openjpa/commits/177111b5598e4301c2d4e2de7c86b7e0a8acef88","html_url":"https://github.com/apache/openjpa/commit/177111b5598e4301c2d4e2de7c86b7e0a8acef88"}],"stats":{"total":21,"additions":21,"deletions":0},"files":[{"sha":"d18f1762a82b43f1821fb88a79252d8b6784fa8b","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/fields/EnumFieldType.java","status":"modified","additions":11,"deletions":0,"changes":11,"blob_url":"https://github.com/apache/openjpa/blob/66d6230a417972e229a60375201f788e8085dde2/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/fields/EnumFieldType.java","raw_url":"https://github.com/apache/openjpa/raw/66d6230a417972e229a60375201f788e8085dde2/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/fields/EnumFieldType.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/fields/EnumFieldType.java?ref=66d6230a417972e229a60375201f788e8085dde2","patch":"@@ -18,11 +18,15 @@\n  */\r\n package org.apache.openjpa.persistence.fields;\r\n \r\n+import java.util.List;\r\n+import java.util.ArrayList;\r\n import javax.persistence.Id;\r\n import javax.persistence.GeneratedValue;\r\n import javax.persistence.Entity;\r\n \r\n import org.apache.openjpa.persistence.DetachedState;\r\n+import org.apache.openjpa.persistence.PersistentCollection;\r\n+import org.apache.openjpa.persistence.kernel.common.apps.PCDirectory;\r\n \r\n @Entity\r\n //@DetachedState(enabled = false) // ##### shouldn't need this\r\n@@ -33,6 +37,9 @@\n \r\n     private SampleEnum enumField;\r\n \r\n+    @PersistentCollection\r\n+    private List<SampleEnum> enumList = new ArrayList<SampleEnum>();\r\n+\r\n     // for OpenJPA\r\n     protected EnumFieldType() {\r\n     }\r\n@@ -49,4 +56,8 @@ public void setEnumField(SampleEnum enumField) {\n     public SampleEnum getEnumField() {\r\n         return enumField;\r\n     }\r\n+\r\n+    public List<SampleEnum> getEnumList() {\r\n+        return enumList;\r\n+    }\r\n }\r"},{"sha":"d86635b9397c2c6e2e34cb92f92c9105389aacf3","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/fields/TestEnumsInJPQL.java","status":"modified","additions":10,"deletions":0,"changes":10,"blob_url":"https://github.com/apache/openjpa/blob/66d6230a417972e229a60375201f788e8085dde2/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/fields/TestEnumsInJPQL.java","raw_url":"https://github.com/apache/openjpa/raw/66d6230a417972e229a60375201f788e8085dde2/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/fields/TestEnumsInJPQL.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/fields/TestEnumsInJPQL.java?ref=66d6230a417972e229a60375201f788e8085dde2","patch":"@@ -30,6 +30,7 @@ public void setUp() {\n \r\n         EnumFieldType o = new EnumFieldType();\r\n         o.setEnumField(SampleEnum.BAR);\r\n+        o.getEnumList().add(SampleEnum.FOO);\r\n \r\n         em.getTransaction().begin();\r\n         em.persist(o);\r\n@@ -115,4 +116,13 @@ public void testEnumParamInWhereInUpdate() {\n         em.getTransaction().commit();\r\n         postUpdateCheck(false);\r\n     }\r\n+\r\n+    public void testMemberOf() {\r\n+        assertEquals(Long.valueOf(1),\r\n+            em.createQuery(\"select count(o) from EnumFieldType o where \" +\r\n+                \"(:param member of o.enumList or :param2 member of o.enumList)\")\r\n+                .setParameter(\"param\", SampleEnum.FOO)\r\n+                .setParameter(\"param2\", SampleEnum.BAR)\r\n+                .getSingleResult());\r\n+    }\r\n }\n\\ No newline at end of file"}]}

