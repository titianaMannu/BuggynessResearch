{"sha":"67a73ee0eaa0a903730d5fb1d5f3ffa5f0ca5f68","node_id":"MDY6Q29tbWl0MjA2MzY0OjY3YTczZWUwZWFhMGE5MDM3MzBkNWZiMWQ1ZjNmZmE1ZjBjYTVmNjg=","commit":{"author":{"name":"Marc Prud'hommeaux","email":"mprudhom@apache.org","date":"2007-01-31T03:08:42Z"},"committer":{"name":"Marc Prud'hommeaux","email":"mprudhom@apache.org","date":"2007-01-31T03:08:42Z"},"message":"Changed docbook build mechanism to no longer manually download the docbook files from sourgeforge.net, and instead have the docbook files be a maven dependency, and access the dependency directly. This is mainly because they removed the old file from http://docbook.sourceforge.net/release/xsl that we were relying on, but has the side-benefit of removing one network-sensitive component from the release build probless. Unfortunately, this also means that we need to downgrade from version 1.69.1 to 1.67.2 of the docbook stylesheets (since the Maven repository doesn't yet have the newer versions), but that doesn't appear to have any visible effects.\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/openjpa/trunk@501704 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"52d687180a7b9cd0fd6870326ca68fcbc9d224a0","url":"https://api.github.com/repos/apache/openjpa/git/trees/52d687180a7b9cd0fd6870326ca68fcbc9d224a0"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/67a73ee0eaa0a903730d5fb1d5f3ffa5f0ca5f68","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/67a73ee0eaa0a903730d5fb1d5f3ffa5f0ca5f68","html_url":"https://github.com/apache/openjpa/commit/67a73ee0eaa0a903730d5fb1d5f3ffa5f0ca5f68","comments_url":"https://api.github.com/repos/apache/openjpa/commits/67a73ee0eaa0a903730d5fb1d5f3ffa5f0ca5f68/comments","author":null,"committer":null,"parents":[{"sha":"4cb55c62109ba9f062163e5f15e8f4a56e059ad6","url":"https://api.github.com/repos/apache/openjpa/commits/4cb55c62109ba9f062163e5f15e8f4a56e059ad6","html_url":"https://github.com/apache/openjpa/commit/4cb55c62109ba9f062163e5f15e8f4a56e059ad6"}],"stats":{"total":35,"additions":18,"deletions":17},"files":[{"sha":"ccca0aab770d84c3faad9fa85f7489bb9f89fe97","filename":"openjpa-project/pom.xml","status":"modified","additions":14,"deletions":13,"changes":27,"blob_url":"https://github.com/apache/openjpa/blob/67a73ee0eaa0a903730d5fb1d5f3ffa5f0ca5f68/openjpa-project/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/67a73ee0eaa0a903730d5fb1d5f3ffa5f0ca5f68/openjpa-project/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-project/pom.xml?ref=67a73ee0eaa0a903730d5fb1d5f3ffa5f0ca5f68","patch":"@@ -52,6 +52,9 @@\n         <openjpa.assembly.sourceSuffix>source</openjpa.assembly.sourceSuffix>\r\n         <openjpa.assembly.sourceBase>${openjpa.assembly.outputDirectory}/${openjpa.assembly.finalName}-${openjpa.assembly.sourceSuffix}</openjpa.assembly.sourceBase>\r\n         <openjpa.assembly.sourceFile>${openjpa.assembly.sourceBase}.zip</openjpa.assembly.sourceFile>\r\n+\r\n+        <docbook.version>1.67.2</docbook.version>\r\n+        <local.repository>${settings.localRepository}</local.repository>\r\n     </properties>\r\n \r\n     <build>\r\n@@ -150,20 +153,11 @@\n                                     <tasks>\r\n                                     <echo>Building docbook manual</echo>\r\n \r\n-                                    <!-- download stylesheets -->\r\n-                                    <property name=\"stylesheet\" value=\"1.69.1.tar.bz2\"/>\r\n-                                    <!--\r\n-                                    For some reason, this variable will not\r\n-                                    currectly evaluated at runtime: it \r\n-                                    creates a directory called\r\n-                                    '${stylesheet-dir}', rather than\r\n-                                    resolving the property\r\n-                                    <property name=\"stylesheet-dir\" value=\"${project.basedir}/target/stylesheets\"/>\r\n-                                    -->\r\n-\r\n                                     <mkdir dir=\"${project.basedir}/target/stylesheets\"/>\r\n-                                    <get src=\"http://docbook.sourceforge.net/release/xsl/${stylesheet}\" usetimestamp=\"true\" dest=\"${project.basedir}/target/stylesheets/${stylesheet}\"/>\r\n-                                    <untar src=\"${project.basedir}/target/stylesheets/${stylesheet}\" dest=\"${project.basedir}/target/stylesheets/\" compression=\"bzip2\" overwrite=\"false\"/>\r\n+                                    <available file=\"${local.repository}/docbook/docbook-xsl/${docbook.version}/docbook-xsl-${docbook.version}.zip\" property=\"docbook.available\"/>\r\n+                                    <fail unless=\"docbook.available\">Could not find docbook file: ${local.repository}/docbook/docbook-xsl/${docbook.version}/docbook-xsl-${docbook.version}.zip</fail>\r\n+\r\n+                                    <unzip src=\"${local.repository}/docbook/docbook-xsl/${docbook.version}/docbook-xsl-${docbook.version}.zip\" dest=\"${project.basedir}/target/stylesheets/\" overwrite=\"false\"/>\r\n \r\n \r\n                                     <style includes=\"**/manual.xml\"\r\n@@ -371,5 +365,12 @@\n             <version>5.1</version>\r\n             <scope>runtime</scope>\r\n         </dependency>\r\n+        <dependency>\r\n+            <groupId>docbook</groupId>\r\n+            <artifactId>docbook-xsl</artifactId>\r\n+            <version>${docbook.version}</version>\r\n+            <scope>runtime</scope>\r\n+            <type>zip</type>\r\n+        </dependency>\r\n     </dependencies>\r\n </project>\r"},{"sha":"b7f4349cec233d15ac94f61771ba9edee97ba7e9","filename":"openjpa-project/src/doc/manual/manual-xhtml-chunk.xsl","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/apache/openjpa/blob/67a73ee0eaa0a903730d5fb1d5f3ffa5f0ca5f68/openjpa-project/src/doc/manual/manual-xhtml-chunk.xsl","raw_url":"https://github.com/apache/openjpa/raw/67a73ee0eaa0a903730d5fb1d5f3ffa5f0ca5f68/openjpa-project/src/doc/manual/manual-xhtml-chunk.xsl","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-project/src/doc/manual/manual-xhtml-chunk.xsl?ref=67a73ee0eaa0a903730d5fb1d5f3ffa5f0ca5f68","patch":"@@ -17,9 +17,9 @@\n <xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\" version='1.0'>\n \n     <!-- docbook stylesheet customizations for openjpa manual -->\n-\t<!-- <xsl:import href=\"http://docbook.sourceforge.net/release/xsl/1.69.1/html/chunk.xsl\"/> -->\n+\t<!-- <xsl:import href=\"http://docbook.sourceforge.net/release/xsl/docbook-xsl-1.67.2/html/chunk.xsl\"/> -->\n     <!-- locally downloaded cache of stylesheets -->\n-\t<xsl:import href=\"../../../target/stylesheets/1.69.1/html/chunk.xsl\"/>\n+\t<xsl:import href=\"../../../target/stylesheets/docbook-xsl-1.67.2/html/chunk.xsl\"/>\n \n \n \t<xsl:param name=\"html.stylesheet\">css/docbook.css</xsl:param>"},{"sha":"c53f2d0394645ada00684c70544bb7c010edc447","filename":"openjpa-project/src/doc/manual/manual-xhtml.xsl","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/apache/openjpa/blob/67a73ee0eaa0a903730d5fb1d5f3ffa5f0ca5f68/openjpa-project/src/doc/manual/manual-xhtml.xsl","raw_url":"https://github.com/apache/openjpa/raw/67a73ee0eaa0a903730d5fb1d5f3ffa5f0ca5f68/openjpa-project/src/doc/manual/manual-xhtml.xsl","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-project/src/doc/manual/manual-xhtml.xsl?ref=67a73ee0eaa0a903730d5fb1d5f3ffa5f0ca5f68","patch":"@@ -17,9 +17,9 @@\n <xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\" version='1.0'>\n \n     <!-- docbook stylesheet customizations for openjpa manual -->\n-\t<!-- <xsl:import href=\"http://docbook.sourceforge.net/release/xsl/1.69.1/html/docbook.xsl\"/> -->\n+\t<!-- <xsl:import href=\"http://docbook.sourceforge.net/release/xsl/docbook-xsl-1.67.2/html/docbook.xsl\"/> -->\n     <!-- locally downloaded cache of stylesheets -->\n-\t<xsl:import href=\"../../../target/stylesheets/1.69.1/html/docbook.xsl\"/>\n+\t<xsl:import href=\"../../../target/stylesheets/docbook-xsl-1.67.2/html/docbook.xsl\"/>\n \n \t<xsl:param name=\"html.stylesheet\">css/docbook.css</xsl:param>\n "}]}

