{"sha":"6861dd1d02751ae55ef64dd51f6808d044dc560d","node_id":"MDY6Q29tbWl0MjA2MzY0OjY4NjFkZDFkMDI3NTFhZTU1ZWY2NGRkNTFmNjgwOGQwNDRkYzU2MGQ=","commit":{"author":{"name":"Mark Struberg","email":"struberg@apache.org","date":"2021-04-02T10:01:02Z"},"committer":{"name":"Mark Struberg","email":"struberg@apache.org","date":"2021-04-02T10:01:02Z"},"message":"OPENJPA-1303 differentiate btw COLUMN and COLUMN_DEF rules\n\nColumn names and Column definitions (the types, e.g. VARCHAR(20) ) have\ndifferent rules. We now can properly specify both of em.","tree":{"sha":"e3dafd9a8667bd8ee8289354ac80fb99d161a82b","url":"https://api.github.com/repos/apache/openjpa/git/trees/e3dafd9a8667bd8ee8289354ac80fb99d161a82b"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/6861dd1d02751ae55ef64dd51f6808d044dc560d","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/6861dd1d02751ae55ef64dd51f6808d044dc560d","html_url":"https://github.com/apache/openjpa/commit/6861dd1d02751ae55ef64dd51f6808d044dc560d","comments_url":"https://api.github.com/repos/apache/openjpa/commits/6861dd1d02751ae55ef64dd51f6808d044dc560d/comments","author":{"login":"struberg","id":79310,"node_id":"MDQ6VXNlcjc5MzEw","avatar_url":"https://avatars.githubusercontent.com/u/79310?v=4","gravatar_id":"","url":"https://api.github.com/users/struberg","html_url":"https://github.com/struberg","followers_url":"https://api.github.com/users/struberg/followers","following_url":"https://api.github.com/users/struberg/following{/other_user}","gists_url":"https://api.github.com/users/struberg/gists{/gist_id}","starred_url":"https://api.github.com/users/struberg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/struberg/subscriptions","organizations_url":"https://api.github.com/users/struberg/orgs","repos_url":"https://api.github.com/users/struberg/repos","events_url":"https://api.github.com/users/struberg/events{/privacy}","received_events_url":"https://api.github.com/users/struberg/received_events","type":"User","site_admin":false},"committer":{"login":"struberg","id":79310,"node_id":"MDQ6VXNlcjc5MzEw","avatar_url":"https://avatars.githubusercontent.com/u/79310?v=4","gravatar_id":"","url":"https://api.github.com/users/struberg","html_url":"https://github.com/struberg","followers_url":"https://api.github.com/users/struberg/followers","following_url":"https://api.github.com/users/struberg/following{/other_user}","gists_url":"https://api.github.com/users/struberg/gists{/gist_id}","starred_url":"https://api.github.com/users/struberg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/struberg/subscriptions","organizations_url":"https://api.github.com/users/struberg/orgs","repos_url":"https://api.github.com/users/struberg/repos","events_url":"https://api.github.com/users/struberg/events{/privacy}","received_events_url":"https://api.github.com/users/struberg/received_events","type":"User","site_admin":false},"parents":[{"sha":"8f96a5bd798c8bbdbc03bf5a9551b1da6ef68370","url":"https://api.github.com/repos/apache/openjpa/commits/8f96a5bd798c8bbdbc03bf5a9551b1da6ef68370","html_url":"https://github.com/apache/openjpa/commit/8f96a5bd798c8bbdbc03bf5a9551b1da6ef68370"}],"stats":{"total":55,"additions":50,"deletions":5},"files":[{"sha":"1e9a9e158781bbd01b49476d1e3023f7440b0921","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/identifier/ColumnDefIdentifierRule.java","status":"modified","additions":3,"deletions":2,"changes":5,"blob_url":"https://github.com/apache/openjpa/blob/6861dd1d02751ae55ef64dd51f6808d044dc560d/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/identifier/ColumnDefIdentifierRule.java","raw_url":"https://github.com/apache/openjpa/raw/6861dd1d02751ae55ef64dd51f6808d044dc560d/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/identifier/ColumnDefIdentifierRule.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/identifier/ColumnDefIdentifierRule.java?ref=6861dd1d02751ae55ef64dd51f6808d044dc560d","patch":"@@ -32,8 +32,9 @@\n  */\n public class ColumnDefIdentifierRule extends DBIdentifierRule {\n \n-    public ColumnDefIdentifierRule(Set<String> reservedWords) {\n-        super(DBIdentifierType.COLUMN, reservedWords);\n+    public ColumnDefIdentifierRule() {\n+        super();\n+        setName(DBIdentifierType.COLUMN_DEFINITION.toString());\n         // Disable auto delimiting of column definition.\n         setCanDelimit(false);\n     }"},{"sha":"cae84d2901290898214d74508e720735f7010376","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/identifier/ColumnIdentifierRule.java","status":"added","additions":35,"deletions":0,"changes":35,"blob_url":"https://github.com/apache/openjpa/blob/6861dd1d02751ae55ef64dd51f6808d044dc560d/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/identifier/ColumnIdentifierRule.java","raw_url":"https://github.com/apache/openjpa/raw/6861dd1d02751ae55ef64dd51f6808d044dc560d/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/identifier/ColumnIdentifierRule.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/identifier/ColumnIdentifierRule.java?ref=6861dd1d02751ae55ef64dd51f6808d044dc560d","patch":"@@ -0,0 +1,35 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.openjpa.jdbc.identifier;\n+\n+import java.util.Set;\n+\n+import org.apache.openjpa.jdbc.identifier.DBIdentifier.DBIdentifierType;\n+\n+/**\n+ * Default rule for column names.\n+ * Column names which are forbidden as column names will get detected properly.\n+ * Those reserved words might differ from the general reserved words.\n+ */\n+public class ColumnIdentifierRule extends DBIdentifierRule {\n+\n+    public ColumnIdentifierRule(Set<String> reservedWords) {\n+        super(DBIdentifierType.COLUMN, reservedWords);\n+    }\n+}"},{"sha":"05fd32bf6f3c939832b0b6d41cfe9e53718f15d7","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/identifier/DBIdentifier.java","status":"modified","additions":6,"deletions":0,"changes":6,"blob_url":"https://github.com/apache/openjpa/blob/6861dd1d02751ae55ef64dd51f6808d044dc560d/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/identifier/DBIdentifier.java","raw_url":"https://github.com/apache/openjpa/raw/6861dd1d02751ae55ef64dd51f6808d044dc560d/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/identifier/DBIdentifier.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/identifier/DBIdentifier.java?ref=6861dd1d02751ae55ef64dd51f6808d044dc560d","patch":"@@ -42,7 +42,13 @@\n         SCHEMA,\n         CATALOG,\n         DATABASE,\n+        /**\n+         * used for column names\n+         */\n         COLUMN,\n+        /**\n+         * used for column type definition\n+         */\n         COLUMN_DEFINITION,\n         SEQUENCE,\n         CONSTRAINT,"},{"sha":"e4ae5bf60a11d6f5e3029e10f04073692aac7902","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DBDictionary.java","status":"modified","additions":6,"deletions":3,"changes":9,"blob_url":"https://github.com/apache/openjpa/blob/6861dd1d02751ae55ef64dd51f6808d044dc560d/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DBDictionary.java","raw_url":"https://github.com/apache/openjpa/raw/6861dd1d02751ae55ef64dd51f6808d044dc560d/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DBDictionary.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DBDictionary.java?ref=6861dd1d02751ae55ef64dd51f6808d044dc560d","patch":"@@ -72,6 +72,7 @@\n \n import org.apache.openjpa.jdbc.conf.JDBCConfiguration;\n import org.apache.openjpa.jdbc.identifier.ColumnDefIdentifierRule;\n+import org.apache.openjpa.jdbc.identifier.ColumnIdentifierRule;\n import org.apache.openjpa.jdbc.identifier.DBIdentifier;\n import org.apache.openjpa.jdbc.identifier.DBIdentifier.DBIdentifierType;\n import org.apache.openjpa.jdbc.identifier.DBIdentifierRule;\n@@ -610,9 +611,11 @@ protected void configureNamingRules() {\n         // Disable delimiting of column definition.  DB platforms are very\n         // picky about delimiters in column definitions. Base column types\n         // do not require delimiters and will cause failures if delimited.\n-        DBIdentifierRule cdRule = new ColumnDefIdentifierRule(invalidColumnWordSet);\n-        cdRule.setCanDelimit(false);\n-        namingRules.put(cdRule.getName(), cdRule);\n+        DBIdentifierRule columnDefinitionNamingRule = new ColumnDefIdentifierRule();\n+        namingRules.put(columnDefinitionNamingRule.getName(), columnDefinitionNamingRule);\n+\n+        DBIdentifierRule columnNamingRule = new ColumnIdentifierRule(invalidColumnWordSet);\n+        namingRules.put(columnNamingRule.getName(), columnNamingRule);\n     }\n \n     //////////////////////"}]}

