{"sha":"68d9b38133fc0674a992b25a8521b82805f9024f","node_id":"MDY6Q29tbWl0MjA2MzY0OjY4ZDliMzgxMzNmYzA2NzRhOTkyYjI1YTg1MjFiODI4MDVmOTAyNGY=","commit":{"author":{"name":"Marc Prud'hommeaux","email":"mprudhom@apache.org","date":"2007-04-22T00:03:29Z"},"committer":{"name":"Marc Prud'hommeaux","email":"mprudhom@apache.org","date":"2007-04-22T00:03:29Z"},"message":"Changed docbook processing to use the docbkx-maven-plugin, which enables us to easily also generate PDF documentation\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/openjpa/trunk@531128 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"00bbba29bc5b831b447777cece5566ed0d12febd","url":"https://api.github.com/repos/apache/openjpa/git/trees/00bbba29bc5b831b447777cece5566ed0d12febd"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/68d9b38133fc0674a992b25a8521b82805f9024f","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/68d9b38133fc0674a992b25a8521b82805f9024f","html_url":"https://github.com/apache/openjpa/commit/68d9b38133fc0674a992b25a8521b82805f9024f","comments_url":"https://api.github.com/repos/apache/openjpa/commits/68d9b38133fc0674a992b25a8521b82805f9024f/comments","author":null,"committer":null,"parents":[{"sha":"0460c1113b5b270a41f2734742645d7b1cc2ff4e","url":"https://api.github.com/repos/apache/openjpa/commits/0460c1113b5b270a41f2734742645d7b1cc2ff4e","html_url":"https://github.com/apache/openjpa/commit/0460c1113b5b270a41f2734742645d7b1cc2ff4e"}],"stats":{"total":614,"additions":469,"deletions":145},"files":[{"sha":"1eb4c1db01ec630665af4bac0bf8c87fb13aa589","filename":"openjpa-project/pom.xml","status":"modified","additions":115,"deletions":143,"changes":258,"blob_url":"https://github.com/apache/openjpa/blob/68d9b38133fc0674a992b25a8521b82805f9024f/openjpa-project/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/68d9b38133fc0674a992b25a8521b82805f9024f/openjpa-project/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-project/pom.xml?ref=68d9b38133fc0674a992b25a8521b82805f9024f","patch":"@@ -44,18 +44,33 @@\n     </parent>\r\n \r\n     <properties>\r\n-        <openjpa.release.keyAlias>${user.name}@apache.org</openjpa.release.keyAlias>\r\n-        <openjpa.assembly.finalName>${artifactId}-${version}</openjpa.assembly.finalName>\r\n-        <openjpa.assembly.outputDirectory>${project.basedir}/target/assembly</openjpa.assembly.outputDirectory>\r\n+        <openjpa.release.keyAlias>\r\n+            ${user.name}@apache.org\r\n+        </openjpa.release.keyAlias>\r\n+        <openjpa.assembly.finalName>\r\n+            ${artifactId}-${version}</openjpa.assembly.finalName>\r\n+        <openjpa.assembly.outputDirectory>\r\n+            ${project.basedir}/target/assembly\r\n+        </openjpa.assembly.outputDirectory>\r\n \r\n         <openjpa.assembly.binarySuffix>binary</openjpa.assembly.binarySuffix>\r\n-        <openjpa.assembly.binaryBase>${openjpa.assembly.outputDirectory}/${openjpa.assembly.finalName}-${openjpa.assembly.binarySuffix}</openjpa.assembly.binaryBase>\r\n-        <openjpa.assembly.binaryFile>${openjpa.assembly.binaryBase}.zip</openjpa.assembly.binaryFile>\r\n+        <openjpa.assembly.binaryBase>\r\n+            ${openjpa.assembly.outputDirectory}/${openjpa.assembly.finalName}-${openjpa.assembly.binarySuffix}\r\n+        </openjpa.assembly.binaryBase>\r\n+        <openjpa.assembly.binaryFile>\r\n+            ${openjpa.assembly.binaryBase}.zip\r\n+        </openjpa.assembly.binaryFile>\r\n \r\n         <openjpa.assembly.sourceSuffix>source</openjpa.assembly.sourceSuffix>\r\n-        <openjpa.assembly.sourceBase>${openjpa.assembly.outputDirectory}/${openjpa.assembly.finalName}-${openjpa.assembly.sourceSuffix}</openjpa.assembly.sourceBase>\r\n-        <openjpa.assembly.sourceFile>${openjpa.assembly.sourceBase}.zip</openjpa.assembly.sourceFile>\r\n+        <openjpa.assembly.sourceBase>\r\n+            ${openjpa.assembly.outputDirectory}/${openjpa.assembly.finalName}-${openjpa.assembly.sourceSuffix}\r\n+        </openjpa.assembly.sourceBase>\r\n+        <openjpa.assembly.sourceFile>\r\n+            ${openjpa.assembly.sourceBase}.zip\r\n+        </openjpa.assembly.sourceFile>\r\n \r\n+        <docbook.source>${project.basedir}/src/doc/manual</docbook.source>\r\n+        <docbook.target>${project.basedir}/target/manual</docbook.target>\r\n         <docbook.version>1.67.2</docbook.version>\r\n         <local.repository>${settings.localRepository}</local.repository>\r\n     </properties>\r\n@@ -137,79 +152,107 @@\n     <profiles>\r\n         <!--\r\n             Docbook profile. Docs can be built by running:\r\n-                mvn package -Dtest=false -Pjavadoc-profile,docbook-profile\r\n+            MAVEN_OPTS=-Xmx512m\r\n+            mvn -f openjpa-project/pom.xml process-resources -Pdocbook-profile\r\n         -->\r\n         <profile>\r\n             <id>docbook-profile</id>\r\n             <build>\r\n                 <plugins>\r\n-                    <!-- build the docs when creating the site from docbook source -->\r\n+                    <!-- build the docs when processing resources -->\r\n                     <plugin>\r\n-                        <artifactId>maven-antrun-plugin</artifactId>\r\n+                        <groupId>com.agilejava.docbkx</groupId>\r\n+                        <artifactId>docbkx-maven-plugin</artifactId>\r\n                         <executions>\r\n                             <execution>\r\n+                                <id>build-pdf-doc</id>\r\n                                 <phase>process-resources</phase>\r\n+                                <goals><goal>generate-pdf</goal></goals>\r\n                                 <configuration>\r\n-                                 <!-- destdir=\"${project.build.directory}/site/manual\" -->\r\n-                                    <tasks>\r\n-                                    <echo>Building docbook manual</echo>\r\n-\r\n-                                    <mkdir dir=\"${project.basedir}/target/stylesheets\"/>\r\n-                                    <available file=\"${local.repository}/docbook/docbook-xsl/${docbook.version}/docbook-xsl-${docbook.version}.zip\" property=\"docbook.available\"/>\r\n-                                    <fail unless=\"docbook.available\">Could not find docbook file: ${local.repository}/docbook/docbook-xsl/${docbook.version}/docbook-xsl-${docbook.version}.zip</fail>\r\n-\r\n-                                    <unzip src=\"${local.repository}/docbook/docbook-xsl/${docbook.version}/docbook-xsl-${docbook.version}.zip\" dest=\"${project.basedir}/target/stylesheets/\" overwrite=\"false\"/>\r\n-\r\n-\r\n-                                    <property name=\"docsrcdir\"\r\n-                                    value=\"${project.basedir}/src/doc/manual\"/>\r\n-\r\n-                                    <property name=\"docdir\"\r\n-                                    value=\"${project.basedir}/target/manual\"/>\r\n-\r\n-                                    <mkdir dir=\"${docdir}/img\"/>\r\n-                                    <copy todir=\"${docdir}/img\">\r\n-                                        <fileset dir=\"${docsrcdir}/img\">\r\n-                                            <include name=\"*.*\"/>\r\n-                                        </fileset>\r\n-                                    </copy>\r\n-\r\n-                                    <mkdir dir=\"${docdir}/css\"/>\r\n-                                    <copy todir=\"${docdir}/css\">\r\n-                                        <fileset dir=\"${docsrcdir}/css\">\r\n-                                            <include name=\"*.*\"/>\r\n-                                        </fileset>\r\n-                                    </copy>\r\n-\r\n-                                    <style includes=\"**/manual.xml\"\r\n-                                        force=\"true\"\r\n-                                        basedir=\"${docsrcdir}\"\r\n-                                        destdir=\"${docdir}\"\r\n-                                        style=\"manual-xhtml-chunk.xsl\"\r\n-                                        classpathref=\"maven.runtime.classpath\">\r\n-                                        <factory name=\"org.apache.xalan.processor.TransformerFactoryImpl\">\r\n-                                            <attribute name=\"http://xml.apache.org/xalan/features/optimize\" value=\"true\"/>\r\n-                                        </factory>\r\n-                                    </style>\r\n+                                    <sourceDirectory>\r\n+                                        ${docbook.source}\r\n+                                    </sourceDirectory>\r\n+                                    <targetDirectory>\r\n+                                        ${docbook.target}\r\n+                                    </targetDirectory>\r\n+                                    <includes>manual.xml</includes>\r\n+                                    <foCustomization>\r\n+                                        ${docbook.source}/manual-pdf.xsl\r\n+                                    </foCustomization>\r\n+                                    <imgSrcPath>\r\n+                                        ${docbook.source}/\r\n+                                    </imgSrcPath>\r\n+                                </configuration>\r\n+                            </execution>\r\n+                            <execution>\r\n+                                <id>build-chunked-doc</id>\r\n+                                <phase>process-resources</phase>\r\n+                                <goals><goal>generate-html</goal></goals>\r\n+                                <configuration>\r\n+                                    <sourceDirectory>\r\n+                                        ${docbook.source}\r\n+                                    </sourceDirectory>\r\n+                                    <targetDirectory>\r\n+                                        ${docbook.target}\r\n+                                    </targetDirectory>\r\n+                                    <includes>manual.xml</includes>\r\n+                                    <chunkedOutput>true</chunkedOutput>\r\n+                                    <chunkQuietly>false</chunkQuietly>\r\n+                                    <htmlCustomization>\r\n+                                        ${docbook.source}/manual-xhtml-chunk.xsl\r\n+                                    </htmlCustomization>\r\n+                                    <postProcess>\r\n+                                        <!-- rename manual to index -->\r\n+                                        <move\r\n+                                        file=\"${docbook.target}/manual.html\"\r\n+                                        tofile=\"${docbook.target}/index.html\"/>\r\n \r\n-                                    <style includes=\"**/manual.xml\"\r\n-                                        force=\"true\"\r\n-                                        basedir=\"${docsrcdir}\"\r\n-                                        destdir=\"${docdir}\"\r\n-                                        style=\"manual-xhtml.xsl\"\r\n-                                        classpathref=\"maven.runtime.classpath\">\r\n-                                        <factory name=\"org.apache.xalan.processor.TransformerFactoryImpl\">\r\n-                                            <attribute name=\"http://xml.apache.org/xalan/features/optimize\" value=\"true\"/>\r\n-                                        </factory>\r\n-                                    </style>\r\n+                                        <!-- copy over images and styles -->\r\n+                                        <mkdir dir=\"${docbook.target}/img\"/>\r\n+                                        <copy todir=\"${docbook.target}/img\">\r\n+                                            <fileset\r\n+                                                dir=\"${docbook.source}/img\">\r\n+                                                <include name=\"*.*\"/>\r\n+                                            </fileset>\r\n+                                        </copy>\r\n \r\n-                                    </tasks>\r\n+                                        <mkdir dir=\"${docbook.target}/css\"/>\r\n+                                        <copy todir=\"${docbook.target}/css\">\r\n+                                            <fileset\r\n+                                                dir=\"${docbook.source}/css\">\r\n+                                                <include name=\"*.*\"/>\r\n+                                            </fileset>\r\n+                                        </copy>\r\n+                                    </postProcess>\r\n+                                </configuration>\r\n+                            </execution>\r\n+                            <execution>\r\n+                                <id>build-single-doc</id>\r\n+                                <phase>process-resources</phase>\r\n+                                <goals><goal>generate-html</goal></goals>\r\n+                                <configuration>\r\n+                                    <sourceDirectory>\r\n+                                        ${docbook.source}\r\n+                                    </sourceDirectory>\r\n+                                    <targetDirectory>\r\n+                                        ${docbook.target}\r\n+                                    </targetDirectory>\r\n+                                    <includes>manual.xml</includes>\r\n+                                    <chunkedOutput>false</chunkedOutput>\r\n+                                    <htmlCustomization>\r\n+                                        ${docbook.source}/manual-xhtml.xsl\r\n+                                    </htmlCustomization>\r\n                                 </configuration>\r\n-                                <goals>\r\n-                                    <goal>run</goal>\r\n-                                </goals>\r\n                             </execution>\r\n                         </executions>\r\n+                        <dependencies>\r\n+                        <dependency>\r\n+                            <groupId>org.docbook</groupId>\r\n+                            <artifactId>docbook-xml</artifactId>\r\n+                            <version>4.4</version>\r\n+                            <scope>runtime</scope>\r\n+                        </dependency>\r\n+                        </dependencies>\r\n                     </plugin>\r\n                 </plugins>\r\n             </build>\r\n@@ -219,6 +262,13 @@\n                     <value>true</value>\r\n                 </property>\r\n             </activation>\r\n+            <pluginRepositories>\r\n+                <pluginRepository>\r\n+                    <id>agilejava</id>\r\n+                    <name>Agilejava repository (Docbook plugin)</name>\r\n+                    <url>http://agilejava.com/maven</url>\r\n+                </pluginRepository>\r\n+            </pluginRepositories>\r\n         </profile>\r\n \r\n         <!-- sign the release files -->\r\n@@ -307,90 +357,12 @@\n             <artifactId>openjpa-all</artifactId>\r\n             <version>${pom.version}</version>\r\n         </dependency>\r\n-        <dependency>\r\n-            <groupId>org.apache.openjpa</groupId>\r\n-            <artifactId>openjpa-lib</artifactId>\r\n-            <version>${pom.version}</version>\r\n-        </dependency>\r\n-        <dependency>\r\n-            <groupId>org.apache.openjpa</groupId>\r\n-            <artifactId>openjpa-kernel</artifactId>\r\n-            <version>${pom.version}</version>\r\n-        </dependency>\r\n-        <dependency>\r\n-            <groupId>org.apache.openjpa</groupId>\r\n-            <artifactId>openjpa-kernel-5</artifactId>\r\n-            <version>${pom.version}</version>\r\n-        </dependency>\r\n-        <dependency>\r\n-            <groupId>org.apache.openjpa</groupId>\r\n-            <artifactId>openjpa-jdbc</artifactId>\r\n-            <version>${pom.version}</version>\r\n-        </dependency>\r\n-        <dependency>\r\n-            <groupId>org.apache.openjpa</groupId>\r\n-            <artifactId>openjpa-jdbc-5</artifactId>\r\n-            <version>${pom.version}</version>\r\n-        </dependency>\r\n-        <dependency>\r\n-            <groupId>org.apache.openjpa</groupId>\r\n-            <artifactId>openjpa-persistence</artifactId>\r\n-            <version>${pom.version}</version>\r\n-        </dependency>\r\n-        <dependency>\r\n-            <groupId>org.apache.openjpa</groupId>\r\n-            <artifactId>openjpa-persistence-jdbc</artifactId>\r\n-            <version>${pom.version}</version>\r\n-        </dependency>\r\n-        <dependency>\r\n-            <groupId>org.apache.openjpa</groupId>\r\n-            <artifactId>openjpa-xmlstore</artifactId>\r\n-            <version>${pom.version}</version>\r\n-        </dependency>\r\n-        <dependency>\r\n-            <groupId>org.apache.openjpa</groupId>\r\n-            <artifactId>openjpa-examples</artifactId>\r\n-            <version>${pom.version}</version>\r\n-        </dependency>\r\n \r\n         <!-- included so we can include it in the distribution -->\r\n         <dependency>\r\n             <groupId>org.apache.derby</groupId>\r\n             <artifactId>derby</artifactId>\r\n             <version>10.2.2.0</version>\r\n         </dependency>\r\n-\r\n-        <!-- jars needed for for docbook -->\r\n-        <dependency>\r\n-            <groupId>ant</groupId>\r\n-            <artifactId>ant</artifactId>\r\n-            <version>1.6.5</version>\r\n-            <scope>runtime</scope>\r\n-        </dependency>\r\n-        <dependency>\r\n-            <groupId>ant</groupId>\r\n-            <artifactId>ant-trax</artifactId>\r\n-            <version>1.6.5</version>\r\n-            <scope>runtime</scope>\r\n-        </dependency>\r\n-        <dependency>\r\n-            <groupId>xalan</groupId>\r\n-            <artifactId>xalan</artifactId>\r\n-            <version>2.7.0</version>\r\n-            <scope>runtime</scope>\r\n-        </dependency>\r\n-        <dependency>\r\n-            <groupId>bcel</groupId>\r\n-            <artifactId>bcel</artifactId>\r\n-            <version>5.1</version>\r\n-            <scope>runtime</scope>\r\n-        </dependency>\r\n-        <dependency>\r\n-            <groupId>docbook</groupId>\r\n-            <artifactId>docbook-xsl</artifactId>\r\n-            <version>${docbook.version}</version>\r\n-            <scope>runtime</scope>\r\n-            <type>zip</type>\r\n-        </dependency>\r\n     </dependencies>\r\n </project>\r"},{"sha":"3a20a4f2caa2353bf17ee64b56b96ab2ce346b54","filename":"openjpa-project/src/doc/manual/manual-pdf.xsl","status":"added","additions":347,"deletions":0,"changes":347,"blob_url":"https://github.com/apache/openjpa/blob/68d9b38133fc0674a992b25a8521b82805f9024f/openjpa-project/src/doc/manual/manual-pdf.xsl","raw_url":"https://github.com/apache/openjpa/raw/68d9b38133fc0674a992b25a8521b82805f9024f/openjpa-project/src/doc/manual/manual-pdf.xsl","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-project/src/doc/manual/manual-pdf.xsl?ref=68d9b38133fc0674a992b25a8521b82805f9024f","patch":"@@ -0,0 +1,347 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+ Licensed to the Apache Software Foundation (ASF) under one\n+ or more contributor license agreements.  See the NOTICE file\n+ distributed with this work for additional information\n+ regarding copyright ownership.  The ASF licenses this file\n+ to you under the Apache License, Version 2.0 (the\n+ \"License\"); you may not use this file except in compliance\n+ with the License.  You may obtain a copy of the License at\n+ \n+ http://www.apache.org/licenses/LICENSE-2.0\n+ \n+ Unless required by applicable law or agreed to in writing,\n+ software distributed under the License is distributed on an\n+ \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ KIND, either express or implied.  See the License for the\n+ specific language governing permissions and limitations\n+ under the License.   \n+-->\n+<xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n+\txmlns:fo=\"http://www.w3.org/1999/XSL/Format\"\n+\tversion='1.0'>\n+    <!-- used by docbkx-maven-plugin to reference the core styles -->\n+    <xsl:import href=\"urn:docbkx:stylesheet\"/>\n+\n+\t<!-- no pictures in note/warn/caution pargs -->\n+\t<xsl:param name=\"admon.graphics\" select=\"0\" />\n+\t<xsl:param name=\"autotoc.label.separator\" select=\"'. '\"/>\n+\t<xsl:param name=\"toc.indent.width\" select=\"24\"/>\n+\n+\t<!-- required for PDF bookmarks and some other stuff -->\n+\t<xsl:param name=\"fop.extensions\" select=\"1\"/>\n+\t<!-- <xsl:param name=\"use.extensions\" select=\"1\"/> -->\n+\n+\t<xsl:param name=\"ulink.hyphenate\" select=\"''\"/>\n+\n+\t<!-- don't show link source -->\n+\t<xsl:param name=\"ulink.show\" select=\"0\"/>\n+\n+\n+\t<!-- <xsl:param name=\"ulink.footnotes\" select=\"1\"/> -->\n+\t<!-- <xsl:param name=\"ulink.hyphenate\" select=\"1\"/> -->\n+\n+\t<!-- don't ever hyphenate words -->\n+\t<!-- <xsl:param name=\"hyphenate\">false</xsl:param> -->\n+\n+\t<!-- left justify -->\n+\t<xsl:param name=\"alignment\">left</xsl:param>\n+\n+\t<!-- print page numbers in references -->\n+\t<xsl:param name=\"insert.xref.page.number\" select=\"1\"/>\n+\n+\t<!-- make all cross-refernce links appear in bold and dark blue -->\n+\t<xsl:attribute-set name=\"xref.properties\">\n+\t\t<!-- <xsl:attribute name=\"color\">#AFAFAF</xsl:attribute> -->\n+\t\t<xsl:attribute name=\"color\">#17184A</xsl:attribute>\n+\t\t<xsl:attribute name=\"font-weight\">bold</xsl:attribute>\n+\t</xsl:attribute-set>\n+\n+\n+\t<!-- page break before level1 sections -->\n+\t<!--xsl:attribute-set name=\"section.level1.properties\">\n+\t\t<xsl:attribute name=\"break-before\">page</xsl:attribute>\n+\t</xsl:attribute-set-->\n+\n+\t<!-- Chapters: white font on light blue backgrouns -->\n+\t<xsl:attribute-set name=\"title.properties\">\n+\t\t<xsl:attribute name=\"color\">#000000</xsl:attribute>\n+\t\t<xsl:attribute name=\"font-weight\">bold</xsl:attribute>\n+\t\t<xsl:attribute name=\"background-color\">#3366CC</xsl:attribute>\n+\t</xsl:attribute-set>\n+\n+\n+\t<!-- Section title: underline -->\n+\t<xsl:attribute-set name=\"section.title.properties\">\n+\t\t<!-- <xsl:attribute name=\"color\">#005BA6</xsl:attribute> -->\n+\n+\t\t<!-- simulate underline with border of 1px bottom -->\n+\t\t<xsl:attribute name=\"border-bottom-width\">1px</xsl:attribute>\n+\t\t<xsl:attribute name=\"border-top-width\">0px</xsl:attribute>\n+\t\t<xsl:attribute name=\"border-left-width\">0px</xsl:attribute>\n+\t\t<xsl:attribute name=\"border-right-width\">0px</xsl:attribute>\n+\t\t<xsl:attribute name=\"border-style\">solid</xsl:attribute>\n+\t\t<xsl:attribute name=\"border-width\">1px</xsl:attribute>\n+\t\t<xsl:attribute name=\"border-color\">#17184A</xsl:attribute>\n+\t</xsl:attribute-set>\n+\n+\n+\t<!-- Examples and other fomal sections: italic -->\n+\t<xsl:attribute-set name=\"formal.title.properties\">\n+\t\t<xsl:attribute name=\"font-size\">\n+\t\t\t<xsl:value-of select=\"$body.font.master * 1.2\"/>\n+\t\t\t<xsl:text>pt</xsl:text>\n+\t\t</xsl:attribute>\n+\n+\t\t<xsl:attribute name=\"font-style\">italic</xsl:attribute>\n+\t</xsl:attribute-set>\n+\n+\n+\t<xsl:param name=\"segmentedlist.as.table\" select=\"1\"/>\n+\t<xsl:param name=\"variablelist.as.blocks\" select=\"1\"/>\n+\n+\t<xsl:param name=\"html.stylesheet\">documentation.css</xsl:param>\n+\t<xsl:param name=\"annotate.toc\" select=\"1\"/>\n+\t<xsl:param name=\"toc.section.depth\" select=\"8\"/>\n+\t<xsl:param name=\"generate.section.toc.level\" select=\"8\"/>\n+\t<xsl:param name=\"generate.index\" select=\"1\"/>\n+\t<xsl:param name=\"chapter.autolabel\" select=\"1\"/>\n+\t<xsl:param name=\"appendix.autolabel\" select=\"1\"/>\n+\t<xsl:param name=\"part.autolabel\" select=\"1\"/>\n+\t<xsl:param name=\"preface.autolabel\" select=\"1\"/>\n+\t<xsl:param name=\"qandadiv.autolabel\" select=\"1\"/>\n+\t<xsl:param name=\"section.autolabel\" select=\"1\"/>\n+\t<xsl:param name=\"section.label.includes.component.label\" select=\"1\"/>\n+\t<xsl:param name=\"label.from.part\" select=\"1\"/>\n+\n+\t<xsl:param name=\"generate.toc\">\n+\t\t/appendix  toc    \n+\t\tarticle   toc    \n+\t\tbook      toc,figure,table,example,equation\n+\t\t/chapter   toc    \n+\t\tpart      toc    \n+\t\t/preface   toc    \n+\t\tqandadiv  toc    \n+\t\tqandaset  toc    \n+\t\treference toc    \n+\t\t/section   toc    \n+\t\tset       toc    \n+\t</xsl:param>     \n+\n+\n+\t<!-- small margins for the PDF -->\n+\t<xsl:param name=\"page.margin.inner\">0.3in</xsl:param>\n+\t<xsl:param name=\"page.margin.outer\">0.3in</xsl:param>\n+\n+\n+\t<!-- without this, some parts of the body seem to overrin the -->\n+\t<!-- page number part of the footer -->\n+\t<xsl:param name=\"body.margin.bottom\">0.88in</xsl:param>\n+\t<xsl:param name=\"page.margin.bottom\">0.01in</xsl:param>\n+\n+\t<!-- make source code listings be boxed and have a grey background -->\n+\t<xsl:attribute-set name=\"monospace.verbatim.properties\"\n+\t\tuse-attribute-sets=\"verbatim.properties\">\n+\t\t<xsl:attribute name=\"font-family\">\n+\t\t\t<xsl:value-of select=\"$monospace.font.family\"/>\n+\t\t</xsl:attribute>\n+\t\t<xsl:attribute name=\"font-size\">\n+\t\t\t<xsl:value-of select=\"$body.font.master * 0.7\"/>\n+\t\t\t<xsl:text>pt</xsl:text>\n+\t\t</xsl:attribute>\n+\n+\t\t<xsl:attribute name=\"background-color\">#F0F0F0</xsl:attribute>\n+\t\t<xsl:attribute name=\"border-color\">#000000</xsl:attribute>\n+\t\t<xsl:attribute name=\"border-style\">solid</xsl:attribute>\n+\t\t<xsl:attribute name=\"border-width\">1px</xsl:attribute>\n+\t\t<xsl:attribute name=\"padding-top\">0.5cm</xsl:attribute>\n+\t\t<xsl:attribute name=\"padding-bottom\">0.5cm</xsl:attribute>\n+\t\t<xsl:attribute name=\"padding-left\">0.5cm</xsl:attribute>\n+\t\t<xsl:attribute name=\"padding-right\">0.5cm</xsl:attribute>\n+\t</xsl:attribute-set>\n+\n+\n+\t<!-- admonition (note/warn/caution) title properties: italics,\t\t-->\n+\t<!-- with a blue background and white text\t\t\t\t\t\t\t-->\n+\t<xsl:attribute-set name=\"admonition.title.properties\">\n+\t\t<xsl:attribute name=\"font-size\">\n+\t\t\t<xsl:value-of select=\"$body.font.master * 1.5\"/>\n+\t\t\t<xsl:text>pt</xsl:text>\n+\t\t</xsl:attribute>\n+\n+\t\t<xsl:attribute name=\"font-style\">bold</xsl:attribute>\n+\t\t<xsl:attribute name=\"text-align\">center</xsl:attribute>\n+\n+\t\t<xsl:attribute name=\"color\">#FFFFFF</xsl:attribute>\n+\t\t<xsl:attribute name=\"background-color\">#17184A</xsl:attribute>\n+\n+\t\t<xsl:attribute name=\"border-color\">#000000</xsl:attribute>\n+\t\t<xsl:attribute name=\"border-style\">solid</xsl:attribute>\n+\t\t<xsl:attribute name=\"border-width\">0px</xsl:attribute>\n+\t\t<xsl:attribute name=\"padding-left\">0.2cm</xsl:attribute>\n+\t\t<xsl:attribute name=\"padding-right\">0.2cm</xsl:attribute>\n+\t</xsl:attribute-set>\n+\n+\t<!-- admonition (note/warn/caution) properties: gray background -->\n+\t<xsl:attribute-set name=\"admonition.properties\">\n+\t\t<xsl:attribute name=\"background-color\">#B0B3B2</xsl:attribute>\n+\t\t<xsl:attribute name=\"border-color\">#000000</xsl:attribute>\n+\t\t<xsl:attribute name=\"border-style\">solid</xsl:attribute>\n+\t\t<xsl:attribute name=\"border-width\">0px</xsl:attribute>\n+\t\t<xsl:attribute name=\"padding-top\">0.2cm</xsl:attribute>\n+\t\t<xsl:attribute name=\"padding-bottom\">0.2cm</xsl:attribute>\n+\t\t<xsl:attribute name=\"padding-left\">0.2cm</xsl:attribute>\n+\t\t<xsl:attribute name=\"padding-right\">0.2cm</xsl:attribute>\n+\t</xsl:attribute-set>\n+\n+\t<xsl:attribute-set name=\"book.titlepage.recto.style\">\n+\t\t<xsl:attribute name=\"font-size\">18px</xsl:attribute>\n+\t\t<xsl:attribute name=\"text-align\">center</xsl:attribute>\n+\t\t<xsl:attribute name=\"padding-top\">3cm</xsl:attribute>\n+\t</xsl:attribute-set>\n+\n+\n+\n+\t<!-- patches and fixes for stylesheet bugs -->\n+\n+\n+\t<!--\n+\t\tfix for duplicate ids generated by <qandaset> attributes\n+\t\toverrides docbook-xsl/fo/qandaset.xsl\n+\n+    \tSee: http://lists.oasis-open.org/archives/docbook/200309/msg00070.html\n+\t-->\n+<xsl:template match=\"question\">\n+  <xsl:variable name=\"id\"><xsl:call-template name=\"object.id\"/></xsl:variable>\n+\n+  <xsl:variable name=\"entry.id\">\n+    <xsl:call-template name=\"object.id\">\n+      <xsl:with-param name=\"object\" select=\"parent::*\"/>\n+    </xsl:call-template>\n+  </xsl:variable>\n+\n+  <xsl:variable name=\"deflabel\">\n+    <xsl:choose>\n+      <xsl:when test=\"ancestor-or-self::*[@defaultlabel]\">\n+        <xsl:value-of select=\"(ancestor-or-self::*[@defaultlabel])[last()]\n+                              /@defaultlabel\"/>\n+      </xsl:when>\n+      <xsl:otherwise>\n+        <xsl:value-of select=\"$qanda.defaultlabel\"/>\n+      </xsl:otherwise>\n+    </xsl:choose>\n+  </xsl:variable>\n+\n+  <fo:list-item id=\"{$entry.id}\" xsl:use-attribute-sets=\"list.item.spacing\">\n+    <!--\n+    This adds duplicate id attributes for some reason\n+    See: http://lists.oasis-open.org/archives/docbook/200309/msg00070.html\n+    <fo:list-item-label id=\"{$id}\" end-indent=\"label-end()\">\n+    -->\n+    <fo:list-item-label end-indent=\"label-end()\">\n+      <xsl:choose>\n+        <xsl:when test=\"$deflabel = 'none'\">\n+          <fo:block/>\n+        </xsl:when>\n+        <xsl:otherwise>\n+          <fo:block>\n+            <xsl:apply-templates select=\".\" mode=\"label.markup\"/>\n+\t    <xsl:if test=\"$deflabel = 'number' and not(label)\">\n+              <xsl:apply-templates select=\".\" mode=\"intralabel.punctuation\"/>\n+\t    </xsl:if>\n+          </fo:block>\n+        </xsl:otherwise>\n+      </xsl:choose>\n+    </fo:list-item-label>\n+    <fo:list-item-body start-indent=\"body-start()\">\n+      <xsl:choose>\n+        <xsl:when test=\"$deflabel = 'none'\">\n+          <fo:block font-weight=\"bold\">\n+            <xsl:apply-templates select=\"*[local-name(.)!='label']\"/>\n+          </fo:block>\n+        </xsl:when>\n+        <xsl:otherwise>\n+          <xsl:apply-templates select=\"*[local-name(.)!='label']\"/>\n+        </xsl:otherwise>\n+      </xsl:choose>\n+    </fo:list-item-body>\n+  </fo:list-item>\n+</xsl:template>\n+\n+\n+<xsl:template match=\"answer\">\n+  <xsl:variable name=\"id\"><xsl:call-template name=\"object.id\"/></xsl:variable>\n+  <xsl:variable name=\"entry.id\">\n+    <xsl:call-template name=\"object.id\">\n+      <xsl:with-param name=\"object\" select=\"parent::*\"/>\n+    </xsl:call-template>\n+  </xsl:variable>\n+      \n+  <xsl:variable name=\"deflabel\">\n+    <xsl:choose>\n+      <xsl:when test=\"ancestor-or-self::*[@defaultlabel]\">\n+        <xsl:value-of select=\"(ancestor-or-self::*[@defaultlabel])[last()]\n+                              /@defaultlabel\"/>\n+      </xsl:when>\n+      <xsl:otherwise>\n+        <xsl:value-of select=\"$qanda.defaultlabel\"/>\n+      </xsl:otherwise>\n+    </xsl:choose>\n+  </xsl:variable>\n+  <fo:list-item xsl:use-attribute-sets=\"list.item.spacing\">\n+    <!--\n+    This adds duplicate id attributes for some reason\n+    See: http://lists.oasis-open.org/archives/docbook/200309/msg00070.html\n+    <fo:list-item-label id=\"{$id}\" end-indent=\"label-end()\">\n+    -->\n+    <fo:list-item-label end-indent=\"label-end()\">\n+      <xsl:choose>\n+        <xsl:when test=\"$deflabel = 'none'\">\n+          <fo:block/>\n+        </xsl:when>\n+        <xsl:otherwise>\n+          <fo:block>\n+            <xsl:variable name=\"answer.label\">\n+              <xsl:apply-templates select=\".\" mode=\"label.markup\"/>\n+            </xsl:variable>\n+            <xsl:copy-of select=\"$answer.label\"/>\n+          </fo:block>\n+        </xsl:otherwise>\n+      </xsl:choose>\n+    </fo:list-item-label>\n+    <fo:list-item-body start-indent=\"body-start()\">\n+      <xsl:apply-templates select=\"*[local-name(.)!='label']\"/>\n+    </fo:list-item-body>\n+  </fo:list-item>\n+</xsl:template>\n+\n+\n+<!-- the default stylesheets move the alphabet letter out of the fo\n+\tblock. this fixes that. -->\n+<xsl:template name=\"indexdiv.title\">\n+  <xsl:param name=\"title\"/>\n+  <xsl:param name=\"titlecontent\"/>\n+\n+  <fo:block \n+\t    font-size=\"14.4pt\"\n+            font-family=\"{$title.fontset}\"\n+            font-weight=\"bold\"\n+            keep-with-next.within-column=\"always\"\n+            space-before.optimum=\"{$body.font.master}pt\"\n+            space-before.minimum=\"{$body.font.master * 0.8}pt\"\n+            space-before.maximum=\"{$body.font.master * 1.2}pt\">\n+    <xsl:choose>\n+      <xsl:when test=\"$title\">\n+        <xsl:apply-templates select=\".\" mode=\"object.title.markup\">\n+          <xsl:with-param name=\"allow-anchors\" select=\"1\"/>\n+        </xsl:apply-templates>\n+      </xsl:when>\n+      <xsl:otherwise>\n+        <xsl:copy-of select=\"$titlecontent\"/>\n+      </xsl:otherwise>\n+    </xsl:choose>\n+  </fo:block>\n+</xsl:template>\n+\n+</xsl:stylesheet>\n+"},{"sha":"73f64f3f7748f3f90347cfd1034a6d09c2d6b0aa","filename":"openjpa-project/src/doc/manual/manual-xhtml-chunk.xsl","status":"modified","additions":3,"deletions":1,"changes":4,"blob_url":"https://github.com/apache/openjpa/blob/68d9b38133fc0674a992b25a8521b82805f9024f/openjpa-project/src/doc/manual/manual-xhtml-chunk.xsl","raw_url":"https://github.com/apache/openjpa/raw/68d9b38133fc0674a992b25a8521b82805f9024f/openjpa-project/src/doc/manual/manual-xhtml-chunk.xsl","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-project/src/doc/manual/manual-xhtml-chunk.xsl?ref=68d9b38133fc0674a992b25a8521b82805f9024f","patch":"@@ -22,8 +22,10 @@\n     <!-- docbook stylesheet customizations for openjpa manual -->\n \t<!-- <xsl:import href=\"http://docbook.sourceforge.net/release/xsl/docbook-xsl-1.67.2/html/chunk.xsl\"/> -->\n     <!-- locally downloaded cache of stylesheets -->\n-\t<xsl:import href=\"../../../target/stylesheets/docbook-xsl-1.67.2/html/chunk.xsl\"/>\n+\t<!-- <xsl:import href=\"../../../target/stylesheets/docbook-xsl-1.67.2/html/chunk.xsl\"/> -->\n \n+    <!-- used by docbkx-maven-plugin to reference the core styles -->\n+    <xsl:import href=\"urn:docbkx:stylesheet\"/>\n \n \t<xsl:param name=\"html.stylesheet\">css/docbook.css</xsl:param>\n "},{"sha":"8b4e52b20615256b1ce15ef50370f149c40c57a0","filename":"openjpa-project/src/doc/manual/manual-xhtml.xsl","status":"modified","additions":4,"deletions":1,"changes":5,"blob_url":"https://github.com/apache/openjpa/blob/68d9b38133fc0674a992b25a8521b82805f9024f/openjpa-project/src/doc/manual/manual-xhtml.xsl","raw_url":"https://github.com/apache/openjpa/raw/68d9b38133fc0674a992b25a8521b82805f9024f/openjpa-project/src/doc/manual/manual-xhtml.xsl","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-project/src/doc/manual/manual-xhtml.xsl?ref=68d9b38133fc0674a992b25a8521b82805f9024f","patch":"@@ -22,7 +22,10 @@\n     <!-- docbook stylesheet customizations for openjpa manual -->\n \t<!-- <xsl:import href=\"http://docbook.sourceforge.net/release/xsl/docbook-xsl-1.67.2/html/docbook.xsl\"/> -->\n     <!-- locally downloaded cache of stylesheets -->\n-\t<xsl:import href=\"../../../target/stylesheets/docbook-xsl-1.67.2/html/docbook.xsl\"/>\n+\t<!-- <xsl:import href=\"../../../target/stylesheets/docbook-xsl-1.67.2/html/docbook.xsl\"/> -->\n+\n+    <!-- used by docbkx-maven-plugin to reference the core styles -->\n+    <xsl:import href=\"urn:docbkx:stylesheet\"/>\n \n \t<xsl:param name=\"html.stylesheet\">css/docbook.css</xsl:param>\n "}]}

