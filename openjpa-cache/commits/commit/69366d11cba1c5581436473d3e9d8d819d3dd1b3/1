{"sha":"69366d11cba1c5581436473d3e9d8d819d3dd1b3","node_id":"MDY6Q29tbWl0MjA2MzY0OjY5MzY2ZDExY2JhMWM1NTgxNDM2NDczZDNlOWQ4ZDgxOWQzZGQxYjM=","commit":{"author":{"name":"Michael Dick","email":"mikedd@apache.org","date":"2008-02-19T17:44:14Z"},"committer":{"name":"Michael Dick","email":"mikedd@apache.org","date":"2008-02-19T17:44:14Z"},"message":"OPENJPA-512\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/branches/1.0.x@629172 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"cb7f04acb743f92f4c68c02ae011bfd063dd1300","url":"https://api.github.com/repos/apache/openjpa/git/trees/cb7f04acb743f92f4c68c02ae011bfd063dd1300"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/69366d11cba1c5581436473d3e9d8d819d3dd1b3","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/69366d11cba1c5581436473d3e9d8d819d3dd1b3","html_url":"https://github.com/apache/openjpa/commit/69366d11cba1c5581436473d3e9d8d819d3dd1b3","comments_url":"https://api.github.com/repos/apache/openjpa/commits/69366d11cba1c5581436473d3e9d8d819d3dd1b3/comments","author":{"login":"mikedd","id":669432,"node_id":"MDQ6VXNlcjY2OTQzMg==","avatar_url":"https://avatars.githubusercontent.com/u/669432?v=4","gravatar_id":"","url":"https://api.github.com/users/mikedd","html_url":"https://github.com/mikedd","followers_url":"https://api.github.com/users/mikedd/followers","following_url":"https://api.github.com/users/mikedd/following{/other_user}","gists_url":"https://api.github.com/users/mikedd/gists{/gist_id}","starred_url":"https://api.github.com/users/mikedd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikedd/subscriptions","organizations_url":"https://api.github.com/users/mikedd/orgs","repos_url":"https://api.github.com/users/mikedd/repos","events_url":"https://api.github.com/users/mikedd/events{/privacy}","received_events_url":"https://api.github.com/users/mikedd/received_events","type":"User","site_admin":false},"committer":{"login":"mikedd","id":669432,"node_id":"MDQ6VXNlcjY2OTQzMg==","avatar_url":"https://avatars.githubusercontent.com/u/669432?v=4","gravatar_id":"","url":"https://api.github.com/users/mikedd","html_url":"https://github.com/mikedd","followers_url":"https://api.github.com/users/mikedd/followers","following_url":"https://api.github.com/users/mikedd/following{/other_user}","gists_url":"https://api.github.com/users/mikedd/gists{/gist_id}","starred_url":"https://api.github.com/users/mikedd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikedd/subscriptions","organizations_url":"https://api.github.com/users/mikedd/orgs","repos_url":"https://api.github.com/users/mikedd/repos","events_url":"https://api.github.com/users/mikedd/events{/privacy}","received_events_url":"https://api.github.com/users/mikedd/received_events","type":"User","site_admin":false},"parents":[{"sha":"ea946b96540eac3d29a402f863648f6cb5f1365a","url":"https://api.github.com/repos/apache/openjpa/commits/ea946b96540eac3d29a402f863648f6cb5f1365a","html_url":"https://github.com/apache/openjpa/commit/ea946b96540eac3d29a402f863648f6cb5f1365a"}],"stats":{"total":132,"additions":102,"deletions":30},"files":[{"sha":"a01a202c559b144cb41e1e1de49ce88c5a6ab3c1","filename":"openjpa-persistence-jdbc/pom.xml","status":"modified","additions":17,"deletions":30,"changes":47,"blob_url":"https://github.com/apache/openjpa/blob/69366d11cba1c5581436473d3e9d8d819d3dd1b3/openjpa-persistence-jdbc/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/69366d11cba1c5581436473d3e9d8d819d3dd1b3/openjpa-persistence-jdbc/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/pom.xml?ref=69366d11cba1c5581436473d3e9d8d819d3dd1b3","patch":"@@ -387,36 +387,23 @@\n                         <phase>test-compile</phase>\r\n                         <configuration>\r\n                             <tasks>\r\n-                                <path id=\"cp\">\r\n-                                    <path refid=\"maven.test.classpath\"/>\r\n-                                    <path refid=\"maven.compile.classpath\"/>\r\n-                                    <path refid=\"maven.dependency.classpath\"/>\r\n-                                </path>\r\n-                                <taskdef name=\"openjpac\" classname=\r\n-                                    \"org.apache.openjpa.ant.PCEnhancerTask\">\r\n-                                    <classpath refid=\"cp\"/>\r\n-                                </taskdef>\r\n-                                <fileset id=\"enhance.path.ref\"\r\n-                                    dir=\"${project.build.testOutputDirectory}\">\r\n-                                    <include name=\"**/*.class\"/>\r\n-                                    <exclude name=\"**/inheritance/serializable/*.class\"/>\r\n-                                    <exclude name=\"**/xml/*.class\"/>\r\n-                                    <exclude name=\"**/Unenhanced*.class\"/>\r\n-                                </fileset>\r\n-                                <openjpac>\r\n-                                    <classpath refid=\"cp\"/>\r\n-                                    <fileset refid=\"enhance.path.ref\"/>\r\n-                                </openjpac>\r\n-                                <!--  Set detach state for serialization tests -->\r\n-                                <openjpac>\r\n-                                    <config detachState=\"fgs(DetachedStateField=true)\"/>\r\n-                                    <classpath refid=\"cp\"/>\r\n-                                    <fileset dir=\"${project.build.testOutputDirectory}\"> \r\n-                                        <include name=\"**/inheritance/serializable/*.class\"/>\r\n-                                        <!--  include files from orm.xml -->\r\n-                                        <include name=\"**/xml/*.class\"/>\r\n-                                    </fileset>\r\n-                                </openjpac>\r\n+                                <ant antfile=\"src/main/ant/enhancer.xml\"\r\n+                                    target=\"enhance.all.entities\"\r\n+                                    inheritRefs=\"true\">\r\n+                                    <!--\r\n+                                      InheritAll doesn't seem to work. Pass in\r\n+                                      properties manually.\r\n+                                     -->\r\n+                                    <property name=\"maven.test.skip\" \r\n+                                        value=\"${maven.test.skip}\"/>\r\n+                                    <property name=\"outdir\"\r\n+                                        value=\"${project.build.outputDirectory}\" />\r\n+                                    <property\r\n+                                        name=\"project.build.testOutputDirectory\"\r\n+                                        value=\"${project.build.testOutputDirectory}\" />\r\n+                                    <property name=\"openjpa.loglevel\"\r\n+                                        value=\"${openjpa.loglevel}\" />\r\n+                                </ant>  \r\n                             </tasks>\r\n                         </configuration>\r\n                         <goals>\r"},{"sha":"f2783d8050ecd39e3a06b2fb07dd5ecf05df05ba","filename":"openjpa-persistence-jdbc/src/main/ant/enhancer.xml","status":"added","additions":85,"deletions":0,"changes":85,"blob_url":"https://github.com/apache/openjpa/blob/69366d11cba1c5581436473d3e9d8d819d3dd1b3/openjpa-persistence-jdbc/src/main/ant/enhancer.xml","raw_url":"https://github.com/apache/openjpa/raw/69366d11cba1c5581436473d3e9d8d819d3dd1b3/openjpa-persistence-jdbc/src/main/ant/enhancer.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/main/ant/enhancer.xml?ref=69366d11cba1c5581436473d3e9d8d819d3dd1b3","patch":"@@ -0,0 +1,85 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+    Licensed to the Apache Software Foundation (ASF) under one\n+    or more contributor license agreements.  See the NOTICE file\n+    distributed with this work for additional information\n+    regarding copyright ownership.  The ASF licenses this file\n+    to you under the Apache License, Version 2.0 (the\n+    \"License\"); you may not use this file except in compliance\n+    with the License.  You may obtain a copy of the License at\n+    \n+    http://www.apache.org/licenses/LICENSE-2.0\n+    \n+    Unless required by applicable law or agreed to in writing,\n+    software distributed under the License is distributed on an\n+    \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+    KIND, either express or implied.  See the License for the\n+    specific language governing permissions and limitations\n+    under the License.   \n+-->\n+<project name=\"enhance\" basedir=\".\">\n+    <!--\n+        This build file executes the PCEnhancer on the test entities. It's in a\n+        separate file instead of nested in pom.xml to make some conditional \n+        processing easier.\n+        \n+        Test classes will not be compiled if maven is invoked with \n+        -Dmaven.tests.skip=true. \n+    -->\n+\n+    <condition property=\"maven.test.skip.istrue\">\n+        <istrue value=\"${maven.test.skip}\" />\n+    </condition>\n+\n+    <!-- ================================= \n+          target: enhance.all.entities              \n+         ================================= -->\n+    <target name=\"enhance.all.entities\"\n+            depends=\"\"\n+            description=\"--> enhance the test entities\"\n+            unless=\"maven.test.skip.istrue\">\n+        \n+        <!-- \n+            Inherited references won't be present until the task is called. \n+            Therefore the path definition needs to stay inside the task.\n+          --> \n+        <path id=\"cp\">\n+            <path refid=\"maven.test.classpath\" />\n+            <path refid=\"maven.compile.classpath\" />\n+            <path refid=\"maven.dependency.classpath\" />\n+        </path>\n+\n+        <taskdef name=\"openjpac\"\n+                 classname=\"org.apache.openjpa.ant.PCEnhancerTask\">\n+            <classpath refid=\"cp\" />\n+        </taskdef>\n+\n+        <fileset id=\"enhance.path.ref\"\n+                 dir=\"${project.build.testOutputDirectory}\">\n+            <include name=\"**/*.class\" />\n+            <exclude name=\"**/Test*.class\" />\n+            <exclude name=\"**/inheritance/serializable/*.class\" />\n+            <exclude name=\"**/xml/*.class\" />\n+            <exclude name=\"**/Unenhanced*.class\" />\n+            <exclude name=\"**/AbstractUnenhanced*.class\" />\n+        </fileset>\n+        <openjpac>\n+            <classpath refid=\"cp\" />\n+            <fileset refid=\"enhance.path.ref\" />\n+            <config log=\"DefaultLevel=${openjpa.loglevel}\" />\n+        </openjpac>\n+        <!--  Set detach state for serialization tests -->\n+        <openjpac>\n+            <config detachState=\"fgs(DetachedStateField=true)\" />\n+            <classpath refid=\"cp\" />\n+            <fileset dir=\"${project.build.testOutputDirectory}\">\n+                <include name=\"**/inheritance/serializable/*.class\" />\n+                <!--  include files from orm.xml -->\n+                <include name=\"**/xml/*.class\" />\n+                <exclude name=\"**/Test*.class\" />\n+            </fileset>\n+            <config log=\"DefaultLevel=${openjpa.loglevel}\" />\n+        </openjpac>\n+\n+    </target>\n+</project>\n\\ No newline at end of file"}]}

