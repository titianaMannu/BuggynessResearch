{"sha":"69c34cd385cfd06409b8009af5c9a681233d26b1","node_id":"MDY6Q29tbWl0MjA2MzY0OjY5YzM0Y2QzODVjZmQwNjQwOWI4MDA5YWY1YzlhNjgxMjMzZDI2YjE=","commit":{"author":{"name":"Patrick Linskey","email":"pcl@apache.org","date":"2007-03-08T09:34:25Z"},"committer":{"name":"Patrick Linskey","email":"pcl@apache.org","date":"2007-03-08T09:34:25Z"},"message":"OPENJPA-46: TRUE and FALSE should be case-insensitive in JPQL\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/openjpa/trunk@515986 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"464d904ed998652751f479f86bb6673263104a44","url":"https://api.github.com/repos/apache/openjpa/git/trees/464d904ed998652751f479f86bb6673263104a44"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/69c34cd385cfd06409b8009af5c9a681233d26b1","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/69c34cd385cfd06409b8009af5c9a681233d26b1","html_url":"https://github.com/apache/openjpa/commit/69c34cd385cfd06409b8009af5c9a681233d26b1","comments_url":"https://api.github.com/repos/apache/openjpa/commits/69c34cd385cfd06409b8009af5c9a681233d26b1/comments","author":null,"committer":null,"parents":[{"sha":"d2c748d1094f295243c7a3b9efe2b937d8bc9b0b","url":"https://api.github.com/repos/apache/openjpa/commits/d2c748d1094f295243c7a3b9efe2b937d8bc9b0b","html_url":"https://github.com/apache/openjpa/commit/d2c748d1094f295243c7a3b9efe2b937d8bc9b0b"}],"stats":{"total":47,"additions":46,"deletions":1},"files":[{"sha":"6bb2cc3c1e553688b8288b401b9ad211ca773ecd","filename":"openjpa-kernel/src/main/jjtree/org/apache/openjpa/kernel/jpql/JPQL.jjt","status":"modified","additions":5,"deletions":1,"changes":6,"blob_url":"https://github.com/apache/openjpa/blob/69c34cd385cfd06409b8009af5c9a681233d26b1/openjpa-kernel/src/main/jjtree/org/apache/openjpa/kernel/jpql/JPQL.jjt","raw_url":"https://github.com/apache/openjpa/raw/69c34cd385cfd06409b8009af5c9a681233d26b1/openjpa-kernel/src/main/jjtree/org/apache/openjpa/kernel/jpql/JPQL.jjt","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/jjtree/org/apache/openjpa/kernel/jpql/JPQL.jjt?ref=69c34cd385cfd06409b8009af5c9a681233d26b1","patch":"@@ -248,7 +248,6 @@ TOKEN : /* literals */\n \t\t| (([\"0\"-\"9\"])+ \".\") (<EXPONENT>)? ([\"f\",\"F\",\"d\",\"D\"])?\n \t\t| (([\"0\"-\"9\"])+) (<EXPONENT>) ([\"f\",\"F\",\"d\",\"D\"])?\n \t\t| (([\"0\"-\"9\"])+) (<EXPONENT>)? ([\"f\",\"F\",\"d\",\"D\"])?) >\n-\t| < BOOLEAN_LITERAL: \"TRUE\" | \"FALSE\" | \"true\" | \"false\" >\n \t| < #EXPONENT: [\"e\",\"E\"] ([\"+\",\"-\"])? ([\"0\"-\"9\"])+ >\n \t| < STRING_LITERAL: \"'\"\n \t  ((\"''\" | ~[\"'\"])\n@@ -277,6 +276,11 @@ TOKEN : /* literals */\n \t>\n }\n \n+TOKEN [ IGNORE_CASE ]: /* boolean literals can be case-insensitive */\n+{\n+\t< BOOLEAN_LITERAL: \"TRUE\" | \"FALSE\" >\n+}\n+\n /* From the Java 1.0.2 specification */\n TOKEN : /* IDENTIFIERS */\n {"},{"sha":"0a225e82f86aee291599e8285b56b116908e5ca6","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/simple/TestCaseInsensitiveKeywordsInJPQL.java","status":"added","additions":41,"deletions":0,"changes":41,"blob_url":"https://github.com/apache/openjpa/blob/69c34cd385cfd06409b8009af5c9a681233d26b1/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/simple/TestCaseInsensitiveKeywordsInJPQL.java","raw_url":"https://github.com/apache/openjpa/raw/69c34cd385cfd06409b8009af5c9a681233d26b1/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/simple/TestCaseInsensitiveKeywordsInJPQL.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/simple/TestCaseInsensitiveKeywordsInJPQL.java?ref=69c34cd385cfd06409b8009af5c9a681233d26b1","patch":"@@ -0,0 +1,41 @@\n+package org.apache.openjpa.persistence.simple;\n+\n+import javax.persistence.Query;\n+import javax.persistence.EntityManager;\n+\n+import org.apache.openjpa.persistence.test.PersistenceTestCase;\n+\n+public class TestCaseInsensitiveKeywordsInJPQL\n+    extends PersistenceTestCase {\n+\n+    public Class[] getEntityTypes() {\n+        return new Class[] { AllFieldTypes.class };\n+    }\n+\n+    public void testCaseInsensitiveBooleans() {\n+        EntityManager em = emf.createEntityManager();\n+        em.getTransaction().begin();\n+\n+        AllFieldTypes aft = new AllFieldTypes();\n+        em.persist(aft);\n+        aft.setBooleanField(true);\n+\n+        aft = new AllFieldTypes();\n+        em.persist(aft);\n+        aft.setBooleanField(false);\n+\n+        em.flush();\n+\n+        Query q = em.createQuery(\n+            \"select count(o) from AllFieldTypes o where o.booleanField = TrUe\");\n+        Number n = (Number) q.getSingleResult();\n+        assertEquals(1, n.intValue());\n+\n+        q = em.createQuery(\"select count(o) from AllFieldTypes o \"\n+            + \"where o.booleanField = falSe\");\n+        n = (Number) q.getSingleResult();\n+        assertEquals(1, n.intValue());\n+        \n+        em.getTransaction().rollback();\n+    }\n+}\n\\ No newline at end of file"}]}

