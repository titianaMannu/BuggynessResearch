{"sha":"6c1b918371d9a9650ccd5be531ce00f832f0a7b7","node_id":"MDY6Q29tbWl0MjA2MzY0OjZjMWI5MTgzNzFkOWE5NjUwY2NkNWJlNTMxY2UwMGY4MzJmMGE3Yjc=","commit":{"author":{"name":"Catalina Wei","email":"fancy@apache.org","date":"2007-10-07T05:46:00Z"},"committer":{"name":"Catalina Wei","email":"fancy@apache.org","date":"2007-10-07T05:46:00Z"},"message":"OPENJPA-394 (bug in 1.0.x) : DB2 CAST ? AS VARCHAR missing LENGTH\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/branches/1.0.x@582581 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"f65489f07a011c629aaa034cc4c9bab9dc708d1f","url":"https://api.github.com/repos/apache/openjpa/git/trees/f65489f07a011c629aaa034cc4c9bab9dc708d1f"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/6c1b918371d9a9650ccd5be531ce00f832f0a7b7","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/6c1b918371d9a9650ccd5be531ce00f832f0a7b7","html_url":"https://github.com/apache/openjpa/commit/6c1b918371d9a9650ccd5be531ce00f832f0a7b7","comments_url":"https://api.github.com/repos/apache/openjpa/commits/6c1b918371d9a9650ccd5be531ce00f832f0a7b7/comments","author":null,"committer":null,"parents":[{"sha":"77ce13d6fcc81d3c80b16c3a410fdc83d5ec87b8","url":"https://api.github.com/repos/apache/openjpa/commits/77ce13d6fcc81d3c80b16c3a410fdc83d5ec87b8","html_url":"https://github.com/apache/openjpa/commit/77ce13d6fcc81d3c80b16c3a410fdc83d5ec87b8"}],"stats":{"total":5,"additions":4,"deletions":1},"files":[{"sha":"5f53d4aebd9f0f1c0d433e531183556ff0be764e","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DB2Dictionary.java","status":"modified","additions":4,"deletions":1,"changes":5,"blob_url":"https://github.com/apache/openjpa/blob/6c1b918371d9a9650ccd5be531ce00f832f0a7b7/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DB2Dictionary.java","raw_url":"https://github.com/apache/openjpa/raw/6c1b918371d9a9650ccd5be531ce00f832f0a7b7/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DB2Dictionary.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DB2Dictionary.java?ref=6c1b918371d9a9650ccd5be531ce00f832f0a7b7","patch":"@@ -733,7 +733,10 @@ public void appendCast(SQLBuffer buf, FilterValue val, int type) {\n             String sqlString = buf.getSQL(false);\r\n             if (sqlString.endsWith(\"?\")) {\r\n                 // case \"(?\" - convert to \"CAST(? AS type\"\r\n-                String str = \"CAST(? AS \" + getTypeName(type) + \")\";\r\n+                String typeName = getTypeName(type);\r\n+                if (String.class.equals(val.getType()))\r\n+                    typeName = typeName + \"(\" + characterColumnSize + \")\";\r\n+                String str = \"CAST(? AS \" + typeName + \")\";\r\n                 buf.replaceSqlString(sqlString.length() - 1,\r\n                         sqlString.length(), str);\r\n             }\r"}]}

