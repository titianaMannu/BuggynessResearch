{"sha":"6ea5a81c9380521adb3c0c7839a06194c9e148f3","node_id":"MDY6Q29tbWl0MjA2MzY0OjZlYTVhODFjOTM4MDUyMWFkYjNjMGM3ODM5YTA2MTk0YzllMTQ4ZjM=","commit":{"author":{"name":"Pinaki Poddar","email":"ppoddar@apache.org","date":"2007-11-20T23:12:33Z"},"committer":{"name":"Pinaki Poddar","email":"ppoddar@apache.org","date":"2007-11-20T23:12:33Z"},"message":"OPENJPA-449 : initializing _pcClassLoaders in constructor instead of conditionally inside loadPersistentTypes(). Saves NPE on new Broker construction in multi-threaded scenarios' openjpa-kernel\\src\\main\\java\\org\\apache\\openjpa\\kernel\\AbstractBrokerFactory.java\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@596871 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"0b0013b38130d73414d877a42c38cf207e265a36","url":"https://api.github.com/repos/apache/openjpa/git/trees/0b0013b38130d73414d877a42c38cf207e265a36"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/6ea5a81c9380521adb3c0c7839a06194c9e148f3","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/6ea5a81c9380521adb3c0c7839a06194c9e148f3","html_url":"https://github.com/apache/openjpa/commit/6ea5a81c9380521adb3c0c7839a06194c9e148f3","comments_url":"https://api.github.com/repos/apache/openjpa/commits/6ea5a81c9380521adb3c0c7839a06194c9e148f3/comments","author":null,"committer":null,"parents":[{"sha":"aa5259d5210a6ba6e9adc11d37db2cc733725715","url":"https://api.github.com/repos/apache/openjpa/commits/aa5259d5210a6ba6e9adc11d37db2cc733725715","html_url":"https://github.com/apache/openjpa/commit/aa5259d5210a6ba6e9adc11d37db2cc733725715"}],"stats":{"total":2,"additions":1,"deletions":1},"files":[{"sha":"6d15b736a08d1ac2cd771971c32856bdd6113901","filename":"openjpa-kernel/src/main/java/org/apache/openjpa/kernel/AbstractBrokerFactory.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/apache/openjpa/blob/6ea5a81c9380521adb3c0c7839a06194c9e148f3/openjpa-kernel/src/main/java/org/apache/openjpa/kernel/AbstractBrokerFactory.java","raw_url":"https://github.com/apache/openjpa/raw/6ea5a81c9380521adb3c0c7839a06194c9e148f3/openjpa-kernel/src/main/java/org/apache/openjpa/kernel/AbstractBrokerFactory.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/java/org/apache/openjpa/kernel/AbstractBrokerFactory.java?ref=6ea5a81c9380521adb3c0c7839a06194c9e148f3","patch":"@@ -134,6 +134,7 @@ protected static AbstractBrokerFactory getPooledFactory(Map map) {\n      */\n     protected AbstractBrokerFactory(OpenJPAConfiguration config) {\n         _conf = config;\n+        _pcClassLoaders = new ReferenceHashSet(ReferenceHashSet.WEAK);\n     }\n \n     /**\n@@ -255,7 +256,6 @@ private void loadPersistentTypes(ClassLoader envLoader) {\n                     if (needsSub(cls))\n                         toRedefine.add(cls);\n                 }\n-                _pcClassLoaders = new ReferenceHashSet(ReferenceHashSet.WEAK);\n                 _pcClassLoaders.add(loader);\n             }\n         } else {"}]}

