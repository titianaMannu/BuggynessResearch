{"sha":"7303bcd5d5fee247520eb5d105f5b4a5ab7776f7","node_id":"MDY6Q29tbWl0MjA2MzY0OjczMDNiY2Q1ZDVmZWUyNDc1MjBlYjVkMTA1ZjViNGE1YWI3Nzc2Zjc=","commit":{"author":{"name":"Kevin W. Sutter","email":"kwsutter@apache.org","date":"2007-02-27T18:48:19Z"},"committer":{"name":"Kevin W. Sutter","email":"kwsutter@apache.org","date":"2007-02-27T18:48:19Z"},"message":"Slight update for the changes introduced via svn revision 506230 (OPENJPA-138).  Instead of just skipping the \"null ClassLoader\" (which indicates the SystemClassLoader), we'll use the static ClassLoader.getSystemClassLoader() method in order to populate the cache.\n\nThis change will help the non-container-managed environment (whereas the original change only benefitted the container-managed environment).\n\nThis was discussed on the dev mailing list between Patrick, Marc, and myself.\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/openjpa/trunk@512357 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"fcdc8fc3954078a3bca09d6d1ff8c9b5b5d163d6","url":"https://api.github.com/repos/apache/openjpa/git/trees/fcdc8fc3954078a3bca09d6d1ff8c9b5b5d163d6"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/7303bcd5d5fee247520eb5d105f5b4a5ab7776f7","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/7303bcd5d5fee247520eb5d105f5b4a5ab7776f7","html_url":"https://github.com/apache/openjpa/commit/7303bcd5d5fee247520eb5d105f5b4a5ab7776f7","comments_url":"https://api.github.com/repos/apache/openjpa/commits/7303bcd5d5fee247520eb5d105f5b4a5ab7776f7/comments","author":null,"committer":null,"parents":[{"sha":"4bf637f0747fcbba281b2ad2442475336cea8dfe","url":"https://api.github.com/repos/apache/openjpa/commits/4bf637f0747fcbba281b2ad2442475336cea8dfe","html_url":"https://github.com/apache/openjpa/commit/4bf637f0747fcbba281b2ad2442475336cea8dfe"}],"stats":{"total":5,"additions":3,"deletions":2},"files":[{"sha":"4c4bd90101e8bfa106f8aaea3b3de32ce982ed20","filename":"openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/ObjectValue.java","status":"modified","additions":3,"deletions":2,"changes":5,"blob_url":"https://github.com/apache/openjpa/blob/7303bcd5d5fee247520eb5d105f5b4a5ab7776f7/openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/ObjectValue.java","raw_url":"https://github.com/apache/openjpa/raw/7303bcd5d5fee247520eb5d105f5b4a5ab7776f7/openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/ObjectValue.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/ObjectValue.java?ref=7303bcd5d5fee247520eb5d105f5b4a5ab7776f7","patch":"@@ -92,9 +92,10 @@ public Object newInstance(String clsName, Class type, Configuration conf,\n         ClassLoader cl = (ClassLoader) _classloaderCache.get(type);\n         if (cl == null) {\n             cl = type.getClassLoader();\n-            if (cl != null) {  // System classloader is returned as null\n-                _classloaderCache.put(type, cl);\n+            if (cl == null) {  // System classloader is returned as null\n+                cl = ClassLoader.getSystemClassLoader();\n             }\n+            _classloaderCache.put(type, cl);\n         }\n         return Configurations.newInstance(clsName, this, conf, cl, fatal);\n     }"}]}

