{"sha":"7baaaf4b760248e0e5fdf63903b00f15a4485f78","node_id":"MDY6Q29tbWl0MjA2MzY0OjdiYWFhZjRiNzYwMjQ4ZTBlNWZkZjYzOTAzYjAwZjE1YTQ0ODVmNzg=","commit":{"author":{"name":"Pinaki Poddar","email":"ppoddar@apache.org","date":"2006-09-27T23:19:17Z"},"committer":{"name":"Pinaki Poddar","email":"ppoddar@apache.org","date":"2006-09-27T23:19:17Z"},"message":"Fixing http://issues.apache.org/jira/browse/OPENJPA-60\nSpecifying the wrong persistence implementation in persistence.xml leads to misleading error message\n \n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/openjpa/trunk@450632 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"47ea9f206ee9b8041627b6f5ab39d72030050471","url":"https://api.github.com/repos/apache/openjpa/git/trees/47ea9f206ee9b8041627b6f5ab39d72030050471"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/7baaaf4b760248e0e5fdf63903b00f15a4485f78","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/7baaaf4b760248e0e5fdf63903b00f15a4485f78","html_url":"https://github.com/apache/openjpa/commit/7baaaf4b760248e0e5fdf63903b00f15a4485f78","comments_url":"https://api.github.com/repos/apache/openjpa/commits/7baaaf4b760248e0e5fdf63903b00f15a4485f78/comments","author":null,"committer":null,"parents":[{"sha":"3620b80ce40370af5ff7f7be399975919a07465e","url":"https://api.github.com/repos/apache/openjpa/commits/3620b80ce40370af5ff7f7be399975919a07465e","html_url":"https://github.com/apache/openjpa/commit/3620b80ce40370af5ff7f7be399975919a07465e"}],"stats":{"total":16,"additions":10,"deletions":6},"files":[{"sha":"c73d0a48bc8d0813378836911ca96a9f839bc4bd","filename":"openjpa-persistence/src/main/java/org/apache/openjpa/persistence/PersistenceProductDerivation.java","status":"modified","additions":8,"deletions":6,"changes":14,"blob_url":"https://github.com/apache/openjpa/blob/7baaaf4b760248e0e5fdf63903b00f15a4485f78/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/PersistenceProductDerivation.java","raw_url":"https://github.com/apache/openjpa/raw/7baaaf4b760248e0e5fdf63903b00f15a4485f78/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/PersistenceProductDerivation.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/PersistenceProductDerivation.java?ref=7baaaf4b760248e0e5fdf63903b00f15a4485f78","patch":"@@ -241,15 +241,17 @@ private Boolean load(ConfigurationProviderImpl cp, String rsrc,\n         ConfigurationParser parser = new ConfigurationParser(m);\n         PersistenceUnitInfoImpl pinfo = parseResources(parser, urls, name, \n             loader);\n-        if (pinfo == null || !isOpenJPAPersistenceProvider(pinfo, loader)) {\n+        if (pinfo == null) {\n             if (!explicit)\n                 return Boolean.FALSE;\n-            String msg = (pinfo == null) ? \"missing-xml-config\"\n-                : \"cantload-xml-config\";\n-            throw new MissingResourceException(_loc.get(msg, rsrc,\n-                String.valueOf(name)).getMessage(), getClass().getName(), rsrc);\n+            throw new MissingResourceException(_loc.get(\"missing-xml-config\", \n+                rsrc, String.valueOf(name)).getMessage(), getClass().getName(), \n+                rsrc);\n+        } else if (!isOpenJPAPersistenceProvider(pinfo, loader)) {\n+            throw new MissingResourceException(_loc.get(\"unknown-provider\", \n+                rsrc, name, pinfo.getPersistenceProviderClassName()).\n+                getMessage(), getClass().getName(), rsrc);\n         }\n-\n         cp.addProperties(pinfo.toOpenJPAProperties());\n         cp.setSource(pinfo.getPersistenceXmlFileUrl().toString());\n         return Boolean.TRUE;"},{"sha":"28cbf3a569d85d234900612dd86ebacc8b114505","filename":"openjpa-persistence/src/main/resources/org/apache/openjpa/persistence/localizer.properties","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/apache/openjpa/blob/7baaaf4b760248e0e5fdf63903b00f15a4485f78/openjpa-persistence/src/main/resources/org/apache/openjpa/persistence/localizer.properties","raw_url":"https://github.com/apache/openjpa/raw/7baaaf4b760248e0e5fdf63903b00f15a4485f78/openjpa-persistence/src/main/resources/org/apache/openjpa/persistence/localizer.properties","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence/src/main/resources/org/apache/openjpa/persistence/localizer.properties?ref=7baaaf4b760248e0e5fdf63903b00f15a4485f78","patch":"@@ -60,6 +60,8 @@ missing-xml-config: The specified XML resource \"{0}\" for persistence unit \\\n \t\"{1}\" can''t be found in your class path.\n cantload-xml-config: The specified XML resource \"{0}\" for persistence unit \\\n \t\"{1}\" can''t be parsed.\n+unknown-provider: Persistence Provider \"{2}\" specified in persistence unit \\\n+\t\"{1}\" in \"{0}\" is not a recognized provider.\n illegal-index: The parameter index {0} is invalid. Parameters must be \\\n \tintegers starting at 1.\n conf-load: Setting the following properties from \"{0}\" into configuration: {1}"}]}

