{"sha":"7bd0d044e3b65fc046fce6fccad65a8d85d5ced4","node_id":"MDY6Q29tbWl0MjA2MzY0OjdiZDBkMDQ0ZTNiNjVmYzA0NmZjZTZmY2NhZDY1YThkODVkNWNlZDQ=","commit":{"author":{"name":"Patrick Linskey","email":"pcl@apache.org","date":"2006-07-21T15:53:31Z"},"committer":{"name":"Patrick Linskey","email":"pcl@apache.org","date":"2006-07-21T15:53:31Z"},"message":"guarded against null properties; changed the name of the class transformer options to be consistent with other OpenJPA config property names\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/openjpa/trunk@424362 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"a99cdf381efa8fc1f0397ce7fe2ac41342a7d895","url":"https://api.github.com/repos/apache/openjpa/git/trees/a99cdf381efa8fc1f0397ce7fe2ac41342a7d895"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/7bd0d044e3b65fc046fce6fccad65a8d85d5ced4","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/7bd0d044e3b65fc046fce6fccad65a8d85d5ced4","html_url":"https://github.com/apache/openjpa/commit/7bd0d044e3b65fc046fce6fccad65a8d85d5ced4","comments_url":"https://api.github.com/repos/apache/openjpa/commits/7bd0d044e3b65fc046fce6fccad65a8d85d5ced4/comments","author":null,"committer":null,"parents":[{"sha":"fc9321f35e252d60186482393d63e967587af2d2","url":"https://api.github.com/repos/apache/openjpa/commits/fc9321f35e252d60186482393d63e967587af2d2","html_url":"https://github.com/apache/openjpa/commit/fc9321f35e252d60186482393d63e967587af2d2"}],"stats":{"total":18,"additions":12,"deletions":6},"files":[{"sha":"f312ec4167b83d9bb2919ccb935f7e8c76a86402","filename":"openjpa-persistence/src/main/java/org/apache/openjpa/persistence/PersistenceProviderImpl.java","status":"modified","additions":10,"deletions":4,"changes":14,"blob_url":"https://github.com/apache/openjpa/blob/7bd0d044e3b65fc046fce6fccad65a8d85d5ced4/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/PersistenceProviderImpl.java","raw_url":"https://github.com/apache/openjpa/raw/7bd0d044e3b65fc046fce6fccad65a8d85d5ced4/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/PersistenceProviderImpl.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/PersistenceProviderImpl.java?ref=7bd0d044e3b65fc046fce6fccad65a8d85d5ced4","patch":"@@ -19,6 +19,8 @@\n import java.lang.instrument.IllegalClassFormatException;\n import java.security.ProtectionDomain;\n import java.util.Map;\n+import java.util.Properties;\n+\n import javax.persistence.EntityManager;\n import javax.persistence.EntityManagerFactory;\n import javax.persistence.Persistence;\n@@ -33,6 +35,7 @@\n import org.apache.openjpa.meta.MetaDataModes;\n import org.apache.openjpa.meta.MetaDataRepository;\n \n+\n /**\n  * Bootstrapping class that allows the creation of a stand-alone\n  * {@link EntityManager}.\n@@ -43,7 +46,7 @@\n     implements PersistenceProvider {\n \n     static final String CLASS_TRANSFORMER_OPTIONS =\n-        \"org.apache.openjpa.ClassTransformerOptions\";\n+        \"openjpa.ClassTransformerOptions\";\n \n     /**\n      * Loads the entity manager specified by <code>name</code>, applying\n@@ -81,9 +84,12 @@ public EntityManagerFactory createContainerEntityManagerFactory(\n                 OpenJPAEntityManagerFactory emf =\n                     OpenJPAPersistence.toEntityManagerFactory(\n                         Bootstrap.newBrokerFactory(cp, cp.getClassLoader()));\n+                Properties p = pui.getProperties();\n+                String ctOpts = null;\n+                if (p != null)\n+                    ctOpts = p.getProperty(CLASS_TRANSFORMER_OPTIONS);\n                 pui.addTransformer(new ClassTransformerImpl(\n-                    emf.getConfiguration(), pui.getProperties().getProperty\n-                    (CLASS_TRANSFORMER_OPTIONS),\n+                    emf.getConfiguration(), ctOpts,\n                     pui.getNewTempClassLoader()));\n                 return emf;\n             } else\n@@ -94,7 +100,7 @@ public EntityManagerFactory createContainerEntityManagerFactory(\n     }\n \n     /**\n-     * JEE 5 class transformer.\n+     * Java EE 5 class transformer.\n      */\n     private static class ClassTransformerImpl\n         implements ClassTransformer {"},{"sha":"78afd52b9b214929c91a142feb3cdad9b5879ce0","filename":"openjpa-persistence/src/main/java/org/apache/openjpa/persistence/PersistenceUnitInfoImpl.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/apache/openjpa/blob/7bd0d044e3b65fc046fce6fccad65a8d85d5ced4/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/PersistenceUnitInfoImpl.java","raw_url":"https://github.com/apache/openjpa/raw/7bd0d044e3b65fc046fce6fccad65a8d85d5ced4/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/PersistenceUnitInfoImpl.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/PersistenceUnitInfoImpl.java?ref=7bd0d044e3b65fc046fce6fccad65a8d85d5ced4","patch":"@@ -40,8 +40,8 @@\n import org.apache.openjpa.util.ClassResolver;\n \n /**\n- * Implementation of the {@link PersistenceUnitInfo} interface used by OpenJPA when\n- * parsing persistence configuration information.\n+ * Implementation of the {@link PersistenceUnitInfo} interface used by OpenJPA \n+ * when parsing persistence configuration information.\n  *\n  * @nojavadoc\n  */"}]}

