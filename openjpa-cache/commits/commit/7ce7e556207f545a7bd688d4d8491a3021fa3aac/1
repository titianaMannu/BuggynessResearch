{"sha":"7ce7e556207f545a7bd688d4d8491a3021fa3aac","node_id":"MDY6Q29tbWl0MjA2MzY0OjdjZTdlNTU2MjA3ZjU0NWE3YmQ2ODhkNGQ4NDkxYTMwMjFmYTNhYWM=","commit":{"author":{"name":"Pinaki Poddar","email":"ppoddar@apache.org","date":"2013-02-19T20:33:15Z"},"committer":{"name":"Pinaki Poddar","email":"ppoddar@apache.org","date":"2013-02-19T20:33:15Z"},"message":"OPENJPA-2335: Set non-default value to a foreign key contrained column\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@1447906 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"47322ad28451d57256c08e21330af34bc6437d70","url":"https://api.github.com/repos/apache/openjpa/git/trees/47322ad28451d57256c08e21330af34bc6437d70"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/7ce7e556207f545a7bd688d4d8491a3021fa3aac","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/7ce7e556207f545a7bd688d4d8491a3021fa3aac","html_url":"https://github.com/apache/openjpa/commit/7ce7e556207f545a7bd688d4d8491a3021fa3aac","comments_url":"https://api.github.com/repos/apache/openjpa/commits/7ce7e556207f545a7bd688d4d8491a3021fa3aac/comments","author":null,"committer":null,"parents":[{"sha":"05b41094b86c4f297ee856d90159aeb73d4494bc","url":"https://api.github.com/repos/apache/openjpa/commits/05b41094b86c4f297ee856d90159aeb73d4494bc","html_url":"https://github.com/apache/openjpa/commit/05b41094b86c4f297ee856d90159aeb73d4494bc"}],"stats":{"total":4,"additions":2,"deletions":2},"files":[{"sha":"5270142c1f87f5a261fe595c17e713801c78fade","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/PrimaryRow.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/apache/openjpa/blob/7ce7e556207f545a7bd688d4d8491a3021fa3aac/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/PrimaryRow.java","raw_url":"https://github.com/apache/openjpa/raw/7ce7e556207f545a7bd688d4d8491a3021fa3aac/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/PrimaryRow.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/PrimaryRow.java?ref=7ce7e556207f545a7bd688d4d8491a3021fa3aac","patch":"@@ -338,9 +338,9 @@ protected void setObject(Column col, Object val, int metaType,\n             if (prev == NULL)\n                 prev = null;\n             if (!rowValueEquals(prev, val)) {\n-            \tif (allowsUpdate(col, prev, val)) {\n+            \tif (isDefaultValue(prev) || allowsUpdate(col, prev, val)) {\n             \t\tsuper.setObject(col, val, metaType, overrideDefault);\n-            \t} else if (!isDefaultValue(val)) {\n+            \t} else if (!isDefaultValue(prev)) {\n             \t\tthrow new InvalidStateException(_loc.get(\"diff-values\",\n             \t\t\t\tnew Object[]{ col.getFullDBIdentifier().getName(),\n                             (prev == null) ? null : prev.getClass(), prev,"}]}

