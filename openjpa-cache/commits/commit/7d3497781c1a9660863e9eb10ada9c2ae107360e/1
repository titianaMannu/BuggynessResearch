{"sha":"7d3497781c1a9660863e9eb10ada9c2ae107360e","node_id":"MDY6Q29tbWl0MjA2MzY0OjdkMzQ5Nzc4MWMxYTk2NjA4NjNlOWViMTBhZGE5YzJhZTEwNzM2MGU=","commit":{"author":{"name":"Fay Wang","email":"faywang@apache.org","date":"2009-09-24T16:12:09Z"},"committer":{"name":"Fay Wang","email":"faywang@apache.org","date":"2009-09-24T16:12:09Z"},"message":"OPENJPA-1253: clean up code for uni-directional one-to-many Map using foreign key strategy\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@818531 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"e42ca31a4814f302b3a807f72a996a2917ae3e1e","url":"https://api.github.com/repos/apache/openjpa/git/trees/e42ca31a4814f302b3a807f72a996a2917ae3e1e"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/7d3497781c1a9660863e9eb10ada9c2ae107360e","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/7d3497781c1a9660863e9eb10ada9c2ae107360e","html_url":"https://github.com/apache/openjpa/commit/7d3497781c1a9660863e9eb10ada9c2ae107360e","comments_url":"https://api.github.com/repos/apache/openjpa/commits/7d3497781c1a9660863e9eb10ada9c2ae107360e/comments","author":null,"committer":null,"parents":[{"sha":"d8eadfe600d7f05d99ecd30d3604d18f96d8b114","url":"https://api.github.com/repos/apache/openjpa/commits/d8eadfe600d7f05d99ecd30d3604d18f96d8b114","html_url":"https://github.com/apache/openjpa/commit/d8eadfe600d7f05d99ecd30d3604d18f96d8b114"}],"stats":{"total":9,"additions":3,"deletions":6},"files":[{"sha":"14e08869ad6edd13420293e0f92d9f3f8fc16c26","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/meta/strats/HandlerRelationMapTableFieldStrategy.java","status":"modified","additions":3,"deletions":6,"changes":9,"blob_url":"https://github.com/apache/openjpa/blob/7d3497781c1a9660863e9eb10ada9c2ae107360e/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/meta/strats/HandlerRelationMapTableFieldStrategy.java","raw_url":"https://github.com/apache/openjpa/raw/7d3497781c1a9660863e9eb10ada9c2ae107360e/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/meta/strats/HandlerRelationMapTableFieldStrategy.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/meta/strats/HandlerRelationMapTableFieldStrategy.java?ref=7d3497781c1a9660863e9eb10ada9c2ae107360e","patch":"@@ -89,11 +89,11 @@ public void select(Select sel, int idx) {\n                 if (isUni1ToMFK()) {\n                     sel.whereForeignKey(field.getElementMapping().getForeignKey(),\n                         sm.getObjectId(), field.getElementMapping().getDeclaredTypeMapping(), store);\n+                    sel.select(vals[idx], field.getElementMapping().\n+                            getSelectSubclasses(), store, fetch, eagerMode, null);\n                 } else {\n                     sel.whereForeignKey(field.getJoinForeignKey(),\n                         sm.getObjectId(), field.getDefiningMapping(), store);\n-                }\n-                if (!isUni1ToMFK()) {\n                     Joins joins = joinValueRelation(sel.newJoins(), vals[idx]);\n                     sel.select(vals[idx], field.getElementMapping().\n                         getSelectSubclasses(), store, fetch, eagerMode, joins);\n@@ -102,10 +102,7 @@ public void select(Select sel, int idx) {\n                     //### thus we can use first mapping of union only\n                     if (idx == 0)\n                         resJoins[1] = joins;\n-                } else {\n-                    sel.select(vals[idx], field.getElementMapping().\n-                        getSelectSubclasses(), store, fetch, eagerMode, null);\n-                }\n+               }\n             }\n         });\n         Result res = union.execute(store, fetch);"}]}

