{"sha":"81cb7e17f98946e4455e055f075d958900c2f576","node_id":"MDY6Q29tbWl0MjA2MzY0OjgxY2I3ZTE3Zjk4OTQ2ZTQ0NTVlMDU1ZjA3NWQ5NTg5MDBjMmY1NzY=","commit":{"author":{"name":"Michael Dick","email":"mikedd@apache.org","date":"2008-02-07T22:11:21Z"},"committer":{"name":"Michael Dick","email":"mikedd@apache.org","date":"2008-02-07T22:11:21Z"},"message":"OPENJPA-464 commiting patch provided by Teresa Kan\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@619664 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"2beaa3e92e370900ec05e8868256ea39421b8823","url":"https://api.github.com/repos/apache/openjpa/git/trees/2beaa3e92e370900ec05e8868256ea39421b8823"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/81cb7e17f98946e4455e055f075d958900c2f576","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/81cb7e17f98946e4455e055f075d958900c2f576","html_url":"https://github.com/apache/openjpa/commit/81cb7e17f98946e4455e055f075d958900c2f576","comments_url":"https://api.github.com/repos/apache/openjpa/commits/81cb7e17f98946e4455e055f075d958900c2f576/comments","author":{"login":"mikedd","id":669432,"node_id":"MDQ6VXNlcjY2OTQzMg==","avatar_url":"https://avatars.githubusercontent.com/u/669432?v=4","gravatar_id":"","url":"https://api.github.com/users/mikedd","html_url":"https://github.com/mikedd","followers_url":"https://api.github.com/users/mikedd/followers","following_url":"https://api.github.com/users/mikedd/following{/other_user}","gists_url":"https://api.github.com/users/mikedd/gists{/gist_id}","starred_url":"https://api.github.com/users/mikedd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikedd/subscriptions","organizations_url":"https://api.github.com/users/mikedd/orgs","repos_url":"https://api.github.com/users/mikedd/repos","events_url":"https://api.github.com/users/mikedd/events{/privacy}","received_events_url":"https://api.github.com/users/mikedd/received_events","type":"User","site_admin":false},"committer":{"login":"mikedd","id":669432,"node_id":"MDQ6VXNlcjY2OTQzMg==","avatar_url":"https://avatars.githubusercontent.com/u/669432?v=4","gravatar_id":"","url":"https://api.github.com/users/mikedd","html_url":"https://github.com/mikedd","followers_url":"https://api.github.com/users/mikedd/followers","following_url":"https://api.github.com/users/mikedd/following{/other_user}","gists_url":"https://api.github.com/users/mikedd/gists{/gist_id}","starred_url":"https://api.github.com/users/mikedd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikedd/subscriptions","organizations_url":"https://api.github.com/users/mikedd/orgs","repos_url":"https://api.github.com/users/mikedd/repos","events_url":"https://api.github.com/users/mikedd/events{/privacy}","received_events_url":"https://api.github.com/users/mikedd/received_events","type":"User","site_admin":false},"parents":[{"sha":"0033a6b3d97a468fe7c08a6cb46a66fdd57a0da3","url":"https://api.github.com/repos/apache/openjpa/commits/0033a6b3d97a468fe7c08a6cb46a66fdd57a0da3","html_url":"https://github.com/apache/openjpa/commit/0033a6b3d97a468fe7c08a6cb46a66fdd57a0da3"}],"stats":{"total":62,"additions":59,"deletions":3},"files":[{"sha":"4d333876ed151f09af48eedb309c9942b9fd7e66","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/conf/JDBCConfigurationImpl.java","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/apache/openjpa/blob/81cb7e17f98946e4455e055f075d958900c2f576/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/conf/JDBCConfigurationImpl.java","raw_url":"https://github.com/apache/openjpa/raw/81cb7e17f98946e4455e055f075d958900c2f576/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/conf/JDBCConfigurationImpl.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/conf/JDBCConfigurationImpl.java?ref=81cb7e17f98946e4455e055f075d958900c2f576","patch":"@@ -25,6 +25,7 @@\n import org.apache.commons.lang.StringUtils;\n import org.apache.openjpa.conf.OpenJPAConfigurationImpl;\n import org.apache.openjpa.jdbc.kernel.BatchingConstraintUpdateManager;\n+import org.apache.openjpa.jdbc.kernel.BatchingOperationOrderUpdateManager;\n import org.apache.openjpa.jdbc.kernel.EagerFetchModes;\n import org.apache.openjpa.jdbc.kernel.JDBCBrokerFactory;\n import org.apache.openjpa.jdbc.kernel.LRSSizes;\n@@ -222,6 +223,8 @@ public JDBCConfigurationImpl(boolean derivations, boolean loadGlobals) {\n             \"org.apache.openjpa.jdbc.kernel.ConstraintUpdateManager\",\n             \"batching-constraint\",\n             BatchingConstraintUpdateManager.class.getName(),\n+            \"batching-order\",\n+            BatchingOperationOrderUpdateManager.class.getName(),\n         };\n         updateManagerPlugin.setAliases(aliases);\n         updateManagerPlugin.setDefault(aliases[0]);"},{"sha":"3505784139f5313d8ee90b7af0a9d4f233c4b478","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/BatchingOperationOrderUpdateManager.java","status":"added","additions":48,"deletions":0,"changes":48,"blob_url":"https://github.com/apache/openjpa/blob/81cb7e17f98946e4455e055f075d958900c2f576/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/BatchingOperationOrderUpdateManager.java","raw_url":"https://github.com/apache/openjpa/raw/81cb7e17f98946e4455e055f075d958900c2f576/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/BatchingOperationOrderUpdateManager.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/BatchingOperationOrderUpdateManager.java?ref=81cb7e17f98946e4455e055f075d958900c2f576","patch":"@@ -0,0 +1,48 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.    \n+ */\n+package org.apache.openjpa.jdbc.kernel;\n+\n+import java.sql.Connection;\n+\n+/**\n+ * <P>Batch update manager that writes the SQL in object-level operation order. \n+ * This update manager initiates a BatchPreparedStatementManagerImpl which \n+ * will utilize the JDBC addBatch() and executeBatch() APIs to batch the \n+ * statements for performance improvement.</P>\n+ * <P>This is the plug-in class for UpdateManager to support statement \n+ * batching for ordering. You can plug-in this statement batch implementation \n+ * through the following property: \n+ * <PRE>\n+ * < property name=\"openjpa.jdbc.UpdateManager\" \n+ *   value=\"org.apache.openjpa.jdbc.kernel.BatchingOperationOrderUpdateManager\"\n+ *    />   \n+ * </PRE></P>\n+ * @author Teresa Kan\n+ */\n+\n+public class BatchingOperationOrderUpdateManager extends\n+        OperationOrderUpdateManager {\n+\n+    protected PreparedStatementManager newPreparedStatementManager(\n+            JDBCStore store, Connection conn) {\n+        int batchLimit = dict.getBatchLimit();\n+        return new BatchingPreparedStatementManagerImpl(\n+                store, conn, batchLimit);\n+    }\n+}"},{"sha":"6a827c0642ce5aff9dfc40a6e6918793befc9f41","filename":"openjpa-project/src/doc/manual/ref_guide_dbsetup.xml","status":"modified","additions":8,"deletions":3,"changes":11,"blob_url":"https://github.com/apache/openjpa/blob/81cb7e17f98946e4455e055f075d958900c2f576/openjpa-project/src/doc/manual/ref_guide_dbsetup.xml","raw_url":"https://github.com/apache/openjpa/raw/81cb7e17f98946e4455e055f075d958900c2f576/openjpa-project/src/doc/manual/ref_guide_dbsetup.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-project/src/doc/manual/ref_guide_dbsetup.xml?ref=81cb7e17f98946e4455e055f075d958900c2f576","patch":"@@ -2683,7 +2683,7 @@ prevented; phantom reads can occur.\n <literal>serializable</literal>: Dirty reads, non-repeatable reads, and phantom\n reads are prevented.\n                 </para>\n-            </listitem>\n+            </listitem>openjpa-project/src/doc/manual/ref_guide_dbsetup.xml\n         </itemizedlist>\n         <example id=\"ref_guide_dbsetup_isoex\">\n             <title>\n@@ -3149,9 +3149,14 @@ Or\n         </example>\n         <par>\n By default, org.apache.openjpa.jdbc.kernel.BatchingConstraintUpdateManager \n-is the default statement batching implementation. You can plug-in your own \n+is the default statement batching implementation. OPENJPA also \n+provides another update manager \n+org.apache.openjpa.jdbc.kernel.BatchingOperationOrderUpdateManager for the\n+statements that required ordering.  You can plug-in this update manager through\n+the \"openjpa.jdbc.UpdateManager\" property. Or you can plug-in your own\n statement batching implementation by providing the implementation that extends \n-from AbstractUpdateManager or ConstraitUpdateManager. Add this implementation\n+from AbstractUpdateManager, ConstraitUpdateManager or OperationOrderUpdateManager. \n+Add this implementation\n class as a property in the persistence.xml file. For example, a custom\n statement batching implementation mycomp.MyUpdateManager extends \n ConstraitUpdateManager. You specify this implementation in the persistence.xml"}]}

