{"sha":"84d5a659b4f065113322c4f8417d0ce16ac0356a","node_id":"MDY6Q29tbWl0MjA2MzY0Ojg0ZDVhNjU5YjRmMDY1MTEzMzIyYzRmODQxN2QwY2UxNmFjMDM1NmE=","commit":{"author":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2010-07-21T18:32:43Z"},"committer":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2010-07-21T18:32:43Z"},"message":"OPENJPA-1737 Fix the openjpa bundle creation so MANIFEST.MF is the first artifact entry\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@966353 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"2a2adb26a2b93ea0d8b4ceaa1ed1c34fecbe73db","url":"https://api.github.com/repos/apache/openjpa/git/trees/2a2adb26a2b93ea0d8b4ceaa1ed1c34fecbe73db"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/84d5a659b4f065113322c4f8417d0ce16ac0356a","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/84d5a659b4f065113322c4f8417d0ce16ac0356a","html_url":"https://github.com/apache/openjpa/commit/84d5a659b4f065113322c4f8417d0ce16ac0356a","comments_url":"https://api.github.com/repos/apache/openjpa/commits/84d5a659b4f065113322c4f8417d0ce16ac0356a/comments","author":null,"committer":null,"parents":[{"sha":"28f7b7e744e1886413b5a6dfcf5022991764a6bf","url":"https://api.github.com/repos/apache/openjpa/commits/28f7b7e744e1886413b5a6dfcf5022991764a6bf","html_url":"https://github.com/apache/openjpa/commit/28f7b7e744e1886413b5a6dfcf5022991764a6bf"}],"stats":{"total":65,"additions":25,"deletions":40},"files":[{"sha":"0bea43e2d26290254a77b4e6f3b8e8e6b6d6beba","filename":"openjpa/pom.xml","status":"modified","additions":16,"deletions":39,"changes":55,"blob_url":"https://github.com/apache/openjpa/blob/84d5a659b4f065113322c4f8417d0ce16ac0356a/openjpa/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/84d5a659b4f065113322c4f8417d0ce16ac0356a/openjpa/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa/pom.xml?ref=84d5a659b4f065113322c4f8417d0ce16ac0356a","patch":"@@ -22,16 +22,19 @@\n     the release plugin.\n -->\n <project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\">\n+\n     <modelVersion>4.0.0</modelVersion>\n-    <artifactId>openjpa</artifactId>\n-    <packaging>bundle</packaging>\n-    <name>OpenJPA Aggregate Jar</name>\n+\n     <parent>\n         <groupId>org.apache.openjpa</groupId>\n         <artifactId>openjpa-parent</artifactId>\n         <version>2.1.0-SNAPSHOT</version>\n     </parent>\n \n+    <artifactId>openjpa</artifactId>\n+    <packaging>bundle</packaging>\n+    <name>OpenJPA Aggregate Jar</name>\n+\n     <build>\n         <plugins>\n             <!--\n@@ -48,6 +51,7 @@\n                     </execution>\n                 </executions>\n             </plugin>\n+\n             <!-- Create our aggregate JAR -->\n             <plugin>\n                 <groupId>org.apache.maven.plugins</groupId>\n@@ -86,61 +90,34 @@\n                                  org.apache.openjpa.kernel.exps.ExpressionParser\n                                 -->\n                                 <transformer implementation=\"org.apache.maven.plugins.shade.resource.ServicesResourceTransformer\" />\n-                                <!-- Need to add some MANIFEST.MF metadata -->\n-                                <transformer implementation=\"org.apache.maven.plugins.shade.resource.ManifestResourceTransformer\">\n-                                    <manifestEntries>\n-                                        <Main-Class>org.apache.openjpa.conf.OpenJPAVersion</Main-Class>\n-                                        <Premain-Class>org.apache.openjpa.enhance.PCEnhancerAgent</Premain-Class>\n-                                        <Agent-Class>org.apache.openjpa.enhance.InstrumentationFactory</Agent-Class>\n-                                        <Can-Redefine-Classes>true</Can-Redefine-Classes>\n-                                        <Can-Retransform-Classes>true</Can-Retransform-Classes>\n-                                        <Implementation-Title>Apache OpenJPA Aggregate JAR</Implementation-Title>\n-                                        <Specification-Title>JSR-317 Java Persistence</Specification-Title>\n-                                        <Specification-Vendor>Sun Microsystems, Inc.</Specification-Vendor>\n-                                        <Specification-Version>2.0</Specification-Version>\n-                                    </manifestEntries>\n-                                </transformer>\n                             </transformers>\n                         </configuration>\n                     </execution>\n                 </executions>\n             </plugin>\n \n-            <!-- extract the shaded jar so a bundle can be created -->\n-            <plugin>\n-                <groupId>org.apache.maven.plugins</groupId>\n-                <artifactId>maven-antrun-plugin</artifactId>\n-                <executions>\n-                    <execution>\n-                        <phase>package</phase>\n-                        <goals>\n-                            <goal>run</goal>\n-                        </goals>\n-                        <configuration>\n-                            <tasks>\n-                                <unzip src=\"${project.build.directory}/${pom.artifactId}-${pom.version}.jar\" dest=\"${project.build.directory}/classes\" />\n-                            </tasks>\n-                        </configuration>\n-                    </execution>\n-                </executions>\n-            </plugin>\n-\n             <!-- create an OSGi bundle -->\n             <plugin>\n                 <groupId>org.apache.felix</groupId>\n                 <artifactId>maven-bundle-plugin</artifactId>\n                 <extensions>true</extensions>\n                 <configuration>\n                     <instructions>\n+                        <!-- OpenJPA metadata -->\n+                        <Main-Class>org.apache.openjpa.conf.OpenJPAVersion</Main-Class>\n+                        <Premain-Class>org.apache.openjpa.enhance.PCEnhancerAgent</Premain-Class>\n+                        <Agent-Class>org.apache.openjpa.enhance.InstrumentationFactory</Agent-Class>\n+                        <Can-Redefine-Classes>true</Can-Redefine-Classes>\n+                        <Can-Retransform-Classes>true</Can-Retransform-Classes>\n+                        <Specification-Title>JSR-317 Java Persistence</Specification-Title>\n+                        <Specification-Vendor>Sun Microsystems, Inc.</Specification-Vendor>\n+                        <Specification-Version>2.0</Specification-Version>\n                         <!-- OSGi Bundle Metadata -->\n                         <Bundle-DocURL>${project.url}</Bundle-DocURL>\n                         <Bundle-Activator>org.apache.openjpa.persistence.osgi.PersistenceActivator</Bundle-Activator>\n                         <Private-Package />\n                         <Export-Package>org.apache.openjpa.*;version=${project.version}</Export-Package>\n                         <Import-Package>com.ibm.*;resolution:=optional,org.postgresql.*;resolution:=optional,org.apache.tools.ant.*;resolution:=optional,org.apache.log4j.*;resolution:=optional,org.slf4j.*;resolution:=optional,org.apache.commons.logging.*;resolution:=optional,javax.activation.xa*;resolution:=optional,javax.jms.*;version=\"[1.1.0,1.2)\";resolution:=optional,javax.transaction.*;version=\"[1.1.0,1.2)\";resolution:=optional,javax.validation.*;version=\"[1.0.0,1.1)\";resolution:=optional,javax.xml.bind.*;resolution:=optional,serp.*;resolution:=optional,javax.persistence.*;version=\"[1.1.0,2.1)\",*</Import-Package>\n-                        <!-- Eclipse metadata -->\n-                        <Eclipse-Autostart>false</Eclipse-Autostart>\n-                        <Bundle-ClassPath>.</Bundle-ClassPath>\n                     </instructions>\n                 </configuration>\n             </plugin>"},{"sha":"179f7ce514ca32da5a896a26ba0dd7efe487c128","filename":"pom.xml","status":"modified","additions":9,"deletions":1,"changes":10,"blob_url":"https://github.com/apache/openjpa/blob/84d5a659b4f065113322c4f8417d0ce16ac0356a/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/84d5a659b4f065113322c4f8417d0ce16ac0356a/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/pom.xml?ref=84d5a659b4f065113322c4f8417d0ce16ac0356a","patch":"@@ -889,7 +889,15 @@\n                 <plugin>\n                     <groupId>org.apache.felix</groupId>\n                     <artifactId>maven-bundle-plugin</artifactId>\n-                    <version>2.0.0</version>\n+                    <version>2.0.1</version>\n+                    <extensions>true</extensions>\n+                    <configuration>\n+                        <instructions>\n+                            <Implementation-Title>${project.name}</Implementation-Title>\n+                            <Implementation-Version>${project.version}</Implementation-Version>\n+                            <Bundle-DocURL>${project.url}</Bundle-DocURL>\n+                        </instructions>\n+                    </configuration>\n                 </plugin>\n                 <plugin>\n                     <groupId>org.apache.maven.plugins</groupId>"}]}

