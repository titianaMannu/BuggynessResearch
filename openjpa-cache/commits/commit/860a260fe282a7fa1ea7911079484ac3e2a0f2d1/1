{"sha":"860a260fe282a7fa1ea7911079484ac3e2a0f2d1","node_id":"MDY6Q29tbWl0MjA2MzY0Ojg2MGEyNjBmZTI4MmE3ZmExZWE3OTExMDc5NDg0YWMzZTJhMGYyZDE=","commit":{"author":{"name":"Michael Dick","email":"mikedd@apache.org","date":"2007-11-29T19:14:08Z"},"committer":{"name":"Michael Dick","email":"mikedd@apache.org","date":"2007-11-29T19:14:08Z"},"message":"OPENJPA-454\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@599547 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"723676325af326e4d2d21130590bee247fbd2f65","url":"https://api.github.com/repos/apache/openjpa/git/trees/723676325af326e4d2d21130590bee247fbd2f65"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/860a260fe282a7fa1ea7911079484ac3e2a0f2d1","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/860a260fe282a7fa1ea7911079484ac3e2a0f2d1","html_url":"https://github.com/apache/openjpa/commit/860a260fe282a7fa1ea7911079484ac3e2a0f2d1","comments_url":"https://api.github.com/repos/apache/openjpa/commits/860a260fe282a7fa1ea7911079484ac3e2a0f2d1/comments","author":{"login":"mikedd","id":669432,"node_id":"MDQ6VXNlcjY2OTQzMg==","avatar_url":"https://avatars.githubusercontent.com/u/669432?v=4","gravatar_id":"","url":"https://api.github.com/users/mikedd","html_url":"https://github.com/mikedd","followers_url":"https://api.github.com/users/mikedd/followers","following_url":"https://api.github.com/users/mikedd/following{/other_user}","gists_url":"https://api.github.com/users/mikedd/gists{/gist_id}","starred_url":"https://api.github.com/users/mikedd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikedd/subscriptions","organizations_url":"https://api.github.com/users/mikedd/orgs","repos_url":"https://api.github.com/users/mikedd/repos","events_url":"https://api.github.com/users/mikedd/events{/privacy}","received_events_url":"https://api.github.com/users/mikedd/received_events","type":"User","site_admin":false},"committer":{"login":"mikedd","id":669432,"node_id":"MDQ6VXNlcjY2OTQzMg==","avatar_url":"https://avatars.githubusercontent.com/u/669432?v=4","gravatar_id":"","url":"https://api.github.com/users/mikedd","html_url":"https://github.com/mikedd","followers_url":"https://api.github.com/users/mikedd/followers","following_url":"https://api.github.com/users/mikedd/following{/other_user}","gists_url":"https://api.github.com/users/mikedd/gists{/gist_id}","starred_url":"https://api.github.com/users/mikedd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikedd/subscriptions","organizations_url":"https://api.github.com/users/mikedd/orgs","repos_url":"https://api.github.com/users/mikedd/repos","events_url":"https://api.github.com/users/mikedd/events{/privacy}","received_events_url":"https://api.github.com/users/mikedd/received_events","type":"User","site_admin":false},"parents":[{"sha":"c97cd70b3e41db250a1b06e624dc233d5e271a85","url":"https://api.github.com/repos/apache/openjpa/commits/c97cd70b3e41db250a1b06e624dc233d5e271a85","html_url":"https://github.com/apache/openjpa/commit/c97cd70b3e41db250a1b06e624dc233d5e271a85"}],"stats":{"total":307,"additions":110,"deletions":197},"files":[{"sha":"2ff78b85bb6341f9c4fc879c7bd2e38a6dcb1b6f","filename":"openjpa-persistence-jdbc/pom.xml","status":"modified","additions":110,"deletions":197,"changes":307,"blob_url":"https://github.com/apache/openjpa/blob/860a260fe282a7fa1ea7911079484ac3e2a0f2d1/openjpa-persistence-jdbc/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/860a260fe282a7fa1ea7911079484ac3e2a0f2d1/openjpa-persistence-jdbc/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/pom.xml?ref=860a260fe282a7fa1ea7911079484ac3e2a0f2d1","patch":"@@ -51,41 +51,14 @@\n                     <scope>test</scope>\n                 </dependency>\n             </dependencies>\n-\n-            <build>\n-                <pluginManagement>\n-                    <plugins>\n-                        <plugin>\n-                            <groupId>org.apache.maven.plugins</groupId>\n-                            <artifactId>maven-surefire-plugin</artifactId>\n-                            <configuration>\n-                                <argLine>-Xmx500m</argLine>\n-                                <systemProperties>\n-                                    <property>\n-                                        <name>openjpa.Log</name>\n-                                        <value>DefaultLevel=${openjpa.loglevel}</value>\n-                                    </property>\n-                                    <property>\n-                                        <name>openjpa.ConnectionDriverName</name>\n-                                        <value>org.apache.commons.dbcp.BasicDataSource</value>\n-                                    </property>\n-                                    <property>\n-                                        <name>derby.stream.error.file</name>\n-                                        <value>target/derby.log</value>\n-                                    </property>\n-                                    <property>\n-                                        <name>openjpa.ConnectionProperties</name>\n-                                        <value>DriverClassName=org.apache.derby.jdbc.EmbeddedDriver,Url=jdbc:derby:target/database/openjpa-derby-database;create=true,MaxActive=100,MaxIdle=0,MaxWait=10000,TestOnBorrow=true</value>\n-                                    </property>\n-                                </systemProperties>\n-                            </configuration>\n-                        </plugin>\n-                    </plugins>\n-                </pluginManagement>\n-            </build>\n+            <properties>\n+                <connection.driver.name>org.apache.derby.jdbc.EmbeddedDriver</connection.driver.name>\n+                <connection.url>jdbc:derby:target/database/openjpa-derby-database;create=true</connection.url>\n+                <connection.username></connection.username>\n+                <connection.password></connection.password>\n+            </properties>\n         </profile>\n \n-\n         <!-- Profile for testing with HSQL DB -->\n         <profile>\n             <id>test-hsqldb</id>\n@@ -98,35 +71,14 @@\n                     <scope>test</scope>\n                 </dependency>\n             </dependencies>\n-            <build>\n-                <pluginManagement>\n-                    <plugins>\n-                        <plugin>\n-                            <groupId>org.apache.maven.plugins</groupId>\n-                            <artifactId>maven-surefire-plugin</artifactId>\n-                            <configuration>\n-                                <systemProperties>\n-                                    <property>\n-                                        <name>openjpa.Log</name>\n-                                        <value>DefaultLevel=${openjpa.loglevel}</value>\n-                                    </property>\n-                                    <property>\n-                                        <name>openjpa.ConnectionDriverName</name>\n-                                        <value>org.apache.commons.dbcp.BasicDataSource</value>\n-                                    </property>\n-                                    <property>\n-                                        <name>openjpa.ConnectionProperties</name>\n-                                        <value>DriverClassName=org.hsqldb.jdbcDriver,Url=jdbc:hsqldb:target/database/openjpa-hsqldb-database;create=true,MaxActive=100,MaxWait=10000,TestOnBorrow=true</value>\n-                                    </property>\n-                                </systemProperties>\n-                            </configuration>\n-                        </plugin>\n-                    </plugins>\n-                </pluginManagement>\n-            </build>\n+             <properties>\n+                <connection.driver.name>org.hsqldb.jdbcDriver</connection.driver.name>\n+                <connection.url>jdbc:hsqldb:target/database/openjpa-hsqldb-database;create=true</connection.url>\n+                <connection.username>sa</connection.username>\n+                <connection.password></connection.password>\n+            </properties>\n         </profile>\n \n-\n         <!-- Profile for testing with MySQL DB -->\n         <profile>\n             <id>test-mysql</id>\n@@ -135,39 +87,17 @@\n                 <dependency>\n                     <groupId>mysql</groupId>\n                     <artifactId>mysql-connector-java</artifactId>\n-                    <version>5.0.4</version>\n-                    <scope>test</scope>\n+                    <version>5.1.5</version>\n                 </dependency>\n             </dependencies>\n-            <build>\n-                <pluginManagement>\n-                    <plugins>\n-                        <plugin>\n-                            <groupId>org.apache.maven.plugins</groupId>\n-                            <artifactId>maven-surefire-plugin</artifactId>\n-                            <configuration>\n-                                <systemProperties>\n-                                    <property>\n-                                        <name>openjpa.Log</name>\n-                                        <value>DefaultLevel=${openjpa.loglevel}</value>\n-                                    </property>\n-                                    <property>\n-                                        <name>openjpa.ConnectionDriverName</name>\n-                                        <value>org.apache.commons.dbcp.BasicDataSource</value>\n-                                    </property>\n-                                    <property>\n-                                        <name>openjpa.ConnectionProperties</name>\n-                                        <value>DriverClassName=com.mysql.jdbc.Driver,Url=${openjpa.mysql.url},MaxActive=100,MaxWait=10000,TestOnBorrow=true,Username=${openjpa.mysql.username},Password=${openjpa.mysql.password}</value>\n-                                    </property>\n-                                </systemProperties>\n-                            </configuration>\n-                        </plugin>\n-                    </plugins>\n-                </pluginManagement>\n-            </build>\n+            <properties>\n+                <connection.driver.name>com.mysql.jdbc.Driver</connection.driver.name>\n+                <connection.url>${openjpa.mysql.url}</connection.url>\n+                <connection.username>${openjpa.mysql.username}</connection.username>\n+                <connection.password>${openjpa.mysql.password}</connection.password>\n+            </properties>\n         </profile>\n \n-\n         <!-- Profile for testing with PostgreSQL DB -->\n         <profile>\n             <id>test-postgresql</id>\n@@ -180,35 +110,14 @@\n                     <scope>test</scope>\n                 </dependency>\n             </dependencies>\n-            <build>\n-                <pluginManagement>\n-                    <plugins>\n-                        <plugin>\n-                            <groupId>org.apache.maven.plugins</groupId>\n-                            <artifactId>maven-surefire-plugin</artifactId>\n-                            <configuration>\n-                                <systemProperties>\n-                                    <property>\n-                                        <name>openjpa.Log</name>\n-                                        <value>DefaultLevel=${openjpa.loglevel}</value>\n-                                    </property>\n-                                    <property>\n-                                        <name>openjpa.ConnectionDriverName</name>\n-                                        <value>org.apache.commons.dbcp.BasicDataSource</value>\n-                                    </property>\n-                                    <property>\n-                                        <name>openjpa.ConnectionProperties</name>\n-                                        <value>DriverClassName=org.postgresql.Driver,Url=${openjpa.postgresql.url},MaxActive=100,MaxWait=10000,TestOnBorrow=true,Username=${openjpa.postgresql.username},Password=${openjpa.postgresql.password}</value>\n-                                    </property>\n-                                </systemProperties>\n-                            </configuration>\n-                        </plugin>\n-                    </plugins>\n-                </pluginManagement>\n-            </build>\n+            <properties>\n+                <connection.driver.name>org.postgresql.Driver</connection.driver.name>\n+                <connection.url>${openjpa.postgresql.url}</connection.url>\n+                <connection.username>${openjpa.postgresql.username}</connection.username>\n+                <connection.password>${openjpa.postgresql.password}</connection.password>\n+            </properties>\n         </profile>\n \n-\n         <!-- Profile for testing with SQLServer DB using the jTDS driver -->\n         <profile>\n             <id>test-sqlserver</id>\n@@ -221,35 +130,14 @@\n                     <scope>test</scope>\n                 </dependency>\n             </dependencies>\n-            <build>\n-                <pluginManagement>\n-                    <plugins>\n-                        <plugin>\n-                            <groupId>org.apache.maven.plugins</groupId>\n-                            <artifactId>maven-surefire-plugin</artifactId>\n-                            <configuration>\n-                                <systemProperties>\n-                                    <property>\n-                                        <name>openjpa.Log</name>\n-                                        <value>DefaultLevel=${openjpa.loglevel}</value>\n-                                    </property>\n-                                    <property>\n-                                        <name>openjpa.ConnectionDriverName</name>\n-                                        <value>org.apache.commons.dbcp.BasicDataSource</value>\n-                                    </property>\n-                                    <property>\n-                                        <name>openjpa.ConnectionProperties</name>\n-                                        <value>DriverClassName=net.sourceforge.jtds.jdbc.Driver,Url=${openjpa.sqlserver.url},MaxActive=100,MaxWait=10000,TestOnBorrow=true,Username=${openjpa.sqlserver.username},Password=${openjpa.sqlserver.password}</value>\n-                                    </property>\n-                                </systemProperties>\n-                            </configuration>\n-                        </plugin>\n-                    </plugins>\n-                </pluginManagement>\n-            </build>\n+            <properties>\n+                <connection.driver.name>net.sourceforge.jtds.jdbc.Driver</connection.driver.name>\n+                <connection.url>${openjpa.sqlserver.url}</connection.url>\n+                <connection.username>${openjpa.sqlserver.username}</connection.username>\n+                <connection.password>${openjpa.sqlserver.password}</connection.password>\n+            </properties>\n         </profile>\n \n-\n         <!-- Profile for testing with Sybase DB using the jTDS driver -->\n         <profile>\n             <id>test-sybase</id>\n@@ -262,32 +150,12 @@\n                     <scope>test</scope>\n                 </dependency>\n             </dependencies>\n-            <build>\n-                <pluginManagement>\n-                    <plugins>\n-                        <plugin>\n-                            <groupId>org.apache.maven.plugins</groupId>\n-                            <artifactId>maven-surefire-plugin</artifactId>\n-                            <configuration>\n-                                <systemProperties>\n-                                    <property>\n-                                        <name>openjpa.Log</name>\n-                                        <value>DefaultLevel=${openjpa.loglevel}</value>\n-                                    </property>\n-                                    <property>\n-                                        <name>openjpa.ConnectionDriverName</name>\n-                                        <value>org.apache.commons.dbcp.BasicDataSource</value>\n-                                    </property>\n-                                    <property>\n-                                        <name>openjpa.ConnectionProperties</name>\n-                                        <value>DriverClassName=net.sourceforge.jtds.jdbc.Driver,Url=${openjpa.sybase.url},MaxActive=100,MaxWait=10000,TestOnBorrow=true,Username=${openjpa.sybase.username},Password=${openjpa.sybase.password}</value>\n-                                    </property>\n-                                </systemProperties>\n-                            </configuration>\n-                        </plugin>\n-                    </plugins>\n-                </pluginManagement>\n-            </build>\n+            <properties>\n+                <connection.driver.name>net.sourceforge.jtds.jdbc.Driver</connection.driver.name>\n+                <connection.url>${openjpa.sybase.url}</connection.url>\n+                <connection.username>${openjpa.sybase.username}</connection.username>\n+                <connection.password>${openjpa.sybase.password}</connection.password>\n+            </properties>\n         </profile>\n \n         <!-- Profile for testing with a custom DB using a system jar -->\n@@ -312,37 +180,57 @@\n                     <systemPath>${openjpa.custom.driverjar}</systemPath>\n                 </dependency>\n             </dependencies>\n-            <build>\n-                <pluginManagement>\n-                    <plugins>\n-                        <plugin>\n-                            <groupId>org.apache.maven.plugins</groupId>\n-                            <artifactId>maven-surefire-plugin</artifactId>\n-                            <configuration>\n-                                <systemProperties>\n-                                    <property>\n-                                        <name>openjpa.Log</name>\n-                                        <value>DefaultLevel=${openjpa.loglevel}</value>\n-                                    </property>\n-                                    <property>\n-                                        <name>openjpa.ConnectionDriverName</name>\n-                                        <value>org.apache.commons.dbcp.BasicDataSource</value>\n-                                    </property>\n-                                    <property>\n-                                        <name>openjpa.ConnectionProperties</name>\n-                                        <value>DriverClassName=${openjpa.custom.driverclass},Url=${openjpa.custom.url},MaxActive=100,MaxWait=10000,TestOnBorrow=true,Username=${openjpa.custom.username},Password=${openjpa.custom.password}</value>\n-                                    </property>\n-                                </systemProperties>\n-                            </configuration>\n-                        </plugin>\n-                    </plugins>\n-                </pluginManagement>\n-            </build>\n+            <properties>\n+                <connection.driver.name>${openjpa.custom.driverclass}</connection.driver.name>\n+                <connection.url>${openjpa.custom.url}</connection.url>\n+                <connection.username>${openjpa.custom.username}</connection.username>\n+                <connection.password>${openjpa.custom.password}</connection.password>\n+            </properties>\n         </profile>\n \n-    </profiles>\n-\n \n+        <!-- Profile for testing with a custom DB using two system jars.\n+             Some databases (DB2) use more than one jar for their JDBC provider.\n+             Functionally this is identical to the previous profile, with a\n+             second system dependency added.\n+          -->\n+        <!--\n+            For example, to test with DB2, you might run:\n+        mvn test -Dtest=TestPersistence -Ptest-custom2 \\\n+          -Dopenjpa.custom.driverjar1=$(pwd)/drivers/db2jcc.jar \\\n+          -Dopenjpa.custom.driverjar2=$(pwd)/drviers/db2jcc_license_cu.jar \\\n+          -Dopenjpa.custom.driverclass=com.ibm.db2.jcc.DB2Driver \\\n+          -Dopenjpa.custom.url=jdbc:db2://HOST:PORT/DBNAME \\\n+          -Dopenjpa.custom.username=USERNAME \\\n+          -Dopenjpa.custom.password=PASSWORD\n+        -->\n+        <profile>\n+            <id>test-custom2</id>\n+            <activation><property><name>test-custom2</name></property></activation>\n+            <dependencies>\n+                <dependency>\n+                    <groupId>openjpa.customdriver1</groupId>\n+                    <artifactId>openjpa.customdriver1</artifactId>\n+                    <version>1.0</version>\n+                    <scope>system</scope>\n+                    <systemPath>${openjpa.custom.driverjar1}</systemPath>\n+                </dependency>\n+                <dependency>\n+                    <groupId>openjpa.customdriver2</groupId>\n+                    <artifactId>openjpa.customdriver2</artifactId>\n+                    <version>1.0</version>\n+                    <scope>system</scope>\n+                    <systemPath>${openjpa.custom.driverjar2}</systemPath>\n+                </dependency>\n+            </dependencies>\n+            <properties>\n+                <connection.driver.name>${openjpa.custom.driverclass}</connection.driver.name>\n+                <connection.url>${openjpa.custom.url}</connection.url>\n+                <connection.username>${openjpa.custom.username}</connection.username>\n+                <connection.password>${openjpa.custom.password}</connection.password>\n+            </properties>\n+        </profile>\n+    </profiles>\n \n     <dependencies>\n         <dependency>\n@@ -429,6 +317,31 @@\n                     </execution>\n                 </executions>\n             </plugin>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-surefire-plugin</artifactId>\n+                <configuration>\n+                    <argLine>-Xmx500m</argLine>\n+                    <systemProperties>\n+                        <property>\n+                            <name>openjpa.Log</name>\n+                            <value>DefaultLevel=${openjpa.loglevel}</value>\n+                        </property>\n+                        <property>\n+                            <name>openjpa.ConnectionDriverName</name>\n+                            <value>org.apache.commons.dbcp.BasicDataSource</value>\n+                        </property>\n+                        <property>\n+                            <name>derby.stream.error.file</name>\n+                            <value>target/derby.log</value>\n+                        </property>\n+                        <property>\n+                            <name>openjpa.ConnectionProperties</name>\n+                            <value>DriverClassName=${connection.driver.name},Url=${connection.url},MaxActive=100,MaxIdle=0,MaxWait=10000,TestOnBorrow=true,Username=${connection.username},Password=${connection.password}</value>\n+                        </property>\n+                    </systemProperties>\n+                </configuration>\n+            </plugin>\n         </plugins>\n     </build>\n </project>"}]}

