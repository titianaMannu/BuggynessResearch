{"sha":"8cf03bdab7873f6b93cba83e2ad84ce9deb2e5e8","node_id":"MDY6Q29tbWl0MjA2MzY0OjhjZjAzYmRhYjc4NzNmNmI5M2NiYTgzZTJhZDg0Y2U5ZGViMmU1ZTg=","commit":{"author":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2010-01-05T02:21:40Z"},"committer":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2010-01-05T02:21:40Z"},"message":"OPENJPA-1453 Fix setting javaagent\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@895863 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"09eb687089ac1609c615363d214e46dc608e84bb","url":"https://api.github.com/repos/apache/openjpa/git/trees/09eb687089ac1609c615363d214e46dc608e84bb"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/8cf03bdab7873f6b93cba83e2ad84ce9deb2e5e8","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/8cf03bdab7873f6b93cba83e2ad84ce9deb2e5e8","html_url":"https://github.com/apache/openjpa/commit/8cf03bdab7873f6b93cba83e2ad84ce9deb2e5e8","comments_url":"https://api.github.com/repos/apache/openjpa/commits/8cf03bdab7873f6b93cba83e2ad84ce9deb2e5e8/comments","author":null,"committer":null,"parents":[{"sha":"c4fe0957ee76da70633082fc6210c425c7bfcbe1","url":"https://api.github.com/repos/apache/openjpa/commits/c4fe0957ee76da70633082fc6210c425c7bfcbe1","html_url":"https://github.com/apache/openjpa/commit/c4fe0957ee76da70633082fc6210c425c7bfcbe1"}],"stats":{"total":9,"additions":8,"deletions":1},"files":[{"sha":"c3d0942e0c3a58614318cf2d17202e5ada4083db","filename":"openjpa-integration/tck/pom.xml","status":"modified","additions":8,"deletions":1,"changes":9,"blob_url":"https://github.com/apache/openjpa/blob/8cf03bdab7873f6b93cba83e2ad84ce9deb2e5e8/openjpa-integration/tck/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/8cf03bdab7873f6b93cba83e2ad84ce9deb2e5e8/openjpa-integration/tck/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-integration/tck/pom.xml?ref=8cf03bdab7873f6b93cba83e2ad84ce9deb2e5e8","patch":"@@ -123,6 +123,7 @@\n \n                         <unzip overwrite=\"false\" src=\"${tck.zip}\" dest=\"${tck.base}\" />\n \n+                        <!-- FIXME - Make sure we're using the Geronimo Spec -->\n                         <path id=\"cp\">\n                             <path refid=\"maven.compile.classpath\" />\n \n@@ -198,6 +199,7 @@ databaseName=${db.name}\n                         <!-- convert backslashes and known paths with spaces\n                             to get around a problem with the TCK testrunner \n                             on windows -->\n+                        <echo>Update directory paths if running on Windows</echo>\n                         <replace summary=\"yes\" file=\"${jpatck.config}.tmp\" replacefilterfile=\"windows-replacefilter.properties\" />\n                         <concat append=\"true\" destfile=\"${jpatck.config}\">\n                             <fileset file=\"${jpatck.config}.tmp\" />\n@@ -223,7 +225,7 @@ databaseName=${db.name}\n                             persistent classes to work (like the SignatureTest)\n                         -->\n                         <replace file=\"${jpatck.config}\">\n-                            <replacefilter token=\"${JAVA_HOME}/bin/java\" value=\"${JAVA_HOME}/bin/java -javaagent:${agent}${agent.properties} -Dopenjpa.MetaDataFactory=jpa(DefaultAccessType=PROPERTY)\" />\n+                            <replacefilter token=\"-Ddeliverable.class=${deliverable.class}\" value=\"-Ddeliverable.class=${deliverable.class} -javaagent:${agent}${agent.properties} -Dopenjpa.MetaDataFactory=jpa(DefaultAccessType=PROPERTY)\" />\n                         </replace>\n \n                         <!-- make a macro for the TCK harness launcher -->\n@@ -265,10 +267,12 @@ databaseName=${db.name}\n                         <echo>Logging JPA 2.0 TCK output to ${tck.log}</echo>\n \n                         <!-- first initialize the database -->\n+                        <echo>Calling TCK initdb.xml</echo>\n                         <tsant buildfile=\"${tck.dir}/bin/initdb.xml\" target=\"init.database\" />\n                         <echo>TCK initdb.xml returned result=${tsant.result}</echo>\n \n                         <!-- now run the TCK -->\n+                        <echo>Calling TCK build.xml</echo>\n                         <tsant buildfile=\"${tck.dir}/bin/build.xml\" target=\"runclient\" />\n                         <echo>TCK build.xml returned result=${tsant.result}</echo>\n \n@@ -465,6 +469,7 @@ databaseName=${db.name}\n                         <!-- convert backslashes and known paths with spaces\n                             to get around a problem with the TCK testrunner \n                             on windows -->\n+                        <echo>Update directory paths if running on Windows</echo>\n                         <replace summary=\"yes\" file=\"${jpatck.config}.tmp\" replacefilterfile=\"windows-replacefilter.properties\" />\n                         <concat append=\"true\" destfile=\"${jpatck.config}\">\n                             <fileset file=\"${jpatck.config}.tmp\" />\n@@ -533,9 +538,11 @@ databaseName=${db.name}\n                         <echo>Logging JPA TCK output to ${tck.log}</echo>\n \n                         <!-- first initialize the database -->\n+                        <echo>Calling TCK initdb.xml</echo>\n                         <tsant buildfile=\"${tck.dir}/bin/initdb.xml\" target=\"init.database\" />\n \n                         <!-- now run the TCK -->\n+                        <echo>Calling TCK build.xml</echo>\n                         <tsant buildfile=\"${tck.dir}/bin/build.xml\" target=\"runclient\" />\n \n                         <!-- archive the results -->"}]}

