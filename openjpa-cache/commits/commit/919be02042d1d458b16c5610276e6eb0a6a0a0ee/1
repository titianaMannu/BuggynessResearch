{"sha":"919be02042d1d458b16c5610276e6eb0a6a0a0ee","node_id":"MDY6Q29tbWl0MjA2MzY0OjkxOWJlMDIwNDJkMWQ0NThiMTZjNTYxMDI3NmU2ZWIwYTZhMGEwZWU=","commit":{"author":{"name":"Catalina Wei","email":"fancy@apache.org","date":"2010-01-16T00:26:51Z"},"committer":{"name":"Catalina Wei","email":"fancy@apache.org","date":"2010-01-16T00:26:51Z"},"message":"OPENJPA-1461: Incorrect Oracle CREATE TABLE DDL for XML column\nChanged mapping table name from \"TORDER\" to \"TORDERXML\" in test case.\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@899851 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"38dec79c69a85a0855eb42fe6876768be19b17f9","url":"https://api.github.com/repos/apache/openjpa/git/trees/38dec79c69a85a0855eb42fe6876768be19b17f9"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/919be02042d1d458b16c5610276e6eb0a6a0a0ee","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/919be02042d1d458b16c5610276e6eb0a6a0a0ee","html_url":"https://github.com/apache/openjpa/commit/919be02042d1d458b16c5610276e6eb0a6a0a0ee","comments_url":"https://api.github.com/repos/apache/openjpa/commits/919be02042d1d458b16c5610276e6eb0a6a0a0ee/comments","author":null,"committer":null,"parents":[{"sha":"e75d1c9c95348d07f20579f268664e0fd2f737c5","url":"https://api.github.com/repos/apache/openjpa/commits/e75d1c9c95348d07f20579f268664e0fd2f737c5","html_url":"https://github.com/apache/openjpa/commit/e75d1c9c95348d07f20579f268664e0fd2f737c5"}],"stats":{"total":100,"additions":50,"deletions":50},"files":[{"sha":"7c1fd94305f9d331a2136a4c96a9277a0bfa8a34","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/xmlmapping/entities/Order.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/apache/openjpa/blob/919be02042d1d458b16c5610276e6eb0a6a0a0ee/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/xmlmapping/entities/Order.java","raw_url":"https://github.com/apache/openjpa/raw/919be02042d1d458b16c5610276e6eb0a6a0a0ee/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/xmlmapping/entities/Order.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/xmlmapping/entities/Order.java?ref=919be02042d1d458b16c5610276e6eb0a6a0a0ee","patch":"@@ -26,7 +26,7 @@\n import org.apache.openjpa.persistence.jdbc.Strategy;\n \n @Entity\n-@Table(name=\"TORDER\")\n+@Table(name=\"TORDERXML\")\n public class Order {\n     @Id \n     int oid;"},{"sha":"ef0f0b1683f2fddcb7c84cc44fba8f846c8be6f6","filename":"openjpa-persistence-jdbc/src/test/resources/org/apache/openjpa/persistence/xmlmapping/query/TestXMLCustomerOrder.db2","status":"modified","additions":13,"deletions":13,"changes":26,"blob_url":"https://github.com/apache/openjpa/blob/919be02042d1d458b16c5610276e6eb0a6a0a0ee/openjpa-persistence-jdbc/src/test/resources/org/apache/openjpa/persistence/xmlmapping/query/TestXMLCustomerOrder.db2","raw_url":"https://github.com/apache/openjpa/raw/919be02042d1d458b16c5610276e6eb0a6a0a0ee/openjpa-persistence-jdbc/src/test/resources/org/apache/openjpa/persistence/xmlmapping/query/TestXMLCustomerOrder.db2","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/resources/org/apache/openjpa/persistence/xmlmapping/query/TestXMLCustomerOrder.db2?ref=919be02042d1d458b16c5610276e6eb0a6a0a0ee","patch":"@@ -15,24 +15,24 @@\n -- specific language governing permissions and limitations\r\n -- under the License.    \r\n \r\n-DELETE FROM TORDER t0\r\n+DELETE FROM TORDERXML t0\r\n SELECT t0.countryCode, t0.id, t0.version, t0.city, t0.state, t0.street, t0.zip, t0.name FROM TCUSTOMER t0 \r\n DELETE FROM TCUSTOMER WHERE countryCode = ? AND id = ? AND version = ?\r\n DELETE FROM TCUSTOMER WHERE countryCode = ? AND id = ? AND version = ?\r\n-INSERT INTO TORDER (oid, amount, delivered, shipAddress, version, customer_countryCode, customer_id) VALUES (?, ?, ?, ?, ?, ?, ?)\r\n+INSERT INTO TORDERXML (oid, amount, delivered, shipAddress, version, customer_countryCode, customer_id) VALUES (?, ?, ?, ?, ?, ?, ?)\r\n INSERT INTO TCUSTOMER (countryCode, id, creditRating, name, version, city, state, street, zip) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)\r\n INSERT INTO TCUSTOMER (countryCode, id, creditRating, name, version, city, state, street, zip) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)\r\n-INSERT INTO TORDER (oid, amount, delivered, shipAddress, version, customer_countryCode, customer_id) VALUES (?, ?, ?, ?, ?, ?, ?)\r\n-SELECT t0.shipAddress FROM TORDER t0 \r\n-SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress FROM TORDER t0 \r\n+INSERT INTO TORDERXML (oid, amount, delivered, shipAddress, version, customer_countryCode, customer_id) VALUES (?, ?, ?, ?, ?, ?, ?)\r\n+SELECT t0.shipAddress FROM TORDERXML t0 \r\n+SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress FROM TORDERXML t0 \r\n SELECT t0.version, t0.countryCode, t0.id, t0.city, t0.state, t0.street, t0.zip, t0.name FROM TCUSTOMER t0 WHERE t0.countryCode = ? AND t0.id = ?  optimize for 1 row\r\n-SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress FROM TORDER t0 JOIN TORDER t1 ON (1 = 1) WHERE (XMLEXISTS('$t0.shipAddress/*[City = $t1.shipAddress/*/City]' PASSING t0.shipAddress AS \"t0.shipAddress\", t1.shipAddress AS \"t1.shipAddress\")) \r\n-SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress FROM TORDER t0 JOIN TCUSTOMER t1 ON (1 = 1) WHERE (XMLEXISTS('$t0.shipAddress/*[City = $t1.city]' PASSING t0.shipAddress AS \"t0.shipAddress\", t1.city AS \"t1.city\")) \r\n-SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress FROM TORDER t0 WHERE (XMLEXISTS('$t0.shipAddress/*[City = $Parm]' PASSING t0.shipAddress AS \"t0.shipAddress\", CAST(? AS VARCHAR(254)) AS \"Parm\")) \r\n-SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress FROM TORDER t0 WHERE (XMLEXISTS('$t0.shipAddress/*[City = $Parm]' PASSING t0.shipAddress AS \"t0.shipAddress\", CAST(? AS VARCHAR(254)) AS \"Parm\")) \r\n-SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress FROM TORDER t0 WHERE (XMLEXISTS('$t0.shipAddress/*[City = $Parm]' PASSING t0.shipAddress AS \"t0.shipAddress\", CAST(? AS VARCHAR(254)) AS \"Parm\")) \r\n-SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress FROM TORDER t0 WHERE (XMLEXISTS('$t0.shipAddress/*[City = $Parm]' PASSING t0.shipAddress AS \"t0.shipAddress\", CAST(? AS VARCHAR(254)) AS \"Parm\")) \r\n+SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress FROM TORDERXML t0 JOIN TORDERXML t1 ON (1 = 1) WHERE (XMLEXISTS('$t0.shipAddress/*[City = $t1.shipAddress/*/City]' PASSING t0.shipAddress AS \"t0.shipAddress\", t1.shipAddress AS \"t1.shipAddress\")) \r\n+SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress FROM TORDERXML t0 JOIN TCUSTOMER t1 ON (1 = 1) WHERE (XMLEXISTS('$t0.shipAddress/*[City = $t1.city]' PASSING t0.shipAddress AS \"t0.shipAddress\", t1.city AS \"t1.city\")) \r\n+SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress FROM TORDERXML t0 WHERE (XMLEXISTS('$t0.shipAddress/*[City = $Parm]' PASSING t0.shipAddress AS \"t0.shipAddress\", CAST(? AS VARCHAR(254)) AS \"Parm\")) \r\n+SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress FROM TORDERXML t0 WHERE (XMLEXISTS('$t0.shipAddress/*[City = $Parm]' PASSING t0.shipAddress AS \"t0.shipAddress\", CAST(? AS VARCHAR(254)) AS \"Parm\")) \r\n+SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress FROM TORDERXML t0 WHERE (XMLEXISTS('$t0.shipAddress/*[City = $Parm]' PASSING t0.shipAddress AS \"t0.shipAddress\", CAST(? AS VARCHAR(254)) AS \"Parm\")) \r\n+SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress FROM TORDERXML t0 WHERE (XMLEXISTS('$t0.shipAddress/*[City = $Parm]' PASSING t0.shipAddress AS \"t0.shipAddress\", CAST(? AS VARCHAR(254)) AS \"Parm\")) \r\n SELECT t0.version, t0.countryCode, t0.id, t0.city, t0.state, t0.street, t0.zip, t0.name FROM TCUSTOMER t0 WHERE t0.countryCode = ? AND t0.id = ?  optimize for 1 row\r\n-UPDATE TORDER SET shipAddress = ?, version = ? WHERE oid = ? AND version = ?\r\n-SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress FROM TORDER t0 \r\n+UPDATE TORDERXML SET shipAddress = ?, version = ? WHERE oid = ? AND version = ?\r\n+SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress FROM TORDERXML t0 \r\n SELECT t0.version, t0.countryCode, t0.id, t0.city, t0.state, t0.street, t0.zip, t0.name FROM TCUSTOMER t0 WHERE t0.countryCode = ? AND t0.id = ?  optimize for 1 row\r"},{"sha":"2e58884b44283b3aa4b0937cc05839d372d6dfe5","filename":"openjpa-persistence-jdbc/src/test/resources/org/apache/openjpa/persistence/xmlmapping/query/TestXMLCustomerOrder.mysql","status":"modified","additions":5,"deletions":5,"changes":10,"blob_url":"https://github.com/apache/openjpa/blob/919be02042d1d458b16c5610276e6eb0a6a0a0ee/openjpa-persistence-jdbc/src/test/resources/org/apache/openjpa/persistence/xmlmapping/query/TestXMLCustomerOrder.mysql","raw_url":"https://github.com/apache/openjpa/raw/919be02042d1d458b16c5610276e6eb0a6a0a0ee/openjpa-persistence-jdbc/src/test/resources/org/apache/openjpa/persistence/xmlmapping/query/TestXMLCustomerOrder.mysql","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/resources/org/apache/openjpa/persistence/xmlmapping/query/TestXMLCustomerOrder.mysql?ref=919be02042d1d458b16c5610276e6eb0a6a0a0ee","patch":"@@ -15,8 +15,8 @@\n -- specific language governing permissions and limitations\r\n -- under the License.    \r\n \r\n-SELECT t0.shipAddress, t0.oid FROM TORDER t0 ORDER BY t0.oid ASC\r\n-SELECT t0.oid, t1.oid FROM TORDER t0 CROSS JOIN TORDER t1 WHERE (ExtractValue(t0.shipAddress,'/*/City') = ExtractValue(t1.shipAddress,'/*/City')) ORDER BY t0.oid ASC\r\n-SELECT t0.oid, t0.version, t0.amount, t0.CUSTOMER_COUNTRYCODE, t0.CUSTOMER_ID, t0.delivered, t0.shipAddress FROM TORDER t0 CROSS JOIN TCUSTOMER t1 WHERE (ExtractValue(t0.shipAddress,'/*/City') = t1.city)\r\n-SELECT t0.oid, t0.version, t0.amount, t0.CUSTOMER_COUNTRYCODE, t0.CUSTOMER_ID, t0.delivered, t0.shipAddress FROM TORDER t0 WHERE (ExtractValue(t0.shipAddress,'/*/City') = ?)\r\n-SELECT t0.oid, t0.version, t0.amount, t0.CUSTOMER_COUNTRYCODE, t0.CUSTOMER_ID, t0.delivered, t0.shipAddress FROM TORDER t0 WHERE (? = ExtractValue(t0.shipAddress,'/*/City'))\r\n+SELECT t0.shipAddress, t0.oid FROM TORDERXML t0 ORDER BY t0.oid ASC\r\n+SELECT t0.oid, t1.oid FROM TORDERXML t0 CROSS JOIN TORDERXML t1 WHERE (ExtractValue(t0.shipAddress,'/*/City') = ExtractValue(t1.shipAddress,'/*/City')) ORDER BY t0.oid ASC\r\n+SELECT t0.oid, t0.version, t0.amount, t0.CUSTOMER_COUNTRYCODE, t0.CUSTOMER_ID, t0.delivered, t0.shipAddress FROM TORDERXML t0 CROSS JOIN TCUSTOMER t1 WHERE (ExtractValue(t0.shipAddress,'/*/City') = t1.city)\r\n+SELECT t0.oid, t0.version, t0.amount, t0.CUSTOMER_COUNTRYCODE, t0.CUSTOMER_ID, t0.delivered, t0.shipAddress FROM TORDERXML t0 WHERE (ExtractValue(t0.shipAddress,'/*/City') = ?)\r\n+SELECT t0.oid, t0.version, t0.amount, t0.CUSTOMER_COUNTRYCODE, t0.CUSTOMER_ID, t0.delivered, t0.shipAddress FROM TORDERXML t0 WHERE (? = ExtractValue(t0.shipAddress,'/*/City'))\r"},{"sha":"9d5ef9a47692ec38c33973ab2f3ff25d2ac13280","filename":"openjpa-persistence-jdbc/src/test/resources/org/apache/openjpa/persistence/xmlmapping/query/TestXMLCustomerOrder.oracle","status":"modified","additions":13,"deletions":13,"changes":26,"blob_url":"https://github.com/apache/openjpa/blob/919be02042d1d458b16c5610276e6eb0a6a0a0ee/openjpa-persistence-jdbc/src/test/resources/org/apache/openjpa/persistence/xmlmapping/query/TestXMLCustomerOrder.oracle","raw_url":"https://github.com/apache/openjpa/raw/919be02042d1d458b16c5610276e6eb0a6a0a0ee/openjpa-persistence-jdbc/src/test/resources/org/apache/openjpa/persistence/xmlmapping/query/TestXMLCustomerOrder.oracle","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/resources/org/apache/openjpa/persistence/xmlmapping/query/TestXMLCustomerOrder.oracle?ref=919be02042d1d458b16c5610276e6eb0a6a0a0ee","patch":"@@ -15,24 +15,24 @@\n -- specific language governing permissions and limitations\r\n -- under the License.    \r\n \r\n-DELETE FROM TORDER t0\r\n+DELETE FROM TORDERXML t0\r\n SELECT t0.countryCode, t0.id, t0.version, t0.city, t0.state, t0.street, t0.zip, t0.name FROM TCUSTOMER t0\r\n DELETE FROM TCUSTOMER WHERE countryCode = ? AND id = ? AND version = ?\r\n DELETE FROM TCUSTOMER WHERE countryCode = ? AND id = ? AND version = ?\r\n-INSERT INTO TORDER (oid, amount, delivered, shipAddress, version, customer_countryCode, customer_id) VALUES (?, ?, ?, ?, ?, ?, ?)\r\n-INSERT INTO TORDER (oid, amount, delivered, shipAddress, version, customer_countryCode, customer_id) VALUES (?, ?, ?, ?, ?, ?, ?)\r\n+INSERT INTO TORDERXML (oid, amount, delivered, shipAddress, version, customer_countryCode, customer_id) VALUES (?, ?, ?, ?, ?, ?, ?)\r\n+INSERT INTO TORDERXML (oid, amount, delivered, shipAddress, version, customer_countryCode, customer_id) VALUES (?, ?, ?, ?, ?, ?, ?)\r\n INSERT INTO TCUSTOMER (countryCode, id, creditRating, name, version, city, state, street, zip) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)\r\n INSERT INTO TCUSTOMER (countryCode, id, creditRating, name, version, city, state, street, zip) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)\r\n-SELECT t0.shipAddress.getStringVal() FROM TORDER t0\r\n-SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress.getStringVal() FROM TORDER t0\r\n+SELECT t0.shipAddress.getStringVal() FROM TORDERXML t0\r\n+SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress.getStringVal() FROM TORDERXML t0\r\n SELECT t0.version, t0.countryCode, t0.id, t0.city, t0.state, t0.street, t0.zip, t0.name FROM TCUSTOMER t0 WHERE t0.countryCode = ? AND t0.id = ?\r\n-SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress.getStringVal() FROM TORDER t0, TORDER t1 WHERE (extractValue(t0.shipAddress,'/*/City') = extractValue(t1.shipAddress,'/*/City'))\r\n-SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress.getStringVal() FROM TORDER t0, TCUSTOMER t1 WHERE (extractValue(t0.shipAddress,'/*/City') = t1.city)\r\n-SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress.getStringVal() FROM TORDER t0 WHERE (extractValue(t0.shipAddress,'/*/City') = ?)\r\n-SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress.getStringVal() FROM TORDER t0 WHERE (extractValue(t0.shipAddress,'/*/City') = ?)\r\n-SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress.getStringVal() FROM TORDER t0 WHERE (extractValue(t0.shipAddress,'/*/City') = ?)\r\n-SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress.getStringVal() FROM TORDER t0 WHERE (extractValue(t0.shipAddress,'/*/City') = ?)\r\n+SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress.getStringVal() FROM TORDERXML t0, TORDERXML t1 WHERE (extractValue(t0.shipAddress,'/*/City') = extractValue(t1.shipAddress,'/*/City'))\r\n+SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress.getStringVal() FROM TORDERXML t0, TCUSTOMER t1 WHERE (extractValue(t0.shipAddress,'/*/City') = t1.city)\r\n+SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress.getStringVal() FROM TORDERXML t0 WHERE (extractValue(t0.shipAddress,'/*/City') = ?)\r\n+SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress.getStringVal() FROM TORDERXML t0 WHERE (extractValue(t0.shipAddress,'/*/City') = ?)\r\n+SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress.getStringVal() FROM TORDERXML t0 WHERE (extractValue(t0.shipAddress,'/*/City') = ?)\r\n+SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress.getStringVal() FROM TORDERXML t0 WHERE (extractValue(t0.shipAddress,'/*/City') = ?)\r\n SELECT t0.version, t0.countryCode, t0.id, t0.city, t0.state, t0.street, t0.zip, t0.name FROM TCUSTOMER t0 WHERE t0.countryCode = ? AND t0.id = ?\r\n-UPDATE TORDER SET shipAddress = ?, version = ? WHERE oid = ? AND version = ?\r\n-SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress.getStringVal() FROM TORDER t0\r\n+UPDATE TORDERXML SET shipAddress = ?, version = ? WHERE oid = ? AND version = ?\r\n+SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress.getStringVal() FROM TORDERXML t0\r\n SELECT t0.version, t0.countryCode, t0.id, t0.city, t0.state, t0.street, t0.zip, t0.name FROM TCUSTOMER t0 WHERE t0.countryCode = ? AND t0.id = ?\r"},{"sha":"2fc07baedbcd2d0152c444ef6b33241017c93267","filename":"openjpa-persistence-jdbc/src/test/resources/org/apache/openjpa/persistence/xmlmapping/query/TestXMLCustomerOrder.postgres","status":"modified","additions":5,"deletions":5,"changes":10,"blob_url":"https://github.com/apache/openjpa/blob/919be02042d1d458b16c5610276e6eb0a6a0a0ee/openjpa-persistence-jdbc/src/test/resources/org/apache/openjpa/persistence/xmlmapping/query/TestXMLCustomerOrder.postgres","raw_url":"https://github.com/apache/openjpa/raw/919be02042d1d458b16c5610276e6eb0a6a0a0ee/openjpa-persistence-jdbc/src/test/resources/org/apache/openjpa/persistence/xmlmapping/query/TestXMLCustomerOrder.postgres","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/resources/org/apache/openjpa/persistence/xmlmapping/query/TestXMLCustomerOrder.postgres?ref=919be02042d1d458b16c5610276e6eb0a6a0a0ee","patch":"@@ -15,8 +15,8 @@\n -- specific language governing permissions and limitations\r\n -- under the License.    \r\n \r\n-SELECT t0.shipAddress, t0.oid FROM TORDER t0 ORDER BY t0.oid ASC\r\n-SELECT t0.oid, t1.oid FROM TORDER t0 CROSS JOIN TORDER t1 WHERE (CAST((xpath('/*/City/text()',t0.shipAddress))[1] AS VARCHAR) = CAST((xpath('/*/City/text()',t1.shipAddress))[1] AS VARCHAR)) ORDER BY t0.oid ASC\r\n-SELECT t0.oid, t0.version, t0.amount, t0.CUSTOMER_COUNTRYCODE, t0.CUSTOMER_ID, t0.delivered, t0.shipAddress FROM TORDER t0 CROSS JOIN TCUSTOMER t1 WHERE (CAST((xpath('/*/City/text()',t0.shipAddress))[1] AS VARCHAR) = t1.city)\r\n-SELECT t0.oid, t0.version, t0.amount, t0.CUSTOMER_COUNTRYCODE, t0.CUSTOMER_ID, t0.delivered, t0.shipAddress FROM TORDER t0 WHERE (CAST((xpath('/*/City/text()',t0.shipAddress))[1] AS VARCHAR) = ?)\r\n-SELECT t0.oid, t0.version, t0.amount, t0.CUSTOMER_COUNTRYCODE, t0.CUSTOMER_ID, t0.delivered, t0.shipAddress FROM TORDER t0 WHERE (? = CAST((xpath('/*/City/text()',t0.shipAddress))[1] AS VARCHAR))\r\n+SELECT t0.shipAddress, t0.oid FROM TORDERXML t0 ORDER BY t0.oid ASC\r\n+SELECT t0.oid, t1.oid FROM TORDERXML t0 CROSS JOIN TORDERXML t1 WHERE (CAST((xpath('/*/City/text()',t0.shipAddress))[1] AS VARCHAR) = CAST((xpath('/*/City/text()',t1.shipAddress))[1] AS VARCHAR)) ORDER BY t0.oid ASC\r\n+SELECT t0.oid, t0.version, t0.amount, t0.CUSTOMER_COUNTRYCODE, t0.CUSTOMER_ID, t0.delivered, t0.shipAddress FROM TORDERXML t0 CROSS JOIN TCUSTOMER t1 WHERE (CAST((xpath('/*/City/text()',t0.shipAddress))[1] AS VARCHAR) = t1.city)\r\n+SELECT t0.oid, t0.version, t0.amount, t0.CUSTOMER_COUNTRYCODE, t0.CUSTOMER_ID, t0.delivered, t0.shipAddress FROM TORDERXML t0 WHERE (CAST((xpath('/*/City/text()',t0.shipAddress))[1] AS VARCHAR) = ?)\r\n+SELECT t0.oid, t0.version, t0.amount, t0.CUSTOMER_COUNTRYCODE, t0.CUSTOMER_ID, t0.delivered, t0.shipAddress FROM TORDERXML t0 WHERE (? = CAST((xpath('/*/City/text()',t0.shipAddress))[1] AS VARCHAR))\r"},{"sha":"cf458f4a70c11c0d9ab928823f081a0c1cb3f59e","filename":"openjpa-persistence-jdbc/src/test/resources/org/apache/openjpa/persistence/xmlmapping/query/TestXMLCustomerOrder.sqlserver","status":"modified","additions":13,"deletions":13,"changes":26,"blob_url":"https://github.com/apache/openjpa/blob/919be02042d1d458b16c5610276e6eb0a6a0a0ee/openjpa-persistence-jdbc/src/test/resources/org/apache/openjpa/persistence/xmlmapping/query/TestXMLCustomerOrder.sqlserver","raw_url":"https://github.com/apache/openjpa/raw/919be02042d1d458b16c5610276e6eb0a6a0a0ee/openjpa-persistence-jdbc/src/test/resources/org/apache/openjpa/persistence/xmlmapping/query/TestXMLCustomerOrder.sqlserver","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/resources/org/apache/openjpa/persistence/xmlmapping/query/TestXMLCustomerOrder.sqlserver?ref=919be02042d1d458b16c5610276e6eb0a6a0a0ee","patch":"@@ -15,24 +15,24 @@\n -- specific language governing permissions and limitations\n -- under the License.    \n \n-DELETE FROM TORDER\n+DELETE FROM TORDERXML\n SELECT t0.countryCode, t0.id, t0.version, t0.city, t0.state, t0.street, t0.zip, t0.name FROM TCUSTOMER t0\n DELETE FROM TCUSTOMER WHERE countryCode = ? AND id = ? AND version = ?\n DELETE FROM TCUSTOMER WHERE countryCode = ? AND id = ? AND version = ?\n-INSERT INTO TORDER (oid, amount, delivered, shipAddress, version, customer_countryCode, customer_id) VALUES (?, ?, ?, ?, ?, ?, ?)\n-INSERT INTO TORDER (oid, amount, delivered, shipAddress, version, customer_countryCode, customer_id) VALUES (?, ?, ?, ?, ?, ?, ?)\n+INSERT INTO TORDERXML (oid, amount, delivered, shipAddress, version, customer_countryCode, customer_id) VALUES (?, ?, ?, ?, ?, ?, ?)\n+INSERT INTO TORDERXML (oid, amount, delivered, shipAddress, version, customer_countryCode, customer_id) VALUES (?, ?, ?, ?, ?, ?, ?)\n INSERT INTO TCUSTOMER (countryCode, id, creditRating, name, version, city, state, street, zip) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)\n INSERT INTO TCUSTOMER (countryCode, id, creditRating, name, version, city, state, street, zip) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)\n-SELECT t0.shipAddress FROM TORDER t0\n-SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress FROM TORDER t0\n+SELECT t0.shipAddress FROM TORDERXML t0\n+SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress FROM TORDERXML t0\n SELECT t0.version, t0.countryCode, t0.id, t0.city, t0.state, t0.street, t0.zip, t0.name FROM TCUSTOMER t0 WHERE t0.countryCode = ? AND t0.id = ?\n-SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress FROM TORDER t0 CROSS JOIN TORDER t1 WHERE (t0.shipAddress.value('(/*/City/text())[1]','VARCHAR(255)') = t1.shipAddress.value('(/*/City/text())[1]','VARCHAR(255)'))\n-SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress FROM TORDER t0 CROSS JOIN TCUSTOMER t1 WHERE (t0.shipAddress.exist('/*[City = sql:column(\"t1.city\")]') = 1)\n-SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress FROM TORDER t0 WHERE (t0.shipAddress.value('(/*/City/text())[1]','VARCHAR(255)') = ?)\n-SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress FROM TORDER t0 WHERE (t0.shipAddress.value('(/*/City/text())[1]','VARCHAR(255)') = ?)\n-SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress FROM TORDER t0 WHERE (t0.shipAddress.value('(/*/City/text())[1]','VARCHAR(255)') = ?)\n-SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress FROM TORDER t0 WHERE (t0.shipAddress.value('(/*/City/text())[1]','VARCHAR(255)') = ?)\n+SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress FROM TORDERXML t0 CROSS JOIN TORDERXML t1 WHERE (t0.shipAddress.value('(/*/City/text())[1]','VARCHAR(255)') = t1.shipAddress.value('(/*/City/text())[1]','VARCHAR(255)'))\n+SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress FROM TORDERXML t0 CROSS JOIN TCUSTOMER t1 WHERE (t0.shipAddress.exist('/*[City = sql:column(\"t1.city\")]') = 1)\n+SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress FROM TORDERXML t0 WHERE (t0.shipAddress.value('(/*/City/text())[1]','VARCHAR(255)') = ?)\n+SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress FROM TORDERXML t0 WHERE (t0.shipAddress.value('(/*/City/text())[1]','VARCHAR(255)') = ?)\n+SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress FROM TORDERXML t0 WHERE (t0.shipAddress.value('(/*/City/text())[1]','VARCHAR(255)') = ?)\n+SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress FROM TORDERXML t0 WHERE (t0.shipAddress.value('(/*/City/text())[1]','VARCHAR(255)') = ?)\n SELECT t0.version, t0.countryCode, t0.id, t0.city, t0.state, t0.street, t0.zip, t0.name FROM TCUSTOMER t0 WHERE t0.countryCode = ? AND t0.id = ?\n-UPDATE TORDER SET shipAddress = ?, version = ? WHERE oid = ? AND version = ?\n-SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress FROM TORDER t0\n+UPDATE TORDERXML SET shipAddress = ?, version = ? WHERE oid = ? AND version = ?\n+SELECT t0.oid, t0.version, t0.amount, t0.customer_countryCode, t0.customer_id, t0.delivered, t0.shipAddress FROM TORDERXML t0\n SELECT t0.version, t0.countryCode, t0.id, t0.city, t0.state, t0.street, t0.zip, t0.name FROM TCUSTOMER t0 WHERE t0.countryCode = ? AND t0.id = ?"}]}

