{"sha":"9316b8157d3d5c3f91bf9612c944dc462198cb5b","node_id":"MDY6Q29tbWl0MjA2MzY0OjkzMTZiODE1N2QzZDVjM2Y5MWJmOTYxMmM5NDRkYzQ2MjE5OGNiNWI=","commit":{"author":{"name":"David J. Wisneski","email":"wisneskid@apache.org","date":"2007-07-24T19:40:09Z"},"committer":{"name":"David J. Wisneski","email":"wisneskid@apache.org","date":"2007-07-24T19:40:09Z"},"message":"OPENJPA-240 XMLMapping Query - rename XMLMetaData to XMLFieldMetaData\nHelp Catalina committing changes for renaming classes, part 1.\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@559172 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"f074810c1f6c472f4e7b34d0606dcf8fe49c9e48","url":"https://api.github.com/repos/apache/openjpa/git/trees/f074810c1f6c472f4e7b34d0606dcf8fe49c9e48"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/9316b8157d3d5c3f91bf9612c944dc462198cb5b","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/9316b8157d3d5c3f91bf9612c944dc462198cb5b","html_url":"https://github.com/apache/openjpa/commit/9316b8157d3d5c3f91bf9612c944dc462198cb5b","comments_url":"https://api.github.com/repos/apache/openjpa/commits/9316b8157d3d5c3f91bf9612c944dc462198cb5b/comments","author":null,"committer":null,"parents":[{"sha":"126ed03a3b7bc4c66fa50c867a760c9fd6d37380","url":"https://api.github.com/repos/apache/openjpa/commits/126ed03a3b7bc4c66fa50c867a760c9fd6d37380","html_url":"https://github.com/apache/openjpa/commit/126ed03a3b7bc4c66fa50c867a760c9fd6d37380"}],"stats":{"total":22,"additions":14,"deletions":8},"files":[{"sha":"e3b79dd59a6c42fc3b8f47a6b1bfb3c8e84a9277","filename":"openjpa-jdbc-5/src/main/java/org/apache/openjpa/meta/XMLClassMetaData.java","status":"modified","additions":12,"deletions":6,"changes":18,"blob_url":"https://github.com/apache/openjpa/blob/9316b8157d3d5c3f91bf9612c944dc462198cb5b/openjpa-jdbc-5/src/main/java/org/apache/openjpa/meta/XMLClassMetaData.java","raw_url":"https://github.com/apache/openjpa/raw/9316b8157d3d5c3f91bf9612c944dc462198cb5b/openjpa-jdbc-5/src/main/java/org/apache/openjpa/meta/XMLClassMetaData.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc-5/src/main/java/org/apache/openjpa/meta/XMLClassMetaData.java?ref=9316b8157d3d5c3f91bf9612c944dc462198cb5b","patch":"@@ -33,7 +33,7 @@\n import org.apache.openjpa.jdbc.meta.XMLMappingRepository;\n import org.apache.openjpa.meta.JavaTypes;\n import org.apache.openjpa.meta.XMLMapping;\n-import org.apache.openjpa.meta.XMLMetaData;\n+import org.apache.openjpa.meta.XMLFieldMetaData;\n import org.apache.commons.lang.StringUtils;\n \n /**\n@@ -178,8 +178,14 @@ public int getXmltype() {\n \n     private synchronized void populateFromReflection(Class cls, \n         XMLMappingRepository repos) {\n-        Member[] members;\n-        if (((XmlAccessorType)cls.getAnnotation(XmlAccessorType.class)).value()\n+        Member[] members; \n+        Class superclass = cls.getSuperclass();\n+\n+        // handle inheritance at sub-element level\n+        if (superclass.isAnnotationPresent(XmlType.class))\n+            populateFromReflection(superclass, repos);\n+\n+        if (((XmlAccessorType) cls.getAnnotation(XmlAccessorType.class)).value()\n                 == XmlAccessType.FIELD)\n             members = cls.getDeclaredFields();\n         else\n@@ -201,16 +207,16 @@ private synchronized void populateFromReflection(Class cls,\n                     field.setXmlname(xmlname);\n                 }\n                 else {\n-                    field = new XMLMetaData();\n+                    field = new XMLFieldMetaData();\n                     field.setXmltype(ELEMENT);\n                     field.setXmlname(xmlname);\n                     field.setXmlnamespace(el.getAnnotation(XmlElement.class)\n                             .namespace());                    \n                 }\n             }\n             else if (el.getAnnotation(XmlAttribute.class) != null) {\n-                field = new XMLMetaData();\n-                field.setXmltype(XMLMetaData.ATTRIBUTE);\n+                field = new XMLFieldMetaData();\n+                field.setXmltype(XMLFieldMetaData.ATTRIBUTE);\n                 String xmlname = el.getAnnotation(XmlAttribute.class).name();\n                 // avoid JAXB XML bind default name\n                 if (StringUtils.equals(defaultName, xmlname))"},{"sha":"31ee865b4cde8c3ed844b2a0ce886f42446221c7","filename":"openjpa-kernel/src/main/java/org/apache/openjpa/meta/XMLFieldMetaData.java","status":"renamed","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/apache/openjpa/blob/9316b8157d3d5c3f91bf9612c944dc462198cb5b/openjpa-kernel/src/main/java/org/apache/openjpa/meta/XMLFieldMetaData.java","raw_url":"https://github.com/apache/openjpa/raw/9316b8157d3d5c3f91bf9612c944dc462198cb5b/openjpa-kernel/src/main/java/org/apache/openjpa/meta/XMLFieldMetaData.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/java/org/apache/openjpa/meta/XMLFieldMetaData.java?ref=9316b8157d3d5c3f91bf9612c944dc462198cb5b","patch":"@@ -26,7 +26,7 @@\n  * @author Catalina Wei\n  * @since 1.0.0\n  */\n-public class XMLMetaData implements XMLMapping {\n+public class XMLFieldMetaData implements XMLMapping {\n \n     private String _name;\n     private String _xmlname = null;\n@@ -37,7 +37,7 @@\n     private int _code = JavaTypes.OBJECT;\n     private int _xmltype;    \n \n-    public XMLMetaData() {        \n+    public XMLFieldMetaData() {        \n     }\n     \n     public Class getType() {","previous_filename":"openjpa-kernel/src/main/java/org/apache/openjpa/meta/XMLMetaData.java"}]}

