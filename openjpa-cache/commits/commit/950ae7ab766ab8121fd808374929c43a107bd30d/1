{"sha":"950ae7ab766ab8121fd808374929c43a107bd30d","node_id":"MDY6Q29tbWl0MjA2MzY0Ojk1MGFlN2FiNzY2YWI4MTIxZmQ4MDgzNzQ5MjljNDNhMTA3YmQzMGQ=","commit":{"author":{"name":"Mark Struberg","email":"struberg@apache.org","date":"2015-04-16T20:35:10Z"},"committer":{"name":"Mark Struberg","email":"struberg@apache.org","date":"2015-04-16T20:35:10Z"},"message":"OPENJPA-2287 do not clear object fields for fetchObjectField\n\n* Other objects do not get cleared neither.\n* The code dates from JDO times and I've asked a few people and no one had an explanation for it\n* It introduces nullpointer exceptions in cases where we have to navigate over the field a few times. E.g. in complex scenarios.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@1674148 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"1c8819f1328d4332494584ab0895e2a9c3f8a2f3","url":"https://api.github.com/repos/apache/openjpa/git/trees/1c8819f1328d4332494584ab0895e2a9c3f8a2f3"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/950ae7ab766ab8121fd808374929c43a107bd30d","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/950ae7ab766ab8121fd808374929c43a107bd30d","html_url":"https://github.com/apache/openjpa/commit/950ae7ab766ab8121fd808374929c43a107bd30d","comments_url":"https://api.github.com/repos/apache/openjpa/commits/950ae7ab766ab8121fd808374929c43a107bd30d/comments","author":{"login":"struberg","id":79310,"node_id":"MDQ6VXNlcjc5MzEw","avatar_url":"https://avatars.githubusercontent.com/u/79310?v=4","gravatar_id":"","url":"https://api.github.com/users/struberg","html_url":"https://github.com/struberg","followers_url":"https://api.github.com/users/struberg/followers","following_url":"https://api.github.com/users/struberg/following{/other_user}","gists_url":"https://api.github.com/users/struberg/gists{/gist_id}","starred_url":"https://api.github.com/users/struberg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/struberg/subscriptions","organizations_url":"https://api.github.com/users/struberg/orgs","repos_url":"https://api.github.com/users/struberg/repos","events_url":"https://api.github.com/users/struberg/events{/privacy}","received_events_url":"https://api.github.com/users/struberg/received_events","type":"User","site_admin":false},"committer":{"login":"struberg","id":79310,"node_id":"MDQ6VXNlcjc5MzEw","avatar_url":"https://avatars.githubusercontent.com/u/79310?v=4","gravatar_id":"","url":"https://api.github.com/users/struberg","html_url":"https://github.com/struberg","followers_url":"https://api.github.com/users/struberg/followers","following_url":"https://api.github.com/users/struberg/following{/other_user}","gists_url":"https://api.github.com/users/struberg/gists{/gist_id}","starred_url":"https://api.github.com/users/struberg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/struberg/subscriptions","organizations_url":"https://api.github.com/users/struberg/orgs","repos_url":"https://api.github.com/users/struberg/repos","events_url":"https://api.github.com/users/struberg/events{/privacy}","received_events_url":"https://api.github.com/users/struberg/received_events","type":"User","site_admin":false},"parents":[{"sha":"7b1c24e1fa855114a28a7c065039798a5a0ef704","url":"https://api.github.com/repos/apache/openjpa/commits/7b1c24e1fa855114a28a7c065039798a5a0ef704","html_url":"https://github.com/apache/openjpa/commit/7b1c24e1fa855114a28a7c065039798a5a0ef704"}],"stats":{"total":14,"additions":3,"deletions":11},"files":[{"sha":"f5be8cac778bf00d60d7080f0d8437b96702e03a","filename":"openjpa-kernel/src/main/java/org/apache/openjpa/kernel/SaveFieldManager.java","status":"modified","additions":1,"deletions":3,"changes":4,"blob_url":"https://github.com/apache/openjpa/blob/950ae7ab766ab8121fd808374929c43a107bd30d/openjpa-kernel/src/main/java/org/apache/openjpa/kernel/SaveFieldManager.java","raw_url":"https://github.com/apache/openjpa/raw/950ae7ab766ab8121fd808374929c43a107bd30d/openjpa-kernel/src/main/java/org/apache/openjpa/kernel/SaveFieldManager.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/java/org/apache/openjpa/kernel/SaveFieldManager.java?ref=950ae7ab766ab8121fd808374929c43a107bd30d","patch":"@@ -193,9 +193,7 @@ public boolean isFieldEqual(int field, Object current) {\n \n     public Object fetchObjectField(int field) {\n         // return the copied field during save, or a null value during restore\n-        Object val = _field;\n-        _field = null;\n-        return val;\n+        return _field;\n     }\n \n     public void storeObjectField(int field, Object curVal) {"},{"sha":"a7d8e7aa7642475601a72e2119f4f2f3f839fb9d","filename":"openjpa-kernel/src/main/java/org/apache/openjpa/kernel/SavepointFieldManager.java","status":"modified","additions":1,"deletions":4,"changes":5,"blob_url":"https://github.com/apache/openjpa/blob/950ae7ab766ab8121fd808374929c43a107bd30d/openjpa-kernel/src/main/java/org/apache/openjpa/kernel/SavepointFieldManager.java","raw_url":"https://github.com/apache/openjpa/raw/950ae7ab766ab8121fd808374929c43a107bd30d/openjpa-kernel/src/main/java/org/apache/openjpa/kernel/SavepointFieldManager.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/java/org/apache/openjpa/kernel/SavepointFieldManager.java?ref=950ae7ab766ab8121fd808374929c43a107bd30d","patch":"@@ -194,10 +194,7 @@ public boolean restoreField(int field) {\n     }\n \n     public Object fetchObjectField(int field) {\n-        // return the copied field during save, or a null value during restore\n-        Object val = _field;\n-        _field = null;\n-        return val;\n+        return _field;\n     }\n \n     public void storeObjectField(int field, Object curVal) {"},{"sha":"8bbaa910b09ea8763331cd3d4fa0cbcdabc8aad3","filename":"openjpa-kernel/src/main/java/org/apache/openjpa/kernel/TransferFieldManager.java","status":"modified","additions":1,"deletions":4,"changes":5,"blob_url":"https://github.com/apache/openjpa/blob/950ae7ab766ab8121fd808374929c43a107bd30d/openjpa-kernel/src/main/java/org/apache/openjpa/kernel/TransferFieldManager.java","raw_url":"https://github.com/apache/openjpa/raw/950ae7ab766ab8121fd808374929c43a107bd30d/openjpa-kernel/src/main/java/org/apache/openjpa/kernel/TransferFieldManager.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/java/org/apache/openjpa/kernel/TransferFieldManager.java?ref=950ae7ab766ab8121fd808374929c43a107bd30d","patch":"@@ -62,10 +62,7 @@ public long fetchLongField(int field) {\n     }\n \n     public Object fetchObjectField(int field) {\n-        // don't hold onto strong ref to object\n-        Object val = objval;\n-        objval = null;\n-        return val;\n+        return objval;\n     }\n \n     public short fetchShortField(int field) {"}]}

