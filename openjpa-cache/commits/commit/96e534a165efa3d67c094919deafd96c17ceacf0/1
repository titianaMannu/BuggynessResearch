{"sha":"96e534a165efa3d67c094919deafd96c17ceacf0","node_id":"MDY6Q29tbWl0MjA2MzY0Ojk2ZTUzNGExNjVlZmEzZDY3YzA5NDkxOWRlYWZkOTZjMTdjZWFjZjA=","commit":{"author":{"name":"Patrick Linskey","email":"pcl@apache.org","date":"2006-08-25T21:00:19Z"},"committer":{"name":"Patrick Linskey","email":"pcl@apache.org","date":"2006-08-25T21:00:19Z"},"message":"moved POM to use ant task instead of java invocation; changed service invocations to use the classloader of the class being looked up to avoid issues with cyclic-static blocks; improved debug info\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/openjpa/trunk@436945 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"c141432f49582ca1208d05c099b17a1af7866e3a","url":"https://api.github.com/repos/apache/openjpa/git/trees/c141432f49582ca1208d05c099b17a1af7866e3a"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/96e534a165efa3d67c094919deafd96c17ceacf0","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/96e534a165efa3d67c094919deafd96c17ceacf0","html_url":"https://github.com/apache/openjpa/commit/96e534a165efa3d67c094919deafd96c17ceacf0","comments_url":"https://api.github.com/repos/apache/openjpa/commits/96e534a165efa3d67c094919deafd96c17ceacf0/comments","author":null,"committer":null,"parents":[{"sha":"45c89bd4556cdf21f7fc96327298a06825c51377","url":"https://api.github.com/repos/apache/openjpa/commits/45c89bd4556cdf21f7fc96327298a06825c51377","html_url":"https://github.com/apache/openjpa/commit/45c89bd4556cdf21f7fc96327298a06825c51377"}],"stats":{"total":41,"additions":23,"deletions":18},"files":[{"sha":"941840bd183f7750909478ba50faea6d1e22e27b","filename":"openjpa-kernel/src/main/java/org/apache/openjpa/conf/ProductDerivations.java","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/apache/openjpa/blob/96e534a165efa3d67c094919deafd96c17ceacf0/openjpa-kernel/src/main/java/org/apache/openjpa/conf/ProductDerivations.java","raw_url":"https://github.com/apache/openjpa/raw/96e534a165efa3d67c094919deafd96c17ceacf0/openjpa-kernel/src/main/java/org/apache/openjpa/conf/ProductDerivations.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/java/org/apache/openjpa/conf/ProductDerivations.java?ref=96e534a165efa3d67c094919deafd96c17ceacf0","patch":"@@ -37,13 +37,14 @@\n \n     static {\n         Class[] pdcls = Services.getImplementorClasses(ProductDerivation.class,\n-          ProductDerivations.class.getClassLoader());\n+          ProductDerivation.class.getClassLoader());\n         List derivations = new ArrayList(pdcls.length);\n         for (int i = 0; i < pdcls.length; i++) {\n             try {\n                 derivations.add(pdcls[i].newInstance());\n             } catch (Throwable t) {\n                 // invalid service\n+                t.printStackTrace();\n             }\n         }\n "},{"sha":"35ec29cfdf3c42b56ed5b26a64ecb13c6e3b568a","filename":"openjpa-kernel/src/main/java/org/apache/openjpa/enhance/PCEnhancer.java","status":"modified","additions":3,"deletions":2,"changes":5,"blob_url":"https://github.com/apache/openjpa/blob/96e534a165efa3d67c094919deafd96c17ceacf0/openjpa-kernel/src/main/java/org/apache/openjpa/enhance/PCEnhancer.java","raw_url":"https://github.com/apache/openjpa/raw/96e534a165efa3d67c094919deafd96c17ceacf0/openjpa-kernel/src/main/java/org/apache/openjpa/enhance/PCEnhancer.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/java/org/apache/openjpa/enhance/PCEnhancer.java?ref=96e534a165efa3d67c094919deafd96c17ceacf0","patch":"@@ -2616,8 +2616,9 @@ private BCClass getObjectIdBytecode(Class cls) {\n     public AuxiliaryEnhancer[] getAuxiliaryEnhancers() {\n \t\tif (_auxEnhancers == null) {\n \t\t    try {\n-                Class[] classes = Services.getImplementorClasses\n-                    (AuxiliaryEnhancer.class, getClass().getClassLoader());\n+                Class[] classes = Services.getImplementorClasses(\n+                    AuxiliaryEnhancer.class, \n+                    AuxiliaryEnhancer.class.getClassLoader());\n                 _auxEnhancers = new AuxiliaryEnhancer[classes.length];\n                 for (int i = 0; i < _auxEnhancers.length; i++)\n                     _auxEnhancers[i] = (AuxiliaryEnhancer) classes[i]."},{"sha":"a8140409809bd99c3dacf280d2eeb6de34836ae1","filename":"openjpa-kernel/src/main/java/org/apache/openjpa/kernel/QueryLanguages.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/apache/openjpa/blob/96e534a165efa3d67c094919deafd96c17ceacf0/openjpa-kernel/src/main/java/org/apache/openjpa/kernel/QueryLanguages.java","raw_url":"https://github.com/apache/openjpa/raw/96e534a165efa3d67c094919deafd96c17ceacf0/openjpa-kernel/src/main/java/org/apache/openjpa/kernel/QueryLanguages.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/java/org/apache/openjpa/kernel/QueryLanguages.java?ref=96e534a165efa3d67c094919deafd96c17ceacf0","patch":"@@ -34,7 +34,7 @@\n     static {\n         // Load and cache all the query languages available in the system.\n         Class[] classes = Services.getImplementorClasses(\n-            ExpressionParser.class, QueryLanguages.class.getClassLoader());\n+            ExpressionParser.class, ExpressionParser.class.getClassLoader());\n         for (int i = 0; i < classes.length; i++) {\n             ExpressionParser ep;\n             try {"},{"sha":"f964475d69fdfc69441fa4104f5e4f3be22fadfe","filename":"openjpa-kernel/src/main/resources/org/apache/openjpa/conf/localizer.properties","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/apache/openjpa/blob/96e534a165efa3d67c094919deafd96c17ceacf0/openjpa-kernel/src/main/resources/org/apache/openjpa/conf/localizer.properties","raw_url":"https://github.com/apache/openjpa/raw/96e534a165efa3d67c094919deafd96c17ceacf0/openjpa-kernel/src/main/resources/org/apache/openjpa/conf/localizer.properties","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/resources/org/apache/openjpa/conf/localizer.properties?ref=96e534a165efa3d67c094919deafd96c17ceacf0","patch":"@@ -544,4 +544,5 @@ no-product-derivations: Your system is missing product derivations.  Product \\\n     distribution.  Have you unbundled it, or unbundled its listed classes? \\\n     If you are using ant, a common solution to this problem is to place \\\n     the jar libraries of the OpenJPA distribution in the \\\n-    $'{user.home}/.ant/lib directory.\n+    $'{user.home}/.ant/lib directory. Another common cause of this problem \\\n+    is an overly-restrictive security manager."},{"sha":"2b74861815dbbb931c5417092842ea5e2256ccdb","filename":"openjpa-persistence-jdbc/pom.xml","status":"modified","additions":15,"deletions":13,"changes":28,"blob_url":"https://github.com/apache/openjpa/blob/96e534a165efa3d67c094919deafd96c17ceacf0/openjpa-persistence-jdbc/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/96e534a165efa3d67c094919deafd96c17ceacf0/openjpa-persistence-jdbc/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/pom.xml?ref=96e534a165efa3d67c094919deafd96c17ceacf0","patch":"@@ -62,22 +62,24 @@\n                         <phase>test-compile</phase>\n                         <configuration>\n                             <tasks>\n-                                <path id=\"enhance.path.ref\">\n-                                    <fileset dir=\"${project.build.testOutputDirectory}\">\n-                                        <include name=\"**/*.class\"/>\n-                                    </fileset>\n-                                </path>\n-                                <pathconvert property=\"enhance.files\"\n-                                             refid=\"enhance.path.ref\"\n-                                             pathsep=\" \"/>\n-                                <java classname=\"org.apache.openjpa.enhance.PCEnhancer\">\n-                                    <arg line=\"${enhance.files}\"/>\n-                                    <classpath>\n+\t\t\t\t\t\t\t\t<taskdef name=\"openjpac\" classname=\"org.apache.openjpa.ant.PCEnhancerTask\">\n+\t\t\t\t\t\t\t\t\t<classpath>\n+\t                                    <path refid=\"maven.dependency.classpath\"/>\n+    \t                                <path refid=\"maven.compile.classpath\"/>\n+        \t                            <path refid=\"maven.test.classpath\"/>\n+\t\t\t\t\t\t\t\t\t</classpath>\n+\t\t\t\t\t\t\t\t</taskdef>\n+                                <fileset id=\"enhance.path.ref\" dir=\"${project.build.testOutputDirectory}\">\n+                                    <include name=\"**/*.class\"/>\n+                                </fileset>\n+\t\t\t\t\t\t\t\t<openjpac>\n+\t\t\t\t\t\t\t\t\t<classpath>\n                                         <path refid=\"maven.dependency.classpath\"/>\n                                         <path refid=\"maven.compile.classpath\"/>\n                                         <path refid=\"maven.test.classpath\"/>\n-                                    </classpath>\n-                                </java>\n+\t\t\t\t\t\t\t\t\t</classpath>\n+\t\t\t\t\t\t\t\t\t<fileset refid=\"enhance.path.ref\"/>\n+\t\t\t\t\t\t\t\t</openjpac>\n                             </tasks>\n                         </configuration>\n                         <goals>"}]}

