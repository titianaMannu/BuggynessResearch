{"sha":"9851f6274855162bc6dd6e95cd06adf782c5e1a2","node_id":"MDY6Q29tbWl0MjA2MzY0Ojk4NTFmNjI3NDg1NTE2MmJjNmRkNmU5NWNkMDZhZGY3ODJjNWUxYTI=","commit":{"author":{"name":"Marc Prud'hommeaux","email":"mprudhom@apache.org","date":"2007-01-10T23:00:38Z"},"committer":{"name":"Marc Prud'hommeaux","email":"mprudhom@apache.org","date":"2007-01-10T23:00:38Z"},"message":"Put getJDBCMajorVersion() in a try/catch block, since it is a JDBC 3-only method, so it might throw an AnstractMethodError.\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/openjpa/trunk@495027 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"7c1404a2500db84c66623fa38679acda630e1dab","url":"https://api.github.com/repos/apache/openjpa/git/trees/7c1404a2500db84c66623fa38679acda630e1dab"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/9851f6274855162bc6dd6e95cd06adf782c5e1a2","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/9851f6274855162bc6dd6e95cd06adf782c5e1a2","html_url":"https://github.com/apache/openjpa/commit/9851f6274855162bc6dd6e95cd06adf782c5e1a2","comments_url":"https://api.github.com/repos/apache/openjpa/commits/9851f6274855162bc6dd6e95cd06adf782c5e1a2/comments","author":null,"committer":null,"parents":[{"sha":"c6121be5837579a4e311380b34f90ebc9066fe2a","url":"https://api.github.com/repos/apache/openjpa/commits/c6121be5837579a4e311380b34f90ebc9066fe2a","html_url":"https://github.com/apache/openjpa/commit/c6121be5837579a4e311380b34f90ebc9066fe2a"}],"stats":{"total":11,"additions":10,"deletions":1},"files":[{"sha":"8e266c16b8cb8607bad10859772b5d91b06a8961","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DB2Dictionary.java","status":"modified","additions":10,"deletions":1,"changes":11,"blob_url":"https://github.com/apache/openjpa/blob/9851f6274855162bc6dd6e95cd06adf782c5e1a2/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DB2Dictionary.java","raw_url":"https://github.com/apache/openjpa/raw/9851f6274855162bc6dd6e95cd06adf782c5e1a2/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DB2Dictionary.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DB2Dictionary.java?ref=9851f6274855162bc6dd6e95cd06adf782c5e1a2","patch":"@@ -148,11 +148,20 @@ public Connection decorate(Connection conn)\n         return conn;\n     }\n \n+    private boolean isJDBC3(DatabaseMetaData meta) {\n+        try {\n+            // JDBC3-only method, so it might throw a AbstractMethodError\n+            return meta.getJDBCMajorVersion() >= 3;\n+        } catch (Throwable t) {\n+            return false;\n+        }\n+    }\n+\n     public void connectedConfiguration(Connection conn) throws SQLException {\n     \tsuper.connectedConfiguration(conn);\n \n     \tDatabaseMetaData metaData = conn.getMetaData();\n-    \tif (metaData.getJDBCMajorVersion() >= 3) {\n+    \tif (isJDBC3(metaData)) {\n \t\t\tint maj = metaData.getDatabaseMajorVersion();\n \t    \tint min = metaData.getDatabaseMinorVersion();\n "}]}

