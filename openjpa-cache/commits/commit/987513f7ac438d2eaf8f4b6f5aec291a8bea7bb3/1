{"sha":"987513f7ac438d2eaf8f4b6f5aec291a8bea7bb3","node_id":"MDY6Q29tbWl0MjA2MzY0Ojk4NzUxM2Y3YWM0MzhkMmVhZjhmNGI2ZjVhZWMyOTFhOGJlYTdiYjM=","commit":{"author":{"name":"Milosz Tylenda","email":"mtylenda@apache.org","date":"2011-01-24T20:43:57Z"},"committer":{"name":"Milosz Tylenda","email":"mtylenda@apache.org","date":"2011-01-24T20:43:57Z"},"message":"OPENJPA-1876: Tests speed-up - do not shut Derby down at the end of each test.\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@1062964 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"701549f220ebea14809b03294218e6e3ceb364b8","url":"https://api.github.com/repos/apache/openjpa/git/trees/701549f220ebea14809b03294218e6e3ceb364b8"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/987513f7ac438d2eaf8f4b6f5aec291a8bea7bb3","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/987513f7ac438d2eaf8f4b6f5aec291a8bea7bb3","html_url":"https://github.com/apache/openjpa/commit/987513f7ac438d2eaf8f4b6f5aec291a8bea7bb3","comments_url":"https://api.github.com/repos/apache/openjpa/commits/987513f7ac438d2eaf8f4b6f5aec291a8bea7bb3/comments","author":null,"committer":null,"parents":[{"sha":"8695d9f54fbf7821156f82ff1ceea745199aa950","url":"https://api.github.com/repos/apache/openjpa/commits/8695d9f54fbf7821156f82ff1ceea745199aa950","html_url":"https://github.com/apache/openjpa/commit/8695d9f54fbf7821156f82ff1ceea745199aa950"}],"stats":{"total":38,"additions":38,"deletions":0},"files":[{"sha":"1001c1b2a468f633c8caada05f35078a9a9f8c8e","filename":"openjpa-persistence-jdbc/pom.xml","status":"modified","additions":14,"deletions":0,"changes":14,"blob_url":"https://github.com/apache/openjpa/blob/987513f7ac438d2eaf8f4b6f5aec291a8bea7bb3/openjpa-persistence-jdbc/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/987513f7ac438d2eaf8f4b6f5aec291a8bea7bb3/openjpa-persistence-jdbc/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/pom.xml?ref=987513f7ac438d2eaf8f4b6f5aec291a8bea7bb3","patch":"@@ -86,6 +86,7 @@\n                 <connection.url>jdbc:hsqldb:mem:openjpa20-hsqldb-database</connection.url>\n                 <connection.username>sa</connection.username>\n                 <connection.password />\n+                <jdbc.DBDictionary />\n             </properties>\n         </profile>\n \n@@ -111,6 +112,7 @@\n                 <connection.url>${openjpa.mysql.url}</connection.url>\n                 <connection.username>${openjpa.mysql.username}</connection.username>\n                 <connection.password>${openjpa.mysql.password}</connection.password>\n+                <jdbc.DBDictionary />\n                 <!-- DBCP overrides for MySQL testing -->\n                 <dbcp.maxIdle>0</dbcp.maxIdle>\n                 <dbcp.minIdle>0</dbcp.minIdle>\n@@ -139,6 +141,7 @@\n                 <connection.url>${openjpa.postgresql.url}</connection.url>\n                 <connection.username>${openjpa.postgresql.username}</connection.username>\n                 <connection.password>${openjpa.postgresql.password}</connection.password>\n+                <jdbc.DBDictionary />\n                 <!-- DBCP overrides -->\n                 <dbcp.maxIdle>0</dbcp.maxIdle>\n                 <dbcp.minIdle>0</dbcp.minIdle>\n@@ -199,6 +202,7 @@\n                 <connection.url>${openjpa.mssql.url}</connection.url>\n                 <connection.username>${openjpa.mssql.username}</connection.username>\n                 <connection.password>${openjpa.mssql.password}</connection.password>\n+                <jdbc.DBDictionary />\n             </properties>\n             <repositories>\n                 <repository>\n@@ -240,6 +244,7 @@\n                 <connection.url>${openjpa.sqlserver.url}</connection.url>\n                 <connection.username>${openjpa.sqlserver.username}</connection.username>\n                 <connection.password>${openjpa.sqlserver.password}</connection.password>\n+                <jdbc.DBDictionary />\n             </properties>\n         </profile>\n \n@@ -266,6 +271,7 @@\n                 <connection.url>${openjpa.sybase.url}</connection.url>\n                 <connection.username>${openjpa.sybase.username}</connection.username>\n                 <connection.password>${openjpa.sybase.password}</connection.password>\n+                <jdbc.DBDictionary />\n             </properties>\n         </profile>\n \n@@ -286,6 +292,7 @@\n                 <connection.url>${openjpa.sybase.url}</connection.url>\n                 <connection.username>${openjpa.sybase.username}</connection.username>\n                 <connection.password>${openjpa.sybase.password}</connection.password>\n+                <jdbc.DBDictionary />\n             </properties>\n         </profile>\n \n@@ -312,6 +319,7 @@\n                 <connection.url>${openjpa.ingres.url}</connection.url>\n                 <connection.username>${openjpa.ingres.username}</connection.username>\n                 <connection.password>${openjpa.ingres.password}</connection.password>\n+                <jdbc.DBDictionary />\n             </properties>\n         </profile>\n \n@@ -346,6 +354,7 @@\n                 <connection.url>${openjpa.custom.url}</connection.url>\n                 <connection.username>${openjpa.custom.username}</connection.username>\n                 <connection.password>${openjpa.custom.password}</connection.password>\n+                <jdbc.DBDictionary />\n             </properties>\n         </profile>\n \n@@ -393,6 +402,7 @@\n                 <connection.url>${openjpa.custom.url}</connection.url>\n                 <connection.username>${openjpa.custom.username}</connection.username>\n                 <connection.password>${openjpa.custom.password}</connection.password>\n+                <jdbc.DBDictionary />\n             </properties>\n         </profile>\n \n@@ -465,6 +475,7 @@\n                 <connection.url>${openjpa.db2.url}</connection.url>\n                 <connection.username>${openjpa.db2.username}</connection.username>\n                 <connection.password>${openjpa.db2.password}</connection.password>\n+                <jdbc.DBDictionary />\n             </properties>\n             <repositories>\n                 <repository>\n@@ -597,6 +608,7 @@\n                 <connection.url>${openjpa.ids.url}</connection.url>\n                 <connection.username>${openjpa.ids.username}</connection.username>\n                 <connection.password>${openjpa.ids.password}</connection.password>\n+                <jdbc.DBDictionary />\n             </properties>\n             <repositories>\n                 <repository>\n@@ -664,6 +676,7 @@\n                 <connection.url>${openjpa.oracle.url}</connection.url>\n                 <connection.username>${openjpa.oracle.username}</connection.username>\n                 <connection.password>${openjpa.oracle.password}</connection.password>\n+                <jdbc.DBDictionary />\n             </properties>\n             <repositories>\n                 <repository>\n@@ -708,6 +721,7 @@\n                 <connection.url>${openjpa.soliddb.url}</connection.url>\n                 <connection.username>${openjpa.soliddb.username}</connection.username>\n                 <connection.password>${openjpa.soliddb.password}</connection.password>\n+                <jdbc.DBDictionary />\n             </properties>\n             <repositories>\n                 <repository>"},{"sha":"d6e7290f7c71314d30df39bcbf947ad6afd373ea","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/dynamicschema/TestDynamicSchemas.java","status":"modified","additions":15,"deletions":0,"changes":15,"blob_url":"https://github.com/apache/openjpa/blob/987513f7ac438d2eaf8f4b6f5aec291a8bea7bb3/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/dynamicschema/TestDynamicSchemas.java","raw_url":"https://github.com/apache/openjpa/raw/987513f7ac438d2eaf8f4b6f5aec291a8bea7bb3/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/dynamicschema/TestDynamicSchemas.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/dynamicschema/TestDynamicSchemas.java?ref=987513f7ac438d2eaf8f4b6f5aec291a8bea7bb3","patch":"@@ -177,6 +177,21 @@ public void testFirebirdDynamicSchema() {\n     }\n \n \n+    /**\n+     * Derby tests run with a DerbyDictionary-specific property, so clear it out here.\n+     * Otherwise, all tests except testDerbyDynamicSchema will fail.\n+     */\n+    @Override\n+    protected OpenJPAEntityManagerFactorySPI createEMF(Object... props) {\n+        int propsLength = props.length;\n+        Object[] newProps = new Object[propsLength + 2];\n+        System.arraycopy(props, 0, newProps, 0, propsLength);\n+        newProps[propsLength] = \"openjpa.jdbc.DBDictionary\";\n+        newProps[propsLength + 1] = \"\";\n+        return super.createEMF(newProps);\n+    }\n+\n+\n     private void validateTableName(OpenJPAEntityManagerFactorySPI emf) {\n         JDBCConfiguration conf = (JDBCConfiguration) emf.getConfiguration();\n         DBDictionary dict = conf.getDBDictionaryInstance();"},{"sha":"9e54c4657a9e6dde7ce1a34edbf886dd76c39bf3","filename":"pom.xml","status":"modified","additions":9,"deletions":0,"changes":9,"blob_url":"https://github.com/apache/openjpa/blob/987513f7ac438d2eaf8f4b6f5aec291a8bea7bb3/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/987513f7ac438d2eaf8f4b6f5aec291a8bea7bb3/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/pom.xml?ref=987513f7ac438d2eaf8f4b6f5aec291a8bea7bb3","patch":"@@ -367,6 +367,8 @@\n                 <connection.url>jdbc:derby:target/database/openjpa-derby-database;create=true</connection.url>\n                 <connection.username />\n                 <connection.password />\n+                <!-- Tests are much faster without shutting derby down at the end of each test. -->\n+                <jdbc.DBDictionary>ShutdownOnClose=false</jdbc.DBDictionary>\n             </properties>\n         </profile>\n \n@@ -395,6 +397,8 @@\n                 <connection.url>jdbc:derby:memory:openjpa-derby-inmem-database;create=true</connection.url>\n                 <connection.username />\n                 <connection.password />\n+                <!-- Tests are much faster without shutting derby down at the end of each test. -->\n+                <jdbc.DBDictionary>ShutdownOnClose=false</jdbc.DBDictionary>\n             </properties>\n         </profile>\n \n@@ -437,6 +441,7 @@\n                 <connection.url>${openjpa.derbynet.url}</connection.url>\n                 <connection.username>${openjpa.derbynet.username}</connection.username>\n                 <connection.password>${openjpa.derbynet.password}</connection.password>\n+                <jdbc.DBDictionary />\n             </properties>\n         </profile>\n     </profiles>\n@@ -648,6 +653,10 @@\n                             <name>openjpa.ConnectionPassword</name>\n                             <value>${connection.password}</value>\n                         </property>\n+                        <property>\n+                            <name>openjpa.jdbc.DBDictionary</name>\n+                            <value>${jdbc.DBDictionary}</value>\n+                        </property>\n                         <property>\n                             <name>derby.stream.error.file</name>\n                             <value>target/derby.log</value>"}]}

