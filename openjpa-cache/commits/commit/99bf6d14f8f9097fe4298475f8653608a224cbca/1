{"sha":"99bf6d14f8f9097fe4298475f8653608a224cbca","node_id":"MDY6Q29tbWl0MjA2MzY0Ojk5YmY2ZDE0ZjhmOTA5N2ZlNDI5ODQ3NWY4NjUzNjA4YTIyNGNiY2E=","commit":{"author":{"name":"Michael Dick","email":"mikedd@apache.org","date":"2008-02-08T01:15:44Z"},"committer":{"name":"Michael Dick","email":"mikedd@apache.org","date":"2008-02-08T01:15:44Z"},"message":"OPENJPA-512\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@619723 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"cee545910e2f5cc4fd2601afcf5280b629ea8db4","url":"https://api.github.com/repos/apache/openjpa/git/trees/cee545910e2f5cc4fd2601afcf5280b629ea8db4"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/99bf6d14f8f9097fe4298475f8653608a224cbca","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/99bf6d14f8f9097fe4298475f8653608a224cbca","html_url":"https://github.com/apache/openjpa/commit/99bf6d14f8f9097fe4298475f8653608a224cbca","comments_url":"https://api.github.com/repos/apache/openjpa/commits/99bf6d14f8f9097fe4298475f8653608a224cbca/comments","author":{"login":"mikedd","id":669432,"node_id":"MDQ6VXNlcjY2OTQzMg==","avatar_url":"https://avatars.githubusercontent.com/u/669432?v=4","gravatar_id":"","url":"https://api.github.com/users/mikedd","html_url":"https://github.com/mikedd","followers_url":"https://api.github.com/users/mikedd/followers","following_url":"https://api.github.com/users/mikedd/following{/other_user}","gists_url":"https://api.github.com/users/mikedd/gists{/gist_id}","starred_url":"https://api.github.com/users/mikedd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikedd/subscriptions","organizations_url":"https://api.github.com/users/mikedd/orgs","repos_url":"https://api.github.com/users/mikedd/repos","events_url":"https://api.github.com/users/mikedd/events{/privacy}","received_events_url":"https://api.github.com/users/mikedd/received_events","type":"User","site_admin":false},"committer":{"login":"mikedd","id":669432,"node_id":"MDQ6VXNlcjY2OTQzMg==","avatar_url":"https://avatars.githubusercontent.com/u/669432?v=4","gravatar_id":"","url":"https://api.github.com/users/mikedd","html_url":"https://github.com/mikedd","followers_url":"https://api.github.com/users/mikedd/followers","following_url":"https://api.github.com/users/mikedd/following{/other_user}","gists_url":"https://api.github.com/users/mikedd/gists{/gist_id}","starred_url":"https://api.github.com/users/mikedd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikedd/subscriptions","organizations_url":"https://api.github.com/users/mikedd/orgs","repos_url":"https://api.github.com/users/mikedd/repos","events_url":"https://api.github.com/users/mikedd/events{/privacy}","received_events_url":"https://api.github.com/users/mikedd/received_events","type":"User","site_admin":false},"parents":[{"sha":"81cb7e17f98946e4455e055f075d958900c2f576","url":"https://api.github.com/repos/apache/openjpa/commits/81cb7e17f98946e4455e055f075d958900c2f576","html_url":"https://github.com/apache/openjpa/commit/81cb7e17f98946e4455e055f075d958900c2f576"}],"stats":{"total":137,"additions":102,"deletions":35},"files":[{"sha":"25a6cd919d39fd3b3aaaa7916300cabbc9c562ef","filename":"openjpa-persistence-jdbc/pom.xml","status":"modified","additions":17,"deletions":35,"changes":52,"blob_url":"https://github.com/apache/openjpa/blob/99bf6d14f8f9097fe4298475f8653608a224cbca/openjpa-persistence-jdbc/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/99bf6d14f8f9097fe4298475f8653608a224cbca/openjpa-persistence-jdbc/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/pom.xml?ref=99bf6d14f8f9097fe4298475f8653608a224cbca","patch":"@@ -278,41 +278,23 @@\n                         <phase>test-compile</phase>\n                         <configuration>\n                             <tasks>\n-                                <path id=\"cp\">\n-                                    <path refid=\"maven.test.classpath\"/>\n-                                    <path refid=\"maven.compile.classpath\"/>\n-                                    <path refid=\"maven.dependency.classpath\"/>\n-                                </path>\n-                                <taskdef name=\"openjpac\" classname=\n-                                    \"org.apache.openjpa.ant.PCEnhancerTask\">\n-                                    <classpath refid=\"cp\"/>\n-                                </taskdef>\n-                                <fileset id=\"enhance.path.ref\"\n-                                    dir=\"${project.build.testOutputDirectory}\">\n-                                    <include name=\"**/*.class\"/>\n-                                    <exclude name=\"**/Test*.class\"/>\n-                                    <exclude name=\"**/inheritance/serializable/*.class\"/>\n-                                    <exclude name=\"**/xml/*.class\"/>\n-                                    <exclude name=\"**/Unenhanced*.class\"/>\n-                                    <exclude name=\"**/AbstractUnenhanced*.class\"/>\n-                                </fileset>\n-                                <openjpac>\n-                                    <classpath refid=\"cp\"/>\n-                                    <fileset refid=\"enhance.path.ref\"/>\n-                                    <config log=\"DefaultLevel=${openjpa.loglevel}\"/>\n-                                </openjpac>\n-                                <!--  Set detach state for serialization tests -->\n-                                <openjpac>\n-                                    <config detachState=\"fgs(DetachedStateField=true)\"/>\n-                                    <classpath refid=\"cp\"/>\n-                                    <fileset dir=\"${project.build.testOutputDirectory}\"> \n-                                        <include name=\"**/inheritance/serializable/*.class\"/>\n-                                        <!--  include files from orm.xml -->\n-                                        <include name=\"**/xml/*.class\"/>\n-                                        <exclude name=\"**/Test*.class\"/>\n-                                    </fileset>\n-                                    <config log=\"DefaultLevel=${openjpa.loglevel}\"/>\n-                                </openjpac>\n+                                <ant antfile=\"src/main/ant/enhancer.xml\"\n+                                    target=\"enhance.all.entities\"\n+                                    inheritRefs=\"true\">\n+                                    <!--\n+                                      InheritAll doesn't seem to work. Pass in\n+                                      properties manually.\n+                                     -->\n+                                    <property name=\"maven.test.skip\" \n+                                        value=\"${maven.test.skip}\"/>\n+                                    <property name=\"outdir\"\n+                                        value=\"${project.build.outputDirectory}\" />\n+                                    <property\n+                                        name=\"project.build.testOutputDirectory\"\n+                                        value=\"${project.build.testOutputDirectory}\" />\n+                                    <property name=\"openjpa.loglevel\"\n+                                        value=\"${openjpa.loglevel}\" />\n+                                </ant>\n                             </tasks>\n                         </configuration>\n                         <goals>"},{"sha":"f2783d8050ecd39e3a06b2fb07dd5ecf05df05ba","filename":"openjpa-persistence-jdbc/src/main/ant/enhancer.xml","status":"added","additions":85,"deletions":0,"changes":85,"blob_url":"https://github.com/apache/openjpa/blob/99bf6d14f8f9097fe4298475f8653608a224cbca/openjpa-persistence-jdbc/src/main/ant/enhancer.xml","raw_url":"https://github.com/apache/openjpa/raw/99bf6d14f8f9097fe4298475f8653608a224cbca/openjpa-persistence-jdbc/src/main/ant/enhancer.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/main/ant/enhancer.xml?ref=99bf6d14f8f9097fe4298475f8653608a224cbca","patch":"@@ -0,0 +1,85 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+    Licensed to the Apache Software Foundation (ASF) under one\n+    or more contributor license agreements.  See the NOTICE file\n+    distributed with this work for additional information\n+    regarding copyright ownership.  The ASF licenses this file\n+    to you under the Apache License, Version 2.0 (the\n+    \"License\"); you may not use this file except in compliance\n+    with the License.  You may obtain a copy of the License at\n+    \n+    http://www.apache.org/licenses/LICENSE-2.0\n+    \n+    Unless required by applicable law or agreed to in writing,\n+    software distributed under the License is distributed on an\n+    \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+    KIND, either express or implied.  See the License for the\n+    specific language governing permissions and limitations\n+    under the License.   \n+-->\n+<project name=\"enhance\" basedir=\".\">\n+    <!--\n+        This build file executes the PCEnhancer on the test entities. It's in a\n+        separate file instead of nested in pom.xml to make some conditional \n+        processing easier.\n+        \n+        Test classes will not be compiled if maven is invoked with \n+        -Dmaven.tests.skip=true. \n+    -->\n+\n+    <condition property=\"maven.test.skip.istrue\">\n+        <istrue value=\"${maven.test.skip}\" />\n+    </condition>\n+\n+    <!-- ================================= \n+          target: enhance.all.entities              \n+         ================================= -->\n+    <target name=\"enhance.all.entities\"\n+            depends=\"\"\n+            description=\"--> enhance the test entities\"\n+            unless=\"maven.test.skip.istrue\">\n+        \n+        <!-- \n+            Inherited references won't be present until the task is called. \n+            Therefore the path definition needs to stay inside the task.\n+          --> \n+        <path id=\"cp\">\n+            <path refid=\"maven.test.classpath\" />\n+            <path refid=\"maven.compile.classpath\" />\n+            <path refid=\"maven.dependency.classpath\" />\n+        </path>\n+\n+        <taskdef name=\"openjpac\"\n+                 classname=\"org.apache.openjpa.ant.PCEnhancerTask\">\n+            <classpath refid=\"cp\" />\n+        </taskdef>\n+\n+        <fileset id=\"enhance.path.ref\"\n+                 dir=\"${project.build.testOutputDirectory}\">\n+            <include name=\"**/*.class\" />\n+            <exclude name=\"**/Test*.class\" />\n+            <exclude name=\"**/inheritance/serializable/*.class\" />\n+            <exclude name=\"**/xml/*.class\" />\n+            <exclude name=\"**/Unenhanced*.class\" />\n+            <exclude name=\"**/AbstractUnenhanced*.class\" />\n+        </fileset>\n+        <openjpac>\n+            <classpath refid=\"cp\" />\n+            <fileset refid=\"enhance.path.ref\" />\n+            <config log=\"DefaultLevel=${openjpa.loglevel}\" />\n+        </openjpac>\n+        <!--  Set detach state for serialization tests -->\n+        <openjpac>\n+            <config detachState=\"fgs(DetachedStateField=true)\" />\n+            <classpath refid=\"cp\" />\n+            <fileset dir=\"${project.build.testOutputDirectory}\">\n+                <include name=\"**/inheritance/serializable/*.class\" />\n+                <!--  include files from orm.xml -->\n+                <include name=\"**/xml/*.class\" />\n+                <exclude name=\"**/Test*.class\" />\n+            </fileset>\n+            <config log=\"DefaultLevel=${openjpa.loglevel}\" />\n+        </openjpac>\n+\n+    </target>\n+</project>\n\\ No newline at end of file"}]}

