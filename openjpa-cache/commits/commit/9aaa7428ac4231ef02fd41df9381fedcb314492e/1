{"sha":"9aaa7428ac4231ef02fd41df9381fedcb314492e","node_id":"MDY6Q29tbWl0MjA2MzY0OjlhYWE3NDI4YWM0MjMxZWYwMmZkNDFkZjkzODFmZWRjYjMxNDQ5MmU=","commit":{"author":{"name":"Patrick Linskey","email":"pcl@apache.org","date":"2008-05-15T05:21:24Z"},"committer":{"name":"Patrick Linskey","email":"pcl@apache.org","date":"2008-05-15T05:21:24Z"},"message":"fixing XML bug\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/branches/1.1.0@656510 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"fa3b011d50ee31ab6a0d5ccce406125baa50cfa4","url":"https://api.github.com/repos/apache/openjpa/git/trees/fa3b011d50ee31ab6a0d5ccce406125baa50cfa4"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/9aaa7428ac4231ef02fd41df9381fedcb314492e","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/9aaa7428ac4231ef02fd41df9381fedcb314492e","html_url":"https://github.com/apache/openjpa/commit/9aaa7428ac4231ef02fd41df9381fedcb314492e","comments_url":"https://api.github.com/repos/apache/openjpa/commits/9aaa7428ac4231ef02fd41df9381fedcb314492e/comments","author":null,"committer":null,"parents":[{"sha":"36ebb619002dd9c7d589ba259e2829ec1d4441a4","url":"https://api.github.com/repos/apache/openjpa/commits/36ebb619002dd9c7d589ba259e2829ec1d4441a4","html_url":"https://github.com/apache/openjpa/commit/36ebb619002dd9c7d589ba259e2829ec1d4441a4"}],"stats":{"total":813,"additions":407,"deletions":406},"files":[{"sha":"35a805c1c157be63b313510955a0316528dccdea","filename":"openjpa-project/pom.xml","status":"modified","additions":407,"deletions":406,"changes":813,"blob_url":"https://github.com/apache/openjpa/blob/9aaa7428ac4231ef02fd41df9381fedcb314492e/openjpa-project/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/9aaa7428ac4231ef02fd41df9381fedcb314492e/openjpa-project/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-project/pom.xml?ref=9aaa7428ac4231ef02fd41df9381fedcb314492e","patch":"@@ -1,406 +1,407 @@\n-<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n-<!--\r\n- Licensed to the Apache Software Foundation (ASF) under one\r\n- or more contributor license agreements.  See the NOTICE file\r\n- distributed with this work for additional information\r\n- regarding copyright ownership.  The ASF licenses this file\r\n- to you under the Apache License, Version 2.0 (the\r\n- \"License\"); you may not use this file except in compliance\r\n- with the License.  You may obtain a copy of the License at\r\n- \r\n- http://www.apache.org/licenses/LICENSE-2.0\r\n- \r\n- Unless required by applicable law or agreed to in writing,\r\n- software distributed under the License is distributed on an\r\n- \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n- KIND, either express or implied.  See the License for the\r\n- specific language governing permissions and limitations\r\n- under the License.   \r\n--->\r\n-<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\r\n-    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n-    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0\r\n-        http://maven.apache.org/maven-v4_0_0.xsd\">\r\n-    <!--\r\n-        To build the distribution files from project root:\r\n-\r\n-        mvn clean compile package -Dtest=false\r\n-\r\n-        To build and deploy a full digned release with docs, run:\r\n-\r\n-            mvn clean deploy -Pjavadoc-profile,docbook-profile,sign-release\r\n-\r\n-        Note that to sign the release, you need to have \"gpg\" installed and\r\n-        create a key. See http://apache.org/dev/release-signing.html\r\n-    -->\r\n-    <modelVersion>4.0.0</modelVersion>\r\n-    <artifactId>apache-openjpa</artifactId>\r\n-    <packaging>pom</packaging>\r\n-    <name>OpenJPA Distribution</name>\r\n-    <parent>\r\n-        <groupId>org.apache.openjpa</groupId>\r\n-        <artifactId>openjpa-parent</artifactId>\r\n-        <version>1.1.0</version>\r\n-    </parent>\r\n-\r\n-    <properties>\r\n-        <openjpa.release.keyAlias>\r\n-            ${user.name}@apache.org\r\n-        </openjpa.release.keyAlias>\r\n-\r\n-        <openjpa.assembly.finalName>\r\n-            ${artifactId}-${version}</openjpa.assembly.finalName>\r\n-        <openjpa.assembly.outputDirectory>\r\n-            ${project.basedir}/../target/site/downloads\r\n-        </openjpa.assembly.outputDirectory>\r\n-\r\n-        <openjpa.assembly.binarySuffix>binary</openjpa.assembly.binarySuffix>\r\n-        <openjpa.assembly.binaryBase>\r\n-            ${openjpa.assembly.outputDirectory}/${openjpa.assembly.finalName}-${openjpa.assembly.binarySuffix}\r\n-        </openjpa.assembly.binaryBase>\r\n-        <openjpa.assembly.binaryFile>\r\n-            ${openjpa.assembly.binaryBase}.zip\r\n-        </openjpa.assembly.binaryFile>\r\n-\r\n-        <openjpa.assembly.sourceSuffix>source</openjpa.assembly.sourceSuffix>\r\n-        <openjpa.assembly.sourceBase>\r\n-            ${openjpa.assembly.outputDirectory}/${openjpa.assembly.finalName}-${openjpa.assembly.sourceSuffix}\r\n-        </openjpa.assembly.sourceBase>\r\n-        <openjpa.assembly.sourceFile>\r\n-            ${openjpa.assembly.sourceBase}.zip\r\n-        </openjpa.assembly.sourceFile>\r\n-\r\n-        <parent.site.docs>\r\n-            ${project.basedir}/../target/site/docs\r\n-        </parent.site.docs>\r\n-\r\n-        <docbook.source>${project.basedir}/src/doc/manual</docbook.source>\r\n-        <docbook.target>${project.basedir}/target/manual</docbook.target>\r\n-        <docbook.version>1.67.2</docbook.version>\r\n-        <local.repository>${settings.localRepository}</local.repository>\r\n-    </properties>\r\n-\r\n-    <build>\r\n-        <!-- needed to let maven pass the \"compile\" phase -->\r\n-        <testSourceDirectory>/none/</testSourceDirectory>\r\n-\r\n-        <!-- filter site resources -->\r\n-        <resources>\r\n-            <resource>\r\n-                <directory>${project.basedir}/src/site</directory>\r\n-                <!-- targetPath is relative to target/classes/ -->\r\n-                <targetPath>../filtered-site</targetPath>\r\n-                <filtering>false</filtering>\r\n-            </resource>\r\n-        </resources>\r\n-\r\n-        <plugins>\r\n-            <plugin>\r\n-                <artifactId>maven-assembly-plugin</artifactId>\r\n-                <executions>\r\n-                    <execution>\r\n-                        <id>bin</id>\r\n-                        <phase>package</phase>\r\n-                        <goals>\r\n-                            <goal>attached</goal>\r\n-                        </goals>\r\n-                        <configuration>\r\n-                            <descriptor>assembly.xml</descriptor>\r\n-                            <outputDirectory>${openjpa.assembly.outputDirectory}</outputDirectory>\r\n-                            <workDirectory>target/work</workDirectory>\r\n-                        </configuration>\r\n-                    </execution>\r\n-                    <execution>\r\n-                        <id>sources</id>\r\n-                        <phase>package</phase>\r\n-                        <goals>\r\n-                            <goal>attached</goal>\r\n-                        </goals>\r\n-                        <configuration>\r\n-                            <descriptor>source-assembly.xml</descriptor>\r\n-                            <outputDirectory>${openjpa.assembly.outputDirectory}</outputDirectory>\r\n-                            <workDirectory>target/work</workDirectory>\r\n-                        </configuration>\r\n-                    </execution>\r\n-                </executions>\r\n-            </plugin>\r\n-\r\n-            <!--\r\n-                Copy over site files from src/site to target/filtered-site\r\n-                so we can filter resources and include other generated\r\n-                content from the openjpa-project module.\r\n-            -->\r\n-            <plugin>\r\n-                <artifactId>maven-resources-plugin</artifactId>\r\n-                <executions>\r\n-                    <execution>\r\n-                        <id>prefilter-site</id>\r\n-                        <phase>site</phase>\r\n-                        <goals>\r\n-                            <goal>resources</goal>\r\n-                        </goals>\r\n-                    </execution>\r\n-                </executions>\r\n-            </plugin>\r\n-\r\n-            <plugin>\r\n-                <groupId>org.apache.maven.plugins</groupId>\r\n-                <artifactId>maven-site-plugin</artifactId>\r\n-                <version>2.0-beta-5</version>\r\n-                <configuration>\r\n-                    <siteDirectory>target/filtered-site</siteDirectory>\r\n-                </configuration>\r\n-            </plugin>\r\n-        </plugins>\r\n-    </build>\r\n-\r\n-    <profiles>\r\n-        <!--\r\n-            Docbook profile. Docs can be built by running:\r\n-            MAVEN_OPTS=-Xmx512m\r\n-            mvn -f openjpa-project/pom.xml process-resources -Pdocbook-profile\r\n-        -->\r\n-        <profile>\r\n-            <id>docbook-profile</id>\r\n-            <build>\r\n-                <plugins>\r\n-                    <!-- build the docs when processing resources -->\r\n-                    <plugin>\r\n-                        <groupId>com.agilejava.docbkx</groupId>\r\n-                        <artifactId>docbkx-maven-plugin</artifactId>\r\n-                        <executions>\r\n-                            <execution>\r\n-                                <id>build-pdf-doc</id>\r\n-                                <phase>process-resources</phase>\r\n-                                <goals><goal>generate-pdf</goal></goals>\r\n-                                <configuration>\r\n-                                    <sourceDirectory>\r\n-                                        ${docbook.source}\r\n-                                    </sourceDirectory>\r\n-                                    <targetDirectory>\r\n-                                        ${docbook.target}\r\n-                                    </targetDirectory>\r\n-                                    <includes>manual.xml</includes>\r\n-                                    <foCustomization>\r\n-                                        ${docbook.source}/manual-pdf.xsl\r\n-                                    </foCustomization>\r\n-                                    <imgSrcPath>\r\n-                                        ${docbook.source}/\r\n-                                    </imgSrcPath>\r\n-                                    <postProcess>\r\n-                                        <!-- copy to parent module for \r\n-                                             expanded access in upload -->\r\n-                                        <mkdir dir=\"${parent.site.docs}\"/>\r\n-                                        <delete file=\"${docbook.target}/manual.fo\"/>\r\n-                                        <copy todir=\"${parent.site.docs}\">\r\n-                                            <fileset\r\n-                                                dir=\"${docbook.target}\">\r\n-                                                <include name=\"manual.pdf\"/>\r\n-                                            </fileset>\r\n-                                        </copy>\r\n-                                    </postProcess>\r\n-                                </configuration>\r\n-                            </execution>\r\n-                            <execution>\r\n-                                <id>build-chunked-doc</id>\r\n-                                <phase>process-resources</phase>\r\n-                                <goals><goal>generate-html</goal></goals>\r\n-                                <configuration>\r\n-                                    <sourceDirectory>\r\n-                                        ${docbook.source}\r\n-                                    </sourceDirectory>\r\n-                                    <targetDirectory>\r\n-                                        ${docbook.target}\r\n-                                    </targetDirectory>\r\n-                                    <includes>manual.xml</includes>\r\n-                                    <chunkedOutput>true</chunkedOutput>\r\n-                                    <chunkQuietly>false</chunkQuietly>\r\n-                                    <htmlCustomization>\r\n-                                        ${docbook.source}/manual-xhtml-chunk.xsl\r\n-                                    </htmlCustomization>\r\n-                                    <postProcess>\r\n-                                        <!-- rename manual to index -->\r\n-                                        <move\r\n-                                        file=\"${docbook.target}/manual.html\"\r\n-                                        tofile=\"${docbook.target}/index.html\"/>\r\n-\r\n-                                        <!-- copy over images and styles -->\r\n-                                        <mkdir dir=\"${docbook.target}/img\"/>\r\n-                                        <copy todir=\"${docbook.target}/img\">\r\n-                                            <fileset\r\n-                                                dir=\"${docbook.source}/img\">\r\n-                                                <include name=\"*.*\"/>\r\n-                                                <exclude name=\"*.graffle\"/>\r\n-                                            </fileset>\r\n-                                        </copy>\r\n-\r\n-                                        <mkdir dir=\"${docbook.target}/css\"/>\r\n-                                        <copy todir=\"${docbook.target}/css\">\r\n-                                            <fileset\r\n-                                                dir=\"${docbook.source}/css\">\r\n-                                                <include name=\"*.*\"/>\r\n-                                            </fileset>\r\n-                                        </copy>\r\n-\r\n-                                        <!-- copy to parent module for \r\n-                                             expanded access in upload -->\r\n-                                        <mkdir dir=\"${parent.site.docs}\"/>\r\n-                                        <copy todir=\"${parent.site.docs}\">\r\n-                                            <fileset\r\n-                                                dir=\"${docbook.target}\">\r\n-                                                <include name=\"*.*\"/>\r\n-                                            </fileset>\r\n-                                        </copy>\r\n-                                    </postProcess>\r\n-                                </configuration>\r\n-                            </execution>\r\n-                            <execution>\r\n-                                <id>build-single-doc</id>\r\n-                                <phase>process-resources</phase>\r\n-                                <goals><goal>generate-html</goal></goals>\r\n-                                <configuration>\r\n-                                    <sourceDirectory>\r\n-                                        ${docbook.source}\r\n-                                    </sourceDirectory>\r\n-                                    <targetDirectory>\r\n-                                        ${docbook.target}\r\n-                                    </targetDirectory>\r\n-                                    <includes>manual.xml</includes>\r\n-                                    <chunkedOutput>false</chunkedOutput>\r\n-                                    <htmlCustomization>\r\n-                                        ${docbook.source}/manual-xhtml.xsl\r\n-                                    </htmlCustomization>\r\n-                                    <postProcess>\r\n-                                        <!-- copy to parent module for \r\n-                                             expanded access in upload -->\r\n-                                        <mkdir dir=\"${parent.site.docs}\"/>\r\n-                                        <copy todir=\"${parent.site.docs}\">\r\n-                                            <fileset\r\n-                                                dir=\"${docbook.target}\">\r\n-                                                <include name=\"manual.html\"/>\r\n-                                            </fileset>\r\n-                                        </copy>\r\n-                                    </postProcess>\r\n-                                </configuration>\r\n-                            </execution>\r\n-                        </executions>\r\n-                        <dependencies>\r\n-                        <dependency>\r\n-                            <groupId>org.docbook</groupId>\r\n-                            <artifactId>docbook-xml</artifactId>\r\n-                            <version>4.4</version>\r\n-                            <scope>runtime</scope>\r\n-                        </dependency>\r\n-                        </dependencies>\r\n-                    </plugin>\r\n-                </plugins>\r\n-            </build>\r\n-            <activation>\r\n-                <property>\r\n-                    <name>builddocs</name>\r\n-                    <value>true</value>\r\n-                </property>\r\n-            </activation>\r\n-            <pluginRepositories>\r\n-                <pluginRepository>\r\n-                    <id>agilejava</id>\r\n-                    <name>Agilejava repository (Docbook plugin)</name>\r\n-                    <url>http://agilejava.com/maven</url>\r\n-                </pluginRepository>\r\n-            </pluginRepositories>\r\n-        </profile>\r\n-\r\n-        <!-- sign the release files -->\r\n-        <profile>\r\n-            <id>sign-release</id>\r\n-            <build>\r\n-                <plugins>\r\n-                        <artifactId>maven-antrun-plugin</artifactId>\r\n-                        <executions>\r\n-                            <execution>\r\n-                                <phase>verify</phase>\r\n-                                <configuration>\r\n-                                    <tasks>\r\n-                                    <echo>Signing release files...</echo>\r\n-                                    <macrodef name=\"sign-file\">\r\n-                                        <attribute name=\"file\" />\r\n-                                        <sequential>\r\n-                                        <delete failonerror=\"false\"\r\n-                                            file=\"@{file}.asc\"/>\r\n-                                        <exec executable=\"gpg\"\r\n-                                            failonerror=\"true\">\r\n-                                            <arg value=\"--batch\"/>\r\n-                                            <arg value=\"--passphrase\"/>\r\n-                                            <arg value=\"${gpg.passphrase}\"/>\r\n-                                            <arg value=\"--verbose\"/>\r\n-                                            <arg value=\"--default-key\"/>\r\n-                                            <arg value=\"${openjpa.release.keyAlias}\"/>\r\n-                                            <arg value=\"--armor\"/>\r\n-                                            <arg value=\"--detach-sig\"/>\r\n-                                            <arg value=\"@{file}\"/>\r\n-                                        </exec>\r\n-                                        </sequential>\r\n-                                    </macrodef>\r\n-                                    <sign-file file=\"${openjpa.assembly.binaryFile}\"/>\r\n-                                    <sign-file file=\"${openjpa.assembly.sourceFile}\"/>\r\n-                                    </tasks>\r\n-                                </configuration>\r\n-                                <goals>\r\n-                                    <goal>run</goal>\r\n-                                </goals>\r\n-                            </execution>\r\n-                        </executions>\r\n-                    </plugin>\r\n-                    <plugin>\r\n-                        <groupId>org.codehaus.mojo</groupId>\r\n-                        <artifactId>build-helper-maven-plugin</artifactId>\r\n-                        <executions>\r\n-                            <execution>\r\n-                                <id>attach-signature-artifacts</id>\r\n-                                <phase>verify</phase>\r\n-                                <goals>\r\n-                                    <goal>attach-artifact</goal>\r\n-                                </goals>\r\n-                                <configuration>\r\n-                                    <artifacts>\r\n-                                        <artifact>\r\n-                                            <file>${openjpa.assembly.binaryFile}.asc</file>\r\n-                                            <classifier>${openjpa.assembly.binarySuffix}.zip</classifier>\r\n-                                            <type>asc</type>\r\n-                                        </artifact>\r\n-                                        <artifact>\r\n-                                            <file>${openjpa.assembly.sourceFile}.asc</file>\r\n-                                            <classifier>${openjpa.assembly.sourceSuffix}.zip</classifier>\r\n-                                            <type>asc</type>\r\n-                                        </artifact>\r\n-                                    </artifacts>\r\n-                                </configuration>\r\n-                            </execution>\r\n-                        </executions>\r\n-                    </plugin>\r\n-                </plugins>\r\n-            </build>\r\n-            <activation>\r\n-                <property>\r\n-                    <name>sign</name>\r\n-                    <value>true</value>\r\n-                </property>\r\n-            </activation>\r\n-        </profile>\r\n-    </profiles>\r\n-\r\n-    <!-- need to explicitly list dependencies for assembly to work -->\r\n-    <dependencies>\r\n-        <dependency>\r\n-            <groupId>org.apache.openjpa</groupId>\r\n-            <artifactId>openjpa</artifactId>\r\n-            <version>${pom.version}</version>\r\n-        </dependency>\r\n-\r\n-        <!-- included so we can include it in the distribution -->\r\n-        <dependency>\r\n-            <groupId>org.apache.derby</groupId>\r\n-            <artifactId>derby</artifactId>\r\n-        </dependency>\r\n-    </dependencies>\r\n-</project>\r\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+ Licensed to the Apache Software Foundation (ASF) under one\n+ or more contributor license agreements.  See the NOTICE file\n+ distributed with this work for additional information\n+ regarding copyright ownership.  The ASF licenses this file\n+ to you under the Apache License, Version 2.0 (the\n+ \"License\"); you may not use this file except in compliance\n+ with the License.  You may obtain a copy of the License at\n+ \n+ http://www.apache.org/licenses/LICENSE-2.0\n+ \n+ Unless required by applicable law or agreed to in writing,\n+ software distributed under the License is distributed on an\n+ \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ KIND, either express or implied.  See the License for the\n+ specific language governing permissions and limitations\n+ under the License.   \n+-->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0\n+        http://maven.apache.org/maven-v4_0_0.xsd\">\n+    <!--\n+        To build the distribution files from project root:\n+\n+        mvn clean compile package -Dtest=false\n+\n+        To build and deploy a full digned release with docs, run:\n+\n+            mvn clean deploy -Pjavadoc-profile,docbook-profile,sign-release\n+\n+        Note that to sign the release, you need to have \"gpg\" installed and\n+        create a key. See http://apache.org/dev/release-signing.html\n+    -->\n+    <modelVersion>4.0.0</modelVersion>\n+    <artifactId>apache-openjpa</artifactId>\n+    <packaging>pom</packaging>\n+    <name>OpenJPA Distribution</name>\n+    <parent>\n+        <groupId>org.apache.openjpa</groupId>\n+        <artifactId>openjpa-parent</artifactId>\n+        <version>1.1.0</version>\n+    </parent>\n+\n+    <properties>\n+        <openjpa.release.keyAlias>\n+            ${user.name}@apache.org\n+        </openjpa.release.keyAlias>\n+\n+        <openjpa.assembly.finalName>\n+            ${artifactId}-${version}</openjpa.assembly.finalName>\n+        <openjpa.assembly.outputDirectory>\n+            ${project.basedir}/../target/site/downloads\n+        </openjpa.assembly.outputDirectory>\n+\n+        <openjpa.assembly.binarySuffix>binary</openjpa.assembly.binarySuffix>\n+        <openjpa.assembly.binaryBase>\n+            ${openjpa.assembly.outputDirectory}/${openjpa.assembly.finalName}-${openjpa.assembly.binarySuffix}\n+        </openjpa.assembly.binaryBase>\n+        <openjpa.assembly.binaryFile>\n+            ${openjpa.assembly.binaryBase}.zip\n+        </openjpa.assembly.binaryFile>\n+\n+        <openjpa.assembly.sourceSuffix>source</openjpa.assembly.sourceSuffix>\n+        <openjpa.assembly.sourceBase>\n+            ${openjpa.assembly.outputDirectory}/${openjpa.assembly.finalName}-${openjpa.assembly.sourceSuffix}\n+        </openjpa.assembly.sourceBase>\n+        <openjpa.assembly.sourceFile>\n+            ${openjpa.assembly.sourceBase}.zip\n+        </openjpa.assembly.sourceFile>\n+\n+        <parent.site.docs>\n+            ${project.basedir}/../target/site/docs\n+        </parent.site.docs>\n+\n+        <docbook.source>${project.basedir}/src/doc/manual</docbook.source>\n+        <docbook.target>${project.basedir}/target/manual</docbook.target>\n+        <docbook.version>1.67.2</docbook.version>\n+        <local.repository>${settings.localRepository}</local.repository>\n+    </properties>\n+\n+    <build>\n+        <!-- needed to let maven pass the \"compile\" phase -->\n+        <testSourceDirectory>/none/</testSourceDirectory>\n+\n+        <!-- filter site resources -->\n+        <resources>\n+            <resource>\n+                <directory>${project.basedir}/src/site</directory>\n+                <!-- targetPath is relative to target/classes/ -->\n+                <targetPath>../filtered-site</targetPath>\n+                <filtering>false</filtering>\n+            </resource>\n+        </resources>\n+\n+        <plugins>\n+            <plugin>\n+                <artifactId>maven-assembly-plugin</artifactId>\n+                <executions>\n+                    <execution>\n+                        <id>bin</id>\n+                        <phase>package</phase>\n+                        <goals>\n+                            <goal>attached</goal>\n+                        </goals>\n+                        <configuration>\n+                            <descriptor>assembly.xml</descriptor>\n+                            <outputDirectory>${openjpa.assembly.outputDirectory}</outputDirectory>\n+                            <workDirectory>target/work</workDirectory>\n+                        </configuration>\n+                    </execution>\n+                    <execution>\n+                        <id>sources</id>\n+                        <phase>package</phase>\n+                        <goals>\n+                            <goal>attached</goal>\n+                        </goals>\n+                        <configuration>\n+                            <descriptor>source-assembly.xml</descriptor>\n+                            <outputDirectory>${openjpa.assembly.outputDirectory}</outputDirectory>\n+                            <workDirectory>target/work</workDirectory>\n+                        </configuration>\n+                    </execution>\n+                </executions>\n+            </plugin>\n+\n+            <!--\n+                Copy over site files from src/site to target/filtered-site\n+                so we can filter resources and include other generated\n+                content from the openjpa-project module.\n+            -->\n+            <plugin>\n+                <artifactId>maven-resources-plugin</artifactId>\n+                <executions>\n+                    <execution>\n+                        <id>prefilter-site</id>\n+                        <phase>site</phase>\n+                        <goals>\n+                            <goal>resources</goal>\n+                        </goals>\n+                    </execution>\n+                </executions>\n+            </plugin>\n+\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-site-plugin</artifactId>\n+                <version>2.0-beta-5</version>\n+                <configuration>\n+                    <siteDirectory>target/filtered-site</siteDirectory>\n+                </configuration>\n+            </plugin>\n+        </plugins>\n+    </build>\n+\n+    <profiles>\n+        <!--\n+            Docbook profile. Docs can be built by running:\n+            MAVEN_OPTS=-Xmx512m\n+            mvn -f openjpa-project/pom.xml process-resources -Pdocbook-profile\n+        -->\n+        <profile>\n+            <id>docbook-profile</id>\n+            <build>\n+                <plugins>\n+                    <!-- build the docs when processing resources -->\n+                    <plugin>\n+                        <groupId>com.agilejava.docbkx</groupId>\n+                        <artifactId>docbkx-maven-plugin</artifactId>\n+                        <executions>\n+                            <execution>\n+                                <id>build-pdf-doc</id>\n+                                <phase>process-resources</phase>\n+                                <goals><goal>generate-pdf</goal></goals>\n+                                <configuration>\n+                                    <sourceDirectory>\n+                                        ${docbook.source}\n+                                    </sourceDirectory>\n+                                    <targetDirectory>\n+                                        ${docbook.target}\n+                                    </targetDirectory>\n+                                    <includes>manual.xml</includes>\n+                                    <foCustomization>\n+                                        ${docbook.source}/manual-pdf.xsl\n+                                    </foCustomization>\n+                                    <imgSrcPath>\n+                                        ${docbook.source}/\n+                                    </imgSrcPath>\n+                                    <postProcess>\n+                                        <!-- copy to parent module for \n+                                             expanded access in upload -->\n+                                        <mkdir dir=\"${parent.site.docs}\"/>\n+                                        <delete file=\"${docbook.target}/manual.fo\"/>\n+                                        <copy todir=\"${parent.site.docs}\">\n+                                            <fileset\n+                                                dir=\"${docbook.target}\">\n+                                                <include name=\"manual.pdf\"/>\n+                                            </fileset>\n+                                        </copy>\n+                                    </postProcess>\n+                                </configuration>\n+                            </execution>\n+                            <execution>\n+                                <id>build-chunked-doc</id>\n+                                <phase>process-resources</phase>\n+                                <goals><goal>generate-html</goal></goals>\n+                                <configuration>\n+                                    <sourceDirectory>\n+                                        ${docbook.source}\n+                                    </sourceDirectory>\n+                                    <targetDirectory>\n+                                        ${docbook.target}\n+                                    </targetDirectory>\n+                                    <includes>manual.xml</includes>\n+                                    <chunkedOutput>true</chunkedOutput>\n+                                    <chunkQuietly>false</chunkQuietly>\n+                                    <htmlCustomization>\n+                                        ${docbook.source}/manual-xhtml-chunk.xsl\n+                                    </htmlCustomization>\n+                                    <postProcess>\n+                                        <!-- rename manual to index -->\n+                                        <move\n+                                        file=\"${docbook.target}/manual.html\"\n+                                        tofile=\"${docbook.target}/index.html\"/>\n+\n+                                        <!-- copy over images and styles -->\n+                                        <mkdir dir=\"${docbook.target}/img\"/>\n+                                        <copy todir=\"${docbook.target}/img\">\n+                                            <fileset\n+                                                dir=\"${docbook.source}/img\">\n+                                                <include name=\"*.*\"/>\n+                                                <exclude name=\"*.graffle\"/>\n+                                            </fileset>\n+                                        </copy>\n+\n+                                        <mkdir dir=\"${docbook.target}/css\"/>\n+                                        <copy todir=\"${docbook.target}/css\">\n+                                            <fileset\n+                                                dir=\"${docbook.source}/css\">\n+                                                <include name=\"*.*\"/>\n+                                            </fileset>\n+                                        </copy>\n+\n+                                        <!-- copy to parent module for \n+                                             expanded access in upload -->\n+                                        <mkdir dir=\"${parent.site.docs}\"/>\n+                                        <copy todir=\"${parent.site.docs}\">\n+                                            <fileset\n+                                                dir=\"${docbook.target}\">\n+                                                <include name=\"*.*\"/>\n+                                            </fileset>\n+                                        </copy>\n+                                    </postProcess>\n+                                </configuration>\n+                            </execution>\n+                            <execution>\n+                                <id>build-single-doc</id>\n+                                <phase>process-resources</phase>\n+                                <goals><goal>generate-html</goal></goals>\n+                                <configuration>\n+                                    <sourceDirectory>\n+                                        ${docbook.source}\n+                                    </sourceDirectory>\n+                                    <targetDirectory>\n+                                        ${docbook.target}\n+                                    </targetDirectory>\n+                                    <includes>manual.xml</includes>\n+                                    <chunkedOutput>false</chunkedOutput>\n+                                    <htmlCustomization>\n+                                        ${docbook.source}/manual-xhtml.xsl\n+                                    </htmlCustomization>\n+                                    <postProcess>\n+                                        <!-- copy to parent module for \n+                                             expanded access in upload -->\n+                                        <mkdir dir=\"${parent.site.docs}\"/>\n+                                        <copy todir=\"${parent.site.docs}\">\n+                                            <fileset\n+                                                dir=\"${docbook.target}\">\n+                                                <include name=\"manual.html\"/>\n+                                            </fileset>\n+                                        </copy>\n+                                    </postProcess>\n+                                </configuration>\n+                            </execution>\n+                        </executions>\n+                        <dependencies>\n+                        <dependency>\n+                            <groupId>org.docbook</groupId>\n+                            <artifactId>docbook-xml</artifactId>\n+                            <version>4.4</version>\n+                            <scope>runtime</scope>\n+                        </dependency>\n+                        </dependencies>\n+                    </plugin>\n+                </plugins>\n+            </build>\n+            <activation>\n+                <property>\n+                    <name>builddocs</name>\n+                    <value>true</value>\n+                </property>\n+            </activation>\n+            <pluginRepositories>\n+                <pluginRepository>\n+                    <id>agilejava</id>\n+                    <name>Agilejava repository (Docbook plugin)</name>\n+                    <url>http://agilejava.com/maven</url>\n+                </pluginRepository>\n+            </pluginRepositories>\n+        </profile>\n+\n+        <!-- sign the release files -->\n+        <profile>\n+            <id>sign-release</id>\n+            <build>\n+                <plugins>\n+                    <plugin>\n+                        <artifactId>maven-antrun-plugin</artifactId>\n+                        <executions>\n+                            <execution>\n+                                <phase>verify</phase>\n+                                <configuration>\n+                                    <tasks>\n+                                    <echo>Signing release files...</echo>\n+                                    <macrodef name=\"sign-file\">\n+                                        <attribute name=\"file\" />\n+                                        <sequential>\n+                                        <delete failonerror=\"false\"\n+                                            file=\"@{file}.asc\"/>\n+                                        <exec executable=\"gpg\"\n+                                            failonerror=\"true\">\n+                                            <arg value=\"--batch\"/>\n+                                            <arg value=\"--passphrase\"/>\n+                                            <arg value=\"${gpg.passphrase}\"/>\n+                                            <arg value=\"--verbose\"/>\n+                                            <arg value=\"--default-key\"/>\n+                                            <arg value=\"${openjpa.release.keyAlias}\"/>\n+                                            <arg value=\"--armor\"/>\n+                                            <arg value=\"--detach-sig\"/>\n+                                            <arg value=\"@{file}\"/>\n+                                        </exec>\n+                                        </sequential>\n+                                    </macrodef>\n+                                    <sign-file file=\"${openjpa.assembly.binaryFile}\"/>\n+                                    <sign-file file=\"${openjpa.assembly.sourceFile}\"/>\n+                                    </tasks>\n+                                </configuration>\n+                                <goals>\n+                                    <goal>run</goal>\n+                                </goals>\n+                            </execution>\n+                        </executions>\n+                    </plugin>\n+                    <plugin>\n+                        <groupId>org.codehaus.mojo</groupId>\n+                        <artifactId>build-helper-maven-plugin</artifactId>\n+                        <executions>\n+                            <execution>\n+                                <id>attach-signature-artifacts</id>\n+                                <phase>verify</phase>\n+                                <goals>\n+                                    <goal>attach-artifact</goal>\n+                                </goals>\n+                                <configuration>\n+                                    <artifacts>\n+                                        <artifact>\n+                                            <file>${openjpa.assembly.binaryFile}.asc</file>\n+                                            <classifier>${openjpa.assembly.binarySuffix}.zip</classifier>\n+                                            <type>asc</type>\n+                                        </artifact>\n+                                        <artifact>\n+                                            <file>${openjpa.assembly.sourceFile}.asc</file>\n+                                            <classifier>${openjpa.assembly.sourceSuffix}.zip</classifier>\n+                                            <type>asc</type>\n+                                        </artifact>\n+                                    </artifacts>\n+                                </configuration>\n+                            </execution>\n+                        </executions>\n+                    </plugin>\n+                </plugins>\n+            </build>\n+            <activation>\n+                <property>\n+                    <name>sign</name>\n+                    <value>true</value>\n+                </property>\n+            </activation>\n+        </profile>\n+    </profiles>\n+\n+    <!-- need to explicitly list dependencies for assembly to work -->\n+    <dependencies>\n+        <dependency>\n+            <groupId>org.apache.openjpa</groupId>\n+            <artifactId>openjpa</artifactId>\n+            <version>${pom.version}</version>\n+        </dependency>\n+\n+        <!-- included so we can include it in the distribution -->\n+        <dependency>\n+            <groupId>org.apache.derby</groupId>\n+            <artifactId>derby</artifactId>\n+        </dependency>\n+    </dependencies>\n+</project>"}]}

