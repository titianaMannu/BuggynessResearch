{"sha":"a044af3287e0ec164de9d0b6841998369860045f","node_id":"MDY6Q29tbWl0MjA2MzY0OmEwNDRhZjMyODdlMGVjMTY0ZGU5ZDBiNjg0MTk5ODM2OTg2MDA0NWY=","commit":{"author":{"name":"David J. Wisneski","email":"wisneskid@apache.org","date":"2007-05-02T22:53:39Z"},"committer":{"name":"David J. Wisneski","email":"wisneskid@apache.org","date":"2007-05-02T22:53:39Z"},"message":"Fix for issue OPENJPA-51. It should also resolve issue OPENJPA-173.\nChange to use BitSet.\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/openjpa/trunk@534647 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"95c64a563f382ad5782a95982dc62fbbd51dbe18","url":"https://api.github.com/repos/apache/openjpa/git/trees/95c64a563f382ad5782a95982dc62fbbd51dbe18"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/a044af3287e0ec164de9d0b6841998369860045f","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/a044af3287e0ec164de9d0b6841998369860045f","html_url":"https://github.com/apache/openjpa/commit/a044af3287e0ec164de9d0b6841998369860045f","comments_url":"https://api.github.com/repos/apache/openjpa/commits/a044af3287e0ec164de9d0b6841998369860045f/comments","author":null,"committer":null,"parents":[{"sha":"d5d214c1821cb78f4bf644cf0c1fe2d5cb092f69","url":"https://api.github.com/repos/apache/openjpa/commits/d5d214c1821cb78f4bf644cf0c1fe2d5cb092f69","html_url":"https://github.com/apache/openjpa/commit/d5d214c1821cb78f4bf644cf0c1fe2d5cb092f69"}],"stats":{"total":7,"additions":4,"deletions":3},"files":[{"sha":"90195a3dd929caa25b1ec341681d4869ce7e1983","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SelectImpl.java","status":"modified","additions":4,"deletions":3,"changes":7,"blob_url":"https://github.com/apache/openjpa/blob/a044af3287e0ec164de9d0b6841998369860045f/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SelectImpl.java","raw_url":"https://github.com/apache/openjpa/raw/a044af3287e0ec164de9d0b6841998369860045f/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SelectImpl.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SelectImpl.java?ref=a044af3287e0ec164de9d0b6841998369860045f","patch":"@@ -26,6 +26,7 @@\n import java.sql.Types;\n import java.util.AbstractList;\n import java.util.ArrayList;\n+import java.util.BitSet;\n import java.util.Collection;\n import java.util.Collections;\n import java.util.HashMap;\n@@ -164,7 +165,7 @@\n     // bit 1 : correspond to alias 1, etc.\n     // if the bit is set, the corresponding alias has been removed from parent\n     // and recorded under subselect.\n-    private int _removedAliasFromParent = 0;\n+    private BitSet _removedAliasFromParent = new BitSet(16);\n      \n     /**\n      * Helper method to return the proper table alias for the given alias index.\n@@ -1496,7 +1497,7 @@ private void removeParentJoins(PathJoins pj) {\n             return;\n         if (_parent._joins != null && !_parent._joins.isEmpty()) {\n             boolean removed = false;\n-            if (_removedAliasFromParent > 0)\n+            if (!_removedAliasFromParent.isEmpty())\n                 removed = _parent._joins.joins().removeAll(pj.joins());\n             if (!removed)\n                 pj.joins().removeAll(_parent._joins.joins());\n@@ -1914,7 +1915,7 @@ private Integer findAlias(Table table, Object key, boolean fromParent,\n             if (alias != null) {\n                 if (removeAliasFromParent) {\n                     recordTableAlias(table, key, alias);\n-                    _removedAliasFromParent |= (1 << alias.intValue());\n+                    _removedAliasFromParent.set(alias.intValue());\n                 }\n                 return alias;\n             }"}]}

