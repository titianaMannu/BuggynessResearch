{"sha":"a20d36c121387f0e2036069bbcf6a4458d3849f1","node_id":"MDY6Q29tbWl0MjA2MzY0OmEyMGQzNmMxMjEzODdmMGUyMDM2MDY5YmJjZjZhNDQ1OGQzODQ5ZjE=","commit":{"author":{"name":"Kevin W. Sutter","email":"kwsutter@apache.org","date":"2007-10-18T01:37:58Z"},"committer":{"name":"Kevin W. Sutter","email":"kwsutter@apache.org","date":"2007-10-18T01:37:58Z"},"message":"OPENJPA-399.  Committing Teresa's most recent patch for this Issue.  Should be ready for resolution now.\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@585774 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"ce745ddc16f4f6235ed3196e1d433f903639d6ff","url":"https://api.github.com/repos/apache/openjpa/git/trees/ce745ddc16f4f6235ed3196e1d433f903639d6ff"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/a20d36c121387f0e2036069bbcf6a4458d3849f1","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/a20d36c121387f0e2036069bbcf6a4458d3849f1","html_url":"https://github.com/apache/openjpa/commit/a20d36c121387f0e2036069bbcf6a4458d3849f1","comments_url":"https://api.github.com/repos/apache/openjpa/commits/a20d36c121387f0e2036069bbcf6a4458d3849f1/comments","author":null,"committer":null,"parents":[{"sha":"aca5f3351df8b7fae0cf79ae1ead5af2e1abdd5a","url":"https://api.github.com/repos/apache/openjpa/commits/aca5f3351df8b7fae0cf79ae1ead5af2e1abdd5a","html_url":"https://github.com/apache/openjpa/commit/aca5f3351df8b7fae0cf79ae1ead5af2e1abdd5a"}],"stats":{"total":30,"additions":24,"deletions":6},"files":[{"sha":"1e4b188be7bf8468d823c0d37e8d7ab0d64bfbf4","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/SchemaGenerator.java","status":"modified","additions":3,"deletions":1,"changes":4,"blob_url":"https://github.com/apache/openjpa/blob/a20d36c121387f0e2036069bbcf6a4458d3849f1/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/SchemaGenerator.java","raw_url":"https://github.com/apache/openjpa/raw/a20d36c121387f0e2036069bbcf6a4458d3849f1/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/SchemaGenerator.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/SchemaGenerator.java?ref=a20d36c121387f0e2036069bbcf6a4458d3849f1","patch":"@@ -819,8 +819,10 @@ public void generateSequences(String schemaName, String sequenceName,\n         if (_log.isTraceEnabled())\n             _log.trace(_loc.get(\"gen-seqs\", schemaName, sequenceName));\n \n+        // since all the sequences are generated under the default schema\n+        // therefore, we can use the null schemaname to search\n         Sequence[] seqs = _dict.getSequences(meta, conn.getCatalog(),\n-            schemaName, sequenceName, conn);\n+            null, sequenceName, conn);\n \n         SchemaGroup group = getSchemaGroup();\n         Schema schema;"},{"sha":"1346a96880722f208a725a7e72f9d8800dd1939c","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DB2Dictionary.java","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/apache/openjpa/blob/a20d36c121387f0e2036069bbcf6a4458d3849f1/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DB2Dictionary.java","raw_url":"https://github.com/apache/openjpa/raw/a20d36c121387f0e2036069bbcf6a4458d3849f1/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DB2Dictionary.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DB2Dictionary.java?ref=a20d36c121387f0e2036069bbcf6a4458d3849f1","patch":"@@ -94,7 +94,7 @@ public DB2Dictionary() {\n             \"LONG VARCHAR FOR BIT DATA\", \"LONG VARCHAR\", \"LONG VARGRAPHIC\",\r\n         }));\r\n         systemSchemas = new String(\r\n-                \"SYSCAT, SYSIBM, SYSSTAT, SYSIBMADM, SYSTOOLS\");\r\n+                \"SYSCAT,SYSIBM,SYSSTAT,SYSIBMADM,SYSTOOLS\");\r\n         maxConstraintNameLength = 18;\r\n         maxIndexNameLength = 18;\r\n         maxColumnNameLength = 30;\r"},{"sha":"6888521e8aee70082b965544aa6c2d64cc28e61e","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DBDictionary.java","status":"modified","additions":12,"deletions":4,"changes":16,"blob_url":"https://github.com/apache/openjpa/blob/a20d36c121387f0e2036069bbcf6a4458d3849f1/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DBDictionary.java","raw_url":"https://github.com/apache/openjpa/raw/a20d36c121387f0e2036069bbcf6a4458d3849f1/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DBDictionary.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DBDictionary.java?ref=a20d36c121387f0e2036069bbcf6a4458d3849f1","patch":"@@ -3364,7 +3364,7 @@ protected Table newTable(ResultSet tableMeta)\n         try {\n             int idx = 1;\n             if (schemaName != null)\n-                stmnt.setString(idx++, schemaName);\n+                stmnt.setString(idx++, schemaName.toUpperCase());\n             if (sequenceName != null)\n                 stmnt.setString(idx++, sequenceName);\n \n@@ -3708,13 +3708,21 @@ protected String convertSchemaCase(String objectName) {\n         if (objectName == null)\n             return null;\n \n-        if (SCHEMA_CASE_LOWER.equals(schemaCase))\n+        String scase = getSchemaCase();\n+        if (SCHEMA_CASE_LOWER.equals(scase))\n             return objectName.toLowerCase();\n-        if (SCHEMA_CASE_PRESERVE.equals(schemaCase))\n+        if (SCHEMA_CASE_PRESERVE.equals(scase))\n             return objectName;\n         return objectName.toUpperCase();\n     }\n-\n+    \n+    /**\n+     * Return DB specific schemaCase \n+     */\n+    public String getSchemaCase(){\n+        return schemaCase;\n+    }\n+        \n     /**\n      * Prepared the connection for metadata operations.\n      */"},{"sha":"18ac7cc65cb0d2ec3b27c5400d7857bed8446d1f","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SQLServerDictionary.java","status":"modified","additions":8,"deletions":0,"changes":8,"blob_url":"https://github.com/apache/openjpa/blob/a20d36c121387f0e2036069bbcf6a4458d3849f1/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SQLServerDictionary.java","raw_url":"https://github.com/apache/openjpa/raw/a20d36c121387f0e2036069bbcf6a4458d3849f1/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SQLServerDictionary.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SQLServerDictionary.java?ref=a20d36c121387f0e2036069bbcf6a4458d3849f1","patch":"@@ -42,6 +42,7 @@\n     private static final Localizer _loc = Localizer.forPackage\n         (SQLServerDictionary.class);\n \n+    private String schemaCase = SCHEMA_CASE_PRESERVE;\n     /**\n      * Flag whether to treat UNIQUEIDENTIFIER as VARBINARY or VARCHAR\n      */\n@@ -230,4 +231,11 @@ private void appendXmlValue(SQLBuffer buf, FilterValue val) {\n         appendLength(buf, type);\n         buf.append(\"')\");\n     }\n+    \n+    /**\n+     * Return DB specific schemaCase\n+     */\n+    public String getSchemaCase() {\n+        return schemaCase;\n+    }\n }"}]}

