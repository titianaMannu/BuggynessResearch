{"sha":"a4ca5d2ba225157881d865af04abc0c55a0cc68b","node_id":"MDY6Q29tbWl0MjA2MzY0OmE0Y2E1ZDJiYTIyNTE1Nzg4MWQ4NjVhZjA0YWJjMGM1NWEwY2M2OGI=","commit":{"author":{"name":"Michael Dick","email":"mikedd@apache.org","date":"2008-12-18T17:36:18Z"},"committer":{"name":"Michael Dick","email":"mikedd@apache.org","date":"2008-12-18T17:36:18Z"},"message":"OPENJPA-708 merge to 1.2.x\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/branches/1.2.x@727775 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"7b490ba10139b38753d686aa07b85211b8a30098","url":"https://api.github.com/repos/apache/openjpa/git/trees/7b490ba10139b38753d686aa07b85211b8a30098"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/a4ca5d2ba225157881d865af04abc0c55a0cc68b","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/a4ca5d2ba225157881d865af04abc0c55a0cc68b","html_url":"https://github.com/apache/openjpa/commit/a4ca5d2ba225157881d865af04abc0c55a0cc68b","comments_url":"https://api.github.com/repos/apache/openjpa/commits/a4ca5d2ba225157881d865af04abc0c55a0cc68b/comments","author":{"login":"mikedd","id":669432,"node_id":"MDQ6VXNlcjY2OTQzMg==","avatar_url":"https://avatars.githubusercontent.com/u/669432?v=4","gravatar_id":"","url":"https://api.github.com/users/mikedd","html_url":"https://github.com/mikedd","followers_url":"https://api.github.com/users/mikedd/followers","following_url":"https://api.github.com/users/mikedd/following{/other_user}","gists_url":"https://api.github.com/users/mikedd/gists{/gist_id}","starred_url":"https://api.github.com/users/mikedd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikedd/subscriptions","organizations_url":"https://api.github.com/users/mikedd/orgs","repos_url":"https://api.github.com/users/mikedd/repos","events_url":"https://api.github.com/users/mikedd/events{/privacy}","received_events_url":"https://api.github.com/users/mikedd/received_events","type":"User","site_admin":false},"committer":{"login":"mikedd","id":669432,"node_id":"MDQ6VXNlcjY2OTQzMg==","avatar_url":"https://avatars.githubusercontent.com/u/669432?v=4","gravatar_id":"","url":"https://api.github.com/users/mikedd","html_url":"https://github.com/mikedd","followers_url":"https://api.github.com/users/mikedd/followers","following_url":"https://api.github.com/users/mikedd/following{/other_user}","gists_url":"https://api.github.com/users/mikedd/gists{/gist_id}","starred_url":"https://api.github.com/users/mikedd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikedd/subscriptions","organizations_url":"https://api.github.com/users/mikedd/orgs","repos_url":"https://api.github.com/users/mikedd/repos","events_url":"https://api.github.com/users/mikedd/events{/privacy}","received_events_url":"https://api.github.com/users/mikedd/received_events","type":"User","site_admin":false},"parents":[{"sha":"446b6ce13e82de3b059182e6ec247022a7444feb","url":"https://api.github.com/repos/apache/openjpa/commits/446b6ce13e82de3b059182e6ec247022a7444feb","html_url":"https://github.com/apache/openjpa/commit/446b6ce13e82de3b059182e6ec247022a7444feb"}],"stats":{"total":18,"additions":16,"deletions":2},"files":[{"sha":"e17bb29905ca3415493d4bb0f4adf7c43bb97809","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SelectImpl.java","status":"modified","additions":4,"deletions":1,"changes":5,"blob_url":"https://github.com/apache/openjpa/blob/a4ca5d2ba225157881d865af04abc0c55a0cc68b/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SelectImpl.java","raw_url":"https://github.com/apache/openjpa/raw/a4ca5d2ba225157881d865af04abc0c55a0cc68b/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SelectImpl.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SelectImpl.java?ref=a4ca5d2ba225157881d865af04abc0c55a0cc68b","patch":"@@ -577,7 +577,10 @@ public void setParent(Select parent, String path) {\n         \n         if (_parent.getAliases() == null || _subPath == null)\n             return;\n-        \n+\n+        if (_parent._aliases.size() <= 1)\n+            return;\n+ \n         // resolve aliases for subselect from parent\n         Set<Map.Entry> entries = _parent.getAliases().entrySet();\n         for (Map.Entry entry : entries) {"},{"sha":"0eec39e5f50e3c4a506a3b2a07428393f8949fb3","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/query/TestSubquery.java","status":"modified","additions":12,"deletions":1,"changes":13,"blob_url":"https://github.com/apache/openjpa/blob/a4ca5d2ba225157881d865af04abc0c55a0cc68b/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/query/TestSubquery.java","raw_url":"https://github.com/apache/openjpa/raw/a4ca5d2ba225157881d865af04abc0c55a0cc68b/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/query/TestSubquery.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/query/TestSubquery.java?ref=a4ca5d2ba225157881d865af04abc0c55a0cc68b","patch":"@@ -32,7 +32,8 @@\n \n     public void setUp() {\n         setUp(Customer.class, Customer.CustomerKey.class,\n-            Order.class, OrderItem.class, CLEAR_TABLES);\n+            Order.class, OrderItem.class,\n+            Magazine.class, Publisher.class, CLEAR_TABLES);\n     }\n \n     static String[]  querys = new String[] {\n@@ -68,6 +69,16 @@ public void setUp() {\n             \" (select sum(o2.amount) from c.orders o2)\",\n         \"select o1.oid, c.name from Order o1, Customer c where o1.amount = \" +\n             \" any(select o2.amount from in(c.orders) o2)\",\n+        \"SELECT p, m \"+\n+            \"FROM Publisher p \"+\n+            \"LEFT OUTER JOIN p.magazineCollection m \"+\n+            \"WHERE m.id = (SELECT MAX(m2.id) \"+\n+            \"FROM Magazine m2 \"+\n+            \"WHERE m2.idPublisher.id = p.id \"+\n+            \"AND m2.datePublished = \"+\n+            \"(SELECT MAX(m3.datePublished) \"+\n+            \"FROM Magazine m3 \"+\n+            \"WHERE m3.idPublisher.id = p.id)) \", \n     // outstanding problem subqueries:\n     //\"select o from Order o where o.amount > (select count(o) from Order o)\",\n     //\"select o from Order o where o.amount > (select count(o2) from Order o2)\","}]}

