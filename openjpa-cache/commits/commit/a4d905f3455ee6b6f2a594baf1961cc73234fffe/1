{"sha":"a4d905f3455ee6b6f2a594baf1961cc73234fffe","node_id":"MDY6Q29tbWl0MjA2MzY0OmE0ZDkwNWYzNDU1ZWU2YjZmMmE1OTRiYWYxOTYxY2M3MzIzNGZmZmU=","commit":{"author":{"name":"Michael Dick","email":"mikedd@apache.org","date":"2008-06-09T17:53:22Z"},"committer":{"name":"Michael Dick","email":"mikedd@apache.org","date":"2008-06-09T17:53:22Z"},"message":"OPENJPA-629 trim schema name for Informix only.\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@665801 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"5b41f36e7e07c9dd740e35c82502f374e54eacd8","url":"https://api.github.com/repos/apache/openjpa/git/trees/5b41f36e7e07c9dd740e35c82502f374e54eacd8"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/a4d905f3455ee6b6f2a594baf1961cc73234fffe","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/a4d905f3455ee6b6f2a594baf1961cc73234fffe","html_url":"https://github.com/apache/openjpa/commit/a4d905f3455ee6b6f2a594baf1961cc73234fffe","comments_url":"https://api.github.com/repos/apache/openjpa/commits/a4d905f3455ee6b6f2a594baf1961cc73234fffe/comments","author":{"login":"mikedd","id":669432,"node_id":"MDQ6VXNlcjY2OTQzMg==","avatar_url":"https://avatars.githubusercontent.com/u/669432?v=4","gravatar_id":"","url":"https://api.github.com/users/mikedd","html_url":"https://github.com/mikedd","followers_url":"https://api.github.com/users/mikedd/followers","following_url":"https://api.github.com/users/mikedd/following{/other_user}","gists_url":"https://api.github.com/users/mikedd/gists{/gist_id}","starred_url":"https://api.github.com/users/mikedd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikedd/subscriptions","organizations_url":"https://api.github.com/users/mikedd/orgs","repos_url":"https://api.github.com/users/mikedd/repos","events_url":"https://api.github.com/users/mikedd/events{/privacy}","received_events_url":"https://api.github.com/users/mikedd/received_events","type":"User","site_admin":false},"committer":{"login":"mikedd","id":669432,"node_id":"MDQ6VXNlcjY2OTQzMg==","avatar_url":"https://avatars.githubusercontent.com/u/669432?v=4","gravatar_id":"","url":"https://api.github.com/users/mikedd","html_url":"https://github.com/mikedd","followers_url":"https://api.github.com/users/mikedd/followers","following_url":"https://api.github.com/users/mikedd/following{/other_user}","gists_url":"https://api.github.com/users/mikedd/gists{/gist_id}","starred_url":"https://api.github.com/users/mikedd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikedd/subscriptions","organizations_url":"https://api.github.com/users/mikedd/orgs","repos_url":"https://api.github.com/users/mikedd/repos","events_url":"https://api.github.com/users/mikedd/events{/privacy}","received_events_url":"https://api.github.com/users/mikedd/received_events","type":"User","site_admin":false},"parents":[{"sha":"ffbc73ffa6d85735666fd0ec98ae30f418d42d93","url":"https://api.github.com/repos/apache/openjpa/commits/ffbc73ffa6d85735666fd0ec98ae30f418d42d93","html_url":"https://github.com/apache/openjpa/commit/ffbc73ffa6d85735666fd0ec98ae30f418d42d93"}],"stats":{"total":21,"additions":19,"deletions":2},"files":[{"sha":"f7c0b40483f84333c9f32a4efad32ae7fc939a58","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/SchemaGenerator.java","status":"modified","additions":4,"deletions":2,"changes":6,"blob_url":"https://github.com/apache/openjpa/blob/a4d905f3455ee6b6f2a594baf1961cc73234fffe/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/SchemaGenerator.java","raw_url":"https://github.com/apache/openjpa/raw/a4d905f3455ee6b6f2a594baf1961cc73234fffe/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/SchemaGenerator.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/SchemaGenerator.java?ref=a4d905f3455ee6b6f2a594baf1961cc73234fffe","patch":"@@ -756,8 +756,10 @@ public void generateForeignKeys(String schemaName, String tableName,\n                 seq++;\n \n             // find pk table\n-            pkSchemaName = \n-                StringUtils.trimToNull(fks[i].getPrimaryKeySchemaName());\n+            pkSchemaName = fks[i].getPrimaryKeySchemaName();\n+            if(_dict.getTrimSchemaName()) {\n+                pkSchemaName= StringUtils.trimToNull(pkSchemaName);\n+            }\n             pkTableName = fks[i].getPrimaryKeyTableName();\n             if (_log.isTraceEnabled())\n                 _log.trace(_loc.get(\"gen-fk\", new Object[]{ name, table,"},{"sha":"19ec02a3063cbec148320bb9578da76e67efc70e","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DBDictionary.java","status":"modified","additions":13,"deletions":0,"changes":13,"blob_url":"https://github.com/apache/openjpa/blob/a4d905f3455ee6b6f2a594baf1961cc73234fffe/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DBDictionary.java","raw_url":"https://github.com/apache/openjpa/raw/a4d905f3455ee6b6f2a594baf1961cc73234fffe/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DBDictionary.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DBDictionary.java?ref=a4d905f3455ee6b6f2a594baf1961cc73234fffe","patch":"@@ -237,6 +237,11 @@\n     public boolean supportsModOperator = false;\n     public boolean supportsXMLColumn = false;\n     public boolean reportsSuccessNoInfoOnBatchUpdates = false;\n+    \n+    /**\n+     * Some Databases append whitespace after the schema name \n+     */\n+    public boolean trimSchemaName = false;\n \n     // functions\n     public String castFunction = \"CAST({0} AS {1})\";\n@@ -4438,4 +4443,12 @@ public boolean needsToCreateIndex(Index idx, Table table) {\n     public int getBatchUpdateCount(PreparedStatement ps) throws SQLException {\n         return 0;\n     }\n+    \n+    public boolean getTrimSchemaName() { \n+        return trimSchemaName;\n+    }\n+    \n+    public void setTrimSchemaName(boolean trimSchemaName) { \n+        this.trimSchemaName = trimSchemaName; \n+    }\n }"},{"sha":"79399fd3dc56d794caa7ccc116b176ea2ab9bef8","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/InformixDictionary.java","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/apache/openjpa/blob/a4d905f3455ee6b6f2a594baf1961cc73234fffe/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/InformixDictionary.java","raw_url":"https://github.com/apache/openjpa/raw/a4d905f3455ee6b6f2a594baf1961cc73234fffe/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/InformixDictionary.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/InformixDictionary.java?ref=a4d905f3455ee6b6f2a594baf1961cc73234fffe","patch":"@@ -148,6 +148,8 @@ public InformixDictionary() {\n         // Informix does not support foreign key delete action NULL or DEFAULT\n         supportsNullDeleteAction = false;\n         supportsDefaultDeleteAction = false;\n+        \n+        trimSchemaName = true;\n     }\n \n     public void connectedConfiguration(Connection conn)"}]}

