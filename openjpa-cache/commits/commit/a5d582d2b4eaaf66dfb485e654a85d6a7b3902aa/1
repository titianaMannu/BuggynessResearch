{"sha":"a5d582d2b4eaaf66dfb485e654a85d6a7b3902aa","node_id":"MDY6Q29tbWl0MjA2MzY0OmE1ZDU4MmQyYjRlYWFmNjZkZmI0ODVlNjU0YTg1ZDZhN2IzOTAyYWE=","commit":{"author":{"name":"Marc Prud'hommeaux","email":"mprudhom@apache.org","date":"2006-11-21T01:30:33Z"},"committer":{"name":"Marc Prud'hommeaux","email":"mprudhom@apache.org","date":"2006-11-21T01:30:33Z"},"message":"Merged license and deployment changes into the 0.9.6-incubating branch for preparation for a release\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/openjpa/branches/0.9.6-incubating@477460 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"cc09ff3ec93e715871f55f30a0adb69fb54f603d","url":"https://api.github.com/repos/apache/openjpa/git/trees/cc09ff3ec93e715871f55f30a0adb69fb54f603d"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/a5d582d2b4eaaf66dfb485e654a85d6a7b3902aa","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/a5d582d2b4eaaf66dfb485e654a85d6a7b3902aa","html_url":"https://github.com/apache/openjpa/commit/a5d582d2b4eaaf66dfb485e654a85d6a7b3902aa","comments_url":"https://api.github.com/repos/apache/openjpa/commits/a5d582d2b4eaaf66dfb485e654a85d6a7b3902aa/comments","author":null,"committer":null,"parents":[{"sha":"3bff075ee6a2be40dfbcf64ec76aa2d46cb0f405","url":"https://api.github.com/repos/apache/openjpa/commits/3bff075ee6a2be40dfbcf64ec76aa2d46cb0f405","html_url":"https://github.com/apache/openjpa/commit/3bff075ee6a2be40dfbcf64ec76aa2d46cb0f405"}],"stats":{"total":109,"additions":84,"deletions":25},"files":[{"sha":"3e3f2abde18ea9bf891dbc9ca27d4f7ccb518a8d","filename":"openjpa-examples/pom.xml","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/apache/openjpa/blob/a5d582d2b4eaaf66dfb485e654a85d6a7b3902aa/openjpa-examples/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/a5d582d2b4eaaf66dfb485e654a85d6a7b3902aa/openjpa-examples/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-examples/pom.xml?ref=a5d582d2b4eaaf66dfb485e654a85d6a7b3902aa","patch":"@@ -39,7 +39,7 @@\n         <dependency>\n             <groupId>org.apache.derby</groupId>\n             <artifactId>derby</artifactId>\n-            <version>10.1.3.1</version>\n+            <version>10.2.1.6</version>\n             <scope>test</scope>\n         </dependency>\n         <dependency>\n@@ -51,7 +51,7 @@\n         <dependency>\n             <groupId>commons-collections</groupId>\n             <artifactId>commons-collections</artifactId>\n-            <version>3.1</version>\n+            <version>3.2</version>\n             <scope>test</scope>\n         </dependency>\n     </dependencies>"},{"sha":"5349789fc519eb12c6a4d07456c5ea233972e828","filename":"openjpa-lib/src/main/java/org/apache/openjpa/lib/util/Localizer.java","status":"modified","additions":19,"deletions":18,"changes":37,"blob_url":"https://github.com/apache/openjpa/blob/a5d582d2b4eaaf66dfb485e654a85d6a7b3902aa/openjpa-lib/src/main/java/org/apache/openjpa/lib/util/Localizer.java","raw_url":"https://github.com/apache/openjpa/raw/a5d582d2b4eaaf66dfb485e654a85d6a7b3902aa/openjpa-lib/src/main/java/org/apache/openjpa/lib/util/Localizer.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-lib/src/main/java/org/apache/openjpa/lib/util/Localizer.java?ref=a5d582d2b4eaaf66dfb485e654a85d6a7b3902aa","patch":"@@ -77,12 +77,16 @@ public static Localizer forPackage(Class cls, Locale locale) {\n         if (locale == null)\n             locale = Locale.getDefault();\n \n-        Package pkg = cls == null ? null : cls.getPackage();\n+        int dot = (cls == null) ? -1 : cls.getName().lastIndexOf('.');\n+        String pkg;\n         String file;\n-        if (pkg == null)\n+        if (dot == -1) {\n+            pkg = \"\";\n             file = \"localizer\";\n-        else\n-            file = pkg.getName() + \".localizer\";\n+        } else {\n+            pkg = cls.getName().substring(0, dot);\n+            file = pkg + \".localizer\";\n+        }\n         String key = file + locale.toString();\n \n         // no locking; ok if bundle created multiple times\n@@ -113,13 +117,13 @@ public static boolean removeProvider(ResourceBundleProvider provider) {\n     }\n \n     private String _file;\n+    private String _pkg;\n     private ResourceBundle _bundle = null;\n-    private Package _package;\n     private Locale _locale;\n     private ClassLoader _loader;\n \n-    private Localizer(Package p, String f, Locale locale, ClassLoader loader) {\n-        _package = p;\n+    private Localizer(String pkg, String f, Locale locale, ClassLoader loader) {\n+        _pkg = pkg;\n         _file = f;\n         _locale = locale;\n         _loader = loader;\n@@ -212,7 +216,7 @@ public Message get(String key, Object sub1, Object sub2, Object sub3) {\n      * @see #get(String)\n      */\n     public Message get(String key, Object[] subs) {\n-        return new Message(_package, getBundle(), key, subs, false);\n+        return new Message(_pkg, getBundle(), key, subs, false);\n     }\n \n     /**\n@@ -224,7 +228,7 @@ public Message get(String key, Object[] subs) {\n      * @see #getFatal(String)\n      */\n     public Message getFatal(String key, Object[] subs) {\n-        return new Message(_package, getBundle(), key, subs, true);\n+        return new Message(_pkg, getBundle(), key, subs, true);\n     }\n \n     /**\n@@ -234,17 +238,17 @@ public Message getFatal(String key, Object[] subs) {\n      */\n     public static class Message {\n \n-        private final Package _package;\n+        private final String _pkg;\n         private final String _key;\n         private final Object[] _subs;\n         private final String _localizedMessage;\n \n-        private Message(Package pkg, ResourceBundle bundle, String key, \n+        private Message(String packageName, ResourceBundle bundle, String key, \n             Object[] subs, boolean fatal) {\n             if (bundle == null && fatal)\n                 throw new MissingResourceException(key, key, key);\n \n-            _package = pkg;\n+            _pkg = packageName;\n             _key = key;\n             _subs = subs;\n             if (bundle == null) {\n@@ -282,13 +286,10 @@ public String getKey() {\n             return _subs;\n         }\n \n-        /**\n-         * Package containing localized resource for this message.\n-         */\n-        public Package getPackage() {\n-            return _package;\n+        public String getPackageName() {\n+            return _pkg;\n         }\n-        \n+\n         public String toString() {\n             return getMessage();\n         }"},{"sha":"0ce1be9b7febea47603ec28a2aef60d71883cf8f","filename":"openjpa-persistence-jdbc/pom.xml","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/apache/openjpa/blob/a5d582d2b4eaaf66dfb485e654a85d6a7b3902aa/openjpa-persistence-jdbc/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/a5d582d2b4eaaf66dfb485e654a85d6a7b3902aa/openjpa-persistence-jdbc/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/pom.xml?ref=a5d582d2b4eaaf66dfb485e654a85d6a7b3902aa","patch":"@@ -45,7 +45,7 @@\n         <dependency>\n             <groupId>org.apache.derby</groupId>\n             <artifactId>derby</artifactId>\n-            <version>10.1.3.1</version>\n+            <version>10.2.1.6</version>\n             <scope>test</scope>\n         </dependency>\n         <dependency>\n@@ -57,7 +57,7 @@\n         <dependency>\n             <groupId>commons-collections</groupId>\n             <artifactId>commons-collections</artifactId>\n-            <version>3.1</version>\n+            <version>3.2</version>\n             <scope>test</scope>\n         </dependency>\n     </dependencies>"},{"sha":"9a04185602b366abed9d9337164c98fa3954d155","filename":"openjpa-project/pom.xml","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/apache/openjpa/blob/a5d582d2b4eaaf66dfb485e654a85d6a7b3902aa/openjpa-project/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/a5d582d2b4eaaf66dfb485e654a85d6a7b3902aa/openjpa-project/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-project/pom.xml?ref=a5d582d2b4eaaf66dfb485e654a85d6a7b3902aa","patch":"@@ -343,7 +343,7 @@\n         <dependency>\r\n             <groupId>org.apache.derby</groupId>\r\n             <artifactId>derby</artifactId>\r\n-            <version>10.1.3.1</version>\r\n+            <version>10.2.1.6</version>\r\n         </dependency>\r\n \r\n         <!-- jars needed for for docbook -->\r"},{"sha":"5d87ad7131421b92bf68fb8f53575b07af57423e","filename":"openjpa-project/source-assembly.xml","status":"modified","additions":32,"deletions":2,"changes":34,"blob_url":"https://github.com/apache/openjpa/blob/a5d582d2b4eaaf66dfb485e654a85d6a7b3902aa/openjpa-project/source-assembly.xml","raw_url":"https://github.com/apache/openjpa/raw/a5d582d2b4eaaf66dfb485e654a85d6a7b3902aa/openjpa-project/source-assembly.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-project/source-assembly.xml?ref=a5d582d2b4eaaf66dfb485e654a85d6a7b3902aa","patch":"@@ -19,14 +19,44 @@\n     <formats>\n         <format>zip</format>\n     </formats>\n-    <includeBaseDirectory>true</includeBaseDirectory>\n+    <!--\n+        rather than including the base directory (which would cause this\n+        archive to unpack into the same directory as the binary\n+        distribution), we specify the directory into which to put\n+        sources below, in the <outputDirectory> tags\n+    -->\n+    <includeBaseDirectory>false</includeBaseDirectory>\n     <fileSets>\n         <fileSet>\n             <directory>..</directory>\n-            <outputDirectory></outputDirectory>\n+            <outputDirectory>${artifactId}-${version}-source</outputDirectory>\n             <excludes>\n                 <exclude>**/target/**</exclude>\n             </excludes>\n         </fileSet>\n+\n+        <!--\n+            Also put the standard license and notice files at the top\n+            of the zip. Even those these will be included in the\n+            openjpa-project sub-directory, the Apache rules say that\n+            it needs to be in the top-level of the artifact. See:\n+\n+                http://www.apache.org/legal/src-headers.html#notice\n+        -->\n+        <fileSet>\n+            <outputDirectory>${artifactId}-${version}-source</outputDirectory>\n+            <includes>\n+                <include>README</include>\n+                <include>DISCLAIMER</include>\n+                <include>LICENSE</include>\n+                <include>STATUS</include>\n+                <include>NOTICE</include>\n+                <include>README.txt</include>\n+                <include>DISCLAIMER.txt</include>\n+                <include>LICENSE.txt</include>\n+                <include>STATUS.txt</include>\n+                <include>NOTICE.txt</include>\n+            </includes>\n+        </fileSet>\n     </fileSets>\n </assembly>"},{"sha":"b92fb8809b6c94f87775a2e28f476bcc7d563470","filename":"src/site/apt/building.apt","status":"modified","additions":14,"deletions":0,"changes":14,"blob_url":"https://github.com/apache/openjpa/blob/a5d582d2b4eaaf66dfb485e654a85d6a7b3902aa/src/site/apt/building.apt","raw_url":"https://github.com/apache/openjpa/raw/a5d582d2b4eaaf66dfb485e654a85d6a7b3902aa/src/site/apt/building.apt","contents_url":"https://api.github.com/repos/apache/openjpa/contents/src/site/apt/building.apt?ref=a5d582d2b4eaaf66dfb485e654a85d6a7b3902aa","patch":"@@ -1,3 +1,17 @@\n+-- Copyright 2006 The Apache Software Foundation.\n+-- \n+-- Licensed under the Apache License, Version 2.0 (the \"License\");\n+-- you may not use this file except in compliance with the License.\n+-- You may obtain a copy of the License at\n+-- \n+-- http://www.apache.org/licenses/LICENSE-2.0\n+--    \n+-- Unless required by applicable law or agreed to in writing, software\n+-- distributed under the License is distributed on an \"AS IS\" BASIS,\n+-- WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+-- See the License for the specific language governing permissions and\n+-- limitations under the License.\n+\n  ------\n  openjpa\n  ------"},{"sha":"1297c4222e41b5217dd02fdcc29fcf838154e1c6","filename":"src/site/apt/index.apt","status":"modified","additions":14,"deletions":0,"changes":14,"blob_url":"https://github.com/apache/openjpa/blob/a5d582d2b4eaaf66dfb485e654a85d6a7b3902aa/src/site/apt/index.apt","raw_url":"https://github.com/apache/openjpa/raw/a5d582d2b4eaaf66dfb485e654a85d6a7b3902aa/src/site/apt/index.apt","contents_url":"https://api.github.com/repos/apache/openjpa/contents/src/site/apt/index.apt?ref=a5d582d2b4eaaf66dfb485e654a85d6a7b3902aa","patch":"@@ -1,3 +1,17 @@\n+-- Copyright 2006 The Apache Software Foundation.\n+-- \n+-- Licensed under the Apache License, Version 2.0 (the \"License\");\n+-- you may not use this file except in compliance with the License.\n+-- You may obtain a copy of the License at\n+-- \n+-- http://www.apache.org/licenses/LICENSE-2.0\n+--    \n+-- Unless required by applicable law or agreed to in writing, software\n+-- distributed under the License is distributed on an \"AS IS\" BASIS,\n+-- WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+-- See the License for the specific language governing permissions and\n+-- limitations under the License.\n+\n  ------\n  openjpa\n  ------"}]}

