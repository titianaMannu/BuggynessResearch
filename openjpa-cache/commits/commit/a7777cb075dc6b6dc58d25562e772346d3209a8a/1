{"sha":"a7777cb075dc6b6dc58d25562e772346d3209a8a","node_id":"MDY6Q29tbWl0MjA2MzY0OmE3Nzc3Y2IwNzVkYzZiNmRjNThkMjU1NjJlNzcyMzQ2ZDMyMDlhOGE=","commit":{"author":{"name":"Patrick Linskey","email":"pcl@apache.org","date":"2007-08-30T18:38:33Z"},"committer":{"name":"Patrick Linskey","email":"pcl@apache.org","date":"2007-08-30T18:38:33Z"},"message":"OPENJPA-346\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@571269 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"c067706a73fd2f9e00d8f8e7c92a33806d8f4ebf","url":"https://api.github.com/repos/apache/openjpa/git/trees/c067706a73fd2f9e00d8f8e7c92a33806d8f4ebf"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/a7777cb075dc6b6dc58d25562e772346d3209a8a","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/a7777cb075dc6b6dc58d25562e772346d3209a8a","html_url":"https://github.com/apache/openjpa/commit/a7777cb075dc6b6dc58d25562e772346d3209a8a","comments_url":"https://api.github.com/repos/apache/openjpa/commits/a7777cb075dc6b6dc58d25562e772346d3209a8a/comments","author":null,"committer":null,"parents":[{"sha":"3a78ec68ac785a50a7bbe337f6963e33f621589e","url":"https://api.github.com/repos/apache/openjpa/commits/3a78ec68ac785a50a7bbe337f6963e33f621589e","html_url":"https://github.com/apache/openjpa/commit/3a78ec68ac785a50a7bbe337f6963e33f621589e"}],"stats":{"total":24,"additions":17,"deletions":7},"files":[{"sha":"9af0c0c5d4ef016c2df750aebb3490951628e7b8","filename":"openjpa-kernel-5/src/main/java/org/apache/openjpa/enhance/PCEnhancerAgent.java","status":"modified","additions":17,"deletions":7,"changes":24,"blob_url":"https://github.com/apache/openjpa/blob/a7777cb075dc6b6dc58d25562e772346d3209a8a/openjpa-kernel-5/src/main/java/org/apache/openjpa/enhance/PCEnhancerAgent.java","raw_url":"https://github.com/apache/openjpa/raw/a7777cb075dc6b6dc58d25562e772346d3209a8a/openjpa-kernel-5/src/main/java/org/apache/openjpa/enhance/PCEnhancerAgent.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel-5/src/main/java/org/apache/openjpa/enhance/PCEnhancerAgent.java?ref=a7777cb075dc6b6dc58d25562e772346d3209a8a","patch":"@@ -60,14 +60,24 @@\n     public static void premain(String args, Instrumentation inst) {\n         Options opts = Configurations.parseProperties(args);\n \n-        if (opts.getBooleanProperty(\n-            \"ClassLoadEnhancement\", \"classLoadEnhancement\", true))\n-            registerClassLoadEnhancer(inst, opts);\n-\n-        // Deprecated property setting\n-        if (opts.getBooleanProperty(\n-            \"RuntimeEnhancement\", \"runtimeEnhancement\", true))\n+        if (opts.containsKey(\"ClassLoadEnhancement\") ||\n+            opts.containsKey(\"classLoadEnhancement\")) {\n+            if (opts.getBooleanProperty(\n+                \"ClassLoadEnhancement\", \"classLoadEnhancement\", true))\n+                registerClassLoadEnhancer(inst, opts);\n+        }\n+        else if (opts.containsKey(\"RuntimeEnhancement\") ||\n+            opts.containsKey(\"runtimeEnhancement\")) {\n+            // Deprecated property setting\n+            if (opts.getBooleanProperty(\n+                \"RuntimeEnhancement\", \"runtimeEnhancement\", true))\n+                registerClassLoadEnhancer(inst, opts);\n+        } else {\n+            // if neither is set, then we should be turning it on. We need this\n+            // logic instead of just a getBooleanProperty() because of the\n+            // backwards-compat logic flow.\n             registerClassLoadEnhancer(inst, opts);\n+        }\n \n         if (opts.getBooleanProperty(\n             \"RuntimeRedefinition\", \"runtimeRedefinition\", true)) {"}]}

