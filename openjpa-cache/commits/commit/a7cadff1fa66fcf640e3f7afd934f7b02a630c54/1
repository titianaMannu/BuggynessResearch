{"sha":"a7cadff1fa66fcf640e3f7afd934f7b02a630c54","node_id":"MDY6Q29tbWl0MjA2MzY0OmE3Y2FkZmYxZmE2NmZjZjY0MGUzZjdhZmQ5MzRmN2IwMmE2MzBjNTQ=","commit":{"author":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2010-07-29T19:34:56Z"},"committer":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2010-07-29T19:34:56Z"},"message":"OPENJPA-1751 Allow OpenBooks to be built and packaged via Maven (reuses ANT scripts.)\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@980549 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"8af750b3e0cd1bb7e23940a88b88dd7f27f59b15","url":"https://api.github.com/repos/apache/openjpa/git/trees/8af750b3e0cd1bb7e23940a88b88dd7f27f59b15"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/a7cadff1fa66fcf640e3f7afd934f7b02a630c54","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/a7cadff1fa66fcf640e3f7afd934f7b02a630c54","html_url":"https://github.com/apache/openjpa/commit/a7cadff1fa66fcf640e3f7afd934f7b02a630c54","comments_url":"https://api.github.com/repos/apache/openjpa/commits/a7cadff1fa66fcf640e3f7afd934f7b02a630c54/comments","author":null,"committer":null,"parents":[{"sha":"534892a4ada1c8029f1354c23060d50de459e554","url":"https://api.github.com/repos/apache/openjpa/commits/534892a4ada1c8029f1354c23060d50de459e554","html_url":"https://github.com/apache/openjpa/commit/534892a4ada1c8029f1354c23060d50de459e554"}],"stats":{"total":192,"additions":181,"deletions":11},"files":[{"sha":"45a9829bf65778e1fee970bd2ecdea4b397adb8b","filename":"openjpa-examples/openbooks/assembly.xml","status":"added","additions":78,"deletions":0,"changes":78,"blob_url":"https://github.com/apache/openjpa/blob/a7cadff1fa66fcf640e3f7afd934f7b02a630c54/openjpa-examples/openbooks/assembly.xml","raw_url":"https://github.com/apache/openjpa/raw/a7cadff1fa66fcf640e3f7afd934f7b02a630c54/openjpa-examples/openbooks/assembly.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-examples/openbooks/assembly.xml?ref=a7cadff1fa66fcf640e3f7afd934f7b02a630c54","patch":"@@ -0,0 +1,78 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+ Licensed to the Apache Software Foundation (ASF) under one\n+ or more contributor license agreements.  See the NOTICE file\n+ distributed with this work for additional information\n+ regarding copyright ownership.  The ASF licenses this file\n+ to you under the Apache License, Version 2.0 (the\n+ \"License\"); you may not use this file except in compliance\n+ with the License.  You may obtain a copy of the License at\n+ \n+ http://www.apache.org/licenses/LICENSE-2.0\n+ \n+ Unless required by applicable law or agreed to in writing,\n+ software distributed under the License is distributed on an\n+ \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ KIND, either express or implied.  See the License for the\n+ specific language governing permissions and limitations\n+ under the License.   \n+-->\n+<assembly>\n+    <id>binary</id>\n+    <formats>\n+        <format>zip</format>\n+    </formats>\n+    <includeBaseDirectory>true</includeBaseDirectory>\n+    <fileSets>\n+        <fileSet>\n+            <directory>src/main/resources</directory>\n+            <outputDirectory>/</outputDirectory>\n+            <includes>\n+                <include>load.properties</include>\n+                <include>demo.properties</include>\n+            </includes>\n+        </fileSet>\n+        <fileSet>\n+            <directory>src/main/resources/META-INF</directory>\n+            <outputDirectory>/META-INF</outputDirectory>\n+            <includes>\n+                <include>persistence.xml</include>\n+            </includes>\n+        </fileSet>\n+        <fileSet>\n+            <directory>src/main/resources/slides</directory>\n+            <outputDirectory>/slides</outputDirectory>\n+        </fileSet>\n+        <fileSet>\n+            <directory>target</directory>\n+            <outputDirectory>/</outputDirectory>\n+            <includes>\n+                <include>run.properties</include>\n+                <include>run.xml</include>\n+                <include>index.html</include>\n+                <include>NOTICE.txt</include>\n+                <include>LICENSE.txt</include>\n+            </includes>\n+        </fileSet>\n+        <fileSet>\n+            <directory>target/generated-html</directory>\n+            <outputDirectory>/source</outputDirectory>\n+            <includes>\n+                <include>**/*.css</include>\n+                <include>**/*.html</include>\n+            </includes>\n+        </fileSet>\n+    </fileSets>\n+    <dependencySets>\n+        <dependencySet>\n+            <outputDirectory>/</outputDirectory>\n+            <unpack>false</unpack>\n+            <scope>runtime</scope>\n+            <includes>\n+                <include>org.apache.openjpa.openjpa-examples:openbooks</include>\n+                <include>org.apache.openjpa:openjpa-all</include>\n+                <include>org.apache.derby:derby</include>\n+            </includes>\n+        </dependencySet>\n+    </dependencySets>\n+</assembly>"},{"sha":"aa74916a4839d1bdd5cecb979a8124cb2beee251","filename":"openjpa-examples/openbooks/build.properties","status":"modified","additions":4,"deletions":1,"changes":5,"blob_url":"https://github.com/apache/openjpa/blob/a7cadff1fa66fcf640e3f7afd934f7b02a630c54/openjpa-examples/openbooks/build.properties","raw_url":"https://github.com/apache/openjpa/raw/a7cadff1fa66fcf640e3f7afd934f7b02a630c54/openjpa-examples/openbooks/build.properties","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-examples/openbooks/build.properties?ref=a7cadff1fa66fcf640e3f7afd934f7b02a630c54","patch":"@@ -33,4 +33,7 @@ openjpa.lib=${maven.repos}/org/apache/openjpa/openjpa-all/${openjpa.version}\n # Requires ANTLR to generate syntax colored Java source code\n # Not essential, but otherwise you can configure demo.properties to browse\n # FishEye source code with syntax coloring\n-antlr.lib=c:/antlr/antlr-3.2.jar\n+antlr.version=3.2\n+antlr.lib=${maven.repos}/org/antlr/antlr/${antlr.version}\n+antlr-runtime.lib=${maven.repos}/org/antlr/antlr-runtime/${antlr.version}\n+"},{"sha":"ce1aa2b4b512d15488970d0671c328f0c148dae3","filename":"openjpa-examples/openbooks/build.xml","status":"modified","additions":16,"deletions":3,"changes":19,"blob_url":"https://github.com/apache/openjpa/blob/a7cadff1fa66fcf640e3f7afd934f7b02a630c54/openjpa-examples/openbooks/build.xml","raw_url":"https://github.com/apache/openjpa/raw/a7cadff1fa66fcf640e3f7afd934f7b02a630c54/openjpa-examples/openbooks/build.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-examples/openbooks/build.xml?ref=a7cadff1fa66fcf640e3f7afd934f7b02a630c54","patch":"@@ -76,9 +76,13 @@\n \t\n \t<path id=\"code.generation.classpath\" \n \t\tdescription=\"\">\n-\t\t<pathelement location=\"${ant.home}/ant.jar\" />\n-\t\t<pathelement location=\"${antlr.lib}\" />\n \t\t<pathelement location=\"${classes.dir}\" />\n+\t\t<fileset dir=\"${antlr.lib}\">\n+\t\t\t<include name=\"*.jar\" />\n+\t\t</fileset>\n+\t\t<fileset dir=\"${antlr-runtime.lib}\">\n+\t\t\t<include name=\"*.jar\" />\n+\t\t</fileset>\n \t</path>\n \t\n \t\n@@ -128,7 +132,16 @@\n \t\t</condition>\n \t\t<mkdir dir=\"${deploy.dir}\"/>\n \t\t\n-\t\t<available file=\"${antlr.lib}\"     property=\"antlr.exists\" />\n+\t\t<available file=\"${antlr.lib}\"     property=\"antlr.exists\"/>\n+<!--\n+  <condition property=\"antlr.exists\">\n+    <and>\n+      <isset property=\"antlr.lib.exists\" />\n+      <available classname=\"org.antlr.Tool\" />\n+    </and>\n+  </condition>\n+\t\t<fail unless=\"antlr.exists\" message=\"ANTLR is missing from classpath\"/>\n+-->\n \t</target>\n \t\n \t<target name=\"generate-canonical-featureSelection\" depends=\"check-env\""},{"sha":"a85c8c161180ae025bd7d6d1d3b68d6c54679a17","filename":"openjpa-examples/openbooks/pom.xml","status":"modified","additions":71,"deletions":4,"changes":75,"blob_url":"https://github.com/apache/openjpa/blob/a7cadff1fa66fcf640e3f7afd934f7b02a630c54/openjpa-examples/openbooks/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/a7cadff1fa66fcf640e3f7afd934f7b02a630c54/openjpa-examples/openbooks/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-examples/openbooks/pom.xml?ref=a7cadff1fa66fcf640e3f7afd934f7b02a630c54","patch":"@@ -49,6 +49,22 @@\n             <artifactId>openjpa-all</artifactId>\n             <version>${project.version}</version>\n         </dependency>\n+        <dependency>\n+            <groupId>org.apache.derby</groupId>\n+            <artifactId>derby</artifactId>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.antlr</groupId>\n+            <artifactId>antlr</artifactId>\n+            <version>3.2</version>\n+            <scope>provided</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.apache.ant</groupId>\n+            <artifactId>ant</artifactId>\n+            <version>1.8.1</version>\n+            <scope>provided</scope>\n+        </dependency>\n         <dependency>\n             <groupId>de.java2html</groupId>\n             <artifactId>java2html</artifactId>\n@@ -63,13 +79,46 @@\n         </dependency>\n     </dependencies>\n \n+    <build>\n+        <plugins>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-checkstyle-plugin</artifactId>\n+                <executions>\n+                    <execution>\n+                        <phase>process-sources</phase>\n+                        <goals>\n+                            <goal>checkstyle</goal>\n+                        </goals>\n+                        <configuration>\n+                            <excludes>**/*_.java,**/Java*.java</excludes>\n+                        </configuration>\n+                    </execution>\n+                </executions>\n+            </plugin>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-deploy-plugin</artifactId>\n+                <configuration>\n+                    <!-- Don't publish these artifacts to central -->\n+                    <skip>true</skip>\n+                </configuration>\n+            </plugin>\n+        </plugins>\n+    </build>\n+\n     <profiles>\n         <profile>\n             <id>build</id>\n             <activation>\n                 <activeByDefault>true</activeByDefault>\n             </activation>\n             <build>\n+                <resources>\n+                    <resource>\n+                        <directory>src/main/resources</directory>\n+                    </resource>\n+                </resources>\n                 <plugins>\n                     <plugin>\n                         <groupId>org.apache.maven.plugins</groupId>\n@@ -84,7 +133,7 @@\n                                         <property name=\"openjpa.version\" value=\"${project.version}\" />\n                                         <property name=\"maven.repos\" value=\"${settings.localRepository}\" />\n                                         <ant antfile=\"${basedir}/build.xml\">\n-                                            <target name=\"genmodel\" />\n+                                            <target name=\"generate-canonical-featureSelection\" />\n                                         </ant>\n                                     </tasks>\n                                 </configuration>\n@@ -110,15 +159,15 @@\n                                 </goals>\n                             </execution>\n                             <execution>\n-                                <id>generate-html-source</id>\n+                                <id>generate-source</id>\n                                 <phase>prepare-package</phase>\n                                 <configuration>\n                                     <tasks>\n-                                        <echo>Running OpenBooks Generate HTML Source</echo>\n+                                        <echo>Running OpenBooks Generate Source</echo>\n                                         <property name=\"openjpa.version\" value=\"${project.version}\" />\n                                         <property name=\"maven.repos\" value=\"${settings.localRepository}\" />\n                                         <ant antfile=\"${basedir}/build.xml\">\n-                                            <target name=\"generate-html-source\" />\n+                                            <target name=\"generate-source\" />\n                                         </ant>\n                                         <copy todir=\"${basedir}/target\">\n                                             <fileset dir=\"${basedir}\"\n@@ -136,6 +185,24 @@\n                             </execution>\n                         </executions>\n                     </plugin>\n+                    <plugin>\n+                        <groupId>org.apache.maven.plugins</groupId>\n+                        <artifactId>maven-assembly-plugin</artifactId>\n+                        <executions>\n+                            <execution>\n+                                <id>bin</id>\n+                                <phase>package</phase>\n+                                <goals>\n+                                    <goal>attached</goal>\n+                                </goals>\n+                                <configuration>\n+                                    <descriptors>\n+                                        <descriptor>assembly.xml</descriptor>\n+                                    </descriptors>\n+                                </configuration>\n+                            </execution>\n+                        </executions>\n+                    </plugin>\n                 </plugins>\n             </build>\n         </profile>"},{"sha":"d3016f753124aa5330be7ee5c6da4c8dd86df585","filename":"openjpa-examples/openbooks/src/main/java/openbook/tools/CommandProcessor.java","status":"modified","additions":3,"deletions":1,"changes":4,"blob_url":"https://github.com/apache/openjpa/blob/a7cadff1fa66fcf640e3f7afd934f7b02a630c54/openjpa-examples/openbooks/src/main/java/openbook/tools/CommandProcessor.java","raw_url":"https://github.com/apache/openjpa/raw/a7cadff1fa66fcf640e3f7afd934f7b02a630c54/openjpa-examples/openbooks/src/main/java/openbook/tools/CommandProcessor.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-examples/openbooks/src/main/java/openbook/tools/CommandProcessor.java?ref=a7cadff1fa66fcf640e3f7afd934f7b02a630c54","patch":"@@ -303,7 +303,9 @@ public String getName() {\n          */\n         public Option setDefault(String v) {\n             if (!requiresInput)\n-                throw new IllegalStateException(this + \" does not require a value. Can not set default value [\" + v + \"]\");\n+                throw new IllegalStateException(this +\n+                    \" does not require a value. Can not set default value [\" +\n+                    v + \"]\");\n             defValue = v;\n             return this;\n         }"},{"sha":"c7abe460703355386c5b5df1a0df8d87404244fb","filename":"openjpa-examples/openbooks/src/main/java/openbook/tools/converter/SourceRenderer.java","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/apache/openjpa/blob/a7cadff1fa66fcf640e3f7afd934f7b02a630c54/openjpa-examples/openbooks/src/main/java/openbook/tools/converter/SourceRenderer.java","raw_url":"https://github.com/apache/openjpa/raw/a7cadff1fa66fcf640e3f7afd934f7b02a630c54/openjpa-examples/openbooks/src/main/java/openbook/tools/converter/SourceRenderer.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-examples/openbooks/src/main/java/openbook/tools/converter/SourceRenderer.java?ref=a7cadff1fa66fcf640e3f7afd934f7b02a630c54","patch":"@@ -51,7 +51,8 @@\n      * <br>\n      * <pre>  $ java SourceRenderer [options] files </pre>\n      * For example,\n-     * <pre> $ java SourceRenderer -stylesheet mystyle.css -sourcepath test -d generated/html acme/foo/SomeClass.java</pre>\n+     * <pre> $ java SourceRenderer -stylesheet mystyle.css -sourcepath test\n+     *  -d generated/html acme/foo/SomeClass.java</pre>\n      * <p>\n      * \n      * Recognized options are<br>"},{"sha":"07825e60ccdd18519150ffe00a3450ebd1759984","filename":"openjpa-examples/openbooks/src/main/resources/META-INF/persistence.xml","status":"modified","additions":7,"deletions":1,"changes":8,"blob_url":"https://github.com/apache/openjpa/blob/a7cadff1fa66fcf640e3f7afd934f7b02a630c54/openjpa-examples/openbooks/src/main/resources/META-INF/persistence.xml","raw_url":"https://github.com/apache/openjpa/raw/a7cadff1fa66fcf640e3f7afd934f7b02a630c54/openjpa-examples/openbooks/src/main/resources/META-INF/persistence.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-examples/openbooks/src/main/resources/META-INF/persistence.xml?ref=a7cadff1fa66fcf640e3f7afd934f7b02a630c54","patch":"@@ -31,11 +31,17 @@\n     \t<class>openbook.domain.Author</class>\n     \t\n     \t<properties>\n+\t    <!-- Use these for MySQL\n     \t\t<property name=\"javax.persistence.jdbc.driver\"   value=\"com.mysql.jdbc.Driver\"/>\n     \t\t<property name=\"javax.persistence.jdbc.url\"      value=\"jdbc:mysql://localhost/OpenBooks\"/>\n     \t\t<property name=\"javax.persistence.jdbc.user\"     value=\"scott\"/>\n     \t\t<property name=\"javax.persistence.jdbc.password\" value=\"tiger\"/>\n-    \t\t\n+\t    -->\n+            <property name=\"javax.persistence.jdbc.driver\"   value=\"org.apache.derby.jdbc.EmbeddedDriver\"/>\n+            <property name=\"javax.persistence.jdbc.url\"      value=\"jdbc:derby:memory:OpenBooks;create=true\"/>\n+            <property name=\"javax.persistence.jdbc.user\"     value=\"\"/>\n+            <property name=\"javax.persistence.jdbc.password\" value=\"\"/>\n+\n \n             <property name=\"openjpa.DataCache\"                value=\"true\"/> \t\t\n             <property name=\"openjpa.RemoteCommitProvider\"     value=\"sjvm\"/>"}]}

