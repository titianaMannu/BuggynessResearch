{"sha":"a91f6d553e59d2c8a0f2c0b7ca4e4cedec33e9f6","node_id":"MDY6Q29tbWl0MjA2MzY0OmE5MWY2ZDU1M2U1OWQyYzhhMGYyYzBiN2NhNGU0Y2VkZWMzM2U5ZjY=","commit":{"author":{"name":"Richard G. Curtis","email":"curtisr7@apache.org","date":"2010-01-18T19:29:33Z"},"committer":{"name":"Richard G. Curtis","email":"curtisr7@apache.org","date":"2010-01-18T19:29:33Z"},"message":"OPENJPA-1467: Revert ConcurrentDataCache.removeAllInternal(...) to prior revision (5529850).\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@900521 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"da59424e728f25b3c814d82009d4620b1ebe13d2","url":"https://api.github.com/repos/apache/openjpa/git/trees/da59424e728f25b3c814d82009d4620b1ebe13d2"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/a91f6d553e59d2c8a0f2c0b7ca4e4cedec33e9f6","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/a91f6d553e59d2c8a0f2c0b7ca4e4cedec33e9f6","html_url":"https://github.com/apache/openjpa/commit/a91f6d553e59d2c8a0f2c0b7ca4e4cedec33e9f6","comments_url":"https://api.github.com/repos/apache/openjpa/commits/a91f6d553e59d2c8a0f2c0b7ca4e4cedec33e9f6/comments","author":null,"committer":null,"parents":[{"sha":"d62991acc3acf44954744d6a2508884b2d6f02ff","url":"https://api.github.com/repos/apache/openjpa/commits/d62991acc3acf44954744d6a2508884b2d6f02ff","html_url":"https://github.com/apache/openjpa/commit/d62991acc3acf44954744d6a2508884b2d6f02ff"}],"stats":{"total":12,"additions":1,"deletions":11},"files":[{"sha":"fe2137f904e25285809f2f5b36b3ca6407c9f078","filename":"openjpa-kernel/src/main/java/org/apache/openjpa/datacache/ConcurrentDataCache.java","status":"modified","additions":1,"deletions":11,"changes":12,"blob_url":"https://github.com/apache/openjpa/blob/a91f6d553e59d2c8a0f2c0b7ca4e4cedec33e9f6/openjpa-kernel/src/main/java/org/apache/openjpa/datacache/ConcurrentDataCache.java","raw_url":"https://github.com/apache/openjpa/raw/a91f6d553e59d2c8a0f2c0b7ca4e4cedec33e9f6/openjpa-kernel/src/main/java/org/apache/openjpa/datacache/ConcurrentDataCache.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/java/org/apache/openjpa/datacache/ConcurrentDataCache.java?ref=a91f6d553e59d2c8a0f2c0b7ca4e4cedec33e9f6","patch":"@@ -138,17 +138,7 @@ protected void removeAllInternal(Class<?> cls, boolean subs) {\n         // unlikely that this method will be called in a performance intensive\n         // environment. In any event applications can revert to the old behavior\n         // by simply calling removeAll().\n-        CacheMap orig = _cache;\n-        _cache = newCacheMap(); \n-        for (Object o : orig.values()) {\n-            Class<?> curClass = ((DataCachePCData) o).getType();\n-            if (subs) {\n-                if (cls == curClass || (cls != null && cls.isAssignableFrom(curClass))) {\n-                    orig.remove(((DataCachePCData) o).getId());\n-                }\n-            }\n-        }\n-        _cache.putAll(orig, false);\n+        _cache.clear();\n     }\n \n     protected void clearInternal() {"}]}

