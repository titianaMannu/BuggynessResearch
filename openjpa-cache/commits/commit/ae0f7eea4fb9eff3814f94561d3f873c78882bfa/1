{"sha":"ae0f7eea4fb9eff3814f94561d3f873c78882bfa","node_id":"MDY6Q29tbWl0MjA2MzY0OmFlMGY3ZWVhNGZiOWVmZjM4MTRmOTQ1NjFkM2Y4NzNjNzg4ODJiZmE=","commit":{"author":{"name":"Patrick Linskey","email":"pcl@apache.org","date":"2008-01-31T00:13:31Z"},"committer":{"name":"Patrick Linskey","email":"pcl@apache.org","date":"2008-01-31T00:13:31Z"},"message":"OPENJPA-331. Ported to 1.0.x: svn merge -c 604621 ../../trunk; svn merge -c 607478 ../../trunk\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/branches/1.0.x@616965 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"8a0d5b6a65c3f7b4ed5dfe1b7b6534ad9e2ff5e8","url":"https://api.github.com/repos/apache/openjpa/git/trees/8a0d5b6a65c3f7b4ed5dfe1b7b6534ad9e2ff5e8"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/ae0f7eea4fb9eff3814f94561d3f873c78882bfa","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/ae0f7eea4fb9eff3814f94561d3f873c78882bfa","html_url":"https://github.com/apache/openjpa/commit/ae0f7eea4fb9eff3814f94561d3f873c78882bfa","comments_url":"https://api.github.com/repos/apache/openjpa/commits/ae0f7eea4fb9eff3814f94561d3f873c78882bfa/comments","author":null,"committer":null,"parents":[{"sha":"71470998d2cfe1d4957a01d9a9a75d5968a5a47f","url":"https://api.github.com/repos/apache/openjpa/commits/71470998d2cfe1d4957a01d9a9a75d5968a5a47f","html_url":"https://github.com/apache/openjpa/commit/71470998d2cfe1d4957a01d9a9a75d5968a5a47f"}],"stats":{"total":435,"additions":432,"deletions":3},"files":[{"sha":"40dae8b91e0282c9a88ade6cf0899f430e7b6775","filename":"openjpa-kernel/src/main/java/org/apache/openjpa/enhance/PCEnhancer.java","status":"modified","additions":14,"deletions":1,"changes":15,"blob_url":"https://github.com/apache/openjpa/blob/ae0f7eea4fb9eff3814f94561d3f873c78882bfa/openjpa-kernel/src/main/java/org/apache/openjpa/enhance/PCEnhancer.java","raw_url":"https://github.com/apache/openjpa/raw/ae0f7eea4fb9eff3814f94561d3f873c78882bfa/openjpa-kernel/src/main/java/org/apache/openjpa/enhance/PCEnhancer.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/java/org/apache/openjpa/enhance/PCEnhancer.java?ref=ae0f7eea4fb9eff3814f94561d3f873c78882bfa","patch":"@@ -47,7 +47,6 @@\n import org.apache.commons.lang.StringUtils;\n import org.apache.openjpa.conf.OpenJPAConfiguration;\n import org.apache.openjpa.conf.OpenJPAConfigurationImpl;\n-import org.apache.openjpa.lib.conf.Configuration;\n import org.apache.openjpa.lib.conf.Configurations;\n import org.apache.openjpa.lib.log.Log;\n import org.apache.openjpa.lib.meta.ClassArgParser;\n@@ -65,6 +64,8 @@\n import org.apache.openjpa.meta.ValueStrategies;\n import org.apache.openjpa.util.GeneralException;\n import org.apache.openjpa.util.InternalException;\n+import org.apache.openjpa.util.BigDecimalId;\n+import org.apache.openjpa.util.BigIntegerId;\n import org.apache.openjpa.util.ByteId;\n import org.apache.openjpa.util.CharId;\n import org.apache.openjpa.util.DateId;\n@@ -2071,6 +2072,18 @@ private void addExtractObjectIdFieldValueCode(Code code, FieldMetaData pk) {\n                     code.invokevirtual().setMethod(StringId.class, \"getId\",\n                         String.class, null);\n                     break;\n+                case JavaTypes.BIGDECIMAL:\n+                    code.aload().setLocal(oid);\n+                    code.checkcast().setType(BigDecimalId.class);\n+                    code.invokevirtual().setMethod(BigDecimalId.class, \"getId\",\n+                        BigDecimalId.class, null);\n+                    break;\n+                case JavaTypes.BIGINTEGER:\n+                    code.aload().setLocal(oid);\n+                    code.checkcast().setType(BigIntegerId.class);\n+                    code.invokevirtual().setMethod(BigIntegerId.class, \"getId\",\n+                        BigIntegerId.class, null);\n+                    break;\n                 default:\n                     code.aload().setLocal(oid);\n                     code.checkcast().setType(ObjectId.class);"},{"sha":"b746af8c07a892408d68d0e758543f38bc197301","filename":"openjpa-kernel/src/main/java/org/apache/openjpa/meta/ClassMetaData.java","status":"modified","additions":8,"deletions":0,"changes":8,"blob_url":"https://github.com/apache/openjpa/blob/ae0f7eea4fb9eff3814f94561d3f873c78882bfa/openjpa-kernel/src/main/java/org/apache/openjpa/meta/ClassMetaData.java","raw_url":"https://github.com/apache/openjpa/raw/ae0f7eea4fb9eff3814f94561d3f873c78882bfa/openjpa-kernel/src/main/java/org/apache/openjpa/meta/ClassMetaData.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/java/org/apache/openjpa/meta/ClassMetaData.java?ref=ae0f7eea4fb9eff3814f94561d3f873c78882bfa","patch":"@@ -46,6 +46,8 @@\n import org.apache.openjpa.lib.util.J2DoPrivHelper;\n import org.apache.openjpa.lib.util.Localizer;\n import org.apache.openjpa.lib.xml.Commentable;\n+import org.apache.openjpa.util.BigDecimalId;\n+import org.apache.openjpa.util.BigIntegerId;\n import org.apache.openjpa.util.ByteId;\n import org.apache.openjpa.util.CharId;\n import org.apache.openjpa.util.DateId;\n@@ -482,6 +484,12 @@ public Class getObjectIdType() {\n             case JavaTypes.OBJECT:\n                 _objectId = ObjectId.class;\n                 break;\n+            case JavaTypes.BIGDECIMAL:\n+                _objectId = BigDecimalId.class;\n+                break;\n+            case JavaTypes.BIGINTEGER:\n+                _objectId = BigIntegerId.class;\n+                break;\n         }\n         return _objectId;\n     }"},{"sha":"b0314014da74381016d3fc66f4a80e804f8cd113","filename":"openjpa-kernel/src/main/java/org/apache/openjpa/util/ApplicationIds.java","status":"modified","additions":16,"deletions":0,"changes":16,"blob_url":"https://github.com/apache/openjpa/blob/ae0f7eea4fb9eff3814f94561d3f873c78882bfa/openjpa-kernel/src/main/java/org/apache/openjpa/util/ApplicationIds.java","raw_url":"https://github.com/apache/openjpa/raw/ae0f7eea4fb9eff3814f94561d3f873c78882bfa/openjpa-kernel/src/main/java/org/apache/openjpa/util/ApplicationIds.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/java/org/apache/openjpa/util/ApplicationIds.java?ref=ae0f7eea4fb9eff3814f94561d3f873c78882bfa","patch":"@@ -20,6 +20,8 @@\n \n import java.lang.reflect.Field;\n import java.lang.reflect.Modifier;\n+import java.math.BigDecimal;\n+import java.math.BigInteger;\n import java.security.AccessController;\n import java.security.PrivilegedActionException;\n import java.util.Date;\n@@ -170,6 +172,14 @@ public static Object fromPKValues(Object[] pks, ClassMetaData meta) {\n                 case JavaTypes.OID:\n                 case JavaTypes.OBJECT:\n                     return new ObjectId(meta.getDescribedType(), val);\n+                case JavaTypes.BIGDECIMAL:\n+                    if (!convert && !(val instanceof BigDecimal))\n+                        throw new ClassCastException(\"!(x instanceof BigDecimal)\");\n+                    return new BigDecimalId(meta.getDescribedType(), (BigDecimal)val);\n+                case JavaTypes.BIGINTEGER:\n+                    if (!convert && !(val instanceof BigInteger))\n+                        throw new ClassCastException(\"!(x instanceof BigInteger)\");\n+                    return new BigIntegerId(meta.getDescribedType(), (BigInteger)val);\n                 default:\n                     throw new InternalException();\n             }\n@@ -275,6 +285,12 @@ public static Object copy(Object oid, ClassMetaData meta) {\n                 case JavaTypes.DATE:\n                     return new DateId(cls, ((DateId) oid).getId(),\n                         koid.hasSubclasses());\n+                case JavaTypes.BIGDECIMAL:\n+                    return new BigDecimalId(cls, ((BigDecimalId) oid).getId(),\n+                        koid.hasSubclasses());\n+                case JavaTypes.BIGINTEGER:\n+                    return new BigIntegerId(cls, ((BigIntegerId) oid).getId(),\n+                        koid.hasSubclasses());\n                 default:\n                     throw new InternalException();\n             }"},{"sha":"529b9f0d84b79fefc7ddb0394f741fa15e81a4a7","filename":"openjpa-kernel/src/main/java/org/apache/openjpa/util/BigDecimalId.java","status":"added","additions":74,"deletions":0,"changes":74,"blob_url":"https://github.com/apache/openjpa/blob/ae0f7eea4fb9eff3814f94561d3f873c78882bfa/openjpa-kernel/src/main/java/org/apache/openjpa/util/BigDecimalId.java","raw_url":"https://github.com/apache/openjpa/raw/ae0f7eea4fb9eff3814f94561d3f873c78882bfa/openjpa-kernel/src/main/java/org/apache/openjpa/util/BigDecimalId.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/java/org/apache/openjpa/util/BigDecimalId.java?ref=ae0f7eea4fb9eff3814f94561d3f873c78882bfa","patch":"@@ -0,0 +1,74 @@\n+/*\r\n+ * Licensed to the Apache Software Foundation (ASF) under one\r\n+ * or more contributor license agreements.  See the NOTICE file\r\n+ * distributed with this work for additional information\r\n+ * regarding copyright ownership.  The ASF licenses this file\r\n+ * to you under the Apache License, Version 2.0 (the\r\n+ * \"License\"); you may not use this file except in compliance\r\n+ * with the License.  You may obtain a copy of the License at\r\n+ *\r\n+ * http://www.apache.org/licenses/LICENSE-2.0\r\n+ *\r\n+ * Unless required by applicable law or agreed to in writing,\r\n+ * software distributed under the License is distributed on an\r\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n+ * KIND, either express or implied.  See the License for the\r\n+ * specific language governing permissions and limitations\r\n+ * under the License.    \r\n+ */\r\n+package org.apache.openjpa.util;\r\n+\r\n+import java.math.BigDecimal;\r\n+\r\n+/**\r\n+ * @author <a href=\"mailto:mnachev@gmail.com\">Miroslav Nachev</a>\r\n+ * @since 1.1.0\r\n+ */\r\n+public class BigDecimalId\r\n+    extends OpenJPAId {\r\n+\r\n+    private final BigDecimal key;\r\n+\r\n+    public BigDecimalId(Class cls, String key) {\r\n+        this(cls, (key == null) ? null : new BigDecimal(key));\r\n+    }\r\n+\r\n+    public BigDecimalId(Class cls, BigDecimal key) {\r\n+        super(cls);\r\n+        this.key = key;\r\n+    }\r\n+\r\n+    public BigDecimalId(Class cls, BigDecimal key, boolean subs) {\r\n+        super(cls, subs);\r\n+        this.key = key;\r\n+    }\r\n+\r\n+    public BigDecimal getId() {\r\n+        return key;\r\n+    }\r\n+\r\n+    public Object getIdObject() {\r\n+        return key;\r\n+    }\r\n+\r\n+    public String toString() {\r\n+        if (key == null)\r\n+            return \"NULL\";\r\n+\r\n+        return key.toString();\r\n+    }\r\n+\r\n+    protected int idHash() {\r\n+        if (key != null)\r\n+            return key.hashCode();\r\n+\r\n+        return 0;\r\n+    }\r\n+\r\n+    protected boolean idEquals(OpenJPAId other) {\r\n+        if(key == null)\r\n+            return false;\r\n+\r\n+        return key.equals(other);\r\n+    }\r\n+}\r"},{"sha":"95e9053a0ad3468683cb3ff778fc9f13454b797f","filename":"openjpa-kernel/src/main/java/org/apache/openjpa/util/BigIntegerId.java","status":"added","additions":75,"deletions":0,"changes":75,"blob_url":"https://github.com/apache/openjpa/blob/ae0f7eea4fb9eff3814f94561d3f873c78882bfa/openjpa-kernel/src/main/java/org/apache/openjpa/util/BigIntegerId.java","raw_url":"https://github.com/apache/openjpa/raw/ae0f7eea4fb9eff3814f94561d3f873c78882bfa/openjpa-kernel/src/main/java/org/apache/openjpa/util/BigIntegerId.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/java/org/apache/openjpa/util/BigIntegerId.java?ref=ae0f7eea4fb9eff3814f94561d3f873c78882bfa","patch":"@@ -0,0 +1,75 @@\n+/*\r\n+ * Licensed to the Apache Software Foundation (ASF) under one\r\n+ * or more contributor license agreements.  See the NOTICE file\r\n+ * distributed with this work for additional information\r\n+ * regarding copyright ownership.  The ASF licenses this file\r\n+ * to you under the Apache License, Version 2.0 (the\r\n+ * \"License\"); you may not use this file except in compliance\r\n+ * with the License.  You may obtain a copy of the License at\r\n+ *\r\n+ * http://www.apache.org/licenses/LICENSE-2.0\r\n+ *\r\n+ * Unless required by applicable law or agreed to in writing,\r\n+ * software distributed under the License is distributed on an\r\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n+ * KIND, either express or implied.  See the License for the\r\n+ * specific language governing permissions and limitations\r\n+ * under the License.    \r\n+ */\r\n+package org.apache.openjpa.util;\r\n+\r\n+import java.math.BigInteger;\r\n+\r\n+/**\r\n+ * @author <a href=\"mailto:mnachev@gmail.com\">Miroslav Nachev</a>\r\n+ * @since 1.1.0\r\n+ */\r\n+public class BigIntegerId\r\n+    extends OpenJPAId {\r\n+\r\n+    private final BigInteger key;\r\n+\r\n+    public BigIntegerId(Class cls, String key) {\r\n+        this(cls, (key == null) ? null : new BigInteger(key));\r\n+    }\r\n+\r\n+    public BigIntegerId(Class cls, BigInteger key) {\r\n+        super(cls);\r\n+        this.key = key;\r\n+    }\r\n+\r\n+    public BigIntegerId(Class cls, BigInteger key, boolean subs) {\r\n+        super(cls, subs);\r\n+        this.key = key;\r\n+    }\r\n+\r\n+    public BigInteger getId() {\r\n+        return key;\r\n+    }\r\n+\r\n+    public Object getIdObject() {\r\n+        return key;\r\n+    }\r\n+\r\n+    public String toString() {\r\n+        if (key == null)\r\n+            return \"NULL\";\r\n+\r\n+        return key.toString();\r\n+    }\r\n+\r\n+    protected int idHash() {\r\n+        if (key != null)\r\n+            return key.hashCode();\r\n+\r\n+        return 0;\r\n+    }\r\n+\r\n+    protected boolean idEquals(OpenJPAId other) {\r\n+        if (key == null)\r\n+            return false;\r\n+\r\n+        return key.equals(other);\r\n+    }\r\n+\r\n+}\r"},{"sha":"50bf3b6716440dc5cfac5b1221ed805e371e2b30","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/identity/SQLBigDecimalIdEntity.java","status":"added","additions":50,"deletions":0,"changes":50,"blob_url":"https://github.com/apache/openjpa/blob/ae0f7eea4fb9eff3814f94561d3f873c78882bfa/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/identity/SQLBigDecimalIdEntity.java","raw_url":"https://github.com/apache/openjpa/raw/ae0f7eea4fb9eff3814f94561d3f873c78882bfa/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/identity/SQLBigDecimalIdEntity.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/identity/SQLBigDecimalIdEntity.java?ref=ae0f7eea4fb9eff3814f94561d3f873c78882bfa","patch":"@@ -0,0 +1,50 @@\n+/*\r\n+ * Licensed to the Apache Software Foundation (ASF) under one\r\n+ * or more contributor license agreements.  See the NOTICE file\r\n+ * distributed with this work for additional information\r\n+ * regarding copyright ownership.  The ASF licenses this file\r\n+ * to you under the Apache License, Version 2.0 (the\r\n+ * \"License\"); you may not use this file except in compliance\r\n+ * with the License.  You may obtain a copy of the License at\r\n+ *\r\n+ * http://www.apache.org/licenses/LICENSE-2.0\r\n+ *\r\n+ * Unless required by applicable law or agreed to in writing,\r\n+ * software distributed under the License is distributed on an\r\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n+ * KIND, either express or implied.  See the License for the\r\n+ * specific language governing permissions and limitations\r\n+ * under the License.    \r\n+ */\r\n+package org.apache.openjpa.persistence.identity;\r\n+\r\n+import java.math.BigDecimal;\r\n+import javax.persistence.Entity;\r\n+import javax.persistence.Id;\r\n+\r\n+/**\r\n+ * @author <a href=\"mailto:mnachev@gmail.com\">Miroslav Nachev</a>\r\n+ */\r\n+@Entity\r\n+public class SQLBigDecimalIdEntity {\r\n+\r\n+    @Id\r\n+    private BigDecimal id;\r\n+    private int data;\r\n+\r\n+    public BigDecimal getId() {\r\n+        return id;\r\n+    }\r\n+\r\n+    public void setId(BigDecimal id) {\r\n+        this.id = id;\r\n+    }\r\n+\r\n+    public int getData() {\r\n+        return data;\r\n+    }\r\n+\r\n+    public void setData(int data) {\r\n+        this.data = data;\r\n+    }\r\n+}\r"},{"sha":"2f107fbcc1d723da58cffdc42695da43d12ca866","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/identity/SQLBigIntegerIdEntity.java","status":"added","additions":50,"deletions":0,"changes":50,"blob_url":"https://github.com/apache/openjpa/blob/ae0f7eea4fb9eff3814f94561d3f873c78882bfa/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/identity/SQLBigIntegerIdEntity.java","raw_url":"https://github.com/apache/openjpa/raw/ae0f7eea4fb9eff3814f94561d3f873c78882bfa/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/identity/SQLBigIntegerIdEntity.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/identity/SQLBigIntegerIdEntity.java?ref=ae0f7eea4fb9eff3814f94561d3f873c78882bfa","patch":"@@ -0,0 +1,50 @@\n+/*\r\n+ * Licensed to the Apache Software Foundation (ASF) under one\r\n+ * or more contributor license agreements.  See the NOTICE file\r\n+ * distributed with this work for additional information\r\n+ * regarding copyright ownership.  The ASF licenses this file\r\n+ * to you under the Apache License, Version 2.0 (the\r\n+ * \"License\"); you may not use this file except in compliance\r\n+ * with the License.  You may obtain a copy of the License at\r\n+ *\r\n+ * http://www.apache.org/licenses/LICENSE-2.0\r\n+ *\r\n+ * Unless required by applicable law or agreed to in writing,\r\n+ * software distributed under the License is distributed on an\r\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n+ * KIND, either express or implied.  See the License for the\r\n+ * specific language governing permissions and limitations\r\n+ * under the License.    \r\n+ */\r\n+package org.apache.openjpa.persistence.identity;\r\n+\r\n+import java.math.BigInteger;\r\n+import javax.persistence.Entity;\r\n+import javax.persistence.Id;\r\n+\r\n+/**\r\n+ * @author <a href=\"mailto:mnachev@gmail.com\">Miroslav Nachev</a>\r\n+ */\r\n+@Entity\r\n+public class SQLBigIntegerIdEntity {\r\n+\r\n+    @Id\r\n+    private BigInteger id;\r\n+    private int data;\r\n+\r\n+    public BigInteger getId() {\r\n+        return id;\r\n+    }\r\n+\r\n+    public void setId(BigInteger id) {\r\n+        this.id = id;\r\n+    }\r\n+\r\n+    public int getData() {\r\n+        return data;\r\n+    }\r\n+\r\n+    public void setData(int data) {\r\n+        this.data = data;\r\n+    }\r\n+}\r"},{"sha":"ab378a7eb454a5e62e813e4ced237f6b3fa4bb10","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/identity/TestSQLBigDecimalId.java","status":"added","additions":61,"deletions":0,"changes":61,"blob_url":"https://github.com/apache/openjpa/blob/ae0f7eea4fb9eff3814f94561d3f873c78882bfa/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/identity/TestSQLBigDecimalId.java","raw_url":"https://github.com/apache/openjpa/raw/ae0f7eea4fb9eff3814f94561d3f873c78882bfa/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/identity/TestSQLBigDecimalId.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/identity/TestSQLBigDecimalId.java?ref=ae0f7eea4fb9eff3814f94561d3f873c78882bfa","patch":"@@ -0,0 +1,61 @@\n+/*\r\n+ * Licensed to the Apache Software Foundation (ASF) under one\r\n+ * or more contributor license agreements.  See the NOTICE file\r\n+ * distributed with this work for additional information\r\n+ * regarding copyright ownership.  The ASF licenses this file\r\n+ * to you under the Apache License, Version 2.0 (the\r\n+ * \"License\"); you may not use this file except in compliance\r\n+ * with the License.  You may obtain a copy of the License at\r\n+ *\r\n+ * http://www.apache.org/licenses/LICENSE-2.0\r\n+ *\r\n+ * Unless required by applicable law or agreed to in writing,\r\n+ * software distributed under the License is distributed on an\r\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n+ * KIND, either express or implied.  See the License for the\r\n+ * specific language governing permissions and limitations\r\n+ * under the License.    \r\n+ */\r\n+package org.apache.openjpa.persistence.identity;\r\n+\r\n+import java.math.BigDecimal;\r\n+import javax.persistence.EntityManager;\r\n+\r\n+import junit.textui.TestRunner;\r\n+import org.apache.openjpa.persistence.test.SingleEMFTestCase;\r\n+\r\n+/**\r\n+ * @author <a href=\"mailto:mnachev@gmail.com\">Miroslav Nachev</a>\r\n+ */\r\n+public class TestSQLBigDecimalId\r\n+    extends SingleEMFTestCase {\r\n+\r\n+    public void setUp() {\r\n+        setUp(SQLBigDecimalIdEntity.class, CLEAR_TABLES);\r\n+    }\r\n+\r\n+    public void testPersist() {\r\n+        long time = ((long) (System.currentTimeMillis() / 1000)) * 1000;\r\n+        BigDecimal decimal = new BigDecimal(time);\r\n+\r\n+        SQLBigDecimalIdEntity e = new SQLBigDecimalIdEntity();\r\n+        e.setId(decimal);\r\n+        e.setData(1);\r\n+\r\n+        EntityManager em = emf.createEntityManager();\r\n+        em.getTransaction().begin();\r\n+        em.persist(e);\r\n+        em.getTransaction().commit();\r\n+        assertEquals(time, e.getId().longValue());\r\n+        em.close();\r\n+\r\n+        em = emf.createEntityManager();\r\n+        e = em.find(SQLBigDecimalIdEntity.class, decimal);\r\n+        assertEquals(1, e.getData());\r\n+        em.close();\r\n+    }\r\n+\r\n+    public static void main(String[] args) {\r\n+        TestRunner.run(SQLBigDecimalIdEntity.class);\r\n+    }\r\n+}\r"},{"sha":"5d62bf1e8e6b27a7ef74ce0bc5f0727a199cb62b","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/identity/TestSQLBigIntegerId.java","status":"added","additions":62,"deletions":0,"changes":62,"blob_url":"https://github.com/apache/openjpa/blob/ae0f7eea4fb9eff3814f94561d3f873c78882bfa/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/identity/TestSQLBigIntegerId.java","raw_url":"https://github.com/apache/openjpa/raw/ae0f7eea4fb9eff3814f94561d3f873c78882bfa/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/identity/TestSQLBigIntegerId.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/identity/TestSQLBigIntegerId.java?ref=ae0f7eea4fb9eff3814f94561d3f873c78882bfa","patch":"@@ -0,0 +1,62 @@\n+/*\r\n+ * Licensed to the Apache Software Foundation (ASF) under one\r\n+ * or more contributor license agreements.  See the NOTICE file\r\n+ * distributed with this work for additional information\r\n+ * regarding copyright ownership.  The ASF licenses this file\r\n+ * to you under the Apache License, Version 2.0 (the\r\n+ * \"License\"); you may not use this file except in compliance\r\n+ * with the License.  You may obtain a copy of the License at\r\n+ *\r\n+ * http://www.apache.org/licenses/LICENSE-2.0\r\n+ *\r\n+ * Unless required by applicable law or agreed to in writing,\r\n+ * software distributed under the License is distributed on an\r\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n+ * KIND, either express or implied.  See the License for the\r\n+ * specific language governing permissions and limitations\r\n+ * under the License.    \r\n+ */\r\n+package org.apache.openjpa.persistence.identity;\r\n+\r\n+import java.math.BigDecimal;\r\n+import java.math.BigInteger;\r\n+import javax.persistence.EntityManager;\r\n+\r\n+import junit.textui.TestRunner;\r\n+import org.apache.openjpa.persistence.test.SingleEMFTestCase;\r\n+\r\n+/**\r\n+ * @author <a href=\"mailto:mnachev@gmail.com\">Miroslav Nachev</a>\r\n+ */\r\n+public class TestSQLBigIntegerId\r\n+    extends SingleEMFTestCase {\r\n+\r\n+    public void setUp() {\r\n+        setUp(SQLBigIntegerIdEntity.class, CLEAR_TABLES);\r\n+    }\r\n+\r\n+    public void testPersist() {\r\n+        long time = ((long) (System.currentTimeMillis() / 1000)) * 1000;\r\n+        BigInteger integer = new BigDecimal(time).toBigInteger();\r\n+\r\n+        SQLBigIntegerIdEntity e = new SQLBigIntegerIdEntity();\r\n+        e.setId(integer);\r\n+        e.setData(1);\r\n+\r\n+        EntityManager em = emf.createEntityManager();\r\n+        em.getTransaction().begin();\r\n+        em.persist(e);\r\n+        em.getTransaction().commit();\r\n+        assertEquals(time, e.getId().longValue());\r\n+        em.close();\r\n+\r\n+        em = emf.createEntityManager();\r\n+        e = em.find(SQLBigIntegerIdEntity.class, integer);\r\n+        assertEquals(1, e.getData());\r\n+        em.close();\r\n+    }\r\n+\r\n+    public static void main(String[] args) {\r\n+        TestRunner.run(SQLBigIntegerIdEntity.class);\r\n+    }\r\n+}\r"},{"sha":"f03f2081791cd6413a92330ac6ef4b9c72728503","filename":"openjpa-persistence/src/main/java/org/apache/openjpa/persistence/JPAFacadeHelper.java","status":"modified","additions":14,"deletions":2,"changes":16,"blob_url":"https://github.com/apache/openjpa/blob/ae0f7eea4fb9eff3814f94561d3f873c78882bfa/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/JPAFacadeHelper.java","raw_url":"https://github.com/apache/openjpa/raw/ae0f7eea4fb9eff3814f94561d3f873c78882bfa/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/JPAFacadeHelper.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/JPAFacadeHelper.java?ref=ae0f7eea4fb9eff3814f94561d3f873c78882bfa","patch":"@@ -18,6 +18,8 @@\n  */\r\n package org.apache.openjpa.persistence;\r\n \r\n+import java.math.BigDecimal;\r\n+import java.math.BigInteger;\r\n import java.util.ArrayList;\r\n import java.util.Collection;\r\n import java.util.Iterator;\r\n@@ -27,6 +29,8 @@\n import org.apache.openjpa.kernel.Broker;\r\n import org.apache.openjpa.kernel.BrokerFactory;\r\n import org.apache.openjpa.meta.ClassMetaData;\r\n+import org.apache.openjpa.util.BigDecimalId;\r\n+import org.apache.openjpa.util.BigIntegerId;\r\n import org.apache.openjpa.util.ByteId;\r\n import org.apache.openjpa.util.CharId;\r\n import org.apache.openjpa.util.DoubleId;\r\n@@ -231,6 +235,10 @@ public static Object toOpenJPAObjectId(ClassMetaData meta, Object oid) {\n             return new ShortId(cls, (Short) oid);\r\n         if (oid instanceof String)\r\n             return new StringId(cls, (String) oid);\r\n+        if (oid instanceof BigDecimal)\r\n+            return new BigDecimalId(cls, (BigDecimal) oid);\r\n+        if (oid instanceof BigInteger)\r\n+            return new BigIntegerId(cls, (BigInteger) oid);\r\n         return new ObjectId(cls, oid);\r\n     }\r\n \r\n@@ -301,7 +309,11 @@ public static Class fromOpenJPAObjectIdClass(Class oidClass) {\n         if (oidClass == ShortId.class)\r\n             return Short.class;\r\n         if (oidClass == StringId.class)\r\n-\t\t\treturn String.class;\r\n-\t\treturn oidClass;\r\n+            return String.class;\r\n+        if (oidClass == BigDecimalId.class)\r\n+            return BigDecimal.class;\r\n+        if (oidClass == BigIntegerId.class)\r\n+            return BigInteger.class;\r\n+        return oidClass;\r\n \t}\r\n }\r"},{"sha":"76177a324a45e55070d04b9d06ee0d105f84fb98","filename":"openjpa-project/NOTICE.txt","status":"modified","additions":8,"deletions":0,"changes":8,"blob_url":"https://github.com/apache/openjpa/blob/ae0f7eea4fb9eff3814f94561d3f873c78882bfa/openjpa-project/NOTICE.txt","raw_url":"https://github.com/apache/openjpa/raw/ae0f7eea4fb9eff3814f94561d3f873c78882bfa/openjpa-project/NOTICE.txt","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-project/NOTICE.txt?ref=ae0f7eea4fb9eff3814f94561d3f873c78882bfa","patch":"@@ -16,4 +16,12 @@ COPYRIGHT NOTICES\n     Sun Microsystems and licensed under the CDDL 1.0. The source code is\r\n     available at: https://glassfish.dev.java.net/source/browse/glassfish/\r\n \r\n+* OpenJPA includes the following software copyright 2007 Miroslav Nachev\r\n+\r\n+openjpa-kernel/src/main/java/org/apache/openjpa/util/BigDecimalId.java\r\n+openjpa-kernel/src/main/java/org/apache/openjpa/util/BigIntegerId.java\r\n+openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/identity/SQLBigIntegerIdEntity.java\r\n+openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/identity/SQLBigDecimalIdEntity.java\r\n+openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/identity/TestSQLBigIntegerId.java\r\n+openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/identity/TestSQLBigDecimalId.java\r\n \r"}]}

