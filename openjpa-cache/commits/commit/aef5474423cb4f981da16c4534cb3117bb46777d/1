{"sha":"aef5474423cb4f981da16c4534cb3117bb46777d","node_id":"MDY6Q29tbWl0MjA2MzY0OmFlZjU0NzQ0MjNjYjRmOTgxZGExNmM0NTM0Y2IzMTE3YmI0Njc3N2Q=","commit":{"author":{"name":"Fay Wang","email":"faywang@apache.org","date":"2010-04-27T17:12:26Z"},"committer":{"name":"Fay Wang","email":"faywang@apache.org","date":"2010-04-27T17:12:26Z"},"message":"OPENJPA-1596: use unqualified name to check index name length\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@938571 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"294794055d7a525ea90e01f2841970392625b55f","url":"https://api.github.com/repos/apache/openjpa/git/trees/294794055d7a525ea90e01f2841970392625b55f"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/aef5474423cb4f981da16c4534cb3117bb46777d","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/aef5474423cb4f981da16c4534cb3117bb46777d","html_url":"https://github.com/apache/openjpa/commit/aef5474423cb4f981da16c4534cb3117bb46777d","comments_url":"https://api.github.com/repos/apache/openjpa/commits/aef5474423cb4f981da16c4534cb3117bb46777d/comments","author":null,"committer":null,"parents":[{"sha":"90355300bbec7ad38404dee8b25e3a4eb017e5aa","url":"https://api.github.com/repos/apache/openjpa/commits/90355300bbec7ad38404dee8b25e3a4eb017e5aa","html_url":"https://github.com/apache/openjpa/commit/90355300bbec7ad38404dee8b25e3a4eb017e5aa"}],"stats":{"total":7,"additions":6,"deletions":1},"files":[{"sha":"1bea4cd4cbe5d8cb6f94d38eed4168ca82687a15","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DBDictionary.java","status":"modified","additions":6,"deletions":1,"changes":7,"blob_url":"https://github.com/apache/openjpa/blob/aef5474423cb4f981da16c4534cb3117bb46777d/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DBDictionary.java","raw_url":"https://github.com/apache/openjpa/raw/aef5474423cb4f981da16c4534cb3117bb46777d/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DBDictionary.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DBDictionary.java?ref=aef5474423cb4f981da16c4534cb3117bb46777d","patch":"@@ -3408,8 +3408,13 @@ protected StringBuilder comment(StringBuilder buf, String comment) {\n         buf.append(\"CREATE \");\n         if (index.isUnique())\n             buf.append(\"UNIQUE \");\n-        String indexName = checkNameLength(toDBName(index.getIdentifier()), maxIndexNameLength, \n+        \n+        DBIdentifier fullIdxName = index.getIdentifier();\n+        DBIdentifier unQualifiedName = fullIdxName.getUnqualifiedName();\n+        checkNameLength(toDBName(unQualifiedName), maxIndexNameLength, \n                 \"long-index-name\");\n+        String indexName = toDBName(fullIdxName);\n+         \n         buf.append(\"INDEX \").append(indexName);\n         buf.append(\" ON \").append(getFullName(index.getTable(), false));\n         buf.append(\" (\").append(namingUtil.appendColumns(index.getColumns()))."}]}

