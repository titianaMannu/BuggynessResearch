{"sha":"b25dfe66f43a8229d34a2620407a91abbe9f9e63","node_id":"MDY6Q29tbWl0MjA2MzY0OmIyNWRmZTY2ZjQzYTgyMjlkMzRhMjYyMDQwN2E5MWFiYmU5ZjllNjM=","commit":{"author":{"name":"Marc Prud'hommeaux","email":"mprudhom@apache.org","date":"2006-10-06T18:03:50Z"},"committer":{"name":"Marc Prud'hommeaux","email":"mprudhom@apache.org","date":"2006-10-06T18:03:50Z"},"message":"Added supportsTimestampNanos to allow people to work around an ArrayIndexOutOfBoundsException that occurs when using multiple timestamp columns with version 9.2+ of the Oracle JDBC driver and version less than 9.2 of the Oracle server.\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/openjpa/trunk@453715 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"ecd014c9ac3d0863f536ea098663ce5c27ea5add","url":"https://api.github.com/repos/apache/openjpa/git/trees/ecd014c9ac3d0863f536ea098663ce5c27ea5add"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/b25dfe66f43a8229d34a2620407a91abbe9f9e63","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/b25dfe66f43a8229d34a2620407a91abbe9f9e63","html_url":"https://github.com/apache/openjpa/commit/b25dfe66f43a8229d34a2620407a91abbe9f9e63","comments_url":"https://api.github.com/repos/apache/openjpa/commits/b25dfe66f43a8229d34a2620407a91abbe9f9e63/comments","author":null,"committer":null,"parents":[{"sha":"27e8bd48497f9c6ee92e65cc9cf1a0f830ff362a","url":"https://api.github.com/repos/apache/openjpa/commits/27e8bd48497f9c6ee92e65cc9cf1a0f830ff362a","html_url":"https://github.com/apache/openjpa/commit/27e8bd48497f9c6ee92e65cc9cf1a0f830ff362a"}],"stats":{"total":7,"additions":6,"deletions":1},"files":[{"sha":"16a880d000d1b181eaa1ddb6be0461be51e7326c","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DBDictionary.java","status":"modified","additions":6,"deletions":1,"changes":7,"blob_url":"https://github.com/apache/openjpa/blob/b25dfe66f43a8229d34a2620407a91abbe9f9e63/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DBDictionary.java","raw_url":"https://github.com/apache/openjpa/raw/b25dfe66f43a8229d34a2620407a91abbe9f9e63/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DBDictionary.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DBDictionary.java?ref=b25dfe66f43a8229d34a2620407a91abbe9f9e63","patch":"@@ -153,6 +153,7 @@\n     public int maxIndexNameLength = 128;\n     public int maxIndexesPerTable = Integer.MAX_VALUE;\n     public boolean supportsForeignKeys = true;\n+    public boolean supportsTimestampNanos = true;\n     public boolean supportsUniqueConstraints = true;\n     public boolean supportsDeferredConstraints = true;\n     public boolean supportsRestrictDeleteAction = true;\n@@ -1040,7 +1041,11 @@ public void setTimestamp(PreparedStatement stmnt, int idx,\n             val.setTime(val.getTime() + 1000);\n             nanos = 0;\n         }\n-        val.setNanos(nanos);\n+\n+        if (supportsTimestampNanos)\n+            val.setNanos(nanos);\n+        else\n+            val.setNanos(0);\n \n         if (cal == null)\n             stmnt.setTimestamp(idx, val);"}]}

