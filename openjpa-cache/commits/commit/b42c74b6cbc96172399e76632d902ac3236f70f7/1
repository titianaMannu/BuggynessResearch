{"sha":"b42c74b6cbc96172399e76632d902ac3236f70f7","node_id":"MDY6Q29tbWl0MjA2MzY0OmI0MmM3NGI2Y2JjOTYxNzIzOTllNzY2MzJkOTAyYWMzMjM2ZjcwZjc=","commit":{"author":{"name":"Kevin W. Sutter","email":"kwsutter@apache.org","date":"2006-10-10T01:30:54Z"},"committer":{"name":"Kevin W. Sutter","email":"kwsutter@apache.org","date":"2006-10-10T01:30:54Z"},"message":"Getting rid of the \"-all\" suffix per OPENJPA-65 on the .zip and embedded .jar file.  Also, removed the modules\ndirectory and the embedded individual project (openjpa-*) jar files.\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/openjpa/trunk@454580 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"2a37bdee18c6b99bbc6b8f73a9eba10de535d3d6","url":"https://api.github.com/repos/apache/openjpa/git/trees/2a37bdee18c6b99bbc6b8f73a9eba10de535d3d6"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/b42c74b6cbc96172399e76632d902ac3236f70f7","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/b42c74b6cbc96172399e76632d902ac3236f70f7","html_url":"https://github.com/apache/openjpa/commit/b42c74b6cbc96172399e76632d902ac3236f70f7","comments_url":"https://api.github.com/repos/apache/openjpa/commits/b42c74b6cbc96172399e76632d902ac3236f70f7/comments","author":null,"committer":null,"parents":[{"sha":"0c58bedbb68e3162ead70627a94d0ff9c32758fb","url":"https://api.github.com/repos/apache/openjpa/commits/0c58bedbb68e3162ead70627a94d0ff9c32758fb","html_url":"https://github.com/apache/openjpa/commit/0c58bedbb68e3162ead70627a94d0ff9c32758fb"}],"stats":{"total":810,"additions":440,"deletions":370},"files":[{"sha":"931bad3218ded0bc7f64b66cf6b6d55a6a04c74e","filename":"openjpa-project/assembly.xml","status":"modified","additions":97,"deletions":117,"changes":214,"blob_url":"https://github.com/apache/openjpa/blob/b42c74b6cbc96172399e76632d902ac3236f70f7/openjpa-project/assembly.xml","raw_url":"https://github.com/apache/openjpa/raw/b42c74b6cbc96172399e76632d902ac3236f70f7/openjpa-project/assembly.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-project/assembly.xml?ref=b42c74b6cbc96172399e76632d902ac3236f70f7","patch":"@@ -1,117 +1,97 @@\n-<assembly>\n-    <id></id>\n-    <formats>\n-        <format>zip</format>\n-    </formats>\n-    <includeBaseDirectory>true</includeBaseDirectory>\n-    <fileSets>\n-        <fileSet>\n-            <includes>\n-                <include>README*</include>\n-                <include>LICENSE*</include>\n-                <include>NOTICE*</include>\n-            </includes>\n-        </fileSet>\n-        <!--\n-        <fileSet>\n-            <directory>licenses</directory>\n-            <outputDirectory>/lib</outputDirectory>\n-            <includes>\n-                <include>*</include>\n-            </includes>\n-        </fileSet>\n-        <fileSet>\n-            <directory>target/examples</directory>\n-            <outputDirectory>/examples</outputDirectory>\n-        </fileSet>\n-        -->\n-        <fileSet>\n-            <directory>target/manual</directory>\n-            <outputDirectory>docs/manual</outputDirectory>\n-        </fileSet>\n-        <fileSet>\n-            <directory>src/doc/manual/img</directory>\n-            <outputDirectory>docs/manual/img</outputDirectory>\n-        </fileSet>\n-        <fileSet>\n-            <directory>src/doc/manual/css</directory>\n-            <outputDirectory>docs/manual/css</outputDirectory>\n-        </fileSet>\n-        <fileSet>\n-            <directory>../target/site/apidocs</directory>\n-            <outputDirectory>docs/javadoc</outputDirectory>\n-        </fileSet>\n-    </fileSets>\n-    <dependencySets>\n-        <dependencySet>\n-            <outputDirectory>/lib</outputDirectory>\n-            <unpack>false</unpack>\n-            <scope>runtime</scope>\n-            <excludes>\n-                <!-- only used for the ant tasks, which will already have it -->\n-                <exclude>ant:ant</exclude>\n-                <exclude>ant:ant-xalan2</exclude>\n-                <exclude>ant:ant-trax</exclude>\n-                <exclude>bcel:bcel</exclude>\n-\n-                <!-- exclude empty distribution jars -->\n-                <exclude>openjpa:openjpa-project</exclude>\n-\n-                <!-- already included in JDK 1.5 -->\n-                <exclude>xerces:xerces</exclude>\n-                <exclude>xerces:xercesImpl</exclude>\n-                <exclude>xalan:xalan</exclude>\n-                <exclude>xml-apis:xml-apis</exclude>\n-                <exclude>xerces:xmlParserAPIs</exclude>\n-\n-                <!-- not required for release -->\n-                <exclude>hsqldb:hsqldb</exclude>\n-\n-                <!-- only required for persistence server -->\n-                <exclude>javax.servlet:servlet-api</exclude>\n-\n-                <!-- optional log implementation -->\n-                <exclude>log4j:log4j</exclude>\n-\n-                <!-- optional -->\n-                <exclude>junit:junit</exclude>\n-\n-                <!-- these are placed in the modules/ directory -->\n-                <exclude>org.apache.openjpa:openjpa-all</exclude>\n-                <exclude>org.apache.openjpa:openjpa-lib</exclude>\n-                <exclude>org.apache.openjpa:openjpa-kernel</exclude>\n-                <exclude>org.apache.openjpa:openjpa-kernel-4</exclude>\n-                <exclude>org.apache.openjpa:openjpa-kernel-5</exclude>\n-                <exclude>org.apache.openjpa:openjpa-jdbc</exclude>\n-                <exclude>org.apache.openjpa:openjpa-jdbc-5</exclude>\n-                <exclude>org.apache.openjpa:openjpa-persistence</exclude>\n-                <exclude>org.apache.openjpa:openjpa-persistence-jdbc</exclude>\n-                <exclude>org.apache.openjpa:openjpa-xmlstore</exclude>\n-            </excludes>\n-        </dependencySet>\n-\n-        <dependencySet>\n-            <outputDirectory>/modules</outputDirectory>\n-            <unpack>false</unpack>\n-            <includes>\n-                <include>org.apache.openjpa:openjpa-lib</include>\n-                <include>org.apache.openjpa:openjpa-kernel</include>\n-                <include>org.apache.openjpa:openjpa-kernel-4</include>\n-                <include>org.apache.openjpa:openjpa-kernel-5</include>\n-                <include>org.apache.openjpa:openjpa-jdbc</include>\n-                <include>org.apache.openjpa:openjpa-jdbc-5</include>\n-                <include>org.apache.openjpa:openjpa-persistence</include>\n-                <include>org.apache.openjpa:openjpa-persistence-jdbc</include>\n-                <include>org.apache.openjpa:openjpa-xmlstore</include>\n-            </includes>\n-        </dependencySet>\n-\n-        <dependencySet>\n-            <outputDirectory>/</outputDirectory>\n-            <unpack>false</unpack>\n-            <includes>\n-                <include>org.apache.openjpa:openjpa-all</include>\n-            </includes>\n-        </dependencySet>\n-    </dependencySets>\n-</assembly>\n+<assembly>\r\n+    <id></id>\r\n+    <formats>\r\n+        <format>zip</format>\r\n+    </formats>\r\n+    <includeBaseDirectory>true</includeBaseDirectory>\r\n+    <fileSets>\r\n+        <fileSet>\r\n+            <directory>target/aggregate</directory>\r\n+            <outputDirectory>/</outputDirectory>\r\n+        </fileSet>\r\n+        <fileSet>\r\n+            <includes>\r\n+                <include>README*</include>\r\n+                <include>LICENSE*</include>\r\n+                <include>NOTICE*</include>\r\n+            </includes>\r\n+        </fileSet>\r\n+        <!--\r\n+        <fileSet>\r\n+            <directory>licenses</directory>\r\n+            <outputDirectory>/lib</outputDirectory>\r\n+            <includes>\r\n+                <include>*</include>\r\n+            </includes>\r\n+        </fileSet>\r\n+        <fileSet>\r\n+            <directory>target/examples</directory>\r\n+            <outputDirectory>/examples</outputDirectory>\r\n+        </fileSet>\r\n+        -->\r\n+        <fileSet>\r\n+            <directory>target/manual</directory>\r\n+            <outputDirectory>docs/manual</outputDirectory>\r\n+        </fileSet>\r\n+        <fileSet>\r\n+            <directory>src/doc/manual/img</directory>\r\n+            <outputDirectory>docs/manual/img</outputDirectory>\r\n+        </fileSet>\r\n+        <fileSet>\r\n+            <directory>src/doc/manual/css</directory>\r\n+            <outputDirectory>docs/manual/css</outputDirectory>\r\n+        </fileSet>\r\n+        <fileSet>\r\n+            <directory>../target/site/apidocs</directory>\r\n+            <outputDirectory>docs/javadoc</outputDirectory>\r\n+        </fileSet>\r\n+    </fileSets>\r\n+    <dependencySets>\r\n+        <dependencySet>\r\n+            <outputDirectory>/lib</outputDirectory>\r\n+            <unpack>false</unpack>\r\n+            <scope>runtime</scope>\r\n+            <excludes>\r\n+                <!-- only used for the ant tasks, which will already have it -->\r\n+                <exclude>ant:ant</exclude>\r\n+                <exclude>ant:ant-xalan2</exclude>\r\n+                <exclude>ant:ant-trax</exclude>\r\n+                <exclude>bcel:bcel</exclude>\r\n+\r\n+                <!-- exclude empty distribution jars -->\r\n+                <exclude>openjpa:openjpa-project</exclude>\r\n+\r\n+                <!-- already included in JDK 1.5 -->\r\n+                <exclude>xerces:xerces</exclude>\r\n+                <exclude>xerces:xercesImpl</exclude>\r\n+                <exclude>xalan:xalan</exclude>\r\n+                <exclude>xml-apis:xml-apis</exclude>\r\n+                <exclude>xerces:xmlParserAPIs</exclude>\r\n+\r\n+                <!-- not required for release -->\r\n+                <exclude>hsqldb:hsqldb</exclude>\r\n+\r\n+                <!-- only required for persistence server -->\r\n+                <exclude>javax.servlet:servlet-api</exclude>\r\n+\r\n+                <!-- optional log implementation -->\r\n+                <exclude>log4j:log4j</exclude>\r\n+\r\n+                <!-- optional -->\r\n+                <exclude>junit:junit</exclude>\r\n+\r\n+                <!-- these are placed in the modules/ directory -->\r\n+                <exclude>org.apache.openjpa:openjpa-all</exclude>\r\n+                <exclude>org.apache.openjpa:openjpa-lib</exclude>\r\n+                <exclude>org.apache.openjpa:openjpa-kernel</exclude>\r\n+                <exclude>org.apache.openjpa:openjpa-kernel-4</exclude>\r\n+                <exclude>org.apache.openjpa:openjpa-kernel-5</exclude>\r\n+                <exclude>org.apache.openjpa:openjpa-jdbc</exclude>\r\n+                <exclude>org.apache.openjpa:openjpa-jdbc-5</exclude>\r\n+                <exclude>org.apache.openjpa:openjpa-persistence</exclude>\r\n+                <exclude>org.apache.openjpa:openjpa-persistence-jdbc</exclude>\r\n+                <exclude>org.apache.openjpa:openjpa-xmlstore</exclude>\r\n+            </excludes>\r\n+        </dependencySet>\r\n+    </dependencySets>\r\n+</assembly>\r"},{"sha":"522e5a2b2834d866e72512182924dee4c2a1105a","filename":"openjpa-project/pom.xml","status":"modified","additions":343,"deletions":253,"changes":596,"blob_url":"https://github.com/apache/openjpa/blob/b42c74b6cbc96172399e76632d902ac3236f70f7/openjpa-project/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/b42c74b6cbc96172399e76632d902ac3236f70f7/openjpa-project/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-project/pom.xml?ref=b42c74b6cbc96172399e76632d902ac3236f70f7","patch":"@@ -1,253 +1,343 @@\n-<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n-<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n-    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n-    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0\n-        http://maven.apache.org/maven-v4_0_0.xsd\">\n-    <!--\n-        To build the distribution files from project root:\n-\n-        mvn clean compile package -Dtest=false\n-    -->\n-    <modelVersion>4.0.0</modelVersion>\n-    <artifactId>openjpa-project</artifactId>\n-    <packaging>pom</packaging>\n-    <name>OpenJPA Distribution</name>\n-    <parent>\n-        <groupId>org.apache.openjpa</groupId>\n-        <artifactId>openjpa</artifactId>\n-        <version>0.9.5-incubating-SNAPSHOT</version>\n-    </parent>\n-    <build>\n-        <!-- needed to let maven pass the \"compile\" phase -->\n-        <testSourceDirectory>/none/</testSourceDirectory>\n-\n-        <!-- filter site resources -->\n-        <resources>\n-            <resource>\n-                <directory>${project.basedir}/src/site</directory>\n-                <!-- targetPath is relative to target/classes/ -->\n-                <targetPath>../filtered-site</targetPath>\n-                <filtering>false</filtering>\n-            </resource>\n-        </resources>\n-\n-        <plugins>\n-            <plugin>\n-                <artifactId>maven-assembly-plugin</artifactId>\n-                <executions>\n-                    <execution>\n-                        <id>bin</id>\n-                        <phase>package</phase>\n-                        <goals>\n-                            <goal>attached</goal>\n-                        </goals>\n-                        <configuration>\n-                            <descriptor>assembly.xml</descriptor>\n-                            <finalName>openjpa-${version}</finalName>\n-                            <outputDirectory>${project.basedir}/target/assembly</outputDirectory>\n-                            <workDirectory>target/work</workDirectory>\n-                        </configuration>\n-                    </execution>\n-                    <execution>\n-                        <id>sources</id>\n-                        <phase>package</phase>\n-                        <goals>\n-                            <goal>attached</goal>\n-                        </goals>\n-                        <configuration>\n-                            <descriptor>source-assembly.xml</descriptor>\n-                            <finalName>openjpa-${version}</finalName>\n-                            <outputDirectory>${project.basedir}/target/assembly</outputDirectory>\n-                            <workDirectory>target/work</workDirectory>\n-                        </configuration>\n-                    </execution>\n-                </executions>\n-            </plugin>\n-\n-            <!--\n-                Copy over site files from src/site to target/filtered-site\n-                so we can filter resources and include other generated\n-                content from the openjpa-project module.\n-            -->\n-            <plugin>\n-                <artifactId>maven-resources-plugin</artifactId>\n-                <executions>\n-                    <execution>\n-                        <id>prefilter-site</id>\n-                        <phase>site</phase>\n-                        <goals>\n-                            <goal>resources</goal>\n-                        </goals>\n-                    </execution>\n-                </executions>\n-            </plugin>\n-\n-            <plugin>\n-                <groupId>org.apache.maven.plugins</groupId>\n-                <artifactId>maven-site-plugin</artifactId>\n-                <version>2.0-beta-5</version>\n-                <configuration>\n-                    <siteDirectory>target/filtered-site</siteDirectory>\n-                </configuration>\n-            </plugin>\n-        </plugins>\n-    </build>\n-\n-    <profiles>\n-        <!-- \n-            Docbook profile. Docs can be built by running:\n-                mvn package -Dtest=false -Pjavadoc-profile,docbook-profile\n-        -->\n-        <profile>\n-            <id>docbook-profile</id>\n-            <build>\n-                <plugins>\n-                    <!-- build the docs when creating the site from docbook source -->\n-                    <plugin>\n-                        <artifactId>maven-antrun-plugin</artifactId>\n-                        <executions>\n-                            <execution>\n-                                <phase>package</phase>\n-                                <configuration>\n-                                 <!-- destdir=\"${project.build.directory}/site/manual\" -->\n-                                    <tasks>\n-                                    <echo>Building docbook manual</echo>\n-\n-                                    <!-- download stylesheets -->\n-                                    <property name=\"stylesheet\" value=\"1.69.1.tar.bz2\"/>\n-                                    <property name=\"stylesheet.dir\" value=\"${project.basedir}/target/stylesheets\"/>\n-\n-                                    <mkdir dir=\"${stylesheet.dir}\"/>\n-                                    <get src=\"http://docbook.sourceforge.net/release/xsl/${stylesheet}\" usetimestamp=\"true\" dest=\"${stylesheet.dir}/${stylesheet}\"/>\n-                                    <untar src=\"${stylesheet.dir}/${stylesheet}\" dest=\"${stylesheet.dir}\" compression=\"bzip2\" overwrite=\"false\"/>\n-\n-\n-                                    <style includes=\"**/manual.xml\"\n-                                        force=\"true\"\n-                                        basedir=\"${project.basedir}/src/doc/manual\"\n-                                        destdir=\"${project.basedir}/target/manual\"\n-                                        style=\"manual-xhtml.xsl\"\n-                                        classpathref=\"maven.runtime.classpath\">\n-                                        <factory name=\"org.apache.xalan.processor.TransformerFactoryImpl\">\n-                                            <attribute name=\"http://xml.apache.org/xalan/features/optimize\" value=\"true\"/>\n-                                        </factory>\n-                                    </style>\n-\n-                                    <!--\n-                                    <style includes=\"**/manual.xml\"\n-                                        force=\"true\"\n-                                        basedir=\"${project.basedir}/src/doc/manual\"\n-                                        destdir=\"${project.basedir}/target/manual\"\n-                                        style=\"manual-xhtml-chunk.xsl\"\n-                                        classpathref=\"maven.runtime.classpath\">\n-                                        <factory name=\"org.apache.xalan.processor.TransformerFactoryImpl\">\n-                                            <attribute name=\"http://xml.apache.org/xalan/features/optimize\" value=\"true\"/>\n-                                        </factory>\n-                                    </style>\n-                                    -->\n-                                    </tasks>\n-                                </configuration>\n-                                <goals>\n-                                    <goal>run</goal>\n-                                </goals>\n-                            </execution>\n-                        </executions>\n-                    </plugin>\n-                </plugins>\n-            </build>\n-            <activation>\n-                <property>\n-                    <name>builddocs</name>\n-                    <value>true</value>\n-                </property>\n-            </activation>\n-        </profile>\n-    </profiles>\n-\n-    <!-- need to explicitly list dependencies for assembly to work -->\n-    <dependencies>\n-        <dependency>\n-            <groupId>org.apache.openjpa</groupId>\n-            <artifactId>openjpa-all</artifactId>\n-            <version>${pom.version}</version>\n-        </dependency>\n-        <dependency>\n-            <groupId>org.apache.openjpa</groupId>\n-            <artifactId>openjpa-lib</artifactId>\n-            <version>${pom.version}</version>\n-        </dependency>\n-        <dependency>\n-            <groupId>org.apache.openjpa</groupId>\n-            <artifactId>openjpa-kernel</artifactId>\n-            <version>${pom.version}</version>\n-        </dependency>\n-        <dependency>\n-            <groupId>org.apache.openjpa</groupId>\n-            <artifactId>openjpa-kernel-4</artifactId>\n-            <version>${pom.version}</version>\n-        </dependency>\n-        <dependency>\n-            <groupId>org.apache.openjpa</groupId>\n-            <artifactId>openjpa-kernel-5</artifactId>\n-            <version>${pom.version}</version>\n-        </dependency>\n-        <dependency>\n-            <groupId>org.apache.openjpa</groupId>\n-            <artifactId>openjpa-jdbc</artifactId>\n-            <version>${pom.version}</version>\n-        </dependency>\n-        <dependency>\n-            <groupId>org.apache.openjpa</groupId>\n-            <artifactId>openjpa-jdbc-5</artifactId>\n-            <version>${pom.version}</version>\n-        </dependency>\n-        <dependency>\n-            <groupId>org.apache.openjpa</groupId>\n-            <artifactId>openjpa-persistence</artifactId>\n-            <version>${pom.version}</version>\n-        </dependency>\n-        <dependency>\n-            <groupId>org.apache.openjpa</groupId>\n-            <artifactId>openjpa-persistence-jdbc</artifactId>\n-            <version>${pom.version}</version>\n-        </dependency>\n-        <dependency>\n-            <groupId>org.apache.openjpa</groupId>\n-            <artifactId>openjpa-xmlstore</artifactId>\n-            <version>${pom.version}</version>\n-        </dependency>\n-\n-        <!-- included so we can include it in the distribution -->\n-        <dependency>\n-            <groupId>org.apache.derby</groupId>\n-            <artifactId>derby</artifactId>\n-            <version>10.1.3.1</version>\n-        </dependency>\n-\n-        <!-- jars needed for for docbook -->\n-        <dependency>\n-            <groupId>ant</groupId>\n-            <artifactId>ant</artifactId>\n-            <version>1.6.5</version>\n-            <scope>runtime</scope>\n-        </dependency>\n-        <dependency>\n-            <groupId>ant</groupId>\n-            <artifactId>ant-trax</artifactId>\n-            <version>1.6.5</version>\n-            <scope>runtime</scope>\n-        </dependency>\n-        <dependency>\n-            <groupId>xalan</groupId>\n-            <artifactId>xalan</artifactId>\n-            <version>2.7.0</version>\n-            <scope>runtime</scope>\n-        </dependency>\n-        <dependency>\n-            <groupId>bcel</groupId>\n-            <artifactId>bcel</artifactId>\n-            <version>5.1</version>\n-            <scope>runtime</scope>\n-        </dependency>\n-    </dependencies>\n-</project>\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\r\n+    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n+    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0\r\n+        http://maven.apache.org/maven-v4_0_0.xsd\">\r\n+    <!--\r\n+        To build the distribution files from project root:\r\n+\r\n+        mvn clean compile package -Dtest=false\r\n+    -->\r\n+    <modelVersion>4.0.0</modelVersion>\r\n+    <artifactId>openjpa-project</artifactId>\r\n+    <packaging>pom</packaging>\r\n+    <name>OpenJPA Distribution</name>\r\n+    <parent>\r\n+        <groupId>org.apache.openjpa</groupId>\r\n+        <artifactId>openjpa</artifactId>\r\n+        <version>0.9.5-incubating-SNAPSHOT</version>\r\n+    </parent>\r\n+    <build>\r\n+        <!-- needed to let maven pass the \"compile\" phase -->\r\n+        <testSourceDirectory>/none/</testSourceDirectory>\r\n+\r\n+        <!-- filter site resources -->\r\n+        <resources>\r\n+            <resource>\r\n+                <directory>${project.basedir}/src/site</directory>\r\n+                <!-- targetPath is relative to target/classes/ -->\r\n+                <targetPath>../filtered-site</targetPath>\r\n+                <filtering>false</filtering>\r\n+            </resource>\r\n+        </resources>\r\n+\r\n+        <plugins>\r\n+            <plugin>\r\n+\r\n+                <!--\r\n+                    Manually build an aggregate jar of all the other\r\n+                    openjpa-* jars using ant. We cannot use the assembly\r\n+                    plugin, since it doesn't provide support for appending\r\n+                    multiple same-named files to each other (which is\r\n+                    required for correctly aggregating services files).\r\n+                -->\r\n+                <artifactId>maven-antrun-plugin</artifactId>\r\n+                <executions>\r\n+                    <execution>\r\n+                        <id>build-single-jar</id>\r\n+                        <phase>process-classes</phase>\r\n+                        <configuration>\r\n+                            <tasks>\r\n+                                <unjar overwrite=\"false\"\r\n+                                    dest=\"${basedir}/target/classes\">\r\n+                                    <fileset dir=\"${basedir}/..\">\r\n+                                        <include name=\"*/target/openjpa-*.jar\" />\r\n+                                    </fileset>\r\n+                                </unjar>\r\n+\r\n+                                <!--\r\n+                                    need to manually concatenate the services\r\n+                                    resources so they are aggregated\r\n+                                -->\r\n+                                <macrodef name=\"aggregate-file\">\r\n+                                    <attribute name=\"servicename\" />\r\n+                                    <sequential>\r\n+                                        <echo>\r\n+                                            Building service: @{servicename}\r\n+                                        </echo>\r\n+                                        <concat\r\n+                                            destfile=\"${basedir}/target/classes/META-INF/services/@{servicename}\">\r\n+                                            <fileset dir=\"${basedir}/..\"\r\n+                                                includes=\"*/src/main/resources/META-INF/services/@{servicename}\" />\r\n+                                        </concat>\r\n+                                    </sequential>\r\n+                                </macrodef>\r\n+\r\n+                                <aggregate-file\r\n+                                    servicename=\"org.apache.openjpa.lib.conf.ProductDerivation\" />\r\n+                                <aggregate-file\r\n+                                    servicename=\"javax.persistence.spi.PersistenceProvider\" />\r\n+                                <aggregate-file\r\n+                                    servicename=\"org.apache.openjpa.kernel.exps.ExpressionParser\" />\r\n+\r\n+                                <mkdir dir=\"${basedir}/target/aggregate\" />\r\n+\r\n+                                <jar\r\n+                                    destfile=\"${basedir}/target/aggregate/openjpa-${version}.jar\"\r\n+                                    basedir=\"${basedir}/target/classes\">\r\n+\r\n+                                    <manifest>\r\n+                                        <!--  Add roughly the same manifest info that the maven-jar-plugin uses -->\r\n+                                        <attribute name=\"Built-By\"\r\n+                                            value=\"${user.name}\" />\r\n+                                        <attribute name=\"Build-Jdk\"\r\n+                                            value=\"${java.version}\" />\r\n+                                        <attribute name=\"Specification-Title\"\r\n+                                            value=\"${project.name}\" />\r\n+                                        <attribute name=\"Specification-Version\"\r\n+                                            value=\"${project.version}\" />\r\n+                                        <attribute name=\"Specification-Vendor\"\r\n+                                            value=\"$${project.organization.name}\" />\r\n+                                        <attribute name=\"Implementation-Title\"\r\n+                                            value=\"${project.name}\" />\r\n+                                        <attribute name=\"Implementation-Version\"\r\n+                                            value=\"${project.version}\" />\r\n+                                        <attribute\r\n+                                            name=\"Implementation-Vendor-Id\" value=\"${project.groupId}\" />\r\n+                                        <attribute name=\"Implementation-Vendor\"\r\n+                                            value=\"${project.organization.name}\" />\r\n+\r\n+                                        <!-- set premain class -->\r\n+                                        <attribute name=\"Premain-Class\"\r\n+                                            value=\"org.apache.openjpa.enhance.PCEnhancerAgent\" />\r\n+                                    </manifest>\r\n+\r\n+                                </jar>\r\n+                            </tasks>\r\n+                        </configuration>\r\n+                        <goals>\r\n+                            <goal>run</goal>\r\n+                        </goals>\r\n+                    </execution>\r\n+                </executions>\r\n+            </plugin>\r\n+\r\n+            <plugin>\r\n+                <artifactId>maven-assembly-plugin</artifactId>\r\n+                <executions>\r\n+                    <execution>\r\n+                        <id>bin</id>\r\n+                        <phase>package</phase>\r\n+                        <goals>\r\n+                            <goal>attached</goal>\r\n+                        </goals>\r\n+                        <configuration>\r\n+                            <descriptor>assembly.xml</descriptor>\r\n+                            <finalName>openjpa-${version}</finalName>\r\n+                            <outputDirectory>${project.basedir}/target/assembly</outputDirectory>\r\n+                            <workDirectory>target/work</workDirectory>\r\n+                        </configuration>\r\n+                    </execution>\r\n+                    <execution>\r\n+                        <id>sources</id>\r\n+                        <phase>package</phase>\r\n+                        <goals>\r\n+                            <goal>attached</goal>\r\n+                        </goals>\r\n+                        <configuration>\r\n+                            <descriptor>source-assembly.xml</descriptor>\r\n+                            <finalName>openjpa-${version}</finalName>\r\n+                            <outputDirectory>${project.basedir}/target/assembly</outputDirectory>\r\n+                            <workDirectory>target/work</workDirectory>\r\n+                        </configuration>\r\n+                    </execution>\r\n+                </executions>\r\n+            </plugin>\r\n+\r\n+            <!--\r\n+                Copy over site files from src/site to target/filtered-site\r\n+                so we can filter resources and include other generated\r\n+                content from the openjpa-project module.\r\n+            -->\r\n+            <plugin>\r\n+                <artifactId>maven-resources-plugin</artifactId>\r\n+                <executions>\r\n+                    <execution>\r\n+                        <id>prefilter-site</id>\r\n+                        <phase>site</phase>\r\n+                        <goals>\r\n+                            <goal>resources</goal>\r\n+                        </goals>\r\n+                    </execution>\r\n+                </executions>\r\n+            </plugin>\r\n+\r\n+            <plugin>\r\n+                <groupId>org.apache.maven.plugins</groupId>\r\n+                <artifactId>maven-site-plugin</artifactId>\r\n+                <version>2.0-beta-5</version>\r\n+                <configuration>\r\n+                    <siteDirectory>target/filtered-site</siteDirectory>\r\n+                </configuration>\r\n+            </plugin>\r\n+        </plugins>\r\n+    </build>\r\n+\r\n+    <profiles>\r\n+        <!--\r\n+            Docbook profile. Docs can be built by running:\r\n+                mvn package -Dtest=false -Pjavadoc-profile,docbook-profile\r\n+        -->\r\n+        <profile>\r\n+            <id>docbook-profile</id>\r\n+            <build>\r\n+                <plugins>\r\n+                    <!-- build the docs when creating the site from docbook source -->\r\n+                    <plugin>\r\n+                        <artifactId>maven-antrun-plugin</artifactId>\r\n+                        <executions>\r\n+                            <execution>\r\n+                                <phase>package</phase>\r\n+                                <configuration>\r\n+                                 <!-- destdir=\"${project.build.directory}/site/manual\" -->\r\n+                                    <tasks>\r\n+                                    <echo>Building docbook manual</echo>\r\n+\r\n+                                    <!-- download stylesheets -->\r\n+                                    <property name=\"stylesheet\" value=\"1.69.1.tar.bz2\"/>\r\n+                                    <property name=\"stylesheet.dir\" value=\"${project.basedir}/target/stylesheets\"/>\r\n+\r\n+                                    <mkdir dir=\"${stylesheet.dir}\"/>\r\n+                                    <get src=\"http://docbook.sourceforge.net/release/xsl/${stylesheet}\" usetimestamp=\"true\" dest=\"${stylesheet.dir}/${stylesheet}\"/>\r\n+                                    <untar src=\"${stylesheet.dir}/${stylesheet}\" dest=\"${stylesheet.dir}\" compression=\"bzip2\" overwrite=\"false\"/>\r\n+\r\n+\r\n+                                    <style includes=\"**/manual.xml\"\r\n+                                        force=\"true\"\r\n+                                        basedir=\"${project.basedir}/src/doc/manual\"\r\n+                                        destdir=\"${project.basedir}/target/manual\"\r\n+                                        style=\"manual-xhtml.xsl\"\r\n+                                        classpathref=\"maven.runtime.classpath\">\r\n+                                        <factory name=\"org.apache.xalan.processor.TransformerFactoryImpl\">\r\n+                                            <attribute name=\"http://xml.apache.org/xalan/features/optimize\" value=\"true\"/>\r\n+                                        </factory>\r\n+                                    </style>\r\n+\r\n+                                    <!--\r\n+                                    <style includes=\"**/manual.xml\"\r\n+                                        force=\"true\"\r\n+                                        basedir=\"${project.basedir}/src/doc/manual\"\r\n+                                        destdir=\"${project.basedir}/target/manual\"\r\n+                                        style=\"manual-xhtml-chunk.xsl\"\r\n+                                        classpathref=\"maven.runtime.classpath\">\r\n+                                        <factory name=\"org.apache.xalan.processor.TransformerFactoryImpl\">\r\n+                                            <attribute name=\"http://xml.apache.org/xalan/features/optimize\" value=\"true\"/>\r\n+                                        </factory>\r\n+                                    </style>\r\n+                                    -->\r\n+                                    </tasks>\r\n+                                </configuration>\r\n+                                <goals>\r\n+                                    <goal>run</goal>\r\n+                                </goals>\r\n+                            </execution>\r\n+                        </executions>\r\n+                    </plugin>\r\n+                </plugins>\r\n+            </build>\r\n+            <activation>\r\n+                <property>\r\n+                    <name>builddocs</name>\r\n+                    <value>true</value>\r\n+                </property>\r\n+            </activation>\r\n+        </profile>\r\n+    </profiles>\r\n+\r\n+    <!-- need to explicitly list dependencies for assembly to work -->\r\n+    <dependencies>\r\n+        <dependency>\r\n+            <groupId>org.apache.openjpa</groupId>\r\n+            <artifactId>openjpa-all</artifactId>\r\n+            <version>${pom.version}</version>\r\n+        </dependency>\r\n+        <dependency>\r\n+            <groupId>org.apache.openjpa</groupId>\r\n+            <artifactId>openjpa-lib</artifactId>\r\n+            <version>${pom.version}</version>\r\n+        </dependency>\r\n+        <dependency>\r\n+            <groupId>org.apache.openjpa</groupId>\r\n+            <artifactId>openjpa-kernel</artifactId>\r\n+            <version>${pom.version}</version>\r\n+        </dependency>\r\n+        <dependency>\r\n+            <groupId>org.apache.openjpa</groupId>\r\n+            <artifactId>openjpa-kernel-4</artifactId>\r\n+            <version>${pom.version}</version>\r\n+        </dependency>\r\n+        <dependency>\r\n+            <groupId>org.apache.openjpa</groupId>\r\n+            <artifactId>openjpa-kernel-5</artifactId>\r\n+            <version>${pom.version}</version>\r\n+        </dependency>\r\n+        <dependency>\r\n+            <groupId>org.apache.openjpa</groupId>\r\n+            <artifactId>openjpa-jdbc</artifactId>\r\n+            <version>${pom.version}</version>\r\n+        </dependency>\r\n+        <dependency>\r\n+            <groupId>org.apache.openjpa</groupId>\r\n+            <artifactId>openjpa-jdbc-5</artifactId>\r\n+            <version>${pom.version}</version>\r\n+        </dependency>\r\n+        <dependency>\r\n+            <groupId>org.apache.openjpa</groupId>\r\n+            <artifactId>openjpa-persistence</artifactId>\r\n+            <version>${pom.version}</version>\r\n+        </dependency>\r\n+        <dependency>\r\n+            <groupId>org.apache.openjpa</groupId>\r\n+            <artifactId>openjpa-persistence-jdbc</artifactId>\r\n+            <version>${pom.version}</version>\r\n+        </dependency>\r\n+        <dependency>\r\n+            <groupId>org.apache.openjpa</groupId>\r\n+            <artifactId>openjpa-xmlstore</artifactId>\r\n+            <version>${pom.version}</version>\r\n+        </dependency>\r\n+\r\n+        <!-- included so we can include it in the distribution -->\r\n+        <dependency>\r\n+            <groupId>org.apache.derby</groupId>\r\n+            <artifactId>derby</artifactId>\r\n+            <version>10.1.3.1</version>\r\n+        </dependency>\r\n+\r\n+        <!-- jars needed for for docbook -->\r\n+        <dependency>\r\n+            <groupId>ant</groupId>\r\n+            <artifactId>ant</artifactId>\r\n+            <version>1.6.5</version>\r\n+            <scope>runtime</scope>\r\n+        </dependency>\r\n+        <dependency>\r\n+            <groupId>ant</groupId>\r\n+            <artifactId>ant-trax</artifactId>\r\n+            <version>1.6.5</version>\r\n+            <scope>runtime</scope>\r\n+        </dependency>\r\n+        <dependency>\r\n+            <groupId>xalan</groupId>\r\n+            <artifactId>xalan</artifactId>\r\n+            <version>2.7.0</version>\r\n+            <scope>runtime</scope>\r\n+        </dependency>\r\n+        <dependency>\r\n+            <groupId>bcel</groupId>\r\n+            <artifactId>bcel</artifactId>\r\n+            <version>5.1</version>\r\n+            <scope>runtime</scope>\r\n+        </dependency>\r\n+    </dependencies>\r\n+</project>\r"}]}

