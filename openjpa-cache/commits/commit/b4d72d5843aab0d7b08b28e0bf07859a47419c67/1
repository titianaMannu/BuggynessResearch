{"sha":"b4d72d5843aab0d7b08b28e0bf07859a47419c67","node_id":"MDY6Q29tbWl0MjA2MzY0OmI0ZDcyZDU4NDNhYWIwZDdiMDhiMjhlMGJmMDc4NTlhNDc0MTljNjc=","commit":{"author":{"name":"Albert Lee","email":"allee8285@apache.org","date":"2008-03-05T16:38:46Z"},"committer":{"name":"Albert Lee","email":"allee8285@apache.org","date":"2008-03-05T16:38:46Z"},"message":"After OPENJPA-9, -help option in scripts is not working anymore. This is caused by Configurations.runAgainstAllAnchors returns true if no error is encountered (including no operation) during function execution. Since the check of the -help option is in the command's run method and if no anchor is found, the help check is skipped.\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@633921 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"9c6df08a59390ee1220748f8e5930dfda1561ffe","url":"https://api.github.com/repos/apache/openjpa/git/trees/9c6df08a59390ee1220748f8e5930dfda1561ffe"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/b4d72d5843aab0d7b08b28e0bf07859a47419c67","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/b4d72d5843aab0d7b08b28e0bf07859a47419c67","html_url":"https://github.com/apache/openjpa/commit/b4d72d5843aab0d7b08b28e0bf07859a47419c67","comments_url":"https://api.github.com/repos/apache/openjpa/commits/b4d72d5843aab0d7b08b28e0bf07859a47419c67/comments","author":null,"committer":null,"parents":[{"sha":"126358f0e4f9aa200fb4e880fde8437295dbf071","url":"https://api.github.com/repos/apache/openjpa/commits/126358f0e4f9aa200fb4e880fde8437295dbf071","html_url":"https://github.com/apache/openjpa/commit/126358f0e4f9aa200fb4e880fde8437295dbf071"}],"stats":{"total":40,"additions":5,"deletions":35},"files":[{"sha":"00533d390daebc9b8922f4573668c065633849ce","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/ClassTableJDBCSeq.java","status":"modified","additions":0,"deletions":3,"changes":3,"blob_url":"https://github.com/apache/openjpa/blob/b4d72d5843aab0d7b08b28e0bf07859a47419c67/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/ClassTableJDBCSeq.java","raw_url":"https://github.com/apache/openjpa/raw/b4d72d5843aab0d7b08b28e0bf07859a47419c67/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/ClassTableJDBCSeq.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/ClassTableJDBCSeq.java?ref=b4d72d5843aab0d7b08b28e0bf07859a47419c67","patch":"@@ -189,9 +189,6 @@ public boolean run(Options opts) throws Exception {\n      */\n     public static boolean run(JDBCConfiguration conf, String[] args,\n         Options opts) throws Exception {\n-        if (opts.containsKey(\"help\") || opts.containsKey(\"-help\"))\n-            return false;\n-\n         String action = opts.removeProperty(\"action\", \"a\", null);\n         Configurations.populateConfiguration(conf, opts);\n         return run(conf, args, action, null, null);"},{"sha":"cf0621618fc44dd29b79c50e3a0ac937426224ad","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/NativeJDBCSeq.java","status":"modified","additions":0,"deletions":3,"changes":3,"blob_url":"https://github.com/apache/openjpa/blob/b4d72d5843aab0d7b08b28e0bf07859a47419c67/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/NativeJDBCSeq.java","raw_url":"https://github.com/apache/openjpa/raw/b4d72d5843aab0d7b08b28e0bf07859a47419c67/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/NativeJDBCSeq.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/NativeJDBCSeq.java?ref=b4d72d5843aab0d7b08b28e0bf07859a47419c67","patch":"@@ -337,9 +337,6 @@ public boolean run(Options opts) throws Exception {\n     public static boolean run(JDBCConfiguration conf, String[] args,\n         Options opts)\n         throws Exception {\n-        if (opts.containsKey(\"help\") || opts.containsKey(\"-help\"))\n-            return false;\n-\n         String action = opts.removeProperty(\"action\", \"a\", null);\n         Configurations.populateConfiguration(conf, opts);\n         return run(conf, args, action);"},{"sha":"af84c4f096bcabef73e18ca091ef8452fac19a70","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/TableJDBCSeq.java","status":"modified","additions":0,"deletions":3,"changes":3,"blob_url":"https://github.com/apache/openjpa/blob/b4d72d5843aab0d7b08b28e0bf07859a47419c67/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/TableJDBCSeq.java","raw_url":"https://github.com/apache/openjpa/raw/b4d72d5843aab0d7b08b28e0bf07859a47419c67/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/TableJDBCSeq.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/TableJDBCSeq.java?ref=b4d72d5843aab0d7b08b28e0bf07859a47419c67","patch":"@@ -635,9 +635,6 @@ public boolean run(Options opts) throws Exception {\n     public static boolean run(JDBCConfiguration conf, String[] args,\n         Options opts)\n         throws Exception {\n-        if (opts.containsKey(\"help\") || opts.containsKey(\"-help\"))\n-            return false;\n-\n         String action = opts.removeProperty(\"action\", \"a\", null);\n         Configurations.populateConfiguration(conf, opts);\n         return run(conf, args, action);"},{"sha":"329fcad522c2a38571bcf7ae444dfe06d0bc21b3","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/ValueTableJDBCSeq.java","status":"modified","additions":0,"deletions":3,"changes":3,"blob_url":"https://github.com/apache/openjpa/blob/b4d72d5843aab0d7b08b28e0bf07859a47419c67/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/ValueTableJDBCSeq.java","raw_url":"https://github.com/apache/openjpa/raw/b4d72d5843aab0d7b08b28e0bf07859a47419c67/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/ValueTableJDBCSeq.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/ValueTableJDBCSeq.java?ref=b4d72d5843aab0d7b08b28e0bf07859a47419c67","patch":"@@ -142,9 +142,6 @@ public boolean run(Options opts) throws Exception {\n     public static boolean run(JDBCConfiguration conf, String[] args,\n         Options opts)\n         throws Exception {\n-        if (opts.containsKey(\"help\") || opts.containsKey(\"-help\"))\n-            return false;\n-\n         String action = opts.removeProperty(\"action\", \"a\", null);\n         Configurations.populateConfiguration(conf, opts);\n         return run(conf, args, action, null, null);"},{"sha":"d9ac176dc72903732003876e55b7b1bd33ee7cbc","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/meta/MappingTool.java","status":"modified","additions":0,"deletions":3,"changes":3,"blob_url":"https://github.com/apache/openjpa/blob/b4d72d5843aab0d7b08b28e0bf07859a47419c67/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/meta/MappingTool.java","raw_url":"https://github.com/apache/openjpa/raw/b4d72d5843aab0d7b08b28e0bf07859a47419c67/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/meta/MappingTool.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/meta/MappingTool.java?ref=b4d72d5843aab0d7b08b28e0bf07859a47419c67","patch":"@@ -942,9 +942,6 @@ public boolean run(Options opts) throws IOException, SQLException {\n     public static boolean run(JDBCConfiguration conf, String[] args,\n         Options opts)\n         throws IOException, SQLException {\n-        if (opts.containsKey(\"help\") || opts.containsKey(\"-help\"))\n-            return false;\n-\n         // flags\n         Flags flags = new Flags();\n         flags.action = opts.removeProperty(\"action\", \"a\", flags.action);"},{"sha":"c418bcebfbe8c5a71f05f220bee62691b321a593","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/meta/ReverseMappingTool.java","status":"modified","additions":0,"deletions":3,"changes":3,"blob_url":"https://github.com/apache/openjpa/blob/b4d72d5843aab0d7b08b28e0bf07859a47419c67/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/meta/ReverseMappingTool.java","raw_url":"https://github.com/apache/openjpa/raw/b4d72d5843aab0d7b08b28e0bf07859a47419c67/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/meta/ReverseMappingTool.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/meta/ReverseMappingTool.java?ref=b4d72d5843aab0d7b08b28e0bf07859a47419c67","patch":"@@ -1843,9 +1843,6 @@ public boolean run(Options opts) throws Exception {\n     public static boolean run(JDBCConfiguration conf, String[] args,\n         Options opts)\n         throws IOException, SQLException {\n-        if (opts.containsKey(\"help\") || opts.containsKey(\"-help\"))\n-            return false;\n-\n         // flags\n         Flags flags = new Flags();\n         flags.packageName = opts.removeProperty"},{"sha":"37b99b2ddcbc1db145d4e663513e33f77db6032a","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/SchemaTool.java","status":"modified","additions":0,"deletions":3,"changes":3,"blob_url":"https://github.com/apache/openjpa/blob/b4d72d5843aab0d7b08b28e0bf07859a47419c67/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/SchemaTool.java","raw_url":"https://github.com/apache/openjpa/raw/b4d72d5843aab0d7b08b28e0bf07859a47419c67/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/SchemaTool.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/SchemaTool.java?ref=b4d72d5843aab0d7b08b28e0bf07859a47419c67","patch":"@@ -1357,9 +1357,6 @@ public boolean run(Options opts) throws Exception {\n     public static boolean run(JDBCConfiguration conf, String[] args,\n         Options opts)\n         throws IOException, SQLException {\n-        if (opts.containsKey(\"help\") || opts.containsKey(\"-help\"))\n-            return false;\n-\n         Flags flags = new Flags();\n         flags.dropTables = opts.removeBooleanProperty\n             (\"dropTables\", \"dt\", flags.dropTables);"},{"sha":"df21bcf4ba369d3f9032fb1906fe84282752055f","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/TableSchemaFactory.java","status":"modified","additions":0,"deletions":3,"changes":3,"blob_url":"https://github.com/apache/openjpa/blob/b4d72d5843aab0d7b08b28e0bf07859a47419c67/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/TableSchemaFactory.java","raw_url":"https://github.com/apache/openjpa/raw/b4d72d5843aab0d7b08b28e0bf07859a47419c67/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/TableSchemaFactory.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/TableSchemaFactory.java?ref=b4d72d5843aab0d7b08b28e0bf07859a47419c67","patch":"@@ -473,9 +473,6 @@ public boolean run(Options opts) throws Exception {\n     public static boolean run(JDBCConfiguration conf, String[] args,\n         Options opts)\n         throws IOException, SQLException {\n-        if (opts.containsKey(\"help\") || opts.containsKey(\"-help\"))\n-            return false;\n-\n         String action = opts.removeProperty(\"action\", \"a\", null);\n         Configurations.populateConfiguration(conf, opts);\n         return run(conf, action);"},{"sha":"a4e968dade96b105d9b6612e6c9603f294406d63","filename":"openjpa-kernel/src/main/java/org/apache/openjpa/enhance/ApplicationIdTool.java","status":"modified","additions":0,"deletions":3,"changes":3,"blob_url":"https://github.com/apache/openjpa/blob/b4d72d5843aab0d7b08b28e0bf07859a47419c67/openjpa-kernel/src/main/java/org/apache/openjpa/enhance/ApplicationIdTool.java","raw_url":"https://github.com/apache/openjpa/raw/b4d72d5843aab0d7b08b28e0bf07859a47419c67/openjpa-kernel/src/main/java/org/apache/openjpa/enhance/ApplicationIdTool.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/java/org/apache/openjpa/enhance/ApplicationIdTool.java?ref=b4d72d5843aab0d7b08b28e0bf07859a47419c67","patch":"@@ -1306,9 +1306,6 @@ public boolean run(Options opts)\n     public static boolean run(OpenJPAConfiguration conf, String[] args,\n         Options opts)\n         throws IOException, ClassNotFoundException {\n-        if (opts.containsKey(\"help\") || opts.containsKey(\"-help\"))\n-            return false;\n-\n         Flags flags = new Flags();\n         flags.ignoreErrors = opts.removeBooleanProperty\n             (\"ignoreErrors\", \"i\", flags.ignoreErrors);"},{"sha":"52b4572a1368aec0c27a7ac2c53ed158096dd734","filename":"openjpa-kernel/src/main/java/org/apache/openjpa/enhance/PCEnhancer.java","status":"modified","additions":0,"deletions":3,"changes":3,"blob_url":"https://github.com/apache/openjpa/blob/b4d72d5843aab0d7b08b28e0bf07859a47419c67/openjpa-kernel/src/main/java/org/apache/openjpa/enhance/PCEnhancer.java","raw_url":"https://github.com/apache/openjpa/raw/b4d72d5843aab0d7b08b28e0bf07859a47419c67/openjpa-kernel/src/main/java/org/apache/openjpa/enhance/PCEnhancer.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/java/org/apache/openjpa/enhance/PCEnhancer.java?ref=b4d72d5843aab0d7b08b28e0bf07859a47419c67","patch":"@@ -4365,9 +4365,6 @@ public boolean run(Options opts) throws IOException {\n     public static boolean run(OpenJPAConfiguration conf, String[] args,\n         Options opts)\n         throws IOException {\n-        if (opts.containsKey(\"help\") || opts.containsKey(\"-help\"))\n-            return false;\n-\n         Flags flags = new Flags();\n         flags.directory = Files.getFile(opts.removeProperty(\"directory\", \"d\",\n             null), null);"},{"sha":"9b2b9bc02217b173c0e6a4b7f18a46a018f813ee","filename":"openjpa-kernel/src/main/java/org/apache/openjpa/meta/MetaDataTool.java","status":"modified","additions":2,"deletions":5,"changes":7,"blob_url":"https://github.com/apache/openjpa/blob/b4d72d5843aab0d7b08b28e0bf07859a47419c67/openjpa-kernel/src/main/java/org/apache/openjpa/meta/MetaDataTool.java","raw_url":"https://github.com/apache/openjpa/raw/b4d72d5843aab0d7b08b28e0bf07859a47419c67/openjpa-kernel/src/main/java/org/apache/openjpa/meta/MetaDataTool.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/java/org/apache/openjpa/meta/MetaDataTool.java?ref=b4d72d5843aab0d7b08b28e0bf07859a47419c67","patch":"@@ -251,7 +251,8 @@ public static void main(String[] args)\n         throws IOException {\n         Options opts = new Options();\n         final String[] arguments = opts.setFromCmdLine(args);\n-        boolean ret = Configurations.runAgainstAllAnchors(opts,\n+        boolean ret = (args.length > 0) &&\n+            Configurations.runAgainstAllAnchors(opts,\n             new Configurations.Runnable() {\n             public boolean run(Options opts) throws Exception {\n                 OpenJPAConfiguration conf = new OpenJPAConfigurationImpl();\n@@ -272,10 +273,6 @@ public boolean run(Options opts) throws Exception {\n     public static boolean run(OpenJPAConfiguration conf, String[] args,\n         Options opts)\n         throws IOException {\n-        if (args.length == 0 || opts.containsKey(\"help\")\n-            || opts.containsKey(\"-help\"))\n-            return false;\n-\n         Flags flags = new Flags();\n         flags.action = opts.removeProperty(\"action\", \"a\", flags.action);\n         String fileName = opts.removeProperty(\"file\", \"f\", null);"},{"sha":"668410cb951ca90307807f51cbf818a23980a2d5","filename":"openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/Configurations.java","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/apache/openjpa/blob/b4d72d5843aab0d7b08b28e0bf07859a47419c67/openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/Configurations.java","raw_url":"https://github.com/apache/openjpa/raw/b4d72d5843aab0d7b08b28e0bf07859a47419c67/openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/Configurations.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/Configurations.java?ref=b4d72d5843aab0d7b08b28e0bf07859a47419c67","patch":"@@ -673,6 +673,9 @@ public static Object removeProperty(String partialKey, Map props) {\n      */\n     public static boolean runAgainstAllAnchors(Options opts,\n         Configurations.Runnable runnable) {\n+        if (opts.containsKey(\"help\") || opts.containsKey(\"-help\")) {\n+            return false;\n+        }\n         List anchors =\n             Configurations.getFullyQualifiedAnchorsInPropertiesLocation(opts);\n "}]}

