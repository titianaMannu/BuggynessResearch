{"sha":"b50c73f35711d2d965dfa4fe9918f14504d628b7","node_id":"MDY6Q29tbWl0MjA2MzY0OmI1MGM3M2YzNTcxMWQyZDk2NWRmYTRmZTk5MThmMTQ1MDRkNjI4Yjc=","commit":{"author":{"name":"Patrick Linskey","email":"pcl@apache.org","date":"2007-10-25T22:14:55Z"},"committer":{"name":"Patrick Linskey","email":"pcl@apache.org","date":"2007-10-25T22:14:55Z"},"message":"OPENJPA-413. Some more clarifications in confusing error messages.\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@588373 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"2c2c39ab0fc969b2232405bcf24d598f78d660ed","url":"https://api.github.com/repos/apache/openjpa/git/trees/2c2c39ab0fc969b2232405bcf24d598f78d660ed"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/b50c73f35711d2d965dfa4fe9918f14504d628b7","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/b50c73f35711d2d965dfa4fe9918f14504d628b7","html_url":"https://github.com/apache/openjpa/commit/b50c73f35711d2d965dfa4fe9918f14504d628b7","comments_url":"https://api.github.com/repos/apache/openjpa/commits/b50c73f35711d2d965dfa4fe9918f14504d628b7/comments","author":null,"committer":null,"parents":[{"sha":"35fb37ea380649a203db65d78c972f1206a509b9","url":"https://api.github.com/repos/apache/openjpa/commits/35fb37ea380649a203db65d78c972f1206a509b9","html_url":"https://github.com/apache/openjpa/commit/35fb37ea380649a203db65d78c972f1206a509b9"}],"stats":{"total":34,"additions":19,"deletions":15},"files":[{"sha":"17dac861b446c6023597f9b669da4f49e03a4562","filename":"openjpa-kernel/src/main/java/org/apache/openjpa/kernel/AttachStrategy.java","status":"modified","additions":2,"deletions":4,"changes":6,"blob_url":"https://github.com/apache/openjpa/blob/b50c73f35711d2d965dfa4fe9918f14504d628b7/openjpa-kernel/src/main/java/org/apache/openjpa/kernel/AttachStrategy.java","raw_url":"https://github.com/apache/openjpa/raw/b50c73f35711d2d965dfa4fe9918f14504d628b7/openjpa-kernel/src/main/java/org/apache/openjpa/kernel/AttachStrategy.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/java/org/apache/openjpa/kernel/AttachStrategy.java?ref=b50c73f35711d2d965dfa4fe9918f14504d628b7","patch":"@@ -273,10 +273,8 @@ protected Object getReference(AttachManager manager, Object toAttach,\n             if (oid != null)\n                 return manager.getBroker().find(oid, false, null);\n         }\n-        throw new UserException(_loc.get(\"cant-cascade-attach\",\n-            Exceptions.toString(toAttach), vmd,\n-            Exceptions.toString(sm.getManagedInstance()))).\n-            setFailedObject(toAttach);\n+        throw new UserException(_loc.get(\"cant-cascade-attach\", vmd))\n+            .setFailedObject(toAttach);\n     }\n \n     /**"},{"sha":"0563ab4fba005d64ec767a8c5c04148e54019705","filename":"openjpa-kernel/src/main/java/org/apache/openjpa/kernel/SingleFieldManager.java","status":"modified","additions":3,"deletions":4,"changes":7,"blob_url":"https://github.com/apache/openjpa/blob/b50c73f35711d2d965dfa4fe9918f14504d628b7/openjpa-kernel/src/main/java/org/apache/openjpa/kernel/SingleFieldManager.java","raw_url":"https://github.com/apache/openjpa/raw/b50c73f35711d2d965dfa4fe9918f14504d628b7/openjpa-kernel/src/main/java/org/apache/openjpa/kernel/SingleFieldManager.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/java/org/apache/openjpa/kernel/SingleFieldManager.java?ref=b50c73f35711d2d965dfa4fe9918f14504d628b7","patch":"@@ -747,10 +747,9 @@ private void preFlushPC(ValueMetaData vmd, Object obj, boolean logical,\n \n             sm = _broker.getStateManager(obj);\n             if (sm == null || !sm.isPersistent())\n-                throw new InvalidStateException(_loc.get(\"cant-cascade-persist\",\n-                    Exceptions.toString(obj), vmd,\n-                    Exceptions.toString(_sm.getManagedInstance()))).\n-                    setFailedObject(obj);\n+                throw new InvalidStateException(\n+                    _loc.get(\"cant-cascade-persist\", vmd))\n+                    .setFailedObject(obj);\n         } else {\n             sm = _broker.getStateManager(obj);\n             if (sm == null || !sm.isProvisional())"},{"sha":"206825fd7e1d63903e0bed9265cfb8b02c2de16f","filename":"openjpa-kernel/src/main/resources/org/apache/openjpa/kernel/localizer.properties","status":"modified","additions":14,"deletions":7,"changes":21,"blob_url":"https://github.com/apache/openjpa/blob/b50c73f35711d2d965dfa4fe9918f14504d628b7/openjpa-kernel/src/main/resources/org/apache/openjpa/kernel/localizer.properties","raw_url":"https://github.com/apache/openjpa/raw/b50c73f35711d2d965dfa4fe9918f14504d628b7/openjpa-kernel/src/main/resources/org/apache/openjpa/kernel/localizer.properties","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/resources/org/apache/openjpa/kernel/localizer.properties?ref=b50c73f35711d2d965dfa4fe9918f14504d628b7","patch":"@@ -211,13 +211,20 @@ nontrans-proxied: You cannot make a property access object created with \"new\" \\\n \tnontransactional.\n no-field: Field \"{0}\" is not declared in \"{1}\", or is not managed.\n no-field-index: \"{0}\" is not the index of any managed field in \"{1}\".\n-cant-cascade-persist: Encountered unmanaged object \"{0}\" in persistent field \\\n-\t\"{1}\" of managed object \"{2}\" during flush.  However, this field does not \\\n-\tallow to be CascadeType.PERSIST.  You cannot flush unmanaged objects.\n-cant-cascade-attach: Encountered new object \"{0}\" in persistent field \\\n-\t\"{1}\" of managed object \"{2}\" during attach.  However, this field does not \\\n-\tallow to cascade during attach.  You cannot attach a reference to a new object \\\n-\twithout cascading.\n+cant-cascade-persist: Encountered unmanaged object in persistent field \\\n+\t\"{0}\" during flush.  However, this field does not \\\n+\tallow cascade persist. Set the cascade attribute for this field to \\\n+    CascadeType.PERSIST or CascadeType.ALL (JPA annotations) or \\\n+    \"persist\" or \"all\" (JPA orm.xml), or enable cascade-persist globally, \\\n+    or manually persist the related field value prior to flushing. \\\n+\tYou cannot flush unmanaged objects or graphs that have persistent \\\n+    associations to unmanaged objects.\n+cant-cascade-attach: Encountered new object in persistent field \\\n+\t\"{0}\" during attach.  However, this field does not \\\n+\tallow cascade attach. Set the cascade attribute for this field to \\\n+    CascadeType.MERGE or CascadeType.ALL (JPA annotations) or \\\n+    \"merge\" or \"all\" (JPA orm.xml). \\\n+    You cannot attach a reference to a new object without cascading.\n ref-to-deleted: Encountered deleted object \"{0}\" in persistent field \\\n \t\"{1}\" of managed object \"{2}\" during flush.\n no-version-field: Encountered object \"{0}\" without a version field during \\"}]}

