{"sha":"b683569de095f7e9d24606816f5d09d88e12f3e2","node_id":"MDY6Q29tbWl0MjA2MzY0OmI2ODM1NjlkZTA5NWY3ZTlkMjQ2MDY4MTZmNWQwOWQ4OGUxMmYzZTI=","commit":{"author":{"name":"Pinaki Poddar","email":"ppoddar@apache.org","date":"2008-08-05T03:19:13Z"},"committer":{"name":"Pinaki Poddar","email":"ppoddar@apache.org","date":"2008-08-05T03:19:13Z"},"message":"OPENJPA-485: \nOPENJPA-497: Saving NPE\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@682570 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"339b035b9169953438880713789d515883028656","url":"https://api.github.com/repos/apache/openjpa/git/trees/339b035b9169953438880713789d515883028656"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/b683569de095f7e9d24606816f5d09d88e12f3e2","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/b683569de095f7e9d24606816f5d09d88e12f3e2","html_url":"https://github.com/apache/openjpa/commit/b683569de095f7e9d24606816f5d09d88e12f3e2","comments_url":"https://api.github.com/repos/apache/openjpa/commits/b683569de095f7e9d24606816f5d09d88e12f3e2/comments","author":null,"committer":null,"parents":[{"sha":"49d5f19a684dc48ce579a9eeaffb04ca9a49996e","url":"https://api.github.com/repos/apache/openjpa/commits/49d5f19a684dc48ce579a9eeaffb04ca9a49996e","html_url":"https://github.com/apache/openjpa/commit/49d5f19a684dc48ce579a9eeaffb04ca9a49996e"}],"stats":{"total":23,"additions":12,"deletions":11},"files":[{"sha":"e59a58252fd988c3a0b4ac36becf8678e5d2668d","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/exps/PCPath.java","status":"modified","additions":4,"deletions":2,"changes":6,"blob_url":"https://github.com/apache/openjpa/blob/b683569de095f7e9d24606816f5d09d88e12f3e2/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/exps/PCPath.java","raw_url":"https://github.com/apache/openjpa/raw/b683569de095f7e9d24606816f5d09d88e12f3e2/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/exps/PCPath.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/exps/PCPath.java?ref=b683569de095f7e9d24606816f5d09d88e12f3e2","patch":"@@ -489,8 +489,10 @@ else if (action.op == Action.UNBOUND_VAR) {\n \n                     for (; from != null && from != to;\n                         from = from.getJoinablePCSuperclassMapping()) {\n-                    \tpstate.field = from.getFieldMapping(pstate.field\n-                    \t    .getName());\n+                    \tFieldMapping cast = from.getFieldMapping(pstate.field\n+                    \t\t\t.getName());\n+                    \tif (cast != null)\n+                    \t\tpstate.field = cast;\n                         pstate.joins = from.joinSuperclass(pstate.joins, false);\n                     }\n                 }"},{"sha":"6c1156746cd3f7850866473f920daf8d1ca54014","filename":"openjpa-persistence/src/main/java/org/apache/openjpa/persistence/QueryImpl.java","status":"modified","additions":8,"deletions":9,"changes":17,"blob_url":"https://github.com/apache/openjpa/blob/b683569de095f7e9d24606816f5d09d88e12f3e2/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/QueryImpl.java","raw_url":"https://github.com/apache/openjpa/raw/b683569de095f7e9d24606816f5d09d88e12f3e2/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/QueryImpl.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/QueryImpl.java?ref=b683569de095f7e9d24606816f5d09d88e12f3e2","patch":"@@ -322,9 +322,8 @@ private void validateParameters() {\n \t\t\t\tif (expectedParamType.isPrimitive() && actualValue == null)\n \t\t\t\t\tnewValidationException(\"param-type-null\", \n \t\t\t\t\t\t\tposition, query, expectedParamType.getName());\n-\t\t\t\tif (actualValue == null)\n-\t\t\t\t\tcontinue;\n-\t\t\t\tif (!Filters.wrap(expectedParamType).isInstance(actualValue)) \n+\t\t\t\tif (actualValue != null &&\n+\t\t\t\t   !Filters.wrap(expectedParamType).isInstance(actualValue)) \n \t\t\t\t\tnewValidationException(\"param-type-mismatch\",\n \t\t\t\t\t\t\tposition, query, actualValue,\n \t\t\t\t\t\t\tactualValue.getClass().getName(),\n@@ -347,8 +346,8 @@ private void validateParameters() {\n \t\t\t\t\tif (expectedParamType.isPrimitive() && actualValue == null)\n \t\t\t\t\t\tnewValidationException(\"param-type-null\", \n \t\t\t\t\t\t\t\tposition, query, expectedParamType.getName());\n-\t\t\t\t\tif (!Filters.wrap(expectedParamType)\n-\t\t\t\t\t\t\t.isInstance(actualValue)) \n+\t\t\t\t\tif (actualValue != null \n+\t\t\t\t\t && !Filters.wrap(expectedParamType).isInstance(actualValue)) \n \t\t\t\t\t\tnewValidationException(\"param-type-mismatch\",\n \t\t\t\t\t\t\t\tposition, query, actualValue,\n \t\t\t\t\t\t\t\tactualValue.getClass().getName(),\n@@ -375,9 +374,8 @@ private void validateParameters() {\n \t\t\t\tif (expectedParamType.isPrimitive() && actualValue == null)\n \t\t\t\t\tnewValidationException(\"param-type-null\", \n \t\t\t\t\t\t\texpectedName, query, expectedParamType.getName());\n-\t\t\t\tif (actualValue == null)\n-\t\t\t\t\tcontinue;\n-\t\t\t\tif (!Filters.wrap(expectedParamType).isInstance(actualValue)) {\n+\t\t\t\tif (actualValue != null \n+\t\t\t\t && !Filters.wrap(expectedParamType).isInstance(actualValue)) {\n \t\t\t\t\tnewValidationException(\"param-type-mismatch\",\n \t\t\t\t\t\t\texpectedName, query, actualValue,\n \t\t\t\t\t\t\tactualValue.getClass().getName(),\n@@ -395,7 +393,8 @@ private void validateParameters() {\n \t\t\t\tif (expectedParamType.isPrimitive() && actualValue == null)\n \t\t\t\t\tnewValidationException(\"param-type-null\", \n \t\t\t\t\t\t\tactualName, query, expectedParamType.getName());\n-\t\t\t\tif (!Filters.wrap(expectedParamType).isInstance(actualValue)) {\n+\t\t\t\tif (actualValue != null \n+\t\t\t\t && !Filters.wrap(expectedParamType).isInstance(actualValue)) {\n \t\t\t\t\tnewValidationException(\"param-type-mismatch\",\n \t\t\t\t\t\t\tactualName, query, actualValue,\n \t\t\t\t\t\t\tactualValue.getClass().getName(),"}]}

