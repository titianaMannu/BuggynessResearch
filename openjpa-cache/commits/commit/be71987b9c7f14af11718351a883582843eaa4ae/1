{"sha":"be71987b9c7f14af11718351a883582843eaa4ae","node_id":"MDY6Q29tbWl0MjA2MzY0OmJlNzE5ODdiOWM3ZjE0YWYxMTcxODM1MWE4ODM1ODI4NDNlYWE0YWU=","commit":{"author":{"name":"Jody Grassel","email":"jgrassel@apache.org","date":"2016-10-11T18:30:19Z"},"committer":{"name":"Jody Grassel","email":"jgrassel@apache.org","date":"2016-10-11T18:30:19Z"},"message":"OPENJPA-2672: ConfigurationImpl.loadGlobals() has java.util.ConcurrentModificationException vulnerability\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@1764316 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"c331b71c5f2ba59e4d306b96ab28b4872376fcb9","url":"https://api.github.com/repos/apache/openjpa/git/trees/c331b71c5f2ba59e4d306b96ab28b4872376fcb9"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/be71987b9c7f14af11718351a883582843eaa4ae","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/be71987b9c7f14af11718351a883582843eaa4ae","html_url":"https://github.com/apache/openjpa/commit/be71987b9c7f14af11718351a883582843eaa4ae","comments_url":"https://api.github.com/repos/apache/openjpa/commits/be71987b9c7f14af11718351a883582843eaa4ae/comments","author":null,"committer":null,"parents":[{"sha":"a99daf8f47ed77072d506ede1730b4a16a9c93e6","url":"https://api.github.com/repos/apache/openjpa/commits/a99daf8f47ed77072d506ede1730b4a16a9c93e6","html_url":"https://github.com/apache/openjpa/commit/a99daf8f47ed77072d506ede1730b4a16a9c93e6"}],"stats":{"total":11,"additions":8,"deletions":3},"files":[{"sha":"527983f994419db5e4df5cc2fcfce757f7bcf51a","filename":"openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/ConfigurationImpl.java","status":"modified","additions":8,"deletions":3,"changes":11,"blob_url":"https://github.com/apache/openjpa/blob/be71987b9c7f14af11718351a883582843eaa4ae/openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/ConfigurationImpl.java","raw_url":"https://github.com/apache/openjpa/raw/be71987b9c7f14af11718351a883582843eaa4ae/openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/ConfigurationImpl.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/ConfigurationImpl.java?ref=be71987b9c7f14af11718351a883582843eaa4ae","patch":"@@ -187,9 +187,14 @@ public boolean loadGlobals() {\n \n         // let system properties override other globals\n         try {\n-            fromProperties(new HashMap(\n-                AccessController.doPrivileged(\n-                    J2DoPrivHelper.getPropertiesAction())));\n+            Properties systemProperties = AccessController.doPrivileged(\n+                    J2DoPrivHelper.getPropertiesAction());\n+            HashMap sysPropHM = null;\n+            synchronized(systemProperties) {\n+                // Prevent concurrent modification of systemProperties until HashMap ctor is completed.\n+                sysPropHM = new HashMap(systemProperties);\n+            }\n+            fromProperties(sysPropHM);\n         } catch (SecurityException se) {\n             // security manager might disallow\n         }"}]}

