{"sha":"c1e5f27724f3b4a39d9624a8758d56c2a3ee6b0f","node_id":"MDY6Q29tbWl0MjA2MzY0OmMxZTVmMjc3MjRmM2I0YTM5ZDk2MjRhODc1OGQ1NmMyYTNlZTZiMGY=","commit":{"author":{"name":"Catalina Wei","email":"fancy@apache.org","date":"2008-05-28T01:20:26Z"},"committer":{"name":"Catalina Wei","email":"fancy@apache.org","date":"2008-05-28T01:20:26Z"},"message":"OPENJPA-615 add trace to display connection properties default setting during DataSource initialization\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@660770 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"abe8e3712b2ca743b97cd3e75b3a8022b696b55e","url":"https://api.github.com/repos/apache/openjpa/git/trees/abe8e3712b2ca743b97cd3e75b3a8022b696b55e"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/c1e5f27724f3b4a39d9624a8758d56c2a3ee6b0f","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/c1e5f27724f3b4a39d9624a8758d56c2a3ee6b0f","html_url":"https://github.com/apache/openjpa/commit/c1e5f27724f3b4a39d9624a8758d56c2a3ee6b0f","comments_url":"https://api.github.com/repos/apache/openjpa/commits/c1e5f27724f3b4a39d9624a8758d56c2a3ee6b0f/comments","author":null,"committer":null,"parents":[{"sha":"2d217257d9a6e169d8ea1aea9e2f906192d16784","url":"https://api.github.com/repos/apache/openjpa/commits/2d217257d9a6e169d8ea1aea9e2f906192d16784","html_url":"https://github.com/apache/openjpa/commit/2d217257d9a6e169d8ea1aea9e2f906192d16784"}],"stats":{"total":13,"additions":13,"deletions":0},"files":[{"sha":"340fd7c0de06d34061a8a532a46e3b5b1100fb76","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/DataSourceFactory.java","status":"modified","additions":9,"deletions":0,"changes":9,"blob_url":"https://github.com/apache/openjpa/blob/c1e5f27724f3b4a39d9624a8758d56c2a3ee6b0f/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/DataSourceFactory.java","raw_url":"https://github.com/apache/openjpa/raw/c1e5f27724f3b4a39d9624a8758d56c2a3ee6b0f/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/DataSourceFactory.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/schema/DataSourceFactory.java?ref=c1e5f27724f3b4a39d9624a8758d56c2a3ee6b0f","patch":"@@ -207,11 +207,16 @@ public static DecoratingDataSource installDBDictionary(DBDictionary dict,\n             ConfiguringConnectionDecorator ccd =\n                 new ConfiguringConnectionDecorator();\n             ccd.setTransactionIsolation(conf.getTransactionIsolationConstant());\n+            Log log = conf.getLog(JDBCConfiguration.LOG_JDBC);\n             if (factory2 || !conf.isConnectionFactoryModeManaged()) {\n                 if (!dict.supportsMultipleNontransactionalResultSets)\n                     ccd.setAutoCommit(Boolean.FALSE);\n                 else\n                     ccd.setAutoCommit(Boolean.TRUE);\n+                // add trace info for autoCommit setting\n+                if (log.isTraceEnabled())\n+                    log.trace(_loc.get(\"set-auto-commit\", new Object[] {\n+                    dict.supportsMultipleNontransactionalResultSets}));                \n             }\n             Options opts = Configurations.parseProperties((factory2)\n                 ? conf.getConnectionFactory2Properties()\n@@ -230,6 +235,10 @@ public static DecoratingDataSource installDBDictionary(DBDictionary dict,\n                 conn = ds.getConnection(conf.getConnection2UserName(), conf\n                         .getConnection2Password());\n \n+            if (log.isTraceEnabled())\n+                log.trace(_loc.get(\"connection-defaults\", new Object[]{\n+                    conn.getAutoCommit(), conn.getHoldability(),\n+                    conn.getTransactionIsolation()})); \n             return ds;\n         } catch (Exception e) {\n             throw new StoreException(e).setFatal(true);"},{"sha":"451f3e4054a08fbeedfef143ac59a9380c67f28d","filename":"openjpa-jdbc/src/main/resources/org/apache/openjpa/jdbc/schema/localizer.properties","status":"modified","additions":4,"deletions":0,"changes":4,"blob_url":"https://github.com/apache/openjpa/blob/c1e5f27724f3b4a39d9624a8758d56c2a3ee6b0f/openjpa-jdbc/src/main/resources/org/apache/openjpa/jdbc/schema/localizer.properties","raw_url":"https://github.com/apache/openjpa/raw/c1e5f27724f3b4a39d9624a8758d56c2a3ee6b0f/openjpa-jdbc/src/main/resources/org/apache/openjpa/jdbc/schema/localizer.properties","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/resources/org/apache/openjpa/jdbc/schema/localizer.properties?ref=c1e5f27724f3b4a39d9624a8758d56c2a3ee6b0f","patch":"@@ -147,3 +147,7 @@ generating-sequences: Reading sequences for schema \"{0}\"\n no-custom-ds: use a custom DataSource\n delete-table-contents: An error occurred while attempting to delete all \\\n     records from all mapped tables.\n+set-auto-commit: DataSource connection setAutoCommit to \"{0}\"\n+connection-defaults: Initial connection autoCommit: {0}, holdability: {1}, \\\n+    TransactionIsolation: {2}\n+"}]}

