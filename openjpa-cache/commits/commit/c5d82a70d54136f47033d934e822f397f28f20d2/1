{"sha":"c5d82a70d54136f47033d934e822f397f28f20d2","node_id":"MDY6Q29tbWl0MjA2MzY0OmM1ZDgyYTcwZDU0MTM2ZjQ3MDMzZDkzNGU4MjJmMzk3ZjI4ZjIwZDI=","commit":{"author":{"name":"Srinivasa Segu","email":"ssegu@apache.org","date":"2007-04-06T05:21:35Z"},"committer":{"name":"Srinivasa Segu","email":"ssegu@apache.org","date":"2007-04-06T05:21:35Z"},"message":"OPENJPA-203. Fix select-for-update queries to timeout after the LockTimeout interval\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/openjpa/trunk@526059 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"f41074b3d957706a57651d20de5fd4c97cc433c9","url":"https://api.github.com/repos/apache/openjpa/git/trees/f41074b3d957706a57651d20de5fd4c97cc433c9"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/c5d82a70d54136f47033d934e822f397f28f20d2","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/c5d82a70d54136f47033d934e822f397f28f20d2","html_url":"https://github.com/apache/openjpa/commit/c5d82a70d54136f47033d934e822f397f28f20d2","comments_url":"https://api.github.com/repos/apache/openjpa/commits/c5d82a70d54136f47033d934e822f397f28f20d2/comments","author":null,"committer":null,"parents":[{"sha":"57442b70592e83218b1d9ac78c972364308e20d1","url":"https://api.github.com/repos/apache/openjpa/commits/57442b70592e83218b1d9ac78c972364308e20d1","html_url":"https://github.com/apache/openjpa/commit/57442b70592e83218b1d9ac78c972364308e20d1"}],"stats":{"total":3,"additions":3,"deletions":0},"files":[{"sha":"de3293000ebaf84aee15bce9440dbdecf1b6b933","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SelectImpl.java","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/apache/openjpa/blob/c5d82a70d54136f47033d934e822f397f28f20d2/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SelectImpl.java","raw_url":"https://github.com/apache/openjpa/raw/c5d82a70d54136f47033d934e822f397f28f20d2/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SelectImpl.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SelectImpl.java?ref=c5d82a70d54136f47033d934e822f397f28f20d2","patch":"@@ -339,6 +339,9 @@ protected Result execute(StoreContext ctx, JDBCStore store,\n                 stmnt = sql.prepareStatement(conn, fetch, rsType, -1);\n             else\n                 stmnt = sql.prepareStatement(conn, rsType, -1);\n+\n+            if (forUpdate)\n+                stmnt.setQueryTimeout(fetch.getLockTimeout() / 1000);\n             rs = stmnt.executeQuery();\n         } catch (SQLException se) {\n             // clean up statement"}]}

