{"sha":"cc8ac0bc6424ecb46d4ee7893ab0c2df0bbce91a","node_id":"MDY6Q29tbWl0MjA2MzY0OmNjOGFjMGJjNjQyNGVjYjQ2ZDRlZTc4OTNhYjBjMmRmMGJiY2U5MWE=","commit":{"author":{"name":"Marc Prud'hommeaux","email":"mprudhom@apache.org","date":"2007-06-21T15:17:24Z"},"committer":{"name":"Marc Prud'hommeaux","email":"mprudhom@apache.org","date":"2007-06-21T15:17:24Z"},"message":"Changed the parsing of the driver name to not use the JDK 1.5-specific method String.contains() and String.split().\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@549508 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"a62bfb3f1e279d10abf8b139b925b209175a6851","url":"https://api.github.com/repos/apache/openjpa/git/trees/a62bfb3f1e279d10abf8b139b925b209175a6851"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/cc8ac0bc6424ecb46d4ee7893ab0c2df0bbce91a","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/cc8ac0bc6424ecb46d4ee7893ab0c2df0bbce91a","html_url":"https://github.com/apache/openjpa/commit/cc8ac0bc6424ecb46d4ee7893ab0c2df0bbce91a","comments_url":"https://api.github.com/repos/apache/openjpa/commits/cc8ac0bc6424ecb46d4ee7893ab0c2df0bbce91a/comments","author":null,"committer":null,"parents":[{"sha":"a39a2dace9d2b76f2e7ac7c70d6f1c5643ee80ee","url":"https://api.github.com/repos/apache/openjpa/commits/a39a2dace9d2b76f2e7ac7c70d6f1c5643ee80ee","html_url":"https://github.com/apache/openjpa/commit/a39a2dace9d2b76f2e7ac7c70d6f1c5643ee80ee"}],"stats":{"total":13,"additions":10,"deletions":3},"files":[{"sha":"f02ee3068869e02868214bc6c03fdce9c3a17b68","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SQLServerDictionary.java","status":"modified","additions":10,"deletions":3,"changes":13,"blob_url":"https://github.com/apache/openjpa/blob/cc8ac0bc6424ecb46d4ee7893ab0c2df0bbce91a/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SQLServerDictionary.java","raw_url":"https://github.com/apache/openjpa/raw/cc8ac0bc6424ecb46d4ee7893ab0c2df0bbce91a/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SQLServerDictionary.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SQLServerDictionary.java?ref=cc8ac0bc6424ecb46d4ee7893ab0c2df0bbce91a","patch":"@@ -79,9 +79,16 @@ else if (url != null\n                     driverVendor = VENDOR_OTHER;\n             } else\n                 driverVendor = VENDOR_OTHER;\n-            if (driverName.contains(platform) && Integer.parseInt(driverName\n-                .split(\"Server \",0)[1].split(\" \")[0]) >= 2005)\n-                supportsXMLColumn = true;\n+            if (driverName.indexOf(platform) != -1) {\n+                String versionString = driverName.\n+                    substring(platform.length() + 1);\n+                if (versionString.indexOf(\" \") != -1)\n+                    versionString = versionString.substring(0,\n+                        versionString.indexOf(\" \"));\n+                int version = Integer.parseInt(versionString);\n+                if (version >= 2005)\n+                    supportsXMLColumn = true;\n+            }\n         }\n \n         // warn about using cursors"}]}

