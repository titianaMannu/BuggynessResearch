{"sha":"ce0886e110de5e2a772dd4d33f5f328aa4bcaba4","node_id":"MDY6Q29tbWl0MjA2MzY0OmNlMDg4NmUxMTBkZTVlMmE3NzJkZDRkMzNmNWYzMjhhYTRiY2FiYTQ=","commit":{"author":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2010-03-09T14:32:46Z"},"committer":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2010-03-09T14:32:46Z"},"message":"OPENJPA-1101 Remove unused/outdated/incomplete OSGi integration tests, as this is being handled by Apache Aries for now\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@920894 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"ae36df3c875afc2ae4766a21332502b744580fdd","url":"https://api.github.com/repos/apache/openjpa/git/trees/ae36df3c875afc2ae4766a21332502b744580fdd"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/ce0886e110de5e2a772dd4d33f5f328aa4bcaba4","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/ce0886e110de5e2a772dd4d33f5f328aa4bcaba4","html_url":"https://github.com/apache/openjpa/commit/ce0886e110de5e2a772dd4d33f5f328aa4bcaba4","comments_url":"https://api.github.com/repos/apache/openjpa/commits/ce0886e110de5e2a772dd4d33f5f328aa4bcaba4/comments","author":null,"committer":null,"parents":[{"sha":"dbe6745966ccd57b016ce50743abe43d918a83b9","url":"https://api.github.com/repos/apache/openjpa/commits/dbe6745966ccd57b016ce50743abe43d918a83b9","html_url":"https://github.com/apache/openjpa/commit/dbe6745966ccd57b016ce50743abe43d918a83b9"}],"stats":{"total":1156,"additions":0,"deletions":1156},"files":[{"sha":"91654c085912967938b500c7f5be9ddccd7ac24c","filename":"openjpa-integration/osgi-itests/pom.xml","status":"removed","additions":0,"deletions":318,"changes":318,"blob_url":"https://github.com/apache/openjpa/blob/dbe6745966ccd57b016ce50743abe43d918a83b9/openjpa-integration/osgi-itests/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/dbe6745966ccd57b016ce50743abe43d918a83b9/openjpa-integration/osgi-itests/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-integration/osgi-itests/pom.xml?ref=dbe6745966ccd57b016ce50743abe43d918a83b9","patch":"@@ -1,318 +0,0 @@\n-<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n-<!--\n- Licensed to the Apache Software Foundation (ASF) under one\n- or more contributor license agreements.  See the NOTICE file\n- distributed with this work for additional information\n- regarding copyright ownership.  The ASF licenses this file\n- to you under the Apache License, Version 2.0 (the\n- \"License\"); you may not use this file except in compliance\n- with the License.  You may obtain a copy of the License at\n-\n-    http://www.apache.org/licenses/LICENSE-2.0\n-\n- Unless required by applicable law or agreed to in writing,\n- software distributed under the License is distributed on an\n- \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- KIND, either express or implied.  See the License for the\n- specific language governing permissions and limitations\n- under the License.\n--->\n-<!--\n-    Maven release plugin requires the project tag to be on a single line.\n--->\n-<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\">\n-    <parent>\n-        <groupId>org.apache.openjpa</groupId>\n-        <artifactId>openjpa-integration</artifactId>\n-        <version>2.0.0-SNAPSHOT</version>\n-    </parent>\n-\n-    <modelVersion>4.0.0</modelVersion>\n-    <artifactId>openjpa-integration-osgi-itests</artifactId>\n-    <version>2.0.0-SNAPSHOT</version>\n-    <packaging>jar</packaging>\n-\n-    <name>OpenJPA Integration Tests - OSGi</name>\n-    <description>OpenJPA Integration Tests - OSGi</description>\n-\n-    <dependencies>\n-        <!--\n-            Note: Scope should be set to test for all depends\n-        -->\n-        <!-- OpenJPA runtime and depends -->\n-        <dependency>\n-            <groupId>org.apache.openjpa</groupId>\n-            <artifactId>openjpa-osgi</artifactId>\n-            <version>${version}</version>\n-            <scope>provided</scope>\n-        </dependency>\n-        <dependency>\n-            <groupId>org.apache.geronimo.specs</groupId>\n-            <artifactId>geronimo-jpa_2.0_spec</artifactId>\n-            <scope>provided</scope>\n-        </dependency>\n-\n-        <dependency>\n-            <groupId>org.apache.geronimo.specs</groupId>\n-            <artifactId>geronimo-jms_1.1_spec</artifactId>\n-            <scope>test</scope>\n-        </dependency>\n-        <dependency>\n-            <groupId>org.apache.geronimo.specs</groupId>\n-            <artifactId>geronimo-jta_1.1_spec</artifactId>\n-            <scope>provided</scope>\n-        </dependency>\n-        <!-- Not needed yet...\n-        <dependency>\n-            <groupId>org.apache.geronimo.specs</groupId>\n-            <artifactId>geronimo-validation_1.0_spec</artifactId>\n-            <scope>test</scope>\n-        </dependency>\n-        -->\n-        <!-- Note: Overriding parent versions as these have bundle metadata -->\n-        <dependency>\n-            <groupId>commons-collections</groupId>\n-            <artifactId>commons-collections</artifactId>\n-            <version>3.2.1</version>\n-            <scope>test</scope>\n-        </dependency>\n-        <dependency>\n-            <groupId>commons-lang</groupId>\n-            <artifactId>commons-lang</artifactId>\n-            <version>2.4</version>\n-            <scope>provided</scope>\n-        </dependency>\n-        <dependency>\n-            <groupId>commons-pool</groupId>\n-            <artifactId>commons-pool</artifactId>\n-            <scope>test</scope>\n-        </dependency>\n-        <!-- Testcase depends -->\n-        <!--\n-        <dependency>\n-            <groupId>org.apache.openjpa</groupId>\n-            <artifactId>openjpa-examples</artifactId>\n-            <version>${version}</version>\n-            <scope>test</scope>\n-        </dependency>\n-        -->\n-        <dependency>\n-            <groupId>org.apache.derby</groupId>\n-            <artifactId>derby</artifactId>\n-            <scope>test</scope>\n-        </dependency>\n-        <!-- use the bundlized version of commons-dbcp from servicemix -->\n-        <dependency>\n-            <groupId>org.apache.servicemix.bundles</groupId>\n-            <artifactId>org.apache.servicemix.bundles.commons-dbcp</artifactId>\n-            <version>1.2.2_3</version>\n-            <scope>test</scope>\n-        </dependency>\n-        <!-- Test framework depends -->\n-        <dependency>\n-            <groupId>junit</groupId>\n-            <artifactId>junit</artifactId>\n-            <version>4.5</version>\n-            <scope>test</scope>\n-        </dependency>\n-        <dependency>\n-            <groupId>org.ops4j.pax.exam</groupId>\n-            <artifactId>pax-exam</artifactId>\n-            <version>0.5.0</version>\n-            <scope>test</scope>\n-        </dependency>\n-        <dependency>\n-            <groupId>org.ops4j.pax.exam</groupId>\n-            <artifactId>pax-exam-junit</artifactId>\n-            <version>0.5.0</version>\n-            <scope>test</scope>\n-        </dependency>\n-        <dependency>\n-            <groupId>org.ops4j.pax.exam</groupId>\n-            <artifactId>pax-exam-container-default</artifactId>\n-            <version>0.5.0</version>\n-            <scope>test</scope>\n-        </dependency>\n-        <dependency>\n-            <groupId>org.ops4j.pax.exam</groupId>\n-            <artifactId>pax-exam-junit-extender-impl</artifactId>\n-            <version>0.5.0</version>\n-            <scope>test</scope>\n-        </dependency>\n-        <dependency>\n-            <groupId>org.ops4j.pax.logging</groupId>\n-            <artifactId>pax-logging-api</artifactId>\n-            <version>1.3.0</version>\n-            <scope>test</scope>\n-        </dependency>\n-        <dependency>\n-            <groupId>org.ops4j.pax.logging</groupId>\n-            <artifactId>pax-logging-service</artifactId>\n-            <version>1.3.0</version>\n-            <scope>test</scope>\n-        </dependency>\n-        <dependency>\n-            <groupId>org.ops4j.pax.url</groupId>\n-            <artifactId>pax-url-mvn</artifactId>\n-            <version>0.3.3</version>\n-            <scope>test</scope>\n-        </dependency>\n-        <dependency>\n-            <groupId>org.apache.felix</groupId>\n-            <artifactId>org.osgi.core</artifactId>\n-            <version>1.2.0</version>\n-            <scope>provided</scope>\n-        </dependency>\n-        <!-- Apache Felix framework -->\n-        <dependency>\n-            <groupId>org.apache.felix</groupId>\n-            <artifactId>org.apache.felix.configadmin</artifactId>\n-            <version>1.0.10</version>\n-            <scope>test</scope>\n-        </dependency>\n-        <!-- Note: This depend has to be after all the rest -->\n-        <dependency>\n-            <groupId>org.apache.felix</groupId>\n-            <artifactId>org.apache.felix.main</artifactId>\n-            <version>1.6.1</version>\n-            <scope>test</scope>\n-        </dependency>\n-    </dependencies>\n-\n-    <repositories>\n-        <repository>\n-            <id>ops4j.releases</id>\n-            <url>http://repository.ops4j.org/maven2</url>\n-        </repository>\n-        <repository>\n-            <id>ops4j.snapshots</id>\n-            <url>http://repository.ops4j.org/mvn-snapshots</url>\n-        </repository>\n-    </repositories>\n-    <pluginRepositories>\n-        <pluginRepository>\n-            <id>ops4j.releases</id>\n-            <url>http://repository.ops4j.org/maven2</url>\n-            <snapshots>\n-                <enabled>true</enabled>\n-            </snapshots>\n-        </pluginRepository>\n-    </pluginRepositories>\n-\n-    <build>\n-        <resources>\n-            <!-- for source jar -->\n-            <resource>\n-                <directory>src/main/resources</directory>\n-            </resource>\n-            <!-- for test jar -->\n-            <resource>\n-                <directory>src/test/resources</directory>\n-            </resource>\n-            <!-- also include license and notice files in all the jars -->\n-            <resource>\n-                <directory>${basedir}/../../openjpa-project/</directory>\n-                <includes>\n-                    <include>NOTICE.txt</include>\n-                    <include>LICENSE.txt</include>\n-                    <include>DISCLAIMER.txt</include>\n-                </includes>\n-                <targetPath>META-INF</targetPath>\n-            </resource>\n-        </resources>\n-\n-        <plugins>\n-            <plugin>\n-                <groupId>org.apache.maven.plugins</groupId>\n-                <artifactId>maven-antrun-plugin</artifactId>\n-                <executions>\n-                    <execution>\n-                        <phase>process-classes</phase>\n-                        <configuration>\n-                            <tasks>\n-                                <ant antfile=\"src/main/ant/enhancer.xml\" target=\"enhance\" inheritRefs=\"true\">\n-                                    <property name=\"maven.test.skip\" value=\"${maven.test.skip}\" />\n-                                    <property name=\"test\" value=\"${test}\" />\n-                                    <property name=\"outdir\" value=\"${project.build.outputDirectory}\" />\n-                                    <property name=\"project.build.outputDirectory\" value=\"${project.build.outputDirectory}\" />\n-                                    <property name=\"openjpa.loglevel\" value=\"${openjpa.loglevel}\" />\n-                                    <property name=\"build.enhance\" value=\"${build.enhance}\" />\n-                                </ant>\n-                            </tasks>\n-                        </configuration>\n-                        <goals>\n-                            <goal>run</goal>\n-                        </goals>\n-                    </execution>\n-                </executions>\n-            </plugin>\n-\n-            <plugin>\n-                <groupId>org.apache.maven.plugins</groupId>\n-                <artifactId>maven-jar-plugin</artifactId>\n-                <configuration>\n-                    <archive>\n-                        <manifestFile>${project.build.outputDirectory}/META-INF/MANIFEST.MF</manifestFile>\n-                    </archive>\n-                </configuration>\n-            </plugin>\n-\n-            <plugin>\n-                <groupId>org.apache.servicemix.tooling</groupId>\n-                <artifactId>depends-maven-plugin</artifactId>\n-                <version>1.1</version>\n-                <executions>\n-                    <execution>\n-                        <id>generate-depends-file</id>\n-                        <goals>\n-                            <goal>generate-depends-file</goal>\n-                        </goals>\n-                    </execution>\n-                </executions>\n-            </plugin>\n-\n-            <plugin>\n-                <groupId>org.apache.felix</groupId>\n-                <artifactId>maven-bundle-plugin</artifactId>\n-                <extensions>true</extensions>\n-                <configuration>\n-                    <instructions>\n-                        <Bundle-Name>${artifactId}</Bundle-Name>\n-                        <Bundle-SymbolicName>${groupId}.${artifactId};singleton=true</Bundle-SymbolicName>\n-                        <Bundle-DocURL>http://openjpa.apache.org/documentation.html</Bundle-DocURL>\n-                        <Bundle-Activator>hellojpa.Main</Bundle-Activator>\n-                        <!-- <Private-Package>hellojpa*,META-INF*</Private-Package> -->\n-                        <Import-Package>org.apache.openjpa.*,*</Import-Package>\n-                        <!-- <Export-Package></Export-Package> -->\n-                        <Require-Bundle>org.apache.geronimo.specs.geronimo-jpa_2.0_spec;bundle-version=\"[1.0.0,2.0.0)\",org.apache.openjpa.openjpa-osgi;bundle-version=\"[2.0.0,3.0.0)\"</Require-Bundle>\n-                        <!-- Eclipse metadata -->\n-                        <Eclipse-Autostart>false</Eclipse-Autostart>\n-                    </instructions>\n-                    <unpackBundle>true</unpackBundle>\n-                </configuration>\n-                <executions>\n-                    <execution>\n-                        <id>bundle-manifest</id>\n-                        <phase>process-classes</phase>\n-                        <goals>\n-                            <goal>manifest</goal>\n-                        </goals>\n-                    </execution>\n-                </executions>\n-            </plugin>\n-            <plugin>\n-                <groupId>org.apache.maven.plugins</groupId>\n-                <artifactId>maven-surefire-plugin</artifactId>\n-                <configuration>\n-                    <forkMode>pertest</forkMode>\n-                    <argLine>${surefire.jvm.args}</argLine>\n-                    <excludes>\n-                        <!-- exclude everything for now.... -->\n-                        <exclude>org/apache/openjpa/**/Test*.java</exclude>\n-                    </excludes>\n-                </configuration>\n-            </plugin>\n-        </plugins>\n-    </build>\n-\n-</project>"},{"sha":"c9daaaded78e592c70d620d8d727954b21416114","filename":"openjpa-integration/osgi-itests/readme.txt","status":"removed","additions":0,"deletions":129,"changes":129,"blob_url":"https://github.com/apache/openjpa/blob/dbe6745966ccd57b016ce50743abe43d918a83b9/openjpa-integration/osgi-itests/readme.txt","raw_url":"https://github.com/apache/openjpa/raw/dbe6745966ccd57b016ce50743abe43d918a83b9/openjpa-integration/osgi-itests/readme.txt","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-integration/osgi-itests/readme.txt?ref=dbe6745966ccd57b016ce50743abe43d918a83b9","patch":"@@ -1,129 +0,0 @@\n-Setting up Apache Felix Karaf for OpenJPA 2.0.x\n-\n-Installing and running Apache Felix Karaf\n----------------------------------------------------\n-1) Download and extract Apache Felix Karaf 1.0.0 from:\n-\n-   http://www.apache.org/dist/felix/apache-felix-karaf-1.0.0.zip\n-   http://www.apache.org/dist/felix/apache-felix-karaf-1.0.0.tar.gz\n-\n-2) Start Karaf under Java SE 5 or 6:\n- \n-  cd apache-felix-karaf-1.0.0/bin\n-  karaf\n-\n-\n-Installing and running the Felix Web Console and Jetty:\n--------------------------------------------------------\n-1) Install the following bundles:\n-\n-   a) osgi:install http://www.apache.org/dist/felix/org.osgi.compendium-1.4.0.jar\n-   b) osgi:install http://www.apache.org/dist/felix/org.apache.felix.scr-1.0.8.jar\n-   c) osgi:install http://www.apache.org/dist/felix/org.apache.felix.http.jetty-2.0.2.jar\n-   d) osgi:install http://www.apache.org/dist/felix/org.apache.felix.webconsole-2.0.0.jar\n-\n-2) Start the web console:\n-\n-   a) osgi:start <bundle id for org.apache.felix.http.jetty>\n-   b) osgi:start <bundle id for org.apache.felix.webconsole>\n-\n-   Note:  You will have to start the Config, Event and Scr bundles for those\n-     tabs to function in the web console.\n-\n-3) Access the web console in a browser:\n-\n-   http://localhost:8080/system/console\n-   uid = admin\n-   pwd = admin\n-\n-\n-Installing OpenJPA 2.0.x\n---------------------------------------------\n-1) Install the following released prereq bundles:\n-\n-   a) osgi:install http://repo1.maven.org/maven2/commons-collections/commons-collections/3.2.1/commons-collections-3.2.1.jar\n-   b) osgi:install http://repo1.maven.org/maven2/commons-lang/commons-lang/2.4/commons-lang-2.4.jar\n-   c) osgi:install http://repo1.maven.org/maven2/commons-pool/commons-pool/1.5/commons-pool-1.5.jar\n-   d) osgi:install http://repo1.maven.org/maven2/org/apache/geronimo/specs/geronimo-jms_1.1_spec/1.1.1/geronimo-jms_1.1_spec-1.1.1.jar\n-   e) osgi:install http://repo1.maven.org/maven2/org/apache/geronimo/specs/geronimo-jta_1.1_spec/1.1.1/geronimo-jta_1.1_spec-1.1.1.jar\n-\n-2) Install the following SNAPSHOT prereq bundles:\n-\n-   a) osgi:install http://mirrors.ibiblio.org/pub/mirrors/maven2/org/apache/geronimo/specs/geronimo-jpa_2.0_spec/1.0-EA9-SNAPSHOT/geronimo-jpa_2.0_spec-1.0-EA9-SNAPSHOT.jar\n-   b) osgi:install http://mirrors.ibiblio.org/pub/mirrors/maven2/org/apache/geronimo/specs/geronimo-validation_1.0_spec/1.0-EA6-SNAPSHOT/geronimo-validation_1.0_spec-1.0-EA6-SNAPSHOT.jar\n-\n-3) Install the latest OpenJPA 2.0.0-SNAPSHOT build:\n-\n-  For latest published nightly build of OpenJPA 2.0.0-SNAPSHOT:\n-  a) osgi:install http://people.apache.org/repo/m2-snapshot-repository/org/apache/openjpa/openjpa-osgi/2.0.0-SNAPSHOT/openjpa-osgi-2.0.0-SNAPSHOT.jar\n-\n-  For a locally built OpenJPA trunk (2.0.0-SNAPSHOT):\n-  a) osgi:install file:///<m2_repo>/org/apache/openjpa/openjpa-osgi/2.0.0-SNAPSHOT/openjpa-osgi-2.0.0-SNAPSHOT.jar\n-\n-4) Check the Karaf logfile for any problems:\n-\n-   apache-felix-karaf-1.0.0/data/log/karaf.log \n-\n-\n-Installing an OSGi and/or Blueprint based sample app:\n------------------------------------------------------\n-This step is still a work-in-progress and TBD...\n-\n-1) Build the openjpa-integration/osgi-itests module in trunk (2.0.0-SNAPSHOT)\n-from source.\n-\n-2) Install the bundlized HelloJPA example:\n-\n-   a) osgi:install file:///<m2_repo>/org/apache/openjpa/openjpa-integration-osgi-itests/2.0.0-SNAPSHOT/openjpa-integration-osgi-itests-2.0.0-SNAPSHOT.jar\n-   b) osgi:start <bundle id for geronimo-jpa_2.0_spec>\n-   c) osgi:start <bundle id for openjpa-osgi>\n-   d) osgi:start <bundle id for openjpa-integration-osgi-itests>\n-\n-\n-Note:  At this point the start should fail with one of the following messages:\n-\n-   a) If you are not using a level of OpenJPA and the Geronimo Spec that \n-      supports resolving providers in an OSGi environment -\n-\n-    Bundle start\n-    org.osgi.framework.BundleException: Activator start error in bundle\n-    org.apache.openjpa.openjpa-integration-osgi-itests [45].\n-    . . .\n-    Caused by: javax.persistence.PersistenceException: No persistence providers\n-    available for \"hellojpa\" after trying the following discovered\n-    implementations: NONE\n-\tat javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:189)\n-\tat hellojpa.Main.main(Main.java:38)\n-\tat hellojpa.Main.start(Main.java:81)\n-\tat org.apache.felix.framework.util.SecureAction.startActivator(SecureAction.java:667)\n-\tat org.apache.felix.framework.Felix.activateBundle(Felix.java:1699)\n-\t... 15 more\n-\n-\n-   b) The latest code, which still has some issues loading in OSGi -\n-\n-    Bundle start\n-    org.osgi.framework.BundleException: Activator start error in bundle\n-    org.apache.openjpa.openjpa-integration-osgi-itests [45].\n-    . . .\n-    Caused by: java.lang.NoSuchMethodError: javax.persistence.spi.PersistenceUnitInfo.getValidationMode()Ljavax/persistence/ValidationMode;\n-\tat org.apache.openjpa.persistence.PersistenceUnitInfoImpl.toOpenJPAProperties(PersistenceUnitInfoImpl.java:487)\n-    . . .\n-\tat hellojpa.Main.main(Main.java:38)\n-\tat hellojpa.Main.start(Main.java:81)\n-\tat org.apache.felix.framework.util.SecureAction.startActivator(SecureAction.java:667)\n-\tat org.apache.felix.framework.Felix.activateBundle(Felix.java:1699)\n-\t... 15 more\n- \n-\n-2) To reinstall the sample app, you'll need to uninstall it first, even if the initial install failed:\n-\n-   a) osgi:uninstall <bundle id for openjpa-integration-osgi-itests>\n-\n-\n-Shutting down Karaf:\n----------------------\n-1) From the Karaf cmdline:\n-\n-   osgi:shutdown\n-"},{"sha":"9baedf82f97c8ffdf6104f54f578a744aa5ae575","filename":"openjpa-integration/osgi-itests/src/main/ant/enhancer.xml","status":"removed","additions":0,"deletions":85,"changes":85,"blob_url":"https://github.com/apache/openjpa/blob/dbe6745966ccd57b016ce50743abe43d918a83b9/openjpa-integration/osgi-itests/src/main/ant/enhancer.xml","raw_url":"https://github.com/apache/openjpa/raw/dbe6745966ccd57b016ce50743abe43d918a83b9/openjpa-integration/osgi-itests/src/main/ant/enhancer.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-integration/osgi-itests/src/main/ant/enhancer.xml?ref=dbe6745966ccd57b016ce50743abe43d918a83b9","patch":"@@ -1,85 +0,0 @@\n-<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n-<!--\n-    Licensed to the Apache Software Foundation (ASF) under one\n-    or more contributor license agreements.  See the NOTICE file\n-    distributed with this work for additional information\n-    regarding copyright ownership.  The ASF licenses this file\n-    to you under the Apache License, Version 2.0 (the\n-    \"License\"); you may not use this file except in compliance\n-    with the License.  You may obtain a copy of the License at\n-    \n-    http://www.apache.org/licenses/LICENSE-2.0\n-    \n-    Unless required by applicable law or agreed to in writing,\n-    software distributed under the License is distributed on an\n-    \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n-    KIND, either express or implied.  See the License for the\n-    specific language governing permissions and limitations\n-    under the License.   \n--->\n-<project name=\"enhance\" basedir=\".\">\n-    <!--\n-        This build file executes the PCEnhancer on the test entities. It's in a\n-        separate file instead of nested in pom.xml to make some conditional \n-        processing easier.\n-        \n-        Test classes will not be compiled if maven is invoked with \n-        -Dmaven.test.skip=true. \n-    -->\n-\n-    <condition property=\"maven.test.skip.istrue\">\n-        <istrue value=\"${maven.test.skip}\" />\n-    </condition>\n-\n-\t<condition property=\"skip.enhance\">\n-\t\t<or>\n-        <equals arg1=\"${test}\" arg2=\"false\" />\n-\t\t\t<equals arg1=\"${build.enhance}\" arg2=\"false\" />\n-\t\t\t<istrue value=\"${maven.test.skip}\" />\n-\t\t\t<istrue value=\"${skipTests}\" />\n-        </or>\n-    </condition>\n-\n-    <!-- ================================= \n-          target: enhance              \n-         ================================= -->\n-    <target name=\"enhance\"\n-            description=\"--> run the enhancer unless test=false\"\n-            unless=\"skip.enhance\">\n-        <antcall target=\"enhance.all.entities\"\n-                 inheritall=\"true\"\n-                 inheritrefs=\"true\" />\n-    </target>\n-\n-    <!-- ================================= \n-          target: enhance.all.entities              \n-         ================================= -->\n-    <target name=\"enhance.all.entities\"\n-            description=\"--> enhance the test entities\"\n-            unless=\"skip.enhance\">\n-        <echo> running enhancer</echo>\n-        <!-- \n-            Inherited references won't be present until the task is called. \n-            Therefore the path definition needs to stay inside the task.\n-          -->\n-        <path id=\"cp\">\n-            <path refid=\"maven.test.classpath\" />\n-        </path>\n-\n-        <taskdef name=\"openjpac\"\n-                 classname=\"org.apache.openjpa.ant.PCEnhancerTask\">\n-            <classpath refid=\"cp\" />\n-        </taskdef>\n-\n-        <fileset id=\"enhance.path.ref\"\n-                 dir=\"${project.build.outputDirectory}\">\n-            <include name=\"**/*.class\" />\n-            <exclude name=\"**/Test*.class\" />\n-        </fileset>\n-        <openjpac>\n-            <classpath refid=\"cp\" />\n-            <fileset refid=\"enhance.path.ref\" />\n-            <config log=\"DefaultLevel=${openjpa.loglevel}\" />\n-        </openjpac>\n-    </target>\n-</project>"},{"sha":"55dc44947a98143d5935cfee2aa584537548b240","filename":"openjpa-integration/osgi-itests/src/main/java/build.xml","status":"removed","additions":0,"deletions":156,"changes":156,"blob_url":"https://github.com/apache/openjpa/blob/dbe6745966ccd57b016ce50743abe43d918a83b9/openjpa-integration/osgi-itests/src/main/java/build.xml","raw_url":"https://github.com/apache/openjpa/raw/dbe6745966ccd57b016ce50743abe43d918a83b9/openjpa-integration/osgi-itests/src/main/java/build.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-integration/osgi-itests/src/main/java/build.xml?ref=dbe6745966ccd57b016ce50743abe43d918a83b9","patch":"@@ -1,156 +0,0 @@\n-<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n-<!--\n- Licensed to the Apache Software Foundation (ASF) under one\n- or more contributor license agreements.  See the NOTICE file\n- distributed with this work for additional information\n- regarding copyright ownership.  The ASF licenses this file\n- to you under the Apache License, Version 2.0 (the\n- \"License\"); you may not use this file except in compliance\n- with the License.  You may obtain a copy of the License at\n- \n- http://www.apache.org/licenses/LICENSE-2.0\n- \n- Unless required by applicable law or agreed to in writing,\n- software distributed under the License is distributed on an\n- \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- KIND, either express or implied.  See the License for the\n- specific language governing permissions and limitations\n- under the License.   \n--->\n-<project default=\"usagewarning\">\n-\n-    <property name=\"parent\" value=\"${basedir}/..\"/>\n-    <property name=\"root\" value=\"${parent}/..\"/>\n-\n-    <!-- database connection properties -->\n-    <property name=\"dbdriver\" value=\"org.apache.derby.jdbc.EmbeddedDriver\"/>\n-    <property name=\"dburl\"\n-        value=\"jdbc:derby:${basedir}/${example}-database;create=true\"/>\n-    <property name=\"dbuser\" value=\"\"/>\n-    <property name=\"dbpass\" value=\"\"/>\n-\n-\n-    <target name=\"usagewarning\">\n-        <fail>\n-Please traverse to a sub-directory, like hellojpa, and run \"ant\" from there.\n-        </fail>\n-    </target>\n-\n-    <target name=\"init\" depends=\"init:discover, init:windows, init:unix\">\n-    </target>\n-    <target name=\"init:discover\">\n-        <condition property=\"isWindows\">\n-            <os family=\"windows\"/>\n-        </condition>\n-    </target>\n-    <target name=\"init:windows\" if=\"isWindows\">\n-        <property name=\"platform.script.ext\" value=\".bat\"/>\n-    </target>\n-    <target name=\"init:unix\" unless=\"isWindows\">\n-        <property name=\"platform.script.ext\" value=\"\"/>\n-    </target>\n-\n-    <target name=\"all\" depends=\"init\">\n-        <exec dir=\"${basedir}/hellojpa\" executable=\"ant${platform.script.ext}\"/>\n-        <exec dir=\"${basedir}/relations\" executable=\"ant${platform.script.ext}\"/>\n-        <exec dir=\"${basedir}/reversemapping\" executable=\"ant${platform.script.ext}\"/>\n-    </target>\n-\n-    <path id=\"classpath\"\n-        description=\"The classpath to use for compiling and running\">\n-        <pathelement path=\"${parent}\"/>\n-        <!-- we could include the individual jars as below, but lets use the\n-             openjpa-all.jar with Derby instead\n-        <fileset dir=\"${root}\">\n-            <include name=\"**/*.jar\"/>\n-            <exclude name=\"openjpa-all-*.jar\"/>\n-        </fileset>\n-        -->\n-        <fileset dir=\"${root}\">\n-            <include name=\"openjpa-all-*.jar\"/>\n-            <include name=\"lib/derby*.jar\"/>\n-        </fileset>\n-    </path>\n-\n-    <path id=\"javaagent\">\n-        <fileset dir=\"${root}\">\n-            <include name=\"openjpa-*.jar\"/>\n-            <exclude name=\"openjpa-all-*.jar\"/>\n-        </fileset>\n-    </path>\n-    <pathconvert property=\"javaagent\" refid=\"javaagent\"/>\n-\n-    <target name=\"clean\" depends=\"pre-clean\"\n-        description=\"Clean up compiled files and generated database files\">\n-        <delete includeemptydirs=\"yes\">\n-            <fileset dir=\"${basedir}\">\n-                <include name=\"*.class\"/>\n-                <include name=\"*.log\"/>\n-                <include name=\"${example}-database/**/*\"/>\n-                <include name=\"${example}-database\"/>\n-            </fileset>\n-        </delete>\n-    </target>\n-\n-    <!-- this target can be overridden by the sub-build -->\n-    <target name=\"pre-clean\" description=\"Pre-clean phase\">\n-    </target>\n-\n-    <target name=\"compile\" depends=\"pre-compile\"\n-        description=\"Compile the example java files\">\n-        <javac srcdir=\"${parent}\" classpathref=\"classpath\"\n-            debug=\"yes\" includes=\"${example}/**.java\"/>\n-    </target>\n-\n-    <!-- this target can be overridden by the sub-build -->\n-    <target name=\"pre-compile\" description=\"Pre-compilation phase\">\n-    </target>\n-\n-    <target name=\"run\" depends=\"compile\"\n-        description=\"Run the example Main program\">\n-\n-        <java classname=\"${example}.Main\" classpathref=\"classpath\" fork=\"yes\"\n-            failonerror=\"yes\">\n-            <!--\n-                Specifying the openjpa jar as the javaagent argument is\n-                necessary in order for automatic class-enhancement to work.\n-            -->\n-            <jvmarg value=\"-javaagent:${javaagent}\"/>\n-\n-            <!--\n-                Specify the system properties to use when configuring\n-                OpenJPA. Note that these will only be used becuase in the\n-                examples, the call to \"Persistence.createEntityManagerFactory\"\n-                is passed \"System.getProperties()\".\n-            -->\n-\n-            <!--\n-                By default, use the stand-alone Derby database (provided).\n-                This can easily be changes to use your own database's driver,\n-                provided you ensure it is accessible in the classpath.\n-            -->\n-            <sysproperty key=\"openjpa.ConnectionDriverName\"\n-                value=\"${dbdriver}\"/>\n-            <sysproperty key=\"openjpa.ConnectionURL\" value=\"${dburl}\"/>\n-            <sysproperty key=\"openjpa.ConnectionUserName\" value=\"${dbuser}\"/>\n-            <sysproperty key=\"openjpa.ConnectionPassword\" value=\"${dbpass}\"/>\n-\n-            <!--\n-                Tell OpenJPA to automatically create tables in the database\n-                for entities. Note that this should be disabled when\n-                running against a production database, since you probably\n-                don't want to be altering the schema at runtime.\n-            -->\n-            <sysproperty key=\"openjpa.jdbc.SynchronizeMappings\"\n-                value=\"buildSchema\"/>\n-\n-            <!--\n-                Output all the SQL for educational purposes, but set the\n-                general logging level to only show warnings.\n-            -->\n-            <sysproperty key=\"openjpa.Log\"\n-                value=\"DefaultLevel=WARN,SQL=TRACE\"/>\n-        </java>\n-    </target>\n-</project>\n-"},{"sha":"c27cdcf84bfaf66e51c8452fd7b2e5d3b53d60c7","filename":"openjpa-integration/osgi-itests/src/main/java/hellojpa/Main.java","status":"removed","additions":0,"deletions":89,"changes":89,"blob_url":"https://github.com/apache/openjpa/blob/dbe6745966ccd57b016ce50743abe43d918a83b9/openjpa-integration/osgi-itests/src/main/java/hellojpa/Main.java","raw_url":"https://github.com/apache/openjpa/raw/dbe6745966ccd57b016ce50743abe43d918a83b9/openjpa-integration/osgi-itests/src/main/java/hellojpa/Main.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-integration/osgi-itests/src/main/java/hellojpa/Main.java?ref=dbe6745966ccd57b016ce50743abe43d918a83b9","patch":"@@ -1,89 +0,0 @@\n-/*\n- * Licensed to the Apache Software Foundation (ASF) under one\n- * or more contributor license agreements.  See the NOTICE file\n- * distributed with this work for additional information\n- * regarding copyright ownership.  The ASF licenses this file\n- * to you under the Apache License, Version 2.0 (the\n- * \"License\"); you may not use this file except in compliance\n- * with the License.  You may obtain a copy of the License at\n- *\n- * http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing,\n- * software distributed under the License is distributed on an\n- * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- * KIND, either express or implied.  See the License for the\n- * specific language governing permissions and limitations\n- * under the License.    \n- */\n-package hellojpa;\n-\n-import java.util.*;\n-import javax.persistence.*;\n-import org.osgi.framework.BundleActivator;\n-import org.osgi.framework.BundleContext;\n-\n-\n-/** \n- * A very simple, stand-alone program that stores a new entity in the\n- * database and then performs a query to retrieve it.\n- */\n-public class Main implements BundleActivator {\n-\n-    @SuppressWarnings(\"unchecked\")\n-    public static void main(String[] args) {\n-        // Create a new EntityManagerFactory using the System properties.\n-        // The \"hellojpa\" name will be used to configure based on the\n-        // corresponding name in the META-INF/persistence.xml file\n-        EntityManagerFactory factory = Persistence.\n-            createEntityManagerFactory(\"hellojpa\", System.getProperties());\n-\n-        // Create a new EntityManager from the EntityManagerFactory. The\n-        // EntityManager is the main object in the persistence API, and is\n-        // used to create, delete, and query objects, as well as access\n-        // the current transaction\n-        EntityManager em = factory.createEntityManager();\n-\n-        // Begin a new local transaction so that we can persist a new entity\n-        em.getTransaction().begin();\n-\n-        // Create and persist a new Message entity\n-        em.persist(new Message(\"Hello Persistence!\"));\n-\n-        // Commit the transaction, which will cause the entity to\n-        // be stored in the database\n-        em.getTransaction().commit();\n-\n-        // It is always good practice to close the EntityManager so that\n-        // resources are conserved.\n-        em.close();\n-\n-        // Create a fresh, new EntityManager\n-        EntityManager em2 = factory.createEntityManager();\n-\n-        // Perform a simple query for all the Message entities\n-        Query q = em2.createQuery(\"select m from Message m\");\n-\n-        // Go through each of the entities and print out each of their\n-        // messages, as well as the date on which it was created \n-        for (Message m : (List<Message>) q.getResultList()) {\n-            System.out.println(m.getMessage()\n-                + \" (created on: \" + m.getCreated() + \")\"); \n-        }\n-\n-        // Again, it is always good to clean up after ourselves\n-        em2.close();\n-        factory.close();\n-    }\n-\n-    public void start(BundleContext context) {\n-        System.out.println(\"Bundle start\");\n-        main(null);\n-    }\n-\n-    public void stop(BundleContext context) {\n-        System.out.println(\"Bundle stop\");\n-    }\n-\n-}\n-"},{"sha":"38a084d04683615c31e1e302bbadbbac6325f1ab","filename":"openjpa-integration/osgi-itests/src/main/java/hellojpa/Message.java","status":"removed","additions":0,"deletions":72,"changes":72,"blob_url":"https://github.com/apache/openjpa/blob/dbe6745966ccd57b016ce50743abe43d918a83b9/openjpa-integration/osgi-itests/src/main/java/hellojpa/Message.java","raw_url":"https://github.com/apache/openjpa/raw/dbe6745966ccd57b016ce50743abe43d918a83b9/openjpa-integration/osgi-itests/src/main/java/hellojpa/Message.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-integration/osgi-itests/src/main/java/hellojpa/Message.java?ref=dbe6745966ccd57b016ce50743abe43d918a83b9","patch":"@@ -1,72 +0,0 @@\n-/*\n- * Licensed to the Apache Software Foundation (ASF) under one\n- * or more contributor license agreements.  See the NOTICE file\n- * distributed with this work for additional information\n- * regarding copyright ownership.  The ASF licenses this file\n- * to you under the Apache License, Version 2.0 (the\n- * \"License\"); you may not use this file except in compliance\n- * with the License.  You may obtain a copy of the License at\n- *\n- * http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing,\n- * software distributed under the License is distributed on an\n- * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- * KIND, either express or implied.  See the License for the\n- * specific language governing permissions and limitations\n- * under the License.    \n- */\n-package hellojpa;\n-\n-import java.util.*;\n-import javax.persistence.*;\n-\n-\n-/** \n- * A very simple persistent entity that holds a \"message\", has a\n- * \"created\" field that is initialized to the time at which the\n- * object was created, and an id field that is initialized to the\n- * current time.\n- */\n-@Entity\n-public class Message {\n-    @Id\n-    private long id = System.currentTimeMillis();\n-\n-    @Basic\n-    private String message;\n-\n-    @Basic\n-    private Date created = new Date();\n-\n-    public Message() {\n-    }\n-\n-    public Message(String msg) {\n-        message = msg;\n-    }\n-\n-    public void setId(long val) {\n-        id = val;\n-    }\n-\n-    public long getId() {\n-        return id;\n-    }\n-\n-    public void setMessage(String msg) {\n-        message = msg;\n-    }\n-\n-    public String getMessage() {\n-        return message;\n-    }\n-\n-    public void setCreated(Date date) {\n-        created = date;\n-    }\n-\n-    public Date getCreated() {\n-        return created;\n-    }\n-}"},{"sha":"007f64d777c6dc6f66721399cbcb6a7d8caa47ac","filename":"openjpa-integration/osgi-itests/src/main/java/hellojpa/build.xml","status":"removed","additions":0,"deletions":23,"changes":23,"blob_url":"https://github.com/apache/openjpa/blob/dbe6745966ccd57b016ce50743abe43d918a83b9/openjpa-integration/osgi-itests/src/main/java/hellojpa/build.xml","raw_url":"https://github.com/apache/openjpa/raw/dbe6745966ccd57b016ce50743abe43d918a83b9/openjpa-integration/osgi-itests/src/main/java/hellojpa/build.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-integration/osgi-itests/src/main/java/hellojpa/build.xml?ref=dbe6745966ccd57b016ce50743abe43d918a83b9","patch":"@@ -1,23 +0,0 @@\n-<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n-<!--\n- Licensed to the Apache Software Foundation (ASF) under one\n- or more contributor license agreements.  See the NOTICE file\n- distributed with this work for additional information\n- regarding copyright ownership.  The ASF licenses this file\n- to you under the Apache License, Version 2.0 (the\n- \"License\"); you may not use this file except in compliance\n- with the License.  You may obtain a copy of the License at\n- \n- http://www.apache.org/licenses/LICENSE-2.0\n- \n- Unless required by applicable law or agreed to in writing,\n- software distributed under the License is distributed on an\n- \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- KIND, either express or implied.  See the License for the\n- specific language governing permissions and limitations\n- under the License.   \n--->\n-<project name=\"hellojpa\" default=\"run\">\n-    <property name=\"example\" value=\"hellojpa\"/>\n-    <import file=\"../build.xml\"/>\n-</project>"},{"sha":"bdb1c067f470e61647f5574e3709a1ff2e260f14","filename":"openjpa-integration/osgi-itests/src/main/resources/META-INF/persistence.xml","status":"removed","additions":0,"deletions":34,"changes":34,"blob_url":"https://github.com/apache/openjpa/blob/dbe6745966ccd57b016ce50743abe43d918a83b9/openjpa-integration/osgi-itests/src/main/resources/META-INF/persistence.xml","raw_url":"https://github.com/apache/openjpa/raw/dbe6745966ccd57b016ce50743abe43d918a83b9/openjpa-integration/osgi-itests/src/main/resources/META-INF/persistence.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-integration/osgi-itests/src/main/resources/META-INF/persistence.xml?ref=dbe6745966ccd57b016ce50743abe43d918a83b9","patch":"@@ -1,34 +0,0 @@\n-<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n-<!--\n- Licensed to the Apache Software Foundation (ASF) under one\n- or more contributor license agreements.  See the NOTICE file\n- distributed with this work for additional information\n- regarding copyright ownership.  The ASF licenses this file\n- to you under the Apache License, Version 2.0 (the\n- \"License\"); you may not use this file except in compliance\n- with the License.  You may obtain a copy of the License at\n- \n- http://www.apache.org/licenses/LICENSE-2.0\n- \n- Unless required by applicable law or agreed to in writing,\n- software distributed under the License is distributed on an\n- \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- KIND, either express or implied.  See the License for the\n- specific language governing permissions and limitations\n- under the License.   \n--->\n-<persistence xmlns=\"http://java.sun.com/xml/ns/persistence\"\n-    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n-    version=\"2.0\">\n-\n-    <persistence-unit name=\"hellojpa\">\n-        <description>PU for hellojpa</description>\n-        <class>hellojpa</class>\n-        <properties>\n-            <property name=\"openjpa.DynamicEnhancementAgent\" \n-                value=\"false\"/> \n-        </properties>\n-    </persistence-unit>\n-\n-</persistence>\n-"},{"sha":"ece1fa5058014101c0db4c790ce3390a42f2c7fa","filename":"openjpa-integration/osgi-itests/src/test/java/org/apache/openjpa/integration/osgi/itests/AbstractIntegrationTest.java","status":"removed","additions":0,"deletions":95,"changes":95,"blob_url":"https://github.com/apache/openjpa/blob/dbe6745966ccd57b016ce50743abe43d918a83b9/openjpa-integration/osgi-itests/src/test/java/org/apache/openjpa/integration/osgi/itests/AbstractIntegrationTest.java","raw_url":"https://github.com/apache/openjpa/raw/dbe6745966ccd57b016ce50743abe43d918a83b9/openjpa-integration/osgi-itests/src/test/java/org/apache/openjpa/integration/osgi/itests/AbstractIntegrationTest.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-integration/osgi-itests/src/test/java/org/apache/openjpa/integration/osgi/itests/AbstractIntegrationTest.java?ref=dbe6745966ccd57b016ce50743abe43d918a83b9","patch":"@@ -1,95 +0,0 @@\n-/*\n- * Licensed to the Apache Software Foundation (ASF) under one\n- * or more contributor license agreements.  See the NOTICE file\n- * distributed with this work for additional information\n- * regarding copyright ownership.  The ASF licenses this file\n- * to you under the Apache License, Version 2.0 (the\n- * \"License\"); you may not use this file except in compliance\n- * with the License.  You may obtain a copy of the License at\n- *\n- * http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing,\n- * software distributed under the License is distributed on an\n- * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- * KIND, either express or implied.  See the License for the\n- * specific language governing permissions and limitations\n- * under the License.\n- */\n-package org.apache.openjpa.integration.osgi.itests;\n-\n-import org.ops4j.pax.exam.CoreOptions;\n-import org.ops4j.pax.exam.Inject;\n-import org.ops4j.pax.exam.options.MavenArtifactProvisionOption;\n-import org.osgi.framework.Bundle;\n-import org.osgi.framework.BundleContext;\n-import org.osgi.framework.Constants;\n-import org.osgi.framework.Filter;\n-import org.osgi.framework.FrameworkUtil;\n-import org.osgi.framework.InvalidSyntaxException;\n-import org.osgi.util.tracker.ServiceTracker;\n-\n-public abstract class AbstractIntegrationTest {\n-\n-    public static final long DEFAULT_TIMEOUT = 30000;\n-\n-    @Inject\n-    protected BundleContext bundleContext;\n-\n-\n-    protected <T> T getOsgiService(Class<T> type, long timeout) {\n-        return getOsgiService(type, null, timeout);\n-    }\n-\n-    protected <T> T getOsgiService(Class<T> type) {\n-        return getOsgiService(type, null, DEFAULT_TIMEOUT);\n-    }\n-\n-    protected <T> T getOsgiService(Class<T> type, String filter, long timeout) {\n-        ServiceTracker tracker = null;\n-        try {\n-            String flt;\n-            if (filter != null) {\n-                if (filter.startsWith(\"(\")) {\n-                    flt = \"(&(\" + Constants.OBJECTCLASS + \"=\" + type.getName() + \")\" + filter + \")\";\n-                } else {\n-                    flt = \"(&(\" + Constants.OBJECTCLASS + \"=\" + type.getName() + \")(\" + filter + \"))\";\n-                }\n-            } else {\n-                flt = \"(\" + Constants.OBJECTCLASS + \"=\" + type.getName() + \")\";\n-            }\n-            Filter osgiFilter = FrameworkUtil.createFilter(flt);\n-            tracker = new ServiceTracker(bundleContext, osgiFilter, null);\n-            tracker.open();\n-            // Note that the tracker is not closed to keep the reference\n-            // This is buggy, has the service reference may change i think\n-            Object svc = type.cast(tracker.waitForService(timeout));\n-            if (svc == null) {\n-                throw new RuntimeException(\"Gave up waiting for service \" + flt);\n-            }\n-            return type.cast(svc);\n-        } catch (InvalidSyntaxException e) {\n-            throw new IllegalArgumentException(\"Invalid filter\", e);\n-        } catch (InterruptedException e) {\n-            throw new RuntimeException(e);\n-        }\n-    }\n-\n-    protected Bundle installBundle(String groupId, String artifactId) throws Exception {\n-        MavenArtifactProvisionOption mvnUrl = mavenBundle(groupId, artifactId);\n-        return bundleContext.installBundle(mvnUrl.getURL());\n-    }\n-\n-    protected Bundle getInstalledBundle(String symbolicName) {\n-        for (Bundle b : bundleContext.getBundles()) {\n-            if (symbolicName.equals(b.getSymbolicName())) {\n-                return b;\n-            }\n-        }\n-        return null;\n-    }\n-\n-    public static MavenArtifactProvisionOption mavenBundle(String groupId, String artifactId) {\n-        return CoreOptions.mavenBundle().groupId(groupId).artifactId(artifactId).versionAsInProject();\n-    }\n-}"},{"sha":"a623fd35e710e0c7fb682d75a8a660d22f0703f1","filename":"openjpa-integration/osgi-itests/src/test/java/org/apache/openjpa/integration/osgi/itests/TestOpenJPA.java","status":"removed","additions":0,"deletions":121,"changes":121,"blob_url":"https://github.com/apache/openjpa/blob/dbe6745966ccd57b016ce50743abe43d918a83b9/openjpa-integration/osgi-itests/src/test/java/org/apache/openjpa/integration/osgi/itests/TestOpenJPA.java","raw_url":"https://github.com/apache/openjpa/raw/dbe6745966ccd57b016ce50743abe43d918a83b9/openjpa-integration/osgi-itests/src/test/java/org/apache/openjpa/integration/osgi/itests/TestOpenJPA.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-integration/osgi-itests/src/test/java/org/apache/openjpa/integration/osgi/itests/TestOpenJPA.java?ref=dbe6745966ccd57b016ce50743abe43d918a83b9","patch":"@@ -1,121 +0,0 @@\n-/*\n- * Licensed to the Apache Software Foundation (ASF) under one\n- * or more contributor license agreements.  See the NOTICE file\n- * distributed with this work for additional information\n- * regarding copyright ownership.  The ASF licenses this file\n- * to you under the Apache License, Version 2.0 (the\n- * \"License\"); you may not use this file except in compliance\n- * with the License.  You may obtain a copy of the License at\n- *\n- *   http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing,\n- * software distributed under the License is distributed on an\n- * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- * KIND, either express or implied.  See the License for the\n- * specific language governing permissions and limitations\n- * under the License.\n- */\n-package org.apache.openjpa.integration.osgi.itests;\n-\n-import static org.junit.Assert.assertEquals;\n-import static org.junit.Assert.assertNotNull;\n-import static org.junit.Assert.assertNull;\n-import static org.junit.Assert.assertTrue;\n-import static org.junit.Assert.fail;\n-\n-import javax.persistence.EntityManagerFactory;\n-import javax.persistence.Persistence;\n-\n-import org.junit.Test;\n-import org.junit.runner.RunWith;\n-import static org.ops4j.pax.exam.CoreOptions.felix;\n-import static org.ops4j.pax.exam.CoreOptions.mavenConfiguration;\n-import static org.ops4j.pax.exam.CoreOptions.options;\n-import static org.ops4j.pax.exam.CoreOptions.systemProperty;\n-import org.ops4j.pax.exam.Option;\n-import org.ops4j.pax.exam.OptionUtils;\n-import static org.ops4j.pax.exam.container.def.PaxRunnerOptions.profile;\n-import static org.ops4j.pax.exam.container.def.PaxRunnerOptions.vmOption;\n-import org.ops4j.pax.exam.junit.JUnit4TestRunner;\n-import org.osgi.framework.Bundle;\n-\n-\n-@RunWith(JUnit4TestRunner.class)\n-public class TestOpenJPA extends AbstractIntegrationTest {\n-\n-    @Test\n-    public void testExamples() throws Exception {\n-        System.out.println(\"********** testExamples starting\");\n-        System.out.println(\"***** Checking that openjpa-examples is installed\");\n-        // check for our openjpa-examples via the SymbolicName\n-        Bundle bundle = getInstalledBundle(\"org.apache.openjpa.openjpa-examples\");\n-        assertNotNull(bundle);\n-        System.out.println(\"***** Starting openjpa-examples bundle\");\n-        bundle.start();\n-        System.out.println(\"***** Stopping openjpa-examples bundle\");\n-        bundle.stop();\n-        System.out.println(\"********** testExamples returning\");\n-    }\n-    \n-    @Test\n-    public void testEMF() throws Exception {\n-        System.out.println(\"********** testEMF starting\");\n-        System.out.println(\"***** Creating a EMF\");\n-        EntityManagerFactory emf = Persistence.\n-            createEntityManagerFactory(\"hellojpa\", System.getProperties());\n-        assertNotNull(emf);\n-        System.out.println(\"***** After createEMF\");\n-        //OpenJPAConfiguration conf = emf.getConfiguration();\n-        //System.out.println(\"***** After Config *****\");\n-        //assertNotNull(conf);\n-        System.out.println(\"********** testEMF returning\");\n-    }\n-\n-    @org.ops4j.pax.exam.junit.Configuration\n-    public static Option[] configuration() {\n-        Option[] options = options(\n-            // Log\n-            mavenBundle(\"org.ops4j.pax.logging\", \"pax-logging-api\"),\n-            mavenBundle(\"org.ops4j.pax.logging\", \"pax-logging-service\"),\n-            // Felix Config Admin\n-            mavenBundle(\"org.apache.felix\", \"org.apache.felix.configadmin\"),\n-            // Maven url handler\n-            mavenBundle(\"org.ops4j.pax.url\", \"pax-url-mvn\"),\n-\n-            // this is how you set the default log level when using pax logging\n-            systemProperty(\"org.ops4j.pax.logging.DefaultServiceLog.level\")\n-                .value(\"DEBUG\"),\n-\n-            // OpenJPA runtime depends\n-            mavenBundle(\"org.apache.geronimo.specs\", \"geronimo-jpa_2.0_spec\"),\n-            mavenBundle(\"org.apache.geronimo.specs\",\n-                \"geronimo-validation_1.0_spec\"),\n-            //mavenBundle(\"org.apache.geronimo.specs\", \"geronimo-jms_1.1_spec\"),\n-            //mavenBundle(\"org.apache.geronimo.specs\", \"geronimo-jta_1.1_spec\"),\n-            mavenBundle(\"commons-collections\", \"commons-collections\"),\n-            mavenBundle(\"commons-lang\", \"commons-lang\"),\n-            mavenBundle(\"commons-pool\", \"commons-pool\"),\n-            mavenBundle(\"org.apache.openjpa\", \"openjpa\"),\n-            \n-            // Testcase depends\n-            mavenBundle(\"org.apache.derby\", \"derby\"),\n-            mavenBundle(\"org.apache.servicemix.bundles\",\n-                \"org.apache.servicemix.bundles.commons-dbcp\"),\n-            mavenBundle(\"org.apache.openjpa\", \"openjpa-examples\"),\n-            //vmOption(\"-Xdebug -Xrunjdwp:transport=dt_socket,\n-            //server=y,suspend=y,address=5005\"),\n-\n-            felix() //, equinox(), knopflerfish()\n-        );\n-\n-        // use config generated by the Maven plugin (until PAXEXAM-62/64 fixed)\n-        if (TestOpenJPA.class.getClassLoader().getResource(\n-                \"META-INF/maven/paxexam-config.args\") != null) {\n-            options = OptionUtils.combine(options, mavenConfiguration());\n-        }\n-\n-        return options;\n-    }\n-}\n-"},{"sha":"6ceab49d4e8360fbfb69154df8327c8ac4289dd2","filename":"openjpa-integration/osgi-itests/src/test/resources/log4j.properties","status":"removed","additions":0,"deletions":33,"changes":33,"blob_url":"https://github.com/apache/openjpa/blob/dbe6745966ccd57b016ce50743abe43d918a83b9/openjpa-integration/osgi-itests/src/test/resources/log4j.properties","raw_url":"https://github.com/apache/openjpa/raw/dbe6745966ccd57b016ce50743abe43d918a83b9/openjpa-integration/osgi-itests/src/test/resources/log4j.properties","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-integration/osgi-itests/src/test/resources/log4j.properties?ref=dbe6745966ccd57b016ce50743abe43d918a83b9","patch":"@@ -1,33 +0,0 @@\n-################################################################################\n-#\n-#    Licensed to the Apache Software Foundation (ASF) under one or more\n-#    contributor license agreements.  See the NOTICE file distributed with\n-#    this work for additional information regarding copyright ownership.\n-#    The ASF licenses this file to You under the Apache License, Version 2.0\n-#    (the \"License\"); you may not use this file except in compliance with\n-#    the License.  You may obtain a copy of the License at\n-#\n-#       http://www.apache.org/licenses/LICENSE-2.0\n-#\n-#    Unless required by applicable law or agreed to in writing, software\n-#    distributed under the License is distributed on an \"AS IS\" BASIS,\n-#    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n-#    See the License for the specific language governing permissions and\n-#    limitations under the License.\n-#\n-################################################################################\n-\n-# Root logger\n-log4j.rootLogger=DEBUG, stdout\n-\n-# CONSOLE appender not used by default\n-log4j.appender.stdout=org.apache.log4j.ConsoleAppender\n-log4j.appender.stdout.layout=org.apache.log4j.PatternLayout\n-log4j.appender.stdout.layout.ConversionPattern=%d{ABSOLUTE} | %-5.5p | %-16.16t | %-32.32c{1} | %-32.32C %4L | %m%n\n-\n-# File appender\n-log4j.appender.out=org.apache.log4j.FileAppender\n-log4j.appender.out.layout=org.apache.log4j.PatternLayout\n-log4j.appender.out.layout.ConversionPattern=%d{ABSOLUTE} | %-5.5p | %-16.16t | %-32.32c{1} | %-32.32C %4L | %m%n\n-log4j.appender.out.file=${karaf.base}/data/log/karaf.log\n-log4j.appender.out.append=true"},{"sha":"a3b9687004f5fbbc07c336554a139ecb55afb6e2","filename":"openjpa-integration/pom.xml","status":"modified","additions":0,"deletions":1,"changes":1,"blob_url":"https://github.com/apache/openjpa/blob/ce0886e110de5e2a772dd4d33f5f328aa4bcaba4/openjpa-integration/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/ce0886e110de5e2a772dd4d33f5f328aa4bcaba4/openjpa-integration/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-integration/pom.xml?ref=ce0886e110de5e2a772dd4d33f5f328aa4bcaba4","patch":"@@ -35,6 +35,5 @@\n         <module>examples</module>\n         <module>tck</module>\n         <module>validation</module>\n-        <!-- <module>osgi-itests</module> -->\n     </modules>\n </project>"}]}

