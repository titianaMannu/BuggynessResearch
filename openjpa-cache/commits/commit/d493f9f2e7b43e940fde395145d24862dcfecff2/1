{"sha":"d493f9f2e7b43e940fde395145d24862dcfecff2","node_id":"MDY6Q29tbWl0MjA2MzY0OmQ0OTNmOWYyZTdiNDNlOTQwZmRlMzk1MTQ1ZDI0ODYyZGNmZWNmZjI=","commit":{"author":{"name":"Marc Prud'hommeaux","email":"mprudhom@apache.org","date":"2007-08-21T15:47:11Z"},"committer":{"name":"Marc Prud'hommeaux","email":"mprudhom@apache.org","date":"2007-08-21T15:47:11Z"},"message":"OPENJPA-256 fixed for 1.0.0 branch\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/branches/1.0.0@568173 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"f57a8cbbe1367b0cbe081a17fdb4b4dafa3032c9","url":"https://api.github.com/repos/apache/openjpa/git/trees/f57a8cbbe1367b0cbe081a17fdb4b4dafa3032c9"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/d493f9f2e7b43e940fde395145d24862dcfecff2","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/d493f9f2e7b43e940fde395145d24862dcfecff2","html_url":"https://github.com/apache/openjpa/commit/d493f9f2e7b43e940fde395145d24862dcfecff2","comments_url":"https://api.github.com/repos/apache/openjpa/commits/d493f9f2e7b43e940fde395145d24862dcfecff2/comments","author":null,"committer":null,"parents":[{"sha":"66f7dc69e76c6d26b7fdd851d24fc53875e26a9c","url":"https://api.github.com/repos/apache/openjpa/commits/66f7dc69e76c6d26b7fdd851d24fc53875e26a9c","html_url":"https://github.com/apache/openjpa/commit/66f7dc69e76c6d26b7fdd851d24fc53875e26a9c"}],"stats":{"total":17,"additions":17,"deletions":0},"files":[{"sha":"093a81065af959036cb5b963128a993181e6acff","filename":"openjpa-kernel/src/main/java/org/apache/openjpa/conf/QueryCompilationCacheValue.java","status":"modified","additions":13,"deletions":0,"changes":13,"blob_url":"https://github.com/apache/openjpa/blob/d493f9f2e7b43e940fde395145d24862dcfecff2/openjpa-kernel/src/main/java/org/apache/openjpa/conf/QueryCompilationCacheValue.java","raw_url":"https://github.com/apache/openjpa/raw/d493f9f2e7b43e940fde395145d24862dcfecff2/openjpa-kernel/src/main/java/org/apache/openjpa/conf/QueryCompilationCacheValue.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/java/org/apache/openjpa/conf/QueryCompilationCacheValue.java?ref=d493f9f2e7b43e940fde395145d24862dcfecff2","patch":"@@ -26,6 +26,7 @@\n import org.apache.openjpa.lib.conf.PluginValue;\r\n import org.apache.openjpa.lib.util.concurrent.ConcurrentMap;\r\n import org.apache.openjpa.lib.util.concurrent.ConcurrentHashMap;\r\n+import org.apache.openjpa.lib.util.ParseException;\r\n import org.apache.openjpa.util.CacheMap;\r\n \r\n /**\r\n@@ -58,6 +59,18 @@ public Object newInstance(String clsName, Class type,\n         \r\n         try {\r\n             map = (Map) super.newInstance(clsName, type, conf, fatal);\r\n+        } catch (ParseException pe) {\r\n+            // OPENJPA256: this class differs from most plugins in that\r\n+            // the plugin type is the standard java interface Map.class (rather\r\n+            // than an openjpa-specific interface), which means that the\r\n+            // ClassLoader used to load the implementation will be the system\r\n+            // class loader; this presents a problem if OpenJPA is not in the\r\n+            // system classpath, so work around the problem by catching\r\n+            // the ParseException (which is what we wrap the\r\n+            // ClassNotFoundException in) and try again, this time using\r\n+            // this class' ClassLoader.\r\n+            map = (Map) super.newInstance(clsName,\r\n+                QueryCompilationCacheValue.class, conf, fatal);\r\n         } catch (IllegalArgumentException iae) {\r\n             // OPENJPA256: this class differs from most plugins in that\r\n             // the plugin type is the standard java interface Map.class (rather\r"},{"sha":"de76446c3e19fc2f5f4e35de560287e33b024155","filename":"openjpa-project/CHANGES.txt","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/apache/openjpa/blob/d493f9f2e7b43e940fde395145d24862dcfecff2/openjpa-project/CHANGES.txt","raw_url":"https://github.com/apache/openjpa/raw/d493f9f2e7b43e940fde395145d24862dcfecff2/openjpa-project/CHANGES.txt","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-project/CHANGES.txt?ref=d493f9f2e7b43e940fde395145d24862dcfecff2","patch":"@@ -282,6 +282,8 @@ Bugs fixed\n        * [OPENJPA-321] - DB2 ABS Casting problem\n        * [OPENJPA-322] - Timezone on the Calendar object lost in proxying\n        * [OPENJPA-323] - Cleanup some message text\n+       * [OPENJPA-256] - java.lang.ClassNotFoundException:\n+         org.apache.openjpa.util.CacheMap in a jetty spring environment\n \n Sub-task\n "},{"sha":"a8e8bcbd4e81e4bf4bb27afdda985ba68e330284","filename":"openjpa-project/RELEASE-NOTES.html","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/apache/openjpa/blob/d493f9f2e7b43e940fde395145d24862dcfecff2/openjpa-project/RELEASE-NOTES.html","raw_url":"https://github.com/apache/openjpa/raw/d493f9f2e7b43e940fde395145d24862dcfecff2/openjpa-project/RELEASE-NOTES.html","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-project/RELEASE-NOTES.html?ref=d493f9f2e7b43e940fde395145d24862dcfecff2","patch":"@@ -275,6 +275,8 @@ <h2> Bugs fixed\n </li>\n <li>[<a href='http://issues.apache.org/jira/browse/OPENJPA-323'>OPENJPA-323</a>] - Cleanup some message text\n </li>\n+<li>[<a href='http://issues.apache.org/jira/browse/OPENJPA-256'>OPENJPA-256</a>] - java.lang.ClassNotFoundException: org.apache.openjpa.util.CacheMap in a jetty spring environment\n+</li>\n </ul>\n \n <h2> Sub-task"}]}

