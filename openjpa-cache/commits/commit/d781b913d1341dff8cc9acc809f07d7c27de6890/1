{"sha":"d781b913d1341dff8cc9acc809f07d7c27de6890","node_id":"MDY6Q29tbWl0MjA2MzY0OmQ3ODFiOTEzZDEzNDFkZmY4Y2M5YWNjODA5ZjA3ZDdjMjdkZTY4OTA=","commit":{"author":{"name":"Catalina Wei","email":"fancy@apache.org","date":"2010-06-14T01:47:08Z"},"committer":{"name":"Catalina Wei","email":"fancy@apache.org","date":"2010-06-14T01:47:08Z"},"message":"OPENJPA-1697: A EnumValueHandler strategy along with XmlType annotation incorrectly mapped to XmlType in create table DDL\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@954345 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"3d00c19fa8e85bddaca8b77377609ad8c6dccff4","url":"https://api.github.com/repos/apache/openjpa/git/trees/3d00c19fa8e85bddaca8b77377609ad8c6dccff4"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/d781b913d1341dff8cc9acc809f07d7c27de6890","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/d781b913d1341dff8cc9acc809f07d7c27de6890","html_url":"https://github.com/apache/openjpa/commit/d781b913d1341dff8cc9acc809f07d7c27de6890","comments_url":"https://api.github.com/repos/apache/openjpa/commits/d781b913d1341dff8cc9acc809f07d7c27de6890/comments","author":null,"committer":null,"parents":[{"sha":"493bfe0e1426297ec4dee448bd10232529722c22","url":"https://api.github.com/repos/apache/openjpa/commits/493bfe0e1426297ec4dee448bd10232529722c22","html_url":"https://github.com/apache/openjpa/commit/493bfe0e1426297ec4dee448bd10232529722c22"}],"stats":{"total":10,"additions":6,"deletions":4},"files":[{"sha":"6d605d4df9f4cbca954820fff3790eeb736016e5","filename":"openjpa-persistence-jdbc/src/main/java/org/apache/openjpa/persistence/jdbc/AnnotationPersistenceMappingParser.java","status":"modified","additions":6,"deletions":4,"changes":10,"blob_url":"https://github.com/apache/openjpa/blob/d781b913d1341dff8cc9acc809f07d7c27de6890/openjpa-persistence-jdbc/src/main/java/org/apache/openjpa/persistence/jdbc/AnnotationPersistenceMappingParser.java","raw_url":"https://github.com/apache/openjpa/raw/d781b913d1341dff8cc9acc809f07d7c27de6890/openjpa-persistence-jdbc/src/main/java/org/apache/openjpa/persistence/jdbc/AnnotationPersistenceMappingParser.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/main/java/org/apache/openjpa/persistence/jdbc/AnnotationPersistenceMappingParser.java?ref=d781b913d1341dff8cc9acc809f07d7c27de6890","patch":"@@ -1537,11 +1537,13 @@ protected void parseColumns(FieldMapping fm,\n         // cache the JAXB XmlType class if it is present so we do not\n         // have a hard-wired dependency on JAXB here\n         Class xmlTypeClass = null;\n-        try {\n-            xmlTypeClass = Class.forName(\"javax.xml.bind.annotation.XmlType\");\n-        } catch (Exception e) {\n+        if (fm.getValueInfo().getStrategy() != null &&\n+            fm.getValueInfo().getStrategy().equals(\"org.apache.openjpa.jdbc.meta.strats.XMLValueHandler\")) {\n+            try {\n+                xmlTypeClass = Class.forName(\"javax.xml.bind.annotation.XmlType\");\n+            } catch (Exception e) {\n+            }\n         }\n-\n         int unique = 0;\n         DBIdentifier sSecondary = DBIdentifier.NULL;\n         for (int i = 0; i < pcols.length; i++) {"}]}

