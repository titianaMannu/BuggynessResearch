{"sha":"daadd62bd2b1b740e24787e4bf85bf48f4f21fa2","node_id":"MDY6Q29tbWl0MjA2MzY0OmRhYWRkNjJiZDJiMWI3NDBlMjQ3ODdlNGJmODViZjQ4ZjRmMjFmYTI=","commit":{"author":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2009-09-17T17:29:01Z"},"committer":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2009-09-17T17:29:01Z"},"message":"OPENJPA-1213 Use OpenJPAVersion for handling expected test result differences\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@816295 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"84a9f33d1d9578817d27f4c12794b74b4b87b1be","url":"https://api.github.com/repos/apache/openjpa/git/trees/84a9f33d1d9578817d27f4c12794b74b4b87b1be"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/daadd62bd2b1b740e24787e4bf85bf48f4f21fa2","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/daadd62bd2b1b740e24787e4bf85bf48f4f21fa2","html_url":"https://github.com/apache/openjpa/commit/daadd62bd2b1b740e24787e4bf85bf48f4f21fa2","comments_url":"https://api.github.com/repos/apache/openjpa/commits/daadd62bd2b1b740e24787e4bf85bf48f4f21fa2/comments","author":null,"committer":null,"parents":[{"sha":"cbe18c2f74e096ddf8930632c491d7ae5aceccfa","url":"https://api.github.com/repos/apache/openjpa/commits/cbe18c2f74e096ddf8930632c491d7ae5aceccfa","html_url":"https://github.com/apache/openjpa/commit/cbe18c2f74e096ddf8930632c491d7ae5aceccfa"}],"stats":{"total":14,"additions":10,"deletions":4},"files":[{"sha":"3b8c2c4b4f7af50aa5ffe315fc70d0a9c9882e28","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/compat/TestEmbeddableSuperclass.java","status":"modified","additions":10,"deletions":4,"changes":14,"blob_url":"https://github.com/apache/openjpa/blob/daadd62bd2b1b740e24787e4bf85bf48f4f21fa2/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/compat/TestEmbeddableSuperclass.java","raw_url":"https://github.com/apache/openjpa/raw/daadd62bd2b1b740e24787e4bf85bf48f4f21fa2/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/compat/TestEmbeddableSuperclass.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/compat/TestEmbeddableSuperclass.java?ref=daadd62bd2b1b740e24787e4bf85bf48f4f21fa2","patch":"@@ -20,6 +20,7 @@\n \n import java.sql.Types;\n \n+import org.apache.openjpa.conf.OpenJPAVersion;\n import org.apache.openjpa.jdbc.conf.JDBCConfiguration;\n import org.apache.openjpa.jdbc.meta.ClassMapping;\n import org.apache.openjpa.jdbc.meta.FieldMapping;\n@@ -66,10 +67,15 @@ public void testRelationMappings() {\n         assertTrue(fm.getStrategy() instanceof RelationFieldStrategy);\n \n         fm = cls.getFieldMapping(\"sup\");\n-        // OPENJPA-1214 - OpenJPA 2 returns a EmbedFieldStrategy instead of a \n-        // RelationFieldStrategy as in prior releases.\n-        // assertTrue(fm.getStrategy() instanceof RelationFieldStrategy);\n-        assertTrue(fm.getStrategy() instanceof EmbedFieldStrategy);\n+\n+        if (OpenJPAVersion.MAJOR_RELEASE >= 2) {\n+            // OPENJPA-1214 - OpenJPA 2 returns a EmbedFieldStrategy instead of\n+            // a RelationFieldStrategy as in prior releases.\n+            assertTrue(fm.getStrategy() instanceof EmbedFieldStrategy);\n+        } else {\n+            // Prior OpenJPA 1.2/1.3 behavior\n+            assertTrue(fm.getStrategy() instanceof RelationFieldStrategy);\n+        }\n     } \n }\n "}]}

