{"sha":"e1e96406e898ba85af2f6fc47939522d6e8b9758","node_id":"MDY6Q29tbWl0MjA2MzY0OmUxZTk2NDA2ZTg5OGJhODVhZjJmNmZjNDc5Mzk1MjJkNmU4Yjk3NTg=","commit":{"author":{"name":"Marc Prud'hommeaux","email":"mprudhom@apache.org","date":"2006-09-28T00:33:48Z"},"committer":{"name":"Marc Prud'hommeaux","email":"mprudhom@apache.org","date":"2006-09-28T00:33:48Z"},"message":"Only treat methods as persistent by default if there is a setter for the method in the described class.\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/openjpa/trunk@450649 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"6b522fb21f732ab8a382756c354aa1431d0ee4db","url":"https://api.github.com/repos/apache/openjpa/git/trees/6b522fb21f732ab8a382756c354aa1431d0ee4db"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/e1e96406e898ba85af2f6fc47939522d6e8b9758","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/e1e96406e898ba85af2f6fc47939522d6e8b9758","html_url":"https://github.com/apache/openjpa/commit/e1e96406e898ba85af2f6fc47939522d6e8b9758","comments_url":"https://api.github.com/repos/apache/openjpa/commits/e1e96406e898ba85af2f6fc47939522d6e8b9758/comments","author":null,"committer":null,"parents":[{"sha":"7baaaf4b760248e0e5fdf63903b00f15a4485f78","url":"https://api.github.com/repos/apache/openjpa/commits/7baaaf4b760248e0e5fdf63903b00f15a4485f78","html_url":"https://github.com/apache/openjpa/commit/7baaaf4b760248e0e5fdf63903b00f15a4485f78"}],"stats":{"total":15,"additions":15,"deletions":0},"files":[{"sha":"b077d68192fb1aafdf9163485dc2ec2bbb7adef9","filename":"openjpa-persistence/src/main/java/org/apache/openjpa/persistence/PersistenceMetaDataDefaults.java","status":"modified","additions":15,"deletions":0,"changes":15,"blob_url":"https://github.com/apache/openjpa/blob/e1e96406e898ba85af2f6fc47939522d6e8b9758/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/PersistenceMetaDataDefaults.java","raw_url":"https://github.com/apache/openjpa/raw/e1e96406e898ba85af2f6fc47939522d6e8b9758/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/PersistenceMetaDataDefaults.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence/src/main/java/org/apache/openjpa/persistence/PersistenceMetaDataDefaults.java?ref=e1e96406e898ba85af2f6fc47939522d6e8b9758","patch":"@@ -245,6 +245,21 @@ protected boolean isDefaultPersistent(ClassMetaData meta, Member member,\n         int mods = member.getModifiers();\n         if (Modifier.isTransient(mods))\n             return false;\n+\n+        if (member instanceof Method) {\n+            try {\n+                // check for setters for methods\n+                Method setter = meta.getDescribedType().getDeclaredMethod(\"set\"\n+                    + name.substring(0, 1).toUpperCase() + name.substring(1),\n+                    new Class[] { ((Method) member).getReturnType() });\n+                if (setter == null)\n+                    return false;\n+            } catch (Exception e) {\n+                // e.g., NoSuchMethodException\n+                return false;\n+            }\n+        }\n+\n         PersistenceStrategy strat = getPersistenceStrategy(null, member);\n         if (strat == null || strat == PersistenceStrategy.TRANSIENT)\n             return false;"}]}

