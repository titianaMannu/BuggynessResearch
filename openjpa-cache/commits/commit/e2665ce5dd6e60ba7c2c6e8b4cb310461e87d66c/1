{"sha":"e2665ce5dd6e60ba7c2c6e8b4cb310461e87d66c","node_id":"MDY6Q29tbWl0MjA2MzY0OmUyNjY1Y2U1ZGQ2ZTYwYmE3YzJjNmU4YjRjYjMxMDQ2MWU4N2Q2NmM=","commit":{"author":{"name":"A. Abram White","email":"awhite@apache.org","date":"2007-01-18T23:21:41Z"},"committer":{"name":"A. Abram White","email":"awhite@apache.org","date":"2007-01-18T23:21:41Z"},"message":"Use the current thread's classloader in addition to the configuration class' \nloader when loading globals.\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/openjpa/trunk@497634 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"d43e30152a9de6777d46c13c054409e0f4669712","url":"https://api.github.com/repos/apache/openjpa/git/trees/d43e30152a9de6777d46c13c054409e0f4669712"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/e2665ce5dd6e60ba7c2c6e8b4cb310461e87d66c","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/e2665ce5dd6e60ba7c2c6e8b4cb310461e87d66c","html_url":"https://github.com/apache/openjpa/commit/e2665ce5dd6e60ba7c2c6e8b4cb310461e87d66c","comments_url":"https://api.github.com/repos/apache/openjpa/commits/e2665ce5dd6e60ba7c2c6e8b4cb310461e87d66c/comments","author":null,"committer":null,"parents":[{"sha":"a40baca27321510f108fade1d09a2c043ec52634","url":"https://api.github.com/repos/apache/openjpa/commits/a40baca27321510f108fade1d09a2c043ec52634","html_url":"https://github.com/apache/openjpa/commit/a40baca27321510f108fade1d09a2c043ec52634"}],"stats":{"total":7,"additions":5,"deletions":2},"files":[{"sha":"0b997fdbce99c4842e0fda35141f8fcf7c4d96bd","filename":"openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/ConfigurationImpl.java","status":"modified","additions":5,"deletions":2,"changes":7,"blob_url":"https://github.com/apache/openjpa/blob/e2665ce5dd6e60ba7c2c6e8b4cb310461e87d66c/openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/ConfigurationImpl.java","raw_url":"https://github.com/apache/openjpa/raw/e2665ce5dd6e60ba7c2c6e8b4cb310461e87d66c/openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/ConfigurationImpl.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/ConfigurationImpl.java?ref=e2665ce5dd6e60ba7c2c6e8b4cb310461e87d66c","patch":"@@ -55,6 +55,7 @@\n import org.apache.openjpa.lib.log.NoneLogFactory;\n import org.apache.openjpa.lib.util.Closeable;\n import org.apache.openjpa.lib.util.Localizer;\n+import org.apache.openjpa.lib.util.MultiClassLoader;\n import org.apache.openjpa.lib.util.ParseException;\n import org.apache.openjpa.lib.util.Services;\n import org.apache.openjpa.lib.util.StringDistance;\n@@ -158,8 +159,10 @@ public ConfigurationImpl(boolean loadGlobals) {\n      * {@link ProductDerivation}s, and from System properties.\n      */\n     public boolean loadGlobals() {\n-        ConfigurationProvider provider = ProductDerivations.loadGlobals\n-            (getClass().getClassLoader());\n+        MultiClassLoader loader = new MultiClassLoader();\n+        loader.addClassLoader(Thread.currentThread().getContextClassLoader());\n+        loader.addClassLoader(getClass().getClassLoader());\n+        ConfigurationProvider provider = ProductDerivations.loadGlobals(loader);\n         if (provider != null)\n             provider.setInto(this);\n "}]}

