{"sha":"e56be85085acfc32977ddd3dc1bbb63c2f7ebd71","node_id":"MDY6Q29tbWl0MjA2MzY0OmU1NmJlODUwODVhY2ZjMzI5NzdkZGQzZGMxYmJiNjNjMmY3ZWJkNzE=","commit":{"author":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2010-03-16T20:08:28Z"},"committer":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2010-03-16T20:08:28Z"},"message":"OPENJPA-1097 Remove duplicate code in DetachManager and cleanup comments/traces in tests\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@923958 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"ed7db500010bb6a7b8fa52b08528b5571202768e","url":"https://api.github.com/repos/apache/openjpa/git/trees/ed7db500010bb6a7b8fa52b08528b5571202768e"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/e56be85085acfc32977ddd3dc1bbb63c2f7ebd71","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/e56be85085acfc32977ddd3dc1bbb63c2f7ebd71","html_url":"https://github.com/apache/openjpa/commit/e56be85085acfc32977ddd3dc1bbb63c2f7ebd71","comments_url":"https://api.github.com/repos/apache/openjpa/commits/e56be85085acfc32977ddd3dc1bbb63c2f7ebd71/comments","author":null,"committer":null,"parents":[{"sha":"0f5508e6804db6fb1e8ee3087dd0dc41a48e6a4f","url":"https://api.github.com/repos/apache/openjpa/commits/0f5508e6804db6fb1e8ee3087dd0dc41a48e6a4f","html_url":"https://github.com/apache/openjpa/commit/0f5508e6804db6fb1e8ee3087dd0dc41a48e6a4f"}],"stats":{"total":6,"additions":3,"deletions":3},"files":[{"sha":"b309ab908cc34c604c31f8ac5a609ee7d563d3c5","filename":"openjpa-kernel/src/main/java/org/apache/openjpa/kernel/DetachManager.java","status":"modified","additions":0,"deletions":1,"changes":1,"blob_url":"https://github.com/apache/openjpa/blob/e56be85085acfc32977ddd3dc1bbb63c2f7ebd71/openjpa-kernel/src/main/java/org/apache/openjpa/kernel/DetachManager.java","raw_url":"https://github.com/apache/openjpa/raw/e56be85085acfc32977ddd3dc1bbb63c2f7ebd71/openjpa-kernel/src/main/java/org/apache/openjpa/kernel/DetachManager.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/java/org/apache/openjpa/kernel/DetachManager.java?ref=e56be85085acfc32977ddd3dc1bbb63c2f7ebd71","patch":"@@ -568,7 +568,6 @@ public void reproxy(DetachedStateManager dsm) {\n                             proxy.getChangeTracker().stopTracking();\n                         proxy.setOwner(dsm, (dsm == null) ? -1 : fmd.getIndex());\n                     }\n-                    sm.provideField(getDetachedPersistenceCapable(), this, fmd.getIndex());\n                 }\n             }\n             clear();"},{"sha":"9ea4c0ce41339a6a2420daf717878cd714cca2dc","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/detach/TestDetachNoProxy.java","status":"modified","additions":3,"deletions":2,"changes":5,"blob_url":"https://github.com/apache/openjpa/blob/e56be85085acfc32977ddd3dc1bbb63c2f7ebd71/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/detach/TestDetachNoProxy.java","raw_url":"https://github.com/apache/openjpa/raw/e56be85085acfc32977ddd3dc1bbb63c2f7ebd71/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/detach/TestDetachNoProxy.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/detach/TestDetachNoProxy.java?ref=e56be85085acfc32977ddd3dc1bbb63c2f7ebd71","patch":"@@ -159,7 +159,7 @@ public void testDetachAll() {\n         em.detachAll(e20List.get(0), e20List.get(1), e20List.get(2));\n         for (int i=0; i<numEntities; i++) {\n             if (log.isTraceEnabled())\n-                log.trace(\"** after EM.clear() verify Entity20(\" + i + \")\");\n+                log.trace(\"** after EM.detachAll() verify e20List(\" + i + \")\");\n             Entity20 e20 = e20List.get(i);\n             // entity should not have any proxy classes (in-place updated) and is detached\n             assertFalse(em.contains(e20));\n@@ -171,7 +171,7 @@ public void testDetachAll() {\n     }\n \n     /*\n-     * Verify that after EM.clear() in-place detached entities do not contain any proxy classes.\n+     * Verify that after EM.clear() entities still contain proxy classes.\n      */\n     public void testClear() {\n         if (log.isTraceEnabled())\n@@ -191,6 +191,7 @@ public void testClear() {\n         }\n \n         em.clear();\n+\n         for (int i=0; i<numEntities; i++) {\n             if (log.isTraceEnabled())\n                 log.trace(\"** after EM.clear() verify Entity20(\" + i + \")\");"}]}

