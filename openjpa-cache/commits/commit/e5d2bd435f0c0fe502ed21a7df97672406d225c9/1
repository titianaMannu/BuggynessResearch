{"sha":"e5d2bd435f0c0fe502ed21a7df97672406d225c9","node_id":"MDY6Q29tbWl0MjA2MzY0OmU1ZDJiZDQzNWYwYzBmZTUwMmVkMjFhN2RmOTc2NzI0MDZkMjI1Yzk=","commit":{"author":{"name":"Milosz Tylenda","email":"mtylenda@apache.org","date":"2010-01-03T15:10:42Z"},"committer":{"name":"Milosz Tylenda","email":"mtylenda@apache.org","date":"2010-01-03T15:10:42Z"},"message":"OPENJPA-1248: PostgreSQL needs truncating LOB content on update when new content is shorter than the existing content.\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@895408 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"43d1f1043c9343c81c9735f1da8038eb199a3c89","url":"https://api.github.com/repos/apache/openjpa/git/trees/43d1f1043c9343c81c9735f1da8038eb199a3c89"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/e5d2bd435f0c0fe502ed21a7df97672406d225c9","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/e5d2bd435f0c0fe502ed21a7df97672406d225c9","html_url":"https://github.com/apache/openjpa/commit/e5d2bd435f0c0fe502ed21a7df97672406d225c9","comments_url":"https://api.github.com/repos/apache/openjpa/commits/e5d2bd435f0c0fe502ed21a7df97672406d225c9/comments","author":null,"committer":null,"parents":[{"sha":"5b7c20eacb99d974a48fcb6bc585ef6fd9f671d5","url":"https://api.github.com/repos/apache/openjpa/commits/5b7c20eacb99d974a48fcb6bc585ef6fd9f671d5","html_url":"https://github.com/apache/openjpa/commit/5b7c20eacb99d974a48fcb6bc585ef6fd9f671d5"}],"stats":{"total":3,"additions":2,"deletions":1},"files":[{"sha":"2a608419e895e9e9247ad82c3e599c0c858ead3e","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/PostgresDictionary.java","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/apache/openjpa/blob/e5d2bd435f0c0fe502ed21a7df97672406d225c9/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/PostgresDictionary.java","raw_url":"https://github.com/apache/openjpa/raw/e5d2bd435f0c0fe502ed21a7df97672406d225c9/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/PostgresDictionary.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/PostgresDictionary.java?ref=e5d2bd435f0c0fe502ed21a7df97672406d225c9","patch":"@@ -458,7 +458,8 @@ private void updatePostgresBlob(Row row, Column col, JDBCStore store,\n                 if (ob != null) {\n                     LargeObject lo = lom.open(oid, LargeObjectManager.WRITE);\n                     OutputStream os = lo.getOutputStream();\n-                    copy((InputStream)ob, os);\n+                    long size = copy((InputStream) ob, os);\n+                    lo.truncate((int) size);\n                     lo.close();\n                 } else {\n                     lom.delete(oid);"}]}

