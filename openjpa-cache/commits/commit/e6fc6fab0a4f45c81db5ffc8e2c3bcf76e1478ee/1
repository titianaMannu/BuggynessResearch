{"sha":"e6fc6fab0a4f45c81db5ffc8e2c3bcf76e1478ee","node_id":"MDY6Q29tbWl0MjA2MzY0OmU2ZmM2ZmFiMGE0ZjQ1YzgxZGI1ZmZjOGUyYzNiY2Y3NmUxNDc4ZWU=","commit":{"author":{"name":"Albert Lee","email":"allee8285@apache.org","date":"2010-03-19T21:31:17Z"},"committer":{"name":"Albert Lee","email":"allee8285@apache.org","date":"2010-03-19T21:31:17Z"},"message":"OPENJPA-1583 - fix intermittent failures in timestamp version assertion.\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@925438 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"1e8e85255712ce12245710e0f212c4c4c9ba3eed","url":"https://api.github.com/repos/apache/openjpa/git/trees/1e8e85255712ce12245710e0f212c4c4c9ba3eed"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/e6fc6fab0a4f45c81db5ffc8e2c3bcf76e1478ee","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/e6fc6fab0a4f45c81db5ffc8e2c3bcf76e1478ee","html_url":"https://github.com/apache/openjpa/commit/e6fc6fab0a4f45c81db5ffc8e2c3bcf76e1478ee","comments_url":"https://api.github.com/repos/apache/openjpa/commits/e6fc6fab0a4f45c81db5ffc8e2c3bcf76e1478ee/comments","author":null,"committer":null,"parents":[{"sha":"4f9de8e360c8fcb2dda9100c01b2761a3ec21f5c","url":"https://api.github.com/repos/apache/openjpa/commits/4f9de8e360c8fcb2dda9100c01b2761a3ec21f5c","html_url":"https://github.com/apache/openjpa/commit/4f9de8e360c8fcb2dda9100c01b2761a3ec21f5c"}],"stats":{"total":6,"additions":6,"deletions":0},"files":[{"sha":"9c57c00d7493d8f87a612225475cdd7a63ad0cff","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/jdbc/update/TestTimestampVersion.java","status":"modified","additions":6,"deletions":0,"changes":6,"blob_url":"https://github.com/apache/openjpa/blob/e6fc6fab0a4f45c81db5ffc8e2c3bcf76e1478ee/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/jdbc/update/TestTimestampVersion.java","raw_url":"https://github.com/apache/openjpa/raw/e6fc6fab0a4f45c81db5ffc8e2c3bcf76e1478ee/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/jdbc/update/TestTimestampVersion.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/jdbc/update/TestTimestampVersion.java?ref=e6fc6fab0a4f45c81db5ffc8e2c3bcf76e1478ee","patch":"@@ -45,6 +45,12 @@ public void testBulkUpdateOnTimestampedVersion() {\n         em.persist(pc);\n         em.getTransaction().commit();\n         \n+        try {\n+            // delay to ensure the new timestamp exceeds the timer's resolution.\n+            Thread.sleep(100);\n+        } catch (InterruptedException e) {\n+        }\n+\n         em.getTransaction().begin();\n         Timestamp oldVersion = pc.getVersion();\n         String jpql = \"UPDATE TimestampedEntity t SET t.name=:newname WHERE t.name=:oldname\";"}]}

