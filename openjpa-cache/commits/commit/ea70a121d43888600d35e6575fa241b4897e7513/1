{"sha":"ea70a121d43888600d35e6575fa241b4897e7513","node_id":"MDY6Q29tbWl0MjA2MzY0OmVhNzBhMTIxZDQzODg4NjAwZDM1ZTY1NzVmYTI0MWI0ODk3ZTc1MTM=","commit":{"author":{"name":"Patrick Linskey","email":"pcl@apache.org","date":"2007-08-30T18:47:50Z"},"committer":{"name":"Patrick Linskey","email":"pcl@apache.org","date":"2007-08-30T18:47:50Z"},"message":"OPENJPA-346. 'svn merge -c 571269 ../../trunk'\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/branches/1.0.x@571274 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"212e0cb9dbc998181ca99652ef00b065e0e4344d","url":"https://api.github.com/repos/apache/openjpa/git/trees/212e0cb9dbc998181ca99652ef00b065e0e4344d"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/ea70a121d43888600d35e6575fa241b4897e7513","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/ea70a121d43888600d35e6575fa241b4897e7513","html_url":"https://github.com/apache/openjpa/commit/ea70a121d43888600d35e6575fa241b4897e7513","comments_url":"https://api.github.com/repos/apache/openjpa/commits/ea70a121d43888600d35e6575fa241b4897e7513/comments","author":null,"committer":null,"parents":[{"sha":"5678f5d365cc86de0bc626ec01d820a5eb2e3a4e","url":"https://api.github.com/repos/apache/openjpa/commits/5678f5d365cc86de0bc626ec01d820a5eb2e3a4e","html_url":"https://github.com/apache/openjpa/commit/5678f5d365cc86de0bc626ec01d820a5eb2e3a4e"}],"stats":{"total":24,"additions":17,"deletions":7},"files":[{"sha":"9af0c0c5d4ef016c2df750aebb3490951628e7b8","filename":"openjpa-kernel-5/src/main/java/org/apache/openjpa/enhance/PCEnhancerAgent.java","status":"modified","additions":17,"deletions":7,"changes":24,"blob_url":"https://github.com/apache/openjpa/blob/ea70a121d43888600d35e6575fa241b4897e7513/openjpa-kernel-5/src/main/java/org/apache/openjpa/enhance/PCEnhancerAgent.java","raw_url":"https://github.com/apache/openjpa/raw/ea70a121d43888600d35e6575fa241b4897e7513/openjpa-kernel-5/src/main/java/org/apache/openjpa/enhance/PCEnhancerAgent.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel-5/src/main/java/org/apache/openjpa/enhance/PCEnhancerAgent.java?ref=ea70a121d43888600d35e6575fa241b4897e7513","patch":"@@ -60,14 +60,24 @@\n     public static void premain(String args, Instrumentation inst) {\n         Options opts = Configurations.parseProperties(args);\n \n-        if (opts.getBooleanProperty(\n-            \"ClassLoadEnhancement\", \"classLoadEnhancement\", true))\n-            registerClassLoadEnhancer(inst, opts);\n-\n-        // Deprecated property setting\n-        if (opts.getBooleanProperty(\n-            \"RuntimeEnhancement\", \"runtimeEnhancement\", true))\n+        if (opts.containsKey(\"ClassLoadEnhancement\") ||\n+            opts.containsKey(\"classLoadEnhancement\")) {\n+            if (opts.getBooleanProperty(\n+                \"ClassLoadEnhancement\", \"classLoadEnhancement\", true))\n+                registerClassLoadEnhancer(inst, opts);\n+        }\n+        else if (opts.containsKey(\"RuntimeEnhancement\") ||\n+            opts.containsKey(\"runtimeEnhancement\")) {\n+            // Deprecated property setting\n+            if (opts.getBooleanProperty(\n+                \"RuntimeEnhancement\", \"runtimeEnhancement\", true))\n+                registerClassLoadEnhancer(inst, opts);\n+        } else {\n+            // if neither is set, then we should be turning it on. We need this\n+            // logic instead of just a getBooleanProperty() because of the\n+            // backwards-compat logic flow.\n             registerClassLoadEnhancer(inst, opts);\n+        }\n \n         if (opts.getBooleanProperty(\n             \"RuntimeRedefinition\", \"runtimeRedefinition\", true)) {"}]}

