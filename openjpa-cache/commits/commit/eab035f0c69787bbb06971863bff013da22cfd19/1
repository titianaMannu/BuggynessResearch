{"sha":"eab035f0c69787bbb06971863bff013da22cfd19","node_id":"MDY6Q29tbWl0MjA2MzY0OmVhYjAzNWYwYzY5Nzg3YmJiMDY5NzE4NjNiZmYwMTNkYTIyY2ZkMTk=","commit":{"author":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2010-08-19T21:40:57Z"},"committer":{"name":"Donald Woods","email":"dwoods@apache.org","date":"2010-08-19T21:40:57Z"},"message":"OPENJPA-1712 Use maven-dependency-plugin instead of maven-antrun-plugin for jar extractions\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/branches/2.0.x@987322 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"a1b4210cb38780acb3222f72f1e66a4eda17eb52","url":"https://api.github.com/repos/apache/openjpa/git/trees/a1b4210cb38780acb3222f72f1e66a4eda17eb52"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/eab035f0c69787bbb06971863bff013da22cfd19","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/eab035f0c69787bbb06971863bff013da22cfd19","html_url":"https://github.com/apache/openjpa/commit/eab035f0c69787bbb06971863bff013da22cfd19","comments_url":"https://api.github.com/repos/apache/openjpa/commits/eab035f0c69787bbb06971863bff013da22cfd19/comments","author":null,"committer":null,"parents":[{"sha":"96e28690486d55e72c24a6551ba1f09812c76792","url":"https://api.github.com/repos/apache/openjpa/commits/96e28690486d55e72c24a6551ba1f09812c76792","html_url":"https://github.com/apache/openjpa/commit/96e28690486d55e72c24a6551ba1f09812c76792"}],"stats":{"total":44,"additions":31,"deletions":13},"files":[{"sha":"f31fd206a08cdf79d8274bb2794fc962316be268","filename":"openjpa-testsupport/pom.xml","status":"modified","additions":26,"deletions":13,"changes":39,"blob_url":"https://github.com/apache/openjpa/blob/eab035f0c69787bbb06971863bff013da22cfd19/openjpa-testsupport/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/eab035f0c69787bbb06971863bff013da22cfd19/openjpa-testsupport/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-testsupport/pom.xml?ref=eab035f0c69787bbb06971863bff013da22cfd19","patch":"@@ -42,6 +42,7 @@\n             <groupId>org.apache.openjpa</groupId>\n             <artifactId>openjpa-persistence-jdbc</artifactId>\n             <version>${project.version}</version>\n+            <scope>test</scope>\n         </dependency>\n         <!-- need a depend on o-p-j tests jar -->\n         <dependency>\n@@ -61,33 +62,43 @@\n     <build>\n         <plugins>\n             <plugin>\n-                <!--\n-                    Manually build a subset jar of o-p-j-tests.jar\n-                -->\n                 <groupId>org.apache.maven.plugins</groupId>\n-                <artifactId>maven-antrun-plugin</artifactId>\n+                <artifactId>maven-dependency-plugin</artifactId>\n                 <executions>\n                     <execution>\n-                        <id>extract-jar</id>\n+                        <id>unpack</id>\n                         <phase>test-compile</phase>\n                         <goals>\n-                            <goal>run</goal>\n+                            <goal>unpack</goal>\n                         </goals>\n                         <configuration>\n-                            <tasks>\n-                                <unjar overwrite=\"true\" dest=\"${project.build.testOutputDirectory}\">\n-                                    <fileset dir=\"${basedir}/../openjpa-persistence-jdbc\">\n-                                        <include name=\"target/openjpa-persistence-jdbc-${project.version}-tests.jar\" />\n-                                    </fileset>\n-                                </unjar>\n-                            </tasks>\n+                            <artifactItems>\n+                                <artifactItem>\n+                                    <groupId>org.apache.openjpa</groupId>\n+                                    <artifactId>openjpa-persistence-jdbc</artifactId>\n+                                    <version>${project.version}</version>\n+                                    <type>test-jar</type>\n+                                    <overWrite>true</overWrite>\n+                                    <outputDirectory>${project.build.testOutputDirectory}</outputDirectory>\n+                                </artifactItem>\n+                            </artifactItems>\n                         </configuration>\n                     </execution>\n                 </executions>\n             </plugin>\n             <plugin>\n                 <groupId>org.apache.maven.plugins</groupId>\n                 <artifactId>maven-jar-plugin</artifactId>\n+                <executions>\n+                    <execution>\n+                        <id>default-jar</id>\n+                        <phase>none</phase>\n+                    </execution>\n+                    <execution>\n+                        <id>attach-tests</id>\n+                        <goals>\n+                            <goal>test-jar</goal>\n+                        </goals>\n                         <configuration>\n                             <includes>\n                                 <!-- Note: Including entities in this jar will\n@@ -100,6 +111,8 @@\n                                 <include>META-INF/persistence.xml</include>\n                             </includes>\n                         </configuration>\n+                    </execution>\n+                </executions>\n             </plugin>\n             <!-- Don't run any of the extracted tests here... -->\n             <plugin>"},{"sha":"682edced33d4185e184e3eae243e95ce73913036","filename":"pom.xml","status":"modified","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/apache/openjpa/blob/eab035f0c69787bbb06971863bff013da22cfd19/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/eab035f0c69787bbb06971863bff013da22cfd19/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/pom.xml?ref=eab035f0c69787bbb06971863bff013da22cfd19","patch":"@@ -672,6 +672,11 @@\n                         </excludes>\n                     </configuration>\n                 </plugin>\n+                <plugin>\n+                    <groupId>org.apache.maven.plugins</groupId>\n+                    <artifactId>maven-dependency-plugin</artifactId>\n+                    <version>2.1</version>\n+                </plugin>\n                 <!-- inherited from apache-7.pom, but need config updates -->\n                 <plugin>\n                     <groupId>org.apache.maven.plugins</groupId>"}]}

