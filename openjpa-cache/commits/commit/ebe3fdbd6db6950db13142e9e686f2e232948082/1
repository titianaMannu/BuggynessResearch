{"sha":"ebe3fdbd6db6950db13142e9e686f2e232948082","node_id":"MDY6Q29tbWl0MjA2MzY0OmViZTNmZGJkNmRiNjk1MGRiMTMxNDJlOWU2ODZmMmUyMzI5NDgwODI=","commit":{"author":{"name":"David Ezzio","email":"dezzio@apache.org","date":"2008-02-05T21:46:09Z"},"committer":{"name":"David Ezzio","email":"dezzio@apache.org","date":"2008-02-05T21:46:09Z"},"message":"Improved the robustness of these test cases\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@618786 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"5eff15026d36f14b33ded479a47c4dbfe3cced84","url":"https://api.github.com/repos/apache/openjpa/git/trees/5eff15026d36f14b33ded479a47c4dbfe3cced84"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/ebe3fdbd6db6950db13142e9e686f2e232948082","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/ebe3fdbd6db6950db13142e9e686f2e232948082","html_url":"https://github.com/apache/openjpa/commit/ebe3fdbd6db6950db13142e9e686f2e232948082","comments_url":"https://api.github.com/repos/apache/openjpa/commits/ebe3fdbd6db6950db13142e9e686f2e232948082/comments","author":null,"committer":null,"parents":[{"sha":"b92f6420af0222aa71877aa737d3456f000bb409","url":"https://api.github.com/repos/apache/openjpa/commits/b92f6420af0222aa71877aa737d3456f000bb409","html_url":"https://github.com/apache/openjpa/commit/b92f6420af0222aa71877aa737d3456f000bb409"}],"stats":{"total":16,"additions":14,"deletions":2},"files":[{"sha":"589ee3a196257964c1f48ea13fe9fe579261cc31","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/jdbc/annotations/TestVersion.java","status":"modified","additions":12,"deletions":1,"changes":13,"blob_url":"https://github.com/apache/openjpa/blob/ebe3fdbd6db6950db13142e9e686f2e232948082/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/jdbc/annotations/TestVersion.java","raw_url":"https://github.com/apache/openjpa/raw/ebe3fdbd6db6950db13142e9e686f2e232948082/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/jdbc/annotations/TestVersion.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/jdbc/annotations/TestVersion.java?ref=ebe3fdbd6db6950db13142e9e686f2e232948082","patch":"@@ -88,6 +88,15 @@ public void testVersionNumeric() {\n     }\r\n \r\n     public void testVersionTimestamp() {\r\n+        // ensure that some time has passed\r\n+        // since the records were created\r\n+        try {\r\n+            Thread.sleep(50);\r\n+        }\r\n+        catch (InterruptedException e) {\r\n+            // do nothing\r\n+        }\r\n+        \r\n         EntityManager em1 = emf.createEntityManager();\r\n         em1.getTransaction().begin();\r\n         EntityManager em2 = emf.createEntityManager();\r\n@@ -107,7 +116,9 @@ public void testVersionTimestamp() {\n         em1 = emf.createEntityManager();\r\n         pc1 = em1.find(AnnoTest2.class,\r\n             new AnnoTest2.Oid(5, \"bar\"));\r\n-        assertTrue(pc1.getVersion().compareTo(pc2.getVersion()) > 0);\r\n+        java.util.Date pc1Version = pc1.getVersion();\r\n+        java.util.Date pc2Version = pc2.getVersion();\r\n+        assertTrue(pc1Version.compareTo(pc2Version) > 0);\r\n         em1.close();\r\n         try {\r\n             em2.getTransaction().commit();\r"},{"sha":"c0a8a4475015abdea8bd59f472c5eca453a885f4","filename":"openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/simple/TestCaseInsensitiveKeywordsInJPQL.java","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/apache/openjpa/blob/ebe3fdbd6db6950db13142e9e686f2e232948082/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/simple/TestCaseInsensitiveKeywordsInJPQL.java","raw_url":"https://github.com/apache/openjpa/raw/ebe3fdbd6db6950db13142e9e686f2e232948082/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/simple/TestCaseInsensitiveKeywordsInJPQL.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/java/org/apache/openjpa/persistence/simple/TestCaseInsensitiveKeywordsInJPQL.java?ref=ebe3fdbd6db6950db13142e9e686f2e232948082","patch":"@@ -27,7 +27,8 @@\n     extends SingleEMFTestCase {\n \n     public void setUp() {\n-        setUp(AllFieldTypes.class);\n+        // expecting only data that is inserted in this test case\n+        setUp(AllFieldTypes.class, CLEAR_TABLES);\n     }\n \n     public void testCaseInsensitiveBooleans() {"}]}

