{"sha":"ec43fccfff61d60efb19ea779a0a0f252a65b5a4","node_id":"MDY6Q29tbWl0MjA2MzY0OmVjNDNmY2NmZmY2MWQ2MGVmYjE5ZWE3NzlhMGEwZjI1MmE2NWI1YTQ=","commit":{"author":{"name":"Jeremy Bauer","email":"jrbauer@apache.org","date":"2009-08-25T16:14:00Z"},"committer":{"name":"Jeremy Bauer","email":"jrbauer@apache.org","date":"2009-08-25T16:14:00Z"},"message":"OPENJPA-1262 ORM Schema updates for EA7\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@807686 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"263994368bc5d66f8f974e456f362aa5f5522d1b","url":"https://api.github.com/repos/apache/openjpa/git/trees/263994368bc5d66f8f974e456f362aa5f5522d1b"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/ec43fccfff61d60efb19ea779a0a0f252a65b5a4","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/ec43fccfff61d60efb19ea779a0a0f252a65b5a4","html_url":"https://github.com/apache/openjpa/commit/ec43fccfff61d60efb19ea779a0a0f252a65b5a4","comments_url":"https://api.github.com/repos/apache/openjpa/commits/ec43fccfff61d60efb19ea779a0a0f252a65b5a4/comments","author":null,"committer":null,"parents":[{"sha":"8a66927c2d37d91c9e55cfadc252a5c5c9eeec76","url":"https://api.github.com/repos/apache/openjpa/commits/8a66927c2d37d91c9e55cfadc252a5c5c9eeec76","html_url":"https://github.com/apache/openjpa/commit/8a66927c2d37d91c9e55cfadc252a5c5c9eeec76"}],"stats":{"total":44,"additions":14,"deletions":30},"files":[{"sha":"bacda7b8c8c5a183df173c7780e5290b477063c2","filename":"openjpa-persistence-jdbc/src/main/java/org/apache/openjpa/persistence/jdbc/XMLPersistenceMappingParser.java","status":"modified","additions":2,"deletions":4,"changes":6,"blob_url":"https://github.com/apache/openjpa/blob/ec43fccfff61d60efb19ea779a0a0f252a65b5a4/openjpa-persistence-jdbc/src/main/java/org/apache/openjpa/persistence/jdbc/XMLPersistenceMappingParser.java","raw_url":"https://github.com/apache/openjpa/raw/ec43fccfff61d60efb19ea779a0a0f252a65b5a4/openjpa-persistence-jdbc/src/main/java/org/apache/openjpa/persistence/jdbc/XMLPersistenceMappingParser.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/main/java/org/apache/openjpa/persistence/jdbc/XMLPersistenceMappingParser.java?ref=ec43fccfff61d60efb19ea779a0a0f252a65b5a4","patch":"@@ -1156,14 +1156,12 @@ private boolean startColumnResult(Attributes attrs)\n     private boolean startUniqueConstraint(Attributes attrs) \n         throws SAXException {\n         Unique unique = new Unique();\n-        // TODO JRB: If the spec is corrected, get the unique constraint name\n-\t\t// via attribute\n-\t\t/*\n+\n         String name = attrs.getValue(\"name\");\n         if (StringUtils.isNotEmpty(name)) {\n             unique.setName(name);\n         }\n-\t\t*/\n+\n         pushElement(unique);\n         return true;\n     }"},{"sha":"11e6396d79ca8dfaa5392f4c4e53b3113e672137","filename":"openjpa-persistence-jdbc/src/main/java/org/apache/openjpa/persistence/jdbc/XMLPersistenceMappingSerializer.java","status":"modified","additions":1,"deletions":6,"changes":7,"blob_url":"https://github.com/apache/openjpa/blob/ec43fccfff61d60efb19ea779a0a0f252a65b5a4/openjpa-persistence-jdbc/src/main/java/org/apache/openjpa/persistence/jdbc/XMLPersistenceMappingSerializer.java","raw_url":"https://github.com/apache/openjpa/raw/ec43fccfff61d60efb19ea779a0a0f252a65b5a4/openjpa-persistence-jdbc/src/main/java/org/apache/openjpa/persistence/jdbc/XMLPersistenceMappingSerializer.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/main/java/org/apache/openjpa/persistence/jdbc/XMLPersistenceMappingSerializer.java?ref=ec43fccfff61d60efb19ea779a0a0f252a65b5a4","patch":"@@ -567,12 +567,7 @@ private void serializeColumn(Column col, ColType type, String secondary,\n \n     private void serializeUniqueConstraint(Unique unique) throws SAXException {\n         if (StringUtils.isNotEmpty(unique.getName())) {\n-        \t//TODO JRB: If the spec is modified to use a name attribute\n-        \t// remove the element def and uncomment the attribute def\n-        \tstartElement(\"name\");\n-        \taddText(unique.getName());\n-        \tendElement(\"name\");\n-//            addAttribute(\"name\", unique.getName());\n+            addAttribute(\"name\", unique.getName());\n         }\n         startElement(\"unique-constraint\");\n         Column[] columns = unique.getColumns();"},{"sha":"ac2dc99ffc36008206ace69f5f5a146c87303951","filename":"openjpa-persistence-jdbc/src/test/resources/org/apache/openjpa/persistence/jdbc/unique/named-constraint-orm.xml","status":"modified","additions":7,"deletions":14,"changes":21,"blob_url":"https://github.com/apache/openjpa/blob/ec43fccfff61d60efb19ea779a0a0f252a65b5a4/openjpa-persistence-jdbc/src/test/resources/org/apache/openjpa/persistence/jdbc/unique/named-constraint-orm.xml","raw_url":"https://github.com/apache/openjpa/raw/ec43fccfff61d60efb19ea779a0a0f252a65b5a4/openjpa-persistence-jdbc/src/test/resources/org/apache/openjpa/persistence/jdbc/unique/named-constraint-orm.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence-jdbc/src/test/resources/org/apache/openjpa/persistence/jdbc/unique/named-constraint-orm.xml?ref=ec43fccfff61d60efb19ea779a0a0f252a65b5a4","patch":"@@ -30,20 +30,17 @@\n \t<package>org.apache.openjpa.persistence.jdbc.unique</package>\n \t<entity name=\"NamedUniqueA\" class=\"NamedUniqueA\">\n \t\t<table name=\"NX_UNIQUE_A\">\n-\t\t\t<unique-constraint>\n-                <name>ucxa_f1_f2</name>\n+\t\t\t<unique-constraint name=\"ucxa_f1_f2\">\n \t\t\t\t<column-name>f1x</column-name>\n \t\t\t\t<column-name>f2x</column-name>\n \t\t\t</unique-constraint>\n-\t\t\t<unique-constraint>\n-                <name>ucxa_f3_f4</name>\n+\t\t\t<unique-constraint name=\"ucxa_f3_f4\">\n \t\t\t\t<column-name>f3x</column-name>\n \t\t\t\t<column-name>f4x</column-name>\n \t\t\t</unique-constraint>\n \t\t</table>\n \t\t<secondary-table name=\"NX_UNIQUE_SECONDARY\">\n-\t\t\t<unique-constraint>\n-                <name>ucxa_sf1</name>\n+\t\t\t<unique-constraint name=\"ucxa_sf1\">\n \t\t\t\t<column-name>sf1x</column-name>\n \t\t\t</unique-constraint>\n \t\t</secondary-table>\n@@ -79,8 +76,7 @@\n \t\t\t\t<join-table name=\"NX_UNIQUE_JOINTABLE\">\n \t\t\t\t\t<join-column name=\"FK_A_XML\" referenced-column-name=\"aid\" nullable=\"false\"/>\n \t\t\t\t\t<inverse-join-column name=\"FK_B_XML\" referenced-column-name=\"bid\" nullable=\"false\"/>\n-\t\t\t\t\t<unique-constraint>\n-                        <name>ucxa_fka_fkb</name>\n+\t\t\t\t\t<unique-constraint name=\"ucxa_fka_fkb\">\n \t\t\t\t\t\t<column-name>FK_A_XML</column-name>\n \t\t\t\t\t\t<column-name>FK_B_XML</column-name>\n \t\t\t\t\t</unique-constraint>\n@@ -91,8 +87,7 @@\n \n \t<entity name=\"NamedUniqueB\" class=\"NamedUniqueB\">\n \t\t<table name=\"NX_UNIQUE_B\">\n-\t\t\t<unique-constraint>\n-                <name>ucxb_f1_f2</name>\n+\t\t\t<unique-constraint name=\"ucxb_f1_f2\">\n \t\t\t\t<column-name>f1x</column-name>\n \t\t\t\t<column-name>f2x</column-name>\n \t\t\t</unique-constraint>\n@@ -104,8 +99,7 @@\n \t\t\t\t<table-generator name=\"testGeneratorXML\"\n \t\t\t\t\ttable=\"NX_UNIQUE_GENERATOR\" pk-column-name=\"GEN1_XML\"\n \t\t\t\t\tvalue-column-name=\"GEN2_XML\">\n-\t\t\t\t\t<unique-constraint>\n-                        <name>ucxb_gen1_gen2</name>\n+\t\t\t\t\t<unique-constraint name=\"ucxb_gen1_gen2\">\n \t\t\t\t\t\t<column-name>GEN1_XML</column-name>\n \t\t\t\t\t\t<column-name>GEN2_XML</column-name>\n \t\t\t\t\t</unique-constraint>\n@@ -120,8 +114,7 @@\n             <element-collection name=\"f3\">\n                 <column name=\"f3x\" nullable=\"false\"/>\n                 <collection-table name=\"NX_U_COLL_TBL\">\n-                    <unique-constraint>\n-                        <name>ucxb_f3</name>\n+                    <unique-constraint name=\"ucxb_f3\">\n                         <column-name>f3x</column-name>\n                     </unique-constraint>\n                 </collection-table>"},{"sha":"bed9d24075877022b4adc3baec62a79eb4c4437d","filename":"openjpa-persistence/src/main/resources/org/apache/openjpa/persistence/orm_2_0-xsd.rsrc","status":"modified","additions":2,"deletions":3,"changes":5,"blob_url":"https://github.com/apache/openjpa/blob/ec43fccfff61d60efb19ea779a0a0f252a65b5a4/openjpa-persistence/src/main/resources/org/apache/openjpa/persistence/orm_2_0-xsd.rsrc","raw_url":"https://github.com/apache/openjpa/raw/ec43fccfff61d60efb19ea779a0a0f252a65b5a4/openjpa-persistence/src/main/resources/org/apache/openjpa/persistence/orm_2_0-xsd.rsrc","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-persistence/src/main/resources/org/apache/openjpa/persistence/orm_2_0-xsd.rsrc?ref=ec43fccfff61d60efb19ea779a0a0f252a65b5a4","patch":"@@ -7,7 +7,7 @@\n     version=\"2.0\">\r\n     <xsd:annotation>\r\n         <xsd:documentation>\r\n-            @(#)orm_2_0.xsd 2.0 July 17 2009\r\n+            @(#)orm_2_0.xsd 2.0 August 11 2009\r\n         </xsd:documentation>\r\n     </xsd:annotation>\r\n     <xsd:annotation>\r\n@@ -1646,11 +1646,10 @@ version=\"2.0\">\n             </xsd:documentation>\r\n         </xsd:annotation>\r\n         <xsd:sequence>\r\n-            <xsd:element name=\"name\" type=\"xsd:string\"\r\n-                minOccurs=\"0\" />\r\n             <xsd:element name=\"column-name\" type=\"xsd:string\"\r\n                 maxOccurs=\"unbounded\" />\r\n         </xsd:sequence>\r\n+        <xsd:attribute name=\"name\" type=\"xsd:string\" />\r\n     </xsd:complexType>\r\n     <!-- **************************************************** -->\r\n     <xsd:complexType name=\"version\">\r"},{"sha":"b0a097779d86f19b49cd1580a2f4c12418864544","filename":"openjpa-project/src/doc/manual/jpa_overview_meta.xml","status":"modified","additions":2,"deletions":3,"changes":5,"blob_url":"https://github.com/apache/openjpa/blob/ec43fccfff61d60efb19ea779a0a0f252a65b5a4/openjpa-project/src/doc/manual/jpa_overview_meta.xml","raw_url":"https://github.com/apache/openjpa/raw/ec43fccfff61d60efb19ea779a0a0f252a65b5a4/openjpa-project/src/doc/manual/jpa_overview_meta.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-project/src/doc/manual/jpa_overview_meta.xml?ref=ec43fccfff61d60efb19ea779a0a0f252a65b5a4","patch":"@@ -2042,7 +2042,7 @@ found at <ulink url=\"http://java.sun.com/xml/ns/persistence/orm_1_0.xsd\"/>.\n     version=\"2.0\"&gt;\n     &lt;xsd:annotation&gt;\n         &lt;xsd:documentation&gt;\n-            @(#)orm_2_0.xsd 2.0 July 17 2009\n+            @(#)orm_2_0.xsd 2.0 August 11 2009\n         &lt;/xsd:documentation&gt;\n     &lt;/xsd:annotation&gt;\n     &lt;xsd:annotation&gt;\n@@ -3683,11 +3683,10 @@ found at <ulink url=\"http://java.sun.com/xml/ns/persistence/orm_1_0.xsd\"/>.\n             &lt;/xsd:documentation&gt;\n         &lt;/xsd:annotation&gt;\n         &lt;xsd:sequence&gt;\n-            &lt;xsd:element name=\"name\" type=\"xsd:string\"\n-                minOccurs=\"0\" /&gt;\n             &lt;xsd:element name=\"column-name\" type=\"xsd:string\"\n                 maxOccurs=\"unbounded\" /&gt;\n         &lt;/xsd:sequence&gt;\n+        &lt;xsd:attribute name=\"name\" type=\"xsd:string\" /&gt;        \n     &lt;/xsd:complexType&gt;\n     &lt;!-- **************************************************** --&gt;\n     &lt;xsd:complexType name=\"version\"&gt;"}]}

