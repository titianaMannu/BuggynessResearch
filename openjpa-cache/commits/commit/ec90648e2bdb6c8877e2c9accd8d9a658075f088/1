{"sha":"ec90648e2bdb6c8877e2c9accd8d9a658075f088","node_id":"MDY6Q29tbWl0MjA2MzY0OmVjOTA2NDhlMmJkYjZjODg3N2UyYzlhY2NkOGQ5YTY1ODA3NWYwODg=","commit":{"author":{"name":"Pinaki Poddar","email":"ppoddar@apache.org","date":"2009-09-11T22:27:27Z"},"committer":{"name":"Pinaki Poddar","email":"ppoddar@apache.org","date":"2009-09-11T22:27:27Z"},"message":"OPENJPA-703: Support RangeResultObjectProvider for prepared query cache\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@814065 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"c8ba6bcf0680782a334809dd973f1bdcf633b0fd","url":"https://api.github.com/repos/apache/openjpa/git/trees/c8ba6bcf0680782a334809dd973f1bdcf633b0fd"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/ec90648e2bdb6c8877e2c9accd8d9a658075f088","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/ec90648e2bdb6c8877e2c9accd8d9a658075f088","html_url":"https://github.com/apache/openjpa/commit/ec90648e2bdb6c8877e2c9accd8d9a658075f088","comments_url":"https://api.github.com/repos/apache/openjpa/commits/ec90648e2bdb6c8877e2c9accd8d9a658075f088/comments","author":null,"committer":null,"parents":[{"sha":"5120b0e629a208ae7dc9f7f049e342ef15c2ea7c","url":"https://api.github.com/repos/apache/openjpa/commits/5120b0e629a208ae7dc9f7f049e342ef15c2ea7c","html_url":"https://github.com/apache/openjpa/commit/5120b0e629a208ae7dc9f7f049e342ef15c2ea7c"}],"stats":{"total":11,"additions":8,"deletions":3},"files":[{"sha":"0eded34adefeea53971e6b6a29d58e0589378c19","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/PreparedQueryImpl.java","status":"modified","additions":5,"deletions":1,"changes":6,"blob_url":"https://github.com/apache/openjpa/blob/ec90648e2bdb6c8877e2c9accd8d9a658075f088/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/PreparedQueryImpl.java","raw_url":"https://github.com/apache/openjpa/raw/ec90648e2bdb6c8877e2c9accd8d9a658075f088/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/PreparedQueryImpl.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/kernel/PreparedQueryImpl.java?ref=ec90648e2bdb6c8877e2c9accd8d9a658075f088","patch":"@@ -42,6 +42,7 @@\n import org.apache.openjpa.kernel.StoreQuery;\n import org.apache.openjpa.kernel.PreparedQueryCache.Exclusion;\n import org.apache.openjpa.kernel.exps.QueryExpressions;\n+import org.apache.openjpa.lib.rop.RangeResultObjectProvider;\n import org.apache.openjpa.lib.rop.ResultList;\n import org.apache.openjpa.lib.util.Localizer;\n import org.apache.openjpa.util.ImplHelper;\n@@ -212,10 +213,13 @@ public Exclusion initialize(Object result) {\n         if (provider instanceof QueryImpl.PackingResultObjectProvider) {\n             provider = ((QueryImpl.PackingResultObjectProvider)provider).getDelegate();\n         }\n+        if (provider instanceof RangeResultObjectProvider) {\n+            provider = ((RangeResultObjectProvider)provider).getDelegate();\n+        }\n         if (provider instanceof SelectResultObjectProvider) {\n             return new Object[]{((SelectResultObjectProvider)provider).getSelect(), null};\n         } \n-        return new Object[]{null, _loc.get(\"exclude-not-select-rop\")};\n+        return new Object[]{null, _loc.get(\"exclude-not-select-rop\", provider)};\n     }\n     \n     private SelectImpl extractImplementation(SelectExecutor selector) {"},{"sha":"162fb4ff529247eef0f8fadbba935ecc85743f23","filename":"openjpa-jdbc/src/main/resources/org/apache/openjpa/jdbc/kernel/localizer.properties","status":"modified","additions":3,"deletions":2,"changes":5,"blob_url":"https://github.com/apache/openjpa/blob/ec90648e2bdb6c8877e2c9accd8d9a658075f088/openjpa-jdbc/src/main/resources/org/apache/openjpa/jdbc/kernel/localizer.properties","raw_url":"https://github.com/apache/openjpa/raw/ec90648e2bdb6c8877e2c9accd8d9a658075f088/openjpa-jdbc/src/main/resources/org/apache/openjpa/jdbc/kernel/localizer.properties","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/resources/org/apache/openjpa/jdbc/kernel/localizer.properties?ref=ec90648e2bdb6c8877e2c9accd8d9a658075f088","patch":"@@ -163,6 +163,7 @@ exclude-no-sql: because target SQL statement can not be extracted \\\n     from this query.\n exclude-no-select: because internal select instance can not be extracted \\\n     from this query.\n-exclude-no-select-rop: because the query result is not obtained by executing \\\n-\ta select statement. This can happen if the query was evaluated in-memory.  \n+exclude-not-select-rop: because the query result is not obtained by executing \\\n+\ta select statement. This can happen if the query was evaluated in-memory. \\\n+\tThe result was provided by an instance of {0}.  \n exclude-not-executor: because this query was not executed on a data store.    "}]}

