{"sha":"eded0dd8facefda2af83567ecdae12f4c09eb53f","node_id":"MDY6Q29tbWl0MjA2MzY0OmVkZWQwZGQ4ZmFjZWZkYTJhZjgzNTY3ZWNkYWUxMmY0YzA5ZWI1M2Y=","commit":{"author":{"name":"Richard G. Curtis","email":"curtisr7@apache.org","date":"2009-09-15T18:56:55Z"},"committer":{"name":"Richard G. Curtis","email":"curtisr7@apache.org","date":"2009-09-15T18:56:55Z"},"message":"OPENJPA-1302: Use ContextClassloader in addition to the ProductDeivation's ClassLoader to find/load product derivations. Patch contributed by Rick Curtis.\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@815447 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"02cb17ede532f539435f334b5eff401b932385f4","url":"https://api.github.com/repos/apache/openjpa/git/trees/02cb17ede532f539435f334b5eff401b932385f4"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/eded0dd8facefda2af83567ecdae12f4c09eb53f","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/eded0dd8facefda2af83567ecdae12f4c09eb53f","html_url":"https://github.com/apache/openjpa/commit/eded0dd8facefda2af83567ecdae12f4c09eb53f","comments_url":"https://api.github.com/repos/apache/openjpa/commits/eded0dd8facefda2af83567ecdae12f4c09eb53f/comments","author":null,"committer":null,"parents":[{"sha":"3146afb1bc096750ae2c8a66e2f5346bceaffde8","url":"https://api.github.com/repos/apache/openjpa/commits/3146afb1bc096750ae2c8a66e2f5346bceaffde8","html_url":"https://github.com/apache/openjpa/commit/3146afb1bc096750ae2c8a66e2f5346bceaffde8"}],"stats":{"total":7,"additions":5,"deletions":2},"files":[{"sha":"173b7caba2eede2399752cfb0ef9f032d539cd16","filename":"openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/ProductDerivations.java","status":"modified","additions":5,"deletions":2,"changes":7,"blob_url":"https://github.com/apache/openjpa/blob/eded0dd8facefda2af83567ecdae12f4c09eb53f/openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/ProductDerivations.java","raw_url":"https://github.com/apache/openjpa/raw/eded0dd8facefda2af83567ecdae12f4c09eb53f/openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/ProductDerivations.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/ProductDerivations.java?ref=eded0dd8facefda2af83567ecdae12f4c09eb53f","patch":"@@ -36,6 +36,7 @@\n import org.apache.openjpa.lib.util.J2DoPrivHelper;\n import org.apache.openjpa.lib.util.JavaVersions;\n import org.apache.openjpa.lib.util.Localizer;\n+import org.apache.openjpa.lib.util.MultiClassLoader;\n import org.apache.openjpa.lib.util.Services;\n \n /**\n@@ -55,8 +56,10 @@\n     private static final Throwable[] _derivationErrors;\n     private static String[] _prefixes;\n     static {\n-        ClassLoader l = AccessController.doPrivileged(\n-            J2DoPrivHelper.getClassLoaderAction(ProductDerivation.class)); \n+        MultiClassLoader l = AccessController.doPrivileged(J2DoPrivHelper.newMultiClassLoaderAction());\n+        l.addClassLoader(0, AccessController\n+            .doPrivileged(J2DoPrivHelper.getClassLoaderAction(ProductDerivations.class)));\n+        l.addClassLoader(1, AccessController.doPrivileged(J2DoPrivHelper.getContextClassLoaderAction()));\n         _derivationNames = Services.getImplementors(ProductDerivation.class, l);\n         _derivationErrors = new Throwable[_derivationNames.length];\n         List<ProductDerivation> derivations ="}]}

