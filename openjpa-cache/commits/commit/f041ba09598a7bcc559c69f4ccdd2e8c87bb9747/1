{"sha":"f041ba09598a7bcc559c69f4ccdd2e8c87bb9747","node_id":"MDY6Q29tbWl0MjA2MzY0OmYwNDFiYTA5NTk4YTdiY2M1NTljNjlmNGNjZGQyZThjODdiYjk3NDc=","commit":{"author":{"name":"Patrick Linskey","email":"pcl@apache.org","date":"2007-04-08T18:11:21Z"},"committer":{"name":"Patrick Linskey","email":"pcl@apache.org","date":"2007-04-08T18:11:21Z"},"message":"fixed some issues with our TCK-running framework to hopefully get it running on Windows\n\ngit-svn-id: https://svn.apache.org/repos/asf/incubator/openjpa/trunk@526588 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"46ea521dedb508d0456031ef1c313ce3704e9493","url":"https://api.github.com/repos/apache/openjpa/git/trees/46ea521dedb508d0456031ef1c313ce3704e9493"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/f041ba09598a7bcc559c69f4ccdd2e8c87bb9747","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/f041ba09598a7bcc559c69f4ccdd2e8c87bb9747","html_url":"https://github.com/apache/openjpa/commit/f041ba09598a7bcc559c69f4ccdd2e8c87bb9747","comments_url":"https://api.github.com/repos/apache/openjpa/commits/f041ba09598a7bcc559c69f4ccdd2e8c87bb9747/comments","author":null,"committer":null,"parents":[{"sha":"89b0cf69b1d27462e4b1e604957cd792a4b340f3","url":"https://api.github.com/repos/apache/openjpa/commits/89b0cf69b1d27462e4b1e604957cd792a4b340f3","html_url":"https://github.com/apache/openjpa/commit/89b0cf69b1d27462e4b1e604957cd792a4b340f3"}],"stats":{"total":21,"additions":18,"deletions":3},"files":[{"sha":"f20c04a31dadff8a7b261a8b8cb37b431f1e466a","filename":"openjpa-integration/tck/pom.xml","status":"modified","additions":15,"deletions":3,"changes":18,"blob_url":"https://github.com/apache/openjpa/blob/f041ba09598a7bcc559c69f4ccdd2e8c87bb9747/openjpa-integration/tck/pom.xml","raw_url":"https://github.com/apache/openjpa/raw/f041ba09598a7bcc559c69f4ccdd2e8c87bb9747/openjpa-integration/tck/pom.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-integration/tck/pom.xml?ref=f041ba09598a7bcc559c69f4ccdd2e8c87bb9747","patch":"@@ -83,6 +83,8 @@\n                             value=\"${basedir}/target/tck\"/>\n                         <property name=\"tck.dir\" value=\"${tck.base}/jpatck\"/>\n \n+                        <delete dir=\"${tck.dir}\"/>\n+\n                         <unzip overwrite=\"false\"\n                             src=\"${tck.zip}\" dest=\"${tck.base}\"/>\n \n@@ -134,7 +136,7 @@ openjpa.jdbc.SchemaFactory: native(ForeignKeys=true)\n                         <property name=\"jpatck.config\"\n                             value=\"${tck.dir}/bin/ts.jte\"/>\n \n-                        <echo append=\"true\" file=\"${jpatck.config}\">\n+                        <echo append=\"false\" file=\"${jpatck.config}.tmp\">\n \n \n #########################################################################\n@@ -145,7 +147,7 @@ jpa.home=${tck.dir}\n work.dir=${jpatck.work.dir}\n report.dir=${tck.dir}/../reports\n jpa.classes=${cp.property}\n-database.classes=$${jpa.classes}\n+database.classes=${jpa.classes}\n # Need to specify java.* classes, both in Windows/UNIX locations as well as Mac\n sigTestClasspath=$${JAVA_HOME}/lib/rt.jar:$${JAVA_HOME}/../Classes/classes.jar:$${jpa.classes}\n persistence.unit.properties.file.full.path=${openjpa.properties}\n@@ -156,12 +158,22 @@ database.driver=${db.driver}\n \n                         </echo>\n \n+                        <!-- convert backslashes and known paths with spaces\n+                            to get around a problem with the TCK testrunner \n+                            on windows -->\n+                        <replace summary=\"yes\" file=\"${jpatck.config}.tmp\" \n+                            replacefilterfile=\"windows-replacefilter.properties\"/>\n+                        <concat append=\"true\" destfile=\"${jpatck.config}\">\n+                            <fileset file=\"${jpatck.config}.tmp\"/>\n+                        </concat>\n+\n                         <path id=\"agent.path\">\n                             <fileset dir=\"../../openjpa-all/target\">\n                                 <include name=\"**/*.jar\"/>\n                             </fileset>\n                         </path>\n-                        <pathconvert property=\"agent\" refid=\"agent.path\"/>\n+                        <pathconvert dirsep=\"/\" property=\"agent\" \n+                            refid=\"agent.path\"/>\n                         <echo>AGENT: ${agent}</echo>\n \n                         <!--"},{"sha":"9522a7b327a8f24691ffa2c6f6dd0fe86a4bde6c","filename":"openjpa-integration/tck/windows-replacefilter.properties","status":"added","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/apache/openjpa/blob/f041ba09598a7bcc559c69f4ccdd2e8c87bb9747/openjpa-integration/tck/windows-replacefilter.properties","raw_url":"https://github.com/apache/openjpa/raw/f041ba09598a7bcc559c69f4ccdd2e8c87bb9747/openjpa-integration/tck/windows-replacefilter.properties","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-integration/tck/windows-replacefilter.properties?ref=f041ba09598a7bcc559c69f4ccdd2e8c87bb9747","patch":"@@ -0,0 +1,3 @@\n+\\\\: /\n+Documents\\ and\\ Settings: Docume~1\n+Program\\ Files: Progra~1"}]}

