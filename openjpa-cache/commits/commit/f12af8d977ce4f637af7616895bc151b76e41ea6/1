{"sha":"f12af8d977ce4f637af7616895bc151b76e41ea6","node_id":"MDY6Q29tbWl0MjA2MzY0OmYxMmFmOGQ5NzdjZTRmNjM3YWY3NjE2ODk1YmMxNTFiNzZlNDFlYTY=","commit":{"author":{"name":"Pinaki Poddar","email":"ppoddar@apache.org","date":"2007-07-19T22:32:26Z"},"committer":{"name":"Pinaki Poddar","email":"ppoddar@apache.org","date":"2007-07-19T22:32:26Z"},"message":"Adding BootstrapException that ProductDerivations recognize during beforeConfigurationConstruct()/load()\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@557798 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"9679d875ab1117739d1d749c32687529230e95c4","url":"https://api.github.com/repos/apache/openjpa/git/trees/9679d875ab1117739d1d749c32687529230e95c4"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/f12af8d977ce4f637af7616895bc151b76e41ea6","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/f12af8d977ce4f637af7616895bc151b76e41ea6","html_url":"https://github.com/apache/openjpa/commit/f12af8d977ce4f637af7616895bc151b76e41ea6","comments_url":"https://api.github.com/repos/apache/openjpa/commits/f12af8d977ce4f637af7616895bc151b76e41ea6/comments","author":null,"committer":null,"parents":[{"sha":"1c9f0ae0ae9c4861d9f0181b3f0174dffb7eb87a","url":"https://api.github.com/repos/apache/openjpa/commits/1c9f0ae0ae9c4861d9f0181b3f0174dffb7eb87a","html_url":"https://github.com/apache/openjpa/commit/1c9f0ae0ae9c4861d9f0181b3f0174dffb7eb87a"}],"stats":{"total":61,"additions":61,"deletions":0},"files":[{"sha":"b58b0cf2c325d86d34cbdc99885484d86176bf5b","filename":"openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/BootstrapException.java","status":"added","additions":55,"deletions":0,"changes":55,"blob_url":"https://github.com/apache/openjpa/blob/f12af8d977ce4f637af7616895bc151b76e41ea6/openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/BootstrapException.java","raw_url":"https://github.com/apache/openjpa/raw/f12af8d977ce4f637af7616895bc151b76e41ea6/openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/BootstrapException.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/BootstrapException.java?ref=f12af8d977ce4f637af7616895bc151b76e41ea6","patch":"@@ -0,0 +1,55 @@\n+/*\r\n+ * Licensed to the Apache Software Foundation (ASF) under one\r\n+ * or more contributor license agreements.  See the NOTICE file\r\n+ * distributed with this work for additional information\r\n+ * regarding copyright ownership.  The ASF licenses this file\r\n+ * to you under the Apache License, Version 2.0 (the\r\n+ * \"License\"); you may not use this file except in compliance\r\n+ * with the License.  You may obtain a copy of the License at\r\n+ *\r\n+ * http://www.apache.org/licenses/LICENSE-2.0\r\n+ *\r\n+ * Unless required by applicable law or agreed to in writing,\r\n+ * software distributed under the License is distributed on an\r\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n+ * KIND, either express or implied.  See the License for the\r\n+ * specific language governing permissions and limitations\r\n+ * under the License.    \r\n+ */\r\n+package org.apache.openjpa.lib.conf;\r\n+/**\r\n+ * Exception recognized by {@link ProductDerivations bootstrap} framework.\r\n+ * \r\n+ * @author Pinaki Poddar\r\n+ * @since 0.4.1.4\r\n+ *\r\n+ */\r\n+public class BootstrapException extends RuntimeException {\r\n+\r\n+\tprivate boolean _fatal = false;\r\n+\t\r\n+\tpublic BootstrapException() {\r\n+\t\tsuper();\r\n+\t}\r\n+\r\n+\tpublic BootstrapException(String message) {\r\n+\t\tsuper(message);\r\n+\t}\r\n+\r\n+\tpublic BootstrapException(Throwable cause) {\r\n+\t\tsuper(cause);\r\n+\t}\r\n+\r\n+\tpublic BootstrapException(String message, Throwable cause) {\r\n+\t\tsuper(message, cause);\r\n+\t}\r\n+\t\r\n+\tpublic BootstrapException setFatal(boolean fatal) {\r\n+\t\t_fatal = fatal;\r\n+\t\treturn this;\r\n+\t}\r\n+\t\r\n+\tpublic boolean isFatal() {\r\n+\t\treturn _fatal;\r\n+\t}\r\n+}\r"},{"sha":"50951457a6cb206a3d4802f783deac1a9aee05a7","filename":"openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/ProductDerivations.java","status":"modified","additions":6,"deletions":0,"changes":6,"blob_url":"https://github.com/apache/openjpa/blob/f12af8d977ce4f637af7616895bc151b76e41ea6/openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/ProductDerivations.java","raw_url":"https://github.com/apache/openjpa/raw/f12af8d977ce4f637af7616895bc151b76e41ea6/openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/ProductDerivations.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-lib/src/main/java/org/apache/openjpa/lib/conf/ProductDerivations.java?ref=f12af8d977ce4f637af7616895bc151b76e41ea6","patch":"@@ -170,6 +170,9 @@ public static void beforeConfigurationConstruct(ConfigurationProvider cp) {\n         for (int i = 0; i < _derivations.length; i++) {\n             try {\n                 _derivations[i].beforeConfigurationConstruct(cp);\n+            } catch (BootstrapException be) {\n+            \tif (be.isFatal())\n+            \t\tthrow be;\n             } catch (Exception e) {\n                 // can't log; no configuration yet\n                 e.printStackTrace();\n@@ -185,6 +188,9 @@ public static void beforeConfigurationLoad(Configuration conf) {\n         for (int i = 0; i < _derivations.length; i++) {\n             try {\n                 _derivations[i].beforeConfigurationLoad(conf);\n+            } catch (BootstrapException be) {\n+            \tif (be.isFatal())\n+            \t\tthrow be;\n             } catch (Exception e) {\n                 // logging not configured yet\n                 e.printStackTrace();"}]}

