{"sha":"f81908f3ac80c9c89c08c034e05eda20bb7f1b21","node_id":"MDY6Q29tbWl0MjA2MzY0OmY4MTkwOGYzYWM4MGM5Yzg5YzA4YzAzNGUwNWVkYTIwYmI3ZjFiMjE=","commit":{"author":{"name":"Richard G. Curtis","email":"curtisr7@apache.org","date":"2011-11-16T17:30:19Z"},"committer":{"name":"Richard G. Curtis","email":"curtisr7@apache.org","date":"2011-11-16T17:30:19Z"},"message":"OPENJPA-1986: Update migration consideration docs and Compatibility javadoc.\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@1202800 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"27ca3c314eb5d16fb09103089a6ee3f3c597ebee","url":"https://api.github.com/repos/apache/openjpa/git/trees/27ca3c314eb5d16fb09103089a6ee3f3c597ebee"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/f81908f3ac80c9c89c08c034e05eda20bb7f1b21","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/f81908f3ac80c9c89c08c034e05eda20bb7f1b21","html_url":"https://github.com/apache/openjpa/commit/f81908f3ac80c9c89c08c034e05eda20bb7f1b21","comments_url":"https://api.github.com/repos/apache/openjpa/commits/f81908f3ac80c9c89c08c034e05eda20bb7f1b21/comments","author":null,"committer":null,"parents":[{"sha":"b66ea198aee33e0ee432d9b5c53c58e71b58b3a1","url":"https://api.github.com/repos/apache/openjpa/commits/b66ea198aee33e0ee432d9b5c53c58e71b58b3a1","html_url":"https://github.com/apache/openjpa/commit/b66ea198aee33e0ee432d9b5c53c58e71b58b3a1"}],"stats":{"total":23,"additions":21,"deletions":2},"files":[{"sha":"495804cc365bcef2453b5885c43ed0f4d04e0e14","filename":"openjpa-kernel/src/main/java/org/apache/openjpa/conf/Compatibility.java","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/apache/openjpa/blob/f81908f3ac80c9c89c08c034e05eda20bb7f1b21/openjpa-kernel/src/main/java/org/apache/openjpa/conf/Compatibility.java","raw_url":"https://github.com/apache/openjpa/raw/f81908f3ac80c9c89c08c034e05eda20bb7f1b21/openjpa-kernel/src/main/java/org/apache/openjpa/conf/Compatibility.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-kernel/src/main/java/org/apache/openjpa/conf/Compatibility.java?ref=f81908f3ac80c9c89c08c034e05eda20bb7f1b21","patch":"@@ -558,7 +558,7 @@ public void setReloadOnDetach(boolean reloadOnDetach) {\n      * only applies for the case where we are trying to cascade a persist to an Entity which doesn't have a StateManager\n      * and we can't determine if it is detached. \n      *   \n-     * @since 2.1.x\n+     * @since 2.1.1\n      */\n     public boolean getCheckDatabaseForCascadePersistToDetachedEntity(){\n         return _checkDatabaseForCascadePersistToDetachedEntity;\n@@ -569,7 +569,7 @@ public boolean getCheckDatabaseForCascadePersistToDetachedEntity(){\n      * only applies for the case where we are trying to cascade a persist to an Entity which doesn't have a StateManager\n      * and we can't determine if it is detached. \n      *   \n-     * @since 2.1.x\n+     * @since 2.1.1\n      */\n     public void setCheckDatabaseForCascadePersistToDetachedEntity(boolean b){\n         _checkDatabaseForCascadePersistToDetachedEntity = b;"},{"sha":"a093772bed88a8df4d6d76d2577696d9a9ad643d","filename":"openjpa-project/src/doc/manual/migration_considerations.xml","status":"modified","additions":19,"deletions":0,"changes":19,"blob_url":"https://github.com/apache/openjpa/blob/f81908f3ac80c9c89c08c034e05eda20bb7f1b21/openjpa-project/src/doc/manual/migration_considerations.xml","raw_url":"https://github.com/apache/openjpa/raw/f81908f3ac80c9c89c08c034e05eda20bb7f1b21/openjpa-project/src/doc/manual/migration_considerations.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-project/src/doc/manual/migration_considerations.xml?ref=f81908f3ac80c9c89c08c034e05eda20bb7f1b21","patch":"@@ -458,6 +458,25 @@\n                     <xref linkend=\"jpa_2.2_allocationSize\"/>.\n                 </para>\n             </section>            \n+        \t<section id=\"jpa_2.2_cascadePersist\">\n+                <title>\n+                    Cascade persist behavior\n+                </title>\n+                <!-- See OPENJPA-1986 for details. -->\n+\t\t\t\t<para>\n+\t\t\t\t\tIn previous releases, OpenJPA would check the database for the\n+\t\t\t\t\texistence of the related Entity before persisting the relationship to\n+\t\t\t\t\tthat Entity. This resulted in an extra Select being sent to the\n+\t\t\t\t\tdatabase. In 2.2.0, code was added so that when cascading a persist to\n+\t\t\t\t\ta related Entity without persistence state, the persist (insert) will\n+\t\t\t\t\thappen without first checking the database. This may result in an\n+\t\t\t\t\tEntityExistsException if the related Entity already exists in the\n+\t\t\t\t\tdatabase. To revert this behavior to the previous release, set the\n+\t\t\t\t\tvalue of the <literal>openjpa.Compatibility</literal>\n+\t\t\t\t\tproperty <literal>CheckDatabaseForCascadePersistToDetachedEntity</literal>\n+\t\t\t\t\tto <literal>true</literal>.\n+\t\t\t\t</para>\n+            </section>\n         </section>\n     </section>\n </appendix>"}]}

