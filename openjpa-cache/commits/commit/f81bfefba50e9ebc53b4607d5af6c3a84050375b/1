{"sha":"f81bfefba50e9ebc53b4607d5af6c3a84050375b","node_id":"MDY6Q29tbWl0MjA2MzY0OmY4MWJmZWZiYTUwZTllYmM1M2I0NjA3ZDVhZjZjM2E4NDA1MDM3NWI=","commit":{"author":{"name":"Fay Wang","email":"faywang@apache.org","date":"2008-10-22T23:30:31Z"},"committer":{"name":"Fay Wang","email":"faywang@apache.org","date":"2008-10-22T23:30:31Z"},"message":"OPENJPA-745: raise exception when the string to be inserted\nor updated is longer than the column length.\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/branches/1.2.x@707222 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"95a5c9a4351870fa54d5b355e7bb77970be08c36","url":"https://api.github.com/repos/apache/openjpa/git/trees/95a5c9a4351870fa54d5b355e7bb77970be08c36"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/f81bfefba50e9ebc53b4607d5af6c3a84050375b","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/f81bfefba50e9ebc53b4607d5af6c3a84050375b","html_url":"https://github.com/apache/openjpa/commit/f81bfefba50e9ebc53b4607d5af6c3a84050375b","comments_url":"https://api.github.com/repos/apache/openjpa/commits/f81bfefba50e9ebc53b4607d5af6c3a84050375b/comments","author":null,"committer":null,"parents":[{"sha":"f9f1965f012867347221005cfd45efb55e123a9a","url":"https://api.github.com/repos/apache/openjpa/commits/f9f1965f012867347221005cfd45efb55e123a9a","html_url":"https://github.com/apache/openjpa/commit/f9f1965f012867347221005cfd45efb55e123a9a"}],"stats":{"total":14,"additions":13,"deletions":1},"files":[{"sha":"ce8f050a6d11685101ebca2d8b0c64b11c03b337","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DBDictionary.java","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/apache/openjpa/blob/f81bfefba50e9ebc53b4607d5af6c3a84050375b/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DBDictionary.java","raw_url":"https://github.com/apache/openjpa/raw/f81bfefba50e9ebc53b4607d5af6c3a84050375b/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DBDictionary.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/DBDictionary.java?ref=f81bfefba50e9ebc53b4607d5af6c3a84050375b","patch":"@@ -199,6 +199,7 @@\n     public String selectWords = null;\n     public String fixedSizeTypeNames = null;\n     public String schemaCase = SCHEMA_CASE_UPPER;\n+    public boolean setStringRightTruncationOn = true;\n \n     // sql\n     public String validationSQL = null;"},{"sha":"81464d5dc75a7b7dfc0b0a10e6701e00a61446a0","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SybaseDictionary.java","status":"modified","additions":12,"deletions":1,"changes":13,"blob_url":"https://github.com/apache/openjpa/blob/f81bfefba50e9ebc53b4607d5af6c3a84050375b/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SybaseDictionary.java","raw_url":"https://github.com/apache/openjpa/raw/f81bfefba50e9ebc53b4607d5af6c3a84050375b/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SybaseDictionary.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/SybaseDictionary.java?ref=f81bfefba50e9ebc53b4607d5af6c3a84050375b","patch":"@@ -266,7 +266,18 @@ public void endConfiguration() {\n \n     public Connection decorate(Connection conn)\n         throws SQLException {\n-        return new SybaseConnection(super.decorate(conn));\n+        conn = super.decorate(conn);\n+        // In order for Sybase to raise the truncation exception when the \n+        // string length is greater than the column length for Char, VarChar, \n+        // Binary, VarBinary, the \"set string_rtruncation on\" must be executed. \n+        // This setting is effective for the duration of current connection.\n+        if (setStringRightTruncationOn) {\n+            String str = \"set string_rtruncation on\";\n+            PreparedStatement stmnt = prepareStatement(conn, str);        \n+            stmnt.execute();\n+            stmnt.close();\n+        }\n+        return new SybaseConnection(conn);\n     }\n \n     /**"}]}

