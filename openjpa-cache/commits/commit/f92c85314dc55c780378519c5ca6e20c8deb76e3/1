{"sha":"f92c85314dc55c780378519c5ca6e20c8deb76e3","node_id":"MDY6Q29tbWl0MjA2MzY0OmY5MmM4NTMxNGRjNTVjNzgwMzc4NTE5YzVjYTZlMjBjOGRlYjc2ZTM=","commit":{"author":{"name":"Mark Struberg","email":"struberg@apache.org","date":"2020-08-31T13:02:23Z"},"committer":{"name":"Mark Struberg","email":"struberg@apache.org","date":"2020-08-31T14:09:17Z"},"message":"OPENJPA-2795 add documentation and PostgreSQL support\n\nPostgres also doesn't automatically create a foreign key index.","tree":{"sha":"dcc560fe8a995bf3be48ebc57bc9b733abfe4ef1","url":"https://api.github.com/repos/apache/openjpa/git/trees/dcc560fe8a995bf3be48ebc57bc9b733abfe4ef1"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/f92c85314dc55c780378519c5ca6e20c8deb76e3","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/f92c85314dc55c780378519c5ca6e20c8deb76e3","html_url":"https://github.com/apache/openjpa/commit/f92c85314dc55c780378519c5ca6e20c8deb76e3","comments_url":"https://api.github.com/repos/apache/openjpa/commits/f92c85314dc55c780378519c5ca6e20c8deb76e3/comments","author":{"login":"struberg","id":79310,"node_id":"MDQ6VXNlcjc5MzEw","avatar_url":"https://avatars.githubusercontent.com/u/79310?v=4","gravatar_id":"","url":"https://api.github.com/users/struberg","html_url":"https://github.com/struberg","followers_url":"https://api.github.com/users/struberg/followers","following_url":"https://api.github.com/users/struberg/following{/other_user}","gists_url":"https://api.github.com/users/struberg/gists{/gist_id}","starred_url":"https://api.github.com/users/struberg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/struberg/subscriptions","organizations_url":"https://api.github.com/users/struberg/orgs","repos_url":"https://api.github.com/users/struberg/repos","events_url":"https://api.github.com/users/struberg/events{/privacy}","received_events_url":"https://api.github.com/users/struberg/received_events","type":"User","site_admin":false},"committer":{"login":"struberg","id":79310,"node_id":"MDQ6VXNlcjc5MzEw","avatar_url":"https://avatars.githubusercontent.com/u/79310?v=4","gravatar_id":"","url":"https://api.github.com/users/struberg","html_url":"https://github.com/struberg","followers_url":"https://api.github.com/users/struberg/followers","following_url":"https://api.github.com/users/struberg/following{/other_user}","gists_url":"https://api.github.com/users/struberg/gists{/gist_id}","starred_url":"https://api.github.com/users/struberg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/struberg/subscriptions","organizations_url":"https://api.github.com/users/struberg/orgs","repos_url":"https://api.github.com/users/struberg/repos","events_url":"https://api.github.com/users/struberg/events{/privacy}","received_events_url":"https://api.github.com/users/struberg/received_events","type":"User","site_admin":false},"parents":[{"sha":"c13f0b0e136b0c2730c769948937975a92055940","url":"https://api.github.com/repos/apache/openjpa/commits/c13f0b0e136b0c2730c769948937975a92055940","html_url":"https://github.com/apache/openjpa/commit/c13f0b0e136b0c2730c769948937975a92055940"}],"stats":{"total":30,"additions":30,"deletions":0},"files":[{"sha":"644442a1142ce24a17ba15116ae88af6fe5dbbb3","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/PostgresDictionary.java","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/apache/openjpa/blob/f92c85314dc55c780378519c5ca6e20c8deb76e3/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/PostgresDictionary.java","raw_url":"https://github.com/apache/openjpa/raw/f92c85314dc55c780378519c5ca6e20c8deb76e3/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/PostgresDictionary.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/sql/PostgresDictionary.java?ref=f92c85314dc55c780378519c5ca6e20c8deb76e3","patch":"@@ -209,6 +209,8 @@ public PostgresDictionary() {\n         _timestampTypes.add(\"ABSTIME\");\n         _timestampTypes.add(\"TIMESTAMP\");\n         _timestampTypes.add(timestampTypeName.toUpperCase(Locale.ENGLISH)); // handle user configured timestamp types.\n+\n+        indexPhysicalForeignKeys = true; // PostgreSQL does not automatically create an index for a foreign key so we will\n     }\n \n     @Override"},{"sha":"7024116d0586d22778a565c29945ec4541c06014","filename":"openjpa-project/src/doc/manual/ref_guide_dbsetup.xml","status":"modified","additions":21,"deletions":0,"changes":21,"blob_url":"https://github.com/apache/openjpa/blob/f92c85314dc55c780378519c5ca6e20c8deb76e3/openjpa-project/src/doc/manual/ref_guide_dbsetup.xml","raw_url":"https://github.com/apache/openjpa/raw/f92c85314dc55c780378519c5ca6e20c8deb76e3/openjpa-project/src/doc/manual/ref_guide_dbsetup.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-project/src/doc/manual/ref_guide_dbsetup.xml?ref=f92c85314dc55c780378519c5ca6e20c8deb76e3","patch":"@@ -1810,6 +1810,27 @@ works around cases where the limit is exceeded.  Defaults to -1 meaning\n no limit.\n                     </para>\n                 </listitem>\n+\n+                <listitem id=\"DBDictionary.IndexPhysicalForeignKeys\">\n+                    <para>\n+                        <indexterm>\n+                            <primary>\n+                                DDL\n+                            </primary>\n+                            <secondary>\n+                                IndexPhysicalForeignKeys\n+                            </secondary>\n+                        </indexterm>\n+                        <literal>IndexPhysicalForeignKeys</literal>:\n+                        Whether a search Index should automatically get created on a physical foreign key.\n+                        Some databases, like MySQL, handle this internally, so we do not need to generate\n+                        an explicit Index in our DDL. Other databases need an explicit serach index\n+                        on foreign key columns to improve performance.\n+\n+                        IndexPhysicalForeignKeys defaults to true for Oracle, MS-SQL and PostgreSQL.\n+                    </para>\n+                </listitem>\n+\n                 <listitem id=\"DBDictionary.InitializationSQL\">\n                     <para>\n                     <indexterm>"},{"sha":"a998102707308316dceaea0f9d9ae05e7f631ed2","filename":"openjpa-project/src/doc/manual/ref_guide_mapping.xml","status":"modified","additions":7,"deletions":0,"changes":7,"blob_url":"https://github.com/apache/openjpa/blob/f92c85314dc55c780378519c5ca6e20c8deb76e3/openjpa-project/src/doc/manual/ref_guide_mapping.xml","raw_url":"https://github.com/apache/openjpa/raw/f92c85314dc55c780378519c5ca6e20c8deb76e3/openjpa-project/src/doc/manual/ref_guide_mapping.xml","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-project/src/doc/manual/ref_guide_mapping.xml?ref=f92c85314dc55c780378519c5ca6e20c8deb76e3","patch":"@@ -1186,6 +1186,13 @@ database foreign key. Defaults to true.\n                     </listitem>\n                     <listitem>\n                         <para>\n+<literal>IndexPhysicalForeignKeys</literal>: Boolean property controlling\n+whether to create explicit indexes on real physical foreign keys.\n+The default value will be taken from the corresponding <literal>DBDictionary</literal> attribute.\n+                        </para>\n+                    </listitem>\n+                    <listitem>\n+                        <para>\n <literal>DataStoreIdColumnName</literal>: The default name of datastore\n identity columns.\n                         </para>"}]}

