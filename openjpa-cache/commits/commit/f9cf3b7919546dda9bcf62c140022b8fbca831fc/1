{"sha":"f9cf3b7919546dda9bcf62c140022b8fbca831fc","node_id":"MDY6Q29tbWl0MjA2MzY0OmY5Y2YzYjc5MTk1NDZkZGE5YmNmNjJjMTQwMDIyYjhmYmNhODMxZmM=","commit":{"author":{"name":"Jeremy Bauer","email":"jrbauer@apache.org","date":"2012-02-09T21:52:28Z"},"committer":{"name":"Jeremy Bauer","email":"jrbauer@apache.org","date":"2012-02-09T21:52:28Z"},"message":"OPENJPA-2124 Committing patch contributed by Helen Xu.  Test covered by existing jUnit.\n\ngit-svn-id: https://svn.apache.org/repos/asf/openjpa/trunk@1242547 13f79535-47bb-0310-9956-ffa450edef68","tree":{"sha":"6263fc990bdf7037fb10b9c6b952993843357b6d","url":"https://api.github.com/repos/apache/openjpa/git/trees/6263fc990bdf7037fb10b9c6b952993843357b6d"},"url":"https://api.github.com/repos/apache/openjpa/git/commits/f9cf3b7919546dda9bcf62c140022b8fbca831fc","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/apache/openjpa/commits/f9cf3b7919546dda9bcf62c140022b8fbca831fc","html_url":"https://github.com/apache/openjpa/commit/f9cf3b7919546dda9bcf62c140022b8fbca831fc","comments_url":"https://api.github.com/repos/apache/openjpa/commits/f9cf3b7919546dda9bcf62c140022b8fbca831fc/comments","author":null,"committer":null,"parents":[{"sha":"0f17510c5cede34e676f6f9587c2690b97bea1a5","url":"https://api.github.com/repos/apache/openjpa/commits/0f17510c5cede34e676f6f9587c2690b97bea1a5","html_url":"https://github.com/apache/openjpa/commit/0f17510c5cede34e676f6f9587c2690b97bea1a5"}],"stats":{"total":7,"additions":6,"deletions":1},"files":[{"sha":"ce7ef371e9051e0daa8b1015af796a6e8700c2e4","filename":"openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/meta/strats/XMLValueHandler.java","status":"modified","additions":6,"deletions":1,"changes":7,"blob_url":"https://github.com/apache/openjpa/blob/f9cf3b7919546dda9bcf62c140022b8fbca831fc/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/meta/strats/XMLValueHandler.java","raw_url":"https://github.com/apache/openjpa/raw/f9cf3b7919546dda9bcf62c140022b8fbca831fc/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/meta/strats/XMLValueHandler.java","contents_url":"https://api.github.com/repos/apache/openjpa/contents/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/meta/strats/XMLValueHandler.java?ref=f9cf3b7919546dda9bcf62c140022b8fbca831fc","patch":"@@ -98,7 +98,12 @@ public Object toObjectValue(ValueMapping vm, Object val) {\n         if (val == null) \n             return null;\n         try {\n-            String packageName = vm.getDeclaredType().getPackage().getName();\n+            String className  = vm.getDeclaredType().getName();\n+            int i = className.lastIndexOf('.');\n+            String packageName = className;\n+            if (i != -1) {\n+                packageName = className.substring(0, i);\n+            }\n             JAXBContext jc = JAXBContext.newInstance(packageName);\n             Unmarshaller u = jc.createUnmarshaller();\n             return u.unmarshal(new StreamSource(new StringReader"}]}

