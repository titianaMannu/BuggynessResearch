{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12360675","self":"https://issues.apache.org/jira/rest/api/2/issue/12360675","key":"OPENJPA-103","fields":{"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312340","id":"12312340","description":"","name":"0.9.7","archived":true,"released":true,"releaseDate":"2007-04-27"}],"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12312323":null,"customfield_12312320":null,"customfield_12310420":"160440","customfield_12312321":null,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12312331":null,"customfield_12312332":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"customfield_12312330":null,"versions":[],"customfield_12311120":null,"customfield_12313826":null,"customfield_12312339":null,"issuelinks":[],"customfield_12313825":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kwsutter","name":"kwsutter","key":"kwsutter","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kevin W. Sutter","active":true,"timeZone":"America/Chicago"},"customfield_12312337":null,"customfield_12313823":null,"customfield_12312338":null,"customfield_12311920":null,"customfield_12313822":null,"customfield_12312335":null,"customfield_12313821":null,"customfield_12312336":null,"customfield_12313820":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12311304","id":"12311304","name":"jpa","description":"Java Persistence API interface"}],"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"203024","customfield_12312823":null,"creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kwsutter","name":"kwsutter","key":"kwsutter","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kevin W. Sutter","active":true,"timeZone":"America/Chicago"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kwsutter","name":"kwsutter","key":"kwsutter","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kevin W. Sutter","active":true,"timeZone":"America/Chicago"},"aggregateprogress":{"progress":0,"total":0},"customfield_12313520":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"customfield_12313924":null,"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/OPENJPA-103/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12313920":null,"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"customfield_12314020":"{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@7bd70ce8[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3d41fd6f[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1588cd62[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@2710f039[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5fd9b20d[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@50f5f99c[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3c5cd3d[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@23747444[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@31aff3fd[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@4e69d54d[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@63684598[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@63becbe5[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}","customfield_12314141":null,"customfield_12314140":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310351","id":"12310351","key":"OPENJPA","name":"OpenJPA","projectTypeKey":"software","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310351&avatarId=10043","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310351&avatarId=10043","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310351&avatarId=10043","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310351&avatarId=10043"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10252","id":"10252","description":"","name":"OpenJPA"}},"aggregatetimespent":null,"customfield_12312520":null,"customfield_12314422":null,"customfield_12314421":null,"customfield_12314146":null,"customfield_12314420":null,"customfield_12314145":null,"customfield_12314144":null,"customfield_12314143":null,"resolutiondate":"2007-01-17T22:50:03.253+0000","workratio":-1,"customfield_12312923":null,"customfield_12312920":null,"customfield_12312921":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/OPENJPA-103/watchers","watchCount":0,"isWatching":false},"created":"2007-01-17T17:08:31.919+0000","updated":"2007-07-31T18:57:05.553+0000","timeoriginalestimate":null,"description":"The basic problem is this:  I'm attempting to specify some entity listeners in my orm.xml , but I continue to get the following TRACE message:\n\n322664  my persistence unit  TRACE  [main] openjpa.MetaData - OpenJPA does not currently support XML element \"pre-persist\". Ignoring.\n\nThe following discussion is from the openjpa-dev mailing list...\n\n------------------------------------------------------------\nMarc,\nThanks for the background on the earlier drafts of the JPA spec.  That helps explain some of the processing that I see.  I also now see that elements tagged as MetaDataTags have corresponding annotation support associated with them.  So, it looks like I just need to provide similar callback processing for the pre-* and post-* methods at the \"system\" level as exist at the \"class\" levels.  Thanks for your insights.\n\nKevin\n- Hide quoted text -\n\n\nOn 1/16/07, Marc Prud'hommeaux <mprudhom@apache.org> wrote:\n\n    Kevin-\n\n    The draft of the JPA spec said that \"pre-persist\" was only supported\n    beneath the \"entity-listeners\" (note plural) element, rather than\n    \"entity-listener\". This appears to have been corrected in the final\n    version of the spec, but it looks like we never updated that part of\n    the code (and the CTS doesn't test for it). This is indeed a bug.\n\n    As for how the parser works, I'm afraid I don't know all that much\n    about it (aside from sharing your observation that it is complex).\n    Hopefully, though, my comment above will make the problem make a\n    little more sense to you...\n\n\n\n    On Jan 16, 2007, at 3:20 PM, Kevin Sutter wrote:\n\n    > Looking for some assistance (that is, background information) on\n    > how the\n    > orm.xml parsing is supposed to work.  I'm attempting to specify\n    > some entity\n    > listeners in my orm.xml , but I continue to get the following TRACE\n    > message:\n    >\n    > 322664  my persistence unit  TRACE  [main] openjpa.MetaData -\n    > OpenJPA does\n    > not currently support XML element \"pre-persist\". Ignoring.\n    >\n    > My orm.xml looks like this:\n    >\n    > <entity-mappings\n    >    xmlns=\"http://java.sun.com/xml/ns/persistence/orm\"\n    >    xmlns:xsi=\" http://www.w3.org/2001/XMLSchema-instance\"\n    >    xsi:schemaLocation=\"http://java.sun.com/xml/ns/persistence/orm\n    > http://java.sun.com/xml/ns/persistence/orm_1_0.xsd\"\n    >    version=\"1.0\">\n    >    <persistence-unit-metadata>\n    >        <persistence-unit-defaults>\n    >            <entity-listeners>\n    >                <entity-listener class=\"\n    > com.ibm.ws.persistence.tests.simple.TestEntity\">\n    >                    <pre-persist  method-name=\"prePersist\" />\n    >                    <post-persist method-name=\"postPersist\" />\n    >                    <pre-remove   method-name=\"preRemove\" />\n    >                    <post-remove  method-name=\"postRemove\" />\n    >                    <pre-update   method-name=\"preUpdate\" />\n    >                    <post-update  method-name=\"postUpdate\" />\n    >                    <post-load    method-name=\"postLoad\" />\n    >                </entity-listener>\n    >            </entity-listeners>\n    >        </persistence-unit-defaults>\n    >    </persistence-unit-metadata>\n    > </entity-mappings>\n    >\n    > I've started to debug this problem, but I have some general\n    > questions on how\n    > the SAX parser is supposed to work.  I see in the\n    > CFMetaDataParser.startElement() where these \"entity-listener\"\n    > related tags\n    > are treated as System Elements -- we end up calling\n    > XMLPersistenceMetaDataParser.startSystemElement().\n    >\n    > The processing in this method is dependent on whether the given\n    > element is a\n    > MetaDataTag or not.  When we process the \"entity-listener\" element,\n    > it's\n    > treated like a \"normal\" element and we fall past the switch\n    > statement and\n    > eventually call startEntityListener().  This processing all seems\n    > to depend\n    > on whether the _elems hashmap contains a string entry or a\n    > MetatDataTag for\n    > a given Element.  What is the significance of being a MetaDataTag\n    > or not?\n    >\n    > In this simple orm.xml, I have noticed that persistence-unit-metadata,\n    > persistence-unit-defaults, and entity-listener are not\n    > MetaDataTags.  But,\n    > entity-listeners and the individual pre-persist, post-persist, etc\n    > elements\n    > are all MetaDataTags.\n    >\n    > When one of these pre-* or post-* MetaDataTag elements are\n    > processed in the\n    > startSystemElement() method, we fall into the default leg of the\n    > switch\n    > statement and produce the TRACE message outlined above.\n    >\n    > Any pointers would be appreciated.  Thanks!\n    >\n    > Kevin\n------------------------------------------------------------","customfield_10010":null,"timetracking":{},"customfield_12314523":null,"customfield_12314127":null,"customfield_12314522":null,"customfield_12314126":null,"customfield_12314521":null,"customfield_12314125":null,"customfield_12314520":null,"customfield_12314124":null,"attachment":[],"customfield_12312340":null,"customfield_12314123":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12314122":null,"customfield_12314121":null,"customfield_12310041":null,"customfield_12314120":null,"customfield_12314129":null,"customfield_12314524":null,"customfield_12314128":null,"summary":"Default Listeners not being processed correctly","customfield_12314130":null,"customfield_12310291":null,"customfield_12310290":null,"customfield_12314138":null,"customfield_12314137":null,"environment":null,"customfield_12314136":null,"customfield_12314135":null,"customfield_12311020":null,"customfield_12314134":null,"duedate":null,"customfield_12314132":null,"customfield_12314131":null,"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12360675/comment/12465593","id":"12465593","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kwsutter","name":"kwsutter","key":"kwsutter","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kevin W. Sutter","active":true,"timeZone":"America/Chicago"},"body":"The processing in the XMLPersistenceMetaDataParser.startSystemElement method had to be updated to recognize the pre-* and post-* lifecycle methods as being valid entries at the \"system\" level.  Since this processing was already part of the \"class\" level, I just had to add the corresponding case entry and invocation of the methods.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kwsutter","name":"kwsutter","key":"kwsutter","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kevin W. Sutter","active":true,"timeZone":"America/Chicago"},"created":"2007-01-17T22:50:03.238+0000","updated":"2007-01-17T22:50:03.238+0000"}],"maxResults":1,"total":1,"startAt":0},"customfield_12311820":"0|i0z4gf:","customfield_12314139":null}}

