{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12362662","self":"https://issues.apache.org/jira/rest/api/2/issue/12362662","key":"OPENJPA-142","fields":{"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312340","id":"12312340","description":"","name":"0.9.7","archived":true,"released":true,"releaseDate":"2007-04-27"}],"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12312323":null,"customfield_12312320":null,"customfield_12310420":"160476","customfield_12312321":null,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12312331":null,"customfield_12312332":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312343","id":"12312343","description":"","name":"0.9.0","archived":true,"released":true,"releaseDate":"2006-08-26"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12312342","id":"12312342","description":"","name":"0.9.6","archived":true,"released":true,"releaseDate":"2006-11-29"}],"customfield_12311120":null,"customfield_12313826":null,"customfield_12312339":null,"issuelinks":[],"customfield_12313825":null,"assignee":null,"customfield_12312337":null,"customfield_12313823":null,"customfield_12312338":null,"customfield_12311920":null,"customfield_12313822":null,"customfield_12312335":null,"customfield_12313821":null,"customfield_12312336":null,"customfield_12313820":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12311304","id":"12311304","name":"jpa","description":"Java Persistence API interface"}],"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"202529","customfield_12312823":null,"creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mprudhom","name":"mprudhom","key":"mprudhom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mprudhom&avatarId=45285","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mprudhom&avatarId=45285","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mprudhom&avatarId=45285","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mprudhom&avatarId=45285"},"displayName":"Marc Prud'hommeaux","active":true,"timeZone":"America/New_York"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mprudhom","name":"mprudhom","key":"mprudhom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mprudhom&avatarId=45285","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mprudhom&avatarId=45285","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mprudhom&avatarId=45285","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mprudhom&avatarId=45285"},"displayName":"Marc Prud'hommeaux","active":true,"timeZone":"America/New_York"},"aggregateprogress":{"progress":0,"total":0},"customfield_12313520":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"customfield_12313924":null,"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/OPENJPA-142/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12313920":null,"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"customfield_12314020":"{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@3f62489c[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@105b1a25[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@122bb690[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@5ae91cc2[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@93f94e6[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@37dbf0ae[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@788b5ff3[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@6a16432c[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1ffb722c[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@774daffd[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@559b0220[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@d4c249c[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}","customfield_12314141":null,"customfield_12314140":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310351","id":"12310351","key":"OPENJPA","name":"OpenJPA","projectTypeKey":"software","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310351&avatarId=10043","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310351&avatarId=10043","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310351&avatarId=10043","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310351&avatarId=10043"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10252","id":"10252","description":"","name":"OpenJPA"}},"aggregatetimespent":null,"customfield_12312520":null,"customfield_12314422":null,"customfield_12314421":null,"customfield_12314146":null,"customfield_12314420":null,"customfield_12314145":null,"customfield_12314144":null,"customfield_12314143":null,"resolutiondate":"2007-03-10T11:15:38.376+0000","workratio":-1,"customfield_12312923":null,"customfield_12312920":null,"customfield_12312921":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/OPENJPA-142/watchers","watchCount":2,"isWatching":false},"created":"2007-02-13T07:58:54.766+0000","updated":"2010-03-09T18:32:30.723+0000","timeoriginalestimate":null,"description":"The XMLPersistenceMetaDataParser ignores the \"name\" attriburte of an \"entity\" element, and instead always uses the default alias. For example, with the following declaration in the orm.xml file:\n\n   <entity name=\"Foo\" class=\"mypackage.Bar\">\n\nthe entity will be aliased to \"Bar\", rather than to \"Foo\".\n\nOriginal report by Dain Sundstrom on the open-jpa-dev mailing list:\n\nI'm using 0.9.6 and it appears the OpenJPA is ignoring the entity name when processing queries.  In stead it seems to always choose the class name for the schema name of the bean.  For example, I have the following bean declared in my entity mappings:\n\n    <entity name=\"BasicCmp2Bean\" class=\"org.apache.openejb.test.entity.cmp.BasicCmp2Bean_BasicCmp2Bean\">\n        <description>BasicCmp2Bean</description>\n        <attributes>\n            <id name=\"id\"/>\n            <basic name=\"firstName\"/>\n            <basic name=\"lastName\"/>\n        </attributes>\n    </entity>\n\n\nThe following query does not work:\n\n        SELECT o FROM BasicCmp2Bean o WHERE o.lastName = ?1\n\nBut this one does:\n\n        SELECT o FROM BasicCmp2Bean_BasicCmp2Bean o WHERE o.lastName = ?1\n\nWhen the query fails, I get this message (reformatted a bit with ** added to important entries):\n\nERROR - The bean instances business method encountered a system exception: Could not locate metadata for the class using alias \"BasicCmp2Bean\". Registered alias mappings: \"{\nAllowedOperationsCmp2Bean_AOBasicCmp2Bean=\n  [class org.apache.openejb.test.entity.cmp.AllowedOperationsCmp2Bean_AOBasicCmp2Bean],\nAllowedOperationsCmpBean=\n  [class org.apache.openejb.test.entity.cmp.AllowedOperationsCmpBean],\nContextLookupCmpBean=\n  [class org.apache.openejb.test.entity.cmp.ContextLookupCmpBean],\nEmployee=\n  [class org.apache.openejb.test.entity.cmp2.Employee],\nManyOwningSideBean_ManyOwningSideBean=\n  [class org.apache.openejb.test.entity.cmr.cmrmapping.ManyOwningSideBean_ManyOwningSideBean],\n**BasicCmp2Bean_BasicCmp2Bean=\n  [class org.apache.openejb.test.entity.cmp.BasicCmp2Bean_BasicCmp2Bean],\nEncCmpBean=\n  [class org.apache.openejb.test.entity.cmp.EncCmpBean],\nBBean_OneToOneB=\n  [class org.apache.openejb.test.entity.cmr.onetoone.BBean_OneToOneB],\nOneOwningSideBean_OneOwningSideBean=\n  [class org.apache.openejb.test.entity.cmr.cmrmapping.OneOwningSideBean_OneOwningSideBean],\nABean_OneToOneA=\n  [class org.apache.openejb.test.entity.cmr.onetoone.ABean_OneToOneA],\n**BasicCmp2Bean=null,\nRmiIiopCmpBean=\n  [class org.apache.openejb.test.entity.cmp.RmiIiopCmpBean],\nABean_OneToManyA=\n  [class org.apache.openejb.test.entity.cmr.onetomany.ABean_OneToManyA],\nOneInverseSideBean_OneInverseSideBean=\n  [class org.apache.openejb.test.entity.cmr.cmrmapping.OneInverseSideBean_OneInverseSideBean],\nBBean_OneToManyB=\n  [class org.apache.openejb.test.entity.cmr.onetomany.BBean_OneToManyB],\nRmiIiopCmp2Bean_Cmp2_RMI_IIOP_Bean=\n  [class org.apache.openejb.test.entity.cmp.RmiIiopCmp2Bean_Cmp2_RMI_IIOP_Bean],\nEncCmp2Bean_EncCmp2Bean=\n  [class org.apache.openejb.test.entity.cmp.EncCmp2Bean_EncCmp2Bean],\nBasicCmpBean=\n  [class org.apache.openejb.test.entity.cmp.BasicCmpBean]}\"\n\n","customfield_10010":null,"timetracking":{},"customfield_12314523":null,"customfield_12314127":null,"customfield_12314522":null,"customfield_12314126":null,"customfield_12314521":null,"customfield_12314125":null,"customfield_12314520":null,"customfield_12314124":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12351880","id":"12351880","filename":"Tests-JPA-1.zip","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ephemeris","name":"ephemeris","key":"ephemeris","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ephemeris&avatarId=44755","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ephemeris&avatarId=44755","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ephemeris&avatarId=44755","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ephemeris&avatarId=44755"},"displayName":"Ephemeris Lappis","active":true,"timeZone":"Europe/Berlin"},"created":"2007-02-23T10:53:24.144+0000","size":20620,"mimeType":"application/zip","content":"https://issues.apache.org/jira/secure/attachment/12351880/Tests-JPA-1.zip"}],"customfield_12312340":null,"customfield_12314123":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12314122":null,"customfield_12314121":null,"customfield_12310041":null,"customfield_12314120":null,"customfield_12314129":null,"customfield_12314524":null,"customfield_12314128":null,"summary":"Entity name is ignored when specified in the orm.xml file","customfield_12314130":null,"customfield_12310291":null,"customfield_12310290":null,"customfield_12314138":null,"customfield_12314137":null,"environment":null,"customfield_12314136":null,"customfield_12314135":null,"customfield_12311020":null,"customfield_12314134":null,"duedate":null,"customfield_12314132":null,"customfield_12314131":null,"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12362662/comment/12472557","id":"12472557","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mprudhom","name":"mprudhom","key":"mprudhom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mprudhom&avatarId=45285","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mprudhom&avatarId=45285","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mprudhom&avatarId=45285","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mprudhom&avatarId=45285"},"displayName":"Marc Prud'hommeaux","active":true,"timeZone":"America/New_York"},"body":"This can be worked around by adding the annotation to the class (e.g., @Entity(name=\"Foo\") ).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mprudhom","name":"mprudhom","key":"mprudhom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mprudhom&avatarId=45285","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mprudhom&avatarId=45285","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mprudhom&avatarId=45285","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mprudhom&avatarId=45285"},"displayName":"Marc Prud'hommeaux","active":true,"timeZone":"America/New_York"},"created":"2007-02-13T08:01:09.393+0000","updated":"2007-02-13T08:01:09.393+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12362662/comment/12472844","id":"12472844","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dain","name":"dain","key":"dain","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dain Sundstrom","active":true,"timeZone":"America/Los_Angeles"},"body":"I think I found a related bug to this.  When you have a mapped-superclass and an entity with the same class name (but not the same package).  The query compiler seems to get confused and throws the exception following this message.\n\nYou should be able to reproduce this by putting your sub class in a different package but with the same class name, and executing any query.  I'm not sure if this problem goes away by annotating the entity as you described above.\n\n-dain\n\n\n3276  TRACE  [main] openjpa.jdbc.JDBC - <t 5323819, conn 2614990> [0 ms] close\nERROR - Executing query SELECT o FROM BasicCmpBean o WHERE o.lastName = ?1\n11:30:06,372 ERROR [OpenEJB] Executing query SELECT o FROM BasicCmpBean o WHERE o.lastName = ?1\n3561  TRACE  [main] openjpa.Query - Executing query: [SELECT o FROM BasicCmpBean o WHERE o.lastName = ?1] with parameters: {1=Blevins}\nERROR - The bean instances business method encountered a system exception:0\n<4|false|0.9.6-incubating> org.apache.openjpa.persistence.ArgumentException: 0\n\tat org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:798)\n\tat org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:759)\n\tat org.apache.openjpa.kernel.DelegatingQuery.execute(DelegatingQuery.java:528)\n\tat org.apache.openjpa.persistence.QueryImpl.execute(QueryImpl.java:210)\n\tat org.apache.openjpa.persistence.QueryImpl.getResultList(QueryImpl.java:251)\n\tat org.apache.openejb.core.cmp.jpa.JpaCmpEngine.queryBeans(JpaCmpEngine.java:192)\n\tat org.apache.openejb.core.cmp.CmpContainer.findEJBObject(CmpContainer.java:640)\n\tat org.apache.openejb.core.cmp.CmpContainer.invoke(CmpContainer.java:245)\n\tat org.apache.openejb.core.entity.EntityEjbHomeHandler.findX(EntityEjbHomeHandler.java:56)\n\tat org.apache.openejb.core.ivm.EjbHomeProxyHandler._invoke(EjbHomeProxyHandler.java:122)\n\tat org.apache.openejb.core.ivm.BaseEjbProxyHandler.invoke(BaseEjbProxyHandler.java:186)\n\tat org.apache.openejb.util.proxy.Jdk13InvocationHandler.invoke(Jdk13InvocationHandler.java:49)\n\tat $Proxy35.findByLastName(Unknown Source)\n\tat org.apache.openejb.test.entity.cmp.CmpHomeIntfcTests.test03_findByLastName(CmpHomeIntfcTests.java:77)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:585)\n\tat org.apache.openejb.test.NumberedTestCase.runTestMethod(NumberedTestCase.java:135)\n\tat org.apache.openejb.test.NumberedTestCase$1.protect(NumberedTestCase.java:120)\n\tat junit.framework.TestResult.runProtected(TestResult.java:128)\n\tat org.apache.openejb.test.NumberedTestCase.run(NumberedTestCase.java:123)\n\tat org.apache.openejb.test.NumberedTestCase.run(NumberedTestCase.java:102)\n\tat org.apache.openejb.test.TestSuite.run(TestSuite.java:46)\n\tat org.apache.openejb.test.TestSuite.run(TestSuite.java:46)\n\tat junit.textui.TestRunner.doRun(TestRunner.java:115)\n\tat com.intellij.rt.execution.junit2.IdeaJUnitAgent.doRun(IdeaJUnitAgent.java:58)\n\tat junit.textui.TestRunner.start(TestRunner.java:179)\n\tat com.intellij.rt.execution.junit.TextTestRunner2.startRunnerWithArgs(TextTestRunner2.java:23)\n\tat com.intellij.rt.execution.junit2.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:98)\n\tat com.intellij.rt.execution.junit2.JUnitStarter.main(JUnitStarter.java:32)\nCaused by: java.lang.ArrayIndexOutOfBoundsException: 0\n\tat org.apache.openjpa.jdbc.kernel.exps.PCPath.appendTo(PCPath.java:633)\n\tat org.apache.openjpa.jdbc.kernel.exps.EqualExpression.appendTo(EqualExpression.java:68)\n\tat org.apache.openjpa.jdbc.kernel.exps.CompareEqualExpression.appendTo(CompareEqualExpression.java:95)\n\tat org.apache.openjpa.jdbc.kernel.exps.SelectConstructor.buildWhere(SelectConstructor.java:235)\n\tat org.apache.openjpa.jdbc.kernel.exps.SelectConstructor.evaluate(SelectConstructor.java:76)\n\tat org.apache.openjpa.jdbc.kernel.JDBCStoreQuery.createWhereSelects(JDBCStoreQuery.java:323)\n\tat org.apache.openjpa.jdbc.kernel.JDBCStoreQuery.executeQuery(JDBCStoreQuery.java:165)\n\tat org.apache.openjpa.kernel.ExpressionStoreQuery$DataStoreExecutor.executeQuery(ExpressionStoreQuery.java:672)\n\tat org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:977)\n\tat org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:789)\n\t... 30 more\n11:30:06,664 ERROR [OpenEJB] The bean instances business method encountered a system exception:0\n<4|false|0.9.6-incubating> org.apache.openjpa.persistence.ArgumentException: 0\n\tat org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:798)\n\tat org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:759)\n\tat org.apache.openjpa.kernel.DelegatingQuery.execute(DelegatingQuery.java:528)\n\tat org.apache.openjpa.persistence.QueryImpl.execute(QueryImpl.java:210)\n\tat org.apache.openjpa.persistence.QueryImpl.getResultList(QueryImpl.java:251)\n\tat org.apache.openejb.core.cmp.jpa.JpaCmpEngine.queryBeans(JpaCmpEngine.java:192)\n\tat org.apache.openejb.core.cmp.CmpContainer.findEJBObject(CmpContainer.java:640)\n\tat org.apache.openejb.core.cmp.CmpContainer.invoke(CmpContainer.java:245)\n\tat org.apache.openejb.core.entity.EntityEjbHomeHandler.findX(EntityEjbHomeHandler.java:56)\n\tat org.apache.openejb.core.ivm.EjbHomeProxyHandler._invoke(EjbHomeProxyHandler.java:122)\n\tat org.apache.openejb.core.ivm.BaseEjbProxyHandler.invoke(BaseEjbProxyHandler.java:186)\n\tat org.apache.openejb.util.proxy.Jdk13InvocationHandler.invoke(Jdk13InvocationHandler.java:49)\n\tat $Proxy35.findByLastName(Unknown Source)\n\tat org.apache.openejb.test.entity.cmp.CmpHomeIntfcTests.test03_findByLastName(CmpHomeIntfcTests.java:77)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:585)\n\tat org.apache.openejb.test.NumberedTestCase.runTestMethod(NumberedTestCase.java:135)\n\tat org.apache.openejb.test.NumberedTestCase$1.protect(NumberedTestCase.java:120)\n\tat junit.framework.TestResult.runProtected(TestResult.java:128)\n\tat org.apache.openejb.test.NumberedTestCase.run(NumberedTestCase.java:123)\n\tat org.apache.openejb.test.NumberedTestCase.run(NumberedTestCase.java:102)\n\tat org.apache.openejb.test.TestSuite.run(TestSuite.java:46)\n\tat org.apache.openejb.test.TestSuite.run(TestSuite.java:46)\n\tat junit.textui.TestRunner.doRun(TestRunner.java:115)\n\tat com.intellij.rt.execution.junit2.IdeaJUnitAgent.doRun(IdeaJUnitAgent.java:58)\n\tat junit.textui.TestRunner.start(TestRunner.java:179)\n\tat com.intellij.rt.execution.junit.TextTestRunner2.startRunnerWithArgs(TextTestRunner2.java:23)\n\tat com.intellij.rt.execution.junit2.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:98)\n\tat com.intellij.rt.execution.junit2.JUnitStarter.main(JUnitStarter.java:32)\nCaused by: java.lang.ArrayIndexOutOfBoundsException: 0\n\tat org.apache.openjpa.jdbc.kernel.exps.PCPath.appendTo(PCPath.java:633)\n\tat org.apache.openjpa.jdbc.kernel.exps.EqualExpression.appendTo(EqualExpression.java:68)\n\tat org.apache.openjpa.jdbc.kernel.exps.CompareEqualExpression.appendTo(CompareEqualExpression.java:95)\n\tat org.apache.openjpa.jdbc.kernel.exps.SelectConstructor.buildWhere(SelectConstructor.java:235)\n\tat org.apache.openjpa.jdbc.kernel.exps.SelectConstructor.evaluate(SelectConstructor.java:76)\n\tat org.apache.openjpa.jdbc.kernel.JDBCStoreQuery.createWhereSelects(JDBCStoreQuery.java:323)\n\tat org.apache.openjpa.jdbc.kernel.JDBCStoreQuery.executeQuery(JDBCStoreQuery.java:165)\n\tat org.apache.openjpa.kernel.ExpressionStoreQuery$DataStoreExecutor.executeQuery(ExpressionStoreQuery.java:672)\n\tat org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:977)\n\tat org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:789)\n\t... 30 more\norg.apache.openejb.InvalidateReferenceException: java.rmi.RemoteException: The bean encountered a non-application exception.; nested exception is: \n\t<4|false|0.9.6-incubating> org.apache.openjpa.persistence.ArgumentException: 0: The bean encountered a non-application exception.; nested exception is: \n\t<4|false|0.9.6-incubating> org.apache.openjpa.persistence.ArgumentException: 0\n\tat org.apache.openejb.core.transaction.TransactionPolicy.throwExceptionToServer(TransactionPolicy.java:208)\n\tat org.apache.openejb.core.transaction.TxRequired.handleSystemException(TxRequired.java:83)\n\tat org.apache.openejb.core.cmp.CmpContainer.findEJBObject(CmpContainer.java:682)\n\tat org.apache.openejb.core.cmp.CmpContainer.invoke(CmpContainer.java:245)\n\tat org.apache.openejb.core.entity.EntityEjbHomeHandler.findX(EntityEjbHomeHandler.java:56)\n\tat org.apache.openejb.core.ivm.EjbHomeProxyHandler._invoke(EjbHomeProxyHandler.java:122)\n\tat org.apache.openejb.core.ivm.BaseEjbProxyHandler.invoke(BaseEjbProxyHandler.java:186)\n\tat org.apache.openejb.util.proxy.Jdk13InvocationHandler.invoke(Jdk13InvocationHandler.java:49)\n\tat $Proxy35.findByLastName(Unknown Source)\n\tat org.apache.openejb.test.entity.cmp.CmpHomeIntfcTests.test03_findByLastName(CmpHomeIntfcTests.java:77)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:585)\n\tat org.apache.openejb.test.NumberedTestCase.runTestMethod(NumberedTestCase.java:135)\n\tat org.apache.openejb.test.NumberedTestCase$1.protect(NumberedTestCase.java:120)\n\tat junit.framework.TestResult.runProtected(TestResult.java:128)\n\tat org.apache.openejb.test.NumberedTestCase.run(NumberedTestCase.java:123)\n\tat org.apache.openejb.test.NumberedTestCase.run(NumberedTestCase.java:102)\n\tat org.apache.openejb.test.TestSuite.run(TestSuite.java:46)\n\tat org.apache.openejb.test.TestSuite.run(TestSuite.java:46)\n\tat junit.textui.TestRunner.doRun(TestRunner.java:115)\n\tat com.intellij.rt.execution.junit2.IdeaJUnitAgent.doRun(IdeaJUnitAgent.java:58)\n\tat junit.textui.TestRunner.start(TestRunner.java:179)\n\tat com.intellij.rt.execution.junit.TextTestRunner2.startRunnerWithArgs(TextTestRunner2.java:23)\n\tat com.intellij.rt.execution.junit2.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:98)\n\tat com.intellij.rt.execution.junit2.JUnitStarter.main(JUnitStarter.java:32)\nCaused by: java.rmi.RemoteException: The bean encountered a non-application exception.; nested exception is: \n\t<4|false|0.9.6-incubating> org.apache.openjpa.persistence.ArgumentException: 0\n\tat org.apache.openejb.core.transaction.TransactionPolicy.throwExceptionToServer(TransactionPolicy.java:206)\n\t... 26 more\nCaused by: <4|false|0.9.6-incubating> org.apache.openjpa.persistence.ArgumentException: 0\n\tat org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:798)\n\tat org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:759)\n\tat org.apache.openjpa.kernel.DelegatingQuery.execute(DelegatingQuery.java:528)\n\tat org.apache.openjpa.persistence.QueryImpl.execute(QueryImpl.java:210)\n\tat org.apache.openjpa.persistence.QueryImpl.getResultList(QueryImpl.java:251)\n\tat org.apache.openejb.core.cmp.jpa.JpaCmpEngine.queryBeans(JpaCmpEngine.java:192)\n\tat org.apache.openejb.core.cmp.CmpContainer.findEJBObject(CmpContainer.java:640)\n\t... 24 more\nCaused by: java.lang.ArrayIndexOutOfBoundsException: 0\n\tat org.apache.openjpa.jdbc.kernel.exps.PCPath.appendTo(PCPath.java:633)\n\tat org.apache.openjpa.jdbc.kernel.exps.EqualExpression.appendTo(EqualExpression.java:68)\n\tat org.apache.openjpa.jdbc.kernel.exps.CompareEqualExpression.appendTo(CompareEqualExpression.java:95)\n\tat org.apache.openjpa.jdbc.kernel.exps.SelectConstructor.buildWhere(SelectConstructor.java:235)\n\tat org.apache.openjpa.jdbc.kernel.exps.SelectConstructor.evaluate(SelectConstructor.java:76)\n\tat org.apache.openjpa.jdbc.kernel.JDBCStoreQuery.createWhereSelects(JDBCStoreQuery.java:323)\n\tat org.apache.openjpa.jdbc.kernel.JDBCStoreQuery.executeQuery(JDBCStoreQuery.java:165)\n\tat org.apache.openjpa.kernel.ExpressionStoreQuery$DataStoreExecutor.executeQuery(ExpressionStoreQuery.java:672)\n\tat org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:977)\n\tat org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:789)\n\t... 30 more\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dain","name":"dain","key":"dain","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dain Sundstrom","active":true,"timeZone":"America/Los_Angeles"},"created":"2007-02-13T19:34:42.887+0000","updated":"2007-02-13T19:34:42.887+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12362662/comment/12475310","id":"12475310","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ephemeris","name":"ephemeris","key":"ephemeris","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ephemeris&avatarId=44755","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ephemeris&avatarId=44755","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ephemeris&avatarId=44755","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ephemeris&avatarId=44755"},"displayName":"Ephemeris Lappis","active":true,"timeZone":"Europe/Berlin"},"body":"I have a similar problem with a really veru simple test that works as expected with TopLink (RI) and Hibernate implementations.\nI've tried to add the \"name\" attribute to the entities annotations, or disable the orm.xml use, but this work-around doesn't seem to work in my case.\nI've tested it with the release 0.9.6 and snapshot 0.9.7, and i have the same result...\nDoes anyone have more ideas ?\nNB : I attach my project, just in case...\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ephemeris","name":"ephemeris","key":"ephemeris","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ephemeris&avatarId=44755","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ephemeris&avatarId=44755","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ephemeris&avatarId=44755","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ephemeris&avatarId=44755"},"displayName":"Ephemeris Lappis","active":true,"timeZone":"Europe/Berlin"},"created":"2007-02-23T10:50:02.458+0000","updated":"2007-02-23T10:50:02.458+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12362662/comment/12475312","id":"12475312","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ephemeris","name":"ephemeris","key":"ephemeris","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ephemeris&avatarId=44755","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ephemeris&avatarId=44755","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ephemeris&avatarId=44755","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ephemeris&avatarId=44755"},"displayName":"Ephemeris Lappis","active":true,"timeZone":"Europe/Berlin"},"body":"A simple project with the same error :\n\n30  my-persistence-unit-for-open-jpa  INFO   [main] openjpa.Runtime - Starting OpenJPA 0.9.7-incubating-SNAPSHOT\n140  my-persistence-unit-for-open-jpa  INFO   [main] openjpa.jdbc.JDBC - Using dictionary class \"org.apache.openjpa.jdbc.sql.DerbyDictionary\".\n270  my-persistence-unit-for-open-jpa  INFO   [main] openjpa.MetaData - Found 3 classes with metadata in 10 milliseconds.\nException in thread \"main\" <4|true|0.9.7-incubating-SNAPSHOT> org.apache.openjpa.persistence.ArgumentException: Could not locate metadata for the class using alias \"Person\". Registered alias mappings: \"{Person=null}\"\n\tat org.apache.openjpa.meta.MetaDataRepository.getMetaData(MetaDataRepository.java:345)\n\tat org.apache.openjpa.kernel.jpql.JPQLExpressionBuilder.getClassMetaData(JPQLExpressionBuilder.java:164)\n\tat org.apache.openjpa.kernel.jpql.JPQLExpressionBuilder.resolveClassMetaData(JPQLExpressionBuilder.java:142)\n\tat org.apache.openjpa.kernel.jpql.JPQLExpressionBuilder.getCandidateMetaData(JPQLExpressionBuilder.java:211)\n\tat org.apache.openjpa.kernel.jpql.JPQLExpressionBuilder.getCandidateMetaData(JPQLExpressionBuilder.java:181)\n\tat org.apache.openjpa.kernel.jpql.JPQLExpressionBuilder.getCandidateType(JPQLExpressionBuilder.java:174)\n\tat org.apache.openjpa.kernel.jpql.JPQLExpressionBuilder.access$500(JPQLExpressionBuilder.java:61)\n\tat org.apache.openjpa.kernel.jpql.JPQLExpressionBuilder$ParsedJPQL.populate(JPQLExpressionBuilder.java:1668)\n\tat org.apache.openjpa.kernel.jpql.JPQLParser.populate(JPQLParser.java:52)\n\tat org.apache.openjpa.kernel.ExpressionStoreQuery.populateFromCompilation(ExpressionStoreQuery.java:145)\n\tat org.apache.openjpa.kernel.QueryImpl.newCompilation(QueryImpl.java:644)\n\tat org.apache.openjpa.kernel.QueryImpl.compilationFromCache(QueryImpl.java:625)\n\tat org.apache.openjpa.kernel.QueryImpl.compileForCompilation(QueryImpl.java:591)\n\tat org.apache.openjpa.kernel.QueryImpl.compileForExecutor(QueryImpl.java:653)\n\tat org.apache.openjpa.kernel.QueryImpl.getOperation(QueryImpl.java:1475)\n\tat org.apache.openjpa.kernel.DelegatingQuery.getOperation(DelegatingQuery.java:120)\n\tat org.apache.openjpa.persistence.QueryImpl.execute(QueryImpl.java:214)\n\tat org.apache.openjpa.persistence.QueryImpl.getResultList(QueryImpl.java:264)\n\tat my.jpa.one.Test.test(Test.java:34)\n\tat my.jpa.one.MainForOpenJPA.main(MainForOpenJPA.java:7)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ephemeris","name":"ephemeris","key":"ephemeris","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ephemeris&avatarId=44755","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ephemeris&avatarId=44755","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ephemeris&avatarId=44755","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ephemeris&avatarId=44755"},"displayName":"Ephemeris Lappis","active":true,"timeZone":"Europe/Berlin"},"created":"2007-02-23T10:53:24.217+0000","updated":"2007-02-23T10:53:24.217+0000"}],"maxResults":4,"total":4,"startAt":0},"customfield_12311820":"0|i0z1ef:","customfield_12314139":null}}

