{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12362708","self":"https://issues.apache.org/jira/rest/api/2/issue/12362708","key":"OPENJPA-144","fields":{"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312340","id":"12312340","description":"","name":"0.9.7","archived":true,"released":true,"releaseDate":"2007-04-27"}],"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12312323":null,"customfield_12312320":null,"customfield_12310420":"160478","customfield_12312321":null,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12312331":null,"customfield_12312332":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"customfield_12312330":null,"versions":[],"customfield_12311120":null,"customfield_12313826":null,"customfield_12312339":null,"issuelinks":[{"id":"12315029","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12315029","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12362837","key":"OPENJPA-149","self":"https://issues.apache.org/jira/rest/api/2/issue/12362837","fields":{"summary":"non-jta-data-source must be specified in WebSphere environments","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}},{"id":"12315089","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12315089","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12363037","key":"OPENJPA-153","self":"https://issues.apache.org/jira/rest/api/2/issue/12363037","fields":{"summary":"WebSphere and non-jta-data-source and default ManagedRuntime","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12313825":null,"assignee":null,"customfield_12312337":null,"customfield_12313823":null,"customfield_12312338":null,"customfield_12311920":null,"customfield_12313822":null,"customfield_12312335":null,"customfield_12313821":null,"customfield_12312336":null,"customfield_12313820":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12311300","id":"12311300","name":"jdbc","description":"jdbc interface"}],"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"202535","customfield_12312823":null,"creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bradmoon","name":"bradmoon","key":"bradmoon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brad L Vandermoon","active":true,"timeZone":"Etc/UTC"},"subtasks":[{"id":"12373199","key":"OPENJPA-279","self":"https://issues.apache.org/jira/rest/api/2/issue/12373199","fields":{"summary":"Missing lookup for non-jta-data-source in JDBCConfigurationImpl.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/7","id":"7","description":"The sub-task of the issue","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21146&avatarType=issuetype","name":"Sub-task","subtask":true,"avatarId":21146}}}],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bradmoon","name":"bradmoon","key":"bradmoon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brad L Vandermoon","active":true,"timeZone":"Etc/UTC"},"aggregateprogress":{"progress":0,"total":0},"customfield_12313520":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"customfield_12313924":null,"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/OPENJPA-144/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12313920":null,"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"customfield_12314020":"{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@5f873bb4[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7e458fe4[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@14d77374[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@463fe4a5[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@d0a3155[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@222eb77e[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@dcd2c9c[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@34eeeb4c[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6832e41d[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@3ff02b22[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5bbd598c[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@18ca6d3c[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}","customfield_12314141":null,"customfield_12314140":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310351","id":"12310351","key":"OPENJPA","name":"OpenJPA","projectTypeKey":"software","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310351&avatarId=10043","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310351&avatarId=10043","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310351&avatarId=10043","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310351&avatarId=10043"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10252","id":"10252","description":"","name":"OpenJPA"}},"aggregatetimespent":null,"customfield_12312520":null,"customfield_12314422":null,"customfield_12314421":null,"customfield_12314146":null,"customfield_12314420":null,"customfield_12314145":null,"customfield_12314144":null,"customfield_12314143":null,"resolutiondate":"2007-02-16T16:22:26.151+0000","workratio":-1,"customfield_12312923":null,"customfield_12312920":null,"customfield_12312921":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/OPENJPA-144/watchers","watchCount":3,"isWatching":false},"created":"2007-02-13T17:25:13.657+0000","updated":"2010-03-09T18:32:30.811+0000","timeoriginalestimate":null,"description":"A non-jta-data-source is required for DB2 sequences; however, org.apache.openjpa.jdbc.conf.JDBCConfigurationImpl does not support a JNDI lookup for this data source from the openjpa.ConnectionFactory2Name property as documented (refer to section 5.12 and 4.2.1 of the OpenJPA manual).\n\nIt seems like the same implementation for the jta-data-source should be implemented for the non-jta-data-source.  i.e.\n\n// ADD createConnectionFactory2()\nprivate DecoratingDataSource createConnectionFactory2() {\n        DataSource ds = (DataSource) connectionFactory2.get();\n        if (ds != null)\n            return setupConnectionFactory(ds, true);\n\n        ds = (DataSource) super.getConnectionFactory2(); // JNDI lookup\n        if (ds == null)\n            ds = DataSourceFactory.newDataSource(this, true);\n\n        return setupConnectionFactory(ds, true);\n    }\n\n// MODIFY this method \npublic Object getConnectionFactory2() {\n        // override to configure data source\n        if (dataSource2 == null) {\n            DecoratingDataSource ds = createConnectionFactory2();\n            dataSource2 = DataSourceFactory.installDBDictionary\n                (getDBDictionaryInstance(), ds, this, true);\n        }\n        return dataSource2;\n    }\n\n","customfield_10010":null,"timetracking":{},"customfield_12314523":null,"customfield_12314127":null,"customfield_12314522":null,"customfield_12314126":null,"customfield_12314521":null,"customfield_12314125":null,"customfield_12314520":null,"customfield_12314124":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12351196","id":"12351196","filename":"ASF.LICENSE.NOT.GRANTED--OPENJPA-144-patch.diff","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pcl","name":"pcl","key":"pcl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Linskey","active":true,"timeZone":"America/Los_Angeles"},"created":"2007-02-14T23:56:08.122+0000","size":3366,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12351196/ASF.LICENSE.NOT.GRANTED--OPENJPA-144-patch.diff"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12351270","id":"12351270","filename":"ASF.LICENSE.NOT.GRANTED--openjpa-144-patch.jar","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pcl","name":"pcl","key":"pcl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Linskey","active":true,"timeZone":"America/Los_Angeles"},"created":"2007-02-15T18:22:00.623+0000","size":9800,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12351270/ASF.LICENSE.NOT.GRANTED--openjpa-144-patch.jar"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12351281","id":"12351281","filename":"ASF.LICENSE.NOT.GRANTED--openjpa-144-patch-2.jar","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pcl","name":"pcl","key":"pcl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Linskey","active":true,"timeZone":"America/Los_Angeles"},"created":"2007-02-15T20:56:13.329+0000","size":9505,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12351281/ASF.LICENSE.NOT.GRANTED--openjpa-144-patch-2.jar"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12351176","id":"12351176","filename":"Both-JTAandNonJTASpecified.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bradmoon","name":"bradmoon","key":"bradmoon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brad L Vandermoon","active":true,"timeZone":"Etc/UTC"},"created":"2007-02-14T21:09:59.774+0000","size":7538,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12351176/Both-JTAandNonJTASpecified.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12351177","id":"12351177","filename":"Only-JTASpecified.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bradmoon","name":"bradmoon","key":"bradmoon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brad L Vandermoon","active":true,"timeZone":"Etc/UTC"},"created":"2007-02-14T21:09:59.868+0000","size":7591,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12351177/Only-JTASpecified.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12351280","id":"12351280","filename":"PostPatch-144.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bradmoon","name":"bradmoon","key":"bradmoon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brad L Vandermoon","active":true,"timeZone":"Etc/UTC"},"created":"2007-02-15T20:39:21.870+0000","size":8349,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12351280/PostPatch-144.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12351366","id":"12351366","filename":"PostPatch-144fix2.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bradmoon","name":"bradmoon","key":"bradmoon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brad L Vandermoon","active":true,"timeZone":"Etc/UTC"},"created":"2007-02-16T14:50:15.768+0000","size":7949,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12351366/PostPatch-144fix2.txt"}],"customfield_12312340":null,"customfield_12314123":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12314122":null,"customfield_12314121":null,"customfield_12310041":null,"customfield_12314120":null,"customfield_12314129":null,"customfield_12314524":null,"customfield_12314128":null,"summary":"JDBCConfigurationImpl does not support JNDI lookup for non-jta-data-source.  ","customfield_12314130":null,"customfield_12310291":null,"customfield_12310290":null,"customfield_12314138":null,"customfield_12314137":null,"environment":"WebSphere 6.1, DB2 v8.1 and sequences","customfield_12314136":null,"customfield_12314135":null,"customfield_12311020":null,"customfield_12314134":null,"duedate":null,"customfield_12314132":null,"customfield_12314131":null,"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12362708/comment/12472786","id":"12472786","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pcl","name":"pcl","key":"pcl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Linskey","active":true,"timeZone":"America/Los_Angeles"},"body":"Are you also specifying a jta-data-source, or only a non-jta-data-source? If specifying both, what error do you get when you don't specify a non-jta-data-source at all? I believe that there could be a problem, but I did some work a while back that makes it unnecessary to specify a non-jta-data-source if you're specifying a jta-data-source. That code works on WebLogic, but that's the only environment that I've tested it in.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pcl","name":"pcl","key":"pcl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Linskey","active":true,"timeZone":"America/Los_Angeles"},"created":"2007-02-13T17:38:36.036+0000","updated":"2007-02-13T17:38:36.036+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12362708/comment/12473073","id":"12473073","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bradmoon","name":"bradmoon","key":"bradmoon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brad L Vandermoon","active":true,"timeZone":"Etc/UTC"},"body":"The above solution is offered as an analysis level solution only.   Testing is in process.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bradmoon","name":"bradmoon","key":"bradmoon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brad L Vandermoon","active":true,"timeZone":"Etc/UTC"},"created":"2007-02-14T12:57:53.098+0000","updated":"2007-02-14T12:57:53.098+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12362708/comment/12473085","id":"12473085","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bradmoon","name":"bradmoon","key":"bradmoon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brad L Vandermoon","active":true,"timeZone":"Etc/UTC"},"body":"When we specify only a jta-data-source, we get:  \"<4|false|0.9.7-incubating-SNAPSHOT> org.apache.openjpa.util.InvalidStateException: Unable to execute suspend on a WebSphere managed transaction. WebSphere does not support direct manipulation of managed transactions.\"\n\nWhen we try to use JNDI to specify the non-jta-data-source, we get the same error.  JDBCConfigurationImpl doesn't appear to use this information to populate datasource2.\n\nWhen we pass the properties to have OpenJPA create the connection it works fine.  Here's the properties we pass: \n\n       <entry key=\"openjpa.Connection2DriverName\" value=\"com.ibm.db2.jcc.DB2Driver\"/>\n        <entry key=\"openjpa.Connection2UserName\" value=\"Test\"/>\n        <entry key=\"openjpa.Connection2Password\" value=\"password\"/>\n        <entry key=\"openjpa.Connection2URL\" value=\"jdbc:db2://localhost:3700/RQSTSET\"/>\t\n        <entry key=\"openjpa.jdbc.Schema\" value=\"PROPCAS\"/>\n\nIn this later case, JDBCConfigurationImpl creates a SimpleDriverDataSource for the datasource2 and uses it to do the sequence.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bradmoon","name":"bradmoon","key":"bradmoon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brad L Vandermoon","active":true,"timeZone":"Etc/UTC"},"created":"2007-02-14T13:18:53.310+0000","updated":"2007-02-14T13:18:53.310+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12362708/comment/12473140","id":"12473140","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pcl","name":"pcl","key":"pcl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Linskey","active":true,"timeZone":"America/Los_Angeles"},"body":"Interesting. Can you post the full stack trace both without specifying a non-jta-data-source and with a non-jta-data-source specified?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pcl","name":"pcl","key":"pcl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Linskey","active":true,"timeZone":"America/Los_Angeles"},"created":"2007-02-14T17:02:26.492+0000","updated":"2007-02-14T17:02:26.492+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12362708/comment/12473197","id":"12473197","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bradmoon","name":"bradmoon","key":"bradmoon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brad L Vandermoon","active":true,"timeZone":"Etc/UTC"},"body":"Requested stack traces provided above.  I also verified that JDBCConfigurationImpl.connectionFactory2Name contained my non-jta-data-source reference (i.e. \"java:comp/env/jdbc/RequestSetNoTran\") when producing Both-JTAandNonJTASpecified.txt.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bradmoon","name":"bradmoon","key":"bradmoon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brad L Vandermoon","active":true,"timeZone":"Etc/UTC"},"created":"2007-02-14T21:09:59.885+0000","updated":"2007-02-14T21:09:59.885+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12362708/comment/12473208","id":"12473208","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pcl","name":"pcl","key":"pcl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Linskey","active":true,"timeZone":"America/Los_Angeles"},"body":"It looks like there are two issues here. First, we seem to be incorrectly attempting to suspend the transaction when a non-jta data source is specified. Second, our WAS integration does not allow suspending of the JTA transaction. I will create a new issue for this second problem.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pcl","name":"pcl","key":"pcl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Linskey","active":true,"timeZone":"America/Los_Angeles"},"created":"2007-02-14T21:37:26.079+0000","updated":"2007-02-14T21:37:26.079+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12362708/comment/12473215","id":"12473215","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bradmoon","name":"bradmoon","key":"bradmoon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brad L Vandermoon","active":true,"timeZone":"Etc/UTC"},"body":"Great.  Is there something I can do? ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bradmoon","name":"bradmoon","key":"bradmoon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brad L Vandermoon","active":true,"timeZone":"Etc/UTC"},"created":"2007-02-14T21:51:45.804+0000","updated":"2007-02-14T21:51:45.804+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12362708/comment/12473221","id":"12473221","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pcl","name":"pcl","key":"pcl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Linskey","active":true,"timeZone":"America/Los_Angeles"},"body":"If you could create and attach a patch akin to what you described in the original notes, that'd be great. One modification: instead of adding a new createConnectionFactory2() method, it'd be great if you could just modify the (private) createConnectionFactory() method that exists already, maybe to take as an argument a boolean indicating which connection factory to use.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pcl","name":"pcl","key":"pcl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Linskey","active":true,"timeZone":"America/Los_Angeles"},"created":"2007-02-14T22:01:48.585+0000","updated":"2007-02-14T22:01:48.585+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12362708/comment/12473259","id":"12473259","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pcl","name":"pcl","key":"pcl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Linskey","active":true,"timeZone":"America/Los_Angeles"},"body":"It turns out I had a few free minutes. Attached is a wholly-untested patch to JDBCConfigurationImpl.java that might work. Can you test this out and let me know if it works?\n\nIf you don't have access to the OpenJPA sources, I can build a jar with the patched class in it for testing also.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pcl","name":"pcl","key":"pcl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Linskey","active":true,"timeZone":"America/Los_Angeles"},"created":"2007-02-14T23:56:07.502+0000","updated":"2007-02-14T23:56:07.502+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12362708/comment/12473372","id":"12473372","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bradmoon","name":"bradmoon","key":"bradmoon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brad L Vandermoon","active":true,"timeZone":"Etc/UTC"},"body":"I will test today.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bradmoon","name":"bradmoon","key":"bradmoon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brad L Vandermoon","active":true,"timeZone":"Etc/UTC"},"created":"2007-02-15T12:52:33.166+0000","updated":"2007-02-15T12:52:33.166+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12362708/comment/12473381","id":"12473381","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bradmoon","name":"bradmoon","key":"bradmoon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brad L Vandermoon","active":true,"timeZone":"Etc/UTC"},"body":"I thought I could get this from the svn repository, but it does not appear as though the java file has been checked in.  If you'd attach the java file, I can test.\n\nBottom line I only have access to the subversion web interface. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bradmoon","name":"bradmoon","key":"bradmoon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brad L Vandermoon","active":true,"timeZone":"Etc/UTC"},"created":"2007-02-15T14:00:40.706+0000","updated":"2007-02-15T14:00:40.706+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12362708/comment/12473457","id":"12473457","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pcl","name":"pcl","key":"pcl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Linskey","active":true,"timeZone":"America/Los_Angeles"},"body":"I've attached a jar file containing the compiled class. Put this jar ahead of OpenJPA in your classpath.\n\nFTR, the source for the file in question is at https://svn.apache.org/viewvc/incubator/openjpa/trunk/openjpa-jdbc/src/main/java/org/apache/openjpa/jdbc/conf/JDBCConfigurationImpl.java","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pcl","name":"pcl","key":"pcl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Linskey","active":true,"timeZone":"America/Los_Angeles"},"created":"2007-02-15T18:21:59.801+0000","updated":"2007-02-15T18:21:59.801+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12362708/comment/12473506","id":"12473506","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bradmoon","name":"bradmoon","key":"bradmoon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brad L Vandermoon","active":true,"timeZone":"Etc/UTC"},"body":"The error has changed a bit.  New stack trace is in PostPatch-144.  Debugging indicates that JDCConfigurationImpl.datasource2 contains a managed datasource.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bradmoon","name":"bradmoon","key":"bradmoon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brad L Vandermoon","active":true,"timeZone":"Etc/UTC"},"created":"2007-02-15T20:39:21.972+0000","updated":"2007-02-15T20:39:21.972+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12362708/comment/12473514","id":"12473514","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pcl","name":"pcl","key":"pcl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Linskey","active":true,"timeZone":"America/Los_Angeles"},"body":"Oops, I made a mistake in the createConnectionFactory() logic. This one looks better.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pcl","name":"pcl","key":"pcl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Linskey","active":true,"timeZone":"America/Los_Angeles"},"created":"2007-02-15T20:56:03.010+0000","updated":"2007-02-15T20:56:03.010+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12362708/comment/12473548","id":"12473548","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bradmoon","name":"bradmoon","key":"bradmoon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brad L Vandermoon","active":true,"timeZone":"Etc/UTC"},"body":"I am getting a different error this time, but before I pass on the stack trace information, perhaps you can tell me what properties you'd expect to see set i.e. non-jta-data-source, openjpa.Connection2DriverName, openjpa.ConnectionFactory2Name, etc.....","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bradmoon","name":"bradmoon","key":"bradmoon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brad L Vandermoon","active":true,"timeZone":"Etc/UTC"},"created":"2007-02-15T23:05:36.755+0000","updated":"2007-02-15T23:05:36.755+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12362708/comment/12473554","id":"12473554","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pcl","name":"pcl","key":"pcl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Linskey","active":true,"timeZone":"America/Los_Angeles"},"body":"For openjpa-144-patch-2.jar, I would expect you to need to set jta-data-source and non-jta-data-source appropriately. The second patch should correctly pick up the non-jta-data-source and use it for sequence purposes.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pcl","name":"pcl","key":"pcl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Linskey","active":true,"timeZone":"America/Los_Angeles"},"created":"2007-02-15T23:17:06.166+0000","updated":"2007-02-15T23:17:06.166+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12362708/comment/12473717","id":"12473717","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bradmoon","name":"bradmoon","key":"bradmoon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brad L Vandermoon","active":true,"timeZone":"Etc/UTC"},"body":"Getting a different exception now.  It is contained in attached \"PostPatch-144fix2.txt\".  It appears as though all JNDI lookups in WebSphere return a managed connection as JDBCConfigurationImpl.datasource2 contains an instance of com.ibm.ws.rsadapter.jdbc.WSJdbcDataSource.   \n\nJust to recap.   Without the patches, I have been able to get sequences two work by two different methods: \n\nApproach 1: specify connection properties so OpenJPA can build a SimpleDriverDataSource.  Properties are as follows: \n\n        <entry key=\"openjpa.Connection2DriverName\" value=\"com.ibm.db2.jcc.DB2Driver\"/>\n        <entry key=\"openjpa.Connection2UserName\" value=\"Test\"/>\n        <entry key=\"openjpa.Connection2Password\" value=\"xxxxxxxx\"/>\n        <entry key=\"openjpa.Connection2URL\" value=\"jdbc:db2://localhost:3700/RQSTSET\"/>\t\n        <entry key=\"openjpa.jdbc.Schema\" value=\"PROPCAS\"/>\n\n       Under this approach, SimpleDriverDataSource is contained in JDBCConfigurationImpl.datasource2.\n\nApproach 2: pass the webspeher transaction manager to OpenJPA per the below property:\n\n        <entry key=\"openjpa.ManagedRuntime\" value=\"invocation(TransactionManagerMethod=com.ibm.ws.Transaction.TransactionManagerFactory.getTransactionManager)\"/>\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bradmoon","name":"bradmoon","key":"bradmoon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brad L Vandermoon","active":true,"timeZone":"Etc/UTC"},"created":"2007-02-16T14:50:15.862+0000","updated":"2007-02-16T14:50:15.862+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12362708/comment/12473743","id":"12473743","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pcl","name":"pcl","key":"pcl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Linskey","active":true,"timeZone":"America/Los_Angeles"},"body":"I'm guessing that Approach 2 works with just a single jta-data-source listed, right?\n\nAlso, your description implies that with the most recent code, OpenJPA is looking up the non-jta-data-source, but WAS is still returning a data source with limitations. Is that correct? Based on this assumption, I will close this issue and create a new one re: our defaults and corresponding WAS limitations.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pcl","name":"pcl","key":"pcl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Linskey","active":true,"timeZone":"America/Los_Angeles"},"created":"2007-02-16T16:22:09.880+0000","updated":"2007-02-16T16:22:09.880+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12362708/comment/12473808","id":"12473808","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bradmoon","name":"bradmoon","key":"bradmoon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brad L Vandermoon","active":true,"timeZone":"Etc/UTC"},"body":"Approach 2 will actually work when specifying only the jta-data-source or specifying both the jta-data-source and the non-jta-data-source.\n\nAs far as your second question: WAS is retuning a managed connection for the second data source.  \n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bradmoon","name":"bradmoon","key":"bradmoon","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brad L Vandermoon","active":true,"timeZone":"Etc/UTC"},"created":"2007-02-16T20:00:46.210+0000","updated":"2007-02-16T20:00:46.210+0000"}],"maxResults":19,"total":19,"startAt":0},"customfield_12311820":"0|i0z1fr:","customfield_12314139":null}}

