{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12470490","self":"https://issues.apache.org/jira/rest/api/2/issue/12470490","key":"OPENJPA-1752","fields":{"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314542","id":"12314542","description":"","name":"2.1.0","archived":false,"released":true,"releaseDate":"2011-02-21"}],"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12312323":null,"customfield_12312320":null,"customfield_12310420":"161997","customfield_12312321":null,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12312331":null,"customfield_12312332":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314532","id":"12314532","description":"2.0.1 Release","name":"2.0.1","archived":false,"released":true,"releaseDate":"2010-08-30"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314542","id":"12314542","description":"","name":"2.1.0","archived":false,"released":true,"releaseDate":"2011-02-21"}],"customfield_12311120":null,"customfield_12313826":null,"customfield_12312339":null,"issuelinks":[],"customfield_12313825":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fancy","name":"fancy","key":"fancy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Catalina Wei","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12313823":null,"customfield_12312338":null,"customfield_12311920":null,"customfield_12313822":null,"customfield_12312335":null,"customfield_12313821":null,"customfield_12312336":null,"customfield_12313820":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12311304","id":"12311304","name":"jpa","description":"Java Persistence API interface"}],"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"203660","customfield_12312823":null,"creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fancy","name":"fancy","key":"fancy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Catalina Wei","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fancy","name":"fancy","key":"fancy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Catalina Wei","active":true,"timeZone":"Etc/UTC"},"aggregateprogress":{"progress":0,"total":0},"customfield_12313520":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"customfield_12313924":null,"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/OPENJPA-1752/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12313920":null,"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"customfield_12314020":"{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@6ef1a057[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@49261fa0[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@74399bc3[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@d1b51fb[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4cb6111d[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@10d09848[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@288ffe12[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@7f4cf671[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@38e2e7c[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@1708e49d[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@40a0e700[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@58c76e1b[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}","customfield_12314141":null,"customfield_12314140":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310351","id":"12310351","key":"OPENJPA","name":"OpenJPA","projectTypeKey":"software","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310351&avatarId=10043","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310351&avatarId=10043","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310351&avatarId=10043","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310351&avatarId=10043"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10252","id":"10252","description":"","name":"OpenJPA"}},"aggregatetimespent":null,"customfield_12312520":null,"customfield_12314422":null,"customfield_12314421":null,"customfield_12314146":null,"customfield_12314420":null,"customfield_12314145":null,"customfield_12314144":null,"customfield_12314143":null,"resolutiondate":"2010-08-20T00:29:00.042+0000","workratio":-1,"customfield_12312923":null,"customfield_12312920":null,"customfield_12312921":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/OPENJPA-1752/watchers","watchCount":0,"isWatching":false},"created":"2010-07-30T04:33:45.276+0000","updated":"2010-09-20T15:40:06.386+0000","timeoriginalestimate":null,"description":"TestPessimisticLocks JUNIT tests pass all assertions for Derby backend, but failures are seen on DB2, MySQL, Oracle.\nIt is likely that failures may also occur on other backends.\n\nThere could be some problem in OpenJPA code in handling pessimistic lock requests.\nThere is also inconsistency in reporting exceptions - lock timout or query timeout should be non-fatal; but with Derby the PessimisticLockException is reported  which is considered fatal. It is also possible that the test scenarios are problematic.\n\nTestPessisimiticLocks has 5 test cases, the last test case worked for all backend. Problem test cases are listed as below:\n\n1.  testFindAfterQueryWithPessimisticLocks()\n2.  testFindAfterQueryOrderByWithPessimisticLocks()\n3.  testQueryAfterFindWithPessimisticLocks()\n4.  testQueryOrderByAfterFindWithPessimisticLocks()\n\n\nThe failure symptoms are summarized below -   Each test contains 2 variations.\nThe dot notation, for example, 1.1 is the first scenario in testFindAfterQueryWithPessimisticLocks() \nEach test scenario is either expecting an exception or No exception; if no exception is reported, the SELECT sql got results from database.\n\n \n\nTests       Derby                                        DB2V9.7                                 Oracle10gXE 10.2.0.1.0            MySQL 5.1.39/JDBC 5.1.7\n====================================================================================================================================\n1.1         PessimisticLockException      LockTimeoutException        LockTimeoutException              LockTimeoutException\n1.2         No exception                              No exception                          No exception                                No exception\n2.1         PessimisticLockException      LockTimeoutException        LockTimeoutException              LockTimeoutException\n2.2         No  exception                             LockTimeoutException        No exception                                LockTimeoutException\n3.1         No  exception                             QueryTimeoutException       process hang                            PersistenceException: Server shutdown [code=1053, state=08S01]  \n3.2         PessimisticLockException      QueryTimeoutException       process hang                            PersistenceException: Server shutdown [code=1053, state=08S01]\n4.1         No  exception                             QueryTimeoutException       No exception                             QueryTimeoutException\n4.2         PessimisticLockException      QueryTimeoutException       process hang                           QueryTimeoutException\n\nNOTE: for Oracle, many test scenarios caused process to hang (test 3.1, 3.2, and 4.2) - ie. test never run to completion\n      for MySQL, Server shutdown (test 3.1 and 3.2)\n      here is the  stack trace:\n\norg.apache.openjpa.persistence.PersistenceException:Server shutdown in progress {prepstmnt 33525219 SELECT t1.id, t1.name FROM Employee t0 LEFT OUTER JOIN Department t1 ON t0.FK_DEPT = t1.id WHERE (t0.id < ?) LIMIT ?, ? FOR UPDATE [params=?, ?, ?]} [code=1053, state=08S01]\n<openjpa-2.1.0-SNAPSHOT-rexported fatal general error> org.apache.openjpa.persistence.PersistenceException: Server shutdown in progress {prepstmnt 33525219 SELECT t1.id, t1.name FROM Employee t0 LEFT OUTER JOIN Department t1 ON t0.FK_DEPT = t1.id WHERE (t0.id < ?) LIMIT ?, ? FOR UPDATE [params=?, ?, ?]} [code=1053, state=08S01]\nFailedObject: select e.department from Employee e where e.id < 10 [java.lang.String]\n\tat org.apache.openjpa.jdbc.sql.DBDictionary.narrow(DBDictionary.java:4855)\n\tat org.apache.openjpa.jdbc.sql.DBDictionary.newStoreException(DBDictionary.java:4815)\n\tat org.apache.openjpa.jdbc.sql.SQLExceptions.getStore(SQLExceptions.java:137)\n\tat org.apache.openjpa.jdbc.sql.SQLExceptions.getStore(SQLExceptions.java:118)\n\tat org.apache.openjpa.jdbc.sql.SQLExceptions.getStore(SQLExceptions.java:70)\n\tat org.apache.openjpa.jdbc.kernel.SelectResultObjectProvider.handleCheckedException(SelectResultObjectProvider.java:155)\n\tat org.apache.openjpa.kernel.QueryImpl$PackingResultObjectProvider.handleCheckedException(QueryImpl.java:2109)\n\tat org.apache.openjpa.lib.rop.EagerResultList.<init>(EagerResultList.java:40)\n\tat org.apache.openjpa.kernel.QueryImpl.toResult(QueryImpl.java:1246)\n\tat org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:1005)\n\tat org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:861)\n\tat org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:792)\n\tat org.apache.openjpa.kernel.DelegatingQuery.execute(DelegatingQuery.java:542)\n\tat org.apache.openjpa.persistence.QueryImpl.execute(QueryImpl.java:288)\n\tat org.apache.openjpa.persistence.QueryImpl.getResultList(QueryImpl.java:302)\n\tat org.apache.openjpa.persistence.lockmgr.TestPessimisticLocks.testQueryAfterFindWithPessimisticLocks(TestPessimisticLocks.java:271)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n\tat java.lang.reflect.Method.invoke(Unknown Source)\n\tat junit.framework.TestCase.runTest(TestCase.java:154)\n\tat org.apache.openjpa.persistence.test.AbstractPersistenceTestCase.runTest(AbstractPersistenceTestCase.java:516)\n\tat junit.framework.TestCase.runBare(TestCase.java:127)\n\tat org.apache.openjpa.persistence.test.AbstractPersistenceTestCase.runBare(AbstractPersistenceTestCase.java:503)\n\tat org.apache.openjpa.persistence.test.AbstractPersistenceTestCase.runBare(AbstractPersistenceTestCase.java:479)\n\tat junit.framework.TestResult$1.protect(TestResult.java:106)\n\tat junit.framework.TestResult.runProtected(TestResult.java:124)\n\tat junit.framework.TestResult.run(TestResult.java:109)\n\tat junit.framework.TestCase.run(TestCase.java:118)\n\tat org.apache.openjpa.persistence.test.AbstractPersistenceTestCase.run(AbstractPersistenceTestCase.java:179)\n\tat junit.framework.TestSuite.runTest(TestSuite.java:208)\n\tat junit.framework.TestSuite.run(TestSuite.java:203)\n\tat org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3TestReference.java:128)\n\tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:460)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:673)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196)\nCaused by: org.apache.openjpa.lib.jdbc.ReportingSQLException: Server shutdown in progress {prepstmnt 33525219 SELECT t1.id, t1.name FROM Employee t0 LEFT OUTER JOIN Department t1 ON t0.FK_DEPT = t1.id WHERE (t0.id < ?) LIMIT ?, ? FOR UPDATE [params=?, ?, ?]} [code=1053, state=08S01]\n\tat org.apache.openjpa.lib.jdbc.LoggingConnectionDecorator.wrap(LoggingConnectionDecorator.java:274)\n\tat org.apache.openjpa.lib.jdbc.LoggingConnectionDecorator.wrap(LoggingConnectionDecorator.java:258)\n\tat org.apache.openjpa.lib.jdbc.LoggingConnectionDecorator.access$3(LoggingConnectionDecorator.java:257)\n\tat org.apache.openjpa.lib.jdbc.LoggingConnectionDecorator$LoggingConnection$LoggingPreparedStatement.executeQuery(LoggingConnectionDecorator.java:1176)\n\tat org.apache.openjpa.lib.jdbc.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:278)\n\tat org.apache.openjpa.jdbc.kernel.JDBCStoreManager$CancelPreparedStatement.executeQuery(JDBCStoreManager.java:1773)\n\tat org.apache.openjpa.lib.jdbc.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:268)\n\tat org.apache.openjpa.jdbc.sql.SelectImpl.executeQuery(SelectImpl.java:499)\n\tat org.apache.openjpa.jdbc.sql.SelectImpl.execute(SelectImpl.java:424)\n\tat org.apache.openjpa.jdbc.sql.SelectImpl.execute(SelectImpl.java:382)\n\tat org.apache.openjpa.jdbc.kernel.SelectResultObjectProvider.open(SelectResultObjectProvider.java:94)\n\tat org.apache.openjpa.kernel.QueryImpl$PackingResultObjectProvider.open(QueryImpl.java:2068)\n\tat org.apache.openjpa.lib.rop.EagerResultList.<init>(EagerResultList.java:34)\n\t... 30 more\nNestedThrowables:\ncom.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: Server shutdown in progress\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)\n\tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)\n\tat java.lang.reflect.Constructor.newInstance(Unknown Source)\n\tat com.mysql.jdbc.Util.handleNewInstance(Util.java:406)\n\tat com.mysql.jdbc.Util.getInstance(Util.java:381)\n\tat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:984)\n\tat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:956)\n\tat com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3515)\n\tat com.mysql.jdbc.MysqlIO.nextRowFast(MysqlIO.java:1545)\n\tat com.mysql.jdbc.MysqlIO.nextRow(MysqlIO.java:1401)\n\tat com.mysql.jdbc.MysqlIO.readSingleRowSet(MysqlIO.java:2829)\n\tat com.mysql.jdbc.MysqlIO.getResultSet(MysqlIO.java:468)\n\tat com.mysql.jdbc.MysqlIO.readResultsForQueryOrUpdate(MysqlIO.java:2534)\n\tat com.mysql.jdbc.MysqlIO.readAllResults(MysqlIO.java:1749)\n\tat com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2159)\n\tat com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2554)\n\tat com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1761)\n\tat com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:1912)\n\tat org.apache.commons.dbcp.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:93)\n\tat org.apache.openjpa.lib.jdbc.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:280)\n\tat org.apache.openjpa.lib.jdbc.JDBCEventConnectionDecorator$EventPreparedStatement.executeQuery(JDBCEventConnectionDecorator.java:270)\n\tat org.apache.openjpa.lib.jdbc.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:278)\n\tat org.apache.openjpa.lib.jdbc.LoggingConnectionDecorator$LoggingConnection$LoggingPreparedStatement.executeQuery(LoggingConnectionDecorator.java:1174)\n\tat org.apache.openjpa.lib.jdbc.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:278)\n\tat org.apache.openjpa.jdbc.kernel.JDBCStoreManager$CancelPreparedStatement.executeQuery(JDBCStoreManager.java:1773)\n\tat org.apache.openjpa.lib.jdbc.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:268)\n\tat org.apache.openjpa.jdbc.sql.SelectImpl.executeQuery(SelectImpl.java:499)\n\tat org.apache.openjpa.jdbc.sql.SelectImpl.execute(SelectImpl.java:424)\n\tat org.apache.openjpa.jdbc.sql.SelectImpl.execute(SelectImpl.java:382)\n\tat org.apache.openjpa.jdbc.kernel.SelectResultObjectProvider.open(SelectResultObjectProvider.java:94)\n\tat org.apache.openjpa.kernel.QueryImpl$PackingResultObjectProvider.open(QueryImpl.java:2068)\n\tat org.apache.openjpa.lib.rop.EagerResultList.<init>(EagerResultList.java:34)\n\tat org.apache.openjpa.kernel.QueryImpl.toResult(QueryImpl.java:1246)\n\tat org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:1005)\n\tat org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:861)\n\tat org.apache.openjpa.kernel.QueryImpl.execute(QueryImpl.java:792)\n\tat org.apache.openjpa.kernel.DelegatingQuery.execute(DelegatingQuery.java:542)\n\tat org.apache.openjpa.persistence.QueryImpl.execute(QueryImpl.java:288)\n\tat org.apache.openjpa.persistence.QueryImpl.getResultList(QueryImpl.java:302)\n\tat org.apache.openjpa.persistence.lockmgr.TestPessimisticLocks.testQueryAfterFindWithPessimisticLocks(TestPessimisticLocks.java:271)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n\tat java.lang.reflect.Method.invoke(Unknown Source)\n\tat junit.framework.TestCase.runTest(TestCase.java:154)\n\tat org.apache.openjpa.persistence.test.AbstractPersistenceTestCase.runTest(AbstractPersistenceTestCase.java:516)\n\tat junit.framework.TestCase.runBare(TestCase.java:127)\n\tat org.apache.openjpa.persistence.test.AbstractPersistenceTestCase.runBare(AbstractPersistenceTestCase.java:503)\n\tat org.apache.openjpa.persistence.test.AbstractPersistenceTestCase.runBare(AbstractPersistenceTestCase.java:479)\n\tat junit.framework.TestResult$1.protect(TestResult.java:106)\n\tat junit.framework.TestResult.runProtected(TestResult.java:124)\n\tat junit.framework.TestResult.run(TestResult.java:109)\n\tat junit.framework.TestCase.run(TestCase.java:118)\n\tat org.apache.openjpa.persistence.test.AbstractPersistenceTestCase.run(AbstractPersistenceTestCase.java:179)\n\tat junit.framework.TestSuite.runTest(TestSuite.java:208)\n\tat junit.framework.TestSuite.run(TestSuite.java:203)\n\tat org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3TestReference.java:128)\n\tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:460)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:673)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386)\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196)\n","customfield_10010":null,"timetracking":{},"customfield_12314523":null,"customfield_12314127":null,"customfield_12314522":null,"customfield_12314126":null,"customfield_12314521":null,"customfield_12314125":null,"customfield_12314520":null,"customfield_12314124":null,"attachment":[],"customfield_12312340":null,"customfield_12314123":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12314122":null,"customfield_12314121":null,"customfield_12310041":null,"customfield_12314120":null,"customfield_12314129":null,"customfield_12314524":null,"customfield_12314128":null,"summary":"TestPessimisticLocks JUNIT test produced inconsistent behavior with various backends","customfield_12314130":null,"customfield_12310291":null,"customfield_12310290":null,"customfield_12314138":null,"customfield_12314137":null,"environment":null,"customfield_12314136":null,"customfield_12314135":null,"customfield_12311020":null,"customfield_12314134":null,"duedate":null,"customfield_12314132":null,"customfield_12314131":null,"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12470490/comment/12894705","id":"12894705","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fancy","name":"fancy","key":"fancy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Catalina Wei","active":true,"timeZone":"Etc/UTC"},"body":"After upgrading MySQL server to 5.1.49, the server shutdown problem is gone.\nTest 3.1 and 3.2  reported QueryTimeoutException using  MySQL-5.1.49.\n\nUpdated test results:\n\nTests Derby_________________  DB2V9.7____________  Oracle10gXE 10.2.0.1.0__ MySQL 5.1.49/JDBC 5.1.7\n====================================================================================================================================\n1.1__  PessimisticLockException_ LockTimeoutException__ LockTimeoutException__ LockTimeoutException\n1.2__  No exception____________ No exception_________ No exception__________ No exception\n2.1__  PessimisticLockException_ LockTimeoutException__ LockTimeoutException___ LockTimeoutException\n2.2__  No exception____________ LockTimeoutException___ No exception_________ LockTimeoutException\n3.1__  No exception____________ QueryTimeoutException__ process hang________ QueryTimeoutException\n3.2__  PessimisticLockException_ QueryTimeoutException___ process hang________ QueryTimeoutException\n4.1__  No exception___________ QueryTimeoutException___ No exception_________ QueryTimeoutException\n4.2__  PessimisticLockException_ QueryTimeoutException___ process hang________ QueryTimeoutException\n\n\nThe assertion failures still remain in TestPessismisticLocks JUNIT test.\nNeeds further investigation.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fancy","name":"fancy","key":"fancy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Catalina Wei","active":true,"timeZone":"Etc/UTC"},"created":"2010-08-02T20:53:03.006+0000","updated":"2010-08-02T20:53:03.006+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12470490/comment/12894964","id":"12894964","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fancy","name":"fancy","key":"fancy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Catalina Wei","active":true,"timeZone":"Etc/UTC"},"body":"Test results for Oracle backend was inaccurate in previous comments, test 3.1 actually passed with no exceptions.\nOracle server is hanging only in test 3.2. This happens to both Oracle 10g 10.2.0.1.0 and Oracle 11g 11.1.0.6.0.\n\nUpdate  test results for Oracle 10g and 11g:\n\nTests Derby_________________ DB2V9.7______________ Oracle10gXE & Oracle 11g ______MySQL 5.1.49/JDBC 5.1.7\n====================================================================================================================================\n1.1__ PessimisticLockException_ LockTimeoutException____ LockTimeoutException_________ LockTimeoutException\n1.2__ No exception____________ No exception___________ No exception_________________ No exception\n2.1__ PessimisticLockException_ LockTimeoutException____ LockTimeoutException_________ LockTimeoutException\n2.2__ No exception____________ LockTimeoutException____ No exception________________ LockTimeoutException\n3.1__ No exception____________ QueryTimeoutException___ No exception--_______________ QueryTimeoutException\n3.2__ PessimisticLockException_ QueryTimeoutException____Server  hang_________________ QueryTimeoutException\n4.1__ No exception___________ QueryTimeoutException____ No exception_________________ QueryTimeoutException\n4.2__ PessimisticLockException_ QueryTimeoutException____ process hang________________ QueryTimeoutException ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fancy","name":"fancy","key":"fancy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Catalina Wei","active":true,"timeZone":"Etc/UTC"},"created":"2010-08-03T18:04:25.965+0000","updated":"2010-08-03T18:04:25.965+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12470490/comment/12900536","id":"12900536","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fancy","name":"fancy","key":"fancy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Catalina Wei","active":true,"timeZone":"Etc/UTC"},"body":"Fixed testcase","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fancy","name":"fancy","key":"fancy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Catalina Wei","active":true,"timeZone":"Etc/UTC"},"created":"2010-08-20T00:28:59.982+0000","updated":"2010-08-20T00:28:59.982+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12470490/comment/12912541","id":"12912541","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikedd","name":"mikedd","key":"mikedd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael Dick","active":true,"timeZone":"America/Chicago"},"body":"Closing issues which have been resolved for some time. If the problem persists, please reopen. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikedd","name":"mikedd","key":"mikedd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael Dick","active":true,"timeZone":"America/Chicago"},"created":"2010-09-20T15:40:06.374+0000","updated":"2010-09-20T15:40:06.374+0000"}],"maxResults":4,"total":4,"startAt":0},"customfield_12311820":"0|i0z8dr:","customfield_12314139":null}}

