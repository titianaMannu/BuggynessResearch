{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12491561","self":"https://issues.apache.org/jira/rest/api/2/issue/12491561","key":"OPENJPA-1899","fields":{"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12316191","id":"12316191","description":"OpenJPA 2.1.x maintenance release","name":"2.1.1","archived":false,"released":true,"releaseDate":"2011-07-25"}],"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12312323":null,"customfield_12312320":null,"customfield_12310420":"162126","customfield_12312321":null,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12312331":null,"customfield_12312332":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314019","id":"12314019","description":"JPA2 release","name":"2.0.0","archived":false,"released":true,"releaseDate":"2010-04-22"}],"customfield_12311120":null,"customfield_12313826":null,"customfield_12312339":null,"issuelinks":[],"customfield_12313825":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=curtisr7","name":"curtisr7","key":"curtisr7","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Richard G. Curtis","active":true,"timeZone":"America/Chicago"},"customfield_12312337":null,"customfield_12313823":null,"customfield_12312338":null,"customfield_12311920":null,"customfield_12313822":null,"customfield_12312335":null,"customfield_12313821":null,"customfield_12312336":null,"customfield_12313820":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12311302","id":"12311302","name":"kernel","description":"Kernel"}],"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"201630","customfield_12312823":null,"creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rkrier","name":"rkrier","key":"rkrier","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Krier","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rkrier","name":"rkrier","key":"rkrier","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Krier","active":true,"timeZone":"Etc/UTC"},"aggregateprogress":{"progress":0,"total":0},"customfield_12313520":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"customfield_12313924":null,"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/OPENJPA-1899/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12313920":null,"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"customfield_12314020":"{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@3097ae3[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@336ac312[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5e95fd8b[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@3b02c718[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1e52bfd3[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@12c3b250[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@63cb6c26[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@4edc5d40[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@45fbdf6f[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@4aa5a4b2[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@72374b9c[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@5ead3ec7[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}","customfield_12314141":null,"customfield_12314140":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310351","id":"12310351","key":"OPENJPA","name":"OpenJPA","projectTypeKey":"software","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310351&avatarId=10043","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310351&avatarId=10043","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310351&avatarId=10043","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310351&avatarId=10043"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10252","id":"10252","description":"","name":"OpenJPA"}},"aggregatetimespent":null,"customfield_12312520":null,"customfield_12314422":null,"customfield_12314421":null,"customfield_12314146":null,"customfield_12314420":null,"customfield_12314145":null,"customfield_12314144":null,"customfield_12314143":null,"resolutiondate":"2011-03-31T21:09:15.672+0000","workratio":-1,"customfield_12312923":null,"customfield_12312920":null,"customfield_12312921":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/OPENJPA-1899/watchers","watchCount":0,"isWatching":false},"created":"2010-11-29T17:12:53.407+0000","updated":"2011-03-31T21:09:15.681+0000","timeoriginalestimate":null,"description":"I have a simple example.  A customer has a reference to an address and a (primary) contact (an extension of person).  Find the customer, get the contact and evict it from L2.  Now find the customer again using a new entity manager.  Begin a Tx and change the address of the contact and then call Customer.getPrimaryContact() (this is important)   Rollback the Tx.  Now find the customer again using another new EntityManager and call Customer.getPrimaryContact().getAddress().  The address associated with the contact is Null and not the original address as expected.  The same scenario works fine under OpenJPA 1.2.2.  \n\nThe reason this is a big problem for us is we use L2 caching in our application and the application is clustered.  The same problem occurs if different nodes in the cluster operate on the same objects.  In a cluster \"evict\" is not directly called, but the RemoteCommitProvider will evict the L2 and create the same problem.  \n\nI have attached example code to reproduce the problem using a single JVM and calling Evict.  I also have another example where you can deploy the code on two nodes in a cluster and see the problem occurs that way as well.  Each example contains Unix shell scripts and Windows cmd files as well.  Each are paired for JPA 1.0 and JPA 2.0.  Again, the problem only occurs under JPA 2.0.\n\nThis is a block for us.  We cannot ship our product with this type of problem as it means objects and their graph can be corrupted.  \n","customfield_10010":null,"timetracking":{},"customfield_12314523":null,"customfield_12314127":null,"customfield_12314522":null,"customfield_12314126":null,"customfield_12314521":null,"customfield_12314125":null,"customfield_12314520":null,"customfield_12314124":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12464919","id":"12464919","filename":"evictproblem.zip","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rkrier","name":"rkrier","key":"rkrier","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Krier","active":true,"timeZone":"Etc/UTC"},"created":"2010-11-29T23:43:27.493+0000","size":6555765,"mimeType":"application/zip","content":"https://issues.apache.org/jira/secure/attachment/12464919/evictproblem.zip"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12466462","id":"12466462","filename":"OPENJPA-1899.test.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=curtisr7","name":"curtisr7","key":"curtisr7","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Richard G. Curtis","active":true,"timeZone":"America/Chicago"},"created":"2010-12-17T14:15:58.425+0000","size":14211,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12466462/OPENJPA-1899.test.patch"}],"customfield_12312340":null,"customfield_12314123":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12314122":null,"customfield_12314121":null,"customfield_12310041":null,"customfield_12314120":null,"customfield_12314129":null,"customfield_12314524":null,"customfield_12314128":null,"summary":"Evict from L2 of a object causes secondary objects to never be loaded in graph","customfield_12314130":null,"customfield_12310291":null,"customfield_12310290":null,"customfield_12314138":null,"customfield_12314137":null,"environment":"N/A","customfield_12314136":null,"customfield_12314135":null,"customfield_12311020":null,"customfield_12314134":null,"duedate":null,"customfield_12314132":null,"customfield_12314131":null,"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12491561/comment/12964845","id":"12964845","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rkrier","name":"rkrier","key":"rkrier","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Krier","active":true,"timeZone":"Etc/UTC"},"body":"Instructions:\n\nUnzip the attached file.  In the conf directory, there is a file called schema_mysql.sql.  \n1) Create a new MySQL database and install the tables in the script.  \n2) Edit conf/openjpa.properties and set the openjpa.ConnectionProperties to your database.  \n3) In the shell script and/or cmd files in the bin directory, change JAVA_HOME as appropriate for your environment.\n4) Run bin/simple-evict-sjvm-1.0 and bin/simple-evict-sjvm-2.0.  You will see there is no problem under OpenJPA 1.0 but there is a problem 2.0.\n\nYou can also deploy the application on two nodes and run the two node tests on each node.  There are instructions given in each script on how to configure.  Basically you just need to edit the RemoteCommitProvider settings as appropriate on each node and run the tests on each node and follow the prompts given in the application.\n\nNote: I removed openjpa-all-2.0.1.jar from the lib/openjpa2.0.1 in order to keep the size of this upload small enough to attach.\n\nBob","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rkrier","name":"rkrier","key":"rkrier","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Krier","active":true,"timeZone":"Etc/UTC"},"created":"2010-11-29T17:29:23.607+0000","updated":"2010-11-29T17:29:23.607+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12491561/comment/12964849","id":"12964849","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rkrier","name":"rkrier","key":"rkrier","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Krier","active":true,"timeZone":"Etc/UTC"},"body":"One more thing to note:\n1) The problem does not occur if L2 caching is not enabled. This is not a viable workaround for us.\n2) The problem does not occur if eager fetching is used in the object graph instead of lazy.  This is not a viable workaround for us.\n\nBob","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rkrier","name":"rkrier","key":"rkrier","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Krier","active":true,"timeZone":"Etc/UTC"},"created":"2010-11-29T17:36:45.225+0000","updated":"2010-11-29T17:36:45.225+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12491561/comment/12964927","id":"12964927","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=curtisr7","name":"curtisr7","key":"curtisr7","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Richard G. Curtis","active":true,"timeZone":"America/Chicago"},"body":"...thanks for the test case but we can't use it and probably shouldn't look at it? Can I have you re-upload your Entities / the test case and check the \"Grant license to ASF for inclusion in ASF works\" box when you upload. I'll use that info to create a OpenJPA unit test to more easily recreate the problem.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=curtisr7","name":"curtisr7","key":"curtisr7","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Richard G. Curtis","active":true,"timeZone":"America/Chicago"},"created":"2010-11-29T20:29:05.879+0000","updated":"2010-11-29T20:29:05.879+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12491561/comment/12965005","id":"12965005","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rkrier","name":"rkrier","key":"rkrier","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Krier","active":true,"timeZone":"Etc/UTC"},"body":"Uploaded again with proper attachment license.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rkrier","name":"rkrier","key":"rkrier","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Krier","active":true,"timeZone":"Etc/UTC"},"created":"2010-11-29T23:43:29.245+0000","updated":"2010-11-29T23:43:29.245+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12491561/comment/12965010","id":"12965010","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rkrier","name":"rkrier","key":"rkrier","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Krier","active":true,"timeZone":"Etc/UTC"},"body":"Hi Rick,\n\nI have re-uploaded the test case zip file with the ASF inclusion option.\nLet me know if you still have problems with it.  I can send it directly to\nyou if needed.\n\nThe entities are in src/com/foo/bar/models and the test cases are in\nsrc/com/foo/bar/app.  It should be pretty straight forward to see what's\ngoing on.  If something isn't clear, let me know and I'll be happy to\nassist.\n\nThanks for your response on this.\n\nBob\n\n\n\n----------------------------------------------------------------------------->>\n-\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rkrier","name":"rkrier","key":"rkrier","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Krier","active":true,"timeZone":"Etc/UTC"},"created":"2010-11-29T23:49:13.348+0000","updated":"2010-11-29T23:49:13.348+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12491561/comment/12967192","id":"12967192","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bkrier%40us.axway.com","name":"bkrier@us.axway.com","key":"bkrier@us.axway.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Krier Bob","active":true,"timeZone":"Etc/UTC"},"body":"Hi Ric,\n\nHas anyone had a chance to look into this issue?  Do you have everything\nyou need from me?\n\nThanks,\n\nBob\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bkrier%40us.axway.com","name":"bkrier@us.axway.com","key":"bkrier@us.axway.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Krier Bob","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-06T14:15:12.987+0000","updated":"2010-12-06T14:15:12.987+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12491561/comment/12972487","id":"12972487","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=curtisr7","name":"curtisr7","key":"curtisr7","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Richard G. Curtis","active":true,"timeZone":"America/Chicago"},"body":"Attaching a OpenJPA style unit test.... but I must be missing something because I'm getting a NPE from test code[1]. It looks like when you have openjpa.DetachState set to fgs, we null out the reference to primaryContact on rollback... if openjpa.DetachState is set to loaded, it seems to work properly?\n\nRobert -- Can you look at the patch that I've posted to see if I missed something in my butchering of your test? \n\nThanks,\nRick\n\n[1]         System.out.println(\"The address after rollback is: \"\n            + (cust2.getPrimaryContact().getAddress() == null ? \"null\" : cust2.getPrimaryContact().getAddress() <- NPE from this line\n                .getStreet()) + \"\\n\");","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=curtisr7","name":"curtisr7","key":"curtisr7","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Richard G. Curtis","active":true,"timeZone":"America/Chicago"},"created":"2010-12-17T14:08:58.139+0000","updated":"2010-12-17T14:08:58.139+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12491561/comment/12972491","id":"12972491","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=curtisr7","name":"curtisr7","key":"curtisr7","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Richard G. Curtis","active":true,"timeZone":"America/Chicago"},"body":"Attaching a new patch with the correct name.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=curtisr7","name":"curtisr7","key":"curtisr7","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Richard G. Curtis","active":true,"timeZone":"America/Chicago"},"created":"2010-12-17T14:15:58.465+0000","updated":"2010-12-17T14:15:58.465+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12491561/comment/12972536","id":"12972536","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bkrier%40us.axway.com","name":"bkrier@us.axway.com","key":"bkrier@us.axway.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Krier Bob","active":true,"timeZone":"Etc/UTC"},"body":"\nThanks Rick, I'll look at it this morning.\n\nRegards,\n\nBob\n\n\n----------------------------------------------------------------------------->>\n-\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bkrier%40us.axway.com","name":"bkrier@us.axway.com","key":"bkrier@us.axway.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Krier Bob","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-17T16:13:03.088+0000","updated":"2010-12-17T16:13:03.088+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12491561/comment/12972574","id":"12972574","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bkrier%40us.axway.com","name":"bkrier@us.axway.com","key":"bkrier@us.axway.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Krier Bob","active":true,"timeZone":"Etc/UTC"},"body":"Hi Ric,\n\nWhat exactly do you want me to look at.  I've been trying to get Openjpa set\nup with Maven and I'm having a lot of problems.  You comment about primary\ncontact getting nulled out after rollback is the problem I'm reporting.\nThat shouldn't be happening.\n\nI've tried running my tests with openjpa.DetachState=loaded and it still\nfails.  Again, everything works fine under OpenJPA 1.2.2.\n\nThanks and regards,\n\nBob \n\n\n\nhttps://issues.apache.org/jira/browse/OPENJPA-1899?page=com.atlassian.jira.pl>>\nu\n----------------------------------------------------------------------------->>\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bkrier%40us.axway.com","name":"bkrier@us.axway.com","key":"bkrier@us.axway.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Krier Bob","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-17T18:24:03.169+0000","updated":"2010-12-17T18:24:03.169+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12491561/comment/12972593","id":"12972593","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=curtisr7","name":"curtisr7","key":"curtisr7","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Richard G. Curtis","active":true,"timeZone":"America/Chicago"},"body":"Bob -\n\nJust so we're clear, the problem you're reporting is that cust2.getPrimaryContact() returns null after calling rollback? The test that I posted also fails on 1.2.x.... so I must be missing something.\n\nThanks,\nRick","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=curtisr7","name":"curtisr7","key":"curtisr7","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Richard G. Curtis","active":true,"timeZone":"America/Chicago"},"created":"2010-12-17T18:57:48.176+0000","updated":"2010-12-17T18:57:48.176+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12491561/comment/12972599","id":"12972599","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bkrier%40us.axway.com","name":"bkrier@us.axway.com","key":"bkrier@us.axway.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Krier Bob","active":true,"timeZone":"Etc/UTC"},"body":"Yes that's the problem, however it doesn't fail under 1.2.2 for me.  If I\nrun EvictTest with 2.0.1 libraries, the output is as follows:\n\nIn order to run this test, you must configure the remote commit provider\nsetting for SJVM.\nThe address from first find is: This is the original street address\nThe address from second find is: This is the original street address\nThe address before rollback is: This is a new street address\nThe address after rollback is: This is the original street address\nThe address from third find is: null\n\n\nIf I run EvictTest with the 1.2.2 libraries, the output is as follows:\n\nIn order to run this test, you must configure the remote commit provider\nsetting for SJVM.\nThe address from first find is: This is the original street address\nThe address from second find is: This is the original street address\nThe address before rollback is: This is a new street address\nThe address after rollback is: This is the original street address\nThe address from third find is: This is the original street address\n\nMake sense?\n\n\n\n----------------------------------------------------------------------------->>\n-\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bkrier%40us.axway.com","name":"bkrier@us.axway.com","key":"bkrier@us.axway.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Krier Bob","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-17T19:08:00.933+0000","updated":"2010-12-17T19:08:00.933+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12491561/comment/12972604","id":"12972604","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=curtisr7","name":"curtisr7","key":"curtisr7","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Richard G. Curtis","active":true,"timeZone":"America/Chicago"},"body":"Ok, my test must be not quite the same scenario..... I'm getting a NPE from EvictTest:49. The NPE is calling .getAddress() on a null getPrimaryContact().\n\nThanks,\nRick","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=curtisr7","name":"curtisr7","key":"curtisr7","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Richard G. Curtis","active":true,"timeZone":"America/Chicago"},"created":"2010-12-17T19:16:28.855+0000","updated":"2010-12-17T19:16:28.855+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12491561/comment/12972605","id":"12972605","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bkrier%40us.axway.com","name":"bkrier@us.axway.com","key":"bkrier@us.axway.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Krier Bob","active":true,"timeZone":"Etc/UTC"},"body":"No problem.  Thanks Rick.\n\n\n\n----------------------------------------------------------------------------->>\n-\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bkrier%40us.axway.com","name":"bkrier@us.axway.com","key":"bkrier@us.axway.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Krier Bob","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-17T19:22:03.075+0000","updated":"2010-12-17T19:22:03.075+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12491561/comment/12973235","id":"12973235","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=curtisr7","name":"curtisr7","key":"curtisr7","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Richard G. Curtis","active":true,"timeZone":"America/Chicago"},"body":"Robert -\n\nI ran with your provided example this morning with 2.1.x and here is the result that I'm seeing:\n\nC:\\dev\\jpa\\tmp\\evictproblem\\bin>c:\\java6-sun\\bin\\java.exe -cp ..\\conf;..\\classes;..\\lib\\jdbcdrivers\\mysql-connector-java-3.1.13-bin.jar;..\\lib\\openjpa2.0.1\\openjpa-all-2.1.0-SNAPSHOT.jar com.foo.bar.app.EvictTest\n\nIn order to run this test, you must configure the remote commit provider setting for SJVM.\n58  evictproblem  INFO   [main] openjpa.Runtime - Starting OpenJPA 2.1.0-SNAPSHOT\n139  evictproblem  INFO   [main] openjpa.jdbc.JDBC - Using dictionary class \"org.apache.openjpa.jdbc.sql.MySQLDictionary\".\n770  evictproblem  INFO   [main] openjpa.Runtime - The Entity \"com.foo.bar.models.Contact\" was enhanced at level \"2\", but the current level of enhancement is \"961,774\".\n774  evictproblem  INFO   [main] openjpa.Runtime - A down level Entity was detected and logged. Please enable RUNTIME trace to see all down level Entities.\nThe address from first find is: This is the original street address\nThe address from second find is: This is the original street address\nThe address before rollback is: This is a new street address\nThe address after rollback is: This is the original street address\nThe address from third find is: This is the original street address\n\nThanks,\nRick","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=curtisr7","name":"curtisr7","key":"curtisr7","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Richard G. Curtis","active":true,"timeZone":"America/Chicago"},"created":"2010-12-20T15:59:54.109+0000","updated":"2010-12-20T15:59:54.109+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12491561/comment/12973248","id":"12973248","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bkrier%40us.axway.com","name":"bkrier@us.axway.com","key":"bkrier@us.axway.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Krier Bob","active":true,"timeZone":"Etc/UTC"},"body":"Hi Rick,\n\nI just tried it with the 2.1.0 snapshot and you are correct, the problem\nseems to be fixed.  Correct me if I'm wrong, but 2.1.0 is not officially\nreleased yet, right?  Do you know what changes were made to fix this\nproblem?  Is it something I can back port into 2.0.1 easily?\n\nThanks!\n\nBob\n\n\n\n----------------------------------------------------------------------------->>\n-\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bkrier%40us.axway.com","name":"bkrier@us.axway.com","key":"bkrier@us.axway.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Krier Bob","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-20T16:38:03.456+0000","updated":"2010-12-20T16:38:03.456+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12491561/comment/12973256","id":"12973256","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=curtisr7","name":"curtisr7","key":"curtisr7","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Richard G. Curtis","active":true,"timeZone":"America/Chicago"},"body":"Bob -\n\nHonestly I didn't spend any time looking at the test with 2.0.1, but nothing comes to mind that would have changed. Can I have you try one of the nightly 2.0.x snapshots? Then at least we can figure out if this is something that has already been fixed in the 2.0.x stream.\n\nI'm in the middle of another JIRA currently, but I should have some time later on to take another look at this one.\n\nThanks,\nRick","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=curtisr7","name":"curtisr7","key":"curtisr7","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Richard G. Curtis","active":true,"timeZone":"America/Chicago"},"created":"2010-12-20T17:04:47.706+0000","updated":"2010-12-20T17:04:47.706+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12491561/comment/12973259","id":"12973259","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bkrier%40us.axway.com","name":"bkrier@us.axway.com","key":"bkrier@us.axway.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Krier Bob","active":true,"timeZone":"Etc/UTC"},"body":"Sure, I'll give it a try.\n\n\n\n----------------------------------------------------------------------------->>\n-\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bkrier%40us.axway.com","name":"bkrier@us.axway.com","key":"bkrier@us.axway.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Krier Bob","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-20T17:09:00.748+0000","updated":"2010-12-20T17:09:00.748+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12491561/comment/12973342","id":"12973342","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bkrier%40us.axway.com","name":"bkrier@us.axway.com","key":"bkrier@us.axway.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Krier Bob","active":true,"timeZone":"Etc/UTC"},"body":"Hi Rick,\n\nI don't see any 2.0.x snapshots on OpenJPA's site.  Let me know if I can get\nthem some other way.\n\nBob\n\n\n\n----------------------------------------------------------------------------->>\n-\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bkrier%40us.axway.com","name":"bkrier@us.axway.com","key":"bkrier@us.axway.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Krier Bob","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-20T20:21:03.393+0000","updated":"2010-12-20T20:21:03.393+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12491561/comment/12973349","id":"12973349","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bkrier%40us.axway.com","name":"bkrier@us.axway.com","key":"bkrier@us.axway.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Krier Bob","active":true,"timeZone":"Etc/UTC"},"body":"Hi again,\n\nI did find the 2.0.2 snapshot and tried it.  It fails.\n\nThe address from first find is: This is the original street address\nThe address from second find is: This is the original street address\nThe address before rollback is: This is a new street address\nThe address after rollback is: This is the original street address\nThe address from third find is: null\n\n\n\nhttps://issues.apache.org/jira/browse/OPENJPA-1899?page=com.atlassian.jira.pl>>\nu\ngin.system.issuetabpanels:comment-tabpanel&focusedCommentId=12973256#action_1>>\n2\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bkrier%40us.axway.com","name":"bkrier@us.axway.com","key":"bkrier@us.axway.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Krier Bob","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-20T20:39:01.033+0000","updated":"2010-12-20T20:39:01.033+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12491561/comment/12973705","id":"12973705","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rkrier","name":"rkrier","key":"rkrier","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Krier","active":true,"timeZone":"Etc/UTC"},"body":"Hi Rick,\n\nIs there something you wanted me to look at?  The attachment doesn't come\nthrough.\n\nBob\n\n\n\n----------------------------------------------------------------------------->>\n-\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rkrier","name":"rkrier","key":"rkrier","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Robert Krier","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-21T15:37:04.894+0000","updated":"2010-12-21T15:37:04.894+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12491561/comment/12973707","id":"12973707","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=curtisr7","name":"curtisr7","key":"curtisr7","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Richard G. Curtis","active":true,"timeZone":"America/Chicago"},"body":"Bob -\n\nSorry, no. I was removing the non-asf licensed attachment. I'm just digging into your issue now... hopefully I'll come up with something shortly here.\n\nThanks,\nRick","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=curtisr7","name":"curtisr7","key":"curtisr7","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Richard G. Curtis","active":true,"timeZone":"America/Chicago"},"created":"2010-12-21T15:40:33.401+0000","updated":"2010-12-21T15:40:33.401+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12491561/comment/12974207","id":"12974207","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=curtisr7","name":"curtisr7","key":"curtisr7","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Richard G. Curtis","active":true,"timeZone":"America/Chicago"},"body":"Bob -\n\nI can't quite explain it yet, but OPENJPA-1884 is the change that fixed this problem in 2.1.x and trunk. It appears that we are putting a dirty entity back into the datacache.. I haven't completely got my head around this one yet, but I can fix the problem. That being said, 2.0.x is a WebSphere maintained branch and it might be tough to get this fix into that branch.\n\nWhat are your thoughts on using 2.1.0 for your application? We haven't cut a release yet, but I expect we will shortly after the new year.\n\nThanks,\nRick","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=curtisr7","name":"curtisr7","key":"curtisr7","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Richard G. Curtis","active":true,"timeZone":"America/Chicago"},"created":"2010-12-22T14:15:18.755+0000","updated":"2010-12-22T14:15:18.755+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12491561/comment/12974248","id":"12974248","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bkrier%40us.axway.com","name":"bkrier@us.axway.com","key":"bkrier@us.axway.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Krier Bob","active":true,"timeZone":"Etc/UTC"},"body":"If it is early in the year that it is released, we can probably be fine with\nthat.  I would like to make the change locally for myself so our QA people\ncan test with the fix now.  Is there an easy way for me to diff the change\nso I can modify my own copy of the class?\n\nThanks Rick!\n\nBob\n\n\n\n----------------------------------------------------------------------------->>\n-\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bkrier%40us.axway.com","name":"bkrier@us.axway.com","key":"bkrier@us.axway.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Krier Bob","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-22T15:41:03.158+0000","updated":"2010-12-22T15:41:03.158+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12491561/comment/12974278","id":"12974278","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bkrier%40us.axway.com","name":"bkrier@us.axway.com","key":"bkrier@us.axway.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Krier Bob","active":true,"timeZone":"Etc/UTC"},"body":"Never mind, I found the changes made.  I'm attempting to back port them to\n2.0.1 and I'll try it out.  I'll keep you posted.\n\nBob \n\n\n\nhttps://issues.apache.org/jira/browse/OPENJPA-1899?page=com.atlassian.jira.pl>>\nu\ngin.system.issuetabpanels:comment-tabpanel&focusedCommentId=12974207#action_1>>\n2\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bkrier%40us.axway.com","name":"bkrier@us.axway.com","key":"bkrier@us.axway.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Krier Bob","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-22T16:51:03.265+0000","updated":"2010-12-22T16:51:03.265+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12491561/comment/12974313","id":"12974313","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bkrier%40us.axway.com","name":"bkrier@us.axway.com","key":"bkrier@us.axway.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Krier Bob","active":true,"timeZone":"Etc/UTC"},"body":"Hi Rick,\n\nI back ported the changes made for JIRA OPENJPA-1884 locally and it seemed\nto fix the problem.  We should be able to live with it this way for now\nuntil 2.1.0 is GA.  Thanks for all your help on this!!!\n\nHave a great holiday!!!!\n\nBob\n\n\n\n--------------------------------------------------------------------------->>>>\n-\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bkrier%40us.axway.com","name":"bkrier@us.axway.com","key":"bkrier@us.axway.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Krier Bob","active":true,"timeZone":"Etc/UTC"},"created":"2010-12-22T18:18:03.284+0000","updated":"2010-12-22T18:18:03.284+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12491561/comment/13014205","id":"13014205","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=curtisr7","name":"curtisr7","key":"curtisr7","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Richard G. Curtis","active":true,"timeZone":"America/Chicago"},"body":"This problem was fixed by OPENJPA-1884. Closing this issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=curtisr7","name":"curtisr7","key":"curtisr7","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Richard G. Curtis","active":true,"timeZone":"America/Chicago"},"created":"2011-03-31T21:03:59.173+0000","updated":"2011-03-31T21:03:59.173+0000"}],"maxResults":27,"total":27,"startAt":0},"customfield_12311820":"0|i0yvun:","customfield_12314139":null}}

