{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12760787","self":"https://issues.apache.org/jira/rest/api/2/issue/12760787","key":"OPENJPA-2551","fields":{"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12325298","id":"12325298","description":"OpenJPA 2.4.0","name":"2.4.0","archived":false,"released":true,"releaseDate":"2015-04-22"}],"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12312323":null,"customfield_12312320":null,"customfield_12310420":"9223372036854775807","customfield_12312321":null,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12312331":null,"customfield_12312332":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12319943","id":"12319943","description":"OpenJPA 2.2.1 Release","name":"2.2.1","archived":false,"released":true,"releaseDate":"2012-11-01"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12323356","id":"12323356","description":"OpenJPA 2.2.2 Release","name":"2.2.2","archived":false,"released":true,"releaseDate":"2013-04-22"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12319463","id":"12319463","description":"OpenJPA 2.3.0","name":"2.3.0","archived":false,"released":true,"releaseDate":"2013-11-24"}],"customfield_12311120":null,"customfield_12313826":null,"customfield_12312339":null,"issuelinks":[{"id":"12412921","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12412921","type":{"id":"12310060","name":"Container","inward":"Is contained by","outward":"contains","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310060"},"inwardIssue":{"id":"12766875","key":"OPENJPA-2558","self":"https://issues.apache.org/jira/rest/api/2/issue/12766875","fields":{"summary":"Implement a way to select the db representation of Boolean values","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/2","id":"2","description":"A new feature of the product, which has yet to be developed.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21141&avatarType=issuetype","name":"New Feature","subtask":false,"avatarId":21141}}}}],"customfield_12313825":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=struberg","name":"struberg","key":"struberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=struberg&avatarId=41313","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=struberg&avatarId=41313","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=struberg&avatarId=41313","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=struberg&avatarId=41313"},"displayName":"Mark Struberg","active":true,"timeZone":"Europe/Berlin"},"customfield_12312337":null,"customfield_12313823":null,"customfield_12312338":null,"customfield_12311920":null,"customfield_12313822":null,"customfield_12312335":null,"customfield_12313821":null,"customfield_12312336":null,"customfield_12313820":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12311300","id":"12311300","name":"jdbc","description":"jdbc interface"}],"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"aggregateprogress":{"progress":0,"total":0},"customfield_12313520":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"customfield_12313924":null,"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/OPENJPA-2551/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12313920":null,"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"customfield_12314020":"{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@4a2e68fc[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@f2d079d[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@9bfcfb9[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@6e4930fc[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@479c55e0[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@e7c4c6b[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7949981a[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@5e20891f[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7b36f46e[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@1745e077[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@22f933cd[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@784b3efc[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}","customfield_12314141":null,"customfield_12314140":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310351","id":"12310351","key":"OPENJPA","name":"OpenJPA","projectTypeKey":"software","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310351&avatarId=10043","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310351&avatarId=10043","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310351&avatarId=10043","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310351&avatarId=10043"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10252","id":"10252","description":"","name":"OpenJPA"}},"aggregatetimespent":null,"customfield_12312520":null,"customfield_12314422":null,"customfield_12314421":null,"customfield_12314146":null,"customfield_12314420":null,"customfield_12314145":null,"customfield_12314144":null,"customfield_12314143":null,"resolutiondate":"2015-04-05T08:01:41.893+0000","workratio":-1,"customfield_12312923":null,"customfield_12312920":null,"customfield_12312921":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/OPENJPA-2551/watchers","watchCount":2,"isWatching":false},"created":"2014-12-10T15:48:47.775+0000","updated":"2015-06-06T14:25:00.235+0000","timeoriginalestimate":null,"description":"Currently, it is impossible to have a database table column defined as SQL standard type {{BOOLEAN}} (defined in SQL-99) automatically working with a {{java.lang.Boolean}} or {{boolean}} Java type.\n\nI am currently testing with:\n# Apache Derby 10.9\n# MySQL 5.6\n# PostgreSQL 9.3\n\n\\\\\nAll three above databases support the column type definition. However, in the case of MySQL, it _magically_ works because the resulting datatype is {{TINYINT(1)}}, which is \"compatible\" with the data type {{bit}} (expected by current OpenJPA) - which makes it work by accident.\n\nFor the other two databases, I get the following exception:\n{noformat}\n<openjpa-2.2.0-rUnversioned directory fatal user error> org.apache.openjpa.persistence.ArgumentException: \"org.ancoron.jpa.test.TestEntity.set\" declares a column that is not compatible with the expected type \"bit\".  Column details:\nFull Name: t_test.C_SET\nType: unknown(16)\nSize: 1\nDefault: null\nNot Null: false\n\n        at org.apache.openjpa.jdbc.meta.MappingInfo.mergeColumn(MappingInfo.java:775)[218:org.apache.openjpa:2.2.0]\n        at org.apache.openjpa.jdbc.meta.MappingInfo.createColumns(MappingInfo.java:593)[218:org.apache.openjpa:2.2.0]\n        at org.apache.openjpa.jdbc.meta.ValueMappingInfo.getColumns(ValueMappingInfo.java:178)[218:org.apache.openjpa:2.2.0]\n        at org.apache.openjpa.jdbc.meta.strats.HandlerStrategies.map(HandlerStrategies.java:65)[218:org.apache.openjpa:2.2.0]\n        at org.apache.openjpa.jdbc.meta.strats.HandlerFieldStrategy.map(HandlerFieldStrategy.java:82)[218:org.apache.openjpa:2.2.0]\n        at org.apache.openjpa.jdbc.meta.FieldMapping.setStrategy(FieldMapping.java:146)[218:org.apache.openjpa:2.2.0]\n        at org.apache.openjpa.jdbc.meta.RuntimeStrategyInstaller.installStrategy(RuntimeStrategyInstaller.java:82)[218:org.apache.openjpa:2.2.0]\n        at org.apache.openjpa.jdbc.meta.FieldMapping.resolveMapping(FieldMapping.java:496)[218:org.apache.openjpa:2.2.0]\n        at org.apache.openjpa.jdbc.meta.FieldMapping.resolve(FieldMapping.java:461)[218:org.apache.openjpa:2.2.0]\n        at org.apache.openjpa.jdbc.meta.ClassMapping.resolveNonRelationMappings(ClassMapping.java:895)[218:org.apache.openjpa:2.2.0]\n        at org.apache.openjpa.jdbc.meta.MappingRepository.prepareMapping(MappingRepository.java:417)[218:org.apache.openjpa:2.2.0]\n        at org.apache.openjpa.meta.MetaDataRepository.preMapping(MetaDataRepository.java:762)[218:org.apache.openjpa:2.2.0]\n        at org.apache.openjpa.meta.MetaDataRepository.resolve(MetaDataRepository.java:651)[218:org.apache.openjpa:2.2.0]\n        ... 81 more\n{noformat}\n\n\\\\\nOf course, I have applied a workaround using custom Dictionaries, but the main point is that this makes my JPA-only application use implementation-specific configuration, which JPA is supposed to avoid.\n\nRunning with EclipseLink instead of OpenJPA works as expected.","customfield_10010":null,"timetracking":{},"customfield_12314523":null,"customfield_12314127":null,"customfield_12314522":null,"customfield_12314126":null,"customfield_12314521":null,"customfield_12314125":null,"customfield_12314520":null,"customfield_12314124":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12686868","id":"12686868","filename":"OPENJPA-2551-trunk.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"created":"2014-12-12T16:18:30.629+0000","size":18309,"mimeType":"text/x-diff","content":"https://issues.apache.org/jira/secure/attachment/12686868/OPENJPA-2551-trunk.patch"}],"customfield_12312340":null,"customfield_12314123":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12314122":null,"customfield_12314121":null,"customfield_12310041":null,"customfield_12314120":null,"customfield_12314129":null,"customfield_12314524":null,"customfield_12314128":null,"summary":"Standard SQL boolean mapping impossible","customfield_12314130":null,"customfield_12310291":null,"customfield_12310290":null,"customfield_12314138":null,"customfield_12314137":null,"environment":"Apache Karaf, OSGi, Apache Derby, MySQL, PostgreSQL","customfield_12314136":null,"customfield_12314135":null,"customfield_12311020":null,"customfield_12314134":null,"duedate":null,"customfield_12314132":null,"customfield_12314131":null,"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12760787/comment/14244391","id":"14244391","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"body":"Attached a patch for trunk: [^OPENJPA-2551-trunk.patch]\n\nThis patch changes the default mapping from the Java type boolean to SQL-99 standard data type BOOLEAN when supported by the corresponding database.\n\nAlso, conversion should be done properly when an existing database is used that uses data type {{BIT}} or similar. Best example is MySQL here which previously got a boolean field set to data type {{BIT}} and now returns {{TINYINT(1)}}.\n\nAt the same time I removed some PostgreSQL-specific workaround code and used a proper definition of standard boolean database support inside the core DBDictionary.\n\nI've also changed some tests to account for that.\n\nI've tested the changes with the following databases:\n* MySQL 5.6 (using JDBC driver version 5.1.22 - higher versions produce test failures for datetime comparison)\n* PostgreSQL 9.3 (using JDBC driver version 9.1-901-1.jdbc4)\n* Derby 10.8.2.2\n* H2 database 1.4.182\n* HSQLDB 2.3.2\n\n\\\\\nOther database dictionaries have not been touched so that regressions are very unlikely.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"created":"2014-12-12T16:18:30.636+0000","updated":"2014-12-12T16:18:30.636+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12760787/comment/14396145","id":"14396145","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=struberg","name":"struberg","key":"struberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=struberg&avatarId=41313","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=struberg&avatarId=41313","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=struberg&avatarId=41313","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=struberg&avatarId=41313"},"displayName":"Mark Struberg","active":true,"timeZone":"Europe/Berlin"},"body":"Hi Ancoron!\n\nThe problem with changing the default mappings is that we might break many existing installations. Please check OPENJPA-2558 (shipping with 2.4.0 which we currently prepare releasing) which should also solve your problem. With that feature you can freely configure the BooleanRepresentation you like to use for your application.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=struberg","name":"struberg","key":"struberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=struberg&avatarId=41313","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=struberg&avatarId=41313","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=struberg&avatarId=41313","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=struberg&avatarId=41313"},"displayName":"Mark Struberg","active":true,"timeZone":"Europe/Berlin"},"created":"2015-04-05T08:01:41.958+0000","updated":"2015-04-05T08:01:41.958+0000"}],"maxResults":2,"total":2,"startAt":0},"customfield_12311820":"0|i23aaf:","customfield_12314139":null}}

