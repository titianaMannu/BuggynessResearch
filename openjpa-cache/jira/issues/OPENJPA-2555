{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12765122","self":"https://issues.apache.org/jira/rest/api/2/issue/12765122","key":"OPENJPA-2555","fields":{"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12343421","id":"12343421","description":"","name":"3.1.0","archived":false,"released":true,"releaseDate":"2019-04-14"}],"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12312323":null,"customfield_12312320":null,"customfield_12310420":"9223372036854775807","customfield_12312321":null,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12312331":null,"customfield_12312332":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12323356","id":"12323356","description":"OpenJPA 2.2.2 Release","name":"2.2.2","archived":false,"released":true,"releaseDate":"2013-04-22"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12319463","id":"12319463","description":"OpenJPA 2.3.0","name":"2.3.0","archived":false,"released":true,"releaseDate":"2013-11-24"}],"customfield_12311120":null,"customfield_12313826":null,"customfield_12312339":null,"issuelinks":[{"id":"12404676","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12404676","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12398606","key":"OPENJPA-638","self":"https://issues.apache.org/jira/rest/api/2/issue/12398606","fields":{"summary":"Timestamp unsuitable for versioning on PostgreSQL databases","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12404677","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12404677","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12693951","key":"OPENJPA-2476","self":"https://issues.apache.org/jira/rest/api/2/issue/12693951","fields":{"summary":"OptimisticLockEx due to rounding of a Timestamp (either by OJ, or the DB)","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12547043","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12547043","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"13195135","key":"OPENJPA-2755","self":"https://issues.apache.org/jira/rest/api/2/issue/13195135","fields":{"summary":"support MySQL DATETIME and TIMESTAMP fractions (milliseconds, nanos)","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12313825":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=struberg","name":"struberg","key":"struberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=struberg&avatarId=41313","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=struberg&avatarId=41313","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=struberg&avatarId=41313","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=struberg&avatarId=41313"},"displayName":"Mark Struberg","active":true,"timeZone":"Europe/Berlin"},"customfield_12312337":null,"customfield_12313823":null,"customfield_12312338":null,"customfield_12311920":null,"customfield_12313822":null,"customfield_12312335":null,"customfield_12313821":null,"customfield_12312336":null,"customfield_12313820":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12311300","id":"12311300","name":"jdbc","description":"jdbc interface"},{"self":"https://issues.apache.org/jira/rest/api/2/component/12311304","id":"12311304","name":"jpa","description":"Java Persistence API interface"},{"self":"https://issues.apache.org/jira/rest/api/2/component/12311310","id":"12311310","name":"sql","description":"Issues to do with SQL, including generation of SQL. Issues that have to do with JDBC (i.e., execution of SQL statements and result set processing) should be filed in the jdbc component."}],"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"9223372036854775807","customfield_12312823":null,"creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"aggregateprogress":{"progress":0,"total":0},"customfield_12313520":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"customfield_12313924":null,"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/OPENJPA-2555/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12313920":null,"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"customfield_12314020":"{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@574a0315[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@53401ef7[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@65569c7c[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@36b29187[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@72835caf[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@bb5e414[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@5a512c62[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@784db006[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@10c3fd84[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@34f23ecc[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@6713360c[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@72cb6768[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}","customfield_12314141":null,"customfield_12314140":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310351","id":"12310351","key":"OPENJPA","name":"OpenJPA","projectTypeKey":"software","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310351&avatarId=10043","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310351&avatarId=10043","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310351&avatarId=10043","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310351&avatarId=10043"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10252","id":"10252","description":"","name":"OpenJPA"}},"aggregatetimespent":null,"customfield_12312520":null,"customfield_12314422":null,"customfield_12314421":null,"customfield_12314146":null,"customfield_12314420":null,"customfield_12314145":null,"customfield_12314144":null,"customfield_12314143":null,"resolutiondate":"2019-04-06T12:41:10.622+0000","workratio":-1,"customfield_12312923":null,"customfield_12312920":null,"customfield_12312921":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/OPENJPA-2555/watchers","watchCount":3,"isWatching":false},"created":"2015-01-06T14:58:50.484+0000","updated":"2019-04-06T12:41:10.666+0000","timeoriginalestimate":null,"description":"The use cases here are the following:\n# JPA entities are to-be-created for an existing database schema which includes several timestamp columns with explicit precision\n# A developer wants to specify timestamp precision inside JPA entities to better specify column data type information for the generated schema\n\n\\\\\nIn both cases, the result will be that any query executed for a timestamp column that is configured for less than millisecond precision (e.g. deci- or centi-seconds) will fail to find appropriate rows.\n\nOne of the reasons for that is that the precision used for rounding a timestamp value before it goes into a query is configured for a whole database type (using the dictionary) or the whole persistence context (using the configuration parameter).\n\nThis makes it impossible to have different column configurations, e.g. some without any precision declaration (where it's not important) but some with.\n\nIn addition, the default precision for the standard timestamp data type is 6 (microseconds), which is not respected by some databases (most prominently MySQL, which defaults to a precision of \"0\" instead).\n\nHowever, even if respected, when using timestamps generated by the database itself, which include the relevant precision, using those values for later comparison often fails because of precision mismatch and also for different behavior of different databases regarding fractional handling and the way how comparisons on timestamps work.","customfield_10010":null,"timetracking":{},"customfield_12314523":null,"customfield_12314127":null,"customfield_12314522":null,"customfield_12314126":null,"customfield_12314521":null,"customfield_12314125":null,"customfield_12314520":null,"customfield_12314124":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12690371","id":"12690371","filename":"2.2.x-Enable-timestamp-precision-handling.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"created":"2015-01-06T16:47:17.057+0000","size":17128,"mimeType":"text/x-diff","content":"https://issues.apache.org/jira/secure/attachment/12690371/2.2.x-Enable-timestamp-precision-handling.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12690372","id":"12690372","filename":"2.3.x-Enable-timestamp-precision-handling.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"created":"2015-01-06T16:47:17.065+0000","size":16763,"mimeType":"text/x-diff","content":"https://issues.apache.org/jira/secure/attachment/12690372/2.3.x-Enable-timestamp-precision-handling.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12692073","id":"12692073","filename":"openjpa-2.2.x-Enhance-timestamp-precision-handling.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"created":"2015-01-13T23:22:51.614+0000","size":64687,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12692073/openjpa-2.2.x-Enhance-timestamp-precision-handling.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12692074","id":"12692074","filename":"openjpa-2.3.x-Enhance-timestamp-precision-handling.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"created":"2015-01-13T23:22:51.621+0000","size":63003,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12692074/openjpa-2.3.x-Enhance-timestamp-precision-handling.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12692075","id":"12692075","filename":"openjpa-trunk-Enhance-timestamp-precision-handling.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"created":"2015-01-13T23:22:51.626+0000","size":63003,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12692075/openjpa-trunk-Enhance-timestamp-precision-handling.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12947308","id":"12947308","filename":"timestamp-scale-preserve-default-behavior.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"created":"2018-11-08T00:51:15.547+0000","size":3293,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12947308/timestamp-scale-preserve-default-behavior.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12690373","id":"12690373","filename":"trunk-Enable-timestamp-precision-handling.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"created":"2015-01-06T16:47:17.071+0000","size":16763,"mimeType":"text/x-diff","content":"https://issues.apache.org/jira/secure/attachment/12690373/trunk-Enable-timestamp-precision-handling.patch"}],"customfield_12312340":null,"customfield_12314123":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12314122":null,"customfield_12314121":null,"customfield_12310041":null,"customfield_12314120":null,"customfield_12314129":null,"customfield_12314524":null,"customfield_12314128":null,"summary":"Timestamp precision from manual schema not respected","customfield_12314130":null,"customfield_12310291":null,"customfield_12310290":null,"customfield_12314138":null,"customfield_12314137":null,"environment":null,"customfield_12314136":null,"customfield_12314135":null,"customfield_12311020":null,"customfield_12314134":null,"duedate":null,"customfield_12314132":null,"customfield_12314131":null,"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12765122/comment/14266375","id":"14266375","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"body":"Attached a bunch of patches:\n* For branch 2.2.x: [^2.2.x-Enable-timestamp-precision-handling.patch]\n* For branch 2.3.x: [^2.3.x-Enable-timestamp-precision-handling.patch]\n* For trunk: [^trunk-Enable-timestamp-precision-handling.patch]\n\n\\\\\nThose patches do the following:\n* extend {{TimeKeeper}} test entity with 7 new members:\n** each new member defined as {{java.sql.Timestamp}}\n** each new member contains a timestamp precision using the JPA {{\\@javax.persistence.Column(scale = X)}}, where _X_ is defined from \"0\" to \"6\" to test all precision arguments up to microseconds\n* extend {{TestTemporalTypeQueryParameterBinding}} to test insertion, retrieval and querying those new members\n* extend {{DBDictionary}}:\n** modify {{setTimestamp()}} to prefer column-specific precision if available\n** add a new type set to register precision-only data types (no \"size\") like for timestamp or time\n** modify {{appendSize()}} to pick up on registered precision-only data types (so we do not collide with current behavior for unmodified dictionaries) to get precision into generated DDL\n* extend {{MySQLDictionary}} to check for server version 5.6.4 or higher, which brings in support for fractional seconds for timestamp, datetime and time data types (see http://dev.mysql.com/doc/refman/5.6/en/fractional-seconds.html)\n* change {{MySQLDictionary::datePrecision}} to seconds (= no fractional seconds), because MySQL defaults to a precision of \"0\" when not defined\n* extend {{PostgresDictionary}} to include precision support for data types bit, time and timestamp\n\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"created":"2015-01-06T16:47:17.078+0000","updated":"2015-01-06T16:47:17.078+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12765122/comment/14266395","id":"14266395","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"body":"These changes also fix the timestamp/datetime comparison for MySQL java-connector versions above 5.1.22 when used with MySQL server version 5.6.4 or higher.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"created":"2015-01-06T16:59:49.946+0000","updated":"2015-01-06T16:59:49.946+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12765122/comment/14266503","id":"14266503","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"body":"This might also mitigate OPENJPA-638, which is a problem not only on PostgreSQL.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"created":"2015-01-06T18:19:33.227+0000","updated":"2015-01-06T18:19:33.227+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12765122/comment/14266506","id":"14266506","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"body":"I just saw the version field mechanism for determining the desired precision. Need to do another patch to synchronize here.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"created":"2015-01-06T18:21:52.507+0000","updated":"2015-01-06T18:21:52.507+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12765122/comment/14266523","id":"14266523","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"body":"Tested against Derby, MySQL and PostgreSQL to work.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"created":"2015-01-06T18:34:34.001+0000","updated":"2015-01-06T18:34:34.001+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12765122/comment/14269269","id":"14269269","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"body":"Found some other problems in some tests with MySQL and newer JDBC driver versions caused by the MySQL default precision of \"0\", as stated also in the official documentation (see http://dev.mysql.com/doc/refman/5.6/en/fractional-seconds.html):\n{quote}\nTo define a column that includes a fractional seconds part, use the syntax {{type_name(fsp)}}, where {{type_name}} is {{TIME}}, {{DATETIME}}, or {{TIMESTAMP}}, and {{fsp}} is the fractional seconds precision. For example:\n{noformat}CREATE TABLE t1 (t TIME(3), dt DATETIME(6));{noformat}\nThe {{fsp}} value, if given, must be in the range 0 to 6. A value of 0 signifies that there is no fractional part. *If omitted, the default precision is 0*. (This differs from the standard SQL default of 6, for compatibility with previous MySQL versions.) \n{quote}\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"created":"2015-01-08T12:34:34.467+0000","updated":"2015-01-08T12:35:05.957+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12765122/comment/14276167","id":"14276167","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"body":"Attached a new set of patches:\n* For branch 2.2.x: [^openjpa-2.2.x-Enhance-timestamp-precision-handling.patch]\n* For branch 2.3.x: [^openjpa-2.3.x-Enhance-timestamp-precision-handling.patch]\n* For trunk: [^openjpa-trunk-Enhance-timestamp-precision-handling.patch]\n\n\\\\\nWith these new patches I've now also done the following:\n# Handle MySQL timestamp precision declaration (it requires a precision to be specified), which means that if no JPA {{\\@Column(scale = N)}} is specified, the default precision being generated in the create table statement will be \"6\" for MySQL server 5.6.4+\n# As MySQL before version 5.6.4 does not support *any* timestamp precision, I've explicitly disabled precision by changing the {{DBDictionary#datePrecision}} field to {{SEC}} (always rounded to seconds)\n# Refactored the change introduced by OPENJPA-2476 (introducing JDBC-only logic into the kernel doesn't made any sense to me) and split the logic:\n#* timestamp rounding logic went into the {{TimestampHelper}} inside Maven project \"openjpa-lib\"\n#* version column handling is now done by {{TimestampVersionStrategy}} inside Maven project \"openjpa-jdbc\"\n# Modified test {{TestTimestampOptLockEx}} to also run on PostgreSQL and MySQL (also account for MySQL version < 5.6.4)\n# Introduced test  {{TestTimestampOptLockEx2}} which basically is the same test as before, but using a different entity with timestamp precision specified using {{\\@Column(scale = 4)}} to make sure that non-millisecond rounding is correct\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"created":"2015-01-13T23:22:51.635+0000","updated":"2015-01-13T23:22:51.635+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12765122/comment/16669174","id":"16669174","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=struberg","name":"struberg","key":"struberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=struberg&avatarId=41313","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=struberg&avatarId=41313","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=struberg&avatarId=41313","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=struberg&avatarId=41313"},"displayName":"Mark Struberg","active":true,"timeZone":"Europe/Berlin"},"body":"Sorry that it took us so long to pick this up. Working on it now.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=struberg","name":"struberg","key":"struberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=struberg&avatarId=41313","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=struberg&avatarId=41313","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=struberg&avatarId=41313","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=struberg&avatarId=41313"},"displayName":"Mark Struberg","active":true,"timeZone":"Europe/Berlin"},"created":"2018-10-30T18:35:33.814+0000","updated":"2018-10-30T18:35:33.814+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12765122/comment/16669387","id":"16669387","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=struberg","name":"struberg","key":"struberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=struberg&avatarId=41313","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=struberg&avatarId=41313","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=struberg&avatarId=41313","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=struberg&avatarId=41313"},"displayName":"Mark Struberg","active":true,"timeZone":"Europe/Berlin"},"body":"I debugged through some very similar approach as you did. But I fear that the {{@Column(scale = 3)}} trick doesn't work out.\r\n\r\nThe reason is that the default value for scale is 0 and not -1. So once you add a {{@Column}} even just for the sake of defining the column name, then you end up with scale = 0 and thus truncating all the second fractions.\r\n\r\nWe could probably only abuse the 'length' attribute of javax.persistence.Column. This has default 255. Not as intuitive, but should work. We are of course leaving any specified ground...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=struberg","name":"struberg","key":"struberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=struberg&avatarId=41313","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=struberg&avatarId=41313","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=struberg&avatarId=41313","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=struberg&avatarId=41313"},"displayName":"Mark Struberg","active":true,"timeZone":"Europe/Berlin"},"created":"2018-10-30T22:06:11.752+0000","updated":"2018-10-30T22:06:11.752+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12765122/comment/16672140","id":"16672140","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","key":"jira-bot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true,"timeZone":"Etc/UTC"},"body":"Commit 9461ffdfcd870b1aeadf1eab3e8181c983a595b4 in openjpa's branch refs/heads/master from [~struberg]\n[ https://gitbox.apache.org/repos/asf?p=openjpa.git;h=9461ffd ]\n\nOPENJPA-2775 OPENJPA-2555 fraction of seconds in MySQL\n\nThis is a first fix for supporting fractions of a second in MySQL.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","key":"jira-bot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true,"timeZone":"Etc/UTC"},"created":"2018-11-01T20:24:02.930+0000","updated":"2018-11-01T20:24:02.930+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12765122/comment/16672142","id":"16672142","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","key":"jira-bot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true,"timeZone":"Etc/UTC"},"body":"Commit 3b4c2e6f427de1f6f1e21a9c5a0cca4e5730167e in openjpa's branch refs/heads/master from [~struberg]\n[ https://gitbox.apache.org/repos/asf?p=openjpa.git;h=3b4c2e6 ]\n\nOPENJPA-2755 OPENJPA-2555 use scale to set Date fractions\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","key":"jira-bot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true,"timeZone":"Etc/UTC"},"created":"2018-11-01T20:24:06.316+0000","updated":"2018-11-01T20:24:06.316+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12765122/comment/16672145","id":"16672145","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","key":"jira-bot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true,"timeZone":"Etc/UTC"},"body":"Commit 0530b5b72ba00a3014e67c9ee4c3e8bfcddabb76 in openjpa's branch refs/heads/master from [~struberg]\n[ https://gitbox.apache.org/repos/asf?p=openjpa.git;h=0530b5b ]\n\nOPENJPA-2755 OPENJPA-2555 support fractions of a second\n\nFor now just in MySQL. Should also get added to PostgreSQL.\nTxs also to Ancoron Luciferis for a patch which also\ngave some important input!\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","key":"jira-bot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true,"timeZone":"Etc/UTC"},"created":"2018-11-01T20:24:09.442+0000","updated":"2018-11-01T20:24:09.442+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12765122/comment/16673040","id":"16673040","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=struberg","name":"struberg","key":"struberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=struberg&avatarId=41313","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=struberg&avatarId=41313","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=struberg&avatarId=41313","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=struberg&avatarId=41313"},"displayName":"Mark Struberg","active":true,"timeZone":"Europe/Berlin"},"body":"[~ancoron] do you want to take a look at it?\r\n\r\nThe only 'nasty' hack I had to do is to use {{scale=-1} to switch off any fractions via {{@Column}}.\r\nThat was needed since scale=0 is the default in the annotation.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=struberg","name":"struberg","key":"struberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=struberg&avatarId=41313","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=struberg&avatarId=41313","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=struberg&avatarId=41313","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=struberg&avatarId=41313"},"displayName":"Mark Struberg","active":true,"timeZone":"Europe/Berlin"},"created":"2018-11-02T12:41:31.757+0000","updated":"2018-11-02T12:41:48.862+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12765122/comment/16676200","id":"16676200","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"body":"Sorry for the late reply.\r\n\r\nThe \"hack\" with {{scale = -1}} looks OK to me as long as the JPA spec does not come up with anything better. :)\r\n\r\nBut this behavior and the control via {{scale}} parameter should be documented somewhere.\r\n\r\nShould I open a new ticket for the support in PostgreSQL?\r\n\r\nAlso I found that now, we always generate the scale argument, where the default should stay as is. Here, I don't see the point in defaulting to enforce the use of \"defaultFractionLength\" as a size argument (which, btw. seems useless otherwise and needs to be in-sync with \"datePrecision\" so I'd rather leave it up to the database).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"created":"2018-11-06T05:56:17.696+0000","updated":"2018-11-06T05:56:17.696+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12765122/comment/16676404","id":"16676404","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","key":"jira-bot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true,"timeZone":"Etc/UTC"},"body":"Commit 9461ffdfcd870b1aeadf1eab3e8181c983a595b4 in openjpa's branch refs/heads/OPENJPA-2754-maxTotal from [~struberg]\n[ https://gitbox.apache.org/repos/asf?p=openjpa.git;h=9461ffd ]\n\nOPENJPA-2775 OPENJPA-2555 fraction of seconds in MySQL\n\nThis is a first fix for supporting fractions of a second in MySQL.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","key":"jira-bot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true,"timeZone":"Etc/UTC"},"created":"2018-11-06T09:19:18.436+0000","updated":"2018-11-06T09:19:18.436+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12765122/comment/16676406","id":"16676406","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","key":"jira-bot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true,"timeZone":"Etc/UTC"},"body":"Commit 3b4c2e6f427de1f6f1e21a9c5a0cca4e5730167e in openjpa's branch refs/heads/OPENJPA-2754-maxTotal from [~struberg]\n[ https://gitbox.apache.org/repos/asf?p=openjpa.git;h=3b4c2e6 ]\n\nOPENJPA-2755 OPENJPA-2555 use scale to set Date fractions\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","key":"jira-bot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true,"timeZone":"Etc/UTC"},"created":"2018-11-06T09:19:22.925+0000","updated":"2018-11-06T09:19:22.925+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12765122/comment/16676408","id":"16676408","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","key":"jira-bot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true,"timeZone":"Etc/UTC"},"body":"Commit 0530b5b72ba00a3014e67c9ee4c3e8bfcddabb76 in openjpa's branch refs/heads/OPENJPA-2754-maxTotal from [~struberg]\n[ https://gitbox.apache.org/repos/asf?p=openjpa.git;h=0530b5b ]\n\nOPENJPA-2755 OPENJPA-2555 support fractions of a second\n\nFor now just in MySQL. Should also get added to PostgreSQL.\nTxs also to Ancoron Luciferis for a patch which also\ngave some important input!\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","key":"jira-bot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true,"timeZone":"Etc/UTC"},"created":"2018-11-06T09:19:26.459+0000","updated":"2018-11-06T09:19:26.459+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12765122/comment/16679130","id":"16679130","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"body":"Sorry for re-opening, but after evaluating and also implementing this for PostgreSQL, I've seen that the default behavior (no {{scale}} provided) now changes, which might conflict with users' expectations especially when upgrading OpenJPA for a DBMS we haven't tested for this, yet.\r\n\r\nTherefore, I've refactored the core change and reverted the default behavior to not apply or assume any decimal digits:\r\n*  [^timestamp-scale-preserve-default-behavior.patch] \r\n\r\n\\\\\r\n[~struberg]: please have a look at it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"created":"2018-11-08T00:55:38.462+0000","updated":"2018-11-08T00:55:38.462+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12765122/comment/16679631","id":"16679631","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=struberg","name":"struberg","key":"struberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=struberg&avatarId=41313","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=struberg&avatarId=41313","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=struberg&avatarId=41313","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=struberg&avatarId=41313"},"displayName":"Mark Struberg","active":true,"timeZone":"Europe/Berlin"},"body":"The default of no-scale only changes for databases where this is not the default anyway. \r\nThe {{DBDictionary#timestampTypeName}} right now only gets changed in {{MySQLDictionary#205}}. The additional condition in {{DBDictionary#appendSize}} is depending on an entry in {{DBDictionary#fractionalTypeNameSet}} which again only gets set in {{MySQLDictionary}}. Of course the default for MySQL will now be {{DATETIME(6)}}. But this is also what is perfectly reasonable and portable with the behaviour of OpenJPA in other databases.\r\nNote that it will not have any effect on existing databases as the Metadata merge should take precedence.\r\n\r\nDid I miss something?\r\n \r\nI did not yet touch any other database. PostgreSQL is currently in work. I've already added the -Ptest-postgresql-docker profile if you would like to take a look, which would be great! txs!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=struberg","name":"struberg","key":"struberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=struberg&avatarId=41313","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=struberg&avatarId=41313","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=struberg&avatarId=41313","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=struberg&avatarId=41313"},"displayName":"Mark Struberg","active":true,"timeZone":"Europe/Berlin"},"created":"2018-11-08T11:28:55.368+0000","updated":"2018-11-08T11:28:55.368+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12765122/comment/16680949","id":"16680949","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"body":"TBH, I personally just don't like changing defaults without a good reason. But that's pretty opinion-based. I just already hear my beloved DBA-friends freaking out over that one... ;-)\r\n\r\nNevertheless, I am also finalizing support for PostgreSQL (are you working on that as well?) basing on the previous patches to also actually fix timestamp-version-strategy and other timestamp-related querying. I am testing with PostgreSQL versions 9, 10 and 11 currently.\r\n\r\nAs done previously, I'll also expand the support to at least Derby, MySQL and MariaDB.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"created":"2018-11-09T06:44:51.829+0000","updated":"2018-11-09T06:44:51.829+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12765122/comment/16681165","id":"16681165","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=struberg","name":"struberg","key":"struberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=struberg&avatarId=41313","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=struberg&avatarId=41313","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=struberg&avatarId=41313","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=struberg&avatarId=41313"},"displayName":"Mark Struberg","active":true,"timeZone":"Europe/Berlin"},"body":"Hi [~ancoron]!\r\nI totally understand and support your position regarding backward compatibility and production databases!\r\nBut in this very case we imo do have to make a trade off. Not having millis and microseconds support in OpenJPA out of the box for those DBs is really weird these days. I'm also _very_ picky on my data. In fact I strongly suggest to NOT let any JPA provider touch your schemas in production. Usually my connections also do *not* have any grants to create/drop/alter tables!\r\n\r\nIn production one should always only use manual updates or have systems like liquibase do the schema adoption. All of this of course based on the schema generated by OpenJPA. But please at build time and only after manual verification of the SQLs - and not at runtime ;)\r\n\r\nSo in practice this should not have any effect on existing applications - and new ones will be able to make use of the enhanced accuracy!\r\n\r\nBtw, super cool that you help with PostgreSQL! I'm right now just fixing a few other broken tests with Postgres. If those are green then I'll happily come back to this very topic and helping you getting this feature down to the floor! Just doing all this in my spare time, so please give me a few days - txs. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=struberg","name":"struberg","key":"struberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=struberg&avatarId=41313","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=struberg&avatarId=41313","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=struberg&avatarId=41313","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=struberg&avatarId=41313"},"displayName":"Mark Struberg","active":true,"timeZone":"Europe/Berlin"},"created":"2018-11-09T09:47:12.025+0000","updated":"2018-11-09T09:47:12.025+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12765122/comment/16681969","id":"16681969","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"body":"I understand.\r\n\r\nFor me, it's also just the little spare time I can dedicate, but I am dedicated. :)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ancoron","name":"ancoron","key":"ancoron","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ancoron&avatarId=37169","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ancoron&avatarId=37169","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ancoron&avatarId=37169","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ancoron&avatarId=37169"},"displayName":"Ancoron Luciferis","active":true,"timeZone":"Europe/Berlin"},"created":"2018-11-09T21:45:23.160+0000","updated":"2018-11-09T21:45:23.160+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12765122/comment/16682572","id":"16682572","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=struberg","name":"struberg","key":"struberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=struberg&avatarId=41313","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=struberg&avatarId=41313","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=struberg&avatarId=41313","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=struberg&avatarId=41313"},"displayName":"Mark Struberg","active":true,"timeZone":"Europe/Berlin"},"body":"Cool, thanks a lot!\r\n\r\nI've now finished my work on getting the openjpa ready to be tested via Docker. All tests are now green!\r\n\r\nI assume you have docker set up to run as group {{docker}} and you made yourself part of this unix group. Otherwise you need to start docker via sudo.\r\n\r\nStarting PostgreSQL via Docker:\r\n{noformat}\r\n$> mvn -N -Ptest-postgresql-docker docker:start\r\n{noformat}\r\nThe default Postgres version is 11. To specify a different one you can add the following property to your maven call: {{-Dpostgresql.server.version=9}}\r\n\r\nTo stop postgres just call\r\n{noformat}\r\n$> mvn -N -Ptest-postgresql-docker docker:stop\r\n$> mvn -N -Ptest-postgresql-docker docker:remove\r\n{noformat}\r\n\r\nthe {{-N}} stands for non-recursive, otherwise it would go through all sub-projects with that command.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=struberg","name":"struberg","key":"struberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=struberg&avatarId=41313","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=struberg&avatarId=41313","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=struberg&avatarId=41313","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=struberg&avatarId=41313"},"displayName":"Mark Struberg","active":true,"timeZone":"Europe/Berlin"},"created":"2018-11-10T20:00:09.671+0000","updated":"2018-11-10T20:00:09.671+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12765122/comment/16808433","id":"16808433","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=struberg","name":"struberg","key":"struberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=struberg&avatarId=41313","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=struberg&avatarId=41313","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=struberg&avatarId=41313","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=struberg&avatarId=41313"},"displayName":"Mark Struberg","active":true,"timeZone":"Europe/Berlin"},"body":"Gonna re-evaluate setting the defaultFractionLength to 0 and writing an addition to our MariaDB and MySQL documentation how to enable microseconds.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=struberg","name":"struberg","key":"struberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=struberg&avatarId=41313","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=struberg&avatarId=41313","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=struberg&avatarId=41313","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=struberg&avatarId=41313"},"displayName":"Mark Struberg","active":true,"timeZone":"Europe/Berlin"},"created":"2019-04-03T07:19:00.121+0000","updated":"2019-04-03T07:19:00.121+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12765122/comment/16810695","id":"16810695","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","key":"jira-bot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true,"timeZone":"Etc/UTC"},"body":"Commit 4e59c4836407382f853306dfd0ffbd14cba6e5c1 in openjpa's branch refs/heads/master from Mark Struberg\n[ https://gitbox.apache.org/repos/asf?p=openjpa.git;h=4e59c48 ]\n\nOPENJPA-2555 use a defaultFractionLength of 0 for backward compat\n\nThis is how the default of MySQL and the previous behaviour of OpenJPA did.\nIf a user want he can use either @Column(scale=n) or set it via DBDictionary:\nopenjpa.jdbc.DBDictionary=(defaultFractionLength=6)\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","key":"jira-bot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true,"timeZone":"Etc/UTC"},"created":"2019-04-05T10:58:10.280+0000","updated":"2019-04-05T10:58:10.280+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12765122/comment/16810696","id":"16810696","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","key":"jira-bot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true,"timeZone":"Etc/UTC"},"body":"Commit dc31b800b8831d606c9621be2935282b666ecf64 in openjpa's branch refs/heads/master from Mark Struberg\n[ https://gitbox.apache.org/repos/asf?p=openjpa.git;h=dc31b80 ]\n\nOPENJPA-2555 fix randomly failing tests by forcing microseconds\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","key":"jira-bot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true,"timeZone":"Etc/UTC"},"created":"2019-04-05T10:58:11.519+0000","updated":"2019-04-05T10:58:11.519+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12765122/comment/16810736","id":"16810736","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","key":"jira-bot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true,"timeZone":"Etc/UTC"},"body":"Commit a7969c120bfba06b883f319788fc50ca0ef06b69 in openjpa's branch refs/heads/master from Mark Struberg\n[ https://gitbox.apache.org/repos/asf?p=openjpa.git;h=a7969c1 ]\n\nOPENJPA-2555 rename DBDictionary property to dateFractionDigits\n\ndateFractionDigits is more self-explaning than defaultFractionDigits.\nIt also fits better into the already existing date* config settings.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","key":"jira-bot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true,"timeZone":"Etc/UTC"},"created":"2019-04-05T11:59:07.879+0000","updated":"2019-04-05T11:59:07.879+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12765122/comment/16810737","id":"16810737","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=struberg","name":"struberg","key":"struberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=struberg&avatarId=41313","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=struberg&avatarId=41313","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=struberg&avatarId=41313","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=struberg&avatarId=41313"},"displayName":"Mark Struberg","active":true,"timeZone":"Europe/Berlin"},"body":"After talking with Francesco we decided to rename the config in DBDictionary to {{dateFractionDigits}}. It now defaults to 0 for MySQL and MariaDB and can be set with the following config in persistence.xml or as parameter to {{createEntityManagerFactory}}:\r\n\r\n{noformat}\r\nopenjpa.jdbc.DBDictionary=(dateFractionDigits=6)\r\n{noformat}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=struberg","name":"struberg","key":"struberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=struberg&avatarId=41313","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=struberg&avatarId=41313","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=struberg&avatarId=41313","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=struberg&avatarId=41313"},"displayName":"Mark Struberg","active":true,"timeZone":"Europe/Berlin"},"created":"2019-04-05T12:00:53.193+0000","updated":"2019-04-05T12:00:53.193+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12765122/comment/16811251","id":"16811251","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","key":"jira-bot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true,"timeZone":"Etc/UTC"},"body":"Commit d8ddf87a4752921f75e759f735282a70143dd139 in openjpa's branch refs/heads/master from Mark Struberg\n[ https://gitbox.apache.org/repos/asf?p=openjpa.git;h=d8ddf87 ]\n\nOPENJPA-2555 add docs for DateFractionDigits\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","key":"jira-bot","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true,"timeZone":"Etc/UTC"},"created":"2019-04-05T21:05:15.996+0000","updated":"2019-04-05T21:05:15.996+0000"}],"maxResults":29,"total":29,"startAt":0},"customfield_12311820":"0|i23znz:","customfield_12314139":null}}

