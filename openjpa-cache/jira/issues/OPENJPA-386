{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12379198","self":"https://issues.apache.org/jira/rest/api/2/issue/12379198","key":"OPENJPA-386","fields":{"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313102","id":"12313102","description":"","name":"1.2.0","archived":false,"released":true,"releaseDate":"2008-08-12"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12313326","id":"12313326","description":"","name":"1.3.0","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314148","id":"12314148","description":"Early Access 3","name":"2.0.0-M3","archived":false,"released":true,"releaseDate":"2009-10-12"}],"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12312323":null,"customfield_12312320":null,"customfield_12310420":"160708","customfield_12312321":null,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12312331":null,"customfield_12312332":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312340","id":"12312340","description":"","name":"0.9.7","archived":true,"released":true,"releaseDate":"2007-04-27"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12312341","id":"12312341","description":"","name":"1.0.0","archived":false,"released":true,"releaseDate":"2007-08-28"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12312846","id":"12312846","description":"","name":"1.0.2","archived":false,"released":true,"releaseDate":"2008-02-18"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12312344","id":"12312344","description":"","name":"1.1.0","archived":false,"released":true,"releaseDate":"2008-05-22"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12313328","id":"12313328","description":"","name":"1.2.1","archived":false,"released":true,"releaseDate":"2009-03-18"}],"customfield_12311120":null,"customfield_12313826":null,"customfield_12312339":null,"issuelinks":[],"customfield_12313825":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fyrewyld","name":"fyrewyld","key":"fyrewyld","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fyrewyld&avatarId=28040","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fyrewyld&avatarId=28040","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fyrewyld&avatarId=28040","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fyrewyld&avatarId=28040"},"displayName":"Jody Grassel","active":true,"timeZone":"America/Chicago"},"customfield_12312337":null,"customfield_12313823":null,"customfield_12312338":null,"customfield_12311920":null,"customfield_12313822":null,"customfield_12312335":null,"customfield_12313821":null,"customfield_12312336":null,"customfield_12313820":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12311302","id":"12311302","name":"kernel","description":"Kernel"}],"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"202610","customfield_12312823":null,"creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mschwickerath%40ultramain.com","name":"mschwickerath@ultramain.com","key":"mschwickerath@ultramain.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthew L. Schwickerath","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mschwickerath%40ultramain.com","name":"mschwickerath@ultramain.com","key":"mschwickerath@ultramain.com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthew L. Schwickerath","active":true,"timeZone":"Etc/UTC"},"aggregateprogress":{"progress":0,"total":0},"customfield_12313520":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"customfield_12313924":null,"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/OPENJPA-386/votes","votes":3,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12313920":null,"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"customfield_12314020":"{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@17a8eed7[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@1daa4ac5[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4c262243[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@315a560[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@36dfa1d1[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@6f64d45c[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@12add7c9[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@3c3d5e59[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@77a7a126[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@3e285dba[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@42c7d629[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@14de97be[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}","customfield_12314141":null,"customfield_12314140":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310351","id":"12310351","key":"OPENJPA","name":"OpenJPA","projectTypeKey":"software","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310351&avatarId=10043","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310351&avatarId=10043","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310351&avatarId=10043","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310351&avatarId=10043"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10252","id":"10252","description":"","name":"OpenJPA"}},"aggregatetimespent":null,"customfield_12312520":null,"customfield_12314422":null,"customfield_12314421":null,"customfield_12314146":null,"customfield_12314420":null,"customfield_12314145":null,"customfield_12314144":null,"customfield_12314143":null,"resolutiondate":"2009-08-27T20:07:52.269+0000","workratio":-1,"customfield_12312923":null,"customfield_12312920":null,"customfield_12312921":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/OPENJPA-386/watchers","watchCount":3,"isWatching":false},"created":"2007-09-27T14:26:06.397+0000","updated":"2016-09-21T14:21:10.425+0000","timeoriginalestimate":null,"description":"We have a @MappedSuperclass that is the base for all of our entity bean classes.  This class contains the @Version (and @Column for the version field) that all of our entity beans use.  But, in ClassMetaData.validateAppIdClass(), if an entity bean class has a superclass, and the entity bean has an @IdClass, it expects that superclass to have an @IdClass also.  All of our entity beans have an @IdClass (even if they only have a single part key), but our @MappedSuperclass does not have an @IdClass.  This scenario works under JBoss 4.2.0 and Sun AS 9, but produces a NullPointerException in OpenJPA at:\n\n        if (_super != null) {\n            // concrete superclass oids must match or be parent of ours\n            ClassMetaData sup = getPCSuperclassMetaData();\n            if (!sup.getObjectIdType().isAssignableFrom(_objectId))  // <--- NullPointerException here\n","customfield_10010":null,"timetracking":{},"customfield_12314523":null,"customfield_12314127":null,"customfield_12314522":null,"customfield_12314126":null,"customfield_12314521":null,"customfield_12314125":null,"customfield_12314520":null,"customfield_12314124":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12417322","id":"12417322","filename":"OPENJPA-386_1.0.x.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fyrewyld","name":"fyrewyld","key":"fyrewyld","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fyrewyld&avatarId=28040","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fyrewyld&avatarId=28040","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fyrewyld&avatarId=28040","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fyrewyld&avatarId=28040"},"displayName":"Jody Grassel","active":true,"timeZone":"America/Chicago"},"created":"2009-08-21T22:06:20.443+0000","size":11485,"mimeType":"text/x-diff","content":"https://issues.apache.org/jira/secure/attachment/12417322/OPENJPA-386_1.0.x.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12417323","id":"12417323","filename":"OPENJPA-386_1.1.x.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fyrewyld","name":"fyrewyld","key":"fyrewyld","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fyrewyld&avatarId=28040","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fyrewyld&avatarId=28040","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fyrewyld&avatarId=28040","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fyrewyld&avatarId=28040"},"displayName":"Jody Grassel","active":true,"timeZone":"America/Chicago"},"created":"2009-08-21T22:06:20.453+0000","size":12101,"mimeType":"text/x-diff","content":"https://issues.apache.org/jira/secure/attachment/12417323/OPENJPA-386_1.1.x.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12417324","id":"12417324","filename":"OPENJPA-386_1.2.x.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fyrewyld","name":"fyrewyld","key":"fyrewyld","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fyrewyld&avatarId=28040","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fyrewyld&avatarId=28040","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fyrewyld&avatarId=28040","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fyrewyld&avatarId=28040"},"displayName":"Jody Grassel","active":true,"timeZone":"America/Chicago"},"created":"2009-08-21T22:06:20.456+0000","size":8995,"mimeType":"text/x-diff","content":"https://issues.apache.org/jira/secure/attachment/12417324/OPENJPA-386_1.2.x.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12417325","id":"12417325","filename":"OPENJPA-386_1.3.x.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fyrewyld","name":"fyrewyld","key":"fyrewyld","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fyrewyld&avatarId=28040","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fyrewyld&avatarId=28040","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fyrewyld&avatarId=28040","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fyrewyld&avatarId=28040"},"displayName":"Jody Grassel","active":true,"timeZone":"America/Chicago"},"created":"2009-08-21T22:06:37.634+0000","size":8995,"mimeType":"text/x-diff","content":"https://issues.apache.org/jira/secure/attachment/12417325/OPENJPA-386_1.3.x.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12417326","id":"12417326","filename":"OPENJPA-386_trunk.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fyrewyld","name":"fyrewyld","key":"fyrewyld","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fyrewyld&avatarId=28040","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fyrewyld&avatarId=28040","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fyrewyld&avatarId=28040","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fyrewyld&avatarId=28040"},"displayName":"Jody Grassel","active":true,"timeZone":"America/Chicago"},"created":"2009-08-21T22:06:37.668+0000","size":8979,"mimeType":"text/x-diff","content":"https://issues.apache.org/jira/secure/attachment/12417326/OPENJPA-386_trunk.patch"}],"customfield_12312340":null,"customfield_12314123":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12314122":null,"customfield_12314121":null,"customfield_12310041":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10042","value":"Patch Available","id":"10042","disabled":false}],"customfield_12314120":null,"customfield_12314129":null,"customfield_12314524":null,"customfield_12314128":null,"summary":"org.apache.openjpa.meta.ClassMetaData.validateAppIdClass() does not take @MappedSuperclass into account","customfield_12314130":null,"customfield_12310291":null,"customfield_12310290":null,"customfield_12314138":null,"customfield_12314137":null,"environment":"BEA WebLogic 10.0 under Windows XP SP1","customfield_12314136":null,"customfield_12314135":null,"customfield_12311020":null,"customfield_12314134":null,"duedate":null,"customfield_12314132":null,"customfield_12314131":null,"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12379198/comment/12568728","id":"12568728","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chrisarnett","name":"chrisarnett","key":"chrisarnett","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Arnett","active":true,"timeZone":"Etc/UTC"},"body":"Any updates on this?  We're having the same problem.  These are legacy tables and we don't have the luxury of changing the schema.  We also can't use an EmbeddedId (which seems to work in this case) because one of the fields is generated while the other is not (an unsupported case for EmbeddedId).\n\nUnless this is fixed in the Feb 15th release, we'll probably have to override WL10's JPA implementation with Hibernate (if that's even possible).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chrisarnett","name":"chrisarnett","key":"chrisarnett","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Arnett","active":true,"timeZone":"Etc/UTC"},"created":"2008-02-13T22:09:04.455+0000","updated":"2008-02-13T22:09:04.455+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12379198/comment/12595067","id":"12595067","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tsandor","name":"tsandor","key":"tsandor","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tamas Sandor","active":true,"timeZone":"Europe/Berlin"},"body":"Matthew,\nWe have the same problem (and situation for storing @Version). It's great that I found this entry.\n\nHere's a workaround that worked for me:\n@MappedSuperclass\n@IdClass(Object.class)\n\nThis way PCEnhancer will enhance the superclassed entities with their special @IdClass().\n\nHowever, normally it should work without this extra line (Hibernate does not need that).\nPlease vote for this bug to be solved in the next release.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tsandor","name":"tsandor","key":"tsandor","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tamas Sandor","active":true,"timeZone":"Europe/Berlin"},"created":"2008-05-07T22:23:19.201+0000","updated":"2008-05-07T22:23:19.201+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12379198/comment/12746273","id":"12746273","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fyrewyld","name":"fyrewyld","key":"fyrewyld","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fyrewyld&avatarId=28040","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fyrewyld&avatarId=28040","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fyrewyld&avatarId=28040","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fyrewyld&avatarId=28040"},"displayName":"Jody Grassel","active":true,"timeZone":"America/Chicago"},"body":"The problem was how ClassMetaData.hasConcretePCSuperclass() handled mapped superclasses.  Let's say we have the following classes:\n\n@MappedSuperclass\npublic class MSC\n\n@Entity\n@IdClass(MyIdClass.class)\npublic class EntityA extends MSC\n\n(Note that the @MappedSuperclass type \"MSC\" is not abstract, which is perfectly legal with the JPA Spec.)\n\nNow, when an entity extending the MSC is annotated with @IdClass, the metadata processing notes that there are PC-enhanced superclasses, and needs to analyze them to check if they declare any identity elements, in order to ensure that the @IdClass specified will address them.  It uses this method in ClassMetaData to check if it has a PC superclass that is concrete (effectively, any entity class types that are further up the inheritance tree.:\n\n    /**\n     * Return true if this class has a concrete persistent superclass.\n     */\n    private boolean hasConcretePCSuperclass() {\n        if (_super == null)\n            return false;\n        if (!Modifier.isAbstract(_super.getModifiers())))\n            return true;\n        return getPCSuperclassMetaData().hasConcretePCSuperclass();\n    }\n\nThe line: if (!Modifier.isAbstract(_super.getModifiers()))) is responsible for detecting @MappedSuperclasses, however it relies exclusively on the class being abstract, something that, while recommended, is not required by the JPA Spec.  So it will incorrectly treat a @MappedSuperclass as a regular entity, resulting in this Exception:\n\norg.apache.openjpa.util.MetaDataException: Field \"testcase.EntityA.id\" cannot be a primary key.  Primary key fields can only be declared in base persistent classes that also declare their identity type- to be \"application\".\n     at org.apache.openjpa.meta.ClassMetaData.validateNoPKFields(ClassMetaData.java:2025)\n     at org.apache.openjpa.meta.ClassMetaData.validateAppIdClass(ClassMetaData.java:1905)\n     at org.apache.openjpa.meta.ClassMetaData.validateIdentity(ClassMetaData.java:1851)\n     at org.apache.openjpa.meta.ClassMetaData.validateMeta(ClassMetaData.java:1768)\n     at org.apache.openjpa.meta.ClassMetaData.resolve(ClassMetaData.java:1641)\n...\n\nThe solution was to simply add another check for the @MappedSuperclass.  This is already done with the ClassMetaData.isAbstract() method in trunk (which is set true if a class type explicitly is annotated with @MappedSuperclass, or is defined as a mapped-superclass by ORM XML), which was brought down to 1.2.x and 1.3.x in OPENJPA-1061.  With the following change:\n\nprivate boolean hasConcretePCSuperclass() {\n        if (_super == null)\n            return false;\n        if (!Modifier.isAbstract(_super.getModifiers()) && \n        \t\t(!getPCSuperclassMetaData().isAbstract()))\n            return true;\n        return getPCSuperclassMetaData().hasConcretePCSuperclass();\n    }\n\nWith the above change, a @MappedSuperclass can now be identified whether or not its class type is actually a Java abstract class or not.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fyrewyld","name":"fyrewyld","key":"fyrewyld","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=fyrewyld&avatarId=28040","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=fyrewyld&avatarId=28040","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=fyrewyld&avatarId=28040","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=fyrewyld&avatarId=28040"},"displayName":"Jody Grassel","active":true,"timeZone":"America/Chicago"},"created":"2009-08-21T22:05:47.088+0000","updated":"2009-08-21T22:05:47.088+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12379198/comment/12748546","id":"12748546","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikedd","name":"mikedd","key":"mikedd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael Dick","active":true,"timeZone":"America/Chicago"},"body":"Thanks for the patch Jody. Patch applied to 1.3.x, and trunk. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikedd","name":"mikedd","key":"mikedd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael Dick","active":true,"timeZone":"America/Chicago"},"created":"2009-08-27T20:07:52.169+0000","updated":"2009-08-27T20:07:52.169+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12379198/comment/12789047","id":"12789047","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dezzio","name":"dezzio","key":"dezzio","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Ezzio","active":true,"timeZone":"America/New_York"},"body":"Applied Jody's patch to 1.1.x branch at rev 889476.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dezzio","name":"dezzio","key":"dezzio","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Ezzio","active":true,"timeZone":"America/New_York"},"created":"2009-12-11T00:15:13.944+0000","updated":"2009-12-11T00:15:13.944+0000"}],"maxResults":5,"total":5,"startAt":0},"customfield_12311820":"0|i0z1wf:","customfield_12314139":null}}

