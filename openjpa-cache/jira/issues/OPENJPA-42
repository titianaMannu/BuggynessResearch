{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12349437","self":"https://issues.apache.org/jira/rest/api/2/issue/12349437","key":"OPENJPA-42","fields":{"fixVersions":[],"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12312323":null,"customfield_12312320":null,"customfield_12310420":"160379","customfield_12312321":null,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12312331":null,"customfield_12312332":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"customfield_12312330":null,"versions":[],"customfield_12311120":null,"customfield_12313826":null,"customfield_12312339":null,"issuelinks":[],"customfield_12313825":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mprudhom","name":"mprudhom","key":"mprudhom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mprudhom&avatarId=45285","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mprudhom&avatarId=45285","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mprudhom&avatarId=45285","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mprudhom&avatarId=45285"},"displayName":"Marc Prud'hommeaux","active":true,"timeZone":"America/New_York"},"customfield_12312337":null,"customfield_12313823":null,"customfield_12312338":null,"customfield_12311920":null,"customfield_12313822":null,"customfield_12312335":null,"customfield_12313821":null,"customfield_12312336":null,"customfield_12313820":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"202465","customfield_12312823":null,"creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trisberg","name":"trisberg","key":"trisberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Risberg","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trisberg","name":"trisberg","key":"trisberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Risberg","active":true,"timeZone":"Etc/UTC"},"aggregateprogress":{"progress":0,"total":0},"customfield_12313520":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"customfield_12313924":null,"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/OPENJPA-42/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12313920":null,"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"customfield_12314020":"{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@c5cf265[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@2648983f[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@38d48e7c[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@5a3f6039[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7c2c935c[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@2b06988d[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@373d44ff[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@16a2d489[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@e0c0372[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@115120ce[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4c9684a7[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@4c100720[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}","customfield_12314141":null,"customfield_12314140":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310351","id":"12310351","key":"OPENJPA","name":"OpenJPA","projectTypeKey":"software","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310351&avatarId=10043","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310351&avatarId=10043","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310351&avatarId=10043","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310351&avatarId=10043"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10252","id":"10252","description":"","name":"OpenJPA"}},"aggregatetimespent":null,"customfield_12312520":null,"customfield_12314422":null,"customfield_12314421":null,"customfield_12314146":null,"customfield_12314420":null,"customfield_12314145":null,"customfield_12314144":null,"customfield_12314143":null,"resolutiondate":"2006-09-10T23:22:50.000+0000","workratio":-1,"customfield_12312923":null,"customfield_12312920":null,"customfield_12312921":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/OPENJPA-42/watchers","watchCount":1,"isWatching":false},"created":"2006-09-07T22:26:45.000+0000","updated":"2010-03-09T18:35:36.414+0000","timeoriginalestimate":null,"description":"This simple orm.xml file causes a NPE - \n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\n<entity-mappings xmlns=\"http://java.sun.com/xml/ns/persistence/orm\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://java.sun.com/xml/ns/persistence/orm http://java.sun.com/xml/ns/persistence/orm_1_0.xsd\"\n    version=\"1.0\">\n\n  <package>springdeveloper.domain</package>\n\n  <entity class=\"Client\" metadata-complete=\"false\" access=\"FIELD\"></entity>\n  <entity class=\"Manager\" metadata-complete=\"false\" access=\"FIELD\">\n    <attribute-override name=\"description\">\n      <column name=\"DESCR\" length=\"2000\"/>\n    </attribute-override>\n  </entity>\n\n</entity-mappings>\n\nI have attached a test case - plainJpa.zip\n\nSame code runs fine with the RI.\n\nThis is the output from my run:\n\n/System/Library/Frameworks/JavaVM.framework/Versions/1.5/Home/bin/java -Dfile.encoding=MacRoman -classpath /System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Home/lib/deploy.jar:/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Classes/dt.jar:/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Classes/jce.jar:/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Home/lib/plugin.jar:/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Home/lib/sa-jdi.jar:/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Classes/charsets.jar:/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Classes/classes.jar:/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Classes/jconsole.jar:/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Classes/jsse.jar:/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Classes/laf.jar:/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Classes/ui.jar:/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Home/lib/ext/apple_provider.jar:/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Home/lib/ext/dnsns.jar:/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Home/lib/ext/localedata.jar:/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Home/lib/ext/sunjce_provider.jar:/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Home/lib/ext/sunpkcs11.jar:/Users/trisberg/Projects/plainJpa/classes:/Users/trisberg/Projects/plainJpa/lib/openjpa-jdbc-0.9.0-incubating-SNAPSHOT.jar:/Users/trisberg/Projects/plainJpa/lib/openjpa-persistence-0.9.0-incubating-SNAPSHOT.jar:/Users/trisberg/Projects/plainJpa/lib/openjpa-lib-0.9.0-incubating-SNAPSHOT.jar:/Users/trisberg/Projects/plainJpa/lib/openjpa-kernel-5-0.9.0-incubating-SNAPSHOT.jar:/Users/trisberg/Projects/plainJpa/lib/commons-collections-3.2.jar:/Users/trisberg/Projects/plainJpa/lib/geronimo-jta_1.0.1B_spec-1.0.1.jar:/Users/trisberg/Projects/plainJpa/lib/geronimo-j2ee-connector_1.5_spec-1.0.1.jar:/Users/trisberg/Projects/plainJpa/lib/commons-pool-1.3.jar:/Users/trisberg/Projects/plainJpa/lib/serp-1.11.0.jar:/Users/trisberg/Projects/plainJpa/lib/hsqldb.jar:/Users/trisberg/Projects/plainJpa/lib/persistence-api-1.0.jar:/Users/trisberg/Projects/plainJpa/lib/commons-logging-1.0.4.jar:/Users/trisberg/Projects/plainJpa/lib/commons-dbcp-1.2.1.jar:/Users/trisberg/Projects/plainJpa/lib/openjpa-persistence-jdbc-0.9.0-incubating-SNAPSHOT.jar:/Users/trisberg/Projects/plainJpa/lib/commons-lang-2.1.jar:/Users/trisberg/Projects/plainJpa/lib/openjpa-kernel-0.9.0-incubating-SNAPSHOT.jar:/Users/trisberg/Projects/plainJpa/lib/openjpa-jdbc-5-0.9.0-incubating-SNAPSHOT.jar springdeveloper.TestApp\nOPenJPAVersion:\nOpenJPA 0.9.0-incubating-SNAPSHOT\nversion id: 0.9.0-incubating-SNAPSHOT-r0\nrevision: 0\n\nos.name: Mac OS X\nos.version: 10.4.7\nos.arch: ppc\n\njava.version: 1.5.0_06\njava.vendor: Apple Computer, Inc.\n\njava.class.path:\n\t/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Home/lib/deploy.jar\n\t/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Classes/dt.jar\n\t/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Classes/jce.jar\n\t/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Home/lib/plugin.jar\n\t/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Home/lib/sa-jdi.jar\n\t/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Classes/charsets.jar\n\t/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Classes/classes.jar\n\t/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Classes/jconsole.jar\n\t/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Classes/jsse.jar\n\t/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Classes/laf.jar\n\t/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Classes/ui.jar\n\t/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Home/lib/ext/apple_provider.jar\n\t/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Home/lib/ext/dnsns.jar\n\t/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Home/lib/ext/localedata.jar\n\t/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Home/lib/ext/sunjce_provider.jar\n\t/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Home/lib/ext/sunpkcs11.jar\n\t/Users/trisberg/Projects/plainJpa/classes\n\t/Users/trisberg/Projects/plainJpa/lib/openjpa-jdbc-0.9.0-incubating-SNAPSHOT.jar\n\t/Users/trisberg/Projects/plainJpa/lib/openjpa-persistence-0.9.0-incubating-SNAPSHOT.jar\n\t/Users/trisberg/Projects/plainJpa/lib/openjpa-lib-0.9.0-incubating-SNAPSHOT.jar\n\t/Users/trisberg/Projects/plainJpa/lib/openjpa-kernel-5-0.9.0-incubating-SNAPSHOT.jar\n\t/Users/trisberg/Projects/plainJpa/lib/commons-collections-3.2.jar\n\t/Users/trisberg/Projects/plainJpa/lib/geronimo-jta_1.0.1B_spec-1.0.1.jar\n\t/Users/trisberg/Projects/plainJpa/lib/geronimo-j2ee-connector_1.5_spec-1.0.1.jar\n\t/Users/trisberg/Projects/plainJpa/lib/commons-pool-1.3.jar\n\t/Users/trisberg/Projects/plainJpa/lib/serp-1.11.0.jar\n\t/Users/trisberg/Projects/plainJpa/lib/hsqldb.jar\n\t/Users/trisberg/Projects/plainJpa/lib/persistence-api-1.0.jar\n\t/Users/trisberg/Projects/plainJpa/lib/commons-logging-1.0.4.jar\n\t/Users/trisberg/Projects/plainJpa/lib/commons-dbcp-1.2.1.jar\n\t/Users/trisberg/Projects/plainJpa/lib/openjpa-persistence-jdbc-0.9.0-incubating-SNAPSHOT.jar\n\t/Users/trisberg/Projects/plainJpa/lib/commons-lang-2.1.jar\n\t/Users/trisberg/Projects/plainJpa/lib/openjpa-kernel-0.9.0-incubating-SNAPSHOT.jar\n\t/Users/trisberg/Projects/plainJpa/lib/openjpa-jdbc-5-0.9.0-incubating-SNAPSHOT.jar\n\t/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Classes/.compatibility/14compatibility.jar\n\nuser.dir: /Users/trisberg/Projects/plainJpa\n\nTestApp!\n119  INFO   [main] openjpa.Runtime - Starting OpenJPA 0.9.0-incubating-SNAPSHOT\nException in thread \"main\" <0|false|0.9.0-incubating-SNAPSHOT> org.apache.openjpa.persistence.PersistenceException: null\n\tat org.apache.openjpa.kernel.AbstractBrokerFactory.newBroker(AbstractBrokerFactory.java:183)\n\tat org.apache.openjpa.kernel.DelegatingBrokerFactory.newBroker(DelegatingBrokerFactory.java:139)\n\tat org.apache.openjpa.persistence.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:171)\n\tat org.apache.openjpa.persistence.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:124)\n\tat org.apache.openjpa.persistence.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:50)\n\tat springdeveloper.TestApp.run(TestApp.java:53)\n\tat springdeveloper.TestApp.main(TestApp.java:27)\nCaused by: java.lang.NullPointerException\n\tat org.apache.openjpa.meta.ClassMetaData.getSuperclassField(ClassMetaData.java:820)\n\tat org.apache.openjpa.meta.ClassMetaData.resolveDefinedSuperclassFields(ClassMetaData.java:1115)\n\tat org.apache.openjpa.meta.ClassMetaData.defineSuperclassFields(ClassMetaData.java:1091)\n\tat org.apache.openjpa.jdbc.meta.MappingRepository.prepareMapping(MappingRepository.java:314)\n\tat org.apache.openjpa.meta.MetaDataRepository.loadMapping(MetaDataRepository.java:605)\n\tat org.apache.openjpa.meta.MetaDataRepository.resolve(MetaDataRepository.java:505)\n\tat org.apache.openjpa.meta.MetaDataRepository.getMetaData(MetaDataRepository.java:300)\n\tat org.apache.openjpa.jdbc.meta.MappingRepository.getMapping(MappingRepository.java:279)\n\tat org.apache.openjpa.jdbc.meta.MappingTool.getMapping(MappingTool.java:660)\n\tat org.apache.openjpa.jdbc.meta.MappingTool.buildSchema(MappingTool.java:731)\n\tat org.apache.openjpa.jdbc.meta.MappingTool.run(MappingTool.java:630)\n\tat org.apache.openjpa.jdbc.kernel.JDBCBrokerFactory.synchronizeMappings(JDBCBrokerFactory.java:160)\n\tat org.apache.openjpa.jdbc.kernel.JDBCBrokerFactory.newBrokerImpl(JDBCBrokerFactory.java:126)\n\tat org.apache.openjpa.kernel.AbstractBrokerFactory.newBroker(AbstractBrokerFactory.java:164)\n\t... 6 more\n\nProcess finished with exit code 1\n\n","customfield_10010":null,"timetracking":{},"customfield_12314523":null,"customfield_12314127":null,"customfield_12314522":null,"customfield_12314126":null,"customfield_12314521":null,"customfield_12314125":null,"customfield_12314520":null,"customfield_12314124":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12340421","id":"12340421","filename":"ASF.LICENSE.NOT.GRANTED--plainJpa.zip","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trisberg","name":"trisberg","key":"trisberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Risberg","active":true,"timeZone":"Etc/UTC"},"created":"2006-09-07T22:26:46.000+0000","size":4744,"mimeType":"application/zip","content":"https://issues.apache.org/jira/secure/attachment/12340421/ASF.LICENSE.NOT.GRANTED--plainJpa.zip"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12340616","id":"12340616","filename":"OPENJPA-42.zip","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trisberg","name":"trisberg","key":"trisberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Risberg","active":true,"timeZone":"Etc/UTC"},"created":"2006-09-12T02:19:31.000+0000","size":4079498,"mimeType":"application/zip","content":"https://issues.apache.org/jira/secure/attachment/12340616/OPENJPA-42.zip"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12342200","id":"12342200","filename":"orm.xml","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mprudhom","name":"mprudhom","key":"mprudhom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mprudhom&avatarId=45285","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mprudhom&avatarId=45285","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mprudhom&avatarId=45285","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mprudhom&avatarId=45285"},"displayName":"Marc Prud'hommeaux","active":true,"timeZone":"America/New_York"},"created":"2006-10-03T17:55:33.000+0000","size":4179,"mimeType":"text/xml","content":"https://issues.apache.org/jira/secure/attachment/12342200/orm.xml"}],"customfield_12312340":null,"customfield_12314123":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12314122":null,"customfield_12314121":null,"customfield_12310041":null,"customfield_12314120":null,"customfield_12314129":null,"customfield_12314524":null,"customfield_12314128":null,"summary":"Simple orm.xml file causes exception (NPE)","customfield_12314130":null,"customfield_12310291":null,"customfield_12310290":null,"customfield_12314138":null,"customfield_12314137":null,"environment":"Mac OS X\nJava 5 SE\nResource Local\n\nOpenJPA build from SVN  rev. 441247","customfield_12314136":null,"customfield_12314135":null,"customfield_12311020":null,"customfield_12314134":null,"duedate":null,"customfield_12314132":null,"customfield_12314131":null,"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12349437/comment/12433745","id":"12433745","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mprudhom","name":"mprudhom","key":"mprudhom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mprudhom&avatarId=45285","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mprudhom&avatarId=45285","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mprudhom&avatarId=45285","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mprudhom&avatarId=45285"},"displayName":"Marc Prud'hommeaux","active":true,"timeZone":"America/New_York"},"body":"The error message is a bad one (which I've committed a fix for), but the cause of it is that the orm.xml file is in error: as I mentioned in OPENJPA-40, the attribute-override element is, AFAIK, only meant to be used to redfine a field declared in a superclass entity. Since Manager doesn't actually have any Entity superclass, OpenJPA's assumption was causing an NPE. A better error message will now be thrown.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mprudhom","name":"mprudhom","key":"mprudhom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mprudhom&avatarId=45285","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mprudhom&avatarId=45285","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mprudhom&avatarId=45285","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mprudhom&avatarId=45285"},"displayName":"Marc Prud'hommeaux","active":true,"timeZone":"America/New_York"},"created":"2006-09-10T23:22:50.000+0000","updated":"2006-09-10T23:22:50.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12349437/comment/12433877","id":"12433877","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trisberg","name":"trisberg","key":"trisberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Risberg","active":true,"timeZone":"Etc/UTC"},"body":"You are right about the <attribute-override> - got to read the spec more carefully :)\n\nI have been testing the recent MVN version 442043.  I can run without an orm.xml file included but as soon as I include some additional mappings in an orm.xml file I get errors.\n\nHere is some recent output:\n\nThis is the command I use to execute:\n\njava -javaagent:./lib/openjpa-kernel-5-0.9.0-incubating-SNAPSHOT.jar -Dfile.encoding=MacRoman -classpath ./classes:./lib/openjpa-jdbc-0.9.0-incubating-SNAPSHOT.jar:./lib/openjpa-persistence-0.9.0-incubating-SNAPSHOT.jar:./lib/openjpa-lib-0.9.0-incubating-SNAPSHOT.jar:./lib/openjpa-kernel-5-0.9.0-incubating-SNAPSHOT.jar:./lib/commons-collections-3.2.jar:./lib/geronimo-jta_1.0.1B_spec-1.0.1.jar:./lib/geronimo-j2ee-connector_1.5_spec-1.0.1.jar:./lib/commons-pool-1.3.jar:./lib/serp-1.11.0.jar:./lib/hsqldb.jar:./lib/persistence-api-1.0.jar:./lib/commons-logging-1.0.4.jar:./lib/commons-dbcp-1.2.1.jar:./lib/openjpa-persistence-jdbc-0.9.0-incubating-SNAPSHOT.jar:./lib/commons-lang-2.1.jar:./lib/openjpa-kernel-0.9.0-incubating-SNAPSHOT.jar:./lib/openjpa-jdbc-5-0.9.0-incubating-SNAPSHOT.jar springdeveloper.TestApp\n\n\npersistence.xml:\n================\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<persistence xmlns=\"http://java.sun.com/xml/ns/persistence\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n             xsi:schemaLocation=\"http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd\" version=\"1.0\">\n\n    <persistence-unit name=\"main\" transaction-type=\"RESOURCE_LOCAL\">\n\n      <provider>org.apache.openjpa.persistence.PersistenceProviderImpl</provider>\n\n    </persistence-unit>\n\n</persistence>\n\norm.xml:\n========\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\n<entity-mappings xmlns=\"http://java.sun.com/xml/ns/persistence/orm\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://java.sun.com/xml/ns/persistence/orm http://java.sun.com/xml/ns/persistence/orm_1_0.xsd\"\n    version=\"1.0\">\n\n  <package>springdeveloper.domain</package>\n\n  <entity class=\"Client\" metadata-complete=\"false\" access=\"FIELD\">\n  </entity>\n  <entity class=\"Manager\" metadata-complete=\"false\" access=\"FIELD\">\n    <attributes>\n      <basic name=\"description\">\n        <column name=\"DESCR\"/>\n      </basic>\n    </attributes>\n  </entity>\n\n</entity-mappings>\n\nrun:\n====\n739  INFO   [main] openjpa.MetaData - Found 2 classes with metadata in 17 milliseconds.\nTestApp!\n364  INFO   [main] openjpa.Runtime - Starting OpenJPA 0.9.0-incubating-SNAPSHOT\n2353  INFO   [main] openjpa.MetaData - Parsing resource \"file:/Users/trisberg/Projects/plainJpa/classes/META-INF/orm.xml\".\n2787  INFO   [main] openjpa.MetaData - Parsing class \"springdeveloper.domain.Client\".\n2874  WARN   [main] openjpa.Enhance - An exception was thrown while attempting to perform class file transformation on \"springdeveloper/domain/Manager\":\njava.lang.ClassCircularityError: springdeveloper/domain/Manager\n        at java.lang.Class.getDeclaredFields0(Native Method)\n        at java.lang.Class.privateGetDeclaredFields(Class.java:2232)\n        at java.lang.Class.getDeclaredFields(Class.java:1715)\n        at org.apache.openjpa.meta.AbstractMetaDataDefaults.populateFromReflection(AbstractMetaDataDefaults.java:176)\n        at org.apache.openjpa.meta.AbstractMetaDataDefaults.populate(AbstractMetaDataDefaults.java:128)\n        at org.apache.openjpa.persistence.PersistenceMetaDataDefaults.populate(PersistenceMetaDataDefaults.java:182)\n        at org.apache.openjpa.meta.MetaDataRepository.addMetaData(MetaDataRepository.java:736)\n        at org.apache.openjpa.persistence.XMLPersistenceMetaDataParser.startClass(XMLPersistenceMetaDataParser.java:720)\n        at org.apache.openjpa.lib.meta.CFMetaDataParser.startElement(CFMetaDataParser.java:101)\n        at org.apache.openjpa.lib.meta.XMLMetaDataParser.startElement(XMLMetaDataParser.java:427)\n        at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(AbstractSAXParser.java:533)\n        at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.startElement(XMLSchemaValidator.java:708)\n        at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:330)\n        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(XMLDocumentFragmentScannerImpl.java:1693)\n        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:368)\n        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:834)\n        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)\n        at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:148)\n        at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1242)\n        at javax.xml.parsers.SAXParser.parse(SAXParser.java:375)\n        at org.apache.openjpa.lib.meta.XMLMetaDataParser.parseNewResource(XMLMetaDataParser.java:371)\n        at org.apache.openjpa.lib.meta.XMLMetaDataParser.parse(XMLMetaDataParser.java:312)\n        at org.apache.openjpa.lib.meta.XMLMetaDataParser.parse(XMLMetaDataParser.java:289)\n        at org.apache.openjpa.lib.meta.XMLMetaDataParser.parse(XMLMetaDataParser.java:263)\n        at org.apache.openjpa.persistence.PersistenceMetaDataFactory.parseXML(PersistenceMetaDataFactory.java:237)\n        at org.apache.openjpa.persistence.PersistenceMetaDataFactory.load(PersistenceMetaDataFactory.java:188)\n        at org.apache.openjpa.meta.MetaDataRepository.getMetaDataInternal(MetaDataRepository.java:432)\n        at org.apache.openjpa.meta.MetaDataRepository.getMetaData(MetaDataRepository.java:287)\n        at org.apache.openjpa.enhance.PCEnhancer.<init>(PCEnhancer.java:164)\n        at org.apache.openjpa.enhance.PCClassFileTransformer.transform(PCClassFileTransformer.java:115)\n        at sun.instrument.TransformerManager.transform(TransformerManager.java:122)\n        at sun.instrument.InstrumentationImpl.transform(InstrumentationImpl.java:155)\n        at java.lang.ClassLoader.defineClass1(Native Method)\n        at java.lang.ClassLoader.defineClass(ClassLoader.java:620)\n        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124)\n        at java.net.URLClassLoader.defineClass(URLClassLoader.java:260)\n        at java.net.URLClassLoader.access$100(URLClassLoader.java:56)\n        at java.net.URLClassLoader$1.run(URLClassLoader.java:195)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:188)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:268)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:251)\n        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)\n        at java.lang.Class.forName0(Native Method)\n        at java.lang.Class.forName(Class.java:242)\n        at org.apache.openjpa.meta.MetaDataRepository.classForName(MetaDataRepository.java:1156)\n        at org.apache.openjpa.meta.MetaDataRepository.loadPersistentTypes(MetaDataRepository.java:1144)\n        at org.apache.openjpa.jdbc.kernel.JDBCBrokerFactory.synchronizeMappings(JDBCBrokerFactory.java:144)\n        at org.apache.openjpa.jdbc.kernel.JDBCBrokerFactory.newBrokerImpl(JDBCBrokerFactory.java:126)\n        at org.apache.openjpa.kernel.AbstractBrokerFactory.newBroker(AbstractBrokerFactory.java:164)\n        at org.apache.openjpa.kernel.DelegatingBrokerFactory.newBroker(DelegatingBrokerFactory.java:139)\n        at org.apache.openjpa.persistence.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:171)\n        at org.apache.openjpa.persistence.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:124)\n        at org.apache.openjpa.persistence.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:50)\n        at springdeveloper.TestApp.run(TestApp.java:48)\n        at springdeveloper.TestApp.main(TestApp.java:22)\n3663  TRACE  [main] openjpa.jdbc.SQL - <t 2202705, conn 10336536> [0 ms] executing prepstmnt 9136910 SELECT SEQUENCE_SCHEMA, SEQUENCE_NAME FROM INFORMATION_SCHEMA.SYSTEM_SEQUENCES\n3784  TRACE  [main] openjpa.jdbc.SQL - <t 2202705, conn 2205493> [5 ms] executing stmnt 4450231 CREATE TABLE Client (id BIGINT NOT NULL, description VARCHAR(255), version INTEGER, manager_id BIGINT, PRIMARY KEY (id))\n3788  TRACE  [main] openjpa.jdbc.SQL - <t 2202705, conn 6550654> [1 ms] executing stmnt 9974682 CREATE TABLE Manager (id BIGINT NOT NULL, DESCR VARCHAR(255), PRIMARY KEY (id))\n3799  TRACE  [main] openjpa.jdbc.SQL - <t 2202705, conn 4102499> [7 ms] executing stmnt 14712126 CREATE INDEX I_CLIENT_MANAGER ON Client (manager_id)\nEM Open? true\nException in thread \"main\" <4|true|0.9.0-incubating-SNAPSHOT> org.apache.openjpa.persistence.ArgumentException: Could not locate metadata for the class using alias \"Manager\". Registered alias mappings: \"{Manager=null}\"\n        at org.apache.openjpa.meta.MetaDataRepository.getMetaData(MetaDataRepository.java:361)\n        at org.apache.openjpa.kernel.jpql.JPQLExpressionBuilder.getClassMetaData(JPQLExpressionBuilder.java:166)\n        at org.apache.openjpa.kernel.jpql.JPQLExpressionBuilder.resolveClassMetaData(JPQLExpressionBuilder.java:144)\n        at org.apache.openjpa.kernel.jpql.JPQLExpressionBuilder.getCandidateMetaData(JPQLExpressionBuilder.java:213)\n        at org.apache.openjpa.kernel.jpql.JPQLExpressionBuilder.getCandidateMetaData(JPQLExpressionBuilder.java:183)\n        at org.apache.openjpa.kernel.jpql.JPQLExpressionBuilder.getCandidateType(JPQLExpressionBuilder.java:176)\n        at org.apache.openjpa.kernel.jpql.JPQLExpressionBuilder.access$500(JPQLExpressionBuilder.java:63)\n        at org.apache.openjpa.kernel.jpql.JPQLExpressionBuilder$ParsedJPQL.populate(JPQLExpressionBuilder.java:1666)\n        at org.apache.openjpa.kernel.jpql.JPQLParser.populate(JPQLParser.java:52)\n        at org.apache.openjpa.kernel.ExpressionStoreQuery.populateFromCompilation(ExpressionStoreQuery.java:145)\n        at org.apache.openjpa.kernel.QueryImpl.newCompilation(QueryImpl.java:599)\n        at org.apache.openjpa.kernel.QueryImpl.compileForCompilation(QueryImpl.java:581)\n        at org.apache.openjpa.kernel.QueryImpl.compileForExecutor(QueryImpl.java:608)\n        at org.apache.openjpa.kernel.QueryImpl.getOperation(QueryImpl.java:1421)\n        at org.apache.openjpa.kernel.DelegatingQuery.getOperation(DelegatingQuery.java:120)\n        at org.apache.openjpa.persistence.QueryImpl.execute(QueryImpl.java:205)\n        at org.apache.openjpa.persistence.QueryImpl.getResultList(QueryImpl.java:254)\n        at springdeveloper.MyTest.runQuery(MyTest.java:13)\n        at springdeveloper.TestApp.run(TestApp.java:53)\n        at springdeveloper.TestApp.main(TestApp.java:22)\nsamoa:~/Projects/plainJpa trisberg$ \n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trisberg","name":"trisberg","key":"trisberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Risberg","active":true,"timeZone":"Etc/UTC"},"created":"2006-09-11T15:15:36.000+0000","updated":"2006-09-11T15:15:36.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12349437/comment/12434017","id":"12434017","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mprudhom","name":"mprudhom","key":"mprudhom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mprudhom&avatarId=45285","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mprudhom&avatarId=45285","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mprudhom&avatarId=45285","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mprudhom&avatarId=45285"},"displayName":"Marc Prud'hommeaux","active":true,"timeZone":"America/New_York"},"body":"Hmm ... the ClassCircularityError should have been resolved by my fix for OPENJPA-40. Can you make sure you re-built and deployed the built jars to your Spring installation? Just to be sure, you may want to update to the latest svn revision (442386).\n\nIf it still fails, can you attach a new test case (just like the one for OPENJPA-40) and I'll try to reproduce?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mprudhom","name":"mprudhom","key":"mprudhom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mprudhom&avatarId=45285","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mprudhom&avatarId=45285","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mprudhom&avatarId=45285","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mprudhom&avatarId=45285"},"displayName":"Marc Prud'hommeaux","active":true,"timeZone":"America/New_York"},"created":"2006-09-11T23:30:04.000+0000","updated":"2006-09-11T23:30:04.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12349437/comment/12434036","id":"12434036","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trisberg","name":"trisberg","key":"trisberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Risberg","active":true,"timeZone":"Etc/UTC"},"body":"Marc,\n\nI saw your fix for the circular reference and I don't see the error message right now after checking out the latest (now at rev. 442412). I'm getting an error building, but the jars seem to be created anyway.  This is the last part of the build messages:\n\n[INFO] [jar:jar]\n[INFO] Building jar: /Users/trisberg/Projects/OpenJPA/openjpa-all/target/openjpa-all-0.9.0-incubating-SNAPSHOT.jar\n[INFO] ----------------------------------------------------------------------------\n[INFO] Building OpenJPA Distribution\n[INFO]    task-segment: [clean, package]\n[INFO] ----------------------------------------------------------------------------\n[INFO] ------------------------------------------------------------------------\n[ERROR] BUILD ERROR\n[INFO] ------------------------------------------------------------------------\n[INFO] 'attached' was specified in an execution, but not found in the plugin\n[INFO] ------------------------------------------------------------------------\n[INFO] For more information, run Maven with the -e switch\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 2 minutes 5 seconds\n[INFO] Finished at: Mon Sep 11 21:57:00 EDT 2006\n[INFO] Final Memory: 16M/59M\n[INFO] ------------------------------------------------------------------------\n\nAnyway, I still get an exception executing my test - see attached zip file.  Is this related to OPENJPA-44 since I do use the \"metadata-complete\" attribute? \n\nException in thread \"main\" <4|true|0.9.0-incubating-SNAPSHOT> org.apache.openjpa.persistence.ArgumentException: Could not locate metadata for the class using alias \"Manager\". Registered alias mappings: \"{Manager=null}\"\n        at org.apache.openjpa.meta.MetaDataRepository.getMetaData(MetaDataRepository.java:362)\n        at org.apache.openjpa.kernel.jpql.JPQLExpressionBuilder.getClassMetaData(JPQLExpressionBuilder.java:166)\n        at org.apache.openjpa.kernel.jpql.JPQLExpressionBuilder.resolveClassMetaData(JPQLExpressionBuilder.java:144)\n        at org.apache.openjpa.kernel.jpql.JPQLExpressionBuilder.getCandidateMetaData(JPQLExpressionBuilder.java:213)\n        at org.apache.openjpa.kernel.jpql.JPQLExpressionBuilder.getCandidateMetaData(JPQLExpressionBuilder.java:183)\n        at org.apache.openjpa.kernel.jpql.JPQLExpressionBuilder.getCandidateType(JPQLExpressionBuilder.java:176)\n        at org.apache.openjpa.kernel.jpql.JPQLExpressionBuilder.access$500(JPQLExpressionBuilder.java:63)\n        at org.apache.openjpa.kernel.jpql.JPQLExpressionBuilder$ParsedJPQL.populate(JPQLExpressionBuilder.java:1666)\n        at org.apache.openjpa.kernel.jpql.JPQLParser.populate(JPQLParser.java:52)\n        at org.apache.openjpa.kernel.ExpressionStoreQuery.populateFromCompilation(ExpressionStoreQuery.java:145)\n        at org.apache.openjpa.kernel.QueryImpl.newCompilation(QueryImpl.java:599)\n        at org.apache.openjpa.kernel.QueryImpl.compileForCompilation(QueryImpl.java:581)\n        at org.apache.openjpa.kernel.QueryImpl.compileForExecutor(QueryImpl.java:608)\n        at org.apache.openjpa.kernel.QueryImpl.getOperation(QueryImpl.java:1421)\n        at org.apache.openjpa.kernel.DelegatingQuery.getOperation(DelegatingQuery.java:120)\n        at org.apache.openjpa.persistence.QueryImpl.execute(QueryImpl.java:205)\n        at org.apache.openjpa.persistence.QueryImpl.getResultList(QueryImpl.java:254)\n        at springdeveloper.MyTest.runQuery(MyTest.java:13)\n        at springdeveloper.TestApp.run(TestApp.java:53)\n        at springdeveloper.TestApp.main(TestApp.java:22)\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trisberg","name":"trisberg","key":"trisberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Risberg","active":true,"timeZone":"Etc/UTC"},"created":"2006-09-12T02:19:31.000+0000","updated":"2006-09-12T02:19:31.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12349437/comment/12434042","id":"12434042","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mprudhom","name":"mprudhom","key":"mprudhom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mprudhom&avatarId=45285","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mprudhom&avatarId=45285","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mprudhom&avatarId=45285","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mprudhom&avatarId=45285"},"displayName":"Marc Prud'hommeaux","active":true,"timeZone":"America/New_York"},"body":"I'm surprised by the build error ... I haven't seen it before. However, I agree that it sounds like the jars are being built OK.\n\nAs for the \"Could not locate metadata for the class..\" error, that means that OpenJPA didn't load the class for some reason. If you change your query to query the full class name (e.g., change \"select x from Manager x\" to \"select x from org.mypackage.Manager x\"), do you get the same error? A better error message might result.\n\nAlso, if you want to attach the new test case, I can take a look.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mprudhom","name":"mprudhom","key":"mprudhom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mprudhom&avatarId=45285","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mprudhom&avatarId=45285","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mprudhom&avatarId=45285","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mprudhom&avatarId=45285"},"displayName":"Marc Prud'hommeaux","active":true,"timeZone":"America/New_York"},"created":"2006-09-12T02:48:45.000+0000","updated":"2006-09-12T02:48:45.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12349437/comment/12434047","id":"12434047","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trisberg","name":"trisberg","key":"trisberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Risberg","active":true,"timeZone":"Etc/UTC"},"body":"Marc,\n\nI did attach a test case - OPENJPA-32.zip\n\nThis is the output and mapping files - fully qualified name did not work either.\n\npersistence.xml:\n================\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<persistence xmlns=\"http://java.sun.com/xml/ns/persistence\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n             xsi:schemaLocation=\"http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd\" version=\"1.0\">\n\n    <persistence-unit name=\"main\" transaction-type=\"RESOURCE_LOCAL\">\n\n      <provider>org.apache.openjpa.persistence.PersistenceProviderImpl</provider>\n\n    </persistence-unit>\n\n</persistence>\n\norm.xml:\n========\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\n<entity-mappings xmlns=\"http://java.sun.com/xml/ns/persistence/orm\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://java.sun.com/xml/ns/persistence/orm http://java.sun.com/xml/ns/persistence/orm_1_0.xsd\"\n    version=\"1.0\">\n\n  <package>springdeveloper.domain</package>\n\n  <entity class=\"Client\" metadata-complete=\"false\" access=\"FIELD\"></entity>\n  <entity class=\"Manager\" metadata-complete=\"false\" access=\"FIELD\">\n    <attributes>\n      <basic name=\"description\">\n        <column name=\"DESCR\" length=\"2000\"/>\n      </basic>\n    </attributes>\n  </entity>\n\n</entity-mappings>\n\nrun:\n====\nTestApp!\n172  INFO   [main] openjpa.Runtime - Starting OpenJPA 0.9.0-incubating-SNAPSHOT\n5019  TRACE  [main] openjpa.jdbc.SQL - <t 14360544, conn 635451> [1 ms] executing prepstmnt 514941 SELECT SEQUENCE_SCHEMA, SEQUENCE_NAME FROM INFORMATION_SCHEMA.SYSTEM_SEQUENCES\n5186  TRACE  [main] openjpa.jdbc.SQL - <t 14360544, conn 5597932> [17 ms] executing stmnt 2898188 CREATE TABLE Client (id BIGINT NOT NULL, description VARCHAR(255), version INTEGER, manager_id BIGINT, PRIMARY KEY (id))\n5190  TRACE  [main] openjpa.jdbc.SQL - <t 14360544, conn 4491208> [1 ms] executing stmnt 7717566 CREATE TABLE Manager (id BIGINT NOT NULL, DESCR VARCHAR(2000), PRIMARY KEY (id))\n5204  TRACE  [main] openjpa.jdbc.SQL - <t 14360544, conn 9035974> [11 ms] executing stmnt 7059006 CREATE INDEX I_CLIENT_MANAGER ON Client (manager_id)EM Open? true\nException in thread \"main\" <4|true|0.9.0-incubating-SNAPSHOT> org.apache.openjpa.persistence.ArgumentException: The type \"class springdeveloper.domain.Manager\" has not been enhanced.\n        at org.apache.openjpa.meta.ClassMetaData.resolveMeta(ClassMetaData.java:1544)\n        at org.apache.openjpa.meta.ClassMetaData.resolve(ClassMetaData.java:1518)\n        at org.apache.openjpa.meta.MetaDataRepository.processBuffer(MetaDataRepository.java:660)\n        at org.apache.openjpa.meta.MetaDataRepository.resolveMeta(MetaDataRepository.java:567)\n        at org.apache.openjpa.meta.MetaDataRepository.resolve(MetaDataRepository.java:500)\n        at org.apache.openjpa.meta.MetaDataRepository.getMetaData(MetaDataRepository.java:301)\n        at org.apache.openjpa.kernel.jpql.JPQLExpressionBuilder.getClassMetaData(JPQLExpressionBuilder.java:164)\n        at org.apache.openjpa.kernel.jpql.JPQLExpressionBuilder.resolveClassMetaData(JPQLExpressionBuilder.java:133)\n        at org.apache.openjpa.kernel.jpql.JPQLExpressionBuilder.getCandidateMetaData(JPQLExpressionBuilder.java:213)\n        at org.apache.openjpa.kernel.jpql.JPQLExpressionBuilder.getCandidateMetaData(JPQLExpressionBuilder.java:183)\n        at org.apache.openjpa.kernel.jpql.JPQLExpressionBuilder.getCandidateType(JPQLExpressionBuilder.java:176)\n        at org.apache.openjpa.kernel.jpql.JPQLExpressionBuilder.access$500(JPQLExpressionBuilder.java:63)\n        at org.apache.openjpa.kernel.jpql.JPQLExpressionBuilder$ParsedJPQL.populate(JPQLExpressionBuilder.java:1666)\n        at org.apache.openjpa.kernel.jpql.JPQLParser.populate(JPQLParser.java:52)\n        at org.apache.openjpa.kernel.ExpressionStoreQuery.populateFromCompilation(ExpressionStoreQuery.java:145)\n        at org.apache.openjpa.kernel.QueryImpl.newCompilation(QueryImpl.java:599)\n        at org.apache.openjpa.kernel.QueryImpl.compileForCompilation(QueryImpl.java:581)\n        at org.apache.openjpa.kernel.QueryImpl.compileForExecutor(QueryImpl.java:608)\n        at org.apache.openjpa.kernel.QueryImpl.getOperation(QueryImpl.java:1421)\n        at org.apache.openjpa.kernel.DelegatingQuery.getOperation(DelegatingQuery.java:120)\n        at org.apache.openjpa.persistence.QueryImpl.execute(QueryImpl.java:205)\n        at org.apache.openjpa.persistence.QueryImpl.getResultList(QueryImpl.java:254)\n        at springdeveloper.MyTest.runQuery(MyTest.java:13)\n        at springdeveloper.TestApp.run(TestApp.java:53)\n        at springdeveloper.TestApp.main(TestApp.java:22)\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trisberg","name":"trisberg","key":"trisberg","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Risberg","active":true,"timeZone":"Etc/UTC"},"created":"2006-09-12T03:03:13.000+0000","updated":"2006-09-12T03:03:13.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12349437/comment/12439589","id":"12439589","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mprudhom","name":"mprudhom","key":"mprudhom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mprudhom&avatarId=45285","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mprudhom&avatarId=45285","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mprudhom&avatarId=45285","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mprudhom&avatarId=45285"},"displayName":"Marc Prud'hommeaux","active":true,"timeZone":"America/New_York"},"body":"We've committed a number of fixes to the class loading framework when using the class transformer, which appears to make this work.\n\nNote, though, there are some errors in your orm.xml: you didn't declare the <mapped-superclass class=\"Person\"/>, and you put overridden attributes in the <attributes> section, rather than the <attribute-override> section (which the spec mandates). I'll attach the corrected orm.xml to this report.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mprudhom","name":"mprudhom","key":"mprudhom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mprudhom&avatarId=45285","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mprudhom&avatarId=45285","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mprudhom&avatarId=45285","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mprudhom&avatarId=45285"},"displayName":"Marc Prud'hommeaux","active":true,"timeZone":"America/New_York"},"created":"2006-10-03T17:54:52.000+0000","updated":"2006-10-03T17:54:52.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12349437/comment/12439591","id":"12439591","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mprudhom","name":"mprudhom","key":"mprudhom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mprudhom&avatarId=45285","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mprudhom&avatarId=45285","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mprudhom&avatarId=45285","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mprudhom&avatarId=45285"},"displayName":"Marc Prud'hommeaux","active":true,"timeZone":"America/New_York"},"body":"Corrected orm.xml file.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mprudhom","name":"mprudhom","key":"mprudhom","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=mprudhom&avatarId=45285","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=mprudhom&avatarId=45285","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=mprudhom&avatarId=45285","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=mprudhom&avatarId=45285"},"displayName":"Marc Prud'hommeaux","active":true,"timeZone":"America/New_York"},"created":"2006-10-03T17:55:33.000+0000","updated":"2006-10-03T17:55:33.000+0000"}],"maxResults":8,"total":8,"startAt":0},"customfield_12311820":"0|i0z107:","customfield_12314139":null}}

