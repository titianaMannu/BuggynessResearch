{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12389721","self":"https://issues.apache.org/jira/rest/api/2/issue/12389721","key":"OPENJPA-525","fields":{"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313102","id":"12313102","description":"","name":"1.2.0","archived":false,"released":true,"releaseDate":"2008-08-12"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12313326","id":"12313326","description":"","name":"1.3.0","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314148","id":"12314148","description":"Early Access 3","name":"2.0.0-M3","archived":false,"released":true,"releaseDate":"2009-10-12"}],"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12312323":null,"customfield_12312320":null,"customfield_12310420":"160842","customfield_12312321":null,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12312331":null,"customfield_12312332":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312341","id":"12312341","description":"","name":"1.0.0","archived":false,"released":true,"releaseDate":"2007-08-28"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12312846","id":"12312846","description":"","name":"1.0.2","archived":false,"released":true,"releaseDate":"2008-02-18"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12312344","id":"12312344","description":"","name":"1.1.0","archived":false,"released":true,"releaseDate":"2008-05-22"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12313328","id":"12313328","description":"","name":"1.2.1","archived":false,"released":true,"releaseDate":"2009-03-18"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314019","id":"12314019","description":"JPA2 release","name":"2.0.0","archived":false,"released":true,"releaseDate":"2010-04-22"}],"customfield_12311120":null,"customfield_12313826":null,"customfield_12312339":null,"issuelinks":[{"id":"12326293","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12326293","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12433149","key":"OPENJPA-1248","self":"https://issues.apache.org/jira/rest/api/2/issue/12433149","fields":{"summary":"LOB streaming does not work as expected","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12326804","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12326804","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12435247","key":"OPENJPA-1289","self":"https://issues.apache.org/jira/rest/api/2/issue/12435247","fields":{"summary":"Oracle driver throws exception due to incorrect mapping of XMLType column","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12326541","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12326541","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12433905","key":"OPENJPA-1263","self":"https://issues.apache.org/jira/rest/api/2/issue/12433905","fields":{"summary":"TestReaderLob.testUpdateWithNull() fails on MySQL","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133}}}},{"id":"12326295","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12326295","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12433151","key":"OPENJPA-1249","self":"https://issues.apache.org/jira/rest/api/2/issue/12433151","fields":{"summary":"Rework Oracle LOB support","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21140&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":21140}}}}],"customfield_12313825":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=milosz","name":"milosz","key":"milosz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Milosz Tylenda","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12313823":null,"customfield_12312338":null,"customfield_12311920":null,"customfield_12313822":null,"customfield_12312335":null,"customfield_12313821":null,"customfield_12312336":null,"customfield_12313820":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"202661","customfield_12312823":null,"creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=frankca","name":"frankca","key":"frankca","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Frank Le","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=frankca","name":"frankca","key":"frankca","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Frank Le","active":true,"timeZone":"Etc/UTC"},"aggregateprogress":{"progress":0,"total":0},"customfield_12313520":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"customfield_12313924":null,"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/OPENJPA-525/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12313920":null,"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"customfield_12314020":"{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@1b0270c6[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@51f91550[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@23aa856f[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@3a6057df[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@604edf04[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@79556dbc[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@e230e04[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@36c57eb0[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@20653193[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@720f80ae[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@644af3c5[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@79673102[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}","customfield_12314141":null,"customfield_12314140":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310351","id":"12310351","key":"OPENJPA","name":"OpenJPA","projectTypeKey":"software","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310351&avatarId=10043","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310351&avatarId=10043","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310351&avatarId=10043","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310351&avatarId=10043"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10252","id":"10252","description":"","name":"OpenJPA"}},"aggregatetimespent":null,"customfield_12312520":null,"customfield_12314422":null,"customfield_12314421":null,"customfield_12314146":null,"customfield_12314420":null,"customfield_12314145":null,"customfield_12314144":null,"customfield_12314143":null,"resolutiondate":"2009-09-27T07:01:34.383+0000","workratio":-1,"customfield_12312923":null,"customfield_12312920":null,"customfield_12312921":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/OPENJPA-525/watchers","watchCount":4,"isWatching":false},"created":"2008-02-27T19:20:04.764+0000","updated":"2016-09-21T14:21:32.425+0000","timeoriginalestimate":null,"description":"Inserts new entity with NULL value for Clob column with \"nullable = true\" actually inserts empty string as the value!\n\nHere's the persistence class:\npublic class Exam... {\n    @Lob\n    private String text;\n}\n","customfield_10010":null,"timetracking":{},"customfield_12314523":null,"customfield_12314127":null,"customfield_12314522":null,"customfield_12314126":null,"customfield_12314521":null,"customfield_12314125":null,"customfield_12314520":null,"customfield_12314124":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12410747","id":"12410747","filename":"OPENJPA525_1_1_x.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amy","name":"amy","key":"amy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amy Yang","active":true,"timeZone":"Asia/Shanghai"},"created":"2009-06-16T03:16:53.957+0000","size":2628,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12410747/OPENJPA525_1_1_x.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12412698","id":"12412698","filename":"OPENJPA-525.2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=allee8285","name":"allee8285","key":"allee8285","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Albert Lee","active":true,"timeZone":"America/Chicago"},"created":"2009-07-07T03:37:35.540+0000","size":3182,"mimeType":"text/x-diff","content":"https://issues.apache.org/jira/secure/attachment/12412698/OPENJPA-525.2.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12416706","id":"12416706","filename":"OPENJPA-525.3.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=milosz","name":"milosz","key":"milosz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Milosz Tylenda","active":true,"timeZone":"Etc/UTC"},"created":"2009-08-16T12:21:05.840+0000","size":2509,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12416706/OPENJPA-525.3.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12410739","id":"12410739","filename":"OPENJPA525.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amy","name":"amy","key":"amy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amy Yang","active":true,"timeZone":"Asia/Shanghai"},"created":"2009-06-16T01:38:05.649+0000","size":2612,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12410739/OPENJPA525.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12417465","id":"12417465","filename":"OPENJPA-525-3-branch1.1.x.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amy","name":"amy","key":"amy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amy Yang","active":true,"timeZone":"Asia/Shanghai"},"created":"2009-08-24T10:39:55.963+0000","size":4453,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12417465/OPENJPA-525-3-branch1.1.x.patch"}],"customfield_12312340":null,"customfield_12314123":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12314122":null,"customfield_12314121":null,"customfield_12310041":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10042","value":"Patch Available","id":"10042","disabled":false}],"customfield_12314120":null,"customfield_12314129":null,"customfield_12314524":null,"customfield_12314128":null,"summary":"Inserts new entity with NULL value for Clob column actually inserts empty string","customfield_12314130":null,"customfield_12310291":null,"customfield_12310290":null,"customfield_12314138":null,"customfield_12314137":null,"environment":"OpenJPA 1.0.0, 1.0.2\nOracle XE 10g (JDBC driver 10.2.0.3.0\nJRE 1.5.0_13","customfield_12314136":null,"customfield_12314135":null,"customfield_12311020":null,"customfield_12314134":null,"duedate":null,"customfield_12314132":null,"customfield_12314131":null,"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12389721/comment/12719892","id":"12719892","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amy","name":"amy","key":"amy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amy Yang","active":true,"timeZone":"Asia/Shanghai"},"body":"The patch is created in trunk.\n\nThe bug in ResultSetResult prevents invocation to getClobString() on the dictionary class.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amy","name":"amy","key":"amy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amy Yang","active":true,"timeZone":"Asia/Shanghai"},"created":"2009-06-16T01:38:05.674+0000","updated":"2009-06-16T01:38:05.674+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12389721/comment/12719905","id":"12719905","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amy","name":"amy","key":"amy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amy Yang","active":true,"timeZone":"Asia/Shanghai"},"body":"this is for branch1.1.x","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amy","name":"amy","key":"amy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amy Yang","active":true,"timeZone":"Asia/Shanghai"},"created":"2009-06-16T03:16:53.960+0000","updated":"2009-06-16T03:16:53.960+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12389721/comment/12721476","id":"12721476","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dezzio","name":"dezzio","key":"dezzio","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Ezzio","active":true,"timeZone":"America/New_York"},"body":"Applied Amy's 1.1.x patch to the 1.1.x branch at rev 786218","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dezzio","name":"dezzio","key":"dezzio","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Ezzio","active":true,"timeZone":"America/New_York"},"created":"2009-06-18T20:47:02.453+0000","updated":"2009-06-18T20:47:02.453+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12389721/comment/12723348","id":"12723348","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dezzio","name":"dezzio","key":"dezzio","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Ezzio","active":true,"timeZone":"America/New_York"},"body":"Merged change 786218 (Amy's patch) to trunk at change 787868","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dezzio","name":"dezzio","key":"dezzio","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Ezzio","active":true,"timeZone":"America/New_York"},"created":"2009-06-23T23:08:52.654+0000","updated":"2009-06-23T23:08:52.654+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12389721/comment/12723354","id":"12723354","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dezzio","name":"dezzio","key":"dezzio","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Ezzio","active":true,"timeZone":"America/New_York"},"body":"This bug appears to affect all branches made prior to rev 787868, and branch owners may want to merge the change.  This bug should be closed after allowing a reasonable period of time for branch owners to take action.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dezzio","name":"dezzio","key":"dezzio","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Ezzio","active":true,"timeZone":"America/New_York"},"created":"2009-06-23T23:17:37.386+0000","updated":"2009-06-23T23:17:37.386+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12389721/comment/12723662","id":"12723662","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=milosz","name":"milosz","key":"milosz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Milosz Tylenda","active":true,"timeZone":"Etc/UTC"},"body":"Could you please check the possible impact this change has on the streaming LOB functionality? Not very sure it is because of this this but that functionality is now broken. The tests are named ReaderLobTest and InputStreamLobTest. Although they are not executed by the test suite, the functionality is described in user manual (I have no idea why someone named the tests that way causing the test suite to skip them - oversight?). Note that the tests require a database other than Derby to run on.\n\nOne of stack traces I am receiving with MySQL:\n\n        at org.apache.openjpa.kernel.BrokerImpl.find(BrokerImpl.java:984)\n        at org.apache.openjpa.kernel.BrokerImpl.find(BrokerImpl.java:878)\n        at org.apache.openjpa.kernel.DelegatingBroker.find(DelegatingBroker.java:201)\n        at org.apache.openjpa.persistence.EntityManagerImpl.find(EntityManagerImpl.java:464)\n        at org.apache.openjpa.jdbc.meta.strats.AbstractLobTest.testSetResetAndFlush(AbstractLobTest.java:254)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:585)\n        at junit.framework.TestCase.runTest(TestCase.java:154)\n        at junit.framework.TestCase.runBare(TestCase.java:127)\n        at org.apache.openjpa.persistence.test.PersistenceTestCase.runBare(PersistenceTestCase.java:475)\n        at junit.framework.TestResult$1.protect(TestResult.java:106)\n        at junit.framework.TestResult.runProtected(TestResult.java:124)\n        at junit.framework.TestResult.run(TestResult.java:109)\n        at junit.framework.TestCase.run(TestCase.java:118)\n        at org.apache.openjpa.persistence.test.PersistenceTestCase.run(PersistenceTestCase.java:190)\n        at junit.framework.TestSuite.runTest(TestSuite.java:208)\n        at junit.framework.TestSuite.run(TestSuite.java:203)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:585)\n        at org.apache.maven.surefire.junit.JUnitTestSet.execute(JUnitTestSet.java:213)\n        at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.executeTestSet(AbstractDirectoryTestSuite.java:140)\n        at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.execute(AbstractDirectoryTestSuite.java:127)\n        at org.apache.maven.surefire.Surefire.run(Surefire.java:177)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:585)\n        at org.apache.maven.surefire.booter.SurefireBooter.runSuitesInProcess(SurefireBooter.java:345)\n        at org.apache.maven.surefire.booter.SurefireBooter.main(SurefireBooter.java:1009)\nCaused by: java.lang.ClassCastException: org.apache.openjpa.jdbc.schema.DynamicSchemaFactory$DynamicColumn\n        at org.apache.openjpa.jdbc.sql.ResultSetResult.getCharacterStreamInternal(ResultSetResult.java:305)\n        at org.apache.openjpa.jdbc.sql.AbstractResult.getCharacterStream(AbstractResult.java:499)\n        at org.apache.openjpa.jdbc.meta.strats.LobFieldStrategy.load(LobFieldStrategy.java:181)\n        at org.apache.openjpa.jdbc.meta.FieldMapping.load(FieldMapping.java:912)\n        at org.apache.openjpa.jdbc.kernel.JDBCStoreManager.load(JDBCStoreManager.java:1015)\n        at org.apache.openjpa.jdbc.kernel.JDBCStoreManager.load(JDBCStoreManager.java:967)\n        at org.apache.openjpa.jdbc.kernel.JDBCStoreManager.load(JDBCStoreManager.java:628)\n        at org.apache.openjpa.kernel.DelegatingStoreManager.load(DelegatingStoreManager.java:116)\n        at org.apache.openjpa.datacache.DataCacheStoreManager.load(DataCacheStoreManager.java:393)\n        at org.apache.openjpa.kernel.DelegatingStoreManager.load(DelegatingStoreManager.java:116)\n        at org.apache.openjpa.kernel.ROPStoreManager.load(ROPStoreManager.java:78)\n        at org.apache.openjpa.kernel.StateManagerImpl.loadFields(StateManagerImpl.java:2989)\n        at org.apache.openjpa.kernel.StateManagerImpl.load(StateManagerImpl.java:405)\n        at org.apache.openjpa.kernel.BrokerImpl.find(BrokerImpl.java:971)\n        ... 32 more\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=milosz","name":"milosz","key":"milosz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Milosz Tylenda","active":true,"timeZone":"Etc/UTC"},"created":"2009-06-24T18:06:26.663+0000","updated":"2009-06-24T18:06:26.663+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12389721/comment/12727719","id":"12727719","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=allee8285","name":"allee8285","key":"allee8285","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Albert Lee","active":true,"timeZone":"America/Chicago"},"body":"After the latest patch, I am seeing the following exception:\n\nCaused by: java.lang.ClassCastException: org.apache.openjpa.jdbc.schema.DynamicSchemaFactory$DynamicColumn incompatible with java.lang.Number\nat org.apache.openjpa.jdbc.sql.ResultSetResult.getCharacterStreamInternal(ResultSetResult.java:305)\nat org.apache.openjpa.jdbc.sql.ResultSetResult.getObjectInternal(ResultSetResult.java:423)\nat org.apache.openjpa.jdbc.sql.AbstractResult.getObject(AbstractResult.java:694)\nat org.apache.openjpa.jdbc.meta.strats.HandlerStrategies.loadDataStore(HandlerStrategies.java:220)\nat org.apache.openjpa.jdbc.meta.strats.HandlerFieldStrategy.load(HandlerFieldStrategy.java:186)\nat org.apache.openjpa.jdbc.meta.FieldMapping.load(FieldMapping.java:912)\nat org.apache.openjpa.jdbc.kernel.JDBCStoreManager.load(JDBCStoreManager.java:1015)\nat org.apache.openjpa.jdbc.kernel.JDBCStoreManager.load(JDBCStoreManager.java:967)\nat org.apache.openjpa.jdbc.kernel.JDBCStoreManager.initializeState(JDBCStoreManager.java:391)\nat org.apache.openjpa.jdbc.kernel.JDBCStoreManager.initialize(JDBCStoreManager.java:290)\nat com.ibm.ws.persistence.jdbc.kernel.WsJpaJDBCStoreManager.initialize(WsJpaJDBCStoreManager.java:147)\nat org.apache.openjpa.kernel.DelegatingStoreManager.initialize(DelegatingStoreManager.java:111)\nat org.apache.openjpa.kernel.ROPStoreManager.initialize(ROPStoreManager.java:57)\nat org.apache.openjpa.kernel.BrokerImpl.initialize(BrokerImpl.java:1003)\nat org.apache.openjpa.kernel.BrokerImpl.find(BrokerImpl.java:961)\n\nLook further in the changes and found in:\n\nResultSetResult.java \n\n    protected Object translate(Object obj, Joins joins)\n        throws SQLException {\n        if (obj instanceof Number)\n            return obj;\n        // getStringInternal will take care the translation\n        if (obj instanceof Column && ((Column) obj).getType() == Types.CLOB)\n        \treturn obj;\n        return Numbers.valueOf(findObject(obj, joins));\n    }\n\nThe newly added code will always return object which is a Column type. However this method is expect a Number object to be returned.\n\n        // getStringInternal will take care the translation\n        if (obj instanceof Column && ((Column) obj).getType() == Types.CLOB)\n        \treturn obj;\n\nAlbert Lee.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=allee8285","name":"allee8285","key":"allee8285","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Albert Lee","active":true,"timeZone":"America/Chicago"},"created":"2009-07-06T19:31:56.859+0000","updated":"2009-07-06T19:31:56.859+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12389721/comment/12727897","id":"12727897","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=allee8285","name":"allee8285","key":"allee8285","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Albert Lee","active":true,"timeZone":"America/Chicago"},"body":"Attempt to fix the incompatible ClassCastException:\n\n1) reverted the translate() method implementation\n2) enhanced the AbstractResult.getStringInternal() to include a new parameter indicating if the String is a ClobString, such that the ResultSetResult.getStringInternal() can use it to determine if the _dict.getClobString() or _dict.getString() should be call.\n\nAfter this patch is applied, OpenJPA trunk built and all tests ran successfully.\n\nAmy and Milosz, can you please try this patch to verify it does solve the original and subsequent regression problems?\n\nThanks,\nAlbert Lee.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=allee8285","name":"allee8285","key":"allee8285","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Albert Lee","active":true,"timeZone":"America/Chicago"},"created":"2009-07-07T03:37:35.600+0000","updated":"2009-07-07T03:37:35.600+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12389721/comment/12728365","id":"12728365","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=milosz","name":"milosz","key":"milosz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Milosz Tylenda","active":true,"timeZone":"Etc/UTC"},"body":"Hi Albert. I have tried the patch with MySQL and it resolved most of the LOB streaming errors. Unfortunately one LOB streaming test still fails and it looks like another one started failing:\n\n  testQueryQualifiedId(org.apache.openjpa.persistence.jdbc.maps.spec_10_1_27_ex6.TestSpec10_1_27_Ex6)\n  testUpdateWithNull(org.apache.openjpa.jdbc.meta.strats.TestReaderLob)\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=milosz","name":"milosz","key":"milosz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Milosz Tylenda","active":true,"timeZone":"Etc/UTC"},"created":"2009-07-07T20:56:08.627+0000","updated":"2009-07-07T20:56:08.627+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12389721/comment/12728379","id":"12728379","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=allee8285","name":"allee8285","key":"allee8285","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Albert Lee","active":true,"timeZone":"America/Chicago"},"body":"Milosz,\n\nThanks for trying the patch on MySQL.\n\nI did not run into any problem in Derby and DB2. Probably it is some db specific feature.\n\nHow is the failure surfaced in the test? What is the symptoms looks like? Do you have any exception stack to look at ? Do you have any idea what may have gone wrong? Not sure how is the patch affect Oracle db?\n\nAlbert Lee.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=allee8285","name":"allee8285","key":"allee8285","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Albert Lee","active":true,"timeZone":"America/Chicago"},"created":"2009-07-07T21:46:11.766+0000","updated":"2009-07-07T21:46:11.766+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12389721/comment/12728755","id":"12728755","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=allee8285","name":"allee8285","key":"allee8285","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Albert Lee","active":true,"timeZone":"America/Chicago"},"body":"Milosz,\n\nDid you make any progress on testing the MySQL db with the fixes? Are the failing tests passed before the original patch?\n\nDo you have any objection if we commit the changes so that it reverts the original regression first. Then figure out what are the problems that you have encountered since the original fix had the observed regression? \n\nIf I don't hear from you (or anyone) soon, I shall go ahead with the commit.\n\nThanks,\nAlbert Lee.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=allee8285","name":"allee8285","key":"allee8285","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Albert Lee","active":true,"timeZone":"America/Chicago"},"created":"2009-07-08T15:55:05.666+0000","updated":"2009-07-08T15:55:05.666+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12389721/comment/12728854","id":"12728854","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=milosz","name":"milosz","key":"milosz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Milosz Tylenda","active":true,"timeZone":"Etc/UTC"},"body":"Albert,\n\nYou don't run into problems with Derby and DB2 because LOB streaming requires other databases (see AbstractLOBTest), otherwise it is basically a no-op.\n\nYes, the failing tests passed before the original patch although they were not executed by the default test suite because of incorrect names.\n\nFor me, you can go ahead with the commit. I have little time this week and then I start vacation. I will dig into this problem but probably no earlier than Jul 20.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=milosz","name":"milosz","key":"milosz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Milosz Tylenda","active":true,"timeZone":"Etc/UTC"},"created":"2009-07-08T19:07:48.379+0000","updated":"2009-07-08T19:07:48.379+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12389721/comment/12737245","id":"12737245","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=milosz","name":"milosz","key":"milosz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Milosz Tylenda","active":true,"timeZone":"Etc/UTC"},"body":"I started looking into this problem but no success so far. I will again be out of source for the first half of August, so if someone needs it earlier, grab it.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=milosz","name":"milosz","key":"milosz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Milosz Tylenda","active":true,"timeZone":"Etc/UTC"},"created":"2009-07-30T19:32:53.924+0000","updated":"2009-07-30T19:32:53.924+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12389721/comment/12743672","id":"12743672","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=milosz","name":"milosz","key":"milosz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Milosz Tylenda","active":true,"timeZone":"Etc/UTC"},"body":"Although Amy's patch caused more failures in streaming LOB functionality, that functionality does not work without the patch either. I have double checked this and even 1.2.0 and 1.1.0 releases do not pass all the tests. I will open a new issue for possible fix of streaming LOB.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=milosz","name":"milosz","key":"milosz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Milosz Tylenda","active":true,"timeZone":"Etc/UTC"},"created":"2009-08-15T10:54:49.087+0000","updated":"2009-08-15T10:54:49.087+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12389721/comment/12743677","id":"12743677","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=milosz","name":"milosz","key":"milosz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Milosz Tylenda","active":true,"timeZone":"Etc/UTC"},"body":"This issue is Oracle-specific.\n\nTo answer Amy's initial question (unfortunately that comment is visible only when you are logged in):\n\n> We're using empty_lob() instead of \"null\" when the Lob field has no value even it is nullable. is there any historical reason to do so?\n\nI think the reason is: if we set a LOB column to null we are not able to later update that column with a string longer that 4000 chars. Most probably it was needed in Oracle 8 times but looks like is not needed anymore (starting from Oracle 9 or 10). We should consider reworking our Oracle LOB support - there are chances that some Oracle-specific code can now be avoided and issues like this will disappear.\n\nI will open a new issue for the idea of reworking Oracle LOB support.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=milosz","name":"milosz","key":"milosz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Milosz Tylenda","active":true,"timeZone":"Etc/UTC"},"created":"2009-08-15T11:22:38.510+0000","updated":"2009-08-15T11:22:38.510+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12389721/comment/12743688","id":"12743688","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=milosz","name":"milosz","key":"milosz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Milosz Tylenda","active":true,"timeZone":"Etc/UTC"},"body":"To clarify: OpenJPA persists an empty CLOB (Oracle-specific) when value to be persisted is null. Neither of the patches changes that. What the patches try to do is when the empty CLOB is read back, it is detected that the CLOB is empty and a null is returned. Without the patches, getString is called on the empty CLOB which gives an empty string to the user.\n\nAmy's patch fixes the issue (TestSerializedLobs.testNullableClob passes with Oracle) but causes Albert's failure.\nAlbert's patch breaks the Oracle behaviour again (TestSerializedLobs.testNullableClob fails with Oracle) but fixes the error introduced by Amy's patch (so it is basically the state when no patch has been applied in terms of functionality).\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=milosz","name":"milosz","key":"milosz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Milosz Tylenda","active":true,"timeZone":"Etc/UTC"},"created":"2009-08-15T12:04:25.632+0000","updated":"2009-08-15T12:04:25.632+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12389721/comment/12743838","id":"12743838","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=milosz","name":"milosz","key":"milosz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Milosz Tylenda","active":true,"timeZone":"Etc/UTC"},"body":"Albert, could you apply the attached OPENJPA-525.3.patch to trunk and see whether it works for you? With that patch TestSerializedLobs.testNullableClob passes with Oracle.\n\nI have moved the call to translate method from AbstractResult.getObject to ResultSetResult.getObjectInternal. Now ResultSetResult.getObjectInternal receives a Column instead of a bare Number and can determine if the Coulmn is of type CLOB.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=milosz","name":"milosz","key":"milosz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Milosz Tylenda","active":true,"timeZone":"Etc/UTC"},"created":"2009-08-16T12:21:05.880+0000","updated":"2009-08-16T12:21:05.880+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12389721/comment/12746796","id":"12746796","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amy","name":"amy","key":"amy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amy Yang","active":true,"timeZone":"Asia/Shanghai"},"body":"hi Milosz & Albert,\nthank you very much for looking into this issue.\nMilosz , I've tried OPENJPA-525.3.patch on oracle. TestSerializedLobs can pass with it.\nI also run TestInputStreamLob on mysql with it and the case can pass too. Could you please check in the patch?\n\n\nThanks,\nAmy","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amy","name":"amy","key":"amy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amy Yang","active":true,"timeZone":"Asia/Shanghai"},"created":"2009-08-24T09:56:46.686+0000","updated":"2009-08-24T09:56:46.686+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12389721/comment/12746807","id":"12746807","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amy","name":"amy","key":"amy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amy Yang","active":true,"timeZone":"Asia/Shanghai"},"body":"patch for 1.1.x based on Milosz's patch","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amy","name":"amy","key":"amy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amy Yang","active":true,"timeZone":"Asia/Shanghai"},"created":"2009-08-24T10:39:56.204+0000","updated":"2009-08-24T10:39:56.204+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12389721/comment/12747052","id":"12747052","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dezzio","name":"dezzio","key":"dezzio","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Ezzio","active":true,"timeZone":"America/New_York"},"body":"Applied Amy's patch OPENJPA-525-3-branch1.1.x.patch to branch 1.1.1 at revision 807362.  Includes merge from Milosz's change on trunk at 790666 that renamed misnamed test cases.\n\nAmy, can you let us know the results of testing this change with MySQL and Oracle (identifying DB and driver versions), as well as let us know the results of testing Milosz's patch on trunk with the same setups?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dezzio","name":"dezzio","key":"dezzio","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Ezzio","active":true,"timeZone":"America/New_York"},"created":"2009-08-24T20:25:59.343+0000","updated":"2009-08-24T20:25:59.343+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12389721/comment/12747216","id":"12747216","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amy","name":"amy","key":"amy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amy Yang","active":true,"timeZone":"Asia/Shanghai"},"body":"Oracle: Database 10g Enterprise Edition Release 11g\nDriver: Oracle JDBC Driver version - \"11.1.0.7.0-Production\"\n\nMySQL: 5.1.37-community MySQL Community Server (GPL)\n\nbranch1.1.x: r807362\nTestSerializedLobs passed on oracle and mysql.\nTestInputStreamLob passed on mysql. on Oracle, it's result is \"Tests run: 13, Failures: 1, Errors: 12, Skipped: 0\". The failure isn't caused by the patch. It failed before r786218 too. I think it should be tracked by OPENJPA-1248.\nTestReaderLob: on oracle, the result is similar with TestInputStreamLob. The failure isn't caused by the patch either. We should track it with OPENJPA-1248 too. I'll paste a stack trace to that issue. \non mysql, even before r786218, testUpdateWithNull will fail. at r807362 it also failed. I.e. the OPENJPA-525-3-branch1.1.x.patch doesn't cause any regression. I'll create a new JIRA issue to track the failure.\n\ntrunk: r807465+OPENJPA-525.3.patch\nTestSerializedLobs: same as 1.1.x branch\nTestInputStreamLob: same as 1.1.x branch.\nTestReaderLob: same as 1.1.x branch\n\nSo I think OPENJPA-525.3.patch does resolve the original problem of this issue and safe to be checked in.\n\nThanks,\nAmy","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=amy","name":"amy","key":"amy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Amy Yang","active":true,"timeZone":"Asia/Shanghai"},"created":"2009-08-25T04:01:44.867+0000","updated":"2009-08-25T04:01:44.867+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12389721/comment/12747429","id":"12747429","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dezzio","name":"dezzio","key":"dezzio","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Ezzio","active":true,"timeZone":"America/New_York"},"body":"Milosz and Amy, thank you!\n\nApplied Milosz's OPENJPA-525.3.patch to trunk at 807642.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dezzio","name":"dezzio","key":"dezzio","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Ezzio","active":true,"timeZone":"America/New_York"},"created":"2009-08-25T14:19:09.300+0000","updated":"2009-08-25T14:19:09.300+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12389721/comment/12748054","id":"12748054","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=milosz","name":"milosz","key":"milosz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Milosz Tylenda","active":true,"timeZone":"Etc/UTC"},"body":"I have ported OPENJPA-525.3.patch along with new tests in TestSerializedLobs to branch 1.3.x.\n\nMike, you can consider applying the fix to other branches or close this bug.\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=milosz","name":"milosz","key":"milosz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Milosz Tylenda","active":true,"timeZone":"Etc/UTC"},"created":"2009-08-26T18:03:38.622+0000","updated":"2009-08-26T18:03:38.622+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12389721/comment/12759995","id":"12759995","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=milosz","name":"milosz","key":"milosz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Milosz Tylenda","active":true,"timeZone":"Etc/UTC"},"body":"Reopen if needs porting to other branches.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=milosz","name":"milosz","key":"milosz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Milosz Tylenda","active":true,"timeZone":"Etc/UTC"},"created":"2009-09-27T07:01:34.278+0000","updated":"2009-09-27T07:01:34.278+0000"}],"maxResults":24,"total":24,"startAt":0},"customfield_12311820":"0|i0z27r:","customfield_12314139":null}}

