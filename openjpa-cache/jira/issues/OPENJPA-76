{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12354902","self":"https://issues.apache.org/jira/rest/api/2/issue/12354902","key":"OPENJPA-76","fields":{"fixVersions":[],"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12312323":null,"customfield_12312320":null,"customfield_12310420":"160413","customfield_12312321":null,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.svg","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12312331":null,"customfield_12312332":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"customfield_12312330":null,"versions":[],"customfield_12311120":null,"customfield_12313826":null,"customfield_12312339":null,"issuelinks":[],"customfield_12313825":null,"assignee":null,"customfield_12312337":null,"customfield_12313823":null,"customfield_12312338":null,"customfield_12311920":null,"customfield_12313822":null,"customfield_12312335":null,"customfield_12313821":null,"customfield_12312336":null,"customfield_12313820":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12311302","id":"12311302","name":"kernel","description":"Kernel"}],"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"203348","customfield_12312823":null,"creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikedd","name":"mikedd","key":"mikedd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael Dick","active":true,"timeZone":"America/Chicago"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikedd","name":"mikedd","key":"mikedd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael Dick","active":true,"timeZone":"America/Chicago"},"aggregateprogress":{"progress":0,"total":0},"customfield_12313520":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"customfield_12313924":null,"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/OPENJPA-76/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12313920":null,"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"customfield_12314020":"{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@f071031[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@31d54bda[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@2431d9d[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@19d31d94[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3f9e7ba6[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@1a65f71a[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@50be3e[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@16e3c1d[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@4de134dd[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@7889d75c[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7dad373d[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@d537241[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}","customfield_12314141":null,"customfield_12314140":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310351","id":"12310351","key":"OPENJPA","name":"OpenJPA","projectTypeKey":"software","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310351&avatarId=10043","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310351&avatarId=10043","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310351&avatarId=10043","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310351&avatarId=10043"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10252","id":"10252","description":"","name":"OpenJPA"}},"aggregatetimespent":null,"customfield_12312520":null,"customfield_12314422":null,"customfield_12314421":null,"customfield_12314146":null,"customfield_12314420":null,"customfield_12314145":null,"customfield_12314144":null,"customfield_12314143":null,"resolutiondate":"2006-11-07T08:02:24.000+0000","workratio":-1,"customfield_12312923":null,"customfield_12312920":null,"customfield_12312921":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/OPENJPA-76/watchers","watchCount":0,"isWatching":false},"created":"2006-11-07T04:35:48.000+0000","updated":"2007-04-17T18:38:46.372+0000","timeoriginalestimate":null,"description":"Patrick Linskey found the problem and posted to the dev mailing list. Here's the original post :\n\nHi,\n\nI get the following stack trace when running 'mvn package'. It looks\nlike I don't have some required IBM classes in my classpath.\nSurprisingly, this exception does not cause the build to fail, but\npresumably, the output bytes are not the same as if this had run\nsuccessfully.\n\nDoes anyone have any suggestions for either getting the classes into the\nclasspath or moving the exception to runtime, so that there aren't\nbuild-time dependency issues resulting in different jars from the same\nsources?\n\nThanks,\n\n-Patrick\n\n\nPartial stack trace:\n\n[INFO] [antrun:run {execution: add-was-interfaces}]\n[INFO] Executing tasks\n    [java] java.lang.IllegalArgumentException:\njava.lang.NoClassDefFoundError:\ncom/ibm/websphere/jtaextensions/SynchronizationCallback\n    [java]     at\norg.apache.tools.ant.taskdefs.ExecuteJava.execute(ExecuteJava.java:180)\n    [java]     at org.apache.tools.ant.taskdefs.Java.run(Java.java:710)\n    [java]     at\norg.apache.tools.ant.taskdefs.Java.executeJava(Java.java:178)\n\n    [java]     at\norg.apache.tools.ant.taskdefs.Java.execute(Java.java:84)\n    [java]     at\norg.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)\n    [java]     at org.apache.tools.ant.Task.perform(Task.java:364)\n    [java]     at org.apache.tools.ant.Target.execute(Target.java:341)\n    [java]     at\norg.apache.maven.plugin.antrun.AbstractAntMojo.executeTasks(AbstractAntM\nojo.java:108)\n    [java]     at\norg.apache.maven.plugin.antrun.AntRunMojo.execute(AntRunMojo.java:83)\n    [java]     at\norg.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginMa\nnager.java:412)\n    [java]     at\norg.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(Default\nLifecycleExecutor.java:534)\n    .....\n\n    [java] Caused by: java.lang.IllegalArgumentException:\njava.lang.NoClassDefFoundError:\ncom/ibm/websphere/jtaextensions/SynchronizationCallback\n    [java]     at serp.util.Strings.toClass(Strings.java:211)\n    [java]     at serp.util.Strings.toClass(Strings.java:140)\n    [java]     at serp.bytecode.BCClass.getType(BCClass.java:565)\n    [java]     at serp.bytecode.BCClass.write(BCClass.java:202)\n    [java]     at\norg.apache.openjpa.ee.WASManagedRuntime.main(WASManagedRuntime.java:412)\n    [java]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native\nMethod)\n\n\nUpon further examination the problem occurs if the WASSynchronization class is modified a second time (ie you don't run mvn clean before running mvn package). \n\n","customfield_10010":null,"timetracking":{},"customfield_12314523":null,"customfield_12314127":null,"customfield_12314522":null,"customfield_12314126":null,"customfield_12314521":null,"customfield_12314125":null,"customfield_12314520":null,"customfield_12314124":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12344444","id":"12344444","filename":"openjpa-76-patch.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikedd","name":"mikedd","key":"mikedd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael Dick","active":true,"timeZone":"America/Chicago"},"created":"2006-11-07T04:52:29.000+0000","size":1815,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12344444/openjpa-76-patch.txt"}],"customfield_12312340":null,"customfield_12314123":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12314122":null,"customfield_12314121":null,"customfield_12310041":null,"customfield_12314120":null,"customfield_12314129":null,"customfield_12314524":null,"customfield_12314128":null,"summary":"add-was-interfaces ant task throws exception on a \"non-clean\" build.","customfield_12314130":null,"customfield_12310291":null,"customfield_12310290":null,"customfield_12314138":null,"customfield_12314137":null,"environment":null,"customfield_12314136":null,"customfield_12314135":null,"customfield_12311020":null,"customfield_12314134":null,"duedate":null,"customfield_12314132":null,"customfield_12314131":null,"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12354902/comment/12447631","id":"12447631","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikedd","name":"mikedd","key":"mikedd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael Dick","active":true,"timeZone":"America/Chicago"},"body":"Attaching a patch file which avoids the problem (at least for the time being). \n\nThe problem occurs when the new BCClass is written out to the file system. The patch will check whether the interface is already included in the class. If the \"new\" interface is already there the program will terminate. \n\nThe larger question remains: should Serp be used in this manner, or should a stub class be created and used at compile time. Currently a stub class for misc.sun.Perf is being created in the openjpa-lib project, but is removed before the jar files are created and is not distributed with OpenJPA.\n\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikedd","name":"mikedd","key":"mikedd","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael Dick","active":true,"timeZone":"America/Chicago"},"created":"2006-11-07T04:52:29.000+0000","updated":"2006-11-07T04:52:29.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12354902/comment/12447699","id":"12447699","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pcl","name":"pcl","key":"pcl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Linskey","active":true,"timeZone":"America/Los_Angeles"},"body":"I'm perfectly happy with the use of serp here. Historically, we (the Kodo team) have created stub jars etc. with abandon, since the source was not available and thus we were not at risk of distributing bits that violated copyrights. Obviously, this is more of a concern with an open-source project, so we probably will need to be more careful about things like this in the future.\n\nCurrently, this seems to be the only big issue. It used to be that we needed to link against various Oracle-specific classes, but between judicious reflection and Oracle's increased standards compliance over the years, we've been able to avoid that for now. But I'm sure that similar situations will crop up in the future.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pcl","name":"pcl","key":"pcl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Linskey","active":true,"timeZone":"America/Los_Angeles"},"created":"2006-11-07T07:35:53.000+0000","updated":"2006-11-07T07:35:53.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12354902/comment/12447706","id":"12447706","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pcl","name":"pcl","key":"pcl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Linskey","active":true,"timeZone":"America/Los_Angeles"},"body":"I applied the patch with revision 472018. I changed it slightly to make it use resources instead of files.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pcl","name":"pcl","key":"pcl","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Linskey","active":true,"timeZone":"America/Los_Angeles"},"created":"2006-11-07T08:02:24.000+0000","updated":"2006-11-07T08:02:24.000+0000"}],"maxResults":3,"total":3,"startAt":0},"customfield_12311820":"0|i0z6gf:","customfield_12314139":null}}

