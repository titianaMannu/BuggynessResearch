{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"12409401","self":"https://issues.apache.org/jira/rest/api/2/issue/12409401","key":"OPENJPA-795","fields":{"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313326","id":"12313326","description":"","name":"1.3.0","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12313483","id":"12313483","description":"Early Access 2","name":"2.0.0-M2","archived":false,"released":true,"releaseDate":"2009-06-03"}],"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12312323":null,"customfield_12312320":null,"customfield_12310420":"161101","customfield_12312321":null,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312720":null,"customfield_12312325":null,"lastViewed":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12313422":"false","customfield_12312331":null,"customfield_12312332":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"customfield_12312330":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313102","id":"12313102","description":"","name":"1.2.0","archived":false,"released":true,"releaseDate":"2008-08-12"}],"customfield_12311120":null,"customfield_12313826":null,"customfield_12312339":null,"issuelinks":[],"customfield_12313825":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fancy","name":"fancy","key":"fancy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Catalina Wei","active":true,"timeZone":"Etc/UTC"},"customfield_12312337":null,"customfield_12313823":null,"customfield_12312338":null,"customfield_12311920":null,"customfield_12313822":null,"customfield_12312335":null,"customfield_12313821":null,"customfield_12312336":null,"customfield_12313820":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12311300","id":"12311300","name":"jdbc","description":"jdbc interface"}],"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12310921":null,"customfield_12310920":"201737","customfield_12312823":null,"creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maojianfeng","name":"maojianfeng","key":"maojianfeng","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jianfeng Mao","active":true,"timeZone":"Etc/UTC"},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maojianfeng","name":"maojianfeng","key":"maojianfeng","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jianfeng Mao","active":true,"timeZone":"Etc/UTC"},"aggregateprogress":{"progress":0,"total":0},"customfield_12313520":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"customfield_12313924":null,"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/OPENJPA-795/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12313920":null,"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/secure/viewavatar?size=xsmall&avatarId=21133&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":21133},"timespent":null,"customfield_12314020":"{summaryBean=com.atlassian.jira.plugin.devstatus.rest.SummaryBean@16048a11[summary={pullrequest=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@bc14a04[overall=PullRequestOverallBean{stateCount=0, state='OPEN', details=PullRequestOverallDetails{openCount=0, mergedCount=0, declinedCount=0}},byInstanceType={}], build=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3eb044be[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BuildOverallBean@3fa0a806[failedBuildCount=0,successfulBuildCount=0,unknownBuildCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], review=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@790f1206[overall=com.atlassian.jira.plugin.devstatus.summary.beans.ReviewsOverallBean@45fc69ab[stateCount=0,state=<null>,dueDate=<null>,overDue=false,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], deployment-environment=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@7955401e[overall=com.atlassian.jira.plugin.devstatus.summary.beans.DeploymentOverallBean@438f37aa[topEnvironments=[],showProjects=false,successfulCount=0,count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], repository=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@421182ff[overall=com.atlassian.jira.plugin.devstatus.summary.beans.CommitOverallBean@64060a27[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}], branch=com.atlassian.jira.plugin.devstatus.rest.SummaryItemBean@3780f309[overall=com.atlassian.jira.plugin.devstatus.summary.beans.BranchOverallBean@d88a034[count=0,lastUpdated=<null>,lastUpdatedTimestamp=<null>],byInstanceType={}]},errors=[],configErrors=[]], devSummaryJson={\"cachedValue\":{\"errors\":[],\"configErrors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":\"OPEN\",\"details\":{\"openCount\":0,\"mergedCount\":0,\"declinedCount\":0,\"total\":0},\"open\":true},\"byInstanceType\":{}},\"build\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"failedBuildCount\":0,\"successfulBuildCount\":0,\"unknownBuildCount\":0},\"byInstanceType\":{}},\"review\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"stateCount\":0,\"state\":null,\"dueDate\":null,\"overDue\":false,\"completed\":false},\"byInstanceType\":{}},\"deployment-environment\":{\"overall\":{\"count\":0,\"lastUpdated\":null,\"topEnvironments\":[],\"showProjects\":false,\"successfulCount\":0},\"byInstanceType\":{}},\"repository\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}},\"branch\":{\"overall\":{\"count\":0,\"lastUpdated\":null},\"byInstanceType\":{}}}},\"isStale\":false}}","customfield_12314141":null,"customfield_12314140":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310351","id":"12310351","key":"OPENJPA","name":"OpenJPA","projectTypeKey":"software","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310351&avatarId=10043","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310351&avatarId=10043","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310351&avatarId=10043","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310351&avatarId=10043"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10252","id":"10252","description":"","name":"OpenJPA"}},"aggregatetimespent":null,"customfield_12312520":null,"customfield_12314422":null,"customfield_12314421":null,"customfield_12314146":null,"customfield_12314420":null,"customfield_12314145":null,"customfield_12314144":null,"customfield_12314143":null,"resolutiondate":"2008-12-09T18:56:29.886+0000","workratio":-1,"customfield_12312923":null,"customfield_12312920":null,"customfield_12312921":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/OPENJPA-795/watchers","watchCount":0,"isWatching":false},"created":"2008-11-27T16:41:30.661+0000","updated":"2010-03-09T18:31:03.720+0000","timeoriginalestimate":null,"description":"IBM U2JPA is a JPA implementation based on OpenJPA for IBM  U2 Databases.  IBM U2 Databases allow the use of '.' in the column names, such as \"FIRST.NAME', \"LAST.NAME\", \"PURCHASE.DATE\".  This causes the enhancer to exception out when parsing these column names, as shown below.  We have tried, in our implementation,  to change the catalogSeparator to different values than '.' to prevent the enhancer from breaking the above names into 'tablename'.'columnname'. But nothing worked.  Later i found the following code in openjpa\\jdbc\\meta\\mappinginfo.java, clearly the separator is hardcoded as '.'.  I set the priority of this issue to 'critical' because this problem has severely impacted the adoption of U2JPA by our customers. \n\n          mergeColumn(.........) \n          {\n                 int dotIdx = colName.lastIndexOf('.');\n                 if (dotIdx == 0)\n                            colName = colName.substring(1);\n                 else if (dotIdx != -1) {\n                           findTable(context, colName.substring(0, dotIdx), table,\n                                null, null);\n                           colName = colName.substring(dotIdx + 1);\n                 }\n                .............\n        } \n\n\nclass U2Dictionary extends DBDictionary {\n\tprivate ArrayList<U2DictRecord> u2fields = new ArrayList<U2DictRecord>();\n\n\tU2Dictionary() {\n\t\tplatform = \"IBM U2\";\n\t\tcatalogSeparator = \":\";\n\t}\n..........\n\n@Entity\n@Table(name=\"CUSTOMER\")\npublic class Customer implements Serializable {\n\n\t@Id\n\t@Column(name=\"@ID\")\n\tprivate String _id;\n\n\t@Column(name=\"FIRST.NAME\")\n\tprivate String name;\n\n\tpublic Customer(){};\n\n\n\tpublic String get_id() {\n\t\treturn _id;\n\t}\n\n\tpublic void set_id(String _id) {\n\t\tthis._id = _id;\n\t}\n\n\tpublic String getName() {\n\t\treturn name;\n\t}\n\n\tpublic void setName(String name) {\n\t\tthis.name = name;\n\t}\n\n}\n\nException in thread \"main\" <openjpa-1.2.0-r422266:683325 fatal user error> org.apache.openjpa.persistence.ArgumentException: When mapping \"u2u.u2jpa.demo1.Customer.name\" to table \"CUSTOMER\", found a column mapped to illegal table \"FIRST\".\n\tat org.apache.openjpa.jdbc.meta.MappingInfo.findTable(MappingInfo.java:743)\n\tat org.apache.openjpa.jdbc.meta.MappingInfo.mergeColumn(MappingInfo.java:583)\n\tat org.apache.openjpa.jdbc.meta.MappingInfo.createColumns(MappingInfo.java:518)\n\tat org.apache.openjpa.jdbc.meta.ValueMappingInfo.getColumns(ValueMappingInfo.java:143)\n\tat org.apache.openjpa.jdbc.meta.strats.StringFieldStrategy.map(StringFieldStrategy.java:79)\n\tat org.apache.openjpa.jdbc.meta.FieldMapping.setStrategy(FieldMapping.java:121)\n\tat org.apache.openjpa.jdbc.meta.RuntimeStrategyInstaller.installStrategy(RuntimeStrategyInstaller.java:80)\n\tat org.apache.openjpa.jdbc.meta.FieldMapping.resolveMapping(FieldMapping.java:454)\n\tat org.apache.openjpa.jdbc.meta.FieldMapping.resolve(FieldMapping.java:419)\n\tat org.apache.openjpa.jdbc.meta.ClassMapping.resolveNonRelationMappings(ClassMapping.java:855)\n\tat org.apache.openjpa.jdbc.meta.MappingRepository.prepareMapping(MappingRepository.java:339)\n\tat org.apache.openjpa.meta.MetaDataRepository.preMapping(MetaDataRepository.java:662)\n\tat org.apache.openjpa.meta.MetaDataRepository.resolve(MetaDataRepository.java:549)\n\tat org.apache.openjpa.meta.MetaDataRepository.getMetaData(MetaDataRepository.java:308)\n\tat org.apache.openjpa.kernel.BrokerImpl.newObjectId(BrokerImpl.java:1114)\n\tat org.apache.openjpa.kernel.DelegatingBroker.newObjectId(DelegatingBroker.java:268)\n\tat org.apache.openjpa.persistence.EntityManagerImpl.find(EntityManagerImpl.java:451)\n\tat u2u.u2jpa.demo1.Demo1Main.main(Demo1Main.java:24)\n\n","customfield_10010":null,"timetracking":{},"customfield_12314523":null,"customfield_12314127":null,"customfield_12314522":null,"customfield_12314126":null,"customfield_12314521":null,"customfield_12314125":null,"customfield_12314520":null,"customfield_12314124":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12395649","id":"12395649","filename":"OPENJPA-795.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fancy","name":"fancy","key":"fancy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Catalina Wei","active":true,"timeZone":"Etc/UTC"},"created":"2008-12-09T14:15:37.253+0000","size":2943,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12395649/OPENJPA-795.patch"}],"customfield_12312340":null,"customfield_12314123":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12314122":null,"customfield_12314121":null,"customfield_12310041":null,"customfield_12314120":null,"customfield_12314129":null,"customfield_12314524":null,"customfield_12314128":null,"summary":"enhancer throws an exception when parsing column name \"first.name\" because it thinks 'first' is a table name","customfield_12314130":null,"customfield_12310291":null,"customfield_12310290":null,"customfield_12314138":null,"customfield_12314137":null,"environment":"Windows XP, Eclipse 3.4 SR1, OpenJPA-1.2.0,  IBM U2JPA-1.0.0, IBM U2 databases","customfield_12314136":null,"customfield_12314135":null,"customfield_12311020":null,"customfield_12314134":null,"duedate":null,"customfield_12314132":null,"customfield_12314131":null,"comment":{"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12409401/comment/12654013","id":"12654013","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fancy","name":"fancy","key":"fancy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Catalina Wei","active":true,"timeZone":"Etc/UTC"},"body":"Hi Jianfeng,\nIf shcmea name is 'TEST',  table name is 'EMPLOYEE',  column name is 'FIRST.LAST',\nis the fully qualified column name in U2 is following or not  (using ':' as the catalog separator in between schema and table names; and table and column names:\n\n    TEST:EMPLOYEE:FIRST.LAST\n\nplease verify before I can provide you with a patch.\n\nCatalina ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fancy","name":"fancy","key":"fancy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Catalina Wei","active":true,"timeZone":"Etc/UTC"},"created":"2008-12-06T01:14:25.565+0000","updated":"2008-12-06T01:14:25.565+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12409401/comment/12654803","id":"12654803","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fancy","name":"fancy","key":"fancy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Catalina Wei","active":true,"timeZone":"Etc/UTC"},"body":"Jianfeng,\ncould you verify if attached patch fix the problem ?\nThis patch can be applied against 1.2.x or 1.3.x branches.\n\nCatalina","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fancy","name":"fancy","key":"fancy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Catalina Wei","active":true,"timeZone":"Etc/UTC"},"created":"2008-12-09T14:15:37.285+0000","updated":"2008-12-09T14:15:37.285+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12409401/comment/12654894","id":"12654894","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fancy","name":"fancy","key":"fancy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Catalina Wei","active":true,"timeZone":"Etc/UTC"},"body":"patch committed under  r724815 ( 1.3.x branch )  , r724817 (trunk).\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fancy","name":"fancy","key":"fancy","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Catalina Wei","active":true,"timeZone":"Etc/UTC"},"created":"2008-12-09T18:56:29.781+0000","updated":"2008-12-09T18:56:29.781+0000"}],"maxResults":3,"total":3,"startAt":0},"customfield_12311820":"0|i0ywif:","customfield_12314139":null}}

