{"sha":"e2e207fb1c56647d4d042e6652548f20d5616c20","node_id":"MDQ6QmxvYjIwNjM2NDplMmUyMDdmYjFjNTY2NDdkNGQwNDJlNjY1MjU0OGYyMGQ1NjE2YzIw","size":5171,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/e2e207fb1c56647d4d042e6652548f20d5616c20","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLmtlcm5lbDsKCmltcG9ydCBqYXZhLnNxbC5Db25uZWN0\naW9uOwppbXBvcnQgamF2YS5zcWwuU1FMRXhjZXB0aW9uOwppbXBvcnQgamF2\nYXguc3FsLkRhdGFTb3VyY2U7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMuY29uZi5KREJDQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLm1ldGEuQ2xhc3NNYXBwaW5nOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLlNjaGVtYUdyb3VwOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNRTEV4Y2VwdGlvbnM7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlN0b3JlQ29udGV4\ndDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkNsYXNzTWV0YURh\ndGE7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5PcGVuSlBBRXhj\nZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuU3RvcmVF\neGNlcHRpb247CgovKioKICogQWJzdHJhY3Qgc2VxdWVuY2UgaW1wbGVtZW50\nYXRpb24uIEhhbmRsZXMgb2J0YWluaW5nIHRoZSBwcm9wZXIKICogY29ubmVj\ndGlvbiB0byB1c2VkIGJhc2VkIG9uIHdoZXRoZXIgdGhlIHNlcXVlbmNlIGlz\nIHRyYW5zYWN0aW9uYWwgYW5kCiAqIHdoZXRoZXIgYSBzZWNvbmQgZGF0YXNv\ndXJjZSBpcyBjb25maWd1cmVkLgogKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQog\nKi8KcHVibGljIGFic3RyYWN0IGNsYXNzIEFic3RyYWN0SkRCQ1NlcQogICAg\naW1wbGVtZW50cyBKREJDU2VxIHsKCiAgICBwcm90ZWN0ZWQgaW50IHR5cGUg\nPSBUWVBFX0RFRkFVTFQ7CiAgICBwcm90ZWN0ZWQgT2JqZWN0IGN1cnJlbnQg\nPSBudWxsOwoKICAgIC8qKgogICAgICogUmVjb3JkcyB0aGUgc2VxdWVuY2Ug\ndHlwZS4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0VHlwZShpbnQgdHlw\nZSkgewogICAgICAgIHRoaXMudHlwZSA9IHR5cGU7CiAgICB9CgogICAgcHVi\nbGljIE9iamVjdCBuZXh0KFN0b3JlQ29udGV4dCBjdHgsIENsYXNzTWV0YURh\ndGEgbWV0YSkgewogICAgICAgIEpEQkNTdG9yZSBzdG9yZSA9IGdldFN0b3Jl\nKGN0eCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY3VycmVudCA9IG5l\neHRJbnRlcm5hbChzdG9yZSwgKENsYXNzTWFwcGluZykgbWV0YSk7CiAgICAg\nICAgICAgIHJldHVybiBjdXJyZW50OwogICAgICAgIH0gY2F0Y2ggKE9wZW5K\nUEFFeGNlcHRpb24ga2UpIHsKICAgICAgICAgICAgdGhyb3cga2U7CiAgICAg\nICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIHNlKSB7CiAgICAgICAgICAgIHRo\ncm93IFNRTEV4Y2VwdGlvbnMuZ2V0U3RvcmUoc2UsIHN0b3JlLmdldERCRGlj\ndGlvbmFyeSgpKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewog\nICAgICAgICAgICB0aHJvdyBuZXcgU3RvcmVFeGNlcHRpb24oZSk7CiAgICAg\nICAgfQogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgY3VycmVudChTdG9yZUNv\nbnRleHQgY3R4LCBDbGFzc01ldGFEYXRhIG1ldGEpIHsKICAgICAgICBKREJD\nU3RvcmUgc3RvcmUgPSBnZXRTdG9yZShjdHgpOwogICAgICAgIHRyeSB7CiAg\nICAgICAgICAgIHJldHVybiBjdXJyZW50SW50ZXJuYWwoc3RvcmUsIChDbGFz\nc01hcHBpbmcpIG1ldGEpOwogICAgICAgIH0gY2F0Y2ggKE9wZW5KUEFFeGNl\ncHRpb24ga2UpIHsKICAgICAgICAgICAgdGhyb3cga2U7CiAgICAgICAgfSBj\nYXRjaCAoU1FMRXhjZXB0aW9uIHNlKSB7CiAgICAgICAgICAgIHRocm93IFNR\nTEV4Y2VwdGlvbnMuZ2V0U3RvcmUoc2UsIHN0b3JlLmdldERCRGljdGlvbmFy\neSgpKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAg\nICAgICB0aHJvdyBuZXcgU3RvcmVFeGNlcHRpb24oZSk7CiAgICAgICAgfQog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIGFsbG9jYXRlKGludCBhZGRpdGlvbmFs\nLCBTdG9yZUNvbnRleHQgY3R4LCBDbGFzc01ldGFEYXRhIG1ldGEpIHsKICAg\nICAgICBKREJDU3RvcmUgc3RvcmUgPSBnZXRTdG9yZShjdHgpOwogICAgICAg\nIHRyeSB7CiAgICAgICAgICAgIGFsbG9jYXRlSW50ZXJuYWwoYWRkaXRpb25h\nbCwgc3RvcmUsIChDbGFzc01hcHBpbmcpIG1ldGEpOwogICAgICAgIH0gY2F0\nY2ggKE9wZW5KUEFFeGNlcHRpb24ga2UpIHsKICAgICAgICAgICAgdGhyb3cg\na2U7CiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIHNlKSB7CiAgICAg\nICAgICAgIHRocm93IFNRTEV4Y2VwdGlvbnMuZ2V0U3RvcmUoc2UsIHN0b3Jl\nLmdldERCRGljdGlvbmFyeSgpKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRp\nb24gZSkgewogICAgICAgICAgICB0aHJvdyBuZXcgU3RvcmVFeGNlcHRpb24o\nZSk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogTm8tb3AuCiAg\nICAgKi8KICAgIHB1YmxpYyB2b2lkIGFkZFNjaGVtYShDbGFzc01hcHBpbmcg\nbWFwcGluZywgU2NoZW1hR3JvdXAgZ3JvdXApIHsKICAgIH0KCiAgICAvKioK\nICAgICAqIE5vLW9wLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBjbG9zZSgp\nIHsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgbmV4dCBzZXF1\nZW5jZSBvYmplY3QuCiAgICAgKi8KICAgIHByb3RlY3RlZCBhYnN0cmFjdCBP\nYmplY3QgbmV4dEludGVybmFsKEpEQkNTdG9yZSBzdG9yZSwKICAgICAgICBD\nbGFzc01hcHBpbmcgbWFwcGluZykKICAgICAgICB0aHJvd3MgRXhjZXB0aW9u\nOwoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBjdXJyZW50IHNlcXVlbmNl\nIG9iamVjdC4gQnkgZGVmYXVsdCByZXR1cm5zIHRoZSBsYXN0CiAgICAgKiBz\nZXF1ZW5jZSB2YWx1ZSB1c2VkLCBvciBudWxsIGlmIG5vIHNlcXVlbmNlIHZh\nbHVlcyBoYXZlIGJlZW4gcmVxdWVzdGVkCiAgICAgKiB5ZXQuIERlZmF1bHQg\naW1wbGVtZW50YXRpb24gaXMgbm90IHRocmVhZHNhZmUuCiAgICAgKi8KICAg\nIHByb3RlY3RlZCBPYmplY3QgY3VycmVudEludGVybmFsKEpEQkNTdG9yZSBz\ndG9yZSwgQ2xhc3NNYXBwaW5nIG1hcHBpbmcpCiAgICAgICAgdGhyb3dzIEV4\nY2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGN1cnJlbnQ7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBBbGxvY2F0ZSBhZGRpdGlvbmFsIHNlcXVlbmNlIHZhbHVl\ncy4gRG9lcyBub3RoaW5nIGJ5IGRlZmF1bHQuCiAgICAgKi8KICAgIHByb3Rl\nY3RlZCB2b2lkIGFsbG9jYXRlSW50ZXJuYWwoaW50IGFkZGl0aW9uYWwsIEpE\nQkNTdG9yZSBzdG9yZSwKICAgICAgICBDbGFzc01hcHBpbmcgbWFwcGluZykK\nICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsKICAgIH0KCiAgICAvKioKICAg\nICAqIEV4dHJhY3QgdGhlIHN0b3JlIGZyb20gdGhlIGdpdmVuIGNvbnRleHQu\nCiAgICAgKi8KICAgIHByaXZhdGUgSkRCQ1N0b3JlIGdldFN0b3JlKFN0b3Jl\nQ29udGV4dCBjdHgpIHsKICAgICAgICByZXR1cm4gKEpEQkNTdG9yZSkgY3R4\nLmdldFN0b3JlTWFuYWdlcigpLmdldElubmVybW9zdERlbGVnYXRlKCk7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGNvbm5lY3Rpb24gdG8g\ndXNlIGJhc2VkIG9uIHRoZSB0eXBlIG9mIHNlcXVlbmNlLiBUaGlzCiAgICAg\nKiBjb25uZWN0aW9uIHdpbGwgYXV0b21hdGljYWxseSBiZSBjbG9zZWQ7IGRv\nIG5vdCBjbG9zZSBpdC4KICAgICAqLwogICAgcHJvdGVjdGVkIENvbm5lY3Rp\nb24gZ2V0Q29ubmVjdGlvbihKREJDU3RvcmUgc3RvcmUpCiAgICAgICAgdGhy\nb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgaWYgKHR5cGUgPT0gVFlQRV9U\nUkFOU0FDVElPTkFMIHx8IHR5cGUgPT0gVFlQRV9DT05USUdVT1VTKQogICAg\nICAgICAgICByZXR1cm4gc3RvcmUuZ2V0Q29ubmVjdGlvbigpOwoKICAgICAg\nICBKREJDQ29uZmlndXJhdGlvbiBjb25mID0gc3RvcmUuZ2V0Q29uZmlndXJh\ndGlvbigpOwogICAgICAgIERhdGFTb3VyY2UgZHMgPSBjb25mLmdldERhdGFT\nb3VyY2UyKHN0b3JlLmdldENvbnRleHQoKSk7CiAgICAgICAgQ29ubmVjdGlv\nbiBjb25uID0gZHMuZ2V0Q29ubmVjdGlvbigpOwogICAgICAgIGlmIChjb25u\nLmdldEF1dG9Db21taXQoKSkKICAgICAgICAgICAgY29ubi5zZXRBdXRvQ29t\nbWl0KGZhbHNlKTsKICAgICAgICByZXR1cm4gY29ubjsKICAgIH0KCiAgICAv\nKioKICAgICAqIENsb3NlIHRoZSBjdXJyZW50IGNvbm5lY3Rpb24uCiAgICAg\nKi8KICAgIHByb3RlY3RlZCB2b2lkIGNsb3NlQ29ubmVjdGlvbihDb25uZWN0\naW9uIGNvbm4pIHsKICAgICAgICBpZiAoY29ubiA9PSBudWxsKQogICAgICAg\nICAgICByZXR1cm47CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGlmICh0\neXBlICE9IFRZUEVfVFJBTlNBQ1RJT05BTCAmJiB0eXBlICE9IFRZUEVfQ09O\nVElHVU9VUykKICAgICAgICAgICAgICAgIGNvbm4uY29tbWl0KCk7CiAgICAg\nICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIHNlKSB7CiAgICAgICAgICAgIHRo\ncm93IFNRTEV4Y2VwdGlvbnMuZ2V0U3RvcmUoc2UpOwogICAgICAgIH0gZmlu\nYWxseSB7CiAgICAgICAgICAgIHRyeSB7IGNvbm4uY2xvc2UoKTsgfSBjYXRj\naCAoU1FMRXhjZXB0aW9uIHNlKSB7fQogICAgICAgIH0KICAgIH0KfQo=\n","encoding":"base64"}

