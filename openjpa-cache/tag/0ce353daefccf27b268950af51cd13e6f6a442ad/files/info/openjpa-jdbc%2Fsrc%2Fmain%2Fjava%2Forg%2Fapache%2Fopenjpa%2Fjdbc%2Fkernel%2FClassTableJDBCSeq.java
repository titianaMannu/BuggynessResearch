{"sha":"e5ca574def8f1f215db581fa41c36025d01bdcce","node_id":"MDQ6QmxvYjIwNjM2NDplNWNhNTc0ZGVmOGYxZjIxNWRiNTgxZmE0MWMzNjAyNWQwMWJkY2Nl","size":9010,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/e5ca574def8f1f215db581fa41c36025d01bdcce","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLmtlcm5lbDsKCmltcG9ydCBqYXZhLnNxbC5Db25uZWN0\naW9uOwppbXBvcnQgamF2YS5zcWwuU1FMRXhjZXB0aW9uOwppbXBvcnQgamF2\nYS5zcWwuVHlwZXM7CmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsKaW1wb3J0\nIGphdmEudXRpbC5NYXA7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpk\nYmMuY29uZi5KREJDQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLmNvbmYuSkRCQ0NvbmZpZ3VyYXRpb25JbXBsOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5DbGFzc01hcHBpbmc7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLk1hcHBpbmdS\nZXBvc2l0b3J5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2No\nZW1hLkNvbHVtbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNj\naGVtYS5UYWJsZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNx\nbC5EQkRpY3Rpb25hcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGli\nLmNvbmYuQ29uZmlndXJhdGlvbnM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEubGliLm1ldGEuQ2xhc3NBcmdQYXJzZXI7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmxpYi51dGlsLk9wdGlvbnM7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEubWV0YS5KYXZhVHlwZXM7CgovKioKICogU3BlY2lhbGl6YXRp\nb24gb2YgdGhlIHtAbGluayBUYWJsZUpEQkNTZXF9IHRoYXQgbWFpbnRhaW5z\nIGEKICogc2VwYXJhdGUgc2VxdWVuY2UgY291bnQgcGVyLWNsYXNzLiBUYWJs\nZSBuYW1lIGRlZmF1bHRzIHRvCiAqIDxjb2RlPk9QRU5KUEFfU0VRVUVOQ0VT\nX1RBQkxFPC9jb2RlPi4KICoKICogQGF1dGhvciBBYmUgV2hpdGUKICovCnB1\nYmxpYyBjbGFzcyBDbGFzc1RhYmxlSkRCQ1NlcSAKICAgIGV4dGVuZHMgVGFi\nbGVKREJDU2VxIHsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6\nZXIgX2xvYyA9IExvY2FsaXplci5mb3JQYWNrYWdlCiAgICAgICAgKENsYXNz\nVGFibGVKREJDU2VxLmNsYXNzKTsKCiAgICBwcml2YXRlIGZpbmFsIE1hcCBf\nc3RhdHMgPSBuZXcgSGFzaE1hcCgpOwogICAgcHJpdmF0ZSBib29sZWFuIF9p\nZ25vcmUgPSBmYWxzZTsKICAgIHByaXZhdGUgYm9vbGVhbiBfYWxpYXNlcyA9\nIGZhbHNlOwoKICAgIHB1YmxpYyBDbGFzc1RhYmxlSkRCQ1NlcSgpIHsKICAg\nICAgICBzZXRUYWJsZSgiT1BFTkpQQV9TRVFVRU5DRVNfVEFCTEUiKTsKICAg\nIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdW5tYXBwZWQgY2xhc3NlcyBz\naG91bGQgYmUgaWdub3JlZCBhcyBwb3NzaWJsZSBwcmltYXJ5CiAgICAgKiBr\nZXkgdmFsdWVzIGluIHRoZSB0YWJsZS4gRGVmYXVsdHMgdG8gZmFsc2UuCiAg\nICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGdldElnbm9yZVVubWFwcGVkKCkg\newogICAgICAgIHJldHVybiBfaWdub3JlOwogICAgfQoKICAgIC8qKgogICAg\nICogV2hldGhlciB1bm1hcHBlZCBjbGFzc2VzIHNob3VsZCBiZSBpZ25vcmVk\nIGFzIHBvc3NpYmxlIHByaW1hcnkKICAgICAqIGtleSB2YWx1ZXMgaW4gdGhl\nIHRhYmxlLiBEZWZhdWx0cyB0byBmYWxzZS4KICAgICAqLwogICAgcHVibGlj\nIHZvaWQgc2V0SWdub3JlVW5tYXBwZWQoYm9vbGVhbiBpZ25vcmUpIHsKICAg\nICAgICBfaWdub3JlID0gaWdub3JlOwogICAgfQoKICAgIC8qKgogICAgICog\nQGRlcHJlY2F0ZWQgVXNlIHtAbGluayAjc2V0SWdub3JlVW5tYXBwZWR9LiBS\nZXRhaW5lZCBmb3IKICAgICAqIGJhY2t3YXJkcy1jb21wYXRpYmlsaXR5IGZv\nciBhdXRvLWNvbmZpZ3VyYXRpb24uCiAgICAgKi8KICAgIHB1YmxpYyB2b2lk\nIHNldElnbm9yZVZpcnR1YWwoYm9vbGVhbiBpZ25vcmUpIHsKICAgICAgICBz\nZXRJZ25vcmVVbm1hcHBlZChpZ25vcmUpOwogICAgfQoKICAgIC8qKgogICAg\nICogV2hldGhlciB0byB1c2UgdHlwZSBhbGlzZXMgZm9yIHByaW1hcnkga2V5\nIHZhbHVlcyBpbiBwbGFjZSBvZiBjbGFzcwogICAgICogbmFtZXMuIERlZmF1\nbHRzIHRvIGZhbHNlLgogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBnZXRV\nc2VBbGlhc2VzKCkgewogICAgICAgIHJldHVybiBfYWxpYXNlczsKICAgIH0K\nCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8gdXNlIHR5cGUgYWxpc2VzIGZv\nciBwcmltYXJ5IGtleSB2YWx1ZXMgaW4gcGxhY2Ugb2YgY2xhc3MKICAgICAq\nIG5hbWVzLiBEZWZhdWx0cyB0byBmYWxzZS4KICAgICAqLwogICAgcHVibGlj\nIHZvaWQgc2V0VXNlQWxpYXNlcyhib29sZWFuIGFsaWFzZXMpIHsKICAgICAg\nICBfYWxpYXNlcyA9IGFsaWFzZXM7CiAgICB9CgogICAgcHJvdGVjdGVkIHN5\nbmNocm9uaXplZCBTdGF0dXMgZ2V0U3RhdHVzKENsYXNzTWFwcGluZyBtYXBw\naW5nKSB7CiAgICAgICAgaWYgKG1hcHBpbmcgPT0gbnVsbCkKICAgICAgICAg\nICAgcmV0dXJuIG51bGw7CiAgICAgICAgU3RyaW5nIGtleSA9IGdldEtleSht\nYXBwaW5nLCBmYWxzZSk7CiAgICAgICAgU3RhdHVzIHN0YXQgPSAoU3RhdHVz\nKSBfc3RhdHMuZ2V0KGtleSk7CiAgICAgICAgaWYgKHN0YXQgPT0gbnVsbCkg\newogICAgICAgICAgICBzdGF0ID0gbmV3IFN0YXR1cygpOwogICAgICAgICAg\nICBfc3RhdHMucHV0KGtleSwgc3RhdCk7CiAgICAgICAgfQogICAgICAgIHJl\ndHVybiBzdGF0OwogICAgfQoKICAgIHByb3RlY3RlZCBDb2x1bW4gYWRkUHJp\nbWFyeUtleUNvbHVtbihUYWJsZSB0YWJsZSkgewogICAgICAgIERCRGljdGlv\nbmFyeSBkaWN0ID0gZ2V0Q29uZmlndXJhdGlvbigpLmdldERCRGljdGlvbmFy\neUluc3RhbmNlKCk7CiAgICAgICAgQ29sdW1uIHBrQ29sdW1uID0gdGFibGUu\nYWRkQ29sdW1uKGRpY3QuZ2V0VmFsaWRDb2x1bW5OYW1lKAogICAgICAgICAg\nICBnZXRQcmltYXJ5S2V5Q29sdW1uKCksIHRhYmxlKSk7CiAgICAgICAgcGtD\nb2x1bW4uc2V0VHlwZShkaWN0LmdldFByZWZlcnJlZFR5cGUoVHlwZXMuVkFS\nQ0hBUikpOwogICAgICAgIHBrQ29sdW1uLnNldEphdmFUeXBlKEphdmFUeXBl\ncy5TVFJJTkcpOwogICAgICAgIHBrQ29sdW1uLnNldFNpemUoZGljdC5jaGFy\nYWN0ZXJDb2x1bW5TaXplKTsKICAgICAgICByZXR1cm4gcGtDb2x1bW47CiAg\nICB9CgogICAgcHJvdGVjdGVkIE9iamVjdCBnZXRQcmltYXJ5S2V5KENsYXNz\nTWFwcGluZyBtYXBwaW5nKSB7CiAgICAgICAgaWYgKG1hcHBpbmcgPT0gbnVs\nbCkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgcmV0dXJuIGdl\ndEtleShtYXBwaW5nLCB0cnVlKTsKICAgIH0KCiAgICBwcml2YXRlIFN0cmlu\nZyBnZXRLZXkoQ2xhc3NNYXBwaW5nIG1hcHBpbmcsIGJvb2xlYW4gZGIpIHsK\nICAgICAgICBpZiAoX2lnbm9yZSkgewogICAgICAgICAgICB3aGlsZSAobWFw\ncGluZy5nZXRNYXBwZWRQQ1N1cGVyY2xhc3NNYXBwaW5nKCkgIT0gbnVsbCkK\nICAgICAgICAgICAgICAgIG1hcHBpbmcgPSBtYXBwaW5nLmdldE1hcHBlZFBD\nU3VwZXJjbGFzc01hcHBpbmcoKTsKICAgICAgICB9IGVsc2UgewogICAgICAg\nICAgICB3aGlsZSAobWFwcGluZy5nZXRQQ1N1cGVyY2xhc3MoKSAhPSBudWxs\nKQogICAgICAgICAgICAgICAgbWFwcGluZyA9IG1hcHBpbmcuZ2V0UENTdXBl\ncmNsYXNzTWFwcGluZygpOwogICAgICAgIH0KICAgICAgICBpZiAoX2FsaWFz\nZXMpCiAgICAgICAgICAgIHJldHVybiBtYXBwaW5nLmdldFR5cGVBbGlhcygp\nOwogICAgICAgIHJldHVybiBtYXBwaW5nLmdldERlc2NyaWJlZFR5cGUoKS5n\nZXROYW1lKCk7CiAgICB9CgogICAgLy8vLy8vLy8vCiAgICAvLyBNYWluCiAg\nICAvLy8vLy8vLy8KCiAgICAvKioKICAgICAqIFVzYWdlOiBqYXZhIG9yZy5h\ncGFjaGUub3BlbmpwYS5qZGJjLmtlcm5lbC5DbGFzc1RhYmxlSkRCQ1NlcSBb\nb3B0aW9uXSoKICAgICAqIC1hY3Rpb24vLWEgJmx0O2FkZCB8IGRyb3AgfCBn\nZXQgfCBzZXQmZ3Q7CiAgICAgKiBbY2xhc3MgbmFtZSB8IC5qYXZhIGZpbGUg\nfCAuY2xhc3MgZmlsZSB8IC5qZG8gZmlsZV0gW3ZhbHVlXQogICAgICogIFdo\nZXJlIHRoZSBmb2xsb3dpbmcgb3B0aW9ucyBhcmUgcmVjb2duaXplZC4KICAg\nICAqIDx1bD4KICAgICAqIDxsaT48aT4tcHJvcGVydGllcy8tcCAmbHQ7cHJv\ncGVydGllcyBmaWxlIG9yIHJlc291cmNlJmd0OzwvaT46IFRoZQogICAgICog\ncGF0aCBvciByZXNvdXJjZSBuYW1lIG9mIGEgT3BlbkpQQSBwcm9wZXJ0aWVz\nIGZpbGUgY29udGFpbmluZwogICAgICogaW5mb3JtYXRpb24gc3VjaCBhcyBj\nb25uZWN0aW9uIGRhdGEgYXMKICAgICAqIG91dGxpbmVkIGluIHtAbGluayBK\nREJDQ29uZmlndXJhdGlvbn0uIE9wdGlvbmFsLjwvbGk+CiAgICAgKiA8bGk+\nPGk+LSZsdDtwcm9wZXJ0eSBuYW1lJmd0OyAmbHQ7cHJvcGVydHkgdmFsdWUm\nZ3Q7PC9pPjogQWxsIGJlYW4KICAgICAqIHByb3BlcnRpZXMgb2YgdGhlIE9w\nZW5KUEEge0BsaW5rIEpEQkNDb25maWd1cmF0aW9ufSBjYW4gYmUgc2V0IGJ5\nCiAgICAgKiB1c2luZyB0aGVpcgluYW1lcyBhbmQgc3VwcGx5aW5nIGEgdmFs\ndWUuPC9saT4KICAgICAqIDwvdWw+CiAgICAgKiAgVGhlIHZhcmlvdXMgYWN0\naW9ucyBhcmUgYXMgZm9sbG93cy4KICAgICAqIDx1bD4KICAgICAqIDxsaT48\naT5hZGQ8L2k+OiBDcmVhdGUgdGhlIHNlcXVlbmNlIHRhYmxlLjwvbGk+CiAg\nICAgKiA8bGk+PGk+ZHJvcDwvaT46IERyb3AgdGhlIHNlcXVlbmNlIHRhYmxl\nLjwvbGk+CiAgICAgKiA8bGk+PGk+Z2V0PC9pPjogUHJpbnQgdGhlIGN1cnJl\nbnQgc2VxdWVuY2UgdmFsdWUgZm9yIHRoZSBnaXZlbgogICAgICogY2xhc3Mu\nPC9saT4KICAgICAqIDxsaT48aT5zZXQ8L2k+OiBTZXQgdGhlIHNlcXVlbmNl\nIHZhbHVlIGZvciB0aGUgZ2l2ZW4gY2xhc3MuPC9saT4KICAgICAqIDwvdWw+\nCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1td\nIGFyZ3MpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIE9wdGlvbnMgb3B0\ncyA9IG5ldyBPcHRpb25zKCk7CiAgICAgICAgYXJncyA9IG9wdHMuc2V0RnJv\nbUNtZExpbmUoYXJncyk7CiAgICAgICAgSkRCQ0NvbmZpZ3VyYXRpb24gY29u\nZiA9IG5ldyBKREJDQ29uZmlndXJhdGlvbkltcGwoKTsKICAgICAgICB0cnkg\newogICAgICAgICAgICBpZiAoIXJ1bihjb25mLCBhcmdzLCBvcHRzKSkKICAg\nICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihfbG9jLmdldCgiY2xz\ndGFibGUtc2VxLXVzYWdlIikpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAg\nICAgICAgIGNvbmYuY2xvc2UoKTsKICAgICAgICB9CiAgICB9CgogICAgLyoq\nCiAgICAgKiBSdW4gdGhlIHRvb2wuIFJldHVybnMgZmFsc2UgaWYgaW52YWxp\nZCBvcHRpb25zIHdlcmUgZ2l2ZW4uCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0\naWMgYm9vbGVhbiBydW4oSkRCQ0NvbmZpZ3VyYXRpb24gY29uZiwgU3RyaW5n\nW10gYXJncywKICAgICAgICBPcHRpb25zIG9wdHMpIHRocm93cyBFeGNlcHRp\nb24gewogICAgICAgIGlmIChvcHRzLmNvbnRhaW5zS2V5KCJoZWxwIikgfHwg\nb3B0cy5jb250YWluc0tleSgiLWhlbHAiKSkKICAgICAgICAgICAgcmV0dXJu\nIGZhbHNlOwoKICAgICAgICBTdHJpbmcgYWN0aW9uID0gb3B0cy5yZW1vdmVQ\ncm9wZXJ0eSgiYWN0aW9uIiwgImEiLCBudWxsKTsKICAgICAgICBDb25maWd1\ncmF0aW9ucy5wb3B1bGF0ZUNvbmZpZ3VyYXRpb24oY29uZiwgb3B0cyk7CiAg\nICAgICAgcmV0dXJuIHJ1bihjb25mLCBhcmdzLCBhY3Rpb24sIG51bGwsIG51\nbGwpOwogICAgfQoKICAgIC8qKgogICAgICogUnVuIHRoZSB0b29sLiBSZXR1\ncm4gZmFsc2UgaWYgYW4gaW52YWxpZCBvcHRpb24gd2FzIGdpdmVuLgogICAg\nICovCiAgICBwdWJsaWMgc3RhdGljIGJvb2xlYW4gcnVuKEpEQkNDb25maWd1\ncmF0aW9uIGNvbmYsIFN0cmluZ1tdIGFyZ3MsCiAgICAgICAgU3RyaW5nIGFj\ndGlvbiwgTWFwcGluZ1JlcG9zaXRvcnkgcmVwb3MsIENsYXNzTG9hZGVyIGxv\nYWRlcikKICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBDbGFz\nc1RhYmxlSkRCQ1NlcSBzZXEgPSBuZXcgQ2xhc3NUYWJsZUpEQkNTZXEoKTsK\nICAgICAgICBTdHJpbmcgcHJvcHMgPSBDb25maWd1cmF0aW9ucy5nZXRQcm9w\nZXJ0aWVzKGNvbmYuZ2V0U2VxdWVuY2UoKSk7CiAgICAgICAgQ29uZmlndXJh\ndGlvbnMuY29uZmlndXJlSW5zdGFuY2Uoc2VxLCBjb25mLCBwcm9wcyk7Cgog\nICAgICAgIGlmIChBQ1RJT05fRFJPUC5lcXVhbHMoYWN0aW9uKSkgewogICAg\nICAgICAgICBpZiAoYXJncy5sZW5ndGggIT0gMCkKICAgICAgICAgICAgICAg\nIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgc2VxLmRyb3BUYWJsZSgpOwog\nICAgICAgIH0gZWxzZSBpZiAoQUNUSU9OX0FERC5lcXVhbHMoYWN0aW9uKSkg\newogICAgICAgICAgICBpZiAoYXJncy5sZW5ndGggIT0gMCkKICAgICAgICAg\nICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgc2VxLnJlZnJlc2hU\nYWJsZSgpOwogICAgICAgIH0gZWxzZSBpZiAoQUNUSU9OX0dFVC5lcXVhbHMo\nYWN0aW9uKSB8fCBBQ1RJT05fU0VULmVxdWFscyhhY3Rpb24pKSB7CiAgICAg\nICAgICAgIGlmIChhcmdzLmxlbmd0aCA9PSAwKQogICAgICAgICAgICAgICAg\ncmV0dXJuIGZhbHNlOwoKICAgICAgICAgICAgaWYgKGxvYWRlciA9PSBudWxs\nKQogICAgICAgICAgICAgICAgbG9hZGVyID0gY29uZi5nZXRDbGFzc1Jlc29s\ndmVySW5zdGFuY2UoKS5nZXRDbGFzc0xvYWRlcigKICAgICAgICAgICAgICAg\nICAgICBDbGFzc1RhYmxlSkRCQ1NlcS5jbGFzcywgbnVsbCk7CgogICAgICAg\nICAgICBDbGFzc0FyZ1BhcnNlciBjYXAgPSBjb25mLmdldE1ldGFEYXRhUmVw\nb3NpdG9yeUluc3RhbmNlKCkKICAgICAgICAgICAgICAgIC5nZXRNZXRhRGF0\nYUZhY3RvcnkoKS5uZXdDbGFzc0FyZ1BhcnNlcigpOwogICAgICAgICAgICBj\nYXAuc2V0Q2xhc3NMb2FkZXIobG9hZGVyKTsKICAgICAgICAgICAgQ2xhc3Mg\nY2xzID0gY2FwLnBhcnNlVHlwZXMoYXJnc1swXSlbMF07CgogICAgICAgICAg\nICBpZiAocmVwb3MgPT0gbnVsbCkKICAgICAgICAgICAgICAgIHJlcG9zID0g\nY29uZi5nZXRNYXBwaW5nUmVwb3NpdG9yeUluc3RhbmNlKCk7CiAgICAgICAg\nICAgIENsYXNzTWFwcGluZyBtYXBwaW5nID0gcmVwb3MuZ2V0TWFwcGluZyhj\nbHMsIG51bGwsIHRydWUpOwoKICAgICAgICAgICAgQ29ubmVjdGlvbiBjb25u\nID0gY29uZi5nZXREYXRhU291cmNlMihudWxsKS5nZXRDb25uZWN0aW9uKCk7\nCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBsb25nIGN1ciA9\nIHNlcS5nZXRTZXF1ZW5jZShtYXBwaW5nLCBjb25uKTsKICAgICAgICAgICAg\nICAgIGlmIChBQ1RJT05fR0VULmVxdWFscyhhY3Rpb24pKQogICAgICAgICAg\nICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihtYXBwaW5nICsgIjogIiAr\nIGN1cik7CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAg\nICAgICBsb25nIHNldDsKICAgICAgICAgICAgICAgICAgICBpZiAoYXJncy5s\nZW5ndGggPiAxKQogICAgICAgICAgICAgICAgICAgICAgICBzZXQgPSBMb25n\nLnBhcnNlTG9uZyhhcmdzWzFdKTsKICAgICAgICAgICAgICAgICAgICBlbHNl\nCiAgICAgICAgICAgICAgICAgICAgICAgIHNldCA9IGN1ciArIHNlcS5nZXRB\nbGxvY2F0ZSgpOwogICAgICAgICAgICAgICAgICAgIGlmIChzZXQgPCBjdXIp\nCiAgICAgICAgICAgICAgICAgICAgICAgIHNldCA9IGN1cjsKICAgICAgICAg\nICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgU3Rh\ndHVzIHN0YXQgPSBzZXEuZ2V0U3RhdHVzKG1hcHBpbmcpOwogICAgICAgICAg\nICAgICAgICAgICAgICBzZXEuc2V0U2VxdWVuY2UobnVsbCwgc3RhdCwgKGlu\ndCkgKHNldCAtIGN1ciksIHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICBjb25uKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0ID0gc3Rh\ndC5zZXE7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAg\nICAgIFN5c3RlbS5lcnIucHJpbnRsbihtYXBwaW5nICsgIjogIiArIHNldCk7\nCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggKE51bWJl\nckZvcm1hdEV4Y2VwdGlvbiBuZmUpIHsKICAgICAgICAgICAgICAgIHJldHVy\nbiBmYWxzZTsKICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAg\nICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgY29ubi5jbG9zZSgpOwog\nICAgICAgICAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIHNlKSB7CiAg\nICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UK\nICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIHJldHVybiB0cnVl\nOwogICAgfQp9Cg==\n","encoding":"base64"}

