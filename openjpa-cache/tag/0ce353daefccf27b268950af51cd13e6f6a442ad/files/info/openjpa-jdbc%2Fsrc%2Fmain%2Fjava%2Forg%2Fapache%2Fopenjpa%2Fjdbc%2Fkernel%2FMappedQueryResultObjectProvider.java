{"sha":"c054e8d872402a6e2fa8a16cfd961ca2a1b81a28","node_id":"MDQ6QmxvYjIwNjM2NDpjMDU0ZThkODcyNDAyYTZlMmZhOGExNmNmZDk2MWNhMmExYjgxYTI4","size":14890,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/c054e8d872402a6e2fa8a16cfd961ca2a1b81a28","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLmtlcm5lbDsKCmltcG9ydCBqYXZhLmlvLklucHV0U3Ry\nZWFtOwppbXBvcnQgamF2YS5pby5SZWFkZXI7CmltcG9ydCBqYXZhLm1hdGgu\nQmlnRGVjaW1hbDsKaW1wb3J0IGphdmEubWF0aC5CaWdJbnRlZ2VyOwppbXBv\ncnQgamF2YS5zcWwuQXJyYXk7CmltcG9ydCBqYXZhLnNxbC5CbG9iOwppbXBv\ncnQgamF2YS5zcWwuQ2xvYjsKaW1wb3J0IGphdmEuc3FsLlJlZjsKaW1wb3J0\nIGphdmEuc3FsLlNRTEV4Y2VwdGlvbjsKaW1wb3J0IGphdmEuc3FsLlRpbWU7\nCmltcG9ydCBqYXZhLnNxbC5UaW1lc3RhbXA7CmltcG9ydCBqYXZhLnV0aWwu\nQ2FsZW5kYXI7CmltcG9ydCBqYXZhLnV0aWwuRGF0ZTsKaW1wb3J0IGphdmEu\ndXRpbC5Mb2NhbGU7CmltcG9ydCBqYXZhLnV0aWwuTWFwOwppbXBvcnQgamF2\nYS51dGlsLlN0YWNrOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLm1ldGEuQ2xhc3NNYXBwaW5nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMubWV0YS5GaWVsZE1hcHBpbmc7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5tZXRhLkphdmFTUUxUeXBlczsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLm1ldGEuUXVlcnlSZXN1bHRNYXBwaW5nOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLkNvbHVtbjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5BYnN0cmFjdFJlc3Vs\ndDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5Kb2luczsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5SZXN1bHQ7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuU1FMRXhjZXB0aW9u\nczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIucm9wLlJlc3VsdE9i\namVjdFByb3ZpZGVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwu\nU3RvcmVFeGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRp\nbC5VbnN1cHBvcnRlZEV4Y2VwdGlvbjsKCi8qKgogKiBQcm92aWRlcyB0aGUg\nZGF0YSBmcm9tIHF1ZXJ5IHJlc3VsdCBtYXBwZWQgYnkgYSB7QGxpbmsgUXVl\ncnlSZXN1bHRNYXBwaW5nfS4KICoKICogQGF1dGhvciBQaW5ha2kgUG9kZGFy\nCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqLwpjbGFzcyBNYXBwZWRRdWVyeVJl\nc3VsdE9iamVjdFByb3ZpZGVyCiAgICBpbXBsZW1lbnRzIFJlc3VsdE9iamVj\ndFByb3ZpZGVyIHsKCiAgICBwcml2YXRlIGZpbmFsIFF1ZXJ5UmVzdWx0TWFw\ncGluZyBfbWFwOwogICAgcHJpdmF0ZSBmaW5hbCBKREJDU3RvcmUgX3N0b3Jl\nOwogICAgcHJpdmF0ZSBmaW5hbCBKREJDRmV0Y2hDb25maWd1cmF0aW9uIF9m\nZXRjaDsKICAgIHByaXZhdGUgZmluYWwgTWFwcGluZ1Jlc3VsdCBfbXJlczsK\nCiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yLgogICAgICoKICAgICAqIEBw\nYXJhbSByZXMgdGhlIHJlc3VsdCBkYXRhCiAgICAgKi8KICAgIHB1YmxpYyBN\nYXBwZWRRdWVyeVJlc3VsdE9iamVjdFByb3ZpZGVyKFF1ZXJ5UmVzdWx0TWFw\ncGluZyBtYXAsCiAgICAgICAgSkRCQ1N0b3JlIHN0b3JlLCBKREJDRmV0Y2hD\nb25maWd1cmF0aW9uIGZldGNoLCBSZXN1bHQgcmVzKSB7CiAgICAgICAgX21h\ncCA9IG1hcDsKICAgICAgICBfc3RvcmUgPSBzdG9yZTsKICAgICAgICBfZmV0\nY2ggPSAoZmV0Y2ggPT0gbnVsbCkgPyBzdG9yZS5nZXRGZXRjaENvbmZpZ3Vy\nYXRpb24oKSA6IGZldGNoOwogICAgICAgIF9tcmVzID0gbmV3IE1hcHBpbmdS\nZXN1bHQocmVzKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBzdXBwb3J0\nc1JhbmRvbUFjY2VzcygpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBy\nZXR1cm4gX21yZXMuc3VwcG9ydHNSYW5kb21BY2Nlc3MoKTsKICAgICAgICB9\nIGNhdGNoIChUaHJvd2FibGUgdCkgewogICAgICAgICAgICByZXR1cm4gZmFs\nc2U7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIG9wZW4oKSB7\nCiAgICB9CgogICAgcHVibGljIE9iamVjdCBnZXRSZXN1bHRPYmplY3QoKQog\nICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIFF1ZXJ5UmVz\ndWx0TWFwcGluZy5QQ1Jlc3VsdFtdIHBjcyA9IF9tYXAuZ2V0UENSZXN1bHRz\nKCk7CiAgICAgICAgT2JqZWN0W10gY29scyA9IF9tYXAuZ2V0Q29sdW1uUmVz\ndWx0cygpOwoKICAgICAgICAvLyBzaW5nbGUgb2JqZWN0IGNhc2VzCiAgICAg\nICAgaWYgKHBjcy5sZW5ndGggPT0gMCAmJiBjb2xzLmxlbmd0aCA9PSAxKQog\nICAgICAgICAgICByZXR1cm4gX21yZXMuZ2V0T2JqZWN0KGNvbHNbMF0sIEph\ndmFTUUxUeXBlcy5KREJDX0RFRkFVTFQsIG51bGwpOwogICAgICAgIGlmIChw\nY3MubGVuZ3RoID09IDEgJiYgY29scy5sZW5ndGggPT0gMCkKICAgICAgICAg\nICAgcmV0dXJuIF9tcmVzLmxvYWQocGNzWzBdLCBfc3RvcmUsIF9mZXRjaCk7\nCgogICAgICAgIC8vIG11bHRpcGxlIG9iamVjdHMKICAgICAgICBPYmplY3Rb\nXSByZXQgPSBuZXcgT2JqZWN0W3Bjcy5sZW5ndGggKyBjb2xzLmxlbmd0aF07\nCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwY3MubGVuZ3RoOyBpKysp\nCiAgICAgICAgICAgIHJldFtpXSA9IF9tcmVzLmxvYWQocGNzW2ldLCBfc3Rv\ncmUsIF9mZXRjaCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb2xz\nLmxlbmd0aDsgaSsrKQogICAgICAgICAgICByZXRbcGNzLmxlbmd0aCArIGld\nID0gX21yZXMuZ2V0T2JqZWN0KGNvbHNbaV0sCiAgICAgICAgICAgICAgICBK\nYXZhU1FMVHlwZXMuSkRCQ19ERUZBVUxULCBudWxsKTsKICAgICAgICByZXR1\ncm4gcmV0OwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIG5leHQoKQogICAg\nICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBfbXJl\ncy5uZXh0KCk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gYWJzb2x1dGUo\naW50IHBvcykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAg\nICByZXR1cm4gX21yZXMuYWJzb2x1dGUocG9zKTsKICAgIH0KCiAgICBwdWJs\naWMgaW50IHNpemUoKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewog\nICAgICAgIGlmIChfZmV0Y2guZ2V0TFJTU2l6ZSgpID09IExSU1NpemVzLlNJ\nWkVfVU5LTk9XTgogICAgICAgICAgICB8fCAhc3VwcG9ydHNSYW5kb21BY2Nl\nc3MoKSkKICAgICAgICAgICAgcmV0dXJuIEludGVnZXIuTUFYX1ZBTFVFOwog\nICAgICAgIHJldHVybiBfbXJlcy5zaXplKCk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgcmVzZXQoKSB7CiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVk\nRXhjZXB0aW9uKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgY2xvc2UoKSB7\nCiAgICAgICAgX21yZXMuY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBoYW5kbGVDaGVja2VkRXhjZXB0aW9uKEV4Y2VwdGlvbiBlKSB7CiAgICAg\nICAgaWYgKGUgaW5zdGFuY2VvZiBTUUxFeGNlcHRpb24pCiAgICAgICAgICAg\nIHRocm93IFNRTEV4Y2VwdGlvbnMuZ2V0U3RvcmUoKFNRTEV4Y2VwdGlvbikg\nZSwKICAgICAgICAgICAgICAgIF9zdG9yZS5nZXREQkRpY3Rpb25hcnkoKSk7\nCiAgICAgICAgdGhyb3cgbmV3IFN0b3JlRXhjZXB0aW9uKGUpOwogICAgfQoK\nICAgIC8qKgogICAgICogUmVzdWx0IHR5cGUgdGhhdCBtYXBzIHJlcXVlc3Rz\nIHVzaW5nIGEgZ2l2ZW4KICAgICAqIHtAbGluayBRdWVyeVJlc3VsdE1hcHBp\nbmcuUENSZXN1bHR9LgogICAgICovCiAgICBwcml2YXRlIHN0YXRpYyBjbGFz\ncyBNYXBwaW5nUmVzdWx0CiAgICAgICAgZXh0ZW5kcyBBYnN0cmFjdFJlc3Vs\ndCB7CgogICAgICAgIHByaXZhdGUgZmluYWwgUmVzdWx0IF9yZXM7CiAgICAg\nICAgcHJpdmF0ZSBmaW5hbCBTdGFjayBfcmVxdWVzdHMgPSBuZXcgU3RhY2so\nKTsKICAgICAgICBwcml2YXRlIFF1ZXJ5UmVzdWx0TWFwcGluZy5QQ1Jlc3Vs\ndCBfcGMgPSBudWxsOwoKICAgICAgICAvKioKICAgICAgICAgKiBTdXBwbHkg\nZGVsZWdhdGUgb24gY29uc3RydWN0aW9uLgogICAgICAgICAqLwogICAgICAg\nIHB1YmxpYyBNYXBwaW5nUmVzdWx0KFJlc3VsdCByZXMpIHsKICAgICAgICAg\nICAgX3JlcyA9IHJlczsKICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAg\nICAqIExvYWQgYW4gaW5zdGFuY2Ugb2YgdGhlIGdpdmVuIHR5cGUuIFNob3Vs\nZCBiZSB1c2VkIGluIHBsYWNlIG9mCiAgICAgICAgICoge0BsaW5rIFJlc3Vs\ndCNsb2FkfS4KICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgT2JqZWN0IGxv\nYWQoUXVlcnlSZXN1bHRNYXBwaW5nLlBDUmVzdWx0IHBjLCBKREJDU3RvcmUg\nc3RvcmUsCiAgICAgICAgICAgIEpEQkNGZXRjaENvbmZpZ3VyYXRpb24gZmV0\nY2gpCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAg\nICAgICBfcGMgPSBwYzsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\nICAgIHJldHVybiBsb2FkKHBjLmdldENhbmRpZGF0ZVR5cGVNYXBwaW5nKCks\nIHN0b3JlLCBmZXRjaCk7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAg\nICAgICAgICAgICBfcGMgPSBudWxsOwogICAgICAgICAgICB9CiAgICAgICAg\nfQoKICAgICAgICBwdWJsaWMgT2JqZWN0IGxvYWQoQ2xhc3NNYXBwaW5nIG1h\ncHBpbmcsIEpEQkNTdG9yZSBzdG9yZSwKICAgICAgICAgICAgSkRCQ0ZldGNo\nQ29uZmlndXJhdGlvbiBmZXRjaCkKICAgICAgICAgICAgdGhyb3dzIFNRTEV4\nY2VwdGlvbiB7CiAgICAgICAgICAgIHJldHVybiBsb2FkKG1hcHBpbmcsIHN0\nb3JlLCBmZXRjaCwgbnVsbCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMg\nT2JqZWN0IGxvYWQoQ2xhc3NNYXBwaW5nIG1hcHBpbmcsIEpEQkNTdG9yZSBz\ndG9yZSwKICAgICAgICAgICAgSkRCQ0ZldGNoQ29uZmlndXJhdGlvbiBmZXRj\naCwgSm9pbnMgam9pbnMpCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRp\nb24gewogICAgICAgICAgICBpZiAoX3BjID09IG51bGwpCiAgICAgICAgICAg\nICAgICByZXR1cm4gc3VwZXIubG9hZChtYXBwaW5nLCBzdG9yZSwgZmV0Y2gs\nIGpvaW5zKTsKCiAgICAgICAgICAgIC8vIHdlIGdvIGRpcmVjdCB0byB0aGUg\nc3RvcmUgbWFuYWdlciBzbyB3ZSBjYW4gdGVsbCBpdCBub3QgdG8gbG9hZAog\nICAgICAgICAgICAvLyBhbnl0aGluZyBhZGRpdGlvbmFsCiAgICAgICAgICAg\nIHJldHVybiAoKEpEQkNTdG9yZU1hbmFnZXIpIHN0b3JlKS5sb2FkKG1hcHBp\nbmcsIGZldGNoLAogICAgICAgICAgICAgICAgX3BjLmdldEV4Y2x1ZGVzKF9y\nZXF1ZXN0cyksIHRoaXMpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIE9i\namVjdCBnZXRFYWdlcihGaWVsZE1hcHBpbmcga2V5KSB7CiAgICAgICAgICAg\nIE9iamVjdCByZXQgPSBfcmVzLmdldEVhZ2VyKGtleSk7CiAgICAgICAgICAg\nIGlmIChfcGMgPT0gbnVsbCB8fCByZXQgIT0gbnVsbCkKICAgICAgICAgICAg\nICAgIHJldHVybiByZXQ7CiAgICAgICAgICAgIHJldHVybiAoX3BjLmhhc0Vh\nZ2VyKF9yZXF1ZXN0cywga2V5KSkgPyB0aGlzIDogbnVsbDsKICAgICAgICB9\nCgogICAgICAgIHB1YmxpYyB2b2lkIHB1dEVhZ2VyKEZpZWxkTWFwcGluZyBr\nZXksIE9iamVjdCByZXMpIHsKICAgICAgICAgICAgX3Jlcy5wdXRFYWdlcihr\nZXksIHJlcyk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBjbG9z\nZSgpIHsKICAgICAgICAgICAgX3Jlcy5jbG9zZSgpOwogICAgICAgIH0KCiAg\nICAgICAgcHVibGljIEpvaW5zIG5ld0pvaW5zKCkgewogICAgICAgICAgICBy\nZXR1cm4gX3Jlcy5uZXdKb2lucygpOwogICAgICAgIH0KCiAgICAgICAgcHVi\nbGljIGJvb2xlYW4gc3VwcG9ydHNSYW5kb21BY2Nlc3MoKQogICAgICAgICAg\nICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgcmV0dXJuIF9y\nZXMuc3VwcG9ydHNSYW5kb21BY2Nlc3MoKTsKICAgICAgICB9CgogICAgICAg\nIHB1YmxpYyBDbGFzc01hcHBpbmcgZ2V0QmFzZU1hcHBpbmcoKSB7CiAgICAg\nICAgICAgIHJldHVybiBfcmVzLmdldEJhc2VNYXBwaW5nKCk7CiAgICAgICAg\nfQoKICAgICAgICBwdWJsaWMgaW50IHNpemUoKQogICAgICAgICAgICB0aHJv\nd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgcmV0dXJuIF9yZXMuc2l6\nZSgpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc3RhcnREYXRh\nUmVxdWVzdChPYmplY3QgbWFwcGluZykgewogICAgICAgICAgICBfcmVxdWVz\ndHMucHVzaChtYXBwaW5nKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2\nb2lkIGVuZERhdGFSZXF1ZXN0KCkgewogICAgICAgICAgICBfcmVxdWVzdHMu\ncG9wKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgYm9vbGVhbiB3YXNO\ndWxsKCkKICAgICAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAg\nICAgICAgIHJldHVybiBfcmVzLndhc051bGwoKTsKICAgICAgICB9CgogICAg\nICAgIHByb3RlY3RlZCBPYmplY3QgdHJhbnNsYXRlKE9iamVjdCBvYmosIEpv\naW5zIGpvaW5zKSB7CiAgICAgICAgICAgIHJldHVybiAoX3BjID09IG51bGwp\nID8gb2JqIDogX3BjLm1hcChfcmVxdWVzdHMsIG9iaiwgam9pbnMpOwogICAg\nICAgIH0KCiAgICAgICAgcHJvdGVjdGVkIGJvb2xlYW4gYWJzb2x1dGVJbnRl\ncm5hbChpbnQgcm93KQogICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9u\nIHsKICAgICAgICAgICAgcmV0dXJuIF9yZXMuYWJzb2x1dGUocm93KTsKICAg\nICAgICB9CgogICAgICAgIHByb3RlY3RlZCBib29sZWFuIG5leHRJbnRlcm5h\nbCgpCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAg\nICAgICByZXR1cm4gX3Jlcy5uZXh0KCk7CiAgICAgICAgfQoKICAgICAgICBw\ncm90ZWN0ZWQgYm9vbGVhbiBjb250YWluc0ludGVybmFsKE9iamVjdCBvYmos\nIEpvaW5zIGpvaW5zKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9u\nIHsKICAgICAgICAgICAgcmV0dXJuIF9yZXMuY29udGFpbnModHJhbnNsYXRl\nKG9iaiwgam9pbnMpKTsKICAgICAgICB9CgogICAgICAgIHByb3RlY3RlZCBB\ncnJheSBnZXRBcnJheUludGVybmFsKE9iamVjdCBvYmosIEpvaW5zIGpvaW5z\nKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAg\nICAgaWYgKG9iaiBpbnN0YW5jZW9mIENvbHVtbikKICAgICAgICAgICAgICAg\nIHJldHVybiBfcmVzLmdldEFycmF5KChDb2x1bW4pIG9iaiwgam9pbnMpOwog\nICAgICAgICAgICByZXR1cm4gX3Jlcy5nZXRBcnJheShvYmopOwogICAgICAg\nIH0KCiAgICAgICAgcHJvdGVjdGVkIElucHV0U3RyZWFtIGdldEFzY2lpU3Ry\nZWFtSW50ZXJuYWwoT2JqZWN0IG9iaiwgSm9pbnMgam9pbnMpCiAgICAgICAg\nICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBpZiAob2Jq\nIGluc3RhbmNlb2YgQ29sdW1uKQogICAgICAgICAgICAgICAgcmV0dXJuIF9y\nZXMuZ2V0QXNjaWlTdHJlYW0oKENvbHVtbikgb2JqLCBqb2lucyk7CiAgICAg\nICAgICAgIHJldHVybiBfcmVzLmdldEFzY2lpU3RyZWFtKG9iaik7CiAgICAg\nICAgfQoKICAgICAgICBwcm90ZWN0ZWQgQmlnRGVjaW1hbCBnZXRCaWdEZWNp\nbWFsSW50ZXJuYWwoT2JqZWN0IG9iaiwgSm9pbnMgam9pbnMpCiAgICAgICAg\nICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBpZiAob2Jq\nIGluc3RhbmNlb2YgQ29sdW1uKQogICAgICAgICAgICAgICAgcmV0dXJuIF9y\nZXMuZ2V0QmlnRGVjaW1hbCgoQ29sdW1uKSBvYmosIGpvaW5zKTsKICAgICAg\nICAgICAgcmV0dXJuIF9yZXMuZ2V0QmlnRGVjaW1hbChvYmopOwogICAgICAg\nIH0KCiAgICAgICAgcHJvdGVjdGVkIE51bWJlciBnZXROdW1iZXJJbnRlcm5h\nbChPYmplY3Qgb2JqLCBKb2lucyBqb2lucykKICAgICAgICAgICAgdGhyb3dz\nIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIGlmIChvYmogaW5zdGFuY2Vv\nZiBDb2x1bW4pCiAgICAgICAgICAgICAgICByZXR1cm4gX3Jlcy5nZXROdW1i\nZXIoKENvbHVtbikgb2JqLCBqb2lucyk7CiAgICAgICAgICAgIHJldHVybiBf\ncmVzLmdldE51bWJlcihvYmopOwogICAgICAgIH0KCiAgICAgICAgcHJvdGVj\ndGVkIEJpZ0ludGVnZXIgZ2V0QmlnSW50ZWdlckludGVybmFsKE9iamVjdCBv\nYmosIEpvaW5zIGpvaW5zKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0\naW9uIHsKICAgICAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIENvbHVtbikK\nICAgICAgICAgICAgICAgIHJldHVybiBfcmVzLmdldEJpZ0ludGVnZXIoKENv\nbHVtbikgb2JqLCBqb2lucyk7CiAgICAgICAgICAgIHJldHVybiBfcmVzLmdl\ndEJpZ0ludGVnZXIob2JqKTsKICAgICAgICB9CgogICAgICAgIHByb3RlY3Rl\nZCBJbnB1dFN0cmVhbSBnZXRCaW5hcnlTdHJlYW1JbnRlcm5hbChPYmplY3Qg\nb2JqLCBKb2lucyBqb2lucykKICAgICAgICAgICAgdGhyb3dzIFNRTEV4Y2Vw\ndGlvbiB7CiAgICAgICAgICAgIGlmIChvYmogaW5zdGFuY2VvZiBDb2x1bW4p\nCiAgICAgICAgICAgICAgICByZXR1cm4gX3Jlcy5nZXRCaW5hcnlTdHJlYW0o\nKENvbHVtbikgb2JqLCBqb2lucyk7CiAgICAgICAgICAgIHJldHVybiBfcmVz\nLmdldEJpbmFyeVN0cmVhbShvYmopOwogICAgICAgIH0KCiAgICAgICAgcHJv\ndGVjdGVkIEJsb2IgZ2V0QmxvYkludGVybmFsKE9iamVjdCBvYmosIEpvaW5z\nIGpvaW5zKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAg\nICAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIENvbHVtbikKICAgICAgICAg\nICAgICAgIHJldHVybiBfcmVzLmdldEJsb2IoKENvbHVtbikgb2JqLCBqb2lu\ncyk7CiAgICAgICAgICAgIHJldHVybiBfcmVzLmdldEJsb2Iob2JqKTsKICAg\nICAgICB9CgogICAgICAgIHByb3RlY3RlZCBib29sZWFuIGdldEJvb2xlYW5J\nbnRlcm5hbChPYmplY3Qgb2JqLCBKb2lucyBqb2lucykKICAgICAgICAgICAg\ndGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIGlmIChvYmogaW5z\ndGFuY2VvZiBDb2x1bW4pCiAgICAgICAgICAgICAgICByZXR1cm4gX3Jlcy5n\nZXRCb29sZWFuKChDb2x1bW4pIG9iaiwgam9pbnMpOwogICAgICAgICAgICBy\nZXR1cm4gX3Jlcy5nZXRCb29sZWFuKG9iaik7CiAgICAgICAgfQoKICAgICAg\nICBwcm90ZWN0ZWQgYnl0ZSBnZXRCeXRlSW50ZXJuYWwoT2JqZWN0IG9iaiwg\nSm9pbnMgam9pbnMpCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24g\newogICAgICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgQ29sdW1uKQogICAg\nICAgICAgICAgICAgcmV0dXJuIF9yZXMuZ2V0Qnl0ZSgoQ29sdW1uKSBvYmos\nIGpvaW5zKTsKICAgICAgICAgICAgcmV0dXJuIF9yZXMuZ2V0Qnl0ZShvYmop\nOwogICAgICAgIH0KCiAgICAgICAgcHJvdGVjdGVkIGJ5dGVbXSBnZXRCeXRl\nc0ludGVybmFsKE9iamVjdCBvYmosIEpvaW5zIGpvaW5zKQogICAgICAgICAg\nICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgaWYgKG9iaiBp\nbnN0YW5jZW9mIENvbHVtbikKICAgICAgICAgICAgICAgIHJldHVybiBfcmVz\nLmdldEJ5dGVzKChDb2x1bW4pIG9iaiwgam9pbnMpOwogICAgICAgICAgICBy\nZXR1cm4gX3Jlcy5nZXRCeXRlcyhvYmopOwogICAgICAgIH0KCiAgICAgICAg\ncHJvdGVjdGVkIENhbGVuZGFyIGdldENhbGVuZGFySW50ZXJuYWwoT2JqZWN0\nIG9iaiwgSm9pbnMgam9pbnMpCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNl\ncHRpb24gewogICAgICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgQ29sdW1u\nKQogICAgICAgICAgICAgICAgcmV0dXJuIF9yZXMuZ2V0Q2FsZW5kYXIoKENv\nbHVtbikgb2JqLCBqb2lucyk7CiAgICAgICAgICAgIHJldHVybiBfcmVzLmdl\ndENhbGVuZGFyKG9iaik7CiAgICAgICAgfQoKICAgICAgICBwcm90ZWN0ZWQg\nY2hhciBnZXRDaGFySW50ZXJuYWwoT2JqZWN0IG9iaiwgSm9pbnMgam9pbnMp\nCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAg\nICBpZiAob2JqIGluc3RhbmNlb2YgQ29sdW1uKQogICAgICAgICAgICAgICAg\ncmV0dXJuIF9yZXMuZ2V0Q2hhcigoQ29sdW1uKSBvYmosIGpvaW5zKTsKICAg\nICAgICAgICAgcmV0dXJuIF9yZXMuZ2V0Q2hhcihvYmopOwogICAgICAgIH0K\nCiAgICAgICAgcHJvdGVjdGVkIFJlYWRlciBnZXRDaGFyYWN0ZXJTdHJlYW1J\nbnRlcm5hbChPYmplY3Qgb2JqLCBKb2lucyBqb2lucykKICAgICAgICAgICAg\ndGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIGlmIChvYmogaW5z\ndGFuY2VvZiBDb2x1bW4pCiAgICAgICAgICAgICAgICByZXR1cm4gX3Jlcy5n\nZXRDaGFyYWN0ZXJTdHJlYW0oKENvbHVtbikgb2JqLCBqb2lucyk7CiAgICAg\nICAgICAgIHJldHVybiBfcmVzLmdldENoYXJhY3RlclN0cmVhbShvYmopOwog\nICAgICAgIH0KCiAgICAgICAgcHJvdGVjdGVkIENsb2IgZ2V0Q2xvYkludGVy\nbmFsKE9iamVjdCBvYmosIEpvaW5zIGpvaW5zKQogICAgICAgICAgICB0aHJv\nd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgaWYgKG9iaiBpbnN0YW5j\nZW9mIENvbHVtbikKICAgICAgICAgICAgICAgIHJldHVybiBfcmVzLmdldENs\nb2IoKENvbHVtbikgb2JqLCBqb2lucyk7CiAgICAgICAgICAgIHJldHVybiBf\ncmVzLmdldENsb2Iob2JqKTsKICAgICAgICB9CgogICAgICAgIHByb3RlY3Rl\nZCBEYXRlIGdldERhdGVJbnRlcm5hbChPYmplY3Qgb2JqLCBKb2lucyBqb2lu\ncykKICAgICAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAg\nICAgIGlmIChvYmogaW5zdGFuY2VvZiBDb2x1bW4pCiAgICAgICAgICAgICAg\nICByZXR1cm4gX3Jlcy5nZXREYXRlKChDb2x1bW4pIG9iaiwgam9pbnMpOwog\nICAgICAgICAgICByZXR1cm4gX3Jlcy5nZXREYXRlKG9iaik7CiAgICAgICAg\nfQoKICAgICAgICBwcm90ZWN0ZWQgamF2YS5zcWwuRGF0ZSBnZXREYXRlSW50\nZXJuYWwoT2JqZWN0IG9iaiwgQ2FsZW5kYXIgY2FsLAogICAgICAgICAgICBK\nb2lucyBqb2lucykKICAgICAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7\nCiAgICAgICAgICAgIGlmIChvYmogaW5zdGFuY2VvZiBDb2x1bW4pCiAgICAg\nICAgICAgICAgICByZXR1cm4gX3Jlcy5nZXREYXRlKChDb2x1bW4pIG9iaiwg\nY2FsLCBqb2lucyk7CiAgICAgICAgICAgIHJldHVybiBfcmVzLmdldERhdGUo\nb2JqLCBjYWwpOwogICAgICAgIH0KCiAgICAgICAgcHJvdGVjdGVkIGRvdWJs\nZSBnZXREb3VibGVJbnRlcm5hbChPYmplY3Qgb2JqLCBKb2lucyBqb2lucykK\nICAgICAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAg\nIGlmIChvYmogaW5zdGFuY2VvZiBDb2x1bW4pCiAgICAgICAgICAgICAgICBy\nZXR1cm4gX3Jlcy5nZXREb3VibGUoKENvbHVtbikgb2JqLCBqb2lucyk7CiAg\nICAgICAgICAgIHJldHVybiBfcmVzLmdldERvdWJsZShvYmopOwogICAgICAg\nIH0KCiAgICAgICAgcHJvdGVjdGVkIGZsb2F0IGdldEZsb2F0SW50ZXJuYWwo\nT2JqZWN0IG9iaiwgSm9pbnMgam9pbnMpCiAgICAgICAgICAgIHRocm93cyBT\nUUxFeGNlcHRpb24gewogICAgICAgICAgICBpZiAob2JqIGluc3RhbmNlb2Yg\nQ29sdW1uKQogICAgICAgICAgICAgICAgcmV0dXJuIF9yZXMuZ2V0RmxvYXQo\nKENvbHVtbikgb2JqLCBqb2lucyk7CiAgICAgICAgICAgIHJldHVybiBfcmVz\nLmdldEZsb2F0KG9iaik7CiAgICAgICAgfQoKICAgICAgICBwcm90ZWN0ZWQg\naW50IGdldEludEludGVybmFsKE9iamVjdCBvYmosIEpvaW5zIGpvaW5zKQog\nICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAg\naWYgKG9iaiBpbnN0YW5jZW9mIENvbHVtbikKICAgICAgICAgICAgICAgIHJl\ndHVybiBfcmVzLmdldEludCgoQ29sdW1uKSBvYmosIGpvaW5zKTsKICAgICAg\nICAgICAgcmV0dXJuIF9yZXMuZ2V0SW50KG9iaik7CiAgICAgICAgfQoKICAg\nICAgICBwcm90ZWN0ZWQgTG9jYWxlIGdldExvY2FsZUludGVybmFsKE9iamVj\ndCBvYmosIEpvaW5zIGpvaW5zKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhj\nZXB0aW9uIHsKICAgICAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIENvbHVt\nbikKICAgICAgICAgICAgICAgIHJldHVybiBfcmVzLmdldExvY2FsZSgoQ29s\ndW1uKSBvYmosIGpvaW5zKTsKICAgICAgICAgICAgcmV0dXJuIF9yZXMuZ2V0\nTG9jYWxlKG9iaik7CiAgICAgICAgfQoKICAgICAgICBwcm90ZWN0ZWQgbG9u\nZyBnZXRMb25nSW50ZXJuYWwoT2JqZWN0IG9iaiwgSm9pbnMgam9pbnMpCiAg\nICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBp\nZiAob2JqIGluc3RhbmNlb2YgQ29sdW1uKQogICAgICAgICAgICAgICAgcmV0\ndXJuIF9yZXMuZ2V0TG9uZygoQ29sdW1uKSBvYmosIGpvaW5zKTsKICAgICAg\nICAgICAgcmV0dXJuIF9yZXMuZ2V0TG9uZyhvYmopOwogICAgICAgIH0KCiAg\nICAgICAgcHJvdGVjdGVkIE9iamVjdCBnZXRPYmplY3RJbnRlcm5hbChPYmpl\nY3Qgb2JqLCBpbnQgbWV0YVR5cGVDb2RlLAogICAgICAgICAgICBPYmplY3Qg\nYXJnLCBKb2lucyBqb2lucykKICAgICAgICAgICAgdGhyb3dzIFNRTEV4Y2Vw\ndGlvbiB7CiAgICAgICAgICAgIGlmIChvYmogaW5zdGFuY2VvZiBDb2x1bW4p\nCiAgICAgICAgICAgICAgICByZXR1cm4gX3Jlcy5nZXRPYmplY3QoKENvbHVt\nbikgb2JqLCBhcmcsIGpvaW5zKTsKICAgICAgICAgICAgcmV0dXJuIF9yZXMu\nZ2V0T2JqZWN0KG9iaiwgbWV0YVR5cGVDb2RlLCBhcmcpOwogICAgICAgIH0K\nCiAgICAgICAgcHJvdGVjdGVkIE9iamVjdCBnZXRTUUxPYmplY3RJbnRlcm5h\nbChPYmplY3Qgb2JqLCBNYXAgbWFwLCBKb2lucyBqb2lucykKICAgICAgICAg\nICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIGlmIChvYmog\naW5zdGFuY2VvZiBDb2x1bW4pCiAgICAgICAgICAgICAgICByZXR1cm4gX3Jl\ncy5nZXRTUUxPYmplY3QoKENvbHVtbikgb2JqLCBtYXAsIGpvaW5zKTsKICAg\nICAgICAgICAgcmV0dXJuIF9yZXMuZ2V0U1FMT2JqZWN0KG9iaiwgbWFwKTsK\nICAgICAgICB9CgogICAgICAgIHByb3RlY3RlZCBSZWYgZ2V0UmVmSW50ZXJu\nYWwoT2JqZWN0IG9iaiwgTWFwIG1hcCwgSm9pbnMgam9pbnMpCiAgICAgICAg\nICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBpZiAob2Jq\nIGluc3RhbmNlb2YgQ29sdW1uKQogICAgICAgICAgICAgICAgcmV0dXJuIF9y\nZXMuZ2V0UmVmKChDb2x1bW4pIG9iaiwgbWFwLCBqb2lucyk7CiAgICAgICAg\nICAgIHJldHVybiBfcmVzLmdldFJlZihvYmosIG1hcCk7CiAgICAgICAgfQoK\nICAgICAgICBwcm90ZWN0ZWQgc2hvcnQgZ2V0U2hvcnRJbnRlcm5hbChPYmpl\nY3Qgb2JqLCBKb2lucyBqb2lucykKICAgICAgICAgICAgdGhyb3dzIFNRTEV4\nY2VwdGlvbiB7CiAgICAgICAgICAgIGlmIChvYmogaW5zdGFuY2VvZiBDb2x1\nbW4pCiAgICAgICAgICAgICAgICByZXR1cm4gX3Jlcy5nZXRTaG9ydCgoQ29s\ndW1uKSBvYmosIGpvaW5zKTsKICAgICAgICAgICAgcmV0dXJuIF9yZXMuZ2V0\nU2hvcnQob2JqKTsKICAgICAgICB9CgogICAgICAgIHByb3RlY3RlZCBTdHJp\nbmcgZ2V0U3RyaW5nSW50ZXJuYWwoT2JqZWN0IG9iaiwgSm9pbnMgam9pbnMp\nCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAg\nICBpZiAob2JqIGluc3RhbmNlb2YgQ29sdW1uKQogICAgICAgICAgICAgICAg\ncmV0dXJuIF9yZXMuZ2V0U3RyaW5nKChDb2x1bW4pIG9iaiwgam9pbnMpOwog\nICAgICAgICAgICByZXR1cm4gX3Jlcy5nZXRTdHJpbmcob2JqKTsKICAgICAg\nICB9CgogICAgICAgIHByb3RlY3RlZCBUaW1lIGdldFRpbWVJbnRlcm5hbChP\nYmplY3Qgb2JqLCBDYWxlbmRhciBjYWwsIEpvaW5zIGpvaW5zKQogICAgICAg\nICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgaWYgKG9i\naiBpbnN0YW5jZW9mIENvbHVtbikKICAgICAgICAgICAgICAgIHJldHVybiBf\ncmVzLmdldFRpbWUoKENvbHVtbikgb2JqLCBjYWwsIGpvaW5zKTsKICAgICAg\nICAgICAgcmV0dXJuIF9yZXMuZ2V0VGltZShvYmosIGNhbCk7CiAgICAgICAg\nfQoKICAgICAgICBwcm90ZWN0ZWQgVGltZXN0YW1wIGdldFRpbWVzdGFtcElu\ndGVybmFsKE9iamVjdCBvYmosIENhbGVuZGFyIGNhbCwKICAgICAgICAgICAg\nSm9pbnMgam9pbnMpCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24g\newogICAgICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgQ29sdW1uKQogICAg\nICAgICAgICAgICAgcmV0dXJuIF9yZXMuZ2V0VGltZXN0YW1wKChDb2x1bW4p\nIG9iaiwgY2FsLCBqb2lucyk7CiAgICAgICAgICAgIHJldHVybiBfcmVzLmdl\ndFRpbWVzdGFtcChvYmosIGNhbCk7CiAgICAgICAgfQogICAgfQp9Cg==\n","encoding":"base64"}

