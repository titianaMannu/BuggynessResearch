{"sha":"33a542c701c8edce64c9b55b05bdd24b09ccfe0a","node_id":"MDQ6QmxvYjIwNjM2NDozM2E1NDJjNzAxYzhlZGNlNjRjOWI1NWIwNWJkZDI0YjA5Y2NmZTBh","size":11183,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/33a542c701c8edce64c9b55b05bdd24b09ccfe0a","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLmtlcm5lbDsKCmltcG9ydCBqYXZhLnNxbC5Db25uZWN0\naW9uOwppbXBvcnQgamF2YS5zcWwuUHJlcGFyZWRTdGF0ZW1lbnQ7CmltcG9y\ndCBqYXZhLnNxbC5SZXN1bHRTZXQ7CmltcG9ydCBqYXZhLnNxbC5TUUxFeGNl\ncHRpb247CmltcG9ydCBqYXZhLnRleHQuTWVzc2FnZUZvcm1hdDsKCmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEuY29uZi5PcGVuSlBBQ29uZmlndXJhdGlv\nbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmNvbmYuSkRCQ0Nv\nbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5j\nb25mLkpEQkNDb25maWd1cmF0aW9uSW1wbDsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLm1ldGEuQ2xhc3NNYXBwaW5nOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLlNjaGVtYTsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5TY2hlbWFHcm91cDsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5TY2hlbWFUb29sOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLlNjaGVtYXM7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuU2VxdWVu\nY2U7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuREJEaWN0\naW9uYXJ5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5jb25mLkNv\nbmZpZ3VyYWJsZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29u\nZi5Db25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxp\nYi5jb25mLkNvbmZpZ3VyYXRpb25zOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmxpYi5sb2cuTG9nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxp\nYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5s\naWIudXRpbC5PcHRpb25zOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0\naWwuTWV0YURhdGFFeGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEudXRpbC5Vc2VyRXhjZXB0aW9uOwppbXBvcnQgc2VycC51dGlsLk51bWJl\ncnM7CmltcG9ydCBzZXJwLnV0aWwuU3RyaW5nczsKCi8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nCi8vIE5PVEU6IERvIG5vdCBjaGFuZ2UgcHJvcGVydHkgbmFtZXM7IHNlZSBT\nZXF1ZW5jZU1ldGFEYXRhCi8vIGFuZCBTZXF1ZW5jZU1hcHBpbmcgZm9yIHN0\nYW5kYXJkIHByb3BlcnR5IG5hbWVzLgovLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCi8qKgog\nKiB7QGxpbmsgSkRCQ1NlcX0gaW1wbGVtZW50YXRpb24gdGhhdCB1c2VzIGEg\nZGF0YWJhc2Ugc2VxdWVuY2VzCiAqIHRvIGdlbmVyYXRlIG51bWJlcnMuCiAq\nCiAqIEBzZWUgSkRCQ1NlcQogKiBAc2VlIEFic3RyYWN0SkRCQ1NlcQogKi8K\ncHVibGljIGNsYXNzIE5hdGl2ZUpEQkNTZXEKICAgIGV4dGVuZHMgQWJzdHJh\nY3RKREJDU2VxCiAgICBpbXBsZW1lbnRzIENvbmZpZ3VyYWJsZSB7CgogICAg\ncHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgQUNUSU9OX0RST1AgPSAiZHJv\ncCI7CiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBBQ1RJT05fQURE\nID0gImFkZCI7CiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBBQ1RJ\nT05fR0VUID0gImdldCI7CgogICAgcHJpdmF0ZSBzdGF0aWMgTG9jYWxpemVy\nIF9sb2MgPSBMb2NhbGl6ZXIuZm9yUGFja2FnZShOYXRpdmVKREJDU2VxLmNs\nYXNzKTsKCiAgICBwcml2YXRlIEpEQkNDb25maWd1cmF0aW9uIF9jb25mID0g\nbnVsbDsKICAgIHByaXZhdGUgU3RyaW5nIF9zZXFOYW1lID0gIk9QRU5KUEFf\nU0VRVUVOQ0UiOwogICAgcHJpdmF0ZSBpbnQgX2luY3JlbWVudCA9IDE7CiAg\nICBwcml2YXRlIGludCBfaW5pdGlhbCA9IDE7CiAgICBwcml2YXRlIGludCBf\nYWxsb2NhdGUgPSAwOwogICAgcHJpdmF0ZSBTZXF1ZW5jZSBfc2VxID0gbnVs\nbDsKICAgIHByaXZhdGUgU3RyaW5nIF9zZWxlY3QgPSBudWxsOwoKICAgIC8v\nIGZvciBkZXByZWNhdGVkIGF1dG8tY29uZmlndXJhdGlvbiBzdXBwb3J0CiAg\nICBwcml2YXRlIFN0cmluZyBfZm9ybWF0ID0gbnVsbDsKICAgIHByaXZhdGUg\nU3RyaW5nIF90YWJsZU5hbWUgPSAiRFVBTCI7CiAgICBwcml2YXRlIGJvb2xl\nYW4gX3N1YlRhYmxlID0gZmFsc2U7CgogICAgLyoqCiAgICAgKiBUaGUgc2Vx\ndWVuY2UgbmFtZS4gRGVmYXVsdHMgdG8gPGNvZGU+T1BFTkpQQV9TRVFVRU5D\nRTwvY29kZT4uCiAgICAgKi8KICAgIHB1YmxpYyBTdHJpbmcgZ2V0U2VxdWVu\nY2UoKSB7CiAgICAgICAgcmV0dXJuIF9zZXFOYW1lOwogICAgfQoKICAgIC8q\nKgogICAgICogVGhlIHNlcXVlbmNlIG5hbWUuIERlZmF1bHRzIHRvIDxjb2Rl\nPk9QRU5KUEFfU0VRVUVOQ0U8L2NvZGU+LgogICAgICovCiAgICBwdWJsaWMg\ndm9pZCBzZXRTZXF1ZW5jZShTdHJpbmcgc2VxTmFtZSkgewogICAgICAgIF9z\nZXFOYW1lID0gc2VxTmFtZTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXBy\nZWNhdGVkIFVzZSB7QGxpbmsgI3NldFNlcXVlbmNlfS4gUmV0YWluZWQgZm9y\nCiAgICAgKiBiYWNrd2FyZHMtY29tcGF0aWJpbGl0eSBmb3IgYXV0by1jb25m\naWd1cmF0aW9uLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRTZXF1ZW5j\nZU5hbWUoU3RyaW5nIHNlcU5hbWUpIHsKICAgICAgICBzZXRTZXF1ZW5jZShz\nZXFOYW1lKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBzZWUgU2VxdWVuY2Uj\nZ2V0SW5pdGlhbFZhbHVlCiAgICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0SW5p\ndGlhbFZhbHVlKCkgewogICAgICAgIHJldHVybiBfaW5pdGlhbDsKICAgIH0K\nCiAgICAvKioKICAgICAqIEBzZWUgU2VxdWVuY2Ujc2V0SW5pdGlhbFZhbHVl\nCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldEluaXRpYWxWYWx1ZShpbnQg\naW5pdGlhbCkgewogICAgICAgIF9pbml0aWFsID0gaW5pdGlhbDsKICAgIH0K\nCiAgICAvKioKICAgICAqIEBzZWUgU2VxdWVuY2UjZ2V0QWxsb2NhdGUKICAg\nICAqLwogICAgcHVibGljIGludCBnZXRBbGxvY2F0ZSgpIHsKICAgICAgICBy\nZXR1cm4gX2FsbG9jYXRlOwogICAgfQoKICAgIC8qKgogICAgICogQHNlZSBT\nZXF1ZW5jZSNzZXRBbGxvY2F0ZQogICAgICovCiAgICBwdWJsaWMgdm9pZCBz\nZXRBbGxvY2F0ZShpbnQgYWxsb2NhdGUpIHsKICAgICAgICBfYWxsb2NhdGUg\nPSBhbGxvY2F0ZTsKICAgIH0KCiAgICAvKioKICAgICAqIEBzZWUgU2VxdWVu\nY2UjZ2V0SW5jcmVtZW50CiAgICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0SW5j\ncmVtZW50KCkgewogICAgICAgIHJldHVybiBfaW5jcmVtZW50OwogICAgfQoK\nICAgIC8qKgogICAgICogQHNlZSBTZXF1ZW5jZSNzZXRJbmNyZW1lbnQKICAg\nICAqLwogICAgcHVibGljIHZvaWQgc2V0SW5jcmVtZW50KGludCBpbmNyZW1l\nbnQpIHsKICAgICAgICBfaW5jcmVtZW50ID0gaW5jcmVtZW50OwogICAgfQoK\nICAgIC8qKgogICAgICogQGRlcHJlY2F0ZWQgUmV0YWluZWQgZm9yIGJhY2t3\nYXJkcy1jb21wYXRpYmlsaXR5IGZvciBhdXRvLWNvbmZpZ3VyYXRpb24uCiAg\nICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFRhYmxlTmFtZShTdHJpbmcgdGFi\nbGUpIHsKICAgICAgICBfdGFibGVOYW1lID0gdGFibGU7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBAZGVwcmVjYXRlZCBSZXRhaW5lZCBmb3IgYmFja3dhcmRz\nLWNvbXBhdGliaWxpdHkgZm9yIGF1dG8tY29uZmlndXJhdGlvbi4KICAgICAq\nLwogICAgcHVibGljIHZvaWQgc2V0Rm9ybWF0KFN0cmluZyBmb3JtYXQpIHsK\nICAgICAgICBfZm9ybWF0ID0gZm9ybWF0OwogICAgICAgIF9zdWJUYWJsZSA9\nIHRydWU7CiAgICB9CgogICAgcHVibGljIHZvaWQgYWRkU2NoZW1hKENsYXNz\nTWFwcGluZyBtYXBwaW5nLCBTY2hlbWFHcm91cCBncm91cCkgewogICAgICAg\nIC8vIHNlcXVlbmNlIGFscmVhZHkgZXhpc3RzPwogICAgICAgIGlmIChncm91\ncC5pc0tub3duU2VxdWVuY2UoX3NlcU5hbWUpKQogICAgICAgICAgICByZXR1\ncm47CgogICAgICAgIFN0cmluZyBzY2hlbWFOYW1lID0gU3RyaW5ncy5nZXRQ\nYWNrYWdlTmFtZShfc2VxTmFtZSk7CiAgICAgICAgaWYgKHNjaGVtYU5hbWUu\nbGVuZ3RoKCkgPT0gMCkKICAgICAgICAgICAgc2NoZW1hTmFtZSA9IFNjaGVt\nYXMuZ2V0TmV3VGFibGVTY2hlbWEoX2NvbmYpOwoKICAgICAgICAvLyBjcmVh\ndGUgdGFibGUgaW4gdGhpcyBncm91cAogICAgICAgIFNjaGVtYSBzY2hlbWEg\nPSBncm91cC5nZXRTY2hlbWEoc2NoZW1hTmFtZSk7CiAgICAgICAgaWYgKHNj\naGVtYSA9PSBudWxsKQogICAgICAgICAgICBzY2hlbWEgPSBncm91cC5hZGRT\nY2hlbWEoc2NoZW1hTmFtZSk7CiAgICAgICAgc2NoZW1hLmltcG9ydFNlcXVl\nbmNlKF9zZXEpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldENvbmZpZ3Vy\nYXRpb24oQ29uZmlndXJhdGlvbiBjb25mKSB7CiAgICAgICAgX2NvbmYgPSAo\nSkRCQ0NvbmZpZ3VyYXRpb24pIGNvbmY7CiAgICB9CgogICAgcHVibGljIHZv\naWQgc3RhcnRDb25maWd1cmF0aW9uKCkgewogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIGVuZENvbmZpZ3VyYXRpb24oKSB7CiAgICAgICAgYnVpbGRTZXF1ZW5j\nZSgpOwoKICAgICAgICBEQkRpY3Rpb25hcnkgZGljdCA9IF9jb25mLmdldERC\nRGljdGlvbmFyeUluc3RhbmNlKCk7CiAgICAgICAgaWYgKF9mb3JtYXQgPT0g\nbnVsbCkgewogICAgICAgICAgICBfZm9ybWF0ID0gZGljdC5uZXh0U2VxdWVu\nY2VRdWVyeTsKICAgICAgICAgICAgaWYgKF9mb3JtYXQgPT0gbnVsbCkKICAg\nICAgICAgICAgICAgIHRocm93IG5ldyBNZXRhRGF0YUV4Y2VwdGlvbihfbG9j\nLmdldCgibm8tc2VxLXNxbCIsIF9zZXFOYW1lKSk7CiAgICAgICAgfQogICAg\nICAgIGlmIChfdGFibGVOYW1lID09IG51bGwpCiAgICAgICAgICAgIF90YWJs\nZU5hbWUgPSAiRFVBTCI7CgogICAgICAgIFN0cmluZyBuYW1lID0gZGljdC5n\nZXRGdWxsTmFtZShfc2VxKTsKICAgICAgICBPYmplY3RbXSBzdWJzID0gKF9z\ndWJUYWJsZSkgPyBuZXcgT2JqZWN0W117IG5hbWUsIF90YWJsZU5hbWUgfQog\nICAgICAgICAgICA6IG5ldyBPYmplY3RbXXsgbmFtZSB9OwogICAgICAgIF9z\nZWxlY3QgPSBNZXNzYWdlRm9ybWF0LmZvcm1hdChfZm9ybWF0LCBzdWJzKTsK\nICAgIH0KCiAgICBwcm90ZWN0ZWQgT2JqZWN0IG5leHRJbnRlcm5hbChKREJD\nU3RvcmUgc3RvcmUsIENsYXNzTWFwcGluZyBtYXBwaW5nKQogICAgICAgIHRo\ncm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIENvbm5lY3Rpb24gY29ubiA9\nIGdldENvbm5lY3Rpb24oc3RvcmUpOwogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIHJldHVybiBOdW1iZXJzLnZhbHVlT2YoZ2V0U2VxdWVuY2UoY29ubikp\nOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIGNsb3NlQ29ubmVj\ndGlvbihjb25uKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBD\ncmVhdGVzIHRoZSBzZXF1ZW5jZSBvYmplY3QuCiAgICAgKi8KICAgIHByaXZh\ndGUgdm9pZCBidWlsZFNlcXVlbmNlKCkgewogICAgICAgIFN0cmluZyBzZXFO\nYW1lID0gU3RyaW5ncy5nZXRDbGFzc05hbWUoX3NlcU5hbWUpOwogICAgICAg\nIFN0cmluZyBzY2hlbWFOYW1lID0gU3RyaW5ncy5nZXRQYWNrYWdlTmFtZShf\nc2VxTmFtZSk7CiAgICAgICAgaWYgKHNjaGVtYU5hbWUubGVuZ3RoKCkgPT0g\nMCkKICAgICAgICAgICAgc2NoZW1hTmFtZSA9IFNjaGVtYXMuZ2V0TmV3VGFi\nbGVTY2hlbWEoX2NvbmYpOwoKICAgICAgICAvLyBidWlsZCB0aGUgc2VxdWVu\nY2UgaW4gb25lIG9mIHRoZSBkZXNpZ25hdGVkIHNjaGVtYXMKICAgICAgICBT\nY2hlbWFHcm91cCBncm91cCA9IG5ldyBTY2hlbWFHcm91cCgpOwogICAgICAg\nIFNjaGVtYSBzY2hlbWEgPSBncm91cC5hZGRTY2hlbWEoc2NoZW1hTmFtZSk7\nCgogICAgICAgIF9zZXEgPSBzY2hlbWEuYWRkU2VxdWVuY2Uoc2VxTmFtZSk7\nCiAgICAgICAgX3NlcS5zZXRJbml0aWFsVmFsdWUoX2luaXRpYWwpOwogICAg\nICAgIF9zZXEuc2V0SW5jcmVtZW50KF9pbmNyZW1lbnQpOwogICAgICAgIF9z\nZXEuc2V0QWxsb2NhdGUoX2FsbG9jYXRlKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIENyZWF0ZXMgdGhlIHNlcXVlbmNlIGluIHRoZSBEQi4KICAgICAqLwog\nICAgcHVibGljIHZvaWQgcmVmcmVzaFNlcXVlbmNlKCkKICAgICAgICB0aHJv\nd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBMb2cgbG9nID0gX2NvbmYuZ2V0\nTG9nKE9wZW5KUEFDb25maWd1cmF0aW9uLkxPR19SVU5USU1FKTsKICAgICAg\nICBpZiAobG9nLmlzSW5mb0VuYWJsZWQoKSkKICAgICAgICAgICAgbG9nLmlu\nZm8oX2xvYy5nZXQoIm1ha2UtbmF0aXZlLXNlcSIpKTsKCiAgICAgICAgLy8g\nY3JlYXRlIHRoZSBzZXF1ZW5jZQogICAgICAgIFNjaGVtYVRvb2wgdG9vbCA9\nIG5ldyBTY2hlbWFUb29sKF9jb25mKTsKICAgICAgICB0b29sLnNldElnbm9y\nZUVycm9ycyh0cnVlKTsKICAgICAgICB0b29sLmNyZWF0ZVNlcXVlbmNlKF9z\nZXEpOwogICAgfQoKICAgIC8qKgogICAgICogRHJvcHMgdGhlIHNlcXVlbmNl\nIGluIHRoZSBEQi4KICAgICAqLwogICAgcHVibGljIHZvaWQgZHJvcFNlcXVl\nbmNlKCkKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBM\nb2cgbG9nID0gX2NvbmYuZ2V0TG9nKE9wZW5KUEFDb25maWd1cmF0aW9uLkxP\nR19SVU5USU1FKTsKICAgICAgICBpZiAobG9nLmlzSW5mb0VuYWJsZWQoKSkK\nICAgICAgICAgICAgbG9nLmluZm8oX2xvYy5nZXQoImRyb3AtbmF0aXZlLXNl\ncSIpKTsKCiAgICAgICAgLy8gZHJvcCB0aGUgdGFibGUKICAgICAgICBTY2hl\nbWFUb29sIHRvb2wgPSBuZXcgU2NoZW1hVG9vbChfY29uZik7CiAgICAgICAg\ndG9vbC5zZXRJZ25vcmVFcnJvcnModHJ1ZSk7CiAgICAgICAgdG9vbC5kcm9w\nU2VxdWVuY2UoX3NlcSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4g\ndGhlIG5leHQgc2VxdWVuY2UgdmFsdWUuCiAgICAgKi8KICAgIHByaXZhdGUg\nbG9uZyBnZXRTZXF1ZW5jZShDb25uZWN0aW9uIGNvbm4pCiAgICAgICAgdGhy\nb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQg\nc3RtbnQgPSBudWxsOwogICAgICAgIFJlc3VsdFNldCBycyA9IG51bGw7CiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgc3RtbnQgPSBjb25uLnByZXBhcmVT\ndGF0ZW1lbnQoX3NlbGVjdCk7CiAgICAgICAgICAgIHJzID0gc3RtbnQuZXhl\nY3V0ZVF1ZXJ5KCk7CiAgICAgICAgICAgIGlmIChycy5uZXh0KCkpCiAgICAg\nICAgICAgICAgICByZXR1cm4gcnMuZ2V0TG9uZygxKTsKCiAgICAgICAgICAg\nIC8vIG5vIHJvdyAhPwogICAgICAgICAgICB0aHJvdyBuZXcgVXNlckV4Y2Vw\ndGlvbihfbG9jLmdldCgiaW52YWxpZC1zZXEtc3FsIiwgX3NlbGVjdCkpOwog\nICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIC8vIGNsZWFuIHVwIG91\nciByZXNvdXJjZXMKICAgICAgICAgICAgaWYgKHJzICE9IG51bGwpCiAgICAg\nICAgICAgICAgICB0cnkgeyBycy5jbG9zZSgpOyB9IGNhdGNoIChTUUxFeGNl\ncHRpb24gc2UpIHt9CiAgICAgICAgICAgIGlmIChzdG1udCAhPSBudWxsKQog\nICAgICAgICAgICAgICAgdHJ5IHsgc3RtbnQuY2xvc2UoKTsgfSBjYXRjaCAo\nU1FMRXhjZXB0aW9uIHNlKSB7fQogICAgICAgIH0KICAgIH0KCiAgICAvLy8v\nLy8vLy8KICAgIC8vIE1haW4KICAgIC8vLy8vLy8vLwoKICAgIC8qKgogICAg\nICogVXNhZ2U6IGphdmEgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1h\nLk5hdGl2ZUpEQkNTZXF1ZW5jZSBbb3B0aW9uXSoKICAgICAqIC1hY3Rpb24v\nLWEgJmx0O2FkZCB8IGRyb3AgfCBnZXQmZ3Q7CiAgICAgKiAgV2hlcmUgdGhl\nIGZvbGxvd2luZyBvcHRpb25zIGFyZSByZWNvZ25pemVkLgogICAgICogPHVs\nPgogICAgICogPGxpPjxpPi1wcm9wZXJ0aWVzLy1wICZsdDtwcm9wZXJ0aWVz\nIGZpbGUgb3IgcmVzb3VyY2UmZ3Q7PC9pPjogVGhlCiAgICAgKiBwYXRoIG9y\nIHJlc291cmNlIG5hbWUgb2YgYSBPcGVuSlBBIHByb3BlcnRpZXMgZmlsZSBj\nb250YWluaW5nCiAgICAgKiBpbmZvcm1hdGlvbiBzdWNoIGFzIHRoZSBsaWNl\nbnNlIGtleQlhbmQgY29ubmVjdGlvbiBkYXRhIGFzCiAgICAgKiBvdXRsaW5l\nZCBpbiB7QGxpbmsgSkRCQ0NvbmZpZ3VyYXRpb259LiBPcHRpb25hbC48L2xp\nPgogICAgICogPGxpPjxpPi0mbHQ7cHJvcGVydHkgbmFtZSZndDsgJmx0O3By\nb3BlcnR5IHZhbHVlJmd0OzwvaT46IEFsbCBiZWFuCiAgICAgKiBwcm9wZXJ0\naWVzIG9mIHRoZSBPcGVuSlBBIHtAbGluayBKREJDQ29uZmlndXJhdGlvbn0g\nY2FuIGJlIHNldCBieQogICAgICogdXNpbmcgdGhlaXIJbmFtZXMgYW5kIHN1\ncHBseWluZyBhIHZhbHVlLiBGb3IgZXhhbXBsZToKICAgICAqIDxjb2RlPi1s\naWNlbnNlS2V5IGFkc2xmamE4M3IzbGthZGY8L2NvZGU+PC9saT4KICAgICAq\nIDwvdWw+CiAgICAgKiAgVGhlIHZhcmlvdXMgYWN0aW9ucyBhcmUgYXMgZm9s\nbG93cy4KICAgICAqIDx1bD4KICAgICAqIDxsaT48aT5hZGQ8L2k+OiBDcmVh\ndGUgdGhlIHNlcXVlbmNlLjwvbGk+CiAgICAgKiA8bGk+PGk+ZHJvcDwvaT46\nIERyb3AgdGhlIHNlcXVlbmNlLjwvbGk+CiAgICAgKiA8bGk+PGk+Z2V0PC9p\nPjogUHJpbnQgdGhlIG5leHQgc2VxdWVuY2UgdmFsdWUuPC9saT4KICAgICAq\nIDwvdWw+CiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0\ncmluZ1tdIGFyZ3MpCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAg\nICAgT3B0aW9ucyBvcHRzID0gbmV3IE9wdGlvbnMoKTsKICAgICAgICBhcmdz\nID0gb3B0cy5zZXRGcm9tQ21kTGluZShhcmdzKTsKICAgICAgICBKREJDQ29u\nZmlndXJhdGlvbiBjb25mID0gbmV3IEpEQkNDb25maWd1cmF0aW9uSW1wbCgp\nOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGlmICghcnVuKGNvbmYsIGFy\nZ3MsIG9wdHMpKQogICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxu\nKF9sb2MuZ2V0KCJuYXRpdmUtc2VxLXVzYWdlIikpOwogICAgICAgIH0gZmlu\nYWxseSB7CiAgICAgICAgICAgIGNvbmYuY2xvc2UoKTsKICAgICAgICB9CiAg\nICB9CgogICAgLyoqCiAgICAgKiBSdW4gdGhlIHRvb2wuIFJldHVybnMgZmFs\nc2UgaWYgaW52YWxpZCBvcHRpb25zIHdlcmUgZ2l2ZW4uCiAgICAgKi8KICAg\nIHB1YmxpYyBzdGF0aWMgYm9vbGVhbiBydW4oSkRCQ0NvbmZpZ3VyYXRpb24g\nY29uZiwgU3RyaW5nW10gYXJncywKICAgICAgICBPcHRpb25zIG9wdHMpCiAg\nICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgaWYgKG9wdHMuY29u\ndGFpbnNLZXkoImhlbHAiKSB8fCBvcHRzLmNvbnRhaW5zS2V5KCItaGVscCIp\nKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CgogICAgICAgIFN0cmluZyBh\nY3Rpb24gPSBvcHRzLnJlbW92ZVByb3BlcnR5KCJhY3Rpb24iLCAiYSIsIG51\nbGwpOwogICAgICAgIENvbmZpZ3VyYXRpb25zLnBvcHVsYXRlQ29uZmlndXJh\ndGlvbihjb25mLCBvcHRzKTsKICAgICAgICByZXR1cm4gcnVuKGNvbmYsIGFy\nZ3MsIGFjdGlvbik7CiAgICB9CgogICAgLyoqCiAgICAgKiBSdW4gdGhlIHRv\nb2wuIFJldHVybiBmYWxzZSBpZiBhbiBpbnZhbGlkIG9wdGlvbiB3YXMgZ2l2\nZW4uCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgYm9vbGVhbiBydW4oSkRC\nQ0NvbmZpZ3VyYXRpb24gY29uZiwgU3RyaW5nW10gYXJncywKICAgICAgICBT\ndHJpbmcgYWN0aW9uKQogICAgICAgIHRocm93cyBFeGNlcHRpb24gewogICAg\nICAgIGlmIChhcmdzLmxlbmd0aCAhPSAwKQogICAgICAgICAgICByZXR1cm4g\nZmFsc2U7CgogICAgICAgIE5hdGl2ZUpEQkNTZXEgc2VxID0gbmV3IE5hdGl2\nZUpEQkNTZXEoKTsKICAgICAgICBTdHJpbmcgcHJvcHMgPSBDb25maWd1cmF0\naW9ucy5nZXRQcm9wZXJ0aWVzKGNvbmYuZ2V0U2VxdWVuY2UoKSk7CiAgICAg\nICAgQ29uZmlndXJhdGlvbnMuY29uZmlndXJlSW5zdGFuY2Uoc2VxLCBjb25m\nLCBwcm9wcyk7CgogICAgICAgIGlmIChBQ1RJT05fRFJPUC5lcXVhbHMoYWN0\naW9uKSkKICAgICAgICAgICAgc2VxLmRyb3BTZXF1ZW5jZSgpOwogICAgICAg\nIGVsc2UgaWYgKEFDVElPTl9BREQuZXF1YWxzKGFjdGlvbikpCiAgICAgICAg\nICAgIHNlcS5yZWZyZXNoU2VxdWVuY2UoKTsKICAgICAgICBlbHNlIGlmIChB\nQ1RJT05fR0VULmVxdWFscyhhY3Rpb24pKSB7CiAgICAgICAgICAgIENvbm5l\nY3Rpb24gY29ubiA9IGNvbmYuZ2V0RGF0YVNvdXJjZTIobnVsbCkuZ2V0Q29u\nbmVjdGlvbigpOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAg\nbG9uZyBjdXIgPSBzZXEuZ2V0U2VxdWVuY2UoY29ubik7CiAgICAgICAgICAg\nICAgICBTeXN0ZW0ub3V0LnByaW50bG4oY3VyKTsKICAgICAgICAgICAgfSBm\naW5hbGx5IHsKICAgICAgICAgICAgICAgIHRyeSB7IGNvbm4uY2xvc2UoKTsg\nfSBjYXRjaCAoU1FMRXhjZXB0aW9uIHNlKSB7fQogICAgICAgICAgICB9CiAg\nICAgICAgfSBlbHNlCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAg\nICByZXR1cm4gdHJ1ZTsKICAgIH0KfQo=\n","encoding":"base64"}

