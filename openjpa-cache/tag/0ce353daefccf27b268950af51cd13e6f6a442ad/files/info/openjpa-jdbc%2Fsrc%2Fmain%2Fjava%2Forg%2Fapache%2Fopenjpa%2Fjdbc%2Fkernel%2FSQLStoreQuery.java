{"sha":"49d0f1ffc3ac3f79d7f5e1499482ba110275b5ec","node_id":"MDQ6QmxvYjIwNjM2NDo0OWQwZjFmZmMzYWMzZjc5ZDdmNWUxNDk5NDgyYmExMTAyNzViNWVj","size":9447,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/49d0f1ffc3ac3f79d7f5e1499482ba110275b5ec","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLmtlcm5lbDsKCmltcG9ydCBqYXZhLmlvLklPRXhjZXB0\naW9uOwppbXBvcnQgamF2YS5pby5TdHJlYW1Ub2tlbml6ZXI7CmltcG9ydCBq\nYXZhLmlvLlN0cmluZ1JlYWRlcjsKaW1wb3J0IGphdmEuc3FsLkNvbm5lY3Rp\nb247CmltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDsKaW1wb3J0\nIGphdmEuc3FsLlNRTEV4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5BcnJh\neUxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuQXJyYXlzOwppbXBvcnQgamF2YS51\ndGlsLkNvbGxlY3Rpb25zOwppbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9yOwpp\nbXBvcnQgamF2YS51dGlsLkxpc3Q7CgppbXBvcnQgb3JnLmFwYWNoZS5jb21t\nb25zLmxhbmcuU3RyaW5nVXRpbHM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5tZXRhLkNsYXNzTWFwcGluZzsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLm1ldGEuTWFwcGluZ1JlcG9zaXRvcnk7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLlF1ZXJ5UmVzdWx0TWFwcGlu\nZzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5EQkRpY3Rp\nb25hcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuUmVz\ndWx0U2V0UmVzdWx0OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMu\nc3FsLlNRTEJ1ZmZlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLnNxbC5TUUxFeGNlcHRpb25zOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmtlcm5lbC5BYnN0cmFjdFN0b3JlUXVlcnk7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEua2VybmVsLlF1ZXJ5Q29udGV4dDsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5rZXJuZWwuU3RvcmVRdWVyeTsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5saWIucm9wLlJhbmdlUmVzdWx0T2JqZWN0UHJvdmlkZXI7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnJvcC5SZXN1bHRPYmpl\nY3RQcm92aWRlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRp\nbC5Mb2NhbGl6ZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5D\nbGFzc01ldGFEYXRhOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwu\nVXNlckV4Y2VwdGlvbjsKCi8qKgogKiBBIFNRTCBxdWVyeS4KICoKICogQGF1\ndGhvciBBYmUgV2hpdGUKICogQG5vamF2YWRvYwogKi8KcHVibGljIGNsYXNz\nIFNRTFN0b3JlUXVlcnkKICAgIGV4dGVuZHMgQWJzdHJhY3RTdG9yZVF1ZXJ5\nIHsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6ZXIgX2xvYyA9\nIExvY2FsaXplci5mb3JQYWNrYWdlCiAgICAgICAgKFNRTFN0b3JlUXVlcnku\nY2xhc3MpOwoKICAgIHByaXZhdGUgdHJhbnNpZW50IGZpbmFsIEpEQkNTdG9y\nZSBfc3RvcmU7CgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3QgYSBxdWVyeSBt\nYW5hZ2VkIGJ5IHRoZSBnaXZlbiBjb250ZXh0LgogICAgICovCiAgICBwdWJs\naWMgU1FMU3RvcmVRdWVyeShKREJDU3RvcmUgc3RvcmUpIHsKICAgICAgICBf\nc3RvcmUgPSBzdG9yZTsKICAgIH0KCiAgICBwdWJsaWMgSkRCQ1N0b3JlIGdl\ndFN0b3JlKCkgewogICAgICAgIHJldHVybiBfc3RvcmU7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBVdGlsaXR5IG1ldGhvZCB0byBzdWJzdGl0dXRlICc/bnVt\nJyBmb3IgcGFyYW1ldGVycyBpbiB0aGUgZ2l2ZW4gU1FMCiAgICAgKiBzdGF0\nZW1lbnQsIGFuZCByZS1vcmRlciB0aGUgPGNvZGU+cGFyYW1zPC9jb2RlPiBh\ncnJheSB0byBtYXRjaAogICAgICogdGhlIG9yZGVyIG9mIHRoZSBzcGVjaWZp\nZWQgcGFyYW1ldGVycy4KICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgU3Ry\naW5nIHN1YnN0aXR1dGVQYXJhbXMoU3RyaW5nIHNxbCwgTGlzdCBwYXJhbXMp\nCiAgICAgICAgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICAvLyBpZiB0\naGVyZSdzIG5vICI/MSIgcG9zaXRpb25hbCBwYXJhbWV0ZXIsIHRoZW4gd2Ug\nZG9uJ3QgbmVlZCB0bwogICAgICAgIC8vIHBlcmZvcm0gdGhlIHBhcnNpbmcg\ncHJvY2VzcwogICAgICAgIGlmIChzcWwuaW5kZXhPZigiPzEiKSA9PSAtMSkK\nICAgICAgICAgICAgcmV0dXJuIHNxbDsKCiAgICAgICAgTGlzdCBwYXJhbU9y\nZGVyID0gbmV3IEFycmF5TGlzdCgpOwogICAgICAgIFN0cmVhbVRva2VuaXpl\nciB0b2sgPSBuZXcgU3RyZWFtVG9rZW5pemVyKG5ldyBTdHJpbmdSZWFkZXIo\nc3FsKSk7CiAgICAgICAgdG9rLnJlc2V0U3ludGF4KCk7CiAgICAgICAgdG9r\nLnF1b3RlQ2hhcignXCcnKTsKICAgICAgICB0b2sud29yZENoYXJzKCcwJywg\nJzknKTsKICAgICAgICB0b2sud29yZENoYXJzKCc/JywgJz8nKTsKCiAgICAg\nICAgU3RyaW5nQnVmZmVyIGJ1ZiA9IG5ldyBTdHJpbmdCdWZmZXIoc3FsLmxl\nbmd0aCgpKTsKICAgICAgICBmb3IgKGludCB0dHlwZTsgKHR0eXBlID0gdG9r\nLm5leHRUb2tlbigpKSAhPSBTdHJlYW1Ub2tlbml6ZXIuVFRfRU9GOykgewog\nICAgICAgICAgICBzd2l0Y2ggKHR0eXBlKSB7CiAgICAgICAgICAgICAgICBj\nYXNlIFN0cmVhbVRva2VuaXplci5UVF9XT1JEOgogICAgICAgICAgICAgICAg\nICAgIC8vIGEgdG9rZW4gaXMgYSBwb3NpdGlvbmFsIHBhcmFtZXRlciBpZiBp\ndCBzdGFydHMgd2l0aAogICAgICAgICAgICAgICAgICAgIC8vIGEgIj8iIGFu\nZCB0aGUgcmVzdCBvZiB0aGUgdG9rZW4gYXJlIGFsbCBudW1iZXJzCiAgICAg\nICAgICAgICAgICAgICAgaWYgKHRvay5zdmFsLnN0YXJ0c1dpdGgoIj8iKSAm\nJiB0b2suc3ZhbC5sZW5ndGgoKSA+IDEgJiYKICAgICAgICAgICAgICAgICAg\nICAgICAgdG9rLnN2YWwuc3Vic3RyaW5nKDEpLmluZGV4T2YoIj8iKSA9PSAt\nMSkgewogICAgICAgICAgICAgICAgICAgICAgICBidWYuYXBwZW5kKCI/Iik7\nCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtT3JkZXIuYWRkKEludGVn\nZXIudmFsdWVPZih0b2suc3ZhbC5zdWJzdHJpbmcoMSkpKTsKICAgICAgICAg\nICAgICAgICAgICB9IGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgYnVm\nLmFwcGVuZCh0b2suc3ZhbCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7\nCiAgICAgICAgICAgICAgICBjYXNlJ1wnJzoKICAgICAgICAgICAgICAgICAg\nICBidWYuYXBwZW5kKCdcJycpOwogICAgICAgICAgICAgICAgICAgIGlmICh0\nb2suc3ZhbCAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJ1\nZi5hcHBlbmQodG9rLnN2YWwpOwogICAgICAgICAgICAgICAgICAgICAgICBi\ndWYuYXBwZW5kKCdcJycpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAg\nICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGRlZmF1bHQ6\nCiAgICAgICAgICAgICAgICAgICAgYnVmLmFwcGVuZCgoY2hhcikgdHR5cGUp\nOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBub3cgZ28g\ndGhyb3VnaCB0aGUgcGFyYW1PcmRlciBsaXN0IGFuZCByZS1vcmRlciB0aGUg\ncGFyYW1zIGFycmF5CiAgICAgICAgTGlzdCB0cmFuc2xhdGVkID0gbmV3IEFy\ncmF5TGlzdCgpOwogICAgICAgIGZvciAoSXRlcmF0b3IgaSA9IHBhcmFtT3Jk\nZXIuaXRlcmF0b3IoKTsgaS5oYXNOZXh0KCk7KSB7CiAgICAgICAgICAgIGlu\ndCBpbmRleCA9ICgoTnVtYmVyKSBpLm5leHQoKSkuaW50VmFsdWUoKSAtIDE7\nCiAgICAgICAgICAgIGlmIChpbmRleCA+PSBwYXJhbXMuc2l6ZSgpKQogICAg\nICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFeGNlcHRpb24oX2xvYy5nZXQo\nInNxbHF1ZXJ5LW1pc3NpbmctcGFyYW1zIiwKICAgICAgICAgICAgICAgICAg\nICBzcWwsIFN0cmluZy52YWx1ZU9mKGluZGV4KSwgcGFyYW1zKSk7CiAgICAg\nICAgICAgIHRyYW5zbGF0ZWQuYWRkKHBhcmFtcy5nZXQoaW5kZXgpKTsKICAg\nICAgICB9CgogICAgICAgIC8vIHRyYW5zZmVyIHRoZSB0cmFuc2xhdGVkIGxp\nc3QgaW50byB0aGUgb3JpZ2luYWwgcGFyYW1zIGxpc3QKICAgICAgICBwYXJh\nbXMuY2xlYXIoKTsKICAgICAgICBwYXJhbXMuYWRkQWxsKHRyYW5zbGF0ZWQp\nOwogICAgICAgIHJldHVybiBidWYudG9TdHJpbmcoKTsKICAgIH0KCiAgICBw\ndWJsaWMgYm9vbGVhbiBzdXBwb3J0c1BhcmFtZXRlckRlY2xhcmF0aW9ucygp\nIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgcHVibGljIGJv\nb2xlYW4gc3VwcG9ydHNEYXRhU3RvcmVFeGVjdXRpb24oKSB7CiAgICAgICAg\ncmV0dXJuIHRydWU7CiAgICB9CgogICAgcHVibGljIEV4ZWN1dG9yIG5ld0Rh\ndGFTdG9yZUV4ZWN1dG9yKENsYXNzTWV0YURhdGEgbWV0YSwKICAgICAgICBi\nb29sZWFuIHN1YmNsYXNzZXMpIHsKICAgICAgICByZXR1cm4gbmV3IFNRTEV4\nZWN1dG9yKHRoaXMsIG1ldGEpOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFu\nIHJlcXVpcmVzQ2FuZGlkYXRlVHlwZSgpIHsKICAgICAgICByZXR1cm4gZmFs\nc2U7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gcmVxdWlyZXNQYXJhbWV0\nZXJEZWNsYXJhdGlvbnMoKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAg\nfQoKICAgIC8qKgogICAgICogRXhlY3V0ZXMgdGhlIGZpbHRlciBhcyBhIFNR\nTCBxdWVyeS4KICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgY2xhc3MgU1FM\nRXhlY3V0b3IKICAgICAgICBleHRlbmRzIEFic3RyYWN0RXhlY3V0b3IgewoK\nICAgICAgICBwcml2YXRlIGZpbmFsIENsYXNzTWV0YURhdGEgX21ldGE7CiAg\nICAgICAgcHJpdmF0ZSBmaW5hbCBib29sZWFuIF9zZWxlY3Q7CiAgICAgICAg\ncHJpdmF0ZSBmaW5hbCBRdWVyeVJlc3VsdE1hcHBpbmcgX3Jlc3VsdE1hcHBp\nbmc7CgogICAgICAgIHB1YmxpYyBTUUxFeGVjdXRvcihTUUxTdG9yZVF1ZXJ5\nIHEsIENsYXNzTWV0YURhdGEgY2FuZGlkYXRlKSB7CiAgICAgICAgICAgIFF1\nZXJ5Q29udGV4dCBjdHggPSBxLmdldENvbnRleHQoKTsKICAgICAgICAgICAg\nU3RyaW5nIHJlc3VsdE1hcHBpbmcgPSBjdHguZ2V0UmVzdWx0TWFwcGluZ05h\nbWUoKTsKICAgICAgICAgICAgaWYgKHJlc3VsdE1hcHBpbmcgPT0gbnVsbCkK\nICAgICAgICAgICAgICAgIF9yZXN1bHRNYXBwaW5nID0gbnVsbDsKICAgICAg\nICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBDbGFzc0xvYWRlciBlbnZM\nb2FkZXIgPSBjdHguZ2V0U3RvcmVDb250ZXh0KCkuZ2V0Q2xhc3NMb2FkZXIo\nKTsKICAgICAgICAgICAgICAgIE1hcHBpbmdSZXBvc2l0b3J5IHJlcG9zID0g\ncS5nZXRTdG9yZSgpLmdldENvbmZpZ3VyYXRpb24oKS4KICAgICAgICAgICAg\nICAgICAgICBnZXRNYXBwaW5nUmVwb3NpdG9yeUluc3RhbmNlKCk7CiAgICAg\nICAgICAgICAgICBfcmVzdWx0TWFwcGluZyA9IHJlcG9zLmdldFF1ZXJ5UmVz\ndWx0TWFwcGluZwogICAgICAgICAgICAgICAgICAgIChjdHguZ2V0UmVzdWx0\nTWFwcGluZ1Njb3BlKCksIHJlc3VsdE1hcHBpbmcsIGVudkxvYWRlciwKICAg\nICAgICAgICAgICAgICAgICAgICAgdHJ1ZSk7CiAgICAgICAgICAgIH0KICAg\nICAgICAgICAgX21ldGEgPSBjYW5kaWRhdGU7CgogICAgICAgICAgICBTdHJp\nbmcgc3FsID0gU3RyaW5nVXRpbHMudHJpbVRvTnVsbChjdHguZ2V0UXVlcnlT\ndHJpbmcoKSk7CiAgICAgICAgICAgIGlmIChzcWwgPT0gbnVsbCkKICAgICAg\nICAgICAgICAgIHRocm93IG5ldyBVc2VyRXhjZXB0aW9uKF9sb2MuZ2V0KCJu\nby1zcWwiKSk7CiAgICAgICAgICAgIF9zZWxlY3QgPSBzcWwubGVuZ3RoKCkg\nPiA2CiAgICAgICAgICAgICAgICAmJiBzcWwuc3Vic3RyaW5nKDAsIDYpLmVx\ndWFsc0lnbm9yZUNhc2UoInNlbGVjdCIpOwogICAgICAgIH0KCiAgICAgICAg\ncHVibGljIFJlc3VsdE9iamVjdFByb3ZpZGVyIGV4ZWN1dGVRdWVyeShTdG9y\nZVF1ZXJ5IHEsCiAgICAgICAgICAgIE9iamVjdFtdIHBhcmFtcywgUmFuZ2Ug\ncmFuZ2UpIHsKICAgICAgICAgICAgSkRCQ1N0b3JlIHN0b3JlID0gKChTUUxT\ndG9yZVF1ZXJ5KSBxKS5nZXRTdG9yZSgpOwogICAgICAgICAgICBEQkRpY3Rp\nb25hcnkgZGljdCA9IHN0b3JlLmdldERCRGljdGlvbmFyeSgpOwogICAgICAg\nICAgICBTdHJpbmcgc3FsID0gcS5nZXRDb250ZXh0KCkuZ2V0UXVlcnlTdHJp\nbmcoKTsKCiAgICAgICAgICAgIExpc3QgcGFyYW1MaXN0OwogICAgICAgICAg\nICBpZiAocGFyYW1zLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIHBh\ncmFtTGlzdCA9IG5ldyBBcnJheUxpc3QoQXJyYXlzLmFzTGlzdChwYXJhbXMp\nKTsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAg\nc3FsID0gc3Vic3RpdHV0ZVBhcmFtcyhzcWwsIHBhcmFtTGlzdCk7CiAgICAg\nICAgICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBpb2UpIHsKICAgICAg\nICAgICAgICAgICAgICB0aHJvdyBuZXcgVXNlckV4Y2VwdGlvbihpb2UpOwog\nICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UKICAgICAgICAg\nICAgICAgIHBhcmFtTGlzdCA9IENvbGxlY3Rpb25zLkVNUFRZX0xJU1Q7Cgog\nICAgICAgICAgICBTUUxCdWZmZXIgYnVmID0gbmV3IFNRTEJ1ZmZlcihkaWN0\nKS5hcHBlbmQoc3FsKTsKICAgICAgICAgICAgQ29ubmVjdGlvbiBjb25uID0g\nc3RvcmUuZ2V0Q29ubmVjdGlvbigpOwogICAgICAgICAgICBKREJDRmV0Y2hD\nb25maWd1cmF0aW9uIGZldGNoID0gKEpEQkNGZXRjaENvbmZpZ3VyYXRpb24p\nCiAgICAgICAgICAgICAgICBxLmdldENvbnRleHQoKS5nZXRGZXRjaENvbmZp\nZ3VyYXRpb24oKTsKCiAgICAgICAgICAgIFJlc3VsdE9iamVjdFByb3ZpZGVy\nIHJvcDsKICAgICAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtbnQgPSBu\ndWxsOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgLy8gdXNl\nIHRoZSByaWdodCBtZXRob2QgZGVwZW5kaW5nIG9uIHNlbCB2cy4gcHJvYywg\nbHJzIHNldHRpbmcKICAgICAgICAgICAgICAgIGlmIChfc2VsZWN0ICYmICFy\nYW5nZS5scnMpCiAgICAgICAgICAgICAgICAgICAgc3RtbnQgPSBidWYucHJl\ncGFyZVN0YXRlbWVudChjb25uKTsKICAgICAgICAgICAgICAgIGVsc2UgaWYg\nKF9zZWxlY3QpCiAgICAgICAgICAgICAgICAgICAgc3RtbnQgPSBidWYucHJl\ncGFyZVN0YXRlbWVudChjb25uLCBmZXRjaCwgLTEsIC0xKTsKICAgICAgICAg\nICAgICAgIGVsc2UgaWYgKCFyYW5nZS5scnMpCiAgICAgICAgICAgICAgICAg\nICAgc3RtbnQgPSBidWYucHJlcGFyZUNhbGwoY29ubik7CiAgICAgICAgICAg\nICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgc3RtbnQgPSBidWYucHJl\ncGFyZUNhbGwoY29ubiwgZmV0Y2gsIC0xLCAtMSk7CgogICAgICAgICAgICAg\nICAgaW50IGluZGV4ID0gMDsKICAgICAgICAgICAgICAgIGZvciAoSXRlcmF0\nb3IgaSA9IHBhcmFtTGlzdC5pdGVyYXRvcigpOyBpLmhhc05leHQoKTspCiAg\nICAgICAgICAgICAgICAgICAgZGljdC5zZXRVbmtub3duKHN0bW50LCArK2lu\nZGV4LCBpLm5leHQoKSwgbnVsbCk7CgogICAgICAgICAgICAgICAgUmVzdWx0\nU2V0UmVzdWx0IHJlcyA9IG5ldyBSZXN1bHRTZXRSZXN1bHQoY29ubiwgc3Rt\nbnQsCiAgICAgICAgICAgICAgICAgICAgc3RtbnQuZXhlY3V0ZVF1ZXJ5KCks\nIHN0b3JlKTsKICAgICAgICAgICAgICAgIGlmIChfcmVzdWx0TWFwcGluZyAh\nPSBudWxsKQogICAgICAgICAgICAgICAgICAgIHJvcCA9IG5ldyBNYXBwZWRR\ndWVyeVJlc3VsdE9iamVjdFByb3ZpZGVyKF9yZXN1bHRNYXBwaW5nLAogICAg\nICAgICAgICAgICAgICAgICAgICBzdG9yZSwgZmV0Y2gsIHJlcyk7CiAgICAg\nICAgICAgICAgICBlbHNlIGlmIChxLmdldENvbnRleHQoKS5nZXRDYW5kaWRh\ndGVUeXBlKCkgIT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICByb3AgPSBu\nZXcgR2VuZXJpY1Jlc3VsdE9iamVjdFByb3ZpZGVyKChDbGFzc01hcHBpbmcp\nIF9tZXRhLAogICAgICAgICAgICAgICAgICAgICAgICBzdG9yZSwgZmV0Y2gs\nIHJlcyk7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAg\nICAgcm9wID0gbmV3IFNRTFByb2plY3Rpb25SZXN1bHRPYmplY3RQcm92aWRl\ncihzdG9yZSwgZmV0Y2gsCiAgICAgICAgICAgICAgICAgICAgICAgIHJlcywg\ncS5nZXRDb250ZXh0KCkuZ2V0UmVzdWx0VHlwZSgpKTsKICAgICAgICAgICAg\nfSBjYXRjaCAoU1FMRXhjZXB0aW9uIHNlKSB7CiAgICAgICAgICAgICAgICBp\nZiAoc3RtbnQgIT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICB0cnkgeyBz\ndG1udC5jbG9zZSgpOyB9IGNhdGNoIChTUUxFeGNlcHRpb24gc2UyKSB7fQog\nICAgICAgICAgICAgICAgdHJ5IHsgY29ubi5jbG9zZSgpOyB9IGNhdGNoIChT\nUUxFeGNlcHRpb24gc2UyKSB7fQogICAgICAgICAgICAgICAgdGhyb3cgU1FM\nRXhjZXB0aW9ucy5nZXRTdG9yZShzZSwgZGljdCk7CiAgICAgICAgICAgIH0K\nCiAgICAgICAgICAgIGlmIChyYW5nZS5zdGFydCAhPSAwIHx8IHJhbmdlLmVu\nZCAhPSBMb25nLk1BWF9WQUxVRSkKICAgICAgICAgICAgICAgIHJvcCA9IG5l\ndyBSYW5nZVJlc3VsdE9iamVjdFByb3ZpZGVyKHJvcCwgcmFuZ2Uuc3RhcnQs\ncmFuZ2UuZW5kKTsKICAgICAgICAgICAgcmV0dXJuIHJvcDsKICAgICAgICB9\nCgogICAgICAgIHB1YmxpYyBTdHJpbmdbXSBnZXREYXRhU3RvcmVBY3Rpb25z\nKFN0b3JlUXVlcnkgcSwgT2JqZWN0W10gcGFyYW1zLAogICAgICAgICAgICBS\nYW5nZSByYW5nZSkgewogICAgICAgICAgICByZXR1cm4gbmV3IFN0cmluZ1td\neyBxLmdldENvbnRleHQoKS5nZXRRdWVyeVN0cmluZygpIH07CiAgICAgICAg\nfQoKICAgICAgICBwdWJsaWMgYm9vbGVhbiBpc1BhY2tpbmcoU3RvcmVRdWVy\neSBxKSB7CiAgICAgICAgICAgIHJldHVybiBxLmdldENvbnRleHQoKS5nZXRD\nYW5kaWRhdGVUeXBlKCkgPT0gbnVsbDsKICAgICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

