{"sha":"299f7792690d2b5cc49f64610fa9d4afdc20b792","node_id":"MDQ6QmxvYjIwNjM2NDoyOTlmNzc5MjY5MGQyYjVjYzQ5ZjY0NjEwZmE5ZDRhZmRjMjBiNzky","size":4330,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/299f7792690d2b5cc49f64610fa9d4afdc20b792","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLmtlcm5lbDsKCmltcG9ydCBqYXZhLnNxbC5TUUxFeGNl\ncHRpb247CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlJl\nc3VsdDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5TUUxF\neGNlcHRpb25zOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3Fs\nLlNlbGVjdDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5T\nZWxlY3RFeGVjdXRvcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIu\ncm9wLlJlc3VsdE9iamVjdFByb3ZpZGVyOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnV0aWwuU3RvcmVFeGNlcHRpb247CgovKioKICogQWJzdHJhY3Qg\ncHJvdmlkZXIgaW1wbGVtZW50YXRpb24gd3JhcHBlZCBhcm91bmQgYSB7QGxp\nbmsgU2VsZWN0fS4KICoKICogQGF1dGhvciBBYmUgV2hpdGUKICogQG5vamF2\nYWRvYwogKi8KcHVibGljIGFic3RyYWN0IGNsYXNzIFNlbGVjdFJlc3VsdE9i\namVjdFByb3ZpZGVyCiAgICBpbXBsZW1lbnRzIFJlc3VsdE9iamVjdFByb3Zp\nZGVyIHsKCiAgICBwcml2YXRlIGZpbmFsIFNlbGVjdEV4ZWN1dG9yIF9zZWw7\nCiAgICBwcml2YXRlIGZpbmFsIEpEQkNTdG9yZSBfc3RvcmU7CiAgICBwcml2\nYXRlIGZpbmFsIEpEQkNGZXRjaENvbmZpZ3VyYXRpb24gX2ZldGNoOwogICAg\ncHJpdmF0ZSBSZXN1bHQgX3JlcyA9IG51bGw7CiAgICBwcml2YXRlIGludCBf\nc2l6ZSA9IC0xOwogICAgcHJpdmF0ZSBCb29sZWFuIF9yYSA9IG51bGw7Cgog\nICAgLyoqCiAgICAgKiBDb25zdHJ1Y3Rvci4KICAgICAqCiAgICAgKiBAcGFy\nYW0gc2VsIHRoZSBzZWxlY3QgdG8gZXhlY3V0ZQogICAgICogQHBhcmFtIHN0\nb3JlIHRoZSBzdG9yZSB0byBkZWxlZ2F0ZSBsb2FkaW5nIHRvCiAgICAgKiBA\ncGFyYW0gZmV0Y2ggdGhlIGZldGNoIGNvbmZpZ3VyYXRpb24sIG9yIG51bGwg\nZm9yIHRoZSBkZWZhdWx0CiAgICAgKi8KICAgIHB1YmxpYyBTZWxlY3RSZXN1\nbHRPYmplY3RQcm92aWRlcihTZWxlY3RFeGVjdXRvciBzZWwsIEpEQkNTdG9y\nZSBzdG9yZSwKICAgICAgICBKREJDRmV0Y2hDb25maWd1cmF0aW9uIGZldGNo\nKSB7CiAgICAgICAgX3NlbCA9IHNlbDsKICAgICAgICBfc3RvcmUgPSBzdG9y\nZTsKICAgICAgICBfZmV0Y2ggPSBmZXRjaDsKICAgIH0KCiAgICBwdWJsaWMg\nU2VsZWN0RXhlY3V0b3IgZ2V0U2VsZWN0KCkgewogICAgICAgIHJldHVybiBf\nc2VsOwogICAgfQoKICAgIHB1YmxpYyBKREJDU3RvcmUgZ2V0U3RvcmUoKSB7\nCiAgICAgICAgcmV0dXJuIF9zdG9yZTsKICAgIH0KCiAgICBwdWJsaWMgSkRC\nQ0ZldGNoQ29uZmlndXJhdGlvbiBnZXRGZXRjaENvbmZpZ3VyYXRpb24oKSB7\nCiAgICAgICAgcmV0dXJuIF9mZXRjaDsKICAgIH0KCiAgICBwdWJsaWMgUmVz\ndWx0IGdldFJlc3VsdCgpIHsKICAgICAgICByZXR1cm4gX3JlczsKICAgIH0K\nCiAgICBwdWJsaWMgYm9vbGVhbiBzdXBwb3J0c1JhbmRvbUFjY2VzcygpIHsK\nICAgICAgICBpZiAoX3JhID09IG51bGwpIHsKICAgICAgICAgICAgYm9vbGVh\nbiByYTsKICAgICAgICAgICAgaWYgKF9yZXMgIT0gbnVsbCkgewogICAgICAg\nICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByYSA9IF9yZXMu\nc3VwcG9ydHNSYW5kb21BY2Nlc3MoKTsKICAgICAgICAgICAgICAgIH0gY2F0\nY2ggKFNRTEV4Y2VwdGlvbiBzZSkgewogICAgICAgICAgICAgICAgICAgIHRo\ncm93IFNRTEV4Y2VwdGlvbnMuZ2V0U3RvcmUoc2UsIF9zdG9yZS5nZXREQkRp\nY3Rpb25hcnkoKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0g\nZWxzZQogICAgICAgICAgICAgICAgcmEgPSBfc2VsLnN1cHBvcnRzUmFuZG9t\nQWNjZXNzKF9mZXRjaC5nZXRSZWFkTG9ja0xldmVsKCkgPiAwKTsKICAgICAg\nICAgICAgX3JhID0gKHJhKSA/IEJvb2xlYW4uVFJVRSA6IEJvb2xlYW4uRkFM\nU0U7CiAgICAgICAgfQogICAgICAgIHJldHVybiBfcmEuYm9vbGVhblZhbHVl\nKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgb3BlbigpCiAgICAgICAgdGhy\nb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgX3JlcyA9IF9zZWwuZXhlY3V0\nZShfc3RvcmUsIF9mZXRjaCk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4g\nbmV4dCgpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAg\ncmV0dXJuIF9yZXMubmV4dCgpOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFu\nIGFic29sdXRlKGludCBwb3MpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlv\nbiB7CiAgICAgICAgcmV0dXJuIF9yZXMuYWJzb2x1dGUocG9zKTsKICAgIH0K\nCiAgICBwdWJsaWMgaW50IHNpemUoKQogICAgICAgIHRocm93cyBTUUxFeGNl\ncHRpb24gewogICAgICAgIGlmIChfc2l6ZSA9PSAtMSkgewogICAgICAgICAg\nICAvLyBpZiByZXMgaXMgbnVsbCwgZG9uJ3QgY2FjaGUgc2l6ZQogICAgICAg\nICAgICBpZiAoX3JlcyA9PSBudWxsKQogICAgICAgICAgICAgICAgcmV0dXJu\nIEludGVnZXIuTUFYX1ZBTFVFOwoKICAgICAgICAgICAgc3dpdGNoIChfZmV0\nY2guZ2V0TFJTU2l6ZSgpKSB7CiAgICAgICAgICAgICAgICBjYXNlIExSU1Np\nemVzLlNJWkVfVU5LTk9XTjoKICAgICAgICAgICAgICAgICAgICBfc2l6ZSA9\nIEludGVnZXIuTUFYX1ZBTFVFOwogICAgICAgICAgICAgICAgICAgIGJyZWFr\nOwogICAgICAgICAgICAgICAgY2FzZSBMUlNTaXplcy5TSVpFX0xBU1Q6CiAg\nICAgICAgICAgICAgICAgICAgaWYgKHN1cHBvcnRzUmFuZG9tQWNjZXNzKCkp\nCiAgICAgICAgICAgICAgICAgICAgICAgIF9zaXplID0gX3Jlcy5zaXplKCk7\nCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAg\nICAgICBfc2l6ZSA9IEludGVnZXIuTUFYX1ZBTFVFOwogICAgICAgICAgICAg\nICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgZGVmYXVsdDogLy8gcXVl\ncnkKICAgICAgICAgICAgICAgICAgICBfc2l6ZSA9IF9zZWwuZ2V0Q291bnQo\nX3N0b3JlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1\ncm4gX3NpemU7CiAgICB9CgogICAgLyoqCiAgICAgKiBBbGxvdyBzdWJjbGFz\nc2VzIHRoYXQga25vdyB0aGUgc2l6ZSB0byBzZXQgaXQ7IG90aGVyd2lzZSB3\nZSBjYWxjdWxhdGUKICAgICAqIGl0IGludGVybmFsbHkuCiAgICAgKi8KICAg\nIHByb3RlY3RlZCB2b2lkIHNldFNpemUoaW50IHNpemUpIHsKICAgICAgICBp\nZiAoX3NpemUgPT0gLTEpCiAgICAgICAgICAgIF9zaXplID0gc2l6ZTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCByZXNldCgpCiAgICAgICAgdGhyb3dzIFNR\nTEV4Y2VwdGlvbiB7CiAgICAgICAgY2xvc2UoKTsKICAgICAgICBvcGVuKCk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgY2xvc2UoKSB7CiAgICAgICAgaWYg\nKF9yZXMgIT0gbnVsbCkgewogICAgICAgICAgICBfcmVzLmNsb3NlKCk7CiAg\nICAgICAgICAgIF9yZXMgPSBudWxsOwogICAgICAgIH0KICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBoYW5kbGVDaGVja2VkRXhjZXB0aW9uKEV4Y2VwdGlvbiBl\nKSB7CiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBTUUxFeGNlcHRpb24pCiAg\nICAgICAgICAgIHRocm93IFNRTEV4Y2VwdGlvbnMuZ2V0U3RvcmUoKFNRTEV4\nY2VwdGlvbikgZSwKICAgICAgICAgICAgICAgIF9zdG9yZS5nZXREQkRpY3Rp\nb25hcnkoKSk7CiAgICAgICAgdGhyb3cgbmV3IFN0b3JlRXhjZXB0aW9uKGUp\nOwogICAgfQp9Cg==\n","encoding":"base64"}

