{"sha":"fae830351f71b03dc807a446ddc973be9d22a6ca","node_id":"MDQ6QmxvYjIwNjM2NDpmYWU4MzAzNTFmNzFiMDNkYzgwN2E0NDZkZGM5NzNiZTlkMjJhNmNh","size":5084,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/fae830351f71b03dc807a446ddc973be9d22a6ca","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLmtlcm5lbC5leHBzOwoKaW1wb3J0IGphdmEuc3FsLlNR\nTEV4Y2VwdGlvbjsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5t\nZXRhLkNsYXNzTWFwcGluZzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5q\nZGJjLm1ldGEuSmF2YVNRTFR5cGVzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmpkYmMuc3FsLlJlc3VsdDsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5qZGJjLnNxbC5TUUxCdWZmZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5zcWwuU2VsZWN0OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmtlcm5lbC5GaWx0ZXJzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtl\ncm5lbC5leHBzLkV4cHJlc3Npb25WaXNpdG9yOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLm1ldGEuQ2xhc3NNZXRhRGF0YTsKCi8qKgogKiBBZ2dyZWdh\ndGUgbGlzdGVuZXIgdGhhdCBldmFsdWF0ZXMgdG8gYSB2YWx1ZS4KICoKICog\nQGF1dGhvciBBYmUgV2hpdGUKICovCmNsYXNzIEFnZ3JlZ2F0ZQogICAgZXh0\nZW5kcyBBYnN0cmFjdFZhbCB7CgogICAgcHJpdmF0ZSBmaW5hbCBKREJDQWdn\ncmVnYXRlTGlzdGVuZXIgX2xpc3RlbmVyOwogICAgcHJpdmF0ZSBmaW5hbCBW\nYWwgX2FyZzsKICAgIHByaXZhdGUgZmluYWwgQ2xhc3NNYXBwaW5nIF9jYW5k\naWRhdGU7CiAgICBwcml2YXRlIENsYXNzTWV0YURhdGEgX21ldGEgPSBudWxs\nOwogICAgcHJpdmF0ZSBDbGFzcyBfY2FzdCA9IG51bGw7CgogICAgLyoqCiAg\nICAgKiBDb25zdHJ1Y3Rvci4KICAgICAqLwogICAgcHVibGljIEFnZ3JlZ2F0\nZShKREJDQWdncmVnYXRlTGlzdGVuZXIgbGlzdGVuZXIsIFZhbCBhcmcsCiAg\nICAgICAgQ2xhc3NNYXBwaW5nIGNhbmRpZGF0ZSkgewogICAgICAgIF9saXN0\nZW5lciA9IGxpc3RlbmVyOwogICAgICAgIF9hcmcgPSBhcmc7CiAgICAgICAg\nX2NhbmRpZGF0ZSA9IGNhbmRpZGF0ZTsKICAgIH0KCiAgICBwdWJsaWMgQ2xh\nc3NNZXRhRGF0YSBnZXRNZXRhRGF0YSgpIHsKICAgICAgICByZXR1cm4gX21l\ndGE7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0TWV0YURhdGEoQ2xhc3NN\nZXRhRGF0YSBtZXRhKSB7CiAgICAgICAgX21ldGEgPSBtZXRhOwogICAgfQoK\nICAgIHB1YmxpYyBib29sZWFuIGlzQWdncmVnYXRlKCkgewogICAgICAgIHJl\ndHVybiB0cnVlOwogICAgfQoKICAgIHB1YmxpYyBDbGFzcyBnZXRUeXBlKCkg\newogICAgICAgIGlmIChfY2FzdCAhPSBudWxsKQogICAgICAgICAgICByZXR1\ncm4gX2Nhc3Q7CiAgICAgICAgcmV0dXJuIF9saXN0ZW5lci5nZXRUeXBlKGdl\ndEFyZ1R5cGVzKCkpOwogICAgfQoKICAgIHByaXZhdGUgQ2xhc3NbXSBnZXRB\ncmdUeXBlcygpIHsKICAgICAgICBpZiAoX2FyZyA9PSBudWxsKQogICAgICAg\nICAgICByZXR1cm4gbnVsbDsKICAgICAgICBpZiAoX2FyZyBpbnN0YW5jZW9m\nIEFyZ3MpCiAgICAgICAgICAgIHJldHVybiAoKEFyZ3MpIF9hcmcpLmdldFR5\ncGVzKCk7CiAgICAgICAgcmV0dXJuIG5ldyBDbGFzc1tdeyBfYXJnLmdldFR5\ncGUoKSB9OwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldEltcGxpY2l0VHlw\nZShDbGFzcyB0eXBlKSB7CiAgICAgICAgX2Nhc3QgPSB0eXBlOwogICAgfQoK\nICAgIHB1YmxpYyBFeHBTdGF0ZSBpbml0aWFsaXplKFNlbGVjdCBzZWwsIEV4\ncENvbnRleHQgY3R4LCBpbnQgZmxhZ3MpIHsKICAgICAgICBpZiAoX2FyZyA9\nPSBudWxsKQogICAgICAgICAgICByZXR1cm4gRXhwU3RhdGUuTlVMTDsKCiAg\nICAgICAgLy8gbm90ZSB0aGF0IHdlIHRlbGwgdGFyZ2V0cyBhbmQgYXJncyB0\nbyBleHRlbnNpb25zIHRoYXQgYXJlIHNxbAogICAgICAgIC8vIHBhdGhzIHRv\nIGdvIGFoZWFkIGFuZCBqb2luIHRvIHRoZWlyIHJlbGF0ZWQgb2JqZWN0IChp\nZiBhbnkpLAogICAgICAgIC8vIGJlY2F1c2Ugd2UgYXNzdW1lIHRoYXQsIHVu\nbGlrZSBtb3N0IG9wZXJhdGlvbnMsIGlmIGEgcmVsYXRpb24KICAgICAgICAv\nLyBmaWVsZCBsaWtlIGEgMS0xIGlzIGdpdmVuIGFzIHRoZSB0YXJnZXQgb2Yg\nYW4gZXh0ZW5zaW9uLCB0aGVuCiAgICAgICAgLy8gdGhlIGV4dGVuc2lvbiBw\ncm9iYWJseSBhY3RzIG9uIHNvbWUgZmllbGQgb3IgY29sdW1uIGluIHRoZQog\nICAgICAgIC8vIHJlbGF0ZWQgb2JqZWN0LCBub3QgdGhlIDEtMSBmaWVsZCBp\ndHNlbGYKICAgICAgICByZXR1cm4gX2FyZy5pbml0aWFsaXplKHNlbCwgY3R4\nLCBKT0lOX1JFTCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2VsZWN0KFNl\nbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSwgCiAg\nICAgICAgYm9vbGVhbiBwa3MpIHsKICAgICAgICBzZWwuc2VsZWN0KG5ld1NR\nTEJ1ZmZlcihzZWwsIGN0eCwgc3RhdGUpLCB0aGlzKTsKICAgICAgICBzZWwu\nc2V0QWdncmVnYXRlKHRydWUpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNl\nbGVjdENvbHVtbnMoU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0\nYXRlIHN0YXRlLCAKICAgICAgICBib29sZWFuIHBrcykgewogICAgICAgIGlm\nIChfYXJnICE9IG51bGwpCiAgICAgICAgICAgIF9hcmcuc2VsZWN0Q29sdW1u\ncyhzZWwsIGN0eCwgc3RhdGUsIHRydWUpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIGdyb3VwQnkoU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0\nYXRlIHN0YXRlKSB7CiAgICAgICAgc2VsLmdyb3VwQnkobmV3U1FMQnVmZmVy\nKHNlbCwgY3R4LCBzdGF0ZSkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIG9y\nZGVyQnkoU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0\nYXRlLCAKICAgICAgICBib29sZWFuIGFzYykgewogICAgICAgIHNlbC5vcmRl\nckJ5KG5ld1NRTEJ1ZmZlcihzZWwsIGN0eCwgc3RhdGUpLCBhc2MsIGZhbHNl\nKTsKICAgIH0KCiAgICBwcml2YXRlIFNRTEJ1ZmZlciBuZXdTUUxCdWZmZXIo\nU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlKSB7\nCiAgICAgICAgY2FsY3VsYXRlVmFsdWUoc2VsLCBjdHgsIHN0YXRlLCBudWxs\nLCBudWxsKTsKICAgICAgICBTUUxCdWZmZXIgYnVmID0gbmV3IFNRTEJ1ZmZl\ncihjdHguc3RvcmUuZ2V0REJEaWN0aW9uYXJ5KCkpOwogICAgICAgIGFwcGVu\nZFRvKHNlbCwgY3R4LCBzdGF0ZSwgYnVmLCAwKTsKICAgICAgICByZXR1cm4g\nYnVmOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgbG9hZChFeHBDb250ZXh0\nIGN0eCwgRXhwU3RhdGUgc3RhdGUsIFJlc3VsdCByZXMpCiAgICAgICAgdGhy\nb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIEZpbHRlcnMuY29u\ndmVydChyZXMuZ2V0T2JqZWN0KHRoaXMsIEphdmFTUUxUeXBlcy5KREJDX0RF\nRkFVTFQsIAogICAgICAgICAgICBudWxsKSwgZ2V0VHlwZSgpKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBjYWxjdWxhdGVWYWx1ZShTZWxlY3Qgc2VsLCBF\neHBDb250ZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUsIAogICAgICAgIFZhbCBv\ndGhlciwgRXhwU3RhdGUgb3RoZXJTdGF0ZSkgewogICAgICAgIGlmIChfYXJn\nICE9IG51bGwpCiAgICAgICAgICAgIF9hcmcuY2FsY3VsYXRlVmFsdWUoc2Vs\nLCBjdHgsIHN0YXRlLCBudWxsLCBudWxsKTsKICAgIH0KCiAgICBwdWJsaWMg\naW50IGxlbmd0aChTZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwgRXhwU3Rh\ndGUgc3RhdGUpIHsKICAgICAgICByZXR1cm4gMTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBhcHBlbmRUbyhTZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwg\nRXhwU3RhdGUgc3RhdGUsIAogICAgICAgIFNRTEJ1ZmZlciBzcWwsIGludCBp\nbmRleCkgewogICAgICAgIF9saXN0ZW5lci5hcHBlbmRUbyhzcWwsIGdldEFy\nZ3Moc2VsLCBjdHgsIHN0YXRlKSwgX2NhbmRpZGF0ZSwgCiAgICAgICAgICAg\nIGN0eC5zdG9yZSk7CiAgICAgICAgc2VsLmFwcGVuZChzcWwsIHN0YXRlLmpv\naW5zKTsKICAgIH0KCiAgICBwcml2YXRlIEZpbHRlclZhbHVlW10gZ2V0QXJn\ncyhTZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUp\nIHsKICAgICAgICBpZiAoX2FyZyA9PSBudWxsKQogICAgICAgICAgICByZXR1\ncm4gbnVsbDsKICAgICAgICBpZiAoX2FyZyBpbnN0YW5jZW9mIEFyZ3MpCiAg\nICAgICAgICAgIHJldHVybiAoKEFyZ3MpIF9hcmcpLm5ld0ZpbHRlclZhbHVl\ncyhzZWwsIGN0eCwgc3RhdGUpOwogICAgICAgIHJldHVybiBuZXcgRmlsdGVy\nVmFsdWVbXXsKICAgICAgICAgICAgbmV3IEZpbHRlclZhbHVlSW1wbChzZWws\nIGN0eCwgc3RhdGUsIF9hcmcpCiAgICAgICAgfTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBhY2NlcHRWaXNpdChFeHByZXNzaW9uVmlzaXRvciB2aXNpdG9y\nKSB7CiAgICAgICAgdmlzaXRvci5lbnRlcih0aGlzKTsKICAgICAgICBpZiAo\nX2FyZyAhPSBudWxsKQogICAgICAgICAgICBfYXJnLmFjY2VwdFZpc2l0KHZp\nc2l0b3IpOwogICAgICAgIHZpc2l0b3IuZXhpdCh0aGlzKTsKICAgIH0KfQo=\n","encoding":"base64"}

