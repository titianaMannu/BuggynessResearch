{"sha":"8647105533fbb17d43d26906fc4d7ad1b2bc6358","node_id":"MDQ6QmxvYjIwNjM2NDo4NjQ3MTA1NTMzZmJiMTdkNDNkMjY5MDZmYzRkN2FkMWIyYmM2MzU4","size":5611,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/8647105533fbb17d43d26906fc4d7ad1b2bc6358","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLmtlcm5lbC5leHBzOwoKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNxbC5Kb2luczsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLnNxbC5SZXN1bHQ7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5zcWwuU1FMQnVmZmVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmpkYmMuc3FsLlNlbGVjdDsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5rZXJuZWwuZXhwcy5Bcmd1bWVudHM7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEua2VybmVsLmV4cHMuRXhwcmVzc2lvblZpc2l0b3I7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLmV4cHMuVmFsdWU7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEubWV0YS5DbGFzc01ldGFEYXRhOwoKLyoqCiAq\nIEEgbGlzdCBvZiBhcmd1bWVudHMgdG8gYSBtdWx0aS1hcmd1bWVudCBmdW5j\ndGlvbi4KICoKICogQGF1dGhvciBBYmUgV2hpdGUKICovCnB1YmxpYyBjbGFz\ncyBBcmdzCiAgICBleHRlbmRzIEFic3RyYWN0VmFsCiAgICBpbXBsZW1lbnRz\nIEFyZ3VtZW50cyB7CgogICAgcHJpdmF0ZSBmaW5hbCBWYWxbXSBfYXJnczsK\nICAgIHByaXZhdGUgQ2xhc3NNZXRhRGF0YSBfbWV0YSA9IG51bGw7CgogICAg\nLyoqCiAgICAgKiBDb25zdHJ1Y3Rvci4gU3VwcGx5IHZhbHVlcyBiZWluZyBj\nb21iaW5lZC4KICAgICAqLwogICAgcHVibGljIEFyZ3MoVmFsIHZhbDEsIFZh\nbCB2YWwyKSB7CiAgICAgICAgaW50IGxlbjEgPSAodmFsMSBpbnN0YW5jZW9m\nIEFyZ3MpID8gKChBcmdzKSB2YWwxKS5fYXJncy5sZW5ndGggOiAxOwogICAg\nICAgIGludCBsZW4yID0gKHZhbDIgaW5zdGFuY2VvZiBBcmdzKSA/ICgoQXJn\ncykgdmFsMikuX2FyZ3MubGVuZ3RoIDogMTsKCiAgICAgICAgX2FyZ3MgPSBu\nZXcgVmFsW2xlbjEgKyBsZW4yXTsKICAgICAgICBpZiAodmFsMSBpbnN0YW5j\nZW9mIEFyZ3MpCiAgICAgICAgICAgIFN5c3RlbS5hcnJheWNvcHkoKChBcmdz\nKSB2YWwxKS5fYXJncywgMCwgX2FyZ3MsIDAsIGxlbjEpOwogICAgICAgIGVs\nc2UKICAgICAgICAgICAgX2FyZ3NbMF0gPSB2YWwxOwogICAgICAgIGlmICh2\nYWwyIGluc3RhbmNlb2YgQXJncykKICAgICAgICAgICAgU3lzdGVtLmFycmF5\nY29weSgoKEFyZ3MpIHZhbDIpLl9hcmdzLCAwLCBfYXJncywgbGVuMSwgbGVu\nMik7CiAgICAgICAgZWxzZQogICAgICAgICAgICBfYXJnc1tsZW4xXSA9IHZh\nbDI7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gYSBmaWx0ZXIgdmFs\ndWUgZm9yIGVhY2ggYXJndW1lbnQuCiAgICAgKi8KICAgIHB1YmxpYyBGaWx0\nZXJWYWx1ZVtdIG5ld0ZpbHRlclZhbHVlcyhTZWxlY3Qgc2VsLCBFeHBDb250\nZXh0IGN0eCwgCiAgICAgICAgRXhwU3RhdGUgc3RhdGUpIHsKICAgICAgICBB\ncmdzRXhwU3RhdGUgYXN0YXRlID0gKEFyZ3NFeHBTdGF0ZSkgc3RhdGU7IAog\nICAgICAgIEZpbHRlclZhbHVlW10gZmlsdHMgPSBuZXcgRmlsdGVyVmFsdWVb\nX2FyZ3MubGVuZ3RoXTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9h\ncmdzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICBmaWx0c1tpXSA9IG5ldyBG\naWx0ZXJWYWx1ZUltcGwoc2VsLCBjdHgsIGFzdGF0ZS5zdGF0ZXNbaV0sIAog\nICAgICAgICAgICAgICAgX2FyZ3NbaV0pOyAKICAgICAgICByZXR1cm4gZmls\ndHM7CiAgICB9CgogICAgcHVibGljIFZhbHVlW10gZ2V0VmFsdWVzKCkgewog\nICAgICAgIHJldHVybiBfYXJnczsKICAgIH0KCiAgICBwdWJsaWMgVmFsW10g\nZ2V0VmFscygpIHsKICAgICAgICByZXR1cm4gX2FyZ3M7CiAgICB9CgogICAg\ncHVibGljIENsYXNzTWV0YURhdGEgZ2V0TWV0YURhdGEoKSB7CiAgICAgICAg\ncmV0dXJuIF9tZXRhOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldE1ldGFE\nYXRhKENsYXNzTWV0YURhdGEgbWV0YSkgewogICAgICAgIF9tZXRhID0gbWV0\nYTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBpc1ZhcmlhYmxlKCkgewog\nICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBwdWJsaWMgQ2xhc3Mg\nZ2V0VHlwZSgpIHsKICAgICAgICByZXR1cm4gT2JqZWN0W10uY2xhc3M7CiAg\nICB9CgogICAgcHVibGljIENsYXNzW10gZ2V0VHlwZXMoKSB7CiAgICAgICAg\nQ2xhc3NbXSBjID0gbmV3IENsYXNzW19hcmdzLmxlbmd0aF07CiAgICAgICAg\nZm9yIChpbnQgaSA9IDA7IGkgPCBfYXJncy5sZW5ndGg7IGkrKykKICAgICAg\nICAgICAgY1tpXSA9IF9hcmdzW2ldLmdldFR5cGUoKTsKICAgICAgICByZXR1\ncm4gYzsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRJbXBsaWNpdFR5cGUo\nQ2xhc3MgdHlwZSkgewogICAgfQoKICAgIHB1YmxpYyBFeHBTdGF0ZSBpbml0\naWFsaXplKFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBpbnQgZmxhZ3Mp\nIHsKICAgICAgICBFeHBTdGF0ZVtdIHN0YXRlcyA9IG5ldyBFeHBTdGF0ZVtf\nYXJncy5sZW5ndGhdOwogICAgICAgIEpvaW5zIGpvaW5zID0gbnVsbDsKICAg\nICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9hcmdzLmxlbmd0aDsgaSsrKSB7\nCiAgICAgICAgICAgIHN0YXRlc1tpXSA9IF9hcmdzW2ldLmluaXRpYWxpemUo\nc2VsLCBjdHgsIGZsYWdzKTsKICAgICAgICAgICAgaWYgKGpvaW5zID09IG51\nbGwpCiAgICAgICAgICAgICAgICBqb2lucyA9IHN0YXRlc1tpXS5qb2luczsK\nICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgam9pbnMgPSBzZWwu\nYW5kKGpvaW5zLCBzdGF0ZXNbaV0uam9pbnMpOwogICAgICAgIH0KICAgICAg\nICByZXR1cm4gbmV3IEFyZ3NFeHBTdGF0ZShqb2lucywgc3RhdGVzKTsKICAg\nIH0KCiAgICAvKioKICAgICAqIEV4cHJlc3Npb24gc3RhdGUuCiAgICAgKi8K\nICAgIHByaXZhdGUgc3RhdGljIGNsYXNzIEFyZ3NFeHBTdGF0ZQogICAgICAg\nIGV4dGVuZHMgRXhwU3RhdGUgewogICAgICAgIAogICAgICAgIHB1YmxpYyBF\neHBTdGF0ZVtdIHN0YXRlczsKCiAgICAgICAgcHVibGljIEFyZ3NFeHBTdGF0\nZShKb2lucyBqb2lucywgRXhwU3RhdGVbXSBzdGF0ZXMpIHsKICAgICAgICAg\nICAgc3VwZXIoam9pbnMpOwogICAgICAgICAgICB0aGlzLnN0YXRlcyA9IHN0\nYXRlczsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZvaWQgc2VsZWN0\nKFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSwg\nCiAgICAgICAgYm9vbGVhbiBwa3MpIHsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBzZWxlY3RDb2x1bW5zKFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBF\neHBTdGF0ZSBzdGF0ZSwgCiAgICAgICAgYm9vbGVhbiBwa3MpIHsKICAgICAg\nICBBcmdzRXhwU3RhdGUgYXN0YXRlID0gKEFyZ3NFeHBTdGF0ZSkgc3RhdGU7\nCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfYXJncy5sZW5ndGg7IGkr\nKykKICAgICAgICAgICAgX2FyZ3NbaV0uc2VsZWN0Q29sdW1ucyhzZWwsIGN0\neCwgYXN0YXRlLnN0YXRlc1tpXSwgcGtzKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBncm91cEJ5KFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBFeHBT\ndGF0ZSBzdGF0ZSkgewogICAgfQoKICAgIHB1YmxpYyB2b2lkIG9yZGVyQnko\nU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlLCAK\nICAgICAgICBib29sZWFuIGFzYykgewogICAgfQoKICAgIHB1YmxpYyBPYmpl\nY3QgbG9hZChFeHBDb250ZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUsIFJlc3Vs\ndCByZXMpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBjYWxjdWxhdGVWYWx1ZShTZWxlY3Qgc2VsLCBFeHBDb250ZXh0\nIGN0eCwgRXhwU3RhdGUgc3RhdGUsIAogICAgICAgIFZhbCBvdGhlciwgRXhw\nU3RhdGUgb3RoZXJTdGF0ZSkgewogICAgICAgIEFyZ3NFeHBTdGF0ZSBhc3Rh\ndGUgPSAoQXJnc0V4cFN0YXRlKSBzdGF0ZTsKICAgICAgICBmb3IgKGludCBp\nID0gMDsgaSA8IF9hcmdzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICBfYXJn\nc1tpXS5jYWxjdWxhdGVWYWx1ZShzZWwsIGN0eCwgYXN0YXRlLnN0YXRlc1tp\nXSwgbnVsbCwgbnVsbCk7CiAgICB9CgogICAgcHVibGljIGludCBsZW5ndGgo\nU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlKSB7\nCiAgICAgICAgcmV0dXJuIDA7CiAgICB9CgogICAgcHVibGljIHZvaWQgYXBw\nZW5kVG8oU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0\nYXRlLCAKICAgICAgICBTUUxCdWZmZXIgc3FsLCBpbnQgaW5kZXgpIHsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBhcHBlbmRJc0VtcHR5KFNlbGVjdCBzZWws\nIEV4cENvbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSwgCiAgICAgICAgU1FM\nQnVmZmVyIHNxbCkgewogICAgfQoKICAgIHB1YmxpYyB2b2lkIGFwcGVuZElz\nTm90RW1wdHkoU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRl\nIHN0YXRlLCAKICAgICAgICBTUUxCdWZmZXIgc3FsKXsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBhcHBlbmRTaXplKFNlbGVjdCBzZWwsIEV4cENvbnRleHQg\nY3R4LCBFeHBTdGF0ZSBzdGF0ZSwgCiAgICAgICAgU1FMQnVmZmVyIHNxbCkg\newogICAgfQoKICAgIHB1YmxpYyB2b2lkIGFwcGVuZElzTnVsbChTZWxlY3Qg\nc2VsLCBFeHBDb250ZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUsIAogICAgICAg\nIFNRTEJ1ZmZlciBzcWwpIHsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBhcHBl\nbmRJc05vdE51bGwoU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0\nYXRlIHN0YXRlLCAKICAgICAgICBTUUxCdWZmZXIgc3FsKSB7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgYWNjZXB0VmlzaXQoRXhwcmVzc2lvblZpc2l0b3Ig\ndmlzaXRvcikgewogICAgICAgIHZpc2l0b3IuZW50ZXIodGhpcyk7CiAgICAg\nICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfYXJncy5sZW5ndGg7IGkrKykKICAg\nICAgICAgICAgX2FyZ3NbaV0uYWNjZXB0VmlzaXQodmlzaXRvcik7CiAgICAg\nICAgdmlzaXRvci5leGl0KHRoaXMpOwogICAgfQp9Cg==\n","encoding":"base64"}

