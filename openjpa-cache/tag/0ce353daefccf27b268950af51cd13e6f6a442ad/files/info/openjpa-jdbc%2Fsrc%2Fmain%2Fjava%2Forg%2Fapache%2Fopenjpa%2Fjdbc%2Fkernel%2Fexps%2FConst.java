{"sha":"4ac8c29c397d384b019dafb036e87b9b4be8b4e6","node_id":"MDQ6QmxvYjIwNjM2NDo0YWM4YzI5YzM5N2QzODRiMDE5ZGFmYjAzNmU4N2I5YjRiZThiNGU2","size":5740,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/4ac8c29c397d384b019dafb036e87b9b4be8b4e6","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLmtlcm5lbC5leHBzOwoKaW1wb3J0IGphdmEuc3FsLlNR\nTEV4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOwppbXBv\ncnQgamF2YS51dGlsLk1hcDsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5zY2hlbWEuQ29sdW1uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMuc3FsLlJlc3VsdDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5q\nZGJjLnNxbC5TUUxCdWZmZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5zcWwuU2VsZWN0OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtl\ncm5lbC5leHBzLkNvbnN0YW50OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLm1ldGEuQ2xhc3NNZXRhRGF0YTsKCi8qKgogKiBBIGxpdGVyYWwgb3IgcGFy\nYW1ldGVyIGluIHRoZSBmaWx0ZXIuCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRl\nCiAqLwphYnN0cmFjdCBjbGFzcyBDb25zdAogICAgZXh0ZW5kcyBBYnN0cmFj\ndFZhbAogICAgaW1wbGVtZW50cyBDb25zdGFudCB7CgogICAgcHJpdmF0ZSBD\nbGFzc01ldGFEYXRhIF9tZXRhID0gbnVsbDsKCiAgICBwdWJsaWMgQ2xhc3NN\nZXRhRGF0YSBnZXRNZXRhRGF0YSgpIHsKICAgICAgICByZXR1cm4gX21ldGE7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0TWV0YURhdGEoQ2xhc3NNZXRh\nRGF0YSBtZXRhKSB7CiAgICAgICAgX21ldGEgPSBtZXRhOwogICAgfQoKICAg\nIC8qKgogICAgICogUmV0dXJuIHRoZSBTUUwgdmFsdWUgb2YgdGhpcyBjb25z\ndGFudC4KICAgICAqLwogICAgcHVibGljIE9iamVjdCBnZXRTUUxWYWx1ZShT\nZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUpIHsK\nICAgICAgICByZXR1cm4gZ2V0VmFsdWUoY3R4LCBzdGF0ZSk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBSZXR1cm4gdHJ1ZSBpZiB0aGlzIGNvbnN0YW50J3Mg\nU1FMIHZhbHVlIGlzIGVxdWl2YWxlbnQgdG8gTlVMTC4KICAgICAqLwogICAg\ncHVibGljIGJvb2xlYW4gaXNTUUxWYWx1ZU51bGwoU2VsZWN0IHNlbCwgRXhw\nQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlKSB7CiAgICAgICAgT2JqZWN0\nIHZhbCA9IGdldFNRTFZhbHVlKHNlbCwgY3R4LCBzdGF0ZSk7CiAgICAgICAg\naWYgKHZhbCA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAg\nICAgICBpZiAoISh2YWwgaW5zdGFuY2VvZiBPYmplY3RbXSkpCiAgICAgICAg\nICAgIHJldHVybiBmYWxzZTsKCiAgICAgICAgLy8gYWxsLW51bGwgYXJyYXkg\naXMgY29uc2lkZXJlZCBudWxsCiAgICAgICAgT2JqZWN0W10gYXJyID0gKE9i\namVjdFtdKSB2YWw7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBhcnIu\nbGVuZ3RoOyBpKyspCiAgICAgICAgICAgIGlmIChhcnJbaV0gIT0gbnVsbCkK\nICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICByZXR1cm4g\ndHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgdmFsdWUg\nb2YgdGhpcyBjb25zdGFudC4gIE1heSBiZSBtb3JlIHJvYnVzdCB0aGFuIHRo\nZQogICAgICogcGFyYW1ldGVycy1vbmx5IGZvcm0uCiAgICAgKi8KICAgIHB1\nYmxpYyBPYmplY3QgZ2V0VmFsdWUoRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRl\nIHN0YXRlKSB7CiAgICAgICAgcmV0dXJuIGdldFZhbHVlKGN0eC5wYXJhbXMp\nOwogICAgfQoKICAgIHB1YmxpYyBFeHBTdGF0ZSBpbml0aWFsaXplKFNlbGVj\ndCBzZWwsIEV4cENvbnRleHQgY3R4LCBpbnQgZmxhZ3MpIHsKICAgICAgICBy\nZXR1cm4gbmV3IENvbnN0RXhwU3RhdGUoKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIENvbnN0YW50IGV4cHJlc3Npb24gc3RhdGUuCiAgICAgKi8KICAgIHBy\nb3RlY3RlZCBzdGF0aWMgY2xhc3MgQ29uc3RFeHBTdGF0ZQogICAgICAgIGV4\ndGVuZHMgRXhwU3RhdGUgewoKICAgICAgICBwdWJsaWMgQ29sdW1uW10gY29s\ncyA9IG51bGw7CgogICAgICAgIC8qKgogICAgICAgICAqIFJldHVybiB0aGUg\nY29sdW1uIGZvciB0aGUgdmFsdWUgYXQgdGhlIHNwZWNpZmllZCBpbmRleCwg\nb3IgbnVsbC4KICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgQ29sdW1uIGdl\ndENvbHVtbihpbnQgaW5kZXgpIHsKICAgICAgICAgICAgcmV0dXJuIChjb2xz\nICE9IG51bGwgJiYgY29scy5sZW5ndGggPiBpbmRleCkgPyBjb2xzW2luZGV4\nXSA6IG51bGw7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIGNh\nbGN1bGF0ZVZhbHVlKFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBFeHBT\ndGF0ZSBzdGF0ZSwgCiAgICAgICAgVmFsIG90aGVyLCBFeHBTdGF0ZSBvdGhl\nclN0YXRlKSB7CiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgUENQYXRo\nKQogICAgICAgICAgICAoKENvbnN0RXhwU3RhdGUpIHN0YXRlKS5jb2xzID0g\nKChQQ1BhdGgpIG90aGVyKS4KICAgICAgICAgICAgICAgIGdldENvbHVtbnMo\nb3RoZXJTdGF0ZSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2VsZWN0KFNl\nbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSwgCiAg\nICAgICAgYm9vbGVhbiBwa3MpIHsKICAgICAgICBzZWwuc2VsZWN0KG5ld1NR\nTEJ1ZmZlcihzZWwsIGN0eCwgc3RhdGUpLCB0aGlzKTsKICAgIH0KCiAgICBw\ncml2YXRlIFNRTEJ1ZmZlciBuZXdTUUxCdWZmZXIoU2VsZWN0IHNlbCwgRXhw\nQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlKSB7CiAgICAgICAgY2FsY3Vs\nYXRlVmFsdWUoc2VsLCBjdHgsIHN0YXRlLCBudWxsLCBudWxsKTsKICAgICAg\nICBTUUxCdWZmZXIgYnVmID0gbmV3IFNRTEJ1ZmZlcihjdHguc3RvcmUuZ2V0\nREJEaWN0aW9uYXJ5KCkpOwogICAgICAgIGFwcGVuZFRvKHNlbCwgY3R4LCBz\ndGF0ZSwgYnVmLCAwKTsKICAgICAgICByZXR1cm4gYnVmOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHNlbGVjdENvbHVtbnMoU2VsZWN0IHNlbCwgRXhwQ29u\ndGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlLCAKICAgICAgICBib29sZWFuIHBr\ncykgewogICAgfQoKICAgIHB1YmxpYyB2b2lkIGdyb3VwQnkoU2VsZWN0IHNl\nbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlKSB7CiAgICAgICAg\nc2VsLmdyb3VwQnkobmV3U1FMQnVmZmVyKHNlbCwgY3R4LCBzdGF0ZSkpOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIG9yZGVyQnkoU2VsZWN0IHNlbCwgRXhw\nQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlLCAKICAgICAgICBib29sZWFu\nIGFzYykgewogICAgICAgIHNlbC5vcmRlckJ5KG5ld1NRTEJ1ZmZlcihzZWws\nIGN0eCwgc3RhdGUpLCBhc2MsIGZhbHNlKTsKICAgIH0KCiAgICBwdWJsaWMg\nT2JqZWN0IGxvYWQoRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlLCBS\nZXN1bHQgcmVzKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAg\nICAgIHJldHVybiBnZXRWYWx1ZShjdHgsIHN0YXRlKTsKICAgIH0KCiAgICBw\ndWJsaWMgaW50IGxlbmd0aChTZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwg\nRXhwU3RhdGUgc3RhdGUpIHsKICAgICAgICByZXR1cm4gMTsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCBhcHBlbmRJc0VtcHR5KFNlbGVjdCBzZWwsIEV4cENv\nbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSwgCiAgICAgICAgU1FMQnVmZmVy\nIHNxbCkgewogICAgICAgIE9iamVjdCBvYmogPSBnZXRWYWx1ZShjdHgsIHN0\nYXRlKTsKICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgQ29sbGVjdGlvbiAm\nJiAoKENvbGxlY3Rpb24pIG9iaikuaXNFbXB0eSgpKQogICAgICAgICAgICBz\ncWwuYXBwZW5kKFRSVUUpOwogICAgICAgIGVsc2UgaWYgKG9iaiBpbnN0YW5j\nZW9mIE1hcCAmJiAoKE1hcCkgb2JqKS5pc0VtcHR5KCkpCiAgICAgICAgICAg\nIHNxbC5hcHBlbmQoVFJVRSk7CiAgICAgICAgZWxzZQogICAgICAgICAgICBz\ncWwuYXBwZW5kKEZBTFNFKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBhcHBl\nbmRJc05vdEVtcHR5KFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBFeHBT\ndGF0ZSBzdGF0ZSwgCiAgICAgICAgU1FMQnVmZmVyIHNxbCl7CiAgICAgICAg\nT2JqZWN0IG9iaiA9IGdldFZhbHVlKGN0eCwgc3RhdGUpOwogICAgICAgIGlm\nIChvYmogaW5zdGFuY2VvZiBDb2xsZWN0aW9uICYmICgoQ29sbGVjdGlvbikg\nb2JqKS5pc0VtcHR5KCkpCiAgICAgICAgICAgIHNxbC5hcHBlbmQoRkFMU0Up\nOwogICAgICAgIGVsc2UgaWYgKG9iaiBpbnN0YW5jZW9mIE1hcCAmJiAoKE1h\ncCkgb2JqKS5pc0VtcHR5KCkpCiAgICAgICAgICAgIHNxbC5hcHBlbmQoRkFM\nU0UpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgc3FsLmFwcGVuZChUUlVF\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBhcHBlbmRTaXplKFNlbGVjdCBz\nZWwsIEV4cENvbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSwgCiAgICAgICAg\nU1FMQnVmZmVyIHNxbCkgewogICAgICAgIE9iamVjdCBvYmogPSBnZXRWYWx1\nZShjdHgsIHN0YXRlKTsKICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgQ29s\nbGVjdGlvbikKICAgICAgICAgICAgc3FsLmFwcGVuZFZhbHVlKCgoQ29sbGVj\ndGlvbikgb2JqKS5zaXplKCkpOwogICAgICAgIGVsc2UgaWYgKG9iaiBpbnN0\nYW5jZW9mIE1hcCkKICAgICAgICAgICAgc3FsLmFwcGVuZFZhbHVlKCgoTWFw\nKSBvYmopLnNpemUoKSk7CiAgICAgICAgZWxzZQogICAgICAgICAgICBzcWwu\nYXBwZW5kKCIxIik7CiAgICB9CgogICAgcHVibGljIHZvaWQgYXBwZW5kSXNO\ndWxsKFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0\nZSwgCiAgICAgICAgU1FMQnVmZmVyIHNxbCkgewogICAgICAgIGlmIChpc1NR\nTFZhbHVlTnVsbChzZWwsIGN0eCwgc3RhdGUpKQogICAgICAgICAgICBzcWwu\nYXBwZW5kKFRSVUUpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgc3FsLmFw\ncGVuZChGQUxTRSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgYXBwZW5kSXNO\nb3ROdWxsKFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBFeHBTdGF0ZSBz\ndGF0ZSwgCiAgICAgICAgU1FMQnVmZmVyIHNxbCkgewogICAgICAgIGlmICgh\naXNTUUxWYWx1ZU51bGwoc2VsLCBjdHgsIHN0YXRlKSkKICAgICAgICAgICAg\nc3FsLmFwcGVuZChUUlVFKTsKICAgICAgICBlbHNlCiAgICAgICAgICAgIHNx\nbC5hcHBlbmQoRkFMU0UpOwogICAgfQp9Cg==\n","encoding":"base64"}

