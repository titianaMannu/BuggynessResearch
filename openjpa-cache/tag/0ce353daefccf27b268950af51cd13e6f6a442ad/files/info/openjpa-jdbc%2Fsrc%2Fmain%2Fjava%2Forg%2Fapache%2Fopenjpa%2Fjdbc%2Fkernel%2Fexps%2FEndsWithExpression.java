{"sha":"83574d87742f5731825838eb0092d8da5c30ece2","node_id":"MDQ6QmxvYjIwNjM2NDo4MzU3NGQ4Nzc0MmY1NzMxODI1ODM4ZWIwMDkyZDhkYTVjMzBlY2Uy","size":6112,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/83574d87742f5731825838eb0092d8da5c30ece2","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLmtlcm5lbC5leHBzOwoKaW1wb3J0IGphdmEudXRpbC5N\nYXA7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5DbGFz\nc01hcHBpbmc7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRh\nLkZpZWxkTWFwcGluZzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLnNjaGVtYS5Db2x1bW47CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5zY2hlbWEuVGFibGU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5zcWwuREJEaWN0aW9uYXJ5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMuc3FsLlNRTEJ1ZmZlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5qZGJjLnNxbC5TZWxlY3Q7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\na2VybmVsLmV4cHMuRXhwcmVzc2lvblZpc2l0b3I7CgovKioKICogVGVzdCBp\nZiBvbmUgc3RyaW5nIGVuZHMgd2l0aCBhbm90aGVyLgogKgogKiBAYXV0aG9y\nIEFiZSBXaGl0ZQogKi8KY2xhc3MgRW5kc1dpdGhFeHByZXNzaW9uCiAgICBp\nbXBsZW1lbnRzIEV4cCB7CgogICAgcHJpdmF0ZSBmaW5hbCBWYWwgX3ZhbDE7\nCiAgICBwcml2YXRlIGZpbmFsIFZhbCBfdmFsMjsKCiAgICAvKioKICAgICAq\nIENvbnN0cnVjdG9yLiBTdXBwbHkgdmFsdWVzLgogICAgICovCiAgICBwdWJs\naWMgRW5kc1dpdGhFeHByZXNzaW9uKFZhbCB2YWwxLCBWYWwgdmFsMikgewog\nICAgICAgIF92YWwxID0gdmFsMTsKICAgICAgICBfdmFsMiA9IHZhbDI7CiAg\nICB9CgogICAgcHVibGljIEV4cFN0YXRlIGluaXRpYWxpemUoU2VsZWN0IHNl\nbCwgRXhwQ29udGV4dCBjdHgsIE1hcCBjb250YWlucykgewogICAgICAgIEV4\ncFN0YXRlIHMxID0gX3ZhbDEuaW5pdGlhbGl6ZShzZWwsIGN0eCwgMCk7CiAg\nICAgICAgRXhwU3RhdGUgczIgPSBfdmFsMi5pbml0aWFsaXplKHNlbCwgY3R4\nLCAwKTsKICAgICAgICByZXR1cm4gbmV3IEJpbmFyeU9wRXhwU3RhdGUoc2Vs\nLmFuZChzMS5qb2lucywgczIuam9pbnMpLCBzMSwgczIpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIGFwcGVuZFRvKFNlbGVjdCBzZWwsIEV4cENvbnRleHQg\nY3R4LCBFeHBTdGF0ZSBzdGF0ZSwgCiAgICAgICAgU1FMQnVmZmVyIGJ1Zikg\newogICAgICAgIEJpbmFyeU9wRXhwU3RhdGUgYnN0YXRlID0gKEJpbmFyeU9w\nRXhwU3RhdGUpIHN0YXRlOwogICAgICAgIF92YWwxLmNhbGN1bGF0ZVZhbHVl\nKHNlbCwgY3R4LCBic3RhdGUuc3RhdGUxLCBfdmFsMiwgYnN0YXRlLnN0YXRl\nMik7CiAgICAgICAgX3ZhbDIuY2FsY3VsYXRlVmFsdWUoc2VsLCBjdHgsIGJz\ndGF0ZS5zdGF0ZTIsIF92YWwxLCBic3RhdGUuc3RhdGUxKTsKCiAgICAgICAg\nREJEaWN0aW9uYXJ5IGRpY3QgPSBjdHguc3RvcmUuZ2V0REJEaWN0aW9uYXJ5\nKCk7CiAgICAgICAgU3RyaW5nIGZ1bmMgPSBkaWN0LnN0cmluZ0xlbmd0aEZ1\nbmN0aW9uOwogICAgICAgIFN0cmluZyBwcmUgPSBudWxsOwogICAgICAgIFN0\ncmluZyBwb3N0ID0gbnVsbDsKICAgICAgICBpZiAoZnVuYyAhPSBudWxsKSB7\nCiAgICAgICAgICAgIGludCBpZHggPSBmdW5jLmluZGV4T2YoInswfSIpOwog\nICAgICAgICAgICBwcmUgPSBmdW5jLnN1YnN0cmluZygwLCBpZHgpOwogICAg\nICAgICAgICBwb3N0ID0gZnVuYy5zdWJzdHJpbmcoaWR4ICsgMyk7CiAgICAg\nICAgfQoKICAgICAgICBpZiAoX3ZhbDEgaW5zdGFuY2VvZiBDb25zdCAmJiAo\nKENvbnN0KSBfdmFsMSkuZ2V0VmFsdWUoY3R4LCAKICAgICAgICAgICAgYnN0\nYXRlLnN0YXRlMSkgPT0gbnVsbCkKICAgICAgICAgICAgYnVmLmFwcGVuZCgi\nMSA8PiAxIik7CiAgICAgICAgZWxzZSBpZiAoX3ZhbDIgaW5zdGFuY2VvZiBD\nb25zdCkgewogICAgICAgICAgICBPYmplY3QgbyA9ICgoQ29uc3QpIF92YWwy\nKS5nZXRWYWx1ZShjdHgsIGJzdGF0ZS5zdGF0ZTIpOwogICAgICAgICAgICBp\nZiAobyA9PSBudWxsKQogICAgICAgICAgICAgICAgYnVmLmFwcGVuZCgiMSA8\nPiAxIik7CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgQ29s\ndW1uIGNvbCA9IG51bGw7CiAgICAgICAgICAgICAgICBpZiAoX3ZhbDEgaW5z\ndGFuY2VvZiBQQ1BhdGgpIHsKICAgICAgICAgICAgICAgICAgICBDb2x1bW5b\nXSBjb2xzID0gKChQQ1BhdGgpIF92YWwxKS5nZXRDb2x1bW5zKGJzdGF0ZS5z\ndGF0ZTEpOwogICAgICAgICAgICAgICAgICAgIGlmIChjb2xzLmxlbmd0aCA9\nPSAxKQogICAgICAgICAgICAgICAgICAgICAgICBjb2wgPSBjb2xzWzBdOwog\nICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF92YWwxLmFwcGVu\nZFRvKHNlbCwgY3R4LCBic3RhdGUuc3RhdGUxLCBidWYsIDApOwogICAgICAg\nICAgICAgICAgYnVmLmFwcGVuZCgiIExJS0UgIik7CiAgICAgICAgICAgICAg\nICBidWYuYXBwZW5kVmFsdWUoIiUiICsgby50b1N0cmluZygpLCBjb2wpOwog\nICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8g\naWYgd2UgY2FuJ3QgdXNlIExJS0UsIHdlIGhhdmUgdG8gdGFrZSB0aGUgc3Vi\nc3RyaW5nIG9mIHRoZQogICAgICAgICAgICAvLyBmaXJzdCB2YWx1ZSBhbmQg\nY29tcGFyZSBpdCB0byB0aGUgc2Vjb25kCiAgICAgICAgICAgIGRpY3QuYXNz\nZXJ0U3VwcG9ydChwcmUgIT0gbnVsbCwgIlN0cmluZ0xlbmd0aEZ1bmN0aW9u\nIik7CiAgICAgICAgICAgIGRpY3Quc3Vic3RyaW5nKGJ1ZiwgCiAgICAgICAg\nICAgICAgICBuZXcgRmlsdGVyVmFsdWVJbXBsKHNlbCwgY3R4LCBic3RhdGUu\nc3RhdGUxLCBfdmFsMSksCiAgICAgICAgICAgICAgICBuZXcgU3RyaW5nTGVu\nZ3RoRGlmZmVyZW5jZUZpbHRlclZhbHVlKHNlbCwgY3R4LCBic3RhdGUsIHBy\nZSwgCiAgICAgICAgICAgICAgICAgICAgcG9zdCksIG51bGwpOwogICAgICAg\nICAgICBidWYuYXBwZW5kKCIgPSAiKTsKICAgICAgICAgICAgX3ZhbDIuYXBw\nZW5kVG8oc2VsLCBjdHgsIGJzdGF0ZS5zdGF0ZTIsIGJ1ZiwgMCk7CiAgICAg\nICAgfQoKICAgICAgICBzZWwuYXBwZW5kKGJ1Ziwgc3RhdGUuam9pbnMpOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHNlbGVjdENvbHVtbnMoU2VsZWN0IHNl\nbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlLCAKICAgICAgICBi\nb29sZWFuIHBrcykgewogICAgICAgIEJpbmFyeU9wRXhwU3RhdGUgYnN0YXRl\nID0gKEJpbmFyeU9wRXhwU3RhdGUpIHN0YXRlOwogICAgICAgIF92YWwxLnNl\nbGVjdENvbHVtbnMoc2VsLCBjdHgsIGJzdGF0ZS5zdGF0ZTEsIHRydWUpOwog\nICAgICAgIF92YWwyLnNlbGVjdENvbHVtbnMoc2VsLCBjdHgsIGJzdGF0ZS5z\ndGF0ZTIsIHRydWUpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGFjY2VwdFZp\nc2l0KEV4cHJlc3Npb25WaXNpdG9yIHZpc2l0b3IpIHsKICAgICAgICB2aXNp\ndG9yLmVudGVyKHRoaXMpOwogICAgICAgIF92YWwxLmFjY2VwdFZpc2l0KHZp\nc2l0b3IpOwogICAgICAgIF92YWwyLmFjY2VwdFZpc2l0KHZpc2l0b3IpOwog\nICAgICAgIHZpc2l0b3IuZXhpdCh0aGlzKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIEV2YWx1YXRlcyB0byB0aGUgbGVuZ3RoIG9mIGEgZ2l2ZW4gdmFsdWUu\nCiAgICAgKi8KICAgIHByaXZhdGUgY2xhc3MgU3RyaW5nTGVuZ3RoRGlmZmVy\nZW5jZUZpbHRlclZhbHVlCiAgICAgICAgaW1wbGVtZW50cyBGaWx0ZXJWYWx1\nZSB7CgogICAgICAgIHByaXZhdGUgZmluYWwgU2VsZWN0IF9zZWw7CiAgICAg\nICAgcHJpdmF0ZSBmaW5hbCBFeHBDb250ZXh0IF9jdHg7CiAgICAgICAgcHJp\ndmF0ZSBmaW5hbCBCaW5hcnlPcEV4cFN0YXRlIF9zdGF0ZTsKICAgICAgICBw\ncml2YXRlIGZpbmFsIFN0cmluZyBfcHJlOwogICAgICAgIHByaXZhdGUgZmlu\nYWwgU3RyaW5nIF9wb3N0OwoKICAgICAgICBwdWJsaWMgU3RyaW5nTGVuZ3Ro\nRGlmZmVyZW5jZUZpbHRlclZhbHVlKFNlbGVjdCBzZWwsIEV4cENvbnRleHQg\nY3R4LCAKICAgICAgICAgICAgQmluYXJ5T3BFeHBTdGF0ZSBzdGF0ZSwgU3Ry\naW5nIHByZSwgU3RyaW5nIHBvc3QpIHsKICAgICAgICAgICAgX3NlbCA9IHNl\nbDsKICAgICAgICAgICAgX2N0eCA9IGN0eDsKICAgICAgICAgICAgX3N0YXRl\nID0gc3RhdGU7CiAgICAgICAgICAgIF9wcmUgPSBwcmU7CiAgICAgICAgICAg\nIF9wb3N0ID0gcG9zdDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBDbGFz\ncyBnZXRUeXBlKCkgewogICAgICAgICAgICByZXR1cm4gaW50LmNsYXNzOwog\nICAgICAgIH0KCiAgICAgICAgcHVibGljIGludCBsZW5ndGgoKSB7CiAgICAg\nICAgICAgIHJldHVybiAxOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZv\naWQgYXBwZW5kVG8oU1FMQnVmZmVyIGJ1ZikgewogICAgICAgICAgICBhcHBl\nbmRUbyhidWYsIDApOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQg\nYXBwZW5kVG8oU1FMQnVmZmVyIGJ1ZiwgaW50IGluZGV4KSB7CiAgICAgICAg\nICAgIGJ1Zi5hcHBlbmQoX3ByZSk7CiAgICAgICAgICAgIF92YWwxLmFwcGVu\nZFRvKF9zZWwsIF9jdHgsIF9zdGF0ZS5zdGF0ZTEsIGJ1ZiwgaW5kZXgpOwog\nICAgICAgICAgICBidWYuYXBwZW5kKF9wb3N0KS5hcHBlbmQoIiAtICIpLmFw\ncGVuZChfcHJlKTsKICAgICAgICAgICAgX3ZhbDIuYXBwZW5kVG8oX3NlbCwg\nX2N0eCwgX3N0YXRlLnN0YXRlMiwgYnVmLCBpbmRleCk7CiAgICAgICAgICAg\nIGJ1Zi5hcHBlbmQoX3Bvc3QpOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIFN0cmluZyBnZXRDb2x1bW5BbGlhcyhDb2x1bW4gY29sKSB7CiAgICAgICAg\nICAgIHJldHVybiBfc2VsLmdldENvbHVtbkFsaWFzKGNvbCwgX3N0YXRlLmpv\naW5zKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0Q29s\ndW1uQWxpYXMoU3RyaW5nIGNvbCwgVGFibGUgdGFibGUpIHsKICAgICAgICAg\nICAgcmV0dXJuIF9zZWwuZ2V0Q29sdW1uQWxpYXMoY29sLCB0YWJsZSwgX3N0\nYXRlLmpvaW5zKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBPYmplY3Qg\ndG9EYXRhU3RvcmVWYWx1ZShPYmplY3QgdmFsKSB7CiAgICAgICAgICAgIHJl\ndHVybiB2YWw7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgYm9vbGVhbiBp\nc0NvbnN0YW50KCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAg\nICAgfQoKICAgICAgICBwdWJsaWMgT2JqZWN0IGdldFZhbHVlKCkgewogICAg\nICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CgogICAgICAgIHB1Ymxp\nYyBPYmplY3QgZ2V0U1FMVmFsdWUoKSB7CiAgICAgICAgICAgIHJldHVybiBu\ndWxsOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIGJvb2xlYW4gaXNQYXRo\nKCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAg\nICAgICBwdWJsaWMgQ2xhc3NNYXBwaW5nIGdldENsYXNzTWFwcGluZygpIHsK\nICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQoKICAgICAgICBw\ndWJsaWMgRmllbGRNYXBwaW5nIGdldEZpZWxkTWFwcGluZygpIHsKICAgICAg\nICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgfQp9Cg==\n","encoding":"base64"}

