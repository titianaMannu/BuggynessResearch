{"sha":"6a68c4bbe0b30d8d276173099a603c7f3ed8680c","node_id":"MDQ6QmxvYjIwNjM2NDo2YTY4YzRiYmUwYjMwZDhkMjc2MTczMDk5YTYwM2M3ZjNlZDg2ODBj","size":7216,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/6a68c4bbe0b30d8d276173099a603c7f3ed8680c","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLmtlcm5lbC5leHBzOwoKaW1wb3J0IGphdmEuc3FsLlNR\nTEV4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5NYXA7CgppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5DbGFzc01hcHBpbmc7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLkphdmFTUUxUeXBlczsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5Kb2luczsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5SZXN1bHQ7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuU1FMQnVmZmVyOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNlbGVjdDsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuRmlsdGVyczsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuZXhwcy5FeHByZXNzaW9uVmlzaXRv\ncjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkNsYXNzTWV0YURh\ndGE7CgovKioKICogRmlsdGVyIGxpc3RlbmVyIHRoYXQgZXZhbHVhdGVzIHRv\nIGEgdmFsdWUuCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqLwpjbGFzcyBF\neHRlbnNpb24KICAgIGV4dGVuZHMgQWJzdHJhY3RWYWwKICAgIGltcGxlbWVu\ndHMgVmFsLCBFeHAgewoKICAgIHByaXZhdGUgZmluYWwgSkRCQ0ZpbHRlckxp\nc3RlbmVyIF9saXN0ZW5lcjsKICAgIHByaXZhdGUgZmluYWwgVmFsIF90YXJn\nZXQ7CiAgICBwcml2YXRlIGZpbmFsIFZhbCBfYXJnOwogICAgcHJpdmF0ZSBm\naW5hbCBDbGFzc01hcHBpbmcgX2NhbmRpZGF0ZTsKICAgIHByaXZhdGUgQ2xh\nc3NNZXRhRGF0YSBfbWV0YSA9IG51bGw7CiAgICBwcml2YXRlIENsYXNzIF9j\nYXN0ID0gbnVsbDsKCiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yLgogICAg\nICovCiAgICBwdWJsaWMgRXh0ZW5zaW9uKEpEQkNGaWx0ZXJMaXN0ZW5lciBs\naXN0ZW5lciwgVmFsIHRhcmdldCwKICAgICAgICBWYWwgYXJnLCBDbGFzc01h\ncHBpbmcgY2FuZGlkYXRlKSB7CiAgICAgICAgX2xpc3RlbmVyID0gbGlzdGVu\nZXI7CiAgICAgICAgX3RhcmdldCA9IHRhcmdldDsKICAgICAgICBfYXJnID0g\nYXJnOwogICAgICAgIF9jYW5kaWRhdGUgPSBjYW5kaWRhdGU7CiAgICB9Cgog\nICAgcHVibGljIENsYXNzTWV0YURhdGEgZ2V0TWV0YURhdGEoKSB7CiAgICAg\nICAgcmV0dXJuIF9tZXRhOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldE1l\ndGFEYXRhKENsYXNzTWV0YURhdGEgbWV0YSkgewogICAgICAgIF9tZXRhID0g\nbWV0YTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBpc1ZhcmlhYmxlKCkg\newogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBwdWJsaWMgYm9v\nbGVhbiBpc0FnZ3JlZ2F0ZSgpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAg\nICB9CgogICAgcHVibGljIENsYXNzIGdldFR5cGUoKSB7CiAgICAgICAgaWYg\nKF9jYXN0ICE9IG51bGwpCiAgICAgICAgICAgIHJldHVybiBfY2FzdDsKICAg\nICAgICBDbGFzcyB0YXJnZXRDbGFzcyA9IChfdGFyZ2V0ID09IG51bGwpID8g\nbnVsbCA6IF90YXJnZXQuZ2V0VHlwZSgpOwogICAgICAgIHJldHVybiBfbGlz\ndGVuZXIuZ2V0VHlwZSh0YXJnZXRDbGFzcywgZ2V0QXJnVHlwZXMoKSk7CiAg\nICB9CgogICAgcHJpdmF0ZSBDbGFzc1tdIGdldEFyZ1R5cGVzKCkgewogICAg\nICAgIGlmIChfYXJnID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBudWxs\nOwogICAgICAgIGlmIChfYXJnIGluc3RhbmNlb2YgQXJncykKICAgICAgICAg\nICAgcmV0dXJuICgoQXJncykgX2FyZykuZ2V0VHlwZXMoKTsKICAgICAgICBy\nZXR1cm4gbmV3IENsYXNzW117IF9hcmcuZ2V0VHlwZSgpIH07CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgc2V0SW1wbGljaXRUeXBlKENsYXNzIHR5cGUpIHsK\nICAgICAgICBfY2FzdCA9IHR5cGU7CiAgICB9CgogICAgcHVibGljIEV4cFN0\nYXRlIGluaXRpYWxpemUoU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIGlu\ndCBmbGFncykgewogICAgICAgIC8vIG5vdGUgdGhhdCB3ZSB0ZWxsIHRhcmdl\ndHMgYW5kIGFyZ3MgdG8gZXh0ZW5zaW9ucyB0aGF0IGFyZSBzcWwKICAgICAg\nICAvLyBwYXRocyB0byBnbyBhaGVhZCBhbmQgam9pbiB0byB0aGVpciByZWxh\ndGVkIG9iamVjdCAoaWYgYW55KSwKICAgICAgICAvLyBiZWNhdXNlIHdlIGFz\nc3VtZSB0aGF0LCB1bmxpa2UgbW9zdCBvcGVyYXRpb25zLCBpZiBhIHJlbGF0\naW9uCiAgICAgICAgLy8gZmllbGQgbGlrZSBhIDEtMSBpcyBnaXZlbiBhcyB0\naGUgdGFyZ2V0IG9mIGFuIGV4dGVuc2lvbiwgdGhlbgogICAgICAgIC8vIHRo\nZSBleHRlbnNpb24gcHJvYmFibHkgYWN0cyBvbiBzb21lIGZpZWxkIG9yIGNv\nbHVtbiBpbiB0aGUKICAgICAgICAvLyByZWxhdGVkIG9iamVjdCwgbm90IHRo\nZSAxLTEgZmllbGQgaXRzZWxmCiAgICAgICAgRXhwU3RhdGUgdGFyZ2V0U3Rh\ndGUgPSBudWxsOwogICAgICAgIEV4cFN0YXRlIGFyZ1N0YXRlID0gbnVsbDsK\nICAgICAgICBpZiAoX3RhcmdldCAhPSBudWxsKQogICAgICAgICAgICB0YXJn\nZXRTdGF0ZSA9IF90YXJnZXQuaW5pdGlhbGl6ZShzZWwsIGN0eCwgSk9JTl9S\nRUwpOwogICAgICAgIGlmIChfYXJnICE9IG51bGwpCiAgICAgICAgICAgIGFy\nZ1N0YXRlID0gX2FyZy5pbml0aWFsaXplKHNlbCwgY3R4LCBKT0lOX1JFTCk7\nCiAgICAgICAgSm9pbnMgajEgPSAodGFyZ2V0U3RhdGUgPT0gbnVsbCkgPyBu\ndWxsIDogdGFyZ2V0U3RhdGUuam9pbnM7CiAgICAgICAgSm9pbnMgajIgPSAo\nYXJnU3RhdGUgPT0gbnVsbCkgPyBudWxsIDogYXJnU3RhdGUuam9pbnM7CiAg\nICAgICAgcmV0dXJuIG5ldyBFeHRlbnNpb25FeHBTdGF0ZShzZWwuYW5kKGox\nLCBqMiksIHRhcmdldFN0YXRlLCAKICAgICAgICAgICAgYXJnU3RhdGUpOwog\nICAgfQoKICAgIC8qKgogICAgICogRXhwcmVzc2lvbiBzdGF0ZS4KICAgICAq\nLwogICAgcHJpdmF0ZSBzdGF0aWMgY2xhc3MgRXh0ZW5zaW9uRXhwU3RhdGUK\nICAgICAgICBleHRlbmRzIEV4cFN0YXRlIHsKCiAgICAgICAgcHVibGljIGZp\nbmFsIEV4cFN0YXRlIHRhcmdldFN0YXRlOwogICAgICAgIHB1YmxpYyBmaW5h\nbCBFeHBTdGF0ZSBhcmdTdGF0ZTsKCiAgICAgICAgcHVibGljIEV4dGVuc2lv\nbkV4cFN0YXRlKEpvaW5zIGpvaW5zLCBFeHBTdGF0ZSB0YXJnZXRTdGF0ZSwK\nICAgICAgICAgICAgRXhwU3RhdGUgYXJnU3RhdGUpIHsKICAgICAgICAgICAg\nc3VwZXIoam9pbnMpOwogICAgICAgICAgICB0aGlzLnRhcmdldFN0YXRlID0g\ndGFyZ2V0U3RhdGU7CiAgICAgICAgICAgIHRoaXMuYXJnU3RhdGUgPSBhcmdT\ndGF0ZTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZvaWQgc2VsZWN0\nKFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSwg\nCiAgICAgICAgYm9vbGVhbiBwa3MpIHsKICAgICAgICBzZWwuc2VsZWN0KG5l\nd1NRTEJ1ZmZlcihzZWwsIGN0eCwgc3RhdGUpLCB0aGlzKTsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCBzZWxlY3RDb2x1bW5zKFNlbGVjdCBzZWwsIEV4cENv\nbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSwgCiAgICAgICAgYm9vbGVhbiBw\na3MpIHsKICAgICAgICBFeHRlbnNpb25FeHBTdGF0ZSBlc3RhdGUgPSAoRXh0\nZW5zaW9uRXhwU3RhdGUpIHN0YXRlOwogICAgICAgIGlmIChfdGFyZ2V0ICE9\nIG51bGwpCiAgICAgICAgICAgIF90YXJnZXQuc2VsZWN0Q29sdW1ucyhzZWws\nIGN0eCwgZXN0YXRlLnRhcmdldFN0YXRlLCB0cnVlKTsKICAgICAgICBpZiAo\nX2FyZyAhPSBudWxsKQogICAgICAgICAgICBfYXJnLnNlbGVjdENvbHVtbnMo\nc2VsLCBjdHgsIGVzdGF0ZS5hcmdTdGF0ZSwgdHJ1ZSk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgZ3JvdXBCeShTZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0\neCwgRXhwU3RhdGUgc3RhdGUpIHsKICAgICAgICBzZWwuZ3JvdXBCeShuZXdT\nUUxCdWZmZXIoc2VsLCBjdHgsIHN0YXRlKSk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgb3JkZXJCeShTZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwgRXhw\nU3RhdGUgc3RhdGUsIAogICAgICAgIGJvb2xlYW4gYXNjKSB7CiAgICAgICAg\nc2VsLm9yZGVyQnkobmV3U1FMQnVmZmVyKHNlbCwgY3R4LCBzdGF0ZSksIGFz\nYywgZmFsc2UpOwogICAgfQoKICAgIHByaXZhdGUgU1FMQnVmZmVyIG5ld1NR\nTEJ1ZmZlcihTZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwgRXhwU3RhdGUg\nc3RhdGUpIHsKICAgICAgICBjYWxjdWxhdGVWYWx1ZShzZWwsIGN0eCwgc3Rh\ndGUsIG51bGwsIG51bGwpOwogICAgICAgIFNRTEJ1ZmZlciBidWYgPSBuZXcg\nU1FMQnVmZmVyKGN0eC5zdG9yZS5nZXREQkRpY3Rpb25hcnkoKSk7CiAgICAg\nICAgYXBwZW5kVG8oc2VsLCBjdHgsIHN0YXRlLCBidWYsIDApOwogICAgICAg\nIHJldHVybiBidWY7CiAgICB9CgogICAgcHVibGljIE9iamVjdCBsb2FkKEV4\ncENvbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSwgUmVzdWx0IHJlcykgCiAg\nICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIEZp\nbHRlcnMuY29udmVydChyZXMuZ2V0T2JqZWN0KHRoaXMsCiAgICAgICAgICAg\nIEphdmFTUUxUeXBlcy5KREJDX0RFRkFVTFQsIG51bGwpLCBnZXRUeXBlKCkp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGNhbGN1bGF0ZVZhbHVlKFNlbGVj\ndCBzZWwsIEV4cENvbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSwgCiAgICAg\nICAgVmFsIG90aGVyLCBFeHBTdGF0ZSBvdGhlclN0YXRlKSB7CiAgICAgICAg\nRXh0ZW5zaW9uRXhwU3RhdGUgZXN0YXRlID0gKEV4dGVuc2lvbkV4cFN0YXRl\nKSBzdGF0ZTsKICAgICAgICBpZiAoX3RhcmdldCAhPSBudWxsKQogICAgICAg\nICAgICBfdGFyZ2V0LmNhbGN1bGF0ZVZhbHVlKHNlbCwgY3R4LCBlc3RhdGUu\ndGFyZ2V0U3RhdGUsIG51bGwsIG51bGwpOwogICAgICAgIGlmIChfYXJnICE9\nIG51bGwpCiAgICAgICAgICAgIF9hcmcuY2FsY3VsYXRlVmFsdWUoc2VsLCBj\ndHgsIGVzdGF0ZS5hcmdTdGF0ZSwgbnVsbCwgbnVsbCk7CiAgICB9CgogICAg\ncHVibGljIGludCBsZW5ndGgoU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgs\nIEV4cFN0YXRlIHN0YXRlKSB7CiAgICAgICAgcmV0dXJuIDE7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgYXBwZW5kVG8oU2VsZWN0IHNlbCwgRXhwQ29udGV4\ndCBjdHgsIEV4cFN0YXRlIHN0YXRlLCAKICAgICAgICBTUUxCdWZmZXIgc3Fs\nLCBpbnQgaW5kZXgpIHsKICAgICAgICBFeHRlbnNpb25FeHBTdGF0ZSBlc3Rh\ndGUgPSAoRXh0ZW5zaW9uRXhwU3RhdGUpIHN0YXRlOwogICAgICAgIEZpbHRl\nclZhbHVlIHRhcmdldCA9IChfdGFyZ2V0ID09IG51bGwpID8gbnVsbAogICAg\nICAgICAgICA6IG5ldyBGaWx0ZXJWYWx1ZUltcGwoc2VsLCBjdHgsIGVzdGF0\nZS50YXJnZXRTdGF0ZSwgX3RhcmdldCk7CiAgICAgICAgX2xpc3RlbmVyLmFw\ncGVuZFRvKHNxbCwgdGFyZ2V0LCBnZXRBcmdzKHNlbCwgY3R4LCBlc3RhdGUu\nYXJnU3RhdGUpLAogICAgICAgICAgICBfY2FuZGlkYXRlLCBjdHguc3RvcmUp\nOwogICAgICAgIHNlbC5hcHBlbmQoc3FsLCBzdGF0ZS5qb2lucyk7CiAgICB9\nCgogICAgcHJpdmF0ZSBGaWx0ZXJWYWx1ZVtdIGdldEFyZ3MoU2VsZWN0IHNl\nbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlKSB7CiAgICAgICAg\naWYgKF9hcmcgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAg\nICAgICAgaWYgKF9hcmcgaW5zdGFuY2VvZiBBcmdzKQogICAgICAgICAgICBy\nZXR1cm4gKChBcmdzKSBfYXJnKS5uZXdGaWx0ZXJWYWx1ZXMoc2VsLCBjdHgs\nIHN0YXRlKTsKICAgICAgICByZXR1cm4gbmV3IEZpbHRlclZhbHVlW10gewog\nICAgICAgICAgICBuZXcgRmlsdGVyVmFsdWVJbXBsKHNlbCwgY3R4LCBzdGF0\nZSwgX2FyZykKICAgICAgICB9OwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGFj\nY2VwdFZpc2l0KEV4cHJlc3Npb25WaXNpdG9yIHZpc2l0b3IpIHsKICAgICAg\nICB2aXNpdG9yLmVudGVyKChFeHApIHRoaXMpOwogICAgICAgIGlmIChfdGFy\nZ2V0ICE9IG51bGwpCiAgICAgICAgICAgIF90YXJnZXQuYWNjZXB0VmlzaXQo\ndmlzaXRvcik7CiAgICAgICAgaWYgKF9hcmcgIT0gbnVsbCkKICAgICAgICAg\nICAgX2FyZy5hY2NlcHRWaXNpdCh2aXNpdG9yKTsKICAgICAgICB2aXNpdG9y\nLmV4aXQoKEV4cCkgdGhpcyk7CiAgICB9CgogICAgLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLwogICAgLy8gRXhwIGltcGxlbWVudGF0aW9uCiAgICAvLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vCgogICAgcHVibGljIEV4cFN0YXRlIGluaXRpYWxp\nemUoU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIE1hcCBjb250YWlucykg\newogICAgICAgIHJldHVybiBpbml0aWFsaXplKHNlbCwgY3R4LCAwKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBhcHBlbmRUbyhTZWxlY3Qgc2VsLCBFeHBD\nb250ZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUsIAogICAgICAgIFNRTEJ1ZmZl\nciBzcWwpIHsKICAgICAgICBjYWxjdWxhdGVWYWx1ZShzZWwsIGN0eCwgc3Rh\ndGUsIG51bGwsIG51bGwpOwogICAgICAgIGFwcGVuZFRvKHNlbCwgY3R4LCBz\ndGF0ZSwgc3FsLCAwKTsKICAgICAgICBzZWwuYXBwZW5kKHNxbCwgc3RhdGUu\nam9pbnMpOwogICAgfQp9Cg==\n","encoding":"base64"}

