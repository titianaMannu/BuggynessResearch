{"sha":"da54afb19ca38521fe8851b977143ba27e8e95be","node_id":"MDQ6QmxvYjIwNjM2NDpkYTU0YWZiMTljYTM4NTIxZmU4ODUxYjk3NzE0M2JhMjdlOGU5NWJl","size":5698,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/da54afb19ca38521fe8851b977143ba27e8e95be","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLmtlcm5lbC5leHBzOwoKaW1wb3J0IGphdmEuc3FsLlNR\nTEV4Y2VwdGlvbjsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5t\nZXRhLkNsYXNzTWFwcGluZzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5q\nZGJjLm1ldGEuSm9pbmFibGU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5zY2hlbWEuQ29sdW1uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMuc3FsLlJlc3VsdDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5q\nZGJjLnNxbC5TUUxCdWZmZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5zcWwuU2VsZWN0OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtl\ncm5lbC5GaWx0ZXJzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5l\nbC5leHBzLkV4cHJlc3Npb25WaXNpdG9yOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmxpYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5tZXRhLkNsYXNzTWV0YURhdGE7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEudXRpbC5BcHBsaWNhdGlvbklkczsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS51dGlsLklkOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLnV0aWwuT3BlbkpQQUlkOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0\naWwuVXNlckV4Y2VwdGlvbjsKaW1wb3J0IHNlcnAudXRpbC5OdW1iZXJzOwoK\nLyoqCiAqIFNlbGVjdCB0aGUgb2lkIHZhbHVlIG9mIGFuIG9iamVjdDsgdHlw\naWNhbGx5IHVzZWQgaW4gcHJvamVjdGlvbnMuCiAqCiAqIEBhdXRob3IgQWJl\nIFdoaXRlCiAqLwpjbGFzcyBHZXRPYmplY3RJZAogICAgZXh0ZW5kcyBBYnN0\ncmFjdFZhbCB7CgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9jYWxpemVy\nIF9sb2MgPSBMb2NhbGl6ZXIuZm9yUGFja2FnZQogICAgICAgIChHZXRPYmpl\nY3RJZC5jbGFzcyk7CgogICAgcHJpdmF0ZSBmaW5hbCBQQ1BhdGggX3BhdGg7\nCiAgICBwcml2YXRlIENsYXNzTWV0YURhdGEgX21ldGEgPSBudWxsOwoKICAg\nIC8qKgogICAgICogQ29uc3RydWN0b3IuIFByb3ZpZGUgdGhlIHZhbHVlIHdo\nb3NlIG9pZCB0byBleHRyYWN0LgogICAgICovCiAgICBwdWJsaWMgR2V0T2Jq\nZWN0SWQoUENQYXRoIHBhdGgpIHsKICAgICAgICBfcGF0aCA9IHBhdGg7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIG9pZCBjb2x1bW5zLgog\nICAgICovCiAgICBwdWJsaWMgQ29sdW1uW10gZ2V0Q29sdW1ucyhFeHBTdGF0\nZSBzdGF0ZSkgewogICAgICAgIHJldHVybiBfcGF0aC5nZXRDbGFzc01hcHBp\nbmcoc3RhdGUpLmdldFByaW1hcnlLZXlDb2x1bW5zKCk7CiAgICB9CgogICAg\ncHVibGljIENsYXNzTWV0YURhdGEgZ2V0TWV0YURhdGEoKSB7CiAgICAgICAg\ncmV0dXJuIF9tZXRhOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldE1ldGFE\nYXRhKENsYXNzTWV0YURhdGEgbWV0YSkgewogICAgICAgIF9tZXRhID0gbWV0\nYTsKICAgIH0KCiAgICBwdWJsaWMgQ2xhc3MgZ2V0VHlwZSgpIHsKICAgICAg\nICByZXR1cm4gT2JqZWN0LmNsYXNzOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHNldEltcGxpY2l0VHlwZShDbGFzcyB0eXBlKSB7CiAgICB9CgogICAgcHVi\nbGljIEV4cFN0YXRlIGluaXRpYWxpemUoU2VsZWN0IHNlbCwgRXhwQ29udGV4\ndCBjdHgsIGludCBmbGFncykgewogICAgICAgIEV4cFN0YXRlIHN0YXRlID0g\nX3BhdGguaW5pdGlhbGl6ZShzZWwsIGN0eCwgSk9JTl9SRUwpOwoKICAgICAg\nICAvLyBpdCdzIGRpZmZpY3VsdCB0byBnZXQgY2FsbHMgb24gbm9uLXBjIGZp\nZWxkcyB0byBhbHdheXMgcmV0dXJuIG51bGwKICAgICAgICAvLyB3aXRob3V0\nIHNjcmV3aW5nIHVwIHRoZSBTUUwsIHRvIGp1c3QgZG9uJ3QgbGV0IHVzZXJz\nIGNhbGwgaXQgb24KICAgICAgICAvLyBub24tcGMgZmllbGRzIGF0IGFsbAog\nICAgICAgIENsYXNzTWFwcGluZyBjbHMgPSBfcGF0aC5nZXRDbGFzc01hcHBp\nbmcoc3RhdGUpOwogICAgICAgIGlmIChjbHMgPT0gbnVsbCB8fCBjbHMuZ2V0\nRW1iZWRkaW5nTWFwcGluZygpICE9IG51bGwpCiAgICAgICAgICAgIHRocm93\nIG5ldyBVc2VyRXhjZXB0aW9uKF9sb2MuZ2V0KCJiYWQtZ2V0b2JqZWN0aWQi\nLAogICAgICAgICAgICAgICAgX3BhdGguZ2V0RmllbGRNYXBwaW5nKHN0YXRl\nKSkpOwogICAgICAgIHJldHVybiBzdGF0ZTsKICAgIH0KCiAgICBwdWJsaWMg\nT2JqZWN0IHRvRGF0YVN0b3JlVmFsdWUoU2VsZWN0IHNlbCwgRXhwQ29udGV4\ndCBjdHgsIEV4cFN0YXRlIHN0YXRlLCAKICAgICAgICBPYmplY3QgdmFsKSB7\nCiAgICAgICAgLy8gaWYgZGF0YXN0b3JlIGlkZW50aXR5LCB0cnkgdG8gY29u\ndmVydCB0byBhIGxvbmcgdmFsdWUKICAgICAgICBDbGFzc01hcHBpbmcgbWFw\ncGluZyA9IF9wYXRoLmdldENsYXNzTWFwcGluZyhzdGF0ZSk7CiAgICAgICAg\naWYgKG1hcHBpbmcuZ2V0SWRlbnRpdHlUeXBlKCkgPT0gbWFwcGluZy5JRF9E\nQVRBU1RPUkUpIHsKICAgICAgICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIElk\nKQogICAgICAgICAgICAgICAgcmV0dXJuIE51bWJlcnMudmFsdWVPZigoKElk\nKSB2YWwpLmdldElkKCkpOwogICAgICAgICAgICByZXR1cm4gRmlsdGVycy5j\nb252ZXJ0KHZhbCwgbG9uZy5jbGFzcyk7CiAgICAgICAgfQoKICAgICAgICAv\nLyBpZiB1bmtub3duIGlkZW50aXR5LCBjYW4ndCBkbyBtdWNoCiAgICAgICAg\naWYgKG1hcHBpbmcuZ2V0SWRlbnRpdHlUeXBlKCkgPT0gbWFwcGluZy5JRF9V\nTktOT1dOKQogICAgICAgICAgICByZXR1cm4gKHZhbCBpbnN0YW5jZW9mIE9w\nZW5KUEFJZCkgPwogICAgICAgICAgICAgICAgKChPcGVuSlBBSWQpIHZhbCku\nZ2V0SWRPYmplY3QoKSA6IHZhbDsKCiAgICAgICAgLy8gYXBwbGljYXRpb24g\naWRlbnRpdHk7IGNvbnZlcnQgdG8gcGsgdmFsdWVzIGluIHRoZSBzYW1lIG9y\nZGVyIGFzCiAgICAgICAgLy8gdGhlIG1hcHBpbmcncyBwcmltYXJ5IGtleSBj\nb2x1bW5zIHdpbGwgYmUgcmV0dXJuZWQKICAgICAgICBPYmplY3RbXSBwa3Mg\nPSBBcHBsaWNhdGlvbklkcy50b1BLVmFsdWVzKHZhbCwgbWFwcGluZyk7CiAg\nICAgICAgaWYgKHBrcy5sZW5ndGggPT0gMSkKICAgICAgICAgICAgcmV0dXJu\nIHBrc1swXTsKICAgICAgICBpZiAodmFsID09IG51bGwpCiAgICAgICAgICAg\nIHJldHVybiBwa3M7CiAgICAgICAgd2hpbGUgKCFtYXBwaW5nLmlzUHJpbWFy\neUtleU9iamVjdElkKGZhbHNlKSkKICAgICAgICAgICAgbWFwcGluZyA9IG1h\ncHBpbmcuZ2V0Sm9pbmFibGVQQ1N1cGVyY2xhc3NNYXBwaW5nKCk7CgogICAg\nICAgIENvbHVtbltdIGNvbHMgPSBtYXBwaW5nLmdldFByaW1hcnlLZXlDb2x1\nbW5zKCk7CiAgICAgICAgT2JqZWN0W10gdmFscyA9IG5ldyBPYmplY3RbY29s\ncy5sZW5ndGhdOwogICAgICAgIEpvaW5hYmxlIGpvaW47CiAgICAgICAgZm9y\nIChpbnQgaSA9IDA7IGkgPCBjb2xzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAg\nICAgIGpvaW4gPSBtYXBwaW5nLmFzc2VydEpvaW5hYmxlKGNvbHNbaV0pOwog\nICAgICAgICAgICB2YWxzW2ldID0gcGtzW21hcHBpbmcuZ2V0RmllbGQoam9p\nbi5nZXRGaWVsZEluZGV4KCkpLgogICAgICAgICAgICAgICAgZ2V0UHJpbWFy\neUtleUluZGV4KCldOwogICAgICAgICAgICB2YWxzW2ldID0gam9pbi5nZXRK\nb2luVmFsdWUodmFsc1tpXSwgY29sc1tpXSwgY3R4LnN0b3JlKTsKICAgICAg\nICB9CiAgICAgICAgcmV0dXJuIHZhbHM7CiAgICB9CgogICAgcHVibGljIHZv\naWQgc2VsZWN0KFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBFeHBTdGF0\nZSBzdGF0ZSwgCiAgICAgICAgYm9vbGVhbiBwa3MpIHsKICAgICAgICBzZWxl\nY3RDb2x1bW5zKHNlbCwgY3R4LCBzdGF0ZSwgdHJ1ZSk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgc2VsZWN0Q29sdW1ucyhTZWxlY3Qgc2VsLCBFeHBDb250\nZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUsIAogICAgICAgIGJvb2xlYW4gcGtz\nKSB7CiAgICAgICAgX3BhdGguc2VsZWN0Q29sdW1ucyhzZWwsIGN0eCwgc3Rh\ndGUsIHRydWUpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGdyb3VwQnkoU2Vs\nZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlKSB7CiAg\nICAgICAgX3BhdGguZ3JvdXBCeShzZWwsIGN0eCwgc3RhdGUpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIG9yZGVyQnkoU2VsZWN0IHNlbCwgRXhwQ29udGV4\ndCBjdHgsIEV4cFN0YXRlIHN0YXRlLCAKICAgICAgICBib29sZWFuIGFzYykg\newogICAgICAgIF9wYXRoLm9yZGVyQnkoc2VsLCBjdHgsIHN0YXRlLCBhc2Mp\nOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgbG9hZChFeHBDb250ZXh0IGN0\neCwgRXhwU3RhdGUgc3RhdGUsIFJlc3VsdCByZXMpCiAgICAgICAgdGhyb3dz\nIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIF9wYXRoLmxvYWQoY3R4\nLCBzdGF0ZSwgcmVzLCB0cnVlKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBj\nYWxjdWxhdGVWYWx1ZShTZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwgRXhw\nU3RhdGUgc3RhdGUsIAogICAgICAgIFZhbCBvdGhlciwgRXhwU3RhdGUgb3Ro\nZXJTdGF0ZSkgewogICAgICAgIF9wYXRoLmNhbGN1bGF0ZVZhbHVlKHNlbCwg\nY3R4LCBzdGF0ZSwgbnVsbCwgbnVsbCk7CiAgICB9CgogICAgcHVibGljIGlu\ndCBsZW5ndGgoU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRl\nIHN0YXRlKSB7CiAgICAgICAgcmV0dXJuIF9wYXRoLmxlbmd0aChzZWwsIGN0\neCwgc3RhdGUpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGFwcGVuZFRvKFNl\nbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSwgCiAg\nICAgICAgU1FMQnVmZmVyIHNxbCwgaW50IGluZGV4KSB7CiAgICAgICAgX3Bh\ndGguYXBwZW5kVG8oc2VsLCBjdHgsIHN0YXRlLCBzcWwsIGluZGV4KTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBhY2NlcHRWaXNpdChFeHByZXNzaW9uVmlz\naXRvciB2aXNpdG9yKSB7CiAgICAgICAgdmlzaXRvci5lbnRlcih0aGlzKTsK\nICAgICAgICBfcGF0aC5hY2NlcHRWaXNpdCh2aXNpdG9yKTsKICAgICAgICB2\naXNpdG9yLmV4aXQodGhpcyk7CiAgICB9Cn0KCg==\n","encoding":"base64"}

