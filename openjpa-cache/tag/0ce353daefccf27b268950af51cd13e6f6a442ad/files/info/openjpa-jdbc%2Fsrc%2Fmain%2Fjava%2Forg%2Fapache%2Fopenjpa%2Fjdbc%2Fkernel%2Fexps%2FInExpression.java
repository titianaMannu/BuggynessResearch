{"sha":"e63493e093fe31234a2e6e5c46f8e827d4d77e08","node_id":"MDQ6QmxvYjIwNjM2NDplNjM0OTNlMDkzZmUzMTIzNGEyZTZlNWM0NmY4ZTgyN2Q0ZDc3ZTA4","size":6000,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/e63493e093fe31234a2e6e5c46f8e827d4d77e08","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLmtlcm5lbC5leHBzOwoKaW1wb3J0IGphdmEudXRpbC5B\ncnJheUxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbjsKaW1wb3J0\nIGphdmEudXRpbC5JdGVyYXRvcjsKaW1wb3J0IGphdmEudXRpbC5NYXA7Cgpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLkNvbHVtbjsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5Kb2luczsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5TUUxCdWZmZXI7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuU2VsZWN0OwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5leHBzLkV4cHJlc3Npb25W\naXNpdG9yOwoKLyoqCiAqIFRlc3RzIHdoZXRoZXIgYSB2YWx1ZSBpcyBJTiBh\nIGNvbGxlY3Rpb24uCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqLwpjbGFz\ncyBJbkV4cHJlc3Npb24KICAgIGltcGxlbWVudHMgRXhwIHsKCiAgICBwcml2\nYXRlIGZpbmFsIFZhbCBfdmFsOwogICAgcHJpdmF0ZSBmaW5hbCBDb25zdCBf\nY29uc3Q7CgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3Rvci4gU3VwcGx5IHRo\nZSB2YWx1ZSB0byB0ZXN0IGFuZCB0aGUgY29uc3RhbnQgdG8gb2J0YWluCiAg\nICAgKiB0aGUgcGFyYW1ldGVycyBmcm9tLgogICAgICovCiAgICBwdWJsaWMg\nSW5FeHByZXNzaW9uKFZhbCB2YWwsIENvbnN0IGNvbnN0YW50KSB7CiAgICAg\nICAgX3ZhbCA9IHZhbDsKICAgICAgICBfY29uc3QgPSBjb25zdGFudDsKICAg\nIH0KCiAgICAvKioKICAgICAqIENvbnN0YW50IGNvbGxlY3Rpb24uCiAgICAg\nKi8KICAgIHB1YmxpYyBDb25zdCBnZXRDb25zdGFudCgpIHsKICAgICAgICBy\nZXR1cm4gX2NvbnN0OwogICAgfQoKICAgIC8qKgogICAgICogQ29udGFpbmVk\nIHZhbHVlLgogICAgICovCiAgICBwdWJsaWMgVmFsIGdldFZhbHVlKCkgewog\nICAgICAgIHJldHVybiBfdmFsOwogICAgfQoKICAgIHB1YmxpYyBFeHBTdGF0\nZSBpbml0aWFsaXplKFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBNYXAg\nY29udGFpbnMpIHsKICAgICAgICBFeHBTdGF0ZSB2YWx1ZVN0YXRlID0gX3Zh\nbC5pbml0aWFsaXplKHNlbCwgY3R4LCAwKTsKICAgICAgICBFeHBTdGF0ZSBj\nb25zdGFudFN0YXRlID0gX2NvbnN0LmluaXRpYWxpemUoc2VsLCBjdHgsIDAp\nOwogICAgICAgIHJldHVybiBuZXcgSW5FeHBTdGF0ZSh2YWx1ZVN0YXRlLmpv\naW5zLCBjb25zdGFudFN0YXRlLCB2YWx1ZVN0YXRlKTsKICAgIH0KCiAgICAv\nKioKICAgICAqIEV4cHJlc3Npb24gc3RhdGUuCiAgICAgKi8KICAgIHByaXZh\ndGUgc3RhdGljIGNsYXNzIEluRXhwU3RhdGUKICAgICAgICBleHRlbmRzIEV4\ncFN0YXRlIHsKCiAgICAgICAgcHVibGljIGZpbmFsIEV4cFN0YXRlIGNvbnN0\nYW50U3RhdGU7CiAgICAgICAgcHVibGljIGZpbmFsIEV4cFN0YXRlIHZhbHVl\nU3RhdGU7CgogICAgICAgIHB1YmxpYyBJbkV4cFN0YXRlKEpvaW5zIGpvaW5z\nLCBFeHBTdGF0ZSBjb25zdGFudFN0YXRlLCAKICAgICAgICAgICAgRXhwU3Rh\ndGUgdmFsdWVTdGF0ZSkgewogICAgICAgICAgICBzdXBlcihqb2lucyk7CiAg\nICAgICAgICAgIHRoaXMuY29uc3RhbnRTdGF0ZSA9IGNvbnN0YW50U3RhdGU7\nCiAgICAgICAgICAgIHRoaXMudmFsdWVTdGF0ZSA9IHZhbHVlU3RhdGU7CiAg\nICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIGFwcGVuZFRvKFNlbGVj\ndCBzZWwsIEV4cENvbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSwgCiAgICAg\nICAgU1FMQnVmZmVyIGJ1ZikgewogICAgICAgIEluRXhwU3RhdGUgaXN0YXRl\nID0gKEluRXhwU3RhdGUpIHN0YXRlOyAKICAgICAgICBfY29uc3QuY2FsY3Vs\nYXRlVmFsdWUoc2VsLCBjdHgsIGlzdGF0ZS5jb25zdGFudFN0YXRlLCBudWxs\nLCBudWxsKTsKICAgICAgICBfdmFsLmNhbGN1bGF0ZVZhbHVlKHNlbCwgY3R4\nLCBpc3RhdGUudmFsdWVTdGF0ZSwgbnVsbCwgbnVsbCk7CgogICAgICAgIENv\nbGxlY3Rpb24gY29sbCA9IGdldENvbGxlY3Rpb24oY3R4LCBpc3RhdGUuY29u\nc3RhbnRTdGF0ZSk7CiAgICAgICAgaWYgKGNvbGwgIT0gbnVsbCkgewogICAg\nICAgICAgICBDb2xsZWN0aW9uIGRzID0gbmV3IEFycmF5TGlzdChjb2xsLnNp\nemUoKSk7CiAgICAgICAgICAgIGZvciAoSXRlcmF0b3IgaXRyID0gY29sbC5p\ndGVyYXRvcigpOyBpdHIuaGFzTmV4dCgpOykKICAgICAgICAgICAgICAgIGRz\nLmFkZChfdmFsLnRvRGF0YVN0b3JlVmFsdWUoc2VsLCBjdHgsIGlzdGF0ZS52\nYWx1ZVN0YXRlLCAKICAgICAgICAgICAgICAgICAgICBpdHIubmV4dCgpKSk7\nCiAgICAgICAgICAgIGNvbGwgPSBkczsKICAgICAgICB9CgogICAgICAgIENv\nbHVtbltdIGNvbHMgPSBudWxsOwogICAgICAgIGlmIChfdmFsIGluc3RhbmNl\nb2YgUENQYXRoKQogICAgICAgICAgICBjb2xzID0gKChQQ1BhdGgpIF92YWwp\nLmdldENvbHVtbnMoaXN0YXRlLnZhbHVlU3RhdGUpOwogICAgICAgIGVsc2Ug\naWYgKF92YWwgaW5zdGFuY2VvZiBHZXRPYmplY3RJZCkKICAgICAgICAgICAg\nY29scyA9ICgoR2V0T2JqZWN0SWQpIF92YWwpLmdldENvbHVtbnMoaXN0YXRl\nLnZhbHVlU3RhdGUpOwoKICAgICAgICBpZiAoY29sbCA9PSBudWxsIHx8IGNv\nbGwuaXNFbXB0eSgpKQogICAgICAgICAgICBidWYuYXBwZW5kKCIxIDw+IDEi\nKTsKICAgICAgICBlbHNlIGlmIChfdmFsLmxlbmd0aChzZWwsIGN0eCwgaXN0\nYXRlLnZhbHVlU3RhdGUpID09IDEpCiAgICAgICAgICAgIGluQ29udGFpbnMo\nc2VsLCBjdHgsIGlzdGF0ZS52YWx1ZVN0YXRlLCBidWYsIGNvbGwsIGNvbHMp\nOwogICAgICAgIGVsc2UKICAgICAgICAgICAgb3JDb250YWlucyhzZWwsIGN0\neCwgaXN0YXRlLnZhbHVlU3RhdGUsIGJ1ZiwgY29sbCwgY29scyk7CiAgICAg\nICAgc2VsLmFwcGVuZChidWYsIHN0YXRlLmpvaW5zKTsKICAgIH0KCiAgICAv\nKioKICAgICAqIENvbnN0cnVjdCBhbiBJTiBjbGF1c2Ugd2l0aCB0aGUgdmFs\ndWUgb2YgdGhlIGdpdmVuIGNvbGxlY3Rpb24uCiAgICAgKi8KICAgIHByaXZh\ndGUgdm9pZCBpbkNvbnRhaW5zKFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4\nLCBFeHBTdGF0ZSBzdGF0ZSwgCiAgICAgICAgU1FMQnVmZmVyIGJ1ZiwgQ29s\nbGVjdGlvbiBjb2xsLCBDb2x1bW5bXSBjb2xzKSB7CiAgICAgICAgX3ZhbC5h\ncHBlbmRUbyhzZWwsIGN0eCwgc3RhdGUsIGJ1ZiwgMCk7CiAgICAgICAgYnVm\nLmFwcGVuZCgiIElOICgiKTsKCiAgICAgICAgQ29sdW1uIGNvbCA9IChjb2xz\nICE9IG51bGwgJiYgY29scy5sZW5ndGggPT0gMSkgPyBjb2xzWzBdIDogbnVs\nbDsKICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9IGNvbGwuaXRlcmF0b3Io\nKTsgaXRyLmhhc05leHQoKTspIHsKICAgICAgICAgICAgYnVmLmFwcGVuZFZh\nbHVlKGl0ci5uZXh0KCksIGNvbCk7CiAgICAgICAgICAgIGlmIChpdHIuaGFz\nTmV4dCgpKQogICAgICAgICAgICAgICAgYnVmLmFwcGVuZCgiLCAiKTsKICAg\nICAgICB9CiAgICAgICAgYnVmLmFwcGVuZCgiKSIpOwogICAgfQoKICAgIC8q\nKgogICAgICogSWYgdGhlIHZhbHVlIHRvIHRlc3QgaXMgYSBjb21wb3VuZCBr\nZXksIHdlIGNhbid0IHVzZSBJTiwKICAgICAqIHNvIGNyZWF0ZSBhIGNsYXVz\nZSBsaWtlICcoYSA9IGIgQU5EIGMgPSBkKSBPUiAoZSA9IGYgQU5EIGcgPSBo\nKSAuLi4nCiAgICAgKi8KICAgIHByaXZhdGUgdm9pZCBvckNvbnRhaW5zKFNl\nbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSwgCiAg\nICAgICAgU1FMQnVmZmVyIGJ1ZiwgQ29sbGVjdGlvbiBjb2xsLCBDb2x1bW5b\nXSBjb2xzKSB7CiAgICAgICAgaWYgKGNvbGwuc2l6ZSgpID4gMSkKICAgICAg\nICAgICAgYnVmLmFwcGVuZCgiKCIpOwoKICAgICAgICBPYmplY3RbXSB2YWxz\nOwogICAgICAgIENvbHVtbiBjb2w7CiAgICAgICAgZm9yIChJdGVyYXRvciBp\ndHIgPSBjb2xsLml0ZXJhdG9yKCk7IGl0ci5oYXNOZXh0KCk7KSB7CiAgICAg\nICAgICAgIHZhbHMgPSAoT2JqZWN0W10pIGl0ci5uZXh0KCk7CgogICAgICAg\nICAgICBidWYuYXBwZW5kKCIoIik7CiAgICAgICAgICAgIGZvciAoaW50IGkg\nPSAwOyBpIDwgdmFscy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAg\nY29sID0gKGNvbHMgIT0gbnVsbCAmJiBjb2xzLmxlbmd0aCA9PSB2YWxzLmxl\nbmd0aCkKICAgICAgICAgICAgICAgICAgICA/IGNvbHNbaV0gOiBudWxsOwog\nICAgICAgICAgICAgICAgaWYgKGkgPiAwKQogICAgICAgICAgICAgICAgICAg\nIGJ1Zi5hcHBlbmQoIiBBTkQgIik7CgogICAgICAgICAgICAgICAgX3ZhbC5h\ncHBlbmRUbyhzZWwsIGN0eCwgc3RhdGUsIGJ1ZiwgaSk7CiAgICAgICAgICAg\nICAgICBpZiAodmFsc1tpXSA9PSBudWxsKQogICAgICAgICAgICAgICAgICAg\nIGJ1Zi5hcHBlbmQoIiBJUyAiKTsKICAgICAgICAgICAgICAgIGVsc2UKICAg\nICAgICAgICAgICAgICAgICBidWYuYXBwZW5kKCIgPSAiKTsKICAgICAgICAg\nICAgICAgIGJ1Zi5hcHBlbmRWYWx1ZSh2YWxzW2ldLCBjb2wpOwogICAgICAg\nICAgICB9CiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoIikiKTsKCiAgICAgICAg\nICAgIGlmIChpdHIuaGFzTmV4dCgpKQogICAgICAgICAgICAgICAgYnVmLmFw\ncGVuZCgiIE9SICIpOwogICAgICAgIH0KICAgICAgICBpZiAoY29sbC5zaXpl\nKCkgPiAxKQogICAgICAgICAgICBidWYuYXBwZW5kKCIpIik7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgc2VsZWN0Q29sdW1ucyhTZWxlY3Qgc2VsLCBFeHBD\nb250ZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUsIAogICAgICAgIGJvb2xlYW4g\ncGtzKSB7CiAgICAgICAgSW5FeHBTdGF0ZSBpc3RhdGUgPSAoSW5FeHBTdGF0\nZSkgc3RhdGU7IAogICAgICAgIF9jb25zdC5zZWxlY3RDb2x1bW5zKHNlbCwg\nY3R4LCBpc3RhdGUuY29uc3RhbnRTdGF0ZSwgdHJ1ZSk7CiAgICAgICAgX3Zh\nbC5zZWxlY3RDb2x1bW5zKHNlbCwgY3R4LCBpc3RhdGUudmFsdWVTdGF0ZSwg\ndHJ1ZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGNvbGxl\nY3Rpb24gdG8gdGVzdCBmb3IgY29udGFpbm1lbnQgd2l0aC4KICAgICAqLwog\nICAgcHJvdGVjdGVkIENvbGxlY3Rpb24gZ2V0Q29sbGVjdGlvbihFeHBDb250\nZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUpIHsKICAgICAgICByZXR1cm4gKENv\nbGxlY3Rpb24pIF9jb25zdC5nZXRWYWx1ZShjdHgsIHN0YXRlKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBhY2NlcHRWaXNpdChFeHByZXNzaW9uVmlzaXRv\nciB2aXNpdG9yKSB7CiAgICAgICAgdmlzaXRvci5lbnRlcih0aGlzKTsKICAg\nICAgICBfdmFsLmFjY2VwdFZpc2l0KHZpc2l0b3IpOwogICAgICAgIF9jb25z\ndC5hY2NlcHRWaXNpdCh2aXNpdG9yKTsKICAgICAgICB2aXNpdG9yLmV4aXQo\ndGhpcyk7CiAgICB9Cn0K\n","encoding":"base64"}

