{"sha":"073baf15ed9c34e500dc123d2d878fd7c13f1886","node_id":"MDQ6QmxvYjIwNjM2NDowNzNiYWYxNWVkOWMzNGU1MDBkYzEyM2QyZDg3OGZkN2MxM2YxODg2","size":6040,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/073baf15ed9c34e500dc123d2d878fd7c13f1886","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLmtlcm5lbC5leHBzOwoKaW1wb3J0IGphdmEudXRpbC5N\nYXA7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5DbGFz\nc01hcHBpbmc7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRh\nLkRpc2NyaW1pbmF0b3I7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5tZXRhLkZpZWxkTWFwcGluZzsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5qZGJjLm1ldGEuTWFwcGluZ1JlcG9zaXRvcnk7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEuamRiYy5zcWwuSm9pbnM7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEuamRiYy5zcWwuU1FMQnVmZmVyOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmpkYmMuc3FsLlNlbGVjdDsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5rZXJuZWwuZXhwcy5FeHByZXNzaW9uVmlzaXRvcjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkphdmFUeXBlczsKCi8qKgogKiBU\nZXN0cyB3aGV0aGVyIHRoZSBnaXZlbiBwYXRoIGlzIGFuIGluc3RhbmNlIG9m\nIHRoZSBnaXZlbiBjbGFzcy4KICoKICogQGF1dGhvciBBYmUgV2hpdGUKICov\nCmNsYXNzIEluc3RhbmNlb2ZFeHByZXNzaW9uCiAgICBpbXBsZW1lbnRzIEV4\ncCB7CgogICAgcHJpdmF0ZSBmaW5hbCBQQ1BhdGggX3BhdGg7CiAgICBwcml2\nYXRlIGZpbmFsIENsYXNzIF9jbHM7CgogICAgLyoqCiAgICAgKiBDb25zdHJ1\nY3Rvci4gU3VwcGx5IHBhdGggYW5kIGNsYXNzIHRvIHRlc3QgZm9yLgogICAg\nICovCiAgICBwdWJsaWMgSW5zdGFuY2VvZkV4cHJlc3Npb24oUENQYXRoIHBh\ndGgsIENsYXNzIGNscykgewogICAgICAgIF9wYXRoID0gcGF0aDsKICAgICAg\nICBfY2xzID0gY2xzOwogICAgfQoKICAgIHB1YmxpYyBFeHBTdGF0ZSBpbml0\naWFsaXplKFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBNYXAgY29udGFp\nbnMpIHsKICAgICAgICAvLyBub3RlIHRoYXQgd2UgdGVsbCB0aGUgcGF0aCB0\nbyBnbyBhaGVhZCBhbmQgam9pbiB0byBpdHMgcmVsYXRlZAogICAgICAgIC8v\nIG9iamVjdCAoaWYgYW55KSBpbiBvcmRlciB0byBhY2Nlc3MgaXRzIGNsYXNz\nIGluZGljYXRvcgogICAgICAgIEV4cFN0YXRlIHBhdGhTdGF0ZSA9IF9wYXRo\nLmluaXRpYWxpemUoc2VsLCBjdHgsIFZhbC5KT0lOX1JFTCk7CgogICAgICAg\nIC8vIGRvZXMgdGhpcyBwYXRoIHJlcHJlc2VudCBhIHJlbGF0aW9uPyAgaWYg\nbm90LCB3aGF0IGNsYXNzCiAgICAgICAgLy8gaXMgdGhlIGZpZWxkPwogICAg\nICAgIENsYXNzTWFwcGluZyByZWxNYXBwaW5nID0gX3BhdGguZ2V0Q2xhc3NN\nYXBwaW5nKHBhdGhTdGF0ZSk7CiAgICAgICAgQ2xhc3MgcmVsID0gbnVsbDsK\nICAgICAgICBpZiAocmVsTWFwcGluZyA9PSBudWxsKSB7CiAgICAgICAgICAg\nIEZpZWxkTWFwcGluZyBmaWVsZCA9IF9wYXRoLmdldEZpZWxkTWFwcGluZyhw\nYXRoU3RhdGUpOwogICAgICAgICAgICBzd2l0Y2ggKGZpZWxkLmdldFR5cGVD\nb2RlKCkpIHsKICAgICAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLk1BUDoK\nICAgICAgICAgICAgICAgICAgICBpZiAoX3BhdGguaXNLZXkoKSkKICAgICAg\nICAgICAgICAgICAgICAgICAgcmVsID0gZmllbGQuZ2V0S2V5KCkuZ2V0RGVj\nbGFyZWRUeXBlKCk7CiAgICAgICAgICAgICAgICAgICAgLy8gbm8gYnJlYWsK\nICAgICAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkFSUkFZOgogICAgICAg\nICAgICAgICAgY2FzZSBKYXZhVHlwZXMuQ09MTEVDVElPTjoKICAgICAgICAg\nICAgICAgICAgICByZWwgPSBmaWVsZC5nZXRFbGVtZW50KCkuZ2V0RGVjbGFy\nZWRUeXBlKCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAg\nICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIHJlbCA9IGZp\nZWxkLmdldERlY2xhcmVkVHlwZSgpOwogICAgICAgICAgICB9CiAgICAgICAg\nfSBlbHNlCiAgICAgICAgICAgIHJlbCA9IHJlbE1hcHBpbmcuZ2V0RGVzY3Jp\nYmVkVHlwZSgpOwoKICAgICAgICAvLyBpZiB0aGUgcGF0aCByZXByZXNlbnRz\nIGEgcmVsYXRpb24sIGdldCBpdHMgY2xhc3MgaW5kaWNhdG9yIGFuZAogICAg\nICAgIC8vIG1ha2Ugc3VyZSBpdCdzIGpvaW5lZCBkb3duIHRvIGl0cyBiYXNl\nIHR5cGUKICAgICAgICBEaXNjcmltaW5hdG9yIGRpc2NyaW0gPSAocmVsTWFw\ncGluZyA9PSBudWxsIAogICAgICAgICAgICB8fCAhcmVsTWFwcGluZy5nZXRE\nZXNjcmliZWRUeXBlKCkuaXNBc3NpZ25hYmxlRnJvbShfY2xzKSkgCiAgICAg\nICAgICAgID8gbnVsbCA6IHJlbE1hcHBpbmcuZ2V0RGlzY3JpbWluYXRvcigp\nOwogICAgICAgIENsYXNzTWFwcGluZyBtYXBwaW5nID0gbnVsbDsKICAgICAg\nICBKb2lucyBqb2lucyA9IHBhdGhTdGF0ZS5qb2luczsKICAgICAgICBpZiAo\nZGlzY3JpbSAhPSBudWxsKSB7CiAgICAgICAgICAgIC8vIGNhY2hlIG1hcHBp\nbmcgZm9yIGNhc3QKICAgICAgICAgICAgTWFwcGluZ1JlcG9zaXRvcnkgcmVw\nb3MgPSBjdHguc3RvcmUuZ2V0Q29uZmlndXJhdGlvbigpLgogICAgICAgICAg\nICAgICAgZ2V0TWFwcGluZ1JlcG9zaXRvcnlJbnN0YW5jZSgpOwogICAgICAg\nICAgICBtYXBwaW5nID0gcmVwb3MuZ2V0TWFwcGluZyhfY2xzLCBjdHguc3Rv\ncmUuZ2V0Q29udGV4dCgpLgogICAgICAgICAgICAgICAgZ2V0Q2xhc3NMb2Fk\nZXIoKSwgZmFsc2UpOwoKICAgICAgICAgICAgLy8gaWYgbm90IGxvb2tpbmcg\nZm9yIGEgUEMsIGRvbid0IGJvdGhlciB3aXRoIGluZGljYXRvcgogICAgICAg\nICAgICBpZiAobWFwcGluZyA9PSBudWxsKQogICAgICAgICAgICAgICAgZGlz\nY3JpbSA9IG51bGw7CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAg\nICAgQ2xhc3NNYXBwaW5nIG93bmVyID0gZGlzY3JpbS5nZXRDbGFzc01hcHBp\nbmcoKTsKICAgICAgICAgICAgICAgIENsYXNzTWFwcGluZyBmcm9tLCB0bzsK\nICAgICAgICAgICAgICAgIGlmIChyZWxNYXBwaW5nLmdldERlc2NyaWJlZFR5\ncGUoKS5pc0Fzc2lnbmFibGVGcm9tCiAgICAgICAgICAgICAgICAgICAgKG93\nbmVyLmdldERlc2NyaWJlZFR5cGUoKSkpIHsKICAgICAgICAgICAgICAgICAg\nICBmcm9tID0gb3duZXI7CiAgICAgICAgICAgICAgICAgICAgdG8gPSByZWxN\nYXBwaW5nOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAg\nICAgICAgICBmcm9tID0gcmVsTWFwcGluZzsKICAgICAgICAgICAgICAgICAg\nICB0byA9IG93bmVyOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAg\nICAgIGZvciAoOyBmcm9tICE9IG51bGwgJiYgZnJvbSAhPSB0bzsKICAgICAg\nICAgICAgICAgICAgICBmcm9tID0gZnJvbS5nZXRKb2luYWJsZVBDU3VwZXJj\nbGFzc01hcHBpbmcoKSkKICAgICAgICAgICAgICAgICAgICBqb2lucyA9IGZy\nb20uam9pblN1cGVyY2xhc3Moam9pbnMsIGZhbHNlKTsKICAgICAgICAgICAg\nfQogICAgICAgIH0KICAgICAgICByZXR1cm4gbmV3IEluc3RhbmNlb2ZFeHBT\ndGF0ZShqb2lucywgcGF0aFN0YXRlLCBtYXBwaW5nLCBkaXNjcmltLCByZWwp\nOwogICAgfQoKICAgIC8qKgogICAgICogRXhwcmVzc2lvbiBzdGF0ZS4KICAg\nICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgY2xhc3MgSW5zdGFuY2VvZkV4cFN0\nYXRlCiAgICAgICAgZXh0ZW5kcyBFeHBTdGF0ZSB7CgogICAgICAgIHB1Ymxp\nYyBmaW5hbCBFeHBTdGF0ZSBwYXRoU3RhdGU7CiAgICAgICAgcHVibGljIGZp\nbmFsIENsYXNzTWFwcGluZyBtYXBwaW5nOwogICAgICAgIHB1YmxpYyBmaW5h\nbCBEaXNjcmltaW5hdG9yIGRpc2NyaW07CiAgICAgICAgcHVibGljIGZpbmFs\nIENsYXNzIHJlbDsKCiAgICAgICAgcHVibGljIEluc3RhbmNlb2ZFeHBTdGF0\nZShKb2lucyBqb2lucywgRXhwU3RhdGUgcGF0aFN0YXRlLCAKICAgICAgICAg\nICAgQ2xhc3NNYXBwaW5nIG1hcHBpbmcsIERpc2NyaW1pbmF0b3IgZGlzY3Jp\nbSwgQ2xhc3MgcmVsKSB7CiAgICAgICAgICAgIHN1cGVyKGpvaW5zKTsKICAg\nICAgICAgICAgdGhpcy5wYXRoU3RhdGUgPSBwYXRoU3RhdGU7CiAgICAgICAg\nICAgIHRoaXMubWFwcGluZyA9IG1hcHBpbmc7CiAgICAgICAgICAgIHRoaXMu\nZGlzY3JpbSA9IGRpc2NyaW07CiAgICAgICAgICAgIHRoaXMucmVsID0gcmVs\nOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCBhcHBlbmRUbyhT\nZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUsIAog\nICAgICAgIFNRTEJ1ZmZlciBzcWwpIHsKICAgICAgICAvLyBpZiBubyBjbGFz\ncyBpbmRpY2F0b3Igb3IgYSBmaW5hbCBjbGFzcywganVzdCBhcHBlbmQgdHJ1\nZSBvciBmYWxzZQogICAgICAgIC8vIGRlcGVuZGluZyBvbiB3aGV0aGVyIHRo\nZSBjYXN0IG1hdGNoZXMgdGhlIGV4cGVjdGVkIHR5cGUKICAgICAgICBJbnN0\nYW5jZW9mRXhwU3RhdGUgaXN0YXRlID0gKEluc3RhbmNlb2ZFeHBTdGF0ZSkg\nc3RhdGU7CiAgICAgICAgaWYgKGlzdGF0ZS5kaXNjcmltID09IG51bGwpIHsK\nICAgICAgICAgICAgaWYgKF9jbHMuaXNBc3NpZ25hYmxlRnJvbShpc3RhdGUu\ncmVsKSkKICAgICAgICAgICAgICAgIHNxbC5hcHBlbmQoIjEgPSAxIik7CiAg\nICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHNxbC5hcHBlbmQoIjEg\nPD4gMSIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGN0eC5zdG9y\nZS5sb2FkU3ViY2xhc3Nlcyhpc3RhdGUuZGlzY3JpbS5nZXRDbGFzc01hcHBp\nbmcoKSk7CiAgICAgICAgICAgIFNRTEJ1ZmZlciBidWYgPSBpc3RhdGUuZGlz\nY3JpbS5nZXRDbGFzc0NvbmRpdGlvbnMoc2VsLAogICAgICAgICAgICAgICAg\naXN0YXRlLmpvaW5zLCBpc3RhdGUubWFwcGluZywgdHJ1ZSk7CiAgICAgICAg\nICAgIGlmIChidWYgPT0gbnVsbCkKICAgICAgICAgICAgICAgIHNxbC5hcHBl\nbmQoIjEgPSAxIik7CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAg\nIHNxbC5hcHBlbmQoYnVmKTsKICAgICAgICB9CiAgICAgICAgc2VsLmFwcGVu\nZChzcWwsIGlzdGF0ZS5qb2lucyk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nc2VsZWN0Q29sdW1ucyhTZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwgRXhw\nU3RhdGUgc3RhdGUsIAogICAgICAgIGJvb2xlYW4gcGtzKSB7CiAgICAgICAg\nSW5zdGFuY2VvZkV4cFN0YXRlIGlzdGF0ZSA9IChJbnN0YW5jZW9mRXhwU3Rh\ndGUpIHN0YXRlOwogICAgICAgIGlmIChpc3RhdGUuZGlzY3JpbSAhPSBudWxs\nKQogICAgICAgICAgICBzZWwuc2VsZWN0KGlzdGF0ZS5kaXNjcmltLmdldENv\nbHVtbnMoKSwgaXN0YXRlLmpvaW5zKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBhY2NlcHRWaXNpdChFeHByZXNzaW9uVmlzaXRvciB2aXNpdG9yKSB7CiAg\nICAgICAgdmlzaXRvci5lbnRlcih0aGlzKTsKICAgICAgICBfcGF0aC5hY2Nl\ncHRWaXNpdCh2aXNpdG9yKTsKICAgICAgICB2aXNpdG9yLmV4aXQodGhpcyk7\nCiAgICB9Cn0KCg==\n","encoding":"base64"}

