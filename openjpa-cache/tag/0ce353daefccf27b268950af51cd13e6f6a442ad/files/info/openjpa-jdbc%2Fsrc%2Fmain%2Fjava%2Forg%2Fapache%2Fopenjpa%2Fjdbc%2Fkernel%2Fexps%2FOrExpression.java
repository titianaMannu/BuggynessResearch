{"sha":"346026fb339dc8c7beaf58f3bba1394ed29a44d8","node_id":"MDQ6QmxvYjIwNjM2NDozNDYwMjZmYjMzOWRjOGM3YmVhZjU4ZjNiYmExMzk0ZWQyOWE0NGQ4","size":3294,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/346026fb339dc8c7beaf58f3bba1394ed29a44d8","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLmtlcm5lbC5leHBzOwoKaW1wb3J0IGphdmEudXRpbC5I\nYXNoTWFwOwppbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9yOwppbXBvcnQgamF2\nYS51dGlsLk1hcDsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5z\ncWwuU1FMQnVmZmVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMu\nc3FsLlNlbGVjdDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwu\nZXhwcy5FeHByZXNzaW9uVmlzaXRvcjsKCi8qKgogKiBDb21iaW5lcyB0d28g\nZXhwcmVzc2lvbnMuCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqLwpjbGFz\ncyBPckV4cHJlc3Npb24KICAgIGltcGxlbWVudHMgRXhwIHsKCiAgICBwcml2\nYXRlIGZpbmFsIEV4cCBfZXhwMTsKICAgIHByaXZhdGUgZmluYWwgRXhwIF9l\neHAyOwoKICAgIC8qKgogICAgICogQ29uc3RydWN0b3IuIFN1cHBseSB0aGUg\nZXhwcmVzc2lvbnMgdG8gY29tYmluZS4KICAgICAqLwogICAgcHVibGljIE9y\nRXhwcmVzc2lvbihFeHAgZXhwMSwgRXhwIGV4cDIpIHsKICAgICAgICBfZXhw\nMSA9IGV4cDE7CiAgICAgICAgX2V4cDIgPSBleHAyOwogICAgfQoKICAgIHB1\nYmxpYyBFeHBTdGF0ZSBpbml0aWFsaXplKFNlbGVjdCBzZWwsIEV4cENvbnRl\neHQgY3R4LCBNYXAgY29udGFpbnMpIHsKICAgICAgICAvLyB3aGVuIE9SJ2lu\nZyBleHByZXNzaW9ucyBlYWNoIGV4cHJlc3Npb24gZ2V0cyBpdHMgb3duIGNv\ncHkgb2YgdGhlCiAgICAgICAgLy8gY29udGFpbnMgY291bnRzLCBjYXVzZSBp\ndCdzIE9LIGZvciBlYWNoIHRvIHVzZSB0aGUgc2FtZSBhbGlhc2VzCiAgICAg\nICAgTWFwIGNvbnRhaW5zMiA9IG51bGw7CiAgICAgICAgaWYgKGNvbnRhaW5z\nICE9IG51bGwpCiAgICAgICAgICAgIGNvbnRhaW5zMiA9IG5ldyBIYXNoTWFw\nKGNvbnRhaW5zKTsKCiAgICAgICAgRXhwU3RhdGUgczEgPSBfZXhwMS5pbml0\naWFsaXplKHNlbCwgY3R4LCBjb250YWlucyk7CiAgICAgICAgRXhwU3RhdGUg\nczIgPSBfZXhwMi5pbml0aWFsaXplKHNlbCwgY3R4LCBjb250YWluczIpOwog\nICAgICAgIEV4cFN0YXRlIHJldCA9IG5ldyBCaW5hcnlPcEV4cFN0YXRlKHNl\nbC5vcihzMS5qb2lucywgczIuam9pbnMpLCBzMSwgczIpOwogICAgICAgIGlm\nIChjb250YWlucyA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gcmV0OwoK\nICAgICAgICAvLyBjb21iaW5lIHRoZSBjb250YWlucyBjb3VudHMgZnJvbSB0\naGUgY29weSBpbnRvIHRoZSBtYWluIG1hcAogICAgICAgIE1hcC5FbnRyeSBl\nbnRyeTsKICAgICAgICBJbnRlZ2VyIHZhbDEsIHZhbDI7CiAgICAgICAgZm9y\nIChJdGVyYXRvciBpdHIgPSBjb250YWluczIuZW50cnlTZXQoKS5pdGVyYXRv\ncigpOyBpdHIuaGFzTmV4dCgpOykgewogICAgICAgICAgICBlbnRyeSA9IChN\nYXAuRW50cnkpIGl0ci5uZXh0KCk7CiAgICAgICAgICAgIHZhbDIgPSAoSW50\nZWdlcikgZW50cnkuZ2V0VmFsdWUoKTsKICAgICAgICAgICAgdmFsMSA9IChJ\nbnRlZ2VyKSBjb250YWlucy5nZXQoZW50cnkuZ2V0S2V5KCkpOwogICAgICAg\nICAgICBpZiAodmFsMSA9PSBudWxsIHx8IHZhbDIuaW50VmFsdWUoKSA+IHZh\nbDEuaW50VmFsdWUoKSkKICAgICAgICAgICAgICAgIGNvbnRhaW5zLnB1dChl\nbnRyeS5nZXRLZXkoKSwgdmFsMik7CiAgICAgICAgfQogICAgICAgIHJldHVy\nbiByZXQ7CiAgICB9CgogICAgcHVibGljIHZvaWQgYXBwZW5kVG8oU2VsZWN0\nIHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlLCAKICAgICAg\nICBTUUxCdWZmZXIgYnVmKSB7CiAgICAgICAgQmluYXJ5T3BFeHBTdGF0ZSBi\nc3RhdGUgPSAoQmluYXJ5T3BFeHBTdGF0ZSkgc3RhdGU7CiAgICAgICAgYm9v\nbGVhbiBwYXJlbiA9IGJzdGF0ZS5qb2lucyAhPSBudWxsICYmICFic3RhdGUu\nam9pbnMuaXNFbXB0eSgpOwogICAgICAgIGlmIChwYXJlbikKICAgICAgICAg\nICAgYnVmLmFwcGVuZCgiKCIpOwoKICAgICAgICBfZXhwMS5hcHBlbmRUbyhz\nZWwsIGN0eCwgYnN0YXRlLnN0YXRlMSwgYnVmKTsKICAgICAgICBidWYuYXBw\nZW5kKCIgT1IgIik7CiAgICAgICAgX2V4cDIuYXBwZW5kVG8oc2VsLCBjdHgs\nIGJzdGF0ZS5zdGF0ZTIsIGJ1Zik7CgogICAgICAgIGlmIChwYXJlbikKICAg\nICAgICAgICAgYnVmLmFwcGVuZCgiKSIpOwogICAgICAgIHNlbC5hcHBlbmQo\nYnVmLCBic3RhdGUuam9pbnMpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNl\nbGVjdENvbHVtbnMoU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0\nYXRlIHN0YXRlLCAKICAgICAgICBib29sZWFuIHBrcykgewogICAgICAgIEJp\nbmFyeU9wRXhwU3RhdGUgYnN0YXRlID0gKEJpbmFyeU9wRXhwU3RhdGUpIHN0\nYXRlOwogICAgICAgIF9leHAxLnNlbGVjdENvbHVtbnMoc2VsLCBjdHgsIGJz\ndGF0ZS5zdGF0ZTEsIHBrcyk7CiAgICAgICAgX2V4cDIuc2VsZWN0Q29sdW1u\ncyhzZWwsIGN0eCwgYnN0YXRlLnN0YXRlMiwgcGtzKTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBhY2NlcHRWaXNpdChFeHByZXNzaW9uVmlzaXRvciB2aXNp\ndG9yKSB7CiAgICAgICAgdmlzaXRvci5lbnRlcih0aGlzKTsKICAgICAgICBf\nZXhwMS5hY2NlcHRWaXNpdCh2aXNpdG9yKTsKICAgICAgICBfZXhwMi5hY2Nl\ncHRWaXNpdCh2aXNpdG9yKTsKICAgICAgICB2aXNpdG9yLmV4aXQodGhpcyk7\nCiAgICB9Cn0K\n","encoding":"base64"}

