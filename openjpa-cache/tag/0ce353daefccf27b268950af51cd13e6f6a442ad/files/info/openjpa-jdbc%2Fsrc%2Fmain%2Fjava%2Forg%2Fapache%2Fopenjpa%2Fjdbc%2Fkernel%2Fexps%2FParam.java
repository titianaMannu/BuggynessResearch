{"sha":"4f2f04ecf21bd4918b10407ab0b79476f5af3ed6","node_id":"MDQ6QmxvYjIwNjM2NDo0ZjJmMDRlY2YyMWJkNDkxOGIxMDQwN2FiMGI3OTQ3NmY1YWYzZWQ2","size":3963,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/4f2f04ecf21bd4918b10407ab0b79476f5af3ed6","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLmtlcm5lbC5leHBzOwoKaW1wb3J0IGphdmEudXRpbC5D\nb2xsZWN0aW9uOwppbXBvcnQgamF2YS51dGlsLk1hcDsKCmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuZW5oYW5jZS5QZXJzaXN0ZW5jZUNhcGFibGU7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLkNsYXNzTWFwcGlu\nZzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5TUUxCdWZm\nZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuU2VsZWN0\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5GaWx0ZXJzOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5leHBzLlBhcmFtZXRl\ncjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLkltcGxIZWxwZXI7\nCgovKioKICogQSBwYXJhbWV0ZXIgaW4gYSBmaWx0ZXIuCiAqCiAqIEBhdXRo\nb3IgQWJlIFdoaXRlCiAqLwpjbGFzcyBQYXJhbQogICAgZXh0ZW5kcyBDb25z\ndAogICAgaW1wbGVtZW50cyBQYXJhbWV0ZXIgewoKICAgIHByaXZhdGUgZmlu\nYWwgU3RyaW5nIF9uYW1lOwogICAgcHJpdmF0ZSBDbGFzcyBfdHlwZSA9IG51\nbGw7CiAgICBwcml2YXRlIGludCBfaWR4ID0gLTE7CiAgICBwcml2YXRlIGJv\nb2xlYW4gX2NvbnRhaW5lciA9IGZhbHNlOwoKICAgIC8qKgogICAgICogQ29u\nc3RydWN0b3IuIFN1cHBseSBwYXJhbWV0ZXIgbmFtZSBhbmQgdHlwZS4KICAg\nICAqLwogICAgcHVibGljIFBhcmFtKFN0cmluZyBuYW1lLCBDbGFzcyB0eXBl\nKSB7CiAgICAgICAgX25hbWUgPSBuYW1lOwogICAgICAgIHNldEltcGxpY2l0\nVHlwZSh0eXBlKTsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nIGdldE5hbWUo\nKSB7CiAgICAgICAgcmV0dXJuIF9uYW1lOwogICAgfQoKICAgIHB1YmxpYyBT\ndHJpbmcgZ2V0UGFyYW1ldGVyTmFtZSgpIHsKICAgICAgICByZXR1cm4gZ2V0\nTmFtZSgpOwogICAgfQoKICAgIHB1YmxpYyBDbGFzcyBnZXRUeXBlKCkgewog\nICAgICAgIHJldHVybiBfdHlwZTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBz\nZXRJbXBsaWNpdFR5cGUoQ2xhc3MgdHlwZSkgewogICAgICAgIF90eXBlID0g\ndHlwZTsKICAgICAgICBfY29udGFpbmVyID0gKGdldE1ldGFEYXRhKCkgPT0g\nbnVsbCB8fCAhSW1wbEhlbHBlci5pc01hbmFnZWRUeXBlKHR5cGUpKQogICAg\nICAgICAgICAmJiAoQ29sbGVjdGlvbi5jbGFzcy5pc0Fzc2lnbmFibGVGcm9t\nKHR5cGUpCiAgICAgICAgICAgIHx8IE1hcC5jbGFzcy5pc0Fzc2lnbmFibGVG\ncm9tKHR5cGUpKTsKICAgIH0KCiAgICBwdWJsaWMgaW50IGdldEluZGV4KCkg\newogICAgICAgIHJldHVybiBfaWR4OwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHNldEluZGV4KGludCBpZHgpIHsKICAgICAgICBfaWR4ID0gaWR4OwogICAg\nfQoKICAgIHB1YmxpYyBPYmplY3QgZ2V0VmFsdWUoT2JqZWN0W10gcGFyYW1z\nKSB7CiAgICAgICAgcmV0dXJuIEZpbHRlcnMuY29udmVydChwYXJhbXNbX2lk\neF0sIGdldFR5cGUoKSk7CiAgICB9CgogICAgcHVibGljIE9iamVjdCBnZXRT\nUUxWYWx1ZShTZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwgRXhwU3RhdGUg\nc3RhdGUpIHsKICAgICAgICByZXR1cm4gKChQYXJhbUV4cFN0YXRlKSBzdGF0\nZSkuc3FsVmFsdWU7CiAgICB9CgogICAgcHVibGljIEV4cFN0YXRlIGluaXRp\nYWxpemUoU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIGludCBmbGFncykg\newogICAgICAgIHJldHVybiBuZXcgUGFyYW1FeHBTdGF0ZSgpOwogICAgfQoK\nICAgIC8qKgogICAgICogRXhwcmVzc2lvbiBzdGF0ZS4KICAgICAqLwogICAg\ncHJpdmF0ZSBzdGF0aWMgY2xhc3MgUGFyYW1FeHBTdGF0ZQogICAgICAgIGV4\ndGVuZHMgQ29uc3RFeHBTdGF0ZSB7CgogICAgICAgIHB1YmxpYyBPYmplY3Qg\nc3FsVmFsdWUgPSBudWxsOwogICAgICAgIHB1YmxpYyBpbnQgb3RoZXJMZW5n\ndGggPSAxOyAKICAgIH0gCgogICAgcHVibGljIHZvaWQgY2FsY3VsYXRlVmFs\ndWUoU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRl\nLCAKICAgICAgICBWYWwgb3RoZXIsIEV4cFN0YXRlIG90aGVyU3RhdGUpIHsK\nICAgICAgICBzdXBlci5jYWxjdWxhdGVWYWx1ZShzZWwsIGN0eCwgc3RhdGUs\nIG90aGVyLCBvdGhlclN0YXRlKTsKICAgICAgICBPYmplY3QgdmFsID0gZ2V0\nVmFsdWUoY3R4LnBhcmFtcyk7CiAgICAgICAgUGFyYW1FeHBTdGF0ZSBwc3Rh\ndGUgPSAoUGFyYW1FeHBTdGF0ZSkgc3RhdGU7CiAgICAgICAgaWYgKG90aGVy\nICE9IG51bGwgJiYgIV9jb250YWluZXIpIHsKICAgICAgICAgICAgcHN0YXRl\nLnNxbFZhbHVlID0gb3RoZXIudG9EYXRhU3RvcmVWYWx1ZShzZWwsIGN0eCwg\nb3RoZXJTdGF0ZSwgdmFsKTsKICAgICAgICAgICAgcHN0YXRlLm90aGVyTGVu\nZ3RoID0gb3RoZXIubGVuZ3RoKHNlbCwgY3R4LCBvdGhlclN0YXRlKTsKICAg\nICAgICB9IGVsc2UgaWYgKHZhbCBpbnN0YW5jZW9mIFBlcnNpc3RlbmNlQ2Fw\nYWJsZSkgewogICAgICAgICAgICBDbGFzc01hcHBpbmcgbWFwcGluZyA9IGN0\neC5zdG9yZS5nZXRDb25maWd1cmF0aW9uKCkuCiAgICAgICAgICAgICAgICBn\nZXRNYXBwaW5nUmVwb3NpdG9yeUluc3RhbmNlKCkuZ2V0TWFwcGluZyh2YWwu\nZ2V0Q2xhc3MoKSwgCiAgICAgICAgICAgICAgICBjdHguc3RvcmUuZ2V0Q29u\ndGV4dCgpLmdldENsYXNzTG9hZGVyKCksIHRydWUpOwogICAgICAgICAgICBw\nc3RhdGUuc3FsVmFsdWUgPSBtYXBwaW5nLnRvRGF0YVN0b3JlVmFsdWUodmFs\nLCAKICAgICAgICAgICAgICAgIG1hcHBpbmcuZ2V0UHJpbWFyeUtleUNvbHVt\nbnMoKSwgY3R4LnN0b3JlKTsKICAgICAgICAgICAgcHN0YXRlLm90aGVyTGVu\nZ3RoID0gbWFwcGluZy5nZXRQcmltYXJ5S2V5Q29sdW1ucygpLmxlbmd0aDsK\nICAgICAgICB9IGVsc2UKICAgICAgICAgICAgcHN0YXRlLnNxbFZhbHVlID0g\ndmFsOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGFwcGVuZFRvKFNlbGVjdCBz\nZWwsIEV4cENvbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSwgCiAgICAgICAg\nU1FMQnVmZmVyIHNxbCwgaW50IGluZGV4KSB7CiAgICAgICAgUGFyYW1FeHBT\ndGF0ZSBwc3RhdGUgPSAoUGFyYW1FeHBTdGF0ZSkgc3RhdGU7CiAgICAgICAg\naWYgKHBzdGF0ZS5vdGhlckxlbmd0aCA+IDEpCiAgICAgICAgICAgIHNxbC5h\ncHBlbmRWYWx1ZSgoKE9iamVjdFtdKSBwc3RhdGUuc3FsVmFsdWUpW2luZGV4\nXSwgCiAgICAgICAgICAgICAgICBwc3RhdGUuZ2V0Q29sdW1uKGluZGV4KSk7\nCiAgICAgICAgZWxzZQogICAgICAgICAgICBzcWwuYXBwZW5kVmFsdWUocHN0\nYXRlLnNxbFZhbHVlLCBwc3RhdGUuZ2V0Q29sdW1uKGluZGV4KSk7CiAgICB9\nCn0K\n","encoding":"base64"}

