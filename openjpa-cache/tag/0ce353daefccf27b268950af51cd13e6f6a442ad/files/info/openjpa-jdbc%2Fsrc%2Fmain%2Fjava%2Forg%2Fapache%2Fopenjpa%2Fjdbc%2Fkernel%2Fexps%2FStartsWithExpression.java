{"sha":"3e5c4874aafe388c579a735e0a606c57a43105c6","node_id":"MDQ6QmxvYjIwNjM2NDozZTVjNDg3NGFhZmUzODhjNTc5YTczNWUwYTYwNmM1N2E0MzEwNWM2","size":7551,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/3e5c4874aafe388c579a735e0a606c57a43105c6","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLmtlcm5lbC5leHBzOwoKaW1wb3J0IGphdmEudXRpbC5N\nYXA7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5DbGFz\nc01hcHBpbmc7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRh\nLkZpZWxkTWFwcGluZzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLnNjaGVtYS5Db2x1bW47CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5zY2hlbWEuVGFibGU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5zcWwuREJEaWN0aW9uYXJ5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMuc3FsLlNRTEJ1ZmZlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5qZGJjLnNxbC5TZWxlY3Q7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\na2VybmVsLmV4cHMuRXhwcmVzc2lvblZpc2l0b3I7CmltcG9ydCBzZXJwLnV0\naWwuTnVtYmVyczsKCi8qKgogKiBUZXN0IGlmIG9uZSBzdHJpbmcgc3RhcnRz\nIHdpdGggYW5vdGhlci4KICoKICogQGF1dGhvciBBYmUgV2hpdGUKICovCmNs\nYXNzIFN0YXJ0c1dpdGhFeHByZXNzaW9uCiAgICBpbXBsZW1lbnRzIEV4cCB7\nCgogICAgcHJpdmF0ZSBmaW5hbCBWYWwgX3ZhbDE7CiAgICBwcml2YXRlIGZp\nbmFsIFZhbCBfdmFsMjsKCiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yLiBT\ndXBwbHkgdmFsdWVzLgogICAgICovCiAgICBwdWJsaWMgU3RhcnRzV2l0aEV4\ncHJlc3Npb24oVmFsIHZhbDEsIFZhbCB2YWwyKSB7CiAgICAgICAgX3ZhbDEg\nPSB2YWwxOwogICAgICAgIF92YWwyID0gdmFsMjsKICAgIH0KCiAgICBwdWJs\naWMgRXhwU3RhdGUgaW5pdGlhbGl6ZShTZWxlY3Qgc2VsLCBFeHBDb250ZXh0\nIGN0eCwgTWFwIGNvbnRhaW5zKSB7CiAgICAgICAgRXhwU3RhdGUgczEgPSBf\ndmFsMS5pbml0aWFsaXplKHNlbCwgY3R4LCAwKTsKICAgICAgICBFeHBTdGF0\nZSBzMiA9IF92YWwyLmluaXRpYWxpemUoc2VsLCBjdHgsIDApOwogICAgICAg\nIHJldHVybiBuZXcgQmluYXJ5T3BFeHBTdGF0ZShzZWwuYW5kKHMxLmpvaW5z\nLCBzMi5qb2lucyksIHMxLCBzMik7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nYXBwZW5kVG8oU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRl\nIHN0YXRlLCAKICAgICAgICBTUUxCdWZmZXIgYnVmKSB7CiAgICAgICAgQmlu\nYXJ5T3BFeHBTdGF0ZSBic3RhdGUgPSAoQmluYXJ5T3BFeHBTdGF0ZSkgc3Rh\ndGU7CiAgICAgICAgX3ZhbDEuY2FsY3VsYXRlVmFsdWUoc2VsLCBjdHgsIGJz\ndGF0ZS5zdGF0ZTEsIF92YWwyLCBic3RhdGUuc3RhdGUyKTsKICAgICAgICBf\ndmFsMi5jYWxjdWxhdGVWYWx1ZShzZWwsIGN0eCwgYnN0YXRlLnN0YXRlMiwg\nX3ZhbDEsIGJzdGF0ZS5zdGF0ZTEpOwoKICAgICAgICBpZiAoX3ZhbDEgaW5z\ndGFuY2VvZiBDb25zdCAKICAgICAgICAgICAgJiYgKChDb25zdCkgX3ZhbDEp\nLmdldFZhbHVlKGN0eCwgYnN0YXRlLnN0YXRlMSkgPT0gbnVsbCkKICAgICAg\nICAgICAgYnVmLmFwcGVuZCgiMSA8PiAxIik7CiAgICAgICAgZWxzZSBpZiAo\nX3ZhbDIgaW5zdGFuY2VvZiBDb25zdCkgewogICAgICAgICAgICBPYmplY3Qg\nbyA9ICgoQ29uc3QpIF92YWwyKS5nZXRWYWx1ZShjdHgsIGJzdGF0ZS5zdGF0\nZTIpOwogICAgICAgICAgICBpZiAobyA9PSBudWxsKQogICAgICAgICAgICAg\nICAgYnVmLmFwcGVuZCgiMSA8PiAxIik7CiAgICAgICAgICAgIGVsc2Ugewog\nICAgICAgICAgICAgICAgQ29sdW1uIGNvbCA9IG51bGw7CiAgICAgICAgICAg\nICAgICBpZiAoX3ZhbDEgaW5zdGFuY2VvZiBQQ1BhdGgpIHsKICAgICAgICAg\nICAgICAgICAgICBDb2x1bW5bXSBjb2xzID0gKChQQ1BhdGgpIF92YWwxKS5n\nZXRDb2x1bW5zKGJzdGF0ZS5zdGF0ZTEpOwogICAgICAgICAgICAgICAgICAg\nIGlmIChjb2xzLmxlbmd0aCA9PSAxKQogICAgICAgICAgICAgICAgICAgICAg\nICBjb2wgPSBjb2xzWzBdOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAg\nICAgICAgIF92YWwxLmFwcGVuZFRvKHNlbCwgY3R4LCBic3RhdGUuc3RhdGUx\nLCBidWYsIDApOwogICAgICAgICAgICAgICAgYnVmLmFwcGVuZCgiIExJS0Ug\nIik7CiAgICAgICAgICAgICAgICBidWYuYXBwZW5kVmFsdWUoby50b1N0cmlu\nZygpICsgIiUiLCBjb2wpOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNl\nIHsKICAgICAgICAgICAgU3RyaW5nIHByZSA9IG51bGw7CiAgICAgICAgICAg\nIFN0cmluZyBwb3N0ID0gbnVsbDsKICAgICAgICAgICAgREJEaWN0aW9uYXJ5\nIGRpY3QgPSBjdHguc3RvcmUuZ2V0REJEaWN0aW9uYXJ5KCk7CiAgICAgICAg\nICAgIFN0cmluZyBmdW5jID0gZGljdC5zdHJpbmdMZW5ndGhGdW5jdGlvbjsK\nICAgICAgICAgICAgaWYgKGZ1bmMgIT0gbnVsbCkgewogICAgICAgICAgICAg\nICAgaW50IGlkeCA9IGZ1bmMuaW5kZXhPZigiezB9Iik7CiAgICAgICAgICAg\nICAgICBwcmUgPSBmdW5jLnN1YnN0cmluZygwLCBpZHgpOwogICAgICAgICAg\nICAgICAgcG9zdCA9IGZ1bmMuc3Vic3RyaW5nKGlkeCArIDMpOwogICAgICAg\nICAgICB9CgogICAgICAgICAgICAvLyBpZiB3ZSBjYW4ndCB1c2UgTElLRSwg\nd2UgaGF2ZSB0byB0YWtlIHRoZSBzdWJzdHJpbmcgb2YgdGhlCiAgICAgICAg\nICAgIC8vIGZpcnN0IHZhbHVlIGFuZCBjb21wYXJlIGl0IHRvIHRoZSBzZWNv\nbmQKICAgICAgICAgICAgZGljdC5hc3NlcnRTdXBwb3J0KHByZSAhPSBudWxs\nLCAiU3RyaW5nTGVuZ3RoRnVuY3Rpb24iKTsKICAgICAgICAgICAgZGljdC5z\ndWJzdHJpbmcoYnVmLAogICAgICAgICAgICAgICAgbmV3IEZpbHRlclZhbHVl\nSW1wbChzZWwsIGN0eCwgYnN0YXRlLnN0YXRlMSwgX3ZhbDEpLAogICAgICAg\nICAgICAgICAgbmV3IFplcm9GaWx0ZXJWYWx1ZShzZWwsIHN0YXRlKSwKICAg\nICAgICAgICAgICAgIG5ldyBTdHJpbmdMZW5ndGhGaWx0ZXJWYWx1ZShzZWws\nIGN0eCwgYnN0YXRlLnN0YXRlMiwgcHJlLHBvc3QpKTsKICAgICAgICAgICAg\nYnVmLmFwcGVuZCgiID0gIik7CiAgICAgICAgICAgIF92YWwyLmFwcGVuZFRv\nKHNlbCwgY3R4LCBic3RhdGUuc3RhdGUyLCBidWYsIDApOwogICAgICAgIH0K\nCiAgICAgICAgc2VsLmFwcGVuZChidWYsIHN0YXRlLmpvaW5zKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBzZWxlY3RDb2x1bW5zKFNlbGVjdCBzZWwsIEV4\ncENvbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSwgCiAgICAgICAgYm9vbGVh\nbiBwa3MpIHsKICAgICAgICBCaW5hcnlPcEV4cFN0YXRlIGJzdGF0ZSA9IChC\naW5hcnlPcEV4cFN0YXRlKSBzdGF0ZTsKICAgICAgICBfdmFsMS5zZWxlY3RD\nb2x1bW5zKHNlbCwgY3R4LCBic3RhdGUuc3RhdGUxLCB0cnVlKTsKICAgICAg\nICBfdmFsMi5zZWxlY3RDb2x1bW5zKHNlbCwgY3R4LCBic3RhdGUuc3RhdGUy\nLCB0cnVlKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBhY2NlcHRWaXNpdChF\neHByZXNzaW9uVmlzaXRvciB2aXNpdG9yKSB7CiAgICAgICAgdmlzaXRvci5l\nbnRlcih0aGlzKTsKICAgICAgICBfdmFsMS5hY2NlcHRWaXNpdCh2aXNpdG9y\nKTsKICAgICAgICBfdmFsMi5hY2NlcHRWaXNpdCh2aXNpdG9yKTsKICAgICAg\nICB2aXNpdG9yLmV4aXQodGhpcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBF\ndmFsdWF0ZXMgdG8gMC4KICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgY2xh\nc3MgWmVyb0ZpbHRlclZhbHVlCiAgICAgICAgaW1wbGVtZW50cyBGaWx0ZXJW\nYWx1ZSB7CgogICAgICAgIHByaXZhdGUgZmluYWwgU2VsZWN0IF9zZWw7CiAg\nICAgICAgcHJpdmF0ZSBmaW5hbCBFeHBTdGF0ZSBfc3RhdGU7CgogICAgICAg\nIHB1YmxpYyBaZXJvRmlsdGVyVmFsdWUoU2VsZWN0IHNlbCwgRXhwU3RhdGUg\nc3RhdGUpIHsKICAgICAgICAgICAgX3NlbCA9IHNlbDsKICAgICAgICAgICAg\nX3N0YXRlID0gc3RhdGU7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgQ2xh\nc3MgZ2V0VHlwZSgpIHsKICAgICAgICAgICAgcmV0dXJuIGludC5jbGFzczsK\nICAgICAgICB9CgogICAgICAgIHB1YmxpYyBpbnQgbGVuZ3RoKCkgewogICAg\nICAgICAgICByZXR1cm4gMTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2\nb2lkIGFwcGVuZFRvKFNRTEJ1ZmZlciBidWYpIHsKICAgICAgICAgICAgYXBw\nZW5kVG8oYnVmLCAwKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lk\nIGFwcGVuZFRvKFNRTEJ1ZmZlciBidWYsIGludCBpbmRleCkgewogICAgICAg\nICAgICBidWYuYXBwZW5kVmFsdWUoMCk7CiAgICAgICAgfQoKICAgICAgICBw\ndWJsaWMgU3RyaW5nIGdldENvbHVtbkFsaWFzKENvbHVtbiBjb2wpIHsKICAg\nICAgICAgICAgcmV0dXJuIF9zZWwuZ2V0Q29sdW1uQWxpYXMoY29sLCBfc3Rh\ndGUuam9pbnMpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIFN0cmluZyBn\nZXRDb2x1bW5BbGlhcyhTdHJpbmcgY29sLCBUYWJsZSB0YWJsZSkgewogICAg\nICAgICAgICByZXR1cm4gX3NlbC5nZXRDb2x1bW5BbGlhcyhjb2wsIHRhYmxl\nLCBfc3RhdGUuam9pbnMpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIE9i\namVjdCB0b0RhdGFTdG9yZVZhbHVlKE9iamVjdCB2YWwpIHsKICAgICAgICAg\nICAgcmV0dXJuIHZhbDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBib29s\nZWFuIGlzQ29uc3RhbnQoKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwog\nICAgICAgIH0KCiAgICAgICAgcHVibGljIE9iamVjdCBnZXRWYWx1ZSgpIHsK\nICAgICAgICAgICAgcmV0dXJuIE51bWJlcnMudmFsdWVPZigwKTsKICAgICAg\nICB9CgogICAgICAgIHB1YmxpYyBPYmplY3QgZ2V0U1FMVmFsdWUoKSB7CiAg\nICAgICAgICAgIHJldHVybiBOdW1iZXJzLnZhbHVlT2YoMCk7CiAgICAgICAg\nfQoKICAgICAgICBwdWJsaWMgYm9vbGVhbiBpc1BhdGgoKSB7CiAgICAgICAg\nICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBD\nbGFzc01hcHBpbmcgZ2V0Q2xhc3NNYXBwaW5nKCkgewogICAgICAgICAgICBy\nZXR1cm4gbnVsbDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBGaWVsZE1h\ncHBpbmcgZ2V0RmllbGRNYXBwaW5nKCkgewogICAgICAgICAgICByZXR1cm4g\nbnVsbDsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBFdmFsdWF0\nZXMgdG8gdGhlIGxlbmd0aCBvZiBhIGdpdmVuIHZhbHVlLgogICAgICovCiAg\nICBwcml2YXRlIGNsYXNzIFN0cmluZ0xlbmd0aEZpbHRlclZhbHVlCiAgICAg\nICAgaW1wbGVtZW50cyBGaWx0ZXJWYWx1ZSB7CgogICAgICAgIHByaXZhdGUg\nZmluYWwgU2VsZWN0IF9zZWw7CiAgICAgICAgcHJpdmF0ZSBmaW5hbCBFeHBD\nb250ZXh0IF9jdHg7CiAgICAgICAgcHJpdmF0ZSBmaW5hbCBFeHBTdGF0ZSBf\nc3RhdGU7CiAgICAgICAgcHJpdmF0ZSBmaW5hbCBTdHJpbmcgX3ByZTsKICAg\nICAgICBwcml2YXRlIGZpbmFsIFN0cmluZyBfcG9zdDsKCiAgICAgICAgcHVi\nbGljIFN0cmluZ0xlbmd0aEZpbHRlclZhbHVlKFNlbGVjdCBzZWwsIEV4cENv\nbnRleHQgY3R4LCAKICAgICAgICAgICAgRXhwU3RhdGUgc3RhdGUsIFN0cmlu\nZyBwcmUsIFN0cmluZyBwb3N0KXsKICAgICAgICAgICAgX3NlbCA9IHNlbDsK\nICAgICAgICAgICAgX2N0eCA9IGN0eDsKICAgICAgICAgICAgX3N0YXRlID0g\nc3RhdGU7CiAgICAgICAgICAgIF9wcmUgPSBwcmU7CiAgICAgICAgICAgIF9w\nb3N0ID0gcG9zdDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBDbGFzcyBn\nZXRUeXBlKCkgewogICAgICAgICAgICByZXR1cm4gaW50LmNsYXNzOwogICAg\nICAgIH0KCiAgICAgICAgcHVibGljIGludCBsZW5ndGgoKSB7CiAgICAgICAg\nICAgIHJldHVybiAxOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQg\nYXBwZW5kVG8oU1FMQnVmZmVyIGJ1ZikgewogICAgICAgICAgICBhcHBlbmRU\nbyhidWYsIDApOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgYXBw\nZW5kVG8oU1FMQnVmZmVyIGJ1ZiwgaW50IGluZGV4KSB7CiAgICAgICAgICAg\nIGJ1Zi5hcHBlbmQoX3ByZSk7CiAgICAgICAgICAgIF92YWwyLmFwcGVuZFRv\nKF9zZWwsIF9jdHgsIF9zdGF0ZSwgYnVmLCBpbmRleCk7CiAgICAgICAgICAg\nIGJ1Zi5hcHBlbmQoX3Bvc3QpOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIFN0cmluZyBnZXRDb2x1bW5BbGlhcyhDb2x1bW4gY29sKSB7CiAgICAgICAg\nICAgIHJldHVybiBfc2VsLmdldENvbHVtbkFsaWFzKGNvbCwgX3N0YXRlLmpv\naW5zKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0Q29s\ndW1uQWxpYXMoU3RyaW5nIGNvbCwgVGFibGUgdGFibGUpIHsKICAgICAgICAg\nICAgcmV0dXJuIF9zZWwuZ2V0Q29sdW1uQWxpYXMoY29sLCB0YWJsZSwgX3N0\nYXRlLmpvaW5zKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBPYmplY3Qg\ndG9EYXRhU3RvcmVWYWx1ZShPYmplY3QgdmFsKSB7CiAgICAgICAgICAgIHJl\ndHVybiBfdmFsMi50b0RhdGFTdG9yZVZhbHVlKF9zZWwsIF9jdHgsIF9zdGF0\nZSwgdmFsKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBib29sZWFuIGlz\nQ29uc3RhbnQoKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAg\nICB9CgogICAgICAgIHB1YmxpYyBPYmplY3QgZ2V0VmFsdWUoKSB7CiAgICAg\nICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIE9iamVjdCBnZXRTUUxWYWx1ZSgpIHsKICAgICAgICAgICAgcmV0dXJuIG51\nbGw7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgYm9vbGVhbiBpc1BhdGgo\nKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAg\nICAgIHB1YmxpYyBDbGFzc01hcHBpbmcgZ2V0Q2xhc3NNYXBwaW5nKCkgewog\nICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CgogICAgICAgIHB1\nYmxpYyBGaWVsZE1hcHBpbmcgZ2V0RmllbGRNYXBwaW5nKCkgewogICAgICAg\nICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

