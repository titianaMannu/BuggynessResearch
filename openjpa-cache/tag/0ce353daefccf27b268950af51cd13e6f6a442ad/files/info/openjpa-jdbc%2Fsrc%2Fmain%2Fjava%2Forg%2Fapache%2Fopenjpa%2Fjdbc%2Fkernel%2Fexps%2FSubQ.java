{"sha":"eb20db0d640b67a7f3c9b98e91e5127c5522a7a6","node_id":"MDQ6QmxvYjIwNjM2NDplYjIwZGIwZDY0MGI2N2E3ZjNjOWI5OGU5MWU1MTI3YzU1MjJhN2E2","size":6573,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/eb20db0d640b67a7f3c9b98e91e5127c5522a7a6","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLmtlcm5lbC5leHBzOwoKaW1wb3J0IGphdmEuc3FsLlNR\nTEV4Y2VwdGlvbjsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5r\nZXJuZWwuSkRCQ0ZldGNoQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLm1ldGEuQ2xhc3NNYXBwaW5nOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5KYXZhU1FMVHlwZXM7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuUmVzdWx0OwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNRTEJ1ZmZlcjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5TZWxlY3Q7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkZpbHRlcnM7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEua2VybmVsLmV4cHMuRXhwcmVzc2lvblZpc2l0b3I7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLmV4cHMuUXVlcnlF\neHByZXNzaW9uczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwu\nZXhwcy5TdWJxdWVyeTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRh\nLkNsYXNzTWV0YURhdGE7CgovKioKICogQSBzdWJxdWVyeS4KICoKICogQGF1\ndGhvciBBYmUgV2hpdGUKICovCmNsYXNzIFN1YlEKICAgIGV4dGVuZHMgQWJz\ndHJhY3RWYWwKICAgIGltcGxlbWVudHMgU3VicXVlcnkgewoKICAgIHByaXZh\ndGUgZmluYWwgQ2xhc3NNYXBwaW5nIF9jYW5kaWRhdGU7CiAgICBwcml2YXRl\nIGZpbmFsIGJvb2xlYW4gX3N1YnM7CiAgICBwcml2YXRlIGZpbmFsIFN0cmlu\nZyBfYWxpYXM7CiAgICBwcml2YXRlIGZpbmFsIFNlbGVjdENvbnN0cnVjdG9y\nIF9jb25zID0gbmV3IFNlbGVjdENvbnN0cnVjdG9yKCk7CgogICAgcHJpdmF0\nZSBDbGFzcyBfdHlwZSA9IG51bGw7CiAgICBwcml2YXRlIENsYXNzTWV0YURh\ndGEgX21ldGEgPSBudWxsOwogICAgcHJpdmF0ZSBRdWVyeUV4cHJlc3Npb25z\nIF9leHBzID0gbnVsbDsKCiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yLiBT\ndXBwbHkgY2FuZGlkYXRlLCB3aGV0aGVyIHN1YmNsYXNzZXMgYXJlIGluY2x1\nZGVkIGluCiAgICAgKiB0aGUgcXVlcnksIGFuZCB0aGUgcXVlcnkgYWxpYXMu\nCiAgICAgKi8KICAgIHB1YmxpYyBTdWJRKENsYXNzTWFwcGluZyBjYW5kaWRh\ndGUsIGJvb2xlYW4gc3VicywgU3RyaW5nIGFsaWFzKSB7CiAgICAgICAgX2Nh\nbmRpZGF0ZSA9IGNhbmRpZGF0ZTsKICAgICAgICBfc3VicyA9IHN1YnM7CiAg\nICAgICAgX2FsaWFzID0gYWxpYXM7CiAgICB9CgogICAgLyoqCiAgICAgKiBS\nZXR1cm4gdGhlIHN1YnF1ZXJ5IGNhbmRpZGF0ZSB0eXBlLgogICAgICovCiAg\nICBwdWJsaWMgQ2xhc3NNYXBwaW5nIGdldENhbmRpZGF0ZSgpIHsKICAgICAg\nICByZXR1cm4gX2NhbmRpZGF0ZTsKICAgIH0KCiAgICBwdWJsaWMgQ2xhc3Mg\nZ2V0VHlwZSgpIHsKICAgICAgICBpZiAoX2V4cHMgIT0gbnVsbCkgewogICAg\nICAgICAgICBpZiAoX2V4cHMucHJvamVjdGlvbnMubGVuZ3RoID09IDApCiAg\nICAgICAgICAgICAgICByZXR1cm4gX2NhbmRpZGF0ZS5nZXREZXNjcmliZWRU\neXBlKCk7CiAgICAgICAgICAgIGlmIChfZXhwcy5wcm9qZWN0aW9ucy5sZW5n\ndGggPT0gMSkKICAgICAgICAgICAgICAgIHJldHVybiBfZXhwcy5wcm9qZWN0\naW9uc1swXS5nZXRUeXBlKCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBf\ndHlwZTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRJbXBsaWNpdFR5cGUo\nQ2xhc3MgdHlwZSkgewogICAgICAgIGlmIChfZXhwcyAhPSBudWxsICYmIF9l\neHBzLnByb2plY3Rpb25zLmxlbmd0aCA9PSAxKQogICAgICAgICAgICBfZXhw\ncy5wcm9qZWN0aW9uc1swXS5zZXRJbXBsaWNpdFR5cGUodHlwZSk7CiAgICAg\nICAgX3R5cGUgPSB0eXBlOwogICAgfQoKICAgIHB1YmxpYyBDbGFzc01ldGFE\nYXRhIGdldE1ldGFEYXRhKCkgewogICAgICAgIHJldHVybiBfbWV0YTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRNZXRhRGF0YShDbGFzc01ldGFEYXRh\nIG1ldGEpIHsKICAgICAgICBfbWV0YSA9IG1ldGE7CiAgICB9CgogICAgcHVi\nbGljIFN0cmluZyBnZXRDYW5kaWRhdGVBbGlhcygpIHsKICAgICAgICByZXR1\ncm4gX2FsaWFzOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldFF1ZXJ5RXhw\ncmVzc2lvbnMoUXVlcnlFeHByZXNzaW9ucyBxdWVyeSkgewogICAgICAgIF9l\neHBzID0gcXVlcnk7CiAgICB9CgogICAgcHVibGljIEV4cFN0YXRlIGluaXRp\nYWxpemUoU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIGludCBmbGFncykg\newogICAgICAgIGlmIChfZXhwcy5wcm9qZWN0aW9ucy5sZW5ndGggPT0gMSkK\nICAgICAgICAgICAgcmV0dXJuICgoVmFsKSBfZXhwcy5wcm9qZWN0aW9uc1sw\nXSkuaW5pdGlhbGl6ZShzZWwsIGN0eCwgZmxhZ3MpOwogICAgICAgIHJldHVy\nbiBFeHBTdGF0ZS5OVUxMOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgdG9E\nYXRhU3RvcmVWYWx1ZShTZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwgRXhw\nU3RhdGUgc3RhdGUsIAogICAgICAgIE9iamVjdCB2YWwpIHsKICAgICAgICBp\nZiAoX2V4cHMucHJvamVjdGlvbnMubGVuZ3RoID09IDApCiAgICAgICAgICAg\nIHJldHVybiBfY2FuZGlkYXRlLnRvRGF0YVN0b3JlVmFsdWUodmFsLAogICAg\nICAgICAgICAgICAgX2NhbmRpZGF0ZS5nZXRQcmltYXJ5S2V5Q29sdW1ucygp\nLCBjdHguc3RvcmUpOwogICAgICAgIGlmIChfZXhwcy5wcm9qZWN0aW9ucy5s\nZW5ndGggPT0gMSkKICAgICAgICAgICAgcmV0dXJuICgoVmFsKSBfZXhwcy5w\ncm9qZWN0aW9uc1swXSkudG9EYXRhU3RvcmVWYWx1ZShzZWwsIGN0eCwgCiAg\nICAgICAgICAgICAgICBzdGF0ZSwgdmFsKTsKICAgICAgICByZXR1cm4gdmFs\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNlbGVjdChTZWxlY3Qgc2VsLCBF\neHBDb250ZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUsIAogICAgICAgIGJvb2xl\nYW4gcGtzKSB7CiAgICAgICAgc2VsZWN0Q29sdW1ucyhzZWwsIGN0eCwgc3Rh\ndGUsIHBrcyk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2VsZWN0Q29sdW1u\ncyhTZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUs\nIAogICAgICAgIGJvb2xlYW4gcGtzKSB7CiAgICAgICAgc2VsLnNlbGVjdChu\nZXdTUUxCdWZmZXIoc2VsLCBjdHgsIHN0YXRlKSwgdGhpcyk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgZ3JvdXBCeShTZWxlY3Qgc2VsLCBFeHBDb250ZXh0\nIGN0eCwgRXhwU3RhdGUgc3RhdGUpIHsKICAgICAgICBzZWwuZ3JvdXBCeShu\nZXdTUUxCdWZmZXIoc2VsLCBjdHgsIHN0YXRlKSk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgb3JkZXJCeShTZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwg\nRXhwU3RhdGUgc3RhdGUsIAogICAgICAgIGJvb2xlYW4gYXNjKSB7CiAgICAg\nICAgc2VsLm9yZGVyQnkobmV3U1FMQnVmZmVyKHNlbCwgY3R4LCBzdGF0ZSks\nIGFzYywgZmFsc2UpOwogICAgfQoKICAgIHByaXZhdGUgU1FMQnVmZmVyIG5l\nd1NRTEJ1ZmZlcihTZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwgRXhwU3Rh\ndGUgc3RhdGUpIHsKICAgICAgICBTUUxCdWZmZXIgYnVmID0gbmV3IFNRTEJ1\nZmZlcihjdHguc3RvcmUuZ2V0REJEaWN0aW9uYXJ5KCkpOwogICAgICAgIGFw\ncGVuZFRvKHNlbCwgY3R4LCBzdGF0ZSwgYnVmLCAwKTsKICAgICAgICByZXR1\ncm4gYnVmOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgbG9hZChFeHBDb250\nZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUsIFJlc3VsdCByZXMpIAogICAgICAg\nIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBGaWx0ZXJz\nLmNvbnZlcnQocmVzLmdldE9iamVjdCh0aGlzLAogICAgICAgICAgICBKYXZh\nU1FMVHlwZXMuSkRCQ19ERUZBVUxULCBudWxsKSwgZ2V0VHlwZSgpKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBjYWxjdWxhdGVWYWx1ZShTZWxlY3Qgc2Vs\nLCBFeHBDb250ZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUsIAogICAgICAgIFZh\nbCBvdGhlciwgRXhwU3RhdGUgb3RoZXJTdGF0ZSkgewogICAgfQoKICAgIHB1\nYmxpYyBpbnQgbGVuZ3RoKFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBF\neHBTdGF0ZSBzdGF0ZSkgewogICAgICAgIHJldHVybiAxOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIGFwcGVuZFRvKFNlbGVjdCBzZWwsIEV4cENvbnRleHQg\nY3R4LCBFeHBTdGF0ZSBzdGF0ZSwgCiAgICAgICAgU1FMQnVmZmVyIHNxbCwg\naW50IGluZGV4KSB7CiAgICAgICAgYXBwZW5kVG8oc2VsLCBjdHgsIHN0YXRl\nLCBzcWwsIGluZGV4LCBmYWxzZSk7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lk\nIGFwcGVuZFRvKFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBFeHBTdGF0\nZSBzdGF0ZSwgCiAgICAgICAgU1FMQnVmZmVyIHNxbCwgaW50IGluZGV4LCBi\nb29sZWFuIHNpemUpIHsKICAgICAgICBRdWVyeUV4cHJlc3Npb25zU3RhdGUg\nc3Vic3RhdGUgPSBuZXcgUXVlcnlFeHByZXNzaW9uc1N0YXRlKCk7CiAgICAg\nICAgU2VsZWN0IHN1YiA9IF9jb25zLmV2YWx1YXRlKGN0eCwgc2VsLCBfYWxp\nYXMsIF9leHBzLCBzdWJzdGF0ZSk7CiAgICAgICAgX2NvbnMuc2VsZWN0KHN1\nYiwgY3R4LCBfY2FuZGlkYXRlLCBfc3VicywgX2V4cHMsIHN1YnN0YXRlLCAK\nICAgICAgICAgICAgSkRCQ0ZldGNoQ29uZmlndXJhdGlvbi5FQUdFUl9OT05F\nKTsKCiAgICAgICAgaWYgKHNpemUpCiAgICAgICAgICAgIHNxbC5hcHBlbmRD\nb3VudChzdWIsIGN0eC5mZXRjaCk7CiAgICAgICAgZWxzZQogICAgICAgICAg\nICBzcWwuYXBwZW5kKHN1YiwgY3R4LmZldGNoKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBhcHBlbmRJc0VtcHR5KFNlbGVjdCBzZWwsIEV4cENvbnRleHQg\nY3R4LCBFeHBTdGF0ZSBzdGF0ZSwgCiAgICAgICAgU1FMQnVmZmVyIHNxbCkg\newogICAgICAgIHNxbC5hcHBlbmQoIk5PVCBFWElTVFMgIik7CiAgICAgICAg\nYXBwZW5kVG8oc2VsLCBjdHgsIHN0YXRlLCBzcWwsIDApOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIGFwcGVuZElzTm90RW1wdHkoU2VsZWN0IHNlbCwgRXhw\nQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlLCAKICAgICAgICBTUUxCdWZm\nZXIgc3FsKSB7CiAgICAgICAgc3FsLmFwcGVuZCgiRVhJU1RTICIpOwogICAg\nICAgIGFwcGVuZFRvKHNlbCwgY3R4LCBzdGF0ZSwgc3FsLCAwKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBhcHBlbmRTaXplKFNlbGVjdCBzZWwsIEV4cENv\nbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSwgCiAgICAgICAgU1FMQnVmZmVy\nIHNxbCkgewogICAgICAgIGFwcGVuZFRvKHNlbCwgY3R4LCBzdGF0ZSwgc3Fs\nLCAwLCB0cnVlKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBhY2NlcHRWaXNp\ndChFeHByZXNzaW9uVmlzaXRvciB2aXNpdG9yKSB7CiAgICAgICAgdmlzaXRv\nci5lbnRlcih0aGlzKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9l\neHBzLnByb2plY3Rpb25zLmxlbmd0aDsgaSsrKQogICAgICAgICAgICBfZXhw\ncy5wcm9qZWN0aW9uc1tpXS5hY2NlcHRWaXNpdCh2aXNpdG9yKTsKICAgICAg\nICBpZiAoX2V4cHMuZmlsdGVyICE9IG51bGwpCiAgICAgICAgICAgIF9leHBz\nLmZpbHRlci5hY2NlcHRWaXNpdCh2aXNpdG9yKTsKICAgICAgICBmb3IgKGlu\ndCBpID0gMDsgaSA8IF9leHBzLmdyb3VwaW5nLmxlbmd0aDsgaSsrKQogICAg\nICAgICAgICBfZXhwcy5ncm91cGluZ1tpXS5hY2NlcHRWaXNpdCh2aXNpdG9y\nKTsKICAgICAgICBpZiAoX2V4cHMuaGF2aW5nICE9IG51bGwpCiAgICAgICAg\nICAgIF9leHBzLmhhdmluZy5hY2NlcHRWaXNpdCh2aXNpdG9yKTsKICAgICAg\nICBmb3IgKGludCBpID0gMDsgaSA8IF9leHBzLm9yZGVyaW5nLmxlbmd0aDsg\naSsrKQogICAgICAgICAgICBfZXhwcy5vcmRlcmluZ1tpXS5hY2NlcHRWaXNp\ndCh2aXNpdG9yKTsKICAgICAgICB2aXNpdG9yLmV4aXQodGhpcyk7CiAgICB9\nCn0K\n","encoding":"base64"}

