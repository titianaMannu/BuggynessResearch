{"sha":"132c84a71d8571d9c6656df927dad330a9ba2980","node_id":"MDQ6QmxvYjIwNjM2NDoxMzJjODRhNzFkODU3MWQ5YzY2NTZkZjkyN2RhZDMzMGE5YmEyOTgw","size":4410,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/132c84a71d8571d9c6656df927dad330a9ba2980","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLmtlcm5lbC5leHBzOwoKaW1wb3J0IGphdmEuc3FsLlNR\nTEV4Y2VwdGlvbjsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5t\nZXRhLkphdmFTUUxUeXBlczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5q\nZGJjLnNxbC5SZXN1bHQ7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5zcWwuU1FMQnVmZmVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpk\nYmMuc3FsLlNlbGVjdDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJu\nZWwuRmlsdGVyczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwu\nZXhwcy5FeHByZXNzaW9uVmlzaXRvcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5tZXRhLkNsYXNzTWV0YURhdGE7CgovKioKICogVGFrZSBhIHN1YnN0\ncmluZyBvZiBhIHN0cmluZy4KICoKICogQGF1dGhvciBBYmUgV2hpdGUKICov\nCmNsYXNzIFN1YnN0cmluZwogICAgZXh0ZW5kcyBBYnN0cmFjdFZhbCB7Cgog\nICAgcHJpdmF0ZSBmaW5hbCBWYWwgX3ZhbDE7CiAgICBwcml2YXRlIGZpbmFs\nIFZhbCBfdmFsMjsKICAgIHByaXZhdGUgQ2xhc3NNZXRhRGF0YSBfbWV0YSA9\nIG51bGw7CgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3Rvci4gUHJvdmlkZSB0\naGUgc3RyaW5ncyB0byBvcGVyYXRlIG9uLgogICAgICovCiAgICBwdWJsaWMg\nU3Vic3RyaW5nKFZhbCB2YWwxLCBWYWwgdmFsMikgewogICAgICAgIF92YWwx\nID0gdmFsMTsKICAgICAgICBfdmFsMiA9IHZhbDI7CiAgICB9CgogICAgcHVi\nbGljIENsYXNzTWV0YURhdGEgZ2V0TWV0YURhdGEoKSB7CiAgICAgICAgcmV0\ndXJuIF9tZXRhOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldE1ldGFEYXRh\nKENsYXNzTWV0YURhdGEgbWV0YSkgewogICAgICAgIF9tZXRhID0gbWV0YTsK\nICAgIH0KCiAgICBwdWJsaWMgQ2xhc3MgZ2V0VHlwZSgpIHsKICAgICAgICBy\nZXR1cm4gU3RyaW5nLmNsYXNzOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNl\ndEltcGxpY2l0VHlwZShDbGFzcyB0eXBlKSB7CiAgICB9CgogICAgcHVibGlj\nIEV4cFN0YXRlIGluaXRpYWxpemUoU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBj\ndHgsIGludCBmbGFncykgewogICAgICAgIEV4cFN0YXRlIHMxID0gX3ZhbDEu\naW5pdGlhbGl6ZShzZWwsIGN0eCwgMCk7CiAgICAgICAgRXhwU3RhdGUgczIg\nPSBfdmFsMi5pbml0aWFsaXplKHNlbCwgY3R4LCAwKTsKICAgICAgICByZXR1\ncm4gbmV3IEJpbmFyeU9wRXhwU3RhdGUoc2VsLmFuZChzMS5qb2lucywgczIu\nam9pbnMpLCBzMSwgczIpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNlbGVj\ndChTZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUs\nIAogICAgICAgIGJvb2xlYW4gcGtzKSB7CiAgICAgICAgc2VsLnNlbGVjdChu\nZXdTUUxCdWZmZXIoc2VsLCBjdHgsIHN0YXRlKSwgdGhpcyk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgc2VsZWN0Q29sdW1ucyhTZWxlY3Qgc2VsLCBFeHBD\nb250ZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUsIAogICAgICAgIGJvb2xlYW4g\ncGtzKSB7CiAgICAgICAgQmluYXJ5T3BFeHBTdGF0ZSBic3RhdGUgPSAoQmlu\nYXJ5T3BFeHBTdGF0ZSkgc3RhdGU7CiAgICAgICAgX3ZhbDEuc2VsZWN0Q29s\ndW1ucyhzZWwsIGN0eCwgYnN0YXRlLnN0YXRlMSwgdHJ1ZSk7CiAgICAgICAg\nX3ZhbDIuc2VsZWN0Q29sdW1ucyhzZWwsIGN0eCwgYnN0YXRlLnN0YXRlMiwg\ndHJ1ZSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgZ3JvdXBCeShTZWxlY3Qg\nc2VsLCBFeHBDb250ZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUpIHsKICAgICAg\nICBzZWwuZ3JvdXBCeShuZXdTUUxCdWZmZXIoc2VsLCBjdHgsIHN0YXRlKSk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgb3JkZXJCeShTZWxlY3Qgc2VsLCBF\neHBDb250ZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUsIAogICAgICAgIGJvb2xl\nYW4gYXNjKSB7CiAgICAgICAgc2VsLm9yZGVyQnkobmV3U1FMQnVmZmVyKHNl\nbCwgY3R4LCBzdGF0ZSksIGFzYywgZmFsc2UpOwogICAgfQoKICAgIHByaXZh\ndGUgU1FMQnVmZmVyIG5ld1NRTEJ1ZmZlcihTZWxlY3Qgc2VsLCBFeHBDb250\nZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUpIHsKICAgICAgICBjYWxjdWxhdGVW\nYWx1ZShzZWwsIGN0eCwgc3RhdGUsIG51bGwsIG51bGwpOwogICAgICAgIFNR\nTEJ1ZmZlciBidWYgPSBuZXcgU1FMQnVmZmVyKGN0eC5zdG9yZS5nZXREQkRp\nY3Rpb25hcnkoKSk7CiAgICAgICAgYXBwZW5kVG8oc2VsLCBjdHgsIHN0YXRl\nLCBidWYsIDApOwogICAgICAgIHJldHVybiBidWY7CiAgICB9CgogICAgcHVi\nbGljIE9iamVjdCBsb2FkKEV4cENvbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0\nZSwgUmVzdWx0IHJlcykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsK\nICAgICAgICByZXR1cm4gRmlsdGVycy5jb252ZXJ0KHJlcy5nZXRPYmplY3Qo\ndGhpcywKICAgICAgICAgICAgSmF2YVNRTFR5cGVzLkpEQkNfREVGQVVMVCwg\nbnVsbCksIGdldFR5cGUoKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgY2Fs\nY3VsYXRlVmFsdWUoU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0\nYXRlIHN0YXRlLCAKICAgICAgICBWYWwgb3RoZXIsIEV4cFN0YXRlIG90aGVy\nU3RhdGUpIHsKICAgICAgICBCaW5hcnlPcEV4cFN0YXRlIGJzdGF0ZSA9IChC\naW5hcnlPcEV4cFN0YXRlKSBzdGF0ZTsKICAgICAgICBfdmFsMS5jYWxjdWxh\ndGVWYWx1ZShzZWwsIGN0eCwgYnN0YXRlLnN0YXRlMSwgbnVsbCwgbnVsbCk7\nCiAgICAgICAgX3ZhbDIuY2FsY3VsYXRlVmFsdWUoc2VsLCBjdHgsIGJzdGF0\nZS5zdGF0ZTIsIG51bGwsIG51bGwpOwogICAgfQoKICAgIHB1YmxpYyBpbnQg\nbGVuZ3RoKFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBFeHBTdGF0ZSBz\ndGF0ZSkgewogICAgICAgIHJldHVybiAxOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIGFwcGVuZFRvKFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBFeHBT\ndGF0ZSBzdGF0ZSwgCiAgICAgICAgU1FMQnVmZmVyIHNxbCwgaW50IGluZGV4\nKSB7CiAgICAgICAgQmluYXJ5T3BFeHBTdGF0ZSBic3RhdGUgPSAoQmluYXJ5\nT3BFeHBTdGF0ZSkgc3RhdGU7CiAgICAgICAgRmlsdGVyVmFsdWUgc3RyID0g\nbmV3IEZpbHRlclZhbHVlSW1wbChzZWwsIGN0eCwgYnN0YXRlLnN0YXRlMSwg\nX3ZhbDEpOwogICAgICAgIEZpbHRlclZhbHVlIHN0YXJ0OwogICAgICAgIEZp\nbHRlclZhbHVlIGVuZCA9IG51bGw7CiAgICAgICAgaWYgKF92YWwyIGluc3Rh\nbmNlb2YgQXJncykgewogICAgICAgICAgICBGaWx0ZXJWYWx1ZVtdIGZpbHRz\nID0gKChBcmdzKSBfdmFsMikubmV3RmlsdGVyVmFsdWVzKHNlbCwgY3R4LCAK\nICAgICAgICAgICAgICAgIGJzdGF0ZS5zdGF0ZTIpOwogICAgICAgICAgICBz\ndGFydCA9IGZpbHRzWzBdOwogICAgICAgICAgICBlbmQgPSBmaWx0c1sxXTsK\nICAgICAgICB9IGVsc2UKICAgICAgICAgICAgc3RhcnQgPSBuZXcgRmlsdGVy\nVmFsdWVJbXBsKHNlbCwgY3R4LCBic3RhdGUuc3RhdGUyLCBfdmFsMik7Cgog\nICAgICAgIGN0eC5zdG9yZS5nZXREQkRpY3Rpb25hcnkoKS5zdWJzdHJpbmco\nc3FsLCBzdHIsIHN0YXJ0LCBlbmQpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIGFjY2VwdFZpc2l0KEV4cHJlc3Npb25WaXNpdG9yIHZpc2l0b3IpIHsKICAg\nICAgICB2aXNpdG9yLmVudGVyKHRoaXMpOwogICAgICAgIF92YWwxLmFjY2Vw\ndFZpc2l0KHZpc2l0b3IpOwogICAgICAgIF92YWwyLmFjY2VwdFZpc2l0KHZp\nc2l0b3IpOwogICAgICAgIHZpc2l0b3IuZXhpdCh0aGlzKTsKICAgIH0KfQoK\n","encoding":"base64"}

