{"sha":"9b93623425bb5bdfedf81548614f642bca3d0a7d","node_id":"MDQ6QmxvYjIwNjM2NDo5YjkzNjIzNDI1YmI1YmRmZWRmODE1NDg2MTRmNjQyYmNhM2QwYTdk","size":6624,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/9b93623425bb5bdfedf81548614f642bca3d0a7d","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLmtlcm5lbC5leHBzOwoKaW1wb3J0IGphdmEubGFuZy5N\nYXRoOwppbXBvcnQgamF2YS5zcWwuU1FMRXhjZXB0aW9uOwoKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1ldGEuSmF2YVNRTFR5cGVzOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLkRCRGljdGlvbmFyeTsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5Kb2luczsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5SZXN1bHQ7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuU1FMQnVmZmVyOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNlbGVjdDsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuRmlsdGVyczsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuZXhwcy5FeHByZXNzaW9uVmlzaXRv\ncjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkNsYXNzTWV0YURh\ndGE7CgovKioKICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGNoYXJhY3RlcnMg\naW4gYSBzdHJpbmcuCiAqCiAqIEBhdXRob3IgTWFyYyBQcnVkJ2hvbW1lYXV4\nCiAqLwpjbGFzcyBUcmltCiAgICBleHRlbmRzIEFic3RyYWN0VmFsIHsKCiAg\nICBwcml2YXRlIGZpbmFsIFZhbCBfdmFsOwogICAgcHJpdmF0ZSBmaW5hbCBW\nYWwgX3RyaW1DaGFyOwogICAgcHJpdmF0ZSBmaW5hbCBCb29sZWFuIF93aGVy\nZTsKICAgIHByaXZhdGUgQ2xhc3NNZXRhRGF0YSBfbWV0YSA9IG51bGw7Cgog\nICAgLyoqCiAgICAgKiBDb25zdHJ1Y3Rvci4gUHJvdmlkZSB0aGUgc3RyaW5n\nIHRvIG9wZXJhdGUgb24uCiAgICAgKi8KICAgIHB1YmxpYyBUcmltKFZhbCB2\nYWwsIFZhbCB0cmltQ2hhciwgQm9vbGVhbiB3aGVyZSkgewogICAgICAgIF92\nYWwgPSB2YWw7CiAgICAgICAgX3RyaW1DaGFyID0gdHJpbUNoYXI7CiAgICAg\nICAgX3doZXJlID0gd2hlcmU7CiAgICB9CgogICAgcHVibGljIENsYXNzTWV0\nYURhdGEgZ2V0TWV0YURhdGEoKSB7CiAgICAgICAgcmV0dXJuIF9tZXRhOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldE1ldGFEYXRhKENsYXNzTWV0YURh\ndGEgbWV0YSkgewogICAgICAgIF9tZXRhID0gbWV0YTsKICAgIH0KCiAgICBw\ndWJsaWMgQ2xhc3MgZ2V0VHlwZSgpIHsKICAgICAgICByZXR1cm4gU3RyaW5n\nLmNsYXNzOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldEltcGxpY2l0VHlw\nZShDbGFzcyB0eXBlKSB7CiAgICB9CgogICAgcHVibGljIEV4cFN0YXRlIGlu\naXRpYWxpemUoU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIGludCBmbGFn\ncykgewogICAgICAgIEV4cFN0YXRlIHZhbHVlU3RhdGUgPSAgX3ZhbC5pbml0\naWFsaXplKHNlbCwgY3R4LCAwKTsKICAgICAgICBFeHBTdGF0ZSBjaGFyU3Rh\ndGUgPSBfdHJpbUNoYXIuaW5pdGlhbGl6ZShzZWwsIGN0eCwgMCk7CiAgICAg\nICAgcmV0dXJuIG5ldyBUcmltRXhwU3RhdGUoc2VsLmFuZCh2YWx1ZVN0YXRl\nLmpvaW5zLCBjaGFyU3RhdGUuam9pbnMpLCAKICAgICAgICAgICAgdmFsdWVT\ndGF0ZSwgY2hhclN0YXRlKTsKICAgIH0KCiAgICAvKioKICAgICAqIEV4cHJl\nc3Npb24gc3RhdGUuCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGljIGNsYXNz\nIFRyaW1FeHBTdGF0ZQogICAgICAgIGV4dGVuZHMgRXhwU3RhdGUgewoKICAg\nICAgICBwdWJsaWMgZmluYWwgRXhwU3RhdGUgdmFsdWVTdGF0ZTsKICAgICAg\nICBwdWJsaWMgZmluYWwgRXhwU3RhdGUgY2hhclN0YXRlOwoKICAgICAgICBw\ndWJsaWMgVHJpbUV4cFN0YXRlKEpvaW5zIGpvaW5zLCBFeHBTdGF0ZSB2YWx1\nZVN0YXRlLCAKICAgICAgICAgICAgRXhwU3RhdGUgY2hhclN0YXRlKSB7CiAg\nICAgICAgICAgIHN1cGVyKGpvaW5zKTsKICAgICAgICAgICAgdGhpcy52YWx1\nZVN0YXRlID0gdmFsdWVTdGF0ZTsKICAgICAgICAgICAgdGhpcy5jaGFyU3Rh\ndGUgPSBjaGFyU3RhdGU7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHNlbGVjdChTZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwgRXhwU3Rh\ndGUgc3RhdGUsIAogICAgICAgIGJvb2xlYW4gcGtzKSB7CiAgICAgICAgc2Vs\nLnNlbGVjdChuZXdTUUxCdWZmZXIoc2VsLCBjdHgsIHN0YXRlKSwgdGhpcyk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgc2VsZWN0Q29sdW1ucyhTZWxlY3Qg\nc2VsLCBFeHBDb250ZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUsIAogICAgICAg\nIGJvb2xlYW4gcGtzKSB7CiAgICAgICAgVHJpbUV4cFN0YXRlIHRzdGF0ZSA9\nIChUcmltRXhwU3RhdGUpIHN0YXRlOwogICAgICAgIF92YWwuc2VsZWN0Q29s\ndW1ucyhzZWwsIGN0eCwgdHN0YXRlLnZhbHVlU3RhdGUsIHRydWUpOwogICAg\nICAgIF90cmltQ2hhci5zZWxlY3RDb2x1bW5zKHNlbCwgY3R4LCB0c3RhdGUu\nY2hhclN0YXRlLCB0cnVlKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBncm91\ncEJ5KFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0\nZSkgewogICAgICAgIHNlbC5ncm91cEJ5KG5ld1NRTEJ1ZmZlcihzZWwsIGN0\neCwgc3RhdGUpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBvcmRlckJ5KFNl\nbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSwgCiAg\nICAgICAgYm9vbGVhbiBhc2MpIHsKICAgICAgICBzZWwub3JkZXJCeShuZXdT\nUUxCdWZmZXIoc2VsLCBjdHgsIHN0YXRlKSwgYXNjLCBmYWxzZSk7CiAgICB9\nCgogICAgcHJpdmF0ZSBTUUxCdWZmZXIgbmV3U1FMQnVmZmVyKFNlbGVjdCBz\nZWwsIEV4cENvbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSkgewogICAgICAg\nIGNhbGN1bGF0ZVZhbHVlKHNlbCwgY3R4LCBzdGF0ZSwgbnVsbCwgbnVsbCk7\nCiAgICAgICAgU1FMQnVmZmVyIGJ1ZiA9IG5ldyBTUUxCdWZmZXIoY3R4LnN0\nb3JlLmdldERCRGljdGlvbmFyeSgpKTsKICAgICAgICBhcHBlbmRUbyhzZWws\nIGN0eCwgc3RhdGUsIGJ1ZiwgMCk7CiAgICAgICAgcmV0dXJuIGJ1ZjsKICAg\nIH0KCiAgICBwdWJsaWMgT2JqZWN0IGxvYWQoRXhwQ29udGV4dCBjdHgsIEV4\ncFN0YXRlIHN0YXRlLCBSZXN1bHQgcmVzKQogICAgICAgIHRocm93cyBTUUxF\neGNlcHRpb24gewogICAgICAgIHJldHVybiBGaWx0ZXJzLmNvbnZlcnQocmVz\nLmdldE9iamVjdCh0aGlzLAogICAgICAgICAgICBKYXZhU1FMVHlwZXMuSkRC\nQ19ERUZBVUxULCBudWxsKSwgZ2V0VHlwZSgpKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBjYWxjdWxhdGVWYWx1ZShTZWxlY3Qgc2VsLCBFeHBDb250ZXh0\nIGN0eCwgRXhwU3RhdGUgc3RhdGUsIAogICAgICAgIFZhbCBvdGhlciwgRXhw\nU3RhdGUgb3RoZXJTdGF0ZSkgewogICAgICAgIFRyaW1FeHBTdGF0ZSB0c3Rh\ndGUgPSAoVHJpbUV4cFN0YXRlKSBzdGF0ZTsKICAgICAgICBfdmFsLmNhbGN1\nbGF0ZVZhbHVlKHNlbCwgY3R4LCB0c3RhdGUudmFsdWVTdGF0ZSwgbnVsbCwg\nbnVsbCk7CiAgICAgICAgX3RyaW1DaGFyLmNhbGN1bGF0ZVZhbHVlKHNlbCwg\nY3R4LCB0c3RhdGUuY2hhclN0YXRlLCBudWxsLCBudWxsKTsKICAgIH0KCiAg\nICBwdWJsaWMgaW50IGxlbmd0aChTZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0\neCwgRXhwU3RhdGUgc3RhdGUpIHsKICAgICAgICByZXR1cm4gMTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBhcHBlbmRUbyhTZWxlY3Qgc2VsLCBFeHBDb250\nZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUsIAogICAgICAgIFNRTEJ1ZmZlciBz\ncWwsIGludCBpbmRleCkgewogICAgICAgIERCRGljdGlvbmFyeSBkaWN0ID0g\nY3R4LnN0b3JlLmdldERCRGljdGlvbmFyeSgpOwogICAgICAgIFN0cmluZyBm\ndW5jOwogICAgICAgIGlmIChfd2hlcmUgPT0gbnVsbCkgewogICAgICAgICAg\nICBmdW5jID0gZGljdC50cmltQm90aEZ1bmN0aW9uOwogICAgICAgICAgICBk\naWN0LmFzc2VydFN1cHBvcnQoZnVuYyAhPSBudWxsLCAiVHJpbUJvdGhGdW5j\ndGlvbiIpOwogICAgICAgIH0gZWxzZSBpZiAoX3doZXJlLmJvb2xlYW5WYWx1\nZSgpKSB7CiAgICAgICAgICAgIGZ1bmMgPSBkaWN0LnRyaW1MZWFkaW5nRnVu\nY3Rpb247CiAgICAgICAgICAgIGRpY3QuYXNzZXJ0U3VwcG9ydChmdW5jICE9\nIG51bGwsICJUcmltTGVhZGluZ0Z1bmN0aW9uIik7CiAgICAgICAgfSBlbHNl\nIHsKICAgICAgICAgICAgZnVuYyA9IGRpY3QudHJpbVRyYWlsaW5nRnVuY3Rp\nb247CiAgICAgICAgICAgIGRpY3QuYXNzZXJ0U3VwcG9ydChmdW5jICE9IG51\nbGwsICJUcmltVHJhaWxpbmdGdW5jdGlvbiIpOwogICAgICAgIH0KCiAgICAg\nICAgaW50IGZyb21QYXJ0ID0gZnVuYy5pbmRleE9mKCJ7MH0iKTsKICAgICAg\nICBpbnQgY2hhclBhcnQgPSBmdW5jLmluZGV4T2YoInsxfSIpOwogICAgICAg\nIGlmIChjaGFyUGFydCA9PSAtMSkKICAgICAgICAgICAgY2hhclBhcnQgPSBm\ndW5jLmxlbmd0aCgpOwogICAgICAgIFN0cmluZyBwYXJ0MSA9IGZ1bmMuc3Vi\nc3RyaW5nKDAsIE1hdGgubWluKGZyb21QYXJ0LCBjaGFyUGFydCkpOwogICAg\nICAgIFN0cmluZyBwYXJ0MiA9IGZ1bmMuc3Vic3RyaW5nKE1hdGgubWluKGZy\nb21QYXJ0LCBjaGFyUGFydCkgKyAzLAogICAgICAgICAgICBNYXRoLm1heChm\ncm9tUGFydCwgY2hhclBhcnQpKTsKICAgICAgICBTdHJpbmcgcGFydDMgPSBu\ndWxsOwogICAgICAgIGlmIChjaGFyUGFydCAhPSBmdW5jLmxlbmd0aCgpKQog\nICAgICAgICAgICBwYXJ0MyA9IGZ1bmMuc3Vic3RyaW5nKE1hdGgubWF4KGZy\nb21QYXJ0LCBjaGFyUGFydCkgKyAzKTsKCiAgICAgICAgVHJpbUV4cFN0YXRl\nIHRzdGF0ZSA9IChUcmltRXhwU3RhdGUpIHN0YXRlOwogICAgICAgIHNxbC5h\ncHBlbmQocGFydDEpOwogICAgICAgIGlmIChmcm9tUGFydCA8IGNoYXJQYXJ0\nKQogICAgICAgICAgICBfdmFsLmFwcGVuZFRvKHNlbCwgY3R4LCB0c3RhdGUu\ndmFsdWVTdGF0ZSwgc3FsLCAwKTsKICAgICAgICBlbHNlIAogICAgICAgICAg\nICBfdHJpbUNoYXIuYXBwZW5kVG8oc2VsLCBjdHgsIHRzdGF0ZS5jaGFyU3Rh\ndGUsIHNxbCwgMCk7CiAgICAgICAgc3FsLmFwcGVuZChwYXJ0Mik7CgogICAg\nICAgIGlmIChjaGFyUGFydCAhPSBmdW5jLmxlbmd0aCgpKSB7CiAgICAgICAg\nICAgIGlmIChmcm9tUGFydCA+IGNoYXJQYXJ0KQogICAgICAgICAgICAgICAg\nX3ZhbC5hcHBlbmRUbyhzZWwsIGN0eCwgdHN0YXRlLnZhbHVlU3RhdGUsIHNx\nbCwgMCk7CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIF90cmlt\nQ2hhci5hcHBlbmRUbyhzZWwsIGN0eCwgdHN0YXRlLmNoYXJTdGF0ZSwgc3Fs\nLCAwKTsKICAgICAgICAgICAgc3FsLmFwcGVuZChwYXJ0Myk7CiAgICAgICAg\nfSBlbHNlIHsKICAgICAgICAgICAgLy8gc2luY2UgdGhlIHRyaW0gc3RhdGVt\nZW50IGRpZCBub3Qgc3BlY2lmeSB0aGUgdG9rZW4gZm9yCiAgICAgICAgICAg\nIC8vIHdoZXJlIHRvIHNwZWNpZnkgdGhlIHRyaW0gY2hhciAoZGVub3RlZCBi\neSAiezF9IiksCiAgICAgICAgICAgIC8vIHdlIGRvIG5vdCBoYXZlIHRoZSBh\nYmlsaXR5IHRvIHRyaW0gb2ZmIG5vbi13aGl0ZXNwYWNlCiAgICAgICAgICAg\nIC8vIGNoYXJhY3RlcnM7IHRocm93IGFuIGV4Y2VwdGlvbiB3aGVuIHdlIGF0\ndGVtcHQgdG8gZG8gc28KICAgICAgICAgICAgaWYgKCEoX3RyaW1DaGFyIGlu\nc3RhbmNlb2YgQ29uc3QpIHx8IFN0cmluZy52YWx1ZU9mKCgoQ29uc3QpIAog\nICAgICAgICAgICAgICAgX3RyaW1DaGFyKS5nZXRWYWx1ZShjdHgsdHN0YXRl\nLmNoYXJTdGF0ZSkpLnRyaW0oKS5sZW5ndGgoKSAhPSAwKQogICAgICAgICAg\nICAgICAgZGljdC5hc3NlcnRTdXBwb3J0KGZhbHNlLCAiVHJpbU5vbldoaXRl\nc3BhY2VDaGFyYWN0ZXJzIik7CiAgICAgICAgfQogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIGFjY2VwdFZpc2l0KEV4cHJlc3Npb25WaXNpdG9yIHZpc2l0b3Ip\nIHsKICAgICAgICB2aXNpdG9yLmVudGVyKHRoaXMpOwogICAgICAgIF92YWwu\nYWNjZXB0VmlzaXQodmlzaXRvcik7CiAgICAgICAgX3RyaW1DaGFyLmFjY2Vw\ndFZpc2l0KHZpc2l0b3IpOwogICAgICAgIHZpc2l0b3IuZXhpdCh0aGlzKTsK\nICAgIH0KfQoK\n","encoding":"base64"}

