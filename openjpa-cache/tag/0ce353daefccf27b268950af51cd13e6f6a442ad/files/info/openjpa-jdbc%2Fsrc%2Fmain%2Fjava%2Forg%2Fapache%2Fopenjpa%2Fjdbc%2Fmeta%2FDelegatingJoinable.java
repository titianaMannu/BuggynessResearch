{"sha":"660b58f66fa75a3dced03a7e7b5885604b544160","node_id":"MDQ6QmxvYjIwNjM2NDo2NjBiNThmNjZmYTc1YTNkY2VkMDNhN2U3YjU4ODU2MDRiNTQ0MTYw","size":4121,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/660b58f66fa75a3dced03a7e7b5885604b544160","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLm1ldGE7CgppbXBvcnQgamF2YS5zcWwuU1FMRXhjZXB0\naW9uOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmtlcm5lbC5K\nREJDU3RvcmU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hl\nbWEuQ29sdW1uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2No\nZW1hLkZvcmVpZ25LZXk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5zcWwuSm9pbnM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5z\ncWwuUmVzdWx0OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5P\ncGVuSlBBU3RhdGVNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmxpYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS51dGlsLk1ldGFEYXRhRXhjZXB0aW9uOwoKLyoqCiAqIERlbGVnYXRlcyB0\nbyBhbm90aGVyIHtAbGluayBKb2luYWJsZX0gYWZ0ZXIgZG9pbmcgY29sdW1u\nCiAqIHRyYW5zbGF0aW9uLiBVc2VmdWwgZm9yIGpvaW5zIHRoYXQgYXJlIG5v\ndCBtYW5hZ2VkIGJ5IGFueSBmaWVsZHMgb24KICogdGhlIGpvaW5lZC1mcm9t\nIHNpZGUuIEZvciBleGFtcGxlLCBhIHZlcnRpY2FsIGNsYXNzIG1hcHBpbmcg\nbWFuYWdlcwogKiBmb3JlaWduIGtleSBjb2x1bW5zIGxpbmtpbmcgdG8gdGhl\nIHN1cGVyY2xhc3MgdGFibGUuIEl0IG5lZWRzIHRvIHVzZQogKiB0aGUgam9p\nbmFibGVzIG9mIHRoZSBzdXBlcmNsYXNzIHRvIGFjdHVhbGx5IGV4dHJhY3Qg\ndGhlIGNvbHVtbiB2YWx1ZXMKICogZnJvbSBmaWVsZCB2YWx1ZXMgYW5kIHNv\nIGZvcnRoLCBidXQgaW4gb3JkZXIgZm9yIG90aGVyIG1hcHBpbmdzIHRvIGpv\naW4KICogdG8gaXRzIGZvcmVpZ24ga2V5IGNvbHVtbnMgaXQgbmVlZHMgam9p\nbmFibGVzIG9mIGl0cyBvd24uIFNvIGl0IGNyZWF0ZXMKICogZGVsZWdhdGlu\nZyBqb2luYWJsZXMuCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqLwpwdWJs\naWMgY2xhc3MgRGVsZWdhdGluZ0pvaW5hYmxlCiAgICBpbXBsZW1lbnRzIEpv\naW5hYmxlIHsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6ZXIg\nX2xvYyA9IExvY2FsaXplci5mb3JQYWNrYWdlCiAgICAgICAgKERlbGVnYXRp\nbmdKb2luYWJsZS5jbGFzcyk7CgogICAgcHJpdmF0ZSBmaW5hbCBKb2luYWJs\nZSBfam9pbjsKICAgIHByaXZhdGUgZmluYWwgRm9yZWlnbktleSBfZms7CiAg\nICBwcml2YXRlIGZpbmFsIENvbHVtbltdIF9jb2xzOwoKICAgIC8qKgogICAg\nICogQ29uc3RydWN0b3IuCiAgICAgKgogICAgICogQHBhcmFtIGpvaW4gdGhl\nIG1hcHBpbmcgdG8gZGVsZWdhdGUgdG8KICAgICAqIEBwYXJhbSBmayB0aGUg\nZm9yZWlnbiBrZXkgdG8gdXNlIHRvIHRyYW5zbGF0ZSBhbnkgZ2l2ZW4gY29s\ndW1ucwogICAgICogdG8gdGhlIGdpdmVuIGRlbGVnYXRlJ3MgY29sdW1ucwog\nICAgICovCiAgICBwdWJsaWMgRGVsZWdhdGluZ0pvaW5hYmxlKEpvaW5hYmxl\nIGpvaW4sIEZvcmVpZ25LZXkgZmspIHsKICAgICAgICBfam9pbiA9IGpvaW47\nCiAgICAgICAgX2ZrID0gZms7CgogICAgICAgIENvbHVtbltdIHBrcyA9IGpv\naW4uZ2V0Q29sdW1ucygpOwogICAgICAgIF9jb2xzID0gbmV3IENvbHVtbltw\na3MubGVuZ3RoXTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBrcy5s\nZW5ndGg7IGkrKykgewogICAgICAgICAgICBfY29sc1tpXSA9IGZrLmdldENv\nbHVtbihwa3NbaV0pOwogICAgICAgICAgICBpZiAoX2NvbHNbaV0gPT0gbnVs\nbCkKICAgICAgICAgICAgICAgIHRocm93IG5ldyBNZXRhRGF0YUV4Y2VwdGlv\nbihfbG9jLmdldCgiaW5jb21wbGV0ZS1qb2luIiwKICAgICAgICAgICAgICAg\nICAgICBwa3NbaV0uZ2V0RnVsbE5hbWUoKSkpOwogICAgICAgIH0KICAgIH0K\nCiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yLgogICAgICoKICAgICAqIEBw\nYXJhbSBqb2luIHRoZSBtYXBwaW5nIHRvIGRlbGVnYXRlIHRvCiAgICAgKiBA\ncGFyYW0gY29scyB0cmFuc2xhdGVkIGNvbHVtbnMKICAgICAqLwogICAgcHVi\nbGljIERlbGVnYXRpbmdKb2luYWJsZShKb2luYWJsZSBqb2luLCBDb2x1bW5b\nXSBjb2xzKSB7CiAgICAgICAgX2pvaW4gPSBqb2luOwogICAgICAgIF9mayA9\nIG51bGw7CiAgICAgICAgX2NvbHMgPSBjb2xzOwogICAgICAgIGlmIChjb2xz\nLmxlbmd0aCAhPSBqb2luLmdldENvbHVtbnMoKS5sZW5ndGgpCiAgICAgICAg\nICAgIHRocm93IG5ldyBNZXRhRGF0YUV4Y2VwdGlvbihfbG9jLmdldCgiYmFk\nLXJlbWFwIiwKICAgICAgICAgICAgICAgIGpvaW4uZ2V0Q29sdW1ucygpWzBd\nLmdldEZ1bGxOYW1lKCkpKTsKICAgIH0KCiAgICBwdWJsaWMgaW50IGdldEZp\nZWxkSW5kZXgoKSB7CiAgICAgICAgcmV0dXJuIF9qb2luLmdldEZpZWxkSW5k\nZXgoKTsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IGdldFByaW1hcnlLZXlW\nYWx1ZShSZXN1bHQgcmVzLCBDb2x1bW5bXSBjb2xzLCBGb3JlaWduS2V5IGZr\nLCAKICAgICAgICBKREJDU3RvcmUgc3RvcmUsIEpvaW5zIGpvaW5zKQogICAg\nICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBfam9p\nbi5nZXRQcmltYXJ5S2V5VmFsdWUocmVzLCBjb2xzLCBmaywgc3RvcmUsIGpv\naW5zKTsKICAgIH0KCiAgICBwdWJsaWMgQ29sdW1uW10gZ2V0Q29sdW1ucygp\nIHsKICAgICAgICByZXR1cm4gX2NvbHM7CiAgICB9CgogICAgcHVibGljIE9i\namVjdCBnZXRKb2luVmFsdWUoT2JqZWN0IHZhbCwgQ29sdW1uIGNvbCwgSkRC\nQ1N0b3JlIHN0b3JlKSB7CiAgICAgICAgcmV0dXJuIF9qb2luLmdldEpvaW5W\nYWx1ZSh2YWwsIHRyYW5zbGF0ZShjb2wpLCBzdG9yZSk7CiAgICB9CgogICAg\ncHVibGljIE9iamVjdCBnZXRKb2luVmFsdWUoT3BlbkpQQVN0YXRlTWFuYWdl\nciBzbSwgQ29sdW1uIGNvbCwKICAgICAgICBKREJDU3RvcmUgc3RvcmUpIHsK\nICAgICAgICByZXR1cm4gX2pvaW4uZ2V0Sm9pblZhbHVlKHNtLCB0cmFuc2xh\ndGUoY29sKSwgc3RvcmUpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldEF1\ndG9Bc3NpZ25lZFZhbHVlKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIEpEQkNT\ndG9yZSBzdG9yZSwKICAgICAgICBDb2x1bW4gY29sLCBPYmplY3QgYXV0b2dl\nbikgewogICAgICAgIF9qb2luLnNldEF1dG9Bc3NpZ25lZFZhbHVlKHNtLCBz\ndG9yZSwgdHJhbnNsYXRlKGNvbCksIGF1dG9nZW4pOwogICAgfQoKICAgIHBy\naXZhdGUgQ29sdW1uIHRyYW5zbGF0ZShDb2x1bW4gY29sKSB7CiAgICAgICAg\naWYgKF9mayAhPSBudWxsKQogICAgICAgICAgICByZXR1cm4gX2ZrLmdldFBy\naW1hcnlLZXlDb2x1bW4oY29sKTsKCiAgICAgICAgQ29sdW1uW10gY29scyA9\nIF9qb2luLmdldENvbHVtbnMoKTsKICAgICAgICBmb3IgKGludCBpID0gMDsg\naSA8IGNvbHMubGVuZ3RoOyBpKyspCiAgICAgICAgICAgIGlmIChjb2wgPT0g\nY29sc1tpXSkKICAgICAgICAgICAgICAgIHJldHVybiBfY29sc1tpXTsKICAg\nICAgICByZXR1cm4gbnVsbDsKICAgIH0KfQo=\n","encoding":"base64"}

