{"sha":"c2614d18b43aac4d4119611d60c34dbb3249c19f","node_id":"MDQ6QmxvYjIwNjM2NDpjMjYxNGQxOGI0M2FhYzRkNDExOTYxMWQ2MGMzNGRiYjMyNDljMTlm","size":11756,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/c2614d18b43aac4d4119611d60c34dbb3249c19f","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLm1ldGE7CgppbXBvcnQgamF2YS5zcWwuU1FMRXhjZXB0\naW9uOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmtlcm5lbC5K\nREJDU3RvcmU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hl\nbWEuQ29sdW1uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2No\nZW1hLkNvbHVtbklPOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMu\nc2NoZW1hLkluZGV4OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMu\nc2NoZW1hLlNjaGVtYXM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5zcWwuSm9pbnM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5z\ncWwuUmVzdWx0OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3Fs\nLlJvd01hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5z\ncWwuU1FMQnVmZmVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMu\nc3FsLlNlbGVjdDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwu\nT3BlbkpQQVN0YXRlTWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5saWIubG9nLkxvZzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIu\ndXRpbC5Mb2NhbGl6ZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0\nYS5NZXRhRGF0YUNvbnRleHQ7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nbWV0YS5NZXRhRGF0YU1vZGVzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLm1ldGEuTWV0YURhdGFSZXBvc2l0b3J5OwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnV0aWwuSW50ZXJuYWxFeGNlcHRpb247CgovKioKICogSGFuZGxl\ncyBkZXRlcm1pbmluZyB0aGUgb2JqZWN0IGNsYXNzIG9mIGRhdGFiYXNlIHJl\nY29yZHMuCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqLwpwdWJsaWMgY2xh\nc3MgRGlzY3JpbWluYXRvcgogICAgaW1wbGVtZW50cyBEaXNjcmltaW5hdG9y\nU3RyYXRlZ3ksIE1ldGFEYXRhQ29udGV4dCwgTWV0YURhdGFNb2RlcyB7Cgog\nICAgLyoqCiAgICAgKiBOdWxsIGRpc2NyaW1pbmF0b3IgdmFsdWUgbWFya2Vy\nLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIE9iamVjdCBOVUxM\nID0gbmV3IE9iamVjdCgpOwoKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExv\nY2FsaXplciBfbG9jID0gTG9jYWxpemVyLmZvclBhY2thZ2UKICAgICAgICAo\nRGlzY3JpbWluYXRvci5jbGFzcyk7CgogICAgcHJpdmF0ZSBmaW5hbCBDbGFz\nc01hcHBpbmcgX21hcHBpbmc7CiAgICBwcml2YXRlIGZpbmFsIERpc2NyaW1p\nbmF0b3JNYXBwaW5nSW5mbyBfaW5mbzsKICAgIHByaXZhdGUgRGlzY3JpbWlu\nYXRvclN0cmF0ZWd5IF9zdHJhdGVneSA9IG51bGw7CiAgICBwcml2YXRlIGlu\ndCBfcmVzTW9kZSA9IE1PREVfTk9ORTsKCiAgICBwcml2YXRlIENvbHVtbltd\nIF9jb2xzID0gU2NoZW1hcy5FTVBUWV9DT0xVTU5TOwogICAgcHJpdmF0ZSBD\nb2x1bW5JTyBfaW8gPSBudWxsOwogICAgcHJpdmF0ZSBJbmRleCBfaWR4ID0g\nbnVsbDsKICAgIHByaXZhdGUgYm9vbGVhbiBfc3Vic0xvYWRlZCA9IGZhbHNl\nOwogICAgcHJpdmF0ZSBPYmplY3QgX3ZhbHVlID0gbnVsbDsKCiAgICAvKioK\nICAgICAqIENvbnN0cnVjdG9yLiBTdXBwbHkgb3duaW5nIG1hcHBpbmcuCiAg\nICAgKi8KICAgIHB1YmxpYyBEaXNjcmltaW5hdG9yKENsYXNzTWFwcGluZyBt\nYXBwaW5nKSB7CiAgICAgICAgX21hcHBpbmcgPSBtYXBwaW5nOwogICAgICAg\nIF9pbmZvID0gZ2V0TWFwcGluZ1JlcG9zaXRvcnkoKS5uZXdNYXBwaW5nSW5m\nbyh0aGlzKTsKICAgIH0KCiAgICBwdWJsaWMgTWV0YURhdGFSZXBvc2l0b3J5\nIGdldFJlcG9zaXRvcnkoKSB7CiAgICAgICAgcmV0dXJuIF9tYXBwaW5nLmdl\ndFJlcG9zaXRvcnkoKTsKICAgIH0KCiAgICBwdWJsaWMgTWFwcGluZ1JlcG9z\naXRvcnkgZ2V0TWFwcGluZ1JlcG9zaXRvcnkoKSB7CiAgICAgICAgcmV0dXJu\nIF9tYXBwaW5nLmdldE1hcHBpbmdSZXBvc2l0b3J5KCk7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBSZXR1cm4gdGhlIG93bmluZyBtYXBwaW5nLgogICAgICov\nCiAgICBwdWJsaWMgQ2xhc3NNYXBwaW5nIGdldENsYXNzTWFwcGluZygpIHsK\nICAgICAgICByZXR1cm4gX21hcHBpbmc7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBUaGUgc3RyYXRlZ3kgdXNlZCBmb3IgY2xhc3MgZGlzY3JpbWluYXRpb24u\nCiAgICAgKi8KICAgIHB1YmxpYyBEaXNjcmltaW5hdG9yU3RyYXRlZ3kgZ2V0\nU3RyYXRlZ3koKSB7CiAgICAgICAgcmV0dXJuIF9zdHJhdGVneTsKICAgIH0K\nCiAgICAvKioKICAgICAqIFRoZSBzdHJhdGVneSB1c2VkIGZvciBjbGFzcyBk\naXNjcmltaW5hdGlvbi4gVGhlIDxjb2RlPmFkYXB0PC9jb2RlPgogICAgICog\ncGFyYW1ldGVyIGRldGVybWluZXMgd2hldGhlciB0byBhZGFwdCB3aGVuIG1h\ncHBpbmcgdGhlIHN0cmF0ZWd5OwogICAgICogdXNlIG51bGwgaWYgdGhlIHN0\ncmF0ZWd5IHNob3VsZCBub3QgYmUgbWFwcGVkLgogICAgICovCiAgICBwdWJs\naWMgdm9pZCBzZXRTdHJhdGVneShEaXNjcmltaW5hdG9yU3RyYXRlZ3kgc3Ry\nYXRlZ3ksIEJvb2xlYW4gYWRhcHQpIHsKICAgICAgICAvLyBzZXQgc3RyYXRl\nZ3kgZmlyc3Qgc28gd2UgY2FuIGFjY2VzcyBpdCBkdXJpbmcgbWFwcGluZwog\nICAgICAgIERpc2NyaW1pbmF0b3JTdHJhdGVneSBvcmlnID0gX3N0cmF0ZWd5\nOwogICAgICAgIF9zdHJhdGVneSA9IHN0cmF0ZWd5OwogICAgICAgIGlmIChz\ndHJhdGVneSAhPSBudWxsKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAg\nICAgICAgICBzdHJhdGVneS5zZXREaXNjcmltaW5hdG9yKHRoaXMpOwogICAg\nICAgICAgICAgICAgaWYgKGFkYXB0ICE9IG51bGwpCiAgICAgICAgICAgICAg\nICAgICAgc3RyYXRlZ3kubWFwKGFkYXB0LmJvb2xlYW5WYWx1ZSgpKTsKICAg\nICAgICAgICAgfSBjYXRjaCAoUnVudGltZUV4Y2VwdGlvbiByZSkgewogICAg\nICAgICAgICAgICAgLy8gcmVzZXQgc3RyYXRlZ3kKICAgICAgICAgICAgICAg\nIF9zdHJhdGVneSA9IG9yaWc7CiAgICAgICAgICAgICAgICB0aHJvdyByZTsK\nICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAq\nIFRoZSBkaXNjcmltaW5hdG9yIHZhbHVlLgogICAgICovCiAgICBwdWJsaWMg\nT2JqZWN0IGdldFZhbHVlKCkgewogICAgICAgIHJldHVybiBfdmFsdWU7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBUaGUgZGlzY3JpbWluYXRvciB2YWx1ZS4K\nICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0VmFsdWUoT2JqZWN0IHZhbHVl\nKSB7CiAgICAgICAgX3ZhbHVlID0gdmFsdWU7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBSYXcgbWFwcGluZyBkYXRhLgogICAgICovCiAgICBwdWJsaWMgRGlz\nY3JpbWluYXRvck1hcHBpbmdJbmZvIGdldE1hcHBpbmdJbmZvKCkgewogICAg\nICAgIHJldHVybiBfaW5mbzsKICAgIH0KCiAgICAvKioKICAgICAqIENvbHVt\nbnMgdXNlZCBieSB0aGlzIERpc2NyaW1pbmF0b3IuCiAgICAgKi8KICAgIHB1\nYmxpYyBDb2x1bW5bXSBnZXRDb2x1bW5zKCkgewogICAgICAgIHJldHVybiBf\nY29sczsKICAgIH0KCiAgICAvKioKICAgICAqIENvbHVtbnMgdXNlZCBieSB0\naGlzIERpc2NyaW1pbmF0b3IuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNl\ndENvbHVtbnMoQ29sdW1uW10gY29scykgewogICAgICAgIGlmIChjb2xzID09\nIG51bGwpCiAgICAgICAgICAgIGNvbHMgPSBTY2hlbWFzLkVNUFRZX0NPTFVN\nTlM7CiAgICAgICAgX2NvbHMgPSBjb2xzOwogICAgfQoKICAgIC8qKgogICAg\nICogSS9PIGluZm9ybWF0aW9uIG9uIHRoZSBkaXNjcmltaW5hdG9yIGNvbHVt\nbnMuCiAgICAgKi8KICAgIHB1YmxpYyBDb2x1bW5JTyBnZXRDb2x1bW5JTygp\nIHsKICAgICAgICByZXR1cm4gKF9pbyA9PSBudWxsKSA/IENvbHVtbklPLlVO\nUkVTVFJJQ1RFRCA6IF9pbzsKICAgIH0KCiAgICAvKioKICAgICAqIEkvTyBp\nbmZvcm1hdGlvbiBvbiB0aGUgZGlzY3JpbWluYXRvciBjb2x1bW5zLgogICAg\nICovCiAgICBwdWJsaWMgdm9pZCBzZXRDb2x1bW5JTyhDb2x1bW5JTyBpbykg\newogICAgICAgIF9pbyA9IGlvOwogICAgfQoKICAgIC8qKgogICAgICogSW5k\nZXggb24gdGhlIERpc2NyaW1pbmF0b3IgY29sdW1ucywgb3IgbnVsbCBpZiBu\nb25lLgogICAgICovCiAgICBwdWJsaWMgSW5kZXggZ2V0SW5kZXgoKSB7CiAg\nICAgICAgcmV0dXJuIF9pZHg7CiAgICB9CgogICAgLyoqCiAgICAgKiBJbmRl\neCBvbiB0aGUgRGlzY3JpbWluYXRvciBjb2x1bW5zLCBvciBudWxsIGlmIG5v\nbmUuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldEluZGV4KEluZGV4IGlk\neCkgewogICAgICAgIF9pZHggPSBpZHg7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBJbmNyZW1lbnQgdGhlIHJlZmVyZW5jZSBjb3VudCBvZiB1c2VkIHNjaGVt\nYSBjb21wb25lbnRzLgogICAgICovCiAgICBwdWJsaWMgdm9pZCByZWZTY2hl\nbWFDb21wb25lbnRzKCkgewogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwg\nX2NvbHMubGVuZ3RoOyBpKyspCiAgICAgICAgICAgIF9jb2xzW2ldLnJlZigp\nOwogICAgfQoKICAgIC8qKgogICAgICogQ2xlYXIgbWFwcGluZyBpbmZvcm1h\ndGlvbiwgaW5jbHVkaW5nIHN0cmF0ZWd5LgogICAgICovCiAgICBwdWJsaWMg\ndm9pZCBjbGVhck1hcHBpbmcoKSB7CiAgICAgICAgX3N0cmF0ZWd5ID0gbnVs\nbDsKICAgICAgICBfY29scyA9IFNjaGVtYXMuRU1QVFlfQ09MVU1OUzsKICAg\nICAgICBfaWR4ID0gbnVsbDsKICAgICAgICBfdmFsdWUgPSBudWxsOwogICAg\nICAgIF9pbmZvLmNsZWFyKCk7CiAgICAgICAgc2V0UmVzb2x2ZShNT0RFX01B\nUFBJTkcgfCBNT0RFX01BUFBJTkdfSU5JVCwgZmFsc2UpOwogICAgfQoKICAg\nIC8qKgogICAgICogVXBkYXRlIHtAbGluayBNYXBwaW5nSW5mb30gd2l0aCBv\ndXIgY3VycmVudCBtYXBwaW5nIGluZm9ybWF0aW9uLgogICAgICovCiAgICBw\ndWJsaWMgdm9pZCBzeW5jTWFwcGluZ0luZm8oKSB7CiAgICAgICAgX2luZm8u\nc3luY1dpdGgodGhpcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXNvbHZl\nIG1vZGUuCiAgICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0UmVzb2x2ZSgpIHsK\nICAgICAgICByZXR1cm4gX3Jlc01vZGU7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBSZXNvbHZlIG1vZGUuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFJl\nc29sdmUoaW50IG1vZGUpIHsKICAgICAgICBfcmVzTW9kZSA9IG1vZGU7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBSZXNvbHZlIG1vZGUuCiAgICAgKi8KICAg\nIHB1YmxpYyB2b2lkIHNldFJlc29sdmUoaW50IG1vZGUsIGJvb2xlYW4gb24p\nIHsKICAgICAgICBpZiAobW9kZSA9PSBNT0RFX05PTkUpCiAgICAgICAgICAg\nIF9yZXNNb2RlID0gbW9kZTsKICAgICAgICBlbHNlIGlmIChvbikKICAgICAg\nICAgICAgX3Jlc01vZGUgfD0gbW9kZTsKICAgICAgICBlbHNlCiAgICAgICAg\nICAgIF9yZXNNb2RlICY9IH5tb2RlOwogICAgfQoKICAgIC8qKgogICAgICog\nUmVzb2x2ZSBtYXBwaW5nIGluZm9ybWF0aW9uLgogICAgICovCiAgICBwdWJs\naWMgYm9vbGVhbiByZXNvbHZlKGludCBtb2RlKSB7CiAgICAgICAgaWYgKChf\ncmVzTW9kZSAmIG1vZGUpID09IG1vZGUpCiAgICAgICAgICAgIHJldHVybiB0\ncnVlOwogICAgICAgIGludCBjdXIgPSBfcmVzTW9kZTsKICAgICAgICBfcmVz\nTW9kZSB8PSBtb2RlOwogICAgICAgIGlmICgobW9kZSAmIE1PREVfTUFQUElO\nRykgIT0gMCAmJiAoY3VyICYgTU9ERV9NQVBQSU5HKSA9PSAwKQogICAgICAg\nICAgICByZXNvbHZlTWFwcGluZygpOwogICAgICAgIGlmICgobW9kZSAmIE1P\nREVfTUFQUElOR19JTklUKSAhPSAwICYmIChjdXIgJiBNT0RFX01BUFBJTkdf\nSU5JVCkgPT0gMCkKICAgICAgICAgICAgX3N0cmF0ZWd5LmluaXRpYWxpemUo\nKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBTZXR1cCBtYXBwaW5nLgogICAgICovCiAgICBwcml2YXRlIHZvaWQgcmVz\nb2x2ZU1hcHBpbmcoKSB7CiAgICAgICAgLy8gbWFwIHN0cmF0ZWd5CiAgICAg\nICAgTWFwcGluZ1JlcG9zaXRvcnkgcmVwb3MgPSBnZXRNYXBwaW5nUmVwb3Np\ndG9yeSgpOwogICAgICAgIGlmIChfc3RyYXRlZ3kgPT0gbnVsbCkKICAgICAg\nICAgICAgcmVwb3MuZ2V0U3RyYXRlZ3lJbnN0YWxsZXIoKS5pbnN0YWxsU3Ry\nYXRlZ3kodGhpcyk7CiAgICAgICAgTG9nIGxvZyA9IHJlcG9zLmdldExvZygp\nOwogICAgICAgIGlmIChsb2cuaXNUcmFjZUVuYWJsZWQoKSkKICAgICAgICAg\nICAgbG9nLnRyYWNlKF9sb2MuZ2V0KCJzdHJhdGVneSIsIHRoaXMsIF9zdHJh\ndGVneS5nZXRBbGlhcygpKSk7CgogICAgICAgIC8vIG1hcmsgY29sdW1ucyBh\ncyBtYXBwZWQKICAgICAgICBDb2x1bW5bXSBjb2xzID0gZ2V0Q29sdW1ucygp\nOwogICAgICAgIENvbHVtbklPIGlvID0gZ2V0Q29sdW1uSU8oKTsKICAgICAg\nICBmb3IgKGludCBpID0gMDsgaSA8IGNvbHMubGVuZ3RoOyBpKyspIHsKICAg\nICAgICAgICAgaWYgKGlvLmlzSW5zZXJ0YWJsZShpLCBmYWxzZSkpCiAgICAg\nICAgICAgICAgICBjb2xzW2ldLnNldEZsYWcoQ29sdW1uLkZMQUdfRElSRUNU\nX0lOU0VSVCwgdHJ1ZSk7CiAgICAgICAgICAgIGlmIChpby5pc1VwZGF0YWJs\nZShpLCBmYWxzZSkpCiAgICAgICAgICAgICAgICBjb2xzW2ldLnNldEZsYWco\nQ29sdW1uLkZMQUdfRElSRUNUX1VQREFURSwgdHJ1ZSk7CiAgICAgICAgfQog\nICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciB0aGlzIERpc2NyaW1pbmF0\nb3IgaGFzIGxvYWRlZCBzdWJjbGFzc2VzIHlldC4KICAgICAqLwogICAgcHVi\nbGljIGJvb2xlYW4gZ2V0U3ViY2xhc3Nlc0xvYWRlZCgpIHsKICAgICAgICBp\nZiAoIV9zdWJzTG9hZGVkKSB7CiAgICAgICAgICAgIENsYXNzTWFwcGluZyBz\ndXAgPSBfbWFwcGluZy5nZXRQQ1N1cGVyY2xhc3NNYXBwaW5nKCk7CiAgICAg\nICAgICAgIGlmIChzdXAgIT0gbnVsbCAmJiBzdXAuZ2V0RGlzY3JpbWluYXRv\ncigpLmdldFN1YmNsYXNzZXNMb2FkZWQoKSkKICAgICAgICAgICAgICAgIF9z\ndWJzTG9hZGVkID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIF9z\ndWJzTG9hZGVkOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciB0aGlz\nIERpc2NyaW1pbmF0b3IgaGFzIGxvYWRlZCBzdWJjbGFzc2VzIHlldC4KICAg\nICAqLwogICAgcHVibGljIHZvaWQgc2V0U3ViY2xhc3Nlc0xvYWRlZChib29s\nZWFuIGxvYWRlZCkgewogICAgICAgIF9zdWJzTG9hZGVkID0gbG9hZGVkOwog\nICAgfQoKICAgIC8qKgogICAgICogQWRkIFdIRVJFIGNvbmRpdGlvbnMgdG8g\ndGhlIGdpdmVuIHNlbGVjdCBsaW1pdGluZyB0aGUgcmV0dXJuZWQgcmVzdWx0\ncwogICAgICogdG8gb3VyIG1hcHBpbmcgdHlwZSwgcG9zc2libHkgaW5jbHVk\naW5nIHN1YmNsYXNzZXMuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGFk\nZENsYXNzQ29uZGl0aW9ucyhTZWxlY3Qgc2VsLCBib29sZWFuIHN1YnMsIEpv\naW5zIGpvaW5zKSB7CiAgICAgICAgaWYgKF9tYXBwaW5nLmdldEpvaW5hYmxl\nUENTdXBlcmNsYXNzTWFwcGluZygpID09IG51bGwKICAgICAgICAgICAgJiYg\nX21hcHBpbmcuZ2V0Sm9pbmFibGVQQ1N1YmNsYXNzTWFwcGluZ3MoKS5sZW5n\ndGggPT0gMCkKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoKICAgICAgICAv\nLyBqb2luIGRvd24gdG8gYmFzZSBjbGFzcyB3aGVyZSBjb25kaXRpb25zIHdp\nbGwgYmUgYWRkZWQKICAgICAgICBDbGFzc01hcHBpbmcgZnJvbSA9IF9tYXBw\naW5nOwogICAgICAgIENsYXNzTWFwcGluZyBzdXAgPSBfbWFwcGluZy5nZXRK\nb2luYWJsZVBDU3VwZXJjbGFzc01hcHBpbmcoKTsKICAgICAgICBmb3IgKDsg\nc3VwICE9IG51bGw7IGZyb20gPSBzdXAsIHN1cCA9IGZyb20KICAgICAgICAg\nICAgLmdldEpvaW5hYmxlUENTdXBlcmNsYXNzTWFwcGluZygpKSB7CiAgICAg\nICAgICAgIGlmIChmcm9tLmdldFRhYmxlKCkgIT0gc3VwLmdldFRhYmxlKCkp\nIHsKICAgICAgICAgICAgICAgIGlmIChqb2lucyA9PSBudWxsKQogICAgICAg\nICAgICAgICAgICAgIGpvaW5zID0gc2VsLm5ld0pvaW5zKCk7CiAgICAgICAg\nICAgICAgICBqb2lucyA9IGZyb20uam9pblN1cGVyY2xhc3Moam9pbnMsIGZh\nbHNlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgU1FMQnVm\nZmVyIGJ1ZiA9IGdldENsYXNzQ29uZGl0aW9ucyhzZWwsIGpvaW5zLCBfbWFw\ncGluZywgc3Vicyk7CiAgICAgICAgaWYgKGJ1ZiAhPSBudWxsKSB7CiAgICAg\nICAgICAgIHNlbC53aGVyZShidWYsIGpvaW5zKTsKICAgICAgICAgICAgcmV0\ndXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAg\nIH0KCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vCiAgICAvLyBEaXNjcmltaW5hdG9yU3RyYXRlZ3kgaW1wbGVtZW50YXRp\nb24KICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8KCiAgICBwdWJsaWMgU3RyaW5nIGdldEFsaWFzKCkgewogICAgICAgIHJl\ndHVybiBhc3NlcnRTdHJhdGVneSgpLmdldEFsaWFzKCk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgbWFwKGJvb2xlYW4gYWRhcHQpIHsKICAgICAgICBhc3Nl\ncnRTdHJhdGVneSgpLm1hcChhZGFwdCk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgaW5pdGlhbGl6ZSgpIHsKICAgICAgICBhc3NlcnRTdHJhdGVneSgpLmlu\naXRpYWxpemUoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBpbnNlcnQoT3Bl\nbkpQQVN0YXRlTWFuYWdlciBzbSwgSkRCQ1N0b3JlIHN0b3JlLCBSb3dNYW5h\nZ2VyIHJtKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAg\nIGFzc2VydFN0cmF0ZWd5KCkuaW5zZXJ0KHNtLCBzdG9yZSwgcm0pOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHVwZGF0ZShPcGVuSlBBU3RhdGVNYW5hZ2Vy\nIHNtLCBKREJDU3RvcmUgc3RvcmUsIFJvd01hbmFnZXIgcm0pCiAgICAgICAg\ndGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgYXNzZXJ0U3RyYXRlZ3ko\nKS51cGRhdGUoc20sIHN0b3JlLCBybSk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgZGVsZXRlKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIEpEQkNTdG9yZSBz\ndG9yZSwgUm93TWFuYWdlciBybSkKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0\naW9uIHsKICAgICAgICBhc3NlcnRTdHJhdGVneSgpLmRlbGV0ZShzbSwgc3Rv\ncmUsIHJtKTsKICAgIH0KCiAgICBwdWJsaWMgQm9vbGVhbiBpc0N1c3RvbUlu\nc2VydChPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBKREJDU3RvcmUgc3RvcmUp\nIHsKICAgICAgICByZXR1cm4gYXNzZXJ0U3RyYXRlZ3koKS5pc0N1c3RvbUlu\nc2VydChzbSwgc3RvcmUpOwogICAgfQoKICAgIHB1YmxpYyBCb29sZWFuIGlz\nQ3VzdG9tVXBkYXRlKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIEpEQkNTdG9y\nZSBzdG9yZSkgewogICAgICAgIHJldHVybiBhc3NlcnRTdHJhdGVneSgpLmlz\nQ3VzdG9tVXBkYXRlKHNtLCBzdG9yZSk7CiAgICB9CgogICAgcHVibGljIEJv\nb2xlYW4gaXNDdXN0b21EZWxldGUoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwg\nSkRCQ1N0b3JlIHN0b3JlKSB7CiAgICAgICAgcmV0dXJuIGFzc2VydFN0cmF0\nZWd5KCkuaXNDdXN0b21EZWxldGUoc20sIHN0b3JlKTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBjdXN0b21JbnNlcnQoT3BlbkpQQVN0YXRlTWFuYWdlciBz\nbSwgSkRCQ1N0b3JlIHN0b3JlKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRp\nb24gewogICAgICAgIGFzc2VydFN0cmF0ZWd5KCkuY3VzdG9tSW5zZXJ0KHNt\nLCBzdG9yZSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgY3VzdG9tVXBkYXRl\nKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIEpEQkNTdG9yZSBzdG9yZSkKICAg\nICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBhc3NlcnRTdHJh\ndGVneSgpLmN1c3RvbVVwZGF0ZShzbSwgc3RvcmUpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIGN1c3RvbURlbGV0ZShPcGVuSlBBU3RhdGVNYW5hZ2VyIHNt\nLCBKREJDU3RvcmUgc3RvcmUpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlv\nbiB7CiAgICAgICAgYXNzZXJ0U3RyYXRlZ3koKS5jdXN0b21EZWxldGUoc20s\nIHN0b3JlKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXREaXNjcmltaW5h\ndG9yKERpc2NyaW1pbmF0b3Igb3duZXIpIHsKICAgICAgICBhc3NlcnRTdHJh\ndGVneSgpLnNldERpc2NyaW1pbmF0b3Iob3duZXIpOwogICAgfQoKICAgIHB1\nYmxpYyBib29sZWFuIHNlbGVjdChTZWxlY3Qgc2VsLCBDbGFzc01hcHBpbmcg\nbWFwcGluZykgewogICAgICAgIHJldHVybiBhc3NlcnRTdHJhdGVneSgpLnNl\nbGVjdChzZWwsIG1hcHBpbmcpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGxv\nYWRTdWJjbGFzc2VzKEpEQkNTdG9yZSBzdG9yZSkKICAgICAgICB0aHJvd3Mg\nU1FMRXhjZXB0aW9uLCBDbGFzc05vdEZvdW5kRXhjZXB0aW9uIHsKICAgICAg\nICBhc3NlcnRTdHJhdGVneSgpLmxvYWRTdWJjbGFzc2VzKHN0b3JlKTsKICAg\nIH0KCiAgICBwdWJsaWMgQ2xhc3MgZ2V0Q2xhc3MoSkRCQ1N0b3JlIHN0b3Jl\nLCBDbGFzc01hcHBpbmcgYmFzZSwgUmVzdWx0IHJlc3VsdCkKICAgICAgICB0\naHJvd3MgU1FMRXhjZXB0aW9uLCBDbGFzc05vdEZvdW5kRXhjZXB0aW9uIHsK\nICAgICAgICByZXR1cm4gYXNzZXJ0U3RyYXRlZ3koKS5nZXRDbGFzcyhzdG9y\nZSwgYmFzZSwgcmVzdWx0KTsKICAgIH0KCiAgICBwdWJsaWMgU1FMQnVmZmVy\nIGdldENsYXNzQ29uZGl0aW9ucyhTZWxlY3Qgc2VsLCBKb2lucyBqb2lucywg\nCiAgICAgICAgQ2xhc3NNYXBwaW5nIGJhc2UsIGJvb2xlYW4gc3Vicykgewog\nICAgICAgIHJldHVybiBhc3NlcnRTdHJhdGVneSgpLmdldENsYXNzQ29uZGl0\naW9ucyhzZWwsIGpvaW5zLCBiYXNlLCBzdWJzKTsKICAgIH0KCiAgICBwcml2\nYXRlIERpc2NyaW1pbmF0b3JTdHJhdGVneSBhc3NlcnRTdHJhdGVneSgpIHsK\nICAgICAgICBpZiAoX3N0cmF0ZWd5ID09IG51bGwpCiAgICAgICAgICAgIHRo\ncm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIHJldHVybiBf\nc3RyYXRlZ3k7CiAgICB9CgogICAgcHVibGljIFN0cmluZyB0b1N0cmluZygp\nIHsKICAgICAgICByZXR1cm4gX21hcHBpbmcgKyAiPGRpc2NyaW1pbmF0b3I+\nIjsKICAgIH0KfQo=\n","encoding":"base64"}

