{"sha":"2786d3c800c371ae757957665ad74bd2c6dd81b5","node_id":"MDQ6QmxvYjIwNjM2NDoyNzg2ZDNjODAwYzM3MWFlNzU3OTU3NjY1YWQ3NGJkMmM2ZGQ4MWI1","size":21208,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/2786d3c800c371ae757957665ad74bd2c6dd81b5","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLm1ldGE7CgppbXBvcnQgamF2YS51dGlsLkhhc2hNYXA7\nCmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGphdmEudXRpbC5NYXA7\nCmltcG9ydCBqYXZhLnV0aWwuUHJvcGVydGllczsKCmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEuamRiYy5jb25mLkpEQkNDb25maWd1cmF0aW9uOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5zdHJhdHMuVW50eXBl\nZFBDVmFsdWVIYW5kbGVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpk\nYmMuc2NoZW1hLkNvbHVtbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5q\nZGJjLnNjaGVtYS5Gb3JlaWduS2V5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmpkYmMuc2NoZW1hLkluZGV4OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmpkYmMuc2NoZW1hLlNjaGVtYTsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLnNjaGVtYS5UYWJsZTsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLnNjaGVtYS5VbmlxdWU7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5zcWwuREJEaWN0aW9uYXJ5OwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmxpYi5jb25mLkNvbmZpZ3VyYWJsZTsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5saWIuY29uZi5Db25maWd1cmF0aW9uOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5jb25mLkNvbmZpZ3VyYXRpb25zOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkphdmFWZXJzaW9u\nczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkphdmFUeXBlczsK\naW1wb3J0IHNlcnAudXRpbC5TdHJpbmdzOwoKLyoqCiAqIERlZmF1bHQgaW1w\nbGVtZW50YXRpb24gb2Yge0BsaW5rIE1hcHBpbmdEZWZhdWx0c30uCiAqCiAq\nIEBhdXRob3IgQWJlIFdoaXRlCiAqLwpwdWJsaWMgY2xhc3MgTWFwcGluZ0Rl\nZmF1bHRzSW1wbAogICAgaW1wbGVtZW50cyBNYXBwaW5nRGVmYXVsdHMsIENv\nbmZpZ3VyYWJsZSB7CgogICAgcHJvdGVjdGVkIERCRGljdGlvbmFyeSBkaWN0\nID0gbnVsbDsKICAgIHByaXZhdGUgU3RyaW5nIF9iYXNlQ2xhc3NTdHJhdGVn\neSA9IG51bGw7CiAgICBwcml2YXRlIFN0cmluZyBfc3ViY2xhc3NTdHJhdGVn\neSA9IG51bGw7CiAgICBwcml2YXRlIFN0cmluZyBfdmVyc2lvblN0cmF0ZWd5\nID0gbnVsbDsKICAgIHByaXZhdGUgU3RyaW5nIF9kaXNjU3RyYXRlZ3kgPSBu\ndWxsOwogICAgcHJpdmF0ZSBmaW5hbCBNYXAgX2ZpZWxkTWFwID0gbmV3IEhh\nc2hNYXAoKTsKICAgIHByaXZhdGUgYm9vbGVhbiBfZGVmTWlzc2luZyA9IGZh\nbHNlOwogICAgcHJpdmF0ZSBib29sZWFuIF9jbGFzc0NyaXRlcmlhID0gZmFs\nc2U7CiAgICBwcml2YXRlIGludCBfam9pbkZLQWN0aW9uID0gRm9yZWlnbktl\neS5BQ1RJT05fTk9ORTsKICAgIHByaXZhdGUgaW50IF9ma0FjdGlvbiA9IEZv\ncmVpZ25LZXkuQUNUSU9OX05PTkU7CiAgICBwcml2YXRlIGJvb2xlYW4gX2Rl\nZmVyID0gZmFsc2U7CiAgICBwcml2YXRlIGJvb2xlYW4gX2luZGV4RksgPSB0\ncnVlOwogICAgcHJpdmF0ZSBib29sZWFuIF9pbmRleERpc2MgPSB0cnVlOwog\nICAgcHJpdmF0ZSBib29sZWFuIF9pbmRleFZlcnMgPSBmYWxzZTsKICAgIHBy\naXZhdGUgYm9vbGVhbiBfb3JkZXJMaXN0cyA9IHRydWU7CiAgICBwcml2YXRl\nIGJvb2xlYW4gX2FkZE51bGxJbmQgPSBmYWxzZTsKICAgIHByaXZhdGUgYm9v\nbGVhbiBfb3JkaW5hbEVudW0gPSBmYWxzZTsKICAgIHByaXZhdGUgYm9vbGVh\nbiBfc3RyaW5naWZ5VW5tYXBwZWQgPSBmYWxzZTsKICAgIHByaXZhdGUgU3Ry\naW5nIF9kc0lkTmFtZSA9IG51bGw7CiAgICBwcml2YXRlIFN0cmluZyBfdmVy\nc05hbWUgPSBudWxsOwogICAgcHJpdmF0ZSBTdHJpbmcgX2Rpc2NOYW1lID0g\nbnVsbDsKICAgIHByaXZhdGUgU3RyaW5nIF9vcmRlck5hbWUgPSBudWxsOwog\nICAgcHJpdmF0ZSBTdHJpbmcgX251bGxJbmROYW1lID0gbnVsbDsKCiAgICAv\nKioKICAgICAqIERlZmF1bHQgYmFzZSBjbGFzcyBzdHJhdGVneSBhbGlhcy4K\nICAgICAqLwogICAgcHVibGljIFN0cmluZyBnZXRCYXNlQ2xhc3NTdHJhdGVn\neSgpIHsKICAgICAgICByZXR1cm4gX2Jhc2VDbGFzc1N0cmF0ZWd5OwogICAg\nfQoKICAgIC8qKgogICAgICogRGVmYXVsdCBiYXNlIGNsYXNzIHN0cmF0ZWd5\nIGFsaWFzLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRCYXNlQ2xhc3NT\ndHJhdGVneShTdHJpbmcgYmFzZUNsYXNzU3RyYXRlZ3kpIHsKICAgICAgICBf\nYmFzZUNsYXNzU3RyYXRlZ3kgPSBiYXNlQ2xhc3NTdHJhdGVneTsKICAgIH0K\nCiAgICAvKioKICAgICAqIERlZmF1bHQgc3ViY2xhc3Mgc3RyYXRlZ3kgYWxp\nYXMuCiAgICAgKi8KICAgIHB1YmxpYyBTdHJpbmcgZ2V0U3ViY2xhc3NTdHJh\ndGVneSgpIHsKICAgICAgICByZXR1cm4gX3N1YmNsYXNzU3RyYXRlZ3k7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBEZWZhdWx0IHN1YmNsYXNzIHN0cmF0ZWd5\nIGFsaWFzLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRTdWJjbGFzc1N0\ncmF0ZWd5KFN0cmluZyBzdWJjbGFzc1N0cmF0ZWd5KSB7CiAgICAgICAgX3N1\nYmNsYXNzU3RyYXRlZ3kgPSBzdWJjbGFzc1N0cmF0ZWd5OwogICAgfQoKICAg\nIC8qKgogICAgICogRGVmYXVsdCB2ZXJzaW9uIHN0cmF0ZWd5IGFsaWFzLgog\nICAgICovCiAgICBwdWJsaWMgU3RyaW5nIGdldFZlcnNpb25TdHJhdGVneSgp\nIHsKICAgICAgICByZXR1cm4gX3ZlcnNpb25TdHJhdGVneTsKICAgIH0KCiAg\nICAvKioKICAgICAqIERlZmF1bHQgdmVyc2lvbiBzdHJhdGVneSBhbGlhcy4K\nICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0VmVyc2lvblN0cmF0ZWd5KFN0\ncmluZyB2ZXJzaW9uU3RyYXRlZ3kpIHsKICAgICAgICBfdmVyc2lvblN0cmF0\nZWd5ID0gdmVyc2lvblN0cmF0ZWd5OwogICAgfQoKICAgIC8qKgogICAgICog\nRGVmYXVsdCBkaXNjcmltaW5hdG9yIHN0cmF0ZWd5IGFsaWFzLgogICAgICov\nCiAgICBwdWJsaWMgU3RyaW5nIGdldERpc2NyaW1pbmF0b3JTdHJhdGVneSgp\nIHsKICAgICAgICByZXR1cm4gX2Rpc2NTdHJhdGVneTsKICAgIH0KCiAgICAv\nKioKICAgICAqIERlZmF1bHQgZGlzY3JpbWluYXRvciBzdHJhdGVneSBhbGlh\ncy4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0RGlzY3JpbWluYXRvclN0\ncmF0ZWd5KFN0cmluZyBkaXNjU3RyYXRlZ3kpIHsKICAgICAgICBfZGlzY1N0\ncmF0ZWd5ID0gZGlzY1N0cmF0ZWd5OwogICAgfQoKICAgIC8qKgogICAgICog\nUHJvcGVydHkgc3RyaW5nIG1hcHBpbmcgZmllbGQgdHlwZSBuYW1lcyB0byB2\nYWx1ZSBoYW5kbGVyIG9yIGZpZWxkCiAgICAgKiBtYXBwaW5nIGNsYXNzIG5h\nbWVzLiBGb3IgYXV0by1jb25maWd1cmF0aW9uLgogICAgICovCiAgICBwdWJs\naWMgdm9pZCBzZXRGaWVsZFN0cmF0ZWdpZXMoU3RyaW5nIGZpZWxkTWFwU3Ry\naW5nKSB7CiAgICAgICAgUHJvcGVydGllcyBwcm9wcyA9IENvbmZpZ3VyYXRp\nb25zLnBhcnNlUHJvcGVydGllcyhmaWVsZE1hcFN0cmluZyk7CiAgICAgICAg\naWYgKHByb3BzICE9IG51bGwpCiAgICAgICAgICAgIF9maWVsZE1hcC5wdXRB\nbGwocHJvcHMpOwogICAgfQoKICAgIC8qKgogICAgICogQXNzb2NpYXRpb24g\nb2YgYSBmaWVsZCB2YWx1ZSB0eXBlIG5hbWUgd2l0aCB0aGUgaGFuZGxlciBv\nciBzdHJhdGVneQogICAgICogY2xhc3MgbmFtZS4KICAgICAqLwogICAgcHVi\nbGljIHZvaWQgc2V0RmllbGRTdHJhdGVneShTdHJpbmcgdmFsdWVUeXBlLCBT\ndHJpbmcgaGFuZGxlclR5cGUpIHsKICAgICAgICBpZiAoaGFuZGxlclR5cGUg\nPT0gbnVsbCkKICAgICAgICAgICAgX2ZpZWxkTWFwLnJlbW92ZSh2YWx1ZVR5\ncGUpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgX2ZpZWxkTWFwLnB1dCh2\nYWx1ZVR5cGUsIGhhbmRsZXJUeXBlKTsKICAgIH0KCiAgICAvKioKICAgICAq\nIEFzc29jaWF0aW9uIG9mIGEgZmllbGQgdmFsdWUgdHlwZSBuYW1lIHdpdGgg\ndGhlIGhhbmRsZXIgb3Igc3RyYXRlZ3kKICAgICAqIGNsYXNzIG5hbWUuCiAg\nICAgKi8KICAgIHB1YmxpYyBTdHJpbmcgZ2V0RmllbGRTdHJhdGVneShTdHJp\nbmcgdmFsdWVUeXBlKSB7CiAgICAgICAgcmV0dXJuIChTdHJpbmcpIF9maWVs\nZE1hcC5nZXQodmFsdWVUeXBlKTsKICAgIH0KCiAgICAvKioKICAgICAqIFdo\nZXRoZXIgdG8gc3RvcmUgZW51bXMgYXMgdGhlIG9yZGluYWwgdmFsdWUgcmF0\naGVyIHRoYW4gdGhlIGVudW0gbmFtZS4KICAgICAqIERlZmF1bHRzIHRvIGZh\nbHNlLgogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBnZXRTdG9yZUVudW1P\ncmRpbmFsKCkgewogICAgICAgIHJldHVybiBfb3JkaW5hbEVudW07CiAgICB9\nCgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRvIHN0b3JlIGVudW1zIGFzIHRo\nZSBvcmRpbmFsIHZhbHVlIHJhdGhlciB0aGFuIHRoZSBlbnVtIG5hbWUuCiAg\nICAgKiBEZWZhdWx0cyB0byBmYWxzZS4KICAgICAqLwogICAgcHVibGljIHZv\naWQgc2V0U3RvcmVFbnVtT3JkaW5hbChib29sZWFuIG9yZGluYWwpIHsKICAg\nICAgICBfb3JkaW5hbEVudW0gPSBvcmRpbmFsOwogICAgfQoKICAgIC8qKgog\nICAgICogV2hldGhlciB0byBzdG9yZSBhIHJlbGF0aW9uIHRvIGFuIHVubWFw\ncGVkIGNsYXNzIGJ5IHN0cmluZ2lmeWluZyB0aGUKICAgICAqIG9pZCBvZiB0\naGUgcmVsYXRlZCBvYmplY3QsIHJhdGhlciB0aGFuIHN0b3JpbmcgcHJpbWFy\neSBrZXkgdmFsdWVzLgogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBnZXRT\ndG9yZVVubWFwcGVkT2JqZWN0SWRTdHJpbmcoKSB7CiAgICAgICAgcmV0dXJu\nIF9zdHJpbmdpZnlVbm1hcHBlZDsKICAgIH0KCiAgICAvKioKICAgICAqIFdo\nZXRoZXIgdG8gc3RvcmUgYSByZWxhdGlvbiB0byBhbiB1bm1hcHBlZCBjbGFz\ncyBieSBzdHJpbmdpZnlpbmcgdGhlCiAgICAgKiBvaWQgb2YgdGhlIHJlbGF0\nZWQgb2JqZWN0LCByYXRoZXIgdGhhbiBzdG9yaW5nIHByaW1hcnkga2V5IHZh\nbHVlcy4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0U3RvcmVVbm1hcHBl\nZE9iamVjdElkU3RyaW5nKGJvb2xlYW4gc3RyaW5naWZ5KSB7CiAgICAgICAg\nX3N0cmluZ2lmeVVubWFwcGVkID0gc3RyaW5naWZ5OwogICAgfQoKICAgIC8q\nKgogICAgICogRGVmYXVsdCBmb3JlaWduIGtleSBhY3Rpb24gZm9yIGpvaW4g\na2V5cy4gRGVmYXVsdHMgdG8gbG9naWNhbCBrZXlzLgogICAgICovCiAgICBw\ndWJsaWMgaW50IGdldEpvaW5Gb3JlaWduS2V5RGVsZXRlQWN0aW9uKCkgewog\nICAgICAgIHJldHVybiBfam9pbkZLQWN0aW9uOwogICAgfQoKICAgIC8qKgog\nICAgICogRGVmYXVsdCBmb3JlaWduIGtleSBhY3Rpb24gZm9yIGpvaW4ga2V5\ncy4gRGVmYXVsdHMgdG8gbG9naWNhbCBrZXlzLgogICAgICovCiAgICBwdWJs\naWMgdm9pZCBzZXRKb2luRm9yZWlnbktleURlbGV0ZUFjdGlvbihpbnQgam9p\nbkZLQWN0aW9uKSB7CiAgICAgICAgX2pvaW5GS0FjdGlvbiA9IGpvaW5GS0Fj\ndGlvbjsKICAgIH0KCiAgICAvKioKICAgICAqIERlZmF1bHQgZm9yZWlnbiBr\nZXkgYWN0aW9uIG5hbWUgZm9yIGpvaW4ga2V5cy4gVXNlZCBpbiBhdXRvCiAg\nICAgKiBjb25maWd1cmF0aW9uLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBz\nZXRKb2luRm9yZWlnbktleURlbGV0ZUFjdGlvbihTdHJpbmcgam9pbkZLQWN0\naW9uKSB7CiAgICAgICAgX2pvaW5GS0FjdGlvbiA9IEZvcmVpZ25LZXkuZ2V0\nQWN0aW9uKGpvaW5GS0FjdGlvbik7CiAgICB9CgogICAgLyoqCiAgICAgKiBE\nZWZhdWx0IGZvcmVpZ24ga2V5IGFjdGlvbiBmb3IgcmVsYXRpb24ga2V5cy4g\nRGVmYXVsdHMgdG8gbG9naWNhbCBrZXlzLgogICAgICovCiAgICBwdWJsaWMg\naW50IGdldEZvcmVpZ25LZXlEZWxldGVBY3Rpb24oKSB7CiAgICAgICAgcmV0\ndXJuIF9ma0FjdGlvbjsKICAgIH0KCiAgICAvKioKICAgICAqIERlZmF1bHQg\nZm9yZWlnbiBrZXkgYWN0aW9uIGZvciByZWxhdGlvbiBrZXlzLiBEZWZhdWx0\ncyB0byBsb2dpY2FsIGtleXMuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNl\ndEZvcmVpZ25LZXlEZWxldGVBY3Rpb24oaW50IGZrQWN0aW9uKSB7CiAgICAg\nICAgX2ZrQWN0aW9uID0gZmtBY3Rpb247CiAgICB9CgogICAgLyoqCiAgICAg\nKiBEZWZhdWx0IGZvcmVpZ24ga2V5IGFjdGlvbiBuYW1lIGZvciByZWxhdGlv\nbiBrZXlzLiBVc2VkIGluIGF1dG8KICAgICAqIGNvbmZpZ3VyYXRpb24uCiAg\nICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldEZvcmVpZ25LZXlEZWxldGVBY3Rp\nb24oU3RyaW5nIGZrQWN0aW9uKSB7CiAgICAgICAgX2ZrQWN0aW9uID0gRm9y\nZWlnbktleS5nZXRBY3Rpb24oZmtBY3Rpb24pOwogICAgfQoKICAgIC8qKgog\nICAgICogV2hldGhlciB0byBpbmRleCBsb2dpY2FsIGZvcmVpZ24ga2V5cyBi\neSBkZWZhdWx0LiBEZWZhdWx0cyB0byB0cnVlLgogICAgICovCiAgICBwdWJs\naWMgYm9vbGVhbiBnZXRJbmRleExvZ2ljYWxGb3JlaWduS2V5cygpIHsKICAg\nICAgICByZXR1cm4gX2luZGV4Rks7CiAgICB9CgogICAgLyoqCiAgICAgKiBX\naGV0aGVyIHRvIGluZGV4IGxvZ2ljYWwgZm9yZWlnbiBrZXlzIGJ5IGRlZmF1\nbHQuIERlZmF1bHRzIHRvIHRydWUuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lk\nIHNldEluZGV4TG9naWNhbEZvcmVpZ25LZXlzKGJvb2xlYW4gaW5kZXhGSykg\newogICAgICAgIF9pbmRleEZLID0gaW5kZXhGSzsKICAgIH0KCiAgICAvKioK\nICAgICAqIFdoZXRoZXIgdG8gaW5kZXggZGlzY3JpbWluYXRvciBjb2x1bW5z\nIGJ5IGRlZmF1bHQuIERlZmF1bHRzIHRvIHRydWUuCiAgICAgKi8KICAgIHB1\nYmxpYyBib29sZWFuIGdldEluZGV4RGlzY3JpbWluYXRvcigpIHsKICAgICAg\nICByZXR1cm4gX2luZGV4RGlzYzsKICAgIH0KCiAgICAvKioKICAgICAqIFdo\nZXRoZXIgdG8gaW5kZXggZGlzY3JpbWluYXRvciBjb2x1bW5zIGJ5IGRlZmF1\nbHQuIERlZmF1bHRzIHRvIHRydWUuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lk\nIHNldEluZGV4RGlzY3JpbWluYXRvcihib29sZWFuIGluZGV4RGlzYykgewog\nICAgICAgIF9pbmRleERpc2MgPSBpbmRleERpc2M7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBXaGV0aGVyIHRvIGluZGV4IHZlcnNpb24gY29sdW1ucyBieSBk\nZWZhdWx0LiBEZWZhdWx0cyB0byB0cnVlLgogICAgICovCiAgICBwdWJsaWMg\nYm9vbGVhbiBnZXRJbmRleFZlcnNpb24oKSB7CiAgICAgICAgcmV0dXJuIF9p\nbmRleFZlcnM7CiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRvIGlu\nZGV4IHZlcnNpb24gY29sdW1ucyBieSBkZWZhdWx0LiBEZWZhdWx0cyB0byB0\ncnVlLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRJbmRleFZlcnNpb24o\nYm9vbGVhbiBpbmRleFZlcnMpIHsKICAgICAgICBfaW5kZXhWZXJzID0gaW5k\nZXhWZXJzOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciB0byBvcmRl\nciBsaXN0cyBhbmQgYXJyYXlzIHVzaW5nIGEgZGVkaWNhdGVkIG9yZGVyaW5n\nIGNvbHVtbgogICAgICogYnkgZGVmYXVsdC4KICAgICAqLwogICAgcHVibGlj\nIGJvb2xlYW4gZ2V0T3JkZXJMaXN0cygpIHsKICAgICAgICByZXR1cm4gX29y\nZGVyTGlzdHM7CiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRvIG9y\nZGVyIGxpc3RzIGFuZCBhcnJheXMgdXNpbmcgYSBkZWRpY2F0ZWQgb3JkZXJp\nbmcgY29sdW1uCiAgICAgKiBieSBkZWZhdWx0LgogICAgICovCiAgICBwdWJs\naWMgdm9pZCBzZXRPcmRlckxpc3RzKGJvb2xlYW4gb3JkZXJMaXN0cykgewog\nICAgICAgIF9vcmRlckxpc3RzID0gb3JkZXJMaXN0czsKICAgIH0KCiAgICAv\nKioKICAgICAqIFdoZXRoZXIgdG8gYWRkIGEgc3ludGhldGljIG51bGwgaW5k\naWNhdG9yIGNvbHVtbiB0byBlbWJlZGRlZCBtYXBwaW5ncwogICAgICogYnkg\nZGVmYXVsdC4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gZ2V0QWRkTnVs\nbEluZGljYXRvcigpIHsKICAgICAgICByZXR1cm4gX2FkZE51bGxJbmQ7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRvIGFkZCBhIHN5bnRoZXRp\nYyBudWxsIGluZGljYXRvciBjb2x1bW4gdG8gZW1iZWRkZWQgbWFwcGluZ3MK\nICAgICAqIGJ5IGRlZmF1bHQuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNl\ndEFkZE51bGxJbmRpY2F0b3IoYm9vbGVhbiBhZGROdWxsSW5kKSB7CiAgICAg\nICAgX2FkZE51bGxJbmQgPSBhZGROdWxsSW5kOwogICAgfQoKICAgIC8qKgog\nICAgICogV2hldGhlciB0byBkZWZlciBjb25zdHJhaW50cyBieSBkZWZhdWx0\nLiBEZWZhdWx0cyB0byBmYWxzZS4KICAgICAqLwogICAgcHVibGljIGJvb2xl\nYW4gZ2V0RGVmZXJDb25zdHJhaW50cygpIHsKICAgICAgICByZXR1cm4gX2Rl\nZmVyOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciB0byBkZWZlciBj\nb25zdHJhaW50cyBieSBkZWZhdWx0LiBEZWZhdWx0cyB0byBmYWxzZS4KICAg\nICAqLwogICAgcHVibGljIHZvaWQgc2V0RGVmZXJDb25zdHJhaW50cyhib29s\nZWFuIGRlZmVyKSB7CiAgICAgICAgX2RlZmVyID0gZGVmZXI7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBEZWZhdWx0IGJhc2UgbmFtZSBmb3IgZGF0YXN0b3Jl\nIGlkZW50aXR5IGNvbHVtbnMsIG9yIG51bGwgdG8gdGhlCiAgICAgKiBtYXBw\naW5nJ3MgYnVpbHQtaW4gbmFtZS4KICAgICAqLwogICAgcHVibGljIFN0cmlu\nZyBnZXREYXRhU3RvcmVJZENvbHVtbk5hbWUoKSB7CiAgICAgICAgcmV0dXJu\nIF9kc0lkTmFtZTsKICAgIH0KCiAgICAvKioKICAgICAqIERlZmF1bHQgYmFz\nZSBuYW1lIGZvciBkYXRhc3RvcmUgaWRlbnRpdHkgY29sdW1ucywgb3IgbnVs\nbCB0byB0aGUKICAgICAqIG1hcHBpbmcncyBidWlsdC1pbiBuYW1lLgogICAg\nICovCiAgICBwdWJsaWMgdm9pZCBzZXREYXRhU3RvcmVJZENvbHVtbk5hbWUo\nU3RyaW5nIGRzSWROYW1lKSB7CiAgICAgICAgX2RzSWROYW1lID0gZHNJZE5h\nbWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBEZWZhdWx0IGJhc2UgbmFtZSBm\nb3IgdmVyc2lvbiBpZGVudGl0eSBjb2x1bW5zLCBvciBudWxsIHRvIHRoZSBt\nYXBwaW5nJ3MKICAgICAqIGJ1aWx0LWluIG5hbWUuCiAgICAgKi8KICAgIHB1\nYmxpYyBTdHJpbmcgZ2V0VmVyc2lvbkNvbHVtbk5hbWUoKSB7CiAgICAgICAg\ncmV0dXJuIF92ZXJzTmFtZTsKICAgIH0KCiAgICAvKioKICAgICAqIERlZmF1\nbHQgYmFzZSBuYW1lIGZvciB2ZXJzaW9uIGlkZW50aXR5IGNvbHVtbnMsIG9y\nIG51bGwgdG8gdGhlIG1hcHBpbmcncwogICAgICogYnVpbHQtaW4gbmFtZS4K\nICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0VmVyc2lvbkNvbHVtbk5hbWUo\nU3RyaW5nIHZlcnNOYW1lKSB7CiAgICAgICAgX3ZlcnNOYW1lID0gdmVyc05h\nbWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBEZWZhdWx0IGJhc2UgbmFtZSBm\nb3IgZGlzY3JpbWluYXRvciBjb2x1bW5zLCBvciBudWxsIHRvIHRoZSBtYXBw\naW5nJ3MKICAgICAqIGJ1aWx0LWluIG5hbWUuCiAgICAgKi8KICAgIHB1Ymxp\nYyBTdHJpbmcgZ2V0RGlzY3JpbWluYXRvckNvbHVtbk5hbWUoKSB7CiAgICAg\nICAgcmV0dXJuIF9kaXNjTmFtZTsKICAgIH0KCiAgICAvKioKICAgICAqIERl\nZmF1bHQgYmFzZSBuYW1lIGZvciBkaXNjcmltaW5hdG9yIGNvbHVtbnMsIG9y\nIG51bGwgdG8gdGhlIG1hcHBpbmcncwogICAgICogYnVpbHQtaW4gbmFtZS4K\nICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0RGlzY3JpbWluYXRvckNvbHVt\nbk5hbWUoU3RyaW5nIGRpc2NOYW1lKSB7CiAgICAgICAgX2Rpc2NOYW1lID0g\nZGlzY05hbWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBEZWZhdWx0IGJhc2Ug\nbmFtZSBmb3Igb3JkZXIgY29sdW1ucywgb3IgbnVsbCB0byB0aGUgbWFwcGlu\nZydzCiAgICAgKiBidWlsdC1pbiBuYW1lLgogICAgICovCiAgICBwdWJsaWMg\nU3RyaW5nIGdldE9yZGVyQ29sdW1uTmFtZSgpIHsKICAgICAgICByZXR1cm4g\nX29yZGVyTmFtZTsKICAgIH0KCiAgICAvKioKICAgICAqIERlZmF1bHQgYmFz\nZSBuYW1lIGZvciBvcmRlciBjb2x1bW5zLCBvciBudWxsIHRvIHRoZSBtYXBw\naW5nJ3MKICAgICAqIGJ1aWx0LWluIG5hbWUuCiAgICAgKi8KICAgIHB1Ymxp\nYyB2b2lkIHNldE9yZGVyQ29sdW1uTmFtZShTdHJpbmcgb3JkZXJOYW1lKSB7\nCiAgICAgICAgX29yZGVyTmFtZSA9IG9yZGVyTmFtZTsKICAgIH0KCiAgICAv\nKioKICAgICAqIERlZmF1bHQgYmFzZSBuYW1lIGZvciBudWxsIGluZGljYXRv\nciBjb2x1bW5zLCBvciBudWxsIHRvIHRoZSBtYXBwaW5nJ3MKICAgICAqIGJ1\naWx0LWluIG5hbWUuCiAgICAgKi8KICAgIHB1YmxpYyBTdHJpbmcgZ2V0TnVs\nbEluZGljYXRvckNvbHVtbk5hbWUoKSB7CiAgICAgICAgcmV0dXJuIF9udWxs\nSW5kTmFtZTsKICAgIH0KCiAgICAvKioKICAgICAqIERlZmF1bHQgYmFzZSBu\nYW1lIGZvciBudWxsIGluZGljYXRvciBjb2x1bW5zLCBvciBudWxsIHRvIHRo\nZSBtYXBwaW5nJ3MKICAgICAqIGJ1aWx0LWluIG5hbWUuCiAgICAgKi8KICAg\nIHB1YmxpYyB2b2lkIHNldE51bGxJbmRpY2F0b3JDb2x1bW5OYW1lKFN0cmlu\nZyBudWxsSW5kTmFtZSkgewogICAgICAgIF9udWxsSW5kTmFtZSA9IG51bGxJ\nbmROYW1lOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGRlZmF1bHRNaXNz\naW5nSW5mbygpIHsKICAgICAgICByZXR1cm4gX2RlZk1pc3Npbmc7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgc2V0RGVmYXVsdE1pc3NpbmdJbmZvKGJvb2xl\nYW4gZGVmTWlzc2luZykgewogICAgICAgIF9kZWZNaXNzaW5nID0gZGVmTWlz\nc2luZzsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiB1c2VDbGFzc0NyaXRl\ncmlhKCkgewogICAgICAgIHJldHVybiBfY2xhc3NDcml0ZXJpYTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBzZXRVc2VDbGFzc0NyaXRlcmlhKGJvb2xlYW4g\nY2xhc3NDcml0ZXJpYSkgewogICAgICAgIF9jbGFzc0NyaXRlcmlhID0gY2xh\nc3NDcml0ZXJpYTsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IGdldFN0cmF0\nZWd5KENsYXNzTWFwcGluZyBjbHMsIGJvb2xlYW4gYWRhcHQpIHsKICAgICAg\nICBpZiAoYWRhcHQgfHwgZGVmYXVsdE1pc3NpbmdJbmZvKCkpCiAgICAgICAg\nICAgIHJldHVybiAoY2xzLmdldE1hcHBlZFBDU3VwZXJjbGFzc01hcHBpbmco\nKSA9PSBudWxsKQogICAgICAgICAgICAgICAgPyBfYmFzZUNsYXNzU3RyYXRl\nZ3kgOiBfc3ViY2xhc3NTdHJhdGVneTsKICAgICAgICByZXR1cm4gbnVsbDsK\nICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IGdldFN0cmF0ZWd5KFZlcnNpb24g\ndmVycywgYm9vbGVhbiBhZGFwdCkgewogICAgICAgIENsYXNzTWFwcGluZyBj\nbHMgPSB2ZXJzLmdldENsYXNzTWFwcGluZygpOwogICAgICAgIGlmICgoYWRh\ncHQgfHwgZGVmYXVsdE1pc3NpbmdJbmZvKCkpCiAgICAgICAgICAgICYmIGNs\ncy5nZXRKb2luYWJsZVBDU3VwZXJjbGFzc01hcHBpbmcoKSA9PSBudWxsCiAg\nICAgICAgICAgICYmIGNscy5nZXRWZXJzaW9uRmllbGQoKSA9PSBudWxsKQog\nICAgICAgICAgICByZXR1cm4gX3ZlcnNpb25TdHJhdGVneTsKICAgICAgICBy\nZXR1cm4gbnVsbDsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IGdldFN0cmF0\nZWd5KERpc2NyaW1pbmF0b3IgZGlzYywgYm9vbGVhbiBhZGFwdCkgewogICAg\nICAgIENsYXNzTWFwcGluZyBjbHMgPSBkaXNjLmdldENsYXNzTWFwcGluZygp\nOwogICAgICAgIGlmICgoYWRhcHQgfHwgZGVmYXVsdE1pc3NpbmdJbmZvKCkp\nCiAgICAgICAgICAgICYmIGNscy5nZXRKb2luYWJsZVBDU3VwZXJjbGFzc01h\ncHBpbmcoKSA9PSBudWxsCiAgICAgICAgICAgICYmIGRpc2MuZ2V0TWFwcGlu\nZ0luZm8oKS5nZXRWYWx1ZSgpID09IG51bGwpCiAgICAgICAgICAgIHJldHVy\nbiBfZGlzY1N0cmF0ZWd5OwogICAgICAgIHJldHVybiBudWxsOwogICAgfQoK\nICAgIHB1YmxpYyBPYmplY3QgZ2V0U3RyYXRlZ3koVmFsdWVNYXBwaW5nIHZt\nLCBDbGFzcyB0eXBlLCBib29sZWFuIGFkYXB0KSB7CiAgICAgICAgT2JqZWN0\nIHJldCA9IF9maWVsZE1hcC5nZXQodHlwZS5nZXROYW1lKCkpOwogICAgICAg\nIGlmIChyZXQgIT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIHJldDsKICAg\nICAgICBpZiAoX3N0cmluZ2lmeVVubWFwcGVkICYmIHZtLmdldFR5cGVNYXBw\naW5nKCkgIT0gbnVsbAogICAgICAgICAgICAmJiAhdm0uZ2V0VHlwZU1hcHBp\nbmcoKS5pc01hcHBlZCgpKQogICAgICAgICAgICByZXR1cm4gVW50eXBlZFBD\nVmFsdWVIYW5kbGVyLmdldEluc3RhbmNlKCk7CiAgICAgICAgaWYgKF9vcmRp\nbmFsRW51bSAmJiAhdm0uaXNTZXJpYWxpemVkKCkKICAgICAgICAgICAgJiYg\nSmF2YVZlcnNpb25zLmlzRW51bWVyYXRpb24odHlwZSkpCiAgICAgICAgICAg\nIHJldHVybiAib3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5zdHJhdHMu\nRW51bVZhbHVlSGFuZGxlciIKICAgICAgICAgICAgICAgICsgIihTdG9yZU9y\nZGluYWw9dHJ1ZSkiOwogICAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAg\nIHB1YmxpYyBPYmplY3QgZ2V0RGlzY3JpbWluYXRvclZhbHVlKERpc2NyaW1p\nbmF0b3IgZGlzYywgYm9vbGVhbiBhZGFwdCkgewogICAgICAgIGlmICghYWRh\ncHQgJiYgIWRlZmF1bHRNaXNzaW5nSW5mbygpKQogICAgICAgICAgICByZXR1\ncm4gbnVsbDsKCiAgICAgICAgLy8gV0FSTklORzogQ0hBTkdJTkcgVEhJUyBX\nSUxMIElOVkFMSURBVEUgRVhJU1RJTkcgREFUQSBJRiBERUZBVUxUSU5HCiAg\nICAgICAgLy8gTUlTU0lORyBNQVBQSU5HIElORk8KICAgICAgICByZXR1cm4g\nU3RyaW5ncy5nZXRDbGFzc05hbWUoZGlzYy5nZXRDbGFzc01hcHBpbmcoKS4K\nICAgICAgICAgICAgZ2V0RGVzY3JpYmVkVHlwZSgpKTsKICAgIH0KCiAgICBw\ndWJsaWMgU3RyaW5nIGdldFRhYmxlTmFtZShDbGFzc01hcHBpbmcgY2xzLCBT\nY2hlbWEgc2NoZW1hKSB7CiAgICAgICAgU3RyaW5nIG5hbWUgPSBTdHJpbmdz\nLmdldENsYXNzTmFtZShjbHMuZ2V0RGVzY3JpYmVkVHlwZSgpKS4KICAgICAg\nICAgICAgcmVwbGFjZSgnJCcsICdfJyk7CiAgICAgICAgaWYgKCFfZGVmTWlz\nc2luZykKICAgICAgICAgICAgbmFtZSA9IGRpY3QuZ2V0VmFsaWRUYWJsZU5h\nbWUobmFtZSwgc2NoZW1hKTsKICAgICAgICByZXR1cm4gbmFtZTsKICAgIH0K\nCiAgICBwdWJsaWMgU3RyaW5nIGdldFRhYmxlTmFtZShGaWVsZE1hcHBpbmcg\nZm0sIFNjaGVtYSBzY2hlbWEpIHsKICAgICAgICBTdHJpbmcgbmFtZSA9IGZt\nLmdldE5hbWUoKTsKICAgICAgICBUYWJsZSB0YWJsZSA9IGZtLmdldERlZmlu\naW5nTWFwcGluZygpLmdldFRhYmxlKCk7CiAgICAgICAgaWYgKHRhYmxlICE9\nIG51bGwpIHsKICAgICAgICAgICAgU3RyaW5nIHRhYmxlTmFtZSA9IHRhYmxl\nLmdldE5hbWUoKTsKICAgICAgICAgICAgaWYgKHRhYmxlTmFtZS5sZW5ndGgo\nKSA+IDUpCiAgICAgICAgICAgICAgICB0YWJsZU5hbWUgPSB0YWJsZU5hbWUu\nc3Vic3RyaW5nKDAsIDUpOwogICAgICAgICAgICBuYW1lID0gdGFibGVOYW1l\nICsgIl8iICsgbmFtZTsKICAgICAgICB9CiAgICAgICAgaWYgKCFfZGVmTWlz\nc2luZykKICAgICAgICAgICAgbmFtZSA9IGRpY3QuZ2V0VmFsaWRUYWJsZU5h\nbWUobmFtZSwgc2NoZW1hKTsKICAgICAgICByZXR1cm4gbmFtZTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBwb3B1bGF0ZURhdGFTdG9yZUlkQ29sdW1ucyhD\nbGFzc01hcHBpbmcgY2xzLCBUYWJsZSB0YWJsZSwKICAgICAgICBDb2x1bW5b\nXSBjb2xzKSB7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb2xzLmxl\nbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChfZHNJZE5hbWUgIT0gbnVs\nbCAmJiBjb2xzLmxlbmd0aCA9PSAxKQogICAgICAgICAgICAgICAgY29sc1tp\nXS5zZXROYW1lKF9kc0lkTmFtZSk7CiAgICAgICAgICAgIGVsc2UgaWYgKF9k\nc0lkTmFtZSAhPSBudWxsKQogICAgICAgICAgICAgICAgY29sc1tpXS5zZXRO\nYW1lKF9kc0lkTmFtZSArIGkpOwogICAgICAgICAgICBjb3JyZWN0TmFtZSh0\nYWJsZSwgY29sc1tpXSk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAg\nICogQ29ycmVjdCB0aGUgZ2l2ZW4gY29sdW1uJ3MgbmFtZS4KICAgICAqLwog\nICAgcHJvdGVjdGVkIHZvaWQgY29ycmVjdE5hbWUoVGFibGUgdGFibGUsIENv\nbHVtbiBjb2wpIHsKICAgICAgICBpZiAoIV9kZWZNaXNzaW5nKQogICAgICAg\nICAgICBjb2wuc2V0TmFtZShkaWN0LmdldFZhbGlkQ29sdW1uTmFtZShjb2wu\nZ2V0TmFtZSgpLCB0YWJsZSkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHBv\ncHVsYXRlQ29sdW1ucyhWZXJzaW9uIHZlcnMsIFRhYmxlIHRhYmxlLCBDb2x1\nbW5bXSBjb2xzKSB7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb2xz\nLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChfdmVyc05hbWUgIT0g\nbnVsbCAmJiBjb2xzLmxlbmd0aCA9PSAxKQogICAgICAgICAgICAgICAgY29s\nc1tpXS5zZXROYW1lKF92ZXJzTmFtZSk7CiAgICAgICAgICAgIGVsc2UgaWYg\nKF92ZXJzTmFtZSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBpZiAoaSA9\nPSAwKQogICAgICAgICAgICAgICAgICAgIGNvbHNbaV0uc2V0TmFtZShfdmVy\nc05hbWUpOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAg\nICAgIGNvbHNbaV0uc2V0TmFtZShfdmVyc05hbWUgKyAiXyIgKyBpKTsKICAg\nICAgICAgICAgfSBlbHNlIGlmIChfdmVyc05hbWUgIT0gbnVsbCkKICAgICAg\nICAgICAgICAgIGNvbHNbaV0uc2V0TmFtZShfdmVyc05hbWUgKyBpKTsKICAg\nICAgICAgICAgY29ycmVjdE5hbWUodGFibGUsIGNvbHNbaV0pOwogICAgICAg\nIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCBwb3B1bGF0ZUNvbHVtbnMoRGlz\nY3JpbWluYXRvciBkaXNjLCBUYWJsZSB0YWJsZSwKICAgICAgICBDb2x1bW5b\nXSBjb2xzKSB7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb2xzLmxl\nbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChfZGlzY05hbWUgIT0gbnVs\nbCAmJiBjb2xzLmxlbmd0aCA9PSAxKQogICAgICAgICAgICAgICAgY29sc1tp\nXS5zZXROYW1lKF9kaXNjTmFtZSk7CiAgICAgICAgICAgIGVsc2UgaWYgKF9k\naXNjTmFtZSAhPSBudWxsKQogICAgICAgICAgICAgICAgY29sc1tpXS5zZXRO\nYW1lKF9kaXNjTmFtZSArIGkpOwogICAgICAgICAgICBjb3JyZWN0TmFtZSh0\nYWJsZSwgY29sc1tpXSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHBvcHVsYXRlSm9pbkNvbHVtbihDbGFzc01hcHBpbmcgY20sIFRhYmxl\nIGxvY2FsLCBUYWJsZSBmb3JlaWduLAogICAgICAgIENvbHVtbiBjb2wsIE9i\namVjdCB0YXJnZXQsIGludCBwb3MsIGludCBjb2xzKSB7CiAgICAgICAgY29y\ncmVjdE5hbWUobG9jYWwsIGNvbCk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\ncG9wdWxhdGVKb2luQ29sdW1uKEZpZWxkTWFwcGluZyBmbSwgVGFibGUgbG9j\nYWwsIFRhYmxlIGZvcmVpZ24sCiAgICAgICAgQ29sdW1uIGNvbCwgT2JqZWN0\nIHRhcmdldCwgaW50IHBvcywgaW50IGNvbHMpIHsKICAgICAgICBjb3JyZWN0\nTmFtZShsb2NhbCwgY29sKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBwb3B1\nbGF0ZUZvcmVpZ25LZXlDb2x1bW4oVmFsdWVNYXBwaW5nIHZtLCBTdHJpbmcg\nbmFtZSwKICAgICAgICBUYWJsZSBsb2NhbCwgVGFibGUgZm9yZWlnbiwgQ29s\ndW1uIGNvbCwgT2JqZWN0IHRhcmdldCwgYm9vbGVhbiBpbnZlcnNlLAogICAg\nICAgIGludCBwb3MsIGludCBjb2xzKSB7CiAgICAgICAgaWYgKGNvbHMgPT0g\nMSkKICAgICAgICAgICAgY29sLnNldE5hbWUobmFtZSk7CiAgICAgICAgZWxz\nZSBpZiAodGFyZ2V0IGluc3RhbmNlb2YgQ29sdW1uKQogICAgICAgICAgICBj\nb2wuc2V0TmFtZShuYW1lICsgIl8iICsgKChDb2x1bW4pIHRhcmdldCkuZ2V0\nTmFtZSgpKTsKICAgICAgICBjb3JyZWN0TmFtZShsb2NhbCwgY29sKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBwb3B1bGF0ZUNvbHVtbnMoVmFsdWVNYXBw\naW5nIHZtLCBTdHJpbmcgbmFtZSwgVGFibGUgdGFibGUsCiAgICAgICAgQ29s\ndW1uW10gY29scykgewogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgY29s\ncy5sZW5ndGg7IGkrKykKICAgICAgICAgICAgY29ycmVjdE5hbWUodGFibGUs\nIGNvbHNbaV0pOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIHBvcHVsYXRl\nT3JkZXJDb2x1bW5zKEZpZWxkTWFwcGluZyBmbSwgVGFibGUgdGFibGUsCiAg\nICAgICAgQ29sdW1uW10gY29scykgewogICAgICAgIGZvciAoaW50IGkgPSAw\nOyBpIDwgY29scy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAoX29y\nZGVyTmFtZSAhPSBudWxsICYmIGNvbHMubGVuZ3RoID09IDEpCiAgICAgICAg\nICAgICAgICBjb2xzW2ldLnNldE5hbWUoX29yZGVyTmFtZSk7CiAgICAgICAg\nICAgIGVsc2UgaWYgKF9vcmRlck5hbWUgIT0gbnVsbCkKICAgICAgICAgICAg\nICAgIGNvbHNbaV0uc2V0TmFtZShfb3JkZXJOYW1lICsgaSk7CiAgICAgICAg\nICAgIGNvcnJlY3ROYW1lKHRhYmxlLCBjb2xzW2ldKTsKICAgICAgICB9CiAg\nICAgICAgcmV0dXJuIF9vcmRlckxpc3RzICYmIChKYXZhVHlwZXMuQVJSQVkg\nPT0gZm0uZ2V0VHlwZUNvZGUoKQogICAgICAgICAgICB8fCBMaXN0LmNsYXNz\nLmlzQXNzaWduYWJsZUZyb20oZm0uZ2V0VHlwZSgpKSk7CiAgICB9CgogICAg\ncHVibGljIGJvb2xlYW4gcG9wdWxhdGVOdWxsSW5kaWNhdG9yQ29sdW1ucyhW\nYWx1ZU1hcHBpbmcgdm0sIFN0cmluZyBuYW1lLAogICAgICAgIFRhYmxlIHRh\nYmxlLCBDb2x1bW5bXSBjb2xzKSB7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7\nIGkgPCBjb2xzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChfbnVs\nbEluZE5hbWUgIT0gbnVsbCAmJiBjb2xzLmxlbmd0aCA9PSAxKQogICAgICAg\nICAgICAgICAgY29sc1tpXS5zZXROYW1lKF9udWxsSW5kTmFtZSk7CiAgICAg\nICAgICAgIGVsc2UgaWYgKF9udWxsSW5kTmFtZSAhPSBudWxsKQogICAgICAg\nICAgICAgICAgY29sc1tpXS5zZXROYW1lKF9udWxsSW5kTmFtZSArIGkpOwog\nICAgICAgICAgICBjb3JyZWN0TmFtZSh0YWJsZSwgY29sc1tpXSk7CiAgICAg\nICAgfQogICAgICAgIHJldHVybiBfYWRkTnVsbEluZDsKICAgIH0KCiAgICBw\ndWJsaWMgRm9yZWlnbktleSBnZXRKb2luRm9yZWlnbktleShDbGFzc01hcHBp\nbmcgY2xzLCBUYWJsZSBsb2NhbCwKICAgICAgICBUYWJsZSBmb3JlaWduKSB7\nCiAgICAgICAgaWYgKF9qb2luRktBY3Rpb24gPT0gRm9yZWlnbktleS5BQ1RJ\nT05fTk9ORSkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgRm9y\nZWlnbktleSBmayA9IG5ldyBGb3JlaWduS2V5KCk7CiAgICAgICAgZmsuc2V0\nRGVsZXRlQWN0aW9uKF9qb2luRktBY3Rpb24pOwogICAgICAgIGZrLnNldERl\nZmVycmVkKF9kZWZlcik7CiAgICAgICAgcmV0dXJuIGZrOwogICAgfQoKICAg\nIHB1YmxpYyBGb3JlaWduS2V5IGdldEpvaW5Gb3JlaWduS2V5KEZpZWxkTWFw\ncGluZyBmbSwgVGFibGUgbG9jYWwsCiAgICAgICAgVGFibGUgZm9yZWlnbikg\newogICAgICAgIGlmIChfam9pbkZLQWN0aW9uID09IEZvcmVpZ25LZXkuQUNU\nSU9OX05PTkUpCiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIEZv\ncmVpZ25LZXkgZmsgPSBuZXcgRm9yZWlnbktleSgpOwogICAgICAgIGZrLnNl\ndERlbGV0ZUFjdGlvbihfam9pbkZLQWN0aW9uKTsKICAgICAgICBmay5zZXRE\nZWZlcnJlZChfZGVmZXIpOwogICAgICAgIHJldHVybiBmazsKICAgIH0KCiAg\nICBwdWJsaWMgRm9yZWlnbktleSBnZXRGb3JlaWduS2V5KFZhbHVlTWFwcGlu\nZyB2bSwgU3RyaW5nIG5hbWUsIFRhYmxlIGxvY2FsLAogICAgICAgIFRhYmxl\nIGZvcmVpZ24sIGJvb2xlYW4gaW52ZXJzZSkgewogICAgICAgIGlmIChfZmtB\nY3Rpb24gPT0gRm9yZWlnbktleS5BQ1RJT05fTk9ORSkKICAgICAgICAgICAg\ncmV0dXJuIG51bGw7CiAgICAgICAgRm9yZWlnbktleSBmayA9IG5ldyBGb3Jl\naWduS2V5KCk7CiAgICAgICAgZmsuc2V0RGVsZXRlQWN0aW9uKF9ma0FjdGlv\nbik7CiAgICAgICAgZmsuc2V0RGVmZXJyZWQoX2RlZmVyKTsKICAgICAgICBy\nZXR1cm4gZms7CiAgICB9CgogICAgcHVibGljIEluZGV4IGdldEpvaW5JbmRl\neChGaWVsZE1hcHBpbmcgZm0sIFRhYmxlIHRhYmxlLCBDb2x1bW5bXSBjb2xz\nKSB7CiAgICAgICAgaWYgKCFfaW5kZXhGSyB8fCBmbS5nZXRKb2luRm9yZWln\nbktleSgpID09IG51bGwKICAgICAgICAgICAgfHwgIWZtLmdldEpvaW5Gb3Jl\naWduS2V5KCkuaXNMb2dpY2FsKCkpCiAgICAgICAgICAgIHJldHVybiBudWxs\nOwogICAgICAgIGlmIChhcmVBbGxQcmltYXJ5S2V5Q29sdW1ucyhjb2xzKSkK\nICAgICAgICAgICAgcmV0dXJuIG51bGw7CgogICAgICAgIEluZGV4IGlkeCA9\nIG5ldyBJbmRleCgpOwogICAgICAgIGlkeC5zZXROYW1lKGdldEluZGV4TmFt\nZShudWxsLCB0YWJsZSwgY29scykpOwogICAgICAgIHJldHVybiBpZHg7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gd2hldGhlciBhbGwgdGhlIGdp\ndmVuIGNvbHVtbnMgYXJlIHByaW1hcnkga2V5IGNvbHVtbnMuCiAgICAgKi8K\nICAgIHByb3RlY3RlZCBib29sZWFuIGFyZUFsbFByaW1hcnlLZXlDb2x1bW5z\nKENvbHVtbltdIGNvbHMpIHsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8\nIGNvbHMubGVuZ3RoOyBpKyspCiAgICAgICAgICAgIGlmICghY29sc1tpXS5p\nc1ByaW1hcnlLZXkoKSkKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsK\nICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIEdl\nbmVyYXRlIGFuIGluZGV4IG5hbWUuCiAgICAgKi8KICAgIHByb3RlY3RlZCBT\ndHJpbmcgZ2V0SW5kZXhOYW1lKFN0cmluZyBuYW1lLCBUYWJsZSB0YWJsZSwg\nQ29sdW1uW10gY29scykgewogICAgICAgIC8vIGFsd2F5cyB1c2UgZGljdCBm\nb3IgaW5kZXggbmFtZXMgYmVjYXVzZSBubyBzcGVjIG1hbmRhdGVzIHRoZW0K\nICAgICAgICAvLyBiYXNlZCBvbiBkZWZhdWx0cwogICAgICAgIGlmIChuYW1l\nID09IG51bGwpCiAgICAgICAgICAgIG5hbWUgPSBjb2xzWzBdLmdldE5hbWUo\nKTsKICAgICAgICByZXR1cm4gZGljdC5nZXRWYWxpZEluZGV4TmFtZShuYW1l\nLCB0YWJsZSk7CiAgICB9CgogICAgcHVibGljIEluZGV4IGdldEluZGV4KFZh\nbHVlTWFwcGluZyB2bSwgU3RyaW5nIG5hbWUsIFRhYmxlIHRhYmxlLAogICAg\nICAgIENvbHVtbltdIGNvbHMpIHsKICAgICAgICBpZiAoIV9pbmRleEZLIHx8\nIHZtLmdldEZvcmVpZ25LZXkoKSA9PSBudWxsCiAgICAgICAgICAgIHx8ICF2\nbS5nZXRGb3JlaWduS2V5KCkuaXNMb2dpY2FsKCkpCiAgICAgICAgICAgIHJl\ndHVybiBudWxsOwogICAgICAgIGlmIChhcmVBbGxQcmltYXJ5S2V5Q29sdW1u\ncyhjb2xzKSkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CgogICAgICAgIElu\nZGV4IGlkeCA9IG5ldyBJbmRleCgpOwogICAgICAgIGlkeC5zZXROYW1lKGdl\ndEluZGV4TmFtZShuYW1lLCB0YWJsZSwgY29scykpOwogICAgICAgIHJldHVy\nbiBpZHg7CiAgICB9CgogICAgcHVibGljIEluZGV4IGdldEluZGV4KFZlcnNp\nb24gdmVycywgVGFibGUgdGFibGUsIENvbHVtbltdIGNvbHMpIHsKICAgICAg\nICBpZiAoIV9pbmRleFZlcnMpCiAgICAgICAgICAgIHJldHVybiBudWxsOwog\nICAgICAgIEluZGV4IGlkeCA9IG5ldyBJbmRleCgpOwogICAgICAgIGlkeC5z\nZXROYW1lKGdldEluZGV4TmFtZShfdmVyc05hbWUsIHRhYmxlLCBjb2xzKSk7\nCiAgICAgICAgcmV0dXJuIGlkeDsKICAgIH0KCiAgICBwdWJsaWMgSW5kZXgg\nZ2V0SW5kZXgoRGlzY3JpbWluYXRvciBkaXNjLCBUYWJsZSB0YWJsZSwgQ29s\ndW1uW10gY29scykgewogICAgICAgIGlmICghX2luZGV4RGlzYykKICAgICAg\nICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgSW5kZXggaWR4ID0gbmV3IElu\nZGV4KCk7CiAgICAgICAgaWR4LnNldE5hbWUoZ2V0SW5kZXhOYW1lKF9kaXNj\nTmFtZSwgdGFibGUsIGNvbHMpKTsKICAgICAgICByZXR1cm4gaWR4OwogICAg\nfQoKICAgIHB1YmxpYyBVbmlxdWUgZ2V0Sm9pblVuaXF1ZShGaWVsZE1hcHBp\nbmcgZm0sIFRhYmxlIHRhYmxlLCBDb2x1bW5bXSBjb2xzKSB7CiAgICAgICAg\ncmV0dXJuIG51bGw7CiAgICB9CgogICAgcHVibGljIFVuaXF1ZSBnZXRVbmlx\ndWUoVmFsdWVNYXBwaW5nIHZtLCBTdHJpbmcgbmFtZSwgVGFibGUgdGFibGUs\nCiAgICAgICAgQ29sdW1uW10gY29scykgewogICAgICAgIHJldHVybiBudWxs\nOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgZ2V0UHJpbWFyeUtleU5hbWUo\nQ2xhc3NNYXBwaW5nIGNtLCBUYWJsZSB0YWJsZSkgewogICAgICAgIHJldHVy\nbiBudWxsOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGluc3RhbGxQcmltYXJ5\nS2V5KEZpZWxkTWFwcGluZyBmbSwgVGFibGUgdGFibGUpIHsKICAgIH0KCiAg\nICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAvLyBDb25m\naWd1cmFibGUgaW1wbGVtZW50YXRpb24KICAgIC8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8KCiAgICBwdWJsaWMgdm9pZCBzZXRDb25maWd1cmF0\naW9uKENvbmZpZ3VyYXRpb24gY29uZikgewogICAgICAgIGRpY3QgPSAoKEpE\nQkNDb25maWd1cmF0aW9uKSBjb25mKS5nZXREQkRpY3Rpb25hcnlJbnN0YW5j\nZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHN0YXJ0Q29uZmlndXJhdGlv\nbigpIHsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBlbmRDb25maWd1cmF0aW9u\nKCkgewogICAgfQp9Cg==\n","encoding":"base64"}

