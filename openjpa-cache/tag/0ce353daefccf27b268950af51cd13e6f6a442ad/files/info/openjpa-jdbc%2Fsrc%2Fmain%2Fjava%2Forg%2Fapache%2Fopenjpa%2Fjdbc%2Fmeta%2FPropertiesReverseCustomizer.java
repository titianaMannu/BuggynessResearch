{"sha":"eb458896028a0aa4320a01b8ac68127dc6c9cc78","node_id":"MDQ6QmxvYjIwNjM2NDplYjQ1ODg5NjAyOGEwYWE0MzIwYTAxYjhhYzY4MTI3ZGM2YzljYzc4","size":9138,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/eb458896028a0aa4320a01b8ac68127dc6c9cc78","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLm1ldGE7CgppbXBvcnQgamF2YS51dGlsLlByb3BlcnRp\nZXM7CmltcG9ydCBqYXZhLnV0aWwuU2V0OwppbXBvcnQgamF2YS51dGlsLlRy\nZWVTZXQ7CgppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmxhbmcuU3RyaW5n\nVXRpbHM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEu\nQ29sdW1uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1h\nLkZvcmVpZ25LZXk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5z\nY2hlbWEuVGFibGU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0\naWwuTG9jYWxpemVyOwppbXBvcnQgc2VycC51dGlsLlN0cmluZ3M7CgovKioK\nICogU2ltcGxlIHtAbGluayBSZXZlcnNlQ3VzdG9taXplcn0gdGhhdCB1c2Vz\nIGEgcHJvcGVydGllcyBmaWxlIHRvCiAqIHRvIGFsbG93IGN1c3RvbWl6YXRp\nb24gb2YgYmFzaWMgY2xhc3MgYW5kIGZpZWxkIHByb3BlcnRpZXMuIFRoZQog\nKiBjdXN0b21pemVyIHVzZXMgdGhlIGZvbGxvd2luZyBrZXlzOgogKiA8dWw+\nCiAqIDxsaT48aT4mbHQ7dGFibGUgbmFtZSZndDsudGFibGUtdHlwZTwvaT46\nIE92ZXJyaWRlIHRoZSBkZWZhdWx0IHR5cGUgb2YgdGhlCiAqIGdpdmVuIHRh\nYmxlLiBMZWdhbCB2YWx1ZXMgYXJlOiA8Y29kZT5iYXNlLCBzZWNvbmRhcnks\nCiAqIHNlY29uZGFyeS1vdXRlciwgYXNzb2NpYXRpb24sIHN1YmNsYXNzLCBu\nb25lPC9jb2RlPi4gU2VlCiAqIHRoZSBUQUJMRV9YWFggY29uc3RhbnRzIGlu\nIHtAbGluayBSZXZlcnNlTWFwcGluZ1Rvb2x9IGZvciBkZXNjcmlwdGlvbnMu\nPC9saT4KICogPGxpPjxpPiZsdDtjbGFzcyBuYW1lJmd0Oy5yZW5hbWU8L2k+\nOiBPdmVycmlkZSB0aGUgdG9vbC1nZW5lcmF0ZWQgY2xhc3MgbmFtZQogKiB3\naXRoIHRoZSBnaXZlbiB2YWx1ZS4gVXNlIGZ1bGwgY2xhc3MgbmFtZXMsIGlu\nY2x1ZGluZyBwYWNrYWdlLiBVc2UgYQogKiB2YWx1ZSBvZiA8Y29kZT5ub25l\nPC9jb2RlPiB0byByZWplY3QgdGhlIGNsYXNzIGFuZCBsZWF2ZSB0aGUKICog\nY29ycmVzcG9uZGluZyB0YWJsZSB1bm1hcHBlZC48L2xpPgogKiA8bGk+PGk+\nJmx0O3RhYmxlIG5hbWUmZ3Q7LmNsYXNzLW5hbWU8L2k+OiBBc3NpZ24gdGhl\nIGdpdmVuIGZ1bGx5LXF1YWxpZmllZAogKiBjbGFzcyBuYW1lIHRvIHRoZSB0\neXBlIGNyZWF0ZWQgZnJvbSB0aGUgZ2l2ZW4gdGFibGUuIFVzZSBhIHZhbHVl\nIG9mCiAqIDxjb2RlPm5vbmU8L2NvZGU+IHRvIHByZXZlbnQgbWFwcGluZyB0\naGlzIHRhYmxlLiBUaGlzIHByb3BlcnR5IGNhbiBiZQogKiB1c2VkIGluIHBs\nYWNlIG9mIHRoZSA8Y29kZT5yZW5hbWU8L2NvZGU+IHByb3BlcnR5LgogKiA8\nbGk+PGk+Jmx0O2NsYXNzIG5hbWUmZ3Q7LmlkZW50aXR5PC9pPjogU2V0IHRo\naXMgcHJvcGVydHkgdG8KICogPGNvZGU+ZGF0YXN0b3JlPC9jb2RlPiwgPGNv\nZGU+YnVpbHRpbjwvY29kZT4sIG9yIHRoZSBkZXNpcmVkCiAqIGZ1bGx5LXF1\nYWxpZmllZCBhcHBsaWNhdGlvbiBpZGVudGl0eSBjbGFzcyBuYW1lIHRvIG92\nZXJyaWRlIHRoZQogKiByZXZlcnNlIG1hcHBpbmcgdG9vbCdzIGRlZmF1bHQg\naWRlbnRpdHkgc2V0dGluZ3MuIElmIHRoZSBjbGFzcyBoYXMgYmVlbgogKiBy\nZW5hbWVkLCB1c2UgdGhlIG5ldyBuYW1lLjwvbGk+CiAqIDxsaT48aT4mbHQ7\nY2xhc3MgbmFtZSZndDsuJmx0O2ZpZWxkIG5hbWUmZ3Q7LnJlbmFtZTwvaT46\nIE92ZXJyaWRlIHRoZQogKiB0b29sLWdlbmVyYXRlZCBmaWVsZCBuYW1lIHdp\ndGggdGhlIGdpdmVuIHZhbHVlLiBVc2UgdGhlIGZpZWxkIG93bmVyJ3MKICog\nZnVsbCBjbGFzcyBuYW1lIGluIHRoZSBwcm9wZXJ0eSBrZXkuIFRoZSBwcm9w\nZXJ0eSB2YWx1ZSBzaG91bGQgYmUgdGhlCiAqIG5ldyBmaWVsZCBuYW1lLCB3\naXRob3V0IHRoZSBwcmVjZWRpbmcgY2xhc3MgbmFtZS4gVXNlIGEgdmFsdWUg\nb2YKICogPGNvZGU+bm9uZTwvY29kZT4gdG8gcmVqZWN0IHRoZSBnZW5lcmF0\nZWQgbWFwcGluZy48L2xpPgogKiA8bGk+PGk+Jmx0O3RhYmxlIG5hbWUmZ3Q7\nLiZsdDtjb2x1bW4gbmFtZSZndDsuZmllbGQtbmFtZTwvaT46IEFzc2lnbiB0\naGUKICogZmllbGQgbmFtZSB0byB1c2UgZm9yIHRoZSBtYXBwaW5nIG9mIGEg\ncGFydGljdWxhciBjb2x1bW4uIElmIHRoaXMgaXMKICogYSBtdWx0aS1jb2x1\nbW4gbWFwcGluZywgYW55IG9uZSBvZiB0aGUgY29sdW1ucyBjYW4gYmUgdXNl\nZC4gVXNlIGEgdmFsdWUKICogb2YgPGNvZGU+bm9uZTwvY29kZT4gdG8gcHJl\ndmVudCB0aGUgY29sdW1uIChhbmQgYXNzb2NpYXRlZCBjb2x1bW5zKQogKiBm\ncm9tIGJlaW5nIG1hcHBlZC4gVGhpcyBwcm9wZXJ0eSBjYW4gYmUgdXNlZCBp\nbiBwbGFjZSBvZiB0aGUKICogPGNvZGU+cmVuYW1lPC9jb2RlPiBwcm9wZXJ0\neS4KICogPGxpPjxpPiZsdDtjbGFzcyBuYW1lJmd0Oy4mbHQ7ZmllbGQgbmFt\nZSZndDsudHlwZTwvaT46IFRoZSBjbGFzcyBuYW1lIG9mCiAqIHRoZSB0eXBl\nIHRvIGdpdmUgdGhlIG5hbWVkIGZpZWxkLiBVc2UgZnVsbCBjbGFzcyBuYW1l\ncy4gSWYgdGhlIGZpZWxkCiAqIGhhcyBiZWVuIHJlbmFtZWQsIHVzZSB0aGUg\nbmV3IG5hbWUuPC9saT4KICogPGxpPjxpPiZsdDtjbGFzcyBuYW1lJmd0Oy4m\nbHQ7ZmllbGQgbmFtZSZndDsudmFsdWU8L2k+OiBUaGUgaW5pdGlhbCB2YWx1\nZQogKiBmb3IgdGhlIG5hbWVkIGZpZWxkLiBUaGUgZ2l2ZW4gc3RyaW5nIHdp\nbGwgYmUgcGxhY2VkIGFzLWlzIGluIHRoZQogKiBnZW5lcmF0ZWQgSmF2YSBj\nb2RlLCBzbyBiZSBzdXJlIHRvIGFkZCBxdW90ZXMgdG8gc3RyaW5ncywgZXRj\nLiBJZiB0aGUKICogZmllbGQgaGFzIGJlZW4gcmVuYW1lZCwgdXNlIHRoZSBu\nZXcgbmFtZS48L2xpPgogKiA8L3VsPiBBbGwga2V5cyBhcmUgb3B0aW9uYWw7\nIGlmIG5vdCBzcGVjaWZpZWQsIHRoZSBjdXN0b21pemVyIGtlZXBzIHRoZQog\nKiBkZWZhdWx0IHZhbHVlIGdlbmVyYXRlZCBieSB0aGUgcmV2ZXJzZSBtYXBw\naW5nIHRvb2wuCiAqLwpwdWJsaWMgY2xhc3MgUHJvcGVydGllc1JldmVyc2VD\ndXN0b21pemVyCiAgICBpbXBsZW1lbnRzIFJldmVyc2VDdXN0b21pemVyIHsK\nCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6ZXIgX2xvYyA9IExv\nY2FsaXplci5mb3JQYWNrYWdlCiAgICAgICAgKFByb3BlcnRpZXNSZXZlcnNl\nQ3VzdG9taXplci5jbGFzcyk7CgogICAgcHJvdGVjdGVkIFJldmVyc2VNYXBw\naW5nVG9vbCB0b29sID0gbnVsbDsKICAgIHByaXZhdGUgUHJvcGVydGllcyBf\ncHJvcHMgPSBudWxsOwogICAgcHJpdmF0ZSBTZXQgX3VuYWNjZXNzZWQgPSBu\ndWxsOwoKICAgIHB1YmxpYyB2b2lkIHNldENvbmZpZ3VyYXRpb24oUHJvcGVy\ndGllcyBwcm9wcykgewogICAgICAgIF9wcm9wcyA9IHByb3BzOwogICAgICAg\nIF91bmFjY2Vzc2VkID0gbmV3IFRyZWVTZXQocHJvcHMua2V5U2V0KCkpOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldFRvb2woUmV2ZXJzZU1hcHBpbmdU\nb29sIHRvb2wpIHsKICAgICAgICB0aGlzLnRvb2wgPSB0b29sOwogICAgfQoK\nICAgIHB1YmxpYyBpbnQgZ2V0VGFibGVUeXBlKFRhYmxlIHRhYmxlLCBpbnQg\nZGVmYXVsdFR5cGUpIHsKICAgICAgICBTdHJpbmcgdHlwZSA9IGdldFByb3Bl\ncnR5KHRhYmxlLmdldE5hbWUoKSArICIudGFibGUtdHlwZSIpOwogICAgICAg\nIGlmICh0eXBlID09IG51bGwgJiYgdGFibGUuZ2V0U2NoZW1hTmFtZSgpICE9\nIG51bGwpCiAgICAgICAgICAgIHR5cGUgPSBnZXRQcm9wZXJ0eSh0YWJsZS5n\nZXRGdWxsTmFtZSgpICsgIi50YWJsZS10eXBlIik7CiAgICAgICAgaWYgKHR5\ncGUgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRUeXBlOwog\nICAgICAgIGlmICgibm9uZSIuZXF1YWxzKHR5cGUpKQogICAgICAgICAgICBy\nZXR1cm4gUmV2ZXJzZU1hcHBpbmdUb29sLlRBQkxFX05PTkU7CiAgICAgICAg\naWYgKCJiYXNlIi5lcXVhbHModHlwZSkpCiAgICAgICAgICAgIHJldHVybiBS\nZXZlcnNlTWFwcGluZ1Rvb2wuVEFCTEVfQkFTRTsKICAgICAgICBpZiAoInNl\nY29uZGFyeSIuZXF1YWxzKHR5cGUpKQogICAgICAgICAgICByZXR1cm4gUmV2\nZXJzZU1hcHBpbmdUb29sLlRBQkxFX1NFQ09OREFSWTsKICAgICAgICBpZiAo\nInNlY29uZGFyeS1vdXRlciIuZXF1YWxzKHR5cGUpKQogICAgICAgICAgICBy\nZXR1cm4gUmV2ZXJzZU1hcHBpbmdUb29sLlRBQkxFX1NFQ09OREFSWV9PVVRF\nUjsKICAgICAgICBpZiAoImFzc29jaWF0aW9uIi5lcXVhbHModHlwZSkpCiAg\nICAgICAgICAgIHJldHVybiBSZXZlcnNlTWFwcGluZ1Rvb2wuVEFCTEVfQVNT\nT0NJQVRJT047CiAgICAgICAgaWYgKCJzdWJjbGFzcyIuZXF1YWxzKHR5cGUp\nKQogICAgICAgICAgICByZXR1cm4gUmV2ZXJzZU1hcHBpbmdUb29sLlRBQkxF\nX1NVQkNMQVNTOwogICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRF\neGNlcHRpb24odGFibGUuZ2V0TmFtZSgpICsgIi50YWJsZS10eXBlOiAiCiAg\nICAgICAgICAgICsgdHlwZSk7CiAgICB9CgogICAgcHVibGljIFN0cmluZyBn\nZXRDbGFzc05hbWUoVGFibGUgdGFibGUsIFN0cmluZyBkZWZhdWx0TmFtZSkg\newogICAgICAgIC8vIGNoZWNrIGZvciBhIHJlbmFtZSBwcm9wZXJ0eSBvciBh\nIHRhYmxlLW5hbWluZyBwcm9wZXJ0eQogICAgICAgIFN0cmluZyBuYW1lID0g\nZ2V0UHJvcGVydHkoZGVmYXVsdE5hbWUgKyAiLnJlbmFtZSIpOwogICAgICAg\nIGlmIChuYW1lID09IG51bGwpIHsKICAgICAgICAgICAgbmFtZSA9IGdldFBy\nb3BlcnR5KHRhYmxlLmdldE5hbWUoKSArICIuY2xhc3MtbmFtZSIpOwogICAg\nICAgICAgICBpZiAobmFtZSA9PSBudWxsICYmIHRhYmxlLmdldFNjaGVtYU5h\nbWUoKSAhPSBudWxsKQogICAgICAgICAgICAgICAgbmFtZSA9IGdldFByb3Bl\ncnR5KHRhYmxlLmdldEZ1bGxOYW1lKCkgKyAiLmNsYXNzLW5hbWUiKTsKICAg\nICAgICB9CgogICAgICAgIGlmIChuYW1lID09IG51bGwpIHsKICAgICAgICAg\nICAgaWYgKHRvb2wuZ2V0TG9nKCkuaXNUcmFjZUVuYWJsZWQoKSkKICAgICAg\nICAgICAgICAgIHRvb2wuZ2V0TG9nKCkudHJhY2UoX2xvYy5nZXQoImN1c3Rv\nbS1uby1jbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE5hbWUs\nIHRhYmxlKSk7CiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0TmFtZTsKICAg\nICAgICB9CgogICAgICAgIGlmICgibm9uZSIuZXF1YWxzKG5hbWUpKSB7CiAg\nICAgICAgICAgIGlmICh0b29sLmdldExvZygpLmlzSW5mb0VuYWJsZWQoKSkK\nICAgICAgICAgICAgICAgIHRvb2wuZ2V0TG9nKCkuaW5mbyhfbG9jLmdldCgi\nY3VzdG9tLXJtLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0\nTmFtZSwgdGFibGUpKTsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAg\nICAgfQoKICAgICAgICBpZiAodG9vbC5nZXRMb2coKS5pc0luZm9FbmFibGVk\nKCkpCiAgICAgICAgICAgIHRvb2wuZ2V0TG9nKCkuaW5mbyhfbG9jLmdldCgi\nY3VzdG9tLWNsYXNzIiwgZGVmYXVsdE5hbWUsIG5hbWUpKTsKICAgICAgICBy\nZXR1cm4gbmFtZTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjdXN0b21pemUo\nQ2xhc3NNYXBwaW5nIGNscykgewogICAgICAgIC8vIGN1c3RvbWl6ZSBpZGVu\ndGl0eSB0eXBlCiAgICAgICAgU3RyaW5nIGlkID0gZ2V0UHJvcGVydHkoY2xz\nLmdldERlc2NyaWJlZFR5cGUoKS5nZXROYW1lKCkKICAgICAgICAgICAgKyAi\nLmlkZW50aXR5Iik7CiAgICAgICAgaWYgKCJkYXRhc3RvcmUiLmVxdWFscyhp\nZCkpIHsKICAgICAgICAgICAgY2xzLnNldE9iamVjdElkVHlwZShudWxsLCBm\nYWxzZSk7CiAgICAgICAgICAgIGNscy5zZXRJZGVudGl0eVR5cGUoQ2xhc3NN\nYXBwaW5nLklEX0RBVEFTVE9SRSk7CiAgICAgICAgfSBlbHNlIGlmICgiYnVp\nbHRpbiIuZXF1YWxzKGlkKSkgewogICAgICAgICAgICBjbHMuc2V0T2JqZWN0\nSWRUeXBlKG51bGwsIGZhbHNlKTsKICAgICAgICAgICAgY2xzLnNldElkZW50\naXR5VHlwZShDbGFzc01hcHBpbmcuSURfQVBQTElDQVRJT04pOwogICAgICAg\nIH0gZWxzZSBpZiAoaWQgIT0gbnVsbCkKICAgICAgICAgICAgY2xzLnNldE9i\namVjdElkVHlwZSh0b29sLmdlbmVyYXRlQ2xhc3MoaWQsIG51bGwpLCBmYWxz\nZSk7CiAgICB9CgogICAgcHVibGljIFN0cmluZyBnZXRDbGFzc0NvZGUoQ2xh\nc3NNYXBwaW5nIG1hcHBpbmcpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBjdXN0b21pemUoRmllbGRNYXBwaW5nIGZp\nZWxkKSB7CiAgICAgICAgU3RyaW5nIHR5cGUgPSBnZXRQcm9wZXJ0eShmaWVs\nZC5nZXRGdWxsTmFtZShmYWxzZSkgKyAiLnR5cGUiKTsKICAgICAgICBpZiAo\ndHlwZSAhPSBudWxsKQogICAgICAgICAgICBmaWVsZC5zZXREZWNsYXJlZFR5\ncGUoU3RyaW5ncy50b0NsYXNzKHR5cGUsIG51bGwpKTsKICAgIH0KCiAgICBw\ndWJsaWMgU3RyaW5nIGdldEZpZWxkTmFtZShDbGFzc01hcHBpbmcgZGVjLCBD\nb2x1bW5bXSBjb2xzLCBGb3JlaWduS2V5IGZrLAogICAgICAgIFN0cmluZyBk\nZWZhdWx0TmFtZSkgewogICAgICAgIC8vIGNoZWNrIGZvciBhIHJlbmFtZSBw\ncm9wZXJ0eSBvciBhIGNvbHVtbi1uYW1pbmcgcHJvcGVydHkKICAgICAgICBT\ndHJpbmcgbmFtZSA9IGdldFByb3BlcnR5KGRlYy5nZXREZXNjcmliZWRUeXBl\nKCkuZ2V0TmFtZSgpICsgIi4iCiAgICAgICAgICAgICsgZGVmYXVsdE5hbWUg\nKyAiLnJlbmFtZSIpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBuYW1lID09\nIG51bGwgJiYgaSA8IGNvbHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAg\nbmFtZSA9IGdldFByb3BlcnR5KGNvbHNbaV0uZ2V0VGFibGVOYW1lKCkgKyAi\nLiIKICAgICAgICAgICAgICAgICsgY29sc1tpXS5nZXROYW1lKCkgKyAiLiIg\nKyAiZmllbGQtbmFtZSIpOwogICAgICAgICAgICBpZiAobmFtZSA9PSBudWxs\nICYmIGNvbHNbaV0uZ2V0VGFibGUoKS5nZXRTY2hlbWFOYW1lKCkgIT0gbnVs\nbCkKICAgICAgICAgICAgICAgIG5hbWUgPSBnZXRQcm9wZXJ0eShjb2xzW2ld\nLmdldFRhYmxlKCkuZ2V0RnVsbE5hbWUoKQogICAgICAgICAgICAgICAgICAg\nICsgIi4iICsgY29sc1tpXS5nZXROYW1lKCkgKyAiLiIgKyAiZmllbGQtbmFt\nZSIpOwogICAgICAgIH0KCiAgICAgICAgaWYgKG5hbWUgPT0gbnVsbCkgewog\nICAgICAgICAgICBpZiAodG9vbC5nZXRMb2coKS5pc1RyYWNlRW5hYmxlZCgp\nKQogICAgICAgICAgICAgICAgdG9vbC5nZXRMb2coKS50cmFjZShfbG9jLmdl\ndCgiY3VzdG9tLW5vLWZpZWxkIiwgZGVmYXVsdE5hbWUsCiAgICAgICAgICAg\nICAgICAgICAgZGVjKSk7CiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0TmFt\nZTsKICAgICAgICB9CgogICAgICAgIGlmICgibm9uZSIuZXF1YWxzKG5hbWUp\nKSB7CiAgICAgICAgICAgIGlmICh0b29sLmdldExvZygpLmlzSW5mb0VuYWJs\nZWQoKSkKICAgICAgICAgICAgICAgIHRvb2wuZ2V0TG9nKCkuaW5mbyhfbG9j\nLmdldCgiY3VzdG9tLXJtLWZpZWxkIiwgZGVmYXVsdE5hbWUsCiAgICAgICAg\nICAgICAgICAgICAgZGVjKSk7CiAgICAgICAgICAgIHJldHVybiBudWxsOwog\nICAgICAgIH0KCiAgICAgICAgaWYgKHRvb2wuZ2V0TG9nKCkuaXNJbmZvRW5h\nYmxlZCgpKQogICAgICAgICAgICB0b29sLmdldExvZygpLmluZm8oX2xvYy5n\nZXQoImN1c3RvbS1maWVsZCIsIGRlZmF1bHROYW1lLCBkZWMsCiAgICAgICAg\nICAgICAgICBuYW1lKSk7CiAgICAgICAgcmV0dXJuIG5hbWU7CiAgICB9Cgog\nICAgcHVibGljIFN0cmluZyBnZXRJbml0aWFsVmFsdWUoRmllbGRNYXBwaW5n\nIGZpZWxkKSB7CiAgICAgICAgcmV0dXJuIGdldFByb3BlcnR5KGZpZWxkLmdl\ndEZ1bGxOYW1lKGZhbHNlKSArICIudmFsdWUiKTsKICAgIH0KCiAgICBwdWJs\naWMgU3RyaW5nIGdldERlY2xhcmF0aW9uKEZpZWxkTWFwcGluZyBmaWVsZCkg\newogICAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIHB1YmxpYyBTdHJp\nbmcgZ2V0RmllbGRDb2RlKEZpZWxkTWFwcGluZyBmaWVsZCkgewogICAgICAg\nIHJldHVybiBudWxsOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIHVubWFw\ncGVkVGFibGUoVGFibGUgdGFibGUpIHsKICAgICAgICByZXR1cm4gZmFsc2U7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgY2xvc2UoKSB7CiAgICAgICAgaWYg\nKCFfdW5hY2Nlc3NlZC5pc0VtcHR5KCkgJiYgdG9vbC5nZXRMb2coKS5pc1Ry\nYWNlRW5hYmxlZCgpKQogICAgICAgICAgICB0b29sLmdldExvZygpLnRyYWNl\nKF9sb2MuZ2V0KCJjdXN0b20tdW51c2VkLXByb3BzIiwgX3VuYWNjZXNzZWQp\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgcHJvcGVydHkg\ndmFsdWUgZm9yIHRoZSBnaXZlbiBrZXksIG9yIG51bGwgaWYgbm9uZS4KICAg\nICAqLwogICAgcHJvdGVjdGVkIFN0cmluZyBnZXRQcm9wZXJ0eShTdHJpbmcg\na2V5KSB7CiAgICAgICAgU3RyaW5nIHZhbCA9IFN0cmluZ1V0aWxzLnRyaW1U\nb051bGwoX3Byb3BzLmdldFByb3BlcnR5KGtleSkpOwogICAgICAgIF91bmFj\nY2Vzc2VkLnJlbW92ZShrZXkpOwogICAgICAgIHJldHVybiB2YWw7CiAgICB9\nCn0K\n","encoding":"base64"}

