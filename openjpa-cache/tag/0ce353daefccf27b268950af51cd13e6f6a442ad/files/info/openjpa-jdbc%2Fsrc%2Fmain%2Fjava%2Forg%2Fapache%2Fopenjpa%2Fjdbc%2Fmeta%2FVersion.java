{"sha":"6ea4c57cfb2beffd2851a12e3901373dd40b3a4d","node_id":"MDQ6QmxvYjIwNjM2NDo2ZWE0YzU3Y2ZiMmJlZmZkMjg1MWExMmUzOTAxMzczZGQ0MGIzYTRk","size":10413,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/6ea4c57cfb2beffd2851a12e3901373dd40b3a4d","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLm1ldGE7CgppbXBvcnQgamF2YS5zcWwuU1FMRXhjZXB0\naW9uOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmtlcm5lbC5K\nREJDU3RvcmU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hl\nbWEuQ29sdW1uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2No\nZW1hLkNvbHVtbklPOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMu\nc2NoZW1hLkluZGV4OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMu\nc2NoZW1hLlNjaGVtYXM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5zcWwuUmVzdWx0OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMu\nc3FsLlJvd01hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5zcWwuU2VsZWN0OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5l\nbC5PcGVuSlBBU3RhdGVNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmxpYi5sb2cuTG9nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxp\nYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5t\nZXRhLk1ldGFEYXRhQ29udGV4dDsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5tZXRhLk1ldGFEYXRhTW9kZXM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEubWV0YS5NZXRhRGF0YVJlcG9zaXRvcnk7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEudXRpbC5JbnRlcm5hbEV4Y2VwdGlvbjsKCi8qKgogKiBIYW5k\nbGVzIG9wdGltaXN0aWMgbG9jayB2ZXJzaW9uaW5nIGZvciBhIGNsYXNzLgog\nKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKi8KcHVibGljIGNsYXNzIFZlcnNp\nb24KICAgIGltcGxlbWVudHMgVmVyc2lvblN0cmF0ZWd5LCBNZXRhRGF0YUNv\nbnRleHQsIE1ldGFEYXRhTW9kZXMgewoKICAgIHByaXZhdGUgc3RhdGljIGZp\nbmFsIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVyLmZvclBhY2thZ2UoVmVy\nc2lvbi5jbGFzcyk7CgogICAgcHJpdmF0ZSBmaW5hbCBDbGFzc01hcHBpbmcg\nX21hcHBpbmc7CiAgICBwcml2YXRlIGZpbmFsIFZlcnNpb25NYXBwaW5nSW5m\nbyBfaW5mbzsKICAgIHByaXZhdGUgVmVyc2lvblN0cmF0ZWd5IF9zdHJhdGVn\neSA9IG51bGw7CiAgICBwcml2YXRlIGludCBfcmVzTW9kZSA9IE1PREVfTk9O\nRTsKCiAgICBwcml2YXRlIENvbHVtbltdIF9jb2xzID0gU2NoZW1hcy5FTVBU\nWV9DT0xVTU5TOwogICAgcHJpdmF0ZSBDb2x1bW5JTyBfaW8gPSBudWxsOwog\nICAgcHJpdmF0ZSBJbmRleCBfaWR4ID0gbnVsbDsKCiAgICAvKioKICAgICAq\nIENvbnN0cnVjdG9yLiBTdXBwbHkgb3duaW5nIG1hcHBpbmcuCiAgICAgKi8K\nICAgIHB1YmxpYyBWZXJzaW9uKENsYXNzTWFwcGluZyBtYXBwaW5nKSB7CiAg\nICAgICAgX21hcHBpbmcgPSBtYXBwaW5nOwogICAgICAgIF9pbmZvID0gZ2V0\nTWFwcGluZ1JlcG9zaXRvcnkoKS5uZXdNYXBwaW5nSW5mbyh0aGlzKTsKICAg\nIH0KCiAgICBwdWJsaWMgTWV0YURhdGFSZXBvc2l0b3J5IGdldFJlcG9zaXRv\ncnkoKSB7CiAgICAgICAgcmV0dXJuIF9tYXBwaW5nLmdldFJlcG9zaXRvcnko\nKTsKICAgIH0KCiAgICBwdWJsaWMgTWFwcGluZ1JlcG9zaXRvcnkgZ2V0TWFw\ncGluZ1JlcG9zaXRvcnkoKSB7CiAgICAgICAgcmV0dXJuIF9tYXBwaW5nLmdl\ndE1hcHBpbmdSZXBvc2l0b3J5KCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBS\nZXR1cm4gdGhlIG93bmluZyBtYXBwaW5nLgogICAgICovCiAgICBwdWJsaWMg\nQ2xhc3NNYXBwaW5nIGdldENsYXNzTWFwcGluZygpIHsKICAgICAgICByZXR1\ncm4gX21hcHBpbmc7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgc3RyYXRl\nZ3kgdXNlZCBmb3IgdmVyc2lvbmluZy4KICAgICAqLwogICAgcHVibGljIFZl\ncnNpb25TdHJhdGVneSBnZXRTdHJhdGVneSgpIHsKICAgICAgICByZXR1cm4g\nX3N0cmF0ZWd5OwogICAgfQoKICAgIC8qKgogICAgICogVGhlIHN0cmF0ZWd5\nIHVzZWQgZm9yIHZlcnNpb25pbmcuIFRoZSA8Y29kZT5hZGFwdDwvY29kZT4K\nICAgICAqIHBhcmFtZXRlciBkZXRlcm1pbmVzIHdoZXRoZXIgdG8gYWRhcHQg\nd2hlbiBtYXBwaW5nIHRoZSBzdHJhdGVneTsKICAgICAqIHVzZSBudWxsIGlm\nIHRoZSBzdHJhdGVneSBzaG91bGQgbm90IGJlIG1hcHBlZC4KICAgICAqLwog\nICAgcHVibGljIHZvaWQgc2V0U3RyYXRlZ3koVmVyc2lvblN0cmF0ZWd5IHN0\ncmF0ZWd5LCBCb29sZWFuIGFkYXB0KSB7CiAgICAgICAgLy8gc2V0IHN0cmF0\nZWd5IGZpcnN0IHNvIHdlIGNhbiBhY2Nlc3MgaXQgZHVyaW5nIG1hcHBpbmcK\nICAgICAgICBWZXJzaW9uU3RyYXRlZ3kgb3JpZyA9IF9zdHJhdGVneTsKICAg\nICAgICBfc3RyYXRlZ3kgPSBzdHJhdGVneTsKICAgICAgICBpZiAoc3RyYXRl\nZ3kgIT0gbnVsbCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAg\nICAgc3RyYXRlZ3kuc2V0VmVyc2lvbih0aGlzKTsKICAgICAgICAgICAgICAg\nIGlmIChhZGFwdCAhPSBudWxsKQogICAgICAgICAgICAgICAgICAgIHN0cmF0\nZWd5Lm1hcChhZGFwdC5ib29sZWFuVmFsdWUoKSk7CiAgICAgICAgICAgIH0g\nY2F0Y2ggKFJ1bnRpbWVFeGNlcHRpb24gcmUpIHsKICAgICAgICAgICAgICAg\nIC8vIHJlc2V0IHN0cmF0ZWd5CiAgICAgICAgICAgICAgICBfc3RyYXRlZ3kg\nPSBvcmlnOwogICAgICAgICAgICAgICAgdGhyb3cgcmU7CiAgICAgICAgICAg\nIH0KICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBSYXcgbWFwcGlu\nZyBkYXRhLgogICAgICovCiAgICBwdWJsaWMgVmVyc2lvbk1hcHBpbmdJbmZv\nIGdldE1hcHBpbmdJbmZvKCkgewogICAgICAgIHJldHVybiBfaW5mbzsKICAg\nIH0KCiAgICAvKioKICAgICAqIENvbHVtbnMgdXNlZCBmb3IgdmVyc2lvbmlu\nZy4KICAgICAqLwogICAgcHVibGljIENvbHVtbltdIGdldENvbHVtbnMoKSB7\nCiAgICAgICAgcmV0dXJuIF9jb2xzOwogICAgfQoKICAgIC8qKgogICAgICog\nQ29sdW1ucyB1c2VkIGZvciB2ZXJzaW9uaW5nLgogICAgICovCiAgICBwdWJs\naWMgdm9pZCBzZXRDb2x1bW5zKENvbHVtbltdIGNvbHMpIHsKICAgICAgICBp\nZiAoY29scyA9PSBudWxsKQogICAgICAgICAgICBjb2xzID0gU2NoZW1hcy5F\nTVBUWV9DT0xVTU5TOwogICAgICAgIF9jb2xzID0gY29sczsKICAgIH0KCiAg\nICAvKioKICAgICAqIEkvTyBpbmZvcm1hdGlvbiBvbiB0aGUgdmVyc2lvbiBj\nb2x1bW5zLgogICAgICovCiAgICBwdWJsaWMgQ29sdW1uSU8gZ2V0Q29sdW1u\nSU8oKSB7CiAgICAgICAgcmV0dXJuIChfaW8gPT0gbnVsbCkgPyBDb2x1bW5J\nTy5VTlJFU1RSSUNURUQgOiBfaW87CiAgICB9CgogICAgLyoqCiAgICAgKiBJ\nL08gaW5mb3JtYXRpb24gb24gdGhlIHZlcnNpb24gY29sdW1ucy4KICAgICAq\nLwogICAgcHVibGljIHZvaWQgc2V0Q29sdW1uSU8oQ29sdW1uSU8gaW8pIHsK\nICAgICAgICBfaW8gPSBpbzsKICAgIH0KCiAgICAvKioKICAgICAqIEluZGV4\nIG9uIHRoZSB2ZXJzaW9uIGNvbHVtbnMsIG9yIG51bGwgaWYgbm9uZS4KICAg\nICAqLwogICAgcHVibGljIEluZGV4IGdldEluZGV4KCkgewogICAgICAgIHJl\ndHVybiBfaWR4OwogICAgfQoKICAgIC8qKgogICAgICogSW5kZXggb24gdGhl\nIHZlcnNpb24gY29sdW1ucywgb3IgbnVsbCBpZiBub25lLgogICAgICovCiAg\nICBwdWJsaWMgdm9pZCBzZXRJbmRleChJbmRleCBpZHgpIHsKICAgICAgICBf\naWR4ID0gaWR4OwogICAgfQoKICAgIC8qKgogICAgICogSW5jcmVtZW50IHRo\nZSByZWZlcmVuY2UgY291bnQgb2YgdXNlZCBzY2hlbWEgY29tcG9uZW50cy4K\nICAgICAqLwogICAgcHVibGljIHZvaWQgcmVmU2NoZW1hQ29tcG9uZW50cygp\nIHsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9jb2xzLmxlbmd0aDsg\naSsrKQogICAgICAgICAgICBfY29sc1tpXS5yZWYoKTsKICAgIH0KCiAgICAv\nKioKICAgICAqIENsZWFyIG1hcHBpbmcgaW5mb3JtYXRpb24sIGluY2x1ZGlu\nZyBzdHJhdGVneS4KICAgICAqLwogICAgcHVibGljIHZvaWQgY2xlYXJNYXBw\naW5nKCkgewogICAgICAgIF9zdHJhdGVneSA9IG51bGw7CiAgICAgICAgX2Nv\nbHMgPSBTY2hlbWFzLkVNUFRZX0NPTFVNTlM7CiAgICAgICAgX2lkeCA9IG51\nbGw7CiAgICAgICAgX2luZm8uY2xlYXIoKTsKICAgICAgICBzZXRSZXNvbHZl\nKE1PREVfTUFQUElORyB8IE1PREVfTUFQUElOR19JTklULCBmYWxzZSk7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBVcGRhdGUge0BsaW5rIE1hcHBpbmdJbmZv\nfSB3aXRoIG91ciBjdXJyZW50IG1hcHBpbmcgaW5mb3JtYXRpb24uCiAgICAg\nKi8KICAgIHB1YmxpYyB2b2lkIHN5bmNNYXBwaW5nSW5mbygpIHsKICAgICAg\nICBfaW5mby5zeW5jV2l0aCh0aGlzKTsKCiAgICAgICAgLy8gc2V0dXAgdGhl\nIHZlcnNpb24gZmllbGQgd2l0aCBvdXIgbWFwcGluZyBpbmZvCiAgICAgICAg\nRmllbGRNYXBwaW5nIGZtID0gX21hcHBpbmcuZ2V0VmVyc2lvbkZpZWxkTWFw\ncGluZygpOwogICAgICAgIGlmIChmbSAhPSBudWxsKSB7CiAgICAgICAgICAg\nIC8vIGVyYXNlIGV4cGxpY2l0IHN0cmF0ZWd5IGlmIGl0IGlzIHN0YW5kYXJk\nIHZlcnNpb24gc3RyYXRlZ3kgZm9yCiAgICAgICAgICAgIC8vIGZpZWxkIHR5\ncGUKICAgICAgICAgICAgaWYgKF9pbmZvLmdldFN0cmF0ZWd5KCkgIT0gbnVs\nbAogICAgICAgICAgICAgICAgJiYgX2luZm8uZ2V0U3RyYXRlZ3koKS5lcXVh\nbHMoZ2V0TWFwcGluZ1JlcG9zaXRvcnkoKS4KICAgICAgICAgICAgICAgIGRl\nZmF1bHRTdHJhdGVneSh0aGlzLCBmbSkuZ2V0QWxpYXMoKSkpCiAgICAgICAg\nICAgICAgICBfaW5mby5zZXRTdHJhdGVneShudWxsKTsKCiAgICAgICAgICAg\nIGZtLmdldE1hcHBpbmdJbmZvKCkuY2xlYXIoKTsKICAgICAgICAgICAgZm0u\nZ2V0VmFsdWVJbmZvKCkuY2xlYXIoKTsKICAgICAgICAgICAgZm0uZ2V0S2V5\nTWFwcGluZygpLmdldFZhbHVlSW5mbygpLmNsZWFyKCk7CiAgICAgICAgICAg\nIGZtLmdldEVsZW1lbnRNYXBwaW5nKCkuZ2V0VmFsdWVJbmZvKCkuY2xlYXIo\nKTsKICAgICAgICAgICAgZm0uZ2V0VmFsdWVJbmZvKCkuY29weShfaW5mbyk7\nCiAgICAgICAgICAgIF9pbmZvLmNsZWFyKCk7CiAgICAgICAgfQogICAgfQoK\nICAgIC8qKgogICAgICogUmVzb2x2ZSBtb2RlLgogICAgICovCiAgICBwdWJs\naWMgaW50IGdldFJlc29sdmUoKSB7CiAgICAgICAgcmV0dXJuIF9yZXNNb2Rl\nOwogICAgfQoKICAgIC8qKgogICAgICogUmVzb2x2ZSBtb2RlLgogICAgICov\nCiAgICBwdWJsaWMgdm9pZCBzZXRSZXNvbHZlKGludCBtb2RlKSB7CiAgICAg\nICAgX3Jlc01vZGUgPSBtb2RlOwogICAgfQoKICAgIC8qKgogICAgICogUmVz\nb2x2ZSBtb2RlLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRSZXNvbHZl\nKGludCBtb2RlLCBib29sZWFuIG9uKSB7CiAgICAgICAgaWYgKG1vZGUgPT0g\nTU9ERV9OT05FKQogICAgICAgICAgICBfcmVzTW9kZSA9IG1vZGU7CiAgICAg\nICAgZWxzZSBpZiAob24pCiAgICAgICAgICAgIF9yZXNNb2RlIHw9IG1vZGU7\nCiAgICAgICAgZWxzZQogICAgICAgICAgICBfcmVzTW9kZSAmPSB+bW9kZTsK\nICAgIH0KCiAgICAvKioKICAgICAqIFJlc29sdmUgbWFwcGluZyBpbmZvcm1h\ndGlvbi4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gcmVzb2x2ZShpbnQg\nbW9kZSkgewogICAgICAgIGlmICgoX3Jlc01vZGUgJiBtb2RlKSA9PSBtb2Rl\nKQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICBpbnQgY3VyID0g\nX3Jlc01vZGU7CiAgICAgICAgX3Jlc01vZGUgfD0gbW9kZTsKICAgICAgICBp\nZiAoKG1vZGUgJiBNT0RFX01BUFBJTkcpICE9IDAgJiYgKGN1ciAmIE1PREVf\nTUFQUElORykgPT0gMCkKICAgICAgICAgICAgcmVzb2x2ZU1hcHBpbmcoKTsK\nICAgICAgICBpZiAoKG1vZGUgJiBNT0RFX01BUFBJTkdfSU5JVCkgIT0gMCAm\nJiAoY3VyICYgTU9ERV9NQVBQSU5HX0lOSVQpID09IDApCiAgICAgICAgICAg\nIF9zdHJhdGVneS5pbml0aWFsaXplKCk7CiAgICAgICAgcmV0dXJuIGZhbHNl\nOwogICAgfQoKICAgIC8qKgogICAgICogU2V0dXAgbWFwcGluZy4KICAgICAq\nLwogICAgcHJpdmF0ZSB2b2lkIHJlc29sdmVNYXBwaW5nKCkgewogICAgICAg\nIC8vIGlmIHRoZXJlIGlzIGEgdmVyc2lvbiBmaWVsZCwgY29weSBtYXBwaW5n\nIGluZm8gZnJvbSBpdAogICAgICAgIEZpZWxkTWFwcGluZyBmbSA9IF9tYXBw\naW5nLmdldFZlcnNpb25GaWVsZE1hcHBpbmcoKTsKICAgICAgICBpZiAoZm0g\nIT0gbnVsbCkKICAgICAgICAgICAgX2luZm8uY29weShmbS5nZXRWYWx1ZUlu\nZm8oKSk7CgogICAgICAgIC8vIG1hcCBzdHJhdGVneQogICAgICAgIE1hcHBp\nbmdSZXBvc2l0b3J5IHJlcG9zID0gZ2V0TWFwcGluZ1JlcG9zaXRvcnkoKTsK\nICAgICAgICBpZiAoX3N0cmF0ZWd5ID09IG51bGwpCiAgICAgICAgICAgIHJl\ncG9zLmdldFN0cmF0ZWd5SW5zdGFsbGVyKCkuaW5zdGFsbFN0cmF0ZWd5KHRo\naXMpOwogICAgICAgIExvZyBsb2cgPSByZXBvcy5nZXRMb2coKTsKICAgICAg\nICBpZiAobG9nLmlzVHJhY2VFbmFibGVkKCkpCiAgICAgICAgICAgIGxvZy50\ncmFjZShfbG9jLmdldCgic3RyYXRlZ3kiLCB0aGlzLCBfc3RyYXRlZ3kuZ2V0\nQWxpYXMoKSkpOwoKICAgICAgICAvLyBtYXJrIGNvbHVtbnMgYXMgbWFwcGVk\nCiAgICAgICAgQ29sdW1uW10gY29scyA9IGdldENvbHVtbnMoKTsKICAgICAg\nICBDb2x1bW5JTyBpbyA9IGdldENvbHVtbklPKCk7CiAgICAgICAgZm9yIChp\nbnQgaSA9IDA7IGkgPCBjb2xzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAg\nIGlmIChpby5pc0luc2VydGFibGUoaSwgZmFsc2UpKQogICAgICAgICAgICAg\nICAgY29sc1tpXS5zZXRGbGFnKENvbHVtbi5GTEFHX0RJUkVDVF9JTlNFUlQs\nIHRydWUpOwogICAgICAgICAgICBpZiAoaW8uaXNVcGRhdGFibGUoaSwgZmFs\nc2UpKQogICAgICAgICAgICAgICAgY29sc1tpXS5zZXRGbGFnKENvbHVtbi5G\nTEFHX0RJUkVDVF9VUERBVEUsIHRydWUpOwogICAgICAgIH0KICAgIH0KCiAg\nICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAvLyBW\nZXJzaW9uU3RyYXRlZ3kgaW1wbGVtZW50YXRpb24KICAgIC8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICBwdWJsaWMgU3RyaW5nIGdl\ndEFsaWFzKCkgewogICAgICAgIHJldHVybiBhc3NlcnRTdHJhdGVneSgpLmdl\ndEFsaWFzKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgbWFwKGJvb2xlYW4g\nYWRhcHQpIHsKICAgICAgICBhc3NlcnRTdHJhdGVneSgpLm1hcChhZGFwdCk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgaW5pdGlhbGl6ZSgpIHsKICAgICAg\nICBhc3NlcnRTdHJhdGVneSgpLmluaXRpYWxpemUoKTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBpbnNlcnQoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgSkRC\nQ1N0b3JlIHN0b3JlLCBSb3dNYW5hZ2VyIHJtKQogICAgICAgIHRocm93cyBT\nUUxFeGNlcHRpb24gewogICAgICAgIGFzc2VydFN0cmF0ZWd5KCkuaW5zZXJ0\nKHNtLCBzdG9yZSwgcm0pOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHVwZGF0\nZShPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBKREJDU3RvcmUgc3RvcmUsIFJv\nd01hbmFnZXIgcm0pCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAg\nICAgICAgYXNzZXJ0U3RyYXRlZ3koKS51cGRhdGUoc20sIHN0b3JlLCBybSk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgZGVsZXRlKE9wZW5KUEFTdGF0ZU1h\nbmFnZXIgc20sIEpEQkNTdG9yZSBzdG9yZSwgUm93TWFuYWdlciBybSkKICAg\nICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBhc3NlcnRTdHJh\ndGVneSgpLmRlbGV0ZShzbSwgc3RvcmUsIHJtKTsKICAgIH0KCiAgICBwdWJs\naWMgQm9vbGVhbiBpc0N1c3RvbUluc2VydChPcGVuSlBBU3RhdGVNYW5hZ2Vy\nIHNtLCBKREJDU3RvcmUgc3RvcmUpIHsKICAgICAgICByZXR1cm4gYXNzZXJ0\nU3RyYXRlZ3koKS5pc0N1c3RvbUluc2VydChzbSwgc3RvcmUpOwogICAgfQoK\nICAgIHB1YmxpYyBCb29sZWFuIGlzQ3VzdG9tVXBkYXRlKE9wZW5KUEFTdGF0\nZU1hbmFnZXIgc20sIEpEQkNTdG9yZSBzdG9yZSkgewogICAgICAgIHJldHVy\nbiBhc3NlcnRTdHJhdGVneSgpLmlzQ3VzdG9tVXBkYXRlKHNtLCBzdG9yZSk7\nCiAgICB9CgogICAgcHVibGljIEJvb2xlYW4gaXNDdXN0b21EZWxldGUoT3Bl\nbkpQQVN0YXRlTWFuYWdlciBzbSwgSkRCQ1N0b3JlIHN0b3JlKSB7CiAgICAg\nICAgcmV0dXJuIGFzc2VydFN0cmF0ZWd5KCkuaXNDdXN0b21EZWxldGUoc20s\nIHN0b3JlKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjdXN0b21JbnNlcnQo\nT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgSkRCQ1N0b3JlIHN0b3JlKQogICAg\nICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIGFzc2VydFN0cmF0\nZWd5KCkuY3VzdG9tSW5zZXJ0KHNtLCBzdG9yZSk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgY3VzdG9tVXBkYXRlKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20s\nIEpEQkNTdG9yZSBzdG9yZSkKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9u\nIHsKICAgICAgICBhc3NlcnRTdHJhdGVneSgpLmN1c3RvbVVwZGF0ZShzbSwg\nc3RvcmUpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGN1c3RvbURlbGV0ZShP\ncGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBKREJDU3RvcmUgc3RvcmUpCiAgICAg\nICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgYXNzZXJ0U3RyYXRl\nZ3koKS5jdXN0b21EZWxldGUoc20sIHN0b3JlKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBzZXRWZXJzaW9uKFZlcnNpb24gb3duZXIpIHsKICAgICAgICBh\nc3NlcnRTdHJhdGVneSgpLnNldFZlcnNpb24ob3duZXIpOwogICAgfQoKICAg\nIHB1YmxpYyBib29sZWFuIHNlbGVjdChTZWxlY3Qgc2VsLCBDbGFzc01hcHBp\nbmcgbWFwcGluZykgewogICAgICAgIHJldHVybiBhc3NlcnRTdHJhdGVneSgp\nLnNlbGVjdChzZWwsIG1hcHBpbmcpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIGxvYWQoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgSkRCQ1N0b3JlIHN0b3Jl\nLCBSZXN1bHQgcmVzKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewog\nICAgICAgIGFzc2VydFN0cmF0ZWd5KCkubG9hZChzbSwgc3RvcmUsIHJlcyk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgYWZ0ZXJMb2FkKE9wZW5KUEFTdGF0\nZU1hbmFnZXIgc20sIEpEQkNTdG9yZSBzdG9yZSkgewogICAgICAgIGFzc2Vy\ndFN0cmF0ZWd5KCkuYWZ0ZXJMb2FkKHNtLCBzdG9yZSk7CiAgICB9CgogICAg\ncHVibGljIGJvb2xlYW4gY2hlY2tWZXJzaW9uKE9wZW5KUEFTdGF0ZU1hbmFn\nZXIgc20sIEpEQkNTdG9yZSBzdG9yZSwKICAgICAgICBib29sZWFuIHVwZGF0\nZVZlcnNpb24pCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAg\nICAgcmV0dXJuIGFzc2VydFN0cmF0ZWd5KCkuY2hlY2tWZXJzaW9uKHNtLCBz\ndG9yZSwgdXBkYXRlVmVyc2lvbik7CiAgICB9CgogICAgcHVibGljIGludCBj\nb21wYXJlVmVyc2lvbihPYmplY3QgdjEsIE9iamVjdCB2MikgewogICAgICAg\nIHJldHVybiBhc3NlcnRTdHJhdGVneSgpLmNvbXBhcmVWZXJzaW9uKHYxLCB2\nMik7CiAgICB9CgogICAgcHJpdmF0ZSBWZXJzaW9uU3RyYXRlZ3kgYXNzZXJ0\nU3RyYXRlZ3koKSB7CiAgICAgICAgaWYgKF9zdHJhdGVneSA9PSBudWxsKQog\nICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAg\nICAgICByZXR1cm4gX3N0cmF0ZWd5OwogICAgfQoKICAgIHB1YmxpYyBTdHJp\nbmcgdG9TdHJpbmcoKSB7CiAgICAgICAgcmV0dXJuIF9tYXBwaW5nICsgIjx2\nZXJzaW9uPiI7CiAgICB9Cn0K\n","encoding":"base64"}

