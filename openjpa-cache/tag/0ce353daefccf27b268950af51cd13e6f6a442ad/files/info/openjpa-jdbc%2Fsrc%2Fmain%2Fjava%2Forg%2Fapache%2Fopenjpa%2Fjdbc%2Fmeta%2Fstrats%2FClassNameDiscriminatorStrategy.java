{"sha":"f21bb246c1991b52cbf7089cc2f8b0b4b62db1e0","node_id":"MDQ6QmxvYjIwNjM2NDpmMjFiYjI0NmMxOTkxYjUyY2JmNzA4OWNjMmY4YjBiNGI2MmRiMWUw","size":4185,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/f21bb246c1991b52cbf7089cc2f8b0b4b62db1e0","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLm1ldGEuc3RyYXRzOwoKaW1wb3J0IGphdmEuc3FsLkNv\nbm5lY3Rpb247CmltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDsK\naW1wb3J0IGphdmEuc3FsLlJlc3VsdFNldDsKaW1wb3J0IGphdmEuc3FsLlNR\nTEV4Y2VwdGlvbjsKCmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMubGFuZy5T\ndHJpbmdVdGlsczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmtl\ncm5lbC5KREJDU3RvcmU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5tZXRhLkNsYXNzTWFwcGluZzsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5qZGJjLnNjaGVtYS5Db2x1bW47CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5zcWwuREJEaWN0aW9uYXJ5OwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmpkYmMuc3FsLlNRTEJ1ZmZlcjsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIubG9nLkxvZzsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5saWIudXRpbC5Mb2NhbGl6ZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEubWV0YS5KYXZhVHlwZXM7CgovKioKICogU3RvcmVzIHRoZSBjbGFzcyBu\nYW1lIGFsb25nIHdpdGggZWFjaCBkYXRhYmFzZSBvYmplY3QgcmVjb3JkLgog\nKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKi8KcHVibGljIGNsYXNzIENsYXNz\nTmFtZURpc2NyaW1pbmF0b3JTdHJhdGVneQogICAgZXh0ZW5kcyBJblZhbHVl\nRGlzY3JpbWluYXRvclN0cmF0ZWd5IHsKCiAgICBwcml2YXRlIHN0YXRpYyBm\naW5hbCBMb2NhbGl6ZXIgX2xvYyA9IExvY2FsaXplci5mb3JQYWNrYWdlCiAg\nICAgICAgKENsYXNzTmFtZURpc2NyaW1pbmF0b3JTdHJhdGVneS5jbGFzcyk7\nCgogICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgQUxJQVMgPSAiY2xh\nc3MtbmFtZSI7CgogICAgcHVibGljIFN0cmluZyBnZXRBbGlhcygpIHsKICAg\nICAgICByZXR1cm4gQUxJQVM7CiAgICB9CgogICAgcHJvdGVjdGVkIGludCBn\nZXRKYXZhVHlwZSgpIHsKICAgICAgICByZXR1cm4gSmF2YVR5cGVzLlNUUklO\nRzsKICAgIH0KCiAgICBwcm90ZWN0ZWQgT2JqZWN0IGdldERpc2NyaW1pbmF0\nb3JWYWx1ZShDbGFzc01hcHBpbmcgY2xzKSB7CiAgICAgICAgcmV0dXJuIGNs\ncy5nZXREZXNjcmliZWRUeXBlKCkuZ2V0TmFtZSgpOwogICAgfQoKICAgIHBy\nb3RlY3RlZCBDbGFzcyBnZXRDbGFzcyhPYmplY3QgdmFsLCBKREJDU3RvcmUg\nc3RvcmUpCiAgICAgICAgdGhyb3dzIENsYXNzTm90Rm91bmRFeGNlcHRpb24g\newogICAgICAgIENsYXNzTG9hZGVyIGxvYWRlciA9IGdldENsYXNzTG9hZGVy\nKHN0b3JlKTsKICAgICAgICByZXR1cm4gQ2xhc3MuZm9yTmFtZSgoU3RyaW5n\nKSB2YWwsIHRydWUsIGxvYWRlcik7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nbG9hZFN1YmNsYXNzZXMoSkRCQ1N0b3JlIHN0b3JlKQogICAgICAgIHRocm93\ncyBTUUxFeGNlcHRpb24sIENsYXNzTm90Rm91bmRFeGNlcHRpb24gewogICAg\nICAgIGlmIChpc0ZpbmFsKSB7CiAgICAgICAgICAgIGRpc2Muc2V0U3ViY2xh\nc3Nlc0xvYWRlZCh0cnVlKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAg\nIH0KCiAgICAgICAgQ29sdW1uIGNvbCA9IGRpc2MuZ2V0Q29sdW1ucygpWzBd\nOwogICAgICAgIERCRGljdGlvbmFyeSBkaWN0ID0gc3RvcmUuZ2V0REJEaWN0\naW9uYXJ5KCk7CiAgICAgICAgU1FMQnVmZmVyIHNlbGVjdCA9IGRpY3QudG9T\nZWxlY3QobmV3IFNRTEJ1ZmZlcihkaWN0KS5hcHBlbmQoY29sKSwKICAgICAg\nICAgICAgc3RvcmUuZ2V0RmV0Y2hDb25maWd1cmF0aW9uKCksCiAgICAgICAg\nICAgIG5ldyBTUUxCdWZmZXIoZGljdCkuYXBwZW5kKGNvbC5nZXRUYWJsZSgp\nKSwgbnVsbCwgbnVsbCwKICAgICAgICAgICAgbnVsbCwgbnVsbCwgdHJ1ZSwg\nZmFsc2UsIDAsIExvbmcuTUFYX1ZBTFVFKTsKCiAgICAgICAgTG9nIGxvZyA9\nIGRpc2MuZ2V0TWFwcGluZ1JlcG9zaXRvcnkoKS5nZXRMb2coKTsKICAgICAg\nICBpZiAobG9nLmlzVHJhY2VFbmFibGVkKCkpCiAgICAgICAgICAgIGxvZy50\ncmFjZShfbG9jLmdldCgibG9hZC1zdWJzIiwgY29sLmdldFRhYmxlKCkuZ2V0\nRnVsbE5hbWUoKSkpOwoKICAgICAgICBDbGFzc0xvYWRlciBsb2FkZXIgPSBn\nZXRDbGFzc0xvYWRlcihzdG9yZSk7CiAgICAgICAgQ29ubmVjdGlvbiBjb25u\nID0gc3RvcmUuZ2V0Q29ubmVjdGlvbigpOwogICAgICAgIFByZXBhcmVkU3Rh\ndGVtZW50IHN0bW50ID0gbnVsbDsKICAgICAgICBSZXN1bHRTZXQgcnMgPSBu\ndWxsOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHN0bW50ID0gc2VsZWN0\nLnByZXBhcmVTdGF0ZW1lbnQoY29ubik7CiAgICAgICAgICAgIHJzID0gc3Rt\nbnQuZXhlY3V0ZVF1ZXJ5KCk7CiAgICAgICAgICAgIFN0cmluZyBjbGFzc05h\nbWU7CiAgICAgICAgICAgIHdoaWxlIChycy5uZXh0KCkpIHsKICAgICAgICAg\nICAgICAgIGNsYXNzTmFtZSA9IGRpY3QuZ2V0U3RyaW5nKHJzLCAxKTsKICAg\nICAgICAgICAgICAgIGlmIChTdHJpbmdVdGlscy5pc0VtcHR5KGNsYXNzTmFt\nZSkpCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IENsYXNzTm90Rm91\nbmRFeGNlcHRpb24oX2xvYy5nZXQoIm5vLWNsYXNzLW5hbWUiLAogICAgICAg\nICAgICAgICAgICAgICAgICBkaXNjLmdldENsYXNzTWFwcGluZygpLCBjb2wp\nLmdldE1lc3NhZ2UoKSk7CiAgICAgICAgICAgICAgICBDbGFzcy5mb3JOYW1l\nKGNsYXNzTmFtZSwgdHJ1ZSwgbG9hZGVyKTsKICAgICAgICAgICAgfQogICAg\nICAgICAgICBkaXNjLnNldFN1YmNsYXNzZXNMb2FkZWQodHJ1ZSk7CiAgICAg\nICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgaWYgKHJzICE9IG51bGwpCiAg\nICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHJzLmNs\nb3NlKCk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24g\nc2UpIHsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHN0bW50\nICE9IG51bGwpCiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAg\nICAgICAgIHN0bW50LmNsb3NlKCk7CiAgICAgICAgICAgICAgICB9IGNhdGNo\nIChTUUxFeGNlcHRpb24gc2UpIHsKICAgICAgICAgICAgICAgIH0KICAgICAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbm4uY2xvc2UoKTsKICAg\nICAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIHNlKSB7CiAgICAgICAg\nICAgIH0KICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4g\ndGhlIGNsYXNzIGxvYWRlciB0byB1c2UgZm9yIGxvYWRpbmcgY2xhc3MgbmFt\nZXMuCiAgICAgKi8KICAgIHByaXZhdGUgQ2xhc3NMb2FkZXIgZ2V0Q2xhc3NM\nb2FkZXIoSkRCQ1N0b3JlIHN0b3JlKSB7CiAgICAgICAgcmV0dXJuIHN0b3Jl\nLmdldENvbmZpZ3VyYXRpb24oKS5nZXRDbGFzc1Jlc29sdmVySW5zdGFuY2Uo\nKS4KICAgICAgICAgICAgZ2V0Q2xhc3NMb2FkZXIoZGlzYy5nZXRDbGFzc01h\ncHBpbmcoKS5nZXREZXNjcmliZWRUeXBlKCksCiAgICAgICAgICAgICAgICBz\ndG9yZS5nZXRDb250ZXh0KCkuZ2V0Q2xhc3NMb2FkZXIoKSk7CiAgICB9Cn0K\n","encoding":"base64"}

