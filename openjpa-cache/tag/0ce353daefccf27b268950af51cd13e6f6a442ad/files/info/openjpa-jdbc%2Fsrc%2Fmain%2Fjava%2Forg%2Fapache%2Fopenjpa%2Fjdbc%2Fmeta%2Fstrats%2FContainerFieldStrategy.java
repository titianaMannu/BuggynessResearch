{"sha":"6ee0293e1cc52671db1f2683f3b8797c39303f91","node_id":"MDQ6QmxvYjIwNjM2NDo2ZWUwMjkzZTFjYzUyNjcxZGIxZjI2ODNmM2I4Nzk3YzM5MzAzZjkx","size":4755,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/6ee0293e1cc52671db1f2683f3b8797c39303f91","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLm1ldGEuc3RyYXRzOwoKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLm1ldGEuQ2xhc3NNYXBwaW5nOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMubWV0YS5GaWVsZE1hcHBpbmc7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLlZhbHVlTWFwcGluZzsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5Db2x1bW47Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuRm9yZWlnbktl\neTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5EQkRpY3Rp\nb25hcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuSm9p\nbnM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuU1FMQnVm\nZmVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNlbGVj\ndDsKCi8qKgogKiBBbiBhYnN0cmFjdCBjb250YWluZXIgbWFwcGluZyB0aGF0\nIGhhbmRsZXMgdHJhdmVyc2luZyB0aGUKICogam9pbiB0byBleGFtaW5lIHRo\nZSBzaXplIG9mIHRoZSByZWxhdGlvbi4KICoKICogQGF1dGhvciBNYXJjIFBy\ndWQnaG9tbWVhdXgKICovCnB1YmxpYyBhYnN0cmFjdCBjbGFzcyBDb250YWlu\nZXJGaWVsZFN0cmF0ZWd5CiAgICBleHRlbmRzIEFic3RyYWN0RmllbGRTdHJh\ndGVneSB7CgogICAgLyoqCiAgICAgKiBSZXR1cm4gYWxsIGluZGVwZW5kZW50\nIG1hcHBpbmdzIHRvIHdoaWNoIHRoaXMgc3RyYXRlZ3kgbXVzdCBqb2luIGlu\nCiAgICAgKiBvcmRlciB0byBhY2Nlc3MgY29sbGVjdGlvbiBlbGVtZW50cywg\nb3IgZW1wdHkgYXJyYXkgaWYgbm9uZS4KICAgICAqCiAgICAgKiBAcGFyYW0g\ndHJhdmVyc2Ugd2hldGhlciB3ZSdyZSB0cmF2ZXJzaW5nIHRocm91Z2ggdG8g\ndGhlIHJlbGF0ZWQgdHlwZQogICAgICogQHNlZSBWYWx1ZU1hcHBpbmcjZ2V0\nSW5kZXBlbmRlbnRUeXBlTWFwcGluZ3MKICAgICAqIEBzZWUgQ2xhc3NNYXBw\naW5nI0VNUFRZX01BUFBJTkdTCiAgICAgKi8KICAgIHByb3RlY3RlZCBhYnN0\ncmFjdCBDbGFzc01hcHBpbmdbXSBnZXRJbmRlcGVuZGVudEVsZW1lbnRNYXBw\naW5ncwogICAgICAgIChib29sZWFuIHRyYXZlcnNlKTsKCiAgICBwdWJsaWMg\ndm9pZCBhcHBlbmRJc0VtcHR5KFNRTEJ1ZmZlciBzcWwsIFNlbGVjdCBzZWws\nIEpvaW5zIGpvaW5zKSB7CiAgICAgICAgdGVzdEVtcHR5KHNxbCwgc2VsLCBq\nb2lucywgdHJ1ZSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgYXBwZW5kSXNO\nb3RFbXB0eShTUUxCdWZmZXIgc3FsLCBTZWxlY3Qgc2VsLCBKb2lucyBqb2lu\ncykgewogICAgICAgIHRlc3RFbXB0eShzcWwsIHNlbCwgam9pbnMsIGZhbHNl\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBhcHBlbmRJc051bGwoU1FMQnVm\nZmVyIHNxbCwgU2VsZWN0IHNlbCwgSm9pbnMgam9pbnMpIHsKICAgICAgICB0\nZXN0RW1wdHkoc3FsLCBzZWwsIGpvaW5zLCB0cnVlKTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBhcHBlbmRJc05vdE51bGwoU1FMQnVmZmVyIHNxbCwgU2Vs\nZWN0IHNlbCwgSm9pbnMgam9pbnMpIHsKICAgICAgICB0ZXN0RW1wdHkoc3Fs\nLCBzZWwsIGpvaW5zLCBmYWxzZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBB\ncHBlbmRzIFNRTCBmb3IgYSBzdWItc2VsZWN0IHRlc3Rpbmcgd2hldGhlciB0\naGUgY29udGFpbmVyIGlzIGVtcHR5LgogICAgICovCiAgICBwcml2YXRlIHZv\naWQgdGVzdEVtcHR5KFNRTEJ1ZmZlciBzcWwsIFNlbGVjdCBzZWwsIEpvaW5z\nIGpvaW5zLAogICAgICAgIGJvb2xlYW4gZW1wdHkpIHsKICAgICAgICBpZiAo\nZW1wdHkpCiAgICAgICAgICAgIHNxbC5hcHBlbmQoIjAgPSAiKTsKICAgICAg\nICBlbHNlCiAgICAgICAgICAgIHNxbC5hcHBlbmQoIjAgPCAiKTsKCiAgICAg\nICAgYXBwZW5kU2l6ZShzcWwsIHNlbCwgam9pbnMpOwogICAgfQoKICAgIHBy\nb3RlY3RlZCBhYnN0cmFjdCBGb3JlaWduS2V5IGdldEpvaW5Gb3JlaWduS2V5\nKCk7CgogICAgcHVibGljIHZvaWQgYXBwZW5kU2l6ZShTUUxCdWZmZXIgc3Fs\nLCBTZWxlY3Qgc2VsLCBKb2lucyBqb2lucykgewogICAgICAgIERCRGljdGlv\nbmFyeSBkaWN0ID0gZmllbGQuZ2V0TWFwcGluZ1JlcG9zaXRvcnkoKS5nZXRE\nQkRpY3Rpb25hcnkoKTsKICAgICAgICBkaWN0LmFzc2VydFN1cHBvcnQoZGlj\ndC5zdXBwb3J0c1N1YnNlbGVjdCwgIlN1cHBvcnRzU3Vic2VsZWN0Iik7Cgog\nICAgICAgIENsYXNzTWFwcGluZ1tdIGluZCA9IGdldEluZGVwZW5kZW50RWxl\nbWVudE1hcHBpbmdzKGZhbHNlKTsKICAgICAgICBpZiAoaW5kICE9IG51bGwg\nJiYgaW5kLmxlbmd0aCA+IDEpCiAgICAgICAgICAgIHRocm93IFJlbGF0aW9u\nU3RyYXRlZ2llcy51bmpvaW5hYmxlKGZpZWxkKTsKCiAgICAgICAgRm9yZWln\nbktleSBmayA9IGdldEpvaW5Gb3JlaWduS2V5KCk7CiAgICAgICAgYXBwZW5k\nSm9pbkNvdW50KHNxbCwgc2VsLCBqb2lucywgZGljdCwgZmllbGQsIGZrKTsK\nICAgIH0KCiAgICBwcm90ZWN0ZWQgc3RhdGljIHZvaWQgYXBwZW5kSm9pbkNv\ndW50KFNRTEJ1ZmZlciBzcWwsIFNlbGVjdCBzZWwsCiAgICAgICAgSm9pbnMg\nam9pbnMsIERCRGljdGlvbmFyeSBkaWN0LCBGaWVsZE1hcHBpbmcgZmllbGQs\nIEZvcmVpZ25LZXkgZmspIHsKICAgICAgICBTdHJpbmcgZnVsbFRhYmxlID0g\nZGljdC5nZXRGdWxsTmFtZShmay5nZXRUYWJsZSgpLCBmYWxzZSk7CiAgICAg\nICAgc3FsLmFwcGVuZCgiKFNFTEVDVCBDT1VOVCgqKSBGUk9NICIpLmFwcGVu\nZChmdWxsVGFibGUpLgogICAgICAgICAgICBhcHBlbmQoIiBXSEVSRSAiKTsK\nICAgICAgICBhcHBlbmRVbmFsaWFzZWRKb2luKHNxbCwgc2VsLCBqb2lucywg\nZGljdCwgZmllbGQsIGZrKTsKICAgICAgICBzcWwuYXBwZW5kKCIpIik7CiAg\nICB9CgogICAgcHVibGljIHN0YXRpYyB2b2lkIGFwcGVuZFVuYWxpYXNlZEpv\naW4oU1FMQnVmZmVyIHNxbCwgU2VsZWN0IHNlbCwKICAgICAgICBKb2lucyBq\nb2lucywgREJEaWN0aW9uYXJ5IGRpY3QsIEZpZWxkTWFwcGluZyBmaWVsZCwg\nRm9yZWlnbktleSBmaykgewogICAgICAgIFN0cmluZyBmdWxsVGFibGUgPSBk\naWN0LmdldEZ1bGxOYW1lKGZrLmdldFRhYmxlKCksIGZhbHNlKTsKCiAgICAg\nICAgQ29sdW1uW10gY29scyA9IGZrLmdldENvbHVtbnMoKTsKICAgICAgICBD\nb2x1bW5bXSBwa3MgPSBmay5nZXRQcmltYXJ5S2V5Q29sdW1ucygpOwogICAg\nICAgIGludCBjb3VudCA9IDA7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkg\nPCBjb2xzLmxlbmd0aDsgaSsrLCBjb3VudCsrKSB7CiAgICAgICAgICAgIGlm\nIChjb3VudCA+IDApCiAgICAgICAgICAgICAgICBzcWwuYXBwZW5kKCIgQU5E\nICIpOwogICAgICAgICAgICBzcWwuYXBwZW5kKGZ1bGxUYWJsZSkuYXBwZW5k\nKCIuIikuYXBwZW5kKGNvbHNbaV0pLmFwcGVuZCgiID0gIikuCiAgICAgICAg\nICAgICAgICBhcHBlbmQoc2VsLmdldENvbHVtbkFsaWFzKHBrc1tpXSwgam9p\nbnMpKTsKICAgICAgICB9CgogICAgICAgIGNvbHMgPSBmay5nZXRDb25zdGFu\ndENvbHVtbnMoKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNvbHMu\nbGVuZ3RoOyBpKyssIGNvdW50KyspIHsKICAgICAgICAgICAgaWYgKGNvdW50\nID4gMCkKICAgICAgICAgICAgICAgIHNxbC5hcHBlbmQoIiBBTkQgIik7CiAg\nICAgICAgICAgIHNxbC5hcHBlbmQoZnVsbFRhYmxlKS5hcHBlbmQoIi4iKS5h\ncHBlbmQoY29sc1tpXSkuYXBwZW5kKCIgPSAiKS4KICAgICAgICAgICAgICAg\nIGFwcGVuZFZhbHVlKGZrLmdldENvbnN0YW50KGNvbHNbaV0pLCBjb2xzW2ld\nKTsKICAgICAgICB9CgogICAgICAgIHBrcyA9IGZrLmdldENvbnN0YW50UHJp\nbWFyeUtleUNvbHVtbnMoKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8\nIHBrcy5sZW5ndGg7IGkrKywgY291bnQrKykgewogICAgICAgICAgICBpZiAo\nY291bnQgPiAwKQogICAgICAgICAgICAgICAgc3FsLmFwcGVuZCgiIEFORCAi\nKTsKICAgICAgICAgICAgc3FsLmFwcGVuZChzZWwuZ2V0Q29sdW1uQWxpYXMo\ncGtzW2ldLCBqb2lucykpLmFwcGVuZCgiID0gIikuCiAgICAgICAgICAgICAg\nICBhcHBlbmRWYWx1ZShmay5nZXRQcmltYXJ5S2V5Q29uc3RhbnQocGtzW2ld\nKSwgcGtzW2ldKTsKICAgICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

