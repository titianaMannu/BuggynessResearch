{"sha":"ef96a9961fcf691b3d4204449a4888d592211457","node_id":"MDQ6QmxvYjIwNjM2NDplZjk2YTk5NjFmY2Y2OTFiM2Q0MjA0NDQ5YTQ4ODhkNTkyMjExNDU3","size":49169,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/ef96a9961fcf691b3d4204449a4888d592211457","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLm1ldGEuc3RyYXRzOwoKaW1wb3J0IGphdmEuaW8uSW5w\ndXRTdHJlYW07CmltcG9ydCBqYXZhLmlvLk9iamVjdE91dHB1dDsKaW1wb3J0\nIGphdmEuaW8uUmVhZGVyOwppbXBvcnQgamF2YS5tYXRoLkJpZ0RlY2ltYWw7\nCmltcG9ydCBqYXZhLm1hdGguQmlnSW50ZWdlcjsKaW1wb3J0IGphdmEuc3Fs\nLkFycmF5OwppbXBvcnQgamF2YS5zcWwuQmxvYjsKaW1wb3J0IGphdmEuc3Fs\nLkNsb2I7CmltcG9ydCBqYXZhLnNxbC5TUUxFeGNlcHRpb247CmltcG9ydCBq\nYXZhLnNxbC5UaW1lOwppbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wOwppbXBv\ncnQgamF2YS51dGlsLkJpdFNldDsKaW1wb3J0IGphdmEudXRpbC5DYWxlbmRh\ncjsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOwppbXBvcnQgamF2YS51\ndGlsLkRhdGU7CmltcG9ydCBqYXZhLnV0aWwuTG9jYWxlOwoKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5lbmhhbmNlLlBlcnNpc3RlbmNlQ2FwYWJsZTsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5lbmhhbmNlLlN0YXRlTWFuYWdl\ncjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmtlcm5lbC5KREJD\nRmV0Y2hDb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMua2VybmVsLkpEQkNTdG9yZTsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLm1ldGEuQ2xhc3NNYXBwaW5nOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmpkYmMubWV0YS5GaWVsZE1hcHBpbmc7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLkphdmFTUUxUeXBlczsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1ldGEuUmVsYXRpb25JZDsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1ldGEuVmFsdWVNYXBwaW5n\nSW5mbzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5D\nb2x1bW47CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEu\nQ29sdW1uSU87CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hl\nbWEuRm9yZWlnbktleTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLnNjaGVtYS5UYWJsZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLnNxbC5Kb2luczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNx\nbC5SZXN1bHQ7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwu\nUm93OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlJvd01h\nbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuU1FM\nQnVmZmVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNl\nbGVjdDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuRmV0Y2hD\nb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5l\nbC5PcGVuSlBBU3RhdGVNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmtlcm5lbC5QQ1N0YXRlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmtlcm5lbC5TdG9yZUNvbnRleHQ7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEubGliLnV0aWwuTG9jYWxpemVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLm1ldGEuQ2xhc3NNZXRhRGF0YTsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5tZXRhLkZpZWxkTWV0YURhdGE7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEubWV0YS5WYWx1ZU1ldGFEYXRhOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnV0aWwuSW50ZXJuYWxFeGNlcHRpb247CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEudXRpbC5NZXRhRGF0YUV4Y2VwdGlvbjsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS51dGlsLlVzZXJFeGNlcHRpb247CgovKioKICog\nTWFwcGluZyBmb3IgYW4gZW1iZWRkZWQgcGVyc2lzdGVudCBvYmplY3QuCiAq\nCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqIEBzaW5jZSAwLjQuMAogKi8KcHVi\nbGljIGNsYXNzIEVtYmVkRmllbGRTdHJhdGVneQogICAgZXh0ZW5kcyBBYnN0\ncmFjdEZpZWxkU3RyYXRlZ3kgewoKICAgIHByaXZhdGUgc3RhdGljIGZpbmFs\nIGludCBJTlNFUlQgPSAwOwogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgaW50\nIFVQREFURSA9IDE7CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBpbnQgREVM\nRVRFID0gMjsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6ZXIg\nX2xvYyA9IExvY2FsaXplci5mb3JQYWNrYWdlCiAgICAgICAgKEVtYmVkRmll\nbGRTdHJhdGVneS5jbGFzcyk7CgogICAgcHJpdmF0ZSBib29sZWFuIF9zeW50\naGV0aWMgPSBmYWxzZTsKCiAgICBwdWJsaWMgdm9pZCBtYXAoYm9vbGVhbiBh\nZGFwdCkgewogICAgICAgIGlmIChmaWVsZC5nZXRFbWJlZGRlZE1ldGFEYXRh\nKCkgPT0gbnVsbCkKICAgICAgICAgICAgdGhyb3cgbmV3IE1ldGFEYXRhRXhj\nZXB0aW9uKF9sb2MuZ2V0KCJub3QtZW1iZWQiLCBmaWVsZCkpOwogICAgICAg\nIGFzc2VydE5vdE1hcHBlZEJ5KCk7CgogICAgICAgIC8vIG1hcCBqb2luIGtl\neSAoaWYgYW55KQogICAgICAgIGZpZWxkLm1hcEpvaW4oYWRhcHQsIGZhbHNl\nKTsKICAgICAgICBmaWVsZC5nZXRLZXlNYXBwaW5nKCkuZ2V0VmFsdWVJbmZv\nKCkuYXNzZXJ0Tm9TY2hlbWFDb21wb25lbnRzCiAgICAgICAgICAgIChmaWVs\nZC5nZXRLZXkoKSwgIWFkYXB0KTsKICAgICAgICBmaWVsZC5nZXRFbGVtZW50\nTWFwcGluZygpLmdldFZhbHVlSW5mbygpLmFzc2VydE5vU2NoZW1hQ29tcG9u\nZW50cwogICAgICAgICAgICAoZmllbGQuZ2V0RWxlbWVudCgpLCAhYWRhcHQp\nOwoKICAgICAgICBWYWx1ZU1hcHBpbmdJbmZvIHZpbmZvID0gZmllbGQuZ2V0\nVmFsdWVJbmZvKCk7CiAgICAgICAgdmluZm8uYXNzZXJ0Tm9Kb2luKGZpZWxk\nLCB0cnVlKTsKICAgICAgICB2aW5mby5hc3NlcnROb0ZvcmVpZ25LZXkoZmll\nbGQsICFhZGFwdCk7CiAgICAgICAgdmluZm8uYXNzZXJ0Tm9VbmlxdWUoZmll\nbGQsICFhZGFwdCk7CiAgICAgICAgdmluZm8uYXNzZXJ0Tm9JbmRleChmaWVs\nZCwgIWFkYXB0KTsKCiAgICAgICAgLy8gYmVmb3JlIHdlIG1hcCB0aGUgbnVs\nbCBpbmRpY2F0b3IgY29sdW1uLCB3ZSBuZWVkIHRvIG1ha2Ugc3VyZSBvdXIK\nICAgICAgICAvLyB2YWx1ZSBpcyBtYXBwZWQgc28gd2UgY2FuIHRlbGwgd2hl\ndGhlciB0aGUgY29sdW1uIGlzIHN5bnRoZXRpYwogICAgICAgIGZpZWxkLmdl\ndFZhbHVlTWFwcGluZygpLnJlc29sdmUoZmllbGQuTU9ERV9NRVRBIHwgZmll\nbGQuTU9ERV9NQVBQSU5HKTsKICAgICAgICBDb2x1bW4gY29sID0gdmluZm8u\nZ2V0TnVsbEluZGljYXRvckNvbHVtbihmaWVsZCwgZmllbGQuZ2V0TmFtZSgp\nLAogICAgICAgICAgICBmaWVsZC5nZXRUYWJsZSgpLCBhZGFwdCk7CiAgICAg\nICAgaWYgKGNvbCAhPSBudWxsKSB7CiAgICAgICAgICAgIGZpZWxkLnNldENv\nbHVtbnMobmV3IENvbHVtbltdeyBjb2wgfSk7CiAgICAgICAgICAgIGZpZWxk\nLnNldENvbHVtbklPKHZpbmZvLmdldENvbHVtbklPKCkpOwogICAgICAgIH0K\nCiAgICAgICAgZmllbGQubWFwUHJpbWFyeUtleShhZGFwdCk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgaW5pdGlhbGl6ZSgpIHsKICAgICAgICBDb2x1bW5b\nXSBjb2xzID0gZmllbGQuZ2V0Q29sdW1ucygpOwogICAgICAgIGlmIChjb2xz\nLmxlbmd0aCAhPSAxKQogICAgICAgICAgICBfc3ludGhldGljID0gZmFsc2U7\nCiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIC8vIGRvIGFueSBvZiB0aGUg\nZW1iZWRkZWQgZmllbGQgbWFwcGluZ3MgdXNlIHRoaXMgY29sdW1uPwogICAg\nICAgICAgICAvLyBpZiBub3QsIGNvbnNpZGVyIGl0IHN5bnRoZXRpYwogICAg\nICAgICAgICBDb2x1bW4gY29sID0gY29sc1swXTsKICAgICAgICAgICAgYm9v\nbGVhbiBmb3VuZCA9IGZhbHNlOwogICAgICAgICAgICBGaWVsZE1hcHBpbmdb\nXSBmaWVsZHMgPSBmaWVsZC5nZXRFbWJlZGRlZE1hcHBpbmcoKS4KICAgICAg\nICAgICAgICAgIGdldEZpZWxkTWFwcGluZ3MoKTsKICAgICAgICAgICAgZm9y\nIChpbnQgaSA9IDA7ICFmb3VuZCAmJiBpIDwgZmllbGRzLmxlbmd0aDsgaSsr\nKSB7CiAgICAgICAgICAgICAgICBjb2xzID0gZmllbGRzW2ldLmdldENvbHVt\nbnMoKTsKICAgICAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgY29s\ncy5sZW5ndGg7IGorKykKICAgICAgICAgICAgICAgICAgICBpZiAoY29sc1tq\nXS5lcXVhbHMoY29sKSkKICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQg\nPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIF9zeW50aGV0aWMg\nPSAhZm91bmQ7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIGlu\nc2VydChPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBKREJDU3RvcmUgc3RvcmUs\nIFJvd01hbmFnZXIgcm0pCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7\nCiAgICAgICAgUm93IHJvdyA9IGZpZWxkLmdldFJvdyhzbSwgc3RvcmUsIHJt\nLCBSb3cuQUNUSU9OX0lOU0VSVCk7CiAgICAgICAgaWYgKHJvdyA9PSBudWxs\nKQogICAgICAgICAgICByZXR1cm47CgogICAgICAgIE9wZW5KUEFTdGF0ZU1h\nbmFnZXIgZW0gPSBzdG9yZS5nZXRDb250ZXh0KCkuZ2V0U3RhdGVNYW5hZ2Vy\nCiAgICAgICAgICAgIChzbS5mZXRjaE9iamVjdChmaWVsZC5nZXRJbmRleCgp\nKSk7CiAgICAgICAgaW5zZXJ0KHNtLCBlbSwgc3RvcmUsIHJtLCByb3cpOwog\nICAgfQoKICAgIC8qKgogICAgICogSW5zZXJ0IGFuIGVtYmVkZGVkIG9iamVj\ndC4KICAgICAqCiAgICAgKiBAcGFyYW0gb3duZXIgdGhlIG93bmluZyBzdGF0\nZSBtYW5hZ2VyCiAgICAgKiBAcGFyYW0gc20gdGhlIGVtYmVkZGVkIHN0YXRl\nIG1hbmFnZXIsIG9yIG51bGwgaWYgdGhlIHZhbHVlIGlzIG51bGwKICAgICAq\nIEBwYXJhbSBybSB0aGUgcm93IG1hbmFnZXIKICAgICAqIEBwYXJhbSByb3cg\nZXhwZWN0ZWQgcm93IGZvciB0aGlzIGVtYmVkZGVkIHZhbHVlCiAgICAgKi8K\nICAgIHB1YmxpYyB2b2lkIGluc2VydChPcGVuSlBBU3RhdGVNYW5hZ2VyIG93\nbmVyLCBPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLAogICAgICAgIEpEQkNTdG9y\nZSBzdG9yZSwgUm93TWFuYWdlciBybSwgUm93IHJvdykKICAgICAgICB0aHJv\nd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBPcGVuSlBBU3RhdGVNYW5hZ2Vy\nIGVtID0gc207CiAgICAgICAgaWYgKGVtID09IG51bGwpCiAgICAgICAgICAg\nIGVtID0gbmV3IE51bGxFbWJlZGRlZFN0YXRlTWFuYWdlcihvd25lciwgZmll\nbGQpOwogICAgICAgIHJtID0gbmV3IEVtYmVkZGVkUm93TWFuYWdlcihybSwg\ncm93KTsKICAgICAgICBGaWVsZE1hcHBpbmdbXSBmaWVsZHMgPSBmaWVsZC5n\nZXRFbWJlZGRlZE1hcHBpbmcoKS5nZXRGaWVsZE1hcHBpbmdzKCk7CiAgICAg\nICAgZm9yIChpbnQgaSA9IDA7IGkgPCBmaWVsZHMubGVuZ3RoOyBpKyspCiAg\nICAgICAgICAgIGlmICghQm9vbGVhbi5UUlVFLmVxdWFscyhmaWVsZHNbaV0u\naXNDdXN0b21JbnNlcnQoZW0sIHN0b3JlKSkpCiAgICAgICAgICAgICAgICBm\naWVsZHNbaV0uaW5zZXJ0KGVtLCBzdG9yZSwgcm0pOwoKICAgICAgICBpZiAo\nZmllbGQuZ2V0Q29sdW1uSU8oKS5pc0luc2VydGFibGUoMCwgdHJ1ZSkpCiAg\nICAgICAgICAgIHNldE51bGxJbmRpY2F0b3JDb2x1bW4oc20sIHJvdyk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgdXBkYXRlKE9wZW5KUEFTdGF0ZU1hbmFn\nZXIgc20sIEpEQkNTdG9yZSBzdG9yZSwgUm93TWFuYWdlciBybSkKICAgICAg\nICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBPcGVuSlBBU3RhdGVN\nYW5hZ2VyIGVtID0gc3RvcmUuZ2V0Q29udGV4dCgpLmdldFN0YXRlTWFuYWdl\ncgogICAgICAgICAgICAoc20uZmV0Y2hPYmplY3QoZmllbGQuZ2V0SW5kZXgo\nKSkpOwogICAgICAgIGJvb2xlYW4gbmV3VmFsID0gZW0gPT0gbnVsbCB8fCBl\nbS5nZXRQQ1N0YXRlKCkgPT0gUENTdGF0ZS5FQ09QWTsKCiAgICAgICAgUm93\nIHJvdyA9IG51bGw7CiAgICAgICAgaWYgKG5ld1ZhbCAmJiBmaWVsZC5nZXRK\nb2luRm9yZWlnbktleSgpICE9IG51bGwKICAgICAgICAgICAgJiYgZmllbGQu\naXNKb2luT3V0ZXIoKSkgewogICAgICAgICAgICAvLyBpZiBvdXIgcmVjb3Jk\nIGlzIGluIGFuIG91dGVyLWpvaW5lZCByZWxhdGVkIHRhYmxlIGFuZCB3ZSdy\nZSBub3QKICAgICAgICAgICAgLy8gdXBkYXRpbmcgYW4gZXhpc3RpbmcgdmFs\ndWUsIGRlbGV0ZSB0aGUgb2xkIG9uZQogICAgICAgICAgICBSb3cgZGVsID0g\ncm0uZ2V0Um93KGZpZWxkLmdldFRhYmxlKCksIFJvdy5BQ1RJT05fREVMRVRF\nLCBzbSwgdHJ1ZSk7CiAgICAgICAgICAgIGRlbC53aGVyZUZvcmVpZ25LZXko\nZmllbGQuZ2V0Sm9pbkZvcmVpZ25LZXkoKSwgc20pOwogICAgICAgICAgICBk\nZWxldGUoc20sIG51bGwsIHN0b3JlLCBybSwgZGVsKTsKCiAgICAgICAgICAg\nIC8vIGluc2VydCB0aGUgbmV3IHZhbHVlCiAgICAgICAgICAgIHJvdyA9IHJt\nLmdldFJvdyhmaWVsZC5nZXRUYWJsZSgpLCBSb3cuQUNUSU9OX0lOU0VSVCwg\nc20sCiAgICAgICAgICAgICAgICBlbSAhPSBudWxsKTsKICAgICAgICB9IGVs\nc2UKICAgICAgICAgICAgcm93ID0gcm0uZ2V0Um93KGZpZWxkLmdldFRhYmxl\nKCksIFJvdy5BQ1RJT05fVVBEQVRFLCBzbSwgdHJ1ZSk7CiAgICAgICAgaWYg\nKHJvdyA9PSBudWxsKQogICAgICAgICAgICByZXR1cm47CgogICAgICAgIGlm\nIChyb3cuZ2V0QWN0aW9uKCkgPT0gUm93LkFDVElPTl9JTlNFUlQpCiAgICAg\nICAgICAgIGluc2VydChzbSwgZW0sIHN0b3JlLCBybSwgcm93KTsKICAgICAg\nICBlbHNlCiAgICAgICAgICAgIHVwZGF0ZShzbSwgZW0sIHN0b3JlLCBybSwg\ncm93KTsKICAgIH0KCiAgICAvKioKICAgICAqIFVwZGF0ZSBhbiBlbWJlZGRl\nZCBvYmplY3QuCiAgICAgKgogICAgICogQHBhcmFtIG93bmVyIHRoZSBvd25p\nbmcgc3RhdGUgbWFuYWdlcgogICAgICogQHBhcmFtIHNtIHRoZSBlbWJlZGRl\nZCBzdGF0ZSBtYW5hZ2VyLCBvciBudWxsIGlmIHRoZSB2YWx1ZSBpcyBudWxs\nCiAgICAgKiBAcGFyYW0gcm0gdGhlIHJvdyBtYW5hZ2VyCiAgICAgKiBAcGFy\nYW0gcm93IGV4cGVjdGVkIHJvdyBmb3IgdGhpcyBlbWJlZGRlZCB2YWx1ZQog\nICAgICovCiAgICBwdWJsaWMgdm9pZCB1cGRhdGUoT3BlbkpQQVN0YXRlTWFu\nYWdlciBvd25lciwgT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwKICAgICAgICBK\nREJDU3RvcmUgc3RvcmUsIFJvd01hbmFnZXIgcm0sIFJvdyByb3cpCiAgICAg\nICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgT3BlbkpQQVN0YXRl\nTWFuYWdlciBlbSA9IHNtOwogICAgICAgIGlmIChlbSA9PSBudWxsKQogICAg\nICAgICAgICBlbSA9IG5ldyBOdWxsRW1iZWRkZWRTdGF0ZU1hbmFnZXIob3du\nZXIsIGZpZWxkKTsKICAgICAgICBybSA9IG5ldyBFbWJlZGRlZFJvd01hbmFn\nZXIocm0sIHJvdyk7CiAgICAgICAgRmllbGRNYXBwaW5nW10gZmllbGRzID0g\nZmllbGQuZ2V0RW1iZWRkZWRNYXBwaW5nKCkuZ2V0RmllbGRNYXBwaW5ncygp\nOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZmllbGRzLmxlbmd0aDsg\naSsrKQogICAgICAgICAgICBpZiAoZW0uZ2V0RGlydHkoKS5nZXQoaSkKICAg\nICAgICAgICAgICAgICYmICFlbS5nZXRGbHVzaGVkKCkuZ2V0KGkpCiAgICAg\nICAgICAgICAgICAmJiAhQm9vbGVhbi5UUlVFLmVxdWFscyhmaWVsZHNbaV0u\naXNDdXN0b21VcGRhdGUoZW0sIHN0b3JlKSkpCiAgICAgICAgICAgICAgICBm\naWVsZHNbaV0udXBkYXRlKGVtLCBzdG9yZSwgcm0pOwoKICAgICAgICBpZiAo\nZmllbGQuZ2V0Q29sdW1uSU8oKS5pc1VwZGF0YWJsZSgwLCB0cnVlKSkKICAg\nICAgICAgICAgc2V0TnVsbEluZGljYXRvckNvbHVtbihzbSwgcm93KTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBkZWxldGUoT3BlbkpQQVN0YXRlTWFuYWdl\nciBzbSwgSkRCQ1N0b3JlIHN0b3JlLCBSb3dNYW5hZ2VyIHJtKQogICAgICAg\nIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIE9wZW5KUEFTdGF0ZU1h\nbmFnZXIgZW0gPSBudWxsOwogICAgICAgIGlmIChzbS5nZXRMb2FkZWQoKS5n\nZXQoZmllbGQuZ2V0SW5kZXgoKSkpCiAgICAgICAgICAgIGVtID0gc3RvcmUu\nZ2V0Q29udGV4dCgpLmdldFN0YXRlTWFuYWdlcihzbS5mZXRjaE9iamVjdAog\nICAgICAgICAgICAgICAgKGZpZWxkLmdldEluZGV4KCkpKTsKICAgICAgICBS\nb3cgcm93ID0gZmllbGQuZ2V0Um93KHNtLCBzdG9yZSwgcm0sIFJvdy5BQ1RJ\nT05fREVMRVRFKTsKICAgICAgICBkZWxldGUoc20sIGVtLCBzdG9yZSwgcm0s\nIHJvdyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBEZWxldGUgYW4gZW1iZWRk\nZWQgb2JqZWN0IHJlY29yZC4KICAgICAqCiAgICAgKiBAcGFyYW0gb3duZXIg\ndGhlIG93bmluZyBzdGF0ZSBtYW5hZ2VyCiAgICAgKiBAcGFyYW0gc20gdGhl\nIGVtYmVkZGVkIHN0YXRlIG1hbmFnZXIsIG9yIG51bGwgaWYgbm90IGtub3du\nCiAgICAgKiBAcGFyYW0gcm0gdGhlIHJvdyBtYW5hZ2VyCiAgICAgKiBAcGFy\nYW0gcm93IGV4cGVjdGVkIHJvdyBmb3IgdGhpcyBlbWJlZGRlZCB2YWx1ZQog\nICAgICovCiAgICBwdWJsaWMgdm9pZCBkZWxldGUoT3BlbkpQQVN0YXRlTWFu\nYWdlciBvd25lciwgT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwKICAgICAgICBK\nREJDU3RvcmUgc3RvcmUsIFJvd01hbmFnZXIgcm0sIFJvdyByb3cpCiAgICAg\nICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcm0gPSBuZXcgRW1i\nZWRkZWRSb3dNYW5hZ2VyKHJtLCByb3cpOwogICAgICAgIGlmIChzbSA9PSBu\ndWxsKQogICAgICAgICAgICBzbSA9IG5ldyBOdWxsRW1iZWRkZWRTdGF0ZU1h\nbmFnZXIob3duZXIsIGZpZWxkKTsKICAgICAgICBGaWVsZE1hcHBpbmdbXSBm\naWVsZHMgPSBmaWVsZC5nZXRFbWJlZGRlZE1hcHBpbmcoKS5nZXRGaWVsZE1h\ncHBpbmdzKCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBmaWVsZHMu\nbGVuZ3RoOyBpKyspCiAgICAgICAgICAgIGlmICghQm9vbGVhbi5UUlVFLmVx\ndWFscyhmaWVsZHNbaV0uaXNDdXN0b21EZWxldGUoc20sIHN0b3JlKSkpCiAg\nICAgICAgICAgICAgICBmaWVsZHNbaV0uZGVsZXRlKHNtLCBzdG9yZSwgcm0p\nOwogICAgfQoKICAgIC8qKgogICAgICogU2V0IHRoZSBwcm9wZXIgbnVsbCBp\nbmRpY2F0b3IgdmFsdWUgaW50byB0aGUgZ2l2ZW4gcm93LgogICAgICovCiAg\nICBwcml2YXRlIHZvaWQgc2V0TnVsbEluZGljYXRvckNvbHVtbihPcGVuSlBB\nU3RhdGVNYW5hZ2VyIHNtLCBSb3cgcm93KQogICAgICAgIHRocm93cyBTUUxF\neGNlcHRpb24gewogICAgICAgIGlmICghX3N5bnRoZXRpYykKICAgICAgICAg\nICAgcmV0dXJuOwoKICAgICAgICBDb2x1bW4gY29sID0gZmllbGQuZ2V0Q29s\ndW1ucygpWzBdOwogICAgICAgIE9iamVjdCB2YWwgPSAoKEVtYmVkZGVkQ2xh\nc3NTdHJhdGVneSkgZmllbGQuZ2V0RW1iZWRkZWRNYXBwaW5nKCkuCiAgICAg\nICAgICAgIGdldFN0cmF0ZWd5KCkpLmdldE51bGxJbmRpY2F0b3JWYWx1ZShz\nbSk7CiAgICAgICAgaWYgKHZhbCA9PSBudWxsKQogICAgICAgICAgICByb3cu\nc2V0TnVsbChjb2wsIHRydWUpOwogICAgICAgIGVsc2UKICAgICAgICAgICAg\ncm93LnNldE9iamVjdChjb2wsIHZhbCk7CiAgICB9CgogICAgcHVibGljIEJv\nb2xlYW4gaXNDdXN0b21JbnNlcnQoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwg\nSkRCQ1N0b3JlIHN0b3JlKSB7CiAgICAgICAgT3BlbkpQQVN0YXRlTWFuYWdl\nciBlbSA9IHNtLmdldENvbnRleHQoKS5nZXRTdGF0ZU1hbmFnZXIoc20uZmV0\nY2hPYmplY3QKICAgICAgICAgICAgKGZpZWxkLmdldEluZGV4KCkpKTsKICAg\nICAgICBCb29sZWFuIGN1c3RvbSA9IGlzQ3VzdG9tKElOU0VSVCwgc20sIGVt\nLCBzdG9yZSk7CiAgICAgICAgaWYgKEJvb2xlYW4uVFJVRS5lcXVhbHMoY3Vz\ndG9tKSAmJiBfc3ludGhldGljKQogICAgICAgICAgICByZXR1cm4gbnVsbDsK\nICAgICAgICByZXR1cm4gY3VzdG9tOwogICAgfQoKICAgIHB1YmxpYyBCb29s\nZWFuIGlzQ3VzdG9tVXBkYXRlKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIEpE\nQkNTdG9yZSBzdG9yZSkgewogICAgICAgIE9wZW5KUEFTdGF0ZU1hbmFnZXIg\nZW0gPSBzbS5nZXRDb250ZXh0KCkuZ2V0U3RhdGVNYW5hZ2VyKHNtLmZldGNo\nT2JqZWN0CiAgICAgICAgICAgIChmaWVsZC5nZXRJbmRleCgpKSk7CiAgICAg\nICAgQm9vbGVhbiBjdXN0b20gPSBpc0N1c3RvbShVUERBVEUsIHNtLCBlbSwg\nc3RvcmUpOwogICAgICAgIGlmIChCb29sZWFuLlRSVUUuZXF1YWxzKGN1c3Rv\nbSkgJiYgX3N5bnRoZXRpYykKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAg\nICAgICAgcmV0dXJuIGN1c3RvbTsKICAgIH0KCiAgICBwdWJsaWMgQm9vbGVh\nbiBpc0N1c3RvbURlbGV0ZShPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBKREJD\nU3RvcmUgc3RvcmUpIHsKICAgICAgICBPcGVuSlBBU3RhdGVNYW5hZ2VyIGVt\nID0gc20uZ2V0Q29udGV4dCgpLmdldFN0YXRlTWFuYWdlcihzbS5mZXRjaE9i\namVjdAogICAgICAgICAgICAoZmllbGQuZ2V0SW5kZXgoKSkpOwogICAgICAg\nIHJldHVybiBpc0N1c3RvbShERUxFVEUsIHNtLCBlbSwgc3RvcmUpOwogICAg\nfQoKICAgIC8qKgogICAgICogUmV0dXJuIHdoZXRoZXIgdGhlIGdpdmVuIGFj\ndGlvbiByZXF1aXJlcyBjdXN0b20gaGFuZGxpbmcgZm9yIGFueSBmaWVsZHMu\nCiAgICAgKi8KICAgIHByaXZhdGUgQm9vbGVhbiBpc0N1c3RvbShpbnQgYWN0\naW9uLCBPcGVuSlBBU3RhdGVNYW5hZ2VyIG93bmVyLAogICAgICAgIE9wZW5K\nUEFTdGF0ZU1hbmFnZXIgc20sIEpEQkNTdG9yZSBzdG9yZSkgewogICAgICAg\nIGlmIChzbSA9PSBudWxsKQogICAgICAgICAgICBzbSA9IG5ldyBOdWxsRW1i\nZWRkZWRTdGF0ZU1hbmFnZXIob3duZXIsIGZpZWxkKTsKICAgICAgICBib29s\nZWFuIGhhc0N1c3RvbSA9IGZhbHNlOwogICAgICAgIGJvb2xlYW4gaGFzU3Rk\nID0gZmFsc2U7CgogICAgICAgIEZpZWxkTWFwcGluZ1tdIGZpZWxkcyA9IGZp\nZWxkLmdldEVtYmVkZGVkTWFwcGluZygpLmdldEZpZWxkTWFwcGluZ3MoKTsK\nICAgICAgICBCb29sZWFuIGN1c3RvbSA9IG51bGw7CiAgICAgICAgZm9yIChp\nbnQgaSA9IDA7IGkgPCBmaWVsZHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAg\nICAgc3dpdGNoIChhY3Rpb24pIHsKICAgICAgICAgICAgICAgIGNhc2UgSU5T\nRVJUOgogICAgICAgICAgICAgICAgICAgIGN1c3RvbSA9IGZpZWxkc1tpXS5p\nc0N1c3RvbUluc2VydChzbSwgc3RvcmUpOwogICAgICAgICAgICAgICAgICAg\nIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSBVUERBVEU6CiAgICAgICAg\nICAgICAgICAgICAgY3VzdG9tID0gZmllbGRzW2ldLmlzQ3VzdG9tVXBkYXRl\nKHNtLCBzdG9yZSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAg\nICAgICAgICAgICBjYXNlIERFTEVURToKICAgICAgICAgICAgICAgICAgICBj\ndXN0b20gPSBmaWVsZHNbaV0uaXNDdXN0b21EZWxldGUoc20sIHN0b3JlKTsK\nICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAg\nICAgICAgICAgaWYgKCFCb29sZWFuLkZBTFNFLmVxdWFscyhjdXN0b20pKQog\nICAgICAgICAgICAgICAgaGFzQ3VzdG9tID0gdHJ1ZTsKICAgICAgICAgICAg\naWYgKCFCb29sZWFuLlRSVUUuZXF1YWxzKGN1c3RvbSkpCiAgICAgICAgICAg\nICAgICBoYXNTdGQgPSB0cnVlOwogICAgICAgIH0KCiAgICAgICAgaWYgKGhh\nc0N1c3RvbSAmJiBoYXNTdGQpCiAgICAgICAgICAgIHJldHVybiBudWxsOwog\nICAgICAgIHJldHVybiAoaGFzQ3VzdG9tKSA/IEJvb2xlYW4uVFJVRSA6IEJv\nb2xlYW4uRkFMU0U7CiAgICB9CgogICAgcHVibGljIHZvaWQgY3VzdG9tSW5z\nZXJ0KE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIEpEQkNTdG9yZSBzdG9yZSkK\nICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBPcGVuSlBB\nU3RhdGVNYW5hZ2VyIGVtID0gc3RvcmUuZ2V0Q29udGV4dCgpLmdldFN0YXRl\nTWFuYWdlcgogICAgICAgICAgICAoc20uZmV0Y2hPYmplY3QoZmllbGQuZ2V0\nSW5kZXgoKSkpOwogICAgICAgIGlmIChlbSA9PSBudWxsKQogICAgICAgICAg\nICBlbSA9IG5ldyBOdWxsRW1iZWRkZWRTdGF0ZU1hbmFnZXIoc20sIGZpZWxk\nKTsKICAgICAgICBGaWVsZE1hcHBpbmdbXSBmaWVsZHMgPSBmaWVsZC5nZXRF\nbWJlZGRlZE1hcHBpbmcoKS5nZXRGaWVsZE1hcHBpbmdzKCk7CiAgICAgICAg\nZm9yIChpbnQgaSA9IDA7IGkgPCBmaWVsZHMubGVuZ3RoOyBpKyspCiAgICAg\nICAgICAgIGlmICghQm9vbGVhbi5GQUxTRS5lcXVhbHMoZmllbGRzW2ldLmlz\nQ3VzdG9tSW5zZXJ0KGVtLCBzdG9yZSkpKQogICAgICAgICAgICAgICAgZmll\nbGRzW2ldLmN1c3RvbUluc2VydChlbSwgc3RvcmUpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIGN1c3RvbVVwZGF0ZShPcGVuSlBBU3RhdGVNYW5hZ2VyIHNt\nLCBKREJDU3RvcmUgc3RvcmUpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlv\nbiB7CiAgICAgICAgT3BlbkpQQVN0YXRlTWFuYWdlciBlbSA9IHN0b3JlLmdl\ndENvbnRleHQoKS5nZXRTdGF0ZU1hbmFnZXIKICAgICAgICAgICAgKHNtLmZl\ndGNoT2JqZWN0KGZpZWxkLmdldEluZGV4KCkpKTsKICAgICAgICBpZiAoZW0g\nPT0gbnVsbCkKICAgICAgICAgICAgZW0gPSBuZXcgTnVsbEVtYmVkZGVkU3Rh\ndGVNYW5hZ2VyKHNtLCBmaWVsZCk7CiAgICAgICAgRmllbGRNYXBwaW5nW10g\nZmllbGRzID0gZmllbGQuZ2V0RW1iZWRkZWRNYXBwaW5nKCkuZ2V0RmllbGRN\nYXBwaW5ncygpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZmllbGRz\nLmxlbmd0aDsgaSsrKQogICAgICAgICAgICBpZiAoZW0uZ2V0RGlydHkoKS5n\nZXQoaSkKICAgICAgICAgICAgICAgICYmICFlbS5nZXRGbHVzaGVkKCkuZ2V0\nKGkpCiAgICAgICAgICAgICAgICAmJiAhQm9vbGVhbi5GQUxTRS5lcXVhbHMo\nZmllbGRzW2ldLmlzQ3VzdG9tVXBkYXRlKGVtLCBzdG9yZSkpKQogICAgICAg\nICAgICAgICAgZmllbGRzW2ldLmN1c3RvbVVwZGF0ZShlbSwgc3RvcmUpOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIGN1c3RvbURlbGV0ZShPcGVuSlBBU3Rh\ndGVNYW5hZ2VyIHNtLCBKREJDU3RvcmUgc3RvcmUpCiAgICAgICAgdGhyb3dz\nIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgT3BlbkpQQVN0YXRlTWFuYWdlciBl\nbSA9IHN0b3JlLmdldENvbnRleHQoKS5nZXRTdGF0ZU1hbmFnZXIKICAgICAg\nICAgICAgKHNtLmZldGNoT2JqZWN0KGZpZWxkLmdldEluZGV4KCkpKTsKICAg\nICAgICBpZiAoZW0gPT0gbnVsbCkKICAgICAgICAgICAgZW0gPSBuZXcgTnVs\nbEVtYmVkZGVkU3RhdGVNYW5hZ2VyKHNtLCBmaWVsZCk7CiAgICAgICAgRmll\nbGRNYXBwaW5nW10gZmllbGRzID0gZmllbGQuZ2V0RW1iZWRkZWRNYXBwaW5n\nKCkuZ2V0RmllbGRNYXBwaW5ncygpOwogICAgICAgIGZvciAoaW50IGkgPSAw\nOyBpIDwgZmllbGRzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICBpZiAoIUJv\nb2xlYW4uRkFMU0UuZXF1YWxzKGZpZWxkc1tpXS5pc0N1c3RvbURlbGV0ZShl\nbSwgc3RvcmUpKSkKICAgICAgICAgICAgICAgIGZpZWxkc1tpXS5jdXN0b21E\nZWxldGUoZW0sIHN0b3JlKTsKICAgIH0KCiAgICBwdWJsaWMgaW50IHN1cHBv\ncnRzU2VsZWN0KFNlbGVjdCBzZWwsIGludCB0eXBlLCBPcGVuSlBBU3RhdGVN\nYW5hZ2VyIHNtLAogICAgICAgIEpEQkNTdG9yZSBzdG9yZSwgSkRCQ0ZldGNo\nQ29uZmlndXJhdGlvbiBmZXRjaCkgewogICAgICAgIGlmICh0eXBlID09IFNl\nbGVjdC5UWVBFX0pPSU5MRVNTICYmIHNlbC5pc1NlbGVjdGVkKGZpZWxkLmdl\ndFRhYmxlKCkpKQogICAgICAgICAgICByZXR1cm4gMTsKICAgICAgICByZXR1\ncm4gMDsKICAgIH0KCiAgICBwdWJsaWMgaW50IHNlbGVjdChTZWxlY3Qgc2Vs\nLCBPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBKREJDU3RvcmUgc3RvcmUsCiAg\nICAgICAgSkRCQ0ZldGNoQ29uZmlndXJhdGlvbiBmZXRjaCwgaW50IGVhZ2Vy\nTW9kZSkgewogICAgICAgIEpvaW5zIGpvaW5zID0gZmllbGQuam9pbihzZWwp\nOwogICAgICAgIHNlbC5zZWxlY3QoZmllbGQuZ2V0Q29sdW1ucygpLCBqb2lu\ncyk7IC8vIG51bGwgaW5kaWNhdG9yCgogICAgICAgIC8vIGxpbWl0IGVhZ2Vy\nIG1vZGUgdG8gam9pbiBiL2MgYXQgdGhpcyBwb2ludCB0aGUgc2VsZWN0IGhh\ncyBiZWVuCiAgICAgICAgLy8gbW9kaWZpZWQgYW5kIGFuIGF0dGVtcHQgdG8g\nY2xvbmUgaXQgZm9yIGEgdG8tbWFueSBlYWdlciBzZWxlY3QgY2FuCiAgICAg\nICAgLy8gcmVzdWx0IGluIGEgY2xvbmUgdGhhdCBwcm9kdWNlcyBpbnZhbGlk\nIFNRTAogICAgICAgIGVhZ2VyTW9kZSA9IE1hdGgubWluKGVhZ2VyTW9kZSwg\nSkRCQ0ZldGNoQ29uZmlndXJhdGlvbi5FQUdFUl9KT0lOKTsKICAgICAgICBz\nZWwuc2VsZWN0KGZpZWxkLmdldEVtYmVkZGVkTWFwcGluZygpLCBzZWwuU1VC\nU19FWEFDVCwgc3RvcmUsCiAgICAgICAgICAgIGZldGNoLCBlYWdlck1vZGUs\nIGpvaW5zKTsKICAgICAgICByZXR1cm4gMTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBsb2FkKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIEpEQkNTdG9yZSBz\ndG9yZSwKICAgICAgICBKREJDRmV0Y2hDb25maWd1cmF0aW9uIGZldGNoLCBS\nZXN1bHQgcmVzKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAg\nICAgIEJvb2xlYW4gaXNOdWxsID0gaW5kaWNhdGVzTnVsbChyZXMpOwogICAg\nICAgIGlmIChpc051bGwgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuOwoK\nICAgICAgICBpZiAoQm9vbGVhbi5UUlVFLmVxdWFscyhpc051bGwpKSB7CiAg\nICAgICAgICAgIHNtLnN0b3JlT2JqZWN0KGZpZWxkLmdldEluZGV4KCksIG51\nbGwpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICAv\nLyMjIyBub3RlOiB3aXRob3V0IGEgbnVsbCBpbmRpY2F0b3IgY29sdW1uLCB0\naGUgYWJvdmUgaW5kaWNhdGVzTnVsbCgpCiAgICAgICAgLy8jIyMgY2FsbCB3\naWxsIGFsd2F5cyByZXR1cm4gZmFsc2UsIG1lYW5pbmcgd2UgYWx3YXlzIGhh\ndmUgdG8gYXNzdW1lCiAgICAgICAgLy8jIyMgd2Ugc2VsZWN0ZWQgdGhlIGVt\nYmVkZGVkIG9iamVjdCBmaWVsZHMgYW5kIGxvYWQgdGhlIG9iamVjdAogICAg\nICAgIC8vIyMjIGltbWVkaWF0ZWx5OyB0aGlzIHdpbGwgYmUgaW5lZmZpY2ll\nbnQgd2hlbiB0aGUgZW1iZWRkZWQgb2JqZWN0CiAgICAgICAgLy8jIyMgd2Fz\nIG5vdCBzZWxlY3RlZCBhZnRlciBhbGwKCiAgICAgICAgU3RvcmVDb250ZXh0\nIGN0eCA9IHN0b3JlLmdldENvbnRleHQoKTsKICAgICAgICBPcGVuSlBBU3Rh\ndGVNYW5hZ2VyIGVtID0gY3R4LmVtYmVkKG51bGwsIG51bGwsIHNtLCBmaWVs\nZCk7CiAgICAgICAgc20uc3RvcmVPYmplY3QoZmllbGQuZ2V0SW5kZXgoKSwg\nZW0uZ2V0TWFuYWdlZEluc3RhbmNlKCkpOwoKICAgICAgICBGaWVsZE1hcHBp\nbmdbXSBmaWVsZHMgPSBmaWVsZC5nZXRFbWJlZGRlZE1hcHBpbmcoKS5nZXRG\naWVsZE1hcHBpbmdzKCk7CiAgICAgICAgT2JqZWN0IGVyZXMsIHByb2Nlc3Nl\nZDsKICAgICAgICBib29sZWFuIGxvYWRlZCA9IGZhbHNlOwogICAgICAgIGZv\nciAoaW50IGkgPSAwOyBpIDwgZmllbGRzLmxlbmd0aDsgaSsrKSB7CiAgICAg\nICAgICAgIGVyZXMgPSByZXMuZ2V0RWFnZXIoZmllbGRzW2ldKTsKICAgICAg\nICAgICAgcmVzLnN0YXJ0RGF0YVJlcXVlc3QoZmllbGRzW2ldKTsKICAgICAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGlmIChlcmVzID09IHJlcykK\nICAgICAgICAgICAgICAgICAgICBmaWVsZHNbaV0ubG9hZEVhZ2VySm9pbihl\nbSwgc3RvcmUsIGZldGNoLCByZXMpOwogICAgICAgICAgICAgICAgZWxzZSBp\nZiAoZXJlcyAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgcHJvY2Vz\nc2VkID0KICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzW2ldLmxvYWRF\nYWdlclBhcmFsbGVsKGVtLCBzdG9yZSwgZmV0Y2gsIGVyZXMpOwogICAgICAg\nICAgICAgICAgICAgIGlmIChwcm9jZXNzZWQgIT0gZXJlcykKICAgICAgICAg\nICAgICAgICAgICAgICAgcmVzLnB1dEVhZ2VyKGZpZWxkc1tpXSwgcHJvY2Vz\nc2VkKTsKICAgICAgICAgICAgICAgIH0gZWxzZQogICAgICAgICAgICAgICAg\nICAgIGZpZWxkc1tpXS5sb2FkKGVtLCBzdG9yZSwgZmV0Y2gsIHJlcyk7CiAg\nICAgICAgICAgICAgICBsb2FkZWQgfD0gZW0uZ2V0TG9hZGVkKCkuZ2V0KGkp\nOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgcmVz\nLmVuZERhdGFSZXF1ZXN0KCk7CiAgICAgICAgICAgIH0KICAgICAgICB9Cgog\nICAgICAgIC8vIGFmdGVyIGxvYWRpbmcgZXZlcnl0aGluZyBmcm9tIHJlc3Vs\ndCwgbG9hZCB0aGUgcmVzdCBvZiB0aGUKICAgICAgICAvLyBjb25maWd1cmVk\nIGZpZWxkcwogICAgICAgIGlmIChsb2FkZWQpCiAgICAgICAgICAgIGVtLmxv\nYWQoZmV0Y2gpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHdoZXRo\nZXIgdGhlIGdpdmVuIHJlc3VsdCBpbmRpY2F0ZXMgdGhhdCB0aGUgZW1iZWRk\nZWQgdmFsdWUgaXMKICAgICAqIG51bGwuCiAgICAgKgogICAgICogQHJldHVy\nbiB7QGxpbmsgQm9vbGVhbiNUUlVFfSBpZiB0aGUgdmFsdWUgaXMgbnVsbCwg\ne0BsaW5rIEJvb2xlYW4jRkFMU0V9CiAgICAgKiBpZiBpdCBpcyBub3QsIG9y\nIDxjb2RlPm51bGw8L2NvZGU+IGlmIHRoZSByZXN1bHQgZG9lcyBub3QKICAg\nICAqIGNvbnRhaW4gdGhlIGVtYmVkZGVkIHZhbHVlCiAgICAgKi8KICAgIHBy\naXZhdGUgQm9vbGVhbiBpbmRpY2F0ZXNOdWxsKFJlc3VsdCByZXMpCiAgICAg\nICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgQ29sdW1uW10gY29s\ncyA9IGZpZWxkLmdldENvbHVtbnMoKTsKICAgICAgICBpZiAoY29scy5sZW5n\ndGggIT0gMSkKICAgICAgICAgICAgcmV0dXJuIEJvb2xlYW4uRkFMU0U7CiAg\nICAgICAgaWYgKCFyZXMuY29udGFpbnMoY29sc1swXSkpCiAgICAgICAgICAg\nIHJldHVybiBudWxsOwoKICAgICAgICBPYmplY3Qgb2JqID0gcmVzLmdldE9i\namVjdChjb2xzWzBdLCAtMSwgKE9iamVjdCkgbnVsbCk7CiAgICAgICAgaWYg\nKCgoRW1iZWRkZWRDbGFzc1N0cmF0ZWd5KSBmaWVsZC5nZXRFbWJlZGRlZE1h\ncHBpbmcoKS5nZXRTdHJhdGVneSgpKS4KICAgICAgICAgICAgaW5kaWNhdGVz\nTnVsbChvYmopKQogICAgICAgICAgICByZXR1cm4gQm9vbGVhbi5UUlVFOwog\nICAgICAgIHJldHVybiBCb29sZWFuLkZBTFNFOwogICAgfQoKICAgIHB1Ymxp\nYyBPYmplY3QgdG9EYXRhU3RvcmVWYWx1ZShPYmplY3QgdmFsLCBKREJDU3Rv\ncmUgc3RvcmUpIHsKICAgICAgICBDbGFzc01hcHBpbmcgdHlwZSA9IGZpZWxk\nLmdldFR5cGVNYXBwaW5nKCk7CiAgICAgICAgcmV0dXJuIHR5cGUudG9EYXRh\nU3RvcmVWYWx1ZSh2YWwsIHR5cGUuZ2V0UHJpbWFyeUtleUNvbHVtbnMoKSwg\nc3RvcmUpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGFwcGVuZElzTnVsbChT\nUUxCdWZmZXIgc3FsLCBTZWxlY3Qgc2VsLCBKb2lucyBqb2lucykgewogICAg\nICAgIGFwcGVuZFRlc3ROdWxsKHNxbCwgc2VsLCBqb2lucywgdHJ1ZSk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgYXBwZW5kSXNOb3ROdWxsKFNRTEJ1ZmZl\nciBzcWwsIFNlbGVjdCBzZWwsIEpvaW5zIGpvaW5zKSB7CiAgICAgICAgYXBw\nZW5kVGVzdE51bGwoc3FsLCBzZWwsIGpvaW5zLCBmYWxzZSk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBBcHBlbmQgU1FMIHRvIHRlc3Qgd2hldGhlciB0aGUg\nZW1iZWRkZWQgb2JqZWN0IGlzIG51bGwuCiAgICAgKi8KICAgIHByaXZhdGUg\ndm9pZCBhcHBlbmRUZXN0TnVsbChTUUxCdWZmZXIgc3FsLCBTZWxlY3Qgc2Vs\nLCBKb2lucyBqb2lucywKICAgICAgICBib29sZWFuIGlzTnVsbCkgewogICAg\nICAgIENvbHVtbltdIGNvbHMgPSBmaWVsZC5nZXRDb2x1bW5zKCk7CiAgICAg\nICAgaWYgKGNvbHMubGVuZ3RoICE9IDEpIHsKICAgICAgICAgICAgaWYgKGlz\nTnVsbCkKICAgICAgICAgICAgICAgIHNxbC5hcHBlbmQoIjEgPD4gMSIpOwog\nICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBzcWwuYXBwZW5kKCIx\nID0gMSIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAg\nICBPYmplY3QgdmFsOwogICAgICAgIGlmIChjb2xzWzBdLmlzTm90TnVsbCgp\nKSB7CiAgICAgICAgICAgIGlmIChfc3ludGhldGljIHx8IGNvbHNbMF0uZ2V0\nRGVmYXVsdFN0cmluZygpID09IG51bGwpCiAgICAgICAgICAgICAgICB2YWwg\nPSBKYXZhU1FMVHlwZXMuZ2V0RW1wdHlWYWx1ZShjb2xzWzBdLmdldEphdmFU\neXBlKCkpOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB2YWwg\nPSBjb2xzWzBdLmdldERlZmF1bHQoKTsKICAgICAgICB9IGVsc2UKICAgICAg\nICAgICAgdmFsID0gbnVsbDsKCiAgICAgICAgam9pbnMgPSBqb2luKGpvaW5z\nLCBmYWxzZSk7CiAgICAgICAgc3FsLmFwcGVuZChzZWwuZ2V0Q29sdW1uQWxp\nYXMoY29sc1swXSwgam9pbnMpKTsKICAgICAgICBpZiAoaXNOdWxsICYmIHZh\nbCA9PSBudWxsKQogICAgICAgICAgICBzcWwuYXBwZW5kKCIgSVMgIik7CiAg\nICAgICAgZWxzZSBpZiAoaXNOdWxsKQogICAgICAgICAgICBzcWwuYXBwZW5k\nKCIgPSAiKTsKICAgICAgICBlbHNlIGlmICh2YWwgPT0gbnVsbCkKICAgICAg\nICAgICAgc3FsLmFwcGVuZCgiIElTIE5PVCAiKTsKICAgICAgICBlbHNlCiAg\nICAgICAgICAgIHNxbC5hcHBlbmQoIiA8PiAiKTsKICAgICAgICBzcWwuYXBw\nZW5kVmFsdWUodmFsLCBjb2xzWzBdKTsKICAgIH0KCiAgICBwdWJsaWMgSm9p\nbnMgam9pbihKb2lucyBqb2lucywgYm9vbGVhbiBmb3JjZU91dGVyKSB7CiAg\nICAgICAgcmV0dXJuIGZpZWxkLmpvaW4oam9pbnMsIGZvcmNlT3V0ZXIsIGZh\nbHNlKTsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IGxvYWRQcm9qZWN0aW9u\nKEpEQkNTdG9yZSBzdG9yZSwgSkRCQ0ZldGNoQ29uZmlndXJhdGlvbiBmZXRj\naCwKICAgICAgICBSZXN1bHQgcmVzLCBKb2lucyBqb2lucykKICAgICAgICB0\naHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICB0aHJvdyBuZXcgVXNlckV4\nY2VwdGlvbihfbG9jLmdldCgiY2FudC1wcm9qZWN0LW93bmVkIiwgZmllbGQp\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIFN0YXRlIG1hbmFnZXIgdGhhdCBy\nZXByZXNlbnRzIGEgbnVsbCBlbWJlZGRlZCBvYmplY3QuCiAgICAgKiBVc2Vk\nIHRvIHVwZGF0ZSBlbWJlZGRlZCBmaWVsZHMgd2hlbiB0aGUgZW1iZWRkZWQg\ndmFsdWUgaXMgbnVsbC4gVGhpcwogICAgICogc3RhdGUgbWFuYWdlciBkb2Vz\nbid0IHJlcXVpcmUgYWNjZXNzIHRvIHRoZSBvbGQgZW1iZWRkZWQgdmFsdWUs\nIGJlY2F1c2UKICAgICAqIGFsbCB1cGRhdGVzIGFyZSBmbHVzaGVkIGJlZm9y\nZSBhbGwgZGVsZXRlcywgc28gYWxsIGZvcmVpZ24ga2V5cyB3aWxsCiAgICAg\nKiBiZSBwcm9wZXJseSBudWxsZWQgYmVmb3JlIHRoZSByZWxhdGVkIG9iamVj\ndCBpcyBkZWxldGVkLiBIb3dldmVyLCB0aGlzCiAgICAgKiBzdGF0ZSBtYW5h\nZ2VyIHNob3VsZCBub3QgYmUgdXNlZCBpZiBwb3NzaWJsZSB3aGVuIHRoZSBw\nYXJlbnQgb2JqZWN0IGlzCiAgICAgKiBiZWluZyBkZWxldGVkOyBpbiB0aGF0\nIGNhc2UgaGF2aW5nIHRoZSBvcmlnaW5hbCBlbWJlZGRlZCBzdGF0ZSBtYW5h\nZ2VyCiAgICAgKiBpcyBwcmVmZXJhYmxlIHNvIHRoYXQgaXQgY2FuIHNldCBm\nb3JlaWduIGtleSByZWxhdGlvbnMgdG8gb3JkZXIgREVMRVRFCiAgICAgKiBz\ndGF0ZW1lbnRzIHRvIG1lZXQgY29uc3RyYWludHMuCiAgICAgKi8KICAgIHBy\naXZhdGUgc3RhdGljIGNsYXNzIE51bGxFbWJlZGRlZFN0YXRlTWFuYWdlcgog\nICAgICAgIGltcGxlbWVudHMgT3BlbkpQQVN0YXRlTWFuYWdlciB7CgogICAg\nICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIEJpdFNldCBFTVBUWV9CSVRTRVQg\nPSBuZXcgQml0U2V0KCk7CgogICAgICAgIHByaXZhdGUgZmluYWwgT3BlbkpQ\nQVN0YXRlTWFuYWdlciBfb3duZXI7CiAgICAgICAgcHJpdmF0ZSBmaW5hbCBW\nYWx1ZU1ldGFEYXRhIF92bWQ7CiAgICAgICAgcHJpdmF0ZSBCaXRTZXQgX2Z1\nbGwgPSBudWxsOwoKICAgICAgICAvKioKICAgICAgICAgKiBDb25zdHJ1Y3Rv\ncjsgc3VwcGx5IHRoZSBvd25lciBvZiB0aGUgbnVsbC9kZWxldGVkIGVtYmVk\nZGVkIHZhbHVlLAogICAgICAgICAqIGFuZCB0aGUgdmFsdWUgbWV0YWRhdGEu\nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIE51bGxFbWJlZGRlZFN0YXRl\nTWFuYWdlcihPcGVuSlBBU3RhdGVNYW5hZ2VyIG93bmVyLAogICAgICAgICAg\nICBWYWx1ZU1ldGFEYXRhIHZtZCkgewogICAgICAgICAgICBfb3duZXIgPSBv\nd25lcjsKICAgICAgICAgICAgX3ZtZCA9IHZtZDsKICAgICAgICB9CgogICAg\nICAgIHB1YmxpYyB2b2lkIGluaXRpYWxpemUoQ2xhc3MgZm9yVHlwZSwgUENT\ndGF0ZSBzdGF0ZSkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxF\neGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIGxv\nYWQoRmV0Y2hDb25maWd1cmF0aW9uIGZldGNoKSB7CiAgICAgICAgICAgIHRo\ncm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAg\nICAgcHVibGljIGJvb2xlYW4gYXNzaWduT2JqZWN0SWQoYm9vbGVhbiBmbHVz\naCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24o\nKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBPYmplY3QgZ2V0TWFuYWdl\nZEluc3RhbmNlKCkgewogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAg\nICB9CgogICAgICAgIHB1YmxpYyBQZXJzaXN0ZW5jZUNhcGFibGUgZ2V0UGVy\nc2lzdGVuY2VDYXBhYmxlKCkgewogICAgICAgICAgICByZXR1cm4gbnVsbDsK\nICAgICAgICB9CgogICAgICAgIHB1YmxpYyBDbGFzc01ldGFEYXRhIGdldE1l\ndGFEYXRhKCkgewogICAgICAgICAgICByZXR1cm4gX3ZtZC5nZXRFbWJlZGRl\nZE1ldGFEYXRhKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgT3BlbkpQ\nQVN0YXRlTWFuYWdlciBnZXRPd25lcigpIHsKICAgICAgICAgICAgcmV0dXJu\nIF9vd25lcjsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBWYWx1ZU1ldGFE\nYXRhIGdldE93bmVyTWV0YURhdGEoKSB7CiAgICAgICAgICAgIHJldHVybiBf\ndm1kOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIGJvb2xlYW4gaXNFbWJl\nZGRlZCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoK\nICAgICAgICBwdWJsaWMgYm9vbGVhbiBpc1RyYW5zYWN0aW9uYWwoKSB7CiAg\nICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgcHVi\nbGljIGJvb2xlYW4gaXNQZXJzaXN0ZW50KCkgewogICAgICAgICAgICByZXR1\ncm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBib29sZWFuIGlz\nTmV3KCkgewogICAgICAgICAgICByZXR1cm4gX293bmVyLmlzTmV3KCk7CiAg\nICAgICAgfQoKICAgICAgICBwdWJsaWMgYm9vbGVhbiBpc0RlbGV0ZWQoKSB7\nCiAgICAgICAgICAgIHJldHVybiBfb3duZXIuaXNEZWxldGVkKCk7CiAgICAg\nICAgfQoKICAgICAgICBwdWJsaWMgYm9vbGVhbiBpc0RldGFjaGVkKCkgewog\nICAgICAgICAgICByZXR1cm4gX293bmVyLmlzRGV0YWNoZWQoKTsKICAgICAg\nICB9CgogICAgICAgIHB1YmxpYyBib29sZWFuIGlzVmVyc2lvblVwZGF0ZVJl\ncXVpcmVkKCkgewogICAgICAgICAgICByZXR1cm4gX293bmVyLmlzVmVyc2lv\nblVwZGF0ZVJlcXVpcmVkKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMg\nYm9vbGVhbiBpc1ZlcnNpb25DaGVja1JlcXVpcmVkKCkgewogICAgICAgICAg\nICByZXR1cm4gX293bmVyLmlzVmVyc2lvbkNoZWNrUmVxdWlyZWQoKTsKICAg\nICAgICB9CgogICAgICAgIHB1YmxpYyBib29sZWFuIGlzRGlydHkoKSB7CiAg\nICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgcHVi\nbGljIGJvb2xlYW4gaXNGbHVzaGVkKCkgewogICAgICAgICAgICByZXR1cm4g\nX293bmVyLmlzRmx1c2hlZCgpOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIGJvb2xlYW4gaXNGbHVzaGVkRGlydHkoKSB7CiAgICAgICAgICAgIHJldHVy\nbiBpc0ZsdXNoZWQoKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBib29s\nZWFuIGlzUHJvdmlzaW9uYWwoKSB7CiAgICAgICAgICAgIHJldHVybiBfb3du\nZXIuaXNQcm92aXNpb25hbCgpOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIEJpdFNldCBnZXRMb2FkZWQoKSB7CiAgICAgICAgICAgIC8vIGNvbnNpZGVy\nIGV2ZXJ5dGhpbmcgbG9hZGVkCiAgICAgICAgICAgIGlmIChfZnVsbCA9PSBu\ndWxsKSB7CiAgICAgICAgICAgICAgICBGaWVsZE1ldGFEYXRhW10gZm1kcyA9\nIF92bWQuZ2V0RW1iZWRkZWRNZXRhRGF0YSgpLmdldEZpZWxkcygpOwogICAg\nICAgICAgICAgICAgX2Z1bGwgPSBuZXcgQml0U2V0KGZtZHMubGVuZ3RoKTsK\nICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZm1kcy5sZW5n\ndGg7IGkrKykKICAgICAgICAgICAgICAgICAgICBfZnVsbC5zZXQoaSk7CiAg\nICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIF9mdWxsOwogICAgICAg\nIH0KCiAgICAgICAgcHVibGljIEJpdFNldCBnZXREaXJ0eSgpIHsKICAgICAg\nICAgICAgLy8gY29uc2lkZXIgZXZlcnl0aGluZyBkaXJ0eQogICAgICAgICAg\nICBpZiAoX2Z1bGwgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgRmllbGRN\nZXRhRGF0YVtdIGZtZHMgPSBfdm1kLmdldEVtYmVkZGVkTWV0YURhdGEoKS5n\nZXRGaWVsZHMoKTsKICAgICAgICAgICAgICAgIF9mdWxsID0gbmV3IEJpdFNl\ndChmbWRzLmxlbmd0aCk7CiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0g\nMDsgaSA8IGZtZHMubGVuZ3RoOyBpKyspCiAgICAgICAgICAgICAgICAgICAg\nX2Z1bGwuc2V0KGkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVy\nbiBfZnVsbDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBCaXRTZXQgZ2V0\nRmx1c2hlZCgpIHsKICAgICAgICAgICAgcmV0dXJuIEVNUFRZX0JJVFNFVDsK\nICAgICAgICB9CgogICAgICAgIHB1YmxpYyBCaXRTZXQgZ2V0VW5sb2FkZWQo\nRmV0Y2hDb25maWd1cmF0aW9uIGZldGNoKSB7CiAgICAgICAgICAgIHRocm93\nIG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAg\ncHVibGljIE9iamVjdCBuZXdQcm94eShpbnQgZmllbGQpIHsKICAgICAgICAg\nICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoK\nICAgICAgICBwdWJsaWMgT2JqZWN0IG5ld0ZpZWxkUHJveHkoaW50IGZpZWxk\nKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigp\nOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIGJvb2xlYW4gaXNEZWZhdWx0\nVmFsdWUoaW50IGZpZWxkKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwog\nICAgICAgIH0KCiAgICAgICAgcHVibGljIFN0b3JlQ29udGV4dCBnZXRDb250\nZXh0KCkgewogICAgICAgICAgICByZXR1cm4gX293bmVyLmdldENvbnRleHQo\nKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBPYmplY3QgZ2V0SWQoKSB7\nCiAgICAgICAgICAgIHJldHVybiBfb3duZXIuZ2V0SWQoKTsKICAgICAgICB9\nCgogICAgICAgIHB1YmxpYyBPYmplY3QgZ2V0T2JqZWN0SWQoKSB7CiAgICAg\nICAgICAgIHJldHVybiBfb3duZXIuZ2V0T2JqZWN0SWQoKTsKICAgICAgICB9\nCgogICAgICAgIHB1YmxpYyB2b2lkIHNldE9iamVjdElkKE9iamVjdCBvaWQp\nIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7\nCiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgT2JqZWN0IGdldExvY2soKSB7\nCiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KCiAgICAgICAg\ncHVibGljIHZvaWQgc2V0TG9jayhPYmplY3QgbG9jaykgewogICAgICAgICAg\nICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9Cgog\nICAgICAgIHB1YmxpYyBPYmplY3QgZ2V0VmVyc2lvbigpIHsKICAgICAgICAg\nICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9p\nZCBzZXRWZXJzaW9uKE9iamVjdCB2ZXJzaW9uKSB7CiAgICAgICAgICAgIHRo\ncm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAg\nICAgcHVibGljIHZvaWQgc2V0TmV4dFZlcnNpb24oT2JqZWN0IHZlcnNpb24p\nIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7\nCiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgUENTdGF0ZSBnZXRQQ1N0YXRl\nKCkgewogICAgICAgICAgICByZXR1cm4gKF9vd25lci5pc0RlbGV0ZWQoKSkg\nPyBQQ1N0YXRlLkVERUxFVEVEIDogUENTdGF0ZS5FQ09QWTsKICAgICAgICB9\nCgogICAgICAgIHB1YmxpYyBPYmplY3QgZ2V0SW1wbERhdGEoKSB7CiAgICAg\nICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIE9iamVjdCBzZXRJbXBsRGF0YShPYmplY3QgZGF0YSwgYm9vbGVhbiBjYWNo\nZWFibGUpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0\naW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgYm9vbGVhbiBpc0lt\ncGxEYXRhQ2FjaGVhYmxlKCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7\nCiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgT2JqZWN0IGdldEltcGxEYXRh\nKGludCBmaWVsZCkgewogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAg\nICB9CgogICAgICAgIHB1YmxpYyBPYmplY3Qgc2V0SW1wbERhdGEoaW50IGZp\nZWxkLCBPYmplY3QgZGF0YSkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50\nZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBi\nb29sZWFuIGlzSW1wbERhdGFDYWNoZWFibGUoaW50IGZpZWxkKSB7CiAgICAg\nICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHB1Ymxp\nYyBPYmplY3QgZ2V0SW50ZXJtZWRpYXRlKGludCBmaWVsZCkgewogICAgICAg\nICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2\nb2lkIHNldEludGVybWVkaWF0ZShpbnQgZmllbGQsIE9iamVjdCB2YWx1ZSkg\newogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsK\nICAgICAgICB9CgogICAgICAgIHB1YmxpYyBib29sZWFuIGZldGNoQm9vbGVh\nbkZpZWxkKGludCBmaWVsZCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7\nCiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgYnl0ZSBmZXRjaEJ5dGVGaWVs\nZChpbnQgZmllbGQpIHsKICAgICAgICAgICAgcmV0dXJuIChieXRlKSAwOwog\nICAgICAgIH0KCiAgICAgICAgcHVibGljIGNoYXIgZmV0Y2hDaGFyRmllbGQo\naW50IGZpZWxkKSB7CiAgICAgICAgICAgIHJldHVybiAoY2hhcikgMDsKICAg\nICAgICB9CgogICAgICAgIHB1YmxpYyBkb3VibGUgZmV0Y2hEb3VibGVGaWVs\nZChpbnQgZmllbGQpIHsKICAgICAgICAgICAgcmV0dXJuIDBEOwogICAgICAg\nIH0KCiAgICAgICAgcHVibGljIGZsb2F0IGZldGNoRmxvYXRGaWVsZChpbnQg\nZmllbGQpIHsKICAgICAgICAgICAgcmV0dXJuIDBGOwogICAgICAgIH0KCiAg\nICAgICAgcHVibGljIGludCBmZXRjaEludEZpZWxkKGludCBmaWVsZCkgewog\nICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CgogICAgICAgIHB1Ymxp\nYyBsb25nIGZldGNoTG9uZ0ZpZWxkKGludCBmaWVsZCkgewogICAgICAgICAg\nICByZXR1cm4gMEw7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgT2JqZWN0\nIGZldGNoT2JqZWN0RmllbGQoaW50IGZpZWxkKSB7CiAgICAgICAgICAgIHJl\ndHVybiBudWxsOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHNob3J0IGZl\ndGNoU2hvcnRGaWVsZChpbnQgZmllbGQpIHsKICAgICAgICAgICAgcmV0dXJu\nIChzaG9ydCkgMDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBTdHJpbmcg\nZmV0Y2hTdHJpbmdGaWVsZChpbnQgZmllbGQpIHsKICAgICAgICAgICAgcmV0\ndXJuIG51bGw7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgT2JqZWN0IGZl\ndGNoRmllbGQoaW50IGZpZWxkLCBib29sZWFuIHRyYW5zaXRpb25zKSB7CiAg\nICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KCiAgICAgICAgcHVi\nbGljIHZvaWQgc3RvcmVCb29sZWFuRmllbGQoaW50IGZpZWxkLCBib29sZWFu\nIGV4dGVybmFsVmFsKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5h\nbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQg\nc3RvcmVCeXRlRmllbGQoaW50IGZpZWxkLCBieXRlIGV4dGVybmFsVmFsKSB7\nCiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwog\nICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc3RvcmVDaGFyRmllbGQo\naW50IGZpZWxkLCBjaGFyIGV4dGVybmFsVmFsKSB7CiAgICAgICAgICAgIHRo\ncm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAg\nICAgcHVibGljIHZvaWQgc3RvcmVEb3VibGVGaWVsZChpbnQgZmllbGQsIGRv\ndWJsZSBleHRlcm5hbFZhbCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50\nZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2\nb2lkIHN0b3JlRmxvYXRGaWVsZChpbnQgZmllbGQsIGZsb2F0IGV4dGVybmFs\nVmFsKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlv\nbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc3RvcmVJbnRG\naWVsZChpbnQgZmllbGQsIGludCBleHRlcm5hbFZhbCkgewogICAgICAgICAg\nICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9Cgog\nICAgICAgIHB1YmxpYyB2b2lkIHN0b3JlTG9uZ0ZpZWxkKGludCBmaWVsZCwg\nbG9uZyBleHRlcm5hbFZhbCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50\nZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2\nb2lkIHN0b3JlT2JqZWN0RmllbGQoaW50IGZpZWxkLCBPYmplY3QgZXh0ZXJu\nYWxWYWwpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0\naW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBzdG9yZVNo\nb3J0RmllbGQoaW50IGZpZWxkLCBzaG9ydCBleHRlcm5hbFZhbCkgewogICAg\nICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAg\nICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHN0b3JlU3RyaW5nRmllbGQoaW50\nIGZpZWxkLCBTdHJpbmcgZXh0ZXJuYWxWYWwpIHsKICAgICAgICAgICAgdGhy\nb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAgICAg\nICBwdWJsaWMgdm9pZCBzdG9yZUZpZWxkKGludCBmaWVsZCwgT2JqZWN0IHZh\nbHVlKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlv\nbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIGJvb2xlYW4gZmV0Y2hC\nb29sZWFuKGludCBmaWVsZCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7\nCiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgYnl0ZSBmZXRjaEJ5dGUoaW50\nIGZpZWxkKSB7CiAgICAgICAgICAgIHJldHVybiAoYnl0ZSkgMDsKICAgICAg\nICB9CgogICAgICAgIHB1YmxpYyBjaGFyIGZldGNoQ2hhcihpbnQgZmllbGQp\nIHsKICAgICAgICAgICAgcmV0dXJuIChjaGFyKSAwOwogICAgICAgIH0KCiAg\nICAgICAgcHVibGljIGRvdWJsZSBmZXRjaERvdWJsZShpbnQgZmllbGQpIHsK\nICAgICAgICAgICAgcmV0dXJuIDBEOwogICAgICAgIH0KCiAgICAgICAgcHVi\nbGljIGZsb2F0IGZldGNoRmxvYXQoaW50IGZpZWxkKSB7CiAgICAgICAgICAg\nIHJldHVybiAwRjsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBpbnQgZmV0\nY2hJbnQoaW50IGZpZWxkKSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAg\nICAgIH0KCiAgICAgICAgcHVibGljIGxvbmcgZmV0Y2hMb25nKGludCBmaWVs\nZCkgewogICAgICAgICAgICByZXR1cm4gMEw7CiAgICAgICAgfQoKICAgICAg\nICBwdWJsaWMgT2JqZWN0IGZldGNoT2JqZWN0KGludCBmaWVsZCkgewogICAg\nICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CgogICAgICAgIHB1Ymxp\nYyBzaG9ydCBmZXRjaFNob3J0KGludCBmaWVsZCkgewogICAgICAgICAgICBy\nZXR1cm4gKHNob3J0KSAwOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIFN0\ncmluZyBmZXRjaFN0cmluZyhpbnQgZmllbGQpIHsKICAgICAgICAgICAgcmV0\ndXJuIG51bGw7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgT2JqZWN0IGZl\ndGNoKGludCBmaWVsZCkgewogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAg\nICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHN0b3JlQm9vbGVhbihpbnQg\nZmllbGQsIGJvb2xlYW4gZXh0ZXJuYWxWYWwpIHsKICAgICAgICAgICAgdGhy\nb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAgICAg\nICBwdWJsaWMgdm9pZCBzdG9yZUJ5dGUoaW50IGZpZWxkLCBieXRlIGV4dGVy\nbmFsVmFsKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2Vw\ndGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc3RvcmVD\naGFyKGludCBmaWVsZCwgY2hhciBleHRlcm5hbFZhbCkgewogICAgICAgICAg\nICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9Cgog\nICAgICAgIHB1YmxpYyB2b2lkIHN0b3JlRG91YmxlKGludCBmaWVsZCwgZG91\nYmxlIGV4dGVybmFsVmFsKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnRl\ncm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZv\naWQgc3RvcmVGbG9hdChpbnQgZmllbGQsIGZsb2F0IGV4dGVybmFsVmFsKSB7\nCiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwog\nICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc3RvcmVJbnQoaW50IGZp\nZWxkLCBpbnQgZXh0ZXJuYWxWYWwpIHsKICAgICAgICAgICAgdGhyb3cgbmV3\nIEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJs\naWMgdm9pZCBzdG9yZUxvbmcoaW50IGZpZWxkLCBsb25nIGV4dGVybmFsVmFs\nKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigp\nOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc3RvcmVPYmplY3Qo\naW50IGZpZWxkLCBPYmplY3QgZXh0ZXJuYWxWYWwpIHsKICAgICAgICAgICAg\ndGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAg\nICAgICBwdWJsaWMgdm9pZCBzdG9yZVNob3J0KGludCBmaWVsZCwgc2hvcnQg\nZXh0ZXJuYWxWYWwpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFs\nRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBz\ndG9yZVN0cmluZyhpbnQgZmllbGQsIFN0cmluZyBleHRlcm5hbFZhbCkgewog\nICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAg\nICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHN0b3JlKGludCBmaWVsZCwg\nT2JqZWN0IHZhbHVlKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5h\nbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIE9iamVj\ndCBmZXRjaEluaXRpYWxGaWVsZChpbnQgZmllbGQpIHsKICAgICAgICAgICAg\ndGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAg\nICAgICBwdWJsaWMgdm9pZCBkaXJ0eShpbnQgZmllbGQpIHsKICAgICAgICAg\nICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoK\nICAgICAgICBwdWJsaWMgdm9pZCByZW1vdmVkKGludCBmaWVsZCwgT2JqZWN0\nIHJlbW92ZWQsIGJvb2xlYW4ga2V5KSB7CiAgICAgICAgICAgIHRocm93IG5l\ndyBJbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcHVi\nbGljIGJvb2xlYW4gYmVmb3JlUmVmcmVzaChib29sZWFuIHJlZnJlc2hBbGwp\nIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7\nCiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBzZXRSZW1vdGUoaW50\nIGZpZWxkLCBPYmplY3QgdmFsdWUpIHsKICAgICAgICAgICAgdGhyb3cgbmV3\nIEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAgICAgICAvLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAgICAgLy8gU3RhdGVN\nYW5hZ2VyIGltcGxlbWVudGF0aW9uCiAgICAgICAgLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLwoKICAgICAgICBwdWJsaWMgYnl0ZSByZXBsYWNl\nRmxhZ3MoKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2Vw\ndGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIE9iamVjdCBnZXRQ\nQ1ByaW1hcnlLZXkoT2JqZWN0IG9pZCwgaW50IGZpZWxkKSB7CiAgICAgICAg\nICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0K\nCiAgICAgICAgcHVibGljIFN0YXRlTWFuYWdlciByZXBsYWNlU3RhdGVNYW5h\nZ2VyKFN0YXRlTWFuYWdlciBzbSkgewogICAgICAgICAgICB0aHJvdyBuZXcg\nSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1Ymxp\nYyBPYmplY3QgZ2V0R2VuZXJpY0NvbnRleHQoKSB7CiAgICAgICAgICAgIHJl\ndHVybiBnZXRDb250ZXh0KCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMg\ndm9pZCBkaXJ0eShTdHJpbmcgZmllbGQpIHsKICAgICAgICAgICAgdGhyb3cg\nbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAgICAgICBw\ndWJsaWMgT2JqZWN0IGZldGNoT2JqZWN0SWQoKSB7CiAgICAgICAgICAgIHJl\ndHVybiBnZXRPYmplY3RJZCgpOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIHZvaWQgYWNjZXNzaW5nRmllbGQoaW50IGZpZWxkKSB7CiAgICAgICAgfQoK\nICAgICAgICBwdWJsaWMgYm9vbGVhbiBzZXJpYWxpemluZygpIHsKICAgICAg\nICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAg\nfQoKICAgICAgICBwdWJsaWMgYm9vbGVhbiB3cml0ZURldGFjaGVkKE9iamVj\ndE91dHB1dCBvdXQpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFs\nRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBw\ncm94eURldGFjaGVkRGVzZXJpYWxpemVkKGludCBpZHgpIHsKICAgICAgICAg\nICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoK\nICAgICAgICBwdWJsaWMgdm9pZCBzZXR0aW5nQm9vbGVhbkZpZWxkKFBlcnNp\nc3RlbmNlQ2FwYWJsZSBwYywgaW50IGZpZWxkLAogICAgICAgICAgICBib29s\nZWFuIHZhbDEsIGJvb2xlYW4gdmFsMiwgaW50IHNldCkgewogICAgICAgICAg\nICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9Cgog\nICAgICAgIHB1YmxpYyB2b2lkIHNldHRpbmdDaGFyRmllbGQoUGVyc2lzdGVu\nY2VDYXBhYmxlIHBjLCBpbnQgZmllbGQsCiAgICAgICAgICAgIGNoYXIgdmFs\nMSwgY2hhciB2YWwyLCBpbnQgc2V0KSB7CiAgICAgICAgICAgIHRocm93IG5l\ndyBJbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcHVi\nbGljIHZvaWQgc2V0dGluZ0J5dGVGaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUg\ncGMsIGludCBmaWVsZCwKICAgICAgICAgICAgYnl0ZSB2YWwxLCBieXRlIHZh\nbDIsIGludCBzZXQpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFs\nRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBz\nZXR0aW5nU2hvcnRGaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGludCBm\naWVsZCwKICAgICAgICAgICAgc2hvcnQgdmFsMSwgc2hvcnQgdmFsMiwgaW50\nIHNldCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRp\nb24oKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHNldHRpbmdJ\nbnRGaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGludCBmaWVsZCwKICAg\nICAgICAgICAgaW50IHZhbDEsIGludCB2YWwyLCBpbnQgc2V0KSB7CiAgICAg\nICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAg\nIH0KCiAgICAgICAgcHVibGljIHZvaWQgc2V0dGluZ0xvbmdGaWVsZChQZXJz\naXN0ZW5jZUNhcGFibGUgcGMsIGludCBmaWVsZCwKICAgICAgICAgICAgbG9u\nZyB2YWwxLCBsb25nIHZhbDIsIGludCBzZXQpIHsKICAgICAgICAgICAgdGhy\nb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAgICAg\nICBwdWJsaWMgdm9pZCBzZXR0aW5nRmxvYXRGaWVsZChQZXJzaXN0ZW5jZUNh\ncGFibGUgcGMsIGludCBmaWVsZCwKICAgICAgICAgICAgZmxvYXQgdmFsMSwg\nZmxvYXQgdmFsMiwgaW50IHNldCkgewogICAgICAgICAgICB0aHJvdyBuZXcg\nSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1Ymxp\nYyB2b2lkIHNldHRpbmdEb3VibGVGaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUg\ncGMsIGludCBmaWVsZCwKICAgICAgICAgICAgZG91YmxlIHZhbDEsIGRvdWJs\nZSB2YWwyLCBpbnQgc2V0KSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnRl\ncm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZv\naWQgc2V0dGluZ1N0cmluZ0ZpZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywg\naW50IGZpZWxkLAogICAgICAgICAgICBTdHJpbmcgdmFsMSwgU3RyaW5nIHZh\nbDIsIGludCBzZXQpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFs\nRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBz\nZXR0aW5nT2JqZWN0RmllbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQg\nZmllbGQsCiAgICAgICAgICAgIE9iamVjdCB2YWwxLCBPYmplY3QgdmFsMiwg\naW50IHNldCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNl\ncHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHByb3Zp\nZGVkQm9vbGVhbkZpZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywgaW50IGZp\nZWxkLAogICAgICAgICAgICBib29sZWFuIHZhbCkgewogICAgICAgICAgICB0\naHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAg\nICAgIHB1YmxpYyB2b2lkIHByb3ZpZGVkQ2hhckZpZWxkKFBlcnNpc3RlbmNl\nQ2FwYWJsZSBwYywgaW50IGZpZWxkLAogICAgICAgICAgICBjaGFyIHZhbCkg\newogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsK\nICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHByb3ZpZGVkQnl0ZUZp\nZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywgaW50IGZpZWxkLAogICAgICAg\nICAgICBieXRlIHZhbCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJu\nYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lk\nIHByb3ZpZGVkU2hvcnRGaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGlu\ndCBmaWVsZCwKICAgICAgICAgICAgc2hvcnQgdmFsKSB7CiAgICAgICAgICAg\nIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAg\nICAgICAgcHVibGljIHZvaWQgcHJvdmlkZWRJbnRGaWVsZChQZXJzaXN0ZW5j\nZUNhcGFibGUgcGMsIGludCBmaWVsZCwKICAgICAgICAgICAgaW50IHZhbCkg\newogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsK\nICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHByb3ZpZGVkTG9uZ0Zp\nZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywgaW50IGZpZWxkLAogICAgICAg\nICAgICBsb25nIHZhbCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJu\nYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lk\nIHByb3ZpZGVkRmxvYXRGaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGlu\ndCBmaWVsZCwKICAgICAgICAgICAgZmxvYXQgdmFsKSB7CiAgICAgICAgICAg\nIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAg\nICAgICAgcHVibGljIHZvaWQgcHJvdmlkZWREb3VibGVGaWVsZChQZXJzaXN0\nZW5jZUNhcGFibGUgcGMsIGludCBmaWVsZCwKICAgICAgICAgICAgZG91Ymxl\nIHZhbCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRp\nb24oKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHByb3ZpZGVk\nU3RyaW5nRmllbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgZmllbGQs\nCiAgICAgICAgICAgIFN0cmluZyB2YWwpIHsKICAgICAgICAgICAgdGhyb3cg\nbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAgICAgICBw\ndWJsaWMgdm9pZCBwcm92aWRlZE9iamVjdEZpZWxkKFBlcnNpc3RlbmNlQ2Fw\nYWJsZSBwYywgaW50IGZpZWxkLAogICAgICAgICAgICBPYmplY3QgdmFsKSB7\nCiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwog\nICAgICAgIH0KCiAgICAgICAgcHVibGljIGJvb2xlYW4gcmVwbGFjZUJvb2xl\nYW5GaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGludCBmaWVsZCkgewog\nICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAg\nICAgICB9CgogICAgICAgIHB1YmxpYyBjaGFyIHJlcGxhY2VDaGFyRmllbGQo\nUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgZmllbGQpIHsKICAgICAgICAg\nICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoK\nICAgICAgICBwdWJsaWMgYnl0ZSByZXBsYWNlQnl0ZUZpZWxkKFBlcnNpc3Rl\nbmNlQ2FwYWJsZSBwYywgaW50IGZpZWxkKSB7CiAgICAgICAgICAgIHRocm93\nIG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAg\ncHVibGljIHNob3J0IHJlcGxhY2VTaG9ydEZpZWxkKFBlcnNpc3RlbmNlQ2Fw\nYWJsZSBwYywgaW50IGZpZWxkKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJ\nbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIGludCByZXBsYWNlSW50RmllbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBp\nbnQgZmllbGQpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhj\nZXB0aW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgbG9uZyByZXBs\nYWNlTG9uZ0ZpZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywgaW50IGZpZWxk\nKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigp\nOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIGZsb2F0IHJlcGxhY2VGbG9h\ndEZpZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywgaW50IGZpZWxkKSB7CiAg\nICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwogICAg\nICAgIH0KCiAgICAgICAgcHVibGljIGRvdWJsZSByZXBsYWNlRG91YmxlRmll\nbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgZmllbGQpIHsKICAgICAg\nICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAg\nfQoKICAgICAgICBwdWJsaWMgU3RyaW5nIHJlcGxhY2VTdHJpbmdGaWVsZChQ\nZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGludCBmaWVsZCkgewogICAgICAgICAg\nICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9Cgog\nICAgICAgIHB1YmxpYyBPYmplY3QgcmVwbGFjZU9iamVjdEZpZWxkKFBlcnNp\nc3RlbmNlQ2FwYWJsZSBwYywgaW50IGZpZWxkKSB7CiAgICAgICAgICAgIHRo\ncm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0KICAgIH0K\nCiAgICAvKioKICAgICAqIFNwZWNpYWwgcm93IG1hbmFnZXIgdHlwZSB0aGF0\nIHVud3JhcHMgZW1iZWRkZWQgb2JqZWN0cy4KICAgICAqLwogICAgcHJpdmF0\nZSBzdGF0aWMgY2xhc3MgRW1iZWRkZWRSb3dNYW5hZ2VyCiAgICAgICAgaW1w\nbGVtZW50cyBSb3dNYW5hZ2VyIHsKCiAgICAgICAgcHJpdmF0ZSBmaW5hbCBS\nb3dNYW5hZ2VyIF9ybTsKICAgICAgICBwcml2YXRlIGZpbmFsIFJvdyBfcm93\nOwoKICAgICAgICBwdWJsaWMgRW1iZWRkZWRSb3dNYW5hZ2VyKFJvd01hbmFn\nZXIgZGVsZWdhdGUsIFJvdyByb3cpIHsKICAgICAgICAgICAgX3JtID0gZGVs\nZWdhdGU7CiAgICAgICAgICAgIF9yb3cgPSAocm93ID09IG51bGwpID8gbnVs\nbCA6IG5ldyBFbWJlZGRlZFJvdyhyb3cpOwogICAgICAgIH0KCiAgICAgICAg\ncHVibGljIGJvb2xlYW4gaGFzQXV0b0Fzc2lnbkNvbnN0cmFpbnRzKCkgewog\nICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBw\ndWJsaWMgQ29sbGVjdGlvbiBnZXRJbnNlcnRzKCkgewogICAgICAgICAgICB0\naHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAg\nICAgIHB1YmxpYyBDb2xsZWN0aW9uIGdldFVwZGF0ZXMoKSB7CiAgICAgICAg\nICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0K\nCiAgICAgICAgcHVibGljIENvbGxlY3Rpb24gZ2V0RGVsZXRlcygpIHsKICAg\nICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAg\nICAgfQoKICAgICAgICBwdWJsaWMgQ29sbGVjdGlvbiBnZXRTZWNvbmRhcnlV\ncGRhdGVzKCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNl\ncHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBDb2xsZWN0aW9u\nIGdldFNlY29uZGFyeURlbGV0ZXMoKSB7CiAgICAgICAgICAgIHRocm93IG5l\ndyBJbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcHVi\nbGljIENvbGxlY3Rpb24gZ2V0QWxsUm93VXBkYXRlcygpIHsKICAgICAgICAg\nICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoK\nICAgICAgICBwdWJsaWMgQ29sbGVjdGlvbiBnZXRBbGxSb3dEZWxldGVzKCkg\newogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsK\nICAgICAgICB9CgogICAgICAgIHB1YmxpYyBSb3cgZ2V0Um93KFRhYmxlIHRh\nYmxlLCBpbnQgYWN0aW9uLCBPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLAogICAg\nICAgICAgICBib29sZWFuIGNyZWF0ZSkgewogICAgICAgICAgICB3aGlsZSAo\nc20gIT0gbnVsbCAmJiBzbS5nZXRPd25lcigpICE9IG51bGwpCiAgICAgICAg\nICAgICAgICBzbSA9IHNtLmdldE93bmVyKCk7CiAgICAgICAgICAgIGlmIChf\ncm93ICE9IG51bGwgJiYgdGFibGUgPT0gX3Jvdy5nZXRUYWJsZSgpCiAgICAg\nICAgICAgICAgICAmJiBhY3Rpb24gPT0gX3Jvdy5nZXRBY3Rpb24oKSkKICAg\nICAgICAgICAgICAgIHJldHVybiBfcm93OwogICAgICAgICAgICByZXR1cm4g\nbmV3IEVtYmVkZGVkUm93KF9ybS5nZXRSb3codGFibGUsIGFjdGlvbiwgc20s\nIGNyZWF0ZSkpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIFJvdyBnZXRT\nZWNvbmRhcnlSb3coVGFibGUgdGFibGUsIGludCBhY3Rpb24pIHsKICAgICAg\nICAgICAgcmV0dXJuIG5ldyBFbWJlZGRlZFJvdyhfcm0uZ2V0U2Vjb25kYXJ5\nUm93KHRhYmxlLCBhY3Rpb24pKTsKICAgICAgICB9CgogICAgICAgIHB1Ymxp\nYyB2b2lkIGZsdXNoU2Vjb25kYXJ5Um93KFJvdyByb3cpCiAgICAgICAgICAg\nIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBfcm0uZmx1c2hT\nZWNvbmRhcnlSb3coKChFbWJlZGRlZFJvdykgcm93KS5nZXREZWxlZ2F0ZSgp\nKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBSb3cgZ2V0QWxsUm93cyhU\nYWJsZSB0YWJsZSwgaW50IGFjdGlvbikgewogICAgICAgICAgICByZXR1cm4g\nbmV3IEVtYmVkZGVkUm93KF9ybS5nZXRBbGxSb3dzKHRhYmxlLCBhY3Rpb24p\nKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIGZsdXNoQWxsUm93\ncyhSb3cgcm93KQogICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsK\nICAgICAgICAgICAgX3JtLmZsdXNoQWxsUm93cygoKEVtYmVkZGVkUm93KSBy\nb3cpLmdldERlbGVnYXRlKCkpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioK\nICAgICAqIFNwZWNpYWwgcm93IHR5cGUgdGhhdCB1bndyYXBzIGVtYmVkZGVk\nIG9iamVjdHMuCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGljIGNsYXNzIEVt\nYmVkZGVkUm93CiAgICAgICAgaW1wbGVtZW50cyBSb3cgewoKICAgICAgICBw\ncml2YXRlIGZpbmFsIFJvdyBfcm93OwoKICAgICAgICBwdWJsaWMgRW1iZWRk\nZWRSb3coUm93IGRlbGVnYXRlKSB7CiAgICAgICAgICAgIF9yb3cgPSBkZWxl\nZ2F0ZTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBSb3cgZ2V0RGVsZWdh\ndGUoKSB7CiAgICAgICAgICAgIHJldHVybiBfcm93OwogICAgICAgIH0KCiAg\nICAgICAgcHVibGljIGJvb2xlYW4gaXNWYWxpZCgpIHsKICAgICAgICAgICAg\ncmV0dXJuIF9yb3cuaXNWYWxpZCgpOwogICAgICAgIH0KCiAgICAgICAgcHVi\nbGljIHZvaWQgc2V0VmFsaWQoYm9vbGVhbiB2YWxpZCkgewogICAgICAgICAg\nICBfcm93LnNldFZhbGlkKHZhbGlkKTsKICAgICAgICB9CgogICAgICAgIHB1\nYmxpYyB2b2lkIHNldFByaW1hcnlLZXkoT3BlbkpQQVN0YXRlTWFuYWdlciBz\nbSkKICAgICAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAg\nICAgIF9yb3cuc2V0UHJpbWFyeUtleShnZXRPd25lcihzbSkpOwogICAgICAg\nIH0KCiAgICAgICAgcHVibGljIHZvaWQgc2V0UHJpbWFyeUtleShDb2x1bW5J\nTyBpbywgT3BlbkpQQVN0YXRlTWFuYWdlciBzbSkKICAgICAgICAgICAgdGhy\nb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIF9yb3cuc2V0UHJpbWFy\neUtleShpbywgZ2V0T3duZXIoc20pKTsKICAgICAgICB9CgogICAgICAgIHB1\nYmxpYyB2b2lkIHdoZXJlUHJpbWFyeUtleShPcGVuSlBBU3RhdGVNYW5hZ2Vy\nIHNtKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAg\nICAgICAgX3Jvdy53aGVyZVByaW1hcnlLZXkoZ2V0T3duZXIoc20pKTsKICAg\nICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHNldEZvcmVpZ25LZXkoRm9y\nZWlnbktleSBmaywgT3BlbkpQQVN0YXRlTWFuYWdlciBzbSkKICAgICAgICAg\nICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIF9yb3cuc2V0\nRm9yZWlnbktleShmaywgZ2V0T3duZXIoc20pKTsKICAgICAgICB9CgogICAg\nICAgIHB1YmxpYyB2b2lkIHNldEZvcmVpZ25LZXkoRm9yZWlnbktleSBmaywg\nQ29sdW1uSU8gaW8sCiAgICAgICAgICAgIE9wZW5KUEFTdGF0ZU1hbmFnZXIg\nc20pCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAg\nICAgICBfcm93LnNldEZvcmVpZ25LZXkoZmssIGlvLCBnZXRPd25lcihzbSkp\nOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgd2hlcmVGb3JlaWdu\nS2V5KEZvcmVpZ25LZXkgZmssIE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20pCiAg\nICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBf\ncm93LndoZXJlRm9yZWlnbktleShmaywgZ2V0T3duZXIoc20pKTsKICAgICAg\nICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHNldFJlbGF0aW9uSWQoQ29sdW1u\nIGNvbCwgT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwKICAgICAgICAgICAgUmVs\nYXRpb25JZCByZWwpCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24g\newogICAgICAgICAgICBfcm93LnNldFJlbGF0aW9uSWQoY29sLCBnZXRPd25l\ncihzbSksIHJlbCk7CiAgICAgICAgfQoKICAgICAgICBwcml2YXRlIE9wZW5K\nUEFTdGF0ZU1hbmFnZXIgZ2V0T3duZXIoT3BlbkpQQVN0YXRlTWFuYWdlciBz\nbSkgewogICAgICAgICAgICB3aGlsZSAoc20gIT0gbnVsbCAmJiBzbS5nZXRP\nd25lcigpICE9IG51bGwpCiAgICAgICAgICAgICAgICBzbSA9IHNtLmdldE93\nbmVyKCk7CiAgICAgICAgICAgIHJldHVybiBzbTsKICAgICAgICB9CgogICAg\nICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgICAgIC8vIFBhc3Mt\ndGhyb3VnaCBtZXRob2RzCiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vCgogICAgICAgIHB1YmxpYyBUYWJsZSBnZXRUYWJsZSgpIHsKICAgICAg\nICAgICAgcmV0dXJuIF9yb3cuZ2V0VGFibGUoKTsKICAgICAgICB9CgogICAg\nICAgIHB1YmxpYyBpbnQgZ2V0QWN0aW9uKCkgewogICAgICAgICAgICByZXR1\ncm4gX3Jvdy5nZXRBY3Rpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1Ymxp\nYyBPYmplY3QgZ2V0RmFpbGVkT2JqZWN0KCkgewogICAgICAgICAgICByZXR1\ncm4gX3Jvdy5nZXRGYWlsZWRPYmplY3QoKTsKICAgICAgICB9CgogICAgICAg\nIHB1YmxpYyB2b2lkIHNldEZhaWxlZE9iamVjdChPYmplY3QgZmFpbGVkKSB7\nCiAgICAgICAgICAgIF9yb3cuc2V0RmFpbGVkT2JqZWN0KGZhaWxlZCk7CiAg\nICAgICAgfQoKICAgICAgICBwdWJsaWMgT3BlbkpQQVN0YXRlTWFuYWdlciBn\nZXRQcmltYXJ5S2V5KCkgewogICAgICAgICAgICByZXR1cm4gX3Jvdy5nZXRQ\ncmltYXJ5S2V5KCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBz\nZXRBcnJheShDb2x1bW4gY29sLCBBcnJheSB2YWwpCiAgICAgICAgICAgIHRo\ncm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBfcm93LnNldEFycmF5\nKGNvbCwgdmFsKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHNl\ndEFzY2lpU3RyZWFtKENvbHVtbiBjb2wsIElucHV0U3RyZWFtIHZhbCwgaW50\nIGxlbmd0aCkKICAgICAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAg\nICAgICAgICAgIF9yb3cuc2V0QXNjaWlTdHJlYW0oY29sLCB2YWwsIGxlbmd0\naCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBzZXRCaWdEZWNp\nbWFsKENvbHVtbiBjb2wsIEJpZ0RlY2ltYWwgdmFsKQogICAgICAgICAgICB0\naHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy5zZXRCaWdE\nZWNpbWFsKGNvbCwgdmFsKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2\nb2lkIHNldEJpZ0ludGVnZXIoQ29sdW1uIGNvbCwgQmlnSW50ZWdlciB2YWwp\nCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAg\nICBfcm93LnNldEJpZ0ludGVnZXIoY29sLCB2YWwpOwogICAgICAgIH0KCiAg\nICAgICAgcHVibGljIHZvaWQgc2V0QmluYXJ5U3RyZWFtKENvbHVtbiBjb2ws\nIElucHV0U3RyZWFtIHZhbCwgaW50IGxlbmd0aCkKICAgICAgICAgICAgdGhy\nb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIF9yb3cuc2V0QmluYXJ5\nU3RyZWFtKGNvbCwgdmFsLCBsZW5ndGgpOwogICAgICAgIH0KCiAgICAgICAg\ncHVibGljIHZvaWQgc2V0QmxvYihDb2x1bW4gY29sLCBCbG9iIHZhbCkKICAg\nICAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIF9y\nb3cuc2V0QmxvYihjb2wsIHZhbCk7CiAgICAgICAgfQoKICAgICAgICBwdWJs\naWMgdm9pZCBzZXRCb29sZWFuKENvbHVtbiBjb2wsIGJvb2xlYW4gdmFsKQog\nICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAg\nX3Jvdy5zZXRCb29sZWFuKGNvbCwgdmFsKTsKICAgICAgICB9CgogICAgICAg\nIHB1YmxpYyB2b2lkIHNldEJ5dGUoQ29sdW1uIGNvbCwgYnl0ZSB2YWwpCiAg\nICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBf\ncm93LnNldEJ5dGUoY29sLCB2YWwpOwogICAgICAgIH0KCiAgICAgICAgcHVi\nbGljIHZvaWQgc2V0Qnl0ZXMoQ29sdW1uIGNvbCwgYnl0ZVtdIHZhbCkKICAg\nICAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIF9y\nb3cuc2V0Qnl0ZXMoY29sLCB2YWwpOwogICAgICAgIH0KCiAgICAgICAgcHVi\nbGljIHZvaWQgc2V0Q2FsZW5kYXIoQ29sdW1uIGNvbCwgQ2FsZW5kYXIgdmFs\nKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAg\nICAgX3Jvdy5zZXRDYWxlbmRhcihjb2wsIHZhbCk7CiAgICAgICAgfQoKICAg\nICAgICBwdWJsaWMgdm9pZCBzZXRDaGFyKENvbHVtbiBjb2wsIGNoYXIgdmFs\nKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAg\nICAgX3Jvdy5zZXRDaGFyKGNvbCwgdmFsKTsKICAgICAgICB9CgogICAgICAg\nIHB1YmxpYyB2b2lkIHNldENoYXJhY3RlclN0cmVhbShDb2x1bW4gY29sLCBS\nZWFkZXIgdmFsLCBpbnQgbGVuZ3RoKQogICAgICAgICAgICB0aHJvd3MgU1FM\nRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy5zZXRDaGFyYWN0ZXJTdHJl\nYW0oY29sLCB2YWwsIGxlbmd0aCk7CiAgICAgICAgfQoKICAgICAgICBwdWJs\naWMgdm9pZCBzZXRDbG9iKENvbHVtbiBjb2wsIENsb2IgdmFsKQogICAgICAg\nICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy5z\nZXRDbG9iKGNvbCwgdmFsKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2\nb2lkIHNldERhdGUoQ29sdW1uIGNvbCwgRGF0ZSB2YWwpCiAgICAgICAgICAg\nIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBfcm93LnNldERh\ndGUoY29sLCB2YWwpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQg\nc2V0RGF0ZShDb2x1bW4gY29sLCBqYXZhLnNxbC5EYXRlIHZhbCwgQ2FsZW5k\nYXIgY2FsKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAg\nICAgICAgICAgX3Jvdy5zZXREYXRlKGNvbCwgdmFsLCBjYWwpOwogICAgICAg\nIH0KCiAgICAgICAgcHVibGljIHZvaWQgc2V0RG91YmxlKENvbHVtbiBjb2ws\nIGRvdWJsZSB2YWwpCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24g\newogICAgICAgICAgICBfcm93LnNldERvdWJsZShjb2wsIHZhbCk7CiAgICAg\nICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBzZXRGbG9hdChDb2x1bW4gY29s\nLCBmbG9hdCB2YWwpCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24g\newogICAgICAgICAgICBfcm93LnNldEZsb2F0KGNvbCwgdmFsKTsKICAgICAg\nICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHNldEludChDb2x1bW4gY29sLCBp\nbnQgdmFsKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAg\nICAgICAgICAgX3Jvdy5zZXRJbnQoY29sLCB2YWwpOwogICAgICAgIH0KCiAg\nICAgICAgcHVibGljIHZvaWQgc2V0TG9uZyhDb2x1bW4gY29sLCBsb25nIHZh\nbCkKICAgICAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAg\nICAgIF9yb3cuc2V0TG9uZyhjb2wsIHZhbCk7CiAgICAgICAgfQoKICAgICAg\nICBwdWJsaWMgdm9pZCBzZXRMb2NhbGUoQ29sdW1uIGNvbCwgTG9jYWxlIHZh\nbCkKICAgICAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAg\nICAgIF9yb3cuc2V0TG9jYWxlKGNvbCwgdmFsKTsKICAgICAgICB9CgogICAg\nICAgIHB1YmxpYyB2b2lkIHNldE51bGwoQ29sdW1uIGNvbCkKICAgICAgICAg\nICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIF9yb3cuc2V0\nTnVsbChjb2wpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc2V0\nTnVsbChDb2x1bW4gY29sLCBib29sZWFuIG92ZXJyaWRlRGVmYXVsdCkKICAg\nICAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIF9y\nb3cuc2V0TnVsbChjb2wsIG92ZXJyaWRlRGVmYXVsdCk7CiAgICAgICAgfQoK\nICAgICAgICBwdWJsaWMgdm9pZCBzZXROdW1iZXIoQ29sdW1uIGNvbCwgTnVt\nYmVyIHZhbCkKICAgICAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAg\nICAgICAgICAgIF9yb3cuc2V0TnVtYmVyKGNvbCwgdmFsKTsKICAgICAgICB9\nCgogICAgICAgIHB1YmxpYyB2b2lkIHNldE9iamVjdChDb2x1bW4gY29sLCBP\nYmplY3QgdmFsKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsK\nICAgICAgICAgICAgX3Jvdy5zZXRPYmplY3QoY29sLCB2YWwpOwogICAgICAg\nIH0KCiAgICAgICAgcHVibGljIHZvaWQgc2V0UmF3KENvbHVtbiBjb2wsIFN0\ncmluZyB2YWwpCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewog\nICAgICAgICAgICBfcm93LnNldFJhdyhjb2wsIHZhbCk7CiAgICAgICAgfQoK\nICAgICAgICBwdWJsaWMgdm9pZCBzZXRTaG9ydChDb2x1bW4gY29sLCBzaG9y\ndCB2YWwpCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAg\nICAgICAgICBfcm93LnNldFNob3J0KGNvbCwgdmFsKTsKICAgICAgICB9Cgog\nICAgICAgIHB1YmxpYyB2b2lkIHNldFN0cmluZyhDb2x1bW4gY29sLCBTdHJp\nbmcgdmFsKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAg\nICAgICAgICAgX3Jvdy5zZXRTdHJpbmcoY29sLCB2YWwpOwogICAgICAgIH0K\nCiAgICAgICAgcHVibGljIHZvaWQgc2V0VGltZShDb2x1bW4gY29sLCBUaW1l\nIHZhbCwgQ2FsZW5kYXIgY2FsKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhj\nZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy5zZXRUaW1lKGNvbCwgdmFsLCBj\nYWwpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc2V0VGltZXN0\nYW1wKENvbHVtbiBjb2wsIFRpbWVzdGFtcCB2YWwsIENhbGVuZGFyIGNhbCkK\nICAgICAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAg\nIF9yb3cuc2V0VGltZXN0YW1wKGNvbCwgdmFsLCBjYWwpOwogICAgICAgIH0K\nCiAgICAgICAgcHVibGljIHZvaWQgd2hlcmVBcnJheShDb2x1bW4gY29sLCBB\ncnJheSB2YWwpCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewog\nICAgICAgICAgICBfcm93LndoZXJlQXJyYXkoY29sLCB2YWwpOwogICAgICAg\nIH0KCiAgICAgICAgcHVibGljIHZvaWQgd2hlcmVBc2NpaVN0cmVhbShDb2x1\nbW4gY29sLCBJbnB1dFN0cmVhbSB2YWwsIGludCBsZW5ndGgpCiAgICAgICAg\nICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBfcm93Lndo\nZXJlQXNjaWlTdHJlYW0oY29sLCB2YWwsIGxlbmd0aCk7CiAgICAgICAgfQoK\nICAgICAgICBwdWJsaWMgdm9pZCB3aGVyZUJpZ0RlY2ltYWwoQ29sdW1uIGNv\nbCwgQmlnRGVjaW1hbCB2YWwpCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNl\ncHRpb24gewogICAgICAgICAgICBfcm93LndoZXJlQmlnRGVjaW1hbChjb2ws\nIHZhbCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCB3aGVyZUJp\nZ0ludGVnZXIoQ29sdW1uIGNvbCwgQmlnSW50ZWdlciB2YWwpCiAgICAgICAg\nICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBfcm93Lndo\nZXJlQmlnSW50ZWdlcihjb2wsIHZhbCk7CiAgICAgICAgfQoKICAgICAgICBw\ndWJsaWMgdm9pZCB3aGVyZUJpbmFyeVN0cmVhbShDb2x1bW4gY29sLCBJbnB1\ndFN0cmVhbSB2YWwsIGludCBsZW5ndGgpCiAgICAgICAgICAgIHRocm93cyBT\nUUxFeGNlcHRpb24gewogICAgICAgICAgICBfcm93LndoZXJlQmluYXJ5U3Ry\nZWFtKGNvbCwgdmFsLCBsZW5ndGgpOwogICAgICAgIH0KCiAgICAgICAgcHVi\nbGljIHZvaWQgd2hlcmVCbG9iKENvbHVtbiBjb2wsIEJsb2IgdmFsKQogICAg\nICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3Jv\ndy53aGVyZUJsb2IoY29sLCB2YWwpOwogICAgICAgIH0KCiAgICAgICAgcHVi\nbGljIHZvaWQgd2hlcmVCb29sZWFuKENvbHVtbiBjb2wsIGJvb2xlYW4gdmFs\nKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAg\nICAgX3Jvdy53aGVyZUJvb2xlYW4oY29sLCB2YWwpOwogICAgICAgIH0KCiAg\nICAgICAgcHVibGljIHZvaWQgd2hlcmVCeXRlKENvbHVtbiBjb2wsIGJ5dGUg\ndmFsKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAg\nICAgICAgX3Jvdy53aGVyZUJ5dGUoY29sLCB2YWwpOwogICAgICAgIH0KCiAg\nICAgICAgcHVibGljIHZvaWQgd2hlcmVCeXRlcyhDb2x1bW4gY29sLCBieXRl\nW10gdmFsKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAg\nICAgICAgICAgX3Jvdy53aGVyZUJ5dGVzKGNvbCwgdmFsKTsKICAgICAgICB9\nCgogICAgICAgIHB1YmxpYyB2b2lkIHdoZXJlQ2FsZW5kYXIoQ29sdW1uIGNv\nbCwgQ2FsZW5kYXIgdmFsKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0\naW9uIHsKICAgICAgICAgICAgX3Jvdy53aGVyZUNhbGVuZGFyKGNvbCwgdmFs\nKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHdoZXJlQ2hhcihD\nb2x1bW4gY29sLCBjaGFyIHZhbCkKICAgICAgICAgICAgdGhyb3dzIFNRTEV4\nY2VwdGlvbiB7CiAgICAgICAgICAgIF9yb3cud2hlcmVDaGFyKGNvbCwgdmFs\nKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHdoZXJlQ2hhcmFj\ndGVyU3RyZWFtKENvbHVtbiBjb2wsIFJlYWRlciB2YWwsIGludCBsZW5ndGgp\nCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAg\nICBfcm93LndoZXJlQ2hhcmFjdGVyU3RyZWFtKGNvbCwgdmFsLCBsZW5ndGgp\nOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgd2hlcmVDbG9iKENv\nbHVtbiBjb2wsIENsb2IgdmFsKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhj\nZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy53aGVyZUNsb2IoY29sLCB2YWwp\nOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgd2hlcmVEYXRlKENv\nbHVtbiBjb2wsIERhdGUgdmFsKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhj\nZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy53aGVyZURhdGUoY29sLCB2YWwp\nOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgd2hlcmVEYXRlKENv\nbHVtbiBjb2wsIGphdmEuc3FsLkRhdGUgdmFsLCBDYWxlbmRhciBjYWwpCiAg\nICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBf\ncm93LndoZXJlRGF0ZShjb2wsIHZhbCwgY2FsKTsKICAgICAgICB9CgogICAg\nICAgIHB1YmxpYyB2b2lkIHdoZXJlRG91YmxlKENvbHVtbiBjb2wsIGRvdWJs\nZSB2YWwpCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAg\nICAgICAgICBfcm93LndoZXJlRG91YmxlKGNvbCwgdmFsKTsKICAgICAgICB9\nCgogICAgICAgIHB1YmxpYyB2b2lkIHdoZXJlRmxvYXQoQ29sdW1uIGNvbCwg\nZmxvYXQgdmFsKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsK\nICAgICAgICAgICAgX3Jvdy53aGVyZUZsb2F0KGNvbCwgdmFsKTsKICAgICAg\nICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHdoZXJlSW50KENvbHVtbiBjb2ws\nIGludCB2YWwpCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewog\nICAgICAgICAgICBfcm93LndoZXJlSW50KGNvbCwgdmFsKTsKICAgICAgICB9\nCgogICAgICAgIHB1YmxpYyB2b2lkIHdoZXJlTG9uZyhDb2x1bW4gY29sLCBs\nb25nIHZhbCkKICAgICAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAg\nICAgICAgICAgIF9yb3cud2hlcmVMb25nKGNvbCwgdmFsKTsKICAgICAgICB9\nCgogICAgICAgIHB1YmxpYyB2b2lkIHdoZXJlTG9jYWxlKENvbHVtbiBjb2ws\nIExvY2FsZSB2YWwpCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24g\newogICAgICAgICAgICBfcm93LndoZXJlTG9jYWxlKGNvbCwgdmFsKTsKICAg\nICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHdoZXJlTnVsbChDb2x1bW4g\nY29sKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAg\nICAgICAgX3Jvdy53aGVyZU51bGwoY29sKTsKICAgICAgICB9CgogICAgICAg\nIHB1YmxpYyB2b2lkIHdoZXJlTnVtYmVyKENvbHVtbiBjb2wsIE51bWJlciB2\nYWwpCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAg\nICAgICBfcm93LndoZXJlTnVtYmVyKGNvbCwgdmFsKTsKICAgICAgICB9Cgog\nICAgICAgIHB1YmxpYyB2b2lkIHdoZXJlT2JqZWN0KENvbHVtbiBjb2wsIE9i\namVjdCB2YWwpCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewog\nICAgICAgICAgICBfcm93LndoZXJlT2JqZWN0KGNvbCwgdmFsKTsKICAgICAg\nICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHdoZXJlUmF3KENvbHVtbiBjb2ws\nIFN0cmluZyB2YWwpCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24g\newogICAgICAgICAgICBfcm93LndoZXJlUmF3KGNvbCwgdmFsKTsKICAgICAg\nICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHdoZXJlU2hvcnQoQ29sdW1uIGNv\nbCwgc2hvcnQgdmFsKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9u\nIHsKICAgICAgICAgICAgX3Jvdy53aGVyZVNob3J0KGNvbCwgdmFsKTsKICAg\nICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHdoZXJlU3RyaW5nKENvbHVt\nbiBjb2wsIFN0cmluZyB2YWwpCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNl\ncHRpb24gewogICAgICAgICAgICBfcm93LndoZXJlU3RyaW5nKGNvbCwgdmFs\nKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHdoZXJlVGltZShD\nb2x1bW4gY29sLCBUaW1lIHZhbCwgQ2FsZW5kYXIgY2FsKQogICAgICAgICAg\nICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy53aGVy\nZVRpbWUoY29sLCB2YWwsIGNhbCk7CiAgICAgICAgfQoKICAgICAgICBwdWJs\naWMgdm9pZCB3aGVyZVRpbWVzdGFtcChDb2x1bW4gY29sLCBUaW1lc3RhbXAg\ndmFsLCBDYWxlbmRhciBjYWwpCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNl\ncHRpb24gewogICAgICAgICAgICBfcm93LndoZXJlVGltZXN0YW1wKGNvbCwg\ndmFsLCBjYWwpOwogICAgICAgIH0KICAgIH0KfQo=\n","encoding":"base64"}

