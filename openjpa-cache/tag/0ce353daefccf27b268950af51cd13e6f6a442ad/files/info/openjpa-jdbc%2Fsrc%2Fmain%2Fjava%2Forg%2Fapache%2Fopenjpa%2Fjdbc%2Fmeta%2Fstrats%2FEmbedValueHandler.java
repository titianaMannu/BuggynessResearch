{"sha":"df03c26211f5201a49f4ccd70f4282e2f78963a0","node_id":"MDQ6QmxvYjIwNjM2NDpkZjAzYzI2MjExZjUyMDFhNDlmNGNjZDcwZjQyODJlMmY3ODk2M2Ew","size":6374,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/df03c26211f5201a49f4ccd70f4282e2f78963a0","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLm1ldGEuc3RyYXRzOwoKaW1wb3J0IGphdmEuc3FsLlNR\nTEV4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5MaXN0OwoKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5qZGJjLmtlcm5lbC5KREJDRmV0Y2hDb25maWd1\ncmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMua2VybmVs\nLkpEQkNTdG9yZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1l\ndGEuRW1iZWRkYWJsZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLm1ldGEuRmllbGRNYXBwaW5nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMubWV0YS5WYWx1ZU1hcHBpbmc7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5zY2hlbWEuQ29sdW1uOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmpkYmMuc2NoZW1hLkNvbHVtbklPOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmtlcm5lbC5PcGVuSlBBU3RhdGVNYW5hZ2VyOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLk1ldGFEYXRhRXhjZXB0aW9uOwoK\nLyoqCiAqIEJhc2UgY2xhc3MgZm9yIGVtYmVkZGVkIHZhbHVlIGhhbmRsZXJz\nLgogKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKiBAc2luY2UgMC40LjAKICov\nCnB1YmxpYyBhYnN0cmFjdCBjbGFzcyBFbWJlZFZhbHVlSGFuZGxlcgogICAg\nZXh0ZW5kcyBBYnN0cmFjdFZhbHVlSGFuZGxlciB7CgogICAgcHJpdmF0ZSBz\ndGF0aWMgZmluYWwgTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6ZXIuZm9yUGFj\na2FnZQogICAgICAgIChFbWJlZFZhbHVlSGFuZGxlci5jbGFzcyk7CgogICAg\nLyoqCiAgICAgKiBNYXBzIGVtYmVkZGVkIHZhbHVlIGFuZCBnYXRoZXJzIGNv\nbHVtbnMgYW5kIGFyZ3VtZW50cyBpbnRvIGdpdmVuIGxpc3RzLgogICAgICov\nCiAgICBwcm90ZWN0ZWQgdm9pZCBtYXAoVmFsdWVNYXBwaW5nIHZtLCBTdHJp\nbmcgbmFtZSwgQ29sdW1uSU8gaW8sCiAgICAgICAgYm9vbGVhbiBhZGFwdCwg\nTGlzdCBjb2xzLCBMaXN0IGFyZ3MpIHsKICAgICAgICAvLyBoYXZlIHRvIHJl\nc29sdmUgZW1iZWRkZWQgdmFsdWUgdG8gY29sbGVjdCBpdHMgY29sdW1ucwog\nICAgICAgIHZtLmdldEVtYmVkZGVkTWFwcGluZygpLnJlc29sdmUodm0uTU9E\nRV9NRVRBIHwgdm0uTU9ERV9NQVBQSU5HKTsKCiAgICAgICAgLy8gZ2F0aGVy\nIGNvbHVtbnMgYW5kIHJlc3VsdCBhcmd1bWVudHMKICAgICAgICBGaWVsZE1h\ncHBpbmdbXSBmbXMgPSB2bS5nZXRFbWJlZGRlZE1hcHBpbmcoKS5nZXRGaWVs\nZE1hcHBpbmdzKCk7CiAgICAgICAgQ29sdW1uW10gY3VyQ29sczsKICAgICAg\nICBPYmplY3RbXSBjdXJBcmdzOwogICAgICAgIENvbHVtbklPIGN1cklPOwog\nICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZm1zLmxlbmd0aDsgaSsrKSB7\nCiAgICAgICAgICAgIGlmIChmbXNbaV0uZ2V0TWFuYWdlbWVudCgpICE9IEZp\nZWxkTWFwcGluZy5NQU5BR0VfUEVSU0lTVEVOVCkKICAgICAgICAgICAgICAg\nIGNvbnRpbnVlOwogICAgICAgICAgICBpZiAoIShmbXNbaV0uZ2V0U3RyYXRl\nZ3koKWluc3RhbmNlb2YgRW1iZWRkYWJsZSkpCiAgICAgICAgICAgICAgICB0\naHJvdyBuZXcgTWV0YURhdGFFeGNlcHRpb24oX2xvYy5nZXQoIm5vdC1lbWJl\nZGRhYmxlIiwKICAgICAgICAgICAgICAgICAgICB2bSwgZm1zW2ldKSk7Cgog\nICAgICAgICAgICBjdXJDb2xzID0gKChFbWJlZGRhYmxlKSBmbXNbaV0uZ2V0\nU3RyYXRlZ3koKSkuZ2V0Q29sdW1ucygpOwogICAgICAgICAgICBjdXJJTyA9\nICgoRW1iZWRkYWJsZSkgZm1zW2ldLmdldFN0cmF0ZWd5KCkpLmdldENvbHVt\nbklPKCk7CiAgICAgICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgY3VyQ29s\ncy5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgaW8uc2V0SW5zZXJ0\nYWJsZShjb2xzLnNpemUoKSwgY3VySU8uaXNJbnNlcnRhYmxlKGosIGZhbHNl\nKSk7CiAgICAgICAgICAgICAgICBpby5zZXROdWxsSW5zZXJ0YWJsZShjb2xz\nLnNpemUoKSwKICAgICAgICAgICAgICAgICAgICBjdXJJTy5pc0luc2VydGFi\nbGUoaiwgdHJ1ZSkpOwogICAgICAgICAgICAgICAgaW8uc2V0VXBkYXRhYmxl\nKGNvbHMuc2l6ZSgpLCBjdXJJTy5pc1VwZGF0YWJsZShqLCBmYWxzZSkpOwog\nICAgICAgICAgICAgICAgaW8uc2V0TnVsbFVwZGF0YWJsZShjb2xzLnNpemUo\nKSwgY3VySU8uaXNVcGRhdGFibGUoaiwgdHJ1ZSkpOwogICAgICAgICAgICAg\nICAgY29scy5hZGQoY3VyQ29sc1tqXSk7CiAgICAgICAgICAgIH0KCiAgICAg\nICAgICAgIGN1ckFyZ3MgPSAoKEVtYmVkZGFibGUpIGZtc1tpXS5nZXRTdHJh\ndGVneSgpKS5nZXRSZXN1bHRBcmd1bWVudHMoKTsKICAgICAgICAgICAgaWYg\nKGN1ckNvbHMubGVuZ3RoID09IDEpCiAgICAgICAgICAgICAgICBhcmdzLmFk\nZChjdXJBcmdzKTsKICAgICAgICAgICAgZWxzZSBpZiAoY3VyQ29scy5sZW5n\ndGggPiAxKQogICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBj\ndXJDb2xzLmxlbmd0aDsgaisrKQogICAgICAgICAgICAgICAgICAgIGFyZ3Mu\nYWRkKChjdXJBcmdzID09IG51bGwpID8gbnVsbAogICAgICAgICAgICAgICAg\nICAgICAgICA6ICgoT2JqZWN0W10pIGN1ckFyZ3MpW2pdKTsKICAgICAgICB9\nCiAgICB9CgogICAgLyoqCiAgICAgKiBIZWxwZXIgdG8gY29udmVydCBhbiBv\nYmplY3QgdmFsdWUgdG8gaXRzIGRhdGFzdG9yZSBlcXVpdmFsZW50LgogICAg\nICoKICAgICAqIEBwYXJhbSBlbSBzdGF0ZSBtYW5hZ2VyIGZvciBlbWJlZGRl\nZCBvYmplY3QKICAgICAqIEBwYXJhbSB2bSBvd25pbmcgdmFsdWUKICAgICAq\nIEBwYXJhbSBzdG9yZSBzdG9yZSBtYW5hZ2VyCiAgICAgKiBAcGFyYW0gY29s\ncyBlbWJlZGRlZCBjb2x1bW5zCiAgICAgKiBAcGFyYW0gcnZhbCByZXR1cm4g\nYXJyYXkgaWYgbXVsdGlwbGUgY29sdW1ucwogICAgICogQHBhcmFtIGlkeCBp\nbmRleCBpbiBjb2x1bW5zIGFycmF5IHRvIHN0YXJ0CiAgICAgKi8KICAgIHBy\nb3RlY3RlZCBPYmplY3QgdG9EYXRhU3RvcmVWYWx1ZShPcGVuSlBBU3RhdGVN\nYW5hZ2VyIGVtLCBWYWx1ZU1hcHBpbmcgdm0sCiAgICAgICAgSkRCQ1N0b3Jl\nIHN0b3JlLCBDb2x1bW5bXSBjb2xzLCBPYmplY3QgcnZhbCwgaW50IGlkeCkg\newogICAgICAgIC8vIHNldCByZXN0IG9mIGNvbHVtbnMgZnJvbSBmaWVsZHMK\nICAgICAgICBGaWVsZE1hcHBpbmdbXSBmbXMgPSB2bS5nZXRFbWJlZGRlZE1h\ncHBpbmcoKS5nZXRGaWVsZE1hcHBpbmdzKCk7CiAgICAgICAgT2JqZWN0IGN2\nYWw7CiAgICAgICAgQ29sdW1uW10gZWNvbHM7CiAgICAgICAgRW1iZWRkYWJs\nZSBlbWJlZDsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGZtcy5sZW5n\ndGg7IGkrKykgewogICAgICAgICAgICBpZiAoZm1zW2ldLmdldE1hbmFnZW1l\nbnQoKSAhPSBGaWVsZE1hcHBpbmcuTUFOQUdFX1BFUlNJU1RFTlQpCiAgICAg\nICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgZW1iZWQgPSAoRW1i\nZWRkYWJsZSkgZm1zW2ldLmdldFN0cmF0ZWd5KCk7CiAgICAgICAgICAgIGVj\nb2xzID0gZW1iZWQuZ2V0Q29sdW1ucygpOwogICAgICAgICAgICBpZiAoZWNv\nbHMubGVuZ3RoID09IDApCiAgICAgICAgICAgICAgICBjb250aW51ZTsKCiAg\nICAgICAgICAgIGN2YWwgPSAoZW0gPT0gbnVsbCkgPyBudWxsIDogZW0uZmV0\nY2goaSk7CiAgICAgICAgICAgIGN2YWwgPSBlbWJlZC50b0VtYmVkZGVkRGF0\nYVN0b3JlVmFsdWUoY3ZhbCwgc3RvcmUpOwogICAgICAgICAgICBpZiAoY29s\ncy5sZW5ndGggPT0gMSkKICAgICAgICAgICAgICAgIHJ2YWwgPSBjdmFsOwog\nICAgICAgICAgICBlbHNlIGlmIChlY29scy5sZW5ndGggPT0gMSkKICAgICAg\nICAgICAgICAgICgoT2JqZWN0W10pIHJ2YWwpW2lkeCsrXSA9IGN2YWw7CiAg\nICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgU3lzdGVtLmFycmF5\nY29weShjdmFsLCAwLCBydmFsLCBpZHgsIGVjb2xzLmxlbmd0aCk7CiAgICAg\nICAgICAgICAgICBpZHggKz0gZWNvbHMubGVuZ3RoOwogICAgICAgICAgICB9\nCiAgICAgICAgfQogICAgICAgIHJldHVybiBydmFsOwogICAgfQoKICAgIC8q\nKgogICAgICogSGVscGVyIHRvIGNvbnZlcnQgYSBkYXRhc3RvcmUgdmFsdWUg\ndG8gaXRzIG9iamVjdCBlcXVpdmFsZW50LgogICAgICoKICAgICAqIEBwYXJh\nbSBlbSBzdGF0ZSBtYW5hZ2VyIGZvciBlbWJlZGRlZCBvYmplY3QKICAgICAq\nIEBwYXJhbSB2bSBvd25pbmcgdmFsdWUKICAgICAqIEBwYXJhbSB2YWwgZGF0\nYXN0b3JlIHZhbHVlCiAgICAgKiBAcGFyYW0gc3RvcmUgb3B0aW9uYWwgc3Rv\ncmUgbWFuYWdlcgogICAgICogQHBhcmFtIGZldGNoIG9wdGlvbmFsIGZldGNo\nIGNvbmZpZ3VyYXRpb24KICAgICAqIEBwYXJhbSBjb2xzIGVtYmVkZGVkIGNv\nbHVtbnMKICAgICAqIEBwYXJhbSBpZHggaW5kZXggaW4gY29sdW1ucyBhcnJh\neSB0byBzdGFydAogICAgICovCiAgICBwcm90ZWN0ZWQgdm9pZCB0b09iamVj\ndFZhbHVlKE9wZW5KUEFTdGF0ZU1hbmFnZXIgZW0sIFZhbHVlTWFwcGluZyB2\nbSwKICAgICAgICBPYmplY3QgdmFsLCBKREJDU3RvcmUgc3RvcmUsIEpEQkNG\nZXRjaENvbmZpZ3VyYXRpb24gZmV0Y2gsCiAgICAgICAgQ29sdW1uW10gY29s\ncywgaW50IGlkeCkKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAg\nICAgICBGaWVsZE1hcHBpbmdbXSBmbXMgPSB2bS5nZXRFbWJlZGRlZE1hcHBp\nbmcoKS5nZXRGaWVsZE1hcHBpbmdzKCk7CiAgICAgICAgRW1iZWRkYWJsZSBl\nbWJlZDsKICAgICAgICBPYmplY3QgY3ZhbDsKICAgICAgICBDb2x1bW5bXSBl\nY29sczsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGZtcy5sZW5ndGg7\nIGkrKykgewogICAgICAgICAgICBpZiAoZm1zW2ldLmdldE1hbmFnZW1lbnQo\nKSAhPSBGaWVsZE1hcHBpbmcuTUFOQUdFX1BFUlNJU1RFTlQpCiAgICAgICAg\nICAgICAgICBjb250aW51ZTsKCiAgICAgICAgICAgIGVtYmVkID0gKEVtYmVk\nZGFibGUpIGZtc1tpXS5nZXRTdHJhdGVneSgpOwogICAgICAgICAgICBlY29s\ncyA9IGVtYmVkLmdldENvbHVtbnMoKTsKICAgICAgICAgICAgaWYgKGVjb2xz\nLmxlbmd0aCA9PSAwKQogICAgICAgICAgICAgICAgY3ZhbCA9IG51bGw7CiAg\nICAgICAgICAgIGVsc2UgaWYgKGlkeCA9PSAwICYmIGVjb2xzLmxlbmd0aCA9\nPSBjb2xzLmxlbmd0aCkKICAgICAgICAgICAgICAgIGN2YWwgPSB2YWw7CiAg\nICAgICAgICAgIGVsc2UgaWYgKGVjb2xzLmxlbmd0aCA9PSAxKQogICAgICAg\nICAgICAgICAgY3ZhbCA9ICgoT2JqZWN0W10pIHZhbClbaWR4KytdOwogICAg\nICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGN2YWwgPSBuZXcgT2Jq\nZWN0W2Vjb2xzLmxlbmd0aF07CiAgICAgICAgICAgICAgICBTeXN0ZW0uYXJy\nYXljb3B5KHZhbCwgaWR4LCBjdmFsLCAwLCBlY29scy5sZW5ndGgpOwogICAg\nICAgICAgICAgICAgaWR4ICs9IGVjb2xzLmxlbmd0aDsKICAgICAgICAgICAg\nfQoKICAgICAgICAgICAgaWYgKHN0b3JlICE9IG51bGwpCiAgICAgICAgICAg\nICAgICBlbWJlZC5sb2FkRW1iZWRkZWQoZW0sIHN0b3JlLCBmZXRjaCwgY3Zh\nbCk7CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgY3ZhbCA9\nIGVtYmVkLnRvRW1iZWRkZWRPYmplY3RWYWx1ZShjdmFsKTsKICAgICAgICAg\nICAgICAgIGVtLnN0b3JlKGZtc1tpXS5nZXRJbmRleCgpLCBjdmFsKTsKICAg\nICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQo=\n","encoding":"base64"}

