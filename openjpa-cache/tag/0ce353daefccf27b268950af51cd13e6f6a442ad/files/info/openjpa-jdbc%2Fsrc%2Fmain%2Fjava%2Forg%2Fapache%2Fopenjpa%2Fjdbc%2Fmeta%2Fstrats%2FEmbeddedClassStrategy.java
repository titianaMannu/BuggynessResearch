{"sha":"c23f97f89c1287bf0d645c072dfded402f660d8a","node_id":"MDQ6QmxvYjIwNjM2NDpjMjNmOTdmODljMTI4N2JmMGQ2NDVjMDcyZGZkZWQ0MDJmNjYwZDhh","size":3370,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/c23f97f89c1287bf0d645c072dfded402f660d8a","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLm1ldGEuc3RyYXRzOwoKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLm1ldGEuQ2xhc3NNYXBwaW5nOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMubWV0YS5DbGFzc01hcHBpbmdJbmZvOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5KYXZhU1FMVHlwZXM7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLlZhbHVlTWFw\ncGluZzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5D\nb2x1bW47CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLk9wZW5K\nUEFTdGF0ZU1hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGli\nLnV0aWwuTG9jYWxpemVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0\naWwuTWV0YURhdGFFeGNlcHRpb247CgovKioKICogQ2xhc3MgbWFwcGluZyBm\nb3IgZW1iZWRkZWQgb2JqZWN0cy4KICoKICogQGF1dGhvciBBYmUgV2hpdGUK\nICogQG5vamF2YWRvYwogKi8KcHVibGljIGNsYXNzIEVtYmVkZGVkQ2xhc3NT\ndHJhdGVneQogICAgZXh0ZW5kcyBBYnN0cmFjdENsYXNzU3RyYXRlZ3kgewoK\nICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvY2FsaXplciBfbG9jID0gTG9j\nYWxpemVyLmZvclBhY2thZ2UKICAgICAgICAoRW1iZWRkZWRDbGFzc1N0cmF0\nZWd5LmNsYXNzKTsKCiAgICBwdWJsaWMgdm9pZCBtYXAoYm9vbGVhbiBhZGFw\ndCkgewogICAgICAgIFZhbHVlTWFwcGluZyB2bSA9IGNscy5nZXRFbWJlZGRp\nbmdNYXBwaW5nKCk7CiAgICAgICAgaWYgKHZtID09IG51bGwgfHwgdm0uZ2V0\nVHlwZSgpICE9IGNscy5nZXREZXNjcmliZWRUeXBlKCkpCiAgICAgICAgICAg\nIHRocm93IG5ldyBNZXRhRGF0YUV4Y2VwdGlvbihfbG9jLmdldCgibm90LWVt\nYmVkIiwgY2xzKSk7CgogICAgICAgIENsYXNzTWFwcGluZ0luZm8gaW5mbyA9\nIGNscy5nZXRNYXBwaW5nSW5mbygpOwogICAgICAgIGluZm8uYXNzZXJ0Tm9T\nY2hlbWFDb21wb25lbnRzKGNscywgdHJ1ZSk7CgogICAgICAgIENsYXNzTWFw\ncGluZyBvd25lciA9IHZtLmdldEZpZWxkTWFwcGluZygpLmdldERlZmluaW5n\nTWFwcGluZygpOwogICAgICAgIGNscy5zZXRJZGVudGl0eVR5cGUob3duZXIu\nZ2V0SWRlbnRpdHlUeXBlKCkpOwogICAgICAgIGNscy5zZXRPYmplY3RJZFR5\ncGUob3duZXIuZ2V0T2JqZWN0SWRUeXBlKCksCiAgICAgICAgICAgIG93bmVy\nLmlzT2JqZWN0SWRUeXBlU2hhcmVkKCkpOwogICAgICAgIGNscy5zZXRUYWJs\nZSh2bS5nZXRGaWVsZE1hcHBpbmcoKS5nZXRUYWJsZSgpKTsKICAgICAgICBj\nbHMuc2V0UHJpbWFyeUtleUNvbHVtbnMob3duZXIuZ2V0UHJpbWFyeUtleUNv\nbHVtbnMoKSk7CiAgICAgICAgY2xzLnNldENvbHVtbklPKG93bmVyLmdldENv\nbHVtbklPKCkpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBw\ncm9wZXIgc3ludGhldGljIG51bGwgaW5kaWNhdG9yIHZhbHVlIGZvciB0aGUg\nZ2l2ZW4gaW5zdGFuY2UuCiAgICAgKi8KICAgIHB1YmxpYyBPYmplY3QgZ2V0\nTnVsbEluZGljYXRvclZhbHVlKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20pIHsK\nICAgICAgICBDb2x1bW5bXSBjb2xzID0gY2xzLmdldEVtYmVkZGluZ01hcHBp\nbmcoKS5nZXRDb2x1bW5zKCk7CiAgICAgICAgaWYgKGNvbHMubGVuZ3RoICE9\nIDEpCiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIGlmIChzbSA9\nPSBudWxsICYmICFjb2xzWzBdLmlzTm90TnVsbCgpKQogICAgICAgICAgICBy\nZXR1cm4gbnVsbDsKICAgICAgICBpZiAoc20gPT0gbnVsbCkKICAgICAgICAg\nICAgcmV0dXJuIEphdmFTUUxUeXBlcy5nZXRFbXB0eVZhbHVlKGNvbHNbMF0u\nZ2V0SmF2YVR5cGUoKSk7CiAgICAgICAgcmV0dXJuIEphdmFTUUxUeXBlcy5n\nZXROb25FbXB0eVZhbHVlKGNvbHNbMF0uZ2V0SmF2YVR5cGUoKSk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBSZXR1cm4gd2hldGhlciB0aGUgZ2l2ZW4gbnVs\nbCBpbmRpY2F0b3IgdmFsdWUgbWVhbnMgdGhlIG9iamVjdCBpcyBudWxsLgog\nICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBpbmRpY2F0ZXNOdWxsKE9iamVj\ndCB2YWwpIHsKICAgICAgICBDb2x1bW5bXSBjb2xzID0gY2xzLmdldEVtYmVk\nZGluZ01hcHBpbmcoKS5nZXRDb2x1bW5zKCk7CiAgICAgICAgaWYgKGNvbHMu\nbGVuZ3RoICE9IDEpCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAg\nICBpZiAodmFsID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiB0cnVlOwog\nICAgICAgIGlmIChjb2xzWzBdLmlzTm90TnVsbCgpCiAgICAgICAgICAgICYm\nIHZhbC5lcXVhbHMoSmF2YVNRTFR5cGVzLmdldEVtcHR5VmFsdWUoY29sc1sw\nXS5nZXRKYXZhVHlwZSgpKSkpCiAgICAgICAgICAgIHJldHVybiB0cnVlOwog\nICAgICAgIGlmIChjb2xzWzBdLmdldERlZmF1bHRTdHJpbmcoKSAhPSBudWxs\nCiAgICAgICAgICAgICYmIHZhbC50b1N0cmluZygpLmVxdWFscyhjb2xzWzBd\nLmdldERlZmF1bHRTdHJpbmcoKSkpCiAgICAgICAgICAgIHJldHVybiB0cnVl\nOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBwdWJsaWMgYm9v\nbGVhbiBpc1ByaW1hcnlLZXlPYmplY3RJZChib29sZWFuIGhhc0FsbCkgewog\nICAgICAgIHJldHVybiBjbHMuZ2V0RW1iZWRkaW5nTWFwcGluZygpLmdldEZp\nZWxkTWFwcGluZygpLgogICAgICAgICAgICBnZXREZWZpbmluZ01hcHBpbmco\nKS5pc1ByaW1hcnlLZXlPYmplY3RJZChoYXNBbGwpOwogICAgfQp9Cg==\n","encoding":"base64"}

