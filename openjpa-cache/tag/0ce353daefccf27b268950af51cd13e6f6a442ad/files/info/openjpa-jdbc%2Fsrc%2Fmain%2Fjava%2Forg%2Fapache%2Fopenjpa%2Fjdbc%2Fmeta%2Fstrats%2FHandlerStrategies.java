{"sha":"5303eff9e12f11b68d32173a361830b3ddae1484","node_id":"MDQ6QmxvYjIwNjM2NDo1MzAzZWZmOWUxMmYxMWI2OGQzMjE3M2EzNjE4MzBiM2RkYWUxNDg0","size":9215,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/5303eff9e12f11b68d32173a361830b3ddae1484","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLm1ldGEuc3RyYXRzOwoKaW1wb3J0IGphdmEuc3FsLlNR\nTEV4Y2VwdGlvbjsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5r\nZXJuZWwuSkRCQ0ZldGNoQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLmtlcm5lbC5KREJDU3RvcmU7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLkNsYXNzTWFwcGluZzsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1ldGEuUmVsYXRpb25JZDsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1ldGEuVmFsdWVIYW5kbGVy\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5WYWx1ZU1h\ncHBpbmc7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLlZh\nbHVlTWFwcGluZ0luZm87CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5zY2hlbWEuQ29sdW1uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpk\nYmMuc2NoZW1hLkNvbHVtbklPOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMuc3FsLkpvaW5zOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpk\nYmMuc3FsLlJlc3VsdDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLnNxbC5Sb3c7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLk9w\nZW5KUEFTdGF0ZU1hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nbGliLnV0aWwuTG9jYWxpemVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLnV0aWwuSW52YWxpZFN0YXRlRXhjZXB0aW9uOwoKLyoqCiAqIFV0aWxpdHkg\nbWV0aG9kcyBmb3Igc3RyYXRlZ2llcyB1c2luZyB2YWx1ZSBoYW5kbGVycy4K\nICoKICogQGF1dGhvciBBYmUgV2hpdGUKICogQHNpbmNlIDAuNC4wCiAqLwpw\ndWJsaWMgY2xhc3MgSGFuZGxlclN0cmF0ZWdpZXMgewoKICAgIHByaXZhdGUg\nc3RhdGljIGZpbmFsIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVyLmZvclBh\nY2thZ2UKICAgICAgICAoSGFuZGxlclN0cmF0ZWdpZXMuY2xhc3MpOwoKICAg\nIC8qKgogICAgICogTWFwIHRoZSBnaXZlbiB2YWx1ZS4KICAgICAqLwogICAg\ncHVibGljIHN0YXRpYyBDb2x1bW5bXSBtYXAoVmFsdWVNYXBwaW5nIHZtLCBT\ndHJpbmcgbmFtZSwgQ29sdW1uSU8gaW8sCiAgICAgICAgYm9vbGVhbiBhZGFw\ndCkgewogICAgICAgIFZhbHVlTWFwcGluZ0luZm8gdmluZm8gPSB2bS5nZXRW\nYWx1ZUluZm8oKTsKICAgICAgICB2aW5mby5hc3NlcnROb0pvaW4odm0sIHRy\ndWUpOwogICAgICAgIHZpbmZvLmFzc2VydE5vRm9yZWlnbktleSh2bSwgIWFk\nYXB0KTsKCiAgICAgICAgQ29sdW1uW10gY29scyA9IHZtLmdldEhhbmRsZXIo\nKS5tYXAodm0sIG5hbWUsIGlvLCBhZGFwdCk7CiAgICAgICAgaWYgKGNvbHMu\nbGVuZ3RoID4gMCAmJiBjb2xzWzBdLmdldFRhYmxlKCkgPT0gbnVsbCkgewog\nICAgICAgICAgICBjb2xzID0gdmluZm8uZ2V0Q29sdW1ucyh2bSwgbmFtZSwg\nY29scywKICAgICAgICAgICAgICAgIHZtLmdldEZpZWxkTWFwcGluZygpLmdl\ndFRhYmxlKCksIGFkYXB0KTsKICAgICAgICAgICAgQ29sdW1uSU8gbWFwcGVk\nSU8gPSB2aW5mby5nZXRDb2x1bW5JTygpOwogICAgICAgICAgICB2bS5zZXRD\nb2x1bW5zKGNvbHMpOwogICAgICAgICAgICB2bS5zZXRDb2x1bW5JTyhtYXBw\nZWRJTyk7CiAgICAgICAgICAgIGlmIChtYXBwZWRJTyAhPSBudWxsKSB7CiAg\nICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNvbHMubGVuZ3Ro\nOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBpby5zZXRJbnNlcnRhYmxl\nKGksIG1hcHBlZElPLmlzSW5zZXJ0YWJsZShpLCBmYWxzZSkpOwogICAgICAg\nICAgICAgICAgICAgIGlvLnNldE51bGxJbnNlcnRhYmxlKGksIG1hcHBlZElP\nLmlzSW5zZXJ0YWJsZShpLCB0cnVlKSk7CiAgICAgICAgICAgICAgICAgICAg\naW8uc2V0VXBkYXRhYmxlKGksIG1hcHBlZElPLmlzVXBkYXRhYmxlKGksIGZh\nbHNlKSk7CiAgICAgICAgICAgICAgICAgICAgaW8uc2V0TnVsbFVwZGF0YWJs\nZShpLCBtYXBwZWRJTy5pc1VwZGF0YWJsZShpLCB0cnVlKSk7CiAgICAgICAg\nICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdm0u\nbWFwQ29uc3RyYWludHMobmFtZSwgYWRhcHQpOwogICAgICAgIHJldHVybiBj\nb2xzOwogICAgfQoKICAgIC8qKgogICAgICogU2V0IHRoZSBnaXZlbiB2YWx1\nZSBpbnRvIHRoZSBnaXZlbiByb3cuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0\naWMgdm9pZCBzZXQoVmFsdWVNYXBwaW5nIHZtLCBPYmplY3QgdmFsLCBKREJD\nU3RvcmUgc3RvcmUsCiAgICAgICAgUm93IHJvdywgQ29sdW1uW10gY29scywg\nQ29sdW1uSU8gaW8sIGJvb2xlYW4gbnVsbE5vbmUpCiAgICAgICAgdGhyb3dz\nIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgaWYgKCFjYW5TZXRBbnkocm93LCBp\nbywgY29scykpCiAgICAgICAgICAgIHJldHVybjsKCiAgICAgICAgVmFsdWVI\nYW5kbGVyIGhhbmRsZXIgPSB2bS5nZXRIYW5kbGVyKCk7CiAgICAgICAgdmFs\nID0gaGFuZGxlci50b0RhdGFTdG9yZVZhbHVlKHZtLCB2YWwsIHN0b3JlKTsK\nICAgICAgICBpZiAodmFsID09IG51bGwpIHsKICAgICAgICAgICAgZm9yIChp\nbnQgaSA9IDA7IGkgPCBjb2xzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICAg\nICAgaWYgKGNhblNldChyb3csIGlvLCBpLCB0cnVlKSkKICAgICAgICAgICAg\nICAgICAgICBzZXQocm93LCBjb2xzW2ldLCBudWxsLCBoYW5kbGVyLCBudWxs\nTm9uZSk7CiAgICAgICAgfSBlbHNlIGlmIChjb2xzLmxlbmd0aCA9PSAxKSB7\nCiAgICAgICAgICAgIGlmIChjYW5TZXQocm93LCBpbywgMCwgdmFsID09IG51\nbGwpKQogICAgICAgICAgICAgICAgc2V0KHJvdywgY29sc1swXSwgdmFsLCBo\nYW5kbGVyLCBudWxsTm9uZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAg\nICAgT2JqZWN0W10gdmFscyA9IChPYmplY3RbXSkgdmFsOwogICAgICAgICAg\nICBmb3IgKGludCBpID0gMDsgaSA8IHZhbHMubGVuZ3RoOyBpKyspCiAgICAg\nICAgICAgICAgICBpZiAoY2FuU2V0KHJvdywgaW8sIGksIHZhbHNbaV0gPT0g\nbnVsbCkpCiAgICAgICAgICAgICAgICAgICAgc2V0KHJvdywgY29sc1tpXSwg\ndmFsc1tpXSwgaGFuZGxlciwgbnVsbE5vbmUpOwogICAgICAgIH0KICAgIH0K\nCiAgICAvKioKICAgICAqIFJldHVybiB0cnVlIGlmIHRoZSBnaXZlbiBjb2x1\nbW4gaW5kZXggaXMgc2V0dGFibGUuCiAgICAgKi8KICAgIHByaXZhdGUgc3Rh\ndGljIGJvb2xlYW4gY2FuU2V0KFJvdyByb3csIENvbHVtbklPIGlvLCBpbnQg\naSwKICAgICAgICBib29sZWFuIG51bGxWYWx1ZSkgewogICAgICAgIGlmIChy\nb3cuZ2V0QWN0aW9uKCkgPT0gUm93LkFDVElPTl9JTlNFUlQpCiAgICAgICAg\nICAgIHJldHVybiBpby5pc0luc2VydGFibGUoaSwgbnVsbFZhbHVlKTsKICAg\nICAgICBpZiAocm93LmdldEFjdGlvbigpID09IFJvdy5BQ1RJT05fVVBEQVRF\nKQogICAgICAgICAgICByZXR1cm4gaW8uaXNVcGRhdGFibGUoaSwgbnVsbFZh\nbHVlKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAg\nICAqIFJldHVybiB0cnVlIGlmIHRoZSBhbnkgY29sdW1uIHVwIHRvIHRoZSBn\naXZlbiBpbmRleCBpcyBzZXR0YWJsZS4KICAgICAqLwogICAgcHJpdmF0ZSBz\ndGF0aWMgYm9vbGVhbiBjYW5TZXRBbnkoUm93IHJvdywgQ29sdW1uSU8gaW8s\nIENvbHVtbltdIGNvbHMpIHsKICAgICAgICBpZiAocm93LmdldEFjdGlvbigp\nID09IFJvdy5BQ1RJT05fSU5TRVJUKQogICAgICAgICAgICByZXR1cm4gaW8u\naXNBbnlJbnNlcnRhYmxlKGNvbHMsIGZhbHNlKTsKICAgICAgICBpZiAocm93\nLmdldEFjdGlvbigpID09IFJvdy5BQ1RJT05fVVBEQVRFKQogICAgICAgICAg\nICByZXR1cm4gaW8uaXNBbnlVcGRhdGFibGUoY29scywgZmFsc2UpOwogICAg\nICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogU2V0IGEg\ndmFsdWUgaW50byBhIHJvdywgdGFraW5nIGNhcmUgbm90IHRvIG92ZXJyaWRl\nIGNvbHVtbiBkZWZ1YWx0cwogICAgICogd2l0aCBudWxscyB1bmxlc3MgdGhl\nIHVzZXIgd2FudHMgdXMgdG8uCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGlj\nIHZvaWQgc2V0KFJvdyByb3csIENvbHVtbiBjb2wsIE9iamVjdCB2YWwsCiAg\nICAgICAgVmFsdWVIYW5kbGVyIGhhbmRsZXIsIGJvb2xlYW4gbnVsbE5vbmUp\nCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgaWYgKHZh\nbCA9PSBudWxsKQogICAgICAgICAgICByb3cuc2V0TnVsbChjb2wsIG51bGxO\nb25lKTsKICAgICAgICBlbHNlIGlmIChjb2wuaXNSZWxhdGlvbklkKCkgJiYg\naGFuZGxlciBpbnN0YW5jZW9mIFJlbGF0aW9uSWQpCiAgICAgICAgICAgIHJv\ndy5zZXRSZWxhdGlvbklkKGNvbCwgKE9wZW5KUEFTdGF0ZU1hbmFnZXIpIHZh\nbCwKICAgICAgICAgICAgICAgIChSZWxhdGlvbklkKSBoYW5kbGVyKTsKICAg\nICAgICBlbHNlCiAgICAgICAgICAgIHJvdy5zZXRPYmplY3QoY29sLCB2YWwp\nOwogICAgfQoKICAgIC8qKgogICAgICogQWRkIHdoZXJlIGNvbmRpdGlvbnMg\ndG8gdGhlIGdpdmVuIHJvdy4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyB2\nb2lkIHdoZXJlKFZhbHVlTWFwcGluZyB2bSwgT2JqZWN0IHZhbCwgSkRCQ1N0\nb3JlIHN0b3JlLAogICAgICAgIFJvdyByb3csIENvbHVtbltdIGNvbHMpCiAg\nICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgaWYgKGNvbHMu\nbGVuZ3RoID09IDApCiAgICAgICAgICAgIHJldHVybjsKCiAgICAgICAgdmFs\nID0gdG9EYXRhU3RvcmVWYWx1ZSh2bSwgdmFsLCBjb2xzLCBzdG9yZSk7CiAg\nICAgICAgaWYgKHZhbCA9PSBudWxsKQogICAgICAgICAgICBmb3IgKGludCBp\nID0gMDsgaSA8IGNvbHMubGVuZ3RoOyBpKyspCiAgICAgICAgICAgICAgICBy\nb3cud2hlcmVOdWxsKGNvbHNbaV0pOwogICAgICAgIGVsc2UgaWYgKGNvbHMu\nbGVuZ3RoID09IDEpCiAgICAgICAgICAgIHdoZXJlKHJvdywgY29sc1swXSwg\ndmFsKTsKICAgICAgICBlbHNlIHsKICAgICAgICAgICAgT2JqZWN0W10gdmFs\ncyA9IChPYmplY3RbXSkgdmFsOwogICAgICAgICAgICBmb3IgKGludCBpID0g\nMDsgaSA8IHZhbHMubGVuZ3RoOyBpKyspCiAgICAgICAgICAgICAgICB3aGVy\nZShyb3csIGNvbHNbaV0sIHZhbHNbaV0pOwogICAgICAgIH0KICAgIH0KCiAg\nICAvKioKICAgICAqIFNldCBhIHdoZXJlIGNvbmRpdGlvbiBvbiB0aGUgZ2l2\nZW4gcm93LgogICAgICovCiAgICBwcml2YXRlIHN0YXRpYyB2b2lkIHdoZXJl\nKFJvdyByb3csIENvbHVtbiBjb2wsIE9iamVjdCB2YWwpCiAgICAgICAgdGhy\nb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgaWYgKHZhbCA9PSBudWxsKQog\nICAgICAgICAgICByb3cud2hlcmVOdWxsKGNvbCk7CiAgICAgICAgZWxzZQog\nICAgICAgICAgICByb3cud2hlcmVPYmplY3QoY29sLCB2YWwpOwogICAgfQoK\nICAgIC8qKgogICAgICogTG9hZCB0aGUgT2JqZWN0IHZhbHVlIGZyb20gdGhl\nIGdpdmVuIHJlc3VsdC4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBPYmpl\nY3QgbG9hZE9iamVjdChWYWx1ZU1hcHBpbmcgdm0sIE9wZW5KUEFTdGF0ZU1h\nbmFnZXIgc20sCiAgICAgICAgSkRCQ1N0b3JlIHN0b3JlLCBKREJDRmV0Y2hD\nb25maWd1cmF0aW9uIGZldGNoLCBSZXN1bHQgcmVzLAogICAgICAgIEpvaW5z\nIGpvaW5zLCBDb2x1bW5bXSBjb2xzLCBib29sZWFuIG9iamVjdFZhbHVlUmVx\ndWlyZXNMb2FkKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAg\nICAgIGlmIChjb2xzLmxlbmd0aCA9PSAwKQogICAgICAgICAgICB0aHJvdyBu\nZXcgSW52YWxpZFN0YXRlRXhjZXB0aW9uKF9sb2MuZ2V0KCJjYW50LXByb2pl\nY3Qtb3duZWQiLAogICAgICAgICAgICAgICAgdm0pKTsKCiAgICAgICAgT2Jq\nZWN0IHZhbCA9IGxvYWREYXRhU3RvcmUodm0sIHJlcywgam9pbnMsIGNvbHMp\nOwogICAgICAgIGlmIChvYmplY3RWYWx1ZVJlcXVpcmVzTG9hZCkKICAgICAg\nICAgICAgcmV0dXJuIHZtLmdldEhhbmRsZXIoKS50b09iamVjdFZhbHVlKHZt\nLCB2YWwsIHNtLCBzdG9yZSwgZmV0Y2gpOwogICAgICAgIHJldHVybiB2bS5n\nZXRIYW5kbGVyKCkudG9PYmplY3RWYWx1ZSh2bSwgdmFsKTsKICAgIH0KCiAg\nICAvKioKICAgICAqIExvYWQgdGhlIGRhdGFzdG9yZSB2YWx1ZSBmcm9tIHRo\nZSBnaXZlbiByZXN1bHQuIFRoaXMgbWV0aG9kIGRvZXMKICAgICAqIDxiPm5v\ndDwvYj4gcHJvY2VzcyB0aGUgbG9hZGVkIHZhbHVlIHRocm91Z2gKICAgICAq\nIHtAbGluayBWYWx1ZUhhbmRsZXIjdG9PYmplY3RWYWx1ZX0uCiAgICAgKi8K\nICAgIHB1YmxpYyBzdGF0aWMgT2JqZWN0IGxvYWREYXRhU3RvcmUoVmFsdWVN\nYXBwaW5nIHZtLCBSZXN1bHQgcmVzLAogICAgICAgIEpvaW5zIGpvaW5zLCBD\nb2x1bW5bXSBjb2xzKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewog\nICAgICAgIGlmIChjb2xzLmxlbmd0aCA9PSAwKQogICAgICAgICAgICByZXR1\ncm4gbnVsbDsKICAgICAgICBpZiAoY29scy5sZW5ndGggPT0gMSkKICAgICAg\nICAgICAgcmV0dXJuIHJlcy5nZXRPYmplY3QoY29sc1swXSwgdm0uZ2V0SGFu\nZGxlcigpLgogICAgICAgICAgICAgICAgZ2V0UmVzdWx0QXJndW1lbnQodm0p\nLCBqb2lucyk7CgogICAgICAgIE9iamVjdFtdIHZhbHMgPSBuZXcgT2JqZWN0\nW2NvbHMubGVuZ3RoXTsKICAgICAgICBPYmplY3RbXSBhcmdzID0gKE9iamVj\ndFtdKSB2bS5nZXRIYW5kbGVyKCkuZ2V0UmVzdWx0QXJndW1lbnQodm0pOwog\nICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgY29scy5sZW5ndGg7IGkrKykK\nICAgICAgICAgICAgdmFsc1tpXSA9IHJlcy5nZXRPYmplY3QoY29sc1tpXSwg\nKGFyZ3MgPT0gbnVsbCkgPyBudWxsIDogYXJnc1tpXSwKICAgICAgICAgICAg\nICAgIGpvaW5zKTsKICAgICAgICByZXR1cm4gdmFsczsKICAgIH0KCiAgICAv\nKioKICAgICAqIENvbnZlcnQgdGhlIGdpdmVuIG9iamVjdCB0byBpdHMgZGF0\nYXN0b3JlIHZhbHVlKHMpLiBSZWxhdGlvbiBpZHMgYXJlCiAgICAgKiBjb252\nZXJ0ZWQgdG8gdGhlaXIgZmluYWwgdmFsdWVzIGltbWVkaWF0ZWx5LgogICAg\nICovCiAgICBwdWJsaWMgc3RhdGljIE9iamVjdCB0b0RhdGFTdG9yZVZhbHVl\nKFZhbHVlTWFwcGluZyB2bSwgT2JqZWN0IHZhbCwKICAgICAgICBDb2x1bW5b\nXSBjb2xzLCBKREJDU3RvcmUgc3RvcmUpIHsKICAgICAgICBWYWx1ZUhhbmRs\nZXIgaGFuZGxlciA9IHZtLmdldEhhbmRsZXIoKTsKICAgICAgICB2YWwgPSBo\nYW5kbGVyLnRvRGF0YVN0b3JlVmFsdWUodm0sIHZhbCwgc3RvcmUpOwogICAg\nICAgIGlmICh2YWwgPT0gbnVsbCkgewogICAgICAgICAgICBpZiAoY29scy5s\nZW5ndGggPiAxKQogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBPYmplY3Rb\nY29scy5sZW5ndGhdOwogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAg\nICB9CgogICAgICAgIC8vIHJlbGF0aW9uIGlkcyBhcmUgcmV0dXJuZWQgYXMg\nc3RhdGUgbWFuYWdlcnM7IHJlc29sdmUgdGhlIGZpbmFsCiAgICAgICAgLy8g\nZGF0YXN0b3JlIHZhbHVlIGltbWVkaWF0ZWx5CiAgICAgICAgT2JqZWN0W10g\ndmFsczsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNvbHMubGVuZ3Ro\nOyBpKyspIHsKICAgICAgICAgICAgaWYgKCFjb2xzW2ldLmlzUmVsYXRpb25J\nZCgpKQogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIGlm\nICghKGhhbmRsZXIgaW5zdGFuY2VvZiBSZWxhdGlvbklkKSkKICAgICAgICAg\nICAgICAgIGJyZWFrOwogICAgICAgICAgICBpZiAoY29scy5sZW5ndGggPT0g\nMSkgewogICAgICAgICAgICAgICAgdmFsID0gKChSZWxhdGlvbklkKSBoYW5k\nbGVyKS50b1JlbGF0aW9uRGF0YVN0b3JlVmFsdWUKICAgICAgICAgICAgICAg\nICAgICAoKE9wZW5KUEFTdGF0ZU1hbmFnZXIpIHZhbCwgY29sc1tpXSk7CiAg\nICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB2YWxzID0gKE9i\namVjdFtdKSB2YWw7CiAgICAgICAgICAgICAgICB2YWxzW2ldID0gKChSZWxh\ndGlvbklkKSBoYW5kbGVyKS50b1JlbGF0aW9uRGF0YVN0b3JlVmFsdWUKICAg\nICAgICAgICAgICAgICAgICAoKE9wZW5KUEFTdGF0ZU1hbmFnZXIpIHZhbHNb\naV0sIGNvbHNbaV0pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAg\nIHJldHVybiB2YWw7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaHJvdyB0aGUg\ncHJvcGVyIGV4Y2VwdGlvbiBpZiB0aGUgZ2l2ZW4gaGFuZGxlci1jb250cm9s\nbGVkIHZhbHVlCiAgICAgKiByZXByZXNlbnRzIGFuIHVuam9pbmFibGUgcmVs\nYXRpb24uCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBhc3NlcnRK\nb2luYWJsZShWYWx1ZU1hcHBpbmcgdm0pIHsKICAgICAgICBDbGFzc01hcHBp\nbmcgcmVsID0gdm0uZ2V0VHlwZU1hcHBpbmcoKTsKICAgICAgICBpZiAocmVs\nICE9IG51bGwgJiYgKHJlbC5nZXRUYWJsZSgpID09IG51bGwKICAgICAgICAg\nICAgfHwgIXJlbC5nZXRUYWJsZSgpLmVxdWFscyh2bS5nZXRGaWVsZE1hcHBp\nbmcoKS5nZXRUYWJsZSgpKSkpCiAgICAgICAgICAgIHRocm93IFJlbGF0aW9u\nU3RyYXRlZ2llcy51bmpvaW5hYmxlKHZtKTsKICAgIH0KfQo=\n","encoding":"base64"}

