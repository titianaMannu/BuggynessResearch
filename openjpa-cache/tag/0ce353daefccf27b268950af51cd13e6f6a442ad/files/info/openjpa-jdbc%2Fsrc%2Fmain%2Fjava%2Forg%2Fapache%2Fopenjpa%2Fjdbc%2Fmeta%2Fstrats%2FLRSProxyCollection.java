{"sha":"a03dc2fdc365373b71814013bd0c249a3ccc0f83","node_id":"MDQ6QmxvYjIwNjM2NDphMDNkYzJmZGMzNjUzNzNiNzE4MTQwMTNiZDBjMjQ5YTNjY2MwZjgz","size":8609,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/a03dc2fdc365373b71814013bd0c249a3ccc0f83","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLm1ldGEuc3RyYXRzOwoKaW1wb3J0IGphdmEuc3FsLlNR\nTEV4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5JdGVyYXRvcjsKaW1wb3J0\nIGphdmEudXRpbC5Ob1N1Y2hFbGVtZW50RXhjZXB0aW9uOwoKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5jb25mLk9wZW5KUEFDb25maWd1cmF0aW9uOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMua2VybmVsLkpEQkNGZXRj\naENvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5rZXJuZWwuSkRCQ1N0b3JlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMubWV0YS5DbGFzc01hcHBpbmc7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5tZXRhLkZpZWxkTWFwcGluZzsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLnNjaGVtYS5Db2x1bW47CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEuamRiYy5zcWwuSm9pbnM7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEuamRiYy5zcWwuUmVzdWx0OwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmpkYmMuc3FsLlNRTEJ1ZmZlcjsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNxbC5TUUxFeGNlcHRpb25zOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNlbGVjdDsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLnNxbC5VbmlvbjsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5rZXJuZWwuT3BlbkpQQVN0YXRlTWFuYWdlcjsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5DbG9zZWFibGU7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuQWJzdHJhY3RMUlNQcm94eUNvbGxl\nY3Rpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5JbnZhbGlk\nU3RhdGVFeGNlcHRpb247CgovKioKICogTGFyZ2UgcmVzdWx0IHNldCBjb2xs\nZWN0aW9uLgogKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKi8KcHVibGljIGNs\nYXNzIExSU1Byb3h5Q29sbGVjdGlvbgogICAgZXh0ZW5kcyBBYnN0cmFjdExS\nU1Byb3h5Q29sbGVjdGlvbiB7CgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwg\nTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6ZXIuZm9yUGFja2FnZQogICAgICAg\nIChMUlNQcm94eUNvbGxlY3Rpb24uY2xhc3MpOwoKICAgIHByaXZhdGUgZmlu\nYWwgTFJTQ29sbGVjdGlvbkZpZWxkU3RyYXRlZ3kgX3N0cmF0OwoKICAgIHB1\nYmxpYyBMUlNQcm94eUNvbGxlY3Rpb24oTFJTQ29sbGVjdGlvbkZpZWxkU3Ry\nYXRlZ3kgc3RyYXQsCiAgICAgICAgT3BlbkpQQUNvbmZpZ3VyYXRpb24gY29u\nZikgewogICAgICAgIHN1cGVyKHN0cmF0LmdldEZpZWxkTWFwcGluZygpLmdl\ndEVsZW1lbnQoKS5nZXREZWNsYXJlZFR5cGUoKSwKICAgICAgICAgICAgc3Ry\nYXQuZ2V0RmllbGRNYXBwaW5nKCkuZ2V0T3JkZXJDb2x1bW4oKSAhPSBudWxs\nLCBjb25mKTsKICAgICAgICBfc3RyYXQgPSBzdHJhdDsKICAgIH0KCiAgICBw\ncm90ZWN0ZWQgaW50IGNvdW50KCkgewogICAgICAgIGZpbmFsIENsYXNzTWFw\ncGluZ1tdIGVsZW1zID0gX3N0cmF0LmdldEluZGVwZW5kZW50RWxlbWVudE1h\ncHBpbmdzCiAgICAgICAgICAgIChmYWxzZSk7CiAgICAgICAgZmluYWwgT3Bl\nbkpQQVN0YXRlTWFuYWdlciBzbSA9IGFzc2VydE93bmVyKCk7CiAgICAgICAg\nZmluYWwgSkRCQ1N0b3JlIHN0b3JlID0gZ2V0U3RvcmUoKTsKICAgICAgICBV\nbmlvbiB1bmlvbiA9IHN0b3JlLmdldFNRTEZhY3RvcnkoKS5uZXdVbmlvbgog\nICAgICAgICAgICAoTWF0aC5tYXgoMSwgZWxlbXMubGVuZ3RoKSk7CiAgICAg\nICAgdW5pb24uc2VsZWN0KG5ldyBVbmlvbi5TZWxlY3RvcigpIHsKICAgICAg\nICAgICAgcHVibGljIHZvaWQgc2VsZWN0KFNlbGVjdCBzZWwsIGludCBpZHgp\nIHsKICAgICAgICAgICAgICAgIENsYXNzTWFwcGluZyBlbGVtID0gKGVsZW1z\nLmxlbmd0aCA9PSAwKSA/IG51bGwgOiBlbGVtc1tpZHhdOwogICAgICAgICAg\nICAgICAgc2VsLndoZXJlRm9yZWlnbktleShfc3RyYXQuZ2V0Sm9pbkZvcmVp\nZ25LZXkoZWxlbSksCiAgICAgICAgICAgICAgICAgICAgc20uZ2V0T2JqZWN0\nSWQoKSwgX3N0cmF0LmdldEZpZWxkTWFwcGluZygpLgogICAgICAgICAgICAg\nICAgICAgIGdldERlZmluaW5nTWFwcGluZygpLCBzdG9yZSk7CiAgICAgICAg\nICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\ncmV0dXJuIHVuaW9uLmdldENvdW50KHN0b3JlKTsKICAgICAgICB9IGNhdGNo\nIChTUUxFeGNlcHRpb24gc2UpIHsKICAgICAgICAgICAgdGhyb3cgU1FMRXhj\nZXB0aW9ucy5nZXRTdG9yZShzZSwgc3RvcmUuZ2V0REJEaWN0aW9uYXJ5KCkp\nOwogICAgICAgIH0KICAgIH0KCiAgICBwcm90ZWN0ZWQgYm9vbGVhbiBoYXMo\nZmluYWwgT2JqZWN0IG9iaikgewogICAgICAgIGZpbmFsIENsYXNzTWFwcGlu\nZ1tdIGVsZW1zID0gX3N0cmF0LmdldEluZGVwZW5kZW50RWxlbWVudE1hcHBp\nbmdzCiAgICAgICAgICAgIChmYWxzZSk7CiAgICAgICAgZmluYWwgT3BlbkpQ\nQVN0YXRlTWFuYWdlciBzbSA9IGFzc2VydE93bmVyKCk7CiAgICAgICAgZmlu\nYWwgSkRCQ1N0b3JlIHN0b3JlID0gZ2V0U3RvcmUoKTsKICAgICAgICBVbmlv\nbiB1bmlvbiA9IHN0b3JlLmdldFNRTEZhY3RvcnkoKS5uZXdVbmlvbgogICAg\nICAgICAgICAoTWF0aC5tYXgoMSwgZWxlbXMubGVuZ3RoKSk7CiAgICAgICAg\ndW5pb24uc2VsZWN0KG5ldyBVbmlvbi5TZWxlY3RvcigpIHsKICAgICAgICAg\nICAgcHVibGljIHZvaWQgc2VsZWN0KFNlbGVjdCBzZWwsIGludCBpZHgpIHsK\nICAgICAgICAgICAgICAgIENsYXNzTWFwcGluZyBlbGVtID0gKGVsZW1zLmxl\nbmd0aCA9PSAwKSA/IG51bGwgOiBlbGVtc1tpZHhdOwogICAgICAgICAgICAg\nICAgc2VsLndoZXJlRm9yZWlnbktleShfc3RyYXQuZ2V0Sm9pbkZvcmVpZ25L\nZXkoZWxlbSksCiAgICAgICAgICAgICAgICAgICAgc20uZ2V0T2JqZWN0SWQo\nKSwgX3N0cmF0LmdldEZpZWxkTWFwcGluZygpLgogICAgICAgICAgICAgICAg\nICAgIGdldERlZmluaW5nTWFwcGluZygpLCBzdG9yZSk7CgogICAgICAgICAg\nICAgICAgT2JqZWN0IHZhbCA9IF9zdHJhdC50b0RhdGFTdG9yZVZhbHVlKG9i\naiwgc3RvcmUpOwogICAgICAgICAgICAgICAgQ29sdW1uW10gY29scyA9IF9z\ndHJhdC5nZXRFbGVtZW50Q29sdW1ucyhlbGVtKTsKICAgICAgICAgICAgICAg\nIE9iamVjdFtdIHZhbHMgPSAoY29scy5sZW5ndGggPT0gMSkgPyBudWxsIDog\nKE9iamVjdFtdKSB2YWw7CiAgICAgICAgICAgICAgICBTUUxCdWZmZXIgc3Fs\nID0gbmV3IFNRTEJ1ZmZlcihzdG9yZS5nZXREQkRpY3Rpb25hcnkoKSk7CiAg\nICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNvbHMubGVuZ3Ro\nOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBpZiAoaSA+IDApCiAgICAg\nICAgICAgICAgICAgICAgICAgIHNxbC5hcHBlbmQoIiBBTkQgIik7CgogICAg\nICAgICAgICAgICAgICAgIHNxbC5hcHBlbmQoc2VsLmdldENvbHVtbkFsaWFz\nKGNvbHNbaV0pKTsKICAgICAgICAgICAgICAgICAgICBpZiAodmFscyA9PSBu\ndWxsKQogICAgICAgICAgICAgICAgICAgICAgICBzcWwuYXBwZW5kKCh2YWwg\nPT0gbnVsbCkgPyAiIElTICIgOiAiID0gIikuCiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICBhcHBlbmRWYWx1ZSh2YWwsIGNvbHNbaV0pOwogICAgICAg\nICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgc3Fs\nLmFwcGVuZCgodmFsc1tpXSA9PSBudWxsKSA/ICIgSVMgIiA6ICIgPSAiKS4K\nICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVuZFZhbHVlKHZhbHNb\naV0sIGNvbHNbaV0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAg\nICAgc2VsLndoZXJlKHNxbCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsK\nCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIHVuaW9uLmdldENv\ndW50KHN0b3JlKSA+IDA7CiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9u\nIHNlKSB7CiAgICAgICAgICAgIHRocm93IFNRTEV4Y2VwdGlvbnMuZ2V0U3Rv\ncmUoc2UsIHN0b3JlLmdldERCRGljdGlvbmFyeSgpKTsKICAgICAgICB9CiAg\nICB9CgogICAgcHJvdGVjdGVkIEl0ZXJhdG9yIGl0cigpIHsKICAgICAgICBm\naW5hbCBDbGFzc01hcHBpbmdbXSBlbGVtcyA9IF9zdHJhdC5nZXRJbmRlcGVu\nZGVudEVsZW1lbnRNYXBwaW5ncyh0cnVlKTsKICAgICAgICBmaW5hbCBPcGVu\nSlBBU3RhdGVNYW5hZ2VyIHNtID0gYXNzZXJ0T3duZXIoKTsKICAgICAgICBm\naW5hbCBKREJDU3RvcmUgc3RvcmUgPSBnZXRTdG9yZSgpOwogICAgICAgIGZp\nbmFsIEpEQkNGZXRjaENvbmZpZ3VyYXRpb24gZmV0Y2ggPSBzdG9yZS5nZXRG\nZXRjaENvbmZpZ3VyYXRpb24oKTsKICAgICAgICBmaW5hbCBKb2luc1tdIHJl\nc0pvaW5zID0gbmV3IEpvaW5zW01hdGgubWF4KDEsIGVsZW1zLmxlbmd0aCld\nOwogICAgICAgIGZpbmFsIEZpZWxkTWFwcGluZyBmbSA9IF9zdHJhdC5nZXRG\naWVsZE1hcHBpbmcoKTsKCiAgICAgICAgVW5pb24gdW5pb24gPSBzdG9yZS5n\nZXRTUUxGYWN0b3J5KCkubmV3VW5pb24KICAgICAgICAgICAgKE1hdGgubWF4\nKDEsIGVsZW1zLmxlbmd0aCkpOwogICAgICAgIGlmIChmZXRjaC5nZXRTdWJj\nbGFzc0ZldGNoTW9kZShmbS5nZXRFbGVtZW50TWFwcGluZygpLgogICAgICAg\nICAgICBnZXRUeXBlTWFwcGluZygpKSAhPSBmZXRjaC5FQUdFUl9KT0lOKQog\nICAgICAgICAgICB1bmlvbi5hYm9ydFVuaW9uKCk7CiAgICAgICAgdW5pb24u\nc2V0TFJTKHRydWUpOwogICAgICAgIHVuaW9uLnNlbGVjdChuZXcgVW5pb24u\nU2VsZWN0b3IoKSB7CiAgICAgICAgICAgIHB1YmxpYyB2b2lkIHNlbGVjdChT\nZWxlY3Qgc2VsLCBpbnQgaWR4KSB7CiAgICAgICAgICAgICAgICBDbGFzc01h\ncHBpbmcgZWxlbSA9IChlbGVtcy5sZW5ndGggPT0gMCkgPyBudWxsIDogZWxl\nbXNbaWR4XTsKICAgICAgICAgICAgICAgIHNlbC53aGVyZUZvcmVpZ25LZXko\nX3N0cmF0LmdldEpvaW5Gb3JlaWduS2V5KGVsZW0pLAogICAgICAgICAgICAg\nICAgICAgIHNtLmdldE9iamVjdElkKCksIGZtLmdldERlZmluaW5nTWFwcGlu\nZygpLCBzdG9yZSk7CgogICAgICAgICAgICAgICAgLy8gb3JkZXIgYmVmb3Jl\nIHNlbGVjdCBpbiBjYXNlIHdlJ3JlIGZha2luZyB1bmlvbiB3aXRoCiAgICAg\nICAgICAgICAgICAvLyBtdWx0aXBsZSBzZWxlY3RzOyBvcmRlciB2YWxzIHVz\nZWQgdG8gbWVyZ2UgcmVzdWx0cwogICAgICAgICAgICAgICAgZm0ub3JkZXJM\nb2NhbChzZWwsIGVsZW0sIG51bGwpOwogICAgICAgICAgICAgICAgcmVzSm9p\nbnNbaWR4XSA9IF9zdHJhdC5qb2luRWxlbWVudFJlbGF0aW9uKHNlbC5uZXdK\nb2lucygpLAogICAgICAgICAgICAgICAgICAgIGVsZW0pOwogICAgICAgICAg\nICAgICAgZm0ub3JkZXJSZWxhdGlvbihzZWwsIGVsZW0sIHJlc0pvaW5zW2lk\neF0pOwogICAgICAgICAgICAgICAgX3N0cmF0LnNlbGVjdEVsZW1lbnQoc2Vs\nLCBlbGVtLCBzdG9yZSwgZmV0Y2gsIGZldGNoLkVBR0VSX0pPSU4sCiAgICAg\nICAgICAgICAgICAgICAgcmVzSm9pbnNbaWR4XSk7CiAgICAgICAgICAgIH0K\nICAgICAgICB9KTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgUmVzdWx0\nIHJlcyA9IHVuaW9uLmV4ZWN1dGUoc3RvcmUsIGZldGNoKTsKICAgICAgICAg\nICAgcmV0dXJuIG5ldyBSZXN1bHRJdGVyYXRvcihzbSwgc3RvcmUsIGZldGNo\nLCByZXMsIHJlc0pvaW5zKTsKICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRp\nb24gc2UpIHsKICAgICAgICAgICAgdGhyb3cgU1FMRXhjZXB0aW9ucy5nZXRT\ndG9yZShzZSwgc3RvcmUuZ2V0REJEaWN0aW9uYXJ5KCkpOwogICAgICAgIH0K\nICAgIH0KCiAgICBwcml2YXRlIE9wZW5KUEFTdGF0ZU1hbmFnZXIgYXNzZXJ0\nT3duZXIoKSB7CiAgICAgICAgT3BlbkpQQVN0YXRlTWFuYWdlciBzbSA9IGdl\ndE93bmVyKCk7CiAgICAgICAgaWYgKHNtID09IG51bGwpCiAgICAgICAgICAg\nIHRocm93IG5ldyBJbnZhbGlkU3RhdGVFeGNlcHRpb24oX2xvYy5nZXQoImxy\ncy1uby1vd25lciIsCiAgICAgICAgICAgICAgICBfc3RyYXQuZ2V0RmllbGRN\nYXBwaW5nKCkpKTsKICAgICAgICByZXR1cm4gc207CiAgICB9CgogICAgcHJp\ndmF0ZSBKREJDU3RvcmUgZ2V0U3RvcmUoKSB7CiAgICAgICAgcmV0dXJuIChK\nREJDU3RvcmUpIGdldE93bmVyKCkuZ2V0Q29udGV4dCgpLmdldFN0b3JlTWFu\nYWdlcigpLgogICAgICAgICAgICBnZXRJbm5lcm1vc3REZWxlZ2F0ZSgpOwog\nICAgfQoKICAgIC8qKgogICAgICogQ2xvc2VhYmxlIGl0ZXJhdG9yIGJ1aWx0\nIGFyb3VuZCBhIEpEQkMgcmVzdWx0LgogICAgICovCiAgICBwcml2YXRlIGNs\nYXNzIFJlc3VsdEl0ZXJhdG9yCiAgICAgICAgaW1wbGVtZW50cyBJdGVyYXRv\nciwgQ2xvc2VhYmxlIHsKCiAgICAgICAgcHJpdmF0ZSBmaW5hbCBPcGVuSlBB\nU3RhdGVNYW5hZ2VyIF9zbTsKICAgICAgICBwcml2YXRlIGZpbmFsIEpEQkNT\ndG9yZSBfc3RvcmU7CiAgICAgICAgcHJpdmF0ZSBmaW5hbCBKREJDRmV0Y2hD\nb25maWd1cmF0aW9uIF9mZXRjaDsKICAgICAgICBwcml2YXRlIGZpbmFsIFJl\nc3VsdCBfcmVzOwogICAgICAgIHByaXZhdGUgZmluYWwgSm9pbnNbXSBfam9p\nbnM7CiAgICAgICAgcHJpdmF0ZSBCb29sZWFuIF9uZXh0ID0gbnVsbDsKCiAg\nICAgICAgcHVibGljIFJlc3VsdEl0ZXJhdG9yKE9wZW5KUEFTdGF0ZU1hbmFn\nZXIgc20sIEpEQkNTdG9yZSBzdG9yZSwKICAgICAgICAgICAgSkRCQ0ZldGNo\nQ29uZmlndXJhdGlvbiBmZXRjaCwgUmVzdWx0IHJlcywgSm9pbnNbXSBqb2lu\ncykgewogICAgICAgICAgICBfc20gPSBzbTsKICAgICAgICAgICAgX3N0b3Jl\nID0gc3RvcmU7CiAgICAgICAgICAgIF9mZXRjaCA9IGZldGNoOwogICAgICAg\nICAgICBfcmVzID0gcmVzOwogICAgICAgICAgICBfam9pbnMgPSBqb2luczsK\nICAgICAgICB9CgogICAgICAgIHB1YmxpYyBib29sZWFuIGhhc05leHQoKSB7\nCiAgICAgICAgICAgIGlmIChfbmV4dCA9PSBudWxsKSB7CiAgICAgICAgICAg\nICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIF9uZXh0ID0gKF9yZXMu\nbmV4dCgpKSA/IEJvb2xlYW4uVFJVRSA6IEJvb2xlYW4uRkFMU0U7CiAgICAg\nICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gc2UpIHsKICAgICAg\nICAgICAgICAgICAgICB0aHJvdyBTUUxFeGNlcHRpb25zLmdldFN0b3JlKHNl\nLCBfc3RvcmUuZ2V0REJEaWN0aW9uYXJ5KCkpOwogICAgICAgICAgICAgICAg\nfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBfbmV4dC5ib29s\nZWFuVmFsdWUoKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBPYmplY3Qg\nbmV4dCgpIHsKICAgICAgICAgICAgaWYgKCFoYXNOZXh0KCkpCiAgICAgICAg\nICAgICAgICB0aHJvdyBuZXcgTm9TdWNoRWxlbWVudEV4Y2VwdGlvbigpOwog\nICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgX25leHQgPSBudWxs\nOwogICAgICAgICAgICAgICAgcmV0dXJuIF9zdHJhdC5sb2FkRWxlbWVudChf\nc20sIF9zdG9yZSwgX2ZldGNoLCBfcmVzLAogICAgICAgICAgICAgICAgICAg\nIF9qb2luc1tfcmVzLmluZGV4T2YoKV0pOwogICAgICAgICAgICB9IGNhdGNo\nIChTUUxFeGNlcHRpb24gc2UpIHsKICAgICAgICAgICAgICAgIHRocm93IFNR\nTEV4Y2VwdGlvbnMuZ2V0U3RvcmUoc2UsIF9zdG9yZS5nZXREQkRpY3Rpb25h\ncnkoKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHB1Ymxp\nYyB2b2lkIHJlbW92ZSgpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFVuc3Vw\ncG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAgICAg\nICBwdWJsaWMgdm9pZCBjbG9zZSgpIHsKICAgICAgICAgICAgX25leHQgPSBC\nb29sZWFuLkZBTFNFOwogICAgICAgICAgICBfcmVzLmNsb3NlKCk7CiAgICAg\nICAgfQogICAgfQp9Cgo=\n","encoding":"base64"}

