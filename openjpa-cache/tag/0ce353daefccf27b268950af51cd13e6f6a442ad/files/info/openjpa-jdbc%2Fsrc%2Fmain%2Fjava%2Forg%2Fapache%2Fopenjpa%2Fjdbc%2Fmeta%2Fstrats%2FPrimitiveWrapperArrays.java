{"sha":"421c1fa89dffc16f4ef35dc969fe3e63002d0a31","node_id":"MDQ6QmxvYjIwNjM2NDo0MjFjMWZhODlkZmZjMTZmNGVmMzVkYzk2OWZlM2U2MzAwMmQwYTMx","size":2779,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/421c1fa89dffc16f4ef35dc969fe3e63002d0a31","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLm1ldGEuc3RyYXRzOwoKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLm1ldGEuVmFsdWVNYXBwaW5nOwoKLyoqCiAqIFByaW1p\ndGl2ZSB3cmFwcGVyIGFycmF5IGhlbHBlciBtZXRob2RzLgogKgogKiBAYXV0\naG9yIE1hcmMgUHJ1ZCdob21tZWF1eAogKi8KY2xhc3MgUHJpbWl0aXZlV3Jh\ncHBlckFycmF5cyB7CgogICAgLyoqCiAgICAgKiBDb252ZXJ0IHRoZSBnaXZl\nbiBwcmltaXRpdmUgYXJyYXkgdG8gYSB3cmFwcGVyIGFycmF5IGlmIG5lZWRl\nZC4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBPYmplY3QgdG9PYmplY3RW\nYWx1ZShWYWx1ZU1hcHBpbmcgdm0sIGNoYXJbXSBhcnJheSkgewogICAgICAg\nIGlmIChhcnJheSA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gbnVsbDsK\nICAgICAgICBpZiAodm0uZ2V0VHlwZSgpLmdldENvbXBvbmVudFR5cGUoKSA9\nPSBDaGFyYWN0ZXIuY2xhc3MpIHsKICAgICAgICAgICAgQ2hhcmFjdGVyW10g\nb2JqZWN0QXJyYXkgPSBuZXcgQ2hhcmFjdGVyW2FycmF5Lmxlbmd0aF07CiAg\nICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBp\nKyspCiAgICAgICAgICAgICAgICBvYmplY3RBcnJheVtpXSA9IG5ldyBDaGFy\nYWN0ZXIoYXJyYXlbaV0pOwogICAgICAgICAgICByZXR1cm4gb2JqZWN0QXJy\nYXk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBhcnJheTsKICAgIH0KCiAg\nICAvKioKICAgICAqIENvbnZlcnQgdGhlIGdpdmVuIHZhbHVlIHRvIGEgcHJp\nbWl0aXZlIGFycmF5IGlmIG5lZWRlZC4KICAgICAqLwogICAgcHVibGljIHN0\nYXRpYyBjaGFyW10gdG9DaGFyQXJyYXkoT2JqZWN0IG9iKSB7CiAgICAgICAg\naWYgKG9iIGluc3RhbmNlb2YgQ2hhcmFjdGVyW10pIHsKICAgICAgICAgICAg\nQ2hhcmFjdGVyW10gY2hhck9iID0gKENoYXJhY3RlcltdKSBvYjsKICAgICAg\nICAgICAgY2hhcltdIGNoYXJzID0gbmV3IGNoYXJbY2hhck9iLmxlbmd0aF07\nCiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgY2hhck9iLmxlbmd0\naDsgaSsrKQogICAgICAgICAgICAgICAgY2hhcnNbaV0gPSBjaGFyT2JbaV0g\nPT0gbnVsbCA/IDAgOiBjaGFyT2JbaV0uY2hhclZhbHVlKCk7CiAgICAgICAg\nICAgIHJldHVybiBjaGFyczsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIChj\naGFyW10pIG9iOwogICAgfQoKICAgIC8qKgogICAgICogQ29udmVydCB0aGUg\nZ2l2ZW4gcHJpbWl0aXZlIGFycmF5IHRvIGEgd3JhcHBlciBhcnJheSBpZiBu\nZWVkZWQuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgT2JqZWN0IHRvT2Jq\nZWN0VmFsdWUoVmFsdWVNYXBwaW5nIHZtLCBieXRlW10gYXJyYXkpIHsKICAg\nICAgICBpZiAoYXJyYXkgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIG51\nbGw7CiAgICAgICAgaWYgKHZtLmdldFR5cGUoKS5nZXRDb21wb25lbnRUeXBl\nKCkgPT0gQnl0ZS5jbGFzcykgewogICAgICAgICAgICBCeXRlW10gb2JqZWN0\nQXJyYXkgPSBuZXcgQnl0ZVthcnJheS5sZW5ndGhdOwogICAgICAgICAgICBm\nb3IgKGludCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKQogICAgICAg\nICAgICAgICAgb2JqZWN0QXJyYXlbaV0gPSBuZXcgQnl0ZShhcnJheVtpXSk7\nCiAgICAgICAgICAgIHJldHVybiBvYmplY3RBcnJheTsKICAgICAgICB9CiAg\nICAgICAgcmV0dXJuIGFycmF5OwogICAgfQoKICAgIC8qKgogICAgICogQ29u\ndmVydCB0aGUgZ2l2ZW4gdmFsdWUgdG8gYSBwcmltaXRpdmUgYXJyYXkgaWYg\nbmVlZGVkLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGJ5dGVbXSB0b0J5\ndGVBcnJheShPYmplY3Qgb2IpIHsKICAgICAgICBpZiAob2IgaW5zdGFuY2Vv\nZiBCeXRlW10pIHsKICAgICAgICAgICAgQnl0ZVtdIGJ5dGVPYiA9IChCeXRl\nW10pIG9iOwogICAgICAgICAgICBieXRlW10gYnl0ZXMgPSBuZXcgYnl0ZVti\neXRlT2IubGVuZ3RoXTsKICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkg\nPCBieXRlT2IubGVuZ3RoOyBpKyspCiAgICAgICAgICAgICAgICBieXRlc1tp\nXSA9IGJ5dGVPYltpXSA9PSBudWxsID8gMCA6IGJ5dGVPYltpXS5ieXRlVmFs\ndWUoKTsKICAgICAgICAgICAgcmV0dXJuIGJ5dGVzOwogICAgICAgIH0KICAg\nICAgICByZXR1cm4gKGJ5dGVbXSkgb2I7CiAgICB9Cn0KCg==\n","encoding":"base64"}

