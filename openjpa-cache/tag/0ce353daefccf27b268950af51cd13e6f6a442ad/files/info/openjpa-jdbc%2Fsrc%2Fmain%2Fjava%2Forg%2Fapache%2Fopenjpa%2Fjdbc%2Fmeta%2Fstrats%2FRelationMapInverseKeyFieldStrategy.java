{"sha":"a8049ae41bf67780a2e9f69b8cd41425c2e4fa7f","node_id":"MDQ6QmxvYjIwNjM2NDphODA0OWFlNDFiZjY3NzgwYTJlOWY2OWI4Y2Q0MTQyNWMyZTRmYTdm","size":6012,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/a8049ae41bf67780a2e9f69b8cd41425c2e4fa7f","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLm1ldGEuc3RyYXRzOwoKaW1wb3J0IGphdmEuc3FsLlNR\nTEV4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOwppbXBv\ncnQgamF2YS51dGlsLk1hcDsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nY29uZi5PcGVuSlBBQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLmtlcm5lbC5KREJDRmV0Y2hDb25maWd1cmF0aW9uOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMua2VybmVsLkpEQkNTdG9y\nZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1ldGEuQ2xhc3NN\nYXBwaW5nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5G\naWVsZE1hcHBpbmc7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5t\nZXRhLlZhbHVlTWFwcGluZzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5q\nZGJjLnNjaGVtYS5Db2x1bW47CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5zY2hlbWEuRm9yZWlnbktleTsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLnNxbC5Kb2luczsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5qZGJjLnNxbC5SZXN1bHQ7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5zcWwuU2VsZWN0OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpk\nYmMuc3FsLlVuaW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5l\nbC5PcGVuSlBBU3RhdGVNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmxpYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5tZXRhLkphdmFUeXBlczsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS51dGlsLkludGVybmFsRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnV0aWwuTWV0YURhdGFFeGNlcHRpb247CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEudXRpbC5Qcm94eTsKCi8qKgogKiBVc2VzIGFuIGludmVy\nc2UgZm9yZWlnbiBrZXkgaW4gdGhlIHRhYmxlIG9mIHRoZSBtYXAgdmFsdWUg\ndG8gZGV0ZXJtaW5lCiAqIG1hcCB2YWx1ZXMuIERlcml2ZXMgbWFwIGtleXMg\nZnJvbSBhIGZpZWxkIGluIGVhY2ggdmFsdWUuCiAqCiAqIEBhdXRob3IgQWJl\nIFdoaXRlCiAqLwpwdWJsaWMgY2xhc3MgUmVsYXRpb25NYXBJbnZlcnNlS2V5\nRmllbGRTdHJhdGVneQogICAgZXh0ZW5kcyBSZWxhdGlvblRvTWFueUludmVy\nc2VLZXlGaWVsZFN0cmF0ZWd5CiAgICBpbXBsZW1lbnRzIExSU01hcEZpZWxk\nU3RyYXRlZ3kgewoKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvY2FsaXpl\nciBfbG9jID0gTG9jYWxpemVyLmZvclBhY2thZ2UKICAgICAgICAoUmVsYXRp\nb25NYXBJbnZlcnNlS2V5RmllbGRTdHJhdGVneS5jbGFzcyk7CgogICAgcHVi\nbGljIEZpZWxkTWFwcGluZyBnZXRGaWVsZE1hcHBpbmcoKSB7CiAgICAgICAg\ncmV0dXJuIGZpZWxkOwogICAgfQoKICAgIHB1YmxpYyBDbGFzc01hcHBpbmdb\nXSBnZXRJbmRlcGVuZGVudEtleU1hcHBpbmdzKGJvb2xlYW4gdHJhdmVyc2Up\nIHsKICAgICAgICByZXR1cm4gQ2xhc3NNYXBwaW5nLkVNUFRZX01BUFBJTkdT\nOwogICAgfQoKICAgIHB1YmxpYyBDbGFzc01hcHBpbmdbXSBnZXRJbmRlcGVu\nZGVudFZhbHVlTWFwcGluZ3MoYm9vbGVhbiB0cmF2ZXJzZSkgewogICAgICAg\nIHJldHVybiBnZXRJbmRlcGVuZGVudEVsZW1lbnRNYXBwaW5ncyh0cmF2ZXJz\nZSk7CiAgICB9CgogICAgcHVibGljIENvbHVtbltdIGdldEtleUNvbHVtbnMo\nQ2xhc3NNYXBwaW5nIGNscykgewogICAgICAgIHJldHVybiBjbHMuZ2V0Rmll\nbGRNYXBwaW5nKGZpZWxkLmdldEtleSgpLgogICAgICAgICAgICBnZXRWYWx1\nZU1hcHBlZEJ5TWV0YURhdGEoKS5nZXRJbmRleCgpKS5nZXRDb2x1bW5zKCk7\nCiAgICB9CgogICAgcHVibGljIENvbHVtbltdIGdldFZhbHVlQ29sdW1ucyhD\nbGFzc01hcHBpbmcgY2xzKSB7CiAgICAgICAgcmV0dXJuIGNscy5nZXRQcmlt\nYXJ5S2V5Q29sdW1ucygpOwogICAgfQoKICAgIHB1YmxpYyBGb3JlaWduS2V5\nIGdldEpvaW5Gb3JlaWduS2V5KENsYXNzTWFwcGluZyBjbHMpIHsKICAgICAg\nICByZXR1cm4gc3VwZXIuZ2V0Sm9pbkZvcmVpZ25LZXkoY2xzKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBzZWxlY3RLZXkoU2VsZWN0IHNlbCwgQ2xhc3NN\nYXBwaW5nIGtleSwgT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwKICAgICAgICBK\nREJDU3RvcmUgc3RvcmUsIEpEQkNGZXRjaENvbmZpZ3VyYXRpb24gZmV0Y2gs\nIEpvaW5zIGpvaW5zKSB7CiAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhj\nZXB0aW9uKCk7CiAgICB9CgogICAgcHVibGljIE9iamVjdCBsb2FkS2V5KE9w\nZW5KUEFTdGF0ZU1hbmFnZXIgc20sIEpEQkNTdG9yZSBzdG9yZSwKICAgICAg\nICBKREJDRmV0Y2hDb25maWd1cmF0aW9uIGZldGNoLCBSZXN1bHQgcmVzLCBK\nb2lucyBqb2lucykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAg\nICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgIH0KCiAg\nICBwdWJsaWMgT2JqZWN0IGRlcml2ZUtleShKREJDU3RvcmUgc3RvcmUsIE9i\namVjdCB2YWx1ZSkgewogICAgICAgIE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20g\nPSBSZWxhdGlvblN0cmF0ZWdpZXMuZ2V0U3RhdGVNYW5hZ2VyKHZhbHVlLAog\nICAgICAgICAgICBzdG9yZS5nZXRDb250ZXh0KCkpOwogICAgICAgIHJldHVy\nbiAoc20gPT0gbnVsbCkgPyBudWxsIDogc20uZmV0Y2hGaWVsZChmaWVsZC5n\nZXRLZXkoKS4KICAgICAgICAgICAgZ2V0VmFsdWVNYXBwZWRCeU1ldGFEYXRh\nKCkuZ2V0SW5kZXgoKSwgZmFsc2UpOwogICAgfQoKICAgIHB1YmxpYyBPYmpl\nY3QgZGVyaXZlVmFsdWUoSkRCQ1N0b3JlIHN0b3JlLCBPYmplY3Qga2V5KSB7\nCiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nc2VsZWN0VmFsdWUoU2VsZWN0IHNlbCwgQ2xhc3NNYXBwaW5nIHZhbCwKICAg\nICAgICBPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBKREJDU3RvcmUgc3RvcmUs\nIEpEQkNGZXRjaENvbmZpZ3VyYXRpb24gZmV0Y2gsIAogICAgICAgIEpvaW5z\nIGpvaW5zKSB7CiAgICAgICAgc2VsZWN0RWxlbWVudChzZWwsIHZhbCwgc3Rv\ncmUsIGZldGNoLCBKREJDRmV0Y2hDb25maWd1cmF0aW9uLkVBR0VSX05PTkUs\nCiAgICAgICAgICAgIGpvaW5zKTsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0\nIGxvYWRWYWx1ZShPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBKREJDU3RvcmUg\nc3RvcmUsCiAgICAgICAgSkRCQ0ZldGNoQ29uZmlndXJhdGlvbiBmZXRjaCwg\nUmVzdWx0IHJlcywgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4\nY2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGxvYWRFbGVtZW50KHNtLCBzdG9y\nZSwgZmV0Y2gsIHJlcywgam9pbnMpOwogICAgfQoKICAgIHB1YmxpYyBSZXN1\nbHRbXSBnZXRSZXN1bHRzKGZpbmFsIE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20s\nCiAgICAgICAgZmluYWwgSkRCQ1N0b3JlIHN0b3JlLCBmaW5hbCBKREJDRmV0\nY2hDb25maWd1cmF0aW9uIGZldGNoLAogICAgICAgIGZpbmFsIGludCBlYWdl\nck1vZGUsIGZpbmFsIEpvaW5zW10gam9pbnMsIGJvb2xlYW4gbHJzKQogICAg\nICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIFZhbHVlTWFwcGlu\nZyB2YWwgPSBmaWVsZC5nZXRFbGVtZW50TWFwcGluZygpOwogICAgICAgIGZp\nbmFsIENsYXNzTWFwcGluZ1tdIHZhbHMgPSB2YWwuZ2V0SW5kZXBlbmRlbnRU\neXBlTWFwcGluZ3MoKTsKICAgICAgICBVbmlvbiB1bmlvbiA9IHN0b3JlLmdl\ndFNRTEZhY3RvcnkoKS5uZXdVbmlvbih2YWxzLmxlbmd0aCk7CiAgICAgICAg\naWYgKGZldGNoLmdldFN1YmNsYXNzRmV0Y2hNb2RlKHZhbC5nZXRUeXBlTWFw\ncGluZygpKQogICAgICAgICAgICAhPSBKREJDRmV0Y2hDb25maWd1cmF0aW9u\nLkVBR0VSX0pPSU4pCiAgICAgICAgICAgIHVuaW9uLmFib3J0VW5pb24oKTsK\nICAgICAgICB1bmlvbi5zZXRMUlMobHJzKTsKICAgICAgICB1bmlvbi5zZWxl\nY3QobmV3IFVuaW9uLlNlbGVjdG9yKCkgewogICAgICAgICAgICBwdWJsaWMg\ndm9pZCBzZWxlY3QoU2VsZWN0IHNlbCwgaW50IGlkeCkgewogICAgICAgICAg\nICAgICAgam9pbnNbMV0gPSBzZWxlY3RBbGwoc2VsLCB2YWxzW2lkeF0sIHNt\nLCBzdG9yZSwgZmV0Y2gsCiAgICAgICAgICAgICAgICAgICAgZWFnZXJNb2Rl\nKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIFJlc3VsdCBy\nZXMgPSB1bmlvbi5leGVjdXRlKHN0b3JlLCBmZXRjaCk7CiAgICAgICAgcmV0\ndXJuIG5ldyBSZXN1bHRbXXsgcmVzLCByZXMgfTsKICAgIH0KCiAgICBwdWJs\naWMgSm9pbnMgam9pbktleVJlbGF0aW9uKEpvaW5zIGpvaW5zLCBDbGFzc01h\ncHBpbmcga2V5KSB7CiAgICAgICAgcmV0dXJuIGpvaW5zOwogICAgfQoKICAg\nIHB1YmxpYyBKb2lucyBqb2luVmFsdWVSZWxhdGlvbihKb2lucyBqb2lucywg\nQ2xhc3NNYXBwaW5nIHZhbCkgewogICAgICAgIHJldHVybiBqb2luRWxlbWVu\ndFJlbGF0aW9uKGpvaW5zLCB2YWwpOwogICAgfQoKICAgIHByb3RlY3RlZCBQ\ncm94eSBuZXdMUlNQcm94eShPcGVuSlBBQ29uZmlndXJhdGlvbiBjb25mKSB7\nCiAgICAgICAgcmV0dXJuIG5ldyBMUlNQcm94eU1hcCh0aGlzLCBjb25mKTsK\nICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBhZGQoSkRCQ1N0b3JlIHN0b3Jl\nLCBPYmplY3QgY29sbCwgT2JqZWN0IG9iaikgewogICAgICAgIGlmIChvYmog\nIT0gbnVsbCkKICAgICAgICAgICAgKChNYXApIGNvbGwpLnB1dChkZXJpdmVL\nZXkoc3RvcmUsIG9iaiksIG9iaik7CiAgICB9CgogICAgcHJvdGVjdGVkIENv\nbGxlY3Rpb24gdG9Db2xsZWN0aW9uKE9iamVjdCB2YWwpIHsKICAgICAgICBy\nZXR1cm4gKHZhbCA9PSBudWxsKSA/IG51bGwgOiAoKE1hcCkgdmFsKS52YWx1\nZXMoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBtYXAoYm9vbGVhbiBhZGFw\ndCkgewogICAgICAgIGlmIChmaWVsZC5nZXRUeXBlQ29kZSgpICE9IEphdmFU\neXBlcy5NQVApCiAgICAgICAgICAgIHRocm93IG5ldyBNZXRhRGF0YUV4Y2Vw\ndGlvbihfbG9jLmdldCgibm90LW1hcCIsIGZpZWxkKSk7CiAgICAgICAgaWYg\nKGZpZWxkLmdldEtleSgpLmdldFZhbHVlTWFwcGVkQnkoKSA9PSBudWxsKQog\nICAgICAgICAgICB0aHJvdyBuZXcgTWV0YURhdGFFeGNlcHRpb24oX2xvYy5n\nZXQoIm5vdC1tYXBwZWQtYnkta2V5IiwgZmllbGQpKTsKICAgICAgICBzdXBl\nci5tYXAoYWRhcHQpOwogICAgfQoKICAgIHB1YmxpYyBKb2lucyBqb2luS2V5\nKEpvaW5zIGpvaW5zLCBib29sZWFuIGZvcmNlT3V0ZXIpIHsKICAgICAgICBy\nZXR1cm4gam9pblJlbGF0aW9uKGpvaW4oam9pbnMsIGZvcmNlT3V0ZXIpLCBm\nb3JjZU91dGVyLCBmYWxzZSk7CiAgICB9Cn0K\n","encoding":"base64"}

