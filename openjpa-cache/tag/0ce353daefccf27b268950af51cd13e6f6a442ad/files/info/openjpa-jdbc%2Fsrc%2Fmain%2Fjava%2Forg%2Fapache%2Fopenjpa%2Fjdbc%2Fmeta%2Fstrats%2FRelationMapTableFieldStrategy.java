{"sha":"956b4e90c3aff1714b0cbeb3fd5ef5ed00aa63e8","node_id":"MDQ6QmxvYjIwNjM2NDo5NTZiNGU5MGMzYWZmMTcxNGIwY2JlYjNmZDVlZjVlZDAwYWE2M2U4","size":5972,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/956b4e90c3aff1714b0cbeb3fd5ef5ed00aa63e8","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLm1ldGEuc3RyYXRzOwoKaW1wb3J0IGphdmEuc3FsLlNR\nTEV4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOwppbXBv\ncnQgamF2YS51dGlsLk1hcDsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nY29uZi5PcGVuSlBBQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLmtlcm5lbC5KREJDRmV0Y2hDb25maWd1cmF0aW9uOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMua2VybmVsLkpEQkNTdG9y\nZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1ldGEuQ2xhc3NN\nYXBwaW5nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5G\naWVsZE1hcHBpbmc7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5t\nZXRhLlZhbHVlTWFwcGluZzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5q\nZGJjLnNjaGVtYS5Db2x1bW47CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5zY2hlbWEuRm9yZWlnbktleTsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLnNxbC5Kb2luczsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5qZGJjLnNxbC5SZXN1bHQ7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5zcWwuU2VsZWN0OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpk\nYmMuc3FsLlVuaW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5l\nbC5PcGVuSlBBU3RhdGVNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmxpYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5tZXRhLkphdmFUeXBlczsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS51dGlsLkludGVybmFsRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnV0aWwuTWV0YURhdGFFeGNlcHRpb247CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEudXRpbC5Qcm94eTsKCi8qKgogKiBVc2VzIGFuIGFzc29j\naWF0aW9uIHRhYmxlIHRvIGhvbGQgbWFwIHZhbHVlcy4gRGVyaXZlcyBtYXAg\na2V5cyBmcm9tCiAqIGEgZmllbGQgaW4gZWFjaCB2YWx1ZS4KICoKICogQGF1\ndGhvciBBYmUgV2hpdGUKICovCnB1YmxpYyBjbGFzcyBSZWxhdGlvbk1hcFRh\nYmxlRmllbGRTdHJhdGVneQogICAgZXh0ZW5kcyBSZWxhdGlvblRvTWFueVRh\nYmxlRmllbGRTdHJhdGVneQogICAgaW1wbGVtZW50cyBMUlNNYXBGaWVsZFN0\ncmF0ZWd5IHsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6ZXIg\nX2xvYyA9IExvY2FsaXplci5mb3JQYWNrYWdlCiAgICAgICAgKFJlbGF0aW9u\nTWFwVGFibGVGaWVsZFN0cmF0ZWd5LmNsYXNzKTsKCiAgICBwdWJsaWMgRmll\nbGRNYXBwaW5nIGdldEZpZWxkTWFwcGluZygpIHsKICAgICAgICByZXR1cm4g\nZmllbGQ7CiAgICB9CgogICAgcHVibGljIENsYXNzTWFwcGluZ1tdIGdldElu\nZGVwZW5kZW50S2V5TWFwcGluZ3MoYm9vbGVhbiB0cmF2ZXJzZSkgewogICAg\nICAgIHJldHVybiBDbGFzc01hcHBpbmcuRU1QVFlfTUFQUElOR1M7CiAgICB9\nCgogICAgcHVibGljIENsYXNzTWFwcGluZ1tdIGdldEluZGVwZW5kZW50VmFs\ndWVNYXBwaW5ncyhib29sZWFuIHRyYXZlcnNlKSB7CiAgICAgICAgcmV0dXJu\nIGdldEluZGVwZW5kZW50RWxlbWVudE1hcHBpbmdzKHRyYXZlcnNlKTsKICAg\nIH0KCiAgICBwdWJsaWMgRm9yZWlnbktleSBnZXRKb2luRm9yZWlnbktleShD\nbGFzc01hcHBpbmcgY2xzKSB7CiAgICAgICAgcmV0dXJuIHN1cGVyLmdldEpv\naW5Gb3JlaWduS2V5KGNscyk7CiAgICB9CgogICAgcHVibGljIENvbHVtbltd\nIGdldEtleUNvbHVtbnMoQ2xhc3NNYXBwaW5nIGNscykgewogICAgICAgIHJl\ndHVybiBjbHMuZ2V0RmllbGRNYXBwaW5nKGZpZWxkLmdldEtleSgpLgogICAg\nICAgICAgICBnZXRWYWx1ZU1hcHBlZEJ5TWV0YURhdGEoKS5nZXRJbmRleCgp\nKS5nZXRDb2x1bW5zKCk7CiAgICB9CgogICAgcHVibGljIENvbHVtbltdIGdl\ndFZhbHVlQ29sdW1ucyhDbGFzc01hcHBpbmcgY2xzKSB7CiAgICAgICAgcmV0\ndXJuIGZpZWxkLmdldEVsZW1lbnRNYXBwaW5nKCkuZ2V0Q29sdW1ucygpOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHNlbGVjdEtleShTZWxlY3Qgc2VsLCBD\nbGFzc01hcHBpbmcga2V5LCBPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLAogICAg\nICAgIEpEQkNTdG9yZSBzdG9yZSwgSkRCQ0ZldGNoQ29uZmlndXJhdGlvbiBm\nZXRjaCwgSm9pbnMgam9pbnMpIHsKICAgICAgICB0aHJvdyBuZXcgSW50ZXJu\nYWxFeGNlcHRpb24oKTsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IGxvYWRL\nZXkoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgSkRCQ1N0b3JlIHN0b3JlLAog\nICAgICAgIEpEQkNGZXRjaENvbmZpZ3VyYXRpb24gZmV0Y2gsIFJlc3VsdCBy\nZXMsIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24g\newogICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwogICAg\nfQoKICAgIHB1YmxpYyBPYmplY3QgZGVyaXZlS2V5KEpEQkNTdG9yZSBzdG9y\nZSwgT2JqZWN0IHZhbHVlKSB7CiAgICAgICAgT3BlbkpQQVN0YXRlTWFuYWdl\nciBzbSA9IFJlbGF0aW9uU3RyYXRlZ2llcy5nZXRTdGF0ZU1hbmFnZXIodmFs\ndWUsCiAgICAgICAgICAgIHN0b3JlLmdldENvbnRleHQoKSk7CiAgICAgICAg\ncmV0dXJuIChzbSA9PSBudWxsKSA/IG51bGwgOiBzbS5mZXRjaEZpZWxkKGZp\nZWxkLmdldEtleSgpLgogICAgICAgICAgICBnZXRWYWx1ZU1hcHBlZEJ5TWV0\nYURhdGEoKS5nZXRJbmRleCgpLCBmYWxzZSk7CiAgICB9CgogICAgcHVibGlj\nIE9iamVjdCBkZXJpdmVWYWx1ZShKREJDU3RvcmUgc3RvcmUsIE9iamVjdCBr\nZXkpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBzZWxlY3RWYWx1ZShTZWxlY3Qgc2VsLCBDbGFzc01hcHBpbmcgdmFs\nLAogICAgICAgIE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIEpEQkNTdG9yZSBz\ndG9yZSwgSkRCQ0ZldGNoQ29uZmlndXJhdGlvbiBmZXRjaCwgCiAgICAgICAg\nSm9pbnMgam9pbnMpIHsKICAgICAgICBzZWxlY3RFbGVtZW50KHNlbCwgdmFs\nLCBzdG9yZSwgZmV0Y2gsIEpEQkNGZXRjaENvbmZpZ3VyYXRpb24uRUFHRVJf\nTk9ORSwKICAgICAgICAgICAgam9pbnMpOwogICAgfQoKICAgIHB1YmxpYyBP\nYmplY3QgbG9hZFZhbHVlKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIEpEQkNT\ndG9yZSBzdG9yZSwKICAgICAgICBKREJDRmV0Y2hDb25maWd1cmF0aW9uIGZl\ndGNoLCBSZXN1bHQgcmVzLCBKb2lucyBqb2lucykKICAgICAgICB0aHJvd3Mg\nU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gbG9hZEVsZW1lbnQoc20s\nIHN0b3JlLCBmZXRjaCwgcmVzLCBqb2lucyk7CiAgICB9CgogICAgcHVibGlj\nIFJlc3VsdFtdIGdldFJlc3VsdHMoZmluYWwgT3BlbkpQQVN0YXRlTWFuYWdl\nciBzbSwKICAgICAgICBmaW5hbCBKREJDU3RvcmUgc3RvcmUsIGZpbmFsIEpE\nQkNGZXRjaENvbmZpZ3VyYXRpb24gZmV0Y2gsCiAgICAgICAgZmluYWwgaW50\nIGVhZ2VyTW9kZSwgZmluYWwgSm9pbnNbXSBqb2lucywgYm9vbGVhbiBscnMp\nCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgVmFsdWVN\nYXBwaW5nIHZhbCA9IGZpZWxkLmdldEVsZW1lbnRNYXBwaW5nKCk7CiAgICAg\nICAgZmluYWwgQ2xhc3NNYXBwaW5nW10gdmFscyA9IHZhbC5nZXRJbmRlcGVu\nZGVudFR5cGVNYXBwaW5ncygpOwogICAgICAgIFVuaW9uIHVuaW9uID0gc3Rv\ncmUuZ2V0U1FMRmFjdG9yeSgpLm5ld1VuaW9uKHZhbHMubGVuZ3RoKTsKICAg\nICAgICBpZiAoZmV0Y2guZ2V0U3ViY2xhc3NGZXRjaE1vZGUodmFsLmdldFR5\ncGVNYXBwaW5nKCkpCiAgICAgICAgICAgICE9IEpEQkNGZXRjaENvbmZpZ3Vy\nYXRpb24uRUFHRVJfSk9JTikKICAgICAgICAgICAgdW5pb24uYWJvcnRVbmlv\nbigpOwogICAgICAgIHVuaW9uLnNldExSUyhscnMpOwogICAgICAgIHVuaW9u\nLnNlbGVjdChuZXcgVW5pb24uU2VsZWN0b3IoKSB7CiAgICAgICAgICAgIHB1\nYmxpYyB2b2lkIHNlbGVjdChTZWxlY3Qgc2VsLCBpbnQgaWR4KSB7CiAgICAg\nICAgICAgICAgICBqb2luc1sxXSA9IHNlbGVjdEFsbChzZWwsIHZhbHNbaWR4\nXSwgc20sIHN0b3JlLCBmZXRjaCwKICAgICAgICAgICAgICAgICAgICBlYWdl\nck1vZGUpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgUmVz\ndWx0IHJlcyA9IHVuaW9uLmV4ZWN1dGUoc3RvcmUsIGZldGNoKTsKICAgICAg\nICByZXR1cm4gbmV3IFJlc3VsdFtdeyByZXMsIHJlcyB9OwogICAgfQoKICAg\nIHB1YmxpYyBKb2lucyBqb2luS2V5UmVsYXRpb24oSm9pbnMgam9pbnMsIENs\nYXNzTWFwcGluZyBrZXkpIHsKICAgICAgICByZXR1cm4gam9pbnM7CiAgICB9\nCgogICAgcHVibGljIEpvaW5zIGpvaW5WYWx1ZVJlbGF0aW9uKEpvaW5zIGpv\naW5zLCBDbGFzc01hcHBpbmcgdmFsKSB7CiAgICAgICAgcmV0dXJuIGpvaW5F\nbGVtZW50UmVsYXRpb24oam9pbnMsIHZhbCk7CiAgICB9CgogICAgcHJvdGVj\ndGVkIFByb3h5IG5ld0xSU1Byb3h5KE9wZW5KUEFDb25maWd1cmF0aW9uIGNv\nbmYpIHsKICAgICAgICByZXR1cm4gbmV3IExSU1Byb3h5TWFwKHRoaXMsIGNv\nbmYpOwogICAgfQoKICAgIHByb3RlY3RlZCB2b2lkIGFkZChKREJDU3RvcmUg\nc3RvcmUsIE9iamVjdCBjb2xsLCBPYmplY3Qgb2JqKSB7CiAgICAgICAgaWYg\nKG9iaiAhPSBudWxsKQogICAgICAgICAgICAoKE1hcCkgY29sbCkucHV0KGRl\ncml2ZUtleShzdG9yZSwgb2JqKSwgb2JqKTsKICAgIH0KCiAgICBwcm90ZWN0\nZWQgQ29sbGVjdGlvbiB0b0NvbGxlY3Rpb24oT2JqZWN0IHZhbCkgewogICAg\nICAgIHJldHVybiAodmFsID09IG51bGwpID8gbnVsbCA6ICgoTWFwKSB2YWwp\nLnZhbHVlcygpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIG1hcChib29sZWFu\nIGFkYXB0KSB7CiAgICAgICAgaWYgKGZpZWxkLmdldFR5cGVDb2RlKCkgIT0g\nSmF2YVR5cGVzLk1BUCkKICAgICAgICAgICAgdGhyb3cgbmV3IE1ldGFEYXRh\nRXhjZXB0aW9uKF9sb2MuZ2V0KCJub3QtbWFwIiwgZmllbGQpKTsKICAgICAg\nICBpZiAoZmllbGQuZ2V0S2V5KCkuZ2V0VmFsdWVNYXBwZWRCeSgpID09IG51\nbGwpCiAgICAgICAgICAgIHRocm93IG5ldyBNZXRhRGF0YUV4Y2VwdGlvbihf\nbG9jLmdldCgibm90LW1hcHBlZC1ieS1rZXkiLCBmaWVsZCkpOwogICAgICAg\nIHN1cGVyLm1hcChhZGFwdCk7CiAgICB9CgogICAgcHVibGljIEpvaW5zIGpv\naW5LZXkoSm9pbnMgam9pbnMsIGJvb2xlYW4gZm9yY2VPdXRlcikgewogICAg\nICAgIHJldHVybiBqb2luUmVsYXRpb24oam9pbihqb2lucywgZm9yY2VPdXRl\nciksIGZvcmNlT3V0ZXIsIGZhbHNlKTsKICAgIH0KfQo=\n","encoding":"base64"}

