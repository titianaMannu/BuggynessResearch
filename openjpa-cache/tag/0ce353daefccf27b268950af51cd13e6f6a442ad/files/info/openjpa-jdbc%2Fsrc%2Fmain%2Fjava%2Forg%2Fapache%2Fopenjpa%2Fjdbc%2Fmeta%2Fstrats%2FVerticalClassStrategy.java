{"sha":"3887b522f2c52446b529530e59ba5ae56ba11bb5","node_id":"MDQ6QmxvYjIwNjM2NDozODg3YjUyMmYyYzUyNDQ2YjUyOTUzMGU1OWJhNWFlNTZiYTExYmI1","size":5614,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/3887b522f2c52446b529530e59ba5ae56ba11bb5","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLm1ldGEuc3RyYXRzOwoKaW1wb3J0IGphdmEuc3FsLlNR\nTEV4Y2VwdGlvbjsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5r\nZXJuZWwuSkRCQ0ZldGNoQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLmtlcm5lbC5KREJDU3RvcmU7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLkNsYXNzTWFwcGluZzsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1ldGEuQ2xhc3NNYXBwaW5nSW5m\nbzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1ldGEuRGVsZWdh\ndGluZ0pvaW5hYmxlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMu\nbWV0YS5Kb2luYWJsZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLnNjaGVtYS5Db2x1bW47CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5zY2hlbWEuRm9yZWlnbktleTsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5qZGJjLnNjaGVtYS5QcmltYXJ5S2V5OwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmpkYmMuc2NoZW1hLlRhYmxlOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmpkYmMuc3FsLkpvaW5zOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmpkYmMuc3FsLlJvdzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5q\nZGJjLnNxbC5Sb3dNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMuc3FsLlNlbGVjdDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5r\nZXJuZWwuT3BlbkpQQVN0YXRlTWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6ZXI7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEudXRpbC5NZXRhRGF0YUV4Y2VwdGlvbjsKCi8qKgogKiBNYXBw\naW5nIGZvciBzdWJjbGFzc2VzIHRoYXQgam9pbiB0byB0aGVpciBzdXBlcmNs\nYXNzIHRhYmxlLgogKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKi8KcHVibGlj\nIGNsYXNzIFZlcnRpY2FsQ2xhc3NTdHJhdGVneQogICAgZXh0ZW5kcyBBYnN0\ncmFjdENsYXNzU3RyYXRlZ3kgewoKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwg\nU3RyaW5nIEFMSUFTID0gInZlcnRpY2FsIjsKCiAgICBwcml2YXRlIHN0YXRp\nYyBmaW5hbCBMb2NhbGl6ZXIgX2xvYyA9IExvY2FsaXplci5mb3JQYWNrYWdl\nCiAgICAgICAgKFZlcnRpY2FsQ2xhc3NTdHJhdGVneS5jbGFzcyk7CgogICAg\ncHJpdmF0ZSBCb29sZWFuIF9ma09pZCA9IG51bGw7CgogICAgcHVibGljIFN0\ncmluZyBnZXRBbGlhcygpIHsKICAgICAgICByZXR1cm4gQUxJQVM7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgbWFwKGJvb2xlYW4gYWRhcHQpIHsKICAgICAg\nICBDbGFzc01hcHBpbmcgc3VwID0gY2xzLmdldE1hcHBlZFBDU3VwZXJjbGFz\nc01hcHBpbmcoKTsKICAgICAgICBpZiAoc3VwID09IG51bGwpCiAgICAgICAg\nICAgIHRocm93IG5ldyBNZXRhRGF0YUV4Y2VwdGlvbihfbG9jLmdldCgibm90\nLXN1YiIsIGNscykpOwoKICAgICAgICBDbGFzc01hcHBpbmdJbmZvIGluZm8g\nPSBjbHMuZ2V0TWFwcGluZ0luZm8oKTsKICAgICAgICBpbmZvLmFzc2VydE5v\nSW5kZXgoY2xzLCBmYWxzZSk7CiAgICAgICAgaW5mby5hc3NlcnROb1VuaXF1\nZShjbHMsIGZhbHNlKTsKCiAgICAgICAgLy8gZm9yZWlnbiBrZXkgZnJvbSB0\naGlzIGNsYXNzIHRvIG91ciBzdXBlcmNsYXNzCiAgICAgICAgVGFibGUgdGFi\nbGUgPSBpbmZvLmdldFRhYmxlKGNscywgYWRhcHQpOwogICAgICAgIEZvcmVp\nZ25LZXkgZmsgPSBpbmZvLmdldFN1cGVyY2xhc3NKb2luKGNscywgdGFibGUs\nIGFkYXB0KTsKICAgICAgICBDb2x1bW5bXSBwa0NvbHMgPSBmay5nZXRDb2x1\nbW5zKCk7CgogICAgICAgIGNscy5zZXRUYWJsZSh0YWJsZSk7CiAgICAgICAg\nY2xzLnNldEpvaW5Gb3JlaWduS2V5KGZrKTsKICAgICAgICBjbHMuc2V0UHJp\nbWFyeUtleUNvbHVtbnMocGtDb2xzKTsKICAgICAgICBjbHMuc2V0Q29sdW1u\nSU8oaW5mby5nZXRDb2x1bW5JTygpKTsKCiAgICAgICAgLy8gYWRkIGEgcHJp\nbWFyeSBrZXkgaWYgd2UgZG9uJ3QgaGF2ZSBvbmUgYWxyZWFkeQogICAgICAg\nIFByaW1hcnlLZXkgcGsgPSB0YWJsZS5nZXRQcmltYXJ5S2V5KCk7CiAgICAg\nICAgaWYgKHBrID09IG51bGwpIHsKICAgICAgICAgICAgU3RyaW5nIHBrbmFt\nZSA9IG51bGw7CiAgICAgICAgICAgIGlmIChhZGFwdCkKICAgICAgICAgICAg\nICAgIHBrbmFtZSA9IGNscy5nZXRNYXBwaW5nUmVwb3NpdG9yeSgpLmdldE1h\ncHBpbmdEZWZhdWx0cygpLgogICAgICAgICAgICAgICAgICAgIGdldFByaW1h\ncnlLZXlOYW1lKGNscywgdGFibGUpOwogICAgICAgICAgICBwayA9IHRhYmxl\nLmFkZFByaW1hcnlLZXkocGtuYW1lKTsKICAgICAgICAgICAgcGsuc2V0TG9n\naWNhbCghYWRhcHQpOwogICAgICAgICAgICBway5zZXRDb2x1bW5zKHBrQ29s\ncyk7CiAgICAgICAgfQoKICAgICAgICAvLyBtYXAgam9pbmFibGVzCiAgICAg\nICAgSm9pbmFibGUgam9pbjsKICAgICAgICBDb2x1bW5bXSBjb2xzOwogICAg\nICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcGtDb2xzLmxlbmd0aDsgaSsrKSB7\nCiAgICAgICAgICAgIC8vIG1heSBoYXZlIGFscmVhZHkgcmVnaXN0ZXJlZCBh\nIG11bHRpLWNvbHVtbiBqb2luYWJsZQogICAgICAgICAgICBpZiAoY2xzLmdl\ndEpvaW5hYmxlKHBrQ29sc1tpXSkgIT0gbnVsbCkKICAgICAgICAgICAgICAg\nIGNvbnRpbnVlOwoKICAgICAgICAgICAgLy8gY3JlYXRlIGpvaW5hYmxlIHRo\nYXQgZGVsZWdhdGVzIGFsbCBtZXRob2RzIHRvIHRoZSBzdXBlcmNsYXNzJwog\nICAgICAgICAgICAvLyBqb2luYWJsZSwgYnV0IGNoYW5nZXMgdGhlIGNvbHVt\nbnMgYXMgYXBwcm9wcmlhdGUgdXNpbmcKICAgICAgICAgICAgLy8gb3VyIHN1\ncGVyY2xhc3Mgam9pbiBmawogICAgICAgICAgICBqb2luID0gc3VwLmFzc2Vy\ndEpvaW5hYmxlKGZrLmdldFByaW1hcnlLZXlDb2x1bW4ocGtDb2xzW2ldKSk7\nCiAgICAgICAgICAgIGpvaW4gPSBuZXcgRGVsZWdhdGluZ0pvaW5hYmxlKGpv\naW4sIGZrKTsKICAgICAgICAgICAgY29scyA9IGpvaW4uZ2V0Q29sdW1ucygp\nOwogICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IGNvbHMubGVuZ3Ro\nOyBqKyspCiAgICAgICAgICAgICAgICBjbHMuc2V0Sm9pbmFibGUoY29sc1tq\nXSwgam9pbik7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIGlu\naXRpYWxpemUoKSB7CiAgICAgICAgLy8gdGhpcyByZXF1aXJlcyBhbGwgZmll\nbGRzIHRvIGJlIHJlc29sdmVkLCBzbyBkZWxheSBpdCB1bnRpbCBpbml0CiAg\nICAgICAgQ2xhc3NNYXBwaW5nIHN1cCA9IGNscy5nZXRNYXBwZWRQQ1N1cGVy\nY2xhc3NNYXBwaW5nKCk7CiAgICAgICAgX2ZrT2lkID0gc3VwLmlzRm9yZWln\nbktleU9iamVjdElkKGNscy5nZXRKb2luRm9yZWlnbktleSgpKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBpbnNlcnQoT3BlbkpQQVN0YXRlTWFuYWdlciBz\nbSwgSkRCQ1N0b3JlIHN0b3JlLCBSb3dNYW5hZ2VyIHJtKQogICAgICAgIHRo\ncm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIFJvdyByb3cgPSBybS5nZXRS\nb3coY2xzLmdldFRhYmxlKCksIFJvdy5BQ1RJT05fSU5TRVJULCBzbSwgdHJ1\nZSk7CiAgICAgICAgcm93LnNldFByaW1hcnlLZXkoY2xzLmdldENvbHVtbklP\nKCksIHNtKTsKICAgICAgICByb3cuc2V0Rm9yZWlnbktleShjbHMuZ2V0Sm9p\nbkZvcmVpZ25LZXkoKSwgY2xzLmdldENvbHVtbklPKCksIHNtKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCB1cGRhdGUoT3BlbkpQQVN0YXRlTWFuYWdlciBz\nbSwgSkRCQ1N0b3JlIHN0b3JlLCBSb3dNYW5hZ2VyIHJtKQogICAgICAgIHRo\ncm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIFJvdyByb3cgPSBybS5nZXRS\nb3coY2xzLmdldFRhYmxlKCksIFJvdy5BQ1RJT05fVVBEQVRFLCBzbSwgZmFs\nc2UpOwogICAgICAgIGlmIChyb3cgIT0gbnVsbCkgewogICAgICAgICAgICBy\nb3cud2hlcmVQcmltYXJ5S2V5KHNtKTsKICAgICAgICAgICAgcm93LndoZXJl\nRm9yZWlnbktleShjbHMuZ2V0Sm9pbkZvcmVpZ25LZXkoKSwgc20pOwogICAg\nICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCBkZWxldGUoT3BlbkpQQVN0\nYXRlTWFuYWdlciBzbSwgSkRCQ1N0b3JlIHN0b3JlLCBSb3dNYW5hZ2VyIHJt\nKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIFJvdyBy\nb3cgPSBybS5nZXRSb3coY2xzLmdldFRhYmxlKCksIFJvdy5BQ1RJT05fREVM\nRVRFLCBzbSwgdHJ1ZSk7CiAgICAgICAgcm93LndoZXJlUHJpbWFyeUtleShz\nbSk7CiAgICAgICAgcm93LndoZXJlRm9yZWlnbktleShjbHMuZ2V0Sm9pbkZv\ncmVpZ25LZXkoKSwgc20pOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGlz\nUHJpbWFyeUtleU9iamVjdElkKGJvb2xlYW4gaGFzQWxsKSB7CiAgICAgICAg\ncmV0dXJuIEJvb2xlYW4uVFJVRS5lcXVhbHMoX2ZrT2lkKSB8fCAoIWhhc0Fs\nbCAmJiBfZmtPaWQgPT0gbnVsbCk7CiAgICB9CgogICAgcHVibGljIEpvaW5z\nIGpvaW5TdXBlcmNsYXNzKEpvaW5zIGpvaW5zLCBib29sZWFuIHRvVGhpcykg\newogICAgICAgIGlmICh0b1RoaXMpCiAgICAgICAgICAgIHJldHVybiBqb2lu\ncy5vdXRlckpvaW4oY2xzLmdldEpvaW5Gb3JlaWduS2V5KCksIHRydWUsIGZh\nbHNlKTsKICAgICAgICByZXR1cm4gam9pbnMuam9pbihjbHMuZ2V0Sm9pbkZv\ncmVpZ25LZXkoKSwgZmFsc2UsIGZhbHNlKTsKICAgIH0KCiAgICBwdWJsaWMg\nYm9vbGVhbiBzdXBwb3J0c0VhZ2VyU2VsZWN0KFNlbGVjdCBzZWwsIE9wZW5K\nUEFTdGF0ZU1hbmFnZXIgc20sCiAgICAgICAgSkRCQ1N0b3JlIHN0b3JlLCBD\nbGFzc01hcHBpbmcgYmFzZSwgSkRCQ0ZldGNoQ29uZmlndXJhdGlvbiBmZXRj\naCkgewogICAgICAgIHJldHVybiBzdG9yZS5nZXREQkRpY3Rpb25hcnkoKS5j\nYW5PdXRlckpvaW4oc2VsLmdldEpvaW5TeW50YXgoKSwKICAgICAgICAgICAg\nY2xzLmdldEpvaW5Gb3JlaWduS2V5KCkpOwogICAgfQp9Cg==\n","encoding":"base64"}

