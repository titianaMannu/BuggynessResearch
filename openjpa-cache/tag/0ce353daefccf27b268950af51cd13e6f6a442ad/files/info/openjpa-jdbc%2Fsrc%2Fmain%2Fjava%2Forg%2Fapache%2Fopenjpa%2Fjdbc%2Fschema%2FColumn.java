{"sha":"98e52078d8a7306d3af0eae889a57a80e23d93fc","node_id":"MDQ6QmxvYjIwNjM2NDo5OGU1MjA3OGQ4YTczMDZkM2FmMGVhZTg4OWE1N2E4MGUyM2Q5M2Zj","size":20780,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/98e52078d8a7306d3af0eae889a57a80e23d93fc","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNjaGVtYTsKCmltcG9ydCBqYXZhLm1hdGguQmlnRGVj\naW1hbDsKaW1wb3J0IGphdmEubWF0aC5CaWdJbnRlZ2VyOwppbXBvcnQgamF2\nYS5zcWwuRGF0YWJhc2VNZXRhRGF0YTsKaW1wb3J0IGphdmEuc3FsLkRhdGU7\nCmltcG9ydCBqYXZhLnNxbC5UaW1lOwppbXBvcnQgamF2YS5zcWwuVGltZXN0\nYW1wOwppbXBvcnQgamF2YS5zcWwuVHlwZXM7CgppbXBvcnQgb3JnLmFwYWNo\nZS5jb21tb25zLmxhbmcuU3RyaW5nVXRpbHM7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEuamRiYy5tZXRhLkphdmFTUUxUeXBlczsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5tZXRhLkphdmFUeXBlczsKaW1wb3J0IHNlcnAudXRp\nbC5OdW1iZXJzOwoKLyoqCiAqIFJlcHJlc2VudHMgYSBkYXRhYmFzZSBjb2x1\nbW4uIENsb3NlbHkgYWxpZ25lZCB3aXRoIHRoZSBjb2x1bW4KICogaW5mb3Jt\nYXRpb24gYXZhaWxhYmxlIGZyb20ge0BsaW5rIERhdGFiYXNlTWV0YURhdGF9\nLgogKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKiBAYXV0aG9yIFN0ZXBoZW4g\nS2ltCiAqLwpwdWJsaWMgY2xhc3MgQ29sdW1uCiAgICBleHRlbmRzIFJlZmVy\nZW5jZUNvdW50ZXIgewoKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IEZM\nQUdfVU5JTlNFUlRBQkxFID0gMiA8PCAwOwogICAgcHVibGljIHN0YXRpYyBm\naW5hbCBpbnQgRkxBR19VTlVQREFUQUJMRSA9IDIgPDwgMTsKICAgIHB1Ymxp\nYyBzdGF0aWMgZmluYWwgaW50IEZMQUdfRElSRUNUX0lOU0VSVCA9IDIgPDwg\nMjsKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IEZMQUdfRElSRUNUX1VQ\nREFURSA9IDIgPDwgMzsKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IEZM\nQUdfRktfSU5TRVJUID0gMiA8PCA0OwogICAgcHVibGljIHN0YXRpYyBmaW5h\nbCBpbnQgRkxBR19GS19VUERBVEUgPSAyIDw8IDU7CiAgICBwdWJsaWMgc3Rh\ndGljIGZpbmFsIGludCBGTEFHX1BLX0pPSU4gPSAyIDw8IDY7CgogICAgcHJp\ndmF0ZSBTdHJpbmcgX25hbWUgPSBudWxsOwogICAgcHJpdmF0ZSBTdHJpbmcg\nX2Z1bGxOYW1lID0gbnVsbDsKICAgIHByaXZhdGUgVGFibGUgX3RhYmxlID0g\nbnVsbDsKICAgIHByaXZhdGUgU3RyaW5nIF90YWJsZU5hbWUgPSBudWxsOwog\nICAgcHJpdmF0ZSBTdHJpbmcgX3NjaGVtYU5hbWUgPSBudWxsOwogICAgcHJp\ndmF0ZSBpbnQgX3R5cGUgPSBUeXBlcy5PVEhFUjsKICAgIHByaXZhdGUgU3Ry\naW5nIF90eXBlTmFtZSA9IG51bGw7CiAgICBwcml2YXRlIGludCBfamF2YVR5\ncGUgPSBKYXZhVHlwZXMuT0JKRUNUOwogICAgcHJpdmF0ZSBpbnQgX3NpemUg\nPSAwOwogICAgcHJpdmF0ZSBpbnQgX2RlY2ltYWxzID0gMDsKICAgIHByaXZh\ndGUgU3RyaW5nIF9kZWZhdWx0U3RyID0gbnVsbDsKICAgIHByaXZhdGUgT2Jq\nZWN0IF9kZWZhdWx0ID0gbnVsbDsKICAgIHByaXZhdGUgQm9vbGVhbiBfbm90\nTnVsbCA9IG51bGw7CiAgICBwcml2YXRlIGJvb2xlYW4gX2F1dG9Bc3NpZ24g\nPSBmYWxzZTsKICAgIHByaXZhdGUgYm9vbGVhbiBfcmVsID0gZmFsc2U7CiAg\nICBwcml2YXRlIFN0cmluZyBfdGFyZ2V0ID0gbnVsbDsKICAgIHByaXZhdGUg\nU3RyaW5nIF90YXJnZXRGaWVsZCA9IG51bGw7CiAgICBwcml2YXRlIGludCBf\nZmxhZ3MgPSAwOwoKICAgIHByaXZhdGUgaW50IF9pbmRleCA9IDA7CiAgICBw\ncml2YXRlIGJvb2xlYW4gX3BrID0gZmFsc2U7CgogICAgLyoqCiAgICAgKiBE\nZWZhdWx0IGNvbnN0cnVjdG9yLgogICAgICovCiAgICBwdWJsaWMgQ29sdW1u\nKCkgewogICAgfQoKICAgIC8qKgogICAgICogQ29uc3RydWN0b3IuCiAgICAg\nKgogICAgICogQHBhcmFtIG5hbWUgdGhlIG5hbWUgb2YgdGhlIGNvbHVtbgog\nICAgICogQHBhcmFtIHRhYmxlIHRoZSBjb2x1bW4ncyB0YWJsZQogICAgICov\nCiAgICBwdWJsaWMgQ29sdW1uKFN0cmluZyBuYW1lLCBUYWJsZSB0YWJsZSkg\newogICAgICAgIHNldE5hbWUobmFtZSk7CiAgICAgICAgaWYgKHRhYmxlICE9\nIG51bGwpIHsKICAgICAgICAgICAgc2V0VGFibGVOYW1lKHRhYmxlLmdldE5h\nbWUoKSk7CiAgICAgICAgICAgIHNldFNjaGVtYU5hbWUodGFibGUuZ2V0U2No\nZW1hTmFtZSgpKTsKICAgICAgICB9CiAgICAgICAgX3RhYmxlID0gdGFibGU7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBDYWxsZWQgd2hlbiB0aGUgY29sdW1u\nIGlzIHJlbW92ZWQgZnJvbSBpdHMgdGFibGUuIFJlbW92ZXMgdGhlIGNvbHVt\nbgogICAgICogZnJvbSBhbGwgdGFibGUgY29uc3RyYWludHMgYW5kIGluZGV4\nZXMsIHRoZW4gaW52YWxpZGF0ZXMgaXQuCiAgICAgKi8KICAgIHZvaWQgcmVt\nb3ZlKCkgewogICAgICAgIFRhYmxlIHRhYmxlID0gZ2V0VGFibGUoKTsKICAg\nICAgICBpZiAodGFibGUgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuOwoK\nICAgICAgICBTY2hlbWEgc2NoZW1hID0gdGFibGUuZ2V0U2NoZW1hKCk7CiAg\nICAgICAgaWYgKHNjaGVtYSAhPSBudWxsICYmIHNjaGVtYS5nZXRTY2hlbWFH\ncm91cCgpICE9IG51bGwpIHsKICAgICAgICAgICAgU2NoZW1hW10gc2NoZW1h\ncyA9IHNjaGVtYS5nZXRTY2hlbWFHcm91cCgpLmdldFNjaGVtYXMoKTsKICAg\nICAgICAgICAgVGFibGVbXSB0YWJzOwogICAgICAgICAgICBGb3JlaWduS2V5\nW10gZmtzOwogICAgICAgICAgICBDb2x1bW5bXSBjb2xzOwogICAgICAgICAg\nICBDb2x1bW5bXSBwa3M7CiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBp\nIDwgc2NoZW1hcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgdGFi\ncyA9IHNjaGVtYXNbaV0uZ2V0VGFibGVzKCk7CiAgICAgICAgICAgICAgICBm\nb3IgKGludCBqID0gMDsgaiA8IHRhYnMubGVuZ3RoOyBqKyspIHsKICAgICAg\nICAgICAgICAgICAgICBma3MgPSB0YWJzW2pdLmdldEZvcmVpZ25LZXlzKCk7\nCiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgayA9IDA7IGsgPCBma3Mu\nbGVuZ3RoOyBrKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29scyA9\nIGZrc1trXS5nZXRDb2x1bW5zKCk7CiAgICAgICAgICAgICAgICAgICAgICAg\nIHBrcyA9IGZrc1trXS5nZXRQcmltYXJ5S2V5Q29sdW1ucygpOwogICAgICAg\nICAgICAgICAgICAgICAgICBmb3IgKGludCBsID0gMDsgbCA8IGNvbHMubGVu\nZ3RoOyBsKyspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhp\ncy5lcXVhbHMoY29sc1tsXSkgfHwgdGhpcy5lcXVhbHMocGtzW2xdKSkKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICBma3Nba10ucmVtb3ZlSm9p\nbihjb2xzW2xdKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHMgPSBm\na3Nba10uZ2V0Q29uc3RhbnRDb2x1bW5zKCk7CiAgICAgICAgICAgICAgICAg\nICAgICAgIGZvciAoaW50IGwgPSAwOyBsIDwgY29scy5sZW5ndGg7IGwrKykK\nICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVxdWFscyhj\nb2xzW2xdKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBma3Nb\na10ucmVtb3ZlSm9pbihjb2xzW2xdKTsKCiAgICAgICAgICAgICAgICAgICAg\nICAgIHBrcyA9IGZrc1trXS5nZXRDb25zdGFudFByaW1hcnlLZXlDb2x1bW5z\nKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGwgPSAwOyBs\nIDwgcGtzLmxlbmd0aDsgbCsrKQogICAgICAgICAgICAgICAgICAgICAgICAg\nICAgaWYgKHRoaXMuZXF1YWxzKHBrc1tsXSkpCiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgZmtzW2tdLnJlbW92ZUpvaW4ocGtzW2xdKTsKCiAg\nICAgICAgICAgICAgICAgICAgICAgIGlmIChma3Nba10uZ2V0Q29sdW1ucygp\nLmxlbmd0aCA9PSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBm\na3Nba10uZ2V0Q29uc3RhbnRDb2x1bW5zKCkubGVuZ3RoID09IDApCiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICB0YWJzW2pdLnJlbW92ZUZvcmVpZ25L\nZXkoZmtzW2tdKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAg\nICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIEluZGV4\nW10gaWR4cyA9IHRhYmxlLmdldEluZGV4ZXMoKTsKICAgICAgICBmb3IgKGlu\ndCBpID0gMDsgaSA8IGlkeHMubGVuZ3RoOyBpKyspCiAgICAgICAgICAgIGlm\nIChpZHhzW2ldLnJlbW92ZUNvbHVtbih0aGlzKSAmJiBpZHhzW2ldLmdldENv\nbHVtbnMoKS5sZW5ndGggPT0gMCkKICAgICAgICAgICAgICAgIHRhYmxlLnJl\nbW92ZUluZGV4KGlkeHNbaV0pOwoKICAgICAgICBVbmlxdWVbXSB1bnFzID0g\ndGFibGUuZ2V0VW5pcXVlcygpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBp\nIDwgdW5xcy5sZW5ndGg7IGkrKykKICAgICAgICAgICAgaWYgKHVucXNbaV0u\ncmVtb3ZlQ29sdW1uKHRoaXMpICYmIHVucXNbaV0uZ2V0Q29sdW1ucygpLmxl\nbmd0aCA9PSAwKQogICAgICAgICAgICAgICAgdGFibGUucmVtb3ZlVW5pcXVl\nKHVucXNbaV0pOwoKICAgICAgICBQcmltYXJ5S2V5IHBrID0gdGFibGUuZ2V0\nUHJpbWFyeUtleSgpOwogICAgICAgIGlmIChwayAhPSBudWxsICYmIHBrLnJl\nbW92ZUNvbHVtbih0aGlzKSAmJiBway5nZXRDb2x1bW5zKCkubGVuZ3RoID09\nIDApCiAgICAgICAgICAgIHRhYmxlLnJlbW92ZVByaW1hcnlLZXkoKTsKCiAg\nICAgICAgX3RhYmxlID0gbnVsbDsKICAgIH0KCiAgICAvKioKICAgICAqIFJl\ndHVybiB0aGUgdGFibGUgZm9yIHRoZSBjb2x1bW4uCiAgICAgKi8KICAgIHB1\nYmxpYyBUYWJsZSBnZXRUYWJsZSgpIHsKICAgICAgICByZXR1cm4gX3RhYmxl\nOwogICAgfQoKICAgIC8qKgogICAgICogVGhlIGNvbHVtbidzIHRhYmxlIG5h\nbWUuCiAgICAgKi8KICAgIHB1YmxpYyBTdHJpbmcgZ2V0VGFibGVOYW1lKCkg\newogICAgICAgIHJldHVybiBfdGFibGVOYW1lOwogICAgfQoKICAgIC8qKgog\nICAgICogVGhlIGNvbHVtbidzIHRhYmxlIG5hbWUuIFlvdSBjYW4gb25seSBj\nYWxsIHRoaXMgbWV0aG9kIG9uIGNvbHVtbnMKICAgICAqIHdob3NlIHRhYmxl\nIG9iamVjdCBpcyBub3Qgc2V0LgogICAgICovCiAgICBwdWJsaWMgdm9pZCBz\nZXRUYWJsZU5hbWUoU3RyaW5nIG5hbWUpIHsKICAgICAgICBpZiAoZ2V0VGFi\nbGUoKSAhPSBudWxsKQogICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0\nYXRlRXhjZXB0aW9uKCk7CiAgICAgICAgX3RhYmxlTmFtZSA9IG5hbWU7CiAg\nICAgICAgX2Z1bGxOYW1lID0gbnVsbDsKICAgIH0KCiAgICAvKioKICAgICAq\nIFRoZSBjb2x1bW4ncyBzY2hlbWEgbmFtZS4KICAgICAqLwogICAgcHVibGlj\nIFN0cmluZyBnZXRTY2hlbWFOYW1lKCkgewogICAgICAgIHJldHVybiBfc2No\nZW1hTmFtZTsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBjb2x1bW4ncyBz\nY2hlbWEgbmFtZS4gWW91IGNhbiBvbmx5IGNhbGwgdGhpcyBtZXRob2Qgb24g\nY29sdW1ucwogICAgICogd2hvc2UgdGFibGUgb2JqZWN0IGlzIG5vdCBzZXQu\nCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFNjaGVtYU5hbWUoU3RyaW5n\nIG5hbWUpIHsKICAgICAgICBpZiAoZ2V0VGFibGUoKSAhPSBudWxsKQogICAg\nICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKCk7CiAg\nICAgICAgX3NjaGVtYU5hbWUgPSBuYW1lOwogICAgfQoKICAgIC8qKgogICAg\nICogUmV0dXJuIHRoZSBjb2x1bW4ncyBuYW1lLgogICAgICovCiAgICBwdWJs\naWMgU3RyaW5nIGdldE5hbWUoKSB7CiAgICAgICAgcmV0dXJuIF9uYW1lOwog\nICAgfQoKICAgIC8qKgogICAgICogU2V0IHRoZSBjb2x1bW4ncyBuYW1lLiBZ\nb3UgY2FuIG9ubHkgY2FsbCB0aGlzIG1ldGhvZCBvbiBjb2x1bW5zCiAgICAg\nKiB3aG9zZSB0YWJsZSBvYmplY3QgaXMgbm90IHNldC4KICAgICAqLwogICAg\ncHVibGljIHZvaWQgc2V0TmFtZShTdHJpbmcgbmFtZSkgewogICAgICAgIGlm\nIChnZXRUYWJsZSgpICE9IG51bGwpCiAgICAgICAgICAgIHRocm93IG5ldyBJ\nbGxlZ2FsU3RhdGVFeGNlcHRpb24oKTsKICAgICAgICBfbmFtZSA9IG5hbWU7\nCiAgICAgICAgX2Z1bGxOYW1lID0gbnVsbDsKICAgIH0KCiAgICAvKioKICAg\nICAqIFJldHVybiB0aGUgY29sdW1uJ3MgZnVsbCBuYW1lLCBpbiB0aGUgZm9y\nbSAmbHQ7dGFibGUmZ3Q7LiZsdDtuYW1lJmd0Oy4KICAgICAqLwogICAgcHVi\nbGljIFN0cmluZyBnZXRGdWxsTmFtZSgpIHsKICAgICAgICBpZiAoX2Z1bGxO\nYW1lID09IG51bGwpIHsKICAgICAgICAgICAgU3RyaW5nIG5hbWUgPSBnZXRO\nYW1lKCk7CiAgICAgICAgICAgIGlmIChuYW1lID09IG51bGwpCiAgICAgICAg\nICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgU3RyaW5nIHRuYW1l\nID0gZ2V0VGFibGVOYW1lKCk7CiAgICAgICAgICAgIGlmICh0bmFtZSA9PSBu\ndWxsKQogICAgICAgICAgICAgICAgcmV0dXJuIG5hbWU7CiAgICAgICAgICAg\nIF9mdWxsTmFtZSA9IHRuYW1lICsgIi4iICsgbmFtZTsKICAgICAgICB9CiAg\nICAgICAgcmV0dXJuIF9mdWxsTmFtZTsKICAgIH0KCiAgICAvKioKICAgICAq\nIFJldHVybiB0aGUgY29sdW1uJ3MgU1FMIHR5cGUuIFRoaXMgd2lsbCBiZSBv\nbmUgb2YgdGhlIHR5cGUgY29uc3RhbnRzCiAgICAgKiBkZWZpbmVkIGluIHtA\nbGluayBUeXBlc30uCiAgICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0VHlwZSgp\nIHsKICAgICAgICByZXR1cm4gX3R5cGU7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBTZXQgdGhlIGNvbHVtbidzIFNRTCB0eXBlLiBUaGlzIHNob3VsZCBiZSBv\nbmUgb2YgdGhlIHR5cGUgY29uc3RhbnRzCiAgICAgKiBkZWZpbmVkIGluIHtA\nbGluayBUeXBlc30uCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFR5cGUo\naW50IHNxbFR5cGUpIHsKICAgICAgICBfdHlwZSA9IHNxbFR5cGU7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBUaGUgZGF0YWJhc2Utc3BlY2lmaWMgU1FMIHR5\ncGUgb2YgdGhpcyBjb2x1bW4uCiAgICAgKi8KICAgIHB1YmxpYyBTdHJpbmcg\nZ2V0VHlwZU5hbWUoKSB7CiAgICAgICAgcmV0dXJuIF90eXBlTmFtZTsKICAg\nIH0KCiAgICAvKioKICAgICAqIFRoZSBkYXRhYmFzZS1zcGVjaWZpYyBTUUwg\ndHlwZSBvZiB0aGlzIGNvbHVtbi4KICAgICAqLwogICAgcHVibGljIHZvaWQg\nc2V0VHlwZU5hbWUoU3RyaW5nIHR5cGVOYW1lKSB7CiAgICAgICAgX3R5cGVO\nYW1lID0gdHlwZU5hbWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgSmF2\nYSB0eXBlIHRoZSBkYXRhIGluIHRoaXMgY29sdW1uIGlzIHRyZWF0ZWQgYXMs\nIGZyb20KICAgICAqIHtAbGluayBKYXZhVHlwZXN9IG9yIHtAbGluayBKYXZh\nU1FMVHlwZXN9LgogICAgICovCiAgICBwdWJsaWMgaW50IGdldEphdmFUeXBl\nKCkgewogICAgICAgIHJldHVybiBfamF2YVR5cGU7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBUaGUgSmF2YSB0eXBlIHRoZSBkYXRhIGluIHRoaXMgY29sdW1u\nIGlzIHRyZWF0ZWQgYXMsIGZyb20KICAgICAqIHtAbGluayBKYXZhVHlwZXN9\nIG9yIHtAbGluayBKYXZhU1FMVHlwZXN9LgogICAgICovCiAgICBwdWJsaWMg\ndm9pZCBzZXRKYXZhVHlwZShpbnQgdHlwZSkgewogICAgICAgIF9qYXZhVHlw\nZSA9IHR5cGU7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGNv\nbHVtbidzIHNpemUuCiAgICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0U2l6ZSgp\nIHsKICAgICAgICByZXR1cm4gX3NpemU7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBTZXQgdGhlIGNvbHVtbidzIHNpemUuCiAgICAgKi8KICAgIHB1YmxpYyB2\nb2lkIHNldFNpemUoaW50IHNpemUpIHsKICAgICAgICBfc2l6ZSA9IHNpemU7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIG51bWJlciBvZiBk\nZWNpbWFsIGRpZ2l0cyBmb3IgdGhlIGNvbHVtbiwgaWYgYXBwbGljYWJsZS4K\nICAgICAqLwogICAgcHVibGljIGludCBnZXREZWNpbWFsRGlnaXRzKCkgewog\nICAgICAgIHJldHVybiBfZGVjaW1hbHM7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBTZXQgdGhlIG51bWJlciBvZiBkZWNpbWFsIGRpZ2l0cyBmb3IgdGhlIGNv\nbHVtbi4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0RGVjaW1hbERpZ2l0\ncyhpbnQgZGlnaXRzKSB7CiAgICAgICAgX2RlY2ltYWxzID0gZGlnaXRzOwog\nICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBkZWZhdWx0IHZhbHVl\nIHNldCBmb3IgdGhlIGNvbHVtbiwgaWYgYW55LgogICAgICovCiAgICBwdWJs\naWMgU3RyaW5nIGdldERlZmF1bHRTdHJpbmcoKSB7CiAgICAgICAgcmV0dXJu\nIF9kZWZhdWx0U3RyOwogICAgfQoKICAgIC8qKgogICAgICogU2V0IHRoZSBk\nZWZhdWx0IHZhbHVlIGZvciB0aGUgY29sdW1uLgogICAgICovCiAgICBwdWJs\naWMgdm9pZCBzZXREZWZhdWx0U3RyaW5nKFN0cmluZyBkZWYpIHsKICAgICAg\nICBfZGVmYXVsdFN0ciA9IGRlZjsKICAgICAgICBfZGVmYXVsdCA9IG51bGw7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGRlZmF1bHQgdmFs\ndWUgc2V0IGZvciB0aGlzIGNvbHVtbiwgaWYgYW55LiBJZiBvbmx5IGEgZGVm\nYXVsdAogICAgICogc3RyaW5nIGhhcyBiZWVuIHNldCwgYXR0ZW1wdHMgdG8g\nY29udmVydCBpdCB0byB0aGUgcmlnaHQgdHlwZSBiYXNlZAogICAgICogb24g\ndGhlIEphdmEgdHlwZSBzZXQgZm9yIHRoaXMgY29sdW1uLgogICAgICovCiAg\nICBwdWJsaWMgT2JqZWN0IGdldERlZmF1bHQoKSB7CiAgICAgICAgaWYgKF9k\nZWZhdWx0ICE9IG51bGwpCiAgICAgICAgICAgIHJldHVybiBfZGVmYXVsdDsK\nICAgICAgICBpZiAoX2RlZmF1bHRTdHIgPT0gbnVsbCkKICAgICAgICAgICAg\ncmV0dXJuIG51bGw7CgogICAgICAgIHN3aXRjaCAoX2phdmFUeXBlKSB7CiAg\nICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkJPT0xFQU46CiAgICAgICAgICAg\nIGNhc2UgSmF2YVR5cGVzLkJPT0xFQU5fT0JKOgogICAgICAgICAgICAgICAg\nX2RlZmF1bHQgPSAoInRydWUiLmVxdWFscyhfZGVmYXVsdFN0cikpID8gQm9v\nbGVhbi5UUlVFCiAgICAgICAgICAgICAgICAgICAgOiBCb29sZWFuLkZBTFNF\nOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgSmF2\nYVR5cGVzLkJZVEU6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkJZVEVf\nT0JKOgogICAgICAgICAgICAgICAgX2RlZmF1bHQgPSBuZXcgQnl0ZShfZGVm\nYXVsdFN0cik7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAg\nY2FzZSBKYXZhVHlwZXMuQ0hBUjoKICAgICAgICAgICAgY2FzZSBKYXZhVHlw\nZXMuQ0hBUl9PQko6CiAgICAgICAgICAgICAgICBfZGVmYXVsdCA9IG5ldyBD\naGFyYWN0ZXIoX2RlZmF1bHRTdHIuY2hhckF0KDApKTsKICAgICAgICAgICAg\nICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5ET1VCTEU6\nCiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkRPVUJMRV9PQko6CiAgICAg\nICAgICAgICAgICBfZGVmYXVsdCA9IG5ldyBEb3VibGUoX2RlZmF1bHRTdHIp\nOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgSmF2\nYVR5cGVzLkZMT0FUOgogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5GTE9B\nVF9PQko6CiAgICAgICAgICAgICAgICBfZGVmYXVsdCA9IG5ldyBGbG9hdChf\nZGVmYXVsdFN0cik7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAg\nICAgY2FzZSBKYXZhVHlwZXMuSU5UOgogICAgICAgICAgICBjYXNlIEphdmFU\neXBlcy5JTlRfT0JKOgogICAgICAgICAgICAgICAgX2RlZmF1bHQgPSBOdW1i\nZXJzLnZhbHVlT2YoSW50ZWdlci5wYXJzZUludChfZGVmYXVsdFN0cikpOwog\nICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgSmF2YVR5\ncGVzLkxPTkc6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkxPTkdfT0JK\nOgogICAgICAgICAgICAgICAgX2RlZmF1bHQgPSBOdW1iZXJzLnZhbHVlT2Yo\nTG9uZy5wYXJzZUxvbmcoX2RlZmF1bHRTdHIpKTsKICAgICAgICAgICAgICAg\nIGJyZWFrOwogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5OVU1CRVI6CiAg\nICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkJJR0RFQ0lNQUw6CiAgICAgICAg\nICAgICAgICBfZGVmYXVsdCA9IG5ldyBCaWdEZWNpbWFsKF9kZWZhdWx0U3Ry\nKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIEph\ndmFUeXBlcy5TSE9SVDoKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuU0hP\nUlRfT0JKOgogICAgICAgICAgICAgICAgX2RlZmF1bHQgPSBuZXcgU2hvcnQo\nX2RlZmF1bHRTdHIpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAg\nICAgIGNhc2UgSmF2YVR5cGVzLkRBVEU6CiAgICAgICAgICAgICAgICBfZGVm\nYXVsdCA9IG5ldyBqYXZhLnV0aWwuRGF0ZShfZGVmYXVsdFN0cik7CiAgICAg\nICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMu\nQklHSU5URUdFUjoKICAgICAgICAgICAgICAgIF9kZWZhdWx0ID0gbmV3IEJp\nZ0ludGVnZXIoX2RlZmF1bHRTdHIpOwogICAgICAgICAgICAgICAgYnJlYWs7\nCiAgICAgICAgICAgIGNhc2UgSmF2YVNRTFR5cGVzLlNRTF9EQVRFOgogICAg\nICAgICAgICAgICAgX2RlZmF1bHQgPSBEYXRlLnZhbHVlT2YoX2RlZmF1bHRT\ndHIpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2Ug\nSmF2YVNRTFR5cGVzLlRJTUVTVEFNUDoKICAgICAgICAgICAgICAgIF9kZWZh\ndWx0ID0gVGltZXN0YW1wLnZhbHVlT2YoX2RlZmF1bHRTdHIpOwogICAgICAg\nICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgSmF2YVNRTFR5cGVz\nLlRJTUU6CiAgICAgICAgICAgICAgICBfZGVmYXVsdCA9IFRpbWUudmFsdWVP\nZihfZGVmYXVsdFN0cik7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAg\nICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIF9kZWZhdWx0ID0gX2Rl\nZmF1bHRTdHI7CiAgICAgICAgfQogICAgICAgIHJldHVybiBfZGVmYXVsdDsK\nICAgIH0KCiAgICAvKioKICAgICAqIFNldCB0aGUgZGVmYXVsdCB2YWx1ZSBm\nb3IgdGhlIGNvbHVtbi4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0RGVm\nYXVsdChPYmplY3QgZGVmKSB7CiAgICAgICAgX2RlZmF1bHQgPSBkZWY7CiAg\nICAgICAgX2RlZmF1bHRTdHIgPSAoZGVmID09IG51bGwpID8gbnVsbCA6IGRl\nZi50b1N0cmluZygpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRy\ndWUgaWYgdGhpcyBpcyBhIE5PVCBOVUxMIGNvbHVtbi4KICAgICAqLwogICAg\ncHVibGljIGJvb2xlYW4gaXNOb3ROdWxsKCkgewogICAgICAgIHJldHVybiBf\nbm90TnVsbCA9PSBCb29sZWFuLlRSVUU7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBTZXQgd2hldGhlciB0aGlzIGlzIGEgTk9UIE5VTEwgY29sdW1uLgogICAg\nICovCiAgICBwdWJsaWMgdm9pZCBzZXROb3ROdWxsKGJvb2xlYW4gbm90TnVs\nbCkgewogICAgICAgIF9ub3ROdWxsID0gKG5vdE51bGwpID8gQm9vbGVhbi5U\nUlVFIDogQm9vbGVhbi5GQUxTRTsKICAgIH0KCiAgICAvKioKICAgICAqIFdo\nZXRoZXIgdGhlIG5vdC1udWxsIHByb3BlcnR5IGhhcyBiZWVuIHNldC4KICAg\nICAqLwogICAgcHVibGljIGJvb2xlYW4gaXNOb3ROdWxsRXhwbGljaXQoKSB7\nCiAgICAgICAgcmV0dXJuIF9ub3ROdWxsICE9IG51bGw7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBXaGV0aGVyIHRoaXMgY29sdW1uIGlzIGF1dG8tYXNzaWdu\nZWQgYSB2YWx1ZSBvbiBpbnNlcnQuCiAgICAgKi8KICAgIHB1YmxpYyBib29s\nZWFuIGlzQXV0b0Fzc2lnbmVkKCkgewogICAgICAgIHJldHVybiBfYXV0b0Fz\nc2lnbjsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdGhpcyBjb2x1\nbW4gaXMgYXV0by1pbmNyZW1lbnRpbmcuCiAgICAgKi8KICAgIHB1YmxpYyB2\nb2lkIHNldEF1dG9Bc3NpZ25lZChib29sZWFuIGF1dG9Bc3NpZ24pIHsKICAg\nICAgICBpZiAoYXV0b0Fzc2lnbiAhPSBfYXV0b0Fzc2lnbiAmJiBnZXRUYWJs\nZSgpICE9IG51bGwpCiAgICAgICAgICAgIGdldFRhYmxlKCkuY2hhbmdlQXV0\nb0Fzc2lnbmVkKHRoaXMpOwogICAgICAgIF9hdXRvQXNzaWduID0gYXV0b0Fz\nc2lnbjsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdGhpcyBjb2x1\nbW4gc3RvcmVzIHNvbWUgZm9ybSBvZiBzZXJpYWxpemVkIGlkZW50aXR5IHZh\nbHVlIGZvcgogICAgICogYSByZWxhdGVkIHJlY29yZC4gVGhpcyBtYWtlcyB0\naGUgY29sdW1uIGRlcGVuZGVudCBvbiB0aGUga25vd2luZyB0aGUKICAgICAq\nIGZpbmFsIGlkZW50aXR5IG9mIHRoZSByZWxhdGlvbiBiZWZvcmUgdGhlIGNv\nbHVtbiB2YWx1ZSBpcyBzZXQuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFu\nIGlzUmVsYXRpb25JZCgpIHsKICAgICAgICByZXR1cm4gX3JlbDsKICAgIH0K\nCiAgICAvKioKICAgICAqIFdoZXRoZXIgdGhpcyBjb2x1bW4gc3RvcmVzIHNv\nbWUgZm9ybSBvZiBzZXJpYWxpemVkIGlkZW50aXR5IHZhbHVlIGZvcgogICAg\nICogYSByZWxhdGVkIHJlY29yZC4gVGhpcyBtYWtlcyB0aGUgY29sdW1uIGRl\ncGVuZGVudCBvbiB0aGUga25vd2luZyB0aGUKICAgICAqIGZpbmFsIGlkZW50\naXR5IG9mIHRoZSByZWxhdGlvbiBiZWZvcmUgdGhlIGNvbHVtbiB2YWx1ZSBp\ncyBzZXQuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFJlbGF0aW9uSWQo\nYm9vbGVhbiByZWwpIHsKICAgICAgICBpZiAocmVsICE9IF9yZWwgJiYgZ2V0\nVGFibGUoKSAhPSBudWxsKQogICAgICAgICAgICBnZXRUYWJsZSgpLmNoYW5n\nZVJlbGF0aW9uSWQodGhpcyk7CiAgICAgICAgX3JlbCA9IHJlbDsKICAgIH0K\nCiAgICAvKioKICAgICAqIFRoZSBuYW1lIG9mIHRoZSBjb2x1bW4gdGhpcyBj\nb2x1bW4gam9pbnMgdG8sIGlmIGFueS4gVXNlZCBmb3IgbWFwcGluZy4KICAg\nICAqLwogICAgcHVibGljIFN0cmluZyBnZXRUYXJnZXQoKSB7CiAgICAgICAg\ncmV0dXJuIF90YXJnZXQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgbmFt\nZSBvZiB0aGUgY29sdW1uIHRoaXMgY29sdW1uIGpvaW5zIHRvLCBpZiBhbnku\nIFVzZWQgZm9yIG1hcHBpbmcuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNl\ndFRhcmdldChTdHJpbmcgdGFyZ2V0KSB7CiAgICAgICAgX3RhcmdldCA9IFN0\ncmluZ1V0aWxzLnRyaW1Ub051bGwodGFyZ2V0KTsKICAgIH0KCiAgICAvKioK\nICAgICAqIFRoZSBuYW1lIG9mIHRoZSBmaWVsZCB0aGlzIGNvbHVtbiBqb2lu\ncyB0bywgaWYgYW55LiBVc2VkIGZvciBtYXBwaW5nLgogICAgICovCiAgICBw\ndWJsaWMgU3RyaW5nIGdldFRhcmdldEZpZWxkKCkgewogICAgICAgIHJldHVy\nbiBfdGFyZ2V0RmllbGQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgbmFt\nZSBvZiB0aGUgZmllbGQgdGhpcyBjb2x1bW4gam9pbnMgdG8sIGlmIGFueS4g\nVXNlZCBmb3IgbWFwcGluZy4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0\nVGFyZ2V0RmllbGQoU3RyaW5nIHRhcmdldCkgewogICAgICAgIGlmICh0YXJn\nZXQgIT0gbnVsbCAmJiB0YXJnZXQubGVuZ3RoKCkgPT0gMCkKICAgICAgICAg\nICAgdGFyZ2V0ID0gbnVsbDsKICAgICAgICBfdGFyZ2V0RmllbGQgPSB0YXJn\nZXQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBGbGFncyBhcmUgdXNlZCBmb3Ig\nYm9va2tlZXBpbmcgaW5mb3JtYXRpb24uIFRoZXkgYXJlIGlnbm9yZWQgYXQg\ncnVudGltZS4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gZ2V0RmxhZyhp\nbnQgZmxhZykgewogICAgICAgIHJldHVybiAoX2ZsYWdzICYgZmxhZykgIT0g\nMDsKICAgIH0KCiAgICAvKioKICAgICAqIEZsYWdzIGFyZSB1c2VkIGZvciBi\nb29ra2VlcGluZyBpbmZvcm1hdGlvbi4gVGhleSBhcmUgaWdub3JlZCBhdCBy\ndW50aW1lLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRGbGFnKGludCBm\nbGFnLCBib29sZWFuIG9uKSB7CiAgICAgICAgaWYgKG9uKQogICAgICAgICAg\nICBfZmxhZ3MgfD0gZmxhZzsKICAgICAgICBlbHNlCiAgICAgICAgICAgIF9m\nbGFncyAmPSB+ZmxhZzsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0\ncnVlIGlmIHRoaXMgY29sdW1uIGJlbG9uZ3MgdG8gdGhlIHRhYmxlJ3MgcHJp\nbWFyeSBrZXkuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlzUHJpbWFy\neUtleSgpIHsKICAgICAgICByZXR1cm4gX3BrOwogICAgfQoKICAgIC8qKgog\nICAgICogU2V0IHdoZXRoZXIgdGhpcyBjb2x1bW4gYmVsb25ncyB0byB0aGUg\ndGFibGUncyBwcmltYXJ5IGtleS4KICAgICAqLwogICAgdm9pZCBzZXRQcmlt\nYXJ5S2V5KGJvb2xlYW4gcGspIHsKICAgICAgICBfcGsgPSBwazsKICAgIH0K\nCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgY29sdW1uJ3MgMC1iYXNlZCBp\nbmRleCBpbiB0aGUgb3duaW5nIHRhYmxlLgogICAgICovCiAgICBwdWJsaWMg\naW50IGdldEluZGV4KCkgewogICAgICAgIGlmIChnZXRUYWJsZSgpICE9IG51\nbGwpCiAgICAgICAgICAgIGdldFRhYmxlKCkuaW5kZXhDb2x1bW5zKCk7CiAg\nICAgICAgcmV0dXJuIF9pbmRleDsKICAgIH0KCiAgICAvKioKICAgICAqIFNl\ndCB0aGUgY29sdW1uJ3MgMC1iYXNlZCBpbmRleCBpbiB0aGUgb3duaW5nIHRh\nYmxlLgogICAgICovCiAgICB2b2lkIHNldEluZGV4KGludCBpbmRleCkgewog\nICAgICAgIF9pbmRleCA9IGluZGV4OwogICAgfQoKICAgIC8qKgogICAgICog\nV2hldGhlciB0aGlzIGNvbHVtbiBpcyBhIExPQi4KICAgICAqLwogICAgcHVi\nbGljIGJvb2xlYW4gaXNMb2IoKSB7CiAgICAgICAgc3dpdGNoIChfdHlwZSkg\newogICAgICAgICAgICBjYXNlIFR5cGVzLkJJTkFSWToKICAgICAgICAgICAg\nY2FzZSBUeXBlcy5CTE9COgogICAgICAgICAgICBjYXNlIFR5cGVzLkxPTkdW\nQVJCSU5BUlk6CiAgICAgICAgICAgIGNhc2UgVHlwZXMuVkFSQklOQVJZOgog\nICAgICAgICAgICBjYXNlIFR5cGVzLkNMT0I6CiAgICAgICAgICAgICAgICBy\nZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAg\nICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAg\nICAgKiBSZXR1cm4gdHJ1ZSBpZiB0aGlzIGNvbHVtbiBpcyBjb21wYXRpYmxl\nIHdpdGggdGhlIGdpdmVuIEpEQkMgdHlwZQogICAgICogZnJvbSB7QGxpbmsg\nVHlwZXN9IGFuZCBzaXplLgogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBp\nc0NvbXBhdGlibGUoaW50IHR5cGUsIGludCBzaXplKSB7CiAgICAgICAgaWYg\nKHR5cGUgPT0gVHlwZXMuT1RIRVIgfHwgZ2V0VHlwZSgpID09IFR5cGVzLk9U\nSEVSKQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKCiAgICAgICAgLy8gbm90\nZSB0aGF0IHRoZSBnaXZlbiBzaXplIGlzIGN1cnJlbnRseSBpZ25vcmVkLCBi\ndXQgbWF5IGJlIHVzZWZ1bAogICAgICAgIC8vIHRvIGR5bmFtaWNhbGx5LXBv\ncHVsYXRpbmcgc3ViY2xhc3NlcwogICAgICAgIHN3aXRjaCAoZ2V0VHlwZSgp\nKSB7CiAgICAgICAgICAgIGNhc2UgVHlwZXMuQklUOgogICAgICAgICAgICBj\nYXNlIFR5cGVzLlRJTllJTlQ6CiAgICAgICAgICAgIGNhc2UgVHlwZXMuQklH\nSU5UOgogICAgICAgICAgICBjYXNlIFR5cGVzLklOVEVHRVI6CiAgICAgICAg\nICAgIGNhc2UgVHlwZXMuTlVNRVJJQzoKICAgICAgICAgICAgY2FzZSBUeXBl\ncy5TTUFMTElOVDoKICAgICAgICAgICAgY2FzZSBUeXBlcy5ERUNJTUFMOgog\nICAgICAgICAgICBjYXNlIFR5cGVzLkRPVUJMRToKICAgICAgICAgICAgY2Fz\nZSBUeXBlcy5GTE9BVDoKICAgICAgICAgICAgY2FzZSBUeXBlcy5SRUFMOgog\nICAgICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgICAgICAg\nICAgICAgY2FzZSBUeXBlcy5CSVQ6CiAgICAgICAgICAgICAgICAgICAgY2Fz\nZSBUeXBlcy5USU5ZSU5UOgogICAgICAgICAgICAgICAgICAgIGNhc2UgVHlw\nZXMuQklHSU5UOgogICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZXMuSU5U\nRUdFUjoKICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGVzLk5VTUVSSUM6\nCiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlcy5TTUFMTElOVDoKICAg\nICAgICAgICAgICAgICAgICBjYXNlIFR5cGVzLkRFQ0lNQUw6CiAgICAgICAg\nICAgICAgICAgICAgY2FzZSBUeXBlcy5ET1VCTEU6CiAgICAgICAgICAgICAg\nICAgICAgY2FzZSBUeXBlcy5GTE9BVDoKICAgICAgICAgICAgICAgICAgICBj\nYXNlIFR5cGVzLlJFQUw6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVy\nbiB0cnVlOwogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAg\nICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAg\nIH0KICAgICAgICAgICAgY2FzZSBUeXBlcy5CSU5BUlk6CiAgICAgICAgICAg\nIGNhc2UgVHlwZXMuQkxPQjoKICAgICAgICAgICAgY2FzZSBUeXBlcy5MT05H\nVkFSQklOQVJZOgogICAgICAgICAgICBjYXNlIFR5cGVzLlZBUkJJTkFSWToK\nICAgICAgICAgICAgY2FzZSBUeXBlcy5PVEhFUjoKICAgICAgICAgICAgICAg\nIHN3aXRjaCAodHlwZSkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgVHlw\nZXMuQklOQVJZOgogICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZXMuQkxP\nQjoKICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGVzLkxPTkdWQVJCSU5B\nUlk6CiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlcy5WQVJCSU5BUlk6\nCiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlcy5PVEhFUjoKICAgICAg\nICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAg\nICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJu\nIGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICBjYXNlIFR5\ncGVzLkNMT0I6CiAgICAgICAgICAgIGNhc2UgVHlwZXMuQ0hBUjoKICAgICAg\nICAgICAgY2FzZSBUeXBlcy5MT05HVkFSQ0hBUjoKICAgICAgICAgICAgY2Fz\nZSBUeXBlcy5WQVJDSEFSOgogICAgICAgICAgICAgICAgc3dpdGNoICh0eXBl\nKSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlcy5DTE9COgogICAg\nICAgICAgICAgICAgICAgIGNhc2UgVHlwZXMuQ0hBUjoKICAgICAgICAgICAg\nICAgICAgICBjYXNlIFR5cGVzLkxPTkdWQVJDSEFSOgogICAgICAgICAgICAg\nICAgICAgIGNhc2UgVHlwZXMuVkFSQ0hBUjoKICAgICAgICAgICAgICAgICAg\nICBjYXNlIFR5cGVzLkRBVEU6CiAgICAgICAgICAgICAgICAgICAgY2FzZSBU\neXBlcy5USU1FOgogICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZXMuVElN\nRVNUQU1QOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsK\nICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAg\nICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAg\nICAgICAgIGNhc2UgVHlwZXMuREFURToKICAgICAgICAgICAgY2FzZSBUeXBl\ncy5USU1FOgogICAgICAgICAgICBjYXNlIFR5cGVzLlRJTUVTVEFNUDoKICAg\nICAgICAgICAgICAgIHN3aXRjaCAodHlwZSkgewogICAgICAgICAgICAgICAg\nICAgIGNhc2UgVHlwZXMuTE9OR1ZBUkNIQVI6CiAgICAgICAgICAgICAgICAg\nICAgY2FzZSBUeXBlcy5DTE9COgogICAgICAgICAgICAgICAgICAgIGNhc2Ug\nVHlwZXMuVkFSQ0hBUjoKICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGVz\nLkRBVEU6CiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlcy5USU1FOgog\nICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZXMuVElNRVNUQU1QOgogICAg\nICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAg\nICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICByZXR1\ncm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGRlZmF1\nbHQ6CiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZSA9PSBnZXRUeXBlKCk7\nCiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUg\nY29sdW1uIG5hbWUuCiAgICAgKi8KICAgIHB1YmxpYyBTdHJpbmcgdG9TdHJp\nbmcoKSB7CiAgICAgICAgcmV0dXJuIGdldE5hbWUoKTsKICAgIH0KCiAgICAv\nKioKICAgICAqIFVzZWZ1bCBmb3IgZGVidWdnaW5nLgogICAgICovCiAgICBw\ndWJsaWMgU3RyaW5nIGdldERlc2NyaXB0aW9uKCkgewogICAgICAgIFN0cmlu\nZ0J1ZmZlciBidWYgPSBuZXcgU3RyaW5nQnVmZmVyKCk7CiAgICAgICAgYnVm\nLmFwcGVuZCgiRnVsbCBOYW1lOiAiKS5hcHBlbmQoZ2V0RnVsbE5hbWUoKSku\nYXBwZW5kKCJcbiIpOwogICAgICAgIGJ1Zi5hcHBlbmQoIlR5cGU6ICIpLmFw\ncGVuZChTY2hlbWFzLmdldEpEQkNOYW1lKGdldFR5cGUoKSkpLgogICAgICAg\nICAgICBhcHBlbmQoIlxuIik7CiAgICAgICAgYnVmLmFwcGVuZCgiU2l6ZTog\nIikuYXBwZW5kKGdldFNpemUoKSkuYXBwZW5kKCJcbiIpOwogICAgICAgIGJ1\nZi5hcHBlbmQoIkRlZmF1bHQ6ICIpLmFwcGVuZChnZXREZWZhdWx0U3RyaW5n\nKCkpLmFwcGVuZCgiXG4iKTsKICAgICAgICBidWYuYXBwZW5kKCJOb3QgTnVs\nbDogIikuYXBwZW5kKGlzTm90TnVsbCgpKS5hcHBlbmQoIlxuIik7CiAgICAg\nICAgcmV0dXJuIGJ1Zi50b1N0cmluZygpOwogICAgfQoKICAgIC8qKgogICAg\nICogVGVzdHMgY29tcGF0aWJpbGl0eS4KICAgICAqLwogICAgcHVibGljIGJv\nb2xlYW4gZXF1YWxzQ29sdW1uKENvbHVtbiBjb2wpIHsKICAgICAgICBpZiAo\nY29sID09IHRoaXMpCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAg\nIGlmIChjb2wgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoK\nICAgICAgICBpZiAoIWdldEZ1bGxOYW1lKCkuZXF1YWxzSWdub3JlQ2FzZShj\nb2wuZ2V0RnVsbE5hbWUoKSkpCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsK\nICAgICAgICBpZiAoIWlzQ29tcGF0aWJsZShjb2wuZ2V0VHlwZSgpLCBjb2wu\nZ2V0U2l6ZSgpKSkKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAg\nIGlmIChnZXRUeXBlKCkgPT0gVHlwZXMuVkFSQ0hBUiAmJiBnZXRTaXplKCkg\nPiAwICYmIGNvbC5nZXRTaXplKCkgPiAwCiAgICAgICAgICAgICYmIGdldFNp\nemUoKSAhPSBjb2wuZ2V0U2l6ZSgpKQogICAgICAgICAgICByZXR1cm4gZmFs\nc2U7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBDb3B5IGluZm9ybWF0aW9uIGZyb20gdGhlIGdpdmVuIGNvbHVtbiB0byB0\naGlzIG9uZS4KICAgICAqLwogICAgcHVibGljIHZvaWQgY29weShDb2x1bW4g\nZnJvbSkgewogICAgICAgIGlmIChmcm9tID09IG51bGwpCiAgICAgICAgICAg\nIHJldHVybjsKICAgICAgICBpZiAoZ2V0TmFtZSgpID09IG51bGwpCiAgICAg\nICAgICAgIHNldE5hbWUoZnJvbS5nZXROYW1lKCkpOwogICAgICAgIGlmIChn\nZXRUeXBlKCkgPT0gVHlwZXMuT1RIRVIpCiAgICAgICAgICAgIHNldFR5cGUo\nZnJvbS5nZXRUeXBlKCkpOwogICAgICAgIGlmIChnZXRUeXBlTmFtZSgpID09\nIG51bGwpCiAgICAgICAgICAgIHNldFR5cGVOYW1lKGZyb20uZ2V0VHlwZU5h\nbWUoKSk7CiAgICAgICAgaWYgKGdldEphdmFUeXBlKCkgPT0gSmF2YVR5cGVz\nLk9CSkVDVCkKICAgICAgICAgICAgc2V0SmF2YVR5cGUoZnJvbS5nZXRKYXZh\nVHlwZSgpKTsKICAgICAgICBpZiAoZ2V0U2l6ZSgpID09IDApCiAgICAgICAg\nICAgIHNldFNpemUoZnJvbS5nZXRTaXplKCkpOwogICAgICAgIGlmIChnZXRE\nZWNpbWFsRGlnaXRzKCkgPT0gMCkKICAgICAgICAgICAgc2V0RGVjaW1hbERp\nZ2l0cyhmcm9tLmdldERlY2ltYWxEaWdpdHMoKSk7CiAgICAgICAgaWYgKGdl\ndERlZmF1bHRTdHJpbmcoKSA9PSBudWxsKQogICAgICAgICAgICBzZXREZWZh\ndWx0U3RyaW5nKGZyb20uZ2V0RGVmYXVsdFN0cmluZygpKTsKICAgICAgICBp\nZiAoIWlzTm90TnVsbEV4cGxpY2l0KCkgJiYgZnJvbS5pc05vdE51bGxFeHBs\naWNpdCgpKQogICAgICAgICAgICBzZXROb3ROdWxsKGZyb20uaXNOb3ROdWxs\nKCkpOwogICAgICAgIGlmICghaXNBdXRvQXNzaWduZWQoKSkKICAgICAgICAg\nICAgc2V0QXV0b0Fzc2lnbmVkKGZyb20uaXNBdXRvQXNzaWduZWQoKSk7CiAg\nICAgICAgaWYgKCFpc1JlbGF0aW9uSWQoKSkKICAgICAgICAgICAgc2V0UmVs\nYXRpb25JZChmcm9tLmlzUmVsYXRpb25JZCgpKTsKICAgICAgICBpZiAoZ2V0\nVGFyZ2V0KCkgPT0gbnVsbCkKICAgICAgICAgICAgc2V0VGFyZ2V0KGZyb20u\nZ2V0VGFyZ2V0KCkpOwogICAgICAgIGlmIChnZXRUYXJnZXRGaWVsZCgpID09\nIG51bGwpCiAgICAgICAgICAgIHNldFRhcmdldEZpZWxkKGZyb20uZ2V0VGFy\nZ2V0RmllbGQoKSk7CiAgICAgICAgaWYgKF9mbGFncyA9PSAwKQogICAgICAg\nICAgICBfZmxhZ3MgPSBmcm9tLl9mbGFnczsKICAgIH0KfQo=\n","encoding":"base64"}

