{"sha":"fb209e49d4d99ee38e965aeea5a13dd3ca7b250a","node_id":"MDQ6QmxvYjIwNjM2NDpmYjIwOWU0OWQ0ZDk5ZWUzOGU5NjVhZWVhNWExM2RkM2NhN2IyNTBh","size":9812,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/fb209e49d4d99ee38e965aeea5a13dd3ca7b250a","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNjaGVtYTsKCi8qKgogKiBNZXRhZGF0YSBhYm91dCBj\nb2x1bW4gSS9PIGluIGEgc3BlY2lmaWMgY29udGV4dC4gSW4gdGhlIGNvbnRl\neHQgb2YKICogYSBmb3JlaWduIGtleSwgdGhlIHN0YW5kYXJkIGZvcmVpZ24g\na2V5IGNvbHVtbnMgYXJlIGluZGV4ZWQgZmlyc3QsIHRoZW4KICogdGhlIGNv\nbnN0YW50IGNvbHVtbnMuCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqLwpw\ndWJsaWMgY2xhc3MgQ29sdW1uSU8gewoKICAgIHB1YmxpYyBzdGF0aWMgZmlu\nYWwgQ29sdW1uSU8gVU5SRVNUUklDVEVEID0gbmV3IENvbHVtbklPKCkgewog\nICAgICAgIHB1YmxpYyB2b2lkIHNldEluc2VydGFibGUoaW50IGNvbCwgYm9v\nbGVhbiBpbnNlcnRhYmxlKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBVbnN1\ncHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAg\nICAgcHVibGljIHZvaWQgc2V0VXBkYXRhYmxlKGludCBjb2wsIGJvb2xlYW4g\ndXBkYXRhYmxlKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRl\nZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcHVi\nbGljIHZvaWQgc2V0TnVsbEluc2VydGFibGUoaW50IGNvbCwgYm9vbGVhbiBp\nbnNlcnRhYmxlKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRl\nZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcHVi\nbGljIHZvaWQgc2V0TnVsbFVwZGF0YWJsZShpbnQgY29sLCBib29sZWFuIGlu\nc2VydGFibGUpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVk\nT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICAgICAgfQogICAgfTsKCiAgICBw\ncml2YXRlIGludCBfdW5JbnNlcnRhYmxlID0gMDsKICAgIHByaXZhdGUgaW50\nIF91blVwZGF0YWJsZSA9IDA7CiAgICBwcml2YXRlIGludCBfdW5OdWxsSW5z\nZXJ0YWJsZSA9IDA7CiAgICBwcml2YXRlIGludCBfdW5OdWxsVXBkYXRhYmxl\nID0gMDsKCiAgICAvKioKICAgICAqIFdoZXRoZXIgdGhlIGNvbHVtbiBhdCB0\naGUgZ2l2ZW4gaW5kZXggaXMgaW5zZXJ0YWJsZSBpbiB0aGlzIGNvbnRleHQu\nCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlzSW5zZXJ0YWJsZShpbnQg\nY29sLCBib29sZWFuIG51bGxWYWx1ZSkgewogICAgICAgIHJldHVybiBpcyhj\nb2wsIF91bkluc2VydGFibGUsIF91bk51bGxJbnNlcnRhYmxlLCBudWxsVmFs\ndWUpOwogICAgfQoKICAgIC8qKgogICAgICogRXF1aXZhbGVudCB0byA8Y29k\nZT5pc0luc2VydGFibGUgKDAsIG51bGxWYWx1ZSk8L2NvZGU+LCBidXQgcmV0\ndXJucwogICAgICogZmFsc2UgaWYgdGhlIGdpdmVuIGNvbHVtbiBpcyBudWxs\nLgogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBpc0luc2VydGFibGUoQ29s\ndW1uIGNvbCwgYm9vbGVhbiBudWxsVmFsdWUpIHsKICAgICAgICByZXR1cm4g\naXMoY29sLCBfdW5JbnNlcnRhYmxlLCBfdW5OdWxsSW5zZXJ0YWJsZSwgbnVs\nbFZhbHVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIgYW55IGNv\nbHVtbiB1cCB0byBidXQgZXhjbHVkaW5nIHRoZSBnaXZlbiBpbmRleCBpcyBp\nbnNlcnRhYmxlLgogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBpc0FueUlu\nc2VydGFibGUoaW50IGNvbCwgYm9vbGVhbiBudWxsVmFsdWUpIHsKICAgICAg\nICByZXR1cm4gaXNBbnkoY29sLCBfdW5JbnNlcnRhYmxlLCBfdW5OdWxsSW5z\nZXJ0YWJsZSwgbnVsbFZhbHVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIEVx\ndWl2YWxlbnQgdG8gPGNvZGU+aXNBbnlJbnNlcnRhYmxlIChjb2xzLmxlbmd0\naCwgbnVsbFZhbHVlKTwvY29kZT4uCiAgICAgKi8KICAgIHB1YmxpYyBib29s\nZWFuIGlzQW55SW5zZXJ0YWJsZShDb2x1bW5bXSBjb2xzLCBib29sZWFuIG51\nbGxWYWx1ZSkgewogICAgICAgIHJldHVybiBpc0FueShjb2xzLCBfdW5JbnNl\ncnRhYmxlLCBfdW5OdWxsSW5zZXJ0YWJsZSwgbnVsbFZhbHVlKTsKICAgIH0K\nCiAgICAvKioKICAgICAqIFJldHVybiB0cnVlIGlmIGFueSBjb2x1bW5zIGZv\nciB0aGUgZ2l2ZW4ga2V5IGFyZSBpbnNlcnRhYmxlLgogICAgICovCiAgICBw\ndWJsaWMgYm9vbGVhbiBpc0FueUluc2VydGFibGUoRm9yZWlnbktleSBmaywg\nYm9vbGVhbiBudWxsVmFsdWUpIHsKICAgICAgICByZXR1cm4gaXNBbnkoZmss\nIF91bkluc2VydGFibGUsIF91bk51bGxJbnNlcnRhYmxlLCBudWxsVmFsdWUp\nCiAgICAgICAgICAgICYmICghbnVsbFZhbHVlIHx8IGZrLmlzTG9naWNhbCgp\nIHx8IGlzTnVsbGFibGUoZmspKTsKICAgIH0KCiAgICAvKioKICAgICAqIFdo\nZXRoZXIgYWxsIGNvbHVtbnMgdXAgdG8gYnV0IGV4Y2x1ZGluZyB0aGUgZ2l2\nZW4gaW5kZXggYXJlIGluc2VydGFibGUuCiAgICAgKi8KICAgIHB1YmxpYyBi\nb29sZWFuIGlzQWxsSW5zZXJ0YWJsZShpbnQgY29sLCBib29sZWFuIG51bGxW\nYWx1ZSkgewogICAgICAgIHJldHVybiBpc0FsbChjb2wsIF91bkluc2VydGFi\nbGUsIF91bk51bGxJbnNlcnRhYmxlLCBudWxsVmFsdWUpOwogICAgfQoKICAg\nIC8qKgogICAgICogRXF1aXZhbGVudCB0byA8Y29kZT5pc0FsbEluc2VydGFi\nbGUgKGNvbHMubGVuZ3RoLCBudWxsVmFsdWUpPC9jb2RlPi4KICAgICAqLwog\nICAgcHVibGljIGJvb2xlYW4gaXNBbGxJbnNlcnRhYmxlKENvbHVtbltdIGNv\nbHMsIGJvb2xlYW4gbnVsbFZhbHVlKSB7CiAgICAgICAgcmV0dXJuIGlzQWxs\nKGNvbHMsIF91bkluc2VydGFibGUsIF91bk51bGxJbnNlcnRhYmxlLCBudWxs\nVmFsdWUpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRydWUgaWYg\nYWxsIGNvbHVtbnMgZm9yIHRoZSBnaXZlbiBrZXkgYXJlIGluc2VydGFibGUu\nCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlzQWxsSW5zZXJ0YWJsZShG\nb3JlaWduS2V5IGZrLCBib29sZWFuIG51bGxWYWx1ZSkgewogICAgICAgIHJl\ndHVybiBpc0FsbChmaywgX3VuSW5zZXJ0YWJsZSwgX3VuTnVsbEluc2VydGFi\nbGUsIG51bGxWYWx1ZSkKICAgICAgICAgICAgJiYgKCFudWxsVmFsdWUgfHwg\nZmsuaXNMb2dpY2FsKCkgfHwgaXNOdWxsYWJsZShmaykpOwogICAgfQoKICAg\nIC8qKgogICAgICogV2hldGhlciB0aGUgY29sdW1uIGF0IHRoZSBnaXZlbiBp\nbmRleCBpcyBpbnNlcnRhYmxlIGluIHRoaXMgY29udGV4dC4KICAgICAqLwog\nICAgcHVibGljIHZvaWQgc2V0SW5zZXJ0YWJsZShpbnQgY29sLCBib29sZWFu\nIGluc2VydGFibGUpIHsKICAgICAgICBfdW5JbnNlcnRhYmxlID0gc2V0KGNv\nbCwgaW5zZXJ0YWJsZSwgX3VuSW5zZXJ0YWJsZSk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBXaGV0aGVyIHRoaXMgY29udGV4dCBjYW4gaW5zZXJ0IHRoZSBn\naXZlbiBjb2x1bW4gYXMgbnVsbC9kZWZhdWx0IGluCiAgICAgKiB0aGlzIGNv\nbnRleHQuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldE51bGxJbnNlcnRh\nYmxlKGludCBjb2wsIGJvb2xlYW4gaW5zZXJ0YWJsZSkgewogICAgICAgIF91\nbk51bGxJbnNlcnRhYmxlID0gc2V0KGNvbCwgaW5zZXJ0YWJsZSwgX3VuTnVs\nbEluc2VydGFibGUpOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciB0\naGUgY29sdW1uIGF0IHRoZSBnaXZlbiBpbmRleCBpcyB1cGRhdGFibGUgaW4g\ndGhpcyBjb250ZXh0LgogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBpc1Vw\nZGF0YWJsZShpbnQgY29sLCBib29sZWFuIG51bGxWYWx1ZSkgewogICAgICAg\nIHJldHVybiBpcyhjb2wsIF91blVwZGF0YWJsZSwgX3VuTnVsbFVwZGF0YWJs\nZSwgbnVsbFZhbHVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIEVxdWl2YWxl\nbnQgdG8gPGNvZGU+aXNVcGRhdGFibGUgKDAsIG51bGxWYWx1ZSk8L2NvZGU+\nLCBidXQgcmV0dXJucwogICAgICogZmFsc2UgaWYgdGhlIGdpdmVuIGNvbHVt\nbiBpcyBudWxsLgogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBpc1VwZGF0\nYWJsZShDb2x1bW4gY29sLCBib29sZWFuIG51bGxWYWx1ZSkgewogICAgICAg\nIHJldHVybiBpcyhjb2wsIF91blVwZGF0YWJsZSwgX3VuTnVsbFVwZGF0YWJs\nZSwgbnVsbFZhbHVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIg\nYW55IGNvbHVtbiB1cCB0byBidXQgZXhjbHVkaW5nIHRoZSBnaXZlbiBpbmRl\neCBpcyB1cGRhdGFibGUuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlz\nQW55VXBkYXRhYmxlKGludCBjb2wsIGJvb2xlYW4gbnVsbFZhbHVlKSB7CiAg\nICAgICAgcmV0dXJuIGlzQW55KGNvbCwgX3VuVXBkYXRhYmxlLCBfdW5OdWxs\nVXBkYXRhYmxlLCBudWxsVmFsdWUpOwogICAgfQoKICAgIC8qKgogICAgICog\nRXF1aXZhbGVudCB0byA8Y29kZT5pc0FueVVwZGF0YWJsZSAoY29scy5sZW5n\ndGgsIG51bGxWYWx1ZSk8L2NvZGU+LgogICAgICovCiAgICBwdWJsaWMgYm9v\nbGVhbiBpc0FueVVwZGF0YWJsZShDb2x1bW5bXSBjb2xzLCBib29sZWFuIG51\nbGxWYWx1ZSkgewogICAgICAgIHJldHVybiBpc0FueShjb2xzLCBfdW5VcGRh\ndGFibGUsIF91bk51bGxVcGRhdGFibGUsIG51bGxWYWx1ZSk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBSZXR1cm4gdHJ1ZSBpZiBhbnkgY29sdW1ucyBmb3Ig\ndGhlIGdpdmVuIGtleSBhcmUgdXBkYXRhYmxlLgogICAgICovCiAgICBwdWJs\naWMgYm9vbGVhbiBpc0FueVVwZGF0YWJsZShGb3JlaWduS2V5IGZrLCBib29s\nZWFuIG51bGxWYWx1ZSkgewogICAgICAgIHJldHVybiBpc0FueShmaywgX3Vu\nVXBkYXRhYmxlLCBfdW5OdWxsVXBkYXRhYmxlLCBudWxsVmFsdWUpCiAgICAg\nICAgICAgICYmICghbnVsbFZhbHVlIHx8IGZrLmlzTG9naWNhbCgpIHx8IGlz\nTnVsbGFibGUoZmspKTsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIg\nYWxsIGNvbHVtbnMgdXAgdG8gYnV0IGV4Y2x1ZGluZyB0aGUgZ2l2ZW4gaW5k\nZXggYXJlIHVwZGF0YWJsZS4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4g\naXNBbGxVcGRhdGFibGUoaW50IGNvbCwgYm9vbGVhbiBudWxsVmFsdWUpIHsK\nICAgICAgICByZXR1cm4gaXNBbGwoY29sLCBfdW5VcGRhdGFibGUsIF91bk51\nbGxVcGRhdGFibGUsIG51bGxWYWx1ZSk7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBFcXVpdmFsZW50IHRvIDxjb2RlPmlzQWxsVXBkYXRhYmxlIChjb2xzLmxl\nbmd0aCwgbnVsbFZhbHVlKTwvY29kZT4uCiAgICAgKi8KICAgIHB1YmxpYyBi\nb29sZWFuIGlzQWxsVXBkYXRhYmxlKENvbHVtbltdIGNvbHMsIGJvb2xlYW4g\nbnVsbFZhbHVlKSB7CiAgICAgICAgcmV0dXJuIGlzQWxsKGNvbHMsIF91blVw\nZGF0YWJsZSwgX3VuTnVsbFVwZGF0YWJsZSwgbnVsbFZhbHVlKTsKICAgIH0K\nCiAgICAvKioKICAgICAqIFJldHVybiB0cnVlIGlmIGFsbCBjb2x1bW5zIGZv\nciB0aGUgZ2l2ZW4ga2V5IGFyZSB1cGRhdGFibGUuCiAgICAgKi8KICAgIHB1\nYmxpYyBib29sZWFuIGlzQWxsVXBkYXRhYmxlKEZvcmVpZ25LZXkgZmssIGJv\nb2xlYW4gbnVsbFZhbHVlKSB7CiAgICAgICAgcmV0dXJuIGlzQWxsKGZrLCBf\ndW5VcGRhdGFibGUsIF91bk51bGxVcGRhdGFibGUsIG51bGxWYWx1ZSkKICAg\nICAgICAgICAgJiYgKCFudWxsVmFsdWUgfHwgZmsuaXNMb2dpY2FsKCkgfHwg\naXNOdWxsYWJsZShmaykpOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhl\nciB0aGUgY29sdW1uIGF0IHRoZSBnaXZlbiBpbmRleCBpcyB1cGRhdGFibGUg\naW4gdGhpcyBjb250ZXh0LgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRV\ncGRhdGFibGUoaW50IGNvbCwgYm9vbGVhbiB1cGRhdGFibGUpIHsKICAgICAg\nICBfdW5VcGRhdGFibGUgPSBzZXQoY29sLCB1cGRhdGFibGUsIF91blVwZGF0\nYWJsZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRoaXMgY29u\ndGV4dCBjYW4gc2V0IHRoZSBnaXZlbiBjb2x1bW4gdG8gbnVsbC9kZWZhdWx0\nIGluCiAgICAgKiB0aGlzIGNvbnRleHQuCiAgICAgKi8KICAgIHB1YmxpYyB2\nb2lkIHNldE51bGxVcGRhdGFibGUoaW50IGNvbCwgYm9vbGVhbiB1cGRhdGFi\nbGUpIHsKICAgICAgICBfdW5OdWxsVXBkYXRhYmxlID0gc2V0KGNvbCwgdXBk\nYXRhYmxlLCBfdW5OdWxsVXBkYXRhYmxlKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIFdoZXRoZXIgdGhlIGNvbHVtbiBhdCB0aGUgZ2l2ZW4gaW5kZXggaGFz\nIHRoZSBnaXZlbiBwcm9wZXJ0eS4KICAgICAqLwogICAgcHJpdmF0ZSBib29s\nZWFuIGlzKGludCBjb2wsIGludCBwcm9wZXJ0eSwgaW50IG51bGxQcm9wZXJ0\neSwKICAgICAgICBib29sZWFuIG51bGxWYWx1ZSkgewogICAgICAgIHJldHVy\nbiAocHJvcGVydHkgJiAoMiA8PCBjb2wpKSA9PSAwCiAgICAgICAgICAgICYm\nICghbnVsbFZhbHVlIHx8IChudWxsUHJvcGVydHkgJiAoMiA8PCBjb2wpKSA9\nPSAwKTsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdGhlIGNvbHVt\nbiBoYXMgdGhlIGdpdmVuIHByb3BlcnR5LgogICAgICovCiAgICBwcml2YXRl\nIGJvb2xlYW4gaXMoQ29sdW1uIGNvbCwgaW50IHByb3BlcnR5LCBpbnQgbnVs\nbFByb3BlcnR5LAogICAgICAgIGJvb2xlYW4gbnVsbFZhbHVlKSB7CiAgICAg\nICAgcmV0dXJuIGNvbCAhPSBudWxsICYmIGlzKDAsIHByb3BlcnR5LCBudWxs\nUHJvcGVydHksIG51bGxWYWx1ZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBX\naGV0aGVyIGFueSBjb2x1bW4gdXAgdG8gYnV0IGV4Y2x1ZGluZyB0aGUgZ2l2\nZW4gaW5kZXggaGFzIHRoZSBnaXZlbgogICAgICogcHJvcGVydHkuCiAgICAg\nKi8KICAgIHByaXZhdGUgYm9vbGVhbiBpc0FueShpbnQgY29sLCBpbnQgcHJv\ncGVydHksIGludCBudWxsUHJvcGVydHksCiAgICAgICAgYm9vbGVhbiBudWxs\nVmFsdWUpIHsKICAgICAgICBpZiAoY29sID09IDApCiAgICAgICAgICAgIHJl\ndHVybiBmYWxzZTsKICAgICAgICBpZiAocHJvcGVydHkgPT0gMCkKICAgICAg\nICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkg\nPCBjb2w7IGkrKykKICAgICAgICAgICAgaWYgKGlzKGksIHByb3BlcnR5LCBu\ndWxsUHJvcGVydHksIG51bGxWYWx1ZSkpCiAgICAgICAgICAgICAgICByZXR1\ncm4gdHJ1ZTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBXaGV0aGVyIGFueSBjb2x1bW5zIGhhdmUgdGhlIGdpdmVuIHBy\nb3BlcnR5LgogICAgICovCiAgICBwcml2YXRlIGJvb2xlYW4gaXNBbnkoQ29s\ndW1uW10gY29scywgaW50IHByb3BlcnR5LCBpbnQgbnVsbFByb3BlcnR5LAog\nICAgICAgIGJvb2xlYW4gbnVsbFZhbHVlKSB7CiAgICAgICAgcmV0dXJuIGlz\nQW55KGNvbHMubGVuZ3RoLCBwcm9wZXJ0eSwgbnVsbFByb3BlcnR5LCBudWxs\nVmFsdWUpOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciBhbnkgY29s\ndW1ucyBmb3IgdGhlIGdpdmVuIGtleSBoYXZlIHRoZSBwcm9wZXJ0eS4KICAg\nICAqLwogICAgcHJpdmF0ZSBib29sZWFuIGlzQW55KEZvcmVpZ25LZXkgZmss\nIGludCBwcm9wZXJ0eSwgaW50IG51bGxQcm9wZXJ0eSwKICAgICAgICBib29s\nZWFuIG51bGxWYWx1ZSkgewogICAgICAgIHJldHVybiBmayAhPSBudWxsICYm\nIGlzQW55KGZrLmdldENvbHVtbnMoKS5sZW5ndGgKICAgICAgICAgICAgKyBm\nay5nZXRDb25zdGFudENvbHVtbnMoKS5sZW5ndGgsIHByb3BlcnR5LCBudWxs\nUHJvcGVydHksCiAgICAgICAgICAgIG51bGxWYWx1ZSk7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBXaGV0aGVyIGFsbCBjb2x1bW5zIHVwIHRvIGJ1dCBleGNs\ndWRpbmcgdGhlIGdpdmVuIGluZGV4IGhhdmUgdGhlIGdpdmVuCiAgICAgKiBw\ncm9wZXJ0eS4KICAgICAqLwogICAgcHJpdmF0ZSBib29sZWFuIGlzQWxsKGlu\ndCBjb2wsIGludCBwcm9wZXJ0eSwgaW50IG51bGxQcm9wZXJ0eSwKICAgICAg\nICBib29sZWFuIG51bGxWYWx1ZSkgewogICAgICAgIGlmIChjb2wgPT0gMCkK\nICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIGlmIChwcm9wZXJ0\neSA9PSAwKQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICBmb3Ig\nKGludCBpID0gMDsgaSA8IGNvbDsgaSsrKQogICAgICAgICAgICBpZiAoIWlz\nKGksIHByb3BlcnR5LCBudWxsUHJvcGVydHksIG51bGxWYWx1ZSkpCiAgICAg\nICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgcmV0dXJuIHRydWU7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVyIGFsbCBjb2x1bW5zIGhh\ndmUgdGhlIGdpdmVuIHByb3BlcnR5LgogICAgICovCiAgICBwcml2YXRlIGJv\nb2xlYW4gaXNBbGwoQ29sdW1uW10gY29scywgaW50IHByb3BlcnR5LCBpbnQg\nbnVsbFByb3BlcnR5LAogICAgICAgIGJvb2xlYW4gbnVsbFZhbHVlKSB7CiAg\nICAgICAgcmV0dXJuIGlzQWxsKGNvbHMubGVuZ3RoLCBwcm9wZXJ0eSwgbnVs\nbFByb3BlcnR5LCBudWxsVmFsdWUpOwogICAgfQoKICAgIC8qKgogICAgICog\nV2hldGhlciBhbGwgY29sdW1ucyBmb3IgdGhlIGtleSBoYXZlIHRoZSBnaXZl\nbiBwcm9wZXJ0eS4KICAgICAqLwogICAgcHJpdmF0ZSBib29sZWFuIGlzQWxs\nKEZvcmVpZ25LZXkgZmssIGludCBwcm9wZXJ0eSwgaW50IG51bGxQcm9wZXJ0\neSwKICAgICAgICBib29sZWFuIG51bGxWYWx1ZSkgewogICAgICAgIHJldHVy\nbiBmayAhPSBudWxsICYmIGlzQWxsKGZrLmdldENvbHVtbnMoKS5sZW5ndGgK\nICAgICAgICAgICAgKyBmay5nZXRDb25zdGFudENvbHVtbnMoKS5sZW5ndGgs\nIHByb3BlcnR5LCBudWxsUHJvcGVydHksCiAgICAgICAgICAgIG51bGxWYWx1\nZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQgdGhlIGdpdmVuIHByb3Bl\ncnR5LgogICAgICovCiAgICBwcml2YXRlIGludCBzZXQoaW50IGNvbCwgYm9v\nbGVhbiBpcywgaW50IHByb3BlcnR5KSB7CiAgICAgICAgaWYgKGlzKQogICAg\nICAgICAgICByZXR1cm4gcHJvcGVydHkgJiB+KDIgPDwgY29sKTsKICAgICAg\nICByZXR1cm4gcHJvcGVydHkgfCAoMiA8PCBjb2wpOwogICAgfQoKICAgIC8q\nKgogICAgICogV2hldGhlciB0aGUgZ2l2ZW4gZm9yZWlnbiBrZXkgaXMgbnVs\nbGFibGUuCiAgICAgKi8KICAgIHByaXZhdGUgYm9vbGVhbiBpc051bGxhYmxl\nKEZvcmVpZ25LZXkgZmspIHsKICAgICAgICBDb2x1bW5bXSBjb2xzID0gZmsu\nZ2V0Q29sdW1ucygpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgY29s\ncy5sZW5ndGg7IGkrKykKICAgICAgICAgICAgaWYgKGNvbHNbaV0uaXNOb3RO\ndWxsKCkgfHwgY29sc1tpXS5pc1ByaW1hcnlLZXkoKSkKICAgICAgICAgICAg\nICAgIHJldHVybiBmYWxzZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0K\nfQo=\n","encoding":"base64"}

