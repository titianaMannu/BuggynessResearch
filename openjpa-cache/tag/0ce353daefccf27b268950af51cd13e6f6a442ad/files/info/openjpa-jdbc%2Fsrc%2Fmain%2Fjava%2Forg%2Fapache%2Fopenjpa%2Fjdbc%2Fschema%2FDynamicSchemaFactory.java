{"sha":"06765a1b7a17bb34678d388f37c6b360c44058fd","node_id":"MDQ6QmxvYjIwNjM2NDowNjc2NWExYjdhMTdiYjM0Njc4ZDM4OGYzN2M2YjM2MGM0NDA1OGZk","size":4126,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/06765a1b7a17bb34678d388f37c6b360c44058fd","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNjaGVtYTsKCmltcG9ydCBqYXZhLnNxbC5UeXBlczsK\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5jb25mLkpEQkNDb25m\naWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3Fs\nLkRCRGljdGlvbmFyeTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIu\nY29uZi5Db25maWd1cmFibGU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nbGliLmNvbmYuQ29uZmlndXJhdGlvbjsKCi8qKgogKiBGYWN0b3J5IHdob3Nl\nIHNjaGVtYSBncm91cCBkeW5hbWljYWxseSBmaWxscyBpdHNlbGYgd2l0aCBp\nbmZvcm1hdGlvbgogKiBhcyBtYXBwaW5ncyB2YWxpZGF0ZSB0aGVtc2VsdmVz\nIGluIHRoZWlyIDxjb2RlPm1hcDwvY29kZT4gbWV0aG9kLgogKiBUYWJsZXMg\nYXJlIGFkZGVkIHdoZW4ge0BsaW5rIFNjaGVtYUdyb3VwI2ZpbmRUYWJsZX0g\naXMgY2FsbGVkLiBDb2x1bW5zCiAqIGFyZSBhZGRlZCB0byB0YWJsZXMgd2hl\nbiB7QGxpbmsgVGFibGUjZ2V0Q29sdW1ufSBpcyBjYWxsZWQuIEFuZCB0aGUK\nICogY29sdW1uIHR5cGVzIGFyZSBzZXQgd2hlbiB7QGxpbmsgQ29sdW1uI2lz\nQ29tcGF0aWJsZX0gaXMgY2FsbGVkLgogKgogKiBAYXV0aG9yIEFiZSBXaGl0\nZQogKi8KcHVibGljIGNsYXNzIER5bmFtaWNTY2hlbWFGYWN0b3J5CiAgICBl\neHRlbmRzIFNjaGVtYUdyb3VwCiAgICBpbXBsZW1lbnRzIFNjaGVtYUZhY3Rv\ncnksIENvbmZpZ3VyYWJsZSB7CgogICAgcHJpdmF0ZSBEQkRpY3Rpb25hcnkg\nX2RpY3QgPSBudWxsOwogICAgcHJpdmF0ZSBTdHJpbmcgX3NjaGVtYSA9IG51\nbGw7CgogICAgcHVibGljIHZvaWQgc2V0Q29uZmlndXJhdGlvbihDb25maWd1\ncmF0aW9uIGNvbmYpIHsKICAgICAgICBKREJDQ29uZmlndXJhdGlvbiBqY29u\nZiA9IChKREJDQ29uZmlndXJhdGlvbikgY29uZjsKICAgICAgICBfZGljdCA9\nIGpjb25mLmdldERCRGljdGlvbmFyeUluc3RhbmNlKCk7CiAgICAgICAgX3Nj\naGVtYSA9IGpjb25mLmdldFNjaGVtYSgpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHN0YXJ0Q29uZmlndXJhdGlvbigpIHsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBlbmRDb25maWd1cmF0aW9uKCkgewogICAgfQoKICAgIHB1YmxpYyBT\nY2hlbWFHcm91cCByZWFkU2NoZW1hKCkgewogICAgICAgIHJldHVybiB0aGlz\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHN0b3JlU2NoZW1hKFNjaGVtYUdy\nb3VwIHNjaGVtYSkgewogICAgICAgIC8vIG5vdGhpbmcgdG8gZG8KICAgIH0K\nCiAgICBwdWJsaWMgYm9vbGVhbiBpc0tub3duVGFibGUoVGFibGUgdGFibGUp\nIHsKICAgICAgICByZXR1cm4gc3VwZXIuZmluZFRhYmxlKHRhYmxlKSAhPSBu\ndWxsOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGlzS25vd25UYWJsZShT\ndHJpbmcgbmFtZSkgewogICAgICAgIHJldHVybiBzdXBlci5maW5kVGFibGUo\nbmFtZSkgIT0gbnVsbDsKICAgIH0KCiAgICBwdWJsaWMgVGFibGUgZmluZFRh\nYmxlKFN0cmluZyBuYW1lKSB7CiAgICAgICAgaWYgKG5hbWUgPT0gbnVsbCkK\nICAgICAgICAgICAgcmV0dXJuIG51bGw7CgogICAgICAgIFRhYmxlIHRhYmxl\nID0gc3VwZXIuZmluZFRhYmxlKG5hbWUpOwogICAgICAgIGlmICh0YWJsZSAh\nPSBudWxsKQogICAgICAgICAgICByZXR1cm4gdGFibGU7CgogICAgICAgIC8v\nIGlmIGZ1bGwgbmFtZSwgc3BsaXQKICAgICAgICBTdHJpbmcgc2NoZW1hTmFt\nZSA9IG51bGw7CiAgICAgICAgU3RyaW5nIHRhYmxlTmFtZSA9IG5hbWU7CiAg\nICAgICAgaW50IGRvdElkeCA9IG5hbWUubGFzdEluZGV4T2YoJy4nKTsKICAg\nICAgICBpZiAoZG90SWR4ICE9IC0xKSB7CiAgICAgICAgICAgIHNjaGVtYU5h\nbWUgPSBuYW1lLnN1YnN0cmluZygwLCBkb3RJZHgpOwogICAgICAgICAgICB0\nYWJsZU5hbWUgPSBuYW1lLnN1YnN0cmluZyhkb3RJZHggKyAxKTsKICAgICAg\nICB9IGVsc2UKICAgICAgICAgICAgc2NoZW1hTmFtZSA9IF9zY2hlbWE7Cgog\nICAgICAgIFNjaGVtYSBzY2hlbWEgPSBnZXRTY2hlbWEoc2NoZW1hTmFtZSk7\nCiAgICAgICAgaWYgKHNjaGVtYSA9PSBudWxsKQogICAgICAgICAgICBzY2hl\nbWEgPSBhZGRTY2hlbWEoc2NoZW1hTmFtZSk7CiAgICAgICAgcmV0dXJuIHNj\naGVtYS5hZGRUYWJsZSh0YWJsZU5hbWUpOwogICAgfQoKICAgIHByb3RlY3Rl\nZCBUYWJsZSBuZXdUYWJsZShTdHJpbmcgbmFtZSwgU2NoZW1hIHNjaGVtYSkg\newogICAgICAgIHJldHVybiBuZXcgRHluYW1pY1RhYmxlKG5hbWUsIHNjaGVt\nYSk7CiAgICB9CgogICAgcHJvdGVjdGVkIENvbHVtbiBuZXdDb2x1bW4oU3Ry\naW5nIG5hbWUsIFRhYmxlIHRhYmxlKSB7CiAgICAgICAgcmV0dXJuIG5ldyBE\neW5hbWljQ29sdW1uKG5hbWUsIHRhYmxlKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIFRhYmxlIHR5cGUgdGhhdCBhZGRzIGNvbHVtbnMgd2hlbiB7QGxpbmsg\nI2dldENvbHVtbn0gaXMgY2FsbGVkLgogICAgICovCiAgICBwcml2YXRlIHN0\nYXRpYyBjbGFzcyBEeW5hbWljVGFibGUKICAgICAgICBleHRlbmRzIFRhYmxl\nIHsKCiAgICAgICAgcHVibGljIER5bmFtaWNUYWJsZShTdHJpbmcgbmFtZSwg\nU2NoZW1hIHNjaGVtYSkgewogICAgICAgICAgICBzdXBlcihuYW1lLCBzY2hl\nbWEpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIENvbHVtbiBnZXRDb2x1\nbW4oU3RyaW5nIG5hbWUpIHsKICAgICAgICAgICAgaWYgKG5hbWUgPT0gbnVs\nbCkKICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwoKICAgICAgICAgICAg\nQ29sdW1uIGNvbCA9IHN1cGVyLmdldENvbHVtbihuYW1lKTsKICAgICAgICAg\nICAgaWYgKGNvbCAhPSBudWxsKQogICAgICAgICAgICAgICAgcmV0dXJuIGNv\nbDsKICAgICAgICAgICAgcmV0dXJuIGFkZENvbHVtbihuYW1lKTsKICAgICAg\nICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBDb2x1bW4gdHlwZSB0aGF0IHNl\ndHMgaXRzIHR5cGUgd2hlbiB7QGxpbmsgI2lzQ29tcGF0aWJsZX0gaXMgY2Fs\nbGVkLgogICAgICovCiAgICBwcml2YXRlIGNsYXNzIER5bmFtaWNDb2x1bW4K\nICAgICAgICBleHRlbmRzIENvbHVtbiB7CgogICAgICAgIHB1YmxpYyBEeW5h\nbWljQ29sdW1uKFN0cmluZyBuYW1lLCBUYWJsZSB0YWJsZSkgewogICAgICAg\nICAgICBzdXBlcihuYW1lLCB0YWJsZSk7CiAgICAgICAgfQoKICAgICAgICBw\ndWJsaWMgYm9vbGVhbiBpc0NvbXBhdGlibGUoaW50IHR5cGUsIGludCBzaXpl\nKSB7CiAgICAgICAgICAgIGlmIChnZXRUeXBlKCkgIT0gVHlwZXMuT1RIRVIp\nCiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIuaXNDb21wYXRpYmxlKHR5\ncGUsIHNpemUpOwoKICAgICAgICAgICAgaWYgKHR5cGUgPT0gVHlwZXMuVkFS\nQ0hBUiAmJiBzaXplIDw9IDApCiAgICAgICAgICAgICAgICBzaXplID0gX2Rp\nY3QuY2hhcmFjdGVyQ29sdW1uU2l6ZTsKICAgICAgICAgICAgc2V0VHlwZSh0\neXBlKTsKICAgICAgICAgICAgc2V0U2l6ZShzaXplKTsKICAgICAgICAgICAg\ncmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgfQp9Cg==\n","encoding":"base64"}

