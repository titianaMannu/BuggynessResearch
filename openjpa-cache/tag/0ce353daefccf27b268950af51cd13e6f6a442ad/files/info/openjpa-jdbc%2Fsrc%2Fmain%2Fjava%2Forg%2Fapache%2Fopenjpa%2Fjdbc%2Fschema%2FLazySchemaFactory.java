{"sha":"5092f36c5fae313594ba5a679f9ad7dc4c526c12","node_id":"MDQ6QmxvYjIwNjM2NDo1MDkyZjM2YzVmYWUzMTM1OTRiYTVhNjc5ZjlhZDdkYzRjNTI2YzEy","size":6027,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/5092f36c5fae313594ba5a679f9ad7dc4c526c12","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNjaGVtYTsKCmltcG9ydCBqYXZhLnNxbC5Db25uZWN0\naW9uOwppbXBvcnQgamF2YS5zcWwuRGF0YWJhc2VNZXRhRGF0YTsKaW1wb3J0\nIGphdmEuc3FsLlNRTEV4Y2VwdGlvbjsKCmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5jb25mLkpEQkNDb25maWd1cmF0aW9uOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNRTEV4Y2VwdGlvbnM7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmNvbmYuQ29uZmlndXJhYmxlOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5jb25mLkNvbmZpZ3VyYXRp\nb247CgovKioKICogRmFjdG9yeSB0aGF0IHVzZXMgZGF0YWJhc2UgbWV0YWRh\ndGEgdG8gY29uc3RydWN0IHRoZSBzeXN0ZW0gc2NoZW1hLgogKiBUaGUgbGF6\neSBzY2hlbWEgZmFjdG9yeSBvbmx5IGxvYWRzIHRhYmxlIGRhdGEgYXMgaXQg\naXMgcmVxdWVzdGVkLiBJdAogKiBkb2VzIG5vdCBwcm9wZXJseSBzdXBwb3J0\nIG9wZXJhdGlvbnMgdGhhdCByZXF1aXJlIGtub3dsZWRnZSBvZiB0aGUgZW50\naXJlCiAqIHNjaGVtYS4KICoKICogQGF1dGhvciBBYmUgV2hpdGUKICovCnB1\nYmxpYyBjbGFzcyBMYXp5U2NoZW1hRmFjdG9yeQogICAgZXh0ZW5kcyBTY2hl\nbWFHcm91cAogICAgaW1wbGVtZW50cyBTY2hlbWFGYWN0b3J5LCBDb25maWd1\ncmFibGUgewoKICAgIHByaXZhdGUgSkRCQ0NvbmZpZ3VyYXRpb24gX2NvbmYg\nPSBudWxsOwogICAgcHJpdmF0ZSBTY2hlbWFHZW5lcmF0b3IgX2dlbiA9IG51\nbGw7CiAgICBwcml2YXRlIENvbm5lY3Rpb24gX2Nvbm4gPSBudWxsOwogICAg\ncHJpdmF0ZSBEYXRhYmFzZU1ldGFEYXRhIF9tZXRhID0gbnVsbDsKICAgIHBy\naXZhdGUgYm9vbGVhbiBfaW5kZXhlcyA9IGZhbHNlOwogICAgcHJpdmF0ZSBi\nb29sZWFuIF9wa3MgPSBmYWxzZTsKICAgIHByaXZhdGUgYm9vbGVhbiBfZmtz\nID0gZmFsc2U7CgogICAgcHVibGljIGJvb2xlYW4gZ2V0UHJpbWFyeUtleXMo\nKSB7CiAgICAgICAgcmV0dXJuIF9wa3M7CiAgICB9CgogICAgcHVibGljIHZv\naWQgc2V0UHJpbWFyeUtleXMoYm9vbGVhbiBwa3MpIHsKICAgICAgICBfcGtz\nID0gcGtzOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGdldEZvcmVpZ25L\nZXlzKCkgewogICAgICAgIHJldHVybiBfZmtzOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHNldEZvcmVpZ25LZXlzKGJvb2xlYW4gZmtzKSB7CiAgICAgICAg\nX2ZrcyA9IGZrczsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBnZXRJbmRl\neGVzKCkgewogICAgICAgIHJldHVybiBfaW5kZXhlczsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBzZXRJbmRleGVzKGJvb2xlYW4gaWR4KSB7CiAgICAgICAg\nX2luZGV4ZXMgPSBpZHg7CiAgICB9CgogICAgcHVibGljIFNjaGVtYUdyb3Vw\nIHJlYWRTY2hlbWEoKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgc3RvcmVTY2hlbWEoU2NoZW1hR3JvdXAgc2NoZW1h\nKSB7CiAgICAgICAgLy8gbm90aGluZyB0byBkbwogICAgfQoKICAgIHB1Ymxp\nYyBUYWJsZSBmaW5kVGFibGUoU3RyaW5nIG5hbWUpIHsKICAgICAgICBpZiAo\nbmFtZSA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKCiAgICAg\nICAgVGFibGUgdGFibGUgPSBzdXBlci5maW5kVGFibGUobmFtZSk7CiAgICAg\nICAgaWYgKHRhYmxlICE9IG51bGwpCiAgICAgICAgICAgIHJldHVybiB0YWJs\nZTsKCiAgICAgICAgZ2VuZXJhdGVTY2hlbWFPYmplY3QobmFtZSwgdHJ1ZSk7\nCiAgICAgICAgcmV0dXJuIHN1cGVyLmZpbmRUYWJsZShuYW1lKTsKICAgIH0K\nCiAgICBwdWJsaWMgU2VxdWVuY2UgZmluZFNlcXVlbmNlKFN0cmluZyBuYW1l\nKSB7CiAgICAgICAgaWYgKG5hbWUgPT0gbnVsbCkKICAgICAgICAgICAgcmV0\ndXJuIG51bGw7CgogICAgICAgIFNlcXVlbmNlIHNlcSA9IHN1cGVyLmZpbmRT\nZXF1ZW5jZShuYW1lKTsKICAgICAgICBpZiAoc2VxICE9IG51bGwpCiAgICAg\nICAgICAgIHJldHVybiBzZXE7CgogICAgICAgIGdlbmVyYXRlU2NoZW1hT2Jq\nZWN0KG5hbWUsIGZhbHNlKTsKICAgICAgICByZXR1cm4gc3VwZXIuZmluZFNl\ncXVlbmNlKG5hbWUpOwogICAgfQoKICAgIC8qKgogICAgICogR2VuZXJhdGUg\ndGhlIHRhYmxlIG9yIHNlcXVlbmNlIHdpdGggdGhlIGdpdmVuIG5hbWUuCiAg\nICAgKi8KICAgIHByaXZhdGUgdm9pZCBnZW5lcmF0ZVNjaGVtYU9iamVjdChT\ndHJpbmcgbmFtZSwgYm9vbGVhbiBpc1RhYmxlKSB7CiAgICAgICAgLy8gaWYg\nZnVsbCBuYW1lLCBzcGxpdAogICAgICAgIFN0cmluZyBzY2hlbWFOYW1lID0g\nbnVsbDsKICAgICAgICBTdHJpbmcgb2JqZWN0TmFtZSA9IG5hbWU7CgogICAg\nICAgIC8vIGxvb2sgZm9yIHRoZSBzdGFuZGFyZCBzY2hlbWEgc2VwYXJhdG9y\nLi4uCiAgICAgICAgaW50IGRvdElkeCA9IG5hbWUuaW5kZXhPZignLicpOwog\nICAgICAgIC8vIC4uLiBvciB0aGUgZGljdGlvbmFyeSBzY2hlbWEgc2VwYXJh\ndG9yCiAgICAgICAgaWYgKGRvdElkeCA9PSAtMSkgewogICAgICAgICAgICBT\ndHJpbmcgc2VwID0gX2NvbmYuZ2V0REJEaWN0aW9uYXJ5SW5zdGFuY2UoKS5j\nYXRhbG9nU2VwYXJhdG9yOwogICAgICAgICAgICBpZiAoISIuIi5lcXVhbHMo\nc2VwKSkKICAgICAgICAgICAgICAgIGRvdElkeCA9IG5hbWUuaW5kZXhPZihz\nZXApOwogICAgICAgIH0KCiAgICAgICAgaWYgKGRvdElkeCAhPSAtMSkgewog\nICAgICAgICAgICBzY2hlbWFOYW1lID0gbmFtZS5zdWJzdHJpbmcoMCwgZG90\nSWR4KTsKICAgICAgICAgICAgb2JqZWN0TmFtZSA9IG5hbWUuc3Vic3RyaW5n\nKGRvdElkeCArIDEpOwogICAgICAgIH0KCiAgICAgICAgLy8gd2Ugc2hhcmUg\nYSBzaW5nbGUgY29ubmVjdGlvbiBhY3Jvc3MgYWxsIHNjaGVtYXMsIHNvIHN5\nbmNoCiAgICAgICAgLy8gb24gdGhlIHNjaGVtYSBncm91cAogICAgICAgIHN5\nbmNocm9uaXplZCAodGhpcykgewogICAgICAgICAgICBib29sZWFuIGNsb3Nl\nID0gZmFsc2U7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAv\nLyB1c2UgdGhlIGV4aXN0aW5nIGNvbm5lY3Rpb24gaWYgcG9zc2libGU7IHRo\naXMgbWV0aG9kCiAgICAgICAgICAgICAgICAvLyBtaWdodCBiZSByZWVudHJh\nbnQgaWYgZ2VuZXJhdGluZyB0aGUgZm9yZWlnbiBrZXlzIGZvcgogICAgICAg\nICAgICAgICAgLy8gdGhpcyB0YWJsZSAoc2VlIGJlbG93KSByZXF1aXJlcyBs\nb2FkaW5nIGFkZGl0aW9uYWwKICAgICAgICAgICAgICAgIC8vIHRhYmxlczsg\naW4gdGhhdCBjYXNlIHdlIGRvbid0IHdhbnQgdG8gc3Bhd24gYWRkaXRpb25h\nbAogICAgICAgICAgICAgICAgLy8gY29ubmVjdGlvbnMKICAgICAgICAgICAg\nICAgIGlmIChfY29ubiA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAg\nX2Nvbm4gPSBfY29uZi5nZXREYXRhU291cmNlMihudWxsKS5nZXRDb25uZWN0\naW9uKCk7CiAgICAgICAgICAgICAgICAgICAgY2xvc2UgPSB0cnVlOwogICAg\nICAgICAgICAgICAgICAgIF9tZXRhID0gX2Nvbm4uZ2V0TWV0YURhdGEoKTsK\nICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoaXNUYWJs\nZSkgewogICAgICAgICAgICAgICAgICAgIC8vIGdlbmVyYXRlIHRoZSB0YWJs\nZSBmcm9tIGRhdGFiYXNlIG1ldGFkYXRhCiAgICAgICAgICAgICAgICAgICAg\nX2dlbi5nZW5lcmF0ZVRhYmxlcyhzY2hlbWFOYW1lLCBvYmplY3ROYW1lLCBf\nY29ubiwgX21ldGEpOwogICAgICAgICAgICAgICAgICAgIFRhYmxlIHRhYmxl\nID0gc3VwZXIuZmluZFRhYmxlKG5hbWUpOwoKICAgICAgICAgICAgICAgICAg\nICBpZiAodGFibGUgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAg\nICBpZiAoX3BrcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9nZW4u\nZ2VuZXJhdGVQcmltYXJ5S2V5cyh0YWJsZS5nZXRTY2hlbWFOYW1lKCksCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuZ2V0TmFtZSgp\nLCBfY29ubiwgX21ldGEpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAo\nX2luZGV4ZXMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZ2VuLmdl\nbmVyYXRlSW5kZXhlcyh0YWJsZS5nZXRTY2hlbWFOYW1lKCksCiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuZ2V0TmFtZSgpLCBfY29u\nbiwgX21ldGEpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2VuZXJh\ndGUgZm9yZWlnbiBrZXlzIGZyb20gdGhlIHRhYmxlOyB0aGlzIG1pZ2h0CiAg\nICAgICAgICAgICAgICAgICAgICAgIC8vIGVuZCB1cCByZS1jYWxsaW5nIHRo\naXMgZ2V0VGFibGUgbWV0aG9kIGlmIHRoZSBmb3JlaWduCiAgICAgICAgICAg\nICAgICAgICAgICAgIC8vIGtleSBsaW5rcyB0byBhIHRhYmxlIHRoYXQgaGFz\nbid0IGJlZW4gbG9hZGVkIHlldAogICAgICAgICAgICAgICAgICAgICAgICBp\nZiAoX2ZrcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9nZW4uZ2Vu\nZXJhdGVGb3JlaWduS2V5cyh0YWJsZS5nZXRTY2hlbWFOYW1lKCksCiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuZ2V0TmFtZSgpLCBf\nY29ubiwgX21ldGEpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAg\nICAgICAgIH0gZWxzZQogICAgICAgICAgICAgICAgICAgIF9nZW4uZ2VuZXJh\ndGVTZXF1ZW5jZXMoc2NoZW1hTmFtZSwgb2JqZWN0TmFtZSwgX2Nvbm4sCiAg\nICAgICAgICAgICAgICAgICAgICAgIF9tZXRhKTsKICAgICAgICAgICAgfSBj\nYXRjaCAoU1FMRXhjZXB0aW9uIHNlKSB7CiAgICAgICAgICAgICAgICB0aHJv\ndyBTUUxFeGNlcHRpb25zLmdldFN0b3JlKHNlLAogICAgICAgICAgICAgICAg\nICAgIF9jb25mLmdldERCRGljdGlvbmFyeUluc3RhbmNlKCkpOwogICAgICAg\nICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgaWYgKGNsb3NlKSB7\nCiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAg\nICAgICAgX2Nvbm4uY2xvc2UoKTsKICAgICAgICAgICAgICAgICAgICB9IGNh\ndGNoIChTUUxFeGNlcHRpb24gc2UpIHsKICAgICAgICAgICAgICAgICAgICB9\nCiAgICAgICAgICAgICAgICAgICAgX2Nvbm4gPSBudWxsOwogICAgICAgICAg\nICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHNldENvbmZpZ3VyYXRpb24oQ29uZmlndXJhdGlvbiBjb25m\nKSB7CiAgICAgICAgX2NvbmYgPSAoSkRCQ0NvbmZpZ3VyYXRpb24pIGNvbmY7\nCiAgICAgICAgX2dlbiA9IG5ldyBTY2hlbWFHZW5lcmF0b3IoX2NvbmYpOwog\nICAgICAgIF9nZW4uc2V0U2NoZW1hR3JvdXAodGhpcyk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgc3RhcnRDb25maWd1cmF0aW9uKCkgewogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIGVuZENvbmZpZ3VyYXRpb24oKSB7CiAgICB9Cn0K\n","encoding":"base64"}

