{"sha":"26caa6050e347d71e8cfcc5fb9c7577ecab2a390","node_id":"MDQ6QmxvYjIwNjM2NDoyNmNhYTYwNTBlMzQ3ZDcxZThjZmNjNWZiOWM3NTc3ZWNhYjJhMzkw","size":5147,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/26caa6050e347d71e8cfcc5fb9c7577ecab2a390","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNjaGVtYTsKCmltcG9ydCBqYXZhLnV0aWwuQXJyYXlM\naXN0OwppbXBvcnQgamF2YS51dGlsLkxpc3Q7CgppbXBvcnQgb3JnLmFwYWNo\nZS5jb21tb25zLmxhbmcuT2JqZWN0VXRpbHM7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLnV0aWwuSW52YWxpZFN0YXRlRXhjZXB0aW9uOwoKLyoqCiAq\nIENvbnN0cmFpbnQgb3ZlciBsb2NhbCB0YWJsZSBjb2x1bW5zLCBhcyBvcHBv\nc2VkIHRvIGEgZm9yZWlnbiBrZXkgd2hpY2gKICogc3BhbnMgdGFibGVzLiBD\nb2x1bW4gQVBJcyBjYW4gcmVwcmVzZW50IGEgZnVsbCBjb25zdHJhaW50IG9y\nIGEgcGFydGlhbAogKiBjb25zdHJhaW50LCBhbGlnbmluZyB3aXRoIHtAbGlu\nayBqYXZhLnNxbC5EYXRhYmFzZU1ldGFEYXRhfS4KICoKICogQGF1dGhvciBB\nYmUgV2hpdGUKICovCnB1YmxpYyBhYnN0cmFjdCBjbGFzcyBMb2NhbENvbnN0\ncmFpbnQKICAgIGV4dGVuZHMgQ29uc3RyYWludCB7CgogICAgcHJpdmF0ZSBz\ndGF0aWMgZmluYWwgTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6ZXIuZm9yUGFj\na2FnZQogICAgICAgIChMb2NhbENvbnN0cmFpbnQuY2xhc3MpOwoKICAgIHBy\naXZhdGUgTGlzdCBfY29sTGlzdCA9IG51bGw7CiAgICBwcml2YXRlIENvbHVt\nbltdIF9jb2xzID0gbnVsbDsKCiAgICAvKioKICAgICAqIERlZmF1bHQgY29u\nc3RydWN0b3IuCiAgICAgKi8KICAgIHB1YmxpYyBMb2NhbENvbnN0cmFpbnQo\nKSB7CiAgICB9CgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3Rvci4KICAgICAq\nCiAgICAgKiBAcGFyYW0gbmFtZSB0aGUgbmFtZSBvZiB0aGUgY29uc3RyYWlu\ndCwgaWYgYW55CiAgICAgKiBAcGFyYW0gdGFibGUgdGhlIHRhYmxlIG9mIHRo\nZSBjb25zdHJhaW50CiAgICAgKi8KICAgIHB1YmxpYyBMb2NhbENvbnN0cmFp\nbnQoU3RyaW5nIG5hbWUsIFRhYmxlIHRhYmxlKSB7CiAgICAgICAgc3VwZXIo\nbmFtZSwgdGFibGUpOwogICAgfQoKICAgIC8qKgogICAgICogQ2FsbGVkIHdo\nZW4gdGhlIGNvbnN0cmFpbnQgaXMgcmVtb3ZlZCBmcm9tIGl0cyB0YWJsZS4K\nICAgICAqLwogICAgdm9pZCByZW1vdmUoKSB7CiAgICAgICAgLy8gcmVtb3Zl\nIGFsbCBjb2x1bW5zCiAgICAgICAgc2V0Q29sdW1ucyhudWxsKTsKICAgICAg\nICBzdXBlci5yZW1vdmUoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVy\nbiBhbGwgdGhlIGNvbHVtbnMgdGhlIGNvbnN0cmFpbnQgc3BhbnMuCiAgICAg\nKi8KICAgIHB1YmxpYyBDb2x1bW5bXSBnZXRDb2x1bW5zKCkgewogICAgICAg\nIGlmIChfY29scyA9PSBudWxsKQogICAgICAgICAgICBfY29scyA9IChfY29s\nTGlzdCA9PSBudWxsKSA/IFNjaGVtYXMuRU1QVFlfQ09MVU1OUwogICAgICAg\nICAgICAgICAgOiAoQ29sdW1uW10pIF9jb2xMaXN0LnRvQXJyYXkobmV3IENv\nbHVtbltfY29sTGlzdC5zaXplKCldKTsKICAgICAgICByZXR1cm4gX2NvbHM7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQgdGhlIGNvbHVtbnMgdGhlIGNv\nbnN0cmFpbnQgc3BhbnMuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldENv\nbHVtbnMoQ29sdW1uW10gY29scykgewogICAgICAgIENvbHVtbltdIGN1ciA9\nIGdldENvbHVtbnMoKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGN1\nci5sZW5ndGg7IGkrKykKICAgICAgICAgICAgcmVtb3ZlQ29sdW1uKGN1cltp\nXSk7CgogICAgICAgIGlmIChjb2xzICE9IG51bGwpCiAgICAgICAgICAgIGZv\nciAoaW50IGkgPSAwOyBpIDwgY29scy5sZW5ndGg7IGkrKykKICAgICAgICAg\nICAgICAgIGFkZENvbHVtbihjb2xzW2ldKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIEFkZCBhIGNvbHVtbiB0byB0aGUgY29uc3RyYWludC4KICAgICAqLwog\nICAgcHVibGljIHZvaWQgYWRkQ29sdW1uKENvbHVtbiBjb2wpIHsKICAgICAg\nICBpZiAoY29sID09IG51bGwgfHwgIU9iamVjdFV0aWxzLmVxdWFscyhjb2wu\nZ2V0VGFibGUoKSwgZ2V0VGFibGUoKSkpCiAgICAgICAgICAgIHRocm93IG5l\ndyBJbnZhbGlkU3RhdGVFeGNlcHRpb24oX2xvYy5nZXQoInRhYmxlLW1pc21h\ndGNoIiwKICAgICAgICAgICAgICAgIGNvbCA9PSBudWxsID8gbnVsbCA6IGNv\nbC5nZXRUYWJsZSgpLAogICAgICAgICAgICAgICAgY29sID09IG51bGwgPyBu\ndWxsIDogZ2V0VGFibGUoKSkpOwoKICAgICAgICBpZiAoX2NvbExpc3QgPT0g\nbnVsbCkKICAgICAgICAgICAgX2NvbExpc3QgPSBuZXcgQXJyYXlMaXN0KDMp\nOwogICAgICAgIGVsc2UgaWYgKF9jb2xMaXN0LmNvbnRhaW5zKGNvbCkpCiAg\nICAgICAgICAgIHJldHVybjsKCiAgICAgICAgX2NvbExpc3QuYWRkKGNvbCk7\nCiAgICAgICAgX2NvbHMgPSBudWxsOwogICAgfQoKICAgIC8qKgogICAgICog\nUmVtb3ZlIGEgY29sdW1uIGZyb20gdGhlIGNvbnN0cmFpbnQuCiAgICAgKgog\nICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBjb2x1bW4gd2FzIHJlbW92ZWQs\nIGZhbHNlIGlmIG5vdCBwYXJ0IG9mIHRoZQogICAgICogcHJpbWFyeSBrZXkK\nICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gcmVtb3ZlQ29sdW1uKENvbHVt\nbiBjb2wpIHsKICAgICAgICBpZiAoY29sID09IG51bGwgfHwgX2NvbExpc3Qg\nPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIGlm\nIChfY29sTGlzdC5yZW1vdmUoY29sKSkgewogICAgICAgICAgICBfY29scyA9\nIG51bGw7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAg\nICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1\ncm4gdHJ1ZSBpZiB0aGUgcGsgaW5jbHVkZXMgdGhlIGdpdmVuIGNvbHVtbi4K\nICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gY29udGFpbnNDb2x1bW4oQ29s\ndW1uIGNvbCkgewogICAgICAgIGlmIChjb2wgPT0gbnVsbCB8fCBfY29sTGlz\ndCA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAg\ncmV0dXJuIF9jb2xMaXN0LmNvbnRhaW5zKGNvbCk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBSZWYgYWxsIGNvbHVtbnMgaW4gdGhpcyBjb25zdHJhaW50Lgog\nICAgICovCiAgICBwdWJsaWMgdm9pZCByZWZDb2x1bW5zKCkgewogICAgICAg\nIENvbHVtbltdIGNvbHMgPSBnZXRDb2x1bW5zKCk7CiAgICAgICAgZm9yIChp\nbnQgaSA9IDA7IGkgPCBjb2xzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICBj\nb2xzW2ldLnJlZigpOwogICAgfQoKICAgIC8qKgogICAgICogRGVyZWYgYWxs\nIGNvbHVtbnMgaW4gdGhpcyBjb25zdHJhaW50LgogICAgICovCiAgICBwdWJs\naWMgdm9pZCBkZXJlZkNvbHVtbnMoKSB7CiAgICAgICAgQ29sdW1uW10gY29s\ncyA9IGdldENvbHVtbnMoKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8\nIGNvbHMubGVuZ3RoOyBpKyspCiAgICAgICAgICAgIGNvbHNbaV0uZGVyZWYo\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0cnVlIGlmIHRoZSBn\naXZlbiBjb2x1bW5zIG1hdGNoIHRoZSBjb2x1bW5zIG9mIHRoaXMgY29uc3Ry\nYWludC4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gY29sdW1uc01hdGNo\nKENvbHVtbltdIG9jb2xzKSB7CiAgICAgICAgQ29sdW1uW10gY29scyA9IGdl\ndENvbHVtbnMoKTsKICAgICAgICBpZiAoY29scy5sZW5ndGggIT0gb2NvbHMu\nbGVuZ3RoKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgZm9y\nIChpbnQgaSA9IDA7IGkgPCBvY29scy5sZW5ndGg7IGkrKykKICAgICAgICAg\nICAgaWYgKCFoYXNDb2x1bW4oY29scywgb2NvbHNbaV0pKQogICAgICAgICAg\nICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIHJldHVybiB0cnVlOwogICAg\nfQoKICAgIC8qKgogICAgICogUmV0dXJuIHdoZXRoZXIgdGhlIGdpdmVuIGNv\nbHVtbiBleGlzdHMgaW4gdGhlIGFycmF5LgogICAgICovCiAgICBwcml2YXRl\nIHN0YXRpYyBib29sZWFuIGhhc0NvbHVtbihDb2x1bW5bXSBjb2xzLCBDb2x1\nbW4gY29sKSB7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb2xzLmxl\nbmd0aDsgaSsrKQogICAgICAgICAgICBpZiAoY29sc1tpXS5nZXRGdWxsTmFt\nZSgpLmVxdWFsc0lnbm9yZUNhc2UoY29sLmdldEZ1bGxOYW1lKCkpKQogICAg\nICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgcmV0dXJuIGZhbHNl\nOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRydWUgaWYgdGhlIGNv\nbHVtbnMgb2YgdGhpcyBjb25zdHJhaW50IG1hdGNoZXMgdGhhdCBvZgogICAg\nICogdGhlIGdpdmVuIG9uZS4gVGhlIGNvbnN0cmFpbnRzIGFyZSBub3QgY29t\ncGFyZWQgb24gbmFtZS4KICAgICAqLwogICAgcHJvdGVjdGVkIGJvb2xlYW4g\nZXF1YWxzTG9jYWxDb25zdHJhaW50KExvY2FsQ29uc3RyYWludCBsYykgewog\nICAgICAgIGlmIChsYyA9PSB0aGlzKQogICAgICAgICAgICByZXR1cm4gdHJ1\nZTsKICAgICAgICBpZiAobGMgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJu\nIGZhbHNlOwogICAgICAgIHJldHVybiBjb2x1bW5zTWF0Y2gobGMuZ2V0Q29s\ndW1ucygpKTsKICAgIH0KfQo=\n","encoding":"base64"}

