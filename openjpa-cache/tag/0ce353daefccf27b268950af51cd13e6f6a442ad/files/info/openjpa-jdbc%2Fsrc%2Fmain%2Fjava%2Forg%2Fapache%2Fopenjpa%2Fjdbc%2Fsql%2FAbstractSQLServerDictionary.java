{"sha":"941ded2b6acab3979401ee09b386611e620ad114","node_id":"MDQ6QmxvYjIwNjM2NDo5NDFkZWQyYjZhY2FiMzk3OTQwMWVlMDliMzg2NjExZTYyMGFkMTE0","size":5121,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/941ded2b6acab3979401ee09b386611e620ad114","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNxbDsKCmltcG9ydCBqYXZhLnNxbC5Db25uZWN0aW9u\nOwppbXBvcnQgamF2YS5zcWwuRGF0YWJhc2VNZXRhRGF0YTsKaW1wb3J0IGph\ndmEuc3FsLlByZXBhcmVkU3RhdGVtZW50OwppbXBvcnQgamF2YS5zcWwuU1FM\nRXhjZXB0aW9uOwppbXBvcnQgamF2YS5zcWwuVHlwZXM7CmltcG9ydCBqYXZh\nLnV0aWwuQXJyYXlzOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLmtlcm5lbC5leHBzLkZpbHRlclZhbHVlOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmpkYmMuc2NoZW1hLkNvbHVtbjsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNjaGVtYS5JbmRleDsKCi8qKgogKiBEaWN0aW9uYXJ5\nIGZvciB0aGUgU1FMIFNlcnZlciBkYXRhYmFzZXMgKFN5YmFzZSBhbmQgTVMg\nU1FMIFNlcnZlcikuCiAqLwpwdWJsaWMgYWJzdHJhY3QgY2xhc3MgQWJzdHJh\nY3RTUUxTZXJ2ZXJEaWN0aW9uYXJ5CiAgICBleHRlbmRzIERCRGljdGlvbmFy\neSB7CgogICAgcHVibGljIEFic3RyYWN0U1FMU2VydmVyRGljdGlvbmFyeSgp\nIHsKICAgICAgICByZXNlcnZlZFdvcmRTZXQuYWRkQWxsKEFycmF5cy5hc0xp\nc3QobmV3IFN0cmluZ1tdeyAiRklMRSIsICJJTkRFWCIgfSkpOwogICAgICAg\nIHN5c3RlbVRhYmxlU2V0LmFkZCgiRFRQUk9QRVJUSUVTIik7CiAgICAgICAg\ndmFsaWRhdGlvblNRTCA9ICJTRUxFQ1QgR0VUREFURSgpIjsKICAgICAgICBy\nYW5nZVBvc2l0aW9uID0gUkFOR0VfUE9TVF9ESVNUSU5DVDsKCiAgICAgICAg\nc3VwcG9ydHNEZWZlcnJlZENvbnN0cmFpbnRzID0gZmFsc2U7CiAgICAgICAg\nc3VwcG9ydHNTZWxlY3RFbmRJbmRleCA9IHRydWU7CiAgICAgICAgYWxsb3dz\nQWxpYXNJbkJ1bGtDbGF1c2UgPSBmYWxzZTsKCiAgICAgICAgc3VwcG9ydHNB\ndXRvQXNzaWduID0gdHJ1ZTsKICAgICAgICBhdXRvQXNzaWduQ2xhdXNlID0g\nIklERU5USVRZIjsKICAgICAgICBsYXN0R2VuZXJhdGVkS2V5UXVlcnkgPSAi\nU0VMRUNUIEBASURFTlRJVFkiOwoKICAgICAgICB0cmltTGVhZGluZ0Z1bmN0\naW9uID0gIkxUUklNKHswfSkiOwogICAgICAgIHRyaW1UcmFpbGluZ0Z1bmN0\naW9uID0gIlJUUklNKHswfSkiOwogICAgICAgIHRyaW1Cb3RoRnVuY3Rpb24g\nPSAiTFRSSU0oUlRSSU0oezB9KSkiOwogICAgICAgIGNvbmNhdGVuYXRlRnVu\nY3Rpb24gPSAiKHswfSt7MX0pIjsKICAgICAgICBzdXBwb3J0c01vZE9wZXJh\ndG9yID0gdHJ1ZTsKCiAgICAgICAgY3VycmVudERhdGVGdW5jdGlvbiA9ICJH\nRVREQVRFKCkiOwogICAgICAgIGN1cnJlbnRUaW1lRnVuY3Rpb24gPSAiR0VU\nREFURSgpIjsKICAgICAgICBjdXJyZW50VGltZXN0YW1wRnVuY3Rpb24gPSAi\nR0VUREFURSgpIjsKCiAgICAgICAgdXNlR2V0U3RyaW5nRm9yQ2xvYnMgPSB0\ncnVlOwogICAgICAgIHVzZVNldFN0cmluZ0ZvckNsb2JzID0gdHJ1ZTsKICAg\nICAgICB1c2VHZXRCeXRlc0ZvckJsb2JzID0gdHJ1ZTsKICAgICAgICB1c2VT\nZXRCeXRlc0ZvckJsb2JzID0gdHJ1ZTsKICAgICAgICBiaW5hcnlUeXBlTmFt\nZSA9ICJCSU5BUlkiOwogICAgICAgIGJsb2JUeXBlTmFtZSA9ICJJTUFHRSI7\nCiAgICAgICAgbG9uZ1ZhcmJpbmFyeVR5cGVOYW1lID0gIklNQUdFIjsKICAg\nICAgICBjbG9iVHlwZU5hbWUgPSAiVEVYVCI7CiAgICAgICAgbG9uZ1ZhcmNo\nYXJUeXBlTmFtZSA9ICJURVhUIjsKICAgICAgICBkYXRlVHlwZU5hbWUgPSAi\nREFURVRJTUUiOwogICAgICAgIHRpbWVUeXBlTmFtZSA9ICJEQVRFVElNRSI7\nCiAgICAgICAgdGltZXN0YW1wVHlwZU5hbWUgPSAiREFURVRJTUUiOwogICAg\nICAgIGZsb2F0VHlwZU5hbWUgPSAiRkxPQVQoMTYpIjsKICAgICAgICBkb3Vi\nbGVUeXBlTmFtZSA9ICJGTE9BVCgzMikiOwogICAgICAgIGludGVnZXJUeXBl\nTmFtZSA9ICJJTlQiOwogICAgICAgIGZpeGVkU2l6ZVR5cGVOYW1lU2V0LmFk\nZEFsbChBcnJheXMuYXNMaXN0KG5ldyBTdHJpbmdbXXsKICAgICAgICAgICAg\nIklNQUdFIiwgIlRFWFQiLCAiTlRFWFQiLCAiTU9ORVkiLCAiU01BTExNT05F\nWSIsICJJTlQiLAogICAgICAgICAgICAiRE9VQkxFIFBSRUNJU0lPTiIsICJE\nQVRFVElNRSIsICJTTUFMTERBVEVUSU1FIiwKICAgICAgICAgICAgIkVYVEVO\nREVEIFRZUEUiLCAiU1lTTkFNRSIsICJTUUxfVkFSSUFOVCIsICJJTkRFWCIs\nCiAgICAgICAgfSkpOwogICAgfQoKICAgIHB1YmxpYyBDb2x1bW5bXSBnZXRD\nb2x1bW5zKERhdGFiYXNlTWV0YURhdGEgbWV0YSwgU3RyaW5nIGNhdGFsb2cs\nCiAgICAgICAgU3RyaW5nIHNjaGVtYU5hbWUsIFN0cmluZyB0YWJsZU5hbWUs\nIFN0cmluZyBjb2xOYW1lLCBDb25uZWN0aW9uIGNvbm4pCiAgICAgICAgdGhy\nb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgQ29sdW1uW10gY29scyA9IHN1\ncGVyLmdldENvbHVtbnMobWV0YSwgY2F0YWxvZywgc2NoZW1hTmFtZSwgdGFi\nbGVOYW1lLAogICAgICAgICAgICBjb2xOYW1lLCBjb25uKTsKICAgICAgICBm\nb3IgKGludCBpID0gMDsgY29scyAhPSBudWxsICYmIGkgPCBjb2xzLmxlbmd0\naDsgaSsrKQogICAgICAgICAgICBpZiAoY29sc1tpXS5nZXRUeXBlKCkgPT0g\nVHlwZXMuTE9OR1ZBUkNIQVIpCiAgICAgICAgICAgICAgICBjb2xzW2ldLnNl\ndFR5cGUoVHlwZXMuQ0xPQik7CiAgICAgICAgcmV0dXJuIGNvbHM7CiAgICB9\nCgogICAgcHVibGljIFN0cmluZyBnZXRGdWxsTmFtZShJbmRleCBpZHgpIHsK\nICAgICAgICByZXR1cm4gZ2V0RnVsbE5hbWUoaWR4LmdldFRhYmxlKCksIGZh\nbHNlKSArICIuIiArIGlkeC5nZXROYW1lKCk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgc2V0TnVsbChQcmVwYXJlZFN0YXRlbWVudCBzdG1udCwgaW50IGlk\neCwgaW50IGNvbFR5cGUsCiAgICAgICAgQ29sdW1uIGNvbCkKICAgICAgICB0\naHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAvLyBTUUxTZXJ2ZXIgaGFz\nIHNvbWUgcHJvYmxlbXMgd2l0aCBzZXROdWxsIG9uIGxvYnMKICAgICAgICBp\nZiAoY29sVHlwZSA9PSBUeXBlcy5DTE9CKQogICAgICAgICAgICBzdG1udC5z\nZXRTdHJpbmcoaWR4LCBudWxsKTsKICAgICAgICBlbHNlIGlmIChjb2xUeXBl\nID09IFR5cGVzLkJMT0IpCiAgICAgICAgICAgIHN0bW50LnNldEJ5dGVzKGlk\neCwgbnVsbCk7CiAgICAgICAgZWxzZQogICAgICAgICAgICBzdXBlci5zZXRO\ndWxsKHN0bW50LCBpZHgsIGNvbFR5cGUsIGNvbCk7CiAgICB9CgogICAgcHJv\ndGVjdGVkIHZvaWQgYXBwZW5kU2VsZWN0UmFuZ2UoU1FMQnVmZmVyIGJ1Ziwg\nbG9uZyBzdGFydCwgbG9uZyBlbmQpIHsKICAgICAgICAvLyBjYW5ub3QgdXNl\nIGEgdmFsdWUgaGVyZSwgc2luY2UgU1FMU2VydmVyIGRvZXMgbm90IHN1cHBv\ncnQKICAgICAgICAvLyBib3VuZCBwYXJhbWV0ZXJzIGluIGEgIlRPUCIgY2xh\ndXNlCiAgICAgICAgYnVmLmFwcGVuZCgiIFRPUCAiKS5hcHBlbmQoTG9uZy50\nb1N0cmluZyhlbmQpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzdWJzdHJp\nbmcoU1FMQnVmZmVyIGJ1ZiwgRmlsdGVyVmFsdWUgc3RyLCBGaWx0ZXJWYWx1\nZSBzdGFydCwKICAgICAgICBGaWx0ZXJWYWx1ZSBlbmQpIHsKICAgICAgICBi\ndWYuYXBwZW5kKCJTVUJTVFJJTkcoIik7CiAgICAgICAgc3RyLmFwcGVuZFRv\nKGJ1Zik7CiAgICAgICAgYnVmLmFwcGVuZCgiLCAiKTsKICAgICAgICBzdGFy\ndC5hcHBlbmRUbyhidWYpOwogICAgICAgIGJ1Zi5hcHBlbmQoIiArIDEsICIp\nOwogICAgICAgIGlmIChlbmQgIT0gbnVsbCkgewogICAgICAgICAgICBidWYu\nYXBwZW5kKCIoIik7CiAgICAgICAgICAgIGVuZC5hcHBlbmRUbyhidWYpOwog\nICAgICAgICAgICBidWYuYXBwZW5kKCIpIik7CiAgICAgICAgfSBlbHNlIHsK\nICAgICAgICAgICAgYnVmLmFwcGVuZCgiTEVOKCIpOwogICAgICAgICAgICBz\ndHIuYXBwZW5kVG8oYnVmKTsKICAgICAgICAgICAgYnVmLmFwcGVuZCgiKSIp\nOwogICAgICAgIH0KICAgICAgICBidWYuYXBwZW5kKCIgLSAoIik7CiAgICAg\nICAgc3RhcnQuYXBwZW5kVG8oYnVmKTsKICAgICAgICBidWYuYXBwZW5kKCIp\nKSIpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGluZGV4T2YoU1FMQnVmZmVy\nIGJ1ZiwgRmlsdGVyVmFsdWUgc3RyLCBGaWx0ZXJWYWx1ZSBmaW5kLAogICAg\nICAgIEZpbHRlclZhbHVlIHN0YXJ0KSB7CiAgICAgICAgYnVmLmFwcGVuZCgi\nKENIQVJJTkRFWCgiKTsKICAgICAgICBmaW5kLmFwcGVuZFRvKGJ1Zik7CiAg\nICAgICAgYnVmLmFwcGVuZCgiLCAiKTsKICAgICAgICBpZiAoc3RhcnQgIT0g\nbnVsbCkKICAgICAgICAgICAgc3Vic3RyaW5nKGJ1Ziwgc3RyLCBzdGFydCwg\nbnVsbCk7CiAgICAgICAgZWxzZQogICAgICAgICAgICBzdHIuYXBwZW5kVG8o\nYnVmKTsKICAgICAgICBidWYuYXBwZW5kKCIpIC0gMSIpOwogICAgICAgIGlm\nIChzdGFydCAhPSBudWxsKSB7CiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoIiAr\nICIpOwogICAgICAgICAgICBzdGFydC5hcHBlbmRUbyhidWYpOwogICAgICAg\nIH0KICAgICAgICBidWYuYXBwZW5kKCIpIik7CiAgICB9Cn0K\n","encoding":"base64"}

