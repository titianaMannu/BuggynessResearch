{"sha":"622cbf49ca94c75e555e1a528a2d45e416985c6b","node_id":"MDQ6QmxvYjIwNjM2NDo2MjJjYmY0OWNhOTRjNzVlNTU1ZTFhNTI4YTJkNDVlNDE2OTg1YzZi","size":6664,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/622cbf49ca94c75e555e1a528a2d45e416985c6b","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNxbDsKCmltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0\nYXRlbWVudDsKaW1wb3J0IGphdmEuc3FsLlNRTEV4Y2VwdGlvbjsKaW1wb3J0\nIGphdmEudXRpbC5BcnJheXM7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMua2VybmVsLkpEQkNGZXRjaENvbmZpZ3VyYXRpb247CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuQ29sdW1uOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLlRhYmxlOwoKLyoqCiAq\nIERpY3Rpb25hcnkgZm9yIEVtcHJlc3MgdXNpbmcgT0RCQyBzZXJ2ZXIgY29t\nYmluZWQgd2l0aCB0aGVpcgogKiB0eXBlIDIgZHJpdmVyLiBUaGlzIGRpY3Rp\nb25hcnkgbWF5IGlzc3VlcyB3aXRoIG90aGVyCiAqIGRyaXZlci90b3BvbG9n\neSBjb25maWd1cmF0aW9ucy4KICogIEVtcHJlc3MgZG9lcyBub3QgYWxsb3cg\nbXVsdGlwbGUgY29ubmVjdGlvbnMgdG8gcmVhZCByb3dzCiAqIHJlYWQgaW4g\nYSB0cmFuc2FjdGlvbiwgZWZmZWN0aXZlbHkgZm9yY2luZyBwZXNzaW1pc3Rp\nYyB0cmFuc2FjdGlvbnMKICogcmVnYXJkbGVzcyBvZiB0aGUgT3B0aW1pc3Rp\nYyBzZXR0aW5nLiBUbyBhbGxvdyB1c2VycyB0byB1c2UKICogb3B0aW1pc3Rp\nYyB0cmFuc2FjdGlvbnMgaW4gYSBtdWx0aS1jb25uZWN0aW9uIGV2aXJvbm1l\nbnQsIHlvdQogKiBtdXN0IHNldCB0aGUgQWxsb3dDb25jdXJyZW50UmVhZCBz\nZXR0aW5nIHRvIHRydWUgaW4gYWRkaXRpb24KICogdG8gc3RhbmRhcmQgb3B0\naW9ucy4KICogIEVtcHJlc3MgaGFzIHRoZSBmb2xsb3dpbmcgYWRkaXRpb25h\nbCBsaW1pdGF0aW9uczoKICogPHVsPgogKiA8bGk+Rm9yZWlnbiBrZXlzIGFy\nZSBxdWl0ZSBsaW1pdGVkIGluIEVtcHJlc3MgYW5kIGl0IGlzIHJlY29tbWVu\nZGVkCiAqIHRoYXQgdGhlc2UgYmUgY3JlYXRlZCBieSBoYW5kLjwvbGk+CiAq\nIDxsaT5CYXRjaGluZyBjYW4gYmUgdW5yZWxpYWJsZS4gVXNpbmcgQmF0Y2hM\naW1pdD0wIGlzIHN0cm9uZ2x5CiAqIHJlY29tbWVuZGVkLjwvbGk+CiAqIDxs\naT5Vc2luZyBBbGxvd0NvbmN1cnJlbnRSZWFkIHNob3VsZCBiZSBhY2NvbXBh\nbmllZCBieQogKiBTaW11bGF0ZUxvY2tpbmc9dHJ1ZTwvbGk+CiAqIDxsaT5D\nb25uZWN0aW9ucyBzaG91bGQgYmUgcm9sbGVkIGJhY2sgb24gcmV0dXJuIHRv\nIGVuc3VyZSBsb2NrcwogKiBhcmUgcmVsZWFzZWQgKHNlZSBPcGVuSlBBIGRl\nZmF1bHQgRGF0YVNvdXJjZSBkb2N1bWVudGF0aW9uLjwvbGk+CiAqIDxsaT5D\nZXJ0YWluIG91dGVyIGpvaW5zIHJlcXVpcmluZyBwYXJhbWV0ZXJzIGluIGEg\nc3Vic2VsZWN0IGlzIG5vdAogKiBzdXBwb3J0ZWQgYnkgRW1wcmVzcyBhbmQg\nbWF5IHVuZGVyIGNlcnRhaW4gY29uZmlndXJhdGlvbnMgY2F1c2UKICogc2l6\nZSAoKSBjYWxscyBvbiBxdWVyeSByZXN1bHRzIGFuZCBMUlMgZmllbGRzIHRv\nIHRocm93IGFuIGV4Y2VwdGlvbi48L2xpPgogKiA8bGk+Q2VydGFpbiBhZ2dy\nZWdhdGUgZnVuY3Rpb25zIGFyZSBub3Qgc3VwcG9ydGVkLjwvbGk+CiAqIDwv\ndWw+CiAqLwpwdWJsaWMgY2xhc3MgRW1wcmVzc0RpY3Rpb25hcnkKICAgIGV4\ndGVuZHMgREJEaWN0aW9uYXJ5IHsKCiAgICAvKioKICAgICAqIFRoaXMgc2V0\ndGluZyBpbnNlcnRzICJCWVBBU1MiIGFmdGVyIGV2ZXJ5ICJTRUxFQ1QiLiBU\naGlzCiAgICAgKiBhbGxvd3MgZm9yIG11bHRpcGxlIHRyYW5zYWN0aW9uYWwg\ncmVhZHMgb2YgdGhlIHNhbWUgcm93CiAgICAgKiBmcm9tIGRpZmZlcmVudCBj\nb25uZWN0aW9ucyBhdCB0aGUgZXhwZW5zZSBvZiBsb3NzIG9mCiAgICAgKiBw\nZXNzaW1pc3RpYyBsb2NraW5nLiBEZWZhdWx0cyB0byBmYWxzZS4KICAgICAq\nLwogICAgcHVibGljIGJvb2xlYW4gYWxsb3dDb25jdXJyZW50UmVhZCA9IGZh\nbHNlOwoKICAgIHB1YmxpYyBFbXByZXNzRGljdGlvbmFyeSgpIHsKICAgICAg\nICBwbGF0Zm9ybSA9ICJFbXByZXNzIjsKCiAgICAgICAgdmFsaWRhdGlvblNR\nTCA9ICJTRUxFQ1QgRElTVElOQ1QgdG9kYXkgRlJPTSBzeXNfdGFibGVzIjsK\nICAgICAgICBqb2luU3ludGF4ID0gU1lOVEFYX1RSQURJVElPTkFMOwogICAg\nICAgIHRvVXBwZXJDYXNlRnVuY3Rpb24gPSAiVE9VUFBFUih7MH0pIjsKICAg\nICAgICB0b0xvd2VyQ2FzZUZ1bmN0aW9uID0gIlRPTE9XRVIoezB9KSI7Cgog\nICAgICAgIHN1cHBvcnRzRGVmZXJyZWRDb25zdHJhaW50cyA9IGZhbHNlOwog\nICAgICAgIHJlcXVpcmVzQWxpYXNGb3JTdWJzZWxlY3QgPSB0cnVlOwogICAg\nICAgIG1heFRhYmxlTmFtZUxlbmd0aCA9IDI4OwogICAgICAgIG1heENvbHVt\nbk5hbWVMZW5ndGggPSAyODsKICAgICAgICBtYXhJbmRleE5hbWVMZW5ndGgg\nPSAyODsKICAgICAgICBtYXhDb25zdHJhaW50TmFtZUxlbmd0aCA9IDI4Owog\nICAgICAgIHNjaGVtYUNhc2UgPSBTQ0hFTUFfQ0FTRV9QUkVTRVJWRTsKCiAg\nICAgICAgdXNlR2V0Qnl0ZXNGb3JCbG9icyA9IHRydWU7CiAgICAgICAgdXNl\nU2V0Qnl0ZXNGb3JCbG9icyA9IHRydWU7CiAgICAgICAgdXNlR2V0U3RyaW5n\nRm9yQ2xvYnMgPSB0cnVlOwogICAgICAgIHVzZVNldFN0cmluZ0ZvckNsb2Jz\nID0gdHJ1ZTsKCiAgICAgICAgY2xvYlR5cGVOYW1lID0gIlRFWFQiOwogICAg\nICAgIGJsb2JUeXBlTmFtZSA9ICJCVUxLIjsKICAgICAgICByZWFsVHlwZU5h\nbWUgPSAiRkxPQVQoOCkiOwogICAgICAgIGJpZ2ludFR5cGVOYW1lID0gIkRF\nQ0lNQUwoMzgpIjsKICAgICAgICB0aW1lc3RhbXBUeXBlTmFtZSA9ICJEQVRF\nIjsKICAgICAgICB2YXJjaGFyVHlwZU5hbWUgPSAiQ0hBUkFDVEVSIjsKICAg\nICAgICB0aW55aW50VHlwZU5hbWUgPSAiRE9VQkxFIFBSRUNJU0lPTiI7CiAg\nICAgICAgZG91YmxlVHlwZU5hbWUgPSAiU01BTExJTlQiOwogICAgICAgIGJp\ndFR5cGVOYW1lID0gIlNNQUxMSU5UIjsKCiAgICAgICAgZml4ZWRTaXplVHlw\nZU5hbWVTZXQuYWRkQWxsKEFycmF5cy5hc0xpc3QobmV3IFN0cmluZ1tdewog\nICAgICAgICAgICAiVEVYVCIsICJCVUxLIiwgIkxPTkdGTE9BVCIsICJJTlRF\nR0VSNjQiLCAiU0hPUlRJTlRFR0VSIiwKICAgICAgICAgICAgIkxPTkdJTlRF\nR0VSIiwKICAgICAgICB9KSk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4g\naXNTeXN0ZW1JbmRleChTdHJpbmcgbmFtZSwgVGFibGUgdGFibGUpIHsKICAg\nICAgICByZXR1cm4gbmFtZS50b1VwcGVyQ2FzZSgpLnN0YXJ0c1dpdGgoIlNZ\nU18iKTsKICAgIH0KCiAgICBwdWJsaWMgU1FMQnVmZmVyIHRvU2VsZWN0KFNR\nTEJ1ZmZlciBzZWxlY3RzLCBKREJDRmV0Y2hDb25maWd1cmF0aW9uIGZldGNo\nLAogICAgICAgIFNRTEJ1ZmZlciBmcm9tLCBTUUxCdWZmZXIgd2hlcmUsIFNR\nTEJ1ZmZlciBncm91cCwKICAgICAgICBTUUxCdWZmZXIgaGF2aW5nLCBTUUxC\ndWZmZXIgb3JkZXIsCiAgICAgICAgYm9vbGVhbiBkaXN0aW5jdCwgYm9vbGVh\nbiBmb3JVcGRhdGUsIGxvbmcgc3RhcnRJZHgsIGxvbmcgZW5kSWR4KSB7CiAg\nICAgICAgaWYgKCFhbGxvd0NvbmN1cnJlbnRSZWFkKQogICAgICAgICAgICBy\nZXR1cm4gc3VwZXIudG9TZWxlY3Qoc2VsZWN0cywgZmV0Y2gsIGZyb20sIHdo\nZXJlLCBncm91cCwKICAgICAgICAgICAgICAgIGhhdmluZywgb3JkZXIsIGRp\nc3RpbmN0LCBmb3JVcGRhdGUsIHN0YXJ0SWR4LCBlbmRJZHgpOwoKICAgICAg\nICAvLyBvdmVycmlkZSB0byBhbGxvdyBhICJCWVBBU1MiIHRvIGJlIGluc2Vy\ndGVkIHBvc3QtInNlbGVjdCIKICAgICAgICAvLyBkZXBlbmRpbmcgb24gYWxs\nb3dDb25jdXJyZW50UmVhZCBzZXR0aW5nCiAgICAgICAgU1FMQnVmZmVyIGJ1\nZiA9IG5ldyBTUUxCdWZmZXIodGhpcyk7CiAgICAgICAgYnVmLmFwcGVuZCgi\nU0VMRUNUIEJZUEFTUyAiKTsKICAgICAgICBpZiAoZGlzdGluY3QpCiAgICAg\nICAgICAgIGJ1Zi5hcHBlbmQoIkRJU1RJTkNUICIpOwogICAgICAgIGJ1Zi5h\ncHBlbmQoc2VsZWN0cykuYXBwZW5kKCIgRlJPTSAiKS5hcHBlbmQoZnJvbSk7\nCgogICAgICAgIGlmICh3aGVyZSAhPSBudWxsICYmICF3aGVyZS5pc0VtcHR5\nKCkpCiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoIiBXSEVSRSAiKS5hcHBlbmQo\nd2hlcmUpOwogICAgICAgIGlmIChncm91cCAhPSBudWxsICYmICFncm91cC5p\nc0VtcHR5KCkpCiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoIiBHUk9VUCBCWSAi\nKS5hcHBlbmQoZ3JvdXApOwogICAgICAgIGlmIChoYXZpbmcgIT0gbnVsbCAm\nJiAhaGF2aW5nLmlzRW1wdHkoKSkKICAgICAgICAgICAgYnVmLmFwcGVuZCgi\nIEhBVklORyAiKS5hcHBlbmQoaGF2aW5nKTsKICAgICAgICBpZiAob3JkZXIg\nIT0gbnVsbCAmJiAhb3JkZXIuaXNFbXB0eSgpKQogICAgICAgICAgICBidWYu\nYXBwZW5kKCIgT1JERVIgQlkgIikuYXBwZW5kKG9yZGVyKTsKICAgICAgICBy\nZXR1cm4gYnVmOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmdbXSBnZXREcm9w\nQ29sdW1uU1FMKENvbHVtbiBjb2x1bW4pIHsKICAgICAgICAvLyBlbXByZXNz\nIHdhbnRzIGRyb3BwZWQgY29sdW1ucyBpbiB0aGUgZm9ybTogQUxURVIgVEFC\nTEUgZm9vCiAgICAgICAgLy8gREVMRVRFIGNvbHVtblRvRHJvcAogICAgICAg\nIHJldHVybiBuZXcgU3RyaW5nW117ICJBTFRFUiBUQUJMRSAiCiAgICAgICAg\nICAgICsgZ2V0RnVsbE5hbWUoY29sdW1uLmdldFRhYmxlKCksIGZhbHNlKSAr\nICIgREVMRVRFICIgKyBjb2x1bW4gfTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBzZXRGbG9hdChQcmVwYXJlZFN0YXRlbWVudCBzdG1udCwgaW50IGlkeCwg\nZmxvYXQgdmFsLAogICAgICAgIENvbHVtbiBjb2wpCiAgICAgICAgdGhyb3dz\nIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgLy8gZW1wcmVzcyBzZWVtcyB0byBh\nbGxvdyBJTkZJTklUWSB0byBiZSBzdG9yZWQsIGJ1dCBub3QgcmV0cmlldmVk\nLAogICAgICAgIC8vIHdoaWNoIGNhbiBwcm92ZSB0byBiZSBkaWZmaWN1bHQg\ndG8gaGFuZGxlCiAgICAgICAgaWYgKHZhbCA9PSBGbG9hdC5QT1NJVElWRV9J\nTkZJTklUWSkgewogICAgICAgICAgICB2YWwgPSBGbG9hdC5NQVhfVkFMVUU7\nCiAgICAgICAgICAgIHN0b3JhZ2VXYXJuaW5nKG5ldyBGbG9hdChGbG9hdC5Q\nT1NJVElWRV9JTkZJTklUWSksCiAgICAgICAgICAgICAgICBuZXcgRmxvYXQo\ndmFsKSk7CiAgICAgICAgfSBlbHNlIGlmICh2YWwgPT0gRmxvYXQuTkVHQVRJ\nVkVfSU5GSU5JVFkpIHsKICAgICAgICAgICAgdmFsID0gRmxvYXQuTUlOX1ZB\nTFVFICsgMTsKICAgICAgICAgICAgc3RvcmFnZVdhcm5pbmcobmV3IEZsb2F0\nKEZsb2F0Lk5FR0FUSVZFX0lORklOSVRZKSwKICAgICAgICAgICAgICAgIG5l\ndyBGbG9hdCh2YWwpKTsKICAgICAgICB9CiAgICAgICAgc3VwZXIuc2V0Rmxv\nYXQoc3RtbnQsIGlkeCwgdmFsLCBjb2wpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHNldERvdWJsZShQcmVwYXJlZFN0YXRlbWVudCBzdG1udCwgaW50IGlk\neCwgZG91YmxlIHZhbCwKICAgICAgICBDb2x1bW4gY29sKQogICAgICAgIHRo\ncm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIC8vIGVtcHJlc3Mgc2VlbXMg\ndG8gYWxsb3cgSU5GSU5JVFkgdG8gYmUgc3RvcmVkLCBidXQgbm90IHJldHJp\nZXZlZCwKICAgICAgICAvLyB3aGljaCBjYW4gcHJvdmUgdG8gYmUgZGlmZmlj\ndWx0IHRvIGhhbmRsZQogICAgICAgIGlmICh2YWwgPT0gRG91YmxlLlBPU0lU\nSVZFX0lORklOSVRZKSB7CiAgICAgICAgICAgIHZhbCA9IERvdWJsZS5NQVhf\nVkFMVUU7CiAgICAgICAgICAgIHN0b3JhZ2VXYXJuaW5nKG5ldyBEb3VibGUo\nRG91YmxlLlBPU0lUSVZFX0lORklOSVRZKSwKICAgICAgICAgICAgICAgIG5l\ndyBEb3VibGUodmFsKSk7CiAgICAgICAgfSBlbHNlIGlmICh2YWwgPT0gRG91\nYmxlLk5FR0FUSVZFX0lORklOSVRZKSB7CiAgICAgICAgICAgIHZhbCA9IERv\ndWJsZS5NSU5fVkFMVUUgKyAxOwogICAgICAgICAgICBzdG9yYWdlV2Fybmlu\nZyhuZXcgRG91YmxlKERvdWJsZS5ORUdBVElWRV9JTkZJTklUWSksCiAgICAg\nICAgICAgICAgICBuZXcgRG91YmxlKHZhbCkpOwogICAgICAgIH0KICAgICAg\nICBzdXBlci5zZXREb3VibGUoc3RtbnQsIGlkeCwgdmFsLCBjb2wpOwogICAg\nfQp9Cg==\n","encoding":"base64"}

