{"sha":"50d4f23ee7bc1657fc13a8af66f2ddbae3b3271c","node_id":"MDQ6QmxvYjIwNjM2NDo1MGQ0ZjIzZWU3YmMxNjU3ZmMxM2E4YWY2NmYyZGRiYWUzYjMyNzFj","size":5661,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/50d4f23ee7bc1657fc13a8af66f2ddbae3b3271c","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNxbDsKCmltcG9ydCBqYXZhLnNxbC5Db25uZWN0aW9u\nOwppbXBvcnQgamF2YS5zcWwuRGF0YWJhc2VNZXRhRGF0YTsKaW1wb3J0IGph\ndmEuc3FsLlByZXBhcmVkU3RhdGVtZW50OwppbXBvcnQgamF2YS5zcWwuUmVz\ndWx0U2V0OwppbXBvcnQgamF2YS5zcWwuU1FMRXhjZXB0aW9uOwppbXBvcnQg\namF2YS5zcWwuVHlwZXM7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpk\nYmMuc2NoZW1hLkNvbHVtbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5q\nZGJjLnNjaGVtYS5JbmRleDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5q\nZGJjLnNjaGVtYS5QcmltYXJ5S2V5OwoKLyoqCiAqIERpY3Rpb25hcnkgZm9y\nIFZpc3VhbCBGb3hQcm8gdmlhIERhdGFEaXJlY3QgU2VxdWVMaW5rCiAqIGFu\nZCBEYXRhRGlyZWN0IE9EQkMgRm94UHJvIGRyaXZlci4gVGhpcyB3aWxsIG5v\ndAogKiB3b3JrIHdpdGggYW55IG90aGVyIGNvbWJpbmF0aW9uIG9mIEpEQkMv\nT0RCQyBzZXJ2ZXIgYW5kIE9EQkMgZHJpdmVyLgogKiAgRm94UHJvIGhhcyB0\naGUgZm9sbG93aW5nIGxpbWl0YXRpb25zOgogKiA8dWw+CiAqIDxsaT5Qcmlt\nYXJ5IEtleXMgYW5kIGluZGV4ZXMgY2Fubm90IGJlIGNyZWF0ZWQgdmlhIEpE\nQkM8L2xpPgogKiA8bGk+T25seSBoYXMgZml4ZWQtbGVuZ3RoIGNoYXIgZmll\nbGRzOiBhbGwgc3RyaW5ncyBtdXN0IGJlCiAqIHRyaW1tZWQgaW4gcmVzdWx0\nIHNldHM8L2xpPgogKiA8bGk+RG9lcyBub3QgaGF2ZSBzdWZmaWNpZW50IHN1\ncHBvcnQgZm9yIGZvcmVpZ24ga2V5czwvbGk+CiAqIDxsaT5PREJDIGRyaXZl\nciBjYW5ub3QgaGFuZGxlIGNlcnRhaW4gQWdncmVnYXRlIGZ1bmN0aW9ucy48\nL2xpPgogKiA8bGk+TG9ja2luZyBpcyBleHRyZW1lbGV5IHVucmVsaWFibGUu\nIE11bHRpcGxlIGNsaWVudHMKICogYWNjZXNzaW5nIHNpbmdsZSBkYXRhc3Rv\ncmUgbWF5IHJlc3VsdCBpbiBjb25jdXJyZW5jeQogKiBkYXRhIHZhbGlkaXR5\nIGVycm9ycy48L2xpPgogKiA8L3VsPgogKi8KcHVibGljIGNsYXNzIEZveFBy\nb0RpY3Rpb25hcnkKICAgIGV4dGVuZHMgREJEaWN0aW9uYXJ5IHsKCiAgICBw\ndWJsaWMgRm94UHJvRGljdGlvbmFyeSgpIHsKICAgICAgICBwbGF0Zm9ybSA9\nICJWaXN1YWwgRm94UHJvIjsKICAgICAgICBqb2luU3ludGF4ID0gU1lOVEFY\nX1RSQURJVElPTkFMOwoKICAgICAgICBzdXBwb3J0c0ZvcmVpZ25LZXlzID0g\nZmFsc2U7CiAgICAgICAgc3VwcG9ydHNEZWZlcnJlZENvbnN0cmFpbnRzID0g\nZmFsc2U7CiAgICAgICAgbWF4VGFibGVOYW1lTGVuZ3RoID0gMzA7CiAgICAg\nICAgbWF4Q29sdW1uTmFtZUxlbmd0aCA9IDMwOwogICAgICAgIG1heEluZGV4\nTmFtZUxlbmd0aCA9IDg7CiAgICAgICAgbWF4Q29uc3RyYWludE5hbWVMZW5n\ndGggPSA4OwoKICAgICAgICBiaW5hcnlUeXBlTmFtZSA9ICJHRU5FUkFMIjsK\nICAgICAgICBibG9iVHlwZU5hbWUgPSAiR0VORVJBTCI7CiAgICAgICAgbG9u\nZ1ZhcmJpbmFyeVR5cGVOYW1lID0gIkdFTkVSQUwiOwogICAgICAgIGNsb2JU\neXBlTmFtZSA9ICJNRU1PIjsKICAgICAgICBsb25nVmFyY2hhclR5cGVOYW1l\nID0gIk1FTU8iOwogICAgICAgIGRhdGVUeXBlTmFtZSA9ICJUSU1FU1RBTVAi\nOwogICAgICAgIHRpbWVUeXBlTmFtZSA9ICJUSU1FU1RBTVAiOwogICAgICAg\nIHZhcmNoYXJUeXBlTmFtZSA9ICJDSEFSQUNURVJ7MH0iOwogICAgICAgIGJp\nZ2ludFR5cGVOYW1lID0gIkRPVUJMRSI7CiAgICAgICAgbnVtZXJpY1R5cGVO\nYW1lID0gIklOVEVHRVIiOwogICAgICAgIHNtYWxsaW50VHlwZU5hbWUgPSAi\nSU5URUdFUiI7CiAgICAgICAgYml0VHlwZU5hbWUgPSAiTlVNRVJJQygxKSI7\nCiAgICAgICAgaW50ZWdlclR5cGVOYW1lID0gIklOVEVHRVIiOwogICAgICAg\nIHRpbnlpbnRUeXBlTmFtZSA9ICJJTlRFR0VSIjsKICAgICAgICBkZWNpbWFs\nVHlwZU5hbWUgPSAiRE9VQkxFIjsKICAgICAgICBkb3VibGVUeXBlTmFtZSA9\nICJET1VCTEUiOwogICAgICAgIHJlYWxUeXBlTmFtZSA9ICJET1VCTEUiOwog\nICAgICAgIGZsb2F0VHlwZU5hbWUgPSAiTlVNRVJJQygxOSwxNikiOwoKICAg\nICAgICAvLyB0aGUgbWF4IGNoYXJhY3RlciBsaXRlcmFsIGxlbmd0aCBpcyBh\nY3R1YWxseSAyNTQsIGJ1dCBmb3IgcHJpbWFyeQogICAgICAgIC8vIGtleXMs\nIGl0IGlzIDI0MDsgZGVmYXVsdCB0byB0aGF0IGxlbmd0aCBzbyB1c2VycyBj\nYW4gYWRkIFBLcyBsYXRlcgogICAgICAgIGNoYXJhY3RlckNvbHVtblNpemUg\nPSAyNDA7CiAgICB9CgogICAgcHVibGljIFN0cmluZyBnZXRTdHJpbmcoUmVz\ndWx0U2V0IHJzLCBpbnQgY29sdW1uKQogICAgICAgIHRocm93cyBTUUxFeGNl\ncHRpb24gewogICAgICAgIC8vIGZveHBybyBkb2Vzbid0IGF1dG8tdHJ1bmNh\ndGUgdmFsdWVzLgogICAgICAgIFN0cmluZyBzdHIgPSBycy5nZXRTdHJpbmco\nY29sdW1uKTsKICAgICAgICBpZiAoc3RyICE9IG51bGwpCiAgICAgICAgICAg\nIHN0ciA9IHN0ci50cmltKCk7CiAgICAgICAgcmV0dXJuIHN0cjsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBzZXROdWxsKFByZXBhcmVkU3RhdGVtZW50IHN0\nbW50LCBpbnQgaWR4LCBpbnQgY29sVHlwZSwKICAgICAgICBDb2x1bW4gY29s\nKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIC8vIGVu\nc3VyZSB0aGF0IGJsb2IvY2xvYiBpcyBoYW5kbGVkIHdpdGggc2FmZSBtZXRo\nb2RzLgogICAgICAgIHN3aXRjaCAoY29sVHlwZSkgewogICAgICAgICAgICBj\nYXNlIFR5cGVzLkJMT0I6CiAgICAgICAgICAgICAgICBzdG1udC5zZXRCeXRl\ncyhpZHgsIG51bGwpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAg\nICAgIGNhc2UgVHlwZXMuQ0xPQjoKICAgICAgICAgICAgICAgIHN0bW50LnNl\ndFN0cmluZyhpZHgsIG51bGwpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAg\nICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICBzdXBlci5zZXRO\ndWxsKHN0bW50LCBpZHgsIGNvbFR5cGUsIGNvbCk7CiAgICAgICAgfQogICAg\nfQoKICAgIHByb3RlY3RlZCBTdHJpbmcgYXBwZW5kU2l6ZShDb2x1bW4gY29s\nLCBTdHJpbmcgdHlwZU5hbWUpIHsKICAgICAgICAvLyBmb3hwcm8gZG9lcyBu\nb3QgbGlrZSB1bnNpemVkIGNvbHVtbiBkZWNsYXJhdGlvbnMuCiAgICAgICAg\naWYgKGNvbC5nZXRTaXplKCkgPT0gMCkgewogICAgICAgICAgICBpZiAoIkNI\nQVJBQ1RFUiIuZXF1YWxzKHR5cGVOYW1lKSkKICAgICAgICAgICAgICAgIGNv\nbC5zZXRTaXplKDI0MCk7CiAgICAgICAgICAgIGVsc2UgaWYgKCJOVU1FUklD\nIi5lcXVhbHModHlwZU5hbWUpKQogICAgICAgICAgICAgICAgY29sLnNldFNp\nemUoMTkpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gc3VwZXIuYXBwZW5k\nU2l6ZShjb2wsIHR5cGVOYW1lKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgU3Ry\naW5nIGdldFByaW1hcnlLZXlDb25zdHJhaW50U1FMKFByaW1hcnlLZXkgcGsp\nIHsKICAgICAgICAvLyB0aGlzIGZveHBybyBkcml2ZXIgY29tYmluYXRpb24g\nZG9lcyBub3Qgc3VwcG9ydCBwcmltYXJ5IGtleXMKICAgICAgICByZXR1cm4g\nbnVsbDsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nW10gZ2V0Q3JlYXRlSW5k\nZXhTUUwoSW5kZXggaW5kZXgpIHsKICAgICAgICAvLyBmb3hwcm8gSkRCQyBh\nY2Nlc3MgZG9lcyBub3QgYWxsb3cgdGhlIGNyZWF0aW9uIG9mIGluZGV4ZXMK\nICAgICAgICByZXR1cm4gbmV3IFN0cmluZ1swXTsKICAgIH0KCiAgICBwdWJs\naWMgQ29sdW1uW10gZ2V0Q29sdW1ucyhEYXRhYmFzZU1ldGFEYXRhIG1ldGEs\nIFN0cmluZyBjYXRhbG9nLAogICAgICAgIFN0cmluZyBzY2hlbWFOYW1lLCBT\ndHJpbmcgdGFibGVOYW1lLCBTdHJpbmcgY29sdW1uTmFtZSwgQ29ubmVjdGlv\nbiBjb25uKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAg\nIHRyeSB7CiAgICAgICAgICAgIENvbHVtbltdIGNvbHMgPSBzdXBlci5nZXRD\nb2x1bW5zKG1ldGEsIGNhdGFsb2csIHNjaGVtYU5hbWUsCiAgICAgICAgICAg\nICAgICB0YWJsZU5hbWUsIGNvbHVtbk5hbWUsIGNvbm4pOwogICAgICAgICAg\nICBmb3IgKGludCBpID0gMDsgY29scyAhPSBudWxsICYmIGkgPCBjb2xzLmxl\nbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAvLyBmb3hwcm8gcmV0dXJu\ncyBhbiBvZGQgdHlwZSAiMTEiIGNvZGUgZm9yIERBVEVUSU1FIGZpZWxkcwog\nICAgICAgICAgICAgICAgaWYgKGNvbHNbaV0uZ2V0VHlwZSgpID09IDExKQog\nICAgICAgICAgICAgICAgICAgIGNvbHNbaV0uc2V0VHlwZShUeXBlcy5USU1F\nU1RBTVApOwogICAgICAgICAgICAgICAgICAgIC8vIE1FTU8gbWFwcyB0byBM\nT05HVkFSQ0hBUiBkdXJpbmcgcmV2ZXJzZSBhbmFseXNpcwogICAgICAgICAg\nICAgICAgZWxzZSBpZiAoIk1FTU8iLmVxdWFscyhjb2xzW2ldLmdldFR5cGVO\nYW1lKCkpKQogICAgICAgICAgICAgICAgICAgIGNvbHNbaV0uc2V0VHlwZShU\neXBlcy5DTE9CKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4g\nY29sczsKICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gc2UpIHsKICAg\nICAgICAgICAgLy8gZm94cHJvIHRocm93cyBhbiBleGNlcHRpb24gaWYgdGhl\nIHRhYmxlIHNwZWNpZmllZCBpbiB0aGUKICAgICAgICAgICAgLy8gY29sdW1u\nIGxpc3QgaXMgbm90IGZvdW5kCiAgICAgICAgICAgIGlmIChzZS5nZXRFcnJv\nckNvZGUoKSA9PSA1NjIpCiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsK\nICAgICAgICAgICAgdGhyb3cgc2U7CiAgICAgICAgfQogICAgfQoKICAgIHB1\nYmxpYyBQcmltYXJ5S2V5W10gZ2V0UHJpbWFyeUtleXMoRGF0YWJhc2VNZXRh\nRGF0YSBtZXRhLCBTdHJpbmcgY2F0YWxvZywKICAgICAgICBTdHJpbmcgc2No\nZW1hTmFtZSwgU3RyaW5nIHRhYmxlTmFtZSwgQ29ubmVjdGlvbiBjb25uKQog\nICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIC8vIHRoaXMg\nY29tYmluYXRpb24gZG9lcyBub3QgcmVsaWFibHkgcmV0dXJuIFBLIGluZm9y\nbWF0aW9uCiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9Cn0K\n","encoding":"base64"}

