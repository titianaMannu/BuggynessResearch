{"sha":"d4e17e26debe8cb20fb6786de4b2677fd5311015","node_id":"MDQ6QmxvYjIwNjM2NDpkNGUxN2UyNmRlYmU4Y2IyMGZiNjc4NmRlNGIyNjc3ZmQ1MzExMDE1","size":9010,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/d4e17e26debe8cb20fb6786de4b2677fd5311015","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNxbDsKCmltcG9ydCBqYXZhLnNxbC5Db25uZWN0aW9u\nOwppbXBvcnQgamF2YS5zcWwuRGF0YWJhc2VNZXRhRGF0YTsKaW1wb3J0IGph\ndmEuc3FsLlByZXBhcmVkU3RhdGVtZW50OwppbXBvcnQgamF2YS5zcWwuUmVz\ndWx0U2V0OwppbXBvcnQgamF2YS5zcWwuU1FMRXhjZXB0aW9uOwppbXBvcnQg\namF2YS5zcWwuU3RhdGVtZW50OwppbXBvcnQgamF2YS5zcWwuVHlwZXM7Cmlt\ncG9ydCBqYXZhLnV0aWwuQXJyYXlzOwppbXBvcnQgamF2YS51dGlsLkNvbGxl\nY3Rpb247CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1h\nLkNvbHVtbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVt\nYS5Gb3JlaWduS2V5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMu\nc2NoZW1hLkluZGV4OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMu\nc2NoZW1hLlByaW1hcnlLZXk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5zY2hlbWEuVGFibGU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nbGliLnV0aWwuUmVmZXJlbmNlSGFzaFNldDsKCi8qKgogKiBEaWN0aW9uYXJ5\nIGZvciBJbmZvcm1peCBkYXRhYmFzZS4gTm90YWJsZSBmZWF0dXJlczoKICog\nPHVsPgogKiA8bGk+SW5mb3JtaXggZG9lcyBub3QgYWxsb3cgcGVzc2ltaXN0\naWMgbG9ja2luZyBvbiBzY3JvbGxhYmxlIHJlc3VsdAogKiBzZXRzLjwvbGk+\nCiAqIDxsaT5TRVQgTE9DSyBNT0RFIFRPIFdBSVQgTiBzdGF0ZW1lbnRzIGFy\nZSBpc3N1ZWQgdG8gd2FpdCBvbiBsb2Nrcy4gU2VlCiAqIHtAbGluayAjbG9j\na1dhaXRTZWNvbmRzfSBhbmQge0BsaW5rICNsb2NrTW9kZUVuYWJsZWR9Ljwv\nbGk+CiAqIDxsaT5MT0NLIE1PREUgUk9XIGlzIHVzZWQgYnkgZGVmYXVsdCBm\nb3IgdGFibGUgY3JlYXRpb24gdG8gYWxsb3cgdGhlCiAqIG1heGltdW0gY29u\nY3VycmVuY3kuPC9saT4KICogPC91bD4KICovCnB1YmxpYyBjbGFzcyBJbmZv\ncm1peERpY3Rpb25hcnkKICAgIGV4dGVuZHMgREJEaWN0aW9uYXJ5IHsKCiAg\nICAvKioKICAgICAqIElmIHRydWUsIHRoZW4gd2Ugd2lsbCBpc3N1ZSBhICJT\nRVQgTE9DSyBNT0RFIFRPIFdBSVQgTiIKICAgICAqIHN0YXRlbWVudCB3aGVu\nZXZlciB3ZSBjcmVhdGUgYSB7QGxpbmsgQ29ubmVjdGlvbn0sIGluIG9yZGVy\nCiAgICAgKiBhbGxvdyB3YWl0aW5nIG9uIGxvY2tzLgogICAgICovCiAgICBw\ndWJsaWMgYm9vbGVhbiBsb2NrTW9kZUVuYWJsZWQgPSBmYWxzZTsKCiAgICAv\nKioKICAgICAqIElmIHtAbGluayAjbG9ja01vZGVFbmFibGVkfSBpcyA8Y29k\nZT50cnVlPC9jb2RlPiwgdGhlbiB0aGlzCiAgICAgKiBwYXJhbWV0ZXIgc3Bl\nY2lmaWVzIHRoZSBudW1iZXIgb2Ygc2Vjb25kcyB3ZSB3aWxsIHdhaXQgdG8K\nICAgICAqIG9idGFpbiBhIGxvY2sgZm9yIGluc2VydHMgYW5kIHBlc3NpbWlz\ndGljIGxvY2tpbmcuCiAgICAgKi8KICAgIHB1YmxpYyBpbnQgbG9ja1dhaXRT\nZWNvbmRzID0gMzA7CgogICAgLyoqCiAgICAgKiBJbmZvcm1peCBKREJDIG1l\ndGFkYXRhIGZvciBhbGwga25vd24gZHJpdmVycyByZXR1cm5zIHdpdGggdGhl\nCiAgICAgKiB0YWJsZSBjYXRhbG9nIGFuZCB0aGUgdGFibGUgc2NoZW1hIG5h\nbWUgc3dhcHBlZC4gQSA8Y29kZT50cnVlPC9jb2RlPgogICAgICogdmFsdWUg\nZm9yIHRoaXMgcHJvcGVydHkgaW5kaWNhdGVzIHRoYXQgdGhleSBzaG91bGQg\nYmUgcmV2ZXJzZWQuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIHN3YXBT\nY2hlbWFBbmRDYXRhbG9nID0gdHJ1ZTsKCiAgICAvLyB3ZWFrIHNldCBvZiBj\nb25uZWN0aW9ucyB3ZSd2ZSBhbHJlYWR5IGV4ZWN1dGVkIGxvY2sgbW9kZSBz\ncWwgb24KICAgIHByaXZhdGUgZmluYWwgQ29sbGVjdGlvbiBfc2VlbkNvbm5l\nY3Rpb25zID0gbmV3IFJlZmVyZW5jZUhhc2hTZXQKICAgICAgICAoUmVmZXJl\nbmNlSGFzaFNldC5XRUFLKTsKCiAgICBwdWJsaWMgSW5mb3JtaXhEaWN0aW9u\nYXJ5KCkgewogICAgICAgIHBsYXRmb3JtID0gIkluZm9ybWl4IjsKICAgICAg\nICB2YWxpZGF0aW9uU1FMID0gIlNFTEVDVCBGSVJTVCAxIENVUlJFTlQgVElN\nRVNUQU1QICIKICAgICAgICAgICAgKyAiRlJPTSBpbmZvcm1peC5zeXN0YWJs\nZXMiOwoKICAgICAgICBzdXBwb3J0c0F1dG9Bc3NpZ24gPSB0cnVlOwogICAg\nICAgIGF1dG9Bc3NpZ25UeXBlTmFtZSA9ICJzZXJpYWwiOwogICAgICAgIGxh\nc3RHZW5lcmF0ZWRLZXlRdWVyeSA9ICJTRUxFQ1QgRklSU1QgMSBEQklORk8o\nJ3NxbGNhLnNxbGVycmQxJykgIgogICAgICAgICAgICArICJGUk9NIGluZm9y\nbWl4LnN5c3RhYmxlcyI7CgogICAgICAgIC8vIGluZm9ybWl4IGFjdHVhbGx5\nIGRvZXMgc3VwcG9ydCBkZWZlcnJlZCBjb25zdHJhaW50cywgYnV0IG5vdAog\nICAgICAgIC8vIGluIHRoZSB0YWJsZSBkZWZpbml0aW9uOyBkZWZlcnJlZCBj\nb25zdHJhaW50cyBjYW4gYmUgYWN0aXZhdGVkIGJ5CiAgICAgICAgLy8gaW52\nb2tpbmcgInNldCBjb25zdHJhaW50cyBhbGwgZGVmZXJyZWQiIG9uIHRoZSBj\nb25uZWN0aW9uLCB3aGljaAogICAgICAgIC8vIHdlIGRvbid0IGRvIHlldAog\nICAgICAgIHN1cHBvcnRzRGVmZXJyZWRDb25zdHJhaW50cyA9IGZhbHNlOwog\nICAgICAgIGNvbnN0cmFpbnROYW1lTW9kZSA9IENPTlNfTkFNRV9BRlRFUjsK\nCiAgICAgICAgbWF4VGFibGVOYW1lTGVuZ3RoID0gMTg7CiAgICAgICAgbWF4\nQ29sdW1uTmFtZUxlbmd0aCA9IDE4OwogICAgICAgIG1heEluZGV4TmFtZUxl\nbmd0aCA9IDE4OwogICAgICAgIG1heENvbnN0cmFpbnROYW1lTGVuZ3RoID0g\nMTg7CgogICAgICAgIC8vIEluZm9ybWl4IHVzZXMgYSBub24tc3RhbmRhcmQg\nIjoiIHRvIHNlcGFyYXRlIHNjaGVtYSBhbmQgdGFibGUgbmFtZXMKICAgICAg\nICBjYXRhbG9nU2VwYXJhdG9yID0gIjoiOwoKICAgICAgICAvLyBpbmZvcm1p\neCBzdXBwb3J0cyAiQ0xPQiIgdHlwZSwgYnV0IGFueSBhdHRlbXB0IHRvIGlu\nc2VydAogICAgICAgIC8vIGludG8gdGhlbSByYWlzZXM6ICJqYXZhLnNxbC5T\nUUxFeGNlcHRpb246IENhbid0IGNvbnZlcnQgZnJvbW51bGwiCiAgICAgICAg\ndXNlR2V0U3RyaW5nRm9yQ2xvYnMgPSB0cnVlOwogICAgICAgIGxvbmdWYXJj\naGFyVHlwZU5hbWUgPSAiVEVYVCI7CiAgICAgICAgY2xvYlR5cGVOYW1lID0g\nIlRFWFQiOwogICAgICAgIHNtYWxsaW50VHlwZU5hbWUgPSAiSU5UOCI7CiAg\nICAgICAgdGlueWludFR5cGVOYW1lID0gIklOVDgiOwogICAgICAgIGZsb2F0\nVHlwZU5hbWUgPSAiRkxPQVQiOwogICAgICAgIGJpdFR5cGVOYW1lID0gIkJP\nT0xFQU4iOwogICAgICAgIGJsb2JUeXBlTmFtZSA9ICJCWVRFIjsKICAgICAg\nICBkb3VibGVUeXBlTmFtZSA9ICJOVU1FUklDKDMyLDIwKSI7CiAgICAgICAg\nZGF0ZVR5cGVOYW1lID0gIkRBVEUiOwogICAgICAgIHRpbWVzdGFtcFR5cGVO\nYW1lID0gIkRBVEUiOwogICAgICAgIGRvdWJsZVR5cGVOYW1lID0gIk5VTUVS\nSUMoMzIsMjApIjsKICAgICAgICBmbG9hdFR5cGVOYW1lID0gIlJFQUwiOwog\nICAgICAgIGJpZ2ludFR5cGVOYW1lID0gIk5VTUVSSUMoMzIsMCkiOwogICAg\nICAgIGRvdWJsZVR5cGVOYW1lID0gIkRPVUJMRSBQUkVDSVNJT04iOwogICAg\nICAgIGZpeGVkU2l6ZVR5cGVOYW1lU2V0LmFkZEFsbChBcnJheXMuYXNMaXN0\nKG5ldyBTdHJpbmdbXXsKICAgICAgICAgICAgIkJZVEUiLCAiRE9VQkxFIFBS\nRUNJU0lPTiIsICJJTlRFUlZBTCIsICJTTUFMTEZMT0FUIiwgIlRFWFQiLAog\nICAgICAgICAgICAiSU5UOCIsCiAgICAgICAgfSkpOwoKICAgICAgICBzdXBw\nb3J0c1F1ZXJ5VGltZW91dCA9IGZhbHNlOwogICAgICAgIHN1cHBvcnRzTXVs\ndGlwbGVOb250cmFuc2FjdGlvbmFsUmVzdWx0U2V0cyA9IGZhbHNlOwogICAg\nICAgIHN1cHBvcnRzTG9ja2luZ1dpdGhEaXN0aW5jdENsYXVzZSA9IGZhbHNl\nOwogICAgICAgIHN1cHBvcnRzTG9ja2luZ1dpdGhNdWx0aXBsZVRhYmxlcyA9\nIGZhbHNlOwogICAgICAgIHN1cHBvcnRzTG9ja2luZ1dpdGhPcmRlckNsYXVz\nZSA9IGZhbHNlOwoKICAgICAgICAvLyB0aGUgaW5mb3JtaXggSkRCQyBkcml2\nZXJzIGhhdmUgcHJvYmxlbXMgd2l0aCB1c2luZyB0aGUKICAgICAgICAvLyBz\nY2hlbWEgbmFtZSBpbiByZWZsZWN0aW9uIG9uIGNvbHVtbnMgYW5kIHRhYmxl\ncwogICAgICAgIHN1cHBvcnRzU2NoZW1hRm9yR2V0Q29sdW1ucyA9IGZhbHNl\nOwogICAgICAgIHN1cHBvcnRzU2NoZW1hRm9yR2V0VGFibGVzID0gZmFsc2U7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgY29ubmVjdGVkQ29uZmlndXJhdGlv\nbihDb25uZWN0aW9uIGNvbm4pCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlv\nbiB7CiAgICAgICAgc3VwZXIuY29ubmVjdGVkQ29uZmlndXJhdGlvbihjb25u\nKTsKICAgICAgICBpZiAoZHJpdmVyVmVuZG9yID09IG51bGwpIHsKICAgICAg\nICAgICAgRGF0YWJhc2VNZXRhRGF0YSBtZXRhID0gY29ubi5nZXRNZXRhRGF0\nYSgpOwogICAgICAgICAgICBpZiAoIkluZm9ybWl4Ii5lcXVhbHNJZ25vcmVD\nYXNlKG1ldGEuZ2V0RHJpdmVyTmFtZSgpKSkKICAgICAgICAgICAgICAgIGRy\naXZlclZlbmRvciA9IFZFTkRPUl9EQVRBRElSRUNUOwogICAgICAgICAgICBl\nbHNlCiAgICAgICAgICAgICAgICBkcml2ZXJWZW5kb3IgPSBWRU5ET1JfT1RI\nRVI7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBDb2x1bW5bXSBnZXRD\nb2x1bW5zKERhdGFiYXNlTWV0YURhdGEgbWV0YSwgU3RyaW5nIGNhdGFsb2cs\nCiAgICAgICAgU3RyaW5nIHNjaGVtYU5hbWUsIFN0cmluZyB0YWJsZU5hbWUs\nIFN0cmluZyBjb2x1bW5OYW1lLCBDb25uZWN0aW9uIGNvbm4pCiAgICAgICAg\ndGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgQ29sdW1uW10gY29scyA9\nIHN1cGVyLmdldENvbHVtbnMobWV0YSwgY2F0YWxvZywgc2NoZW1hTmFtZSwg\ndGFibGVOYW1lLAogICAgICAgICAgICBjb2x1bW5OYW1lLCBjb25uKTsKCiAg\nICAgICAgLy8gdHJlYXQgbG9ndmFyY2hhciBhcyBjbG9iCiAgICAgICAgZm9y\nIChpbnQgaSA9IDA7IGNvbHMgIT0gbnVsbCAmJiBpIDwgY29scy5sZW5ndGg7\nIGkrKykKICAgICAgICAgICAgaWYgKGNvbHNbaV0uZ2V0VHlwZSgpID09IFR5\ncGVzLkxPTkdWQVJDSEFSKQogICAgICAgICAgICAgICAgY29sc1tpXS5zZXRU\neXBlKFR5cGVzLkNMT0IpOwogICAgICAgIHJldHVybiBjb2xzOwogICAgfQoK\nICAgIHB1YmxpYyBDb2x1bW4gbmV3Q29sdW1uKFJlc3VsdFNldCBjb2xNZXRh\nKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIENvbHVt\nbiBjb2wgPSBzdXBlci5uZXdDb2x1bW4oY29sTWV0YSk7CiAgICAgICAgaWYg\nKHN3YXBTY2hlbWFBbmRDYXRhbG9nKQogICAgICAgICAgICBjb2wuc2V0U2No\nZW1hTmFtZShjb2xNZXRhLmdldFN0cmluZygiVEFCTEVfQ0FUIikpOwogICAg\nICAgIHJldHVybiBjb2w7CiAgICB9CgogICAgcHVibGljIFByaW1hcnlLZXkg\nbmV3UHJpbWFyeUtleShSZXN1bHRTZXQgcGtNZXRhKQogICAgICAgIHRocm93\ncyBTUUxFeGNlcHRpb24gewogICAgICAgIFByaW1hcnlLZXkgcGsgPSBzdXBl\nci5uZXdQcmltYXJ5S2V5KHBrTWV0YSk7CiAgICAgICAgaWYgKHN3YXBTY2hl\nbWFBbmRDYXRhbG9nKQogICAgICAgICAgICBway5zZXRTY2hlbWFOYW1lKHBr\nTWV0YS5nZXRTdHJpbmcoIlRBQkxFX0NBVCIpKTsKICAgICAgICByZXR1cm4g\ncGs7CiAgICB9CgogICAgcHVibGljIEluZGV4IG5ld0luZGV4KFJlc3VsdFNl\ndCBpZHhNZXRhKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAg\nICAgIEluZGV4IGlkeCA9IHN1cGVyLm5ld0luZGV4KGlkeE1ldGEpOwogICAg\nICAgIGlmIChzd2FwU2NoZW1hQW5kQ2F0YWxvZykKICAgICAgICAgICAgaWR4\nLnNldFNjaGVtYU5hbWUoaWR4TWV0YS5nZXRTdHJpbmcoIlRBQkxFX0NBVCIp\nKTsKICAgICAgICByZXR1cm4gaWR4OwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHNldEJvb2xlYW4oUHJlcGFyZWRTdGF0ZW1lbnQgc3RtbnQsIGludCBpZHgs\nIGJvb2xlYW4gdmFsLAogICAgICAgIENvbHVtbiBjb2wpCiAgICAgICAgdGhy\nb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgLy8gaW5mb3JtaXggYWN0dWFs\nbHkgcmVxdWlyZXMgdGhhdCBhIGJvb2xlYW4gYmUgc2V0OiBpdCBjYW5ub3QK\nICAgICAgICAvLyBoYW5kbGUgYSBudW1lcmljIGFyZ3VtZW50CiAgICAgICAg\nc3RtbnQuc2V0Qm9vbGVhbihpZHgsIHZhbCk7CiAgICB9CgogICAgcHVibGlj\nIFN0cmluZ1tdIGdldENyZWF0ZVRhYmxlU1FMKFRhYmxlIHRhYmxlKSB7CiAg\nICAgICAgU3RyaW5nW10gY3JlYXRlID0gc3VwZXIuZ2V0Q3JlYXRlVGFibGVT\nUUwodGFibGUpOwogICAgICAgIGNyZWF0ZVswXSA9IGNyZWF0ZVswXSArICIg\nTE9DSyBNT0RFIFJPVyI7CiAgICAgICAgcmV0dXJuIGNyZWF0ZTsKICAgIH0K\nCiAgICBwdWJsaWMgU3RyaW5nW10gZ2V0QWRkUHJpbWFyeUtleVNRTChQcmlt\nYXJ5S2V5IHBrKSB7CiAgICAgICAgU3RyaW5nIHBrc3FsID0gZ2V0UHJpbWFy\neUtleUNvbnN0cmFpbnRTUUwocGspOwogICAgICAgIGlmIChwa3NxbCA9PSBu\ndWxsKQogICAgICAgICAgICByZXR1cm4gbmV3IFN0cmluZ1swXTsKICAgICAg\nICByZXR1cm4gbmV3IFN0cmluZ1tdeyAiQUxURVIgVEFCTEUgIgogICAgICAg\nICAgICArIGdldEZ1bGxOYW1lKHBrLmdldFRhYmxlKCksIGZhbHNlKSArICIg\nQUREIENPTlNUUkFJTlQgIiArIHBrc3FsIH07CiAgICB9CgogICAgcHVibGlj\nIFN0cmluZ1tdIGdldEFkZEZvcmVpZ25LZXlTUUwoRm9yZWlnbktleSBmaykg\newogICAgICAgIFN0cmluZyBma3NxbCA9IGdldEZvcmVpZ25LZXlDb25zdHJh\naW50U1FMKGZrKTsKICAgICAgICBpZiAoZmtzcWwgPT0gbnVsbCkKICAgICAg\nICAgICAgcmV0dXJuIG5ldyBTdHJpbmdbMF07CiAgICAgICAgcmV0dXJuIG5l\ndyBTdHJpbmdbXXsgIkFMVEVSIFRBQkxFICIKICAgICAgICAgICAgKyBnZXRG\ndWxsTmFtZShmay5nZXRUYWJsZSgpLCBmYWxzZSkgKyAiIEFERCBDT05TVFJB\nSU5UICIgKyBma3NxbCB9OwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIHN1\ncHBvcnRzUmFuZG9tQWNjZXNzUmVzdWx0U2V0KFNlbGVjdCBzZWwsCiAgICAg\nICAgYm9vbGVhbiBmb3JVcGRhdGUpIHsKICAgICAgICByZXR1cm4gIWZvclVw\nZGF0ZSAmJiAhc2VsLmlzTG9iKCkKICAgICAgICAgICAgJiYgc3VwZXIuc3Vw\ncG9ydHNSYW5kb21BY2Nlc3NSZXN1bHRTZXQoc2VsLCBmb3JVcGRhdGUpOwog\nICAgfQoKICAgIHB1YmxpYyBDb25uZWN0aW9uIGRlY29yYXRlKENvbm5lY3Rp\nb24gY29ubikKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAg\nICBjb25uID0gc3VwZXIuZGVjb3JhdGUoY29ubik7CgogICAgICAgIC8vIGlm\nIHdlIGhhdmVuJ3QgYWxyZWFkeSBkb25lIHNvLCBpbml0aWFsaXplIHRoZSBs\nb2NrIG1vZGUgb2YgdGhlCiAgICAgICAgLy8gY29ubmVjdGlvbgogICAgICAg\nIGlmIChsb2NrTW9kZUVuYWJsZWQgJiYgX3NlZW5Db25uZWN0aW9ucy5hZGQo\nY29ubikpIHsKICAgICAgICAgICAgU3RyaW5nIHNxbCA9ICJTRVQgTE9DSyBN\nT0RFIFRPIFdBSVQiOwogICAgICAgICAgICBpZiAobG9ja1dhaXRTZWNvbmRz\nID4gMCkKICAgICAgICAgICAgICAgIHNxbCA9IHNxbCArICIgIiArIGxvY2tX\nYWl0U2Vjb25kczsKCiAgICAgICAgICAgIFN0YXRlbWVudCBzdG1udCA9IG51\nbGw7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBzdG1udCA9\nIGNvbm4uY3JlYXRlU3RhdGVtZW50KCk7CiAgICAgICAgICAgICAgICBzdG1u\ndC5leGVjdXRlVXBkYXRlKHNxbCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKFNR\nTEV4Y2VwdGlvbiBzZSkgewogICAgICAgICAgICAgICAgdGhyb3cgU1FMRXhj\nZXB0aW9ucy5nZXRTdG9yZShzZSwgdGhpcyk7CiAgICAgICAgICAgIH0gZmlu\nYWxseSB7CiAgICAgICAgICAgICAgICBpZiAoc3RtbnQgIT0gbnVsbCkKICAg\nICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAg\nICBzdG1udC5jbG9zZSgpOwogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2gg\nKFNRTEV4Y2VwdGlvbiBzZSkgewogICAgICAgICAgICAgICAgICAgIH0KICAg\nICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gdGhlIGRhdGFkaXJl\nY3QgZHJpdmVyIHJlcXVpcmVzIHRoYXQgd2UgaXNzdWUgYSByb2xsYmFjayBi\nZWZvcmUgdXNpbmcKICAgICAgICAvLyBlYWNoIGNvbm5lY3Rpb24KICAgICAg\nICBpZiAoVkVORE9SX0RBVEFESVJFQ1QuZXF1YWxzSWdub3JlQ2FzZShkcml2\nZXJWZW5kb3IpKQogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAg\nY29ubi5yb2xsYmFjaygpOwogICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNl\ncHRpb24gc2UpIHsKICAgICAgICAgICAgfQogICAgICAgIHJldHVybiBjb25u\nOwogICAgfQp9Cg==\n","encoding":"base64"}

