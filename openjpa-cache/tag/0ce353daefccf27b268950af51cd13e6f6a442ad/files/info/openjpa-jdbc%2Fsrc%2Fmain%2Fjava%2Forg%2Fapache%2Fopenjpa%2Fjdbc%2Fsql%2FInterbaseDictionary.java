{"sha":"5c4b544d46cf8c7f190450cf13f53b2ef70cb874","node_id":"MDQ6QmxvYjIwNjM2NDo1YzRiNTQ0ZDQ2Y2Y4YzdmMTkwNDUwY2YxM2Y1M2IyZWY3MGNiODc0","size":4274,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/5c4b544d46cf8c7f190450cf13f53b2ef70cb874","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNxbDsKCmltcG9ydCBqYXZhLnNxbC5UeXBlczsKCmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuZXhwcy5GaWx0\nZXJWYWx1ZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVt\nYS5Db2x1bW47CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hl\nbWEuSW5kZXg7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwu\nTG9jYWxpemVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuU3Rv\ncmVFeGNlcHRpb247CgovKioKICogRGljdGlvbmFyeSBmb3IgQm9ybGFuZCBJ\nbnRlcmJhc2UuCiAqLwpwdWJsaWMgY2xhc3MgSW50ZXJiYXNlRGljdGlvbmFy\neQogICAgZXh0ZW5kcyBEQkRpY3Rpb25hcnkgewoKICAgIHByaXZhdGUgc3Rh\ndGljIGZpbmFsIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVyLmZvclBhY2th\nZ2UKICAgICAgICAoSW50ZXJiYXNlRGljdGlvbmFyeS5jbGFzcyk7CgogICAg\ncHVibGljIEludGVyYmFzZURpY3Rpb25hcnkoKSB7CiAgICAgICAgcGxhdGZv\ncm0gPSAiQm9ybGFuZCBJbnRlcmJhc2UiOwogICAgICAgIHZhbGlkYXRpb25T\nUUwgPSAiU0VMRUNUIDEgRlJPTSBSREIkREFUQUJBU0UiOwogICAgICAgIHN1\ncHBvcnRzRGVmZXJyZWRDb25zdHJhaW50cyA9IGZhbHNlOwoKICAgICAgICB1\nc2VHZXRTdHJpbmdGb3JDbG9icyA9IHRydWU7CiAgICAgICAgdXNlU2V0U3Ry\naW5nRm9yQ2xvYnMgPSB0cnVlOwogICAgICAgIHVzZUdldEJ5dGVzRm9yQmxv\nYnMgPSB0cnVlOwogICAgICAgIHVzZVNldEJ5dGVzRm9yQmxvYnMgPSB0cnVl\nOwoKICAgICAgICAvLyB0aGUgSkRCQyBkcml2ZXIgY2xhaW1zIDMxLCBidXQg\ndGhhdCBjYXVzZXMgZXhjZXB0aW9ucwogICAgICAgIG1heFRhYmxlTmFtZUxl\nbmd0aCA9IDMwOwoKICAgICAgICBiaWdpbnRUeXBlTmFtZSA9ICJOVU1FUklD\nKDE4LDApIjsKICAgICAgICBpbnRlZ2VyVHlwZU5hbWUgPSAiSU5URUdFUiI7\nCiAgICAgICAgZG91YmxlVHlwZU5hbWUgPSAiRE9VQkxFIFBSRUNJU0lPTiI7\nCiAgICAgICAgY2hhclR5cGVOYW1lID0gIkNIQVIoMSkiOwogICAgICAgIGJs\nb2JUeXBlTmFtZSA9ICJCTE9CIjsKICAgICAgICBjbG9iVHlwZU5hbWUgPSAi\nQkxPQiBTVUJfVFlQRSAxIjsKICAgICAgICBiaXRUeXBlTmFtZSA9ICJTTUFM\nTElOVCI7CiAgICAgICAgc21hbGxpbnRUeXBlTmFtZSA9ICJTTUFMTElOVCI7\nCiAgICAgICAgdGlueWludFR5cGVOYW1lID0gIlNNQUxMSU5UIjsKCiAgICAg\nICAgLy8gbm8gc3VwcG9ydCBmb3IgbG93ZXItY2FzaW5nIG9yIGZpbmRpbmcg\ndGhlIGxlbmd0aCBvZiBzdHJpbmdzCiAgICAgICAgLy8gKGFsdGhvdWdoIGl0\nIGNhbiBiZSBhZGRlZCB0byB0aGUgZGF0YWJhc2U7IHNlZQogICAgICAgIC8v\nIGh0dHA6Ly9iZG4uYm9ybGFuZC5jb20vYXJ0aWNsZS8wLDE0MTAsMjc1NjMs\nMDAuaHRtbCApCiAgICAgICAgdG9Mb3dlckNhc2VGdW5jdGlvbiA9IG51bGw7\nCiAgICAgICAgc3RyaW5nTGVuZ3RoRnVuY3Rpb24gPSBudWxsOwogICAgfQoK\nICAgIHByb3RlY3RlZCBTdHJpbmcgZ2V0VGFibGVOYW1lRm9yTWV0YWRhdGEo\nU3RyaW5nIHRhYmxlTmFtZSkgewogICAgICAgIHJldHVybiAodGFibGVOYW1l\nID09IG51bGwpID8gIiUiCiAgICAgICAgICAgIDogc3VwZXIuZ2V0VGFibGVO\nYW1lRm9yTWV0YWRhdGEodGFibGVOYW1lKTsKICAgIH0KCiAgICBwcm90ZWN0\nZWQgU3RyaW5nIGdldENvbHVtbk5hbWVGb3JNZXRhZGF0YShTdHJpbmcgY29s\ndW1uTmFtZSkgewogICAgICAgIHJldHVybiAoY29sdW1uTmFtZSA9PSBudWxs\nKSA/ICIlIgogICAgICAgICAgICA6IHN1cGVyLmdldENvbHVtbk5hbWVGb3JN\nZXRhZGF0YShjb2x1bW5OYW1lKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgU3Ry\naW5nIGFwcGVuZFNpemUoQ29sdW1uIGNvbCwgU3RyaW5nIHR5cGVOYW1lKSB7\nCiAgICAgICAgaWYgKGNvbC5pc1ByaW1hcnlLZXkoKSAmJiBjb2wuZ2V0VHlw\nZSgpID09IFR5cGVzLlZBUkNIQVIpIHsKICAgICAgICAgICAgLy8gcmVkdWNl\nIHNpemUgb2YgdmFyY2hhciBwcmltYXJ5IGtleSBjb2xzIHByb3BvcnRpb25h\nbCB0byB0aGUKICAgICAgICAgICAgLy8gbnVtYmVyIG9mIGNvbHMsIGJlY2F1\nc2UgaW50ZXJiYXNlIGNhcHMgdGhlIHRvdGFsIHBrIHNpemUKICAgICAgICAg\nICAgaW50IG51bUtleXMgPSAxOwogICAgICAgICAgICBpZiAoY29sLmdldFRh\nYmxlKCkgIT0gbnVsbAogICAgICAgICAgICAgICAgJiYgY29sLmdldFRhYmxl\nKCkuZ2V0UHJpbWFyeUtleSgpICE9IG51bGwpCiAgICAgICAgICAgICAgICBu\ndW1LZXlzID0gY29sLmdldFRhYmxlKCkuZ2V0UHJpbWFyeUtleSgpLmdldENv\nbHVtbnMoKS5sZW5ndGg7CiAgICAgICAgICAgIGNvbC5zZXRTaXplKE1hdGgu\nbWluKGNvbC5nZXRTaXplKCksIDIwMCAvIG51bUtleXMpKTsKICAgICAgICB9\nIGVsc2UgaWYgKGNvbC5nZXRUeXBlKCkgPT0gVHlwZXMuVkFSQ0hBUiAmJiBj\nb2wuZ2V0U2l6ZSgpID4gMjAwCiAgICAgICAgICAgICYmIGNvbC5nZXRUYWJs\nZSgpICE9IG51bGwpIHsKICAgICAgICAgICAgLy8gaW5kZXhlZCB2YXJjaGFy\nIGNvbHMgaGF2ZSB0byBiZSA8PSAyNTAgY2hhcnMKICAgICAgICAgICAgSW5k\nZXhbXSBpZHggPSBjb2wuZ2V0VGFibGUoKS5nZXRJbmRleGVzKCk7CiAgICAg\nICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgaWR4Lmxlbmd0aDsgaSsrKSB7\nCiAgICAgICAgICAgICAgICBpZiAoaWR4W2ldLmNvbnRhaW5zQ29sdW1uKGNv\nbCkpIHsKICAgICAgICAgICAgICAgICAgICBjb2wuc2V0U2l6ZShNYXRoLm1p\nbihjb2wuZ2V0U2l6ZSgpLCAyMDApKTsKICAgICAgICAgICAgICAgICAgICBi\ncmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAg\nIH0KICAgICAgICByZXR1cm4gc3VwZXIuYXBwZW5kU2l6ZShjb2wsIHR5cGVO\nYW1lKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBpbmRleE9mKFNRTEJ1ZmZl\nciBidWYsIEZpbHRlclZhbHVlIHN0ciwgRmlsdGVyVmFsdWUgZmluZCwKICAg\nICAgICBGaWx0ZXJWYWx1ZSBzdGFydCkgewogICAgICAgIHRocm93IG5ldyBT\ndG9yZUV4Y2VwdGlvbihfbG9jLmdldCgiaW5kZXhvZi1ub3Qtc3VwcG9ydGVk\nIiwgcGxhdGZvcm0pKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzdWJzdHJp\nbmcoU1FMQnVmZmVyIGJ1ZiwgRmlsdGVyVmFsdWUgc3RyLCBGaWx0ZXJWYWx1\nZSBzdGFydCwKICAgICAgICBGaWx0ZXJWYWx1ZSBlbmQpIHsKICAgICAgICB0\naHJvdyBuZXcgU3RvcmVFeGNlcHRpb24oX2xvYy5nZXQoInN1YnN0cmluZy1u\nb3Qtc3VwcG9ydGVkIiwKICAgICAgICAgICAgcGxhdGZvcm0pKTsKICAgIH0K\nCiAgICBwdWJsaWMgU3RyaW5nW10gZ2V0RHJvcENvbHVtblNRTChDb2x1bW4g\nY29sdW1uKSB7CiAgICAgICAgLy8gSW50ZXJiYXNlIHVzZXMgIkFMVEVSIFRB\nQkxFIERST1AgPENPTFVNTl9OQU1FPiIgcmF0aGVyIHRoYW4gdGhlCiAgICAg\nICAgLy8gdXN1YWwgIkFMVEVSIFRBQkxFIERST1AgQ09MVU1OIDxDT0xVTU5f\nTkFNRT4iCiAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmdbXXsgIkFMVEVSIFRB\nQkxFICIKICAgICAgICAgICAgKyBnZXRGdWxsTmFtZShjb2x1bW4uZ2V0VGFi\nbGUoKSwgZmFsc2UpICsgIiBEUk9QICIgKyBjb2x1bW4gfTsKICAgIH0KfQo=\n","encoding":"base64"}

