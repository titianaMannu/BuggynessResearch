{"sha":"54ec7347f25593835aa273bba7068599f7b910cb","node_id":"MDQ6QmxvYjIwNjM2NDo1NGVjNzM0N2YyNTU5MzgzNWFhMjczYmJhNzA2ODU5OWY3YjkxMGNi","size":4119,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/54ec7347f25593835aa273bba7068599f7b910cb","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNxbDsKCmltcG9ydCBqYXZhLnNxbC5Db25uZWN0aW9u\nOwppbXBvcnQgamF2YS5zcWwuRGF0YWJhc2VNZXRhRGF0YTsKaW1wb3J0IGph\ndmEuc3FsLlNRTEV4Y2VwdGlvbjsKaW1wb3J0IGphdmEuc3FsLlR5cGVzOwoK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmtlcm5lbC5leHBzLkZp\nbHRlclZhbHVlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2No\nZW1hLkNvbHVtbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNj\naGVtYS5JbmRleDsKCi8qKgogKiBEaWN0aW9uYXJ5IGZvciBQb2ludGJhc2Ug\nRW1iZWRkZWQuCiAqLwpwdWJsaWMgY2xhc3MgUG9pbnRiYXNlRGljdGlvbmFy\neQogICAgZXh0ZW5kcyBEQkRpY3Rpb25hcnkgewoKICAgIHB1YmxpYyBQb2lu\ndGJhc2VEaWN0aW9uYXJ5KCkgewogICAgICAgIHBsYXRmb3JtID0gIlBvaW50\nYmFzZSBFbWJlZGRlZCI7CiAgICAgICAgc3VwcG9ydHNEZWZlcnJlZENvbnN0\ncmFpbnRzID0gZmFsc2U7CiAgICAgICAgc3VwcG9ydHNNdWx0aXBsZU5vbnRy\nYW5zYWN0aW9uYWxSZXN1bHRTZXRzID0gZmFsc2U7CiAgICAgICAgcmVxdWly\nZXNBbGlhc0ZvclN1YnNlbGVjdCA9IHRydWU7CgogICAgICAgIHN1cHBvcnRz\nTG9ja2luZ1dpdGhEaXN0aW5jdENsYXVzZSA9IGZhbHNlOwogICAgICAgIHN1\ncHBvcnRzTG9ja2luZ1dpdGhNdWx0aXBsZVRhYmxlcyA9IGZhbHNlOwogICAg\nICAgIHN1cHBvcnRzTG9ja2luZ1dpdGhEaXN0aW5jdENsYXVzZSA9IGZhbHNl\nOwoKICAgICAgICBiaXRUeXBlTmFtZSA9ICJUSU5ZSU5UIjsKICAgICAgICBi\nbG9iVHlwZU5hbWUgPSAiQkxPQigxTSkiOwogICAgICAgIGxvbmdWYXJiaW5h\ncnlUeXBlTmFtZSA9ICJCTE9CKDFNKSI7CiAgICAgICAgY2hhclR5cGVOYW1l\nID0gIkNIQVJBQ1RFUnswfSI7CiAgICAgICAgY2xvYlR5cGVOYW1lID0gIkNM\nT0IoMU0pIjsKICAgICAgICBkb3VibGVUeXBlTmFtZSA9ICJET1VCTEUgUFJF\nQ0lTSU9OIjsKICAgICAgICBmbG9hdFR5cGVOYW1lID0gIkZMT0FUIjsKICAg\nICAgICBiaWdpbnRUeXBlTmFtZSA9ICJCSUdJTlQiOwogICAgICAgIGludGVn\nZXJUeXBlTmFtZSA9ICJJTlRFR0VSIjsKICAgICAgICByZWFsVHlwZU5hbWUg\nPSAiUkVBTCI7CiAgICAgICAgc21hbGxpbnRUeXBlTmFtZSA9ICJTTUFMTElO\nVCI7CiAgICAgICAgdGlueWludFR5cGVOYW1lID0gIlRJTllJTlQiOwoKICAg\nICAgICAvLyB0aGVyZSBpcyBubyBidWlsZC1pbiBmdW5jdGlvbiBmb3IgZ2V0\ndGluZyB0aGUgbGFzdCBnZW5lcmF0ZWQKICAgICAgICAvLyBrZXkgaW4gUG9p\nbnRiYXNlOyB1c2luZyBNQVggd2lsbCBoYXZlIHRvIHN1ZmZpY2UKICAgICAg\nICBzdXBwb3J0c0F1dG9Bc3NpZ24gPSB0cnVlOwogICAgICAgIGxhc3RHZW5l\ncmF0ZWRLZXlRdWVyeSA9ICJTRUxFQ1QgTUFYKHswfSkgRlJPTSB7MX0iOwog\nICAgICAgIGF1dG9Bc3NpZ25UeXBlTmFtZSA9ICJCSUdJTlQgSURFTlRJVFki\nOwogICAgfQoKICAgIHB1YmxpYyBpbnQgZ2V0UHJlZmVycmVkVHlwZShpbnQg\ndHlwZSkgewogICAgICAgIHN3aXRjaCAodHlwZSkgewogICAgICAgICAgICBj\nYXNlIFR5cGVzLkxPTkdWQVJDSEFSOgogICAgICAgICAgICAgICAgcmV0dXJu\nIFR5cGVzLkNMT0I7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAg\nICAgICByZXR1cm4gc3VwZXIuZ2V0UHJlZmVycmVkVHlwZSh0eXBlKTsKICAg\nICAgICB9CiAgICB9CgogICAgcHVibGljIENvbHVtbltdIGdldENvbHVtbnMo\nRGF0YWJhc2VNZXRhRGF0YSBtZXRhLCBTdHJpbmcgY2F0YWxvZywKICAgICAg\nICBTdHJpbmcgc2NoZW1hTmFtZSwgU3RyaW5nIHRhYmxlTmFtZSwgU3RyaW5n\nIGNvbHVtbk5hbWUsIENvbm5lY3Rpb24gY29ubikKICAgICAgICB0aHJvd3Mg\nU1FMRXhjZXB0aW9uIHsKICAgICAgICBDb2x1bW5bXSBjb2xzID0gc3VwZXIu\nZ2V0Q29sdW1ucyhtZXRhLCBjYXRhbG9nLCBzY2hlbWFOYW1lLCB0YWJsZU5h\nbWUsCiAgICAgICAgICAgIGNvbHVtbk5hbWUsIGNvbm4pOwoKICAgICAgICAv\nLyBwb2ludGJhc2UgcmVwb3J0cyB0aGUgdHlwZSBmb3IgYSBDTE9CIGZpZWxk\nIGFzIFZBUkNIQVI6IG92ZXJyaWRlIGl0CiAgICAgICAgZm9yIChpbnQgaSA9\nIDA7IGNvbHMgIT0gbnVsbCAmJiBpIDwgY29scy5sZW5ndGg7IGkrKykKICAg\nICAgICAgICAgaWYgKGNvbHNbaV0uZ2V0VHlwZU5hbWUoKS50b1VwcGVyQ2Fz\nZSgpLnN0YXJ0c1dpdGgoIkNMT0IiKSkKICAgICAgICAgICAgICAgIGNvbHNb\naV0uc2V0VHlwZShUeXBlcy5DTE9CKTsKICAgICAgICByZXR1cm4gY29sczsK\nICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nIGdldEZ1bGxOYW1lKEluZGV4IGlu\nZGV4KSB7CiAgICAgICAgcmV0dXJuIGdldEZ1bGxOYW1lKGluZGV4LmdldFRh\nYmxlKCksIGZhbHNlKSArICIuIiArIGluZGV4LmdldE5hbWUoKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBzdWJzdHJpbmcoU1FMQnVmZmVyIGJ1ZiwgRmls\ndGVyVmFsdWUgc3RyLCBGaWx0ZXJWYWx1ZSBzdGFydCwKICAgICAgICBGaWx0\nZXJWYWx1ZSBlbmQpIHsKICAgICAgICAvLyBTVUJTVFJJTkcgaW4gUG9pbnRi\nYXNlIGlzIG9mIHRoZSBmb3JtOgogICAgICAgIC8vIFNFTEVDVCBTVUJTVFJJ\nTkcoU09NRV9DT0xVTU4gRlJPTSAxIEZPUiA1KQogICAgICAgIGJ1Zi5hcHBl\nbmQoIlNVQlNUUklORygiKTsKICAgICAgICBzdHIuYXBwZW5kVG8oYnVmKTsK\nICAgICAgICBidWYuYXBwZW5kKCIgRlJPTSAiKTsKICAgICAgICBzdGFydC5h\ncHBlbmRUbyhidWYpOwogICAgICAgIGJ1Zi5hcHBlbmQoIiArIDEiKTsKICAg\nICAgICBpZiAoZW5kICE9IG51bGwpIHsKICAgICAgICAgICAgYnVmLmFwcGVu\nZCgiIEZPUiAiKTsKICAgICAgICAgICAgZW5kLmFwcGVuZFRvKGJ1Zik7CiAg\nICAgICAgICAgIGJ1Zi5hcHBlbmQoIiAtICgiKTsKICAgICAgICAgICAgc3Rh\ncnQuYXBwZW5kVG8oYnVmKTsKICAgICAgICAgICAgYnVmLmFwcGVuZCgiKSIp\nOwogICAgICAgIH0KICAgICAgICBidWYuYXBwZW5kKCIpIik7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgaW5kZXhPZihTUUxCdWZmZXIgYnVmLCBGaWx0ZXJW\nYWx1ZSBzdHIsIEZpbHRlclZhbHVlIGZpbmQsCiAgICAgICAgRmlsdGVyVmFs\ndWUgc3RhcnQpIHsKICAgICAgICBidWYuYXBwZW5kKCIoUE9TSVRJT04oIik7\nCiAgICAgICAgZmluZC5hcHBlbmRUbyhidWYpOwogICAgICAgIGJ1Zi5hcHBl\nbmQoIiBJTiAiKTsKICAgICAgICBpZiAoc3RhcnQgIT0gbnVsbCkKICAgICAg\nICAgICAgc3Vic3RyaW5nKGJ1Ziwgc3RyLCBzdGFydCwgbnVsbCk7CiAgICAg\nICAgZWxzZQogICAgICAgICAgICBzdHIuYXBwZW5kVG8oYnVmKTsKICAgICAg\nICBidWYuYXBwZW5kKCIpIC0gMSIpOwogICAgICAgIGlmIChzdGFydCAhPSBu\ndWxsKSB7CiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoIiArICIpOwogICAgICAg\nICAgICBzdGFydC5hcHBlbmRUbyhidWYpOwogICAgICAgIH0KICAgICAgICBi\ndWYuYXBwZW5kKCIpIik7CiAgICB9Cn0K\n","encoding":"base64"}

