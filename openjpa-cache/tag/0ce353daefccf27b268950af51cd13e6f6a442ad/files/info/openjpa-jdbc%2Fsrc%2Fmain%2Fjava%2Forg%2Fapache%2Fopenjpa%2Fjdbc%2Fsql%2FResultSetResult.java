{"sha":"7563f4d624a0f300e9acb3955fc7be17d48770eb","node_id":"MDQ6QmxvYjIwNjM2NDo3NTYzZjRkNjI0YTBmMzAwZTlhY2IzOTU1ZmM3YmUxN2Q0ODc3MGVi","size":15504,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/7563f4d624a0f300e9acb3955fc7be17d48770eb","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNxbDsKCmltcG9ydCBqYXZhLmlvLklucHV0U3RyZWFt\nOwppbXBvcnQgamF2YS5pby5SZWFkZXI7CmltcG9ydCBqYXZhLm1hdGguQmln\nRGVjaW1hbDsKaW1wb3J0IGphdmEubWF0aC5CaWdJbnRlZ2VyOwppbXBvcnQg\namF2YS5zcWwuQXJyYXk7CmltcG9ydCBqYXZhLnNxbC5CbG9iOwppbXBvcnQg\namF2YS5zcWwuQ2xvYjsKaW1wb3J0IGphdmEuc3FsLkNvbm5lY3Rpb247Cmlt\ncG9ydCBqYXZhLnNxbC5SZWY7CmltcG9ydCBqYXZhLnNxbC5SZXN1bHRTZXQ7\nCmltcG9ydCBqYXZhLnNxbC5TUUxFeGNlcHRpb247CmltcG9ydCBqYXZhLnNx\nbC5TdGF0ZW1lbnQ7CmltcG9ydCBqYXZhLnNxbC5UaW1lOwppbXBvcnQgamF2\nYS5zcWwuVGltZXN0YW1wOwppbXBvcnQgamF2YS5zcWwuVHlwZXM7CmltcG9y\ndCBqYXZhLnV0aWwuQ2FsZW5kYXI7CmltcG9ydCBqYXZhLnV0aWwuRGF0ZTsK\naW1wb3J0IGphdmEudXRpbC5Mb2NhbGU7CmltcG9ydCBqYXZhLnV0aWwuTWFw\nOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmtlcm5lbC5KREJD\nU3RvcmU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLkph\ndmFTUUxUeXBlczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNj\naGVtYS5Db2x1bW47CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5K\nYXZhVHlwZXM7CmltcG9ydCBzZXJwLnV0aWwuTnVtYmVyczsKCi8qKgogKiBC\nYXNlIHtAbGluayBSZXN1bHR9IGltcGxlbWVudGF0aW9uIHdyYXBwZWQgYXJv\ndW5kIGEgcmVzdWx0IHNldC4KICogQ29sdW1uIG9iamVjdHMsIGNvbHVtbiBu\nYW1lcywgb3IgY29sdW1uIGluZGV4ZXMgKGFzIDxjb2RlPk51bWJlcjwvY29k\nZT4KICogaW5zdGFuY2VzKSBjYW4gYmUgdXNlZCB0byByZXRyaWV2ZSByZXN1\nbHQgc2V0IGRhdGEuCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqLwpwdWJs\naWMgY2xhc3MgUmVzdWx0U2V0UmVzdWx0CiAgICBleHRlbmRzIEFic3RyYWN0\nUmVzdWx0IHsKCiAgICBwcml2YXRlIGZpbmFsIENvbm5lY3Rpb24gX2Nvbm47\nCiAgICBwcml2YXRlIGZpbmFsIFN0YXRlbWVudCBfc3RtbnQ7CiAgICBwcml2\nYXRlIGZpbmFsIFJlc3VsdFNldCBfcnM7CiAgICBwcml2YXRlIGZpbmFsIERC\nRGljdGlvbmFyeSBfZGljdDsKICAgIHByaXZhdGUgYm9vbGVhbiBfY2xvc2VD\nb25uID0gdHJ1ZTsKICAgIHByaXZhdGUgaW50IF9yb3cgPSAtMTsKICAgIHBy\naXZhdGUgaW50IF9zaXplID0gLTE7CgogICAgLy8gb3B0aW9uYWw7IHVzZWQg\ndG8gZGVzZXJpYWxpemUgYmxvYnMgY29udGFpbmluZyByZWZzIHRvIHBlcnNp\nc3RlbnQgb2JqcwogICAgcHJpdmF0ZSBKREJDU3RvcmUgX3N0b3JlID0gbnVs\nbDsKCiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yLgogICAgICovCiAgICBw\ndWJsaWMgUmVzdWx0U2V0UmVzdWx0KENvbm5lY3Rpb24gY29ubiwgU3RhdGVt\nZW50IHN0bW50LAogICAgICAgIFJlc3VsdFNldCBycywgREJEaWN0aW9uYXJ5\nIGRpY3QpIHsKICAgICAgICBpZiAoc3RtbnQgPT0gbnVsbCkKICAgICAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgICAgIHN0bW50ID0gcnMuZ2V0U3RhdGVt\nZW50KCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7CiAg\nICAgICAgICAgIH0KCiAgICAgICAgX2Nvbm4gPSBjb25uOwogICAgICAgIF9z\ndG1udCA9IHN0bW50OwogICAgICAgIF9ycyA9IHJzOwogICAgICAgIF9kaWN0\nID0gZGljdDsKICAgIH0KCiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yLgog\nICAgICovCiAgICBwdWJsaWMgUmVzdWx0U2V0UmVzdWx0KENvbm5lY3Rpb24g\nY29ubiwgU3RhdGVtZW50IHN0bW50LAogICAgICAgIFJlc3VsdFNldCBycywg\nSkRCQ1N0b3JlIHN0b3JlKSB7CiAgICAgICAgdGhpcyhjb25uLCBzdG1udCwg\ncnMsIHN0b3JlLmdldERCRGljdGlvbmFyeSgpKTsKICAgICAgICBzZXRTdG9y\nZShzdG9yZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBKREJDIDIgY29uc3Ry\ndWN0b3IuIFJlbGllcyBvbiBiZWluZyBhYmxlIHRvIHJldHJpZXZlIHRoZSBz\ndGF0ZW1lbnQKICAgICAqIGZyb20gdGhlIHJlc3VsdCBzZXQsIGFuZCB0aGUg\nY29ubmVjdGlvbiBmcm9tIHRoZSBzdGF0ZW1lbnQuCiAgICAgKi8KICAgIHB1\nYmxpYyBSZXN1bHRTZXRSZXN1bHQoUmVzdWx0U2V0IHJzLCBEQkRpY3Rpb25h\ncnkgZGljdCkKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAg\nICBfc3RtbnQgPSBycy5nZXRTdGF0ZW1lbnQoKTsKICAgICAgICBfY29ubiA9\nIF9zdG1udC5nZXRDb25uZWN0aW9uKCk7CiAgICAgICAgX3JzID0gcnM7CiAg\nICAgICAgX2RpY3QgPSBkaWN0OwogICAgfQoKICAgIC8qKgogICAgICogSkRC\nQyAyIGNvbnN0cnVjdG9yLiBSZWxpZXMgb24gYmVpbmcgYWJsZSB0byByZXRy\naWV2ZSB0aGUgc3RhdGVtZW50CiAgICAgKiBmcm9tIHRoZSByZXN1bHQgc2V0\nLCBhbmQgdGhlIGNvbm5lY3Rpb24gZnJvbSB0aGUgc3RhdGVtZW50LgogICAg\nICovCiAgICBwdWJsaWMgUmVzdWx0U2V0UmVzdWx0KFJlc3VsdFNldCBycywg\nSkRCQ1N0b3JlIHN0b3JlKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24g\newogICAgICAgIHRoaXMocnMsIHN0b3JlLmdldERCRGljdGlvbmFyeSgpKTsK\nICAgICAgICBzZXRTdG9yZShzdG9yZSk7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBSZXR1cm4gdGhlIHN0YXRlbWVudCB0aGF0IHByb2R1Y2VkIHRoaXMgcmVz\ndWx0LgogICAgICovCiAgICBwdWJsaWMgU3RhdGVtZW50IGdldFN0YXRlbWVu\ndCgpIHsKICAgICAgICByZXR1cm4gX3N0bW50OwogICAgfQoKICAgIC8qKgog\nICAgICogUmV0dXJuIHRoZSBiYWNraW5nIHJlc3VsdCBzZXQuCiAgICAgKi8K\nICAgIHB1YmxpYyBSZXN1bHRTZXQgZ2V0UmVzdWx0U2V0KCkgewogICAgICAg\nIHJldHVybiBfcnM7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhl\nIGRpY3Rpb25hcnkgaW4gdXNlLgogICAgICovCiAgICBwdWJsaWMgREJEaWN0\naW9uYXJ5IGdldERCRGljdGlvbmFyeSgpIHsKICAgICAgICByZXR1cm4gX2Rp\nY3Q7CiAgICB9CgogICAgLyoqCiAgICAgKiBPcHRpb25hbCBzdG9yZSBtYW5h\nZ2VyIHVzZWQgdG8gZGVzZXJpYWxpemUgYmxvYnMgY29udGFpbmluZwogICAg\nICogcmVmZXJlbmNlcyB0byBwZXJzaXN0ZW50IG9iamVjdHMuCiAgICAgKi8K\nICAgIHB1YmxpYyBKREJDU3RvcmUgZ2V0U3RvcmUoKSB7CiAgICAgICAgcmV0\ndXJuIF9zdG9yZTsKICAgIH0KCiAgICAvKioKICAgICAqIE9wdGlvbmFsIHN0\nb3JlIG1hbmFnZXIgdXNlZCB0byBkZXNlcmlhbGl6ZSBibG9icyBjb250YWlu\naW5nCiAgICAgKiByZWZlcmVuY2VzIHRvIHBlcnNpc3RlbnQgb2JqZWN0cy4K\nICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0U3RvcmUoSkRCQ1N0b3JlIHN0\nb3JlKSB7CiAgICAgICAgX3N0b3JlID0gc3RvcmU7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBXaGV0aGVyIHRvIGNsb3NlIHRoZSBiYWNraW5nIGNvbm5lY3Rp\nb24gd2hlbiB0aGlzIHJlc3VsdCBpcyBjbG9zZWQuCiAgICAgKiBEZWZhdWx0\ncyB0byB0cnVlLgogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBnZXRDbG9z\nZUNvbm5lY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIF9jbG9zZUNvbm47CiAg\nICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRvIGNsb3NlIHRoZSBiYWNr\naW5nIGNvbm5lY3Rpb24gd2hlbiB0aGlzIHJlc3VsdCBpcyBjbG9zZWQuCiAg\nICAgKiBEZWZhdWx0cyB0byB0cnVlLgogICAgICovCiAgICBwdWJsaWMgdm9p\nZCBzZXRDbG9zZUNvbm5lY3Rpb24oYm9vbGVhbiBjbG9zZUNvbm4pIHsKICAg\nICAgICBfY2xvc2VDb25uID0gY2xvc2VDb25uOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIGNsb3NlKCkgewogICAgICAgIHN1cGVyLmNsb3NlKCk7CiAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgX3JzLmNsb3NlKCk7CiAgICAgICAgfSBj\nYXRjaCAoU1FMRXhjZXB0aW9uIHNlKSB7CiAgICAgICAgfQogICAgICAgIGlm\nIChfc3RtbnQgIT0gbnVsbCkKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgICAgIF9zdG1udC5jbG9zZSgpOwogICAgICAgICAgICB9IGNhdGNoIChT\nUUxFeGNlcHRpb24gc2UpIHsKICAgICAgICAgICAgfQogICAgICAgIGlmIChf\nY2xvc2VDb25uKQogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAg\nX2Nvbm4uY2xvc2UoKTsKICAgICAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0\naW9uIHNlKSB7CiAgICAgICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgYm9v\nbGVhbiBzdXBwb3J0c1JhbmRvbUFjY2VzcygpCiAgICAgICAgdGhyb3dzIFNR\nTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIF9ycy5nZXRUeXBlKCkgIT0g\nUmVzdWx0U2V0LlRZUEVfRk9SV0FSRF9PTkxZOwogICAgfQoKICAgIHByb3Rl\nY3RlZCBib29sZWFuIGFic29sdXRlSW50ZXJuYWwoaW50IHJvdykKICAgICAg\nICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBpZiAocm93ID09ICsr\nX3JvdykKICAgICAgICAgICAgcmV0dXJuIF9ycy5uZXh0KCk7CgogICAgICAg\nIC8vIHJhbmRvbSBhY2Nlc3MKICAgICAgICBfcnMuYWJzb2x1dGUocm93ICsg\nMSk7CiAgICAgICAgaWYgKF9ycy5nZXRSb3coKSA9PSAwKSB7CiAgICAgICAg\nICAgIF9yb3cgPSAtMTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAg\nICAgIH0KICAgICAgICBfcm93ID0gcm93OwogICAgICAgIHJldHVybiB0cnVl\nOwogICAgfQoKICAgIHByb3RlY3RlZCBib29sZWFuIG5leHRJbnRlcm5hbCgp\nCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgX3Jvdysr\nOwogICAgICAgIHJldHVybiBfcnMubmV4dCgpOwogICAgfQoKICAgIHB1Ymxp\nYyBpbnQgc2l6ZSgpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAg\nICAgICAgaWYgKF9zaXplID09IC0xKSB7CiAgICAgICAgICAgIF9ycy5sYXN0\nKCk7CiAgICAgICAgICAgIF9zaXplID0gX3JzLmdldFJvdygpOwogICAgICAg\nICAgICBpZiAoX3JvdyA9PSAtMSkKICAgICAgICAgICAgICAgIF9ycy5iZWZv\ncmVGaXJzdCgpOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBf\ncnMuYWJzb2x1dGUoX3JvdyArIDEpOwogICAgICAgIH0KICAgICAgICByZXR1\ncm4gX3NpemU7CiAgICB9CgogICAgcHJvdGVjdGVkIGJvb2xlYW4gY29udGFp\nbnNJbnRlcm5hbChPYmplY3Qgb2JqLCBKb2lucyBqb2lucykKICAgICAgICB0\naHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gKChOdW1iZXIp\nIHRyYW5zbGF0ZShvYmosIGpvaW5zKSkuaW50VmFsdWUoKSA+IDA7CiAgICB9\nCgogICAgcHJvdGVjdGVkIEFycmF5IGdldEFycmF5SW50ZXJuYWwoT2JqZWN0\nIG9iaiwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlv\nbiB7CiAgICAgICAgcmV0dXJuIF9kaWN0LmdldEFycmF5KF9ycywgKChOdW1i\nZXIpIG9iaikuaW50VmFsdWUoKSk7CiAgICB9CgogICAgcHJvdGVjdGVkIElu\ncHV0U3RyZWFtIGdldEFzY2lpU3RyZWFtSW50ZXJuYWwoT2JqZWN0IG9iaiwg\nSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAg\nICAgICAgcmV0dXJuIF9kaWN0LmdldEFzY2lpU3RyZWFtKF9ycywgKChOdW1i\nZXIpIG9iaikuaW50VmFsdWUoKSk7CiAgICB9CgogICAgcHJvdGVjdGVkIEJp\nZ0RlY2ltYWwgZ2V0QmlnRGVjaW1hbEludGVybmFsKE9iamVjdCBvYmosIEpv\naW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAg\nICAgIHJldHVybiBfZGljdC5nZXRCaWdEZWNpbWFsKF9ycywgKChOdW1iZXIp\nIG9iaikuaW50VmFsdWUoKSk7CiAgICB9CgogICAgcHJvdGVjdGVkIE51bWJl\nciBnZXROdW1iZXJJbnRlcm5hbChPYmplY3Qgb2JqLCBKb2lucyBqb2lucykK\nICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4g\nX2RpY3QuZ2V0TnVtYmVyKF9ycywgKChOdW1iZXIpIG9iaikuaW50VmFsdWUo\nKSk7CiAgICB9CgogICAgcHJvdGVjdGVkIEJpZ0ludGVnZXIgZ2V0QmlnSW50\nZWdlckludGVybmFsKE9iamVjdCBvYmosIEpvaW5zIGpvaW5zKQogICAgICAg\nIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBfZGljdC5n\nZXRCaWdJbnRlZ2VyKF9ycywgKChOdW1iZXIpIG9iaikuaW50VmFsdWUoKSk7\nCiAgICB9CgogICAgcHJvdGVjdGVkIElucHV0U3RyZWFtIGdldEJpbmFyeVN0\ncmVhbUludGVybmFsKE9iamVjdCBvYmosIEpvaW5zIGpvaW5zKQogICAgICAg\nIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBfZGljdC5n\nZXRCaW5hcnlTdHJlYW0oX3JzLCAoKE51bWJlcikgb2JqKS5pbnRWYWx1ZSgp\nKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgQmxvYiBnZXRCbG9iSW50ZXJuYWwo\nT2JqZWN0IG9iaiwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4\nY2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIF9kaWN0LmdldEJsb2IoX3JzLCAo\nKE51bWJlcikgb2JqKS5pbnRWYWx1ZSgpKTsKICAgIH0KCiAgICBwcm90ZWN0\nZWQgYm9vbGVhbiBnZXRCb29sZWFuSW50ZXJuYWwoT2JqZWN0IG9iaiwgSm9p\nbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAg\nICAgcmV0dXJuIF9kaWN0LmdldEJvb2xlYW4oX3JzLCAoKE51bWJlcikgb2Jq\nKS5pbnRWYWx1ZSgpKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgYnl0ZSBnZXRC\neXRlSW50ZXJuYWwoT2JqZWN0IG9iaiwgSm9pbnMgam9pbnMpCiAgICAgICAg\ndGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIF9kaWN0Lmdl\ndEJ5dGUoX3JzLCAoKE51bWJlcikgb2JqKS5pbnRWYWx1ZSgpKTsKICAgIH0K\nCiAgICBwcm90ZWN0ZWQgYnl0ZVtdIGdldEJ5dGVzSW50ZXJuYWwoT2JqZWN0\nIG9iaiwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlv\nbiB7CiAgICAgICAgcmV0dXJuIF9kaWN0LmdldEJ5dGVzKF9ycywgKChOdW1i\nZXIpIG9iaikuaW50VmFsdWUoKSk7CiAgICB9CgogICAgcHJvdGVjdGVkIENh\nbGVuZGFyIGdldENhbGVuZGFySW50ZXJuYWwoT2JqZWN0IG9iaiwgSm9pbnMg\nam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAg\ncmV0dXJuIF9kaWN0LmdldENhbGVuZGFyKF9ycywgKChOdW1iZXIpIG9iaiku\naW50VmFsdWUoKSk7CiAgICB9CgogICAgcHJvdGVjdGVkIGNoYXIgZ2V0Q2hh\nckludGVybmFsKE9iamVjdCBvYmosIEpvaW5zIGpvaW5zKQogICAgICAgIHRo\ncm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBfZGljdC5nZXRD\naGFyKF9ycywgKChOdW1iZXIpIG9iaikuaW50VmFsdWUoKSk7CiAgICB9Cgog\nICAgcHJvdGVjdGVkIFJlYWRlciBnZXRDaGFyYWN0ZXJTdHJlYW1JbnRlcm5h\nbChPYmplY3Qgb2JqLCBKb2lucyBqb2lucykKICAgICAgICB0aHJvd3MgU1FM\nRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gX2RpY3QuZ2V0Q2hhcmFjdGVy\nU3RyZWFtKF9ycywgKChOdW1iZXIpIG9iaikuaW50VmFsdWUoKSk7CiAgICB9\nCgogICAgcHJvdGVjdGVkIENsb2IgZ2V0Q2xvYkludGVybmFsKE9iamVjdCBv\nYmosIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24g\newogICAgICAgIHJldHVybiBfZGljdC5nZXRDbG9iKF9ycywgKChOdW1iZXIp\nIG9iaikuaW50VmFsdWUoKSk7CiAgICB9CgogICAgcHJvdGVjdGVkIERhdGUg\nZ2V0RGF0ZUludGVybmFsKE9iamVjdCBvYmosIEpvaW5zIGpvaW5zKQogICAg\nICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBfZGlj\ndC5nZXREYXRlKF9ycywgKChOdW1iZXIpIG9iaikuaW50VmFsdWUoKSk7CiAg\nICB9CgogICAgcHJvdGVjdGVkIGphdmEuc3FsLkRhdGUgZ2V0RGF0ZUludGVy\nbmFsKE9iamVjdCBvYmosIENhbGVuZGFyIGNhbCwKICAgICAgICBKb2lucyBq\nb2lucykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBy\nZXR1cm4gX2RpY3QuZ2V0RGF0ZShfcnMsICgoTnVtYmVyKSBvYmopLmludFZh\nbHVlKCksIGNhbCk7CiAgICB9CgogICAgcHJvdGVjdGVkIGRvdWJsZSBnZXRE\nb3VibGVJbnRlcm5hbChPYmplY3Qgb2JqLCBKb2lucyBqb2lucykKICAgICAg\nICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gX2RpY3Qu\nZ2V0RG91YmxlKF9ycywgKChOdW1iZXIpIG9iaikuaW50VmFsdWUoKSk7CiAg\nICB9CgogICAgcHJvdGVjdGVkIGZsb2F0IGdldEZsb2F0SW50ZXJuYWwoT2Jq\nZWN0IG9iaiwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2Vw\ndGlvbiB7CiAgICAgICAgcmV0dXJuIF9kaWN0LmdldEZsb2F0KF9ycywgKChO\ndW1iZXIpIG9iaikuaW50VmFsdWUoKSk7CiAgICB9CgogICAgcHJvdGVjdGVk\nIGludCBnZXRJbnRJbnRlcm5hbChPYmplY3Qgb2JqLCBKb2lucyBqb2lucykK\nICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4g\nX2RpY3QuZ2V0SW50KF9ycywgKChOdW1iZXIpIG9iaikuaW50VmFsdWUoKSk7\nCiAgICB9CgogICAgcHJvdGVjdGVkIExvY2FsZSBnZXRMb2NhbGVJbnRlcm5h\nbChPYmplY3Qgb2JqLCBKb2lucyBqb2lucykKICAgICAgICB0aHJvd3MgU1FM\nRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gX2RpY3QuZ2V0TG9jYWxlKF9y\ncywgKChOdW1iZXIpIG9iaikuaW50VmFsdWUoKSk7CiAgICB9CgogICAgcHJv\ndGVjdGVkIGxvbmcgZ2V0TG9uZ0ludGVybmFsKE9iamVjdCBvYmosIEpvaW5z\nIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAg\nIHJldHVybiBfZGljdC5nZXRMb25nKF9ycywgKChOdW1iZXIpIG9iaikuaW50\nVmFsdWUoKSk7CiAgICB9CgogICAgcHJvdGVjdGVkIE9iamVjdCBnZXRPYmpl\nY3RJbnRlcm5hbChPYmplY3Qgb2JqLCBpbnQgbWV0YVR5cGVDb2RlLAogICAg\nICAgIE9iamVjdCBhcmcsIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93cyBT\nUUxFeGNlcHRpb24gewogICAgICAgIGlmIChtZXRhVHlwZUNvZGUgPT0gLTEg\nJiYgb2JqIGluc3RhbmNlb2YgQ29sdW1uKQogICAgICAgICAgICBtZXRhVHlw\nZUNvZGUgPSAoKENvbHVtbikgb2JqKS5nZXRKYXZhVHlwZSgpOwoKICAgICAg\nICBPYmplY3QgdmFsID0gbnVsbDsKICAgICAgICBzd2l0Y2ggKG1ldGFUeXBl\nQ29kZSkgewogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5CT09MRUFOOgog\nICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5CT09MRUFOX09CSjoKICAgICAg\nICAgICAgICAgIHZhbCA9IChnZXRCb29sZWFuSW50ZXJuYWwob2JqLCBqb2lu\ncykpID8gQm9vbGVhbi5UUlVFCiAgICAgICAgICAgICAgICAgICAgOiBCb29s\nZWFuLkZBTFNFOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAg\nIGNhc2UgSmF2YVR5cGVzLkJZVEU6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5\ncGVzLkJZVEVfT0JKOgogICAgICAgICAgICAgICAgdmFsID0gbmV3IEJ5dGUo\nZ2V0Qnl0ZUludGVybmFsKG9iaiwgam9pbnMpKTsKICAgICAgICAgICAgICAg\nIGJyZWFrOwogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5DSEFSOgogICAg\nICAgICAgICBjYXNlIEphdmFUeXBlcy5DSEFSX09CSjoKICAgICAgICAgICAg\nICAgIHZhbCA9IG5ldyBDaGFyYWN0ZXIoZ2V0Q2hhckludGVybmFsKG9iaiwg\nam9pbnMpKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBj\nYXNlIEphdmFUeXBlcy5ET1VCTEU6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5\ncGVzLkRPVUJMRV9PQko6CiAgICAgICAgICAgICAgICB2YWwgPSBuZXcgRG91\nYmxlKGdldERvdWJsZUludGVybmFsKG9iaiwgam9pbnMpKTsKICAgICAgICAg\nICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5GTE9B\nVDoKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuRkxPQVRfT0JKOgogICAg\nICAgICAgICAgICAgdmFsID0gbmV3IEZsb2F0KGdldEZsb2F0SW50ZXJuYWwo\nb2JqLCBqb2lucykpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAg\nICAgIGNhc2UgSmF2YVR5cGVzLklOVDoKICAgICAgICAgICAgY2FzZSBKYXZh\nVHlwZXMuSU5UX09CSjoKICAgICAgICAgICAgICAgIHZhbCA9IE51bWJlcnMu\ndmFsdWVPZihnZXRJbnRJbnRlcm5hbChvYmosIGpvaW5zKSk7CiAgICAgICAg\nICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuTE9O\nRzoKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuTE9OR19PQko6CiAgICAg\nICAgICAgICAgICB2YWwgPSBOdW1iZXJzLnZhbHVlT2YoZ2V0TG9uZ0ludGVy\nbmFsKG9iaiwgam9pbnMpKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAg\nICAgICAgICBjYXNlIEphdmFUeXBlcy5TSE9SVDoKICAgICAgICAgICAgY2Fz\nZSBKYXZhVHlwZXMuU0hPUlRfT0JKOgogICAgICAgICAgICAgICAgdmFsID0g\nbmV3IFNob3J0KGdldFNob3J0SW50ZXJuYWwob2JqLCBqb2lucykpOwogICAg\nICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVz\nLlNUUklORzoKICAgICAgICAgICAgICAgIHJldHVybiBnZXRTdHJpbmdJbnRl\ncm5hbChvYmosIGpvaW5zKTsKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMu\nT0JKRUNUOgogICAgICAgICAgICAgICAgcmV0dXJuIF9kaWN0CiAgICAgICAg\nICAgICAgICAgICAgLmdldEJsb2JPYmplY3QoX3JzLCAoKE51bWJlcikgb2Jq\nKS5pbnRWYWx1ZSgpLCBfc3RvcmUpOwogICAgICAgICAgICBjYXNlIEphdmFU\neXBlcy5EQVRFOgogICAgICAgICAgICAgICAgcmV0dXJuIGdldERhdGVJbnRl\ncm5hbChvYmosIGpvaW5zKTsKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMu\nQ0FMRU5EQVI6CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0Q2FsZW5kYXJJ\nbnRlcm5hbChvYmosIGpvaW5zKTsKICAgICAgICAgICAgY2FzZSBKYXZhVHlw\nZXMuQklHREVDSU1BTDoKICAgICAgICAgICAgICAgIHJldHVybiBnZXRCaWdE\nZWNpbWFsSW50ZXJuYWwob2JqLCBqb2lucyk7CiAgICAgICAgICAgIGNhc2Ug\nSmF2YVR5cGVzLk5VTUJFUjoKICAgICAgICAgICAgICAgIHJldHVybiBnZXRO\ndW1iZXJJbnRlcm5hbChvYmosIGpvaW5zKTsKICAgICAgICAgICAgY2FzZSBK\nYXZhVHlwZXMuQklHSU5URUdFUjoKICAgICAgICAgICAgICAgIHJldHVybiBn\nZXRCaWdJbnRlZ2VySW50ZXJuYWwob2JqLCBqb2lucyk7CiAgICAgICAgICAg\nIGNhc2UgSmF2YVR5cGVzLkxPQ0FMRToKICAgICAgICAgICAgICAgIHJldHVy\nbiBnZXRMb2NhbGVJbnRlcm5hbChvYmosIGpvaW5zKTsKICAgICAgICAgICAg\nY2FzZSBKYXZhU1FMVHlwZXMuU1FMX0FSUkFZOgogICAgICAgICAgICAgICAg\ncmV0dXJuIGdldEFycmF5SW50ZXJuYWwob2JqLCBqb2lucyk7CiAgICAgICAg\nICAgIGNhc2UgSmF2YVNRTFR5cGVzLkFTQ0lJX1NUUkVBTToKICAgICAgICAg\nICAgICAgIHJldHVybiBnZXRBc2NpaVN0cmVhbUludGVybmFsKG9iaiwgam9p\nbnMpOwogICAgICAgICAgICBjYXNlIEphdmFTUUxUeXBlcy5CSU5BUllfU1RS\nRUFNOgogICAgICAgICAgICAgICAgcmV0dXJuIGdldEJpbmFyeVN0cmVhbUlu\ndGVybmFsKG9iaiwgam9pbnMpOwogICAgICAgICAgICBjYXNlIEphdmFTUUxU\neXBlcy5CTE9COgogICAgICAgICAgICAgICAgcmV0dXJuIGdldEJsb2JJbnRl\ncm5hbChvYmosIGpvaW5zKTsKICAgICAgICAgICAgY2FzZSBKYXZhU1FMVHlw\nZXMuQllURVM6CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0Qnl0ZXNJbnRl\ncm5hbChvYmosIGpvaW5zKTsKICAgICAgICAgICAgY2FzZSBKYXZhU1FMVHlw\nZXMuQ0hBUl9TVFJFQU06CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0Q2hh\ncmFjdGVyU3RyZWFtSW50ZXJuYWwob2JqLCBqb2lucyk7CiAgICAgICAgICAg\nIGNhc2UgSmF2YVNRTFR5cGVzLkNMT0I6CiAgICAgICAgICAgICAgICByZXR1\ncm4gZ2V0Q2xvYkludGVybmFsKG9iaiwgam9pbnMpOwogICAgICAgICAgICBj\nYXNlIEphdmFTUUxUeXBlcy5TUUxfREFURToKICAgICAgICAgICAgICAgIHJl\ndHVybiBnZXREYXRlSW50ZXJuYWwob2JqLCAoQ2FsZW5kYXIpIGFyZywgam9p\nbnMpOwogICAgICAgICAgICBjYXNlIEphdmFTUUxUeXBlcy5TUUxfT0JKRUNU\nOgogICAgICAgICAgICAgICAgcmV0dXJuIGdldFNRTE9iamVjdEludGVybmFs\nKG9iaiwgKE1hcCkgYXJnLCBqb2lucyk7CiAgICAgICAgICAgIGNhc2UgSmF2\nYVNRTFR5cGVzLlJFRjoKICAgICAgICAgICAgICAgIHJldHVybiBnZXRSZWZJ\nbnRlcm5hbChvYmosIChNYXApIGFyZywgam9pbnMpOwogICAgICAgICAgICBj\nYXNlIEphdmFTUUxUeXBlcy5USU1FOgogICAgICAgICAgICAgICAgcmV0dXJu\nIGdldFRpbWVJbnRlcm5hbChvYmosIChDYWxlbmRhcikgYXJnLCBqb2lucyk7\nCiAgICAgICAgICAgIGNhc2UgSmF2YVNRTFR5cGVzLlRJTUVTVEFNUDoKICAg\nICAgICAgICAgICAgIHJldHVybiBnZXRUaW1lc3RhbXBJbnRlcm5hbChvYmos\nIChDYWxlbmRhcikgYXJnLCBqb2lucyk7CiAgICAgICAgICAgIGRlZmF1bHQ6\nCiAgICAgICAgICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgQ29sdW1uKSB7\nCiAgICAgICAgICAgICAgICAgICAgQ29sdW1uIGNvbCA9IChDb2x1bW4pIG9i\najsKICAgICAgICAgICAgICAgICAgICBpZiAoY29sLmdldFR5cGUoKSA9PSBU\neXBlcy5CTE9CCiAgICAgICAgICAgICAgICAgICAgICAgIHx8IGNvbC5nZXRU\neXBlKCkgPT0gVHlwZXMuVkFSQklOQVJZKSB7CiAgICAgICAgICAgICAgICAg\nICAgICAgIHJldHVybiBfZGljdAogICAgICAgICAgICAgICAgICAgICAgICAg\nICAgLmdldEJsb2JPYmplY3QoX3JzLCAoKE51bWJlcikgb2JqKS5pbnRWYWx1\nZSgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zdG9yZSk7\nCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAg\nICAgICAgICAgICAgcmV0dXJuIF9kaWN0LmdldE9iamVjdChfcnMsICgoTnVt\nYmVyKSBvYmopLmludFZhbHVlKCksIG51bGwpOwogICAgICAgIH0KICAgICAg\nICByZXR1cm4gKF9ycy53YXNOdWxsKCkpID8gbnVsbCA6IHZhbDsKICAgIH0K\nCiAgICBwcm90ZWN0ZWQgT2JqZWN0IGdldFNRTE9iamVjdEludGVybmFsKE9i\namVjdCBvYmosIE1hcCBtYXAsIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93\ncyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBfZGljdC5nZXRPYmpl\nY3QoX3JzLCAoKE51bWJlcikgb2JqKS5pbnRWYWx1ZSgpLCBtYXApOwogICAg\nfQoKICAgIHByb3RlY3RlZCBSZWYgZ2V0UmVmSW50ZXJuYWwoT2JqZWN0IG9i\naiwgTWFwIG1hcCwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4\nY2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIF9kaWN0LmdldFJlZihfcnMsICgo\nTnVtYmVyKSBvYmopLmludFZhbHVlKCksIG1hcCk7CiAgICB9CgogICAgcHJv\ndGVjdGVkIHNob3J0IGdldFNob3J0SW50ZXJuYWwoT2JqZWN0IG9iaiwgSm9p\nbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAg\nICAgcmV0dXJuIF9kaWN0LmdldFNob3J0KF9ycywgKChOdW1iZXIpIG9iaiku\naW50VmFsdWUoKSk7CiAgICB9CgogICAgcHJvdGVjdGVkIFN0cmluZyBnZXRT\ndHJpbmdJbnRlcm5hbChPYmplY3Qgb2JqLCBKb2lucyBqb2lucykKICAgICAg\nICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBpZiAob2JqIGluc3Rh\nbmNlb2YgQ29sdW1uICYmICgoQ29sdW1uKSBvYmopLmdldFR5cGUoKSA9PSBU\neXBlcy5DTE9CKQogICAgICAgICAgICByZXR1cm4gX2RpY3QuZ2V0Q2xvYlN0\ncmluZyhfcnMsICgoTnVtYmVyKSBvYmopLmludFZhbHVlKCkpOwogICAgICAg\nIHJldHVybiBfZGljdC5nZXRTdHJpbmcoX3JzLCAoKE51bWJlcikgb2JqKS5p\nbnRWYWx1ZSgpKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgVGltZSBnZXRUaW1l\nSW50ZXJuYWwoT2JqZWN0IG9iaiwgQ2FsZW5kYXIgY2FsLCBKb2lucyBqb2lu\ncykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1\ncm4gX2RpY3QuZ2V0VGltZShfcnMsICgoTnVtYmVyKSBvYmopLmludFZhbHVl\nKCksIGNhbCk7CiAgICB9CgogICAgcHJvdGVjdGVkIFRpbWVzdGFtcCBnZXRU\naW1lc3RhbXBJbnRlcm5hbChPYmplY3Qgb2JqLCBDYWxlbmRhciBjYWwsCiAg\nICAgICAgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlv\nbiB7CiAgICAgICAgcmV0dXJuIF9kaWN0LmdldFRpbWVzdGFtcChfcnMsICgo\nTnVtYmVyKSBvYmopLmludFZhbHVlKCksIGNhbCk7CiAgICB9CgogICAgcHVi\nbGljIGJvb2xlYW4gd2FzTnVsbCgpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2Vw\ndGlvbiB7CiAgICAgICAgcmV0dXJuIF9ycy53YXNOdWxsKCk7CiAgICB9Cgog\nICAgcHJvdGVjdGVkIE9iamVjdCB0cmFuc2xhdGUoT2JqZWN0IG9iaiwgSm9p\nbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAg\nICAgaWYgKG9iaiBpbnN0YW5jZW9mIE51bWJlcikKICAgICAgICAgICAgcmV0\ndXJuIG9iajsKICAgICAgICByZXR1cm4gTnVtYmVycy52YWx1ZU9mKGZpbmRP\nYmplY3Qob2JqLCBqb2lucykpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0\ndXJuIHRoZSAxLWJhc2VkIHJlc3VsdCBzZXQgaW5kZXggZm9yIHRoZSBnaXZl\nbiBjb2x1bW4gb3IgaWQsIG9yIGEKICAgICAqIG5vbi1wb3NpdGl2ZSBudW1i\nZXIgaWYgdGhlIGNvbHVtbiBpcyBub3QgY29udGFpbmVkIGluIHRoaXMgcmVz\ndWx0LgogICAgICovCiAgICBwcm90ZWN0ZWQgaW50IGZpbmRPYmplY3QoT2Jq\nZWN0IG9iaiwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2Vw\ndGlvbiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIGdldFJl\nc3VsdFNldCgpLmZpbmRDb2x1bW4ob2JqLnRvU3RyaW5nKCkpOwogICAgICAg\nIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBzZSkgewogICAgICAgICAgICByZXR1\ncm4gMDsKICAgICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

