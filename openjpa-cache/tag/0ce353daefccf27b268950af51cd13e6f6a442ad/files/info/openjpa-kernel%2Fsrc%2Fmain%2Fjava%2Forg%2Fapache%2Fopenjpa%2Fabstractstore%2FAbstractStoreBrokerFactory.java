{"sha":"c07a240981deb72d00f8af4831dc51c7eb3ed1b3","node_id":"MDQ6QmxvYjIwNjM2NDpjMDdhMjQwOTgxZGViNzJkMDBmOGFmNDgzMWRjNTFjN2ViM2VkMWIz","size":5359,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/c07a240981deb72d00f8af4831dc51c7eb3ed1b3","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5hYnN0cmFjdHN0b3JlOwoKaW1wb3J0IGphdmEudXRpbC5NYXA7\nCmltcG9ydCBqYXZhLnV0aWwuUHJvcGVydGllczsKCmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEuY29uZi5PcGVuSlBBQ29uZmlndXJhdGlvbjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuQWJzdHJhY3RCcm9rZXJGYWN0\nb3J5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5Cb290c3Ry\nYXA7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkJyb2tlckZh\nY3Rvcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlN0b3Jl\nTWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5D\nb25maWd1cmF0aW9uUHJvdmlkZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEubGliLmNvbmYuQ29uZmlndXJhdGlvbnM7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLnV0aWwuVXNlckV4Y2VwdGlvbjsKCi8qKgogKiB7QGxpbmsg\nQnJva2VyRmFjdG9yeX0gaW1wbGVtZW50YXRpb24gZm9yIHVzZSB3aXRoIHRo\nZQogKiB7QGxpbmsgQWJzdHJhY3RTdG9yZU1hbmFnZXJ9LiBUaGlzIHByb3Zp\nZGVzIGludGVncmF0aW9uIGludG8gdGhlCiAqIHtAbGluayBCb290c3RyYXAj\nZ2V0QnJva2VyRmFjdG9yeSgpfSBib290c3RyYXBwaW5nIG1lY2hhbmlzbSwg\ndG8gZmFjaWxpdGF0ZQogKiB0aGUgcHJvY2VzcyBvZiBjcmVhdGluZyBhIHN1\nYmNsYXNzIG9mIHtAbGluayBBYnN0cmFjdFN0b3JlTWFuYWdlcn0uIE5ldwog\nKiBzdG9yZSBtYW5hZ2VyIGltcGxlbWVudGF0aW9ucyBuZWVkIG5vdCBleHRl\nbmQgdGhpcyBjbGFzcy4gSW5zdGVhZCwgc2V0IHRoZQogKiA8Y29kZT5vcmcu\nYXBhY2hlLm9wZW5qcGEuQnJva2VyRmFjdG9yeTwvY29kZT4gY29uZmlndXJh\ndGlvbiBwcm9wZXJ0eSB0bwogKiA8Y29kZT5hYnN0cmFjdHN0b3JlPC9jb2Rl\nPiwKICogYW5kIHNldCB0aGUgPGNvZGU+b3JnLmFwYWNoZS5vcGVuanBhLmFi\nc3RyYWN0c3RvcmUuQWJzdHJhY3RTdG9yZU1hbmFnZXI8L2NvZGU+CiAqIGNv\nbmZpZ3VyYXRpb24gcHJvcGVydHkgdG8gdGhlIGZ1bGwgY2xhc3MgbmFtZSBv\nZiB5b3VyIGltcGxlbWVudGF0aW9uLgogKiAgQWRkaXRpb25hbGx5LCB5b3Ug\nY2FuIG9wdGlvbmFsbHkgY3JlYXRlIHlvdXIgb3duCiAqIDxjb2RlPkJyb2tl\nckZhY3Rvcnk8L2NvZGU+IGltcGxlbWVudGF0aW9uLiBIb3dldmVyLCB3ZSBy\nZWNvbW1lbmQgdGhhdCB5b3UKICogdXNlIHRoZSA8Y29kZT5BYnN0cmFjdFN0\nb3JlQnJva2VyRmFjdG9yeTwvY29kZT4sIGFzIGl0IGRlYWxzIHdpdGggcG9v\nbGluZwogKiBhbmQgYm9vdHN0cmFwcGluZyBmcm9tIGEge0BsaW5rIE1hcH0g\nb2JqZWN0ICh0aGUgc3RyYXRlZ3kgdXNlZCBieQogKiB7QGxpbmsgQm9vdHN0\ncmFwfSB0byBjcmVhdGUgYSBmYWN0b3J5IGluIGEgdmVuZG9yLW5ldXRyYWwg\nbWFubmVyKS4KICovCnB1YmxpYyBjbGFzcyBBYnN0cmFjdFN0b3JlQnJva2Vy\nRmFjdG9yeQogICAgZXh0ZW5kcyBBYnN0cmFjdEJyb2tlckZhY3RvcnkgewoK\nICAgIC8qKgogICAgICogVGhlIHByb3BlcnR5IG5hbWUgdW5kZXIgd2hpY2gg\ndG8gbmFtZSB0aGUgY29uY3JldGUgc3RvcmUgbWFuYWdlcgogICAgICogY2xh\nc3MgZm9yIHRoaXMgcnVudGltZS4KICAgICAqLwogICAgcHVibGljIHN0YXRp\nYyBmaW5hbCBTdHJpbmcgUFJPUF9BQlNUUkFDVF9TVE9SRSA9CiAgICAgICAg\nIm9yZy5hcGFjaGUub3BlbmpwYS5hYnN0cmFjdHN0b3JlLkFic3RyYWN0U3Rv\ncmVNYW5hZ2VyIjsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6\nZXIgc19sb2MgPSBMb2NhbGl6ZXIuZm9yUGFja2FnZQogICAgICAgIChBYnN0\ncmFjdFN0b3JlQnJva2VyRmFjdG9yeS5jbGFzcyk7CgogICAgcHJpdmF0ZSBT\ndHJpbmcgX3N0b3JlQ2xzID0gbnVsbDsKICAgIHByaXZhdGUgU3RyaW5nIF9z\ndG9yZVByb3BzID0gbnVsbDsKICAgIHByaXZhdGUgU3RyaW5nIF9wbGF0Zm9y\nbSA9IG51bGw7CgogICAgLyoqCiAgICAgKiBGYWN0b3J5IG1ldGhvZCBmb3Ig\nb2J0YWluaW5nIGEgcG9zc2libHktcG9vbGVkIHtAbGluayBCcm9rZXJGYWN0\nb3J5fQogICAgICogZnJvbSBwcm9wZXJ0aWVzLiBJbnZva2VkIGZyb20ge0Bs\naW5rIEJvb3RzdHJhcCNnZXRCcm9rZXJGYWN0b3J5KCl9LgogICAgICovCiAg\nICBwdWJsaWMgc3RhdGljIEFic3RyYWN0U3RvcmVCcm9rZXJGYWN0b3J5IGdl\ndEluc3RhbmNlCiAgICAgICAgKENvbmZpZ3VyYXRpb25Qcm92aWRlciBjcCkg\newogICAgICAgIEFic3RyYWN0U3RvcmVCcm9rZXJGYWN0b3J5IGZhY3Rvcnkg\nPSAoQWJzdHJhY3RTdG9yZUJyb2tlckZhY3RvcnkpCiAgICAgICAgICAgIGdl\ndFBvb2xlZEZhY3RvcnkoY3AuZ2V0UHJvcGVydGllcygpKTsKICAgICAgICBp\nZiAoZmFjdG9yeSAhPSBudWxsKQogICAgICAgICAgICByZXR1cm4gZmFjdG9y\neTsKCiAgICAgICAgZmFjdG9yeSA9IG5ld0luc3RhbmNlKGNwKTsKICAgICAg\nICBmYWN0b3J5LnBvb2woKTsKICAgICAgICByZXR1cm4gZmFjdG9yeTsKICAg\nIH0KCiAgICAvKioKICAgICAqIEZhY3RvcnkgbWV0aG9kIGZvciBjb25zdHJ1\nY3RpbmcgYSB7QGxpbmsgQnJva2VyRmFjdG9yeX0KICAgICAqIGZyb20gcHJv\ncGVydGllcy4gSW52b2tlZCBmcm9tIHtAbGluayBCb290c3RyYXAjbmV3QnJv\na2VyRmFjdG9yeSgpfS4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBBYnN0\ncmFjdFN0b3JlQnJva2VyRmFjdG9yeSBuZXdJbnN0YW5jZQogICAgICAgIChD\nb25maWd1cmF0aW9uUHJvdmlkZXIgY3ApIHsKICAgICAgICAvLyB1c2UgYSB0\nbXAgc3RvcmUgbWFuYWdlciB0byBnZXQgbWV0YWRhdGEgYWJvdXQgdGhlIGNh\ncGFiaWxpdGllcyBvZgogICAgICAgIC8vIHRoaXMgcnVudGltZQogICAgICAg\nIE1hcCBtYXAgPSBjcC5nZXRQcm9wZXJ0aWVzKCk7CiAgICAgICAgU3RyaW5n\nIHN0b3JlUGx1Z2luID0gKFN0cmluZykgbWFwLmdldChQUk9QX0FCU1RSQUNU\nX1NUT1JFKTsKICAgICAgICBTdHJpbmcgc3RvcmVDbHMgPSBDb25maWd1cmF0\naW9ucy5nZXRDbGFzc05hbWUoc3RvcmVQbHVnaW4pOwogICAgICAgIFN0cmlu\nZyBzdG9yZVByb3BzID0gQ29uZmlndXJhdGlvbnMuZ2V0UHJvcGVydGllcyhz\ndG9yZVBsdWdpbik7CiAgICAgICAgQWJzdHJhY3RTdG9yZU1hbmFnZXIgc3Rv\ncmUgPSBjcmVhdGVTdG9yZU1hbmFnZXIoc3RvcmVDbHMsCiAgICAgICAgICAg\nIHN0b3JlUHJvcHMpOwoKICAgICAgICAvLyBwb3B1bGF0ZSBjb25maWd1cmF0\naW9uCiAgICAgICAgT3BlbkpQQUNvbmZpZ3VyYXRpb24gY29uZiA9IHN0b3Jl\nLm5ld0NvbmZpZ3VyYXRpb24oKTsKICAgICAgICBjcC5zZXRJbnRvKGNvbmYp\nOwogICAgICAgIGNvbmYuc3VwcG9ydGVkT3B0aW9ucygpLnJlbW92ZUFsbChz\ndG9yZS5nZXRVbnN1cHBvcnRlZE9wdGlvbnMoKSk7CgogICAgICAgIC8vIGNy\nZWF0ZSBhbmQgcG9vbCBhIG5ldyBmYWN0b3J5CiAgICAgICAgcmV0dXJuIG5l\ndyBBYnN0cmFjdFN0b3JlQnJva2VyRmFjdG9yeShjb25mLCBzdG9yZUNscywg\nc3RvcmVQcm9wcywKICAgICAgICAgICAgc3RvcmUuZ2V0UGxhdGZvcm0oKSk7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3QgdGhlIGZhY3Rvcnkg\nd2l0aCB0aGUgZ2l2ZW4gc2V0dGluZ3MuCiAgICAgKi8KICAgIHByb3RlY3Rl\nZCBBYnN0cmFjdFN0b3JlQnJva2VyRmFjdG9yeShPcGVuSlBBQ29uZmlndXJh\ndGlvbiBjb25mLAogICAgICAgIFN0cmluZyBzdG9yZUNscywgU3RyaW5nIHN0\nb3JlUHJvcHMsIFN0cmluZyBwbGF0Zm9ybSkgewogICAgICAgIHN1cGVyKGNv\nbmYpOwogICAgICAgIF9zdG9yZUNscyA9IHN0b3JlQ2xzOwogICAgICAgIF9z\ndG9yZVByb3BzID0gc3RvcmVQcm9wczsKICAgICAgICBfcGxhdGZvcm0gPSBw\nbGF0Zm9ybTsKICAgIH0KCiAgICBwdWJsaWMgUHJvcGVydGllcyBnZXRQcm9w\nZXJ0aWVzKCkgewogICAgICAgIFByb3BlcnRpZXMgcHJvcHMgPSBzdXBlci5n\nZXRQcm9wZXJ0aWVzKCk7CiAgICAgICAgcHJvcHMuc2V0UHJvcGVydHkoIlBs\nYXRmb3JtIiwgX3BsYXRmb3JtKTsKICAgICAgICByZXR1cm4gcHJvcHM7CiAg\nICB9CgogICAgcHJvdGVjdGVkIFN0b3JlTWFuYWdlciBuZXdTdG9yZU1hbmFn\nZXIoKSB7CiAgICAgICAgcmV0dXJuIGNyZWF0ZVN0b3JlTWFuYWdlcihfc3Rv\ncmVDbHMsIF9zdG9yZVByb3BzKTsKICAgIH0KCiAgICBwcml2YXRlIHN0YXRp\nYyBBYnN0cmFjdFN0b3JlTWFuYWdlciBjcmVhdGVTdG9yZU1hbmFnZXIoU3Ry\naW5nIGNscywKICAgICAgICBTdHJpbmcgcHJvcHMpIHsKICAgICAgICBBYnN0\ncmFjdFN0b3JlTWFuYWdlciBzdG9yZSA9IChBYnN0cmFjdFN0b3JlTWFuYWdl\ncikgQ29uZmlndXJhdGlvbnMuCiAgICAgICAgICAgIG5ld0luc3RhbmNlKGNs\ncywgQWJzdHJhY3RTdG9yZU1hbmFnZXIuY2xhc3MuZ2V0Q2xhc3NMb2FkZXIo\nKSk7CiAgICAgICAgQ29uZmlndXJhdGlvbnMuY29uZmlndXJlSW5zdGFuY2Uo\nc3RvcmUsIG51bGwsIHByb3BzLAogICAgICAgICAgICBQUk9QX0FCU1RSQUNU\nX1NUT1JFKTsKICAgICAgICBpZiAoc3RvcmUgPT0gbnVsbCkKICAgICAgICAg\nICAgdGhyb3cgbmV3IFVzZXJFeGNlcHRpb24oc19sb2MuZ2V0KCJuby1zdG9y\nZS1tYW5hZ2VyIiwKICAgICAgICAgICAgICAgIFBST1BfQUJTVFJBQ1RfU1RP\nUkUpKS5zZXRGYXRhbCh0cnVlKTsKCiAgICAgICAgcmV0dXJuIHN0b3JlOwoJ\nfQp9Cg==\n","encoding":"base64"}

