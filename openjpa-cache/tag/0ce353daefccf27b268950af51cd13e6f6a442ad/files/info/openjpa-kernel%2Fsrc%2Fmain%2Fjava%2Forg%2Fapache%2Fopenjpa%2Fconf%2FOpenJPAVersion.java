{"sha":"320e4e3d9bdd9c932123ef158fb15fb1c9f94702","node_id":"MDQ6QmxvYjIwNjM2NDozMjBlNGUzZDliZGQ5YzkzMjEyM2VmMTU4ZmIxNWZiMWM5Zjk0NzAy","size":4524,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/320e4e3d9bdd9c932123ef158fb15fb1c9f94702","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5jb25mOwoKaW1wb3J0IGphdmEuaW8uRmlsZTsKaW1wb3J0IGph\ndmEuaW8uSW5wdXRTdHJlYW07CmltcG9ydCBqYXZhLnV0aWwuUHJvcGVydGll\nczsKaW1wb3J0IGphdmEudXRpbC5TdHJpbmdUb2tlbml6ZXI7CgppbXBvcnQg\nb3JnLmFwYWNoZS5jb21tb25zLmxhbmcuU3RyaW5nVXRpbHM7CgovKioKICog\nVGhpcyBjbGFzcyBjb250YWlucyB2ZXJzaW9uIGluZm9ybWF0aW9uIGZvciBP\ncGVuSlBBLiBJdCB1c2VzCiAqIEFudCdzIGZpbHRlciB0b2tlbnMgdG8gY29u\ndmVydCB0aGUgdGVtcGxhdGUgaW50byBhIGphdmEKICogZmlsZSB3aXRoIGN1\ncnJlbnQgaW5mb3JtYXRpb24uCiAqCiAqIEBhdXRob3IgTWFyYyBQcnVkJ2hv\nbW1lYXV4LCBQYXRyaWNrIExpbnNrZXkKICovCnB1YmxpYyBjbGFzcyBPcGVu\nSlBBVmVyc2lvbiB7CgogICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcg\nVkVSU0lPTl9OVU1CRVI7CiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmlu\nZyBWRVJTSU9OX0lEOwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcg\nVkVORE9SX05BTUUgPSAiT3BlbkpQQSI7CiAgICBwdWJsaWMgc3RhdGljIGZp\nbmFsIGludCBNQUpPUl9SRUxFQVNFOwogICAgcHVibGljIHN0YXRpYyBmaW5h\nbCBpbnQgTUlOT1JfUkVMRUFTRTsKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwg\naW50IFBBVENIX1JFTEVBU0U7CiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIFN0\ncmluZyBSRUxFQVNFX1NUQVRVUzsKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwg\nU3RyaW5nIFJFVklTSU9OX05VTUJFUjsKCiAgICBzdGF0aWMgewogICAgICAg\nIFBhY2thZ2UgcGFjayA9IE9wZW5KUEFWZXJzaW9uLmNsYXNzLmdldFBhY2th\nZ2UoKTsKICAgICAgICBTdHJpbmcgdmVycyA9IHBhY2sgPT0gbnVsbCA/IG51\nbGwgOiBwYWNrLmdldEltcGxlbWVudGF0aW9uVmVyc2lvbigpOwogICAgICAg\nIGlmIChTdHJpbmdVdGlscy5pc0VtcHR5KHZlcnMpKQogICAgICAgICAgICB2\nZXJzID0gIjAuMC4wIjsKICAgICAgICBWRVJTSU9OX05VTUJFUiA9IHZlcnM7\nCgogICAgICAgIFN0cmluZ1Rva2VuaXplciB0b2sgPSBuZXcgU3RyaW5nVG9r\nZW5pemVyKFZFUlNJT05fTlVNQkVSLCAiLi0iKTsKICAgICAgICBpbnQgbWFq\nb3IsIG1pbm9yLCBwYXRjaDsKICAgICAgICB0cnkgewogICAgICAgICAgICBt\nYWpvciA9IHRvay5oYXNNb3JlVG9rZW5zKCkgPyBJbnRlZ2VyLnBhcnNlSW50\nKHRvay5uZXh0VG9rZW4oKSkgOiAwOwogICAgICAgIH0gY2F0Y2ggKEV4Y2Vw\ndGlvbiBlKSB7CiAgICAgICAgICAgIG1ham9yID0gMDsKICAgICAgICB9Cgog\nICAgICAgIHRyeSB7CiAgICAgICAgICAgIG1pbm9yID0gdG9rLmhhc01vcmVU\nb2tlbnMoKSA/IEludGVnZXIucGFyc2VJbnQodG9rLm5leHRUb2tlbigpKSA6\nIDA7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAg\nICAgbWlub3IgPSAwOwogICAgICAgIH0KCiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgcGF0Y2ggPSB0b2suaGFzTW9yZVRva2VucygpID8gSW50ZWdlci5w\nYXJzZUludCh0b2submV4dFRva2VuKCkpIDogMDsKICAgICAgICB9IGNhdGNo\nIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBwYXRjaCA9IDA7CiAgICAg\nICAgfQoKICAgICAgICBTdHJpbmcgcmV2aXNpb24gPSAiIjsKICAgICAgICB0\ncnkgewogICAgICAgICAgICBJbnB1dFN0cmVhbSBpbiA9IE9wZW5KUEFWZXJz\naW9uLmNsYXNzLmdldFJlc291cmNlQXNTdHJlYW0KICAgICAgICAgICAgICAg\nICgiL01FVEEtSU5GL29yZy5hcGFjaGUub3BlbmpwYS5yZXZpc2lvbi5wcm9w\nZXJ0aWVzIik7CiAgICAgICAgICAgIGlmIChpbiAhPSBudWxsKSB7CiAgICAg\nICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIFByb3BlcnRp\nZXMgcHJvcHMgPSBuZXcgUHJvcGVydGllcygpOwogICAgICAgICAgICAgICAg\nICAgIHByb3BzLmxvYWQoaW4pOwogICAgICAgICAgICAgICAgICAgIHJldmlz\naW9uID0gcHJvcHMuZ2V0UHJvcGVydHkoInJldmlzaW9uLm51bWJlciIpOwog\nICAgICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgICAg\nICBpbi5jbG9zZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9\nCiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICB9Cgog\nICAgICAgIE1BSk9SX1JFTEVBU0UgPSBtYWpvcjsKICAgICAgICBNSU5PUl9S\nRUxFQVNFID0gbWlub3I7CiAgICAgICAgUEFUQ0hfUkVMRUFTRSA9IHBhdGNo\nOwogICAgICAgIFJFTEVBU0VfU1RBVFVTID0gdG9rLmhhc01vcmVUb2tlbnMo\nKSA/IHRvay5uZXh0VG9rZW4oIiEiKSA6ICIiOwogICAgICAgIFJFVklTSU9O\nX05VTUJFUiA9IHJldmlzaW9uOwogICAgICAgIFZFUlNJT05fSUQgPSAib3Bl\nbmpwYS0iICsgVkVSU0lPTl9OVU1CRVIgKyAiLXIiICsgUkVWSVNJT05fTlVN\nQkVSOwogICAgfQoKICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmlu\nZyBbXSBhcmdzKSB7CiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKG5ldyBP\ncGVuSlBBVmVyc2lvbigpLnRvU3RyaW5nKCkpOwogICAgfQoKICAgIHB1Ymxp\nYyBTdHJpbmcgdG9TdHJpbmcoKSB7CiAgICAgICAgU3RyaW5nQnVmZmVyIGJ1\nZiA9IG5ldyBTdHJpbmdCdWZmZXIoODAgKiAzMCk7CiAgICAgICAgYXBwZW5k\nT3BlbkpQQUJhbm5lcihidWYpOwogICAgICAgIGJ1Zi5hcHBlbmQoIlxuIik7\nCgogICAgICAgIGFwcGVuZFByb3BlcnR5KCJvcy5uYW1lIiwgYnVmKS5hcHBl\nbmQoIlxuIik7CiAgICAgICAgYXBwZW5kUHJvcGVydHkoIm9zLnZlcnNpb24i\nLCBidWYpLmFwcGVuZCgiXG4iKTsKICAgICAgICBhcHBlbmRQcm9wZXJ0eSgi\nb3MuYXJjaCIsIGJ1ZikuYXBwZW5kKCJcblxuIik7CgogICAgICAgIGFwcGVu\nZFByb3BlcnR5KCJqYXZhLnZlcnNpb24iLCBidWYpLmFwcGVuZCgiXG4iKTsK\nICAgICAgICBhcHBlbmRQcm9wZXJ0eSgiamF2YS52ZW5kb3IiLCBidWYpLmFw\ncGVuZCgiXG5cbiIpOwoKICAgICAgICBidWYuYXBwZW5kKCJqYXZhLmNsYXNz\nLnBhdGg6XG4iKTsKICAgICAgICBTdHJpbmdUb2tlbml6ZXIgdG9rID0gbmV3\nIFN0cmluZ1Rva2VuaXplcgogICAgICAgICAgICAoU3lzdGVtLmdldFByb3Bl\ncnR5KCJqYXZhLmNsYXNzLnBhdGgiKSwgRmlsZS5wYXRoU2VwYXJhdG9yKTsK\nICAgICAgICB3aGlsZSAodG9rLmhhc01vcmVUb2tlbnMoKSkgewogICAgICAg\nICAgICBidWYuYXBwZW5kKCJcdCIpLmFwcGVuZCh0b2submV4dFRva2VuKCkp\nOwogICAgICAgICAgICBidWYuYXBwZW5kKCJcbiIpOwogICAgICAgIH0KICAg\nICAgICBidWYuYXBwZW5kKCJcbiIpOwoKICAgICAgICBhcHBlbmRQcm9wZXJ0\neSgidXNlci5kaXIiLCBidWYpOwogICAgICAgIHJldHVybiBidWYudG9TdHJp\nbmcoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBhcHBlbmRPcGVuSlBBQmFu\nbmVyKFN0cmluZ0J1ZmZlciBidWYpIHsKICAgICAgICBidWYuYXBwZW5kKFZF\nTkRPUl9OQU1FKS5hcHBlbmQoIiAiKTsKICAgICAgICBidWYuYXBwZW5kKFZF\nUlNJT05fTlVNQkVSKTsKICAgICAgICBidWYuYXBwZW5kKCJcbiIpOwogICAg\nICAgIGJ1Zi5hcHBlbmQoInZlcnNpb24gaWQ6ICIpLmFwcGVuZChWRVJTSU9O\nX0lEKTsKICAgICAgICBidWYuYXBwZW5kKCJcbiIpOwogICAgICAgIGJ1Zi5h\ncHBlbmQoIkFwYWNoZSBzdm4gcmV2aXNpb246ICIpLmFwcGVuZChSRVZJU0lP\nTl9OVU1CRVIpOwogICAgICAgIGJ1Zi5hcHBlbmQoIlxuIik7CiAgICB9Cgog\nICAgcHJpdmF0ZSBTdHJpbmdCdWZmZXIgYXBwZW5kUHJvcGVydHkoU3RyaW5n\nIHByb3AsIFN0cmluZ0J1ZmZlciBidWYpIHsKICAgICAgICByZXR1cm4gYnVm\nLmFwcGVuZChwcm9wKS5hcHBlbmQoIjogIikuYXBwZW5kKFN5c3RlbS5nZXRQ\ncm9wZXJ0eShwcm9wKSk7CiAgICB9Cn0K\n","encoding":"base64"}

