{"sha":"016d7efb5acc1e77ea688a0f924549ab7059ad7c","node_id":"MDQ6QmxvYjIwNjM2NDowMTZkN2VmYjVhY2MxZTc3ZWE2ODhhMGY5MjQ1NDlhYjcwNTlhZDdj","size":9917,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/016d7efb5acc1e77ea688a0f924549ab7059ad7c","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5kYXRhY2FjaGU7CgppbXBvcnQgamF2YS51dGlsLkFycmF5TGlz\ndDsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOwppbXBvcnQgamF2YS51\ndGlsLkhhc2hTZXQ7CmltcG9ydCBqYXZhLnV0aWwuSXRlcmF0b3I7CmltcG9y\ndCBqYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGphdmEudXRpbC5TZXQ7CgppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmNvbmYuT3BlbkpQQUNvbmZpZ3VyYXRp\nb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuZXZlbnQuUmVtb3RlQ29t\nbWl0RXZlbnQ7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuZXZlbnQuUmVt\nb3RlQ29tbWl0TGlzdGVuZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nbGliLmNvbmYuQ29uZmlndXJhYmxlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmxpYi5jb25mLkNvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEubGliLmxvZy5Mb2c7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEubGliLnV0aWwuTG9jYWxpemVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmxpYi51dGlsLmNvbmN1cnJlbnQuQWJzdHJhY3RDb25jdXJyZW50RXZl\nbnRNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGls\nLmNvbmN1cnJlbnQuQ29uY3VycmVudFJlZmVyZW5jZUhhc2hTZXQ7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5DbGFzc01ldGFEYXRhOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuTWV0YURhdGFSZXBvc2l0b3J5\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuSWQ7CgovKioKICog\nQWJzdHJhY3Qge0BsaW5rIFF1ZXJ5Q2FjaGV9IGltcGxlbWVudGF0aW9uIHRo\nYXQgcHJvdmlkZXMgdmFyaW91cwogKiBzdGF0aXN0aWNzLCBsb2dnaW5nLCBh\nbmQgdGltZW91dCBmdW5jdGlvbmFsaXR5IGNvbW1vbiBhY3Jvc3MgY2FjaGUK\nICogaW1wbGVtZW50YXRpb25zLgogKgogKiBAYXV0aG9yIFBhdHJpY2sgTGlu\nc2tleQogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKi8KcHVibGljIGFic3RyYWN0\nIGNsYXNzIEFic3RyYWN0UXVlcnlDYWNoZQogICAgZXh0ZW5kcyBBYnN0cmFj\ndENvbmN1cnJlbnRFdmVudE1hbmFnZXIgCiAgICBpbXBsZW1lbnRzIFF1ZXJ5\nQ2FjaGUsIENvbmZpZ3VyYWJsZSB7CgogICAgcHJpdmF0ZSBzdGF0aWMgZmlu\nYWwgTG9jYWxpemVyIHNfbG9jID0KICAgICAgICBMb2NhbGl6ZXIuZm9yUGFj\na2FnZShBYnN0cmFjdFF1ZXJ5Q2FjaGUuY2xhc3MpOwoKICAgIC8qKgogICAg\nICogVGhlIGNvbmZpZ3VyYXRpb24gc2V0IGJ5IHRoZSBzeXN0ZW0uCiAgICAg\nKi8KICAgIHByb3RlY3RlZCBPcGVuSlBBQ29uZmlndXJhdGlvbiBjb25mOwoK\nICAgIC8qKgogICAgICogVGhlIGxvZyB0byB1c2UuCiAgICAgKi8KICAgIHBy\nb3RlY3RlZCBMb2cgbG9nOwoKICAgIHByaXZhdGUgYm9vbGVhbiBfY2xvc2Vk\nID0gZmFsc2U7CgogICAgcHVibGljIHZvaWQgaW5pdGlhbGl6ZShEYXRhQ2Fj\naGVNYW5hZ2VyIG1hbmFnZXIpIHsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBv\nblR5cGVzQ2hhbmdlZChUeXBlc0NoYW5nZWRFdmVudCBldikgewogICAgICAg\nIHdyaXRlTG9jaygpOwogICAgICAgIENvbGxlY3Rpb24ga2V5cyA9IG51bGw7\nCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKGhhc0xpc3RlbmVycygp\nKQogICAgICAgICAgICAgICAgZmlyZUV2ZW50KGV2KTsKICAgICAgICAgICAg\na2V5cyA9IGtleVNldCgpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAg\nICAgIHdyaXRlVW5sb2NrKCk7CiAgICAgICAgfQoKICAgICAgICBRdWVyeUtl\neSBxazsKICAgICAgICBMaXN0IHJlbW92ZXMgPSBudWxsOwogICAgICAgIGZv\nciAoSXRlcmF0b3IgaXRlciA9IGtleXMuaXRlcmF0b3IoKTsgaXRlci5oYXNO\nZXh0KCk7KSB7CiAgICAgICAgICAgIHFrID0gKFF1ZXJ5S2V5KSBpdGVyLm5l\neHQoKTsKICAgICAgICAgICAgaWYgKHFrLmNoYW5nZUludmFsaWRhdGVzUXVl\ncnkoZXYuZ2V0VHlwZXMoKSkpIHsKICAgICAgICAgICAgICAgIGlmIChyZW1v\ndmVzID09IG51bGwpCiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlcyA9IG5l\ndyBBcnJheUxpc3QoKTsKICAgICAgICAgICAgICAgIHJlbW92ZXMuYWRkKHFr\nKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAocmVtb3Zl\ncyAhPSBudWxsKQogICAgICAgICAgICByZW1vdmVBbGxJbnRlcm5hbChyZW1v\ndmVzKTsKICAgIH0KCiAgICBwdWJsaWMgUXVlcnlSZXN1bHQgZ2V0KFF1ZXJ5\nS2V5IGtleSkgewogICAgICAgIFF1ZXJ5UmVzdWx0IG8gPSBnZXRJbnRlcm5h\nbChrZXkpOwogICAgICAgIGlmIChvICE9IG51bGwgJiYgby5pc1RpbWVkT3V0\nKCkpIHsKICAgICAgICAgICAgbyA9IG51bGw7CiAgICAgICAgICAgIHJlbW92\nZUludGVybmFsKGtleSk7CiAgICAgICAgICAgIGlmIChsb2cuaXNUcmFjZUVu\nYWJsZWQoKSkKICAgICAgICAgICAgICAgIGxvZy50cmFjZShzX2xvYy5nZXQo\nImNhY2hlLXRpbWVvdXQiLCBrZXkpKTsKICAgICAgICB9CgogICAgICAgIGlm\nIChsb2cuaXNUcmFjZUVuYWJsZWQoKSkgewogICAgICAgICAgICBpZiAobyA9\nPSBudWxsKQogICAgICAgICAgICAgICAgbG9nLnRyYWNlKHNfbG9jLmdldCgi\nY2FjaGUtbWlzcyIsIGtleSkpOwogICAgICAgICAgICBlbHNlCiAgICAgICAg\nICAgICAgICBsb2cudHJhY2Uoc19sb2MuZ2V0KCJjYWNoZS1oaXQiLCBrZXkp\nKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG87CiAgICB9CgogICAgcHVi\nbGljIFF1ZXJ5UmVzdWx0IHB1dChRdWVyeUtleSBxaywgUXVlcnlSZXN1bHQg\nb2lkcykgewogICAgICAgIFF1ZXJ5UmVzdWx0IG8gPSBwdXRJbnRlcm5hbChx\naywgb2lkcyk7CiAgICAgICAgaWYgKGxvZy5pc1RyYWNlRW5hYmxlZCgpKQog\nICAgICAgICAgICBsb2cudHJhY2Uoc19sb2MuZ2V0KCJjYWNoZS1wdXQiLCBx\naykpOwogICAgICAgIHJldHVybiAobyA9PSBudWxsIHx8IG8uaXNUaW1lZE91\ndCgpKSA/IG51bGwgOiBvOwogICAgfQoKICAgIHB1YmxpYyBRdWVyeVJlc3Vs\ndCByZW1vdmUoUXVlcnlLZXkga2V5KSB7CiAgICAgICAgUXVlcnlSZXN1bHQg\nbyA9IHJlbW92ZUludGVybmFsKGtleSk7CiAgICAgICAgaWYgKG8gIT0gbnVs\nbCAmJiBvLmlzVGltZWRPdXQoKSkKICAgICAgICAgICAgbyA9IG51bGw7CiAg\nICAgICAgaWYgKGxvZy5pc1RyYWNlRW5hYmxlZCgpKSB7CiAgICAgICAgICAg\nIGlmIChvID09IG51bGwpCiAgICAgICAgICAgICAgICBsb2cudHJhY2Uoc19s\nb2MuZ2V0KCJjYWNoZS1yZW1vdmUtbWlzcyIsIGtleSkpOwogICAgICAgICAg\nICBlbHNlCiAgICAgICAgICAgICAgICBsb2cudHJhY2Uoc19sb2MuZ2V0KCJj\nYWNoZS1yZW1vdmUtaGl0Iiwga2V5KSk7CiAgICAgICAgfQogICAgICAgIHJl\ndHVybiBvOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIHBpbihRdWVyeUtl\neSBrZXkpIHsKICAgICAgICBib29sZWFuIGJvb2wgPSBwaW5JbnRlcm5hbChr\nZXkpOwogICAgICAgIGlmIChsb2cuaXNUcmFjZUVuYWJsZWQoKSkgewogICAg\nICAgICAgICBpZiAoYm9vbCkKICAgICAgICAgICAgICAgIGxvZy50cmFjZShz\nX2xvYy5nZXQoImNhY2hlLXBpbi1oaXQiLCBrZXkpKTsKICAgICAgICAgICAg\nZWxzZQogICAgICAgICAgICAgICAgbG9nLnRyYWNlKHNfbG9jLmdldCgiY2Fj\naGUtcGluLW1pc3MiLCBrZXkpKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJu\nIGJvb2w7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gdW5waW4oUXVlcnlL\nZXkga2V5KSB7CiAgICAgICAgYm9vbGVhbiBib29sID0gdW5waW5JbnRlcm5h\nbChrZXkpOwogICAgICAgIGlmIChsb2cuaXNUcmFjZUVuYWJsZWQoKSkgewog\nICAgICAgICAgICBpZiAoYm9vbCkKICAgICAgICAgICAgICAgIGxvZy50cmFj\nZShzX2xvYy5nZXQoImNhY2hlLXVucGluLWhpdCIsIGtleSkpOwogICAgICAg\nICAgICBlbHNlCiAgICAgICAgICAgICAgICBsb2cudHJhY2Uoc19sb2MuZ2V0\nKCJjYWNoZS11bnBpbi1taXNzIiwga2V5KSk7CiAgICAgICAgfQogICAgICAg\nIHJldHVybiBib29sOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGNsZWFyKCkg\newogICAgICAgIGNsZWFySW50ZXJuYWwoKTsKICAgICAgICBpZiAobG9nLmlz\nVHJhY2VFbmFibGVkKCkpCiAgICAgICAgICAgIGxvZy50cmFjZShzX2xvYy5n\nZXQoImNhY2hlLWNsZWFyIiwgIjxxdWVyeS1jYWNoZT4iKSk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgY2xvc2UoKSB7CiAgICAgICAgY2xvc2UodHJ1ZSk7\nCiAgICB9CgogICAgcHJvdGVjdGVkIHZvaWQgY2xvc2UoYm9vbGVhbiBjbGVh\ncikgewogICAgICAgIGlmICghX2Nsb3NlZCkgewogICAgICAgICAgICBpZiAo\nY2xlYXIpCiAgICAgICAgICAgICAgICBjbGVhckludGVybmFsKCk7CiAgICAg\nICAgICAgIF9jbG9zZWQgPSB0cnVlOwogICAgICAgIH0KICAgIH0KCiAgICBw\ndWJsaWMgYm9vbGVhbiBpc0Nsb3NlZCgpIHsKICAgICAgICByZXR1cm4gX2Ns\nb3NlZDsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBhZGRUeXBlc0NoYW5nZWRM\naXN0ZW5lcihUeXBlc0NoYW5nZWRMaXN0ZW5lciBsaXN0ZW4pIHsKICAgICAg\nICBhZGRMaXN0ZW5lcihsaXN0ZW4pOwogICAgfQoKICAgIHB1YmxpYyBib29s\nZWFuIHJlbW92ZVR5cGVzQ2hhbmdlZExpc3RlbmVyKFR5cGVzQ2hhbmdlZExp\nc3RlbmVyIGxpc3RlbikgewogICAgICAgIHJldHVybiByZW1vdmVMaXN0ZW5l\ncihsaXN0ZW4pOwogICAgfQoKICAgIC8qKgogICAgICogVGhpcyBtZXRob2Qg\naXMgcGFydCBvZiB0aGUge0BsaW5rIFJlbW90ZUNvbW1pdExpc3RlbmVyfSBp\nbnRlcmZhY2UuIElmCiAgICAgKiB5b3VyIGNhY2hlIHN1YmNsYXNzIHJlbGll\ncyBvbiBPcGVuSlBBIGZvciBjbHVzdGVyaW5nIHN1cHBvcnQsIG1ha2UgaXQK\nICAgICAqIGltcGxlbWVudCA8Y29kZT5SZW1vdGVDb21taXRMaXN0ZW5lcjwv\nY29kZT4uIFRoaXMgbWV0aG9kIHdpbGwgdGFrZQogICAgICogY2FyZSBvZiBp\nbnZhbGlkYXRpbmcgZW50cmllcyBmcm9tIHJlbW90ZSBjb21taXRzLCBieSBk\nZWxlZ2F0aW5nIHRvCiAgICAgKiB7QGxpbmsgI29uVHlwZXNDaGFuZ2VkfS4K\nICAgICAqLwogICAgcHVibGljIHZvaWQgYWZ0ZXJDb21taXQoUmVtb3RlQ29t\nbWl0RXZlbnQgZXZlbnQpIHsKICAgICAgICBpZiAoX2Nsb3NlZCkKICAgICAg\nICAgICAgcmV0dXJuOwoKICAgICAgICAvLyBkcm9wIGFsbCBjb21taXR0ZWQg\nY2xhc3NlcwogICAgICAgIFNldCBjbGFzc2VzID0gQ2FjaGVzLmFkZFR5cGVz\nQnlOYW1lKGNvbmYsCiAgICAgICAgICAgIGV2ZW50LmdldFBlcnNpc3RlZFR5\ncGVOYW1lcygpLCBudWxsKTsKICAgICAgICBpZiAoZXZlbnQuZ2V0UGF5bG9h\nZFR5cGUoKSA9PSBSZW1vdGVDb21taXRFdmVudC5QQVlMT0FEX0VYVEVOVFMp\nIHsKICAgICAgICAgICAgY2xhc3NlcyA9IENhY2hlcy5hZGRUeXBlc0J5TmFt\nZShjb25mLCBldmVudC5nZXRVcGRhdGVkVHlwZU5hbWVzKCksCiAgICAgICAg\nICAgICAgICBjbGFzc2VzKTsKICAgICAgICAgICAgY2xhc3NlcyA9IENhY2hl\ncy5hZGRUeXBlc0J5TmFtZShjb25mLCBldmVudC5nZXREZWxldGVkVHlwZU5h\nbWVzKCksCiAgICAgICAgICAgICAgICBjbGFzc2VzKTsKICAgICAgICB9IGVs\nc2UgewogICAgICAgICAgICBjbGFzc2VzID0gYWRkVHlwZXMoZXZlbnQuZ2V0\nVXBkYXRlZE9iamVjdElkcygpLCBjbGFzc2VzKTsKICAgICAgICAgICAgY2xh\nc3NlcyA9IGFkZFR5cGVzKGV2ZW50LmdldERlbGV0ZWRPYmplY3RJZHMoKSwg\nY2xhc3Nlcyk7CiAgICAgICAgfQogICAgICAgIGlmIChjbGFzc2VzICE9IG51\nbGwpCiAgICAgICAgICAgIG9uVHlwZXNDaGFuZ2VkKG5ldyBUeXBlc0NoYW5n\nZWRFdmVudCh0aGlzLCBjbGFzc2VzKSk7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBCdWlsZCB1cCBhIHNldCBvZiBjbGFzc2VzIGZvciB0aGUgZ2l2ZW4gb2lk\ncy4KICAgICAqLwogICAgcHJpdmF0ZSBTZXQgYWRkVHlwZXMoQ29sbGVjdGlv\nbiBvaWRzLCBTZXQgY2xhc3NlcykgewogICAgICAgIGlmIChvaWRzLmlzRW1w\ndHkoKSkKICAgICAgICAgICAgcmV0dXJuIGNsYXNzZXM7CiAgICAgICAgaWYg\nKGNsYXNzZXMgPT0gbnVsbCkKICAgICAgICAgICAgY2xhc3NlcyA9IG5ldyBI\nYXNoU2V0KCk7CgogICAgICAgIE1ldGFEYXRhUmVwb3NpdG9yeSByZXBvcyA9\nIGNvbmYuZ2V0TWV0YURhdGFSZXBvc2l0b3J5SW5zdGFuY2UoKTsKICAgICAg\nICBDbGFzc01ldGFEYXRhIG1ldGE7CiAgICAgICAgT2JqZWN0IG9pZDsKICAg\nICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9IG9pZHMuaXRlcmF0b3IoKTsgaXRy\nLmhhc05leHQoKTspIHsKICAgICAgICAgICAgb2lkID0gaXRyLm5leHQoKTsK\nICAgICAgICAgICAgaWYgKG9pZCBpbnN0YW5jZW9mIElkKQogICAgICAgICAg\nICAgICAgY2xhc3Nlcy5hZGQoKChJZCkgb2lkKS5nZXRUeXBlKCkpOwogICAg\nICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIG9rIGlmIG5vIG1l\ndGFkYXRhIGZvciBvaWQ7IHRoYXQganVzdCBtZWFucyB0aGUgcGMgdHlwZQog\nICAgICAgICAgICAgICAgLy8gcHJvYmFibHkgaGFzbid0IGJlZW4gbG9hZGVk\nIGludG8gdGhpcyBKVk0geWV0LCBhbmQgdGhlcmVmb3JlCiAgICAgICAgICAg\nICAgICAvLyB0aGVyZSdzIG5vIGNoYW5jZSB0aGF0IGl0J3MgaW4gdGhlIGNh\nY2hlIGFueXdheQogICAgICAgICAgICAgICAgbWV0YSA9IHJlcG9zLmdldE1l\ndGFEYXRhKG9pZCwgbnVsbCwgZmFsc2UpOwogICAgICAgICAgICAgICAgaWYg\nKG1ldGEgIT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICBjbGFzc2VzLmFk\nZChtZXRhLmdldERlc2NyaWJlZFR5cGUoKSk7CiAgICAgICAgICAgIH0KICAg\nICAgICB9CiAgICAgICAgcmV0dXJuIGNsYXNzZXM7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBSZXR1cm4gYSB0aHJlYWRzYWZlIHZpZXcgb2YgdGhlIGtleXMg\naW4gdGhpcyBjYWNoZS4gVGhpcyBjb2xsZWN0aW9uCiAgICAgKiBtdXN0IGJl\nIGl0ZXJhYmxlIHdpdGhvdXQgcmlzayBvZiBjb25jdXJyZW50IG1vZGlmaWNh\ndGlvbiBleGNlcHRpb25zLgogICAgICogSXQgZG9lcyBub3QgaGF2ZSB0byBp\nbXBsZW1lbnQgY29udGFpbnMoKSBlZmZpY2llbnRseSBvciB1c2Ugc2V0CiAg\nICAgKiBzZW1hbnRpY3MuCiAgICAgKi8KICAgIHByb3RlY3RlZCBhYnN0cmFj\ndCBDb2xsZWN0aW9uIGtleVNldCgpOwoKICAgIC8qKgogICAgICogUmV0dXJu\nIHRoZSBsaXN0IGZvciB0aGUgZ2l2ZW4ga2V5LgogICAgICovCiAgICBwcm90\nZWN0ZWQgYWJzdHJhY3QgUXVlcnlSZXN1bHQgZ2V0SW50ZXJuYWwoUXVlcnlL\nZXkgcWspOwoKICAgIC8qKgogICAgICogQWRkIHRoZSBnaXZlbiByZXN1bHQg\ndG8gdGhlIGNhY2hlLCByZXR1cm5pbmcgdGhlIG9sZCByZXN1bHQgdW5kZXIg\ndGhlCiAgICAgKiBnaXZlbiBrZXkuCiAgICAgKi8KICAgIHByb3RlY3RlZCBh\nYnN0cmFjdCBRdWVyeVJlc3VsdCBwdXRJbnRlcm5hbChRdWVyeUtleSBxaywg\nUXVlcnlSZXN1bHQgb2lkcyk7CgogICAgLyoqCiAgICAgKiBSZW1vdmUgdGhl\nIHJlc3VsdCB1bmRlciB0aGUgZ2l2ZW4ga2V5IGZyb20gdGhlIGNhY2hlLgog\nICAgICovCiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgUXVlcnlSZXN1bHQgcmVt\nb3ZlSW50ZXJuYWwoUXVlcnlLZXkgcWspOwoKICAgIC8qKgogICAgICogUmVt\nb3ZlIGFsbCByZXN1bHRzIHVuZGVyIHRoZSBnaXZlbiBrZXlzIGZyb20gdGhl\nIGNhY2hlLgogICAgICovCiAgICBwcm90ZWN0ZWQgdm9pZCByZW1vdmVBbGxJ\nbnRlcm5hbChDb2xsZWN0aW9uIHFrcykgewogICAgICAgIGZvciAoSXRlcmF0\nb3IgaXRlciA9IHFrcy5pdGVyYXRvcigpOyBpdGVyLmhhc05leHQoKTspCiAg\nICAgICAgICAgIHJlbW92ZUludGVybmFsKChRdWVyeUtleSkgaXRlci5uZXh0\nKCkpOwogICAgfQoKICAgIC8qKgogICAgICogQ2xlYXIgdGhlIGNhY2hlLgog\nICAgICovCiAgICBwcm90ZWN0ZWQgYWJzdHJhY3Qgdm9pZCBjbGVhckludGVy\nbmFsKCk7CgogICAgLyoqCiAgICAgKiBQaW4gYW4gb2JqZWN0IHRvIHRoZSBj\nYWNoZS4KICAgICAqLwogICAgcHJvdGVjdGVkIGFic3RyYWN0IGJvb2xlYW4g\ncGluSW50ZXJuYWwoUXVlcnlLZXkgcWspOwoKICAgIC8qKgogICAgICogVW5w\naW4gYW4gb2JqZWN0IGZyb20gdGhlIGNhY2hlLgogICAgICovCiAgICBwcm90\nZWN0ZWQgYWJzdHJhY3QgYm9vbGVhbiB1bnBpbkludGVybmFsKFF1ZXJ5S2V5\nIHFrKTsKCiAgICAvLyAtLS0tLS0tLS0tIENvbmZpZ3VyYWJsZSBpbXBsZW1l\nbnRhdGlvbiAtLS0tLS0tLS0tCgogICAgcHVibGljIHZvaWQgc2V0Q29uZmln\ndXJhdGlvbihDb25maWd1cmF0aW9uIGNvbmYpIHsKICAgICAgICB0aGlzLmNv\nbmYgPSAoT3BlbkpQQUNvbmZpZ3VyYXRpb24pIGNvbmY7CiAgICAgICAgdGhp\ncy5sb2cgPSBjb25mLmdldExvZyhPcGVuSlBBQ29uZmlndXJhdGlvbi5MT0df\nREFUQUNBQ0hFKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzdGFydENvbmZp\nZ3VyYXRpb24oKSB7CiAgICB9CgogICAgcHVibGljIHZvaWQgZW5kQ29uZmln\ndXJhdGlvbigpIHsKICAgIH0KCiAgICAvLyAtLS0tLS0tLS0tIEFic3RyYWN0\nRXZlbnRNYW5hZ2VyIGltcGxlbWVudGF0aW9uIC0tLS0tLS0tLS0KCiAgICBw\ncm90ZWN0ZWQgdm9pZCBmaXJlRXZlbnQoT2JqZWN0IGV2ZW50LCBPYmplY3Qg\nbGlzdGVuZXIpIHsKICAgICAgICBUeXBlc0NoYW5nZWRMaXN0ZW5lciBsaXN0\nZW4gPSAoVHlwZXNDaGFuZ2VkTGlzdGVuZXIpIGxpc3RlbmVyOwogICAgICAg\nIFR5cGVzQ2hhbmdlZEV2ZW50IGV2ID0gKFR5cGVzQ2hhbmdlZEV2ZW50KSBl\ndmVudDsKICAgICAgICB0cnkgewogICAgICAgICAgICBsaXN0ZW4ub25UeXBl\nc0NoYW5nZWQoZXYpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7\nCiAgICAgICAgICAgIGlmIChsb2cuaXNXYXJuRW5hYmxlZCgpKQogICAgICAg\nICAgICAgICAgbG9nLndhcm4oc19sb2MuZ2V0KCJleHAtbGlzdGVuZXItZXgi\nKSwgZSk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogSW5kaXZp\nZHVhbCBxdWVyeSByZXN1bHRzIHdpbGwgYmUgcmVnaXN0ZXJlZCBhcyB0eXBl\ncyBjaGFuZ2VkCiAgICAgKiBsaXN0ZW5lcnMuIFdlIHdhbnQgc3VjaCBxdWVy\neSByZXN1bHRzIHRvIGJlIGdjJ2Qgb25jZQogICAgICogdGhlIG9ubHkgcmVm\nZXJlbmNlIGlzIGhlbGQgYnkgdGhlIGxpc3Qgb2YgZXhwaXJhdGlvbiBsaXN0\nZW5lcnMuCiAgICAgKi8KICAgIHByb3RlY3RlZCBDb2xsZWN0aW9uIG5ld0xp\nc3RlbmVyQ29sbGVjdGlvbigpIHsKICAgICAgICByZXR1cm4gbmV3IENvbmN1\ncnJlbnRSZWZlcmVuY2VIYXNoU2V0IChDb25jdXJyZW50UmVmZXJlbmNlSGFz\naFNldC5XRUFLKTsKCX0KfQo=\n","encoding":"base64"}

