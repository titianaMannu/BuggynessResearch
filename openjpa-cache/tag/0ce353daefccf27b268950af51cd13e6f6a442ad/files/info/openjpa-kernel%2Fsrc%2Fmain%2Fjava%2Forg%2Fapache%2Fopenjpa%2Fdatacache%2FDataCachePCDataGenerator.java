{"sha":"5da7db4d99f93f23da175a52d6297a7ed9899b6f","node_id":"MDQ6QmxvYjIwNjM2NDo1ZGE3ZGI0ZDk5ZjkzZjIzZGExNzVhNTJkNjI5N2E3ZWQ5ODk5YjZm","size":9094,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/5da7db4d99f93f23da175a52d6297a7ed9899b6f","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5kYXRhY2FjaGU7CgppbXBvcnQgamF2YS51dGlsLkFycmF5TGlz\ndDsKaW1wb3J0IGphdmEudXRpbC5BcnJheXM7CmltcG9ydCBqYXZhLnV0aWwu\nQ29sbGVjdGlvbjsKaW1wb3J0IGphdmEudXRpbC5IYXNoU2V0OwppbXBvcnQg\namF2YS51dGlsLlNldDsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuY29u\nZi5PcGVuSlBBQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5lbmhhbmNlLlBDRGF0YUdlbmVyYXRvcjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5rZXJuZWwuQWJzdHJhY3RQQ0RhdGE7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEua2VybmVsLk9wZW5KUEFTdGF0ZU1hbmFnZXI7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlN0b3JlQ29udGV4dDsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkNsYXNzTWV0YURhdGE7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5GaWVsZE1ldGFEYXRh\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuSmF2YVR5cGVzOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuVmFsdWVNZXRhRGF0YTsK\naW1wb3J0IHNlcnAuYnl0ZWNvZGUuQkNDbGFzczsKaW1wb3J0IHNlcnAuYnl0\nZWNvZGUuQkNGaWVsZDsKaW1wb3J0IHNlcnAuYnl0ZWNvZGUuQkNNZXRob2Q7\nCmltcG9ydCBzZXJwLmJ5dGVjb2RlLkNvZGU7CmltcG9ydCBzZXJwLmJ5dGVj\nb2RlLkluc3RydWN0aW9uOwppbXBvcnQgc2VycC5ieXRlY29kZS5KdW1wSW5z\ndHJ1Y3Rpb247CgovKioKICogQSB7QGxpbmsgUENEYXRhR2VuZXJhdG9yfSBp\nbnN0YW5jZSB3aGljaCBnZW5lcmF0ZXMgcHJvcGVybHkKICogc3luY2hyb25p\nemVkIGluc3RhbmNlcyBzdWl0YWJsZSBmb3IgdXNlIGluIHRoZSBjYWNoZS4g\nSW4gYWRkaXRpb24sCiAqIHByb3BlciB0aW1lZCBiZWhhdmlvciBpcyBhZGRl\nZC4KICoKICogQGF1dGhvciBTdGV2ZSBLaW0KICogQHNpbmNlIDAuMy4zLjAK\nICovCnB1YmxpYyBjbGFzcyBEYXRhQ2FjaGVQQ0RhdGFHZW5lcmF0b3IgZXh0\nZW5kcyBQQ0RhdGFHZW5lcmF0b3IgewoKICAgIHB1YmxpYyBzdGF0aWMgZmlu\nYWwgU3RyaW5nIFBPU1RGSVggPSAiZGF0YWNhY2hlIjsKCiAgICBwcml2YXRl\nIHN0YXRpYyBmaW5hbCBTZXQgX3N5bmNocyA9IG5ldyBIYXNoU2V0KEFycmF5\ncy5hc0xpc3QKICAgICAgICAobmV3IFN0cmluZyBbXXsgImdldERhdGEiLCAi\nc2V0RGF0YSIsICJjbGVhckRhdGEiLCAiZ2V0SW1wbERhdGEiLAogICAgICAg\nICAgICAic2V0SW1wbERhdGEiLCAic2V0SW50ZXJtZWRpYXRlIiwgImdldElu\ndGVybWVkaWF0ZSIsCiAgICAgICAgICAgICJpc0xvYWRlZCIsICJzZXRMb2Fk\nZWQiLCAic2V0VmVyc2lvbiIsICJnZXRWZXJzaW9uIiwgInN0b3JlIgogICAg\nICAgIH0pKTsKCiAgICBwdWJsaWMgRGF0YUNhY2hlUENEYXRhR2VuZXJhdG9y\nKE9wZW5KUEFDb25maWd1cmF0aW9uIGNvbmYpIHsKICAgICAgICBzdXBlcihj\nb25mKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgU3RyaW5nIGdldFVuaXF1ZU5h\nbWUoQ2xhc3MgdHlwZSkgewogICAgICAgIHJldHVybiBzdXBlci5nZXRVbmlx\ndWVOYW1lKHR5cGUpICsgUE9TVEZJWDsKICAgIH0KCiAgICBwcm90ZWN0ZWQg\ndm9pZCBmaW5pc2goRHluYW1pY1BDRGF0YSBkYXRhLCBDbGFzc01ldGFEYXRh\nIG1ldGEpIHsKICAgICAgICBpbnQgdGltZW91dCA9IG1ldGEuZ2V0RGF0YUNh\nY2hlVGltZW91dCgpOwogICAgICAgIGlmICh0aW1lb3V0ID4gMCkKICAgICAg\nICAgICAgKChUaW1lZCkgZGF0YSkuc2V0VGltZW91dCh0aW1lb3V0ICsgU3lz\ndGVtLmN1cnJlbnRUaW1lTWlsbGlzKCkpOwogICAgICAgIGVsc2UKICAgICAg\nICAgICAgKChUaW1lZCkgZGF0YSkuc2V0VGltZW91dCgtMSk7CiAgICB9Cgog\nICAgcHJvdGVjdGVkIHZvaWQgZGVjb3JhdGUoQkNDbGFzcyBiYywgQ2xhc3NN\nZXRhRGF0YSBtZXRhKSB7CiAgICAgICAgZW5oYW5jZVRvRGF0YShiYyk7CiAg\nICAgICAgZW5oYW5jZVRvTmVzdGVkRGF0YShiYyk7CiAgICAgICAgcmVwbGFj\nZU5ld0VtYmVkZGVkUENEYXRhKGJjKTsKICAgICAgICBhZGRTeW5jaHJvbml6\nYXRpb24oYmMpOwogICAgICAgIGFkZFRpbWVvdXQoYmMpOwogICAgfQoKICAg\nIHByaXZhdGUgdm9pZCBlbmhhbmNlVG9EYXRhKEJDQ2xhc3MgYmMpIHsKICAg\nICAgICBCQ01ldGhvZCBtZXRoID0gYmMuZGVjbGFyZU1ldGhvZCgidG9EYXRh\nIiwgT2JqZWN0LmNsYXNzLAogICAgICAgICAgICBuZXcgQ2xhc3MgW117IEZp\nZWxkTWV0YURhdGEuY2xhc3MsIE9iamVjdC5jbGFzcywgCiAgICAgICAgICAg\nIFN0b3JlQ29udGV4dC5jbGFzcyB9KTsKICAgICAgICBDb2RlIGNvZGUgPSBt\nZXRoLmdldENvZGUodHJ1ZSk7CiAgICAgICAgLy8gaWYgKGZtZC5pc0xSUyAo\nKSkpCiAgICAgICAgLy8gCQlyZXR1cm4gTlVMTDsKICAgICAgICBjb2RlLmFs\nb2FkKCkuc2V0UGFyYW0oMCk7CiAgICAgICAgY29kZS5pbnZva2V2aXJ0dWFs\nKCkuc2V0TWV0aG9kKEZpZWxkTWV0YURhdGEuY2xhc3MsICJpc0xSUyIsCiAg\nICAgICAgICAgIGJvb2xlYW4uY2xhc3MsIG51bGwpOwogICAgICAgIEp1bXBJ\nbnN0cnVjdGlvbiBpZmlucyA9IGNvZGUuaWZlcSgpOwogICAgICAgIGNvZGUu\nZ2V0c3RhdGljKCkuc2V0RmllbGQoQWJzdHJhY3RQQ0RhdGEuY2xhc3MsICJO\nVUxMIiwgT2JqZWN0LmNsYXNzKTsKICAgICAgICBjb2RlLmFyZXR1cm4oKTsK\nICAgICAgICAvLyBzdXBlci50b0RhdGEgKGZtZCwgdmFsLCBjdHgpOwogICAg\nICAgIGlmaW5zLnNldFRhcmdldChjb2RlLmFsb2FkKCkuc2V0VGhpcygpKTsK\nICAgICAgICBjb2RlLmFsb2FkKCkuc2V0UGFyYW0oMCk7CiAgICAgICAgY29k\nZS5hbG9hZCgpLnNldFBhcmFtKDEpOwogICAgICAgIGNvZGUuYWxvYWQoKS5z\nZXRQYXJhbSgyKTsKICAgICAgICBjb2RlLmludm9rZXNwZWNpYWwoKS5zZXRN\nZXRob2QoQWJzdHJhY3RQQ0RhdGEuY2xhc3MsICJ0b0RhdGEiLAogICAgICAg\nICAgICBPYmplY3QuY2xhc3MsIG5ldyBDbGFzc1tdeyBGaWVsZE1ldGFEYXRh\nLmNsYXNzLCBPYmplY3QuY2xhc3MsCiAgICAgICAgICAgIFN0b3JlQ29udGV4\ndC5jbGFzcyB9KTsKICAgICAgICBjb2RlLmFyZXR1cm4oKTsKICAgICAgICBj\nb2RlLmNhbGN1bGF0ZU1heFN0YWNrKCk7CiAgICAgICAgY29kZS5jYWxjdWxh\ndGVNYXhMb2NhbHMoKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgZW5oYW5j\nZVRvTmVzdGVkRGF0YShCQ0NsYXNzIGJjKSB7CiAgICAgICAgQkNNZXRob2Qg\nbWV0aCA9IGJjLmRlY2xhcmVNZXRob2QoInRvTmVzdGVkRGF0YSIsIE9iamVj\ndC5jbGFzcywKICAgICAgICAgICAgbmV3IENsYXNzIFtdeyBWYWx1ZU1ldGFE\nYXRhLmNsYXNzLCBPYmplY3QuY2xhc3MsIAogICAgICAgICAgICBTdG9yZUNv\nbnRleHQuY2xhc3MgfSk7CiAgICAgICAgQ29kZSBjb2RlID0gbWV0aC5nZXRD\nb2RlKHRydWUpOwoKICAgICAgICAvLyBpZiAodmFsID09IG51bGwpCiAgICAg\nICAgLy8gCQlyZXR1cm4gbnVsbDsKICAgICAgICBjb2RlLmFsb2FkKCkuc2V0\nUGFyYW0oMSk7CiAgICAgICAgSnVtcEluc3RydWN0aW9uIGlmaW5zID0gY29k\nZS5pZm5vbm51bGwoKTsKICAgICAgICBjb2RlLmNvbnN0YW50KCkuc2V0TnVs\nbCgpOwogICAgICAgIGNvZGUuYXJldHVybigpOwoKICAgICAgICAvLyBpbnQg\ndHlwZSA9IHZtZC5nZXREZWNsYXJlZFR5cGVDb2RlICgpOwogICAgICAgIGlm\naW5zLnNldFRhcmdldChjb2RlLmFsb2FkKCkuc2V0UGFyYW0oMCkpOwogICAg\nICAgIGNvZGUuaW52b2tlaW50ZXJmYWNlKCkuc2V0TWV0aG9kKFZhbHVlTWV0\nYURhdGEuY2xhc3MsCiAgICAgICAgICAgICJnZXREZWNsYXJlZFR5cGVDb2Rl\nIiwgaW50LmNsYXNzLCBudWxsKTsKICAgICAgICBpbnQgbG9jYWwgPSBjb2Rl\nLmdldE5leHRMb2NhbHNJbmRleCgpOwogICAgICAgIGNvZGUuaXN0b3JlKCku\nc2V0TG9jYWwobG9jYWwpOwoKICAgICAgICAvLyBpZiAodHlwZSAhPSBKYXZh\nVHlwZXMuQ09MTEVDVElPTiAmJgogICAgICAgIC8vIAkgICB0eXBlICE9IEph\ndmFUeXBlcy5NQVAgJiYKICAgICAgICAvLyAJICAgdHlwZSAhPSBKYXZhVHlw\nZXMuQVJSQVkpCiAgICAgICAgLy8gCSAgIHJldHVybiBzdXBlci50b05lc3Rl\nZERhdGEodHlwZSwgdmFsLCBjdHgpOwogICAgICAgIC8vIAllbHNlCiAgICAg\nICAgLy8gCQlyZXR1cm4gTlVMTDsKICAgICAgICBDb2xsZWN0aW9uIGp1bXBz\nID0gbmV3IEFycmF5TGlzdCgzKTsKICAgICAgICBjb2RlLmlsb2FkKCkuc2V0\nTG9jYWwobG9jYWwpOwogICAgICAgIGNvZGUuY29uc3RhbnQoKS5zZXRWYWx1\nZShKYXZhVHlwZXMuQ09MTEVDVElPTik7CiAgICAgICAganVtcHMuYWRkKGNv\nZGUuaWZpY21wZXEoKSk7CiAgICAgICAgY29kZS5pbG9hZCgpLnNldExvY2Fs\nKGxvY2FsKTsKICAgICAgICBjb2RlLmNvbnN0YW50KCkuc2V0VmFsdWUoSmF2\nYVR5cGVzLk1BUCk7CiAgICAgICAganVtcHMuYWRkKGNvZGUuaWZpY21wZXEo\nKSk7CiAgICAgICAgY29kZS5pbG9hZCgpLnNldExvY2FsKGxvY2FsKTsKICAg\nICAgICBjb2RlLmNvbnN0YW50KCkuc2V0VmFsdWUoSmF2YVR5cGVzLkFSUkFZ\nKTsKICAgICAgICBqdW1wcy5hZGQoY29kZS5pZmljbXBlcSgpKTsKICAgICAg\nICBjb2RlLmFsb2FkKCkuc2V0VGhpcygpOwogICAgICAgIGNvZGUuYWxvYWQo\nKS5zZXRQYXJhbSgwKTsKICAgICAgICBjb2RlLmFsb2FkKCkuc2V0UGFyYW0o\nMSk7CiAgICAgICAgY29kZS5hbG9hZCgpLnNldFBhcmFtKDIpOwogICAgICAg\nIGNvZGUuaW52b2tlc3BlY2lhbCgpLnNldE1ldGhvZChBYnN0cmFjdFBDRGF0\nYS5jbGFzcywgInRvTmVzdGVkRGF0YSIsCiAgICAgICAgICAgIE9iamVjdC5j\nbGFzcywgbmV3IENsYXNzW117IFZhbHVlTWV0YURhdGEuY2xhc3MsIE9iamVj\ndC5jbGFzcywKICAgICAgICAgICAgU3RvcmVDb250ZXh0LmNsYXNzIH0pOwog\nICAgICAgIGNvZGUuYXJldHVybigpOwogICAgICAgIHNldFRhcmdldChjb2Rl\nLmdldHN0YXRpYygpLnNldEZpZWxkCiAgICAgICAgICAgIChBYnN0cmFjdFBD\nRGF0YS5jbGFzcywgIk5VTEwiLCBPYmplY3QuY2xhc3MpLCBqdW1wcyk7CiAg\nICAgICAgY29kZS5hcmV0dXJuKCk7CiAgICAgICAgY29kZS5jYWxjdWxhdGVN\nYXhTdGFjaygpOwogICAgICAgIGNvZGUuY2FsY3VsYXRlTWF4TG9jYWxzKCk7\nCiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIHJlcGxhY2VOZXdFbWJlZGRlZFBD\nRGF0YShCQ0NsYXNzIGJjKSB7CiAgICAgICAgQkNNZXRob2QgbWV0aCA9IGJj\nLmRlY2xhcmVNZXRob2QoIm5ld0VtYmVkZGVkUENEYXRhIiwgCiAgICAgICAg\nICAgIEFic3RyYWN0UENEYXRhLmNsYXNzLCBuZXcgQ2xhc3NbXXsgT3BlbkpQ\nQVN0YXRlTWFuYWdlci5jbGFzcyB9KTsKICAgICAgICBDb2RlIGNvZGUgPSBt\nZXRoLmdldENvZGUodHJ1ZSk7CgogICAgICAgIC8vIHJldHVybiBuZXcgRGF0\nYUNhY2hlUENEYXRhSW1wbChzbS5nZXRPYmplY3RJZCgpLCBzbS5nZXRNZXRh\nRGF0YSgpKTsKICAgICAgICBjb2RlLmFuZXcoKS5zZXRUeXBlKERhdGFDYWNo\nZVBDRGF0YUltcGwuY2xhc3MpOwogICAgICAgIGNvZGUuZHVwKCk7CiAgICAg\nICAgY29kZS5hbG9hZCgpLnNldFBhcmFtKDApOwogICAgICAgIGNvZGUuaW52\nb2tlaW50ZXJmYWNlKCkuc2V0TWV0aG9kKE9wZW5KUEFTdGF0ZU1hbmFnZXIu\nY2xhc3MsICJnZXRJZCIsIAogICAgICAgICAgICBPYmplY3QuY2xhc3MsIG51\nbGwpOwogICAgICAgIGNvZGUuYWxvYWQoKS5zZXRQYXJhbSgwKTsKICAgICAg\nICBjb2RlLmludm9rZWludGVyZmFjZSgpLnNldE1ldGhvZChPcGVuSlBBU3Rh\ndGVNYW5hZ2VyLmNsYXNzLCAKICAgICAgICAgICAgImdldE1ldGFEYXRhIiwg\nQ2xhc3NNZXRhRGF0YS5jbGFzcywgbnVsbCk7CiAgICAgICAgY29kZS5pbnZv\na2VzcGVjaWFsKCkuc2V0TWV0aG9kKERhdGFDYWNoZVBDRGF0YUltcGwuY2xh\nc3MsICI8aW5pdD4iLAogICAgICAgICAgICB2b2lkLmNsYXNzLCBuZXcgQ2xh\nc3NbXSB7IE9iamVjdC5jbGFzcywgQ2xhc3NNZXRhRGF0YS5jbGFzcyB9KTsK\nICAgICAgICBjb2RlLmFyZXR1cm4oKTsKCiAgICAgICAgY29kZS5jYWxjdWxh\ndGVNYXhMb2NhbHMoKTsKICAgICAgICBjb2RlLmNhbGN1bGF0ZU1heFN0YWNr\nKCk7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIGFkZFRpbWVvdXQoQkNDbGFz\ncyBiYykgewogICAgICAgIGJjLmRlY2xhcmVJbnRlcmZhY2UoRGF0YUNhY2hl\nUENEYXRhLmNsYXNzKTsKICAgICAgICBiYy5kZWNsYXJlSW50ZXJmYWNlKFRp\nbWVkLmNsYXNzKTsKCiAgICAgICAgLy8gcHVibGljIGJvb2xlYW4gaXNUaW1l\nZE91dCAoKTsKICAgICAgICBCQ0ZpZWxkIGZpZWxkID0gYWRkQmVhbkZpZWxk\nKGJjLCAidGltZW91dCIsIGxvbmcuY2xhc3MpOwogICAgICAgIEJDTWV0aG9k\nIG1ldGggPSBiYy5kZWNsYXJlTWV0aG9kKCJpc1RpbWVkT3V0IiwgYm9vbGVh\nbi5jbGFzcywgbnVsbCk7CiAgICAgICAgQ29kZSBjb2RlID0gbWV0aC5nZXRD\nb2RlKHRydWUpOwoKICAgICAgICAvLyBpZiAodGltZW91dCA9PSAtMSkgLi4u\nCiAgICAgICAgY29kZS5hbG9hZCgpLnNldFRoaXMoKTsKICAgICAgICBjb2Rl\nLmdldGZpZWxkKCkuc2V0RmllbGQoZmllbGQpOwogICAgICAgIGNvZGUuY29u\nc3RhbnQoKS5zZXRWYWx1ZSgtMUwpOwogICAgICAgIGNvZGUubGNtcCgpOwog\nICAgICAgIEp1bXBJbnN0cnVjdGlvbiBpZm5lZyA9IGNvZGUuaWZlcSgpOwoK\nICAgICAgICAvLyBpZiAodGltZW91dCA+PSBTeXN0ZW0uY3VycmVudFRpbWVN\naWxsaXMgKCkpCiAgICAgICAgY29kZS5hbG9hZCgpLnNldFRoaXMoKTsKICAg\nICAgICBjb2RlLmdldGZpZWxkKCkuc2V0RmllbGQoZmllbGQpOwogICAgICAg\nIGNvZGUuaW52b2tlc3RhdGljKCkuc2V0TWV0aG9kKFN5c3RlbS5jbGFzcywg\nImN1cnJlbnRUaW1lTWlsbGlzIiwKICAgICAgICAgICAgbG9uZy5jbGFzcywg\nbnVsbCk7CiAgICAgICAgY29kZS5sY21wKCk7CiAgICAgICAgSnVtcEluc3Ry\ndWN0aW9uIGlmbmV4cCA9IGNvZGUuaWZnZSgpOwoKICAgICAgICAvLyByZXR1\ncm4gdHJ1ZTsKICAgICAgICBjb2RlLmNvbnN0YW50KCkuc2V0VmFsdWUoMSk7\nCgogICAgICAgIC8vIC4uLiBlbHNlIHJldHVybiBmYWxzZTsKICAgICAgICBK\ndW1wSW5zdHJ1Y3Rpb24gZ28yID0gY29kZS5nbzIoKTsKICAgICAgICBJbnN0\ncnVjdGlvbiBmbHNlID0gY29kZS5jb25zdGFudCgpLnNldFZhbHVlKDApOwog\nICAgICAgIGlmbmVnLnNldFRhcmdldChmbHNlKTsKICAgICAgICBpZm5leHAu\nc2V0VGFyZ2V0KGZsc2UpOwogICAgICAgIGdvMi5zZXRUYXJnZXQoY29kZS5p\ncmV0dXJuKCkpOwoKICAgICAgICBjb2RlLmNhbGN1bGF0ZU1heFN0YWNrKCk7\nCiAgICAgICAgY29kZS5jYWxjdWxhdGVNYXhMb2NhbHMoKTsKICAgIH0KCiAg\nICBwcml2YXRlIHZvaWQgYWRkU3luY2hyb25pemF0aW9uKEJDQ2xhc3MgYmMp\nIHsKICAgICAgICBCQ01ldGhvZFtdIG1ldGhvZHMgPSBiYy5nZXREZWNsYXJl\nZE1ldGhvZHMoKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG1ldGhv\nZHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKG1ldGhvZHNbaV0u\naXNQdWJsaWMoKQogICAgICAgICAgICAgICAgJiYgX3N5bmNocy5jb250YWlu\ncyhtZXRob2RzW2ldLmdldE5hbWUoKSkpCiAgICAgICAgICAgICAgICBtZXRo\nb2RzW2ldLnNldFN5bmNocm9uaXplZCh0cnVlKTsKICAgICAgICB9CgogICAg\nICAgIC8vIGFkZCBzeW5jaHJvbml6ZWQgaXNMb2FkZWQgY2FsbC4KICAgICAg\nICAvLyBwdWJsaWMgc3luY2hyb25pemVkIGJvb2xlYW4gaXNMb2FkZWQgKGlu\ndCBmaWVsZCkKICAgICAgICAvLyB7CiAgICAgICAgLy8gCQlyZXR1cm4gc3Vw\nZXIuaXNMb2FkZWQgKGZpZWxkKTsKICAgICAgICAvLyB9CiAgICAgICAgQkNN\nZXRob2QgbWV0aG9kID0gYmMuZGVjbGFyZU1ldGhvZCgiaXNMb2FkZWQiLCBi\nb29sZWFuLmNsYXNzLAogICAgICAgICAgICBuZXcgQ2xhc3NbXXsgaW50LmNs\nYXNzIH0pOwogICAgICAgIG1ldGhvZC5zZXRTeW5jaHJvbml6ZWQodHJ1ZSk7\nCiAgICAgICAgQ29kZSBjb2RlID0gbWV0aG9kLmdldENvZGUodHJ1ZSk7CiAg\nICAgICAgY29kZS5hbG9hZCgpLnNldFRoaXMoKTsKICAgICAgICBjb2RlLmls\nb2FkKCkuc2V0UGFyYW0oMCk7CiAgICAgICAgY29kZS5pbnZva2VzcGVjaWFs\nKCkuc2V0TWV0aG9kKEFic3RyYWN0UENEYXRhLmNsYXNzLCAiaXNMb2FkZWQi\nLAogICAgICAgICAgICBib29sZWFuLmNsYXNzLCBuZXcgQ2xhc3NbXXsgaW50\nLmNsYXNzIH0pOwogICAgICAgIGNvZGUuY2FsY3VsYXRlTWF4TG9jYWxzKCk7\nCiAgICAgICAgY29kZS5jYWxjdWxhdGVNYXhTdGFjaygpOwogICAgICAgIGNv\nZGUuaXJldHVybigpOwogICAgfQoKICAgIC8qKgogICAgICogU2ltcGxlIGlu\ndGVyZmFjZSB0byBnaXZlIGFjY2VzcyB0byBleHBpcmF0aW9uIHRpbWUuCiAg\nICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgaW50ZXJmYWNlIFRpbWVkIHsKCiAg\nICAgICAgcHVibGljIHZvaWQgc2V0VGltZW91dChsb25nIHRpbWUpOwogICAg\nfQp9Cg==\n","encoding":"base64"}

