{"sha":"0d2207f1aa43b6d5c57c87d0a70b798b91d16a2f","node_id":"MDQ6QmxvYjIwNjM2NDowZDIyMDdmMWFhNDNiNmQ1YzU3Yzg3ZDBhNzBiNzk4YjkxZDE2YTJm","size":4149,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/0d2207f1aa43b6d5c57c87d0a70b798b91d16a2f","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5kYXRhY2FjaGU7CgppbXBvcnQgamF2YS51dGlsLkJpdFNldDsK\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLk9wZW5KUEFTdGF0\nZU1hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkFi\nc3RyYWN0UENEYXRhOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5l\nbC5QQ0RhdGE7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlBD\nRGF0YUltcGw7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlN0\nb3JlQ29udGV4dDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkNs\nYXNzTWV0YURhdGE7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5G\naWVsZE1ldGFEYXRhOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEu\nSmF2YVR5cGVzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuVmFs\ndWVNZXRhRGF0YTsKCi8qKgogKiBTcGVjaWFsaXplZCB7QGxpbmsgUENEYXRh\nfSBpbXBsZW1lbnRhdGlvbiBmb3IgZGF0YSBjYWNoaW5nLiBUaGlzCiAqIGlt\ncGxlbWVudGF0aW9uIGlzIHByb3Blcmx5IHN5bmNocm9uaXplZC4KICoKICog\nQGF1dGhvciBQYXRyaWNrIExpbnNrZXkKICovCnB1YmxpYyBjbGFzcyBEYXRh\nQ2FjaGVQQ0RhdGFJbXBsCiAgICBleHRlbmRzIFBDRGF0YUltcGwKICAgIGlt\ncGxlbWVudHMgRGF0YUNhY2hlUENEYXRhIHsKCiAgICBwcml2YXRlIGZpbmFs\nIGxvbmcgX2V4cDsKCiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yLgogICAg\nICovCiAgICBwdWJsaWMgRGF0YUNhY2hlUENEYXRhSW1wbChPYmplY3Qgb2lk\nLCBDbGFzc01ldGFEYXRhIG1ldGEpIHsKICAgICAgICBzdXBlcihvaWQsIG1l\ndGEpOwoKICAgICAgICBpbnQgdGltZW91dCA9IG1ldGEuZ2V0RGF0YUNhY2hl\nVGltZW91dCgpOwogICAgICAgIGlmICh0aW1lb3V0ID4gMCkKICAgICAgICAg\nICAgX2V4cCA9IFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpICsgdGltZW91\ndDsKICAgICAgICBlbHNlCiAgICAgICAgICAgIF9leHAgPSAtMTsKICAgIH0K\nCiAgICBwdWJsaWMgYm9vbGVhbiBpc1RpbWVkT3V0KCkgewogICAgICAgIHJl\ndHVybiBfZXhwICE9IC0xICYmIF9leHAgPCBTeXN0ZW0uY3VycmVudFRpbWVN\naWxsaXMoKTsKICAgIH0KCiAgICBwdWJsaWMgc3luY2hyb25pemVkIE9iamVj\ndCBnZXREYXRhKGludCBpbmRleCkgewogICAgICAgIHJldHVybiBzdXBlci5n\nZXREYXRhKGluZGV4KTsKICAgIH0KCiAgICBwdWJsaWMgc3luY2hyb25pemVk\nIHZvaWQgc2V0RGF0YShpbnQgaW5kZXgsIE9iamVjdCB2YWwpIHsKICAgICAg\nICBzdXBlci5zZXREYXRhKGluZGV4LCB2YWwpOwogICAgfQoKICAgIHB1Ymxp\nYyBzeW5jaHJvbml6ZWQgdm9pZCBjbGVhckRhdGEoaW50IGluZGV4KSB7CiAg\nICAgICAgc3VwZXIuY2xlYXJEYXRhKGluZGV4KTsKICAgIH0KCiAgICBwdWJs\naWMgc3luY2hyb25pemVkIE9iamVjdCBnZXRJbXBsRGF0YSgpIHsKICAgICAg\nICByZXR1cm4gc3VwZXIuZ2V0SW1wbERhdGEoKTsKICAgIH0KCiAgICBwdWJs\naWMgc3luY2hyb25pemVkIHZvaWQgc2V0SW1wbERhdGEoT2JqZWN0IHZhbCkg\newogICAgICAgIHN1cGVyLnNldEltcGxEYXRhKHZhbCk7CiAgICB9CgogICAg\ncHVibGljIHN5bmNocm9uaXplZCBPYmplY3QgZ2V0SW1wbERhdGEoaW50IGlu\nZGV4KSB7CiAgICAgICAgcmV0dXJuIHN1cGVyLmdldEltcGxEYXRhKGluZGV4\nKTsKICAgIH0KCiAgICBwdWJsaWMgc3luY2hyb25pemVkIHZvaWQgc2V0SW1w\nbERhdGEoaW50IGluZGV4LCBPYmplY3QgdmFsKSB7CiAgICAgICAgc3VwZXIu\nc2V0SW1wbERhdGEoaW5kZXgsIHZhbCk7CiAgICB9CgogICAgcHVibGljIHN5\nbmNocm9uaXplZCBPYmplY3QgZ2V0SW50ZXJtZWRpYXRlKGludCBpbmRleCkg\newogICAgICAgIHJldHVybiBzdXBlci5nZXRJbnRlcm1lZGlhdGUoaW5kZXgp\nOwogICAgfQoKICAgIHB1YmxpYyBzeW5jaHJvbml6ZWQgdm9pZCBzZXRJbnRl\ncm1lZGlhdGUoaW50IGluZGV4LCBPYmplY3QgdmFsKSB7CiAgICAgICAgc3Vw\nZXIuc2V0SW50ZXJtZWRpYXRlKGluZGV4LCB2YWwpOwogICAgfQoKICAgIHB1\nYmxpYyBzeW5jaHJvbml6ZWQgYm9vbGVhbiBpc0xvYWRlZChpbnQgaW5kZXgp\nIHsKICAgICAgICByZXR1cm4gc3VwZXIuaXNMb2FkZWQoaW5kZXgpOwogICAg\nfQoKICAgIHB1YmxpYyBzeW5jaHJvbml6ZWQgdm9pZCBzZXRMb2FkZWQoaW50\nIGluZGV4LCBib29sZWFuIGxvYWRlZCkgewogICAgICAgIHN1cGVyLnNldExv\nYWRlZChpbmRleCwgbG9hZGVkKTsKICAgIH0KCiAgICBwdWJsaWMgc3luY2hy\nb25pemVkIE9iamVjdCBnZXRWZXJzaW9uKCkgewogICAgICAgIHJldHVybiBz\ndXBlci5nZXRWZXJzaW9uKCk7CiAgICB9CgogICAgcHVibGljIHN5bmNocm9u\naXplZCB2b2lkIHNldFZlcnNpb24oT2JqZWN0IHZlcnNpb24pIHsKICAgICAg\nICBzdXBlci5zZXRWZXJzaW9uKHZlcnNpb24pOwogICAgfQoKICAgIHB1Ymxp\nYyBzeW5jaHJvbml6ZWQgdm9pZCBzdG9yZShPcGVuSlBBU3RhdGVNYW5hZ2Vy\nIHNtKSB7CiAgICAgICAgc3VwZXIuc3RvcmUoc20pOwogICAgfQoKICAgIHB1\nYmxpYyBzeW5jaHJvbml6ZWQgdm9pZCBzdG9yZShPcGVuSlBBU3RhdGVNYW5h\nZ2VyIHNtLCBCaXRTZXQgZmllbGRzKSB7CiAgICAgICAgc3VwZXIuc3RvcmUo\nc20sIGZpZWxkcyk7CiAgICB9CgogICAgcHJvdGVjdGVkIE9iamVjdCB0b0Rh\ndGEoRmllbGRNZXRhRGF0YSBmbWQsIE9iamVjdCB2YWwsIFN0b3JlQ29udGV4\ndCBjdHgpIHsKICAgICAgICAvLyBhdm9pZCBjYWNoaW5nIGxhcmdlIHJlc3Vs\ndCBzZXQgZmllbGRzCiAgICAgICAgaWYgKGZtZC5pc0xSUygpKQogICAgICAg\nICAgICByZXR1cm4gTlVMTDsKICAgICAgICByZXR1cm4gc3VwZXIudG9EYXRh\nKGZtZCwgdmFsLCBjdHgpOwogICAgfQoKICAgIHByb3RlY3RlZCBPYmplY3Qg\ndG9OZXN0ZWREYXRhKFZhbHVlTWV0YURhdGEgdm1kLCBPYmplY3QgdmFsLAog\nICAgICAgIFN0b3JlQ29udGV4dCBjdHgpIHsKICAgICAgICBpZiAodmFsID09\nIG51bGwpCiAgICAgICAgICAgIHJldHVybiBudWxsOwoKICAgICAgICAvLyBk\nb24ndCB0cnkgdG8gY2FjaGUgbmVzdGVkIGNvbnRhaW5lcnMKICAgICAgICBz\nd2l0Y2ggKHZtZC5nZXREZWNsYXJlZFR5cGVDb2RlKCkpIHsKICAgICAgICAg\nICAgY2FzZSBKYXZhVHlwZXMuQ09MTEVDVElPTjoKICAgICAgICAgICAgY2Fz\nZSBKYXZhVHlwZXMuTUFQOgogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5B\nUlJBWToKICAgICAgICAgICAgICAgIHJldHVybiBOVUxMOwogICAgICAgICAg\nICBkZWZhdWx0OgogICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLnRvTmVz\ndGVkRGF0YSh2bWQsIHZhbCwgY3R4KTsKICAgICAgICB9CiAgICB9CgogICAg\ncHVibGljIEFic3RyYWN0UENEYXRhIG5ld0VtYmVkZGVkUENEYXRhKE9wZW5K\nUEFTdGF0ZU1hbmFnZXIgc20pIHsKICAgICAgICByZXR1cm4gbmV3IERhdGFD\nYWNoZVBDRGF0YUltcGwoc20uZ2V0SWQoKSwgc20uZ2V0TWV0YURhdGEoKSk7\nCiAgICB9Cn0K\n","encoding":"base64"}

