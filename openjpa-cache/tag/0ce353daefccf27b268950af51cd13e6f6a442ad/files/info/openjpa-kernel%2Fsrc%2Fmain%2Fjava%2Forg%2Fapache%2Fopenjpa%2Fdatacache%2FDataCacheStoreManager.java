{"sha":"40b9e78cd7afd754780e21664bb853cd271d2c58","node_id":"MDQ6QmxvYjIwNjM2NDo0MGI5ZTc4Y2Q3YWZkNzU0NzgwZTIxNjY0YmI4NTNjZDI3MWQyYzU4","size":24697,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/40b9e78cd7afd754780e21664bb853cd271d2c58","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5kYXRhY2FjaGU7CgppbXBvcnQgamF2YS51dGlsLkFycmF5TGlz\ndDsKaW1wb3J0IGphdmEudXRpbC5CaXRTZXQ7CmltcG9ydCBqYXZhLnV0aWwu\nQ29sbGVjdGlvbjsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsKaW1w\nb3J0IGphdmEudXRpbC5IYXNoTWFwOwppbXBvcnQgamF2YS51dGlsLkhhc2hT\nZXQ7CmltcG9ydCBqYXZhLnV0aWwuSXRlcmF0b3I7CmltcG9ydCBqYXZhLnV0\naWwuTGlzdDsKaW1wb3J0IGphdmEudXRpbC5MaXN0SXRlcmF0b3I7CmltcG9y\ndCBqYXZhLnV0aWwuTWFwOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5l\nbmhhbmNlLlBDRGF0YUdlbmVyYXRvcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5rZXJuZWwuRGVsZWdhdGluZ1N0b3JlTWFuYWdlcjsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuRmV0Y2hDb25maWd1cmF0aW9uOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5Mb2NrTGV2ZWxzOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5PcGVuSlBBU3RhdGVN\nYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5QQ1N0\nYXRlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5RdWVyeUxh\nbmd1YWdlczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuU3Rv\ncmVDb250ZXh0OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5T\ndG9yZU1hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVs\nLlN0b3JlUXVlcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5D\nbGFzc01ldGFEYXRhOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEu\nTWV0YURhdGFSZXBvc2l0b3J5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLnV0aWwuT3B0aW1pc3RpY0V4Y2VwdGlvbjsKCi8qKgogKiBTdG9yZU1hbmFn\nZXIgcHJveHkgdGhhdCBkZWxlZ2F0ZXMgdG8gYSBkYXRhIGNhY2hlIHdoZW4g\ncG9zc2libGUuCiAqCiAqIEBhdXRob3IgUGF0cmljayBMaW5za2V5CiAqIEBu\nb2phdmFkb2MKICovCnB1YmxpYyBjbGFzcyBEYXRhQ2FjaGVTdG9yZU1hbmFn\nZXIKICAgIGV4dGVuZHMgRGVsZWdhdGluZ1N0b3JlTWFuYWdlciB7CgogICAg\nLy8gYWxsIHRoZSBzdGF0ZSBtYW5hZ2VycyBjaGFuZ2VkIGluIHRoaXMgdHJh\nbnNhY3Rpb24KICAgIHByaXZhdGUgQ29sbGVjdGlvbiBfaW5zZXJ0cyA9IG51\nbGw7IC8vIHN0YXRlbWFuYWdlcnMKICAgIHByaXZhdGUgTWFwIF91cGRhdGVz\nID0gbnVsbDsgLy8gc3RhdGVtYW5hZ2VyIC0+IGZtZCBzZXQKICAgIHByaXZh\ndGUgQ29sbGVjdGlvbiBfZGVsZXRlcyA9IG51bGw7IC8vIHN0YXRlbWFuYWdl\ncnMKCiAgICAvLyB0aGUgb3duaW5nIGNvbnRleHQKICAgIHByaXZhdGUgU3Rv\ncmVDb250ZXh0IF9jdHggPSBudWxsOwoKICAgIC8vIHBjIGRhdGEgZ2VuZXJh\ndG9yCiAgICBwcml2YXRlIFBDRGF0YUdlbmVyYXRvciBfZ2VuID0gbnVsbDsK\nCiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yLgogICAgICoKICAgICAqIEBw\nYXJhbSBzbSB0aGUgc3RvcmUgbWFuYWdlciB0byBkZWxlZ2F0ZSB0bwogICAg\nICovCiAgICBwdWJsaWMgRGF0YUNhY2hlU3RvcmVNYW5hZ2VyKFN0b3JlTWFu\nYWdlciBzbSkgewogICAgICAgIHN1cGVyKHNtKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBzZXRDb250ZXh0KFN0b3JlQ29udGV4dCBjdHgpIHsKICAgICAg\nICBfY3R4ID0gY3R4OwogICAgICAgIF9nZW4gPSBjdHguZ2V0Q29uZmlndXJh\ndGlvbigpLmdldERhdGFDYWNoZU1hbmFnZXJJbnN0YW5jZSgpLgogICAgICAg\nICAgICBnZXRQQ0RhdGFHZW5lcmF0b3IoKTsKICAgICAgICBzdXBlci5zZXRD\nb250ZXh0KGN0eCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgYmVnaW4oKSB7\nCiAgICAgICAgc3VwZXIuYmVnaW4oKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBjb21taXQoKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgc3VwZXIu\nY29tbWl0KCk7CiAgICAgICAgICAgIHVwZGF0ZUNhY2hlcygpOwogICAgICAg\nIH0gZmluYWxseSB7CiAgICAgICAgICAgIF9pbnNlcnRzID0gbnVsbDsKICAg\nICAgICAgICAgX3VwZGF0ZXMgPSBudWxsOwogICAgICAgICAgICBfZGVsZXRl\ncyA9IG51bGw7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIHJv\nbGxiYWNrKCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHN1cGVyLnJv\nbGxiYWNrKCk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgX2lu\nc2VydHMgPSBudWxsOwogICAgICAgICAgICBfdXBkYXRlcyA9IG51bGw7CiAg\nICAgICAgICAgIF9kZWxldGVzID0gbnVsbDsKICAgICAgICB9CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBFdmljdCBhbGwgbWVtYmVycyBvZiB0aGUgZ2l2ZW4g\nY2xhc3Nlcy4KICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIGV2aWN0VHlwZXMo\nQ29sbGVjdGlvbiBjbGFzc2VzKSB7CiAgICAgICAgaWYgKGNsYXNzZXMuaXNF\nbXB0eSgpKQogICAgICAgICAgICByZXR1cm47CgogICAgICAgIE1ldGFEYXRh\nUmVwb3NpdG9yeSBtZHIgPSBfY3R4LmdldENvbmZpZ3VyYXRpb24oKS4KICAg\nICAgICAgICAgZ2V0TWV0YURhdGFSZXBvc2l0b3J5SW5zdGFuY2UoKTsKICAg\nICAgICBDbGFzc0xvYWRlciBsb2FkZXIgPSBfY3R4LmdldENsYXNzTG9hZGVy\nKCk7CgogICAgICAgIENsYXNzIGNsczsKICAgICAgICBEYXRhQ2FjaGUgY2Fj\naGU7CiAgICAgICAgZm9yIChJdGVyYXRvciBpdHIgPSBjbGFzc2VzLml0ZXJh\ndG9yKCk7IGl0ci5oYXNOZXh0KCk7KSB7CiAgICAgICAgICAgIGNscyA9IChD\nbGFzcykgaXRyLm5leHQoKTsKICAgICAgICAgICAgY2FjaGUgPSBtZHIuZ2V0\nTWV0YURhdGEoY2xzLCBsb2FkZXIsIGZhbHNlKS5nZXREYXRhQ2FjaGUoKTsK\nICAgICAgICAgICAgaWYgKGNhY2hlICE9IG51bGwpCiAgICAgICAgICAgICAg\nICBjYWNoZS5yZW1vdmVBbGwoY2xzLCBmYWxzZSk7CiAgICAgICAgfQogICAg\nfQoKICAgIC8qKgogICAgICogVXBkYXRlIGFsbCBjYWNoZXMgd2l0aCB0aGUg\nY29tbWl0dGVkIGluc2VydHMsIHVwZGF0ZXMsIGFuZCBkZWxldGVzLgogICAg\nICovCiAgICBwcml2YXRlIHZvaWQgdXBkYXRlQ2FjaGVzKCkgewogICAgICAg\nIC8vIG1hcCBlYWNoIGRhdGEgY2FjaGUgdG8gdGhlIG1vZGlmaWNhdGlvbnMg\nd2UgbmVlZCB0byBwZXJmb3JtCiAgICAgICAgTWFwIG1vZE1hcCA9IG51bGw7\nCiAgICAgICAgTW9kaWZpY2F0aW9ucyBtb2RzOwogICAgICAgIE9wZW5KUEFT\ndGF0ZU1hbmFnZXIgc207CiAgICAgICAgRGF0YUNhY2hlUENEYXRhIGRhdGE7\nCiAgICAgICAgRGF0YUNhY2hlIGNhY2hlOwoKICAgICAgICAvLyBjcmVhdGUg\ncGMgZGF0YXMgZm9yIGluc2VydHMKICAgICAgICBpZiAoX2N0eC5nZXRQb3B1\nbGF0ZURhdGFDYWNoZSgpICYmIF9pbnNlcnRzICE9IG51bGwpIHsKICAgICAg\nICAgICAgZm9yIChJdGVyYXRvciBpdHIgPSBfaW5zZXJ0cy5pdGVyYXRvcigp\nOyBpdHIuaGFzTmV4dCgpOykgewogICAgICAgICAgICAgICAgc20gPSAoT3Bl\nbkpQQVN0YXRlTWFuYWdlcikgaXRyLm5leHQoKTsKICAgICAgICAgICAgICAg\nIGNhY2hlID0gc20uZ2V0TWV0YURhdGEoKS5nZXREYXRhQ2FjaGUoKTsKICAg\nICAgICAgICAgICAgIGlmIChjYWNoZSA9PSBudWxsKQogICAgICAgICAgICAg\nICAgICAgIGNvbnRpbnVlOwoKICAgICAgICAgICAgICAgIGlmIChtb2RNYXAg\nPT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICBtb2RNYXAgPSBuZXcgSGFz\naE1hcCgpOwogICAgICAgICAgICAgICAgbW9kcyA9IGdldE1vZGlmaWNhdGlv\nbnMobW9kTWFwLCBjYWNoZSk7CiAgICAgICAgICAgICAgICBkYXRhID0gbmV3\nUENEYXRhKHNtKTsKICAgICAgICAgICAgICAgIGRhdGEuc3RvcmUoc20pOwog\nICAgICAgICAgICAgICAgbW9kcy5hZGRpdGlvbnMuYWRkKG5ldyBQQ0RhdGFI\nb2xkZXIoZGF0YSwgc20pKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAg\nICAgICAgLy8gdXBkYXRlIHBjZGF0YXMgZm9yIHVwZGF0ZXMKICAgICAgICBN\nYXAuRW50cnkgZW50cnk7CiAgICAgICAgaWYgKF91cGRhdGVzICE9IG51bGwp\nIHsKICAgICAgICAgICAgQml0U2V0IGZpZWxkczsKICAgICAgICAgICAgZm9y\nIChJdGVyYXRvciBpdHIgPSBfdXBkYXRlcy5lbnRyeVNldCgpLml0ZXJhdG9y\nKCk7CiAgICAgICAgICAgICAgICBpdHIuaGFzTmV4dCgpOykgewogICAgICAg\nICAgICAgICAgZW50cnkgPSAoTWFwLkVudHJ5KSBpdHIubmV4dCgpOwogICAg\nICAgICAgICAgICAgc20gPSAoT3BlbkpQQVN0YXRlTWFuYWdlcikgZW50cnku\nZ2V0S2V5KCk7CiAgICAgICAgICAgICAgICBmaWVsZHMgPSAoQml0U2V0KSBl\nbnRyeS5nZXRWYWx1ZSgpOwoKICAgICAgICAgICAgICAgIGNhY2hlID0gc20u\nZ2V0TWV0YURhdGEoKS5nZXREYXRhQ2FjaGUoKTsKICAgICAgICAgICAgICAg\nIGlmIChjYWNoZSA9PSBudWxsKQogICAgICAgICAgICAgICAgICAgIGNvbnRp\nbnVlOwoKICAgICAgICAgICAgICAgIC8vIGl0J3Mgb2sgbm90IHRvIGNsb25l\nIHRoZSBvYmplY3QgdGhhdCB3ZSBnZXQgZnJvbSB0aGUgY2FjaGUsCiAgICAg\nICAgICAgICAgICAvLyBzaW5jZSB3ZSdyZSBpbnNpZGUgdGhlIGNvbW1pdCgp\nIG1ldGhvZCwgc28gYW55IG1vZGlmaWNhdGlvbnMKICAgICAgICAgICAgICAg\nIC8vIHRvIHRoZSB1bmRlcmx5aW5nIGNhY2hlIGFyZSB2YWxpZC4gSWYgdGhl\nIGNvbW1pdCBoYWQgbm90CiAgICAgICAgICAgICAgICAvLyBhbHJlYWR5IHN1\nY2NlZWRlZCwgdGhlbiB3ZSdkIHdhbnQgdG8gY2xvbmUgdGhlIHJldHJpZXZl\nZAogICAgICAgICAgICAgICAgLy8gb2JqZWN0LgogICAgICAgICAgICAgICAg\naWYgKG1vZE1hcCA9PSBudWxsKQogICAgICAgICAgICAgICAgICAgIG1vZE1h\ncCA9IG5ldyBIYXNoTWFwKCk7CiAgICAgICAgICAgICAgICBkYXRhID0gY2Fj\naGUuZ2V0KHNtLmdldE9iamVjdElkKCkpOwogICAgICAgICAgICAgICAgbW9k\ncyA9IGdldE1vZGlmaWNhdGlvbnMobW9kTWFwLCBjYWNoZSk7CgogICAgICAg\nICAgICAgICAgLy8gZGF0YSBzaG91bGQgYWx3YXlzIGJlIG5vbi1udWxsLCBz\naW5jZSB0aGUgb2JqZWN0IGlzCiAgICAgICAgICAgICAgICAvLyBkaXJ0eSwg\nYnV0IG1heWJlIGl0IGdvdCBkcm9wcGVkIGZyb20gdGhlIGNhY2hlIGluIHRo\nZQogICAgICAgICAgICAgICAgLy8gaW50ZXJpbQogICAgICAgICAgICAgICAg\naWYgKGRhdGEgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIGRhdGEg\nPSBuZXdQQ0RhdGEoc20pOwogICAgICAgICAgICAgICAgICAgIGRhdGEuc3Rv\ncmUoc20pOwogICAgICAgICAgICAgICAgICAgIG1vZHMubmV3VXBkYXRlcy5h\nZGQobmV3IFBDRGF0YUhvbGRlcihkYXRhLCBzbSkpOwogICAgICAgICAgICAg\nICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBkYXRhLnN0b3JlKHNt\nLCBmaWVsZHMpOwogICAgICAgICAgICAgICAgICAgIG1vZHMuZXhpc3RpbmdV\ncGRhdGVzLmFkZChuZXcgUENEYXRhSG9sZGVyKGRhdGEsIHNtKSk7CiAgICAg\nICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAg\nIC8vIHJlbW92ZSBwY2RhdGFzIGZvciBkZWxldGVzCiAgICAgICAgaWYgKF9k\nZWxldGVzICE9IG51bGwpIHsKICAgICAgICAgICAgZm9yIChJdGVyYXRvciBp\ndHIgPSBfZGVsZXRlcy5pdGVyYXRvcigpOyBpdHIuaGFzTmV4dCgpOykgewog\nICAgICAgICAgICAgICAgc20gPSAoT3BlbkpQQVN0YXRlTWFuYWdlcikgaXRy\nLm5leHQoKTsKICAgICAgICAgICAgICAgIGNhY2hlID0gc20uZ2V0TWV0YURh\ndGEoKS5nZXREYXRhQ2FjaGUoKTsKICAgICAgICAgICAgICAgIGlmIChjYWNo\nZSA9PSBudWxsKQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwoKICAg\nICAgICAgICAgICAgIGlmIChtb2RNYXAgPT0gbnVsbCkKICAgICAgICAgICAg\nICAgICAgICBtb2RNYXAgPSBuZXcgSGFzaE1hcCgpOwogICAgICAgICAgICAg\nICAgbW9kcyA9IGdldE1vZGlmaWNhdGlvbnMobW9kTWFwLCBjYWNoZSk7CiAg\nICAgICAgICAgICAgICBtb2RzLmRlbGV0ZXMuYWRkKHNtLmdldE9iamVjdElk\nKCkpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBub3Rp\nZnkgdGhlIGNhY2hlcyBvZiB0aGUgY2hhbmdlcwogICAgICAgIGlmIChtb2RN\nYXAgIT0gbnVsbCkgewogICAgICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9\nIG1vZE1hcC5lbnRyeVNldCgpLml0ZXJhdG9yKCk7IGl0ci5oYXNOZXh0KCk7\nKSB7CiAgICAgICAgICAgICAgICBlbnRyeSA9IChNYXAuRW50cnkpIGl0ci5u\nZXh0KCk7CiAgICAgICAgICAgICAgICBjYWNoZSA9IChEYXRhQ2FjaGUpIGVu\ndHJ5LmdldEtleSgpOwogICAgICAgICAgICAgICAgbW9kcyA9IChNb2RpZmlj\nYXRpb25zKSBlbnRyeS5nZXRWYWx1ZSgpOwoKICAgICAgICAgICAgICAgIC8v\nIG1ha2Ugc3VyZSB3ZSdyZSBub3QgY2FjaGluZyBvbGQgdmVyc2lvbnMKICAg\nICAgICAgICAgICAgIGNhY2hlLndyaXRlTG9jaygpOwogICAgICAgICAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1Ub1ZlcnNp\nb25TYWZlUENEYXRhcyhjYWNoZSwgbW9kcy5hZGRpdGlvbnMpOwogICAgICAg\nICAgICAgICAgICAgIHRyYW5zZm9ybVRvVmVyc2lvblNhZmVQQ0RhdGFzKGNh\nY2hlLCBtb2RzLm5ld1VwZGF0ZXMpOwogICAgICAgICAgICAgICAgICAgIHRy\nYW5zZm9ybVRvVmVyc2lvblNhZmVQQ0RhdGFzKGNhY2hlLCBtb2RzLmV4aXN0\naW5nVXBkYXRlcyk7CiAgICAgICAgICAgICAgICAgICAgY2FjaGUuY29tbWl0\nKG1vZHMuYWRkaXRpb25zLCBtb2RzLm5ld1VwZGF0ZXMsCiAgICAgICAgICAg\nICAgICAgICAgICAgIG1vZHMuZXhpc3RpbmdVcGRhdGVzLCBtb2RzLmRlbGV0\nZXMpOwogICAgICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAg\nICAgICAgICBjYWNoZS53cml0ZVVubG9jaygpOwogICAgICAgICAgICAgICAg\nfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBpZiB3ZSB3\nZXJlIGluIGxhcmdlVHJhbnNhY3Rpb24gbW9kZSwgdGhlbiB3ZSBoYXZlIHJl\nY29yZGVkCiAgICAgICAgLy8gdGhlIGNsYXNzZXMgb2YgdXBkYXRlZC9kZWxl\ndGVkIG9iamVjdHMgYW5kIHRoZXNlIG5vdyBuZWVkIHRvIGJlCiAgICAgICAg\nLy8gZXZpY3RlZAogICAgICAgIGlmIChfY3R4LmlzTGFyZ2VUcmFuc2FjdGlv\nbigpKSB7CiAgICAgICAgICAgIGV2aWN0VHlwZXMoX2N0eC5nZXREZWxldGVk\nVHlwZXMoKSk7CiAgICAgICAgICAgIGV2aWN0VHlwZXMoX2N0eC5nZXRVcGRh\ndGVkVHlwZXMoKSk7CiAgICAgICAgfQoKICAgICAgICAvLyBhbmQgbm90aWZ5\nIHRoZSBxdWVyeSBjYWNoZS4gIG5vdGlmeSBpbiBvbmUgYmF0Y2ggdG8gcmVk\ndWNlIHN5bmNoCiAgICAgICAgUXVlcnlDYWNoZSBxdWVyeUNhY2hlID0gX2N0\neC5nZXRDb25maWd1cmF0aW9uKCkuCiAgICAgICAgICAgIGdldERhdGFDYWNo\nZU1hbmFnZXJJbnN0YW5jZSgpLmdldFN5c3RlbVF1ZXJ5Q2FjaGUoKTsKICAg\nICAgICBpZiAocXVlcnlDYWNoZSAhPSBudWxsKSB7CiAgICAgICAgICAgIENv\nbGxlY3Rpb24gcGVycyA9IF9jdHguZ2V0UGVyc2lzdGVkVHlwZXMoKTsKICAg\nICAgICAgICAgQ29sbGVjdGlvbiBkZWwgPSBfY3R4LmdldERlbGV0ZWRUeXBl\ncygpOwogICAgICAgICAgICBDb2xsZWN0aW9uIHVwID0gX2N0eC5nZXRVcGRh\ndGVkVHlwZXMoKTsKICAgICAgICAgICAgaW50IHNpemUgPSBwZXJzLnNpemUo\nKSArIGRlbC5zaXplKCkgKyB1cC5zaXplKCk7CiAgICAgICAgICAgIGlmIChz\naXplID4gMCkgewogICAgICAgICAgICAgICAgQ29sbGVjdGlvbiB0eXBlcyA9\nIG5ldyBBcnJheUxpc3Qoc2l6ZSk7CiAgICAgICAgICAgICAgICB0eXBlcy5h\nZGRBbGwocGVycyk7CiAgICAgICAgICAgICAgICB0eXBlcy5hZGRBbGwoZGVs\nKTsKICAgICAgICAgICAgICAgIHR5cGVzLmFkZEFsbCh1cCk7CiAgICAgICAg\nICAgICAgICBxdWVyeUNhY2hlLm9uVHlwZXNDaGFuZ2VkKG5ldyBUeXBlc0No\nYW5nZWRFdmVudCh0aGlzLCB0eXBlcykpOwogICAgICAgICAgICB9CiAgICAg\nICAgfQogICAgfQoKICAgIC8qKgogICAgICogVHJhbnNmb3JtcyBhIGNvbGxl\nY3Rpb24gb2Yge0BsaW5rIFBDRGF0YUhvbGRlcn1zIHRoYXQgbWlnaHQgY29u\ndGFpbgogICAgICogc3RhbGUgaW5zdGFuY2VzIGludG8gYSBjb2xsZWN0aW9u\nIG9mIHVwLXRvLWRhdGUge0BsaW5rIERhdGFDYWNoZVBDRGF0YX1zLgogICAg\nICovCiAgICBwcml2YXRlIHZvaWQgdHJhbnNmb3JtVG9WZXJzaW9uU2FmZVBD\nRGF0YXMoRGF0YUNhY2hlIGNhY2hlLAogICAgICAgIExpc3QgaG9sZGVycykg\newogICAgICAgIFBDRGF0YUhvbGRlciBob2xkZXI7CiAgICAgICAgRGF0YUNh\nY2hlUENEYXRhIG9sZHBjOwogICAgICAgIGZvciAoTGlzdEl0ZXJhdG9yIGl0\nZXIgPSBob2xkZXJzLmxpc3RJdGVyYXRvcigpOyBpdGVyLmhhc05leHQoKTsp\nIHsKICAgICAgICAgICAgaG9sZGVyID0gKFBDRGF0YUhvbGRlcikgaXRlci5u\nZXh0KCk7CiAgICAgICAgICAgIG9sZHBjID0gY2FjaGUuZ2V0KGhvbGRlci5z\nbS5nZXRPYmplY3RJZCgpKTsKICAgICAgICAgICAgaWYgKG9sZHBjICE9IG51\nbGwgJiYgY29tcGFyZVZlcnNpb24oaG9sZGVyLnNtLAogICAgICAgICAgICAg\nICAgaG9sZGVyLnNtLmdldFZlcnNpb24oKSwgb2xkcGMuZ2V0VmVyc2lvbigp\nKSA9PSBWRVJTSU9OX0VBUkxJRVIpCiAgICAgICAgICAgICAgICBpdGVyLnJl\nbW92ZSgpOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBpdGVy\nLnNldChob2xkZXIucGNkYXRhKTsKICAgICAgICB9CiAgICB9CgogICAgLyoq\nCiAgICAgKiBSZXR1cm4gYSB7QGxpbmsgTW9kaWZpY2F0aW9uc30gaW5zdGFu\nY2UgdG8gdHJhY2sgbW9kaWZpY2F0aW9ucwogICAgICogdG8gdGhlIGdpdmVu\nIGNhY2hlLCBjcmVhdGluZyBhbmQgY2FjaGluZyB0aGUgaW5zdGFuY2UgaWYg\naXQgZG9lcwogICAgICogbm90IGFscmVhZHkgZXhpc3QgaW4gdGhlIGdpdmVu\nIG1hcC4KICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgTW9kaWZpY2F0aW9u\ncyBnZXRNb2RpZmljYXRpb25zKE1hcCBtb2RNYXAsIERhdGFDYWNoZSBjYWNo\nZSkgewogICAgICAgIE1vZGlmaWNhdGlvbnMgbW9kcyA9IChNb2RpZmljYXRp\nb25zKSBtb2RNYXAuZ2V0KGNhY2hlKTsKICAgICAgICBpZiAobW9kcyA9PSBu\ndWxsKSB7CiAgICAgICAgICAgIG1vZHMgPSBuZXcgTW9kaWZpY2F0aW9ucygp\nOwogICAgICAgICAgICBtb2RNYXAucHV0KGNhY2hlLCBtb2RzKTsKICAgICAg\nICB9CiAgICAgICAgcmV0dXJuIG1vZHM7CiAgICB9CgogICAgcHVibGljIGJv\nb2xlYW4gZXhpc3RzKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIE9iamVjdCBl\nZGF0YSkgewogICAgICAgIERhdGFDYWNoZSBjYWNoZSA9IHNtLmdldE1ldGFE\nYXRhKCkuZ2V0RGF0YUNhY2hlKCk7CiAgICAgICAgaWYgKGNhY2hlICE9IG51\nbGwgJiYgIWlzTG9ja2luZyhudWxsKQogICAgICAgICAgICAmJiBjYWNoZS5j\nb250YWlucyhzbS5nZXRPYmplY3RJZCgpKSkKICAgICAgICAgICAgcmV0dXJu\nIHRydWU7CiAgICAgICAgcmV0dXJuIHN1cGVyLmV4aXN0cyhzbSwgZWRhdGEp\nOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIHN5bmNWZXJzaW9uKE9wZW5K\nUEFTdGF0ZU1hbmFnZXIgc20sIE9iamVjdCBlZGF0YSkgewogICAgICAgIERh\ndGFDYWNoZSBjYWNoZSA9IHNtLmdldE1ldGFEYXRhKCkuZ2V0RGF0YUNhY2hl\nKCk7CiAgICAgICAgaWYgKGNhY2hlID09IG51bGwgfHwgc20uaXNFbWJlZGRl\nZCgpKQogICAgICAgICAgICByZXR1cm4gc3VwZXIuc3luY1ZlcnNpb24oc20s\nIGVkYXRhKTsKCiAgICAgICAgRGF0YUNhY2hlUENEYXRhIGRhdGE7CiAgICAg\nICAgT2JqZWN0IHZlcnNpb24gPSBudWxsOwogICAgICAgIGRhdGEgPSBjYWNo\nZS5nZXQoc20uZ2V0T2JqZWN0SWQoKSk7CiAgICAgICAgaWYgKCFpc0xvY2tp\nbmcobnVsbCkgJiYgZGF0YSAhPSBudWxsKQogICAgICAgICAgICB2ZXJzaW9u\nID0gZGF0YS5nZXRWZXJzaW9uKCk7CgogICAgICAgIC8vIGlmIHdlIGhhdmUg\nYSBjYWNoZWQgdmVyc2lvbiB1cGRhdGUgZnJvbSB0aGVyZQogICAgICAgIGlm\nICh2ZXJzaW9uICE9IG51bGwpIHsKICAgICAgICAgICAgaWYgKCF2ZXJzaW9u\nLmVxdWFscyhzbS5nZXRWZXJzaW9uKCkpKSB7CiAgICAgICAgICAgICAgICBz\nbS5zZXRWZXJzaW9uKHZlcnNpb24pOwogICAgICAgICAgICAgICAgcmV0dXJu\nIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0cnVl\nOwogICAgICAgIH0KCiAgICAgICAgLy8gdXNlIGRhdGEgc3RvcmUgdmVyc2lv\nbgogICAgICAgIHJldHVybiBzdXBlci5zeW5jVmVyc2lvbihzbSwgZWRhdGEp\nOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGluaXRpYWxpemUoT3BlbkpQ\nQVN0YXRlTWFuYWdlciBzbSwgUENTdGF0ZSBzdGF0ZSwKICAgICAgICBGZXRj\naENvbmZpZ3VyYXRpb24gZmV0Y2gsIE9iamVjdCBlZGF0YSkgewogICAgICAg\nIERhdGFDYWNoZSBjYWNoZSA9IHNtLmdldE1ldGFEYXRhKCkuZ2V0RGF0YUNh\nY2hlKCk7CiAgICAgICAgaWYgKGNhY2hlID09IG51bGwgfHwgc20uaXNFbWJl\nZGRlZCgpKQogICAgICAgICAgICByZXR1cm4gc3VwZXIuaW5pdGlhbGl6ZShz\nbSwgc3RhdGUsIGZldGNoLCBlZGF0YSk7CgogICAgICAgIERhdGFDYWNoZVBD\nRGF0YSBkYXRhID0gY2FjaGUuZ2V0KHNtLmdldE9iamVjdElkKCkpOwogICAg\nICAgIGlmIChkYXRhICE9IG51bGwgJiYgIWlzTG9ja2luZyhmZXRjaCkpIHsK\nICAgICAgICAgICAgLy8jIyMgdGhlICdkYXRhLnR5cGUnIGFjY2VzcyBoZXJl\nIHByb2JhYmx5IG5lZWRzIHRvIGJlCiAgICAgICAgICAgIC8vIyMjIGFkZHJl\nc3NlZCBmb3IgYnVnIDUxMQogICAgICAgICAgICBzbS5pbml0aWFsaXplKGRh\ndGEuZ2V0VHlwZSgpLCBzdGF0ZSk7CiAgICAgICAgICAgIGRhdGEubG9hZChz\nbSwgZmV0Y2gsIGVkYXRhKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAg\nICAgICAgfQoKICAgICAgICAvLyBpbml0aWFsaXplIGZyb20gc3RvcmUgbWFu\nYWdlcgogICAgICAgIGlmICghc3VwZXIuaW5pdGlhbGl6ZShzbSwgc3RhdGUs\nIGZldGNoLCBlZGF0YSkpCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAg\nICAgICBpZiAoIV9jdHguZ2V0UG9wdWxhdGVEYXRhQ2FjaGUoKSkKICAgICAg\nICAgICAgcmV0dXJuIHRydWU7CgogICAgICAgIC8vIG1ha2Ugc3VyZSB0aGF0\nIHdlJ3JlIG5vdCB0cnlpbmcgdG8gY2FjaGUgYW4gb2xkIHZlcnNpb24KICAg\nICAgICBjYWNoZS53cml0ZUxvY2soKTsKICAgICAgICB0cnkgewogICAgICAg\nICAgICBkYXRhID0gY2FjaGUuZ2V0KHNtLmdldE9iamVjdElkKCkpOwogICAg\nICAgICAgICBpZiAoZGF0YSAhPSBudWxsICYmIGNvbXBhcmVWZXJzaW9uKHNt\nLCBzbS5nZXRWZXJzaW9uKCksCiAgICAgICAgICAgICAgICBkYXRhLmdldFZl\ncnNpb24oKSkgPT0gVkVSU0lPTl9FQVJMSUVSKQogICAgICAgICAgICAgICAg\ncmV0dXJuIHRydWU7CgogICAgICAgICAgICAvLyBjYWNoZSBuZXdseSBsb2Fk\nZWQgaW5mby4gSXQgaXMgc2FmZSB0byBjYWNoZSBkYXRhIGZyb3JtCiAgICAg\nICAgICAgIC8vIGluaXRpYWxpemUoKSBiZWNhdXNlIHRoaXMgbWV0aG9kIGlz\nIG9ubHkgY2FsbGVkIHVwb24KICAgICAgICAgICAgLy8gaW5pdGlhbCBsb2Fk\nIG9mIHRoZSBkYXRhLgogICAgICAgICAgICBpZiAoZGF0YSA9PSBudWxsKQog\nICAgICAgICAgICAgICAgZGF0YSA9IG5ld1BDRGF0YShzbSk7CiAgICAgICAg\nICAgIGRhdGEuc3RvcmUoc20pOwogICAgICAgICAgICBjYWNoZS5wdXQoZGF0\nYSk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgY2FjaGUud3Jp\ndGVVbmxvY2soKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAg\nICB9CgogICAgcHVibGljIGJvb2xlYW4gbG9hZChPcGVuSlBBU3RhdGVNYW5h\nZ2VyIHNtLCBCaXRTZXQgZmllbGRzLAogICAgICAgIEZldGNoQ29uZmlndXJh\ndGlvbiBmZXRjaCwgaW50IGxvY2tMZXZlbCwgT2JqZWN0IGVkYXRhKSB7CiAg\nICAgICAgRGF0YUNhY2hlIGNhY2hlID0gc20uZ2V0TWV0YURhdGEoKS5nZXRE\nYXRhQ2FjaGUoKTsKICAgICAgICBpZiAoY2FjaGUgPT0gbnVsbCB8fCBzbS5p\nc0VtYmVkZGVkKCkpCiAgICAgICAgICAgIHJldHVybiBzdXBlci5sb2FkKHNt\nLCBmaWVsZHMsIGZldGNoLCBsb2NrTGV2ZWwsIGVkYXRhKTsKCiAgICAgICAg\nRGF0YUNhY2hlUENEYXRhIGRhdGEgPSBjYWNoZS5nZXQoc20uZ2V0T2JqZWN0\nSWQoKSk7CiAgICAgICAgaWYgKGxvY2tMZXZlbCA9PSBMb2NrTGV2ZWxzLkxP\nQ0tfTk9ORSAmJiAhaXNMb2NraW5nKGZldGNoKQogICAgICAgICAgICAmJiBk\nYXRhICE9IG51bGwpCiAgICAgICAgICAgIGRhdGEubG9hZChzbSwgZmllbGRz\nLCBmZXRjaCwgZWRhdGEpOwogICAgICAgIGlmIChmaWVsZHMubGVuZ3RoKCkg\nPT0gMCkKICAgICAgICAgICAgcmV0dXJuIHRydWU7CgogICAgICAgIC8vIGxv\nYWQgZnJvbSBzdG9yZSBtYW5hZ2VyOyBjbG9uZSB0aGUgc2V0IG9mIHN0aWxs\nLXVubG9hZGVkIGZpZWxkcwogICAgICAgIC8vIHNvIHRoYXQgaWYgdGhlIHN0\nb3JlIG1hbmFnZXIgZGVjaWRlcyB0byBtb2RpZnkgaXQgaXQgd29uJ3QgYWZm\nZWN0IHVzCiAgICAgICAgaWYgKCFzdXBlci5sb2FkKHNtLCAoQml0U2V0KSBm\naWVsZHMuY2xvbmUoKSwgZmV0Y2gsIGxvY2tMZXZlbCwgZWRhdGEpKQogICAg\nICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgaWYgKCFfY3R4LmdldFBv\ncHVsYXRlRGF0YUNhY2hlKCkpCiAgICAgICAgICAgIHJldHVybiB0cnVlOwoK\nICAgICAgICAvLyBtYWtlIHN1cmUgdGhhdCB3ZSdyZSBub3QgdHJ5aW5nIHRv\nIGNhY2hlIGFuIG9sZCB2ZXJzaW9uCiAgICAgICAgY2FjaGUud3JpdGVMb2Nr\nKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZGF0YSA9IGNhY2hlLmdl\ndChzbS5nZXRPYmplY3RJZCgpKTsKICAgICAgICAgICAgaWYgKGRhdGEgIT0g\nbnVsbCAmJiBjb21wYXJlVmVyc2lvbihzbSwgc20uZ2V0VmVyc2lvbigpLAog\nICAgICAgICAgICAgICAgZGF0YS5nZXRWZXJzaW9uKCkpID09IFZFUlNJT05f\nRUFSTElFUikKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwoKICAgICAg\nICAgICAgLy8gY2FjaGUgbmV3bHkgbG9hZGVkIGluZm8KICAgICAgICAgICAg\nYm9vbGVhbiBpc05ldyA9IGRhdGEgPT0gbnVsbDsKICAgICAgICAgICAgaWYg\nKGlzTmV3KQogICAgICAgICAgICAgICAgZGF0YSA9IG5ld1BDRGF0YShzbSk7\nCiAgICAgICAgICAgIGRhdGEuc3RvcmUoc20sIGZpZWxkcyk7CiAgICAgICAg\nICAgIGlmIChpc05ldykKICAgICAgICAgICAgICAgIGNhY2hlLnB1dChkYXRh\nKTsKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgY2FjaGUudXBk\nYXRlKGRhdGEpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIGNh\nY2hlLndyaXRlVW5sb2NrKCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0\ncnVlOwogICAgfQoKICAgIHB1YmxpYyBDb2xsZWN0aW9uIGxvYWRBbGwoQ29s\nbGVjdGlvbiBzbXMsIFBDU3RhdGUgc3RhdGUsIGludCBsb2FkLAogICAgCQlG\nZXRjaENvbmZpZ3VyYXRpb24gZmV0Y2gsIE9iamVjdCBlZGF0YSkgewogICAg\nICAgIGlmIChpc0xvY2tpbmcoZmV0Y2gpKQogICAgICAgICAgICByZXR1cm4g\nc3VwZXIubG9hZEFsbChzbXMsIHN0YXRlLCBsb2FkLCBmZXRjaCwgZWRhdGEp\nOwoKICAgICAgICBNYXAgdW5sb2FkZWQgPSBudWxsOwogICAgICAgIE9wZW5K\nUEFTdGF0ZU1hbmFnZXIgc207CiAgICAgICAgRGF0YUNhY2hlIGNhY2hlOwog\nICAgICAgIERhdGFDYWNoZVBDRGF0YSBkYXRhOwogICAgICAgIEJpdFNldCBm\naWVsZHM7CgogICAgICAgIGZvciAoSXRlcmF0b3IgaXRyID0gc21zLml0ZXJh\ndG9yKCk7IGl0ci5oYXNOZXh0KCk7KSB7CiAgICAgICAgICAgIHNtID0gKE9w\nZW5KUEFTdGF0ZU1hbmFnZXIpIGl0ci5uZXh0KCk7CiAgICAgICAgICAgIGNh\nY2hlID0gc20uZ2V0TWV0YURhdGEoKS5nZXREYXRhQ2FjaGUoKTsKICAgICAg\nICAgICAgaWYgKGNhY2hlID09IG51bGwgfHwgc20uaXNFbWJlZGRlZCgpKSB7\nCiAgICAgICAgICAgICAgICB1bmxvYWRlZCA9IGFkZFVubG9hZGVkKHNtLCBu\ndWxsLCB1bmxvYWRlZCk7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAg\nICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHNtLmdldE1hbmFnZWRJbnN0\nYW5jZSgpID09IG51bGwpIHsKICAgICAgICAgICAgICAgIGRhdGEgPSBjYWNo\nZS5nZXQoc20uZ2V0T2JqZWN0SWQoKSk7CiAgICAgICAgICAgICAgICBpZiAo\nZGF0YSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgLy8jIyMgdGhl\nICdkYXRhLnR5cGUnIGFjY2VzcyBoZXJlIHByb2JhYmx5IG5lZWRzCiAgICAg\nICAgICAgICAgICAgICAgLy8jIyMgdG8gYmUgYWRkcmVzc2VkIGZvciBidWcg\nNTExCiAgICAgICAgICAgICAgICAgICAgc20uaW5pdGlhbGl6ZShkYXRhLmdl\ndFR5cGUoKSwgc3RhdGUpOwogICAgICAgICAgICAgICAgICAgIGRhdGEubG9h\nZChzbSwgZmV0Y2gsIGVkYXRhKTsKICAgICAgICAgICAgICAgIH0gZWxzZQog\nICAgICAgICAgICAgICAgICAgIHVubG9hZGVkID0gYWRkVW5sb2FkZWQoc20s\nIG51bGwsIHVubG9hZGVkKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChsb2Fk\nICE9IEZPUkNFX0xPQURfTk9ORQogICAgICAgICAgICAgICAgfHwgc20uZ2V0\nUENTdGF0ZSgpID09IFBDU3RhdGUuSE9MTE9XKSB7CiAgICAgICAgICAgICAg\nICBkYXRhID0gY2FjaGUuZ2V0KHNtLmdldE9iamVjdElkKCkpOwogICAgICAg\nICAgICAgICAgaWYgKGRhdGEgIT0gbnVsbCkgewogICAgICAgICAgICAgICAg\nICAgIC8vIGxvYWQgdW5sb2FkZWQgZmllbGRzCiAgICAgICAgICAgICAgICAg\nICAgZmllbGRzID0gc20uZ2V0VW5sb2FkZWQoZmV0Y2gpOwogICAgICAgICAg\nICAgICAgICAgIGRhdGEubG9hZChzbSwgZmllbGRzLCBmZXRjaCwgZWRhdGEp\nOwogICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZHMubGVuZ3RoKCkgPiAw\nKQogICAgICAgICAgICAgICAgICAgICAgICB1bmxvYWRlZCA9IGFkZFVubG9h\nZGVkKHNtLCBmaWVsZHMsIHVubG9hZGVkKTsKICAgICAgICAgICAgICAgIH0g\nZWxzZQogICAgICAgICAgICAgICAgICAgIHVubG9hZGVkID0gYWRkVW5sb2Fk\nZWQoc20sIG51bGwsIHVubG9hZGVkKTsKICAgICAgICAgICAgfSBlbHNlIGlm\nICghY2FjaGUuY29udGFpbnMoc20uZ2V0T2JqZWN0SWQoKSkpCiAgICAgICAg\nICAgICAgICB1bmxvYWRlZCA9IGFkZFVubG9hZGVkKHNtLCBudWxsLCB1bmxv\nYWRlZCk7CiAgICAgICAgfQoKICAgICAgICBpZiAodW5sb2FkZWQgPT0gbnVs\nbCkKICAgICAgICAgICAgcmV0dXJuIENvbGxlY3Rpb25zLkVNUFRZX0xJU1Q7\nCgogICAgICAgIC8vIGxvYWQgd2l0aCBkZWxlZ2F0ZQogICAgICAgIENvbGxl\nY3Rpb24gZmFpbGVkID0gc3VwZXIubG9hZEFsbCh1bmxvYWRlZC5rZXlTZXQo\nKSwgc3RhdGUsIGxvYWQsCiAgICAgICAgICAgIGZldGNoLCBlZGF0YSk7CiAg\nICAgICAgaWYgKCFfY3R4LmdldFBvcHVsYXRlRGF0YUNhY2hlKCkpCiAgICAg\nICAgICAgIHJldHVybiBmYWlsZWQ7CgogICAgICAgIC8vIGZvciBlYWNoIGxv\nYWRlZCBpbnN0YW5jZSwgbWVyZ2UgbG9hZGVkIHN0YXRlIGludG8gY2FjaGVk\nIGRhdGEKICAgICAgICBNYXAuRW50cnkgZW50cnk7CiAgICAgICAgYm9vbGVh\nbiBpc05ldzsKICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9IHVubG9hZGVk\nLmVudHJ5U2V0KCkuaXRlcmF0b3IoKTsgaXRyLmhhc05leHQoKTspIHsKICAg\nICAgICAgICAgZW50cnkgPSAoTWFwLkVudHJ5KSBpdHIubmV4dCgpOwogICAg\nICAgICAgICBzbSA9IChPcGVuSlBBU3RhdGVNYW5hZ2VyKSBlbnRyeS5nZXRL\nZXkoKTsKICAgICAgICAgICAgZmllbGRzID0gKEJpdFNldCkgZW50cnkuZ2V0\nVmFsdWUoKTsKCiAgICAgICAgICAgIGNhY2hlID0gc20uZ2V0TWV0YURhdGEo\nKS5nZXREYXRhQ2FjaGUoKTsKICAgICAgICAgICAgaWYgKGNhY2hlID09IG51\nbGwgfHwgc20uaXNFbWJlZGRlZCgpIHx8IChmYWlsZWQgIT0gbnVsbAogICAg\nICAgICAgICAgICAgJiYgZmFpbGVkLmNvbnRhaW5zKHNtLmdldElkKCkpKSkK\nICAgICAgICAgICAgICAgIGNvbnRpbnVlOwoKICAgICAgICAgICAgLy8gbWFr\nZSBzdXJlIHRoYXQgd2UncmUgbm90IHRyeWluZyB0byBjYWNoZSBhbiBvbGQg\ndmVyc2lvbgogICAgICAgICAgICBjYWNoZS53cml0ZUxvY2soKTsKICAgICAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGRhdGEgPSBjYWNoZS5nZXQo\nc20uZ2V0T2JqZWN0SWQoKSk7CiAgICAgICAgICAgICAgICBpZiAoZGF0YSAh\nPSBudWxsICYmIGNvbXBhcmVWZXJzaW9uKHNtLCBzbS5nZXRWZXJzaW9uKCks\nCiAgICAgICAgICAgICAgICAgICAgZGF0YS5nZXRWZXJzaW9uKCkpID09IFZF\nUlNJT05fRUFSTElFUikKICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsK\nCiAgICAgICAgICAgICAgICBpc05ldyA9IGRhdGEgPT0gbnVsbDsKICAgICAg\nICAgICAgICAgIGlmIChpc05ldykKICAgICAgICAgICAgICAgICAgICBkYXRh\nID0gbmV3UENEYXRhKHNtKTsKICAgICAgICAgICAgICAgIGlmIChmaWVsZHMg\nPT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICBkYXRhLnN0b3JlKHNtKTsK\nICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBkYXRh\nLnN0b3JlKHNtLCBmaWVsZHMpOwogICAgICAgICAgICAgICAgaWYgKGlzTmV3\nKQogICAgICAgICAgICAgICAgICAgIGNhY2hlLnB1dChkYXRhKTsKICAgICAg\nICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBjYWNoZS51cGRh\ndGUoZGF0YSk7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAg\nICAgICBjYWNoZS53cml0ZVVubG9jaygpOwogICAgICAgICAgICB9CiAgICAg\nICAgfQogICAgICAgIHJldHVybiBmYWlsZWQ7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBIZWxwZXIgbWV0aG9kIHRvIGFkZCBhbiB1bmxvYWRlZCBpbnN0YW5j\nZSB0byB0aGUgZ2l2ZW4gbWFwLgogICAgICovCiAgICBwcml2YXRlIHN0YXRp\nYyBNYXAgYWRkVW5sb2FkZWQoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgQml0\nU2V0IGZpZWxkcywKICAgICAgICBNYXAgdW5sb2FkZWQpIHsKICAgICAgICBp\nZiAodW5sb2FkZWQgPT0gbnVsbCkKICAgICAgICAgICAgdW5sb2FkZWQgPSBu\nZXcgSGFzaE1hcCgpOwogICAgICAgIHVubG9hZGVkLnB1dChzbSwgZmllbGRz\nKTsKICAgICAgICByZXR1cm4gdW5sb2FkZWQ7CiAgICB9CgogICAgcHVibGlj\nIENvbGxlY3Rpb24gZmx1c2goQ29sbGVjdGlvbiBzdGF0ZXMpIHsKICAgICAg\nICBDb2xsZWN0aW9uIGV4Y2VwcyA9IHN1cGVyLmZsdXNoKHN0YXRlcyk7Cgog\nICAgICAgIC8vIGlmIHRoZXJlIHdlcmUgZXJyb3JzIGV2aWN0IGJhZCBpbnN0\nYW5jZXMgYW5kIGRvbid0IHJlY29yZCBjaGFuZ2VzCiAgICAgICAgaWYgKCFl\neGNlcHMuaXNFbXB0eSgpKSB7CiAgICAgICAgICAgIGZvciAoSXRlcmF0b3Ig\naXRlciA9IGV4Y2Vwcy5pdGVyYXRvcigpOyBpdGVyLmhhc05leHQoKTsgKSB7\nCiAgICAgICAgICAgICAgICBFeGNlcHRpb24gZSA9IChFeGNlcHRpb24pIGl0\nZXIubmV4dCgpOwogICAgICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBP\ncHRpbWlzdGljRXhjZXB0aW9uKQogICAgICAgICAgICAgICAgICAgIGV2aWN0\nT3B0aW1pc3RpY0xvY2tGYWlsdXJlKChPcHRpbWlzdGljRXhjZXB0aW9uKSBl\nKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZXhjZXBzOwog\nICAgICAgIH0KCiAgICAgICAgLy8gaWYgbGFyZ2UgdHJhbnNhY3Rpb24gbW9k\nZSBkb24ndCByZWNvcmQgaW5kaXZpZHVhbCBjaGFuZ2VzCiAgICAgICAgaWYg\nKF9jdHguaXNMYXJnZVRyYW5zYWN0aW9uKCkpCiAgICAgICAgICAgIHJldHVy\nbiBleGNlcHM7CgogICAgICAgIE9wZW5KUEFTdGF0ZU1hbmFnZXIgc207CiAg\nICAgICAgZm9yIChJdGVyYXRvciBpdHIgPSBzdGF0ZXMuaXRlcmF0b3IoKTsg\naXRyLmhhc05leHQoKTspIHsKICAgICAgICAgICAgc20gPSAoT3BlbkpQQVN0\nYXRlTWFuYWdlcikgaXRyLm5leHQoKTsKCiAgICAgICAgICAgIGlmIChzbS5n\nZXRQQ1N0YXRlKCkgPT0gUENTdGF0ZS5QTkVXICYmICFzbS5pc0ZsdXNoZWQo\nKSkgewogICAgICAgICAgICAgICAgaWYgKF9pbnNlcnRzID09IG51bGwpCiAg\nICAgICAgICAgICAgICAgICAgX2luc2VydHMgPSBuZXcgQXJyYXlMaXN0KCk7\nCiAgICAgICAgICAgICAgICBfaW5zZXJ0cy5hZGQoc20pOwoKICAgICAgICAg\nICAgICAgIC8vIG1heSBoYXZlIGJlZW4gcmUtcGVyc2lzdGVkCiAgICAgICAg\nICAgICAgICBpZiAoX2RlbGV0ZXMgIT0gbnVsbCkKICAgICAgICAgICAgICAg\nICAgICBfZGVsZXRlcy5yZW1vdmUoc20pOwogICAgICAgICAgICB9IGVsc2Ug\naWYgKF9pbnNlcnRzICE9IG51bGwgCiAgICAgICAgICAgICAgICAmJiAoc20u\nZ2V0UENTdGF0ZSgpID09IFBDU3RhdGUuUE5FV0RFTEVURUQgCiAgICAgICAg\nICAgICAgICB8fCBzbS5nZXRQQ1N0YXRlKCkgPT0gUENTdGF0ZS5QTkVXRkxV\nU0hFRERFTEVURUQpKQogICAgICAgICAgICAgICAgX2luc2VydHMucmVtb3Zl\nKHNtKTsKICAgICAgICAgICAgZWxzZSBpZiAoc20uZ2V0UENTdGF0ZSgpID09\nIFBDU3RhdGUuUERJUlRZKSB7CiAgICAgICAgICAgICAgICBpZiAoX3VwZGF0\nZXMgPT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICBfdXBkYXRlcyA9IG5l\ndyBIYXNoTWFwKCk7CiAgICAgICAgICAgICAgICBfdXBkYXRlcy5wdXQoc20s\nIHNtLmdldERpcnR5KCkpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHNtLmdl\ndFBDU3RhdGUoKSA9PSBQQ1N0YXRlLlBERUxFVEVEKSB7CiAgICAgICAgICAg\nICAgICBpZiAoX2RlbGV0ZXMgPT0gbnVsbCkKICAgICAgICAgICAgICAgICAg\nICBfZGVsZXRlcyA9IG5ldyBIYXNoU2V0KCk7CiAgICAgICAgICAgICAgICBf\nZGVsZXRlcy5hZGQoc20pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAg\nICAgIHJldHVybiBDb2xsZWN0aW9ucy5FTVBUWV9MSVNUOwogICAgfQoKICAg\nIC8qKgogICAgICogRXZpY3QgZnJvbSB0aGUgY2FjaGUgdGhlIE9JRCAoaWYg\nYXZhaWxhYmxlKSB0aGF0IHJlc3VsdGVkIGluIGFuCiAgICAgKiBvcHRpbWlz\ndGljIGxvY2sgZXhjZXB0aW9uIGlmZiB0aGUgdmVyc2lvbiBpbmZvcm1hdGlv\nbiBpbiB0aGUgY2FjaGUgCiAgICAgKiBtYXRjaGVzIHRoZSB2ZXJzaW9uIGlu\nZm9ybWF0aW9uIGluIHRoZSBzdGF0ZSBtYW5hZ2VyIGZvciB0aGUgZmFpbGVk\nCiAgICAgKiBpbnN0YW5jZS4gVGhpcyBtZWFucyB0aGF0IHdlIHdpbGwgZXZp\nY3QgZGF0YSBmcm9tIHRoZSBjYWNoZSBmb3IgcmVjb3JkcyAKICAgICAqIHRo\nYXQgc2hvdWxkIGhhdmUgc3VjY2Vzc2Z1bGx5IGNvbW1pdHRlZCBhY2NvcmRp\nbmcgdG8gdGhlIGRhdGEgY2FjaGUgYnV0IAogICAgICogZGlkIG5vdC4gVGhl\nIG9ubHkgcHJlZGljdGFibGUgcmVhc29uIHRoYXQgY291bGQgY2F1c2UgdGhp\ncyBiZWhhdmlvcgogICAgICogaXMgYSBjb25jdXJyZW50IG91dC1vZi1iYW5k\nIG1vZGlmaWNhdGlvbiB0byB0aGUgZGF0YWJhc2UgdGhhdCB3YXMgbm90IAog\nICAgICogY29tbXVuaWNhdGVkIHRvIHRoZSBjYWNoZS4gVGhpcyBsb2dpYyBt\nYWtlcyBPcGVuSlBBJ3MgZGF0YSBjYWNoZSAKICAgICAqIHNvbWV3aGF0IHRv\nbGVyYW50IG9mIHN1Y2ggYmVoYXZpb3IsIGluIHRoYXQgdGhlIGNhY2hlIHdp\nbGwgYmUgY2xlYW5lZCAKICAgICAqIHVwIGFzIGZhaWx1cmVzIG9jY3VyLgog\nICAgICovCiAgICBwcml2YXRlIHZvaWQgZXZpY3RPcHRpbWlzdGljTG9ja0Zh\naWx1cmUoT3B0aW1pc3RpY0V4Y2VwdGlvbiBlKSB7CiAgICAgICAgT2JqZWN0\nIG8gPSAoKE9wdGltaXN0aWNFeGNlcHRpb24pIGUpLmdldEZhaWxlZE9iamVj\ndCgpOwogICAgICAgIE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20gPSBfY3R4Lmdl\ndFN0YXRlTWFuYWdlcihvKTsKICAgICAgICBpZiAoc20gPT0gbnVsbCkKICAg\nICAgICAgICAgcmV0dXJuOwoKICAgICAgICAvLyB0aGlzIGxvZ2ljIGNvdWxk\nIGJlIG1vcmUgZWZmaWNpZW50IC0tIHdlIGNvdWxkIGFnZ3JlZ2F0ZQogICAg\nICAgIC8vIGFsbCB0aGUgY2FjaGUtPm9pZCBjaGFuZ2VzLCBhbmQgdGhlbiB1\nc2UgRGF0YUNhY2hlLnJlbW92ZUFsbCgpIAogICAgICAgIC8vIGFuZCBsZXNz\nIHdyaXRlIGxvY2tzIHRvIGRvIHRoZSBtdXRhdGlvbi4KICAgICAgICBDbGFz\nc01ldGFEYXRhIG1ldGEgPSBzbS5nZXRNZXRhRGF0YSgpOwogICAgICAgIERh\ndGFDYWNoZSBjYWNoZSA9IG1ldGEuZ2V0RGF0YUNhY2hlKCk7CiAgICAgICAg\naWYgKGNhY2hlID09IG51bGwpCiAgICAgICAgICAgIHJldHVybjsKCiAgICAg\nICAgY2FjaGUud3JpdGVMb2NrKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgRGF0YUNhY2hlUENEYXRhIGRhdGEgPSBjYWNoZS5nZXQoc20uZ2V0SWQo\nKSk7CiAgICAgICAgICAgIGlmIChkYXRhID09IG51bGwpCiAgICAgICAgICAg\nICAgICByZXR1cm47CgogICAgICAgICAgICBib29sZWFuIHJlbW92ZTsKICAg\nICAgICAgICAgc3dpdGNoIChjb21wYXJlVmVyc2lvbihzbSwgc20uZ2V0VmVy\nc2lvbigpLCBkYXRhLmdldFZlcnNpb24oKSkpIHsKICAgICAgICAgICAgICAg\nIGNhc2UgU3RvcmVNYW5hZ2VyLlZFUlNJT05fTEFURVI6CiAgICAgICAgICAg\nICAgICBjYXNlIFN0b3JlTWFuYWdlci5WRVJTSU9OX1NBTUU6CiAgICAgICAg\nICAgICAgICAgICAgLy8gVGhpcyB0eCdzIGN1cnJlbnQgdmVyc2lvbiBpcyBs\nYXRlciB0aGFuIG9yIHRoZSBzYW1lIGFzIAogICAgICAgICAgICAgICAgICAg\nIC8vIHRoZSBkYXRhIGNhY2hlIHZlcnNpb24uIEluIHRoaXMgY2FzZSwgdGhl\nIGNvbW1pdCBzaG91bGQgCiAgICAgICAgICAgICAgICAgICAgLy8gaGF2ZSBz\ndWNjZWVkZWQgZnJvbSB0aGUgc3RhbmRwb2ludCBvZiB0aGUgY2FjaGUuIFJl\nbW92ZSAKICAgICAgICAgICAgICAgICAgICAvLyB0aGUgaW5zdGFuY2UgZnJv\nbSBjYWNoZSBpbiB0aGUgaG9wZXMgdGhhdCB0aGUgY2FjaGUgaXMgCiAgICAg\nICAgICAgICAgICAgICAgLy8gb3V0IG9mIHN5bmMuCiAgICAgICAgICAgICAg\nICAgICAgcmVtb3ZlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBicmVh\nazsKICAgICAgICAgICAgICAgIGNhc2UgU3RvcmVNYW5hZ2VyLlZFUlNJT05f\nRUFSTElFUjoKICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIHR4J3MgY3Vy\ncmVudCB2ZXJzaW9uIGlzIGVhcmxpZXIgdGhhbiB0aGUgZGF0YSAKICAgICAg\nICAgICAgICAgICAgICAvLyBjYWNoZSB2ZXJzaW9uLiBUaGlzIGlzIGEgbm9y\nbWFsIG9wdGltaXN0aWMgbG9jayBmYWlsdXJlLiAKICAgICAgICAgICAgICAg\nICAgICAvLyBEbyBub3QgY2xlYW4gdXAgdGhlIGNhY2hlOyBpdCBwcm9iYWJs\neSBhbHJlYWR5IGhhcyB0aGUgCiAgICAgICAgICAgICAgICAgICAgLy8gcmln\naHQgdmFsdWVzLCBhbmQgaWYgbm90LCBpdCdsbCBnZXQgY2xlYW5lZCB1cCBi\neSBhIHR4CiAgICAgICAgICAgICAgICAgICAgLy8gdGhhdCBmYWlscyBpbiBv\nbmUgb2YgdGhlIG90aGVyIGNhc2Ugc3RhdGVtZW50cy4KICAgICAgICAgICAg\nICAgICAgICByZW1vdmUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBi\ncmVhazsKICAgICAgICAgICAgICAgIGNhc2UgU3RvcmVNYW5hZ2VyLlZFUlNJ\nT05fRElGRkVSRU5UOgogICAgICAgICAgICAgICAgICAgIC8vIFRoZSB2ZXJz\naW9uIHN0cmF0ZWd5IGZvciB0aGUgZmFpbGVkIG9iamVjdCBkb2VzIG5vdAog\nICAgICAgICAgICAgICAgICAgIC8vIHN0b3JlIGVub3VnaCBpbmZvcm1hdGlv\nbiB0byBvcHRpbWl6ZSBmb3IgZXhwZWN0ZWQKICAgICAgICAgICAgICAgICAg\nICAvLyBmYWlsdXJlcy4gQ2xlYW4gdXAgdGhlIGNhY2hlLgogICAgICAgICAg\nICAgICAgICAgIHJlbW92ZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAg\nYnJlYWs7CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAg\nICAgICAgIC8vIFVuZXhwZWN0ZWQgcmV0dXJuIHZhbHVlLiBSZW1vdmUgdG8g\nYmUgZnV0dXJlLXByb29mLgogICAgICAgICAgICAgICAgICAgIHJlbW92ZSA9\nIHRydWU7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAg\nIH0KICAgICAgICAgICAgaWYgKHJlbW92ZSkKICAgICAgICAgICAgICAgIGNh\nY2hlLnJlbW92ZShzbS5nZXRJZCgpKTsKICAgICAgICB9IGZpbmFsbHkgewog\nICAgICAgICAgICBjYWNoZS53cml0ZVVubG9jaygpOwogICAgICAgIH0KICAg\nIH0KCiAgICBwdWJsaWMgU3RvcmVRdWVyeSBuZXdRdWVyeShTdHJpbmcgbGFu\nZ3VhZ2UpIHsKICAgICAgICBTdG9yZVF1ZXJ5IHEgPSBzdXBlci5uZXdRdWVy\neShsYW5ndWFnZSk7CgogICAgICAgIC8vIGlmIHRoZSBxdWVyeSBjYW4ndCBi\nZSBwYXJzZWQgb3IgaXQncyB1c2luZyBhIG5vbi1wYXJzZWQgbGFuZ3VhZ2UK\nICAgICAgICAvLyAob25lIGZvciB3aGljaCB0aGVyZSBpcyBubyBFeHByZXNz\naW9uUGFyc2VyKSwgd2UgY2FuJ3QgY2FjaGUgaXQuCiAgICAgICAgaWYgKHEg\nPT0gbnVsbCB8fCBRdWVyeUxhbmd1YWdlcy5wYXJzZXJGb3JMYW5ndWFnZShs\nYW5ndWFnZSkgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIHE7CgogICAg\nICAgIFF1ZXJ5Q2FjaGUgcXVlcnlDYWNoZSA9IF9jdHguZ2V0Q29uZmlndXJh\ndGlvbigpLgogICAgICAgICAgICBnZXREYXRhQ2FjaGVNYW5hZ2VySW5zdGFu\nY2UoKS5nZXRTeXN0ZW1RdWVyeUNhY2hlKCk7CiAgICAgICAgaWYgKHF1ZXJ5\nQ2FjaGUgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIHE7CgogICAgICAg\nIHJldHVybiBuZXcgUXVlcnlDYWNoZVN0b3JlUXVlcnkocSwgcXVlcnlDYWNo\nZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYSBuZXcgY2FjaGVh\nYmxlIGluc3RhbmNlIGZvciB0aGUgZ2l2ZW4gc3RhdGUgbWFuYWdlci4KICAg\nICAqLwogICAgcHJpdmF0ZSBEYXRhQ2FjaGVQQ0RhdGEgbmV3UENEYXRhKE9w\nZW5KUEFTdGF0ZU1hbmFnZXIgc20pIHsKICAgICAgICBDbGFzc01ldGFEYXRh\nIG1ldGEgPSBzbS5nZXRNZXRhRGF0YSgpOwogICAgICAgIGlmIChfZ2VuICE9\nIG51bGwpCiAgICAgICAgICAgIHJldHVybiAoRGF0YUNhY2hlUENEYXRhKSBf\nZ2VuLmdlbmVyYXRlUENEYXRhCiAgICAgICAgICAgICAgICAoc20uZ2V0T2Jq\nZWN0SWQoKSwgbWV0YSk7CiAgICAgICAgcmV0dXJuIG5ldyBEYXRhQ2FjaGVQ\nQ0RhdGFJbXBsKHNtLmdldE9iamVjdElkKCksIG1ldGEpOwogICAgfQoKICAg\nIC8qKgogICAgICogUmV0dXJuIHdoZXRoZXIgdGhlIGNvbnRleHQgaXMgbG9j\na2luZyBsb2FkZWQgZGF0YS4KICAgICAqLwogICAgcHJpdmF0ZSBib29sZWFu\nIGlzTG9ja2luZyhGZXRjaENvbmZpZ3VyYXRpb24gZmV0Y2gpIHsKICAgICAg\nICBpZiAoZmV0Y2ggPT0gbnVsbCkKICAgICAgICAgICAgZmV0Y2ggPSBfY3R4\nLmdldEZldGNoQ29uZmlndXJhdGlvbigpOwogICAgICAgIHJldHVybiBmZXRj\naC5nZXRSZWFkTG9ja0xldmVsKCkgPiBMb2NrTGV2ZWxzLkxPQ0tfTk9ORTsK\nICAgIH0KCiAgICAvKioKICAgICAqIFN0cnVjdHVyZSB1c2VkIGR1cmluZyB0\naGUgY29tbWl0IHByb2Nlc3MgdG8gdHJhY2sgY2FjaGUgbW9kaWZpY2F0aW9u\ncy4KICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgY2xhc3MgTW9kaWZpY2F0\naW9ucyB7CgogICAgICAgIHB1YmxpYyBmaW5hbCBMaXN0IGFkZGl0aW9ucyA9\nIG5ldyBBcnJheUxpc3QoKTsKICAgICAgICBwdWJsaWMgZmluYWwgTGlzdCBu\nZXdVcGRhdGVzID0gbmV3IEFycmF5TGlzdCgpOwogICAgICAgIHB1YmxpYyBm\naW5hbCBMaXN0IGV4aXN0aW5nVXBkYXRlcyA9IG5ldyBBcnJheUxpc3QoKTsK\nICAgICAgICBwdWJsaWMgZmluYWwgTGlzdCBkZWxldGVzID0gbmV3IEFycmF5\nTGlzdCgpOwogICAgfQoKICAgIHByaXZhdGUgc3RhdGljIGNsYXNzIFBDRGF0\nYUhvbGRlciB7CgogICAgICAgIHB1YmxpYyBmaW5hbCBEYXRhQ2FjaGVQQ0Rh\ndGEgcGNkYXRhOwogICAgICAgIHB1YmxpYyBmaW5hbCBPcGVuSlBBU3RhdGVN\nYW5hZ2VyIHNtOwoKICAgICAgICBwdWJsaWMgUENEYXRhSG9sZGVyKERhdGFD\nYWNoZVBDRGF0YSBwY2RhdGEsCiAgICAgICAgICAgIE9wZW5KUEFTdGF0ZU1h\nbmFnZXIgc20pIHsKICAgICAgICAgICAgdGhpcy5wY2RhdGEgPSBwY2RhdGE7\nCiAgICAgICAgICAgIHRoaXMuc20gPSBzbTsKCQl9Cgl9Cn0KCg==\n","encoding":"base64"}

