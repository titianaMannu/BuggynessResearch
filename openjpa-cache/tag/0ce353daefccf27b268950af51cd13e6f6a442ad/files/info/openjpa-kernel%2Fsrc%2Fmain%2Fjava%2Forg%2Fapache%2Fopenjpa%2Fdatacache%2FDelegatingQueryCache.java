{"sha":"508bd30117609a56539f2c9c60bef987d0dd136b","node_id":"MDQ6QmxvYjIwNjM2NDo1MDhiZDMwMTE3NjA5YTU2NTM5ZjJjOWM2MGJlZjk4N2QwZGQxMzZi","size":5586,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/508bd30117609a56539f2c9c60bef987d0dd136b","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5kYXRhY2FjaGU7CgppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25z\nLmxhbmcuT2JqZWN0VXRpbHM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\ndXRpbC5SdW50aW1lRXhjZXB0aW9uVHJhbnNsYXRvcjsKCi8qKgogKiBEZWxl\nZ2F0aW5nIHF1ZXJ5IGNhY2hlIHRoYXQgY2FuIGFsc28gcGVyZm9ybSBleGNl\ncHRpb24gdHJhbnNsYXRpb24gZm9yCiAqIHVzZSBpbiBmYWNhZGVzLiBUaGlz\nIGNhY2hlIGFsbG93cyBpdHMgZGVsZWdhdGUgdG8gYmUgbnVsbCwgaW4gd2hp\nY2ggY2FzZQogKiBpdCByZXR1cm5zIGRlZmF1bHQgdmFsdWVzIG9yIGFsbCBt\nZXRob2RzLgogKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKiBAc2luY2UgMC40\nLjAKICogQG5vamF2YWRvYwogKi8KcHVibGljIGNsYXNzIERlbGVnYXRpbmdR\ndWVyeUNhY2hlCiAgICBpbXBsZW1lbnRzIFF1ZXJ5Q2FjaGUgewoKICAgIHBy\naXZhdGUgZmluYWwgUXVlcnlDYWNoZSBfY2FjaGU7CiAgICBwcml2YXRlIGZp\nbmFsIERlbGVnYXRpbmdRdWVyeUNhY2hlIF9kZWw7CiAgICBwcml2YXRlIGZp\nbmFsIFJ1bnRpbWVFeGNlcHRpb25UcmFuc2xhdG9yIF90cmFuczsKCiAgICAv\nKioKICAgICAqIENvbnN0cnVjdG9yLiBTdXBwbHkgZGVsZWdhdGUuCiAgICAg\nKi8KICAgIHB1YmxpYyBEZWxlZ2F0aW5nUXVlcnlDYWNoZShRdWVyeUNhY2hl\nIGNhY2hlKSB7CiAgICAgICAgdGhpcyhjYWNoZSwgbnVsbCk7CiAgICB9Cgog\nICAgcHVibGljIERlbGVnYXRpbmdRdWVyeUNhY2hlKFF1ZXJ5Q2FjaGUgY2Fj\naGUsCiAgICAgICAgUnVudGltZUV4Y2VwdGlvblRyYW5zbGF0b3IgdHJhbnMp\nIHsKICAgICAgICBfY2FjaGUgPSBjYWNoZTsKICAgICAgICBfdHJhbnMgPSB0\ncmFuczsKICAgICAgICBpZiAoY2FjaGUgaW5zdGFuY2VvZiBEZWxlZ2F0aW5n\nUXVlcnlDYWNoZSkKICAgICAgICAgICAgX2RlbCA9IChEZWxlZ2F0aW5nUXVl\ncnlDYWNoZSkgX2NhY2hlOwogICAgICAgIGVsc2UKICAgICAgICAgICAgX2Rl\nbCA9IG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGRp\ncmVjdCBkZWxlZ2F0ZS4KICAgICAqLwogICAgcHVibGljIFF1ZXJ5Q2FjaGUg\nZ2V0RGVsZWdhdGUoKSB7CiAgICAgICAgcmV0dXJuIF9jYWNoZTsKICAgIH0K\nCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgbmF0aXZlIGRlbGVnYXRlLgog\nICAgICovCiAgICBwdWJsaWMgUXVlcnlDYWNoZSBnZXRJbm5lcm1vc3REZWxl\nZ2F0ZSgpIHsKICAgICAgICByZXR1cm4gKF9kZWwgPT0gbnVsbCkgPyBfY2Fj\naGUgOiBfZGVsLmdldElubmVybW9zdERlbGVnYXRlKCk7CiAgICB9CgogICAg\ncHVibGljIGludCBoYXNoQ29kZSgpIHsKICAgICAgICByZXR1cm4gZ2V0SW5u\nZXJtb3N0RGVsZWdhdGUoKS5oYXNoQ29kZSgpOwogICAgfQoKICAgIHB1Ymxp\nYyBib29sZWFuIGVxdWFscyhPYmplY3Qgb3RoZXIpIHsKICAgICAgICBpZiAo\nb3RoZXIgPT0gdGhpcykKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAg\nICAgaWYgKG90aGVyIGluc3RhbmNlb2YgRGVsZWdhdGluZ1F1ZXJ5Q2FjaGUp\nCiAgICAgICAgICAgIG90aGVyID0gKChEZWxlZ2F0aW5nUXVlcnlDYWNoZSkg\nb3RoZXIpLmdldElubmVybW9zdERlbGVnYXRlKCk7CiAgICAgICAgcmV0dXJu\nIE9iamVjdFV0aWxzLmVxdWFscyhnZXRJbm5lcm1vc3REZWxlZ2F0ZSgpLCBv\ndGhlcik7CiAgICB9CgogICAgLyoqCiAgICAgKiBUcmFuc2xhdGUgdGhlIE9w\nZW5KUEEgZXhjZXB0aW9uLgogICAgICovCiAgICBwcm90ZWN0ZWQgUnVudGlt\nZUV4Y2VwdGlvbiB0cmFuc2xhdGUoUnVudGltZUV4Y2VwdGlvbiByZSkgewog\nICAgICAgIHJldHVybiAoX3RyYW5zID09IG51bGwpID8gcmUgOiBfdHJhbnMu\ndHJhbnNsYXRlKHJlKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBpbml0aWFs\naXplKERhdGFDYWNoZU1hbmFnZXIgbWdyKSB7CiAgICAgICAgaWYgKF9jYWNo\nZSA9PSBudWxsKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgdHJ5IHsK\nICAgICAgICAgICAgX2NhY2hlLmluaXRpYWxpemUobWdyKTsKICAgICAgICB9\nIGNhdGNoIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAgICAgIHRo\ncm93IHRyYW5zbGF0ZShyZSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIG9uVHlwZXNDaGFuZ2VkKFR5cGVzQ2hhbmdlZEV2ZW50IGUpIHsK\nICAgICAgICBpZiAoX2NhY2hlID09IG51bGwpCiAgICAgICAgICAgIHJldHVy\nbjsKICAgICAgICB0cnkgewogICAgICAgICAgICBfY2FjaGUub25UeXBlc0No\nYW5nZWQoZSk7CiAgICAgICAgfSBjYXRjaCAoUnVudGltZUV4Y2VwdGlvbiBy\nZSkgewogICAgICAgICAgICB0aHJvdyB0cmFuc2xhdGUocmUpOwogICAgICAg\nIH0KICAgIH0KCiAgICBwdWJsaWMgUXVlcnlSZXN1bHQgZ2V0KFF1ZXJ5S2V5\nIHFrKSB7CiAgICAgICAgaWYgKF9jYWNoZSA9PSBudWxsKQogICAgICAgICAg\nICByZXR1cm4gbnVsbDsKICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1\ncm4gX2NhY2hlLmdldChxayk7CiAgICAgICAgfSBjYXRjaCAoUnVudGltZUV4\nY2VwdGlvbiByZSkgewogICAgICAgICAgICB0aHJvdyB0cmFuc2xhdGUocmUp\nOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgUXVlcnlSZXN1bHQgcHV0\nKFF1ZXJ5S2V5IHFrLCBRdWVyeVJlc3VsdCBvaWRzKSB7CiAgICAgICAgaWYg\nKF9jYWNoZSA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAg\nICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4gX2NhY2hlLnB1dChxaywg\nb2lkcyk7CiAgICAgICAgfSBjYXRjaCAoUnVudGltZUV4Y2VwdGlvbiByZSkg\newogICAgICAgICAgICB0aHJvdyB0cmFuc2xhdGUocmUpOwogICAgICAgIH0K\nICAgIH0KCiAgICBwdWJsaWMgUXVlcnlSZXN1bHQgcmVtb3ZlKFF1ZXJ5S2V5\nIHFrKSB7CiAgICAgICAgaWYgKF9jYWNoZSA9PSBudWxsKQogICAgICAgICAg\nICByZXR1cm4gbnVsbDsKICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1\ncm4gX2NhY2hlLnJlbW92ZShxayk7CiAgICAgICAgfSBjYXRjaCAoUnVudGlt\nZUV4Y2VwdGlvbiByZSkgewogICAgICAgICAgICB0aHJvdyB0cmFuc2xhdGUo\ncmUpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjbGVhcigp\nIHsKICAgICAgICBpZiAoX2NhY2hlID09IG51bGwpCiAgICAgICAgICAgIHJl\ndHVybjsKICAgICAgICB0cnkgewogICAgICAgICAgICBfY2FjaGUuY2xlYXIo\nKTsKICAgICAgICB9IGNhdGNoIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7CiAg\nICAgICAgICAgIHRocm93IHRyYW5zbGF0ZShyZSk7CiAgICAgICAgfQogICAg\nfQoKICAgIHB1YmxpYyBib29sZWFuIHBpbihRdWVyeUtleSBxaykgewogICAg\nICAgIGlmIChfY2FjaGUgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIGZh\nbHNlOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBfY2FjaGUu\ncGluKHFrKTsKICAgICAgICB9IGNhdGNoIChSdW50aW1lRXhjZXB0aW9uIHJl\nKSB7CiAgICAgICAgICAgIHRocm93IHRyYW5zbGF0ZShyZSk7CiAgICAgICAg\nfQogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIHVucGluKFF1ZXJ5S2V5IHFr\nKSB7CiAgICAgICAgaWYgKF9jYWNoZSA9PSBudWxsKQogICAgICAgICAgICBy\nZXR1cm4gZmFsc2U7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJu\nIF9jYWNoZS51bnBpbihxayk7CiAgICAgICAgfSBjYXRjaCAoUnVudGltZUV4\nY2VwdGlvbiByZSkgewogICAgICAgICAgICB0aHJvdyB0cmFuc2xhdGUocmUp\nOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCB3cml0ZUxvY2so\nKSB7CiAgICAgICAgaWYgKF9jYWNoZSA9PSBudWxsKQogICAgICAgICAgICBy\nZXR1cm47CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgX2NhY2hlLndyaXRl\nTG9jaygpOwogICAgICAgIH0gY2F0Y2ggKFJ1bnRpbWVFeGNlcHRpb24gcmUp\nIHsKICAgICAgICAgICAgdGhyb3cgdHJhbnNsYXRlKHJlKTsKICAgICAgICB9\nCiAgICB9CgogICAgcHVibGljIHZvaWQgd3JpdGVVbmxvY2soKSB7CiAgICAg\nICAgaWYgKF9jYWNoZSA9PSBudWxsKQogICAgICAgICAgICByZXR1cm47CiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgX2NhY2hlLndyaXRlVW5sb2NrKCk7\nCiAgICAgICAgfSBjYXRjaCAoUnVudGltZUV4Y2VwdGlvbiByZSkgewogICAg\nICAgICAgICB0aHJvdyB0cmFuc2xhdGUocmUpOwogICAgICAgIH0KICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBhZGRUeXBlc0NoYW5nZWRMaXN0ZW5lcihUeXBl\nc0NoYW5nZWRMaXN0ZW5lciBsaXN0ZW4pIHsKICAgICAgICBpZiAoX2NhY2hl\nID09IG51bGwpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB0cnkgewog\nICAgICAgICAgICBfY2FjaGUuYWRkVHlwZXNDaGFuZ2VkTGlzdGVuZXIobGlz\ndGVuKTsKICAgICAgICB9IGNhdGNoIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7\nCiAgICAgICAgICAgIHRocm93IHRyYW5zbGF0ZShyZSk7CiAgICAgICAgfQog\nICAgfQoKICAgIHB1YmxpYyBib29sZWFuIHJlbW92ZVR5cGVzQ2hhbmdlZExp\nc3RlbmVyKFR5cGVzQ2hhbmdlZExpc3RlbmVyIGxpc3RlbikgewogICAgICAg\nIGlmIChfY2FjaGUgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIGZhbHNl\nOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBfY2FjaGUucmVt\nb3ZlVHlwZXNDaGFuZ2VkTGlzdGVuZXIobGlzdGVuKTsKICAgICAgICB9IGNh\ndGNoIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAgICAgIHRocm93\nIHRyYW5zbGF0ZShyZSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIGNsb3NlKCkgewogICAgICAgIGlmIChfY2FjaGUgPT0gbnVsbCkKICAg\nICAgICAgICAgcmV0dXJuOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIF9j\nYWNoZS5jbG9zZSgpOwogICAgICAgIH0gY2F0Y2ggKFJ1bnRpbWVFeGNlcHRp\nb24gcmUpIHsKICAgICAgICAgICAgdGhyb3cgdHJhbnNsYXRlKHJlKTsKCQl9\nCgl9Cn0K\n","encoding":"base64"}

