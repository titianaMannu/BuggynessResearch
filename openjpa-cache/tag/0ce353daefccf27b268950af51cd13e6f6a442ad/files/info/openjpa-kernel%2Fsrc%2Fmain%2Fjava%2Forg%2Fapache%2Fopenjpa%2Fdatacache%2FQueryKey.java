{"sha":"33ae63e436290fd632a60cdaac7279277bb9c5f6","node_id":"MDQ6QmxvYjIwNjM2NDozM2FlNjNlNDM2MjkwZmQ2MzJhNjBjZGFhYzcyNzkyNzdiYjljNWY2","size":17317,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/33ae63e436290fd632a60cdaac7279277bb9c5f6","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5kYXRhY2FjaGU7CgppbXBvcnQgamF2YS5pby5FeHRlcm5hbGl6\nYWJsZTsKaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247CmltcG9ydCBqYXZh\nLmlvLk9iamVjdElucHV0OwppbXBvcnQgamF2YS5pby5PYmplY3RPdXRwdXQ7\nCmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0OwppbXBvcnQgamF2YS51dGls\nLkNvbGxlY3Rpb247CmltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbnM7Cmlt\ncG9ydCBqYXZhLnV0aWwuRGF0ZTsKaW1wb3J0IGphdmEudXRpbC5IYXNoTWFw\nOwppbXBvcnQgamF2YS51dGlsLkhhc2hTZXQ7CmltcG9ydCBqYXZhLnV0aWwu\nSXRlcmF0b3I7CmltcG9ydCBqYXZhLnV0aWwuTGlua2VkTGlzdDsKaW1wb3J0\nIGphdmEudXRpbC5MaXN0OwppbXBvcnQgamF2YS51dGlsLk1hcDsKaW1wb3J0\nIGphdmEudXRpbC5TZXQ7CmltcG9ydCBqYXZhLnV0aWwuU29ydGVkU2V0Owpp\nbXBvcnQgamF2YS51dGlsLlRyZWVTZXQ7CgppbXBvcnQgb3JnLmFwYWNoZS5j\nb21tb25zLmxhbmcuT2JqZWN0VXRpbHM7CmltcG9ydCBvcmcuYXBhY2hlLmNv\nbW1vbnMubGFuZy5TdHJpbmdVdGlsczsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5lbmhhbmNlLlBDUmVnaXN0cnk7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEua2VybmVsLlF1ZXJ5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmtlcm5lbC5RdWVyeUNvbnRleHQ7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEua2VybmVsLlN0b3JlQ29udGV4dDsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5tZXRhLkNsYXNzTWV0YURhdGE7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEubWV0YS5KYXZhVHlwZXM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEubWV0YS5NZXRhRGF0YVJlcG9zaXRvcnk7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEudXRpbC5JbXBsSGVscGVyOwoKLyoqCiAqIFRoaXMgY2xhc3Mg\nc3RvcmVzIGluZm9ybWF0aW9uIGFib3V0IGEgcGFydGljdWxhciBpbnZvY2F0\naW9uIG9mCiAqIGEgcXVlcnkuIEl0IGNvbnRhaW5zIGEgcmVmZXJlbmNlIHRv\nIHRoZSBleHRlcm5hbCBwcm9wZXJ0aWVzIG9mIHRoZQogKiBxdWVyeSB0aGF0\nIHdhcyBleGVjdXRlZCwgYXMgd2VsbCBhcyBhbnkgcGFyYW1ldGVycyB1c2Vk\nIHRvIGV4ZWN1dGUKICogdGhhdCBxdWVyeSwgd2l0aCBvbmUgZXhjZXB0aW9u\nOiBmaXJzdC1jbGFzcyBvYmplY3RzIHVzZWQgYXMKICogcGFyYW1ldGVyIHZh\nbHVlcyBhcmUgY29udmVydGVkIHRvIE9JRHMuCiAqCiAqIEBhdXRob3IgUGF0\ncmljayBMaW5za2V5CiAqLwpwdWJsaWMgY2xhc3MgUXVlcnlLZXkKICAgIGlt\ncGxlbWVudHMgRXh0ZXJuYWxpemFibGUgewoKICAgIC8vIGluaXRpYWxpemUg\ndGhlIHNldCBvZiB1bm1vZGlmaWFibGUgY2xhc3Nlcy4gVGhpcyBhbGxvd3Mg\ndXMKICAgIC8vIHRvIGF2b2lkIGNsb25pbmcgY29sbGVjdGlvbnMgdGhhdCBh\ncmUgbm90IG1vZGlmaWFibGUsCiAgICAvLyBwcm92aWRlZCB0aGF0IHRoZXkg\nZG8gbm90IGNvbnRhaW4gbXV0YWJsZSBvYmplY3RzLgogICAgcHJpdmF0ZSBz\ndGF0aWMgQ29sbGVjdGlvbiBzX3VubW9kID0gbmV3IEhhc2hTZXQoKTsKCiAg\nICBzdGF0aWMgewogICAgICAgIC8vIGhhbmRsZSB0aGUgc2V0IHR5cGVzOyBq\nZGsgdXNlcyBkaWZmZXJlbnQgY2xhc3NlcyBmb3IgY29sbGVjdGlvbiwKICAg\nICAgICAvLyBzZXQsIGFuZCBzb3J0ZWQgc2V0CiAgICAgICAgVHJlZVNldCBz\nID0gbmV3IFRyZWVTZXQoKTsKICAgICAgICBzX3VubW9kLmFkZChDb2xsZWN0\naW9ucy51bm1vZGlmaWFibGVDb2xsZWN0aW9uKHMpLmdldENsYXNzKCkpOwog\nICAgICAgIHNfdW5tb2QuYWRkKENvbGxlY3Rpb25zLnVubW9kaWZpYWJsZVNl\ndChzKS5nZXRDbGFzcygpKTsKICAgICAgICBzX3VubW9kLmFkZChDb2xsZWN0\naW9ucy51bm1vZGlmaWFibGVTb3J0ZWRTZXQocykuZ2V0Q2xhc3MoKSk7Cgog\nICAgICAgIC8vIGhhbmRsZSB0aGUgbGlzdCB0eXBlczsgamRrIHVzZXMgZGlm\nZmVyZW50IGNsYXNzZXMgZm9yIHN0YW5kYXJkCiAgICAgICAgLy8gYW5kIHJh\nbmRvbSBhY2Nlc3MgbGlzdHMKICAgICAgICBMaXN0IGwgPSBuZXcgTGlua2Vk\nTGlzdCgpOwogICAgICAgIHNfdW5tb2QuYWRkKENvbGxlY3Rpb25zLnVubW9k\naWZpYWJsZUxpc3QobCkuZ2V0Q2xhc3MoKSk7CiAgICAgICAgbCA9IG5ldyBB\ncnJheUxpc3QoMCk7CiAgICAgICAgc191bm1vZC5hZGQoQ29sbGVjdGlvbnMu\ndW5tb2RpZmlhYmxlTGlzdChsKS5nZXRDbGFzcygpKTsKCiAgICAgICAgLy8g\naGFuZGxlIHRoZSBjb25zdGFudCB0eXBlcwogICAgICAgIHNfdW5tb2QuYWRk\nKENvbGxlY3Rpb25zLkVNUFRZX1NFVC5nZXRDbGFzcygpKTsKICAgICAgICBz\nX3VubW9kLmFkZChDb2xsZWN0aW9ucy5FTVBUWV9MSVNULmdldENsYXNzKCkp\nOwogICAgfQoKICAgIC8vIGNhY2hpbmcgc3RhdGU7IG5vIG5lZWQgdG8gaW5j\nbHVkZSBwYXJhbWV0ZXIgYW5kIHZhcmlhYmxlIGRlY2xhcmF0aW9ucwogICAg\nLy8gYmVjYXVzZSB0aGV5IGFyZSBpbXBsaWNpdCBpbiB0aGUgZmlsdGVyCiAg\nICBwcml2YXRlIFN0cmluZyBfY2FuZGlkYXRlQ2xhc3NOYW1lOwogICAgcHJp\ndmF0ZSBib29sZWFuIF9zdWJjbGFzc2VzOwogICAgcHJpdmF0ZSBTZXQgX2Fj\nY2Vzc1BhdGhDbGFzc05hbWVzOwogICAgcHJpdmF0ZSBTdHJpbmcgX3F1ZXJ5\nOwogICAgcHJpdmF0ZSBib29sZWFuIF9pZ25vcmVDaGFuZ2VzOwogICAgcHJp\ndmF0ZSBNYXAgX3BhcmFtczsKICAgIHByaXZhdGUgbG9uZyBfcmFuZ2VTdGFy\ndDsKICAgIHByaXZhdGUgbG9uZyBfcmFuZ2VFbmQ7CgogICAgLy8gIyMjIHBj\nbDogMiBNYXkgMjAwMzogc2hvdWxkIHRoaXMgdGltZW91dCB0YWtlIGludG8g\nYWNjb3VudCB0aGUKICAgIC8vICMjIyB0aW1lb3V0cyBmb3IgY2xhc3NlcyBp\nbiB0aGUgYWNjZXNzIHBhdGggb2YgdGhlIHF1ZXJ5PwogICAgLy8gIyMjIEN1\ncnJlbnRseSwgaXQgb25seSBjb25zaWRlcnMgdGhlIGNhbmRpZGF0ZSBjbGFz\ncyBhbmQgaXRzCiAgICAvLyAjIyMgc3ViY2xhc3Nlcy4gTm90ZSB0aGF0IHRo\naXMgdmFsdWUgaXMgdXNlZCB0byBkZWNpZGUgd2hldGhlcgogICAgLy8gIyMj\nIG9yIG5vdCBPSURzIHNob3VsZCBiZSByZWdpc3RlcmVkIGZvciBleHBpcmF0\naW9uIGNhbGxiYWNrcwogICAgcHJpdmF0ZSBpbnQgX3RpbWVvdXQgPSAtMTsK\nCiAgICAvKioKICAgICAqIFJldHVybiBhIGtleSBmb3IgdGhlIGdpdmVuIHF1\nZXJ5LCBvciBudWxsIGlmIGl0IGlzIG5vdCBjYWNoZWFibGUuCiAgICAgKi8K\nICAgIHB1YmxpYyBzdGF0aWMgUXVlcnlLZXkgbmV3SW5zdGFuY2UoUXVlcnkg\ncSkgewogICAgICAgIHJldHVybiBuZXdJbnN0YW5jZShxLCAoT2JqZWN0W10p\nIG51bGwpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIGEga2V5IGZv\nciB0aGUgZ2l2ZW4gcXVlcnksIG9yIG51bGwgaWYgaXQgaXMgbm90IGNhY2hl\nYWJsZS4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBRdWVyeUtleSBuZXdJ\nbnN0YW5jZShRdWVyeSBxLCBPYmplY3RbXSBhcmdzKSB7CiAgICAgICAgLy8g\nY29tcGlsZSB0byBtYWtlIHN1cmUgaW5mbyBlbmNvZGVkIGluIHF1ZXJ5IHN0\ncmluZyBpcyBhdmFpbGFibGUKICAgICAgICAvLyB2aWEgQVBJIGNhbGxzIChj\nYW5kaWRhdGUgY2xhc3MsIHJlc3VsdCBjbGFzcywgZXRjKQogICAgICAgIHEu\nY29tcGlsZSgpOwogICAgICAgIHJldHVybiBuZXdJbnN0YW5jZShxLCBmYWxz\nZSwgYXJncywgcS5nZXRDYW5kaWRhdGVUeXBlKCksCiAgICAgICAgICAgIHEu\naGFzU3ViY2xhc3NlcygpLCBxLmdldFN0YXJ0UmFuZ2UoKSwgcS5nZXRFbmRS\nYW5nZSgpKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiBhIGtleSBm\nb3IgdGhlIGdpdmVuIHF1ZXJ5LCBvciBudWxsIGlmIGl0IGlzIG5vdCBjYWNo\nZWFibGUuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgUXVlcnlLZXkgbmV3\nSW5zdGFuY2UoUXVlcnkgcSwgTWFwIGFyZ3MpIHsKICAgICAgICAvLyBjb21w\naWxlIHRvIG1ha2Ugc3VyZSBpbmZvIGVuY29kZWQgaW4gcXVlcnkgc3RyaW5n\nIGlzIGF2YWlsYWJsZQogICAgICAgIC8vIHZpYSBBUEkgY2FsbHMgKGNhbmRp\nZGF0ZSBjbGFzcywgcmVzdWx0IGNsYXNzLCBldGMpCiAgICAgICAgcS5jb21w\naWxlKCk7CiAgICAgICAgcmV0dXJuIG5ld0luc3RhbmNlKHEsIGZhbHNlLCBh\ncmdzLCBxLmdldENhbmRpZGF0ZVR5cGUoKSwKICAgICAgICAgICAgcS5oYXNT\ndWJjbGFzc2VzKCksIHEuZ2V0U3RhcnRSYW5nZSgpLCBxLmdldEVuZFJhbmdl\nKCkpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIGEga2V5IGZvciB0\naGUgZ2l2ZW4gcXVlcnksIG9yIG51bGwgaWYgaXQgaXMgbm90IGNhY2hlYWJs\nZS4KICAgICAqLwogICAgc3RhdGljIFF1ZXJ5S2V5IG5ld0luc3RhbmNlKFF1\nZXJ5Q29udGV4dCBxLCBib29sZWFuIHBhY2tlZCwgT2JqZWN0W10gYXJncywK\nICAgICAgICBDbGFzcyBjYW5kaWRhdGUsIGJvb2xlYW4gc3VicywgbG9uZyBz\ndGFydElkeCwgbG9uZyBlbmRJZHgpIHsKICAgICAgICBRdWVyeUtleSBrZXkg\nPSBjcmVhdGVLZXkocSwgcGFja2VkLCBjYW5kaWRhdGUsIHN1YnMsIHN0YXJ0\nSWR4LCBlbmRJZHgpOwogICAgICAgIGlmIChrZXkgIT0gbnVsbCAmJiBzZXRQ\nYXJhbXMoa2V5LCBxLCBhcmdzKSkKICAgICAgICAgICAgcmV0dXJuIGtleTsK\nICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICAvKioKICAgICAqIFJl\ndHVybiBhIGtleSBmb3IgdGhlIGdpdmVuIHF1ZXJ5LCBvciBudWxsIGlmIGl0\nIGlzIG5vdCBjYWNoZWFibGUuCiAgICAgKi8KICAgIHN0YXRpYyBRdWVyeUtl\neSBuZXdJbnN0YW5jZShRdWVyeUNvbnRleHQgcSwgYm9vbGVhbiBwYWNrZWQs\nIE1hcCBhcmdzLAogICAgICAgIENsYXNzIGNhbmRpZGF0ZSwgYm9vbGVhbiBz\ndWJzLCBsb25nIHN0YXJ0SWR4LCBsb25nIGVuZElkeCkgewogICAgICAgIFF1\nZXJ5S2V5IGtleSA9IGNyZWF0ZUtleShxLCBwYWNrZWQsIGNhbmRpZGF0ZSwg\nc3Vicywgc3RhcnRJZHgsIGVuZElkeCk7CiAgICAgICAgaWYgKGtleSAhPSBu\ndWxsICYmIChhcmdzID09IG51bGwgfHwgYXJncy5pc0VtcHR5KCkgfHwKICAg\nICAgICAgICAgc2V0UGFyYW1zKGtleSwgcS5nZXRTdG9yZUNvbnRleHQoKSwg\nbmV3IEhhc2hNYXAoYXJncykpKSkKICAgICAgICAgICAgcmV0dXJuIGtleTsK\nICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICAvKioKICAgICAqIEV4\ndHJhY3QgdGhlIHJlbGV2YW50IGlkZW50aWZ5aW5nIGluZm9ybWF0aW9uIGZy\nb20KICAgICAqIDxjb2RlPnE8L2NvZGU+LiBUaGlzIGluY2x1ZGVzIGluZm9y\nbWF0aW9uIHN1Y2ggYXMgY2FuZGlkYXRlCiAgICAgKiBjbGFzcywgcXVlcnkg\nZmlsdGVyLCBldGMuCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGljIFF1ZXJ5\nS2V5IGNyZWF0ZUtleShRdWVyeUNvbnRleHQgcSwgYm9vbGVhbiBwYWNrZWQs\nCiAgICAgICAgQ2xhc3MgY2FuZGlkYXRlQ2xhc3MsIGJvb2xlYW4gc3ViY2xh\nc3NlcywgbG9uZyBzdGFydElkeCwgbG9uZyBlbmRJZHgpIHsKICAgICAgICBp\nZiAoY2FuZGlkYXRlQ2xhc3MgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJu\nIG51bGw7CgogICAgICAgIC8vIGNhbiBvbmx5IGNhY2hlIGRhdGFzdG9yZSBx\ndWVyaWVzCiAgICAgICAgaWYgKHEuZ2V0Q2FuZGlkYXRlQ29sbGVjdGlvbigp\nICE9IG51bGwpCiAgICAgICAgICAgIHJldHVybiBudWxsOwoKICAgICAgICAv\nLyBubyBzdXBwb3J0IGFscmVhZHktcGFja2VkIHJlc3VsdHMKICAgICAgICBp\nZiAocS5nZXRSZXN1bHRUeXBlKCkgIT0gbnVsbCAmJiBwYWNrZWQpCiAgICAg\nICAgICAgIHJldHVybiBudWxsOwoKICAgICAgICAvLyBjYW4ndCBjYWNoZSBu\nb24tc2VyaWFsaXphYmxlIG5vbi1tYW5hZ2VkIGNvbXBsZXggdHlwZXMKICAg\nICAgICBDbGFzc1tdIHR5cGVzID0gcS5nZXRQcm9qZWN0aW9uVHlwZXMoKTsK\nICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHR5cGVzLmxlbmd0aDsgaSsr\nKSB7CiAgICAgICAgICAgIHN3aXRjaCAoSmF2YVR5cGVzLmdldFR5cGVDb2Rl\nKHR5cGVzW2ldKSkgewogICAgICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMu\nQVJSQVk6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAg\nICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5DT0xMRUNUSU9OOgogICAgICAg\nICAgICAgICAgY2FzZSBKYXZhVHlwZXMuTUFQOgogICAgICAgICAgICAgICAg\nY2FzZSBKYXZhVHlwZXMuT0JKRUNUOgogICAgICAgICAgICAgICAgICAgIGlm\nICghSW1wbEhlbHBlci5pc01hbmFnZWRUeXBlKHR5cGVzW2ldKSkKICAgICAg\nICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAg\nICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAg\nIC8vIHdlIGNhbid0IGNhY2hlIHRoZSBxdWVyeSBpZiB3ZSBkb24ndCBrbm93\nIHdoaWNoIGNsYXNzZXMgYXJlIGluIHRoZQogICAgICAgIC8vIGFjY2VzcyBw\nYXRoCiAgICAgICAgQ2xhc3NNZXRhRGF0YVtdIG1ldGFzID0gcS5nZXRBY2Nl\nc3NQYXRoTWV0YURhdGFzKCk7CiAgICAgICAgaWYgKG1ldGFzLmxlbmd0aCA9\nPSAwKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKCiAgICAgICAgU2V0IGFj\nY2Vzc1BhdGhDbGFzc05hbWVzID0gbmV3IEhhc2hTZXQoKGludCkgKG1ldGFz\nLmxlbmd0aCAqIDEuMzMgKyAxKSk7CiAgICAgICAgQ2xhc3NNZXRhRGF0YSBt\nZXRhOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbWV0YXMubGVuZ3Ro\nOyBpKyspIHsKICAgICAgICAgICAgLy8gc2luY2UgdGhlIGNsYXNzIGNoYW5n\nZSBmcmFtZXdvcmsgZGVhbHMgd2l0aCBsZWFzdC1kZXJpdmVkIHR5cGVzLAog\nICAgICAgICAgICAvLyByZWNvcmQgdGhlIGxlYXN0LWRlcml2ZWQgYWNjZXNz\nIHBhdGggdHlwZXMKICAgICAgICAgICAgbWV0YSA9IG1ldGFzW2ldOwogICAg\nICAgICAgICB3aGlsZSAobWV0YS5nZXRQQ1N1cGVyY2xhc3MoKSAhPSBudWxs\nKQogICAgICAgICAgICAgICAgbWV0YSA9IG1ldGEuZ2V0UENTdXBlcmNsYXNz\nTWV0YURhdGEoKTsKCiAgICAgICAgICAgIC8vIGVuc3VyZSB0aGF0IHRoaXMg\nbWV0YWRhdGEgaXMgY2FjaGVhYmxlCiAgICAgICAgICAgIGlmIChtZXRhLmdl\ndERhdGFDYWNoZSgpID09IG51bGwpCiAgICAgICAgICAgICAgICByZXR1cm4g\nbnVsbDsKICAgICAgICAgICAgYWNjZXNzUGF0aENsYXNzTmFtZXMuYWRkKG1l\ndGEuZ2V0RGVzY3JpYmVkVHlwZSgpLmdldE5hbWUoKSk7CiAgICAgICAgfQoK\nICAgICAgICAvLyBpZiBhbnkgb2YgdGhlIHR5cGVzIGFyZSBjdXJyZW50bHkg\nZGlydHksIHdlIGNhbid0IGNhY2hlIHRoaXMgcXVlcnkKICAgICAgICBTdG9y\nZUNvbnRleHQgY3R4ID0gcS5nZXRTdG9yZUNvbnRleHQoKTsKICAgICAgICBp\nZiAoaW50ZXJzZWN0cyhhY2Nlc3NQYXRoQ2xhc3NOYW1lcywgY3R4LmdldFBl\ncnNpc3RlZFR5cGVzKCkpCiAgICAgICAgICAgIHx8IGludGVyc2VjdHMoYWNj\nZXNzUGF0aENsYXNzTmFtZXMsIGN0eC5nZXRVcGRhdGVkVHlwZXMoKSkKICAg\nICAgICAgICAgfHwgaW50ZXJzZWN0cyhhY2Nlc3NQYXRoQ2xhc3NOYW1lcywg\nY3R4LmdldERlbGV0ZWRUeXBlcygpKSkKICAgICAgICAgICAgcmV0dXJuIG51\nbGw7CgogICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgdGltZW91dCBmb3IgdGhl\nIGtleQogICAgICAgIE1ldGFEYXRhUmVwb3NpdG9yeSByZXBvcyA9IGN0eC5n\nZXRDb25maWd1cmF0aW9uKCkuCiAgICAgICAgICAgIGdldE1ldGFEYXRhUmVw\nb3NpdG9yeUluc3RhbmNlKCk7CgogICAgICAgIC8vIHdvbid0IGZpbmQgbWV0\nYWRhdGEgZm9yIGludGVyZmFjZXMuCiAgICAgICAgaWYgKGNhbmRpZGF0ZUNs\nYXNzLmlzSW50ZXJmYWNlKCkpCiAgICAgICAgICAgIHJldHVybiBudWxsOwog\nICAgICAgIG1ldGEgPSByZXBvcy5nZXRNZXRhRGF0YShjYW5kaWRhdGVDbGFz\ncywgY3R4LmdldENsYXNzTG9hZGVyKCksIHRydWUpOwogICAgICAgIGludCB0\naW1lb3V0ID0gbWV0YS5nZXREYXRhQ2FjaGVUaW1lb3V0KCk7CiAgICAgICAg\naWYgKHN1YmNsYXNzZXMpIHsKICAgICAgICAgICAgbWV0YXMgPSBtZXRhLmdl\ndFBDU3ViY2xhc3NNZXRhRGF0YXMoKTsKICAgICAgICAgICAgaW50IHN1YlRp\nbWVvdXQ7CiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbWV0YXMu\nbGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIGlmIChtZXRhc1tpXS5n\nZXREYXRhQ2FjaGUoKSA9PSBudWxsKQogICAgICAgICAgICAgICAgICAgIHJl\ndHVybiBudWxsOwoKICAgICAgICAgICAgICAgIHN1YlRpbWVvdXQgPSBtZXRh\nc1tpXS5nZXREYXRhQ2FjaGVUaW1lb3V0KCk7CiAgICAgICAgICAgICAgICBp\nZiAoc3ViVGltZW91dCAhPSAtMSAmJiBzdWJUaW1lb3V0IDwgdGltZW91dCkK\nICAgICAgICAgICAgICAgICAgICB0aW1lb3V0ID0gc3ViVGltZW91dDsKICAg\nICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gdGVzdHMgYWxsIHBh\nc3NlZDsgY2FjaGVhYmxlCiAgICAgICAgUXVlcnlLZXkga2V5ID0gbmV3IFF1\nZXJ5S2V5KCk7CiAgICAgICAga2V5Ll9jYW5kaWRhdGVDbGFzc05hbWUgPSBj\nYW5kaWRhdGVDbGFzcy5nZXROYW1lKCk7CiAgICAgICAga2V5Ll9zdWJjbGFz\nc2VzID0gc3ViY2xhc3NlczsKICAgICAgICBrZXkuX2FjY2Vzc1BhdGhDbGFz\nc05hbWVzID0gYWNjZXNzUGF0aENsYXNzTmFtZXM7CiAgICAgICAga2V5Ll90\naW1lb3V0ID0gdGltZW91dDsKICAgICAgICBrZXkuX3F1ZXJ5ID0gcS5nZXRR\ndWVyeVN0cmluZygpOwogICAgICAgIGtleS5faWdub3JlQ2hhbmdlcyA9IHEu\nZ2V0SWdub3JlQ2hhbmdlcygpOwogICAgICAgIGtleS5fcmFuZ2VTdGFydCA9\nIHN0YXJ0SWR4OwogICAgICAgIGtleS5fcmFuZ2VFbmQgPSBlbmRJZHg7CiAg\nICAgICAgcmV0dXJuIGtleTsKICAgIH0KCiAgICAvKioKICAgICAqIENvbnZl\ncnQgYW4gYXJyYXkgb2YgYXJndW1lbnRzIGludG8gdGhlIGNvcnJlc3BvbmRp\nbmcgcGFyYW1ldGVyCiAgICAgKiBtYXAsIGFuZCBkbyBhbnkgUEMgdG8gT0lE\nIGNvbnZlcnNpb24gbmVjZXNzYXJ5LgogICAgICovCiAgICBwcml2YXRlIHN0\nYXRpYyBib29sZWFuIHNldFBhcmFtcyhRdWVyeUtleSBrZXksIFF1ZXJ5Q29u\ndGV4dCBxLAogICAgICAgIE9iamVjdFtdIGFyZ3MpIHsKICAgICAgICBpZiAo\nYXJncyA9PSBudWxsIHx8IGFyZ3MubGVuZ3RoID09IDApCiAgICAgICAgICAg\nIHJldHVybiB0cnVlOwoKICAgICAgICAvLyBDcmVhdGUgYSBtYXAgZm9yIHRo\nZSBnaXZlbiBwYXJhbWV0ZXJzLCBhbmQgY29udmVydCB0aGUKICAgICAgICAv\nLyBwYXJhbWV0ZXIgbGlzdCBpbnRvIGEgbWFwLCB1c2luZyB0aGUgcXVlcnkn\ncyBwYXJhbWV0ZXIKICAgICAgICAvLyBkZWNsYXJhdGlvbiB0byBkZXRlcm1p\nbmUgb3JkZXJpbmcgZXRjLgogICAgICAgIE1hcCB0eXBlcyA9IHEuZ2V0UGFy\nYW1ldGVyVHlwZXMoKTsKICAgICAgICBNYXAgbWFwID0gbmV3IEhhc2hNYXAo\nKGludCkgKHR5cGVzLnNpemUoKSAqIDEuMzMgKyAxKSk7CiAgICAgICAgaW50\nIGlkeCA9IDA7CiAgICAgICAgZm9yIChJdGVyYXRvciBpdGVyID0gdHlwZXMu\na2V5U2V0KCkuaXRlcmF0b3IoKTsgaXRlci5oYXNOZXh0KCk7IGlkeCsrKQog\nICAgICAgICAgICBtYXAucHV0KGl0ZXIubmV4dCgpLCBhcmdzW2lkeF0pOwog\nICAgICAgIHJldHVybiBzZXRQYXJhbXMoa2V5LCBxLmdldFN0b3JlQ29udGV4\ndCgpLCBtYXApOwogICAgfQoKICAgIC8qKgogICAgICogQ29udmVydCBwYXJh\nbWV0ZXJzIHRvIGEgZm9ybSB0aGF0IGlzIGNhY2hlYWJsZS4gTXV0YWJsZSBw\nYXJhbXMKICAgICAqIHdpbGwgYmUgY2xvbmVkLgogICAgICovCiAgICBwcml2\nYXRlIHN0YXRpYyBib29sZWFuIHNldFBhcmFtcyhRdWVyeUtleSBrZXksIFN0\nb3JlQ29udGV4dCBjdHgsCiAgICAgICAgTWFwIHBhcmFtcykgewogICAgICAg\nIGlmIChwYXJhbXMgPT0gbnVsbCB8fCBwYXJhbXMuaXNFbXB0eSgpKQogICAg\nICAgICAgICByZXR1cm4gdHJ1ZTsKCiAgICAgICAgTWFwLkVudHJ5IGU7CiAg\nICAgICAgT2JqZWN0IHY7CiAgICAgICAgZm9yIChJdGVyYXRvciBpdGVyID0g\ncGFyYW1zLmVudHJ5U2V0KCkuaXRlcmF0b3IoKTsgaXRlci5oYXNOZXh0KCk7\nKSB7CiAgICAgICAgICAgIGUgPSAoTWFwLkVudHJ5KSBpdGVyLm5leHQoKTsK\nICAgICAgICAgICAgdiA9IGUuZ2V0VmFsdWUoKTsKICAgICAgICAgICAgaWYg\nKEltcGxIZWxwZXIuaXNNYW5hZ2VhYmxlKHYpKSB7CiAgICAgICAgICAgICAg\nICBpZiAoIWN0eC5pc1BlcnNpc3RlbnQodikgfHwgY3R4LmlzTmV3KHYpIHx8\nIGN0eC5pc0RlbGV0ZWQodikpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJu\nIGZhbHNlOwogICAgICAgICAgICAgICAgZS5zZXRWYWx1ZShjdHguZ2V0T2Jq\nZWN0SWQodikpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAodiBp\nbnN0YW5jZW9mIENvbGxlY3Rpb24pIHsKICAgICAgICAgICAgICAgIENvbGxl\nY3Rpb24gYyA9IChDb2xsZWN0aW9uKSB2OwogICAgICAgICAgICAgICAgYm9v\nbGVhbiBjb250ZW50c0FyZURhdGVzID0gZmFsc2U7CiAgICAgICAgICAgICAg\nICBpZiAoYy5pdGVyYXRvcigpLmhhc05leHQoKSkgewogICAgICAgICAgICAg\nICAgICAgIC8vIHRoaXMgYXNzdW1lcyB0aGF0IHRoZSBjb2xsZWN0aW9uIGlz\nIGhvbW9nZW5lb3VzCiAgICAgICAgICAgICAgICAgICAgT2JqZWN0IG8gPSBj\nLml0ZXJhdG9yKCkubmV4dCgpOwogICAgICAgICAgICAgICAgICAgIGlmIChJ\nbXBsSGVscGVyLmlzTWFuYWdlYWJsZShvKSkKICAgICAgICAgICAgICAgICAg\nICAgICAgcmV0dXJuIGZhbHNlOwoKICAgICAgICAgICAgICAgICAgICAvLyBw\nY2w6IDI3IEp1biAyMDA0OiBpZiB3ZSBncm93IHRoaXMgbG9naWMgdG8KICAg\nICAgICAgICAgICAgICAgICAvLyBoYW5kbGUgb3RoZXIgbXV0YWJsZSB0eXBl\ncyB0aGF0IGFyZSBub3QKICAgICAgICAgICAgICAgICAgICAvLyBrbm93biB0\nbyBiZSBjbG9uZWFibGUsIHdlIHdpbGwgaGF2ZSB0byBhZGQKICAgICAgICAg\nICAgICAgICAgICAvLyBsb2dpYyB0byBoYW5kbGUgdGhlbS4gVGhpcyBpcyBi\nZWNhdXNlIHdlCiAgICAgICAgICAgICAgICAgICAgLy8gY2FuJ3QganVzdCBj\nYXN0IHRvIENsb25lYWJsZSBhbmQgaW52b2tlCiAgICAgICAgICAgICAgICAg\nICAgLy8gY2xvbmUoKSwgYXMgY2xvbmUoKSBpcyBhIHByb3RlY3RlZCBtZXRo\nb2QKICAgICAgICAgICAgICAgICAgICAvLyBpbiBPYmplY3QuCiAgICAgICAg\nICAgICAgICAgICAgaWYgKG8gaW5zdGFuY2VvZiBEYXRlKQogICAgICAgICAg\nICAgICAgICAgICAgICBjb250ZW50c0FyZURhdGVzID0gdHJ1ZTsKCiAgICAg\nICAgICAgICAgICAgICAgLy8gaWYgdGhlIGNvbGxlY3Rpb24gaXMgbm90IGEg\na25vd24gaW1tdXRhYmxlCiAgICAgICAgICAgICAgICAgICAgLy8gdHlwZSwg\nb3IgaWYgaXQgY29udGFpbnMgbXV0YWJsZSBpbnN0YW5jZXMsCiAgICAgICAg\nICAgICAgICAgICAgLy8gY2xvbmUgaXQgZm9yIGdvb2QgbWVhc3VyZS4KICAg\nICAgICAgICAgICAgICAgICBpZiAoY29udGVudHNBcmVEYXRlcyB8fCAhc191\nbm1vZC5jb250YWlucyhjLmdldENsYXNzKCkpKSB7CiAgICAgICAgICAgICAg\nICAgICAgICAgIC8vIGNvcHkgdGhlIGNvbGxlY3Rpb24KICAgICAgICAgICAg\nICAgICAgICAgICAgQ29sbGVjdGlvbiBjb3B5OwogICAgICAgICAgICAgICAg\nICAgICAgICBpZiAoYyBpbnN0YW5jZW9mIFNvcnRlZFNldCkKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIGNvcHkgPSBuZXcgVHJlZVNldCgpOwogICAg\nICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjIGluc3RhbmNlb2YgU2V0\nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29weSA9IG5ldyBIYXNo\nU2V0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIGNvcHkgPSBuZXcgQXJyYXlMaXN0KGMuc2l6\nZSgpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50c0Fy\nZURhdGVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtdXN0\nIGdvIHRocm91Z2ggYnkgaGFuZCBhbmQgZG8gdGhlCiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAvLyBjb3B5LCBzaW5jZSBEYXRlIGlzIG11dGFibGUu\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0\ncjIgPSBjLml0ZXJhdG9yKCk7IGl0cjIuaGFzTmV4dCgpOykKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICBjb3B5LmFkZCgoKERhdGUpIGl0cjIu\nbmV4dCgpKS5jbG9uZSgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBl\nbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3B5LmFkZEFsbChj\nKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGUuc2V0VmFsdWUoY29weSk7\nCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAg\nICAgICAgICB9IGVsc2UgaWYgKHYgaW5zdGFuY2VvZiBEYXRlKQogICAgICAg\nICAgICAgICAgZS5zZXRWYWx1ZSgoKERhdGUpIHYpLmNsb25lKCkpOwogICAg\nICAgIH0KCiAgICAgICAga2V5Ll9wYXJhbXMgPSBwYXJhbXM7CiAgICAgICAg\ncmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBQdWJsaWMgY29u\nc3RydWN0b3IgZm9yIGV4dGVybmFsaXphdGlvbiBvbmx5LgogICAgICovCiAg\nICBwdWJsaWMgUXVlcnlLZXkoKSB7CiAgICB9CgogICAgLyoqCiAgICAgKiBS\nZXR1cm5zIHRoZSBjYW5kaWRhdGUgY2xhc3MgbmFtZSBmb3IgdGhpcyBxdWVy\neS4KICAgICAqLwogICAgcHVibGljIFN0cmluZyBnZXRDYW5kaWRhdGVUeXBl\nTmFtZSgpIHsKICAgICAgICByZXR1cm4gX2NhbmRpZGF0ZUNsYXNzTmFtZTsK\nICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgYW1vdW50IG9mIHRp\nbWUgdGhpcyBrZXkgaXMgZ29vZCBmb3IuCiAgICAgKi8KICAgIHB1YmxpYyBp\nbnQgZ2V0VGltZW91dCgpIHsKICAgICAgICByZXR1cm4gX3RpbWVvdXQ7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIDxjb2RlPnRydWU8L2NvZGU+\nIGlmIG1vZGlmaWNhdGlvbnMgdG8gYW55IG9mIHRoZQogICAgICogY2xhc3Nl\ncyBpbiA8Y29kZT5jaGFuZ2VkPC9jb2RlPiByZXN1bHRzIGluIGEgcG9zc2li\nbGUKICAgICAqIGludmFsaWRhdGlvbiBvZiB0aGlzIHF1ZXJ5OyBvdGhlcndp\nc2UgcmV0dXJucwogICAgICogPGNvZGU+ZmFsc2U8L2NvZGU+LiBJbnZhbGlk\nYXRpb24gaXMgcG9zc2libGUgaWYgb25lIG9yIG1vcmUgb2YKICAgICAqIHRo\nZSBjbGFzc2VzIGluIHRoaXMgcXVlcnkga2V5J3MgYWNjZXNzIHBhdGggaGFz\nIGJlZW4gY2hhbmdlZC4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gY2hh\nbmdlSW52YWxpZGF0ZXNRdWVyeShDb2xsZWN0aW9uIGNoYW5nZWQpIHsKICAg\nICAgICByZXR1cm4gaW50ZXJzZWN0cyhfYWNjZXNzUGF0aENsYXNzTmFtZXMs\nIGNoYW5nZWQpOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciB0aGUg\nZ2l2ZW4gc2V0IG9mIGxlYXN0LWRlcml2ZWQgY2xhc3MgbmFtZXMgaW50ZXJz\nZWN0cyB3aXRoCiAgICAgKiB0aGUgZ2l2ZW4gc2V0IG9mIGNoYW5nZWQgY2xh\nc3Nlcy4KICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgYm9vbGVhbiBpbnRl\ncnNlY3RzKENvbGxlY3Rpb24gbmFtZXMsIENvbGxlY3Rpb24gY2hhbmdlZCkg\newogICAgICAgIENsYXNzIGNsczsKICAgICAgICBDbGFzcyBzdXA7CiAgICAg\nICAgZm9yIChJdGVyYXRvciBpdGVyID0gY2hhbmdlZC5pdGVyYXRvcigpOyBp\ndGVyLmhhc05leHQoKTspIHsKICAgICAgICAgICAgY2xzID0gKENsYXNzKSBp\ndGVyLm5leHQoKTsKICAgICAgICAgICAgd2hpbGUgKChzdXAgPSBQQ1JlZ2lz\ndHJ5LmdldFBlcnNpc3RlbnRTdXBlcmNsYXNzKGNscykpICE9IG51bGwpCiAg\nICAgICAgICAgICAgICBjbHMgPSBzdXA7CiAgICAgICAgICAgIGlmIChuYW1l\ncy5jb250YWlucyhjbHMuZ2V0TmFtZSgpKSkKICAgICAgICAgICAgICAgIHJl\ndHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBEZXRlcm1pbmUgZXF1YWxpdHkgYmFzZWQg\nb24gaWRlbnRpZnlpbmcgaW5mb3JtYXRpb24uIEtleXMKICAgICAqIGNyZWF0\nZWQgZm9yIHF1ZXJpZXMgdGhhdCBzcGVjaWZ5IGEgY2FuZGlkYXRlIGNvbGxl\nY3Rpb24gYXJlCiAgICAgKiBhbHdheXMgbm90IGVxdWFsLgogICAgICovCiAg\nICBwdWJsaWMgYm9vbGVhbiBlcXVhbHMoT2JqZWN0IG9iKSB7CiAgICAgICAg\naWYgKHRoaXMgPT0gb2IpCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAg\nICAgIGlmIChvYiA9PSBudWxsIHx8IGdldENsYXNzKCkgIT0gb2IuZ2V0Q2xh\nc3MoKSkKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoKICAgICAgICBRdWVy\neUtleSBvdGhlciA9IChRdWVyeUtleSkgb2I7CiAgICAgICAgcmV0dXJuIFN0\ncmluZ1V0aWxzLmVxdWFscyhfY2FuZGlkYXRlQ2xhc3NOYW1lLAogICAgICAg\nICAgICBvdGhlci5fY2FuZGlkYXRlQ2xhc3NOYW1lKQogICAgICAgICAgICAm\nJiBfc3ViY2xhc3NlcyA9PSBvdGhlci5fc3ViY2xhc3NlcwogICAgICAgICAg\nICAmJiBfaWdub3JlQ2hhbmdlcyA9PSBvdGhlci5faWdub3JlQ2hhbmdlcwog\nICAgICAgICAgICAmJiBfcmFuZ2VTdGFydCA9PSBvdGhlci5fcmFuZ2VTdGFy\ndAogICAgICAgICAgICAmJiBfcmFuZ2VFbmQgPT0gb3RoZXIuX3JhbmdlRW5k\nCiAgICAgICAgICAgICYmIFN0cmluZ1V0aWxzLmVxdWFscyhfcXVlcnksIG90\naGVyLl9xdWVyeSkKICAgICAgICAgICAgJiYgT2JqZWN0VXRpbHMuZXF1YWxz\nKF9wYXJhbXMsIG90aGVyLl9wYXJhbXMpOwogICAgfQoKICAgIC8qKgogICAg\nICogRGVmaW5lIGEgaGFzaGluZyBhbGdvcml0aG0gY29ycmVzcG9uZGluZyB0\nbyB0aGUge0BsaW5rICNlcXVhbHN9CiAgICAgKiBtZXRob2QgZGVmaW5lZCBh\nYm92ZS4KICAgICAqLwogICAgcHVibGljIGludCBoYXNoQ29kZSgpIHsKICAg\nICAgICBpbnQgY29kZSA9IDM3ICogMTcgKyBfY2FuZGlkYXRlQ2xhc3NOYW1l\nLmhhc2hDb2RlKCk7CiAgICAgICAgaWYgKF9xdWVyeSAhPSBudWxsKQogICAg\nICAgICAgICBjb2RlID0gMzcgKiBjb2RlICsgX3F1ZXJ5Lmhhc2hDb2RlKCk7\nCiAgICAgICAgaWYgKF9wYXJhbXMgIT0gbnVsbCkKICAgICAgICAgICAgY29k\nZSA9IDM3ICogY29kZSArIF9wYXJhbXMuaGFzaENvZGUoKTsKICAgICAgICBy\nZXR1cm4gY29kZTsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nIHRvU3RyaW5n\nKCkgewogICAgICAgIFN0cmluZ0J1ZmZlciBidWYgPSBuZXcgU3RyaW5nQnVm\nZmVyKDI1NSk7CiAgICAgICAgYnVmLmFwcGVuZChzdXBlci50b1N0cmluZygp\nKS4KICAgICAgICAgICAgYXBwZW5kKCJbcXVlcnk6WyIpLmFwcGVuZChfcXVl\ncnkpLmFwcGVuZCgiXSIpLgogICAgICAgICAgICBhcHBlbmQoIixhY2Nlc3Mg\ncGF0aDoiKS5hcHBlbmQoX2FjY2Vzc1BhdGhDbGFzc05hbWVzKS4KICAgICAg\nICAgICAgYXBwZW5kKCIsc3ViczoiKS5hcHBlbmQoX3N1YmNsYXNzZXMpLgog\nICAgICAgICAgICBhcHBlbmQoIixpZ25vcmVDaGFuZ2VzOiIpLmFwcGVuZChf\naWdub3JlQ2hhbmdlcykuCiAgICAgICAgICAgIGFwcGVuZCgiLHN0YXJ0UmFu\nZ2U6IikuYXBwZW5kKF9yYW5nZVN0YXJ0KS4KICAgICAgICAgICAgYXBwZW5k\nKCIsZW5kUmFuZ2U6IikuYXBwZW5kKF9yYW5nZUVuZCkuCiAgICAgICAgICAg\nIGFwcGVuZCgiLHRpbWVvdXQ6IikuYXBwZW5kKF90aW1lb3V0KS4KICAgICAg\nICAgICAgYXBwZW5kKCJdIik7CiAgICAgICAgcmV0dXJuIGJ1Zi50b1N0cmlu\nZygpOwogICAgfQoKICAgIC8vIC0tLS0tLS0tLS0gRXh0ZXJuYWxpemFibGUg\naW1wbGVtZW50YXRpb24gLS0tLS0tLS0tLQoKICAgIHB1YmxpYyB2b2lkIHdy\naXRlRXh0ZXJuYWwoT2JqZWN0T3V0cHV0IG91dCkKICAgICAgICB0aHJvd3Mg\nSU9FeGNlcHRpb24gewogICAgICAgIG91dC53cml0ZU9iamVjdChfY2FuZGlk\nYXRlQ2xhc3NOYW1lKTsKICAgICAgICBvdXQud3JpdGVCb29sZWFuKF9zdWJj\nbGFzc2VzKTsKICAgICAgICBvdXQud3JpdGVPYmplY3QoX2FjY2Vzc1BhdGhD\nbGFzc05hbWVzKTsKICAgICAgICBvdXQud3JpdGVPYmplY3QoX3F1ZXJ5KTsK\nICAgICAgICBvdXQud3JpdGVCb29sZWFuKF9pZ25vcmVDaGFuZ2VzKTsKICAg\nICAgICBvdXQud3JpdGVPYmplY3QoX3BhcmFtcyk7CiAgICAgICAgb3V0Lndy\naXRlTG9uZyhfcmFuZ2VTdGFydCk7CiAgICAgICAgb3V0LndyaXRlTG9uZyhf\ncmFuZ2VFbmQpOwogICAgICAgIG91dC53cml0ZUludChfdGltZW91dCk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgcmVhZEV4dGVybmFsKE9iamVjdElucHV0\nIGluKQogICAgICAgIHRocm93cyBJT0V4Y2VwdGlvbiwgQ2xhc3NOb3RGb3Vu\nZEV4Y2VwdGlvbiB7CiAgICAgICAgX2NhbmRpZGF0ZUNsYXNzTmFtZSA9IChT\ndHJpbmcpIGluLnJlYWRPYmplY3QoKTsKICAgICAgICBfc3ViY2xhc3NlcyA9\nIGluLnJlYWRCb29sZWFuKCk7CiAgICAgICAgX2FjY2Vzc1BhdGhDbGFzc05h\nbWVzID0gKFNldCkgaW4ucmVhZE9iamVjdCgpOwogICAgICAgIF9xdWVyeSA9\nIChTdHJpbmcpIGluLnJlYWRPYmplY3QoKTsKICAgICAgICBfaWdub3JlQ2hh\nbmdlcyA9IGluLnJlYWRCb29sZWFuKCk7CiAgICAgICAgX3BhcmFtcyA9IChN\nYXApIGluLnJlYWRPYmplY3QoKTsKICAgICAgICBfcmFuZ2VTdGFydCA9IGlu\nLnJlYWRMb25nKCk7CiAgICAgICAgX3JhbmdlRW5kID0gaW4ucmVhZExvbmcg\nKCk7CgkJX3RpbWVvdXQgPSBpbi5yZWFkSW50ICgpOwoJfQp9Cg==\n","encoding":"base64"}

