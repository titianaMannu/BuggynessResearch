{"sha":"3b25aecddd9e1543f48743295be776a2d3d48400","node_id":"MDQ6QmxvYjIwNjM2NDozYjI1YWVjZGRkOWUxNTQzZjQ4NzQzMjk1YmU3NzZhMmQzZDQ4NDAw","size":14150,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/3b25aecddd9e1543f48743295be776a2d3d48400","content":"LyoNCiAqIENvcHlyaWdodCAyMDA2IFRoZSBBcGFjaGUgU29mdHdhcmUgRm91\nbmRhdGlvbi4NCiAqDQogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExp\nY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsNCiAqIHlvdSBt\nYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0\naCB0aGUgTGljZW5zZS4NCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0\naGUgTGljZW5zZSBhdA0KICoNCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9s\naWNlbnNlcy9MSUNFTlNFLTIuMA0KICoNCiAqIFVubGVzcyByZXF1aXJlZCBi\neSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29m\ndHdhcmUNCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRp\nc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsDQogKiBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4\ncHJlc3Mgb3IgaW1wbGllZC4NCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQN\nCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLg0KICovDQpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5lZTsNCg0KaW1wb3J0IGphdmEuaW8u\nSU9FeGNlcHRpb247DQppbXBvcnQgamF2YS5pby5JbnB1dFN0cmVhbTsKaW1w\nb3J0IGphdmEubGFuZy5yZWZsZWN0Lk1ldGhvZDsNCg0KaW1wb3J0IGphdmF4\nLm5hbWluZy5Db250ZXh0Ow0KaW1wb3J0IGphdmF4Lm5hbWluZy5Jbml0aWFs\nQ29udGV4dDsNCmltcG9ydCBqYXZheC50cmFuc2FjdGlvbi5IZXVyaXN0aWNN\naXhlZEV4Y2VwdGlvbjsNCmltcG9ydCBqYXZheC50cmFuc2FjdGlvbi5IZXVy\naXN0aWNSb2xsYmFja0V4Y2VwdGlvbjsNCmltcG9ydCBqYXZheC50cmFuc2Fj\ndGlvbi5JbnZhbGlkVHJhbnNhY3Rpb25FeGNlcHRpb247DQppbXBvcnQgamF2\nYXgudHJhbnNhY3Rpb24uTm90U3VwcG9ydGVkRXhjZXB0aW9uOw0KaW1wb3J0\nIGphdmF4LnRyYW5zYWN0aW9uLlJvbGxiYWNrRXhjZXB0aW9uOw0KaW1wb3J0\nIGphdmF4LnRyYW5zYWN0aW9uLlN0YXR1czsNCmltcG9ydCBqYXZheC50cmFu\nc2FjdGlvbi5TeW5jaHJvbml6YXRpb247DQppbXBvcnQgamF2YXgudHJhbnNh\nY3Rpb24uU3lzdGVtRXhjZXB0aW9uOw0KaW1wb3J0IGphdmF4LnRyYW5zYWN0\naW9uLlRyYW5zYWN0aW9uOw0KaW1wb3J0IGphdmF4LnRyYW5zYWN0aW9uLnhh\nLlhBUmVzb3VyY2U7DQoNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuY29u\nZi5PcGVuSlBBQ29uZmlndXJhdGlvbjsNCmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEubGliLmNvbmYuQ29uZmlndXJhYmxlOw0KaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5saWIuY29uZi5Db25maWd1cmF0aW9uOw0KaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5saWIubG9nLkxvZzsNCmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOw0KaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS51dGlsLkludmFsaWRTdGF0ZUV4Y2VwdGlvbjsNCmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5Ob1RyYW5zYWN0aW9uRXhj\nZXB0aW9uOw0KDQppbXBvcnQgc2VycC5ieXRlY29kZS5CQ0NsYXNzOw0KaW1w\nb3J0IHNlcnAuYnl0ZWNvZGUuUHJvamVjdDsNCg0KLyoqDQogKiB7QGxpbmsg\nTWFuYWdlZFJ1bnRpbWV9IGltcGxlbWVudGF0aW9uIHRoYXQgYWxsb3dzIHN5\nbmNocm9uaXphdGlvbiB3aXRoIGENCiAqIFdlYlNwaGVyZSBtYW5hZ2VkIHRy\nYW5zYWN0aW9uLg0KICoNCiAqIDxQPg0KICogV2ViU3BoZXJlIEFwcGxpY2F0\naW9uIFNlcnZlciBkb2VzIG5vdCBleHBvc2UgdGhlIFRyYW5zYWN0aW9uTWFu\nYWdlciB0byBhbg0KICogYXBwbGljYXRpb24uIEluc3RlYWQgaXQgcHJvdmlk\nZXMgYSBwcm9wcmlldGFyeSBpbnRlcmZhY2UgdG8gcmVnaXN0ZXIgZm9yDQog\nKiBzeW5jaHJvbml6YXRpb24gYW5kIG9idGFpbiB0cmFuc2FjdGlvbiBpZHMu\nDQogKg0KICogPFA+DQogKiBXQVNNYW5hZ2VkUnVudGltZSBwcm92aWRlcyB0\naGUgd3JhcHBlciBjbGFzc2VzIG5lZWRlZCB0byBpbnRlcmFjdCB3aXRoIHRo\nZQ0KICogV0FTIHByb3ByaWV0YXJ5IGludGVyZmFjZSBhbmQgdGhlIE9wZW5K\nUEEga2VybmVsLg0KICoNCiAqIEBhdXRob3IgTWljaGFlbCBEaWNrLCBLZXZp\nbiBTdXR0ZXINCiAqLw0KcHVibGljIGNsYXNzIFdBU01hbmFnZWRSdW50aW1l\nIGltcGxlbWVudHMgTWFuYWdlZFJ1bnRpbWUsIENvbmZpZ3VyYWJsZSB7DQoN\nCiAgICBwcml2YXRlIHN0YXRpYyBMb2NhbGl6ZXIgX2xvYyA9DQogICAgICAg\nIExvY2FsaXplci5mb3JQYWNrYWdlKFdBU01hbmFnZWRSdW50aW1lLmNsYXNz\nKTsNCg0KICAgIHByaXZhdGUgT2JqZWN0IF9leHRlbmRlZFRyYW5zYWN0aW9u\nID0gbnVsbDsNCiAgICBwcml2YXRlIE1ldGhvZCBfZ2V0R2xvYmFsSWQgPSBu\ndWxsOw0KICAgIHByaXZhdGUgTWV0aG9kIF9yZWdpc3RlclN5bmMgPSBudWxs\nOw0KICAgIHByaXZhdGUgT3BlbkpQQUNvbmZpZ3VyYXRpb24gX2NvbmYgPSBu\ndWxsOw0KICAgIHByaXZhdGUgTG9nIF9sb2cgPSBudWxsOw0KDQogICAgLyoq\nDQogICAgICogR2V0cyBhbiBleHRlbmRlZEpUQVRyYW5zYWN0aW9uIGZyb20g\nSk5ESSBhbmQgY3JlYXRlcyBhIHRyYW5zYWN0aW9uDQogICAgICogd3JhcHBl\ncg0KICAgICAqLw0KICAgIHB1YmxpYyBqYXZheC50cmFuc2FjdGlvbi5UcmFu\nc2FjdGlvbk1hbmFnZXIgZ2V0VHJhbnNhY3Rpb25NYW5hZ2VyKCkNCiAgICAg\nICAgdGhyb3dzIEV4Y2VwdGlvbiB7DQogICAgICAgIHJldHVybiBuZXcgV0FT\nVHJhbnNhY3Rpb24oKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBUcmFu\nc2FjdGlvbiB3cmFwcGVyIGZvciBXZWJTcGhlcmUuIFdlYlNwaGVyZSBleHBv\nc2VzIGEgc3Vic2V0IG9mIHRoZQ0KICAgICAqIFRyYW5zYWN0aW9uIGFuZCBU\ncmFuc2FjdGlvbk1hbmFnZXIgaW50ZXJmYWNlcyB0byB0aGUgY3VzdG9tZXIu\nIEFueQ0KICAgICAqIG1ldGhvZHMgd2hpY2ggYXJlIG5vdCBleHBvc2VkIGJ5\nIFdlYlNwaGVyZSB3aWxsIHRocm93IGFuDQogICAgICogSWxsZWdhbFN0YXRl\nRXhjZXB0aW9uIHRvIHRoZSBjYWxsZXIuDQogICAgICoNCiAgICAgKiA8UD4N\nCiAgICAgKiBNZXRob2RzIHN1cHBvcnRlZCBieSBXQVMgYXJlDQogICAgICog\nPFVMPg0KICAgICAqIDxMST5SZWdpc3RlclN5bmNocm9uaXphdGlvbiA8L0xJ\nPg0KICAgICAqIDxMST5HZXRTdGF0dXM8L0xJPg0KICAgICAqIDwvVUw+DQog\nICAgICovDQogICAgY2xhc3MgV0FTVHJhbnNhY3Rpb24gaW1wbGVtZW50cyBq\nYXZheC50cmFuc2FjdGlvbi5UcmFuc2FjdGlvbk1hbmFnZXIsDQogICAgICAg\nIGphdmF4LnRyYW5zYWN0aW9uLlRyYW5zYWN0aW9uIHsNCg0KICAgICAgICBw\ndWJsaWMgaW50IGdldFN0YXR1cygpIHRocm93cyBTeXN0ZW1FeGNlcHRpb24g\new0KICAgICAgICAgICAgaW50IHJ2YWwgPSBTdGF0dXMuU1RBVFVTX1VOS05P\nV047DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGlmIChn\nZXRHbG9iYWxJZCgpICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAg\ncnZhbCA9IFN0YXR1cy5TVEFUVVNfQUNUSVZFOw0KICAgICAgICAgICAgICAg\nIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHJ2YWwgPSBTdGF0dXMu\nU1RBVFVTX05PX1RSQU5TQUNUSU9OOw0KICAgICAgICAgICAgICAgIH0NCiAg\nICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7DQogICAgICAgICAg\nICAgICAgdGhyb3cgbmV3IE5vVHJhbnNhY3Rpb25FeGNlcHRpb24oX2xvYw0K\nICAgICAgICAgICAgICAgICAgICAgICAgLmdldCgid2FzLXRyYW5zYWN0aW9u\nLWlkLWV4Y2VwdGlvbiIpKS5zZXRDYXVzZShlKTsNCiAgICAgICAgICAgIH0N\nCiAgICAgICAgICAgIHJldHVybiBydmFsOw0KICAgICAgICB9DQoNCiAgICAg\nICAgLyoqDQogICAgICAgICAqIFByb3ZpZGVzIGEgVHJhbnNhY3Rpb24gd3Jh\ncHBlci4gVGhlIHRyYW5zYWN0aW9uIHdyYXBwZXIgbWF5YiBvbmx5IGJlDQog\nICAgICAgICAqIHVzZWQgdG8gZGV0ZXJtaW5lIHRoZSBzdGF0dXMgb2YgdGhl\nIGN1cnJlbnQgdHJhbnNhY3Rpb24uIFdlYlNwaGVyZQ0KICAgICAgICAgKiBk\nb2VzIG5vdCBhbGxvdyBkaXJlY3QgY29udHJvbCBvZiBjb250YWluZXIgdHJh\nbnNhY3Rpb25zLg0KICAgICAgICAgKg0KICAgICAgICAgKiBAcmV0dXJuIEEg\nV2ViU3BoZXJlIHRyYW5zYWN0aW9uIHdyYXBwZXIuDQogICAgICAgICAqLw0K\nICAgICAgICBwdWJsaWMgVHJhbnNhY3Rpb24gZ2V0VHJhbnNhY3Rpb24oKSB0\naHJvd3MgU3lzdGVtRXhjZXB0aW9uIHsNCiAgICAgICAgICAgIHJldHVybiB0\naGlzOw0KICAgICAgICB9DQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIFJl\nZ2lzdGVyIGZvciBzeW5jaHJvbml6YXRpb24gd2l0aCBhIFdlYlNwaGVyZSBt\nYW5hZ2VkIHRyYW5zYWN0aW9uIHZpYQ0KICAgICAgICAgKiB0aGUgZXh0ZW5k\nZWRKVEFUcmFuc2FjdGlvbiBpbnRlcmZhY2UuDQogICAgICAgICAqLw0KICAg\nICAgICBwdWJsaWMgdm9pZCByZWdpc3RlclN5bmNocm9uaXphdGlvbihTeW5j\naHJvbml6YXRpb24gYXJnMCkNCiAgICAgICAgICAgIHRocm93cyBJbGxlZ2Fs\nU3RhdGVFeGNlcHRpb24sIFJvbGxiYWNrRXhjZXB0aW9uLCBTeXN0ZW1FeGNl\ncHRpb24gew0KICAgICAgICAgICAgaWYgKF9leHRlbmRlZFRyYW5zYWN0aW9u\nICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAg\nICAgICAgICAgICBfcmVnaXN0ZXJTeW5jLmludm9rZShfZXh0ZW5kZWRUcmFu\nc2FjdGlvbiwNCiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBPYmplY3Rb\nXSB7IG5ldyBXQVNTeW5jaHJvbml6YXRpb24oYXJnMCkgfSk7DQogICAgICAg\nICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsNCiAgICAgICAgICAg\nICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRTdGF0ZUV4Y2VwdGlvbihfbG9j\nDQogICAgICAgICAgICAgICAgICAgICAgICAuZ2V0KCJ3YXMtcmVmbGVjdGlv\nbi1leGNlcHRpb24iKSkuc2V0Q2F1c2UoZSk7DQogICAgICAgICAgICAgICAg\nfQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aHJv\ndyBuZXcgSW52YWxpZFN0YXRlRXhjZXB0aW9uKF9sb2MuZ2V0KCJ3YXMtbG9v\na3VwLWVycm9yIikpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAg\nICAgICAgLyoqDQogICAgICAgICAqIEdldHMgdGhlIEdsb2JhbFRyYW5zYWN0\naW9uIElEIG9mIHRoZSBXZWJTcGhlcmUgbWFuYWdlZCB0cmFuc2FjdGlvbi4N\nCiAgICAgICAgICogSWYgbm8gR2xvYmFsIFRyYW5zYWN0aW9uIGlzIGFjdGl2\nZSBudWxsIHdpbGwgYmUgcmV0dXJuZWQuDQogICAgICAgICAqDQogICAgICAg\nICAqIEByZXR1cm4gTnVsbCBpZiBhIGdsb2JhbCB0cmFuc2FjdGlvbiBpcyBu\nb3QgYWN0aXZlIG9yIGlmIGFuIGVycm9yDQogICAgICAgICAqICAgICAgICAg\nb2NjdXJzLiBieXRlW10gaWQgaWYgYSBnbG9iYWwgdHJhbnNhY3Rpb24gaXMg\nYWN0aXZlLg0KICAgICAgICAgKi8NCiAgICAgICAgcHJpdmF0ZSBieXRlW10g\nZ2V0R2xvYmFsSWQoKSB7DQogICAgICAgICAgICBieXRlW10gcnZhbCA9IG51\nbGw7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIHJ2YWwg\nPSAoYnl0ZVtdKSBfZ2V0R2xvYmFsSWQuaW52b2tlKF9leHRlbmRlZFRyYW5z\nYWN0aW9uLCBudWxsKTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlv\nbiBlKSB7DQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRTdGF0\nZUV4Y2VwdGlvbihfbG9jDQogICAgICAgICAgICAgICAgICAgIC5nZXQoIndh\ncy1yZWZsZWN0aW9uLWV4Y2VwdGlvbiIpKS5zZXRDYXVzZShlKTsNCiAgICAg\nICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBydmFsOw0KICAgICAgICB9\nDQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIFVuaW1wbGVtZW50ZWQsIFdB\nUyBkb2VzIG5vdCBwcm92aWRlIHRoaXMgbGV2ZWwgb2YgY29udHJvbC4gVGhy\nb3dzIGFuDQogICAgICAgICAqIElsbGVnYWxTdGF0ZUV4Y2VwdGlvbg0KICAg\nICAgICAgKi8NCiAgICAgICAgcHVibGljIHZvaWQgYmVnaW4oKSB0aHJvd3Mg\nTm90U3VwcG9ydGVkRXhjZXB0aW9uLCBTeXN0ZW1FeGNlcHRpb24gew0KICAg\nICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRTdGF0ZUV4Y2VwdGlvbihfbG9j\nLmdldCgid2FzLXVuc3VwcG9ydGVkLW9wIiwNCiAgICAgICAgICAgICAgICAi\nYmVnaW4iKSk7DQogICAgICAgIH0NCg0KICAgICAgICAvKioNCiAgICAgICAg\nICogVW5pbXBsZW1lbnRlZCwgV0FTIGRvZXMgbm90IHByb3ZpZGUgdGhpcyBs\nZXZlbCBvZiBjb250cm9sLiBUaHJvd3MgYW4NCiAgICAgICAgICogSWxsZWdh\nbFN0YXRlRXhjZXB0aW9uDQogICAgICAgICAqLw0KICAgICAgICBwdWJsaWMg\ndm9pZCBjb21taXQoKSB0aHJvd3MgSGV1cmlzdGljTWl4ZWRFeGNlcHRpb24s\nDQogICAgICAgICAgICBIZXVyaXN0aWNSb2xsYmFja0V4Y2VwdGlvbiwgSWxs\nZWdhbFN0YXRlRXhjZXB0aW9uLA0KICAgICAgICAgICAgUm9sbGJhY2tFeGNl\ncHRpb24sIFNlY3VyaXR5RXhjZXB0aW9uLCBTeXN0ZW1FeGNlcHRpb24gew0K\nICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRTdGF0ZUV4Y2VwdGlvbihf\nbG9jLmdldCgid2FzLXVuc3VwcG9ydGVkLW9wIiwNCiAgICAgICAgICAgICAg\nICAiY29tbWl0IikpOw0KICAgICAgICB9DQoNCiAgICAgICAgLyoqDQogICAg\nICAgICAqIFVuaW1wbGVtZW50ZWQsIFdBUyBkb2VzIG5vdCBwcm92aWRlIHRo\naXMgbGV2ZWwgb2YgY29udHJvbC4gVGhyb3dzIGFuDQogICAgICAgICAqIEls\nbGVnYWxTdGF0ZUV4Y2VwdGlvbg0KICAgICAgICAgKi8NCiAgICAgICAgcHVi\nbGljIHZvaWQgcmVzdW1lKFRyYW5zYWN0aW9uIGFyZzApIHRocm93cyBJbGxl\nZ2FsU3RhdGVFeGNlcHRpb24sDQogICAgICAgICAgICBJbnZhbGlkVHJhbnNh\nY3Rpb25FeGNlcHRpb24sIFN5c3RlbUV4Y2VwdGlvbiB7DQogICAgICAgICAg\nICB0aHJvdyBuZXcgSW52YWxpZFN0YXRlRXhjZXB0aW9uKF9sb2MuZ2V0KCJ3\nYXMtdW5zdXBwb3J0ZWQtb3AiLA0KICAgICAgICAgICAgICAgICJyZXN1bWUi\nKSk7DQogICAgICAgIH0NCg0KICAgICAgICAvKioNCiAgICAgICAgICogVW5p\nbXBsZW1lbnRlZCwgV0FTIGRvZXMgbm90IHByb3ZpZGUgdGhpcyBsZXZlbCBv\nZiBjb250cm9sLiBMb2cgYQ0KICAgICAgICAgKiB0cmFjZSBpbnN0ZWFkIG9m\nIHRocm93aW5nIGFuIGV4Y2VwdGlvbi4gUm9sbGJhY2sgbWF5IGJlIHVzZWQg\naW4NCiAgICAgICAgICogc29tZSBlcnJvciBwYXRocywgdGhyb3dpbmcgYW5v\ndGhlciBleGNlcHRpb24gbWF5IHJlc3VsdCBpbiB0aGUNCiAgICAgICAgICog\nb3JpZ2luYWwgZXhjZXB0aW9uIGJlaW5nIGxvc3QuDQogICAgICAgICAqLw0K\nICAgICAgICBwdWJsaWMgdm9pZCByb2xsYmFjaygpIHRocm93cyBJbGxlZ2Fs\nU3RhdGVFeGNlcHRpb24sIFNlY3VyaXR5RXhjZXB0aW9uLA0KICAgICAgICAg\nICAgU3lzdGVtRXhjZXB0aW9uIHsNCiAgICAgICAgICAgIGlmIChfbG9nLmlz\nVHJhY2VFbmFibGVkKCkpIHsNCiAgICAgICAgICAgICAgICBfbG9nLnRyYWNl\nKF9sb2MuZ2V0KCJ3YXMtdW5zdXBwb3J0ZWQtb3AiLCAicm9sbGJhY2siKSk7\nDQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvKioNCiAg\nICAgICAgICogVW5pbXBsZW1lbnRlZCwgV0FTIGRvZXMgbm90IHByb3ZpZGUg\ndGhpcyBsZXZlbCBvZiBjb250cm9sLiBMb2cgYQ0KICAgICAgICAgKiB0cmFj\nZSBpbnN0ZWFkIG9mIHRocm93aW5nIGFuIGV4Y2VwdGlvbi4gU2V0Um9sbGJh\nY2tPbmx5IG1heSBiZSB1c2VkDQogICAgICAgICAqIGluIHNvbWUgZXJyb3Ig\ncGF0aHMsIHRocm93aW5nIGFub3RoZXIgZXhjZXB0aW9uIG1heSByZXN1bHQg\naW4gdGhlDQogICAgICAgICAqIG9yaWdpbmFsIGV4Y2VwdGlvbiBiZWluZyBs\nb3N0Lg0KICAgICAgICAgKi8NCiAgICAgICAgcHVibGljIHZvaWQgc2V0Um9s\nbGJhY2tPbmx5KCkgdGhyb3dzIElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiwNCiAg\nICAgICAgICAgIFN5c3RlbUV4Y2VwdGlvbiB7DQogICAgICAgICAgICBpZiAo\nX2xvZy5pc1RyYWNlRW5hYmxlZCgpKSB7DQogICAgICAgICAgICAgICAgX2xv\nZy50cmFjZShfbG9jLmdldCgid2FzLXVuc3VwcG9ydGVkLW9wIiwgInNldFJv\nbGxiYWNrT25seSIpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQog\nICAgICAgIC8qKg0KICAgICAgICAgKiBVbmltcGxlbWVudGVkLCBXQVMgZG9l\ncyBub3QgcHJvdmlkZSB0aGlzIGxldmVsIG9mIGNvbnRyb2wuIFRocm93cyBh\nbg0KICAgICAgICAgKiBJbGxlZ2FsU3RhdGVFeGNlcHRpb24NCiAgICAgICAg\nICovDQogICAgICAgIHB1YmxpYyB2b2lkIHNldFRyYW5zYWN0aW9uVGltZW91\ndChpbnQgYXJnMCkgdGhyb3dzIFN5c3RlbUV4Y2VwdGlvbiB7DQogICAgICAg\nICAgICB0aHJvdyBuZXcgSW52YWxpZFN0YXRlRXhjZXB0aW9uKF9sb2MuZ2V0\nKCJ3YXMtdW5zdXBwb3J0ZWQtb3AiLA0KICAgICAgICAgICAgICAgICJzZXRU\ncmFuc2FjdGlvblRpbWVvdXQiKSk7DQogICAgICAgIH0NCg0KICAgICAgICAv\nKioNCiAgICAgICAgICogVW5pbXBsZW1lbnRlZCwgV0FTIGRvZXMgbm90IHBy\nb3ZpZGUgdGhpcyBsZXZlbCBvZiBjb250cm9sLiBUaHJvd3MgYW4NCiAgICAg\nICAgICogSWxsZWdhbFN0YXRlRXhjZXB0aW9uDQogICAgICAgICAqLw0KICAg\nICAgICBwdWJsaWMgVHJhbnNhY3Rpb24gc3VzcGVuZCgpIHRocm93cyBTeXN0\nZW1FeGNlcHRpb24gew0KICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRT\ndGF0ZUV4Y2VwdGlvbihfbG9jLmdldCgid2FzLXVuc3VwcG9ydGVkLW9wIiwN\nCiAgICAgICAgICAgICAgICAic3VzcGVuZCIpKTsNCiAgICAgICAgfQ0KDQog\nICAgICAgIC8qKg0KICAgICAgICAgKiBVbmltcGxlbWVudGVkLCBXQVMgZG9l\ncyBub3QgcHJvdmlkZSB0aGlzIGxldmVsIG9mIGNvbnRyb2wuIFRocm93cyBh\nbg0KICAgICAgICAgKiBJbGxlZ2FsU3RhdGVFeGNlcHRpb24NCiAgICAgICAg\nICovDQogICAgICAgIHB1YmxpYyBib29sZWFuIGRlbGlzdFJlc291cmNlKFhB\nUmVzb3VyY2UgYXJnMCwgaW50IGFyZzEpDQogICAgICAgICAgICB0aHJvd3Mg\nSWxsZWdhbFN0YXRlRXhjZXB0aW9uLCBTeXN0ZW1FeGNlcHRpb24gew0KICAg\nICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRTdGF0ZUV4Y2VwdGlvbihfbG9j\nLmdldCgid2FzLXVuc3VwcG9ydGVkLW9wIiwNCiAgICAgICAgICAgICAgICAi\nZGVsaXN0UmVzb3VyY2UiKSk7DQogICAgICAgIH0NCg0KICAgICAgICAvKioN\nCiAgICAgICAgICogVW5pbXBsZW1lbnRlZCwgV0FTIGRvZXMgbm90IHByb3Zp\nZGUgdGhpcyBsZXZlbCBvZiBjb250cm9sLiBUaHJvd3MgYW4NCiAgICAgICAg\nICogSWxsZWdhbFN0YXRlRXhjZXB0aW9uDQogICAgICAgICAqLw0KICAgICAg\nICBwdWJsaWMgYm9vbGVhbiBlbmxpc3RSZXNvdXJjZShYQVJlc291cmNlIGFy\nZzApDQogICAgICAgICAgICB0aHJvd3MgSWxsZWdhbFN0YXRlRXhjZXB0aW9u\nLCBSb2xsYmFja0V4Y2VwdGlvbiwgU3lzdGVtRXhjZXB0aW9uIHsNCiAgICAg\nICAgICAgIHRocm93IG5ldyBJbnZhbGlkU3RhdGVFeGNlcHRpb24oX2xvYy5n\nZXQoIndhcy11bnN1cHBvcnRlZC1vcCIsDQogICAgICAgICAgICAgICAgImVu\nbGlzdFJlc291cmNlIikpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLyoq\nDQogICAgICogV0FTU3luY2hyb25pemF0aW9uIHdyYXBwZXIuIFRoaXMgY2xh\nc3MgdHJhbnNsYXRlcyB0aGUgV0FTIHByb3ByaWV0YXJ5DQogICAgICogc3lu\nY2hyb25pemF0aW9uIGNhbGxiYWNrIG1ldGhvZHMgdG8gamF2YXgudHJhbnNh\nY3Rpb24uU3luY2hyb25pemF0aW9uDQogICAgICogbWV0aG9kcy4NCiAgICAg\nKg0KICAgICAqIDxQPg0KICAgICAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyB0\naGUNCiAgICAgKiBjb20uaWJtLndlYnNwaGVyZS5qdGFleHRlbnNpb25zLlN5\nbmNocm9uaXphdGlvbkNhbGxiYWNrIGludGVyZmFjZS4gU2luY2UNCiAgICAg\nKiBTeW5jaHJvbml6YXRpb25DYWxsYmFjayBpcyBub3QgYXZhaWxhYmxlIGF0\nIGNvbXBpbGUgdGltZSB3ZSB1c2UgU2VycCB0bw0KICAgICAqIGFkZCB0aGUg\naW50ZXJmYWNlIHRvIHRoZSBjbGFzcyBhZnRlciBhbGwgY2xhc3NlcyBoYXZl\nIGJlZW4gY29tcGlsZWQuDQogICAgICoNCiAgICAgKiA8UD4NCiAgICAgKiBT\neW5jaHJvbml6YXRpb25DYWxsYmFjayBpcyBleHBlY3RlZCB0byBiZSBhdmFp\nbGFibGUgd2hlbmV2ZXIgdGhpcyBjbGFzcw0KICAgICAqIGlzIGluc3RhbnRp\nYXRlZCwgdGhlcmVmb3JlIHRoaXMgY2xhc3Mgc2hvdWxkIG9ubHkgYmUgdXNl\nZCB3aGVuIHJ1bm5pbmcgaW4NCiAgICAgKiBXZWJTcGhlcmUuDQogICAgICoN\nCiAgICAgKiBAc2VlIG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLldBU1RyYW5z\nZm9ybWVyDQogICAgICovDQogICAgc3RhdGljIGNsYXNzIFdBU1N5bmNocm9u\naXphdGlvbiB7DQoNCiAgICAgICAgU3luY2hyb25pemF0aW9uIF9zeW5jID0g\nbnVsbDsNCg0KICAgICAgICBXQVNTeW5jaHJvbml6YXRpb24oU3luY2hyb25p\nemF0aW9uIHN5bmMpIHsNCiAgICAgICAgICAgIF9zeW5jID0gc3luYzsNCiAg\nICAgICAgfQ0KDQogICAgICAgIC8qKg0KICAgICAgICAgKiBBZnRlckNvbXBs\nZXRpb24gd3JhcHBlci4gVHJhbnNsYXRlcyB0aGUgV0FTIHByb3ByaWV0YXJ5\nIGNhbGwgdG8gYQ0KICAgICAgICAgKiBqYXZheC50cmFuc2FjdGlvbi5TeW5j\naHJvbml6YXRpb24gY2FsbC4NCiAgICAgICAgICovDQogICAgICAgIHB1Ymxp\nYyB2b2lkIGFmdGVyQ29tcGxldGlvbihpbnQgbG9jYWxUcmFuc2FjdGlvbklk\nLA0KICAgICAgICAgICAgYnl0ZVtdIGdsb2JhbFRyYW5zYWN0aW9uSWQsIGJv\nb2xlYW4gY29tbWl0dGVkKSB7DQogICAgICAgICAgICBpZiAoX3N5bmMgIT0g\nbnVsbCkgew0KICAgICAgICAgICAgICAgIGlmIChjb21taXR0ZWQpIHsNCiAg\nICAgICAgICAgICAgICAgICAgX3N5bmMuYWZ0ZXJDb21wbGV0aW9uKFN0YXR1\ncy5TVEFUVVNfQ09NTUlUVEVEKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ug\new0KICAgICAgICAgICAgICAgICAgICBfc3luYy5hZnRlckNvbXBsZXRpb24o\nU3RhdHVzLlNUQVRVU19VTktOT1dOKTsNCiAgICAgICAgICAgICAgICB9DQog\nICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvKioNCiAgICAg\nICAgICogQmVmb3JlQ29tcGxldGlvbiB3cmFwcGVyLiBUcmFuc2xhdGVzIFdB\nUyBwcm9wcmlldGFyeSBjYWxsIHRvIGENCiAgICAgICAgICogamF2YXgudHJh\nbnNhY3Rpb24uU3luY2hyb25pemF0aW9uIGNhbGwuDQogICAgICAgICAqLw0K\nICAgICAgICBwdWJsaWMgdm9pZCBiZWZvcmVDb21wbGV0aW9uKGludCBhcmcw\nLCBieXRlW10gYXJnMSkgew0KICAgICAgICAgICAgaWYgKF9zeW5jICE9IG51\nbGwpIHsNCiAgICAgICAgICAgICAgICBfc3luYy5iZWZvcmVDb21wbGV0aW9u\nKCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAv\nKioNCiAgICAgKiBDYWNoZXMgYSBjb3B5IG9mIHRoZSBjb25maWd1cmF0aW9u\nLiBUaGUgY29uZmlndXJhdGlvbiBpcyB1c2VkIHRvIG9idGFpbg0KICAgICAq\nIHRoZSBsb2dnZXIgYW5kIGNsYXNzbG9hZGVyLg0KICAgICAqLw0KICAgIHB1\nYmxpYyB2b2lkIHNldENvbmZpZ3VyYXRpb24oQ29uZmlndXJhdGlvbiBjb25m\nKSB7DQogICAgICAgIF9jb25mID0gKE9wZW5KUEFDb25maWd1cmF0aW9uKSBj\nb25mOw0KICAgICAgICBfbG9nID0gX2NvbmYuZ2V0TG9nKE9wZW5KUEFDb25m\naWd1cmF0aW9uLkxPR19SVU5USU1FKTsNCiAgICB9DQoNCiAgICAvKioNCiAg\nICAgKiBFbmRDb25maWd1cmF0aW9uIHN0dWIuDQogICAgICovDQogICAgcHVi\nbGljIHZvaWQgZW5kQ29uZmlndXJhdGlvbigpIHsNCiAgICAgICAgdHJ5IHsN\nCiAgICAgICAgICAgIENvbnRleHQgY3R4ID0gbmV3IEluaXRpYWxDb250ZXh0\nKCk7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIF9leHRl\nbmRlZFRyYW5zYWN0aW9uID0NCiAgICAgICAgICAgICAgICAgICAgY3R4Lmxv\nb2t1cCgiamF2YTpjb21wL3dlYnNwaGVyZS9FeHRlbmRlZEpUQVRyYW5zYWN0\naW9uIik7DQogICAgICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAg\nICAgIGN0eC5jbG9zZSgpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAg\nICBDbGFzc0xvYWRlciBsb2FkZXIgPSBfY29uZi5nZXRDbGFzc1Jlc29sdmVy\nSW5zdGFuY2UoKQ0KICAgICAgICAgICAgICAgIC5nZXRDbGFzc0xvYWRlcihn\nZXRDbGFzcygpLCBudWxsKTsNCg0KICAgICAgICAgICAgQ2xhc3MgZXh0ZW5k\nZWRKVEFUcmFuc2FjdGlvbiA9IENsYXNzLmZvck5hbWUoDQogICAgICAgICAg\nICAgICAgImNvbS5pYm0ud2Vic3BoZXJlLmp0YWV4dGVuc2lvbnMuRXh0ZW5k\nZWRKVEFUcmFuc2FjdGlvbiIsIHRydWUsDQogICAgICAgICAgICAgICAgbG9h\nZGVyKTsNCg0KICAgICAgICAgICAgX3JlZ2lzdGVyU3luYyA9IGV4dGVuZGVk\nSlRBVHJhbnNhY3Rpb24uZ2V0TWV0aG9kKA0KICAgICAgICAgICAgICAgICJy\nZWdpc3RlclN5bmNocm9uaXphdGlvbkNhbGxiYWNrRm9yQ3VycmVudFRyYW4i\nLA0KICAgICAgICAgICAgICAgIG5ldyBDbGFzc1tdIHsgQ2xhc3MuZm9yTmFt\nZSgNCiAgICAgICAgICAgICAgICAgICAgImNvbS5pYm0ud2Vic3BoZXJlLmp0\nYWV4dGVuc2lvbnMuU3luY2hyb25pemF0aW9uQ2FsbGJhY2siLA0KICAgICAg\nICAgICAgICAgICAgICB0cnVlLCBsb2FkZXIpIH0pOw0KICAgICAgICAgICAg\nX2dldEdsb2JhbElkID0gZXh0ZW5kZWRKVEFUcmFuc2FjdGlvbi4NCiAgICAg\nICAgICAgICAgICBnZXRNZXRob2QoImdldEdsb2JhbElkIiwgbnVsbCk7DQog\nICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7DQogICAgICAgICAgICB0\naHJvdyBuZXcgSW52YWxpZFN0YXRlRXhjZXB0aW9uKF9sb2MNCiAgICAgICAg\nICAgICAgICAuZ2V0KCJ3YXMtcmVmbGVjdGlvbi1leGNlcHRpb24iKSwgZSku\nc2V0RmF0YWwodHJ1ZSk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvKioN\nCiAgICAgKiBTdGFydENvbmZpZ3VyYXRpb24gc3R1Yi4NCiAgICAgKi8NCiAg\nICBwdWJsaWMgdm9pZCBzdGFydENvbmZpZ3VyYXRpb24oKSB7DQogICAgICAg\nIC8vIE5vdGhpbmcgdG8gZG8NCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBD\nbGFzcyB0aGF0IHdpbGwgYmUgbW9kaWZpZWQNCiAgICAgKi8NCiAgICBzdGF0\naWMgZmluYWwgU3RyaW5nIENMQVNTID0NCiAgICAgICAgIm9yZy5hcGFjaGUu\nb3BlbmpwYS5lZS5XQVNNYW5hZ2VkUnVudGltZSRXQVNTeW5jaHJvbml6YXRp\nb24iOw0KDQogICAgLyoqDQogICAgICogSW50ZXJmYWNlIHdoaWNoIHdpbGwg\nYmUgYWRkZWQNCiAgICAgKi8NCiAgICBzdGF0aWMgZmluYWwgU3RyaW5nIElO\nVEVSRkFDRSA9DQogICAgICAgICJjb20uaWJtLndlYnNwaGVyZS5qdGFleHRl\nbnNpb25zLlN5bmNocm9uaXphdGlvbkNhbGxiYWNrIjsNCg0KICAgIHB1Ymxp\nYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpDQogICAgICAgIHRo\ncm93cyBJT0V4Y2VwdGlvbiB7DQogICAgICAgIFByb2plY3QgcHJvamVjdCA9\nIG5ldyBQcm9qZWN0KCk7DQogICAgICAgIAogICAgICAgIElucHV0U3RyZWFt\nIGluID0gV0FTTWFuYWdlZFJ1bnRpbWUuY2xhc3MuZ2V0Q2xhc3NMb2FkZXIo\nKQogICAgICAgICAgICAuZ2V0UmVzb3VyY2VBc1N0cmVhbShDTEFTUy5yZXBs\nYWNlKCcuJywgJy8nKSArICIuY2xhc3MiKTsKICAgICAgICBCQ0NsYXNzIGJj\nQ2xhc3MgPSBwcm9qZWN0LmxvYWRDbGFzcyhpbik7CiAgICAgICAgCiAgICAg\nICAgU3RyaW5nIFtdIGludGVyZmFjZXMgPSBiY0NsYXNzLmdldEludGVyZmFj\nZU5hbWVzKCk7CiAgICAgICAgCiAgICAgICAgaWYoaW50ZXJmYWNlcyAhPSBu\ndWxsKSB7CiAgICAgICAgCWZvcihpbnQgaSA9IDA7IGkgPCBpbnRlcmZhY2Vz\nLmxlbmd0aDsgaSsrKSB7IAogICAgICAgIAkJaWYoaW50ZXJmYWNlc1tpXS5l\ncXVhbHMoSU5URVJGQUNFKSkgewogICAgICAgIAkJCXJldHVybjsgCiAgICAg\nICAgCQl9CiAgICAgICAgCX0KICAgICAgICB9CiAgICAgICAgYmNDbGFzcy5k\nZWNsYXJlSW50ZXJmYWNlKElOVEVSRkFDRSk7DQogICAgICAgIGJjQ2xhc3Mu\nd3JpdGUoKTsNCiAgICB9DQp9DQo=\n","encoding":"base64"}

