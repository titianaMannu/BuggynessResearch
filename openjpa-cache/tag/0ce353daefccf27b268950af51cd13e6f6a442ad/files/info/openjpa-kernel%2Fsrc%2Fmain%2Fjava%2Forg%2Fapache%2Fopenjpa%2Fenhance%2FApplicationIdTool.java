{"sha":"2d7495237b7687c762ffda484919e43ea51f97dc","node_id":"MDQ6QmxvYjIwNjM2NDoyZDc0OTUyMzdiNzY4N2M3NjJmZmRhNDg0OTE5ZTQzZWE1MWY5N2Rj","size":56883,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/2d7495237b7687c762ffda484919e43ea51f97dc","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5lbmhhbmNlOwoKaW1wb3J0IGphdmEuaW8uRmlsZTsKaW1wb3J0\nIGphdmEuaW8uRmlsZVdyaXRlcjsKaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRp\nb247CmltcG9ydCBqYXZhLmlvLlByaW50V3JpdGVyOwppbXBvcnQgamF2YS5p\nby5Xcml0ZXI7CmltcG9ydCBqYXZhLmxhbmcucmVmbGVjdC5Nb2RpZmllcjsK\naW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7CmltcG9ydCBqYXZhLnV0aWwu\nQXJyYXlzOwppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247CmltcG9ydCBq\nYXZhLnV0aWwuRGF0ZTsKaW1wb3J0IGphdmEudXRpbC5IYXNoU2V0OwppbXBv\ncnQgamF2YS51dGlsLkl0ZXJhdG9yOwppbXBvcnQgamF2YS51dGlsLkxpc3Q7\nCmltcG9ydCBqYXZhLnV0aWwuTWFwOwppbXBvcnQgamF2YS51dGlsLlNldDsK\naW1wb3J0IGphdmEudXRpbC5UcmVlU2V0OwoKaW1wb3J0IG9yZy5hcGFjaGUu\nY29tbW9ucy5sYW5nLlN0cmluZ1V0aWxzOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmNvbmYuT3BlbkpQQUNvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuY29uZi5PcGVuSlBBQ29uZmlndXJhdGlvbkltcGw7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmNvbmYuQ29uZmlndXJh\ndGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5Db25m\naWd1cmF0aW9uczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIubG9n\nLkxvZzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIubWV0YS5DbGFz\nc0FyZ1BhcnNlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRp\nbC5Db2RlRm9ybWF0OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51\ndGlsLkZpbGVzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGls\nLkphdmFWZXJzaW9uczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIu\ndXRpbC5Mb2NhbGl6ZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGli\nLnV0aWwuT3B0aW9uczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRh\nLkNsYXNzTWV0YURhdGE7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0\nYS5EZWxlZ2F0aW5nTWV0YURhdGFGYWN0b3J5OwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLm1ldGEuRmllbGRNZXRhRGF0YTsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5tZXRhLkphdmFUeXBlczsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5tZXRhLk1ldGFEYXRhRmFjdG9yeTsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5tZXRhLk1ldGFEYXRhUmVwb3NpdG9yeTsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS51dGlsLkludmFsaWRTdGF0ZUV4Y2VwdGlvbjsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLlVzZXJFeGNlcHRpb247\nCmltcG9ydCBzZXJwLmJ5dGVjb2RlLkJDQ2xhc3M7CmltcG9ydCBzZXJwLmJ5\ndGVjb2RlLkJDQ2xhc3NMb2FkZXI7CmltcG9ydCBzZXJwLmJ5dGVjb2RlLlBy\nb2plY3Q7CmltcG9ydCBzZXJwLnV0aWwuU3RyaW5nczsKCi8qKgogKiBHZW5l\ncmF0ZXMgYSBjbGFzcyBhcHByb3ByaWF0ZSBmb3IgdXNlIGFzIGFuIGFwcGxp\nY2F0aW9uIGlkZW50aXR5IGNsYXNzLgogKgogKiBAYXV0aG9yIFBhdHJpY2sg\nTGluc2tleQogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKi8KcHVibGljIGNsYXNz\nIEFwcGxpY2F0aW9uSWRUb29sIHsKCiAgICBwdWJsaWMgc3RhdGljIGZpbmFs\nIFN0cmluZyBUT0tFTl9ERUZBVUxUID0gIjo6IjsKCiAgICBwcml2YXRlIHN0\nYXRpYyBmaW5hbCBTdHJpbmcgVE9LRU5JWkVSX0NVU1RPTSA9ICJUb2tlbml6\nZXIiOwogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIFRPS0VOSVpF\nUl9TVEQgPSAiU3RyaW5nVG9rZW5pemVyIjsKCiAgICBwcml2YXRlIHN0YXRp\nYyBMb2NhbGl6ZXIgX2xvYyA9IExvY2FsaXplci5mb3JQYWNrYWdlCiAgICAg\nICAgKEFwcGxpY2F0aW9uSWRUb29sLmNsYXNzKTsKCiAgICBwcml2YXRlIGZp\nbmFsIExvZyBfbG9nOwogICAgcHJpdmF0ZSBmaW5hbCBDbGFzcyBfdHlwZTsK\nICAgIHByaXZhdGUgZmluYWwgQ2xhc3NNZXRhRGF0YSBfbWV0YTsKICAgIHBy\naXZhdGUgYm9vbGVhbiBfYWJzdHJhY3QgPSBmYWxzZTsKICAgIHByaXZhdGUg\nRmllbGRNZXRhRGF0YVtdIF9maWVsZHMgPSBudWxsOwogICAgcHJpdmF0ZSBi\nb29sZWFuIF9pZ25vcmUgPSB0cnVlOwogICAgcHJpdmF0ZSBGaWxlIF9kaXIg\nPSBudWxsOwogICAgcHJpdmF0ZSBXcml0ZXIgX3dyaXRlciA9IG51bGw7CiAg\nICBwcml2YXRlIFN0cmluZyBfY29kZSA9IG51bGw7CiAgICBwcml2YXRlIFN0\ncmluZyBfdG9rZW4gPSBUT0tFTl9ERUZBVUxUOwogICAgcHJpdmF0ZSBDb2Rl\nRm9ybWF0IF9mb3JtYXQgPSBudWxsOwoKICAgIC8qKgogICAgICogQ29uc3Ry\ndWN0cyBhIG5ldyBBcHBsaWNhdGlvbklkVG9vbCBjYXBhYmxlIG9mIGdlbmVy\nYXRpbmcgYW4KICAgICAqIG9iamVjdCBpZCBjbGFzcyBmb3IgPGNvZGU+dHlw\nZTwvY29kZT4uCiAgICAgKi8KICAgIHB1YmxpYyBBcHBsaWNhdGlvbklkVG9v\nbChPcGVuSlBBQ29uZmlndXJhdGlvbiBjb25mLCBDbGFzcyB0eXBlKSB7CiAg\nICAgICAgX2xvZyA9IGNvbmYuZ2V0TG9nKE9wZW5KUEFDb25maWd1cmF0aW9u\nLkxPR19FTkhBTkNFKTsKICAgICAgICBfdHlwZSA9IHR5cGU7CgogICAgICAg\nIE1ldGFEYXRhUmVwb3NpdG9yeSByZXBvcyA9IGNvbmYubmV3TWV0YURhdGFS\nZXBvc2l0b3J5SW5zdGFuY2UoKTsKICAgICAgICByZXBvcy5zZXRWYWxpZGF0\nZShyZXBvcy5WQUxJREFURV9OT05FKTsKICAgICAgICByZXBvcy5zZXRTb3Vy\nY2VNb2RlKHJlcG9zLk1PREVfTUFQUElORywgZmFsc2UpOwogICAgICAgIGxv\nYWRPYmplY3RJZHMocmVwb3MsIHRydWUpOwogICAgICAgIF9tZXRhID0gcmVw\nb3MuZ2V0TWV0YURhdGEodHlwZSwgbnVsbCwgZmFsc2UpOwogICAgICAgIGlm\nIChfbWV0YSAhPSBudWxsKSB7CiAgICAgICAgICAgIF9hYnN0cmFjdCA9IE1v\nZGlmaWVyLmlzQWJzdHJhY3QoX21ldGEuZ2V0RGVzY3JpYmVkVHlwZSgpLgog\nICAgICAgICAgICAgICAgZ2V0TW9kaWZpZXJzKCkpOwogICAgICAgICAgICBf\nZmllbGRzID0gZ2V0RGVjbGFyZWRQcmltYXJ5S2V5RmllbGRzKF9tZXRhKTsK\nICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3RzIGEg\nbmV3IHRvb2wgaW5zdGFuY2UgY2FwYWJsZSBvZiBnZW5lcmF0aW5nIGFuCiAg\nICAgKiBvYmplY3QgaWQgY2xhc3MgZm9yIDxjb2RlPm1ldGE8L2NvZGU+Lgog\nICAgICovCiAgICBwdWJsaWMgQXBwbGljYXRpb25JZFRvb2woT3BlbkpQQUNv\nbmZpZ3VyYXRpb24gY29uZiwgQ2xhc3MgdHlwZSwKICAgICAgICBDbGFzc01l\ndGFEYXRhIG1ldGEpIHsKICAgICAgICBfbG9nID0gY29uZi5nZXRMb2coT3Bl\nbkpQQUNvbmZpZ3VyYXRpb24uTE9HX0VOSEFOQ0UpOwoKICAgICAgICBfdHlw\nZSA9IHR5cGU7CiAgICAgICAgX21ldGEgPSBtZXRhOwogICAgICAgIGlmIChf\nbWV0YSAhPSBudWxsKSB7CiAgICAgICAgICAgIF9hYnN0cmFjdCA9IE1vZGlm\naWVyLmlzQWJzdHJhY3QoX21ldGEuZ2V0RGVzY3JpYmVkVHlwZSgpLgogICAg\nICAgICAgICAgICAgZ2V0TW9kaWZpZXJzKCkpOwogICAgICAgICAgICBfZmll\nbGRzID0gZ2V0RGVjbGFyZWRQcmltYXJ5S2V5RmllbGRzKF9tZXRhKTsKICAg\nICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gbWV0YWRhdGEg\nZm9yIHByaW1hcnkga2V5IGZpZWxkcyBkZWNsYXJlZCBpbiB0aGUgZ2l2ZW4g\nY2xhc3MuCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGljIEZpZWxkTWV0YURh\ndGFbXSBnZXREZWNsYXJlZFByaW1hcnlLZXlGaWVsZHMKICAgICAgICAoQ2xh\nc3NNZXRhRGF0YSBtZXRhKSB7CiAgICAgICAgaWYgKG1ldGEuZ2V0UENTdXBl\ncmNsYXNzKCkgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIG1ldGEuZ2V0\nUHJpbWFyeUtleUZpZWxkcygpOwoKICAgICAgICAvLyByZW1vdmUgdGhlIHBy\naW1hcnkga2V5IGZpZWxkcyB0aGF0IGFyZSBub3QgZGVjbGFyZWQKICAgICAg\nICAvLyBpbiB0aGUgY3VycmVudCBjbGFzcwogICAgICAgIEZpZWxkTWV0YURh\ndGFbXSBmaWVsZHMgPSBtZXRhLmdldFByaW1hcnlLZXlGaWVsZHMoKTsKICAg\nICAgICBMaXN0IGRlY3MgPSBuZXcgQXJyYXlMaXN0KGZpZWxkcy5sZW5ndGgp\nOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZmllbGRzLmxlbmd0aDsg\naSsrKQogICAgICAgICAgICBpZiAoZmllbGRzW2ldLmdldERlY2xhcmluZ1R5\ncGUoKSA9PSBtZXRhLmdldERlc2NyaWJlZFR5cGUoKSkKICAgICAgICAgICAg\nICAgIGRlY3MuYWRkKGZpZWxkc1tpXSk7CiAgICAgICAgcmV0dXJuIChGaWVs\nZE1ldGFEYXRhW10pIGRlY3MudG9BcnJheShuZXcgRmllbGRNZXRhRGF0YVtk\nZWNzLnNpemUoKV0pOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIGZh\nbHNlIGlmIHRoaXMgdG9vbCBpcyBjb25maWd1cmVkIHRvIHRocm93IGFuIGV4\nY2VwdGlvbiBvbgogICAgICogYW4gYXR0ZW1wdCB0byBnZW5lcmF0ZSBhbiBp\nZCBjbGFzcyBmb3IgYSB0eXBlIHRoYXQgZG9lcyBub3QgdXNlCiAgICAgKiBh\ncHBsaWNhdGlvbiBpZGVudGl0eS4KICAgICAqLwogICAgcHVibGljIGJvb2xl\nYW4gZ2V0SWdub3JlRXJyb3JzKCkgewogICAgICAgIHJldHVybiBfaWdub3Jl\nOwogICAgfQoKICAgIC8qKgogICAgICogU2V0IHRvIGZhbHNlIGlmIHRoaXMg\ndG9vbCBzaG91bGQgdGhyb3cgYW4gZXhjZXB0aW9uIG9uCiAgICAgKiBhbiBh\ndHRlbXB0IHRvIGdlbmVyYXRlIGFuIGlkIGNsYXNzIGZvciBhIHR5cGUgdGhh\ndCBkb2VzIG5vdCB1c2UKICAgICAqIGFwcGxpY2F0aW9uIGlkZW50aXR5Lgog\nICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRJZ25vcmVFcnJvcnMoYm9vbGVh\nbiBpZ25vcmUpIHsKICAgICAgICBfaWdub3JlID0gaWdub3JlOwogICAgfQoK\nICAgIC8qKgogICAgICogVGhlIGNvZGUgZm9ybWF0dGVyIGZvciB0aGUgZ2Vu\nZXJhdGVkIEphdmEgY29kZS4KICAgICAqLwogICAgcHVibGljIENvZGVGb3Jt\nYXQgZ2V0Q29kZUZvcm1hdCgpIHsKICAgICAgICByZXR1cm4gX2Zvcm1hdDsK\nICAgIH0KCiAgICAvKioKICAgICAqIFNldCB0aGUgY29kZSBmb3JtYXR0ZXIg\nZm9yIHRoZSBnZW5lcmF0ZWQgSmF2YSBjb2RlLgogICAgICovCiAgICBwdWJs\naWMgdm9pZCBzZXRDb2RlRm9ybWF0KENvZGVGb3JtYXQgZm9ybWF0KSB7CiAg\nICAgICAgX2Zvcm1hdCA9IGZvcm1hdDsKICAgIH0KCiAgICAvKioKICAgICAq\nIFRoZSBkaXJlY3RvcnkgdG8gd3JpdGUgc291cmNlIHRvLiBEZWZhdWx0cyB0\nbyB0aGUgZGlyZWN0b3J5CiAgICAgKiBvZiB0aGUgSmF2YSBmaWxlIGZvciB0\naGUgc2V0IHR5cGUuIElmIHRoZSBnaXZlbiBkaXJlY3RvcnkgZG9lcyBub3QK\nICAgICAqIG1hdGNoIHRoZSBwYWNrYWdlIG9mIHRoZSBvYmplY3QgaWQsIHRo\nZSBwYWNrYWdlIHN0cnVjdHVyZSB3aWxsIGJlCiAgICAgKiBjcmVhdGVkIGJl\nbG93IHRoZSBkaXJlY3RvcnkuCiAgICAgKi8KICAgIHB1YmxpYyBGaWxlIGdl\ndERpcmVjdG9yeSgpIHsKICAgICAgICByZXR1cm4gX2RpcjsKICAgIH0KCiAg\nICAvKioKICAgICAqIFRoZSBkaXJlY3RvcnkgdG8gd3JpdGUgc291cmNlIHRv\nLiBEZWZhdWx0cyB0byB0aGUgZGlyZWN0b3J5CiAgICAgKiBvZiB0aGUgSmF2\nYSBmaWxlIGZvciB0aGUgc2V0IHR5cGUuIElmIHRoZSBnaXZlbiBkaXJlY3Rv\ncnkgZG9lcyBub3QKICAgICAqIG1hdGNoIHRoZSBwYWNrYWdlIG9mIHRoZSBv\nYmplY3QgaWQsIHRoZSBwYWNrYWdlIHN0cnVjdHVyZSB3aWxsIGJlCiAgICAg\nKiBjcmVhdGVkIGJlbG93IHRoZSBkaXJlY3RvcnkuCiAgICAgKi8KICAgIHB1\nYmxpYyB2b2lkIHNldERpcmVjdG9yeShGaWxlIGRpcikgewogICAgICAgIF9k\naXIgPSBkaXI7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgdG9rZW4gdG8g\ndXNlIHRvIHNlcGFyYXRlIHN0cmluZ2lmaWVkIHByaW1hcnkga2V5IGZpZWxk\nIHZhbHVlcy4KICAgICAqLwogICAgcHVibGljIFN0cmluZyBnZXRUb2tlbigp\nIHsKICAgICAgICByZXR1cm4gX3Rva2VuOwogICAgfQoKICAgIC8qKgogICAg\nICogVGhlIHRva2VuIHRvIHVzZSB0byBzZXBhcmF0ZSBzdHJpbmdpZmllZCBw\ncmltYXJ5IGtleSBmaWVsZCB2YWx1ZXMuCiAgICAgKi8KICAgIHB1YmxpYyB2\nb2lkIHNldFRva2VuKFN0cmluZyB0b2tlbikgewogICAgICAgIF90b2tlbiA9\nIHRva2VuOwogICAgfQoKICAgIC8qKgogICAgICogVGhlIHdyaXRlciB0byB3\ncml0ZSBzb3VyY2UgdG8sIG9yIG51bGwgdG8gd3JpdGUgdG8gZGVmYXVsdCBm\naWxlLgogICAgICovCiAgICBwdWJsaWMgV3JpdGVyIGdldFdyaXRlcigpIHsK\nICAgICAgICByZXR1cm4gX3dyaXRlcjsKICAgIH0KCiAgICAvKioKICAgICAq\nIFRoZSB3cml0ZXIgdG8gd3JpdGUgc291cmNlIHRvLCBvciBudWxsIHRvIHdy\naXRlIHRvIGRlZmF1bHQgZmlsZS4KICAgICAqLwogICAgcHVibGljIHZvaWQg\nc2V0V3JpdGVyKFdyaXRlciB3cml0ZXIpIHsKICAgICAgICBfd3JpdGVyID0g\nd3JpdGVyOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSB0eXBl\nIHdlIGFyZSBnZW5lcmF0aW5nIGFuIGFwcGxpY2F0aW9uIGlkIGZvci4KICAg\nICAqLwogICAgcHVibGljIENsYXNzIGdldFR5cGUoKSB7CiAgICAgICAgcmV0\ndXJuIF90eXBlOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIG1ldGFk\nYXRhIGZvciB0aGUgdHlwZSB3ZSBhcmUgZ2VuZXJhdGluZyBhbiBhcHBsaWNh\ndGlvbiBpZCBmb3IuCiAgICAgKi8KICAgIHB1YmxpYyBDbGFzc01ldGFEYXRh\nIGdldE1ldGFEYXRhKCkgewogICAgICAgIHJldHVybiBfbWV0YTsKICAgIH0K\nCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgY29kZSBnZW5lcmF0ZWQgZm9y\nIHRoZSBhcHBsaWNhdGlvbiBpZCwgb3IgbnVsbAogICAgICogaWYgaW52YWxp\nZCBjbGFzcyBvciB0aGUge0BsaW5rICNydW59IG1ldGhvZCBoYXMgbm90IGJl\nZW4gY2FsbGVkLgogICAgICovCiAgICBwdWJsaWMgU3RyaW5nIGdldENvZGUo\nKSB7CiAgICAgICAgcmV0dXJuIF9jb2RlOwogICAgfQoKICAgIC8qKgogICAg\nICogUmV0dXJucyB0cnVlIGlmIHRoZSBhcHBsaWNhdGlvbiBpZGVudGl0eSBj\nbGFzcyBzaG91bGQgYmUgYW4gaW5uZXIgY2xhc3MuCiAgICAgKi8KICAgIHB1\nYmxpYyBib29sZWFuIGlzSW5uZXJDbGFzcygpIHsKICAgICAgICBDbGFzcyBv\naWRDbGFzcyA9IF9tZXRhLmdldE9iamVjdElkVHlwZSgpOwogICAgICAgIHJl\ndHVybiBvaWRDbGFzcy5nZXROYW1lKCkuaW5kZXhPZignJCcpICE9IC0xOwog\nICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgc2hvcnQgY2xhc3Mg\nbmFtZSBmb3IgdGhlIG9iamVjdCBpZCBjbGFzcy4KICAgICAqLwogICAgcHJp\ndmF0ZSBTdHJpbmcgZ2V0Q2xhc3NOYW1lKCkgewogICAgICAgIGlmIChfbWV0\nYS5pc09wZW5KUEFJZGVudGl0eSgpKQogICAgICAgICAgICByZXR1cm4gbnVs\nbDsKCiAgICAgICAgLy8gY29udmVydCBmcm9tIFNvbWVDbGFzcyRJRCB0byBJ\nRAogICAgICAgIFN0cmluZyBjbGFzc05hbWUgPSBTdHJpbmdzLmdldENsYXNz\nTmFtZShfbWV0YS5nZXRPYmplY3RJZFR5cGUoKSk7CiAgICAgICAgaWYgKGlz\nSW5uZXJDbGFzcygpKQogICAgICAgICAgICBjbGFzc05hbWUgPSBjbGFzc05h\nbWUuc3Vic3RyaW5nKGNsYXNzTmFtZS5sYXN0SW5kZXhPZignJCcpICsgMSk7\nCiAgICAgICAgcmV0dXJuIGNsYXNzTmFtZTsKICAgIH0KCiAgICAvKioKICAg\nICAqIEdlbmVyYXRlcyB0aGUgc291cmNlY29kZSBmb3IgdGhlIGFwcGxpY2F0\naW9uIGlkIGNsYXNzOyByZXR1cm5zCiAgICAgKiBmYWxzZSBpZiB0aGUgY2xh\nc3MgaXMgaW52YWxpZC4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gcnVu\nKCkgewogICAgICAgIGlmIChfbG9nLmlzSW5mb0VuYWJsZWQoKSkKICAgICAg\nICAgICAgX2xvZy5pbmZvKF9sb2MuZ2V0KCJhcHBpZC1zdGFydCIsIF90eXBl\nKSk7CgogICAgICAgIC8vIGVuc3VyZSB0aGF0IHRoaXMgdHlwZSBpcyBhIGNh\nbmRpZGF0ZSBmb3IgYXBwbGljYXRpb24gaWRlbnRpdHkKICAgICAgICBpZiAo\nX21ldGEgPT0gbnVsbAogICAgICAgICAgICB8fCBfbWV0YS5nZXRJZGVudGl0\neVR5cGUoKSAhPSBDbGFzc01ldGFEYXRhLklEX0FQUExJQ0FUSU9OCiAgICAg\nICAgICAgIHx8IF9tZXRhLmlzT3BlbkpQQUlkZW50aXR5KCkpIHsKICAgICAg\nICAgICAgaWYgKCFfaWdub3JlKQogICAgICAgICAgICAgICAgdGhyb3cgbmV3\nIFVzZXJFeGNlcHRpb24oX2xvYy5nZXQoImFwcGlkLWludmFsaWQiLCBfdHlw\nZSkpOwoKICAgICAgICAgICAgLy8gZWxzZSBqdXN0IHdhcm4KICAgICAgICAg\nICAgaWYgKF9sb2cuaXNXYXJuRW5hYmxlZCgpKQogICAgICAgICAgICAgICAg\nX2xvZy53YXJuKF9sb2MuZ2V0KCJhcHBpZC13YXJuIiwgX3R5cGUpKTsKICAg\nICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgQ2xh\nc3Mgb2lkQ2xhc3MgPSBfbWV0YS5nZXRPYmplY3RJZFR5cGUoKTsKICAgICAg\nICBDbGFzcyBzdXBlck9pZENsYXNzID0gbnVsbDsKCiAgICAgICAgLy8gYWxs\nb3cgZGlmZiBvaWQgY2xhc3MgaW4gc3ViY2xhc3MgKGhvcml6b250YWwpCiAg\nICAgICAgaWYgKF9tZXRhLmdldFBDU3VwZXJjbGFzcygpICE9IG51bGwpIHsK\nICAgICAgICAgICAgc3VwZXJPaWRDbGFzcyA9IF9tZXRhLmdldFBDU3VwZXJj\nbGFzc01ldGFEYXRhKCkuZ2V0T2JqZWN0SWRUeXBlKCk7CiAgICAgICAgICAg\nIGlmIChvaWRDbGFzcyA9PSBudWxsIHx8IG9pZENsYXNzLmVxdWFscyhzdXBl\nck9pZENsYXNzKSkgewogICAgICAgICAgICAgICAgLy8ganVzdCB3YXJuCiAg\nICAgICAgICAgICAgICBpZiAoX2xvZy5pc1dhcm5FbmFibGVkKCkpCiAgICAg\nICAgICAgICAgICAgICAgX2xvZy53YXJuKF9sb2MuZ2V0KCJhcHBpZC13YXJu\nIiwgX3R5cGUpKTsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAg\nICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gZW5zdXJlIHRoYXQg\nYW4gaWQgY2xhc3MgaXMgZGVjbGFyZWQKICAgICAgICBpZiAob2lkQ2xhc3Mg\nPT0gbnVsbCkKICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFeGNlcHRpb24o\nX2xvYy5nZXQoIm5vLWlkLWNsYXNzIiwgX3R5cGUpKS4KICAgICAgICAgICAg\nICAgIHNldEZhdGFsKHRydWUpOwoKICAgICAgICAvLyBlbnN1cmUgdGhlcmUg\naXMgYXQgbGVhc3Qgb25lIHBrIGZpZWxkIGlmIHdlIGFyZQogICAgICAgIC8v\nIG5vbi1hYnNyYWN0LCBhbmQgc2VlIGlmIHdlIGhhdmUgYW55IGJ5dGVbXQog\nICAgICAgIGJvb2xlYW4gYnl0ZXMgPSBmYWxzZTsKICAgICAgICBmb3IgKGlu\ndCBpID0gMDsgIWJ5dGVzICYmIGkgPCBfZmllbGRzLmxlbmd0aDsgaSsrKQog\nICAgICAgICAgICBieXRlcyA9IF9maWVsZHNbaV0uZ2V0RGVjbGFyZWRUeXBl\nKCkgPT0gYnl0ZVtdLmNsYXNzOwoKICAgICAgICAvLyBjb2xsZWN0IGluZm8g\nb24gaWQgdHlwZQogICAgICAgIFN0cmluZyBjbGFzc05hbWUgPSBnZXRDbGFz\nc05hbWUoKTsKICAgICAgICBTdHJpbmcgcGFja2FnZU5hbWUgPSBTdHJpbmdz\nLmdldFBhY2thZ2VOYW1lKG9pZENsYXNzKTsKICAgICAgICBTdHJpbmcgcGFj\na2FnZURlYyA9ICIiOwogICAgICAgIGlmIChwYWNrYWdlTmFtZS5sZW5ndGgo\nKSA+IDApCiAgICAgICAgICAgIHBhY2thZ2VEZWMgPSAicGFja2FnZSAiICsg\ncGFja2FnZU5hbWUgKyAiOyI7CgogICAgICAgIFN0cmluZyBpbXBvcnRzID0g\nZ2V0SW1wb3J0cygpOwogICAgICAgIFN0cmluZyBmaWVsZERlY3MgPSBnZXRG\naWVsZERlY2xhcmF0aW9ucygpOwogICAgICAgIFN0cmluZyBjb25zdHJ1Y3Rv\nciA9IGdldENvbnN0cnVjdG9yKHN1cGVyT2lkQ2xhc3MgIT0gbnVsbCk7CiAg\nICAgICAgU3RyaW5nIHByb3BlcnRpZXMgPSBnZXRQcm9wZXJ0aWVzKCk7CiAg\nICAgICAgU3RyaW5nIGZyb21TdHJpbmdDb2RlID0gZ2V0RnJvbVN0cmluZ0Nv\nZGUoc3VwZXJPaWRDbGFzcyAhPSBudWxsKTsKICAgICAgICBTdHJpbmcgdG9T\ndHJpbmdDb2RlID0gZ2V0VG9TdHJpbmdDb2RlKHN1cGVyT2lkQ2xhc3MgIT0g\nbnVsbCk7CiAgICAgICAgU3RyaW5nIGVxdWFsc0NvZGUgPSBnZXRFcXVhbHND\nb2RlKHN1cGVyT2lkQ2xhc3MgIT0gbnVsbCk7CiAgICAgICAgU3RyaW5nIGhh\nc2hDb2RlQ29kZSA9IGdldEhhc2hDb2RlQ29kZShzdXBlck9pZENsYXNzICE9\nIG51bGwpOwoKICAgICAgICAvLyBidWlsZCB0aGUgamF2YSBjb2RlCiAgICAg\nICAgQ29kZUZvcm1hdCBjb2RlID0gbmV3Q29kZUZvcm1hdCgpOwogICAgICAg\nIGlmICghaXNJbm5lckNsYXNzKCkgJiYgcGFja2FnZURlYy5sZW5ndGgoKSA+\nIDApCiAgICAgICAgICAgIGNvZGUuYXBwZW5kKHBhY2thZ2VEZWMpLmFmdGVy\nU2VjdGlvbigpOwoKICAgICAgICBpZiAoIWlzSW5uZXJDbGFzcygpICYmIGlt\ncG9ydHMubGVuZ3RoKCkgPiAwKQogICAgICAgICAgICBjb2RlLmFwcGVuZChp\nbXBvcnRzKS5hZnRlclNlY3Rpb24oKTsKCiAgICAgICAgY29kZS5hcHBlbmQo\nIi8qKiIpLmVuZGwoKS4KICAgICAgICAgICAgYXBwZW5kKCIgKiAiKS4KICAg\nICAgICAgICAgYXBwZW5kKF9sb2MuZ2V0KCJhcHBpZC1jb21tZW50LWZvciIs\nIF90eXBlLmdldE5hbWUoKSkpLgogICAgICAgICAgICBlbmRsKCkuCiAgICAg\nICAgICAgIGFwcGVuZCgiICoiKS5lbmRsKCkuCiAgICAgICAgICAgIGFwcGVu\nZCgiICogIikuYXBwZW5kKF9sb2MuZ2V0KCJhcHBpZC1jb21tZW50LWdlbiIp\nKS5lbmRsKCkuCiAgICAgICAgICAgIGFwcGVuZCgiICogIikuYXBwZW5kKGdl\ndENsYXNzKCkuZ2V0TmFtZSgpKS5lbmRsKCkuCiAgICAgICAgICAgIGFwcGVu\nZCgiICovIikuZW5kbCgpOwogICAgICAgIGNvZGUuYXBwZW5kKCJwdWJsaWMg\nIik7CiAgICAgICAgaWYgKGlzSW5uZXJDbGFzcygpKQogICAgICAgICAgICBj\nb2RlLmFwcGVuZCgic3RhdGljICIpOwogICAgICAgIGNvZGUuYXBwZW5kKCJj\nbGFzcyAiKS5hcHBlbmQoY2xhc3NOYW1lKTsKICAgICAgICBpZiAoY29kZS5n\nZXRCcmFjZU9uU2FtZUxpbmUoKSkKICAgICAgICAgICAgY29kZS5hcHBlbmQo\nIiAiKTsKICAgICAgICBlbHNlCiAgICAgICAgICAgIGNvZGUuZW5kbCgpLnRh\nYigpOwoKICAgICAgICBpZiAoc3VwZXJPaWRDbGFzcyAhPSBudWxsKSB7CiAg\nICAgICAgICAgIGNvZGUuYXBwZW5kKCJleHRlbmRzICIgKyBTdHJpbmdzLmdl\ndENsYXNzTmFtZShzdXBlck9pZENsYXNzKSk7CiAgICAgICAgICAgIGlmIChj\nb2RlLmdldEJyYWNlT25TYW1lTGluZSgpKQogICAgICAgICAgICAgICAgY29k\nZS5hcHBlbmQoIiAiKTsKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAg\nICAgY29kZS5lbmRsKCkudGFiKCk7CiAgICAgICAgfQogICAgICAgIGNvZGUu\nYXBwZW5kKCJpbXBsZW1lbnRzIFNlcmlhbGl6YWJsZSIpLm9wZW5CcmFjZSgx\nKS5lbmRsKCk7CgogICAgICAgIC8vIGlmIHdlIHVzZSBhIGJ5dGUgYXJyYXkg\nd2UgbmVlZCBhIHN0YXRpYyBhcnJheSBmb3IgZW5jb2RpbmcgdG8gc3RyaW5n\nCiAgICAgICAgaWYgKGJ5dGVzKSB7CiAgICAgICAgICAgIGNvZGUudGFiKCku\nYXBwZW5kKCJwcml2YXRlIHN0YXRpYyBmaW5hbCBjaGFyW10gSEVYID0gIiku\nCiAgICAgICAgICAgICAgICBhcHBlbmQoIm5ldyBjaGFyW10geyIpLmVuZGwo\nKTsKICAgICAgICAgICAgY29kZS50YWIoMikuYXBwZW5kKCInMCcsICcxJywg\nJzInLCAnMycsICc0JywgJzUnLCAnNicsICc3JywiKS4KICAgICAgICAgICAg\nICAgIGVuZGwoKTsKICAgICAgICAgICAgY29kZS50YWIoMikuYXBwZW5kKCIn\nOCcsICc5JywgJ0EnLCAnQicsICdDJywgJ0QnLCAnRScsICdGJyIpLgogICAg\nICAgICAgICAgICAgZW5kbCgpOwogICAgICAgICAgICBjb2RlLnRhYigpLmFw\ncGVuZCgifTsiKS5lbmRsKDIpOwogICAgICAgIH0KCiAgICAgICAgLy8gc3Rh\ndGljIGJsb2NrIHRvIHJlZ2lzdGVyIGNsYXNzCiAgICAgICAgY29kZS50YWIo\nKS5hcHBlbmQoInN0YXRpYyIpLm9wZW5CcmFjZSgyKS5lbmRsKCk7CiAgICAg\nICAgY29kZS50YWIoMikuYXBwZW5kKCIvLyByZWdpc3RlciBwZXJzaXN0ZW50\nIGNsYXNzIGluIEpWTSIpLmVuZGwoKTsKICAgICAgICBpZiAoSmF2YVZlcnNp\nb25zLlZFUlNJT04gPj0gNSkgewogICAgICAgICAgICBjb2RlLnRhYigyKS5h\ncHBlbmQoInRyeSB7IENsYXNzLmZvck5hbWUiKS5vcGVuUGFyZW4odHJ1ZSku\nCiAgICAgICAgICAgICAgICBhcHBlbmQoIlwiIikuYXBwZW5kKF90eXBlLmdl\ndE5hbWUoKSkuYXBwZW5kKCJcIiIpLgogICAgICAgICAgICAgICAgY2xvc2VQ\nYXJlbigpLmFwcGVuZCgiOyIpLmFwcGVuZCgiIH0iKS5lbmRsKCk7CiAgICAg\nICAgICAgIGNvZGUudGFiKDIpLmFwcGVuZCgiY2F0Y2giKS5vcGVuUGFyZW4o\ndHJ1ZSkuCiAgICAgICAgICAgICAgICBhcHBlbmQoIkV4Y2VwdGlvbiBlIiku\nY2xvc2VQYXJlbigpLmFwcGVuZCgiIHt9IikuZW5kbCgpOwogICAgICAgIH0g\nZWxzZQogICAgICAgICAgICBjb2RlLnRhYigyKS5hcHBlbmQoIkNsYXNzIGMg\nPSAiKS5hcHBlbmQoX3R5cGUuZ2V0TmFtZSgpKS4KICAgICAgICAgICAgICAg\nIGFwcGVuZCgiLmNsYXNzOyIpLmVuZGwoKTsKICAgICAgICBjb2RlLmNsb3Nl\nQnJhY2UoMik7CgogICAgICAgIC8vIGZpZWxkIGRlY2xhcmF0aW9ucwogICAg\nICAgIGlmIChmaWVsZERlY3MubGVuZ3RoKCkgPiAwKQogICAgICAgICAgICBj\nb2RlLmVuZGwoMikuYXBwZW5kKGZpZWxkRGVjcyk7CgogICAgICAgIC8vIGRl\nZmF1bHQgY29uc3RydWN0b3IKICAgICAgICBjb2RlLmFmdGVyU2VjdGlvbigp\nLnRhYigpLmFwcGVuZCgicHVibGljICIpLmFwcGVuZChjbGFzc05hbWUpLgog\nICAgICAgICAgICBwYXJlbnMoKS5vcGVuQnJhY2UoMikuZW5kbCgpOwogICAg\nICAgIGNvZGUuY2xvc2VCcmFjZSgyKTsKCiAgICAgICAgLy8gc3RyaW5nIGNv\nbnN0cnVjdG9yCiAgICAgICAgY29kZS5hZnRlclNlY3Rpb24oKS5hcHBlbmQo\nY29uc3RydWN0b3IpOwoKICAgICAgICAvLyBwcm9wZXJ0aWVzCiAgICAgICAg\naWYgKHByb3BlcnRpZXMubGVuZ3RoKCkgPiAwKQogICAgICAgICAgICBjb2Rl\nLmFmdGVyU2VjdGlvbigpLmFwcGVuZChwcm9wZXJ0aWVzKTsKCiAgICAgICAg\nLy8gdG9TdHJpbmcsIGVxdWFscywgaGFzaENvZGUgbWV0aG9kcwogICAgICAg\nIGlmICh0b1N0cmluZ0NvZGUubGVuZ3RoKCkgPiAwKQogICAgICAgICAgICBj\nb2RlLmFmdGVyU2VjdGlvbigpLmFwcGVuZCh0b1N0cmluZ0NvZGUpOwogICAg\nICAgIGlmIChoYXNoQ29kZUNvZGUubGVuZ3RoKCkgPiAwKQogICAgICAgICAg\nICBjb2RlLmFmdGVyU2VjdGlvbigpLmFwcGVuZChoYXNoQ29kZUNvZGUpOwog\nICAgICAgIGlmIChlcXVhbHNDb2RlLmxlbmd0aCgpID4gMCkKICAgICAgICAg\nICAgY29kZS5hZnRlclNlY3Rpb24oKS5hcHBlbmQoZXF1YWxzQ29kZSk7CiAg\nICAgICAgaWYgKGZyb21TdHJpbmdDb2RlLmxlbmd0aCgpID4gMCkKICAgICAg\nICAgICAgY29kZS5hZnRlclNlY3Rpb24oKS5hcHBlbmQoZnJvbVN0cmluZ0Nv\nZGUpOwoKICAgICAgICAvLyBpZiB3ZSBoYXZlIGFueSBieXRlIGFycmF5IGZp\nZWxkcywgd2UgaGF2ZSB0byBhZGQgdGhlIGV4dHJhCiAgICAgICAgLy8gbWV0\naG9kcyBmb3IgaGFuZGxpbmcgYnl0ZSBhcnJheXMKICAgICAgICBpZiAoYnl0\nZXMpIHsKICAgICAgICAgICAgY29kZS5hZnRlclNlY3Rpb24oKS5hcHBlbmQo\nZ2V0VG9CeXRlc0J5dGVBcnJheUNvZGUoKSk7CiAgICAgICAgICAgIGNvZGUu\nYWZ0ZXJTZWN0aW9uKCkuYXBwZW5kKGdldFRvU3RyaW5nQnl0ZUFycmF5Q29k\nZSgpKTsKICAgICAgICAgICAgY29kZS5hZnRlclNlY3Rpb24oKS5hcHBlbmQo\nZ2V0RXF1YWxzQnl0ZUFycmF5Q29kZSgpKTsKICAgICAgICAgICAgY29kZS5h\nZnRlclNlY3Rpb24oKS5hcHBlbmQoZ2V0SGFzaENvZGVCeXRlQXJyYXlDb2Rl\nKCkpOwogICAgICAgIH0KCiAgICAgICAgLy8gYmFzZSBjbGFzc2VzIG1pZ2h0\nIG5lZWQgdG8gZGVmaW5lIGEgY3VzdG9tIHRva2VuaXplcgogICAgICAgIGlm\nIChzdXBlck9pZENsYXNzID09IG51bGwgJiYgZ2V0VG9rZW5pemVyKGZhbHNl\nKSA9PSBUT0tFTklaRVJfQ1VTVE9NKQogICAgICAgICAgICBjb2RlLmFmdGVy\nU2VjdGlvbigpLmFwcGVuZChnZXRDdXN0b21Ub2tlbml6ZXJDbGFzcygpKTsK\nCiAgICAgICAgY29kZS5lbmRsKCk7CiAgICAgICAgY29kZS5jbG9zZUJyYWNl\nKDEpOwoKICAgICAgICBfY29kZSA9IGNvZGUudG9TdHJpbmcoKTsKCiAgICAg\nICAgLy8gaWYgdGhpcyBpcyBhbiBpbm5lciBjbGFzcywgdGhlbiBpbmRlbnQg\ndGhlIGVudGlyZQogICAgICAgIC8vIGNvZGUgdW5pdCBvbmUgdGFiIGxldmVs\nCiAgICAgICAgaWYgKGlzSW5uZXJDbGFzcygpKSB7CiAgICAgICAgICAgIC8v\nIGluZGVudCB0aGUgZW50aXJlIGNvZGUgYmxvY2sgb25lIGxldmVsIHRvIG1h\na2UgaXQKICAgICAgICAgICAgLy8gYSBwcm9wZXJ0bHkgaW5kZW50ZWQgaW5u\nZGVyIGNsYXNzCiAgICAgICAgICAgIF9jb2RlID0gY29kZS5nZXRUYWIoKSAr\nIFN0cmluZ3MucmVwbGFjZShfY29kZSwKICAgICAgICAgICAgICAgIFN5c3Rl\nbS5nZXRQcm9wZXJ0eSgibGluZS5zZXBhcmF0b3IiKSwKICAgICAgICAgICAg\nICAgIFN5c3RlbS5nZXRQcm9wZXJ0eSgibGluZS5zZXBhcmF0b3IiKSArIGNv\nZGUuZ2V0VGFiKCkpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRydWU7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBXcml0ZXMgdGhlIGdlbmVyYXRlZCBj\nb2RlIHRvIHRoZSBwcm9wZXIgZmlsZS4KICAgICAqLwogICAgcHVibGljIHZv\naWQgcmVjb3JkKCkKICAgICAgICB0aHJvd3MgSU9FeGNlcHRpb24gewogICAg\nICAgIGlmIChfY29kZSA9PSBudWxsKQogICAgICAgICAgICByZXR1cm47Cgog\nICAgICAgIFdyaXRlciB3cml0ZXIgPSBfd3JpdGVyOwogICAgICAgIGlmICh3\ncml0ZXIgPT0gbnVsbCkgewogICAgICAgICAgICBGaWxlIGZpbGUgPSBnZXRG\naWxlKCk7CiAgICAgICAgICAgIEZpbGVzLmJhY2t1cChmaWxlLCBmYWxzZSk7\nCiAgICAgICAgICAgIHdyaXRlciA9IG5ldyBGaWxlV3JpdGVyKGZpbGUpOwog\nICAgICAgIH0KCiAgICAgICAgUHJpbnRXcml0ZXIgcHJpbnRlciA9IG5ldyBQ\ncmludFdyaXRlcih3cml0ZXIpOwogICAgICAgIHByaW50ZXIucHJpbnQoX2Nv\nZGUpOwogICAgICAgIHByaW50ZXIuZmx1c2goKTsKCiAgICAgICAgaWYgKF93\ncml0ZXIgPT0gbnVsbCkKICAgICAgICAgICAgd3JpdGVyLmNsb3NlKCk7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIG5lY2Vzc2FyeSBpbXBv\ncnRzIGZvciB0aGUgY2xhc3MuCiAgICAgKi8KICAgIHByaXZhdGUgU3RyaW5n\nIGdldEltcG9ydHMoKSB7CiAgICAgICAgU2V0IHBrZ3MgPSBnZXRJbXBvcnRQ\nYWNrYWdlcygpOwoKICAgICAgICBDb2RlRm9ybWF0IGltcG9ydHMgPSBuZXdD\nb2RlRm9ybWF0KCk7CiAgICAgICAgU3RyaW5nIGJhc2UgPSBTdHJpbmdzLmdl\ndFBhY2thZ2VOYW1lKF9tZXRhLmdldE9iamVjdElkVHlwZSgpKTsKICAgICAg\nICBTdHJpbmcgcGtnOwogICAgICAgIGZvciAoSXRlcmF0b3IgaXRyID0gcGtn\ncy5pdGVyYXRvcigpOyBpdHIuaGFzTmV4dCgpOykgewogICAgICAgICAgICBw\na2cgPSAoU3RyaW5nKSBpdHIubmV4dCgpOwogICAgICAgICAgICBpZiAocGtn\nLmxlbmd0aCgpID4gMCAmJiAhImphdmEubGFuZyIuZXF1YWxzKHBrZykKICAg\nICAgICAgICAgICAgICYmICFiYXNlLmVxdWFscyhwa2cpKSB7CiAgICAgICAg\nICAgICAgICBpZiAoaW1wb3J0cy5sZW5ndGgoKSA+IDApCiAgICAgICAgICAg\nICAgICAgICAgaW1wb3J0cy5lbmRsKCk7CiAgICAgICAgICAgICAgICBpbXBv\ncnRzLmFwcGVuZCgiaW1wb3J0ICIpLmFwcGVuZChwa2cpLmFwcGVuZCgiLio7\nIik7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGlt\ncG9ydHMudG9TdHJpbmcoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVy\nbnMgdGhlIGNvbGxlY3Rpb24gb2YgcGFja2FnZXMgdGhhdCBuZWVkIHRvIGJl\nIGltcG9ydGVkLgogICAgICovCiAgICBwdWJsaWMgU2V0IGdldEltcG9ydFBh\nY2thZ2VzKCkgewogICAgICAgIFNldCBwa2dzID0gbmV3IFRyZWVTZXQoKTsK\nICAgICAgICBwa2dzLmFkZChTdHJpbmdzLmdldFBhY2thZ2VOYW1lKF90eXBl\nKSk7CgogICAgICAgIENsYXNzIHN1cGVyT2lkQ2xhc3MgPSBudWxsOwogICAg\nICAgIGlmIChfbWV0YSAhPSBudWxsICYmIF9tZXRhLmdldFBDU3VwZXJjbGFz\nc01ldGFEYXRhKCkgIT0gbnVsbCkKICAgICAgICAgICAgc3VwZXJPaWRDbGFz\ncyA9IF9tZXRhLmdldFBDU3VwZXJjbGFzc01ldGFEYXRhKCkuZ2V0T2JqZWN0\nSWRUeXBlKCk7CiAgICAgICAgaWYgKHN1cGVyT2lkQ2xhc3MgIT0gbnVsbCkK\nICAgICAgICAgICAgcGtncy5hZGQoU3RyaW5ncy5nZXRQYWNrYWdlTmFtZShz\ndXBlck9pZENsYXNzKSk7CgogICAgICAgIHBrZ3MuYWRkKCJqYXZhLmlvIik7\nCiAgICAgICAgcGtncy5hZGQoImphdmEudXRpbCIpOwogICAgICAgIENsYXNz\nIHR5cGU7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfZmllbGRzLmxl\nbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHR5cGUgPSBfZmllbGRzW2ldLmdl\ndE9iamVjdElkRmllbGRUeXBlKCk7CiAgICAgICAgICAgIGlmICh0eXBlICE9\nIGJ5dGVbXS5jbGFzcyAmJiB0eXBlICE9IGNoYXJbXS5jbGFzcwogICAgICAg\nICAgICAgICAgJiYgIXR5cGUuZ2V0TmFtZSgpLnN0YXJ0c1dpdGgoImphdmEu\nc3FsLiIpKSB7CiAgICAgICAgICAgICAgICBwa2dzLmFkZChTdHJpbmdzLmdl\ndFBhY2thZ2VOYW1lKHR5cGUpKTsKICAgICAgICAgICAgfQogICAgICAgIH0K\nICAgICAgICByZXR1cm4gcGtnczsKICAgIH0KCiAgICAvKioKICAgICAqIFJl\ndHVybiB0aGUgY29kZSB0byBkZWNsYXJlIGFsbCBwcmltYXJ5IGtleSBmaWVs\nZHMuCiAgICAgKi8KICAgIHByaXZhdGUgU3RyaW5nIGdldEZpZWxkRGVjbGFy\nYXRpb25zKCkgewogICAgICAgIENvZGVGb3JtYXQgY29kZSA9IG5ld0NvZGVG\nb3JtYXQoKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9maWVsZHMu\nbGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKGkgPiAwKQogICAgICAg\nICAgICAgICAgY29kZS5lbmRsKCk7CiAgICAgICAgICAgIGNvZGUudGFiKCku\nYXBwZW5kKCJwdWJsaWMgIikuYXBwZW5kKGdldFR5cGVOYW1lKF9maWVsZHNb\naV0pKS4KICAgICAgICAgICAgICAgIGFwcGVuZCgiICIpLmFwcGVuZChfZmll\nbGRzW2ldLmdldE5hbWUoKSkuYXBwZW5kKCI7Iik7CiAgICAgICAgfQogICAg\nICAgIHJldHVybiBjb2RlLnRvU3RyaW5nKCk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBSZXR1cm4gdGhlIHR5cGUgbmFtZSB0byBkZWNsYXJlIHRoZSBnaXZl\nbiBmaWVsZCBhcy4KICAgICAqLwogICAgcHJpdmF0ZSBTdHJpbmcgZ2V0VHlw\nZU5hbWUoRmllbGRNZXRhRGF0YSBmbWQpIHsKICAgICAgICBDbGFzcyB0eXBl\nID0gZm1kLmdldE9iamVjdElkRmllbGRUeXBlKCk7CiAgICAgICAgaWYgKHR5\ncGUgPT0gYnl0ZVtdLmNsYXNzKQogICAgICAgICAgICByZXR1cm4gImJ5dGVb\nXSI7CiAgICAgICAgaWYgKHR5cGUgPT0gY2hhcltdLmNsYXNzKQogICAgICAg\nICAgICByZXR1cm4gImNoYXJbXSI7CiAgICAgICAgaWYgKHR5cGUuZ2V0TmFt\nZSgpLnN0YXJ0c1dpdGgoImphdmEuc3FsLiIpKQogICAgICAgICAgICByZXR1\ncm4gdHlwZS5nZXROYW1lKCk7CiAgICAgICAgcmV0dXJuIFN0cmluZ3MuZ2V0\nQ2xhc3NOYW1lKHR5cGUpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJu\nIHRoZSBnZXR0ZXJzIGFuZCBzZXR0ZXJzIGZvciBhbGwgcHJpbWFyeSBrZXkg\nZmllbGRzLgogICAgICovCiAgICBwcml2YXRlIFN0cmluZyBnZXRQcm9wZXJ0\naWVzKCkgewogICAgICAgIGlmIChfbWV0YS5nZXRBY2Nlc3NUeXBlKCkgPT0g\nQ2xhc3NNZXRhRGF0YS5BQ0NFU1NfRklFTEQpCiAgICAgICAgICAgIHJldHVy\nbiAiIjsKCiAgICAgICAgQ29kZUZvcm1hdCBjb2RlID0gbmV3Q29kZUZvcm1h\ndCgpOwogICAgICAgIFN0cmluZyBwcm9wTmFtZTsKICAgICAgICBTdHJpbmcg\ndHlwZU5hbWU7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfZmllbGRz\nLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChpID4gMCkKICAgICAg\nICAgICAgICAgIGNvZGUuYWZ0ZXJTZWN0aW9uKCk7CiAgICAgICAgICAgIHR5\ncGVOYW1lID0gZ2V0VHlwZU5hbWUoX2ZpZWxkc1tpXSk7CiAgICAgICAgICAg\nIHByb3BOYW1lID0gU3RyaW5nVXRpbHMuY2FwaXRhbGl6ZShfZmllbGRzW2ld\nLmdldE5hbWUoKSk7CgogICAgICAgICAgICBjb2RlLnRhYigpLmFwcGVuZCgi\ncHVibGljICIpLmFwcGVuZCh0eXBlTmFtZSkuYXBwZW5kKCIgIik7CiAgICAg\nICAgICAgIGlmIChfZmllbGRzW2ldLmdldERlY2xhcmVkVHlwZUNvZGUoKSA9\nPSBKYXZhVHlwZXMuQk9PTEVBTgogICAgICAgICAgICAgICAgfHwgX2ZpZWxk\nc1tpXS5nZXREZWNsYXJlZFR5cGVDb2RlKCkgPT0gSmF2YVR5cGVzLkJPT0xF\nQU5fT0JKKQogICAgICAgICAgICAgICAgY29kZS5hcHBlbmQoImlzIik7CiAg\nICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5kKCJn\nZXQiKTsKICAgICAgICAgICAgY29kZS5hcHBlbmQocHJvcE5hbWUpLnBhcmVu\ncygpLm9wZW5CcmFjZSgyKS5lbmRsKCk7CiAgICAgICAgICAgIGNvZGUudGFi\nKDIpLmFwcGVuZCgicmV0dXJuICIpLmFwcGVuZChfZmllbGRzW2ldLmdldE5h\nbWUoKSkuCiAgICAgICAgICAgICAgICBhcHBlbmQoIjsiKS5lbmRsKCk7CiAg\nICAgICAgICAgIGNvZGUuY2xvc2VCcmFjZSgyKTsKICAgICAgICAgICAgY29k\nZS5hZnRlclNlY3Rpb24oKTsKCiAgICAgICAgICAgIGNvZGUudGFiKCkuYXBw\nZW5kKCJwdWJsaWMgdm9pZCBzZXQiKS5hcHBlbmQocHJvcE5hbWUpOwogICAg\nICAgICAgICBjb2RlLm9wZW5QYXJlbih0cnVlKS5hcHBlbmQodHlwZU5hbWUp\nLmFwcGVuZCgiICIpLgogICAgICAgICAgICAgICAgYXBwZW5kKF9maWVsZHNb\naV0uZ2V0TmFtZSgpKS5jbG9zZVBhcmVuKCk7CiAgICAgICAgICAgIGNvZGUu\nb3BlbkJyYWNlKDIpLmVuZGwoKTsKICAgICAgICAgICAgY29kZS50YWIoMiku\nYXBwZW5kKCJ0aGlzLiIpLmFwcGVuZChfZmllbGRzW2ldLmdldE5hbWUoKSku\nCiAgICAgICAgICAgICAgICBhcHBlbmQoIiA9ICIpLmFwcGVuZChfZmllbGRz\nW2ldLmdldE5hbWUoKSkuYXBwZW5kKCI7IikuCiAgICAgICAgICAgICAgICBl\nbmRsKCk7CiAgICAgICAgICAgIGNvZGUuY2xvc2VCcmFjZSgyKTsKICAgICAg\nICB9CiAgICAgICAgcmV0dXJuIGNvZGUudG9TdHJpbmcoKTsKICAgIH0KCiAg\nICAvKioKICAgICAqIFJldHVybiB0aGUgc3RyaW5nIGNvbnN0cnVjdG9yIGNv\nZGUuCiAgICAgKi8KICAgIHByaXZhdGUgU3RyaW5nIGdldENvbnN0cnVjdG9y\nKGJvb2xlYW4gaGFzU3VwZXJjbGFzcykgewogICAgICAgIENvZGVGb3JtYXQg\nY29kZSA9IG5ld0NvZGVGb3JtYXQoKTsKICAgICAgICBjb2RlLnRhYigpLmFw\ncGVuZCgicHVibGljICIpOwogICAgICAgIGNvZGUuYXBwZW5kKGdldENsYXNz\nTmFtZSgpKTsKICAgICAgICBjb2RlLm9wZW5QYXJlbih0cnVlKS5hcHBlbmQo\nIlN0cmluZyBzdHIiKS5jbG9zZVBhcmVuKCk7CiAgICAgICAgY29kZS5vcGVu\nQnJhY2UoMikuZW5kbCgpOwoKICAgICAgICBpZiAoX2ZpZWxkcy5sZW5ndGgg\nIT0gMCB8fCAoaGFzU3VwZXJjbGFzcwogICAgICAgICAgICAmJiBfbWV0YS5n\nZXRQcmltYXJ5S2V5RmllbGRzKCkubGVuZ3RoID4gMCkpIHsKICAgICAgICAg\nICAgY29kZS50YWIoMikuYXBwZW5kKCJmcm9tU3RyaW5nIikub3BlblBhcmVu\nKHRydWUpLgogICAgICAgICAgICAgICAgYXBwZW5kKCJzdHIiKS5jbG9zZVBh\ncmVuKCkuYXBwZW5kKCI7IikuZW5kbCgpOwogICAgICAgIH0KCiAgICAgICAg\nY29kZS5jbG9zZUJyYWNlKDIpOwogICAgICAgIHJldHVybiBjb2RlLnRvU3Ry\naW5nKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgdGhlIGZyb21T\ndHJpbmcgbWV0aG9kIHRoYXQgcGFyc2VzIHRoZSByZXN1bHQgb2Ygb3VyIHRv\nU3RyaW5nCiAgICAgKiBtZXRob2QuIElmIHdlIGhhdmUgc3VwZXJjbGFzc2Vz\nIHdpdGggaWQgZmllbGRzLCB0aGlzIHdpbGwgY2FsbAogICAgICogc3VwZXIu\nZnJvbVN0cmluZygpIHNvIHRoYXQgdGhlIHBhcmVudCBjbGFzcyBjYW4gcGFy\nc2UgaXRzIG93biBmaWVsZHMuCiAgICAgKi8KICAgIHByaXZhdGUgU3RyaW5n\nIGdldEZyb21TdHJpbmdDb2RlKGJvb2xlYW4gaGFzU3VwZXJjbGFzcykgewog\nICAgICAgIC8vIGlmIHdlIGFyZSBiZWxvdyBhIGNvbmNyZXRlIGNsYXNzIHRo\nZW4gd2UgY2Fubm90IGRlY2xhcmUgYW55CiAgICAgICAgLy8gbW9yZSBwcmlt\nYXJ5IGtleSBmaWVsZHM7IHRodXMsIGp1c3QgdXNlIHRoZSBwYXJlbnQgaW52\nb2NhdGlvbgogICAgICAgIGlmIChoYXNDb25jcmV0ZVN1cGVyY2xhc3MoKSkK\nICAgICAgICAgICAgcmV0dXJuICIiOwogICAgICAgIGlmIChfZmllbGRzLmxl\nbmd0aCA9PSAwKQogICAgICAgICAgICByZXR1cm4gIiI7CiAgICAgICAgaGFz\nU3VwZXJjbGFzcyA9IGhhc1N1cGVyY2xhc3MgJiYgZ2V0RGVjbGFyZWRQcmlt\nYXJ5S2V5RmllbGRzCiAgICAgICAgICAgIChfbWV0YS5nZXRQQ1N1cGVyY2xh\nc3NNZXRhRGF0YSgpKS5sZW5ndGggPiAwOwoKICAgICAgICBTdHJpbmcgdG9r\nZSA9IGdldFRva2VuaXplcihoYXNTdXBlcmNsYXNzKTsKICAgICAgICBDb2Rl\nRm9ybWF0IGNvZGUgPSBuZXdDb2RlRm9ybWF0KCk7CiAgICAgICAgaWYgKF9h\nYnN0cmFjdCB8fCBoYXNTdXBlcmNsYXNzKQogICAgICAgICAgICBjb2RlLnRh\nYigpLmFwcGVuZCgicHJvdGVjdGVkICIpLmFwcGVuZCh0b2tlKS4KICAgICAg\nICAgICAgICAgIGFwcGVuZCgiIGZyb21TdHJpbmciKTsKICAgICAgICBlbHNl\nCiAgICAgICAgICAgIGNvZGUudGFiKCkuYXBwZW5kKCJwcml2YXRlIHZvaWQg\nZnJvbVN0cmluZyIpOwogICAgICAgIGNvZGUub3BlblBhcmVuKHRydWUpLmFw\ncGVuZCgiU3RyaW5nIHN0ciIpLmNsb3NlUGFyZW4oKTsKICAgICAgICBjb2Rl\nLm9wZW5CcmFjZSgyKS5lbmRsKCk7CgogICAgICAgIC8vIGlmIHdlIGhhdmUg\nYW55IE9iamVjdC10eXBlIGZpZWxkcywgZGllIGltbWVkaWF0ZWx5IAogICAg\nICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX2ZpZWxkcy5sZW5ndGg7IGkrKykg\newogICAgICAgICAgICBpZiAoX2ZpZWxkc1tpXS5nZXRPYmplY3RJZEZpZWxk\nVHlwZSgpICE9IE9iamVjdC5jbGFzcykKICAgICAgICAgICAgICAgIGNvbnRp\nbnVlOwogICAgICAgICAgICBjb2RlLnRhYigyKS5hcHBlbmQoInRocm93IG5l\ndyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiIpLgogICAgICAgICAg\nICAgICAgcGFyZW5zKCkuYXBwZW5kKCI7IikuZW5kbCgpOwogICAgICAgICAg\nICBjb2RlLmNsb3NlQnJhY2UoMik7IAogICAgICAgICAgICByZXR1cm4gY29k\nZS50b1N0cmluZygpOwogICAgICAgIH0gCgogICAgICAgIGlmICh0b2tlICE9\nIG51bGwpIHsKICAgICAgICAgICAgY29kZS50YWIoMikuYXBwZW5kKHRva2Up\nLmFwcGVuZCgiIHRva2UgPSAiKTsKICAgICAgICAgICAgaWYgKGhhc1N1cGVy\nY2xhc3MpIHsKICAgICAgICAgICAgICAgIC8vIGNhbGwgc3VwZXIuZnJvbVN0\ncmluZyhzdHIpIHRvIGdldCB0aGUgdG9rZW5pemVyIHRoYXQgd2FzCiAgICAg\nICAgICAgICAgICAvLyB1c2VkIHRvIHBhcnNlIHRoZSBzdXBlcmNsYXNzCiAg\nICAgICAgICAgICAgICBjb2RlLmFwcGVuZCgic3VwZXIuZnJvbVN0cmluZyIp\nLm9wZW5QYXJlbih0cnVlKS4KICAgICAgICAgICAgICAgICAgICBhcHBlbmQo\nInN0ciIpLmNsb3NlUGFyZW4oKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAg\nICAgICAgICAgICAgIC8vIG90aGVyd2lzZSBjb25zdHJ1Y3QgYSBuZXcgdG9r\nZW5pemVyIHdpdGggdGhlIHN0cmluZwogICAgICAgICAgICAgICAgY29kZS5h\ncHBlbmQoIm5ldyAiKS5hcHBlbmQodG9rZSkub3BlblBhcmVuKHRydWUpLgog\nICAgICAgICAgICAgICAgICAgIGFwcGVuZCgic3RyIik7CiAgICAgICAgICAg\nICAgICBpZiAodG9rZSA9PSBUT0tFTklaRVJfU1REKQogICAgICAgICAgICAg\nICAgICAgIGNvZGUuYXBwZW5kKCIsIFwiIikuYXBwZW5kKF90b2tlbikuYXBw\nZW5kKCJcIiIpOwogICAgICAgICAgICAgICAgY29kZS5jbG9zZVBhcmVuKCk7\nCiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29kZS5hcHBlbmQoIjsiKS5l\nbmRsKCk7CiAgICAgICAgfQoKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8\nIF9maWVsZHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKHRva2Ug\nIT0gbnVsbCkgewogICAgICAgICAgICAgICAgY29kZS50YWIoMikuYXBwZW5k\nKCJzdHIgPSB0b2tlLm5leHRUb2tlbiIpLnBhcmVucygpLgogICAgICAgICAg\nICAgICAgICAgIGFwcGVuZCgiOyIpLmVuZGwoKTsKICAgICAgICAgICAgfQog\nICAgICAgICAgICBjb2RlLnRhYigyKS5hcHBlbmQoZ2V0Q29udmVyc2lvbkNv\nZGUoX2ZpZWxkc1tpXSwgInN0ciIpKS5lbmRsKCk7CiAgICAgICAgfQogICAg\nICAgIGlmIChfYWJzdHJhY3QgfHwgaGFzU3VwZXJjbGFzcykKICAgICAgICAg\nICAgY29kZS50YWIoMikuYXBwZW5kKCJyZXR1cm4gdG9rZTsiKS5lbmRsKCk7\nCiAgICAgICAgY29kZS5jbG9zZUJyYWNlKDIpOwogICAgICAgIHJldHVybiBj\nb2RlLnRvU3RyaW5nKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5z\nIHRoZSB0eXBlIG9mIHRva2VuaXplciB0byB1c2UsIG9yIG51bGwgaWYgbm9u\nZS4KICAgICAqLwogICAgcHJpdmF0ZSBTdHJpbmcgZ2V0VG9rZW5pemVyKGJv\nb2xlYW4gaGFzU3VwZXJjbGFzcykgewogICAgICAgIGlmICghX2Fic3RyYWN0\nICYmICFoYXNTdXBlcmNsYXNzICYmIF9maWVsZHMubGVuZ3RoID09IDEpCiAg\nICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIGlmIChfdG9rZW4ubGVu\nZ3RoKCkgPT0gMSkKICAgICAgICAgICAgcmV0dXJuIFRPS0VOSVpFUl9TVEQ7\nCiAgICAgICAgcmV0dXJuIFRPS0VOSVpFUl9DVVNUT007CiAgICB9CgogICAg\nLyoqCiAgICAgKiBHZXQgcGFyc2luZyBjb2RlIGZvciB0aGUgZ2l2ZW4gZmll\nbGQuCiAgICAgKi8KICAgIHByaXZhdGUgU3RyaW5nIGdldENvbnZlcnNpb25D\nb2RlKEZpZWxkTWV0YURhdGEgZmllbGQsIFN0cmluZyB2YXIpIHsKICAgICAg\nICBDb2RlRm9ybWF0IHBhcnNlID0gbmV3Q29kZUZvcm1hdCgpOwogICAgICAg\nIGlmIChmaWVsZC5nZXROYW1lKCkuZXF1YWxzKHZhcikpCiAgICAgICAgICAg\nIHBhcnNlLmFwcGVuZCgidGhpcy4iKTsKICAgICAgICBwYXJzZS5hcHBlbmQo\nZmllbGQuZ2V0TmFtZSgpKS5hcHBlbmQoIiA9ICIpOwoKICAgICAgICBDbGFz\ncyB0eXBlID0gZmllbGQuZ2V0T2JqZWN0SWRGaWVsZFR5cGUoKTsKICAgICAg\nICBpZiAodHlwZSA9PSBEYXRlLmNsYXNzKSB7CiAgICAgICAgICAgIHBhcnNl\nLmFwcGVuZCgibmV3IERhdGUiKS5vcGVuUGFyZW4odHJ1ZSkuCiAgICAgICAg\nICAgICAgICBhcHBlbmQoIkxvbmcucGFyc2VMb25nIikub3BlblBhcmVuKHRy\ndWUpLgogICAgICAgICAgICAgICAgYXBwZW5kKHZhcikuY2xvc2VQYXJlbigp\nLmNsb3NlUGFyZW4oKTsKICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gamF2\nYS5zcWwuRGF0ZS5jbGFzcwogICAgICAgICAgICB8fCB0eXBlID09IGphdmEu\nc3FsLlRpbWVzdGFtcC5jbGFzcwogICAgICAgICAgICB8fCB0eXBlID09IGph\ndmEuc3FsLlRpbWUuY2xhc3MpIHsKICAgICAgICAgICAgcGFyc2UuYXBwZW5k\nKHR5cGUuZ2V0TmFtZSgpKS5hcHBlbmQoIi52YWx1ZU9mIikub3BlblBhcmVu\nKHRydWUpLgogICAgICAgICAgICAgICAgYXBwZW5kKHZhcikuY2xvc2VQYXJl\nbigpOwogICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSBTdHJpbmcuY2xhc3Mp\nCiAgICAgICAgICAgIHBhcnNlLmFwcGVuZCh2YXIpOwogICAgICAgIGVsc2Ug\naWYgKHR5cGUgPT0gQ2hhcmFjdGVyLmNsYXNzKSB7CiAgICAgICAgICAgIHBh\ncnNlLmFwcGVuZCgibmV3IENoYXJhY3RlciIpLm9wZW5QYXJlbih0cnVlKS5h\ncHBlbmQodmFyKS4KICAgICAgICAgICAgICAgIGFwcGVuZCgiLmNoYXJBdCIp\nLm9wZW5QYXJlbih0cnVlKS5hcHBlbmQoMCkuCiAgICAgICAgICAgICAgICBj\nbG9zZVBhcmVuKCkuY2xvc2VQYXJlbigpOwogICAgICAgIH0gZWxzZSBpZiAo\ndHlwZSA9PSBieXRlW10uY2xhc3MpCiAgICAgICAgICAgIHBhcnNlLmFwcGVu\nZCgidG9CeXRlcyIpLm9wZW5QYXJlbih0cnVlKS5hcHBlbmQodmFyKS5jbG9z\nZVBhcmVuKCk7CiAgICAgICAgZWxzZSBpZiAodHlwZSA9PSBjaGFyW10uY2xh\nc3MpCiAgICAgICAgICAgIHBhcnNlLmFwcGVuZCh2YXIpLmFwcGVuZCgiLnRv\nQ2hhckFycmF5IikucGFyZW5zKCk7CiAgICAgICAgZWxzZSBpZiAoIXR5cGUu\naXNQcmltaXRpdmUoKSkgewogICAgICAgICAgICBwYXJzZS5hcHBlbmQoIm5l\ndyAiKS5hcHBlbmQoU3RyaW5ncy5nZXRDbGFzc05hbWUodHlwZSkpLgogICAg\nICAgICAgICAgICAgb3BlblBhcmVuKHRydWUpLmFwcGVuZCh2YXIpLmNsb3Nl\nUGFyZW4oKTsKICAgICAgICB9IGVsc2UgLy8gcHJpbWl0aXZlCiAgICAgICAg\newogICAgICAgICAgICBzd2l0Y2ggKHR5cGUuZ2V0TmFtZSgpLmNoYXJBdCgw\nKSkgewogICAgICAgICAgICAgICAgY2FzZSAnYic6CiAgICAgICAgICAgICAg\nICAgICAgaWYgKHR5cGUgPT0gYm9vbGVhbi5jbGFzcykKICAgICAgICAgICAg\nICAgICAgICAgICAgcGFyc2UuYXBwZW5kKCJcInRydWVcIi5lcXVhbHMiKS5v\ncGVuUGFyZW4odHJ1ZSkuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBh\ncHBlbmQodmFyKS5jbG9zZVBhcmVuKCk7CiAgICAgICAgICAgICAgICAgICAg\nZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZS5hcHBlbmQoIkJ5\ndGUucGFyc2VCeXRlIikub3BlblBhcmVuKHRydWUpLgogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgYXBwZW5kKHZhcikuY2xvc2VQYXJlbigpOwogICAg\nICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAn\nYyc6CiAgICAgICAgICAgICAgICAgICAgcGFyc2UuYXBwZW5kKHZhcikuYXBw\nZW5kKCIuY2hhckF0Iikub3BlblBhcmVuKHRydWUpLgogICAgICAgICAgICAg\nICAgICAgICAgICBhcHBlbmQoMCkuY2xvc2VQYXJlbigpOwogICAgICAgICAg\nICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAnZCc6CiAg\nICAgICAgICAgICAgICAgICAgcGFyc2UuYXBwZW5kKCJEb3VibGUucGFyc2VE\nb3VibGUiKS5vcGVuUGFyZW4odHJ1ZSkuCiAgICAgICAgICAgICAgICAgICAg\nICAgIGFwcGVuZCh2YXIpLmNsb3NlUGFyZW4oKTsKICAgICAgICAgICAgICAg\nICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgJ2YnOgogICAgICAg\nICAgICAgICAgICAgIHBhcnNlLmFwcGVuZCgiRmxvYXQucGFyc2VGbG9hdCIp\nLm9wZW5QYXJlbih0cnVlKS4KICAgICAgICAgICAgICAgICAgICAgICAgYXBw\nZW5kKHZhcikuY2xvc2VQYXJlbigpOwogICAgICAgICAgICAgICAgICAgIGJy\nZWFrOwogICAgICAgICAgICAgICAgY2FzZSAnaSc6CiAgICAgICAgICAgICAg\nICAgICAgcGFyc2UuYXBwZW5kKCJJbnRlZ2VyLnBhcnNlSW50Iikub3BlblBh\ncmVuKHRydWUpLgogICAgICAgICAgICAgICAgICAgICAgICBhcHBlbmQodmFy\nKS5jbG9zZVBhcmVuKCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAg\nICAgICAgICAgICAgICBjYXNlICdsJzoKICAgICAgICAgICAgICAgICAgICBw\nYXJzZS5hcHBlbmQoIkxvbmcucGFyc2VMb25nIikub3BlblBhcmVuKHRydWUp\nLgogICAgICAgICAgICAgICAgICAgICAgICBhcHBlbmQodmFyKS5jbG9zZVBh\ncmVuKCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAg\nICAgICBjYXNlICdzJzoKICAgICAgICAgICAgICAgICAgICBwYXJzZS5hcHBl\nbmQoIlNob3J0LnBhcnNlU2hvcnQiKS5vcGVuUGFyZW4odHJ1ZSkuCiAgICAg\nICAgICAgICAgICAgICAgICAgIGFwcGVuZCh2YXIpLmNsb3NlUGFyZW4oKTsK\nICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAg\nICAgIH0KCiAgICAgICAgaWYgKCF0eXBlLmlzUHJpbWl0aXZlKCkgJiYgdHlw\nZSAhPSBieXRlW10uY2xhc3MpIHsKICAgICAgICAgICAgQ29kZUZvcm1hdCBp\nc051bGwgPSBuZXdDb2RlRm9ybWF0KCk7CiAgICAgICAgICAgIGlzTnVsbC5h\ncHBlbmQoImlmIikub3BlblBhcmVuKHRydWUpLmFwcGVuZCgiXCJudWxsXCIu\nZXF1YWxzIikuCiAgICAgICAgICAgICAgICBvcGVuUGFyZW4odHJ1ZSkuYXBw\nZW5kKHZhcikuY2xvc2VQYXJlbigpLmNsb3NlUGFyZW4oKS4KICAgICAgICAg\nICAgICAgIGVuZGwoKS50YWIoMyk7CiAgICAgICAgICAgIGlmIChmaWVsZC5n\nZXROYW1lKCkuZXF1YWxzKHZhcikpCiAgICAgICAgICAgICAgICBpc051bGwu\nYXBwZW5kKCJ0aGlzLiIpOwogICAgICAgICAgICBpc051bGwuYXBwZW5kKGZp\nZWxkLmdldE5hbWUoKSkuYXBwZW5kKCIgPSBudWxsOyIpLmVuZGwoKTsKICAg\nICAgICAgICAgaXNOdWxsLnRhYigyKS5hcHBlbmQoImVsc2UiKS5lbmRsKCk7\nCiAgICAgICAgICAgIGlzTnVsbC50YWIoMykuYXBwZW5kKHBhcnNlKTsKICAg\nICAgICAgICAgcGFyc2UgPSBpc051bGw7CiAgICAgICAgfQoKICAgICAgICBy\nZXR1cm4gcGFyc2UuYXBwZW5kKCI7IikudG9TdHJpbmcoKTsKICAgIH0KCiAg\nICAvKioKICAgICAqIFJldHVybiBhbiBlcXVhbGl0eSBtZXRob2QgdGhhdCBj\nb21wYXJlcyBhbGwgcGsgdmFyaWFibGVzLgogICAgICogTXVzdCBkZWFsIGNv\ncnJlY3RseSB3aXRoIGJvdGggcHJpbWl0aXZlcyBhbmQgb2JqZWN0cy4KICAg\nICAqLwogICAgcHJpdmF0ZSBTdHJpbmcgZ2V0RXF1YWxzQ29kZShib29sZWFu\nIGhhc1N1cGVyY2xhc3MpIHsKICAgICAgICAvLyBpZiB3ZSBhcmUgYmVsb3cg\nYSBjb25jcmV0ZSBjbGFzcyB0aGVuIHdlIGNhbm5vdCBkZWNsYXJlIGFueQog\nICAgICAgIC8vIG1vcmUgcHJpbWFyeSBrZXkgZmllbGRzOyB0aHVzLCBqdXN0\nIHVzZSB0aGUgcGFyZW50IGludm9jYXRpb24KICAgICAgICBpZiAoaGFzQ29u\nY3JldGVTdXBlcmNsYXNzKCkgfHwgKGhhc1N1cGVyY2xhc3MgJiYgX2ZpZWxk\ncy5sZW5ndGggPT0gMCkpCiAgICAgICAgICAgIHJldHVybiAiIjsKCiAgICAg\nICAgQ29kZUZvcm1hdCBjb2RlID0gbmV3Q29kZUZvcm1hdCgpOwogICAgICAg\nIGNvZGUudGFiKCkuYXBwZW5kKCJwdWJsaWMgYm9vbGVhbiBlcXVhbHMiKS5v\ncGVuUGFyZW4odHJ1ZSkuCiAgICAgICAgICAgIGFwcGVuZCgiT2JqZWN0IG9i\naiIpLmNsb3NlUGFyZW4oKS5vcGVuQnJhY2UoMikuZW5kbCgpOwoKICAgICAg\nICBjb2RlLnRhYigyKS5hcHBlbmQoImlmIikub3BlblBhcmVuKHRydWUpLgog\nICAgICAgICAgICBhcHBlbmQoInRoaXMgPT0gb2JqIikuY2xvc2VQYXJlbigp\nLmVuZGwoKTsKICAgICAgICBjb2RlLnRhYigzKS5hcHBlbmQoInJldHVybiB0\ncnVlOyIpLmVuZGwoKTsKCiAgICAgICAgLy8gY2FsbCBzdXBlci5lcXVhbHMo\nKSBpZiB3ZSBoYXZlIGEgc3VwZXJjbGFzcwogICAgICAgIFN0cmluZyBjbGFz\nc05hbWUgPSBnZXRDbGFzc05hbWUoKTsKICAgICAgICBpZiAoaGFzU3VwZXJj\nbGFzcykgewogICAgICAgICAgICBjb2RlLnRhYigyKS5hcHBlbmQoImlmIiku\nb3BlblBhcmVuKHRydWUpLgogICAgICAgICAgICAgICAgYXBwZW5kKCIhc3Vw\nZXIuZXF1YWxzIikub3BlblBhcmVuKHRydWUpLgogICAgICAgICAgICAgICAg\nYXBwZW5kKCJvYmoiKS5jbG9zZVBhcmVuKCkuY2xvc2VQYXJlbigpLmVuZGwo\nKTsKICAgICAgICAgICAgY29kZS50YWIoMykuYXBwZW5kKCJyZXR1cm4gZmFs\nc2U7IikuZW5kbCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNv\nZGUudGFiKDIpLmFwcGVuZCgiaWYiKS5vcGVuUGFyZW4odHJ1ZSkuCiAgICAg\nICAgICAgICAgICBhcHBlbmQoIm9iaiA9PSBudWxsIHx8IG9iai5nZXRDbGFz\ncyIpLnBhcmVucygpLgogICAgICAgICAgICAgICAgYXBwZW5kKCIgIT0gIiku\nYXBwZW5kKCJnZXRDbGFzcyIpLnBhcmVucygpLgogICAgICAgICAgICAgICAg\nY2xvc2VQYXJlbigpLmVuZGwoKTsKICAgICAgICAgICAgY29kZS50YWIoMyku\nYXBwZW5kKCJyZXR1cm4gZmFsc2U7IikuZW5kbCgpOwogICAgICAgIH0KCiAg\nICAgICAgU3RyaW5nIG5hbWU7CiAgICAgICAgQ2xhc3MgdHlwZTsKICAgICAg\nICBmb3IgKGludCBpID0gMDsgaSA8IF9maWVsZHMubGVuZ3RoOyBpKyspIHsK\nICAgICAgICAgICAgaWYgKGkgPT0gMCkgewogICAgICAgICAgICAgICAgY29k\nZS5lbmRsKCkudGFiKDIpLmFwcGVuZChjbGFzc05hbWUpLmFwcGVuZCgiIG90\naGVyID0gIikuCiAgICAgICAgICAgICAgICAgICAgb3BlblBhcmVuKGZhbHNl\nKS5hcHBlbmQoY2xhc3NOYW1lKS5jbG9zZVBhcmVuKCkuCiAgICAgICAgICAg\nICAgICAgICAgYXBwZW5kKCIgb2JqOyIpLmVuZGwoKTsKICAgICAgICAgICAg\nfQoKICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyBub3QgdGhlIGZpcnN0IGZp\nZWxkLCBhZGQgYW4gJiYKICAgICAgICAgICAgaWYgKGkgPT0gMCkKICAgICAg\nICAgICAgICAgIGNvZGUudGFiKDIpLmFwcGVuZCgicmV0dXJuICIpOwogICAg\nICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBjb2RlLmVuZGwoKS50YWIo\nMykuYXBwZW5kKCImJiAiKTsKCiAgICAgICAgICAgIG5hbWUgPSBfZmllbGRz\nW2ldLmdldE5hbWUoKTsKICAgICAgICAgICAgdHlwZSA9IF9maWVsZHNbaV0u\nZ2V0T2JqZWN0SWRGaWVsZFR5cGUoKTsKICAgICAgICAgICAgaWYgKHR5cGUu\naXNQcmltaXRpdmUoKSkgewogICAgICAgICAgICAgICAgY29kZS5vcGVuUGFy\nZW4oZmFsc2UpLmFwcGVuZChuYW1lKS5hcHBlbmQoIiA9PSAiKS4KICAgICAg\nICAgICAgICAgICAgICBhcHBlbmQoIm90aGVyLiIpLmFwcGVuZChuYW1lKS5j\nbG9zZVBhcmVuKCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSBi\neXRlW10uY2xhc3MpIHsKICAgICAgICAgICAgICAgIGNvZGUub3BlblBhcmVu\nKGZhbHNlKS5hcHBlbmQoImVxdWFscyIpLm9wZW5QYXJlbih0cnVlKS4KICAg\nICAgICAgICAgICAgICAgICBhcHBlbmQobmFtZSkuYXBwZW5kKCIsICIpLmFw\ncGVuZCgib3RoZXIuIikuCiAgICAgICAgICAgICAgICAgICAgYXBwZW5kKG5h\nbWUpLmNsb3NlUGFyZW4oKS5jbG9zZVBhcmVuKCk7CiAgICAgICAgICAgIH0g\nZWxzZSBpZiAodHlwZSA9PSBjaGFyW10uY2xhc3MpIHsKICAgICAgICAgICAg\nICAgIC8vICgobmFtZSA9PSBudWxsICYmIG90aGVyLm5hbWUgPT0gbnVsbCkK\nICAgICAgICAgICAgICAgIC8vCXx8IChuYW1lICE9IG51bGwgJiYgU3RyaW5n\nLnZhbHVlT2YgKG5hbWUpLgogICAgICAgICAgICAgICAgLy8JZXF1YWxzIChT\ndHJpbmcudmFsdWVPZiAob3RoZXIubmFtZSkpKSkKICAgICAgICAgICAgICAg\nIGNvZGUuYXBwZW5kKCIoIikub3BlblBhcmVuKGZhbHNlKS5hcHBlbmQobmFt\nZSkuCiAgICAgICAgICAgICAgICAgICAgYXBwZW5kKCIgPT0gbnVsbCAmJiBv\ndGhlci4iKS5hcHBlbmQobmFtZSkuCiAgICAgICAgICAgICAgICAgICAgYXBw\nZW5kKCIgPT0gbnVsbCIpLmNsb3NlUGFyZW4oKS5lbmRsKCk7CiAgICAgICAg\nICAgICAgICBjb2RlLnRhYigzKS5hcHBlbmQoInx8ICIpOwogICAgICAgICAg\nICAgICAgY29kZS5vcGVuUGFyZW4oZmFsc2UpLmFwcGVuZChuYW1lKS5hcHBl\nbmQoIiAhPSBudWxsICIpLgogICAgICAgICAgICAgICAgICAgIGFwcGVuZCgi\nJiYgU3RyaW5nLnZhbHVlT2YiKS5vcGVuUGFyZW4odHJ1ZSkuYXBwZW5kKG5h\nbWUpLgogICAgICAgICAgICAgICAgICAgIGNsb3NlUGFyZW4oKS5hcHBlbmQo\nIi4iKS5lbmRsKCk7CiAgICAgICAgICAgICAgICBjb2RlLnRhYigzKS5hcHBl\nbmQoImVxdWFscyIpLm9wZW5QYXJlbih0cnVlKS4KICAgICAgICAgICAgICAg\nICAgICBhcHBlbmQoIlN0cmluZy52YWx1ZU9mIikub3BlblBhcmVuKHRydWUp\nLgogICAgICAgICAgICAgICAgICAgIGFwcGVuZCgib3RoZXIuIikuYXBwZW5k\nKG5hbWUpLmNsb3NlUGFyZW4oKS5jbG9zZVBhcmVuKCkuCiAgICAgICAgICAg\nICAgICAgICAgY2xvc2VQYXJlbigpLmFwcGVuZCgiKSIpOwogICAgICAgICAg\nICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gKChuYW1lID09IG51bGwg\nJiYgb3RoZXIubmFtZSA9PSBudWxsKQogICAgICAgICAgICAgICAgLy8JfHwg\nKG5hbWUgIT0gbnVsbCAmJiBuYW1lLmVxdWFscyAob3RoZXIubmFtZSkpKQog\nICAgICAgICAgICAgICAgY29kZS5hcHBlbmQoIigiKS5vcGVuUGFyZW4oZmFs\nc2UpLmFwcGVuZChuYW1lKS4KICAgICAgICAgICAgICAgICAgICBhcHBlbmQo\nIiA9PSBudWxsICYmIG90aGVyLiIpLmFwcGVuZChuYW1lKS4KICAgICAgICAg\nICAgICAgICAgICBhcHBlbmQoIiA9PSBudWxsIikuY2xvc2VQYXJlbigpLmVu\nZGwoKTsKICAgICAgICAgICAgICAgIGNvZGUudGFiKDMpLmFwcGVuZCgifHwg\nIik7CiAgICAgICAgICAgICAgICBjb2RlLm9wZW5QYXJlbihmYWxzZSkuYXBw\nZW5kKG5hbWUpLmFwcGVuZCgiICE9IG51bGwgIikuCiAgICAgICAgICAgICAg\nICAgICAgYXBwZW5kKCImJiAiKS5hcHBlbmQobmFtZSkuYXBwZW5kKCIuZXF1\nYWxzIikuCiAgICAgICAgICAgICAgICAgICAgb3BlblBhcmVuKHRydWUpLmFw\ncGVuZCgib3RoZXIuIikuYXBwZW5kKG5hbWUpLgogICAgICAgICAgICAgICAg\nICAgIGNsb3NlUGFyZW4oKS5jbG9zZVBhcmVuKCkuYXBwZW5kKCIpIik7CiAg\nICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIG5vIF9maWVsZHM6\nIGp1c3QgcmV0dXJuIHRydWUgYWZ0ZXIgY2hlY2tpbmcgaW5zdGFuY2VvZgog\nICAgICAgIGlmIChfZmllbGRzLmxlbmd0aCA9PSAwKQogICAgICAgICAgICBj\nb2RlLnRhYigyKS5hcHBlbmQoInJldHVybiB0cnVlOyIpLmVuZGwoKTsKICAg\nICAgICBlbHNlCiAgICAgICAgICAgIGNvZGUuYXBwZW5kKCI7IikuZW5kbCgp\nOwoKICAgICAgICBjb2RlLmNsb3NlQnJhY2UoMik7CiAgICAgICAgcmV0dXJu\nIGNvZGUudG9TdHJpbmcoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVy\nbiBhIGhhc2hDb2RlIG1ldGhvZCB0aGF0IHRha2VzIGludG8gYWNjb3VudCBh\nbGwKICAgICAqIHByaW1hcnkga2V5IHZhbHVlcy4gTXVzdCBkZWFsIGNvcnJl\nY3RseSB3aXRoIGJvdGggcHJpbWl0aXZlcyBhbmQgb2JqZWN0cy4KICAgICAq\nLwogICAgcHJpdmF0ZSBTdHJpbmcgZ2V0SGFzaENvZGVDb2RlKGJvb2xlYW4g\naGFzU3VwZXJjbGFzcykgewogICAgICAgIC8vIGlmIHdlIGFyZSBiZWxvdyBh\nIGNvbmNyZXRlIGNsYXNzIHRoZW4gd2UgY2Fubm90IGRlY2xhcmUgYW55CiAg\nICAgICAgLy8gbW9yZSBwcmltYXJ5IGtleSBmaWVsZHM7IHRodXMsIGp1c3Qg\ndXNlIHRoZSBwYXJlbnQgaW52b2NhdGlvbgogICAgICAgIGlmIChoYXNDb25j\ncmV0ZVN1cGVyY2xhc3MoKSB8fCAoaGFzU3VwZXJjbGFzcyAmJiBfZmllbGRz\nLmxlbmd0aCA9PSAwKSkKICAgICAgICAgICAgcmV0dXJuICIiOwoKICAgICAg\nICBDb2RlRm9ybWF0IGNvZGUgPSBuZXdDb2RlRm9ybWF0KCk7CiAgICAgICAg\nY29kZS50YWIoKS5hcHBlbmQoInB1YmxpYyBpbnQgaGFzaENvZGUiKS5wYXJl\nbnMoKS4KICAgICAgICAgICAgb3BlbkJyYWNlKDIpLmVuZGwoKTsKCiAgICAg\nICAgaWYgKF9maWVsZHMubGVuZ3RoID09IDApCiAgICAgICAgICAgIGNvZGUu\ndGFiKDIpLmFwcGVuZCgicmV0dXJuIDE3OyIpLmVuZGwoKTsKICAgICAgICBl\nbHNlIGlmIChfZmllbGRzLmxlbmd0aCA9PSAxICYmICFoYXNTdXBlcmNsYXNz\nKSB7CiAgICAgICAgICAgIGNvZGUudGFiKDIpLmFwcGVuZCgicmV0dXJuICIp\nOwogICAgICAgICAgICBhcHBlbmRIYXNoQ29kZUNvZGUoX2ZpZWxkc1swXSwg\nY29kZSk7CiAgICAgICAgICAgIGNvZGUuYXBwZW5kKCI7IikuZW5kbCgpOwog\nICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvZGUudGFiKDIpLmFwcGVu\nZCgiaW50IHJzID0gIik7CiAgICAgICAgICAgIGlmIChoYXNTdXBlcmNsYXNz\nKSB7CiAgICAgICAgICAgICAgICAvLyBjYWxsIHN1cGVyLmhhc2hDb2RlKCkg\naWYgd2UgaGF2ZSBhIHN1cGVyY2xhc3MKICAgICAgICAgICAgICAgIGNvZGUu\nYXBwZW5kKCJzdXBlci5oYXNoQ29kZSIpLm9wZW5QYXJlbih0cnVlKS4KICAg\nICAgICAgICAgICAgICAgICBjbG9zZVBhcmVuKCkuYXBwZW5kKCI7Iik7CiAg\nICAgICAgICAgIH0gZWxzZQogICAgICAgICAgICAgICAgY29kZS5hcHBlbmQo\nIjE3OyIpOwogICAgICAgICAgICBjb2RlLmVuZGwoKTsKCiAgICAgICAgICAg\nIGZvciAoaW50IGkgPSAwOyBpIDwgX2ZpZWxkcy5sZW5ndGg7IGkrKykgewog\nICAgICAgICAgICAgICAgY29kZS50YWIoMikuYXBwZW5kKCJycyA9IHJzICog\nMzcgKyAiKTsKICAgICAgICAgICAgICAgIGFwcGVuZEhhc2hDb2RlQ29kZShf\nZmllbGRzW2ldLCBjb2RlKTsKICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5k\nKCI7IikuZW5kbCgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvZGUu\ndGFiKDIpLmFwcGVuZCgicmV0dXJuIHJzOyIpLmVuZGwoKTsKICAgICAgICB9\nCiAgICAgICAgY29kZS5jbG9zZUJyYWNlKDIpOwogICAgICAgIHJldHVybiBj\nb2RlLnRvU3RyaW5nKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4g\ndHJ1ZSBpZiB0aGlzIGNsYXNzIGhhcyBhIGNvbmNyZXRlIHN1cGVyY2xhc3Mu\nCiAgICAgKi8KICAgIHByaXZhdGUgYm9vbGVhbiBoYXNDb25jcmV0ZVN1cGVy\nY2xhc3MoKSB7CiAgICAgICAgZm9yIChDbGFzc01ldGFEYXRhIHN1cCA9IF9t\nZXRhLmdldFBDU3VwZXJjbGFzc01ldGFEYXRhKCk7CiAgICAgICAgICAgIHN1\ncCAhPSBudWxsOyBzdXAgPSBzdXAuZ2V0UENTdXBlcmNsYXNzTWV0YURhdGEo\nKSkgewogICAgICAgICAgICBpZiAoIU1vZGlmaWVyLmlzQWJzdHJhY3Qoc3Vw\nLmdldERlc2NyaWJlZFR5cGUoKS5nZXRNb2RpZmllcnMoKSkpCiAgICAgICAg\nICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJu\nIGZhbHNlOwogICAgfQoKICAgIC8qKgogICAgICogQXBwZW5kIGNvZGUgY2Fs\nY3VsYXRpbmcgdGhlIGhhc2hjb2RlIGZvciB0aGUgZ2l2ZW4gZmllbGQuCiAg\nICAgKi8KICAgIHByaXZhdGUgdm9pZCBhcHBlbmRIYXNoQ29kZUNvZGUoRmll\nbGRNZXRhRGF0YSBmaWVsZCwgQ29kZUZvcm1hdCBjb2RlKSB7CiAgICAgICAg\nU3RyaW5nIG5hbWUgPSBmaWVsZC5nZXROYW1lKCk7CiAgICAgICAgaWYgKCJy\ncyIuZXF1YWxzKG5hbWUpKQogICAgICAgICAgICBuYW1lID0gInRoaXMuIiAr\nIG5hbWU7CiAgICAgICAgQ2xhc3MgdHlwZSA9IGZpZWxkLmdldE9iamVjdElk\nRmllbGRUeXBlKCk7CiAgICAgICAgaWYgKHR5cGUuaXNQcmltaXRpdmUoKSkg\newogICAgICAgICAgICBpZiAodHlwZSA9PSBib29sZWFuLmNsYXNzKSB7CiAg\nICAgICAgICAgICAgICAvLyAoKG5hbWUpID8gMSA6IDApCiAgICAgICAgICAg\nICAgICBjb2RlLmFwcGVuZCgiKCIpLm9wZW5QYXJlbihmYWxzZSkuYXBwZW5k\nKG5hbWUpLmNsb3NlUGFyZW4oKS4KICAgICAgICAgICAgICAgICAgICBhcHBl\nbmQoIiA/IDEgOiAwIikuYXBwZW5kKCIpIik7CiAgICAgICAgICAgIH0gZWxz\nZSBpZiAodHlwZSA9PSBsb25nLmNsYXNzKSB7CiAgICAgICAgICAgICAgICAv\nLyAoaW50KSAobmFtZSBeIChuYW1lID4+PiAzMikpCiAgICAgICAgICAgICAg\nICBjb2RlLm9wZW5QYXJlbihmYWxzZSkuYXBwZW5kKCJpbnQiKS5jbG9zZVBh\ncmVuKCkuCiAgICAgICAgICAgICAgICAgICAgYXBwZW5kKCIgIikub3BlblBh\ncmVuKGZhbHNlKS5hcHBlbmQobmFtZSkuCiAgICAgICAgICAgICAgICAgICAg\nYXBwZW5kKCIgXiAiKS5vcGVuUGFyZW4oZmFsc2UpLmFwcGVuZChuYW1lKS4K\nICAgICAgICAgICAgICAgICAgICBhcHBlbmQoIiA+Pj4gMzIiKS5jbG9zZVBh\ncmVuKCkuY2xvc2VQYXJlbigpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHR5\ncGUgPT0gZG91YmxlLmNsYXNzKSB7CiAgICAgICAgICAgICAgICAvLyAoaW50\nKSAoRG91YmxlLmRvdWJsZVRvTG9uZ0JpdHMgKG5hbWUpCiAgICAgICAgICAg\nICAgICAvLyAgICAgXiAoRG91YmxlLmRvdWJsZVRvTG9uZ0JpdHMgKG5hbWUp\nID4+PiAzMikpCiAgICAgICAgICAgICAgICBjb2RlLm9wZW5QYXJlbihmYWxz\nZSkuYXBwZW5kKCJpbnQiKS5jbG9zZVBhcmVuKCkuCiAgICAgICAgICAgICAg\nICAgICAgYXBwZW5kKCIgIikub3BlblBhcmVuKGZhbHNlKS4KICAgICAgICAg\nICAgICAgICAgICBhcHBlbmQoIkRvdWJsZS5kb3VibGVUb0xvbmdCaXRzIiku\nb3BlblBhcmVuKHRydWUpLgogICAgICAgICAgICAgICAgICAgIGFwcGVuZChu\nYW1lKS5jbG9zZVBhcmVuKCkuZW5kbCgpOwogICAgICAgICAgICAgICAgY29k\nZS50YWIoMykuYXBwZW5kKCJeICIpLm9wZW5QYXJlbihmYWxzZSkuCiAgICAg\nICAgICAgICAgICAgICAgYXBwZW5kKCJEb3VibGUuZG91YmxlVG9Mb25nQml0\ncyIpLm9wZW5QYXJlbih0cnVlKS4KICAgICAgICAgICAgICAgICAgICBhcHBl\nbmQobmFtZSkuY2xvc2VQYXJlbigpLmFwcGVuZCgiID4+PiAzMiIpLgogICAg\nICAgICAgICAgICAgICAgIGNsb3NlUGFyZW4oKS5jbG9zZVBhcmVuKCk7CiAg\nICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSBmbG9hdC5jbGFzcykgewog\nICAgICAgICAgICAgICAgLy8gRmxvYXQuZmxvYXRUb0ludEJpdHMgKG5hbWUp\nCiAgICAgICAgICAgICAgICBjb2RlLmFwcGVuZCgiRmxvYXQuZmxvYXRUb0lu\ndEJpdHMiKS5vcGVuUGFyZW4odHJ1ZSkuCiAgICAgICAgICAgICAgICAgICAg\nYXBwZW5kKG5hbWUpLmNsb3NlUGFyZW4oKTsKICAgICAgICAgICAgfSBlbHNl\nIGlmICh0eXBlID09IGludC5jbGFzcykKICAgICAgICAgICAgICAgIGNvZGUu\nYXBwZW5kKG5hbWUpOwogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAg\nICAgIC8vIChpbnQpIG5hbWUKICAgICAgICAgICAgICAgIGNvZGUub3BlblBh\ncmVuKGZhbHNlKS5hcHBlbmQoImludCIpLmNsb3NlUGFyZW4oKS4KICAgICAg\nICAgICAgICAgICAgICBhcHBlbmQoIiAiKS5hcHBlbmQobmFtZSk7CiAgICAg\nICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gYnl0ZVtdLmNs\nYXNzKSB7CiAgICAgICAgICAgIC8vIGhhc2hDb2RlIChuYW1lKTsKICAgICAg\nICAgICAgY29kZS5hcHBlbmQoImhhc2hDb2RlIikub3BlblBhcmVuKHRydWUp\nLmFwcGVuZChuYW1lKS4KICAgICAgICAgICAgICAgIGNsb3NlUGFyZW4oKTsK\nICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gY2hhcltdLmNsYXNzKSB7CiAg\nICAgICAgICAgIC8vICgobmFtZSA9PSBudWxsKSA/IDAgOiBTdHJpbmcudmFs\ndWVPZiAobmFtZSkuaGFzaENvZGUgKCkpCiAgICAgICAgICAgIGNvZGUuYXBw\nZW5kKCIoIikub3BlblBhcmVuKGZhbHNlKS5hcHBlbmQobmFtZSkuCiAgICAg\nICAgICAgICAgICBhcHBlbmQoIiA9PSBudWxsIikuY2xvc2VQYXJlbigpLmFw\ncGVuZCgiID8gMCA6ICIpLgogICAgICAgICAgICAgICAgYXBwZW5kKCJTdHJp\nbmcudmFsdWVPZiIpLm9wZW5QYXJlbih0cnVlKS5hcHBlbmQobmFtZSkuCiAg\nICAgICAgICAgICAgICBjbG9zZVBhcmVuKCkuYXBwZW5kKCIuaGFzaENvZGUi\nKS5wYXJlbnMoKS5hcHBlbmQoIikiKTsKICAgICAgICB9IGVsc2UgewogICAg\nICAgICAgICAvLyAoKG5hbWUgPT0gbnVsbCkgPyAwIDogbmFtZS5oYXNoQ29k\nZSAoKSkKICAgICAgICAgICAgY29kZS5hcHBlbmQoIigiKS5vcGVuUGFyZW4o\nZmFsc2UpLmFwcGVuZChuYW1lKS4KICAgICAgICAgICAgICAgIGFwcGVuZCgi\nID09IG51bGwiKS5jbG9zZVBhcmVuKCkuYXBwZW5kKCIgPyAwIDogIikuCiAg\nICAgICAgICAgICAgICBhcHBlbmQobmFtZSkuYXBwZW5kKCIuaGFzaENvZGUi\nKS5wYXJlbnMoKS5hcHBlbmQoIikiKTsKICAgICAgICB9CiAgICB9CgogICAg\nLyoqCiAgICAgKiBSZXR1cm4gYSBtZXRob2QgdG8gY3JlYXRlIGEgc3RyaW5n\nIGNvbnRhaW5pbmcgdGhlIHByaW1hcnkga2V5CiAgICAgKiB2YWx1ZXMgdGhh\ndCBkZWZpbmUgdGhlIGFwcGxpY2F0aW9uIGlkIG9iamVjdC4KICAgICAqLwog\nICAgcHJpdmF0ZSBTdHJpbmcgZ2V0VG9TdHJpbmdDb2RlKGJvb2xlYW4gaGFz\nU3VwZXJjbGFzcykgewogICAgICAgIC8vIGlmIHdlIGFyZSBiZWxvdyBhIGNv\nbmNyZXRlIGNsYXNzIHRoZW4gd2UgY2Fubm90IGRlY2xhcmUgYW55CiAgICAg\nICAgLy8gbW9yZSBwcmltYXJ5IGtleSBmaWVsZHM7IHRodXMsIGp1c3QgdXNl\nIHRoZSBwYXJlbnQgaW52b2NhdGlvbgogICAgICAgIGlmIChoYXNDb25jcmV0\nZVN1cGVyY2xhc3MoKSB8fCAoaGFzU3VwZXJjbGFzcyAmJiBfZmllbGRzLmxl\nbmd0aCA9PSAwKSkKICAgICAgICAgICAgcmV0dXJuICIiOwoKICAgICAgICBD\nb2RlRm9ybWF0IGNvZGUgPSBuZXdDb2RlRm9ybWF0KCk7CiAgICAgICAgY29k\nZS50YWIoKS5hcHBlbmQoInB1YmxpYyBTdHJpbmcgdG9TdHJpbmciKS5wYXJl\nbnMoKS4KICAgICAgICAgICAgb3BlbkJyYWNlKDIpLmVuZGwoKTsKCiAgICAg\nICAgU3RyaW5nIG5hbWU7CiAgICAgICAgQ2xhc3MgdHlwZTsKICAgICAgICBT\ndHJpbmcgYXBwZW5kRGVsaW1pdGVyID0gIisgXCIiICsgX3Rva2VuICsgIlwi\nICsgIjsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9maWVsZHMubGVu\nZ3RoOyBpKyspIHsKICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyBub3QgdGhl\nIGZpcnN0IGZpZWxkLCBhZGQgYSArCiAgICAgICAgICAgIGlmIChpID09IDAp\nIHsKICAgICAgICAgICAgICAgIGNvZGUudGFiKDIpLmFwcGVuZCgicmV0dXJu\nICIpOwoKICAgICAgICAgICAgICAgIC8vIGFkZCBpbiB0aGUgc3VwZXIudG9T\ndHJpbmcoKSBpZiB3ZSBoYXZlIGEgcGFyZW50CiAgICAgICAgICAgICAgICBp\nZiAoaGFzU3VwZXJjbGFzcyAmJiBnZXREZWNsYXJlZFByaW1hcnlLZXlGaWVs\nZHMKICAgICAgICAgICAgICAgICAgICAoX21ldGEuZ2V0UENTdXBlcmNsYXNz\nTWV0YURhdGEoKSkubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAg\nIGNvZGUuYXBwZW5kKCJzdXBlci50b1N0cmluZyIpLnBhcmVucygpOwogICAg\nICAgICAgICAgICAgICAgIGNvZGUuZW5kbCgpLnRhYigzKS5hcHBlbmQoYXBw\nZW5kRGVsaW1pdGVyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAg\nfSBlbHNlCiAgICAgICAgICAgICAgICBjb2RlLmVuZGwoKS50YWIoMykuYXBw\nZW5kKGFwcGVuZERlbGltaXRlcik7CgogICAgICAgICAgICBuYW1lID0gX2Zp\nZWxkc1tpXS5nZXROYW1lKCk7CiAgICAgICAgICAgIHR5cGUgPSBfZmllbGRz\nW2ldLmdldE9iamVjdElkRmllbGRUeXBlKCk7CiAgICAgICAgICAgIGlmICh0\neXBlID09IFN0cmluZy5jbGFzcykKICAgICAgICAgICAgICAgIGNvZGUuYXBw\nZW5kKG5hbWUpOwogICAgICAgICAgICBlbHNlIGlmICh0eXBlID09IGJ5dGVb\nXS5jbGFzcykKICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5kKCJ0b1N0cmlu\nZyIpLm9wZW5QYXJlbih0cnVlKS4KICAgICAgICAgICAgICAgICAgICBhcHBl\nbmQobmFtZSkuY2xvc2VQYXJlbigpOwogICAgICAgICAgICBlbHNlIGlmICh0\neXBlID09IGNoYXJbXS5jbGFzcykKICAgICAgICAgICAgICAgIGNvZGUub3Bl\nblBhcmVuKHRydWUpLm9wZW5QYXJlbih0cnVlKS5hcHBlbmQobmFtZSkuCiAg\nICAgICAgICAgICAgICAgICAgYXBwZW5kKCIgPT0gbnVsbCIpLmNsb3NlUGFy\nZW4oKS5hcHBlbmQoIiA/IFwibnVsbFwiIikuCiAgICAgICAgICAgICAgICAg\nICAgYXBwZW5kKCI6IFN0cmluZy52YWx1ZU9mIikub3BlblBhcmVuKHRydWUp\nLgogICAgICAgICAgICAgICAgICAgIGFwcGVuZChuYW1lKS5jbG9zZVBhcmVu\nKCkuY2xvc2VQYXJlbigpOwogICAgICAgICAgICBlbHNlIGlmICh0eXBlID09\nIERhdGUuY2xhc3MpCiAgICAgICAgICAgICAgICBjb2RlLm9wZW5QYXJlbih0\ncnVlKS5vcGVuUGFyZW4odHJ1ZSkuYXBwZW5kKG5hbWUpLgogICAgICAgICAg\nICAgICAgICAgIGFwcGVuZCgiID09IG51bGwiKS5jbG9zZVBhcmVuKCkuYXBw\nZW5kKCIgPyBcIm51bGxcIiIpLgogICAgICAgICAgICAgICAgICAgIGVuZGwo\nKS50YWIoNCkuYXBwZW5kKCI6IFN0cmluZy52YWx1ZU9mIikuCiAgICAgICAg\nICAgICAgICAgICAgb3BlblBhcmVuKHRydWUpLmFwcGVuZChuYW1lKS5hcHBl\nbmQoIi5nZXRUaW1lIikuCiAgICAgICAgICAgICAgICAgICAgcGFyZW5zKCku\nY2xvc2VQYXJlbigpLmNsb3NlUGFyZW4oKTsKICAgICAgICAgICAgZWxzZQog\nICAgICAgICAgICAgICAgY29kZS5hcHBlbmQoIlN0cmluZy52YWx1ZU9mIiku\nb3BlblBhcmVuKHRydWUpLgogICAgICAgICAgICAgICAgICAgIGFwcGVuZChu\nYW1lKS5jbG9zZVBhcmVuKCk7CiAgICAgICAgfQoKICAgICAgICAvLyBubyBm\naWVsZHM7IGp1c3QgdXNlICIiCiAgICAgICAgaWYgKF9maWVsZHMubGVuZ3Ro\nID09IDApCiAgICAgICAgICAgIGNvZGUudGFiKDIpLmFwcGVuZCgicmV0dXJu\nIFwiXCIiKTsKICAgICAgICBjb2RlLmFwcGVuZCgiOyIpLmVuZGwoKTsKICAg\nICAgICBjb2RlLmNsb3NlQnJhY2UoMik7CiAgICAgICAgcmV0dXJuIGNvZGUu\ndG9TdHJpbmcoKTsKICAgIH0KCiAgICAvKioKICAgICAqIENvZGUgdG8gY29u\ndmVydCBhIHN0cmluZyB0byBhIGJ5dGUgYXJyYXkuCiAgICAgKgogICAgICog\nQHNlZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuQmFzZTE2RW5jb2Rl\nciNkZWNvZGUKICAgICAqLwogICAgcHJpdmF0ZSBTdHJpbmcgZ2V0VG9CeXRl\nc0J5dGVBcnJheUNvZGUoKSB7CiAgICAgICAgQ29kZUZvcm1hdCBjb2RlID0g\nbmV3Q29kZUZvcm1hdCgpOwogICAgICAgIGNvZGUudGFiKCkuYXBwZW5kKCJw\ncml2YXRlIHN0YXRpYyBieXRlW10gdG9CeXRlcyIpLm9wZW5QYXJlbih0cnVl\nKS4KICAgICAgICAgICAgYXBwZW5kKCJTdHJpbmcgcyIpLmNsb3NlUGFyZW4o\nKS5vcGVuQnJhY2UoMikuZW5kbCgpOwoKICAgICAgICBjb2RlLnRhYigyKS5h\ncHBlbmQoImlmIikub3BlblBhcmVuKHRydWUpLmFwcGVuZCgiXCJudWxsXCIu\nZXF1YWxzIikuCiAgICAgICAgICAgIG9wZW5QYXJlbih0cnVlKS5hcHBlbmQo\nInMiKS5jbG9zZVBhcmVuKCkuY2xvc2VQYXJlbigpLmVuZGwoKTsKICAgICAg\nICBjb2RlLnRhYigzKS5hcHBlbmQoInJldHVybiBudWxsOyIpLmVuZGwoMik7\nCgogICAgICAgIGNvZGUudGFiKDIpLmFwcGVuZCgiaW50IGxlbiA9IHMubGVu\nZ3RoIikucGFyZW5zKCkuCiAgICAgICAgICAgIGFwcGVuZCgiOyIpLmVuZGwo\nKTsKICAgICAgICBjb2RlLnRhYigyKS5hcHBlbmQoImJ5dGVbXSByID0gbmV3\nIGJ5dGVbbGVuIC8gMl07IikuZW5kbCgpOwogICAgICAgIGNvZGUudGFiKDIp\nLmFwcGVuZCgiZm9yIikub3BlblBhcmVuKHRydWUpLgogICAgICAgICAgICBh\ncHBlbmQoImludCBpID0gMDsgaSA8IHIubGVuZ3RoOyBpKysiKS5jbG9zZVBh\ncmVuKCkuCiAgICAgICAgICAgIG9wZW5CcmFjZSgzKS5lbmRsKCk7CiAgICAg\nICAgY29kZS50YWIoMykuYXBwZW5kKCJpbnQgZGlnaXQxID0gcy5jaGFyQXQi\nKS5vcGVuUGFyZW4odHJ1ZSkuCiAgICAgICAgICAgIGFwcGVuZCgiaSAqIDIi\nKS5jbG9zZVBhcmVuKCkuYXBwZW5kKCIsICIpLgogICAgICAgICAgICBhcHBl\nbmQoImRpZ2l0MiA9IHMuY2hhckF0Iikub3BlblBhcmVuKHRydWUpLgogICAg\nICAgICAgICBhcHBlbmQoImkgKiAyICsgMSIpLmNsb3NlUGFyZW4oKS5hcHBl\nbmQoIjsiKS5lbmRsKCk7CiAgICAgICAgY29kZS50YWIoMykuYXBwZW5kKCJp\nZiIpLm9wZW5QYXJlbih0cnVlKS4KICAgICAgICAgICAgYXBwZW5kKCJkaWdp\ndDEgPj0gJzAnICYmIGRpZ2l0MSA8PSAnOSciKS5jbG9zZVBhcmVuKCkuZW5k\nbCgpOwogICAgICAgIGNvZGUudGFiKDQpLmFwcGVuZCgiZGlnaXQxIC09ICcw\nJzsiKS5lbmRsKCk7CiAgICAgICAgY29kZS50YWIoMykuYXBwZW5kKCJlbHNl\nIGlmIikub3BlblBhcmVuKHRydWUpLgogICAgICAgICAgICBhcHBlbmQoImRp\nZ2l0MSA+PSAnQScgJiYgZGlnaXQxIDw9ICdGJyIpLmNsb3NlUGFyZW4oKS5l\nbmRsKCk7CiAgICAgICAgY29kZS50YWIoNCkuYXBwZW5kKCJkaWdpdDEgLT0g\nJ0EnIC0gMTA7IikuZW5kbCgpOwogICAgICAgIGNvZGUudGFiKDMpLmFwcGVu\nZCgiaWYiKS5vcGVuUGFyZW4odHJ1ZSkuCiAgICAgICAgICAgIGFwcGVuZCgi\nZGlnaXQyID49ICcwJyAmJiBkaWdpdDIgPD0gJzknIikuY2xvc2VQYXJlbigp\nLmVuZGwoKTsKICAgICAgICBjb2RlLnRhYig0KS5hcHBlbmQoImRpZ2l0MiAt\nPSAnMCc7IikuZW5kbCgpOwogICAgICAgIGNvZGUudGFiKDMpLmFwcGVuZCgi\nZWxzZSBpZiIpLm9wZW5QYXJlbih0cnVlKS4KICAgICAgICAgICAgYXBwZW5k\nKCJkaWdpdDIgPj0gJ0EnICYmIGRpZ2l0MiA8PSAnRiciKS5jbG9zZVBhcmVu\nKCkuZW5kbCgpOwogICAgICAgIGNvZGUudGFiKDQpLmFwcGVuZCgiZGlnaXQy\nIC09ICdBJyAtIDEwOyIpLmVuZGwoMik7CiAgICAgICAgY29kZS50YWIoMyku\nYXBwZW5kKCJyW2ldID0gKGJ5dGUpICIpLm9wZW5QYXJlbihmYWxzZSkuCiAg\nICAgICAgICAgIG9wZW5QYXJlbihmYWxzZSkuYXBwZW5kKCJkaWdpdDEgPDwg\nNCIpLmNsb3NlUGFyZW4oKS4KICAgICAgICAgICAgYXBwZW5kKCIgKyBkaWdp\ndDIiKS5jbG9zZVBhcmVuKCkuYXBwZW5kKCI7IikuZW5kbCgpOwogICAgICAg\nIGNvZGUuY2xvc2VCcmFjZSgzKS5lbmRsKCk7CiAgICAgICAgY29kZS50YWIo\nMikuYXBwZW5kKCJyZXR1cm4gcjsiKS5lbmRsKCk7CgogICAgICAgIGNvZGUu\nY2xvc2VCcmFjZSgyKTsKICAgICAgICByZXR1cm4gY29kZS50b1N0cmluZygp\nOwogICAgfQoKICAgIC8qKgogICAgICogQ29kZSB0byBjb252ZXJ0IGEgYnl0\nZSBhcnJheSB0byBhIHN0cmluZy4KICAgICAqCiAgICAgKiBAc2VlIG9yZy5h\ncGFjaGUub3BlbmpwYS5saWIudXRpbC5CYXNlMTZFbmNvZGVyI2VuY29kZQog\nICAgICovCiAgICBwcml2YXRlIFN0cmluZyBnZXRUb1N0cmluZ0J5dGVBcnJh\neUNvZGUoKSB7CiAgICAgICAgQ29kZUZvcm1hdCBjb2RlID0gbmV3Q29kZUZv\ncm1hdCgpOwogICAgICAgIGNvZGUudGFiKCkuYXBwZW5kKCJwcml2YXRlIHN0\nYXRpYyBTdHJpbmcgdG9TdHJpbmciKS5vcGVuUGFyZW4odHJ1ZSkuCiAgICAg\nICAgICAgIGFwcGVuZCgiYnl0ZVtdIGIiKS5jbG9zZVBhcmVuKCkub3BlbkJy\nYWNlKDIpLmVuZGwoKTsKCiAgICAgICAgY29kZS50YWIoMikuYXBwZW5kKCJp\nZiIpLm9wZW5QYXJlbih0cnVlKS4KICAgICAgICAgICAgYXBwZW5kKCJiID09\nIG51bGwiKS5jbG9zZVBhcmVuKCkuZW5kbCgpOwogICAgICAgIGNvZGUudGFi\nKDMpLmFwcGVuZCgicmV0dXJuIFwibnVsbFwiOyIpLmVuZGwoMik7CgogICAg\nICAgIGNvZGUudGFiKDIpLmFwcGVuZCgiU3RyaW5nQnVmZmVyIHIgPSBuZXcg\nU3RyaW5nQnVmZmVyIikuCiAgICAgICAgICAgIG9wZW5QYXJlbih0cnVlKS5h\ncHBlbmQoImIubGVuZ3RoICogMiIpLmNsb3NlUGFyZW4oKS4KICAgICAgICAg\nICAgYXBwZW5kKCI7IikuZW5kbCgpOwogICAgICAgIGNvZGUudGFiKDIpLmFw\ncGVuZCgiZm9yIikub3BlblBhcmVuKHRydWUpLgogICAgICAgICAgICBhcHBl\nbmQoImludCBpID0gMDsgaSA8IGIubGVuZ3RoOyBpKysiKS5jbG9zZVBhcmVu\nKCkuZW5kbCgpOwogICAgICAgIGNvZGUudGFiKDMpLmFwcGVuZCgiZm9yIiku\nb3BlblBhcmVuKHRydWUpLgogICAgICAgICAgICBhcHBlbmQoImludCBqID0g\nMTsgaiA+PSAwOyBqLS0iKS5jbG9zZVBhcmVuKCkuZW5kbCgpOwogICAgICAg\nIGNvZGUudGFiKDQpLmFwcGVuZCgici5hcHBlbmQiKS5vcGVuUGFyZW4odHJ1\nZSkuCiAgICAgICAgICAgIGFwcGVuZCgiSEVYWyIpLm9wZW5QYXJlbihmYWxz\nZSkuYXBwZW5kKCJiW2ldID4+ICIpLgogICAgICAgICAgICBvcGVuUGFyZW4o\nZmFsc2UpLmFwcGVuZCgiaiAqIDQiKS5jbG9zZVBhcmVuKCkuY2xvc2VQYXJl\nbigpLgogICAgICAgICAgICBhcHBlbmQoIiAmIDB4Rl0iKS5jbG9zZVBhcmVu\nKCkuYXBwZW5kKCI7IikuZW5kbCgpOwogICAgICAgIGNvZGUudGFiKDIpLmFw\ncGVuZCgicmV0dXJuIHIudG9TdHJpbmciKS5wYXJlbnMoKS4KICAgICAgICAg\nICAgYXBwZW5kKCI7IikuZW5kbCgpOwoKICAgICAgICBjb2RlLmNsb3NlQnJh\nY2UoMik7CiAgICAgICAgcmV0dXJuIGNvZGUudG9TdHJpbmcoKTsKICAgIH0K\nCiAgICAvKioKICAgICAqIENvZGUgdG8gdGVzdCBpZiB0d28gYnl0ZSBhcnJh\neXMgYXJlIGVxdWFsLgogICAgICovCiAgICBwcml2YXRlIFN0cmluZyBnZXRF\ncXVhbHNCeXRlQXJyYXlDb2RlKCkgewogICAgICAgIENvZGVGb3JtYXQgY29k\nZSA9IG5ld0NvZGVGb3JtYXQoKTsKICAgICAgICBjb2RlLnRhYigpLmFwcGVu\nZCgicHJpdmF0ZSBzdGF0aWMgYm9vbGVhbiBlcXVhbHMiKS5vcGVuUGFyZW4o\ndHJ1ZSkuCiAgICAgICAgICAgIGFwcGVuZCgiYnl0ZVtdIGIxLCBieXRlW10g\nYjIiKS5jbG9zZVBhcmVuKCkub3BlbkJyYWNlKDIpLmVuZGwoKTsKCiAgICAg\nICAgY29kZS50YWIoMikuYXBwZW5kKCJpZiIpLm9wZW5QYXJlbih0cnVlKS4K\nICAgICAgICAgICAgYXBwZW5kKCJiMSA9PSBudWxsICYmIGIyID09IG51bGwi\nKS5jbG9zZVBhcmVuKCkuZW5kbCgpOwogICAgICAgIGNvZGUudGFiKDMpLmFw\ncGVuZCgicmV0dXJuIHRydWU7IikuZW5kbCgpOwogICAgICAgIGNvZGUudGFi\nKDIpLmFwcGVuZCgiaWYiKS5vcGVuUGFyZW4odHJ1ZSkuCiAgICAgICAgICAg\nIGFwcGVuZCgiYjEgPT0gbnVsbCB8fCBiMiA9PSBudWxsIikuY2xvc2VQYXJl\nbigpLmVuZGwoKTsKICAgICAgICBjb2RlLnRhYigzKS5hcHBlbmQoInJldHVy\nbiBmYWxzZTsiKS5lbmRsKCk7CiAgICAgICAgY29kZS50YWIoMikuYXBwZW5k\nKCJpZiIpLm9wZW5QYXJlbih0cnVlKS4KICAgICAgICAgICAgYXBwZW5kKCJi\nMS5sZW5ndGggIT0gYjIubGVuZ3RoIikuY2xvc2VQYXJlbigpLmVuZGwoKTsK\nICAgICAgICBjb2RlLnRhYigzKS5hcHBlbmQoInJldHVybiBmYWxzZTsiKS5l\nbmRsKCk7CiAgICAgICAgY29kZS50YWIoMikuYXBwZW5kKCJmb3IiKS5vcGVu\nUGFyZW4odHJ1ZSkuCiAgICAgICAgICAgIGFwcGVuZCgiaW50IGkgPSAwOyBp\nIDwgYjEubGVuZ3RoOyBpKysiKS5jbG9zZVBhcmVuKCkuZW5kbCgpOwogICAg\nICAgIGNvZGUudGFiKDMpLmFwcGVuZCgiaWYiKS5vcGVuUGFyZW4odHJ1ZSku\nCiAgICAgICAgICAgIGFwcGVuZCgiYjFbaV0gIT0gYjJbaV0iKS5jbG9zZVBh\ncmVuKCkuZW5kbCgpOwogICAgICAgIGNvZGUudGFiKDQpLmFwcGVuZCgicmV0\ndXJuIGZhbHNlOyIpLmVuZGwoKTsKICAgICAgICBjb2RlLnRhYigyKS5hcHBl\nbmQoInJldHVybiB0cnVlOyIpLmVuZGwoKTsKCiAgICAgICAgY29kZS5jbG9z\nZUJyYWNlKDIpOwogICAgICAgIHJldHVybiBjb2RlLnRvU3RyaW5nKCk7CiAg\nICB9CgogICAgcHJpdmF0ZSBTdHJpbmcgZ2V0SGFzaENvZGVCeXRlQXJyYXlD\nb2RlKCkgewogICAgICAgIENvZGVGb3JtYXQgY29kZSA9IG5ld0NvZGVGb3Jt\nYXQoKTsKICAgICAgICBjb2RlLnRhYigpLmFwcGVuZCgicHJpdmF0ZSBzdGF0\naWMgaW50IGhhc2hDb2RlIikub3BlblBhcmVuKHRydWUpLgogICAgICAgICAg\nICBhcHBlbmQoImJ5dGVbXSBiIikuY2xvc2VQYXJlbigpLm9wZW5CcmFjZSgy\nKS5lbmRsKCk7CgogICAgICAgIGNvZGUudGFiKDIpLmFwcGVuZCgiaWYiKS5v\ncGVuUGFyZW4odHJ1ZSkuYXBwZW5kKCJiID09IG51bGwiKS4KICAgICAgICAg\nICAgY2xvc2VQYXJlbigpLmVuZGwoKTsKICAgICAgICBjb2RlLnRhYigzKS5h\ncHBlbmQoInJldHVybiAwOyIpLmVuZGwoKTsKICAgICAgICBjb2RlLnRhYigy\nKS5hcHBlbmQoImludCBzdW0gPSAwOyIpLmVuZGwoKTsKICAgICAgICBjb2Rl\nLnRhYigyKS5hcHBlbmQoImZvciIpLm9wZW5QYXJlbih0cnVlKS4KICAgICAg\nICAgICAgYXBwZW5kKCJpbnQgaSA9IDA7IGkgPCBiLmxlbmd0aDsgaSsrIiku\nY2xvc2VQYXJlbigpLmVuZGwoKTsKICAgICAgICBjb2RlLnRhYigzKS5hcHBl\nbmQoInN1bSArPSBiW2ldOyIpLmVuZGwoKTsKICAgICAgICBjb2RlLnRhYigy\nKS5hcHBlbmQoInJldHVybiBzdW07IikuZW5kbCgpOwoKICAgICAgICBjb2Rl\nLmNsb3NlQnJhY2UoMik7CiAgICAgICAgcmV0dXJuIGNvZGUudG9TdHJpbmco\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIENvZGUgZGVmaW5pbmcgYSB0b2tl\nbml6ZXIgY2xhc3MuCiAgICAgKi8KICAgIHByaXZhdGUgU3RyaW5nIGdldEN1\nc3RvbVRva2VuaXplckNsYXNzKCkgewogICAgICAgIENvZGVGb3JtYXQgY29k\nZSA9IG5ld0NvZGVGb3JtYXQoKTsKICAgICAgICBjb2RlLnRhYigpLmFwcGVu\nZCgicHJvdGVjdGVkIHN0YXRpYyBjbGFzcyAiKS4KICAgICAgICAgICAgYXBw\nZW5kKFRPS0VOSVpFUl9DVVNUT00pLm9wZW5CcmFjZSgyKS5lbmRsKCk7Cgog\nICAgICAgIGNvZGUudGFiKDIpLmFwcGVuZCgicHJpdmF0ZSBmaW5hbCBTdHJp\nbmcgc3RyOyIpLmVuZGwoKTsKICAgICAgICBjb2RlLnRhYigyKS5hcHBlbmQo\nInByaXZhdGUgaW50IGxhc3Q7IikuYWZ0ZXJTZWN0aW9uKCk7CgogICAgICAg\nIGNvZGUudGFiKDIpLmFwcGVuZCgicHVibGljIFRva2VuaXplciAoU3RyaW5n\nIHN0cikiKS4KICAgICAgICAgICAgb3BlbkJyYWNlKDMpLmVuZGwoKTsKICAg\nICAgICBjb2RlLnRhYigzKS5hcHBlbmQoInRoaXMuc3RyID0gc3RyOyIpLmVu\nZGwoKTsKICAgICAgICBjb2RlLmNsb3NlQnJhY2UoMykuYWZ0ZXJTZWN0aW9u\nKCk7CgogICAgICAgIGNvZGUudGFiKDIpLmFwcGVuZCgicHVibGljIFN0cmlu\nZyBuZXh0VG9rZW4gKCkiKS4KICAgICAgICAgICAgb3BlbkJyYWNlKDMpLmVu\nZGwoKTsKICAgICAgICBjb2RlLnRhYigzKS5hcHBlbmQoImludCBuZXh0ID0g\nc3RyLmluZGV4T2YiKS5vcGVuUGFyZW4odHJ1ZSkuCiAgICAgICAgICAgIGFw\ncGVuZCgiXCIiKS5hcHBlbmQoX3Rva2VuKS5hcHBlbmQoIlwiLCBsYXN0Iiku\nY2xvc2VQYXJlbigpLgogICAgICAgICAgICBhcHBlbmQoIjsiKS5lbmRsKCk7\nCiAgICAgICAgY29kZS50YWIoMykuYXBwZW5kKCJTdHJpbmcgcGFydDsiKS5l\nbmRsKCk7CiAgICAgICAgY29kZS50YWIoMykuYXBwZW5kKCJpZiIpLm9wZW5Q\nYXJlbih0cnVlKS5hcHBlbmQoIm5leHQgPT0gLTEiKS4KICAgICAgICAgICAg\nY2xvc2VQYXJlbigpLm9wZW5CcmFjZSg0KS5lbmRsKCk7CiAgICAgICAgY29k\nZS50YWIoNCkuYXBwZW5kKCJwYXJ0ID0gc3RyLnN1YnN0cmluZyIpLm9wZW5Q\nYXJlbih0cnVlKS4KICAgICAgICAgICAgYXBwZW5kKCJsYXN0IikuY2xvc2VQ\nYXJlbigpLmFwcGVuZCgiOyIpLmVuZGwoKTsKICAgICAgICBjb2RlLnRhYig0\nKS5hcHBlbmQoImxhc3QgPSBzdHIubGVuZ3RoIikucGFyZW5zKCkuYXBwZW5k\nKCI7IikuCiAgICAgICAgICAgIGVuZGwoKS5jbG9zZUJyYWNlKDQpOwogICAg\nICAgIGlmICghY29kZS5nZXRCcmFjZU9uU2FtZUxpbmUoKSkKICAgICAgICAg\nICAgY29kZS5lbmRsKCkudGFiKDMpOwogICAgICAgIGVsc2UKICAgICAgICAg\nICAgY29kZS5hcHBlbmQoIiAiKTsKICAgICAgICBjb2RlLmFwcGVuZCgiZWxz\nZSIpLm9wZW5CcmFjZSg0KS5lbmRsKCk7CiAgICAgICAgY29kZS50YWIoNCku\nYXBwZW5kKCJwYXJ0ID0gc3RyLnN1YnN0cmluZyIpLm9wZW5QYXJlbih0cnVl\nKS4KICAgICAgICAgICAgYXBwZW5kKCJsYXN0LCBuZXh0IikuY2xvc2VQYXJl\nbigpLmFwcGVuZCgiOyIpLmVuZGwoKTsKICAgICAgICBjb2RlLnRhYig0KS5h\ncHBlbmQoImxhc3QgPSBuZXh0ICsgIikuYXBwZW5kKF90b2tlbi5sZW5ndGgo\nKSkuCiAgICAgICAgICAgIGFwcGVuZCgiOyIpLmVuZGwoKS5jbG9zZUJyYWNl\nKDQpLmVuZGwoKTsKCiAgICAgICAgY29kZS50YWIoMykuYXBwZW5kKCJyZXR1\ncm4gcGFydDsiKS5lbmRsKCk7CiAgICAgICAgY29kZS5jbG9zZUJyYWNlKDMp\nOwogICAgICAgIGNvZGUuZW5kbCgpLmNsb3NlQnJhY2UoMik7CiAgICAgICAg\ncmV0dXJuIGNvZGUudG9TdHJpbmcoKTsKICAgIH0KCiAgICAvKioKICAgICAq\nIFJldHVybiB0aGUgZmlsZSB0aGF0IHRoaXMgdG9vbCBzaG91bGQgb3V0cHV0\nIHRvLgogICAgICovCiAgICBwcml2YXRlIEZpbGUgZ2V0RmlsZSgpIHsKICAg\nICAgICBpZiAoX21ldGEgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIG51\nbGw7CgogICAgICAgIFN0cmluZyBwYWNrYWdlTmFtZSA9IFN0cmluZ3MuZ2V0\nUGFja2FnZU5hbWUoX21ldGEuZ2V0T2JqZWN0SWRUeXBlKCkpOwogICAgICAg\nIFN0cmluZyBmaWxlTmFtZSA9IFN0cmluZ3MuZ2V0Q2xhc3NOYW1lKF9tZXRh\nLmdldE9iamVjdElkVHlwZSgpKQogICAgICAgICAgICArICIuamF2YSI7Cgog\nICAgICAgIC8vIGlmIHBjIGNsYXNzIGluIHNhbWUgcGFja2FnZSBhcyBvaWQg\nY2xhc3MsIHRyeSB0byBmaW5kIHBjIC5qYXZhIGZpbGUKICAgICAgICBGaWxl\nIGRpciA9IG51bGw7CiAgICAgICAgaWYgKF9kaXIgPT0gbnVsbCAmJiBTdHJp\nbmdzLmdldFBhY2thZ2VOYW1lKF90eXBlKS5lcXVhbHMocGFja2FnZU5hbWUp\nKSB7CiAgICAgICAgICAgIGRpciA9IEZpbGVzLmdldFNvdXJjZUZpbGUoX3R5\ncGUpOwogICAgICAgICAgICBpZiAoZGlyICE9IG51bGwpCiAgICAgICAgICAg\nICAgICBkaXIgPSBkaXIuZ2V0UGFyZW50RmlsZSgpOwogICAgICAgIH0KICAg\nICAgICBpZiAoZGlyID09IG51bGwpCiAgICAgICAgICAgIGRpciA9IEZpbGVz\nLmdldFBhY2thZ2VGaWxlKF9kaXIsIHBhY2thZ2VOYW1lLCB0cnVlKTsKICAg\nICAgICByZXR1cm4gbmV3IEZpbGUoZGlyLCBmaWxlTmFtZSk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBSZXR1cm4gYSBjb3B5IG9mIHRoZSBjb3JyZWN0IGNv\nZGUgZm9ybWF0LgogICAgICovCiAgICBwcml2YXRlIENvZGVGb3JtYXQgbmV3\nQ29kZUZvcm1hdCgpIHsKICAgICAgICByZXR1cm4gKF9mb3JtYXQgPT0gbnVs\nbCkgPyBuZXcgQ29kZUZvcm1hdCgpCiAgICAgICAgICAgIDogKENvZGVGb3Jt\nYXQpIF9mb3JtYXQuY2xvbmUoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFVz\nYWdlOiBqYXZhIG9yZy5hcGFjaGUub3BlbmpwYS5lbmhhbmNlLkFwcGxpY2F0\naW9uSWRUb29sIFtvcHRpb25dKgogICAgICogJmx0O2NsYXNzIG5hbWUgfCAu\namF2YSBmaWxlIHwgLmNsYXNzIGZpbGUgfCAuamRvIGZpbGUmZ3Q7KwogICAg\nICogIFdoZXJlIHRoZSBmb2xsb3dpbmcgb3B0aW9ucyBhcmUgcmVjb2duaXpl\nZC4KICAgICAqIDx1bD4KICAgICAqIDxsaT48aT4tcHJvcGVydGllcy8tcCAm\nbHQ7cHJvcGVydGllcyBmaWxlJmd0OzwvaT46IFRoZSBwYXRoIHRvIGEgT3Bl\nbkpQQQogICAgICogcHJvcGVydGllcyBmaWxlIGNvbnRhaW5pbmcgaW5mb3Jt\nYXRpb24gYXMgb3V0bGluZWQgaW4KICAgICAqIHtAbGluayBDb25maWd1cmF0\naW9ufTsgb3B0aW9uYWwuPC9saT4KICAgICAqIDxsaT48aT4tJmx0O3Byb3Bl\ncnR5IG5hbWUmZ3Q7ICZsdDtwcm9wZXJ0eSB2YWx1ZSZndDs8L2k+OiBBbGwg\nYmVhbgogICAgICogcHJvcGVydGllcyBvZiB0aGUgc3RhbmRhcmQgT3BlbkpQ\nQSB7QGxpbmsgT3BlbkpQQUNvbmZpZ3VyYXRpb259IGNhbiBiZQogICAgICog\nc2V0IGJ5IHVzaW5nIHRoZWlyIG5hbWVzIGFuZCBzdXBwbHlpbmcgYSB2YWx1\nZS48L2xpPgogICAgICogPGxpPjxpPi1kaXJlY3RvcnkvLWQgJmx0O291dHB1\ndCBkaXJlY3RvcnkmZ3Q7PC9pPjogUGF0aCB0byB0aGUgYmFzZQogICAgICog\nc291cmNlIGRpcmVjdG9yeS4gVGhlIHBhY2thZ2Ugc3RydWN0dXJlIHdpbGwg\nYmUgY3JlYXRlZCBiZW5lYXRoCiAgICAgKiB0aGlzIGRpcmVjdG9yeSBpZiBu\nZWNlc3NhcnkuIElmIG5vdCBzcGVjaWZpZWQsIHRoZSB0b29sIHdpbGwgdHJ5\nCiAgICAgKiB0byBsb2NhdGUgdGhlIC5qYXZhIGZpbGUgaW4gdGhlIENMQVNT\nUEFUSCBhbmQgb3V0cHV0IHRvIHRoZSBzYW1lCiAgICAgKiBkaXJlY3Rvcnk7\nIGZhaWxpbmcgdGhhdCwgaXQgd2lsbCB1c2UgdGhlIGN1cnJlbnQgZGlyZWN0\nb3J5IGFzCiAgICAgKiB0aGUgYmFzZSBkaXJlY3RvcnkuCiAgICAgKiA8bGk+\nPGk+LWlnbm9yZUVycm9ycy8taSAmbHQ7dHJ1ZS90IHwgZmFsc2UvZiZndDs8\nL2k+OiBJZiBmYWxzZSwgYW4KICAgICAqIGV4Y2VwdGlvbiB3aWxsIGJlIHRo\ncm93biBpZiB0aGUgdG9vbCBlbmNvdW50ZXJzIGFueSBjbGFzcyB0aGF0CiAg\nICAgKiBkb2VzIG5vdCB1c2UgYXBwbGljYXRpb24gaWRlbnRpdHkgb3IgdXNl\ncyB0aGUgaWRlbnRpdHkgY2xhc3Mgb2YKICAgICAqIGl0cyBzdXBlcmNsYXNz\nOyBkZWZhdWx0cyB0byB0cnVlLjwvbGk+CiAgICAgKiA8bGk+PGk+LXRva2Vu\nLy10ICZsdDt0b2tlbiZndDs8L2k+OiBUaGUgdG9rZW4gdG8gdXNlIHRvIHNl\ncGFyYXRlCiAgICAgKiBzdGluZ2lmaWVkIHByaW1hcnkga2V5IGZpZWxkIHZh\nbHVlcyBpbiB0aGUgc3RyaW5naWZpZWQgb2lkLjwvbGk+CiAgICAgKiA8bGk+\nPGk+LW5hbWUvLW4gJmx0O2lkIGNsYXNzIG5hbWUmZ3Q7PC9pPjogVGhlIG5h\nbWUgb2YgdGhlIGlkZW50aXR5CiAgICAgKiBjbGFzcyB0byBnZW5lcmF0ZS4g\nSWYgdGhpcyBvcHRpb24gaXMgc3BlY2lmaWVkLCB5b3UgbXVzdCBvbmx5CiAg\nICAgKiBnaXZlIGEgc2luZ2xlIGNsYXNzIGFyZ3VtZW50LiBJZiB0aGUgY2xh\nc3MgbWV0YWRhdGEgbmFtZXMgYW4gb2JqZWN0CiAgICAgKiBpZCBjbGFzcywg\ndGhpcyBhcmd1bWVudCBpcyBpZ25vcmVkLjwvbGk+CiAgICAgKiA8bGk+PGk+\nLXN1ZmZpeC8tcyAmbHQ7aWQgY2xhc3Mgc3VmZml4Jmd0OzwvaT46IEEgc3Ry\naW5nIHRvIHN1ZmZpeCBlYWNoCiAgICAgKiBwZXJzaXN0ZW50IGNsYXNzIHdp\ndGggdG8gY3JlYXRlIHRoZSBpZGVudGl0eSBjbGFzcyBuYW1lLiBUaGlzIGlz\nCiAgICAgKiBvdmVycmlkZGVuIGJ5IDxjb2RlPi1uYW1lPC9jb2RlPiBvciBi\neSBhbnkgaWRlbnRpdHkgY2xhc3MgbmFtZQogICAgICogc3BlY2lmaWVkIGlu\nIG1ldGFkYXRhLjwvbGk+CiAgICAgKiA8bGk+PGk+LWNvZGVGb3JtYXQvLWNm\nLiZsdDtwcm9wZXJ0eSBuYW1lJmd0OyAmbHQ7IHByb3BlcnR5IHZhbHVlJmd0\nOzwvaT4KICAgICAqIDogQXJndW1lbnRzIGxpa2UgdGhpcyB3aWxsIGJlIHVz\nZWQgdG8gY29uZmlndXJlIHRoZSBiZWFuCiAgICAgKiBwcm9wZXJ0aWVzIG9m\nIHRoZSBpbnRlcm5hbCB7QGxpbmsgQ29kZUZvcm1hdH0uPC9saT4KICAgICAq\nIDwvdWw+CiAgICAgKiAgRWFjaCBhZGRpdGlvbmFsIGFyZ3VtZW50IGNhbiBi\nZSBlaXRoZXIgdGhlIGZ1bGwgY2xhc3MgbmFtZSBvZiB0aGUKICAgICAqIHR5\ncGUgdG8gY3JlYXRlIGFuIGlkIGNsYXNzIGZvciwgdGhlIHBhdGggdG8gdGhl\nIC5qYXZhIGZpbGUgZm9yIHRoZSB0eXBlLAogICAgICogdGhlIHBhdGggdG8g\ndGhlIC5jbGFzcyBmaWxlIGZvciB0aGUgdHlwZSwgb3IgdGhlIHBhdGggdG8g\nYSAuamRvIGZpbGUKICAgICAqIGxpc3Rpbmcgb25lIG9yIG1vcmUgdHlwZXMu\nIElmIGEgLmphdmEgZmlsZSBhbHJlYWR5IGV4aXN0cyBmb3IgYW4KICAgICAq\nIGFwcGxpY2F0aW9uIGlkLCBpdCB3aWxsIGJlIGJhY2tlZCB1cCB0byBhIGZp\nbGUgbmFtZWQKICAgICAqICZsdDtvcmlnIGZpbGUgbmFtZSZndDt+LgogICAg\nICovCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdz\nKQogICAgICAgIHRocm93cyBJT0V4Y2VwdGlvbiwgQ2xhc3NOb3RGb3VuZEV4\nY2VwdGlvbiB7CiAgICAgICAgT3B0aW9ucyBvcHRzID0gbmV3IE9wdGlvbnMo\nKTsKICAgICAgICBhcmdzID0gb3B0cy5zZXRGcm9tQ21kTGluZShhcmdzKTsK\nICAgICAgICBPcGVuSlBBQ29uZmlndXJhdGlvbiBjb25mID0gbmV3IE9wZW5K\nUEFDb25maWd1cmF0aW9uSW1wbCgpOwogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIGlmICghcnVuKGNvbmYsIGFyZ3MsIG9wdHMpKQogICAgICAgICAgICAg\nICAgU3lzdGVtLmVyci5wcmludGxuKF9sb2MuZ2V0KCJhcHBpZC11c2FnZSIp\nKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBjb25mLmNsb3Nl\nKCk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogUnVuIHRoZSBh\ncHBsaWNhdGlvbiBpZCB0b29sIHdpdGggdGhlIGdpdmVuIGNvbW1hbmQtbGlu\nZSBhbmQKICAgICAqIGdpdmVuIGNvbmZpZ3VyYXRpb24uIFJldHVybnMgZmFs\nc2UgaWYgaW52YWxpZCBvcHRpb25zIHdlcmUgZ2l2ZW4uCiAgICAgKi8KICAg\nIHB1YmxpYyBzdGF0aWMgYm9vbGVhbiBydW4oT3BlbkpQQUNvbmZpZ3VyYXRp\nb24gY29uZiwgU3RyaW5nW10gYXJncywKICAgICAgICBPcHRpb25zIG9wdHMp\nCiAgICAgICAgdGhyb3dzIElPRXhjZXB0aW9uLCBDbGFzc05vdEZvdW5kRXhj\nZXB0aW9uIHsKICAgICAgICBpZiAob3B0cy5jb250YWluc0tleSgiaGVscCIp\nIHx8IG9wdHMuY29udGFpbnNLZXkoIi1oZWxwIikpCiAgICAgICAgICAgIHJl\ndHVybiBmYWxzZTsKCiAgICAgICAgRmxhZ3MgZmxhZ3MgPSBuZXcgRmxhZ3Mo\nKTsKICAgICAgICBmbGFncy5pZ25vcmVFcnJvcnMgPSBvcHRzLnJlbW92ZUJv\nb2xlYW5Qcm9wZXJ0eQogICAgICAgICAgICAoImlnbm9yZUVycm9ycyIsICJp\nIiwgZmxhZ3MuaWdub3JlRXJyb3JzKTsKICAgICAgICBmbGFncy5kaXJlY3Rv\ncnkgPSBGaWxlcy5nZXRGaWxlKG9wdHMucmVtb3ZlUHJvcGVydHkoImRpcmVj\ndG9yeSIsICJkIiwKICAgICAgICAgICAgbnVsbCksIG51bGwpOwogICAgICAg\nIGZsYWdzLnRva2VuID0gb3B0cy5yZW1vdmVQcm9wZXJ0eSgidG9rZW4iLCAi\ndCIsIGZsYWdzLnRva2VuKTsKICAgICAgICBmbGFncy5uYW1lID0gb3B0cy5y\nZW1vdmVQcm9wZXJ0eSgibmFtZSIsICJuIiwgZmxhZ3MubmFtZSk7CiAgICAg\nICAgZmxhZ3Muc3VmZml4ID0gb3B0cy5yZW1vdmVQcm9wZXJ0eSgic3VmZml4\nIiwgInMiLCBmbGFncy5zdWZmaXgpOwoKICAgICAgICAvLyBzZXBhcmF0ZSB0\naGUgcHJvcGVydGllcyBmb3IgdGhlIGN1c3RvbWl6ZXIgYW5kIGNvZGUgZm9y\nbWF0CiAgICAgICAgT3B0aW9ucyBmb3JtYXRPcHRzID0gbmV3IE9wdGlvbnMo\nKTsKICAgICAgICBNYXAuRW50cnkgZW50cnk7CiAgICAgICAgU3RyaW5nIGtl\neTsKICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9IG9wdHMuZW50cnlTZXQo\nKS5pdGVyYXRvcigpOyBpdHIuaGFzTmV4dCgpOykgewogICAgICAgICAgICBl\nbnRyeSA9IChNYXAuRW50cnkpIGl0ci5uZXh0KCk7CiAgICAgICAgICAgIGtl\neSA9IChTdHJpbmcpIGVudHJ5LmdldEtleSgpOwogICAgICAgICAgICBpZiAo\na2V5LnN0YXJ0c1dpdGgoImNvZGVGb3JtYXQuIikpIHsKICAgICAgICAgICAg\nICAgIGZvcm1hdE9wdHMucHV0KGtleS5zdWJzdHJpbmcoMTEpLCBlbnRyeS5n\nZXRWYWx1ZSgpKTsKICAgICAgICAgICAgICAgIGl0ci5yZW1vdmUoKTsKICAg\nICAgICAgICAgfSBlbHNlIGlmIChrZXkuc3RhcnRzV2l0aCgiY2YuIikpIHsK\nICAgICAgICAgICAgICAgIGZvcm1hdE9wdHMucHV0KGtleS5zdWJzdHJpbmco\nMyksIGVudHJ5LmdldFZhbHVlKCkpOwogICAgICAgICAgICAgICAgaXRyLnJl\nbW92ZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICgh\nZm9ybWF0T3B0cy5pc0VtcHR5KCkpIHsKICAgICAgICAgICAgZmxhZ3MuZm9y\nbWF0ID0gbmV3IENvZGVGb3JtYXQoKTsKICAgICAgICAgICAgZm9ybWF0T3B0\ncy5zZXRJbnRvKGZsYWdzLmZvcm1hdCk7CiAgICAgICAgfQoKICAgICAgICBD\nb25maWd1cmF0aW9ucy5wb3B1bGF0ZUNvbmZpZ3VyYXRpb24oY29uZiwgb3B0\ncyk7CiAgICAgICAgQ2xhc3NMb2FkZXIgbG9hZGVyID0gY29uZi5nZXRDbGFz\nc1Jlc29sdmVySW5zdGFuY2UoKS4KICAgICAgICAgICAgZ2V0Q2xhc3NMb2Fk\nZXIoQXBwbGljYXRpb25JZFRvb2wuY2xhc3MsIG51bGwpOwogICAgICAgIHJl\ndHVybiBydW4oY29uZiwgYXJncywgZmxhZ3MsIGxvYWRlcik7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBSdW4gdGhlIHRvb2wuIFJldHVybnMgZmFsc2UgaWYg\naW52YWxpZCBvcHRpb25zIHdlcmUgZ2l2ZW4uCiAgICAgKi8KICAgIHB1Ymxp\nYyBzdGF0aWMgYm9vbGVhbiBydW4oT3BlbkpQQUNvbmZpZ3VyYXRpb24gY29u\nZiwgU3RyaW5nW10gYXJncywKICAgICAgICBGbGFncyBmbGFncywgQ2xhc3NM\nb2FkZXIgbG9hZGVyKQogICAgICAgIHRocm93cyBJT0V4Y2VwdGlvbiwgQ2xh\nc3NOb3RGb3VuZEV4Y2VwdGlvbiB7CiAgICAgICAgTWV0YURhdGFSZXBvc2l0\nb3J5IHJlcG9zID0gY29uZi5uZXdNZXRhRGF0YVJlcG9zaXRvcnlJbnN0YW5j\nZSgpOwogICAgICAgIHJlcG9zLnNldFZhbGlkYXRlKHJlcG9zLlZBTElEQVRF\nX05PTkUsIHRydWUpOwogICAgICAgIGxvYWRPYmplY3RJZHMocmVwb3MsIGZs\nYWdzLm5hbWUgPT0gbnVsbCAmJiBmbGFncy5zdWZmaXggPT0gbnVsbCk7Cgog\nICAgICAgIExvZyBsb2cgPSBjb25mLmdldExvZyhPcGVuSlBBQ29uZmlndXJh\ndGlvbi5MT0dfVE9PTCk7CiAgICAgICAgQ29sbGVjdGlvbiBjbGFzc2VzOwog\nICAgICAgIGlmIChhcmdzLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgIGxv\nZy5pbmZvKF9sb2MuZ2V0KCJydW5uaW5nLWFsbC1jbGFzc2VzIikpOwogICAg\nICAgICAgICBjbGFzc2VzID0gcmVwb3MubG9hZFBlcnNpc3RlbnRUeXBlcyh0\ncnVlLCBsb2FkZXIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIENs\nYXNzQXJnUGFyc2VyIGNhcCA9IGNvbmYuZ2V0TWV0YURhdGFSZXBvc2l0b3J5\nSW5zdGFuY2UoKS4KICAgICAgICAgICAgICAgIGdldE1ldGFEYXRhRmFjdG9y\neSgpLm5ld0NsYXNzQXJnUGFyc2VyKCk7CiAgICAgICAgICAgIGNhcC5zZXRD\nbGFzc0xvYWRlcihsb2FkZXIpOwogICAgICAgICAgICBjbGFzc2VzID0gbmV3\nIEhhc2hTZXQoKTsKICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBh\ncmdzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICAgICAgY2xhc3Nlcy5hZGRB\nbGwoQXJyYXlzLmFzTGlzdChjYXAucGFyc2VUeXBlcyhhcmdzW2ldKSkpOwog\nICAgICAgIH0KICAgICAgICBpZiAoZmxhZ3MubmFtZSAhPSBudWxsICYmIGNs\nYXNzZXMuc2l6ZSgpID4gMSkKICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJF\neGNlcHRpb24oX2xvYy5nZXQoIm5hbWUtbXVsdC1hcmdzIiwgY2xhc3Nlcykp\nOwoKICAgICAgICBBcHBsaWNhdGlvbklkVG9vbCB0b29sOwogICAgICAgIENs\nYXNzIGNsczsKICAgICAgICBDbGFzc01ldGFEYXRhIG1ldGE7CiAgICAgICAg\nQkNDbGFzc0xvYWRlciBiYyA9IG5ldyBCQ0NsYXNzTG9hZGVyKG5ldyBQcm9q\nZWN0KCkpOwogICAgICAgIGZvciAoSXRlcmF0b3IgaXRyID0gY2xhc3Nlcy5p\ndGVyYXRvcigpOyBpdHIuaGFzTmV4dCgpOykgewogICAgICAgICAgICBjbHMg\nPSAoQ2xhc3MpIGl0ci5uZXh0KCk7CiAgICAgICAgICAgIGxvZy5pbmZvKF9s\nb2MuZ2V0KCJhcHBpZC1ydW5uaW5nIiwgY2xzKSk7CgogICAgICAgICAgICBt\nZXRhID0gcmVwb3MuZ2V0TWV0YURhdGEoY2xzLCBudWxsLCBmYWxzZSk7CiAg\nICAgICAgICAgIHNldE9iamVjdElkVHlwZShtZXRhLCBmbGFncywgYmMpOwoK\nICAgICAgICAgICAgdG9vbCA9IG5ldyBBcHBsaWNhdGlvbklkVG9vbChjb25m\nLCBjbHMsIG1ldGEpOwogICAgICAgICAgICB0b29sLnNldERpcmVjdG9yeShm\nbGFncy5kaXJlY3RvcnkpOwogICAgICAgICAgICB0b29sLnNldElnbm9yZUVy\ncm9ycyhmbGFncy5pZ25vcmVFcnJvcnMpOwogICAgICAgICAgICB0b29sLnNl\ndFRva2VuKGZsYWdzLnRva2VuKTsKICAgICAgICAgICAgdG9vbC5zZXRDb2Rl\nRm9ybWF0KGZsYWdzLmZvcm1hdCk7CiAgICAgICAgICAgIGlmICh0b29sLnJ1\nbigpKSB7CiAgICAgICAgICAgICAgICBsb2cuaW5mbyhfbG9jLmdldCgiYXBw\naWQtb3V0cHV0IiwgdG9vbC5nZXRGaWxlKCkpKTsKICAgICAgICAgICAgICAg\nIHRvb2wucmVjb3JkKCk7CiAgICAgICAgICAgIH0gZWxzZQogICAgICAgICAg\nICAgICAgbG9nLmluZm8oX2xvYy5nZXQoImFwcGlkLW5vcnVuIikpOwogICAg\nICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAg\nICAqIFNldCB0aGUgb2JqZWN0IGlkIHR5cGUgb2YgdGhlIGdpdmVuIG1ldGFk\nYXRhLgogICAgICovCiAgICBwcml2YXRlIHN0YXRpYyB2b2lkIHNldE9iamVj\ndElkVHlwZShDbGFzc01ldGFEYXRhIG1ldGEsIEZsYWdzIGZsYWdzLAogICAg\nICAgIEJDQ2xhc3NMb2FkZXIgYmMpCiAgICAgICAgdGhyb3dzIENsYXNzTm90\nRm91bmRFeGNlcHRpb24gewogICAgICAgIGlmIChtZXRhID09IG51bGwgfHwg\nKG1ldGEuZ2V0T2JqZWN0SWRUeXBlKCkgIT0gbnVsbAogICAgICAgICAgICAm\nJiAoIW1ldGEuaXNPcGVuSlBBSWRlbnRpdHkoKSB8fCBmbGFncy5uYW1lID09\nIG51bGwpKQogICAgICAgICAgICB8fCBnZXREZWNsYXJlZFByaW1hcnlLZXlG\naWVsZHMobWV0YSkubGVuZ3RoID09IDApCiAgICAgICAgICAgIHJldHVybjsK\nCiAgICAgICAgQ2xhc3MgZGVzYyA9IG1ldGEuZ2V0RGVzY3JpYmVkVHlwZSgp\nOwogICAgICAgIENsYXNzIGNscyA9IG51bGw7CiAgICAgICAgaWYgKGZsYWdz\nLm5hbWUgIT0gbnVsbCkKICAgICAgICAgICAgY2xzID0gbG9hZENsYXNzKGRl\nc2MsIGZsYWdzLm5hbWUsIGJjKTsKICAgICAgICBlbHNlIGlmIChmbGFncy5z\ndWZmaXggIT0gbnVsbCkKICAgICAgICAgICAgY2xzID0gbG9hZENsYXNzKGRl\nc2MsIGRlc2MuZ2V0TmFtZSgpICsgZmxhZ3Muc3VmZml4LCBiYyk7CiAgICAg\nICAgbWV0YS5zZXRPYmplY3RJZFR5cGUoY2xzLCBmYWxzZSk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBMb2FkIHRoZSBnaXZlbiBjbGFzcyBuYW1lIGV2ZW4g\naWYgaXQgZG9lcyBub3QgZXhpc3QuCiAgICAgKi8KICAgIHByaXZhdGUgc3Rh\ndGljIENsYXNzIGxvYWRDbGFzcyhDbGFzcyBjb250ZXh0LCBTdHJpbmcgbmFt\nZSwKICAgICAgICBCQ0NsYXNzTG9hZGVyIGJjKQogICAgICAgIHRocm93cyBD\nbGFzc05vdEZvdW5kRXhjZXB0aW9uIHsKICAgICAgICBpZiAobmFtZS5pbmRl\neE9mKCcuJykgPT0gLTEgJiYgY29udGV4dC5nZXROYW1lKCkuaW5kZXhPZign\nLicpICE9IC0xKQogICAgICAgICAgICBuYW1lID0gU3RyaW5ncy5nZXRQYWNr\nYWdlTmFtZShjb250ZXh0KSArICIuIiArIG5hbWU7CgogICAgICAgIC8vIGZp\ncnN0IHRyeSB3aXRoIHJlZ3VsYXIgY2xhc3MgbG9hZGVyCiAgICAgICAgQ2xh\nc3NMb2FkZXIgbG9hZGVyID0gY29udGV4dC5nZXRDbGFzc0xvYWRlcigpOwog\nICAgICAgIGlmIChsb2FkZXIgPT0gbnVsbCkKICAgICAgICAgICAgbG9hZGVy\nID0gVGhyZWFkLmN1cnJlbnRUaHJlYWQoKS5nZXRDb250ZXh0Q2xhc3NMb2Fk\nZXIoKTsKICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4gQ2xhc3Mu\nZm9yTmFtZShuYW1lLCBmYWxzZSwgbG9hZGVyKTsKICAgICAgICB9IGNhdGNo\nIChUaHJvd2FibGUgdCkgewogICAgICAgIH0KCiAgICAgICAgLy8gY3JlYXRl\nIGNsYXNzCiAgICAgICAgQkNDbGFzcyBvaWQgPSBiYy5nZXRQcm9qZWN0KCku\nbG9hZENsYXNzKG5hbWUsIG51bGwpOwogICAgICAgIG9pZC5hZGREZWZhdWx0\nQ29uc3RydWN0b3IoKTsKICAgICAgICByZXR1cm4gQ2xhc3MuZm9yTmFtZShu\nYW1lLCBmYWxzZSwgYmMpOwogICAgfQoKICAgIC8qKgogICAgICogVGVsbCB0\naGUgbWV0YWRhdGEgZmFjdG9yeSB0byBsb2FkIG9iamVjdCBpZCBjbGFzc2Vz\nIGV2ZW4gaWYgdGhleSBkb24ndAogICAgICogZXhpc3QuCiAgICAgKi8KICAg\nIHByaXZhdGUgc3RhdGljIHZvaWQgbG9hZE9iamVjdElkcyhNZXRhRGF0YVJl\ncG9zaXRvcnkgcmVwb3MsIGJvb2xlYW4gZmF0YWwpIHsKICAgICAgICBNZXRh\nRGF0YUZhY3RvcnkgbWRmID0gcmVwb3MuZ2V0TWV0YURhdGFGYWN0b3J5KCk7\nCiAgICAgICAgaWYgKG1kZiBpbnN0YW5jZW9mIERlbGVnYXRpbmdNZXRhRGF0\nYUZhY3RvcnkpCiAgICAgICAgICAgIG1kZiA9ICgoRGVsZWdhdGluZ01ldGFE\nYXRhRmFjdG9yeSkgbWRmKS5nZXRJbm5lcm1vc3REZWxlZ2F0ZSgpOwogICAg\nICAgIGlmIChtZGYgaW5zdGFuY2VvZiBPYmplY3RJZExvYWRlcikKICAgICAg\nICAgICAgKChPYmplY3RJZExvYWRlcikgbWRmKS5zZXRMb2FkT2JqZWN0SWRz\nKCk7CiAgICAgICAgZWxzZSBpZiAoZmF0YWwpCiAgICAgICAgICAgIHRocm93\nIG5ldyBJbnZhbGlkU3RhdGVFeGNlcHRpb24oX2xvYy5nZXQoImZhY3Rvcnkt\nbm90LW9pZGxvYWRlciIpKS4KICAgICAgICAgICAgICAgIHNldEZhdGFsKHRy\ndWUpOwogICAgfQoKICAgIC8qKgogICAgICogUnVuIGZsYWdzLgogICAgICov\nCiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIEZsYWdzIHsKCiAgICAgICAgcHVi\nbGljIEZpbGUgZGlyZWN0b3J5ID0gbnVsbDsKICAgICAgICBwdWJsaWMgYm9v\nbGVhbiBpZ25vcmVFcnJvcnMgPSB0cnVlOwogICAgICAgIHB1YmxpYyBTdHJp\nbmcgdG9rZW4gPSBUT0tFTl9ERUZBVUxUOwogICAgICAgIHB1YmxpYyBDb2Rl\nRm9ybWF0IGZvcm1hdCA9IG51bGw7CiAgICAgICAgcHVibGljIFN0cmluZyBu\nYW1lID0gbnVsbDsKICAgICAgICBwdWJsaWMgU3RyaW5nIHN1ZmZpeCA9IG51\nbGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBJbnRlcmZhY2UgaW1wbGVtZW50\nZWQgYnkgbWV0YWRhdGEgZmFjdG9yaWVzIHRoYXQgY2FuIGxvYWQgbm9uLWV4\naXN0YW50CiAgICAgKiBvYmplY3QgaWQgY2xhc3Nlcy4KICAgICAqLwogICAg\ncHVibGljIHN0YXRpYyBpbnRlcmZhY2UgT2JqZWN0SWRMb2FkZXIKCXsKCQkv\nKioKCQkgKiBUdXJuIG9uIHRoZSBsb2FkaW5nIG9mIGFsbCBpZGVudGl0eSBj\nbGFzc2VzLCBldmVuIGlmIHRoZXkgZG9uJ3QgCiAgICAgICAgICogZXhpc3Qu\nCgkgCSAqLwoJCXB1YmxpYyB2b2lkIHNldExvYWRPYmplY3RJZHMgKCk7Cgl9\nCn0K\n","encoding":"base64"}

