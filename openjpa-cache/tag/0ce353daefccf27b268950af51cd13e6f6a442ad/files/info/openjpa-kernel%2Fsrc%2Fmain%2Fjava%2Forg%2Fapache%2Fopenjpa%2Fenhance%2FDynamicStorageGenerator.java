{"sha":"6754330f3d5b621135de1263190f52546869759d","node_id":"MDQ6QmxvYjIwNjM2NDo2NzU0MzMwZjNkNWI2MjExMzVkZTEyNjMxOTBmNTI1NDY4Njk3NTlk","size":17648,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/6754330f3d5b621135de1263190f52546869759d","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5lbmhhbmNlOwoKaW1wb3J0IGphdmEubGFuZy5yZWZsZWN0LkNv\nbnN0cnVjdG9yOwoKaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5sYW5nLlN0\ncmluZ1V0aWxzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuSmF2\nYVR5cGVzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuSW50ZXJu\nYWxFeGNlcHRpb247CmltcG9ydCBzZXJwLmJ5dGVjb2RlLkJDQ2xhc3M7Cmlt\ncG9ydCBzZXJwLmJ5dGVjb2RlLkJDQ2xhc3NMb2FkZXI7CmltcG9ydCBzZXJw\nLmJ5dGVjb2RlLkJDRmllbGQ7CmltcG9ydCBzZXJwLmJ5dGVjb2RlLkJDTWV0\naG9kOwppbXBvcnQgc2VycC5ieXRlY29kZS5Db2RlOwppbXBvcnQgc2VycC5i\neXRlY29kZS5Db25zdGFudHM7CmltcG9ydCBzZXJwLmJ5dGVjb2RlLkluc3Ry\ndWN0aW9uOwppbXBvcnQgc2VycC5ieXRlY29kZS5KdW1wSW5zdHJ1Y3Rpb247\nCmltcG9ydCBzZXJwLmJ5dGVjb2RlLkxvYWRJbnN0cnVjdGlvbjsKaW1wb3J0\nIHNlcnAuYnl0ZWNvZGUuUHJvamVjdDsKaW1wb3J0IHNlcnAuYnl0ZWNvZGUu\nVGFibGVTd2l0Y2hJbnN0cnVjdGlvbjsKCi8qKgogKiBGYWN0b3J5IGZvciBj\ncmVhdGluZyBuZXcge0BsaW5rIER5bmFtaWNTdG9yYWdlfSBjbGFzc2VzLiBD\nYW4gYmUKICogZXh0ZW5kZWQgdG8gZGVjb3JhdGUvbW9kaWZ5IHRoZSBnZW5l\ncmF0ZWQgaW5zdGFuY2VzIGJlaGF2aW9yLgogKgogKiBAYXV0aG9yIFN0ZXZl\nIEtpbQogKiBAbm9qYXZhZG9jCiAqIEBzaW5jZSAwLjMuMi4wCiAqLwpwdWJs\naWMgY2xhc3MgRHluYW1pY1N0b3JhZ2VHZW5lcmF0b3IgewoKICAgIC8vIHBy\nZWZpeCBmb3IgZ2VuZXJpYyBnZW5lcmF0ZWQgY2xhc3Nlcy4KICAgIHByaXZh\ndGUgc3RhdGljIGZpbmFsIFN0cmluZyBQUkVGSVggPSAib3BlbmpwYXN0b3Jh\nZ2UkIjsKCiAgICAvKioKICAgICAqIENvbnN0YW50IHRvIHRocm93IGFuIGV4\nY2VwdGlvbiBvbiBpbnZhbGlkIGluZGV4IHBhc3NlZCB0byB0eXBlIHNldC9n\nZXQKICAgICAqIG1ldGhvZHMKICAgICAqLwogICAgcHJvdGVjdGVkIHN0YXRp\nYyBmaW5hbCBpbnQgUE9MSUNZX0VYQ0VQVElPTiA9IDA7CgogICAgLyoqCiAg\nICAgKiBDb25zdGFudCB0byBub3QgZ2VuZXJhdGUgdHlwZSBzZXQvZ2V0IG1l\ndGhvZHMuCiAgICAgKi8KICAgIHByb3RlY3RlZCBzdGF0aWMgZmluYWwgaW50\nIFBPTElDWV9FTVBUWSA9IDE7CgogICAgLyoqCiAgICAgKiBDb25zdGFudCB0\nbyBiZSBhcyBzaWxlbnQgYXMgcG9zc2libGUgZHVyaW5nIGludmFsaWQgaW5k\nZXggcGFzc2VkCiAgICAgKiB0byBzZXQvZ2V0IHR5cGUgbWV0aG9kcy4gT24g\nZ2V0dGluZyBhbiBPYmplY3QsIGZvciBleGFtcGxlLAogICAgICogbnVsbCB3\naWxsIGJlIHJldHVybmVkLgogICAgICogSG93ZXZlciwgb24gcHJpbWl0aXZl\nIGdldHMsIGFuIGV4Y2VwdGlvbiB3aWxsIGJlIHRocm93bi4KICAgICAqLwog\nICAgcHJvdGVjdGVkIHN0YXRpYyBmaW5hbCBpbnQgUE9MSUNZX1NJTEVOVCA9\nIDI7CgogICAgLy8gd3JhcHBlcnMgZm9yIHByaW1pdGl2ZSB0eXBlcwogICAg\ncHJpdmF0ZSBzdGF0aWMgZmluYWwgQ2xhc3NbXVtdIFdSQVBQRVJTID0gbmV3\nIENsYXNzW11bXXsKICAgICAgICB7IGJvb2xlYW4uY2xhc3MsIEJvb2xlYW4u\nY2xhc3MgfSwKICAgICAgICB7IGJ5dGUuY2xhc3MsIEJ5dGUuY2xhc3MgfSwK\nICAgICAgICB7IGNoYXIuY2xhc3MsIENoYXJhY3Rlci5jbGFzcyB9LAogICAg\nICAgIHsgaW50LmNsYXNzLCBJbnRlZ2VyLmNsYXNzIH0sCiAgICAgICAgeyBz\naG9ydC5jbGFzcywgU2hvcnQuY2xhc3MgfSwKICAgICAgICB7IGxvbmcuY2xh\nc3MsIExvbmcuY2xhc3MgfSwKICAgICAgICB7IGZsb2F0LmNsYXNzLCBGbG9h\ndC5jbGFzcyB9LAogICAgICAgIHsgZG91YmxlLmNsYXNzLCBEb3VibGUuY2xh\nc3MgfSwKICAgIH07CgogICAgLy8gcHJpbWl0aXZlIHR5cGVzCiAgICBwcml2\nYXRlIHN0YXRpYyBmaW5hbCBpbnRbXSBUWVBFUyA9IG5ldyBpbnRbXXsKICAg\nICAgICBKYXZhVHlwZXMuQk9PTEVBTiwKICAgICAgICBKYXZhVHlwZXMuQllU\nRSwKICAgICAgICBKYXZhVHlwZXMuQ0hBUiwKICAgICAgICBKYXZhVHlwZXMu\nSU5ULAogICAgICAgIEphdmFUeXBlcy5TSE9SVCwKICAgICAgICBKYXZhVHlw\nZXMuTE9ORywKICAgICAgICBKYXZhVHlwZXMuRkxPQVQsCiAgICAgICAgSmF2\nYVR5cGVzLkRPVUJMRSwKICAgICAgICBKYXZhVHlwZXMuT0JKRUNUCiAgICB9\nOwoKICAgIC8vIHRoZSBwcm9qZWN0L2NsYXNzbG9hZGVyIGZvciB0aGUgY2xh\nc3Nlcy4KICAgIHByaXZhdGUgZmluYWwgUHJvamVjdCBfcHJvamVjdCA9IG5l\ndyBQcm9qZWN0KCk7CiAgICBwcml2YXRlIGZpbmFsIEJDQ2xhc3NMb2FkZXIg\nX2xvYWRlciA9IG5ldyBCQ0NsYXNzTG9hZGVyKF9wcm9qZWN0LAogICAgICAg\nIER5bmFtaWNTdG9yYWdlLmNsYXNzLmdldENsYXNzTG9hZGVyKCkpOwoKICAg\nIC8qKgogICAgICogR2VuZXJhdGUgYSBnZW5lcmljIHtAbGluayBEeW5hbWlj\nU3RvcmFnZX0gaW5zdGFuY2Ugd2l0aCB0aGUgZ2l2ZW4KICAgICAqIGFycmF5\nIG9mIHtAbGluayBKYXZhVHlwZXN9IGNvbnN0YW50cyBhbmQgdGhlIGdpdmVu\nIG9iamVjdCBhcwogICAgICogdGhlIHVzZXIga2V5IGZvciBnZW5lcmF0aW9u\nLgogICAgICovCiAgICBwdWJsaWMgRHluYW1pY1N0b3JhZ2UgZ2VuZXJhdGVT\ndG9yYWdlKGludFtdIHR5cGVzLCBPYmplY3Qgb2JqKSB7CiAgICAgICAgaWYg\nKG9iaiA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKCiAgICAg\nICAgU3RyaW5nIG5hbWUgPSBnZXRDbGFzc05hbWUob2JqKTsKICAgICAgICBC\nQ0NsYXNzIGJjID0gX3Byb2plY3QubG9hZENsYXNzKG5hbWUpOwogICAgICAg\nIGRlY2xhcmVDbGFzc2VzKGJjKTsKICAgICAgICBiYy5hZGREZWZhdWx0Q29u\nc3RydWN0b3IoKS5tYWtlUHVibGljKCk7CgogICAgICAgIGludCBvYmplY3RD\nb3VudCA9IGRlY2xhcmVGaWVsZHModHlwZXMsIGJjKTsKICAgICAgICBhZGRG\nYWN0b3J5TWV0aG9kKGJjKTsKICAgICAgICBhZGRGaWVsZENvdW50KGJjLCB0\neXBlcywgb2JqZWN0Q291bnQpOwogICAgICAgIGFkZFNldE1ldGhvZHMoYmMs\nIHR5cGVzLCBvYmplY3RDb3VudCk7CiAgICAgICAgYWRkR2V0TWV0aG9kcyhi\nYywgdHlwZXMpOwogICAgICAgIGFkZEluaXRpYWxpemUoYmMsIG9iamVjdENv\ndW50KTsKICAgICAgICBkZWNvcmF0ZShvYmosIGJjLCB0eXBlcyk7CiAgICAg\nICAgcmV0dXJuIGNyZWF0ZUZhY3RvcnkoYmMpOwogICAgfQoKICAgIC8qKgog\nICAgICogUmV0dXJuIGEgY2xhc3MgbmFtZSB0byB1c2UgZm9yIHRoZSBnaXZl\nbiB1c2VyIGtleS4gQnkgZGVmYXVsdCwKICAgICAqIHJldHVybnMgdGhlIHN0\ncmluZ2lmaWVkIGtleSBwcmVmaXhlZCBieSBQUkVGSVguCiAgICAgKi8KICAg\nIHByb3RlY3RlZCBTdHJpbmcgZ2V0Q2xhc3NOYW1lKE9iamVjdCBvYmopIHsK\nICAgICAgICByZXR1cm4gUFJFRklYICsgb2JqLnRvU3RyaW5nKCk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGRlZmF1bHQgZmllbGQgQUND\nRVNTIGNvbnN0YW50IGZvciBnZW5lcmF0ZWQgZmllbGRzIGZyb20KICAgICAq\nIHtAbGluayBDb25zdGFudHN9LgogICAgICovCiAgICBwcm90ZWN0ZWQgaW50\nIGdldEZpZWxkQWNjZXNzKCkgewogICAgICAgIHJldHVybiBDb25zdGFudHMu\nQUNDRVNTX1BSSVZBVEU7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4g\ndGhlIG5hbWUgZm9yIHRoZSBnZW5lcmF0ZWQgZmllbGQgYXQgdGhlIGdpdmVu\nIGluZGV4LiBSZXR1cm5zCiAgICAgKiA8Y29kZT4iZmllbGQiICsgaTwvY29k\nZT4gYnkgZGVmYXVsdC4KICAgICAqLwogICAgcHJvdGVjdGVkIFN0cmluZyBn\nZXRGaWVsZE5hbWUoaW50IGluZGV4KSB7CiAgICAgICAgcmV0dXJuICJmaWVs\nZCIgKyBpbmRleDsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUg\ncG9saWN5IGNvbnN0YW50IGZvciBob3cgdG8gY3JlYXRlIHR5cGUgbWV0aG9k\ncy4KICAgICAqLwogICAgcHJvdGVjdGVkIGludCBnZXRDcmVhdGVGaWVsZE1l\ndGhvZHMoaW50IHR5cGUpIHsKICAgICAgICByZXR1cm4gUE9MSUNZX0VYQ0VQ\nVElPTjsKICAgIH0KCiAgICAvKioKICAgICAqIERlY29yYXRlIHRoZSBnZW5l\ncmF0ZWQgY2xhc3MuCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIGRlY29y\nYXRlKE9iamVjdCBvYmosIEJDQ2xhc3MgY2xzLCBpbnRbXSB0eXBlcykgewog\nICAgfQoKICAgIC8qKgogICAgICogQ3JlYXRlIGEgc3R1YiBmYWN0b3J5IGlu\nc3RhbmNlIGZvciB0aGUgZ2l2ZW4gY2xhc3MuCiAgICAgKi8KICAgIHByb3Rl\nY3RlZCBEeW5hbWljU3RvcmFnZSBjcmVhdGVGYWN0b3J5KEJDQ2xhc3MgYmMp\nIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBDbGFzcyBjbHMgPSBDbGFz\ncy5mb3JOYW1lKGJjLmdldE5hbWUoKSwgZmFsc2UsIF9sb2FkZXIpOwogICAg\nICAgICAgICBDb25zdHJ1Y3RvciBjb25zID0gY2xzLmdldENvbnN0cnVjdG9y\nKChDbGFzc1tdKSBudWxsKTsKICAgICAgICAgICAgRHluYW1pY1N0b3JhZ2Ug\nZGF0YSA9IChEeW5hbWljU3RvcmFnZSkgY29ucy5uZXdJbnN0YW5jZQogICAg\nICAgICAgICAgICAgKChPYmplY3RbXSkgbnVsbCk7CiAgICAgICAgICAgIF9w\ncm9qZWN0LmNsZWFyKCk7IC8vIHJlbW92ZSBvbGQgcmVmcwogICAgICAgICAg\nICByZXR1cm4gZGF0YTsKICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUgdCkg\newogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oImNv\nbnMtYWNjZXNzIiwgdCkuc2V0RmF0YWwodHJ1ZSk7CiAgICAgICAgfQogICAg\nfQoKICAgIC8qKgogICAgICogQWRkIGludGVyZmFjZSBvciBzdXBlcmNsYXNz\nIGRlY2xhcmF0aW9ucyB0byB0aGUgZ2VuZXJhdGVkIGNsYXNzLgogICAgICov\nCiAgICBwcm90ZWN0ZWQgdm9pZCBkZWNsYXJlQ2xhc3NlcyhCQ0NsYXNzIGJj\nKSB7CiAgICAgICAgYmMuZGVjbGFyZUludGVyZmFjZShEeW5hbWljU3RvcmFn\nZS5jbGFzcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBJbXBsZW1lbnQgdGhl\nIG5ld0luc3RhbmNlIG1ldGhvZC4KICAgICAqLwogICAgcHJpdmF0ZSB2b2lk\nIGFkZEZhY3RvcnlNZXRob2QoQkNDbGFzcyBiYykgewogICAgICAgIEJDTWV0\naG9kIG1ldGhvZCA9IGJjLmRlY2xhcmVNZXRob2QoIm5ld0luc3RhbmNlIiwK\nICAgICAgICAgICAgRHluYW1pY1N0b3JhZ2UuY2xhc3MsIG51bGwpOwogICAg\nICAgIENvZGUgY29kZSA9IG1ldGhvZC5nZXRDb2RlKHRydWUpOwogICAgICAg\nIGNvZGUuYW5ldygpLnNldFR5cGUoYmMpOwogICAgICAgIGNvZGUuZHVwKCk7\nCiAgICAgICAgY29kZS5pbnZva2VzcGVjaWFsKCkuc2V0TWV0aG9kKGJjLmdl\ndE5hbWUoKSwgIjxpbml0PiIsICJ2b2lkIiwgbnVsbCk7CiAgICAgICAgY29k\nZS5hcmV0dXJuKCk7CiAgICAgICAgY29kZS5jYWxjdWxhdGVNYXhMb2NhbHMo\nKTsKICAgICAgICBjb2RlLmNhbGN1bGF0ZU1heFN0YWNrKCk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBJbXBsZW1lbnQgZ2V0RmllbGRDb3VudC9nZXRPYmpl\nY3RDb3VudC4KICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIGFkZEZpZWxkQ291\nbnQoQkNDbGFzcyBiYywgaW50W10gdHlwZXMsIGludCBvYmplY3RDb3VudCkg\newogICAgICAgIEJDTWV0aG9kIG1ldGhvZCA9IGJjLmRlY2xhcmVNZXRob2Qo\nImdldEZpZWxkQ291bnQiLCBpbnQuY2xhc3MsIG51bGwpOwogICAgICAgIENv\nZGUgY29kZSA9IG1ldGhvZC5nZXRDb2RlKHRydWUpOwogICAgICAgIGNvZGUu\nY29uc3RhbnQoKS5zZXRWYWx1ZSh0eXBlcy5sZW5ndGgpOwogICAgICAgIGNv\nZGUuaXJldHVybigpOwogICAgICAgIGNvZGUuY2FsY3VsYXRlTWF4TG9jYWxz\nKCk7CiAgICAgICAgY29kZS5jYWxjdWxhdGVNYXhTdGFjaygpOwoKICAgICAg\nICBtZXRob2QgPSBiYy5kZWNsYXJlTWV0aG9kKCJnZXRPYmplY3RDb3VudCIs\nIGludC5jbGFzcywgbnVsbCk7CiAgICAgICAgY29kZSA9IG1ldGhvZC5nZXRD\nb2RlKHRydWUpOwogICAgICAgIGNvZGUuY29uc3RhbnQoKS5zZXRWYWx1ZShv\nYmplY3RDb3VudCk7CiAgICAgICAgY29kZS5pcmV0dXJuKCk7CiAgICAgICAg\nY29kZS5jYWxjdWxhdGVNYXhMb2NhbHMoKTsKICAgICAgICBjb2RlLmNhbGN1\nbGF0ZU1heFN0YWNrKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBJbXBsZW1l\nbnQgaW5pdGlhbGl6ZS4KICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIGFkZElu\naXRpYWxpemUoQkNDbGFzcyBiYywgaW50IG9iamVjdENvdW50KSB7CiAgICAg\nICAgQkNNZXRob2QgbWV0aCA9IGJjLmRlY2xhcmVNZXRob2QoImluaXRpYWxp\nemUiLCB2b2lkLmNsYXNzLCBudWxsKTsKICAgICAgICBDb2RlIGNvZGUgPSBt\nZXRoLmdldENvZGUodHJ1ZSk7CiAgICAgICAgSnVtcEluc3RydWN0aW9uIGlm\naW5zID0gbnVsbDsKICAgICAgICBpZiAob2JqZWN0Q291bnQgPiAwKSB7CiAg\nICAgICAgICAgIC8vIGlmIChvYmplY3RzID09IG51bGwpCiAgICAgICAgICAg\nIC8vIAkJb2JqZWN0cyA9IG5ldyBPYmplY3Rbb2JqZWN0Q291bnRdOwogICAg\nICAgICAgICBjb2RlLmFsb2FkKCkuc2V0VGhpcygpOwogICAgICAgICAgICBj\nb2RlLmdldGZpZWxkKCkuc2V0RmllbGQoIm9iamVjdHMiLCBPYmplY3RbXS5j\nbGFzcyk7CiAgICAgICAgICAgIGlmaW5zID0gY29kZS5pZm5vbm51bGwoKTsK\nICAgICAgICAgICAgY29kZS5hbG9hZCgpLnNldFRoaXMoKTsKICAgICAgICAg\nICAgY29kZS5jb25zdGFudCgpLnNldFZhbHVlKG9iamVjdENvdW50KTsKICAg\nICAgICAgICAgY29kZS5hbmV3YXJyYXkoKS5zZXRUeXBlKE9iamVjdC5jbGFz\ncyk7CiAgICAgICAgICAgIGNvZGUucHV0ZmllbGQoKS5zZXRGaWVsZCgib2Jq\nZWN0cyIsIE9iamVjdFtdLmNsYXNzKTsKICAgICAgICB9CiAgICAgICAgSW5z\ndHJ1Y3Rpb24gaW5zID0gY29kZS52cmV0dXJuKCk7CiAgICAgICAgaWYgKGlm\naW5zICE9IG51bGwpCiAgICAgICAgICAgIGlmaW5zLnNldFRhcmdldChpbnMp\nOwogICAgICAgIGNvZGUuY2FsY3VsYXRlTWF4TG9jYWxzKCk7CiAgICAgICAg\nY29kZS5jYWxjdWxhdGVNYXhTdGFjaygpOwogICAgfQoKICAgIC8qKgogICAg\nICogRGVjbGFyZSB0aGUgcHJpbWl0aXZlIGZpZWxkcyBhbmQgdGhlIG9iamVj\ndCBmaWVsZC4KICAgICAqLwogICAgcHJpdmF0ZSBpbnQgZGVjbGFyZUZpZWxk\ncyhpbnRbXSB0eXBlcywgQkNDbGFzcyBiYykgewogICAgICAgIGJjLmRlY2xh\ncmVGaWVsZCgib2JqZWN0cyIsIE9iamVjdFtdLmNsYXNzKS5tYWtlUHJpdmF0\nZSgpOwoKICAgICAgICBpbnQgb2JqZWN0Q291bnQgPSAwOwogICAgICAgIENs\nYXNzIHR5cGU7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCB0eXBlcy5s\nZW5ndGg7IGkrKykgewogICAgICAgICAgICB0eXBlID0gZm9yVHlwZSh0eXBl\nc1tpXSk7CiAgICAgICAgICAgIGlmICh0eXBlID09IE9iamVjdC5jbGFzcykK\nICAgICAgICAgICAgICAgIG9iamVjdENvdW50Kys7CiAgICAgICAgICAgIGVs\nc2UgewogICAgICAgICAgICAgICAgQkNGaWVsZCBmaWVsZCA9IGJjLmRlY2xh\ncmVGaWVsZChnZXRGaWVsZE5hbWUoaSksIHR5cGUpOwogICAgICAgICAgICAg\nICAgZmllbGQuc2V0QWNjZXNzRmxhZ3MoZ2V0RmllbGRBY2Nlc3MoKSk7CiAg\nICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIG9iamVjdENv\ndW50OwogICAgfQoKICAgIC8qKgogICAgICogQWRkIGFsbCB0aGUgdHlwZWQg\nc2V0IGJ5IGluZGV4IG1ldGhvZC4KICAgICAqLwogICAgcHJpdmF0ZSB2b2lk\nIGFkZFNldE1ldGhvZHMoQkNDbGFzcyBiYywgaW50W10gdHlwZXMsIGludCB0\nb3RhbE9iamVjdHMpIHsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IFRZ\nUEVTLmxlbmd0aDsgaSsrKQogICAgICAgICAgICBhZGRTZXRNZXRob2QoVFlQ\nRVNbaV0sIGJjLCB0eXBlcywgdG90YWxPYmplY3RzKTsKICAgIH0KCiAgICAv\nKioKICAgICAqIEFkZCB0aGUgdHlwZWQgc2V0IGJ5IGluZGV4IG1ldGhvZC4K\nICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIGFkZFNldE1ldGhvZChpbnQgdHlw\nZUNvZGUsIEJDQ2xhc3MgYmMsIGludFtdIHR5cGVzLAogICAgICAgIGludCB0\nb3RhbE9iamVjdHMpIHsKICAgICAgICBpbnQgaGFuZGxlID0gZ2V0Q3JlYXRl\nRmllbGRNZXRob2RzKHR5cGVDb2RlKTsKICAgICAgICBpZiAoaGFuZGxlID09\nIFBPTElDWV9FTVBUWSkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIENs\nYXNzIHR5cGUgPSBmb3JUeXBlKHR5cGVDb2RlKTsKICAgICAgICAvLyBwdWJs\naWMgdm9pZCBzZXQ8VHlwZT4gKGludCBmaWVsZCwgPHR5cGU+IHZhbCkKICAg\nICAgICBTdHJpbmcgbmFtZSA9IE9iamVjdC5jbGFzcy5lcXVhbHModHlwZSkg\nPyAiT2JqZWN0IiA6CiAgICAgICAgICAgIFN0cmluZ1V0aWxzLmNhcGl0YWxp\nemUodHlwZS5nZXROYW1lKCkpOwogICAgICAgIG5hbWUgPSAic2V0IiArIG5h\nbWU7CiAgICAgICAgQkNNZXRob2QgbWV0aG9kID0gYmMuZGVjbGFyZU1ldGhv\nZChuYW1lLCB2b2lkLmNsYXNzLAogICAgICAgICAgICBuZXcgQ2xhc3NbXXsg\naW50LmNsYXNzLCB0eXBlIH0pOwogICAgICAgIG1ldGhvZC5tYWtlUHVibGlj\nKCk7CiAgICAgICAgQ29kZSBjb2RlID0gbWV0aG9kLmdldENvZGUodHJ1ZSk7\nCiAgICAgICAgLy8gc3dpdGNoIChmaWVsZCkKICAgICAgICBjb2RlLmFsb2Fk\nKCkuc2V0UGFyYW0oMCk7CiAgICAgICAgVGFibGVTd2l0Y2hJbnN0cnVjdGlv\nbiB0YWJpbnMgPSBjb2RlLnRhYmxlc3dpdGNoKCk7CiAgICAgICAgdGFiaW5z\nLnNldExvdygwKTsKICAgICAgICB0YWJpbnMuc2V0SGlnaCh0eXBlcy5sZW5n\ndGggLSAxKTsKICAgICAgICBJbnN0cnVjdGlvbiBkZWZhdWx0SW5zOwogICAg\nICAgIGlmIChoYW5kbGUgPT0gUE9MSUNZX1NJTEVOVCkKICAgICAgICAgICAg\nZGVmYXVsdElucyA9IGNvZGUudnJldHVybigpOwogICAgICAgIGVsc2UKICAg\nICAgICAgICAgZGVmYXVsdElucyA9IHRocm93RXhjZXB0aW9uCiAgICAgICAg\nICAgICAgICAoY29kZSwgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNz\nKTsKICAgICAgICB0YWJpbnMuc2V0RGVmYXVsdFRhcmdldChkZWZhdWx0SW5z\nKTsKICAgICAgICBpbnQgb2JqZWN0Q291bnQgPSAwOwogICAgICAgIGZvciAo\naW50IGkgPSAwOyBpIDwgdHlwZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAg\nICAgLy8gZGVmYXVsdDogdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2Vw\ndGlvbgogICAgICAgICAgICBpZiAoIWlzQ29tcGF0aWJsZSh0eXBlc1tpXSwg\ndHlwZUNvZGUpKSB7CiAgICAgICAgICAgICAgICB0YWJpbnMuYWRkVGFyZ2V0\nKHRhYmlucy5nZXREZWZhdWx0VGFyZ2V0KCkpOwogICAgICAgICAgICAgICAg\nY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRhYmlucy5h\nZGRUYXJnZXQoY29kZS5hbG9hZCgpLnNldFRoaXMoKSk7CiAgICAgICAgICAg\nIGlmICh0eXBlQ29kZSA+PSBKYXZhVHlwZXMuT0JKRUNUKSB7CiAgICAgICAg\nICAgICAgICAvLyBpZiAob2JqZWN0cyA9PSBudWxsKQogICAgICAgICAgICAg\nICAgLy8gCQlvYmplY3RzID0gbmV3IE9iamVjdFt0b3RhbE9iamVjdHNdOwog\nICAgICAgICAgICAgICAgY29kZS5hbG9hZCgpLnNldFRoaXMoKTsKICAgICAg\nICAgICAgICAgIGNvZGUuZ2V0ZmllbGQoKS5zZXRGaWVsZCgib2JqZWN0cyIs\nIE9iamVjdFtdLmNsYXNzKTsKICAgICAgICAgICAgICAgIEp1bXBJbnN0cnVj\ndGlvbiBpZmlucyA9IGNvZGUuaWZub25udWxsKCk7CiAgICAgICAgICAgICAg\nICBjb2RlLmFsb2FkKCkuc2V0VGhpcygpOwogICAgICAgICAgICAgICAgY29k\nZS5jb25zdGFudCgpLnNldFZhbHVlKHRvdGFsT2JqZWN0cyk7CiAgICAgICAg\nICAgICAgICBjb2RlLmFuZXdhcnJheSgpLnNldFR5cGUoT2JqZWN0LmNsYXNz\nKTsKICAgICAgICAgICAgICAgIGNvZGUucHV0ZmllbGQoKS5zZXRGaWVsZCgi\nb2JqZWN0cyIsIE9iamVjdFtdLmNsYXNzKTsKCiAgICAgICAgICAgICAgICAv\nLyBvYmplY3RzW29iamVjdENvdW50XSA9IHZhbDsKICAgICAgICAgICAgICAg\nIGlmaW5zLnNldFRhcmdldChjb2RlLmFsb2FkKCkuc2V0VGhpcygpKTsKICAg\nICAgICAgICAgICAgIGNvZGUuZ2V0ZmllbGQoKS5zZXRGaWVsZCgib2JqZWN0\ncyIsIE9iamVjdFtdLmNsYXNzKTsKICAgICAgICAgICAgICAgIGNvZGUuY29u\nc3RhbnQoKS5zZXRWYWx1ZShvYmplY3RDb3VudCk7CiAgICAgICAgICAgICAg\nICBjb2RlLmFsb2FkKCkuc2V0UGFyYW0oMSk7CiAgICAgICAgICAgICAgICBj\nb2RlLmFhc3RvcmUoKTsKICAgICAgICAgICAgICAgIG9iamVjdENvdW50Kys7\nCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBjYXNl\nIGk6IGZpZWxkaSA9IHZhbDsKICAgICAgICAgICAgICAgIExvYWRJbnN0cnVj\ndGlvbiBsb2FkID0gY29kZS54bG9hZCgpOwogICAgICAgICAgICAgICAgbG9h\nZC5zZXRUeXBlKHR5cGUpOwogICAgICAgICAgICAgICAgbG9hZC5zZXRQYXJh\nbSgxKTsKICAgICAgICAgICAgICAgIGNvZGUucHV0ZmllbGQoKS5zZXRGaWVs\nZCgiZmllbGQiICsgaSwgdHlwZSk7CiAgICAgICAgICAgIH0KICAgICAgICAg\nICAgLy8gcmV0dXJuCiAgICAgICAgICAgIGNvZGUudnJldHVybigpOwogICAg\nICAgIH0KICAgICAgICBjb2RlLmNhbGN1bGF0ZU1heExvY2FscygpOwogICAg\nICAgIGNvZGUuY2FsY3VsYXRlTWF4U3RhY2soKTsKICAgIH0KCiAgICAvKioK\nICAgICAqIEFkZCBhbGwgdHlwZWQgZ2V0IGJ5IGluZGV4IG1ldGhvZCBmb3Ig\ndGhlIGdpdmVuIGZpZWxkcy4KICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIGFk\nZEdldE1ldGhvZHMoQkNDbGFzcyBiYywgaW50W10gdHlwZXMpIHsKICAgICAg\nICBmb3IgKGludCBpID0gMDsgaSA8IFRZUEVTLmxlbmd0aDsgaSsrKQogICAg\nICAgICAgICBhZGRHZXRNZXRob2QoVFlQRVNbaV0sIGJjLCB0eXBlcyk7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBBZGQgdHlwZWQgZ2V0IGJ5IGluZGV4IG1l\ndGhvZC4KICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIGFkZEdldE1ldGhvZChp\nbnQgdHlwZUNvZGUsIEJDQ2xhc3MgYmMsIGludFtdIHR5cGVzKSB7CiAgICAg\nICAgaW50IGhhbmRsZSA9IGdldENyZWF0ZUZpZWxkTWV0aG9kcyh0eXBlQ29k\nZSk7CiAgICAgICAgaWYgKGhhbmRsZSA9PSBQT0xJQ1lfRU1QVFkpCiAgICAg\nICAgICAgIHJldHVybjsKICAgICAgICBDbGFzcyB0eXBlID0gZm9yVHlwZSh0\neXBlQ29kZSk7CiAgICAgICAgLy8gcHVibGljIDx0eXBlPiBnZXQ8VHlwZT5G\naWVsZCAoaW50IGZpZWxkKQogICAgICAgIFN0cmluZyBuYW1lID0gT2JqZWN0\nLmNsYXNzLmVxdWFscyh0eXBlKSA/ICJPYmplY3QiIDoKICAgICAgICAgICAg\nU3RyaW5nVXRpbHMuY2FwaXRhbGl6ZSh0eXBlLmdldE5hbWUoKSk7CiAgICAg\nICAgbmFtZSA9ICJnZXQiICsgbmFtZTsKICAgICAgICBCQ01ldGhvZCBtZXRo\nb2QgPSBiYy5kZWNsYXJlTWV0aG9kKG5hbWUsIHR5cGUsCiAgICAgICAgICAg\nIG5ldyBDbGFzc1tdeyBpbnQuY2xhc3MgfSk7CiAgICAgICAgbWV0aG9kLm1h\na2VQdWJsaWMoKTsKICAgICAgICBDb2RlIGNvZGUgPSBtZXRob2QuZ2V0Q29k\nZSh0cnVlKTsKICAgICAgICAvLyBzd2l0Y2ggKGZpZWxkKQogICAgICAgIGNv\nZGUuYWxvYWQoKS5zZXRQYXJhbSgwKTsKICAgICAgICBUYWJsZVN3aXRjaElu\nc3RydWN0aW9uIHRhYmlucyA9IGNvZGUudGFibGVzd2l0Y2goKTsKICAgICAg\nICB0YWJpbnMuc2V0TG93KDApOwogICAgICAgIHRhYmlucy5zZXRIaWdoKHR5\ncGVzLmxlbmd0aCAtIDEpOwogICAgICAgIEluc3RydWN0aW9uIGRlZmF1bHRJ\nbnMgPSBudWxsOwogICAgICAgIGlmICh0eXBlQ29kZSA9PSBKYXZhVHlwZXMu\nT0JKRUNUICYmIGhhbmRsZSA9PSBQT0xJQ1lfU0lMRU5UKSB7CiAgICAgICAg\nICAgIGRlZmF1bHRJbnMgPSBjb2RlLmNvbnN0YW50KCkuc2V0TnVsbCgpOwog\nICAgICAgICAgICBjb2RlLmFyZXR1cm4oKTsKICAgICAgICB9IGVsc2UKICAg\nICAgICAgICAgZGVmYXVsdElucyA9IHRocm93RXhjZXB0aW9uCiAgICAgICAg\nICAgICAgICAoY29kZSwgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNz\nKTsKICAgICAgICB0YWJpbnMuc2V0RGVmYXVsdFRhcmdldChkZWZhdWx0SW5z\nKTsKICAgICAgICBpbnQgb2JqZWN0Q291bnQgPSAwOwogICAgICAgIGZvciAo\naW50IGkgPSAwOyBpIDwgdHlwZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAg\nICAgLy8gZGVmYXVsdDogdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2Vw\ndGlvbgogICAgICAgICAgICBpZiAoIWlzQ29tcGF0aWJsZSh0eXBlc1tpXSwg\ndHlwZUNvZGUpKSB7CiAgICAgICAgICAgICAgICB0YWJpbnMuYWRkVGFyZ2V0\nKHRhYmlucy5nZXREZWZhdWx0VGFyZ2V0KCkpOwogICAgICAgICAgICAgICAg\nY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRhYmlucy5h\nZGRUYXJnZXQoY29kZS5hbG9hZCgpLnNldFRoaXMoKSk7CiAgICAgICAgICAg\nIGlmICh0eXBlQ29kZSA+PSBKYXZhVHlwZXMuT0JKRUNUKSB7CiAgICAgICAg\nICAgICAgICAvLyBpZiAob2JqZWN0cyA9PSBudWxsKQogICAgICAgICAgICAg\nICAgLy8gCQlyZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgIC8vIHJldHVy\nbiBvYmplY3RzW29iamVjdENvdW50XTsKICAgICAgICAgICAgICAgIGNvZGUu\nYWxvYWQoKS5zZXRUaGlzKCk7CiAgICAgICAgICAgICAgICBjb2RlLmdldGZp\nZWxkKCkuc2V0RmllbGQoIm9iamVjdHMiLCBPYmplY3RbXS5jbGFzcyk7CiAg\nICAgICAgICAgICAgICBKdW1wSW5zdHJ1Y3Rpb24gaWZpbnMgPSBjb2RlLmlm\nbm9ubnVsbCgpOwogICAgICAgICAgICAgICAgY29kZS5jb25zdGFudCgpLnNl\ndE51bGwoKTsKICAgICAgICAgICAgICAgIGNvZGUuYXJldHVybigpOwogICAg\nICAgICAgICAgICAgaWZpbnMuc2V0VGFyZ2V0KGNvZGUuYWxvYWQoKS5zZXRU\naGlzKCkpOwogICAgICAgICAgICAgICAgY29kZS5nZXRmaWVsZCgpLnNldEZp\nZWxkKCJvYmplY3RzIiwgT2JqZWN0W10uY2xhc3MpOwogICAgICAgICAgICAg\nICAgY29kZS5jb25zdGFudCgpLnNldFZhbHVlKG9iamVjdENvdW50KTsKICAg\nICAgICAgICAgICAgIGNvZGUuYWFsb2FkKCk7CiAgICAgICAgICAgICAgICBj\nb2RlLmFyZXR1cm4oKTsKICAgICAgICAgICAgICAgIG9iamVjdENvdW50Kys7\nCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBjYXNl\nIGk6IHJldHVybiBmaWVsZGk7CiAgICAgICAgICAgICAgICBjb2RlLmdldGZp\nZWxkKCkuc2V0RmllbGQoImZpZWxkIiArIGksIHR5cGUpOwogICAgICAgICAg\nICAgICAgY29kZS54cmV0dXJuKCkuc2V0VHlwZSh0eXBlKTsKICAgICAgICAg\nICAgfQogICAgICAgIH0KICAgICAgICBjb2RlLmNhbGN1bGF0ZU1heExvY2Fs\ncygpOwogICAgICAgIGNvZGUuY2FsY3VsYXRlTWF4U3RhY2soKTsKICAgIH0K\nCiAgICAvLy8vLy8vLy8vLy8vCiAgICAvLyBVdGlsaXRpZXMKICAgIC8vLy8v\nLy8vLy8vLy8KCiAgICAvKioKICAgICAqIENsZWFyIGNvZGUgYXNzb2NpYXRl\nZCB3aXRoIHRoZSBnaXZlbiBtZXRob2Qgc2lnbmF0dXJlLCBhbmQgcmV0dXJu\nCiAgICAgKiB0aGUgZW1wdHkgY29kZS4gV2lsbCByZXR1cm4gbnVsbCBpZiB0\naGUgbWV0aG9kIHNob3VsZCBiZSBlbXB0eS4KICAgICAqLwogICAgcHJvdGVj\ndGVkIENvZGUgcmVwbGFjZU1ldGhvZChCQ0NsYXNzIGJjLCBTdHJpbmcgbmFt\nZSwgQ2xhc3MgcmV0VHlwZSwKICAgICAgICBDbGFzc1tdIGFyZ3MsIGJvb2xl\nYW4gcmVtb3ZlKSB7CiAgICAgICAgYmMucmVtb3ZlRGVjbGFyZWRNZXRob2Qo\nbmFtZSwgYXJncyk7CiAgICAgICAgQkNNZXRob2QgbWV0aCA9IGJjLmRlY2xh\ncmVNZXRob2QobmFtZSwgcmV0VHlwZSwgYXJncyk7CiAgICAgICAgQ29kZSBj\nb2RlID0gbWV0aC5nZXRDb2RlKHRydWUpOwogICAgICAgIGlmICghcmVtb3Zl\nKQogICAgICAgICAgICByZXR1cm4gY29kZTsKICAgICAgICBjb2RlLnhyZXR1\ncm4oKS5zZXRUeXBlKHJldFR5cGUpOwogICAgICAgIGNvZGUuY2FsY3VsYXRl\nTWF4U3RhY2soKTsKICAgICAgICBjb2RlLmNhbGN1bGF0ZU1heExvY2Fscygp\nOwogICAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIC8qKgogICAgICog\nQWRkIGEgYmVhbiBmaWVsZCBvZiB0aGUgZ2l2ZW4gbmFtZSBhbmQgdHlwZS4K\nICAgICAqLwogICAgcHJvdGVjdGVkIEJDRmllbGQgYWRkQmVhbkZpZWxkKEJD\nQ2xhc3MgYmMsIFN0cmluZyBuYW1lLCBDbGFzcyB0eXBlKSB7CiAgICAgICAg\naWYgKG5hbWUgPT0gbnVsbCkKICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVn\nYWxBcmd1bWVudEV4Y2VwdGlvbigibmFtZSA9PSBudWxsIik7CgogICAgICAg\nIC8vIHByaXZhdGUgPHR5cGU+IDxuYW1lPgogICAgICAgIEJDRmllbGQgZmll\nbGQgPSBiYy5kZWNsYXJlRmllbGQobmFtZSwgdHlwZSk7CiAgICAgICAgZmll\nbGQuc2V0QWNjZXNzRmxhZ3MoZ2V0RmllbGRBY2Nlc3MoKSk7CiAgICAgICAg\nbmFtZSA9IFN0cmluZ1V0aWxzLmNhcGl0YWxpemUobmFtZSk7CgogICAgICAg\nIC8vIGdldHRlcgogICAgICAgIFN0cmluZyBwcmVmaXggPSAodHlwZSA9PSBi\nb29sZWFuLmNsYXNzKSA/ICJpcyIgOiAiZ2V0IjsKICAgICAgICBCQ01ldGhv\nZCBtZXRob2QgPSBiYy5kZWNsYXJlTWV0aG9kKHByZWZpeCArIG5hbWUsIHR5\ncGUsIG51bGwpOwogICAgICAgIG1ldGhvZC5tYWtlUHVibGljKCk7CiAgICAg\nICAgQ29kZSBjb2RlID0gbWV0aG9kLmdldENvZGUodHJ1ZSk7CiAgICAgICAg\nY29kZS5hbG9hZCgpLnNldFRoaXMoKTsKICAgICAgICBjb2RlLmdldGZpZWxk\nKCkuc2V0RmllbGQoZmllbGQpOwogICAgICAgIGNvZGUueHJldHVybigpLnNl\ndFR5cGUodHlwZSk7CiAgICAgICAgY29kZS5jYWxjdWxhdGVNYXhTdGFjaygp\nOwogICAgICAgIGNvZGUuY2FsY3VsYXRlTWF4TG9jYWxzKCk7CgogICAgICAg\nIC8vIHNldHRlcgogICAgICAgIG1ldGhvZCA9IGJjLmRlY2xhcmVNZXRob2Qo\nInNldCIgKyBuYW1lLCB2b2lkLmNsYXNzLAogICAgICAgICAgICBuZXcgQ2xh\nc3NbXXsgdHlwZSB9KTsKICAgICAgICBtZXRob2QubWFrZVB1YmxpYygpOwog\nICAgICAgIGNvZGUgPSBtZXRob2QuZ2V0Q29kZSh0cnVlKTsKICAgICAgICBj\nb2RlLmFsb2FkKCkuc2V0VGhpcygpOwogICAgICAgIGNvZGUueGxvYWQoKS5z\nZXRQYXJhbSgwKS5zZXRUeXBlKHR5cGUpOwogICAgICAgIGNvZGUucHV0Zmll\nbGQoKS5zZXRGaWVsZChmaWVsZCk7CiAgICAgICAgY29kZS52cmV0dXJuKCk7\nCiAgICAgICAgY29kZS5jYWxjdWxhdGVNYXhTdGFjaygpOwogICAgICAgIGNv\nZGUuY2FsY3VsYXRlTWF4TG9jYWxzKCk7CiAgICAgICAgcmV0dXJuIGZpZWxk\nOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRydWUgaWYgdGhlIGdp\ndmVuIGZpZWxkIHR5cGUgYW5kIHN0b3JhZ2UgdHlwZSBhcmUgY29tcGF0aWJs\nZS4KICAgICAqLwogICAgcHJvdGVjdGVkIGJvb2xlYW4gaXNDb21wYXRpYmxl\nKGludCBmaWVsZFR5cGUsIGludCBzdG9yYWdlVHlwZSkgewogICAgICAgIGlm\nIChzdG9yYWdlVHlwZSA9PSBKYXZhVHlwZXMuT0JKRUNUKQogICAgICAgICAg\nICByZXR1cm4gZmllbGRUeXBlID49IEphdmFUeXBlcy5PQkpFQ1Q7CiAgICAg\nICAgcmV0dXJuIGZpZWxkVHlwZSA9PSBzdG9yYWdlVHlwZTsKICAgIH0KCiAg\nICAvKioKICAgICAqIFRocm93IGFuIGV4Y2VwdGlvbiBvZiB0aGUgZ2l2ZW4g\ndHlwZS4KICAgICAqLwogICAgcHJvdGVjdGVkIEluc3RydWN0aW9uIHRocm93\nRXhjZXB0aW9uKENvZGUgY29kZSwgQ2xhc3MgdHlwZSkgewogICAgICAgIElu\nc3RydWN0aW9uIGlucyA9IGNvZGUuYW5ldygpLnNldFR5cGUodHlwZSk7CiAg\nICAgICAgY29kZS5kdXAoKTsKICAgICAgICBjb2RlLmludm9rZXNwZWNpYWwo\nKS5zZXRNZXRob2QodHlwZSwgIjxpbml0PiIsIHZvaWQuY2xhc3MsIG51bGwp\nOwogICAgICAgIGNvZGUuYXRocm93KCk7CiAgICAgICAgcmV0dXJuIGluczsK\nICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgcHJvcGVyIHR5cGUg\nZm9yIHRoZSBnaXZlbiB7QGxpbmsgSmF2YVR5cGVzfSBjb25zdGFudC4KICAg\nICAqLwogICAgcHJvdGVjdGVkIENsYXNzIGZvclR5cGUoaW50IHR5cGUpIHsK\nICAgICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICAgICAgY2FzZSBKYXZh\nVHlwZXMuQk9PTEVBTjoKICAgICAgICAgICAgICAgIHJldHVybiBib29sZWFu\nLmNsYXNzOwogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5CWVRFOgogICAg\nICAgICAgICAgICAgcmV0dXJuIGJ5dGUuY2xhc3M7CiAgICAgICAgICAgIGNh\nc2UgSmF2YVR5cGVzLkNIQVI6CiAgICAgICAgICAgICAgICByZXR1cm4gY2hh\nci5jbGFzczsKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuSU5UOgogICAg\nICAgICAgICAgICAgcmV0dXJuIGludC5jbGFzczsKICAgICAgICAgICAgY2Fz\nZSBKYXZhVHlwZXMuU0hPUlQ6CiAgICAgICAgICAgICAgICByZXR1cm4gc2hv\ncnQuY2xhc3M7CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkxPTkc6CiAg\nICAgICAgICAgICAgICByZXR1cm4gbG9uZy5jbGFzczsKICAgICAgICAgICAg\nY2FzZSBKYXZhVHlwZXMuRkxPQVQ6CiAgICAgICAgICAgICAgICByZXR1cm4g\nZmxvYXQuY2xhc3M7CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkRPVUJM\nRToKICAgICAgICAgICAgICAgIHJldHVybiBkb3VibGUuY2xhc3M7CiAgICAg\nICAgfQogICAgICAgIHJldHVybiBPYmplY3QuY2xhc3M7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBnZXQgdGhlIHdyYXBwZXIgZm9yIHRoZSBnaXZlbiB7QGxp\nbmsgSmF2YVR5cGVzfSBjb25zdGFudC4KICAgICAqLwogICAgcHJvdGVjdGVk\nIENsYXNzIGdldFdyYXBwZXIoaW50IHR5cGUpIHsKICAgICAgICByZXR1cm4g\nZ2V0V3JhcHBlcihmb3JUeXBlKHR5cGUpKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIEdldCB0aGUgd3JhcHBlciBmb3IgdGhlIGdpdmVuIHR5cGUuCiAgICAg\nKi8KICAgIHByb3RlY3RlZCBDbGFzcyBnZXRXcmFwcGVyKENsYXNzIGMpIHsK\nICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IFdSQVBQRVJTLmxlbmd0aDsg\naSsrKSB7CiAgICAgICAgICAgIGlmIChXUkFQUEVSU1tpXVswXS5lcXVhbHMg\nKGMpKQoJCQkJcmV0dXJuIFdSQVBQRVJTW2ldWzFdOwoJCX0KCQlyZXR1cm4g\nYzsKCX0KfQo=\n","encoding":"base64"}

