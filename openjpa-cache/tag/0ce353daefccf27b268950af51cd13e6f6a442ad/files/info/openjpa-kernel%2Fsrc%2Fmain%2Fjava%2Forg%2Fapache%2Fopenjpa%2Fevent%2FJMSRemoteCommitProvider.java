{"sha":"f3c856734a344abae26318cb0494d9684a4eef96","node_id":"MDQ6QmxvYjIwNjM2NDpmM2M4NTY3MzRhMzQ0YWJhZTI2MzE4Y2IwNDk0ZDk2ODRhNGVlZjk2","size":9104,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/f3c856734a344abae26318cb0494d9684a4eef96","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5ldmVudDsKCmltcG9ydCBqYXZhLnV0aWwuUHJvcGVydGllczsK\naW1wb3J0IGphdmF4Lmptcy5FeGNlcHRpb25MaXN0ZW5lcjsKaW1wb3J0IGph\ndmF4Lmptcy5KTVNFeGNlcHRpb247CmltcG9ydCBqYXZheC5qbXMuTWVzc2Fn\nZTsKaW1wb3J0IGphdmF4Lmptcy5NZXNzYWdlTGlzdGVuZXI7CmltcG9ydCBq\nYXZheC5qbXMuT2JqZWN0TWVzc2FnZTsKaW1wb3J0IGphdmF4Lmptcy5TZXNz\naW9uOwppbXBvcnQgamF2YXguam1zLlRvcGljOwppbXBvcnQgamF2YXguam1z\nLlRvcGljQ29ubmVjdGlvbjsKaW1wb3J0IGphdmF4Lmptcy5Ub3BpY0Nvbm5l\nY3Rpb25GYWN0b3J5OwppbXBvcnQgamF2YXguam1zLlRvcGljUHVibGlzaGVy\nOwppbXBvcnQgamF2YXguam1zLlRvcGljU2Vzc2lvbjsKaW1wb3J0IGphdmF4\nLmptcy5Ub3BpY1N1YnNjcmliZXI7CmltcG9ydCBqYXZheC5uYW1pbmcuQ29u\ndGV4dDsKaW1wb3J0IGphdmF4Lm5hbWluZy5Jbml0aWFsQ29udGV4dDsKaW1w\nb3J0IGphdmF4Lm5hbWluZy5OYW1pbmdFeGNlcHRpb247CgppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmxpYi5jb25mLkNvbmZpZ3VyYWJsZTsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5HZW5lcmljQ29uZmlndXJh\nYmxlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkxvY2Fs\naXplcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5PcHRp\nb25zOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuT3BlbkpQQUV4\nY2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLlVzZXJF\neGNlcHRpb247CgovKioKICogSk1TLWJhc2VkIGltcGxlbWVudGF0aW9uIG9m\nIHtAbGluayBSZW1vdGVDb21taXRQcm92aWRlcn0gdGhhdAogKiBsaXN0ZW5z\nIGZvciBvYmplY3QgbW9kaWZpY2F0aW9ucyBhbmQgcHJvcGFnYXRlcyB0aG9z\nZSBjaGFuZ2VzIHRvCiAqIG90aGVyIFJlbW90ZUNvbW1pdFByb3ZpZGVycyBv\ndmVyIGEgSk1TIHRvcGljLgogKgogKiBAYXV0aG9yIFBhdHJpY2sgTGluc2tl\neQogKiBAc2luY2UgMC4yLjUuMAogKi8KcHVibGljIGNsYXNzIEpNU1JlbW90\nZUNvbW1pdFByb3ZpZGVyCiAgICBleHRlbmRzIEFic3RyYWN0UmVtb3RlQ29t\nbWl0UHJvdmlkZXIKICAgIGltcGxlbWVudHMgQ29uZmlndXJhYmxlLCBHZW5l\ncmljQ29uZmlndXJhYmxlLCBFeGNlcHRpb25MaXN0ZW5lciB7CgogICAgcHJp\ndmF0ZSBzdGF0aWMgTG9jYWxpemVyIHNfbG9jID0gTG9jYWxpemVyLmZvclBh\nY2thZ2UKICAgICAgICAoSk1TUmVtb3RlQ29tbWl0UHJvdmlkZXIuY2xhc3Mp\nOwoKICAgIHByaXZhdGUgU3RyaW5nIF90b3BpY05hbWUgPSAidG9waWMvT3Bl\nbkpQQUNvbW1pdFByb3ZpZGVyVG9waWMiOwogICAgcHJpdmF0ZSBTdHJpbmcg\nX3RjZk5hbWUgPSAiamF2YTovQ29ubmVjdGlvbkZhY3RvcnkiOwogICAgcHJp\ndmF0ZSBQcm9wZXJ0aWVzIF9jdHhQcm9wcyA9IG51bGw7CiAgICBwcml2YXRl\nIGludCBfcmVjb25uZWN0QXR0ZW1wdHMgPSAwOwogICAgcHJpdmF0ZSBUb3Bp\nY0Nvbm5lY3Rpb24gX2Nvbm5lY3Rpb247CiAgICBwcml2YXRlIFRvcGljU2Vz\nc2lvbiBfc2Vzc2lvbjsKICAgIHByaXZhdGUgVG9waWNQdWJsaXNoZXIgX3B1\nYmxpc2hlcjsKCiAgICAvKioKICAgICAqIFNldHMgdGhlIEpNUyBUb3BpYyBu\nYW1lLiBEZWZhdWx0cyB0bwogICAgICogPGNvZGU+dG9waWMvT3BlbkpQQUNv\nbW1pdFByb3ZpZGVyVG9waWM8L2NvZGU+LgogICAgICovCiAgICBwdWJsaWMg\ndm9pZCBzZXRUb3BpYyhTdHJpbmcgbmFtZSkgewogICAgICAgIF90b3BpY05h\nbWUgPSBuYW1lOwogICAgfQoKICAgIC8qKgogICAgICogU2V0cyB0aGUgSk1T\nIFRvcGljQ29ubmVjdGlvbkZhY3RvcnkgbmFtZS4gRGVmYXVsdHMgdG8KICAg\nICAqIDxjb2RlPmphdmE6L0Nvbm5lY3Rpb25GYWN0b3J5PC9jb2RlPi4KICAg\nICAqLwogICAgcHVibGljIHZvaWQgc2V0VG9waWNDb25uZWN0aW9uRmFjdG9y\neShTdHJpbmcgbmFtZSkgewogICAgICAgIF90Y2ZOYW1lID0gbmFtZTsKICAg\nIH0KCiAgICAvKioKICAgICAqIFRoZSBudW1iZXIgb2YgdGltZXMgdG8gYXR0\nZW1wdCB0byByZWNvbm5lY3QgYWZ0ZXIgYSBKTVMgc2VuZCBleGNlcHRpb24K\nICAgICAqIGlzIGRldGVjdGVkLiBEZWZhdWx0cyB0byAwLCBtZWFuaW5nIG5v\nIGF0dGVtcHQgdG8gcmVjb25uZWN0IGlzIG1hZGU7CiAgICAgKiB0aGUgZXhj\nZXB0aW9uIGlzIGxvZ2dlZCBhbmQgaWdub3JlZC4KICAgICAqLwogICAgcHVi\nbGljIHZvaWQgc2V0RXhjZXB0aW9uUmVjb25uZWN0QXR0ZW1wdHMoaW50IGF0\ndGVtcHRzKSB7CiAgICAgICAgX3JlY29ubmVjdEF0dGVtcHRzID0gYXR0ZW1w\ndHM7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQgYSBtYXAgb2YgcHJvcGVy\ndGllcyB0byBwYXNzIHRvIHRoZSB7QGxpbmsgSW5pdGlhbENvbnRleHR9CiAg\nICAgKiBjb25zdHJ1Y3RvciBmb3IgSk5ESSBsb29rdXBzLiBJbXBsZW1lbnRh\ndGlvbiBvZgogICAgICoge0BsaW5rIEdlbmVyaWNDb25maWd1cmFibGV9Lgog\nICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRJbnRvKE9wdGlvbnMgb3B0cykg\newogICAgICAgIGlmIChvcHRzICE9IG51bGwgJiYgIW9wdHMuaXNFbXB0eSgp\nKSB7CiAgICAgICAgICAgIF9jdHhQcm9wcyA9IG5ldyBQcm9wZXJ0aWVzKCk7\nCiAgICAgICAgICAgIF9jdHhQcm9wcy5wdXRBbGwob3B0cyk7CiAgICAgICAg\nICAgIG9wdHMuY2xlYXIoKTsKICAgICAgICB9IGVsc2UKICAgICAgICAgICAg\nX2N0eFByb3BzID0gbnVsbDsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVy\nbnMgYSBuZXcge0BsaW5rIENvbnRleHR9IG9iamVjdCBmb3IgdXNlIGJ5IHRo\naXMgcHJvdmlkZXIuCiAgICAgKi8KICAgIHByb3RlY3RlZCBDb250ZXh0IG5l\nd0NvbnRleHQoKQogICAgICAgIHRocm93cyBOYW1pbmdFeGNlcHRpb24gewog\nICAgICAgIGlmIChfY3R4UHJvcHMgPT0gbnVsbCkKICAgICAgICAgICAgcmV0\ndXJuIG5ldyBJbml0aWFsQ29udGV4dCgpOwogICAgICAgIHJldHVybiBuZXcg\nSW5pdGlhbENvbnRleHQoX2N0eFByb3BzKTsKICAgIH0KCiAgICAvLyAtLS0t\nLS0tLS0tIFJlbW90ZUNvbW1pdFByb3ZpZGVyIGltcGxlbWVudGF0aW9uIC0t\nLS0tLS0tLS0KCiAgICBwdWJsaWMgdm9pZCBicm9hZGNhc3QoUmVtb3RlQ29t\nbWl0RXZlbnQgZXZlbnQpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBf\ncHVibGlzaGVyLnB1Ymxpc2goY3JlYXRlTWVzc2FnZShldmVudCkpOwogICAg\nICAgICAgICBpZiAobG9nLmlzVHJhY2VFbmFibGVkKCkpCiAgICAgICAgICAg\nICAgICBsb2cudHJhY2Uoc19sb2MuZ2V0KCJqbXMtc2VudC11cGRhdGUiLCBf\ndG9waWNOYW1lKSk7CiAgICAgICAgfSBjYXRjaCAoSk1TRXhjZXB0aW9uIGpt\nc2UpIHsKICAgICAgICAgICAgaWYgKGxvZy5pc1dhcm5FbmFibGVkKCkpCiAg\nICAgICAgICAgICAgICBsb2cud2FybihzX2xvYy5nZXQoImptcy1zZW5kLWVy\ncm9yIiwgX3RvcGljTmFtZSksIGptc2UpOwogICAgICAgIH0KICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCBjbG9zZSgpIHsKICAgICAgICB0cnkgewogICAgICAg\nICAgICBpZiAoX2Nvbm5lY3Rpb24gIT0gbnVsbCkgewogICAgICAgICAgICAg\nICAgX2Nvbm5lY3Rpb24uY2xvc2UoKTsKICAgICAgICAgICAgICAgIGlmIChs\nb2cuaXNJbmZvRW5hYmxlZCgpKQogICAgICAgICAgICAgICAgICAgIGxvZy5p\nbmZvKHNfbG9jLmdldCgiam1zLWNsb3NlLWxpc3RlbmVyIiwgX3RvcGljTmFt\nZSkpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGNhdGNoIChK\nTVNFeGNlcHRpb24gam1zZSkgewogICAgICAgICAgICBpZiAobG9nLmlzV2Fy\nbkVuYWJsZWQoKSkKICAgICAgICAgICAgICAgIGxvZy53YXJuKHNfbG9jLmdl\ndCgiam1zLWNsb3NlLWVycm9yIiwgX3RvcGljTmFtZSksIGptc2UpOwogICAg\nICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIF9jb25uZWN0aW9uID0gbnVs\nbDsKICAgICAgICB9CiAgICB9CgogICAgLy8gLS0tLS0tLS0tLSBDb25maWd1\ncmFibGUgaW1wbGVtZW50YXRpb24gLS0tLS0tLS0tLQoKICAgIC8qKgogICAg\nICogU3ViY2xhc3NlcyB0aGF0IG5lZWQgdG8gcGVyZm9ybSBhY3Rpb25zIGlu\nCiAgICAgKiB7QGxpbmsgQ29uZmlndXJhYmxlI2VuZENvbmZpZ3VyYXRpb259\nIG11c3QgaW52b2tlIHRoaXMgbWV0aG9kLgogICAgICovCiAgICBwdWJsaWMg\ndm9pZCBlbmRDb25maWd1cmF0aW9uKCkgewogICAgICAgIHN1cGVyLmVuZENv\nbmZpZ3VyYXRpb24oKTsKICAgICAgICBjb25uZWN0KCk7CiAgICB9CgogICAg\ncHJpdmF0ZSB2b2lkIGNvbm5lY3QoKSB7CiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgQ29udGV4dCBjdHggPSBuZXdDb250ZXh0KCk7CiAgICAgICAgICAg\nIFRvcGljQ29ubmVjdGlvbkZhY3RvcnkgdGNmID0KICAgICAgICAgICAgICAg\nIChUb3BpY0Nvbm5lY3Rpb25GYWN0b3J5KSBjdHgubG9va3VwKF90Y2ZOYW1l\nKTsKICAgICAgICAgICAgVG9waWMgdG9waWMgPSAoVG9waWMpIGN0eC5sb29r\ndXAoX3RvcGljTmFtZSk7CiAgICAgICAgICAgIGN0eC5jbG9zZSgpOwoKICAg\nICAgICAgICAgX2Nvbm5lY3Rpb24gPSB0Y2YuY3JlYXRlVG9waWNDb25uZWN0\naW9uKCk7CgogICAgICAgICAgICAvLyBmYWxzZSA9PSBub3QgdHJhbnNhY3Rl\nZC4KICAgICAgICAgICAgX3Nlc3Npb24gPSBfY29ubmVjdGlvbi5jcmVhdGVU\nb3BpY1Nlc3Npb24KICAgICAgICAgICAgICAgIChmYWxzZSwgU2Vzc2lvbi5B\nVVRPX0FDS05PV0xFREdFKTsKCiAgICAgICAgICAgIC8vIGNyZWF0ZSBhIHB1\nYmxpc2hlcgogICAgICAgICAgICBfcHVibGlzaGVyID0gX3Nlc3Npb24uY3Jl\nYXRlUHVibGlzaGVyKHRvcGljKTsKCiAgICAgICAgICAgIC8vIGNyZWF0ZSBh\nIHN1YnNjcmliZXIuCiAgICAgICAgICAgIFRvcGljU3Vic2NyaWJlciBzID0g\nX3Nlc3Npb24uY3JlYXRlU3Vic2NyaWJlcih0b3BpYywgbnVsbCwKICAgICAg\nICAgICAgICAgIC8qIG5vTG9jYWw6ICovIHRydWUpOwogTWVzc2FnZUxpc3Rl\nbmVyIGwgPSBnZXRNZXNzYWdlTGlzdGVuZXIoKTsKIHMuc2V0TWVzc2FnZUxp\nc3RlbmVyKGwpOwogX2Nvbm5lY3Rpb24uc3RhcnQoKTsKIF9jb25uZWN0aW9u\nLnNldEV4Y2VwdGlvbkxpc3RlbmVyKHRoaXMpOwogaWYgKGxvZy5pc0luZm9F\nbmFibGVkKCkpCiBsb2cuaW5mbyhzX2xvYy5nZXQoImptcy1zdGFydC1saXN0\nZW5lciIsIF90b3BpY05hbWUpKTsKIH0gY2F0Y2ggKE9wZW5KUEFFeGNlcHRp\nb24ga2UpIHsKIHRocm93IGtlOwogfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsK\nIHRocm93IG5ldyBVc2VyRXhjZXB0aW9uKHNfbG9jLmdldCgiam1zLXByb3Zp\nZGVyLWNvbmZpZyIsCiBfdG9waWNOYW1lLCBfdGNmTmFtZSksIGUpLnNldEZh\ndGFsKHRydWUpOwogfQogfQoKICAgIC8qICoKICAgICAqIFJldHVybnMgYSB7\nQGxpbmsgamF2YXguam1zLk1lc3NhZ2VMaXN0ZW5lcn0gY2FwYWJsZSBvZgog\nICAgICogdW5kZXJzdGFuZGluZyBhbmQgcHJvY2Vzc2luZyBtZXNzYWdlcyBj\ncmVhdGVkIGJ5IHtAbGluayAjY3JlYXRlTWVzc2FnZX0uCiAgICAgKiAgVGhl\nIGxpc3RlbmVyIHJldHVybmVkIGJ5IHRoaXMgbWV0aG9kIGlzIHJlc3BvbnNp\nYmxlIGZvcgogICAgICogbm90aWZ5aW5nIHRoZSBwcm92aWRlciB0aGF0IGEg\ncmVtb3RlIGV2ZW50IGhhcyBiZWVuIHJlY2VpdmVkLgogICAgICovCiAgICBw\ncm90ZWN0ZWQgTWVzc2FnZUxpc3RlbmVyIGdldE1lc3NhZ2VMaXN0ZW5lcigp\nIHsKICAgICAgICByZXR1cm4gbmV3IE1lc3NhZ2VMaXN0ZW5lcigpIHsKICAg\nICAgICAgICAgcHVibGljIHZvaWQgb25NZXNzYWdlKE1lc3NhZ2UgbSkgewog\nICAgICAgICAgICAgICAgaWYgKCEobSBpbnN0YW5jZW9mIE9iamVjdE1lc3Nh\nZ2UpKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGxvZy5pc1dhcm5FbmFi\nbGVkKCkpCiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKHNfbG9j\nLmdldCgiam1zLXJlY2VpdmUtZXJyb3ItMyIsCiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICBfdG9waWNOYW1lLCBtLmdldENsYXNzKCkuZ2V0TmFtZSgp\nKSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAg\nICAgfQoKICAgICAgICAgICAgICAgIE9iamVjdE1lc3NhZ2Ugb20gPSAoT2Jq\nZWN0TWVzc2FnZSkgbTsKICAgICAgICAgICAgICAgIE9iamVjdCBvOwogICAg\nICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBvID0gb20u\nZ2V0T2JqZWN0KCk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChKTVNFeGNl\ncHRpb24gam1zZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChsb2cuaXNX\nYXJuRW5hYmxlZCgpKQogICAgICAgICAgICAgICAgICAgICAgICBsb2cud2Fy\nbihzX2xvYy5nZXQoImptcy1yZWNlaXZlLWVycm9yLTEiKSwgam1zZSk7CiAg\nICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoK\nICAgICAgICAgICAgICAgIGlmIChvIGluc3RhbmNlb2YgUmVtb3RlQ29tbWl0\nRXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAobG9nLmlzVHJhY2VF\nbmFibGVkKCkpCiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy50cmFjZShz\nX2xvYy5nZXQoImptcy1yZWNlaXZlZC11cGRhdGUiLAogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgX3RvcGljTmFtZSkpOwoKICAgICAgICAgICAgICAg\nICAgICBSZW1vdGVDb21taXRFdmVudCByY2UgPSAoUmVtb3RlQ29tbWl0RXZl\nbnQpIG87CiAgICAgICAgICAgICAgICAgICAgZmlyZUV2ZW50KHJjZSk7CiAg\nICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGlm\nIChsb2cuaXNXYXJuRW5hYmxlZCgpKQogICAgICAgICAgICAgICAgICAgICAg\nICBsb2cud2FybihzX2xvYy5nZXQoImptcy1yZWNlaXZlLWVycm9yLTIiLAog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgby5nZXRDbGFzcygpLmdldE5h\nbWUoKSwgX3RvcGljTmFtZSkpOwogICAgICAgICAgICAgICAgfQogICAgICAg\nICAgICB9CiAgICAgICAgfTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVy\nbnMgYSBuZXcge0BsaW5rIE1lc3NhZ2V9IHRvIHNlbmQgdG8gdGhlIHRvcGlj\nLiBUaGlzCiAgICAgKiBpbXBsZW1lbnRhdGlvbiBjcmVhdGVzIGFuIHtAbGlu\nayBPYmplY3RNZXNzYWdlfS4KICAgICAqLwogICAgcHJvdGVjdGVkIE1lc3Nh\nZ2UgY3JlYXRlTWVzc2FnZShSZW1vdGVDb21taXRFdmVudCBldmVudCkKICAg\nICAgICB0aHJvd3MgSk1TRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gX3Nl\nc3Npb24uY3JlYXRlT2JqZWN0TWVzc2FnZShldmVudCk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgb25FeGNlcHRpb24oSk1TRXhjZXB0aW9uIGV4KSB7CiAg\nICAgICAgaWYgKGxvZy5pc1dhcm5FbmFibGVkKCkpCiAgICAgICAgICAgIGxv\nZy53YXJuKHNfbG9jLmdldCgiam1zLWxpc3RlbmVyLWVycm9yIiwgX3RvcGlj\nTmFtZSksIGV4KTsKICAgICAgICBpZiAoX3JlY29ubmVjdEF0dGVtcHRzIDw9\nIDApCiAgICAgICAgICAgIHJldHVybjsKCiAgICAgICAgY2xvc2UoKTsKICAg\nICAgICBib29sZWFuIGNvbm5lY3RlZCA9IGZhbHNlOwogICAgICAgIGZvciAo\naW50IGkgPSAwOyBpIDwgX3JlY29ubmVjdEF0dGVtcHRzOyBpKyspIHsKICAg\nICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGlmIChsb2cuaXNJbmZv\nRW5hYmxlZCgpKQogICAgICAgICAgICAgICAgICAgIGxvZy5pbmZvKHNfbG9j\nLmdldCgiam1zLXJlY29ubmVjdC1hdHRlbXB0IiwgX3RvcGljTmFtZSwKICAg\nICAgICAgICAgICAgICAgICAgICAgU3RyaW5nLnZhbHVlT2YoaSArIDEpKSk7\nCiAgICAgICAgICAgICAgICBjb25uZWN0KCk7CiAgICAgICAgICAgICAgICBj\nb25uZWN0ZWQgPSB0cnVlOwogICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRp\nb24gZSkgewogICAgICAgICAgICAgICAgaWYgKGxvZy5pc0luZm9FbmFibGVk\nKCkpCiAgICAgICAgICAgICAgICAgICAgbG9nLmluZm8oc19sb2MuZ2V0KCJq\nbXMtcmVjb25uZWN0LWZhaWwiLCBfdG9waWNOYW1lKSwgZSk7CiAgICAgICAg\nICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIFRocmVhZC5zbGVl\ncCgxMDAwKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEludGVycnVwdGVk\nRXhjZXB0aW9uIGllKSB7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAg\nICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAg\nICAgIGlmICghY29ubmVjdGVkICYmIGxvZy5pc0Vycm9yRW5hYmxlZCgpKQog\nICAgICAgICAgICBsb2cuZXJyb3Ioc19sb2MuZ2V0KCJqbXMtY2FudC1yZWNv\nbm5lY3QiLCBfdG9waWNOYW1lLAogICAgICAgICAgICAgICAgU3RyaW5nLnZh\nbHVlT2YoX3JlY29ubmVjdEF0dGVtcHRzKSkpOwogICAgICAgIGVsc2UgaWYg\nKGNvbm5lY3RlZCAmJiBsb2cuaXNJbmZvRW5hYmxlZCgpKQogICAgICAgICAg\nICBsb2cuaW5mbyhzX2xvYy5nZXQoImptcy1yZWNvbm5lY3RlZCIsIF90b3Bp\nY05hbWUpKTsKCX0KfQo=\n","encoding":"base64"}

