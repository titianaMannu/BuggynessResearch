{"sha":"5c94c2cac09ecd40b51bf9d26aea81502e12c9ba","node_id":"MDQ6QmxvYjIwNjM2NDo1Yzk0YzJjYWMwOWVjZDQwYjUxYmY5ZDI2YWVhODE1MDJlMTJjOWJh","size":4170,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/5c94c2cac09ecd40b51bf9d26aea81502e12c9ba","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5ldmVudDsKCmltcG9ydCBqYXZhLmxhbmcucmVmbGVjdC5NZXRo\nb2Q7CmltcG9ydCBqYXZhLnV0aWwuQXJyYXlzOwoKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6ZXI7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEudXRpbC5Vc2VyRXhjZXB0aW9uOwoKLyoqCiAqIENhbGxi\nYWNrIGFkYXB0ZXIgdGhhdCBpbnZva2VzIGEgY2FsbGJhY2sgbWV0aG9kIHZp\nYSByZWZsZWN0aW9uLgogKgogKiBAYXV0aG9yIFN0ZXZlIEtpbQogKi8KcHVi\nbGljIGNsYXNzIE1ldGhvZExpZmVjeWNsZUNhbGxiYWNrcwogICAgaW1wbGVt\nZW50cyBMaWZlY3ljbGVDYWxsYmFja3MgewoKICAgIHByaXZhdGUgc3RhdGlj\nIGZpbmFsIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVyLmZvclBhY2thZ2UK\nICAgICAgICAoTWV0aG9kTGlmZWN5Y2xlQ2FsbGJhY2tzLmNsYXNzKTsKCiAg\nICBwcml2YXRlIE1ldGhvZCBfY2FsbGJhY2s7CiAgICBwcml2YXRlIGJvb2xl\nYW4gX2FyZzsKCiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yLiBTdXBwbHkg\nY2FsbGJhY2sgY2xhc3MgYW5kIGl0cyBjYWxsYmFjayBtZXRob2QgbmFtZS4K\nICAgICAqCiAgICAgKiBAYXJnIFdoZXRoZXIgd2UgZXhwZWN0IGEgZnVydGhl\nciBhcmd1bWVudCBzdWNoIGFzIGluIEFmdGVyRGV0YWNoCiAgICAgKi8KICAg\nIHB1YmxpYyBNZXRob2RMaWZlY3ljbGVDYWxsYmFja3MoQ2xhc3MgY2xzLCBT\ndHJpbmcgbWV0aG9kLCBib29sZWFuIGFyZykgewogICAgICAgIENsYXNzW10g\nYXJncyA9IGFyZyA/IG5ldyBDbGFzc1tdeyBPYmplY3QuY2xhc3MgfSA6IG51\nbGw7CiAgICAgICAgX2NhbGxiYWNrID0gZ2V0TWV0aG9kKGNscywgbWV0aG9k\nLCBhcmdzKTsKICAgICAgICBfYXJnID0gYXJnOwogICAgfQoKICAgIC8qKgog\nICAgICogQ29uc3RydWN0b3IuIFN1cHBseSBjYWxsYmFjayBtZXRob2QuCiAg\nICAgKi8KICAgIHB1YmxpYyBNZXRob2RMaWZlY3ljbGVDYWxsYmFja3MoTWV0\naG9kIG1ldGhvZCwgYm9vbGVhbiBhcmcpIHsKICAgICAgICBfY2FsbGJhY2sg\nPSBtZXRob2Q7CiAgICAgICAgX2FyZyA9IGFyZzsKICAgIH0KCiAgICAvKioK\nICAgICAqIFRoZSBjYWxsYmFjayBtZXRob2QuCiAgICAgKi8KICAgIHB1Ymxp\nYyBNZXRob2QgZ2V0Q2FsbGJhY2tNZXRob2QoKSB7CiAgICAgICAgcmV0dXJu\nIF9jYWxsYmFjazsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgaWYg\ndGhpcyBjYWxsYmFjayBleHBlY3RzIGFub3RoZXIgYXJndW1lbnQKICAgICAq\nLwogICAgcHVibGljIGJvb2xlYW4gcmVxdWlyZXNBcmd1bWVudCgpIHsKICAg\nICAgICByZXR1cm4gX2FyZzsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBo\nYXNDYWxsYmFjayhPYmplY3Qgb2JqLCBpbnQgZXZlbnRUeXBlKSB7CiAgICAg\nICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgcHVibGljIHZvaWQgbWFrZUNh\nbGxiYWNrKE9iamVjdCBvYmosIE9iamVjdCBhcmcsIGludCBldmVudFR5cGUp\nCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgaWYgKCFfY2Fs\nbGJhY2suaXNBY2Nlc3NpYmxlKCkpCiAgICAgICAgICAgIF9jYWxsYmFjay5z\nZXRBY2Nlc3NpYmxlKHRydWUpOwoKICAgICAgICBpZiAoX2FyZykKICAgICAg\nICAgICAgX2NhbGxiYWNrLmludm9rZShvYmosIG5ldyBPYmplY3RbXXsgYXJn\nIH0pOwogICAgICAgIGVsc2UKICAgICAgICAgICAgX2NhbGxiYWNrLmludm9r\nZShvYmosIChPYmplY3RbXSkgbnVsbCk7CiAgICB9CgogICAgcHVibGljIFN0\ncmluZyB0b1N0cmluZygpIHsKICAgICAgICByZXR1cm4gZ2V0Q2xhc3MoKS5n\nZXROYW1lKCkgKyAiOiIgKyBfY2FsbGJhY2s7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBIZWxwZXIgbWV0aG9kIHRvIHJldHVybiB0aGUgbmFtZWQgbWV0aG9k\nIG9mIHRoZSBnaXZlbiBjbGFzcywgdGhyb3dpbmcKICAgICAqIHRoZSBwcm9w\nZXIgZXhjZXB0aW9uIG9uIGVycm9yLgogICAgICovCiAgICBwcm90ZWN0ZWQg\nc3RhdGljIE1ldGhvZCBnZXRNZXRob2QoQ2xhc3MgY2xzLCBTdHJpbmcgbWV0\naG9kLCBDbGFzc1tdIGFyZ3MpIHsKICAgICAgICB0cnkgewogICAgICAgICAg\nICBNZXRob2RbXSBtZXRob2RzID0gY2xzLmdldE1ldGhvZHMoKTsKICAgICAg\nICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBtZXRob2RzLmxlbmd0aDsgaSsr\nKSB7CiAgICAgICAgICAgICAgICBpZiAoIW1ldGhvZC5lcXVhbHMobWV0aG9k\nc1tpXS5nZXROYW1lKCkpKQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVl\nOwoKICAgICAgICAgICAgICAgIGlmIChpc0Fzc2lnbmFibGUobWV0aG9kc1tp\nXS5nZXRQYXJhbWV0ZXJUeXBlcygpLCBhcmdzKSkKICAgICAgICAgICAgICAg\nICAgICByZXR1cm4gbWV0aG9kc1tpXTsKICAgICAgICAgICAgfQoKICAgICAg\nICAgICAgcmV0dXJuIGNscy5nZXRNZXRob2QobWV0aG9kLCBhcmdzKTsKCiAg\nICAgICAgfSBjYXRjaCAoVGhyb3dhYmxlIHQpIHsKICAgICAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgICAgIC8vIHRyeSBhZ2FpbiB3aXRoIHRoZSBkZWNs\nYXJlZCBtZXRob2RzLCB3aGljaCB3aWxsCiAgICAgICAgICAgICAgICAvLyBj\naGVjayBwcml2YXRlIGFuZCBwcm90ZWN0ZWQgbWV0aG9kcwogICAgICAgICAg\nICAgICAgTWV0aG9kIG0gPSBjbHMuZ2V0RGVjbGFyZWRNZXRob2QobWV0aG9k\nLCBhcmdzKTsKICAgICAgICAgICAgICAgIGlmICghbS5pc0FjY2Vzc2libGUo\nKSkKICAgICAgICAgICAgICAgICAgICBtLnNldEFjY2Vzc2libGUodHJ1ZSk7\nCiAgICAgICAgICAgICAgICByZXR1cm4gbTsKICAgICAgICAgICAgfSBjYXRj\naCAoVGhyb3dhYmxlIHQyKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcg\nVXNlckV4Y2VwdGlvbihfbG9jLmdldCgibWV0aG9kLW5vdGZvdW5kIiwKICAg\nICAgICAgICAgICAgICAgICBjbHMuZ2V0TmFtZSgpLCBtZXRob2QsCiAgICAg\nICAgICAgICAgICAgICAgICAgIGFyZ3MgPT0gbnVsbCA/IG51bGwgOiBBcnJh\neXMuYXNMaXN0KGFyZ3MpKSwgdCk7CiAgICAgICAgICAgIH0KCQl9Cgl9Cgog\nICAgLyoqIAogICAgICogUmV0dXJucyB0cnVlIGlmIGFsbCBwYXJhbWV0ZXJz\nIGluIHRoZSBmcm9tIGFycmF5IGFyZSBhc3NpZ25hYmxlCiAgICAgKiBmcm9t\nIHRoZSBjb3JyZXNwb25kaW5nIHBhcmFtZXRlcnMgb2YgdGhlIHRvIGFycmF5\nLiAKICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgYm9vbGVhbiBpc0Fzc2ln\nbmFibGUoQ2xhc3NbXSBmcm9tLCBDbGFzc1tdIHRvKSB7CiAgICAgICAgaWYg\nKGZyb20gPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIHRvID09IG51bGw7\nCgogICAgICAgIGlmIChmcm9tLmxlbmd0aCAhPSB0by5sZW5ndGgpCiAgICAg\nICAgICAgIHJldHVybiBmYWxzZTsKCiAgICAgICAgZm9yIChpbnQgaSA9IDA7\nIGkgPCBmcm9tLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChmcm9t\nW2ldICE9IG51bGwgJiYgIWZyb21baV0uaXNBc3NpZ25hYmxlRnJvbSh0b1tp\nXSkpCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoK\nICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0gCn0K\n","encoding":"base64"}

