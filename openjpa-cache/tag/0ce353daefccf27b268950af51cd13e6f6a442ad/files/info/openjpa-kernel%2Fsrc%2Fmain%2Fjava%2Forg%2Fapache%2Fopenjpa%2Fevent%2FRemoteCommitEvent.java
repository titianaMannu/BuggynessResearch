{"sha":"08fa13e2f66982863210bc30d8deddd9424850fd","node_id":"MDQ6QmxvYjIwNjM2NDowOGZhMTNlMmY2Njk4Mjg2MzIxMGJjMzBkOGRlZGRkOTQyNDg1MGZk","size":6229,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/08fa13e2f66982863210bc30d8deddd9424850fd","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5ldmVudDsKCmltcG9ydCBqYXZhLmlvLkV4dGVybmFsaXphYmxl\nOwppbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEuaW8u\nT2JqZWN0SW5wdXQ7CmltcG9ydCBqYXZhLmlvLk9iamVjdE91dHB1dDsKaW1w\nb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOwppbXBvcnQgamF2YS51dGlsLkNv\nbGxlY3Rpb25zOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRp\nbC5Mb2NhbGl6ZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5V\nc2VyRXhjZXB0aW9uOwoKLyoqCiAqIEV2ZW50IHR5cGUgdG8gaG9sZCB0aGUg\nSURzIG9mIGFkZGl0aW9ucywgdXBkYXRlcywgYW5kCiAqIGRlbGV0ZXMuIFRo\naXMgZXZlbnQgdHlwZSBpcyBhbHNvIGZ1bGx5IHNlcmlhbGl6YWJsZSBmb3Ig\ncmVtb3RlIGNvbW11bmljYXRpb24uCiAqCiAqIEBzaW5jZSAwLjMuMAogKiBA\nYXV0aG9yIFBhdHJpY2sgTGluc2tleQogKiBAYXV0aG9yIEFiZSBXaGl0ZQog\nKi8KcHVibGljIGNsYXNzIFJlbW90ZUNvbW1pdEV2ZW50CiAgICBpbXBsZW1l\nbnRzIEV4dGVybmFsaXphYmxlIHsKCiAgICAvKioKICAgICAqIE5hbWVzIG9m\nIGFkZGVkIGNsYXNzZXMsIHVwYXRlZCBhbmQgZGVsZXRlZCBPYmplY3QgSURz\nLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBQQVlMT0FE\nX09JRFMgPSAwOwoKICAgIC8qKgogICAgICogTmFtZXMgb2YgYWRkZWQgY2xh\nc3NlcywgYWRkZWQsIHVwYXRlZCBhbmQgZGVsZXRlZCBPYmplY3QgSURzLgog\nICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBQQVlMT0FEX09J\nRFNfV0lUSF9BRERTID0gMTsKCiAgICAvKioKICAgICAqIE5hbWVzIG9mIGFk\nZGVkLCB1cGRhdGVkLCBhbmQgZGVsZXRlZCBjbGFzc2VzIG9ubHkuCiAgICAg\nKi8KICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IFBBWUxPQURfRVhURU5U\nUyA9IDI7CgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9jYWxpemVyIHNf\nbG9jID0gTG9jYWxpemVyLmZvclBhY2thZ2UKICAgICAgICAoUmVtb3RlQ29t\nbWl0RXZlbnQuY2xhc3MpOwoKICAgIHByaXZhdGUgaW50IF9wYXlsb2FkID0g\nUEFZTE9BRF9PSURTOwogICAgcHJpdmF0ZSBDb2xsZWN0aW9uIF9hZGRJZHMg\nPSBudWxsOwogICAgcHJpdmF0ZSBDb2xsZWN0aW9uIF9hZGRDbGFzc2VzID0g\nbnVsbDsKICAgIHByaXZhdGUgQ29sbGVjdGlvbiBfdXBkYXRlcyA9IG51bGw7\nCiAgICBwcml2YXRlIENvbGxlY3Rpb24gX2RlbGV0ZXMgPSBudWxsOwoKICAg\nIC8qKgogICAgICogQ29uc3RydWN0b3IgdXNlZCBkdXJpbmcgZXh0ZXJuYWxp\nemF0aW9uLgogICAgICovCiAgICBwdWJsaWMgUmVtb3RlQ29tbWl0RXZlbnQo\nKSB7CiAgICB9CgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3Rvci4gQWxsIGNv\nbGxlY3Rpb25zIHdpbGwgYmUgcHJveGllZCB3aXRoIHVubW9kaWZpYWJsZSB2\naWV3cy4KICAgICAqCiAgICAgKiBAcGFyYW0gcGF5bG9hZFR5cGUgUEFZTE9B\nRCBjb25zdGFudCBmb3IgdHlwZSBvZiBkYXRhIGluIHRoaXMgZXZlbnQKICAg\nICAqIEBwYXJhbSBhZGRJZHMgc2V0IG9mIG9iamVjdCBJRHMgZm9yIGFkZGVk\nIGluc3RhbmNlcywgb3IgbnVsbAogICAgICogQHBhcmFtIGFkZENsYXNzZXMg\nc2V0IG9mIGNsYXNzIG5hbWVzIGZvciBhZGRlZCBpbnN0YW5jZXMKICAgICAq\nIEBwYXJhbSB1cGRhdGVzIHNldCBvZiBjbGFzcyBuYW1lcyBvciBvYmplY3Qg\nSURzIGZvciB1cGRhdGVkIGluc3RhbmNlcwogICAgICogQHBhcmFtIGRlbGV0\nZXMgc2V0IG9mIGNsYXNzIG5hbWVzIG9yIG9iamVjdCBJRHMgZm9yIGRlbGV0\nZWQgaW5zdGFuY2VzCiAgICAgKi8KICAgIHB1YmxpYyBSZW1vdGVDb21taXRF\ndmVudChpbnQgcGF5bG9hZFR5cGUsIENvbGxlY3Rpb24gYWRkSWRzLAogICAg\nICAgIENvbGxlY3Rpb24gYWRkQ2xhc3NlcywgQ29sbGVjdGlvbiB1cGRhdGVz\nLCBDb2xsZWN0aW9uIGRlbGV0ZXMpIHsKICAgICAgICBfcGF5bG9hZCA9IHBh\neWxvYWRUeXBlOwogICAgICAgIGlmIChhZGRJZHMgIT0gbnVsbCkKICAgICAg\nICAgICAgX2FkZElkcyA9IENvbGxlY3Rpb25zLnVubW9kaWZpYWJsZUNvbGxl\nY3Rpb24oYWRkSWRzKTsKICAgICAgICBpZiAoYWRkQ2xhc3NlcyAhPSBudWxs\nKQogICAgICAgICAgICBfYWRkQ2xhc3NlcyA9IENvbGxlY3Rpb25zLnVubW9k\naWZpYWJsZUNvbGxlY3Rpb24oYWRkQ2xhc3Nlcyk7CiAgICAgICAgaWYgKHVw\nZGF0ZXMgIT0gbnVsbCkKICAgICAgICAgICAgX3VwZGF0ZXMgPSBDb2xsZWN0\naW9ucy51bm1vZGlmaWFibGVDb2xsZWN0aW9uKHVwZGF0ZXMpOwogICAgICAg\nIGlmIChkZWxldGVzICE9IG51bGwpCiAgICAgICAgICAgIF9kZWxldGVzID0g\nQ29sbGVjdGlvbnMudW5tb2RpZmlhYmxlQ29sbGVjdGlvbihkZWxldGVzKTsK\nICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBldmVudCBQQVlMT0FEIGNvbnN0\nYW50LgogICAgICovCiAgICBwdWJsaWMgaW50IGdldFBheWxvYWRUeXBlKCkg\newogICAgICAgIHJldHVybiBfcGF5bG9hZDsKICAgIH0KCiAgICAvKioKICAg\nICAqIFdoZW4gdGhlIGV2ZW50IHR5cGUgaXMgUEFZTE9BRF9PSURTX1dJVEhf\nQUREUywgcmV0dXJuIHRoZSBzZXQgb2YKICAgICAqIG9iamVjdCBJRHMgZm9y\nIGFkZGVkIG9iamVjdHMuIFRoaXMgd2lsbCBvbmx5IGJlIGNhbGxhYmxlIHdo\nZW4gdGhlCiAgICAgKiBiYWNrd2FyZCBjb21wYXRhYmlsaXR5IHByb3BlcnR5\nIHRyYW5zbWl0QWRkT2JqZWN0SWRzIGlzIHRydWUuCiAgICAgKi8KICAgIHB1\nYmxpYyBDb2xsZWN0aW9uIGdldFBlcnNpc3RlZE9iamVjdElkcygpIHsKICAg\nICAgICBpZiAoX3BheWxvYWQgIT0gUEFZTE9BRF9PSURTX1dJVEhfQUREUykg\newogICAgICAgICAgICBpZiAoX3BheWxvYWQgPT0gUEFZTE9BRF9PSURTKQog\nICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFeGNlcHRpb24oc19sb2Mu\nZ2V0KCJuby1hZGRlZC1vaWRzIikpOwogICAgICAgICAgICB0aHJvdyBuZXcg\nVXNlckV4Y2VwdGlvbihzX2xvYy5nZXQoImV4dGVudC1vbmx5LWV2ZW50Iikp\nOwogICAgICAgIH0KICAgICAgICByZXR1cm4gKF9hZGRJZHMgPT0gbnVsbCkg\nPyBDb2xsZWN0aW9ucy5FTVBUWV9MSVNUIDogX2FkZElkczsKICAgIH0KCiAg\nICAvKioKICAgICAqIFdoZW4gdGhlIGV2ZW50IHR5cGUgaXMgbm90IFBBWUxP\nQURfRVhURU5UUywgcmV0dXJuIHRoZSBzZXQgb2YKICAgICAqIG9iamVjdCBJ\nRHMgZm9yIHVwZGF0ZWQgb2JqZWN0cy4KICAgICAqLwogICAgcHVibGljIENv\nbGxlY3Rpb24gZ2V0VXBkYXRlZE9iamVjdElkcygpIHsKICAgICAgICBpZiAo\nX3BheWxvYWQgPT0gUEFZTE9BRF9FWFRFTlRTKQogICAgICAgICAgICB0aHJv\ndyBuZXcgVXNlckV4Y2VwdGlvbihzX2xvYy5nZXQoImV4dGVudC1vbmx5LWV2\nZW50IikpOwogICAgICAgIHJldHVybiAoX3VwZGF0ZXMgPT0gbnVsbCkgPyBD\nb2xsZWN0aW9ucy5FTVBUWV9MSVNUIDogX3VwZGF0ZXM7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBXaGVuIHRoZSBldmVudCB0eXBlIGlzIG5vdCBQQVlMT0FE\nX0VYVEVOVFMsIHJldHVybiB0aGUgc2V0IG9mCiAgICAgKiBvYmplY3QgSURz\nIGZvciBkZWxldGVkIG9iamVjdHMuCiAgICAgKi8KICAgIHB1YmxpYyBDb2xs\nZWN0aW9uIGdldERlbGV0ZWRPYmplY3RJZHMoKSB7CiAgICAgICAgaWYgKF9w\nYXlsb2FkID09IFBBWUxPQURfRVhURU5UUykKICAgICAgICAgICAgdGhyb3cg\nbmV3IFVzZXJFeGNlcHRpb24oc19sb2MuZ2V0KCJleHRlbnQtb25seS1ldmVu\ndCIpKTsKICAgICAgICByZXR1cm4gKF9kZWxldGVzID09IG51bGwpID8gQ29s\nbGVjdGlvbnMuRU1QVFlfTElTVCA6IF9kZWxldGVzOwogICAgfQoKICAgIC8q\nKgogICAgICogRm9yIGFsbCBldmVudCB0eXBlcywgcmV0dXJuIHRoZSBzZXQg\nb2YgY2xhc3MgbmFtZXMgZm9yCiAgICAgKiB0aGUgY2xhc3NlcyBvZiBpbnNl\ncnRlZCBvYmplY3RzLgogICAgICovCiAgICBwdWJsaWMgQ29sbGVjdGlvbiBn\nZXRQZXJzaXN0ZWRUeXBlTmFtZXMoKSB7CiAgICAgICAgcmV0dXJuIChfYWRk\nQ2xhc3NlcyA9PSBudWxsKSA/IENvbGxlY3Rpb25zLkVNUFRZX0xJU1QgOiBf\nYWRkQ2xhc3NlczsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZW4gdGhlIGV2\nZW50IHR5cGUgaXMgUEFZTE9BRF9FWFRFTlRTLCByZXR1cm4gdGhlIHNldCBv\nZiBjbGFzcwogICAgICogbmFtZXMgZm9yIHRoZSBjbGFzc2VzIG9mIHVwZGF0\nZWQgb2JqZWN0cy4KICAgICAqLwogICAgcHVibGljIENvbGxlY3Rpb24gZ2V0\nVXBkYXRlZFR5cGVOYW1lcygpIHsKICAgICAgICBpZiAoX3BheWxvYWQgIT0g\nUEFZTE9BRF9FWFRFTlRTKQogICAgICAgICAgICB0aHJvdyBuZXcgVXNlckV4\nY2VwdGlvbihzX2xvYy5nZXQoIm5vbmV4dGVudC1ldmVudCIpKTsKICAgICAg\nICByZXR1cm4gKF91cGRhdGVzID09IG51bGwpID8gQ29sbGVjdGlvbnMuRU1Q\nVFlfTElTVCA6IF91cGRhdGVzOwogICAgfQoKICAgIC8qKgogICAgICogV2hl\nbiB0aGUgZXZlbnQgdHlwZSBpcyBQQVlMT0FEX0VYVEVOVFMsIHJldHVybiB0\naGUgc2V0IG9mIGNsYXNzCiAgICAgKiBuYW1lcyBmb3IgdGhlIGNsYXNzZXMg\nb2YgZGVsZXRlZCBvYmplY3RzLgogICAgICovCiAgICBwdWJsaWMgQ29sbGVj\ndGlvbiBnZXREZWxldGVkVHlwZU5hbWVzKCkgewogICAgICAgIGlmIChfcGF5\nbG9hZCAhPSBQQVlMT0FEX0VYVEVOVFMpCiAgICAgICAgICAgIHRocm93IG5l\ndyBVc2VyRXhjZXB0aW9uKHNfbG9jLmdldCgibm9uZXh0ZW50LWV2ZW50Iikp\nOwogICAgICAgIHJldHVybiAoX2RlbGV0ZXMgPT0gbnVsbCkgPyBDb2xsZWN0\naW9ucy5FTVBUWV9MSVNUIDogX2RlbGV0ZXM7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgd3JpdGVFeHRlcm5hbChPYmplY3RPdXRwdXQgb3V0KQogICAgICAg\nIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgb3V0LndyaXRlSW50KF9w\nYXlsb2FkKTsKICAgICAgICBvdXQud3JpdGVPYmplY3QoX2FkZENsYXNzZXMp\nOwogICAgICAgIGlmIChfcGF5bG9hZCA9PSBQQVlMT0FEX09JRFNfV0lUSF9B\nRERTKQogICAgICAgICAgICBvdXQud3JpdGVPYmplY3QoX2FkZElkcyk7CiAg\nICAgICAgb3V0LndyaXRlT2JqZWN0KF91cGRhdGVzKTsKICAgICAgICBvdXQu\nd3JpdGVPYmplY3QoX2RlbGV0ZXMpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHJlYWRFeHRlcm5hbChPYmplY3RJbnB1dCBpbikKICAgICAgICB0aHJvd3Mg\nSU9FeGNlcHRpb24gewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIF9wYXls\nb2FkID0gaW4ucmVhZEludCgpOwogICAgICAgICAgICBfYWRkQ2xhc3NlcyA9\nIChDb2xsZWN0aW9uKSBpbi5yZWFkT2JqZWN0KCk7CiAgICAgICAgICAgIGlm\nIChfcGF5bG9hZCA9PSBQQVlMT0FEX09JRFNfV0lUSF9BRERTKQogICAgICAg\nICAgICAgICAgX2FkZElkcyA9IChDb2xsZWN0aW9uKSBpbi5yZWFkT2JqZWN0\nKCk7CiAgICAgICAgICAgIF91cGRhdGVzID0gKENvbGxlY3Rpb24pIGluLnJl\nYWRPYmplY3QoKTsKICAgICAgICAgICAgX2RlbGV0ZXMgPSAoQ29sbGVjdGlv\nbikgaW4ucmVhZE9iamVjdCgpOwogICAgICAgIH0gY2F0Y2ggKENsYXNzTm90\nRm91bmRFeGNlcHRpb24gY25mZSkgewogICAgICAgICAgICAvLyAjIyMgZG8g\nc29tZXRoaW5nCgkJfQoJfQp9Cg==\n","encoding":"base64"}

