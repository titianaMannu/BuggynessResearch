{"sha":"675269083947bc8a1b9ca7ed0e3282ae49787431","node_id":"MDQ6QmxvYjIwNjM2NDo2NzUyNjkwODM5NDdiYzhhMWI5Y2E3ZWQwZTMyODJhZTQ5Nzg3NDMx","size":4474,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/675269083947bc8a1b9ca7ed0e3282ae49787431","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5ldmVudDsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGli\nLnV0aWwuY29uY3VycmVudC5BYnN0cmFjdENvbmN1cnJlbnRFdmVudE1hbmFn\nZXI7CgovKioKICogTWFuYWdlciB0aGF0IGNhbiBiZSB1c2VkIHRvIHRyYWNr\nIGFuZCBub3RpZnkgdHJhbnNhY3Rpb24gbGlzdGVuZXJzCiAqIG9mIHRyYW5z\nYWN0aW9uLXJlbGF0ZWQgZXZlbnRzLgogKgogKiBAYXV0aG9yIFBhdHJpY2sg\nTGluc2tleQogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKiBAc2luY2UgMC4zLjAK\nICogQG5vamF2YWRvYwogKi8KcHVibGljIGNsYXNzIFRyYW5zYWN0aW9uRXZl\nbnRNYW5hZ2VyCiAgICBleHRlbmRzIEFic3RyYWN0Q29uY3VycmVudEV2ZW50\nTWFuYWdlciB7CgogICAgcHJpdmF0ZSBpbnQgX2JlZ2luID0gMDsKICAgIHBy\naXZhdGUgaW50IF9mbHVzaCA9IDA7CiAgICBwcml2YXRlIGludCBfZW5kID0g\nMDsKCiAgICBwdWJsaWMgdm9pZCBhZGRMaXN0ZW5lcihPYmplY3QgbGlzdGVu\nZXIpIHsKICAgICAgICBzdXBlci5hZGRMaXN0ZW5lcihsaXN0ZW5lcik7CiAg\nICAgICAgaWYgKGxpc3RlbmVyIGluc3RhbmNlb2YgQmVnaW5UcmFuc2FjdGlv\nbkxpc3RlbmVyKQogICAgICAgICAgICBfYmVnaW4rKzsKICAgICAgICBpZiAo\nbGlzdGVuZXIgaW5zdGFuY2VvZiBGbHVzaFRyYW5zYWN0aW9uTGlzdGVuZXIp\nCiAgICAgICAgICAgIF9mbHVzaCsrOwogICAgICAgIGlmIChsaXN0ZW5lciBp\nbnN0YW5jZW9mIEVuZFRyYW5zYWN0aW9uTGlzdGVuZXIpCiAgICAgICAgICAg\nIF9lbmQrKzsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiByZW1vdmVMaXN0\nZW5lcihPYmplY3QgbGlzdGVuZXIpIHsKICAgICAgICBpZiAoIXN1cGVyLnJl\nbW92ZUxpc3RlbmVyKGxpc3RlbmVyKSkKICAgICAgICAgICAgcmV0dXJuIGZh\nbHNlOwoKICAgICAgICBpZiAobGlzdGVuZXIgaW5zdGFuY2VvZiBCZWdpblRy\nYW5zYWN0aW9uTGlzdGVuZXIpCiAgICAgICAgICAgIF9iZWdpbi0tOwogICAg\nICAgIGlmIChsaXN0ZW5lciBpbnN0YW5jZW9mIEZsdXNoVHJhbnNhY3Rpb25M\naXN0ZW5lcikKICAgICAgICAgICAgX2ZsdXNoLS07CiAgICAgICAgaWYgKGxp\nc3RlbmVyIGluc3RhbmNlb2YgRW5kVHJhbnNhY3Rpb25MaXN0ZW5lcikKICAg\nICAgICAgICAgX2VuZC0tOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoK\nICAgIC8qKgogICAgICogV2hldGhlciB0aGVyZSBhcmUgYW55IGJlZ2luIHRy\nYW5zYWN0aW9uIGxpc3RlbmVycy4KICAgICAqLwogICAgcHVibGljIGJvb2xl\nYW4gaGFzQmVnaW5MaXN0ZW5lcnMoKSB7CiAgICAgICAgcmV0dXJuIF9iZWdp\nbiA+IDA7CiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRoZXJlIGFy\nZSBhbnkgZmx1c2ggdHJhbnNhY3Rpb24gbGlzdGVuZXJzLgogICAgICovCiAg\nICBwdWJsaWMgYm9vbGVhbiBoYXNGbHVzaExpc3RlbmVycygpIHsKICAgICAg\nICByZXR1cm4gX2ZsdXNoID4gMDsKICAgIH0KCiAgICAvKioKICAgICAqIFdo\nZXRoZXIgdGhlcmUgYXJlIGFueSBlbmQgdHJhbnNhY3Rpb24gbGlzdGVuZXJz\nLgogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBoYXNFbmRMaXN0ZW5lcnMo\nKSB7CiAgICAgICAgcmV0dXJuIF9lbmQgPiAwOwogICAgfQoKICAgIC8qKgog\nICAgICogRmlyZSB0aGUgZ2l2ZW4gZXZlbnQgdG8gYWxsIHJlZ2lzdGVyZWQg\nbGlzdGVuZXJzLgogICAgICovCiAgICBwcm90ZWN0ZWQgdm9pZCBmaXJlRXZl\nbnQoT2JqZWN0IGV2ZW50LCBPYmplY3QgbGlzdGVuZXIpIHsKICAgICAgICBU\ncmFuc2FjdGlvbkV2ZW50IGV2ID0gKFRyYW5zYWN0aW9uRXZlbnQpIGV2ZW50\nOwogICAgICAgIHN3aXRjaCAoZXYuZ2V0VHlwZSgpKSB7CiAgICAgICAgICAg\nIGNhc2UgVHJhbnNhY3Rpb25FdmVudC5BRlRFUl9CRUdJTjoKICAgICAgICAg\nICAgICAgIGlmIChsaXN0ZW5lciBpbnN0YW5jZW9mIEJlZ2luVHJhbnNhY3Rp\nb25MaXN0ZW5lcikKICAgICAgICAgICAgICAgICAgICAoKEJlZ2luVHJhbnNh\nY3Rpb25MaXN0ZW5lcikgbGlzdGVuZXIpLmFmdGVyQmVnaW4oZXYpOwogICAg\nICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgVHJhbnNhY3Rp\nb25FdmVudC5CRUZPUkVfRkxVU0g6CiAgICAgICAgICAgICAgICBpZiAobGlz\ndGVuZXIgaW5zdGFuY2VvZiBGbHVzaFRyYW5zYWN0aW9uTGlzdGVuZXIpCiAg\nICAgICAgICAgICAgICAgICAgKChGbHVzaFRyYW5zYWN0aW9uTGlzdGVuZXIp\nIGxpc3RlbmVyKS5iZWZvcmVGbHVzaChldik7CiAgICAgICAgICAgICAgICBi\ncmVhazsKICAgICAgICAgICAgY2FzZSBUcmFuc2FjdGlvbkV2ZW50LkFGVEVS\nX0ZMVVNIOgogICAgICAgICAgICAgICAgaWYgKGxpc3RlbmVyIGluc3RhbmNl\nb2YgRmx1c2hUcmFuc2FjdGlvbkxpc3RlbmVyKQogICAgICAgICAgICAgICAg\nICAgICgoRmx1c2hUcmFuc2FjdGlvbkxpc3RlbmVyKSBsaXN0ZW5lcikuYWZ0\nZXJGbHVzaChldik7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAg\nICAgY2FzZSBUcmFuc2FjdGlvbkV2ZW50LkJFRk9SRV9DT01NSVQ6CiAgICAg\nICAgICAgICAgICBpZiAobGlzdGVuZXIgaW5zdGFuY2VvZiBFbmRUcmFuc2Fj\ndGlvbkxpc3RlbmVyKQogICAgICAgICAgICAgICAgICAgICgoRW5kVHJhbnNh\nY3Rpb25MaXN0ZW5lcikgbGlzdGVuZXIpLmJlZm9yZUNvbW1pdChldik7CiAg\nICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBUcmFuc2Fj\ndGlvbkV2ZW50LkFGVEVSX0NPTU1JVDoKICAgICAgICAgICAgICAgIGlmIChs\naXN0ZW5lciBpbnN0YW5jZW9mIEVuZFRyYW5zYWN0aW9uTGlzdGVuZXIpCiAg\nICAgICAgICAgICAgICAgICAgKChFbmRUcmFuc2FjdGlvbkxpc3RlbmVyKSBs\naXN0ZW5lcikuYWZ0ZXJDb21taXQoZXYpOwogICAgICAgICAgICAgICAgYnJl\nYWs7CiAgICAgICAgICAgIGNhc2UgVHJhbnNhY3Rpb25FdmVudC5BRlRFUl9S\nT0xMQkFDSzoKICAgICAgICAgICAgICAgIGlmIChsaXN0ZW5lciBpbnN0YW5j\nZW9mIEVuZFRyYW5zYWN0aW9uTGlzdGVuZXIpCiAgICAgICAgICAgICAgICAg\nICAgKChFbmRUcmFuc2FjdGlvbkxpc3RlbmVyKSBsaXN0ZW5lcikuYWZ0ZXJS\nb2xsYmFjayhldik7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAg\nICAgY2FzZSBUcmFuc2FjdGlvbkV2ZW50LkFGVEVSX1NUQVRFX1RSQU5TSVRJ\nT05TOgogICAgICAgICAgICAgICAgaWYgKGxpc3RlbmVyIGluc3RhbmNlb2Yg\nRW5kVHJhbnNhY3Rpb25MaXN0ZW5lcikKICAgICAgICAgICAgICAgICAgICAo\nKEVuZFRyYW5zYWN0aW9uTGlzdGVuZXIpIGxpc3RlbmVyKQogICAgICAgICAg\nICAgICAgICAgICAgICAuYWZ0ZXJTdGF0ZVRyYW5zaXRpb25zKGV2KTsKICAg\nICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIFRyYW5zYWN0\naW9uRXZlbnQuQUZURVJfQ09NTUlUX0NPTVBMRVRFOgogICAgICAgICAgICAg\nICAgaWYgKGxpc3RlbmVyIGluc3RhbmNlb2YgRW5kVHJhbnNhY3Rpb25MaXN0\nZW5lcikKICAgICAgICAgICAgICAgICAgICAoKEVuZFRyYW5zYWN0aW9uTGlz\ndGVuZXIpIGxpc3RlbmVyKS5hZnRlckNvbW1pdENvbXBsZXRlKGV2KTsKICAg\nICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIFRyYW5zYWN0\naW9uRXZlbnQuQUZURVJfUk9MTEJBQ0tfQ09NUExFVEU6CiAgICAgICAgICAg\nICAgICBpZiAobGlzdGVuZXIgaW5zdGFuY2VvZiBFbmRUcmFuc2FjdGlvbkxp\nc3RlbmVyKQogICAgICAgICAgICAgICAgICAgICgoRW5kVHJhbnNhY3Rpb25M\naXN0ZW5lcikgbGlzdGVuZXIpCiAgICAgICAgICAgICAgICAgICAgICAgIC5h\nZnRlclJvbGxiYWNrQ29tcGxldGUoZXYpOwogICAgICAgICAgICAgICAgYnJl\nYWs7CiAgICAgICAgfQoJfQp9Cg==\n","encoding":"base64"}

