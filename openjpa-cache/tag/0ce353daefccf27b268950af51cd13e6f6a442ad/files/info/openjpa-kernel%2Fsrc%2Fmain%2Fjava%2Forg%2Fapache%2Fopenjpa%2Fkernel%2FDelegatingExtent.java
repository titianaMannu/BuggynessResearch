{"sha":"3d9081f906479b32bcc5afe9b2356f4d0937374a","node_id":"MDQ6QmxvYjIwNjM2NDozZDkwODFmOTA2NDc5YjMyYmNjNWFmZTliMjM1NmY0ZDA5MzczNzRh","size":4596,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/3d9081f906479b32bcc5afe9b2356f4d0937374a","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5rZXJuZWw7CgppbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9yOwpp\nbXBvcnQgamF2YS51dGlsLkxpc3Q7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLnV0aWwuUnVudGltZUV4Y2VwdGlvblRyYW5zbGF0b3I7CgovLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8KLy8gTk9URTogd2hlbiBhZGRpbmcgYSBwdWJsaWMgQVBJ\nIG1ldGhvZCwgYmUgc3VyZSB0byBhZGQgaXQgdG8gCi8vIEpETyBhbmQgSlBB\nIGZhY2FkZXMhCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKLyoqCiAqIERlbGVnYXRp\nbmcgZXh0ZW50IHRoYXQgYWxzbyBjYW4gcGVyZm9ybSBleGNlcHRpb24gdHJh\nbnNsYXRpb24gZm9yIHVzZQogKiBpbiBmYWNhZGVzLgogKgogKiBAc2luY2Ug\nMC40LjAKICogQGF1dGhvciBBYmUgV2hpdGUKICogQG5vamF2YWRvYwogKi8K\ncHVibGljIGNsYXNzIERlbGVnYXRpbmdFeHRlbnQKICAgIGltcGxlbWVudHMg\nRXh0ZW50IHsKCiAgICBwcml2YXRlIGZpbmFsIEV4dGVudCBfZXh0ZW50Owog\nICAgcHJpdmF0ZSBmaW5hbCBEZWxlZ2F0aW5nRXh0ZW50IF9kZWw7CiAgICBw\ncml2YXRlIGZpbmFsIFJ1bnRpbWVFeGNlcHRpb25UcmFuc2xhdG9yIF90cmFu\nczsKCiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yOyBzdXBwbHkgZGVsZWdh\ndGUuCiAgICAgKi8KICAgIHB1YmxpYyBEZWxlZ2F0aW5nRXh0ZW50KEV4dGVu\ndCBleHRlbnQpIHsKICAgICAgICB0aGlzKGV4dGVudCwgbnVsbCk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3Rvcjsgc3VwcGx5IGRlbGVnYXRl\nIGFuZCBleGNlcHRpb24gdHJhbnNsYXRvci4KICAgICAqLwogICAgcHVibGlj\nIERlbGVnYXRpbmdFeHRlbnQoRXh0ZW50IGV4dGVudCwgUnVudGltZUV4Y2Vw\ndGlvblRyYW5zbGF0b3IgdHJhbnMpIHsKICAgICAgICBfZXh0ZW50ID0gZXh0\nZW50OwogICAgICAgIGlmIChleHRlbnQgaW5zdGFuY2VvZiBEZWxlZ2F0aW5n\nRXh0ZW50KQogICAgICAgICAgICBfZGVsID0gKERlbGVnYXRpbmdFeHRlbnQp\nIGV4dGVudDsKICAgICAgICBlbHNlCiAgICAgICAgICAgIF9kZWwgPSBudWxs\nOwogICAgICAgIF90cmFucyA9IHRyYW5zOwogICAgfQoKICAgIC8qKgogICAg\nICogUmV0dXJuIHRoZSBkaXJlY3QgZGVsZWdhdGUuCiAgICAgKi8KICAgIHB1\nYmxpYyBFeHRlbnQgZ2V0RGVsZWdhdGUoKSB7CiAgICAgICAgcmV0dXJuIF9l\neHRlbnQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIG5hdGl2\nZSBkZWxlZ2F0ZS4KICAgICAqLwogICAgcHVibGljIEV4dGVudCBnZXRJbm5l\ncm1vc3REZWxlZ2F0ZSgpIHsKICAgICAgICByZXR1cm4gKF9kZWwgPT0gbnVs\nbCkgPyBfZXh0ZW50IDogX2RlbC5nZXRJbm5lcm1vc3REZWxlZ2F0ZSgpOwog\nICAgfQoKICAgIHB1YmxpYyBpbnQgaGFzaENvZGUoKSB7CiAgICAgICAgcmV0\ndXJuIGdldElubmVybW9zdERlbGVnYXRlKCkuaGFzaENvZGUoKTsKICAgIH0K\nCiAgICBwdWJsaWMgYm9vbGVhbiBlcXVhbHMoT2JqZWN0IG90aGVyKSB7CiAg\nICAgICAgaWYgKG90aGVyID09IHRoaXMpCiAgICAgICAgICAgIHJldHVybiB0\ncnVlOwogICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIERlbGVnYXRpbmdF\neHRlbnQpCiAgICAgICAgICAgIG90aGVyID0gKChEZWxlZ2F0aW5nRXh0ZW50\nKSBvdGhlcikuZ2V0SW5uZXJtb3N0RGVsZWdhdGUoKTsKICAgICAgICByZXR1\ncm4gZ2V0SW5uZXJtb3N0RGVsZWdhdGUoKS5lcXVhbHMob3RoZXIpOwogICAg\nfQoKICAgIC8qKgogICAgICogVHJhbnNsYXRlIHRoZSBPcGVuSlBBIGV4Y2Vw\ndGlvbi4KICAgICAqLwogICAgcHJvdGVjdGVkIFJ1bnRpbWVFeGNlcHRpb24g\ndHJhbnNsYXRlKFJ1bnRpbWVFeGNlcHRpb24gcmUpIHsKICAgICAgICByZXR1\ncm4gKF90cmFucyA9PSBudWxsKSA/IHJlIDogX3RyYW5zLnRyYW5zbGF0ZShy\nZSk7CiAgICB9CgogICAgcHVibGljIENsYXNzIGdldEVsZW1lbnRUeXBlKCkg\newogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBfZXh0ZW50Lmdl\ndEVsZW1lbnRUeXBlKCk7CiAgICAgICAgfSBjYXRjaCAoUnVudGltZUV4Y2Vw\ndGlvbiByZSkgewogICAgICAgICAgICB0aHJvdyB0cmFuc2xhdGUocmUpOwog\nICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBoYXNTdWJjbGFz\nc2VzKCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBfZXh0\nZW50Lmhhc1N1YmNsYXNzZXMoKTsKICAgICAgICB9IGNhdGNoIChSdW50aW1l\nRXhjZXB0aW9uIHJlKSB7CiAgICAgICAgICAgIHRocm93IHRyYW5zbGF0ZShy\nZSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBCcm9rZXIgZ2V0QnJv\na2VyKCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBfZXh0\nZW50LmdldEJyb2tlcigpOwogICAgICAgIH0gY2F0Y2ggKFJ1bnRpbWVFeGNl\ncHRpb24gcmUpIHsKICAgICAgICAgICAgdGhyb3cgdHJhbnNsYXRlKHJlKTsK\nICAgICAgICB9CiAgICB9CgogICAgcHVibGljIEZldGNoQ29uZmlndXJhdGlv\nbiBnZXRGZXRjaENvbmZpZ3VyYXRpb24oKSB7CiAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgcmV0dXJuIF9leHRlbnQuZ2V0RmV0Y2hDb25maWd1cmF0aW9u\nKCk7CiAgICAgICAgfSBjYXRjaCAoUnVudGltZUV4Y2VwdGlvbiByZSkgewog\nICAgICAgICAgICB0aHJvdyB0cmFuc2xhdGUocmUpOwogICAgICAgIH0KICAg\nIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBnZXRJZ25vcmVDaGFuZ2VzKCkgewog\nICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBfZXh0ZW50LmdldEln\nbm9yZUNoYW5nZXMoKTsKICAgICAgICB9IGNhdGNoIChSdW50aW1lRXhjZXB0\naW9uIHJlKSB7CiAgICAgICAgICAgIHRocm93IHRyYW5zbGF0ZShyZSk7CiAg\nICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldElnbm9yZUNoYW5n\nZXMoYm9vbGVhbiBpZ25vcmVDYWNoZSkgewogICAgICAgIHRyeSB7CiAgICAg\nICAgICAgIF9leHRlbnQuc2V0SWdub3JlQ2hhbmdlcyhpZ25vcmVDYWNoZSk7\nCiAgICAgICAgfSBjYXRjaCAoUnVudGltZUV4Y2VwdGlvbiByZSkgewogICAg\nICAgICAgICB0aHJvdyB0cmFuc2xhdGUocmUpOwogICAgICAgIH0KICAgIH0K\nCiAgICBwdWJsaWMgTGlzdCBsaXN0KCkgewogICAgICAgIHRyeSB7CiAgICAg\nICAgICAgIHJldHVybiBfZXh0ZW50Lmxpc3QoKTsKICAgICAgICB9IGNhdGNo\nIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAgICAgIHRocm93IHRy\nYW5zbGF0ZShyZSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBJdGVy\nYXRvciBpdGVyYXRvcigpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBy\nZXR1cm4gX2V4dGVudC5pdGVyYXRvcigpOwogICAgICAgIH0gY2F0Y2ggKFJ1\nbnRpbWVFeGNlcHRpb24gcmUpIHsKICAgICAgICAgICAgdGhyb3cgdHJhbnNs\nYXRlKHJlKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZvaWQgY2xv\nc2VBbGwoKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgX2V4dGVudC5j\nbG9zZUFsbCgpOwogICAgICAgIH0gY2F0Y2ggKFJ1bnRpbWVFeGNlcHRpb24g\ncmUpIHsKICAgICAgICAgICAgdGhyb3cgdHJhbnNsYXRlKHJlKTsKICAgICAg\nICB9CiAgICB9CgogICAgcHVibGljIHZvaWQgbG9jaygpIHsKICAgICAgICB0\ncnkgewogICAgICAgICAgICBfZXh0ZW50LmxvY2soKTsKICAgICAgICB9IGNh\ndGNoIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAgICAgIHRocm93\nIHRyYW5zbGF0ZShyZSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHVubG9jaygpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBfZXh0\nZW50LnVubG9jaygpOwogICAgICAgIH0gY2F0Y2ggKFJ1bnRpbWVFeGNlcHRp\nb24gcmUpIHsKICAgICAgICAgICAgdGhyb3cgdHJhbnNsYXRlKHJlKTsKCQl9\nCgl9Cn0K\n","encoding":"base64"}

