{"sha":"cb3a2296201da143f99fb16fc013dccb984d2094","node_id":"MDQ6QmxvYjIwNjM2NDpjYjNhMjI5NjIwMWRhMTQzZjk5ZmIxNmZjMDEzZGNjYjk4NGQyMDk0","size":10112,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/cb3a2296201da143f99fb16fc013dccb984d2094","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5rZXJuZWw7CgppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsK\naW1wb3J0IGphdmEudXRpbC5JdGVyYXRvcjsKaW1wb3J0IGphdmEudXRpbC5M\naXN0OwppbXBvcnQgamF2YS51dGlsLk5vU3VjaEVsZW1lbnRFeGNlcHRpb247\nCgppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvbGxlY3Rpb25zLlByZWRp\nY2F0ZTsKaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2xsZWN0aW9ucy5p\ndGVyYXRvcnMuRmlsdGVySXRlcmF0b3I7CmltcG9ydCBvcmcuYXBhY2hlLmNv\nbW1vbnMuY29sbGVjdGlvbnMuaXRlcmF0b3JzLkl0ZXJhdG9yQ2hhaW47Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnJvcC5SZXN1bHRPYmplY3RQ\ncm92aWRlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIucm9wLlJl\nc3VsdE9iamVjdFByb3ZpZGVySXRlcmF0b3I7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEubGliLnV0aWwuQ2xvc2VhYmxlOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmxpYi51dGlsLlJlZmVyZW5jZUhhc2hTZXQ7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuY29uY3VycmVudC5SZWVudHJh\nbnRMb2NrOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuQ2xhc3NN\nZXRhRGF0YTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLk1ldGFE\nYXRhUmVwb3NpdG9yeTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGls\nLkdlbmVyYWxFeGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\ndXRpbC5JbXBsSGVscGVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0\naWwuT3BlbkpQQUV4Y2VwdGlvbjsKCi8qKgogKiBSZXByZXNlbnRhdGlvbiBv\nZiBhbGwgbWVtYmVycyBvZiBhIHBlcnNpc3RlbnQgY2xhc3MuCiAqCiAqIEBh\ndXRob3IgQWJlIFdoaXRlCiAqIEBhdXRob3IgUGF0cmljayBMaW5za2V5CiAq\nIEBub2phdmFkb2MKICovCnB1YmxpYyBjbGFzcyBFeHRlbnRJbXBsCiAgICBp\nbXBsZW1lbnRzIEV4dGVudCB7CgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwg\nQ2xhc3NNZXRhRGF0YVtdIEVNUFRZX01FVEFTID0gbmV3IENsYXNzTWV0YURh\ndGFbMF07CgogICAgcHJpdmF0ZSBmaW5hbCBCcm9rZXIgX2Jyb2tlcjsKICAg\nIHByaXZhdGUgZmluYWwgQ2xhc3MgX3R5cGU7CiAgICBwcml2YXRlIGZpbmFs\nIGJvb2xlYW4gX3N1YnM7CiAgICBwcml2YXRlIGZpbmFsIEZldGNoQ29uZmln\ndXJhdGlvbiBfZmM7CiAgICBwcml2YXRlIGZpbmFsIFJlZW50cmFudExvY2sg\nX2xvY2s7CiAgICBwcml2YXRlIGJvb2xlYW4gX2lnbm9yZSA9IGZhbHNlOwoK\nICAgIC8vIHNldCBvZiBvcGVuIGl0ZXJhdG9ycwogICAgcHJpdmF0ZSBSZWZl\ncmVuY2VIYXNoU2V0IF9vcGVuSXRycyA9IG51bGw7CgogICAgLyoqCiAgICAg\nKiBDb25zdHJ1Y3Rvci4KICAgICAqCiAgICAgKiBAcGFyYW0gYnJva2VyIHRo\nZSBvd25pbmcgYnJva2VyCiAgICAgKiBAcGFyYW0gdHlwZSB0aGUgY2FuZGlk\nYXRlIGNsYXNzCiAgICAgKiBAcGFyYW0gc3VicyB3aGV0aGVyIHN1YmNsYXNz\nZXMgYXJlIGluY2x1ZGVkIGluIHRoZSBleHRlbnQKICAgICAqLwogICAgRXh0\nZW50SW1wbChCcm9rZXIgYnJva2VyLCBDbGFzcyB0eXBlLCBib29sZWFuIHN1\nYnMsCiAgICAgICAgRmV0Y2hDb25maWd1cmF0aW9uIGZldGNoKSB7CiAgICAg\nICAgX2Jyb2tlciA9IGJyb2tlcjsKICAgICAgICBfdHlwZSA9IHR5cGU7CiAg\nICAgICAgX3N1YnMgPSBzdWJzOwogICAgICAgIGlmIChmZXRjaCAhPSBudWxs\nKQogICAgICAgICAgICBfZmMgPSBmZXRjaDsKICAgICAgICBlbHNlCiAgICAg\nICAgICAgIF9mYyA9IChGZXRjaENvbmZpZ3VyYXRpb24pIGJyb2tlci5nZXRG\nZXRjaENvbmZpZ3VyYXRpb24oKS5jbG9uZSgpOwogICAgICAgIF9pZ25vcmUg\nPSBicm9rZXIuZ2V0SWdub3JlQ2hhbmdlcygpOwogICAgICAgIGlmIChicm9r\nZXIuZ2V0TXVsdGl0aHJlYWRlZCgpKQogICAgICAgICAgICBfbG9jayA9IG5l\ndyBSZWVudHJhbnRMb2NrKCk7CiAgICAgICAgZWxzZQogICAgICAgICAgICBf\nbG9jayA9IG51bGw7CiAgICB9CgogICAgcHVibGljIEZldGNoQ29uZmlndXJh\ndGlvbiBnZXRGZXRjaENvbmZpZ3VyYXRpb24oKSB7CiAgICAgICAgcmV0dXJu\nIF9mYzsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBnZXRJZ25vcmVDaGFu\nZ2VzKCkgewogICAgICAgIHJldHVybiBfaWdub3JlOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHNldElnbm9yZUNoYW5nZXMoYm9vbGVhbiBpZ25vcmVDaGFu\nZ2VzKSB7CiAgICAgICAgX2lnbm9yZSA9IGlnbm9yZUNoYW5nZXM7CiAgICB9\nCgogICAgcHVibGljIExpc3QgbGlzdCgpIHsKICAgICAgICBMaXN0IGxpc3Qg\nPSBuZXcgQXJyYXlMaXN0KCk7CiAgICAgICAgSXRlcmF0b3IgaXRyID0gaXRl\ncmF0b3IoKTsKICAgICAgICB0cnkgewogICAgICAgICAgICB3aGlsZSAoaXRy\nLmhhc05leHQoKSkKICAgICAgICAgICAgICAgIGxpc3QuYWRkKGl0ci5uZXh0\nKCkpOwogICAgICAgICAgICByZXR1cm4gbGlzdDsKICAgICAgICB9IGZpbmFs\nbHkgewogICAgICAgICAgICBJbXBsSGVscGVyLmNsb3NlKGl0cik7CiAgICAg\nICAgfQogICAgfQoKICAgIHB1YmxpYyBJdGVyYXRvciBpdGVyYXRvcigpIHsK\nICAgICAgICBfYnJva2VyLmFzc2VydE5vbnRyYW5zYWN0aW9uYWxSZWFkKCk7\nCiAgICAgICAgQ2xvc2VhYmxlSXRlcmF0b3IgY2l0ciA9IG51bGw7CiAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgLy8gY3JlYXRlIGFuIGl0ZXJhdG9yIGNo\nYWluOyBhZGQgcG5ldyBvYmplY3RzIGlmIHRyYW5zYWN0aW9uYWwKICAgICAg\nICAgICAgQ2xvc2VhYmxlSXRlcmF0b3JDaGFpbiBjaGFpbiA9IG5ldyBDbG9z\nZWFibGVJdGVyYXRvckNoYWluKCk7CiAgICAgICAgICAgIGJvb2xlYW4gdHJh\nbnMgPSAhX2lnbm9yZSAmJiBfYnJva2VyLmlzQWN0aXZlKCk7CiAgICAgICAg\nICAgIGlmICh0cmFucykKICAgICAgICAgICAgICAgIGNoYWluLmFkZEl0ZXJh\ndG9yKG5ldyBGaWx0ZXJOZXdJdGVyYXRvcigpKTsKCiAgICAgICAgICAgIC8v\nIGFkZCBkYXRhYmFzZSBpdGVyYXRvcnMgZm9yIGVhY2ggaW1wbGVtZW50aW5n\nIGNsYXNzCiAgICAgICAgICAgIE1ldGFEYXRhUmVwb3NpdG9yeSByZXBvcyA9\nIF9icm9rZXIuZ2V0Q29uZmlndXJhdGlvbigpLgogICAgICAgICAgICAgICAg\nZ2V0TWV0YURhdGFSZXBvc2l0b3J5SW5zdGFuY2UoKTsKICAgICAgICAgICAg\nQ2xhc3NNZXRhRGF0YSBtZXRhID0gcmVwb3MuZ2V0TWV0YURhdGEoX3R5cGUs\nCiAgICAgICAgICAgICAgICBfYnJva2VyLmdldENsYXNzTG9hZGVyKCksIGZh\nbHNlKTsKCiAgICAgICAgICAgIENsYXNzTWV0YURhdGFbXSBtZXRhczsKICAg\nICAgICAgICAgaWYgKG1ldGEgIT0gbnVsbCAmJiAoIV9zdWJzIHx8ICFtZXRh\nLmlzTWFuYWdlZEludGVyZmFjZSgpKQogICAgICAgICAgICAgICAgJiYgKG1l\ndGEuaXNNYXBwZWQoKSB8fCAoX3N1YnMKICAgICAgICAgICAgICAgICYmIG1l\ndGEuZ2V0TWFwcGVkUENTdWJjbGFzc01ldGFEYXRhcygpLmxlbmd0aCA+IDAp\nKSkKICAgICAgICAgICAgICAgIG1ldGFzID0gbmV3IENsYXNzTWV0YURhdGFb\nXXsgbWV0YSB9OwogICAgICAgICAgICBlbHNlIGlmIChfc3VicyAmJiAobWV0\nYSA9PSBudWxsIHx8IG1ldGEuaXNNYW5hZ2VkSW50ZXJmYWNlKCkpKQogICAg\nICAgICAgICAgICAgbWV0YXMgPSByZXBvcy5nZXRJbXBsZW1lbnRvck1ldGFE\nYXRhcyhfdHlwZSwKICAgICAgICAgICAgICAgICAgICBfYnJva2VyLmdldENs\nYXNzTG9hZGVyKCksIGZhbHNlKTsKICAgICAgICAgICAgZWxzZQogICAgICAg\nICAgICAgICAgbWV0YXMgPSBFTVBUWV9NRVRBUzsKCiAgICAgICAgICAgIFJl\nc3VsdE9iamVjdFByb3ZpZGVyIHJvcDsKICAgICAgICAgICAgZm9yIChpbnQg\naSA9IDA7IGkgPCBtZXRhcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAg\nICAgcm9wID0gX2Jyb2tlci5nZXRTdG9yZU1hbmFnZXIoKS5leGVjdXRlRXh0\nZW50KG1ldGFzW2ldLAogICAgICAgICAgICAgICAgICAgIF9zdWJzLCBfZmMp\nOwogICAgICAgICAgICAgICAgaWYgKHJvcCAhPSBudWxsKQogICAgICAgICAg\nICAgICAgICAgIGNoYWluLmFkZEl0ZXJhdG9yKG5ldyBSZXN1bHRPYmplY3RQ\ncm92aWRlckl0ZXJhdG9yKHJvcCkpOwogICAgICAgICAgICB9CgogICAgICAg\nICAgICAvLyBmaWx0ZXIgZGVsZXRlZCBvYmplY3RzIGlmIHRyYW5zYWN0aW9u\nYWwKICAgICAgICAgICAgaWYgKHRyYW5zKQogICAgICAgICAgICAgICAgY2l0\nciA9IG5ldyBGaWx0ZXJEZWxldGVkSXRlcmF0b3IoY2hhaW4pOwogICAgICAg\nICAgICBlbHNlCiAgICAgICAgICAgICAgICBjaXRyID0gY2hhaW47CiAgICAg\nICAgICAgIGNpdHIuc2V0UmVtb3ZlT25DbG9zZSh0aGlzKTsKICAgICAgICB9\nIGNhdGNoIChPcGVuSlBBRXhjZXB0aW9uIGtlKSB7CiAgICAgICAgICAgIHRo\ncm93IGtlOwogICAgICAgIH0gY2F0Y2ggKFJ1bnRpbWVFeGNlcHRpb24gcmUp\nIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEdlbmVyYWxFeGNlcHRpb24ocmUp\nOwogICAgICAgIH0KCiAgICAgICAgbG9jaygpOwogICAgICAgIHRyeSB7CiAg\nICAgICAgICAgIGlmIChfb3Blbkl0cnMgPT0gbnVsbCkKICAgICAgICAgICAg\nICAgIF9vcGVuSXRycyA9IG5ldyBSZWZlcmVuY2VIYXNoU2V0KFJlZmVyZW5j\nZUhhc2hTZXQuV0VBSyk7CiAgICAgICAgICAgIF9vcGVuSXRycy5hZGQoY2l0\ncik7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgdW5sb2NrKCk7\nCiAgICAgICAgfQogICAgICAgIHJldHVybiBjaXRyOwogICAgfQoKICAgIHB1\nYmxpYyBCcm9rZXIgZ2V0QnJva2VyKCkgewogICAgICAgIHJldHVybiBfYnJv\na2VyOwogICAgfQoKICAgIHB1YmxpYyBDbGFzcyBnZXRFbGVtZW50VHlwZSgp\nIHsKICAgICAgICByZXR1cm4gX3R5cGU7CiAgICB9CgogICAgcHVibGljIGJv\nb2xlYW4gaGFzU3ViY2xhc3NlcygpIHsKICAgICAgICByZXR1cm4gX3N1YnM7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgY2xvc2VBbGwoKSB7CiAgICAgICAg\naWYgKF9vcGVuSXRycyA9PSBudWxsKQogICAgICAgICAgICByZXR1cm47Cgog\nICAgICAgIGxvY2soKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBDbG9z\nZWFibGVJdGVyYXRvciBjaXRyOwogICAgICAgICAgICBmb3IgKEl0ZXJhdG9y\nIGl0ciA9IF9vcGVuSXRycy5pdGVyYXRvcigpOyBpdHIuaGFzTmV4dCgpOykg\newogICAgICAgICAgICAgICAgY2l0ciA9IChDbG9zZWFibGVJdGVyYXRvcikg\naXRyLm5leHQoKTsKICAgICAgICAgICAgICAgIGNpdHIuc2V0UmVtb3ZlT25D\nbG9zZShudWxsKTsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAg\nICAgICAgICAgY2l0ci5jbG9zZSgpOwogICAgICAgICAgICAgICAgfSBjYXRj\naCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgIH0KICAgICAgICAg\nICAgfQogICAgICAgICAgICBfb3Blbkl0cnMuY2xlYXIoKTsKICAgICAgICB9\nIGNhdGNoIChPcGVuSlBBRXhjZXB0aW9uIGtlKSB7CiAgICAgICAgICAgIHRo\ncm93IGtlOwogICAgICAgIH0gY2F0Y2ggKFJ1bnRpbWVFeGNlcHRpb24gcmUp\nIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEdlbmVyYWxFeGNlcHRpb24ocmUp\nOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIHVubG9jaygpOwog\nICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCBsb2NrKCkgewogICAg\nICAgIGlmIChfbG9jayAhPSBudWxsKQogICAgICAgICAgICBfbG9jay5sb2Nr\nKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdW5sb2NrKCkgewogICAgICAg\nIGlmIChfbG9jayAhPSBudWxsKQogICAgICAgICAgICBfbG9jay51bmxvY2so\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIENsb3NlYWJsZSBpdGVyYXRvci4K\nICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgaW50ZXJmYWNlIENsb3NlYWJs\nZUl0ZXJhdG9yCiAgICAgICAgZXh0ZW5kcyBDbG9zZWFibGUsIEl0ZXJhdG9y\nIHsKCiAgICAgICAgLyoqCiAgICAgICAgICogU2V0IHRoZSBleHRlbnQgdG8g\ncmVtb3ZlIHNlbGYgZnJvbSBvbiBjbG9zZS4KICAgICAgICAgKi8KICAgICAg\nICBwdWJsaWMgdm9pZCBzZXRSZW1vdmVPbkNsb3NlKEV4dGVudEltcGwgZXh0\nZW50KTsKICAgIH0KCiAgICAvKioKICAgICAqIENsb3NlYWJsZSB7QGxpbmsg\nSXRlcmF0b3JDaGFpbn0uCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGljIGNs\nYXNzIENsb3NlYWJsZUl0ZXJhdG9yQ2hhaW4KICAgICAgICBleHRlbmRzIEl0\nZXJhdG9yQ2hhaW4KICAgICAgICBpbXBsZW1lbnRzIENsb3NlYWJsZUl0ZXJh\ndG9yIHsKCiAgICAgICAgcHJpdmF0ZSBFeHRlbnRJbXBsIF9leHRlbnQgPSBu\ndWxsOwogICAgICAgIHByaXZhdGUgYm9vbGVhbiBfY2xvc2VkID0gZmFsc2U7\nCgogICAgICAgIHB1YmxpYyBib29sZWFuIGhhc05leHQoKSB7CiAgICAgICAg\nICAgIHJldHVybiAoX2Nsb3NlZCkgPyBmYWxzZSA6IHN1cGVyLmhhc05leHQo\nKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBPYmplY3QgbmV4dCgpIHsK\nICAgICAgICAgICAgaWYgKF9jbG9zZWQpCiAgICAgICAgICAgICAgICB0aHJv\ndyBuZXcgTm9TdWNoRWxlbWVudEV4Y2VwdGlvbigpOwogICAgICAgICAgICBy\nZXR1cm4gc3VwZXIubmV4dCgpOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIHZvaWQgcmVtb3ZlKCkgewogICAgICAgICAgICB0aHJvdyBuZXcgVW5zdXBw\nb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAg\nIHB1YmxpYyB2b2lkIHNldFJlbW92ZU9uQ2xvc2UoRXh0ZW50SW1wbCBleHRl\nbnQpIHsKICAgICAgICAgICAgX2V4dGVudCA9IGV4dGVudDsKICAgICAgICB9\nCgogICAgICAgIHB1YmxpYyB2b2lkIGNsb3NlKCkKICAgICAgICAgICAgdGhy\nb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIGlmIChfZXh0ZW50ICE9IG51\nbGwgJiYgX2V4dGVudC5fb3Blbkl0cnMgIT0gbnVsbCkgewogICAgICAgICAg\nICAgICAgX2V4dGVudC5sb2NrKCk7CiAgICAgICAgICAgICAgICB0cnkgewog\nICAgICAgICAgICAgICAgICAgIF9leHRlbnQuX29wZW5JdHJzLnJlbW92ZSh0\naGlzKTsKICAgICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAg\nICAgICAgICAgX2V4dGVudC51bmxvY2soKTsKICAgICAgICAgICAgICAgIH0K\nICAgICAgICAgICAgfQoKICAgICAgICAgICAgX2Nsb3NlZCA9IHRydWU7CiAg\nICAgICAgICAgIGZvciAoSXRlcmF0b3IgaXRyID0gZ2V0SXRlcmF0b3JzKCku\naXRlcmF0b3IoKTsgaXRyLmhhc05leHQoKTspCiAgICAgICAgICAgICAgICAo\nKENsb3NlYWJsZSkgaXRyLm5leHQoKSkuY2xvc2UoKTsKICAgICAgICB9CiAg\nICB9CgogICAgLyoqCiAgICAgKiB7QGxpbmsgRmlsdGVySXRlcmF0b3J9IHRo\nYXQgc2tpcHMgZGVsZXRlZCBvYmplY3RzLgogICAgICovCiAgICBwcml2YXRl\nIHN0YXRpYyBjbGFzcyBGaWx0ZXJEZWxldGVkSXRlcmF0b3IKICAgICAgICBl\neHRlbmRzIEZpbHRlckl0ZXJhdG9yCiAgICAgICAgaW1wbGVtZW50cyBDbG9z\nZWFibGVJdGVyYXRvciwgUHJlZGljYXRlIHsKCiAgICAgICAgcHJpdmF0ZSBF\neHRlbnRJbXBsIF9leHRlbnQgPSBudWxsOwogICAgICAgIHByaXZhdGUgYm9v\nbGVhbiBfY2xvc2VkID0gZmFsc2U7CgogICAgICAgIHB1YmxpYyBGaWx0ZXJE\nZWxldGVkSXRlcmF0b3IoSXRlcmF0b3IgaXRyKSB7CiAgICAgICAgICAgIHN1\ncGVyKGl0cik7CiAgICAgICAgICAgIHNldFByZWRpY2F0ZSh0aGlzKTsKICAg\nICAgICB9CgogICAgICAgIHB1YmxpYyBib29sZWFuIGhhc05leHQoKSB7CiAg\nICAgICAgICAgIHJldHVybiAoX2Nsb3NlZCkgPyBmYWxzZSA6IHN1cGVyLmhh\nc05leHQoKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBPYmplY3QgbmV4\ndCgpIHsKICAgICAgICAgICAgaWYgKF9jbG9zZWQpCiAgICAgICAgICAgICAg\nICB0aHJvdyBuZXcgTm9TdWNoRWxlbWVudEV4Y2VwdGlvbigpOwogICAgICAg\nICAgICByZXR1cm4gc3VwZXIubmV4dCgpOwogICAgICAgIH0KCiAgICAgICAg\ncHVibGljIHZvaWQgcmVtb3ZlKCkgewogICAgICAgICAgICB0aHJvdyBuZXcg\nVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsKICAgICAgICB9Cgog\nICAgICAgIHB1YmxpYyB2b2lkIHNldFJlbW92ZU9uQ2xvc2UoRXh0ZW50SW1w\nbCBleHRlbnQpIHsKICAgICAgICAgICAgX2V4dGVudCA9IGV4dGVudDsKICAg\nICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIGNsb3NlKCkKICAgICAgICAg\nICAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIGlmIChfZXh0ZW50\nICE9IG51bGwgJiYgX2V4dGVudC5fb3Blbkl0cnMgIT0gbnVsbCkgewogICAg\nICAgICAgICAgICAgX2V4dGVudC5sb2NrKCk7CiAgICAgICAgICAgICAgICB0\ncnkgewogICAgICAgICAgICAgICAgICAgIF9leHRlbnQuX29wZW5JdHJzLnJl\nbW92ZSh0aGlzKTsKICAgICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAg\nICAgICAgICAgICAgICAgX2V4dGVudC51bmxvY2soKTsKICAgICAgICAgICAg\nICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgX2Nsb3NlZCA9IHRy\ndWU7CiAgICAgICAgICAgICgoQ2xvc2VhYmxlKSBnZXRJdGVyYXRvcigpKS5j\nbG9zZSgpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIGJvb2xlYW4gZXZh\nbHVhdGUoT2JqZWN0IG8pIHsKICAgICAgICAgICAgcmV0dXJuICFfZXh0ZW50\nLl9icm9rZXIuaXNEZWxldGVkKG8pOwogICAgICAgIH0KICAgIH0KCiAgICAv\nKioKICAgICAqIEl0ZXJhdG9yIG92ZXIgYWxsIG5ldyBvYmplY3RzIGluIHRo\naXMgZXh0ZW50LiBUaGlzIGl0ZXJhdG9yIGlzIGFsd2F5cwogICAgICogd3Jh\ncHBlZCwgc28gaXQgZG9lc24ndCBuZWVkIHRvIGtlZXAgdHJhY2sgb2Ygd2hl\ndGhlciBpdCdzIGNsb3NlZC4KICAgICAqLwogICAgcHJpdmF0ZSBjbGFzcyBG\naWx0ZXJOZXdJdGVyYXRvcgogICAgICAgIGV4dGVuZHMgRmlsdGVySXRlcmF0\nb3IKICAgICAgICBpbXBsZW1lbnRzIENsb3NlYWJsZSwgUHJlZGljYXRlIHsK\nCiAgICAgICAgcHVibGljIEZpbHRlck5ld0l0ZXJhdG9yKCkgewogICAgICAg\nICAgICBzdXBlcihfYnJva2VyLmdldFRyYW5zYWN0aW9uYWxPYmplY3RzKCku\naXRlcmF0b3IoKSk7CiAgICAgICAgICAgIHNldFByZWRpY2F0ZSh0aGlzKTsK\nICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIGNsb3NlKCkgewogICAg\nICAgIH0KCiAgICAgICAgcHVibGljIGJvb2xlYW4gZXZhbHVhdGUoT2JqZWN0\nIG8pIHsKICAgICAgICAgICAgaWYgKCFfYnJva2VyLmlzTmV3KG8pKQogICAg\nICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoKICAgICAgICAgICAgQ2xhc3Mg\ndHlwZSA9IG8uZ2V0Q2xhc3MoKTsKICAgICAgICAgICAgaWYgKCFfc3VicyAm\nJiB0eXBlICE9IF90eXBlKQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNl\nOwogICAgICAgICAgICBpZiAoX3N1YnMgJiYgIV90eXBlLmlzQXNzaWduYWJs\nZUZyb20odHlwZSkpCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAg\nICAgICAgICAgIHJldHVybiB0cnVlOwoJCX0KCX0KfQo=\n","encoding":"base64"}

