{"sha":"d54e1e815593e73455c1acbe76c997fe90da058e","node_id":"MDQ6QmxvYjIwNjM2NDpkNTRlMWU4MTU1OTNlNzM0NTVjMWFjYmU3NmM5OTdmZTkwZGEwNThl","size":6132,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/d54e1e815593e73455c1acbe76c997fe90da058e","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5rZXJuZWw7CgppbXBvcnQgamF2YXgudHJhbnNhY3Rpb24uTm90\nU3VwcG9ydGVkRXhjZXB0aW9uOwppbXBvcnQgamF2YXgudHJhbnNhY3Rpb24u\nU3RhdHVzOwppbXBvcnQgamF2YXgudHJhbnNhY3Rpb24uU3luY2hyb25pemF0\naW9uOwppbXBvcnQgamF2YXgudHJhbnNhY3Rpb24uU3lzdGVtRXhjZXB0aW9u\nOwppbXBvcnQgamF2YXgudHJhbnNhY3Rpb24uVHJhbnNhY3Rpb247CmltcG9y\ndCBqYXZheC50cmFuc2FjdGlvbi5UcmFuc2FjdGlvbk1hbmFnZXI7CmltcG9y\ndCBqYXZheC50cmFuc2FjdGlvbi54YS5YQVJlc291cmNlOwoKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5lZS5NYW5hZ2VkUnVudGltZTsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6ZXI7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEudXRpbC5JbnRlcm5hbEV4Y2VwdGlvbjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLkludmFsaWRTdGF0ZUV4Y2Vw\ndGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLlN0b3JlRXhj\nZXB0aW9uOwoKLyoqCiAqIFVzZXMgYSBsb2NhbCBpbXBsZW1lbnRhdGlvbiBv\nZiB0aGUge0BsaW5rIFRyYW5zYWN0aW9uTWFuYWdlcn0gaW50ZXJmYWNlLgog\nKiBUaGlzIG1hbmFnZXIgaXMgdmFsaWQgb25seSBmb3IgYSBzaW5nbGUge0Bs\naW5rIEJyb2tlcn0uCiAqIEl0IGR1cGxpY2F0ZXMgbm9uLW1hbmFnZWQgdHJh\nbnNhY3Rpb24gY29udHJvbC4KICoKICogQGF1dGhvciBBYmUgV2hpdGUKICov\nCmNsYXNzIExvY2FsTWFuYWdlZFJ1bnRpbWUKICAgIGltcGxlbWVudHMgTWFu\nYWdlZFJ1bnRpbWUsIFRyYW5zYWN0aW9uTWFuYWdlciwgVHJhbnNhY3Rpb24g\newoKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvY2FsaXplciBfbG9jID0g\nTG9jYWxpemVyLmZvclBhY2thZ2UKICAgICAgICAoTG9jYWxNYW5hZ2VkUnVu\ndGltZS5jbGFzcyk7CgogICAgcHJpdmF0ZSBTeW5jaHJvbml6YXRpb24gX2Jy\nb2tlciA9IG51bGw7CiAgICBwcml2YXRlIFN5bmNocm9uaXphdGlvbiBfZmFj\ndG9yeVN5bmMgPSBudWxsOwogICAgcHJpdmF0ZSBib29sZWFuIF9hY3RpdmUg\nPSBmYWxzZTsKICAgIHByaXZhdGUgYm9vbGVhbiBfcm9sbGJhY2tPbmx5ID0g\nZmFsc2U7CgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3Rvci4gUHJvdmlkZSBi\ncm9rZXIgdGhhdCB3aWxsIGJlIHJlcXVlc3RpbmcgbWFuYWdlZAogICAgICog\ndHJhbnNhY3Rpb24gaW5mby4KICAgICAqLwogICAgcHVibGljIExvY2FsTWFu\nYWdlZFJ1bnRpbWUoQnJva2VyIGJyb2tlcikgewogICAgICAgIF9icm9rZXIg\nPSBicm9rZXI7CiAgICB9CgogICAgcHVibGljIFRyYW5zYWN0aW9uTWFuYWdl\nciBnZXRUcmFuc2FjdGlvbk1hbmFnZXIoKSB7CiAgICAgICAgcmV0dXJuIHRo\naXM7CiAgICB9CgogICAgcHVibGljIHN5bmNocm9uaXplZCB2b2lkIGJlZ2lu\nKCkgewogICAgICAgIGlmIChfYWN0aXZlKQogICAgICAgICAgICB0aHJvdyBu\nZXcgSW52YWxpZFN0YXRlRXhjZXB0aW9uKF9sb2MuZ2V0KCJhY3RpdmUiKSk7\nCiAgICAgICAgX2FjdGl2ZSA9IHRydWU7CiAgICB9CgogICAgcHVibGljIHN5\nbmNocm9uaXplZCB2b2lkIGNvbW1pdCgpIHsKICAgICAgICBpZiAoIV9hY3Rp\ndmUpCiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkU3RhdGVFeGNlcHRp\nb24oX2xvYy5nZXQoIm5vdC1hY3RpdmUiKSk7CgogICAgICAgIC8vIHRyeSB0\nbyBpbnZva2UgYmVmb3JlIGNvbXBsZXRpb24gaW4gcHJlcGFyYXRpb24gZm9y\nIGNvbW1pdAogICAgICAgIFJ1bnRpbWVFeGNlcHRpb24gZXJyID0gbnVsbDsK\nICAgICAgICBpZiAoIV9yb2xsYmFja09ubHkpIHsKICAgICAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgICAgIF9icm9rZXIuYmVmb3JlQ29tcGxldGlvbigp\nOwogICAgICAgICAgICAgICAgaWYgKF9mYWN0b3J5U3luYyAhPSBudWxsKQog\nICAgICAgICAgICAgICAgICAgIF9mYWN0b3J5U3luYy5iZWZvcmVDb21wbGV0\naW9uKCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKFJ1bnRpbWVFeGNlcHRpb24g\ncmUpIHsKICAgICAgICAgICAgICAgIF9yb2xsYmFja09ubHkgPSB0cnVlOwog\nICAgICAgICAgICAgICAgZXJyID0gcmU7CiAgICAgICAgICAgIH0KICAgICAg\nICB9IGVsc2UgLy8gcHJldmlvdXNseSBtYXJrZWQgcm9sbGJhY2sgb25seQog\nICAgICAgICAgICBlcnIgPSBuZXcgU3RvcmVFeGNlcHRpb24oX2xvYy5nZXQo\nIm1hcmtlZC1yb2xsYmFjayIpKS4KICAgICAgICAgICAgICAgIHNldEZhdGFs\nKHRydWUpOwoKICAgICAgICBpZiAoIV9yb2xsYmFja09ubHkpIHsKICAgICAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIF9icm9rZXIuYWZ0ZXJDb21w\nbGV0aW9uKFN0YXR1cy5TVEFUVVNfQ09NTUlUVEVEKTsKICAgICAgICAgICAg\nICAgIG5vdGlmeUFmdGVyQ29tcGxldGlvbihTdGF0dXMuU1RBVFVTX0NPTU1J\nVFRFRCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKFJ1bnRpbWVFeGNlcHRpb24g\ncmUpIHsKICAgICAgICAgICAgICAgIGlmIChlcnIgPT0gbnVsbCkKICAgICAg\nICAgICAgICAgICAgICBlcnIgPSByZTsKICAgICAgICAgICAgfQogICAgICAg\nIH0KCiAgICAgICAgLy8gaWYgd2UgaGF2ZW4ndCBtYW5hZ2VkIHRvIGNvbW1p\ndCwgcm9sbGJhY2sKICAgICAgICBpZiAoX2FjdGl2ZSkgewogICAgICAgICAg\nICB0cnkgewogICAgICAgICAgICAgICAgcm9sbGJhY2soKTsKICAgICAgICAg\nICAgfSBjYXRjaCAoUnVudGltZUV4Y2VwdGlvbiByZSkgewogICAgICAgICAg\nICAgICAgaWYgKGVyciA9PSBudWxsKQogICAgICAgICAgICAgICAgICAgIGVy\nciA9IHJlOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyB0\naHJvdyB0aGUgZmlyc3QgZXhjZXB0aW9uIHdlIGVuY291bnRlcmVkLCBpZiBh\nbnkKICAgICAgICBpZiAoZXJyICE9IG51bGwpCiAgICAgICAgICAgIHRocm93\nIGVycjsKICAgIH0KCiAgICBwdWJsaWMgc3luY2hyb25pemVkIHZvaWQgcm9s\nbGJhY2soKSB7CiAgICAgICAgaWYgKCFfYWN0aXZlKQogICAgICAgICAgICB0\naHJvdyBuZXcgSW52YWxpZFN0YXRlRXhjZXB0aW9uKF9sb2MuZ2V0KCJub3Qt\nYWN0aXZlIikpOwoKICAgICAgICAvLyByb2xsYmFjayBicm9rZXIKICAgICAg\nICBSdW50aW1lRXhjZXB0aW9uIGVyciA9IG51bGw7CiAgICAgICAgdHJ5IHsK\nICAgICAgICAgICAgX2Jyb2tlci5hZnRlckNvbXBsZXRpb24oU3RhdHVzLlNU\nQVRVU19ST0xMRURCQUNLKTsKICAgICAgICB9IGNhdGNoIChSdW50aW1lRXhj\nZXB0aW9uIHJlKSB7CiAgICAgICAgICAgIGVyciA9IHJlOwogICAgICAgIH0K\nCiAgICAgICAgLy8gcm9sbGJhY2sgc3luY2gsIGV2ZW4gaWYgYnJva2VyIHRo\ncm93cyBleGNlcHRpb24KICAgICAgICB0cnkgewogICAgICAgICAgICBub3Rp\nZnlBZnRlckNvbXBsZXRpb24oU3RhdHVzLlNUQVRVU19ST0xMRURCQUNLKTsK\nICAgICAgICB9IGNhdGNoIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7CiAgICAg\nICAgICAgIGlmIChlcnIgPT0gbnVsbCkKICAgICAgICAgICAgICAgIGVyciA9\nIHJlOwogICAgICAgIH0KCiAgICAgICAgaWYgKGVyciAhPSBudWxsKQogICAg\nICAgICAgICB0aHJvdyBlcnI7CiAgICB9CgogICAgLyoqCiAgICAgKiBOb3Rp\nZmllcyB0aGUgZmFjdG9yeSBzeW5jIHRoYXQgdGhlIHRyYW5zYWN0aW9uIGhh\ncyBlbmRlZCB3aXRoCiAgICAgKiB0aGUgZ2l2ZW4gc3RhdHVzLiBDbGVhcnMg\nYWxsIHRyYW5zYWN0aW9uIHN0YXRlIHJlZ2FyZGxlc3MKICAgICAqIG9mIGFu\neSBleGNlcHRpb25zIGR1cmluZyB0aGUgY2FsbGJhY2suCiAgICAgKi8KICAg\nIHByaXZhdGUgdm9pZCBub3RpZnlBZnRlckNvbXBsZXRpb24oaW50IHN0YXR1\ncykgewogICAgICAgIF9hY3RpdmUgPSBmYWxzZTsKCiAgICAgICAgdHJ5IHsK\nICAgICAgICAgICAgaWYgKF9mYWN0b3J5U3luYyAhPSBudWxsKQogICAgICAg\nICAgICAgICAgX2ZhY3RvcnlTeW5jLmFmdGVyQ29tcGxldGlvbihzdGF0dXMp\nOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIF9yb2xsYmFja09u\nbHkgPSBmYWxzZTsKICAgICAgICAgICAgX2ZhY3RvcnlTeW5jID0gbnVsbDsK\nICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHN5bmNocm9uaXplZCB2b2lk\nIHNldFJvbGxiYWNrT25seSgpIHsKICAgICAgICBfcm9sbGJhY2tPbmx5ID0g\ndHJ1ZTsKICAgIH0KCiAgICBwdWJsaWMgc3luY2hyb25pemVkIGludCBnZXRT\ndGF0dXMoKSB7CiAgICAgICAgaWYgKF9yb2xsYmFja09ubHkpCiAgICAgICAg\nICAgIHJldHVybiBTdGF0dXMuU1RBVFVTX01BUktFRF9ST0xMQkFDSzsKICAg\nICAgICBpZiAoX2FjdGl2ZSkKICAgICAgICAgICAgcmV0dXJuIFN0YXR1cy5T\nVEFUVVNfQUNUSVZFOwogICAgICAgIHJldHVybiBTdGF0dXMuU1RBVFVTX05P\nX1RSQU5TQUNUSU9OOwogICAgfQoKICAgIHB1YmxpYyBUcmFuc2FjdGlvbiBn\nZXRUcmFuc2FjdGlvbigpIHsKICAgICAgICByZXR1cm4gdGhpczsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCByZXN1bWUoVHJhbnNhY3Rpb24gdG9iaikKICAg\nICAgICB0aHJvd3MgU3lzdGVtRXhjZXB0aW9uIHsKICAgICAgICB0aHJvdyBu\nZXcgU3lzdGVtRXhjZXB0aW9uKE5vdFN1cHBvcnRlZEV4Y2VwdGlvbi5jbGFz\ncy5nZXROYW1lKCkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldFRyYW5z\nYWN0aW9uVGltZW91dChpbnQgc2VjKQogICAgICAgIHRocm93cyBTeXN0ZW1F\neGNlcHRpb24gewogICAgICAgIHRocm93IG5ldyBTeXN0ZW1FeGNlcHRpb24o\nTm90U3VwcG9ydGVkRXhjZXB0aW9uLmNsYXNzLmdldE5hbWUoKSk7CiAgICB9\nCgogICAgcHVibGljIFRyYW5zYWN0aW9uIHN1c3BlbmQoKQogICAgICAgIHRo\ncm93cyBTeXN0ZW1FeGNlcHRpb24gewogICAgICAgIHRocm93IG5ldyBTeXN0\nZW1FeGNlcHRpb24oTm90U3VwcG9ydGVkRXhjZXB0aW9uLmNsYXNzLmdldE5h\nbWUoKSk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gZGVsaXN0UmVzb3Vy\nY2UoWEFSZXNvdXJjZSB4YVJlcywgaW50IGZsYWcpCiAgICAgICAgdGhyb3dz\nIFN5c3RlbUV4Y2VwdGlvbiB7CiAgICAgICAgdGhyb3cgbmV3IFN5c3RlbUV4\nY2VwdGlvbihOb3RTdXBwb3J0ZWRFeGNlcHRpb24uY2xhc3MuZ2V0TmFtZSgp\nKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBlbmxpc3RSZXNvdXJjZShY\nQVJlc291cmNlIHhhUmVzKQogICAgICAgIHRocm93cyBTeXN0ZW1FeGNlcHRp\nb24gewogICAgICAgIHRocm93IG5ldyBTeXN0ZW1FeGNlcHRpb24oTm90U3Vw\ncG9ydGVkRXhjZXB0aW9uLmNsYXNzLmdldE5hbWUoKSk7CiAgICB9CgogICAg\ncHVibGljIHN5bmNocm9uaXplZCB2b2lkIHJlZ2lzdGVyU3luY2hyb25pemF0\naW9uKFN5bmNocm9uaXphdGlvbiBzeW5jKSB7CiAgICAgICAgaWYgKHN5bmMg\nPT0gX2Jyb2tlcikKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGlmIChf\nZmFjdG9yeVN5bmMgIT0gbnVsbCkKICAgICAgICAgICAgdGhyb3cgbmV3IElu\ndGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAgX2ZhY3RvcnlTeW5jID0gc3lu\nYzsKICAgIH0KfQoK\n","encoding":"base64"}

