{"sha":"794314bce01f621f216512686975ba70c0b06e1d","node_id":"MDQ6QmxvYjIwNjM2NDo3OTQzMTRiY2UwMWY2MjFmMjE2NTEyNjg2OTc1YmE3MGMwYjA2ZTFk","size":8936,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/794314bce01f621f216512686975ba70c0b06e1d","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5rZXJuZWw7CgppbXBvcnQgamF2YS5sYW5nLnJlZmxlY3QuTWV0\naG9kOwppbXBvcnQgamF2YS5sYW5nLnJlZmxlY3QuTW9kaWZpZXI7CmltcG9y\ndCBqYXZhLnV0aWwuQXJyYXlMaXN0OwppbXBvcnQgamF2YS51dGlsLkFycmF5\nczsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOwppbXBvcnQgamF2YS51\ndGlsLkNvbGxlY3Rpb25zOwppbXBvcnQgamF2YS51dGlsLkhhc2hNYXA7Cmlt\ncG9ydCBqYXZhLnV0aWwuSXRlcmF0b3I7CmltcG9ydCBqYXZhLnV0aWwuTGlz\ndDsKaW1wb3J0IGphdmEudXRpbC5NYXA7CgppbXBvcnQgb3JnLmFwYWNoZS5j\nb21tb25zLmNvbGxlY3Rpb25zLm1hcC5MaW5rZWRNYXA7CmltcG9ydCBvcmcu\nYXBhY2hlLmNvbW1vbnMubGFuZy5TdHJpbmdVdGlsczsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5saWIucm9wLkxpc3RSZXN1bHRPYmplY3RQcm92aWRl\ncjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIucm9wLlJhbmdlUmVz\ndWx0T2JqZWN0UHJvdmlkZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nbGliLnJvcC5SZXN1bHRPYmplY3RQcm92aWRlcjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6ZXI7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEubWV0YS5DbGFzc01ldGFEYXRhOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnV0aWwuRXhjZXB0aW9uczsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS51dGlsLkltcGxIZWxwZXI7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEudXRpbC5PcGVuSlBBRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnV0aWwuVXNlckV4Y2VwdGlvbjsKCi8qKgogKiBBIHF1\nZXJ5IHRoYXQgaXMgZXhlY3V0ZWQgYnkgYSB1c2VyLWRlZmluZWQgbWV0aG9k\nLgogKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKiBAbm9qYXZhZG9jCiAqLwpw\ndWJsaWMgY2xhc3MgTWV0aG9kU3RvcmVRdWVyeQogICAgZXh0ZW5kcyBBYnN0\ncmFjdFN0b3JlUXVlcnkgewoKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgU3Ry\naW5nIExBTkdVQUdFID0gUXVlcnlMYW5ndWFnZXMuTEFOR19NRVRIT0RRTDsK\nCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBDbGFzc1tdIEFSR1NfREFUQVNU\nT1JFID0gbmV3IENsYXNzW117CiAgICAgICAgU3RvcmVDb250ZXh0LmNsYXNz\nLCBDbGFzc01ldGFEYXRhLmNsYXNzLCBib29sZWFuLmNsYXNzLCBNYXAuY2xh\nc3MsCiAgICAgICAgRmV0Y2hDb25maWd1cmF0aW9uLmNsYXNzCiAgICB9Owog\nICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgQ2xhc3NbXSBBUkdTX0lOTUVNID0g\nbmV3IENsYXNzW117CiAgICAgICAgU3RvcmVDb250ZXh0LmNsYXNzLCBDbGFz\nc01ldGFEYXRhLmNsYXNzLCBib29sZWFuLmNsYXNzLAogICAgICAgIE9iamVj\ndC5jbGFzcywgTWFwLmNsYXNzLCBGZXRjaENvbmZpZ3VyYXRpb24uY2xhc3MK\nICAgIH07CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBpbnQgT0JKX0lOREVY\nID0gMzsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6ZXIgX2xv\nYyA9IExvY2FsaXplci5mb3JQYWNrYWdlCiAgICAgICAgKE1ldGhvZFN0b3Jl\nUXVlcnkuY2xhc3MpOwoKICAgIHByaXZhdGUgTGlua2VkTWFwIF9wYXJhbXMg\nPSBudWxsOwoKICAgIHB1YmxpYyB2b2lkIGludmFsaWRhdGVDb21waWxhdGlv\nbigpIHsKICAgICAgICBpZiAoX3BhcmFtcyAhPSBudWxsKQogICAgICAgICAg\nICBfcGFyYW1zLmNsZWFyKCk7CiAgICB9CgogICAgcHVibGljIEV4ZWN1dG9y\nIG5ld0luTWVtb3J5RXhlY3V0b3IoQ2xhc3NNZXRhRGF0YSBtZXRhLCBib29s\nZWFuIHN1YnMpIHsKICAgICAgICByZXR1cm4gbmV3IE1ldGhvZEV4ZWN1dG9y\nKHRoaXMsIG1ldGEsIHN1YnMsIHRydWUpOwogICAgfQoKICAgIHB1YmxpYyBF\neGVjdXRvciBuZXdEYXRhU3RvcmVFeGVjdXRvcihDbGFzc01ldGFEYXRhIG1l\ndGEsIGJvb2xlYW4gc3VicykgewogICAgICAgIHJldHVybiBuZXcgTWV0aG9k\nRXhlY3V0b3IodGhpcywgbWV0YSwgc3VicywgZmFsc2UpOwogICAgfQoKICAg\nIHB1YmxpYyBib29sZWFuIHN1cHBvcnRzSW5NZW1vcnlFeGVjdXRpb24oKSB7\nCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgcHVibGljIGJvb2xl\nYW4gc3VwcG9ydHNEYXRhU3RvcmVFeGVjdXRpb24oKSB7CiAgICAgICAgcmV0\ndXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBQYXJzZSB0aGUgcGFy\nYW1ldGVyIGRlY2xhcmF0aW9ucy4KICAgICAqLwogICAgcHJpdmF0ZSBMaW5r\nZWRNYXAgYmluZFBhcmFtZXRlclR5cGVzKCkgewogICAgICAgIGN0eC5sb2Nr\nKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKF9wYXJhbXMgIT0g\nbnVsbCkKICAgICAgICAgICAgICAgIHJldHVybiBfcGFyYW1zOwogICAgICAg\nICAgICBTdHJpbmcgcGFyYW1zID0gY3R4LmdldFBhcmFtZXRlckRlY2xhcmF0\naW9uKCk7CiAgICAgICAgICAgIGlmIChwYXJhbXMgPT0gbnVsbCkKICAgICAg\nICAgICAgICAgIHJldHVybiBFTVBUWV9QQVJBTVM7CgogICAgICAgICAgICBM\naXN0IGRlY3MgPSBGaWx0ZXJzLnBhcnNlRGVjbGFyYXRpb24ocGFyYW1zLCAn\nLCcsICJwYXJhbWV0ZXJzIik7CiAgICAgICAgICAgIGlmIChfcGFyYW1zID09\nIG51bGwpCiAgICAgICAgICAgICAgICBfcGFyYW1zID0gbmV3IExpbmtlZE1h\ncCgoaW50KSAoZGVjcy5zaXplKCkgLyAyICogMS4zMyArIDEpKTsKICAgICAg\nICAgICAgU3RyaW5nIG5hbWU7CiAgICAgICAgICAgIENsYXNzIGNsczsKICAg\nICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBkZWNzLnNpemUoKTsgaSAr\nPSAyKSB7CiAgICAgICAgICAgICAgICBuYW1lID0gKFN0cmluZykgZGVjcy5n\nZXQoaSk7CiAgICAgICAgICAgICAgICBjbHMgPSBjdHguY2xhc3NGb3JOYW1l\nKG5hbWUsIG51bGwpOwogICAgICAgICAgICAgICAgaWYgKGNscyA9PSBudWxs\nKQogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXhjZXB0aW9u\nKF9sb2MuZ2V0KCJiYWQtcGFyYW0tdHlwZSIsIG5hbWUpKTsKICAgICAgICAg\nICAgICAgIF9wYXJhbXMucHV0KGRlY3MuZ2V0KGkgKyAxKSwgY2xzKTsKICAg\nICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gX3BhcmFtczsKICAgICAg\nICB9IGZpbmFsbHkgewogICAgICAgICAgICBjdHgudW5sb2NrKCk7CiAgICAg\nICAgfQogICAgfQoKICAgIC8qKgogICAgICogVXNlcyBhIHVzZXItZGVmaW5l\nZCBtZXRob2QgbmFtZWQgYnkgdGhlIGZpbHRlciBzdHJpbmcgdG8gZXhlY3V0\nZSB0aGUKICAgICAqIHF1ZXJ5LgogICAgICovCiAgICBwcml2YXRlIHN0YXRp\nYyBjbGFzcyBNZXRob2RFeGVjdXRvcgogICAgICAgIGV4dGVuZHMgQWJzdHJh\nY3RFeGVjdXRvcgogICAgICAgIGltcGxlbWVudHMgRXhlY3V0b3IgewoKICAg\nICAgICBwcml2YXRlIGZpbmFsIENsYXNzTWV0YURhdGEgX21ldGE7CiAgICAg\nICAgcHJpdmF0ZSBmaW5hbCBib29sZWFuIF9zdWJzOwogICAgICAgIHByaXZh\ndGUgZmluYWwgYm9vbGVhbiBfaW5NZW07CiAgICAgICAgcHJpdmF0ZSBNZXRo\nb2QgX21ldGggPSBudWxsOwoKICAgICAgICBwdWJsaWMgTWV0aG9kRXhlY3V0\nb3IoTWV0aG9kU3RvcmVRdWVyeSBxLCBDbGFzc01ldGFEYXRhIGNhbmRpZGF0\nZSwKICAgICAgICAgICAgYm9vbGVhbiBzdWJjbGFzc2VzLCBib29sZWFuIGlu\nTWVtKSB7CiAgICAgICAgICAgIF9tZXRhID0gY2FuZGlkYXRlOwogICAgICAg\nICAgICBfc3VicyA9IHN1YmNsYXNzZXM7CiAgICAgICAgICAgIF9pbk1lbSA9\nIGluTWVtOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIFJlc3VsdE9iamVj\ndFByb3ZpZGVyIGV4ZWN1dGVRdWVyeShTdG9yZVF1ZXJ5IHEsCiAgICAgICAg\nICAgIE9iamVjdFtdIHBhcmFtcywgUmFuZ2UgcmFuZ2UpIHsKICAgICAgICAg\nICAgLy8gY29udmVydCB0aGUgcGFyYW1ldGVycyBpbnRvIGEgbWFwCiAgICAg\nICAgICAgIE1hcCBwYXJhbU1hcDsKICAgICAgICAgICAgaWYgKHBhcmFtcy5s\nZW5ndGggPT0gMCkKICAgICAgICAgICAgICAgIHBhcmFtTWFwID0gQ29sbGVj\ndGlvbnMuRU1QVFlfTUFQOwogICAgICAgICAgICBlbHNlIHsKICAgICAgICAg\nICAgICAgIE1hcCBwYXJhbVR5cGVzID0gcS5nZXRDb250ZXh0KCkuZ2V0UGFy\nYW1ldGVyVHlwZXMoKTsKICAgICAgICAgICAgICAgIHBhcmFtTWFwID0gbmV3\nIEhhc2hNYXAoKGludCkgKHBhcmFtcy5sZW5ndGggKiAxLjMzICsgMSkpOwog\nICAgICAgICAgICAgICAgaW50IGlkeCA9IDA7CiAgICAgICAgICAgICAgICBm\nb3IgKEl0ZXJhdG9yIGl0ciA9IHBhcmFtVHlwZXMua2V5U2V0KCkuaXRlcmF0\nb3IoKTsKICAgICAgICAgICAgICAgICAgICBpdHIuaGFzTmV4dCgpOyBpZHgr\nKykKICAgICAgICAgICAgICAgICAgICBwYXJhbU1hcC5wdXQoaXRyLm5leHQo\nKSwgcGFyYW1zW2lkeF0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBG\nZXRjaENvbmZpZ3VyYXRpb24gZmV0Y2ggPSBxLmdldENvbnRleHQoKS5nZXRG\nZXRjaENvbmZpZ3VyYXRpb24oKTsKICAgICAgICAgICAgU3RvcmVDb250ZXh0\nIHNjdHggPSBxLmdldENvbnRleHQoKS5nZXRTdG9yZUNvbnRleHQoKTsKICAg\nICAgICAgICAgUmVzdWx0T2JqZWN0UHJvdmlkZXIgcm9wOwogICAgICAgICAg\nICBPYmplY3RbXSBhcmdzOwogICAgICAgICAgICBpZiAoX2luTWVtKSB7CiAg\nICAgICAgICAgICAgICBhcmdzID0gbmV3IE9iamVjdFtdeyBzY3R4LCBfbWV0\nYSwgKF9zdWJzKSA/IEJvb2xlYW4uVFJVRQogICAgICAgICAgICAgICAgICAg\nIDogQm9vbGVhbi5GQUxTRSwgbnVsbCwgcGFyYW1NYXAsIGZldGNoIH07Cgog\nICAgICAgICAgICAgICAgSXRlcmF0b3IgaXRyID0gbnVsbDsKICAgICAgICAg\nICAgICAgIENvbGxlY3Rpb24gY29sbCA9IHEuZ2V0Q29udGV4dCgpLmdldENh\nbmRpZGF0ZUNvbGxlY3Rpb24oKTsKICAgICAgICAgICAgICAgIGlmIChjb2xs\nID09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICBFeHRlbnQgZXh0ID0g\ncS5nZXRDb250ZXh0KCkuZ2V0UXVlcnkoKS4KICAgICAgICAgICAgICAgICAg\nICAgICAgZ2V0Q2FuZGlkYXRlRXh0ZW50KCk7CiAgICAgICAgICAgICAgICAg\nICAgaXRyID0gZXh0Lml0ZXJhdG9yKCk7CiAgICAgICAgICAgICAgICB9IGVs\nc2UKICAgICAgICAgICAgICAgICAgICBpdHIgPSBjb2xsLml0ZXJhdG9yKCk7\nCgogICAgICAgICAgICAgICAgTGlzdCByZXN1bHRzID0gbmV3IEFycmF5TGlz\ndCgpOwogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAg\nICBPYmplY3Qgb2JqOwogICAgICAgICAgICAgICAgICAgIHdoaWxlIChpdHIu\naGFzTmV4dCgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG9iaiA9IGl0\nci5uZXh0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmogPT0g\nbnVsbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgIV9tZXRhLmdl\ndERlc2NyaWJlZFR5cGUoKS5pc0luc3RhbmNlKG9iaikpCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICBjb250aW51ZTsKCiAgICAgICAgICAgICAgICAg\nICAgICAgIGFyZ3NbT0JKX0lOREVYXSA9IG9iajsKICAgICAgICAgICAgICAg\nICAgICAgICAgaWYgKCgoQm9vbGVhbikgaW52b2tlKHEsIGFyZ3MpKS5ib29s\nZWFuVmFsdWUoKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3Vs\ndHMuYWRkKG9iaik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAg\nICAgICAgfQogICAgICAgICAgICAgICAgZmluYWxseSB7CiAgICAgICAgICAg\nICAgICAgICAgSW1wbEhlbHBlci5jbG9zZShpdHIpOwogICAgICAgICAgICAg\nICAgfQogICAgICAgICAgICAgICAgcm9wID0gbmV3IExpc3RSZXN1bHRPYmpl\nY3RQcm92aWRlcihyZXN1bHRzKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAg\nICAgICAgICAgICAgIC8vIGRhdGFzdG9yZQogICAgICAgICAgICAgICAgYXJn\ncyA9IG5ldyBPYmplY3RbXXsgc2N0eCwgX21ldGEsIChfc3VicykgPyBCb29s\nZWFuLlRSVUUKICAgICAgICAgICAgICAgICAgICA6IEJvb2xlYW4uRkFMU0Us\nIHBhcmFtTWFwLCBmZXRjaCB9OwogICAgICAgICAgICAgICAgcm9wID0gKFJl\nc3VsdE9iamVjdFByb3ZpZGVyKSBpbnZva2UocSwgYXJncyk7CiAgICAgICAg\nICAgIH0KCiAgICAgICAgICAgIGlmIChyYW5nZS5zdGFydCAhPSAwIHx8IHJh\nbmdlLmVuZCAhPSBMb25nLk1BWF9WQUxVRSkKICAgICAgICAgICAgICAgIHJv\ncCA9IG5ldyBSYW5nZVJlc3VsdE9iamVjdFByb3ZpZGVyKHJvcCwgcmFuZ2Uu\nc3RhcnQscmFuZ2UuZW5kKTsKICAgICAgICAgICAgcmV0dXJuIHJvcDsKICAg\nICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIEludm9rZSB0aGUgaW50\nZXJuYWwgbWV0aG9kIHdpdGggdGhlIGdpdmVuIGFyZ3VtZW50cywgcmV0dXJu\naW5nIHRoZQogICAgICAgICAqIHJlc3VsdC4KICAgICAgICAgKi8KICAgICAg\nICBwcml2YXRlIE9iamVjdCBpbnZva2UoU3RvcmVRdWVyeSBxLCBPYmplY3Rb\nXSBhcmdzKSB7CiAgICAgICAgICAgIHZhbGlkYXRlKHEpOwogICAgICAgICAg\nICB0cnkgewogICAgICAgICAgICAgICAgcmV0dXJuIF9tZXRoLmludm9rZShu\ndWxsLCBhcmdzKTsKICAgICAgICAgICAgfSBjYXRjaCAoT3BlbkpQQUV4Y2Vw\ndGlvbiBrZSkgewogICAgICAgICAgICAgICAgdGhyb3cga2U7CiAgICAgICAg\nICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAgICB0\naHJvdyBuZXcgVXNlckV4Y2VwdGlvbihfbG9jLmdldCgibWV0aG9kLWVycm9y\nIiwgX21ldGgsCiAgICAgICAgICAgICAgICAgICAgRXhjZXB0aW9ucy50b1N0\ncmluZyhBcnJheXMuYXNMaXN0KGFyZ3MpKSksIGUpOwogICAgICAgICAgICB9\nCiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCB2YWxpZGF0ZShTdG9y\nZVF1ZXJ5IHEpIHsKICAgICAgICAgICAgaWYgKF9tZXRoICE9IG51bGwpCiAg\nICAgICAgICAgICAgICByZXR1cm47CgogICAgICAgICAgICBTdHJpbmcgbWV0\naE5hbWUgPSBxLmdldENvbnRleHQoKS5nZXRRdWVyeVN0cmluZygpOwogICAg\nICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNFbXB0eShtZXRoTmFtZSkpCiAg\nICAgICAgICAgICAgICB0aHJvdyBuZXcgVXNlckV4Y2VwdGlvbihfbG9jLmdl\ndCgibm8tbWV0aG9kIikpOwoKICAgICAgICAgICAgaW50IGRvdElkeCA9IG1l\ndGhOYW1lLmxhc3RJbmRleE9mKCcuJyk7CiAgICAgICAgICAgIENsYXNzIGNs\nczsKICAgICAgICAgICAgaWYgKGRvdElkeCA9PSAtMSkKICAgICAgICAgICAg\nICAgIGNscyA9IF9tZXRhLmdldERlc2NyaWJlZFR5cGUoKTsKICAgICAgICAg\nICAgZWxzZSB7CiAgICAgICAgICAgICAgICBjbHMgPSBxLmdldENvbnRleHQo\nKS5jbGFzc0Zvck5hbWUobWV0aE5hbWUuc3Vic3RyaW5nKDAsIGRvdElkeCks\nCiAgICAgICAgICAgICAgICAgICAgbnVsbCk7CiAgICAgICAgICAgICAgICBp\nZiAoY2xzID09IG51bGwpCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3\nIFVzZXJFeGNlcHRpb24oX2xvYy5nZXQoImJhZC1tZXRob2QtY2xhc3MiLAog\nICAgICAgICAgICAgICAgICAgICAgICBtZXRoTmFtZS5zdWJzdHJpbmcoMCwg\nZG90SWR4KSwgbWV0aE5hbWUpKTsKICAgICAgICAgICAgICAgIG1ldGhOYW1l\nID0gbWV0aE5hbWUuc3Vic3RyaW5nKGRvdElkeCArIDEpOwogICAgICAgICAg\nICB9CgogICAgICAgICAgICBNZXRob2QgbWV0aDsKICAgICAgICAgICAgQ2xh\nc3NbXSB0eXBlcyA9IChfaW5NZW0pID8gQVJHU19JTk1FTSA6IEFSR1NfREFU\nQVNUT1JFOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgbWV0\naCA9IGNscy5nZXRNZXRob2QobWV0aE5hbWUsIHR5cGVzKTsKICAgICAgICAg\nICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgIFN0\ncmluZyBtc2cgPSAoX2luTWVtKSA/ICJiYWQtaW5tZW0tbWV0aG9kIgogICAg\nICAgICAgICAgICAgICAgIDogImJhZC1kYXRhc3RvcmUtbWV0aG9kIjsKICAg\nICAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXhjZXB0aW9uKF9sb2MuZ2V0\nKG1zZywgbWV0aE5hbWUsIGNscykpOwogICAgICAgICAgICB9CiAgICAgICAg\nICAgIGlmICghTW9kaWZpZXIuaXNTdGF0aWMobWV0aC5nZXRNb2RpZmllcnMo\nKSkpCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXNlckV4Y2VwdGlvbihf\nbG9jLmdldCgibWV0aG9kLW5vdC1zdGF0aWMiLCBtZXRoKSk7CiAgICAgICAg\nICAgIF9tZXRoID0gbWV0aDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBM\naW5rZWRNYXAgZ2V0UGFyYW1ldGVyVHlwZXMoU3RvcmVRdWVyeSBxKSB7CiAg\nICAgICAgICAgIHJldHVybiAoKE1ldGhvZFN0b3JlUXVlcnkpIHEpLmJpbmRQ\nYXJhbWV0ZXJUeXBlcygpOwoJCX0KCX0KfQo=\n","encoding":"base64"}

