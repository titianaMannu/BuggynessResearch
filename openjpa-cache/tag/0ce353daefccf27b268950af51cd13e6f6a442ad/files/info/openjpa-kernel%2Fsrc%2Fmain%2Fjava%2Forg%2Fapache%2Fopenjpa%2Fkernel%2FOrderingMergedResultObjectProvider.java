{"sha":"7e0c83cf58fc4aa326e104f80bf3461b968b4290","node_id":"MDQ6QmxvYjIwNjM2NDo3ZTBjODNjZjU4ZmM0YWEzMjZlMTA0ZjgwYmYzNDYxYjk2OGI0Mjkw","size":3410,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/7e0c83cf58fc4aa326e104f80bf3461b968b4290","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5rZXJuZWw7CgppbXBvcnQgamF2YS51dGlsLkNvbXBhcmF0b3I7\nCgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5yb3AuTWVyZ2VkUmVz\ndWx0T2JqZWN0UHJvdmlkZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nbGliLnJvcC5SZXN1bHRPYmplY3RQcm92aWRlcjsKCi8qKgogKiBNZXJnZWQg\ncmVzdWx0IG9iamVjdCBwcm92aWRlciBzcGVjaWFsaXphdGlvbiB0aGF0IGV4\ndHJhY3RzIG9yZGVyaW5nCiAqIHZhbHVlcyBmcm9tIHJlc3VsdHMgZm9yIGNv\nbXBhcmlzb24uCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqIEBub2phdmFk\nb2MKICovCnB1YmxpYyBjbGFzcyBPcmRlcmluZ01lcmdlZFJlc3VsdE9iamVj\ndFByb3ZpZGVyCiAgICBleHRlbmRzIE1lcmdlZFJlc3VsdE9iamVjdFByb3Zp\nZGVyIHsKCiAgICBwcml2YXRlIGZpbmFsIFN0b3JlUXVlcnkuRXhlY3V0b3Jb\nXSBfZXhlY3M7CiAgICBwcml2YXRlIGZpbmFsIFN0b3JlUXVlcnkgX3F1ZXJ5\nOwogICAgcHJpdmF0ZSBmaW5hbCBPYmplY3RbXSBfcGFyYW1zOwogICAgcHJp\ndmF0ZSBmaW5hbCBpbnQgX29yZGVyaW5nczsKCiAgICBwdWJsaWMgT3JkZXJp\nbmdNZXJnZWRSZXN1bHRPYmplY3RQcm92aWRlcihSZXN1bHRPYmplY3RQcm92\naWRlcltdIHJvcHMsCiAgICAgICAgYm9vbGVhbltdIGFzYywgU3RvcmVRdWVy\neS5FeGVjdXRvciBleGVjLCBTdG9yZVF1ZXJ5IHEsCiAgICAgICAgT2JqZWN0\nW10gcGFyYW1zKSB7CiAgICAgICAgdGhpcyhyb3BzLCBhc2MsIG5ldyBTdG9y\nZVF1ZXJ5LkV4ZWN1dG9yW117IGV4ZWMgfSwgcSwgcGFyYW1zKTsKICAgIH0K\nCiAgICBwdWJsaWMgT3JkZXJpbmdNZXJnZWRSZXN1bHRPYmplY3RQcm92aWRl\ncihSZXN1bHRPYmplY3RQcm92aWRlcltdIHJvcHMsCiAgICAgICAgYm9vbGVh\nbltdIGFzYywgU3RvcmVRdWVyeS5FeGVjdXRvcltdIGV4ZWNzLCBTdG9yZVF1\nZXJ5IHEsCiAgICAgICAgT2JqZWN0W10gcGFyYW1zKSB7CiAgICAgICAgc3Vw\nZXIocm9wcywgbmV3IE9yZGVyaW5nQ29tcGFyYXRvcihhc2MpKTsKICAgICAg\nICBfb3JkZXJpbmdzID0gYXNjLmxlbmd0aDsKICAgICAgICBfZXhlY3MgPSBl\neGVjczsKICAgICAgICBfcXVlcnkgPSBxOwogICAgICAgIF9wYXJhbXMgPSBw\nYXJhbXM7CiAgICB9CgogICAgcHJvdGVjdGVkIE9iamVjdCBnZXRPcmRlcmlu\nZ1ZhbHVlKE9iamVjdCB2YWwsIGludCBpZHgsCiAgICAgICAgUmVzdWx0T2Jq\nZWN0UHJvdmlkZXIgcm9wKSB7CiAgICAgICAgU3RvcmVRdWVyeS5FeGVjdXRv\nciBleGVjID0gKF9leGVjcy5sZW5ndGggPT0gMSkgPyBfZXhlY3NbMF0KICAg\nICAgICAgICAgOiBfZXhlY3NbaWR4XTsKICAgICAgICBpZiAoX29yZGVyaW5n\ncyA9PSAxKQogICAgICAgICAgICByZXR1cm4gZXhlYy5nZXRPcmRlcmluZ1Zh\nbHVlKF9xdWVyeSwgX3BhcmFtcywgdmFsLCAwKTsKCiAgICAgICAgT2JqZWN0\nW10gcmV0ID0gbmV3IE9iamVjdFtfb3JkZXJpbmdzXTsKICAgICAgICBmb3Ig\nKGludCBpID0gMDsgaSA8IF9vcmRlcmluZ3M7IGkrKykKICAgICAgICAgICAg\ncmV0W2ldID0gZXhlYy5nZXRPcmRlcmluZ1ZhbHVlKF9xdWVyeSwgX3BhcmFt\ncywgdmFsLCBpKTsKICAgICAgICByZXR1cm4gcmV0OwogICAgfQoKICAgIC8q\nKgogICAgICogQ29tcGFyYXRvciB0aGF0IHdvcmtzIG9uIG11bHRpcGxlIG9y\nZGVyaW5nIGNyaXRlcmlhIGdpdmVuIGluIGFuIGFycmF5LgogICAgICovCiAg\nICBwcml2YXRlIHN0YXRpYyBjbGFzcyBPcmRlcmluZ0NvbXBhcmF0b3IKICAg\nICAgICBpbXBsZW1lbnRzIENvbXBhcmF0b3IgewoKICAgICAgICBwcml2YXRl\nIGZpbmFsIGJvb2xlYW5bXSBfYXNjOwoKICAgICAgICBwdWJsaWMgT3JkZXJp\nbmdDb21wYXJhdG9yKGJvb2xlYW5bXSBhc2MpIHsKICAgICAgICAgICAgX2Fz\nYyA9IGFzYzsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBpbnQgY29tcGFy\nZShPYmplY3QgbzEsIE9iamVjdCBvMikgewogICAgICAgICAgICBpZiAoX2Fz\nYy5sZW5ndGggPT0gMSkKICAgICAgICAgICAgICAgIHJldHVybiBjbXAobzEs\nIG8yLCBfYXNjWzBdKTsKCiAgICAgICAgICAgIE9iamVjdFtdIGFycjEgPSAo\nT2JqZWN0W10pIG8xOwogICAgICAgICAgICBPYmplY3RbXSBhcnIyID0gKE9i\namVjdFtdKSBvMjsKICAgICAgICAgICAgaW50IGNtcDsKICAgICAgICAgICAg\nZm9yIChpbnQgaSA9IDA7IGkgPCBfYXNjLmxlbmd0aDsgaSsrKSB7CiAgICAg\nICAgICAgICAgICBjbXAgPSBjbXAoYXJyMVtpXSwgYXJyMltpXSwgX2FzY1tp\nXSk7CiAgICAgICAgICAgICAgICBpZiAoY21wICE9IDApCiAgICAgICAgICAg\nICAgICAgICAgcmV0dXJuIGNtcDsKICAgICAgICAgICAgfQogICAgICAgICAg\nICByZXR1cm4gMDsKICAgICAgICB9CgogICAgICAgIHByaXZhdGUgc3RhdGlj\nIGludCBjbXAoT2JqZWN0IG8xLCBPYmplY3QgbzIsIGJvb2xlYW4gYXNjKSB7\nCiAgICAgICAgICAgIGlmIChvMSA9PSBudWxsICYmIG8yID09IG51bGwpCiAg\nICAgICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICAgICAgaWYgKG8xID09\nIG51bGwpCiAgICAgICAgICAgICAgICByZXR1cm4gKGFzYykgPyAxIDogLTE7\nCiAgICAgICAgICAgIGlmIChvMiA9PSBudWxsKQogICAgICAgICAgICAgICAg\ncmV0dXJuIChhc2MpID8gLTEgOiAxOwogICAgICAgICAgICBpbnQgY21wID0g\nKChDb21wYXJhYmxlKSBvMSkuY29tcGFyZVRvKG8yKTsKICAgICAgICAgICAg\naWYgKCFhc2MpCiAgICAgICAgICAgICAgICBjbXAgKj0gLTE7CiAgICAgICAg\nICAgIHJldHVybiBjbXA7CiAgICAgICAgfQogICAgfQp9Cgo=\n","encoding":"base64"}

