{"sha":"1a91f4fbaf96fbf732b12d79e794b3278dbe74dd","node_id":"MDQ6QmxvYjIwNjM2NDoxYTkxZjRmYmFmOTZmYmY3MzJiMTJkNzllNzk0YjMyNzhkYmU3NGRk","size":8990,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/1a91f4fbaf96fbf732b12d79e794b3278dbe74dd","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5rZXJuZWw7CgppbXBvcnQgamF2YS51dGlsLkJpdFNldDsKCmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5DbGFzc01ldGFEYXRhOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuRmllbGRNZXRhRGF0YTsK\nCi8qKgogKiBEZWZhdWx0IHtAbGluayBQQ0RhdGF9IGltcGxlbWVudGF0aW9u\nLgogKgogKiBAYXV0aG9yIFBhdHJpY2sgTGluc2tleQogKiBAYXV0aG9yIEFi\nZSBXaGl0ZQogKiBAbm9qYXZhZG9jCiAqLwpwdWJsaWMgY2xhc3MgUENEYXRh\nSW1wbAogICAgZXh0ZW5kcyBBYnN0cmFjdFBDRGF0YSB7CgogICAgcHJpdmF0\nZSBmaW5hbCBPYmplY3QgX29pZDsKICAgIHByaXZhdGUgZmluYWwgQ2xhc3Mg\nX3R5cGU7CiAgICBwcml2YXRlIGZpbmFsIE9iamVjdFtdIF9kYXRhOwogICAg\ncHJpdmF0ZSBmaW5hbCBCaXRTZXQgX2xvYWRlZDsKICAgIHByaXZhdGUgT2Jq\nZWN0IF92ZXJzaW9uID0gbnVsbDsKICAgIHByaXZhdGUgT2JqZWN0IF9pbXBs\nID0gbnVsbDsKICAgIHByaXZhdGUgT2JqZWN0W10gX2ZpZWxkSW1wbCA9IG51\nbGw7CgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3Rvci4KICAgICAqLwogICAg\ncHVibGljIFBDRGF0YUltcGwoT2JqZWN0IG9pZCwgQ2xhc3NNZXRhRGF0YSBt\nZXRhKSB7CiAgICAgICAgX29pZCA9IG9pZDsKICAgICAgICBfdHlwZSA9IG1l\ndGEuZ2V0RGVzY3JpYmVkVHlwZSgpOwoKICAgICAgICBpbnQgbGVuID0gbWV0\nYS5nZXRGaWVsZHMoKS5sZW5ndGg7CiAgICAgICAgX2RhdGEgPSBuZXcgT2Jq\nZWN0W2xlbl07CiAgICAgICAgX2xvYWRlZCA9IG5ldyBCaXRTZXQobGVuKTsK\nICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IGdldElkKCkgewogICAgICAgIHJl\ndHVybiBfb2lkOwogICAgfQoKICAgIHB1YmxpYyBDbGFzcyBnZXRUeXBlKCkg\newogICAgICAgIHJldHVybiBfdHlwZTsKICAgIH0KCiAgICBwdWJsaWMgQml0\nU2V0IGdldExvYWRlZCgpIHsKICAgICAgICByZXR1cm4gX2xvYWRlZDsKICAg\nIH0KCiAgICBwdWJsaWMgT2JqZWN0IGdldERhdGEoaW50IGluZGV4KSB7CiAg\nICAgICAgLy8gbWFrZSBzdXJlIGluZGV4IGlzIGFjdHVhbGx5IGxvYWRlZCB0\nbyBhdm9pZCByZXR1cm5pbmcgYW4KICAgICAgICAvLyBpbnRlcm1lZGlhdGUg\ndmFsdWUKICAgICAgICByZXR1cm4gKF9sb2FkZWQuZ2V0KGluZGV4KSkgPyBf\nZGF0YVtpbmRleF0gOiBudWxsOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNl\ndERhdGEoaW50IGluZGV4LCBPYmplY3QgdmFsKSB7CiAgICAgICAgX2xvYWRl\nZC5zZXQoaW5kZXgpOwogICAgICAgIF9kYXRhW2luZGV4XSA9IHZhbDsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBjbGVhckRhdGEoaW50IGluZGV4KSB7CiAg\nICAgICAgX2xvYWRlZC5jbGVhcihpbmRleCk7CiAgICAgICAgX2RhdGFbaW5k\nZXhdID0gbnVsbDsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IGdldEltcGxE\nYXRhKCkgewogICAgICAgIHJldHVybiBfaW1wbDsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBzZXRJbXBsRGF0YShPYmplY3QgdmFsKSB7CiAgICAgICAgX2lt\ncGwgPSB2YWw7CiAgICB9CgogICAgcHVibGljIE9iamVjdCBnZXRJbXBsRGF0\nYShpbnQgaW5kZXgpIHsKICAgICAgICByZXR1cm4gKF9maWVsZEltcGwgIT0g\nbnVsbCkgPyBfZmllbGRJbXBsW2luZGV4XSA6IG51bGw7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgc2V0SW1wbERhdGEoaW50IGluZGV4LCBPYmplY3QgdmFs\nKSB7CiAgICAgICAgaWYgKHZhbCAhPSBudWxsKSB7CiAgICAgICAgICAgIGlm\nIChfZmllbGRJbXBsID09IG51bGwpCiAgICAgICAgICAgICAgICBfZmllbGRJ\nbXBsID0gbmV3IE9iamVjdFtfZGF0YS5sZW5ndGhdOwogICAgICAgICAgICBf\nZmllbGRJbXBsW2luZGV4XSA9IHZhbDsKICAgICAgICB9IGVsc2UgaWYgKF9m\naWVsZEltcGwgIT0gbnVsbCkKICAgICAgICAgICAgX2ZpZWxkSW1wbFtpbmRl\neF0gPSBudWxsOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgZ2V0SW50ZXJt\nZWRpYXRlKGludCBpbmRleCkgewogICAgICAgIHJldHVybiAoIV9sb2FkZWQu\nZ2V0KGluZGV4KSkgPyBfZGF0YVtpbmRleF0gOiBudWxsOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHNldEludGVybWVkaWF0ZShpbnQgaW5kZXgsIE9iamVj\ndCB2YWwpIHsKICAgICAgICBfbG9hZGVkLmNsZWFyKGluZGV4KTsKICAgICAg\nICBfZGF0YVtpbmRleF0gPSB2YWw7CiAgICB9CgogICAgcHVibGljIGJvb2xl\nYW4gaXNMb2FkZWQoaW50IGluZGV4KSB7CiAgICAgICAgcmV0dXJuIF9sb2Fk\nZWQuZ2V0KGluZGV4KTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRMb2Fk\nZWQoaW50IGluZGV4LCBib29sZWFuIGxvYWRlZCkgewogICAgICAgIGlmIChs\nb2FkZWQpCiAgICAgICAgICAgIF9sb2FkZWQuc2V0KGluZGV4KTsKICAgICAg\nICBlbHNlCiAgICAgICAgICAgIF9sb2FkZWQuY2xlYXIoaW5kZXgpOwogICAg\nfQoKICAgIHB1YmxpYyBPYmplY3QgZ2V0VmVyc2lvbigpIHsKICAgICAgICBy\nZXR1cm4gX3ZlcnNpb247CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0VmVy\nc2lvbihPYmplY3QgdmVyc2lvbikgewogICAgICAgIF92ZXJzaW9uID0gdmVy\nc2lvbjsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBsb2FkKE9wZW5KUEFTdGF0\nZU1hbmFnZXIgc20sIEZldGNoQ29uZmlndXJhdGlvbiBmZXRjaCwKICAgICAg\nICBPYmplY3QgY29udGV4dCkgewogICAgICAgIGxvYWRWZXJzaW9uKHNtKTsK\nICAgICAgICBsb2FkSW1wbERhdGEoc20pOwoKICAgICAgICBGaWVsZE1ldGFE\nYXRhW10gZm1kcyA9IHNtLmdldE1ldGFEYXRhKCkuZ2V0RmllbGRzKCk7CiAg\nICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBmbWRzLmxlbmd0aDsgaSsrKSB7\nCiAgICAgICAgICAgIC8vIGxvYWQgaW50ZXJtZWRpYXRlIGRhdGEgZm9yIGFs\nbCB1bmxvYWRlZCBmaWVsZHMgYW5kIGRhdGEgZm9yCiAgICAgICAgICAgIC8v\nIGZpZWxkcyBpbiBjb25maWd1cmVkIGZldGNoIGdyb3VwcwogICAgICAgICAg\nICBpZiAoIWlzTG9hZGVkKGkpKQogICAgICAgICAgICAgICAgbG9hZEludGVy\nbWVkaWF0ZShzbSwgZm1kc1tpXSk7CiAgICAgICAgICAgIGVsc2UgaWYgKCFz\nbS5nZXRMb2FkZWQoKS5nZXQoaSkgJiYgZmV0Y2gucmVxdWlyZXNGZXRjaChm\nbWRzW2ldKSkKICAgICAgICAgICAgICAgIGxvYWRGaWVsZChzbSwgZm1kc1tp\nXSwgZmV0Y2gsIGNvbnRleHQpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBsb2FkKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIEJpdFNldCBm\naWVsZHMsCiAgICAgICAgRmV0Y2hDb25maWd1cmF0aW9uIGZldGNoLCBPYmpl\nY3QgY29udGV4dCkgewogICAgICAgIGxvYWRWZXJzaW9uKHNtKTsKICAgICAg\nICBsb2FkSW1wbERhdGEoc20pOwoKICAgICAgICAvLyBhdHRlbXB0IHRvIGxv\nYWQgZ2l2ZW4gZmllbGRzCiAgICAgICAgaW50IGxlbiA9IChmaWVsZHMgPT0g\nbnVsbCkgPyAwIDogZmllbGRzLmxlbmd0aCgpOwogICAgICAgIEZpZWxkTWV0\nYURhdGEgZm1kOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbGVuOyBp\nKyspIHsKICAgICAgICAgICAgaWYgKCFmaWVsZHMuZ2V0KGkpKQogICAgICAg\nICAgICAgICAgY29udGludWU7CgogICAgICAgICAgICBmbWQgPSBzbS5nZXRN\nZXRhRGF0YSgpLmdldEZpZWxkKGkpOwogICAgICAgICAgICBpZiAoIWlzTG9h\nZGVkKGkpKQogICAgICAgICAgICAgICAgbG9hZEludGVybWVkaWF0ZShzbSwg\nZm1kKTsKICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBsb2Fk\nRmllbGQoc20sIGZtZCwgZmV0Y2gsIGNvbnRleHQpOwogICAgICAgICAgICAg\nICAgbG9hZEltcGxEYXRhKHNtLCBmbWQpOwogICAgICAgICAgICAgICAgZmll\nbGRzLmNsZWFyKGkpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoK\nICAgIC8qKgogICAgICogU2V0IHZlcnNpb24gaW5mb3JtYXRpb24gaW50byB0\naGUgZ2l2ZW4gc3RhdGUgbWFuYWdlci4KICAgICAqLwogICAgcHJvdGVjdGVk\nIHZvaWQgbG9hZFZlcnNpb24oT3BlbkpQQVN0YXRlTWFuYWdlciBzbSkgewog\nICAgICAgIGlmIChzbS5nZXRWZXJzaW9uKCkgPT0gbnVsbCkKICAgICAgICAg\nICAgc20uc2V0VmVyc2lvbihnZXRWZXJzaW9uKCkpOwogICAgfQoKICAgIC8q\nKgogICAgICogU2V0IGltcGwgZGF0YSBpbmZvcm1hdGlvbiBpbnRvIHRoZSBn\naXZlbiBzdGF0ZSBtYW5hZ2VyLgogICAgICovCiAgICBwcm90ZWN0ZWQgdm9p\nZCBsb2FkSW1wbERhdGEoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSkgewogICAg\nICAgIE9iamVjdCBpbXBsID0gZ2V0SW1wbERhdGEoKTsKICAgICAgICBpZiAo\nc20uZ2V0SW1wbERhdGEoKSA9PSBudWxsICYmIGltcGwgIT0gbnVsbCkKICAg\nICAgICAgICAgc20uc2V0SW1wbERhdGEoaW1wbCwgdHJ1ZSk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBTZXQgZmllbGQtbGV2ZWwgaW5mb3JtYXRpb24gaW50\nbyB0aGUgZ2l2ZW4gc3RhdGUgbWFuYWdlci4KICAgICAqLwogICAgcHJvdGVj\ndGVkIHZvaWQgbG9hZEZpZWxkKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIEZp\nZWxkTWV0YURhdGEgZm1kLAogICAgICAgIEZldGNoQ29uZmlndXJhdGlvbiBm\nZXRjaCwgT2JqZWN0IGNvbnRleHQpIHsKICAgICAgICBpbnQgaW5kZXggPSBm\nbWQuZ2V0SW5kZXgoKTsKICAgICAgICBPYmplY3QgdmFsID0gdG9GaWVsZChz\nbSwgZm1kLCBnZXREYXRhKGluZGV4KSwgZmV0Y2gsIGNvbnRleHQpOwogICAg\nICAgIHNtLnN0b3JlRmllbGQoaW5kZXgsIHZhbCk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBTZXQgZmllbGQtbGV2ZWwgaW1wbCBkYXRhIGludG8gdGhlIGdp\ndmVuIHN0YXRlIG1hbmFnZXIuCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lk\nIGxvYWRJbXBsRGF0YShPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBGaWVsZE1l\ndGFEYXRhIGZtZCkgewogICAgICAgIGludCBpbmRleCA9IGZtZC5nZXRJbmRl\neCgpOwogICAgICAgIE9iamVjdCBpbXBsID0gZ2V0SW1wbERhdGEoaW5kZXgp\nOwogICAgICAgIGlmIChpbXBsICE9IG51bGwpCiAgICAgICAgICAgIHNtLnNl\ndEltcGxEYXRhKGluZGV4LCBpbXBsKTsKICAgIH0KCiAgICAvKioKICAgICAq\nIFNldCBpbnRlcm1lZGlhdGUgaW5mb3JtYXRpb24gZm9yIHRoZSBnaXZlbiBm\naWVsZCBpbnRvIHRoZSBzdGF0ZSBtYW5hZ2VyLgogICAgICovCiAgICBwcm90\nZWN0ZWQgdm9pZCBsb2FkSW50ZXJtZWRpYXRlKE9wZW5KUEFTdGF0ZU1hbmFn\nZXIgc20sIEZpZWxkTWV0YURhdGEgZm1kKSB7CiAgICAgICAgaW50IGluZGV4\nID0gZm1kLmdldEluZGV4KCk7CiAgICAgICAgT2JqZWN0IGludGVyID0gZ2V0\nSW50ZXJtZWRpYXRlKGluZGV4KTsKICAgICAgICBpZiAoaW50ZXIgIT0gbnVs\nbCAmJiAhc20uZ2V0TG9hZGVkKCkuZ2V0KGluZGV4KSkKICAgICAgICAgICAg\nc20uc2V0SW50ZXJtZWRpYXRlKGluZGV4LCBpbnRlcik7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgc3RvcmUoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSkgewog\nICAgICAgIHN0b3JlVmVyc2lvbihzbSk7CiAgICAgICAgc3RvcmVJbXBsRGF0\nYShzbSk7CgogICAgICAgIEZpZWxkTWV0YURhdGFbXSBmbWRzID0gc20uZ2V0\nTWV0YURhdGEoKS5nZXRGaWVsZHMoKTsKICAgICAgICBmb3IgKGludCBpID0g\nMDsgaSA8IGZtZHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKHNt\nLmdldExvYWRlZCgpLmdldChpKSkgewogICAgICAgICAgICAgICAgc3RvcmVG\naWVsZChzbSwgZm1kc1tpXSk7CiAgICAgICAgICAgICAgICBzdG9yZUltcGxE\nYXRhKHNtLCBmbWRzW2ldLCBpc0xvYWRlZChpKSk7CiAgICAgICAgICAgIH0g\nZWxzZSBpZiAoIWlzTG9hZGVkKGkpKQogICAgICAgICAgICAgICAgc3RvcmVJ\nbnRlcm1lZGlhdGUoc20sIGZtZHNbaV0pOwogICAgICAgIH0KICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCBzdG9yZShPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBC\naXRTZXQgZmllbGRzKSB7CiAgICAgICAgc3RvcmVWZXJzaW9uKHNtKTsKICAg\nICAgICBzdG9yZUltcGxEYXRhKHNtKTsKCiAgICAgICAgRmllbGRNZXRhRGF0\nYVtdIGZtZHMgPSBzbS5nZXRNZXRhRGF0YSgpLmdldEZpZWxkcygpOwogICAg\nICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZm1kcy5sZW5ndGg7IGkrKykgewog\nICAgICAgICAgICBpZiAoZmllbGRzICE9IG51bGwgJiYgZmllbGRzLmdldChp\nKSkgewogICAgICAgICAgICAgICAgc3RvcmVGaWVsZChzbSwgZm1kc1tpXSk7\nCiAgICAgICAgICAgICAgICBzdG9yZUltcGxEYXRhKHNtLCBmbWRzW2ldLCBp\nc0xvYWRlZChpKSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWlzTG9hZGVk\nKGkpKQogICAgICAgICAgICAgICAgc3RvcmVJbnRlcm1lZGlhdGUoc20sIGZt\nZHNbaV0pOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFN0b3Jl\nIHZlcnNpb24gaW5mb3JtYXRpb24gZnJvbSB0aGUgZ2l2ZW4gc3RhdGUgbWFu\nYWdlci4KICAgICAqLwogICAgcHJvdGVjdGVkIHZvaWQgc3RvcmVWZXJzaW9u\nKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20pIHsKICAgICAgICBzZXRWZXJzaW9u\nKHNtLmdldFZlcnNpb24oKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBTdG9y\nZSBpbXBsIGRhdGEgZnJvbSB0aGUgZ2l2ZW4gc3RhdGUgbWFuYWdlci4KICAg\nICAqLwogICAgcHJvdGVjdGVkIHZvaWQgc3RvcmVJbXBsRGF0YShPcGVuSlBB\nU3RhdGVNYW5hZ2VyIHNtKSB7CiAgICAgICAgaWYgKHNtLmlzSW1wbERhdGFD\nYWNoZWFibGUoKSkKICAgICAgICAgICAgc2V0SW1wbERhdGEoc20uZ2V0SW1w\nbERhdGEoKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBTdG9yZSBmaWVsZC1s\nZXZlbCBpbmZvcm1hdGlvbiBmcm9tIHRoZSBnaXZlbiBzdGF0ZSBtYW5hZ2Vy\nLgogICAgICovCiAgICBwcm90ZWN0ZWQgdm9pZCBzdG9yZUZpZWxkKE9wZW5K\nUEFTdGF0ZU1hbmFnZXIgc20sIEZpZWxkTWV0YURhdGEgZm1kKSB7CiAgICAg\nICAgaWYgKGZtZC5nZXRNYW5hZ2VtZW50KCkgIT0gZm1kLk1BTkFHRV9QRVJT\nSVNURU5UKQogICAgICAgICAgICByZXR1cm47CgogICAgICAgIGludCBpbmRl\neCA9IGZtZC5nZXRJbmRleCgpOwogICAgICAgIE9iamVjdCB2YWwgPSB0b0Rh\ndGEoZm1kLCBzbS5mZXRjaEZpZWxkKGluZGV4LCBmYWxzZSksCiAgICAgICAg\nICAgIHNtLmdldENvbnRleHQoKSk7CiAgICAgICAgaWYgKHZhbCAhPSBOVUxM\nKQogICAgICAgICAgICBzZXREYXRhKGluZGV4LCB2YWwpOwogICAgICAgIGVs\nc2UgLy8gdW5hYmxlIHRvIHN0b3JlIGZpZWxkIHZhbHVlOyBjbGVhciBvdXQg\nYW55IG9sZCB2YWx1ZXMKICAgICAgICAgICAgY2xlYXJEYXRhKGluZGV4KTsK\nICAgIH0KCiAgICAvKioKICAgICAqIFN0b3JlIHRoZSBpbnRlcm1lZGlhdGUg\nZmllbGQgdmFsdWUgZm9yIHRoZSBnaXZlbiBmaWVsZC4KICAgICAqLwogICAg\ncHJvdGVjdGVkIHZvaWQgc3RvcmVJbnRlcm1lZGlhdGUoT3BlbkpQQVN0YXRl\nTWFuYWdlciBzbSwKICAgICAgICBGaWVsZE1ldGFEYXRhIGZtZCkgewogICAg\nICAgIGludCBpbmRleCA9IGZtZC5nZXRJbmRleCgpOwogICAgICAgIE9iamVj\ndCB2YWwgPSBzbS5nZXRJbnRlcm1lZGlhdGUoaW5kZXgpOwogICAgICAgIGlm\nICh2YWwgIT0gbnVsbCkKICAgICAgICAgICAgc2V0SW50ZXJtZWRpYXRlKGlu\nZGV4LCB2YWwpOwogICAgfQoKICAgIC8qKgogICAgICogU3RvcmUgaW1wbCBk\nYXRhIGZvciB0aGUgZ2l2ZW4gZmllbGQuCiAgICAgKi8KICAgIHByb3RlY3Rl\nZCB2b2lkIHN0b3JlSW1wbERhdGEoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwg\nRmllbGRNZXRhRGF0YSBmbWQsCiAgICAgICAgYm9vbGVhbiBmaWVsZExvYWRl\nZCkgewogICAgICAgIGludCBpbmRleCA9IGZtZC5nZXRJbmRleCgpOwogICAg\nICAgIGlmIChmaWVsZExvYWRlZCkgewogICAgICAgICAgICAvLyBpcyB0aGVy\nZSBpbXBsIGRhdGEgdG8gc3RvcmU/CiAgICAgICAgICAgIE9iamVjdCBpbXBs\nID0gc20uZ2V0SW1wbERhdGEoaW5kZXgpOwogICAgICAgICAgICBpZiAoaW1w\nbCAhPSBudWxsICYmIHNtLmlzSW1wbERhdGFDYWNoZWFibGUoaW5kZXgpKQog\nICAgICAgICAgICAgICAgc2V0SW1wbERhdGEoaW5kZXgsIGltcGwpOwogICAg\nICAgIH0gZWxzZQogICAgICAgICAgICBzZXRJbXBsRGF0YShpbmRleCwgbnVs\nbCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gYSBuZXcge0BsaW5r\nIFBDRGF0YX0gaW1wbGVtZW50YXRpb24gb2YgdGhlIHJpZ2h0IHR5cGUgZm9y\nCiAgICAgKiBlbWJlZGRlZCBpbnN0YW5jZXMuIFJldHVybnMgYSB7QGxpbmsg\nUENEYXRhSW1wbH0gYnkgZGVmYXVsdC4KICAgICAqLwogICAgcHVibGljIEFi\nc3RyYWN0UENEYXRhIG5ld0VtYmVkZGVkUENEYXRhKE9wZW5KUEFTdGF0ZU1h\nbmFnZXIgc20pIHsKICAgICAgICByZXR1cm4gbmV3IFBDRGF0YUltcGwoc20u\nZ2V0SWQgKCksIHNtLmdldE1ldGFEYXRhICgpKTsKCX0KfQo=\n","encoding":"base64"}

