{"sha":"3c2bb161937084f05c72a62f84634cfed3a2891c","node_id":"MDQ6QmxvYjIwNjM2NDozYzJiYjE2MTkzNzA4NGYwNWM3MmE2MmY4NDYzNGNmZWQzYTI4OTFj","size":4038,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/3c2bb161937084f05c72a62f84634cfed3a2891c","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5rZXJuZWw7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmNv\nbmYuT3BlbkpQQUNvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEubGliLmxvZy5Mb2c7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nbGliLnV0aWwuTG9jYWxpemVyOwoKLyoqCiAqIExpZmVjeWNsZSBzdGF0ZS4K\nICogUmVwcmVzZW50cyBhIHBlcnNpc3RlbnQgaW5zdGFuY2UgdGhhdCBpcyBu\nb3QgdHJhbnNhY3Rpb25hbCwgYnV0IHRoYXQKICogYWxsb3dzIGFjY2VzcyB0\nbyBwZXJzaXN0ZW50IGRhdGEuIFRoaXMgc3RhdGUgaXMgcmVhY2hhYmxlIG9u\nbHkgaWYgdGhlCiAqIFJldGFpblN0YXRlIHByb3BlcnR5IGlzIHNldC4KICoK\nICogQGF1dGhvciBBYmUgV2hpdGUKICovCmNsYXNzIFBOb25UcmFuc1N0YXRl\nCiAgICBleHRlbmRzIFBDU3RhdGUgewoKICAgIHByaXZhdGUgc3RhdGljIGZp\nbmFsIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVyLmZvclBhY2thZ2UKICAg\nICAgICAoUE5vblRyYW5zU3RhdGUuY2xhc3MpOwoKICAgIHZvaWQgaW5pdGlh\nbGl6ZShTdGF0ZU1hbmFnZXJJbXBsIGNvbnRleHQpIHsKICAgICAgICBjb250\nZXh0LnNldERpcnR5KGZhbHNlKTsKICAgICAgICBjb250ZXh0LmNsZWFyU2F2\nZWRGaWVsZHMoKTsKCiAgICAgICAgLy8gc3BlYyBzYXlzIGFsbCBwcm94aWVz\nIHRvIHNlY29uZCBjbGFzcyBvYmplY3RzIHNob3VsZCBiZSByZXNldAogICAg\nICAgIGNvbnRleHQucHJveHlGaWVsZHModHJ1ZSwgdHJ1ZSk7CiAgICB9Cgog\nICAgUENTdGF0ZSBkZWxldGUoU3RhdGVNYW5hZ2VySW1wbCBjb250ZXh0KSB7\nCiAgICAgICAgY29udGV4dC5wcmVEZWxldGUoKTsKICAgICAgICBpZiAoIWNv\nbnRleHQuZ2V0QnJva2VyKCkuaXNBY3RpdmUoKSkKICAgICAgICAgICAgcmV0\ndXJuIFBOT05UUkFOU0RFTEVURUQ7CiAgICAgICAgcmV0dXJuIFBERUxFVEVE\nOwogICAgfQoKICAgIFBDU3RhdGUgdHJhbnNhY3Rpb25hbChTdGF0ZU1hbmFn\nZXJJbXBsIGNvbnRleHQpIHsKICAgICAgICAvLyBzdGF0ZSBpcyBkaXNjYXJk\nZWQgd2hlbiBlbnRlcmluZyB0aGUgdHJhbnNhY3Rpb24KICAgICAgICBpZiAo\nIWNvbnRleHQuZ2V0QnJva2VyKCkuZ2V0T3B0aW1pc3RpYygpCiAgICAgICAg\nICAgIHx8IGNvbnRleHQuZ2V0QnJva2VyKCkuZ2V0QXV0b0NsZWFyKCkgPT0g\nQXV0b0NsZWFyLkNMRUFSX0FMTCkKICAgICAgICAgICAgY29udGV4dC5jbGVh\nckZpZWxkcygpOwogICAgICAgIHJldHVybiBQQ0xFQU47CiAgICB9CgogICAg\nUENTdGF0ZSByZWxlYXNlKFN0YXRlTWFuYWdlckltcGwgY29udGV4dCkgewog\nICAgICAgIHJldHVybiBUUkFOU0lFTlQ7CiAgICB9CgogICAgUENTdGF0ZSBl\ndmljdChTdGF0ZU1hbmFnZXJJbXBsIGNvbnRleHQpIHsKICAgICAgICByZXR1\ncm4gSE9MTE9XOwogICAgfQoKICAgIFBDU3RhdGUgYmVmb3JlUmVhZChTdGF0\nZU1hbmFnZXJJbXBsIGNvbnRleHQsIGludCBmaWVsZCkgewogICAgICAgIC8v\nIHN0YXRlIGlzIGRpc2NhcmRlZCB3aGVuIGVudGVyaW5nIHRoZSB0cmFuc2Fj\ndGlvbgogICAgICAgIGNvbnRleHQuY2xlYXJGaWVsZHMoKTsKICAgICAgICBy\nZXR1cm4gUENMRUFOOwogICAgfQoKICAgIFBDU3RhdGUgYmVmb3JlV3JpdGUo\nU3RhdGVNYW5hZ2VySW1wbCBjb250ZXh0LCBpbnQgZmllbGQsIGJvb2xlYW4g\nbXV0YXRlKSB7CiAgICAgICAgcmV0dXJuIGJlZm9yZVdyaXRlKGNvbnRleHQs\nIGZpZWxkLCBtdXRhdGUsIGZhbHNlKTsKICAgIH0KCiAgICBQQ1N0YXRlIGJl\nZm9yZU9wdGltaXN0aWNXcml0ZShTdGF0ZU1hbmFnZXJJbXBsIGNvbnRleHQs\nIGludCBmaWVsZCwKICAgICAgICBib29sZWFuIG11dGF0ZSkgewogICAgICAg\nIGlmIChjb250ZXh0LmdldEJyb2tlcigpLmdldEF1dG9DbGVhcigpID09IEF1\ndG9DbGVhci5DTEVBUl9BTEwpCiAgICAgICAgICAgIHJldHVybiBiZWZvcmVX\ncml0ZShjb250ZXh0LCBmaWVsZCwgbXV0YXRlLCB0cnVlKTsKICAgICAgICBy\nZXR1cm4gUERJUlRZOwogICAgfQoKICAgIHByaXZhdGUgUENTdGF0ZSBiZWZv\ncmVXcml0ZShTdGF0ZU1hbmFnZXJJbXBsIGNvbnRleHQsIGludCBmaWVsZCwK\nICAgICAgICBib29sZWFuIG11dGF0ZSwgYm9vbGVhbiBvcHRpbWlzdGljKSB7\nCiAgICAgICAgLy8gaWYgdGhpcyBpcyBhIGRpcmVjdCBtdXRhdGlvbiBvbiBh\nbiBTQ08gZmllbGQsIHdlIGNhbid0IGNsZWFyIG91cgogICAgICAgIC8vIGZp\nZWxkcyBiZWNhdXNlIHRoYXQgd291bGQgYWxzbyBudWxsIHRoZSBTQ087IGRl\ncGVuZGluZyBvbiB3aGV0aGVyCiAgICAgICAgLy8gdGhlIHVzZXIgd2FzIGRp\ncmVjdGx5IG1hbmlwdWxhdGluZyB0aGUgZmllbGQgb3Igd2FzIHVzaW5nIGEg\nbWV0aG9kLAogICAgICAgIC8vIHRoYXQgd2lsbCByZXN1bHQgaW4gZWl0aGVy\nIGFuIE5QRSBvciBoYXZpbmcgdGhlIFNDTyBiZSBkZXRhY2hlZAogICAgICAg\nIC8vIGZyb20gaXRzIG93bmluZyBvYmplY3QsIG1ha2luZyB0aGUgdXNlcidz\nIGNoYW5nZSBoYXZlIG5vIGFmZmVjdAoKICAgICAgICBpZiAobXV0YXRlICYm\nICFvcHRpbWlzdGljKSB7CiAgICAgICAgICAgIExvZyBsb2cgPSBjb250ZXh0\nLmdldEJyb2tlcigpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRMb2cKICAgICAg\nICAgICAgICAgIChPcGVuSlBBQ29uZmlndXJhdGlvbi5MT0dfUlVOVElNRSk7\nCiAgICAgICAgICAgIGlmIChsb2cuaXNXYXJuRW5hYmxlZCgpKSB7CiAgICAg\nICAgICAgICAgICBsb2cud2FybihfbG9jLmdldCgicGVzc2ltaXN0aWMtbXV0\nYXRlIiwKICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmdldE1ldGFEYXRh\nKCkuZ2V0RmllbGQoZmllbGQpLAogICAgICAgICAgICAgICAgICAgIGNvbnRl\neHQuZ2V0TWFuYWdlZEluc3RhbmNlKCkpKTsKICAgICAgICAgICAgfQogICAg\nICAgIH0gZWxzZSBpZiAoIW11dGF0ZSkgewogICAgICAgICAgICAvLyBzdGF0\nZSBpcyBzdG9yZWQgZm9yIHJvbGxiYWNrIGFuZCBmaWVsZHMgYXJlIHJlbG9h\nZGVkCiAgICAgICAgICAgIGlmIChjb250ZXh0LmdldERpcnR5KCkubGVuZ3Ro\nKCkgPiAwKQogICAgICAgICAgICAgICAgY29udGV4dC5zYXZlRmllbGRzKHRy\ndWUpOwogICAgICAgICAgICBjb250ZXh0LmNsZWFyRmllbGRzKCk7CiAgICAg\nICAgICAgIGNvbnRleHQubG9hZChudWxsLCBjb250ZXh0LkxPQURfRkdTLCBu\ndWxsLCBudWxsLCB0cnVlKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIFBE\nSVJUWTsKICAgIH0KCiAgICBQQ1N0YXRlIGJlZm9yZU5vbnRyYW5zYWN0aW9u\nYWxXcml0ZShTdGF0ZU1hbmFnZXJJbXBsIGNvbnRleHQsIGludCBmaWVsZCwK\nICAgICAgICBib29sZWFuIG11dGF0ZSkgewogICAgICAgIHJldHVybiBQTk9O\nVFJBTlNESVJUWTsKICAgIH0KCiAgICBib29sZWFuIGlzUGVyc2lzdGVudCgp\nIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KfQoK\n","encoding":"base64"}

