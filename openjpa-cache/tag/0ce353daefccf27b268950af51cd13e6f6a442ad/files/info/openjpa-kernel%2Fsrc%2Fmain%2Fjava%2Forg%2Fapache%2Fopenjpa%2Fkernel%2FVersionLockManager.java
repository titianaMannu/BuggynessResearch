{"sha":"22dfd561df51ab84818a8c6dcdd0f5e78c5963a0","node_id":"MDQ6QmxvYjIwNjM2NDoyMmRmZDU2MWRmNTFhYjg0ODE4YThjNmRjZGQwZjVlNzhjNTk2M2Ew","size":4772,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/22dfd561df51ab84818a8c6dcdd0f5e78c5963a0","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5rZXJuZWw7CgppbXBvcnQgc2VycC51dGlsLk51bWJlcnM7Cgov\nKioKICoge0BsaW5rIExvY2tNYW5hZ2VyfSBpbXBsZW1lbnRhdGlvbiB0aGF0\nIHByb3ZpZGVzIHN1cHBvcnQKICogZm9yIHZlcnNpb24gY2hlY2tpbmcgYW5k\nIHZlcnNpb24gdXBkYXRpbmcgd2hlbiBsb2NrcyBhcmUgYWNxdWlyZWQuCiAq\nIFRoaXMgbG9jayBtYW5hZ2VyIG1heSBiZSB1c2VkIHN0YW5kYWxvbmUgb3Ig\nZXh0ZW5kZWQgZm9yIGFkZGl0aW9uYWwgbG9ja2luZy4KICoKICogQGF1dGhv\nciBNYXJjIFBydWQnaG9tbWVhdXgKICovCnB1YmxpYyBjbGFzcyBWZXJzaW9u\nTG9ja01hbmFnZXIKICAgIGV4dGVuZHMgQWJzdHJhY3RMb2NrTWFuYWdlciB7\nCgogICAgcHJpdmF0ZSBib29sZWFuIF92ZXJzaW9uQ2hlY2tPblJlYWRMb2Nr\nID0gdHJ1ZTsKICAgIHByaXZhdGUgYm9vbGVhbiBfdmVyc2lvblVwZGF0ZU9u\nV3JpdGVMb2NrID0gdHJ1ZTsKCiAgICAvKioKICAgICAqIFJldHVybnMgdGhl\nIGdpdmVuIGluc3RhbmNlJ3MgbG9jayBsZXZlbCwgYXNzdW1pbmcgdGhhdCB0\naGUgc3RhdGUncwogICAgICogbG9jayBvYmplY3QgaXMgYSBudW1iZXIuIElm\nIHRoZSBnaXZlbiBpbnN0YW5jZSBpcyBlbWJlZGRlZCwgdHJhdmVyc2VzCiAg\nICAgKiB0byBpdHMgb3duZXIuIE92ZXJyaWRlIGlmIGxvY2sgaXMgbm90IHN0\nb3JlZCBhcyBhIG51bWJlci4KICAgICAqLwogICAgcHVibGljIGludCBnZXRM\nb2NrTGV2ZWwoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSkgewogICAgICAgIHdo\naWxlIChzbS5nZXRPd25lcigpICE9IG51bGwpCiAgICAgICAgICAgIHNtID0g\nc20uZ2V0T3duZXIoKTsKICAgICAgICBOdW1iZXIgbGV2ZWwgPSAoTnVtYmVy\nKSBzbS5nZXRMb2NrKCk7CiAgICAgICAgcmV0dXJuIChsZXZlbCA9PSBudWxs\nKSA/IExPQ0tfTk9ORSA6IGxldmVsLmludFZhbHVlKCk7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBTZXRzIHRoZSBnaXZlbiBpbnN0YW5jZSdzIGxvY2sgbGV2\nZWwgdG8gdGhlIGdpdmVuIG51bWJlci4gT3ZlcnJpZGUKICAgICAqIHRvIHN0\nb3JlIHNvbWV0aGluZyBlbHNlIGFzIHRoZSBsb2NrLgogICAgICovCiAgICBw\ncm90ZWN0ZWQgdm9pZCBzZXRMb2NrTGV2ZWwoT3BlbkpQQVN0YXRlTWFuYWdl\nciBzbSwgaW50IGxldmVsKSB7CiAgICAgICAgc20uc2V0TG9jayhOdW1iZXJz\nLnZhbHVlT2YobGV2ZWwpKTsKICAgIH0KCiAgICAvKioKICAgICAqIE51bGxz\nIGdpdmVuIGluc3RhbmNlJ3MgbG9jayBvYmplY3QuCiAgICAgKi8KICAgIHB1\nYmxpYyB2b2lkIHJlbGVhc2UoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSkgewog\nICAgICAgIHNtLnNldExvY2sobnVsbCk7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBEZWxlZ2F0ZXMgdG8ge0BsaW5rICNsb2NrSW50ZXJuYWx9IGFmdGVyIHRy\nYXZlcnNpbmcgdG8gb3duaW5nCiAgICAgKiBpbnN0YW5jZSAoaWYgZW1iZWRk\nZWQpIGFuZCBhc3N1cmluZyB0aGF0IHRoZSBpbnN0YW5jZSBpcyBwZXJzaXN0\nZW50LAogICAgICogaXMgbm90IG5ldywgYW5kIGlzIG5vdCBhbHJlYWR5IGxv\nY2tlZCBhdCBhIGhpZ2hlciBsZXZlbC4gQWZ0ZXIKICAgICAqIGxvY2tpbmcs\nIGNhbGxzIHtAbGluayAjc2V0TG9ja0xldmVsfSB3aXRoIHRoZSBnaXZlbiBs\nZXZlbC4KICAgICAqLwogICAgcHVibGljIHZvaWQgbG9jayhPcGVuSlBBU3Rh\ndGVNYW5hZ2VyIHNtLCBpbnQgbGV2ZWwsIGludCB0aW1lb3V0LAogICAgICAg\nIE9iamVjdCBzZGF0YSkgewogICAgICAgIGlmIChsZXZlbCA9PSBMT0NLX05P\nTkUpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB3aGlsZSAoc20uZ2V0\nT3duZXIoKSAhPSBudWxsKQogICAgICAgICAgICBzbSA9IHNtLmdldE93bmVy\nKCk7CiAgICAgICAgaW50IG9sZGxldmVsID0gZ2V0TG9ja0xldmVsKHNtKTsK\nICAgICAgICBpZiAoIXNtLmlzUGVyc2lzdGVudCgpIHx8IHNtLmlzTmV3KCkg\nfHwgbGV2ZWwgPD0gb2xkbGV2ZWwpCiAgICAgICAgICAgIHJldHVybjsKCiAg\nICAgICAgLy8gc2V0IHRoZSBsb2NrIGxldmVsIGZpcnN0IHRvIGF2b2lkIGlu\nZmluaXRlIHJlY3Vyc2lvbgogICAgICAgIHNldExvY2tMZXZlbChzbSwgbGV2\nZWwpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGxvY2tJbnRlcm5hbChz\nbSwgbGV2ZWwsIHRpbWVvdXQsIHNkYXRhKTsKICAgICAgICB9IGNhdGNoIChS\ndW50aW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAgICAgIC8vIHJldmVydCBs\nb2NrCiAgICAgICAgICAgIHNldExvY2tMZXZlbChzbSwgb2xkbGV2ZWwpOwog\nICAgICAgICAgICB0aHJvdyByZTsKICAgICAgICB9CiAgICB9CgogICAgLyoq\nCiAgICAgKiBNYXJrcyB0aGUgaW5zdGFuY2UncyB0cmFuc2FjdGlvbmFsIHN0\nYXR1cyBpbiBhY2NvcmRhbmNlIHdpdGgKICAgICAqIHRoZSBzZXR0aW5ncyBv\nZiB7QGxpbmsgI2dldFZlcnNpb25DaGVja09uUmVhZExvY2t9CiAgICAgKiBh\nbmQge0BsaW5rICNnZXRWZXJzaW9uVXBkYXRlT25Xcml0ZUxvY2t9LiBPdmVy\ncmlkZSB0byBwZXJmb3JtCiAgICAgKiBhZGRpdGlvbmFsIGxvY2tpbmcuCiAg\nICAgKgogICAgICogQHNlZSBTdG9yZUNvbnRleHQjdHJhbnNhY3Rpb25hbAog\nICAgICovCiAgICBwcm90ZWN0ZWQgdm9pZCBsb2NrSW50ZXJuYWwoT3BlbkpQ\nQVN0YXRlTWFuYWdlciBzbSwgaW50IGxldmVsLCBsb25nIHRpbWVvdXQsCiAg\nICAgICAgT2JqZWN0IHNkYXRhKSB7CiAgICAgICAgaWYgKGxldmVsID49IExv\nY2tMZXZlbHMuTE9DS19XUklURSAmJiBfdmVyc2lvblVwZGF0ZU9uV3JpdGVM\nb2NrKQogICAgICAgICAgICBnZXRDb250ZXh0KCkudHJhbnNhY3Rpb25hbChz\nbS5nZXRNYW5hZ2VkSW5zdGFuY2UoKSwgdHJ1ZSwgbnVsbCk7CiAgICAgICAg\nZWxzZSBpZiAobGV2ZWwgPj0gTG9ja0xldmVscy5MT0NLX1JFQUQgJiYgX3Zl\ncnNpb25DaGVja09uUmVhZExvY2spCiAgICAgICAgICAgIGdldENvbnRleHQo\nKS50cmFuc2FjdGlvbmFsKHNtLmdldE1hbmFnZWRJbnN0YW5jZSgpLCBmYWxz\nZSwgbnVsbCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVyIG9yIG5v\ndCB3ZSBzaG91bGQgZm9yY2UgYSB2ZXJzaW9uIGNoZWNrIGF0IGNvbW1pdAog\nICAgICogdGltZSB3aGVuIGEgcmVhZCBsb2NrIGlzIHJlcXVlc3RlZCBpbiBv\ncmRlciB0byB2ZXJpZnkgcmVhZAogICAgICogY29uc2lzdGVuY3kuIERlZmF1\nbHRzIHRvIHRydWUuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFZlcnNp\nb25DaGVja09uUmVhZExvY2soYm9vbGVhbiB2ZXJzaW9uQ2hlY2tPblJlYWRM\nb2NrKSB7CiAgICAgICAgX3ZlcnNpb25DaGVja09uUmVhZExvY2sgPSB2ZXJz\naW9uQ2hlY2tPblJlYWRMb2NrOwogICAgfQoKICAgIC8qKgogICAgICogV2hl\ndGhlciBvciBub3Qgd2Ugc2hvdWxkIGZvcmNlIGEgdmVyc2lvbiBjaGVjayBh\ndCBjb21taXQKICAgICAqIHRpbWUgd2hlbiBhIHJlYWQgbG9jayBpcyByZXF1\nZXN0ZWQgaW4gb3JkZXIgdG8gdmVyaWZ5IHJlYWQKICAgICAqIGNvbnNpc3Rl\nbmN5LiBEZWZhdWx0cyB0byB0cnVlLgogICAgICovCiAgICBwdWJsaWMgYm9v\nbGVhbiBnZXRWZXJzaW9uQ2hlY2tPblJlYWRMb2NrKCkgewogICAgICAgIHJl\ndHVybiBfdmVyc2lvbkNoZWNrT25SZWFkTG9jazsKICAgIH0KCiAgICAvKioK\nICAgICAqIFdoZXRoZXIgb3Igbm90IHdlIHNob3VsZCBmb3JjZSBhbiB1cGRh\ndGUgdG8gdGhlIHZlcnNpb24gYXQgY29tbWl0CiAgICAgKiB0aW1lIHdoZW4g\nYSB3cml0ZSBsb2NrIGlzIHJlcXVlc3RlZC4gRGVmYXVsdHMgdG8gdHJ1ZS4K\nICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0VmVyc2lvblVwZGF0ZU9uV3Jp\ndGVMb2NrKGJvb2xlYW4gdmVyc2lvblVwZGF0ZU9uV3JpdGVMb2NrKSB7CiAg\nICAgICAgX3ZlcnNpb25VcGRhdGVPbldyaXRlTG9jayA9IHZlcnNpb25VcGRh\ndGVPbldyaXRlTG9jazsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIg\nb3Igbm90IHdlIHNob3VsZCBmb3JjZSBhbiB1cGRhdGUgdG8gdGhlIHZlcnNp\nb24gYXQgY29tbWl0CiAgICAgKiB0aW1lIHdoZW4gYSB3cml0ZSBsb2NrIGlz\nIHJlcXVlc3RlZC4gRGVmYXVsdHMgdG8gdHJ1ZS4KICAgICAqLwogICAgcHVi\nbGljIGJvb2xlYW4gZ2V0VmVyc2lvblVwZGF0ZU9uV3JpdGVMb2NrKCkgewog\nICAgICAgIHJldHVybiBfdmVyc2lvblVwZGF0ZU9uV3JpdGVMb2NrOwoJfQp9\nCgo=\n","encoding":"base64"}

