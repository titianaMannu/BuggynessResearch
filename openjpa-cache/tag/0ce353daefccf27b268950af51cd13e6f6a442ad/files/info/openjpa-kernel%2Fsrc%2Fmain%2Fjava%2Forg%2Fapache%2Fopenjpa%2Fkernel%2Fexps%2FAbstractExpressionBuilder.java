{"sha":"242273c0645ca26ea7c39adbcb0403716c5d5b5e","node_id":"MDQ6QmxvYjIwNjM2NDoyNDIyNzNjMDY0NWNhMjZlYTdjMzlhZGJjYjA0MDM3MTZjNWQ1YjVl","size":16556,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/242273c0645ca26ea7c39adbcb0403716c5d5b5e","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5rZXJuZWwuZXhwczsKCmltcG9ydCBqYXZhLnV0aWwuQ29sbGVj\ndGlvbjsKaW1wb3J0IGphdmEudXRpbC5IYXNoTWFwOwppbXBvcnQgamF2YS51\ndGlsLkhhc2hTZXQ7CmltcG9ydCBqYXZhLnV0aWwuSXRlcmF0b3I7CmltcG9y\ndCBqYXZhLnV0aWwuTWFwOwppbXBvcnQgamF2YS51dGlsLlNldDsKCmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkZpbHRlcnM7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkxvY2FsaXplci5NZXNzYWdl\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuQ2xhc3NNZXRhRGF0\nYTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkZpZWxkTWV0YURh\ndGE7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5JbnRlcm5hbEV4\nY2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLk9wZW5K\nUEFFeGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5V\nbnN1cHBvcnRlZEV4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS51dGlsLlVzZXJFeGNlcHRpb247CmltcG9ydCBzZXJwLnV0aWwuU3RyaW5n\nczsKCi8qKgogKiBBYnN0cmFjdCBiYXNlIGNsYXNzIHRvIGhlbHAgYnVpbGQg\nZXhwcmVzc2lvbnMuIFByb3ZpZGVzCiAqIGdlbmVyaWMgbGFuZ3VhZ2UtaW5k\nZXBlbmRlbnQgc3VwcG9ydCBmb3IgdmFyaWFibGUgcmVzb2x1dGlvbiwKICog\ncGF0aCB0cmF2ZXJzYWwsIGFuZCBlcnJvciBtZXNzYWdlcy4KICoKICogQGF1\ndGhvciBNYXJjIFBydWQnaG9tbWVhdXgKICogQG5vamF2YWRvYwogKi8KcHVi\nbGljIGFic3RyYWN0IGNsYXNzIEFic3RyYWN0RXhwcmVzc2lvbkJ1aWxkZXIg\newoKICAgIC8vIHVzZWQgZm9yIGVycm9yIG1lc3NhZ2VzCiAgICBwcm90ZWN0\nZWQgc3RhdGljIGZpbmFsIGludCBFWF9VU0VSID0gMDsKICAgIHByb3RlY3Rl\nZCBzdGF0aWMgZmluYWwgaW50IEVYX0ZBVEFMID0gMTsKICAgIHByb3RlY3Rl\nZCBzdGF0aWMgZmluYWwgaW50IEVYX1VOU1VQUE9SVEVEID0gMjsKCiAgICAv\nLyBjb21tb24gaW1wbGljaXQgdHlwZSBzZXR0aW5ncwogICAgcHJvdGVjdGVk\nIHN0YXRpYyBmaW5hbCBDbGFzcyBUWVBFX09CSkVDVCA9IE9iamVjdC5jbGFz\nczsKICAgIHByb3RlY3RlZCBzdGF0aWMgZmluYWwgQ2xhc3MgVFlQRV9TVFJJ\nTkcgPSBTdHJpbmcuY2xhc3M7CiAgICBwcm90ZWN0ZWQgc3RhdGljIGZpbmFs\nIENsYXNzIFRZUEVfQ0hBUl9PQkogPSBDaGFyYWN0ZXIuY2xhc3M7CiAgICBw\ncm90ZWN0ZWQgc3RhdGljIGZpbmFsIENsYXNzIFRZUEVfTlVNQkVSID0gTnVt\nYmVyLmNsYXNzOwogICAgcHJvdGVjdGVkIHN0YXRpYyBmaW5hbCBDbGFzcyBU\nWVBFX0NPTExFQ1RJT04gPSBDb2xsZWN0aW9uLmNsYXNzOwogICAgcHJvdGVj\ndGVkIHN0YXRpYyBmaW5hbCBDbGFzcyBUWVBFX01BUCA9IE1hcC5jbGFzczsK\nCiAgICAvLyBjb250YWlucyB0eXBlcyBmb3Igc2V0SW1wbGljaXRUeXBlcwog\nICAgcHJvdGVjdGVkIHN0YXRpYyBmaW5hbCBpbnQgQ09OVEFJTlNfVFlQRV9F\nTEVNRU5UID0gMTsKICAgIHByb3RlY3RlZCBzdGF0aWMgZmluYWwgaW50IENP\nTlRBSU5TX1RZUEVfS0VZID0gMjsKICAgIHByb3RlY3RlZCBzdGF0aWMgZmlu\nYWwgaW50IENPTlRBSU5TX1RZUEVfVkFMVUUgPSAzOwoKICAgIHByaXZhdGUg\nc3RhdGljIGZpbmFsIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVyLmZvclBh\nY2thZ2UKICAgICAgICAoQWJzdHJhY3RFeHByZXNzaW9uQnVpbGRlci5jbGFz\ncyk7CgogICAgcHJvdGVjdGVkIGZpbmFsIFJlc29sdmVyIHJlc29sdmVyOwog\nICAgcHJvdGVjdGVkIEV4cHJlc3Npb25GYWN0b3J5IGZhY3Rvcnk7CgogICAg\ncHJpdmF0ZSBmaW5hbCBTZXQgX2FjY2Vzc1BhdGggPSBuZXcgSGFzaFNldCgp\nOwogICAgcHJpdmF0ZSBNYXAgX3NlZW5WYXJzID0gbnVsbDsKICAgIHByaXZh\ndGUgU2V0IF9ib3VuZFZhcnMgPSBudWxsOwoKICAgIC8qKgogICAgICogQ29u\nc3RydWN0b3IuCiAgICAgKgogICAgICogQHBhcmFtIGZhY3RvcnkgdGhlIGV4\ncHJlc3Npb24gZmFjdG9yeSB0byB1c2UKICAgICAqIEBwYXJhbSByZXNvbHZl\nciB1c2VkIHRvIHJlc29sdmUgdmFyaWFibGVzLCBwYXJhbWV0ZXJzLCBhbmQg\nY2xhc3MKICAgICAqIG5hbWVzIHVzZWQgaW4gdGhlIHF1ZXJ5CiAgICAgKi8K\nICAgIHB1YmxpYyBBYnN0cmFjdEV4cHJlc3Npb25CdWlsZGVyKEV4cHJlc3Np\nb25GYWN0b3J5IGZhY3RvcnksCiAgICAgICAgUmVzb2x2ZXIgcmVzb2x2ZXIp\nIHsKICAgICAgICB0aGlzLmZhY3RvcnkgPSBmYWN0b3J5OwogICAgICAgIHRo\naXMucmVzb2x2ZXIgPSByZXNvbHZlcjsKICAgIH0KCiAgICAvKioKICAgICAq\nIFJldHVybnMgdGhlIGNsYXNzIGxvYWRlciB0aGF0IHNob3VsZCBiZSB1c2Vk\nIGZvciByZXNvbHZpbmcKICAgICAqIGNsYXNzIG5hbWVzIChpbiBhZGRpdGlv\nbiB0byB0aGUgcmVzb2x2ZXIgaW4gdGhlIHF1ZXJ5KS4KICAgICAqLwogICAg\ncHJvdGVjdGVkIGFic3RyYWN0IENsYXNzTG9hZGVyIGdldENsYXNzTG9hZGVy\nKCk7CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYSBwcm9wZXIgcGFyc2UgZXhj\nZXB0aW9uIGZvciB0aGUgZ2l2ZW4gcmVhc29uLgogICAgICovCiAgICBwcm90\nZWN0ZWQgT3BlbkpQQUV4Y2VwdGlvbiBwYXJzZUV4Y2VwdGlvbihpbnQgZSwg\nU3RyaW5nIHRva2VuLAogICAgICAgIE9iamVjdFtdIGFyZ3MsCiAgICAgICAg\nRXhjZXB0aW9uIG5lc3QpIHsKICAgICAgICBTdHJpbmcgYXJnU3RyOwogICAg\nICAgIGlmIChhcmdzID09IG51bGwpCiAgICAgICAgICAgIGFyZ1N0ciA9IGdl\ndExvY2FsaXplcigpLmdldCh0b2tlbikuZ2V0TWVzc2FnZSgpOwogICAgICAg\nIGVsc2UKICAgICAgICAgICAgYXJnU3RyID0gZ2V0TG9jYWxpemVyKCkuZ2V0\nKHRva2VuLCBhcmdzKS5nZXRNZXNzYWdlKCk7CgogICAgICAgIE1lc3NhZ2Ug\nbXNnID0gX2xvYy5nZXQoInBhcnNlLWVycm9yIiwgYXJnU3RyLCBjdXJyZW50\nUXVlcnkoKSk7CgogICAgICAgIHN3aXRjaCAoZSkgewogICAgICAgICAgICBj\nYXNlIEVYX0ZBVEFMOgogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludGVy\nbmFsRXhjZXB0aW9uKG1zZywgbmVzdCk7CiAgICAgICAgICAgIGNhc2UgRVhf\nVU5TVVBQT1JURUQ6CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVW5zdXBw\nb3J0ZWRFeGNlcHRpb24obXNnLCBuZXN0KTsKICAgICAgICAgICAgZGVmYXVs\ndDoKICAgICAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXhjZXB0aW9uKG1z\nZywgbmVzdCk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogUmVn\naXN0ZXIgdGhlIHNwZWNpZmllZCBtZXRhZGF0YSBhcyBiZWluZyBpbiB0aGUg\ncXVlcnkncyBhY2Nlc3MgcGF0aC4KICAgICAqLwogICAgcHJvdGVjdGVkIENs\nYXNzTWV0YURhdGEgYWRkQWNjZXNzUGF0aChDbGFzc01ldGFEYXRhIG1ldGEp\nIHsKICAgICAgICBfYWNjZXNzUGF0aC5hZGQobWV0YSk7CiAgICAgICAgcmV0\ndXJuIG1ldGE7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIHJl\nY29yZGVkIHF1ZXJ5IGFjY2VzcyBwYXRoLgogICAgICovCiAgICBwcm90ZWN0\nZWQgQ2xhc3NNZXRhRGF0YVtdIGdldEFjY2Vzc1BhdGgoKSB7CiAgICAgICAg\ncmV0dXJuIChDbGFzc01ldGFEYXRhW10pIF9hY2Nlc3NQYXRoLnRvQXJyYXkK\nICAgICAgICAgICAgKG5ldyBDbGFzc01ldGFEYXRhW19hY2Nlc3NQYXRoLnNp\nemUoKV0pOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRydWUgaWYg\ndGhlIGdpdmVuIHZhcmlhYmxlIGhhcyBiZWVuIGJvdW5kLgogICAgICovCiAg\nICBwcm90ZWN0ZWQgYm9vbGVhbiBpc0JvdW5kKFZhbHVlIHZhcikgewogICAg\nICAgIHJldHVybiBfYm91bmRWYXJzICE9IG51bGwgJiYgX2JvdW5kVmFycy5j\nb250YWlucyh2YXIpOwogICAgfQoKICAgIC8qKgogICAgICogUmVjb3JkIHRo\nYXQgdGhlIGdpdmVuIHZhcmlhYmxlIGlzIGJvdW5kLgogICAgICovCiAgICBw\ncm90ZWN0ZWQgdm9pZCBiaW5kKFZhbHVlIHZhcikgewogICAgICAgIGlmIChf\nYm91bmRWYXJzID09IG51bGwpCiAgICAgICAgICAgIF9ib3VuZFZhcnMgPSBu\nZXcgSGFzaFNldCgpOwogICAgICAgIF9ib3VuZFZhcnMuYWRkKHZhcik7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGEgdmFsdWUgZm9yIHRoZSBn\naXZlbiBpZC4KICAgICAqLwogICAgcHJvdGVjdGVkIFZhbHVlIGdldFZhcmlh\nYmxlKFN0cmluZyBpZCwgYm9vbGVhbiBiaW5kKSB7CiAgICAgICAgLy8gY2hl\nY2sgZm9yIGFscmVhZHkgY29uc3RydWN0ZWQgdmFyCiAgICAgICAgaWYgKGlz\nU2VlblZhcmlhYmxlKGlkKSkKICAgICAgICAgICAgcmV0dXJuIChWYWx1ZSkg\nX3NlZW5WYXJzLmdldChpZCk7CgogICAgICAgIC8vIGNyZWF0ZSBhbmQgY2Fj\naGUgdmFyCiAgICAgICAgQ2xhc3MgdHlwZSA9IGdldERlY2xhcmVkVmFyaWFi\nbGVUeXBlKGlkKTsKCiAgICAgICAgLy8gYWRkIHRoaXMgdHlwZSB0byB0aGUg\nc2V0IG9mIGNsYXNzZXMgaW4gdGhlIGZpbHRlcidzIGFjY2VzcyBwYXRoCiAg\nICAgICAgQ2xhc3NNZXRhRGF0YSBtZXRhID0gbnVsbDsKICAgICAgICBpZiAo\ndHlwZSA9PSBudWxsKQogICAgICAgICAgICB0eXBlID0gVFlQRV9PQkpFQ1Q7\nCiAgICAgICAgZWxzZQogICAgICAgICAgICBtZXRhID0gZ2V0TWV0YURhdGEo\ndHlwZSwgZmFsc2UpOwogICAgICAgIGlmIChtZXRhICE9IG51bGwpCiAgICAg\nICAgICAgIF9hY2Nlc3NQYXRoLmFkZChtZXRhKTsKCiAgICAgICAgVmFsdWUg\ndmFyOwogICAgICAgIGlmIChiaW5kKQogICAgICAgICAgICB2YXIgPSBmYWN0\nb3J5Lm5ld0JvdW5kVmFyaWFibGUoaWQsIHR5cGUpOwogICAgICAgIGVsc2UK\nICAgICAgICAgICAgdmFyID0gZmFjdG9yeS5uZXdVbmJvdW5kVmFyaWFibGUo\naWQsIHR5cGUpOwogICAgICAgIHZhci5zZXRNZXRhRGF0YShtZXRhKTsKCiAg\nICAgICAgaWYgKF9zZWVuVmFycyA9PSBudWxsKQogICAgICAgICAgICBfc2Vl\nblZhcnMgPSBuZXcgSGFzaE1hcCgpOwogICAgICAgIF9zZWVuVmFycy5wdXQo\naWQsIHZhcik7CiAgICAgICAgcmV0dXJuIHZhcjsKICAgIH0KCiAgICAvKioK\nICAgICAqIFZhbGlkYXRlIHRoYXQgYWxsIHVuYm91bmQgdmFyaWFibGVzIGFy\nZSBvZiBhIFBDIHR5cGUuIElmIG5vdCwgYXNzdW1lCiAgICAgKiB0aGF0IHRo\nZSB1c2VyIGFjdHVhbGx5IG1hZGUgYSB0eXBvIHRoYXQgd2UgdG9vayBmb3Ig\nYW4gaW1wbGljaXQKICAgICAqIHVuYm91bmQgdmFyaWFibGUuCiAgICAgKi8K\nICAgIHByb3RlY3RlZCB2b2lkIGFzc2VydFVuYm91bmRWYXJpYWJsZXNWYWxp\nZCgpIHsKICAgICAgICBpZiAoX3NlZW5WYXJzID09IG51bGwpCiAgICAgICAg\nICAgIHJldHVybjsKCiAgICAgICAgTWFwLkVudHJ5IGVudHJ5OwogICAgICAg\nIFZhbHVlIHZhcjsKICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9IF9zZWVu\nVmFycy5lbnRyeVNldCgpLml0ZXJhdG9yKCk7IGl0ci5oYXNOZXh0KCk7KSB7\nCiAgICAgICAgICAgIGVudHJ5ID0gKE1hcC5FbnRyeSkgaXRyLm5leHQoKTsK\nICAgICAgICAgICAgdmFyID0gKFZhbHVlKSBlbnRyeS5nZXRWYWx1ZSgpOwog\nICAgICAgICAgICBpZiAodmFyLmdldE1ldGFEYXRhKCkgPT0gbnVsbCAmJiAh\naXNCb3VuZCh2YXIpCiAgICAgICAgICAgICAgICAmJiAhaXNEZWNsYXJlZFZh\ncmlhYmxlKChTdHJpbmcpIGVudHJ5LmdldEtleSgpKSkgewogICAgICAgICAg\nICAgICAgdGhyb3cgcGFyc2VFeGNlcHRpb24oRVhfVVNFUiwgIm5vdC11bmJv\ndW5kLXZhciIsCiAgICAgICAgICAgICAgICAgICAgbmV3IE9iamVjdFtdeyBl\nbnRyeS5nZXRLZXkoKSB9LCBudWxsKTsKICAgICAgICAgICAgfQogICAgICAg\nIH0KICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgd2hldGhlciB0aGUg\nc3BlY2lmaWVkIHZhcmlhYmxlIG5hbWUgaGFzIGJlZW4gZXhwbGljaXRseQog\nICAgICogZGVjbGFyZWQuIE5vdGUgYWxsIHF1ZXJ5IGxhbmd1YWdlcyBuZWNl\nc3NhcmlseSBzdXBwb3J0IGRlY2xhcmluZwogICAgICogdmFyaWFibGVzLgog\nICAgICoKICAgICAqIEBwYXJhbSBpZCB0aGUgdmFyaWFibGUgdG8gY2hlY2sK\nICAgICAqIEByZXR1cm4gdHJ1ZSBpZiB0aGUgdmFyaWFiZSBoYXMgYmVlbiBl\neHBsaWNpdGVseSBkZWNsYXJlZAogICAgICovCiAgICBwcm90ZWN0ZWQgYWJz\ndHJhY3QgYm9vbGVhbiBpc0RlY2xhcmVkVmFyaWFibGUoU3RyaW5nIGlkKTsK\nCiAgICAvKioKICAgICAqIFJldHVybiB3aGV0aGVyIHRoZSBnaXZlbiBpZCBo\nYXMgYmVlbiB1c2VkIGFzIGEgdmFyaWFibGUuCiAgICAgKi8KICAgIHByb3Rl\nY3RlZCBib29sZWFuIGlzU2VlblZhcmlhYmxlKFN0cmluZyBpZCkgewogICAg\nICAgIHJldHVybiBfc2VlblZhcnMgIT0gbnVsbCAmJiBfc2VlblZhcnMuY29u\ndGFpbnNLZXkoaWQpOwogICAgfQoKICAgIC8qKgogICAgICogQ29udmVuaWVu\nY2UgbWV0aG9kIHRvIGdldCBtZXRhZGF0YSBmb3IgdGhlIGdpdmVuIHR5cGUu\nCiAgICAgKi8KICAgIHByb3RlY3RlZCBDbGFzc01ldGFEYXRhIGdldE1ldGFE\nYXRhKENsYXNzIGMsIGJvb2xlYW4gcmVxdWlyZWQpIHsKICAgICAgICByZXR1\ncm4gZ2V0TWV0YURhdGEoYywgcmVxdWlyZWQsIGdldENsYXNzTG9hZGVyKCkp\nOwogICAgfQoKICAgIC8qKgogICAgICogQ29udmVuaWVuY2UgbWV0aG9kIHRv\nIGdldCBtZXRhZGF0YSBmb3IgdGhlIGdpdmVuIHR5cGUuCiAgICAgKi8KICAg\nIHByb3RlY3RlZCBDbGFzc01ldGFEYXRhIGdldE1ldGFEYXRhKENsYXNzIGMs\nIGJvb2xlYW4gcmVxdWlyZWQsCiAgICAgICAgQ2xhc3NMb2FkZXIgbG9hZGVy\nKSB7CiAgICAgICAgcmV0dXJuIHJlc29sdmVyLmdldENvbmZpZ3VyYXRpb24o\nKS5nZXRNZXRhRGF0YVJlcG9zaXRvcnlJbnN0YW5jZSgpLgogICAgICAgICAg\nICBnZXRNZXRhRGF0YShjLCBsb2FkZXIsIHJlcXVpcmVkKTsKICAgIH0KCiAg\nICAvKioKICAgICAqIFRyYXZlcnNlIHRoZSBnaXZlbiBmaWVsZCBpbiB0aGUg\nZ2l2ZW4gcGF0aC4KICAgICAqLwogICAgcHJvdGVjdGVkIFZhbHVlIHRyYXZl\ncnNlUGF0aChQYXRoIHBhdGgsIFN0cmluZyBmaWVsZCkgewogICAgICAgIHJl\ndHVybiB0cmF2ZXJzZVBhdGgocGF0aCwgZmllbGQsIGZhbHNlLCBmYWxzZSk7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBUcmF2ZXJzZSB0aGUgZ2l2ZW4gZmll\nbGQgaW4gdGhlIGdpdmVuIHBhdGguCiAgICAgKi8KICAgIHByb3RlY3RlZCBW\nYWx1ZSB0cmF2ZXJzZVBhdGgoUGF0aCBwYXRoLCBTdHJpbmcgZmllbGQsIGJv\nb2xlYW4gcGNPbmx5LAogICAgICAgIGJvb2xlYW4gYWxsb3dOdWxsKSB7CiAg\nICAgICAgQ2xhc3NNZXRhRGF0YSBtZXRhID0gcGF0aC5nZXRNZXRhRGF0YSgp\nOwogICAgICAgIGlmIChtZXRhID09IG51bGwpCiAgICAgICAgICAgIHRocm93\nIHBhcnNlRXhjZXB0aW9uKEVYX1VTRVIsICJwYXRoLW5vLW1ldGEiLAogICAg\nICAgICAgICAgICAgbmV3IE9iamVjdFtdeyBmaWVsZCwgcGF0aC5nZXRUeXBl\nKCkgfSwgbnVsbCk7CgogICAgICAgIEZpZWxkTWV0YURhdGEgZm1kID0gbWV0\nYS5nZXRGaWVsZChmaWVsZCk7CiAgICAgICAgaWYgKGZtZCA9PSBudWxsKSB7\nCiAgICAgICAgICAgIE9iamVjdCB2YWwgPSB0cmF2ZXJzZVN0YXRpY0ZpZWxk\nKG1ldGEuZ2V0RGVzY3JpYmVkVHlwZSgpLCBmaWVsZCk7CiAgICAgICAgICAg\nIGlmICh2YWwgPT0gbnVsbCkKICAgICAgICAgICAgICAgIHRocm93IHBhcnNl\nRXhjZXB0aW9uKEVYX1VTRVIsICJuby1maWVsZCIsCiAgICAgICAgICAgICAg\nICAgICAgbmV3IE9iamVjdFtdeyBtZXRhLmdldERlc2NyaWJlZFR5cGUoKSwg\nZmllbGQgfSwgbnVsbCk7CgogICAgICAgICAgICByZXR1cm4gZmFjdG9yeS5u\nZXdMaXRlcmFsKHZhbCwgTGl0ZXJhbC5UWVBFX1VOS05PV04pOwogICAgICAg\nIH0KCiAgICAgICAgaWYgKGZtZC5pc0VtYmVkZGVkKCkpCiAgICAgICAgICAg\nIG1ldGEgPSBmbWQuZ2V0RW1iZWRkZWRNZXRhRGF0YSgpOwogICAgICAgIGVs\nc2UKICAgICAgICAgICAgbWV0YSA9IGZtZC5nZXREZWNsYXJlZFR5cGVNZXRh\nRGF0YSgpOwogICAgICAgIGlmIChtZXRhICE9IG51bGwpIHsKICAgICAgICAg\nICAgYWRkQWNjZXNzUGF0aChtZXRhKTsKICAgICAgICAgICAgcGF0aC5zZXRN\nZXRhRGF0YShtZXRhKTsKICAgICAgICB9CgogICAgICAgIGlmIChtZXRhICE9\nIG51bGwgfHwgIXBjT25seSkKICAgICAgICAgICAgcGF0aC5nZXQoZm1kLCBh\nbGxvd051bGwpOwoKICAgICAgICByZXR1cm4gcGF0aDsKICAgIH0KCiAgICAv\nKioKICAgICAqIFJldHVybiBhIGNvbnN0YW50IGNvbnRhaW5pbmcgdGhlIHZh\nbHVlIG9mIHRoZSBnaXZlbiBzdGF0aWMgZmllbGQuCiAgICAgKi8KICAgIHBy\nb3RlY3RlZCBPYmplY3QgdHJhdmVyc2VTdGF0aWNGaWVsZChDbGFzcyBjbHMs\nIFN0cmluZyBmaWVsZCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJl\ndHVybiBjbHMuZ2V0RmllbGQoZmllbGQpLmdldChudWxsKTsKICAgICAgICB9\nIGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICAvLyBjb3VudCBu\nb3QgbG9jYXRlIHRoZSBmaWVsZDogcmV0dXJuIG51bGwKICAgICAgICAgICAg\ncmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICog\nUmV0dXJucyB0aGUgdHlwZSBvZiB0aGUgbmFtZWQgdmFyaWFiZSBpZiBpdCBo\nYXMgYmVlbiBkZWNsYXJlZC4KICAgICAqLwogICAgcHJvdGVjdGVkIGFic3Ry\nYWN0IENsYXNzIGdldERlY2xhcmVkVmFyaWFibGVUeXBlKFN0cmluZyBuYW1l\nKTsKCiAgICAvKioKICAgICAqIFNldCB0aGUgaW1wbGljaXQgdHlwZXMgb2Yg\ndGhlIGdpdmVuIHZhbHVlcyBiYXNlZCBvbiB0aGUgZmFjdCB0aGF0CiAgICAg\nKiB0aGV5J3JlIHVzZWQgdG9nZXRoZXIsIGFuZCBiYXNlZCBvbiB0aGUgb3Bl\ncmF0b3IgdHlwZS4KICAgICAqLwogICAgcHJvdGVjdGVkIHZvaWQgc2V0SW1w\nbGljaXRUeXBlcyhWYWx1ZSB2YWwxLCBWYWx1ZSB2YWwyLAogICAgICAgIENs\nYXNzIGV4cGVjdGVkKSB7CiAgICAgICAgQ2xhc3MgYzEgPSB2YWwxLmdldFR5\ncGUoKTsKICAgICAgICBDbGFzcyBjMiA9IHZhbDIuZ2V0VHlwZSgpOwogICAg\nICAgIGJvb2xlYW4gbzEgPSBjMSA9PSBUWVBFX09CSkVDVDsKICAgICAgICBi\nb29sZWFuIG8yID0gYzIgPT0gVFlQRV9PQkpFQ1Q7CgogICAgICAgIGlmIChv\nMSAmJiAhbzIpIHsKICAgICAgICAgICAgdmFsMS5zZXRJbXBsaWNpdFR5cGUo\nYzIpOwogICAgICAgICAgICBpZiAodmFsMS5nZXRNZXRhRGF0YSgpID09IG51\nbGwpCiAgICAgICAgICAgICAgICB2YWwxLnNldE1ldGFEYXRhKHZhbDIuZ2V0\nTWV0YURhdGEoKSk7CiAgICAgICAgfSBlbHNlIGlmICghbzEgJiYgbzIpIHsK\nICAgICAgICAgICAgdmFsMi5zZXRJbXBsaWNpdFR5cGUoYzEpOwogICAgICAg\nICAgICBpZiAodmFsMi5nZXRNZXRhRGF0YSgpID09IG51bGwpCiAgICAgICAg\nICAgICAgICB2YWwyLnNldE1ldGFEYXRhKHZhbDEuZ2V0TWV0YURhdGEoKSk7\nCiAgICAgICAgfSBlbHNlIGlmIChvMSAmJiBvMiAmJiBleHBlY3RlZCAhPSBu\ndWxsKSB7CiAgICAgICAgICAgIC8vIHdlIG5ldmVyIGV4cGVjdCBhIHBjIHR5\ncGUsIHNvIGRvbid0IGJvdGhlciB3aXRoIG1ldGFkYXRhCiAgICAgICAgICAg\nIHZhbDEuc2V0SW1wbGljaXRUeXBlKGV4cGVjdGVkKTsKICAgICAgICAgICAg\ndmFsMi5zZXRJbXBsaWNpdFR5cGUoZXhwZWN0ZWQpOwogICAgICAgIH0gZWxz\nZSBpZiAoaXNOdW1lcmljKHZhbDEuZ2V0VHlwZSgpKSAhPSBpc051bWVyaWMo\ndmFsMi5nZXRUeXBlKCkpKSB7CiAgICAgICAgICAgIGlmIChyZXNvbHZlci5n\nZXRDb25maWd1cmF0aW9uKCkuZ2V0Q29tcGF0aWJpbGl0eUluc3RhbmNlKCku\nCiAgICAgICAgICAgICAgICBnZXRRdW90ZWROdW1iZXJzSW5RdWVyaWVzKCkp\nCiAgICAgICAgICAgICAgICBjb252ZXJ0VHlwZXNRdW90ZWROdW1iZXJzKHZh\nbDEsIHZhbDIpOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBj\nb252ZXJ0VHlwZXModmFsMSwgdmFsMik7CiAgICAgICAgfQogICAgfQoKICAg\nIC8qKgogICAgICogUGVyZm9ybSBjb252ZXJzaW9ucyB0byBtYWtlIHZhbHVl\ncyBjb21wYXRpYmxlLgogICAgICovCiAgICBwcml2YXRlIHZvaWQgY29udmVy\ndFR5cGVzKFZhbHVlIHZhbDEsIFZhbHVlIHZhbDIpIHsKICAgICAgICBDbGFz\ncyB0MSA9IHZhbDEuZ2V0VHlwZSgpOwogICAgICAgIENsYXNzIHQyID0gdmFs\nMi5nZXRUeXBlKCk7CgogICAgICAgIC8vIGFsbG93IHN0cmluZy10by1jaGFy\nIGNvbnZlcnNpb25zCiAgICAgICAgaWYgKHQxID09IFRZUEVfU1RSSU5HICYm\nIChGaWx0ZXJzLndyYXAodDIpID09IFRZUEVfQ0hBUl9PQkoKICAgICAgICAg\nICAgJiYgISh2YWwyIGluc3RhbmNlb2YgUGF0aCkpKSB7CiAgICAgICAgICAg\nIHZhbDIuc2V0SW1wbGljaXRUeXBlKFN0cmluZy5jbGFzcyk7CiAgICAgICAg\nICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKHQyID09IFRZUEVf\nU1RSSU5HICYmIChGaWx0ZXJzLndyYXAodDEpID09IFRZUEVfQ0hBUl9PQkop\nCiAgICAgICAgICAgICYmICEodmFsMSBpbnN0YW5jZW9mIFBhdGgpKSB7CiAg\nICAgICAgICAgIHZhbDEuc2V0SW1wbGljaXRUeXBlKFN0cmluZy5jbGFzcyk7\nCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIC8vIGlm\nIHRoZSBub24tbnVtZXJpYyBzaWRlIGlzIGEgc3RyaW5nIG9mIGxlbmd0aCAx\nLCBjYXN0IGl0CiAgICAgICAgLy8gdG8gYSBjaGFyYWN0ZXIKICAgICAgICBp\nZiAodDEgPT0gVFlQRV9TVFJJTkcgJiYgdmFsMSBpbnN0YW5jZW9mIExpdGVy\nYWwKICAgICAgICAgICAgJiYgKChTdHJpbmcpICgoTGl0ZXJhbCkgdmFsMSku\nZ2V0VmFsdWUoKSkubGVuZ3RoKCkgPT0gMSkgewogICAgICAgICAgICB2YWwx\nLnNldEltcGxpY2l0VHlwZShDaGFyYWN0ZXIuY2xhc3MpOwogICAgICAgICAg\nICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGlmICh0MiA9PSBUWVBFX1NU\nUklORyAmJiB2YWwyIGluc3RhbmNlb2YgTGl0ZXJhbAogICAgICAgICAgICAm\nJiAoKFN0cmluZykgKChMaXRlcmFsKSB2YWwyKS5nZXRWYWx1ZSgpKS5sZW5n\ndGgoKSA9PSAxKSB7CiAgICAgICAgICAgIHZhbDIuc2V0SW1wbGljaXRUeXBl\nKENoYXJhY3Rlci5jbGFzcyk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAg\nICB9CgogICAgICAgIC8vIGVycm9yCiAgICAgICAgU3RyaW5nIGxlZnQ7CiAg\nICAgICAgU3RyaW5nIHJpZ2h0OwogICAgICAgIGlmICh2YWwxIGluc3RhbmNl\nb2YgUGF0aCAmJiAoKFBhdGgpIHZhbDEpLmxhc3QoKSAhPSBudWxsKQogICAg\nICAgICAgICBsZWZ0ID0gX2xvYy5nZXQoIm5vbi1udW1lcmljLXBhdGgiLCAo\nKFBhdGgpIHZhbDEpLmxhc3QoKS4KICAgICAgICAgICAgICAgIGdldE5hbWUo\nKSwgdDEuZ2V0TmFtZSgpKS5nZXRNZXNzYWdlKCk7CiAgICAgICAgZWxzZQog\nICAgICAgICAgICBsZWZ0ID0gX2xvYy5nZXQoIm5vbi1udW1lcmljLXZhbHVl\nIiwgdDEuZ2V0TmFtZSgpKS5nZXRNZXNzYWdlKCk7CiAgICAgICAgaWYgKHZh\nbDIgaW5zdGFuY2VvZiBQYXRoICYmICgoUGF0aCkgdmFsMikubGFzdCgpICE9\nIG51bGwpCiAgICAgICAgICAgIHJpZ2h0ID0gX2xvYy5nZXQoIm5vbi1udW1l\ncmljLXBhdGgiLCAoKFBhdGgpIHZhbDIpLmxhc3QoKS4KICAgICAgICAgICAg\nICAgIGdldE5hbWUoKSwgdDIuZ2V0TmFtZSgpKS5nZXRNZXNzYWdlKCk7CiAg\nICAgICAgZWxzZQogICAgICAgICAgICByaWdodCA9IF9sb2MuZ2V0KCJub24t\nbnVtZXJpYy12YWx1ZSIsIHQyLmdldE5hbWUoKSkuZ2V0TWVzc2FnZSgpOwog\nICAgICAgIHRocm93IG5ldyBVc2VyRXhjZXB0aW9uKF9sb2MuZ2V0KCJub24t\nbnVtZXJpYy1jb21wYXJpc29uIiwKICAgICAgICAgICAgbGVmdCwgcmlnaHQp\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIFBlcmZvcm0gY29udmVyc2lvbnMg\ndG8gbWFrZSB2YWx1ZXMgY29tcGF0aWJsZS4KICAgICAqLwogICAgcHJpdmF0\nZSB2b2lkIGNvbnZlcnRUeXBlc1F1b3RlZE51bWJlcnMoVmFsdWUgdmFsMSwg\nVmFsdWUgdmFsMikgewogICAgICAgIENsYXNzIHQxID0gdmFsMS5nZXRUeXBl\nKCk7CiAgICAgICAgQ2xhc3MgdDIgPSB2YWwyLmdldFR5cGUoKTsKCiAgICAg\nICAgLy8gaWYgd2UncmUgY29tcGFyaW5nIHRvIGEgc2luZ2xlLXF1b3RlZCBz\ndHJpbmcsIGNvbnZlcnQKICAgICAgICAvLyB0aGUgdmFsdWUgYWNjb3JkaW5n\nIHRvIHRoZSAzLjEgcnVsZXMuCiAgICAgICAgaWYgKHQxID09IFRZUEVfU1RS\nSU5HICYmIHZhbDEgaW5zdGFuY2VvZiBMaXRlcmFsCiAgICAgICAgICAgICYm\nICgoTGl0ZXJhbCkgdmFsMSkuZ2V0UGFyc2VUeXBlKCkgPT0gTGl0ZXJhbC5U\nWVBFX1NRX1NUUklORykgewogICAgICAgICAgICBTdHJpbmcgcyA9IChTdHJp\nbmcpICgoTGl0ZXJhbCkgdmFsMSkuZ2V0VmFsdWUoKTsKICAgICAgICAgICAg\naWYgKHMubGVuZ3RoKCkgPiAxKSB7CiAgICAgICAgICAgICAgICAoKExpdGVy\nYWwpIHZhbDEpLnNldFZhbHVlKHMuc3Vic3RyaW5nKDAsIDEpKTsKICAgICAg\nICAgICAgICAgIHZhbDEuc2V0SW1wbGljaXRUeXBlKENoYXJhY3Rlci5UWVBF\nKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAodDIgPT0g\nVFlQRV9TVFJJTkcgJiYgdmFsMiBpbnN0YW5jZW9mIExpdGVyYWwKICAgICAg\nICAgICAgJiYgKChMaXRlcmFsKSB2YWwyKS5nZXRQYXJzZVR5cGUoKSA9PSBM\naXRlcmFsLlRZUEVfU1FfU1RSSU5HKSB7CiAgICAgICAgICAgIFN0cmluZyBz\nID0gKFN0cmluZykgKChMaXRlcmFsKSB2YWwyKS5nZXRWYWx1ZSgpOwogICAg\nICAgICAgICBpZiAocy5sZW5ndGgoKSA+IDEpIHsKICAgICAgICAgICAgICAg\nICgoTGl0ZXJhbCkgdmFsMikuc2V0VmFsdWUocy5zdWJzdHJpbmcoMCwgMSkp\nOwogICAgICAgICAgICAgICAgdmFsMi5zZXRJbXBsaWNpdFR5cGUoQ2hhcmFj\ndGVyLlRZUEUpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAv\nLyBpZiB3ZSdyZSBjb21wYXJpbmcgdG8gYSBkb3VibGUtcXVvdGVkIHN0cmlu\nZywgY29udmVydCB0aGUKICAgICAgICAvLyB2YWx1ZSBkaXJlY3RseSB0byBh\nIG51bWJlcgogICAgICAgIGlmICh0MSA9PSBUWVBFX1NUUklORyAmJiB2YWwx\nIGluc3RhbmNlb2YgTGl0ZXJhbAogICAgICAgICAgICAmJiAoKExpdGVyYWwp\nIHZhbDEpLmdldFBhcnNlVHlwZSgpID09IExpdGVyYWwuVFlQRV9TVFJJTkcp\nIHsKICAgICAgICAgICAgU3RyaW5nIHMgPSAoU3RyaW5nKSAoKExpdGVyYWwp\nIHZhbDEpLmdldFZhbHVlKCk7CiAgICAgICAgICAgICgoTGl0ZXJhbCkgdmFs\nMSkuc2V0VmFsdWUoU3RyaW5ncy5wYXJzZShzLCBGaWx0ZXJzLndyYXAodDIp\nKSk7CiAgICAgICAgICAgIHZhbDEuc2V0SW1wbGljaXRUeXBlKHQyKTsKICAg\nICAgICB9CiAgICAgICAgaWYgKHQyID09IFRZUEVfU1RSSU5HICYmIHZhbDIg\naW5zdGFuY2VvZiBMaXRlcmFsCiAgICAgICAgICAgICYmICgoTGl0ZXJhbCkg\ndmFsMikuZ2V0UGFyc2VUeXBlKCkgPT0gTGl0ZXJhbC5UWVBFX1NUUklORykg\newogICAgICAgICAgICBTdHJpbmcgcyA9IChTdHJpbmcpICgoTGl0ZXJhbCkg\ndmFsMikuZ2V0VmFsdWUoKTsKICAgICAgICAgICAgKChMaXRlcmFsKSB2YWwy\nKS5zZXRWYWx1ZShTdHJpbmdzLnBhcnNlKHMsIEZpbHRlcnMud3JhcCh0MSkp\nKTsKICAgICAgICAgICAgdmFsMi5zZXRJbXBsaWNpdFR5cGUodDEpOwogICAg\nICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0cnVlIGlmIGdp\ndmVuIGNsYXNzIGNhbiBiZSB1c2VkIGFzIGEgbnVtYmVyLgogICAgICovCiAg\nICBwcml2YXRlIHN0YXRpYyBib29sZWFuIGlzTnVtZXJpYyhDbGFzcyB0eXBl\nKSB7CiAgICAgICAgdHlwZSA9IEZpbHRlcnMud3JhcCh0eXBlKTsKICAgICAg\nICByZXR1cm4gTnVtYmVyLmNsYXNzLmlzQXNzaWduYWJsZUZyb20odHlwZSkK\nICAgICAgICAgICAgfHwgdHlwZSA9PSBDaGFyYWN0ZXIuVFlQRSB8fCB0eXBl\nID09IFRZUEVfQ0hBUl9PQko7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQg\ndGhlIGltcGxpY2l0IHR5cGVzIG9mIHRoZSBnaXZlbiB2YWx1ZXMgYmFzZWQg\nb24gdGhlIGZhY3QgdGhhdAogICAgICogdGhlIGZpcnN0IGlzIHN1cHBvc2Vk\nIHRvIGNvbnRhaW4gdGhlIHNlY29uZC4KICAgICAqLwogICAgcHJvdGVjdGVk\nIHZvaWQgc2V0SW1wbGljaXRDb250YWluc1R5cGVzKFZhbHVlIHZhbDEsIFZh\nbHVlIHZhbDIsIGludCBvcCkgewogICAgICAgIGlmICh2YWwxLmdldFR5cGUo\nKSA9PSBUWVBFX09CSkVDVCkgewogICAgICAgICAgICBpZiAob3AgPT0gQ09O\nVEFJTlNfVFlQRV9FTEVNRU5UKQogICAgICAgICAgICAgICAgdmFsMS5zZXRJ\nbXBsaWNpdFR5cGUoQ29sbGVjdGlvbi5jbGFzcyk7CiAgICAgICAgICAgIGVs\nc2UKICAgICAgICAgICAgICAgIHZhbDEuc2V0SW1wbGljaXRUeXBlKE1hcC5j\nbGFzcyk7CiAgICAgICAgfQoKICAgICAgICBpZiAodmFsMi5nZXRUeXBlKCkg\nPT0gVFlQRV9PQkpFQ1QgJiYgdmFsMSBpbnN0YW5jZW9mIFBhdGgpIHsKICAg\nICAgICAgICAgRmllbGRNZXRhRGF0YSBmbWQgPSAoKFBhdGgpIHZhbDEpLmxh\nc3QoKTsKICAgICAgICAgICAgQ2xhc3NNZXRhRGF0YSBtZXRhOwogICAgICAg\nICAgICBpZiAoZm1kICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIGlmIChv\ncCA9PSBDT05UQUlOU19UWVBFX0VMRU1FTlQgfHwgb3AgPT0gQ09OVEFJTlNf\nVFlQRV9WQUxVRSkgewogICAgICAgICAgICAgICAgICAgIHZhbDIuc2V0SW1w\nbGljaXRUeXBlKGZtZC5nZXRFbGVtZW50KCkuZ2V0RGVjbGFyZWRUeXBlKCkp\nOwogICAgICAgICAgICAgICAgICAgIG1ldGEgPSBmbWQuZ2V0RWxlbWVudCgp\nLmdldERlY2xhcmVkVHlwZU1ldGFEYXRhKCk7CiAgICAgICAgICAgICAgICAg\nICAgaWYgKG1ldGEgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAg\nICB2YWwyLnNldE1ldGFEYXRhKG1ldGEpOwogICAgICAgICAgICAgICAgICAg\nICAgICBhZGRBY2Nlc3NQYXRoKG1ldGEpOwogICAgICAgICAgICAgICAgICAg\nIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAg\nICAgdmFsMi5zZXRJbXBsaWNpdFR5cGUoZm1kLmdldEtleSgpLmdldERlY2xh\ncmVkVHlwZSgpKTsKICAgICAgICAgICAgICAgICAgICBtZXRhID0gZm1kLmdl\ndEtleSgpLmdldERlY2xhcmVkVHlwZU1ldGFEYXRhKCk7CiAgICAgICAgICAg\nICAgICAgICAgaWYgKG1ldGEgIT0gbnVsbCkgewogICAgICAgICAgICAgICAg\nICAgICAgICB2YWwyLnNldE1ldGFEYXRhKG1ldGEpOwogICAgICAgICAgICAg\nICAgICAgICAgICBhZGRBY2Nlc3NQYXRoKG1ldGEpOwogICAgICAgICAgICAg\nICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAg\nICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFNldCB0aGUgaW1wbGljaXQg\ndHlwZSBvZiB0aGUgZ2l2ZW4gdmFsdWUgdG8gdGhlIGdpdmVuIGNsYXNzLgog\nICAgICovCiAgICBwcm90ZWN0ZWQgc3RhdGljIHZvaWQgc2V0SW1wbGljaXRU\neXBlKFZhbHVlIHZhbCwgQ2xhc3MgZXhwZWN0ZWQpIHsKICAgICAgICAvLyB3\nZSBuZXZlciBleHBlY3QgYSBwYyB0eXBlLCBzbyBubyBuZWVkIHRvIHdvcnJ5\nIGFib3V0IG1ldGFkYXRhCiAgICAgICAgaWYgKHZhbC5nZXRUeXBlKCkgPT0g\nVFlQRV9PQkpFQ1QpCiAgICAgICAgICAgIHZhbC5zZXRJbXBsaWNpdFR5cGUo\nZXhwZWN0ZWQpOwogICAgfQoKICAgIC8qKgogICAgICogVXNlZCBmb3Igb2J0\nYWluaW5nIHRoZSB7QGxpbmsgTG9jYWxpemVyfSB0byB1c2UgZm9yIHRyYW5z\nbGF0aW5nCiAgICAgKiBlcnJvciBtZXNzYWdlcy4KICAgICAqLwogICAgcHJv\ndGVjdGVkIGFic3RyYWN0IExvY2FsaXplciBnZXRMb2NhbGl6ZXIoKTsKCiAg\nICAvKioKICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgc3RyaW5nIGJlaW5n\nIHBhcnNlZDsgdXNlZCBmb3IgZXJyb3IgbWVzc2FnZXMuCgkgKi8KCXByb3Rl\nY3RlZCBhYnN0cmFjdCBTdHJpbmcgY3VycmVudFF1ZXJ5ICgpOwp9Cgo=\n","encoding":"base64"}

