{"sha":"a6a767bc480d533cd5c5c1489a39d0561bbe6dec","node_id":"MDQ6QmxvYjIwNjM2NDphNmE3NjdiYzQ4MGQ1MzNjZDVjNWMxNDg5YTM5ZDA1NjFiYmU2ZGVj","size":2653,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/a6a767bc480d533cd5c5c1489a39d0561bbe6dec","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5rZXJuZWwuZXhwczsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEua2VybmVsLlN0b3JlQ29udGV4dDsKCi8qKgogKiBBIHZhbHVlIHByb2R1\nY2VkIGZyb20gZXZhbHVhdGluZyBhIGN1c3RvbSBleHRlbnNpb24uCiAqCiAq\nIEBhdXRob3IgQWJlIFdoaXRlCiAqLwpjbGFzcyBFeHRlbnNpb24KICAgIGV4\ndGVuZHMgVmFsIHsKCiAgICBwcml2YXRlIGZpbmFsIEZpbHRlckxpc3RlbmVy\nIF9saXN0ZW5lcjsKICAgIHByaXZhdGUgZmluYWwgVmFsIF90YXJnZXQ7CiAg\nICBwcml2YXRlIGZpbmFsIFZhbCBfYXJnOwoKICAgIC8qKgogICAgICogQ29u\nc3RydWN0b3IuIFN1cHBseSBmaWx0ZXIgbGlzdGVuZXIsIGl0cyB0YXJnZXQg\ndmFsdWUsIGFuZAogICAgICogaXRzIGFyZ3VtZW50IHZhbHVlLCBpZiBhbnku\nCiAgICAgKi8KICAgIHB1YmxpYyBFeHRlbnNpb24oRmlsdGVyTGlzdGVuZXIg\nbGlzdGVuZXIsIFZhbCB0YXJnZXQsIFZhbCBhcmcpIHsKICAgICAgICBfbGlz\ndGVuZXIgPSBsaXN0ZW5lcjsKICAgICAgICBfdGFyZ2V0ID0gdGFyZ2V0Owog\nICAgICAgIF9hcmcgPSBhcmc7CiAgICB9CgogICAgcHVibGljIENsYXNzIGdl\ndFR5cGUoKSB7CiAgICAgICAgQ2xhc3MgdGFyZ2V0Q2xhc3MgPSAoX3Rhcmdl\ndCA9PSBudWxsKSA/IG51bGwgOiBfdGFyZ2V0LmdldFR5cGUoKTsKICAgICAg\nICByZXR1cm4gX2xpc3RlbmVyLmdldFR5cGUodGFyZ2V0Q2xhc3MsIGdldEFy\nZ1R5cGVzKCkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldEltcGxpY2l0\nVHlwZShDbGFzcyB0eXBlKSB7CiAgICB9CgogICAgcHJvdGVjdGVkIE9iamVj\ndCBldmFsKE9iamVjdCBjYW5kaWRhdGUsIE9iamVjdCBvcmlnLAogICAgICAg\nIFN0b3JlQ29udGV4dCBjdHgsIE9iamVjdFtdIHBhcmFtcykgewogICAgICAg\nIE9iamVjdCB0YXJnZXQgPSBudWxsOwogICAgICAgIENsYXNzIHRhcmdldENs\nYXNzID0gbnVsbDsKICAgICAgICBpZiAoX3RhcmdldCAhPSBudWxsKSB7CiAg\nICAgICAgICAgIHRhcmdldCA9IF90YXJnZXQuZXZhbChjYW5kaWRhdGUsIG9y\naWcsIGN0eCwgcGFyYW1zKTsKICAgICAgICAgICAgdGFyZ2V0Q2xhc3MgPSBf\ndGFyZ2V0LmdldFR5cGUoKTsKICAgICAgICB9CiAgICAgICAgT2JqZWN0IGFy\nZyA9IG51bGw7CiAgICAgICAgaWYgKF9hcmcgIT0gbnVsbCkKICAgICAgICAg\nICAgYXJnID0gX2FyZy5ldmFsKGNhbmRpZGF0ZSwgb3JpZywgY3R4LCBwYXJh\nbXMpOwogICAgICAgIHJldHVybiBfbGlzdGVuZXIuZXZhbHVhdGUodGFyZ2V0\nLCB0YXJnZXRDbGFzcywgZ2V0QXJncyhhcmcpLAogICAgICAgICAgICBnZXRB\ncmdUeXBlcygpLCBjYW5kaWRhdGUsIGN0eCk7CiAgICB9CgogICAgcHJpdmF0\nZSBDbGFzc1tdIGdldEFyZ1R5cGVzKCkgewogICAgICAgIGlmIChfYXJnID09\nIG51bGwpCiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIGlmIChf\nYXJnIGluc3RhbmNlb2YgQXJncykKICAgICAgICAgICAgcmV0dXJuICgoQXJn\ncykgX2FyZykuZ2V0VHlwZXMoKTsKICAgICAgICByZXR1cm4gbmV3IENsYXNz\nW117IF9hcmcuZ2V0VHlwZSgpIH07CiAgICB9CgogICAgcHJpdmF0ZSBPYmpl\nY3RbXSBnZXRBcmdzKE9iamVjdCBhcmcpIHsKICAgICAgICBpZiAoYXJnID09\nIG51bGwpCiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIGlmIChf\nYXJnIGluc3RhbmNlb2YgQXJncykKICAgICAgICAgICAgcmV0dXJuIChPYmpl\nY3RbXSkgYXJnOwogICAgICAgIHJldHVybiBuZXcgT2JqZWN0W117IGFyZyB9\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGFjY2VwdFZpc2l0KEV4cHJlc3Np\nb25WaXNpdG9yIHZpc2l0b3IpIHsKICAgICAgICB2aXNpdG9yLmVudGVyKHRo\naXMpOwogICAgICAgIGlmIChfdGFyZ2V0ICE9IG51bGwpCiAgICAgICAgICAg\nIF90YXJnZXQuYWNjZXB0VmlzaXQodmlzaXRvcik7CiAgICAgICAgaWYgKF9h\ncmcgIT0gbnVsbCkKICAgICAgICAgICAgX2FyZy5hY2NlcHRWaXNpdCh2aXNp\ndG9yKTsKICAgICAgICB2aXNpdG9yLmV4aXQodGhpcyk7CiAgICB9Cn0KCg==\n","encoding":"base64"}

