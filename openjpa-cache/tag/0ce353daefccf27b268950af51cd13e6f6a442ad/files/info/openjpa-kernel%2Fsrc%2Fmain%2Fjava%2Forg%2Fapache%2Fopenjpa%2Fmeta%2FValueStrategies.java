{"sha":"9026a1952b40b72d9dd75cb856a54d4af53b65e1","node_id":"MDQ6QmxvYjIwNjM2NDo5MDI2YTE5NTJiNDBiNzJkOWRkNzVjYjg1NmE1NGQ0YWY1M2I2NWUx","size":4463,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/9026a1952b40b72d9dd75cb856a54d4af53b65e1","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5tZXRhOwoKaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2xs\nZWN0aW9ucy5iaWRpbWFwLlRyZWVCaWRpTWFwOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmNvbmYuT3BlbkpQQUNvbmZpZ3VyYXRpb247CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLlN0cmluZ0Rpc3RhbmNlOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuTWV0YURhdGFFeGNlcHRp\nb247CmltcG9ydCBzZXJwLnV0aWwuTnVtYmVyczsKCi8qKgogKiBTdHJhdGVn\naWVzIGZvciBwZXJzaXN0ZW50IHZhbHVlIGdlbmVyYXRpb24uCiAqCiAqIEBh\ndXRob3IgQWJlIFdoaXRlCiAqIEBzaW5jZSAwLjQuMAogKi8KcHVibGljIGNs\nYXNzIFZhbHVlU3RyYXRlZ2llcyB7CgogICAgLyoqCiAgICAgKiBObyB2YWx1\nZSBzdHJhdGVneS4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBp\nbnQgTk9ORSA9IDA7CgogICAgLyoqCiAgICAgKiAibmF0aXZlIiB2YWx1ZSBz\ndHJhdGVneS4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQg\nTkFUSVZFID0gMTsKCiAgICAvKioKICAgICAqICJzZXF1ZW5jZSIgdmFsdWUg\nc3RyYXRlZ3kuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50\nIFNFUVVFTkNFID0gMjsKCiAgICAvKioKICAgICAqICJhdXRvYXNzaWduZWQi\nIHZhbHVlIHN0cmF0ZWd5LgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZp\nbmFsIGludCBBVVRPQVNTSUdOID0gMzsKCiAgICAvKioKICAgICAqICJpbmNy\nZW1lbnQiIHZhbHVlIHN0cmF0ZWd5LgogICAgICovCiAgICBwdWJsaWMgc3Rh\ndGljIGZpbmFsIGludCBJTkNSRU1FTlQgPSA0OwoKICAgIC8qKgogICAgICog\nInV1aWQtc3RyaW5nIiB2YWx1ZSBzdHJhdGVneS4KICAgICAqLwogICAgcHVi\nbGljIHN0YXRpYyBmaW5hbCBpbnQgVVVJRF9TVFJJTkcgPSA1OwoKICAgIC8q\nKgogICAgICogInV1aWQtaGV4IiB2YWx1ZSBzdHJhdGVneS4KICAgICAqLwog\nICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgVVVJRF9IRVggPSA2OwoKICAg\nIHByaXZhdGUgc3RhdGljIGZpbmFsIExvY2FsaXplciBfbG9jID0gTG9jYWxp\nemVyLmZvclBhY2thZ2UKICAgICAgICAoVmFsdWVTdHJhdGVnaWVzLmNsYXNz\nKTsKCiAgICAvLyB0YWJsZSBvZiBuYW1lcyBhbmQgc3RyYXRlZ2llcwogICAg\ncHJpdmF0ZSBzdGF0aWMgZmluYWwgVHJlZUJpZGlNYXAgX21hcCA9IG5ldyBU\ncmVlQmlkaU1hcCgpOwoKICAgIHN0YXRpYyB7CiAgICAgICAgX21hcC5wdXQo\nIm5vbmUiLCBOdW1iZXJzLnZhbHVlT2YoTk9ORSkpOwogICAgICAgIF9tYXAu\ncHV0KCJuYXRpdmUiLCBOdW1iZXJzLnZhbHVlT2YoTkFUSVZFKSk7CiAgICAg\nICAgX21hcC5wdXQoInNlcXVlbmNlIiwgTnVtYmVycy52YWx1ZU9mKFNFUVVF\nTkNFKSk7CiAgICAgICAgX21hcC5wdXQoImF1dG9hc3NpZ24iLCBOdW1iZXJz\nLnZhbHVlT2YoQVVUT0FTU0lHTikpOwogICAgICAgIF9tYXAucHV0KCJpbmNy\nZW1lbnQiLCBOdW1iZXJzLnZhbHVlT2YoSU5DUkVNRU5UKSk7CiAgICAgICAg\nX21hcC5wdXQoInV1aWQtc3RyaW5nIiwgTnVtYmVycy52YWx1ZU9mKFVVSURf\nU1RSSU5HKSk7CiAgICAgICAgX21hcC5wdXQoInV1aWQtaGV4IiwgTnVtYmVy\ncy52YWx1ZU9mKFVVSURfSEVYKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBD\nb252ZXJ0IHRoZSBnaXZlbiBzdHJhdGVneSB0byBhIG5hbWUuCiAgICAgKi8K\nICAgIHB1YmxpYyBzdGF0aWMgU3RyaW5nIGdldE5hbWUoaW50IHN0cmF0ZWd5\nKSB7CiAgICAgICAgT2JqZWN0IGNvZGUgPSBOdW1iZXJzLnZhbHVlT2Yoc3Ry\nYXRlZ3kpOwogICAgICAgIFN0cmluZyBuYW1lID0gKFN0cmluZykgX21hcC5n\nZXRLZXkoY29kZSk7CiAgICAgICAgaWYgKG5hbWUgIT0gbnVsbCkKICAgICAg\nICAgICAgcmV0dXJuIG5hbWU7CiAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxB\ncmd1bWVudEV4Y2VwdGlvbihjb2RlLnRvU3RyaW5nKCkpOwogICAgfQoKICAg\nIC8qKgogICAgICogQ29udmVydCB0aGUgZ2l2ZW4gc3RyYXRlZ3kgbmFtZSB0\nbyBpdHMgY29uc3RhbnQuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgaW50\nIGdldENvZGUoU3RyaW5nIHZhbCwgT2JqZWN0IGNvbnRleHQpIHsKICAgICAg\nICBpZiAodmFsID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBOT05FOwog\nICAgICAgIE9iamVjdCBjb2RlID0gX21hcC5nZXQodmFsKTsKICAgICAgICBp\nZiAoY29kZSAhPSBudWxsKQogICAgICAgICAgICByZXR1cm4gKChOdW1iZXIp\nIGNvZGUpLmludFZhbHVlKCk7CgogICAgICAgIC8vIG5vdCBhIHJlY29nbml6\nZWQgc3RyYXRlZ3k7IGNoZWNrIGZvciB0eXBvCiAgICAgICAgU3RyaW5nIGNs\nb3Nlc3QgPSBTdHJpbmdEaXN0YW5jZS5nZXRDbG9zZXN0TGV2ZW5zaHRlaW5E\naXN0YW5jZSh2YWwsCiAgICAgICAgICAgIF9tYXAua2V5U2V0KCksIC41Rik7\nCiAgICAgICAgU3RyaW5nIG1zZzsKICAgICAgICBpZiAoY2xvc2VzdCAhPSBu\ndWxsKQogICAgICAgICAgICBtc2cgPSBfbG9jLmdldCgiYmFkLXZhbHVlLXN0\ncmF0ZWd5LWhpbnQiLCBuZXcgT2JqZWN0W117CiAgICAgICAgICAgICAgICBj\nb250ZXh0LCB2YWwsIGNsb3Nlc3QsIF9tYXAua2V5U2V0KCkgfSkuZ2V0TWVz\nc2FnZSgpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgbXNnID0gX2xvYy5n\nZXQoImJhZC12YWx1ZS1zdHJhdGVneSIsIGNvbnRleHQsIHZhbCwgX21hcC5r\nZXlTZXQoKSkKICAgICAgICAgICAgICAgIC5nZXRNZXNzYWdlKCk7CiAgICAg\nICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihtc2cpOwog\nICAgfQoKICAgIC8qKgogICAgICogQXNzZXJ0IHRoYXQgdGhlIGdpdmVuIHN0\ncmF0ZWd5IGlzIHN1cHBvcnRlZCBieSB0aGUgY3VycmVudCBydW50aW1lLgog\nICAgICovCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgYXNzZXJ0U3VwcG9ydGVk\nKGludCBzdHJhdGVneSwgTWV0YURhdGFDb250ZXh0IGNvbnRleHQsCiAgICAg\nICAgU3RyaW5nIGF0dHJpYnV0ZU5hbWUpIHsKICAgICAgICBPcGVuSlBBQ29u\nZmlndXJhdGlvbiBjb25mID0gY29udGV4dC5nZXRSZXBvc2l0b3J5KCkuZ2V0\nQ29uZmlndXJhdGlvbigpOwogICAgICAgIGJvb2xlYW4gc3VwcG9ydGVkID0g\ndHJ1ZTsKICAgICAgICBzd2l0Y2ggKHN0cmF0ZWd5KSB7CiAgICAgICAgICAg\nIGNhc2UgQVVUT0FTU0lHTjoKICAgICAgICAgICAgICAgIHN1cHBvcnRlZCA9\nIGNvbmYuc3VwcG9ydGVkT3B0aW9ucygpLmNvbnRhaW5zCiAgICAgICAgICAg\nICAgICAgICAgKE9wZW5KUEFDb25maWd1cmF0aW9uLk9QVElPTl9WQUxVRV9B\nVVRPQVNTSUdOKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAg\nICBjYXNlIElOQ1JFTUVOVDoKICAgICAgICAgICAgICAgIHN1cHBvcnRlZCA9\nIGNvbmYuc3VwcG9ydGVkT3B0aW9ucygpLmNvbnRhaW5zCiAgICAgICAgICAg\nICAgICAgICAgKE9wZW5KUEFDb25maWd1cmF0aW9uLk9QVElPTl9WQUxVRV9J\nTkNSRU1FTlQpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAg\nIGNhc2UgTkFUSVZFOgogICAgICAgICAgICAgICAgc3VwcG9ydGVkID0gY29u\ndGV4dCBpbnN0YW5jZW9mIENsYXNzTWV0YURhdGE7CiAgICAgICAgICAgICAg\nICBicmVhazsKICAgICAgICB9CiAgICAgICAgaWYgKCFzdXBwb3J0ZWQpCiAg\nICAgICAgICAgIHRocm93IG5ldyBNZXRhRGF0YUV4Y2VwdGlvbihfbG9jLmdl\ndCgidW5zdXBwb3J0ZWQtdmFsdWUtc3RyYXRlZ3kiLAogICAgICAgICAgICAg\nICAgY29udGV4dCwgZ2V0TmFtZShzdHJhdGVneSksIGF0dHJpYnV0ZU5hbWUp\nKTsKCX0KfQo=\n","encoding":"base64"}

