{"sha":"f44d2a00c849d2be06d6f322160e9569292b779f","node_id":"MDQ6QmxvYjIwNjM2NDpmNDRkMmEwMGM4NDlkMmJlMDZkNmYzMjIxNjBlOTU2OTI5MmI3Nzlm","size":3335,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/f44d2a00c849d2be06d6f322160e9569292b779f","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS51dGlsOwoKaW1wb3J0IGphdmEudXRpbC5CaXRTZXQ7CgppbXBv\ncnQgb3JnLmFwYWNoZS5jb21tb25zLmxhbmcuT2JqZWN0VXRpbHM7CgovKioK\nICogVXRpbGl0aWVzIGZvciBkZWFsaW5nIHdpdGggYSBzaW1wbGUgc3RhdGUg\naW1hZ2UgY29uc2lzdGluZyBvZiBhbgogKiA8Y29kZT5PYmplY3RbXTwvY29k\nZT4gb2YgZmllbGQgdmFsdWVzIHdpdGggb25lIGV4dHJhIGluZGV4IGNvbnRh\naW5pbmcgYQogKiB7QGxpbmsgQml0U2V0fSBvZiBsb2FkZWQgZmllbGRzLiBU\naGlzIHNpbXBsaXN0aWMgc3RhdGUgaW1hZ2UgbWlnaHQgYmUgdXNlZAogKiBm\nb3Igb3B0aW1pc3RpYyB2ZXJzaW9uaW5nLgogKgogKiBAYXV0aG9yIEFiZSBX\naGl0ZQogKiBAbm9qYXZhZG9jCiAqLwpwdWJsaWMgY2xhc3MgQXJyYXlTdGF0\nZUltYWdlIHsKCiAgICAvKioKICAgICAqIENyZWF0ZSBhIG5ldyBzdGF0ZSBp\nbWFnZSBmb3IgdGhlIGdpdmVuIG51bWJlciBvZiBmaWVsZHMuCiAgICAgKi8K\nICAgIHB1YmxpYyBzdGF0aWMgT2JqZWN0W10gbmV3SW1hZ2UoaW50IG51bUZp\nZWxkcykgewogICAgICAgIE9iamVjdFtdIHN0YXRlID0gbmV3IE9iamVjdFtu\ndW1GaWVsZHMgKyAxXTsKICAgICAgICBzdGF0ZVtudW1GaWVsZHNdID0gbmV3\nIEJpdFNldChudW1GaWVsZHMpOwogICAgICAgIHJldHVybiBzdGF0ZTsKICAg\nIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0cnVlIGlmIHRoZSBnaXZlbiB2\nZXJzaW9uIG9iamVjdCBhcHBlYXJzIHRvIGJlIGFuIGFycmF5IHN0YXRlCiAg\nICAgKiBpbWFnZS4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBib29sZWFu\nIGlzSW1hZ2UoT2JqZWN0IG9iaikgewogICAgICAgIGlmICghKG9iaiBpbnN0\nYW5jZW9mIE9iamVjdFtdKSkKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwog\nICAgICAgIE9iamVjdFtdIGFyciA9IChPYmplY3RbXSkgb2JqOwogICAgICAg\nIHJldHVybiBhcnIubGVuZ3RoID4gMCAmJiBhcnJbYXJyLmxlbmd0aCAtIDFd\nIGluc3RhbmNlb2YgQml0U2V0OwogICAgfQoKICAgIC8qKgogICAgICogR2V0\nIHRoZSBsb2FkZWQgbWFzayBmcm9tIGEgc3RhdGUgaW1hZ2UuCiAgICAgKi8K\nICAgIHB1YmxpYyBzdGF0aWMgQml0U2V0IGdldExvYWRlZChPYmplY3RbXSBz\ndGF0ZSkgewogICAgICAgIHJldHVybiAoQml0U2V0KSBzdGF0ZVtzdGF0ZS5s\nZW5ndGggLSAxXTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCB0aGUgbG9h\nZGVkIG1hc2sgaW50byBhIHN0YXRlIGltYWdlLgogICAgICovCiAgICBwdWJs\naWMgc3RhdGljIHZvaWQgc2V0TG9hZGVkKE9iamVjdFtdIHN0YXRlLCBCaXRT\nZXQgbG9hZGVkKSB7CiAgICAgICAgc3RhdGVbc3RhdGUubGVuZ3RoIC0gMV0g\nPSBsb2FkZWQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBDbG9uZSBhIHN0YXRl\nIGFycmF5LgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIE9iamVjdFtdIGNs\nb25lKE9iamVjdFtdIHN0YXRlKSB7CiAgICAgICAgT2JqZWN0W10gY29weSA9\nIG5ldyBPYmplY3Rbc3RhdGUubGVuZ3RoXTsKICAgICAgICBTeXN0ZW0uYXJy\nYXljb3B5KHN0YXRlLCAwLCBjb3B5LCAwLCBzdGF0ZS5sZW5ndGggLSAxKTsK\nICAgICAgICBCaXRTZXQgbG9hZGVkID0gKEJpdFNldCkgc3RhdGVbc3RhdGUu\nbGVuZ3RoIC0gMV07CiAgICAgICAgY29weVtjb3B5Lmxlbmd0aCAtIDFdID0g\nbG9hZGVkLmNsb25lKCk7CiAgICAgICAgcmV0dXJuIGNvcHk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBSZXR1cm4gd2hldGhlciB0aGUgZ2l2ZW4gaW1hZ2Vz\nIGFyZSBlcXVpdmFsZW50IGZyb20gYW4gb3B0aW1pc3RpYwogICAgICogbG9j\na2luZyBwZXJzcGVjdGl2ZS4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBi\nb29sZWFuIHNhbWVWZXJzaW9uKE9iamVjdFtdIHN0YXRlMSwgT2JqZWN0W10g\nc3RhdGUyKSB7CiAgICAgICAgaWYgKHN0YXRlMSA9PSBzdGF0ZTIpCiAgICAg\nICAgICAgIHJldHVybiB0cnVlOwoKICAgICAgICAvLyBpZiBlaXRoZXIgc3Rh\ndGUgaXMgbnVsbCwgdGhlbiB3ZSByZXBvcnQgdGhhdCBpdCBpcyB0aGUKICAg\nICAgICAvLyBzYW1lOiB0aGlzIGlzIGJlY2F1c2UgYSBudWxsIHZlcnNpb24g\nd2lsbCBpbmRpY2F0ZSB0aGF0CiAgICAgICAgLy8gdGhlcmUgYXJlIG5vIGxv\nYWRlZCBmaWVsZHMgaW4gdGhlIHZlcnNpb24gYXQgYWxsLCB3aGljaAogICAg\nICAgIC8vIGluZGljYXRlcyB0aGF0IHRoZXJlIGlzIG5vdGhpbmcgdG8gY29t\ncGFyZQogICAgICAgIGlmIChzdGF0ZTEgPT0gbnVsbCB8fCBzdGF0ZTIgPT0g\nbnVsbCkKICAgICAgICAgICAgcmV0dXJuIHRydWU7CgogICAgICAgIC8vIGNo\nZWNrIG9ubHkgdGhlIGZpZWxkcyB0aGF0IGFyZSBpbiB0aGUgbG9hZGVkIHNl\ndCBmb3IgdGhlCiAgICAgICAgLy8gZmlyc3QgdmVyc2lvbgogICAgICAgIEJp\ndFNldCBsb2FkZWQxID0gZ2V0TG9hZGVkKHN0YXRlMSk7CiAgICAgICAgQml0\nU2V0IGxvYWRlZDIgPSBnZXRMb2FkZWQoc3RhdGUyKTsKICAgICAgICBmb3Ig\nKGludCBpID0gMCwgbWF4ID0gbG9hZGVkMS5sZW5ndGgoKTsgaSA8IG1heDsg\naSsrKSB7CiAgICAgICAgICAgIGlmIChsb2FkZWQxLmdldChpKSAmJiBsb2Fk\nZWQyLmdldChpKQogICAgICAgICAgICAgICAgJiYgIU9iamVjdFV0aWxzLmVx\ndWFscyhzdGF0ZTFbaV0sIHN0YXRlMltpXSkpCiAgICAgICAgICAgICAgICBy\nZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwoJ\nfQp9IAo=\n","encoding":"base64"}

