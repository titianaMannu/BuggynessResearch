{"sha":"a19c03687fee1f62982fc2eb7201a385dce243f7","node_id":"MDQ6QmxvYjIwNjM2NDphMTljMDM2ODdmZWUxZjYyOTgyZmMyZWI3MjAxYTM4NWRjZTI0M2Y3","size":17456,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/a19c03687fee1f62982fc2eb7201a385dce243f7","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS51dGlsOwoKaW1wb3J0IGphdmEudXRpbC5BYnN0cmFjdENvbGxl\nY3Rpb247CmltcG9ydCBqYXZhLnV0aWwuQWJzdHJhY3RTZXQ7CmltcG9ydCBq\nYXZhLnV0aWwuQ29sbGVjdGlvbjsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0\naW9uczsKaW1wb3J0IGphdmEudXRpbC5IYXNoTWFwOwppbXBvcnQgamF2YS51\ndGlsLkl0ZXJhdG9yOwppbXBvcnQgamF2YS51dGlsLk1hcDsKaW1wb3J0IGph\ndmEudXRpbC5TZXQ7CgppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvbGxl\nY3Rpb25zLlByZWRpY2F0ZTsKaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5j\nb2xsZWN0aW9ucy5pdGVyYXRvcnMuRmlsdGVySXRlcmF0b3I7CmltcG9ydCBv\ncmcuYXBhY2hlLmNvbW1vbnMuY29sbGVjdGlvbnMuaXRlcmF0b3JzLkl0ZXJh\ndG9yQ2hhaW47CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwu\nTFJVTWFwOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLlJl\nZmVyZW5jZUhhc2hNYXA7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGli\nLnV0aWwuUmVmZXJlbmNlTWFwOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmxpYi51dGlsLlNpemVkTWFwOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmxpYi51dGlsLmNvbmN1cnJlbnQuQ29uY3VycmVudEhhc2hNYXA7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuY29uY3VycmVudC5Db25j\ndXJyZW50UmVmZXJlbmNlSGFzaE1hcDsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5saWIudXRpbC5jb25jdXJyZW50LlJlZW50cmFudExvY2s7CgovKioK\nICogRml4ZWQtc2l6ZSBtYXAgdGhhdCBoYXMgYWJpbGl0eSB0byBwaW4vdW5w\naW4gZW50cmllcyBhbmQgbW92ZSBvdmVyZmxvdyB0bwogKiBhIGJhY2tpbmcg\nc29mdCBtYXAuCiAqCiAqIEBhdXRob3IgUGF0cmljayBMaW5za2V5CiAqIEBh\ndXRob3IgQWJlIFdoaXRlCiAqLwpwdWJsaWMgY2xhc3MgQ2FjaGVNYXAKICAg\nIGltcGxlbWVudHMgTWFwIHsKCiAgICAvKioKICAgICAqIFRoZSBtYXAgZm9y\nIG5vbi1leHBpcmVkIGFuZCBub24tcGlubmVkIHJlZmVyZW5jZXMuCiAgICAg\nKi8KICAgIHByb3RlY3RlZCBmaW5hbCBTaXplZE1hcCBjYWNoZU1hcDsKCiAg\nICAvKioKICAgICAqIFRoZSBtYXAgZm9yIGV4cGlyZWQgcmVmZXJlbmNlcy4K\nICAgICAqLwogICAgcHJvdGVjdGVkIGZpbmFsIFNpemVkTWFwIHNvZnRNYXA7\nCgogICAgLyoqCiAgICAgKiBUaGUgc2V0IG9mIG9iamVjdHMgcGlubmVkIGlu\ndG8gdGhlIGNhY2hlLgogICAgICovCiAgICBwcm90ZWN0ZWQgZmluYWwgTWFw\nIHBpbm5lZE1hcDsKCiAgICAvLyBudW1iZXIgb2YgcGlubmVkIHZhbHVlcyAo\nbm90IGluY2x1ZGluZyBrZXlzIG5vdCBtYXBwZWQgdG8gdmFsdWVzKQogICAg\ncHJpdmF0ZSBpbnQgX3Bpbm5lZFNpemUgPSAwOwoKICAgIHByaXZhdGUgZmlu\nYWwgUmVlbnRyYW50TG9jayBfd3JpdGVMb2NrID0gbmV3IFJlZW50cmFudExv\nY2soKTsKICAgIHByaXZhdGUgZmluYWwgUmVlbnRyYW50TG9jayBfcmVhZExv\nY2s7CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYSBub24tTFJVIChhbmQgdGhl\ncmVmb3JlIGhpZ2hseSBjb25jdXJyZW50KSBjYWNoZSBtYXAgd2l0aCBhCiAg\nICAgKiBzaXplIG9mIDEwMDAuCiAgICAgKi8KICAgIHB1YmxpYyBDYWNoZU1h\ncCgpIHsKICAgICAgICB0aGlzKGZhbHNlLCAxMDAwKTsKICAgIH0KCiAgICAv\nKioKICAgICAqIENyZWF0ZSBhIGNhY2hlIG1hcCB3aXRoIHRoZSBnaXZlbiBw\ncm9wZXJ0aWVzLgogICAgICovCiAgICBwdWJsaWMgQ2FjaGVNYXAoYm9vbGVh\nbiBscnUsIGludCBtYXgpIHsKICAgICAgICB0aGlzKGxydSwgbWF4LCBtYXgg\nLyAyLCAuNzVGKTsKICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhIGNh\nY2hlIG1hcCB3aXRoIHRoZSBnaXZlbiBwcm9wZXJ0aWVzLgogICAgICovCiAg\nICBwdWJsaWMgQ2FjaGVNYXAoYm9vbGVhbiBscnUsIGludCBtYXgsIGludCBz\naXplLCBmbG9hdCBsb2FkKSB7CiAgICAgICAgaWYgKHNpemUgPCAwKQogICAg\nICAgICAgICBzaXplID0gNTAwOwogICAgICAgIGlmICghbHJ1KSB7CiAgICAg\nICAgICAgIGNhY2hlTWFwID0gbmV3IENvbmN1cnJlbnRIYXNoTWFwKHNpemUs\nIGxvYWQpIHsKICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIG92ZXJmbG93\nUmVtb3ZlZChPYmplY3Qga2V5LCBPYmplY3QgdmFsdWUpIHsKICAgICAgICAg\nICAgICAgICAgICBjYWNoZU1hcE92ZXJmbG93UmVtb3ZlZChrZXksIHZhbHVl\nKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAg\nICAgc29mdE1hcCA9IG5ldyBDb25jdXJyZW50UmVmZXJlbmNlSGFzaE1hcChS\nZWZlcmVuY2VNYXAuSEFSRCwKICAgICAgICAgICAgICAgIFJlZmVyZW5jZU1h\ncC5TT0ZULCBzaXplLCBsb2FkKSB7CiAgICAgICAgICAgICAgICBwdWJsaWMg\ndm9pZCBvdmVyZmxvd1JlbW92ZWQoT2JqZWN0IGtleSwgT2JqZWN0IHZhbHVl\nKSB7CiAgICAgICAgICAgICAgICAgICAgc29mdE1hcE92ZXJmbG93UmVtb3Zl\nZChrZXksIHZhbHVlKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAg\nICAgICBwdWJsaWMgdm9pZCB2YWx1ZUV4cGlyZWQoT2JqZWN0IGtleSkgewog\nICAgICAgICAgICAgICAgICAgIHNvZnRNYXBWYWx1ZUV4cGlyZWQoa2V5KTsK\nICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAg\ncGlubmVkTWFwID0gbmV3IENvbmN1cnJlbnRIYXNoTWFwKCk7CiAgICAgICAg\nICAgIF9yZWFkTG9jayA9IG51bGw7CiAgICAgICAgfSBlbHNlIHsKICAgICAg\nICAgICAgY2FjaGVNYXAgPSBuZXcgTFJVTWFwKHNpemUsIGxvYWQpIHsKICAg\nICAgICAgICAgICAgIHB1YmxpYyB2b2lkIG92ZXJmbG93UmVtb3ZlZChPYmpl\nY3Qga2V5LCBPYmplY3QgdmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICBj\nYWNoZU1hcE92ZXJmbG93UmVtb3ZlZChrZXksIHZhbHVlKTsKICAgICAgICAg\nICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgc29mdE1hcCA9\nIG5ldyBSZWZlcmVuY2VIYXNoTWFwKFJlZmVyZW5jZU1hcC5IQVJELAogICAg\nICAgICAgICAgICAgUmVmZXJlbmNlTWFwLlNPRlQsIHNpemUsIGxvYWQpIHsK\nICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIG92ZXJmbG93UmVtb3ZlZChP\nYmplY3Qga2V5LCBPYmplY3QgdmFsdWUpIHsKICAgICAgICAgICAgICAgICAg\nICBzb2Z0TWFwT3ZlcmZsb3dSZW1vdmVkKGtleSwgdmFsdWUpOwogICAgICAg\nICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHB1YmxpYyB2b2lkIHZhbHVl\nRXhwaXJlZChPYmplY3Qga2V5KSB7CiAgICAgICAgICAgICAgICAgICAgc29m\ndE1hcFZhbHVlRXhwaXJlZChrZXkpOwogICAgICAgICAgICAgICAgfQogICAg\nICAgICAgICB9OwogICAgICAgICAgICBwaW5uZWRNYXAgPSBuZXcgSGFzaE1h\ncCgpOwogICAgICAgICAgICBfcmVhZExvY2sgPSBfd3JpdGVMb2NrOwogICAg\nICAgIH0KICAgICAgICBjYWNoZU1hcC5zZXRNYXhTaXplKChtYXggPCAwKSA/\nIEludGVnZXIuTUFYX1ZBTFVFIDogbWF4KTsKICAgIH0KCiAgICAvKioKICAg\nICAqIENhbGxlZCBmcm9tIHtAbGluayBTaXplZE1hcCNvdmVyZmxvd1JlbW92\nZWR9IGluIHRoZSBjYWNoZSBtYXAuCiAgICAgKi8KICAgIHByb3RlY3RlZCB2\nb2lkIGNhY2hlTWFwT3ZlcmZsb3dSZW1vdmVkKE9iamVjdCBrZXksIE9iamVj\ndCB2YWx1ZSkgewogICAgICAgIGlmIChzb2Z0TWFwLnNpemUoKSA8IHNvZnRN\nYXAuZ2V0TWF4U2l6ZSgpKQogICAgICAgICAgICBwdXQoc29mdE1hcCwga2V5\nLCB2YWx1ZSk7CiAgICAgICAgZWxzZQogICAgICAgICAgICBlbnRyeVJlbW92\nZWQoa2V5LCB2YWx1ZSwgdHJ1ZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBD\nYWxsZWQgZnJvbSB7QGxpbmsgU2l6ZWRNYXAjb3ZlcmZsb3dSZW1vdmVkfSBp\nbiB0aGUgc29mdCBtYXAuCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIHNv\nZnRNYXBPdmVyZmxvd1JlbW92ZWQoT2JqZWN0IGtleSwgT2JqZWN0IHZhbHVl\nKSB7CiAgICAgICAgZW50cnlSZW1vdmVkKGtleSwgdmFsdWUsIHRydWUpOwog\nICAgfQoKICAgIC8qKgogICAgICogQ2FsbGVkIHdoZW4gYSB2YWx1ZSBleHBp\ncmVzIGZyb20gdGhlIHNvZnQgbWFwLgogICAgICovCiAgICBwcm90ZWN0ZWQg\ndm9pZCBzb2Z0TWFwVmFsdWVFeHBpcmVkKE9iamVjdCBrZXkpIHsKICAgICAg\nICBlbnRyeVJlbW92ZWQoa2V5LCBudWxsLCB0cnVlKTsKICAgIH0KCiAgICAv\nKioKICAgICAqIFB1dCB0aGUgZ2l2ZW4gZW50cnkgaW50byB0aGUgZ2l2ZW4g\nbWFwLiBBbGxvd3Mgc3ViY2xhc3NlcyB0bwogICAgICogdGFrZSBhZGRpdGlv\nbmFsIGFjdGlvbnMuCiAgICAgKi8KICAgIHByb3RlY3RlZCBPYmplY3QgcHV0\nKE1hcCBtYXAsIE9iamVjdCBrZXksIE9iamVjdCB2YWx1ZSkgewogICAgICAg\nIHJldHVybiBtYXAucHV0KGtleSwgdmFsdWUpOwogICAgfQoKICAgIC8qKgog\nICAgICogUmVtb3ZlIHRoZSBnaXZlbiBrZXkgZnJvbSB0aGUgZ2l2ZW4gbWFw\nLiBBbGxvd3Mgc3ViY2xhc3NlcyB0bwogICAgICogdGFrZSBhZGRpdGlvbmFs\nIGFjdGlvbnMuCiAgICAgKi8KICAgIHByb3RlY3RlZCBPYmplY3QgcmVtb3Zl\nKE1hcCBtYXAsIE9iamVjdCBrZXkpIHsKICAgICAgICByZXR1cm4gbWFwLnJl\nbW92ZShrZXkpOwogICAgfQoKICAgIC8qKgogICAgICogQWNxdWlyZSByZWFk\nIGxvY2suCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHJlYWRMb2NrKCkgewog\nICAgICAgIGlmIChfcmVhZExvY2sgIT0gbnVsbCkKICAgICAgICAgICAgX3Jl\nYWRMb2NrLmxvY2soKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJlbGVhc2Ug\ncmVhZCBsb2NrLgogICAgICovCiAgICBwdWJsaWMgdm9pZCByZWFkVW5sb2Nr\nKCkgewogICAgICAgIGlmIChfcmVhZExvY2sgIT0gbnVsbCkKICAgICAgICAg\nICAgX3JlYWRMb2NrLnVubG9jaygpOwogICAgfQoKICAgIC8qKgogICAgICog\nQWNxdWlyZSB3cml0ZSBsb2NrLgogICAgICovCiAgICBwdWJsaWMgdm9pZCB3\ncml0ZUxvY2soKSB7CiAgICAgICAgX3dyaXRlTG9jay5sb2NrKCk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBSZWxlYXNlIHdyaXRlIGxvY2suCiAgICAgKi8K\nICAgIHB1YmxpYyB2b2lkIHdyaXRlVW5sb2NrKCkgewogICAgICAgIF93cml0\nZUxvY2sudW5sb2NrKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVy\nIHRoaXMgY2FjaGUgbWFwIHVzZXMgTFJVIGV2aWN0aW9uLgogICAgICovCiAg\nICBwdWJsaWMgYm9vbGVhbiBpc0xSVSgpIHsKICAgICAgICByZXR1cm4gX3Jl\nYWRMb2NrICE9IG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgbWF4\naW11bSBudW1iZXIgb2YgaGFyZCByZWZlcmVuY2VzIHRvIG1haW50YWluLCBv\nciAtMSBmb3Igbm8gbGltaXQuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNl\ndENhY2hlU2l6ZShpbnQgc2l6ZSkgewogICAgICAgIHdyaXRlTG9jaygpOwog\nICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNhY2hlTWFwLnNldE1heFNpemUo\nKHNpemUgPCAwKSA/IEludGVnZXIuTUFYX1ZBTFVFIDogc2l6ZSk7CiAgICAg\nICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgd3JpdGVVbmxvY2soKTsKICAg\nICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgbWF4aW11bSBudW1i\nZXIgb2YgaGFyZCByZWZlcmVuY2VzIHRvIG1haW50YWluLCBvciAtMSBmb3Ig\nbm8gbGltaXQuCiAgICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0Q2FjaGVTaXpl\nKCkgewogICAgICAgIGludCBtYXggPSBjYWNoZU1hcC5nZXRNYXhTaXplKCk7\nCiAgICAgICAgcmV0dXJuIChtYXggPT0gSW50ZWdlci5NQVhfVkFMVUUpID8g\nLTEgOiBtYXg7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgbWF4aW11bSBu\ndW1iZXIgb2Ygc29mdCByZWZlcmVuY2VzIHRvIG1haW50YWluLCBvciAtMSBm\nb3Igbm8gbGltaXQuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFNvZnRS\nZWZlcmVuY2VTaXplKGludCBzaXplKSB7CiAgICAgICAgd3JpdGVMb2NrKCk7\nCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgc29mdE1hcC5zZXRNYXhTaXpl\nKChzaXplIDwgMCkgPyBJbnRlZ2VyLk1BWF9WQUxVRSA6IHNpemUpOwogICAg\nICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIHdyaXRlVW5sb2NrKCk7CiAg\nICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogVGhlIG1heGltdW0gbnVt\nYmVyIG9mIHNvZnQgcmVmZXJlbmNlcyB0byBtYWludGFpbiwgb3IgLTEgZm9y\nIG5vIGxpbWl0LgogICAgICovCiAgICBwdWJsaWMgaW50IGdldFNvZnRSZWZl\ncmVuY2VTaXplKCkgewogICAgICAgIGludCBtYXggPSBzb2Z0TWFwLmdldE1h\neFNpemUoKTsKICAgICAgICByZXR1cm4gKG1heCA9PSBJbnRlZ2VyLk1BWF9W\nQUxVRSkgPyAtMSA6IG1heDsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBr\nZXlzIHBpbm5lZCBpbnRvIHRoZSBtYXAuCiAgICAgKi8KICAgIHB1YmxpYyBT\nZXQgZ2V0UGlubmVkS2V5cygpIHsKICAgICAgICByZWFkTG9jaygpOwogICAg\nICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBDb2xsZWN0aW9ucy51bm1v\nZGlmaWFibGVTZXQocGlubmVkTWFwLmtleVNldCgpKTsKICAgICAgICB9IGZp\nbmFsbHkgewogICAgICAgICAgICByZWFkVW5sb2NrKCk7CiAgICAgICAgfQog\nICAgfQoKICAgIC8qKgogICAgICogTG9ja3MgdGhlIGdpdmVuIGtleSBhbmQg\naXRzIHZhbHVlIGludG8gdGhlIG1hcC4gT2JqZWN0cyBwaW5uZWQgaW50bwog\nICAgICogdGhlIG1hcCBhcmUgbm90IGNvdW50ZWQgdG93YXJkcyB0aGUgbWF4\naW11bSBjYWNoZSBzaXplLCBhbmQgYXJlIG5ldmVyCiAgICAgKiBldmljdGVk\nIGltcGxpY2l0bHkuIFlvdSBtYXkgcGluIGtleXMgZm9yIHdoaWNoIG5vIHZh\nbHVlIGlzIGluIHRoZSBtYXAuCiAgICAgKgogICAgICogQHJldHVybiB0cnVl\nIGlmIHRoZSBnaXZuZSBrZXkncyB2YWx1ZSB3YXMgcGlubmVkOyBmYWxzZSBp\nZiBubyB2YWx1ZQogICAgICogZm9yIHRoZSBnaXZlbiBrZXkgaXMgY2FjaGVk\nCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIHBpbihPYmplY3Qga2V5KSB7\nCiAgICAgICAgd3JpdGVMb2NrKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgLy8gaWYgd2UgZG9uJ3QgaGF2ZSBhIHBpbm5lZCBtYXAgd2UgbmVlZCB0\nbyBjcmVhdGUgb25lOyBlbHNlIGlmIHRoZQogICAgICAgICAgICAvLyBwaW5u\nZWQgbWFwIGFscmVhZHkgY29udGFpbnMgdGhlIGtleSwgbm90aGluZyB0byBk\nbwogICAgICAgICAgICBpZiAocGlubmVkTWFwLmNvbnRhaW5zS2V5KGtleSkp\nCiAgICAgICAgICAgICAgICByZXR1cm4gcGlubmVkTWFwLmdldChrZXkpICE9\nIG51bGw7CgogICAgICAgICAgICAvLyBjaGVjayBvdGhlciBtYXBzIGZvciBr\nZXkKICAgICAgICAgICAgT2JqZWN0IHZhbCA9IHJlbW92ZShjYWNoZU1hcCwg\na2V5KTsKICAgICAgICAgICAgaWYgKHZhbCA9PSBudWxsKQogICAgICAgICAg\nICAgICAgdmFsID0gcmVtb3ZlKHNvZnRNYXAsIGtleSk7CgogICAgICAgICAg\nICAvLyBwaW4ga2V5CiAgICAgICAgICAgIHB1dChwaW5uZWRNYXAsIGtleSwg\ndmFsKTsKICAgICAgICAgICAgaWYgKHZhbCAhPSBudWxsKSB7CiAgICAgICAg\nICAgICAgICBfcGlubmVkU2l6ZSsrOwogICAgICAgICAgICAgICAgcmV0dXJu\nIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGZhbHNl\nOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIHdyaXRlVW5sb2Nr\nKCk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogVW5kbyBhIHBp\nbm5pbmcuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIHVucGluKE9iamVj\ndCBrZXkpIHsKICAgICAgICB3cml0ZUxvY2soKTsKICAgICAgICB0cnkgewog\nICAgICAgICAgICBPYmplY3QgdmFsID0gcmVtb3ZlKHBpbm5lZE1hcCwga2V5\nKTsKICAgICAgICAgICAgaWYgKHZhbCAhPSBudWxsKSB7CiAgICAgICAgICAg\nICAgICAvLyBwdXQgYmFjayBpbnRvIHVucGlubmVkIGNhY2hlCiAgICAgICAg\nICAgICAgICBwdXQoa2V5LCB2YWwpOwogICAgICAgICAgICAgICAgX3Bpbm5l\nZFNpemUtLTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAg\nICAgICB9CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9IGZp\nbmFsbHkgewogICAgICAgICAgICB3cml0ZVVubG9jaygpOwogICAgICAgIH0K\nICAgIH0KCiAgICAvKioKICAgICAqIEludm9rZWQgd2hlbiBhIGtleS12YWx1\nZSBwYWlyIGlzIGV2aWN0ZWQgZnJvbSB0aGlzIGRhdGEKICAgICAqIHN0cnVj\ndHVyZS4gVGhpcyBpcyBpbnZva2VkIHdpdGggPGNvZGU+ZXhwaXJlZDwvY29k\nZT4gc2V0IHRvCiAgICAgKiA8Y29kZT50cnVlPC9jb2RlPiB3aGVuIGFuIG9i\namVjdCBpcyBkcm9wcGVkIGJlY2F1c2Ugb2Ygc3BhY2UKICAgICAqIHJlcXVp\ncmVtZW50cyBvciB0aHJvdWdoIGdhcmJhZ2UgY29sbGVjdGlvbiBvZiBzb2Z0\nIHJlZmVyZW5jZXMuCiAgICAgKiBJdCBpcyBpbnZva2VkIHdpdGggPGNvZGU+\nZXhwaXJlZDwvY29kZT4gc2V0IHRvIDxjb2RlPmZhbHNlPC9jb2RlPgogICAg\nICogd2hlbiBhbiBvYmplY3QgaXMgZXhwbGljaXRseSByZW1vdmVkIHZpYSB0\naGUge0BsaW5rICNyZW1vdmV9IG9yCiAgICAgKiB7QGxpbmsgI2NsZWFyfSBt\nZXRob2RzLiBUaGlzIG1heSBiZSBpbnZva2VkIG1vcmUgdGhhbiBvbmNlIGZv\nciBhCiAgICAgKiBnaXZlbiBlbnRyeS4KICAgICAqCiAgICAgKiBAcGFyYW0g\ndmFsdWUgbWF5IGJlIG51bGwgaWYgdGhlIHZhbHVlIHdhcyBhIHNvZnQgcmVm\nZXJlbmNlIHRoYXQgaGFzCiAgICAgKiBiZWVuIEdDZAogICAgICogQHNpbmNl\nIDAuMi41LjAKICAgICAqLwogICAgcHJvdGVjdGVkIHZvaWQgZW50cnlSZW1v\ndmVkKE9iamVjdCBrZXksIE9iamVjdCB2YWx1ZSwgYm9vbGVhbiBleHBpcmVk\nKSB7CiAgICB9CgogICAgLyoqCiAgICAgKiBJbnZva2VkIHdoZW4gYW4gZW50\ncnkgaXMgYWRkZWQgdG8gdGhlIGNhY2hlLiBUaGlzIG1heSBiZSBpbnZva2Vk\nCiAgICAgKiBtb3JlIHRoYW4gb25jZSBmb3IgYW4gZW50cnkuCiAgICAgKi8K\nICAgIHByb3RlY3RlZCB2b2lkIGVudHJ5QWRkZWQoT2JqZWN0IGtleSwgT2Jq\nZWN0IHZhbHVlKSB7CiAgICB9CgogICAgcHVibGljIE9iamVjdCBnZXQoT2Jq\nZWN0IGtleSkgewogICAgICAgIHJlYWRMb2NrKCk7CiAgICAgICAgdHJ5IHsK\nICAgICAgICAgICAgT2JqZWN0IHZhbCA9IHBpbm5lZE1hcC5nZXQoa2V5KTsK\nICAgICAgICAgICAgaWYgKHZhbCAhPSBudWxsKQogICAgICAgICAgICAgICAg\ncmV0dXJuIHZhbDsKCiAgICAgICAgICAgIHZhbCA9IGNhY2hlTWFwLmdldChr\nZXkpOwogICAgICAgICAgICBpZiAodmFsID09IG51bGwpIHsKICAgICAgICAg\nICAgICAgIC8vIGlmIHdlIGZpbmQgdGhlIGtleSBpbiB0aGUgc29mdCBtYXAs\nIG1vdmUgaXQgYmFjayBpbnRvCiAgICAgICAgICAgICAgICAvLyB0aGUgcHJp\nbWFyeSBtYXAKICAgICAgICAgICAgICAgIHZhbCA9IHNvZnRNYXAuZ2V0KGtl\neSk7CiAgICAgICAgICAgICAgICBpZiAodmFsICE9IG51bGwpCiAgICAgICAg\nICAgICAgICAgICAgcHV0KGtleSwgdmFsKTsKICAgICAgICAgICAgfQogICAg\nICAgICAgICByZXR1cm4gdmFsOwogICAgICAgIH0gZmluYWxseSB7CiAgICAg\nICAgICAgIHJlYWRVbmxvY2soKTsKICAgICAgICB9CiAgICB9CgogICAgcHVi\nbGljIE9iamVjdCBwdXQoT2JqZWN0IGtleSwgT2JqZWN0IHZhbHVlKSB7CiAg\nICAgICAgd3JpdGVMb2NrKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\nLy8gaWYgdGhlIGtleSBpcyBwaW5uZWQsIGp1c3QgaW50ZXJhY3QgZGlyZWN0\nbHkgd2l0aCB0aGUgcGlubmVkIG1hcAogICAgICAgICAgICBPYmplY3QgdmFs\nOwogICAgICAgICAgICBpZiAocGlubmVkTWFwLmNvbnRhaW5zS2V5KGtleSkp\nIHsKICAgICAgICAgICAgICAgIHZhbCA9IHB1dChwaW5uZWRNYXAsIGtleSwg\ndmFsdWUpOwogICAgICAgICAgICAgICAgaWYgKHZhbCA9PSBudWxsKSB7CiAg\nICAgICAgICAgICAgICAgICAgX3Bpbm5lZFNpemUrKzsKICAgICAgICAgICAg\nICAgICAgICBlbnRyeUFkZGVkKGtleSwgdmFsdWUpOwogICAgICAgICAgICAg\nICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBlbnRyeVJlbW92ZWQo\na2V5LCB2YWwsIGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICBlbnRyeUFk\nZGVkKGtleSwgdmFsdWUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAg\nICAgICAgcmV0dXJuIHZhbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAg\nLy8gaWYgbm8gaGFyZCByZWZzLCBkb24ndCBwdXQgYW55dGhpbmcKICAgICAg\nICAgICAgaWYgKGNhY2hlTWFwLmdldE1heFNpemUoKSA9PSAwKQogICAgICAg\nICAgICAgICAgcmV0dXJuIG51bGw7CgogICAgICAgICAgICAvLyBvdGhlcndp\nc2UsIHB1dCB0aGUgdmFsdWUgaW50byB0aGUgbWFwIGFuZCBjbGVhciBpdCBm\ncm9tIHRoZQogICAgICAgICAgICAvLyBzb2Z0IG1hcAogICAgICAgICAgICB2\nYWwgPSBwdXQoY2FjaGVNYXAsIGtleSwgdmFsdWUpOwogICAgICAgICAgICBp\nZiAodmFsID09IG51bGwpIHsKICAgICAgICAgICAgICAgIHZhbCA9IHJlbW92\nZShzb2Z0TWFwLCBrZXkpOwogICAgICAgICAgICAgICAgaWYgKHZhbCA9PSBu\ndWxsKQogICAgICAgICAgICAgICAgICAgIGVudHJ5QWRkZWQoa2V5LCB2YWx1\nZSk7CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAg\nICBlbnRyeVJlbW92ZWQoa2V5LCB2YWwsIGZhbHNlKTsKICAgICAgICAgICAg\nICAgICAgICBlbnRyeUFkZGVkKGtleSwgdmFsdWUpOwogICAgICAgICAgICAg\nICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZW50\ncnlSZW1vdmVkKGtleSwgdmFsLCBmYWxzZSk7CiAgICAgICAgICAgICAgICBl\nbnRyeUFkZGVkKGtleSwgdmFsdWUpOwogICAgICAgICAgICB9CiAgICAgICAg\nICAgIHJldHVybiB2YWw7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAg\nICAgd3JpdGVVbmxvY2soKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgcHV0QWxsKE1hcCBtYXApIHsKICAgICAgICBNYXAuRW50cnkgZW50\ncnk7CiAgICAgICAgZm9yIChJdGVyYXRvciBpdHIgPSBtYXAuZW50cnlTZXQo\nKS5pdGVyYXRvcigpOyBpdHIuaGFzTmV4dCgpOykgewogICAgICAgICAgICBl\nbnRyeSA9IChNYXAuRW50cnkpIGl0ci5uZXh0KCk7CiAgICAgICAgICAgIHB1\ndChlbnRyeS5nZXRLZXkoKSwgZW50cnkuZ2V0VmFsdWUoKSk7CiAgICAgICAg\nfQogICAgfQoKICAgIC8qKgogICAgICogSWYgPGNvZGU+a2V5PC9jb2RlPiBp\ncyBwaW5uZWQgaW50byB0aGUgY2FjaGUsIHRoZSBwaW4gaXMKICAgICAqIGNs\nZWFyZWQgYW5kIHRoZSBvYmplY3QgaXMgcmVtb3ZlZC4KICAgICAqLwogICAg\ncHVibGljIE9iamVjdCByZW1vdmUoT2JqZWN0IGtleSkgewogICAgICAgIHdy\naXRlTG9jaygpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIC8vIGlmIHRo\nZSBrZXkgaXMgcGlubmVkLCBqdXN0IGludGVyYWN0IGRpcmVjdGx5IHdpdGgg\ndGhlCiAgICAgICAgICAgIC8vIHBpbm5lZCBtYXAKICAgICAgICAgICAgT2Jq\nZWN0IHZhbDsKICAgICAgICAgICAgaWYgKHBpbm5lZE1hcC5jb250YWluc0tl\neShrZXkpKSB7CiAgICAgICAgICAgICAgICAvLyByZS1wdXQgd2l0aCBudWxs\nIHZhbHVlOyB3ZSBzdGlsbCB3YW50IGtleSBwaW5uZWQKICAgICAgICAgICAg\nICAgIHZhbCA9IHB1dChwaW5uZWRNYXAsIGtleSwgbnVsbCk7CiAgICAgICAg\nICAgICAgICBpZiAodmFsICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAg\nICBfcGlubmVkU2l6ZS0tOwogICAgICAgICAgICAgICAgICAgIGVudHJ5UmVt\nb3ZlZChrZXksIHZhbCwgZmFsc2UpOwogICAgICAgICAgICAgICAgfQogICAg\nICAgICAgICAgICAgcmV0dXJuIHZhbDsKICAgICAgICAgICAgfQoKICAgICAg\nICAgICAgdmFsID0gcmVtb3ZlKGNhY2hlTWFwLCBrZXkpOwogICAgICAgICAg\nICBpZiAodmFsID09IG51bGwpCiAgICAgICAgICAgICAgICB2YWwgPSBzb2Z0\nTWFwLnJlbW92ZShrZXkpOwogICAgICAgICAgICBpZiAodmFsICE9IG51bGwp\nCiAgICAgICAgICAgICAgICBlbnRyeVJlbW92ZWQoa2V5LCB2YWwsIGZhbHNl\nKTsKCiAgICAgICAgICAgIHJldHVybiB2YWw7CiAgICAgICAgfSBmaW5hbGx5\nIHsKICAgICAgICAgICAgd3JpdGVVbmxvY2soKTsKICAgICAgICB9CiAgICB9\nCgogICAgLyoqCiAgICAgKiBSZW1vdmVzIHBpbm5lZCBvYmplY3RzIGFzIHdl\nbGwgYXMgdW5waW5uZWQgb25lcy4KICAgICAqLwogICAgcHVibGljIHZvaWQg\nY2xlYXIoKSB7CiAgICAgICAgd3JpdGVMb2NrKCk7CiAgICAgICAgdHJ5IHsK\nICAgICAgICAgICAgbm90aWZ5RW50cnlSZW1vdmFscyhwaW5uZWRNYXAuZW50\ncnlTZXQoKSk7CiAgICAgICAgICAgIHBpbm5lZE1hcC5jbGVhcigpOwogICAg\nICAgICAgICBfcGlubmVkU2l6ZSA9IDA7CgogICAgICAgICAgICBub3RpZnlF\nbnRyeVJlbW92YWxzKGNhY2hlTWFwLmVudHJ5U2V0KCkpOwogICAgICAgICAg\nICBjYWNoZU1hcC5jbGVhcigpOwoKICAgICAgICAgICAgbm90aWZ5RW50cnlS\nZW1vdmFscyhzb2Z0TWFwLmVudHJ5U2V0KCkpOwogICAgICAgICAgICBzb2Z0\nTWFwLmNsZWFyKCk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAg\nd3JpdGVVbmxvY2soKTsKICAgICAgICB9CiAgICB9CgogICAgcHJpdmF0ZSB2\nb2lkIG5vdGlmeUVudHJ5UmVtb3ZhbHMoU2V0IHNldCkgewogICAgICAgIE1h\ncC5FbnRyeSBlbnRyeTsKICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9IHNl\ndC5pdGVyYXRvcigpOyBpdHIuaGFzTmV4dCgpOykgewogICAgICAgICAgICBl\nbnRyeSA9IChNYXAuRW50cnkpIGl0ci5uZXh0KCk7CiAgICAgICAgICAgIGlm\nIChlbnRyeS5nZXRWYWx1ZSgpICE9IG51bGwpCiAgICAgICAgICAgICAgICBl\nbnRyeVJlbW92ZWQoZW50cnkuZ2V0S2V5KCksIGVudHJ5LmdldFZhbHVlKCks\nIGZhbHNlKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIGludCBzaXpl\nKCkgewogICAgICAgIHJlYWRMb2NrKCk7CiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgcmV0dXJuIF9waW5uZWRTaXplICsgY2FjaGVNYXAuc2l6ZSgpICsg\nc29mdE1hcC5zaXplKCk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAg\nICAgcmVhZFVubG9jaygpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMg\nYm9vbGVhbiBpc0VtcHR5KCkgewogICAgICAgIHJldHVybiBzaXplKCkgPT0g\nMDsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBjb250YWluc0tleShPYmpl\nY3Qga2V5KSB7CiAgICAgICAgcmVhZExvY2soKTsKICAgICAgICB0cnkgewog\nICAgICAgICAgICByZXR1cm4gcGlubmVkTWFwLmdldChrZXkpICE9IG51bGwK\nICAgICAgICAgICAgICAgIHx8IGNhY2hlTWFwLmNvbnRhaW5zS2V5KGtleSkK\nICAgICAgICAgICAgICAgIHx8IHNvZnRNYXAuY29udGFpbnNLZXkoa2V5KTsK\nICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICByZWFkVW5sb2NrKCk7\nCiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGNvbnRhaW5z\nVmFsdWUoT2JqZWN0IHZhbCkgewogICAgICAgIHJlYWRMb2NrKCk7CiAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIHBpbm5lZE1hcC5jb250YWlu\nc1ZhbHVlKHZhbCkKICAgICAgICAgICAgICAgIHx8IGNhY2hlTWFwLmNvbnRh\naW5zVmFsdWUodmFsKQogICAgICAgICAgICAgICAgfHwgc29mdE1hcC5jb250\nYWluc1ZhbHVlKHZhbCk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAg\nICAgcmVhZFVubG9jaygpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMg\nU2V0IGtleVNldCgpIHsKICAgICAgICByZXR1cm4gbmV3IEtleVNldCgpOwog\nICAgfQoKICAgIHB1YmxpYyBDb2xsZWN0aW9uIHZhbHVlcygpIHsKICAgICAg\nICByZXR1cm4gbmV3IFZhbHVlQ29sbGVjdGlvbigpOwogICAgfQoKICAgIHB1\nYmxpYyBTZXQgZW50cnlTZXQoKSB7CiAgICAgICAgcmV0dXJuIG5ldyBFbnRy\neVNldCgpOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgdG9TdHJpbmcoKSB7\nCiAgICAgICAgcmVhZExvY2soKTsKICAgICAgICB0cnkgewogICAgICAgICAg\nICByZXR1cm4gIkNhY2hlTWFwOiIgKyBjYWNoZU1hcC50b1N0cmluZygpICsg\nIjo6IgogICAgICAgICAgICAgICAgKyBzb2Z0TWFwLnRvU3RyaW5nKCk7CiAg\nICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgcmVhZFVubG9jaygpOwog\nICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFZpZXcgb2YgdGhlIGVu\ndHJ5IHNldC4KICAgICAqLwogICAgcHJpdmF0ZSBjbGFzcyBFbnRyeVNldAog\nICAgICAgIGV4dGVuZHMgQWJzdHJhY3RTZXQgewoKICAgICAgICBwdWJsaWMg\naW50IHNpemUoKSB7CiAgICAgICAgICAgIHJldHVybiBDYWNoZU1hcC50aGlz\nLnNpemUoKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBib29sZWFuIGFk\nZChPYmplY3QgbykgewogICAgICAgICAgICBNYXAuRW50cnkgZW50cnkgPSAo\nTWFwLkVudHJ5KSBvOwogICAgICAgICAgICBwdXQoZW50cnkuZ2V0S2V5KCks\nIGVudHJ5LmdldFZhbHVlKCkpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsK\nICAgICAgICB9CgogICAgICAgIHB1YmxpYyBJdGVyYXRvciBpdGVyYXRvcigp\nIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBFbnRyeUl0ZXJhdG9yKEVudHJ5\nSXRlcmF0b3IuRU5UUlkpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAg\nICAqIFZpZXcgb2YgdGhlIGtleSBzZXQuCiAgICAgKi8KICAgIHByaXZhdGUg\nY2xhc3MgS2V5U2V0CiAgICAgICAgZXh0ZW5kcyBBYnN0cmFjdFNldCB7Cgog\nICAgICAgIHB1YmxpYyBpbnQgc2l6ZSgpIHsKICAgICAgICAgICAgcmV0dXJu\nIENhY2hlTWFwLnRoaXMuc2l6ZSgpOwogICAgICAgIH0KCiAgICAgICAgcHVi\nbGljIEl0ZXJhdG9yIGl0ZXJhdG9yKCkgewogICAgICAgICAgICByZXR1cm4g\nbmV3IEVudHJ5SXRlcmF0b3IoRW50cnlJdGVyYXRvci5LRVkpOwogICAgICAg\nIH0KICAgIH0KCiAgICAvKioKICAgICAqIFZpZXcgb2YgdGhlIHZhbHVlIGNv\nbGxlY3Rpb24uCiAgICAgKi8KICAgIHByaXZhdGUgY2xhc3MgVmFsdWVDb2xs\nZWN0aW9uCiAgICAgICAgZXh0ZW5kcyBBYnN0cmFjdENvbGxlY3Rpb24gewoK\nICAgICAgICBwdWJsaWMgaW50IHNpemUoKSB7CiAgICAgICAgICAgIHJldHVy\nbiBDYWNoZU1hcC50aGlzLnNpemUoKTsKICAgICAgICB9CgogICAgICAgIHB1\nYmxpYyBJdGVyYXRvciBpdGVyYXRvcigpIHsKICAgICAgICAgICAgcmV0dXJu\nIG5ldyBFbnRyeUl0ZXJhdG9yKEVudHJ5SXRlcmF0b3IuVkFMVUUpOwogICAg\nICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEl0ZXJhdG9yIG92ZXIgYWxs\nIGVudHJpZXMuCiAgICAgKi8KICAgIHByaXZhdGUgY2xhc3MgRW50cnlJdGVy\nYXRvcgogICAgICAgIGltcGxlbWVudHMgSXRlcmF0b3IsIFByZWRpY2F0ZSB7\nCgogICAgICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IEVOVFJZID0gMDsK\nICAgICAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBLRVkgPSAxOwogICAg\nICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IFZBTFVFID0gMjsKCiAgICAg\nICAgcHJpdmF0ZSBmaW5hbCBJdGVyYXRvckNoYWluIF9pdHIgPSBuZXcgSXRl\ncmF0b3JDaGFpbigpOwogICAgICAgIHByaXZhdGUgZmluYWwgaW50IF90eXBl\nOwoKICAgICAgICBwdWJsaWMgRW50cnlJdGVyYXRvcihpbnQgdHlwZSkgewog\nICAgICAgICAgICBfdHlwZSA9IHR5cGU7CiAgICAgICAgICAgIF9pdHIuYWRk\nSXRlcmF0b3IobmV3IEZpbHRlckl0ZXJhdG9yKGdldFZpZXcocGlubmVkTWFw\nKSwgdGhpcykpOwogICAgICAgICAgICBfaXRyLmFkZEl0ZXJhdG9yKGdldFZp\nZXcoY2FjaGVNYXApKTsKICAgICAgICAgICAgX2l0ci5hZGRJdGVyYXRvcihn\nZXRWaWV3KHNvZnRNYXApKTsKICAgICAgICB9CgogICAgICAgIC8qKgogICAg\nICAgICAqIFJldHVybiBhbiBpdGVyYXRvciBvdmVyIHRoZSBhcHByb3ByaWF0\nZSB2aWV3IG9mIHRoZSBnaXZlbiBtYXAuCiAgICAgICAgICovCiAgICAgICAg\ncHJpdmF0ZSBJdGVyYXRvciBnZXRWaWV3KE1hcCBtKSB7CiAgICAgICAgICAg\nIGlmIChtID09IG51bGwpCiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsK\nCiAgICAgICAgICAgIHN3aXRjaCAoX3R5cGUpIHsKICAgICAgICAgICAgICAg\nIGNhc2UgS0VZOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBtLmtleVNl\ndCgpLml0ZXJhdG9yKCk7CiAgICAgICAgICAgICAgICBjYXNlIFZBTFVFOgog\nICAgICAgICAgICAgICAgICAgIHJldHVybiBtLnZhbHVlcygpLml0ZXJhdG9y\nKCk7CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAg\nICAgIHJldHVybiBtLmVudHJ5U2V0KCkuaXRlcmF0b3IoKTsKICAgICAgICAg\nICAgfQogICAgICAgIH0KCiAgICAgICAgcHVibGljIGJvb2xlYW4gaGFzTmV4\ndCgpIHsKICAgICAgICAgICAgcmV0dXJuIF9pdHIuaGFzTmV4dCgpOwogICAg\nICAgIH0KCiAgICAgICAgcHVibGljIE9iamVjdCBuZXh0KCkgewogICAgICAg\nICAgICByZXR1cm4gX2l0ci5uZXh0KCk7CiAgICAgICAgfQoKICAgICAgICBw\ndWJsaWMgdm9pZCByZW1vdmUoKSB7CiAgICAgICAgICAgIF9pdHIucmVtb3Zl\nKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgYm9vbGVhbiBldmFsdWF0\nZShPYmplY3Qgb2JqKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX3R5cGUpIHsK\nICAgICAgICAgICAgICAgIGNhc2UgRU5UUlk6CiAgICAgICAgICAgICAgICAg\nICAgcmV0dXJuICgoTWFwLkVudHJ5KSBvYmopLmdldFZhbHVlKCkgIT0gbnVs\nbDsKCQkJY2FzZSBWQUxVRToKCQkJCXJldHVybiBvYmogIT0gbnVsbDsKCQkJ\nZGVmYXVsdDoKCQkJCXJldHVybiB0cnVlOwoJCQl9CgkJfQoJfQp9Cgo=\n","encoding":"base64"}

