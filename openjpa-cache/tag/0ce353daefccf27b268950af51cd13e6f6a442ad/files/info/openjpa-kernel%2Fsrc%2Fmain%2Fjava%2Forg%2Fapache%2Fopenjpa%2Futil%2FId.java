{"sha":"d230d0b233cff3a8df499aed11018981bc7452cf","node_id":"MDQ6QmxvYjIwNjM2NDpkMjMwZDBiMjMzY2ZmM2E4ZGY0OTlhZWQxMTAxODk4MWJjNzQ1MmNm","size":4148,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/d230d0b233cff3a8df499aed11018981bc7452cf","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS51dGlsOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5jb25m\nLk9wZW5KUEFDb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmxpYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0IHNlcnAudXRpbC5OdW1i\nZXJzOwoKLyoqCiAqIERhdGFzdG9yZSBpZGVudGl0eSB0eXBlLiBJbXBsZW1l\nbnRhdGlvbnMgbWF5IGNob29zZSB0byB1c2UgdGhpcyB0eXBlLAogKiBvciBj\naG9vc2UgdG8gdXNlIHRoZWlyIG93biBkYXRhc3RvcmUgaWRlbnRpdHkgdmFs\ndWVzLgogKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKi8KcHVibGljIGZpbmFs\nIGNsYXNzIElkCiAgICBleHRlbmRzIE9wZW5KUEFJZCB7CgogICAgcHJpdmF0\nZSBzdGF0aWMgZmluYWwgTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6ZXIuZm9y\nUGFja2FnZShJZC5jbGFzcyk7CgogICAgcHJpdmF0ZSBmaW5hbCBsb25nIF9p\nZDsKCiAgICAvKioKICAgICAqIENyZWF0ZSBhbiBpZCBmcm9tIHRoZSBnaXZl\nbiB0eXBlIGFuZCB2YWx1ZTsgdGhlIHZhbHVlIG1pZ2h0IGJlIGFuCiAgICAg\nKiBpZCBpbnN0bmFjZSwgYSBzdHJpbmdpZmllZCBpZCwgb3IgYSBwcmltYXJ5\nIGtleSB2YWx1ZS4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBJZCBuZXdJ\nbnN0YW5jZShDbGFzcyBjbHMsIE9iamVjdCB2YWwpIHsKICAgICAgICBpZiAo\ndmFsIGluc3RhbmNlb2YgSWQpCiAgICAgICAgICAgIHJldHVybiAoSWQpIHZh\nbDsKICAgICAgICBpZiAodmFsIGluc3RhbmNlb2YgU3RyaW5nKQogICAgICAg\nICAgICByZXR1cm4gbmV3IElkKGNscywgKFN0cmluZykgdmFsKTsKICAgICAg\nICBpZiAodmFsIGluc3RhbmNlb2YgTnVtYmVyKQogICAgICAgICAgICByZXR1\ncm4gbmV3IElkKGNscywgKChOdW1iZXIpIHZhbCkubG9uZ1ZhbHVlKCkpOwog\nICAgICAgIGlmICh2YWwgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIG5l\ndyBJZChjbHMsIDBMKTsKICAgICAgICB0aHJvdyBuZXcgVXNlckV4Y2VwdGlv\nbihfbG9jLmdldCgidW5rbm93bi1vaWQiLCBjbHMsIHZhbCwKICAgICAgICAg\nICAgdmFsLmdldENsYXNzKCkpKTsKICAgIH0KCiAgICAvKioKICAgICAqIENy\nZWF0ZSBhbiBpZCBmcm9tIHRoZSByZXN1bHQgb2YgYSB7QGxpbmsgI3RvU3Ry\naW5nfSBjYWxsIG9uIGFub3RoZXIKICAgICAqIGluc3RhbmNlLgogICAgICov\nCiAgICBwdWJsaWMgSWQoU3RyaW5nIHN0cikgewogICAgICAgIHRoaXMoc3Ry\nLCAoQ2xhc3NMb2FkZXIpIG51bGwpOwogICAgfQoKICAgIC8qKgogICAgICog\nQ3JlYXRlIGFuIGlkIGZyb20gdGhlIHJlc3VsdCBvZiBhbiB7QGxpbmsgI3Rv\nU3RyaW5nfSBjYWxsIG9uIGFub3RoZXIKICAgICAqIGluc3RhbmNlLgogICAg\nICovCiAgICBwdWJsaWMgSWQoU3RyaW5nIHN0ciwgT3BlbkpQQUNvbmZpZ3Vy\nYXRpb24gY29uZiwgQ2xhc3NMb2FkZXIgYnJva2VyTG9hZGVyKSB7CiAgICAg\nICAgdGhpcyhzdHIsIChjb25mID09IG51bGwpID8gYnJva2VyTG9hZGVyIDog\nY29uZi4KICAgICAgICAgICAgZ2V0Q2xhc3NSZXNvbHZlckluc3RhbmNlKCku\nZ2V0Q2xhc3NMb2FkZXIoSWQuY2xhc3MsIGJyb2tlckxvYWRlcikpOwogICAg\nfQoKICAgIC8qKgogICAgICogQ3JlYXRlIGFuIGlkIGZyb20gdGhlIHJlc3Vs\ndCBvZiBhbiB7QGxpbmsgI3RvU3RyaW5nfSBjYWxsIG9uIGFub3RoZXIKICAg\nICAqIGluc3RhbmNlLgogICAgICovCiAgICBwdWJsaWMgSWQoU3RyaW5nIHN0\nciwgQ2xhc3NMb2FkZXIgbG9hZGVyKSB7CiAgICAgICAgaWYgKGxvYWRlciA9\nPSBudWxsKQogICAgICAgICAgICBsb2FkZXIgPSBUaHJlYWQuY3VycmVudFRo\ncmVhZCgpLmdldENvbnRleHRDbGFzc0xvYWRlcigpOwoKICAgICAgICBpZiAo\nc3RyID09IG51bGwpCiAgICAgICAgICAgIF9pZCA9IDBMOwogICAgICAgIGVs\nc2UgewogICAgICAgICAgICBpbnQgZGFzaCA9IHN0ci5pbmRleE9mKCctJyk7\nCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICB0eXBlID0gQ2xh\nc3MuZm9yTmFtZShzdHIuc3Vic3RyaW5nKDAsIGRhc2gpLCB0cnVlLCBsb2Fk\nZXIpOwogICAgICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUgdCkgewogICAg\nICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFeGNlcHRpb24oX2xvYy5nZXQo\nInN0cmluZy1pZCIsIHN0ciksIHQpOwogICAgICAgICAgICB9CiAgICAgICAg\nICAgIF9pZCA9IExvbmcucGFyc2VMb25nKHN0ci5zdWJzdHJpbmcoZGFzaCAr\nIDEpKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBDb25zdHJ1\nY3QgZnJvbSB0aGUgcmVzdWx0IG9mIGEge0BsaW5rICN0b1N0cmluZ30gY2Fs\nbCBvbiBhbm90aGVyCiAgICAgKiBpbnN0YW5jZS4KICAgICAqLwogICAgcHVi\nbGljIElkKENsYXNzIGNscywgU3RyaW5nIGtleSkgewogICAgICAgIHN1cGVy\nKGNscyk7CgogICAgICAgIGlmIChrZXkgPT0gbnVsbCkKICAgICAgICAgICAg\nX2lkID0gMEw7CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIC8vIGFsbG93\nIGVpdGhlciBzdHJpbmdpZmllZCBsb25nIG9yIHJlc3VsdCBvZiBJZC50b1N0\ncmluZwogICAgICAgICAgICBpbnQgZGFzaCA9IGtleS5pbmRleE9mKCctJyk7\nCiAgICAgICAgICAgIGlmIChkYXNoID4gMCkgLy8gZG9uJ3QgY2hlY2sgZm9y\nIC0xOyBtaWdodCBiZSBuZWdhdGl2ZSBudW1iZXIKICAgICAgICAgICAgICAg\nIGtleSA9IGtleS5zdWJzdHJpbmcoZGFzaCArIDEpOwogICAgICAgICAgICBf\naWQgPSBMb25nLnBhcnNlTG9uZyhrZXkpOwogICAgICAgIH0KICAgIH0KCiAg\nICAvKioKICAgICAqIENvbnN0cnVjdCBmcm9tIGtleSB2YWx1ZS4KICAgICAq\nLwogICAgcHVibGljIElkKENsYXNzIGNscywgTG9uZyBrZXkpIHsKICAgICAg\nICB0aGlzKGNscywgKGtleSA9PSBudWxsKSA/IDBMIDoga2V5LmxvbmdWYWx1\nZSgpKTsKICAgIH0KCiAgICAvKioKICAgICAqIENvbnN0cnVjdCBmcm9tIGtl\neSB2YWx1ZS4KICAgICAqLwogICAgcHVibGljIElkKENsYXNzIGNscywgbG9u\nZyBrZXkpIHsKICAgICAgICBzdXBlcihjbHMpOwogICAgICAgIF9pZCA9IGtl\neTsKICAgIH0KCiAgICAvKioKICAgICAqIENvbnN0cnVjdCBmcm9tIGtleSB2\nYWx1ZS4KICAgICAqLwogICAgcHVibGljIElkKENsYXNzIGNscywgbG9uZyBr\nZXksIGJvb2xlYW4gc3VicykgewogICAgICAgIHN1cGVyKGNscywgc3Vicyk7\nCiAgICAgICAgX2lkID0ga2V5OwogICAgfQoKICAgIC8qKgogICAgICogUHJp\nbWFyeSBrZXkuCiAgICAgKi8KICAgIHB1YmxpYyBsb25nIGdldElkKCkgewog\nICAgICAgIHJldHVybiBfaWQ7CiAgICB9CgogICAgcHVibGljIE9iamVjdCBn\nZXRJZE9iamVjdCgpIHsKICAgICAgICByZXR1cm4gTnVtYmVycy52YWx1ZU9m\nKF9pZCk7CiAgICB9CgogICAgcHJvdGVjdGVkIGludCBpZEhhc2goKSB7CiAg\nICAgICAgcmV0dXJuIChpbnQpIChfaWQgXiAoX2lkID4+PiAzMikpOwogICAg\nfQoKICAgIHByb3RlY3RlZCBib29sZWFuIGlkRXF1YWxzKE9wZW5KUEFJZCBv\ndGhlcikgewogICAgICAgIHJldHVybiBfaWQgPT0gKChJZCkgb3RoZXIpLl9p\nZDsKCX0KfQo=\n","encoding":"base64"}

