{"sha":"5e9af0ded60876fbf432a87408dc4140c7330f91","node_id":"MDQ6QmxvYjIwNjM2NDo1ZTlhZjBkZWQ2MDg3NmZiZjQzMmE4NzQwOGRjNDE0MGM3MzMwZjkx","size":5701,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/5e9af0ded60876fbf432a87408dc4140c7330f91","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS51dGlsOwoKaW1wb3J0IGphdmEuaW8uT2JqZWN0U3RyZWFtRXhj\nZXB0aW9uOwppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsKaW1wb3J0IGph\ndmEudXRpbC5Db2xsZWN0aW9uOwppbXBvcnQgamF2YS51dGlsLkNvbXBhcmF0\nb3I7CmltcG9ydCBqYXZhLnV0aWwuSXRlcmF0b3I7CmltcG9ydCBqYXZhLnV0\naWwuTGlzdEl0ZXJhdG9yOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5j\nb25mLk9wZW5KUEFDb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmtlcm5lbC5PcGVuSlBBU3RhdGVNYW5hZ2VyOwoKLyoqCiAqIEV4\ndGVuc2lvbiBvZiB0aGUge0BsaW5rIEFycmF5TGlzdH0gdHlwZSB0aGF0IGRp\ncnRpZXMgdGhlCiAqIHBlcnNpc3RlbnQvdHJhbnNhY3Rpb25hbCBmaWVsZCBp\ndCBpcyBhc3NpZ25lZCB0byBvbiBtb2RpZmljYXRpb24uCiAqIFRoZSBuZWVk\nIHRvIGRpcnR5IHRoZSBmaWVsZCBvbiA8Yj5hbnk8L2I+IG1vZGlmaWNhdGlv\nbiBtYW5kYXRlcyB0aGF0CiAqIHRoaXMgY2xhc3MgbXVzdCBvdmVycmlkZSBh\nbGwgbXV0YXRvciBtZXRob2RzIG9mIHRoZSBiYXNlIHR5cGUuCiAqIFRoaXMg\nbWF5IGxlYWQgdG8gbXVsdGlwbGUgY2FsbHMgdG8gPGNvZGU+ZGlydHk8L2Nv\nZGU+IGZvciBvbmUgc3RhdGUKICogY2hhbmdlIGlmIG9uZSBtdXRhdG9yIG1l\ndGhvZCBvZiB0aGUgYmFzZSB0eXBlIGNhbGxzIGFub3RoZXIuCiAqCiAqIEBh\ndXRob3IgQWJlIFdoaXRlCiAqIEBub2phdmFkb2MKICovCnB1YmxpYyBjbGFz\ncyBQcm94eUFycmF5TGlzdAogICAgZXh0ZW5kcyBBcnJheUxpc3QKICAgIGlt\ncGxlbWVudHMgUHJveHlDb2xsZWN0aW9uIHsKCiAgICBwcml2YXRlIHRyYW5z\naWVudCBDbGFzcyBfZWxlbWVudFR5cGUgPSBudWxsOwogICAgcHJpdmF0ZSB0\ncmFuc2llbnQgT3BlbkpQQVN0YXRlTWFuYWdlciBfc20gPSBudWxsOwogICAg\ncHJpdmF0ZSB0cmFuc2llbnQgaW50IF9maWVsZCA9IC0xOwogICAgcHJpdmF0\nZSB0cmFuc2llbnQgQ29sbGVjdGlvbkNoYW5nZVRyYWNrZXIgX2N0ID0gbnVs\nbDsKCiAgICBwdWJsaWMgUHJveHlBcnJheUxpc3QoKSB7CiAgICB9CgogICAg\ncHVibGljIFByb3h5QXJyYXlMaXN0KENsYXNzIGVsZW1lbnRUeXBlLCBib29s\nZWFuIHRyYWNrQ2hhbmdlcywKICAgICAgICBPcGVuSlBBQ29uZmlndXJhdGlv\nbiBjb25mKSB7CiAgICAgICAgX2VsZW1lbnRUeXBlID0gZWxlbWVudFR5cGU7\nCiAgICAgICAgaWYgKHRyYWNrQ2hhbmdlcykKICAgICAgICAgICAgX2N0ID0g\nbmV3IENvbGxlY3Rpb25DaGFuZ2VUcmFja2VySW1wbCh0aGlzLCB0cnVlLCB0\ncnVlLCBjb25mKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRPd25lcihP\ncGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBpbnQgZmllbGQpIHsKICAgICAgICBf\nc20gPSBzbTsKICAgICAgICBfZmllbGQgPSBmaWVsZDsKICAgIH0KCiAgICBw\ndWJsaWMgT3BlbkpQQVN0YXRlTWFuYWdlciBnZXRPd25lcigpIHsKICAgICAg\nICByZXR1cm4gX3NtOwogICAgfQoKICAgIHB1YmxpYyBpbnQgZ2V0T3duZXJG\naWVsZCgpIHsKICAgICAgICByZXR1cm4gX2ZpZWxkOwogICAgfQoKICAgIHB1\nYmxpYyBDaGFuZ2VUcmFja2VyIGdldENoYW5nZVRyYWNrZXIoKSB7CiAgICAg\nICAgcmV0dXJuIF9jdDsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IGNvcHko\nT2JqZWN0IG9yaWcpIHsKICAgICAgICByZXR1cm4gbmV3IEFycmF5TGlzdCgo\nQ29sbGVjdGlvbikgb3JpZyk7CiAgICB9CgogICAgcHVibGljIFByb3h5Q29s\nbGVjdGlvbiBuZXdJbnN0YW5jZShDbGFzcyBlbGVtZW50VHlwZSwgQ29tcGFy\nYXRvciBjb21wYXJlLAogICAgICAgIGJvb2xlYW4gdHJhY2tDaGFuZ2VzLCBP\ncGVuSlBBQ29uZmlndXJhdGlvbiBjb25mKSB7CiAgICAgICAgcmV0dXJuIG5l\ndyBQcm94eUFycmF5TGlzdChlbGVtZW50VHlwZSwgdHJhY2tDaGFuZ2VzLCBj\nb25mKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBhZGQoaW50IGluZGV4LCBP\nYmplY3QgdmFsdWUpIHsKICAgICAgICBQcm94aWVzLmFzc2VydEFsbG93ZWRU\neXBlKHZhbHVlLCBfZWxlbWVudFR5cGUpOwogICAgICAgIFByb3hpZXMuZGly\ndHkodGhpcyk7CiAgICAgICAgaWYgKF9jdCAhPSBudWxsKQogICAgICAgICAg\nICBfY3Quc3RvcFRyYWNraW5nKCk7CiAgICAgICAgc3VwZXIuYWRkKGluZGV4\nLCB2YWx1ZSk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gYWRkKE9iamVj\ndCB2YWx1ZSkgewogICAgICAgIFByb3hpZXMuYXNzZXJ0QWxsb3dlZFR5cGUo\ndmFsdWUsIF9lbGVtZW50VHlwZSk7CiAgICAgICAgUHJveGllcy5kaXJ0eSh0\naGlzKTsKICAgICAgICBpZiAoc3VwZXIuYWRkKHZhbHVlKSkgewogICAgICAg\nICAgICBpZiAoX2N0ICE9IG51bGwpCiAgICAgICAgICAgICAgICBfY3QuYWRk\nZWQodmFsdWUpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9\nCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHB1YmxpYyBib29s\nZWFuIGFkZEFsbChpbnQgaW5kZXgsIENvbGxlY3Rpb24gdmFsdWVzKSB7CiAg\nICAgICAgZW5zdXJlQ2FwYWNpdHkoc2l6ZSgpICsgdmFsdWVzLnNpemUoKSk7\nCiAgICAgICAgZm9yIChJdGVyYXRvciBpdHIgPSB2YWx1ZXMuaXRlcmF0b3Io\nKTsgaXRyLmhhc05leHQoKTsgaW5kZXgrKykKICAgICAgICAgICAgYWRkKGlu\nZGV4LCBpdHIubmV4dCgpKTsKICAgICAgICByZXR1cm4gdmFsdWVzLnNpemUo\nKSA+IDA7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gYWRkQWxsKENvbGxl\nY3Rpb24gdmFsdWVzKSB7CiAgICAgICAgZW5zdXJlQ2FwYWNpdHkoc2l6ZSgp\nICsgdmFsdWVzLnNpemUoKSk7CiAgICAgICAgYm9vbGVhbiBhZGRlZCA9IGZh\nbHNlOwogICAgICAgIGZvciAoSXRlcmF0b3IgaXRyID0gdmFsdWVzLml0ZXJh\ndG9yKCk7IGl0ci5oYXNOZXh0KCk7KQogICAgICAgICAgICBhZGRlZCA9IGFk\nZChpdHIubmV4dCgpKSB8fCBhZGRlZDsKICAgICAgICByZXR1cm4gYWRkZWQ7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgY2xlYXIoKSB7CiAgICAgICAgUHJv\neGllcy5kaXJ0eSh0aGlzKTsKICAgICAgICBpZiAoX2N0ICE9IG51bGwpCiAg\nICAgICAgICAgIF9jdC5zdG9wVHJhY2tpbmcoKTsKICAgICAgICBmb3IgKGlu\ndCBpID0gMDsgaSA8IHNpemUoKTsgaSsrKQogICAgICAgICAgICBQcm94aWVz\nLnJlbW92ZWQodGhpcywgZ2V0KGkpLCBmYWxzZSk7CiAgICAgICAgc3VwZXIu\nY2xlYXIoKTsKICAgIH0KCiAgICBwdWJsaWMgSXRlcmF0b3IgaXRlcmF0b3Io\nKSB7CiAgICAgICAgcmV0dXJuIFByb3hpZXMuaXRlcmF0b3IodGhpcywgc3Vw\nZXIuaXRlcmF0b3IoKSk7CiAgICB9CgogICAgcHVibGljIExpc3RJdGVyYXRv\nciBsaXN0SXRlcmF0b3IoKSB7CiAgICAgICAgcmV0dXJuIFByb3hpZXMubGlz\ndEl0ZXJhdG9yKHRoaXMsIHN1cGVyLmxpc3RJdGVyYXRvcigpLCBfZWxlbWVu\ndFR5cGUpOwogICAgfQoKICAgIHB1YmxpYyBMaXN0SXRlcmF0b3IgbGlzdEl0\nZXJhdG9yKGludCBpbmRleCkgewogICAgICAgIHJldHVybiBQcm94aWVzLmxp\nc3RJdGVyYXRvcih0aGlzLCBzdXBlci5saXN0SXRlcmF0b3IoaW5kZXgpLAog\nICAgICAgICAgICBfZWxlbWVudFR5cGUpOwogICAgfQoKICAgIHB1YmxpYyBP\nYmplY3QgcmVtb3ZlKGludCBpbmRleCkgewogICAgICAgIFByb3hpZXMuZGly\ndHkodGhpcyk7CiAgICAgICAgT2JqZWN0IHJlbSA9IHN1cGVyLnJlbW92ZShp\nbmRleCk7CiAgICAgICAgaWYgKF9jdCAhPSBudWxsKQogICAgICAgICAgICBf\nY3QucmVtb3ZlZChyZW0pOwogICAgICAgIFByb3hpZXMucmVtb3ZlZCh0aGlz\nLCByZW0sIGZhbHNlKTsKICAgICAgICByZXR1cm4gcmVtOwogICAgfQoKICAg\nIHB1YmxpYyBib29sZWFuIHJlbW92ZShPYmplY3QgbykgewogICAgICAgIFBy\nb3hpZXMuZGlydHkodGhpcyk7CiAgICAgICAgaWYgKHN1cGVyLnJlbW92ZShv\nKSkgewogICAgICAgICAgICBpZiAoX2N0ICE9IG51bGwpCiAgICAgICAgICAg\nICAgICBfY3QucmVtb3ZlZChvKTsKICAgICAgICAgICAgUHJveGllcy5yZW1v\ndmVkKHRoaXMsIG8sIGZhbHNlKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7\nCiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBw\ndWJsaWMgYm9vbGVhbiByZW1vdmVBbGwoQ29sbGVjdGlvbiBjKSB7CiAgICAg\nICAgYm9vbGVhbiByZW1vdmVkID0gZmFsc2U7CiAgICAgICAgZm9yIChJdGVy\nYXRvciBpdHIgPSBjLml0ZXJhdG9yKCk7IGl0ci5oYXNOZXh0KCk7KQogICAg\nICAgICAgICByZW1vdmVkID0gcmVtb3ZlKGl0ci5uZXh0KCkpIHx8IHJlbW92\nZWQ7CiAgICAgICAgcmV0dXJuIHJlbW92ZWQ7CiAgICB9CgogICAgcHVibGlj\nIGJvb2xlYW4gcmV0YWluQWxsKENvbGxlY3Rpb24gYykgewogICAgICAgIGlu\ndCBzaXplID0gc2l6ZSgpOwogICAgICAgIGZvciAoSXRlcmF0b3IgaXRyID0g\naXRlcmF0b3IoKTsgaXRyLmhhc05leHQoKTspCiAgICAgICAgICAgIGlmICgh\nYy5jb250YWlucyhpdHIubmV4dCgpKSkKICAgICAgICAgICAgICAgIGl0ci5y\nZW1vdmUoKTsKICAgICAgICByZXR1cm4gc2l6ZSgpIDwgc2l6ZTsKICAgIH0K\nCiAgICBwdWJsaWMgT2JqZWN0IHNldChpbnQgaW5kZXgsIE9iamVjdCBlbGVt\nZW50KSB7CiAgICAgICAgUHJveGllcy5hc3NlcnRBbGxvd2VkVHlwZShlbGVt\nZW50LCBfZWxlbWVudFR5cGUpOwogICAgICAgIFByb3hpZXMuZGlydHkodGhp\ncyk7CiAgICAgICAgaWYgKF9jdCAhPSBudWxsKQogICAgICAgICAgICBfY3Qu\nc3RvcFRyYWNraW5nKCk7CiAgICAgICAgT2JqZWN0IHJlbSA9IHN1cGVyLnNl\ndChpbmRleCwgZWxlbWVudCk7CiAgICAgICAgaWYgKHJlbSAhPSBlbGVtZW50\nKQogICAgICAgICAgICBQcm94aWVzLnJlbW92ZWQodGhpcywgcmVtLCBmYWxz\nZSk7CiAgICAgICAgcmV0dXJuIHJlbTsKICAgIH0KCiAgICBwcm90ZWN0ZWQg\nT2JqZWN0IHdyaXRlUmVwbGFjZSgpCiAgICAgICAgdGhyb3dzIE9iamVjdFN0\ncmVhbUV4Y2VwdGlvbiB7CiAgICAgICAgaWYgKF9zbSAhPSBudWxsICYmIF9z\nbS5pc0RldGFjaGVkKCkpCiAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAg\nICAgIHJldHVybiBjb3B5KHRoaXMpOwogICAgfQp9Cg==\n","encoding":"base64"}

