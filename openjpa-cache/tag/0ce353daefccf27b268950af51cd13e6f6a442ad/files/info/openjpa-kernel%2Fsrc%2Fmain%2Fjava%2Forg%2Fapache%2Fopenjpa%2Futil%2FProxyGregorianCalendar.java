{"sha":"69c9f7bd8831c164ef6dfb3eb6ef3230bdc0fb2e","node_id":"MDQ6QmxvYjIwNjM2NDo2OWM5ZjdiZDg4MzFjMTY0ZWY2ZGZiM2ViNmVmMzIzMGJkYzBmYjJl","size":4791,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/69c9f7bd8831c164ef6dfb3eb6ef3230bdc0fb2e","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS51dGlsOwoKaW1wb3J0IGphdmEuaW8uT2JqZWN0U3RyZWFtRXhj\nZXB0aW9uOwppbXBvcnQgamF2YS51dGlsLkNhbGVuZGFyOwppbXBvcnQgamF2\nYS51dGlsLkdyZWdvcmlhbkNhbGVuZGFyOwppbXBvcnQgamF2YS51dGlsLkxv\nY2FsZTsKaW1wb3J0IGphdmEudXRpbC5UaW1lWm9uZTsKCmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEua2VybmVsLk9wZW5KUEFTdGF0ZU1hbmFnZXI7Cgov\nKioKICogRXh0ZW5zaW9uIG9mIHRoZSB7QGxpbmsgQ2FsZW5kYXJ9IHR5cGUg\ndGhhdCBjYWxscyB0aGUgPGNvZGU+ZGlydHk8L2NvZGU+CiAqIG1ldGhvZCBv\nbiBpdHMgb3duaW5nIHBlcnNpc3RlbmNlIGNhcGFibGUgaW5zdGFuY2Ugb24g\nbW9kaWZpY2F0aW9uLiBUaGlzCiAqIGNsYXNzIGRvZXMgbm90IHN1cHBvcnQg\nbW9kaWZpY2F0aW9uIHZpYSBhbnkgZGVwcmVjYXRlZCBtZXRob2Qgb2YgdGhl\nCiAqIGRhdGUgY2xhc3MuCiAqCiAqIEBhdXRob3IgTWFyYyBQcnVkJ2hvbW1l\nYXV4CiAqIEBub2phdmFkb2MKICovCnB1YmxpYyBjbGFzcyBQcm94eUdyZWdv\ncmlhbkNhbGVuZGFyCiAgICBleHRlbmRzIEdyZWdvcmlhbkNhbGVuZGFyCiAg\nICBpbXBsZW1lbnRzIFByb3h5Q2FsZW5kYXIgewoKICAgIHByaXZhdGUgdHJh\nbnNpZW50IE9wZW5KUEFTdGF0ZU1hbmFnZXIgX3NtID0gbnVsbDsKICAgIHBy\naXZhdGUgdHJhbnNpZW50IGludCBfZmllbGQgPSAtMTsKCiAgICBwdWJsaWMg\nUHJveHlHcmVnb3JpYW5DYWxlbmRhcigpIHsKICAgICAgICBzdXBlcigpOwog\nICAgfQoKICAgIHB1YmxpYyBQcm94eUdyZWdvcmlhbkNhbGVuZGFyKGludCB5\nZWFyLCBpbnQgbW9udGgsIGludCBkYXlPZk1vbnRoKSB7CiAgICAgICAgc3Vw\nZXIoeWVhciwgbW9udGgsIGRheU9mTW9udGgpOwogICAgfQoKICAgIHB1Ymxp\nYyBQcm94eUdyZWdvcmlhbkNhbGVuZGFyKGludCB5ZWFyLCBpbnQgbW9udGgs\nIGludCBkYXlPZk1vbnRoLAogICAgICAgIGludCBob3VyT2ZEYXksIGludCBt\naW51dGUpIHsKICAgICAgICBzdXBlcih5ZWFyLCBtb250aCwgZGF5T2ZNb250\naCwgaG91ck9mRGF5LCBtaW51dGUpOwogICAgfQoKICAgIHB1YmxpYyBQcm94\neUdyZWdvcmlhbkNhbGVuZGFyKGludCB5ZWFyLCBpbnQgbW9udGgsIGludCBk\nYXlPZk1vbnRoLAogICAgICAgIGludCBob3VyT2ZEYXksIGludCBtaW51dGUs\nIGludCBzZWNvbmQpIHsKICAgICAgICBzdXBlcih5ZWFyLCBtb250aCwgZGF5\nT2ZNb250aCwgaG91ck9mRGF5LCBtaW51dGUsIHNlY29uZCk7CiAgICB9Cgog\nICAgcHVibGljIFByb3h5R3JlZ29yaWFuQ2FsZW5kYXIoTG9jYWxlIGFMb2Nh\nbGUpIHsKICAgICAgICBzdXBlcihhTG9jYWxlKTsKICAgIH0KCiAgICBwdWJs\naWMgUHJveHlHcmVnb3JpYW5DYWxlbmRhcihUaW1lWm9uZSB6b25lKSB7CiAg\nICAgICAgc3VwZXIoem9uZSk7CiAgICB9CgogICAgcHVibGljIFByb3h5R3Jl\nZ29yaWFuQ2FsZW5kYXIoVGltZVpvbmUgem9uZSwgTG9jYWxlIGFMb2NhbGUp\nIHsKICAgICAgICBzdXBlcih6b25lLCBhTG9jYWxlKTsKICAgIH0KCiAgICBw\ndWJsaWMgUHJveHlDYWxlbmRhciBuZXdJbnN0YW5jZShUaW1lWm9uZSB0aW1l\nWm9uZSkgewogICAgICAgIGlmICh0aW1lWm9uZSA9PSBudWxsKQogICAgICAg\nICAgICByZXR1cm4gbmV3IFByb3h5R3JlZ29yaWFuQ2FsZW5kYXIoKTsKICAg\nICAgICBlbHNlCiAgICAgICAgICAgIHJldHVybiBuZXcgUHJveHlHcmVnb3Jp\nYW5DYWxlbmRhcih0aW1lWm9uZSk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nc2V0T3duZXIoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgaW50IGZpZWxkKSB7\nCiAgICAgICAgX3NtID0gc207CiAgICAgICAgX2ZpZWxkID0gZmllbGQ7CiAg\nICB9CgogICAgcHVibGljIE9wZW5KUEFTdGF0ZU1hbmFnZXIgZ2V0T3duZXIo\nKSB7CiAgICAgICAgcmV0dXJuIF9zbTsKICAgIH0KCiAgICBwdWJsaWMgaW50\nIGdldE93bmVyRmllbGQoKSB7CiAgICAgICAgcmV0dXJuIF9maWVsZDsKICAg\nIH0KCiAgICBwdWJsaWMgQ2hhbmdlVHJhY2tlciBnZXRDaGFuZ2VUcmFja2Vy\nKCkgewogICAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIHB1YmxpYyBP\nYmplY3QgY29weShPYmplY3Qgb3JpZykgewogICAgICAgIENhbGVuZGFyIG9y\naWdDYWwgPSAoQ2FsZW5kYXIpIG9yaWc7CgogICAgICAgIEdyZWdvcmlhbkNh\nbGVuZGFyIGNhbCA9IG5ldyBHcmVnb3JpYW5DYWxlbmRhcihvcmlnQ2FsLmdl\ndFRpbWVab25lKCkpOwogICAgICAgIGNhbC5zZXRUaW1lKG9yaWdDYWwuZ2V0\nVGltZSgpKTsKCiAgICAgICAgcmV0dXJuIGNhbDsKICAgIH0KCiAgICBwcm90\nZWN0ZWQgT2JqZWN0IHdyaXRlUmVwbGFjZSgpCiAgICAgICAgdGhyb3dzIE9i\namVjdFN0cmVhbUV4Y2VwdGlvbiB7CiAgICAgICAgaWYgKF9zbSAhPSBudWxs\nICYmIF9zbS5pc0RldGFjaGVkKCkpCiAgICAgICAgICAgIHJldHVybiB0aGlz\nOwogICAgICAgIHJldHVybiBjb3B5KHRoaXMpOwogICAgfQoKICAgIHByb3Rl\nY3RlZCB2b2lkIGNvbXB1dGVGaWVsZHMoKSB7CiAgICAgICAgLy8gQ2FsZW5k\nYXIuY29tcHV0ZUZpZWxkcygpIGlzIGNhbGxlZCB3aGVuZXZlciBhIG11dGF0\naW9uCiAgICAgICAgLy8gb2NjdXJzIGluIG9yZGVyIHRvIHJlY2FsY3VsYXRl\nIGFsbCB0aGUgZmllbGRzCiAgICAgICAgUHJveGllcy5kaXJ0eSh0aGlzKTsK\nICAgICAgICBzdXBlci5jb21wdXRlRmllbGRzKCk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgc2V0VGltZUluTWlsbGlzKGxvbmcgbWlsbGlzKSB7CiAgICAg\nICAgaWYgKG1pbGxpcyAhPSBnZXRUaW1lSW5NaWxsaXMoKSkgewogICAgICAg\nICAgICBQcm94aWVzLmRpcnR5KHRoaXMpOwogICAgICAgICAgICBzdXBlci5z\nZXRUaW1lSW5NaWxsaXMobWlsbGlzKTsKICAgICAgICB9CiAgICB9CgogICAg\ncHVibGljIHZvaWQgc2V0KGludCBmaWVsZCwgaW50IHZhbHVlKSB7CiAgICAg\nICAgaWYgKGdldChmaWVsZCkgIT0gdmFsdWUpIHsKICAgICAgICAgICAgUHJv\neGllcy5kaXJ0eSh0aGlzKTsKICAgICAgICAgICAgc3VwZXIuc2V0KGZpZWxk\nLCB2YWx1ZSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIGFk\nZChpbnQgZmllbGQsIGludCBhbW91bnQpIHsKICAgICAgICBpZiAoYW1vdW50\nICE9IDApIHsKICAgICAgICAgICAgUHJveGllcy5kaXJ0eSh0aGlzKTsKICAg\nICAgICAgICAgc3VwZXIuYWRkKGZpZWxkLCBhbW91bnQpOwogICAgICAgIH0K\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCByb2xsKGludCBmaWVsZCwgYm9vbGVh\nbiB1cCkgewogICAgICAgIFByb3hpZXMuZGlydHkodGhpcyk7CiAgICAgICAg\nc3VwZXIucm9sbChmaWVsZCwgdXApOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHJvbGwoaW50IGZpZWxkLCBpbnQgYW1vdW50KSB7CiAgICAgICAgaWYgKGFt\nb3VudCAhPSAwKSB7CiAgICAgICAgICAgIFByb3hpZXMuZGlydHkodGhpcyk7\nCiAgICAgICAgICAgIHN1cGVyLnJvbGwoZmllbGQsIGFtb3VudCk7CiAgICAg\nICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldFRpbWVab25lKFRpbWVa\nb25lIHZhbHVlKSB7CiAgICAgICAgUHJveGllcy5kaXJ0eSh0aGlzKTsKICAg\nICAgICBzdXBlci5zZXRUaW1lWm9uZSh2YWx1ZSk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgc2V0TGVuaWVudChib29sZWFuIGxlbmllbnQpIHsKICAgICAg\nICBpZiAoaXNMZW5pZW50KCkgIT0gbGVuaWVudCkgewogICAgICAgICAgICBQ\ncm94aWVzLmRpcnR5KHRoaXMpOwogICAgICAgICAgICBzdXBlci5zZXRMZW5p\nZW50KGxlbmllbnQpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBzZXRGaXJzdERheU9mV2VlayhpbnQgdmFsdWUpIHsKICAgICAgICBpZiAo\nZ2V0Rmlyc3REYXlPZldlZWsoKSAhPSB2YWx1ZSkgewogICAgICAgICAgICBQ\ncm94aWVzLmRpcnR5KHRoaXMpOwogICAgICAgICAgICBzdXBlci5zZXRGaXJz\ndERheU9mV2Vlayh2YWx1ZSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHNldE1pbmltYWxEYXlzSW5GaXJzdFdlZWsoaW50IHZhbHVlKSB7\nCiAgICAgICAgaWYgKGdldE1pbmltYWxEYXlzSW5GaXJzdFdlZWsoKSAhPSB2\nYWx1ZSkgewogICAgICAgICAgICBQcm94aWVzLmRpcnR5KHRoaXMpOwogICAg\nICAgICAgICBzdXBlci5zZXRNaW5pbWFsRGF5c0luRmlyc3RXZWVrKHZhbHVl\nKTsKICAgICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

