{"sha":"dcd5b2d7764ffe4d6414b7c09646f55c7b6151b5","node_id":"MDQ6QmxvYjIwNjM2NDpkY2Q1YjJkNzc2NGZmZTRkNjQxNGI3YzA5NjQ2ZjU1YzdiNjE1MWI1","size":4291,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/dcd5b2d7764ffe4d6414b7c09646f55c7b6151b5","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS51dGlsOwoKaW1wb3J0IGphdmEuaW8uT2JqZWN0U3RyZWFtRXhj\nZXB0aW9uOwppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247CmltcG9ydCBq\nYXZhLnV0aWwuQ29tcGFyYXRvcjsKaW1wb3J0IGphdmEudXRpbC5IYXNoU2V0\nOwppbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9yOwoKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5jb25mLk9wZW5KUEFDb25maWd1cmF0aW9uOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5PcGVuSlBBU3RhdGVNYW5hZ2Vy\nOwoKLyoqCiAqIEV4dGVuc2lvbiBvZiB0aGUge0BsaW5rIEhhc2hTZXR9IHR5\ncGUgdGhhdCBkaXJ0aWVzIHRoZQogKiBwZXJzaXN0ZW50L3RyYW5zYWN0aW9u\nYWwgZmllbGQgaXQgaXMgYXNzaWduZWQgdG8gb24gbW9kaWZpY2F0aW9uLgog\nKiBUaGUgbmVlZCB0byBkaXJ0eSB0aGUgZmllbGQgb24gPGI+YW55PC9iPiBt\nb2RpZmljYXRpb24gbWFuZGF0ZXMgdGhhdAogKiB0aGlzIGNsYXNzIG11c3Qg\nb3ZlcnJpZGUgYWxsIG11dGF0b3IgbWV0aG9kcyBvZiB0aGUgYmFzZSB0eXBl\nLgogKiBUaGlzIG1heSBsZWFkIHRvIG11bHRpcGxlIGNhbGxzIHRvIDxjb2Rl\nPmRpcnR5PC9jb2RlPiBmb3Igb25lIHN0YXRlCiAqIGNoYW5nZSBpZiBvbmUg\nbXV0YXRvciBtZXRob2Qgb2YgdGhlIGJhc2UgdHlwZSBjYWxscyBhbm90aGVy\nLgogKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKiBAbm9qYXZhZG9jCiAqLwpw\ndWJsaWMgY2xhc3MgUHJveHlIYXNoU2V0CiAgICBleHRlbmRzIEhhc2hTZXQK\nICAgIGltcGxlbWVudHMgUHJveHlDb2xsZWN0aW9uIHsKCiAgICBwcml2YXRl\nIHRyYW5zaWVudCBDbGFzcyBfZWxlbWVudFR5cGUgPSBudWxsOwogICAgcHJp\ndmF0ZSB0cmFuc2llbnQgT3BlbkpQQVN0YXRlTWFuYWdlciBfc20gPSBudWxs\nOwogICAgcHJpdmF0ZSB0cmFuc2llbnQgaW50IF9maWVsZCA9IC0xOwogICAg\ncHJpdmF0ZSB0cmFuc2llbnQgQ29sbGVjdGlvbkNoYW5nZVRyYWNrZXIgX2N0\nID0gbnVsbDsKCiAgICBwdWJsaWMgUHJveHlIYXNoU2V0KCkgewogICAgfQoK\nICAgIHB1YmxpYyBQcm94eUhhc2hTZXQoQ2xhc3MgZWxlbWVudFR5cGUsIGJv\nb2xlYW4gdHJhY2tDaGFuZ2VzLAogICAgICAgIE9wZW5KUEFDb25maWd1cmF0\naW9uIGNvbmYpIHsKICAgICAgICBfZWxlbWVudFR5cGUgPSBlbGVtZW50VHlw\nZTsKICAgICAgICBpZiAodHJhY2tDaGFuZ2VzKQogICAgICAgICAgICBfY3Qg\nPSBuZXcgQ29sbGVjdGlvbkNoYW5nZVRyYWNrZXJJbXBsKHRoaXMsIGZhbHNl\nLCBmYWxzZSwgY29uZik7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0T3du\nZXIoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgaW50IGZpZWxkKSB7CiAgICAg\nICAgX3NtID0gc207CiAgICAgICAgX2ZpZWxkID0gZmllbGQ7CiAgICB9Cgog\nICAgcHVibGljIE9wZW5KUEFTdGF0ZU1hbmFnZXIgZ2V0T3duZXIoKSB7CiAg\nICAgICAgcmV0dXJuIF9zbTsKICAgIH0KCiAgICBwdWJsaWMgaW50IGdldE93\nbmVyRmllbGQoKSB7CiAgICAgICAgcmV0dXJuIF9maWVsZDsKICAgIH0KCiAg\nICBwdWJsaWMgQ2hhbmdlVHJhY2tlciBnZXRDaGFuZ2VUcmFja2VyKCkgewog\nICAgICAgIHJldHVybiBfY3Q7CiAgICB9CgogICAgcHVibGljIE9iamVjdCBj\nb3B5KE9iamVjdCBvcmlnKSB7CiAgICAgICAgcmV0dXJuIG5ldyBIYXNoU2V0\nKChDb2xsZWN0aW9uKSBvcmlnKTsKICAgIH0KCiAgICBwdWJsaWMgUHJveHlD\nb2xsZWN0aW9uIG5ld0luc3RhbmNlKENsYXNzIGVsZW1lbnRUeXBlLCBDb21w\nYXJhdG9yIGNvbXBhcmUsCiAgICAgICAgYm9vbGVhbiB0cmFja0NoYW5nZXMs\nIE9wZW5KUEFDb25maWd1cmF0aW9uIGNvbmYpIHsKICAgICAgICByZXR1cm4g\nbmV3IFByb3h5SGFzaFNldChlbGVtZW50VHlwZSwgdHJhY2tDaGFuZ2VzLCBj\nb25mKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBhZGQoT2JqZWN0IHZh\nbHVlKSB7CiAgICAgICAgUHJveGllcy5hc3NlcnRBbGxvd2VkVHlwZSh2YWx1\nZSwgX2VsZW1lbnRUeXBlKTsKICAgICAgICBQcm94aWVzLmRpcnR5KHRoaXMp\nOwogICAgICAgIGlmIChzdXBlci5hZGQodmFsdWUpKSB7CiAgICAgICAgICAg\nIGlmIChfY3QgIT0gbnVsbCkKICAgICAgICAgICAgICAgIF9jdC5hZGRlZCh2\nYWx1ZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAg\nICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4g\nYWRkQWxsKENvbGxlY3Rpb24gdmFsdWVzKSB7CiAgICAgICAgYm9vbGVhbiBh\nZGRlZCA9IGZhbHNlOwogICAgICAgIGZvciAoSXRlcmF0b3IgaXRyID0gdmFs\ndWVzLml0ZXJhdG9yKCk7IGl0ci5oYXNOZXh0KCk7KQogICAgICAgICAgICBh\nZGRlZCA9IGFkZChpdHIubmV4dCgpKSB8fCBhZGRlZDsKICAgICAgICByZXR1\ncm4gYWRkZWQ7CiAgICB9CgogICAgcHVibGljIHZvaWQgY2xlYXIoKSB7CiAg\nICAgICAgUHJveGllcy5kaXJ0eSh0aGlzKTsKICAgICAgICBpZiAoX2N0ICE9\nIG51bGwpCiAgICAgICAgICAgIF9jdC5zdG9wVHJhY2tpbmcoKTsKICAgICAg\nICBmb3IgKEl0ZXJhdG9yIGl0ciA9IHN1cGVyLml0ZXJhdG9yKCk7IGl0ci5o\nYXNOZXh0KCk7KQogICAgICAgICAgICBQcm94aWVzLnJlbW92ZWQodGhpcywg\naXRyLm5leHQoKSwgZmFsc2UpOwogICAgICAgIHN1cGVyLmNsZWFyKCk7CiAg\nICB9CgogICAgcHVibGljIEl0ZXJhdG9yIGl0ZXJhdG9yKCkgewogICAgICAg\nIHJldHVybiBQcm94aWVzLml0ZXJhdG9yKHRoaXMsIHN1cGVyLml0ZXJhdG9y\nKCkpOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIHJlbW92ZShPYmplY3Qg\nbykgewogICAgICAgIFByb3hpZXMuZGlydHkodGhpcyk7CiAgICAgICAgaWYg\nKHN1cGVyLnJlbW92ZShvKSkgewogICAgICAgICAgICBpZiAoX2N0ICE9IG51\nbGwpCiAgICAgICAgICAgICAgICBfY3QucmVtb3ZlZChvKTsKICAgICAgICAg\nICAgUHJveGllcy5yZW1vdmVkKHRoaXMsIG8sIGZhbHNlKTsKICAgICAgICAg\nICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxz\nZTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiByZW1vdmVBbGwoQ29sbGVj\ndGlvbiBjKSB7CiAgICAgICAgYm9vbGVhbiByZW1vdmVkID0gZmFsc2U7CiAg\nICAgICAgZm9yIChJdGVyYXRvciBpdHIgPSBjLml0ZXJhdG9yKCk7IGl0ci5o\nYXNOZXh0KCk7KQogICAgICAgICAgICByZW1vdmVkID0gcmVtb3ZlKGl0ci5u\nZXh0KCkpIHx8IHJlbW92ZWQ7CiAgICAgICAgcmV0dXJuIHJlbW92ZWQ7CiAg\nICB9CgogICAgcHVibGljIGJvb2xlYW4gcmV0YWluQWxsKENvbGxlY3Rpb24g\nYykgewogICAgICAgIGludCBzaXplID0gc2l6ZSgpOwogICAgICAgIGZvciAo\nSXRlcmF0b3IgaXRyID0gaXRlcmF0b3IoKTsgaXRyLmhhc05leHQoKTspCiAg\nICAgICAgICAgIGlmICghYy5jb250YWlucyhpdHIubmV4dCgpKSkKICAgICAg\nICAgICAgICAgIGl0ci5yZW1vdmUoKTsKICAgICAgICByZXR1cm4gc2l6ZSgp\nIDwgc2l6ZTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgT2JqZWN0IHdyaXRlUmVw\nbGFjZSgpCiAgICAgICAgdGhyb3dzIE9iamVjdFN0cmVhbUV4Y2VwdGlvbiB7\nCiAgICAgICAgaWYgKF9zbSAhPSBudWxsICYmIF9zbS5pc0RldGFjaGVkKCkp\nCiAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgIHJldHVybiBjb3B5\nKHRoaXMpOwogICAgfQp9Cg==\n","encoding":"base64"}

