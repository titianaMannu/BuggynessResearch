{"sha":"c936a36094a3ce25e6710a130cde4957c9b3b987","node_id":"MDQ6QmxvYjIwNjM2NDpjOTM2YTM2MDk0YTNjZTI1ZTY3MTBhMTMwY2RlNDk1N2M5YjNiOTg3","size":9560,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/c936a36094a3ce25e6710a130cde4957c9b3b987","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS51dGlsOwoKaW1wb3J0IGphdmEubGFuZy5yZWZsZWN0LkFycmF5\nOwppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsKaW1wb3J0IGphdmEudXRp\nbC5DYWxlbmRhcjsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOwppbXBv\ncnQgamF2YS51dGlsLkNvbXBhcmF0b3I7CmltcG9ydCBqYXZhLnV0aWwuRGF0\nZTsKaW1wb3J0IGphdmEudXRpbC5HcmVnb3JpYW5DYWxlbmRhcjsKaW1wb3J0\nIGphdmEudXRpbC5IYXNoTWFwOwppbXBvcnQgamF2YS51dGlsLkhhc2hTZXQ7\nCmltcG9ydCBqYXZhLnV0aWwuSGFzaHRhYmxlOwppbXBvcnQgamF2YS51dGls\nLkxpbmtlZExpc3Q7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGph\ndmEudXRpbC5NYXA7CmltcG9ydCBqYXZhLnV0aWwuUHJvcGVydGllczsKaW1w\nb3J0IGphdmEudXRpbC5TZXQ7CmltcG9ydCBqYXZhLnV0aWwuU29ydGVkTWFw\nOwppbXBvcnQgamF2YS51dGlsLlNvcnRlZFNldDsKaW1wb3J0IGphdmEudXRp\nbC5UaW1lWm9uZTsKaW1wb3J0IGphdmEudXRpbC5UcmVlTWFwOwppbXBvcnQg\namF2YS51dGlsLlRyZWVTZXQ7CmltcG9ydCBqYXZhLnV0aWwuVmVjdG9yOwoK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5jb25mLk9wZW5KUEFDb25maWd1\ncmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5jb25mLkNv\nbmZpZ3VyYWJsZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29u\nZi5Db25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxp\nYi51dGlsLkphdmFWZXJzaW9uczsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5saWIudXRpbC5Mb2NhbGl6ZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEubGliLnV0aWwuY29uY3VycmVudC5Db25jdXJyZW50SGFzaE1hcDsKCi8q\nKgogKiBEZWZhdWx0IGltcGxlbWVudGF0aW9uIG9mIHRoZSB7QGxpbmsgUHJv\neHlNYW5hZ2VyfSBpbnRlcmZhY2UuCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRl\nCiAqLwpwdWJsaWMgY2xhc3MgUHJveHlNYW5hZ2VySW1wbAogICAgaW1wbGVt\nZW50cyBQcm94eU1hbmFnZXIsIENvbmZpZ3VyYWJsZSB7CgogICAgcHJpdmF0\nZSBzdGF0aWMgZmluYWwgTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6ZXIuZm9y\nUGFja2FnZQogICAgICAgIChQcm94eU1hbmFnZXJJbXBsLmNsYXNzKTsKCiAg\nICAvLyBkYXRlIHByb3h5IGNhY2hlCiAgICBwcml2YXRlIHN0YXRpYyBmaW5h\nbCBNYXAgX2RhdGVzID0gbmV3IEhhc2hNYXAoKTsKCiAgICBzdGF0aWMgewog\nICAgICAgIF9kYXRlcy5wdXQoRGF0ZS5jbGFzcywgbmV3IFByb3h5VXRpbERh\ndGUoKSk7CiAgICAgICAgX2RhdGVzLnB1dChqYXZhLnNxbC5EYXRlLmNsYXNz\nLCBuZXcgUHJveHlTUUxEYXRlKCkpOwogICAgICAgIF9kYXRlcy5wdXQoamF2\nYS5zcWwuVGltZXN0YW1wLmNsYXNzLCBuZXcgUHJveHlUaW1lc3RhbXAoKSk7\nCiAgICAgICAgX2RhdGVzLnB1dChqYXZhLnNxbC5UaW1lLmNsYXNzLCBuZXcg\nUHJveHlUaW1lKCkpOwogICAgfQoKICAgIC8vIGNhbGVuZGFyIHByb3h5IGNh\nY2hlCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBNYXAgX2NhbGVuZGFycyA9\nIG5ldyBIYXNoTWFwKCk7CgogICAgc3RhdGljIHsKICAgICAgICBQcm94eUdy\nZWdvcmlhbkNhbGVuZGFyIGNhbCA9IG5ldyBQcm94eUdyZWdvcmlhbkNhbGVu\nZGFyKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY2FsID0gKFByb3h5\nR3JlZ29yaWFuQ2FsZW5kYXIpIEphdmFWZXJzaW9ucy4KICAgICAgICAgICAg\nICAgIGdldFZlcnNpb25TcGVjaWZpY0NsYXNzKFByb3h5R3JlZ29yaWFuQ2Fs\nZW5kYXIuY2xhc3MpLgogICAgICAgICAgICAgICAgbmV3SW5zdGFuY2UoKTsK\nICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgIH0KCiAg\nICAgICAgX2NhbGVuZGFycy5wdXQoQ2FsZW5kYXIuY2xhc3MsIGNhbCk7CiAg\nICAgICAgX2NhbGVuZGFycy5wdXQoR3JlZ29yaWFuQ2FsZW5kYXIuY2xhc3Ms\nIGNhbCk7CiAgICB9CgogICAgLy8gc3RhbmRhcmQgY29sbGVjdGlvbiBwcm94\neSBjYWNoZQogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTWFwIF9zdGRDb2xs\nZWN0aW9ucyA9IG5ldyBIYXNoTWFwKCk7CgogICAgc3RhdGljIHsKICAgICAg\nICBQcm94eUFycmF5TGlzdCBsaXN0VGVtcGwgPSBuZXcgUHJveHlBcnJheUxp\nc3QoKTsKICAgICAgICBQcm94eUhhc2hTZXQgc2V0VGVtcGwgPSBuZXcgUHJv\neHlIYXNoU2V0KCk7CiAgICAgICAgUHJveHlUcmVlU2V0IHNvcnRlZFNldFRl\nbXBsID0gbmV3IFByb3h5VHJlZVNldCgpOwogICAgICAgIF9zdGRDb2xsZWN0\naW9ucy5wdXQoQ29sbGVjdGlvbi5jbGFzcywgbGlzdFRlbXBsKTsKICAgICAg\nICBfc3RkQ29sbGVjdGlvbnMucHV0KFNldC5jbGFzcywgc2V0VGVtcGwpOwog\nICAgICAgIF9zdGRDb2xsZWN0aW9ucy5wdXQoU29ydGVkU2V0LmNsYXNzLCBz\nb3J0ZWRTZXRUZW1wbCk7CiAgICAgICAgX3N0ZENvbGxlY3Rpb25zLnB1dChM\naXN0LmNsYXNzLCBsaXN0VGVtcGwpOwogICAgICAgIF9zdGRDb2xsZWN0aW9u\ncy5wdXQoQXJyYXlMaXN0LmNsYXNzLCBsaXN0VGVtcGwpOwogICAgICAgIF9z\ndGRDb2xsZWN0aW9ucy5wdXQoTGlua2VkTGlzdC5jbGFzcywgbmV3IFByb3h5\nTGlua2VkTGlzdCgpKTsKICAgICAgICBfc3RkQ29sbGVjdGlvbnMucHV0KFZl\nY3Rvci5jbGFzcywgbmV3IFByb3h5VmVjdG9yKCkpOwogICAgICAgIF9zdGRD\nb2xsZWN0aW9ucy5wdXQoSGFzaFNldC5jbGFzcywgc2V0VGVtcGwpOwogICAg\nICAgIF9zdGRDb2xsZWN0aW9ucy5wdXQoVHJlZVNldC5jbGFzcywgc29ydGVk\nU2V0VGVtcGwpOwogICAgfQoKICAgIC8vIHN0YW5kYXJkIG1hcCBwcm94eSBj\nYWNoZQogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTWFwIF9zdGRNYXBzID0g\nbmV3IEhhc2hNYXAoKTsKCiAgICBzdGF0aWMgewogICAgICAgIFByb3h5SGFz\naE1hcCBtYXBUZW1wbCA9IG5ldyBQcm94eUhhc2hNYXAoKTsKICAgICAgICBQ\ncm94eVRyZWVNYXAgc29ydGVkTWFwVGVtcGwgPSBuZXcgUHJveHlUcmVlTWFw\nKCk7CiAgICAgICAgX3N0ZE1hcHMucHV0KE1hcC5jbGFzcywgbWFwVGVtcGwp\nOwogICAgICAgIF9zdGRNYXBzLnB1dChTb3J0ZWRNYXAuY2xhc3MsIHNvcnRl\nZE1hcFRlbXBsKTsKICAgICAgICBfc3RkTWFwcy5wdXQoSGFzaE1hcC5jbGFz\ncywgbWFwVGVtcGwpOwogICAgICAgIF9zdGRNYXBzLnB1dChUcmVlTWFwLmNs\nYXNzLCBzb3J0ZWRNYXBUZW1wbCk7CiAgICAgICAgX3N0ZE1hcHMucHV0KEhh\nc2h0YWJsZS5jbGFzcywgbmV3IFByb3h5SGFzaHRhYmxlKCkpOwogICAgICAg\nIF9zdGRNYXBzLnB1dChQcm9wZXJ0aWVzLmNsYXNzLCBuZXcgUHJveHlQcm9w\nZXJ0aWVzKCkpOwogICAgfQoKICAgIC8vIGFsbG93IHN1YmNsYXNzZXMgdG8g\nbWFuaXB1bGF0ZSBjb2xsZWN0aW9uIGFuZCBtYXAgdGVtcGxhdGVzCiAgICBw\ncml2YXRlIGZpbmFsIE1hcCBfY29sbGVjdGlvbnMgPSBuZXcgQ29uY3VycmVu\ndEhhc2hNYXAoX3N0ZENvbGxlY3Rpb25zKTsKICAgIHByaXZhdGUgZmluYWwg\nTWFwIF9tYXBzID0gbmV3IENvbmN1cnJlbnRIYXNoTWFwKF9zdGRNYXBzKTsK\nCiAgICBwcm90ZWN0ZWQgT3BlbkpQQUNvbmZpZ3VyYXRpb24gY29uZiA9IG51\nbGw7CiAgICBwcml2YXRlIGJvb2xlYW4gX3RyYWNrQ2hhbmdlcyA9IHRydWU7\nCiAgICBwcml2YXRlIGJvb2xlYW4gX2Fzc2VydFR5cGUgPSBmYWxzZTsKCiAg\nICAvKioKICAgICAqIFdoZXRoZXIgcHJveGllcyBwcm9kdWNlZCBieSB0aGlz\nIGZhY3Rvcnkgd2lsbCB1c2Uge0BsaW5rIENoYW5nZVRyYWNrZXJ9cwogICAg\nICogdG8gdHJ5IHRvIGN1dCBkb3duIG9uIGRhdGEgc3RvcmUgb3BlcmF0aW9u\ncyBhdCB0aGUgY29zdCBvZiBzb21lIGV4dHJhCiAgICAgKiBib29ra2VlcGlu\nZyBvdmVyaGVhZC4gRGVmYXVsdHMgdG8gdHJ1ZS4KICAgICAqLwogICAgcHVi\nbGljIGJvb2xlYW4gZ2V0VHJhY2tDaGFuZ2VzKCkgewogICAgICAgIHJldHVy\nbiBfdHJhY2tDaGFuZ2VzOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhl\nciBwcm94aWVzIHByb2R1Y2VkIGJ5IHRoaXMgZmFjdG9yeSB3aWxsIHVzZSB7\nQGxpbmsgQ2hhbmdlVHJhY2tlcn1zCiAgICAgKiB0byB0cnkgdG8gY3V0IGRv\nd24gb24gZGF0YSBzdG9yZSBvcGVyYXRpb25zIGF0IHRoZSBjb3N0IG9mIHNv\nbWUgZXh0cmEKICAgICAqIGJvb2trZWVwaW5nIG92ZXJoZWFkLiBEZWZhdWx0\ncyB0byB0cnVlLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRUcmFja0No\nYW5nZXMoYm9vbGVhbiB0cmFjaykgewogICAgICAgIF90cmFja0NoYW5nZXMg\nPSB0cmFjazsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8gcGVy\nZm9ybSBydW50aW1lIGNoZWNrcyB0byBlbnN1cmUgdGhhdCBhbGwgZWxlbWVu\ndHMKICAgICAqIGFkZGVkIHRvIGNvbGxlY3Rpb24gYW5kIG1hcCBwcm94aWVz\nIGFyZSB0aGUgcHJvcGVyIGVsZW1lbnQva2V5L3ZhbHVlCiAgICAgKiB0eXBl\nIGFzIGRlZmluZWQgYnkgdGhlIG1ldGFkYXRhLiBEZWZhdWx0cyB0byBmYWxz\nZS4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gZ2V0QXNzZXJ0QWxsb3dl\nZFR5cGUoKSB7CiAgICAgICAgcmV0dXJuIF9hc3NlcnRUeXBlOwogICAgfQoK\nICAgIC8qKgogICAgICogV2hldGhlciB0byBwZXJmb3JtIHJ1bnRpbWUgY2hl\nY2tzIHRvIGVuc3VyZSB0aGF0IGFsbCBlbGVtZW50cwogICAgICogYWRkZWQg\ndG8gY29sbGVjdGlvbiBhbmQgbWFwIHByb3hpZXMgYXJlIHRoZSBwcm9wZXIg\nZWxlbWVudC9rZXkvdmFsdWUKICAgICAqIHR5cGUgYXMgZGVmaW5lZCBieSB0\naGUgbWV0YWRhdGEuIERlZmF1bHRzIHRvIGZhbHNlLgogICAgICovCiAgICBw\ndWJsaWMgdm9pZCBzZXRBc3NlcnRBbGxvd2VkVHlwZShib29sZWFuIGFzc2Vy\ndFR5cGUpIHsKICAgICAgICBfYXNzZXJ0VHlwZSA9IGFzc2VydFR5cGU7CiAg\nICB9CgogICAgcHVibGljIERhdGUgY29weURhdGUoRGF0ZSBvcmlnKSB7CiAg\nICAgICAgcmV0dXJuIChEYXRlKSBjb3B5KG9yaWcsIF9kYXRlcyk7CiAgICB9\nCgogICAgcHVibGljIENhbGVuZGFyIGNvcHlDYWxlbmRhcihDYWxlbmRhciBv\ncmlnKSB7CiAgICAgICAgcmV0dXJuIChDYWxlbmRhcikgY29weShvcmlnLCBf\nY2FsZW5kYXJzKTsKICAgIH0KCiAgICBwdWJsaWMgQ29sbGVjdGlvbiBjb3B5\nQ29sbGVjdGlvbihDb2xsZWN0aW9uIG9yaWcpIHsKICAgICAgICByZXR1cm4g\nKENvbGxlY3Rpb24pIGNvcHkob3JpZywgX2NvbGxlY3Rpb25zKTsKICAgIH0K\nCiAgICBwdWJsaWMgTWFwIGNvcHlNYXAoTWFwIG9yaWcpIHsKICAgICAgICBy\nZXR1cm4gKE1hcCkgY29weShvcmlnLCBfbWFwcyk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBJbnRlcm5hbCBoZWxwZXIgdG8gY29weSB2YWx1ZS4KICAgICAq\nLwogICAgcHJpdmF0ZSBzdGF0aWMgT2JqZWN0IGNvcHkoT2JqZWN0IG9yaWcs\nIE1hcCBwcm94aWVzKSB7CiAgICAgICAgaWYgKG9yaWcgPT0gbnVsbCkKICAg\nICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKG9yaWcgaW5zdGFu\nY2VvZiBQcm94eSkKICAgICAgICAgICAgcmV0dXJuICgoUHJveHkpIG9yaWcp\nLmNvcHkob3JpZyk7CgogICAgICAgIENsYXNzIHR5cGUgPSBvcmlnLmdldENs\nYXNzKCk7CiAgICAgICAgUHJveHkgcHJveHkgPSAoUHJveHkpIHByb3hpZXMu\nZ2V0KHR5cGUpOwogICAgICAgIGlmIChwcm94eSA9PSBudWxsKQogICAgICAg\nICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRFeGNlcHRpb24oX2xvYy5nZXQo\nImJhZC1wcm94eSIsIHR5cGUpKTsKICAgICAgICByZXR1cm4gcHJveHkuY29w\neShvcmlnKTsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IGNvcHlBcnJheShP\nYmplY3Qgb3JpZykgewogICAgICAgIGlmIChvcmlnID09IG51bGwpCiAgICAg\nICAgICAgIHJldHVybiBudWxsOwoKICAgICAgICB0cnkgewogICAgICAgICAg\nICBpbnQgbGVuZ3RoID0gQXJyYXkuZ2V0TGVuZ3RoKG9yaWcpOwogICAgICAg\nICAgICBPYmplY3QgYXJyYXkgPSBBcnJheS5uZXdJbnN0YW5jZShvcmlnLmdl\ndENsYXNzKCkuCiAgICAgICAgICAgICAgICBnZXRDb21wb25lbnRUeXBlKCks\nIGxlbmd0aCk7CgogICAgICAgICAgICBTeXN0ZW0uYXJyYXljb3B5KG9yaWcs\nIDAsIGFycmF5LCAwLCBsZW5ndGgpOwogICAgICAgICAgICByZXR1cm4gYXJy\nYXk7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAg\nICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkRXhjZXB0aW9uKF9sb2MuZ2V0KCJi\nYWQtYXJyYXkiLAogICAgICAgICAgICAgICAgZS5nZXRNZXNzYWdlKCkpLCBl\nKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIE9iamVjdCBjb3B5Q3Vz\ndG9tKE9iamVjdCBvcmlnKSB7CiAgICAgICAgaWYgKCEob3JpZyBpbnN0YW5j\nZW9mIFByb3h5KSkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAg\ncmV0dXJuICgoUHJveHkpIG9yaWcpLmNvcHkob3JpZyk7CiAgICB9CgogICAg\ncHVibGljIFByb3h5IG5ld0RhdGVQcm94eShDbGFzcyB0eXBlKSB7CiAgICAg\nICAgUHJveHlEYXRlIHBkID0gKFByb3h5RGF0ZSkgZmluZFByb3h5KHR5cGUs\nIFByb3h5RGF0ZS5jbGFzcywgX2RhdGVzKTsKICAgICAgICByZXR1cm4gcGQu\nbmV3SW5zdGFuY2UoKTsKICAgIH0KCiAgICBwdWJsaWMgUHJveHkgbmV3Q2Fs\nZW5kYXJQcm94eShDbGFzcyB0eXBlLCBUaW1lWm9uZSB0aW1lWm9uZSkgewog\nICAgICAgIFByb3h5Q2FsZW5kYXIgcGMgPSAoUHJveHlDYWxlbmRhcikgZmlu\nZFByb3h5KHR5cGUsCiAgICAgICAgICAgIFByb3h5Q2FsZW5kYXIuY2xhc3Ms\nIF9jYWxlbmRhcnMpOwogICAgICAgIHJldHVybiBwYy5uZXdJbnN0YW5jZSh0\naW1lWm9uZSk7CiAgICB9CgogICAgcHVibGljIFByb3h5IG5ld0NvbGxlY3Rp\nb25Qcm94eShDbGFzcyB0eXBlLCBDbGFzcyBlbGVtZW50VHlwZSwKICAgICAg\nICBDb21wYXJhdG9yIGNvbXBhcmUpIHsKICAgICAgICBQcm94eUNvbGxlY3Rp\nb24gcGMgPSAoUHJveHlDb2xsZWN0aW9uKSBmaW5kUHJveHkodHlwZSwKICAg\nICAgICAgICAgUHJveHlDb2xsZWN0aW9uLmNsYXNzLCBfY29sbGVjdGlvbnMp\nOwogICAgICAgIGlmICghX2Fzc2VydFR5cGUpCiAgICAgICAgICAgIGVsZW1l\nbnRUeXBlID0gbnVsbDsKICAgICAgICByZXR1cm4gcGMubmV3SW5zdGFuY2Uo\nZWxlbWVudFR5cGUsIGNvbXBhcmUsIF90cmFja0NoYW5nZXMsIGNvbmYpOwog\nICAgfQoKICAgIHB1YmxpYyBQcm94eSBuZXdNYXBQcm94eShDbGFzcyB0eXBl\nLCBDbGFzcyBrZXlUeXBlLCBDbGFzcyB2YWx1ZVR5cGUsCiAgICAgICAgQ29t\ncGFyYXRvciBjb21wYXJlKSB7CiAgICAgICAgUHJveHlNYXAgcG0gPSAoUHJv\neHlNYXApIGZpbmRQcm94eSh0eXBlLCBQcm94eU1hcC5jbGFzcywgX21hcHMp\nOwogICAgICAgIGlmICghX2Fzc2VydFR5cGUpIHsKICAgICAgICAgICAga2V5\nVHlwZSA9IG51bGw7CiAgICAgICAgICAgIHZhbHVlVHlwZSA9IG51bGw7CiAg\nICAgICAgfQogICAgICAgIHJldHVybiBwbS5uZXdJbnN0YW5jZShrZXlUeXBl\nLCB2YWx1ZVR5cGUsIGNvbXBhcmUsIF90cmFja0NoYW5nZXMsIGNvbmYpOwog\nICAgfQoKICAgIC8qKgogICAgICogSGVscGVyIG1ldGhvZCB0byBmaW5kIGFu\nIGV4aXN0aW5nIHByb3h5IGZvciB0aGUgZ2l2ZW4gdHlwZS4KICAgICAqLwog\nICAgcHJpdmF0ZSBzdGF0aWMgUHJveHkgZmluZFByb3h5KENsYXNzIHR5cGUs\nIENsYXNzIHByb3h5VHlwZSwgTWFwIHByb3hpZXMpIHsKICAgICAgICBQcm94\neSBwID0gKFByb3h5KSBwcm94aWVzLmdldCh0eXBlKTsKCiAgICAgICAgaWYg\nKHAgPT0gbnVsbCkgewogICAgICAgICAgICAvLyBjaGVjayBmb3IgY3VzdG9t\nIHByb3h5CiAgICAgICAgICAgIGlmIChwcm94eVR5cGUuaXNBc3NpZ25hYmxl\nRnJvbSh0eXBlKSkgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgICAgICAgICBwID0gKFByb3h5KSB0eXBlLm5ld0luc3RhbmNlKCk7CiAg\nICAgICAgICAgICAgICAgICAgcHJveGllcy5wdXQodHlwZSwgcCk7CiAgICAg\nICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAg\nICAgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZEV4Y2VwdGlvbihfbG9j\nLmdldCgibm8tcHJveHktY29ucyIsCiAgICAgICAgICAgICAgICAgICAgICAg\nIHR5cGUpLCBlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBl\nbHNlCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRFeGNl\ncHRpb24oX2xvYy5nZXQoImJhZC1wcm94eSIsIHR5cGUpKTsKICAgICAgICB9\nCiAgICAgICAgcmV0dXJuIHA7CiAgICB9CgogICAgcHVibGljIFByb3h5IG5l\nd0N1c3RvbVByb3h5KE9iamVjdCBvYmopIHsKICAgICAgICByZXR1cm4gKG9i\naiBpbnN0YW5jZW9mIFByb3h5KSA/IChQcm94eSkgb2JqIDogbnVsbDsKICAg\nIH0KCiAgICAvKioKICAgICAqIEFkZCBhIHN1cHBvcnRlZCBwcm94eSBjb2xs\nZWN0aW9uIHR5cGUuCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIHNldFBy\nb3h5VGVtcGxhdGUoQ2xhc3MgY29sbFR5cGUsIFByb3h5Q29sbGVjdGlvbiBw\ncm94eSkgewogICAgICAgIF9jb2xsZWN0aW9ucy5wdXQoY29sbFR5cGUsIHBy\nb3h5KTsKICAgIH0KCiAgICAvKioKICAgICAqIEFkZCBhIHN1cHBvcnRlZCBw\ncm94eSBtYXAgdHlwZS4KICAgICAqLwogICAgcHJvdGVjdGVkIHZvaWQgc2V0\nUHJveHlUZW1wbGF0ZShDbGFzcyBtYXBUeXBlLCBQcm94eU1hcCBwcm94eSkg\newogICAgICAgIF9tYXBzLnB1dChtYXBUeXBlLCBwcm94eSk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgc2V0Q29uZmlndXJhdGlvbihDb25maWd1cmF0aW9u\nIGNvbmYpIHsKICAgICAgICB0aGlzLmNvbmYgPSAoT3BlbkpQQUNvbmZpZ3Vy\nYXRpb24pIGNvbmY7CiAgICB9CgogICAgcHVibGljIHZvaWQgc3RhcnRDb25m\naWd1cmF0aW9uKCkgewogICAgfQoKICAgIHB1YmxpYyB2b2lkIGVuZENvbmZp\nZ3VyYXRpb24gKCkKCXsKCX0KfQo=\n","encoding":"base64"}

