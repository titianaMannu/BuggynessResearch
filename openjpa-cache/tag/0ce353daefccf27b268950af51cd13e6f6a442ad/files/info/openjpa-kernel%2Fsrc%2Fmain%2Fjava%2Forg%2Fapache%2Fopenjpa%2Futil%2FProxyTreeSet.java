{"sha":"01a95e563b0e61a0ee94a187e54d13bdf1105b29","node_id":"MDQ6QmxvYjIwNjM2NDowMWE5NWU1NjNiMGU2MWEwZWU5NGExODdlNTRkMTNiZGYxMTA1YjI5","size":4808,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/01a95e563b0e61a0ee94a187e54d13bdf1105b29","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS51dGlsOwoKaW1wb3J0IGphdmEuaW8uT2JqZWN0U3RyZWFtRXhj\nZXB0aW9uOwppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247CmltcG9ydCBq\nYXZhLnV0aWwuQ29tcGFyYXRvcjsKaW1wb3J0IGphdmEudXRpbC5JdGVyYXRv\ncjsKaW1wb3J0IGphdmEudXRpbC5Tb3J0ZWRTZXQ7CmltcG9ydCBqYXZhLnV0\naWwuVHJlZVNldDsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuY29uZi5P\ncGVuSlBBQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5rZXJuZWwuT3BlbkpQQVN0YXRlTWFuYWdlcjsKCi8qKgogKiBFeHRlbnNp\nb24gb2YgdGhlIHtAbGluayBUcmVlU2V0fSB0eXBlIHRoYXQgZGlydGllcyB0\naGUKICogcGVyc2lzdGVudC90cmFuc2FjdGlvbmFsIGZpZWxkIGl0IGlzIGFz\nc2lnbmVkIHRvIG9uIG1vZGlmaWNhdGlvbi4KICogVGhlIG5lZWQgdG8gZGly\ndHkgdGhlIGZpZWxkIG9uIDxiPmFueTwvYj4gbW9kaWZpY2F0aW9uIG1hbmRh\ndGVzIHRoYXQKICogdGhpcyBjbGFzcyBtdXN0IG92ZXJyaWRlIGFsbCBtdXRh\ndG9yIG1ldGhvZHMgb2YgdGhlIGJhc2UgdHlwZS4KICogVGhpcyBtYXkgbGVh\nZCB0byBtdWx0aXBsZSBjYWxscyB0byA8Y29kZT5kaXJ0eTwvY29kZT4gZm9y\nIG9uZSBzdGF0ZQogKiBjaGFuZ2UgaWYgb25lIG11dGF0b3IgbWV0aG9kIG9m\nIHRoZSBiYXNlIHR5cGUgY2FsbHMgYW5vdGhlci4KICoKICogQGF1dGhvciBB\nYmUgV2hpdGUKICogQG5vamF2YWRvYwogKi8KcHVibGljIGNsYXNzIFByb3h5\nVHJlZVNldAogICAgZXh0ZW5kcyBUcmVlU2V0CiAgICBpbXBsZW1lbnRzIFBy\nb3h5Q29sbGVjdGlvbiB7CgogICAgcHJpdmF0ZSB0cmFuc2llbnQgQ2xhc3Mg\nX2VsZW1lbnRUeXBlID0gbnVsbDsKICAgIHByaXZhdGUgdHJhbnNpZW50IE9w\nZW5KUEFTdGF0ZU1hbmFnZXIgX3NtID0gbnVsbDsKICAgIHByaXZhdGUgdHJh\nbnNpZW50IGludCBfZmllbGQgPSAtMTsKICAgIHByaXZhdGUgdHJhbnNpZW50\nIENvbGxlY3Rpb25DaGFuZ2VUcmFja2VyIF9jdCA9IG51bGw7CgogICAgcHVi\nbGljIFByb3h5VHJlZVNldCgpIHsKICAgIH0KCiAgICBwdWJsaWMgUHJveHlU\ncmVlU2V0KENsYXNzIGVsZW1lbnRUeXBlLCBib29sZWFuIHRyYWNrQ2hhbmdl\ncywKICAgICAgICBPcGVuSlBBQ29uZmlndXJhdGlvbiBjb25mKSB7CiAgICAg\nICAgX2VsZW1lbnRUeXBlID0gZWxlbWVudFR5cGU7CiAgICAgICAgaWYgKHRy\nYWNrQ2hhbmdlcykKICAgICAgICAgICAgX2N0ID0gbmV3IENvbGxlY3Rpb25D\naGFuZ2VUcmFja2VySW1wbCh0aGlzLCBmYWxzZSwgZmFsc2UsIGNvbmYpOwog\nICAgfQoKICAgIHB1YmxpYyBQcm94eVRyZWVTZXQoQ2xhc3MgZWxlbWVudFR5\ncGUsIENvbXBhcmF0b3IgY29tcGFyZSwKICAgICAgICBib29sZWFuIHRyYWNr\nQ2hhbmdlcywgT3BlbkpQQUNvbmZpZ3VyYXRpb24gY29uZikgewogICAgICAg\nIHN1cGVyKGNvbXBhcmUpOwogICAgICAgIF9lbGVtZW50VHlwZSA9IGVsZW1l\nbnRUeXBlOwogICAgICAgIGlmICh0cmFja0NoYW5nZXMpCiAgICAgICAgICAg\nIF9jdCA9IG5ldyBDb2xsZWN0aW9uQ2hhbmdlVHJhY2tlckltcGwodGhpcywg\nZmFsc2UsIGZhbHNlLCBjb25mKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBz\nZXRPd25lcihPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBpbnQgZmllbGQpIHsK\nICAgICAgICBfc20gPSBzbTsKICAgICAgICBfZmllbGQgPSBmaWVsZDsKICAg\nIH0KCiAgICBwdWJsaWMgT3BlbkpQQVN0YXRlTWFuYWdlciBnZXRPd25lcigp\nIHsKICAgICAgICByZXR1cm4gX3NtOwogICAgfQoKICAgIHB1YmxpYyBpbnQg\nZ2V0T3duZXJGaWVsZCgpIHsKICAgICAgICByZXR1cm4gX2ZpZWxkOwogICAg\nfQoKICAgIHB1YmxpYyBDaGFuZ2VUcmFja2VyIGdldENoYW5nZVRyYWNrZXIo\nKSB7CiAgICAgICAgcmV0dXJuIF9jdDsKICAgIH0KCiAgICBwdWJsaWMgT2Jq\nZWN0IGNvcHkoT2JqZWN0IG9yaWcpIHsKICAgICAgICBpZiAob3JpZyBpbnN0\nYW5jZW9mIFNvcnRlZFNldCkKICAgICAgICAgICAgcmV0dXJuIG5ldyBUcmVl\nU2V0KChTb3J0ZWRTZXQpIG9yaWcpOwogICAgICAgIHJldHVybiBuZXcgVHJl\nZVNldCgoQ29sbGVjdGlvbikgb3JpZyk7CiAgICB9CgogICAgcHVibGljIFBy\nb3h5Q29sbGVjdGlvbiBuZXdJbnN0YW5jZShDbGFzcyBlbGVtZW50VHlwZSwg\nQ29tcGFyYXRvciBjb21wYXJlLAogICAgICAgIGJvb2xlYW4gdHJhY2tDaGFu\nZ2VzLCBPcGVuSlBBQ29uZmlndXJhdGlvbiBjb25mKSB7CiAgICAgICAgaWYg\nKGNvbXBhcmUgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm94\neVRyZWVTZXQoZWxlbWVudFR5cGUsIHRyYWNrQ2hhbmdlcywgY29uZik7CiAg\nICAgICAgcmV0dXJuIG5ldyBQcm94eVRyZWVTZXQoZWxlbWVudFR5cGUsIGNv\nbXBhcmUsIHRyYWNrQ2hhbmdlcywgY29uZik7CiAgICB9CgogICAgcHVibGlj\nIGJvb2xlYW4gYWRkKE9iamVjdCB2YWx1ZSkgewogICAgICAgIFByb3hpZXMu\nYXNzZXJ0QWxsb3dlZFR5cGUodmFsdWUsIF9lbGVtZW50VHlwZSk7CiAgICAg\nICAgUHJveGllcy5kaXJ0eSh0aGlzKTsKICAgICAgICBpZiAoc3VwZXIuYWRk\nKHZhbHVlKSkgewogICAgICAgICAgICBpZiAoX2N0ICE9IG51bGwpCiAgICAg\nICAgICAgICAgICBfY3QuYWRkZWQodmFsdWUpOwogICAgICAgICAgICByZXR1\ncm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAg\nfQoKICAgIHB1YmxpYyBib29sZWFuIGFkZEFsbChDb2xsZWN0aW9uIHZhbHVl\ncykgewogICAgICAgIGJvb2xlYW4gYWRkZWQgPSBmYWxzZTsKICAgICAgICBm\nb3IgKEl0ZXJhdG9yIGl0ciA9IHZhbHVlcy5pdGVyYXRvcigpOyBpdHIuaGFz\nTmV4dCgpOykKICAgICAgICAgICAgYWRkZWQgPSBhZGQoaXRyLm5leHQoKSkg\nfHwgYWRkZWQ7CiAgICAgICAgcmV0dXJuIGFkZGVkOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIGNsZWFyKCkgewogICAgICAgIFByb3hpZXMuZGlydHkodGhp\ncyk7CiAgICAgICAgaWYgKF9jdCAhPSBudWxsKQogICAgICAgICAgICBfY3Qu\nc3RvcFRyYWNraW5nKCk7CiAgICAgICAgZm9yIChJdGVyYXRvciBpdHIgPSBz\ndXBlci5pdGVyYXRvcigpOyBpdHIuaGFzTmV4dCgpOykKICAgICAgICAgICAg\nUHJveGllcy5yZW1vdmVkKHRoaXMsIGl0ci5uZXh0KCksIGZhbHNlKTsKICAg\nICAgICBzdXBlci5jbGVhcigpOwogICAgfQoKICAgIHB1YmxpYyBJdGVyYXRv\nciBpdGVyYXRvcigpIHsKICAgICAgICByZXR1cm4gUHJveGllcy5pdGVyYXRv\ncih0aGlzLCBzdXBlci5pdGVyYXRvcigpKTsKICAgIH0KCiAgICBwdWJsaWMg\nYm9vbGVhbiByZW1vdmUoT2JqZWN0IG8pIHsKICAgICAgICBQcm94aWVzLmRp\ncnR5KHRoaXMpOwogICAgICAgIGlmIChzdXBlci5yZW1vdmUobykpIHsKICAg\nICAgICAgICAgaWYgKF9jdCAhPSBudWxsKQogICAgICAgICAgICAgICAgX2N0\nLnJlbW92ZWQobyk7CiAgICAgICAgICAgIFByb3hpZXMucmVtb3ZlZCh0aGlz\nLCBvLCBmYWxzZSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAg\nIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgcHVibGljIGJv\nb2xlYW4gcmVtb3ZlQWxsKENvbGxlY3Rpb24gYykgewogICAgICAgIGJvb2xl\nYW4gcmVtb3ZlZCA9IGZhbHNlOwogICAgICAgIGZvciAoSXRlcmF0b3IgaXRy\nID0gYy5pdGVyYXRvcigpOyBpdHIuaGFzTmV4dCgpOykKICAgICAgICAgICAg\ncmVtb3ZlZCA9IHJlbW92ZShpdHIubmV4dCgpKSB8fCByZW1vdmVkOwogICAg\nICAgIHJldHVybiByZW1vdmVkOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFu\nIHJldGFpbkFsbChDb2xsZWN0aW9uIGMpIHsKICAgICAgICBpbnQgc2l6ZSA9\nIHNpemUoKTsKICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9IGl0ZXJhdG9y\nKCk7IGl0ci5oYXNOZXh0KCk7KQogICAgICAgICAgICBpZiAoIWMuY29udGFp\nbnMoaXRyLm5leHQoKSkpCiAgICAgICAgICAgICAgICBpdHIucmVtb3ZlKCk7\nCiAgICAgICAgcmV0dXJuIHNpemUoKSA8IHNpemU7CiAgICB9CgogICAgcHJv\ndGVjdGVkIE9iamVjdCB3cml0ZVJlcGxhY2UoKQogICAgICAgIHRocm93cyBP\nYmplY3RTdHJlYW1FeGNlcHRpb24gewogICAgICAgIGlmIChfc20gIT0gbnVs\nbCAmJiBfc20uaXNEZXRhY2hlZCgpKQogICAgICAgICAgICByZXR1cm4gdGhp\nczsKICAgICAgICByZXR1cm4gY29weSh0aGlzKTsKICAgIH0KfQo=\n","encoding":"base64"}

