{"sha":"a1fe176d8a5fb09afbbab542d3ce35d374ea0050","node_id":"MDQ6QmxvYjIwNjM2NDphMWZlMTc2ZDhhNWZiMDlhZmJiYWI1NDJkM2NlMzVkMzc0ZWEwMDUw","size":4926,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/a1fe176d8a5fb09afbbab542d3ce35d374ea0050","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS51dGlsOwoKaW1wb3J0IGphdmEuaW8uQnl0ZUFycmF5SW5wdXRT\ndHJlYW07CmltcG9ydCBqYXZhLmlvLkJ5dGVBcnJheU91dHB1dFN0cmVhbTsK\naW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247CmltcG9ydCBqYXZhLmlvLklu\ncHV0U3RyZWFtOwppbXBvcnQgamF2YS5pby5PYmplY3RJbnB1dFN0cmVhbTsK\naW1wb3J0IGphdmEuaW8uT2JqZWN0T3V0cHV0U3RyZWFtOwppbXBvcnQgamF2\nYS5pby5PdXRwdXRTdHJlYW07CmltcG9ydCBqYXZhLmlvLlNlcmlhbGl6YWJs\nZTsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuY29uZi5PcGVuSlBBQ29u\nZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwu\nU3RvcmVDb250ZXh0OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5s\nb2cuTG9nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkxv\nY2FsaXplcjsKCi8qKgogKiBIZWxwZXIgY2xhc3MgdG8gc2VyaWFsaXplIGFu\nZCBkZXNlcmlhbGl6ZSBwZXJzaXN0ZW50IG9iamVjdHMsCiAqIHN1YnRpdHV0\naW5nIG9pZHMgaW50byB0aGUgc2VyaWFsaXplZCBzdHJlYW0gYW5kIHN1YnRp\ndHV0aW5nIHRoZSBwZXJzaXN0ZW50CiAqIG9iamVjdHMgYmFjayBkdXJpbmcg\nZGVzZXJpYWxpemF0aW9uLgogKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKiBA\nc2luY2UgMC4zLjMKICogQG5vamF2YWRvYwogKi8KcHVibGljIGNsYXNzIFNl\ncmlhbGl6YXRpb24gewoKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvY2Fs\naXplciBfbG9jID0gTG9jYWxpemVyLmZvclBhY2thZ2UKICAgICAgICAoU2Vy\naWFsaXphdGlvbi5jbGFzcyk7CgogICAgLyoqCiAgICAgKiBTZXJpYWxpemUg\nYSB2YWx1ZSB0aGF0IG1pZ2h0IGNvbnRhaW4gcGVyc2lzdGVudCBvYmplY3Rz\nLiBSZXBsYWNlcwogICAgICogcGVyc2lzdGVudCBvYmplY3RzIHdpdGggdGhl\naXIgb2lkcy4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBieXRlW10gc2Vy\naWFsaXplKE9iamVjdCB2YWwsIFN0b3JlQ29udGV4dCBjdHgpIHsKICAgICAg\nICBCeXRlQXJyYXlPdXRwdXRTdHJlYW0gYnl0ZXMgPSBuZXcgQnl0ZUFycmF5\nT3V0cHV0U3RyZWFtKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgT2Jq\nZWN0T3V0cHV0U3RyZWFtIG9ianMgPSBuZXcgUGVyc2lzdGVudE9iamVjdE91\ndHB1dFN0cmVhbShieXRlcywKICAgICAgICAgICAgICAgIGN0eCk7CiAgICAg\nICAgICAgIG9ianMud3JpdGVPYmplY3QodmFsKTsKICAgICAgICAgICAgb2Jq\ncy5mbHVzaCgpOwogICAgICAgICAgICByZXR1cm4gYnl0ZXMudG9CeXRlQXJy\nYXkoKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAg\nICAgICB0aHJvdyBuZXcgU3RvcmVFeGNlcHRpb24oZSk7CiAgICAgICAgfQog\nICAgfQoKICAgIC8qKgogICAgICogRGVzZXJpYWxpemUgYW4gb2JqZWN0IHZh\nbHVlIGZyb20gdGhlIGdpdmVuIGJ5dGVzLgogICAgICovCiAgICBwdWJsaWMg\nc3RhdGljIE9iamVjdCBkZXNlcmlhbGl6ZShieXRlW10gYnl0ZXMsIFN0b3Jl\nQ29udGV4dCBjdHgpIHsKICAgICAgICBCeXRlQXJyYXlJbnB1dFN0cmVhbSBp\nbiA9IG5ldyBCeXRlQXJyYXlJbnB1dFN0cmVhbShieXRlcyk7CiAgICAgICAg\ncmV0dXJuIGRlc2VyaWFsaXplKGluLCBjdHgpOwogICAgfQoKICAgIC8qKgog\nICAgICogRGVzZXJpYWxpemUgYW4gb2JqZWN0IHZhbHVlIGZyb20gdGhlIGdp\ndmVuIHN0cmVhbS4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBPYmplY3Qg\nZGVzZXJpYWxpemUoSW5wdXRTdHJlYW0gaW4sIFN0b3JlQ29udGV4dCBjdHgp\nIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBpZiAoY3R4ID09IG51bGwp\nCiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE9iamVjdElucHV0U3RyZWFt\nKGluKS5yZWFkT2JqZWN0KCk7CiAgICAgICAgICAgIHJldHVybiBuZXcgUGVy\nc2lzdGVudE9iamVjdElucHV0U3RyZWFtKGluLCBjdHgpLnJlYWRPYmplY3Qo\nKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAg\nICB0aHJvdyBuZXcgU3RvcmVFeGNlcHRpb24oZSk7CiAgICAgICAgfQogICAg\nfQoKICAgIC8qKgogICAgICogT2JqZWN0IG91dHB1dCBzdHJlYW0gdGhhdCBy\nZXBsYWNlcyBwZXJzaXN0ZW50IG9iamVjdHMgd2l0aCB0aGVpciBvaWRzLgog\nICAgICovCiAgICBwcml2YXRlIHN0YXRpYyBjbGFzcyBQZXJzaXN0ZW50T2Jq\nZWN0T3V0cHV0U3RyZWFtCiAgICAgICAgZXh0ZW5kcyBPYmplY3RPdXRwdXRT\ndHJlYW0gewoKICAgICAgICBwcml2YXRlIFN0b3JlQ29udGV4dCBfY3R4OwoK\nICAgICAgICAvKioKICAgICAgICAgKiBDb25zdHJ1Y3Rvcjsgc3VwcGx5IHVu\nZGVybHlpbmcgc3RyZWFtLgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBQ\nZXJzaXN0ZW50T2JqZWN0T3V0cHV0U3RyZWFtKE91dHB1dFN0cmVhbSBkZWxl\nZ2F0ZSwKICAgICAgICAgICAgU3RvcmVDb250ZXh0IGN0eCkKICAgICAgICAg\nICAgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICAgICAgc3VwZXIoZGVs\nZWdhdGUpOwogICAgICAgICAgICBfY3R4ID0gY3R4OwogICAgICAgICAgICBl\nbmFibGVSZXBsYWNlT2JqZWN0KHRydWUpOwogICAgICAgIH0KCiAgICAgICAg\ncHJvdGVjdGVkIE9iamVjdCByZXBsYWNlT2JqZWN0KE9iamVjdCBvYmopIHsK\nICAgICAgICAgICAgT2JqZWN0IG9pZCA9IF9jdHguZ2V0T2JqZWN0SWQob2Jq\nKTsKICAgICAgICAgICAgcmV0dXJuIChvaWQgPT0gbnVsbCkgPyBvYmogOiBu\nZXcgT2JqZWN0SWRNYXJrZXIob2lkKTsKICAgICAgICB9CiAgICB9CgogICAg\nLyoqCiAgICAgKiBPYmplY3QgaW5wdXQgc3RyZWFtIHRoYXQgcmVwbGFjZXMg\nb2lkcyB3aXRoIHRoZWlyIG9iamVjdHMuCiAgICAgKi8KICAgIHByaXZhdGUg\nc3RhdGljIGNsYXNzIFBlcnNpc3RlbnRPYmplY3RJbnB1dFN0cmVhbQogICAg\nICAgIGV4dGVuZHMgT2JqZWN0SW5wdXRTdHJlYW0gewoKICAgICAgICBwcml2\nYXRlIGZpbmFsIFN0b3JlQ29udGV4dCBfY3R4OwoKICAgICAgICAvKioKICAg\nICAgICAgKiBDb25zdHJ1Y3Rvcjsgc3VwcGx5IHNvdXJjZSBzdHJlYW0gYW5k\nIGJyb2tlciB0bwogICAgICAgICAqIHVzZSBmb3IgcGVyc2lzdGVudCBvYmpl\nY3QgbG9va3Vwcy4KICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgUGVyc2lz\ndGVudE9iamVjdElucHV0U3RyZWFtKElucHV0U3RyZWFtIGRlbGVnYXRlLAog\nICAgICAgICAgICBTdG9yZUNvbnRleHQgY3R4KQogICAgICAgICAgICB0aHJv\nd3MgSU9FeGNlcHRpb24gewogICAgICAgICAgICBzdXBlcihkZWxlZ2F0ZSk7\nCiAgICAgICAgICAgIF9jdHggPSBjdHg7CiAgICAgICAgICAgIGVuYWJsZVJl\nc29sdmVPYmplY3QodHJ1ZSk7CiAgICAgICAgfQoKICAgICAgICBwcm90ZWN0\nZWQgT2JqZWN0IHJlc29sdmVPYmplY3QoT2JqZWN0IG9iaikgewogICAgICAg\nICAgICBpZiAoIShvYmogaW5zdGFuY2VvZiBPYmplY3RJZE1hcmtlcikpCiAg\nICAgICAgICAgICAgICByZXR1cm4gb2JqOwoKICAgICAgICAgICAgT2JqZWN0\nIG9pZCA9ICgoT2JqZWN0SWRNYXJrZXIpIG9iaikub2lkOwogICAgICAgICAg\nICBpZiAob2lkID09IG51bGwpCiAgICAgICAgICAgICAgICByZXR1cm4gbnVs\nbDsKCiAgICAgICAgICAgIE9iamVjdCBwYyA9IF9jdHguZmluZChvaWQsIG51\nbGwsIG51bGwsIG51bGwsIDApOwogICAgICAgICAgICBpZiAocGMgPT0gbnVs\nbCkgewogICAgICAgICAgICAgICAgTG9nIGxvZyA9IF9jdHguZ2V0Q29uZmln\ndXJhdGlvbigpLmdldExvZwogICAgICAgICAgICAgICAgICAgIChPcGVuSlBB\nQ29uZmlndXJhdGlvbi5MT0dfUlVOVElNRSk7CiAgICAgICAgICAgICAgICBp\nZiAobG9nLmlzV2FybkVuYWJsZWQoKSkKICAgICAgICAgICAgICAgICAgICBs\nb2cud2FybihfbG9jLmdldCgiYmFkLXNlci1vaWQiLCBvaWQpKTsKICAgICAg\nICAgICAgICAgIGlmIChsb2cuaXNUcmFjZUVuYWJsZWQoKSkKICAgICAgICAg\nICAgICAgICAgICBsb2cudHJhY2UobmV3IE9iamVjdE5vdEZvdW5kRXhjZXB0\naW9uKG9pZCkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBw\nYzsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBNYXJrZXIgZm9y\nIG9pZHMuCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGljIGNsYXNzIE9iamVj\ndElkTWFya2VyCiAgICAgICAgaW1wbGVtZW50cyBTZXJpYWxpemFibGUgewoK\nICAgICAgICBwdWJsaWMgT2JqZWN0IG9pZDsKCiAgICAgICAgcHVibGljIE9i\namVjdElkTWFya2VyKE9iamVjdCBvaWQpIHsKICAgICAgICAgICAgdGhpcy5v\naWQgPSBvaWQ7CgkJfQoJfSAKfQoK\n","encoding":"base64"}

