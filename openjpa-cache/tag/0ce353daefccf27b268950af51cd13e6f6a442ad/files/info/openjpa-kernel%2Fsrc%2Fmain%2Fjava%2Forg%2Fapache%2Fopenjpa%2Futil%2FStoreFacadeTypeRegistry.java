{"sha":"595c98207ef03a7370bf7054810eeca4272d5c78","node_id":"MDQ6QmxvYjIwNjM2NDo1OTVjOTgyMDdlZjAzYTczNzBiZjcwNTQ4MTBlZWNhNDI3MmQ1Yzc4","size":4069,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/595c98207ef03a7370bf7054810eeca4272d5c78","content":"LyoNCiAqIENvcHlyaWdodCAyMDA2IFRoZSBBcGFjaGUgU29mdHdhcmUgRm91\nbmRhdGlvbi4NCiAqDQogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExp\nY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsNCiAqIHlvdSBt\nYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0\naCB0aGUgTGljZW5zZS4NCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0\naGUgTGljZW5zZSBhdA0KICoNCiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9s\naWNlbnNlcy9MSUNFTlNFLTIuMA0KICoNCiAqIFVubGVzcyByZXF1aXJlZCBi\neSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29m\ndHdhcmUNCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRp\nc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsDQogKiBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4\ncHJlc3Mgb3IgaW1wbGllZC4NCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQN\nCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLg0KICovDQpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS51dGlsOw0KDQppbXBvcnQgamF2YS51\ndGlsLk1hcDsNCg0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwu\nU3RvcmVNYW5hZ2VyOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIu\ndXRpbC5jb25jdXJyZW50LkNvbmN1cnJlbnRIYXNoTWFwOw0KDQovKioNCiAq\nIFJlcG9zaXRvcnkgb2Ygc3RvcmUtc3BlY2lmaWMgZmFjYWRlIGNsYXNzZXMu\nIFRoaXMgaXMgdXNlZCBieSBmYWNhZGUgDQogKiBpbXBsZW1lbnRhdGlvbnMg\ndG8gd3JhcCBzdG9yZS1zcGVjaWZpYyBjb21wb25lbnRzIHdpdGhvdXQga25v\nd2luZyANCiAqIGFib3V0IGFsbCBwb3NzaWJsZSBiYWNrLWVuZHMuDQogKi8N\nCnB1YmxpYyBjbGFzcyBTdG9yZUZhY2FkZVR5cGVSZWdpc3RyeSB7DQoNCiAg\nICBwcml2YXRlIE1hcCBfaW1wbHMgPSBuZXcgQ29uY3VycmVudEhhc2hNYXAo\nKTsNCg0KICAgIC8qKg0KICAgICAqIFJlZ2lzdGVyIGEgZmFjYWRlIGltcGxl\nbWVudGF0aW9uLg0KICAgICAqDQogICAgICogQHBhcmFtIGZhY2FkZVR5cGUg\ndGhlIGZhY2FkZSBpbnRlcmZhY2UNCiAgICAgKiBAcGFyYW0gc3RvcmVUeXBl\nIHRoZSBzdG9yZSdzIA0KICAgICAqIHtAbGluayBvcmcuYXBhY2hlLm9wZW5q\ncGEua2VybmVsLlN0b3JlTWFuYWdlcn0gdHlwZSwgb3IgbnVsbCBmb3IgZ2Vu\nZXJpYw0KICAgICAqIEBwYXJhbSBpbXBsVHlwZSB0aGUgY2xhc3MgaW1wbGVt\nZW50aW5nIHRoZSBmYWNhZGUNCiAgICAgKi8NCiAgICBwdWJsaWMgdm9pZCBy\nZWdpc3RlckltcGxlbWVudGF0aW9uKENsYXNzIGZhY2FkZVR5cGUsIENsYXNz\nIHN0b3JlVHlwZSwgDQogICAgICAgIENsYXNzIGltcGxUeXBlKSB7DQogICAg\nICAgIE9iamVjdCBrZXkgPSAoc3RvcmVUeXBlID09IG51bGwpID8gKE9iamVj\ndClmYWNhZGVUeXBlIA0KICAgICAgICAgICAgOiBuZXcgS2V5KGZhY2FkZVR5\ncGUsIHN0b3JlVHlwZSk7DQogICAgICAgIF9pbXBscy5wdXQoa2V5LCBpbXBs\nVHlwZSk7DQogICAgfQ0KICAgIA0KICAgIC8qKg0KICAgICAqIFJldHVybiB0\naGUgaW1wbGVtZW50YXRpb24gZm9yIHRoZSBnaXZlbiBmYWNhZGUgYW5kIHN0\nb3JlLg0KICAgICAqDQogICAgICogQHBhcmFtIGZhY2FkZVR5cGUgdGhlIGZh\nY2FkZSBpbnRlcmZhY2UNCiAgICAgKiBAcGFyYW0gc3RvcmVUeXBlIHRoZSBz\ndG9yZSdzIA0KICAgICAqIHtAbGluayBvcmcuYXBhY2hlLm9wZW5qcGEua2Vy\nbmVsLlN0b3JlTWFuYWdlcn0gdHlwZSwgb3IgbnVsbCBmb3IgZ2VuZXJpYw0K\nICAgICAqIEBwYXJhbSBpbXBsVHlwZSB0aGUgcmVnaXN0ZXJlZCBpbXBsZW1l\nbnRvcg0KICAgICAqLw0KICAgIHB1YmxpYyBDbGFzcyBnZXRJbXBsZW1lbnRh\ndGlvbihDbGFzcyBmYWNhZGVUeXBlLCBDbGFzcyBzdG9yZVR5cGUpIHsNCiAg\nICAgICAgLy8gdHJhdmVyc2Ugc3RvcmUgdHlwZSBoaWVyYXJjaHkgdG8gc3Rv\ncmUgbWFuYWdlciB0byBmaW5kIG1vc3Qgc3BlY2lmaWMNCiAgICAgICAgLy8g\nc3RvcmUgYXZhaWFsYmxlDQogICAgICAgIENsYXNzIGltcGw7DQogICAgICAg\nIGZvciAoOyBzdG9yZVR5cGUgIT0gbnVsbCAmJiBzdG9yZVR5cGUgIT0gU3Rv\ncmVNYW5hZ2VyLmNsYXNzOyANCiAgICAgICAgICAgIHN0b3JlVHlwZSA9IHN0\nb3JlVHlwZS5nZXRTdXBlcmNsYXNzKCkpIHsNCiAgICAgICAgICAgIGltcGwg\nPSAoQ2xhc3MpIF9pbXBscy5nZXQobmV3IEtleShmYWNhZGVUeXBlLCBzdG9y\nZVR5cGUpKTsNCiAgICAgICAgICAgIGlmIChpbXBsICE9IG51bGwpDQogICAg\nICAgICAgICAgICAgcmV0dXJuIGltcGw7IA0KICAgICAgICB9ICAgIA0KICAg\nICAgICByZXR1cm4gKENsYXNzKSBfaW1wbHMuZ2V0KGZhY2FkZVR5cGUpOw0K\nICAgIH0NCiAgICANCiAgICAvKioNCiAgICAgKiBSZXR1cm4gdGhlIGltcGxl\nbWVudGF0aW9uIGZvciB0aGUgZ2l2ZW4gZmFjYWRlIGFuZCBzdG9yZS4gSWYg\nbm8gDQogICAgICogcmVnaXN0ZXJlZCBpbXBsZW1lbnRhdGlvbiBpcyBmb3Vu\nZCB0aGVuIHJldHVybnMgdGhlIGdpdmVuIGRlZmF1bHQgdHlwZQ0KICAgICAq\nIHByb3ZpZGVkIGl0IHRoZSBmYWNhZGUgdHlwZSBpcyBhc3NpZ25hYmxlIGZy\nb20gdGhlIGRlYWZ1bHQgdHlwZS4NCiAgICAgKg0KICAgICAqIEBwYXJhbSBm\nYWNhZGVUeXBlIHRoZSBmYWNhZGUgaW50ZXJmYWNlDQogICAgICogQHBhcmFt\nIHN0b3JlVHlwZSB0aGUgc3RvcmUncyANCiAgICAgKiB7QGxpbmsgb3JnLmFw\nYWNoZS5vcGVuanBhLmtlcm5lbC5TdG9yZU1hbmFnZXJ9IHR5cGUsIG9yIG51\nbGwgZm9yIGdlbmVyaWMNCiAgICAgKiBAcGFyYW0gaW1wbFR5cGUgdGhlIHJl\nZ2lzdGVyZWQgaW1wbGVtZW50b3INCiAgICAgKiBAcGFyYW0gZGVmYXVsdFR5\ncGUgY2xhc3MgaWYgbm8gcmVnaXN0ZXJlZCBpbXBsZW1lbnRhdGlvbiBpcyBh\ndmFpbGFibGUuDQogICAgICovDQogICAgcHVibGljIENsYXNzIGdldEltcGxl\nbWVudGF0aW9uKENsYXNzIGZhY2FkZVR5cGUsIENsYXNzIHN0b3JlVHlwZSwg\nDQogICAgCUNsYXNzIGRlZmF1bHRUeXBlKSB7DQogICAgCUNsYXNzIHJlc3Vs\ndCA9IGdldEltcGxlbWVudGF0aW9uKGZhY2FkZVR5cGUsIHN0b3JlVHlwZSk7\nDQogICAgCWlmIChyZXN1bHQgPT0gbnVsbCkNCiAgICAJCXJlc3VsdCA9IGRl\nZmF1bHRUeXBlOw0KICAgIAlpZiAoZmFjYWRlVHlwZSA9PSBudWxsIHx8ICFm\nYWNhZGVUeXBlLmlzQXNzaWduYWJsZUZyb20ocmVzdWx0KSkNCiAgICAJCXRo\ncm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOw0KICAgIAlyZXR1cm4gcmVz\ndWx0Ow0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIExvb2t1cCBrZXkgZm9y\nIGZhY2FkZStzdG9yZSBoYXNoLg0KICAgICAqLw0KICAgIHByaXZhdGUgc3Rh\ndGljIGNsYXNzIEtleSB7DQogICAgICAgIHB1YmxpYyBmaW5hbCBDbGFzcyBf\nZmFjYWRlVHlwZTsNCiAgICAgICAgcHVibGljIGZpbmFsIENsYXNzIF9zdG9y\nZVR5cGU7DQoNCiAgICAgICAgcHVibGljIEtleShDbGFzcyBmYWNhZGVUeXBl\nLCBDbGFzcyBzdG9yZVR5cGUpIHsNCiAgICAgICAgICAgIF9mYWNhZGVUeXBl\nID0gZmFjYWRlVHlwZTsNCiAgICAgICAgICAgIF9zdG9yZVR5cGUgPSBzdG9y\nZVR5cGU7DQogICAgICAgIH0NCg0KICAgICAgICBwdWJsaWMgaW50IGhhc2hD\nb2RlKCkgew0KICAgICAgICAgICAgcmV0dXJuIF9mYWNhZGVUeXBlLmhhc2hD\nb2RlKCkgXiBfc3RvcmVUeXBlLmhhc2hDb2RlKCk7DQogICAgICAgIH0NCg0K\nICAgICAgICBwdWJsaWMgYm9vbGVhbiBlcXVhbHMoT2JqZWN0IG90aGVyKSB7\nDQogICAgICAgICAgICBpZiAob3RoZXIgPT0gdGhpcykNCiAgICAgICAgICAg\nICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIEtleSBrID0gKEtleSkg\nb3RoZXI7DQogICAgICAgICAgICByZXR1cm4gX2ZhY2FkZVR5cGUgPT0gay5f\nZmFjYWRlVHlwZSAmJiBfc3RvcmVUeXBlID09IGsuX3N0b3JlVHlwZTsNCiAg\nICAgICAgfQ0KICAgIH0NCn0NCg==\n","encoding":"base64"}

