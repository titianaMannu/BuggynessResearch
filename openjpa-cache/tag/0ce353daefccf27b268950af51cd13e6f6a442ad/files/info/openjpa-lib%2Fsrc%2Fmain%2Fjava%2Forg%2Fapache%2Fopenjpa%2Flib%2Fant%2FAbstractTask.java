{"sha":"a383c750ac190beb445fe27fc8ec6e4701800e35","node_id":"MDQ6QmxvYjIwNjM2NDphMzgzYzc1MGFjMTkwYmViNDQ1ZmUyN2ZjOGVjNmU0NzAxODAwZTM1","size":5918,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/a383c750ac190beb445fe27fc8ec6e4701800e35","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIuYW50OwoKaW1wb3J0IGphdmEuaW8uRmlsZTsKaW1wb3J0\nIGphdmEudXRpbC5BcnJheUxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuSXRlcmF0\nb3I7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKCmltcG9ydCBvcmcuYXBhY2hl\nLnRvb2xzLmFudC5BbnRDbGFzc0xvYWRlcjsKaW1wb3J0IG9yZy5hcGFjaGUu\ndG9vbHMuYW50LkJ1aWxkRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS50\nb29scy5hbnQuRGlyZWN0b3J5U2Nhbm5lcjsKaW1wb3J0IG9yZy5hcGFjaGUu\ndG9vbHMuYW50LnRhc2tkZWZzLk1hdGNoaW5nVGFzazsKaW1wb3J0IG9yZy5h\ncGFjaGUudG9vbHMuYW50LnR5cGVzLkZpbGVTZXQ7CmltcG9ydCBvcmcuYXBh\nY2hlLnRvb2xzLmFudC50eXBlcy5QYXRoOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmxpYi5jb25mLkNvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEubGliLmNvbmYuQ29uZmlndXJhdGlvbkltcGw7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmNvbmYuQ29uZmlndXJhdGlvblBy\nb3ZpZGVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5jb25mLlBy\nb2R1Y3REZXJpdmF0aW9uczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5s\naWIudXRpbC5Mb2NhbGl6ZXI7CgovKioKICogQW50IHRhc2tzIGFsbCBoYXZl\nIGEgbmVzdGVkIDxjb2RlPiZsdDtjb25maWcmcnQ7PC9jb2RlPiB0YWcsIHdo\naWNoIHVzZXMKICogdGhlIGNvbmZpZ3VyYXRpb24gYXMgYSBiZWFuLWxpa2Ug\ndGFzay4gRS5nLiwgeW91IGNhbiBkbzoKICogCiAqIDxjb2RlPiAKICogJmx0\nO215dGFzayZydDs8YnIgLz4KICogJm5ic3A7Jm5ic3A7Jmx0O2NvbmZpZyBj\nb25uZWN0aW9uVXNlck5hbWU9ImZvbyIvJnJ0OzxiciAvPiAKICogJmx0Oy9t\neXRhc2smcnQ7CiAqIDwvY29kZT4gCiAqCiAqIFRoZSBkZWZhdWx0IGNvbmZp\nZ3VyYXRpb24gZm9yIHRoZSBzeXN0ZW0gd2lsbCBiZSB1c2VkIGlmIHRoZQog\nKiA8Y29kZT4mbHQ7Y29uZmlnJnJ0OzwvY29kZT4gc3VidGFzayBpcyBleGNs\ndWRlZC4KICoKICogQG5vamF2YWRvYwogKi8KcHVibGljIGFic3RyYWN0IGNs\nYXNzIEFic3RyYWN0VGFzayBleHRlbmRzIE1hdGNoaW5nVGFzayB7CgogICAg\ncHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6\nZXIuZm9yUGFja2FnZQogICAgICAgIChBYnN0cmFjdFRhc2suY2xhc3MpOwoK\nICAgIHByb3RlY3RlZCBmaW5hbCBMaXN0IGZpbGVTZXRzID0gbmV3IEFycmF5\nTGlzdCgpOwogICAgcHJvdGVjdGVkIGJvb2xlYW4gaGFsdE9uRXJyb3IgPSB0\ncnVlOwogICAgcHJvdGVjdGVkIFBhdGggY2xhc3NwYXRoID0gbnVsbDsKICAg\nIHByb3RlY3RlZCBib29sZWFuIHVzZVBhcmVudCA9IGZhbHNlOwogICAgcHJv\ndGVjdGVkIGJvb2xlYW4gaXNvbGF0ZSA9IGZhbHNlOwoKICAgIHByaXZhdGUg\nQ29uZmlndXJhdGlvbkltcGwgX2NvbmYgPSBudWxsOwogICAgcHJpdmF0ZSBB\nbnRDbGFzc0xvYWRlciBfY2wgPSBudWxsOwoKICAgIC8qKgogICAgICogU2V0\nIHdoZXRoZXIgd2Ugd2FudCB0aGUgdGFzayB0byBpZ25vcmUgYWxsIGVycm9y\ncy4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0SGFsdE9uRXJyb3IoYm9v\nbGVhbiBoYWx0T25FcnJvcikgewogICAgICAgIHRoaXMuaGFsdE9uRXJyb3Ig\nPSBoYWx0T25FcnJvcjsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIg\nd2Ugd2FudCB0aGUgQ2xhc3NMb2FkZXIgdG8gYmUgaXNvbGF0ZWQgZnJvbQog\nICAgICogYWxsIG90aGVyIENsYXNzTG9hZGVycwogICAgICovCiAgICBwdWJs\naWMgdm9pZCBzZXRJc29sYXRlKGJvb2xlYW4gaXNvbGF0ZSkgewogICAgICAg\nIHRoaXMuaXNvbGF0ZSA9IGlzb2xhdGU7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBXaGV0aGVyIHdlIHdhbnQgdG8gZGVsZWdhdGUgdG8gdGhlIHBhcmVudCBD\nbGFzc0xvYWRlcgogICAgICogZm9yIHJlc29sdmVpbmcgY2xhc3Nlcy4gVGhp\ncyBtYXkgInRhaW50IiBjbGFzc2VzLgogICAgICovCiAgICBwdWJsaWMgdm9p\nZCBzZXRVc2VQYXJlbnRDbGFzc2xvYWRlcihib29sZWFuIHVzZVBhcmVudCkg\newogICAgICAgIHRoaXMudXNlUGFyZW50ID0gdXNlUGFyZW50OwogICAgfQoK\nICAgIC8qKgogICAgICogVGhlIHRhc2sgY29uZmlndXJhdGlvbi4KICAgICAq\nLwogICAgcHVibGljIENvbmZpZ3VyYXRpb24gZ2V0Q29uZmlndXJhdGlvbigp\nIHsKICAgICAgICBpZiAoX2NvbmYgPT0gbnVsbCkKICAgICAgICAgICAgX2Nv\nbmYgPSBuZXdDb25maWd1cmF0aW9uKCk7CiAgICAgICAgcmV0dXJuIF9jb25m\nOwogICAgfQoKICAgIC8qKgogICAgICogSW1wbGVtZW50IHRoaXMgbWV0aG9k\nIHRvIHJldHVybiBhIGNvbmZpZ3VyYXRpb24gb2JqZWN0IGZvciB0aGUKICAg\nICAqIHByb2R1Y3QgaW4gdXNlLgogICAgICovCiAgICBwcm90ZWN0ZWQgYWJz\ndHJhY3QgQ29uZmlndXJhdGlvbkltcGwgbmV3Q29uZmlndXJhdGlvbigpOwoK\nICAgIC8qKgogICAgICogUGVyZm9ybSB0aGUgdGFzayBhY3Rpb24gb24gdGhl\nIGdpdmVuIGZpbGVzLgogICAgICovCiAgICBwcm90ZWN0ZWQgYWJzdHJhY3Qg\ndm9pZCBleGVjdXRlT24oU3RyaW5nW10gZmlsZXMpIHRocm93cyBFeGNlcHRp\nb247CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGNsYXNzbG9hZGVyIHRv\nIHVzZS4KICAgICAqLwogICAgcHJvdGVjdGVkIENsYXNzTG9hZGVyIGdldENs\nYXNzTG9hZGVyKCkgewogICAgICAgIGlmIChfY2wgIT0gbnVsbCkKICAgICAg\nICAgICAgcmV0dXJuIF9jbDsKCiAgICAgICAgaWYgKGNsYXNzcGF0aCAhPSBu\ndWxsKQogICAgICAgICAgICBfY2wgPSBuZXcgQW50Q2xhc3NMb2FkZXIocHJv\namVjdCwgY2xhc3NwYXRoLCB1c2VQYXJlbnQpOwogICAgICAgIGVsc2UKICAg\nICAgICAgICAgX2NsID0gbmV3IEFudENsYXNzTG9hZGVyKHByb2plY3QuZ2V0\nQ29yZUxvYWRlcigpLCBwcm9qZWN0LAogICAgICAgICAgICAgICAgbmV3IFBh\ndGgocHJvamVjdCksIHVzZVBhcmVudCk7CiAgICAgICAgX2NsLnNldElzb2xh\ndGVkKGlzb2xhdGUpOwoKICAgICAgICByZXR1cm4gX2NsOwogICAgfQoKICAg\nIC8qKgogICAgICogSGVscGVyIG1ldGhvZCB0byB0aHJvdyBhIHN0YW5kYXJk\nIGV4Y2VwdGlvbiBpZiB0aGUgdGFzayBpcyBub3QgZ2l2ZW4KICAgICAqIGFu\neSBmaWxlcyB0byBleGVjdXRlIG9uLiBJbXBsZW1lbnRhdGlvbnMgbWlnaHQg\nY2FsbCB0aGlzIG1ldGhvZCBhcwogICAgICogdGhlIGZpcnN0IHN0ZXAgaW4g\ne0BsaW5rICNleGVjdXRlT259IHRvIHZhbGlkYXRlIHRoYXQgdGhleSBhcmUg\nZ2l2ZW4KICAgICAqIGZpbGVzIHRvIHdvcmsgb24uCiAgICAgKi8KICAgIHBy\nb3RlY3RlZCB2b2lkIGFzc2VydEZpbGVzKFN0cmluZ1tdIGZpbGVzKSB7CiAg\nICAgICAgaWYgKGZpbGVzLmxlbmd0aCA9PSAwKQogICAgICAgICAgICB0aHJv\ndyBuZXcgQnVpbGRFeGNlcHRpb24oX2xvYy5nZXQoIm5vLWZpbGVzZXRzIiku\nZ2V0TWVzc2FnZSgpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRDbGFz\nc3BhdGgoUGF0aCBjbGFzc1BhdGgpIHsKICAgICAgICBjcmVhdGVDbGFzc3Bh\ndGgoKS5hcHBlbmQoY2xhc3NQYXRoKTsKICAgIH0KCiAgICBwdWJsaWMgUGF0\naCBjcmVhdGVDbGFzc3BhdGgoKSB7CiAgICAgICAgaWYgKGNsYXNzcGF0aCA9\nPSBudWxsKQogICAgICAgICAgICBjbGFzc3BhdGggPSBuZXcgUGF0aChwcm9q\nZWN0KTsKICAgICAgICByZXR1cm4gY2xhc3NwYXRoLmNyZWF0ZVBhdGgoKTsK\nICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IGNyZWF0ZUNvbmZpZygpIHsKICAg\nICAgICByZXR1cm4gZ2V0Q29uZmlndXJhdGlvbigpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIGFkZEZpbGVzZXQoRmlsZVNldCBzZXQpIHsKICAgICAgICBm\naWxlU2V0cy5hZGQoc2V0KTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBleGVj\ndXRlKCkgdGhyb3dzIEJ1aWxkRXhjZXB0aW9uIHsKICAgICAgICAvLyBpZiB0\naGUgdXNlciBkaWRuJ3Qgc3VwcGx5IGEgY29uZiBmaWxlLCBsb2FkIHRoZSBk\nZWZhdWx0CiAgICAgICAgaWYgKF9jb25mID09IG51bGwpCiAgICAgICAgICAg\nIF9jb25mID0gbmV3Q29uZmlndXJhdGlvbigpOwogICAgICAgIGlmIChfY29u\nZi5nZXRQcm9wZXJ0aWVzUmVzb3VyY2UoKSA9PSBudWxsKSB7CiAgICAgICAg\nICAgIENvbmZpZ3VyYXRpb25Qcm92aWRlciBjcCA9IFByb2R1Y3REZXJpdmF0\naW9ucy5sb2FkRGVmYXVsdHMKICAgICAgICAgICAgICAgIChfY29uZi5nZXRD\nbGFzcygpLmdldENsYXNzTG9hZGVyKCkpOwogICAgICAgICAgICBpZiAoY3Ag\nIT0gbnVsbCkKICAgICAgICAgICAgICAgIGNwLnNldEludG8oX2NvbmYpOwog\nICAgICAgIH0KCiAgICAgICAgU3RyaW5nW10gZmlsZXMgPSBnZXRGaWxlcygp\nOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGV4ZWN1dGVPbihmaWxlcyk7\nCiAgICAgICAgfSBjYXRjaCAoVGhyb3dhYmxlIGUpIHsKICAgICAgICAgICAg\nZS5wcmludFN0YWNrVHJhY2UoKTsKICAgICAgICAgICAgaWYgKGhhbHRPbkVy\ncm9yKQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEJ1aWxkRXhjZXB0aW9u\nKGUpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIF9jb25mLmNs\nb3NlKCk7CiAgICAgICAgICAgIF9jb25mID0gbnVsbDsKICAgICAgICB9CiAg\nICB9CgogICAgcHJpdmF0ZSBTdHJpbmdbXSBnZXRGaWxlcygpIHsKICAgICAg\nICBMaXN0IGZpbGVzID0gbmV3IEFycmF5TGlzdCgpOwogICAgICAgIGZvciAo\nSXRlcmF0b3IgaSA9IGZpbGVTZXRzLml0ZXJhdG9yKCk7IGkuaGFzTmV4dCgp\nOykgewogICAgICAgICAgICBGaWxlU2V0IGZzID0gKEZpbGVTZXQpIGkubmV4\ndCgpOwogICAgICAgICAgICBEaXJlY3RvcnlTY2FubmVyIGRzID0gZnMuZ2V0\nRGlyZWN0b3J5U2Nhbm5lcihwcm9qZWN0KTsKCiAgICAgICAgICAgIFN0cmlu\nZ1tdIGRzRmlsZXMgPSBkcy5nZXRJbmNsdWRlZEZpbGVzKCk7CiAgICAgICAg\nICAgIGZvciAoaW50IGogPSAwOyBqIDwgZHNGaWxlcy5sZW5ndGg7IGorKykg\newogICAgICAgICAgICAgICAgRmlsZSBmID0gbmV3IEZpbGUoZHNGaWxlc1tq\nXSk7CiAgICAgICAgICAgICAgICBpZiAoIWYuaXNGaWxlKCkpCiAgICAgICAg\nICAgICAgICAgICAgZiA9IG5ldyBGaWxlKGRzLmdldEJhc2VkaXIoKSwgZHNG\naWxlc1tqXSk7CiAgICAgICAgICAgICAgICBmaWxlcy5hZGQoZi5nZXRBYnNv\nbHV0ZVBhdGgoKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAg\ncmV0dXJuIChTdHJpbmdbXSkgZmlsZXMudG9BcnJheShuZXcgU3RyaW5nW2Zp\nbGVzLnNpemUoKV0pOwogICAgfQp9Cgo=\n","encoding":"base64"}

