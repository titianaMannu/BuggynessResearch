{"sha":"72edf7fc7407e4006d4281e9e164a04f7f561b21","node_id":"MDQ6QmxvYjIwNjM2NDo3MmVkZjdmYzc0MDdlNDAwNmQ0MjgxZTllMTY0YTA0ZjdmNTYxYjIx","size":32927,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/72edf7fc7407e4006d4281e9e164a04f7f561b21","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIuY29uZjsKCmltcG9ydCBqYXZhLmF3dC5JbWFnZTsKaW1w\nb3J0IGphdmEuYmVhbnMuQmVhbkRlc2NyaXB0b3I7CmltcG9ydCBqYXZhLmJl\nYW5zLkJlYW5JbmZvOwppbXBvcnQgamF2YS5iZWFucy5FdmVudFNldERlc2Ny\naXB0b3I7CmltcG9ydCBqYXZhLmJlYW5zLkludHJvc3BlY3Rpb25FeGNlcHRp\nb247CmltcG9ydCBqYXZhLmJlYW5zLkludHJvc3BlY3RvcjsKaW1wb3J0IGph\ndmEuYmVhbnMuTWV0aG9kRGVzY3JpcHRvcjsKaW1wb3J0IGphdmEuYmVhbnMu\nUHJvcGVydHlDaGFuZ2VMaXN0ZW5lcjsKaW1wb3J0IGphdmEuYmVhbnMuUHJv\ncGVydHlDaGFuZ2VTdXBwb3J0OwppbXBvcnQgamF2YS5iZWFucy5Qcm9wZXJ0\neURlc2NyaXB0b3I7CmltcG9ydCBqYXZhLmlvLkV4dGVybmFsaXphYmxlOwpp\nbXBvcnQgamF2YS5pby5GaWxlOwppbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlv\nbjsKaW1wb3J0IGphdmEuaW8uT2JqZWN0SW5wdXQ7CmltcG9ydCBqYXZhLmlv\nLk9iamVjdE91dHB1dDsKaW1wb3J0IGphdmEuaW8uUHJpbnRXcml0ZXI7Cmlt\ncG9ydCBqYXZhLmlvLlNlcmlhbGl6YWJsZTsKaW1wb3J0IGphdmEuaW8uU3Ry\naW5nV3JpdGVyOwppbXBvcnQgamF2YS5sYW5nLnJlZmxlY3QuQ29uc3RydWN0\nb3I7CmltcG9ydCBqYXZhLmxhbmcucmVmbGVjdC5JbnZvY2F0aW9uVGFyZ2V0\nRXhjZXB0aW9uOwppbXBvcnQgamF2YS5sYW5nLnJlZmxlY3QuTWV0aG9kOwpp\nbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsKaW1wb3J0IGphdmEudXRpbC5B\ncnJheXM7CmltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbjsKaW1wb3J0IGph\ndmEudXRpbC5Db2xsZWN0aW9uczsKaW1wb3J0IGphdmEudXRpbC5IYXNoTWFw\nOwppbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9yOwppbXBvcnQgamF2YS51dGls\nLkxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuTWFwOwppbXBvcnQgamF2YS51dGls\nLk1pc3NpbmdSZXNvdXJjZUV4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5Q\ncm9wZXJ0aWVzOwppbXBvcnQgamF2YS51dGlsLlRyZWVTZXQ7CgppbXBvcnQg\nb3JnLmFwYWNoZS5jb21tb25zLmxhbmcuU3RyaW5nVXRpbHM7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEubGliLmxvZy5Mb2c7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEubGliLmxvZy5Mb2dGYWN0b3J5OwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmxpYi5sb2cuTG9nRmFjdG9yeUltcGw7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEubGliLmxvZy5Ob25lTG9nRmFjdG9yeTsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5DbG9zZWFibGU7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLlBhcnNlRXhjZXB0\naW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLlNlcnZp\nY2VzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLlN0cmlu\nZ0Rpc3RhbmNlOwppbXBvcnQgc2VycC51dGlsLlN0cmluZ3M7CgovKioKICog\nRGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUge0BsaW5rIENvbmZpZ3Vy\nYXRpb259IGludGVyZmFjZS4KICogU3ViY2xhc3NlcyBjYW4gY2hvb3NlIHRv\nIG9idGFpbiBjb25maWd1cmF0aW9uCiAqIGluZm9ybWF0aW9uIGZyb20gSk5E\nSSwgUHJvcGVydGllcywgYSBCZWFuLWJ1aWxkZXIsIGV0Yy4gVGhpcyBjbGFz\ncwogKiBwcm92aWRlcyBiYXNlIGNvbmZpZ3VyYXRpb24gZnVuY3Rpb25hbGl0\neSwgaW5jbHVkaW5nIHNlcmlhbGl6YXRpb24sCiAqIHRoZSA8Y29kZT5lcXVh\nbHM8L2NvZGU+IGFuZCA8Y29kZT5oYXNoQ29kZTwvY29kZT4gY29udHJhY3Rz\nLCBhbmQgZGVmYXVsdAogKiBwcm9wZXJ0eSBsb2FkaW5nLgogKiBQcm9wZXJ0\neSBkZXNjcmlwdG9ycyBmb3Ige0BsaW5rIFZhbHVlfSBpbnN0YW5jZXMgYXJl\nIGNvbnN0cnVjdGVkIGZyb20KICogdGhlIHtAbGluayBMb2NhbGl6ZXJ9IGZv\nciB0aGUgcGFja2FnZSBvZiB0aGUgY29uZmlndXJhdGlvbiBjbGFzcy4gVGhl\nCiAqIGZvbGxvd2luZyBsb2NhbGl6ZWQgc3RyaW5ncyB3aWxsIGJlIHVzZWQg\nZm9yIGRlc2NyaWJpbmcgYSB2YWx1ZSwgd2hlcmUKICogPGVtPm5hbWU8L2Vt\nPiBpcyB0aGUgbGFzdCB0b2tlbiBvZiB0aGUgdmFsdWUncyBwcm9wZXJ0eSBz\ndHJpbmc6CiAqIDx1bD4KICogPGxpPjxlbT5uYW1lPC9lbT4tbmFtZTogVGhl\nIG5hbWUgdGhhdCB3aWxsIGJlIGRpc3BsYXllZCBmb3IgdGhlCiAqIG9wdGlv\nbiBpbiBhIHVzZXIgaW50ZXJmYWNlOyByZXF1aXJlZC48L2xpPgogKiA8bGk+\nPGVtPm5hbWU8L2VtPi1kZXNjOiBBIGJyaWVmIGRlc2NyaXB0aW9uIG9mIHRo\nZSBvcHRpb247IHJlcXVpcmVkLjwvbGk+CiAqIDxsaT48ZW0+bmFtZTwvZW0+\nLXR5cGU6IFRoZSB0eXBlIG9yIGNhdGVnb3J5IG5hbWUgZm9yIHRoaXMgb3B0\naW9uOwogKiByZXF1aXJlZC48L2xpPgogKiA8bGk+PGVtPm5hbWU8L2VtPi1l\neHBlcnQ6IFRydWUgaWYgdGhpcyBpcyBhbiBleHBlcnQgb3B0aW9uLCBmYWxz\nZQogKiBvdGhlcndpc2U7IGRlZmF1bHRzIHRvIGZhbHNlLjwvbGk+CiAqIDxs\naT48ZW0+bmFtZTwvZW0+LXZhbHVlczogU2V0IG9mIGV4cGVjdGVkIG9yIGNv\nbW1vbiB2YWx1ZXMsIGV4Y2x1ZGluZwogKiBhbGlhcyBrZXlzOyBvcHRpb25h\nbC48L2xpPgogKiA8bGk+PGVtPm5hbWU8L2VtPi1pbnRlcmZhY2U6IFRoZSBj\nbGFzcyBuYW1lIG9mIGFuIGludGVyZmFjZSB3aG9zZQogKiBkaXNjb3ZlcmFi\nbGUgaW1wbGVtZW50YXRpb25zIHNob3VsZCBiZSBpbmNsdWRlZCBpbiB0aGUg\nc2V0IG9mIGV4cGVjdGVkCiAqIG9yIGNvbW1vbiB2YWx1ZXM7IG9wdGlvbmFs\nLjwvbGk+CiAqIDxsaT48ZW0+bmFtZTwvZW0+LWNhdDogVGhlIGhpZXJhcmNo\naWNhbCBjYXRlZ29yeSBmb3IgdGhlIHByb3BlcnR5CiAqIG5hbWUsIHNlcGFy\nYXRlZCBieSAiLiIuCiAqIDxsaT48ZW0+bmFtZTwvZW0+LWRpc3BsYXlvcmRl\ncjogVGhlIG9yZGVyIGluIHdoaWNoIHRoZSBwcm9wZXJ0eSBzaG91bGQKICog\nYmUgZGlzcGxheWVyLjwvbGk+CiAqIDwvdWw+CiAqCiAqIEBhdXRob3IgQWJl\nIFdoaXRlCiAqLwpwdWJsaWMgY2xhc3MgQ29uZmlndXJhdGlvbkltcGwKICAg\nIGltcGxlbWVudHMgQ29uZmlndXJhdGlvbiwgRXh0ZXJuYWxpemFibGUsIFZh\nbHVlTGlzdGVuZXIgewoKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmlu\nZyBTRVAgPSBTeXN0ZW0uZ2V0UHJvcGVydHkoImxpbmUuc2VwYXJhdG9yIik7\nCgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9jYWxpemVyIF9sb2MgPSBM\nb2NhbGl6ZXIuZm9yUGFja2FnZQogICAgICAgIChDb25maWd1cmF0aW9uSW1w\nbC5jbGFzcyk7CgogICAgcHVibGljIE9iamVjdFZhbHVlIGxvZ0ZhY3RvcnlQ\nbHVnaW47CgogICAgcHJpdmF0ZSBTdHJpbmcgX3Byb2R1Y3QgPSBudWxsOwog\nICAgcHJpdmF0ZSBib29sZWFuIF9yZWFkT25seSA9IGZhbHNlOwogICAgcHJp\ndmF0ZSBNYXAgX3Byb3BzID0gbnVsbDsKICAgIHByaXZhdGUgYm9vbGVhbiBf\nZ2xvYmFscyA9IGZhbHNlOwogICAgcHJpdmF0ZSBTdHJpbmcgX2F1dG8gPSBu\ndWxsOwogICAgcHJpdmF0ZSBmaW5hbCBMaXN0IF92YWxzID0gbmV3IEFycmF5\nTGlzdCgpOwoKICAgIC8vIHByb3BlcnR5IGxpc3RlbmVyIGhlbHBlcgogICAg\ncHJpdmF0ZSBQcm9wZXJ0eUNoYW5nZVN1cHBvcnQgX2NoYW5nZVN1cHBvcnQg\nPSBudWxsOwoKICAgIC8vIGNhY2hlIGRlc2NyaXB0b3JzCiAgICBwcml2YXRl\nIFByb3BlcnR5RGVzY3JpcHRvcltdIF9wZHMgPSBudWxsOwogICAgcHJpdmF0\nZSBNZXRob2REZXNjcmlwdG9yW10gX21kcyA9IG51bGw7CgogICAgLyoqCiAg\nICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yLiBBdHRlbXB0cyB0byBsb2FkIGRl\nZmF1bHQgcHJvcGVydGllcyB0aHJvdWdoCiAgICAgKiBzeXN0ZW0ncyBjb25m\naWd1cmVkIHtAbGluayBQcm9kdWN0RGVyaXZhdGlvbn1zLgogICAgICovCiAg\nICBwdWJsaWMgQ29uZmlndXJhdGlvbkltcGwoKSB7CiAgICAgICAgdGhpcyh0\ncnVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yLgogICAg\nICoKICAgICAqIEBwYXJhbSBsb2FkR2xvYmFscyB3aGV0aGVyIHRvIGF0dGVt\ncHQgdG8gbG9hZCB0aGUgZ2xvYmFsIHByb3BlcnRpZXMKICAgICAqLwogICAg\ncHVibGljIENvbmZpZ3VyYXRpb25JbXBsKGJvb2xlYW4gbG9hZEdsb2JhbHMp\nIHsKICAgICAgICBzZXRQcm9kdWN0TmFtZSgib3BlbmpwYSIpOwoKICAgICAg\nICBsb2dGYWN0b3J5UGx1Z2luID0gYWRkUGx1Z2luKCJMb2ciLCB0cnVlKTsK\nICAgICAgICBTdHJpbmdbXSBhbGlhc2VzID0gbmV3IFN0cmluZ1tdewogICAg\nICAgICAgICAidHJ1ZSIsIExvZ0ZhY3RvcnlJbXBsLmNsYXNzLmdldE5hbWUo\nKSwKICAgICAgICAgICAgIm9wZW5qcGEiLCBMb2dGYWN0b3J5SW1wbC5jbGFz\ncy5nZXROYW1lKCksCiAgICAgICAgICAgICJjb21tb25zIiwgIm9yZy5hcGFj\naGUub3BlbmpwYS5saWIubG9nLkNvbW1vbnNMb2dGYWN0b3J5IiwKICAgICAg\nICAgICAgImxvZzRqIiwgIm9yZy5hcGFjaGUub3BlbmpwYS5saWIubG9nLkxv\nZzRKTG9nRmFjdG9yeSIsCiAgICAgICAgICAgICJub25lIiwgTm9uZUxvZ0Zh\nY3RvcnkuY2xhc3MuZ2V0TmFtZSgpLAogICAgICAgICAgICAiZmFsc2UiLCBO\nb25lTG9nRmFjdG9yeS5jbGFzcy5nZXROYW1lKCksCiAgICAgICAgfTsKICAg\nICAgICBsb2dGYWN0b3J5UGx1Z2luLnNldEFsaWFzZXMoYWxpYXNlcyk7CiAg\nICAgICAgbG9nRmFjdG9yeVBsdWdpbi5zZXREZWZhdWx0KGFsaWFzZXNbMF0p\nOwogICAgICAgIGxvZ0ZhY3RvcnlQbHVnaW4uc2V0U3RyaW5nKGFsaWFzZXNb\nMF0pOwogICAgICAgIGxvZ0ZhY3RvcnlQbHVnaW4uc2V0SW5zdGFudGlhdGlu\nZ0dldHRlcigiZ2V0TG9nRmFjdG9yeSIpOwoKICAgICAgICBpZiAobG9hZEds\nb2JhbHMpCiAgICAgICAgICAgIGxvYWRHbG9iYWxzKCk7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBBdXRvbWF0aWNhbGx5IGxvYWQgZ2xvYmFsIHZhbHVlcyBm\ncm9tIHRoZSBzeXN0ZW0ncwogICAgICoge0BsaW5rIFByb2R1Y3REZXJpdmF0\naW9ufXMsIGFuZCBmcm9tIFN5c3RlbSBwcm9wZXJ0aWVzLgogICAgICovCiAg\nICBwdWJsaWMgYm9vbGVhbiBsb2FkR2xvYmFscygpIHsKICAgICAgICBDb25m\naWd1cmF0aW9uUHJvdmlkZXIgcHJvdmlkZXIgPSBQcm9kdWN0RGVyaXZhdGlv\nbnMubG9hZEdsb2JhbHMKICAgICAgICAgICAgKGdldENsYXNzKCkuZ2V0Q2xh\nc3NMb2FkZXIoKSk7CiAgICAgICAgaWYgKHByb3ZpZGVyICE9IG51bGwpCiAg\nICAgICAgICAgIHByb3ZpZGVyLnNldEludG8odGhpcyk7CgogICAgICAgIC8v\nIGxldCBzeXN0ZW0gcHJvcGVydGllcyBvdmVycmlkZSBvdGhlciBnbG9iYWxz\nCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZnJvbVByb3BlcnRpZXMobmV3\nIEhhc2hNYXAoU3lzdGVtLmdldFByb3BlcnRpZXMoKSkpOwogICAgICAgIH0g\nY2F0Y2ggKFNlY3VyaXR5RXhjZXB0aW9uIHNlKSB7CiAgICAgICAgICAgIC8v\nIHNlY3VyaXR5IG1hbmFnZXIgbWlnaHQgZGlzYWxsb3cKICAgICAgICB9Cgog\nICAgICAgIF9nbG9iYWxzID0gdHJ1ZTsKICAgICAgICBpZiAocHJvdmlkZXIg\nPT0gbnVsbCkgewogICAgICAgICAgICBMb2cgbG9nID0gZ2V0Q29uZmlndXJh\ndGlvbkxvZygpOwogICAgICAgICAgICBpZiAobG9nLmlzVHJhY2VFbmFibGVk\nKCkpCiAgICAgICAgICAgICAgICBsb2cudHJhY2UoX2xvYy5nZXQoIm5vLWRl\nZmF1bHQtcHJvdmlkZXJzIikpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7\nCiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIHB1\nYmxpYyBTdHJpbmcgZ2V0UHJvZHVjdE5hbWUoKSB7CiAgICAgICAgcmV0dXJu\nIF9wcm9kdWN0OwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldFByb2R1Y3RO\nYW1lKFN0cmluZyBuYW1lKSB7CiAgICAgICAgX3Byb2R1Y3QgPSBuYW1lOwog\nICAgfQoKICAgIHB1YmxpYyBMb2dGYWN0b3J5IGdldExvZ0ZhY3RvcnkoKSB7\nCiAgICAgICAgaWYgKGxvZ0ZhY3RvcnlQbHVnaW4uZ2V0KCkgPT0gbnVsbCkK\nICAgICAgICAgICAgbG9nRmFjdG9yeVBsdWdpbi5pbnN0YW50aWF0ZShMb2dG\nYWN0b3J5LmNsYXNzLCB0aGlzKTsKICAgICAgICByZXR1cm4gKExvZ0ZhY3Rv\ncnkpIGxvZ0ZhY3RvcnlQbHVnaW4uZ2V0KCk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgc2V0TG9nRmFjdG9yeShMb2dGYWN0b3J5IGxvZ0ZhY3RvcnkpIHsK\nICAgICAgICBhc3NlcnROb3RSZWFkT25seSgpOwogICAgICAgIGxvZ0ZhY3Rv\ncnlQbHVnaW4uc2V0KGxvZ0ZhY3RvcnkpOwogICAgfQoKICAgIHB1YmxpYyBT\ndHJpbmcgZ2V0TG9nKCkgewogICAgICAgIHJldHVybiBsb2dGYWN0b3J5UGx1\nZ2luLmdldFN0cmluZygpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldExv\nZyhTdHJpbmcgbG9nKSB7CiAgICAgICAgYXNzZXJ0Tm90UmVhZE9ubHkoKTsK\nICAgICAgICBsb2dGYWN0b3J5UGx1Z2luLnNldFN0cmluZyhsb2cpOwogICAg\nfQoKICAgIHB1YmxpYyBMb2cgZ2V0TG9nKFN0cmluZyBjYXRlZ29yeSkgewog\nICAgICAgIHJldHVybiBnZXRMb2dGYWN0b3J5KCkuZ2V0TG9nKGNhdGVnb3J5\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGxvZ2dpbmcg\nY2hhbm5lbCA8Y29kZT5vcGVuanBhLlJ1bnRpbWU8L2NvZGU+IGJ5IGRlZmF1\nbHQuCiAgICAgKi8KICAgIHB1YmxpYyBMb2cgZ2V0Q29uZmlndXJhdGlvbkxv\nZygpIHsKICAgICAgICByZXR1cm4gZ2V0TG9nKCJvcGVuanBhLlJ1bnRpbWUi\nKTsKICAgIH0KCiAgICBwdWJsaWMgVmFsdWVbXSBnZXRWYWx1ZXMoKSB7CiAg\nICAgICAgcmV0dXJuIChWYWx1ZVtdKSBfdmFscy50b0FycmF5KG5ldyBWYWx1\nZVtfdmFscy5zaXplKCldKTsKICAgIH0KCiAgICBwdWJsaWMgVmFsdWUgZ2V0\nVmFsdWUoU3RyaW5nIHByb3BlcnR5KSB7CiAgICAgICAgaWYgKHByb3BlcnR5\nID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBudWxsOwoKICAgICAgICAv\nLyBzZWFyY2ggYmFja3dhcmRzIHNvIHRoYXQgY3VzdG9tIHZhbHVlcyBhZGRl\nZCBhZnRlciBjb25zdHJ1Y3Rpb24KICAgICAgICAvLyBhcmUgZm91bmQgcXVp\nY2tseSwgc2luY2UgdGhpcyB3aWxsIGJlIHRoZSBzdGQgd2F5IG9mIGFjY2Vz\nc2luZyB0aGVtCiAgICAgICAgVmFsdWUgdmFsOwogICAgICAgIGZvciAoaW50\nIGkgPSBfdmFscy5zaXplKCkgLSAxOyBpID49IDA7IGktLSkgewogICAgICAg\nICAgICB2YWwgPSAoVmFsdWUpIF92YWxzLmdldChpKTsKICAgICAgICAgICAg\naWYgKHZhbC5nZXRQcm9wZXJ0eSgpLmVxdWFscyhwcm9wZXJ0eSkpCiAgICAg\nICAgICAgICAgICByZXR1cm4gdmFsOwogICAgICAgIH0KICAgICAgICByZXR1\ncm4gbnVsbDsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRSZWFkT25seShi\nb29sZWFuIHJlYWRPbmx5KSB7CiAgICAgICAgX3JlYWRPbmx5ID0gcmVhZE9u\nbHk7CiAgICB9CgogICAgcHVibGljIHZvaWQgaW5zdGFudGlhdGVBbGwoKSB7\nCiAgICAgICAgU3RyaW5nV3JpdGVyIGVycnMgPSBudWxsOwogICAgICAgIFBy\naW50V3JpdGVyIHN0YWNrID0gbnVsbDsKICAgICAgICBWYWx1ZSB2YWw7CiAg\nICAgICAgU3RyaW5nIGdldHRlck5hbWU7CiAgICAgICAgTWV0aG9kIGdldHRl\ncjsKICAgICAgICBPYmplY3QgZ2V0dGVyVGFyZ2V0OwogICAgICAgIGZvciAo\naW50IGkgPSAwOyBpIDwgX3ZhbHMuc2l6ZSgpOyBpKyspIHsKICAgICAgICAg\nICAgdmFsID0gKFZhbHVlKSBfdmFscy5nZXQoaSk7CiAgICAgICAgICAgIGdl\ndHRlck5hbWUgPSB2YWwuZ2V0SW5zdGFudGlhdGluZ0dldHRlcigpOwogICAg\nICAgICAgICBpZiAoZ2V0dGVyTmFtZSA9PSBudWxsKQogICAgICAgICAgICAg\nICAgY29udGludWU7CgogICAgICAgICAgICBnZXR0ZXJUYXJnZXQgPSB0aGlz\nOwogICAgICAgICAgICBpZiAoZ2V0dGVyTmFtZS5zdGFydHNXaXRoKCJ0aGlz\nLiIpKSB7CiAgICAgICAgICAgICAgICBnZXR0ZXJOYW1lID0gZ2V0dGVyTmFt\nZS5zdWJzdHJpbmcoInRoaXMuIi5sZW5ndGgoKSk7CiAgICAgICAgICAgICAg\nICBnZXR0ZXJUYXJnZXQgPSB2YWw7CiAgICAgICAgICAgIH0KCiAgICAgICAg\nICAgIHRyeSB7CiAgICAgICAgICAgICAgICBnZXR0ZXIgPSBnZXR0ZXJUYXJn\nZXQuZ2V0Q2xhc3MoKS5nZXRNZXRob2QoZ2V0dGVyTmFtZSwKICAgICAgICAg\nICAgICAgICAgICAoQ2xhc3NbXSkgbnVsbCk7CiAgICAgICAgICAgICAgICBn\nZXR0ZXIuaW52b2tlKGdldHRlclRhcmdldCwgKE9iamVjdFtdKSBudWxsKTsK\nICAgICAgICAgICAgfSBjYXRjaCAoVGhyb3dhYmxlIHQpIHsKICAgICAgICAg\nICAgICAgIGlmICh0IGluc3RhbmNlb2YgSW52b2NhdGlvblRhcmdldEV4Y2Vw\ndGlvbikKICAgICAgICAgICAgICAgICAgICB0ID0gKChJbnZvY2F0aW9uVGFy\nZ2V0RXhjZXB0aW9uKSB0KS5nZXRUYXJnZXRFeGNlcHRpb24oKTsKICAgICAg\nICAgICAgICAgIGlmIChlcnJzID09IG51bGwpIHsKICAgICAgICAgICAgICAg\nICAgICBlcnJzID0gbmV3IFN0cmluZ1dyaXRlcigpOwogICAgICAgICAgICAg\nICAgICAgIHN0YWNrID0gbmV3IFByaW50V3JpdGVyKGVycnMpOwogICAgICAg\nICAgICAgICAgfSBlbHNlCiAgICAgICAgICAgICAgICAgICAgZXJycy53cml0\nZShTRVApOwogICAgICAgICAgICAgICAgdC5wcmludFN0YWNrVHJhY2Uoc3Rh\nY2spOwogICAgICAgICAgICAgICAgc3RhY2suZmx1c2goKTsKICAgICAgICAg\nICAgfQogICAgICAgIH0KICAgICAgICBpZiAoZXJycyAhPSBudWxsKQogICAg\nICAgICAgICB0aHJvdyBuZXcgUnVudGltZUV4Y2VwdGlvbihfbG9jLmdldCgi\nZ2V0LXByb3AtZXJycyIsCiAgICAgICAgICAgICAgICBlcnJzLnRvU3RyaW5n\nKCkpLmdldE1lc3NhZ2UoKSk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4g\naXNSZWFkT25seSgpIHsKICAgICAgICByZXR1cm4gX3JlYWRPbmx5OwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIGFkZFByb3BlcnR5Q2hhbmdlTGlzdGVuZXIo\nUHJvcGVydHlDaGFuZ2VMaXN0ZW5lciBsaXN0ZW5lcikgewogICAgICAgIGlm\nIChfY2hhbmdlU3VwcG9ydCA9PSBudWxsKQogICAgICAgICAgICBfY2hhbmdl\nU3VwcG9ydCA9IG5ldyBQcm9wZXJ0eUNoYW5nZVN1cHBvcnQodGhpcyk7CiAg\nICAgICAgX2NoYW5nZVN1cHBvcnQuYWRkUHJvcGVydHlDaGFuZ2VMaXN0ZW5l\ncihsaXN0ZW5lcik7CiAgICB9CgogICAgcHVibGljIHZvaWQgcmVtb3ZlUHJv\ncGVydHlDaGFuZ2VMaXN0ZW5lcihQcm9wZXJ0eUNoYW5nZUxpc3RlbmVyIGxp\nc3RlbmVyKSB7CiAgICAgICAgaWYgKF9jaGFuZ2VTdXBwb3J0ICE9IG51bGwp\nCiAgICAgICAgICAgIF9jaGFuZ2VTdXBwb3J0LnJlbW92ZVByb3BlcnR5Q2hh\nbmdlTGlzdGVuZXIobGlzdGVuZXIpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHZhbHVlQ2hhbmdlZChWYWx1ZSB2YWwpIHsKICAgICAgICBpZiAoX2NoYW5n\nZVN1cHBvcnQgPT0gbnVsbCAmJiBfcHJvcHMgPT0gbnVsbCkKICAgICAgICAg\nICAgcmV0dXJuOwoKICAgICAgICBTdHJpbmcgbmV3U3RyaW5nID0gdmFsLmdl\ndFN0cmluZygpOwogICAgICAgIGlmIChfY2hhbmdlU3VwcG9ydCAhPSBudWxs\nKQogICAgICAgICAgICBfY2hhbmdlU3VwcG9ydC5maXJlUHJvcGVydHlDaGFu\nZ2UodmFsLmdldFByb3BlcnR5KCksIG51bGwsCiAgICAgICAgICAgICAgICBu\nZXdTdHJpbmcpOwoKICAgICAgICAvLyBrZWVwIGNhY2hlZCBwcm9wcyB1cCB0\nbyBkYXRlCiAgICAgICAgaWYgKF9wcm9wcyAhPSBudWxsKSB7CiAgICAgICAg\nICAgIGlmIChuZXdTdHJpbmcgPT0gbnVsbCkKICAgICAgICAgICAgICAgIENv\nbmZpZ3VyYXRpb25zLnJlbW92ZVByb3BlcnR5KHZhbC5nZXRQcm9wZXJ0eSgp\nLCBfcHJvcHMpOwogICAgICAgICAgICBlbHNlIGlmIChDb25maWd1cmF0aW9u\ncy5jb250YWluc1Byb3BlcnR5KHZhbC5nZXRQcm9wZXJ0eSgpLCBfcHJvcHMp\nCiAgICAgICAgICAgICAgICB8fCB2YWwuZ2V0RGVmYXVsdCgpID09IG51bGwK\nICAgICAgICAgICAgICAgIHx8ICF2YWwuZ2V0RGVmYXVsdCgpLmVxdWFscyhu\nZXdTdHJpbmcpKQogICAgICAgICAgICAgICAgcHV0KF9wcm9wcywgdmFsLCBu\nZXdTdHJpbmcpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIENs\nb3NlcyBhbGwgY2xvc2VhYmxlIHZhbHVlcyBhbmQgcGx1Z2lucy4KICAgICAq\nLwogICAgcHVibGljIHZvaWQgY2xvc2UoKSB7CiAgICAgICAgT2JqZWN0VmFs\ndWUgdmFsOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX3ZhbHMuc2l6\nZSgpOyBpKyspIHsKICAgICAgICAgICAgaWYgKF92YWxzLmdldChpKSBpbnN0\nYW5jZW9mIENsb3NlYWJsZSkgewogICAgICAgICAgICAgICAgdHJ5IHsgKChD\nbG9zZWFibGUpIF92YWxzLmdldChpKSkuY2xvc2UoKTsgfQogICAgICAgICAg\nICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7fSAKICAgICAgICAgICAgICAg\nIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoIShf\ndmFscy5nZXQoaSkgaW5zdGFuY2VvZiBPYmplY3RWYWx1ZSkpCiAgICAgICAg\nICAgICAgICBjb250aW51ZTsKCiAgICAgICAgICAgIHZhbCA9IChPYmplY3RW\nYWx1ZSkgX3ZhbHMuZ2V0KGkpOwogICAgICAgICAgICBpZiAodmFsLmdldCgp\nIGluc3RhbmNlb2YgQ2xvc2VhYmxlKSB7CiAgICAgICAgICAgICAgICB0cnkg\newogICAgICAgICAgICAgICAgICAgICgoQ2xvc2VhYmxlKSB2YWwuZ2V0KCkp\nLmNsb3NlKCk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24g\nZSkgewogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAg\nfQogICAgfQoKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAg\nLy8gQmVhbkluZm8gaW1wbGVtZW50YXRpb24KICAgIC8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLwoKICAgIHB1YmxpYyBCZWFuSW5mb1tdIGdldEFkZGl0\naW9uYWxCZWFuSW5mbygpIHsKICAgICAgICByZXR1cm4gbmV3IEJlYW5JbmZv\nWzBdOwogICAgfQoKICAgIHB1YmxpYyBCZWFuRGVzY3JpcHRvciBnZXRCZWFu\nRGVzY3JpcHRvcigpIHsKICAgICAgICByZXR1cm4gbmV3IEJlYW5EZXNjcmlw\ndG9yKGdldENsYXNzKCkpOwogICAgfQoKICAgIHB1YmxpYyBpbnQgZ2V0RGVm\nYXVsdEV2ZW50SW5kZXgoKSB7CiAgICAgICAgcmV0dXJuIDA7CiAgICB9Cgog\nICAgcHVibGljIGludCBnZXREZWZhdWx0UHJvcGVydHlJbmRleCgpIHsKICAg\nICAgICByZXR1cm4gMDsKICAgIH0KCiAgICBwdWJsaWMgRXZlbnRTZXREZXNj\ncmlwdG9yW10gZ2V0RXZlbnRTZXREZXNjcmlwdG9ycygpIHsKICAgICAgICBy\nZXR1cm4gbmV3IEV2ZW50U2V0RGVzY3JpcHRvclswXTsKICAgIH0KCiAgICBw\ndWJsaWMgSW1hZ2UgZ2V0SWNvbihpbnQga2luZCkgewogICAgICAgIHJldHVy\nbiBudWxsOwogICAgfQoKICAgIHB1YmxpYyBzeW5jaHJvbml6ZWQgTWV0aG9k\nRGVzY3JpcHRvcltdIGdldE1ldGhvZERlc2NyaXB0b3JzKCkgewogICAgICAg\nIGlmIChfbWRzICE9IG51bGwpCiAgICAgICAgICAgIHJldHVybiBfbWRzOwoK\nICAgICAgICBQcm9wZXJ0eURlc2NyaXB0b3JbXSBwZHMgPSBnZXRQcm9wZXJ0\neURlc2NyaXB0b3JzKCk7CiAgICAgICAgTGlzdCBkZXNjcyA9IG5ldyBBcnJh\neUxpc3QoKTsgCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwZHMubGVu\nZ3RoOyBpKyspIHsKICAgICAgICAgICAgTWV0aG9kIHdyaXRlID0gcGRzW2ld\nLmdldFdyaXRlTWV0aG9kKCk7CiAgICAgICAgICAgIE1ldGhvZCByZWFkID0g\ncGRzW2ldLmdldFJlYWRNZXRob2QoKTsKICAgICAgICAgICAgaWYgKHJlYWQg\nIT0gbnVsbCAmJiB3cml0ZSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBk\nZXNjcy5hZGQobmV3IE1ldGhvZERlc2NyaXB0b3Iod3JpdGUpKTsKICAgICAg\nICAgICAgICAgIGRlc2NzLmFkZChuZXcgTWV0aG9kRGVzY3JpcHRvcihyZWFk\nKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgX21kcyA9IChN\nZXRob2REZXNjcmlwdG9yW10pZGVzY3MuCiAgICAgICAgICAgIHRvQXJyYXko\nbmV3IE1ldGhvZERlc2NyaXB0b3JbZGVzY3Muc2l6ZSgpXSk7CiAgICAgICAg\ncmV0dXJuIF9tZHM7CiAgICB9CgogICAgcHVibGljIHN5bmNocm9uaXplZCBQ\ncm9wZXJ0eURlc2NyaXB0b3JbXSBnZXRQcm9wZXJ0eURlc2NyaXB0b3JzKCkg\newogICAgICAgIGlmIChfcGRzICE9IG51bGwpCiAgICAgICAgICAgIHJldHVy\nbiBfcGRzOwoKICAgICAgICBfcGRzID0gbmV3IFByb3BlcnR5RGVzY3JpcHRv\ncltfdmFscy5zaXplKCldOwogICAgICAgIExpc3QgZmFpbHVyZXMgPSBudWxs\nOwogICAgICAgIFZhbHVlIHZhbDsKICAgICAgICBmb3IgKGludCBpID0gMDsg\naSA8IF92YWxzLnNpemUoKTsgaSsrKSB7CiAgICAgICAgICAgIHZhbCA9IChW\nYWx1ZSkgX3ZhbHMuZ2V0KGkpOwogICAgICAgICAgICB0cnkgewogICAgICAg\nICAgICAgICAgX3Bkc1tpXSA9IGdldFByb3BlcnR5RGVzY3JpcHRvcih2YWwp\nOwogICAgICAgICAgICB9IGNhdGNoIChNaXNzaW5nUmVzb3VyY2VFeGNlcHRp\nb24gbXJlKSB7Cm1yZS5wcmludFN0YWNrVHJhY2UoKTsKICAgICAgICAgICAg\nICAgIGlmIChmYWlsdXJlcyA9PSBudWxsKQogICAgICAgICAgICAgICAgICAg\nIGZhaWx1cmVzID0gbmV3IEFycmF5TGlzdCgpOwogICAgICAgICAgICAgICAg\nZmFpbHVyZXMuYWRkKHZhbC5nZXRQcm9wZXJ0eSgpKTsKICAgICAgICAgICAg\nfSBjYXRjaCAoSW50cm9zcGVjdGlvbkV4Y2VwdGlvbiBpZSkgewppZS5wcmlu\ndFN0YWNrVHJhY2UoKTsKICAgICAgICAgICAgICAgIGlmIChmYWlsdXJlcyA9\nPSBudWxsKQogICAgICAgICAgICAgICAgICAgIGZhaWx1cmVzID0gbmV3IEFy\ncmF5TGlzdCgpOwogICAgICAgICAgICAgICAgZmFpbHVyZXMuYWRkKHZhbC5n\nZXRQcm9wZXJ0eSgpKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAg\nICBpZiAoZmFpbHVyZXMgIT0gbnVsbCkKICAgICAgICAgICAgdGhyb3cgbmV3\nIFBhcnNlRXhjZXB0aW9uKF9sb2MuZ2V0KCJpbnZhbGlkLXByb3BlcnR5LWRl\nc2NyaXB0b3JzIiwKICAgICAgICAgICAgICAgIGZhaWx1cmVzKSk7CgogICAg\nICAgIHJldHVybiBfcGRzOwogICAgfQoKICAgIC8qKgogICAgICogQ3JlYXRl\nIGEgcHJvcGVydHkgZGVzY3JpcHRvciBmb3IgdGhlIGdpdmVuIHZhbHVlLgog\nICAgICovCiAgICBwcml2YXRlIFByb3BlcnR5RGVzY3JpcHRvciBnZXRQcm9w\nZXJ0eURlc2NyaXB0b3IoVmFsdWUgdmFsKQogICAgICAgIHRocm93cyBJbnRy\nb3NwZWN0aW9uRXhjZXB0aW9uIHsKICAgICAgICBTdHJpbmcgcHJvcCA9IHZh\nbC5nZXRQcm9wZXJ0eSgpOwogICAgICAgIHByb3AgPSBwcm9wLnN1YnN0cmlu\nZyhwcm9wLmxhc3RJbmRleE9mKCcuJykgKyAxKTsKCiAgICAgICAgLy8gc2V0\nIHVwIHByb3BlcnR5IGRlc2NyaXB0b3IKICAgICAgICBQcm9wZXJ0eURlc2Ny\naXB0b3IgcGQ7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcGQgPSBuZXcg\nUHJvcGVydHlEZXNjcmlwdG9yKEludHJvc3BlY3Rvci5kZWNhcGl0YWxpemUo\ncHJvcCksIAogICAgICAgICAgICAgICAgZ2V0Q2xhc3MoKSk7CiAgICAgICAg\nfSBjYXRjaCAoSW50cm9zcGVjdGlvbkV4Y2VwdGlvbiBpZSkgewogICAgICAg\nICAgICAvLyBpZiB0aGVyZSBhcmVuJ3QgYW55IG1ldGhvZHMgZm9yIHRoaXMg\ndmFsdWUoaS5lLiwgaWYgaXQncyBhCiAgICAgICAgICAgIC8vIGR5bmFtaWNh\nbGx5LWFkZGVkIHZhbHVlKSwgdGhlbiBhbiBJbnRyb3NwZWN0aW9uRXhjZXB0\naW9uIHdpbGwKICAgICAgICAgICAgLy8gYmUgdGhyb3duLiBUcnkgdG8gY3Jl\nYXRlIGEgUEQgd2l0aCBubyByZWFkIG9yIHdyaXRlIG1ldGhvZHMuCiAgICAg\nICAgICAgIHBkID0gbmV3IFByb3BlcnR5RGVzY3JpcHRvcihJbnRyb3NwZWN0\nb3IuZGVjYXBpdGFsaXplKHByb3ApLAogICAgICAgICAgICAgICAgKE1ldGhv\nZCkgbnVsbCwgKE1ldGhvZCkgbnVsbCk7CiAgICAgICAgfQogICAgICAgIHBk\nLnNldERpc3BsYXlOYW1lKGZpbmRMb2NhbGl6ZWQocHJvcCArICItbmFtZSIs\nIHRydWUsIHZhbC5nZXRTY29wZSgpKSk7CiAgICAgICAgcGQuc2V0U2hvcnRE\nZXNjcmlwdGlvbihmaW5kTG9jYWxpemVkKHByb3AgKyAiLWRlc2MiLCB0cnVl\nLAogICAgICAgICAgICB2YWwuZ2V0U2NvcGUoKSkpOwogICAgICAgIHBkLnNl\ndEV4cGVydCgidHJ1ZSIuZXF1YWxzKGZpbmRMb2NhbGl6ZWQocHJvcCArICIt\nZXhwZXJ0IiwgZmFsc2UsCiAgICAgICAgICAgIHZhbC5nZXRTY29wZSgpKSkp\nOwoKICAgICAgICB0cnkgewogICAgICAgICAgICBwZC5zZXRSZWFkTWV0aG9k\nKGdldENsYXNzKCkuZ2V0TWV0aG9kKCJnZXQiCiAgICAgICAgICAgICAgICAr\nIFN0cmluZ1V0aWxzLmNhcGl0YWxpemUocHJvcCksIChDbGFzc1tdKSBudWxs\nKSk7CiAgICAgICAgICAgIHBkLnNldFdyaXRlTWV0aG9kKGdldENsYXNzKCku\nZ2V0TWV0aG9kKCJzZXQiCiAgICAgICAgICAgICAgICArIFN0cmluZ1V0aWxz\nLmNhcGl0YWxpemUocHJvcCksIG5ldyBDbGFzc1tdCiAgICAgICAgICAgICAg\nICB7IHBkLmdldFJlYWRNZXRob2QoKS5nZXRSZXR1cm5UeXBlKCkgfSkpOwog\nICAgICAgIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7CiAgICAgICAgICAgIC8v\nIGlmIGFuIGVycm9yIG9jY3VycywgaXQgbWlnaHQgYmUgYmVjYXVzZSB0aGUg\ndmFsdWUgaXMgYQogICAgICAgICAgICAvLyBkeW5hbWljIHByb3BlcnR5Lgog\nICAgICAgIH0KCiAgICAgICAgU3RyaW5nIHR5cGUgPSBmaW5kTG9jYWxpemVk\nKHByb3AgKyAiLXR5cGUiLCB0cnVlLCB2YWwuZ2V0U2NvcGUoKSk7CiAgICAg\nICAgaWYgKHR5cGUgIT0gbnVsbCkKICAgICAgICAgICAgcGQuc2V0VmFsdWUo\nQVRUUklCVVRFX1RZUEUsIHR5cGUpOwoKICAgICAgICBTdHJpbmcgY2F0ID0g\nZmluZExvY2FsaXplZChwcm9wICsgIi1jYXQiLCBmYWxzZSwgdmFsLmdldFNj\nb3BlKCkpOwogICAgICAgIGlmIChjYXQgIT0gbnVsbCkKICAgICAgICAgICAg\ncGQuc2V0VmFsdWUoQVRUUklCVVRFX0NBVEVHT1JZLCBjYXQpOwogICAgICAg\nIAogICAgICAgIHBkLnNldFZhbHVlKEFUVFJJQlVURV9YTUwsIHRvWE1MTmFt\nZShwcm9wKSk7CgogICAgICAgIFN0cmluZyBvcmRlciA9IGZpbmRMb2NhbGl6\nZWQocHJvcCArICItZGlzcGxheW9yZGVyIiwgZmFsc2UsCiAgICAgICAgICAg\nIHZhbC5nZXRTY29wZSgpKTsKICAgICAgICBpZiAob3JkZXIgIT0gbnVsbCkK\nICAgICAgICAgICAgcGQuc2V0VmFsdWUoQVRUUklCVVRFX09SREVSLCBvcmRl\ncik7CgogICAgICAgIC8vIGNvbGxlY3QgYWxsb3dlZCB2YWx1ZXMgZnJvbSBh\nbGlhcyBrZXlzLCBsaXN0ZWQgdmFsdWVzLCBhbmQKICAgICAgICAvLyBpbnRl\ncmZhY2UgaW1wbGVtZW50b3JzCiAgICAgICAgQ29sbGVjdGlvbiBhbGxvd2Vk\nID0gbmV3IFRyZWVTZXQoKTsKICAgICAgICBMaXN0IGFsaWFzZXMgPSBDb2xs\nZWN0aW9ucy5FTVBUWV9MSVNUOwogICAgICAgIGlmICh2YWwuZ2V0QWxpYXNl\ncygpICE9IG51bGwpIHsKICAgICAgICAgICAgYWxpYXNlcyA9IEFycmF5cy5h\nc0xpc3QodmFsLmdldEFsaWFzZXMoKSk7CiAgICAgICAgICAgIGZvciAoaW50\nIGkgPSAwOyBpIDwgYWxpYXNlcy5zaXplKCk7IGkgKz0gMikKICAgICAgICAg\nICAgICAgIGFsbG93ZWQuYWRkKGFsaWFzZXMuZ2V0KGkpKTsKICAgICAgICB9\nCiAgICAgICAgU3RyaW5nW10gdmFscyA9IFN0cmluZ3Muc3BsaXQoZmluZExv\nY2FsaXplZChwcm9wCiAgICAgICAgICAgICsgIi12YWx1ZXMiLCBmYWxzZSwg\ndmFsLmdldFNjb3BlKCkpLCAiLCIsIDApOwogICAgICAgIGZvciAoaW50IGkg\nPSAwOyBpIDwgdmFscy5sZW5ndGg7IGkrKykKICAgICAgICAgICAgaWYgKCFh\nbGlhc2VzLmNvbnRhaW5zKHZhbHNbaV0pKQogICAgICAgICAgICAgICAgYWxs\nb3dlZC5hZGQodmFsc1tpXSk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\nQ2xhc3MgaW50ZiA9IENsYXNzLmZvck5hbWUoZmluZExvY2FsaXplZChwcm9w\nCiAgICAgICAgICAgICAgICArICItaW50ZXJmYWNlIiwgdHJ1ZSwgdmFsLmdl\ndFNjb3BlKCkpLCBmYWxzZSwKICAgICAgICAgICAgICAgIGdldENsYXNzKCku\nZ2V0Q2xhc3NMb2FkZXIoKSk7CiAgICAgICAgICAgIHBkLnNldFZhbHVlKEFU\nVFJJQlVURV9JTlRFUkZBQ0UsIGludGYuZ2V0TmFtZSgpKTsKICAgICAgICAg\nICAgU3RyaW5nW10gaW1wbHMgPSBTZXJ2aWNlcy5nZXRJbXBsZW1lbnRvcnMo\naW50Zik7CiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgaW1wbHMu\nbGVuZ3RoOyBpKyspCiAgICAgICAgICAgICAgICBpZiAoIWFsaWFzZXMuY29u\ndGFpbnMoaW1wbHNbaV0pKQogICAgICAgICAgICAgICAgICAgIGFsbG93ZWQu\nYWRkKGltcGxzW2ldKTsKICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUgdCkg\newogICAgICAgIH0KICAgICAgICBpZiAoIWFsbG93ZWQuaXNFbXB0eSgpKQog\nICAgICAgICAgICBwZC5zZXRWYWx1ZShBVFRSSUJVVEVfQUxMT1dFRF9WQUxV\nRVMsIChTdHJpbmdbXSkgYWxsb3dlZC50b0FycmF5CiAgICAgICAgICAgICAg\nICAobmV3IFN0cmluZ1thbGxvd2VkLnNpemUoKV0pKTsKCiAgICAgICAgcmV0\ndXJuIHBkOwogICAgfQoKICAgIC8qKgogICAgICogRmluZCB0aGUgZ2l2ZW4g\nbG9jYWxpemVkIHN0cmluZywgb3IgcmV0dXJuIG51bGwgaWYgbm90IGZvdW5k\nLgogICAgICovCiAgICBwcml2YXRlIFN0cmluZyBmaW5kTG9jYWxpemVkKFN0\ncmluZyBrZXksIGJvb2xlYW4gZmF0YWwsIENsYXNzIHNjb3BlKSB7CiAgICAg\nICAgLy8gZmluZCB0aGUgbG9jYWxpemVyIHBhY2thZ2UgdGhhdCBjb250YWlu\ncyB0aGlzIGtleQogICAgICAgIExvY2FsaXplciBsb2MgPSBudWxsOwoKICAg\nICAgICAvLyBjaGVjayB0aGUgcGFja2FnZSB0aGF0IHRoZSB2YWx1ZSBjbGFp\nbXMgdG8gYmUgZGVmaW5lZCBpbiwgaWYKICAgICAgICAvLyBhdmFpbGFibGUs\nIGJlZm9yZSB3ZSBzdGFydCBndWVzc2luZy4KICAgICAgICBpZiAoc2NvcGUg\nIT0gbnVsbCkgewogICAgICAgICAgICBsb2MgPSBMb2NhbGl6ZXIuZm9yUGFj\na2FnZShzY29wZSk7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAg\nICByZXR1cm4gbG9jLmdldEZhdGFsKGtleSkuZ2V0TWVzc2FnZSgpOwogICAg\nICAgICAgICB9IGNhdGNoIChNaXNzaW5nUmVzb3VyY2VFeGNlcHRpb24gbXNl\nKSB7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZvciAoQ2xh\nc3MgY2xzID0gZ2V0Q2xhc3MoKTsgY2xzICE9IE9iamVjdC5jbGFzczsKICAg\nICAgICAgICAgY2xzID0gY2xzLmdldFN1cGVyY2xhc3MoKSkgewogICAgICAg\nICAgICBsb2MgPSBMb2NhbGl6ZXIuZm9yUGFja2FnZShjbHMpOwogICAgICAg\nICAgICB0cnkgewogICAgICAgICAgICAgICAgcmV0dXJuIGxvYy5nZXRGYXRh\nbChrZXkpLmdldE1lc3NhZ2UoKTsKICAgICAgICAgICAgfSBjYXRjaCAoTWlz\nc2luZ1Jlc291cmNlRXhjZXB0aW9uIG1zZSkgewogICAgICAgICAgICB9CiAg\nICAgICAgfQoKICAgICAgICBpZiAoZmF0YWwpCiAgICAgICAgICAgIHRocm93\nIG5ldyBNaXNzaW5nUmVzb3VyY2VFeGNlcHRpb24oa2V5LCBnZXRDbGFzcygp\nLmdldE5hbWUoKSwga2V5KTsKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0K\nCiAgICAvLy8vLy8vLy8vLy8vLy8vCiAgICAvLyBUby9mcm9tIG1hcHMKICAg\nIC8vLy8vLy8vLy8vLy8vLy8KCiAgICBwdWJsaWMgTWFwIHRvUHJvcGVydGll\ncyhib29sZWFuIHN0b3JlRGVmYXVsdHMpIHsKICAgICAgICAvLyBjbG9uZSBw\ncm9wZXJ0aWVzIGJlZm9yZSBtYWtpbmcgYW55IG1vZGlmaWNhdGlvbnM7IHdl\nIG5lZWQgdG8ga2VlcAogICAgICAgIC8vIHRoZSBpbnRlcm5hbCBwcm9wZXJ0\naWVzIGluc3RhbmNlIGNvbnNpc3RlbnQgdG8gbWFpbnRhaW4gZXF1YWxzIGFu\nZAogICAgICAgIC8vIGhhc2hjb2RlIGNvbnRyYWN0cwogICAgICAgIE1hcCBj\nbG9uZTsKICAgICAgICBpZiAoX3Byb3BzID09IG51bGwpCiAgICAgICAgICAg\nIGNsb25lID0gbmV3IEhhc2hNYXAoKTsKICAgICAgICBlbHNlIGlmIChfcHJv\ncHMgaW5zdGFuY2VvZiBQcm9wZXJ0aWVzKQogICAgICAgICAgICBjbG9uZSA9\nIChNYXApICgoUHJvcGVydGllcykgX3Byb3BzKS5jbG9uZSgpOwogICAgICAg\nIGVsc2UKICAgICAgICAgICAgY2xvbmUgPSBuZXcgSGFzaE1hcChfcHJvcHMp\nOwoKICAgICAgICAvLyBpZiBubyBleGlzdGluZyBwcm9wZXJ0aWVzIG9yIHRo\nZSBwcm9wZXJ0aWVzIHNob3VsZCBjb250YWluIGVudHJpZXMKICAgICAgICAv\nLyB3aXRoIGRlZmF1bHQgdmFsdWVzLCBhZGQgdmFsdWVzIHRvIHByb3BlcnRp\nZXMKICAgICAgICBpZiAoX3Byb3BzID09IG51bGwgfHwgc3RvcmVEZWZhdWx0\ncykgewogICAgICAgICAgICBWYWx1ZSB2YWw7CiAgICAgICAgICAgIFN0cmlu\nZyBzdHI7CiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX3ZhbHMu\nc2l6ZSgpOyBpKyspIHsKICAgICAgICAgICAgICAgIC8vIGlmIGtleSBpbiBl\neGlzdGluZyBwcm9wZXJ0aWVzLCB3ZSBhbHJlYWR5IGtub3cgdmFsdWUgaXMg\ndXAKICAgICAgICAgICAgICAgIC8vIHRvIGRhdGUKICAgICAgICAgICAgICAg\nIHZhbCA9IChWYWx1ZSkgX3ZhbHMuZ2V0KGkpOwogICAgICAgICAgICAgICAg\naWYgKF9wcm9wcyAhPSBudWxsICYmIENvbmZpZ3VyYXRpb25zLmNvbnRhaW5z\nUHJvcGVydHkKICAgICAgICAgICAgICAgICAgICAodmFsLmdldFByb3BlcnR5\nKCksIF9wcm9wcykpCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7Cgog\nICAgICAgICAgICAgICAgc3RyID0gdmFsLmdldFN0cmluZygpOwogICAgICAg\nICAgICAgICAgaWYgKHN0ciAhPSBudWxsICYmIChzdG9yZURlZmF1bHRzCiAg\nICAgICAgICAgICAgICAgICAgfHwgIXN0ci5lcXVhbHModmFsLmdldERlZmF1\nbHQoKSkpKQogICAgICAgICAgICAgICAgICAgIHB1dChjbG9uZSwgdmFsLCBz\ndHIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChfcHJvcHMgPT0g\nbnVsbCkKICAgICAgICAgICAgICAgIF9wcm9wcyA9IG5ldyBIYXNoTWFwKGNs\nb25lKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGNsb25lOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIGZyb21Qcm9wZXJ0aWVzKE1hcCBtYXApIHsKICAg\nICAgICBpZiAobWFwID09IG51bGwgfHwgbWFwLmlzRW1wdHkoKSkKICAgICAg\nICAgICAgcmV0dXJuOwogICAgICAgIGFzc2VydE5vdFJlYWRPbmx5KCk7Cgog\nICAgICAgIC8vIGlmIHRoZSBvbmx5IHByZXZpb3VzIGNhbGwgd2FzIHRvIGxv\nYWQgZGVmYXVsdHMsIGZvcmdldCB0aGVtLgogICAgICAgIC8vIHRoaXMgd2F5\nIHdlIHByZXNlcnZlIHRoZSBvcmlnaW5hbCBmb3JtYXR0aW5nIG9mIHRoZSB1\nc2VyJ3MgcHJvcHMKICAgICAgICAvLyBpbnN0ZWFkIG9mIHRoZSBkZWZhdWx0\ncy4gIHRoaXMgaXMgaW1wb3J0YW50IGZvciBjYWNoaW5nIG9uCiAgICAgICAg\nLy8gY29uZmlndXJhdGlvbiBvYmplY3RzCiAgICAgICAgaWYgKF9nbG9iYWxz\nKSB7CiAgICAgICAgICAgIF9wcm9wcyA9IG51bGw7CiAgICAgICAgICAgIF9n\nbG9iYWxzID0gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBNYXAgcmVtYWlu\naW5nID0gbmV3IEhhc2hNYXAobWFwKTsKICAgICAgICBib29sZWFuIHNlciA9\nIHRydWU7CiAgICAgICAgVmFsdWUgdmFsOwogICAgICAgIE9iamVjdCBvOwog\nICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX3ZhbHMuc2l6ZSgpOyBpKysp\nIHsKICAgICAgICAgICAgdmFsID0gKFZhbHVlKSBfdmFscy5nZXQoaSk7CiAg\nICAgICAgICAgIG8gPSBnZXQobWFwLCB2YWwsIHRydWUpOwogICAgICAgICAg\nICBpZiAobyA9PSBudWxsKQogICAgICAgICAgICAgICAgY29udGludWU7Cgog\nICAgICAgICAgICBpZiAobyBpbnN0YW5jZW9mIFN0cmluZykgewogICAgICAg\nICAgICAgICAgaWYgKCFTdHJpbmdVdGlscy5lcXVhbHMoKFN0cmluZykgbywg\ndmFsLmdldFN0cmluZygpKSkKICAgICAgICAgICAgICAgICAgICB2YWwuc2V0\nU3RyaW5nKChTdHJpbmcpIG8pOwogICAgICAgICAgICB9IGVsc2UgewogICAg\nICAgICAgICAgICAgc2VyICY9IG8gaW5zdGFuY2VvZiBTZXJpYWxpemFibGU7\nCiAgICAgICAgICAgICAgICB2YWwuc2V0T2JqZWN0KG8pOwogICAgICAgICAg\nICB9CiAgICAgICAgICAgIENvbmZpZ3VyYXRpb25zLnJlbW92ZVByb3BlcnR5\nKHZhbC5nZXRQcm9wZXJ0eSgpLCByZW1haW5pbmcpOwogICAgICAgIH0KICAg\nICAgICAKICAgICAgICAvLyBjb252ZW50aW9uIGlzIHRvIHBvaW50IHByb2R1\nY3QgYXQgYSByZXNvdXJjZSB3aXRoIHRoZQogICAgICAgIC8vIDxwcmVmaXg+\nLnByb3BlcnRpZXMgU3lzdGVtIHByb3BlcnR5OyByZW1vdmUgdGhhdCBwcm9w\nZXJ0eSBzbyB3ZQogICAgICAgIC8vIHdlIGRvbid0IHdhcm4gYWJvdXQgaXQK\nICAgICAgICBDb25maWd1cmF0aW9ucy5yZW1vdmVQcm9wZXJ0eSgicHJvcGVy\ndGllcyIsIHJlbWFpbmluZyk7CgogICAgICAgIC8vIG5vdyB3YXJuIGlmIHRo\nZXJlIGFyZSBhbnkgcmVtYWluaW5nIHByb3BlcnRpZXMgdGhhdCB0aGVyZQog\nICAgICAgIC8vIGlzIGFuIHVuaGFuZGxlZCBwcm9wCiAgICAgICAgTWFwLkVu\ndHJ5IGVudHJ5OwogICAgICAgIGZvciAoSXRlcmF0b3IgaXRyID0gcmVtYWlu\naW5nLmVudHJ5U2V0KCkuaXRlcmF0b3IoKTsgaXRyLmhhc05leHQoKTspIHsK\nICAgICAgICAgICAgZW50cnkgPSAoTWFwLkVudHJ5KSBpdHIubmV4dCgpOwog\nICAgICAgICAgICBpZiAoZW50cnkuZ2V0S2V5KCkgIT0gbnVsbCkKICAgICAg\nICAgICAgICAgIHdhcm5JbnZhbGlkUHJvcGVydHkoKFN0cmluZykgZW50cnku\nZ2V0S2V5KCkpOwogICAgICAgICAgICBzZXIgJj0gZW50cnkuZ2V0VmFsdWUo\nKSBpbnN0YW5jZW9mIFNlcmlhbGl6YWJsZTsKICAgICAgICB9CgogICAgICAg\nIC8vIGNhY2hlIHByb3BlcnRpZXMKICAgICAgICBpZiAoX3Byb3BzID09IG51\nbGwgJiYgc2VyKQogICAgICAgICAgICBfcHJvcHMgPSBtYXA7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBBZGRzIDxjb2RlPm88L2NvZGU+IHRvIDxjb2RlPm1h\ncDwvY29kZT4gdW5kZXIga2V5IGZvciA8Y29kZT52YWw8L2NvZGU+LgogICAg\nICogVXNlIHRoaXMgbWV0aG9kIGluc3RlYWQgb2YgYXR0ZW1wdGluZyB0byBh\nZGQgdGhlIHZhbHVlIGRpcmVjdGx5IGJlY2F1c2UgCiAgICAgKiB0aGlzIHdp\nbGwgYWNjb3VudCBmb3IgdGhlIHByb3BlcnR5IHByZWZpeC4KICAgICAqLwog\nICAgcHJpdmF0ZSB2b2lkIHB1dChNYXAgbWFwLCBWYWx1ZSB2YWwsIE9iamVj\ndCBvKSB7CiAgICAgICAgT2JqZWN0IGtleSA9IHZhbC5nZXRMb2FkS2V5KCk7\nCiAgICAgICAgaWYgKGtleSA9PSBudWxsKQogICAgICAgICAgICBrZXkgPSAi\nb3BlbmpwYS4iICsgdmFsLmdldFByb3BlcnR5KCk7CiAgICAgICAgbWFwLnB1\ndChrZXksIG8pOwogICAgfQoKICAgIC8qKgogICAgICogTG9vayB1cCB0aGUg\nZ2l2ZW4gdmFsdWUsIHRlc3RpbmcgYWxsIGF2YWlsYWJsZSBwcmVmaXhlcy4K\nICAgICAqLwogICAgcHJpdmF0ZSBPYmplY3QgZ2V0KE1hcCBtYXAsIFZhbHVl\nIHZhbCwgYm9vbGVhbiBzZXRMb2FkS2V5KSB7CiAgICAgICAgU3RyaW5nW10g\ncHJlZml4ZXMgPSBQcm9kdWN0RGVyaXZhdGlvbnMuZ2V0Q29uZmlndXJhdGlv\nblByZWZpeGVzKCk7CiAgICAgICAgU3RyaW5nIGZpcnN0S2V5ID0gbnVsbDsK\nICAgICAgICBTdHJpbmcga2V5OwogICAgICAgIE9iamVjdCBvID0gbnVsbDsK\nICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHByZWZpeGVzLmxlbmd0aDsg\naSsrKSB7CiAgICAgICAgICAgIGtleSA9IHByZWZpeGVzW2ldICsgIi4iICsg\ndmFsLmdldFByb3BlcnR5KCk7CiAgICAgICAgICAgIGlmIChmaXJzdEtleSA9\nPSBudWxsKSB7CiAgICAgICAgICAgICAgICBvID0gbWFwLmdldChrZXkpOwog\nICAgICAgICAgICAgICAgaWYgKG8gIT0gbnVsbCkKICAgICAgICAgICAgICAg\nICAgICBmaXJzdEtleSA9IGtleTsKICAgICAgICAgICAgfSBlbHNlIGlmICht\nYXAuY29udGFpbnNLZXkoa2V5KSkgewogICAgICAgICAgICAgICAgLy8gaWYg\nd2UndmUgYWxyZWFkeSBmb3VuZCBhIHByb3BlcnR5IHdpdGggYSBwcmV2aW91\ncyBwcmVmaXgsCiAgICAgICAgICAgICAgICAvLyB0aGVuIHRoaXMgaXMgYSBj\nb2xsaXNpb24uCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0\nYXRlRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgICAgIF9sb2MuZ2V0KCJk\ndXAtd2l0aC1kaWZmZXJlbnQtcHJlZml4ZXMiLCBmaXJzdEtleSwga2V5KQog\nICAgICAgICAgICAgICAgICAgICAgICAuZ2V0TWVzc2FnZSgpKTsKICAgICAg\nICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoZmlyc3RLZXkgIT0gbnVs\nbCAmJiBzZXRMb2FkS2V5KQogICAgICAgICAgICB2YWwuc2V0TG9hZEtleShm\naXJzdEtleSk7CiAgICAgICAgcmV0dXJuIG87CiAgICB9CgogICAgLyoqCiAg\nICAgKiBJc3N1ZSBhIHdhcm5pbmcgdGhhdCB0aGUgc3BlY2lmaWVkIHByb3Bl\ncnR5IGlzIG5vdCB2YWxpZC4KICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIHdh\ncm5JbnZhbGlkUHJvcGVydHkoU3RyaW5nIHByb3BOYW1lKSB7CiAgICAgICAg\naWYgKCFpc0ludmFsaWRQcm9wZXJ0eShwcm9wTmFtZSkpCiAgICAgICAgICAg\nIHJldHVybjsKICAgICAgICBMb2cgbG9nID0gZ2V0Q29uZmlndXJhdGlvbkxv\nZygpOwogICAgICAgIGlmIChsb2cgPT0gbnVsbCB8fCAhbG9nLmlzV2FybkVu\nYWJsZWQoKSkKICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICAvLyB0cnkg\ndG8gZmluZCB0aGUgY2xvc2VzdCBzdHJpbmcgdG8gdGhlIGludmFsaWQgcHJv\ncGVydHkKICAgICAgICAvLyBzbyB0aGF0IHdlIGNhbiBwcm92aWRlIGEgaGlu\ndCBpbiBjYXNlIG9mIGEgbWlzc3BlbGxpbmcKICAgICAgICBTdHJpbmcgY2xv\nc2VzdCA9IFN0cmluZ0Rpc3RhbmNlLmdldENsb3Nlc3RMZXZlbnNodGVpbkRp\nc3RhbmNlCiAgICAgICAgICAgIChwcm9wTmFtZSwgbmV3UHJvcGVydHlMaXN0\nKCksIDE1KTsKCiAgICAgICAgaWYgKGNsb3Nlc3QgPT0gbnVsbCkKICAgICAg\nICAgICAgbG9nLndhcm4oX2xvYy5nZXQoImludmFsaWQtcHJvcGVydHkiLCBw\ncm9wTmFtZSkpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgbG9nLndhcm4o\nX2xvYy5nZXQoImludmFsaWQtcHJvcGVydHktaGludCIsIHByb3BOYW1lLCBj\nbG9zZXN0KSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gYSBjb21w\ncmVoZW5zaXZlIGxpc3Qgb2YgcmVjb2duaXplZCBtYXAga2V5cy4KICAgICAq\nLwogICAgcHJpdmF0ZSBDb2xsZWN0aW9uIG5ld1Byb3BlcnR5TGlzdCgpIHsK\nICAgICAgICBTdHJpbmdbXSBwcmVmaXhlcyA9IFByb2R1Y3REZXJpdmF0aW9u\ncy5nZXRDb25maWd1cmF0aW9uUHJlZml4ZXMoKTsKICAgICAgICBMaXN0IGwg\nPSBuZXcgQXJyYXlMaXN0KF92YWxzLnNpemUoKSAqIHByZWZpeGVzLmxlbmd0\naCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfdmFscy5zaXplKCk7\nIGkrKykgewogICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IHByZWZp\neGVzLmxlbmd0aDsgaisrKQogICAgICAgICAgICAgICAgbC5hZGQocHJlZml4\nZXNbal0gKyAiLiIgKyAoKFZhbHVlKSBfdmFscy5nZXQoaSkpLmdldFByb3Bl\ncnR5KCkpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbDsKICAgIH0KCiAg\nICAvKioKICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgc3BlY2lmaWVkIHBy\nb3BlcnR5IG5hbWUgc2hvdWxkIHJhaXNlIGEgd2FybmluZwogICAgICogaWYg\naXQgaXMgbm90IGZvdW5kIGluIHRoZSBsaXN0IG9mIGtub3duIHByb3BlcnRp\nZXMuCiAgICAgKi8KICAgIHByb3RlY3RlZCBib29sZWFuIGlzSW52YWxpZFBy\nb3BlcnR5KFN0cmluZyBwcm9wTmFtZSkgewogICAgICAgIC8vIGhhbmRsZSB3\nYXJuaW5ncyBmb3Igb3BlbmpwYS5Tb21lU3RyaW5nLCBidXQgbm90IGZvcgog\nICAgICAgIC8vIG9wZW5qcGEuc29tZS5zdWJwYWNrYWdlLlNvbWVTdHJpbmcs\nIHNpbmNlIGl0IG1pZ2h0IGJlIHZhbGlkIGZvciBzb21lCiAgICAgICAgLy8g\nc3BlY2lmaWMgaW1wbGVtZW50YXRpb24gb2YgT3BlbkpQQQogICAgICAgIFN0\ncmluZ1tdIHByZWZpeGVzID0gUHJvZHVjdERlcml2YXRpb25zLmdldENvbmZp\nZ3VyYXRpb25QcmVmaXhlcygpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBp\nIDwgcHJlZml4ZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKHBy\nb3BOYW1lLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChwcmVmaXhlc1tpXSkK\nICAgICAgICAgICAgICAgICYmIHByb3BOYW1lLmxlbmd0aCgpID4gcHJlZml4\nZXNbaV0ubGVuZ3RoKCkgKyAxCiAgICAgICAgICAgICAgICAmJiBwcm9wTmFt\nZS5pbmRleE9mKCcuJywgcHJlZml4ZXNbaV0ubGVuZ3RoKCkpIAogICAgICAg\nICAgICAgICAgPT0gcHJlZml4ZXNbaV0ubGVuZ3RoKCkKICAgICAgICAgICAg\nICAgICYmIHByb3BOYW1lLmluZGV4T2YoJy4nLCBwcmVmaXhlc1tpXS5sZW5n\ndGgoKSArIDEpID09IC0xKQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7\nCiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAv\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAvLyBBdXRvLWNvbmZpZ3VyYXRp\nb24KICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICAvKioKICAgICAq\nIFRoaXMgbWV0aG9kIGxvYWRzIHRoZSBuYW1lZCByZXNvdXJjZSBhcyBhIHBy\nb3BlcnRpZXMgZmlsZS4gSXQgaXMKICAgICAqIHVzZWZ1bCBmb3IgYXV0by1j\nb25maWd1cmF0aW9uIHRvb2xzIHNvIHVzZXJzIGNhbiBzcGVjaWZ5IGEKICAg\nICAqIDxjb2RlPnByb3BlcnRpZXM8L2NvZGU+IHZhbHVlIHdpdGggdGhlIG5h\nbWUgb2YgYSByZXNvdXJjZS4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0\nUHJvcGVydGllcyhTdHJpbmcgcmVzb3VyY2VOYW1lKSB0aHJvd3MgSU9FeGNl\ncHRpb24gewogICAgICAgIFByb2R1Y3REZXJpdmF0aW9ucy5sb2FkKHJlc291\ncmNlTmFtZSwgbnVsbCwgCiAgICAgICAgICAgIGdldENsYXNzKCkuZ2V0Q2xh\nc3NMb2FkZXIoKSkuc2V0SW50byh0aGlzKTsKICAgICAgICBfYXV0byA9IHJl\nc291cmNlTmFtZTsKICAgIH0KCiAgICAvKioKICAgICAqIFRoaXMgbWV0aG9k\nIGxvYWRzIHRoZSBuYW1lZCBmaWxlIGFzIGEgcHJvcGVydGllcyBmaWxlLiBJ\ndCBpcwogICAgICogdXNlZnVsIGZvciBhdXRvLWNvbmZpZ3VyYXRpb24gdG9v\nbHMgc28gdXNlcnMgY2FuIHNwZWNpZnkgYQogICAgICogPGNvZGU+cHJvcGVy\ndGllc0ZpbGU8L2NvZGU+IHZhbHVlIHdpdGggdGhlIG5hbWUgb2YgYSBmaWxl\nLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRQcm9wZXJ0aWVzRmlsZShG\naWxlIGZpbGUpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgUHJvZHVj\ndERlcml2YXRpb25zLmxvYWQoZmlsZSwgbnVsbCwgZ2V0Q2xhc3MoKS5nZXRD\nbGFzc0xvYWRlcigpKS4KICAgICAgICAgICAgc2V0SW50byh0aGlzKTsKICAg\nICAgICBfYXV0byA9IGZpbGUudG9TdHJpbmcoKTsKICAgIH0KCiAgICAvKioK\nICAgICAqIFJldHVybiB0aGUgcmVzb3VyY2UgdGhhdCB3YXMgc2V0IHZpYSBh\ndXRvLWNvbmZpZ3VyYXRpb24gbWV0aG9kcwogICAgICoge0BsaW5rICNzZXRQ\ncm9wZXJ0aWVzfSBvciB7QGxpbmsgI3NldFByb3BlcnRpZXNGaWxlfSwgb3Ig\nbnVsbCBpZiBub25lLgogICAgICovCiAgICBwdWJsaWMgU3RyaW5nIGdldFBy\nb3BlcnRpZXNSZXNvdXJjZSgpIHsKICAgICAgICByZXR1cm4gX2F1dG87CiAg\nICB9CgogICAgLy8vLy8vLy8vLy8vLwogICAgLy8gVXRpbGl0aWVzCiAgICAv\nLy8vLy8vLy8vLy8vCgogICAgLyoqCiAgICAgKiBDaGVja3MgaWYgdGhlIGNv\nbmZpZ3VyYXRpb24gaXMgcmVhZCBvbmx5IGFuZCBpZiBzbyB0aHJvd3MgYW4K\nICAgICAqIGV4Y2VwdGlvbiwgb3RoZXJ3aXNlIHJldHVybnMgc2lsZW50bHku\nCiAgICAgKiBJbXBsZW1lbnRhdGlvbnMgc2hvdWxkIGNhbGwgdGhpcyBtZXRo\nb2QgYmVmb3JlIHNldHRpbmcgYW55IHN0YXRlLgogICAgICovCiAgICBwdWJs\naWMgdm9pZCBhc3NlcnROb3RSZWFkT25seSgpIHsKICAgICAgICBpZiAoaXNS\nZWFkT25seSgpKQogICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRl\nRXhjZXB0aW9uKF9sb2MuZ2V0KCJyZWFkLW9ubHkiKS5nZXRNZXNzYWdlKCkp\nOwogICAgfQoKICAgIC8qKgogICAgICogUGVyZm9ybXMgYW4gZXF1YWxpdHkg\nY2hlY2sgYmFzZWQgb24gdGhlIHByb3BlcnRpZXMgcmV0dXJuZWQgZnJvbQog\nICAgICoge0BsaW5rICN0b1Byb3BlcnRpZXN9LgogICAgICovCiAgICBwdWJs\naWMgYm9vbGVhbiBlcXVhbHMoT2JqZWN0IG90aGVyKSB7CiAgICAgICAgaWYg\nKG90aGVyID09IHRoaXMpCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAg\nICAgIGlmIChvdGhlciA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gZmFs\nc2U7CiAgICAgICAgaWYgKCFnZXRDbGFzcygpLmVxdWFscyhvdGhlci5nZXRD\nbGFzcygpKSkKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoKICAgICAgICAv\nLyBjb21wYXJlIHByb3BlcnRpZXMKICAgICAgICBDb25maWd1cmF0aW9uSW1w\nbCBjb25mID0gKENvbmZpZ3VyYXRpb25JbXBsKSBvdGhlcjsKICAgICAgICBN\nYXAgcDEgPSAoX3Byb3BzID09IG51bGwpID8gdG9Qcm9wZXJ0aWVzKGZhbHNl\nKSA6IF9wcm9wczsKICAgICAgICBNYXAgcDIgPSAoY29uZi5fcHJvcHMgPT0g\nbnVsbCkgPyBjb25mLnRvUHJvcGVydGllcyhmYWxzZSkgOiBjb25mLl9wcm9w\nczsKICAgICAgICByZXR1cm4gcDEuZXF1YWxzKHAyKTsKICAgIH0KCiAgICAv\nKioKICAgICAqIENvbXB1dGVzIGhhc2ggY29kZSBiYXNlZCBvbiB0aGUgcHJv\ncGVydGllcyByZXR1cm5lZCBmcm9tCiAgICAgKiB7QGxpbmsgI3RvUHJvcGVy\ndGllc30uCiAgICAgKi8KICAgIHB1YmxpYyBpbnQgaGFzaENvZGUoKSB7CiAg\nICAgICAgaWYgKF9wcm9wcyAhPSBudWxsKQogICAgICAgICAgICByZXR1cm4g\nX3Byb3BzLmhhc2hDb2RlKCk7CiAgICAgICAgcmV0dXJuIHRvUHJvcGVydGll\ncyhmYWxzZSkuaGFzaENvZGUoKTsKICAgIH0KCiAgICAvKioKICAgICAqIENv\nbnZlcnQgPGNvZGU+cHJvcE5hbWU8L2NvZGU+IHRvIGEgbG93ZXJjYXNlLXdp\ndGgtaHlwaGVucy1zdHlsZSBzdHJpbmcuCiAgICAgKiBUaGlzIGFsZ29yaXRo\nbSBpcyBvbmx5IGRlc2lnbmVkIGZvciBtaXhlcyBvZiB1cHBlcmNhc2UgYW5k\nIGxvd2VyY2FzZSAKICAgICAqIGxldHRlcnMgYW5kIGxvbmUgZGlnaXRzLiBB\nIG1vcmUgc29waGlzdGljYXRlZCBjb252ZXJzaW9uIHNob3VsZCBwcm9iYWJs\neSAKICAgICAqIGJlIGhhbmRsZWQgYnkgYSBwcm9wZXIgcGFyc2VyIGdlbmVy\nYXRvciBvciByZWd1bGFyIGV4cHJlc3Npb25zLgogICAgICovCiAgICBwdWJs\naWMgc3RhdGljIFN0cmluZyB0b1hNTE5hbWUoU3RyaW5nIHByb3BOYW1lKSB7\nCiAgICAgICAgaWYgKHByb3BOYW1lID09IG51bGwpCiAgICAgICAgICAgIHJl\ndHVybiBudWxsOwogICAgICAgIFN0cmluZ0J1ZmZlciBidWYgPSBuZXcgU3Ry\naW5nQnVmZmVyKCk7CiAgICAgICAgY2hhciBjOwogICAgICAgIGZvciAoaW50\nIGkgPSAwOyBpIDwgcHJvcE5hbWUubGVuZ3RoKCk7IGkrKykgewogICAgICAg\nICAgICBjID0gcHJvcE5hbWUuY2hhckF0KGkpOwoKICAgICAgICAgICAgLy8g\nY29udmVydCBzZXF1ZW5jZXMgb2YgYWxsLWNhcHMgdG8gZG93bmNhc2Ugd2l0\naCBkYXNoZXMgYXJvdW5kIAogICAgICAgICAgICAvLyB0aGVtLiBwdXQgYSB0\ncmFpbGluZyBjYXAgdGhhdCBpcyBmb2xsb3dlZCBieSBkb3duY2FzZSBpbnRv\nIHRoZQogICAgICAgICAgICAvLyBkb3duY2FzZSB3b3JkLgogICAgICAgICAg\nICBpZiAoaSAhPSAwICYmIENoYXJhY3Rlci5pc1VwcGVyQ2FzZShjKSAKICAg\nICAgICAgICAgICAgICYmIChDaGFyYWN0ZXIuaXNMb3dlckNhc2UocHJvcE5h\nbWUuY2hhckF0KGktMSkpCiAgICAgICAgICAgICAgICB8fCAoaSA+IDEgJiYg\naSA8IHByb3BOYW1lLmxlbmd0aCgpIC0gMQogICAgICAgICAgICAgICAgJiYg\nQ2hhcmFjdGVyLmlzVXBwZXJDYXNlKHByb3BOYW1lLmNoYXJBdChpLTEpKSAK\nICAgICAgICAgICAgICAgICYmIENoYXJhY3Rlci5pc0xvd2VyQ2FzZShwcm9w\nTmFtZS5jaGFyQXQoaSsxKSkpKSkKICAgICAgICAgICAgICAgIGJ1Zi5hcHBl\nbmQoJy0nKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIHN1cnJvdW5k\nIHNlcXVlbmNlcyBvZiBkaWdpdHMgd2l0aCBkYXNoZXMuCiAgICAgICAgICAg\nIGlmIChpICE9IDAKICAgICAgICAgICAgICAgICYmICgoIUNoYXJhY3Rlci5p\nc0xldHRlcihjKSAmJiBDaGFyYWN0ZXIuaXNMZXR0ZXIocHJvcE5hbWUKICAg\nICAgICAgICAgICAgICAgICAuY2hhckF0KGkgLSAxKSkpIAogICAgICAgICAg\nICAgICAgfHwgKENoYXJhY3Rlci5pc0xldHRlcihjKSAmJiAhQ2hhcmFjdGVy\nLmlzTGV0dGVyKHByb3BOYW1lCiAgICAgICAgICAgICAgICAgICAgLmNoYXJB\ndChpIC0gMSkpKSkpCiAgICAgICAgICAgICAgICBidWYuYXBwZW5kKCctJyk7\nCiAgICAgICAgICAgIAogICAgICAgICAgICBidWYuYXBwZW5kKENoYXJhY3Rl\nci50b0xvd2VyQ2FzZShjKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBi\ndWYudG9TdHJpbmcoKTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBJbXBs\nZW1lbnRhdGlvbiBvZiB0aGUge0BsaW5rIEV4dGVybmFsaXphYmxlfSBpbnRl\ncmZhY2UgdG8gcmVhZCBmcm9tCiAgICAgKiB0aGUgcHJvcGVydGllcyB3cml0\ndGVuIGJ5IHtAbGluayAjd3JpdGVFeHRlcm5hbH0uCiAgICAgKi8KICAgIHB1\nYmxpYyB2b2lkIHJlYWRFeHRlcm5hbChPYmplY3RJbnB1dCBpbikKICAgICAg\nICB0aHJvd3MgSU9FeGNlcHRpb24sIENsYXNzTm90Rm91bmRFeGNlcHRpb24g\newogICAgICAgIGZyb21Qcm9wZXJ0aWVzKChNYXApIGluLnJlYWRPYmplY3Qo\nKSk7CiAgICAgICAgX2dsb2JhbHMgPSBpbi5yZWFkQm9vbGVhbigpOwogICAg\nfQoKICAgIC8qKgogICAgICogSW1wbGVtZW50YXRpb24gb2YgdGhlIHtAbGlu\nayBFeHRlcm5hbGl6YWJsZX0gaW50ZXJmYWNlIHRvIHdyaXRlCiAgICAgKiB0\naGUgcHJvcGVydGllcyByZXR1cm5lZCBieSB7QGxpbmsgI3RvUHJvcGVydGll\nc30uCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHdyaXRlRXh0ZXJuYWwoT2Jq\nZWN0T3V0cHV0IG91dCkgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICBp\nZiAoX3Byb3BzICE9IG51bGwpCiAgICAgICAgICAgIG91dC53cml0ZU9iamVj\ndChfcHJvcHMpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgb3V0LndyaXRl\nT2JqZWN0KHRvUHJvcGVydGllcyhmYWxzZSkpOwogICAgICAgIG91dC53cml0\nZUJvb2xlYW4oX2dsb2JhbHMpOwogICAgfQoKICAgIC8qKgogICAgICogVXNl\ncyB7QGxpbmsgI3RvUHJvcGVydGllc30gYW5kIHtAbGluayAjZnJvbVByb3Bl\ncnRpZXN9IHRvIGNsb25lCiAgICAgKiBjb25maWd1cmF0aW9uLgogICAgICov\nCiAgICBwdWJsaWMgT2JqZWN0IGNsb25lKCkgewogICAgICAgIHRyeSB7CiAg\nICAgICAgICAgIENvbnN0cnVjdG9yIGNvbnMgPSBnZXRDbGFzcygpLmdldENv\nbnN0cnVjdG9yCiAgICAgICAgICAgICAgICAobmV3IENsYXNzW117IGJvb2xl\nYW4uY2xhc3MgfSk7CiAgICAgICAgICAgIENvbmZpZ3VyYXRpb25JbXBsIGNs\nb25lID0gKENvbmZpZ3VyYXRpb25JbXBsKSBjb25zLm5ld0luc3RhbmNlCiAg\nICAgICAgICAgICAgICAobmV3IE9iamVjdFtdeyBCb29sZWFuLkZBTFNFIH0p\nOwogICAgICAgICAgICBjbG9uZS5fZ2xvYmFscyA9IF9nbG9iYWxzOwogICAg\nICAgICAgICBjbG9uZS5mcm9tUHJvcGVydGllcyh0b1Byb3BlcnRpZXModHJ1\nZSkpOwogICAgICAgICAgICByZXR1cm4gY2xvbmU7CiAgICAgICAgfSBjYXRj\naCAoUnVudGltZUV4Y2VwdGlvbiByZSkgewogICAgICAgICAgICB0aHJvdyBy\nZTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAg\nICB0aHJvdyBuZXcgUGFyc2VFeGNlcHRpb24oZSk7CiAgICAgICAgfQogICAg\nfQoKICAgIHB1YmxpYyBib29sZWFuIHJlbW92ZVZhbHVlKFZhbHVlIHZhbCkg\newogICAgICAgIGlmICghX3ZhbHMucmVtb3ZlKHZhbCkpCiAgICAgICAgICAg\nIHJldHVybiBmYWxzZTsKICAgICAgICB2YWwuc2V0TGlzdGVuZXIobnVsbCk7\nCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgcHVibGljIFZhbHVl\nIGFkZFZhbHVlKFZhbHVlIHZhbCkgewogICAgICAgIF92YWxzLmFkZCh2YWwp\nOwogICAgICAgIHZhbC5zZXRMaXN0ZW5lcih0aGlzKTsKICAgICAgICByZXR1\ncm4gdmFsOwogICAgfQoKICAgIC8qKgogICAgICogQWRkIHRoZSBnaXZlbiB2\nYWx1ZSB0byB0aGUgc2V0IG9mIGNvbmZpZ3VyYXRpb24gcHJvcGVydGllcy4K\nICAgICAqLwogICAgcHVibGljIFN0cmluZ1ZhbHVlIGFkZFN0cmluZyhTdHJp\nbmcgcHJvcGVydHkpIHsKICAgICAgICBTdHJpbmdWYWx1ZSB2YWwgPSBuZXcg\nU3RyaW5nVmFsdWUocHJvcGVydHkpOwogICAgICAgIGFkZFZhbHVlKHZhbCk7\nCiAgICAgICAgcmV0dXJuIHZhbDsKICAgIH0KCiAgICAvKioKICAgICAqIEFk\nZCB0aGUgZ2l2ZW4gdmFsdWUgdG8gdGhlIHNldCBvZiBjb25maWd1cmF0aW9u\nIHByb3BlcnRpZXMuCiAgICAgKi8KICAgIHB1YmxpYyBGaWxlVmFsdWUgYWRk\nRmlsZShTdHJpbmcgcHJvcGVydHkpIHsKICAgICAgICBGaWxlVmFsdWUgdmFs\nID0gbmV3IEZpbGVWYWx1ZShwcm9wZXJ0eSk7CiAgICAgICAgYWRkVmFsdWUo\ndmFsKTsKICAgICAgICByZXR1cm4gdmFsOwogICAgfQoKICAgIC8qKgogICAg\nICogQWRkIHRoZSBnaXZlbiB2YWx1ZSB0byB0aGUgc2V0IG9mIGNvbmZpZ3Vy\nYXRpb24gcHJvcGVydGllcy4KICAgICAqLwogICAgcHVibGljIEludFZhbHVl\nIGFkZEludChTdHJpbmcgcHJvcGVydHkpIHsKICAgICAgICBJbnRWYWx1ZSB2\nYWwgPSBuZXcgSW50VmFsdWUocHJvcGVydHkpOwogICAgICAgIGFkZFZhbHVl\nKHZhbCk7CiAgICAgICAgcmV0dXJuIHZhbDsKICAgIH0KCiAgICAvKioKICAg\nICAqIEFkZCB0aGUgZ2l2ZW4gdmFsdWUgdG8gdGhlIHNldCBvZiBjb25maWd1\ncmF0aW9uIHByb3BlcnRpZXMuCiAgICAgKi8KICAgIHB1YmxpYyBEb3VibGVW\nYWx1ZSBhZGREb3VibGUoU3RyaW5nIHByb3BlcnR5KSB7CiAgICAgICAgRG91\nYmxlVmFsdWUgdmFsID0gbmV3IERvdWJsZVZhbHVlKHByb3BlcnR5KTsKICAg\nICAgICBhZGRWYWx1ZSh2YWwpOwogICAgICAgIHJldHVybiB2YWw7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBBZGQgdGhlIGdpdmVuIHZhbHVlIHRvIHRoZSBz\nZXQgb2YgY29uZmlndXJhdGlvbiBwcm9wZXJ0aWVzLgogICAgICovCiAgICBw\ndWJsaWMgQm9vbGVhblZhbHVlIGFkZEJvb2xlYW4oU3RyaW5nIHByb3BlcnR5\nKSB7CiAgICAgICAgQm9vbGVhblZhbHVlIHZhbCA9IG5ldyBCb29sZWFuVmFs\ndWUocHJvcGVydHkpOwogICAgICAgIGFkZFZhbHVlKHZhbCk7CiAgICAgICAg\ndmFsLnNldERlZmF1bHQoImZhbHNlIik7CiAgICAgICAgcmV0dXJuIHZhbDsK\nICAgIH0KCiAgICAvKioKICAgICAqIEFkZCB0aGUgZ2l2ZW4gdmFsdWUgdG8g\ndGhlIHNldCBvZiBjb25maWd1cmF0aW9uIHByb3BlcnRpZXMuCiAgICAgKi8K\nICAgIHB1YmxpYyBTdHJpbmdMaXN0VmFsdWUgYWRkU3RyaW5nTGlzdChTdHJp\nbmcgcHJvcGVydHkpIHsKICAgICAgICBTdHJpbmdMaXN0VmFsdWUgdmFsID0g\nbmV3IFN0cmluZ0xpc3RWYWx1ZShwcm9wZXJ0eSk7CiAgICAgICAgYWRkVmFs\ndWUodmFsKTsKICAgICAgICByZXR1cm4gdmFsOwogICAgfQoKICAgIC8qKgog\nICAgICogQWRkIHRoZSBnaXZlbiB2YWx1ZSB0byB0aGUgc2V0IG9mIGNvbmZp\nZ3VyYXRpb24gcHJvcGVydGllcy4KICAgICAqLwogICAgcHVibGljIE9iamVj\ndFZhbHVlIGFkZE9iamVjdChTdHJpbmcgcHJvcGVydHkpIHsKICAgICAgICBP\nYmplY3RWYWx1ZSB2YWwgPSBuZXcgT2JqZWN0VmFsdWUocHJvcGVydHkpOwog\nICAgICAgIGFkZFZhbHVlKHZhbCk7CiAgICAgICAgcmV0dXJuIHZhbDsKICAg\nIH0KCiAgICAvKioKICAgICAqIEFkZCB0aGUgZ2l2ZW4gdmFsdWUgdG8gdGhl\nIHNldCBvZiBjb25maWd1cmF0aW9uIHByb3BlcnRpZXMuCiAgICAgKi8KICAg\nIHB1YmxpYyBQbHVnaW5WYWx1ZSBhZGRQbHVnaW4oU3RyaW5nIHByb3BlcnR5\nLCBib29sZWFuIHNpbmdsZXRvbikgewogICAgICAgIFBsdWdpblZhbHVlIHZh\nbCA9IG5ldyBQbHVnaW5WYWx1ZShwcm9wZXJ0eSwgc2luZ2xldG9uKTsKICAg\nICAgICBhZGRWYWx1ZSh2YWwpOwogICAgICAgIHJldHVybiB2YWw7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBBZGQgdGhlIGdpdmVuIHZhbHVlIHRvIHRoZSBz\nZXQgb2YgY29uZmlndXJhdGlvbiBwcm9wZXJ0aWVzLgogICAgICovCiAgICBw\ndWJsaWMgUGx1Z2luTGlzdFZhbHVlIGFkZFBsdWdpbkxpc3QoU3RyaW5nIHBy\nb3BlcnR5KSB7CiAgICAgICAgUGx1Z2luTGlzdFZhbHVlIHZhbCA9IG5ldyBQ\nbHVnaW5MaXN0VmFsdWUocHJvcGVydHkpOwogICAgICAgIGFkZFZhbHVlKHZh\nbCk7CiAgICAgICAgcmV0dXJuIHZhbDsKICAgIH0KfQo=\n","encoding":"base64"}

