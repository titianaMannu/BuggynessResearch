{"sha":"88700386fcb81dd605fe7fae935db30276e38a30","node_id":"MDQ6QmxvYjIwNjM2NDo4ODcwMDM4NmZjYjgxZGQ2MDVmZTdmYWU5MzVkYjMwMjc2ZTM4YTMw","size":6004,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/88700386fcb81dd605fe7fae935db30276e38a30","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIuY29uZjsKCmltcG9ydCBqYXZhLmxhbmcucmVmbGVjdC5B\ncnJheTsKaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7CmltcG9ydCBqYXZh\nLnV0aWwuTGlzdDsKCmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMubGFuZy5T\ndHJpbmdVdGlsczsKCi8qKgogKiBBIGxpc3Qgb2YgcGx1Z2lucy4gRGVmYXVs\ndHMgYW5kIGFsaWFzZXMgb24gcGx1Z2luIGxpc3RzIGFwcGx5IG9ubHkKICog\ndG8gaW5kaXZpZHVhbCBjbGFzcyBuYW1lcy4KICoKICogQGF1dGhvciBBYmUg\nV2hpdGUKICogQHNlZSBQbHVnaW5WYWx1ZQogKi8KcHVibGljIGNsYXNzIFBs\ndWdpbkxpc3RWYWx1ZSBleHRlbmRzIE9iamVjdFZhbHVlIHsKCiAgICBwcml2\nYXRlIHN0YXRpYyBmaW5hbCBTdHJpbmdbXSBFTVBUWSA9IG5ldyBTdHJpbmdb\nMF07CgogICAgcHJpdmF0ZSBTdHJpbmdbXSBfbmFtZXMgPSBFTVBUWTsKICAg\nIHByaXZhdGUgU3RyaW5nW10gX3Byb3BzID0gRU1QVFk7CgogICAgcHVibGlj\nIFBsdWdpbkxpc3RWYWx1ZShTdHJpbmcgcHJvcCkgewogICAgICAgIHN1cGVy\nKHByb3ApOwogICAgfQoKICAgIC8qKgogICAgICogVGhlIHBsdWdpbiBjbGFz\ncyBuYW1lcy4KICAgICAqLwogICAgcHVibGljIFN0cmluZ1tdIGdldENsYXNz\nTmFtZXMoKSB7CiAgICAgICAgcmV0dXJuIF9uYW1lczsKICAgIH0KCiAgICAv\nKioKICAgICAqIFRoZSBwbHVnaW4gY2xhc3MgbmFtZXMuCiAgICAgKi8KICAg\nIHB1YmxpYyB2b2lkIHNldENsYXNzTmFtZXMoU3RyaW5nW10gbmFtZXMpIHsK\nICAgICAgICBpZiAobmFtZXMgPT0gbnVsbCkKICAgICAgICAgICAgbmFtZXMg\nPSBFTVBUWTsKICAgICAgICBfbmFtZXMgPSBuYW1lczsKICAgICAgICBzZXQo\nbnVsbCwgdHJ1ZSk7CiAgICAgICAgdmFsdWVDaGFuZ2VkKCk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBUaGUgcGx1Z2luIHByb3BlcnRpZXMuCiAgICAgKi8K\nICAgIHB1YmxpYyBTdHJpbmdbXSBnZXRQcm9wZXJ0aWVzKCkgewogICAgICAg\nIHJldHVybiBfcHJvcHM7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgcGx1\nZ2luIHByb3BlcnRpZXMuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFBy\nb3BlcnRpZXMoU3RyaW5nW10gcHJvcHMpIHsKICAgICAgICBpZiAocHJvcHMg\nPT0gbnVsbCkKICAgICAgICAgICAgcHJvcHMgPSBFTVBUWTsKICAgICAgICBf\ncHJvcHMgPSBwcm9wczsKICAgICAgICBzZXQobnVsbCwgdHJ1ZSk7CiAgICAg\nICAgdmFsdWVDaGFuZ2VkKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBJbnN0\nYW50aWF0ZSB0aGUgcGx1Z2lucyBhcyBpbnN0YW5jZXMgb2YgdGhlIGdpdmVu\nIGNsYXNzLgogICAgICovCiAgICBwdWJsaWMgT2JqZWN0IGluc3RhbnRpYXRl\nKENsYXNzIGVsZW1UeXBlLCBDb25maWd1cmF0aW9uIGNvbmYsCiAgICAgICAg\nYm9vbGVhbiBmYXRhbCkgewogICAgICAgIE9iamVjdFtdIHJldDsKICAgICAg\nICBpZiAoX25hbWVzLmxlbmd0aCA9PSAwKQogICAgICAgICAgICByZXQgPSAo\nT2JqZWN0W10pIEFycmF5Lm5ld0luc3RhbmNlKGVsZW1UeXBlLCAwKTsKICAg\nICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0ID0gKE9iamVjdFtdKSBBcnJh\neS5uZXdJbnN0YW5jZShlbGVtVHlwZSwgX25hbWVzLmxlbmd0aCk7CiAgICAg\nICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcmV0Lmxlbmd0aDsgaSsrKSB7\nCiAgICAgICAgICAgICAgICByZXRbaV0gPSBuZXdJbnN0YW5jZShfbmFtZXNb\naV0sIGVsZW1UeXBlLCBjb25mLCBmYXRhbCk7CiAgICAgICAgICAgICAgICBD\nb25maWd1cmF0aW9ucy5jb25maWd1cmVJbnN0YW5jZShyZXRbaV0sIGNvbmYs\nIF9wcm9wc1tpXSwKICAgICAgICAgICAgICAgICAgICBnZXRQcm9wZXJ0eSgp\nKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBzZXQocmV0LCB0\ncnVlKTsKICAgICAgICByZXR1cm4gcmV0OwogICAgfQoKICAgIC8qKgogICAg\nICogT3ZlcnJpZGUgdG8gcmVjb2duaXplIGFsaWFzZXMgb2YgdGhlIGNsYXNz\nIG5hbWUgd2l0aG91dCB0aGUgYXR0YWNoZWQKICAgICAqIHByb3BlcnRpZXMg\nc3RyaW5nLgogICAgICovCiAgICBwdWJsaWMgU3RyaW5nIGdldFN0cmluZygp\nIHsKICAgICAgICBpZiAoX25hbWVzLmxlbmd0aCA9PSAwKQogICAgICAgICAg\nICByZXR1cm4gbnVsbDsKCiAgICAgICAgU3RyaW5nQnVmZmVyIGJ1ZiA9IG5l\ndyBTdHJpbmdCdWZmZXIoKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8\nIF9uYW1lcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAoaSA+IDAp\nCiAgICAgICAgICAgICAgICBidWYuYXBwZW5kKCIsICIpOwogICAgICAgICAg\nICBidWYuYXBwZW5kKENvbmZpZ3VyYXRpb25zLmdldFBsdWdpbihhbGlhcyhf\nbmFtZXNbaV0pLCBfcHJvcHNbaV0pKTsKICAgICAgICB9CiAgICAgICAgaWYg\nKGJ1Zi5sZW5ndGgoKSA9PSAwKQogICAgICAgICAgICByZXR1cm4gbnVsbDsK\nICAgICAgICByZXR1cm4gYnVmLnRvU3RyaW5nKCk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBPdmVycmlkZSB0byByZWNvZ25pemUgYWxpYXNlcyBvZiB0aGUg\ncGx1Z2luIG5hbWUgd2l0aG91dCB0aGUgYXR0YWNoZWQKICAgICAqIHByb3Bl\ncnRpZXMgc3RyaW5nLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRTdHJp\nbmcoU3RyaW5nIHN0cikgewogICAgICAgIGlmIChTdHJpbmdVdGlscy5pc0Vt\ncHR5KHN0cikpCiAgICAgICAgICAgIHN0ciA9IGdldERlZmF1bHQoKTsKICAg\nICAgICBpZiAoU3RyaW5nVXRpbHMuaXNFbXB0eShzdHIpKSB7CiAgICAgICAg\nICAgIF9uYW1lcyA9IEVNUFRZOwogICAgICAgICAgICBfcHJvcHMgPSBFTVBU\nWTsKICAgICAgICAgICAgc2V0KG51bGwsIHRydWUpOwogICAgICAgICAgICB2\nYWx1ZUNoYW5nZWQoKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0K\nCiAgICAgICAgLy8gc3BsaXQgdXAgdGhlIHN0cmluZzsgZWFjaCBlbGVtZW50\nIG1pZ2h0IGJlIGEgY2xhc3MgbmFtZSwgb3IgYQogICAgICAgIC8vIGNsYXNz\nIG5hbWUgd2l0aCBwcm9wZXJ0aWVzIHNldHRpbmdzCiAgICAgICAgTGlzdCBw\nbHVnaW5zID0gbmV3IEFycmF5TGlzdCgpOwogICAgICAgIFN0cmluZ0J1ZmZl\nciBwbHVnaW4gPSBuZXcgU3RyaW5nQnVmZmVyKCk7CiAgICAgICAgYm9vbGVh\nbiBpblBhcmVuID0gZmFsc2U7CiAgICAgICAgY2hhciBjOwogICAgICAgIGZv\nciAoaW50IGkgPSAwOyBpIDwgc3RyLmxlbmd0aCgpOyBpKyspIHsKICAgICAg\nICAgICAgYyA9IHN0ci5jaGFyQXQoaSk7CiAgICAgICAgICAgIHN3aXRjaCAo\nYykgewogICAgICAgICAgICAgICAgY2FzZSAnKCc6CiAgICAgICAgICAgICAg\nICAgICAgaW5QYXJlbiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgcGx1\nZ2luLmFwcGVuZChjKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAg\nICAgICAgICAgICAgIGNhc2UgJyknOgogICAgICAgICAgICAgICAgICAgIGlu\nUGFyZW4gPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBwbHVnaW4uYXBw\nZW5kKGMpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAg\nICAgICAgY2FzZSAnLCc6CiAgICAgICAgICAgICAgICAgICAgaWYgKGluUGFy\nZW4pCiAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbi5hcHBlbmQoYyk7\nCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAg\nICAgICAgIHBsdWdpbnMuYWRkKHBsdWdpbi50b1N0cmluZygpKTsKICAgICAg\nICAgICAgICAgICAgICAgICAgcGx1Z2luID0gbmV3IFN0cmluZ0J1ZmZlcigp\nOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBi\ncmVhazsKICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAg\nICAgICAgcGx1Z2luLmFwcGVuZChjKTsKICAgICAgICAgICAgfQogICAgICAg\nIH0KICAgICAgICBpZiAocGx1Z2luLmxlbmd0aCgpID4gMCkKICAgICAgICAg\nICAgcGx1Z2lucy5hZGQocGx1Z2luLnRvU3RyaW5nKCkpOwoKICAgICAgICAv\nLyBwYXJzZSBlYWNoIHBsdWdpbiBlbGVtZW50IGludG8gaXRzIG5hbWUgYW5k\nIHByb3BlcnRpZXMKICAgICAgICBMaXN0IG5hbWVzID0gbmV3IEFycmF5TGlz\ndCgpOwogICAgICAgIExpc3QgcHJvcHMgPSBuZXcgQXJyYXlMaXN0KCk7CiAg\nICAgICAgU3RyaW5nIGNsc05hbWU7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7\nIGkgPCBwbHVnaW5zLnNpemUoKTsgaSsrKSB7CiAgICAgICAgICAgIHN0ciA9\nIChTdHJpbmcpIHBsdWdpbnMuZ2V0KGkpOwogICAgICAgICAgICBjbHNOYW1l\nID0gdW5hbGlhcyhDb25maWd1cmF0aW9ucy5nZXRDbGFzc05hbWUoc3RyKSk7\nCiAgICAgICAgICAgIGlmIChjbHNOYW1lICE9IG51bGwpIHsKICAgICAgICAg\nICAgICAgIG5hbWVzLmFkZChjbHNOYW1lKTsKICAgICAgICAgICAgICAgIHBy\nb3BzLmFkZChDb25maWd1cmF0aW9ucy5nZXRQcm9wZXJ0aWVzKHN0cikpOwog\nICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIF9uYW1lcyA9IChTdHJp\nbmdbXSkgbmFtZXMudG9BcnJheShuZXcgU3RyaW5nW25hbWVzLnNpemUoKV0p\nOwogICAgICAgIF9wcm9wcyA9IChTdHJpbmdbXSkgcHJvcHMudG9BcnJheShu\nZXcgU3RyaW5nW3Byb3BzLnNpemUoKV0pOwogICAgICAgIHNldChudWxsLCB0\ncnVlKTsKICAgICAgICB2YWx1ZUNoYW5nZWQoKTsKICAgIH0KCiAgICBwdWJs\naWMgQ2xhc3MgZ2V0VmFsdWVUeXBlKCkgewogICAgICAgIHJldHVybiBPYmpl\nY3RbXS5jbGFzczsKICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBvYmplY3RD\naGFuZ2VkKCkgewogICAgICAgIE9iamVjdFtdIHZhbHMgPSAoT2JqZWN0W10p\nIGdldCgpOwogICAgICAgIGlmICh2YWxzID09IG51bGwgfHwgdmFscy5sZW5n\ndGggPT0gMCkKICAgICAgICAgICAgX25hbWVzID0gRU1QVFk7CiAgICAgICAg\nZWxzZSB7CiAgICAgICAgICAgIF9uYW1lcyA9IG5ldyBTdHJpbmdbdmFscy5s\nZW5ndGhdOwogICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHZhbHMu\nbGVuZ3RoOyBpKyspCiAgICAgICAgICAgICAgICBfbmFtZXNbaV0gPSAodmFs\nc1tpXSA9PSBudWxsKSA/IG51bGwKICAgICAgICAgICAgICAgICAgICA6IHZh\nbHNbaV0uZ2V0Q2xhc3MoKS5nZXROYW1lKCk7CiAgICAgICAgfQogICAgICAg\nIF9wcm9wcyA9IEVNUFRZOwogICAgfQoKICAgIHByb3RlY3RlZCBTdHJpbmcg\nZ2V0SW50ZXJuYWxTdHJpbmcoKSB7CiAgICAgICAgLy8gc2hvdWxkIG5ldmVy\nIGdldCBjYWxsZWQKICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhj\nZXB0aW9uKCk7CiAgICB9CgogICAgcHJvdGVjdGVkIHZvaWQgc2V0SW50ZXJu\nYWxTdHJpbmcoU3RyaW5nIHN0cikgewogICAgICAgIC8vIHNob3VsZCBuZXZl\nciBnZXQgY2FsbGVkCiAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4\nY2VwdGlvbigpOwogICAgfQp9Cg==\n","encoding":"base64"}

