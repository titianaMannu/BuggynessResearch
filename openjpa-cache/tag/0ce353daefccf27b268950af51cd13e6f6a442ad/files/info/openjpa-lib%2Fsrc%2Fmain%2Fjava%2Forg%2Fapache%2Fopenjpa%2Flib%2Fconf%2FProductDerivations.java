{"sha":"b0b4178f751f63334588b344e533462da78267bd","node_id":"MDQ6QmxvYjIwNjM2NDpiMGI0MTc4Zjc1MWY2MzMzNDU4OGIzNDRlNTMzNDYyZGE3ODI2N2Jk","size":11005,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/b0b4178f751f63334588b344e533462da78267bd","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIuY29uZjsKCmltcG9ydCBqYXZhLmlvLkZpbGU7CmltcG9y\ndCBqYXZhLnV0aWwuQXJyYXlMaXN0OwppbXBvcnQgamF2YS51dGlsLkNvbGxl\nY3Rpb25zOwppbXBvcnQgamF2YS51dGlsLkNvbXBhcmF0b3I7CmltcG9ydCBq\nYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGphdmEudXRpbC5NaXNzaW5nUmVzb3Vy\nY2VFeGNlcHRpb247CgppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmxhbmcu\nU3RyaW5nVXRpbHM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0\naWwuTG9jYWxpemVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51\ndGlsLlNlcnZpY2VzOwoKLyoqCiAqIFV0aWxpdGllcyBmb3IgcnVubmluZyBw\ncm9kdWN0IGRlcml2YXRpb25zLgogKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQog\nKiBAbm9qYXZhZG9jCiAqLwpwdWJsaWMgY2xhc3MgUHJvZHVjdERlcml2YXRp\nb25zIHsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6ZXIgX2xv\nYyA9IExvY2FsaXplci5mb3JQYWNrYWdlCiAgICAgICAgKFByb2R1Y3REZXJp\ndmF0aW9ucy5jbGFzcyk7CgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgUHJv\nZHVjdERlcml2YXRpb25bXSBfZGVyaXZhdGlvbnM7CiAgICBwcml2YXRlIHN0\nYXRpYyBmaW5hbCBTdHJpbmdbXSBfZGVyaXZhdGlvbk5hbWVzOwogICAgcHJp\ndmF0ZSBzdGF0aWMgZmluYWwgVGhyb3dhYmxlW10gX2Rlcml2YXRpb25FcnJv\ncnM7CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmdbXSBfcHJlZml4\nZXM7CiAgICBzdGF0aWMgewogICAgICAgIENsYXNzTG9hZGVyIGwgPSBQcm9k\ndWN0RGVyaXZhdGlvbi5jbGFzcy5nZXRDbGFzc0xvYWRlcigpOwogICAgICAg\nIF9kZXJpdmF0aW9uTmFtZXMgPSBTZXJ2aWNlcy5nZXRJbXBsZW1lbnRvcnMo\nUHJvZHVjdERlcml2YXRpb24uY2xhc3MsIGwpOwogICAgICAgIF9kZXJpdmF0\naW9uRXJyb3JzID0gbmV3IFRocm93YWJsZVtfZGVyaXZhdGlvbk5hbWVzLmxl\nbmd0aF07CiAgICAgICAgTGlzdCBkZXJpdmF0aW9ucyA9IG5ldyBBcnJheUxp\nc3QoX2Rlcml2YXRpb25OYW1lcy5sZW5ndGgpOwogICAgICAgIGZvciAoaW50\nIGkgPSAwOyBpIDwgX2Rlcml2YXRpb25OYW1lcy5sZW5ndGg7IGkrKykgewog\nICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgUHJvZHVjdERlcml2\nYXRpb24gZCA9IChQcm9kdWN0RGVyaXZhdGlvbikgQ2xhc3MuCiAgICAgICAg\nICAgICAgICAgICAgZm9yTmFtZShfZGVyaXZhdGlvbk5hbWVzW2ldLCB0cnVl\nLCBsKS5uZXdJbnN0YW5jZSgpOwogICAgICAgICAgICAgICAgZC52YWxpZGF0\nZSgpOwogICAgICAgICAgICAgICAgZGVyaXZhdGlvbnMuYWRkKGQpOwogICAg\nICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUgdCkgewogICAgICAgICAgICAg\nICAgX2Rlcml2YXRpb25FcnJvcnNbaV0gPSB0OwogICAgICAgICAgICB9CiAg\nICAgICAgfQoKICAgICAgICAvLyBtdXN0IGJlIGF0IGxlYXN0IG9uZSBwcm9k\ndWN0IGRlcml2YXRpb24gdG8gZGVmaW5lIG1ldGFkYXRhIGZhY3RvcmllcywK\nICAgICAgICAvLyBldGMuIAogICAgICAgIGlmIChkZXJpdmF0aW9ucy5pc0Vt\ncHR5KCkpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdSZXNvdXJj\nZUV4Y2VwdGlvbihfbG9jLmdldAogICAgICAgICAgICAgICAgKCJuby1wcm9k\ndWN0LWRlcml2YXRpb25zIiwgUHJvZHVjdERlcml2YXRpb24uY2xhc3MuZ2V0\nTmFtZSgpLAogICAgICAgICAgICAgICAgZGVyaXZhdGlvbkVycm9yc1RvU3Ry\naW5nKCkpLmdldE1lc3NhZ2UoKSwgCiAgICAgICAgICAgICAgICBQcm9kdWN0\nRGVyaXZhdGlvbnMuY2xhc3MuZ2V0TmFtZSgpLCJkZXJpdmF0aW9ucyIpOwog\nICAgICAgIH0KCiAgICAgICAgLy8gaWYgc29tZSBkZXJpdmF0aW9ucyB3ZXJl\nbid0IGluc3RhbnRpYWJsZSwgd2FybgogICAgICAgIGZvciAoaW50IGkgPSAw\nOyBpIDwgX2Rlcml2YXRpb25FcnJvcnMubGVuZ3RoOyBpKyspIHsKICAgICAg\nICAgICAgaWYgKF9kZXJpdmF0aW9uRXJyb3JzW2ldID09IG51bGwpCiAgICAg\nICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgU3lzdGVtLmVyci5w\ncmludGxuKF9sb2MuZ2V0KCJiYWQtcHJvZHVjdC1kZXJpdmF0aW9ucyIsCiAg\nICAgICAgICAgICAgICBQcm9kdWN0RGVyaXZhdGlvbnMuY2xhc3MuZ2V0TmFt\nZSgpKSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgICAg\nQ29sbGVjdGlvbnMuc29ydChkZXJpdmF0aW9ucywgbmV3IFByb2R1Y3REZXJp\ndmF0aW9uQ29tcGFyYXRvcigpKTsKICAgICAgICBfZGVyaXZhdGlvbnMgPSAo\nUHJvZHVjdERlcml2YXRpb25bXSkgZGVyaXZhdGlvbnMudG9BcnJheQogICAg\nICAgICAgICAobmV3IFByb2R1Y3REZXJpdmF0aW9uW2Rlcml2YXRpb25zLnNp\nemUoKV0pOwoKICAgICAgICBMaXN0IHByZWZpeGVzID0gbmV3IEFycmF5TGlz\ndCgyKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9kZXJpdmF0aW9u\ncy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAoX2Rlcml2YXRpb25z\nW2ldLmdldENvbmZpZ3VyYXRpb25QcmVmaXgoKSAhPSBudWxsCiAgICAgICAg\nICAgICAgICAmJiAhIm9wZW5qcGEiLmVxdWFscyhfZGVyaXZhdGlvbnNbaV0u\nZ2V0Q29uZmlndXJhdGlvblByZWZpeCgpKSkKICAgICAgICAgICAgICAgIHBy\nZWZpeGVzLmFkZChfZGVyaXZhdGlvbnNbaV0uZ2V0Q29uZmlndXJhdGlvblBy\nZWZpeCgpKTsKICAgICAgICB9CiAgICAgICAgX3ByZWZpeGVzID0gbmV3IFN0\ncmluZ1sxICsgcHJlZml4ZXMuc2l6ZSgpXTsKICAgICAgICBfcHJlZml4ZXNb\nMF0gPSAib3BlbmpwYSI7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBw\ncmVmaXhlcy5zaXplKCk7IGkrKykKICAgICAgICAgICAgX3ByZWZpeGVzW2kg\nKyAxXSA9IChTdHJpbmcpIHByZWZpeGVzLmdldChpKTsKICAgIH0KCiAgICAv\nKioKICAgICAqIFJldHVybiBhbGwgdGhlIHByb2R1Y3QgZGVyaXZhdGlvbnMg\ncmVnaXN0ZXJlZCBpbiB0aGUgY3VycmVudCBjbGFzc2xvYWRlcgogICAgICov\nCiAgICBwdWJsaWMgc3RhdGljIFByb2R1Y3REZXJpdmF0aW9uW10gZ2V0UHJv\nZHVjdERlcml2YXRpb25zKCkgewogICAgICAgIHJldHVybiBfZGVyaXZhdGlv\nbnM7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIHJlY29nbml6\nZWQgcHJlZml4ZXMgZm9yIGNvbmZpZ3VyYXRpb24gcHJvcGVydGllcy4KICAg\nICAqLwogICAgcHVibGljIHN0YXRpYyBTdHJpbmdbXSBnZXRDb25maWd1cmF0\naW9uUHJlZml4ZXMoKSB7CiAgICAgICAgcmV0dXJuIF9wcmVmaXhlczsKICAg\nIH0KCiAgICAvKioKICAgICAqIEFwcGx5IHtAbGluayBQcm9kdWN0RGVyaXZh\ndGlvbiNiZWZvcmVDb25maWd1cmF0aW9uQ29uc3RydWN0fSBjYWxsYmFja3MK\nICAgICAqIHRvIHRoZSB0aGUgZ2l2ZW4gaW5zdGFuY2UuIEV4Y2VwdGlvbnMg\nYXJlIHN3YWxsb3dlZC4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyB2b2lk\nIGJlZm9yZUNvbmZpZ3VyYXRpb25Db25zdHJ1Y3QoQ29uZmlndXJhdGlvblBy\nb3ZpZGVyIGNwKSB7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfZGVy\naXZhdGlvbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgICAgIF9kZXJpdmF0aW9uc1tpXS5iZWZvcmVDb25maWd1cmF0\naW9uQ29uc3RydWN0KGNwKTsKICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0\naW9uIGUpIHsKICAgICAgICAgICAgICAgIC8vIGNhbid0IGxvZzsgbm8gY29u\nZmlndXJhdGlvbiB5ZXQKICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1Ry\nYWNlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgLyoq\nCiAgICAgKiBBcHBseSB7QGxpbmsgUHJvZHVjdERlcml2YXRpb24jYmVmb3Jl\nQ29uZmlndXJhdGlvbkxvYWR9IGNhbGxiYWNrcwogICAgICogdG8gdGhlIHRo\nZSBnaXZlbiBpbnN0YW5jZS4gRXhjZXB0aW9ucyBhcmUgc3dhbGxvd2VkLgog\nICAgICovCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgYmVmb3JlQ29uZmlndXJh\ndGlvbkxvYWQoQ29uZmlndXJhdGlvbiBjb25mKSB7CiAgICAgICAgZm9yIChp\nbnQgaSA9IDA7IGkgPCBfZGVyaXZhdGlvbnMubGVuZ3RoOyBpKyspIHsKICAg\nICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIF9kZXJpdmF0aW9uc1tp\nXS5iZWZvcmVDb25maWd1cmF0aW9uTG9hZChjb25mKTsKICAgICAgICAgICAg\nfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgIC8vIGxv\nZ2dpbmcgbm90IGNvbmZpZ3VyZWQgeWV0CiAgICAgICAgICAgICAgICBlLnBy\naW50U3RhY2tUcmFjZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAg\nfQoKICAgIC8qKgogICAgICogQXBwbHkge0BsaW5rIFByb2R1Y3REZXJpdmF0\naW9uI2FmdGVyU3BlY2lmaWNhdGlvblNldH0gY2FsbGJhY2tzCiAgICAgKiB0\nbyB0aGUgdGhlIGdpdmVuIGluc3RhbmNlLiBFeGNlcHRpb25zIGFyZSBzd2Fs\nbG93ZWQuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBhZnRlclNw\nZWNpZmljYXRpb25TZXQoQ29uZmlndXJhdGlvbiBjb25mKSB7CiAgICAgICAg\nZm9yIChpbnQgaSA9IDA7IGkgPCBfZGVyaXZhdGlvbnMubGVuZ3RoOyBpKysp\nIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIF9kZXJpdmF0\naW9uc1tpXS5hZnRlclNwZWNpZmljYXRpb25TZXQoY29uZik7CiAgICAgICAg\nICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAgICAv\nLyBsb2dnaW5nIG5vdCBjb25maWd1cmVkIHlldAogICAgICAgICAgICAgICAg\nZS5wcmludFN0YWNrVHJhY2UoKTsKICAgICAgICAgICAgfQogICAgICAgIH0K\nICAgIH0KCiAgICAvKioKICAgICAqIExvYWQgdGhlIGdpdmVuIGdpdmVuIHJl\nc291cmNlLCBvciByZXR1cm4gZmFsc2UgaWYgaXQgaXMgbm90IGEgcmVzb3Vy\nY2UKICAgICAqIHRoaXMgcHJvdmlkZXIgdW5kZXJzdGFuZHMuIFRoZSBnaXZl\nbiBjbGFzcyBsb2FkZXIgbWF5IGJlIG51bGwuCiAgICAgKgogICAgICogQHBh\ncmFtIGFuY2hvciBvcHRpb25hbCBuYW1lZCBhbmNob3Igd2l0aGluIGEgbXVs\ndGlwbGUtY29uZmlndXJhdGlvbgogICAgICogcmVzb3VyY2UKICAgICAqLwog\nICAgcHVibGljIHN0YXRpYyBDb25maWd1cmF0aW9uUHJvdmlkZXIgbG9hZChT\ndHJpbmcgcmVzb3VyY2UsIFN0cmluZyBhbmNob3IsIAogICAgICAgIENsYXNz\nTG9hZGVyIGxvYWRlcikgewogICAgICAgIGlmIChTdHJpbmdVdGlscy5pc0Vt\ncHR5KHJlc291cmNlKSkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAg\nICAgaWYgKGxvYWRlciA9PSBudWxsKQogICAgICAgICAgICBsb2FkZXIgPSBU\naHJlYWQuY3VycmVudFRocmVhZCgpLmdldENvbnRleHRDbGFzc0xvYWRlcigp\nOwogICAgICAgIENvbmZpZ3VyYXRpb25Qcm92aWRlciBwcm92aWRlciA9IG51\nbGw7CiAgICAgICAgU3RyaW5nQnVmZmVyIGVycnMgPSBudWxsOwogICAgICAg\nIC8vIG1vc3Qgc3BlY2lmaWMgdG8gbGVhc3QKICAgICAgICBmb3IgKGludCBp\nID0gX2Rlcml2YXRpb25zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAg\nICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBwcm92aWRlciA9IF9k\nZXJpdmF0aW9uc1tpXS5sb2FkKHJlc291cmNlLCBhbmNob3IsIGxvYWRlcik7\nCiAgICAgICAgICAgICAgICBpZiAocHJvdmlkZXIgIT0gbnVsbCkKICAgICAg\nICAgICAgICAgICAgICByZXR1cm4gcHJvdmlkZXI7CiAgICAgICAgICAgIH0g\nY2F0Y2ggKFRocm93YWJsZSB0KSB7CiAgICAgICAgICAgICAgICBlcnJzID0g\nKGVycnMgPT0gbnVsbCkgPyBuZXcgU3RyaW5nQnVmZmVyKCkgOiBlcnJzLmFw\ncGVuZCgiXG4iKTsKICAgICAgICAgICAgICAgIGVycnMuYXBwZW5kKF9kZXJp\ndmF0aW9uc1tpXS5nZXRDbGFzcygpLmdldE5hbWUoKSArICI6IiArIHQpOwog\nICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJlcG9ydEVycm9ycyhl\ncnJzLCByZXNvdXJjZSk7CiAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdSZXNv\ndXJjZUV4Y2VwdGlvbihyZXNvdXJjZSwgCiAgICAgICAgICAgIFByb2R1Y3RE\nZXJpdmF0aW9ucy5jbGFzcy5nZXROYW1lKCksIHJlc291cmNlKTsKICAgIH0K\nCiAgICAvKioKICAgICAqIExvYWQgZ2l2ZW4gZmlsZSwgb3IgcmV0dXJuIGZh\nbHNlIGlmIGl0IGlzIG5vdCBhIGZpbGUgdGhpcyBwcm92aWRlcgogICAgICog\ndW5kZXJzdGFuZHMuCiAgICAgKgogICAgICogQHBhcmFtIGFuY2hvciBvcHRp\nb25hbCBuYW1lZCBhbmNob3Igd2l0aGluIGEgbXVsdGlwbGUtY29uZmlndXJh\ndGlvbiBmaWxlCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgQ29uZmlndXJh\ndGlvblByb3ZpZGVyIGxvYWQoRmlsZSBmaWxlLCBTdHJpbmcgYW5jaG9yLCAK\nICAgICAgICBDbGFzc0xvYWRlciBsb2FkZXIpIHsKICAgICAgICBpZiAoZmls\nZSA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICBp\nZiAobG9hZGVyID09IG51bGwpCiAgICAgICAgICAgIGxvYWRlciA9IFRocmVh\nZC5jdXJyZW50VGhyZWFkKCkuZ2V0Q29udGV4dENsYXNzTG9hZGVyKCk7CiAg\nICAgICAgQ29uZmlndXJhdGlvblByb3ZpZGVyIHByb3ZpZGVyID0gbnVsbDsK\nICAgICAgICBTdHJpbmdCdWZmZXIgZXJycyA9IG51bGw7CiAgICAgICAgLy8g\nbW9zdCBzcGVjaWZpYyB0byBsZWFzdAogICAgICAgIGZvciAoaW50IGkgPSBf\nZGVyaXZhdGlvbnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHByb3ZpZGVyID0gX2Rlcml2\nYXRpb25zW2ldLmxvYWQoZmlsZSwgYW5jaG9yKTsKICAgICAgICAgICAgICAg\nIGlmIChwcm92aWRlciAhPSBudWxsKQogICAgICAgICAgICAgICAgICAgIHJl\ndHVybiBwcm92aWRlcjsKICAgICAgICAgICAgfSBjYXRjaCAoVGhyb3dhYmxl\nIHQpIHsKICAgICAgICAgICAgICAgIGVycnMgPSAoZXJycyA9PSBudWxsKSA/\nIG5ldyBTdHJpbmdCdWZmZXIoKSA6IGVycnMuYXBwZW5kKCJcbiIpOwogICAg\nICAgICAgICAgICAgZXJycy5hcHBlbmQoX2Rlcml2YXRpb25zW2ldLmdldENs\nYXNzKCkuZ2V0TmFtZSgpICsgIjoiICsgdCk7CiAgICAgICAgICAgIH0KICAg\nICAgICB9CiAgICAgICAgcmVwb3J0RXJyb3JzKGVycnMsIGZpbGUuZ2V0QWJz\nb2x1dGVQYXRoKCkpOwogICAgICAgIHRocm93IG5ldyBNaXNzaW5nUmVzb3Vy\nY2VFeGNlcHRpb24oZmlsZS5nZXRBYnNvbHV0ZVBhdGgoKSwgCiAgICAgICAg\nICAgIFByb2R1Y3REZXJpdmF0aW9ucy5jbGFzcy5nZXROYW1lKCksIGZpbGUu\nZ2V0QWJzb2x1dGVQYXRoKCkpOwogICAgfQogICAKICAgIC8qKgogICAgICog\nUmV0dXJuIGEge0BsaW5rIENvbmZpZ3VyYXRpb25Qcm92aWRlcn0gdGhhdCBo\nYXMgcGFyc2VkIHN5c3RlbSBkZWZhdWx0cy4KICAgICAqLwogICAgcHVibGlj\nIHN0YXRpYyBDb25maWd1cmF0aW9uUHJvdmlkZXIgbG9hZERlZmF1bHRzKENs\nYXNzTG9hZGVyIGxvYWRlcikgewogICAgICAgIHJldHVybiBsb2FkKGxvYWRl\nciwgZmFsc2UpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIGEge0Bs\naW5rIENvbmZpZ3VyYXRpb25Qcm92aWRlcn0gdGhhdCBoYXMgcGFyc2VkIHN5\nc3RlbSBnbG9iYWxzLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIENvbmZp\nZ3VyYXRpb25Qcm92aWRlciBsb2FkR2xvYmFscyhDbGFzc0xvYWRlciBsb2Fk\nZXIpIHsKICAgICAgICByZXR1cm4gbG9hZChsb2FkZXIsIHRydWUpOwogICAg\nfQogICAgICAgICAgICAKICAgIC8qKgogICAgICogTG9hZCBhIGJ1aWx0LWlu\nIHJlc291cmNlIGxvY2F0aW9uLgogICAgICovCiAgICBwcml2YXRlIHN0YXRp\nYyBDb25maWd1cmF0aW9uUHJvdmlkZXIgbG9hZChDbGFzc0xvYWRlciBsb2Fk\nZXIsIAogICAgICAgYm9vbGVhbiBnbG9iYWxzKSB7CiAgICAgICAgaWYgKGxv\nYWRlciA9PSBudWxsKQogICAgICAgICAgICBsb2FkZXIgPSBUaHJlYWQuY3Vy\ncmVudFRocmVhZCgpLmdldENvbnRleHRDbGFzc0xvYWRlcigpOwogICAgICAg\nIAogICAgICAgIENvbmZpZ3VyYXRpb25Qcm92aWRlciBwcm92aWRlciA9IG51\nbGw7CiAgICAgICAgU3RyaW5nQnVmZmVyIGVycnMgPSBudWxsOwogICAgICAg\nIFN0cmluZyB0eXBlID0gKGdsb2JhbHMpID8gImdsb2JhbHMiIDogImRlZmF1\nbHRzIjsKICAgICAgICAvLyBtb3N0IHNwZWNpZmljIHRvIGxlYXN0CiAgICAg\nICAgZm9yIChpbnQgaSA9IF9kZXJpdmF0aW9ucy5sZW5ndGggLSAxOyBpID49\nIDA7IGktLSkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAg\ncHJvdmlkZXIgPSAoZ2xvYmFscykgPyBfZGVyaXZhdGlvbnNbaV0ubG9hZEds\nb2JhbHMobG9hZGVyKSAKICAgICAgICAgICAgICAgICAgICA6IF9kZXJpdmF0\naW9uc1tpXS5sb2FkRGVmYXVsdHMobG9hZGVyKTsKICAgICAgICAgICAgICAg\nIGlmIChwcm92aWRlciAhPSBudWxsKQogICAgICAgICAgICAgICAgICAgcmV0\ndXJuIHByb3ZpZGVyOwogICAgICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUg\ndCkgewogICAgICAgICAgICAgICAgZXJycyA9IChlcnJzID09IG51bGwpID8g\nbmV3IFN0cmluZ0J1ZmZlcigpIDogZXJycy5hcHBlbmQoIlxuIik7CiAgICAg\nICAgICAgICAgICBlcnJzLmFwcGVuZChfZGVyaXZhdGlvbnNbaV0uZ2V0Q2xh\nc3MoKS5nZXROYW1lKCkgKyAiOiIgKyB0KTsKICAgICAgICAgICAgfQogICAg\nICAgIH0KICAgICAgICByZXBvcnRFcnJvcnMoZXJycywgdHlwZSk7CiAgICAg\nICAgcmV0dXJuIG51bGw7CiAgICB9CiAKICAgIC8qKgogICAgICogVGhyb3du\nIHByb3BlciBleGNlcHRpb24gZm9yIGdpdmVuIGVycm9ycy4KICAgICAqLwog\nICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCByZXBvcnRFcnJvcnMoU3RyaW5nQnVm\nZmVyIGVycnMsIFN0cmluZyByZXNvdXJjZSkgewogICAgICAgIGlmIChlcnJz\nID09IG51bGwpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB0aHJvdyBu\nZXcgTWlzc2luZ1Jlc291cmNlRXhjZXB0aW9uKGVycnMudG9TdHJpbmcoKSwg\nCiAgICAgICAgICAgIFByb2R1Y3REZXJpdmF0aW9ucy5jbGFzcy5nZXROYW1l\nKCksIHJlc291cmNlKTsKICAgIH0KCiAgICAvKioKICAgICAqIENvbXBhcmUg\ne0BsaW5rIFByb2R1Y3REZXJpdmF0aW9ufXMuCiAgICAgKi8KICAgIHByaXZh\ndGUgc3RhdGljIGNsYXNzIFByb2R1Y3REZXJpdmF0aW9uQ29tcGFyYXRvcgog\nICAgICAgIGltcGxlbWVudHMgQ29tcGFyYXRvciB7CgogICAgICAgIHB1Ymxp\nYyBpbnQgY29tcGFyZShPYmplY3QgbzEsIE9iamVjdCBvMikgewogICAgICAg\nICAgICBpbnQgdHlwZTEgPSAoKFByb2R1Y3REZXJpdmF0aW9uKSBvMSkuZ2V0\nVHlwZSgpOwogICAgICAgICAgICBpbnQgdHlwZTIgPSAoKFByb2R1Y3REZXJp\ndmF0aW9uKSBvMikuZ2V0VHlwZSgpOwogICAgICAgICAgICBpZiAodHlwZTEg\nIT0gdHlwZTIpCiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZTEgLSB0eXBl\nMjsKCiAgICAgICAgICAgIC8vIGFyYml0cmFyeSBidXQgY29uc2lzdGVudCBv\ncmRlcgogICAgICAgICAgICByZXR1cm4gbzEuZ2V0Q2xhc3MoKS5nZXROYW1l\nKCkuY29tcGFyZVRvKG8yLmdldENsYXNzKCkuCiAgICAgICAgICAgICAgICBn\nZXROYW1lKCkpOwoJCX0KCX0KCiAgICAvKioKICAgICAqIFByaW50cyBwcm9k\ndWN0IGRlcml2YXRpb24gaW5mb3JtYXRpb24uCiAgICAgKi8KICAgIHB1Ymxp\nYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHsKICAgICAgICBT\neXN0ZW0uZXJyLnByaW50bG4oZGVyaXZhdGlvbkVycm9yc1RvU3RyaW5nKCkp\nOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIGEgbWVzc2FnZSBhYm91\ndCB0aGUgc3RhdHVzIG9mIGVhY2ggcHJvZHVjdCBkZXJpdmF0aW9uLgogICAg\nICovCiAgICBwcml2YXRlIHN0YXRpYyBTdHJpbmcgZGVyaXZhdGlvbkVycm9y\nc1RvU3RyaW5nKCkgewogICAgICAgIFN0cmluZ0J1ZmZlciBidWYgPSBuZXcg\nU3RyaW5nQnVmZmVyKCk7CiAgICAgICAgYnVmLmFwcGVuZCgiUHJvZHVjdERl\ncml2YXRpb25zOiAiKS5hcHBlbmQoX2Rlcml2YXRpb25OYW1lcy5sZW5ndGgp\nOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX2Rlcml2YXRpb25OYW1l\ncy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBidWYuYXBwZW5kKCJcbiIp\nLmFwcGVuZChpICsgMSkuYXBwZW5kKCIuICIpLgogICAgICAgICAgICAgICAg\nYXBwZW5kKF9kZXJpdmF0aW9uTmFtZXNbaV0pLmFwcGVuZCgiOiAiKTsKICAg\nICAgICAgICAgaWYgKF9kZXJpdmF0aW9uRXJyb3JzW2ldID09IG51bGwpCiAg\nICAgICAgICAgICAgICBidWYuYXBwZW5kKCJPSyIpOwogICAgICAgICAgICBl\nbHNlCiAgICAgICAgICAgICAgICBidWYuYXBwZW5kKF9kZXJpdmF0aW9uRXJy\nb3JzW2ldLnRvU3RyaW5nKCkpOwogICAgICAgIH0KICAgICAgICByZXR1cm4g\nYnVmLnRvU3RyaW5nKCk7CiAgICB9Cn0KCg==\n","encoding":"base64"}

