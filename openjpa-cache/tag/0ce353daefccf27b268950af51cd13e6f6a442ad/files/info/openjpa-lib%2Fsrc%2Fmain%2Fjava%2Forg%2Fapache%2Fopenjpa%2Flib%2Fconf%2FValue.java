{"sha":"f1cef82cca99864b72e7deda40360790f955c86a","node_id":"MDQ6QmxvYjIwNjM2NDpmMWNlZjgyY2NhOTk4NjRiNzJlN2RlZGE0MDM2MDc5MGY5NTVjODZh","size":10560,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/f1cef82cca99864b72e7deda40360790f955c86a","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIuY29uZjsKCmltcG9ydCBqYXZhLnV0aWwuQXJyYXlzOwpp\nbXBvcnQgamF2YS51dGlsLk1hcDsKCmltcG9ydCBvcmcuYXBhY2hlLmNvbW1v\nbnMubGFuZy5TdHJpbmdVdGlsczsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5saWIudXRpbC5Mb2NhbGl6ZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEubGliLnV0aWwuUGFyc2VFeGNlcHRpb247CgovKioKICogQSBjb25maWd1\ncmF0aW9uIHZhbHVlLgogKgogKiBAYXV0aG9yIE1hcmMgUHJ1ZCdob21tZWF1\neAogKi8KcHVibGljIGFic3RyYWN0IGNsYXNzIFZhbHVlIGltcGxlbWVudHMg\nQ2xvbmVhYmxlIHsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmdb\nXSBFTVBUWV9BTElBU0VTID0gbmV3IFN0cmluZ1swXTsKICAgIHByaXZhdGUg\nc3RhdGljIGZpbmFsIExvY2FsaXplciBzX2xvYyA9IExvY2FsaXplci5mb3JQ\nYWNrYWdlKFZhbHVlLmNsYXNzKTsKCiAgICBwcml2YXRlIFN0cmluZyBwcm9w\nID0gbnVsbDsKICAgIHByaXZhdGUgU3RyaW5nIGxvYWRLZXkgPSBudWxsOwog\nICAgcHJpdmF0ZSBTdHJpbmcgZGVmID0gbnVsbDsKICAgIHByaXZhdGUgU3Ry\naW5nW10gYWxpYXNlcyA9IG51bGw7CiAgICBwcml2YXRlIFN0cmluZyBnZXR0\nZXIgPSBudWxsOwogICAgcHJpdmF0ZSBWYWx1ZUxpc3RlbmVyIGxpc3RlbiA9\nIG51bGw7CiAgICBwcml2YXRlIGJvb2xlYW4gYWxpYXNMaXN0Q29tcHJlaGVu\nc2l2ZSA9IGZhbHNlOwogICAgcHJpdmF0ZSBDbGFzcyBzY29wZSA9IG51bGw7\nCgogICAgLyoqCiAgICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yLgogICAgICov\nCiAgICBwdWJsaWMgVmFsdWUoKSB7CiAgICB9CgogICAgLyoqCiAgICAgKiBD\nb25zdHJ1Y3Rvci4gU3VwcGx5IHRoZSBwcm9wZXJ0eSBuYW1lLgogICAgICoK\nICAgICAqIEBzZWUgI3NldFByb3BlcnR5CiAgICAgKi8KICAgIHB1YmxpYyBW\nYWx1ZShTdHJpbmcgcHJvcCkgewogICAgICAgIHNldFByb3BlcnR5KHByb3Ap\nOwogICAgfQoKICAgIC8qKgogICAgICogVGhlIHByb3BlcnR5IG5hbWUgdGhh\ndCB3aWxsIGJlIHVzZWQgd2hlbiBzZXR0aW5nIG9yCiAgICAgKiBnZXR0aW5n\nIHRoaXMgdmFsdWUgaW4gYSB7QGxpbmsgTWFwfS4KICAgICAqLwogICAgcHVi\nbGljIFN0cmluZyBnZXRQcm9wZXJ0eSgpIHsKICAgICAgICByZXR1cm4gcHJv\ncDsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBwcm9wZXJ0eSBuYW1lIHRo\nYXQgd2lsbCBiZSB1c2VkIHdoZW4gc2V0dGluZyBvcgogICAgICogZ2V0dGlu\nZyB0aGlzIHZhbHVlIGluIGEge0BsaW5rIE1hcH0uCiAgICAgKi8KICAgIHB1\nYmxpYyB2b2lkIHNldFByb3BlcnR5KFN0cmluZyBwcm9wKSB7CiAgICAgICAg\ndGhpcy5wcm9wID0gcHJvcDsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBr\nZXkgdW5kZXIgd2hpY2ggdGhpcyB2YWx1ZSB3YXMgbG9hZGVkLCBvciBudWxs\nLgogICAgICovCiAgICBwdWJsaWMgU3RyaW5nIGdldExvYWRLZXkoKSB7CiAg\nICAgICAgcmV0dXJuIGxvYWRLZXk7CiAgICB9CgogICAgLyoqCiAgICAgKiBU\naGUga2V5IHVuZGVyIHdoaWNoIHRoaXMgdmFsdWUgd2FzIGxvYWRlZCwgb3Ig\nbnVsbC4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0TG9hZEtleShTdHJp\nbmcgbG9hZEtleSkgewogICAgICAgIHRoaXMubG9hZEtleSA9IGxvYWRLZXk7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBBbGlhc2VzIGZvciB0aGUgdmFsdWUg\naW4gdGhlIGZvcm0ga2V5MSwgdmFsdWUxLCBrZXkyLCB2YWx1ZTIsIC4uLgog\nICAgICogQWxsIGFsaWFzIHZhbHVlcyBtdXN0IGJlIGluIHN0cmluZyBmb3Jt\nLgogICAgICovCiAgICBwdWJsaWMgU3RyaW5nW10gZ2V0QWxpYXNlcygpIHsK\nICAgICAgICByZXR1cm4gKGFsaWFzZXMgPT0gbnVsbCkgPyBFTVBUWV9BTElB\nU0VTIDogYWxpYXNlczsKICAgIH0KCiAgICAvKioKICAgICAqIEFsaWFzZXMg\nZm9yIHRoZSB2YWx1ZSBpbiB0aGUgZm9ybSBrZXkxLCB2YWx1ZTEsIGtleTIs\nIHZhbHVlMiwgLi4uCiAgICAgKiBBbGwgYWxpYXMgdmFsdWVzIG11c3QgYmUg\naW4gc3RyaW5nIGZvcm0uCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldEFs\naWFzZXMoU3RyaW5nW10gYWxpYXNlcykgewogICAgICAgIHRoaXMuYWxpYXNl\ncyA9IGFsaWFzZXM7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXBsYWNlcyBh\nbiBleGlzdGluZyBhbGlhcywgb3IgYWRkcyB0aGUgZ2l2ZW4gYWxpYXMgdG8g\ndGhlIGZyb250IG9mIHRoZQogICAgICogYWxpYXMgbGlzdCBpZiBpdCBkb2Vz\nIG5vdCBhbHJlYWR5IGV4aXN0LiBBbGwgYWxpYXMgdmFsdWVzIG11c3QgYmUg\naW4KICAgICAqIHN0cmluZyBmb3JtLgogICAgICovCiAgICBwdWJsaWMgdm9p\nZCBzZXRBbGlhcyhTdHJpbmcga2V5LCBTdHJpbmcgdmFsdWUpIHsKICAgICAg\nICBhbGlhc2VzID0gc2V0QWxpYXMoa2V5LCB2YWx1ZSwgYWxpYXNlcyk7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBTZXQgYW4gYWxpYXMgaW50byBhIGN1cnJl\nbnQgYWxpYXMgbGlzdCwgcmV0dXJuaW5nIHRoZSBuZXcgbGlzdC4KICAgICAq\nLwogICAgcHJvdGVjdGVkIFN0cmluZ1tdIHNldEFsaWFzKFN0cmluZyBrZXks\nIFN0cmluZyB2YWx1ZSwgU3RyaW5nW10gYWxpYXNlcykgewogICAgICAgIGlm\nIChhbGlhc2VzID09IG51bGwpCiAgICAgICAgICAgIGFsaWFzZXMgPSBFTVBU\nWV9BTElBU0VTOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgYWxpYXNl\ncy5sZW5ndGg7IGkgKz0gMikgewogICAgICAgICAgICBpZiAoa2V5LmVxdWFs\ncyhhbGlhc2VzW2ldKSkgewogICAgICAgICAgICAgICAgYWxpYXNlc1tpICsg\nMV0gPSB2YWx1ZTsKICAgICAgICAgICAgICAgIHJldHVybiBhbGlhc2VzOwog\nICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBhZGQgYXMgbmV3\nIGFsaWFzCiAgICAgICAgU3RyaW5nW10gbmV3QWxpYXNlcyA9IG5ldyBTdHJp\nbmdbYWxpYXNlcy5sZW5ndGggKyAyXTsKICAgICAgICBTeXN0ZW0uYXJyYXlj\nb3B5KGFsaWFzZXMsIDAsIG5ld0FsaWFzZXMsIDIsIGFsaWFzZXMubGVuZ3Ro\nKTsKICAgICAgICBuZXdBbGlhc2VzWzBdID0ga2V5OwogICAgICAgIG5ld0Fs\naWFzZXNbMV0gPSB2YWx1ZTsKICAgICAgICByZXR1cm4gbmV3QWxpYXNlczsK\nICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIgb3Igbm90IHRoZSBhbGlh\ncyBsaXN0IGRlZmluZXMgYWxsIHBvc3NpYmxlIHNldHRpbmdzIGZvciB0aGlz\nCiAgICAgKiB2YWx1ZS4gSWYgc28sIGFuIGVycm9yIHdpbGwgYmUgZ2VuZXJh\ndGVkIHdoZW4gYXR0ZW1wdGluZyB0byBpbnZva2UKICAgICAqIGFueSBtZXRo\nb2Qgb24gdGhpcyB2YWx1ZSB3aXRoIGFuIHVua25vd24gb3B0aW9uLgogICAg\nICovCiAgICBwdWJsaWMgYm9vbGVhbiBpc0FsaWFzTGlzdENvbXByZWhlbnNp\ndmUoKSB7CiAgICAgICAgcmV0dXJuIGFsaWFzTGlzdENvbXByZWhlbnNpdmU7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVyIG9yIG5vdCB0aGUgYWxp\nYXMgbGlzdCBkZWZpbmVzIGFsbCBwb3NzaWJsZSBzZXR0aW5ncyBmb3IgdGhp\ncwogICAgICogdmFsdWUuIElmIHNvLCBhbiBlcnJvciB3aWxsIGJlIGdlbmVy\nYXRlZCB3aGVuIGF0dGVtcHRpbmcgdG8gaW52b2tlCiAgICAgKiBhbnkgbWV0\naG9kIG9uIHRoaXMgdmFsdWUgd2l0aCBhbiB1bmtub3duIG9wdGlvbi4KICAg\nICAqLwogICAgcHVibGljIHZvaWQgc2V0QWxpYXNMaXN0Q29tcHJlaGVuc2l2\nZShib29sZWFuIGFsaWFzTGlzdElzQ29tcHJlaGVuc2l2ZSkgewogICAgICAg\nIHRoaXMuYWxpYXNMaXN0Q29tcHJlaGVuc2l2ZSA9IGFsaWFzTGlzdElzQ29t\ncHJlaGVuc2l2ZTsKICAgIH0KCiAgICAvKioKICAgICAqIEFsaWFzIHRoZSBn\naXZlbiBzZXR0aW5nLgogICAgICovCiAgICBwdWJsaWMgU3RyaW5nIGFsaWFz\nKFN0cmluZyBzdHIpIHsKICAgICAgICByZXR1cm4gYWxpYXMoc3RyLCBhbGlh\nc2VzLCBmYWxzZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBBbGlhcyB0aGUg\nZ2l2ZW4gc2V0dGluZy4KICAgICAqLwogICAgcHJvdGVjdGVkIFN0cmluZyBh\nbGlhcyhTdHJpbmcgc3RyLCBTdHJpbmdbXSBhbGlhc2VzLCBib29sZWFuIG51\nbGxOb3RGb3VuZCkgewogICAgICAgIGlmIChzdHIgIT0gbnVsbCkKICAgICAg\nICAgICAgc3RyID0gc3RyLnRyaW0oKTsKICAgICAgICBpZiAoYWxpYXNlcyA9\nPSBudWxsIHx8IGFsaWFzZXMubGVuZ3RoID09IDApCiAgICAgICAgICAgIHJl\ndHVybiAobnVsbE5vdEZvdW5kKSA/IG51bGwgOiBzdHI7CgogICAgICAgIGJv\nb2xlYW4gZW1wdHkgPSBzdHIgIT0gbnVsbCAmJiBzdHIubGVuZ3RoKCkgPT0g\nMDsKICAgICAgICBmb3IgKGludCBpID0gMTsgaSA8IGFsaWFzZXMubGVuZ3Ro\nOyBpICs9IDIpCiAgICAgICAgICAgIGlmIChTdHJpbmdVdGlscy5lcXVhbHMo\nc3RyLCBhbGlhc2VzW2ldKQogICAgICAgICAgICAgICAgfHwgKGVtcHR5ICYm\nIGFsaWFzZXNbaV0gPT0gbnVsbCkpCiAgICAgICAgICAgICAgICByZXR1cm4g\nYWxpYXNlc1tpIC0gMV07CiAgICAgICAgcmV0dXJuIChudWxsTm90Rm91bmQp\nID8gbnVsbCA6IHN0cjsKICAgIH0KCiAgICAvKioKICAgICAqIFVuYWxpYXMg\ndGhlIGdpdmVuIHNldHRpbmcuCiAgICAgKi8KICAgIHB1YmxpYyBTdHJpbmcg\ndW5hbGlhcyhTdHJpbmcgc3RyKSB7CiAgICAgICAgcmV0dXJuIHVuYWxpYXMo\nc3RyLCBhbGlhc2VzLCBmYWxzZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBV\nbmFsaWFzIHRoZSBnaXZlbiBzZXR0aW5nLgogICAgICovCiAgICBwcm90ZWN0\nZWQgU3RyaW5nIHVuYWxpYXMoU3RyaW5nIHN0ciwgU3RyaW5nW10gYWxpYXNl\ncywKICAgICAgICBib29sZWFuIG51bGxOb3RGb3VuZCkgewogICAgICAgIGlm\nIChzdHIgIT0gbnVsbCkKICAgICAgICAgICAgc3RyID0gc3RyLnRyaW0oKTsK\nCiAgICAgICAgYm9vbGVhbiBlbXB0eSA9IHN0ciAhPSBudWxsICYmIHN0ci5s\nZW5ndGgoKSA9PSAwOwogICAgICAgIGlmIChzdHIgPT0gbnVsbCB8fCAoZW1w\ndHkgJiYgZGVmICE9IG51bGwpKQogICAgICAgICAgICBzdHIgPSBkZWY7CiAg\nICAgICAgaWYgKGFsaWFzZXMgIT0gbnVsbCkKICAgICAgICAgICAgZm9yIChp\nbnQgaSA9IDA7IGkgPCBhbGlhc2VzLmxlbmd0aDsgaSArPSAyKQogICAgICAg\nICAgICAgICAgaWYgKFN0cmluZ1V0aWxzLmVxdWFscyhzdHIsIGFsaWFzZXNb\naV0pCiAgICAgICAgICAgICAgICAgICAgfHwgU3RyaW5nVXRpbHMuZXF1YWxz\nKHN0ciwgYWxpYXNlc1tpICsgMV0pCiAgICAgICAgICAgICAgICAgICAgfHwg\nKGVtcHR5ICYmIGFsaWFzZXNbaV0gPT0gbnVsbCkpCiAgICAgICAgICAgICAg\nICAgICAgcmV0dXJuIGFsaWFzZXNbaSArIDFdOwoKICAgICAgICBpZiAoaXNB\nbGlhc0xpc3RDb21wcmVoZW5zaXZlKCkgJiYgYWxpYXNlcyAhPSBudWxsKQog\nICAgICAgICAgICB0aHJvdyBuZXcgUGFyc2VFeGNlcHRpb24oc19sb2MuZ2V0\nKCJpbnZhbGlkLWVudW1lcmF0ZWQtY29uZmlnIiwKICAgICAgICAgICAgICAg\nIGdldFByb3BlcnR5KCksIHN0ciwgQXJyYXlzLmFzTGlzdChhbGlhc2VzKSkp\nOwoKICAgICAgICByZXR1cm4gKG51bGxOb3RGb3VuZCkgPyBudWxsIDogc3Ry\nOwogICAgfQoKICAgIC8qKgogICAgICogVGhlIGRlZmF1bHQgdmFsdWUgZm9y\nIHRoZSBwcm9wZXJ0eSBhcyBhIHN0cmluZy4KICAgICAqLwogICAgcHVibGlj\nIFN0cmluZyBnZXREZWZhdWx0KCkgewogICAgICAgIHJldHVybiBkZWY7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBUaGUgZGVmYXVsdCB2YWx1ZSBmb3IgdGhl\nIHByb3BlcnQgYXMgYSBzdHJpbmcuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lk\nIHNldERlZmF1bHQoU3RyaW5nIGRlZikgewogICAgICAgIHRoaXMuZGVmID0g\nZGVmOwogICAgfQoKICAgIC8qKgogICAgICogVGhlIG5hbWUgb2YgdGhlIGdl\ndHRlciBtZXRob2QgZm9yIHRoZSBpbnN0YW50aWF0ZWQgdmFsdWUgb2YgdGhp\ncwogICAgICogcHJvcGVydHkoYXMgb3Bwb3NlZCB0byB0aGUgc3RyaW5nIHZh\nbHVlKQogICAgICovCiAgICBwdWJsaWMgU3RyaW5nIGdldEluc3RhbnRpYXRp\nbmdHZXR0ZXIoKSB7CiAgICAgICAgcmV0dXJuIGdldHRlcjsKICAgIH0KCiAg\nICAvKioKICAgICAqIFRoZSBuYW1lIG9mIHRoZSBnZXR0ZXIgbWV0aG9kIGZv\nciB0aGUgaW5zdGFudGlhdGVkIHZhbHVlIG9mIHRoaXMKICAgICAqIHByb3Bl\ncnR5KGFzIG9wcG9zZWQgdG8gdGhlIHN0cmluZyB2YWx1ZSkuIElmIHRoZSBz\ndHJpbmcgc3RhcnRzIHdpdGgKICAgICAqIDxjb2RlPnRoaXMuPC9jb2RlPiwg\ndGhlbiB0aGUgZ2V0dGVyIHdpbGwgYmUgbG9va2VkIHVwIG9uIHRoZSB2YWx1\nZQogICAgICogaW5zdGFuY2UgaXRzZWxmLiBPdGhlcndpc2UsIHRoZSBnZXR0\nZXIgd2lsbCBiZSBsb29rZWQgdXAgb24gdGhlCiAgICAgKiBjb25maWd1cmF0\naW9uIGluc3RhbmNlLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRJbnN0\nYW50aWF0aW5nR2V0dGVyKFN0cmluZyBnZXR0ZXIpIHsKICAgICAgICB0aGlz\nLmdldHRlciA9IGdldHRlcjsKICAgIH0KCiAgICAvKioKICAgICAqIEEgY2xh\nc3MgZGVmaW5pbmcgdGhlIHNjb3BlIGluIHdoaWNoIHRoaXMgdmFsdWUgaXMg\nZGVmaW5lZC4gVGhpcyB3aWxsCiAgICAgKiBiZSB1c2VkIGJ5IHRoZSBjb25m\naWd1cmF0aW9uIGZyYW1ld29yayB0byBsb29rIHVwIG1ldGFkYXRhIGFib3V0\nCiAgICAgKiB0aGUgdmFsdWUuCiAgICAgKi8KICAgIHB1YmxpYyBDbGFzcyBn\nZXRTY29wZSgpIHsKICAgICAgICByZXR1cm4gc2NvcGU7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBBIGNsYXNzIGRlZmluaW5nIHRoZSBzY29wZSBpbiB3aGlj\naCB0aGlzIHZhbHVlIGlzIGRlZmluZWQuIFRoaXMgd2lsbAogICAgICogYmUg\ndXNlZCBieSB0aGUgY29uZmlndXJhdGlvbiBmcmFtZXdvcmsgdG8gbG9vayB1\ncCBtZXRhZGF0YSBhYm91dAogICAgICogdGhlIHZhbHVlLgogICAgICovCiAg\nICBwdWJsaWMgdm9pZCBzZXRTY29wZShDbGFzcyBjbHMpIHsKICAgICAgICBz\nY29wZSA9IGNsczsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiBhIHN0\ncmluZ2lmaWVkIHZlcnNpb24gb2YgdGhpcyB2YWx1ZS4gSWYgdGhlIGN1cnJl\nbnQgdmFsdWUgaGFzCiAgICAgKiBhIHNob3J0IGFsaWFzIGtleSwgdGhlIGFs\naWFzIGtleSBpcyByZXR1cm5lZC4KICAgICAqLwogICAgcHVibGljIFN0cmlu\nZyBnZXRTdHJpbmcoKSB7CiAgICAgICAgcmV0dXJuIGFsaWFzKGdldEludGVy\nbmFsU3RyaW5nKCkpOwogICAgfQoKICAgIC8qKgogICAgICogU2V0IHRoaXMg\ndmFsdWUgZnJvbSB0aGUgZ2l2ZW4gc3RyaW5nLiBJZiB0aGUgZ2l2ZW4gc3Ry\naW5nIGlzIG51bGwgb3IKICAgICAqIGVtcHR5IGFuZCBhIGRlZmF1bHQgaXMg\nZGVmaW5lZCwgdGhlIGRlZmF1bHQgaXMgdXNlZC4gSWYgdGhlIGdpdmVuCiAg\nICAgKiBzdHJpbmcob3IgZGVmYXVsdCkgaXMgYW4gYWxpYXMga2V5LCBpdCB3\naWxsIGJlIGNvbnZlcnRlZCB0byB0aGUKICAgICAqIGNvcnJlc3BvbmRpbmcg\ndmFsdWUgaW50ZXJuYWxseS4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0\nU3RyaW5nKFN0cmluZyB2YWwpIHsKICAgICAgICBTdHJpbmcgc3RyID0gdW5h\nbGlhcyh2YWwpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHNldEludGVy\nbmFsU3RyaW5nKHN0cik7CiAgICAgICAgfSBjYXRjaCAoUGFyc2VFeGNlcHRp\nb24gcGUpIHsKICAgICAgICAgICAgdGhyb3cgcGU7CiAgICAgICAgfSBjYXRj\naCAoUnVudGltZUV4Y2VwdGlvbiByZSkgewogICAgICAgICAgICB0aHJvdyBu\nZXcgUGFyc2VFeGNlcHRpb24ocHJvcCArICI6ICIgKyB2YWwsIHJlKTsKICAg\nICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQgdGhpcyB2YWx1ZSBh\ncyBhbiBvYmplY3QuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldE9iamVj\ndChPYmplY3Qgb2JqKSB7CiAgICAgICAgLy8gaWYgc2V0dGluZyB0byBudWxs\nIHNldCBhcyBzdHJpbmcgdG8gZ2V0IGRlZmF1bHRzIGludG8gcGxheQogICAg\nICAgIGlmIChvYmogPT0gbnVsbCAmJiBkZWYgIT0gbnVsbCkKICAgICAgICAg\nICAgc2V0U3RyaW5nKG51bGwpOwogICAgICAgIGVsc2UgewogICAgICAgICAg\nICB0cnkgewogICAgICAgICAgICAgICAgc2V0SW50ZXJuYWxPYmplY3Qob2Jq\nKTsKICAgICAgICAgICAgfSBjYXRjaCAoUGFyc2VFeGNlcHRpb24gcGUpIHsK\nICAgICAgICAgICAgICAgIHRocm93IHBlOwogICAgICAgICAgICB9IGNhdGNo\nIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAgICAgICAgICB0aHJv\ndyBuZXcgUGFyc2VFeGNlcHRpb24ocHJvcCArICI6ICIgKyBvYmosIHJlKTsK\nICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAq\nIFJldHVybnMgdGhlIHR5cGUgb2YgdGhlIHByb3BlcnR5IHRoYXQgdGhpcyBW\nYWx1ZSByZXByZXNlbnRzLgogICAgICovCiAgICBwdWJsaWMgYWJzdHJhY3Qg\nQ2xhc3MgZ2V0VmFsdWVUeXBlKCk7CgogICAgLyoqCiAgICAgKiBSZXR1cm4g\ndGhlIGludGVybmFsIHN0cmluZyBmb3JtIG9mIHRoaXMgdmFsdWUuCiAgICAg\nKi8KICAgIHByb3RlY3RlZCBhYnN0cmFjdCBTdHJpbmcgZ2V0SW50ZXJuYWxT\ndHJpbmcoKTsKCiAgICAvKioKICAgICAqIFNldCB0aGlzIHZhbHVlIGZyb20g\ndGhlIGdpdmVuIHN0cmluZy4KICAgICAqLwogICAgcHJvdGVjdGVkIGFic3Ry\nYWN0IHZvaWQgc2V0SW50ZXJuYWxTdHJpbmcoU3RyaW5nIHN0cik7CgogICAg\nLyoqCiAgICAgKiBTZXQgdGhpcyB2YWx1ZSBmcm9tIGFuIG9iamVjdC4KICAg\nICAqLwogICAgcHJvdGVjdGVkIGFic3RyYWN0IHZvaWQgc2V0SW50ZXJuYWxP\nYmplY3QoT2JqZWN0IG9iaik7CgogICAgLyoqCiAgICAgKiBMaXN0ZW5lciBm\nb3IgdmFsdWUgY2hhbmdlcy4KICAgICAqLwogICAgcHVibGljIFZhbHVlTGlz\ndGVuZXIgZ2V0TGlzdGVuZXIoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMubGlz\ndGVuOwogICAgfQoKICAgIC8qKgogICAgICogTGlzdGVuZXIgZm9yIHZhbHVl\nIGNoYW5nZXMuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldExpc3RlbmVy\nKFZhbHVlTGlzdGVuZXIgbGlzdGVuKSB7CiAgICAgICAgdGhpcy5saXN0ZW4g\nPSBsaXN0ZW47CiAgICB9CgogICAgLyoqCiAgICAgKiBTdWJjbGFzc2VzIHNo\nb3VsZCBjYWxsIHRoaXMgbWV0aG9kIHdoZW4gdGhlaXIgaW5lcm5hbCB2YWx1\nZSBjaGFuZ2VzLgogICAgICovCiAgICBwdWJsaWMgdm9pZCB2YWx1ZUNoYW5n\nZWQoKSB7CiAgICAgICAgaWYgKGxpc3RlbiAhPSBudWxsKQogICAgICAgICAg\nICBsaXN0ZW4udmFsdWVDaGFuZ2VkKHRoaXMpOwogICAgfQoKICAgIHB1Ymxp\nYyBpbnQgaGFzaENvZGUoKSB7CiAgICAgICAgU3RyaW5nIHN0ciA9IGdldFN0\ncmluZygpOwogICAgICAgIGludCBzdHJIYXNoID0gKHN0ciA9PSBudWxsKSA/\nIDAgOiBzdHIuaGFzaENvZGUoKTsKICAgICAgICBpbnQgcHJvcEhhc2ggPSAo\ncHJvcCA9PSBudWxsKSA/IDAgOiBwcm9wLmhhc2hDb2RlKCk7CiAgICAgICAg\ncmV0dXJuIHN0ckhhc2ggXiBwcm9wSGFzaDsKICAgIH0KCiAgICBwdWJsaWMg\nYm9vbGVhbiBlcXVhbHMoT2JqZWN0IG90aGVyKSB7CiAgICAgICAgaWYgKG90\naGVyID09IHRoaXMpCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAg\nIGlmICghKG90aGVyIGluc3RhbmNlb2YgVmFsdWUpKQogICAgICAgICAgICBy\nZXR1cm4gZmFsc2U7CgogICAgICAgIFZhbHVlIG8gPSAoVmFsdWUpIG90aGVy\nOwogICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5lcXVhbHMocHJvcCwgby5n\nZXRQcm9wZXJ0eSgpKQogICAgICAgICAgICAmJiBTdHJpbmdVdGlscy5lcXVh\nbHMoZ2V0U3RyaW5nKCksIG8uZ2V0U3RyaW5nKCkpOwogICAgfQoKICAgIHB1\nYmxpYyBPYmplY3QgY2xvbmUoKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgcmV0dXJuIHN1cGVyLmNsb25lKCk7CiAgICAgICAgfSBjYXRjaCAoQ2xv\nbmVOb3RTdXBwb3J0ZWRFeGNlcHRpb24gY25zZSkgewogICAgICAgICAgICBy\nZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

