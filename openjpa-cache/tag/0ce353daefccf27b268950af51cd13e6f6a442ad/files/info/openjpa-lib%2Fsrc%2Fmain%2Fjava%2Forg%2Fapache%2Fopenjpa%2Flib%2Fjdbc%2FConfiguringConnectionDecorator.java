{"sha":"a2494ba77739b29395e714df8db7307b11ff3ad8","node_id":"MDQ6QmxvYjIwNjM2NDphMjQ5NGJhNzc3MzliMjkzOTVlNzE0ZGY4ZGI3MzA3YjExZmYzYWQ4","size":5432,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/a2494ba77739b29395e714df8db7307b11ff3ad8","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIuamRiYzsKCmltcG9ydCBqYXZhLnNxbC5Db25uZWN0aW9u\nOwppbXBvcnQgamF2YS5zcWwuUHJlcGFyZWRTdGF0ZW1lbnQ7CmltcG9ydCBq\nYXZhLnNxbC5TUUxFeGNlcHRpb247CmltcG9ydCBqYXZhLnNxbC5TdGF0ZW1l\nbnQ7CgovKioKICogQ29ubmVjdGlvbiBkZWNvcmF0b3IgdGhhdCBjYW4gY29u\nZmlndXJlIHNvbWUgcHJvcGVydGllcyBvZiB0aGUKICogdW5kZXJseWluZyBj\nb25uZWN0aW9uLiBVbmRlcnN0YW5kcyB0aGUgZm9sbG93aW5nIHByb3BlcnRp\nZXM6CiAqIDx1bD4KICogPGxpPlF1ZXJ5VGltZW91dDwvbGk+CiAqIDxsaT5U\ncmFuc2FjdGlvbklzb2xhdGlvbih7QGxpbmsgQ29ubmVjdGlvbn0gY29uc3Rh\nbnRzKTwvbGk+CiAqIDxsaT5BdXRvQ29tbWl0PC9saT4KICogPC91bD4KICoK\nICogQGF1dGhvciBBYmUgV2hpdGUKICogQG5vamF2YWRvYwogKi8KcHVibGlj\nIGNsYXNzIENvbmZpZ3VyaW5nQ29ubmVjdGlvbkRlY29yYXRvciBpbXBsZW1l\nbnRzIENvbm5lY3Rpb25EZWNvcmF0b3IgewoKICAgIHByaXZhdGUgaW50IF9p\nc29sYXRpb24gPSAtMTsKICAgIHByaXZhdGUgaW50IF9xdWVyeVRpbWVvdXQg\nPSAtMTsKICAgIHByaXZhdGUgQm9vbGVhbiBfYXV0b0NvbW1pdCA9IG51bGw7\nCgogICAgLyoqCiAgICAgKiBUaGUgbnVtYmVyIG9mIHNlY29uZHMgdG8gd2Fp\ndCBmb3IgYSBxdWVyeSB0byBleGVjdXRlIGJlZm9yZQogICAgICogdGVybWlu\nYXRpbmcgaXQuCiAgICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0UXVlcnlUaW1l\nb3V0KCkgewogICAgICAgIHJldHVybiBfcXVlcnlUaW1lb3V0OwogICAgfQoK\nICAgIC8qKgogICAgICogVGhlIG51bWJlciBvZiBzZWNvbmRzIHRvIHdhaXQg\nZm9yIGEgcXVlcnkgdG8gZXhlY3V0ZSBiZWZvcmUKICAgICAqIHRlcm1pbmF0\naW5nIGl0LgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRRdWVyeVRpbWVv\ndXQoaW50IHRpbWVvdXQpIHsKICAgICAgICBfcXVlcnlUaW1lb3V0ID0gdGlt\nZW91dDsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSB0cmFuc2FjdGlvbiBp\nc29sYXRpb24gbGV2ZWwuCiAgICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0VHJh\nbnNhY3Rpb25Jc29sYXRpb24oKSB7CiAgICAgICAgcmV0dXJuIF9pc29sYXRp\nb247CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgdHJhbnNhY3Rpb24gaXNv\nbGF0aW9uIGxldmVsLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRUcmFu\nc2FjdGlvbklzb2xhdGlvbihpbnQgaXNvbGF0aW9uKSB7CiAgICAgICAgX2lz\nb2xhdGlvbiA9IGlzb2xhdGlvbjsKICAgIH0KCiAgICAvKioKICAgICAqIFdo\nZXRoZXIgYXV0byBjb21taXQgc2hvdWxkIGJlIG9uLiBVc2UgbnVsbCB0byBr\nZWVwCiAgICAgKiB0aGUgY29ubmVjdGlvbidzIGRlZmF1bHQgc2V0dGluZy4g\nRGVmYXVsdHMgdG8gbnVsbC4KICAgICAqLwogICAgcHVibGljIEJvb2xlYW4g\nZ2V0QXV0b0NvbW1pdCgpIHsKICAgICAgICByZXR1cm4gX2F1dG9Db21taXQ7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVyIGF1dG8gY29tbWl0IHNo\nb3VsZCBiZSBvbi4gVXNlIG51bGwgdG8ga2VlcAogICAgICogdGhlIGNvbm5l\nY3Rpb24ncyBkZWZhdWx0IHNldHRpbmcuIERlZmF1bHRzIHRvIG51bGwuCiAg\nICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldEF1dG9Db21taXQoQm9vbGVhbiBh\ndXRvQ29tbWl0KSB7CiAgICAgICAgX2F1dG9Db21taXQgPSBhdXRvQ29tbWl0\nOwogICAgfQoKICAgIHB1YmxpYyBDb25uZWN0aW9uIGRlY29yYXRlKENvbm5l\nY3Rpb24gY29ubikgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgaWYg\nKF9pc29sYXRpb24gPT0gQ29ubmVjdGlvbi5UUkFOU0FDVElPTl9OT05FIHx8\nIF9xdWVyeVRpbWVvdXQgIT0gLTEKICAgICAgICAgICAgfHwgX2F1dG9Db21t\naXQgIT0gbnVsbCkKICAgICAgICAgICAgY29ubiA9IG5ldyBDb25maWd1cmlu\nZ0Nvbm5lY3Rpb24oY29ubik7CiAgICAgICAgaWYgKF9pc29sYXRpb24gIT0g\nLTEgJiYgX2lzb2xhdGlvbiAhPSBDb25uZWN0aW9uLlRSQU5TQUNUSU9OX05P\nTkUpCiAgICAgICAgICAgIGNvbm4uc2V0VHJhbnNhY3Rpb25Jc29sYXRpb24o\nX2lzb2xhdGlvbik7CiAgICAgICAgcmV0dXJuIGNvbm47CiAgICB9CgogICAg\nLyoqCiAgICAgKiBEZWNvcmF0b3IgdG8gY29uZmlndXJlIGNvbm5lY3Rpb24g\nY29tcG9uZW50cyBjb3JyZWN0bHkuCiAgICAgKi8KICAgIHByaXZhdGUgY2xh\nc3MgQ29uZmlndXJpbmdDb25uZWN0aW9uIGV4dGVuZHMgRGVsZWdhdGluZ0Nv\nbm5lY3Rpb24gewoKICAgICAgICBwcml2YXRlIGJvb2xlYW4gX2N1ckF1dG9D\nb21taXQgPSBmYWxzZTsKCiAgICAgICAgcHVibGljIENvbmZpZ3VyaW5nQ29u\nbmVjdGlvbihDb25uZWN0aW9uIGNvbm4pIHRocm93cyBTUUxFeGNlcHRpb24g\newogICAgICAgICAgICBzdXBlcihjb25uKTsKICAgICAgICAgICAgaWYgKF9h\ndXRvQ29tbWl0ICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIF9jdXJBdXRv\nQ29tbWl0ID0gQ29uZmlndXJpbmdDb25uZWN0aW9uLnRoaXMuZ2V0QXV0b0Nv\nbW1pdCgpOwogICAgICAgICAgICAgICAgaWYgKF9jdXJBdXRvQ29tbWl0ICE9\nIF9hdXRvQ29tbWl0LmJvb2xlYW5WYWx1ZSgpKQogICAgICAgICAgICAgICAg\nICAgIHNldEF1dG9Db21taXQoX2F1dG9Db21taXQuYm9vbGVhblZhbHVlKCkp\nOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9p\nZCBzZXRBdXRvQ29tbWl0KGJvb2xlYW4gYXV0bykgdGhyb3dzIFNRTEV4Y2Vw\ndGlvbiB7CiAgICAgICAgICAgIGlmIChfaXNvbGF0aW9uICE9IFRSQU5TQUNU\nSU9OX05PTkUpIHsKICAgICAgICAgICAgICAgIHN1cGVyLnNldEF1dG9Db21t\naXQoYXV0byk7CiAgICAgICAgICAgICAgICBfY3VyQXV0b0NvbW1pdCA9IGF1\ndG87CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2\nb2lkIGNvbW1pdCgpIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAg\nICBpZiAoX2lzb2xhdGlvbiAhPSBUUkFOU0FDVElPTl9OT05FKQogICAgICAg\nICAgICAgICAgc3VwZXIuY29tbWl0KCk7CiAgICAgICAgICAgIGlmIChfYXV0\nb0NvbW1pdCAhPSBudWxsCiAgICAgICAgICAgICAgICAmJiBfYXV0b0NvbW1p\ndC5ib29sZWFuVmFsdWUoKSAhPSBfY3VyQXV0b0NvbW1pdCkKICAgICAgICAg\nICAgICAgIHNldEF1dG9Db21taXQoX2F1dG9Db21taXQuYm9vbGVhblZhbHVl\nKCkpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgcm9sbGJhY2so\nKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgaWYgKF9pc29s\nYXRpb24gIT0gVFJBTlNBQ1RJT05fTk9ORSkKICAgICAgICAgICAgICAgIHN1\ncGVyLnJvbGxiYWNrKCk7CiAgICAgICAgICAgIGlmIChfYXV0b0NvbW1pdCAh\nPSBudWxsCiAgICAgICAgICAgICAgICAmJiBfYXV0b0NvbW1pdC5ib29sZWFu\nVmFsdWUoKSAhPSBfY3VyQXV0b0NvbW1pdCkKICAgICAgICAgICAgICAgIHNl\ndEF1dG9Db21taXQoX2F1dG9Db21taXQuYm9vbGVhblZhbHVlKCkpOwogICAg\nICAgIH0KCiAgICAgICAgcHJvdGVjdGVkIFByZXBhcmVkU3RhdGVtZW50IHBy\nZXBhcmVTdGF0ZW1lbnQoU3RyaW5nIHNxbCwgYm9vbGVhbiB3cmFwKQogICAg\nICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgUHJl\ncGFyZWRTdGF0ZW1lbnQgc3RtbnQgPSBzdXBlci5wcmVwYXJlU3RhdGVtZW50\nKHNxbCwgd3JhcCk7CiAgICAgICAgICAgIGlmIChfcXVlcnlUaW1lb3V0ICE9\nIC0xKQogICAgICAgICAgICAgICAgc3RtbnQuc2V0UXVlcnlUaW1lb3V0KF9x\ndWVyeVRpbWVvdXQpOwogICAgICAgICAgICByZXR1cm4gc3RtbnQ7CiAgICAg\nICAgfQoKICAgICAgICBwcm90ZWN0ZWQgUHJlcGFyZWRTdGF0ZW1lbnQgcHJl\ncGFyZVN0YXRlbWVudChTdHJpbmcgc3FsLCBpbnQgcnNUeXBlLAogICAgICAg\nICAgICBpbnQgcnNDb25jdXIsIGJvb2xlYW4gd3JhcCkgdGhyb3dzIFNRTEV4\nY2VwdGlvbiB7CiAgICAgICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bW50\nID0gc3VwZXIucHJlcGFyZVN0YXRlbWVudChzcWwsIHJzVHlwZSwKICAgICAg\nICAgICAgICAgIHJzQ29uY3VyLCB3cmFwKTsKICAgICAgICAgICAgaWYgKF9x\ndWVyeVRpbWVvdXQgIT0gLTEpCiAgICAgICAgICAgICAgICBzdG1udC5zZXRR\ndWVyeVRpbWVvdXQoX3F1ZXJ5VGltZW91dCk7CiAgICAgICAgICAgIHJldHVy\nbiBzdG1udDsKICAgICAgICB9CgogICAgICAgIHByb3RlY3RlZCBTdGF0ZW1l\nbnQgY3JlYXRlU3RhdGVtZW50KGJvb2xlYW4gd3JhcCkgdGhyb3dzIFNRTEV4\nY2VwdGlvbiB7CiAgICAgICAgICAgIFN0YXRlbWVudCBzdG1udCA9IHN1cGVy\nLmNyZWF0ZVN0YXRlbWVudCh3cmFwKTsKICAgICAgICAgICAgaWYgKF9xdWVy\neVRpbWVvdXQgIT0gLTEpCiAgICAgICAgICAgICAgICBzdG1udC5zZXRRdWVy\neVRpbWVvdXQoX3F1ZXJ5VGltZW91dCk7CiAgICAgICAgICAgIHJldHVybiBz\ndG1udDsKICAgICAgICB9CgogICAgICAgIHByb3RlY3RlZCBTdGF0ZW1lbnQg\nY3JlYXRlU3RhdGVtZW50KGludCByc1R5cGUsIGludCByc0NvbmN1ciwKICAg\nICAgICAgICAgYm9vbGVhbiB3cmFwKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsK\nICAgICAgICAgICAgU3RhdGVtZW50IHN0bW50ID0gc3VwZXIuY3JlYXRlU3Rh\ndGVtZW50KHJzVHlwZSwgcnNDb25jdXIsIHdyYXApOwogICAgICAgICAgICBp\nZiAoX3F1ZXJ5VGltZW91dCAhPSAtMSkKICAgICAgICAgICAgICAgIHN0bW50\nLnNldFF1ZXJ5VGltZW91dChfcXVlcnlUaW1lb3V0KTsKICAgICAgICAgICAg\ncmV0dXJuIHN0bW50OwogICAgICAgIH0KICAgIH0KfQo=\n","encoding":"base64"}

