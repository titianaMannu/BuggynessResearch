{"sha":"8b56703dbbdb849175912d365a51cb8aabe7d5e0","node_id":"MDQ6QmxvYjIwNjM2NDo4YjU2NzAzZGJiZGI4NDkxNzU5MTJkMzY1YTUxY2I4YWFiZTdkNWUw","size":3974,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/8b56703dbbdb849175912d365a51cb8aabe7d5e0","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIuamRiYzsKCmltcG9ydCBqYXZhLnNxbC5Db25uZWN0aW9u\nOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIubG9nLkxvZzsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIubG9nLk5vbmVMb2dGYWN0b3J5\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkxvY2FsaXpl\ncjsKCi8qKgogKiBQcm92aWVzIGJhc2ljIGxvZ2dpbmcgZmFjaWxpdGllcyB0\nbyBhIERhdGFTb3VyY2UuCiAqCiAqIEBhdXRob3IgTWFyYyBQcnVkJ2hvbW1l\nYXV4CiAqIEBub2phdmFkb2MKICovCnB1YmxpYyBjbGFzcyBEYXRhU291cmNl\nTG9ncyB7CgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9jYWxpemVyIF9s\nb2MgPQogICAgICAgIExvY2FsaXplci5mb3JQYWNrYWdlKERhdGFTb3VyY2VM\nb2dzLmNsYXNzKTsKCiAgICBwcml2YXRlIExvZyBfamRiY0xvZyA9IG51bGw7\nCiAgICBwcml2YXRlIExvZyBfc3FsTG9nID0gbnVsbDsKCiAgICBwdWJsaWMg\nRGF0YVNvdXJjZUxvZ3MoKSB7CiAgICB9CgogICAgcHVibGljIERhdGFTb3Vy\nY2VMb2dzKExvZyBqZGJjTG9nLCBMb2cgc3FsTG9nKSB7CiAgICAgICAgX2pk\nYmNMb2cgPSBqZGJjTG9nOwogICAgICAgIF9zcWxMb2cgPSBzcWxMb2c7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBUaGUgbG9nIHRvIHdyaXRlIEpEQkMgbWVz\nc2FnZXMgdG8uCiAgICAgKi8KICAgIHB1YmxpYyBMb2cgZ2V0SkRCQ0xvZygp\nIHsKICAgICAgICByZXR1cm4gKF9qZGJjTG9nID09IG51bGwpID8gTm9uZUxv\nZ0ZhY3RvcnkuTm9uZUxvZy5nZXRJbnN0YW5jZSgpCiAgICAgICAgICAgIDog\nX2pkYmNMb2c7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgbG9nIHRvIHdy\naXRlIEpEQkMgbWVzc2FnZXMgdG8uCiAgICAgKi8KICAgIHB1YmxpYyB2b2lk\nIHNldEpEQkNMb2coTG9nIGxvZykgewogICAgICAgIF9qZGJjTG9nID0gbG9n\nOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRydWUgaWYgSkRCQyBs\nb2dnaW5nIGlzIGVuYWJsZWQuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFu\nIGlzSkRCQ0VuYWJsZWQoKSB7CiAgICAgICAgcmV0dXJuIChfamRiY0xvZyAh\nPSBudWxsICYmIF9qZGJjTG9nLmlzVHJhY2VFbmFibGVkKCkpOwogICAgfQoK\nICAgIC8qKgogICAgICogVGhlIGxvZyB0byB3cml0ZSBTUUwgbWVzc2FnZXMg\ndG8uCiAgICAgKi8KICAgIHB1YmxpYyBMb2cgZ2V0U1FMTG9nKCkgewogICAg\nICAgIHJldHVybiAoX3NxbExvZyA9PSBudWxsKSA/IE5vbmVMb2dGYWN0b3J5\nLk5vbmVMb2cuZ2V0SW5zdGFuY2UoKQogICAgICAgICAgICA6IF9zcWxMb2c7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgbG9nIHRvIHdyaXRlIFNRTCBt\nZXNzYWdlcyB0by4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0U1FMTG9n\nKExvZyBsb2cpIHsKICAgICAgICBfc3FsTG9nID0gbG9nOwogICAgfQoKICAg\nIC8qKgogICAgICogUmV0dXJuIHRydWUgaWYgU1FMIGxvZ2dpbmcgaXMgZW5h\nYmxlZC4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gaXNTUUxFbmFibGVk\nKCkgewogICAgICAgIHJldHVybiAoX3NxbExvZyAhPSBudWxsICYmIF9zcWxM\nb2cuaXNUcmFjZUVuYWJsZWQoKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBM\nb2cgYSBKREJDIG1lc3NhZ2Ugb24gYmVoYWxmIG9mIHRoZSBnaXZlbiBjb25u\nZWN0aW9uLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBsb2dKREJDKFN0cmlu\nZyBtc2csIENvbm5lY3Rpb24gY29ubikgewogICAgICAgIGxvZyhtc2csIGNv\nbm4sIF9qZGJjTG9nKTsKICAgIH0KCiAgICAvKioKICAgICAqIExvZyBhIEpE\nQkMgbWVzc2FnZSBvbiBiZWhhbGYgb2YgdGhlIGdpdmVuIGNvbm5lY3Rpb24u\nCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIGxvZ0pEQkMoU3RyaW5nIG1zZywg\nbG9uZyBzdGFydFRpbWUsIENvbm5lY3Rpb24gY29ubikgewogICAgICAgIGxv\nZyhtc2csIGNvbm4sIF9qZGJjTG9nLCBzdGFydFRpbWUpOwogICAgfQoKICAg\nIC8qKgogICAgICogTG9nIGEgU1FMIG1lc3NhZ2Ugb24gYmVoYWxmIG9mIHRo\nZSBnaXZlbiBjb25uZWN0aW9uLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBs\nb2dTUUwoU3RyaW5nIG1zZywgQ29ubmVjdGlvbiBjb25uKSB7CiAgICAgICAg\nbG9nKG1zZywgY29ubiwgX3NxbExvZyk7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBMb2cgYSBTUUwgbWVzc2FnZSBvbiBiZWhhbGYgb2YgdGhlIGdpdmVuIGNv\nbm5lY3Rpb24uCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIGxvZ1NRTChTdHJp\nbmcgbXNnLCBsb25nIHN0YXJ0VGltZSwgQ29ubmVjdGlvbiBjb25uKSB7CiAg\nICAgICAgbG9nKG1zZywgY29ubiwgX3NxbExvZywgc3RhcnRUaW1lKTsKICAg\nIH0KCiAgICAvKioKICAgICAqIExvZyBhIG1lc3NhZ2UgdG8gdGhlIGdpdmVu\nIGxvZ2dlci4KICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCBsb2co\nU3RyaW5nIG1zZywgQ29ubmVjdGlvbiBjb25uLCBMb2cgbG9nKSB7CiAgICAg\nICAgbG9nKG1zZywgY29ubiwgbG9nLCAtMSk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBMb2cgYSBtZXNzYWdlIHRvIHRoZSBnaXZlbiBsb2dnZXIuCiAgICAg\nKi8KICAgIHByaXZhdGUgc3RhdGljIHZvaWQgbG9nKFN0cmluZyBtc2csIENv\nbm5lY3Rpb24gY29ubiwKICAgICAgICBMb2cgbG9nLCBsb25nIHN0YXJ0VGlt\nZSkgewogICAgICAgIGlmIChsb2cgPT0gbnVsbCB8fCAhbG9nLmlzVHJhY2VF\nbmFibGVkKCkpCiAgICAgICAgICAgIHJldHVybjsKCiAgICAgICAgbG9uZyB0\nb3RhbFRpbWUgPSAtMTsKICAgICAgICBpZiAoc3RhcnRUaW1lICE9IC0xKQog\nICAgICAgICAgICB0b3RhbFRpbWUgPSBTeXN0ZW0uY3VycmVudFRpbWVNaWxs\naXMoKSAtIHN0YXJ0VGltZTsKCiAgICAgICAgU3RyaW5nQnVmZmVyIGJ1ZiA9\nIG5ldyBTdHJpbmdCdWZmZXIoMjUgKyBtc2cubGVuZ3RoKCkpOwogICAgICAg\nIGJ1Zi5hcHBlbmQoIjx0ICIpLmFwcGVuZChUaHJlYWQuY3VycmVudFRocmVh\nZCgpLmhhc2hDb2RlKCkpOwogICAgICAgIGlmIChjb25uICE9IG51bGwpCiAg\nICAgICAgICAgIGJ1Zi5hcHBlbmQoIiwgIikuYXBwZW5kKGNvbm4pOwogICAg\nICAgIGJ1Zi5hcHBlbmQoIj4gIik7CgogICAgICAgIC8vIGlmIHRoZSB0aW1l\nICE9IC0xLCBhcHBlbmQgdGltZSBwcm9maWxpbmcgaW5mb3JtYXRpb24KICAg\nICAgICBpZiAodG90YWxUaW1lICE9IC0xKQogICAgICAgICAgICBidWYuYXBw\nZW5kKCJbIikuYXBwZW5kKHRvdGFsVGltZSkuYXBwZW5kKCIgbXNdICIpOwoK\nICAgICAgICBidWYuYXBwZW5kKG1zZyk7CiAgICAgICAgbG9nLnRyYWNlKF9s\nb2MuZ2V0KCJkYXRhc291cmNlLXRyYWNlLWRhdGEiLCBidWYudG9TdHJpbmco\nKSkpOwogICAgfQp9Cgo=\n","encoding":"base64"}

