{"sha":"54329f99cdbca784560ae67d73657987ecee8974","node_id":"MDQ6QmxvYjIwNjM2NDo1NDMyOWY5OWNkYmNhNzg0NTYwYWU2N2Q3MzY1Nzk4N2VjZWU4OTc0","size":7581,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/54329f99cdbca784560ae67d73657987ecee8974","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIuamRiYzsKCmltcG9ydCBqYXZhLnNxbC5Db25uZWN0aW9u\nOwppbXBvcnQgamF2YS5zcWwuUmVzdWx0U2V0OwppbXBvcnQgamF2YS5zcWwu\nU1FMRXhjZXB0aW9uOwppbXBvcnQgamF2YS5zcWwuU1FMV2FybmluZzsKaW1w\nb3J0IGphdmEuc3FsLlN0YXRlbWVudDsKCmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEubGliLnV0aWwuQ2xvc2VhYmxlOwoKLyoqCiAqIFdyYXBwZXIgYXJv\ndW5kIGFuIGV4aXN0aW5nIHN0YXRlbWVudC4gU3ViY2xhc3NlcyBjYW4gb3Zl\ncnJpZGUgdGhlCiAqIG1ldGhvZHMgd2hvc2UgYmVoYXZpb3IgdGhleSBtZWFu\nIHRvIGNoYW5nZS4gVGhlIDxjb2RlPmVxdWFsczwvY29kZT4gYW5kCiAqIDxj\nb2RlPmhhc2hDb2RlPC9jb2RlPiBtZXRob2RzIHBhc3MgdGhyb3VnaCB0byB0\naGUgYmFzZSB1bmRlcmx5aW5nIGRhdGEKICogc3RvcmUgc3RhdGVtZW50Lgog\nKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKi8KcHVibGljIGNsYXNzIERlbGVn\nYXRpbmdTdGF0ZW1lbnQgaW1wbGVtZW50cyBTdGF0ZW1lbnQsIENsb3NlYWJs\nZSB7CgogICAgcHJpdmF0ZSBmaW5hbCBTdGF0ZW1lbnQgX3N0bW50OwogICAg\ncHJpdmF0ZSBmaW5hbCBEZWxlZ2F0aW5nU3RhdGVtZW50IF9kZWw7CiAgICBw\ncml2YXRlIGZpbmFsIENvbm5lY3Rpb24gX2Nvbm47CgogICAgcHVibGljIERl\nbGVnYXRpbmdTdGF0ZW1lbnQoU3RhdGVtZW50IHN0bW50LCBDb25uZWN0aW9u\nIGNvbm4pIHsKICAgICAgICBfY29ubiA9IGNvbm47CiAgICAgICAgX3N0bW50\nID0gc3RtbnQ7CiAgICAgICAgaWYgKHN0bW50IGluc3RhbmNlb2YgRGVsZWdh\ndGluZ1N0YXRlbWVudCkKICAgICAgICAgICAgX2RlbCA9IChEZWxlZ2F0aW5n\nU3RhdGVtZW50KSBzdG1udDsKICAgICAgICBlbHNlCiAgICAgICAgICAgIF9k\nZWwgPSBudWxsOwogICAgfQoKICAgIHByb3RlY3RlZCBSZXN1bHRTZXQgd3Jh\ncFJlc3VsdChSZXN1bHRTZXQgcnMsIGJvb2xlYW4gd3JhcCkgewogICAgICAg\nIGlmICghd3JhcCB8fCBycyA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4g\ncnM7CiAgICAgICAgcmV0dXJuIG5ldyBEZWxlZ2F0aW5nUmVzdWx0U2V0KHJz\nLCB0aGlzKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgd3Jh\ncHBlZCBzdGF0ZW1lbnQuCiAgICAgKi8KICAgIHB1YmxpYyBTdGF0ZW1lbnQg\nZ2V0RGVsZWdhdGUoKSB7CiAgICAgICAgcmV0dXJuIF9zdG1udDsKICAgIH0K\nCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgYmFzZSB1bmRlcmx5aW5nIGRh\ndGEgc3RvcmUgc3RhdGVtZW50LgogICAgICovCiAgICBwdWJsaWMgU3RhdGVt\nZW50IGdldElubmVybW9zdERlbGVnYXRlKCkgewogICAgICAgIHJldHVybiAo\nX2RlbCA9PSBudWxsKSA/IF9zdG1udCA6IF9kZWwuZ2V0SW5uZXJtb3N0RGVs\nZWdhdGUoKTsKICAgIH0KCiAgICBwdWJsaWMgaW50IGhhc2hDb2RlKCkgewog\nICAgICAgIHJldHVybiBnZXRJbm5lcm1vc3REZWxlZ2F0ZSgpLmhhc2hDb2Rl\nKCk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gZXF1YWxzKE9iamVjdCBv\ndGhlcikgewogICAgICAgIGlmIChvdGhlciA9PSB0aGlzKQogICAgICAgICAg\nICByZXR1cm4gdHJ1ZTsKICAgICAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBE\nZWxlZ2F0aW5nU3RhdGVtZW50KQogICAgICAgICAgICBvdGhlciA9ICgoRGVs\nZWdhdGluZ1N0YXRlbWVudCkgb3RoZXIpLmdldElubmVybW9zdERlbGVnYXRl\nKCk7CiAgICAgICAgcmV0dXJuIGdldElubmVybW9zdERlbGVnYXRlKCkuZXF1\nYWxzKG90aGVyKTsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nIHRvU3RyaW5n\nKCkgewogICAgICAgIFN0cmluZ0J1ZmZlciBidWYgPSBuZXcgU3RyaW5nQnVm\nZmVyKCJzdG1udCAiKS5hcHBlbmQoaGFzaENvZGUoKSk7CiAgICAgICAgYXBw\nZW5kSW5mbyhidWYpOwogICAgICAgIHJldHVybiBidWYudG9TdHJpbmcoKTsK\nICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBhcHBlbmRJbmZvKFN0cmluZ0J1\nZmZlciBidWYpIHsKICAgICAgICBpZiAoX2RlbCAhPSBudWxsKQogICAgICAg\nICAgICBfZGVsLmFwcGVuZEluZm8oYnVmKTsKICAgIH0KCiAgICBwdWJsaWMg\nUmVzdWx0U2V0IGV4ZWN1dGVRdWVyeShTdHJpbmcgc3RyKSB0aHJvd3MgU1FM\nRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gZXhlY3V0ZVF1ZXJ5KHN0ciwg\ndHJ1ZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBFeGVjdXRlIHRoZSBxdWVy\neSwgd2l0aCB0aGUgb3B0aW9uIG9mIG5vdCB3cmFwcGluZyBpdCBpbiBhCiAg\nICAgKiB7QGxpbmsgRGVsZWdhdGluZ1Jlc3VsdFNldH0sIHdoaWNoIGlzIHRo\nZSBkZWZhdWx0LgogICAgICovCiAgICBwcm90ZWN0ZWQgUmVzdWx0U2V0IGV4\nZWN1dGVRdWVyeShTdHJpbmcgc3FsLCBib29sZWFuIHdyYXApCiAgICAgICAg\ndGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgUmVzdWx0U2V0IHJzOwog\nICAgICAgIGlmIChfZGVsICE9IG51bGwpCiAgICAgICAgICAgIHJzID0gX2Rl\nbC5leGVjdXRlUXVlcnkoc3FsLCBmYWxzZSk7CiAgICAgICAgZWxzZQogICAg\nICAgICAgICBycyA9IF9zdG1udC5leGVjdXRlUXVlcnkoc3FsKTsKICAgICAg\nICByZXR1cm4gd3JhcFJlc3VsdChycywgd3JhcCk7CiAgICB9CgogICAgcHVi\nbGljIGludCBleGVjdXRlVXBkYXRlKFN0cmluZyBzdHIpIHRocm93cyBTUUxF\neGNlcHRpb24gewogICAgICAgIHJldHVybiBfc3RtbnQuZXhlY3V0ZVVwZGF0\nZShzdHIpOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGV4ZWN1dGUoU3Ry\naW5nIHN0cikgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJu\nIF9zdG1udC5leGVjdXRlKHN0cik7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nY2xvc2UoKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBfc3RtbnQu\nY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgaW50IGdldE1heEZpZWxkU2l6\nZSgpIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBfc3Rt\nbnQuZ2V0TWF4RmllbGRTaXplKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nc2V0TWF4RmllbGRTaXplKGludCBpKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsK\nICAgICAgICBfc3RtbnQuc2V0TWF4RmllbGRTaXplKGkpOwogICAgfQoKICAg\nIHB1YmxpYyBpbnQgZ2V0TWF4Um93cygpIHRocm93cyBTUUxFeGNlcHRpb24g\newogICAgICAgIHJldHVybiBfc3RtbnQuZ2V0TWF4Um93cygpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHNldE1heFJvd3MoaW50IGkpIHRocm93cyBTUUxF\neGNlcHRpb24gewogICAgICAgIF9zdG1udC5zZXRNYXhSb3dzKGkpOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHNldEVzY2FwZVByb2Nlc3NpbmcoYm9vbGVh\nbiBib29sKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBfc3RtbnQu\nc2V0RXNjYXBlUHJvY2Vzc2luZyhib29sKTsKICAgIH0KCiAgICBwdWJsaWMg\naW50IGdldFF1ZXJ5VGltZW91dCgpIHRocm93cyBTUUxFeGNlcHRpb24gewog\nICAgICAgIHJldHVybiBfc3RtbnQuZ2V0UXVlcnlUaW1lb3V0KCk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgc2V0UXVlcnlUaW1lb3V0KGludCBpKSB0aHJv\nd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBfc3RtbnQuc2V0UXVlcnlUaW1l\nb3V0KGkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGNhbmNlbCgpIHRocm93\ncyBTUUxFeGNlcHRpb24gewogICAgICAgIF9zdG1udC5jYW5jZWwoKTsKICAg\nIH0KCiAgICBwdWJsaWMgU1FMV2FybmluZyBnZXRXYXJuaW5ncygpIHRocm93\ncyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBfc3RtbnQuZ2V0V2Fy\nbmluZ3MoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjbGVhcldhcm5pbmdz\nKCkgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgX3N0bW50LmNsZWFy\nV2FybmluZ3MoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRDdXJzb3JO\nYW1lKFN0cmluZyBzdHIpIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAg\nIF9zdG1udC5zZXRDdXJzb3JOYW1lKHN0cik7CiAgICB9CgogICAgcHVibGlj\nIFJlc3VsdFNldCBnZXRSZXN1bHRTZXQoKSB0aHJvd3MgU1FMRXhjZXB0aW9u\nIHsKICAgICAgICByZXR1cm4gZ2V0UmVzdWx0U2V0KHRydWUpOwogICAgfQoK\nICAgIC8qKgogICAgICogR2V0IHRoZSBsYXN0IHJlc3VsdCBzZXQsIHdpdGgg\ndGhlIG9wdGlvbiBvZiBub3Qgd3JhcHBpbmcgaXQgaW4gYQogICAgICoge0Bs\naW5rIERlbGVnYXRpbmdSZXN1bHRTZXR9LCB3aGljaCBpcyB0aGUgZGVmYXVs\ndC4KICAgICAqLwogICAgcHJvdGVjdGVkIFJlc3VsdFNldCBnZXRSZXN1bHRT\nZXQoYm9vbGVhbiB3cmFwKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAg\nICBSZXN1bHRTZXQgcnM7CiAgICAgICAgaWYgKF9kZWwgIT0gbnVsbCkKICAg\nICAgICAgICAgcnMgPSBfZGVsLmdldFJlc3VsdFNldChmYWxzZSk7CiAgICAg\nICAgZWxzZQogICAgICAgICAgICBycyA9IF9zdG1udC5nZXRSZXN1bHRTZXQo\nKTsKICAgICAgICByZXR1cm4gd3JhcFJlc3VsdChycywgd3JhcCk7CiAgICB9\nCgogICAgcHVibGljIGludCBnZXRVcGRhdGVDb3VudCgpIHRocm93cyBTUUxF\neGNlcHRpb24gewogICAgICAgIHJldHVybiBfc3RtbnQuZ2V0VXBkYXRlQ291\nbnQoKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBnZXRNb3JlUmVzdWx0\ncygpIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBfc3Rt\nbnQuZ2V0TW9yZVJlc3VsdHMoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBz\nZXRGZXRjaERpcmVjdGlvbihpbnQgaSkgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7\nCiAgICAgICAgX3N0bW50LnNldEZldGNoRGlyZWN0aW9uKGkpOwogICAgfQoK\nICAgIHB1YmxpYyBpbnQgZ2V0RmV0Y2hEaXJlY3Rpb24oKSB0aHJvd3MgU1FM\nRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gX3N0bW50LmdldEZldGNoRGly\nZWN0aW9uKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0RmV0Y2hTaXpl\nKGludCBpKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBfc3RtbnQu\nc2V0RmV0Y2hTaXplKGkpOwogICAgfQoKICAgIHB1YmxpYyBpbnQgZ2V0RmV0\nY2hTaXplKCkgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJu\nIF9zdG1udC5nZXRGZXRjaFNpemUoKTsKICAgIH0KCiAgICBwdWJsaWMgaW50\nIGdldFJlc3VsdFNldENvbmN1cnJlbmN5KCkgdGhyb3dzIFNRTEV4Y2VwdGlv\nbiB7CiAgICAgICAgcmV0dXJuIF9zdG1udC5nZXRSZXN1bHRTZXRDb25jdXJy\nZW5jeSgpOwogICAgfQoKICAgIHB1YmxpYyBpbnQgZ2V0UmVzdWx0U2V0VHlw\nZSgpIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBfc3Rt\nbnQuZ2V0UmVzdWx0U2V0VHlwZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIGFkZEJhdGNoKFN0cmluZyBzdHIpIHRocm93cyBTUUxFeGNlcHRpb24gewog\nICAgICAgIF9zdG1udC5hZGRCYXRjaChzdHIpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIGNsZWFyQmF0Y2goKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAg\nICAgICBfc3RtbnQuY2xlYXJCYXRjaCgpOwogICAgfQoKICAgIHB1YmxpYyBp\nbnRbXSBleGVjdXRlQmF0Y2goKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAg\nICAgICByZXR1cm4gX3N0bW50LmV4ZWN1dGVCYXRjaCgpOwogICAgfQoKICAg\nIHB1YmxpYyBDb25uZWN0aW9uIGdldENvbm5lY3Rpb24oKSB0aHJvd3MgU1FM\nRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gX2Nvbm47CiAgICB9CgogICAg\nLy8gSkRCQyAzLjAgKHVuc3VwcG9ydGVkKSBtZXRob2QgZm9sbG93OyB0aGVz\nZSBhcmUgcmVxdWlyZWQgdG8gYmUgYWJsZQogICAgLy8gdG8gY29tcGlsZSBh\nZ2FpbnN0IEpESyAxLjQKCiAgICBwdWJsaWMgYm9vbGVhbiBnZXRNb3JlUmVz\ndWx0cyhpbnQgaSkgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgdGhy\nb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9\nCgogICAgcHVibGljIFJlc3VsdFNldCBnZXRHZW5lcmF0ZWRLZXlzKCkgdGhy\nb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9y\ndGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9CgogICAgcHVibGljIGlu\ndCBleGVjdXRlVXBkYXRlKFN0cmluZyBzLCBpbnQgaSkgdGhyb3dzIFNRTEV4\nY2VwdGlvbiB7CiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0\naW9uRXhjZXB0aW9uKCk7CiAgICB9CgogICAgcHVibGljIGludCBleGVjdXRl\nVXBkYXRlKFN0cmluZyBzLCBpbnRbXSBpYSkgdGhyb3dzIFNRTEV4Y2VwdGlv\nbiB7CiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhj\nZXB0aW9uKCk7CiAgICB9CgogICAgcHVibGljIGludCBleGVjdXRlVXBkYXRl\nKFN0cmluZyBzLCBTdHJpbmdbXSBzYSkgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7\nCiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0\naW9uKCk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gZXhlY3V0ZShTdHJp\nbmcgcywgaW50IGkpIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHRo\ncm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwogICAg\nfQoKICAgIHB1YmxpYyBib29sZWFuIGV4ZWN1dGUoU3RyaW5nIHMsIGludFtd\nIGlhKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICB0aHJvdyBuZXcg\nVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsKICAgIH0KCiAgICBw\ndWJsaWMgYm9vbGVhbiBleGVjdXRlKFN0cmluZyBzLCBTdHJpbmdbXSBzYSkg\ndGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgdGhyb3cgbmV3IFVuc3Vw\ncG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9CgogICAgcHVibGlj\nIGludCBnZXRSZXN1bHRTZXRIb2xkYWJpbGl0eSgpIHRocm93cyBTUUxFeGNl\ncHRpb24gewogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlv\nbkV4Y2VwdGlvbigpOwogICAgfQp9\n","encoding":"base64"}

