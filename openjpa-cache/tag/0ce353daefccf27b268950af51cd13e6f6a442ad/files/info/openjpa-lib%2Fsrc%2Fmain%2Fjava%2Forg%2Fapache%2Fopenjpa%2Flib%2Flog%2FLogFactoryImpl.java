{"sha":"e1e5738e579f7afa4d12d2007f82a3fcb4b5139d","node_id":"MDQ6QmxvYjIwNjM2NDplMWU1NzM4ZTU3OWY3YWZhNGQxMmQyMDA3ZjgyYTNmY2I0YjUxMzlk","size":9786,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/e1e5738e579f7afa4d12d2007f82a3fcb4b5139d","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIubG9nOwoKaW1wb3J0IGphdmEuaW8uRmlsZTsKaW1wb3J0\nIGphdmEuaW8uRmlsZU91dHB1dFN0cmVhbTsKaW1wb3J0IGphdmEuaW8uSU9F\neGNlcHRpb247CmltcG9ydCBqYXZhLmlvLlByaW50U3RyZWFtOwppbXBvcnQg\namF2YS5pby5QcmludFdyaXRlcjsKaW1wb3J0IGphdmEuaW8uU3RyaW5nV3Jp\ndGVyOwppbXBvcnQgamF2YS51dGlsLkhhc2hNYXA7CmltcG9ydCBqYXZhLnV0\naWwuSXRlcmF0b3I7CmltcG9ydCBqYXZhLnV0aWwuTWFwOwoKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5HZW5lcmljQ29uZmlndXJhYmxl\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkZpbGVzOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkxvY2FsaXplcjsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5PcHRpb25zOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLmNvbmN1cnJlbnQu\nQ29uY3VycmVudEhhc2hNYXA7CgovKioKICogRGVmYXVsdCB7QGxpbmsgTG9n\nRmFjdG9yeX0gaW1wbGVtZW50YXRpb24uIEZvciBlYXNlIG9mIGF1dG9tYXRp\nYwogKiBjb25maWd1cmF0aW9uLCB0aGlzIGltcGxlbWVudGF0aW9uIGtleXMg\nb24gb25seSB0aGUgbGFzdCBkb3Qtc2VwYXJhdGVkCiAqIHRva2VuIG9mIHRo\nZSBsb2cgY2hhbm5lbCBuYW1lLgogKgogKiBAYXV0aG9yIFBhdHJpY2sgTGlu\nc2tleQogKi8KcHVibGljIGNsYXNzIExvZ0ZhY3RvcnlJbXBsIGltcGxlbWVu\ndHMgTG9nRmFjdG9yeSwgR2VuZXJpY0NvbmZpZ3VyYWJsZSB7CgogICAgcHJp\ndmF0ZSBzdGF0aWMgTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6ZXIuZm9yUGFj\na2FnZShMb2dGYWN0b3J5SW1wbC5jbGFzcyk7CgogICAgcHVibGljIHN0YXRp\nYyBmaW5hbCBTdHJpbmcgVFJBQ0VfU1RSID0gX2xvYy5nZXQoImxvZy10cmFj\nZSIpLmdldE1lc3NhZ2UoKTsKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgU3Ry\naW5nIElORk9fU1RSID0gX2xvYy5nZXQoImxvZy1pbmZvIikuZ2V0TWVzc2Fn\nZSgpOwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgV0FSTl9TVFIg\nPSBfbG9jLmdldCgibG9nLXdhcm4iKS5nZXRNZXNzYWdlKCk7CiAgICBwdWJs\naWMgc3RhdGljIGZpbmFsIFN0cmluZyBFUlJPUl9TVFIgPSBfbG9jLmdldCgi\nbG9nLWVycm9yIikuZ2V0TWVzc2FnZSgpOwogICAgcHVibGljIHN0YXRpYyBm\naW5hbCBTdHJpbmcgRkFUQUxfU1RSID0gX2xvYy5nZXQoImxvZy1mYXRhbCIp\nLmdldE1lc3NhZ2UoKTsKCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmlu\nZyBTVERPVVQgPSAic3Rkb3V0IjsKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwg\nU3RyaW5nIFNUREVSUiA9ICJzdGRlcnIiOwoKICAgIHByaXZhdGUgc3RhdGlj\nIGZpbmFsIFN0cmluZyBORVdMSU5FID0gU3lzdGVtLmdldFByb3BlcnR5KCJs\naW5lLnNlcGFyYXRvciIpOwoKICAgIC8qKgogICAgICogVGhlIHRpbWUgYXQg\nd2hpY2ggdGhpcyBmYWN0b3J5IHdhcyBpbml0aWFsaXplZC4KICAgICAqLwog\nICAgcHJvdGVjdGVkIGZpbmFsIGxvbmcgaW5pdGlhbGl6YXRpb25NaWxsaXM7\nCgogICAgLyoqCiAgICAgKiBUaGUge0BsaW5rIExvZ31zIHRoYXQgdGhpcyBm\nYWN0b3J5IG1hbmFnZXMsIGtleWVkIGJ5IGxvZyBjaGFubmVsIG5hbWUuCiAg\nICAgKi8KICAgIHByaXZhdGUgTWFwIF9sb2dzID0gbmV3IENvbmN1cnJlbnRI\nYXNoTWFwKCk7IC8vIDxTdHJpbmcsTG9nPgoKICAgIC8qKgogICAgICogVGhl\nIGRlZmF1bHQgbG9nZ2luZyBsZXZlbC4KICAgICAqLwogICAgcHJpdmF0ZSBz\naG9ydCBfZGVmYXVsdExvZ0xldmVsID0gTG9nLklORk87CgogICAgLyoqCiAg\nICAgKiBTdG9yYWdlIGZvciBsb2dnaW5nIGxldmVsIGNvbmZpZ3VyYXRpb24g\nc3BlY2lmaWVkIGF0IGNvbmZpZ3VyYXRpb24gdGltZS4KICAgICAqLwogICAg\ncHJpdmF0ZSBNYXAgX2NvbmZpZ3VyZWRMZXZlbHMgPSBuZXcgSGFzaE1hcCgp\nOyAvLyA8U3RyaW5nLEludGVnZXI+CgogICAgLyoqCiAgICAgKiBUaGUgc3Ry\nZWFtIHRvIHdyaXRlIHRvLiBEZWZhdWx0cyB0byBTeXN0ZW0uZXJyLgogICAg\nICovCiAgICBwcml2YXRlIFByaW50U3RyZWFtIF9vdXQgPSBTeXN0ZW0uZXJy\nOwoKICAgIHByaXZhdGUgU3RyaW5nIF9kaWFnQ29udGV4dCA9IG51bGw7Cgog\nICAgcHVibGljIExvZ0ZhY3RvcnlJbXBsKCkgewogICAgICAgIGluaXRpYWxp\nemF0aW9uTWlsbGlzID0gU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCk7CiAg\nICB9CgogICAgcHVibGljIExvZyBnZXRMb2coU3RyaW5nIGNoYW5uZWwpIHsK\nICAgICAgICAvLyBubyBsb2NraW5nOyBvayBpZiBzYW1lIGxvZyBjcmVhdGVk\nIG11bHRpcGxlIHRpbWVzCiAgICAgICAgTG9nSW1wbCBsID0gKExvZ0ltcGwp\nIF9sb2dzLmdldChjaGFubmVsKTsKICAgICAgICBpZiAobCA9PSBudWxsKSB7\nCiAgICAgICAgICAgIGwgPSBuZXdMb2dJbXBsKCk7CiAgICAgICAgICAgIGwu\nc2V0Q2hhbm5lbChjaGFubmVsKTsKICAgICAgICAgICAgU2hvcnQgbHZsID0g\nKFNob3J0KSBfY29uZmlndXJlZExldmVscy5nZXQoc2hvcnRlbihjaGFubmVs\nKSk7CiAgICAgICAgICAgIGwuc2V0TGV2ZWwobHZsID09IG51bGwgPyBfZGVm\nYXVsdExvZ0xldmVsIDogbHZsLnNob3J0VmFsdWUoKSk7CiAgICAgICAgICAg\nIF9sb2dzLnB1dChjaGFubmVsLCBsKTsKICAgICAgICB9CiAgICAgICAgcmV0\ndXJuIGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYSBuZXcgbG9n\nLiBUaGUgbG9nIHdpbGwgYmUgY2FjaGVkLgogICAgICovCiAgICBwcm90ZWN0\nZWQgTG9nSW1wbCBuZXdMb2dJbXBsKCkgewogICAgICAgIHJldHVybiBuZXcg\nTG9nSW1wbCgpOwogICAgfQoKICAgIC8qKgogICAgICogVGhlIHN0cmluZyBu\nYW1lIG9mIHRoZSBkZWZhdWx0IGxldmVsIGZvciB1bmNvbmZpZ3VyZWQgbG9n\nIGNoYW5uZWxzOwogICAgICogdXNlZCBmb3IgYXV0b21hdGljIGNvbmZpZ3Vy\nYXRpb24uCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldERlZmF1bHRMZXZl\nbChTdHJpbmcgbGV2ZWwpIHsKICAgICAgICBfZGVmYXVsdExvZ0xldmVsID0g\nZ2V0TGV2ZWwobGV2ZWwpOwogICAgfQoKICAgIC8qKgogICAgICogVGhlIGRl\nZmF1bHQgbGV2ZWwgZm9yIHVuY29uZmlndXJlZCBsb2cgY2hhbm5lbHMuCiAg\nICAgKi8KICAgIHB1YmxpYyBzaG9ydCBnZXREZWZhdWx0TGV2ZWwoKSB7CiAg\nICAgICAgcmV0dXJuIF9kZWZhdWx0TG9nTGV2ZWw7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBUaGUgZGVmYXVsdCBsZXZlbCBmb3IgdW5jb25maWd1cmVkIGxv\nZyBjaGFubmVscy4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0RGVmYXVs\ndExldmVsKHNob3J0IGxldmVsKSB7CiAgICAgICAgX2RlZmF1bHRMb2dMZXZl\nbCA9IGxldmVsOwogICAgfQoKICAgIC8qKgogICAgICogQSBzdHJpbmcgdG8g\ncHJlZml4IGFsbCBsb2cgbWVzc2FnZXMgd2l0aC4gU2V0IHRvCiAgICAgKiA8\nY29kZT5udWxsPC9jb2RlPiBmb3Igbm8gcHJlZml4LgogICAgICovCiAgICBw\ndWJsaWMgdm9pZCBzZXREaWFnbm9zdGljQ29udGV4dChTdHJpbmcgdmFsKSB7\nCiAgICAgICAgX2RpYWdDb250ZXh0ID0gdmFsOwogICAgfQoKICAgIC8qKgog\nICAgICogQSBzdHJpbmcgdG8gcHJlZml4IGFsbCBsb2cgbWVzc2FnZXMgd2l0\naC4gU2V0IHRvCiAgICAgKiA8Y29kZT5udWxsPC9jb2RlPiBmb3Igbm8gcHJl\nZml4LgogICAgICovCiAgICBwdWJsaWMgU3RyaW5nIGdldERpYWdub3N0aWND\nb250ZXh0KCkgewogICAgICAgIHJldHVybiBfZGlhZ0NvbnRleHQ7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBUaGUgc3RyZWFtIHRvIHdyaXRlIHRvLiBSZWNv\nZ25pemVkIHZhbHVlcyBhcmU6IDxjb2RlPnN0ZG91dDwvY29kZT4KICAgICAq\nIGFuZCA8Y29kZT5zdGRlcnI8L2NvZGU+LiBBbnkgb3RoZXIgdmFsdWUgd2ls\nbCBiZSBjb25zaWRlcmVkIGEgZmlsZSBuYW1lLgogICAgICovCiAgICBwdWJs\naWMgdm9pZCBzZXRGaWxlKFN0cmluZyBmaWxlKSB7CiAgICAgICAgaWYgKFNU\nRE9VVC5lcXVhbHMoZmlsZSkpCiAgICAgICAgICAgIF9vdXQgPSBTeXN0ZW0u\nb3V0OwogICAgICAgIGVsc2UgaWYgKFNUREVSUi5lcXVhbHMoZmlsZSkpCiAg\nICAgICAgICAgIF9vdXQgPSBTeXN0ZW0uZXJyOwogICAgICAgIGVsc2Ugewog\nICAgICAgICAgICBGaWxlIGYgPSBGaWxlcy5nZXRGaWxlKGZpbGUsIG51bGwp\nOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgX291dCA9IG5l\ndyBQcmludFN0cmVhbShuZXcgRmlsZU91dHB1dFN0cmVhbQogICAgICAgICAg\nICAgICAgICAgIChmLmdldENhbm9uaWNhbFBhdGgoKSwgdHJ1ZSkpOwogICAg\nICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBpb2UpIHsKICAgICAgICAg\nICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oX2xv\nYy5nZXQoImxvZy1iYWQtZmlsZSIsCiAgICAgICAgICAgICAgICAgICAgZmls\nZSkgKyAiICIgKyBpb2UudG9TdHJpbmcoKSk7CiAgICAgICAgICAgIH0KICAg\nICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgc3RyZWFtIHRvIHdy\naXRlIHRvLgogICAgICovCiAgICBwdWJsaWMgUHJpbnRTdHJlYW0gZ2V0U3Ry\nZWFtKCkgewogICAgICAgIHJldHVybiBfb3V0OwogICAgfQoKICAgIC8qKgog\nICAgICogVGhlIHN0cmVhbSB0byB3cml0ZSB0by4KICAgICAqLwogICAgcHVi\nbGljIHZvaWQgc2V0U3RyZWFtKFByaW50U3RyZWFtIHN0cmVhbSkgewogICAg\nICAgIGlmIChzdHJlYW0gPT0gbnVsbCkKICAgICAgICAgICAgdGhyb3cgbmV3\nIE51bGxQb2ludGVyRXhjZXB0aW9uKCJzdHJlYW0gPT0gbnVsbCIpOwogICAg\nICAgIF9vdXQgPSBzdHJlYW07CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1\ncm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBzcGVjaWZpZWQg\nbG9nIGxldmVsIGNvbnN0YW50LgogICAgICovCiAgICBwdWJsaWMgc3RhdGlj\nIFN0cmluZyBnZXRMZXZlbE5hbWUoc2hvcnQgbGV2ZWwpIHsKICAgICAgICBz\nd2l0Y2ggKGxldmVsKSB7CiAgICAgICAgICAgIGNhc2UgTG9nLlRSQUNFOgog\nICAgICAgICAgICAgICAgcmV0dXJuIFRSQUNFX1NUUjsKICAgICAgICAgICAg\nY2FzZSBMb2cuSU5GTzoKICAgICAgICAgICAgICAgIHJldHVybiBJTkZPX1NU\nUjsKICAgICAgICAgICAgY2FzZSBMb2cuV0FSTjoKICAgICAgICAgICAgICAg\nIHJldHVybiBXQVJOX1NUUjsKICAgICAgICAgICAgY2FzZSBMb2cuRVJST1I6\nCiAgICAgICAgICAgICAgICByZXR1cm4gRVJST1JfU1RSOwogICAgICAgICAg\nICBjYXNlIExvZy5GQVRBTDoKICAgICAgICAgICAgICAgIHJldHVybiBGQVRB\nTF9TVFI7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICBy\nZXR1cm4gX2xvYy5nZXQoImxvZy11bmtub3duIikuZ2V0TWVzc2FnZSgpOwog\nICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYSBzeW1i\nb2xpYyBjb25zdGFudCBmb3IgdGhlIHNwZWNpZmllZCBzdHJpbmcgbGV2ZWwu\nCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgc2hvcnQgZ2V0TGV2ZWwoU3Ry\naW5nIHN0cikgewogICAgICAgIHN0ciA9IHN0ci50b1VwcGVyQ2FzZSgpLnRy\naW0oKTsKICAgICAgICBzaG9ydCB2YWwgPSBUUkFDRV9TVFIuZXF1YWxzKHN0\ncikgPyBMb2cuVFJBQ0UgOgogICAgICAgICAgICBJTkZPX1NUUi5lcXVhbHMo\nc3RyKSA/IExvZy5JTkZPIDoKICAgICAgICAgICAgICAgIFdBUk5fU1RSLmVx\ndWFscyhzdHIpID8gTG9nLldBUk4gOgogICAgICAgICAgICAgICAgICAgIEVS\nUk9SX1NUUi5lcXVhbHMoc3RyKSA/IExvZy5FUlJPUiA6CiAgICAgICAgICAg\nICAgICAgICAgICAgIEZBVEFMX1NUUi5lcXVhbHMoc3RyKSA/IExvZy5GQVRB\nTCA6IC0xOwoKICAgICAgICBpZiAodmFsID09IC0xKQogICAgICAgICAgICB0\naHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uCiAgICAgICAgICAg\nICAgICAoX2xvYy5nZXQoImxvZy1iYWQtY29uc3RhbnQiLCBzdHIpLmdldE1l\nc3NhZ2UoKSk7CgogICAgICAgIHJldHVybiB2YWw7CiAgICB9CgogICAgLy8g\nLS0tLS0tLS0tLSBHZW5lcmljQ29uZmlndXJhYmxlIGltcGxlbWVudGF0aW9u\nIC0tLS0tLS0tLS0KCiAgICBwdWJsaWMgdm9pZCBzZXRJbnRvKE9wdGlvbnMg\nb3B0cykgewogICAgICAgIGlmICghb3B0cy5pc0VtcHR5KCkpIHsKICAgICAg\nICAgICAgTWFwLkVudHJ5IGU7CiAgICAgICAgICAgIGZvciAoSXRlcmF0b3Ig\naXRlciA9IG9wdHMuZW50cnlTZXQoKS5pdGVyYXRvcigpOyBpdGVyLmhhc05l\neHQoKTspIHsKICAgICAgICAgICAgICAgIGUgPSAoTWFwLkVudHJ5KSBpdGVy\nLm5leHQoKTsKICAgICAgICAgICAgICAgIF9jb25maWd1cmVkTGV2ZWxzLnB1\ndChzaG9ydGVuKChTdHJpbmcpIGUuZ2V0S2V5KCkpLAogICAgICAgICAgICAg\nICAgICAgIG5ldyBTaG9ydChnZXRMZXZlbCgoU3RyaW5nKSBlLmdldFZhbHVl\nKCkpKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgb3B0cy5jbGVhcigp\nOwogICAgICAgIH0KICAgIH0KCiAgICBwcml2YXRlIHN0YXRpYyBTdHJpbmcg\nc2hvcnRlbihTdHJpbmcgY2hhbm5lbCkgewogICAgICAgIHJldHVybiBjaGFu\nbmVsLnN1YnN0cmluZyhjaGFubmVsLmxhc3RJbmRleE9mKCcuJykgKyAxKTsK\nICAgIH0KCiAgICAvKioKICAgICAqIEEgc2ltcGxlIGltcGxlbWVudGF0aW9u\nIG9mIHRoZSB7QGxpbmsgTG9nfSBpbnRlcmZhY2UuIFdyaXRlcwogICAgICog\nb3V0cHV0IHRvIHN0ZGVyci4KICAgICAqLwogICAgcHVibGljIGNsYXNzIExv\nZ0ltcGwgZXh0ZW5kcyBBYnN0cmFjdExvZyB7CgogICAgICAgIHByaXZhdGUg\nc2hvcnQgX2xldmVsID0gSU5GTzsKICAgICAgICBwcml2YXRlIFN0cmluZyBf\nY2hhbm5lbDsKCiAgICAgICAgcHJvdGVjdGVkIGJvb2xlYW4gaXNFbmFibGVk\nKHNob3J0IGxldmVsKSB7CiAgICAgICAgICAgIHJldHVybiBsZXZlbCA+PSBf\nbGV2ZWw7CiAgICAgICAgfQoKICAgICAgICBwcm90ZWN0ZWQgdm9pZCBsb2co\nc2hvcnQgbGV2ZWwsIFN0cmluZyBtZXNzYWdlLCBUaHJvd2FibGUgdCkgewog\nICAgICAgICAgICBTdHJpbmcgbXNnID0gZm9ybWF0TWVzc2FnZShsZXZlbCwg\nbWVzc2FnZSwgdCk7CiAgICAgICAgICAgIHN5bmNocm9uaXplZCAoX291dCkg\newogICAgICAgICAgICAgICAgX291dC5wcmludChtc2cpOwogICAgICAgICAg\nICB9CiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiBDb252ZXJ0\nIDxjb2RlPm1lc3NhZ2U8L2NvZGU+IGludG8gYSBzdHJpbmcgcmVhZHkgdG8g\nYmUgd3JpdHRlbiB0bwogICAgICAgICAqIHRoZSBsb2cuIFRoZSBzdHJpbmcg\nc2hvdWxkIGluY2x1ZGUgdGhlIHRlcm1pbmF0aW5nIG5ld2xpbmUuCiAgICAg\nICAgICoKICAgICAgICAgKiBAcGFyYW0gdCBtYXkgYmUgbnVsbAogICAgICAg\nICAqLwogICAgICAgIHByb3RlY3RlZCBTdHJpbmcgZm9ybWF0TWVzc2FnZShz\naG9ydCBsZXZlbCwgU3RyaW5nIG1lc3NhZ2UsCiAgICAgICAgICAgIFRocm93\nYWJsZSB0KSB7CiAgICAgICAgICAgIC8vIHdlIHdyaXRlIHRvIGEgU3RyaW5n\nQnVmZmVyIGFuZCB0aGVuIGZsdXNoIGl0IGFsbCBhdAogICAgICAgICAgICAv\nLyBvbmNlIGFzIGEgc2luZ2xlIGxpbmUsIHNpbmNlIHNvbWUgZW52aXJvbm1l\nbnRzKGUuZy4sIEpCb3NzKQogICAgICAgICAgICAvLyBvdmVycmlkZSB0aGUg\nU3lzdGVtIG91dHB1dCBzdHJlYW0gdG8gZmx1c2ggYW55IGNhbGxzCiAgICAg\nICAgICAgIC8vIHRvIHdyaXRlIHdpdGhvdXQgcmVnYXJkIHRvIGxpbmUgYnJl\nYWtzLCBtYWtpbmcgdGhlCiAgICAgICAgICAgIC8vIG91dHB1dCBpbmNvbXBy\nZWhlbnNpYmUuCiAgICAgICAgICAgIFN0cmluZ0J1ZmZlciBidWYgPSBuZXcg\nU3RyaW5nQnVmZmVyKCk7CgogICAgICAgICAgICBidWYuYXBwZW5kKGdldE9m\nZnNldCgpKTsKICAgICAgICAgICAgYnVmLmFwcGVuZCgiICAiKTsKICAgICAg\nICAgICAgaWYgKF9kaWFnQ29udGV4dCAhPSBudWxsKQogICAgICAgICAgICAg\nICAgYnVmLmFwcGVuZChfZGlhZ0NvbnRleHQpLmFwcGVuZCgiICAiKTsKICAg\nICAgICAgICAgYnVmLmFwcGVuZChnZXRMZXZlbE5hbWUobGV2ZWwpKTsKICAg\nICAgICAgICAgaWYgKGxldmVsID09IElORk8gfHwgbGV2ZWwgPT0gV0FSTikK\nICAgICAgICAgICAgICAgIGJ1Zi5hcHBlbmQoIiAiKTsKICAgICAgICAgICAg\nYnVmLmFwcGVuZCgiICBbIik7CiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoVGhy\nZWFkLmN1cnJlbnRUaHJlYWQoKS5nZXROYW1lKCkpOwogICAgICAgICAgICBi\ndWYuYXBwZW5kKCJdICIpOwogICAgICAgICAgICBidWYuYXBwZW5kKF9jaGFu\nbmVsKTsKICAgICAgICAgICAgYnVmLmFwcGVuZCgiIC0gIik7CiAgICAgICAg\nICAgIGJ1Zi5hcHBlbmQobWVzc2FnZSk7CiAgICAgICAgICAgIGJ1Zi5hcHBl\nbmQoTkVXTElORSk7CgogICAgICAgICAgICBpZiAodCAhPSBudWxsKSB7CiAg\nICAgICAgICAgICAgICBTdHJpbmdXcml0ZXIgc3dyaXRlciA9IG5ldyBTdHJp\nbmdXcml0ZXIoKTsKICAgICAgICAgICAgICAgIFByaW50V3JpdGVyIHB3cml0\nZXIgPSBuZXcgUHJpbnRXcml0ZXIoc3dyaXRlcik7CiAgICAgICAgICAgICAg\nICB0LnByaW50U3RhY2tUcmFjZShwd3JpdGVyKTsKICAgICAgICAgICAgICAg\nIHB3cml0ZXIuZmx1c2goKTsKICAgICAgICAgICAgICAgIGJ1Zi5hcHBlbmQo\nc3dyaXRlci50b1N0cmluZygpKTsKICAgICAgICAgICAgfQogICAgICAgICAg\nICByZXR1cm4gYnVmLnRvU3RyaW5nKCk7CiAgICAgICAgfQoKICAgICAgICBw\ncml2YXRlIGxvbmcgZ2V0T2Zmc2V0KCkgewogICAgICAgICAgICByZXR1cm4g\nU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCkgLSBpbml0aWFsaXphdGlvbk1p\nbGxpczsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHNldENoYW5u\nZWwoU3RyaW5nIHZhbCkgewogICAgICAgICAgICBfY2hhbm5lbCA9IHZhbDsK\nICAgICAgICB9CgogICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0Q2hhbm5lbCgp\nIHsKICAgICAgICAgICAgcmV0dXJuIF9jaGFubmVsOwogICAgICAgIH0KCiAg\nICAgICAgcHVibGljIHZvaWQgc2V0TGV2ZWwoc2hvcnQgdmFsKSB7CiAgICAg\nICAgICAgIF9sZXZlbCA9IHZhbDsKICAgICAgICB9CgogICAgICAgIHB1Ymxp\nYyBzaG9ydCBnZXRMZXZlbCgpIHsKICAgICAgICAgICAgcmV0dXJuIF9sZXZl\nbDsKICAgICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

