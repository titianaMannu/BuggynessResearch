{"sha":"a3aaa6a2ae001f62242a0be14dac486c715c2ee6","node_id":"MDQ6QmxvYjIwNjM2NDphM2FhYTZhMmFlMDAxZjYyMjQyYTBiZTE0ZGFjNDg2YzcxNWMyZWU2","size":6083,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/a3aaa6a2ae001f62242a0be14dac486c715c2ee6","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIubWV0YTsKCmltcG9ydCBqYXZhLmlvLkZpbGU7CmltcG9y\ndCBqYXZhLmlvLklPRXhjZXB0aW9uOwppbXBvcnQgamF2YS5pby5JbnB1dFN0\ncmVhbTsKaW1wb3J0IGphdmEubmV0LlVSTDsKaW1wb3J0IGphdmEubmV0LlVS\nTERlY29kZXI7CmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0OwppbXBvcnQg\namF2YS51dGlsLkNvbGxlY3Rpb25zOwppbXBvcnQgamF2YS51dGlsLkVudW1l\ncmF0aW9uOwppbXBvcnQgamF2YS51dGlsLkxpc3Q7CmltcG9ydCBqYXZhLnV0\naWwuTm9TdWNoRWxlbWVudEV4Y2VwdGlvbjsKCmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEubGliLnV0aWwuTXVsdGlDbGFzc0xvYWRlcjsKaW1wb3J0IHNl\ncnAudXRpbC5TdHJpbmdzOwoKLyoqCiAqIEl0ZXJhdG9yIG92ZXIgYWxsIG1l\ndGFkYXRhIHJlc291cmNlcyB0aGF0IG1pZ2h0IGNvbnRhaW4gdGhlCiAqIG1l\ndGFkYXRhIGZvciBhIGdpdmVuIGNsYXNzLCBzdGFydGluZyB3aXRoIHRoZSBt\nb3N0IGdlbmVyYWwuIEFzc3VtZXMgdGhhdAogKiBwYWNrYWdlLWxldmVsIHJl\nc291cmNlcyBhcmUgbmFtZWQgInBhY2thZ2UuJmx0O3N1ZmZpeCZndDsiLgog\nKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKiBAbm9qYXZhZG9jCiAqLwpwdWJs\naWMgY2xhc3MgQ2xhc3NNZXRhRGF0YUl0ZXJhdG9yIGltcGxlbWVudHMgTWV0\nYURhdGFJdGVyYXRvciB7CgogICAgcHJpdmF0ZSBmaW5hbCBDbGFzc0xvYWRl\nciBfbG9hZGVyOwogICAgcHJpdmF0ZSBmaW5hbCBMaXN0IF9sb2NzOwogICAg\ncHJpdmF0ZSBpbnQgX2xvYyA9IC0xOwogICAgcHJpdmF0ZSBmaW5hbCBMaXN0\nIF91cmxzID0gbmV3IEFycmF5TGlzdCgzKTsKICAgIHByaXZhdGUgaW50IF91\ncmwgPSAtMTsKCiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yOyBzdXBwbHkg\ndGhlIGNsYXNzIHdob3NlIG1ldGFkYXRhIHRvIGZpbmQsIHRoZSBzdWZmaXgK\nICAgICAqIG9mIG1ldGFkYXRhIGZpbGVzLCBhbmQgd2hldGhlciB0byBwYXJz\nZSB0b3AtZG93biBvciBib3R0b20tdXAuCiAgICAgKi8KICAgIHB1YmxpYyBD\nbGFzc01ldGFEYXRhSXRlcmF0b3IoQ2xhc3MgY2xzLCBTdHJpbmcgc3VmZml4\nLCBib29sZWFuIHRvcERvd24pIHsKICAgICAgICB0aGlzKGNscywgc3VmZml4\nLCBudWxsLCB0b3BEb3duKTsKICAgIH0KCiAgICAvKioKICAgICAqIENvbnN0\ncnVjdG9yOyBzdXBwbHkgdGhlIGNsYXNzIHdob3NlIG1ldGFkYXRhIHRvIGZp\nbmQsIHRoZSBzdWZmaXgKICAgICAqIG9mIG1ldGFkYXRhIGZpbGVzLCBhbmQg\nd2hldGhlciB0byBwYXJzZSB0b3AtZG93biBvciBib3R0b20tdXAuCiAgICAg\nKi8KICAgIHB1YmxpYyBDbGFzc01ldGFEYXRhSXRlcmF0b3IoQ2xhc3MgY2xz\nLCBTdHJpbmcgc3VmZml4LCBDbGFzc0xvYWRlciBsb2FkZXIsCiAgICAgICAg\nYm9vbGVhbiB0b3BEb3duKSB7CiAgICAgICAgLy8gc2tpcCBjbGFzc2VzIHRo\nYXQgY2FuJ3QgaGF2ZSBtZXRhZGF0YQogICAgICAgIGlmIChjbHMgIT0gbnVs\nbCAmJiAoY2xzLmlzUHJpbWl0aXZlKCkKICAgICAgICAgICAgfHwgY2xzLmdl\ndE5hbWUoKS5zdGFydHNXaXRoKCJqYXZhLiIpCiAgICAgICAgICAgIHx8IGNs\ncy5nZXROYW1lKCkuc3RhcnRzV2l0aCgiamF2YXguIikpKSB7CiAgICAgICAg\nICAgIF9sb2FkZXIgPSBudWxsOwogICAgICAgICAgICBfbG9jcyA9IENvbGxl\nY3Rpb25zLkVNUFRZX0xJU1Q7CiAgICAgICAgICAgIHJldHVybjsKICAgICAg\nICB9CgogICAgICAgIGlmIChsb2FkZXIgPT0gbnVsbCkgewogICAgICAgICAg\nICBNdWx0aUNsYXNzTG9hZGVyIG11bHRpID0gbmV3IE11bHRpQ2xhc3NMb2Fk\nZXIoKTsKICAgICAgICAgICAgbXVsdGkuYWRkQ2xhc3NMb2FkZXIobXVsdGku\nU1lTVEVNX0xPQURFUik7CiAgICAgICAgICAgIG11bHRpLmFkZENsYXNzTG9h\nZGVyKG11bHRpLlRIUkVBRF9MT0FERVIpOwogICAgICAgICAgICBtdWx0aS5h\nZGRDbGFzc0xvYWRlcihnZXRDbGFzcygpLmdldENsYXNzTG9hZGVyKCkpOwog\nICAgICAgICAgICBpZiAoY2xzICE9IG51bGwgJiYgY2xzLmdldENsYXNzTG9h\nZGVyKCkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIG11bHRpLmFkZENsYXNz\nTG9hZGVyKGNscy5nZXRDbGFzc0xvYWRlcigpKTsKICAgICAgICAgICAgbG9h\nZGVyID0gbXVsdGk7CiAgICAgICAgfQogICAgICAgIF9sb2FkZXIgPSBsb2Fk\nZXI7CgogICAgICAgIC8vIGNvbGxlY3QgdGhlIHNldCBvZiBhbGwgcG9zc2li\nbGUgbWV0YWRhdGEgbG9jYXRpb25zOyBzdGFydCB3aXRoCiAgICAgICAgLy8g\nc3lzdGVtIGxvY2F0aW9ucwogICAgICAgIF9sb2NzID0gbmV3IEFycmF5TGlz\ndCgpOwogICAgICAgIF9sb2NzLmFkZCgiTUVUQS1JTkYvcGFja2FnZSIgKyBz\ndWZmaXgpOwogICAgICAgIF9sb2NzLmFkZCgiV0VCLUlORi9wYWNrYWdlIiAr\nIHN1ZmZpeCk7CiAgICAgICAgX2xvY3MuYWRkKCJwYWNrYWdlIiArIHN1ZmZp\neCk7CgogICAgICAgIC8vIHB1dCB0aGlzIGxlZ2FjeSBsb2NhdGlvbiBhdCB0\naGUgZW5kIHJlZ2FyZGxlc3Mgb2Ygd2hldGhlciB3ZSdyZQogICAgICAgIC8v\nIGdvaW5nIHRvcCBkb3duIG9yIGJvdHRvbSB1cCBzbyB3ZSBkb24ndCBoYXZl\nIHRvIHBhcnNlIGl0IGFzIG9mdGVuCiAgICAgICAgLy8gZHVyaW5nIHRlc3Rp\nbmcKICAgICAgICBpZiAoIXRvcERvd24pCiAgICAgICAgICAgIF9sb2NzLmFk\nZCgic3lzdGVtIiArIHN1ZmZpeCk7CgogICAgICAgIGlmIChjbHMgIT0gbnVs\nbCkgewogICAgICAgICAgICAvLyBhbHNvIGNoZWNrOgogICAgICAgICAgICAv\nLyAxLiBmb3IgZWFjaCBwYWNrYWdlIGZyb20gdGhlIHRvcCBkb3duIHRvIGNs\ncycgcGFja2FnZToKICAgICAgICAgICAgLy8gPHBhdGg+L3BhY2thZ2U8c3Vm\nZml4PgogICAgICAgICAgICAvLyA8cGF0aD4vPHBhY2thZ2UtbmFtZT48c3Vm\nZml4PiAobGVnYWN5IHN1cHBvcnQpCiAgICAgICAgICAgIC8vIDxwYXRoPi8u\nLi88cGFja2FnZS1uYW1lPjxzdWZmaXg+IChsZWdhY3kgc3VwcG9ydCkKICAg\nICAgICAgICAgLy8gMi4gPHBhdGg+LzxjbGFzcy1uYW1lPjxzdWZmaXg+CiAg\nICAgICAgICAgIFN0cmluZyBwa2cgPSBTdHJpbmdzLmdldFBhY2thZ2VOYW1l\nKGNscykucmVwbGFjZSgnLicsICcvJyk7CiAgICAgICAgICAgIGlmIChwa2cu\nbGVuZ3RoKCkgPiAwKSB7CiAgICAgICAgICAgICAgICBpbnQgaWR4LCBzdGFy\ndCA9IDA7CiAgICAgICAgICAgICAgICBTdHJpbmcgcGtnTmFtZSwgcGF0aCwg\ndXBQYXRoID0gIiI7CiAgICAgICAgICAgICAgICBkbyB7CiAgICAgICAgICAg\nICAgICAgICAgaWR4ID0gcGtnLmluZGV4T2YoJy8nLCBzdGFydCk7CiAgICAg\nICAgICAgICAgICAgICAgaWYgKGlkeCA9PSAtMSkgewogICAgICAgICAgICAg\nICAgICAgICAgICBwa2dOYW1lID0gKHN0YXJ0ID09IDApID8gcGtnIDogcGtn\nLnN1YnN0cmluZyhzdGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHBh\ndGggPSBwa2cgKyAiLyI7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsK\nICAgICAgICAgICAgICAgICAgICAgICAgcGtnTmFtZSA9IHBrZy5zdWJzdHJp\nbmcoc3RhcnQsIGlkeCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGgg\nPSBwa2cuc3Vic3RyaW5nKDAsIGlkeCArIDEpOwogICAgICAgICAgICAgICAg\nICAgIH0KCiAgICAgICAgICAgICAgICAgICAgX2xvY3MuYWRkKHBhdGggKyAi\ncGFja2FnZSIgKyBzdWZmaXgpOwogICAgICAgICAgICAgICAgICAgIF9sb2Nz\nLmFkZChwYXRoICsgcGtnTmFtZSArIHN1ZmZpeCk7IC8vIGxlZ2FjeQogICAg\nICAgICAgICAgICAgICAgIF9sb2NzLmFkZCh1cFBhdGggKyBwa2dOYW1lICsg\nc3VmZml4KTsgLy8gbGVnYWN5CiAgICAgICAgICAgICAgICAgICAgaWYgKGlk\neCA9PSAtMSkKICAgICAgICAgICAgICAgICAgICAgICAgX2xvY3MuYWRkKHBh\ndGggKyBTdHJpbmdzLmdldENsYXNzTmFtZShjbHMpICsgc3VmZml4KTsKCiAg\nICAgICAgICAgICAgICAgICAgc3RhcnQgPSBpZHggKyAxOwogICAgICAgICAg\nICAgICAgICAgIHVwUGF0aCA9IHBhdGg7CiAgICAgICAgICAgICAgICB9CiAg\nICAgICAgICAgICAgICB3aGlsZSAoaWR4ICE9IC0xKTsKICAgICAgICAgICAg\nfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIDxjbGFzcy1uYW1lPjxzdWZm\naXg+IGZvciB0b3AtbGV2ZWwgY2xhc3NlcwogICAgICAgICAgICAgICAgX2xv\nY3MuYWRkKGNscy5nZXROYW1lKCkgKyBzdWZmaXgpOwogICAgICAgICAgICB9\nCiAgICAgICAgfQogICAgICAgIGlmICh0b3BEb3duKQogICAgICAgICAgICBf\nbG9jcy5hZGQoInN5c3RlbSIgKyBzdWZmaXgpOyAvLyBsZWdhY3kKICAgICAg\nICBlbHNlCiAgICAgICAgICAgIENvbGxlY3Rpb25zLnJldmVyc2UoX2xvY3Mp\nOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGhhc05leHQoKSB0aHJvd3Mg\nSU9FeGNlcHRpb24gewogICAgICAgIEVudW1lcmF0aW9uIGU7CiAgICAgICAg\nd2hpbGUgKF91cmwgKyAxID49IF91cmxzLnNpemUoKSkgewogICAgICAgICAg\nICBpZiAoKytfbG9jID49IF9sb2NzLnNpemUoKSkKICAgICAgICAgICAgICAg\nIHJldHVybiBmYWxzZTsKCiAgICAgICAgICAgIF91cmwgPSAtMTsKICAgICAg\nICAgICAgX3VybHMuY2xlYXIoKTsKICAgICAgICAgICAgZSA9IF9sb2FkZXIu\nZ2V0UmVzb3VyY2VzKChTdHJpbmcpIF9sb2NzLmdldChfbG9jKSk7CiAgICAg\nICAgICAgIHdoaWxlIChlLmhhc01vcmVFbGVtZW50cygpKQogICAgICAgICAg\nICAgICAgX3VybHMuYWRkKGUubmV4dEVsZW1lbnQoKSk7CiAgICAgICAgfQog\nICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3Qg\nbmV4dCgpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgaWYgKCFoYXNO\nZXh0KCkpCiAgICAgICAgICAgIHRocm93IG5ldyBOb1N1Y2hFbGVtZW50RXhj\nZXB0aW9uKCk7CiAgICAgICAgcmV0dXJuIF91cmxzLmdldCgrK191cmwpOwog\nICAgfQoKICAgIHB1YmxpYyBJbnB1dFN0cmVhbSBnZXRJbnB1dFN0cmVhbSgp\nIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgaWYgKF91cmwgPT0gLTEg\nfHwgX3VybCA+PSBfdXJscy5zaXplKCkpCiAgICAgICAgICAgIHRocm93IG5l\ndyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKTsKICAgICAgICByZXR1cm4gKChV\nUkwpIF91cmxzLmdldChfdXJsKSkub3BlblN0cmVhbSgpOwogICAgfQoKICAg\nIHB1YmxpYyBGaWxlIGdldEZpbGUoKSB0aHJvd3MgSU9FeGNlcHRpb24gewog\nICAgICAgIGlmIChfdXJsID09IC0xIHx8IF91cmwgPj0gX3VybHMuc2l6ZSgp\nKQogICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9u\nKCk7CiAgICAgICAgRmlsZSBmaWxlID0gbmV3IEZpbGUoVVJMRGVjb2Rlci5k\nZWNvZGUoKChVUkwpIF91cmxzLmdldChfdXJsKSkuCiAgICAgICAgICAgIGdl\ndEZpbGUoKSkpOwogICAgICAgIHJldHVybiAoZmlsZS5leGlzdHMoKSkgPyBm\naWxlIDogbnVsbDsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjbG9zZSgpIHsK\nICAgIH0KfQo=\n","encoding":"base64"}

