{"sha":"e496d6d35acda12746fc2b6e99e693080da66151","node_id":"MDQ6QmxvYjIwNjM2NDplNDk2ZDZkMzVhY2RhMTI3NDZmYzJiNmU5OWU2OTMwODBkYTY2MTUx","size":2809,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/e496d6d35acda12746fc2b6e99e693080da66151","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIubWV0YTsKCmltcG9ydCBqYXZhLmlvLkZpbGU7CmltcG9y\ndCBqYXZhLmlvLklPRXhjZXB0aW9uOwppbXBvcnQgamF2YS5pby5JbnB1dFN0\ncmVhbTsKaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7CmltcG9ydCBqYXZh\nLnV0aWwuSXRlcmF0b3I7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKaW1wb3J0\nIGphdmEudXRpbC5Ob1N1Y2hFbGVtZW50RXhjZXB0aW9uOwoKLyoqCiAqIE1l\ndGFkYXRhIGl0ZXJhdG9yIHRoYXQgY29tYmluZXMgc2V2ZXJhbCBpdGVyYXRv\ncnMuCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqIEBub2phdmFkb2MKICov\nCnB1YmxpYyBjbGFzcyBNZXRhRGF0YUl0ZXJhdG9yQ2hhaW4gaW1wbGVtZW50\ncyBNZXRhRGF0YUl0ZXJhdG9yIHsKCiAgICBwcml2YXRlIExpc3QgX2l0cnMg\nPSBudWxsOwogICAgcHJpdmF0ZSBpbnQgX2N1ciA9IC0xOwogICAgcHJpdmF0\nZSBNZXRhRGF0YUl0ZXJhdG9yIF9pdHIgPSBudWxsOwoKICAgIC8qKgogICAg\nICogRGVmYXVsdCBjb25zdHJ1Y3Rvci4KICAgICAqLwogICAgcHVibGljIE1l\ndGFEYXRhSXRlcmF0b3JDaGFpbigpIHsKICAgIH0KCiAgICAvKioKICAgICAq\nIENvbWJpbmUgdHdvIGl0ZXJhdG9ycy4KICAgICAqLwogICAgcHVibGljIE1l\ndGFEYXRhSXRlcmF0b3JDaGFpbihNZXRhRGF0YUl0ZXJhdG9yIGl0cjEsIE1l\ndGFEYXRhSXRlcmF0b3IgaXRyMikgewogICAgICAgIF9pdHJzID0gbmV3IEFy\ncmF5TGlzdCgyKTsKICAgICAgICBfaXRycy5hZGQoaXRyMSk7CiAgICAgICAg\nX2l0cnMuYWRkKGl0cjIpOwogICAgfQoKICAgIC8qKgogICAgICogQWRkIGFu\nIGl0ZXJhdG9yIHRvIHRoZSBjaGFpbi4KICAgICAqLwogICAgcHVibGljIHZv\naWQgYWRkSXRlcmF0b3IoTWV0YURhdGFJdGVyYXRvciBpdHIpIHsKICAgICAg\nICBpZiAoX2N1ciAhPSAtMSkKICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVn\nYWxTdGF0ZUV4Y2VwdGlvbigpOwogICAgICAgIGlmIChfaXRycyA9PSBudWxs\nKQogICAgICAgICAgICBfaXRycyA9IG5ldyBBcnJheUxpc3QoNCk7CiAgICAg\nICAgX2l0cnMuYWRkKGl0cik7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4g\naGFzTmV4dCgpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgaWYgKF9p\ndHJzID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAg\nICBpZiAoX2N1ciA9PSAtMSkKICAgICAgICAgICAgX2N1ciA9IDA7CgogICAg\nICAgIE1ldGFEYXRhSXRlcmF0b3IgaXRyOwogICAgICAgIGZvciAoOyBfY3Vy\nIDwgX2l0cnMuc2l6ZSgpOyBfY3VyKyspIHsKICAgICAgICAgICAgaXRyID0g\nKE1ldGFEYXRhSXRlcmF0b3IpIF9pdHJzLmdldChfY3VyKTsKICAgICAgICAg\nICAgaWYgKGl0ci5oYXNOZXh0KCkpIHsKICAgICAgICAgICAgICAgIF9pdHIg\nPSBpdHI7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAg\nICAgfQogICAgICAgIH0KICAgICAgICBfaXRyID0gbnVsbDsKICAgICAgICBy\nZXR1cm4gZmFsc2U7CiAgICB9CgogICAgcHVibGljIE9iamVjdCBuZXh0KCkg\ndGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICBpZiAoIWhhc05leHQoKSkK\nICAgICAgICAgICAgdGhyb3cgbmV3IE5vU3VjaEVsZW1lbnRFeGNlcHRpb24o\nKTsKICAgICAgICByZXR1cm4gX2l0ci5uZXh0KCk7CiAgICB9CgogICAgcHVi\nbGljIElucHV0U3RyZWFtIGdldElucHV0U3RyZWFtKCkgdGhyb3dzIElPRXhj\nZXB0aW9uIHsKICAgICAgICBpZiAoX2l0ciA9PSBudWxsKQogICAgICAgICAg\nICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKCk7CiAgICAgICAg\ncmV0dXJuIF9pdHIuZ2V0SW5wdXRTdHJlYW0oKTsKICAgIH0KCiAgICBwdWJs\naWMgRmlsZSBnZXRGaWxlKCkgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAg\nICBpZiAoX2l0ciA9PSBudWxsKQogICAgICAgICAgICB0aHJvdyBuZXcgSWxs\nZWdhbFN0YXRlRXhjZXB0aW9uKCk7CiAgICAgICAgcmV0dXJuIF9pdHIuZ2V0\nRmlsZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGNsb3NlKCkgewogICAg\nICAgIGlmIChfaXRycyAhPSBudWxsKQogICAgICAgICAgICBmb3IgKEl0ZXJh\ndG9yIGl0ciA9IF9pdHJzLml0ZXJhdG9yKCk7IGl0ci5oYXNOZXh0KCk7KQog\nICAgICAgICAgICAgICAgKChNZXRhRGF0YUl0ZXJhdG9yKSBpdHIubmV4dCgp\nKS5jbG9zZSgpOwogICAgfQp9Cg==\n","encoding":"base64"}

