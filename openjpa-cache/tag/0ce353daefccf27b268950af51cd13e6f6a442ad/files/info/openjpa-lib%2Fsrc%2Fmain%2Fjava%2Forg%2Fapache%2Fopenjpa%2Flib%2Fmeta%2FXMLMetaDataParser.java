{"sha":"9c3a38feeece442aa6af65ce8dfeb50c99bbb234","node_id":"MDQ6QmxvYjIwNjM2NDo5YzNhMzhmZWVlY2U0NDJhYTZhZjY1Y2U4ZGZlYjUwYzk5YmJiMjM0","size":20071,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/9c3a38feeece442aa6af65ce8dfeb50c99bbb234","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIubWV0YTsKCmltcG9ydCBqYXZhLmlvLkZpbGU7CmltcG9y\ndCBqYXZhLmlvLklPRXhjZXB0aW9uOwppbXBvcnQgamF2YS5pby5JbnB1dFN0\ncmVhbVJlYWRlcjsKaW1wb3J0IGphdmEuaW8uUmVhZGVyOwppbXBvcnQgamF2\nYS5uZXQuVVJMOwppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsKaW1wb3J0\nIGphdmEudXRpbC5Db2xsZWN0aW9uOwppbXBvcnQgamF2YS51dGlsLkNvbGxl\nY3Rpb25zOwppbXBvcnQgamF2YS51dGlsLkhhc2hNYXA7CmltcG9ydCBqYXZh\nLnV0aWwuSGFzaFNldDsKaW1wb3J0IGphdmEudXRpbC5MaW5rZWRMaXN0Owpp\nbXBvcnQgamF2YS51dGlsLkxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuTWFwOwpp\nbXBvcnQgamF2YS51dGlsLlNldDsKaW1wb3J0IGphdmF4LnhtbC5wYXJzZXJz\nLlNBWFBhcnNlcjsKCmltcG9ydCBvcmcueG1sLnNheC5BdHRyaWJ1dGVzOwpp\nbXBvcnQgb3JnLnhtbC5zYXguSW5wdXRTb3VyY2U7CmltcG9ydCBvcmcueG1s\nLnNheC5Mb2NhdG9yOwppbXBvcnQgb3JnLnhtbC5zYXguU0FYRXhjZXB0aW9u\nOwppbXBvcnQgb3JnLnhtbC5zYXguU0FYUGFyc2VFeGNlcHRpb247CmltcG9y\ndCBvcmcueG1sLnNheC5leHQuTGV4aWNhbEhhbmRsZXI7CmltcG9ydCBvcmcu\neG1sLnNheC5oZWxwZXJzLkRlZmF1bHRIYW5kbGVyOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmxpYi5sb2cuTG9nOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmxpYi51dGlsLkphdmFWZXJzaW9uczsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6ZXIuTWVzc2FnZTsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6ZXI7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnhtbC5Db21tZW50YWJsZTsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIueG1sLkRvY1R5cGVSZWFkZXI7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnhtbC5Mb2NhdGlvbjsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIueG1sLlhNTEZhY3Rvcnk7\nCgovKioKICogQ3VzdG9tIFNBWCBwYXJzZXIgdXNlZCBieSB0aGUgc3lzdGVt\nIHRvIHF1aWNrbHkgcGFyc2UgbWV0YWRhdGEgZmlsZXMuCiAqIFN1YmNsYXNz\nZXMgc2hvdWxkIGhhbmRsZSB0aGUgcHJvY2Vzc2luZyBvZiB0aGUgY29udGVu\ndC4KICoKICogQGF1dGhvciBBYmUgV2hpdGUKICogQG5vamF2YWRvYwogKi8K\ncHVibGljIGFic3RyYWN0IGNsYXNzIFhNTE1ldGFEYXRhUGFyc2VyIGV4dGVu\nZHMgRGVmYXVsdEhhbmRsZXIKICAgIGltcGxlbWVudHMgTGV4aWNhbEhhbmRs\nZXIsIE1ldGFEYXRhUGFyc2VyIHsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5h\nbCBMb2NhbGl6ZXIgX2xvYyA9IExvY2FsaXplci5mb3JQYWNrYWdlCiAgICAg\nICAgKFhNTE1ldGFEYXRhUGFyc2VyLmNsYXNzKTsKICAgIHByaXZhdGUgc3Rh\ndGljIGJvb2xlYW4gX3NjaGVtYUJ1ZzsKCiAgICBzdGF0aWMgewogICAgICAg\nIHRyeSB7CiAgICAgICAgICAgIC8vIGNoZWNrIGZvciBYZXJjZXMgdmVyc2lv\nbiAyLjAuMiB0byBzZWUgaWYgd2UgbmVlZCB0byBkaXNhYmxlCiAgICAgICAg\nICAgIC8vIHNjaGVtYSB2YWxpZGF0aW9uLCB3aGljaCB3b3JrcyBhcm91bmQg\ndGhlIGJ1ZyByZXBvcnRlZCBhdDoKICAgICAgICAgICAgLy8gaHR0cDovL2J1\nZ3Muc3VuLmNvbS9idWdkYXRhYmFzZS92aWV3X2J1Zy5kbz9idWdfaWQ9NDcw\nODg1OQogICAgICAgICAgICBfc2NoZW1hQnVnID0gIlhlcmNlcy1KIDIuMC4y\nIi5lcXVhbHMoQ2xhc3MuZm9yTmFtZQogICAgICAgICAgICAgICAgKCJvcmcu\nYXBhY2hlLnhlcmNlcy5pbXBsLlZlcnNpb24iKS5nZXRGaWVsZCgiZlZlcnNp\nb24iKS4KICAgICAgICAgICAgICAgIGdldChudWxsKSk7CiAgICAgICAgfSBj\nYXRjaCAoVGhyb3dhYmxlIHQpIHsKICAgICAgICAgICAgLy8gWGVyY2VzIG1p\nZ2h0IG5vdCBiZSBhdmFpbGFibGUKICAgICAgICAgICAgX3NjaGVtYUJ1ZyA9\nIGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBtYXAgb2YgY2xhc3Ns\nb2FkZXJzIHRvIHNldHMgb2YgcGFyc2VkIGxvY2F0aW9ucywgc28gdGhhdCB3\nZSBkb24ndCBwYXJzZQogICAgLy8gdGhlIHNhbWUgcmVzb3VyY2UgbXVsdGlw\nbGUgdGltZXMgZm9yIHRoZSBzYW1lIGNsYXNzCiAgICBwcml2YXRlIE1hcCBf\ncGFyc2VkID0gbnVsbDsKCiAgICBwcml2YXRlIExvZyBfbG9nID0gbnVsbDsK\nICAgIHByaXZhdGUgYm9vbGVhbiBfdmFsaWRhdGluZyA9IHRydWU7CiAgICBw\ncml2YXRlIGJvb2xlYW4gX3N5c3RlbUlkID0gdHJ1ZTsKICAgIHByaXZhdGUg\nYm9vbGVhbiBfY2FjaGluZyA9IHRydWU7CiAgICBwcml2YXRlIGJvb2xlYW4g\nX3BhcnNlVGV4dCA9IHRydWU7CiAgICBwcml2YXRlIGJvb2xlYW4gX3BhcnNl\nQ29tbWVudHMgPSB0cnVlOwogICAgcHJpdmF0ZSBTdHJpbmcgX3N1ZmZpeCA9\nIG51bGw7CiAgICBwcml2YXRlIENsYXNzTG9hZGVyIF9sb2FkZXIgPSBudWxs\nOwogICAgcHJpdmF0ZSBDbGFzc0xvYWRlciBfY3VyTG9hZGVyID0gbnVsbDsK\nCiAgICAvLyBzdGF0ZSBmb3IgY3VycmVudCBwYXJzZQogICAgcHJpdmF0ZSBm\naW5hbCBDb2xsZWN0aW9uIF9jdXJSZXN1bHRzID0gbmV3IExpbmtlZExpc3Qo\nKTsKICAgIHByaXZhdGUgTGlzdCBfcmVzdWx0cyA9IG51bGw7CiAgICBwcml2\nYXRlIFN0cmluZyBfc291cmNlTmFtZSA9IG51bGw7CiAgICBwcml2YXRlIEZp\nbGUgX3NvdXJjZUZpbGUgPSBudWxsOwogICAgcHJpdmF0ZSBTdHJpbmdCdWZm\nZXIgX3RleHQgPSBudWxsOwogICAgcHJpdmF0ZSBMaXN0IF9jb21tZW50cyA9\nIG51bGw7CiAgICBwcml2YXRlIExvY2F0aW9uIF9sb2NhdGlvbiA9IG5ldyBM\nb2NhdGlvbigpOwogICAgcHJpdmF0ZSBMZXhpY2FsSGFuZGxlciBfbGggPSBu\ndWxsOwogICAgcHJpdmF0ZSBpbnQgX2RlcHRoID0gLTE7CiAgICBwcml2YXRl\nIGludCBfaWdub3JlID0gSW50ZWdlci5NQVhfVkFMVUU7CgogICAgLyoqCiAg\nICAgKiBXaGV0aGVyIHRvIHBhcnNlIGVsZW1lbnQgdGV4dC4KICAgICAqLwog\nICAgcHVibGljIGJvb2xlYW4gZ2V0UGFyc2VUZXh0KCkgewogICAgICAgIHJl\ndHVybiBfcGFyc2VUZXh0OwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhl\nciB0byBwYXJzZSBlbGVtZW50IHRleHQuCiAgICAgKi8KICAgIHB1YmxpYyB2\nb2lkIHNldFBhcnNlVGV4dChib29sZWFuIHRleHQpIHsKICAgICAgICBfcGFy\nc2VUZXh0ID0gdGV4dDsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIg\ndG8gcGFyc2UgZWxlbWVudCBjb21tZW50cy4KICAgICAqLwogICAgcHVibGlj\nIGJvb2xlYW4gZ2V0UGFyc2VDb21tZW50cygpIHsKICAgICAgICByZXR1cm4g\nX3BhcnNlQ29tbWVudHM7CiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVy\nIHRvIHBhcnNlIGVsZW1lbnQgY29tbWVudHMuCiAgICAgKi8KICAgIHB1Ymxp\nYyB2b2lkIHNldFBhcnNlQ29tbWVudHMoYm9vbGVhbiBjb21tZW50cykgewog\nICAgICAgIF9wYXJzZUNvbW1lbnRzID0gY29tbWVudHM7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBUaGUgWE1MIGRvY3VtZW50IGxvY2F0aW9uLgogICAgICov\nCiAgICBwdWJsaWMgTG9jYXRpb24gZ2V0TG9jYXRpb24oKSB7CiAgICAgICAg\ncmV0dXJuIF9sb2NhdGlvbjsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBs\nZXhpY2FsIGhhbmRsZXIgdGhhdCBzaG91bGQgYmUgcmVnaXN0ZXJlZCB3aXRo\nIHRoZSBTQVggcGFyc2VyIHVzZWQKICAgICAqIGJ5IHRoaXMgY2xhc3MuIFNp\nbmNlIHRoZSA8Y29kZT5vcmcueG1sLnNheC5leHQ8L2NvZGU+IHBhY2thZ2Ug\naXMgbm90CiAgICAgKiBhIHJlcXVpcmVkIHBhcnQgb2YgU0FYMiwgdGhpcyBo\nYW5kbGVyIG1pZ2h0IG5vdCBiZSB1c2VkIGJ5IHRoZSBwYXJzZXIuCiAgICAg\nKi8KICAgIHB1YmxpYyBMZXhpY2FsSGFuZGxlciBnZXRMZXhpY2FsSGFuZGxl\ncigpIHsKICAgICAgICByZXR1cm4gX2xoOwogICAgfQoKICAgIC8qKgogICAg\nICogVGhlIGxleGljYWwgaGFuZGxlciB0aGF0IHNob3VsZCBiZSByZWdpc3Rl\ncmVkIHdpdGggdGhlIFNBWCBwYXJzZXIgdXNlZAogICAgICogYnkgdGhpcyBj\nbGFzcy4gU2luY2UgdGhlIDxjb2RlPm9yZy54bWwuc2F4LmV4dDwvY29kZT4g\ncGFja2FnZSBpcyBub3QKICAgICAqIGEgcmVxdWlyZWQgcGFydCBvZiBTQVgy\nLCB0aGlzIGhhbmRsZXIgbWlnaHQgbm90IGJlIHVzZWQgYnkgdGhlIHBhcnNl\nci4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0TGV4aWNhbEhhbmRsZXIo\nTGV4aWNhbEhhbmRsZXIgbGgpIHsKICAgICAgICBfbGggPSBsaDsKICAgIH0K\nCiAgICAvKioKICAgICAqIFRoZSBYTUwgZG9jdW1lbnQgbG9jYXRpb24uCiAg\nICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldExvY2F0aW9uKExvY2F0aW9uIGxv\nY2F0aW9uKSB7CiAgICAgICAgX2xvY2F0aW9uID0gbG9jYXRpb247CiAgICB9\nCgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRvIHVzZSB0aGUgc291cmNlIG5h\nbWUgYXMgdGhlIFhNTCBzeXN0ZW0gaWQuCiAgICAgKi8KICAgIHB1YmxpYyBi\nb29sZWFuIGdldFNvdXJjZUlzU3lzdGVtSWQoKSB7CiAgICAgICAgcmV0dXJu\nIF9zeXN0ZW1JZDsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8g\ndXNlIHRoZSBzb3VyY2UgbmFtZSBhcyB0aGUgWE1MIHN5c3RlbSBpZC4KICAg\nICAqLwogICAgcHVibGljIHZvaWQgc2V0U291cmNlSXNTeXN0ZW1JZChib29s\nZWFuIHN5c3RlbUlkKSB7CiAgICAgICAgX3N5c3RlbUlkID0gc3lzdGVtSWQ7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRoaXMgaXMgYSB2YWxp\nZGF0aW5nIHBhcnNlci4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gaXNW\nYWxpZGF0aW5nKCkgewogICAgICAgIHJldHVybiBfdmFsaWRhdGluZzsKICAg\nIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdGhpcyBpcyBhIHZhbGlkYXRp\nbmcgcGFyc2VyLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRWYWxpZGF0\naW5nKGJvb2xlYW4gdmFsaWRhdGluZykgewogICAgICAgIF92YWxpZGF0aW5n\nID0gdmFsaWRhdGluZzsKICAgIH0KCiAgICAvKioKICAgICAqIEV4cGVjdGVk\nIHN1ZmZpeCBmb3IgbWV0YWRhdGEgcmVzb3VyY2VzLCBvciBudWxsIGlmIHVu\na25vd24uCiAgICAgKi8KICAgIHB1YmxpYyBTdHJpbmcgZ2V0U3VmZml4KCkg\newogICAgICAgIHJldHVybiBfc3VmZml4OwogICAgfQoKICAgIC8qKgogICAg\nICogRXhwZWN0ZWQgc3VmZml4IGZvciBtZXRhZGF0YSByZXNvdXJjZXMsIG9y\nIG51bGwgaWYgdW5rbm93bi4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0\nU3VmZml4KFN0cmluZyBzdWZmaXgpIHsKICAgICAgICBfc3VmZml4ID0gc3Vm\nZml4OwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciBwYXJzZWQgcmVz\nb3VyY2UgbmFtZXMgYXJlIGNhY2hlZCB0byBhdm9pZCBkdXBsaWNhdGUgcGFy\nc2luZy4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gaXNDYWNoaW5nKCkg\newogICAgICAgIHJldHVybiBfY2FjaGluZzsKICAgIH0KCiAgICAvKioKICAg\nICAqIFdoZXRoZXIgcGFyc2VkIHJlc291cmNlIG5hbWVzIGFyZSBjYWNoZWQg\ndG8gYXZvaWQgZHVwbGljYXRlIHBhcnNpbmcuCiAgICAgKi8KICAgIHB1Ymxp\nYyB2b2lkIHNldENhY2hpbmcoYm9vbGVhbiBjYWNoaW5nKSB7CiAgICAgICAg\nX2NhY2hpbmcgPSBjYWNoaW5nOwogICAgICAgIGlmICghY2FjaGluZykKICAg\nICAgICAgICAgY2xlYXIoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBs\nb2cgdG8gd3JpdGUgdG8uCiAgICAgKi8KICAgIHB1YmxpYyBMb2cgZ2V0TG9n\nKCkgewogICAgICAgIHJldHVybiBfbG9nOwogICAgfQoKICAgIC8qKgogICAg\nICogVGhlIGxvZyB0byB3cml0ZSB0by4KICAgICAqLwogICAgcHVibGljIHZv\naWQgc2V0TG9nKExvZyBsb2cpIHsKICAgICAgICBfbG9nID0gbG9nOwogICAg\nfQoKICAgIC8qKgogICAgICogQ2xhc3Nsb2FkZXIgdG8gdXNlIGZvciBjbGFz\ncyBuYW1lIHJlc29sdXRpb24uCiAgICAgKi8KICAgIHB1YmxpYyBDbGFzc0xv\nYWRlciBnZXRDbGFzc0xvYWRlcigpIHsKICAgICAgICByZXR1cm4gX2xvYWRl\ncjsKICAgIH0KCiAgICAvKioKICAgICAqIENsYXNzbG9hZGVyIHRvIHVzZSBm\nb3IgY2xhc3MgbmFtZSByZXNvbHV0aW9uLgogICAgICovCiAgICBwdWJsaWMg\ndm9pZCBzZXRDbGFzc0xvYWRlcihDbGFzc0xvYWRlciBsb2FkZXIpIHsKICAg\nICAgICBfbG9hZGVyID0gbG9hZGVyOwogICAgfQoKICAgIHB1YmxpYyBMaXN0\nIGdldFJlc3VsdHMoKSB7CiAgICAgICAgaWYgKF9yZXN1bHRzID09IG51bGwp\nCiAgICAgICAgICAgIHJldHVybiBDb2xsZWN0aW9ucy5FTVBUWV9MSVNUOwog\nICAgICAgIHJldHVybiBfcmVzdWx0czsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBwYXJzZShTdHJpbmcgcnNyYykgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAg\nICAgICBpZiAocnNyYyAhPSBudWxsKQogICAgICAgICAgICBwYXJzZShuZXcg\nUmVzb3VyY2VNZXRhRGF0YUl0ZXJhdG9yKHJzcmMsIF9sb2FkZXIpKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBwYXJzZShVUkwgdXJsKSB0aHJvd3MgSU9F\neGNlcHRpb24gewogICAgICAgIGlmICh1cmwgIT0gbnVsbCkKICAgICAgICAg\nICAgcGFyc2UobmV3IFVSTE1ldGFEYXRhSXRlcmF0b3IodXJsKSk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgcGFyc2UoRmlsZSBmaWxlKSB0aHJvd3MgSU9F\neGNlcHRpb24gewogICAgICAgIGlmIChmaWxlID09IG51bGwpCiAgICAgICAg\nICAgIHJldHVybjsKICAgICAgICBpZiAoIWZpbGUuaXNEaXJlY3RvcnkoKSkK\nICAgICAgICAgICAgcGFyc2UobmV3IEZpbGVNZXRhRGF0YUl0ZXJhdG9yKGZp\nbGUpKTsKICAgICAgICBlbHNlIHsKICAgICAgICAgICAgU3RyaW5nIHN1ZmYg\nPSAoX3N1ZmZpeCA9PSBudWxsKSA/ICIiIDogX3N1ZmZpeDsKICAgICAgICAg\nICAgcGFyc2UobmV3IEZpbGVNZXRhRGF0YUl0ZXJhdG9yKGZpbGUsCiAgICAg\nICAgICAgICAgICBuZXcgU3VmZml4TWV0YURhdGFGaWx0ZXIoc3VmZikpKTsK\nICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZvaWQgcGFyc2UoQ2xhc3Mg\nY2xzLCBib29sZWFuIHRvcERvd24pIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAg\nICAgICAgU3RyaW5nIHN1ZmYgPSAoX3N1ZmZpeCA9PSBudWxsKSA/ICIiIDog\nX3N1ZmZpeDsKICAgICAgICBwYXJzZShuZXcgQ2xhc3NNZXRhRGF0YUl0ZXJh\ndG9yKGNscywgc3VmZiwgdG9wRG93biksICF0b3BEb3duKTsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCBwYXJzZShSZWFkZXIgeG1sLCBTdHJpbmcgc291cmNl\nTmFtZSkgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICBpZiAoeG1sICE9\nIG51bGwgJiYgKHNvdXJjZU5hbWUgPT0gbnVsbCB8fCAhcGFyc2VkKHNvdXJj\nZU5hbWUpKSkKICAgICAgICAgICAgcGFyc2VOZXdSZXNvdXJjZSh4bWwsIHNv\ndXJjZU5hbWUpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHBhcnNlKE1ldGFE\nYXRhSXRlcmF0b3IgaXRyKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAg\nIHBhcnNlKGl0ciwgZmFsc2UpOwogICAgfQoKICAgIC8qKgogICAgICogUGFy\nc2UgdGhlIHJlc291cmNlcyByZXR1cm5lZCBieSB0aGUgZ2l2ZW4gaXRlcmF0\nb3IsIG9wdGlvbmFsbHkgc3RvcHBpbmcKICAgICAqIHdoZW4gdGhlIGZpcnN0\nIHZhbGlkIHJlc291cmNlIGlzIGZvdW5kLgogICAgICovCiAgICBwcml2YXRl\nIHZvaWQgcGFyc2UoTWV0YURhdGFJdGVyYXRvciBpdHIsIGJvb2xlYW4gc3Rv\ncEZpcnN0KQogICAgICAgIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAg\naWYgKGl0ciA9PSBudWxsKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgU3RyaW5nIHNvdXJjZU5hbWU7CiAgICAgICAg\nICAgIHdoaWxlIChpdHIuaGFzTmV4dCgpKSB7CiAgICAgICAgICAgICAgICBz\nb3VyY2VOYW1lID0gaXRyLm5leHQoKS50b1N0cmluZygpOwogICAgICAgICAg\nICAgICAgaWYgKHBhcnNlZChzb3VyY2VOYW1lKSkgewogICAgICAgICAgICAg\nICAgICAgIGlmIChzdG9wRmlyc3QpCiAgICAgICAgICAgICAgICAgICAgICAg\nIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAg\nICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIGluZGl2aWR1YWwgZmls\nZXMgb2YgdGhlIHJlc291cmNlIG1pZ2h0IGFscmVhZHkgYmUgcGFyc2VkCiAg\nICAgICAgICAgICAgICBfc291cmNlRmlsZSA9IGl0ci5nZXRGaWxlKCk7CiAg\nICAgICAgICAgICAgICBwYXJzZU5ld1Jlc291cmNlKG5ldyBJbnB1dFN0cmVh\nbVJlYWRlcihpdHIuZ2V0SW5wdXRTdHJlYW0oKSksCiAgICAgICAgICAgICAg\nICAgICAgc291cmNlTmFtZSk7CiAgICAgICAgICAgICAgICBpZiAoc3RvcEZp\ncnN0KQogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9\nCiAgICAgICAgfQogICAgICAgIGZpbmFsbHkgewogICAgICAgICAgICBpdHIu\nY2xvc2UoKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBQYXJz\nZSBhIHByZXZpb3VzbHktdW5zZWVuIHNvdXJjZS4gQWxsIHBhcnNpbmcgbWV0\naG9kcyBkZWxlZ2F0ZQogICAgICogdG8gdGhpcyBvbmUuCiAgICAgKi8KICAg\nIHByb3RlY3RlZCB2b2lkIHBhcnNlTmV3UmVzb3VyY2UoUmVhZGVyIHhtbCwg\nU3RyaW5nIHNvdXJjZU5hbWUpCiAgICAgICAgdGhyb3dzIElPRXhjZXB0aW9u\nIHsKICAgICAgICBpZiAoX2xvZyAhPSBudWxsICYmIF9sb2cuaXNJbmZvRW5h\nYmxlZCgpKQogICAgICAgICAgICBfbG9nLmluZm8oX2xvYy5nZXQoInN0YXJ0\nLXBhcnNlIiwgc291cmNlTmFtZSkpOwoKICAgICAgICAvLyBldmVuIGlmIHdl\nIHdhbnQgdG8gdmFsaWRhdGUsIHNwZWNpZnkgdGhhdCBpdCB3b24ndCBoYXBw\nZW4KICAgICAgICAvLyBpZiB3ZSBoYXZlIG5laXRoZXIgYSBEb2NUeXBlIG5v\ndCBhIFNjaGVtYQogICAgICAgIE9iamVjdCBzY2hlbWFTb3VyY2UgPSBnZXRT\nY2hlbWFTb3VyY2UoKTsKICAgICAgICBpZiAoc2NoZW1hU291cmNlICE9IG51\nbGwgJiYgX3NjaGVtYUJ1ZykgewogICAgICAgICAgICBpZiAoX2xvZyAhPSBu\ndWxsICYmIF9sb2cuaXNJbmZvRW5hYmxlZCgpKQogICAgICAgICAgICAgICAg\nX2xvZy5pbmZvKF9sb2MuZ2V0KCJwYXJzZXItc2NoZW1hLWJ1ZyIpKTsKICAg\nICAgICAgICAgc2NoZW1hU291cmNlID0gbnVsbDsKICAgICAgICB9CiAgICAg\nICAgYm9vbGVhbiB2YWxpZGF0aW5nID0gX3ZhbGlkYXRpbmcgJiYgKGdldERv\nY1R5cGUoKSAhPSBudWxsIAogICAgICAgICAgICB8fCBzY2hlbWFTb3VyY2Ug\nIT0gbnVsbCk7CgogICAgICAgIC8vIHBhcnNlIHRoZSBtZXRhZGF0YSB3aXRo\nIGEgU0FYIHBhcnNlcgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIF9zb3Vy\nY2VOYW1lID0gc291cmNlTmFtZTsKICAgICAgICAgICAgU0FYUGFyc2VyIHBh\ncnNlciA9IFhNTEZhY3RvcnkuZ2V0U0FYUGFyc2VyKHZhbGlkYXRpbmcsIHRy\ndWUpOwogICAgICAgICAgICBPYmplY3Qgc2NoZW1hID0gbnVsbDsKICAgICAg\nICAgICAgaWYgKHZhbGlkYXRpbmcpIHsKICAgICAgICAgICAgICAgIHNjaGVt\nYSA9IHNjaGVtYVNvdXJjZTsKICAgICAgICAgICAgICAgIGlmIChzY2hlbWEg\nPT0gbnVsbCAmJiBnZXREb2NUeXBlKCkgIT0gbnVsbCkKICAgICAgICAgICAg\nICAgICAgICB4bWwgPSBuZXcgRG9jVHlwZVJlYWRlcih4bWwsIGdldERvY1R5\ncGUoKSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChfcGFyc2VD\nb21tZW50cyB8fCBfbGggIT0gbnVsbCkKICAgICAgICAgICAgICAgIHBhcnNl\nci5zZXRQcm9wZXJ0eQogICAgICAgICAgICAgICAgICAgICgiaHR0cDovL3ht\nbC5vcmcvc2F4L3Byb3BlcnRpZXMvbGV4aWNhbC1oYW5kbGVyIiwgdGhpcyk7\nCgogICAgICAgICAgICBpZiAoc2NoZW1hICE9IG51bGwpIHsKICAgICAgICAg\nICAgICAgIHBhcnNlci5zZXRQcm9wZXJ0eQogICAgICAgICAgICAgICAgICAg\nICgiaHR0cDovL2phdmEuc3VuLmNvbS94bWwvamF4cC9wcm9wZXJ0aWVzL3Nj\naGVtYUxhbmd1YWdlIiwKICAgICAgICAgICAgICAgICAgICAgICAgImh0dHA6\nLy93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hIik7CiAgICAgICAgICAgICAg\nICBwYXJzZXIuc2V0UHJvcGVydHkKICAgICAgICAgICAgICAgICAgICAoImh0\ndHA6Ly9qYXZhLnN1bi5jb20veG1sL2pheHAvcHJvcGVydGllcy9zY2hlbWFT\nb3VyY2UiLAogICAgICAgICAgICAgICAgICAgICAgICBzY2hlbWEpOwogICAg\nICAgICAgICB9CgogICAgICAgICAgICBJbnB1dFNvdXJjZSBpcyA9IG5ldyBJ\nbnB1dFNvdXJjZSh4bWwpOwogICAgICAgICAgICBpZiAoX3N5c3RlbUlkICYm\nIHNvdXJjZU5hbWUgIT0gbnVsbCkKICAgICAgICAgICAgICAgIGlzLnNldFN5\nc3RlbUlkKHNvdXJjZU5hbWUpOwogICAgICAgICAgICBwYXJzZXIucGFyc2Uo\naXMsIHRoaXMpOwogICAgICAgICAgICBmaW5pc2goKTsKICAgICAgICB9IGNh\ndGNoIChTQVhFeGNlcHRpb24gc2UpIHsKICAgICAgICAgICAgSU9FeGNlcHRp\nb24gaW9lID0gbmV3IElPRXhjZXB0aW9uKHNlLnRvU3RyaW5nKCkpOwogICAg\nICAgICAgICBKYXZhVmVyc2lvbnMuaW5pdENhdXNlKGlvZSwgc2UpOwogICAg\nICAgICAgICB0aHJvdyBpb2U7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAg\nICAgICAgcmVzZXQoKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAg\nKiBSZXR1cm4gdHJ1ZSBpZiB0aGUgZ2l2ZW4gc291cmNlIGlzIHBhcnNlZC4g\nT3RoZXJ3aXNlLCByZWNvcmQgdGhhdAogICAgICogaXQgd2lsbCBiZSBwYXJz\nZWQuCiAgICAgKi8KICAgIHByb3RlY3RlZCBib29sZWFuIHBhcnNlZChTdHJp\nbmcgc3JjKSB7CiAgICAgICAgaWYgKCFfY2FjaGluZykKICAgICAgICAgICAg\ncmV0dXJuIGZhbHNlOwogICAgICAgIGlmIChfcGFyc2VkID09IG51bGwpCiAg\nICAgICAgICAgIF9wYXJzZWQgPSBuZXcgSGFzaE1hcCgpOwoKICAgICAgICBD\nbGFzc0xvYWRlciBsb2FkZXIgPSBjdXJyZW50Q2xhc3NMb2FkZXIoKTsKICAg\nICAgICBTZXQgc2V0ID0gKFNldCkgX3BhcnNlZC5nZXQobG9hZGVyKTsKICAg\nICAgICBpZiAoc2V0ID09IG51bGwpIHsKICAgICAgICAgICAgc2V0ID0gbmV3\nIEhhc2hTZXQoKTsKICAgICAgICAgICAgX3BhcnNlZC5wdXQobG9hZGVyLCBz\nZXQpOwogICAgICAgIH0KICAgICAgICBib29sZWFuIGFkZGVkID0gc2V0LmFk\nZChzcmMpOwogICAgICAgIGlmICghYWRkZWQgJiYgX2xvZyAhPSBudWxsICYm\nIF9sb2cuaXNUcmFjZUVuYWJsZWQoKSkKICAgICAgICAgICAgX2xvZy50cmFj\nZShfbG9jLmdldCgiYWxyZWFkeS1wYXJzZWQiLCBzcmMpKTsKICAgICAgICBy\nZXR1cm4gIWFkZGVkOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGNsZWFyKCkg\newogICAgICAgIGlmIChfbG9nICE9IG51bGwgJiYgX2xvZy5pc1RyYWNlRW5h\nYmxlZCgpKQogICAgICAgICAgICBfbG9nLnRyYWNlKF9sb2MuZ2V0KCJjbGVh\nci1wYXJzZXIiLCB0aGlzKSk7CiAgICAgICAgaWYgKF9wYXJzZWQgIT0gbnVs\nbCkKICAgICAgICAgICAgX3BhcnNlZC5jbGVhcigpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIGVycm9yKFNBWFBhcnNlRXhjZXB0aW9uIHNlKSB0aHJvd3Mg\nU0FYRXhjZXB0aW9uIHsKICAgICAgICB0aHJvdyBnZXRFeGNlcHRpb24oc2Uu\ndG9TdHJpbmcoKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgZmF0YWxFcnJv\ncihTQVhQYXJzZUV4Y2VwdGlvbiBzZSkgdGhyb3dzIFNBWEV4Y2VwdGlvbiB7\nCiAgICAgICAgdGhyb3cgZ2V0RXhjZXB0aW9uKHNlLnRvU3RyaW5nKCkpOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldERvY3VtZW50TG9jYXRvcihMb2Nh\ndG9yIGxvY2F0b3IpIHsKICAgICAgICBfbG9jYXRpb24uc2V0TG9jYXRvcihs\nb2NhdG9yKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzdGFydEVsZW1lbnQo\nU3RyaW5nIHVyaSwgU3RyaW5nIG5hbWUsIFN0cmluZyBxTmFtZSwKICAgICAg\nICBBdHRyaWJ1dGVzIGF0dHJzKSB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAg\nICAgICBfZGVwdGgrKzsKICAgICAgICBpZiAoX2RlcHRoIDw9IF9pZ25vcmUp\nCiAgICAgICAgICAgIGlmICghc3RhcnRFbGVtZW50KHFOYW1lLCBhdHRycykp\nCiAgICAgICAgICAgICAgICBpZ25vcmVDb250ZW50KHRydWUpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIGVuZEVsZW1lbnQoU3RyaW5nIHVyaSwgU3RyaW5n\nIG5hbWUsIFN0cmluZyBxTmFtZSkKICAgICAgICB0aHJvd3MgU0FYRXhjZXB0\naW9uIHsKICAgICAgICBpZiAoX2RlcHRoIDwgX2lnbm9yZSkKICAgICAgICAg\nICAgZW5kRWxlbWVudChxTmFtZSk7CiAgICAgICAgX3RleHQgPSBudWxsOwog\nICAgICAgIGlmIChfY29tbWVudHMgIT0gbnVsbCkKICAgICAgICAgICAgX2Nv\nbW1lbnRzLmNsZWFyKCk7CiAgICAgICAgaWYgKF9kZXB0aCA9PSBfaWdub3Jl\nKQogICAgICAgICAgICBfaWdub3JlID0gSW50ZWdlci5NQVhfVkFMVUU7CiAg\nICAgICAgX2RlcHRoLS07CiAgICB9CgogICAgcHVibGljIHZvaWQgY2hhcmFj\ndGVycyhjaGFyW10gY2gsIGludCBzdGFydCwgaW50IGxlbmd0aCkgewogICAg\nICAgIGlmIChfcGFyc2VUZXh0ICYmIF9kZXB0aCA8PSBfaWdub3JlKSB7CiAg\nICAgICAgICAgIGlmIChfdGV4dCA9PSBudWxsKQogICAgICAgICAgICAgICAg\nX3RleHQgPSBuZXcgU3RyaW5nQnVmZmVyKCk7CiAgICAgICAgICAgIF90ZXh0\nLmFwcGVuZChjaCwgc3RhcnQsIGxlbmd0aCk7CiAgICAgICAgfQogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIGNvbW1lbnQoY2hhcltdIGNoLCBpbnQgc3RhcnQs\nIGludCBsZW5ndGgpIHRocm93cyBTQVhFeGNlcHRpb24gewogICAgICAgIGlm\nIChfcGFyc2VDb21tZW50cyAmJiBfZGVwdGggPD0gX2lnbm9yZSkgewogICAg\nICAgICAgICBpZiAoX2NvbW1lbnRzID09IG51bGwpCiAgICAgICAgICAgICAg\nICBfY29tbWVudHMgPSBuZXcgQXJyYXlMaXN0KDMpOwogICAgICAgICAgICBf\nY29tbWVudHMuYWRkKFN0cmluZy52YWx1ZU9mKGNoLCBzdGFydCwgbGVuZ3Ro\nKSk7CiAgICAgICAgfQogICAgICAgIGlmIChfbGggIT0gbnVsbCkKICAgICAg\nICAgICAgX2xoLmNvbW1lbnQoY2gsIHN0YXJ0LCBsZW5ndGgpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHN0YXJ0Q0RBVEEoKSB0aHJvd3MgU0FYRXhjZXB0\naW9uIHsKICAgICAgICBpZiAoX2xoICE9IG51bGwpCiAgICAgICAgICAgIF9s\naC5zdGFydENEQVRBKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgZW5kQ0RB\nVEEoKSB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgICAgICBpZiAoX2xoICE9\nIG51bGwpCiAgICAgICAgICAgIF9saC5lbmRDREFUQSgpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHN0YXJ0RFREKFN0cmluZyBuYW1lLCBTdHJpbmcgcHVi\nbGljSWQsIFN0cmluZyBzeXN0ZW1JZCkKICAgICAgICB0aHJvd3MgU0FYRXhj\nZXB0aW9uIHsKICAgICAgICBpZiAoX2xoICE9IG51bGwpCiAgICAgICAgICAg\nIF9saC5zdGFydERURChuYW1lLCBwdWJsaWNJZCwgc3lzdGVtSWQpOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIGVuZERURCgpIHRocm93cyBTQVhFeGNlcHRp\nb24gewogICAgICAgIGlmIChfbGggIT0gbnVsbCkKICAgICAgICAgICAgX2xo\nLmVuZERURCgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHN0YXJ0RW50aXR5\nKFN0cmluZyBuYW1lKSB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgICAgICBp\nZiAoX2xoICE9IG51bGwpCiAgICAgICAgICAgIF9saC5zdGFydEVudGl0eShu\nYW1lKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBlbmRFbnRpdHkoU3RyaW5n\nIG5hbWUpIHRocm93cyBTQVhFeGNlcHRpb24gewogICAgICAgIGlmIChfbGgg\nIT0gbnVsbCkKICAgICAgICAgICAgX2xoLmVuZEVudGl0eShuYW1lKTsKICAg\nIH0KCiAgICAvKioKICAgICAqIE92ZXJyaWRlIHRoaXMgbWV0aG9kIG1hcmtp\nbmcgdGhlIHN0YXJ0IG9mIHNvbWUgZWxlbWVudC4gSWYgdGhpcyBtZXRob2QK\nICAgICAqIHJldHVybnMgZmFsc2UsIHRoZSBjb250ZW50IG9mIHRoZSBlbGVt\nZW50IGFuZCB0aGUgZW5kIGVsZW1lbnQgZXZlbnQgd2lsbAogICAgICogYmUg\naWdub3JlZC4KICAgICAqLwogICAgcHJvdGVjdGVkIGFic3RyYWN0IGJvb2xl\nYW4gc3RhcnRFbGVtZW50KFN0cmluZyBuYW1lLCBBdHRyaWJ1dGVzIGF0dHJz\nKQogICAgICAgIHRocm93cyBTQVhFeGNlcHRpb247CgogICAgLyoqCiAgICAg\nKiBPdmVycmlkZSB0aGlzIG1ldGhvZCBtYXJraW5nIHRoZSBlbmQgb2Ygc29t\nZSBlbGVtZW50LgogICAgICovCiAgICBwcm90ZWN0ZWQgYWJzdHJhY3Qgdm9p\nZCBlbmRFbGVtZW50KFN0cmluZyBuYW1lKSB0aHJvd3MgU0FYRXhjZXB0aW9u\nOwoKICAgIC8qKgogICAgICogQWRkIGEgcmVzdWx0IHRvIGJlIHJldHVybmVk\nIGZyb20gdGhlIGN1cnJlbnQgcGFyc2UuCiAgICAgKi8KICAgIHByb3RlY3Rl\nZCB2b2lkIGFkZFJlc3VsdChPYmplY3QgcmVzdWx0KSB7CiAgICAgICAgaWYg\nKF9sb2cgIT0gbnVsbCAmJiBfbG9nLmlzVHJhY2VFbmFibGVkKCkpCiAgICAg\nICAgICAgIF9sb2cudHJhY2UoX2xvYy5nZXQoImFkZC1yZXN1bHQiLCByZXN1\nbHQpKTsKICAgICAgICBfY3VyUmVzdWx0cy5hZGQocmVzdWx0KTsKICAgIH0K\nCiAgICAvKioKICAgICAqIE92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvIGZpbmlz\naCB1cCBhZnRlciBhIHBhcnNlOyB0aGlzIGlzIG9ubHkKICAgICAqIGNhbGxl\nZCBpZiBubyBlcnJvcnMgYXJlIGVuY291bnRlcmVkIGR1cmluZyBwYXJzaW5n\nLiBTdWJjbGFzc2VzIHNob3VsZAogICAgICogY2FsbCA8Y29kZT5zdXBlci5m\naW5pc2goKTwvY29kZT4gdG8gcmVzb2x2ZSBzdXBlcmNsYXNzIHN0YXRlLgog\nICAgICovCiAgICBwcm90ZWN0ZWQgdm9pZCBmaW5pc2goKSB7CiAgICAgICAg\naWYgKF9sb2cgIT0gbnVsbCAmJiBfbG9nLmlzVHJhY2VFbmFibGVkKCkpCiAg\nICAgICAgICAgIF9sb2cudHJhY2UoX2xvYy5nZXQoImVuZC1wYXJzZSIsIGdl\ndFNvdXJjZU5hbWUoKSkpOwogICAgICAgIF9yZXN1bHRzID0gbmV3IEFycmF5\nTGlzdChfY3VyUmVzdWx0cyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBPdmVy\ncmlkZSB0aGlzIG1ldGhvZCB0byBjbGVhciBhbnkgc3RhdGUgYW5kIHJlYWR5\nIHRoZSBwYXJzZXIgZm9yCiAgICAgKiBhIG5ldyBkb2N1bWVudC4gU3ViY2xh\nc3NlcyBzaG91bGQgY2FsbAogICAgICogPGNvZGU+c3VwZXIucmVzZXQoKTwv\nY29kZT4gdG8gY2xlYXIgc3VwZXJjbGFzcyBzdGF0ZS4KICAgICAqLwogICAg\ncHJvdGVjdGVkIHZvaWQgcmVzZXQoKSB7CiAgICAgICAgX2N1clJlc3VsdHMu\nY2xlYXIoKTsKICAgICAgICBfY3VyTG9hZGVyID0gbnVsbDsKICAgICAgICBf\nc291cmNlTmFtZSA9IG51bGw7CiAgICAgICAgX3NvdXJjZUZpbGUgPSBudWxs\nOwogICAgICAgIF9kZXB0aCA9IC0xOwogICAgICAgIF9pZ25vcmUgPSBJbnRl\nZ2VyLk1BWF9WQUxVRTsKICAgICAgICBpZiAoX2NvbW1lbnRzICE9IG51bGwp\nCiAgICAgICAgICAgIF9jb21tZW50cy5jbGVhcigpOwogICAgfQoKICAgIC8q\nKgogICAgICogSW1wbGVtZW50IHRvIHJldHVybiB0aGUgWE1MIHNjaGVtYSBz\nb3VyY2UgZm9yIHRoZSBkb2N1bWVudC4gUmV0dXJucwogICAgICogbnVsbCBi\neSBkZWZhdWx0LiBNYXkgcmV0dXJuOgogICAgICogPHVsPgogICAgICogPGxp\nPjxjb2RlPlN0cmluZzwvY29kZT4gcG9pbnRpbmcgdG8gc2NoZW1hIFVSSS48\nL2xpPgogICAgICogPGxpPjxjb2RlPklucHV0U3RyZWFtPC9jb2RlPiBjb250\nYWluaW5nIHNjaGVtYSBjb250ZW50cy48L2xpPgogICAgICogPGxpPjxjb2Rl\nPklucHV0U291cmNlPC9jb2RlPiBjb250YWluaW5nIHNjaGVtYSBjb250ZW50\ncy48L2xpPgogICAgICogPGxpPjxjb2RlPkZpbGU8L2NvZGU+IGNvbnRhaW5p\nbmcgc2NoZW1hIGNvbnRlbnRzLjwvbGk+CiAgICAgKiA8bGk+QXJyYXkgb2Yg\nYW55IG9mIHRoZSBhYm92ZSBlbGVtZW50cy48L2xpPgogICAgICogPC91bD4K\nICAgICAqLwogICAgcHJvdGVjdGVkIE9iamVjdCBnZXRTY2hlbWFTb3VyY2Uo\nKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgIHJldHVybiBudWxsOwog\nICAgfQoKICAgIC8qKgogICAgICogT3ZlcnJpZGUgdGhpcyBtZXRob2QgdG8g\ncmV0dXJuIGFueSA8Y29kZT5ET0NUWVBFPC9jb2RlPiBkZWNsYXJhdGlvbgog\nICAgICogdGhhdCBzaG91bGQgYmUgZHluYW1pY2FsbHkgaW5jbHVkZWQgaW4g\neG1sIGRvY3VtZW50cyB0aGF0IHdpbGwgYmUKICAgICAqIHZhbGlkYXRlZC4g\nUmV0dXJucyBudWxsIGJ5IGRlZmF1bHQuCiAgICAgKi8KICAgIHByb3RlY3Rl\nZCBSZWFkZXIgZ2V0RG9jVHlwZSgpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAg\nICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1\ncm4gdGhlIG5hbWUgb2YgdGhlIHNvdXJjZSBmaWxlIGJlaW5nIHBhcnNlZC4K\nICAgICAqLwogICAgcHJvdGVjdGVkIFN0cmluZyBnZXRTb3VyY2VOYW1lKCkg\newogICAgICAgIHJldHVybiBfc291cmNlTmFtZTsKICAgIH0KCiAgICAvKioK\nICAgICAqIFJldHVybiB0aGUgZmlsZSBvZiB0aGUgc291cmNlIGJlaW5nIHBh\ncnNlZC4KICAgICAqLwogICAgcHJvdGVjdGVkIEZpbGUgZ2V0U291cmNlRmls\nZSgpIHsKICAgICAgICByZXR1cm4gX3NvdXJjZUZpbGU7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBBZGQgY3VycmVudCBjb21tZW50cyB0byB0aGUgZ2l2ZW4g\nZW50aXR5LiBCeSBkZWZhdWx0LCBhc3N1bWVzIGVudGl0eQogICAgICogaXMg\ne0BsaW5rIENvbW1lbnRhYmxlfS4KICAgICAqLwogICAgcHJvdGVjdGVkIHZv\naWQgYWRkQ29tbWVudHMoT2JqZWN0IG9iaikgewogICAgICAgIFN0cmluZ1td\nIGNvbW1lbnRzID0gY3VycmVudENvbW1lbnRzKCk7CiAgICAgICAgaWYgKGNv\nbW1lbnRzLmxlbmd0aCA+IDAgJiYgb2JqIGluc3RhbmNlb2YgQ29tbWVudGFi\nbGUpCiAgICAgICAgICAgICgoQ29tbWVudGFibGUpIG9iaikuc2V0Q29tbWVu\ndHMoY29tbWVudHMpOwogICAgfQoKICAgIC8qKgogICAgICogQXJyYXkgb2Yg\nY29tbWVudHMgZm9yIHRoZSBjdXJyZW50IG5vZGUsIG9yIGVtcHR5IGFycmF5\nIGlmIG5vbmUuCiAgICAgKi8KICAgIHByb3RlY3RlZCBTdHJpbmdbXSBjdXJy\nZW50Q29tbWVudHMoKSB7CiAgICAgICAgaWYgKF9jb21tZW50cyA9PSBudWxs\nIHx8IF9jb21tZW50cy5pc0VtcHR5KCkpCiAgICAgICAgICAgIHJldHVybiBD\nb21tZW50YWJsZS5FTVBUWV9DT01NRU5UUzsKICAgICAgICByZXR1cm4gKFN0\ncmluZ1tdKSBfY29tbWVudHMudG9BcnJheShuZXcgU3RyaW5nW19jb21tZW50\ncy5zaXplKCldKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUg\ndGV4dCB2YWx1ZSB3aXRoaW4gdGhlIGN1cnJlbnQgbm9kZS4KICAgICAqLwog\nICAgcHJvdGVjdGVkIFN0cmluZyBjdXJyZW50VGV4dCgpIHsKICAgICAgICBp\nZiAoX3RleHQgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuICIiOwogICAg\nICAgIHJldHVybiBfdGV4dC50b1N0cmluZygpLnRyaW0oKTsKICAgIH0KCiAg\nICAvKioKICAgICAqIFJldHVybiB0aGUgY3VycmVudCBsb2NhdGlvbiB3aXRo\naW4gdGhlIHNvdXJjZSBmaWxlLgogICAgICovCiAgICBwcm90ZWN0ZWQgU3Ry\naW5nIGN1cnJlbnRMb2NhdGlvbigpIHsKICAgICAgICByZXR1cm4gIiBbIiAr\nIF9sb2MuZ2V0KCJsb2MtcHJlZml4IikgKyBfbG9jYXRpb24uZ2V0TG9jYXRp\nb24oKSArICJdIjsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUg\ncGFyc2UgZGVwdGguIFdpdGhpbiB0aGUgcm9vdCBlbGVtZW50LCB0aGUgZGVw\ndGggaXMgMCwKICAgICAqIHdpdGhpbiB0aGUgZmlyc3QgbmVzdGVkIGVsZW1l\nbnQsIGl0IGlzIDEsIGFuZCBzbyBmb3J0aC4KICAgICAqLwogICAgcHJvdGVj\ndGVkIGludCBjdXJyZW50RGVwdGgoKSB7CiAgICAgICAgcmV0dXJuIF9kZXB0\naDsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgY2xhc3MgbG9h\nZGVyIHRvIHVzZSB3aGVuIHJlc29sdmluZyByZXNvdXJjZXMgYW5kIGxvYWRp\nbmcKICAgICAqIGNsYXNzZXMuCiAgICAgKi8KICAgIHByb3RlY3RlZCBDbGFz\nc0xvYWRlciBjdXJyZW50Q2xhc3NMb2FkZXIoKSB7CiAgICAgICAgaWYgKF9s\nb2FkZXIgIT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIF9sb2FkZXI7CiAg\nICAgICAgaWYgKF9jdXJMb2FkZXIgPT0gbnVsbCkKICAgICAgICAgICAgX2N1\nckxvYWRlciA9IFRocmVhZC5jdXJyZW50VGhyZWFkKCkuZ2V0Q29udGV4dENs\nYXNzTG9hZGVyKCk7CiAgICAgICAgcmV0dXJuIF9jdXJMb2FkZXI7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBJZ25vcmUgYWxsIGNvbnRlbnQgYmVsb3cgdGhl\nIGN1cnJlbnQgZWxlbWVudC4KICAgICAqCiAgICAgKiBAcGFyYW0gaWdub3Jl\nRW5kIHdoZXRoZXIgdG8gaWdub3JlIHRoZSBlbmQgZWxlbWVudCBldmVudAog\nICAgICovCiAgICBwcm90ZWN0ZWQgdm9pZCBpZ25vcmVDb250ZW50KGJvb2xl\nYW4gaWdub3JlRW5kKSB7CiAgICAgICAgX2lnbm9yZSA9IF9kZXB0aDsKICAg\nICAgICBpZiAoIWlnbm9yZUVuZCkKICAgICAgICAgICAgX2lnbm9yZSsrOwog\nICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBhIFNBWEV4Y2VwdGlvbiB3\naXRoIHRoZSBzb3VyY2UgZmlsZSBuYW1lIGFuZCB0aGUgZ2l2ZW4gZXJyb3IK\nICAgICAqIG1lc3NhZ2UuCiAgICAgKi8KICAgIHByb3RlY3RlZCBTQVhFeGNl\ncHRpb24gZ2V0RXhjZXB0aW9uKFN0cmluZyBtc2cpIHsKICAgICAgICByZXR1\ncm4gbmV3IFNBWEV4Y2VwdGlvbihnZXRTb3VyY2VOYW1lKCkgKyBjdXJyZW50\nTG9jYXRpb24oKSArCiAgICAgICAgICAgICI6ICIgKyBtc2cpOwogICAgfQoK\nICAgIC8qKgogICAgICogUmV0dXJucyBhIFNBWEV4Y2VwdGlvbiB3aXRoIHRo\nZSBzb3VyY2UgZmlsZSBuYW1lIGFuZCB0aGUgZ2l2ZW4gZXJyb3IKICAgICAq\nIG1lc3NhZ2UuCiAgICAgKi8KICAgIHByb3RlY3RlZCBTQVhFeGNlcHRpb24g\nZ2V0RXhjZXB0aW9uKE1lc3NhZ2UgbXNnKSB7CiAgICAgICAgcmV0dXJuIG5l\ndyBTQVhFeGNlcHRpb24oZ2V0U291cmNlTmFtZSgpICsgY3VycmVudExvY2F0\naW9uKCkgKwogICAgICAgICAgICAiOiAiICsgbXNnLmdldE1lc3NhZ2UoKSk7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGEgU0FYRXhjZXB0aW9u\nIHdpdGggdGhlIHNvdXJjZSBmaWxlIG5hbWUgYW5kIHRoZSBnaXZlbiBlcnJv\ncgogICAgICogbWVzc2FnZS4KICAgICAqLwogICAgcHJvdGVjdGVkIFNBWEV4\nY2VwdGlvbiBnZXRFeGNlcHRpb24oTWVzc2FnZSBtc2csIFRocm93YWJsZSBj\nYXVzZSkgewogICAgICAgIGlmIChjYXVzZSAhPSBudWxsICYmIF9sb2cgIT0g\nbnVsbCAmJiBfbG9nLmlzVHJhY2VFbmFibGVkKCkpCiAgICAgICAgICAgIF9s\nb2cudHJhY2UoX2xvYy5nZXQoInNheC1leGNlcHRpb24iLAogICAgICAgICAg\nICAgICAgZ2V0U291cmNlTmFtZSgpLCBfbG9jYXRpb24uZ2V0TG9jYXRpb24o\nKSksIGNhdXNlKTsKICAgICAgICByZXR1cm4gbmV3IFNBWEV4Y2VwdGlvbihn\nZXRTb3VyY2VOYW1lKCkgKyBjdXJyZW50TG9jYXRpb24oKSArCiAgICAgICAg\nICAgICI6ICIgKyBtc2cgKyAiIFsiICsgY2F1c2UgKyAiXSIpOwogICAgfQp9\nCg==\n","encoding":"base64"}

