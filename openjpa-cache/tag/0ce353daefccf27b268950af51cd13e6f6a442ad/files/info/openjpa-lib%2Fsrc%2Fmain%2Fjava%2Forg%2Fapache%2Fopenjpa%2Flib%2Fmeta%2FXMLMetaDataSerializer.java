{"sha":"bed083a0ab84c76bc6b77345a3df16edaf82c4b2","node_id":"MDQ6QmxvYjIwNjM2NDpiZWQwODNhMGFiODRjNzZiYzZiNzczNDVhM2RmMTZlZGFmODJjNGIy","size":10505,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/bed083a0ab84c76bc6b77345a3df16edaf82c4b2","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIubWV0YTsKCmltcG9ydCBqYXZhLmlvLkZpbGU7CmltcG9y\ndCBqYXZhLmlvLkZpbGVXcml0ZXI7CmltcG9ydCBqYXZhLmlvLklPRXhjZXB0\naW9uOwppbXBvcnQgamF2YS5pby5TdHJpbmdXcml0ZXI7CmltcG9ydCBqYXZh\nLmlvLldyaXRlcjsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOwppbXBv\ncnQgamF2YS51dGlsLkhhc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuSXRlcmF0\nb3I7CmltcG9ydCBqYXZhLnV0aWwuTGlua2VkTGlzdDsKaW1wb3J0IGphdmEu\ndXRpbC5NYXA7CmltcG9ydCBqYXZheC54bWwudHJhbnNmb3JtLlJlc3VsdDsK\naW1wb3J0IGphdmF4LnhtbC50cmFuc2Zvcm0uVHJhbnNmb3JtZXJDb25maWd1\ncmF0aW9uRXhjZXB0aW9uOwppbXBvcnQgamF2YXgueG1sLnRyYW5zZm9ybS5U\ncmFuc2Zvcm1lckZhY3Rvcnk7CmltcG9ydCBqYXZheC54bWwudHJhbnNmb3Jt\nLnNheC5TQVhUcmFuc2Zvcm1lckZhY3Rvcnk7CmltcG9ydCBqYXZheC54bWwu\ndHJhbnNmb3JtLnNheC5UcmFuc2Zvcm1lckhhbmRsZXI7CmltcG9ydCBqYXZh\neC54bWwudHJhbnNmb3JtLnN0cmVhbS5TdHJlYW1SZXN1bHQ7CgppbXBvcnQg\nb3JnLnhtbC5zYXguQXR0cmlidXRlczsKaW1wb3J0IG9yZy54bWwuc2F4LkNv\nbnRlbnRIYW5kbGVyOwppbXBvcnQgb3JnLnhtbC5zYXguU0FYRXhjZXB0aW9u\nOwppbXBvcnQgb3JnLnhtbC5zYXguZXh0LkxleGljYWxIYW5kbGVyOwppbXBv\ncnQgb3JnLnhtbC5zYXguaGVscGVycy5BdHRyaWJ1dGVzSW1wbDsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5saWIubG9nLkxvZzsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5saWIudXRpbC5GaWxlczsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6ZXI7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEubGliLnhtbC5Db21tZW50YWJsZTsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5saWIueG1sLlhNTFdyaXRlcjsKCi8qKgogKiBBYnN0\ncmFjdCBiYXNlIHR5cGUgZm9yIHNlcmxpYWxpemVycyB0aGF0IHRyYW5zZmVy\nIGdyb3VwcyBvZiBvYmplY3RzCiAqIHRvIFhNTC4gSW5jbHVkZXMgYSB3YXkg\nb2Ygc2VyaWFsaXppbmcgb2JqZWN0cyBiYWNrIHRvIHRoZSBYTUwgZmlsZXMK\nICogdGhleSB3ZXJlIHBhcnNlZCBmcm9tLiBTZXJpYWxpemVycyBhcmUgbm90\nIHRocmVhZCBzYWZlLgogKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKiBAbm9q\nYXZhZG9jCiAqLwpwdWJsaWMgYWJzdHJhY3QgY2xhc3MgWE1MTWV0YURhdGFT\nZXJpYWxpemVyIGltcGxlbWVudHMgTWV0YURhdGFTZXJpYWxpemVyIHsKCiAg\nICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6ZXIgX2xvYyA9IExvY2Fs\naXplci5mb3JQYWNrYWdlCiAgICAgICAgKFhNTE1ldGFEYXRhU2VyaWFsaXpl\nci5jbGFzcyk7CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTQVhUcmFuc2Zv\ncm1lckZhY3RvcnkgX2ZhY3RvcnkgPQogICAgICAgIChTQVhUcmFuc2Zvcm1l\nckZhY3RvcnkpIFRyYW5zZm9ybWVyRmFjdG9yeS5uZXdJbnN0YW5jZSgpOwoK\nICAgIHByaXZhdGUgTG9nIF9sb2cgPSBudWxsOwoKICAgIC8vIGN1cnJlbnQg\nc2VyaWFsaXphdGlvbiBzdGF0ZQogICAgcHJpdmF0ZSBmaW5hbCBBdHRyaWJ1\ndGVzSW1wbCBfYXR0cnMgPSBuZXcgQXR0cmlidXRlc0ltcGwoKTsKICAgIHBy\naXZhdGUgQ29udGVudEhhbmRsZXIgX2hhbmRsZXIgPSBudWxsOwogICAgcHJp\ndmF0ZSBpbnQgX2ZsYWdzID0gMDsKICAgIHByaXZhdGUgRmlsZSBfYmFja3Vw\nID0gbnVsbDsKCiAgICAvKioKICAgICAqIFRoZSBsb2cgdG8gd3JpdGUgdG8u\nCiAgICAgKi8KICAgIHB1YmxpYyBMb2cgZ2V0TG9nKCkgewogICAgICAgIHJl\ndHVybiBfbG9nOwogICAgfQoKICAgIC8qKgogICAgICogVGhlIGxvZyB0byB3\ncml0ZSB0by4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0TG9nKExvZyBs\nb2cpIHsKICAgICAgICBfbG9nID0gbG9nOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHNlcmlhbGl6ZShpbnQgZmxhZ3MpIHRocm93cyBJT0V4Y2VwdGlvbiB7\nCiAgICAgICAgc2VyaWFsaXplKChNYXApIG51bGwsIGZsYWdzKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBzZXJpYWxpemUoTWFwIG91dHB1dCwgaW50IGZs\nYWdzKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgIE1hcCBmaWxlcyA9\nIGdldEZpbGVNYXAoKTsKICAgICAgICBpZiAoZmlsZXMgPT0gbnVsbCkKICAg\nICAgICAgICAgcmV0dXJuOwoKICAgICAgICAvLyBmb3IgZWFjaCBmaWxlLCBz\nZXJpYWxpemUgb2JqZWN0cwogICAgICAgIE1hcC5FbnRyeSBlbnRyeTsKICAg\nICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9IGZpbGVzLmVudHJ5U2V0KCkuaXRl\ncmF0b3IoKTsgaXRyLmhhc05leHQoKTspIHsKICAgICAgICAgICAgZW50cnkg\nPSAoTWFwLkVudHJ5KSBpdHIubmV4dCgpOwogICAgICAgICAgICBGaWxlIGZp\nbGUgPSAoRmlsZSkgZW50cnkuZ2V0S2V5KCk7CiAgICAgICAgICAgIENvbGxl\nY3Rpb24gZmlsZU9ianMgPSAoQ29sbGVjdGlvbikgZW50cnkuZ2V0VmFsdWUo\nKTsKCiAgICAgICAgICAgIGlmIChfbG9nICE9IG51bGwgJiYgX2xvZy5pc0lu\nZm9FbmFibGVkKCkpCiAgICAgICAgICAgICAgICBfbG9nLmluZm8oX2xvYy5n\nZXQoInNlci1maWxlIiwgZmlsZSkpOwoKICAgICAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgICAgIFRyYW5zZm9ybWVySGFuZGxlciB0cmFucyA9IF9mYWN0\nb3J5Lm5ld1RyYW5zZm9ybWVySGFuZGxlcigpOwogICAgICAgICAgICAgICAg\nV3JpdGVyIHdyaXRlcjsKICAgICAgICAgICAgICAgIGlmIChvdXRwdXQgPT0g\nbnVsbCkgewogICAgICAgICAgICAgICAgICAgIF9iYWNrdXAgPSBwcmVwYXJl\nV3JpdGUoZmlsZSk7CiAgICAgICAgICAgICAgICAgICAgd3JpdGVyID0gbmV3\nIEZpbGVXcml0ZXIoZmlsZSk7CiAgICAgICAgICAgICAgICB9IGVsc2UKICAg\nICAgICAgICAgICAgICAgICB3cml0ZXIgPSBuZXcgU3RyaW5nV3JpdGVyKCk7\nCgogICAgICAgICAgICAgICAgV3JpdGVyIHhtbCA9IHdyaXRlcjsKICAgICAg\nICAgICAgICAgIGlmICgoZmxhZ3MgJiBQUkVUVFkpID4gMCkKICAgICAgICAg\nICAgICAgICAgICB4bWwgPSBuZXcgWE1MV3JpdGVyKHdyaXRlcik7CiAgICAg\nICAgICAgICAgICB0cmFucy5zZXRSZXN1bHQobmV3IFN0cmVhbVJlc3VsdCh4\nbWwpKTsKICAgICAgICAgICAgICAgIHNlcmlhbGl6ZShmaWxlT2JqcywgdHJh\nbnMsIGZsYWdzKTsKCiAgICAgICAgICAgICAgICBpZiAob3V0cHV0ICE9IG51\nbGwpCiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnB1dChmaWxlLCAoKFN0\ncmluZ1dyaXRlcikgd3JpdGVyKS50b1N0cmluZygpKTsKICAgICAgICAgICAg\nfSBjYXRjaCAoU0FYRXhjZXB0aW9uIHNlKSB7CiAgICAgICAgICAgICAgICB0\naHJvdyBuZXcgSU9FeGNlcHRpb24oc2UudG9TdHJpbmcoKSk7CiAgICAgICAg\nICAgIH0gY2F0Y2ggKFRyYW5zZm9ybWVyQ29uZmlndXJhdGlvbkV4Y2VwdGlv\nbiB0Y2UpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlv\nbih0Y2UudG9TdHJpbmcoKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAg\nICB9CgogICAgLyoqCiAgICAgKiBQcmVwYXJlIHRvIHdyaXRlIHRvIHRoZSBn\naXZlbiBmaWxlLiBCYWNrIHVwIHRoZSBmaWxlIGFuZCBtYWtlIHN1cmUgdGhl\nCiAgICAgKiBwYXRoIHRvIGl0IGlzIGNyZWF0ZWQuCiAgICAgKi8KICAgIHBy\nb3RlY3RlZCBGaWxlIHByZXBhcmVXcml0ZShGaWxlIGZpbGUpIHRocm93cyBJ\nT0V4Y2VwdGlvbiB7CiAgICAgICAgRmlsZSBiYWNrdXAgPSBGaWxlcy5iYWNr\ndXAoZmlsZSwgZmFsc2UpOwogICAgICAgIGlmIChiYWNrdXAgPT0gbnVsbCkg\newogICAgICAgICAgICBGaWxlIHBhcmVudCA9IGZpbGUuZ2V0UGFyZW50Rmls\nZSgpOwogICAgICAgICAgICBpZiAocGFyZW50ICE9IG51bGwgJiYgIXBhcmVu\ndC5leGlzdHMoKSkKICAgICAgICAgICAgICAgIHBhcmVudC5ta2RpcnMoKTsK\nICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJhY2t1cDsKICAgIH0KCiAgICAv\nKioKICAgICAqIFJldHVybnMgYSB7QGxpbmsgTWFwfSB3aXRoIGtleXMgb2Yg\ndGhlIHtAbGluayBGaWxlfSB0byBiZQogICAgICogd3JpdHRlbiB0bywgYW5k\nIHZhbHVlcyBvZiBhIHtAbGluayBDb2xsZWN0aW9ufSBvZgogICAgICoge0Bs\naW5rIFNvdXJjZVRyYWNrZXJ9IGluc3RhbmNlcy4KICAgICAqLwogICAgcHJv\ndGVjdGVkIE1hcCBnZXRGaWxlTWFwKCkgewogICAgICAgIENvbGxlY3Rpb24g\nb2JqcyA9IGdldE9iamVjdHMoKTsKICAgICAgICBpZiAob2JqcyA9PSBudWxs\nIHx8IG9ianMuaXNFbXB0eSgpKQogICAgICAgICAgICByZXR1cm4gbnVsbDsK\nCiAgICAgICAgLy8gY3JlYXRlIGEgbWFwIG9mIGZpbGVzIHRvIGxpc3RzIG9m\nIG9iamVjdHMKICAgICAgICBNYXAgZmlsZXMgPSBuZXcgSGFzaE1hcCgpOwog\nICAgICAgIEZpbGUgZmlsZTsKICAgICAgICBDb2xsZWN0aW9uIGZpbGVPYmpz\nOwogICAgICAgIE9iamVjdCBvYmo7CiAgICAgICAgZm9yIChJdGVyYXRvciBp\ndHIgPSBvYmpzLml0ZXJhdG9yKCk7IGl0ci5oYXNOZXh0KCk7KSB7CiAgICAg\nICAgICAgIG9iaiA9IGl0ci5uZXh0KCk7CiAgICAgICAgICAgIGZpbGUgPSBn\nZXRTb3VyY2VGaWxlKG9iaik7CiAgICAgICAgICAgIGlmIChmaWxlID09IG51\nbGwpIHsKICAgICAgICAgICAgICAgIGlmIChfbG9nICE9IG51bGwgJiYgX2xv\nZy5pc1RyYWNlRW5hYmxlZCgpKQogICAgICAgICAgICAgICAgICAgIF9sb2cu\ndHJhY2UoX2xvYy5nZXQoIm5vLWZpbGUiLCBvYmopKTsKICAgICAgICAgICAg\nICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmaWxl\nT2JqcyA9IChDb2xsZWN0aW9uKSBmaWxlcy5nZXQoZmlsZSk7CiAgICAgICAg\nICAgIGlmIChmaWxlT2JqcyA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICBm\naWxlT2JqcyA9IG5ldyBMaW5rZWRMaXN0KCk7CiAgICAgICAgICAgICAgICBm\naWxlcy5wdXQoZmlsZSwgZmlsZU9ianMpOwogICAgICAgICAgICB9CiAgICAg\nICAgICAgIGZpbGVPYmpzLmFkZChvYmopOwogICAgICAgIH0KCiAgICAgICAg\ncmV0dXJuIGZpbGVzOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRo\nZSBzb3VyY2UgZmlsZSBmb3IgdGhlIGdpdmVuIGluc3RhbmNlLiBCeSBkZWZh\ndWx0LCBjaGVja3MKICAgICAqIHRvIHNlZSBpZiB0aGUgaW5zdGFuY2UgaW1w\nbGVtZW50cyB7QGxpbmsgU291cmNlVHJhY2tlcn0uCiAgICAgKi8KICAgIHBy\nb3RlY3RlZCBGaWxlIGdldFNvdXJjZUZpbGUoT2JqZWN0IG9iaikgewogICAg\nICAgIGlmIChvYmogaW5zdGFuY2VvZiBTb3VyY2VUcmFja2VyKQogICAgICAg\nICAgICByZXR1cm4gKChTb3VyY2VUcmFja2VyKSBvYmopLmdldFNvdXJjZUZp\nbGUoKTsKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBzZXJpYWxpemUoRmlsZSBmaWxlLCBpbnQgZmxhZ3MpIHRocm93cyBJ\nT0V4Y2VwdGlvbiB7CiAgICAgICAgaWYgKF9sb2cgIT0gbnVsbCkKICAgICAg\nICAgICAgX2xvZy5pbmZvKF9sb2MuZ2V0KCJzZXItZmlsZSIsIGZpbGUpKTsK\nCiAgICAgICAgX2JhY2t1cCA9IHByZXBhcmVXcml0ZShmaWxlKTsKICAgICAg\nICBGaWxlV3JpdGVyIG91dCA9IG5ldyBGaWxlV3JpdGVyKGZpbGUuZ2V0Q2Fu\nb25pY2FsUGF0aCgpLAogICAgICAgICAgICAoZmxhZ3MgJiBBUFBFTkQpID4g\nMCk7CiAgICAgICAgc2VyaWFsaXplKG91dCwgZmxhZ3MpOwogICAgICAgIG91\ndC5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNlcmlhbGl6ZShX\ncml0ZXIgb3V0LCBpbnQgZmxhZ3MpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKChmbGFncyAmIFBSRVRUWSkg\nPiAwKQogICAgICAgICAgICAgICAgc2VyaWFsaXplKG5ldyBTdHJlYW1SZXN1\nbHQobmV3IFhNTFdyaXRlcihvdXQpKSwgZmxhZ3MpOwogICAgICAgICAgICBl\nbHNlCiAgICAgICAgICAgICAgICBzZXJpYWxpemUobmV3IFN0cmVhbVJlc3Vs\ndChvdXQpLCBmbGFncyk7CiAgICAgICAgfSBjYXRjaCAoU0FYRXhjZXB0aW9u\nIHNlKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJT0V4Y2VwdGlvbihzZS50\nb1N0cmluZygpKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBT\nZXJpYWxpemUgdGhlIGN1cnJlbnQgc2V0IG9mIG9iamVjdHMgdG8gdGhlIGdp\ndmVuIHJlc3VsdC4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2VyaWFsaXpl\nKFJlc3VsdCByZXN1bHQsIGludCBmbGFncykgdGhyb3dzIFNBWEV4Y2VwdGlv\nbiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgVHJhbnNmb3JtZXJIYW5k\nbGVyIHRyYW5zID0gX2ZhY3RvcnkubmV3VHJhbnNmb3JtZXJIYW5kbGVyKCk7\nCiAgICAgICAgICAgIHRyYW5zLnNldFJlc3VsdChyZXN1bHQpOwogICAgICAg\nICAgICBzZXJpYWxpemUodHJhbnMsIGZsYWdzKTsKICAgICAgICB9IGNhdGNo\nIChUcmFuc2Zvcm1lckNvbmZpZ3VyYXRpb25FeGNlcHRpb24gdGNlKSB7CiAg\nICAgICAgICAgIHRocm93IG5ldyBTQVhFeGNlcHRpb24odGNlKTsKICAgICAg\nICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXJpbGl6ZSB0aGUgY3VycmVu\ndCBzZXQgb2Ygb2JqZWN0cyB0byBhIHNlcmllcyBvZiBTQVggZXZlbnRzIG9u\nIHRoZQogICAgICogZ2l2ZW4gaGFuZGxlci4KICAgICAqLwogICAgcHVibGlj\nIHZvaWQgc2VyaWFsaXplKENvbnRlbnRIYW5kbGVyIGhhbmRsZXIsIGludCBm\nbGFncykKICAgICAgICB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgICAgICBz\nZXJpYWxpemUoZ2V0T2JqZWN0cygpLCBoYW5kbGVyLCBmbGFncyk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBTZXJpYWxpemUgdGhlIGdpdmVuIGNvbGxlY3Rp\nb24gb2Ygb2JqZWN0cyB0byB0aGUgZ2l2ZW4gaGFuZGxlci4KICAgICAqLwog\nICAgcHJpdmF0ZSB2b2lkIHNlcmlhbGl6ZShDb2xsZWN0aW9uIG9ianMsIENv\nbnRlbnRIYW5kbGVyIGhhbmRsZXIsIGludCBmbGFncykKICAgICAgICB0aHJv\nd3MgU0FYRXhjZXB0aW9uIHsKICAgICAgICBpZiAoX2xvZyAhPSBudWxsICYm\nIF9sb2cuaXNUcmFjZUVuYWJsZWQoKSkKICAgICAgICAgICAgX2xvZy50cmFj\nZShfbG9jLmdldCgic2VyLW9ianMiLCBvYmpzKSk7CgogICAgICAgIF9oYW5k\nbGVyID0gaGFuZGxlcjsKICAgICAgICBfZmxhZ3MgPSBmbGFnczsKICAgICAg\nICB0cnkgewogICAgICAgICAgICBpZiAoIW9ianMuaXNFbXB0eSgpKSB7CiAg\nICAgICAgICAgICAgICBoYW5kbGVyLnN0YXJ0RG9jdW1lbnQoKTsKICAgICAg\nICAgICAgICAgIHNlcmlhbGl6ZShvYmpzKTsKICAgICAgICAgICAgICAgIGhh\nbmRsZXIuZW5kRG9jdW1lbnQoKTsKICAgICAgICAgICAgfQogICAgICAgIH0K\nICAgICAgICBmaW5hbGx5IHsKICAgICAgICAgICAgcmVzZXQoKTsKICAgICAg\nICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRoaXMgc2VyaWFs\naXphdGlvbiBpcyBpbiB2ZXJib3NlIG1vZGUuCiAgICAgKi8KICAgIHByb3Rl\nY3RlZCBib29sZWFuIGlzVmVyYm9zZSgpIHsKICAgICAgICByZXR1cm4gKF9m\nbGFncyAmIFZFUkJPU0UpID4gMDsKICAgIH0KCiAgICAvKioKICAgICAqIFRo\nZSBiYWNrdXAgZmlsZSBtYWRlIGZvciB0aGUgY3VycmVudCBmaWxlIGJlaW5n\nIHBhcnNlZC4KICAgICAqLwogICAgcHJvdGVjdGVkIEZpbGUgY3VycmVudEJh\nY2t1cEZpbGUoKSB7CiAgICAgICAgcmV0dXJuIF9iYWNrdXA7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBTdGFydCBhbiBlbGVtZW50IHdpdGggdGhlIGN1cnJl\nbnQgYXR0cmlidXRlIHNldHRpbmdzLiBDbGVhcnMgdGhlCiAgICAgKiBhdHRy\naWJ1dGVzIGFzIHdlbGwuCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIHN0\nYXJ0RWxlbWVudChTdHJpbmcgbmFtZSkgdGhyb3dzIFNBWEV4Y2VwdGlvbiB7\nCiAgICAgICAgX2hhbmRsZXIuc3RhcnRFbGVtZW50KCIiLCBuYW1lLCBuYW1l\nLCBfYXR0cnMpOwogICAgICAgIF9hdHRycy5jbGVhcigpOwogICAgfQoKICAg\nIC8qKgogICAgICogRW5kIHRoZSBjdXJyZW50IGVsZW1lbnQuCiAgICAgKi8K\nICAgIHByb3RlY3RlZCB2b2lkIGVuZEVsZW1lbnQoU3RyaW5nIG5hbWUpIHRo\ncm93cyBTQVhFeGNlcHRpb24gewogICAgICAgIF9oYW5kbGVyLmVuZEVsZW1l\nbnQoIiIsIG5hbWUsIG5hbWUpOwogICAgfQoKICAgIC8qKgogICAgICogQWRk\nIHRleHQgdG8gdGhlIGN1cnJlbnQgZWxlbWVudC4KICAgICAqLwogICAgcHJv\ndGVjdGVkIHZvaWQgYWRkVGV4dChTdHJpbmcgdGV4dCkgdGhyb3dzIFNBWEV4\nY2VwdGlvbiB7CiAgICAgICAgX2hhbmRsZXIuY2hhcmFjdGVycyh0ZXh0LnRv\nQ2hhckFycmF5KCksIDAsIHRleHQubGVuZ3RoKCkpOwogICAgfQoKICAgIC8q\nKgogICAgICogQWRkIGFuIGF0dHJpYnV0ZSB0byB0aGUgY3VycmVudCBncm91\ncC4KICAgICAqLwogICAgcHJvdGVjdGVkIHZvaWQgYWRkQXR0cmlidXRlKFN0\ncmluZyBuYW1lLCBTdHJpbmcgdmFsdWUpIHsKICAgICAgICBfYXR0cnMuYWRk\nQXR0cmlidXRlKCIiLCBuYW1lLCBuYW1lLCAiQ0RBVEEiLCB2YWx1ZSk7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBUaGUgY3VycmVudCBhdHRyaWJ1dGVzLgog\nICAgICovCiAgICBwcm90ZWN0ZWQgQXR0cmlidXRlcyBnZXRBdHRyaWJ1dGVz\nKCkgewogICAgICAgIHJldHVybiBfYXR0cnM7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBBZGQgYSBjb21tZW50IHRvIHRoZSBzdHJlYW0uCiAgICAgKi8KICAg\nIHByb3RlY3RlZCB2b2lkIGFkZENvbW1lbnRzKFN0cmluZ1tdIGNvbW1lbnRz\nKSB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgICAgICBpZiAoY29tbWVudHMg\nPT0gbnVsbCB8fCBjb21tZW50cy5sZW5ndGggPT0gMAogICAgICAgICAgICB8\nfCAhKF9oYW5kbGVyIGluc3RhbmNlb2YgTGV4aWNhbEhhbmRsZXIpKQogICAg\nICAgICAgICByZXR1cm47CgogICAgICAgIExleGljYWxIYW5kbGVyIGxoID0g\nKExleGljYWxIYW5kbGVyKSBfaGFuZGxlcjsKICAgICAgICBjaGFyW10gY2hh\ncnM7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb21tZW50cy5sZW5n\ndGg7IGkrKykgewogICAgICAgICAgICBjaGFycyA9IGNvbW1lbnRzW2ldLnRv\nQ2hhckFycmF5KCk7CiAgICAgICAgICAgIGxoLmNvbW1lbnQoY2hhcnMsIDAs\nIGNoYXJzLmxlbmd0aCk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAg\nICogV3JpdGUgdGhlIGdpdmVuIGVudGl0eSdzIGNvbW1lbnRzLiBCeSBkZWZh\ndWx0LCB0ZXN0cyBpZiBlbnRpdHkgaXMKICAgICAqIHtAbGluayBDb21tZW50\nYWJsZX0uCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIGFkZENvbW1lbnRz\nKE9iamVjdCBvYmopIHRocm93cyBTQVhFeGNlcHRpb24gewogICAgICAgIGlm\nIChvYmogaW5zdGFuY2VvZiBDb21tZW50YWJsZSkKICAgICAgICAgICAgYWRk\nQ29tbWVudHMoKChDb21tZW50YWJsZSkgb2JqKS5nZXRDb21tZW50cygpKTsK\nICAgIH0KCiAgICAvKioKICAgICAqIFJlc2V0IHNlcmlhbGl6YXRpb24gc3Rh\ndGUgZm9yIHRoZSBuZXh0IGRvY3VtZW50LgogICAgICovCiAgICBwcm90ZWN0\nZWQgdm9pZCByZXNldCgpIHsKICAgICAgICBfYXR0cnMuY2xlYXIoKTsKICAg\nICAgICBfaGFuZGxlciA9IG51bGw7CiAgICAgICAgX2ZsYWdzID0gMDsKICAg\nICAgICBfYmFja3VwID0gbnVsbDsKICAgIH0KCiAgICAvKioKICAgICAqIFNl\ncmlhbGl6ZSB0aGUgZ2l2ZW4gc2V0IG9mIG9iamVjdHMuCiAgICAgKi8KICAg\nIHByb3RlY3RlZCBhYnN0cmFjdCB2b2lkIHNlcmlhbGl6ZShDb2xsZWN0aW9u\nIG9ianMpIHRocm93cyBTQVhFeGNlcHRpb247CgogICAgLyoqCiAgICAgKiBS\nZXR1cm4gdGhlIGN1cnJlbnQgc2V0IG9mIG9iamVjdHMgZm9yIHNlcmlhbGl6\nYXRpb24uCiAgICAgKi8KICAgIHByb3RlY3RlZCBhYnN0cmFjdCBDb2xsZWN0\naW9uIGdldE9iamVjdHMoKTsKfQo=\n","encoding":"base64"}

