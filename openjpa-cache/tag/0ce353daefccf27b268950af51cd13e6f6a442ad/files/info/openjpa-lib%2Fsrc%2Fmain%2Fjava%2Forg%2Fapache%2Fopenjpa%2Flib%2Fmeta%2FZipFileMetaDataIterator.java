{"sha":"7390a0c2b5da1a863bc7cda0dd291b2db069b4f6","node_id":"MDQ6QmxvYjIwNjM2NDo3MzkwYTBjMmI1ZGExYTg2M2JjN2NkYTBkZDI5MWIyZGIwNjliNGY2","size":3944,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/7390a0c2b5da1a863bc7cda0dd291b2db069b4f6","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIubWV0YTsKCmltcG9ydCBqYXZhLmlvLkJ5dGVBcnJheU91\ndHB1dFN0cmVhbTsKaW1wb3J0IGphdmEuaW8uRmlsZTsKaW1wb3J0IGphdmEu\naW8uSU9FeGNlcHRpb247CmltcG9ydCBqYXZhLmlvLklucHV0U3RyZWFtOwpp\nbXBvcnQgamF2YS5uZXQuVVJMOwppbXBvcnQgamF2YS51dGlsLkVudW1lcmF0\naW9uOwppbXBvcnQgamF2YS51dGlsLk5vU3VjaEVsZW1lbnRFeGNlcHRpb247\nCmltcG9ydCBqYXZhLnV0aWwuemlwLlppcEVudHJ5OwppbXBvcnQgamF2YS51\ndGlsLnppcC5aaXBGaWxlOwoKLyoqCiAqIEl0ZXJhdG9yIG92ZXIgYWxsIG1l\ndGFkYXRhIHJlc291cmNlcyBpbiBhIGdpdmVuIHppcCBmaWxlLgogKgogKiBA\nYXV0aG9yIEFiZSBXaGl0ZQogKiBAbm9qYXZhZG9jCiAqLwpwdWJsaWMgY2xh\nc3MgWmlwRmlsZU1ldGFEYXRhSXRlcmF0b3IKICAgIGltcGxlbWVudHMgTWV0\nYURhdGFJdGVyYXRvciwgTWV0YURhdGFGaWx0ZXIuUmVzb3VyY2UgewoKICAg\nIHByaXZhdGUgZmluYWwgWmlwRmlsZSBfZmlsZTsKICAgIHByaXZhdGUgZmlu\nYWwgTWV0YURhdGFGaWx0ZXIgX2ZpbHRlcjsKICAgIHByaXZhdGUgZmluYWwg\nRW51bWVyYXRpb24gX2VudHJpZXM7CiAgICBwcml2YXRlIGZpbmFsIGJvb2xl\nYW4gX2Nsb3NlOwogICAgcHJpdmF0ZSBaaXBFbnRyeSBfZW50cnkgPSBudWxs\nOwogICAgcHJpdmF0ZSBaaXBFbnRyeSBfbGFzdCA9IG51bGw7CgogICAgLyoq\nCiAgICAgKiBDb25zdHJ1Y3Rvcjsgc3VwcGx5IHppcC9qYXIgVVJMIGFuZCBv\ncHRpb25hbCBmaWxlIGZpbHRlci4KICAgICAqLwogICAgcHVibGljIFppcEZp\nbGVNZXRhRGF0YUl0ZXJhdG9yKFVSTCB1cmwsIE1ldGFEYXRhRmlsdGVyIGZp\nbHRlcikKICAgICAgICB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgIF9m\naWxlID0gKHVybCA9PSBudWxsKSA/IG51bGwgOiAoWmlwRmlsZSkgdXJsLmdl\ndENvbnRlbnQoKTsKICAgICAgICBfZmlsdGVyID0gZmlsdGVyOwogICAgICAg\nIF9lbnRyaWVzID0gKF9maWxlID09IG51bGwpID8gbnVsbCA6IF9maWxlLmVu\ndHJpZXMoKTsKICAgICAgICBfY2xvc2UgPSBmYWxzZTsKICAgIH0KCiAgICAv\nKioKICAgICAqIENvbnN0cnVjdG9yOyBzdXBwbHkgemlwIGZpbGUgYW5kIG9w\ndGlvbmFsIGZpbGUgZmlsdGVyLgogICAgICovCiAgICBwdWJsaWMgWmlwRmls\nZU1ldGFEYXRhSXRlcmF0b3IoWmlwRmlsZSBmaWxlLCBNZXRhRGF0YUZpbHRl\nciBmaWx0ZXIpIHsKICAgICAgICBfZmlsZSA9IGZpbGU7CiAgICAgICAgX2Zp\nbHRlciA9IGZpbHRlcjsKICAgICAgICBfZW50cmllcyA9IChmaWxlID09IG51\nbGwpID8gbnVsbCA6IGZpbGUuZW50cmllcygpOwogICAgICAgIF9jbG9zZSA9\nIHRydWU7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gaGFzTmV4dCgpIHRo\ncm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgaWYgKF9lbnRyaWVzID09IG51\nbGwpCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCiAgICAgICAgLy8gc2Vh\ncmNoIGZvciBuZXh0IG1ldGFkYXRhIGZpbGUKICAgICAgICB3aGlsZSAoX2Vu\ndHJ5ID09IG51bGwgJiYgX2VudHJpZXMuaGFzTW9yZUVsZW1lbnRzKCkpIHsK\nICAgICAgICAgICAgX2VudHJ5ID0gKFppcEVudHJ5KSBfZW50cmllcy5uZXh0\nRWxlbWVudCgpOwogICAgICAgICAgICBpZiAoX2ZpbHRlciAhPSBudWxsICYm\nICFfZmlsdGVyLm1hdGNoZXModGhpcykpCiAgICAgICAgICAgICAgICBfZW50\ncnkgPSBudWxsOwogICAgICAgIH0KICAgICAgICByZXR1cm4gX2VudHJ5ICE9\nIG51bGw7CiAgICB9CgogICAgcHVibGljIE9iamVjdCBuZXh0KCkgdGhyb3dz\nIElPRXhjZXB0aW9uIHsKICAgICAgICBpZiAoIWhhc05leHQoKSkKICAgICAg\nICAgICAgdGhyb3cgbmV3IE5vU3VjaEVsZW1lbnRFeGNlcHRpb24oKTsKICAg\nICAgICBTdHJpbmcgcmV0ID0gX2VudHJ5LmdldE5hbWUoKTsKICAgICAgICBf\nbGFzdCA9IF9lbnRyeTsKICAgICAgICBfZW50cnkgPSBudWxsOwogICAgICAg\nIHJldHVybiByZXQ7CiAgICB9CgogICAgcHVibGljIElucHV0U3RyZWFtIGdl\ndElucHV0U3RyZWFtKCkgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICBp\nZiAoX2xhc3QgPT0gbnVsbCkKICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVn\nYWxTdGF0ZUV4Y2VwdGlvbigpOwogICAgICAgIHJldHVybiBfZmlsZS5nZXRJ\nbnB1dFN0cmVhbShfbGFzdCk7CiAgICB9CgogICAgcHVibGljIEZpbGUgZ2V0\nRmlsZSgpIHsKICAgICAgICBpZiAoX2xhc3QgPT0gbnVsbCkKICAgICAgICAg\nICAgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbigpOwogICAgICAg\nIHJldHVybiBudWxsOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGNsb3NlKCkg\newogICAgICAgIGlmIChfY2xvc2UpCiAgICAgICAgICAgIHRyeSB7CiAgICAg\nICAgICAgICAgICBfZmlsZS5jbG9zZSgpOwogICAgICAgICAgICB9IGNhdGNo\nIChJT0V4Y2VwdGlvbiBpb2UpIHsKICAgICAgICAgICAgfQogICAgfQoKICAg\nIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwog\nICAgLy8gTWV0YURhdGFGaWx0ZXIuUmVzb3VyY2UgaW1wbGVtZW50YXRpb24K\nICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLwoKICAgIHB1YmxpYyBTdHJpbmcgZ2V0TmFtZSgpIHsKICAgICAgICByZXR1\ncm4gX2VudHJ5LmdldE5hbWUoKTsKICAgIH0KCiAgICBwdWJsaWMgYnl0ZVtd\nIGdldENvbnRlbnQoKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgIGxv\nbmcgc2l6ZSA9IF9lbnRyeS5nZXRTaXplKCk7CiAgICAgICAgaWYgKHNpemUg\nPT0gMCkKICAgICAgICAgICAgcmV0dXJuIG5ldyBieXRlWzBdOwoKICAgICAg\nICBJbnB1dFN0cmVhbSBpbiA9IF9maWxlLmdldElucHV0U3RyZWFtKF9lbnRy\neSk7CiAgICAgICAgYnl0ZVtdIGNvbnRlbnQ7CiAgICAgICAgaWYgKHNpemUg\nPCAwKSB7CiAgICAgICAgICAgIEJ5dGVBcnJheU91dHB1dFN0cmVhbSBib3V0\nID0gbmV3IEJ5dGVBcnJheU91dHB1dFN0cmVhbSgpOwogICAgICAgICAgICBi\neXRlW10gYnVmID0gbmV3IGJ5dGVbMTAyNF07CiAgICAgICAgICAgIGZvciAo\naW50IHI7IChyID0gaW4ucmVhZChidWYpKSAhPSAtMTsgYm91dC53cml0ZShi\ndWYsIDAsIHIpKSA7CiAgICAgICAgICAgIGNvbnRlbnQgPSBib3V0LnRvQnl0\nZUFycmF5KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29udGVu\ndCA9IG5ldyBieXRlWyhpbnQpIHNpemVdOwogICAgICAgICAgICBpbi5yZWFk\nKGNvbnRlbnQpOwogICAgICAgIH0KICAgICAgICBpbi5jbG9zZSgpOwogICAg\nICAgIHJldHVybiBjb250ZW50OwogICAgfQp9Cgo=\n","encoding":"base64"}

