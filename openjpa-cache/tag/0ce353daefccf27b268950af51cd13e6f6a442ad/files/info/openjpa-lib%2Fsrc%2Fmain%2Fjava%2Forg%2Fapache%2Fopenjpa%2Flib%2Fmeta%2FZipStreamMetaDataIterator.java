{"sha":"b3c8b6d92a24638cb57cc42b4a30a5c07e185515","node_id":"MDQ6QmxvYjIwNjM2NDpiM2M4YjZkOTJhMjQ2MzhjYjU3Y2M0MmI0YTMwYTVjMDdlMTg1NTE1","size":4220,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/b3c8b6d92a24638cb57cc42b4a30a5c07e185515","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIubWV0YTsKCmltcG9ydCBqYXZhLmlvLkJ5dGVBcnJheUlu\ncHV0U3RyZWFtOwppbXBvcnQgamF2YS5pby5CeXRlQXJyYXlPdXRwdXRTdHJl\nYW07CmltcG9ydCBqYXZhLmlvLkZpbGU7CmltcG9ydCBqYXZhLmlvLklPRXhj\nZXB0aW9uOwppbXBvcnQgamF2YS5pby5JbnB1dFN0cmVhbTsKaW1wb3J0IGph\ndmEudXRpbC5Ob1N1Y2hFbGVtZW50RXhjZXB0aW9uOwppbXBvcnQgamF2YS51\ndGlsLnppcC5aaXBFbnRyeTsKaW1wb3J0IGphdmEudXRpbC56aXAuWmlwSW5w\ndXRTdHJlYW07CgovKioKICogSXRlcmF0b3Igb3ZlciBhbGwgbWV0YWRhdGEg\ncmVzb3VyY2VzIGluIGEgZ2l2ZW4gemlwIGlucHV0IHN0cmVhbS4KICoKICog\nQGF1dGhvciBBYmUgV2hpdGUKICogQG5vamF2YWRvYwogKi8KcHVibGljIGNs\nYXNzIFppcFN0cmVhbU1ldGFEYXRhSXRlcmF0b3IKICAgIGltcGxlbWVudHMg\nTWV0YURhdGFJdGVyYXRvciwgTWV0YURhdGFGaWx0ZXIuUmVzb3VyY2UgewoK\nICAgIHByaXZhdGUgZmluYWwgWmlwSW5wdXRTdHJlYW0gX3N0cmVhbTsKICAg\nIHByaXZhdGUgZmluYWwgTWV0YURhdGFGaWx0ZXIgX2ZpbHRlcjsKICAgIHBy\naXZhdGUgWmlwRW50cnkgX2VudHJ5ID0gbnVsbDsKICAgIHByaXZhdGUgWmlw\nRW50cnkgX2xhc3QgPSBudWxsOwogICAgcHJpdmF0ZSBieXRlW10gX2J1ZiA9\nIG51bGw7CgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3Rvcjsgc3VwcGx5IHpp\ncCBzdHJlYW0gYW5kIG9wdGlvbmFsIG1ldGFkYXRhIGZpbHRlci4KICAgICAq\nLwogICAgcHVibGljIFppcFN0cmVhbU1ldGFEYXRhSXRlcmF0b3IoWmlwSW5w\ndXRTdHJlYW0gc3RyZWFtLAogICAgICAgIE1ldGFEYXRhRmlsdGVyIGZpbHRl\ncikgewogICAgICAgIF9zdHJlYW0gPSBzdHJlYW07CiAgICAgICAgX2ZpbHRl\nciA9IGZpbHRlcjsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBoYXNOZXh0\nKCkgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICBpZiAoX3N0cmVhbSA9\nPSBudWxsKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgaWYg\nKF9lbnRyeSAhPSBudWxsKQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKCiAg\nICAgICAgLy8gY2xvc2UgbGFzdCByc3JjCiAgICAgICAgaWYgKF9idWYgPT0g\nbnVsbCAmJiBfbGFzdCAhPSBudWxsKQogICAgICAgICAgICBfc3RyZWFtLmNs\nb3NlRW50cnkoKTsKICAgICAgICBfbGFzdCA9IG51bGw7CiAgICAgICAgX2J1\nZiA9IG51bGw7CgogICAgICAgIC8vIHNlYXJjaCBmb3IgbmV4dCBmaWxlCiAg\nICAgICAgWmlwRW50cnkgZW50cnk7CiAgICAgICAgd2hpbGUgKF9lbnRyeSA9\nPSBudWxsICYmIChlbnRyeSA9IF9zdHJlYW0uZ2V0TmV4dEVudHJ5KCkpICE9\nIG51bGwpIHsKICAgICAgICAgICAgX2VudHJ5ID0gZW50cnk7CiAgICAgICAg\nICAgIGlmIChfZmlsdGVyICE9IG51bGwgJiYgIV9maWx0ZXIubWF0Y2hlcyh0\naGlzKSkgewogICAgICAgICAgICAgICAgX2VudHJ5ID0gbnVsbDsKICAgICAg\nICAgICAgICAgIF9zdHJlYW0uY2xvc2VFbnRyeSgpOwogICAgICAgICAgICB9\nCiAgICAgICAgfQogICAgICAgIHJldHVybiBfZW50cnkgIT0gbnVsbDsKICAg\nIH0KCiAgICBwdWJsaWMgT2JqZWN0IG5leHQoKSB0aHJvd3MgSU9FeGNlcHRp\nb24gewogICAgICAgIGlmICghaGFzTmV4dCgpKQogICAgICAgICAgICB0aHJv\ndyBuZXcgTm9TdWNoRWxlbWVudEV4Y2VwdGlvbigpOwogICAgICAgIFN0cmlu\nZyByZXQgPSBfZW50cnkuZ2V0TmFtZSgpOwogICAgICAgIF9sYXN0ID0gX2Vu\ndHJ5OwogICAgICAgIF9lbnRyeSA9IG51bGw7CiAgICAgICAgcmV0dXJuIHJl\ndDsKICAgIH0KCiAgICBwdWJsaWMgSW5wdXRTdHJlYW0gZ2V0SW5wdXRTdHJl\nYW0oKSB7CiAgICAgICAgaWYgKF9sYXN0ID09IG51bGwpCiAgICAgICAgICAg\nIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKTsKCiAgICAgICAg\naWYgKF9idWYgIT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIG5ldyBCeXRl\nQXJyYXlJbnB1dFN0cmVhbShfYnVmKTsKICAgICAgICByZXR1cm4gbmV3IE5v\nQ2xvc2VJbnB1dFN0cmVhbSgpOwogICAgfQoKICAgIHB1YmxpYyBGaWxlIGdl\ndEZpbGUoKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgY2xvc2UoKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\nX3N0cmVhbS5jbG9zZSgpOwogICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9u\nIGlvZSkgewogICAgICAgIH0KICAgIH0KCiAgICAvLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIC8vIE1ldGFEYXRhRmls\ndGVyLlJlc291cmNlIGltcGxlbWVudGF0aW9uCiAgICAvLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICBwdWJsaWMgU3Ry\naW5nIGdldE5hbWUoKSB7CiAgICAgICAgcmV0dXJuIF9lbnRyeS5nZXROYW1l\nKCk7CiAgICB9CgogICAgcHVibGljIGJ5dGVbXSBnZXRDb250ZW50KCkgdGhy\nb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICAvLyBidWZmZXIgY29udGVudCBz\nbyB0aGF0IGZ1dHVyZSBjYWxscyB0byBnZXRJbnB1dFN0cmVhbSBjYW4gcmVh\nZAogICAgICAgIC8vIHRoZSBzYW1lIGRhdGEKICAgICAgICBpbnQgc2l6ZSA9\nIChpbnQpIF9lbnRyeS5nZXRTaXplKCk7CiAgICAgICAgaWYgKHNpemUgPCAw\nKSB7CiAgICAgICAgICAgIEJ5dGVBcnJheU91dHB1dFN0cmVhbSBib3V0ID0g\nbmV3IEJ5dGVBcnJheU91dHB1dFN0cmVhbSgpOwogICAgICAgICAgICBieXRl\nW10gYnVmID0gbmV3IGJ5dGVbMTAyNF07CiAgICAgICAgICAgIGZvciAoaW50\nIHI7IChyID0gX3N0cmVhbS5yZWFkKGJ1ZikpICE9IC0xOyBib3V0LndyaXRl\nKGJ1ZiwgMCwgcikpIDsKICAgICAgICAgICAgX2J1ZiA9IGJvdXQudG9CeXRl\nQXJyYXkoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfYnVmID0g\nbmV3IGJ5dGVbc2l6ZV07CiAgICAgICAgICAgIF9zdHJlYW0ucmVhZChfYnVm\nKTsKICAgICAgICB9CiAgICAgICAgX3N0cmVhbS5jbG9zZUVudHJ5KCk7CiAg\nICAgICAgcmV0dXJuIF9idWY7CiAgICB9CgogICAgLyoqCiAgICAgKiBOb24t\nY2xvc2luZyBpbnB1dCBzdHJlYW0gdXNlZCB0byBtYWtlIHN1cmUgdGhlIHVu\nZGVybHlpbmcgemlwCiAgICAgKiBzdHJlYW0gaXMgbm90IGNsb3NlZC4KICAg\nICAqLwogICAgcHJpdmF0ZSBjbGFzcyBOb0Nsb3NlSW5wdXRTdHJlYW0gZXh0\nZW5kcyBJbnB1dFN0cmVhbSB7CgogICAgICAgIHB1YmxpYyBpbnQgYXZhaWxh\nYmxlKCkgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICAgICAgcmV0dXJu\nIF9zdHJlYW0uYXZhaWxhYmxlKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJs\naWMgaW50IHJlYWQoKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgICAg\nICByZXR1cm4gX3N0cmVhbS5yZWFkKCk7CiAgICAgICAgfQoKICAgICAgICBw\ndWJsaWMgaW50IHJlYWQoYnl0ZVtdIGIsIGludCBvZmYsIGludCBsZW4pIHRo\ncm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgICAgIHJldHVybiBfc3RyZWFt\nLnJlYWQoYiwgb2ZmLCBsZW4pOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIHZvaWQgY2xvc2UoKSB7CiAgICAgICAgfQogICAgfQp9Cgo=\n","encoding":"base64"}

