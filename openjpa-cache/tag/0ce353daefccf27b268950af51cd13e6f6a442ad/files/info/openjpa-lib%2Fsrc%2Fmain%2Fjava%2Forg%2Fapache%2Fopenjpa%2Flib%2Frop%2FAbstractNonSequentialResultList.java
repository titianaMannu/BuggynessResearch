{"sha":"4535703ba817b1c34f05a8fa7de5f4b5a871ad6f","node_id":"MDQ6QmxvYjIwNjM2NDo0NTM1NzAzYmE4MTdiMWMzNGYwNWE4ZmE3ZGU1ZjRiNWE4NzFhZDZm","size":4715,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/4535703ba817b1c34f05a8fa7de5f4b5a871ad6f","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIucm9wOwoKaW1wb3J0IGphdmEudXRpbC5BYnN0cmFjdExp\nc3Q7CmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0OwppbXBvcnQgamF2YS51\ndGlsLkNvbGxlY3Rpb247CmltcG9ydCBqYXZhLnV0aWwuSXRlcmF0b3I7Cmlt\ncG9ydCBqYXZhLnV0aWwuTGlzdEl0ZXJhdG9yOwppbXBvcnQgamF2YS51dGls\nLk5vU3VjaEVsZW1lbnRFeGNlcHRpb247CgppbXBvcnQgb3JnLmFwYWNoZS5j\nb21tb25zLmxhbmcuT2JqZWN0VXRpbHM7CgovKioKICogQWJzdHJhY3QgYmFz\nZSBjbGFzcyBmb3IgcmFuZG9tLWFjY2VzcyByZXN1bHQgbGlzdHMuIFVubGlr\nZSB0aGUKICoge0BsaW5rIEFic3RyYWN0TGlzdH0sIHRoaXMgY2xhc3MgZG9l\nc24ndCByZWx5IG9uIHRoZQogKiB7QGxpbmsgQ29sbGVjdGlvbiNzaXplfSBt\nZXRob2QuCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqIEBub2phdmFkb2MK\nICovCnB1YmxpYyBhYnN0cmFjdCBjbGFzcyBBYnN0cmFjdE5vblNlcXVlbnRp\nYWxSZXN1bHRMaXN0CiAgICBleHRlbmRzIEFic3RyYWN0UmVzdWx0TGlzdCB7\nCgogICAgcHJvdGVjdGVkIHN0YXRpYyBmaW5hbCBPYmplY3QgUEFTVF9FTkQg\nPSBuZXcgT2JqZWN0KCk7CgogICAgLyoqCiAgICAgKiBJbXBsZW1lbnQgdGhp\ncyBtZXRob2QgYW5kIHtAbGluayAjc2l6ZX0uIFJldHVybiB7QGxpbmsgI1BB\nU1RfRU5EfQogICAgICogaWYgdGhlIGluZGV4IGlzIG91dCBvZiBib3VuZHMu\nCiAgICAgKi8KICAgIHByb3RlY3RlZCBhYnN0cmFjdCBPYmplY3QgZ2V0SW50\nZXJuYWwoaW50IGluZGV4KTsKCiAgICBwdWJsaWMgYm9vbGVhbiBjb250YWlu\ncyhPYmplY3QgbykgewogICAgICAgIGFzc2VydE9wZW4oKTsKICAgICAgICBP\nYmplY3Qgb2JqOwogICAgICAgIGZvciAoaW50IGkgPSAwOyB0cnVlOyBpKysp\nIHsKICAgICAgICAgICAgb2JqID0gZ2V0SW50ZXJuYWwoaSk7CiAgICAgICAg\nICAgIGlmIChvYmogPT0gUEFTVF9FTkQpCiAgICAgICAgICAgICAgICBicmVh\nazsKICAgICAgICAgICAgaWYgKE9iamVjdFV0aWxzLmVxdWFscyhvLCBvYmop\nKQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAg\nICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBj\nb250YWluc0FsbChDb2xsZWN0aW9uIGMpIHsKICAgICAgICBhc3NlcnRPcGVu\nKCk7CiAgICAgICAgZm9yIChJdGVyYXRvciBpdHIgPSBjLml0ZXJhdG9yKCk7\nIGl0ci5oYXNOZXh0KCk7KQogICAgICAgICAgICBpZiAoIWNvbnRhaW5zKGl0\nci5uZXh0KCkpKQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAg\nICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgZ2V0\nKGludCBpbmRleCkgewogICAgICAgIGFzc2VydE9wZW4oKTsKICAgICAgICBP\nYmplY3Qgb2JqID0gZ2V0SW50ZXJuYWwoaW5kZXgpOwogICAgICAgIGlmIChv\nYmogPT0gUEFTVF9FTkQpCiAgICAgICAgICAgIHRocm93IG5ldyBOb1N1Y2hF\nbGVtZW50RXhjZXB0aW9uKCk7CiAgICAgICAgcmV0dXJuIG9iajsKICAgIH0K\nCiAgICBwdWJsaWMgaW50IGluZGV4T2YoT2JqZWN0IG8pIHsKICAgICAgICBh\nc3NlcnRPcGVuKCk7CiAgICAgICAgT2JqZWN0IG9iajsKICAgICAgICBmb3Ig\nKGludCBpID0gMDsgdHJ1ZTsgaSsrKSB7CiAgICAgICAgICAgIG9iaiA9IGdl\ndEludGVybmFsKGkpOwogICAgICAgICAgICBpZiAob2JqID09IFBBU1RfRU5E\nKQogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGlmIChPYmpl\nY3RVdGlscy5lcXVhbHMobywgb2JqKSkKICAgICAgICAgICAgICAgIHJldHVy\nbiBpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gLTE7CiAgICB9CgogICAg\ncHVibGljIGludCBsYXN0SW5kZXhPZihPYmplY3QgbykgewogICAgICAgIGFz\nc2VydE9wZW4oKTsKICAgICAgICBpbnQgaW5kZXggPSAtMTsKICAgICAgICBP\nYmplY3Qgb2JqOwogICAgICAgIGZvciAoaW50IGkgPSAwOyB0cnVlOyBpKysp\nIHsKICAgICAgICAgICAgb2JqID0gZ2V0SW50ZXJuYWwoaSk7CiAgICAgICAg\nICAgIGlmIChvYmogPT0gUEFTVF9FTkQpCiAgICAgICAgICAgICAgICBicmVh\nazsKICAgICAgICAgICAgaWYgKE9iamVjdFV0aWxzLmVxdWFscyhvLCBvYmop\nKQogICAgICAgICAgICAgICAgaW5kZXggPSBpOwogICAgICAgIH0KICAgICAg\nICByZXR1cm4gaW5kZXg7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gaXNF\nbXB0eSgpIHsKICAgICAgICBhc3NlcnRPcGVuKCk7CiAgICAgICAgcmV0dXJu\nIGdldEludGVybmFsKDApID09IFBBU1RfRU5EOwogICAgfQoKICAgIHB1Ymxp\nYyBJdGVyYXRvciBpdGVyYXRvcigpIHsKICAgICAgICByZXR1cm4gbGlzdEl0\nZXJhdG9yKCk7CiAgICB9CgogICAgcHVibGljIExpc3RJdGVyYXRvciBsaXN0\nSXRlcmF0b3IoKSB7CiAgICAgICAgcmV0dXJuIGxpc3RJdGVyYXRvcigwKTsK\nICAgIH0KCiAgICBwdWJsaWMgTGlzdEl0ZXJhdG9yIGxpc3RJdGVyYXRvcihp\nbnQgaW5kZXgpIHsKICAgICAgICByZXR1cm4gbmV3IFJlc3VsdExpc3RJdGVy\nYXRvcihuZXcgSXRyKGluZGV4KSwgdGhpcyk7CiAgICB9CgogICAgcHVibGlj\nIE9iamVjdFtdIHRvQXJyYXkoKSB7CiAgICAgICAgYXNzZXJ0T3BlbigpOwog\nICAgICAgIEFycmF5TGlzdCBsaXN0ID0gbmV3IEFycmF5TGlzdCgpOwogICAg\nICAgIE9iamVjdCBvYmo7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IHRydWU7\nIGkrKykgewogICAgICAgICAgICBvYmogPSBnZXRJbnRlcm5hbChpKTsKICAg\nICAgICAgICAgaWYgKG9iaiA9PSBQQVNUX0VORCkKICAgICAgICAgICAgICAg\nIGJyZWFrOwogICAgICAgICAgICBsaXN0LmFkZChvYmopOwogICAgICAgIH0K\nICAgICAgICByZXR1cm4gbGlzdC50b0FycmF5KCk7CiAgICB9CgogICAgcHVi\nbGljIE9iamVjdFtdIHRvQXJyYXkoT2JqZWN0W10gYSkgewogICAgICAgIGFz\nc2VydE9wZW4oKTsKICAgICAgICBBcnJheUxpc3QgbGlzdCA9IG5ldyBBcnJh\neUxpc3QoKTsKICAgICAgICBPYmplY3Qgb2JqOwogICAgICAgIGZvciAoaW50\nIGkgPSAwOyB0cnVlOyBpKyspIHsKICAgICAgICAgICAgb2JqID0gZ2V0SW50\nZXJuYWwoaSk7CiAgICAgICAgICAgIGlmIChvYmogPT0gUEFTVF9FTkQpCiAg\nICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgbGlzdC5hZGQob2Jq\nKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGxpc3QudG9BcnJheShhKTsK\nICAgIH0KCiAgICBwcml2YXRlIGNsYXNzIEl0ciBleHRlbmRzIEFic3RyYWN0\nTGlzdEl0ZXJhdG9yIHsKCiAgICAgICAgcHJpdmF0ZSBpbnQgX2lkeCA9IDA7\nCiAgICAgICAgcHJpdmF0ZSBPYmplY3QgX25leHQgPSBQQVNUX0VORDsKCiAg\nICAgICAgcHVibGljIEl0cihpbnQgaW5kZXgpIHsKICAgICAgICAgICAgX2lk\neCA9IGluZGV4OwogICAgICAgIH0KCiAgICAgICAgcHVibGljIGludCBuZXh0\nSW5kZXgoKSB7CiAgICAgICAgICAgIHJldHVybiBfaWR4OwogICAgICAgIH0K\nCiAgICAgICAgcHVibGljIGludCBwcmV2aW91c0luZGV4KCkgewogICAgICAg\nICAgICByZXR1cm4gX2lkeCAtIDE7CiAgICAgICAgfQoKICAgICAgICBwdWJs\naWMgYm9vbGVhbiBoYXNOZXh0KCkgewogICAgICAgICAgICBfbmV4dCA9IGdl\ndEludGVybmFsKF9pZHgpOwogICAgICAgICAgICByZXR1cm4gX25leHQgIT0g\nUEFTVF9FTkQ7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgYm9vbGVhbiBo\nYXNQcmV2aW91cygpIHsKICAgICAgICAgICAgcmV0dXJuIF9pZHggPiAwOwog\nICAgICAgIH0KCiAgICAgICAgcHVibGljIE9iamVjdCBwcmV2aW91cygpIHsK\nICAgICAgICAgICAgaWYgKF9pZHggPT0gMCkKICAgICAgICAgICAgICAgIHRo\ncm93IG5ldyBOb1N1Y2hFbGVtZW50RXhjZXB0aW9uKCk7CiAgICAgICAgICAg\nIHJldHVybiBnZXRJbnRlcm5hbCgtLV9pZHgpOwogICAgICAgIH0KCiAgICAg\nICAgcHVibGljIE9iamVjdCBuZXh0KCkgewogICAgICAgICAgICBpZiAoIWhh\nc05leHQoKSkKICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb1N1Y2hFbGVt\nZW50RXhjZXB0aW9uKCk7CiAgICAgICAgICAgIF9pZHgrKzsKICAgICAgICAg\nICAgcmV0dXJuIF9uZXh0OwogICAgICAgIH0KICAgIH0KfQo=\n","encoding":"base64"}

