{"sha":"fe5f581d6c8b3753f02488dee49e1a0b438089f2","node_id":"MDQ6QmxvYjIwNjM2NDpmZTVmNTgxZDZjOGIzNzUzZjAyNDg4ZGVlNDllMWEwYjQzODA4OWYy","size":6372,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/fe5f581d6c8b3753f02488dee49e1a0b438089f2","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIucm9wOwoKaW1wb3J0IGphdmEuaW8uT2JqZWN0U3RyZWFt\nRXhjZXB0aW9uOwppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsKaW1wb3J0\nIGphdmEudXRpbC5BcnJheXM7CmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsK\naW1wb3J0IGphdmEudXRpbC5JdGVyYXRvcjsKaW1wb3J0IGphdmEudXRpbC5N\nYXA7CgppbXBvcnQgc2VycC51dGlsLk51bWJlcnM7CgovKioKICogUmFuZG9t\nLWFjY2VzcyByZXN1bHQgbGlzdCBpbXBsZW1lbnRhdGlvbi4gSXQgbWFpbnRh\naW5zIGEgbWFwCiAqIG9mIHRoZSBpdGVtcyB0aGF0IHdlIGhhdmUgYWxyZWFk\neSBpbnN0YW50aWF0ZWQuCiAqCiAqIEBhdXRob3IgTWFyYyBQcnVkJ2hvbW1l\nYXV4CiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqIEBub2phdmFkb2MKICovCnB1\nYmxpYyBjbGFzcyBSYW5kb21BY2Nlc3NSZXN1bHRMaXN0IGV4dGVuZHMgQWJz\ndHJhY3ROb25TZXF1ZW50aWFsUmVzdWx0TGlzdCB7CgogICAgcHJpdmF0ZSBz\ndGF0aWMgZmluYWwgaW50IE9QRU4gPSAwOwogICAgcHJpdmF0ZSBzdGF0aWMg\nZmluYWwgaW50IEZSRUVEID0gMTsKICAgIHByaXZhdGUgc3RhdGljIGZpbmFs\nIGludCBDTE9TRUQgPSAyOwoKICAgIC8vIGRhdGEgcHJvdmlkZXIKICAgIHBy\naXZhdGUgUmVzdWx0T2JqZWN0UHJvdmlkZXIgX3JvcCA9IG51bGw7CgogICAg\nLy8gaG9sZHMgYWxsIHRoZSByb3cgdmFsdWVzIHRoYXQgaGF2ZSBiZWVuIGlu\nc3RhbnRpYXRlZCBzbyBmYXIKICAgIHByaXZhdGUgTWFwIF9yb3dzID0gbnVs\nbDsKICAgIHByaXZhdGUgT2JqZWN0W10gX2Z1bGwgPSBudWxsOwoKICAgIC8v\nIGJvb2trZWVwaW5nCiAgICBwcml2YXRlIGxvbmcgX3JlcXVlc3RzID0gMDsK\nICAgIHByaXZhdGUgaW50IF9zdGF0ZSA9IE9QRU47CiAgICBwcml2YXRlIGlu\ndCBfc2l6ZSA9IC0xOwoKICAgIHB1YmxpYyBSYW5kb21BY2Nlc3NSZXN1bHRM\naXN0KFJlc3VsdE9iamVjdFByb3ZpZGVyIHJvcCkgewogICAgICAgIF9yb3Ag\nPSByb3A7CiAgICAgICAgX3Jvd3MgPSBuZXdSb3dNYXAoKTsKCiAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgX3JvcC5vcGVuKCk7CiAgICAgICAgfSBjYXRj\naCAoUnVudGltZUV4Y2VwdGlvbiByZSkgewogICAgICAgICAgICBjbG9zZSgp\nOwogICAgICAgICAgICB0aHJvdyByZTsKICAgICAgICB9IGNhdGNoIChFeGNl\ncHRpb24gZSkgewogICAgICAgICAgICBjbG9zZSgpOwogICAgICAgICAgICBf\ncm9wLmhhbmRsZUNoZWNrZWRFeGNlcHRpb24oZSk7CiAgICAgICAgfQogICAg\nfQoKICAgIC8qKgogICAgICogT3ZlcnJpZGUgdGhpcyBtZXRob2QgdG8gY29u\ndHJvbCB3aGF0IGtpbmQgb2YgbWFwIGlzIHVzZWQgZm9yCiAgICAgKiB0aGUg\naW5zdGFudGlhdGVkIHJvd3MuCiAgICAgKi8KICAgIHByb3RlY3RlZCBNYXAg\nbmV3Um93TWFwKCkgewogICAgICAgIHJldHVybiBuZXcgSGFzaE1hcCgpOwog\nICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGlzUHJvdmlkZXJPcGVuKCkgewog\nICAgICAgIHJldHVybiBfc3RhdGUgPT0gT1BFTjsKICAgIH0KCiAgICBwdWJs\naWMgYm9vbGVhbiBpc0Nsb3NlZCgpIHsKICAgICAgICByZXR1cm4gX3N0YXRl\nID09IENMT1NFRDsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjbG9zZSgpIHsK\nICAgICAgICBpZiAoX3N0YXRlICE9IENMT1NFRCkgewogICAgICAgICAgICBm\ncmVlKCk7CiAgICAgICAgICAgIF9zdGF0ZSA9IENMT1NFRDsKICAgICAgICB9\nCiAgICB9CgogICAgcHJvdGVjdGVkIE9iamVjdCBnZXRJbnRlcm5hbChpbnQg\naW5kZXgpIHsKICAgICAgICBpZiAoX2Z1bGwgIT0gbnVsbCkgewogICAgICAg\nICAgICBpZiAoaW5kZXggPj0gX2Z1bGwubGVuZ3RoKQogICAgICAgICAgICAg\nICAgcmV0dXJuIFBBU1RfRU5EOwogICAgICAgICAgICByZXR1cm4gX2Z1bGxb\naW5kZXhdOwogICAgICAgIH0KCiAgICAgICAgSW50ZWdlciBpID0gTnVtYmVy\ncy52YWx1ZU9mKGluZGV4KTsKICAgICAgICBPYmplY3QgcmV0ID0gX3Jvd3Mu\nZ2V0KGkpOwogICAgICAgIGlmIChyZXQgIT0gbnVsbCkgewogICAgICAgICAg\nICBpZiAocmV0IGluc3RhbmNlb2YgTnVsbCkKICAgICAgICAgICAgICAgIHJl\ndHVybiBudWxsOwogICAgICAgICAgICByZXR1cm4gcmV0OwogICAgICAgIH0K\nCiAgICAgICAgcmV0ID0gaW5zdGFudGlhdGVSb3coaSk7CiAgICAgICAgcmV0\ndXJuIChyZXQgPT0gbnVsbCkgPyBQQVNUX0VORCA6IHJldDsKICAgIH0KCiAg\nICAvKioKICAgICAqIEluc3RhbnRpYXRlIHRoZSByb3cgb2JqZWN0IGF0IHRo\nZSBzcGVjaWZpZWQgaW5kZXguCiAgICAgKi8KICAgIHByaXZhdGUgT2JqZWN0\nIGluc3RhbnRpYXRlUm93KEludGVnZXIgaSkgewogICAgICAgIF9yZXF1ZXN0\ncysrOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGlmICghX3JvcC5hYnNv\nbHV0ZShpLmludFZhbHVlKCkpKQogICAgICAgICAgICAgICAgcmV0dXJuIFBB\nU1RfRU5EOwoKICAgICAgICAgICAgT2JqZWN0IG9iID0gX3JvcC5nZXRSZXN1\nbHRPYmplY3QoKTsKICAgICAgICAgICAgaWYgKG9iID09IG51bGwpCiAgICAg\nICAgICAgICAgICBvYiA9IG5ldyBOdWxsKCk7CgogICAgICAgICAgICAvLyBj\nYWNoZSB0aGUgcmVzdWx0CiAgICAgICAgICAgIF9yb3dzLnB1dChpLCBvYik7\nCgogICAgICAgICAgICAvLyBjaGVjayB0byBzZWUgaWYgb3VyIG1hcCBpcyBm\ndWxsCiAgICAgICAgICAgIGNoZWNrQ29tcGxldGUoKTsKICAgICAgICAgICAg\ncmV0dXJuIG9iOwogICAgICAgIH0gY2F0Y2ggKFJ1bnRpbWVFeGNlcHRpb24g\ncmUpIHsKICAgICAgICAgICAgY2xvc2UoKTsKICAgICAgICAgICAgdGhyb3cg\ncmU7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAg\nICAgY2xvc2UoKTsKICAgICAgICAgICAgX3JvcC5oYW5kbGVDaGVja2VkRXhj\nZXB0aW9uKGUpOwogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9\nCiAgICB9CgogICAgLyoqCiAgICAgKiBDaGVjayB0byBzZWUgaWYgdGhlIHNv\nZnQgbWFwIGlzIHRoZSBzYW1lIHNpemUgYXMgYWxsIHRoZQogICAgICogcm93\ncyBpbiB0aGUgUmVzdWx0OiBpZiBzbywgd2UgY29weSBvdmVyIHRoZSB2YWx1\nZXMgdG8gYQogICAgICogaGFyZCByZWZlcmVuY2UgSGFzaFNldCBhbmQgY2xv\nc2UgdGhlIFJlc3VsdCBvYmplY3QgYXNzb2NpYXRlZCB3aXRoCiAgICAgKiB0\naGlzIGVuZGVhdm91ci4KICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIGNoZWNr\nQ29tcGxldGUoKSB7CiAgICAgICAgLy8gb25seSBjaGVjayBpZiB3ZSd2ZSBh\nY3R1YWxseSBnb3R0ZW4gdGhlIHNpemUgZm9yIHNvbWUgcmVhc29uIGFscmVh\nZHkKICAgICAgICBpZiAoX3NpemUgPT0gLTEgfHwgX3Jvd3Muc2l6ZSgpICE9\nIF9zaXplKQogICAgICAgICAgICByZXR1cm47CgogICAgICAgIE9iamVjdFtd\nIGZ1bGwgPSBuZXcgT2JqZWN0W19zaXplXTsKICAgICAgICBpbnQgY291bnQg\nPSAwOwogICAgICAgIEludGVnZXIga2V5OwogICAgICAgIGZvciAoSXRlcmF0\nb3IgaXRyID0gX3Jvd3Mua2V5U2V0KCkuaXRlcmF0b3IoKTsgaXRyLmhhc05l\neHQoKTsgY291bnQrKykgewogICAgICAgICAgICBrZXkgPSAoSW50ZWdlcikg\naXRyLm5leHQoKTsKICAgICAgICAgICAgZnVsbFtrZXkuaW50VmFsdWUoKV0g\nPSBfcm93cy5nZXQoa2V5KTsKICAgICAgICB9CgogICAgICAgIC8vIGRvdWJs\nZS1jaGVjaywgaW4gY2FzZSBhbnkgb2YgdGhlIHNvZnQgcmVmZXJlbmNlcyB3\nZXJlCiAgICAgICAgLy8gY2xlYW5lZCB1cCBiZXR3ZWVuIHRoZSB0aW1lIHdl\nIGNoZWNrZWQgdGhlIHNpemUgYW5kIHRoZQogICAgICAgIC8vIHRpbWUgd2Ug\nY29tcGxldGVkIHRoZSBjb3B5IHRvIHRoZSBoYXJkIHJlZmVyZW5jZSBtYXAK\nICAgICAgICBpZiAoY291bnQgPT0gX3NpemUpIHsKICAgICAgICAgICAgX2Z1\nbGwgPSBmdWxsOwogICAgICAgICAgICBmcmVlKCk7CiAgICAgICAgfQogICAg\nfQoKICAgIHB1YmxpYyBpbnQgc2l6ZSgpIHsKICAgICAgICBhc3NlcnRPcGVu\nKCk7CiAgICAgICAgaWYgKF9zaXplICE9IC0xKQogICAgICAgICAgICByZXR1\ncm4gX3NpemU7CiAgICAgICAgaWYgKF9mdWxsICE9IG51bGwpCiAgICAgICAg\nICAgIHJldHVybiBfZnVsbC5sZW5ndGg7CiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgX3NpemUgPSBfcm9wLnNpemUoKTsKICAgICAgICAgICAgcmV0dXJu\nIF9zaXplOwogICAgICAgIH0gY2F0Y2ggKFJ1bnRpbWVFeGNlcHRpb24gcmUp\nIHsKICAgICAgICAgICAgY2xvc2UoKTsKICAgICAgICAgICAgdGhyb3cgcmU7\nCiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAg\nY2xvc2UoKTsKICAgICAgICAgICAgX3JvcC5oYW5kbGVDaGVja2VkRXhjZXB0\naW9uKGUpOwogICAgICAgICAgICByZXR1cm4gLTE7CiAgICAgICAgfQogICAg\nfQoKICAgIHByaXZhdGUgdm9pZCBmcmVlKCkgewogICAgICAgIGlmIChfc3Rh\ndGUgPT0gT1BFTikgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAg\nICAgX3JvcC5jbG9zZSgpOwogICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRp\nb24gZSkgewogICAgICAgICAgICB9CiAgICAgICAgICAgIF9yb3dzID0gbnVs\nbDsKICAgICAgICAgICAgX3N0YXRlID0gRlJFRUQ7CiAgICAgICAgfQogICAg\nfQoKICAgIHB1YmxpYyBPYmplY3Qgd3JpdGVSZXBsYWNlKCkgdGhyb3dzIE9i\namVjdFN0cmVhbUV4Y2VwdGlvbiB7CiAgICAgICAgaWYgKF9mdWxsICE9IG51\nbGwpCiAgICAgICAgICAgIHJldHVybiBuZXcgTGlzdFJlc3VsdExpc3QoQXJy\nYXlzLmFzTGlzdChfZnVsbCkpOwogICAgICAgIEFycmF5TGlzdCBsaXN0ID0g\nbmV3IEFycmF5TGlzdCgpOwogICAgICAgIGZvciAoSXRlcmF0b3IgaXRyID0g\naXRlcmF0b3IoKTsgaXRyLmhhc05leHQoKTspCiAgICAgICAgICAgIGxpc3Qu\nYWRkKGl0ci5uZXh0KCkpOwogICAgICAgIHJldHVybiBsaXN0OwogICAgfQoK\nICAgIHB1YmxpYyBTdHJpbmcgdG9TdHJpbmcoKSB7CiAgICAgICAgcmV0dXJu\nIGdldENsYXNzKCkuZ2V0TmFtZSgpCiAgICAgICAgICAgICsgIjsgaWRlbnRp\ndHk6ICIgKyBTeXN0ZW0uaWRlbnRpdHlIYXNoQ29kZSh0aGlzKQogICAgICAg\nICAgICArICI7IGNhY2hlZDogIiArIF9yb3dzLnNpemUoKQogICAgICAgICAg\nICArICI7IHJlcXVlc3RzOiAiICsgX3JlcXVlc3RzOwogICAgfQoKICAgIHB1\nYmxpYyBpbnQgaGFzaENvZGUoKSB7CiAgICAgICAgLy8gc3VwZXJjbGFzcyB0\ncmllcyB0byB0cmF2ZXJzZXMgZW50aXJlIGxpc3QgZm9yIGhhc2hjb2RlCiAg\nICAgICAgcmV0dXJuIFN5c3RlbS5pZGVudGl0eUhhc2hDb2RlKHRoaXMpOwog\nICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGVxdWFscyhPYmplY3Qgb3RoZXIp\nIHsKICAgICAgICAvLyBzdXBlcmNsYXNzIHRyaWVzIHRvIHRyYXZlcnNlIGVu\ndGlyZSBsaXN0IGZvciBlcXVhbGl0eQogICAgICAgIHJldHVybiBvdGhlciA9\nPSB0aGlzOwogICAgfQoKICAgIC8qKgogICAgICogVXNlZCB0byByZXByZXNl\nbnQgbnVsbHMgaW4gdGhlIHJlc3VsdCBsaXN0LiBDYW4ndCB1c2UgYSBzaW5n\nbGV0b24KICAgICAqIHBhdHRlcm4sIGJlY2F1c2UgdGhlbiB0aGVyZSB3aWxs\nIGFsd2F5cyBiZSBhIGhhcmQgcmVmIHRvIGFsbCB0aGUKICAgICAqIG51bGxz\nLCBhbmQgdGhleSdsbCBuZXZlciBnZXQgR0MnZDsgdGhpcyBpcyBiYWQgaW4g\ndGhlIHVubGlrZWx5CiAgICAgKiBldmVudCBvZiBhIGh1Z2UgcmVzdWx0IHNl\ndCB3aXRoIGxvdHMgb2YgbnVsbHMuCiAgICAgKi8KICAgIHByaXZhdGUgc3Rh\ndGljIGNsYXNzIE51bGwgewoKICAgIH0KfQoK\n","encoding":"base64"}

