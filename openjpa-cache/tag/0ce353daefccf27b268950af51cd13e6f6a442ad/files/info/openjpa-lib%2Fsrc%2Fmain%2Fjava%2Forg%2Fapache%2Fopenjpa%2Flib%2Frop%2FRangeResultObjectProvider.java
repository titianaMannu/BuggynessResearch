{"sha":"3352d9449513c50d7e3e02cbf41c77ff192116e5","node_id":"MDQ6QmxvYjIwNjM2NDozMzUyZDk0NDk1MTNjNTBkN2UzZTAyY2JmNDFjNzdmZjE5MjExNmU1","size":4170,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/3352d9449513c50d7e3e02cbf41c77ff192116e5","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIucm9wOwoKaW1wb3J0IGphdmEudXRpbC5Ob1N1Y2hFbGVt\nZW50RXhjZXB0aW9uOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIu\ndXRpbC5Mb2NhbGl6ZXI7CgovKioKICogUHJldmVudHMgYSB2aWV3IG9mIGEg\nZ2l2ZW4gcmFuZ2Ugb2YgaW5kaWNlcyBmcm9tIHRoZSBkZWxlZ2F0ZQogKiBy\nZXN1bHQgb2JqZWN0IHByb3ZpZGVyLgogKgogKiBAYXV0aG9yIEFiZSBXaGl0\nZQogKiBAbm9qYXZhZG9jCiAqLwpwdWJsaWMgY2xhc3MgUmFuZ2VSZXN1bHRP\nYmplY3RQcm92aWRlciBpbXBsZW1lbnRzIFJlc3VsdE9iamVjdFByb3ZpZGVy\nIHsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6ZXIgX2xvYyA9\nIExvY2FsaXplci5mb3JQYWNrYWdlCiAgICAgICAgKFJhbmdlUmVzdWx0T2Jq\nZWN0UHJvdmlkZXIuY2xhc3MpOwoKICAgIHByaXZhdGUgZmluYWwgUmVzdWx0\nT2JqZWN0UHJvdmlkZXIgX2RlbGVnYXRlOwogICAgcHJpdmF0ZSBmaW5hbCBp\nbnQgX3N0YXJ0SWR4OwogICAgcHJpdmF0ZSBmaW5hbCBpbnQgX2VuZElkeDsK\nICAgIHByaXZhdGUgaW50IF9pZHggPSAtMTsKCiAgICAvKioKICAgICAqIENv\nbnN0cnVjdG9yLiBCZWNhdXNlIHRoaXMgaXMgYSB3cmFwcGVyIGFyb3VuZCBz\nb21lIGRlbGVnYXRlLAogICAgICogYW5kIHJlc3VsdCBvYmplY3QgcHJvdmlk\nZXJzIHdvcmsgd2l0aCBpbnQgaW5kZXhlcywgbmVpdGhlciB0aGUgc3RhcnQK\nICAgICAqIG9yIGVuZCBpbmRleCBjYW4gYmUgZ3JlYXRlciB0aGFuIEludGVn\nZXIuTUFYX1ZBTFVFKHdpdGggdGhlIGV4Y2VwdGlvbgogICAgICogb2YgTG9u\nZy5NQVhfVkFMVUUsIHdoaWNoIGlzIHVzZWQgdG8gaW5kaWNhdGUgbm8gbGlt\naXQpLgogICAgICoKICAgICAqIEBwYXJhbSBkZWxlZ2F0ZSB0aGUgcmVzdWx0\nIG9iamVjdCBwcm92aWRlciB0byBkZWxlZ2F0ZSB0bwogICAgICogQHBhcmFt\nIHN0YXJ0SWR4IDAtYmFzZWQgaW5jbHVzaXZlIHN0YXJ0IGluZGV4IG9mIHRo\nZSByYW5nZQogICAgICogdG8gcHJlc2VudDsgbXVzdCBiZSAmbHQ7IEludGVn\nZXIuTUFYX1ZBTFVFCiAgICAgKiBAcGFyYW0gZW5kSWR4IDAtYmFzZWQgZXhj\nbHVzaXZlIGVuZCBpbmRleCBvZiB0aGUgcmFuZ2UgdG8KICAgICAqIHByZXNl\nbnQ7IG11c3QgYmUgJmx0OyBJbnRlZ2VyLk1BWF9WQUxVRSwgb3IgTG9uZy5N\nQVhfVkFMVUUgZm9yIG5vIGxpbWl0CiAgICAgKi8KICAgIHB1YmxpYyBSYW5n\nZVJlc3VsdE9iamVjdFByb3ZpZGVyKFJlc3VsdE9iamVjdFByb3ZpZGVyIGRl\nbGVnYXRlLAogICAgICAgIGxvbmcgc3RhcnRJZHgsIGxvbmcgZW5kSWR4KSB7\nCiAgICAgICAgLy8gdXNlIEludGVnZXIuTUFYX1ZBTFVFIGZvciBubyBsaW1p\ndCBpbnRlcm5hbGx5CiAgICAgICAgaWYgKGVuZElkeCA9PSBMb25nLk1BWF9W\nQUxVRSkKICAgICAgICAgICAgZW5kSWR4ID0gSW50ZWdlci5NQVhfVkFMVUU7\nCgogICAgICAgIF9kZWxlZ2F0ZSA9IGRlbGVnYXRlOwogICAgICAgIGlmIChz\ndGFydElkeCA+IEludGVnZXIuTUFYX1ZBTFVFIHx8IGVuZElkeCA+IEludGVn\nZXIuTUFYX1ZBTFVFKQogICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFy\nZ3VtZW50RXhjZXB0aW9uKF9sb2MuZ2V0KCJyYW5nZS10b28taGlnaCIsCiAg\nICAgICAgICAgICAgICBTdHJpbmcudmFsdWVPZihzdGFydElkeCksIFN0cmlu\nZy52YWx1ZU9mKGVuZElkeCkpLmdldE1lc3NhZ2UoKSk7CgogICAgICAgIF9z\ndGFydElkeCA9IChpbnQpIHN0YXJ0SWR4OwogICAgICAgIF9lbmRJZHggPSAo\naW50KSBlbmRJZHg7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gc3VwcG9y\ndHNSYW5kb21BY2Nlc3MoKSB7CiAgICAgICAgcmV0dXJuIF9kZWxlZ2F0ZS5z\ndXBwb3J0c1JhbmRvbUFjY2VzcygpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIG9wZW4oKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBfZGVsZWdhdGUu\nb3BlbigpOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgZ2V0UmVzdWx0T2Jq\nZWN0KCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgaWYgKF9pZHggPCBf\nc3RhcnRJZHggfHwgX2lkeCA+PSBfZW5kSWR4KQogICAgICAgICAgICB0aHJv\ndyBuZXcgTm9TdWNoRWxlbWVudEV4Y2VwdGlvbihTdHJpbmcudmFsdWVPZihf\naWR4KSk7CiAgICAgICAgcmV0dXJuIF9kZWxlZ2F0ZS5nZXRSZXN1bHRPYmpl\nY3QoKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBuZXh0KCkgdGhyb3dz\nIEV4Y2VwdGlvbiB7CiAgICAgICAgLy8gYWR2YW5jZSB1cCB0byBqdXN0IGJl\naGluZCBfc3RhcnRJZHggaWYgd2UgaGF2ZW4ndCBhbHJlYWR5CiAgICAgICAg\nd2hpbGUgKF9pZHggPCBfc3RhcnRJZHggLSAxKSB7CiAgICAgICAgICAgIGlm\nIChfZGVsZWdhdGUuc3VwcG9ydHNSYW5kb21BY2Nlc3MoKSkgewogICAgICAg\nICAgICAgICAgX2lkeCA9IF9zdGFydElkeCAtIDE7CiAgICAgICAgICAgICAg\nICBpZiAoIV9kZWxlZ2F0ZS5hYnNvbHV0ZShfc3RhcnRJZHggLSAxKSkKICAg\nICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0g\nZWxzZSB7CiAgICAgICAgICAgICAgICBfaWR4Kys7CiAgICAgICAgICAgICAg\nICBpZiAoIV9kZWxlZ2F0ZS5uZXh0KCkpCiAgICAgICAgICAgICAgICAgICAg\ncmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAg\nICAvLyBtYWtlIHN1cmUgd2UncmUgbm90IGZhbGxpbmcgb2ZmIHRoZSBlbmQg\nb2YgdGhlIHJhbmdlCiAgICAgICAgaWYgKF9pZHggPj0gX2VuZElkeCAtIDEp\nCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCiAgICAgICAgX2lkeCsrOwog\nICAgICAgIHJldHVybiBfZGVsZWdhdGUubmV4dCgpOwogICAgfQoKICAgIHB1\nYmxpYyBib29sZWFuIGFic29sdXRlKGludCBwb3MpIHRocm93cyBFeGNlcHRp\nb24gewogICAgICAgIF9pZHggPSBwb3MgKyBfc3RhcnRJZHg7CiAgICAgICAg\naWYgKF9pZHggPj0gX2VuZElkeCkKICAgICAgICAgICAgcmV0dXJuIGZhbHNl\nOwogICAgICAgIHJldHVybiBfZGVsZWdhdGUuYWJzb2x1dGUoX2lkeCk7CiAg\nICB9CgogICAgcHVibGljIGludCBzaXplKCkgdGhyb3dzIEV4Y2VwdGlvbiB7\nCiAgICAgICAgaW50IHNpemUgPSBfZGVsZWdhdGUuc2l6ZSgpOwogICAgICAg\nIGlmIChzaXplID09IEludGVnZXIuTUFYX1ZBTFVFKQogICAgICAgICAgICBy\nZXR1cm4gc2l6ZTsKICAgICAgICBzaXplID0gTWF0aC5taW4oX2VuZElkeCwg\nc2l6ZSkgLSBfc3RhcnRJZHg7CiAgICAgICAgcmV0dXJuIChzaXplIDwgMCkg\nPyAwIDogc2l6ZTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCByZXNldCgpIHRo\ncm93cyBFeGNlcHRpb24gewogICAgICAgIF9pZHggPSAtMTsKICAgICAgICBf\nZGVsZWdhdGUucmVzZXQoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjbG9z\nZSgpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIF9kZWxlZ2F0ZS5jbG9z\nZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGhhbmRsZUNoZWNrZWRFeGNl\ncHRpb24oRXhjZXB0aW9uIGUpIHsKICAgICAgICBfZGVsZWdhdGUuaGFuZGxl\nQ2hlY2tlZEV4Y2VwdGlvbihlKTsKICAgIH0KfQoK\n","encoding":"base64"}

