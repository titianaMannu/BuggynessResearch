{"sha":"613eeea327fcf0fbcf85bb8ceac7825d7dce6288","node_id":"MDQ6QmxvYjIwNjM2NDo2MTNlZWVhMzI3ZmNmMGZiY2Y4NWJiOGNlYWM3ODI1ZDdkY2U2Mjg4","size":6955,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/613eeea327fcf0fbcf85bb8ceac7825d7dce6288","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIudXRpbDsKCmltcG9ydCBqYXZhLmlvLkJ1ZmZlcmVkUmVh\nZGVyOwppbXBvcnQgamF2YS5pby5GaWxlOwppbXBvcnQgamF2YS5pby5GaWxl\nUmVhZGVyOwppbXBvcnQgamF2YS5pby5GaWxlV3JpdGVyOwppbXBvcnQgamF2\nYS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEuaW8uSW5wdXRTdHJlYW07\nCmltcG9ydCBqYXZhLmlvLklucHV0U3RyZWFtUmVhZGVyOwppbXBvcnQgamF2\nYS5pby5PdXRwdXRTdHJlYW07CmltcG9ydCBqYXZhLmlvLk91dHB1dFN0cmVh\nbVdyaXRlcjsKaW1wb3J0IGphdmEuaW8uUmVhZGVyOwppbXBvcnQgamF2YS5p\nby5Xcml0ZXI7CmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsKaW1wb3J0IGph\ndmEudXRpbC5NYXA7CgovKioKICogQSB0ZW1wbGF0ZSB0aGF0IGFsbG93cyBw\nYXJhbWV0ZXIgc3Vic3RpdHV0aW9ucy4gUGFyYW1ldGVycyBzaG91bGQgYmUK\nICogcGxhY2VkIGluIHRoZSB0ZW1wbGF0ZSBpbiB0aGUgZm9ybSAke3BhcmFt\nLW5hbWV9LiBVc2UgdGhlCiAqIHtAbGluayAjc2V0UGFyYW1ldGVyfSBtZXRo\nb2QgdG8gc2V0IHRoZSBwYXJhbWV0ZXIgdmFsdWVzLCB3aGljaCB3aWxsIGJl\nCiAqIHN1YnN0aXR1dGVkIGludG8gdGhlIHRlbXBsYXRlIG9uIGNhbGxzIHRv\nIHtAbGluayAjd3JpdGV9IGFuZAogKiB7QGxpbmsgI3RvU3RyaW5nfS4gSWYg\nYSBwYXJhbWV0ZXIgaXMgZW5jb3VudGVyZWQgdGhhdCBoYXNuJ3QgYmVlbiBz\nZXQsIHRoZW4KICogdGhlIHBhcmFtZXRlciBrZXkgaXMgdXNlZCB0byBsb29r\ndXAgdGhlIGNvcnJlc3BvbmRpbmcgU3lzdGVtIHByb3BlcnR5LgogKgogKiBA\nYXV0aG9yIEFiZSBXaGl0ZQogKiBAbm9qYXZhZG9jCiAqLwpwdWJsaWMgY2xh\nc3MgUGFyYW1ldGVyVGVtcGxhdGUgewoKICAgIHByaXZhdGUgc3RhdGljIGZp\nbmFsIFN0cmluZyBTRVAgPSBTeXN0ZW0uZ2V0UHJvcGVydHkoImxpbmUuc2Vw\nYXJhdG9yIik7CgogICAgcHJpdmF0ZSBmaW5hbCBTdHJpbmdCdWZmZXIgX2J1\nZiA9IG5ldyBTdHJpbmdCdWZmZXIoKTsKICAgIHByaXZhdGUgZmluYWwgTWFw\nIF9wYXJhbXMgPSBuZXcgSGFzaE1hcCgpOwoKICAgIC8qKgogICAgICogQWRk\nIHRoZSBnaXZlbiB2YWx1ZSB0byB0aGUgaW50ZXJuYWwgdGVtcGxhdGUuCiAg\nICAgKi8KICAgIHB1YmxpYyBQYXJhbWV0ZXJUZW1wbGF0ZSBhcHBlbmQoU3Ry\naW5nIHZhbHVlKSB7CiAgICAgICAgX2J1Zi5hcHBlbmQodmFsdWUpOwogICAg\nICAgIHJldHVybiB0aGlzOwogICAgfQoKICAgIC8qKgogICAgICogQWRkIHRo\nZSBnaXZlbiB2YWx1ZSB0byB0aGUgaW50ZXJuYWwgdGVtcGxhdGUuCiAgICAg\nKi8KICAgIHB1YmxpYyBQYXJhbWV0ZXJUZW1wbGF0ZSBhcHBlbmQoYm9vbGVh\nbiB2YWx1ZSkgewogICAgICAgIF9idWYuYXBwZW5kKHZhbHVlKTsKICAgICAg\nICByZXR1cm4gdGhpczsKICAgIH0KCiAgICAvKioKICAgICAqIEFkZCB0aGUg\nZ2l2ZW4gdmFsdWUgdG8gdGhlIGludGVybmFsIHRlbXBsYXRlLgogICAgICov\nCiAgICBwdWJsaWMgUGFyYW1ldGVyVGVtcGxhdGUgYXBwZW5kKGNoYXIgdmFs\ndWUpIHsKICAgICAgICBfYnVmLmFwcGVuZCh2YWx1ZSk7CiAgICAgICAgcmV0\ndXJuIHRoaXM7CiAgICB9CgogICAgLyoqCiAgICAgKiBBZGQgdGhlIGdpdmVu\nIHZhbHVlIHRvIHRoZSBpbnRlcm5hbCB0ZW1wbGF0ZS4KICAgICAqLwogICAg\ncHVibGljIFBhcmFtZXRlclRlbXBsYXRlIGFwcGVuZChkb3VibGUgdmFsdWUp\nIHsKICAgICAgICBfYnVmLmFwcGVuZCh2YWx1ZSk7CiAgICAgICAgcmV0dXJu\nIHRoaXM7CiAgICB9CgogICAgLyoqCiAgICAgKiBBZGQgdGhlIGdpdmVuIHZh\nbHVlIHRvIHRoZSBpbnRlcm5hbCB0ZW1wbGF0ZS4KICAgICAqLwogICAgcHVi\nbGljIFBhcmFtZXRlclRlbXBsYXRlIGFwcGVuZChmbG9hdCB2YWx1ZSkgewog\nICAgICAgIF9idWYuYXBwZW5kKHZhbHVlKTsKICAgICAgICByZXR1cm4gdGhp\nczsKICAgIH0KCiAgICAvKioKICAgICAqIEFkZCB0aGUgZ2l2ZW4gdmFsdWUg\ndG8gdGhlIGludGVybmFsIHRlbXBsYXRlLgogICAgICovCiAgICBwdWJsaWMg\nUGFyYW1ldGVyVGVtcGxhdGUgYXBwZW5kKGludCB2YWx1ZSkgewogICAgICAg\nIF9idWYuYXBwZW5kKHZhbHVlKTsKICAgICAgICByZXR1cm4gdGhpczsKICAg\nIH0KCiAgICAvKioKICAgICAqIEFkZCB0aGUgZ2l2ZW4gdmFsdWUgdG8gdGhl\nIGludGVybmFsIHRlbXBsYXRlLgogICAgICovCiAgICBwdWJsaWMgUGFyYW1l\ndGVyVGVtcGxhdGUgYXBwZW5kKGxvbmcgdmFsdWUpIHsKICAgICAgICBfYnVm\nLmFwcGVuZCh2YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBBZGQgdGhlIGdpdmVuIHZhbHVlIHRvIHRoZSBpbnRl\ncm5hbCB0ZW1wbGF0ZS4KICAgICAqLwogICAgcHVibGljIFBhcmFtZXRlclRl\nbXBsYXRlIGFwcGVuZChzaG9ydCB2YWx1ZSkgewogICAgICAgIF9idWYuYXBw\nZW5kKHZhbHVlKTsKICAgICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICAv\nKioKICAgICAqIEFkZCB0aGUgZ2l2ZW4gdmFsdWUgdG8gdGhlIGludGVybmFs\nIHRlbXBsYXRlLgogICAgICovCiAgICBwdWJsaWMgUGFyYW1ldGVyVGVtcGxh\ndGUgYXBwZW5kKE9iamVjdCB2YWx1ZSkgewogICAgICAgIF9idWYuYXBwZW5k\nKHZhbHVlKTsKICAgICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICAvKioK\nICAgICAqIEFkZCB0aGUgZ2l2ZW4gdmFsdWUgdG8gdGhlIGludGVybmFsIHRl\nbXBsYXRlLgogICAgICovCiAgICBwdWJsaWMgUGFyYW1ldGVyVGVtcGxhdGUg\nYXBwZW5kKElucHV0U3RyZWFtIGluKSB0aHJvd3MgSU9FeGNlcHRpb24gewog\nICAgICAgIHJldHVybiBhcHBlbmQobmV3IElucHV0U3RyZWFtUmVhZGVyKGlu\nKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBBZGQgdGhlIGdpdmVuIHZhbHVl\nIHRvIHRoZSBpbnRlcm5hbCB0ZW1wbGF0ZS4KICAgICAqLwogICAgcHVibGlj\nIFBhcmFtZXRlclRlbXBsYXRlIGFwcGVuZChSZWFkZXIgcmVhZGVyKSB0aHJv\nd3MgSU9FeGNlcHRpb24gewogICAgICAgIEJ1ZmZlcmVkUmVhZGVyIGJ1ZiA9\nIG5ldyBCdWZmZXJlZFJlYWRlcihyZWFkZXIpOwogICAgICAgIFN0cmluZyBs\naW5lOwogICAgICAgIHdoaWxlICgobGluZSA9IGJ1Zi5yZWFkTGluZSgpKSAh\nPSBudWxsKQogICAgICAgICAgICBfYnVmLmFwcGVuZChsaW5lKS5hcHBlbmQo\nU0VQKTsKICAgICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICAvKioKICAg\nICAqIEFkZCB0aGUgZ2l2ZW4gdmFsdWUgdG8gdGhlIGludGVybmFsIHRlbXBs\nYXRlLgogICAgICovCiAgICBwdWJsaWMgUGFyYW1ldGVyVGVtcGxhdGUgYXBw\nZW5kKEZpbGUgZmlsZSkgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICBG\naWxlUmVhZGVyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKGZpbGUpOwogICAg\nICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBhcHBlbmQocmVhZGVyKTsK\nICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICB0cnkgewogICAgICAg\nICAgICAgICAgcmVhZGVyLmNsb3NlKCk7CiAgICAgICAgICAgIH0gY2F0Y2gg\nKElPRXhjZXB0aW9uIGlvZSkgewogICAgICAgICAgICB9CiAgICAgICAgfQog\nICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRydWUgaWYgdGhlIGdpdmVu\nIHBhcmFtZXRlciBoYXMgYmVlbiBnaXZlbiBhIHZhbHVlLgogICAgICovCiAg\nICBwdWJsaWMgYm9vbGVhbiBoYXNQYXJhbWV0ZXIoU3RyaW5nIG5hbWUpIHsK\nICAgICAgICByZXR1cm4gX3BhcmFtcy5jb250YWluc0tleShuYW1lKTsKICAg\nIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgdmFsdWUgc2V0IGZvciB0\naGUgZ2l2ZW4gcGFyYW1ldGVyLgogICAgICovCiAgICBwdWJsaWMgT2JqZWN0\nIGdldFBhcmFtZXRlcihTdHJpbmcgbmFtZSkgewogICAgICAgIHJldHVybiBf\ncGFyYW1zLmdldChuYW1lKTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCB0\naGUgdmFsdWUgZm9yIHRoZSBnaXZlbiBwYXJhbWV0ZXIuCiAgICAgKi8KICAg\nIHB1YmxpYyBPYmplY3Qgc2V0UGFyYW1ldGVyKFN0cmluZyBuYW1lLCBPYmpl\nY3QgdmFsKSB7CiAgICAgICAgcmV0dXJuIF9wYXJhbXMucHV0KG5hbWUsIHZh\nbCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQgdGhlIHZhbHVlcyBmb3Ig\nYWxsIHRoZSBwYXJhbWV0ZXJzIGluIHRoZSBnaXZlbiBtYXAuCiAgICAgKi8K\nICAgIHB1YmxpYyB2b2lkIHNldFBhcmFtZXRlcnMoTWFwIHBhcmFtcykgewog\nICAgICAgIF9wYXJhbXMucHV0QWxsKHBhcmFtcyk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBDbGVhciB0aGUgcmVjb3JkZWQgcGFyYW1ldGVyIHZhbHVlcy4K\nICAgICAqLwogICAgcHVibGljIHZvaWQgY2xlYXJQYXJhbWV0ZXJzKCkgewog\nICAgICAgIF9wYXJhbXMuY2xlYXIoKTsKICAgIH0KCiAgICAvKioKICAgICAq\nIFJldHVybiBhIGNvcHkgb2YgdGhlIGludGVybmFsIHZhbHVlIHRlbXBsYXRl\nIHdpdGggYWxsIHBhcmFtZXRlcnMKICAgICAqIHN1YnN0aXR1dGVkIHdpdGgg\ndGhlaXIgY3VycmVudCB2YWx1ZXMuCiAgICAgKi8KICAgIHB1YmxpYyBTdHJp\nbmcgdG9TdHJpbmcoKSB7CiAgICAgICAgaWYgKF9idWYubGVuZ3RoKCkgPT0g\nMCB8fCBfcGFyYW1zLmlzRW1wdHkoKSkKICAgICAgICAgICAgcmV0dXJuIF9i\ndWYudG9TdHJpbmcoKTsKCiAgICAgICAgU3RyaW5nQnVmZmVyIGNvcHkgPSBu\nZXcgU3RyaW5nQnVmZmVyKCk7CiAgICAgICAgU3RyaW5nQnVmZmVyIHBhcmFt\nID0gbnVsbDsKICAgICAgICBjaGFyIGNoLCBsYXN0ID0gMDsKICAgICAgICBm\nb3IgKGludCBpID0gMDsgaSA8IF9idWYubGVuZ3RoKCk7IGkrKykgewogICAg\nICAgICAgICBjaCA9IF9idWYuY2hhckF0KGkpOwogICAgICAgICAgICBpZiAo\nbGFzdCA9PSAnJCcgJiYgY2ggPT0gJ3snKSB7CiAgICAgICAgICAgICAgICBj\nb3B5LmRlbGV0ZUNoYXJBdChjb3B5Lmxlbmd0aCgpIC0gMSk7CiAgICAgICAg\nICAgICAgICBwYXJhbSA9IG5ldyBTdHJpbmdCdWZmZXIoKTsKICAgICAgICAg\nICAgfSBlbHNlIGlmIChjaCA9PSAnfScgJiYgcGFyYW0gIT0gbnVsbCkgewog\nICAgICAgICAgICAgICAgaWYgKF9wYXJhbXMuY29udGFpbnNLZXkocGFyYW0u\ndG9TdHJpbmcoKSkpCiAgICAgICAgICAgICAgICAgICAgY29weS5hcHBlbmQo\nX3BhcmFtcy5nZXQocGFyYW0udG9TdHJpbmcoKSkpOwogICAgICAgICAgICAg\nICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGNvcHkuYXBwZW5kKFN5c3Rl\nbS5nZXRQcm9wZXJ0eShwYXJhbS50b1N0cmluZygpKSk7CiAgICAgICAgICAg\nICAgICBwYXJhbSA9IG51bGw7CiAgICAgICAgICAgIH0gZWxzZSBpZiAocGFy\nYW0gIT0gbnVsbCkKICAgICAgICAgICAgICAgIHBhcmFtLmFwcGVuZChjaCk7\nCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGNvcHkuYXBwZW5k\nKGNoKTsKCiAgICAgICAgICAgIGxhc3QgPSBjaDsKICAgICAgICB9CiAgICAg\nICAgcmV0dXJuIGNvcHkudG9TdHJpbmcoKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIFdyaXRlIHRoZSBpbnRlcm5hbCB2YWx1ZSB0ZW1wbGF0ZSB3aXRoIGFs\nbCBwYXJhbWV0ZXJzCiAgICAgKiBzdWJzdGl0dXRlZCB3aXRoIHRoZWlyIGN1\ncnJlbnQgdmFsdWVzLgogICAgICovCiAgICBwdWJsaWMgdm9pZCB3cml0ZShP\ndXRwdXRTdHJlYW0gb3V0KSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAg\nIHdyaXRlKG5ldyBPdXRwdXRTdHJlYW1Xcml0ZXIob3V0KSk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBXcml0ZSB0aGUgaW50ZXJuYWwgdmFsdWUgdGVtcGxh\ndGUgd2l0aCBhbGwgcGFyYW1ldGVycwogICAgICogc3Vic3RpdHV0ZWQgd2l0\naCB0aGVpciBjdXJyZW50IHZhbHVlcy4KICAgICAqLwogICAgcHVibGljIHZv\naWQgd3JpdGUoV3JpdGVyIHdyaXRlcikgdGhyb3dzIElPRXhjZXB0aW9uIHsK\nICAgICAgICB3cml0ZXIud3JpdGUodG9TdHJpbmcoKSk7CiAgICAgICAgd3Jp\ndGVyLmZsdXNoKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBXcml0ZSB0aGUg\naW50ZXJuYWwgdmFsdWUgdGVtcGxhdGUgd2l0aCBhbGwgcGFyYW1ldGVycwog\nICAgICogc3Vic3RpdHV0ZWQgd2l0aCB0aGVpciBjdXJyZW50IHZhbHVlcy4K\nICAgICAqLwogICAgcHVibGljIHZvaWQgd3JpdGUoRmlsZSBmaWxlKSB0aHJv\nd3MgSU9FeGNlcHRpb24gewogICAgICAgIEZpbGVXcml0ZXIgd3JpdGVyID0g\nbmV3IEZpbGVXcml0ZXIoZmlsZSk7CiAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgd3JpdGUod3JpdGVyKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAg\nICAgICB0cnkgewogICAgICAgICAgICAgICAgd3JpdGVyLmNsb3NlKCk7CiAg\nICAgICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGlvZSkgewogICAgICAg\nICAgICB9CiAgICAgICAgfQogICAgfQp9Cg==\n","encoding":"base64"}

