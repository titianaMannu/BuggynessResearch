{"sha":"095e120320238a6f0faf0da7d5fbdb91d2cb237c","node_id":"MDQ6QmxvYjIwNjM2NDowOTVlMTIwMzIwMjM4YTZmMGZhZjBkYTdkNWZiZGI5MWQyY2IyMzdj","size":7136,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/095e120320238a6f0faf0da7d5fbdb91d2cb237c","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIudXRpbDsKCmltcG9ydCBqYXZhLmlvLkJ1ZmZlcmVkUmVh\nZGVyOwppbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEu\naW8uSW5wdXRTdHJlYW07CmltcG9ydCBqYXZhLmlvLklucHV0U3RyZWFtUmVh\nZGVyOwppbXBvcnQgamF2YS5uZXQuVVJMOwppbXBvcnQgamF2YS51dGlsLkFy\ncmF5TGlzdDsKaW1wb3J0IGphdmEudXRpbC5FbnVtZXJhdGlvbjsKaW1wb3J0\nIGphdmEudXRpbC5MaXN0OwppbXBvcnQgamF2YS51dGlsLlNldDsKaW1wb3J0\nIGphdmEudXRpbC5TdHJpbmdUb2tlbml6ZXI7CmltcG9ydCBqYXZhLnV0aWwu\nVHJlZVNldDsKCi8qKgogKiBVdGlsaXR5IGNsYXNzZXMgdG8gbG9jYXRlIHNl\ncnZpY2VzLCBhcyBkZWZpbmVkIGluIHRoZSA8YQogKiBocmVmPSJodHRwOi8v\namF2YS5zdW4uY29tL2oyc2UvMS4zL2RvY3MvZ3VpZGUvamFyL2phci5odG1s\nCiAqICNTZXJ2aWNlJTIwUHJvdmlkZXIiPkphciBGaWxlIFNwZWNpZmljYXRp\nb248L2E+LiBNb3N0IG9mIHRoZSBtZXRob2RzIGluIHRoaXMKICogY2xhc3Mg\nY2FuIGFsc28gYmUgZm91bmQgaW4gdGhlIDxlbT5zdW4ubWlzYy5TZXJ2aWNl\nPC9lbT4gY2xhc3MsIGJ1dCBzaW5jZQogKiBpdCBpcyB1bmRvY3VtZW50ZWQs\nIHdlIGNhbm5vdCByZWx5IG9uIGl0cyBBUEkuCiAqIFNlcnZpY2UgbG9jYXRp\nb24gZm9yIGEgc3BlY2lmaWVkIGludGVyZmFjZSBpcyBkb25lIGJ5IHNlYXJj\naGluZyBmb3IgdGhlCiAqIHJlc291cmNlIDxlbT4vTUVUQS1JTkYvc2Vydmlj\nZXMvPC9lbT48aT5zZXJ2aWNlLmNsYXNzLm5hbWU8L2k+LCBhbmQKICogbG9h\nZGluZyB0aGUgcmVzb3VyY2UuCiAqIE1ldGhvZHMgaW4gdGhpcyBjbGFzcyB0\naGF0IGRvIG5vdCBkZWNsYXJlIGV4Y2VwdGlvbnMgd2lsbCBuZXZlciB0aHJv\ndwogKiBSdW50aW1lIGV4Y2VwdGlvbnM6IGV4Y2VwdGlvbnMgYXJlIHNpbGVu\ndGx5IHN3YWxsb3dlZCBhbmQgZW1wdHkgYXJyYXkgdmFsdWVzCiAqIGFyZSBy\nZXR1cm5lZC4KICoKICogQGF1dGhvciBNYXJjIFBydWQnaG9tbWVhdXgKICog\nQG5vamF2YWRvYwogKi8KcHVibGljIGNsYXNzIFNlcnZpY2VzIHsKCiAgICBw\ncml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgUFJFRklYID0gIk1FVEEtSU5G\nL3NlcnZpY2VzLyI7CgogICAgLyoqCiAgICAgKiBSZXR1cm4gYW4gYXJyYXkg\nb2YgU3RyaW5ncyBvZiBjbGFzcyBuYW1lcyBvZiBhbGwga25vd24gc2Vydmlj\nZQogICAgICogaW1wbGVtZW50b3JzIG9mIHRoZSBzcGVjaWZpZWQgaW50ZXJm\nYWNlIG9yIGNsYXNzLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIFN0cmlu\nZ1tdIGdldEltcGxlbWVudG9ycyhDbGFzcyBzZXJ2aWNlQ2xhc3MpIHsKICAg\nICAgICByZXR1cm4gZ2V0SW1wbGVtZW50b3JzKHNlcnZpY2VDbGFzcywgbnVs\nbCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gYW4gYXJyYXkgb2Yg\nU3RyaW5ncyBvZiBjbGFzcyBuYW1lcyBvZiBhbGwga25vd24gc2VydmljZQog\nICAgICogaW1wbGVtZW50b3JzIG9mIHRoZSBzcGVjaWZpZWQgaW50ZXJmYWNl\nIG9yIGNsYXNzLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIFN0cmluZ1td\nIGdldEltcGxlbWVudG9ycyhDbGFzcyBzZXJ2aWNlQ2xhc3MsCiAgICAgICAg\nQ2xhc3NMb2FkZXIgbG9hZGVyKSB7CiAgICAgICAgcmV0dXJuIGdldEltcGxl\nbWVudG9ycyhzZXJ2aWNlQ2xhc3MuZ2V0TmFtZSgpLCBsb2FkZXIpOwogICAg\nfQoKICAgIC8qKgogICAgICogUmV0dXJuIGFuIGFycmF5IG9mIFN0cmluZ3Mg\nb2YgY2xhc3MgbmFtZXMgb2YgYWxsIGtub3duIHNlcnZpY2UKICAgICAqIGlt\ncGxlbWVudG9ycyBvZiB0aGUgc3BlY2lmaWVkIGNsYXNzIG5hbWUoYXMgcmVz\nb2x2ZWQgYnkgdGhlIGN1cnJlbnQKICAgICAqIHRocmVhZCdzIGNvbnRleHQg\nY2xhc3MgbG9hZGVyKS4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBTdHJp\nbmdbXSBnZXRJbXBsZW1lbnRvcnMoU3RyaW5nIHNlcnZpY2VOYW1lKSB7CiAg\nICAgICAgcmV0dXJuIGdldEltcGxlbWVudG9ycyhzZXJ2aWNlTmFtZSwgbnVs\nbCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gYW4gYXJyYXkgb2Yg\nU3RyaW5ncyBvZiBjbGFzcyBuYW1lcyBvZiBhbGwga25vd24gc2VydmljZQog\nICAgICogaW1wbGVtZW50b3JzIG9mIHRoZSBzcGVjaWZpZWQgY2xhc3MgbmFt\nZSwgYXMgcmVzb2x2ZWQgYnkgdGhlIHNwZWNpZmllZAogICAgICoge0BsaW5r\nIENsYXNzTG9hZGVyfS4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBTdHJp\nbmdbXSBnZXRJbXBsZW1lbnRvcnMoU3RyaW5nIHNlcnZpY2VOYW1lLAogICAg\nICAgIENsYXNzTG9hZGVyIGxvYWRlcikgewogICAgICAgIGlmIChsb2FkZXIg\nPT0gbnVsbCkKICAgICAgICAgICAgbG9hZGVyID0gVGhyZWFkLmN1cnJlbnRU\naHJlYWQoKS5nZXRDb250ZXh0Q2xhc3NMb2FkZXIoKTsKCiAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgU2V0IHJlc291cmNlTGlzdCA9IG5ldyBUcmVlU2V0\nKCk7CiAgICAgICAgICAgIEVudW1lcmF0aW9uIHJlc291cmNlcyA9IGxvYWRl\nci5nZXRSZXNvdXJjZXMoUFJFRklYICsgc2VydmljZU5hbWUpOwogICAgICAg\nICAgICB3aGlsZSAocmVzb3VyY2VzLmhhc01vcmVFbGVtZW50cygpKQogICAg\nICAgICAgICAgICAgYWRkUmVzb3VyY2VzKChVUkwpIHJlc291cmNlcy5uZXh0\nRWxlbWVudCgpLCByZXNvdXJjZUxpc3QpOwoKICAgICAgICAgICAgcmV0dXJu\nIChTdHJpbmdbXSkgcmVzb3VyY2VMaXN0LnRvQXJyYXkobmV3IFN0cmluZ1ty\nZXNvdXJjZUxpc3QKICAgICAgICAgICAgICAgIC5zaXplKCldKTsKICAgICAg\nICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICAvLyBzaWxl\nbnRseSBzd2FsbG93IGFsbCBleGNlcHRpb25zLgogICAgICAgICAgICByZXR1\ncm4gbmV3IFN0cmluZ1swXTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAg\nICAgKiBQYXJzZSB0aGUgVVJMIHJlc291cmNlIGFuZCBhZGQgdGhlIGxpc3Rl\nZCBjbGFzcyBuYW1lcyB0byB0aGUgc3BlY2lmaWVkCiAgICAgKiBTZXQuIENs\nYXNzIG5hbWVzIGFyZSBzZXBhcmF0ZWQgYnkgbGluZXMuIExpbmVzIHN0YXJ0\naW5nIHdpdGggJyMnIGFyZQogICAgICogaWdub3JlZC4KICAgICAqLwogICAg\ncHJpdmF0ZSBzdGF0aWMgdm9pZCBhZGRSZXNvdXJjZXMoVVJMIHVybCwgU2V0\nIHNldCkgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICBJbnB1dFN0cmVh\nbSBpbiA9IHVybC5vcGVuQ29ubmVjdGlvbigpLmdldElucHV0U3RyZWFtKCk7\nCgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIEJ1ZmZlcmVkUmVhZGVyIHJl\nYWRlciA9IG5ldyBCdWZmZXJlZFJlYWRlcihuZXcgSW5wdXRTdHJlYW1SZWFk\nZXIoCiAgICAgICAgICAgICAgICBpbikpOwogICAgICAgICAgICBTdHJpbmcg\nbGluZTsKICAgICAgICAgICAgd2hpbGUgKChsaW5lID0gcmVhZGVyLnJlYWRM\naW5lKCkpICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIGlmIChsaW5lLnRy\naW0oKS5zdGFydHNXaXRoKCIjIikKICAgICAgICAgICAgICAgICAgICB8fCBs\naW5lLnRyaW0oKS5sZW5ndGgoKSA9PSAwKQogICAgICAgICAgICAgICAgICAg\nIGNvbnRpbnVlOwoKICAgICAgICAgICAgICAgIFN0cmluZ1Rva2VuaXplciB0\nb2sgPSBuZXcgU3RyaW5nVG9rZW5pemVyKGxpbmUsICIjIFx0Iik7CiAgICAg\nICAgICAgICAgICBpZiAodG9rLmhhc01vcmVUb2tlbnMoKSkgewogICAgICAg\nICAgICAgICAgICAgIFN0cmluZyBuZXh0ID0gdG9rLm5leHRUb2tlbigpOwog\nICAgICAgICAgICAgICAgICAgIGlmIChuZXh0ICE9IG51bGwpIHsKICAgICAg\nICAgICAgICAgICAgICAgICAgbmV4dCA9IG5leHQudHJpbSgpOwogICAgICAg\nICAgICAgICAgICAgICAgICBpZiAobmV4dC5sZW5ndGgoKSA+IDAgJiYgIW5l\neHQuc3RhcnRzV2l0aCgiIyIpKQogICAgICAgICAgICAgICAgICAgICAgICAg\nICAgc2V0LmFkZChuZXh0KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAg\nICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9IGZpbmFsbHkg\newogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgaW4uY2xvc2Uo\nKTsKICAgICAgICAgICAgfSBjYXRjaCAoSU9FeGNlcHRpb24gaW9lKSB7CiAg\nICAgICAgICAgICAgICAvLyBzaWxlbnRseSBjb25zdW1lIGV4Y2VwdGlvbgog\nICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBzdGF0\naWMgQ2xhc3NbXSBnZXRJbXBsZW1lbnRvckNsYXNzZXMoQ2xhc3Mgc2Vydmlj\nZUNsYXNzKSB7CiAgICAgICAgcmV0dXJuIGdldEltcGxlbWVudG9yQ2xhc3Nl\ncyhzZXJ2aWNlQ2xhc3MuZ2V0TmFtZSgpLCBudWxsKTsKICAgIH0KCiAgICBw\ndWJsaWMgc3RhdGljIENsYXNzW10gZ2V0SW1wbGVtZW50b3JDbGFzc2VzKENs\nYXNzIHNlcnZpY2VDbGFzcywKICAgICAgICBDbGFzc0xvYWRlciBsb2FkZXIp\nIHsKICAgICAgICByZXR1cm4gZ2V0SW1wbGVtZW50b3JDbGFzc2VzKHNlcnZp\nY2VDbGFzcy5nZXROYW1lKCksIGxvYWRlcik7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBSZXR1cm4gYW4gYXJyYXkgb2YgQ2xhc3Mgb2JqZWN0cyBvZiBhbGwg\na25vd24gc2VydmljZSBpbXBsZW1lbnRvcnMgb2YgdGhlCiAgICAgKiBzcGVj\naWZpZWQgY2xhc3MgbmFtZShhcyByZXNvbHZlZCBieSB0aGUgY3VycmVudCB0\naHJlYWQncyBjb250ZXh0IGNsYXNzCiAgICAgKiBsb2FkZXIpLgogICAgICov\nCiAgICBwdWJsaWMgc3RhdGljIENsYXNzW10gZ2V0SW1wbGVtZW50b3JDbGFz\nc2VzKFN0cmluZyBzZXJ2aWNlTmFtZSkgewogICAgICAgIHJldHVybiBnZXRJ\nbXBsZW1lbnRvckNsYXNzZXMoc2VydmljZU5hbWUsIG51bGwpOwogICAgfQoK\nICAgIHB1YmxpYyBzdGF0aWMgQ2xhc3NbXSBnZXRJbXBsZW1lbnRvckNsYXNz\nZXMoU3RyaW5nIHNlcnZpY2VOYW1lLAogICAgICAgIENsYXNzTG9hZGVyIGxv\nYWRlcikgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBnZXRJ\nbXBsZW1lbnRvckNsYXNzZXMoc2VydmljZU5hbWUsIGxvYWRlciwgdHJ1ZSk7\nCiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGNuZmUpIHsKICAgICAgICAg\nICAgLy8gdGhpcyB3aWxsIG5ldmVyIGhhcHBlbiB3aXRoIHNraXBtaXNzaW5n\nCiAgICAgICAgICAgIHJldHVybiBuZXcgQ2xhc3NbMF07CiAgICAgICAgfQog\nICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIGFuIGFycmF5IG9mIENsYXNz\nIG9iamVjdHMgb2YgYWxsIGtub3duIHNlcnZpY2UgaW1wbGVtZW50b3JzIG9m\nIHRoZQogICAgICogc3BlY2lmaWVkIGNsYXNzIG5hbWUsIGFzIHJlc29sdmVk\nIGJ5IHRoZSBzcGVjaWZpZWQge0BsaW5rIENsYXNzTG9hZGVyfS4KICAgICAq\nCiAgICAgKiBAcGFyYW0gc2tpcE1pc3NpbmcgaWYgdHJ1ZSwgdGhlbiBpZ25v\ncmUgY2xhc3NlcyB0aGF0IGNhbm5vdCBiZSBsb2FkZWQgYnkKICAgICAqIHRo\nZSBjbGFzc2xvYWRlcjsgb3RoZXJ3aXNlLCByZXNvbHV0aW9uIGZhaWx1cmVz\nIHdpbGwgdGhyb3cgYQogICAgICoge0BsaW5rIENsYXNzTm90Rm91bmRFeGNl\ncHRpb259LgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIENsYXNzW10gZ2V0\nSW1wbGVtZW50b3JDbGFzc2VzKFN0cmluZyBzZXJ2aWNlTmFtZSwKICAgICAg\nICBDbGFzc0xvYWRlciBsb2FkZXIsIGJvb2xlYW4gc2tpcE1pc3NpbmcpIHRo\ncm93cyBDbGFzc05vdEZvdW5kRXhjZXB0aW9uIHsKICAgICAgICBpZiAobG9h\nZGVyID09IG51bGwpCiAgICAgICAgICAgIGxvYWRlciA9IFRocmVhZC5jdXJy\nZW50VGhyZWFkKCkuZ2V0Q29udGV4dENsYXNzTG9hZGVyKCk7CgogICAgICAg\nIFN0cmluZ1tdIG5hbWVzID0gZ2V0SW1wbGVtZW50b3JzKHNlcnZpY2VOYW1l\nLCBsb2FkZXIpOwogICAgICAgIGlmIChuYW1lcyA9PSBudWxsKQogICAgICAg\nICAgICByZXR1cm4gbmV3IENsYXNzWzBdOwoKICAgICAgICBMaXN0IGNsYXNz\nZXMgPSBuZXcgQXJyYXlMaXN0KG5hbWVzLmxlbmd0aCk7CiAgICAgICAgZm9y\nIChpbnQgaSA9IDA7IGkgPCBuYW1lcy5sZW5ndGg7IGkrKykgewogICAgICAg\nICAgICB0cnkgewogICAgICAgICAgICAgICAgY2xhc3Nlcy5hZGQoQ2xhc3Mu\nZm9yTmFtZShuYW1lc1tpXSwgZmFsc2UsIGxvYWRlcikpOwogICAgICAgICAg\nICB9IGNhdGNoIChDbGFzc05vdEZvdW5kRXhjZXB0aW9uIGUpIHsKICAgICAg\nICAgICAgICAgIGlmICghc2tpcE1pc3NpbmcpCiAgICAgICAgICAgICAgICAg\nICAgdGhyb3cgZTsKICAgICAgICAgICAgfSBjYXRjaCAoVW5zdXBwb3J0ZWRD\nbGFzc1ZlcnNpb25FcnJvciBlY3ZlKSB7CiAgICAgICAgICAgICAgICBpZiAo\nIXNraXBNaXNzaW5nKQogICAgICAgICAgICAgICAgICAgIHRocm93IGVjdmU7\nCiAgICAgICAgICAgIH0gY2F0Y2ggKExpbmthZ2VFcnJvciBsZSkgewogICAg\nICAgICAgICAgICAgaWYgKCFza2lwTWlzc2luZykKICAgICAgICAgICAgICAg\nICAgICB0aHJvdyBsZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAg\nICByZXR1cm4gKENsYXNzW10pIGNsYXNzZXMudG9BcnJheShuZXcgQ2xhc3Nb\nY2xhc3Nlcy5zaXplKCldKTsKICAgIH0KfQo=\n","encoding":"base64"}

