{"sha":"a94767289237061a054abffca6b46f9b79336e2f","node_id":"MDQ6QmxvYjIwNjM2NDphOTQ3NjcyODkyMzcwNjFhMDU0YWJmZmNhNmI0NmY5Yjc5MzM2ZTJm","size":6066,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/a94767289237061a054abffca6b46f9b79336e2f","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIudXRpbDsKCmltcG9ydCBqYXZhLnV0aWwuQXJyYXlzOwpp\nbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247CmltcG9ydCBqYXZhLnV0aWwu\nSXRlcmF0b3I7CgovKioKICogVXRpbGl0aWVzIGZvciBjYWxjdWxhdGluZyBz\ndHJpbmcgZGlzdGFuY2UuCiAqCiAqIEBhdXRob3IgTWFyYyBQcnVkJ2hvbW1l\nYXV4CiAqIEBub2phdmFkb2MKICovCnB1YmxpYyBjbGFzcyBTdHJpbmdEaXN0\nYW5jZSB7CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBjYW5kaWRhdGUg\nc3RyaW5nIHdpdGggdGhlIGNsb3Nlc3QgTGV2ZW5zaHRlaW4gZGlzdGFuY2UK\nICAgICAqIHRvIHRoZSBnaXZlbiBzdHJpbmcuCiAgICAgKgogICAgICogQHNl\nZSAjZ2V0Q2xvc2VzdExldmVuc2h0ZWluRGlzdGFuY2UoU3RyaW5nLENvbGxl\nY3Rpb24saW50KQogICAgICovCiAgICBwdWJsaWMgc3RhdGljIFN0cmluZyBn\nZXRDbG9zZXN0TGV2ZW5zaHRlaW5EaXN0YW5jZShTdHJpbmcgc3RyLAogICAg\nICAgIFN0cmluZ1tdIGNhbmRpZGF0ZXMpIHsKICAgICAgICBpZiAoY2FuZGlk\nYXRlcyA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAg\nICByZXR1cm4gZ2V0Q2xvc2VzdExldmVuc2h0ZWluRGlzdGFuY2Uoc3RyLCBB\ncnJheXMuYXNMaXN0KGNhbmRpZGF0ZXMpKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIFJldHVybnMgdGhlIGNhbmRpZGF0ZSBzdHJpbmcgd2l0aCB0aGUgY2xv\nc2VzdCBMZXZlbnNodGVpbiBkaXN0YW5jZQogICAgICogdG8gdGhlIGdpdmVu\nIHN0cmluZy4KICAgICAqCiAgICAgKiBAc2VlICNnZXRDbG9zZXN0TGV2ZW5z\naHRlaW5EaXN0YW5jZShTdHJpbmcsQ29sbGVjdGlvbixpbnQpCiAgICAgKi8K\nICAgIHB1YmxpYyBzdGF0aWMgU3RyaW5nIGdldENsb3Nlc3RMZXZlbnNodGVp\nbkRpc3RhbmNlKFN0cmluZyBzdHIsCiAgICAgICAgQ29sbGVjdGlvbiBjYW5k\naWRhdGVzKSB7CiAgICAgICAgcmV0dXJuIGdldENsb3Nlc3RMZXZlbnNodGVp\nbkRpc3RhbmNlKHN0ciwgY2FuZGlkYXRlcywKICAgICAgICAgICAgSW50ZWdl\nci5NQVhfVkFMVUUpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0\naGUgY2FuZGlkYXRlIHN0cmluZyB3aXRoIHRoZSBjbG9zZXN0IExldmVuc2h0\nZWluIGRpc3RhbmNlCiAgICAgKiB0byB0aGUgZ2l2ZW4gc3RyaW5nLgogICAg\nICoKICAgICAqIEBzZWUgI2dldENsb3Nlc3RMZXZlbnNodGVpbkRpc3RhbmNl\nKFN0cmluZyxDb2xsZWN0aW9uLGludCkKICAgICAqLwogICAgcHVibGljIHN0\nYXRpYyBTdHJpbmcgZ2V0Q2xvc2VzdExldmVuc2h0ZWluRGlzdGFuY2UoU3Ry\naW5nIHN0ciwKICAgICAgICBTdHJpbmdbXSBjYW5kaWRhdGVzLCBpbnQgdGhy\nZXNob2xkKSB7CiAgICAgICAgaWYgKGNhbmRpZGF0ZXMgPT0gbnVsbCkKICAg\nICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgcmV0dXJuIGdldENsb3Nl\nc3RMZXZlbnNodGVpbkRpc3RhbmNlKHN0ciwgQXJyYXlzLmFzTGlzdChjYW5k\naWRhdGVzKSwKICAgICAgICAgICAgdGhyZXNob2xkKTsKICAgIH0KCiAgICAv\nKioKICAgICAqIFJldHVybnMgdGhlIGNhbmRpZGF0ZSBzdHJpbmcgd2l0aCB0\naGUgY2xvc2VzdCBMZXZlbnNodGVpbiBkaXN0YW5jZQogICAgICogdG8gdGhl\nIGdpdmVuIHN0cmluZyBhbmQgdXNpbmcgdGhlIHRocmVzaG9sZCBhcyB0aGUg\nc3BlY2lmaWVkCiAgICAgKiBwZXJjZW50YWdlIG9mIHRoZSBsZW5ndGggb2Yg\ndGhlIGNhbmRpZGF0ZSBzdHJpbmcoMC4wZi0xLjBmKS4KICAgICAqCiAgICAg\nKiBAc2VlICNnZXRDbG9zZXN0TGV2ZW5zaHRlaW5EaXN0YW5jZShTdHJpbmcs\nQ29sbGVjdGlvbixpbnQpCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgU3Ry\naW5nIGdldENsb3Nlc3RMZXZlbnNodGVpbkRpc3RhbmNlKFN0cmluZyBzdHIs\nCiAgICAgICAgU3RyaW5nW10gY2FuZGlkYXRlcywgZmxvYXQgdGhyZXNob2xk\nUGVyY2VudGFnZSkgewogICAgICAgIGlmIChjYW5kaWRhdGVzID09IG51bGwp\nCiAgICAgICAgICAgIHJldHVybiBudWxsOwoKICAgICAgICByZXR1cm4gZ2V0\nQ2xvc2VzdExldmVuc2h0ZWluRGlzdGFuY2Uoc3RyLCBBcnJheXMuYXNMaXN0\nKGNhbmRpZGF0ZXMpLAogICAgICAgICAgICB0aHJlc2hvbGRQZXJjZW50YWdl\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGNhbmRpZGF0\nZSBzdHJpbmcgd2l0aCB0aGUgY2xvc2VzdCBMZXZlbnNodGVpbiBkaXN0YW5j\nZQogICAgICogdG8gdGhlIGdpdmVuIHN0cmluZyBhbmQgdXNpbmcgdGhlIHRo\ncmVzaG9sZCBhcyB0aGUgc3BlY2lmaWVkCiAgICAgKiBwZXJjZW50YWdlIG9m\nIHRoZSBsZW5ndGggb2YgdGhlIGNhbmRpZGF0ZSBzdHJpbmcoMC4wZi0xLjBm\nKS4KICAgICAqCiAgICAgKiBAc2VlICNnZXRDbG9zZXN0TGV2ZW5zaHRlaW5E\naXN0YW5jZShTdHJpbmcsQ29sbGVjdGlvbixpbnQpCiAgICAgKi8KICAgIHB1\nYmxpYyBzdGF0aWMgU3RyaW5nIGdldENsb3Nlc3RMZXZlbnNodGVpbkRpc3Rh\nbmNlKFN0cmluZyBzdHIsCiAgICAgICAgQ29sbGVjdGlvbiBjYW5kaWRhdGVz\nLCBmbG9hdCB0aHJlc2hvbGRQZXJjZW50YWdlKSB7CiAgICAgICAgaWYgKHN0\nciA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKCiAgICAgICAg\ndGhyZXNob2xkUGVyY2VudGFnZSA9IE1hdGgubWluKHRocmVzaG9sZFBlcmNl\nbnRhZ2UsIDEuMGYpOwogICAgICAgIHRocmVzaG9sZFBlcmNlbnRhZ2UgPSBN\nYXRoLm1heCh0aHJlc2hvbGRQZXJjZW50YWdlLCAwLjBmKTsKCiAgICAgICAg\ncmV0dXJuIGdldENsb3Nlc3RMZXZlbnNodGVpbkRpc3RhbmNlKHN0ciwgY2Fu\nZGlkYXRlcywKICAgICAgICAgICAgKGludCkgKHN0ci5sZW5ndGgoKSAqIHRo\ncmVzaG9sZFBlcmNlbnRhZ2UpKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJl\ndHVybnMgdGhlIGNhbmRpZGF0ZSBzdHJpbmcgd2l0aCB0aGUgY2xvc2VzdCBM\nZXZlbnNodGVpbiBkaXN0YW5jZQogICAgICogdG8gdGhlIGdpdmVuIHN0cmlu\nZy4KICAgICAqCiAgICAgKiBAcGFyYW0gc3RyIHRoZSBzdHJpbmcgdG8gY2hl\nY2sKICAgICAqIEBwYXJhbSBjYW5kaWRhdGVzIHRoZSBsaXN0IG9mIHN0cmlu\nZ3MgdG8gdGVzdCBhZ2FpbnN0CiAgICAgKiBAcGFyYW0gdGhyZXNob2xkIHRo\nZSB0aHJlc2hvbGQgZGlzdGFuY2UgYSBjYW5kaWRhdGUgbXVzdCBtZWV0CiAg\nICAgKiBAc2VlICNnZXRMZXZlbnNodGVpbkRpc3RhbmNlCiAgICAgKi8KICAg\nIHB1YmxpYyBzdGF0aWMgU3RyaW5nIGdldENsb3Nlc3RMZXZlbnNodGVpbkRp\nc3RhbmNlKFN0cmluZyBzdHIsCiAgICAgICAgQ29sbGVjdGlvbiBjYW5kaWRh\ndGVzLCBpbnQgdGhyZXNob2xkKSB7CiAgICAgICAgaWYgKGNhbmRpZGF0ZXMg\nPT0gbnVsbCB8fCBjYW5kaWRhdGVzLmlzRW1wdHkoKSkKICAgICAgICAgICAg\ncmV0dXJuIG51bGw7CgogICAgICAgIFN0cmluZyBtaW5TdHJpbmcgPSBudWxs\nOwogICAgICAgIGludCBtaW5WYWx1ZSA9IEludGVnZXIuTUFYX1ZBTFVFOwoK\nICAgICAgICBmb3IgKEl0ZXJhdG9yIGkgPSBjYW5kaWRhdGVzLml0ZXJhdG9y\nKCk7IGkuaGFzTmV4dCgpOykgewogICAgICAgICAgICBTdHJpbmcgY2FuZGlk\nYXRlID0gKFN0cmluZykgaS5uZXh0KCk7CiAgICAgICAgICAgIGludCBkaXN0\nYW5jZSA9IGdldExldmVuc2h0ZWluRGlzdGFuY2Uoc3RyLCBjYW5kaWRhdGUp\nOwogICAgICAgICAgICBpZiAoZGlzdGFuY2UgPCBtaW5WYWx1ZSkgewogICAg\nICAgICAgICAgICAgbWluVmFsdWUgPSBkaXN0YW5jZTsKICAgICAgICAgICAg\nICAgIG1pblN0cmluZyA9IGNhbmRpZGF0ZTsKICAgICAgICAgICAgfQogICAg\nICAgIH0KCiAgICAgICAgLy8gcmV0dXJuIHRoZSBsb3dlc3QgY2xvc2Ugc3Ry\naW5nIG9ubHkgaWYgd2Ugc3VycGFzcyB0aGUgdGhyZXNoaG9sZAogICAgICAg\nIGlmIChtaW5WYWx1ZSA8PSB0aHJlc2hvbGQpCiAgICAgICAgICAgIHJldHVy\nbiBtaW5TdHJpbmc7CiAgICAgICAgZWxzZQogICAgICAgICAgICByZXR1cm4g\nbnVsbDsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIExldmVu\nc2h0ZWluIGRpc3RhbmNlIGJldHdlZW4gdGhlIHR3byBzdHJpbmdzLgogICAg\nICogVGhlIGRpc3RhbmNlIGlzIHRoZSBtaW5pbXVtIG51bWJlciBvZiBjaGFu\nZ2VzIHRoYXQgbmVlZCB0byBiZQogICAgICogYXBwbGllZCB0byB0aGUgZmly\nc3Qgc3RyaW5nIGluIG9yZGVyIHRvIGdldCB0byB0aGUgc2Vjb25kCiAgICAg\nKiBzdHJpbmcuIEZvciBkZXRhaWxzIG9mIHRoZSBhbGdvcml0aG0sIHNlZQog\nICAgICogPGEgaHJlZj0iaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9M\nZXZlbnNodGVpbl9kaXN0YW5jZSI+CiAgICAgKiBodHRwOi8vZW4ud2lraXBl\nZGlhLm9yZy93aWtpL0xldmVuc2h0ZWluX2Rpc3RhbmNlPC9hPi4KICAgICAq\nLwogICAgcHVibGljIHN0YXRpYyBpbnQgZ2V0TGV2ZW5zaHRlaW5EaXN0YW5j\nZShTdHJpbmcgcywgU3RyaW5nIHQpIHsKICAgICAgICBpbnQgbiA9IHMubGVu\nZ3RoKCk7CiAgICAgICAgaW50IG0gPSB0Lmxlbmd0aCgpOwoKICAgICAgICBp\nZiAobiA9PSAwKQogICAgICAgICAgICByZXR1cm4gbTsKCiAgICAgICAgaWYg\nKG0gPT0gMCkKICAgICAgICAgICAgcmV0dXJuIG47CgogICAgICAgIGludFtd\nW10gbWF0cml4ID0gbmV3IGludFtuICsgMV1bbSArIDFdOwoKICAgICAgICBm\nb3IgKGludCBpID0gMDsgaSA8PSBuOyBpKyspCiAgICAgICAgICAgIG1hdHJp\neFtpXVswXSA9IGk7CgogICAgICAgIGZvciAoaW50IGogPSAwOyBqIDw9IG07\nIGorKykKICAgICAgICAgICAgbWF0cml4WzBdW2pdID0gajsKCiAgICAgICAg\nZm9yIChpbnQgaSA9IDE7IGkgPD0gbjsgaSsrKSB7CiAgICAgICAgICAgIGlu\ndCBzaSA9IHMuY2hhckF0KGkgLSAxKTsKCiAgICAgICAgICAgIGZvciAoaW50\nIGogPSAxOyBqIDw9IG07IGorKykgewogICAgICAgICAgICAgICAgaW50IHRq\nID0gdC5jaGFyQXQoaiAtIDEpOwoKICAgICAgICAgICAgICAgIGludCBjb3N0\nOwoKICAgICAgICAgICAgICAgIGlmIChzaSA9PSB0aikKICAgICAgICAgICAg\nICAgICAgICBjb3N0ID0gMDsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAg\nICAgICAgICAgICAgICBjb3N0ID0gMTsKCiAgICAgICAgICAgICAgICBtYXRy\naXhbaV1bal0gPSBtaW4obWF0cml4W2kgLSAxXVtqXSArIDEsIG1hdHJpeFtp\nXVtqIC0gMV0gKyAxLAogICAgICAgICAgICAgICAgICAgIG1hdHJpeFtpIC0g\nMV1baiAtIDFdICsgY29zdCk7CiAgICAgICAgICAgIH0KICAgICAgICB9Cgog\nICAgICAgIHJldHVybiBtYXRyaXhbbl1bbV07CiAgICB9CgogICAgcHJpdmF0\nZSBzdGF0aWMgaW50IG1pbihpbnQgYSwgaW50IGIsIGludCBjKSB7CiAgICAg\nICAgaW50IG1pID0gYTsKCiAgICAgICAgaWYgKGIgPCBtaSkKICAgICAgICAg\nICAgbWkgPSBiOwoKICAgICAgICBpZiAoYyA8IG1pKQogICAgICAgICAgICBt\naSA9IGM7CgogICAgICAgIHJldHVybiBtaTsKICAgIH0KfQoK\n","encoding":"base64"}

