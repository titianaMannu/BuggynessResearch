{"sha":"918095964f53c441e7b1ac808c575d721b41e814","node_id":"MDQ6QmxvYjIwNjM2NDo5MTgwOTU5NjRmNTNjNDQxZTdiMWFjODA4YzU3NWQ3MjFiNDFlODE0","size":3457,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/918095964f53c441e7b1ac808c575d721b41e814","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIudXRpbDsKCmltcG9ydCBqYXZhLmlvLkJ5dGVBcnJheU91\ndHB1dFN0cmVhbTsKaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247CmltcG9y\ndCBqYXZhLmlvLklucHV0U3RyZWFtOwoKaW1wb3J0IHNlcnAuYnl0ZWNvZGUu\nbG93bGV2ZWwuQ29uc3RhbnRQb29sVGFibGU7CgovKioKICogQ2xhc3NMb2Fk\nZXIgaW1wbGVtZW50YXRpb24gdGhhdCBhbGxvd3MgY2xhc3NlcyB0byBiZSB0\nZW1wb3JhcmlseQogKiBsb2FkZWQgYW5kIHRoZW4gdGhyb3duIGF3YXkuIFVz\nZWZ1bCBmb3IgdGhlIGVuaGFuY2VyIHRvIGJlIGFibGUKICogdG8gcnVuIGFn\nYWluc3QgYSBjbGFzcyB3aXRob3V0IGZpcnN0IGxvYWRpbmcoYW5kIHRodXMg\ncG9sbHV0aW5nKQogKiB0aGUgcGFyZW50IENsYXNzTG9hZGVyLgogKgogKiBA\nYXV0aG9yIE1hcmMgUHJ1ZCdob21tZWF1eAogKiBAbm9qYXZhZG9jCiAqLwpw\ndWJsaWMgY2xhc3MgVGVtcG9yYXJ5Q2xhc3NMb2FkZXIgZXh0ZW5kcyBDbGFz\nc0xvYWRlciB7CgogICAgcHVibGljIFRlbXBvcmFyeUNsYXNzTG9hZGVyKENs\nYXNzTG9hZGVyIHBhcmVudCkgewogICAgICAgIHN1cGVyKHBhcmVudCk7CiAg\nICB9CgogICAgcHVibGljIENsYXNzIGxvYWRDbGFzcyhTdHJpbmcgbmFtZSkg\ndGhyb3dzIENsYXNzTm90Rm91bmRFeGNlcHRpb24gewogICAgICAgIHJldHVy\nbiBsb2FkQ2xhc3MobmFtZSwgZmFsc2UpOwogICAgfQoKICAgIHByb3RlY3Rl\nZCBDbGFzcyBsb2FkQ2xhc3MoU3RyaW5nIG5hbWUsIGJvb2xlYW4gcmVzb2x2\nZSkKICAgICAgICB0aHJvd3MgQ2xhc3NOb3RGb3VuZEV4Y2VwdGlvbiB7CiAg\nICAgICAgLy8gc2VlIGlmIHdlJ3ZlIGFscmVhZHkgbG9hZGVkIGl0CiAgICAg\nICAgQ2xhc3MgYyA9IGZpbmRMb2FkZWRDbGFzcyhuYW1lKTsKICAgICAgICBp\nZiAoYyAhPSBudWxsKQogICAgICAgICAgICByZXR1cm4gYzsKCiAgICAgICAg\nLy8gYnVnICMyODMuIGRlZmVyIHRvIHN5c3RlbSBpZiB0aGUgbmFtZSBpcyBh\nIHByb3RlY3RlZCBuYW1lLgogICAgICAgIC8vICJzdW4uIiBpcyByZXF1aXJl\nZCBmb3IgSkRLIDEuNCwgd2hpY2ggaGFzIGFuIGFjY2VzcyBjaGVjayBmb3IK\nICAgICAgICAvLyBzdW4ucmVmbGVjdC5HZW5lcmF0ZWRTZXJpYWxpemF0aW9u\nQ29uc3RydWN0b3JBY2Nlc3NvcjEKICAgICAgICBpZiAobmFtZS5zdGFydHNX\naXRoKCJqYXZhLiIpIHx8IG5hbWUuc3RhcnRzV2l0aCgiamF2YXguIikKICAg\nICAgICAgICAgfHwgbmFtZS5zdGFydHNXaXRoKCJzdW4uIikpCiAgICAgICAg\nICAgIHJldHVybiBDbGFzcy5mb3JOYW1lKG5hbWUsIHJlc29sdmUsIGdldENs\nYXNzKCkuZ2V0Q2xhc3NMb2FkZXIoKSk7CgogICAgICAgIFN0cmluZyByZXNv\ndXJjZU5hbWUgPSBuYW1lLnJlcGxhY2UoJy4nLCAnLycpICsgIi5jbGFzcyI7\nCiAgICAgICAgSW5wdXRTdHJlYW0gcmVzb3VyY2UgPSBnZXRSZXNvdXJjZUFz\nU3RyZWFtKHJlc291cmNlTmFtZSk7CiAgICAgICAgaWYgKHJlc291cmNlID09\nIG51bGwpCiAgICAgICAgICAgIHRocm93IG5ldyBDbGFzc05vdEZvdW5kRXhj\nZXB0aW9uKG5hbWUpOwoKICAgICAgICBCeXRlQXJyYXlPdXRwdXRTdHJlYW0g\nYm91dCA9IG5ldyBCeXRlQXJyYXlPdXRwdXRTdHJlYW0oKTsKICAgICAgICBi\neXRlW10gYiA9IG5ldyBieXRlWzEwMjRdOwogICAgICAgIHRyeSB7CiAgICAg\nICAgICAgIGZvciAoaW50IG4gPSAwOyAobiA9IHJlc291cmNlLnJlYWQoYiwg\nMCwgYi5sZW5ndGgpKSAhPSAtMTsKICAgICAgICAgICAgICAgIGJvdXQud3Jp\ndGUoYiwgMCwgbikpCiAgICAgICAgICAgICAgICA7CiAgICAgICAgICAgIGJ5\ndGVbXSBjbGFzc0J5dGVzID0gYm91dC50b0J5dGVBcnJheSgpOwogICAgICAg\nICAgICBpZiAoaXNBbm5vdGF0aW9uKGNsYXNzQnl0ZXMpKQogICAgICAgICAg\nICAgICAgcmV0dXJuIENsYXNzLmZvck5hbWUobmFtZSwgcmVzb2x2ZSwgZ2V0\nQ2xhc3MoKS4KICAgICAgICAgICAgICAgICAgICBnZXRDbGFzc0xvYWRlcigp\nKTsKCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICByZXR1cm4g\nZGVmaW5lQ2xhc3MobmFtZSwgY2xhc3NCeXRlcywgMCwgY2xhc3NCeXRlcy5s\nZW5ndGgpOwogICAgICAgICAgICB9IGNhdGNoIChTZWN1cml0eUV4Y2VwdGlv\nbiBlKSB7CiAgICAgICAgICAgICAgICAvLyBwb3NzaWJsZSBwcm9oaWJpdGVk\nIHBhY2thZ2U6IGRlZmVyIHRvIHRoZSBwYXJlbnQKICAgICAgICAgICAgICAg\nIHJldHVybiBzdXBlci5sb2FkQ2xhc3MobmFtZSwgcmVzb2x2ZSk7CiAgICAg\nICAgICAgIH0KICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBpb2UpIHsK\nICAgICAgICAgICAgLy8gZGVmZXIgdG8gdGhlIHBhcmVudAogICAgICAgICAg\nICByZXR1cm4gc3VwZXIubG9hZENsYXNzKG5hbWUsIHJlc29sdmUpOwogICAg\nICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEZhc3QtcGFyc2UgdGhlIGdp\ndmVuIGNsYXNzIGJ5dGVjb2RlIHRvIGRldGVybWluZSBpZiBpdCBpcyBhbgog\nICAgICogYW5ub3RhdGlvbiBjbGFzcy4KICAgICAqLwogICAgcHJpdmF0ZSBz\ndGF0aWMgYm9vbGVhbiBpc0Fubm90YXRpb24oYnl0ZVtdIGIpIHsKICAgICAg\nICBpZiAoSmF2YVZlcnNpb25zLlZFUlNJT04gPCA1KQogICAgICAgICAgICBy\nZXR1cm4gZmFsc2U7CiAgICAgICAgaW50IGlkeCA9IENvbnN0YW50UG9vbFRh\nYmxlLmdldEVuZEluZGV4KGIpOwogICAgICAgIGludCBhY2Nlc3MgPSBDb25z\ndGFudFBvb2xUYWJsZS5yZWFkVW5zaWduZWRTaG9ydChiLCBpZHgpOwogICAg\nICAgIHJldHVybiAoYWNjZXNzICYgMHgyMDAwKSAhPSAwOyAvLyBhY2Nlc3Mg\nY29uc3RhbnQgZm9yIGFubm90YXRpb24gdHlwZQogICAgfQp9Cg==\n","encoding":"base64"}

