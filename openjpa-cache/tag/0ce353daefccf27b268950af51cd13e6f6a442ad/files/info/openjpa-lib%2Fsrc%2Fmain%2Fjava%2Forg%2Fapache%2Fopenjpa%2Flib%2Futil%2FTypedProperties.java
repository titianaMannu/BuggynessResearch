{"sha":"05145a10e97881ce20fdaa643749ce5cd01a05bc","node_id":"MDQ6QmxvYjIwNjM2NDowNTE0NWExMGU5Nzg4MWNlMjBmZGFhNjQzNzQ5Y2U1Y2QwMWEwNWJj","size":9633,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/05145a10e97881ce20fdaa643749ce5cd01a05bc","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIudXRpbDsKCmltcG9ydCBqYXZhLnV0aWwuUHJvcGVydGll\nczsKCi8qKgogKiBBIHNwZWNpYWxpemF0aW9uIG9mIHRoZSB7QGxpbmsgUHJv\ncGVydGllc30gbWFwIHR5cGUgd2l0aCBhZGRlZAogKiBjb252ZW5pZW5jZSBt\nZXRob2RzIHRvIHJldHJpZXZlIGFuZCBzZXQgb3B0aW9ucyBhcyBwcmltaXRp\ndmUgdmFsdWVzLgogKiBUaGUgaW50ZXJuYWwgcmVwcmVzZW50YXRpb24gb2Yg\nYWxsIGRhdGEgaXMga2VwdCBpbiBzdHJpbmcgZm9ybS4KICoKICogQGF1dGhv\nciBBYmUgV2hpdGUKICogQG5vamF2YWRvYwogKi8KcHVibGljIGNsYXNzIFR5\ncGVkUHJvcGVydGllcyBleHRlbmRzIFByb3BlcnRpZXMgewoKICAgIC8qKgog\nICAgICogRGVmYXVsdCBjb25zdHJ1Y3Rvci4KICAgICAqLwogICAgcHVibGlj\nIFR5cGVkUHJvcGVydGllcygpIHsKICAgICAgICBzdXBlcigpOwogICAgfQoK\nICAgIC8qKgogICAgICogQ29uc3RydWN0IHRoZSBwcm9wZXJ0aWVzIGluc3Rh\nbmNlIHdpdGggdGhlIGdpdmVuIHNldCBvZiBkZWZhdWx0cy4KICAgICAqCiAg\nICAgKiBAc2VlIFByb3BlcnRpZXMjUHJvcGVydGllcyhQcm9wZXJ0aWVzKQog\nICAgICovCiAgICBwdWJsaWMgVHlwZWRQcm9wZXJ0aWVzKFByb3BlcnRpZXMg\nZGVmYXVsdHMpIHsKICAgICAgICBzdXBlcihkZWZhdWx0cyk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIHByb3BlcnR5IHVuZGVyIHRoZSBn\naXZlbiBrZXkgYXMgYSBib29sZWFuLCBvciBmYWxzZSBpZgogICAgICogaXQg\nZG9lcyBub3QgZXhpc3QgYW5kIGhhcyBubyBzZXQgZGVmYXVsdC4KICAgICAq\nLwogICAgcHVibGljIGJvb2xlYW4gZ2V0Qm9vbGVhblByb3BlcnR5KFN0cmlu\nZyBrZXkpIHsKICAgICAgICByZXR1cm4gZ2V0Qm9vbGVhblByb3BlcnR5KGtl\neSwgZmFsc2UpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBw\ncm9wZXJ0eSB1bmRlciB0aGUgZ2l2ZW4ga2V5IGFzIGEgYm9vbGVhbiwgb3Ig\ndGhlIGdpdmVuCiAgICAgKiBkZWZhdWx0IGlmIGl0IGRvZXMgbm90IGV4aXN0\nLgogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBnZXRCb29sZWFuUHJvcGVy\ndHkoU3RyaW5nIGtleSwgYm9vbGVhbiBkZWYpIHsKICAgICAgICBTdHJpbmcg\ndmFsID0gZ2V0UHJvcGVydHkoa2V5KTsKICAgICAgICBpZiAodmFsID09IG51\nbGwpCiAgICAgICAgICAgIHJldHVybiBkZWY7CiAgICAgICAgcmV0dXJuICJ0\nIi5lcXVhbHNJZ25vcmVDYXNlKHZhbCkgfHwgInRydWUiLmVxdWFsc0lnbm9y\nZUNhc2UodmFsKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUg\ncHJvcGVydHkgdW5kZXIgdGhlIGdpdmVuIGtleSBhcyBhIGZsb2F0LCBvciAw\nIGlmCiAgICAgKiBpdCBkb2VzIG5vdCBleGlzdCBhbmQgaGFzIG5vIHNldCBk\nZWZhdWx0LgogICAgICoKICAgICAqIEB0aHJvd3MgTnVtYmVyRm9ybWF0RXhj\nZXB0aW9uIG9uIHBhcnNlIGVycm9yCiAgICAgKi8KICAgIHB1YmxpYyBmbG9h\ndCBnZXRGbG9hdFByb3BlcnR5KFN0cmluZyBrZXkpIHsKICAgICAgICByZXR1\ncm4gZ2V0RmxvYXRQcm9wZXJ0eShrZXksIDBGKTsKICAgIH0KCiAgICAvKioK\nICAgICAqIFJldHVybiB0aGUgcHJvcGVydHkgdW5kZXIgdGhlIGdpdmVuIGtl\neSBhcyBhIGZsb2F0LCBvciB0aGUgZ2l2ZW4KICAgICAqIGRlZmF1bHQgaWYg\naXQgZG9lcyBub3QgZXhpc3QuCiAgICAgKgogICAgICogQHRocm93cyBOdW1i\nZXJGb3JtYXRFeGNlcHRpb24gb24gcGFyc2UgZXJyb3IKICAgICAqLwogICAg\ncHVibGljIGZsb2F0IGdldEZsb2F0UHJvcGVydHkoU3RyaW5nIGtleSwgZmxv\nYXQgZGVmKSB7CiAgICAgICAgU3RyaW5nIHZhbCA9IGdldFByb3BlcnR5KGtl\neSk7CiAgICAgICAgcmV0dXJuICh2YWwgPT0gbnVsbCkgPyBkZWYgOiBGbG9h\ndC5wYXJzZUZsb2F0KHZhbCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1\ncm4gdGhlIHByb3BlcnR5IHVuZGVyIHRoZSBnaXZlbiBrZXkgYXMgYSBkb3Vi\nbGUsIG9yIDAgaWYKICAgICAqIGl0IGRvZXMgbm90IGV4aXN0IGFuZCBoYXMg\nbm8gc2V0IGRlZmF1bHQuCiAgICAgKgogICAgICogQHRocm93cyBOdW1iZXJG\nb3JtYXRFeGNlcHRpb24gb24gcGFyc2UgZXJyb3IKICAgICAqLwogICAgcHVi\nbGljIGRvdWJsZSBnZXREb3VibGVQcm9wZXJ0eShTdHJpbmcga2V5KSB7CiAg\nICAgICAgcmV0dXJuIGdldERvdWJsZVByb3BlcnR5KGtleSwgMEQpOwogICAg\nfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBwcm9wZXJ0eSB1bmRlciB0\naGUgZ2l2ZW4ga2V5IGFzIGEgZG91YmxlLCBvciB0aGUgZ2l2ZW4KICAgICAq\nIGRlZmF1bHQgaWYgaXQgZG9lcyBub3QgZXhpc3QuCiAgICAgKgogICAgICog\nQHRocm93cyBOdW1iZXJGb3JtYXRFeGNlcHRpb24gb24gcGFyc2UgZXJyb3IK\nICAgICAqLwogICAgcHVibGljIGRvdWJsZSBnZXREb3VibGVQcm9wZXJ0eShT\ndHJpbmcga2V5LCBkb3VibGUgZGVmKSB7CiAgICAgICAgU3RyaW5nIHZhbCA9\nIGdldFByb3BlcnR5KGtleSk7CiAgICAgICAgcmV0dXJuICh2YWwgPT0gbnVs\nbCkgPyBkZWYgOiBEb3VibGUucGFyc2VEb3VibGUodmFsKTsKICAgIH0KCiAg\nICAvKioKICAgICAqIFJldHVybiB0aGUgcHJvcGVydHkgdW5kZXIgdGhlIGdp\ndmVuIGtleSBhcyBhIGxvbmcsIG9yIDAgaWYKICAgICAqIGl0IGRvZXMgbm90\nIGV4aXN0IGFuZCBoYXMgbm8gc2V0IGRlZmF1bHQuCiAgICAgKgogICAgICog\nQHRocm93cyBOdW1iZXJGb3JtYXRFeGNlcHRpb24gb24gcGFyc2UgZXJyb3IK\nICAgICAqLwogICAgcHVibGljIGxvbmcgZ2V0TG9uZ1Byb3BlcnR5KFN0cmlu\nZyBrZXkpIHsKICAgICAgICByZXR1cm4gZ2V0TG9uZ1Byb3BlcnR5KGtleSwg\nMEwpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBwcm9wZXJ0\neSB1bmRlciB0aGUgZ2l2ZW4ga2V5IGFzIGEgZG91YmxlLCBvciB0aGUgZ2l2\nZW4KICAgICAqIGRlZmF1bHQgaWYgaXQgZG9lcyBub3QgZXhpc3QuCiAgICAg\nKgogICAgICogQHRocm93cyBOdW1iZXJGb3JtYXRFeGNlcHRpb24gb24gcGFy\nc2UgZXJyb3IKICAgICAqLwogICAgcHVibGljIGxvbmcgZ2V0TG9uZ1Byb3Bl\ncnR5KFN0cmluZyBrZXksIGxvbmcgZGVmKSB7CiAgICAgICAgU3RyaW5nIHZh\nbCA9IGdldFByb3BlcnR5KGtleSk7CiAgICAgICAgcmV0dXJuICh2YWwgPT0g\nbnVsbCkgPyBkZWYgOiBMb25nLnBhcnNlTG9uZyh2YWwpOwogICAgfQoKICAg\nIC8qKgogICAgICogUmV0dXJuIHRoZSBwcm9wZXJ0eSB1bmRlciB0aGUgZ2l2\nZW4ga2V5IGFzIGFuIGludCwgb3IgMCBpZgogICAgICogaXQgZG9lcyBub3Qg\nZXhpc3QgYW5kIGhhcyBubyBzZXQgZGVmYXVsdC4KICAgICAqCiAgICAgKiBA\ndGhyb3dzIE51bWJlckZvcm1hdEV4Y2VwdGlvbiBvbiBwYXJzZSBlcnJvcgog\nICAgICovCiAgICBwdWJsaWMgaW50IGdldEludFByb3BlcnR5KFN0cmluZyBr\nZXkpIHsKICAgICAgICByZXR1cm4gZ2V0SW50UHJvcGVydHkoa2V5LCAwKTsK\nICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgcHJvcGVydHkgdW5k\nZXIgdGhlIGdpdmVuIGtleSBhcyBhbiBpbnQsIG9yIHRoZSBnaXZlbgogICAg\nICogZGVmYXVsdCBpZiBpdCBkb2VzIG5vdCBleGlzdC4KICAgICAqCiAgICAg\nKiBAdGhyb3dzIE51bWJlckZvcm1hdEV4Y2VwdGlvbiBvbiBwYXJzZSBlcnJv\ncgogICAgICovCiAgICBwdWJsaWMgaW50IGdldEludFByb3BlcnR5KFN0cmlu\nZyBrZXksIGludCBkZWYpIHsKICAgICAgICBTdHJpbmcgdmFsID0gZ2V0UHJv\ncGVydHkoa2V5KTsKICAgICAgICByZXR1cm4gKHZhbCA9PSBudWxsKSA/IGRl\nZiA6IEludGVnZXIucGFyc2VJbnQodmFsKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIE92ZXJyaWRlcyB7QGxpbmsgUHJvcGVydGllcyNzZXRQcm9wZXJ0eShT\ndHJpbmcsU3RyaW5nKX0gdG8gcmVtb3ZlCiAgICAgKiB0aGUga2V5IGlmIHRo\nZSBnaXZlbiB2YWx1ZSBpcyA8Y29kZT5udWxsPC9jb2RlPi4KICAgICAqCiAg\nICAgKiBAc2VlIFByb3BlcnRpZXMjc2V0UHJvcGVydHkoU3RyaW5nLFN0cmlu\nZykKICAgICAqLwogICAgcHVibGljIE9iamVjdCBzZXRQcm9wZXJ0eShTdHJp\nbmcga2V5LCBTdHJpbmcgdmFsKSB7CiAgICAgICAgaWYgKHZhbCA9PSBudWxs\nKQogICAgICAgICAgICByZXR1cm4gcmVtb3ZlKGtleSk7CiAgICAgICAgcmV0\ndXJuIHN1cGVyLnNldFByb3BlcnR5KGtleSwgdmFsKTsKICAgIH0KCiAgICAv\nKioKICAgICAqIFNldCB0aGUgZ2l2ZW4ga2V5IHRvIGEgc3RyaW5nIHZlcnNp\nb24gb2YgdGhlIGdpdmVuIHZhbHVlLgogICAgICoKICAgICAqIEBzZWUgUHJv\ncGVydGllcyNzZXRQcm9wZXJ0eShTdHJpbmcsU3RyaW5nKQogICAgICovCiAg\nICBwdWJsaWMgdm9pZCBzZXRQcm9wZXJ0eShTdHJpbmcga2V5LCBib29sZWFu\nIHZhbCkgewogICAgICAgIHNldFByb3BlcnR5KGtleSwgU3RyaW5nLnZhbHVl\nT2YodmFsKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQgdGhlIGdpdmVu\nIGtleSB0byBhIHN0cmluZyB2ZXJzaW9uIG9mIHRoZSBnaXZlbiB2YWx1ZS4K\nICAgICAqCiAgICAgKiBAc2VlIFByb3BlcnRpZXMjc2V0UHJvcGVydHkoU3Ry\naW5nLFN0cmluZykKICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0UHJvcGVy\ndHkoU3RyaW5nIGtleSwgZG91YmxlIHZhbCkgewogICAgICAgIHNldFByb3Bl\ncnR5KGtleSwgU3RyaW5nLnZhbHVlT2YodmFsKSk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBTZXQgdGhlIGdpdmVuIGtleSB0byBhIHN0cmluZyB2ZXJzaW9u\nIG9mIHRoZSBnaXZlbiB2YWx1ZS4KICAgICAqCiAgICAgKiBAc2VlIFByb3Bl\ncnRpZXMjc2V0UHJvcGVydHkoU3RyaW5nLFN0cmluZykKICAgICAqLwogICAg\ncHVibGljIHZvaWQgc2V0UHJvcGVydHkoU3RyaW5nIGtleSwgZmxvYXQgdmFs\nKSB7CiAgICAgICAgc2V0UHJvcGVydHkoa2V5LCBTdHJpbmcudmFsdWVPZih2\nYWwpKTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCB0aGUgZ2l2ZW4ga2V5\nIHRvIGEgc3RyaW5nIHZlcnNpb24gb2YgdGhlIGdpdmVuIHZhbHVlLgogICAg\nICoKICAgICAqIEBzZWUgUHJvcGVydGllcyNzZXRQcm9wZXJ0eShTdHJpbmcs\nU3RyaW5nKQogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRQcm9wZXJ0eShT\ndHJpbmcga2V5LCBpbnQgdmFsKSB7CiAgICAgICAgc2V0UHJvcGVydHkoa2V5\nLCBTdHJpbmcudmFsdWVPZih2YWwpKTsKICAgIH0KCiAgICAvKioKICAgICAq\nIFNldCB0aGUgZ2l2ZW4ga2V5IHRvIGEgc3RyaW5nIHZlcnNpb24gb2YgdGhl\nIGdpdmVuIHZhbHVlLgogICAgICoKICAgICAqIEBzZWUgUHJvcGVydGllcyNz\nZXRQcm9wZXJ0eShTdHJpbmcsU3RyaW5nKQogICAgICovCiAgICBwdWJsaWMg\ndm9pZCBzZXRQcm9wZXJ0eShTdHJpbmcga2V5LCBsb25nIHZhbCkgewogICAg\nICAgIHNldFByb3BlcnR5KGtleSwgU3RyaW5nLnZhbHVlT2YodmFsKSk7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBSZW1vdmUgdGhlIGdpdmVuIHByb3BlcnR5\nLgogICAgICovCiAgICBwdWJsaWMgU3RyaW5nIHJlbW92ZVByb3BlcnR5KFN0\ncmluZyBrZXkpIHsKICAgICAgICBPYmplY3QgdmFsID0gcmVtb3ZlKGtleSk7\nCiAgICAgICAgcmV0dXJuICh2YWwgPT0gbnVsbCkgPyBudWxsIDogdmFsLnRv\nU3RyaW5nKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZW1vdmUgdGhlIGdp\ndmVuIHByb3BlcnR5LCBvciByZXR1cm4gdGhlIGdpdmVuIGRlZmF1bHQgaWYg\naXQgZG9lcwogICAgICogbm90IGV4aXN0LgogICAgICovCiAgICBwdWJsaWMg\nU3RyaW5nIHJlbW92ZVByb3BlcnR5KFN0cmluZyBrZXksIFN0cmluZyBkZWYp\nIHsKICAgICAgICBpZiAoIWNvbnRhaW5zS2V5KGtleSkpCiAgICAgICAgICAg\nIHJldHVybiBkZWY7CiAgICAgICAgcmV0dXJuIHJlbW92ZVByb3BlcnR5KGtl\neSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZW1vdmUgdGhlIHByb3BlcnR5\nIHVuZGVyIHRoZSBnaXZlbiBrZXkgYXMgYSBib29sZWFuLgogICAgICovCiAg\nICBwdWJsaWMgYm9vbGVhbiByZW1vdmVCb29sZWFuUHJvcGVydHkoU3RyaW5n\nIGtleSkgewogICAgICAgIFN0cmluZyB2YWwgPSByZW1vdmVQcm9wZXJ0eShr\nZXkpOwogICAgICAgIHJldHVybiAidCIuZXF1YWxzSWdub3JlQ2FzZSh2YWwp\nIHx8ICJ0cnVlIi5lcXVhbHNJZ25vcmVDYXNlKHZhbCk7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBSZW1vdmUgdGhlIHByb3BlcnR5IHVuZGVyIHRoZSBnaXZl\nbiBrZXkgYXMgYSBib29sZWFuLCBvciByZXR1cm4gdGhlCiAgICAgKiBnaXZl\nbiBkZWZhdWx0IGlmIGl0IGRvZXMgbm90IGV4aXN0LgogICAgICovCiAgICBw\ndWJsaWMgYm9vbGVhbiByZW1vdmVCb29sZWFuUHJvcGVydHkoU3RyaW5nIGtl\neSwgYm9vbGVhbiBkZWYpIHsKICAgICAgICBpZiAoIWNvbnRhaW5zS2V5KGtl\neSkpCiAgICAgICAgICAgIHJldHVybiBkZWY7CiAgICAgICAgcmV0dXJuIHJl\nbW92ZUJvb2xlYW5Qcm9wZXJ0eShrZXkpOwogICAgfQoKICAgIC8qKgogICAg\nICogUmVtb3ZlIHRoZSBwcm9wZXJ0eSB1bmRlciB0aGUgZ2l2ZW4ga2V5IGFz\nIGEgZG91YmxlLgogICAgICoKICAgICAqIEB0aHJvd3MgTnVtYmVyRm9ybWF0\nRXhjZXB0aW9uIG9uIHBhcnNlIGVycm9yCiAgICAgKi8KICAgIHB1YmxpYyBk\nb3VibGUgcmVtb3ZlRG91YmxlUHJvcGVydHkoU3RyaW5nIGtleSkgewogICAg\nICAgIFN0cmluZyB2YWwgPSByZW1vdmVQcm9wZXJ0eShrZXkpOwogICAgICAg\nIHJldHVybiAodmFsID09IG51bGwpID8gMEQgOiBEb3VibGUucGFyc2VEb3Vi\nbGUodmFsKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJlbW92ZSB0aGUgcHJv\ncGVydHkgdW5kZXIgdGhlIGdpdmVuIGtleSBhcyBhIGRvdWJsZSwgb3IgcmV0\ndXJuIHRoZQogICAgICogZ2l2ZW4gZGVmYXVsdCBpZiBpdCBkb2VzIG5vdCBl\neGlzdC4KICAgICAqCiAgICAgKiBAdGhyb3dzIE51bWJlckZvcm1hdEV4Y2Vw\ndGlvbiBvbiBwYXJzZSBlcnJvcgogICAgICovCiAgICBwdWJsaWMgZG91Ymxl\nIHJlbW92ZURvdWJsZVByb3BlcnR5KFN0cmluZyBrZXksIGRvdWJsZSBkZWYp\nIHsKICAgICAgICBpZiAoIWNvbnRhaW5zS2V5KGtleSkpCiAgICAgICAgICAg\nIHJldHVybiBkZWY7CiAgICAgICAgcmV0dXJuIHJlbW92ZURvdWJsZVByb3Bl\ncnR5KGtleSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZW1vdmUgdGhlIHBy\nb3BlcnR5IHVuZGVyIHRoZSBnaXZlbiBrZXkgYXMgYSBmbG9hdC4KICAgICAq\nCiAgICAgKiBAdGhyb3dzIE51bWJlckZvcm1hdEV4Y2VwdGlvbiBvbiBwYXJz\nZSBlcnJvcgogICAgICovCiAgICBwdWJsaWMgZmxvYXQgcmVtb3ZlRmxvYXRQ\ncm9wZXJ0eShTdHJpbmcga2V5KSB7CiAgICAgICAgU3RyaW5nIHZhbCA9IHJl\nbW92ZVByb3BlcnR5KGtleSk7CiAgICAgICAgcmV0dXJuICh2YWwgPT0gbnVs\nbCkgPyAwRiA6IEZsb2F0LnBhcnNlRmxvYXQodmFsKTsKICAgIH0KCiAgICAv\nKioKICAgICAqIFJlbW92ZSB0aGUgcHJvcGVydHkgdW5kZXIgdGhlIGdpdmVu\nIGtleSBhcyBhIGZsb2F0LCBvciByZXR1cm4gdGhlCiAgICAgKiBnaXZlbiBk\nZWZhdWx0IGlmIGl0IGRvZXMgbm90IGV4aXN0LgogICAgICoKICAgICAqIEB0\naHJvd3MgTnVtYmVyRm9ybWF0RXhjZXB0aW9uIG9uIHBhcnNlIGVycm9yCiAg\nICAgKi8KICAgIHB1YmxpYyBmbG9hdCByZW1vdmVGbG9hdFByb3BlcnR5KFN0\ncmluZyBrZXksIGZsb2F0IGRlZikgewogICAgICAgIGlmICghY29udGFpbnNL\nZXkoa2V5KSkKICAgICAgICAgICAgcmV0dXJuIGRlZjsKICAgICAgICByZXR1\ncm4gcmVtb3ZlRmxvYXRQcm9wZXJ0eShrZXkpOwogICAgfQoKICAgIC8qKgog\nICAgICogUmVtb3ZlIHRoZSBwcm9wZXJ0eSB1bmRlciB0aGUgZ2l2ZW4ga2V5\nIGFzIGEgaW50LgogICAgICoKICAgICAqIEB0aHJvd3MgTnVtYmVyRm9ybWF0\nRXhjZXB0aW9uIG9uIHBhcnNlIGVycm9yCiAgICAgKi8KICAgIHB1YmxpYyBp\nbnQgcmVtb3ZlSW50UHJvcGVydHkoU3RyaW5nIGtleSkgewogICAgICAgIFN0\ncmluZyB2YWwgPSByZW1vdmVQcm9wZXJ0eShrZXkpOwogICAgICAgIHJldHVy\nbiAodmFsID09IG51bGwpID8gMCA6IEludGVnZXIucGFyc2VJbnQodmFsKTsK\nICAgIH0KCiAgICAvKioKICAgICAqIFJlbW92ZSB0aGUgcHJvcGVydHkgdW5k\nZXIgdGhlIGdpdmVuIGtleSBhcyBhIGludCwgb3IgcmV0dXJuIHRoZQogICAg\nICogZ2l2ZW4gZGVmYXVsdCBpZiBpdCBkb2VzIG5vdCBleGlzdC4KICAgICAq\nCiAgICAgKiBAdGhyb3dzIE51bWJlckZvcm1hdEV4Y2VwdGlvbiBvbiBwYXJz\nZSBlcnJvcgogICAgICovCiAgICBwdWJsaWMgaW50IHJlbW92ZUludFByb3Bl\ncnR5KFN0cmluZyBrZXksIGludCBkZWYpIHsKICAgICAgICBpZiAoIWNvbnRh\naW5zS2V5KGtleSkpCiAgICAgICAgICAgIHJldHVybiBkZWY7CiAgICAgICAg\ncmV0dXJuIHJlbW92ZUludFByb3BlcnR5KGtleSk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBSZW1vdmUgdGhlIHByb3BlcnR5IHVuZGVyIHRoZSBnaXZlbiBr\nZXkgYXMgYSBsb25nLgogICAgICoKICAgICAqIEB0aHJvd3MgTnVtYmVyRm9y\nbWF0RXhjZXB0aW9uIG9uIHBhcnNlIGVycm9yCiAgICAgKi8KICAgIHB1Ymxp\nYyBsb25nIHJlbW92ZUxvbmdQcm9wZXJ0eShTdHJpbmcga2V5KSB7CiAgICAg\nICAgU3RyaW5nIHZhbCA9IHJlbW92ZVByb3BlcnR5KGtleSk7CiAgICAgICAg\ncmV0dXJuICh2YWwgPT0gbnVsbCkgPyAwTCA6IExvbmcucGFyc2VMb25nKHZh\nbCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZW1vdmUgdGhlIHByb3BlcnR5\nIHVuZGVyIHRoZSBnaXZlbiBrZXkgYXMgYSBsb25nLCBvciByZXR1cm4gdGhl\nCiAgICAgKiBnaXZlbiBkZWZhdWx0IGlmIGl0IGRvZXMgbm90IGV4aXN0Lgog\nICAgICoKICAgICAqIEB0aHJvd3MgTnVtYmVyRm9ybWF0RXhjZXB0aW9uIG9u\nIHBhcnNlIGVycm9yCiAgICAgKi8KICAgIHB1YmxpYyBsb25nIHJlbW92ZUxv\nbmdQcm9wZXJ0eShTdHJpbmcga2V5LCBsb25nIGRlZikgewogICAgICAgIGlm\nICghY29udGFpbnNLZXkoa2V5KSkKICAgICAgICAgICAgcmV0dXJuIGRlZjsK\nICAgICAgICByZXR1cm4gcmVtb3ZlTG9uZ1Byb3BlcnR5KGtleSk7CiAgICB9\nCn0K\n","encoding":"base64"}

