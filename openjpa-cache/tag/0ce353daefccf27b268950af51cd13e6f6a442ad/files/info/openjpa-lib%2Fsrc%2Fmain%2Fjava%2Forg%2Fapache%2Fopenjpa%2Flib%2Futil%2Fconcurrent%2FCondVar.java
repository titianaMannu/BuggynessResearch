{"sha":"bc01a7a66b0eb4810c4ac28315b9c1c538fc756e","node_id":"MDQ6QmxvYjIwNjM2NDpiYzAxYTdhNjZiMGViNDgxMGM0YWMyODMxNWI5YzFjNTM4ZmM3NTZl","size":6717,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/bc01a7a66b0eb4810c4ac28315b9c1c538fc756e","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwovKgogKiBPcmlnaW5hbGx5IHdy\naXR0ZW4gYnkgRG91ZyBMZWEgYW5kIHJlbGVhc2VkIGludG8gdGhlIHB1Ymxp\nYyBkb21haW4uCiAqIFRoaXMgbWF5IGJlIHVzZWQgZm9yIGFueSBwdXJwb3Nl\ncyB3aGF0c29ldmVyIHdpdGhvdXQgYWNrbm93bGVkZ21lbnQuCiAqIFRoYW5r\ncyBmb3IgdGhlIGFzc2lzdGFuY2UgYW5kIHN1cHBvcnQgb2YgU3VuIE1pY3Jv\nc3lzdGVtcyBMYWJzLAogKiBhbmQgZXZlcnlvbmUgY29udHJpYnV0aW5nLCB0\nZXN0aW5nLCBhbmQgdXNpbmcgdGhpcyBjb2RlLgogKi8KcGFja2FnZSBvcmcu\nYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuY29uY3VycmVudDsKCmltcG9ydCBq\nYXZhLnV0aWwuQ29sbGVjdGlvbjsKaW1wb3J0IGphdmEudXRpbC5EYXRlOwoK\nY2xhc3MgQ29uZFZhciBpbXBsZW1lbnRzIENvbmRpdGlvbiwgamF2YS5pby5T\nZXJpYWxpemFibGUgewoKICAgIC8qKgogICAgICogVGhlIGxvY2sKICAgICAq\nLwogICAgcHJvdGVjdGVkIGZpbmFsIEV4Y2x1c2l2ZUxvY2sgbG9jazsKCiAg\nICAvKioKICAgICAqIENyZWF0ZSBhIG5ldyBDb25kVmFyIHRoYXQgcmVsaWVz\nIG9uIHRoZSBnaXZlbiBtdXR1YWwgZXhjbHVzaW9uIGxvY2suCiAgICAgKiBA\ncGFyYW0gbG9jayBBIG5vbi1yZWVudHJhbnQgbXV0dWFsIGV4Y2x1c2lvbiBs\nb2NrLgogICAgICovCiAgICBDb25kVmFyKEV4Y2x1c2l2ZUxvY2sgbG9jaykg\newogICAgICAgIHRoaXMubG9jayA9IGxvY2s7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgYXdhaXRVbmludGVycnVwdGlibHkoKSB7CiAgICAgICAgaW50IGhv\nbGRDb3VudCA9IGxvY2suZ2V0SG9sZENvdW50KCk7CiAgICAgICAgaWYgKGhv\nbGRDb3VudCA9PSAwKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2Fs\nTW9uaXRvclN0YXRlRXhjZXB0aW9uKCk7CiAgICAgICAgfQogICAgICAgIC8v\nIGF2b2lkIGluc3RhbnQgc3B1cmlvdXMgd2FrZXVwIGlmIHRocmVhZCBhbHJl\nYWR5IGludGVycnVwdGVkCiAgICAgICAgYm9vbGVhbiB3YXNJbnRlcnJ1cHRl\nZCA9IFRocmVhZC5pbnRlcnJ1cHRlZCgpOwogICAgICAgIHRyeSB7CiAgICAg\nICAgICAgIHN5bmNocm9uaXplZCAodGhpcykgewogICAgICAgICAgICAgICAg\nZm9yIChpbnQgaSA9IGhvbGRDb3VudDsgaSA+IDA7IGktLSkgbG9jay51bmxv\nY2soKTsKICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7CiAgICAgICAg\nICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgd2Fp\ndCgpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAg\nICAgICAgICAgICB9IGNhdGNoIChJbnRlcnJ1cHRlZEV4Y2VwdGlvbiBleCkg\newogICAgICAgICAgICAgICAgICAgICAgICB3YXNJbnRlcnJ1cHRlZCA9IHRy\ndWU7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1heSBoYXZlIG1hc2tl\nZCB0aGUgc2lnbmFsIGFuZCB0aGVyZSBpcyBubyB3YXkKICAgICAgICAgICAg\nICAgICAgICAgICAgLy8gdG8gdGVsbDsgZGVmZW5zaXZlbHkgcHJvcGFnYXRl\nIHRoZSBzaWduYWwKICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZ5KCk7\nCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAg\nICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZpbmFsbHkgewogICAgICAg\nICAgICBmb3IgKGludCBpID0gaG9sZENvdW50OyBpID4gMDsgaS0tKSBsb2Nr\nLmxvY2soKTsKICAgICAgICAgICAgaWYgKHdhc0ludGVycnVwdGVkKSB7CiAg\nICAgICAgICAgICAgICBUaHJlYWQuY3VycmVudFRocmVhZCgpLmludGVycnVw\ndCgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIGF3YWl0KCkgdGhyb3dzIEludGVycnVwdGVkRXhjZXB0aW9uIHsK\nICAgICAgICBpbnQgaG9sZENvdW50ID0gbG9jay5nZXRIb2xkQ291bnQoKTsK\nICAgICAgICBpZiAoaG9sZENvdW50ID09IDApIHsKICAgICAgICAgICAgdGhy\nb3cgbmV3IElsbGVnYWxNb25pdG9yU3RhdGVFeGNlcHRpb24oKTsKICAgICAg\nICB9CiAgICAgICAgaWYgKFRocmVhZC5pbnRlcnJ1cHRlZCgpKSB0aHJvdyBu\nZXcgSW50ZXJydXB0ZWRFeGNlcHRpb24oKTsKICAgICAgICB0cnkgewogICAg\nICAgICAgICBzeW5jaHJvbml6ZWQgKHRoaXMpIHsKICAgICAgICAgICAgICAg\nIGZvciAoaW50IGkgPSBob2xkQ291bnQ7IGkgPiAwOyBpLS0pIGxvY2sudW5s\nb2NrKCk7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAg\nICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEludGVycnVw\ndGVkRXhjZXB0aW9uIGV4KSB7CiAgICAgICAgICAgICAgICAgICAgbm90aWZ5\nKCk7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXg7CiAgICAgICAgICAg\nICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9IGZpbmFsbHkgewogICAg\nICAgICAgICBmb3IgKGludCBpID0gaG9sZENvdW50OyBpID4gMDsgaS0tKSBs\nb2NrLmxvY2soKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIGJvb2xl\nYW4gYXdhaXQobG9uZyB0aW1lb3V0LCBUaW1lVW5pdCB1bml0KQogICAgICAg\nIHRocm93cyBJbnRlcnJ1cHRlZEV4Y2VwdGlvbiB7CiAgICAgICAgaW50IGhv\nbGRDb3VudCA9IGxvY2suZ2V0SG9sZENvdW50KCk7CiAgICAgICAgaWYgKGhv\nbGRDb3VudCA9PSAwKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2Fs\nTW9uaXRvclN0YXRlRXhjZXB0aW9uKCk7CiAgICAgICAgfQogICAgICAgIGlm\nIChUaHJlYWQuaW50ZXJydXB0ZWQoKSkgdGhyb3cgbmV3IEludGVycnVwdGVk\nRXhjZXB0aW9uKCk7CiAgICAgICAgbG9uZyBuYW5vcyA9IHVuaXQudG9OYW5v\ncyh0aW1lb3V0KTsKICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSBmYWxzZTsK\nICAgICAgICB0cnkgewogICAgICAgICAgICBzeW5jaHJvbml6ZWQgKHRoaXMp\nIHsKICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSBob2xkQ291bnQ7IGkg\nPiAwOyBpLS0pIGxvY2sudW5sb2NrKCk7CiAgICAgICAgICAgICAgICB0cnkg\newogICAgICAgICAgICAgICAgICAgIGlmIChuYW5vcyA+IDApIHsKICAgICAg\nICAgICAgICAgICAgICAgICAgbG9uZyBzdGFydCA9IFV0aWxzLm5hbm9UaW1l\nKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIFRpbWVVbml0Lk5BTk9TRUNP\nTkRTLnRpbWVkV2FpdCh0aGlzLCBuYW5vcyk7CiAgICAgICAgICAgICAgICAg\nICAgICAgIC8vIERLOiBkdWUgdG8gY29hcnNlLWdyYWluZWQobWlsbGlzKSBj\nbG9jaywgaXQgc2VlbXMKICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJl\nZmVyYWJsZSB0byBhY2tub3dsZWRnZSB0aW1lb3V0KHN1Y2Nlc3MgPT0gZmFs\nc2UpCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIGVxdWFs\naXR5IGhvbGRzKHRpbWluZyBpcyBleGFjdCkKICAgICAgICAgICAgICAgICAg\nICAgICAgc3VjY2VzcyA9IFV0aWxzLm5hbm9UaW1lKCkgLSBzdGFydCA8IG5h\nbm9zOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0g\nY2F0Y2ggKEludGVycnVwdGVkRXhjZXB0aW9uIGV4KSB7CiAgICAgICAgICAg\nICAgICAgICAgbm90aWZ5KCk7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cg\nZXg7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9\nIGZpbmFsbHkgewogICAgICAgICAgICBmb3IgKGludCBpID0gaG9sZENvdW50\nOyBpID4gMDsgaS0tKSBsb2NrLmxvY2soKTsKICAgICAgICB9CiAgICAgICAg\ncmV0dXJuIHN1Y2Nlc3M7CiAgICB9CgovLyAgICBwdWJsaWMgbG9uZyBhd2Fp\ndE5hbm9zKGxvbmcgdGltZW91dCkgdGhyb3dzIEludGVycnVwdGVkRXhjZXB0\naW9uIHsKLy8gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlv\nbkV4Y2VwdGlvbigpOwovLyAgICB9CgogICAgcHVibGljIGJvb2xlYW4gYXdh\naXRVbnRpbChEYXRlIGRlYWRsaW5lKSB0aHJvd3MgSW50ZXJydXB0ZWRFeGNl\ncHRpb24gewogICAgICAgIGlmIChkZWFkbGluZSA9PSBudWxsKSB0aHJvdyBu\nZXcgTnVsbFBvaW50ZXJFeGNlcHRpb24oKTsKICAgICAgICBpbnQgaG9sZENv\ndW50ID0gbG9jay5nZXRIb2xkQ291bnQoKTsKICAgICAgICBpZiAoaG9sZENv\ndW50ID09IDApIHsKICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxNb25p\ndG9yU3RhdGVFeGNlcHRpb24oKTsKICAgICAgICB9CiAgICAgICAgbG9uZyBh\nYnN0aW1lID0gZGVhZGxpbmUuZ2V0VGltZSgpOwogICAgICAgIGlmIChUaHJl\nYWQuaW50ZXJydXB0ZWQoKSkgdGhyb3cgbmV3IEludGVycnVwdGVkRXhjZXB0\naW9uKCk7CgogICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IGZhbHNlOwogICAg\nICAgIHRyeSB7CiAgICAgICAgICAgIHN5bmNocm9uaXplZCAodGhpcykgewog\nICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IGhvbGRDb3VudDsgaSA+IDA7\nIGktLSkgbG9jay51bmxvY2soKTsKICAgICAgICAgICAgICAgIHRyeSB7CiAg\nICAgICAgICAgICAgICAgICAgbG9uZyBzdGFydCA9IFN5c3RlbS5jdXJyZW50\nVGltZU1pbGxpcygpOwogICAgICAgICAgICAgICAgICAgIGxvbmcgbXNlY3Mg\nPSBhYnN0aW1lIC0gc3RhcnQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKG1z\nZWNzID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KG1zZWNz\nKTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gREs6IGR1ZSB0byBjb2Fy\nc2UtZ3JhaW5lZChtaWxsaXMpIGNsb2NrLCBpdCBzZWVtcwogICAgICAgICAg\nICAgICAgICAgICAgICAvLyBwcmVmZXJhYmxlIHRvIGFja25vd2xlZGdlIHRp\nbWVvdXQoc3VjY2VzcyA9PSBmYWxzZSkKICAgICAgICAgICAgICAgICAgICAg\nICAgLy8gd2hlbiB0aGUgZXF1YWxpdHkgaG9sZHModGltaW5nIGlzIGV4YWN0\nKQogICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzID0gU3lzdGVtLmN1\ncnJlbnRUaW1lTWlsbGlzKCkgLSBzdGFydCA8IG1zZWNzOwogICAgICAgICAg\nICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEludGVycnVw\ndGVkRXhjZXB0aW9uIGV4KSB7CiAgICAgICAgICAgICAgICAgICAgbm90aWZ5\nKCk7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXg7CiAgICAgICAgICAg\nICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9IGZpbmFsbHkgewogICAg\nICAgICAgICBmb3IgKGludCBpID0gaG9sZENvdW50OyBpID4gMDsgaS0tKSBs\nb2NrLmxvY2soKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHN1Y2Nlc3M7\nCiAgICB9CgogICAgcHVibGljIHN5bmNocm9uaXplZCB2b2lkIHNpZ25hbCgp\nIHsKICAgICAgICBpZiAoIWxvY2suaXNIZWxkQnlDdXJyZW50VGhyZWFkKCkp\nIHsKICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxNb25pdG9yU3RhdGVF\neGNlcHRpb24oKTsKICAgICAgICB9CiAgICAgICAgbm90aWZ5KCk7CiAgICB9\nCgogICAgcHVibGljIHN5bmNocm9uaXplZCB2b2lkIHNpZ25hbEFsbCgpIHsK\nICAgICAgICBpZiAoIWxvY2suaXNIZWxkQnlDdXJyZW50VGhyZWFkKCkpIHsK\nICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxNb25pdG9yU3RhdGVFeGNl\ncHRpb24oKTsKICAgICAgICB9CiAgICAgICAgbm90aWZ5QWxsKCk7CiAgICB9\nCgogICAgcHJvdGVjdGVkIEV4Y2x1c2l2ZUxvY2sgZ2V0TG9jaygpIHsKICAg\nICAgICByZXR1cm4gbG9jazsKICAgIH0KCiAgICBwcm90ZWN0ZWQgYm9vbGVh\nbiBoYXNXYWl0ZXJzKCkgewogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRl\nZE9wZXJhdGlvbkV4Y2VwdGlvbigiVXNlIEZBSVIgdmVyc2lvbiIpOwogICAg\nfQoKICAgIHByb3RlY3RlZCBpbnQgZ2V0V2FpdFF1ZXVlTGVuZ3RoKCkgewog\nICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlv\nbigiVXNlIEZBSVIgdmVyc2lvbiIpOwogICAgfQoKICAgIHByb3RlY3RlZCBD\nb2xsZWN0aW9uIGdldFdhaXRpbmdUaHJlYWRzKCkgewogICAgICAgIHRocm93\nIG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigiVXNlIEZBSVIg\ndmVyc2lvbiIpOwogICAgfQoKICAgIHN0YXRpYyBpbnRlcmZhY2UgRXhjbHVz\naXZlTG9jayBleHRlbmRzIExvY2sgewoKICAgICAgICBib29sZWFuIGlzSGVs\nZEJ5Q3VycmVudFRocmVhZCgpOwoKICAgICAgICBpbnQgZ2V0SG9sZENvdW50\nKCk7CiAgICB9Cn0K\n","encoding":"base64"}

