{"sha":"6e53ef0f7ec79e90892918030a2c7b492effaddc","node_id":"MDQ6QmxvYjIwNjM2NDo2ZTUzZWYwZjdlYzc5ZTkwODkyOTE4MDMwYTJjN2I0OTJlZmZhZGRj","size":5099,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/6e53ef0f7ec79e90892918030a2c7b492effaddc","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwovKgogKiBPcmlnaW5hbGx5IHdy\naXR0ZW4gYnkgRG91ZyBMZWEgYW5kIHJlbGVhc2VkIGludG8gdGhlIHB1Ymxp\nYyBkb21haW4uCiAqIFRoaXMgbWF5IGJlIHVzZWQgZm9yIGFueSBwdXJwb3Nl\ncyB3aGF0c29ldmVyIHdpdGhvdXQgYWNrbm93bGVkZ21lbnQuCiAqIFRoYW5r\ncyBmb3IgdGhlIGFzc2lzdGFuY2UgYW5kIHN1cHBvcnQgb2YgU3VuIE1pY3Jv\nc3lzdGVtcyBMYWJzLAogKiBhbmQgZXZlcnlvbmUgY29udHJpYnV0aW5nLCB0\nZXN0aW5nLCBhbmQgdXNpbmcgdGhpcyBjb2RlLgogKi8KcGFja2FnZSBvcmcu\nYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuY29uY3VycmVudDsKCmltcG9ydCBq\nYXZhLnV0aWwuQ29sbGVjdGlvbjsKaW1wb3J0IGphdmEudXRpbC5EYXRlOwoK\nY2xhc3MgRklGT0NvbmRWYXIgZXh0ZW5kcyBDb25kVmFyIGltcGxlbWVudHMg\nQ29uZGl0aW9uLCBqYXZhLmlvLlNlcmlhbGl6YWJsZSB7CgogICAgcHJpdmF0\nZSBzdGF0aWMgZmluYWwgV2FpdFF1ZXVlLlF1ZXVlZFN5bmMgc3luYyA9CiAg\nICAgICAgbmV3IFdhaXRRdWV1ZS5RdWV1ZWRTeW5jKCkgewogICAgICAgICAg\nICBwdWJsaWMgYm9vbGVhbiByZWNoZWNrKFdhaXRRdWV1ZS5XYWl0Tm9kZSBu\nb2RlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAg\nICAgIH0KCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIHRha2VPdmVyKFdhaXRR\ndWV1ZS5XYWl0Tm9kZSBub2RlKSB7CiAgICAgICAgICAgIH0KICAgICAgICB9\nOwoKICAgIC8vIHdhaXQgcXVldWU7IG9ubHkgYWNjZXNzZWQgd2hlbiBob2xk\naW5nIHRoZSBsb2NrCiAgICBwcml2YXRlIGZpbmFsIFdhaXRRdWV1ZSB3cSA9\nIG5ldyBGSUZPV2FpdFF1ZXVlKCk7CgogICAgLyoqCiAgICAgKiBDcmVhdGUg\nYSBuZXcgQ29uZFZhciB0aGF0IHJlbGllcyBvbiB0aGUgZ2l2ZW4gbXV0dWFs\nIGV4Y2x1c2lvbiBsb2NrLgogICAgICoKICAgICAqIEBwYXJhbSBsb2NrIEEg\nbm9uLXJlZW50cmFudCBtdXR1YWwgZXhjbHVzaW9uIGxvY2suCiAgICAgKi8K\nICAgIEZJRk9Db25kVmFyKEV4Y2x1c2l2ZUxvY2sgbG9jaykgewogICAgICAg\nIHN1cGVyKGxvY2spOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGF3YWl0VW5p\nbnRlcnJ1cHRpYmx5KCkgewogICAgICAgIGludCBob2xkQ291bnQgPSBsb2Nr\nLmdldEhvbGRDb3VudCgpOwogICAgICAgIGlmIChob2xkQ291bnQgPT0gMCkg\newogICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbE1vbml0b3JTdGF0ZUV4\nY2VwdGlvbigpOwogICAgICAgIH0KICAgICAgICBXYWl0UXVldWUuV2FpdE5v\nZGUgbiA9IG5ldyBXYWl0UXVldWUuV2FpdE5vZGUoKTsKICAgICAgICB3cS5p\nbnNlcnQobik7CiAgICAgICAgZm9yIChpbnQgaSA9IGhvbGRDb3VudDsgaSA+\nIDA7IGktLSkgbG9jay51bmxvY2soKTsKICAgICAgICB0cnkgewogICAgICAg\nICAgICBuLmRvV2FpdFVuaW50ZXJydXB0aWJseShzeW5jKTsKICAgICAgICB9\nIGZpbmFsbHkgewogICAgICAgICAgICBmb3IgKGludCBpID0gaG9sZENvdW50\nOyBpID4gMDsgaS0tKSBsb2NrLmxvY2soKTsKICAgICAgICB9CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgYXdhaXQoKSB0aHJvd3MgSW50ZXJydXB0ZWRFeGNl\ncHRpb24gewogICAgICAgIGludCBob2xkQ291bnQgPSBsb2NrLmdldEhvbGRD\nb3VudCgpOwogICAgICAgIGlmIChob2xkQ291bnQgPT0gMCkgewogICAgICAg\nICAgICB0aHJvdyBuZXcgSWxsZWdhbE1vbml0b3JTdGF0ZUV4Y2VwdGlvbigp\nOwogICAgICAgIH0KICAgICAgICBpZiAoVGhyZWFkLmludGVycnVwdGVkKCkp\nIHRocm93IG5ldyBJbnRlcnJ1cHRlZEV4Y2VwdGlvbigpOwogICAgICAgIFdh\naXRRdWV1ZS5XYWl0Tm9kZSBuID0gbmV3IFdhaXRRdWV1ZS5XYWl0Tm9kZSgp\nOwogICAgICAgIHdxLmluc2VydChuKTsKICAgICAgICBmb3IgKGludCBpID0g\naG9sZENvdW50OyBpID4gMDsgaS0tKSBsb2NrLnVubG9jaygpOwogICAgICAg\nIHRyeSB7CiAgICAgICAgICAgIG4uZG9XYWl0KHN5bmMpOwogICAgICAgIH0g\nZmluYWxseSB7CiAgICAgICAgICAgIGZvciAoaW50IGkgPSBob2xkQ291bnQ7\nIGkgPiAwOyBpLS0pIGxvY2subG9jaygpOwogICAgICAgIH0KICAgIH0KCiAg\nICBwdWJsaWMgYm9vbGVhbiBhd2FpdChsb25nIHRpbWVvdXQsIFRpbWVVbml0\nIHVuaXQpCiAgICAgICAgdGhyb3dzIEludGVycnVwdGVkRXhjZXB0aW9uIHsK\nICAgICAgICBpbnQgaG9sZENvdW50ID0gbG9jay5nZXRIb2xkQ291bnQoKTsK\nICAgICAgICBpZiAoaG9sZENvdW50ID09IDApIHsKICAgICAgICAgICAgdGhy\nb3cgbmV3IElsbGVnYWxNb25pdG9yU3RhdGVFeGNlcHRpb24oKTsKICAgICAg\nICB9CiAgICAgICAgaWYgKFRocmVhZC5pbnRlcnJ1cHRlZCgpKSB0aHJvdyBu\nZXcgSW50ZXJydXB0ZWRFeGNlcHRpb24oKTsKICAgICAgICBsb25nIG5hbm9z\nID0gdW5pdC50b05hbm9zKHRpbWVvdXQpOwogICAgICAgIFdhaXRRdWV1ZS5X\nYWl0Tm9kZSBuID0gbmV3IFdhaXRRdWV1ZS5XYWl0Tm9kZSgpOwogICAgICAg\nIHdxLmluc2VydChuKTsKICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSBmYWxz\nZTsKICAgICAgICBmb3IgKGludCBpID0gaG9sZENvdW50OyBpID4gMDsgaS0t\nKSBsb2NrLnVubG9jaygpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHN1\nY2Nlc3MgPSBuLmRvVGltZWRXYWl0KHN5bmMsIG5hbm9zKTsKICAgICAgICB9\nIGZpbmFsbHkgewogICAgICAgICAgICBmb3IgKGludCBpID0gaG9sZENvdW50\nOyBpID4gMDsgaS0tKSBsb2NrLmxvY2soKTsKICAgICAgICB9CiAgICAgICAg\ncmV0dXJuIHN1Y2Nlc3M7CiAgICB9CgovLyAgICBwdWJsaWMgbG9uZyBhd2Fp\ndE5hbm9zKGxvbmcgdGltZW91dCkgdGhyb3dzIEludGVycnVwdGVkRXhjZXB0\naW9uIHsKLy8gICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlv\nbkV4Y2VwdGlvbigpOwovLyAgICB9CgogICAgcHVibGljIGJvb2xlYW4gYXdh\naXRVbnRpbChEYXRlIGRlYWRsaW5lKSB0aHJvd3MgSW50ZXJydXB0ZWRFeGNl\ncHRpb24gewogICAgICAgIGlmIChkZWFkbGluZSA9PSBudWxsKSB0aHJvdyBu\nZXcgTnVsbFBvaW50ZXJFeGNlcHRpb24oKTsKICAgICAgICBsb25nIGFic3Rp\nbWUgPSBkZWFkbGluZS5nZXRUaW1lKCk7CiAgICAgICAgbG9uZyBzdGFydCA9\nIFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpOwogICAgICAgIGxvbmcgbXNl\nY3MgPSBhYnN0aW1lIC0gc3RhcnQ7CiAgICAgICAgcmV0dXJuIGF3YWl0KG1z\nZWNzLCBUaW1lVW5pdC5NSUxMSVNFQ09ORFMpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHNpZ25hbCgpIHsKICAgICAgICBpZiAoIWxvY2suaXNIZWxkQnlD\ndXJyZW50VGhyZWFkKCkpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVn\nYWxNb25pdG9yU3RhdGVFeGNlcHRpb24oKTsKICAgICAgICB9CiAgICAgICAg\nZm9yICg7IDspIHsKICAgICAgICAgICAgV2FpdFF1ZXVlLldhaXROb2RlIHcg\nPSB3cS5leHRyYWN0KCk7CiAgICAgICAgICAgIGlmICh3ID09IG51bGwpIHJl\ndHVybjsgLy8gbm8gb25lIHRvIHNpZ25hbAogICAgICAgICAgICBpZiAody5z\naWduYWwoc3luYykpIHJldHVybjsgLy8gbm90aWZ5IGlmIHN0aWxsIHdhaXRp\nbmcsIGVsc2Ugc2tpcAogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBzaWduYWxBbGwoKSB7CiAgICAgICAgaWYgKCFsb2NrLmlzSGVsZEJ5Q3Vy\ncmVudFRocmVhZCgpKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2Fs\nTW9uaXRvclN0YXRlRXhjZXB0aW9uKCk7CiAgICAgICAgfQogICAgICAgIGZv\nciAoOyA7KSB7CiAgICAgICAgICAgIFdhaXRRdWV1ZS5XYWl0Tm9kZSB3ID0g\nd3EuZXh0cmFjdCgpOwogICAgICAgICAgICBpZiAodyA9PSBudWxsKSByZXR1\ncm47IC8vIG5vIG1vcmUgdG8gc2lnbmFsCiAgICAgICAgICAgIHcuc2lnbmFs\nKHN5bmMpOwogICAgICAgIH0KICAgIH0KCiAgICBwcm90ZWN0ZWQgYm9vbGVh\nbiBoYXNXYWl0ZXJzKCkgewogICAgICAgIGlmICghbG9jay5pc0hlbGRCeUN1\ncnJlbnRUaHJlYWQoKSkgewogICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdh\nbE1vbml0b3JTdGF0ZUV4Y2VwdGlvbigpOwogICAgICAgIH0KICAgICAgICBy\nZXR1cm4gd3EuaGFzTm9kZXMoKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgaW50\nIGdldFdhaXRRdWV1ZUxlbmd0aCgpIHsKICAgICAgICBpZiAoIWxvY2suaXNI\nZWxkQnlDdXJyZW50VGhyZWFkKCkpIHsKICAgICAgICAgICAgdGhyb3cgbmV3\nIElsbGVnYWxNb25pdG9yU3RhdGVFeGNlcHRpb24oKTsKICAgICAgICB9CiAg\nICAgICAgcmV0dXJuIHdxLmdldExlbmd0aCgpOwogICAgfQoKICAgIHByb3Rl\nY3RlZCBDb2xsZWN0aW9uIGdldFdhaXRpbmdUaHJlYWRzKCkgewogICAgICAg\nIGlmICghbG9jay5pc0hlbGRCeUN1cnJlbnRUaHJlYWQoKSkgewogICAgICAg\nICAgICB0aHJvdyBuZXcgSWxsZWdhbE1vbml0b3JTdGF0ZUV4Y2VwdGlvbigp\nOwogICAgICAgIH0KICAgICAgICByZXR1cm4gd3EuZ2V0V2FpdGluZ1RocmVh\nZHMoKTsKICAgIH0KfQo=\n","encoding":"base64"}

