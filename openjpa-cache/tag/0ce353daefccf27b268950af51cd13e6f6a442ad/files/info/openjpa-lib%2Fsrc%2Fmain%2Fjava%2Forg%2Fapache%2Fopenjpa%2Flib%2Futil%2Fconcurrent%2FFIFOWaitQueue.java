{"sha":"80fea7aaad260c178ac56f5f6f9ef5a9658836ce","node_id":"MDQ6QmxvYjIwNjM2NDo4MGZlYTdhYWFkMjYwYzE3OGFjNTZmNWY2ZjllZjVhOTY1ODgzNmNl","size":2698,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/80fea7aaad260c178ac56f5f6f9ef5a9658836ce","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwovKgogKiBXcml0dGVuIGJ5IERv\ndWcgTGVhIHdpdGggYXNzaXN0YW5jZSBmcm9tIG1lbWJlcnMgb2YgSkNQIEpT\nUi0xNjYKICogRXhwZXJ0IEdyb3VwIGFuZCByZWxlYXNlZCB0byB0aGUgcHVi\nbGljIGRvbWFpbiwgYXMgZXhwbGFpbmVkIGF0CiAqIGh0dHA6Ly9jcmVhdGl2\nZWNvbW1vbnMub3JnL2xpY2Vuc2VzL3B1YmxpY2RvbWFpbgogKi8KcGFja2Fn\nZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuY29uY3VycmVudDsKCmlt\ncG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0OwppbXBvcnQgamF2YS51dGlsLkNv\nbGxlY3Rpb247CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKCi8qKgogKiBTaW1w\nbGUgbGlua2VkIGxpc3QgcXVldWUgdXNlZCBpbiBGSUZPU2VtYXBob3JlLgog\nKiBNZXRob2RzIGFyZSBub3Qgc3luY2hyb25pemVkOyB0aGV5IGRlcGVuZCBv\nbiBzeW5jaCBvZiBjYWxsZXJzLgogKiBNdXN0IGJlIHB1YmxpYywgc2luY2Ug\naXQgaXMgdXNlZCBieSBTZW1hcGhvcmUob3V0c2lkZSB0aGlzIHBhY2thZ2Up\nLgogKiBOT1RFOiB0aGlzIGNsYXNzIGlzIE5PVCBwcmVzZW50IGluIGphdmEu\ndXRpbC5jb25jdXJyZW50LgogKi8KY2xhc3MgRklGT1dhaXRRdWV1ZSBleHRl\nbmRzIFdhaXRRdWV1ZSBpbXBsZW1lbnRzIGphdmEuaW8uU2VyaWFsaXphYmxl\nIHsKCiAgICBwcm90ZWN0ZWQgdHJhbnNpZW50IFdhaXROb2RlIGhlYWRfID0g\nbnVsbDsKICAgIHByb3RlY3RlZCB0cmFuc2llbnQgV2FpdE5vZGUgdGFpbF8g\nPSBudWxsOwoKICAgIHB1YmxpYyBGSUZPV2FpdFF1ZXVlKCkgewogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIGluc2VydChXYWl0Tm9kZSB3KSB7CiAgICAgICAg\naWYgKHRhaWxfID09IG51bGwpCiAgICAgICAgICAgIGhlYWRfID0gdGFpbF8g\nPSB3OwogICAgICAgIGVsc2UgewogICAgICAgICAgICB0YWlsXy5uZXh0ID0g\ndzsKICAgICAgICAgICAgdGFpbF8gPSB3OwogICAgICAgIH0KICAgIH0KCiAg\nICBwdWJsaWMgV2FpdE5vZGUgZXh0cmFjdCgpIHsKICAgICAgICBpZiAoaGVh\nZF8gPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAg\nZWxzZSB7CiAgICAgICAgICAgIFdhaXROb2RlIHcgPSBoZWFkXzsKICAgICAg\nICAgICAgaGVhZF8gPSB3Lm5leHQ7CiAgICAgICAgICAgIGlmIChoZWFkXyA9\nPSBudWxsKQogICAgICAgICAgICAgICAgdGFpbF8gPSBudWxsOwogICAgICAg\nICAgICB3Lm5leHQgPSBudWxsOwogICAgICAgICAgICByZXR1cm4gdzsKICAg\nICAgICB9CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gaGFzTm9kZXMoKSB7\nCiAgICAgICAgcmV0dXJuIGhlYWRfICE9IG51bGw7CiAgICB9CgogICAgcHVi\nbGljIGludCBnZXRMZW5ndGgoKSB7CiAgICAgICAgaW50IGNvdW50ID0gMDsK\nICAgICAgICBXYWl0Tm9kZSBub2RlID0gaGVhZF87CiAgICAgICAgd2hpbGUg\nKG5vZGUgIT0gbnVsbCkgewogICAgICAgICAgICBpZiAobm9kZS53YWl0aW5n\nKSBjb3VudCsrOwogICAgICAgICAgICBub2RlID0gbm9kZS5uZXh0OwogICAg\nICAgIH0KICAgICAgICByZXR1cm4gY291bnQ7CiAgICB9CgogICAgcHVibGlj\nIENvbGxlY3Rpb24gZ2V0V2FpdGluZ1RocmVhZHMoKSB7CiAgICAgICAgTGlz\ndCBsaXN0ID0gbmV3IEFycmF5TGlzdCgpOwogICAgICAgIFdhaXROb2RlIG5v\nZGUgPSBoZWFkXzsKICAgICAgICB3aGlsZSAobm9kZSAhPSBudWxsKSB7CiAg\nICAgICAgICAgIGlmIChub2RlLndhaXRpbmcpIGxpc3QuYWRkKG5vZGUub3du\nZXIpOwogICAgICAgICAgICBub2RlID0gbm9kZS5uZXh0OwogICAgICAgIH0K\nICAgICAgICByZXR1cm4gbGlzdDsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVh\nbiBpc1dhaXRpbmcoVGhyZWFkIHRocmVhZCkgewogICAgICAgIGlmICh0aHJl\nYWQgPT0gbnVsbCkgdGhyb3cgbmV3IE51bGxQb2ludGVyRXhjZXB0aW9uKCk7\nCiAgICAgICAgZm9yIChXYWl0Tm9kZSBub2RlID0gaGVhZF87IG5vZGUgIT0g\nbnVsbDsgbm9kZSA9IG5vZGUubmV4dCkgewogICAgICAgICAgICBpZiAobm9k\nZS53YWl0aW5nICYmIG5vZGUub3duZXIgPT0gdGhyZWFkKSByZXR1cm4gdHJ1\nZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQp9Cg==\n","encoding":"base64"}

