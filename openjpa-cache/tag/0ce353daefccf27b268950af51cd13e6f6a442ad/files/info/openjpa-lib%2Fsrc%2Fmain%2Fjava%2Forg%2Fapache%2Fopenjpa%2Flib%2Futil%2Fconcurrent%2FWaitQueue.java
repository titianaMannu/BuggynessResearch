{"sha":"e350644ce6f112ad198c6fd2337a8c7f19dd269c","node_id":"MDQ6QmxvYjIwNjM2NDplMzUwNjQ0Y2U2ZjExMmFkMTk4YzZmZDIzMzdhOGM3ZjE5ZGQyNjlj","size":5181,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/e350644ce6f112ad198c6fd2337a8c7f19dd269c","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwovKgogKiBPcmlnaW5hbGx5IHdy\naXR0ZW4gYnkgRG91ZyBMZWEgYW5kIHJlbGVhc2VkIGludG8gdGhlIHB1Ymxp\nYyBkb21haW4uCiAqIFRoaXMgbWF5IGJlIHVzZWQgZm9yIGFueSBwdXJwb3Nl\ncyB3aGF0c29ldmVyIHdpdGhvdXQgYWNrbm93bGVkZ21lbnQuCiAqIFRoYW5r\ncyBmb3IgdGhlIGFzc2lzdGFuY2UgYW5kIHN1cHBvcnQgb2YgU3VuIE1pY3Jv\nc3lzdGVtcyBMYWJzLAogKiBhbmQgZXZlcnlvbmUgY29udHJpYnV0aW5nLCB0\nZXN0aW5nLCBhbmQgdXNpbmcgdGhpcyBjb2RlLgogKi8KcGFja2FnZSBvcmcu\nYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuY29uY3VycmVudDsKCmltcG9ydCBq\nYXZhLnV0aWwuQ29sbGVjdGlvbjsKCi8qKgogKiBCYXNlIGNsYXNzIGZvciBp\nbnRlcm5hbCBxdWV1ZSBjbGFzc2VzIGZvciBzZW1hcGhvcmVzLCBldGMuCiAq\nIFJlbGllcyBvbiBzdWJjbGFzc2VzIHRvIGFjdHVhbGx5IGltcGxlbWVudCBx\ndWV1ZSBtZWNoYW5pY3MuCiAqIE5PVEU6IHRoaXMgY2xhc3MgaXMgTk9UIHBy\nZXNlbnQgaW4gamF2YS51dGlsLmNvbmN1cnJlbnQuCiAqLwpwdWJsaWMgYWJz\ndHJhY3QgY2xhc3MgV2FpdFF1ZXVlIHsKCiAgICBwdWJsaWMgYWJzdHJhY3Qg\ndm9pZCBpbnNlcnQoV2FpdE5vZGUgdyk7IC8vIGFzc3VtZWQgbm90IHRvIGJs\nb2NrCgogICAgcHVibGljIGFic3RyYWN0IFdhaXROb2RlIGV4dHJhY3QoKTsg\nLy8gc2hvdWxkIHJldHVybiBudWxsIGlmIGVtcHR5CgogICAgcHVibGljIGFi\nc3RyYWN0IGJvb2xlYW4gaGFzTm9kZXMoKTsKCiAgICBwdWJsaWMgYWJzdHJh\nY3QgaW50IGdldExlbmd0aCgpOwoKICAgIHB1YmxpYyBhYnN0cmFjdCBDb2xs\nZWN0aW9uIGdldFdhaXRpbmdUaHJlYWRzKCk7CgogICAgcHVibGljIGFic3Ry\nYWN0IGJvb2xlYW4gaXNXYWl0aW5nKFRocmVhZCB0aHJlYWQpOwoKICAgIHB1\nYmxpYyBzdGF0aWMgaW50ZXJmYWNlIFF1ZXVlZFN5bmMgewoKICAgICAgICAv\nLyBpbnZva2VkIHdpdGggc3luYyBvbiB3YWl0IG5vZGUsIChhdG9taWNhbGx5\nKSBqdXN0IGJlZm9yZSBlbnF1ZXVpbmcKICAgICAgICBib29sZWFuIHJlY2hl\nY2soV2FpdE5vZGUgbm9kZSk7CgogICAgICAgIC8vIGludm9rZWQgd2l0aCBz\neW5jIG9uIHdhaXQgbm9kZSwgKGF0b21pY2FsbHkpIGp1c3QgYmVmb3JlIHNp\nZ25hbGxpbmcKICAgICAgICB2b2lkIHRha2VPdmVyKFdhaXROb2RlIG5vZGUp\nOwogICAgfQoKICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgV2FpdE5vZGUgewoK\nICAgICAgICBib29sZWFuIHdhaXRpbmcgPSB0cnVlOwogICAgICAgIFdhaXRO\nb2RlIG5leHQgPSBudWxsOwogICAgICAgIGZpbmFsIFRocmVhZCBvd25lcjsK\nCiAgICAgICAgcHVibGljIFdhaXROb2RlKCkgewogICAgICAgICAgICB0aGlz\nLm93bmVyID0gVGhyZWFkLmN1cnJlbnRUaHJlYWQoKTsKICAgICAgICB9Cgog\nICAgICAgIHB1YmxpYyBUaHJlYWQgZ2V0T3duZXIoKSB7CiAgICAgICAgICAg\nIHJldHVybiBvd25lcjsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBzeW5j\naHJvbml6ZWQgYm9vbGVhbiBzaWduYWwoUXVldWVkU3luYyBzeW5jKSB7CiAg\nICAgICAgICAgIGJvb2xlYW4gc2lnbmFsbGVkID0gd2FpdGluZzsKICAgICAg\nICAgICAgaWYgKHNpZ25hbGxlZCkgewogICAgICAgICAgICAgICAgd2FpdGlu\nZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgbm90aWZ5KCk7CiAgICAgICAg\nICAgICAgICBzeW5jLnRha2VPdmVyKHRoaXMpOwogICAgICAgICAgICB9CiAg\nICAgICAgICAgIHJldHVybiBzaWduYWxsZWQ7CiAgICAgICAgfQoKICAgICAg\nICBwdWJsaWMgc3luY2hyb25pemVkIGJvb2xlYW4gZG9UaW1lZFdhaXQoUXVl\ndWVkU3luYyBzeW5jLCBsb25nIG5hbm9zKQogICAgICAgICAgICB0aHJvd3Mg\nSW50ZXJydXB0ZWRFeGNlcHRpb24gewogICAgICAgICAgICBpZiAoc3luYy5y\nZWNoZWNrKHRoaXMpIHx8ICF3YWl0aW5nKQogICAgICAgICAgICAgICAgcmV0\ndXJuIHRydWU7CiAgICAgICAgICAgIGVsc2UgaWYgKG5hbm9zIDw9IDApIHsK\nICAgICAgICAgICAgICAgIHdhaXRpbmcgPSBmYWxzZTsKICAgICAgICAgICAg\nICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAg\nICAgICAgICAgIGxvbmcgZGVhZGxpbmUgPSBVdGlscy5uYW5vVGltZSgpICsg\nbmFub3M7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAg\nICAgIGZvciAoOyA7KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFRpbWVV\nbml0Lk5BTk9TRUNPTkRTLnRpbWVkV2FpdCh0aGlzLCBuYW5vcyk7CiAgICAg\nICAgICAgICAgICAgICAgICAgIGlmICghd2FpdGluZykgLy8gZGVmaW5pdGVs\neSBzaWduYWxsZWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVy\nbiB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIG5hbm9zID0gZGVhZGxpbmUgLSBVdGls\ncy5uYW5vVGltZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYg\nKG5hbm9zIDw9IDApIHsgLy8gdGltZWQgb3V0CiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgd2FpdGluZyA9IGZhbHNlOwogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQog\nICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gY2F0Y2gg\nKEludGVycnVwdGVkRXhjZXB0aW9uIGV4KSB7CiAgICAgICAgICAgICAgICAg\nICAgaWYgKHdhaXRpbmcpIHsgLy8gbm8gbm90aWZpY2F0aW9uCiAgICAgICAg\nICAgICAgICAgICAgICAgIHdhaXRpbmcgPSBmYWxzZTsgLy8gaW52YWxpZGF0\nZSBmb3IgdGhlIHNpZ25hbGxlcgogICAgICAgICAgICAgICAgICAgICAgICB0\naHJvdyBleDsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyB0aHJl\nYWQgd2FzIGludGVycnVwdGVkIGFmdGVyIGl0IHdhcyBub3RpZmllZAogICAg\nICAgICAgICAgICAgICAgICAgICBUaHJlYWQuY3VycmVudFRocmVhZCgpLmlu\ndGVycnVwdCgpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1\nZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAg\nICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHB1YmxpYyBzeW5jaHJv\nbml6ZWQgdm9pZCBkb1dhaXQoUXVldWVkU3luYyBzeW5jKQogICAgICAgICAg\nICB0aHJvd3MgSW50ZXJydXB0ZWRFeGNlcHRpb24gewogICAgICAgICAgICBp\nZiAoIXN5bmMucmVjaGVjayh0aGlzKSkgewogICAgICAgICAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAod2FpdGluZykgd2FpdCgp\nOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoSW50ZXJydXB0ZWRFeGNlcHRp\nb24gZXgpIHsKICAgICAgICAgICAgICAgICAgICBpZiAod2FpdGluZykgeyAv\nLyBubyBub3RpZmljYXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgd2Fp\ndGluZyA9IGZhbHNlOyAvLyBpbnZhbGlkYXRlIGZvciB0aGUgc2lnbmFsbGVy\nCiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGV4OwogICAgICAgICAg\nICAgICAgICAgIH0gZWxzZSB7IC8vIHRocmVhZCB3YXMgaW50ZXJydXB0ZWQg\nYWZ0ZXIgaXQgd2FzIG5vdGlmaWVkCiAgICAgICAgICAgICAgICAgICAgICAg\nIFRocmVhZC5jdXJyZW50VGhyZWFkKCkuaW50ZXJydXB0KCk7CiAgICAgICAg\nICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9\nCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9Cgog\nICAgICAgIHB1YmxpYyBzeW5jaHJvbml6ZWQgdm9pZCBkb1dhaXRVbmludGVy\ncnVwdGlibHkoUXVldWVkU3luYyBzeW5jKSB7CiAgICAgICAgICAgIGlmICgh\nc3luYy5yZWNoZWNrKHRoaXMpKSB7CiAgICAgICAgICAgICAgICBib29sZWFu\nIHdhc0ludGVycnVwdGVkID0gVGhyZWFkLmludGVycnVwdGVkKCk7CiAgICAg\nICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHdoaWxlICh3\nYWl0aW5nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAg\nICAgICAgICAgIH0gY2F0Y2ggKEludGVycnVwdGVkRXhjZXB0aW9uIGV4KSB7\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXNJbnRlcnJ1cHRlZCA9\nIHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBubyBuZWVk\nIHRvIG5vdGlmeTsgaWYgd2Ugd2VyZSBzaWduYWxsZWQsIHdlCiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAvLyBtdXN0IGJlIG5vdCB3YWl0aW5nLCBh\nbmQgd2UnbGwgYWN0IGxpa2Ugc2lnbmFsbGVkCiAgICAgICAgICAgICAgICAg\nICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAg\nICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgIGlmICh3YXNJbnRl\ncnJ1cHRlZCkgVGhyZWFkLmN1cnJlbnRUaHJlYWQoKS5pbnRlcnJ1cHQoKTsK\nICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAg\nIH0KfQoK\n","encoding":"base64"}

