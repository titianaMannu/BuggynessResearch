{"sha":"9aad4e94fc4c16dac17ba2b569b9de8aa28cb2de","node_id":"MDQ6QmxvYjIwNjM2NDo5YWFkNGU5NGZjNGMxNmRhYzE3YmEyYjU2OWI5ZGU4YWEyOGNiMmRl","size":4483,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/9aad4e94fc4c16dac17ba2b569b9de8aa28cb2de","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIueG1sOwoKaW1wb3J0IGphdmF4LnhtbC5wYXJzZXJzLkRv\nY3VtZW50QnVpbGRlcjsKaW1wb3J0IGphdmF4LnhtbC5wYXJzZXJzLkRvY3Vt\nZW50QnVpbGRlckZhY3Rvcnk7CmltcG9ydCBqYXZheC54bWwucGFyc2Vycy5Q\nYXJzZXJDb25maWd1cmF0aW9uRXhjZXB0aW9uOwppbXBvcnQgamF2YXgueG1s\nLnBhcnNlcnMuU0FYUGFyc2VyOwppbXBvcnQgamF2YXgueG1sLnBhcnNlcnMu\nU0FYUGFyc2VyRmFjdG9yeTsKCmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMu\nbGFuZy5leGNlcHRpb24uTmVzdGFibGVSdW50aW1lRXhjZXB0aW9uOwppbXBv\ncnQgb3JnLnczYy5kb20uRG9jdW1lbnQ7CmltcG9ydCBvcmcueG1sLnNheC5F\ncnJvckhhbmRsZXI7CmltcG9ydCBvcmcueG1sLnNheC5TQVhFeGNlcHRpb247\nCgovKioKICogVGhlIFhNTEZhY3RvcnkgcHJvZHVjZXMgdmFsaWRhdGluZyBh\nbmQgbm9uLXZhbGlkYXRpbmcgRE9NIGxldmVsIDIKICogYW5kIFNBWCBsZXZl\nbCAyIHBhcnNlcnMgYW5kIFhTTCB0cmFuc2Zvcm1lcnMgdGhyb3VnaCBKQVhQ\nLiBJdCB1c2VzCiAqIGNhY2hpbmcgdG8gYXZvaWQgcmVwZWF0ZWRseSBwYXlp\nbmcgdGhlIHJlbGF0aXZlbHkgZXhwZW5zaXZlIHJ1bnRpbWUgY29zdHMKICog\nYXNzb2NpYXRlZCB3aXRoIHJlc29sdmluZyB0aGUgY29ycmVjdCBYTUwgaW1w\nbGVtZW50YXRpb24gdGhyb3VnaCB0aGUKICogSkFYUCBjb25maWd1cmF0aW9u\nIG1lY2hhbmlzbXMuCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqIEBub2ph\ndmFkb2MKICovCnB1YmxpYyBjbGFzcyBYTUxGYWN0b3J5IHsKCiAgICAvLyBj\nYWNoZSBwYXJzZXJzIGFuZCB0cmFuc2Zvcm1lcnMgaW4gYWxsIHBvc3NpYmxl\nIGNvbmZpZ3VyYXRpb25zCiAgICBwcml2YXRlIHN0YXRpYyBTQVhQYXJzZXJG\nYWN0b3J5W10gX3NheEZhY3RvcmllcyA9IG51bGw7CiAgICBwcml2YXRlIHN0\nYXRpYyBEb2N1bWVudEJ1aWxkZXJGYWN0b3J5W10gX2RvbUZhY3RvcmllcyA9\nIG51bGw7CiAgICBwcml2YXRlIHN0YXRpYyBFcnJvckhhbmRsZXIgX3ZhbGlk\nYXRpbmc7CgogICAgc3RhdGljIHsKICAgICAgICBfc2F4RmFjdG9yaWVzID0g\nbmV3IFNBWFBhcnNlckZhY3RvcnlbNF07CiAgICAgICAgX2RvbUZhY3Rvcmll\ncyA9IG5ldyBEb2N1bWVudEJ1aWxkZXJGYWN0b3J5WzRdOwoKICAgICAgICBT\nQVhQYXJzZXJGYWN0b3J5IHNheEZhY3Rvcnk7CiAgICAgICAgRG9jdW1lbnRC\ndWlsZGVyRmFjdG9yeSBkb21GYWN0b3J5OwogICAgICAgIGludCBhcnJJZHg7\nCiAgICAgICAgZm9yIChpbnQgdmFsaWRhdGluZyA9IDA7IHZhbGlkYXRpbmcg\nPCAyOyB2YWxpZGF0aW5nKyspIHsKICAgICAgICAgICAgZm9yIChpbnQgbmFt\nZXNwYWNlID0gMDsgbmFtZXNwYWNlIDwgMjsgbmFtZXNwYWNlKyspIHsKICAg\nICAgICAgICAgICAgIGFycklkeCA9IGZhY3RvcnlJbmRleCh2YWxpZGF0aW5n\nID09IDEsIG5hbWVzcGFjZSA9PSAxKTsKCiAgICAgICAgICAgICAgICBzYXhG\nYWN0b3J5ID0gU0FYUGFyc2VyRmFjdG9yeS5uZXdJbnN0YW5jZSgpOwogICAg\nICAgICAgICAgICAgc2F4RmFjdG9yeS5zZXRWYWxpZGF0aW5nKHZhbGlkYXRp\nbmcgPT0gMSk7CiAgICAgICAgICAgICAgICBzYXhGYWN0b3J5LnNldE5hbWVz\ncGFjZUF3YXJlKG5hbWVzcGFjZSA9PSAxKTsKICAgICAgICAgICAgICAgIF9z\nYXhGYWN0b3JpZXNbYXJySWR4XSA9IHNheEZhY3Rvcnk7CgogICAgICAgICAg\nICAgICAgZG9tRmFjdG9yeSA9IERvY3VtZW50QnVpbGRlckZhY3RvcnkubmV3\nSW5zdGFuY2UoKTsKICAgICAgICAgICAgICAgIGRvbUZhY3Rvcnkuc2V0VmFs\naWRhdGluZyh2YWxpZGF0aW5nID09IDEpOwogICAgICAgICAgICAgICAgZG9t\nRmFjdG9yeS5zZXROYW1lc3BhY2VBd2FyZShuYW1lc3BhY2UgPT0gMSk7CiAg\nICAgICAgICAgICAgICBfZG9tRmFjdG9yaWVzW2FycklkeF0gPSBkb21GYWN0\nb3J5OwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIF92YWxpZGF0\naW5nID0gbmV3IFZhbGlkYXRpbmdFcnJvckhhbmRsZXIoKTsKICAgIH0KCiAg\nICAvKioKICAgICAqIFJldHVybiBhIFNBWFBhcnNlciB3aXRoIHRoZSBzcGVj\naWZpZWQgY29uZmlndXJhdGlvbi4KICAgICAqLwogICAgcHVibGljIHN0YXRp\nYyBTQVhQYXJzZXIgZ2V0U0FYUGFyc2VyKGJvb2xlYW4gdmFsaWRhdGluZywK\nICAgICAgICBib29sZWFuIG5hbWVzcGFjZUF3YXJlKSB7CiAgICAgICAgU0FY\nUGFyc2VyIHNwOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHNwID0gX3Nh\neEZhY3Rvcmllc1tmYWN0b3J5SW5kZXgodmFsaWRhdGluZywgbmFtZXNwYWNl\nQXdhcmUpXS4KICAgICAgICAgICAgICAgIG5ld1NBWFBhcnNlcigpOwogICAg\nICAgIH0gY2F0Y2ggKFBhcnNlckNvbmZpZ3VyYXRpb25FeGNlcHRpb24gcGNl\nKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBOZXN0YWJsZVJ1bnRpbWVFeGNl\ncHRpb24ocGNlKTsKICAgICAgICB9IGNhdGNoIChTQVhFeGNlcHRpb24gc2Up\nIHsKICAgICAgICAgICAgdGhyb3cgbmV3IE5lc3RhYmxlUnVudGltZUV4Y2Vw\ndGlvbihzZSk7CiAgICAgICAgfQoKICAgICAgICBpZiAodmFsaWRhdGluZykg\newogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgc3AuZ2V0WE1M\nUmVhZGVyKCkuc2V0RXJyb3JIYW5kbGVyKF92YWxpZGF0aW5nKTsKICAgICAg\nICAgICAgfSBjYXRjaCAoU0FYRXhjZXB0aW9uIHNlKSB7CiAgICAgICAgICAg\nICAgICB0aHJvdyBuZXcgTmVzdGFibGVSdW50aW1lRXhjZXB0aW9uKHNlKTsK\nICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHNwOwog\nICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIGEgRG9jdW1lbnRCdWlsZGVy\nIHdpdGggdGhlIHNwZWNpZmllZCBjb25maWd1cmF0aW9uLgogICAgICovCiAg\nICBwdWJsaWMgc3RhdGljIERvY3VtZW50QnVpbGRlciBnZXRET01QYXJzZXIo\nYm9vbGVhbiB2YWxpZGF0aW5nLAogICAgICAgIGJvb2xlYW4gbmFtZXNwYWNl\nQXdhcmUpIHsKICAgICAgICBEb2N1bWVudEJ1aWxkZXIgZGI7CiAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgZGIgPSBfZG9tRmFjdG9yaWVzW2ZhY3RvcnlJ\nbmRleCh2YWxpZGF0aW5nLCBuYW1lc3BhY2VBd2FyZSldLgogICAgICAgICAg\nICAgICAgbmV3RG9jdW1lbnRCdWlsZGVyKCk7CiAgICAgICAgfSBjYXRjaCAo\nUGFyc2VyQ29uZmlndXJhdGlvbkV4Y2VwdGlvbiBwY2UpIHsKICAgICAgICAg\nICAgdGhyb3cgbmV3IE5lc3RhYmxlUnVudGltZUV4Y2VwdGlvbihwY2UpOwog\nICAgICAgIH0KCiAgICAgICAgaWYgKHZhbGlkYXRpbmcpCiAgICAgICAgICAg\nIGRiLnNldEVycm9ySGFuZGxlcihfdmFsaWRhdGluZyk7CiAgICAgICAgcmV0\ndXJuIGRiOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIGEgbmV3IERP\nTSBEb2N1bWVudC4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBEb2N1bWVu\ndCBnZXREb2N1bWVudCgpIHsKICAgICAgICByZXR1cm4gZ2V0RE9NUGFyc2Vy\nKGZhbHNlLCBmYWxzZSkubmV3RG9jdW1lbnQoKTsKICAgIH0KCiAgICAvKioK\nICAgICAqIFJldHVybiB0aGUgYXJyYXkgaW5kZXggb2YgdGhlIGZhY3Rvcnkg\nd2l0aCB0aGUgZ2l2ZW4gcHJvcGVydGllcy4KICAgICAqLwogICAgcHJpdmF0\nZSBzdGF0aWMgaW50IGZhY3RvcnlJbmRleChib29sZWFuIHZhbGlkYXRpbmcs\nCiAgICAgICAgYm9vbGVhbiBuYW1lc3BhY2VBd2FyZSkgewogICAgICAgIGlu\ndCBhcnJheUluZGV4ID0gMDsKICAgICAgICBpZiAodmFsaWRhdGluZykKICAg\nICAgICAgICAgYXJyYXlJbmRleCArPSAyOwogICAgICAgIGlmIChuYW1lc3Bh\nY2VBd2FyZSkKICAgICAgICAgICAgYXJyYXlJbmRleCArPSAxOwogICAgICAg\nIHJldHVybiBhcnJheUluZGV4OwogICAgfQp9Cg==\n","encoding":"base64"}

