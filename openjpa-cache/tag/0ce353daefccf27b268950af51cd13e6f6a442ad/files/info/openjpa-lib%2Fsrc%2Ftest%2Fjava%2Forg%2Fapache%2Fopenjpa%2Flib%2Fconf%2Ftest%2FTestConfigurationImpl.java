{"sha":"5c033527eb563ad9adbf800c22806e679585b733","node_id":"MDQ6QmxvYjIwNjM2NDo1YzAzMzUyN2ViNTYzYWQ5YWRiZjgwMGMyMjgwNmU2Nzk1ODViNzMz","size":10751,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/5c033527eb563ad9adbf800c22806e679585b733","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKiAgTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNl\nLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90\nIHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUg\nTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNl\nbnNlIGF0CiAqICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElD\nRU5TRS0yLjAKICogIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxh\ndyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJp\nYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4g\nIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJ\nVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQu\nCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdl\nIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5k\nZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUub3Blbmpw\nYS5saWIuY29uZi50ZXN0OwoKaW1wb3J0IGphdmEuYmVhbnMuUHJvcGVydHlE\nZXNjcmlwdG9yOwppbXBvcnQgamF2YS5sYW5nLnJlZmxlY3QuTWV0aG9kOwpp\nbXBvcnQgamF2YS51dGlsLk1hcDsKaW1wb3J0IGphdmEudXRpbC5NaXNzaW5n\nUmVzb3VyY2VFeGNlcHRpb247CmltcG9ydCBqYXZhLnV0aWwuUHJvcGVydGll\nczsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmNvbmYuKjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudGVzdC5BYnN0cmFjdFRlc3RD\nYXNlOwoKLyoqCiAqIFRlc3RzIHRoZSB7QGxpbmsgQ29uZmlndXJhdGlvbklt\ncGx9IHR5cGUuIFRoaXMgbmVlZHMgdG8gYmUgcGxhY2VkCiAqIGluIGEgc3Vi\nLXBhY2thZ2Ugc28gdGhhdCBpdCBjYW4gaGF2ZSBpdHMgb3duIGxvY2FsaXpl\nci5wcm9wZXJ0aWVzCiAqIHByb3BlcnRpZXMsIHdoaWNoIGFyZSByZXF1aXJl\nZCBmb3IgdGhlIGJlYW4gZGVzY3JpcHRvcnMgdXNlZCBieSB0aGUKICogY29u\nZmlndXJhdGlvbiBmcmFtZXdvcmsge0BsaW5rIFZhbHVlfS4KICogCiAqIFRo\naXMgdGVzdCBhc3N1bWVzIGEgPGNvZGU+InRlc3QucHJvcGVydGllcyI8L2Nv\nZGU+IGZpbGUgYXZhaWxhYmxlIGluCiAqIGNsYXNzcGF0aCBhbmQgYWxzbyBz\neXN0ZW0gcHJvcGVydHkgPGNvZGU+Im9wZW5qcGF0ZXN0LnByb3BlcnRpZXMi\nPC9jb2RlPgogKiBpcyBzZXQgdG8gPGNvZGU+InRlc3QucHJvcGVydGllcyI8\nL2NvZGU+LgogKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKiBAYXV0aG9yIFBp\nbmFraSBQb2RkYXIKICovCnB1YmxpYyBjbGFzcyBUZXN0Q29uZmlndXJhdGlv\nbkltcGwgZXh0ZW5kcyBBYnN0cmFjdFRlc3RDYXNlIHsKCiAgICBwcml2YXRl\nIENvbmZpZ3VyYXRpb25UZXN0IF9jb25mID0gbmV3IENvbmZpZ3VyYXRpb25U\nZXN0KCk7CgogICAgcHVibGljIFRlc3RDb25maWd1cmF0aW9uSW1wbChTdHJp\nbmcgdGVzdCkgewogICAgICAgIHN1cGVyKHRlc3QpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHNldFVwKCkgewogICAgICAgIFN5c3RlbS5zZXRQcm9wZXJ0\neSgib3BlbmpwYXRlc3QucHJvcGVydGllcyIsICJ0ZXN0LnByb3BlcnRpZXMi\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZWFyRG93bigpIHRocm93cyBF\neGNlcHRpb24gewogICAgICAgIFN5c3RlbS5zZXRQcm9wZXJ0eSgib3Blbmpw\nYXRlc3QucHJvcGVydGllcyIsICIiKTsKICAgIAlzdXBlci50ZWFyRG93bigp\nOwogICAgfQoKICAgIC8qKgogICAgICogVGVzdCB0aGF0IGdsb2JhbCBwcm9w\nZXJ0aWVzIGFyZSBmb3VuZCBhbmQgbG9hZGVkLgogICAgICovCiAgICBwdWJs\naWMgdm9pZCB0ZXN0R2xvYmFscygpIHsKICAgICAgICBTeXN0ZW0uc2V0UHJv\ncGVydHkoIm9wZW5qcGEuc3lzS2V5IiwgInN5c3ZhbHVlIik7CiAgICAgICAg\nYXNzZXJ0TnVsbChfY29uZi5nZXRUZXN0S2V5KCkpOwogICAgICAgIGFzc2Vy\ndE51bGwoX2NvbmYuZ2V0U3lzS2V5KCkpOwogICAgICAgIGFzc2VydE51bGwo\nX2NvbmYuZ2V0UGx1Z2luS2V5KCkpOwogICAgICAgIGFzc2VydE51bGwoX2Nv\nbmYuZ2V0T2JqZWN0S2V5KCkpOwogICAgICAgIGFzc2VydFRydWUoX2NvbmYu\nbG9hZEdsb2JhbHMoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJ0ZXN0dmFs\ndWUiLCBfY29uZi5nZXRUZXN0S2V5KCkpOwogICAgICAgIGFzc2VydEVxdWFs\ncygic3lzdmFsdWUiLCBfY29uZi5nZXRTeXNLZXkoKSk7CiAgICAgICAgYXNz\nZXJ0TnVsbChfY29uZi5nZXRQbHVnaW5LZXkoKSk7CiAgICAgICAgYXNzZXJ0\nTnVsbChfY29uZi5nZXRPYmplY3RLZXkoKSk7CgogICAgICAgIC8vIG92ZXJy\naWRlIHRoZSBwcm9wZXJ0aWVzIGxvY2F0aW9uIHRvIGEgbm9uLWV4aXN0YW50\nIHZhbHVlCiAgICAgICAgX2NvbmYuc2V0VGVzdEtleShudWxsKTsKICAgICAg\nICBfY29uZi5zZXRTeXNLZXkobnVsbCk7CiAgICAgICAgU3lzdGVtLnNldFBy\nb3BlcnR5KCJvcGVuanBhdGVzdC5wcm9wZXJ0aWVzIiwgImZvby5wcm9wZXJ0\naWVzIik7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgh\nX2NvbmYubG9hZEdsb2JhbHMoKSk7CiAgICAgICAgICAgIGZhaWwoIlNob3Vs\nZCBoYXZlIHRocm93biBleGNlcHRpb24gZm9yIG1pc3NpbmcgcmVzb3VyY2Uu\nIik7CiAgICAgICAgfSBjYXRjaCAoTWlzc2luZ1Jlc291cmNlRXhjZXB0aW9u\nIG1yZSkgewogICAgICAgIH0KCiAgICAgICAgLy8gc2V0IGJhY2sgZm9yIHJl\nbWFpbmRlciBvZiB0ZXN0cwogICAgICAgIFN5c3RlbS5zZXRQcm9wZXJ0eSgi\nb3BlbmpwYXRlc3QucHJvcGVydGllcyIsICJ0ZXN0LnByb3BlcnRpZXMiKTsK\nICAgICAgICBTeXN0ZW0uc2V0UHJvcGVydHkoIm9wZW5qcGEucGx1Z2luS2V5\nIiwgImphdmEubGFuZy5PYmplY3QiKTsKICAgICAgICBhc3NlcnRUcnVlKF9j\nb25mLmxvYWRHbG9iYWxzKCkpOwogICAgICAgIGFzc2VydEVxdWFscygidGVz\ndHZhbHVlIiwgX2NvbmYuZ2V0VGVzdEtleSgpKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoInN5c3ZhbHVlIiwgX2NvbmYuZ2V0U3lzS2V5KCkpOwogICAgICAg\nIGFzc2VydEVxdWFscygiamF2YS5sYW5nLk9iamVjdCIsIF9jb25mLmdldFBs\ndWdpbktleSgpKTsKICAgICAgICBhc3NlcnROb3ROdWxsKF9jb25mLmdldFBs\ndWdpbktleUluc3RhbmNlKCkpOwogICAgICAgIGFzc2VydE51bGwoX2NvbmYu\nZ2V0T2JqZWN0S2V5KCkpOwogICAgfQoKICAgIC8qKgogICAgICogVGVzdCB0\naGF0IHRoZSBjb25maWd1cmF0aW9uIGlzIHNlcmlhbGl6ZWQgdG8gcHJvcGVy\ndGllcyBjb3JyZWN0bHkuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RU\nb1Byb3BlcnRpZXMoKSB7CiAgICAgICAgYXNzZXJ0VHJ1ZShfY29uZi5sb2Fk\nR2xvYmFscygpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoInRlc3R2YWx1ZSIs\nIF9jb25mLmdldFRlc3RLZXkoKSk7CiAgICAgICAgTWFwIHByb3BzID0gX2Nv\nbmYudG9Qcm9wZXJ0aWVzKGZhbHNlKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nInRlc3R2YWx1ZSIsIHByb3BzLmdldCgib3BlbmpwYS50ZXN0S2V5IikpOwog\nICAgICAgIGFzc2VydEZhbHNlKHByb3BzLmNvbnRhaW5zS2V5KCJvcGVuanBh\nLm9iamVjdEtleSIpKTsKICAgICAgICBfY29uZi5zZXRUZXN0S2V5KCJmb28i\nKTsKICAgICAgICBfY29uZi5zZXRQbHVnaW5LZXkobmV3IE9iamVjdCgpKTsK\nICAgICAgICBfY29uZi5zZXRPYmplY3RLZXkobmV3IE9iamVjdCgpKTsKICAg\nICAgICBwcm9wcyA9IF9jb25mLnRvUHJvcGVydGllcyhmYWxzZSk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKCJmb28iLCBwcm9wcy5nZXQoIm9wZW5qcGEudGVz\ndEtleSIpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoImphdmEubGFuZy5PYmpl\nY3QiLCBwcm9wcy5nZXQoIm9wZW5qcGEucGx1Z2luS2V5IikpOwogICAgICAg\nIGFzc2VydEZhbHNlKHByb3BzLmNvbnRhaW5zS2V5KCJvcGVuanBhLm9iamVj\ndEtleSIpKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRlc3RzIHByb3BlcnRp\nZXMgY2FjaGluZy4KICAgICAqLwogICAgcHVibGljIHZvaWQgdGVzdFByb3Bl\ncnRpZXNDYWNoaW5nKCkgewogICAgICAgIF9jb25mLnNldFRlc3RLZXkoInZh\nbCIpOwogICAgICAgIF9jb25mLnNldFBsdWdpbktleSgiamF2YS5sYW5nLk9i\namVjdCIpOwogICAgICAgIE1hcCBwcm9wczEgPSBfY29uZi50b1Byb3BlcnRp\nZXMoZmFsc2UpOwogICAgICAgIE1hcCBwcm9wczIgPSBfY29uZi50b1Byb3Bl\ncnRpZXMoZmFsc2UpOwogICAgICAgIF9jb25mLnNldE9iamVjdEtleShuZXcg\nT2JqZWN0KCkpOwogICAgICAgIGFzc2VydE5vdE51bGwoX2NvbmYuZ2V0UGx1\nZ2luS2V5SW5zdGFuY2UoKSk7IC8vIGluc3RhbnRpYXRlCiAgICAgICAgTWFw\nIHByb3BzMyA9IF9jb25mLnRvUHJvcGVydGllcyhmYWxzZSk7CiAgICAgICAg\nX2NvbmYuc2V0VGVzdEtleSgiY2hhbmdlZCIpOwogICAgICAgIE1hcCBwcm9w\nczQgPSBfY29uZi50b1Byb3BlcnRpZXMoZmFsc2UpOwogICAgICAgIF9jb25m\nLnNldFBsdWdpbktleShuZXcgSW50ZWdlcigxKSk7CiAgICAgICAgTWFwIHBy\nb3BzNSA9IF9jb25mLnRvUHJvcGVydGllcyhmYWxzZSk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKHByb3BzMSwgcHJvcHMyKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMocHJvcHMxLCBwcm9wczMpOwogICAgICAgIGFzc2VydE5vdEVxdWFscyhw\ncm9wczEsIHByb3BzNCk7CiAgICAgICAgYXNzZXJ0Tm90RXF1YWxzKHByb3Bz\nNCwgcHJvcHM1KTsKICAgIH0KCiAgICAvKioKICAgICAqIFRlc3QgdGhlIGVx\ndWFscyBtZXRob2QuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RFcXVh\nbHMoKSB7CiAgICAgICAgQ29uZmlndXJhdGlvblRlc3QgY29uZiA9IG5ldyBD\nb25maWd1cmF0aW9uVGVzdCgpOwogICAgICAgIGNvbmYuc2V0VGVzdEtleShf\nY29uZi5nZXRUZXN0S2V5KCkpOwogICAgICAgIGNvbmYuc2V0U3lzS2V5KF9j\nb25mLmdldFN5c0tleSgpKTsKICAgICAgICBjb25mLnNldFBsdWdpbktleShf\nY29uZi5nZXRQbHVnaW5LZXkoKSk7CiAgICAgICAgY29uZi5zZXRPYmplY3RL\nZXkoX2NvbmYuZ2V0T2JqZWN0S2V5KCkpOwogICAgICAgIGFzc2VydEVxdWFs\ncyhfY29uZiwgY29uZik7CgogICAgICAgIGNvbmYuc2V0VGVzdEtleSgibmV3\ndmFsIik7CiAgICAgICAgYXNzZXJ0VHJ1ZSghX2NvbmYuZXF1YWxzKGNvbmYp\nKTsKICAgICAgICBjb25mLnNldFRlc3RLZXkoX2NvbmYuZ2V0VGVzdEtleSgp\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoX2NvbmYsIGNvbmYpOwoKICAgICAg\nICBjb25mLnNldE9iamVjdEtleShuZXcgT2JqZWN0KCkpOwogICAgICAgIGFz\nc2VydEVxdWFscyhfY29uZiwgY29uZik7CgogICAgICAgIGNvbmYuc2V0UGx1\nZ2luS2V5KG5ldyBTdHJpbmdCdWZmZXIoKSk7CiAgICAgICAgYXNzZXJ0VHJ1\nZSghX2NvbmYuZXF1YWxzKGNvbmYpKTsKICAgIH0KCiAgICAvKioKICAgICAq\nIFRlc3QgdXNpbmcgYmVhbiBpbnRyb3NwZWN0aW9uLgogICAgICovCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0QmVhbkFjY2Vzc29ycygpIHRocm93cyBFeGNlcHRp\nb24gewogICAgICAgIFByb3BlcnR5RGVzY3JpcHRvcltdIHBkcyA9IF9jb25m\nLmdldFByb3BlcnR5RGVzY3JpcHRvcnMoKTsKICAgICAgICBmb3IgKGludCBp\nID0gMDsgaSA8IHBkcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBhc3Nl\ncnROb3ROdWxsKHBkc1tpXS5nZXRTaG9ydERlc2NyaXB0aW9uKCkpOwogICAg\nICAgICAgICBhc3NlcnROb3ROdWxsKHBkc1tpXS5nZXREaXNwbGF5TmFtZSgp\nKTsKCiAgICAgICAgICAgIGFzc2VydE5vdE51bGwocGRzW2ldLmdldFdyaXRl\nTWV0aG9kKCkpOwogICAgICAgICAgICBhc3NlcnROb3ROdWxsKHBkc1tpXS5n\nZXRSZWFkTWV0aG9kKCkpOwoKICAgICAgICAgICAgcGRzW2ldLmdldFJlYWRN\nZXRob2QoKS5pbnZva2UoX2NvbmYsIChPYmplY3RbXSkgbnVsbCk7CgogICAg\nICAgICAgICBNZXRob2Qgc2V0dGVyID0gcGRzW2ldLmdldFdyaXRlTWV0aG9k\nKCk7CiAgICAgICAgICAgIE1ldGhvZCBnZXR0ZXIgPSBwZHNbaV0uZ2V0UmVh\nZE1ldGhvZCgpOwogICAgICAgICAgICBDbGFzcyBwYXJhbSA9IHBkc1tpXS5n\nZXRSZWFkTWV0aG9kKCkuZ2V0UmV0dXJuVHlwZSgpOwoKICAgICAgICAgICAg\nT2JqZWN0IHNldFZhbCA9IG51bGw7CiAgICAgICAgICAgIGlmIChwYXJhbSA9\nPSBpbnQuY2xhc3MpCiAgICAgICAgICAgICAgICBzZXRWYWwgPSByYW5kb21J\nbnQoKTsKICAgICAgICAgICAgZWxzZSBpZiAocGFyYW0gPT0gbG9uZy5jbGFz\ncykKICAgICAgICAgICAgICAgIHNldFZhbCA9IHJhbmRvbUxvbmcoKTsKICAg\nICAgICAgICAgZWxzZSBpZiAocGFyYW0gPT0gU3RyaW5nLmNsYXNzKQogICAg\nICAgICAgICAgICAgc2V0VmFsID0gcmFuZG9tU3RyaW5nKCk7CiAgICAgICAg\nICAgIGVsc2UgaWYgKHBhcmFtID09IGJvb2xlYW4uY2xhc3MpCiAgICAgICAg\nICAgICAgICBzZXRWYWwgPSBuZXcgQm9vbGVhbighKCgoQm9vbGVhbikgZ2V0\ndGVyLmludm9rZShfY29uZiwKICAgICAgICAgICAgICAgICAgICAoT2JqZWN0\nW10pIG51bGwpKS5ib29sZWFuVmFsdWUoKSkpOwogICAgICAgICAgICBlbHNl\nCiAgICAgICAgICAgICAgICBjb250aW51ZTsKCiAgICAgICAgICAgIHNldHRl\nci5pbnZva2UoX2NvbmYsIG5ldyBPYmplY3QgW117IHNldFZhbCB9KTsKICAg\nICAgICAgICAgYXNzZXJ0RXF1YWxzKHNldFZhbCwgZ2V0dGVyLmludm9rZShf\nY29uZiwgKE9iamVjdFtdKSBudWxsKSk7CiAgICAgICAgfQogICAgfQoKICAg\nIC8qKgogICAgICogVGVzdCBmcmVlemluZy4KICAgICAqLwogICAgcHVibGlj\nIHZvaWQgdGVzdEZyZWV6aW5nKCkgewogICAgICAgIGFzc2VydFRydWUoIV9j\nb25mLmlzUmVhZE9ubHkoKSk7CiAgICAgICAgX2NvbmYuc2V0UmVhZE9ubHko\ndHJ1ZSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShfY29uZi5pc1JlYWRPbmx5KCkp\nOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIF9jb25mLnNldFRlc3RLZXko\nImJhciIpOwogICAgICAgICAgICBmYWlsKCJBbGxvd2VkIHNldCBvbiByZWFk\nIG9ubHkgY29uZmlndXJhdGlvbi4iKTsKICAgICAgICB9IGNhdGNoIChSdW50\naW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAg\nICAgICAgICAgIFByb3BlcnRpZXMgcCA9IG5ldyBQcm9wZXJ0aWVzKCk7CiAg\nICAgICAgICAgIHAucHV0KCJ4IiwgInkiKTsKICAgICAgICAgICAgX2NvbmYu\nZnJvbVByb3BlcnRpZXMocCk7CiAgICAgICAgICAgIGZhaWwoIkFsbG93ZWQg\nZnJvbU1hcCBvbiByZWFkIG9ubHkgY29uZmlndXJhdGlvbi4iKTsKICAgICAg\nICB9IGNhdGNoIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAgfQog\nICAgfQoKICAgIC8qKgogICAgICogVGVzdCBzZXJpYWxpemF0aW9uLgogICAg\nICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0U2VyaWFsaXphdGlvbigpIHRocm93\ncyBFeGNlcHRpb24gewogICAgICAgIGFzc2VydFRydWUoX2NvbmYubG9hZEds\nb2JhbHMoKSk7CiAgICAgICAgX2NvbmYuc2V0VGVzdEtleSgidGVzdHZhbHVl\nIik7CiAgICAgICAgX2NvbmYuc2V0U3lzS2V5KCJzeXN2YWx1ZSIpOwogICAg\nICAgIF9jb25mLnNldE9iamVjdEtleShuZXcgT2JqZWN0KCkpOwogICAgICAg\nIF9jb25mLnNldFBsdWdpbktleShuZXcgT2JqZWN0KCkpOwoKICAgICAgICBD\nb25maWd1cmF0aW9uVGVzdCBjb3B5ID0gKENvbmZpZ3VyYXRpb25UZXN0KSBy\nb3VuZHRyaXAoX2NvbmYsIHRydWUpOwogICAgICAgIGFzc2VydEVxdWFscygi\ndGVzdHZhbHVlIiwgY29weS5nZXRUZXN0S2V5KCkpOwogICAgICAgIGFzc2Vy\ndEVxdWFscygic3lzdmFsdWUiLCBjb3B5LmdldFN5c0tleSgpKTsKICAgICAg\nICBhc3NlcnROdWxsKGNvcHkuZ2V0T2JqZWN0S2V5KCkpOwogICAgICAgIGFz\nc2VydEVxdWFscygiamF2YS5sYW5nLk9iamVjdCIsIGNvcHkuZ2V0UGx1Z2lu\nS2V5KCkpOwogICAgICAgIGFzc2VydE5vdE51bGwoY29weS5nZXRQbHVnaW5L\nZXlJbnN0YW5jZSgpKTsKCiAgICAgICAgY29weS5zZXRUZXN0S2V5KCJ0ZXN0\ndmFsdWUyIik7CiAgICAgICAgY29weS5zZXRTeXNLZXkoInN5c3ZhbHVlMiIp\nOwogICAgICAgIGNvcHkuc2V0UGx1Z2luS2V5KG5ldyBTdHJpbmdCdWZmZXIo\nKSk7CgogICAgICAgIENvbmZpZ3VyYXRpb25UZXN0IGNvcHkyID0gKENvbmZp\nZ3VyYXRpb25UZXN0KSByb3VuZHRyaXAoY29weSwgdHJ1ZSk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKCJ0ZXN0dmFsdWUyIiwgY29weTIuZ2V0VGVzdEtleSgp\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoInN5c3ZhbHVlMiIsIGNvcHkyLmdl\ndFN5c0tleSgpKTsKICAgICAgICBhc3NlcnROdWxsKGNvcHkyLmdldE9iamVj\ndEtleSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoImphdmEubGFuZy5TdHJp\nbmdCdWZmZXIiLCBjb3B5Mi5nZXRQbHVnaW5LZXkoKSk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKCIiLCBjb3B5Mi5nZXRQbHVnaW5LZXlJbnN0YW5jZSgpLnRv\nU3RyaW5nKCkpOwogICAgfQoKICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWlu\nKFN0cmluZ1tdIGFyZ3MpIHsKICAgICAgICBtYWluKCk7CiAgICB9CgogICAg\ncHJpdmF0ZSBzdGF0aWMgY2xhc3MgQ29uZmlndXJhdGlvblRlc3QgZXh0ZW5k\ncyBDb25maWd1cmF0aW9uSW1wbCB7CgogICAgICAgIHByaXZhdGUgZmluYWwg\nU3RyaW5nVmFsdWUgX3Rlc3RLZXk7CiAgICAgICAgcHJpdmF0ZSBmaW5hbCBT\ndHJpbmdWYWx1ZSBfc3lzS2V5OwogICAgICAgIHByaXZhdGUgZmluYWwgUGx1\nZ2luVmFsdWUgX3BsdWdpbktleTsKICAgICAgICBwcml2YXRlIGZpbmFsIE9i\namVjdFZhbHVlIF9vYmplY3RLZXk7CgogICAgICAgIHB1YmxpYyBDb25maWd1\ncmF0aW9uVGVzdCgpIHsKICAgICAgICAgICAgdGhpcyh0cnVlKTsKICAgICAg\nICB9CgogICAgICAgIHB1YmxpYyBDb25maWd1cmF0aW9uVGVzdChib29sZWFu\nIGNhblNldFBsdWdpbikgewogICAgICAgICAgICBzdXBlcihmYWxzZSk7CiAg\nICAgICAgICAgIF90ZXN0S2V5ID0gYWRkU3RyaW5nKCJ0ZXN0S2V5Iik7CiAg\nICAgICAgICAgIF9zeXNLZXkgPSBhZGRTdHJpbmcoInN5c0tleSIpOwogICAg\nICAgICAgICBfcGx1Z2luS2V5ID0gYWRkUGx1Z2luKCJwbHVnaW5LZXkiLCBj\nYW5TZXRQbHVnaW4pOwogICAgICAgICAgICBfb2JqZWN0S2V5ID0gYWRkT2Jq\nZWN0KCJvYmplY3RLZXkiKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBT\ndHJpbmcgZ2V0VGVzdEtleSgpIHsKICAgICAgICAgICAgcmV0dXJuIF90ZXN0\nS2V5LmdldCgpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc2V0\nVGVzdEtleShTdHJpbmcgdmFsKSB7CiAgICAgICAgICAgIGFzc2VydE5vdFJl\nYWRPbmx5KCk7CiAgICAgICAgICAgIF90ZXN0S2V5LnNldCh2YWwpOwogICAg\nICAgIH0KCiAgICAgICAgcHVibGljIFN0cmluZyBnZXRTeXNLZXkoKSB7CiAg\nICAgICAgICAgIHJldHVybiBfc3lzS2V5LmdldCgpOwogICAgICAgIH0KCiAg\nICAgICAgcHVibGljIHZvaWQgc2V0U3lzS2V5KFN0cmluZyB2YWwpIHsKICAg\nICAgICAgICAgYXNzZXJ0Tm90UmVhZE9ubHkoKTsKICAgICAgICAgICAgX3N5\nc0tleS5zZXQodmFsKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBTdHJp\nbmcgZ2V0UGx1Z2luS2V5KCkgewogICAgICAgICAgICByZXR1cm4gX3BsdWdp\nbktleS5nZXRTdHJpbmcoKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2\nb2lkIHNldFBsdWdpbktleShTdHJpbmcgdmFsKSB7CiAgICAgICAgICAgIGFz\nc2VydE5vdFJlYWRPbmx5KCk7CiAgICAgICAgICAgIF9wbHVnaW5LZXkuc2V0\nU3RyaW5nKHZhbCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgT2JqZWN0\nIGdldFBsdWdpbktleUluc3RhbmNlKCkgewogICAgICAgICAgICBpZiAoX3Bs\ndWdpbktleS5nZXQoKSA9PSBudWxsKQogICAgICAgICAgICAgICAgcmV0dXJu\nIF9wbHVnaW5LZXkuaW5zdGFudGlhdGUoT2JqZWN0LmNsYXNzLCB0aGlzKTsK\nICAgICAgICAgICAgcmV0dXJuIF9wbHVnaW5LZXkuZ2V0KCk7CiAgICAgICAg\nfQoKICAgICAgICBwdWJsaWMgdm9pZCBzZXRQbHVnaW5LZXkoT2JqZWN0IHZh\nbCkgewogICAgICAgICAgICBhc3NlcnROb3RSZWFkT25seSgpOwogICAgICAg\nICAgICBfcGx1Z2luS2V5LnNldCh2YWwpOwogICAgICAgIH0KCiAgICAgICAg\ncHVibGljIE9iamVjdCBnZXRPYmplY3RLZXkoKSB7CiAgICAgICAgICAgIHJl\ndHVybiBfb2JqZWN0S2V5LmdldCgpOwogICAgICAgIH0KCiAgICAgICAgcHVi\nbGljIHZvaWQgc2V0T2JqZWN0S2V5KE9iamVjdCB2YWwpIHsKICAgICAgICAg\nICAgYXNzZXJ0Tm90UmVhZE9ubHkoKTsKICAgICAgICAgICAgX29iamVjdEtl\neS5zZXQodmFsKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIGRl\ncml2ZU9iamVjdEtleShPYmplY3QgdmFsKSB7CiAgICAgICAgICAgIF9vYmpl\nY3RLZXkuc2V0KHZhbCwgdHJ1ZSk7CiAgICAgICAgfQogICAgICAgIAogICAg\nICAgIHByb3RlY3RlZCBib29sZWFuIGlzSW52YWxpZFByb3BlcnR5KFN0cmlu\nZyBzKSB7CiAgICAgICAgICAgIGlmICgib3BlbmpwYXRlc3QucHJvcGVydGll\ncyIuZXF1YWxzKHMpKQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwog\nICAgICAgICAgICBlbHNlIAogICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVy\nLmlzSW52YWxpZFByb3BlcnR5KHMpOwogICAgICAgIH0KICAgIH0KfQo=\n","encoding":"base64"}

