{"sha":"599918ee8b49faab7857dd066705dfeba1360fb5","node_id":"MDQ6QmxvYjIwNjM2NDo1OTk5MThlZThiNDlmYWFiNzg1N2RkMDY2NzA1ZGZlYmExMzYwZmI1","size":6072,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/599918ee8b49faab7857dd066705dfeba1360fb5","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKiAgTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNl\nLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAqIHlvdSBtYXkgbm90\nIHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUg\nTGljZW5zZS4KICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNl\nbnNlIGF0CiAqICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElD\nRU5TRS0yLjAKICogIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxh\ndyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogZGlzdHJp\nYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4g\nIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJ\nVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQu\nCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdl\nIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlvbnMgdW5k\nZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUub3Blbmpw\nYS5saWIudXRpbDsKCmltcG9ydCBqYXZhLnV0aWwuUHJvcGVydGllczsKCmlt\ncG9ydCBqdW5pdC5mcmFtZXdvcmsuVGVzdDsKaW1wb3J0IGp1bml0LmZyYW1l\nd29yay5UZXN0Q2FzZTsKaW1wb3J0IGp1bml0LmZyYW1ld29yay5UZXN0U3Vp\ndGU7CmltcG9ydCBqdW5pdC50ZXh0dWkuVGVzdFJ1bm5lcjsKCi8qKgogKiBU\nZXN0cyB0aGUge0BsaW5rIE9wdGlvbnN9IHR5cGUuCiAqCiAqIEBhdXRob3Ig\nQWJlIFdoaXRlCiAqLwpwdWJsaWMgY2xhc3MgVGVzdE9wdGlvbnMgZXh0ZW5k\ncyBUZXN0Q2FzZSB7CgogICAgcHJpdmF0ZSBPcHRpb25zIF9vcHRzID0gbnVs\nbDsKCiAgICBwcml2YXRlIFN0cmluZ1tdIF9hcmdzID0gbmV3IFN0cmluZ1td\newogICAgICAgICItaW50IiwgIjEwIiwgIi1ib29sZWFuIiwgIi1zdHJpbmci\nLCAiU1RSLFNUUjIiLCAiLXJhbmdlMSIsICIxMCwxMDAiLAogICAgICAgICIt\ncmFuZ2UyIiwgIjEwIiwgIi1maWVsZFZhbCIsICIyMCIsICItRmllbGRWYWwy\nIiwgIjMwIiwKICAgICAgICAiLWlubmVyLm51bGxJbm5lci5yYW5nZTEiLCAi\nMTAsMTAwIiwgImFyZzEiLCAiYXJnMiIsICJhcmczIiB9OwoKICAgIHB1Ymxp\nYyBUZXN0T3B0aW9ucyhTdHJpbmcgdGVzdCkgewogICAgICAgIHN1cGVyKHRl\nc3QpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgewogICAgICAg\nIFByb3BlcnRpZXMgZGVmcyA9IG5ldyBQcm9wZXJ0aWVzKCk7CiAgICAgICAg\nZGVmcy5zZXRQcm9wZXJ0eSgiZGVmYXVsdCIsICJ2YWx1ZSIpOwogICAgICAg\nIF9vcHRzID0gbmV3IE9wdGlvbnMoZGVmcyk7CiAgICAgICAgX2FyZ3MgPSBf\nb3B0cy5zZXRGcm9tQ21kTGluZShfYXJncyk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBUZXN0IGNvbW1hbmQtbGluZSBwYXJzaW5nLgogICAgICovCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0Q21kTGluZVBhcnNpbmcoKSB7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDMsIF9hcmdzLmxlbmd0aCk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKCJhcmcxIiwgX2FyZ3NbMF0pOwogICAgICAgIGFzc2VydEVxdWFscygi\nYXJnMiIsIF9hcmdzWzFdKTsKICAgICAgICBhc3NlcnRFcXVhbHMoImFyZzMi\nLCBfYXJnc1syXSk7CgogICAgICAgIGFzc2VydEVxdWFscygiMTAiLCBfb3B0\ncy5nZXRQcm9wZXJ0eSgiaW50IikpOwogICAgICAgIGFzc2VydEVxdWFscygi\ndHJ1ZSIsIF9vcHRzLmdldFByb3BlcnR5KCJib29sZWFuIikpOwogICAgICAg\nIGFzc2VydEVxdWFscygiU1RSLFNUUjIiLCBfb3B0cy5nZXRQcm9wZXJ0eSgi\nc3RyaW5nIikpOwogICAgICAgIGFzc2VydEVxdWFscygiMjAiLCBfb3B0cy5n\nZXRQcm9wZXJ0eSgiZmllbGRWYWwiKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKCIzMCIsIF9vcHRzLmdldFByb3BlcnR5KCJGaWVsZFZhbDIiKSk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKCIxMCwxMDAiLCBfb3B0cy5nZXRQcm9wZXJ0eSgi\ncmFuZ2UxIikpOwogICAgICAgIGFzc2VydEVxdWFscygiMTAiLCBfb3B0cy5n\nZXRQcm9wZXJ0eSgicmFuZ2UyIikpOwogICAgICAgIGFzc2VydEVxdWFscygi\nMTAsMTAwIiwgX29wdHMuZ2V0UHJvcGVydHkoImlubmVyLm51bGxJbm5lci5y\nYW5nZTEiKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJ2YWx1ZSIsIF9vcHRz\nLmdldFByb3BlcnR5KCJkZWZhdWx0IikpOwoKICAgICAgICBfYXJncyA9IF9v\ncHRzLnNldEZyb21DbWRMaW5lKG5ldyBTdHJpbmdbXXsgIi1kZWZhdWx0Iiwg\nIm5ld1ZhbHVlIiB9KTsKICAgICAgICBhc3NlcnRFcXVhbHMoMCwgX2FyZ3Mu\nbGVuZ3RoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIm5ld1ZhbHVlIiwgX29w\ndHMuZ2V0UHJvcGVydHkoImRlZmF1bHQiKSk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBUZXN0cyB0aGUgc2V0dGluZyBvZiBvcHRpb24gdmFsdWVzIGludG8g\nYmVhbiBvYmplY3RzLgogICAgICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0U2V0\nT2JqZWN0KCkgewogICAgICAgIElubmVyIGlubmVyID0gbmV3IElubmVyKCk7\nCiAgICAgICAgX29wdHMuc2V0SW50byhpbm5lcik7CgogICAgICAgIGFzc2Vy\ndEVxdWFscygxMCwgaW5uZXIuZ2V0SW50KCkpOwogICAgICAgIGFzc2VydFRy\ndWUoaW5uZXIuZ2V0Qm9vbGVhbigpKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nIlNUUixTVFIyIiwgaW5uZXIuZ2V0U3RyaW5nKCkpOwogICAgICAgIGFzc2Vy\ndEVxdWFscygyMCwgaW5uZXIuZmllbGRWYWwpOwogICAgICAgIGFzc2VydEVx\ndWFscygzMCwgaW5uZXIuZmllbGRWYWwyKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoMTAsIGlubmVyLmdldFJhbmdlMSgpWzBdKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoMTAwLCBpbm5lci5nZXRSYW5nZTEoKVsxXSk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDEwLCBpbm5lci5nZXRSYW5nZTIoKVswXSk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDAsIGlubmVyLmdldFJhbmdlMigpWzFdKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoInZhbHVlIiwgaW5uZXIuZ2V0RGVmYXVsdCgpKTsK\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEwLCBpbm5lci5nZXRJbm5lcigpLmdl\ndE51bGxJbm5lcigpLmdldFJhbmdlMSgpWzBdKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoMTAwLCBpbm5lci5nZXRJbm5lcigpLmdldE51bGxJbm5lcigpLmdl\ndFJhbmdlMSgpWzFdKTsKCiAgICAgICAgaW5uZXIgPSBuZXcgSW5uZXIoKTsK\nICAgICAgICBPcHRpb25zIG9wdHMgPSBuZXcgT3B0aW9ucygpOwogICAgICAg\nIG9wdHMuc2V0UHJvcGVydHkoImlubmVyIiwgSW5uZXIyLmNsYXNzLmdldE5h\nbWUoKSk7CiAgICAgICAgb3B0cy5zZXRJbnRvKGlubmVyKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoSW5uZXIyLmNsYXNzLCBpbm5lci5nZXRJbm5lcigpLmdl\ndENsYXNzKCkpOwoKICAgICAgICBpbm5lciA9IG5ldyBJbm5lcigpOwogICAg\nICAgIG9wdHMgPSBuZXcgT3B0aW9ucygpOwogICAgICAgIG9wdHMuc2V0UHJv\ncGVydHkoIm1peGVkIiwgIlNUUiwxIik7CiAgICAgICAgb3B0cy5zZXRJbnRv\nKGlubmVyKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgaW5uZXIuZ2V0SW50\nKCkpOwogICAgICAgIGFzc2VydEVxdWFscygiU1RSIiwgaW5uZXIuZ2V0U3Ry\naW5nKCkpOwogICAgfQoKICAgIHB1YmxpYyBzdGF0aWMgVGVzdCBzdWl0ZSgp\nIHsKICAgICAgICByZXR1cm4gbmV3IFRlc3RTdWl0ZShUZXN0T3B0aW9ucy5j\nbGFzcyk7CiAgICB9CgogICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3Ry\naW5nW10gYXJncykgewogICAgICAgIFRlc3RSdW5uZXIucnVuKHN1aXRlKCkp\nOwogICAgfQoKICAgIC8qKgogICAgICogVXNlZCBpbnRlcm5hbGx5IGZvciB0\nZXN0aW5nOyBtdXN0IGJlIHB1YmxpYyBzbyBPcHRpb25zIGNhbiBjb25zdHJ1\nY3QgaXQuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgSW5uZXIg\newoKICAgICAgICBwdWJsaWMgaW50IGZpZWxkVmFsID0gMDsKICAgICAgICBw\ndWJsaWMgaW50IGZpZWxkVmFsMiA9IDA7CgogICAgICAgIHByaXZhdGUgaW50\nIF9pbnQgPSAwOwogICAgICAgIHByaXZhdGUgYm9vbGVhbiBfYm9vbGVhbiA9\nIGZhbHNlOwogICAgICAgIHByaXZhdGUgU3RyaW5nIF9zdHJpbmcgPSBudWxs\nOwogICAgICAgIHByaXZhdGUgU3RyaW5nIF9kZWZhdWx0ID0gbnVsbDsKICAg\nICAgICBwcml2YXRlIElubmVyIF9pbm5lciA9IG51bGw7CiAgICAgICAgcHJp\ndmF0ZSBJbm5lciBfbnVsbElubmVyID0gbnVsbDsKICAgICAgICBwcml2YXRl\nIGludFtdIF9yYW5nZTEgPSBuZXcgaW50WzJdOwogICAgICAgIHByaXZhdGUg\naW50W10gX3JhbmdlMiA9IG5ldyBpbnRbMl07CgogICAgICAgIHB1YmxpYyBJ\nbm5lcigpIHsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBpbnQgZ2V0SW50\nKCkgewogICAgICAgICAgICByZXR1cm4gX2ludDsKICAgICAgICB9CgogICAg\nICAgIHB1YmxpYyB2b2lkIHNldEludChpbnQgaSkgewogICAgICAgICAgICBf\naW50ID0gaTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBib29sZWFuIGdl\ndEJvb2xlYW4oKSB7CiAgICAgICAgICAgIHJldHVybiBfYm9vbGVhbjsKICAg\nICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHNldEJvb2xlYW4oYm9vbGVh\nbiBiKSB7CiAgICAgICAgICAgIF9ib29sZWFuID0gYjsKICAgICAgICB9Cgog\nICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0U3RyaW5nKCkgewogICAgICAgICAg\nICByZXR1cm4gX3N0cmluZzsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2\nb2lkIHNldFN0cmluZyhTdHJpbmcgcykgewogICAgICAgICAgICBfc3RyaW5n\nID0gczsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0RGVm\nYXVsdCgpIHsKICAgICAgICAgICAgcmV0dXJuIF9kZWZhdWx0OwogICAgICAg\nIH0KCiAgICAgICAgcHVibGljIHZvaWQgc2V0RGVmYXVsdChTdHJpbmcgcykg\newogICAgICAgICAgICBfZGVmYXVsdCA9IHM7CiAgICAgICAgfQoKICAgICAg\nICBwdWJsaWMgaW50W10gZ2V0UmFuZ2UxKCkgewogICAgICAgICAgICByZXR1\ncm4gX3JhbmdlMTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHNl\ndFJhbmdlMShpbnQgbWluLCBpbnQgbWF4KSB7CiAgICAgICAgICAgIF9yYW5n\nZTFbMF0gPSBtaW47CiAgICAgICAgICAgIF9yYW5nZTFbMV0gPSBtYXg7CiAg\nICAgICAgfQoKICAgICAgICBwdWJsaWMgaW50W10gZ2V0UmFuZ2UyKCkgewog\nICAgICAgICAgICByZXR1cm4gX3JhbmdlMjsKICAgICAgICB9CgogICAgICAg\nIHB1YmxpYyB2b2lkIHNldFJhbmdlMihpbnQgbWluLCBpbnQgbWF4KSB7CiAg\nICAgICAgICAgIF9yYW5nZTJbMF0gPSBtaW47CiAgICAgICAgICAgIF9yYW5n\nZTJbMV0gPSBtYXg7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBz\nZXRNaXhlZChTdHJpbmcgcywgaW50IGkpIHsKICAgICAgICAgICAgX2ludCA9\nIGk7CiAgICAgICAgICAgIF9zdHJpbmcgPSBzOwogICAgICAgIH0KCiAgICAg\nICAgcHVibGljIElubmVyIGdldElubmVyKCkgewogICAgICAgICAgICBpZiAo\nX2lubmVyID09IG51bGwpCiAgICAgICAgICAgICAgICBfaW5uZXIgPSBuZXcg\nSW5uZXIoKTsKICAgICAgICAgICAgcmV0dXJuIF9pbm5lcjsKICAgICAgICB9\nCgogICAgICAgIHB1YmxpYyB2b2lkIHNldElubmVyKElubmVyIGluKSB7CiAg\nICAgICAgICAgIF9pbm5lciA9IGluOwogICAgICAgIH0KCiAgICAgICAgcHVi\nbGljIElubmVyIGdldE51bGxJbm5lcigpIHsKICAgICAgICAgICAgcmV0dXJu\nIF9udWxsSW5uZXI7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBz\nZXROdWxsSW5uZXIoSW5uZXIgaW4pIHsKICAgICAgICAgICAgX251bGxJbm5l\nciA9IGluOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFVzZWQg\naW50ZXJuYWxseSBmb3IgdGVzdGluZzsgbXVzdCBiZSBwdWJsaWMgc28gT3B0\naW9ucyBjYW4gY29uc3RydWN0IGl0LgogICAgICovCiAgICBwdWJsaWMgc3Rh\ndGljIGNsYXNzIElubmVyMiBleHRlbmRzIElubmVyIHsKCiAgICB9Cn0K\n","encoding":"base64"}

