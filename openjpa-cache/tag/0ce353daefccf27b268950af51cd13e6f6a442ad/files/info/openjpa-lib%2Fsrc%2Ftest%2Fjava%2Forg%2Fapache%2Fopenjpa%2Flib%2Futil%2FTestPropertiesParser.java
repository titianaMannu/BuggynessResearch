{"sha":"ac9574b7da708996ea767e5ea129130da29d761b","node_id":"MDQ6QmxvYjIwNjM2NDphYzk1NzRiN2RhNzA4OTk2ZWE3NjdlNWVhMTI5MTMwZGEyOWQ3NjFi","size":15338,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/ac9574b7da708996ea767e5ea129130da29d761b","content":"LyoNCiAqIENvcHlyaWdodCAyMDA2IFRoZSBBcGFjaGUgU29mdHdhcmUgRm91\nbmRhdGlvbi4NCiAqICBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsNCiAqIHlvdSBtYXkg\nbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0\naGUgTGljZW5zZS4NCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUg\nTGljZW5zZSBhdA0KICogIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNl\ncy9MSUNFTlNFLTIuMA0KICogIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUNCiAq\nIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVk\nIG9uIGFuICJBUyBJUyIgQkFTSVMsDQogKiBXSVRIT1VUIFdBUlJBTlRJRVMg\nT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3Ig\naW1wbGllZC4NCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmlj\nIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQNCiAqIGxpbWl0\nYXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLg0KICovDQpwYWNrYWdlIG9yZy5h\ncGFjaGUub3BlbmpwYS5saWIudXRpbDsNCg0KaW1wb3J0IGphdmEuaW8uQnVm\nZmVyZWRJbnB1dFN0cmVhbTsNCmltcG9ydCBqYXZhLmlvLkJ1ZmZlcmVkUmVh\nZGVyOw0KaW1wb3J0IGphdmEuaW8uQnl0ZUFycmF5SW5wdXRTdHJlYW07DQpp\nbXBvcnQgamF2YS5pby5CeXRlQXJyYXlPdXRwdXRTdHJlYW07DQppbXBvcnQg\namF2YS5pby5JT0V4Y2VwdGlvbjsNCmltcG9ydCBqYXZhLmlvLklucHV0U3Ry\nZWFtOw0KaW1wb3J0IGphdmEuaW8uSW5wdXRTdHJlYW1SZWFkZXI7DQppbXBv\ncnQgamF2YS5pby5PYmplY3RJbnB1dFN0cmVhbTsNCmltcG9ydCBqYXZhLmlv\nLk9iamVjdE91dHB1dFN0cmVhbTsNCmltcG9ydCBqYXZhLmlvLlN0cmluZ0J1\nZmZlcklucHV0U3RyZWFtOw0KaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7\nDQppbXBvcnQgamF2YS51dGlsLkFycmF5czsNCmltcG9ydCBqYXZhLnV0aWwu\nTGlzdDsNCmltcG9ydCBqYXZhLnV0aWwuUHJvcGVydGllczsNCg0KaW1wb3J0\nIGp1bml0LmZyYW1ld29yay5UZXN0Q2FzZTsNCmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEubGliLnV0aWwuRm9ybWF0UHJlc2VydmluZ1Byb3BlcnRpZXMu\nRHVwbGljYXRlS2V5RXhjZXB0aW9uOw0KDQovLyB0aGluZ3MgdG8gdGVzdDoN\nCi8vIC0gZGVsaW1pdGVycyBpbiBrZXlzDQovLyAtIGVzY2FwZSBjaGFycywg\naW5jbHVkaW5nIFw6LCBcPSBpbiBmaWxlcyhhcyBnZW5lcmF0ZWQgYnkgUHJv\ncGVydGllcykNCi8vIC0gdW5pY29kZQ0KLy8gLSBub24tU3RyaW5nIGtleXMg\nLyB2YWxzDQovLyAtIGxpc3QoKSBtZXRob2QgYmVoYXZpb3INCg0KcHVibGlj\nIGNsYXNzIFRlc3RQcm9wZXJ0aWVzUGFyc2VyIGV4dGVuZHMgVGVzdENhc2Ug\new0KDQogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIExTID0gU3lz\ndGVtLmdldFByb3BlcnR5KCAibGluZS5zZXBhcmF0b3IiICk7DQoNCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0U2ltcGxlUHJvcGVydGllcygpIHRocm93cyBJT0V4\nY2VwdGlvbiB7DQogICAgICAgIFN0cmluZ0J1ZmZlciBidWYgPSBuZXcgU3Ry\naW5nQnVmZmVyKCk7DQogICAgICAgIGJ1Zi5hcHBlbmQoImtleTogdmFsdWUi\nICsgTFMpOw0KICAgICAgICBidWYuYXBwZW5kKCJrZXkyOiB2YWx1ZTIiKTsg\nLy8gbm8gRU9MIC0tIHRoaXMgaXMgaW50ZW50aW9uYWwNCiAgICAgICAgUHJv\ncGVydGllcyBwID0gdG9Qcm9wZXJ0aWVzKGJ1Zi50b1N0cmluZygpKTsNCiAg\nICAgICAgYXNzZXJ0UHJvcGVydGllcyhuZXcgU3RyaW5nW11bXXsNCiAgICAg\nICAgICAgIHsgImtleSIsICJ2YWx1ZSIgfSwgeyAia2V5MiIsICJ2YWx1ZTIi\nIH0gfSwgcCk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdENvbW1l\nbnRzKCkgdGhyb3dzIElPRXhjZXB0aW9uIHsNCiAgICAgICAgU3RyaW5nQnVm\nZmVyIGJ1ZiA9IG5ldyBTdHJpbmdCdWZmZXIoKTsNCiAgICAgICAgYnVmLmFw\ncGVuZCgiIyB0aGlzIGlzIGEgY29tbWVudCIgKyBMUyk7DQogICAgICAgIGJ1\nZi5hcHBlbmQoIiAjIGFub3RoZXIgb25lLCB3aXRoIGxlYWRpbmcgd2hpdGVz\ncGFjZQkiICsgTFMpOw0KICAgICAgICBidWYuYXBwZW5kKCIgCSMgCWFuZCBt\nb3JlIHdpdGggaW50ZXJlc3Rpbmcgd2hpdGVzcGFjZQkiICsgTFMpOw0KICAg\nICAgICBidWYuYXBwZW5kKCIhIGFuZCB3aXRoIGEgISBkZWxpbWl0ZXIiICsg\nTFMpOw0KICAgICAgICBidWYuYXBwZW5kKCIhIGFuZCB3aXRoIGVzY2FwZSBc\ndCBjaGFycyIgKyBMUyk7DQogICAgICAgIGJ1Zi5hcHBlbmQoIiNhbmQgYSBj\nb21tZW50IHdpdGggbm8gd2hpdGVzcGFjZSIgKyBMUyk7DQogICAgICAgIFBy\nb3BlcnRpZXMgcCA9IHRvUHJvcGVydGllcyhidWYudG9TdHJpbmcoKSk7DQog\nICAgICAgIGFzc2VydEVxdWFscygwLCBwLnNpemUoKSk7DQogICAgfQ0KDQog\nICAgcHVibGljIHZvaWQgdGVzdE1peGVkQ29udGVudCgpIHRocm93cyBJT0V4\nY2VwdGlvbiB7DQogICAgICAgIFN0cmluZ0J1ZmZlciBidWYgPSBuZXcgU3Ry\naW5nQnVmZmVyKCk7DQogICAgICAgIGJ1Zi5hcHBlbmQoIiMgdGhpcyBpcyBh\nIGNvbW1lbnQiICsgTFMpOw0KICAgICAgICBidWYuYXBwZW5kKCIgIyBhbm90\naGVyIG9uZSwgd2l0aCBsZWFkaW5nIHdoaXRlc3BhY2UJIiArIExTKTsNCiAg\nICAgICAgYnVmLmFwcGVuZCgiZm9vOiBiYXIjYmF6IiArIExTKTsNCiAgICAg\nICAgYnVmLmFwcGVuZCgiISBhbmQgd2l0aCBhICEgZGVsaW1pdGVyIiArIExT\nKTsNCiAgICAgICAgYnVmLmFwcGVuZCgiISBhbmQgd2l0aCBlc2NhcGUgXHQg\nY2hhcnMiICsgTFMpOw0KICAgICAgICBQcm9wZXJ0aWVzIHAgPSB0b1Byb3Bl\ncnRpZXMoYnVmLnRvU3RyaW5nKCkpOw0KICAgICAgICBhc3NlcnRQcm9wZXJ0\naWVzKG5ldyBTdHJpbmdbXVtdeyB7ICJmb28iLCAiYmFyI2JheiIgfSB9LCBw\nKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0TXVsdGlMaW5lSW5w\ndXQoKSB0aHJvd3MgSU9FeGNlcHRpb24gew0KICAgICAgICBTdHJpbmcgcyA9\nICJmb286IGJhclxcIiArIExTICsgIm1vcmUgbGluZSBnb2VzIGhlcmUiOw0K\nICAgICAgICBQcm9wZXJ0aWVzIHAgPSB0b1Byb3BlcnRpZXMocyk7DQogICAg\nICAgIGFzc2VydFByb3BlcnRpZXMoDQogICAgICAgICAgICBuZXcgU3RyaW5n\nW11bXXsgeyAiZm9vIiwgImJhcm1vcmUgbGluZSBnb2VzIGhlcmUiIH0gfSwg\ncCk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdEVtcHR5TGluZXMo\nKSB0aHJvd3MgSU9FeGNlcHRpb24gew0KICAgICAgICBQcm9wZXJ0aWVzIHAg\nPSB0b1Byb3BlcnRpZXMoTFMgKyAiZm9vOiBiYXIiICsgTFMgKyBMUyArICJi\nYXo6IHZhbCIpOw0KICAgICAgICBhc3NlcnRQcm9wZXJ0aWVzKG5ldyBTdHJp\nbmdbXVtdeyB7ICJmb28iLCAiYmFyIiB9LCB7ICJiYXoiLCAidmFsIiB9IH0s\nDQogICAgICAgICAgICBwKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0\nZXN0QWRkUHJvcGVydGllcygpIHRocm93cyBJT0V4Y2VwdGlvbiB7DQogICAg\nICAgIC8vIGludGVudGlvbmFsbHkgbGVmdCBvdXQgdGhlIHRyYWlsaW5nIGVu\nZCBsaW5lDQogICAgICAgIFN0cmluZyBzID0gImZvbzogYmFyIiArIExTICsg\nImJhejogdmFsIjsNCiAgICAgICAgUHJvcGVydGllcyBwID0gdG9Qcm9wZXJ0\naWVzKHMpOw0KICAgICAgICBhc3NlcnRQcm9wZXJ0aWVzKG5ldyBTdHJpbmdb\nXVtdeyB7ICJmb28iLCAiYmFyIiB9LCB7ICJiYXoiLCAidmFsIiB9IH0sDQog\nICAgICAgICAgICBwKTsNCg0KICAgICAgICBwLnB1dCgibmV3LWtleSIsICJ2\nYWwxIik7DQogICAgICAgIHAucHV0KCJuZXcta2V5LTIiLCAidmFsMiIpOw0K\nICAgICAgICBwLnB1dCgiYW5vdGhlci1uZXcta2V5IiwgInZhbDMiKTsNCiAg\nICAgICAgYXNzZXJ0Um91bmRUcmlwKHMgKyBMUyArICJuZXcta2V5OiB2YWwx\nIiArIExTICsgIm5ldy1rZXktMjogdmFsMiIgKyBMUyArDQogICAgICAgICAg\nICAiYW5vdGhlci1uZXcta2V5OiB2YWwzIiArIExTLCBwKTsNCiAgICB9DQoN\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0QWRkQW5kTXV0YXRlUHJvcGVydGllcygp\nIHRocm93cyBJT0V4Y2VwdGlvbiB7DQogICAgICAgIC8vIGludGVudGlvbmFs\nbHkgbGVmdCBvdXQgdGhlIHRyYWlsaW5nIGVuZCBsaW5lDQogICAgICAgIFBy\nb3BlcnRpZXMgcCA9IHRvUHJvcGVydGllcygiZm9vOiBiYXIiICsgTFMgKyAi\nYmF6OiB2YWwiKTsNCiAgICAgICAgYXNzZXJ0UHJvcGVydGllcyhuZXcgU3Ry\naW5nW11bXXsgeyAiZm9vIiwgImJhciIgfSwgeyAiYmF6IiwgInZhbCIgfSB9\nLA0KICAgICAgICAgICAgcCk7DQoNCiAgICAgICAgcC5wdXQoIm5ldy1rZXki\nLCAibmV3IHZhbHVlIik7DQogICAgICAgIHAucHV0KCJmb28iLCAiYmFyYmFy\nIik7DQogICAgICAgIGFzc2VydFJvdW5kVHJpcCgiZm9vOiBiYXJiYXIiICsg\nTFMgKyAiYmF6OiB2YWwiICsgTFMgDQogICAgICAgICAgICArICJuZXcta2V5\nOiBuZXcgdmFsdWUiICsgTFMsIHApOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2\nb2lkIHRlc3RFc2NhcGVkRXF1YWxzKCkgdGhyb3dzIElPRXhjZXB0aW9uIHsN\nCiAgICAgICAgUHJvcGVydGllcyBwID0gdG9Qcm9wZXJ0aWVzKCJmb289YmFy\nXFw9V0FSTixiYXpcXD1UUkFDRSIpOw0KICAgICAgICBhc3NlcnRQcm9wZXJ0\naWVzKG5ldyBTdHJpbmdbXVtdeyB7ICJmb28iLCAiYmFyPVdBUk4sYmF6PVRS\nQUNFIiB9IH0sIHApOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RM\naW5lVHlwZXMoKSB0aHJvd3MgSU9FeGNlcHRpb24gew0KICAgICAgICBTdHJp\nbmdCdWZmZXIgYnVmID0gbmV3IFN0cmluZ0J1ZmZlcigpOw0KICAgICAgICBi\ndWYuYXBwZW5kKCIgICAhY29tbWVudCIgKyBMUyArICIgXHQgICIgKyBMUyAr\nICJuYW1lID0gbm8iICsgTFMgKyAiICAgICINCiAgICAgICAgICAgICsgIiNt\nb3JlY1x0b21tXFwiICsgTFMgKyAiZW50cyIgKyBMUyArIExTICsgIiAgZG9n\nPW5vXFxjYXQgICAiICsgTFMgDQogICAgICAgICAgICArICJidXJwcyAgICA6\nIiArIExTICsgInRlc3Q9IiArIExTICsgImRhdGUgdG9kYXkiICsgTFMgKyBM\nUyArIExTIA0KICAgICAgICAgICAgKyAibG9uZ1xcIiArIExTICsgIiAgIHZh\nbHVlPXRyeWluIFxcIiArIExTICsgIiAiDQogICAgICAgICAgICArICJndG8i\nICsgTFMgKyAiNDp2aWVyIiArIExTICsgInZpZXIgICAgIDo0Iik7DQogICAg\nICAgIFByb3BlcnRpZXMgcCA9IHRvUHJvcGVydGllcyhidWYudG9TdHJpbmco\nKSk7DQogICAgICAgIGFzc2VydFByb3BlcnRpZXMobmV3IFN0cmluZ1tdW117\nDQogICAgICAgICAgICB7ICJuYW1lIiwgIm5vIiB9LCB7ICJlbnRzIiwgIiIg\nfSwgeyAiZG9nIiwgIm5vY2F0ICAgIiB9LA0KICAgICAgICAgICAgeyAiYnVy\ncHMiLCAiIiB9LCB7ICJ0ZXN0IiwgIiIgfSwgeyAiZGF0ZSIsICJ0b2RheSIg\nfSwNCiAgICAgICAgICAgIHsgImxvbmd2YWx1ZSIsICJ0cnlpbiBndG8iIH0s\nIHsgIjQiLCAidmllciIgfSwgeyAidmllciIsICI0IiB9LA0KICAgICAgICB9\nLCBwKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0U3BlY2lhbENo\nYXJzKCkgdGhyb3dzIFRocm93YWJsZSB7DQogICAgICAgIHRlc3RTcGVjaWFs\nQ2hhcnMoZmFsc2UsIHRydWUpOw0KICAgICAgICB0ZXN0U3BlY2lhbENoYXJz\nKHRydWUsIHRydWUpOw0KICAgICAgICB0ZXN0U3BlY2lhbENoYXJzKGZhbHNl\nLCBmYWxzZSk7DQogICAgICAgIHRlc3RTcGVjaWFsQ2hhcnModHJ1ZSwgZmFs\nc2UpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFRlc3QgdGhhdCBzcGVj\naWFsIGNoYXJhY3RlcnMgd29yay4NCiAgICAgKg0KICAgICAqIEBwYXJhbSBm\nb3JtYXR0aW5nUHJvcHMgaWYgdHJ1ZSwgdGVzdCBhZ2FpbnN0IHRoZQ0KICAg\nICAqIEZvcm1hdFByZXNlcnZpbmdQcm9wZXJ0aWVzLCBvdGhlcndpc2UgdGVz\ndA0KICAgICAqIGFnYWluc3QgYSBub3JtYWwgUHJvcGVydGllcyBpbnN0YW5j\nZShmb3IgdmFsaWRhdGlvbiBvZiB0aGUgdGVzdCBjYXNlKS4NCiAgICAgKiBA\ncGFyYW0gdmFsdWUgd2hldGhlciB0byB0ZXN0IHRoZSBrZXkgb3IgdGhlIHZh\nbHVlDQogICAgICovDQogICAgcHVibGljIHZvaWQgdGVzdFNwZWNpYWxDaGFy\ncyhib29sZWFuIGZvcm1hdHRpbmdQcm9wcywgYm9vbGVhbiB2YWx1ZSkNCiAg\nICAgICAgdGhyb3dzIFRocm93YWJsZSB7DQogICAgICAgIExpc3QgdmFsdWVM\naXN0ID0gbmV3IEFycmF5TGlzdChBcnJheXMuYXNMaXN0KG5ldyBTdHJpbmdb\nXXsNCiAgICAgICAgICAgICJ4eHl5IiwgInh4XFx5eSIsICJ4eCIgKyBMUyAr\nICJ5eSIsICJ4eFxcbnl5IiwgInh4XHR5eSIsICJ4eFxcdHl5IiwNCiAgICAg\nICAgICAgICJ4eFxyeXkiLCAieHhcXHJ5eSIsICJ4eFxmeXkiLCAieHhcXGZ5\neSIsICJ4eFxyIiArIExTICsgIlxcXHRcclx0IiANCiAgICAgICAgICAgICsg\nTFMgKyAieXkiLA0KICAgICAgICAgICAgInh4XFxyIiArIExTICsgIlxcXHRc\nXHJcdFxcbnl5IiwNCiAgICAgICAgICAgICJ4eFxyIiArIExTICsgIlxcXFxc\nXFxcXFxcXFxcXFxcXFxcXFxcXFxcXHRcclx0IiArIExTICsgInl5IiwNCiAg\nICAgICAgICAgICJDOlxcUHJvZ3JhbSBGaWxlc1xcU29tZSBBcHBsaWNhdGlv\nblxcT3BlbkpQQVxcTXkgRmlsZS5kYXQiLCB9KSk7DQoNCiAgICAgICAgLy8g\nYWxzbyBzdG9yZSBldmVyeSBpbmRpdmlkdWFsIGNoYXJhY3Rlcg0KICAgICAg\nICBmb3IgKGNoYXIgYyA9ICdhJzsgYyA8ICdaJzsgYysrKSB7DQogICAgICAg\nICAgICB2YWx1ZUxpc3QuYWRkKG5ldyBTdHJpbmcobmV3IGNoYXJbXXsgYyB9\nKSk7DQogICAgICAgICAgICB2YWx1ZUxpc3QuYWRkKG5ldyBTdHJpbmcobmV3\nIGNoYXJbXXsgYywgJ1xcJywgYyB9KSk7DQogICAgICAgICAgICB2YWx1ZUxp\nc3QuYWRkKG5ldyBTdHJpbmcobmV3IGNoYXJbXXsgJ1xcJywgYyB9KSk7DQog\nICAgICAgIH0NCg0KICAgICAgICBTdHJpbmdbXSB2YWx1ZXMgPSAoU3RyaW5n\nW10pIHZhbHVlTGlzdC50b0FycmF5KG5ldyBTdHJpbmdbMF0pOw0KDQogICAg\nICAgIGZpbmFsIFN0cmluZyBkdW1teSA9ICJYWFgiOw0KDQogICAgICAgIGZv\nciAoaW50IGkgPSAwOyBpIDwgdmFsdWVzLmxlbmd0aDsgaSsrKSB7DQogICAg\nICAgICAgICAvLyB0ZXN0IHNwZWNpYWwgY2hhcmFjdGVycyBpbiBlaXRoZXIg\na2V5cyBvciB2YWx1ZXMNCiAgICAgICAgICAgIFN0cmluZyB2YWwgPSB2YWx1\nZSA/IHZhbHVlc1tpXSA6IGR1bW15Ow0KICAgICAgICAgICAgU3RyaW5nIGtl\neSA9IHZhbHVlID8gZHVtbXkgOiB2YWx1ZXNbaV07DQoNCiAgICAgICAgICAg\nIFByb3BlcnRpZXMgcCA9IGZvcm1hdHRpbmdQcm9wcyA/DQogICAgICAgICAg\nICAgICAgbmV3IEZvcm1hdFByZXNlcnZpbmdQcm9wZXJ0aWVzKCkgOiBuZXcg\nUHJvcGVydGllcygpOw0KICAgICAgICAgICAgaWYgKHAgaW5zdGFuY2VvZiBG\nb3JtYXRQcmVzZXJ2aW5nUHJvcGVydGllcykgew0KICAgICAgICAgICAgICAg\nIC8vIHNldCB0aGVzZSBwcm9wZXJ0aWVzIHNvIHdlIGJlaGF2ZSB0aGUgc2Ft\nZSB3YXkgYXMNCiAgICAgICAgICAgICAgICAvLyBqYXZhLnV0aWwuUHJvcGVy\ndGllcw0KICAgICAgICAgICAgICAgICgoRm9ybWF0UHJlc2VydmluZ1Byb3Bl\ncnRpZXMpIHApLnNldERlZmF1bHRFbnRyeURlbGltaXRlcignPScpOw0KICAg\nICAgICAgICAgICAgICgoRm9ybWF0UHJlc2VydmluZ1Byb3BlcnRpZXMpIHAp\nLg0KICAgICAgICAgICAgICAgICAgICBzZXRBZGRXaGl0ZXNwYWNlQWZ0ZXJE\nZWxpbWl0ZXIoZmFsc2UpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAg\nICBwLnNldFByb3BlcnR5KGtleSwgdmFsKTsNCiAgICAgICAgICAgIEJ5dGVB\ncnJheU91dHB1dFN0cmVhbSBvdXQgPSBuZXcgQnl0ZUFycmF5T3V0cHV0U3Ry\nZWFtKCk7DQogICAgICAgICAgICBwLnN0b3JlKG91dCwgbnVsbCk7DQoNCiAg\nICAgICAgICAgIFByb3BlcnRpZXMgY29weSA9IG5ldyBQcm9wZXJ0aWVzKCk7\nDQogICAgICAgICAgICBjb3B5LnNldFByb3BlcnR5KGtleSwgdmFsKTsNCiAg\nICAgICAgICAgIEJ5dGVBcnJheU91dHB1dFN0cmVhbSBjb3B5T3V0ID0gbmV3\nIEJ5dGVBcnJheU91dHB1dFN0cmVhbSgpOw0KICAgICAgICAgICAgY29weS5z\ndG9yZShjb3B5T3V0LCBudWxsKTsNCg0KICAgICAgICAgICAgcCA9IGZvcm1h\ndHRpbmdQcm9wcyA/DQogICAgICAgICAgICAgICAgbmV3IEZvcm1hdFByZXNl\ncnZpbmdQcm9wZXJ0aWVzKCkgOiBuZXcgUHJvcGVydGllcygpOw0KDQogICAg\nICAgICAgICBJbnB1dFN0cmVhbSBpbiA9IG5ldyBCdWZmZXJlZElucHV0U3Ry\nZWFtDQogICAgICAgICAgICAgICAgKG5ldyBCeXRlQXJyYXlJbnB1dFN0cmVh\nbShvdXQudG9CeXRlQXJyYXkoKSkpOw0KDQogICAgICAgICAgICB0cnkgew0K\nICAgICAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSB0aGF0IHRoZSAyIHByb3Bl\ncnRpZXMgc2VyaWFsaXplZCBhcmUgdGhlIHNhbWUNCiAgICAgICAgICAgICAg\nICBTdHJpbmcgY29weU91dFN0cmluZyA9IHN0cmlwQ29tbWVudHMoY29weU91\ndC50b0J5dGVBcnJheSgpKTsNCiAgICAgICAgICAgICAgICBTdHJpbmcgb3V0\nU3RyaW5nID0gc3RyaXBDb21tZW50cyhvdXQudG9CeXRlQXJyYXkoKSk7DQog\nICAgICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKGNvcHlPdXRTdHJpbmcsIG91\ndFN0cmluZyk7DQoNCiAgICAgICAgICAgICAgICBwLmxvYWQoaW4pOw0KDQog\nICAgICAgICAgICAgICAgYXNzZXJ0Tm90TnVsbCgiUHJvcGVydHkgXCIiICsg\na2V5ICsgIlwiIHdhcyBudWxsIiwNCiAgICAgICAgICAgICAgICAgICAgcC5n\nZXRQcm9wZXJ0eShrZXkpKTsNCiAgICAgICAgICAgICAgICBhc3NlcnRFcXVh\nbHModmFsLnRyaW0oKSwgcC5nZXRQcm9wZXJ0eShrZXkpLnRyaW0oKSk7DQog\nICAgICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUgaW9lKSB7DQogICAgICAg\nICAgICAgICAgaWYgKCFmb3JtYXR0aW5nUHJvcHMpDQogICAgICAgICAgICAg\nICAgICAgIHRocm93IGlvZTsNCg0KICAgICAgICAgICAgICAgIC8vIGJ1Zygx\nMjExLCBpb2UsDQogICAgICAgICAgICAgICAgLy8gIkNhbm5vdCBzdG9yZSBi\nYWNrc2xhc2ggaW4gRm9ybWF0UHJlc2VydmluZ1Byb3BlcnRpZXMiKTsNCiAg\nICAgICAgICAgICAgICB0aHJvdyBpb2U7DQogICAgICAgICAgICB9DQogICAg\nICAgIH0NCiAgICB9DQoNCiAgICBzdGF0aWMgQ2hhcmFjdGVyIHJhbmRvbUNo\nYXIoKSB7DQogICAgICAgIGNoYXIgW10gVEVTVF9DSEFSX0FSUkFZID0gbmV3\nIGNoYXIgW117DQogICAgICAgICAgICAnYScsICdiJywgJ2MnLCAnZCcsICdl\nJywgJ2YnLCAnZycsICdoJywgJ2knLA0KICAgICAgICAgICAgJ2onLCAnaycs\nICdsJywgJ20nLCAnbicsICdvJywgJ3AnLCAncScsICdyJywNCiAgICAgICAg\nICAgICdzJywgJ3QnLCAndScsICd2JywgJ3cnLCAneCcsICd5JywgJ3onLCAn\nMScsDQogICAgICAgICAgICAnMicsICczJywgJzQnLCAnNScsICc2JywgJzcn\nLCAnOCcsICc5JyB9Ow0KDQogICAgICAgIHJldHVybiBuZXcgQ2hhcmFjdGVy\nKFRFU1RfQ0hBUl9BUlJBWVsNCiAgICAgICAgICAgIChpbnQpIChNYXRoLnJh\nbmRvbSgpICogVEVTVF9DSEFSX0FSUkFZLmxlbmd0aCldKTsNCiAgICB9DQoN\nCiAgICBzdGF0aWMgU3RyaW5nIHJhbmRvbVN0cmluZyhpbnQgbGVuKSB7DQog\nICAgICAgIFN0cmluZ0J1ZmZlciBidWYgPSBuZXcgU3RyaW5nQnVmZmVyKCk7\nDQogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgKGludCkgKE1hdGgucmFu\nZG9tKCkgKiBsZW4pICsgMTsgaSsrKQ0KICAgICAgICAgICAgYnVmLmFwcGVu\nZChyYW5kb21DaGFyKCkpOw0KICAgICAgICByZXR1cm4gYnVmLnRvU3RyaW5n\nKCk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdEVxdWl2YWxlbnRT\ndG9yZSgpIHRocm93cyBJT0V4Y2VwdGlvbiB7DQogICAgICAgIFByb3BlcnRp\nZXMgcDEgPSBuZXcgUHJvcGVydGllcygpOw0KICAgICAgICBGb3JtYXRQcmVz\nZXJ2aW5nUHJvcGVydGllcyBwMiA9IG5ldyBGb3JtYXRQcmVzZXJ2aW5nUHJv\ncGVydGllcygpOw0KDQogICAgICAgICgoRm9ybWF0UHJlc2VydmluZ1Byb3Bl\ncnRpZXMpIHAyKS5zZXREZWZhdWx0RW50cnlEZWxpbWl0ZXIoJz0nKTsNCiAg\nICAgICAgKChGb3JtYXRQcmVzZXJ2aW5nUHJvcGVydGllcykgcDIpLnNldEFk\nZFdoaXRlc3BhY2VBZnRlckRlbGltaXRlcihmYWxzZSk7DQoNCiAgICAgICAg\nU3RyaW5nW10gdmFsdWVzID0NCiAgICAgICAgICAgIG5ldyBTdHJpbmdbXSB7\nIA0KICAgICAgICAgICAgICAgICJ4IiwgDQogICAgICAgICAgICAgICAgIngi\nICsgTFMgKyAieSIsIA0KICAgICAgICAgICAgICAgICJ4XFxueSIsIA0KICAg\nICAgICAgICAgICAgICJ4XHR5IiwgDQogICAgICAgICAgICAgICAgInhcXHR5\nIiwNCiAgICAgICAgICAgICAgICAieFxmeSIsIA0KICAgICAgICAgICAgICAg\nICJ4XFxmeSIsIA0KICAgICAgICAgICAgICAgICJ4XHJ5IiwgDQogICAgICAg\nICAgICAgICAgInhcXHJ5IiwgDQogICAgICAgICAgICAgICAgIkM6XFxGb28g\nQmFyXFxCYXoiLA0KICAgICAgICAgICAgICAgIHJhbmRvbVN0cmluZyg1KS5y\nZXBsYWNlKCdhJywgJ1xcJyksDQogICAgICAgICAgICAgICAgcmFuZG9tU3Ry\naW5nKDUwMCkucmVwbGFjZSgnYScsICdcXCcpLA0KICAgICAgICAgICAgICAg\nIHJhbmRvbVN0cmluZyg1MDAwKS5yZXBsYWNlKCdhJywgJ1xcJyksIA0KICAg\nICAgICAgICAgICAgIH07DQoNCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkg\nPCB2YWx1ZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIHAxLmNsZWFy\nKCk7DQogICAgICAgICAgICBwMi5jbGVhcigpOw0KDQogICAgICAgICAgICBw\nMS5zZXRQcm9wZXJ0eSgieHh4IiwgdmFsdWVzW2ldKTsNCiAgICAgICAgICAg\nIHAyLnNldFByb3BlcnR5KCJ4eHgiLCB2YWx1ZXNbaV0pOw0KDQogICAgICAg\nICAgICBCeXRlQXJyYXlPdXRwdXRTdHJlYW0gb3V0MSA9IG5ldyBCeXRlQXJy\nYXlPdXRwdXRTdHJlYW0oKTsNCiAgICAgICAgICAgIEJ5dGVBcnJheU91dHB1\ndFN0cmVhbSBvdXQyID0gbmV3IEJ5dGVBcnJheU91dHB1dFN0cmVhbSgpOw0K\nDQogICAgICAgICAgICBwMS5zdG9yZShvdXQxLCBudWxsKTsNCiAgICAgICAg\nICAgIHAyLnN0b3JlKG91dDIsIG51bGwpOw0KDQogICAgICAgICAgICBTdHJp\nbmcgczEgPSBuZXcgU3RyaW5nKG91dDEudG9CeXRlQXJyYXkoKSk7DQogICAg\nICAgICAgICBTdHJpbmcgczIgPSBuZXcgU3RyaW5nKG91dDIudG9CeXRlQXJy\nYXkoKSk7DQoNCiAgICAgICAgICAgIGFzc2VydFRydWUoIkV4cGVjdGVkIDwi\nICsgczEgKyAiPiBidXQgd2FzIDwiICsgczIgKyAiPiIsDQogICAgICAgICAg\nICAgICAgczEuaW5kZXhPZihzMikgIT0gLTEpOw0KICAgICAgICB9DQogICAg\nfQ0KDQogICAgc3RhdGljIFN0cmluZyBzdHJpcENvbW1lbnRzKGJ5dGVbXSBi\neXRlcykgdGhyb3dzIElPRXhjZXB0aW9uIHsNCiAgICAgICAgQnVmZmVyZWRS\nZWFkZXIgcmVhZGVyID0gbmV3IEJ1ZmZlcmVkUmVhZGVyKG5ldyBJbnB1dFN0\ncmVhbVJlYWRlcg0KICAgICAgICAgICAgKG5ldyBCeXRlQXJyYXlJbnB1dFN0\ncmVhbShieXRlcykpKTsNCiAgICAgICAgU3RyaW5nQnVmZmVyIHNidWYgPSBu\nZXcgU3RyaW5nQnVmZmVyKCk7DQogICAgICAgIFN0cmluZyBsaW5lOw0KICAg\nICAgICB3aGlsZSAoKGxpbmUgPSByZWFkZXIucmVhZExpbmUoKSkgIT0gbnVs\nbCkgew0KICAgICAgICAgICAgLy8gc2tpcCBjb21tZW50cw0KICAgICAgICAg\nICAgaWYgKGxpbmUudHJpbSgpLnN0YXJ0c1dpdGgoIiMiKSkNCiAgICAgICAg\nICAgICAgICBjb250aW51ZTsNCg0KICAgICAgICAgICAgc2J1Zi5hcHBlbmQo\nbGluZSk7DQogICAgICAgICAgICBzYnVmLmFwcGVuZChMUyk7DQogICAgICAg\nIH0NCg0KICAgICAgICByZXR1cm4gc2J1Zi50b1N0cmluZygpOw0KICAgIH0N\nCg0KICAgIHB1YmxpYyB2b2lkIHRlc3REdXBsaWNhdGVQcm9wZXJ0aWVzKCkg\ndGhyb3dzIElPRXhjZXB0aW9uIHsNCiAgICAgICAgRm9ybWF0UHJlc2Vydmlu\nZ1Byb3BlcnRpZXMgcCA9IG5ldyBGb3JtYXRQcmVzZXJ2aW5nUHJvcGVydGll\ncygpOw0KICAgICAgICB0cnkgew0KICAgICAgICAgICAgdG9Qcm9wZXJ0aWVz\nKCJmb289YmFyIiArIExTICsgImZvbz1iYXoiLCBwKTsNCiAgICAgICAgICAg\nIGZhaWwoImV4cGVjdGVkIGR1cGxpY2F0ZSBrZXlzIHRvIGNhdXNlIGV4Y2Vw\ndGlvbiIpOw0KICAgICAgICB9IGNhdGNoIChEdXBsaWNhdGVLZXlFeGNlcHRp\nb24gZSkgew0KICAgICAgICAgICAgLy8gZXhwZWN0ZWQNCiAgICAgICAgfQ0K\nDQogICAgICAgIC8vIG5vdyB0ZXN0IHRoZSBleHBlY3RlZCBiZWhhdmlvciB3\naGVuIGR1cGxpY2F0ZXMgYXJlIGFsbG93ZWQuDQogICAgICAgIHAgPSBuZXcg\nRm9ybWF0UHJlc2VydmluZ1Byb3BlcnRpZXMoKTsNCiAgICAgICAgcC5zZXRB\nbGxvd0R1cGxpY2F0ZXModHJ1ZSk7DQogICAgICAgIHRvUHJvcGVydGllcygi\nZm9vPWJhciIgKyBMUyArICJmb289YmF6IiwgcCk7DQogICAgICAgIGFzc2Vy\ndFByb3BlcnRpZXMobmV3IFN0cmluZ1tdW117IHsgImZvbyIsICJiYXoiIH0g\nfSwgcCk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdE11bHRpcGxl\nTG9hZHMoKSB0aHJvd3MgSU9FeGNlcHRpb24gew0KICAgICAgICBTdHJpbmcg\ncHJvcHMgPSAiZm9vPWJhciIgKyBMUyArICJiYXo9cXV1eCI7DQogICAgICAg\nIFN0cmluZyBwcm9wczIgPSAiYT1iIiArIExTICsgImM9ZCI7DQogICAgICAg\nIFByb3BlcnRpZXMgdmFuaWxsYSA9IG5ldyBQcm9wZXJ0aWVzKCk7DQogICAg\nICAgIHZhbmlsbGEubG9hZChuZXcgQnVmZmVyZWRJbnB1dFN0cmVhbQ0KICAg\nICAgICAgICAgKG5ldyBTdHJpbmdCdWZmZXJJbnB1dFN0cmVhbShwcm9wcykp\nKTsNCiAgICAgICAgdmFuaWxsYS5sb2FkKG5ldyBCdWZmZXJlZElucHV0U3Ry\nZWFtDQogICAgICAgICAgICAobmV3IFN0cmluZ0J1ZmZlcklucHV0U3RyZWFt\nKHByb3BzMikpKTsNCg0KICAgICAgICBQcm9wZXJ0aWVzIHAgPSBuZXcgRm9y\nbWF0UHJlc2VydmluZ1Byb3BlcnRpZXMoKTsNCiAgICAgICAgcC5sb2FkKG5l\ndyBCdWZmZXJlZElucHV0U3RyZWFtKG5ldyBTdHJpbmdCdWZmZXJJbnB1dFN0\ncmVhbShwcm9wcykpKTsNCiAgICAgICAgcC5sb2FkKG5ldyBCdWZmZXJlZElu\ncHV0U3RyZWFtKG5ldyBTdHJpbmdCdWZmZXJJbnB1dFN0cmVhbShwcm9wczIp\nKSk7DQogICAgICAgIGFzc2VydFByb3BlcnRpZXNTYW1lKHZhbmlsbGEsIHAp\nOw0KICAgIH0NCg0KICAgIHByb3RlY3RlZCBGb3JtYXRQcmVzZXJ2aW5nUHJv\ncGVydGllcyB0b1Byb3BlcnRpZXMoU3RyaW5nIHMpDQogICAgICAgIHRocm93\ncyBJT0V4Y2VwdGlvbiB7DQogICAgICAgIHJldHVybiB0b1Byb3BlcnRpZXMo\ncywgbmV3IEZvcm1hdFByZXNlcnZpbmdQcm9wZXJ0aWVzKCkpOw0KICAgIH0N\nCg0KICAgIHByb3RlY3RlZCBGb3JtYXRQcmVzZXJ2aW5nUHJvcGVydGllcyB0\nb1Byb3BlcnRpZXMoU3RyaW5nIHMsDQogICAgICAgIEZvcm1hdFByZXNlcnZp\nbmdQcm9wZXJ0aWVzIHApIHRocm93cyBJT0V4Y2VwdGlvbiB7DQogICAgICAg\nIFByb3BlcnRpZXMgdmFuaWxsYSA9IG5ldyBQcm9wZXJ0aWVzKCk7DQogICAg\nICAgIHZhbmlsbGEubG9hZChuZXcgU3RyaW5nQnVmZmVySW5wdXRTdHJlYW0o\ncykpOw0KDQogICAgICAgIHAubG9hZChuZXcgU3RyaW5nQnVmZmVySW5wdXRT\ndHJlYW0ocykpOw0KICAgICAgICBhc3NlcnRSb3VuZFRyaXAocywgcCk7DQoN\nCiAgICAgICAgYXNzZXJ0UHJvcGVydGllc1NhbWUodmFuaWxsYSwgcCk7DQoN\nCiAgICAgICAgcmV0dXJuIHA7DQogICAgfQ0KDQogICAgcHJpdmF0ZSB2b2lk\nIGFzc2VydFJvdW5kVHJpcChTdHJpbmcgcywgUHJvcGVydGllcyBwKSB0aHJv\nd3MgSU9FeGNlcHRpb24gew0KICAgICAgICBCeXRlQXJyYXlPdXRwdXRTdHJl\nYW0gb3V0ID0gbmV3IEJ5dGVBcnJheU91dHB1dFN0cmVhbSgpOw0KICAgICAg\nICBwLnN0b3JlKG91dCwgbnVsbCk7DQogICAgICAgIGFzc2VydEVxdWFscyhz\nLCBvdXQudG9TdHJpbmcoKSk7DQoNCiAgICAgICAgLy8gYWxzbyBjaGVjayBz\nZXJpYWxpemFibGUNCiAgICAgICAgQnl0ZUFycmF5T3V0cHV0U3RyZWFtIGJv\ndXQgPSBuZXcgQnl0ZUFycmF5T3V0cHV0U3RyZWFtKCk7DQogICAgICAgIG5l\ndyBPYmplY3RPdXRwdXRTdHJlYW0oYm91dCkud3JpdGVPYmplY3QocCk7DQoN\nCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIEZvcm1hdFByZXNlcnZpbmdQ\ncm9wZXJ0aWVzIGRlc2VyaWFsaXplZCA9DQogICAgICAgICAgICAgICAgKEZv\ncm1hdFByZXNlcnZpbmdQcm9wZXJ0aWVzKSBuZXcgT2JqZWN0SW5wdXRTdHJl\nYW0NCiAgICAgICAgICAgICAgICAgICAgKG5ldyBCeXRlQXJyYXlJbnB1dFN0\ncmVhbShib3V0LnRvQnl0ZUFycmF5KCkpKS4NCiAgICAgICAgICAgICAgICAg\nICAgcmVhZE9iamVjdCgpOw0KICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKHAs\nIGRlc2VyaWFsaXplZCk7DQoNCiAgICAgICAgICAgIG91dCA9IG5ldyBCeXRl\nQXJyYXlPdXRwdXRTdHJlYW0oKTsNCiAgICAgICAgICAgIGRlc2VyaWFsaXpl\nZC5zdG9yZShvdXQsIG51bGwpOw0KICAgICAgICAgICAgYXNzZXJ0RXF1YWxz\nKHMsIG91dC50b1N0cmluZygpKTsNCiAgICAgICAgfSBjYXRjaCAoQ2xhc3NO\nb3RGb3VuZEV4Y2VwdGlvbiBjbmZlKSB7DQogICAgICAgICAgICBmYWlsKGNu\nZmUgKyAiIik7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwdWJsaWMgc3Rh\ndGljIHZvaWQgYXNzZXJ0RXF1YWxzKFN0cmluZyBleHBlY3RlZCwgU3RyaW5n\nIGFjdHVhbCkgew0KICAgICAgICBpZiAoZXhwZWN0ZWQgPT0gYWN0dWFsKQ0K\nICAgICAgICAgICAgcmV0dXJuOw0KDQogICAgICAgIGlmIChleHBlY3RlZCA9\nPSBudWxsIHx8ICFleHBlY3RlZC5lcXVhbHMoYWN0dWFsKSkNCiAgICAgICAg\nICAgIGZhaWwoIkV4cGVjdGVkIDwiICsgZXhwZWN0ZWQgKyAiPiBidXQgd2Fz\nIDwiICsgYWN0dWFsICsgIj4iKTsNCiAgICB9DQoNCiAgICBwcml2YXRlIHZv\naWQgYXNzZXJ0UHJvcGVydGllc1NhbWUoUHJvcGVydGllcyB2YW5pbGxhLCBQ\ncm9wZXJ0aWVzIHApIHsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKHZhbmlsbGEs\nIHApOw0KICAgIH0NCg0KICAgIHByb3RlY3RlZCB2b2lkIGFzc2VydFByb3Bl\ncnRpZXMoU3RyaW5nW11bXSBzdHJpbmdzLCBQcm9wZXJ0aWVzIHApIHsNCiAg\nICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzdHJpbmdzLmxlbmd0aDsgaSsr\nKQ0KICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKHN0cmluZ3NbaV1bMV0sIHAu\nZ2V0KHN0cmluZ3NbaV1bMF0pKTsNCg0KICAgICAgICBhc3NlcnRFcXVhbHMo\nc3RyaW5ncy5sZW5ndGgsIHAuc2l6ZSgpKTsNCiAgICB9DQp9DQo=\n","encoding":"base64"}

