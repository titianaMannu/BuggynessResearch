{"sha":"6a9da83ccd2f635e1bba943d28a2e1793eac1097","node_id":"MDQ6QmxvYjIwNjM2NDo2YTlkYTgzY2NkMmY2MzVlMWJiYTk0M2QyOGEyZTE3OTNlYWMxMDk3","size":29628,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/6a9da83ccd2f635e1bba943d28a2e1793eac1097","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5wZXJzaXN0ZW5jZTsKCmltcG9ydCBqYXZhLmxhbmcucmVmbGVj\ndC5BcnJheTsKaW1wb3J0IGphdmEudXRpbC5BcnJheXM7CmltcG9ydCBqYXZh\nLnV0aWwuQ29sbGVjdGlvbjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVu\ndGl0eU1hbmFnZXI7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlU\ncmFuc2FjdGlvbjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkZsdXNoTW9k\nZVR5cGU7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5Mb2NrTW9kZVR5cGU7\nCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5RdWVyeTsKaW1wb3J0IGphdmF4\nLnJlc291cmNlLlJlc291cmNlRXhjZXB0aW9uOwppbXBvcnQgamF2YXgucmVz\nb3VyY2UuY2NpLkNvbm5lY3Rpb25NZXRhRGF0YTsKaW1wb3J0IGphdmF4LnJl\nc291cmNlLmNjaS5JbnRlcmFjdGlvbjsKaW1wb3J0IGphdmF4LnJlc291cmNl\nLmNjaS5Mb2NhbFRyYW5zYWN0aW9uOwppbXBvcnQgamF2YXgucmVzb3VyY2Uu\nY2NpLlJlc3VsdFNldEluZm87CgppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25z\nLmxhbmcuU3RyaW5nVXRpbHM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nY29uZi5PcGVuSlBBQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5lZS5NYW5hZ2VkUnVudGltZTsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5rZXJuZWwuQnJva2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmtlcm5lbC5EZWxlZ2F0aW5nQnJva2VyOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmtlcm5lbC5GaW5kQ2FsbGJhY2tzOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmtlcm5lbC5Mb2NrTGV2ZWxzOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmtlcm5lbC5PcENhbGxiYWNrczsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5rZXJuZWwuT3BlbkpQQVN0YXRlTWFuYWdlcjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuUXVlcnlGbHVzaE1vZGVz\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5RdWVyeUxhbmd1\nYWdlczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuU2VxOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5qcHFsLkpQUUxQYXJz\nZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxp\nemVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuQ2xhc3NNZXRh\nRGF0YTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkZpZWxkTWV0\nYURhdGE7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5RdWVyeU1l\ndGFEYXRhOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuU2VxdWVu\nY2VNZXRhRGF0YTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLkV4\nY2VwdGlvbnM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5JbXBs\nSGVscGVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuUnVudGlt\nZUV4Y2VwdGlvblRyYW5zbGF0b3I7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEudXRpbC5Vc2VyRXhjZXB0aW9uOwoKLyoqCiAqIEltcGxlbWVudGF0aW9u\nIG9mIHtAbGluayBFbnRpdHlNYW5hZ2VyfSBpbnRlcmZhY2UuCiAqCiAqIEBh\ndXRob3IgUGF0cmljayBMaW5za2V5CiAqIEBhdXRob3IgQWJlIFdoaXRlCiAq\nIEBub2phdmFkb2MKICovCnB1YmxpYyBjbGFzcyBFbnRpdHlNYW5hZ2VySW1w\nbAogICAgaW1wbGVtZW50cyBPcGVuSlBBRW50aXR5TWFuYWdlciwgRmluZENh\nbGxiYWNrcywgT3BDYWxsYmFja3MgewoKICAgIHByaXZhdGUgc3RhdGljIGZp\nbmFsIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVyLmZvclBhY2thZ2UKICAg\nICAgICAoRW50aXR5TWFuYWdlckltcGwuY2xhc3MpOwoKICAgIHByaXZhdGUg\nZmluYWwgRGVsZWdhdGluZ0Jyb2tlciBfYnJva2VyOwogICAgcHJpdmF0ZSBm\naW5hbCBFbnRpdHlNYW5hZ2VyRmFjdG9yeUltcGwgX2VtZjsKICAgIHByaXZh\ndGUgRmV0Y2hQbGFuIF9mZXRjaCA9IG51bGw7CgogICAgLyoqCiAgICAgKiBD\nb25zdHJ1Y3Rvcjsgc3VwcGx5IGZhY3RvcnkgYW5kIGRlbGVnYXRlLgogICAg\nICovCiAgICBwdWJsaWMgRW50aXR5TWFuYWdlckltcGwoRW50aXR5TWFuYWdl\nckZhY3RvcnlJbXBsIGZhY3RvcnksCiAgICAgICAgQnJva2VyIGJyb2tlcikg\newogICAgICAgIF9lbWYgPSBmYWN0b3J5OwogICAgICAgIFJ1bnRpbWVFeGNl\ncHRpb25UcmFuc2xhdG9yIHRyYW5zbGF0b3IgPQogICAgICAgICAgICBQZXJz\naXN0ZW5jZUV4Y2VwdGlvbnMuZ2V0Um9sbGJhY2tUcmFuc2xhdG9yKHRoaXMp\nOwogICAgICAgIF9icm9rZXIgPSBuZXcgRGVsZWdhdGluZ0Jyb2tlcihicm9r\nZXIsIHRyYW5zbGF0b3IpOwogICAgICAgIF9icm9rZXIuc2V0SW1wbGljaXRC\nZWhhdmlvcih0aGlzLCB0cmFuc2xhdG9yKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIEJyb2tlciBkZWxlZ2F0ZS4KICAgICAqLwogICAgcHVibGljIEJyb2tl\nciBnZXRCcm9rZXIoKSB7CiAgICAgICAgcmV0dXJuIF9icm9rZXIuZ2V0RGVs\nZWdhdGUoKTsKICAgIH0KCiAgICBwdWJsaWMgQ29ubmVjdGlvbk1ldGFEYXRh\nIGdldE1ldGFEYXRhKCkKICAgICAgICB0aHJvd3MgUmVzb3VyY2VFeGNlcHRp\nb24gewogICAgICAgIHJldHVybiBfYnJva2VyLmdldE1ldGFEYXRhKCk7CiAg\nICB9CgogICAgcHVibGljIEludGVyYWN0aW9uIGNyZWF0ZUludGVyYWN0aW9u\nKCkKICAgICAgICB0aHJvd3MgUmVzb3VyY2VFeGNlcHRpb24gewogICAgICAg\nIHJldHVybiBfYnJva2VyLmNyZWF0ZUludGVyYWN0aW9uKCk7CiAgICB9Cgog\nICAgcHVibGljIExvY2FsVHJhbnNhY3Rpb24gZ2V0TG9jYWxUcmFuc2FjdGlv\nbigpCiAgICAgICAgdGhyb3dzIFJlc291cmNlRXhjZXB0aW9uIHsKICAgICAg\nICByZXR1cm4gdGhpczsKICAgIH0KCiAgICBwdWJsaWMgUmVzdWx0U2V0SW5m\nbyBnZXRSZXN1bHRTZXRJbmZvKCkKICAgICAgICB0aHJvd3MgUmVzb3VyY2VF\neGNlcHRpb24gewogICAgICAgIHJldHVybiBfYnJva2VyLmdldFJlc3VsdFNl\ndEluZm8oKTsKICAgIH0KCiAgICBwdWJsaWMgT3BlbkpQQUVudGl0eU1hbmFn\nZXJGYWN0b3J5IGdldEVudGl0eU1hbmFnZXJGYWN0b3J5KCkgewogICAgICAg\nIHJldHVybiBfZW1mOwogICAgfQoKICAgIHB1YmxpYyBPcGVuSlBBQ29uZmln\ndXJhdGlvbiBnZXRDb25maWd1cmF0aW9uKCkgewogICAgICAgIHJldHVybiBf\nYnJva2VyLmdldENvbmZpZ3VyYXRpb24oKTsKICAgIH0KCiAgICBwdWJsaWMg\nRmV0Y2hQbGFuIGdldEZldGNoUGxhbigpIHsKICAgICAgICBfYnJva2VyLmxv\nY2soKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBpZiAoX2ZldGNoID09\nIG51bGwpCiAgICAgICAgICAgICAgICBfZmV0Y2ggPSBfZW1mLnRvRmV0Y2hQ\nbGFuKF9icm9rZXIsIAogICAgICAgICAgICAgICAgICAgIF9icm9rZXIuZ2V0\nRmV0Y2hDb25maWd1cmF0aW9uKCkpOwogICAgICAgICAgICByZXR1cm4gX2Zl\ndGNoOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIF9icm9rZXIu\ndW5sb2NrKCk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBpbnQgZ2V0\nQ29ubmVjdGlvblJldGFpbk1vZGUoKSB7CiAgICAgICAgcmV0dXJuIF9icm9r\nZXIuZ2V0Q29ubmVjdGlvblJldGFpbk1vZGUoKTsKICAgIH0KCiAgICBwdWJs\naWMgYm9vbGVhbiBpc01hbmFnZWQoKSB7CiAgICAgICAgcmV0dXJuIF9icm9r\nZXIuaXNNYW5hZ2VkKCk7CiAgICB9CgogICAgcHVibGljIE1hbmFnZWRSdW50\naW1lIGdldE1hbmFnZWRSdW50aW1lKCkgewogICAgICAgIHJldHVybiBfYnJv\na2VyLmdldE1hbmFnZWRSdW50aW1lKCk7CiAgICB9CgogICAgcHVibGljIGJv\nb2xlYW4gZ2V0U3luY1dpdGhNYW5hZ2VkVHJhbnNhY3Rpb25zKCkgewogICAg\nICAgIHJldHVybiBfYnJva2VyLmdldFN5bmNXaXRoTWFuYWdlZFRyYW5zYWN0\naW9ucygpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldFN5bmNXaXRoTWFu\nYWdlZFRyYW5zYWN0aW9ucyhib29sZWFuIHN5bmMpIHsKICAgICAgICBfYnJv\na2VyLnNldFN5bmNXaXRoTWFuYWdlZFRyYW5zYWN0aW9ucyhzeW5jKTsKICAg\nIH0KCiAgICBwdWJsaWMgQ2xhc3NMb2FkZXIgZ2V0Q2xhc3NMb2FkZXIoKSB7\nCiAgICAgICAgcmV0dXJuIF9icm9rZXIuZ2V0Q2xhc3NMb2FkZXIoKTsKICAg\nIH0KCiAgICBwdWJsaWMgU3RyaW5nIGdldENvbm5lY3Rpb25Vc2VyTmFtZSgp\nIHsKICAgICAgICByZXR1cm4gX2Jyb2tlci5nZXRDb25uZWN0aW9uVXNlck5h\nbWUoKTsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nIGdldENvbm5lY3Rpb25Q\nYXNzd29yZCgpIHsKICAgICAgICByZXR1cm4gX2Jyb2tlci5nZXRDb25uZWN0\naW9uUGFzc3dvcmQoKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBnZXRN\ndWx0aXRocmVhZGVkKCkgewogICAgICAgIHJldHVybiBfYnJva2VyLmdldE11\nbHRpdGhyZWFkZWQoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRNdWx0\naXRocmVhZGVkKGJvb2xlYW4gbXVsdGl0aHJlYWRlZCkgewogICAgICAgIF9i\ncm9rZXIuc2V0TXVsdGl0aHJlYWRlZChtdWx0aXRocmVhZGVkKTsKICAgIH0K\nCiAgICBwdWJsaWMgYm9vbGVhbiBnZXRJZ25vcmVDaGFuZ2VzKCkgewogICAg\nICAgIHJldHVybiBfYnJva2VyLmdldElnbm9yZUNoYW5nZXMoKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBzZXRJZ25vcmVDaGFuZ2VzKGJvb2xlYW4gdmFs\nKSB7CiAgICAgICAgX2Jyb2tlci5zZXRJZ25vcmVDaGFuZ2VzKHZhbCk7CiAg\nICB9CgogICAgcHVibGljIGJvb2xlYW4gZ2V0Tm9udHJhbnNhY3Rpb25hbFJl\nYWQoKSB7CiAgICAgICAgcmV0dXJuIF9icm9rZXIuZ2V0Tm9udHJhbnNhY3Rp\nb25hbFJlYWQoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXROb250cmFu\nc2FjdGlvbmFsUmVhZChib29sZWFuIHZhbCkgewogICAgICAgIF9icm9rZXIu\nc2V0Tm9udHJhbnNhY3Rpb25hbFJlYWQodmFsKTsKICAgIH0KCiAgICBwdWJs\naWMgYm9vbGVhbiBnZXROb250cmFuc2FjdGlvbmFsV3JpdGUoKSB7CiAgICAg\nICAgcmV0dXJuIF9icm9rZXIuZ2V0Tm9udHJhbnNhY3Rpb25hbFdyaXRlKCk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0Tm9udHJhbnNhY3Rpb25hbFdy\naXRlKGJvb2xlYW4gdmFsKSB7CiAgICAgICAgX2Jyb2tlci5zZXROb250cmFu\nc2FjdGlvbmFsV3JpdGUodmFsKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVh\nbiBnZXRPcHRpbWlzdGljKCkgewogICAgICAgIHJldHVybiBfYnJva2VyLmdl\ndE9wdGltaXN0aWMoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRPcHRp\nbWlzdGljKGJvb2xlYW4gdmFsKSB7CiAgICAgICAgX2Jyb2tlci5zZXRPcHRp\nbWlzdGljKHZhbCk7CiAgICB9CgogICAgcHVibGljIGludCBnZXRSZXN0b3Jl\nU3RhdGUoKSB7CiAgICAgICAgcmV0dXJuIF9icm9rZXIuZ2V0UmVzdG9yZVN0\nYXRlKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0UmVzdG9yZVN0YXRl\nKGludCB2YWwpIHsKICAgICAgICBfYnJva2VyLnNldFJlc3RvcmVTdGF0ZSh2\nYWwpOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGdldFJldGFpblN0YXRl\nKCkgewogICAgICAgIHJldHVybiBfYnJva2VyLmdldFJldGFpblN0YXRlKCk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0UmV0YWluU3RhdGUoYm9vbGVh\nbiB2YWwpIHsKICAgICAgICBfYnJva2VyLnNldFJldGFpblN0YXRlKHZhbCk7\nCiAgICB9CgogICAgcHVibGljIGludCBnZXRBdXRvQ2xlYXIoKSB7CiAgICAg\nICAgcmV0dXJuIF9icm9rZXIuZ2V0QXV0b0NsZWFyKCk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgc2V0QXV0b0NsZWFyKGludCB2YWwpIHsKICAgICAgICBf\nYnJva2VyLnNldEF1dG9DbGVhcih2YWwpOwogICAgfQoKICAgIHB1YmxpYyBp\nbnQgZ2V0RGV0YWNoU3RhdGUoKSB7CiAgICAgICAgcmV0dXJuIF9icm9rZXIu\nZ2V0RGV0YWNoU3RhdGUoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRE\nZXRhY2hTdGF0ZShpbnQgbW9kZSkgewogICAgICAgIF9icm9rZXIuc2V0RGV0\nYWNoU3RhdGUobW9kZSk7CiAgICB9CgogICAgcHVibGljIGludCBnZXRBdXRv\nRGV0YWNoKCkgewogICAgICAgIHJldHVybiBfYnJva2VyLmdldEF1dG9EZXRh\nY2goKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRBdXRvRGV0YWNoKGlu\ndCBmbGFncykgewogICAgICAgIF9icm9rZXIuc2V0QXV0b0RldGFjaChmbGFn\ncyk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0QXV0b0RldGFjaChpbnQg\nZmxhZywgYm9vbGVhbiBvbikgewogICAgICAgIF9icm9rZXIuc2V0QXV0b0Rl\ndGFjaChmbGFnLCBvbik7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gZ2V0\nRXZpY3RGcm9tU3RvcmVDYWNoZSgpIHsKICAgICAgICByZXR1cm4gX2Jyb2tl\nci5nZXRFdmljdEZyb21EYXRhQ2FjaGUoKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBzZXRFdmljdEZyb21TdG9yZUNhY2hlKGJvb2xlYW4gZXZpY3QpIHsK\nICAgICAgICBfYnJva2VyLnNldEV2aWN0RnJvbURhdGFDYWNoZShldmljdCk7\nCiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gZ2V0UG9wdWxhdGVTdG9yZUNh\nY2hlKCkgewogICAgICAgIHJldHVybiBfYnJva2VyLmdldFBvcHVsYXRlRGF0\nYUNhY2hlKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0UG9wdWxhdGVT\ndG9yZUNhY2hlKGJvb2xlYW4gY2FjaGUpIHsKICAgICAgICBfYnJva2VyLnNl\ndFBvcHVsYXRlRGF0YUNhY2hlKGNhY2hlKTsKICAgIH0KCiAgICBwdWJsaWMg\nYm9vbGVhbiBpc0xhcmdlVHJhbnNhY3Rpb24oKSB7CiAgICAgICAgcmV0dXJu\nIF9icm9rZXIuaXNMYXJnZVRyYW5zYWN0aW9uKCk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgc2V0TGFyZ2VUcmFuc2FjdGlvbihib29sZWFuIGxhcmdlVHJh\nbnNhY3Rpb24pIHsKICAgICAgICBfYnJva2VyLnNldExhcmdlVHJhbnNhY3Rp\nb24obGFyZ2VUcmFuc2FjdGlvbik7CiAgICB9CgogICAgcHVibGljIE9iamVj\ndCBnZXRVc2VyT2JqZWN0KE9iamVjdCBrZXkpIHsKICAgICAgICByZXR1cm4g\nX2Jyb2tlci5nZXRVc2VyT2JqZWN0KGtleSk7CiAgICB9CgogICAgcHVibGlj\nIE9iamVjdCBwdXRVc2VyT2JqZWN0KE9iamVjdCBrZXksIE9iamVjdCB2YWwp\nIHsKICAgICAgICByZXR1cm4gX2Jyb2tlci5wdXRVc2VyT2JqZWN0KGtleSwg\ndmFsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBhZGRUcmFuc2FjdGlvbkxp\nc3RlbmVyKE9iamVjdCBsaXN0ZW5lcikgewogICAgICAgIF9icm9rZXIuYWRk\nVHJhbnNhY3Rpb25MaXN0ZW5lcihsaXN0ZW5lcik7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgcmVtb3ZlVHJhbnNhY3Rpb25MaXN0ZW5lcihPYmplY3QgbGlz\ndGVuZXIpIHsKICAgICAgICBfYnJva2VyLnJlbW92ZVRyYW5zYWN0aW9uTGlz\ndGVuZXIobGlzdGVuZXIpOwogICAgfQoKICAgIHB1YmxpYyBpbnQgZ2V0VHJh\nbnNhY3Rpb25MaXN0ZW5lckNhbGxiYWNrTW9kZSgpIHsKICAgICAgICByZXR1\ncm4gX2Jyb2tlci5nZXRUcmFuc2FjdGlvbkxpc3RlbmVyQ2FsbGJhY2tNb2Rl\nKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0VHJhbnNhY3Rpb25MaXN0\nZW5lckNhbGxiYWNrTW9kZShpbnQgbW9kZSkgewogICAgICAgIF9icm9rZXIu\nc2V0VHJhbnNhY3Rpb25MaXN0ZW5lckNhbGxiYWNrTW9kZShtb2RlKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBhZGRMaWZlY3ljbGVMaXN0ZW5lcihPYmpl\nY3QgbGlzdGVuZXIsIENsYXNzLi4uIGNsYXNzZXMpIHsKICAgICAgICBfYnJv\na2VyLmFkZExpZmVjeWNsZUxpc3RlbmVyKGxpc3RlbmVyLCBjbGFzc2VzKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCByZW1vdmVMaWZlY3ljbGVMaXN0ZW5l\ncihPYmplY3QgbGlzdGVuZXIpIHsKICAgICAgICBfYnJva2VyLnJlbW92ZUxp\nZmVjeWNsZUxpc3RlbmVyKGxpc3RlbmVyKTsKICAgIH0KCiAgICBwdWJsaWMg\naW50IGdldExpZmVjeWNsZUxpc3RlbmVyQ2FsbGJhY2tNb2RlKCkgewogICAg\nICAgIHJldHVybiBfYnJva2VyLmdldExpZmVjeWNsZUxpc3RlbmVyQ2FsbGJh\nY2tNb2RlKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0TGlmZWN5Y2xl\nTGlzdGVuZXJDYWxsYmFja01vZGUoaW50IG1vZGUpIHsKICAgICAgICBfYnJv\na2VyLnNldExpZmVjeWNsZUxpc3RlbmVyQ2FsbGJhY2tNb2RlKG1vZGUpOwog\nICAgfQoKICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJ1bmNoZWNrZWQiKQogICAg\ncHVibGljIDxUPiBUIGdldFJlZmVyZW5jZShDbGFzczxUPiBjbHMsIE9iamVj\ndCBvaWQpIHsKICAgICAgICBvaWQgPSBfYnJva2VyLm5ld09iamVjdElkKGNs\ncywgb2lkKTsKICAgICAgICByZXR1cm4gKFQpIF9icm9rZXIuZmluZChvaWQs\nIGZhbHNlLCB0aGlzKTsKICAgIH0KCiAgICBAU3VwcHJlc3NXYXJuaW5ncygi\ndW5jaGVja2VkIikKICAgIHB1YmxpYyA8VD4gVCBmaW5kKENsYXNzPFQ+IGNs\ncywgT2JqZWN0IG9pZCkgewogICAgICAgIG9pZCA9IF9icm9rZXIubmV3T2Jq\nZWN0SWQoY2xzLCBvaWQpOwogICAgICAgIHJldHVybiAoVCkgX2Jyb2tlci5m\naW5kKG9pZCwgdHJ1ZSwgdGhpcyk7CiAgICB9CgogICAgQFN1cHByZXNzV2Fy\nbmluZ3MoInVuY2hlY2tlZCIpCiAgICBwdWJsaWMgPFQ+IFRbXSBmaW5kQWxs\nKENsYXNzPFQ+IGNscywgT2JqZWN0Li4uIG9pZHMpIHsKICAgICAgICBpZiAo\nb2lkcy5sZW5ndGggPT0gMCkKICAgICAgICAgICAgcmV0dXJuIChUW10pIEFy\ncmF5Lm5ld0luc3RhbmNlKGNscywgMCk7CiAgICAgICAgQ29sbGVjdGlvbjxU\nPiByZXQgPSBmaW5kQWxsKGNscywgQXJyYXlzLmFzTGlzdChvaWRzKSk7CiAg\nICAgICAgcmV0dXJuIHJldC50b0FycmF5KChUW10pIEFycmF5Lm5ld0luc3Rh\nbmNlKGNscywgcmV0LnNpemUoKSkpOwogICAgfQoKICAgIEBTdXBwcmVzc1dh\ncm5pbmdzKCJ1bmNoZWNrZWQiKQogICAgcHVibGljIDxUPiBDb2xsZWN0aW9u\nPFQ+IGZpbmRBbGwoZmluYWwgQ2xhc3M8VD4gY2xzLCBDb2xsZWN0aW9uIG9p\nZHMpIHsKICAgICAgICBPYmplY3RbXSBvYmpzID0gX2Jyb2tlci5maW5kQWxs\nKG9pZHMsIHRydWUsIG5ldyBGaW5kQ2FsbGJhY2tzKCkgewogICAgICAgICAg\nICBwdWJsaWMgT2JqZWN0IHByb2Nlc3NBcmd1bWVudChPYmplY3Qgb2lkKSB7\nCiAgICAgICAgICAgICAgICByZXR1cm4gX2Jyb2tlci5uZXdPYmplY3RJZChj\nbHMsIG9pZCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHB1YmxpYyBP\nYmplY3QgcHJvY2Vzc1JldHVybihPYmplY3Qgb2lkLCBPcGVuSlBBU3RhdGVN\nYW5hZ2VyIHNtKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gRW50aXR5TWFu\nYWdlckltcGwudGhpcy5wcm9jZXNzUmV0dXJuKG9pZCwgc20pOwogICAgICAg\nICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIChDb2xsZWN0aW9u\nPFQ+KSBBcnJheXMuYXNMaXN0KG9ianMpOwogICAgfQoKICAgIEBTdXBwcmVz\nc1dhcm5pbmdzKCJ1bmNoZWNrZWQiKQogICAgcHVibGljIDxUPiBUIGZpbmRD\nYWNoZWQoQ2xhc3M8VD4gY2xzLCBPYmplY3Qgb2lkKSB7CiAgICAgICAgcmV0\ndXJuIChUKSBfYnJva2VyLmZpbmRDYWNoZWQoX2Jyb2tlci5uZXdPYmplY3RJ\nZChjbHMsIG9pZCksIHRoaXMpOwogICAgfQoKICAgIHB1YmxpYyBDbGFzcyBn\nZXRPYmplY3RJZENsYXNzKENsYXNzIGNscykgewogICAgICAgIGlmIChjbHMg\nPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgcmV0\ndXJuIE9wZW5KUEFQZXJzaXN0ZW5jZQogICAgICAgICAgICAuZnJvbU9wZW5K\nUEFPYmplY3RJZENsYXNzKF9icm9rZXIuZ2V0T2JqZWN0SWRUeXBlCiAgICAg\nICAgICAgICAgICAoY2xzKSk7CiAgICB9CgogICAgcHVibGljIEVudGl0eVRy\nYW5zYWN0aW9uIGdldFRyYW5zYWN0aW9uKCkgewogICAgICAgIGlmIChfYnJv\na2VyLmlzTWFuYWdlZCgpKQogICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxp\nZFN0YXRlRXhjZXB0aW9uKF9sb2MuZ2V0KCJnZXQtbWFuYWdlZC10cmFucyIp\nLAogICAgICAgICAgICAgICAgbnVsbCwgbnVsbCwgZmFsc2UpOwogICAgICAg\nIHJldHVybiB0aGlzOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGpvaW5UcmFu\nc2FjdGlvbigpIHsKICAgICAgICBpZiAoIV9icm9rZXIuc3luY1dpdGhNYW5h\nZ2VkVHJhbnNhY3Rpb24oKSkKICAgICAgICAgICAgdGhyb3cgbmV3IFRyYW5z\nYWN0aW9uUmVxdWlyZWRFeGNlcHRpb24oX2xvYy5nZXQKICAgICAgICAgICAg\nICAgICgibm8tbWFuYWdlZC10cmFucyIpLCBudWxsLCBudWxsLCBmYWxzZSk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgYmVnaW4oKSB7CiAgICAgICAgX2Jy\nb2tlci5iZWdpbigpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGNvbW1pdCgp\nIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBfYnJva2VyLmNvbW1pdCgp\nOwogICAgICAgIH0gY2F0Y2ggKFJvbGxiYWNrRXhjZXB0aW9uIGUpIHsKICAg\nICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9IGNhdGNoIChJbGxlZ2FsU3Rh\ndGVFeGNlcHRpb24gZSkgewogICAgICAgICAgICB0aHJvdyBlOwogICAgICAg\nIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIC8vIFJvbGxi\nYWNrRXhjZXB0aW9ucyBhcmUgc3BlY2lhbCBhbmQgYXJlbid0IGhhbmRsZWQg\nYnkgdGhlCiAgICAgICAgICAgIC8vIG5vcm1hbCBleGNlcHRpb24gdHJhbnNs\nYXRvciwgc2luY2UgdGhlIHNwZWMgc2F5cyB0aGV5CiAgICAgICAgICAgIC8v\nIHNob3VsZCBiZSB0aHJvd24gd2hlbmV2ZXIgdGhlIGNvbW1pdCBmYWlscyBm\nb3IgYW55IHJlYXNvbiBhdAogICAgICAgICAgICAvLyBhbGwsIHdoZXJhcyB0\naGUgZXhjZXB0aW9uIHRyYW5zbGF0b3IgaGFuZGxlcyBleGNlcHRpb25zIHRo\nYXQKICAgICAgICAgICAgLy8gYXJlIGNhdXNlZCBmb3Igc3BlY2lmaWMgcmVh\nc29ucwogICAgICAgICAgICB0aHJvdyBuZXcgUm9sbGJhY2tFeGNlcHRpb24o\nZSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIHJvbGxiYWNr\nKCkgewogICAgICAgIF9icm9rZXIucm9sbGJhY2soKTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBjb21taXRBbmRSZXN1bWUoKSB7CiAgICAgICAgX2Jyb2tl\nci5jb21taXRBbmRSZXN1bWUoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBy\nb2xsYmFja0FuZFJlc3VtZSgpIHsKICAgICAgICBfYnJva2VyLnJvbGxiYWNr\nQW5kUmVzdW1lKCk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gZ2V0Um9s\nbGJhY2tPbmx5KCkgewogICAgICAgIGlmICghaXNBY3RpdmUoKSkKICAgICAg\nICAgICAgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbihfbG9jLmdl\ndCgibm8tdHJhbnNhY3Rpb24iKQogICAgICAgICAgICAgICAgLmdldE1lc3Nh\nZ2UoKSk7CgogICAgICAgIHJldHVybiBfYnJva2VyLmdldFJvbGxiYWNrT25s\neSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldFJvbGxiYWNrT25seSgp\nIHsKICAgICAgICBfYnJva2VyLnNldFJvbGxiYWNrT25seSgpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHNldFNhdmVwb2ludChTdHJpbmcgbmFtZSkgewog\nICAgICAgIF9icm9rZXIuc2V0U2F2ZXBvaW50KG5hbWUpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHJvbGxiYWNrVG9TYXZlcG9pbnQoKSB7CiAgICAgICAg\nX2Jyb2tlci5yb2xsYmFja1RvU2F2ZXBvaW50KCk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgcm9sbGJhY2tUb1NhdmVwb2ludChTdHJpbmcgbmFtZSkgewog\nICAgICAgIF9icm9rZXIucm9sbGJhY2tUb1NhdmVwb2ludChuYW1lKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCByZWxlYXNlU2F2ZXBvaW50KCkgewogICAg\nICAgIF9icm9rZXIucmVsZWFzZVNhdmVwb2ludCgpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHJlbGVhc2VTYXZlcG9pbnQoU3RyaW5nIG5hbWUpIHsKICAg\nICAgICBfYnJva2VyLnJlbGVhc2VTYXZlcG9pbnQobmFtZSk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgZmx1c2goKSB7CiAgICAgICAgX2Jyb2tlci5hc3Nl\ncnRBY3RpdmVUcmFuc2FjdGlvbigpOwogICAgICAgIF9icm9rZXIuZmx1c2go\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBwcmVGbHVzaCgpIHsKICAgICAg\nICBfYnJva2VyLnByZUZsdXNoKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\ndmFsaWRhdGVDaGFuZ2VzKCkgewogICAgICAgIF9icm9rZXIudmFsaWRhdGVD\naGFuZ2VzKCk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gaXNBY3RpdmUo\nKSB7CiAgICAgICAgcmV0dXJuIGlzT3BlbigpICYmIF9icm9rZXIuaXNBY3Rp\ndmUoKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBpc1N0b3JlQWN0aXZl\nKCkgewogICAgICAgIHJldHVybiBfYnJva2VyLmlzU3RvcmVBY3RpdmUoKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCBiZWdpblN0b3JlKCkgewogICAgICAg\nIF9icm9rZXIuYmVnaW5TdG9yZSgpOwogICAgfQoKICAgIHB1YmxpYyBib29s\nZWFuIGNvbnRhaW5zKE9iamVjdCBlbnRpdHkpIHsKICAgICAgICBpZiAoZW50\naXR5ID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAg\nICBPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtID0gX2Jyb2tlci5nZXRTdGF0ZU1h\nbmFnZXIoZW50aXR5KTsKICAgICAgICBpZiAoc20gPT0gbnVsbCAmJiAhSW1w\nbEhlbHBlci5pc01hbmFnZWRUeXBlKGVudGl0eS5nZXRDbGFzcygpKSkKICAg\nICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKF9sb2MuZ2V0\nKCJub3QtZW50aXR5IiwKICAgICAgICAgICAgICAgIGVudGl0eS5nZXRDbGFz\ncygpKSwgbnVsbCwgbnVsbCwgdHJ1ZSk7CiAgICAgICAgcmV0dXJuIHNtICE9\nIG51bGwgJiYgIXNtLmlzRGVsZXRlZCgpOwogICAgfQoKICAgIHB1YmxpYyBi\nb29sZWFuIGNvbnRhaW5zQWxsKE9iamVjdC4uLiBlbnRpdGllcykgewogICAg\nICAgIGZvciAoT2JqZWN0IGVudGl0eSA6IGVudGl0aWVzKQogICAgICAgICAg\nICBpZiAoIWNvbnRhaW5zKGVudGl0eSkpCiAgICAgICAgICAgICAgICByZXR1\ncm4gZmFsc2U7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgcHVi\nbGljIGJvb2xlYW4gY29udGFpbnNBbGwoQ29sbGVjdGlvbiBlbnRpdGllcykg\newogICAgICAgIGZvciAoT2JqZWN0IGVudGl0eSA6IGVudGl0aWVzKQogICAg\nICAgICAgICBpZiAoIWNvbnRhaW5zKGVudGl0eSkpCiAgICAgICAgICAgICAg\nICByZXR1cm4gZmFsc2U7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgcGVyc2lzdChPYmplY3QgZW50aXR5KSB7CiAgICAg\nICAgX2Jyb2tlci5wZXJzaXN0KGVudGl0eSwgdGhpcyk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgcGVyc2lzdEFsbChPYmplY3QuLi4gZW50aXRpZXMpIHsK\nICAgICAgICBwZXJzaXN0QWxsKEFycmF5cy5hc0xpc3QoZW50aXRpZXMpKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCBwZXJzaXN0QWxsKENvbGxlY3Rpb24g\nZW50aXRpZXMpIHsKICAgICAgICBfYnJva2VyLnBlcnNpc3RBbGwoZW50aXRp\nZXMsIHRoaXMpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHJlbW92ZShPYmpl\nY3QgZW50aXR5KSB7CiAgICAgICAgX2Jyb2tlci5kZWxldGUoZW50aXR5LCB0\naGlzKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCByZW1vdmVBbGwoT2JqZWN0\nLi4uIGVudGl0aWVzKSB7CiAgICAgICAgcmVtb3ZlQWxsKEFycmF5cy5hc0xp\nc3QoZW50aXRpZXMpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCByZW1vdmVB\nbGwoQ29sbGVjdGlvbiBlbnRpdGllcykgewogICAgICAgIF9icm9rZXIuZGVs\nZXRlQWxsKGVudGl0aWVzLCB0aGlzKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCByZWxlYXNlKE9iamVjdCBlbnRpdHkpIHsKICAgICAgICBfYnJva2VyLnJl\nbGVhc2UoZW50aXR5LCB0aGlzKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBy\nZWxlYXNlQWxsKENvbGxlY3Rpb24gZW50aXRpZXMpIHsKICAgICAgICBfYnJv\na2VyLnJlbGVhc2VBbGwoZW50aXRpZXMsIHRoaXMpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHJlbGVhc2VBbGwoT2JqZWN0Li4uIGVudGl0aWVzKSB7CiAg\nICAgICAgcmVsZWFzZUFsbChBcnJheXMuYXNMaXN0KGVudGl0aWVzKSk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgcmVmcmVzaChPYmplY3QgZW50aXR5KSB7\nCiAgICAgICAgX2Jyb2tlci5hc3NlcnRXcml0ZU9wZXJhdGlvbigpOwogICAg\nICAgIF9icm9rZXIucmVmcmVzaChlbnRpdHksIHRoaXMpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHJlZnJlc2hBbGwoKSB7CiAgICAgICAgX2Jyb2tlci5h\nc3NlcnRXcml0ZU9wZXJhdGlvbigpOwogICAgICAgIF9icm9rZXIucmVmcmVz\naEFsbChfYnJva2VyLmdldFRyYW5zYWN0aW9uYWxPYmplY3RzKCksIHRoaXMp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHJlZnJlc2hBbGwoQ29sbGVjdGlv\nbiBlbnRpdGllcykgewogICAgICAgIF9icm9rZXIuYXNzZXJ0V3JpdGVPcGVy\nYXRpb24oKTsKICAgICAgICBfYnJva2VyLnJlZnJlc2hBbGwoZW50aXRpZXMs\nIHRoaXMpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHJlZnJlc2hBbGwoT2Jq\nZWN0Li4uIGVudGl0aWVzKSB7CiAgICAgICAgcmVmcmVzaEFsbChBcnJheXMu\nYXNMaXN0KGVudGl0aWVzKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgcmV0\ncmlldmUoT2JqZWN0IGVudGl0eSkgewogICAgICAgIF9icm9rZXIucmV0cmll\ndmUoZW50aXR5LCB0cnVlLCB0aGlzKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCByZXRyaWV2ZUFsbChDb2xsZWN0aW9uIGVudGl0aWVzKSB7CiAgICAgICAg\nX2Jyb2tlci5yZXRyaWV2ZUFsbChlbnRpdGllcywgdHJ1ZSwgdGhpcyk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgcmV0cmlldmVBbGwoT2JqZWN0Li4uIGVu\ndGl0aWVzKSB7CiAgICAgICAgcmV0cmlldmVBbGwoQXJyYXlzLmFzTGlzdChl\nbnRpdGllcykpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGV2aWN0KE9iamVj\ndCBlbnRpdHkpIHsKICAgICAgICBfYnJva2VyLmV2aWN0KGVudGl0eSwgdGhp\ncyk7CiAgICB9CgogICAgcHVibGljIHZvaWQgZXZpY3RBbGwoQ29sbGVjdGlv\nbiBlbnRpdGllcykgewogICAgICAgIF9icm9rZXIuZXZpY3RBbGwoZW50aXRp\nZXMsIHRoaXMpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGV2aWN0QWxsKE9i\namVjdC4uLiBlbnRpdGllcykgewogICAgICAgIGV2aWN0QWxsKEFycmF5cy5h\nc0xpc3QoZW50aXRpZXMpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBldmlj\ndEFsbCgpIHsKICAgICAgICBfYnJva2VyLmV2aWN0QWxsKHRoaXMpOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIGV2aWN0QWxsKENsYXNzIGNscykgewogICAg\nICAgIF9icm9rZXIuZXZpY3RBbGwoX2Jyb2tlci5uZXdFeHRlbnQoY2xzLCB0\ncnVlKSwgdGhpcyk7CiAgICB9CgogICAgcHVibGljIHZvaWQgZXZpY3RBbGwo\nRXh0ZW50IGV4dGVudCkgewogICAgICAgIF9icm9rZXIuZXZpY3RBbGwoZXh0\nZW50LmdldERlbGVnYXRlKCksIHRoaXMpOwogICAgfQoKICAgIEBTdXBwcmVz\nc1dhcm5pbmdzKCJ1bmNoZWNrZWQiKQogICAgcHVibGljIDxUPiBUIGRldGFj\naChUIGVudGl0eSkgewogICAgICAgIHJldHVybiAoVCkgX2Jyb2tlci5kZXRh\nY2goZW50aXR5LCB0aGlzKTsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0W10g\nZGV0YWNoQWxsKE9iamVjdC4uLiBlbnRpdGllcykgewogICAgICAgIHJldHVy\nbiBfYnJva2VyLmRldGFjaEFsbChBcnJheXMuYXNMaXN0KGVudGl0aWVzKSwg\ndGhpcyk7CiAgICB9CgogICAgcHVibGljIENvbGxlY3Rpb24gZGV0YWNoQWxs\nKENvbGxlY3Rpb24gZW50aXRpZXMpIHsKICAgICAgICByZXR1cm4gQXJyYXlz\nLmFzTGlzdChfYnJva2VyLmRldGFjaEFsbChlbnRpdGllcywgdGhpcykpOwog\nICAgfQoKICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJ1bmNoZWNrZWQiKQogICAg\ncHVibGljIDxUPiBUIG1lcmdlKFQgZW50aXR5KSB7CiAgICAgICAgcmV0dXJu\nIChUKSBfYnJva2VyLmF0dGFjaChlbnRpdHksIHRydWUsIHRoaXMpOwogICAg\nfQoKICAgIHB1YmxpYyBPYmplY3RbXSBtZXJnZUFsbChPYmplY3QuLi4gZW50\naXRpZXMpIHsKICAgICAgICBpZiAoZW50aXRpZXMubGVuZ3RoID09IDApCiAg\nICAgICAgICAgIHJldHVybiBuZXcgT2JqZWN0WzBdOwogICAgICAgIHJldHVy\nbiBtZXJnZUFsbChBcnJheXMuYXNMaXN0KGVudGl0aWVzKSkudG9BcnJheSgp\nOwogICAgfQoKICAgIHB1YmxpYyBDb2xsZWN0aW9uIG1lcmdlQWxsKENvbGxl\nY3Rpb24gZW50aXRpZXMpIHsKICAgICAgICByZXR1cm4gQXJyYXlzLmFzTGlz\ndChfYnJva2VyLmF0dGFjaEFsbChlbnRpdGllcywgdHJ1ZSwgdGhpcykpOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHRyYW5zYWN0aW9uYWwoT2JqZWN0IGVu\ndGl0eSwgYm9vbGVhbiB1cGRhdGVWZXJzaW9uKSB7CiAgICAgICAgX2Jyb2tl\nci50cmFuc2FjdGlvbmFsKGVudGl0eSwgdXBkYXRlVmVyc2lvbiwgdGhpcyk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgdHJhbnNhY3Rpb25hbEFsbChDb2xs\nZWN0aW9uIG9ianMsIGJvb2xlYW4gdXBkYXRlVmVyc2lvbikgewogICAgICAg\nIF9icm9rZXIudHJhbnNhY3Rpb25hbEFsbChvYmpzLCB1cGRhdGVWZXJzaW9u\nLCB0aGlzKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0cmFuc2FjdGlvbmFs\nQWxsKE9iamVjdFtdIG9ianMsIGJvb2xlYW4gdXBkYXRlVmVyc2lvbikgewog\nICAgICAgIF9icm9rZXIudHJhbnNhY3Rpb25hbEFsbChBcnJheXMuYXNMaXN0\nKG9ianMpLCB1cGRhdGVWZXJzaW9uLCB0aGlzKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBub250cmFuc2FjdGlvbmFsKE9iamVjdCBlbnRpdHkpIHsKICAg\nICAgICBfYnJva2VyLm5vbnRyYW5zYWN0aW9uYWwoZW50aXR5LCB0aGlzKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCBub250cmFuc2FjdGlvbmFsQWxsKENv\nbGxlY3Rpb24gb2JqcykgewogICAgICAgIF9icm9rZXIubm9udHJhbnNhY3Rp\nb25hbEFsbChvYmpzLCB0aGlzKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBu\nb250cmFuc2FjdGlvbmFsQWxsKE9iamVjdFtdIG9ianMpIHsKICAgICAgICBf\nYnJva2VyLm5vbnRyYW5zYWN0aW9uYWxBbGwoQXJyYXlzLmFzTGlzdChvYmpz\nKSwgdGhpcyk7CiAgICB9CgogICAgcHVibGljIEdlbmVyYXRvciBnZXROYW1l\nZEdlbmVyYXRvcihTdHJpbmcgbmFtZSkgewogICAgICAgIHRyeSB7CiAgICAg\nICAgICAgIFNlcXVlbmNlTWV0YURhdGEgbWV0YSA9IF9icm9rZXIuZ2V0Q29u\nZmlndXJhdGlvbigpLgogICAgICAgICAgICAgICAgZ2V0TWV0YURhdGFSZXBv\nc2l0b3J5SW5zdGFuY2UoKS5nZXRTZXF1ZW5jZU1ldGFEYXRhKG5hbWUsCiAg\nICAgICAgICAgICAgICBfYnJva2VyLmdldENsYXNzTG9hZGVyKCksIHRydWUp\nOwogICAgICAgICAgICBTZXEgc2VxID0gbWV0YS5nZXRJbnN0YW5jZShfYnJv\na2VyLmdldENsYXNzTG9hZGVyKCkpOwogICAgICAgICAgICByZXR1cm4gbmV3\nIEdlbmVyYXRvckltcGwoc2VxLCBuYW1lLCBfYnJva2VyLCBudWxsKTsKICAg\nICAgICB9IGNhdGNoIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAg\nICAgIHRocm93IFBlcnNpc3RlbmNlRXhjZXB0aW9ucy50b1BlcnNpc3RlbmNl\nRXhjZXB0aW9uKHJlKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIEdl\nbmVyYXRvciBnZXRJZEdlbmVyYXRvcihDbGFzcyBmb3JDbGFzcykgewogICAg\nICAgIHRyeSB7CiAgICAgICAgICAgIENsYXNzTWV0YURhdGEgbWV0YSA9IF9i\ncm9rZXIuZ2V0Q29uZmlndXJhdGlvbigpLgogICAgICAgICAgICAgICAgZ2V0\nTWV0YURhdGFSZXBvc2l0b3J5SW5zdGFuY2UoKS5nZXRNZXRhRGF0YShmb3JD\nbGFzcywKICAgICAgICAgICAgICAgIF9icm9rZXIuZ2V0Q2xhc3NMb2FkZXIo\nKSwgdHJ1ZSk7CiAgICAgICAgICAgIFNlcSBzZXEgPSBfYnJva2VyLmdldElk\nZW50aXR5U2VxdWVuY2UobWV0YSk7CiAgICAgICAgICAgIHJldHVybiAoc2Vx\nID09IG51bGwpID8gbnVsbCA6IG5ldyBHZW5lcmF0b3JJbXBsKHNlcSwgbnVs\nbCwgX2Jyb2tlciwKICAgICAgICAgICAgICAgIG1ldGEpOwogICAgICAgIH0g\nY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIHRocm93IFBlcnNp\nc3RlbmNlRXhjZXB0aW9ucy50b1BlcnNpc3RlbmNlRXhjZXB0aW9uKGUpOwog\nICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgR2VuZXJhdG9yIGdldEZpZWxk\nR2VuZXJhdG9yKENsYXNzIGZvckNsYXNzLCBTdHJpbmcgZmllbGROYW1lKSB7\nCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgQ2xhc3NNZXRhRGF0YSBtZXRh\nID0gX2Jyb2tlci5nZXRDb25maWd1cmF0aW9uKCkuCiAgICAgICAgICAgICAg\nICBnZXRNZXRhRGF0YVJlcG9zaXRvcnlJbnN0YW5jZSgpLmdldE1ldGFEYXRh\nKGZvckNsYXNzLAogICAgICAgICAgICAgICAgX2Jyb2tlci5nZXRDbGFzc0xv\nYWRlcigpLCB0cnVlKTsKICAgICAgICAgICAgRmllbGRNZXRhRGF0YSBmbWQg\nPSBtZXRhLmdldEZpZWxkKGZpZWxkTmFtZSk7CiAgICAgICAgICAgIGlmIChm\nbWQgPT0gbnVsbCkKICAgICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVu\ndEV4Y2VwdGlvbihfbG9jLmdldCgibm8tbmFtZWQtZmllbGQiLAogICAgICAg\nICAgICAgICAgICAgIGZvckNsYXNzLCBmaWVsZE5hbWUpLCBudWxsLCBudWxs\nLCBmYWxzZSk7CgogICAgICAgICAgICBTZXEgc2VxID0gX2Jyb2tlci5nZXRW\nYWx1ZVNlcXVlbmNlKGZtZCk7CiAgICAgICAgICAgIHJldHVybiAoc2VxID09\nIG51bGwpID8gbnVsbCA6IG5ldyBHZW5lcmF0b3JJbXBsKHNlcSwgbnVsbCwg\nX2Jyb2tlciwKICAgICAgICAgICAgICAgIG1ldGEpOwogICAgICAgIH0gY2F0\nY2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIHRocm93IFBlcnNpc3Rl\nbmNlRXhjZXB0aW9ucy50b1BlcnNpc3RlbmNlRXhjZXB0aW9uKGUpOwogICAg\nICAgIH0KICAgIH0KCiAgICBwdWJsaWMgPFQ+IEV4dGVudDxUPiBjcmVhdGVF\neHRlbnQoQ2xhc3M8VD4gY2xzLCBib29sZWFuIHN1YmNsYXNzZXMpIHsKICAg\nICAgICByZXR1cm4gbmV3IEV4dGVudEltcGw8VD4odGhpcywgX2Jyb2tlci5u\nZXdFeHRlbnQoY2xzLCBzdWJjbGFzc2VzKSk7CiAgICB9CgogICAgcHVibGlj\nIE9wZW5KUEFRdWVyeSBjcmVhdGVRdWVyeShTdHJpbmcgcXVlcnkpIHsKICAg\nICAgICByZXR1cm4gY3JlYXRlUXVlcnkoSlBRTFBhcnNlci5MQU5HX0pQUUws\nIHF1ZXJ5KTsKICAgIH0KCiAgICBwdWJsaWMgT3BlbkpQQVF1ZXJ5IGNyZWF0\nZVF1ZXJ5KFN0cmluZyBsYW5ndWFnZSwgU3RyaW5nIHF1ZXJ5KSB7CiAgICAg\nICAgcmV0dXJuIG5ldyBRdWVyeUltcGwodGhpcywgX2Jyb2tlci5uZXdRdWVy\neShsYW5ndWFnZSwgcXVlcnkpKTsKICAgIH0KCiAgICBwdWJsaWMgT3BlbkpQ\nQVF1ZXJ5IGNyZWF0ZVF1ZXJ5KFF1ZXJ5IHF1ZXJ5KSB7CiAgICAgICAgaWYg\nKHF1ZXJ5ID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBjcmVhdGVRdWVy\neSgoU3RyaW5nKSBudWxsKTsKICAgICAgICBvcmcuYXBhY2hlLm9wZW5qcGEu\na2VybmVsLlF1ZXJ5IHEgPSAoKFF1ZXJ5SW1wbCkgcXVlcnkpLmdldERlbGVn\nYXRlKCk7CiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeUltcGwodGhpcywgX2Jy\nb2tlci5uZXdRdWVyeShxLmdldExhbmd1YWdlKCksCiAgICAgICAgICAgIHEp\nKTsKICAgIH0KCiAgICBwdWJsaWMgT3BlbkpQQVF1ZXJ5IGNyZWF0ZU5hbWVk\nUXVlcnkoU3RyaW5nIG5hbWUpIHsKICAgICAgICB0cnkgewogICAgICAgICAg\nICBRdWVyeU1ldGFEYXRhIG1ldGEgPSBfYnJva2VyLmdldENvbmZpZ3VyYXRp\nb24oKS4KICAgICAgICAgICAgICAgIGdldE1ldGFEYXRhUmVwb3NpdG9yeUlu\nc3RhbmNlKCkuZ2V0UXVlcnlNZXRhRGF0YShudWxsLCBuYW1lLAogICAgICAg\nICAgICAgICAgX2Jyb2tlci5nZXRDbGFzc0xvYWRlcigpLCB0cnVlKTsKICAg\nICAgICAgICAgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5RdWVyeSBkZWwg\nPQogICAgICAgICAgICAgICAgX2Jyb2tlci5uZXdRdWVyeShtZXRhLmdldExh\nbmd1YWdlKCksIG51bGwpOwogICAgICAgICAgICBtZXRhLnNldEludG8oZGVs\nKTsKICAgICAgICAgICAgZGVsLmNvbXBpbGUoKTsKCiAgICAgICAgICAgIE9w\nZW5KUEFRdWVyeSBxID0gbmV3IFF1ZXJ5SW1wbCh0aGlzLCBkZWwpOwogICAg\nICAgICAgICBTdHJpbmdbXSBoaW50cyA9IG1ldGEuZ2V0SGludEtleXMoKTsK\nICAgICAgICAgICAgT2JqZWN0W10gdmFsdWVzID0gbWV0YS5nZXRIaW50VmFs\ndWVzKCk7CiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgaGludHMu\nbGVuZ3RoOyBpKyspCiAgICAgICAgICAgICAgICBxLnNldEhpbnQoaGludHNb\naV0sIHZhbHVlc1tpXSk7CiAgICAgICAgICAgIHJldHVybiBxOwogICAgICAg\nIH0gY2F0Y2ggKFJ1bnRpbWVFeGNlcHRpb24gcmUpIHsKICAgICAgICAgICAg\ndGhyb3cgUGVyc2lzdGVuY2VFeGNlcHRpb25zLnRvUGVyc2lzdGVuY2VFeGNl\ncHRpb24ocmUpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgT3BlbkpQ\nQVF1ZXJ5IGNyZWF0ZU5hdGl2ZVF1ZXJ5KFN0cmluZyBxdWVyeSkgewogICAg\nICAgIHZhbGlkYXRlU1FMKHF1ZXJ5KTsKICAgICAgICByZXR1cm4gY3JlYXRl\nUXVlcnkoUXVlcnlMYW5ndWFnZXMuTEFOR19TUUwsIHF1ZXJ5KTsKICAgIH0K\nCiAgICBwdWJsaWMgT3BlbkpQQVF1ZXJ5IGNyZWF0ZU5hdGl2ZVF1ZXJ5KFN0\ncmluZyBxdWVyeSwgQ2xhc3MgY2xzKSB7CiAgICAgICAgcmV0dXJuIGNyZWF0\nZU5hdGl2ZVF1ZXJ5KHF1ZXJ5KS5zZXRSZXN1bHRDbGFzcyhjbHMpOwogICAg\nfQoKICAgIHB1YmxpYyBPcGVuSlBBUXVlcnkgY3JlYXRlTmF0aXZlUXVlcnko\nU3RyaW5nIHF1ZXJ5LCBTdHJpbmcgbWFwcGluZ05hbWUpIHsKICAgICAgICB2\nYWxpZGF0ZVNRTChxdWVyeSk7CiAgICAgICAgb3JnLmFwYWNoZS5vcGVuanBh\nLmtlcm5lbC5RdWVyeSBrZXJuZWxRdWVyeSA9IF9icm9rZXIubmV3UXVlcnko\nCiAgICAgICAgICAgIFF1ZXJ5TGFuZ3VhZ2VzLkxBTkdfU1FMLCBxdWVyeSk7\nCiAgICAgICAga2VybmVsUXVlcnkuc2V0UmVzdWx0TWFwcGluZyhudWxsLCBt\nYXBwaW5nTmFtZSk7CiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeUltcGwodGhp\ncywga2VybmVsUXVlcnkpOwogICAgfQoKICAgIC8qKgogICAgICogVmFsaWRh\ndGUgdGhhdCB0aGUgdXNlciBwcm92aWRlZCBTUUwuCiAgICAgKi8KICAgIHBy\naXZhdGUgc3RhdGljIHZvaWQgdmFsaWRhdGVTUUwoU3RyaW5nIHF1ZXJ5KSB7\nCiAgICAgICAgaWYgKFN0cmluZ1V0aWxzLnRyaW1Ub051bGwocXVlcnkpID09\nIG51bGwpCiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlv\nbihfbG9jLmdldCgibm8tc3FsIiksIG51bGwsIG51bGwsIGZhbHNlKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRGbHVzaE1vZGUoRmx1c2hNb2RlVHlw\nZSBmbHVzaE1vZGUpIHsKICAgICAgICBfYnJva2VyLmdldEZldGNoQ29uZmln\ndXJhdGlvbigpLnNldEZsdXNoQmVmb3JlUXVlcmllcwogICAgICAgICAgICAo\ndG9GbHVzaEJlZm9yZVF1ZXJpZXMoZmx1c2hNb2RlKSk7CiAgICB9CgogICAg\ncHVibGljIEZsdXNoTW9kZVR5cGUgZ2V0Rmx1c2hNb2RlKCkgewogICAgICAg\nIHJldHVybiBmcm9tRmx1c2hCZWZvcmVRdWVyaWVzKF9icm9rZXIuZ2V0RmV0\nY2hDb25maWd1cmF0aW9uKCkuCiAgICAgICAgICAgIGdldEZsdXNoQmVmb3Jl\nUXVlcmllcygpKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRyYW5zbGF0ZSBv\ndXIgaW50ZXJuYWwgZmx1c2ggY29uc3RhbnQgdG8gYSBmbHVzaCBtb2RlIGVu\ndW0gdmFsdWUuCiAgICAgKi8KICAgIHN0YXRpYyBGbHVzaE1vZGVUeXBlIGZy\nb21GbHVzaEJlZm9yZVF1ZXJpZXMoaW50IGZsdXNoKSB7CiAgICAgICAgc3dp\ndGNoIChmbHVzaCkgewogICAgICAgICAgICBjYXNlIFF1ZXJ5Rmx1c2hNb2Rl\ncy5GTFVTSF9UUlVFOgogICAgICAgICAgICAgICAgcmV0dXJuIEZsdXNoTW9k\nZVR5cGUuQVVUTzsKICAgICAgICAgICAgY2FzZSBRdWVyeUZsdXNoTW9kZXMu\nRkxVU0hfRkFMU0U6CiAgICAgICAgICAgICAgICByZXR1cm4gRmx1c2hNb2Rl\nVHlwZS5DT01NSVQ7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAg\nICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAg\nICAgKiBUcmFuc2xhdGUgYSBmbHVzaCBtb2RlIGVudW0gdmFsdWUgdG8gb3Vy\nIGludGVybmFsIGZsdXNoIGNvbnN0YW50LgogICAgICovCiAgICBzdGF0aWMg\naW50IHRvRmx1c2hCZWZvcmVRdWVyaWVzKEZsdXNoTW9kZVR5cGUgZmx1c2hN\nb2RlKSB7CiAgICAgICAgLy8gY2hvb3NlIGRlZmF1bHQgZm9yIG51bGwKICAg\nICAgICBpZiAoZmx1c2hNb2RlID09IG51bGwpCiAgICAgICAgICAgIHJldHVy\nbiBRdWVyeUZsdXNoTW9kZXMuRkxVU0hfV0lUSF9DT05ORUNUSU9OOwogICAg\nICAgIGlmIChmbHVzaE1vZGUgPT0gRmx1c2hNb2RlVHlwZS5BVVRPKQogICAg\nICAgICAgICByZXR1cm4gUXVlcnlGbHVzaE1vZGVzLkZMVVNIX1RSVUU7CiAg\nICAgICAgaWYgKGZsdXNoTW9kZSA9PSBGbHVzaE1vZGVUeXBlLkNPTU1JVCkK\nICAgICAgICAgICAgcmV0dXJuIFF1ZXJ5Rmx1c2hNb2Rlcy5GTFVTSF9GQUxT\nRTsKICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24oZmx1c2hN\nb2RlLnRvU3RyaW5nKCksIG51bGwsIG51bGwsIGZhbHNlKTsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCBjbGVhcigpIHsKICAgICAgICBfYnJva2VyLmRldGFj\naEFsbCh0aGlzKTsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IGdldERlbGVn\nYXRlKCkgewogICAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICAgIHB1Ymxp\nYyBMb2NrTW9kZVR5cGUgZ2V0TG9ja01vZGUoT2JqZWN0IGVudGl0eSkgewog\nICAgICAgIHJldHVybiBmcm9tTG9ja0xldmVsKF9icm9rZXIuZ2V0TG9ja0xl\ndmVsKGVudGl0eSkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGxvY2soT2Jq\nZWN0IGVudGl0eSwgTG9ja01vZGVUeXBlIG1vZGUpIHsKICAgICAgICBfYnJv\na2VyLmxvY2soZW50aXR5LCB0b0xvY2tMZXZlbChtb2RlKSwgLTEsIHRoaXMp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGxvY2soT2JqZWN0IGVudGl0eSkg\newogICAgICAgIF9icm9rZXIubG9jayhlbnRpdHksIHRoaXMpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIGxvY2soT2JqZWN0IGVudGl0eSwgTG9ja01vZGVU\neXBlIG1vZGUsIGludCB0aW1lb3V0KSB7CiAgICAgICAgX2Jyb2tlci5sb2Nr\nKGVudGl0eSwgdG9Mb2NrTGV2ZWwobW9kZSksIHRpbWVvdXQsIHRoaXMpOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIGxvY2tBbGwoQ29sbGVjdGlvbiBlbnRp\ndGllcykgewogICAgICAgIF9icm9rZXIubG9ja0FsbChlbnRpdGllcywgdGhp\ncyk7CiAgICB9CgogICAgcHVibGljIHZvaWQgbG9ja0FsbChDb2xsZWN0aW9u\nIGVudGl0aWVzLCBMb2NrTW9kZVR5cGUgbW9kZSwgaW50IHRpbWVvdXQpIHsK\nICAgICAgICBfYnJva2VyLmxvY2tBbGwoZW50aXRpZXMsIHRvTG9ja0xldmVs\nKG1vZGUpLCB0aW1lb3V0LCB0aGlzKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBsb2NrQWxsKE9iamVjdC4uLiBlbnRpdGllcykgewogICAgICAgIGxvY2tB\nbGwoQXJyYXlzLmFzTGlzdChlbnRpdGllcykpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIGxvY2tBbGwoT2JqZWN0W10gZW50aXRpZXMsIExvY2tNb2RlVHlw\nZSBtb2RlLCBpbnQgdGltZW91dCkgewogICAgICAgIGxvY2tBbGwoQXJyYXlz\nLmFzTGlzdChlbnRpdGllcyksIG1vZGUsIHRpbWVvdXQpOwogICAgfQoKICAg\nIC8qKgogICAgICogVHJhbnNsYXRlIG91ciBpbnRlcm5hbCBsb2NrIGxldmVs\nIHRvIGEgamF2YXgucGVyc2lzdGVuY2UgZW51bSB2YWx1ZS4KICAgICAqLwog\nICAgc3RhdGljIExvY2tNb2RlVHlwZSBmcm9tTG9ja0xldmVsKGludCBsZXZl\nbCkgewogICAgICAgIGlmIChsZXZlbCA8IExvY2tMZXZlbHMuTE9DS19SRUFE\nKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICBpZiAobGV2ZWwg\nPCBMb2NrTGV2ZWxzLkxPQ0tfV1JJVEUpCiAgICAgICAgICAgIHJldHVybiBM\nb2NrTW9kZVR5cGUuUkVBRDsKICAgICAgICByZXR1cm4gTG9ja01vZGVUeXBl\nLldSSVRFOwogICAgfQoKICAgIC8qKgogICAgICogVHJhbnNsYXRlIHRoZSBq\nYXZheC5wZXJzaXN0ZW5jZSBlbnVtIHZhbHVlIHRvIG91ciBpbnRlcm5hbCBs\nb2NrIGxldmVsLgogICAgICovCiAgICBzdGF0aWMgaW50IHRvTG9ja0xldmVs\nKExvY2tNb2RlVHlwZSBtb2RlKSB7CiAgICAgICAgaWYgKG1vZGUgPT0gbnVs\nbCkKICAgICAgICAgICAgcmV0dXJuIExvY2tMZXZlbHMuTE9DS19OT05FOwog\nICAgICAgIGlmIChtb2RlID09IExvY2tNb2RlVHlwZS5SRUFEKQogICAgICAg\nICAgICByZXR1cm4gTG9ja0xldmVscy5MT0NLX1JFQUQ7CiAgICAgICAgaWYg\nKG1vZGUgPT0gTG9ja01vZGVUeXBlLldSSVRFKQogICAgICAgICAgICByZXR1\ncm4gTG9ja0xldmVscy5MT0NLX1dSSVRFOwogICAgICAgIHRocm93IG5ldyBB\ncmd1bWVudEV4Y2VwdGlvbihtb2RlLnRvU3RyaW5nKCksIG51bGwsIG51bGws\nIHRydWUpOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGNhbmNlbEFsbCgp\nIHsKICAgICAgICByZXR1cm4gX2Jyb2tlci5jYW5jZWxBbGwoKTsKICAgIH0K\nCiAgICBwdWJsaWMgT2JqZWN0IGdldENvbm5lY3Rpb24oKSB7CiAgICAgICAg\ncmV0dXJuIF9icm9rZXIuZ2V0Q29ubmVjdGlvbigpOwogICAgfQoKICAgIHB1\nYmxpYyBDb2xsZWN0aW9uIGdldE1hbmFnZWRPYmplY3RzKCkgewogICAgICAg\nIHJldHVybiBfYnJva2VyLmdldE1hbmFnZWRPYmplY3RzKCk7CiAgICB9Cgog\nICAgcHVibGljIENvbGxlY3Rpb24gZ2V0VHJhbnNhY3Rpb25hbE9iamVjdHMo\nKSB7CiAgICAgICAgcmV0dXJuIF9icm9rZXIuZ2V0VHJhbnNhY3Rpb25hbE9i\namVjdHMoKTsKICAgIH0KCiAgICBwdWJsaWMgQ29sbGVjdGlvbiBnZXRQZW5k\naW5nVHJhbnNhY3Rpb25hbE9iamVjdHMoKSB7CiAgICAgICAgcmV0dXJuIF9i\ncm9rZXIuZ2V0UGVuZGluZ1RyYW5zYWN0aW9uYWxPYmplY3RzKCk7CiAgICB9\nCgogICAgcHVibGljIENvbGxlY3Rpb24gZ2V0RGlydHlPYmplY3RzKCkgewog\nICAgICAgIHJldHVybiBfYnJva2VyLmdldERpcnR5T2JqZWN0cygpOwogICAg\nfQoKICAgIHB1YmxpYyBib29sZWFuIGdldE9yZGVyRGlydHlPYmplY3RzKCkg\newogICAgICAgIHJldHVybiBfYnJva2VyLmdldE9yZGVyRGlydHlPYmplY3Rz\nKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0T3JkZXJEaXJ0eU9iamVj\ndHMoYm9vbGVhbiBvcmRlcikgewogICAgICAgIF9icm9rZXIuc2V0T3JkZXJE\naXJ0eU9iamVjdHMob3JkZXIpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGRp\ncnR5Q2xhc3MoQ2xhc3MgY2xzKSB7CiAgICAgICAgX2Jyb2tlci5kaXJ0eVR5\ncGUoY2xzKTsKICAgIH0KCiAgICBAU3VwcHJlc3NXYXJuaW5ncygidW5jaGVj\na2VkIikKICAgIHB1YmxpYyBDb2xsZWN0aW9uPENsYXNzPiBnZXRQZXJzaXN0\nZWRDbGFzc2VzKCkgewogICAgICAgIHJldHVybiAoQ29sbGVjdGlvbjxDbGFz\ncz4pIF9icm9rZXIuZ2V0UGVyc2lzdGVkVHlwZXMoKTsKICAgIH0KCiAgICBA\nU3VwcHJlc3NXYXJuaW5ncygidW5jaGVja2VkIikKICAgIHB1YmxpYyBDb2xs\nZWN0aW9uPENsYXNzPiBnZXRVcGRhdGVkQ2xhc3NlcygpIHsKICAgICAgICBy\nZXR1cm4gKENvbGxlY3Rpb248Q2xhc3M+KSBfYnJva2VyLmdldFVwZGF0ZWRU\neXBlcygpOwogICAgfQoKICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJ1bmNoZWNr\nZWQiKQogICAgcHVibGljIENvbGxlY3Rpb248Q2xhc3M+IGdldFJlbW92ZWRD\nbGFzc2VzKCkgewogICAgICAgIHJldHVybiAoQ29sbGVjdGlvbjxDbGFzcz4p\nIF9icm9rZXIuZ2V0RGVsZXRlZFR5cGVzKCk7CiAgICB9CgogICAgcHVibGlj\nIDxUPiBUIGNyZWF0ZUluc3RhbmNlKENsYXNzPFQ+IGNscykgewogICAgICAg\nIHJldHVybiAoVCkgX2Jyb2tlci5uZXdJbnN0YW5jZShjbHMpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIGNsb3NlKCkgewogICAgICAgIF9icm9rZXIuY2xv\nc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBpc09wZW4oKSB7CiAg\nICAgICAgcmV0dXJuICFfYnJva2VyLmlzQ2xvc2VkKCk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgZGlydHkoT2JqZWN0IG8sIFN0cmluZyBmaWVsZCkgewog\nICAgICAgIE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20gPSBfYnJva2VyLmdldFN0\nYXRlTWFuYWdlcihvKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBpZiAo\nc20gIT0gbnVsbCkKICAgICAgICAgICAgICAgIHNtLmRpcnR5KGZpZWxkKTsK\nICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICB0\naHJvdyBQZXJzaXN0ZW5jZUV4Y2VwdGlvbnMudG9QZXJzaXN0ZW5jZUV4Y2Vw\ndGlvbihlKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIE9iamVjdCBn\nZXRPYmplY3RJZChPYmplY3QgbykgewogICAgICAgIHJldHVybiBPcGVuSlBB\nUGVyc2lzdGVuY2UuZnJvbU9wZW5KUEFPYmplY3RJZChfYnJva2VyLmdldE9i\namVjdElkKG8pKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBpc0RpcnR5\nKE9iamVjdCBvKSB7CiAgICAgICAgcmV0dXJuIF9icm9rZXIuaXNEaXJ0eShv\nKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBpc1RyYW5zYWN0aW9uYWwo\nT2JqZWN0IG8pIHsKICAgICAgICByZXR1cm4gX2Jyb2tlci5pc1RyYW5zYWN0\naW9uYWwobyk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gaXNQZXJzaXN0\nZW50KE9iamVjdCBvKSB7CiAgICAgICAgcmV0dXJuIF9icm9rZXIuaXNQZXJz\naXN0ZW50KG8pOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGlzTmV3bHlQ\nZXJzaXN0ZW50KE9iamVjdCBvKSB7CiAgICAgICAgcmV0dXJuIF9icm9rZXIu\naXNOZXcobyk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gaXNSZW1vdmVk\nKE9iamVjdCBvKSB7CiAgICAgICAgcmV0dXJuIF9icm9rZXIuaXNEZWxldGVk\nKG8pOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGlzRGV0YWNoZWQoT2Jq\nZWN0IGVudGl0eSkgewogICAgICAgIHJldHVybiBfYnJva2VyLmlzRGV0YWNo\nZWQoZW50aXR5KTsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IGdldFZlcnNp\nb24oT2JqZWN0IG8pIHsKICAgICAgICByZXR1cm4gX2Jyb2tlci5nZXRWZXJz\naW9uKG8pOwogICAgfQoKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vCiAgICAvLyBGaW5kQ2FsbGJhY2tzIGltcGxlbWVudGF0aW9uCiAg\nICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKICAgIHB1Ymxp\nYyBPYmplY3QgcHJvY2Vzc0FyZ3VtZW50KE9iamVjdCBhcmcpIHsKICAgICAg\nICByZXR1cm4gYXJnOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgcHJvY2Vz\nc1JldHVybihPYmplY3Qgb2lkLCBPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtKSB7\nCiAgICAgICAgcmV0dXJuIChzbSA9PSBudWxsIHx8IHNtLmlzRGVsZXRlZCgp\nKSA/IG51bGwgOiBzbS5nZXRNYW5hZ2VkSW5zdGFuY2UoKTsKICAgIH0KCiAg\nICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIC8vIE9wQ2Fs\nbGJhY2tzIGltcGxlbWVudGF0aW9uCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8KCiAgICBwdWJsaWMgaW50IHByb2Nlc3NBcmd1bWVudChp\nbnQgb3AsIE9iamVjdCBvYmosIE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20pIHsK\nICAgICAgICBzd2l0Y2ggKG9wKSB7CiAgICAgICAgICAgIGNhc2UgT1BfREVM\nRVRFOgogICAgICAgICAgICAgICAgLy8gY2FzY2FkZSB0aHJvdWdoIG5vbi1w\nZXJzaXN0ZW50IG5vbi1kZXRhY2hlZCBpbnN0YW5jZXMKICAgICAgICAgICAg\nICAgIGlmIChzbSA9PSBudWxsICYmICFfYnJva2VyLmlzRGV0YWNoZWQob2Jq\nKSkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gQUNUX0NBU0NBREU7CiAg\nICAgICAgICAgICAgICBpZiAoc20gIT0gbnVsbCAmJiAhc20uaXNEZXRhY2hl\nZCgpICYmICFzbS5pc1BlcnNpc3RlbnQoKSkKICAgICAgICAgICAgICAgICAg\nICByZXR1cm4gQUNUX0NBU0NBREU7CiAgICAgICAgICAgICAgICAvLyBpZ25v\ncmUgZGVsZXRlZCBpbnN0YW5jZXMKICAgICAgICAgICAgICAgIGlmIChzbSAh\nPSBudWxsICYmIHNtLmlzRGVsZXRlZCgpKQogICAgICAgICAgICAgICAgICAg\nIHJldHVybiBBQ1RfTk9ORTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAg\nICAgICAgICBjYXNlIE9QX0FUVEFDSDoKICAgICAgICAgICAgICAgIC8vIGRp\nZSBvbiByZW1vdmVkCiAgICAgICAgICAgICAgICBpZiAoc20gIT0gbnVsbCAm\nJiBzbS5pc0RlbGV0ZWQoKSkKICAgICAgICAgICAgICAgICAgICB0aHJvdyBu\nZXcgVXNlckV4Y2VwdGlvbihfbG9jLmdldCgicmVtb3ZlZCIsCiAgICAgICAg\nICAgICAgICAgICAgICAgIEV4Y2VwdGlvbnMudG9TdHJpbmcob2JqKSkpLnNl\ndEZhaWxlZE9iamVjdChvYmopOwogICAgICAgICAgICAgICAgLy8gY2FzY2Fk\nZSB0aHJvdWdoIG1hbmFnZWQgaW5zdGFuY2VzCiAgICAgICAgICAgICAgICBp\nZiAoc20gIT0gbnVsbCAmJiAhc20uaXNEZXRhY2hlZCgpKQogICAgICAgICAg\nICAgICAgICAgIHJldHVybiBBQ1RfQ0FTQ0FERTsKICAgICAgICAgICAgICAg\nIGJyZWFrOwogICAgICAgICAgICBjYXNlIE9QX1JFRlJFU0g6CiAgICAgICAg\nICAgICAgICAvLyBkaWUgb24gdW5tYW5hZ2VkIGluc3RhbmNlcwogICAgICAg\nICAgICAgICAgaWYgKHNtID09IG51bGwpCiAgICAgICAgICAgICAgICAgICAg\ndGhyb3cgbmV3IFVzZXJFeGNlcHRpb24oX2xvYy5nZXQoIm5vdC1tYW5hZ2Vk\nIiwKICAgICAgICAgICAgICAgICAgICAgICAgRXhjZXB0aW9ucy50b1N0cmlu\nZyhvYmopKSkuc2V0RmFpbGVkT2JqZWN0KG9iaik7CiAgICAgICAgICAgICAg\nICBicmVhazsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIEFDVF9SVU4gfCBB\nQ1RfQ0FTQ0FERTsKICAgIH0KCiAgICBwdWJsaWMgaW50IGhhc2hDb2RlKCkg\newogICAgICAgIHJldHVybiBfYnJva2VyLmhhc2hDb2RlKCk7CiAgICB9Cgog\nICAgcHVibGljIGJvb2xlYW4gZXF1YWxzKE9iamVjdCBvdGhlcikgewogICAg\nICAgIGlmIChvdGhlciA9PSB0aGlzKQogICAgICAgICAgICByZXR1cm4gdHJ1\nZTsKICAgICAgICBpZiAoIShvdGhlciBpbnN0YW5jZW9mIEVudGl0eU1hbmFn\nZXJJbXBsKSkKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIHJl\ndHVybiBfYnJva2VyLmVxdWFscygoKEVudGl0eU1hbmFnZXJJbXBsKSBvdGhl\ncikuX2Jyb2tlcik7Cgl9Cn0K\n","encoding":"base64"}

