{"sha":"4a6a8d68aa085e815072f424990b590e766158c8","node_id":"MDQ6QmxvYjIwNjM2NDo0YTZhOGQ2OGFhMDg1ZTgxNTA3MmY0MjQ5OTBiNTkwZTc2NjE1OGM4","size":3854,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/4a6a8d68aa085e815072f424990b590e766158c8","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5wZXJzaXN0ZW5jZTsKCmltcG9ydCBqYXZhLmxhbmcucmVmbGVj\ndC5NZXRob2Q7CmltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbjsKCmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEuZXZlbnQuTGlmZWN5Y2xlQ2FsbGJhY2tz\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmV2ZW50LkxpZmVjeWNsZUV2\nZW50OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmV2ZW50Lk1ldGhvZExp\nZmVjeWNsZUNhbGxiYWNrczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5s\naWIubG9nLkxvZzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRp\nbC5Mb2NhbGl6ZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5N\nZXRhRGF0YURlZmF1bHRzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0\naWwuVXNlckV4Y2VwdGlvbjsKCi8qKgogKiBDb21tb24gdXRpbGl0aWVzIGZv\nciBwZXJzaXN0ZW5jZSBtZXRhZGF0YSBwYXJzZXJzLgogKgogKiBAYXV0aG9y\nIEFiZSBXaGl0ZQogKi8KY2xhc3MgTWV0YURhdGFQYXJzZXJzIHsKCiAgICBw\ncml2YXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6ZXIgX2xvYyA9IExvY2FsaXpl\nci5mb3JQYWNrYWdlCiAgICAgICAgKE1ldGFEYXRhUGFyc2Vycy5jbGFzcyk7\nCgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGV2ZW50IHR5cGUgY29uc3Rh\nbnRzIGZvciB0aGUgZ2l2ZW4gdGFnLCBvciBudWxsIGlmIG5vbmUuCiAgICAg\nKi8KICAgIHB1YmxpYyBzdGF0aWMgaW50W10gZ2V0RXZlbnRUeXBlcyhNZXRh\nRGF0YVRhZyB0YWcpIHsKICAgICAgICBzd2l0Y2ggKHRhZykgewogICAgICAg\nICAgICBjYXNlIFBSRV9QRVJTSVNUOgogICAgICAgICAgICAgICAgcmV0dXJu\nIG5ldyBpbnRbXXsgTGlmZWN5Y2xlRXZlbnQuQkVGT1JFX1BFUlNJU1QgfTsK\nICAgICAgICAgICAgY2FzZSBQT1NUX1BFUlNJU1Q6CiAgICAgICAgICAgICAg\nICByZXR1cm4gbmV3IGludFtdeyBMaWZlY3ljbGVFdmVudC5BRlRFUl9QRVJT\nSVNUIH07CiAgICAgICAgICAgIGNhc2UgUFJFX1JFTU9WRToKICAgICAgICAg\nICAgICAgIHJldHVybiBuZXcgaW50W117IExpZmVjeWNsZUV2ZW50LkJFRk9S\nRV9ERUxFVEUgfTsKICAgICAgICAgICAgY2FzZSBQT1NUX1JFTU9WRToKICAg\nICAgICAgICAgICAgIHJldHVybiBuZXcgaW50W117IExpZmVjeWNsZUV2ZW50\nLkFGVEVSX0RFTEVURSB9OwogICAgICAgICAgICBjYXNlIFBSRV9VUERBVEU6\nCiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGludFtdeyBMaWZlY3ljbGVF\ndmVudC5CRUZPUkVfU1RPUkUgfTsKICAgICAgICAgICAgY2FzZSBQT1NUX1VQ\nREFURToKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgaW50W117IExpZmVj\neWNsZUV2ZW50LkFGVEVSX1NUT1JFIH07CiAgICAgICAgICAgIGNhc2UgUE9T\nVF9MT0FEOgogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBpbnRbXXsgTGlm\nZWN5Y2xlRXZlbnQuQUZURVJfTE9BRCwKICAgICAgICAgICAgICAgICAgICBM\naWZlY3ljbGVFdmVudC5BRlRFUl9SRUZSRVNIIH07CiAgICAgICAgICAgIGRl\nZmF1bHQ6CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9\nCiAgICB9CgogICAgLyoqCiAgICAgKiBWYWxpZGF0ZSB0aGF0IHRoZSBnaXZl\nbiBsaXN0ZW5lciBjbGFzcyBkb2VzIG5vdCBoYXZlIG11bHRpcGxlIG1ldGhv\nZHMKICAgICAqIGxpc3RlbmluZyBmb3IgdGhlIHNhbWUgbGlmZWN5Y2xlIGV2\nZW50LCB3aGljaCBpcyBmb3JiaWRkZW4gYnkgdGhlIHNwZWMuICAKICAgICAq\nLwogICAgcHVibGljIHN0YXRpYyB2b2lkIHZhbGlkYXRlTWV0aG9kc0ZvclNh\nbWVDYWxsYmFjayhDbGFzcyBjbHMsIAogICAgICAgIENvbGxlY3Rpb248TGlm\nZWN5Y2xlQ2FsbGJhY2tzPiBjYWxsYmFja3MsIE1ldGhvZCBtZXRob2QsIAog\nICAgICAgIE1ldGFEYXRhVGFnIHRhZywgTWV0YURhdGFEZWZhdWx0cyBkZWYs\nIExvZyBsb2cpIHsKICAgICAgICBpZiAoY2FsbGJhY2tzID09IG51bGwgfHwg\nY2FsbGJhY2tzLmlzRW1wdHkoKSkKICAgICAgICAgICAgcmV0dXJuOwoKICAg\nICAgICBmb3IgKExpZmVjeWNsZUNhbGxiYWNrcyBsYzogY2FsbGJhY2tzKSB7\nCiAgICAgICAgICAgIGlmICghKGxjIGluc3RhbmNlb2YgTWV0aG9kTGlmZWN5\nY2xlQ2FsbGJhY2tzKSkKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAg\nICAgICAgICBNZXRob2QgZXhpc3RzID0gKChNZXRob2RMaWZlY3ljbGVDYWxs\nYmFja3MpbGMpLmdldENhbGxiYWNrTWV0aG9kKCk7CiAgICAgICAgICAgIGlm\nICghZXhpc3RzLmdldERlY2xhcmluZ0NsYXNzKCkuZXF1YWxzKG1ldGhvZC5n\nZXREZWNsYXJpbmdDbGFzcygpKSkKICAgICAgICAgICAgICAgIGNvbnRpbnVl\nOwoKICAgICAgICAgICAgUGVyc2lzdGVuY2VNZXRhRGF0YURlZmF1bHRzIGRl\nZmF1bHRzID0gZ2V0UGVyc2lzdGVuY2VEZWZhdWx0cyhkZWYpOwogICAgICAg\nICAgICBMb2NhbGl6ZXIuTWVzc2FnZSBtc2cgPSBfbG9jLmdldCgibXVsdGlw\nbGUtbWV0aG9kcy1vbi1jYWxsYmFjayIsIAogICAgICAgICAgICAgICAgbmV3\nIE9iamVjdFtdIHsgbWV0aG9kLmdldERlY2xhcmluZ0NsYXNzKCkuZ2V0TmFt\nZSgpLCAKICAgICAgICAgICAgICAgIG1ldGhvZC5nZXROYW1lKCksIGV4aXN0\ncy5nZXROYW1lKCksIHRhZy50b1N0cmluZygpIH0pOwogICAgICAgICAgICBp\nZiAoZGVmYXVsdHMgPT0gbnVsbCAKICAgICAgICAgICAgICAgIHx8IGRlZmF1\nbHRzLmdldEFsbG93c011bHRpcGxlTWV0aG9kc0ZvclNhbWVDYWxsYmFjaygp\nKQogICAgICAgICAgICAgICAgbG9nLndhcm4obXNnKTsKICAgICAgICAgICAg\nZWxzZQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFeGNlcHRpb24o\nbXNnKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIC8qKgogICAgICogUmV0\ndXJuIHRoZSB7QGxpbmsgUGVyc2lzdGVuY2VNZXRhRGF0YURlZmF1bHRzfSBp\nbiB1c2UsIG9yIG51bGwgaWYgbm90CiAgICAgKiB1c2luZyBKUEEgZGVmYXVs\ndHMuCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGljIFBlcnNpc3RlbmNlTWV0\nYURhdGFEZWZhdWx0cyBnZXRQZXJzaXN0ZW5jZURlZmF1bHRzCiAgICAgICAg\nKE1ldGFEYXRhRGVmYXVsdHMgZGVmKSB7CiAgICAgICAgaWYgKGRlZiBpbnN0\nYW5jZW9mIFBlcnNpc3RlbmNlTWV0YURhdGFEZWZhdWx0cykKICAgICAgICAg\nICAgcmV0dXJuIChQZXJzaXN0ZW5jZU1ldGFEYXRhRGVmYXVsdHMpIGRlZjsK\nICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KfQo=\n","encoding":"base64"}

