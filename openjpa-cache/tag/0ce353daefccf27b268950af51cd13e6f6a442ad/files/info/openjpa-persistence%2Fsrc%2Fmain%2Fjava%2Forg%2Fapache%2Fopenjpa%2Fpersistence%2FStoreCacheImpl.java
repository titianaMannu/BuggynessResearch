{"sha":"c9eb9be54dc9fb0c016f2beade29372b7041b17f","node_id":"MDQ6QmxvYjIwNjM2NDpjOWViOWJlNTRkYzlmYjBjMDE2ZjJiZWFkZTI5MzcyYjcwNDFiMTdm","size":4586,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/c9eb9be54dc9fb0c016f2beade29372b7041b17f","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5wZXJzaXN0ZW5jZTsKCmltcG9ydCBqYXZhLnV0aWwuQXJyYXlz\nOwppbXBvcnQgamF2YS51dGlsLkJpdFNldDsKaW1wb3J0IGphdmEudXRpbC5D\nb2xsZWN0aW9uOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5kYXRhY2Fj\naGUuRGF0YUNhY2hlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmRhdGFj\nYWNoZS5EZWxlZ2F0aW5nRGF0YUNhY2hlOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLm1ldGEuQ2xhc3NNZXRhRGF0YTsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5tZXRhLk1ldGFEYXRhUmVwb3NpdG9yeTsKCi8qKgogKiBJbXBs\nZW1lbnRzIHRoZSBMMiBjYWNoZSBvdmVyIHRoZSBkYXRhIHN0b3JlIHZpYSBk\nZWxlZ2F0aW9uIHRvIERhdGFDYWNoZS4KICoKICogQGF1dGhvciBBYmUgV2hp\ndGUKICogQHNpbmNlIDAuNC4xCiAqIEBub2phdmFkb2MKICovCnB1YmxpYyBj\nbGFzcyBTdG9yZUNhY2hlSW1wbCAKCWltcGxlbWVudHMgU3RvcmVDYWNoZSB7\nCgogICAgcHJpdmF0ZSBmaW5hbCBNZXRhRGF0YVJlcG9zaXRvcnkgX3JlcG9z\nOwogICAgcHJpdmF0ZSBmaW5hbCBEZWxlZ2F0aW5nRGF0YUNhY2hlIF9jYWNo\nZTsKCiAgICAKICAgIC8qKgogICAgICogQ29uc3RydWN0b3I7IHN1cHBseSBk\nZWxlZ2F0ZS4KICAgICAqLwogICAgcHVibGljIFN0b3JlQ2FjaGVJbXBsKEVu\ndGl0eU1hbmFnZXJGYWN0b3J5SW1wbCBlbWYsIERhdGFDYWNoZSBjYWNoZSkg\newogICAgICAgIF9yZXBvcyA9IGVtZi5nZXRDb25maWd1cmF0aW9uKCkuZ2V0\nTWV0YURhdGFSZXBvc2l0b3J5SW5zdGFuY2UoKTsKICAgICAgICBfY2FjaGUg\nPSBuZXcgRGVsZWdhdGluZ0RhdGFDYWNoZShjYWNoZSwKICAgICAgICAgICAg\nUGVyc2lzdGVuY2VFeGNlcHRpb25zLlRSQU5TTEFUT1IpOwogICAgfQoKICAg\nIHB1YmxpYyBEYXRhQ2FjaGUgZ2V0RGVsZWdhdGUoKSB7CiAgICAgICAgcmV0\ndXJuIF9jYWNoZS5nZXREZWxlZ2F0ZSgpOwogICAgfQoKICAgIHB1YmxpYyBi\nb29sZWFuIGNvbnRhaW5zKENsYXNzIGNscywgT2JqZWN0IG9pZCkgewogICAg\nICAgIHJldHVybiBfY2FjaGUuZ2V0RGVsZWdhdGUoKSAhPSBudWxsICYmIF9j\nYWNoZS5jb250YWlucwogICAgICAgICAgICAoT3BlbkpQQVBlcnNpc3RlbmNl\nLnRvT3BlbkpQQU9iamVjdElkKGdldE1ldGFEYXRhKGNscyksIG9pZCkpOwog\nICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGNvbnRhaW5zQWxsKENsYXNzIGNs\ncywgT2JqZWN0Li4uIG9pZHMpIHsKICAgICAgICByZXR1cm4gY29udGFpbnNB\nbGwoY2xzLCBBcnJheXMuYXNMaXN0KG9pZHMpKTsKICAgIH0KCiAgICBwdWJs\naWMgYm9vbGVhbiBjb250YWluc0FsbChDbGFzcyBjbHMsIENvbGxlY3Rpb24g\nb2lkcykgewogICAgICAgIGlmIChfY2FjaGUuZ2V0RGVsZWdhdGUoKSA9PSBu\ndWxsKQogICAgICAgICAgICByZXR1cm4gb2lkcy5pc0VtcHR5KCk7CgogICAg\nICAgIEJpdFNldCBzZXQgPSBfY2FjaGUuY29udGFpbnNBbGwoT3BlbkpQQVBl\ncnNpc3RlbmNlLnRvT3BlbkpQQU9iamVjdElkcwogICAgICAgICAgICAoZ2V0\nTWV0YURhdGEoY2xzKSwgb2lkcykpOwogICAgICAgIGZvciAoaW50IGkgPSAw\nOyBpIDwgb2lkcy5zaXplKCk7IGkrKykKICAgICAgICAgICAgaWYgKCFzZXQu\nZ2V0KGkpKQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAg\nIHJldHVybiB0cnVlOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHBpbihDbGFz\ncyBjbHMsIE9iamVjdCBvaWQpIHsKICAgICAgICBpZiAoX2NhY2hlLmdldERl\nbGVnYXRlKCkgIT0gbnVsbCkKICAgICAgICAgICAgX2NhY2hlLnBpbihPcGVu\nSlBBUGVyc2lzdGVuY2UudG9PcGVuSlBBT2JqZWN0SWQoZ2V0TWV0YURhdGEo\nY2xzKSwgCiAgICAgICAgICAgICAgICBvaWQpKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBwaW5BbGwoQ2xhc3MgY2xzLCBPYmplY3QuLi4gb2lkcykgewog\nICAgICAgIHBpbkFsbChjbHMsIEFycmF5cy5hc0xpc3Qob2lkcykpOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHBpbkFsbChDbGFzcyBjbHMsIENvbGxlY3Rp\nb24gb2lkcykgewogICAgICAgIGlmIChfY2FjaGUuZ2V0RGVsZWdhdGUoKSAh\nPSBudWxsKQogICAgICAgICAgICBfY2FjaGUucGluQWxsKE9wZW5KUEFQZXJz\naXN0ZW5jZS50b09wZW5KUEFPYmplY3RJZHMKICAgICAgICAgICAgICAgIChn\nZXRNZXRhRGF0YShjbHMpLCBvaWRzKSk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgdW5waW4oQ2xhc3MgY2xzLCBPYmplY3Qgb2lkKSB7CiAgICAgICAgaWYg\nKF9jYWNoZS5nZXREZWxlZ2F0ZSgpICE9IG51bGwpCiAgICAgICAgICAgIF9j\nYWNoZS51bnBpbihPcGVuSlBBUGVyc2lzdGVuY2UudG9PcGVuSlBBT2JqZWN0\nSWQoZ2V0TWV0YURhdGEoY2xzKSwKICAgICAgICAgICAgICAgIG9pZCkpOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHVucGluQWxsKENsYXNzIGNscywgT2Jq\nZWN0Li4uIG9pZHMpIHsKICAgICAgICB1bnBpbkFsbChjbHMsIEFycmF5cy5h\nc0xpc3Qob2lkcykpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHVucGluQWxs\nKENsYXNzIGNscywgQ29sbGVjdGlvbiBvaWRzKSB7CiAgICAgICAgaWYgKF9j\nYWNoZS5nZXREZWxlZ2F0ZSgpICE9IG51bGwpCiAgICAgICAgICAgIF9jYWNo\nZS51bnBpbkFsbChPcGVuSlBBUGVyc2lzdGVuY2UudG9PcGVuSlBBT2JqZWN0\nSWRzCiAgICAgICAgICAgICAgICAoZ2V0TWV0YURhdGEoY2xzKSwgb2lkcykp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGV2aWN0KENsYXNzIGNscywgT2Jq\nZWN0IG9pZCkgewogICAgICAgIGlmIChfY2FjaGUuZ2V0RGVsZWdhdGUoKSAh\nPSBudWxsKQogICAgICAgICAgICBfY2FjaGUucmVtb3ZlKE9wZW5KUEFQZXJz\naXN0ZW5jZS50b09wZW5KUEFPYmplY3RJZChnZXRNZXRhRGF0YShjbHMpLAog\nICAgICAgICAgICAgICAgb2lkKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nZXZpY3RBbGwoQ2xhc3MgY2xzLCBPYmplY3QuLi4gb2lkcykgewogICAgICAg\nIGV2aWN0QWxsKGNscywgQXJyYXlzLmFzTGlzdChvaWRzKSk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgZXZpY3RBbGwoQ2xhc3MgY2xzLCBDb2xsZWN0aW9u\nIG9pZHMpIHsKICAgICAgICBpZiAoX2NhY2hlLmdldERlbGVnYXRlKCkgIT0g\nbnVsbCkKICAgICAgICAgICAgX2NhY2hlLnJlbW92ZUFsbChPcGVuSlBBUGVy\nc2lzdGVuY2UudG9PcGVuSlBBT2JqZWN0SWRzCiAgICAgICAgICAgICAgICAo\nZ2V0TWV0YURhdGEoY2xzKSwgb2lkcykpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIGV2aWN0QWxsKCkgewogICAgICAgIF9jYWNoZS5jbGVhcigpOwogICAg\nfQoKICAgIC8qKgogICAgICogUmV0dXJuIG1ldGFkYXRhIGZvciB0aGUgZ2l2\nZW4gY2xhc3MsIHRocm93aW5nIHRoZSBwcm9wZXIgZXhjZXB0aW9uCiAgICAg\nKiBpZiBub3QgcGVyc2lzdGVudC4KICAgICAqLwogICAgcHJpdmF0ZSBDbGFz\nc01ldGFEYXRhIGdldE1ldGFEYXRhKENsYXNzIGNscykgewogICAgICAgIHRy\neSB7CiAgICAgICAgICAgIHJldHVybiBfcmVwb3MuZ2V0TWV0YURhdGEoY2xz\nLCBudWxsLCB0cnVlKTsKICAgICAgICB9IGNhdGNoIChSdW50aW1lRXhjZXB0\naW9uIHJlKSB7CiAgICAgICAgICAgIHRocm93IFBlcnNpc3RlbmNlRXhjZXB0\naW9ucy50b1BlcnNpc3RlbmNlRXhjZXB0aW9uKHJlKTsKICAgICAgICB9CiAg\nICB9CgogICAgcHVibGljIGludCBoYXNoQ29kZSgpIHsKICAgICAgICByZXR1\ncm4gX2NhY2hlLmhhc2hDb2RlKCk7CiAgICB9CgogICAgcHVibGljIGJvb2xl\nYW4gZXF1YWxzKE9iamVjdCBvdGhlcikgewogICAgICAgIGlmIChvdGhlciA9\nPSB0aGlzKQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICBpZiAo\nIShvdGhlciBpbnN0YW5jZW9mIFN0b3JlQ2FjaGVJbXBsKSkKICAgICAgICAg\nICAgcmV0dXJuIGZhbHNlOwogICAgICAgIHJldHVybiBfY2FjaGUuZXF1YWxz\nICgoKFN0b3JlQ2FjaGVJbXBsKSBvdGhlcikuX2NhY2hlKTsKCX0KfQo=\n","encoding":"base64"}

