{"sha":"cb19b1fb424e19129a9bf6aa3a0938d43522c322","node_id":"MDQ6QmxvYjIwNjM2NDpjYjE5YjFmYjQyNGUxOTEyOWE5YmY2YWEzYTA5MzhkNDM1MjJjMzIy","size":5547,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/cb19b1fb424e19129a9bf6aa3a0938d43522c322","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5wZXJzaXN0ZW5jZS5kZXRhY2htZW50OwoKaW1wb3J0IGphdmEu\ndXRpbC5IYXNoTWFwOwppbXBvcnQgamF2YS51dGlsLk1hcDsKaW1wb3J0IGph\ndmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXI7CmltcG9ydCBqYXZheC5w\nZXJzaXN0ZW5jZS5QZXJzaXN0ZW5jZTsKCmltcG9ydCBqdW5pdC5mcmFtZXdv\ncmsuVGVzdENhc2U7CmltcG9ydCBqdW5pdC50ZXh0dWkuVGVzdFJ1bm5lcjsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBB\nRW50aXR5TWFuYWdlckZhY3Rvcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEucGVyc2lzdGVuY2UuT3BlbkpQQVBlcnNpc3RlbmNlOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5BdXRvRGV0YWNoOwoKLyoqCiAqIFRl\nc3RzIGRldGFjaG1lbnQgZm9yIGJpZGlyZWN0aW9uYWwgb25lLW1hbnkgcmVs\nYXRpb25zaGlwCiAqCiAqIEBhdXRob3IgRGF2aWQgRXp6aW8KICovCnB1Ymxp\nYyBjbGFzcyBUZXN0RGV0YWNobWVudE9uZU1hbnkKICAgIGV4dGVuZHMgVGVz\ndENhc2UgewoKICAgIHByaXZhdGUgT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0\nb3J5IGVtZjsKCiAgICBAU3VwcHJlc3NXYXJuaW5ncygidW5jaGVja2VkIikK\nICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgewogICAgICAgIFN0cmluZyB0eXBl\ncyA9IERldGFjaG1lbnRPbmVNYW55UGFyZW50LmNsYXNzLmdldE5hbWUoKSAr\nICI7IgogICAgICAgICAgICArIERldGFjaG1lbnRPbmVNYW55Q2hpbGQuY2xh\nc3MuZ2V0TmFtZSgpOyAKICAgICAgICBNYXAgcHJvcHMgPSBuZXcgSGFzaE1h\ncCgpOwogICAgICAgIHByb3BzLnB1dCgib3BlbmpwYS5NZXRhRGF0YUZhY3Rv\ncnkiLCAianBhKFR5cGVzPSIgKyB0eXBlcyArICIpIik7CiAgICAgICAgZW1m\nID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeSkgUGVyc2lzdGVuY2Uu\nCiAgICAgICAgICAgIGNyZWF0ZUVudGl0eU1hbmFnZXJGYWN0b3J5KCJ0ZXN0\nIiwgcHJvcHMpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlYXJEb3duKCkg\newogICAgICAgIGlmIChlbWYgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJu\nOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIEVudGl0eU1hbmFnZXIgZW0g\nPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgICAgICBlbS5n\nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgICAgIGVtLmNyZWF0\nZVF1ZXJ5KCJkZWxldGUgZnJvbSBEZXRhY2htZW50T25lTWFueUNoaWxkIiku\nCiAgICAgICAgICAgICAgICBleGVjdXRlVXBkYXRlKCk7CiAgICAgICAgICAg\nIGVtLmNyZWF0ZVF1ZXJ5KCJkZWxldGUgZnJvbSBEZXRhY2htZW50T25lTWFu\neVBhcmVudCIpLgogICAgICAgICAgICAgICAgZXhlY3V0ZVVwZGF0ZSgpOwog\nICAgICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAg\nICAgICAgICBlbS5jbG9zZSgpOwogICAgICAgICAgICBlbWYuY2xvc2UoKTsK\nICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgIH0KICAg\nIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdERldGFjaG1lbnQoKSB7CiAg\nICAgICAgbG9uZyBpZCA9IGNyZWF0ZVBhcmVudEFuZENoaWxkcmVuKCk7CiAg\nICAKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0\neU1hbmFnZXIoKTsKICAgICAgICBPcGVuSlBBUGVyc2lzdGVuY2UuY2FzdChl\nbSkuc2V0QXV0b0RldGFjaChBdXRvRGV0YWNoLkRFVEFDSF9OT05UWFJFQUQp\nOwogICAgICAgIERldGFjaG1lbnRPbmVNYW55UGFyZW50IHBhcmVudCA9IGVt\nLmZpbmQoRGV0YWNobWVudE9uZU1hbnlQYXJlbnQuY2xhc3MsCiAgICAgICAg\nICAgIGlkKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHBhcmVudCk7CiAgICAg\nICAgYXNzZXJ0RmFsc2UoIlRoZSBwYXJlbnQgd2FzIG5vdCBkZXRhY2hlZCIs\nIGVtLmNvbnRhaW5zKHBhcmVudCkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHRlc3RGZXRjaFdpdGhEZXRhY2goKSB7CiAgICAgICAgbG9uZyBpZCA9IGNy\nZWF0ZVBhcmVudEFuZENoaWxkcmVuKCk7CiAgICAgCiAgICAgICAgRW50aXR5\nTWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAg\nICAgT3BlbkpQQVBlcnNpc3RlbmNlLmNhc3QoZW0pLnNldEF1dG9EZXRhY2go\nQXV0b0RldGFjaC5ERVRBQ0hfTk9OVFhSRUFEKTsKICAgICAgICBEZXRhY2ht\nZW50T25lTWFueVBhcmVudCBwYXJlbnQgPSBlbS5maW5kKERldGFjaG1lbnRP\nbmVNYW55UGFyZW50LmNsYXNzLAogICAgICAgICAgICBpZCk7CiAgICAgICAg\nYXNzZXJ0Tm90TnVsbChwYXJlbnQpOwogICAgICAgIGFzc2VydEVxdWFscygi\ncGFyZW50IiwgcGFyZW50LmdldE5hbWUoKSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDIsIHBhcmVudC5nZXRDaGlsZHJlbigpLnNpemUoKSk7CiAgICAgICAg\nRGV0YWNobWVudE9uZU1hbnlDaGlsZCBjaGlsZDAgPSBwYXJlbnQuZ2V0Q2hp\nbGRyZW4oKS5nZXQoMCk7CiAgICAgICAgRGV0YWNobWVudE9uZU1hbnlDaGls\nZCBjaGlsZDEgPSBwYXJlbnQuZ2V0Q2hpbGRyZW4oKS5nZXQoMSk7CiAgICAg\nICAgYXNzZXJ0Tm90TnVsbCgiRGlkIG5vdCBmaW5kIGV4cGVjdGVkIGZpcnN0\nIGNoaWxkIiwgY2hpbGQwKTsKICAgICAgICBhc3NlcnROb3ROdWxsKCJEaWQg\nbm90IGZpbmQgZXhwZWN0ZWQgc2Vjb25kIGNoaWxkIiwgY2hpbGQxKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoImNoaWxkMCIsIGNoaWxkMC5nZXROYW1lKCkp\nOwogICAgICAgIGFzc2VydEZhbHNlKCJUaGUgZmlyc3QgY2hpbGQgd2FzIG5v\ndCBkZXRhY2hlZCIsIGVtLmNvbnRhaW5zKGNoaWxkMCkpOwogICAgICAgIGFz\nc2VydEVxdWFscygiY2hpbGQxIiwgY2hpbGQxLmdldE5hbWUoKSk7CiAgICAg\nICAgYXNzZXJ0RmFsc2UoIlRoZSBzZWNvbmQgY2hpbGQgd2FzIG5vdCBkZXRh\nY2hlZCIsIGVtLmNvbnRhaW5zKGNoaWxkMSkpOwogICAgICAgIGVtLmNsb3Nl\nKCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RGZXRjaFdpdGhE\nZXRhY2hGb3JUb09uZVJlbGF0aW9uc2hpcCgpIHsKICAgICAgICBsb25nIGlk\nID0gY3JlYXRlUGFyZW50QW5kQ2hpbGRyZW4oKTsKICAgICAgICAKICAgICAg\nICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIo\nKTsKICAgICAgICBPcGVuSlBBUGVyc2lzdGVuY2UuY2FzdChlbSkuc2V0QXV0\nb0RldGFjaChBdXRvRGV0YWNoLkRFVEFDSF9OT05UWFJFQUQpOwogICAgICAg\nIERldGFjaG1lbnRPbmVNYW55UGFyZW50IHBhcmVudCA9IGVtLmZpbmQoRGV0\nYWNobWVudE9uZU1hbnlQYXJlbnQuY2xhc3MsCiAgICAgICAgICAgIGlkKTsK\nICAgICAgICBhc3NlcnROb3ROdWxsKHBhcmVudCk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKDIsIHBhcmVudC5nZXRDaGlsZHJlbigpLnNpemUoKSk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKCJUb09uZSByZWxhdGlvbnNoaXAgd2FzIG5vdCBl\nYWdlcmx5IGZldGNoZWQiLCAKICAgICAgICAgICAgICBwYXJlbnQsIHBhcmVu\ndC5nZXRDaGlsZHJlbigpLmdldCgwKS5nZXRQYXJlbnQoKSk7CiAgICAgICAg\nZW0uY2xvc2UoKTsKICAgIH0KICAgIAogICAgcHJpdmF0ZSBsb25nIGNyZWF0\nZVBhcmVudEFuZENoaWxkcmVuKCkgewogICAgICAgIERldGFjaG1lbnRPbmVN\nYW55UGFyZW50IHBhcmVudCA9IG5ldyBEZXRhY2htZW50T25lTWFueVBhcmVu\ndCgpOwogICAgICAgIHBhcmVudC5zZXROYW1lKCJwYXJlbnQiKTsKICAgICAg\nICBmb3IgKGludCBpID0gMDsgaSA8IDI7IGkrKykgewogICAgICAgICAgICBE\nZXRhY2htZW50T25lTWFueUNoaWxkIGNoaWxkID0gbmV3IERldGFjaG1lbnRP\nbmVNYW55Q2hpbGQoKTsKICAgICAgICAgICAgY2hpbGQuc2V0TmFtZSgiY2hp\nbGQiICsgaSk7CiAgICAgICAgICAgIHBhcmVudC5hZGRDaGlsZChjaGlsZCk7\nCiAgICAgICAgfQogICAgICAKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0g\nZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRUcmFu\nc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgZW0ucGVyc2lzdChwYXJlbnQp\nOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAg\nICAgbG9uZyBpZCA9IHBhcmVudC5nZXRJZCgpOwogICAgICAgIGFzc2VydE5v\ndE51bGwocGFyZW50LmdldENoaWxkcmVuKCkpOwogICAgICAgIGFzc2VydEVx\ndWFscygyLCBwYXJlbnQuZ2V0Q2hpbGRyZW4oKS5zaXplKCkpOwogICAgICAg\nIGFzc2VydFRydWUoIlRoZSBwYXJlbnQgaXMgbm90IG1hbmFnZWQiLCBlbS5j\nb250YWlucyhwYXJlbnQpKTsKICAgICAgICBEZXRhY2htZW50T25lTWFueUNo\naWxkIGNoaWxkMCA9IHBhcmVudC5nZXRDaGlsZHJlbigpLmdldCgwKTsKICAg\nICAgICBEZXRhY2htZW50T25lTWFueUNoaWxkIGNoaWxkMSA9IHBhcmVudC5n\nZXRDaGlsZHJlbigpLmdldCgxKTsKICAgICAgICBhc3NlcnRFcXVhbHMoImNo\naWxkMCIsIGNoaWxkMC5nZXROYW1lKCkpOwogICAgICAgIGFzc2VydEVxdWFs\ncygiY2hpbGQxIiwgY2hpbGQxLmdldE5hbWUoKSk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKCJUaGUgZmlyc3QgY2hpbGQgaGFzIG5vIHJlbGF0aW9uc2hpcCB0\nbyB0aGUgcGFyZW50IiwgCiAgICAgICAgICAgIHBhcmVudCwgY2hpbGQwLmdl\ndFBhcmVudCgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIlRoZSBzZWNvbmQg\nY2hpbGQgaGFzIG5vIHJlbGF0aW9uc2hpcCB0byB0aGUgcGFyZW50IiwgCiAg\nICAgICAgICAgIHBhcmVudCwgY2hpbGQxLmdldFBhcmVudCgpKTsKICAgICAg\nICBlbS5jbG9zZSgpOwogICAgICAgIHJldHVybiBpZDsKICAgIH0KCiAgICBw\ndWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7CiAgICAg\nICAgVGVzdFJ1bm5lci5ydW4oVGVzdERldGFjaG1lbnRPbmVNYW55LmNsYXNz\nKTsKICAgIH0KfQoK\n","encoding":"base64"}

