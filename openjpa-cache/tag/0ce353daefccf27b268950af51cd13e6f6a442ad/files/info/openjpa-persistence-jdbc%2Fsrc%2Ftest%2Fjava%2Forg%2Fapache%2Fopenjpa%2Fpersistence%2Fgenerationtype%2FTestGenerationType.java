{"sha":"e0b7536641bceb779438ae2aead235db2f88fc2d","node_id":"MDQ6QmxvYjIwNjM2NDplMGI3NTM2NjQxYmNlYjc3OTQzOGFlMmFlYWQyMzVkYjJmODhmYzJk","size":4070,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/e0b7536641bceb779438ae2aead235db2f88fc2d","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5wZXJzaXN0ZW5jZS5nZW5lcmF0aW9udHlwZTsKCmltcG9ydCBq\nYXZhLnV0aWwuSGFzaE1hcDsKaW1wb3J0IGphdmEudXRpbC5MaXN0OwppbXBv\ncnQgamF2YS51dGlsLk1hcDsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVu\ndGl0eU1hbmFnZXI7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlU\ncmFuc2FjdGlvbjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLlBlcnNpc3Rl\nbmNlOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuUXVlcnk7CgppbXBvcnQg\nanVuaXQuZnJhbWV3b3JrLlRlc3RDYXNlOwppbXBvcnQganVuaXQudGV4dHVp\nLlRlc3RSdW5uZXI7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMu\nY29uZi5KREJDQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdlcjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBRW50aXR5\nTWFuYWdlckZhY3Rvcnk7CgovKioKICogU2ltcGxlIHRlc3QgY2FzZSB0byB0\nZXN0IHRoZSBHZW5lcmF0aW9uVHlwZSBmb3IgQElkLi4uCiAqCiAqIEBhdXRo\nb3IgS2V2aW4gU3V0dGVyCiAqLwpwdWJsaWMgY2xhc3MgVGVzdEdlbmVyYXRp\nb25UeXBlCiAgICBleHRlbmRzIFRlc3RDYXNlIHsKCiAgICBwcml2YXRlIE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeSBlbWY7CgogICAgcHVibGljIHZv\naWQgc2V0VXAoKSB7CiAgICAgICAgTWFwIHByb3BzID0gbmV3IEhhc2hNYXAo\nKTsKICAgICAgICBwcm9wcy5wdXQoIm9wZW5qcGEuTWV0YURhdGFGYWN0b3J5\nIiwKICAgICAgICAgICAgImpwYShUeXBlcz0iICsgSWRlbnRpdHlHZW5lcmF0\naW9uVHlwZS5jbGFzcy5nZXROYW1lKCkgKyAiKSIpOwogICAgICAgIGVtZiA9\nIChPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnkpIFBlcnNpc3RlbmNlLgog\nICAgICAgICAgICBjcmVhdGVFbnRpdHlNYW5hZ2VyRmFjdG9yeSgidGVzdCIs\nIHByb3BzKTsKICAgICAgICAvKgogICAgICAgICAqIElmIHRoZSBEQkRpY3Rp\nb25hcnkgZG9lc24ndCBzdXBwb3J0IEF1dG9Bc3NpZ24obWVudCkgb2YgY29s\ndW1uCiAgICAgICAgICogdmFsdWVzLCB0aGVuIG51bGwgb3V0IHRoZSBlbWYg\naW5zdGFuY2UgdG8gcHJldmVudCB0aGUgcmVzdCBvZgogICAgICAgICAqIHRo\nZSB0ZXN0cyBmcm9tIGV4ZWN1dGluZy4KICAgICAgICAgKi8KICAgICAgICBK\nREJDQ29uZmlndXJhdGlvbiBjb25mID0gKEpEQkNDb25maWd1cmF0aW9uKSBl\nbWYuZ2V0Q29uZmlndXJhdGlvbigpOwogICAgICAgIGlmICghY29uZi5nZXRE\nQkRpY3Rpb25hcnlJbnN0YW5jZSgpLnN1cHBvcnRzQXV0b0Fzc2lnbikgewog\nICAgICAgICAgICBlbWYgPSBudWxsOwogICAgICAgIH0KCiAgICB9CgogICAg\ncHVibGljIHZvaWQgdGVhckRvd24oKSB7CiAgICAgICAgaWYgKGVtZiA9PSBu\ndWxsKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4o\nKTsKICAgICAgICAgICAgZW0uY3JlYXRlUXVlcnkoImRlbGV0ZSBmcm9tIElk\nZW50aXR5R2VuZXJhdGlvblR5cGUiKS5leGVjdXRlVXBkYXRlKCk7CiAgICAg\nICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAg\nICAgIGVtLmNsb3NlKCk7CiAgICAgICAgICAgIGVtZi5jbG9zZSgpOwogICAg\nICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgfQogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHRlc3RDcmVhdGVFbnRpdHlNYW5hZ2VyKCkgewog\nICAgICAgIGlmIChlbWYgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuOwog\nICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFu\nYWdlcigpOwoKICAgICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0ID0gZW0uZ2V0\nVHJhbnNhY3Rpb24oKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHQpOwogICAg\nICAgIHQuYmVnaW4oKTsKICAgICAgICB0LnNldFJvbGxiYWNrT25seSgpOwog\nICAgICAgIHQucm9sbGJhY2soKTsKCiAgICAgICAgLy8gb3BlbmpwYS1mYWNh\nZGUgdGVzdAogICAgICAgIGFzc2VydFRydWUoZW0gaW5zdGFuY2VvZiBPcGVu\nSlBBRW50aXR5TWFuYWdlcik7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFn\nZXIgb2plbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlcikgZW07CiAgICAgICAg\nb2plbS5nZXRGZXRjaFBsYW4oKS5zZXRNYXhGZXRjaERlcHRoKC0xKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoLTEsIG9qZW0uZ2V0RmV0Y2hQbGFuKCkuZ2V0\nTWF4RmV0Y2hEZXB0aCgpKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHRlc3RQZXJzaXN0KCkgewogICAgICAgIGlmIChl\nbWYgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIEVudGl0\neU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAg\nICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBlbS5w\nZXJzaXN0KG5ldyBJZGVudGl0eUdlbmVyYXRpb25UeXBlKCkpOwogICAgICAg\nIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xv\nc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0UXVlcnkoKSB7CiAg\nICAgICAgaWYgKGVtZiA9PSBudWxsKQogICAgICAgICAgICByZXR1cm47CiAg\nICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwog\nICAgICAgIElkZW50aXR5R2VuZXJhdGlvblR5cGUgaWd0ID0gbmV3IElkZW50\naXR5R2VuZXJhdGlvblR5cGUoKTsKICAgICAgICBpZ3Quc2V0U29tZURhdGEo\nIlNvbWVTdHJpbmciKTsKICAgICAgICBlbS5wZXJzaXN0KGlndCk7CiAgICAg\nICAgLy8gYWRkIGFub3RoZXIgSWRlbnRpdHlHZW5lcmF0aW9uVHlwZSBvYmpl\nY3QKICAgICAgICBlbS5wZXJzaXN0KG5ldyBJZGVudGl0eUdlbmVyYXRpb25U\neXBlKCkpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7\nCgogICAgICAgIC8vIENoZWNrIHRvIG1ha2Ugc3VyZSB0aGVyZSBhcmUgdHdv\nIG9iamVjdHMuLi4KICAgICAgICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnko\nInNlbGVjdCB4IGZyb20gSWRlbnRpdHlHZW5lcmF0aW9uVHlwZSB4Iik7CiAg\nICAgICAgTGlzdCBsID0gcS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDIsIGwuc2l6ZSgpKTsKICAgICAgICBlbS5jbG9zZSgpOwog\nICAgfQoKICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFy\nZ3MpIHsKICAgICAgICBUZXN0UnVubmVyLnJ1bihUZXN0R2VuZXJhdGlvblR5\ncGUuY2xhc3MpOwogICAgfQp9Cgo=\n","encoding":"base64"}

