{"sha":"9f306c350e3e1dfcc3b98fc2958e30fc75be567f","node_id":"MDQ6QmxvYjIwNjM2NDo5ZjMwNmMzNTBlM2UxZGZjYzNiOThmYzI5NThlMzBmYzc1YmU1Njdm","size":4231,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/9f306c350e3e1dfcc3b98fc2958e30fc75be567f","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5wZXJzaXN0ZW5jZS5xdWVyeTsKCmltcG9ydCBqYXZhLnV0aWwu\nSGFzaE1hcDsKaW1wb3J0IGphdmEudXRpbC5MaXN0OwppbXBvcnQgamF2YS51\ndGlsLk1hcDsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFn\nZXI7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyRmFj\ndG9yeTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLlBlcnNpc3RlbmNlOwpp\nbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuUXVlcnk7CgppbXBvcnQganVuaXQu\nZnJhbWV3b3JrLlRlc3RDYXNlOwppbXBvcnQganVuaXQudGV4dHVpLlRlc3RS\ndW5uZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uu\nT3BlbkpQQVF1ZXJ5OwoKLyoqCiAqIFRlc3QgdGhhdCB3ZSBjYW4gZXhjbHVk\nZSBzdWJjbGFzcyBpbnN0YW5jZXMgZnJvbSBxdWVyeSByZXN1bHRzLgogKgog\nKiBAYXV0aG9yIEFiZSBXaGl0ZQogKi8KcHVibGljIGNsYXNzIFRlc3RRdWVy\neUV4Y2x1ZGluZ1N1YmNsYXNzZXMKICAgIGV4dGVuZHMgVGVzdENhc2UgewoK\nICAgIHByaXZhdGUgRW50aXR5TWFuYWdlckZhY3RvcnkgZW1mOwoKICAgIHB1\nYmxpYyB2b2lkIHNldFVwKCkgewogICAgICAgIE1hcCBwcm9wcyA9IG5ldyBI\nYXNoTWFwKCk7CiAgICAgICAgcHJvcHMucHV0KCJvcGVuanBhLk1ldGFEYXRh\nRmFjdG9yeSIsICJqcGEoVHlwZXM9IiAKICAgICAgICAgICAgKyBNYW55T25l\nRW50aXR5LmNsYXNzLmdldE5hbWUoKSArICI7IgogICAgICAgICAgICArIE1h\nbnlPbmVFbnRpdHlTdWIuY2xhc3MuZ2V0TmFtZSgpICsgIikiKTsKICAgICAg\nICBlbWYgPSBQZXJzaXN0ZW5jZS5jcmVhdGVFbnRpdHlNYW5hZ2VyRmFjdG9y\neSgidGVzdCIsIHByb3BzKTsKCiAgICAgICAgTWFueU9uZUVudGl0eSBlMSA9\nIG5ldyBNYW55T25lRW50aXR5KCk7CiAgICAgICAgZTEuc2V0TmFtZSgiZTEi\nKTsgCiAgICAgICAgTWFueU9uZUVudGl0eSBlMiA9IG5ldyBNYW55T25lRW50\naXR5KCk7CiAgICAgICAgZTIuc2V0TmFtZSgiZTIiKTsgCiAgICAgICAgTWFu\neU9uZUVudGl0eSBpbnZhbGlkID0gbmV3IE1hbnlPbmVFbnRpdHkoKTsKICAg\nICAgICBpbnZhbGlkLnNldE5hbWUoImludmFsaWQiKTsgCiAgICAgICAgTWFu\neU9uZUVudGl0eVN1YiBlc3ViMSA9IG5ldyBNYW55T25lRW50aXR5U3ViKCk7\nCiAgICAgICAgZXN1YjEuc2V0TmFtZSgiZXN1YjEiKTsgCiAgICAgICAgTWFu\neU9uZUVudGl0eVN1YiBlc3ViMiA9IG5ldyBNYW55T25lRW50aXR5U3ViKCk7\nCiAgICAgICAgZXN1YjIuc2V0TmFtZSgiZXN1YjIiKTsgCiAgICAgICAgTWFu\neU9uZUVudGl0eVN1YiBpbnZhbGlkc3ViID0gbmV3IE1hbnlPbmVFbnRpdHlT\ndWIoKTsKICAgICAgICBpbnZhbGlkc3ViLnNldE5hbWUoImludmFsaWRzdWIi\nKTsgCgogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50\naXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVn\naW4oKTsKICAgICAgICBlbS5wZXJzaXN0KGUxKTsKICAgICAgICBlbS5wZXJz\naXN0KGUyKTsKICAgICAgICBlbS5wZXJzaXN0KGludmFsaWQpOwogICAgICAg\nIGVtLnBlcnNpc3QoZXN1YjEpOwogICAgICAgIGVtLnBlcnNpc3QoZXN1YjIp\nOwogICAgICAgIGVtLnBlcnNpc3QoaW52YWxpZHN1Yik7CiAgICAgICAgZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlYXJEb3duKCkgewogICAgICAg\nIGlmIChlbWYgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAg\nIHRyeSB7CiAgICAgICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3Jl\nYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgICAgICBlbS5nZXRUcmFuc2Fj\ndGlvbigpLmJlZ2luKCk7CiAgICAgICAgICAgIGVtLmNyZWF0ZVF1ZXJ5KCJk\nZWxldGUgZnJvbSBNYW55T25lRW50aXR5IikuZXhlY3V0ZVVwZGF0ZSgpOwog\nICAgICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAg\nICAgICAgICBlbS5jbG9zZSgpOwogICAgICAgICAgICBlbWYuY2xvc2UoKTsK\nICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBl\nLnByaW50U3RhY2tUcmFjZSgpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJs\naWMgdm9pZCB0ZXN0UXVlcnkoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBl\nbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgUXVlcnkg\ncSA9IGVtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgZSBmcm9tIE1hbnlPbmVFbnRp\ndHkgZSAiCiAgICAgICAgICAgICsgIndoZXJlIGUubmFtZSBsaWtlICdlJScg\nb3JkZXIgYnkgZS5uYW1lIGFzYyIpOwogICAgICAgIExpc3Q8TWFueU9uZUVu\ndGl0eT4gcmVzID0gKExpc3Q8TWFueU9uZUVudGl0eT4pIHEuZ2V0UmVzdWx0\nTGlzdCgpOwogICAgICAgIGFzc2VydEVxdWFscyg0LCByZXMuc2l6ZSgpKTsK\nICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IDI7IGkrKykgewogICAgICAg\nICAgICBhc3NlcnRFcXVhbHMoTWFueU9uZUVudGl0eS5jbGFzcywgcmVzLmdl\ndChpKS5nZXRDbGFzcygpKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKCJl\nIiArIChpICsgMSksIHJlcy5nZXQoaSkuZ2V0TmFtZSgpKTsKICAgICAgICB9\nCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCAyOyBpKyspIHsKICAgICAg\nICAgICAgYXNzZXJ0RXF1YWxzKE1hbnlPbmVFbnRpdHlTdWIuY2xhc3MsIHJl\ncy5nZXQoaSArIDIpLmdldENsYXNzKCkpOwogICAgICAgICAgICBhc3NlcnRF\ncXVhbHMoImVzdWIiICsgKGkgKyAxKSwgcmVzLmdldChpICsgMikuZ2V0TmFt\nZSgpKTsKICAgICAgICB9CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0UXVlcnlFeGNsdWRpbmdTdWJjbGFzc2VzKCkg\newogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5\nTWFuYWdlcigpOwogICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeSgi\nc2VsZWN0IGUgZnJvbSBNYW55T25lRW50aXR5IGUgIgogICAgICAgICAgICAr\nICJ3aGVyZSBlLm5hbWUgbGlrZSAnZSUnIG9yZGVyIGJ5IGUubmFtZSBhc2Mi\nKTsKICAgICAgICAoKE9wZW5KUEFRdWVyeSkgcSkuc2V0U3ViY2xhc3Nlcyhm\nYWxzZSk7CiAgICAgICAgTGlzdDxNYW55T25lRW50aXR5PiByZXMgPSAoTGlz\ndDxNYW55T25lRW50aXR5PikgcS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDIsIHJlcy5zaXplKCkpOwogICAgICAgIGZvciAoaW50\nIGkgPSAwOyBpIDwgcmVzLnNpemUoKTsgaSsrKSB7CiAgICAgICAgICAgIGFz\nc2VydEVxdWFscyhNYW55T25lRW50aXR5LmNsYXNzLCByZXMuZ2V0KGkpLmdl\ndENsYXNzKCkpOwogICAgICAgICAgICBhc3NlcnRFcXVhbHMoImUiICsgKGkg\nKyAxKSwgcmVzLmdldChpKS5nZXROYW1lKCkpOwogICAgICAgIH0KICAgICAg\nICBlbS5jbG9zZSgpOwogICAgfQoKCiAgICBwdWJsaWMgc3RhdGljIHZvaWQg\nbWFpbihTdHJpbmdbXSBhcmdzKSB7CiAgICAgICAgVGVzdFJ1bm5lci5ydW4o\nVGVzdFF1ZXJ5RXhjbHVkaW5nU3ViY2xhc3Nlcy5jbGFzcyk7CiAgICB9Cn0K\nCg==\n","encoding":"base64"}

