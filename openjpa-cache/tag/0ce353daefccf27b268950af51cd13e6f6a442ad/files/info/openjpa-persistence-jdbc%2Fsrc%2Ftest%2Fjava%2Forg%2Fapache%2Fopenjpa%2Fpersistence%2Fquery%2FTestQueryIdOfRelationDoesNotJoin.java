{"sha":"ddff2a68710c6cdb5a778d0305fcbfa4ac8c1123","node_id":"MDQ6QmxvYjIwNjM2NDpkZGZmMmE2ODcxMGM2Y2RiNWE3NzhkMDMwNWZjYmZhNGFjOGMxMTIz","size":3165,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/ddff2a68710c6cdb5a778d0305fcbfa4ac8c1123","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5wZXJzaXN0ZW5jZS5xdWVyeTsKCmltcG9ydCBqYXZhLnV0aWwu\nSGFzaE1hcDsKaW1wb3J0IGphdmEudXRpbC5MaXN0OwppbXBvcnQgamF2YS51\ndGlsLk1hcDsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFn\nZXI7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyRmFj\ndG9yeTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLlBlcnNpc3RlbmNlOwpp\nbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuUXVlcnk7CgppbXBvcnQganVuaXQu\nZnJhbWV3b3JrLlRlc3RDYXNlOwppbXBvcnQganVuaXQudGV4dHVpLlRlc3RS\ndW5uZXI7CgovKioKICogVGVzdCB0aGF0IHF1ZXJ5aW5nIHRoZSBpZCBvZiBh\nIHJlbGF0ZWQgbWFueS1vbmUgKG9yIG9uZS1vbmUpIGRvZXMgbm90IGNyZWF0\nZQogKiBhIGpvaW4gYWNyb3NzIHRoZSB0YWJsZXMuCiAqCiAqIEBhdXRob3Ig\nQWJlIFdoaXRlCiAqLwpwdWJsaWMgY2xhc3MgVGVzdFF1ZXJ5SWRPZlJlbGF0\naW9uRG9lc05vdEpvaW4KICAgIGV4dGVuZHMgVGVzdENhc2UgewoKICAgIHBy\naXZhdGUgRW50aXR5TWFuYWdlckZhY3RvcnkgZW1mOwogICAgcHJpdmF0ZSBs\nb25nIGUzSWQ7CgogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7CiAgICAgICAg\nTWFwIHByb3BzID0gbmV3IEhhc2hNYXAoKTsKICAgICAgICBwcm9wcy5wdXQo\nIm9wZW5qcGEuTWV0YURhdGFGYWN0b3J5IiwgImpwYShUeXBlcz0iCiAgICAg\nICAgICAgICAgICArIE1hbnlPbmVFbnRpdHkuY2xhc3MuZ2V0TmFtZSgpICsg\nIjsiCiAgICAgICAgICAgICAgICArIE1hbnlPbmVFbnRpdHlTdWIuY2xhc3Mu\nZ2V0TmFtZSgpICsgIikiKTsKICAgICAgICBlbWYgPSBQZXJzaXN0ZW5jZS5j\ncmVhdGVFbnRpdHlNYW5hZ2VyRmFjdG9yeSgidGVzdCIsIHByb3BzKTsKCiAg\nICAgICAgTWFueU9uZUVudGl0eSBlMSA9IG5ldyBNYW55T25lRW50aXR5KCk7\nCiAgICAgICAgZTEuc2V0TmFtZSgiZTEiKTsKICAgICAgICBNYW55T25lRW50\naXR5IGUyID0gbmV3IE1hbnlPbmVFbnRpdHkoKTsKICAgICAgICBlMi5zZXRO\nYW1lKCJlMiIpOwogICAgICAgIE1hbnlPbmVFbnRpdHkgZTMgPSBuZXcgTWFu\neU9uZUVudGl0eSgpOwogICAgICAgIGUzLnNldE5hbWUoImUzIik7CiAgICAg\nICAgZTEuc2V0UmVsKGUzKTsKICAgICAgICBlMi5zZXRSZWwoZTEpOwoKICAg\nICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAg\nICAgICAgZW0ucGVyc2lzdChlMSk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rp\nb24oKS5jb21taXQoKTsKICAgICAgICBlM0lkID0gZTMuZ2V0SWQoKTsKCiAg\nICAgICAgLy8gd2UgaW50ZW50aW9uYWxseSBjcmVhdGUgYW4gb3JwaGFuZWQg\ncmVmZXJlbmNlIG9uIGUxLnJlbAogICAgICAgIGVtLmdldFRyYW5zYWN0aW9u\nKCkuYmVnaW4oKTsKICAgICAgICBlbS5yZW1vdmUoZTMpOwogICAgICAgIGVt\nLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2Uo\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZWFyRG93bigpIHsKICAgICAg\nICBpZiAoZW1mID09IG51bGwpCiAgICAgICAgICAgIHJldHVybjsKICAgICAg\nICB0cnkgewogICAgICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNy\nZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICAgICAgZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5iZWdpbigpOwogICAgICAgICAgICBlbS5jcmVhdGVRdWVyeSgi\nZGVsZXRlIGZyb20gTWFueU9uZUVudGl0eSIpLmV4ZWN1dGVVcGRhdGUoKTsK\nICAgICAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAg\nICAgICAgICAgZW0uY2xvc2UoKTsKICAgICAgICAgICAgZW1mLmNsb3NlKCk7\nCiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAg\nZS5wcmludFN0YWNrVHJhY2UoKTsKICAgICAgICB9CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgdGVzdFF1ZXJ5KCkgewogICAgICAgIEVudGl0eU1hbmFnZXIg\nZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIFF1ZXJ5\nIHEgPSBlbS5jcmVhdGVRdWVyeSgic2VsZWN0IGUgZnJvbSBNYW55T25lRW50\naXR5IGUgIgogICAgICAgICAgICArICJ3aGVyZSBlLnJlbC5pZCA9IDppZCIp\nLnNldFBhcmFtZXRlcigiaWQiLCBlM0lkKTsKICAgICAgICBMaXN0IHJlcyA9\nIHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGFzc2VydEVxdWFscygxLCBy\nZXMuc2l6ZSgpKTsKCiAgICAgICAgTWFueU9uZUVudGl0eSBlID0gKE1hbnlP\nbmVFbnRpdHkpIHJlcy5nZXQoMCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJl\nMSIsIGUuZ2V0TmFtZSgpKTsKICAgICAgICBhc3NlcnROdWxsKGUuZ2V0UmVs\nKCkpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIHN0\nYXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykgewogICAgICAgIFRlc3RS\ndW5uZXIucnVuKFRlc3RRdWVyeUlkT2ZSZWxhdGlvbkRvZXNOb3RKb2luLmNs\nYXNzKTsKICAgIH0KfQoK\n","encoding":"base64"}

