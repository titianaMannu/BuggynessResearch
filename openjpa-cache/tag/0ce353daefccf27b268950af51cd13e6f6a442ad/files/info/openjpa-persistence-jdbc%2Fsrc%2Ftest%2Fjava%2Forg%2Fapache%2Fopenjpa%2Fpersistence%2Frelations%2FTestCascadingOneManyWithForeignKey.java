{"sha":"f94d4354e58ef315f7fdd9cc452b7c5a8358159d","node_id":"MDQ6QmxvYjIwNjM2NDpmOTRkNDM1NGU1OGVmMzE1ZjdmZGQ5Y2M0NTJiN2M1YTgzNTgxNTlk","size":6143,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/f94d4354e58ef315f7fdd9cc452b7c5a8358159d","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5wZXJzaXN0ZW5jZS5yZWxhdGlvbnM7CgppbXBvcnQgamF2YS51\ndGlsLkhhc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGph\ndmEudXRpbC5NYXA7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlN\nYW5hZ2VyOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuUGVyc2lzdGVuY2U7\nCgppbXBvcnQganVuaXQuZnJhbWV3b3JrLlRlc3RDYXNlOwppbXBvcnQganVu\naXQudGV4dHVpLlRlc3RSdW5uZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5jb25mLkpEQkNDb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2Vy\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5K\nUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeTsKCi8qKgogKiBUZXN0cyBhIGNhc2Nh\nZGluZyBvbmUtbWFueSBiYWNrZWQgYnkgYSBmb3JlaWduIGtleS4KICoKICog\nQGF1dGhvciBBYmUgV2hpdGUKICovCnB1YmxpYyBjbGFzcyBUZXN0Q2FzY2Fk\naW5nT25lTWFueVdpdGhGb3JlaWduS2V5CiAgICBleHRlbmRzIFRlc3RDYXNl\nIHsKCiAgICBwcml2YXRlIE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeSBl\nbWY7CgogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7CiAgICAgICAgU3RyaW5n\nIHR5cGVzID0gQ2FzY2FkaW5nT25lTWFueVBhcmVudC5jbGFzcy5nZXROYW1l\nKCkgKyAiOyIKICAgICAgICAgICAgKyBDYXNjYWRpbmdPbmVNYW55Q2hpbGQu\nY2xhc3MuZ2V0TmFtZSgpOyAKICAgICAgICBNYXAgcHJvcHMgPSBuZXcgSGFz\naE1hcCgpOwogICAgICAgIHByb3BzLnB1dCgib3BlbmpwYS5NZXRhRGF0YUZh\nY3RvcnkiLCAianBhKFR5cGVzPSIgKyB0eXBlcyArICIpIik7CiAgICAgICAg\nZW1mID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeSkgUGVyc2lzdGVu\nY2UuCiAgICAgICAgICAgIGNyZWF0ZUVudGl0eU1hbmFnZXJGYWN0b3J5KCJ0\nZXN0IiwgcHJvcHMpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlYXJEb3du\nKCkgewogICAgICAgIGlmIChlbWYgPT0gbnVsbCkKICAgICAgICAgICAgcmV0\ndXJuOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIEVudGl0eU1hbmFnZXIg\nZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgICAgICBl\nbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgICAgIGVtLmNy\nZWF0ZVF1ZXJ5KCJkZWxldGUgZnJvbSBDYXNjYWRpbmdPbmVNYW55Q2hpbGQi\nKS5leGVjdXRlVXBkYXRlKCk7CiAgICAgICAgICAgIGVtLmNyZWF0ZVF1ZXJ5\nKCJkZWxldGUgZnJvbSBDYXNjYWRpbmdPbmVNYW55UGFyZW50IikuCiAgICAg\nICAgICAgICAgICBleGVjdXRlVXBkYXRlKCk7CiAgICAgICAgICAgIGVtLmdl\ndFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgICAgIGVtLmNsb3Nl\nKCk7CiAgICAgICAgICAgIGVtZi5jbG9zZSgpOwogICAgICAgIH0gY2F0Y2gg\nKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHRlc3RQZXJzaXN0KCkgewogICAgICAgIENhc2NhZGluZ09uZU1hbnlQ\nYXJlbnQgcGFyZW50ID0gbmV3IENhc2NhZGluZ09uZU1hbnlQYXJlbnQoKTsK\nICAgICAgICBwYXJlbnQuc2V0TmFtZSgicGFyZW50Iik7CiAgICAgICAgZm9y\nIChpbnQgaSA9IDA7IGkgPCAyOyBpKyspIHsKICAgICAgICAgICAgQ2FzY2Fk\naW5nT25lTWFueUNoaWxkIGNoaWxkID0gbmV3IENhc2NhZGluZ09uZU1hbnlD\naGlsZCgpOwogICAgICAgICAgICBjaGlsZC5zZXROYW1lKCJjaGlsZCIgKyBp\nKTsKICAgICAgICAgICAgcGFyZW50LmFkZENoaWxkKGNoaWxkKTsKICAgICAg\nICB9CgogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50\naXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVn\naW4oKTsKICAgICAgICBlbS5wZXJzaXN0KHBhcmVudCk7CiAgICAgICAgZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBsb25nIGlkID0g\ncGFyZW50LmdldElkKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDIsIHBhcmVu\ndC5nZXRDaGlsZHJlbigpLnNpemUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKCJjaGlsZDAiLCBwYXJlbnQuZ2V0Q2hpbGRyZW4oKS5nZXQoMCkuZ2V0TmFt\nZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoImNoaWxkMSIsIHBhcmVudC5n\nZXRDaGlsZHJlbigpLmdldCgxKS5nZXROYW1lKCkpOwogICAgICAgIGVtLmNs\nb3NlKCk7CgogICAgICAgIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIo\nKTsKICAgICAgICBwYXJlbnQgPSBlbS5maW5kKENhc2NhZGluZ09uZU1hbnlQ\nYXJlbnQuY2xhc3MsIGlkKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHBhcmVu\ndCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJwYXJlbnQiLCBwYXJlbnQuZ2V0\nTmFtZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMiwgcGFyZW50LmdldENo\naWxkcmVuKCkuc2l6ZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoImNoaWxk\nMCIsIHBhcmVudC5nZXRDaGlsZHJlbigpLmdldCgwKS5nZXROYW1lKCkpOwog\nICAgICAgIGFzc2VydEVxdWFscygiY2hpbGQxIiwgcGFyZW50LmdldENoaWxk\ncmVuKCkuZ2V0KDEpLmdldE5hbWUoKSk7CiAgICAgICAgZW0uY2xvc2UoKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0RGVsZXRlKCkgewogICAgICAg\nIENhc2NhZGluZ09uZU1hbnlQYXJlbnQgcGFyZW50ID0gbmV3IENhc2NhZGlu\nZ09uZU1hbnlQYXJlbnQoKTsKICAgICAgICBwYXJlbnQuc2V0TmFtZSgicGFy\nZW50Iik7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCAyOyBpKyspIHsK\nICAgICAgICAgICAgQ2FzY2FkaW5nT25lTWFueUNoaWxkIGNoaWxkID0gbmV3\nIENhc2NhZGluZ09uZU1hbnlDaGlsZCgpOwogICAgICAgICAgICBjaGlsZC5z\nZXROYW1lKCJjaGlsZCIgKyBpKTsKICAgICAgICAgICAgcGFyZW50LmFkZENo\naWxkKGNoaWxkKTsKICAgICAgICB9CgogICAgICAgIEVudGl0eU1hbmFnZXIg\nZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdl\ndFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBlbS5wZXJzaXN0KHBh\ncmVudCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsK\nICAgICAgICBsb25nIGlkID0gcGFyZW50LmdldElkKCk7CiAgICAgICAgZW0u\nY2xvc2UoKTsKCiAgICAgICAgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdl\ncigpOwogICAgICAgIHBhcmVudCA9IGVtLmZpbmQoQ2FzY2FkaW5nT25lTWFu\neVBhcmVudC5jbGFzcywgaWQpOwogICAgICAgIGFzc2VydE5vdE51bGwocGFy\nZW50KTsKICAgICAgICBhc3NlcnRFcXVhbHMoMiwgcGFyZW50LmdldENoaWxk\ncmVuKCkuc2l6ZSgpKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJl\nZ2luKCk7CiAgICAgICAgZW0ucmVtb3ZlKHBhcmVudCk7CiAgICAgICAgZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBhc3NlcnRSZW1v\ndmVkKGVtLCBpZCk7CiAgICAgICAgZW0uY2xvc2UoKTsKCiAgICAgICAgZW0g\nPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGFzc2VydFJl\nbW92ZWQoZW0sIGlkKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAg\nIHByaXZhdGUgdm9pZCBhc3NlcnRSZW1vdmVkKEVudGl0eU1hbmFnZXIgZW0s\nIGxvbmcgaWQpIHsKICAgICAgICBhc3NlcnROdWxsKGVtLmZpbmQoQ2FzY2Fk\naW5nT25lTWFueVBhcmVudC5jbGFzcywgaWQpKTsKICAgICAgICBMaXN0IHJl\ncyA9IGVtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgYyBmcm9tIENhc2NhZGluZ09u\nZU1hbnlDaGlsZCBjIikuCiAgICAgICAgICAgIGdldFJlc3VsdExpc3QoKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoMCwgcmVzLnNpemUoKSk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgdGVzdEZvcmVpZ25LZXkoKSB7CiAgICAgICAgSkRC\nQ0NvbmZpZ3VyYXRpb24gY29uZiA9IChKREJDQ29uZmlndXJhdGlvbikgZW1m\nLmdldENvbmZpZ3VyYXRpb24oKTsKICAgICAgICBpZiAoIWNvbmYuZ2V0REJE\naWN0aW9uYXJ5SW5zdGFuY2UoKS5zdXBwb3J0c0ZvcmVpZ25LZXlzKQogICAg\nICAgICAgICByZXR1cm47CgogICAgICAgIENhc2NhZGluZ09uZU1hbnlQYXJl\nbnQgcGFyZW50ID0gbmV3IENhc2NhZGluZ09uZU1hbnlQYXJlbnQoKTsKICAg\nICAgICBwYXJlbnQuc2V0TmFtZSgicGFyZW50Iik7CiAgICAgICAgQ2FzY2Fk\naW5nT25lTWFueUNoaWxkIGNoaWxkOwogICAgICAgIGZvciAoaW50IGkgPSAw\nOyBpIDwgMjsgaSsrKSB7CiAgICAgICAgICAgIGNoaWxkID0gbmV3IENhc2Nh\nZGluZ09uZU1hbnlDaGlsZCgpOwogICAgICAgICAgICBjaGlsZC5zZXROYW1l\nKCJjaGlsZCIgKyBpKTsKICAgICAgICAgICAgcGFyZW50LmFkZENoaWxkKGNo\naWxkKTsKICAgICAgICB9CgogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBl\nbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5z\nYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBlbS5wZXJzaXN0KHBhcmVudCk7\nCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAg\nICBsb25nIGlkID0gcGFyZW50LmdldElkKCk7CiAgICAgICAgZW0uY2xvc2Uo\nKTsKCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgb2VtID0gKE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyKSBlbWYuCiAgICAgICAgICAgIGNyZWF0ZUVudGl0\neU1hbmFnZXIoKTsKICAgICAgICBwYXJlbnQgPSBvZW0uZmluZChDYXNjYWRp\nbmdPbmVNYW55UGFyZW50LmNsYXNzLCBpZCk7CiAgICAgICAgYXNzZXJ0Tm90\nTnVsbChwYXJlbnQpOwogICAgICAgIGFzc2VydEVxdWFscygyLCBwYXJlbnQu\nZ2V0Q2hpbGRyZW4oKS5zaXplKCkpOwogICAgICAgIGNoaWxkID0gcGFyZW50\nLmdldENoaWxkcmVuKCkuZ2V0KDApOyAKICAgICAgICBvZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5iZWdpbigpOwogICAgICAgIG9lbS5yZW1vdmUocGFyZW50KTsK\nICAgICAgICAvLyB1bmRlbGV0ZSBvbmUgY2hpbGQKICAgICAgICBhc3NlcnRU\ncnVlKG9lbS5pc1JlbW92ZWQoY2hpbGQpKTsKICAgICAgICBvZW0ucGVyc2lz\ndChjaGlsZCk7CiAgICAgICAgYXNzZXJ0RmFsc2Uob2VtLmlzUmVtb3ZlZChj\naGlsZCkpOwogICAgICAgIGFzc2VydEVxdWFscyhwYXJlbnQsIGNoaWxkLmdl\ndFBhcmVudCgpKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBvZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICAgICAgZmFpbCgiQ29t\nbWl0IHNob3VsZCBoYXZlIGZhaWxlZCBkdWUgdG8gRksgY29uc3RyYWludCB2\naW9sYXRpb24uIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsK\nICAgICAgICB9CiAgICAgICAgb2VtLmNsb3NlKCk7CiAgICB9CgogICAgcHVi\nbGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykgewogICAgICAg\nIFRlc3RSdW5uZXIucnVuKFRlc3RDYXNjYWRpbmdPbmVNYW55V2l0aEZvcmVp\nZ25LZXkuY2xhc3MpOwogICAgfQp9Cgo=\n","encoding":"base64"}

