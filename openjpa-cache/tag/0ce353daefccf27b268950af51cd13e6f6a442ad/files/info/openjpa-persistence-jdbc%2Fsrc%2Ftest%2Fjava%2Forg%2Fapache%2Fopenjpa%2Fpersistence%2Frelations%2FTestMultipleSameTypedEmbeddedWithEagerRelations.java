{"sha":"2004adf1eba65e258ad0e28ebc4919cc8f072ce2","node_id":"MDQ6QmxvYjIwNjM2NDoyMDA0YWRmMWViYTY1ZTI1OGFkMGUyOGViYzQ5MTljYzhmMDcyY2Uy","size":3677,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/2004adf1eba65e258ad0e28ebc4919cc8f072ce2","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS5wZXJzaXN0ZW5jZS5yZWxhdGlvbnM7CgppbXBvcnQgamF2YS51\ndGlsLkhhc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGph\ndmEudXRpbC5NYXA7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlN\nYW5hZ2VyOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5TWFuYWdl\nckZhY3Rvcnk7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5QZXJzaXN0ZW5j\nZTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLlF1ZXJ5OwoKaW1wb3J0IGp1\nbml0LmZyYW1ld29yay5UZXN0Q2FzZTsKaW1wb3J0IGp1bml0LnRleHR1aS5U\nZXN0UnVubmVyOwoKLyoqCiAqIFRlc3QgdGhhdCBxdWVyeWluZyBhbmQgcmV0\ncmlldmluZyBlbnRpdGllcyB3aXRoIG11bHRpcGxlIHNhbWUtdHlwZWQgZW1i\nZWRkZWQKICogcmVsYXRpb25zLCB3aGljaCB0aGVtc2VsdmVzIGhhdmUgZWFn\nZXIgcmVsYXRpb25zLCB3b3Jrcy4gCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRl\nCiAqLwpwdWJsaWMgY2xhc3MgVGVzdE11bHRpcGxlU2FtZVR5cGVkRW1iZWRk\nZWRXaXRoRWFnZXJSZWxhdGlvbnMKICAgIGV4dGVuZHMgVGVzdENhc2UgewoK\nICAgIHByaXZhdGUgRW50aXR5TWFuYWdlckZhY3RvcnkgZW1mOwoKICAgIHB1\nYmxpYyB2b2lkIHNldFVwKCkgewogICAgICAgIE1hcCBwcm9wcyA9IG5ldyBI\nYXNoTWFwKCk7CiAgICAgICAgcHJvcHMucHV0KCJvcGVuanBhLk1ldGFEYXRh\nRmFjdG9yeSIsICJqcGEoVHlwZXM9IiAKICAgICAgICAgICAgKyBFbWJlZGRh\nYmxlV2l0aFJlbGF0aW9uLmNsYXNzLmdldE5hbWUoKSArICI7IgogICAgICAg\nICAgICArIE11bHRpcGxlU2FtZVR5cGVkRW1iZWRkZWQuY2xhc3MuZ2V0TmFt\nZSgpICsgIikiKTsKICAgICAgICBlbWYgPSBQZXJzaXN0ZW5jZS5jcmVhdGVF\nbnRpdHlNYW5hZ2VyRmFjdG9yeSgidGVzdCIsIHByb3BzKTsKCiAgICAgICAg\nRW1iZWRkYWJsZVdpdGhSZWxhdGlvbiBlbWJlZDEgPSBuZXcgRW1iZWRkYWJs\nZVdpdGhSZWxhdGlvbigpOwogICAgICAgIGVtYmVkMS5zZXROYW1lKCJlbWJl\nZDEiKTsKICAgICAgICBFbWJlZGRhYmxlV2l0aFJlbGF0aW9uIGVtYmVkMiA9\nIG5ldyBFbWJlZGRhYmxlV2l0aFJlbGF0aW9uKCk7CiAgICAgICAgZW1iZWQy\nLnNldE5hbWUoImVtYmVkMiIpOwoKICAgICAgICBNdWx0aXBsZVNhbWVUeXBl\nZEVtYmVkZGVkIG0xID0gbmV3IE11bHRpcGxlU2FtZVR5cGVkRW1iZWRkZWQo\nKTsKICAgICAgICBtMS5zZXROYW1lKCJtMSIpOwogICAgICAgIG0xLnNldEVt\nYmVkMShlbWJlZDEpOwogICAgICAgIG0xLnNldEVtYmVkMihlbWJlZDIpOwog\nICAgICAgIE11bHRpcGxlU2FtZVR5cGVkRW1iZWRkZWQgbTIgPSBuZXcgTXVs\ndGlwbGVTYW1lVHlwZWRFbWJlZGRlZCgpOwogICAgICAgIG0yLnNldE5hbWUo\nIm0yIik7CiAgICAgICAgbTIuc2V0RW1iZWQxKGVtYmVkMik7CiAgICAgICAg\nbTIuc2V0RW1iZWQyKGVtYmVkMSk7CgogICAgICAgIGVtYmVkMS5zZXRSZWwo\nbTEpOwogICAgICAgIGVtYmVkMi5zZXRSZWwobTIpOwoKICAgICAgICBFbnRp\ndHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAg\nICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgZW0u\ncGVyc2lzdChtMSk7CiAgICAgICAgZW0ucGVyc2lzdChtMik7CiAgICAgICAg\nZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9z\nZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlYXJEb3duKCkgewogICAg\nICAgIGlmIChlbWYgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuOwogICAg\nICAgIHRyeSB7CiAgICAgICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYu\nY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgICAgICBlbS5nZXRUcmFu\nc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgICAgIGVtLmNyZWF0ZVF1ZXJ5\nKCJkZWxldGUgZnJvbSBNdWx0aXBsZVNhbWVUeXBlZEVtYmVkZGVkIikuCiAg\nICAgICAgICAgICAgICBleGVjdXRlVXBkYXRlKCk7CiAgICAgICAgICAgIGVt\nLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgICAgIGVtLmNs\nb3NlKCk7CiAgICAgICAgICAgIGVtZi5jbG9zZSgpOwogICAgICAgIH0gY2F0\nY2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGUucHJpbnRTdGFja1Ry\nYWNlKCk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RR\ndWVyeSgpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0\nZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBRdWVyeSBxID0gZW0uY3JlYXRl\nUXVlcnkoInNlbGVjdCBtIGZyb20gTXVsdGlwbGVTYW1lVHlwZWRFbWJlZGRl\nZCBtICIKICAgICAgICAgICAgKyAid2hlcmUgbS5lbWJlZDEucmVsLm5hbWUg\nPSAnbTEnICIKICAgICAgICAgICAgKyAiYW5kIG0uZW1iZWQyLnJlbC5uYW1l\nID0gJ20yJyIpOwogICAgICAgIExpc3QgcmVzID0gcS5nZXRSZXN1bHRMaXN0\nKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIHJlcy5zaXplKCkpOwoKICAg\nICAgICBNdWx0aXBsZVNhbWVUeXBlZEVtYmVkZGVkIG0gPSAoTXVsdGlwbGVT\nYW1lVHlwZWRFbWJlZGRlZCkgcmVzLmdldCgwKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoIm0xIiwgbS5nZXROYW1lKCkpOwogICAgICAgIGFzc2VydEVxdWFs\ncygiZW1iZWQxIiwgbS5nZXRFbWJlZDEoKS5nZXROYW1lKCkpOwogICAgICAg\nIGFzc2VydEVxdWFscygibTEiLCBtLmdldEVtYmVkMSgpLmdldFJlbCgpLmdl\ndE5hbWUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJlbWJlZDIiLCBtLmdl\ndEVtYmVkMigpLmdldE5hbWUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJt\nMiIsIG0uZ2V0RW1iZWQyKCkuZ2V0UmVsKCkuZ2V0TmFtZSgpKTsKICAgICAg\nICAgICAgCiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMg\nc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7CiAgICAgICAgVGVz\ndFJ1bm5lci5ydW4oVGVzdE11bHRpcGxlU2FtZVR5cGVkRW1iZWRkZWRXaXRo\nRWFnZXJSZWxhdGlvbnMuY2xhc3MpOwogICAgfQp9Cgo=\n","encoding":"base64"}

