{"sha":"bde55bf648307f95fc0960c3c6e95e243d6717ae","node_id":"MDQ6QmxvYjIwNjM2NDpiZGU1NWJmNjQ4MzA3Zjk1ZmMwOTYwYzNjNmU5NWUyNDNkNjcxN2Fl","size":5073,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/bde55bf648307f95fc0960c3c6e95e243d6717ae","content":"LyoKICogQ29weXJpZ2h0IDIwMDYgVGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3Vu\nZGF0aW9uLgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vu\nc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBu\nb3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRo\nZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExp\nY2Vuc2UgYXQKICoKICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2Vz\nL0xJQ0VOU0UtMi4wCiAqCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNh\nYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICog\nZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQg\nb24gYW4gIkFTIElTIiBCQVNJUywKICogV0lUSE9VVCBXQVJSQU5USUVTIE9S\nIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGlt\ncGxpZWQuCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxh\nbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogbGltaXRhdGlv\nbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUu\nb3BlbmpwYS54bWxzdG9yZTsKCmltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlv\nbjsKaW1wb3J0IGphdmEudXRpbC5IYXNoTWFwOwppbXBvcnQgamF2YS51dGls\nLkhhc2hTZXQ7CmltcG9ydCBqYXZhLnV0aWwuSXRlcmF0b3I7CmltcG9ydCBq\nYXZhLnV0aWwuTWFwOwppbXBvcnQgamF2YS51dGlsLlNldDsKCmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEubWV0YS5DbGFzc01ldGFEYXRhOwoKLyoqCiAq\nIFJlcHJlc2VudHMgYSBzdG9yZSBvZiBvYmplY3QgZGF0YSBlbmNvZGVkIGlu\nIFhNTC4gVGhpcyBzdG9yZSBvbmx5IGFsbG93cwogKiBvbmUgZGF0YXN0b3Jl\nIHRyYW5zYWN0aW9uIHRvIHByb2NlZWQgYXQgYSB0aW1lLiBGaWxlIEkvTyBl\ncnJvcnMgY2FuIHB1dAogKiB0aGlzIHN0b3JlIGludG8gYW4gaW52YWxpZCBz\ndGF0ZS4KICovCnB1YmxpYyBjbGFzcyBYTUxTdG9yZSB7CgogICAgcHJpdmF0\nZSBmaW5hbCBYTUxDb25maWd1cmF0aW9uIF9jb25mOwoKICAgIC8vIGVhY2gg\na2V5IGluIHRoZSBtYXAgaXMgYSBsZWFzdC1kZXJpdmVkIGNsYXNzIG1ldGFk\nYXRhIG9iamVjdCwgYW5kIGVhY2gKICAgIC8vIHZhbHVlIGlzIGEgbWFwIG9m\nIG9pZHMgdG8gb2JqZWN0IGRhdGFzIHJlcHJlc2VudGluZyB0aGUgaW5zdGFu\nY2VzIG9mCiAgICAvLyB0aGF0IGNsYXNzLCBpbmNsdWRpbmcgc3ViY2xhc3Nl\ncwogICAgcHJpdmF0ZSBmaW5hbCBNYXAgX21ldGFPaWRNYXBzID0gbmV3IEhh\nc2hNYXAoKTsKCiAgICAvLyBzdG9yZSBnZXRzIGxvY2tlZCBkdXJpbmcgdHJh\nbnNhY3Rpb25zCiAgICBwcml2YXRlIGJvb2xlYW4gX2xvY2tlZDsKCiAgICAv\nKioKICAgICAqIENvbnN0cnVjdG9yOyBzdXBwbHkgY29uZmlndXJhdGlvbi4K\nICAgICAqLwogICAgcHVibGljIFhNTFN0b3JlKFhNTENvbmZpZ3VyYXRpb24g\nY29uZikgewogICAgICAgIF9jb25mID0gY29uZjsKICAgIH0KCiAgICAvKioK\nICAgICAqIFJldHVybiB0aGUgZGF0YSBmb3IgdGhlIGdpdmVuIG9pZCwgb3Ig\nbnVsbCBpZiBpdCBkb2VzIG5vdCBleGlzdC4KICAgICAqLwogICAgcHVibGlj\nIHN5bmNocm9uaXplZCBPYmplY3REYXRhIGdldERhdGEoQ2xhc3NNZXRhRGF0\nYSBtZXRhLCBPYmplY3Qgb2lkKSB7CiAgICAgICAgbWV0YSA9IGdldExlYXN0\nRGVyaXZlZChtZXRhKTsKICAgICAgICByZXR1cm4gKE9iamVjdERhdGEpIGdl\ndE1hcChtZXRhKS5nZXQob2lkKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJl\ndHVybiBhbGwgZGF0YXMgZm9yIHRoZSBiYXNlIGNsYXNzIG9mIHRoZSBnaXZl\nbiB0eXBlLgogICAgICovCiAgICBwdWJsaWMgc3luY2hyb25pemVkIE9iamVj\ndERhdGFbXSBnZXREYXRhKENsYXNzTWV0YURhdGEgbWV0YSkgewogICAgICAg\nIG1ldGEgPSBnZXRMZWFzdERlcml2ZWQobWV0YSk7CiAgICAgICAgQ29sbGVj\ndGlvbiB2YWxzID0gZ2V0TWFwKG1ldGEpLnZhbHVlcygpOwogICAgICAgIHJl\ndHVybiAoT2JqZWN0RGF0YVtdKSB2YWxzLnRvQXJyYXkobmV3IE9iamVjdERh\ndGFbdmFscy5zaXplKCldKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVy\nbnMgdGhlIG1hcCBvZiBvaWRzIHRvIG9iamVjdCBkYXRhcyBmb3IgdGhlIGdp\ndmVuIGxlYXN0LWRlcml2ZWQgdHlwZS4KICAgICAqLwogICAgcHJpdmF0ZSBN\nYXAgZ2V0TWFwKENsYXNzTWV0YURhdGEgbWV0YSkgewogICAgICAgIE1hcCBt\nID0gKE1hcCkgX21ldGFPaWRNYXBzLmdldChtZXRhKTsKICAgICAgICBpZiAo\nbSAhPSBudWxsKQogICAgICAgICAgICByZXR1cm4gbTsKCiAgICAgICAgLy8g\nbG9hZCBkYXRhcyBmcm9tIGZpbGUgYW5kIGNhY2hlIHRoZW0KICAgICAgICBD\nb2xsZWN0aW9uIGRhdGFzID0gX2NvbmYuZ2V0RmlsZUhhbmRsZXIoKS5sb2Fk\nKG1ldGEpOwogICAgICAgIG0gPSBuZXcgSGFzaE1hcChkYXRhcy5zaXplKCkp\nOwogICAgICAgIGZvciAoSXRlcmF0b3IgaXRyID0gZGF0YXMuaXRlcmF0b3Io\nKTsgaXRyLmhhc05leHQoKTspIHsKICAgICAgICAgICAgT2JqZWN0RGF0YSBk\nYXRhID0gKE9iamVjdERhdGEpIGl0ci5uZXh0KCk7CiAgICAgICAgICAgIG0u\ncHV0KGRhdGEuZ2V0SWQoKSwgZGF0YSk7CiAgICAgICAgfQogICAgICAgIF9t\nZXRhT2lkTWFwcy5wdXQobWV0YSwgbSk7CiAgICAgICAgcmV0dXJuIG07CiAg\nICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGxlYXN0LWRlcml2ZWQg\nbWV0YWRhdGEgaW4gdGhlIGluaGVyaXRhbmNlIGNoYWluCiAgICAgKiBhYm92\nZSA8Y29kZT5tZXRhPC9jb2RlPiwgb3IgPGNvZGU+bWV0YTwvY29kZT4gaWYg\naXQgaXMgYQogICAgICogbGVhc3QtZGVyaXZlZCBtZXRhZGF0YS4KICAgICAq\nLwogICAgcHJpdmF0ZSBzdGF0aWMgQ2xhc3NNZXRhRGF0YSBnZXRMZWFzdERl\ncml2ZWQoQ2xhc3NNZXRhRGF0YSBtZXRhKSB7CiAgICAgICAgd2hpbGUgKG1l\ndGEuZ2V0UENTdXBlcmNsYXNzKCkgIT0gbnVsbCkKICAgICAgICAgICAgbWV0\nYSA9IG1ldGEuZ2V0UENTdXBlcmNsYXNzTWV0YURhdGEoKTsKICAgICAgICBy\nZXR1cm4gbWV0YTsKICAgIH0KCiAgICAvKioKICAgICAqIEJlZ2luIGEgZGF0\nYXN0b3JlIHRyYW5zYWN0aW9uLiBPYnRhaW5zIGFuIGV4Y2x1c2l2ZSB3cml0\nZSBsb2NrIG9uIHRoZQogICAgICogc3RvcmUuCiAgICAgKi8KICAgIHB1Ymxp\nYyBzeW5jaHJvbml6ZWQgdm9pZCBiZWdpblRyYW5zYWN0aW9uKCkgewogICAg\nICAgIC8vIGxvY2sgc3RvcmUKICAgICAgICB3aGlsZSAoX2xvY2tlZCkKICAg\nICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAg\nICAgICAgfSBjYXRjaCAoSW50ZXJydXB0ZWRFeGNlcHRpb24gaWUpIHsKICAg\nICAgICAgICAgfQogICAgICAgIF9sb2NrZWQgPSB0cnVlOwogICAgfQoKICAg\nIC8qKgogICAgICogRW5kIHRoZSBkYXRhc3RvcmUgdHJhbnNhY3Rpb24uCiAg\nICAgKgogICAgICogQHBhcmFtIHVwZGF0ZXMge0BsaW5rIE9iamVjdERhdGF9\nIGluc3RhbmNlcyB0byBpbnNlcnQgb3IgdXBkYXRlCiAgICAgKiBAcGFyYW0g\nZGVsZXRlcyB7QGxpbmsgT2JqZWN0RGF0YX0gaW5zdGFuY2VzIHRvIGRlbGV0\nZQogICAgICovCiAgICBwdWJsaWMgc3luY2hyb25pemVkIHZvaWQgZW5kVHJh\nbnNhY3Rpb24oQ29sbGVjdGlvbiB1cGRhdGVzLAogICAgICAgIENvbGxlY3Rp\nb24gZGVsZXRlcykgewogICAgICAgIC8vIHRyYWNrIGRpcnR5IHR5cGVzCiAg\nICAgICAgU2V0IGRpcnR5ID0gbmV3IEhhc2hTZXQoKTsKICAgICAgICB0cnkg\newogICAgICAgICAgICAvLyBjb21taXQgdXBkYXRlcwogICAgICAgICAgICBp\nZiAodXBkYXRlcyAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBmb3IgKEl0\nZXJhdG9yIGl0ciA9IHVwZGF0ZXMuaXRlcmF0b3IoKTsgaXRyLmhhc05leHQo\nKTspIHsKICAgICAgICAgICAgICAgICAgICBPYmplY3REYXRhIGRhdGEgPSAo\nT2JqZWN0RGF0YSkgaXRyLm5leHQoKTsKICAgICAgICAgICAgICAgICAgICBD\nbGFzc01ldGFEYXRhIG1ldGEgPSBnZXRMZWFzdERlcml2ZWQoZGF0YS5nZXRN\nZXRhRGF0YSgpKTsKICAgICAgICAgICAgICAgICAgICBnZXRNYXAobWV0YSku\ncHV0KGRhdGEuZ2V0SWQoKSwgZGF0YSk7CiAgICAgICAgICAgICAgICAgICAg\nZGlydHkuYWRkKG1ldGEpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAg\nICB9CgogICAgICAgICAgICAvLyBjb21taXQgZGVsZXRlcwogICAgICAgICAg\nICBpZiAoZGVsZXRlcyAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBmb3Ig\nKEl0ZXJhdG9yIGl0ciA9IGRlbGV0ZXMuaXRlcmF0b3IoKTsgaXRyLmhhc05l\neHQoKTspIHsKICAgICAgICAgICAgICAgICAgICBPYmplY3REYXRhIGRhdGEg\nPSAoT2JqZWN0RGF0YSkgaXRyLm5leHQoKTsKICAgICAgICAgICAgICAgICAg\nICBDbGFzc01ldGFEYXRhIG1ldGEgPSBnZXRMZWFzdERlcml2ZWQoZGF0YS5n\nZXRNZXRhRGF0YSgpKTsKICAgICAgICAgICAgICAgICAgICBnZXRNYXAobWV0\nYSkucmVtb3ZlKGRhdGEuZ2V0SWQoKSk7CiAgICAgICAgICAgICAgICAgICAg\nZGlydHkuYWRkKG1ldGEpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAg\nICB9CgogICAgICAgICAgICAvLyB3cml0ZSBjaGFuZ2VzIHRvIGRpcnR5IGV4\ndGVudHMgYmFjayB0byBmaWxlCiAgICAgICAgICAgIFhNTEZpbGVIYW5kbGVy\nIGZoID0gX2NvbmYuZ2V0RmlsZUhhbmRsZXIoKTsKICAgICAgICAgICAgZm9y\nIChJdGVyYXRvciBpdHIgPSBkaXJ0eS5pdGVyYXRvcigpOyBpdHIuaGFzTmV4\ndCgpOykgewogICAgICAgICAgICAgICAgQ2xhc3NNZXRhRGF0YSBtZXRhID0g\nKENsYXNzTWV0YURhdGEpIGl0ci5uZXh0KCk7CiAgICAgICAgICAgICAgICBm\naC5zdG9yZShtZXRhLCBnZXRNYXAobWV0YSkudmFsdWVzKCkpOwogICAgICAg\nICAgICB9CiAgICAgICAgfQogICAgICAgIGZpbmFsbHkgewogICAgICAgICAg\nICAvLyB1bmxvY2sgc3RvcmUKICAgICAgICAgICAgbm90aWZ5KCk7CiAgICAg\nICAgICAgIF9sb2NrZWQgPSBmYWxzZTsKCQl9Cgl9Cn0K\n","encoding":"base64"}

