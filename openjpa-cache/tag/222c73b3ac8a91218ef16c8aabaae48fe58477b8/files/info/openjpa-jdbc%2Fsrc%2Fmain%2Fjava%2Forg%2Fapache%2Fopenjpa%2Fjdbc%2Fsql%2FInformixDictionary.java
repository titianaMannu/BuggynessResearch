{"sha":"573da76a596087e0bc7ed4f1f775b196bd139644","node_id":"MDQ6QmxvYjIwNjM2NDo1NzNkYTc2YTU5NjA4N2UwYmM3ZWQ0ZjFmNzc1YjE5NmJkMTM5NjQ0","size":10742,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/573da76a596087e0bc7ed4f1f775b196bd139644","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWw7CgppbXBvcnQg\namF2YS5zcWwuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmEuc3FsLkRhdGFiYXNl\nTWV0YURhdGE7CmltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDsK\naW1wb3J0IGphdmEuc3FsLlJlc3VsdFNldDsKaW1wb3J0IGphdmEuc3FsLlNR\nTEV4Y2VwdGlvbjsKaW1wb3J0IGphdmEuc3FsLlN0YXRlbWVudDsKaW1wb3J0\nIGphdmEuc3FsLlR5cGVzOwppbXBvcnQgamF2YS51dGlsLkFycmF5czsKaW1w\nb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOwoKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLmtlcm5lbC5leHBzLkZpbHRlclZhbHVlOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLkNvbHVtbjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5Gb3JlaWduS2V5Owpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLkluZGV4Owpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLlByaW1hcnlL\nZXk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuVGFi\nbGU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuUmVmZXJl\nbmNlSGFzaFNldDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLlVu\nc3VwcG9ydGVkRXhjZXB0aW9uOwoKLyoqCiAqIERpY3Rpb25hcnkgZm9yIElu\nZm9ybWl4IGRhdGFiYXNlLiBOb3RhYmxlIGZlYXR1cmVzOgogKiA8dWw+CiAq\nIDxsaT5JbmZvcm1peCBkb2VzIG5vdCBhbGxvdyBwZXNzaW1pc3RpYyBsb2Nr\naW5nIG9uIHNjcm9sbGFibGUgcmVzdWx0CiAqIHNldHMuPC9saT4KICogPGxp\nPlNFVCBMT0NLIE1PREUgVE8gV0FJVCBOIHN0YXRlbWVudHMgYXJlIGlzc3Vl\nZCB0byB3YWl0IG9uIGxvY2tzLiBTZWUKICoge0BsaW5rICNsb2NrV2FpdFNl\nY29uZHN9IGFuZCB7QGxpbmsgI2xvY2tNb2RlRW5hYmxlZH0uPC9saT4KICog\nPGxpPkxPQ0sgTU9ERSBST1cgaXMgdXNlZCBieSBkZWZhdWx0IGZvciB0YWJs\nZSBjcmVhdGlvbiB0byBhbGxvdyB0aGUKICogbWF4aW11bSBjb25jdXJyZW5j\neS48L2xpPgogKiA8L3VsPgogKi8KcHVibGljIGNsYXNzIEluZm9ybWl4RGlj\ndGlvbmFyeQogICAgZXh0ZW5kcyBEQkRpY3Rpb25hcnkgewoKICAgIC8qKgog\nICAgICogSWYgdHJ1ZSwgdGhlbiB3ZSB3aWxsIGlzc3VlIGEgIlNFVCBMT0NL\nIE1PREUgVE8gV0FJVCBOIgogICAgICogc3RhdGVtZW50IHdoZW5ldmVyIHdl\nIGNyZWF0ZSBhIHtAbGluayBDb25uZWN0aW9ufSwgaW4gb3JkZXIKICAgICAq\nIGFsbG93IHdhaXRpbmcgb24gbG9ja3MuCiAgICAgKi8KICAgIHB1YmxpYyBi\nb29sZWFuIGxvY2tNb2RlRW5hYmxlZCA9IGZhbHNlOwoKICAgIC8qKgogICAg\nICogSWYge0BsaW5rICNsb2NrTW9kZUVuYWJsZWR9IGlzIDxjb2RlPnRydWU8\nL2NvZGU+LCB0aGVuIHRoaXMKICAgICAqIHBhcmFtZXRlciBzcGVjaWZpZXMg\ndGhlIG51bWJlciBvZiBzZWNvbmRzIHdlIHdpbGwgd2FpdCB0bwogICAgICog\nb2J0YWluIGEgbG9jayBmb3IgaW5zZXJ0cyBhbmQgcGVzc2ltaXN0aWMgbG9j\na2luZy4KICAgICAqLwogICAgcHVibGljIGludCBsb2NrV2FpdFNlY29uZHMg\nPSAzMDsKCiAgICAvKioKICAgICAqIEluZm9ybWl4IEpEQkMgbWV0YWRhdGEg\nZm9yIGFsbCBrbm93biBkcml2ZXJzIHJldHVybnMgd2l0aCB0aGUKICAgICAq\nIHRhYmxlIGNhdGFsb2cgYW5kIHRoZSB0YWJsZSBzY2hlbWEgbmFtZSBzd2Fw\ncGVkLiBBIDxjb2RlPnRydWU8L2NvZGU+CiAgICAgKiB2YWx1ZSBmb3IgdGhp\ncyBwcm9wZXJ0eSBpbmRpY2F0ZXMgdGhhdCB0aGV5IHNob3VsZCBiZSByZXZl\ncnNlZC4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gc3dhcFNjaGVtYUFu\nZENhdGFsb2cgPSB0cnVlOwoKICAgIC8vIHdlYWsgc2V0IG9mIGNvbm5lY3Rp\nb25zIHdlJ3ZlIGFscmVhZHkgZXhlY3V0ZWQgbG9jayBtb2RlIHNxbCBvbgog\nICAgcHJpdmF0ZSBmaW5hbCBDb2xsZWN0aW9uIF9zZWVuQ29ubmVjdGlvbnMg\nPSBuZXcgUmVmZXJlbmNlSGFzaFNldAogICAgICAgIChSZWZlcmVuY2VIYXNo\nU2V0LldFQUspOwoKICAgIHB1YmxpYyBJbmZvcm1peERpY3Rpb25hcnkoKSB7\nCiAgICAgICAgcGxhdGZvcm0gPSAiSW5mb3JtaXgiOwogICAgICAgIHZhbGlk\nYXRpb25TUUwgPSAiU0VMRUNUIEZJUlNUIDEgQ1VSUkVOVCBUSU1FU1RBTVAg\nIgogICAgICAgICAgICArICJGUk9NIGluZm9ybWl4LnN5c3RhYmxlcyI7Cgog\nICAgICAgIHN1cHBvcnRzQXV0b0Fzc2lnbiA9IHRydWU7CiAgICAgICAgYXV0\nb0Fzc2lnblR5cGVOYW1lID0gInNlcmlhbCI7CiAgICAgICAgbGFzdEdlbmVy\nYXRlZEtleVF1ZXJ5ID0gIlNFTEVDVCBGSVJTVCAxIERCSU5GTygnc3FsY2Eu\nc3FsZXJyZDEnKSAiCiAgICAgICAgICAgICsgIkZST00gaW5mb3JtaXguc3lz\ndGFibGVzIjsKCiAgICAgICAgLy8gaW5mb3JtaXggYWN0dWFsbHkgZG9lcyBz\ndXBwb3J0IGRlZmVycmVkIGNvbnN0cmFpbnRzLCBidXQgbm90CiAgICAgICAg\nLy8gaW4gdGhlIHRhYmxlIGRlZmluaXRpb247IGRlZmVycmVkIGNvbnN0cmFp\nbnRzIGNhbiBiZSBhY3RpdmF0ZWQgYnkKICAgICAgICAvLyBpbnZva2luZyAi\nc2V0IGNvbnN0cmFpbnRzIGFsbCBkZWZlcnJlZCIgb24gdGhlIGNvbm5lY3Rp\nb24sIHdoaWNoCiAgICAgICAgLy8gd2UgZG9uJ3QgZG8geWV0CiAgICAgICAg\nc3VwcG9ydHNEZWZlcnJlZENvbnN0cmFpbnRzID0gZmFsc2U7CiAgICAgICAg\nY29uc3RyYWludE5hbWVNb2RlID0gQ09OU19OQU1FX0FGVEVSOwoKICAgICAg\nICAvLyBpbmZvcm1peCBzdXBwb3J0cyAiQ0xPQiIgdHlwZSwgYnV0IGFueSBh\ndHRlbXB0IHRvIGluc2VydAogICAgICAgIC8vIGludG8gdGhlbSByYWlzZXM6\nICJqYXZhLnNxbC5TUUxFeGNlcHRpb246IENhbid0IGNvbnZlcnQgZnJvbW51\nbGwiCiAgICAgICAgdXNlR2V0U3RyaW5nRm9yQ2xvYnMgPSB0cnVlOwogICAg\nICAgIGxvbmdWYXJjaGFyVHlwZU5hbWUgPSAiVEVYVCI7CiAgICAgICAgY2xv\nYlR5cGVOYW1lID0gIlRFWFQiOwogICAgICAgIHNtYWxsaW50VHlwZU5hbWUg\nPSAiSU5UOCI7CiAgICAgICAgdGlueWludFR5cGVOYW1lID0gIklOVDgiOwog\nICAgICAgIGZsb2F0VHlwZU5hbWUgPSAiRkxPQVQiOwogICAgICAgIGJpdFR5\ncGVOYW1lID0gIkJPT0xFQU4iOwogICAgICAgIGJsb2JUeXBlTmFtZSA9ICJC\nWVRFIjsKICAgICAgICBkb3VibGVUeXBlTmFtZSA9ICJOVU1FUklDKDMyLDIw\nKSI7CiAgICAgICAgZGF0ZVR5cGVOYW1lID0gIkRBVEUiOwogICAgICAgIHRp\nbWVUeXBlTmFtZSA9ICJEQVRFVElNRSBIT1VSIFRPIFNFQ09ORCI7CiAgICAg\nICAgdGltZXN0YW1wVHlwZU5hbWUgPSAiREFURVRJTUUgWUVBUiBUTyBGUkFD\nVElPTigzKSI7CiAgICAgICAgZG91YmxlVHlwZU5hbWUgPSAiTlVNRVJJQygz\nMiwyMCkiOwogICAgICAgIGZsb2F0VHlwZU5hbWUgPSAiUkVBTCI7CiAgICAg\nICAgYmlnaW50VHlwZU5hbWUgPSAiTlVNRVJJQygzMiwwKSI7CiAgICAgICAg\nZG91YmxlVHlwZU5hbWUgPSAiRE9VQkxFIFBSRUNJU0lPTiI7CiAgICAgICAg\nZml4ZWRTaXplVHlwZU5hbWVTZXQuYWRkQWxsKEFycmF5cy5hc0xpc3QobmV3\nIFN0cmluZ1tdewogICAgICAgICAgICAiQllURSIsICJET1VCTEUgUFJFQ0lT\nSU9OIiwgIklOVEVSVkFMIiwgIlNNQUxMRkxPQVQiLCAiVEVYVCIsCiAgICAg\nICAgICAgICJJTlQ4IiwKICAgICAgICB9KSk7CgogICAgICAgIHN1cHBvcnRz\nUXVlcnlUaW1lb3V0ID0gZmFsc2U7CiAgICAgICAgc3VwcG9ydHNMb2NraW5n\nV2l0aERpc3RpbmN0Q2xhdXNlID0gZmFsc2U7CiAgICAgICAgc3VwcG9ydHNM\nb2NraW5nV2l0aE11bHRpcGxlVGFibGVzID0gZmFsc2U7CiAgICAgICAgc3Vw\ncG9ydHNMb2NraW5nV2l0aE9yZGVyQ2xhdXNlID0gZmFsc2U7CgogICAgICAg\nIC8vIHRoZSBpbmZvcm1peCBKREJDIGRyaXZlcnMgaGF2ZSBwcm9ibGVtcyB3\naXRoIHVzaW5nIHRoZQogICAgICAgIC8vIHNjaGVtYSBuYW1lIGluIHJlZmxl\nY3Rpb24gb24gY29sdW1ucyBhbmQgdGFibGVzCiAgICAgICAgc3VwcG9ydHNT\nY2hlbWFGb3JHZXRDb2x1bW5zID0gZmFsc2U7CiAgICAgICAgc3VwcG9ydHNT\nY2hlbWFGb3JHZXRUYWJsZXMgPSBmYWxzZTsKCiAgICAgICAgLy8gSW5mb3Jt\naXggZG9lc24ndCBzdXBwb3J0IGFsaWFzZXMgaW4gZGVsZXRlcyBpZiB0aGUg\ndGFibGUgaGFzIGFuIGluZGV4CiAgICAgICAgYWxsb3dzQWxpYXNJbkJ1bGtD\nbGF1c2UgPSBmYWxzZTsKCiAgICAgICAgLy8gSW5mb3JtaXggZG9lc24ndCB1\nbmRlcnN0YW5kICJYIENST1NTIEpPSU4gWSIsIGJ1dCBpdCBkb2VzIHVuZGVy\nc3RhbmQKICAgICAgICAvLyB0aGUgZXF1aXZhbGVudCAiWCBKT0lOIFkgT04g\nMSA9IDEiCiAgICAgICAgY3Jvc3NKb2luQ2xhdXNlID0gIkpPSU4iOwogICAg\nICAgIHJlcXVpcmVzQ29uZGl0aW9uRm9yQ3Jvc3NKb2luID0gdHJ1ZTsKCiAg\nICAgICAgY29uY2F0ZW5hdGVGdW5jdGlvbiA9ICJDT05DQVQoezB9LHsxfSki\nOwogICAgICAgIG5leHRTZXF1ZW5jZVF1ZXJ5ID0gIlNFTEVDVCB7MH0uTkVY\nVFZBTCBGUk9NIFNZU1RBQkxFUyBXSEVSRSBUQUJJRD0xIjsKICAgICAgICBz\ndXBwb3J0c0NvcnJlbGF0ZWRTdWJzZWxlY3QgPSBmYWxzZTsKICAgICAgICBz\nd2FwU2NoZW1hQW5kQ2F0YWxvZyA9IGZhbHNlOwoKICAgICAgICAvLyBJbmZv\ncm1peCBkb2VzIG5vdCBzdXBwb3J0IGZvcmVpZ24ga2V5IGRlbGV0ZSBhY3Rp\nb24gTlVMTCBvciBERUZBVUxUCiAgICAgICAgc3VwcG9ydHNOdWxsRGVsZXRl\nQWN0aW9uID0gZmFsc2U7CiAgICAgICAgc3VwcG9ydHNEZWZhdWx0RGVsZXRl\nQWN0aW9uID0gZmFsc2U7CgogICAgICAgIHRyaW1TY2hlbWFOYW1lID0gdHJ1\nZTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjb25uZWN0ZWRDb25maWd1cmF0\naW9uKENvbm5lY3Rpb24gY29ubikKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0\naW9uIHsKICAgICAgICBzdXBlci5jb25uZWN0ZWRDb25maWd1cmF0aW9uKGNv\nbm4pOwogICAgICAgIGlmIChkcml2ZXJWZW5kb3IgPT0gbnVsbCkgewogICAg\nICAgICAgICBEYXRhYmFzZU1ldGFEYXRhIG1ldGEgPSBjb25uLmdldE1ldGFE\nYXRhKCk7CiAgICAgICAgICAgIGlmICgiSW5mb3JtaXgiLmVxdWFsc0lnbm9y\nZUNhc2UobWV0YS5nZXREcml2ZXJOYW1lKCkpKQogICAgICAgICAgICAgICAg\nZHJpdmVyVmVuZG9yID0gVkVORE9SX0RBVEFESVJFQ1Q7CiAgICAgICAgICAg\nIGVsc2UKICAgICAgICAgICAgICAgIGRyaXZlclZlbmRvciA9IFZFTkRPUl9P\nVEhFUjsKICAgICAgICB9CiAgICAgICAgaWYgKGlzSkRCQzMpIHsKICAgICAg\nICAgICAgY29ubi5zZXRIb2xkYWJpbGl0eShSZXN1bHRTZXQuSE9MRF9DVVJT\nT1JTX09WRVJfQ09NTUlUKTsKICAgICAgICAgICAgaWYgKGxvZy5pc1RyYWNl\nRW5hYmxlZCgpKQogICAgICAgICAgICAgICAgbG9nLnRyYWNlKF9sb2MuZ2V0\nKCJjb25uZWN0aW9uLWRlZmF1bHRzIiwgbmV3IE9iamVjdFtdewogICAgICAg\nICAgICAgICAgICAgICAgICBuZXcgQm9vbGVhbihjb25uLmdldEF1dG9Db21t\naXQoKSksIAogICAgICAgICAgICAgICAgICAgICAgICBuZXcgSW50ZWdlcihj\nb25uLmdldEhvbGRhYmlsaXR5KCkpLAogICAgICAgICAgICAgICAgICAgICAg\nICBuZXcgSW50ZWdlcihjb25uLmdldFRyYW5zYWN0aW9uSXNvbGF0aW9uKCkp\nfSkpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgQ29sdW1uW10gZ2V0\nQ29sdW1ucyhEYXRhYmFzZU1ldGFEYXRhIG1ldGEsIFN0cmluZyBjYXRhbG9n\nLAogICAgICAgIFN0cmluZyBzY2hlbWFOYW1lLCBTdHJpbmcgdGFibGVOYW1l\nLCBTdHJpbmcgY29sdW1uTmFtZSwgQ29ubmVjdGlvbiBjb25uKQogICAgICAg\nIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIENvbHVtbltdIGNvbHMg\nPSBzdXBlci5nZXRDb2x1bW5zKG1ldGEsIGNhdGFsb2csIHNjaGVtYU5hbWUs\nIHRhYmxlTmFtZSwKICAgICAgICAgICAgY29sdW1uTmFtZSwgY29ubik7Cgog\nICAgICAgIC8vIHRyZWF0IGxvZ3ZhcmNoYXIgYXMgY2xvYgogICAgICAgIGZv\nciAoaW50IGkgPSAwOyBjb2xzICE9IG51bGwgJiYgaSA8IGNvbHMubGVuZ3Ro\nOyBpKyspCiAgICAgICAgICAgIGlmIChjb2xzW2ldLmdldFR5cGUoKSA9PSBU\neXBlcy5MT05HVkFSQ0hBUikKICAgICAgICAgICAgICAgIGNvbHNbaV0uc2V0\nVHlwZShUeXBlcy5DTE9CKTsKICAgICAgICByZXR1cm4gY29sczsKICAgIH0K\nCiAgICBwdWJsaWMgQ29sdW1uIG5ld0NvbHVtbihSZXN1bHRTZXQgY29sTWV0\nYSkKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBDb2x1\nbW4gY29sID0gc3VwZXIubmV3Q29sdW1uKGNvbE1ldGEpOwogICAgICAgIGlm\nIChzd2FwU2NoZW1hQW5kQ2F0YWxvZykKICAgICAgICAgICAgY29sLnNldFNj\naGVtYU5hbWUoY29sTWV0YS5nZXRTdHJpbmcoIlRBQkxFX0NBVCIpKTsKICAg\nICAgICByZXR1cm4gY29sOwogICAgfQoKICAgIHB1YmxpYyBQcmltYXJ5S2V5\nIG5ld1ByaW1hcnlLZXkoUmVzdWx0U2V0IHBrTWV0YSkKICAgICAgICB0aHJv\nd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBQcmltYXJ5S2V5IHBrID0gc3Vw\nZXIubmV3UHJpbWFyeUtleShwa01ldGEpOwogICAgICAgIGlmIChzd2FwU2No\nZW1hQW5kQ2F0YWxvZykKICAgICAgICAgICAgcGsuc2V0U2NoZW1hTmFtZShw\na01ldGEuZ2V0U3RyaW5nKCJUQUJMRV9DQVQiKSk7CiAgICAgICAgcmV0dXJu\nIHBrOwogICAgfQoKICAgIHB1YmxpYyBJbmRleCBuZXdJbmRleChSZXN1bHRT\nZXQgaWR4TWV0YSkKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAg\nICAgICBJbmRleCBpZHggPSBzdXBlci5uZXdJbmRleChpZHhNZXRhKTsKICAg\nICAgICBpZiAoc3dhcFNjaGVtYUFuZENhdGFsb2cpCiAgICAgICAgICAgIGlk\neC5zZXRTY2hlbWFOYW1lKGlkeE1ldGEuZ2V0U3RyaW5nKCJUQUJMRV9DQVQi\nKSk7CiAgICAgICAgcmV0dXJuIGlkeDsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBzZXRCb29sZWFuKFByZXBhcmVkU3RhdGVtZW50IHN0bW50LCBpbnQgaWR4\nLCBib29sZWFuIHZhbCwKICAgICAgICBDb2x1bW4gY29sKQogICAgICAgIHRo\ncm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIC8vIGluZm9ybWl4IGFjdHVh\nbGx5IHJlcXVpcmVzIHRoYXQgYSBib29sZWFuIGJlIHNldDogaXQgY2Fubm90\nCiAgICAgICAgLy8gaGFuZGxlIGEgbnVtZXJpYyBhcmd1bWVudAogICAgICAg\nIHN0bW50LnNldFN0cmluZyhpZHgsIHZhbCA/ICJ0IiA6ICJmIik7CiAgICB9\nCgogICAgcHVibGljIFN0cmluZ1tdIGdldENyZWF0ZVRhYmxlU1FMKFRhYmxl\nIHRhYmxlKSB7CiAgICAgICAgU3RyaW5nW10gY3JlYXRlID0gc3VwZXIuZ2V0\nQ3JlYXRlVGFibGVTUUwodGFibGUpOwogICAgICAgIGNyZWF0ZVswXSA9IGNy\nZWF0ZVswXSArICIgTE9DSyBNT0RFIFJPVyI7CiAgICAgICAgcmV0dXJuIGNy\nZWF0ZTsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nW10gZ2V0QWRkUHJpbWFy\neUtleVNRTChQcmltYXJ5S2V5IHBrKSB7CiAgICAgICAgU3RyaW5nIHBrc3Fs\nID0gZ2V0UHJpbWFyeUtleUNvbnN0cmFpbnRTUUwocGspOwogICAgICAgIGlm\nIChwa3NxbCA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gbmV3IFN0cmlu\nZ1swXTsKICAgICAgICByZXR1cm4gbmV3IFN0cmluZ1tdeyAiQUxURVIgVEFC\nTEUgIgogICAgICAgICAgICArIGdldEZ1bGxOYW1lKHBrLmdldFRhYmxlKCks\nIGZhbHNlKSArICIgQUREIENPTlNUUkFJTlQgIiArIHBrc3FsIH07CiAgICB9\nCgogICAgcHVibGljIFN0cmluZ1tdIGdldEFkZEZvcmVpZ25LZXlTUUwoRm9y\nZWlnbktleSBmaykgewogICAgICAgIFN0cmluZyBma3NxbCA9IGdldEZvcmVp\nZ25LZXlDb25zdHJhaW50U1FMKGZrKTsKICAgICAgICBpZiAoZmtzcWwgPT0g\nbnVsbCkKICAgICAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmdbMF07CiAgICAg\nICAgcmV0dXJuIG5ldyBTdHJpbmdbXXsgIkFMVEVSIFRBQkxFICIKICAgICAg\nICAgICAgKyBnZXRGdWxsTmFtZShmay5nZXRUYWJsZSgpLCBmYWxzZSkgKyAi\nIEFERCBDT05TVFJBSU5UICIgKyBma3NxbCB9OwogICAgfQoKICAgIHB1Ymxp\nYyBib29sZWFuIHN1cHBvcnRzUmFuZG9tQWNjZXNzUmVzdWx0U2V0KFNlbGVj\ndCBzZWwsCiAgICAgICAgYm9vbGVhbiBmb3JVcGRhdGUpIHsKICAgICAgICBy\nZXR1cm4gIWZvclVwZGF0ZSAmJiAhc2VsLmlzTG9iKCkKICAgICAgICAgICAg\nJiYgc3VwZXIuc3VwcG9ydHNSYW5kb21BY2Nlc3NSZXN1bHRTZXQoc2VsLCBm\nb3JVcGRhdGUpOwogICAgfQoKICAgIHB1YmxpYyBDb25uZWN0aW9uIGRlY29y\nYXRlKENvbm5lY3Rpb24gY29ubikKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0\naW9uIHsKICAgICAgICBjb25uID0gc3VwZXIuZGVjb3JhdGUoY29ubik7Cgog\nICAgICAgIC8vIGlmIHdlIGhhdmVuJ3QgYWxyZWFkeSBkb25lIHNvLCBpbml0\naWFsaXplIHRoZSBsb2NrIG1vZGUgb2YgdGhlCiAgICAgICAgLy8gY29ubmVj\ndGlvbgogICAgICAgIGlmIChsb2NrTW9kZUVuYWJsZWQgJiYgX3NlZW5Db25u\nZWN0aW9ucy5hZGQoY29ubikpIHsKICAgICAgICAgICAgU3RyaW5nIHNxbCA9\nICJTRVQgTE9DSyBNT0RFIFRPIFdBSVQiOwogICAgICAgICAgICBpZiAobG9j\na1dhaXRTZWNvbmRzID4gMCkKICAgICAgICAgICAgICAgIHNxbCA9IHNxbCAr\nICIgIiArIGxvY2tXYWl0U2Vjb25kczsKCiAgICAgICAgICAgIFN0YXRlbWVu\ndCBzdG1udCA9IG51bGw7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAg\nICAgICBzdG1udCA9IGNvbm4uY3JlYXRlU3RhdGVtZW50KCk7CiAgICAgICAg\nICAgICAgICBzdG1udC5leGVjdXRlVXBkYXRlKHNxbCk7CiAgICAgICAgICAg\nIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBzZSkgewogICAgICAgICAgICAgICAg\ndGhyb3cgU1FMRXhjZXB0aW9ucy5nZXRTdG9yZShzZSwgdGhpcyk7CiAgICAg\nICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICBpZiAoc3RtbnQg\nIT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAg\nICAgICAgICAgICAgICBzdG1udC5jbG9zZSgpOwogICAgICAgICAgICAgICAg\nICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBzZSkgewogICAgICAgICAgICAg\nICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8g\ndGhlIGRhdGFkaXJlY3QgZHJpdmVyIHJlcXVpcmVzIHRoYXQgd2UgaXNzdWUg\nYSByb2xsYmFjayBiZWZvcmUgdXNpbmcKICAgICAgICAvLyBlYWNoIGNvbm5l\nY3Rpb24KICAgICAgICBpZiAoVkVORE9SX0RBVEFESVJFQ1QuZXF1YWxzSWdu\nb3JlQ2FzZShkcml2ZXJWZW5kb3IpKQogICAgICAgICAgICB0cnkgewogICAg\nICAgICAgICAgICAgY29ubi5yb2xsYmFjaygpOwogICAgICAgICAgICB9IGNh\ndGNoIChTUUxFeGNlcHRpb24gc2UpIHsKICAgICAgICAgICAgfQogICAgICAg\nIHJldHVybiBjb25uOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGluZGV4T2Yo\nU1FMQnVmZmVyIGJ1ZiwgRmlsdGVyVmFsdWUgc3RyLCBGaWx0ZXJWYWx1ZSBm\naW5kLAogICAgICAgICAgICBGaWx0ZXJWYWx1ZSBzdGFydCkgewogICAgICAg\nIHRocm93IG5ldyBVbnN1cHBvcnRlZEV4Y2VwdGlvbigpOwogICAgfQoKICAg\nIHB1YmxpYyBib29sZWFuIG5lZWRzVG9DcmVhdGVJbmRleChJbmRleCBpZHgs\nIFRhYmxlIHRhYmxlKSB7CiAgICAgICAvLyBJbmZvcm1peCB3aWxsIGF1dG9t\nYXRpY2FsbHkgY3JlYXRlIGEgdW5pcXVlIGluZGV4IGZvciB0aGUKICAgICAg\nIC8vIHByaW1hcnkga2V5LCBzbyBkb24ndCBjcmVhdGUgYW5vdGhlciBpbmRl\neCBhZ2FpbgogICAgICAgUHJpbWFyeUtleSBwayA9IHRhYmxlLmdldFByaW1h\ncnlLZXkoKTsKICAgICAgIGlmIChwayAhPSBudWxsICYmIGlkeC5jb2x1bW5z\nTWF0Y2gocGsuZ2V0Q29sdW1ucygpKSkKICAgICAgICAgICByZXR1cm4gZmFs\nc2U7CiAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KfQo=\n","encoding":"base64"}

