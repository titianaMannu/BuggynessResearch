{"sha":"7f9a4bd4ec80d4b4c7340139c243d5540900acac","node_id":"MDQ6QmxvYjIwNjM2NDo3ZjlhNGJkNGVjODBkNGI0YzczNDAxMzljMjQzZDU1NDA5MDBhY2Fj","size":10569,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/7f9a4bd4ec80d4b4c7340139c243d5540900acac","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWw7CgppbXBvcnQg\namF2YS5zcWwuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmEuc3FsLkRhdGFiYXNl\nTWV0YURhdGE7CmltcG9ydCBqYXZhLnNxbC5TUUxFeGNlcHRpb247CmltcG9y\ndCBqYXZhLnNxbC5UeXBlczsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5rZXJuZWwuZXhwcy5GaWx0ZXJWYWx1ZTsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5rZXJuZWwuRmlsdGVyczsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNjaGVtYS5Db2x1bW47CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLm1ldGEuSmF2YVR5cGVzOwoKLyoqCiAqIERpY3Rpb25hcnkg\nZm9yIE1TIFNRTFNlcnZlci4KICovCnB1YmxpYyBjbGFzcyBTUUxTZXJ2ZXJE\naWN0aW9uYXJ5CiAgICBleHRlbmRzIEFic3RyYWN0U1FMU2VydmVyRGljdGlv\nbmFyeSB7CgogICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgVkVORE9S\nX01JQ1JPU09GVCA9ICJtaWNyb3NvZnQiOwogICAgcHVibGljIHN0YXRpYyBm\naW5hbCBTdHJpbmcgVkVORE9SX05FVERJUkVDVCA9ICJuZXRkaXJlY3QiOwog\nICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgVkVORE9SX0pURFMgPSAi\nanRkcyI7CgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9jYWxpemVyIF9s\nb2MgPSBMb2NhbGl6ZXIuZm9yUGFja2FnZQogICAgICAgIChTUUxTZXJ2ZXJE\naWN0aW9uYXJ5LmNsYXNzKTsKCiAgICBwcml2YXRlIFN0cmluZyBzY2hlbWFD\nYXNlID0gU0NIRU1BX0NBU0VfUFJFU0VSVkU7CiAgICAvKioKICAgICAqIEZs\nYWcgd2hldGhlciB0byB0cmVhdCBVTklRVUVJREVOVElGSUVSIGFzIFZBUkJJ\nTkFSWSBvciBWQVJDSEFSCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIHVu\naXF1ZUlkZW50aWZpZXJBc1ZhcmJpbmFyeSA9IHRydWU7CgogICAgcHVibGlj\nIFNRTFNlcnZlckRpY3Rpb25hcnkoKSB7CiAgICAgICAgcGxhdGZvcm0gPSAi\nTWljcm9zb2Z0IFNRTCBTZXJ2ZXIiOwoKICAgICAgICAvLyBTUUxTZXJ2ZXIg\nbG9ja3Mgb24gYSB0YWJsZS1ieS10YWJsZSBiYXNpcwogICAgICAgIGZvclVw\nZGF0ZUNsYXVzZSA9IG51bGw7CiAgICAgICAgdGFibGVGb3JVcGRhdGVDbGF1\nc2UgPSAiV0lUSCAoVVBETE9DSykiOwoKICAgICAgICBzdXBwb3J0c051bGxU\nYWJsZUZvckdldENvbHVtbnMgPSBmYWxzZTsKICAgICAgICByZXF1aXJlc0Fs\naWFzRm9yU3Vic2VsZWN0ID0gdHJ1ZTsKCiAgICAgICAgc3RyaW5nTGVuZ3Ro\nRnVuY3Rpb24gPSAiTEVOKHswfSkiOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIGNvbm5lY3RlZENvbmZpZ3VyYXRpb24oQ29ubmVjdGlvbiBjb25uKQogICAg\nICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHN1cGVyLmNvbm5l\nY3RlZENvbmZpZ3VyYXRpb24oY29ubik7CiAgICAgICAgYm9vbGVhbiByZXF1\naXJlc1dhcm5pbmdzID0gdHJ1ZTsKICAgICAgICBEYXRhYmFzZU1ldGFEYXRh\nIG1ldGEgPSBjb25uLmdldE1ldGFEYXRhKCk7CiAgICAgICAgU3RyaW5nIGRy\naXZlck5hbWUgPSBtZXRhLmdldERyaXZlck5hbWUoKTsKICAgICAgICBTdHJp\nbmcgdXJsID0gbWV0YS5nZXRVUkwoKTsKICAgICAgICBpZiAoZHJpdmVyVmVu\nZG9yID09IG51bGwpIHsKICAgICAgICAgICAgaWYgKGRyaXZlck5hbWUgIT0g\nbnVsbCkgewogICAgICAgICAgICAgICAgaWYgKGRyaXZlck5hbWUuc3RhcnRz\nV2l0aCgiTWljcm9zb2Z0IFNRTCBTZXJ2ZXIiKSkgewogICAgICAgICAgICAg\nICAgICAgIC8vIHYxLjEsIDEuMiBvciAyLjAgZHJpdmVyCiAgICAgICAgICAg\nICAgICAgICAgZHJpdmVyVmVuZG9yID0gVkVORE9SX01JQ1JPU09GVDsgICAg\nICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gc2VydmVyTWFq\nb3JWZXJzaW9uIG9mIDg9PTIwMDAsIDk9PTIwMDUsIDEwPT0yMDA4CiAgICAg\nICAgICAgICAgICAgICAgaWYgKG1ldGEuZ2V0RGF0YWJhc2VNYWpvclZlcnNp\nb24oKSA+PSA5KQogICAgICAgICAgICAgICAgICAgICAgICBzdXBwb3J0c1hN\nTENvbHVtbiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgaWYgKG1ldGEu\nZ2V0RHJpdmVyTWFqb3JWZXJzaW9uKCkgPj0gMikgewogICAgICAgICAgICAg\nICAgICAgICAgICAvLyBzZWUgaHR0cDovL2Jsb2dzLm1zZG4uY29tL2pkYmN0\nZWFtL2FyY2hpdmUvMjAwNy8wNS9cCiAgICAgICAgICAgICAgICAgICAgICAg\nIC8vIDAyL3doYXQtaXMtYWRhcHRpdmUtcmVzcG9uc2UtYnVmZmVyaW5nLWFu\nZC13aHktXAogICAgICAgICAgICAgICAgICAgICAgICAvLyBzaG91bGQtaS11\nc2UtaXQuYXNweAogICAgICAgICAgICAgICAgICAgICAgICAvLyAyLjAgZHJp\ndmVyIGNvbm5lY3RVUkwgYXV0b21hdGljYWxseSBpbmNsdWRlcyAKICAgICAg\nICAgICAgICAgICAgICAgICAgLy8gcmVzcG9uc2VCdWZmZXJpbmc9YWRhcHRp\ndmUKICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIGRpc2FibGVTdGF0\nZW1lbnRQb29saW5nPXRydWUKICAgICAgICAgICAgICAgICAgICAgICAgcmVx\ndWlyZXNXYXJuaW5ncyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0K\nICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAg\naWYgKCJOZXREaXJlY3QgSlNRTENvbm5lY3QiLmVxdWFscyhkcml2ZXJOYW1l\nKSkKICAgICAgICAgICAgICAgICAgICAgICAgZHJpdmVyVmVuZG9yID0gVkVO\nRE9SX05FVERJUkVDVDsKICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChk\ncml2ZXJOYW1lLnN0YXJ0c1dpdGgoImpURFMiKSkKICAgICAgICAgICAgICAg\nICAgICAgICAgZHJpdmVyVmVuZG9yID0gVkVORE9SX0pURFM7CiAgICAgICAg\nICAgICAgICAgICAgZWxzZSBpZiAoIlNRTFNlcnZlciIuZXF1YWxzKGRyaXZl\nck5hbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1cmwgIT0g\nbnVsbCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsLnN0YXJ0\nc1dpdGgoImpkYmM6bWljcm9zb2Z0OnNxbHNlcnZlcjoiKSkKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIGRyaXZlclZlbmRvciA9IFZFTkRPUl9NSUNS\nT1NPRlQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHVybCAh\nPSBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiB1cmwuc3Rh\ncnRzV2l0aCgiamRiYzpkYXRhZGlyZWN0OnNxbHNlcnZlcjoiKSkKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIGRyaXZlclZlbmRvciA9IFZFTkRPUl9E\nQVRBRElSRUNUOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICBkcml2ZXJWZW5kb3IgPSBWRU5ET1Jf\nT1RIRVI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAg\nICAgIC8vIG9sZCB3YXkgb2YgZGV0ZXJtaW5pbmcgeG1sIHN1cHBvcnQKICAg\nICAgICAgICAgICAgICAgICBpZiAoZHJpdmVyTmFtZS5pbmRleE9mKHBsYXRm\nb3JtKSAhPSAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcg\ndmVyc2lvblN0cmluZyA9IGRyaXZlck5hbWUuCiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICBzdWJzdHJpbmcocGxhdGZvcm0ubGVuZ3RoKCkgKyAxKTsK\nICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZlcnNpb25TdHJpbmcuaW5k\nZXhPZigiICIpICE9IC0xKQogICAgICAgICAgICAgICAgICAgICAgICAgICAg\ndmVyc2lvblN0cmluZyA9IHZlcnNpb25TdHJpbmcuc3Vic3RyaW5nKDAsCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVyc2lvblN0cmluZy5p\nbmRleE9mKCIgIikpOwogICAgICAgICAgICAgICAgICAgICAgICBpbnQgdmVy\nc2lvbiA9IEludGVnZXIucGFyc2VJbnQodmVyc2lvblN0cmluZyk7CiAgICAg\nICAgICAgICAgICAgICAgICAgIGlmICh2ZXJzaW9uID49IDIwMDUpCiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICBzdXBwb3J0c1hNTENvbHVtbiA9IHRy\ndWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQog\nICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZHJpdmVyVmVu\nZG9yID0gVkVORE9SX09USEVSOwogICAgICAgICAgICB9CiAgICAgICAgfQoK\nICAgICAgICAvLyB3YXJuIGFib3V0IG5vdCB1c2luZyBjdXJzb3JzIGZvciBw\ncmUtMi4wIE1TIGRyaXZlcgogICAgICAgIC8vIGFzIGNvbm5lY3RVUkwgaW5j\nbHVkZXMgc2VsZWN0TWV0aG9kPWRpcmVjdAogICAgICAgIGlmICgoKFZFTkRP\nUl9NSUNST1NPRlQuZXF1YWxzSWdub3JlQ2FzZShkcml2ZXJWZW5kb3IpCiAg\nICAgICAgICAgICYmIHJlcXVpcmVzV2FybmluZ3MpIAogICAgICAgICAgICB8\nfCBWRU5ET1JfREFUQURJUkVDVC5lcXVhbHNJZ25vcmVDYXNlKGRyaXZlclZl\nbmRvcikpCiAgICAgICAgICAgICYmICh1cmwudG9Mb3dlckNhc2UoKS5pbmRl\neE9mKCJzZWxlY3RtZXRob2Q9Y3Vyc29yIikgPT0gLTEpKQogICAgICAgICAg\nICBsb2cud2FybihfbG9jLmdldCgic3Fsc2VydmVyLWN1cnNvciIsIHVybCkp\nOwoKICAgICAgICAvLyB3YXJuIGFib3V0IHByZXBhcmVkIHN0YXRlbWVudCBj\nYWNoaW5nIGlmIHVzaW5nIHByZS0yLjAgTVMgZHJpdmVycwogICAgICAgIC8v\nIGFzIGNvbm5lY3RVUkwgaW5jbHVkZXMgcmVzcG9uc2VCdWZmZXJpbmc9ZnVs\nbAogICAgICAgIFN0cmluZyBwcm9wcyA9IGNvbmYuZ2V0Q29ubmVjdGlvbkZh\nY3RvcnlQcm9wZXJ0aWVzKCk7CiAgICAgICAgaWYgKChwcm9wcyAhPSBudWxs\nKSAmJiAKICAgICAgICAgICAgVkVORE9SX01JQ1JPU09GVC5lcXVhbHNJZ25v\ncmVDYXNlKGRyaXZlclZlbmRvcikgJiYgcmVxdWlyZXNXYXJuaW5ncwogICAg\nICAgICAgICAmJiAocHJvcHMudG9Mb3dlckNhc2UoKS5pbmRleE9mKCJtYXhj\nYWNoZWRzdGF0ZW1lbnRzPTAiKSA9PSAtMSkpCiAgICAgICAgICAgIGxvZy53\nYXJuKF9sb2MuZ2V0KCJzcWxzZXJ2ZXItY2FjaGVkc3RtbnRzIikpOwogICAg\nfQoKICAgIHB1YmxpYyBDb2x1bW5bXSBnZXRDb2x1bW5zKERhdGFiYXNlTWV0\nYURhdGEgbWV0YSwgU3RyaW5nIGNhdGFsb2csCiAgICAgICAgU3RyaW5nIHNj\naGVtYU5hbWUsIFN0cmluZyB0YWJsZU5hbWUsIFN0cmluZyBjb2x1bW5OYW1l\nLCBDb25uZWN0aW9uIGNvbm4pCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlv\nbiB7CiAgICAgICAgQ29sdW1uW10gY29scyA9IHN1cGVyLmdldENvbHVtbnMo\nbWV0YSwgY2F0YWxvZywgc2NoZW1hTmFtZSwgdGFibGVOYW1lLAogICAgICAg\nICAgICBjb2x1bW5OYW1lLCBjb25uKTsKCiAgICAgICAgLy8gZm9yIG9wdGEg\nZHJpdmVyLCB3aGljaCByZXBvcnRzIG52YXJjaGFyIGFzIHVua25vd24gdHlw\nZQogICAgICAgIGZvciAoaW50IGkgPSAwOyBjb2xzICE9IG51bGwgJiYgaSA8\nIGNvbHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgU3RyaW5nIHR5cGVO\nYW1lID0gY29sc1tpXS5nZXRUeXBlTmFtZSgpOwogICAgICAgICAgICBpZiAo\ndHlwZU5hbWUgPT0gbnVsbCkKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwoK\nICAgICAgICAgICAgdHlwZU5hbWUgPSB0eXBlTmFtZS50b1VwcGVyQ2FzZSgp\nOwoKICAgICAgICAgICAgaWYgKCJOVkFSQ0hBUiIuZXF1YWxzKHR5cGVOYW1l\nKSkKICAgICAgICAgICAgICAgIGNvbHNbaV0uc2V0VHlwZShUeXBlcy5WQVJD\nSEFSKTsKICAgICAgICAgICAgZWxzZSBpZiAoIlVOSVFVRUlERU5USUZJRVIi\nLmVxdWFscyh0eXBlTmFtZSkpIHsKICAgICAgICAgICAgICAgIGlmICh1bmlx\ndWVJZGVudGlmaWVyQXNWYXJiaW5hcnkpCiAgICAgICAgICAgICAgICAgICAg\nY29sc1tpXS5zZXRUeXBlKFR5cGVzLlZBUkJJTkFSWSk7CiAgICAgICAgICAg\nICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgY29sc1tpXS5zZXRUeXBl\nKFR5cGVzLlZBUkNIQVIpOwogICAgICAgICAgICB9IGVsc2UgaWYgKCJOQ0hB\nUiIuZXF1YWxzKHR5cGVOYW1lKSkKICAgICAgICAgICAgICAgIGNvbHNbaV0u\nc2V0VHlwZShUeXBlcy5DSEFSKTsKICAgICAgICAgICAgZWxzZSBpZiAoIk5U\nRVhUIi5lcXVhbHModHlwZU5hbWUpKQogICAgICAgICAgICAgICAgY29sc1tp\nXS5zZXRUeXBlKFR5cGVzLkNMT0IpOwogICAgICAgIH0KICAgICAgICByZXR1\ncm4gY29sczsKICAgIH0KICAgIAogICAgcHJvdGVjdGVkIHZvaWQgYXBwZW5k\nTGVuZ3RoKFNRTEJ1ZmZlciBidWYsIGludCB0eXBlKSB7CiAgICAgICAgaWYg\nKHR5cGUgPT0gVHlwZXMuVkFSQ0hBUikKICAgICAgICAgICAgYnVmLmFwcGVu\nZCgiKCIpLmFwcGVuZChJbnRlZ2VyLnRvU3RyaW5nKGNoYXJhY3RlckNvbHVt\nblNpemUpKS5hcHBlbmQoIikiKTsKICAgIH0KCiAgICAvKioKICAgICAqIElm\nIHRoaXMgZGljdGlvbmFyeSBzdXBwb3J0cyBYTUwgdHlwZSwKICAgICAqIHVz\nZSB0aGlzIG1ldGhvZCB0byBhcHBlbmQgeG1sIHByZWRpY2F0ZS4KICAgICAq\nIAogICAgICogQHBhcmFtIGJ1ZiB0aGUgU1FMIGJ1ZmZlciB0byB3cml0ZSB0\naGUgY29tcGFyaXNvbgogICAgICogQHBhcmFtIG9wIHRoZSBjb21wYXJpc29u\nIG9wZXJhdGlvbiB0byBwZXJmb3JtCiAgICAgKiBAcGFyYW0gbGhzIHRoZSBs\nZWZ0IGhhbmQgc2lkZSBvZiB0aGUgY29tcGFyaXNvbgogICAgICogQHBhcmFt\nIHJocyB0aGUgcmlnaHQgaGFuZCBzaWRlIG9mIHRoZSBjb21wYXJpc29uCiAg\nICAgKiBAcGFyYW0gbGhzeG1sIGluZGljYXRlcyB3aGV0aGVyIHRoZSBsZWZ0\nIG9wZXJhbmQgbWFwcyB0byB4bWwKICAgICAqIEBwYXJhbSByaHN4bWwgaW5k\naWNhdGVzIHdoZXRoZXIgdGhlIHJpZ2h0IG9wZXJhbmQgbWFwcyB0byB4bWwK\nICAgICAqLwogICAgcHVibGljIHZvaWQgYXBwZW5kWG1sQ29tcGFyaXNvbihT\nUUxCdWZmZXIgYnVmLCBTdHJpbmcgb3AsIEZpbHRlclZhbHVlIGxocywKICAg\nICAgICBGaWx0ZXJWYWx1ZSByaHMsIGJvb2xlYW4gbGhzeG1sLCBib29sZWFu\nIHJoc3htbCkgewogICAgICAgIHN1cGVyLmFwcGVuZFhtbENvbXBhcmlzb24o\nYnVmLCBvcCwgbGhzLCByaHMsIGxoc3htbCwgcmhzeG1sKTsKICAgICAgICBp\nZiAobGhzeG1sICYmIHJoc3htbCkKICAgICAgICAgICAgYXBwZW5kWG1sQ29t\ncGFyaXNvbjIoYnVmLCBvcCwgbGhzLCByaHMpOwogICAgICAgIGVsc2UgaWYg\nKGxoc3htbCkKICAgICAgICAgICAgYXBwZW5kWG1sQ29tcGFyaXNvbjEoYnVm\nLCBvcCwgbGhzLCByaHMpOwogICAgICAgIGVsc2UgCiAgICAgICAgICAgIGFw\ncGVuZFhtbENvbXBhcmlzb24xKGJ1Ziwgb3AsIHJocywgbGhzKTsKICAgIH0K\nICAgIC8qKgogICAgICogQXBwZW5kIGFuIHhtbCBjb21wYXJpc29uIHByZWRp\nY2F0ZQogICAgICoKICAgICAqIEBwYXJhbSBidWYgdGhlIFNRTCBidWZmZXIg\ndG8gd3JpdGUgdGhlIGNvbXBhcmlzb24KICAgICAqIEBwYXJhbSBvcCB0aGUg\nY29tcGFyaXNvbiBvcGVyYXRpb24gdG8gcGVyZm9ybQogICAgICogQHBhcmFt\nIGxocyB0aGUgbGVmdCBoYW5kIHNpZGUgb2YgdGhlIGNvbXBhcmlzb24gKG1h\ncHMgdG8geG1sIGNvbHVtbikKICAgICAqIEBwYXJhbSByaHMgdGhlIHJpZ2h0\nIGhhbmQgc2lkZSBvZiB0aGUgY29tcGFyaXNvbgogICAgICovCiAgICBwcml2\nYXRlIHZvaWQgYXBwZW5kWG1sQ29tcGFyaXNvbjEoU1FMQnVmZmVyIGJ1Ziwg\nU3RyaW5nIG9wLAogICAgICAgIEZpbHRlclZhbHVlIGxocywgRmlsdGVyVmFs\ndWUgcmhzKSB7CiAgICAgICAgYm9vbGVhbiBjYXN0cmhzID0gcmhzLmlzQ29u\nc3RhbnQoKTsKICAgICAgICBpZiAoY2FzdHJocykKICAgICAgICAgICAgYXBw\nZW5kWG1sVmFsdWUoYnVmLCBsaHMpOwogICAgICAgIGVsc2UKICAgICAgICAg\nICAgYXBwZW5kWG1sRXhpc3QoYnVmLCBsaHMpOwogICAgICAgIGJ1Zi5hcHBl\nbmQoIiAiKS5hcHBlbmQob3ApLmFwcGVuZCgiICIpOwogICAgICAgIGlmIChj\nYXN0cmhzKQogICAgICAgICAgICByaHMuYXBwZW5kVG8oYnVmKTsKICAgICAg\nICBlbHNlIHsKICAgICAgICAgICAgYnVmLmFwcGVuZCgic3FsOmNvbHVtbihc\nIiIpOwogICAgICAgICAgICByaHMuYXBwZW5kVG8oYnVmKTsKICAgICAgICAg\nICAgYnVmLmFwcGVuZCgiXCIpIikuCiAgICAgICAgICAgICAgICBhcHBlbmQo\nIl0nKSA9IDEiKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIHByaXZhdGUg\ndm9pZCBhcHBlbmRYbWxFeGlzdChTUUxCdWZmZXIgYnVmLCBGaWx0ZXJWYWx1\nZSBsaHMpIHsKICAgICAgICBidWYuYXBwZW5kKGxocy5nZXRDb2x1bW5BbGlh\ncygKICAgICAgICAgICAgbGhzLmdldEZpZWxkTWFwcGluZygpLmdldENvbHVt\nbnMoKVswXSkpLgogICAgICAgICAgICBhcHBlbmQoIi5leGlzdCgnIikuCiAg\nICAgICAgICAgIGFwcGVuZCgiLypbIik7CiAgICAgICAgbGhzLmFwcGVuZFRv\nKGJ1Zik7ICAgIAogICAgfQogICAgCiAgICAvKioKICAgICAqIEFwcGVuZCBh\nbiB4bWwgY29tcGFyaXNvbiBwcmVkaWNhdGUgKGJvdGggb3BlcmFuZHMgbWFw\nIHRvIHhtbCBjb2x1bW4pCiAgICAgKgogICAgICogQHBhcmFtIGJ1ZiB0aGUg\nU1FMIGJ1ZmZlciB0byB3cml0ZSB0aGUgY29tcGFyaXNvbgogICAgICogQHBh\ncmFtIG9wIHRoZSBjb21wYXJpc29uIG9wZXJhdGlvbiB0byBwZXJmb3JtCiAg\nICAgKiBAcGFyYW0gbGhzIHRoZSBsZWZ0IGhhbmQgc2lkZSBvZiB0aGUgY29t\ncGFyaXNvbiAobWFwcyB0byB4bWwgY29sdW1uKQogICAgICogQHBhcmFtIHJo\ncyB0aGUgcmlnaHQgaGFuZCBzaWRlIG9mIHRoZSBjb21wYXJpc29uIChtYXBz\nIHRvIHhtbCBjb2x1bW4pCiAgICAgKi8KICAgIHByaXZhdGUgdm9pZCBhcHBl\nbmRYbWxDb21wYXJpc29uMihTUUxCdWZmZXIgYnVmLCBTdHJpbmcgb3AsIAog\nICAgICAgIEZpbHRlclZhbHVlIGxocywgRmlsdGVyVmFsdWUgcmhzKSB7CiAg\nICAgICAgYXBwZW5kWG1sVmFsdWUoYnVmLCBsaHMpOwogICAgICAgIGJ1Zi5h\ncHBlbmQoIiAiKS5hcHBlbmQob3ApLmFwcGVuZCgiICIpOwogICAgICAgIGFw\ncGVuZFhtbFZhbHVlKGJ1ZiwgcmhzKTsKICAgIH0KICAgIAogICAgcHJpdmF0\nZSB2b2lkIGFwcGVuZFhtbFZhbHVlKFNRTEJ1ZmZlciBidWYsIEZpbHRlclZh\nbHVlIHZhbCkgewogICAgICAgIENsYXNzIHJjID0gRmlsdGVycy53cmFwKHZh\nbC5nZXRUeXBlKCkpOwogICAgICAgIGludCB0eXBlID0gZ2V0SkRCQ1R5cGUo\nSmF2YVR5cGVzLmdldFR5cGVDb2RlKHJjKSwgZmFsc2UpOwogICAgICAgIGJv\nb2xlYW4gaXNYbWxBdHRyaWJ1dGUgPSAodmFsLmdldFhtbE1hcHBpbmcoKSA9\nPSBudWxsKSA/IGZhbHNlCiAgICAgICAgICAgICAgICA6IHZhbC5nZXRYbWxN\nYXBwaW5nKCkuaXNYbWxBdHRyaWJ1dGUoKTsKICAgICAgICBidWYuYXBwZW5k\nKHZhbC5nZXRDb2x1bW5BbGlhcygKICAgICAgICAgICAgdmFsLmdldEZpZWxk\nTWFwcGluZygpLmdldENvbHVtbnMoKVswXSkpLgogICAgICAgICAgICBhcHBl\nbmQoIi52YWx1ZSgiKS4KICAgICAgICAgICAgYXBwZW5kKCInKC8qLyIpOwog\nICAgICAgIHZhbC5hcHBlbmRUbyhidWYpOwogICAgICAgIGlmICghaXNYbWxB\ndHRyaWJ1dGUpCiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoIi90ZXh0KCkiKTsK\nICAgICAgICBidWYuYXBwZW5kKCIpWzFdJywnIikuCiAgICAgICAgICAgIGFw\ncGVuZChnZXRUeXBlTmFtZSh0eXBlKSk7CiAgICAgICAgYXBwZW5kTGVuZ3Ro\nKGJ1ZiwgdHlwZSk7CiAgICAgICAgYnVmLmFwcGVuZCgiJykiKTsKICAgIH0K\nICAgIAogICAgLyoqCiAgICAgKiBSZXR1cm4gREIgc3BlY2lmaWMgc2NoZW1h\nQ2FzZQogICAgICovCiAgICBwdWJsaWMgU3RyaW5nIGdldFNjaGVtYUNhc2Uo\nKSB7CiAgICAgICAgcmV0dXJuIHNjaGVtYUNhc2U7CiAgICB9Cn0K\n","encoding":"base64"}

