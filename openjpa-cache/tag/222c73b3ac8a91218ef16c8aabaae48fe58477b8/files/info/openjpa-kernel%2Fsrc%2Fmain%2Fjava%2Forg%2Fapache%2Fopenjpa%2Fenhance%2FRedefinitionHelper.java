{"sha":"d155a1b530c1c2738b9b3de2b0b445f7f045dd77","node_id":"MDQ6QmxvYjIwNjM2NDpkMTU1YTFiNTMwYzFjMjczOGI5YjNkZTJiMGI0NDVmN2YwNDVkZDc3","size":6142,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/d155a1b530c1c2738b9b3de2b0b445f7f045dd77","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5lbmhhbmNlOwoKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5rZXJuZWwuT3BlbkpQQVN0YXRlTWFuYWdlcjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuU3RhdGVNYW5hZ2VySW1w\nbDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLkltcGxIZWxwZXI7\nCgovKioKICogSGVscGVyIG1ldGhvZHMgZm9yIG1hbmFnZWQgdHlwZXMgdGhh\ndCB1c2UgbWV0aG9kIHJlZGVmaW5pdGlvbiBmb3IgZmllbGQKICogdHJhY2tp\nbmcuCiAqCiAqIEBzaW5jZSAxLjAuMAogKi8KcHVibGljIGNsYXNzIFJlZGVm\naW5pdGlvbkhlbHBlciB7CgogICAgLyoqCiAgICAgKiBDYWxsIHtAbGluayBT\ndGF0ZU1hbmFnZXJJbXBsI2RpcnR5Q2hlY2t9IGlmIHRoZSBhcmd1bWVudCBp\ncyBhCiAgICAgKiB7QGxpbmsgU3RhdGVNYW5hZ2VySW1wbH0uCiAgICAgKi8K\nICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBkaXJ0eUNoZWNrKFN0YXRlTWFuYWdl\nciBzbSkgewogICAgICAgIGlmIChzbSBpbnN0YW5jZW9mIFN0YXRlTWFuYWdl\nckltcGwpCiAgICAgICAgICAgICgoU3RhdGVNYW5hZ2VySW1wbCkgc20pLmRp\ncnR5Q2hlY2soKTsKICAgIH0KCiAgICAvKioKICAgICAqIE5vdGlmeSB0aGUg\nc3RhdGUgbWFuYWdlciBmb3IgPGNvZGU+bzwvY29kZT4gKGlmIGFueSkgdGhh\ndCBhIGZpZWxkCiAgICAgKiBpcyBhYm91dCB0byBiZSBhY2Nlc3NlZC4KICAg\nICAqLwogICAgcHVibGljIHN0YXRpYyB2b2lkIGFjY2Vzc2luZ0ZpZWxkKE9i\namVjdCBvLCBpbnQgYWJzb2x1dGVJbmRleCkgewogICAgICAgIFBlcnNpc3Rl\nbmNlQ2FwYWJsZSBwYyA9IEltcGxIZWxwZXIudG9QZXJzaXN0ZW5jZUNhcGFi\nbGUobywgbnVsbCk7CiAgICAgICAgaWYgKHBjID09IG51bGwpCiAgICAgICAg\nICAgIHJldHVybjsKICAgICAgICBTdGF0ZU1hbmFnZXIgc20gPSBwYy5wY0dl\ndFN0YXRlTWFuYWdlcigpOwogICAgICAgIGlmIChzbSAhPSBudWxsKQogICAg\nICAgICAgICBzbS5hY2Nlc3NpbmdGaWVsZChhYnNvbHV0ZUluZGV4KTsKICAg\nIH0KCiAgICAvKioKICAgICAqIFNldHRpbmcgc3RhdGUgY2FsbGJhY2suCiAg\nICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBzZXR0aW5nRmllbGQoT2Jq\nZWN0IG8sIGludCBpZHgsIGJvb2xlYW4gY3VyLAogICAgICAgIGJvb2xlYW4g\nbmV4dCkgewogICAgICAgIFBlcnNpc3RlbmNlQ2FwYWJsZSBwYyA9IEltcGxI\nZWxwZXIudG9QZXJzaXN0ZW5jZUNhcGFibGUobywgbnVsbCk7CiAgICAgICAg\naWYgKHBjID09IG51bGwpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBT\ndGF0ZU1hbmFnZXIgc20gPSBwYy5wY0dldFN0YXRlTWFuYWdlcigpOwogICAg\nICAgIGlmIChzbSAhPSBudWxsKQogICAgICAgICAgICBzbS5zZXR0aW5nQm9v\nbGVhbkZpZWxkKHBjLCBpZHgsIGN1ciwgbmV4dCwKICAgICAgICAgICAgICAg\nIE9wZW5KUEFTdGF0ZU1hbmFnZXIuU0VUX1VTRVIpOwogICAgfQoKICAgIC8q\nKgogICAgICogU2V0dGluZyBzdGF0ZSBjYWxsYmFjay4KICAgICAqLwogICAg\ncHVibGljIHN0YXRpYyB2b2lkIHNldHRpbmdGaWVsZChPYmplY3QgbywgaW50\nIGlkeCwgY2hhciBjdXIsIGNoYXIgbmV4dCkgewogICAgICAgIFBlcnNpc3Rl\nbmNlQ2FwYWJsZSBwYyA9IEltcGxIZWxwZXIudG9QZXJzaXN0ZW5jZUNhcGFi\nbGUobywgbnVsbCk7CiAgICAgICAgaWYgKHBjID09IG51bGwpCiAgICAgICAg\nICAgIHJldHVybjsKICAgICAgICBTdGF0ZU1hbmFnZXIgc20gPSBwYy5wY0dl\ndFN0YXRlTWFuYWdlcigpOwogICAgICAgIGlmIChzbSAhPSBudWxsKQogICAg\nICAgICAgICBzbS5zZXR0aW5nQ2hhckZpZWxkKHBjLCBpZHgsIGN1ciwgbmV4\ndCwKICAgICAgICAgICAgICAgIE9wZW5KUEFTdGF0ZU1hbmFnZXIuU0VUX1VT\nRVIpOwogICAgfQoKICAgIC8qKgogICAgICogU2V0dGluZyBzdGF0ZSBjYWxs\nYmFjay4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyB2b2lkIHNldHRpbmdG\naWVsZChPYmplY3QgbywgaW50IGlkeCwgYnl0ZSBjdXIsIGJ5dGUgbmV4dCkg\newogICAgICAgIFBlcnNpc3RlbmNlQ2FwYWJsZSBwYyA9IEltcGxIZWxwZXIu\ndG9QZXJzaXN0ZW5jZUNhcGFibGUobywgbnVsbCk7CiAgICAgICAgaWYgKHBj\nID09IG51bGwpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBTdGF0ZU1h\nbmFnZXIgc20gPSBwYy5wY0dldFN0YXRlTWFuYWdlcigpOwogICAgICAgIGlm\nIChzbSAhPSBudWxsKQogICAgICAgICAgICBzbS5zZXR0aW5nQnl0ZUZpZWxk\nKHBjLCBpZHgsIGN1ciwgbmV4dCwKICAgICAgICAgICAgICAgIE9wZW5KUEFT\ndGF0ZU1hbmFnZXIuU0VUX1VTRVIpOwogICAgfQoKICAgIC8qKgogICAgICog\nU2V0dGluZyBzdGF0ZSBjYWxsYmFjay4KICAgICAqLwogICAgcHVibGljIHN0\nYXRpYyB2b2lkIHNldHRpbmdGaWVsZChPYmplY3QgbywgaW50IGlkeCwgc2hv\ncnQgY3VyLCBzaG9ydCBuZXh0KSB7CiAgICAgICAgUGVyc2lzdGVuY2VDYXBh\nYmxlIHBjID0gSW1wbEhlbHBlci50b1BlcnNpc3RlbmNlQ2FwYWJsZShvLCBu\ndWxsKTsKICAgICAgICBpZiAocGMgPT0gbnVsbCkKICAgICAgICAgICAgcmV0\ndXJuOwogICAgICAgIFN0YXRlTWFuYWdlciBzbSA9IHBjLnBjR2V0U3RhdGVN\nYW5hZ2VyKCk7CiAgICAgICAgaWYgKHNtICE9IG51bGwpCiAgICAgICAgICAg\nIHNtLnNldHRpbmdTaG9ydEZpZWxkKHBjLCBpZHgsIGN1ciwgbmV4dCwKICAg\nICAgICAgICAgICAgIE9wZW5KUEFTdGF0ZU1hbmFnZXIuU0VUX1VTRVIpOwog\nICAgfQoKICAgIC8qKgogICAgICogU2V0dGluZyBzdGF0ZSBjYWxsYmFjay4K\nICAgICAqLwogICAgcHVibGljIHN0YXRpYyB2b2lkIHNldHRpbmdGaWVsZChP\nYmplY3QgbywgaW50IGlkeCwgaW50IGN1ciwgaW50IG5leHQpIHsKICAgICAg\nICBQZXJzaXN0ZW5jZUNhcGFibGUgcGMgPSBJbXBsSGVscGVyLnRvUGVyc2lz\ndGVuY2VDYXBhYmxlKG8sIG51bGwpOwogICAgICAgIGlmIChwYyA9PSBudWxs\nKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgU3RhdGVNYW5hZ2VyIHNt\nID0gcGMucGNHZXRTdGF0ZU1hbmFnZXIoKTsKICAgICAgICBpZiAoc20gIT0g\nbnVsbCkKICAgICAgICAgICAgc20uc2V0dGluZ0ludEZpZWxkKHBjLCBpZHgs\nIGN1ciwgbmV4dCwKICAgICAgICAgICAgICAgIE9wZW5KUEFTdGF0ZU1hbmFn\nZXIuU0VUX1VTRVIpOwogICAgfQoKICAgIC8qKgogICAgICogU2V0dGluZyBz\ndGF0ZSBjYWxsYmFjay4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyB2b2lk\nIHNldHRpbmdGaWVsZChPYmplY3QgbywgaW50IGlkeCwgbG9uZyBjdXIsIGxv\nbmcgbmV4dCkgewogICAgICAgIFBlcnNpc3RlbmNlQ2FwYWJsZSBwYyA9IElt\ncGxIZWxwZXIudG9QZXJzaXN0ZW5jZUNhcGFibGUobywgbnVsbCk7CiAgICAg\nICAgaWYgKHBjID09IG51bGwpCiAgICAgICAgICAgIHJldHVybjsKICAgICAg\nICBTdGF0ZU1hbmFnZXIgc20gPSBwYy5wY0dldFN0YXRlTWFuYWdlcigpOwog\nICAgICAgIGlmIChzbSAhPSBudWxsKQogICAgICAgICAgICBzbS5zZXR0aW5n\nTG9uZ0ZpZWxkKHBjLCBpZHgsIGN1ciwgbmV4dCwKICAgICAgICAgICAgICAg\nIE9wZW5KUEFTdGF0ZU1hbmFnZXIuU0VUX1VTRVIpOwogICAgfQoKICAgIC8q\nKgogICAgICogU2V0dGluZyBzdGF0ZSBjYWxsYmFjay4KICAgICAqLwogICAg\ncHVibGljIHN0YXRpYyB2b2lkIHNldHRpbmdGaWVsZChPYmplY3QgbywgaW50\nIGlkeCwgZmxvYXQgY3VyLCBmbG9hdCBuZXh0KSB7CiAgICAgICAgUGVyc2lz\ndGVuY2VDYXBhYmxlIHBjID0gSW1wbEhlbHBlci50b1BlcnNpc3RlbmNlQ2Fw\nYWJsZShvLCBudWxsKTsKICAgICAgICBpZiAocGMgPT0gbnVsbCkKICAgICAg\nICAgICAgcmV0dXJuOwogICAgICAgIFN0YXRlTWFuYWdlciBzbSA9IHBjLnBj\nR2V0U3RhdGVNYW5hZ2VyKCk7CiAgICAgICAgaWYgKHNtICE9IG51bGwpCiAg\nICAgICAgICAgIHNtLnNldHRpbmdGbG9hdEZpZWxkKHBjLCBpZHgsIGN1ciwg\nbmV4dCwKICAgICAgICAgICAgICAgIE9wZW5KUEFTdGF0ZU1hbmFnZXIuU0VU\nX1VTRVIpOwogICAgfQoKICAgIC8qKgogICAgICogU2V0dGluZyBzdGF0ZSBj\nYWxsYmFjay4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyB2b2lkIHNldHRp\nbmdGaWVsZChPYmplY3QgbywgaW50IGlkeCwgZG91YmxlIGN1ciwKICAgICAg\nICBkb3VibGUgbmV4dCkgewogICAgICAgIFBlcnNpc3RlbmNlQ2FwYWJsZSBw\nYyA9IEltcGxIZWxwZXIudG9QZXJzaXN0ZW5jZUNhcGFibGUobywgbnVsbCk7\nCiAgICAgICAgaWYgKHBjID09IG51bGwpCiAgICAgICAgICAgIHJldHVybjsK\nICAgICAgICBTdGF0ZU1hbmFnZXIgc20gPSBwYy5wY0dldFN0YXRlTWFuYWdl\ncigpOwogICAgICAgIGlmIChzbSAhPSBudWxsKQogICAgICAgICAgICBzbS5z\nZXR0aW5nRG91YmxlRmllbGQocGMsIGlkeCwgY3VyLCBuZXh0LAogICAgICAg\nICAgICAgICAgT3BlbkpQQVN0YXRlTWFuYWdlci5TRVRfVVNFUik7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBTZXR0aW5nIHN0YXRlIGNhbGxiYWNrLgogICAg\nICovCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgc2V0dGluZ0ZpZWxkKE9iamVj\ndCBvLCBpbnQgaWR4LCBTdHJpbmcgY3VyLAogICAgICAgIFN0cmluZyBuZXh0\nKSB7CiAgICAgICAgUGVyc2lzdGVuY2VDYXBhYmxlIHBjID0gSW1wbEhlbHBl\nci50b1BlcnNpc3RlbmNlQ2FwYWJsZShvLCBudWxsKTsKICAgICAgICBpZiAo\ncGMgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIFN0YXRl\nTWFuYWdlciBzbSA9IHBjLnBjR2V0U3RhdGVNYW5hZ2VyKCk7CiAgICAgICAg\naWYgKHNtICE9IG51bGwpCiAgICAgICAgICAgIHNtLnNldHRpbmdTdHJpbmdG\naWVsZChwYywgaWR4LCBjdXIsIG5leHQsCiAgICAgICAgICAgICAgICBPcGVu\nSlBBU3RhdGVNYW5hZ2VyLlNFVF9VU0VSKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIFNldHRpbmcgc3RhdGUgY2FsbGJhY2suCiAgICAgKi8KICAgIHB1Ymxp\nYyBzdGF0aWMgdm9pZCBzZXR0aW5nRmllbGQoT2JqZWN0IG8sIGludCBpZHgs\nIE9iamVjdCBjdXIsCiAgICAgICAgT2JqZWN0IG5leHQpIHsKICAgICAgICBQ\nZXJzaXN0ZW5jZUNhcGFibGUgcGMgPSBJbXBsSGVscGVyLnRvUGVyc2lzdGVu\nY2VDYXBhYmxlKG8sIG51bGwpOwogICAgICAgIGlmIChwYyA9PSBudWxsKQog\nICAgICAgICAgICByZXR1cm47CiAgICAgICAgU3RhdGVNYW5hZ2VyIHNtID0g\ncGMucGNHZXRTdGF0ZU1hbmFnZXIoKTsKICAgICAgICBpZiAoc20gIT0gbnVs\nbCkKICAgICAgICAgICAgc20uc2V0dGluZ09iamVjdEZpZWxkKHBjLCBpZHgs\nIGN1ciwgbmV4dCwKICAgICAgICAgICAgICAgIE9wZW5KUEFTdGF0ZU1hbmFn\nZXIuU0VUX1VTRVIpOwogICAgfQp9Cg==\n","encoding":"base64"}

