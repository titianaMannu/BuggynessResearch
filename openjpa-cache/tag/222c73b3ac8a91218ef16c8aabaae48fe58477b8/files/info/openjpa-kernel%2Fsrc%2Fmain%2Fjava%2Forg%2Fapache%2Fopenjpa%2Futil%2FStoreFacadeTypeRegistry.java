{"sha":"d3ba1e8b12a90b6fb0c5077d30569105b1850cfb","node_id":"MDQ6QmxvYjIwNjM2NDpkM2JhMWU4YjEyYTkwYjZmYjBjNTA3N2QzMDU2OTEwNWIxODUwY2Zi","size":4157,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/d3ba1e8b12a90b6fb0c5077d30569105b1850cfb","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbDsKCmltcG9ydCBqYXZh\nLnV0aWwuTWFwOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwu\nU3RvcmVNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51\ndGlsLmNvbmN1cnJlbnQuQ29uY3VycmVudEhhc2hNYXA7CgovKioKICogUmVw\nb3NpdG9yeSBvZiBzdG9yZS1zcGVjaWZpYyBmYWNhZGUgY2xhc3Nlcy4gVGhp\ncyBpcyB1c2VkIGJ5IGZhY2FkZSAKICogaW1wbGVtZW50YXRpb25zIHRvIHdy\nYXAgc3RvcmUtc3BlY2lmaWMgY29tcG9uZW50cyB3aXRob3V0IGtub3dpbmcg\nCiAqIGFib3V0IGFsbCBwb3NzaWJsZSBiYWNrLWVuZHMuCiAqLwpwdWJsaWMg\nY2xhc3MgU3RvcmVGYWNhZGVUeXBlUmVnaXN0cnkgewoKICAgIHByaXZhdGUg\nTWFwIF9pbXBscyA9IG5ldyBDb25jdXJyZW50SGFzaE1hcCgpOwoKICAgIC8q\nKgogICAgICogUmVnaXN0ZXIgYSBmYWNhZGUgaW1wbGVtZW50YXRpb24uCiAg\nICAgKgogICAgICogQHBhcmFtIGZhY2FkZVR5cGUgdGhlIGZhY2FkZSBpbnRl\ncmZhY2UKICAgICAqIEBwYXJhbSBzdG9yZVR5cGUgdGhlIHN0b3JlJ3MgCiAg\nICAgKiB7QGxpbmsgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5TdG9yZU1h\nbmFnZXJ9IHR5cGUsIG9yIG51bGwgZm9yIGdlbmVyaWMKICAgICAqIEBwYXJh\nbSBpbXBsVHlwZSB0aGUgY2xhc3MgaW1wbGVtZW50aW5nIHRoZSBmYWNhZGUK\nICAgICAqLwogICAgcHVibGljIHZvaWQgcmVnaXN0ZXJJbXBsZW1lbnRhdGlv\nbihDbGFzcyBmYWNhZGVUeXBlLCBDbGFzcyBzdG9yZVR5cGUsIAogICAgICAg\nIENsYXNzIGltcGxUeXBlKSB7CiAgICAgICAgT2JqZWN0IGtleSA9IChzdG9y\nZVR5cGUgPT0gbnVsbCkgPyAoT2JqZWN0KSBmYWNhZGVUeXBlIAogICAgICAg\nICAgICA6IG5ldyBLZXkoZmFjYWRlVHlwZSwgc3RvcmVUeXBlKTsKICAgICAg\nICBfaW1wbHMucHV0KGtleSwgaW1wbFR5cGUpOwogICAgfQogICAgCiAgICAv\nKioKICAgICAqIFJldHVybiB0aGUgaW1wbGVtZW50YXRpb24gZm9yIHRoZSBn\naXZlbiBmYWNhZGUgYW5kIHN0b3JlLgogICAgICoKICAgICAqIEBwYXJhbSBm\nYWNhZGVUeXBlIHRoZSBmYWNhZGUgaW50ZXJmYWNlCiAgICAgKiBAcGFyYW0g\nc3RvcmVUeXBlIHRoZSBzdG9yZSdzIAogICAgICoge0BsaW5rIG9yZy5hcGFj\naGUub3BlbmpwYS5rZXJuZWwuU3RvcmVNYW5hZ2VyfSB0eXBlLCBvciBudWxs\nIGZvciBnZW5lcmljCiAgICAgKiBAcGFyYW0gaW1wbFR5cGUgdGhlIHJlZ2lz\ndGVyZWQgaW1wbGVtZW50b3IKICAgICAqLwogICAgcHVibGljIENsYXNzIGdl\ndEltcGxlbWVudGF0aW9uKENsYXNzIGZhY2FkZVR5cGUsIENsYXNzIHN0b3Jl\nVHlwZSkgewogICAgICAgIC8vIHRyYXZlcnNlIHN0b3JlIHR5cGUgaGllcmFy\nY2h5IHRvIHN0b3JlIG1hbmFnZXIgdG8gZmluZCBtb3N0IHNwZWNpZmljCiAg\nICAgICAgLy8gc3RvcmUgYXZhaWFsYmxlCiAgICAgICAgQ2xhc3MgaW1wbDsK\nICAgICAgICBmb3IgKDsgc3RvcmVUeXBlICE9IG51bGwgJiYgc3RvcmVUeXBl\nICE9IFN0b3JlTWFuYWdlci5jbGFzczsgCiAgICAgICAgICAgIHN0b3JlVHlw\nZSA9IHN0b3JlVHlwZS5nZXRTdXBlcmNsYXNzKCkpIHsKICAgICAgICAgICAg\naW1wbCA9IChDbGFzcykgX2ltcGxzLmdldChuZXcgS2V5KGZhY2FkZVR5cGUs\nIHN0b3JlVHlwZSkpOwogICAgICAgICAgICBpZiAoaW1wbCAhPSBudWxsKQog\nICAgICAgICAgICAgICAgcmV0dXJuIGltcGw7IAogICAgICAgIH0gICAgCiAg\nICAgICAgcmV0dXJuIChDbGFzcykgX2ltcGxzLmdldChmYWNhZGVUeXBlKTsK\nICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGltcGxlbWVu\ndGF0aW9uIGZvciB0aGUgZ2l2ZW4gZmFjYWRlIGFuZCBzdG9yZS4gSWYgbm8g\nCiAgICAgKiByZWdpc3RlcmVkIGltcGxlbWVudGF0aW9uIGlzIGZvdW5kIHRo\nZW4gcmV0dXJucyB0aGUgZ2l2ZW4gZGVmYXVsdCB0eXBlCiAgICAgKiBwcm92\naWRlZCBpdCB0aGUgZmFjYWRlIHR5cGUgaXMgYXNzaWduYWJsZSBmcm9tIHRo\nZSBkZWFmdWx0IHR5cGUuCiAgICAgKgogICAgICogQHBhcmFtIGZhY2FkZVR5\ncGUgdGhlIGZhY2FkZSBpbnRlcmZhY2UKICAgICAqIEBwYXJhbSBzdG9yZVR5\ncGUgdGhlIHN0b3JlJ3MgCiAgICAgKiB7QGxpbmsgb3JnLmFwYWNoZS5vcGVu\nanBhLmtlcm5lbC5TdG9yZU1hbmFnZXJ9IHR5cGUsIG9yIG51bGwgZm9yIGdl\nbmVyaWMKICAgICAqIEBwYXJhbSBpbXBsVHlwZSB0aGUgcmVnaXN0ZXJlZCBp\nbXBsZW1lbnRvcgogICAgICogQHBhcmFtIGRlZmF1bHRUeXBlIGNsYXNzIGlm\nIG5vIHJlZ2lzdGVyZWQgaW1wbGVtZW50YXRpb24gaXMgYXZhaWxhYmxlLgog\nICAgICovCiAgICBwdWJsaWMgQ2xhc3MgZ2V0SW1wbGVtZW50YXRpb24oQ2xh\nc3MgZmFjYWRlVHlwZSwgQ2xhc3Mgc3RvcmVUeXBlLCAKICAgIAlDbGFzcyBk\nZWZhdWx0VHlwZSkgewogICAgCUNsYXNzIHJlc3VsdCA9IGdldEltcGxlbWVu\ndGF0aW9uKGZhY2FkZVR5cGUsIHN0b3JlVHlwZSk7CiAgICAJaWYgKHJlc3Vs\ndCA9PSBudWxsKQogICAgCQlyZXN1bHQgPSBkZWZhdWx0VHlwZTsKICAgIAlp\nZiAoZmFjYWRlVHlwZSA9PSBudWxsIHx8ICFmYWNhZGVUeXBlLmlzQXNzaWdu\nYWJsZUZyb20ocmVzdWx0KSkKICAgIAkJdGhyb3cgbmV3IEludGVybmFsRXhj\nZXB0aW9uKCk7CiAgICAJcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICAvKioK\nICAgICAqIExvb2t1cCBrZXkgZm9yIGZhY2FkZStzdG9yZSBoYXNoLgogICAg\nICovCiAgICBwcml2YXRlIHN0YXRpYyBjbGFzcyBLZXkgewogICAgICAgIHB1\nYmxpYyBmaW5hbCBDbGFzcyBfZmFjYWRlVHlwZTsKICAgICAgICBwdWJsaWMg\nZmluYWwgQ2xhc3MgX3N0b3JlVHlwZTsKCiAgICAgICAgcHVibGljIEtleShD\nbGFzcyBmYWNhZGVUeXBlLCBDbGFzcyBzdG9yZVR5cGUpIHsKICAgICAgICAg\nICAgX2ZhY2FkZVR5cGUgPSBmYWNhZGVUeXBlOwogICAgICAgICAgICBfc3Rv\ncmVUeXBlID0gc3RvcmVUeXBlOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIGludCBoYXNoQ29kZSgpIHsKICAgICAgICAgICAgcmV0dXJuIF9mYWNhZGVU\neXBlLmhhc2hDb2RlKCkgXiBfc3RvcmVUeXBlLmhhc2hDb2RlKCk7CiAgICAg\nICAgfQoKICAgICAgICBwdWJsaWMgYm9vbGVhbiBlcXVhbHMoT2JqZWN0IG90\naGVyKSB7CiAgICAgICAgICAgIGlmIChvdGhlciA9PSB0aGlzKQogICAgICAg\nICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIEtleSBrID0gKEtl\neSkgb3RoZXI7CiAgICAgICAgICAgIHJldHVybiBfZmFjYWRlVHlwZSA9PSBr\nLl9mYWNhZGVUeXBlICYmIF9zdG9yZVR5cGUgPT0gay5fc3RvcmVUeXBlOwog\nICAgICAgIH0KICAgIH0KfQo=\n","encoding":"base64"}

