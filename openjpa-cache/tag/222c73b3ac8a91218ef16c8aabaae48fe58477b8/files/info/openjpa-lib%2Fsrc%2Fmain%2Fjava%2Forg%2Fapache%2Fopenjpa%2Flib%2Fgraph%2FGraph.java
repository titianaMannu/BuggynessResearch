{"sha":"77f9d74ead100310ffe8136d3f3039c8b5b5d95f","node_id":"MDQ6QmxvYjIwNjM2NDo3N2Y5ZDc0ZWFkMTAwMzEwZmZlODEzNmQzZjMwMzljOGI1YjVkOTVm","size":6018,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/77f9d74ead100310ffe8136d3f3039c8b5b5d95f","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5saWIuZ3JhcGg7CgppbXBvcnQgamF2\nYS51dGlsLkFycmF5TGlzdDsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9u\nOwppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb25zOwppbXBvcnQgamF2YS51\ndGlsLkhhc2hTZXQ7CmltcG9ydCBqYXZhLnV0aWwuSXRlcmF0b3I7CmltcG9y\ndCBqYXZhLnV0aWwuTGlua2VkSGFzaE1hcDsKaW1wb3J0IGphdmEudXRpbC5N\nYXA7CgovKioKICogPHA+R3JhcGggcmVwcmVzZW50YXRpb24gdXNpbmcgdGhl\nIGFkamFjZW5jeSBsaXN0IGZvcm0uICBTZWUgdGhlIGJvb2sKICogJ0ludHJv\nZHVjdGlvbiB0byBBbGdvcml0aG1zJyBieSBDb3JtZW4sIExlaXNlcnNvbiwg\nYW5kIFJpdmVzdC48L3A+CiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqIEBz\naW5jZSAxLjAuMAogKiBAbm9qYXZhZG9jCiAqLwpwdWJsaWMgY2xhc3MgR3Jh\ncGggewoKICAgIC8qKgogICAgICogTWFwIGVhY2ggbm9kZSB0byBsaXN0IG9m\nIGVkZ2VzIGZyb20gdGhhdCBub2RlLgogICAgICogVXNpbmcgYSBMaW5rZWRI\nYXNoTWFwIHRvIGVuc3VyZSBvcmRlciBvZiBpdGVyYXRvciBwcm9jZXNzaW5n\nLgogICAgICovIAogICAgcHJpdmF0ZSBmaW5hbCBNYXAgX25vZGVzID0gbmV3\nIExpbmtlZEhhc2hNYXAoKTsKCiAgICAvKioKICAgICAqIENsZWFyIHRoZSBn\ncmFwaC4KICAgICAqLwogICAgcHVibGljIHZvaWQgY2xlYXIoKSB7CiAgICAg\nICAgX25vZGVzLmNsZWFyKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1\ncm4gdHJ1ZSBpZiB0aGUgZ3JhcGggY29udGFpbnMgdGhlIGdpdmVuIG5vZGUu\nCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGNvbnRhaW5zTm9kZShPYmpl\nY3Qgbm9kZSkgewogICAgICAgIHJldHVybiBfbm9kZXMuY29udGFpbnNLZXko\nbm9kZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gYSB2aWV3IG9m\nIGFsbCBub2RlcyBpbiB0aGUgZ3JhcGguCiAgICAgKi8KICAgIHB1YmxpYyBD\nb2xsZWN0aW9uIGdldE5vZGVzKCkgewogICAgICAgIHJldHVybiBfbm9kZXMu\na2V5U2V0KCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBBZGQgYSBub2RlIHRv\nIHRoZSBncmFwaC4gIEFkZGluZyBhIG5vZGUgYSBzZWNvbmQgdGltZSBoYXMg\nbm8gZWZmZWN0LgogICAgICovCiAgICBwdWJsaWMgdm9pZCBhZGROb2RlKE9i\namVjdCBub2RlKSB7CiAgICAgICAgaWYgKG5vZGUgPT0gbnVsbCkKICAgICAg\nICAgICAgdGhyb3cgbmV3IE51bGxQb2ludGVyRXhjZXB0aW9uKCJub2RlID0g\nbnVsbCIpOwogICAgICAgIGlmICghY29udGFpbnNOb2RlKG5vZGUpKQogICAg\nICAgICAgICBfbm9kZXMucHV0KG5vZGUsIG51bGwpOwogICAgfQoKICAgIC8q\nKgogICAgICogUmVtb3ZlIGEgbm9kZSBmcm9tIHRoZSBncmFwaC4gIEFsbCBl\nZGdlcyB0byBhbmQgZnJvbSB0aGUgbm9kZQogICAgICogd2lsbCBiZSBjbGVh\ncmVkLgogICAgICoKICAgICAqIEByZXR1cm4gdHJ1ZSBpZiB0aGUgbm9kZSB3\nYXMgcmVtb3ZlZCwgZmFsc2Ugb3RoZXJ3aXNlCiAgICAgKi8KICAgIHB1Ymxp\nYyBib29sZWFuIHJlbW92ZU5vZGUoT2JqZWN0IG5vZGUpIHsKICAgICAgICBi\nb29sZWFuIHJlbSA9IGNvbnRhaW5zTm9kZShub2RlKTsKICAgICAgICBpZiAo\ncmVtKSB7CiAgICAgICAgICAgIENvbGxlY3Rpb24gZWRnZXMgPSBnZXRFZGdl\nc1RvKG5vZGUpOwogICAgICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9IGVk\nZ2VzLml0ZXJhdG9yKCk7IGl0ci5oYXNOZXh0KCk7KQogICAgICAgICAgICAg\nICAgcmVtb3ZlRWRnZSgoRWRnZSkgaXRyLm5leHQoKSk7CiAgICAgICAgICAg\nIF9ub2Rlcy5yZW1vdmUobm9kZSk7CiAgICAgICAgfQogICAgICAgIHJldHVy\nbiByZW07CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gYWxsIGVkZ2Vz\nIGluIHRoZSBncmFwaC4KICAgICAqLwogICAgcHVibGljIENvbGxlY3Rpb24g\nZ2V0RWRnZXMoKSB7CiAgICAgICAgQ29sbGVjdGlvbiBhbGwgPSBuZXcgSGFz\naFNldCgpOwogICAgICAgIENvbGxlY3Rpb24gZWRnZXM7CiAgICAgICAgZm9y\nIChJdGVyYXRvciBpdHIgPSBfbm9kZXMudmFsdWVzKCkuaXRlcmF0b3IoKTsg\naXRyLmhhc05leHQoKTspIHsKICAgICAgICAgICAgZWRnZXMgPSAoQ29sbGVj\ndGlvbikgaXRyLm5leHQoKTsKICAgICAgICAgICAgaWYgKGVkZ2VzICE9IG51\nbGwpCiAgICAgICAgICAgICAgICBhbGwuYWRkQWxsKGVkZ2VzKTsKICAgICAg\nICB9CiAgICAgICAgcmV0dXJuIGFsbDsKICAgIH0KCiAgICAvKioKICAgICAq\nIFJldHVybiBhbGwgdGhlIGVkZ2VzIGZyb20gYSBwYXJ0aWN1bGFyIG5vZGUu\nCiAgICAgKi8KICAgIHB1YmxpYyBDb2xsZWN0aW9uIGdldEVkZ2VzRnJvbShP\nYmplY3Qgbm9kZSkgewogICAgICAgIENvbGxlY3Rpb24gZWRnZXMgPSAoQ29s\nbGVjdGlvbikgX25vZGVzLmdldChub2RlKTsKICAgICAgICByZXR1cm4gKGVk\nZ2VzID09IG51bGwpID8gQ29sbGVjdGlvbnMuRU1QVFlfTElTVCA6IGVkZ2Vz\nOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIGFsbCB0aGUgZWRnZXMg\ndG8gYSBwYXJ0aWN1bGFyIG5vZGUuCiAgICAgKi8KICAgIHB1YmxpYyBDb2xs\nZWN0aW9uIGdldEVkZ2VzVG8oT2JqZWN0IG5vZGUpIHsKICAgICAgICBDb2xs\nZWN0aW9uIGVkZ2VzID0gZ2V0RWRnZXMoKTsKICAgICAgICBDb2xsZWN0aW9u\nIHRvID0gbmV3IEFycmF5TGlzdCgpOwogICAgICAgIEVkZ2UgZWRnZTsKICAg\nICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9IGVkZ2VzLml0ZXJhdG9yKCk7IGl0\nci5oYXNOZXh0KCk7KSB7CiAgICAgICAgICAgIGVkZ2UgPSAoRWRnZSkgaXRy\nLm5leHQoKTsKICAgICAgICAgICAgaWYgKGVkZ2UuaXNUbyhub2RlKSkKICAg\nICAgICAgICAgICAgIHRvLmFkZChlZGdlKTsKICAgICAgICB9CiAgICAgICAg\ncmV0dXJuIHRvOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIGFsbCB0\naGUgZWRnZXMgZnJvbSBvbmUgbm9kZSB0byBhbm90aGVyLgogICAgICovCiAg\nICBwdWJsaWMgQ29sbGVjdGlvbiBnZXRFZGdlcyhPYmplY3QgZnJvbSwgT2Jq\nZWN0IHRvKSB7CiAgICAgICAgQ29sbGVjdGlvbiBlZGdlcyA9IGdldEVkZ2Vz\nRnJvbShmcm9tKTsKICAgICAgICBDb2xsZWN0aW9uIG1hdGNoZXMgPSBuZXcg\nQXJyYXlMaXN0KGVkZ2VzLnNpemUoKSk7CiAgICAgICAgRWRnZSBlZGdlOwog\nICAgICAgIGZvciAoSXRlcmF0b3IgaXRyID0gZWRnZXMuaXRlcmF0b3IoKTsg\naXRyLmhhc05leHQoKTspIHsKICAgICAgICAgICAgZWRnZSA9IChFZGdlKSBp\ndHIubmV4dCgpOwogICAgICAgICAgICBpZiAoZWRnZS5pc1RvKHRvKSkKICAg\nICAgICAgICAgICAgIG1hdGNoZXMuYWRkKGVkZ2UpOwogICAgICAgIH0KICAg\nICAgICByZXR1cm4gbWF0Y2hlczsKICAgIH0KCiAgICAvKioKICAgICAqIEFk\nZCBhbiBlZGdlIHRvIHRoZSBncmFwaC4KICAgICAqLwogICAgcHVibGljIHZv\naWQgYWRkRWRnZShFZGdlIGVkZ2UpIHsKICAgICAgICBpZiAoIWNvbnRhaW5z\nTm9kZShlZGdlLmdldFRvKCkpKQogICAgICAgICAgICB0aHJvdyBuZXcgSWxs\nZWdhbEFyZ3VtZW50RXhjZXB0aW9uKGVkZ2UuZ2V0VG8oKS50b1N0cmluZygp\nKTsKICAgICAgICBpZiAoIWNvbnRhaW5zTm9kZShlZGdlLmdldEZyb20oKSkp\nCiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRp\nb24oZWRnZS5nZXRGcm9tKCkudG9TdHJpbmcoKSk7CgogICAgICAgIENvbGxl\nY3Rpb24gZnJvbSA9IChDb2xsZWN0aW9uKSBfbm9kZXMuZ2V0KGVkZ2UuZ2V0\nRnJvbSgpKTsKICAgICAgICBpZiAoZnJvbSA9PSBudWxsKSB7CiAgICAgICAg\nICAgIGZyb20gPSBuZXcgQXJyYXlMaXN0KDMpOwogICAgICAgICAgICBfbm9k\nZXMucHV0KGVkZ2UuZ2V0RnJvbSgpLCBmcm9tKTsKICAgICAgICB9CiAgICAg\nICAgZnJvbS5hZGQoZWRnZSk7CgogICAgICAgIGlmICghZWRnZS5pc0RpcmVj\ndGVkKCkgJiYgIWVkZ2UuZ2V0RnJvbSgpLmVxdWFscyhlZGdlLmdldFRvKCkp\nKSB7CiAgICAgICAgICAgIENvbGxlY3Rpb24gdG8gPSAoQ29sbGVjdGlvbikg\nX25vZGVzLmdldChlZGdlLmdldFRvKCkpOwogICAgICAgICAgICBpZiAodG8g\nPT0gbnVsbCkgewogICAgICAgICAgICAgICAgdG8gPSBuZXcgQXJyYXlMaXN0\nKDMpOwogICAgICAgICAgICAgICAgX25vZGVzLnB1dChlZGdlLmdldFRvKCks\nIHRvKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0by5hZGQoZWRnZSk7\nCiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogUmVtb3ZlIGFuIGVk\nZ2UgZnJvbSB0aGUgZ3JhcGguCiAgICAgKgogICAgICogQHJldHVybiB0cnVl\nIGlmIHRoZSBlZGdlIHdhcyByZW1vdmVkLCBmYWxzZSBpZiBub3QgaW4gdGhl\nIGdyYXBoCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIHJlbW92ZUVkZ2Uo\nRWRnZSBlZGdlKSB7CiAgICAgICAgQ29sbGVjdGlvbiBlZGdlcyA9IChDb2xs\nZWN0aW9uKSBfbm9kZXMuZ2V0KGVkZ2UuZ2V0RnJvbSgpKTsKICAgICAgICBp\nZiAoZWRnZXMgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwog\nICAgICAgIGJvb2xlYW4gcmVtID0gZWRnZXMucmVtb3ZlKGVkZ2UpOwogICAg\nICAgIGlmIChyZW0gJiYgIWVkZ2UuaXNEaXJlY3RlZCgpKSB7CiAgICAgICAg\nICAgIGVkZ2VzID0gKENvbGxlY3Rpb24pIF9ub2Rlcy5nZXQoZWRnZS5nZXRU\nbygpKTsKICAgICAgICAgICAgaWYgKGVkZ2VzICE9IG51bGwpCiAgICAgICAg\nICAgICAgICBlZGdlcy5yZW1vdmUoZWRnZSk7CiAgICAgICAgfQogICAgICAg\nIHJldHVybiByZW07CiAgICB9CgogICAgLyoqCiAgICAgKglDbGVhciBhbGwg\nbm9kZXMgYW5kIGVkZ2VzIG9mIHRoZSBib29ra2VlcGluZyBpbmZvcm1hdGlv\nbiBmcm9tIHRoZWlyCiAgICAgKglsYXN0IHRyYXZlcnNhbC4KICAgICAqLwog\nICAgcHVibGljIHZvaWQgY2xlYXJUcmF2ZXJzYWwoKSB7CiAgICAgICAgQ29s\nbGVjdGlvbiBlZGdlczsKICAgICAgICBmb3IgKEl0ZXJhdG9yIHZhbHMgPSBf\nbm9kZXMudmFsdWVzKCkuaXRlcmF0b3IoKTsgdmFscy5oYXNOZXh0KCk7KSB7\nCiAgICAgICAgICAgIGVkZ2VzID0gKENvbGxlY3Rpb24pIHZhbHMubmV4dCgp\nOwogICAgICAgICAgICBpZiAoZWRnZXMgIT0gbnVsbCkKICAgICAgICAgICAg\nICAgIGZvciAoSXRlcmF0b3IgZWQgPSBlZGdlcy5pdGVyYXRvcigpOyBlZC5o\nYXNOZXh0KCk7KQogICAgICAgICAgICAgICAgICAgICgoRWRnZSkgZWQubmV4\ndCgpKS5jbGVhclRyYXZlcnNhbCAoKTsKCQl9Cgl9Cn0K\n","encoding":"base64"}

