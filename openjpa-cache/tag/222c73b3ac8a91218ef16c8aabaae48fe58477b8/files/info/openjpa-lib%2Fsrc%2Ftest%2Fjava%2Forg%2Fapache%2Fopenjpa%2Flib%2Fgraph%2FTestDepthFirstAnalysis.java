{"sha":"1df285153bb30953b5a7799b6be28fdd79b236bb","node_id":"MDQ6QmxvYjIwNjM2NDoxZGYyODUxNTNiYjMwOTUzYjVhNzc5OWI2YmUyOGZkZDc5YjIzNmJi","size":5606,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/1df285153bb30953b5a7799b6be28fdd79b236bb","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5saWIuZ3JhcGg7CgppbXBvcnQgamF2\nYS51dGlsLkNvbGxlY3Rpb247CmltcG9ydCBqYXZhLnV0aWwuSXRlcmF0b3I7\nCmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKCmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEubGliLnRlc3QuQWJzdHJhY3RUZXN0Q2FzZTsKCi8qKgogKiA8cD5U\nZXN0cyB0aGUge0BsaW5rIERlcHRoRmlyc3RBbmFseXNpc30gdHlwZS48L3A+\nCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqLwpwdWJsaWMgY2xhc3MgVGVz\ndERlcHRoRmlyc3RBbmFseXNpcwogICAgZXh0ZW5kcyBBYnN0cmFjdFRlc3RD\nYXNlIHsKCiAgICBwcml2YXRlIERlcHRoRmlyc3RBbmFseXNpcyBfZGZhID0g\nbnVsbDsKCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpIHsKICAgICAgICBzZXRV\ncEdyYXBoMSgpOyAgIAogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCBzZXRV\ncEdyYXBoMSgpIHsKICAgICAgICBHcmFwaCBncmFwaCA9IG5ldyBHcmFwaCgp\nOwogICAgICAgIE9iamVjdCBub2RlMSA9IG5ldyBPYmplY3QoKTsKICAgICAg\nICBPYmplY3Qgbm9kZTIgPSBuZXcgT2JqZWN0KCk7CiAgICAgICAgT2JqZWN0\nIG5vZGUzID0gbmV3IE9iamVjdCgpOwogICAgICAgIE9iamVjdCBub2RlNCA9\nIG5ldyBPYmplY3QoKTsKICAgICAgICBncmFwaC5hZGROb2RlKG5vZGUxKTsK\nICAgICAgICBncmFwaC5hZGROb2RlKG5vZGUyKTsKICAgICAgICBncmFwaC5h\nZGROb2RlKG5vZGUzKTsKICAgICAgICBncmFwaC5hZGROb2RlKG5vZGU0KTsK\nICAgICAgICBncmFwaC5hZGRFZGdlKG5ldyBFZGdlKG5vZGUxLCBub2RlMiwg\ndHJ1ZSkpOwogICAgICAgIGdyYXBoLmFkZEVkZ2UobmV3IEVkZ2Uobm9kZTIs\nIG5vZGUzLCB0cnVlKSk7CiAgICAgICAgZ3JhcGguYWRkRWRnZShuZXcgRWRn\nZShub2RlMywgbm9kZTEsIHRydWUpKTsKICAgICAgICBncmFwaC5hZGRFZGdl\nKG5ldyBFZGdlKG5vZGUzLCBub2RlNCwgdHJ1ZSkpOwogICAgICAgIGdyYXBo\nLmFkZEVkZ2UobmV3IEVkZ2Uobm9kZTIsIG5vZGUyLCB0cnVlKSk7CiAgICAg\nICAgX2RmYSA9IG5ldyBEZXB0aEZpcnN0QW5hbHlzaXMoZ3JhcGgpOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHNldFVwR3JhcGgyKCkgewogICAgICAgIEdy\nYXBoIGdyYXBoID0gbmV3IEdyYXBoKCk7CiAgICAgICAgSW50ZWdlciBub2Rl\nMSA9IG5ldyBJbnRlZ2VyKDEpOwogICAgICAgIEludGVnZXIgbm9kZTIgPSBu\nZXcgSW50ZWdlcigyKTsKICAgICAgICBJbnRlZ2VyIG5vZGUzID0gbmV3IElu\ndGVnZXIoMyk7CiAgICAgICAgSW50ZWdlciBub2RlNCA9IG5ldyBJbnRlZ2Vy\nKDQpOwogICAgICAgIEludGVnZXIgbm9kZTUgPSBuZXcgSW50ZWdlcig1KTsK\nICAgICAgICBncmFwaC5hZGROb2RlKG5vZGUyKTsgIC8vIGhhcyB0byBiZSBm\naXJzdCBub2RlIGZvciB0ZXN0Y2FzZQogICAgICAgIGdyYXBoLmFkZE5vZGUo\nbm9kZTUpOwogICAgICAgIGdyYXBoLmFkZE5vZGUobm9kZTQpOwogICAgICAg\nIGdyYXBoLmFkZE5vZGUobm9kZTMpOwogICAgICAgIGdyYXBoLmFkZE5vZGUo\nbm9kZTEpOwogICAgICAgIGdyYXBoLmFkZEVkZ2UobmV3IEVkZ2Uobm9kZTUs\nIG5vZGU0LCB0cnVlKSk7CiAgICAgICAgZ3JhcGguYWRkRWRnZShuZXcgRWRn\nZShub2RlNCwgbm9kZTMsIHRydWUpKTsKICAgICAgICBncmFwaC5hZGRFZGdl\nKG5ldyBFZGdlKG5vZGUzLCBub2RlMywgdHJ1ZSkpOwogICAgICAgIGdyYXBo\nLmFkZEVkZ2UobmV3IEVkZ2Uobm9kZTMsIG5vZGUyLCB0cnVlKSk7CiAgICAg\nICAgZ3JhcGguYWRkRWRnZShuZXcgRWRnZShub2RlMiwgbm9kZTUsIHRydWUp\nKTsKICAgICAgICBncmFwaC5hZGRFZGdlKG5ldyBFZGdlKG5vZGUyLCBub2Rl\nNCwgdHJ1ZSkpOwogICAgICAgIGdyYXBoLmFkZEVkZ2UobmV3IEVkZ2Uobm9k\nZTEsIG5vZGU0LCB0cnVlKSk7CiAgICAgICAgX2RmYSA9IG5ldyBEZXB0aEZp\ncnN0QW5hbHlzaXMoZ3JhcGgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRl\nc3ROb2RlU29ydGluZygpIHsKICAgICAgICBDb2xsZWN0aW9uIG5vZGVzID0g\nX2RmYS5nZXRTb3J0ZWROb2RlcygpOwogICAgICAgIGFzc2VydEVxdWFscyg0\nLCBub2Rlcy5zaXplKCkpOwoKICAgICAgICBpbnQgdGltZSA9IDA7CiAgICAg\nICAgT2JqZWN0IG5vZGU7CiAgICAgICAgZm9yIChJdGVyYXRvciBpdHIgPSBu\nb2Rlcy5pdGVyYXRvcigpOyBpdHIuaGFzTmV4dCgpOykgewogICAgICAgICAg\nICBub2RlID0gaXRyLm5leHQoKTsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZSh0\naW1lIDw9IF9kZmEuZ2V0RmluaXNoZWRUaW1lKG5vZGUpKTsKICAgICAgICAg\nICAgdGltZSA9IF9kZmEuZ2V0RmluaXNoZWRUaW1lKG5vZGUpOwogICAgICAg\nIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0RWRnZVR5cGluZygpIHsK\nICAgICAgICBDb2xsZWN0aW9uIGVkZ2VzID0gX2RmYS5nZXRFZGdlcyhFZGdl\nLlRZUEVfQkFDSyk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDIsIGVkZ2VzLnNp\nemUoKSk7CiAgICAgICAgSXRlcmF0b3IgaXRyID0gZWRnZXMuaXRlcmF0b3Io\nKTsKICAgICAgICBFZGdlIGVkZ2UwID0gKEVkZ2UpIGl0ci5uZXh0KCk7CiAg\nICAgICAgRWRnZSBlZGdlMSA9IChFZGdlKSBpdHIubmV4dCgpOwogICAgICAg\nIGFzc2VydFRydWUoKGVkZ2UwLmdldFRvKCkuZXF1YWxzKGVkZ2UwLmdldEZy\nb20oKSkpCiAgICAgICAgICAgICAgICB8fCBlZGdlMS5nZXRUbygpLmVxdWFs\ncyhlZGdlMS5nZXRGcm9tKCkpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0\nZXN0QmFja0VkZ2VzKCkgewogICAgICAgIHNldFVwR3JhcGgyKCk7CiAgICAg\nICAgQ29sbGVjdGlvbiBlZGdlcyA9IF9kZmEuZ2V0RWRnZXMoRWRnZS5UWVBF\nX0JBQ0spOwogICAgICAgIGFzc2VydEVxdWFscygyLCBlZGdlcy5zaXplKCkp\nOwogICAgICAgIEl0ZXJhdG9yIGl0ciA9IGVkZ2VzLml0ZXJhdG9yKCk7CiAg\nICAgICAgRWRnZSBlZGdlMCA9IChFZGdlKSBpdHIubmV4dCgpOwogICAgICAg\nIEVkZ2UgZWRnZTEgPSAoRWRnZSkgaXRyLm5leHQoKTsKICAgICAgICBpZiAo\nZWRnZTAuZ2V0VG8oKS5lcXVhbHMoZWRnZTAuZ2V0RnJvbSgpKSkgewogICAg\nICAgICAgICBhc3NlcnRUcnVlKGVkZ2UwLmdldEN5Y2xlKCkgIT0gbnVsbCAm\nJiBlZGdlMC5nZXRDeWNsZSgpLnNpemUoKSA9PSAxKTsKICAgICAgICAgICAg\nTGlzdCBjeWNsZSA9IGVkZ2UxLmdldEN5Y2xlKCk7CiAgICAgICAgICAgIGFz\nc2VydFRydWUoY3ljbGUgIT0gbnVsbCAmJiBjeWNsZS5zaXplKCkgPT0gNCk7\nCiAgICAgICAgICAgIGFzc2VydFRydWUoKChFZGdlKWN5Y2xlLmdldCgwKSku\nZ2V0RnJvbSgpLmVxdWFscygoKEVkZ2UpY3ljbGUuZ2V0KDMpKS5nZXRUbygp\nKSk7CiAgICAgICAgfSBlbHNlIGlmIChlZGdlMS5nZXRUbygpLmVxdWFscyhl\nZGdlMS5nZXRGcm9tKCkpKSB7CiAgICAgICAgICAgIGFzc2VydFRydWUoZWRn\nZTEuZ2V0Q3ljbGUoKSAhPSBudWxsICYmIGVkZ2UxLmdldEN5Y2xlKCkuc2l6\nZSgpID09IDEpOyAgICAgICAgICAgIAogICAgICAgICAgICBhc3NlcnRUcnVl\nKGVkZ2UxID09IGVkZ2UxLmdldEN5Y2xlKCkpOwogICAgICAgICAgICBMaXN0\nIGN5Y2xlID0gZWRnZTAuZ2V0Q3ljbGUoKTsKICAgICAgICAgICAgYXNzZXJ0\nVHJ1ZShjeWNsZSAhPSBudWxsICYmIGN5Y2xlLnNpemUoKSA9PSA0KTsKICAg\nICAgICAgICAgYXNzZXJ0VHJ1ZSgoKEVkZ2UpY3ljbGUuZ2V0KDApKS5nZXRG\ncm9tKCkuZXF1YWxzKCgoRWRnZSljeWNsZS5nZXQoMykpLmdldFRvKCkpKTsK\nICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBzaG91bGQgbm90IGhh\ncHBlbgogICAgICAgICAgICBhc3NlcnRGYWxzZSh0cnVlKTsKICAgICAgICB9\nCiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RGb3J3YXJkRWRnZXMo\nKSB7CiAgICAgICAgc2V0VXBHcmFwaDIoKTsKICAgICAgICBDb2xsZWN0aW9u\nIGVkZ2VzID0gX2RmYS5nZXRFZGdlcyhFZGdlLlRZUEVfRk9SV0FSRCk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKDIsIGVkZ2VzLnNpemUoKSk7CiAgICAgICAg\nSXRlcmF0b3IgaXRyID0gZWRnZXMuaXRlcmF0b3IoKTsKICAgICAgICBFZGdl\nIGVkZ2UwID0gKEVkZ2UpIGl0ci5uZXh0KCk7CiAgICAgICAgRWRnZSBlZGdl\nMSA9IChFZGdlKSBpdHIubmV4dCgpOwogICAgICAgIGlmIChlZGdlMC5nZXRD\neWNsZSgpID09IG51bGwpIHsKICAgICAgICAgICAgTGlzdCBjeWNsZSA9IGVk\nZ2UxLmdldEN5Y2xlKCk7CiAgICAgICAgICAgIGFzc2VydFRydWUoY3ljbGUg\nIT0gbnVsbCAmJiBjeWNsZS5zaXplKCkgPT0gMyk7CiAgICAgICAgICAgIGFz\nc2VydFRydWUoKChFZGdlKWN5Y2xlLmdldCgwKSkuZ2V0RnJvbSgpLmVxdWFs\ncygoKEVkZ2UpY3ljbGUuZ2V0KDIpKS5nZXRUbygpKSk7CiAgICAgICAgfSBl\nbHNlIGlmIChlZGdlMS5nZXRDeWNsZSgpID09IG51bGwpIHsKICAgICAgICAg\nICAgTGlzdCBjeWNsZSA9IGVkZ2UwLmdldEN5Y2xlKCk7CiAgICAgICAgICAg\nIGFzc2VydFRydWUoY3ljbGUgIT0gbnVsbCAmJiBjeWNsZS5zaXplKCkgPT0g\nMyk7CiAgICAgICAgICAgIGFzc2VydFRydWUoKChFZGdlKWN5Y2xlLmdldCgw\nKSkuZ2V0RnJvbSgpLmVxdWFscygoKEVkZ2UpY3ljbGUuZ2V0KDIpKS5nZXRU\nbygpKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gc2hvdWxk\nIG5vdCBoYXBwZW4KICAgICAgICAgICAgYXNzZXJ0RmFsc2UodHJ1ZSk7CiAg\nICAgICAgfQogICAgfQogICAgCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFp\nbihTdHJpbmdbXSBhcmdzKSB7CiAgICAgICAgbWFpbihUZXN0RGVwdGhGaXJz\ndEFuYWx5c2lzLmNsYXNzKTsKICAgIH0KfQo=\n","encoding":"base64"}

