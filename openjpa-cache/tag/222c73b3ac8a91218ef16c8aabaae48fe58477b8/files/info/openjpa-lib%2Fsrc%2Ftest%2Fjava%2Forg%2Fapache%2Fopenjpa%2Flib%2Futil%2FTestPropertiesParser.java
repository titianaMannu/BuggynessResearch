{"sha":"6110d8e41c3e69050541117f7e8875b1b8f9e1f1","node_id":"MDQ6QmxvYjIwNjM2NDo2MTEwZDhlNDFjM2U2OTA1MDU0MTExN2Y3ZTg4NzViMWI4ZjllMWYx","size":15149,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/6110d8e41c3e69050541117f7e8875b1b8f9e1f1","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWw7CgppbXBvcnQg\namF2YS5pby5CdWZmZXJlZElucHV0U3RyZWFtOwppbXBvcnQgamF2YS5pby5C\ndWZmZXJlZFJlYWRlcjsKaW1wb3J0IGphdmEuaW8uQnl0ZUFycmF5SW5wdXRT\ndHJlYW07CmltcG9ydCBqYXZhLmlvLkJ5dGVBcnJheU91dHB1dFN0cmVhbTsK\naW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247CmltcG9ydCBqYXZhLmlvLklu\ncHV0U3RyZWFtOwppbXBvcnQgamF2YS5pby5JbnB1dFN0cmVhbVJlYWRlcjsK\naW1wb3J0IGphdmEuaW8uT2JqZWN0SW5wdXRTdHJlYW07CmltcG9ydCBqYXZh\nLmlvLk9iamVjdE91dHB1dFN0cmVhbTsKaW1wb3J0IGphdmEuaW8uU3RyaW5n\nQnVmZmVySW5wdXRTdHJlYW07CmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0\nOwppbXBvcnQgamF2YS51dGlsLkFycmF5czsKaW1wb3J0IGphdmEudXRpbC5M\naXN0OwppbXBvcnQgamF2YS51dGlsLlByb3BlcnRpZXM7CgppbXBvcnQganVu\naXQuZnJhbWV3b3JrLlRlc3RDYXNlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmxpYi51dGlsLkZvcm1hdFByZXNlcnZpbmdQcm9wZXJ0aWVzLkR1cGxp\nY2F0ZUtleUV4Y2VwdGlvbjsKCi8vIHRoaW5ncyB0byB0ZXN0OgovLyAtIGRl\nbGltaXRlcnMgaW4ga2V5cwovLyAtIGVzY2FwZSBjaGFycywgaW5jbHVkaW5n\nIFw6LCBcPSBpbiBmaWxlcyhhcyBnZW5lcmF0ZWQgYnkgUHJvcGVydGllcykK\nLy8gLSB1bmljb2RlCi8vIC0gbm9uLVN0cmluZyBrZXlzIC8gdmFscwovLyAt\nIGxpc3QoKSBtZXRob2QgYmVoYXZpb3IKCnB1YmxpYyBjbGFzcyBUZXN0UHJv\ncGVydGllc1BhcnNlciBleHRlbmRzIFRlc3RDYXNlIHsKCiAgICBwcml2YXRl\nIHN0YXRpYyBmaW5hbCBTdHJpbmcgTFMgPSBTeXN0ZW0uZ2V0UHJvcGVydHko\nICJsaW5lLnNlcGFyYXRvciIgKTsKCiAgICBwdWJsaWMgdm9pZCB0ZXN0U2lt\ncGxlUHJvcGVydGllcygpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAg\nU3RyaW5nQnVmZmVyIGJ1ZiA9IG5ldyBTdHJpbmdCdWZmZXIoKTsKICAgICAg\nICBidWYuYXBwZW5kKCJrZXk6IHZhbHVlIiArIExTKTsKICAgICAgICBidWYu\nYXBwZW5kKCJrZXkyOiB2YWx1ZTIiKTsgLy8gbm8gRU9MIC0tIHRoaXMgaXMg\naW50ZW50aW9uYWwKICAgICAgICBQcm9wZXJ0aWVzIHAgPSB0b1Byb3BlcnRp\nZXMoYnVmLnRvU3RyaW5nKCkpOwogICAgICAgIGFzc2VydFByb3BlcnRpZXMo\nbmV3IFN0cmluZ1tdW117CiAgICAgICAgICAgIHsgImtleSIsICJ2YWx1ZSIg\nfSwgeyAia2V5MiIsICJ2YWx1ZTIiIH0gfSwgcCk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgdGVzdENvbW1lbnRzKCkgdGhyb3dzIElPRXhjZXB0aW9uIHsK\nICAgICAgICBTdHJpbmdCdWZmZXIgYnVmID0gbmV3IFN0cmluZ0J1ZmZlcigp\nOwogICAgICAgIGJ1Zi5hcHBlbmQoIiMgdGhpcyBpcyBhIGNvbW1lbnQiICsg\nTFMpOwogICAgICAgIGJ1Zi5hcHBlbmQoIiAjIGFub3RoZXIgb25lLCB3aXRo\nIGxlYWRpbmcgd2hpdGVzcGFjZQkiICsgTFMpOwogICAgICAgIGJ1Zi5hcHBl\nbmQoIiAJIyAJYW5kIG1vcmUgd2l0aCBpbnRlcmVzdGluZyB3aGl0ZXNwYWNl\nCSIgKyBMUyk7CiAgICAgICAgYnVmLmFwcGVuZCgiISBhbmQgd2l0aCBhICEg\nZGVsaW1pdGVyIiArIExTKTsKICAgICAgICBidWYuYXBwZW5kKCIhIGFuZCB3\naXRoIGVzY2FwZSBcdCBjaGFycyIgKyBMUyk7CiAgICAgICAgYnVmLmFwcGVu\nZCgiI2FuZCBhIGNvbW1lbnQgd2l0aCBubyB3aGl0ZXNwYWNlIiArIExTKTsK\nICAgICAgICBQcm9wZXJ0aWVzIHAgPSB0b1Byb3BlcnRpZXMoYnVmLnRvU3Ry\naW5nKCkpOwogICAgICAgIGFzc2VydEVxdWFscygwLCBwLnNpemUoKSk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgdGVzdE1peGVkQ29udGVudCgpIHRocm93\ncyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgU3RyaW5nQnVmZmVyIGJ1ZiA9IG5l\ndyBTdHJpbmdCdWZmZXIoKTsKICAgICAgICBidWYuYXBwZW5kKCIjIHRoaXMg\naXMgYSBjb21tZW50IiArIExTKTsKICAgICAgICBidWYuYXBwZW5kKCIgIyBh\nbm90aGVyIG9uZSwgd2l0aCBsZWFkaW5nIHdoaXRlc3BhY2UJIiArIExTKTsK\nICAgICAgICBidWYuYXBwZW5kKCJmb286IGJhciNiYXoiICsgTFMpOwogICAg\nICAgIGJ1Zi5hcHBlbmQoIiEgYW5kIHdpdGggYSAhIGRlbGltaXRlciIgKyBM\nUyk7CiAgICAgICAgYnVmLmFwcGVuZCgiISBhbmQgd2l0aCBlc2NhcGUgXHQg\nY2hhcnMiICsgTFMpOwogICAgICAgIFByb3BlcnRpZXMgcCA9IHRvUHJvcGVy\ndGllcyhidWYudG9TdHJpbmcoKSk7CiAgICAgICAgYXNzZXJ0UHJvcGVydGll\ncyhuZXcgU3RyaW5nW11bXXsgeyAiZm9vIiwgImJhciNiYXoiIH0gfSwgcCk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdE11bHRpTGluZUlucHV0KCkg\ndGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICBTdHJpbmcgcyA9ICJmb286\nIGJhclxcIiArIExTICsgIm1vcmUgbGluZSBnb2VzIGhlcmUiOwogICAgICAg\nIFByb3BlcnRpZXMgcCA9IHRvUHJvcGVydGllcyhzKTsKICAgICAgICBhc3Nl\ncnRQcm9wZXJ0aWVzKAogICAgICAgICAgICBuZXcgU3RyaW5nW11bXXsgeyAi\nZm9vIiwgImJhcm1vcmUgbGluZSBnb2VzIGhlcmUiIH0gfSwgcCk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgdGVzdEVtcHR5TGluZXMoKSB0aHJvd3MgSU9F\neGNlcHRpb24gewogICAgICAgIFByb3BlcnRpZXMgcCA9IHRvUHJvcGVydGll\ncyhMUyArICJmb286IGJhciIgKyBMUyArIExTICsgImJhejogdmFsIik7CiAg\nICAgICAgYXNzZXJ0UHJvcGVydGllcyhuZXcgU3RyaW5nW11bXXsgeyAiZm9v\nIiwgImJhciIgfSwgeyAiYmF6IiwgInZhbCIgfSB9LAogICAgICAgICAgICBw\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0QWRkUHJvcGVydGllcygp\nIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgLy8gaW50ZW50aW9uYWxs\neSBsZWZ0IG91dCB0aGUgdHJhaWxpbmcgZW5kIGxpbmUKICAgICAgICBTdHJp\nbmcgcyA9ICJmb286IGJhciIgKyBMUyArICJiYXo6IHZhbCI7CiAgICAgICAg\nUHJvcGVydGllcyBwID0gdG9Qcm9wZXJ0aWVzKHMpOwogICAgICAgIGFzc2Vy\ndFByb3BlcnRpZXMobmV3IFN0cmluZ1tdW117IHsgImZvbyIsICJiYXIiIH0s\nIHsgImJheiIsICJ2YWwiIH0gfSwKICAgICAgICAgICAgcCk7CgogICAgICAg\nIHAucHV0KCJuZXcta2V5IiwgInZhbDEiKTsKICAgICAgICBwLnB1dCgibmV3\nLWtleS0yIiwgInZhbDIiKTsKICAgICAgICBwLnB1dCgiYW5vdGhlci1uZXct\na2V5IiwgInZhbDMiKTsKICAgICAgICBhc3NlcnRSb3VuZFRyaXAocyArIExT\nICsgIm5ldy1rZXk6IHZhbDEiICsgTFMgKyAibmV3LWtleS0yOiB2YWwyIiAr\nIExTICsKICAgICAgICAgICAgImFub3RoZXItbmV3LWtleTogdmFsMyIgKyBM\nUywgcCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEFkZEFuZE11dGF0\nZVByb3BlcnRpZXMoKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgIC8v\nIGludGVudGlvbmFsbHkgbGVmdCBvdXQgdGhlIHRyYWlsaW5nIGVuZCBsaW5l\nCiAgICAgICAgUHJvcGVydGllcyBwID0gdG9Qcm9wZXJ0aWVzKCJmb286IGJh\nciIgKyBMUyArICJiYXo6IHZhbCIpOwogICAgICAgIGFzc2VydFByb3BlcnRp\nZXMobmV3IFN0cmluZ1tdW117IHsgImZvbyIsICJiYXIiIH0sIHsgImJheiIs\nICJ2YWwiIH0gfSwKICAgICAgICAgICAgcCk7CgogICAgICAgIHAucHV0KCJu\nZXcta2V5IiwgIm5ldyB2YWx1ZSIpOwogICAgICAgIHAucHV0KCJmb28iLCAi\nYmFyYmFyIik7CiAgICAgICAgYXNzZXJ0Um91bmRUcmlwKCJmb286IGJhcmJh\nciIgKyBMUyArICJiYXo6IHZhbCIgKyBMUyAKICAgICAgICAgICAgKyAibmV3\nLWtleTogbmV3IHZhbHVlIiArIExTLCBwKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0RXNjYXBlZEVxdWFscygpIHRocm93cyBJT0V4Y2VwdGlvbiB7\nCiAgICAgICAgUHJvcGVydGllcyBwID0gdG9Qcm9wZXJ0aWVzKCJmb289YmFy\nXFw9V0FSTixiYXpcXD1UUkFDRSIpOwogICAgICAgIGFzc2VydFByb3BlcnRp\nZXMobmV3IFN0cmluZ1tdW117IHsgImZvbyIsICJiYXI9V0FSTixiYXo9VFJB\nQ0UiIH0gfSwgcCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdExpbmVU\neXBlcygpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgU3RyaW5nQnVm\nZmVyIGJ1ZiA9IG5ldyBTdHJpbmdCdWZmZXIoKTsKICAgICAgICBidWYuYXBw\nZW5kKCIgICAhY29tbWVudCIgKyBMUyArICIgXHQgICIgKyBMUyArICJuYW1l\nID0gbm8iICsgTFMgKyAiICAgICIKICAgICAgICAgICAgKyAiI21vcmVjXHRv\nbW1cXCIgKyBMUyArICJlbnRzIiArIExTICsgTFMgKyAiICBkb2c9bm9cXGNh\ndCAgICIgKyBMUyAKICAgICAgICAgICAgKyAiYnVycHMgICAgOiIgKyBMUyAr\nICJ0ZXN0PSIgKyBMUyArICJkYXRlIHRvZGF5IiArIExTICsgTFMgKyBMUyAK\nICAgICAgICAgICAgKyAibG9uZ1xcIiArIExTICsgIiAgIHZhbHVlPXRyeWlu\nIFxcIiArIExTICsgIiAiCiAgICAgICAgICAgICsgImd0byIgKyBMUyArICI0\nOnZpZXIiICsgTFMgKyAidmllciAgICAgOjQiKTsKICAgICAgICBQcm9wZXJ0\naWVzIHAgPSB0b1Byb3BlcnRpZXMoYnVmLnRvU3RyaW5nKCkpOwogICAgICAg\nIGFzc2VydFByb3BlcnRpZXMobmV3IFN0cmluZ1tdW117CiAgICAgICAgICAg\nIHsgIm5hbWUiLCAibm8iIH0sIHsgImVudHMiLCAiIiB9LCB7ICJkb2ciLCAi\nbm9jYXQgICAiIH0sCiAgICAgICAgICAgIHsgImJ1cnBzIiwgIiIgfSwgeyAi\ndGVzdCIsICIiIH0sIHsgImRhdGUiLCAidG9kYXkiIH0sCiAgICAgICAgICAg\nIHsgImxvbmd2YWx1ZSIsICJ0cnlpbiBndG8iIH0sIHsgIjQiLCAidmllciIg\nfSwgeyAidmllciIsICI0IiB9LAogICAgICAgIH0sIHApOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHRlc3RTcGVjaWFsQ2hhcnMoKSB0aHJvd3MgVGhyb3dh\nYmxlIHsKICAgICAgICB0ZXN0U3BlY2lhbENoYXJzKGZhbHNlLCB0cnVlKTsK\nICAgICAgICB0ZXN0U3BlY2lhbENoYXJzKHRydWUsIHRydWUpOwogICAgICAg\nIHRlc3RTcGVjaWFsQ2hhcnMoZmFsc2UsIGZhbHNlKTsKICAgICAgICB0ZXN0\nU3BlY2lhbENoYXJzKHRydWUsIGZhbHNlKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIFRlc3QgdGhhdCBzcGVjaWFsIGNoYXJhY3RlcnMgd29yay4KICAgICAq\nCiAgICAgKiBAcGFyYW0gZm9ybWF0dGluZ1Byb3BzIGlmIHRydWUsIHRlc3Qg\nYWdhaW5zdCB0aGUKICAgICAqIEZvcm1hdFByZXNlcnZpbmdQcm9wZXJ0aWVz\nLCBvdGhlcndpc2UgdGVzdAogICAgICogYWdhaW5zdCBhIG5vcm1hbCBQcm9w\nZXJ0aWVzIGluc3RhbmNlKGZvciB2YWxpZGF0aW9uIG9mIHRoZSB0ZXN0IGNh\nc2UpLgogICAgICogQHBhcmFtIHZhbHVlIHdoZXRoZXIgdG8gdGVzdCB0aGUg\na2V5IG9yIHRoZSB2YWx1ZQogICAgICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nU3BlY2lhbENoYXJzKGJvb2xlYW4gZm9ybWF0dGluZ1Byb3BzLCBib29sZWFu\nIHZhbHVlKQogICAgICAgIHRocm93cyBUaHJvd2FibGUgewogICAgICAgIExp\nc3QgdmFsdWVMaXN0ID0gbmV3IEFycmF5TGlzdChBcnJheXMuYXNMaXN0KG5l\ndyBTdHJpbmdbXXsKICAgICAgICAgICAgInh4eXkiLCAieHhcXHl5IiwgInh4\nIiArIExTICsgInl5IiwgInh4XFxueXkiLCAieHhcdHl5IiwgInh4XFx0eXki\nLAogICAgICAgICAgICAieHhccnl5IiwgInh4XFxyeXkiLCAieHhcZnl5Iiwg\nInh4XFxmeXkiLCAieHhcciIgKyBMUyArICJcXFx0XHJcdCIgCiAgICAgICAg\nICAgICsgTFMgKyAieXkiLAogICAgICAgICAgICAieHhcXHIiICsgTFMgKyAi\nXFxcdFxcclx0XFxueXkiLAogICAgICAgICAgICAieHhcciIgKyBMUyArICJc\nXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFx0XHJcdCIgKyBMUyArICJ5eSIs\nCiAgICAgICAgICAgICJDOlxcUHJvZ3JhbSBGaWxlc1xcU29tZSBBcHBsaWNh\ndGlvblxcT3BlbkpQQVxcTXkgRmlsZS5kYXQiLCB9KSk7CgogICAgICAgIC8v\nIGFsc28gc3RvcmUgZXZlcnkgaW5kaXZpZHVhbCBjaGFyYWN0ZXIKICAgICAg\nICBmb3IgKGNoYXIgYyA9ICdhJzsgYyA8ICdaJzsgYysrKSB7CiAgICAgICAg\nICAgIHZhbHVlTGlzdC5hZGQobmV3IFN0cmluZyhuZXcgY2hhcltdeyBjIH0p\nKTsKICAgICAgICAgICAgdmFsdWVMaXN0LmFkZChuZXcgU3RyaW5nKG5ldyBj\naGFyW117IGMsICdcXCcsIGMgfSkpOwogICAgICAgICAgICB2YWx1ZUxpc3Qu\nYWRkKG5ldyBTdHJpbmcobmV3IGNoYXJbXXsgJ1xcJywgYyB9KSk7CiAgICAg\nICAgfQoKICAgICAgICBTdHJpbmdbXSB2YWx1ZXMgPSAoU3RyaW5nW10pIHZh\nbHVlTGlzdC50b0FycmF5KG5ldyBTdHJpbmdbMF0pOwoKICAgICAgICBmaW5h\nbCBTdHJpbmcgZHVtbXkgPSAiWFhYIjsKCiAgICAgICAgZm9yIChpbnQgaSA9\nIDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgLy8g\ndGVzdCBzcGVjaWFsIGNoYXJhY3RlcnMgaW4gZWl0aGVyIGtleXMgb3IgdmFs\ndWVzCiAgICAgICAgICAgIFN0cmluZyB2YWwgPSB2YWx1ZSA/IHZhbHVlc1tp\nXSA6IGR1bW15OwogICAgICAgICAgICBTdHJpbmcga2V5ID0gdmFsdWUgPyBk\ndW1teSA6IHZhbHVlc1tpXTsKCiAgICAgICAgICAgIFByb3BlcnRpZXMgcCA9\nIGZvcm1hdHRpbmdQcm9wcyA/CiAgICAgICAgICAgICAgICBuZXcgRm9ybWF0\nUHJlc2VydmluZ1Byb3BlcnRpZXMoKSA6IG5ldyBQcm9wZXJ0aWVzKCk7CiAg\nICAgICAgICAgIGlmIChwIGluc3RhbmNlb2YgRm9ybWF0UHJlc2VydmluZ1By\nb3BlcnRpZXMpIHsKICAgICAgICAgICAgICAgIC8vIHNldCB0aGVzZSBwcm9w\nZXJ0aWVzIHNvIHdlIGJlaGF2ZSB0aGUgc2FtZSB3YXkgYXMKICAgICAgICAg\nICAgICAgIC8vIGphdmEudXRpbC5Qcm9wZXJ0aWVzCiAgICAgICAgICAgICAg\nICAoKEZvcm1hdFByZXNlcnZpbmdQcm9wZXJ0aWVzKSBwKS5zZXREZWZhdWx0\nRW50cnlEZWxpbWl0ZXIoJz0nKTsKICAgICAgICAgICAgICAgICgoRm9ybWF0\nUHJlc2VydmluZ1Byb3BlcnRpZXMpIHApLgogICAgICAgICAgICAgICAgICAg\nIHNldEFkZFdoaXRlc3BhY2VBZnRlckRlbGltaXRlcihmYWxzZSk7CiAgICAg\nICAgICAgIH0KCiAgICAgICAgICAgIHAuc2V0UHJvcGVydHkoa2V5LCB2YWwp\nOwogICAgICAgICAgICBCeXRlQXJyYXlPdXRwdXRTdHJlYW0gb3V0ID0gbmV3\nIEJ5dGVBcnJheU91dHB1dFN0cmVhbSgpOwogICAgICAgICAgICBwLnN0b3Jl\nKG91dCwgbnVsbCk7CgogICAgICAgICAgICBQcm9wZXJ0aWVzIGNvcHkgPSBu\nZXcgUHJvcGVydGllcygpOwogICAgICAgICAgICBjb3B5LnNldFByb3BlcnR5\nKGtleSwgdmFsKTsKICAgICAgICAgICAgQnl0ZUFycmF5T3V0cHV0U3RyZWFt\nIGNvcHlPdXQgPSBuZXcgQnl0ZUFycmF5T3V0cHV0U3RyZWFtKCk7CiAgICAg\nICAgICAgIGNvcHkuc3RvcmUoY29weU91dCwgbnVsbCk7CgogICAgICAgICAg\nICBwID0gZm9ybWF0dGluZ1Byb3BzID8KICAgICAgICAgICAgICAgIG5ldyBG\nb3JtYXRQcmVzZXJ2aW5nUHJvcGVydGllcygpIDogbmV3IFByb3BlcnRpZXMo\nKTsKCiAgICAgICAgICAgIElucHV0U3RyZWFtIGluID0gbmV3IEJ1ZmZlcmVk\nSW5wdXRTdHJlYW0KICAgICAgICAgICAgICAgIChuZXcgQnl0ZUFycmF5SW5w\ndXRTdHJlYW0ob3V0LnRvQnl0ZUFycmF5KCkpKTsKCiAgICAgICAgICAgIHRy\neSB7CiAgICAgICAgICAgICAgICAvLyBtYWtlIHN1cmUgdGhhdCB0aGUgMiBw\ncm9wZXJ0aWVzIHNlcmlhbGl6ZWQgYXJlIHRoZSBzYW1lCiAgICAgICAgICAg\nICAgICBTdHJpbmcgY29weU91dFN0cmluZyA9IHN0cmlwQ29tbWVudHMoY29w\neU91dC50b0J5dGVBcnJheSgpKTsKICAgICAgICAgICAgICAgIFN0cmluZyBv\ndXRTdHJpbmcgPSBzdHJpcENvbW1lbnRzKG91dC50b0J5dGVBcnJheSgpKTsK\nICAgICAgICAgICAgICAgIGFzc2VydEVxdWFscyhjb3B5T3V0U3RyaW5nLCBv\ndXRTdHJpbmcpOwoKICAgICAgICAgICAgICAgIHAubG9hZChpbik7CgogICAg\nICAgICAgICAgICAgYXNzZXJ0Tm90TnVsbCgiUHJvcGVydHkgXCIiICsga2V5\nICsgIlwiIHdhcyBudWxsIiwKICAgICAgICAgICAgICAgICAgICBwLmdldFBy\nb3BlcnR5KGtleSkpOwogICAgICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKHZh\nbC50cmltKCksIHAuZ2V0UHJvcGVydHkoa2V5KS50cmltKCkpOwogICAgICAg\nICAgICB9IGNhdGNoIChUaHJvd2FibGUgaW9lKSB7CiAgICAgICAgICAgICAg\nICBpZiAoIWZvcm1hdHRpbmdQcm9wcykKICAgICAgICAgICAgICAgICAgICB0\naHJvdyBpb2U7CgogICAgICAgICAgICAgICAgLy8gYnVnKDEyMTEsIGlvZSwK\nICAgICAgICAgICAgICAgIC8vICJDYW5ub3Qgc3RvcmUgYmFja3NsYXNoIGlu\nIEZvcm1hdFByZXNlcnZpbmdQcm9wZXJ0aWVzIik7CiAgICAgICAgICAgICAg\nICB0aHJvdyBpb2U7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cgog\nICAgc3RhdGljIENoYXJhY3RlciByYW5kb21DaGFyKCkgewogICAgICAgIGNo\nYXIgW10gVEVTVF9DSEFSX0FSUkFZID0gbmV3IGNoYXIgW117CiAgICAgICAg\nICAgICdhJywgJ2InLCAnYycsICdkJywgJ2UnLCAnZicsICdnJywgJ2gnLCAn\naScsCiAgICAgICAgICAgICdqJywgJ2snLCAnbCcsICdtJywgJ24nLCAnbycs\nICdwJywgJ3EnLCAncicsCiAgICAgICAgICAgICdzJywgJ3QnLCAndScsICd2\nJywgJ3cnLCAneCcsICd5JywgJ3onLCAnMScsCiAgICAgICAgICAgICcyJywg\nJzMnLCAnNCcsICc1JywgJzYnLCAnNycsICc4JywgJzknIH07CgogICAgICAg\nIHJldHVybiBuZXcgQ2hhcmFjdGVyKFRFU1RfQ0hBUl9BUlJBWVsKICAgICAg\nICAgICAgKGludCkgKE1hdGgucmFuZG9tKCkgKiBURVNUX0NIQVJfQVJSQVku\nbGVuZ3RoKV0pOwogICAgfQoKICAgIHN0YXRpYyBTdHJpbmcgcmFuZG9tU3Ry\naW5nKGludCBsZW4pIHsKICAgICAgICBTdHJpbmdCdWZmZXIgYnVmID0gbmV3\nIFN0cmluZ0J1ZmZlcigpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwg\nKGludCkgKE1hdGgucmFuZG9tKCkgKiBsZW4pICsgMTsgaSsrKQogICAgICAg\nICAgICBidWYuYXBwZW5kKHJhbmRvbUNoYXIoKSk7CiAgICAgICAgcmV0dXJu\nIGJ1Zi50b1N0cmluZygpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RF\ncXVpdmFsZW50U3RvcmUoKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAg\nIFByb3BlcnRpZXMgcDEgPSBuZXcgUHJvcGVydGllcygpOwogICAgICAgIEZv\ncm1hdFByZXNlcnZpbmdQcm9wZXJ0aWVzIHAyID0gbmV3IEZvcm1hdFByZXNl\ncnZpbmdQcm9wZXJ0aWVzKCk7CgogICAgICAgICgoRm9ybWF0UHJlc2Vydmlu\nZ1Byb3BlcnRpZXMpIHAyKS5zZXREZWZhdWx0RW50cnlEZWxpbWl0ZXIoJz0n\nKTsKICAgICAgICAoKEZvcm1hdFByZXNlcnZpbmdQcm9wZXJ0aWVzKSBwMiku\nc2V0QWRkV2hpdGVzcGFjZUFmdGVyRGVsaW1pdGVyKGZhbHNlKTsKCiAgICAg\nICAgU3RyaW5nW10gdmFsdWVzID0KICAgICAgICAgICAgbmV3IFN0cmluZ1td\nIHsgCiAgICAgICAgICAgICAgICAieCIsIAogICAgICAgICAgICAgICAgIngi\nICsgTFMgKyAieSIsIAogICAgICAgICAgICAgICAgInhcXG55IiwgCiAgICAg\nICAgICAgICAgICAieFx0eSIsIAogICAgICAgICAgICAgICAgInhcXHR5IiwK\nICAgICAgICAgICAgICAgICJ4XGZ5IiwgCiAgICAgICAgICAgICAgICAieFxc\nZnkiLCAKICAgICAgICAgICAgICAgICJ4XHJ5IiwgCiAgICAgICAgICAgICAg\nICAieFxccnkiLCAKICAgICAgICAgICAgICAgICJDOlxcRm9vIEJhclxcQmF6\nIiwKICAgICAgICAgICAgICAgIHJhbmRvbVN0cmluZyg1KS5yZXBsYWNlKCdh\nJywgJ1xcJyksCiAgICAgICAgICAgICAgICByYW5kb21TdHJpbmcoNTAwKS5y\nZXBsYWNlKCdhJywgJ1xcJyksCiAgICAgICAgICAgICAgICByYW5kb21TdHJp\nbmcoNTAwMCkucmVwbGFjZSgnYScsICdcXCcpLCAKICAgICAgICAgICAgICAg\nIH07CgogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgdmFsdWVzLmxlbmd0\naDsgaSsrKSB7CiAgICAgICAgICAgIHAxLmNsZWFyKCk7CiAgICAgICAgICAg\nIHAyLmNsZWFyKCk7CgogICAgICAgICAgICBwMS5zZXRQcm9wZXJ0eSgieHh4\nIiwgdmFsdWVzW2ldKTsKICAgICAgICAgICAgcDIuc2V0UHJvcGVydHkoInh4\neCIsIHZhbHVlc1tpXSk7CgogICAgICAgICAgICBCeXRlQXJyYXlPdXRwdXRT\ndHJlYW0gb3V0MSA9IG5ldyBCeXRlQXJyYXlPdXRwdXRTdHJlYW0oKTsKICAg\nICAgICAgICAgQnl0ZUFycmF5T3V0cHV0U3RyZWFtIG91dDIgPSBuZXcgQnl0\nZUFycmF5T3V0cHV0U3RyZWFtKCk7CgogICAgICAgICAgICBwMS5zdG9yZShv\ndXQxLCBudWxsKTsKICAgICAgICAgICAgcDIuc3RvcmUob3V0MiwgbnVsbCk7\nCgogICAgICAgICAgICBTdHJpbmcgczEgPSBuZXcgU3RyaW5nKG91dDEudG9C\neXRlQXJyYXkoKSk7CiAgICAgICAgICAgIFN0cmluZyBzMiA9IG5ldyBTdHJp\nbmcob3V0Mi50b0J5dGVBcnJheSgpKTsKCiAgICAgICAgICAgIGFzc2VydFRy\ndWUoIkV4cGVjdGVkIDwiICsgczEgKyAiPiBidXQgd2FzIDwiICsgczIgKyAi\nPiIsCiAgICAgICAgICAgICAgICBzMS5pbmRleE9mKHMyKSAhPSAtMSk7CiAg\nICAgICAgfQogICAgfQoKICAgIHN0YXRpYyBTdHJpbmcgc3RyaXBDb21tZW50\ncyhieXRlW10gYnl0ZXMpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAg\nQnVmZmVyZWRSZWFkZXIgcmVhZGVyID0gbmV3IEJ1ZmZlcmVkUmVhZGVyKG5l\ndyBJbnB1dFN0cmVhbVJlYWRlcgogICAgICAgICAgICAobmV3IEJ5dGVBcnJh\neUlucHV0U3RyZWFtKGJ5dGVzKSkpOwogICAgICAgIFN0cmluZ0J1ZmZlciBz\nYnVmID0gbmV3IFN0cmluZ0J1ZmZlcigpOwogICAgICAgIFN0cmluZyBsaW5l\nOwogICAgICAgIHdoaWxlICgobGluZSA9IHJlYWRlci5yZWFkTGluZSgpKSAh\nPSBudWxsKSB7CiAgICAgICAgICAgIC8vIHNraXAgY29tbWVudHMKICAgICAg\nICAgICAgaWYgKGxpbmUudHJpbSgpLnN0YXJ0c1dpdGgoIiMiKSkKICAgICAg\nICAgICAgICAgIGNvbnRpbnVlOwoKICAgICAgICAgICAgc2J1Zi5hcHBlbmQo\nbGluZSk7CiAgICAgICAgICAgIHNidWYuYXBwZW5kKExTKTsKICAgICAgICB9\nCgogICAgICAgIHJldHVybiBzYnVmLnRvU3RyaW5nKCk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgdGVzdER1cGxpY2F0ZVByb3BlcnRpZXMoKSB0aHJvd3Mg\nSU9FeGNlcHRpb24gewogICAgICAgIEZvcm1hdFByZXNlcnZpbmdQcm9wZXJ0\naWVzIHAgPSBuZXcgRm9ybWF0UHJlc2VydmluZ1Byb3BlcnRpZXMoKTsKICAg\nICAgICB0cnkgewogICAgICAgICAgICB0b1Byb3BlcnRpZXMoImZvbz1iYXIi\nICsgTFMgKyAiZm9vPWJheiIsIHApOwogICAgICAgICAgICBmYWlsKCJleHBl\nY3RlZCBkdXBsaWNhdGUga2V5cyB0byBjYXVzZSBleGNlcHRpb24iKTsKICAg\nICAgICB9IGNhdGNoIChEdXBsaWNhdGVLZXlFeGNlcHRpb24gZSkgewogICAg\nICAgICAgICAvLyBleHBlY3RlZAogICAgICAgIH0KCiAgICAgICAgLy8gbm93\nIHRlc3QgdGhlIGV4cGVjdGVkIGJlaGF2aW9yIHdoZW4gZHVwbGljYXRlcyBh\ncmUgYWxsb3dlZC4KICAgICAgICBwID0gbmV3IEZvcm1hdFByZXNlcnZpbmdQ\ncm9wZXJ0aWVzKCk7CiAgICAgICAgcC5zZXRBbGxvd0R1cGxpY2F0ZXModHJ1\nZSk7CiAgICAgICAgdG9Qcm9wZXJ0aWVzKCJmb289YmFyIiArIExTICsgImZv\nbz1iYXoiLCBwKTsKICAgICAgICBhc3NlcnRQcm9wZXJ0aWVzKG5ldyBTdHJp\nbmdbXVtdeyB7ICJmb28iLCAiYmF6IiB9IH0sIHApOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHRlc3RNdWx0aXBsZUxvYWRzKCkgdGhyb3dzIElPRXhjZXB0\naW9uIHsKICAgICAgICBTdHJpbmcgcHJvcHMgPSAiZm9vPWJhciIgKyBMUyAr\nICJiYXo9cXV1eCI7CiAgICAgICAgU3RyaW5nIHByb3BzMiA9ICJhPWIiICsg\nTFMgKyAiYz1kIjsKICAgICAgICBQcm9wZXJ0aWVzIHZhbmlsbGEgPSBuZXcg\nUHJvcGVydGllcygpOwogICAgICAgIHZhbmlsbGEubG9hZChuZXcgQnVmZmVy\nZWRJbnB1dFN0cmVhbQogICAgICAgICAgICAobmV3IFN0cmluZ0J1ZmZlcklu\ncHV0U3RyZWFtKHByb3BzKSkpOwogICAgICAgIHZhbmlsbGEubG9hZChuZXcg\nQnVmZmVyZWRJbnB1dFN0cmVhbQogICAgICAgICAgICAobmV3IFN0cmluZ0J1\nZmZlcklucHV0U3RyZWFtKHByb3BzMikpKTsKCiAgICAgICAgUHJvcGVydGll\ncyBwID0gbmV3IEZvcm1hdFByZXNlcnZpbmdQcm9wZXJ0aWVzKCk7CiAgICAg\nICAgcC5sb2FkKG5ldyBCdWZmZXJlZElucHV0U3RyZWFtKG5ldyBTdHJpbmdC\ndWZmZXJJbnB1dFN0cmVhbShwcm9wcykpKTsKICAgICAgICBwLmxvYWQobmV3\nIEJ1ZmZlcmVkSW5wdXRTdHJlYW0obmV3IFN0cmluZ0J1ZmZlcklucHV0U3Ry\nZWFtKHByb3BzMikpKTsKICAgICAgICBhc3NlcnRQcm9wZXJ0aWVzU2FtZSh2\nYW5pbGxhLCBwKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgRm9ybWF0UHJlc2Vy\ndmluZ1Byb3BlcnRpZXMgdG9Qcm9wZXJ0aWVzKFN0cmluZyBzKQogICAgICAg\nIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIHRvUHJvcGVy\ndGllcyhzLCBuZXcgRm9ybWF0UHJlc2VydmluZ1Byb3BlcnRpZXMoKSk7CiAg\nICB9CgogICAgcHJvdGVjdGVkIEZvcm1hdFByZXNlcnZpbmdQcm9wZXJ0aWVz\nIHRvUHJvcGVydGllcyhTdHJpbmcgcywKICAgICAgICBGb3JtYXRQcmVzZXJ2\naW5nUHJvcGVydGllcyBwKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAg\nIFByb3BlcnRpZXMgdmFuaWxsYSA9IG5ldyBQcm9wZXJ0aWVzKCk7CiAgICAg\nICAgdmFuaWxsYS5sb2FkKG5ldyBTdHJpbmdCdWZmZXJJbnB1dFN0cmVhbShz\nKSk7CgogICAgICAgIHAubG9hZChuZXcgU3RyaW5nQnVmZmVySW5wdXRTdHJl\nYW0ocykpOwogICAgICAgIGFzc2VydFJvdW5kVHJpcChzLCBwKTsKCiAgICAg\nICAgYXNzZXJ0UHJvcGVydGllc1NhbWUodmFuaWxsYSwgcCk7CgogICAgICAg\nIHJldHVybiBwOwogICAgfQoKICAgIHByaXZhdGUgdm9pZCBhc3NlcnRSb3Vu\nZFRyaXAoU3RyaW5nIHMsIFByb3BlcnRpZXMgcCkgdGhyb3dzIElPRXhjZXB0\naW9uIHsKICAgICAgICBCeXRlQXJyYXlPdXRwdXRTdHJlYW0gb3V0ID0gbmV3\nIEJ5dGVBcnJheU91dHB1dFN0cmVhbSgpOwogICAgICAgIHAuc3RvcmUob3V0\nLCBudWxsKTsKICAgICAgICBhc3NlcnRFcXVhbHMocywgb3V0LnRvU3RyaW5n\nKCkpOwoKICAgICAgICAvLyBhbHNvIGNoZWNrIHNlcmlhbGl6YWJsZQogICAg\nICAgIEJ5dGVBcnJheU91dHB1dFN0cmVhbSBib3V0ID0gbmV3IEJ5dGVBcnJh\neU91dHB1dFN0cmVhbSgpOwogICAgICAgIG5ldyBPYmplY3RPdXRwdXRTdHJl\nYW0oYm91dCkud3JpdGVPYmplY3QocCk7CgogICAgICAgIHRyeSB7CiAgICAg\nICAgICAgIEZvcm1hdFByZXNlcnZpbmdQcm9wZXJ0aWVzIGRlc2VyaWFsaXpl\nZCA9CiAgICAgICAgICAgICAgICAoRm9ybWF0UHJlc2VydmluZ1Byb3BlcnRp\nZXMpIG5ldyBPYmplY3RJbnB1dFN0cmVhbQogICAgICAgICAgICAgICAgICAg\nIChuZXcgQnl0ZUFycmF5SW5wdXRTdHJlYW0oYm91dC50b0J5dGVBcnJheSgp\nKSkuCiAgICAgICAgICAgICAgICAgICAgcmVhZE9iamVjdCgpOwogICAgICAg\nICAgICBhc3NlcnRFcXVhbHMocCwgZGVzZXJpYWxpemVkKTsKCiAgICAgICAg\nICAgIG91dCA9IG5ldyBCeXRlQXJyYXlPdXRwdXRTdHJlYW0oKTsKICAgICAg\nICAgICAgZGVzZXJpYWxpemVkLnN0b3JlKG91dCwgbnVsbCk7CiAgICAgICAg\nICAgIGFzc2VydEVxdWFscyhzLCBvdXQudG9TdHJpbmcoKSk7CiAgICAgICAg\nfSBjYXRjaCAoQ2xhc3NOb3RGb3VuZEV4Y2VwdGlvbiBjbmZlKSB7CiAgICAg\nICAgICAgIGZhaWwoY25mZSArICIiKTsKICAgICAgICB9CiAgICB9CgogICAg\ncHVibGljIHN0YXRpYyB2b2lkIGFzc2VydEVxdWFscyhTdHJpbmcgZXhwZWN0\nZWQsIFN0cmluZyBhY3R1YWwpIHsKICAgICAgICBpZiAoZXhwZWN0ZWQgPT0g\nYWN0dWFsKQogICAgICAgICAgICByZXR1cm47CgogICAgICAgIGlmIChleHBl\nY3RlZCA9PSBudWxsIHx8ICFleHBlY3RlZC5lcXVhbHMoYWN0dWFsKSkKICAg\nICAgICAgICAgZmFpbCgiRXhwZWN0ZWQgPCIgKyBleHBlY3RlZCArICI+IGJ1\ndCB3YXMgPCIgKyBhY3R1YWwgKyAiPiIpOwogICAgfQoKICAgIHByaXZhdGUg\ndm9pZCBhc3NlcnRQcm9wZXJ0aWVzU2FtZShQcm9wZXJ0aWVzIHZhbmlsbGEs\nIFByb3BlcnRpZXMgcCkgewogICAgICAgIGFzc2VydEVxdWFscyh2YW5pbGxh\nLCBwKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBhc3NlcnRQcm9wZXJ0\naWVzKFN0cmluZ1tdW10gc3RyaW5ncywgUHJvcGVydGllcyBwKSB7CiAgICAg\nICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzdHJpbmdzLmxlbmd0aDsgaSsrKQog\nICAgICAgICAgICBhc3NlcnRFcXVhbHMoc3RyaW5nc1tpXVsxXSwgcC5nZXQo\nc3RyaW5nc1tpXVswXSkpOwoKICAgICAgICBhc3NlcnRFcXVhbHMoc3RyaW5n\ncy5sZW5ndGgsIHAuc2l6ZSgpKTsKICAgIH0KfQo=\n","encoding":"base64"}

