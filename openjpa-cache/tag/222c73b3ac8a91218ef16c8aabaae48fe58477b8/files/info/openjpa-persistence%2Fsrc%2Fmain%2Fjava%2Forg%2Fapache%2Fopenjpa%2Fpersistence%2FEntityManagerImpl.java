{"sha":"185b30aeffb844a9d6c91778e1ac07bca1c0b0e0","node_id":"MDQ6QmxvYjIwNjM2NDoxODViMzBhZWZmYjg0NGE5ZDZjOTE3NzhlMWFjMDdiY2ExYzBiMGUw","size":34674,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/185b30aeffb844a9d6c91778e1ac07bca1c0b0e0","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2U7CgppbXBv\ncnQgamF2YS5sYW5nLnJlZmxlY3QuQXJyYXk7CmltcG9ydCBqYXZhLnV0aWwu\nQXJyYXlzOwppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247CmltcG9ydCBq\nYXZhLnV0aWwuRW51bVNldDsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVu\ndGl0eU1hbmFnZXI7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5GbHVzaE1v\nZGVUeXBlOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuTG9ja01vZGVUeXBl\nOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuUXVlcnk7CgppbXBvcnQgb3Jn\nLmFwYWNoZS5jb21tb25zLmxhbmcuU3RyaW5nVXRpbHM7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuY29uZi5PcGVuSlBBQ29uZmlndXJhdGlvbjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5lZS5NYW5hZ2VkUnVudGltZTsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuQnJva2VyOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5EZWxlZ2F0aW5nQnJva2VyOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5GaW5kQ2FsbGJhY2tz\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5Mb2NrTGV2ZWxz\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5PcENhbGxiYWNr\nczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuT3BlbkpQQVN0\nYXRlTWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwu\nUXVlcnlGbHVzaE1vZGVzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtl\ncm5lbC5RdWVyeUxhbmd1YWdlczsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5rZXJuZWwuU2VxOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5l\nbC5qcHFsLkpQUUxQYXJzZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nbGliLnV0aWwuTG9jYWxpemVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmxpYi51dGlsLkNsb3NlYWJsZTsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5tZXRhLkNsYXNzTWV0YURhdGE7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEubWV0YS5GaWVsZE1ldGFEYXRhOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLm1ldGEuUXVlcnlNZXRhRGF0YTsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5tZXRhLlNlcXVlbmNlTWV0YURhdGE7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEudXRpbC5FeGNlcHRpb25zOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnV0aWwuSW1wbEhlbHBlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS51dGlsLlJ1bnRpbWVFeGNlcHRpb25UcmFuc2xhdG9yOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuVXNlckV4Y2VwdGlvbjsKCi8qKgog\nKiBJbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgRW50aXR5TWFuYWdlcn0gaW50\nZXJmYWNlLgogKgogKiBAYXV0aG9yIFBhdHJpY2sgTGluc2tleQogKiBAYXV0\naG9yIEFiZSBXaGl0ZQogKiBAbm9qYXZhZG9jCiAqLwpwdWJsaWMgY2xhc3Mg\nRW50aXR5TWFuYWdlckltcGwKICAgIGltcGxlbWVudHMgT3BlbkpQQUVudGl0\neU1hbmFnZXJTUEksCiAgICBGaW5kQ2FsbGJhY2tzLCBPcENhbGxiYWNrcywg\nQ2xvc2VhYmxlLCBPcGVuSlBBRW50aXR5VHJhbnNhY3Rpb24gewoKICAgIHBy\naXZhdGUgc3RhdGljIGZpbmFsIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVy\nLmZvclBhY2thZ2UKICAgICAgICAoRW50aXR5TWFuYWdlckltcGwuY2xhc3Mp\nOwoKICAgIHByaXZhdGUgZmluYWwgRGVsZWdhdGluZ0Jyb2tlciBfYnJva2Vy\nOwogICAgcHJpdmF0ZSBmaW5hbCBFbnRpdHlNYW5hZ2VyRmFjdG9yeUltcGwg\nX2VtZjsKICAgIHByaXZhdGUgRmV0Y2hQbGFuIF9mZXRjaCA9IG51bGw7CiAg\nICBwcml2YXRlIHN0YXRpYyBmaW5hbCBPYmplY3RbXSBFTVBUWV9PQkpFQ1RT\nID0gbmV3IE9iamVjdFswXTsKCiAgICAvKioKICAgICAqIENvbnN0cnVjdG9y\nOyBzdXBwbHkgZmFjdG9yeSBhbmQgZGVsZWdhdGUuCiAgICAgKi8KICAgIHB1\nYmxpYyBFbnRpdHlNYW5hZ2VySW1wbChFbnRpdHlNYW5hZ2VyRmFjdG9yeUlt\ncGwgZmFjdG9yeSwKICAgICAgICBCcm9rZXIgYnJva2VyKSB7CiAgICAgICAg\nX2VtZiA9IGZhY3Rvcnk7CiAgICAgICAgUnVudGltZUV4Y2VwdGlvblRyYW5z\nbGF0b3IgdHJhbnNsYXRvciA9CiAgICAgICAgICAgIFBlcnNpc3RlbmNlRXhj\nZXB0aW9ucy5nZXRSb2xsYmFja1RyYW5zbGF0b3IodGhpcyk7CiAgICAgICAg\nX2Jyb2tlciA9IG5ldyBEZWxlZ2F0aW5nQnJva2VyKGJyb2tlciwgdHJhbnNs\nYXRvcik7CiAgICAgICAgX2Jyb2tlci5zZXRJbXBsaWNpdEJlaGF2aW9yKHRo\naXMsIHRyYW5zbGF0b3IpOwogICAgfQoKICAgIC8qKgogICAgICogQnJva2Vy\nIGRlbGVnYXRlLgogICAgICovCiAgICBwdWJsaWMgQnJva2VyIGdldEJyb2tl\ncigpIHsKICAgICAgICByZXR1cm4gX2Jyb2tlci5nZXREZWxlZ2F0ZSgpOwog\nICAgfQoKICAgIHB1YmxpYyBPcGVuSlBBRW50aXR5TWFuYWdlckZhY3Rvcnkg\nZ2V0RW50aXR5TWFuYWdlckZhY3RvcnkoKSB7CiAgICAgICAgcmV0dXJuIF9l\nbWY7CiAgICB9CgogICAgcHVibGljIE9wZW5KUEFDb25maWd1cmF0aW9uIGdl\ndENvbmZpZ3VyYXRpb24oKSB7CiAgICAgICAgcmV0dXJuIF9icm9rZXIuZ2V0\nQ29uZmlndXJhdGlvbigpOwogICAgfQoKICAgIHB1YmxpYyBGZXRjaFBsYW4g\nZ2V0RmV0Y2hQbGFuKCkgewogICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tl\nZCgpOwogICAgICAgIF9icm9rZXIubG9jaygpOwogICAgICAgIHRyeSB7CiAg\nICAgICAgICAgIGlmIChfZmV0Y2ggPT0gbnVsbCkKICAgICAgICAgICAgICAg\nIF9mZXRjaCA9IF9lbWYudG9GZXRjaFBsYW4oX2Jyb2tlciwKICAgICAgICAg\nICAgICAgICAgICBfYnJva2VyLmdldEZldGNoQ29uZmlndXJhdGlvbigpKTsK\nICAgICAgICAgICAgcmV0dXJuIF9mZXRjaDsKICAgICAgICB9IGZpbmFsbHkg\newogICAgICAgICAgICBfYnJva2VyLnVubG9jaygpOwogICAgICAgIH0KICAg\nIH0KCiAgICBwdWJsaWMgQ29ubmVjdGlvblJldGFpbk1vZGUgZ2V0Q29ubmVj\ndGlvblJldGFpbk1vZGUoKSB7CiAgICAgICAgcmV0dXJuIENvbm5lY3Rpb25S\nZXRhaW5Nb2RlLmZyb21LZXJuZWxDb25zdGFudCgKICAgICAgICAgICAgX2Jy\nb2tlci5nZXRDb25uZWN0aW9uUmV0YWluTW9kZSgpKTsKICAgIH0KCiAgICBw\ndWJsaWMgYm9vbGVhbiBpc01hbmFnZWQoKSB7CiAgICAgICAgcmV0dXJuIF9i\ncm9rZXIuaXNNYW5hZ2VkKCk7CiAgICB9CgogICAgcHVibGljIE1hbmFnZWRS\ndW50aW1lIGdldE1hbmFnZWRSdW50aW1lKCkgewogICAgICAgIHJldHVybiBf\nYnJva2VyLmdldE1hbmFnZWRSdW50aW1lKCk7CiAgICB9CgogICAgcHVibGlj\nIGJvb2xlYW4gZ2V0U3luY1dpdGhNYW5hZ2VkVHJhbnNhY3Rpb25zKCkgewog\nICAgICAgIHJldHVybiBfYnJva2VyLmdldFN5bmNXaXRoTWFuYWdlZFRyYW5z\nYWN0aW9ucygpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldFN5bmNXaXRo\nTWFuYWdlZFRyYW5zYWN0aW9ucyhib29sZWFuIHN5bmMpIHsKICAgICAgICBh\nc3NlcnROb3RDbG9zZUludm9rZWQoKTsKICAgICAgICBfYnJva2VyLnNldFN5\nbmNXaXRoTWFuYWdlZFRyYW5zYWN0aW9ucyhzeW5jKTsKICAgIH0KCiAgICBw\ndWJsaWMgQ2xhc3NMb2FkZXIgZ2V0Q2xhc3NMb2FkZXIoKSB7CiAgICAgICAg\ncmV0dXJuIF9icm9rZXIuZ2V0Q2xhc3NMb2FkZXIoKTsKICAgIH0KCiAgICBw\ndWJsaWMgU3RyaW5nIGdldENvbm5lY3Rpb25Vc2VyTmFtZSgpIHsKICAgICAg\nICByZXR1cm4gX2Jyb2tlci5nZXRDb25uZWN0aW9uVXNlck5hbWUoKTsKICAg\nIH0KCiAgICBwdWJsaWMgU3RyaW5nIGdldENvbm5lY3Rpb25QYXNzd29yZCgp\nIHsKICAgICAgICByZXR1cm4gX2Jyb2tlci5nZXRDb25uZWN0aW9uUGFzc3dv\ncmQoKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBnZXRNdWx0aXRocmVh\nZGVkKCkgewogICAgICAgIHJldHVybiBfYnJva2VyLmdldE11bHRpdGhyZWFk\nZWQoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRNdWx0aXRocmVhZGVk\nKGJvb2xlYW4gbXVsdGl0aHJlYWRlZCkgewogICAgICAgIGFzc2VydE5vdENs\nb3NlSW52b2tlZCgpOwogICAgICAgIF9icm9rZXIuc2V0TXVsdGl0aHJlYWRl\nZChtdWx0aXRocmVhZGVkKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBn\nZXRJZ25vcmVDaGFuZ2VzKCkgewogICAgICAgIHJldHVybiBfYnJva2VyLmdl\ndElnbm9yZUNoYW5nZXMoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRJ\nZ25vcmVDaGFuZ2VzKGJvb2xlYW4gdmFsKSB7CiAgICAgICAgYXNzZXJ0Tm90\nQ2xvc2VJbnZva2VkKCk7CiAgICAgICAgX2Jyb2tlci5zZXRJZ25vcmVDaGFu\nZ2VzKHZhbCk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gZ2V0Tm9udHJh\nbnNhY3Rpb25hbFJlYWQoKSB7CiAgICAgICAgcmV0dXJuIF9icm9rZXIuZ2V0\nTm9udHJhbnNhY3Rpb25hbFJlYWQoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBzZXROb250cmFuc2FjdGlvbmFsUmVhZChib29sZWFuIHZhbCkgewogICAg\nICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOwogICAgICAgIF9icm9rZXIu\nc2V0Tm9udHJhbnNhY3Rpb25hbFJlYWQodmFsKTsKICAgIH0KCiAgICBwdWJs\naWMgYm9vbGVhbiBnZXROb250cmFuc2FjdGlvbmFsV3JpdGUoKSB7CiAgICAg\nICAgcmV0dXJuIF9icm9rZXIuZ2V0Tm9udHJhbnNhY3Rpb25hbFdyaXRlKCk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0Tm9udHJhbnNhY3Rpb25hbFdy\naXRlKGJvb2xlYW4gdmFsKSB7CiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZv\na2VkKCk7CiAgICAgICAgX2Jyb2tlci5zZXROb250cmFuc2FjdGlvbmFsV3Jp\ndGUodmFsKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBnZXRPcHRpbWlz\ndGljKCkgewogICAgICAgIHJldHVybiBfYnJva2VyLmdldE9wdGltaXN0aWMo\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRPcHRpbWlzdGljKGJvb2xl\nYW4gdmFsKSB7CiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7CiAg\nICAgICAgX2Jyb2tlci5zZXRPcHRpbWlzdGljKHZhbCk7CiAgICB9CgogICAg\ncHVibGljIFJlc3RvcmVTdGF0ZVR5cGUgZ2V0UmVzdG9yZVN0YXRlKCkgewog\nICAgICAgIHJldHVybiBSZXN0b3JlU3RhdGVUeXBlLmZyb21LZXJuZWxDb25z\ndGFudChfYnJva2VyLmdldFJlc3RvcmVTdGF0ZSgpKTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBzZXRSZXN0b3JlU3RhdGUoUmVzdG9yZVN0YXRlVHlwZSB2\nYWwpIHsKICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsKICAgICAg\nICBfYnJva2VyLnNldFJlc3RvcmVTdGF0ZSh2YWwudG9LZXJuZWxDb25zdGFu\ndCgpKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBnZXRSZXRhaW5TdGF0\nZSgpIHsKICAgICAgICByZXR1cm4gX2Jyb2tlci5nZXRSZXRhaW5TdGF0ZSgp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldFJldGFpblN0YXRlKGJvb2xl\nYW4gdmFsKSB7CiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7CiAg\nICAgICAgX2Jyb2tlci5zZXRSZXRhaW5TdGF0ZSh2YWwpOwogICAgfQoKICAg\nIHB1YmxpYyBBdXRvQ2xlYXJUeXBlIGdldEF1dG9DbGVhcigpIHsKICAgICAg\nICByZXR1cm4gQXV0b0NsZWFyVHlwZS5mcm9tS2VybmVsQ29uc3RhbnQoX2Jy\nb2tlci5nZXRBdXRvQ2xlYXIoKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nc2V0QXV0b0NsZWFyKEF1dG9DbGVhclR5cGUgdmFsKSB7CiAgICAgICAgYXNz\nZXJ0Tm90Q2xvc2VJbnZva2VkKCk7CiAgICAgICAgX2Jyb2tlci5zZXRBdXRv\nQ2xlYXIodmFsLnRvS2VybmVsQ29uc3RhbnQoKSk7CiAgICB9CgogICAgcHVi\nbGljIERldGFjaFN0YXRlVHlwZSBnZXREZXRhY2hTdGF0ZSgpIHsKICAgICAg\nICByZXR1cm4gRGV0YWNoU3RhdGVUeXBlLmZyb21LZXJuZWxDb25zdGFudChf\nYnJva2VyLmdldERldGFjaFN0YXRlKCkpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHNldERldGFjaFN0YXRlKERldGFjaFN0YXRlVHlwZSB0eXBlKSB7CiAg\nICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7CiAgICAgICAgX2Jyb2tl\nci5zZXREZXRhY2hTdGF0ZSh0eXBlLnRvS2VybmVsQ29uc3RhbnQoKSk7CiAg\nICB9CgogICAgcHVibGljIEVudW1TZXQ8QXV0b0RldGFjaFR5cGU+IGdldEF1\ndG9EZXRhY2goKSB7CiAgICAgICAgcmV0dXJuIEF1dG9EZXRhY2hUeXBlLnRv\nRW51bVNldChfYnJva2VyLmdldEF1dG9EZXRhY2goKSk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgc2V0QXV0b0RldGFjaChBdXRvRGV0YWNoVHlwZSBmbGFn\nKSB7CiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7CiAgICAgICAg\nX2Jyb2tlci5zZXRBdXRvRGV0YWNoKEF1dG9EZXRhY2hUeXBlLmZyb21FbnVt\nU2V0KEVudW1TZXQub2YoZmxhZykpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBzZXRBdXRvRGV0YWNoKEVudW1TZXQ8QXV0b0RldGFjaFR5cGU+IGZsYWdz\nKSB7CiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7CiAgICAgICAg\nX2Jyb2tlci5zZXRBdXRvRGV0YWNoKEF1dG9EZXRhY2hUeXBlLmZyb21FbnVt\nU2V0KGZsYWdzKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0QXV0b0Rl\ndGFjaChpbnQgZmxhZywgYm9vbGVhbiBvbikgewogICAgICAgIGFzc2VydE5v\ndENsb3NlSW52b2tlZCgpOwogICAgICAgIF9icm9rZXIuc2V0QXV0b0RldGFj\naChmbGFnLCBvbik7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gZ2V0RXZp\nY3RGcm9tU3RvcmVDYWNoZSgpIHsKICAgICAgICByZXR1cm4gX2Jyb2tlci5n\nZXRFdmljdEZyb21EYXRhQ2FjaGUoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBzZXRFdmljdEZyb21TdG9yZUNhY2hlKGJvb2xlYW4gZXZpY3QpIHsKICAg\nICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsKICAgICAgICBfYnJva2Vy\nLnNldEV2aWN0RnJvbURhdGFDYWNoZShldmljdCk7CiAgICB9CgogICAgcHVi\nbGljIGJvb2xlYW4gZ2V0UG9wdWxhdGVTdG9yZUNhY2hlKCkgewogICAgICAg\nIHJldHVybiBfYnJva2VyLmdldFBvcHVsYXRlRGF0YUNhY2hlKCk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgc2V0UG9wdWxhdGVTdG9yZUNhY2hlKGJvb2xl\nYW4gY2FjaGUpIHsKICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsK\nICAgICAgICBfYnJva2VyLnNldFBvcHVsYXRlRGF0YUNhY2hlKGNhY2hlKTsK\nICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBpc1RyYWNrQ2hhbmdlc0J5VHlw\nZSgpIHsKICAgICAgICByZXR1cm4gX2Jyb2tlci5pc1RyYWNrQ2hhbmdlc0J5\nVHlwZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldFRyYWNrQ2hhbmdl\nc0J5VHlwZShib29sZWFuIHRyYWNrQnlUeXBlKSB7CiAgICAgICAgYXNzZXJ0\nTm90Q2xvc2VJbnZva2VkKCk7CiAgICAgICAgX2Jyb2tlci5zZXRUcmFja0No\nYW5nZXNCeVR5cGUodHJhY2tCeVR5cGUpOwogICAgfQoKICAgIHB1YmxpYyBP\nYmplY3QgZ2V0VXNlck9iamVjdChPYmplY3Qga2V5KSB7CiAgICAgICAgcmV0\ndXJuIF9icm9rZXIuZ2V0VXNlck9iamVjdChrZXkpOwogICAgfQoKICAgIHB1\nYmxpYyBPYmplY3QgcHV0VXNlck9iamVjdChPYmplY3Qga2V5LCBPYmplY3Qg\ndmFsKSB7CiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7CiAgICAg\nICAgcmV0dXJuIF9icm9rZXIucHV0VXNlck9iamVjdChrZXksIHZhbCk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgYWRkVHJhbnNhY3Rpb25MaXN0ZW5lcihP\nYmplY3QgbGlzdGVuZXIpIHsKICAgICAgICBhc3NlcnROb3RDbG9zZUludm9r\nZWQoKTsKICAgICAgICBfYnJva2VyLmFkZFRyYW5zYWN0aW9uTGlzdGVuZXIo\nbGlzdGVuZXIpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHJlbW92ZVRyYW5z\nYWN0aW9uTGlzdGVuZXIoT2JqZWN0IGxpc3RlbmVyKSB7CiAgICAgICAgYXNz\nZXJ0Tm90Q2xvc2VJbnZva2VkKCk7CiAgICAgICAgX2Jyb2tlci5yZW1vdmVU\ncmFuc2FjdGlvbkxpc3RlbmVyKGxpc3RlbmVyKTsKICAgIH0KCiAgICBwdWJs\naWMgRW51bVNldDxDYWxsYmFja01vZGU+IGdldFRyYW5zYWN0aW9uTGlzdGVu\nZXJDYWxsYmFja01vZGUoKSB7CiAgICAgICAgcmV0dXJuIENhbGxiYWNrTW9k\nZS50b0VudW1TZXQoCiAgICAgICAgICAgIF9icm9rZXIuZ2V0VHJhbnNhY3Rp\nb25MaXN0ZW5lckNhbGxiYWNrTW9kZSgpKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBzZXRUcmFuc2FjdGlvbkxpc3RlbmVyQ2FsbGJhY2tNb2RlKENhbGxi\nYWNrTW9kZSBtb2RlKSB7CiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2Vk\nKCk7CiAgICAgICAgX2Jyb2tlci5zZXRUcmFuc2FjdGlvbkxpc3RlbmVyQ2Fs\nbGJhY2tNb2RlKAogICAgICAgICAgICBDYWxsYmFja01vZGUuZnJvbUVudW1T\nZXQoRW51bVNldC5vZihtb2RlKSkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHNldFRyYW5zYWN0aW9uTGlzdGVuZXJDYWxsYmFja01vZGUoRW51bVNldDxD\nYWxsYmFja01vZGU+IG1vZGVzKXsKICAgICAgICBhc3NlcnROb3RDbG9zZUlu\ndm9rZWQoKTsKICAgICAgICBfYnJva2VyLnNldFRyYW5zYWN0aW9uTGlzdGVu\nZXJDYWxsYmFja01vZGUoCiAgICAgICAgICAgIENhbGxiYWNrTW9kZS5mcm9t\nRW51bVNldChtb2RlcykpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGFkZExp\nZmVjeWNsZUxpc3RlbmVyKE9iamVjdCBsaXN0ZW5lciwgQ2xhc3MuLi4gY2xh\nc3NlcykgewogICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOwogICAg\nICAgIF9icm9rZXIuYWRkTGlmZWN5Y2xlTGlzdGVuZXIobGlzdGVuZXIsIGNs\nYXNzZXMpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHJlbW92ZUxpZmVjeWNs\nZUxpc3RlbmVyKE9iamVjdCBsaXN0ZW5lcikgewogICAgICAgIGFzc2VydE5v\ndENsb3NlSW52b2tlZCgpOwogICAgICAgIF9icm9rZXIucmVtb3ZlTGlmZWN5\nY2xlTGlzdGVuZXIobGlzdGVuZXIpOwogICAgfQoKICAgIHB1YmxpYyBFbnVt\nU2V0PENhbGxiYWNrTW9kZT4gZ2V0TGlmZWN5Y2xlTGlzdGVuZXJDYWxsYmFj\na01vZGUoKSB7CiAgICAgICAgcmV0dXJuIENhbGxiYWNrTW9kZS50b0VudW1T\nZXQoCiAgICAgICAgICAgIF9icm9rZXIuZ2V0TGlmZWN5Y2xlTGlzdGVuZXJD\nYWxsYmFja01vZGUoKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0TGlm\nZWN5Y2xlTGlzdGVuZXJDYWxsYmFja01vZGUoQ2FsbGJhY2tNb2RlIG1vZGUp\nIHsKICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsKICAgICAgICBf\nYnJva2VyLnNldExpZmVjeWNsZUxpc3RlbmVyQ2FsbGJhY2tNb2RlKAogICAg\nICAgICAgICBDYWxsYmFja01vZGUuZnJvbUVudW1TZXQoRW51bVNldC5vZiht\nb2RlKSkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldExpZmVjeWNsZUxp\nc3RlbmVyQ2FsbGJhY2tNb2RlKEVudW1TZXQ8Q2FsbGJhY2tNb2RlPiBtb2Rl\ncykgewogICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOwogICAgICAg\nIF9icm9rZXIuc2V0TGlmZWN5Y2xlTGlzdGVuZXJDYWxsYmFja01vZGUoCiAg\nICAgICAgICAgIENhbGxiYWNrTW9kZS5mcm9tRW51bVNldChtb2RlcykpOwog\nICAgfQoKICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJ1bmNoZWNrZWQiKQogICAg\ncHVibGljIDxUPiBUIGdldFJlZmVyZW5jZShDbGFzczxUPiBjbHMsIE9iamVj\ndCBvaWQpIHsKICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsKICAg\nICAgICBvaWQgPSBfYnJva2VyLm5ld09iamVjdElkKGNscywgb2lkKTsKICAg\nICAgICByZXR1cm4gKFQpIF9icm9rZXIuZmluZChvaWQsIGZhbHNlLCB0aGlz\nKTsKICAgIH0KCiAgICBAU3VwcHJlc3NXYXJuaW5ncygidW5jaGVja2VkIikK\nICAgIHB1YmxpYyA8VD4gVCBmaW5kKENsYXNzPFQ+IGNscywgT2JqZWN0IG9p\nZCkgewogICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOwogICAgICAg\nIG9pZCA9IF9icm9rZXIubmV3T2JqZWN0SWQoY2xzLCBvaWQpOwogICAgICAg\nIHJldHVybiAoVCkgX2Jyb2tlci5maW5kKG9pZCwgdHJ1ZSwgdGhpcyk7CiAg\nICB9CgogICAgQFN1cHByZXNzV2FybmluZ3MoInVuY2hlY2tlZCIpCiAgICBw\ndWJsaWMgPFQ+IFRbXSBmaW5kQWxsKENsYXNzPFQ+IGNscywgT2JqZWN0Li4u\nIG9pZHMpIHsKICAgICAgICBpZiAob2lkcy5sZW5ndGggPT0gMCkKICAgICAg\nICAgICAgcmV0dXJuIChUW10pIEFycmF5Lm5ld0luc3RhbmNlKGNscywgMCk7\nCiAgICAgICAgQ29sbGVjdGlvbjxUPiByZXQgPSBmaW5kQWxsKGNscywgQXJy\nYXlzLmFzTGlzdChvaWRzKSk7CiAgICAgICAgcmV0dXJuIHJldC50b0FycmF5\nKChUW10pIEFycmF5Lm5ld0luc3RhbmNlKGNscywgcmV0LnNpemUoKSkpOwog\nICAgfQoKICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJ1bmNoZWNrZWQiKQogICAg\ncHVibGljIDxUPiBDb2xsZWN0aW9uPFQ+IGZpbmRBbGwoZmluYWwgQ2xhc3M8\nVD4gY2xzLCBDb2xsZWN0aW9uIG9pZHMpIHsKICAgICAgICBhc3NlcnROb3RD\nbG9zZUludm9rZWQoKTsKICAgICAgICBPYmplY3RbXSBvYmpzID0gX2Jyb2tl\nci5maW5kQWxsKG9pZHMsIHRydWUsIG5ldyBGaW5kQ2FsbGJhY2tzKCkgewog\nICAgICAgICAgICBwdWJsaWMgT2JqZWN0IHByb2Nlc3NBcmd1bWVudChPYmpl\nY3Qgb2lkKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX2Jyb2tlci5uZXdP\nYmplY3RJZChjbHMsIG9pZCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAg\nIHB1YmxpYyBPYmplY3QgcHJvY2Vzc1JldHVybihPYmplY3Qgb2lkLCBPcGVu\nSlBBU3RhdGVNYW5hZ2VyIHNtKSB7CiAgICAgICAgICAgICAgICByZXR1cm4g\nRW50aXR5TWFuYWdlckltcGwudGhpcy5wcm9jZXNzUmV0dXJuKG9pZCwgc20p\nOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIChD\nb2xsZWN0aW9uPFQ+KSBBcnJheXMuYXNMaXN0KG9ianMpOwogICAgfQoKICAg\nIEBTdXBwcmVzc1dhcm5pbmdzKCJ1bmNoZWNrZWQiKQogICAgcHVibGljIDxU\nPiBUIGZpbmRDYWNoZWQoQ2xhc3M8VD4gY2xzLCBPYmplY3Qgb2lkKSB7CiAg\nICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7CiAgICAgICAgcmV0dXJu\nIChUKSBfYnJva2VyLmZpbmRDYWNoZWQoX2Jyb2tlci5uZXdPYmplY3RJZChj\nbHMsIG9pZCksIHRoaXMpOwogICAgfQoKICAgIHB1YmxpYyBDbGFzcyBnZXRP\nYmplY3RJZENsYXNzKENsYXNzIGNscykgewogICAgICAgIGFzc2VydE5vdENs\nb3NlSW52b2tlZCgpOwogICAgICAgIGlmIChjbHMgPT0gbnVsbCkKICAgICAg\nICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgcmV0dXJuIEpQQUZhY2FkZUhl\nbHBlci5mcm9tT3BlbkpQQU9iamVjdElkQ2xhc3MKICAgICAgICAgICAgICAg\nIChfYnJva2VyLmdldE9iamVjdElkVHlwZShjbHMpKTsKICAgIH0KCiAgICBw\ndWJsaWMgT3BlbkpQQUVudGl0eVRyYW5zYWN0aW9uIGdldFRyYW5zYWN0aW9u\nKCkgewogICAgICAgIGlmIChfYnJva2VyLmlzTWFuYWdlZCgpKQogICAgICAg\nICAgICB0aHJvdyBuZXcgSW52YWxpZFN0YXRlRXhjZXB0aW9uKF9sb2MuZ2V0\nKCJnZXQtbWFuYWdlZC10cmFucyIpLAogICAgICAgICAgICAgICAgbnVsbCwg\nbnVsbCwgZmFsc2UpOwogICAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIGpvaW5UcmFuc2FjdGlvbigpIHsKICAgICAgICBhc3Nl\ncnROb3RDbG9zZUludm9rZWQoKTsKICAgICAgICBpZiAoIV9icm9rZXIuc3lu\nY1dpdGhNYW5hZ2VkVHJhbnNhY3Rpb24oKSkKICAgICAgICAgICAgdGhyb3cg\nbmV3IFRyYW5zYWN0aW9uUmVxdWlyZWRFeGNlcHRpb24oX2xvYy5nZXQKICAg\nICAgICAgICAgICAgICgibm8tbWFuYWdlZC10cmFucyIpLCBudWxsLCBudWxs\nLCBmYWxzZSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgYmVnaW4oKSB7CiAg\nICAgICAgX2Jyb2tlci5iZWdpbigpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIGNvbW1pdCgpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBfYnJva2Vy\nLmNvbW1pdCgpOwogICAgICAgIH0gY2F0Y2ggKFJvbGxiYWNrRXhjZXB0aW9u\nIGUpIHsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICB9IGNhdGNoIChJ\nbGxlZ2FsU3RhdGVFeGNlcHRpb24gZSkgewogICAgICAgICAgICB0aHJvdyBl\nOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAg\nIC8vIFJvbGxiYWNrRXhjZXB0aW9ucyBhcmUgc3BlY2lhbCBhbmQgYXJlbid0\nIGhhbmRsZWQgYnkgdGhlCiAgICAgICAgICAgIC8vIG5vcm1hbCBleGNlcHRp\nb24gdHJhbnNsYXRvciwgc2luY2UgdGhlIHNwZWMgc2F5cyB0aGV5CiAgICAg\nICAgICAgIC8vIHNob3VsZCBiZSB0aHJvd24gd2hlbmV2ZXIgdGhlIGNvbW1p\ndCBmYWlscyBmb3IgYW55IHJlYXNvbiBhdAogICAgICAgICAgICAvLyBhbGws\nIHdoZXJhcyB0aGUgZXhjZXB0aW9uIHRyYW5zbGF0b3IgaGFuZGxlcyBleGNl\ncHRpb25zIHRoYXQKICAgICAgICAgICAgLy8gYXJlIGNhdXNlZCBmb3Igc3Bl\nY2lmaWMgcmVhc29ucwogICAgICAgICAgICB0aHJvdyBuZXcgUm9sbGJhY2tF\neGNlcHRpb24oZSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHJvbGxiYWNrKCkgewogICAgICAgIF9icm9rZXIucm9sbGJhY2soKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBjb21taXRBbmRSZXN1bWUoKSB7CiAgICAg\nICAgX2Jyb2tlci5jb21taXRBbmRSZXN1bWUoKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCByb2xsYmFja0FuZFJlc3VtZSgpIHsKICAgICAgICBfYnJva2Vy\nLnJvbGxiYWNrQW5kUmVzdW1lKCk7CiAgICB9CgogICAgcHVibGljIFRocm93\nYWJsZSBnZXRSb2xsYmFja0NhdXNlKCkgewogICAgICAgIGlmICghaXNBY3Rp\ndmUoKSkKICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2Vw\ndGlvbihfbG9jLmdldCgibm8tdHJhbnNhY3Rpb24iKQogICAgICAgICAgICAg\nICAgLmdldE1lc3NhZ2UoKSk7CgogICAgICAgIHJldHVybiBfYnJva2VyLmdl\ndFJvbGxiYWNrQ2F1c2UoKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBn\nZXRSb2xsYmFja09ubHkoKSB7CiAgICAgICAgaWYgKCFpc0FjdGl2ZSgpKQog\nICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKF9s\nb2MuZ2V0KCJuby10cmFuc2FjdGlvbiIpCiAgICAgICAgICAgICAgICAuZ2V0\nTWVzc2FnZSgpKTsKCiAgICAgICAgcmV0dXJuIF9icm9rZXIuZ2V0Um9sbGJh\nY2tPbmx5KCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0Um9sbGJhY2tP\nbmx5KCkgewogICAgICAgIF9icm9rZXIuc2V0Um9sbGJhY2tPbmx5KCk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgc2V0Um9sbGJhY2tPbmx5KFRocm93YWJs\nZSBjYXVzZSkgewogICAgICAgIF9icm9rZXIuc2V0Um9sbGJhY2tPbmx5KGNh\ndXNlKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRTYXZlcG9pbnQoU3Ry\naW5nIG5hbWUpIHsKICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsK\nICAgICAgICBfYnJva2VyLnNldFNhdmVwb2ludChuYW1lKTsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCByb2xsYmFja1RvU2F2ZXBvaW50KCkgewogICAgICAg\nIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOwogICAgICAgIF9icm9rZXIucm9s\nbGJhY2tUb1NhdmVwb2ludCgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHJv\nbGxiYWNrVG9TYXZlcG9pbnQoU3RyaW5nIG5hbWUpIHsKICAgICAgICBhc3Nl\ncnROb3RDbG9zZUludm9rZWQoKTsKICAgICAgICBfYnJva2VyLnJvbGxiYWNr\nVG9TYXZlcG9pbnQobmFtZSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgcmVs\nZWFzZVNhdmVwb2ludCgpIHsKICAgICAgICBhc3NlcnROb3RDbG9zZUludm9r\nZWQoKTsKICAgICAgICBfYnJva2VyLnJlbGVhc2VTYXZlcG9pbnQoKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCByZWxlYXNlU2F2ZXBvaW50KFN0cmluZyBu\nYW1lKSB7CiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7CiAgICAg\nICAgX2Jyb2tlci5yZWxlYXNlU2F2ZXBvaW50KG5hbWUpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIGZsdXNoKCkgewogICAgICAgIGFzc2VydE5vdENsb3Nl\nSW52b2tlZCgpOwogICAgICAgIF9icm9rZXIuYXNzZXJ0T3BlbigpOwogICAg\nICAgIF9icm9rZXIuYXNzZXJ0QWN0aXZlVHJhbnNhY3Rpb24oKTsKICAgICAg\nICBfYnJva2VyLmZsdXNoKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgcHJl\nRmx1c2goKSB7CiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7CiAg\nICAgICAgX2Jyb2tlci5wcmVGbHVzaCgpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHZhbGlkYXRlQ2hhbmdlcygpIHsKICAgICAgICBhc3NlcnROb3RDbG9z\nZUludm9rZWQoKTsKICAgICAgICBfYnJva2VyLnZhbGlkYXRlQ2hhbmdlcygp\nOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGlzQWN0aXZlKCkgewogICAg\nICAgIHJldHVybiBpc09wZW4oKSAmJiBfYnJva2VyLmlzQWN0aXZlKCk7CiAg\nICB9CgogICAgcHVibGljIGJvb2xlYW4gaXNTdG9yZUFjdGl2ZSgpIHsKICAg\nICAgICByZXR1cm4gX2Jyb2tlci5pc1N0b3JlQWN0aXZlKCk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgYmVnaW5TdG9yZSgpIHsKICAgICAgICBfYnJva2Vy\nLmJlZ2luU3RvcmUoKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBjb250\nYWlucyhPYmplY3QgZW50aXR5KSB7CiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJ\nbnZva2VkKCk7CiAgICAgICAgaWYgKGVudGl0eSA9PSBudWxsKQogICAgICAg\nICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgT3BlbkpQQVN0YXRlTWFuYWdl\nciBzbSA9IF9icm9rZXIuZ2V0U3RhdGVNYW5hZ2VyKGVudGl0eSk7CiAgICAg\nICAgaWYgKHNtID09IG51bGwKICAgICAgICAgICAgJiYgIUltcGxIZWxwZXIu\naXNNYW5hZ2VkVHlwZShnZXRDb25maWd1cmF0aW9uKCksIGVudGl0eS5nZXRD\nbGFzcygpKSkKICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0\naW9uKF9sb2MuZ2V0KCJub3QtZW50aXR5IiwKICAgICAgICAgICAgICAgIGVu\ndGl0eS5nZXRDbGFzcygpKSwgbnVsbCwgbnVsbCwgdHJ1ZSk7CiAgICAgICAg\ncmV0dXJuIHNtICE9IG51bGwgJiYgIXNtLmlzRGVsZXRlZCgpOwogICAgfQoK\nICAgIHB1YmxpYyBib29sZWFuIGNvbnRhaW5zQWxsKE9iamVjdC4uLiBlbnRp\ndGllcykgewogICAgICAgIGZvciAoT2JqZWN0IGVudGl0eSA6IGVudGl0aWVz\nKQogICAgICAgICAgICBpZiAoIWNvbnRhaW5zKGVudGl0eSkpCiAgICAgICAg\nICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgcmV0dXJuIHRydWU7CiAg\nICB9CgogICAgcHVibGljIGJvb2xlYW4gY29udGFpbnNBbGwoQ29sbGVjdGlv\nbiBlbnRpdGllcykgewogICAgICAgIGZvciAoT2JqZWN0IGVudGl0eSA6IGVu\ndGl0aWVzKQogICAgICAgICAgICBpZiAoIWNvbnRhaW5zKGVudGl0eSkpCiAg\nICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgcmV0dXJuIHRy\ndWU7CiAgICB9CgogICAgcHVibGljIHZvaWQgcGVyc2lzdChPYmplY3QgZW50\naXR5KSB7CiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7CiAgICAg\nICAgX2Jyb2tlci5wZXJzaXN0KGVudGl0eSwgdGhpcyk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgcGVyc2lzdEFsbChPYmplY3QuLi4gZW50aXRpZXMpIHsK\nICAgICAgICBwZXJzaXN0QWxsKEFycmF5cy5hc0xpc3QoZW50aXRpZXMpKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCBwZXJzaXN0QWxsKENvbGxlY3Rpb24g\nZW50aXRpZXMpIHsKICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsK\nICAgICAgICBfYnJva2VyLnBlcnNpc3RBbGwoZW50aXRpZXMsIHRoaXMpOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHJlbW92ZShPYmplY3QgZW50aXR5KSB7\nCiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7CiAgICAgICAgX2Jy\nb2tlci5kZWxldGUoZW50aXR5LCB0aGlzKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCByZW1vdmVBbGwoT2JqZWN0Li4uIGVudGl0aWVzKSB7CiAgICAgICAg\ncmVtb3ZlQWxsKEFycmF5cy5hc0xpc3QoZW50aXRpZXMpKTsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCByZW1vdmVBbGwoQ29sbGVjdGlvbiBlbnRpdGllcykg\newogICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOwogICAgICAgIF9i\ncm9rZXIuZGVsZXRlQWxsKGVudGl0aWVzLCB0aGlzKTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCByZWxlYXNlKE9iamVjdCBlbnRpdHkpIHsKICAgICAgICBh\nc3NlcnROb3RDbG9zZUludm9rZWQoKTsKICAgICAgICBfYnJva2VyLnJlbGVh\nc2UoZW50aXR5LCB0aGlzKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCByZWxl\nYXNlQWxsKENvbGxlY3Rpb24gZW50aXRpZXMpIHsKICAgICAgICBhc3NlcnRO\nb3RDbG9zZUludm9rZWQoKTsKICAgICAgICBfYnJva2VyLnJlbGVhc2VBbGwo\nZW50aXRpZXMsIHRoaXMpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHJlbGVh\nc2VBbGwoT2JqZWN0Li4uIGVudGl0aWVzKSB7CiAgICAgICAgcmVsZWFzZUFs\nbChBcnJheXMuYXNMaXN0KGVudGl0aWVzKSk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgcmVmcmVzaChPYmplY3QgZW50aXR5KSB7CiAgICAgICAgYXNzZXJ0\nTm90Q2xvc2VJbnZva2VkKCk7CiAgICAgICAgX2Jyb2tlci5hc3NlcnRXcml0\nZU9wZXJhdGlvbigpOwogICAgICAgIF9icm9rZXIucmVmcmVzaChlbnRpdHks\nIHRoaXMpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHJlZnJlc2hBbGwoKSB7\nCiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7CiAgICAgICAgX2Jy\nb2tlci5hc3NlcnRXcml0ZU9wZXJhdGlvbigpOwogICAgICAgIF9icm9rZXIu\ncmVmcmVzaEFsbChfYnJva2VyLmdldFRyYW5zYWN0aW9uYWxPYmplY3RzKCks\nIHRoaXMpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHJlZnJlc2hBbGwoQ29s\nbGVjdGlvbiBlbnRpdGllcykgewogICAgICAgIGFzc2VydE5vdENsb3NlSW52\nb2tlZCgpOwogICAgICAgIF9icm9rZXIuYXNzZXJ0V3JpdGVPcGVyYXRpb24o\nKTsKICAgICAgICBfYnJva2VyLnJlZnJlc2hBbGwoZW50aXRpZXMsIHRoaXMp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHJlZnJlc2hBbGwoT2JqZWN0Li4u\nIGVudGl0aWVzKSB7CiAgICAgICAgcmVmcmVzaEFsbChBcnJheXMuYXNMaXN0\nKGVudGl0aWVzKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgcmV0cmlldmUo\nT2JqZWN0IGVudGl0eSkgewogICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tl\nZCgpOwogICAgICAgIF9icm9rZXIucmV0cmlldmUoZW50aXR5LCB0cnVlLCB0\naGlzKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCByZXRyaWV2ZUFsbChDb2xs\nZWN0aW9uIGVudGl0aWVzKSB7CiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZv\na2VkKCk7CiAgICAgICAgX2Jyb2tlci5yZXRyaWV2ZUFsbChlbnRpdGllcywg\ndHJ1ZSwgdGhpcyk7CiAgICB9CgogICAgcHVibGljIHZvaWQgcmV0cmlldmVB\nbGwoT2JqZWN0Li4uIGVudGl0aWVzKSB7CiAgICAgICAgcmV0cmlldmVBbGwo\nQXJyYXlzLmFzTGlzdChlbnRpdGllcykpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIGV2aWN0KE9iamVjdCBlbnRpdHkpIHsKICAgICAgICBhc3NlcnROb3RD\nbG9zZUludm9rZWQoKTsKICAgICAgICBfYnJva2VyLmV2aWN0KGVudGl0eSwg\ndGhpcyk7CiAgICB9CgogICAgcHVibGljIHZvaWQgZXZpY3RBbGwoQ29sbGVj\ndGlvbiBlbnRpdGllcykgewogICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tl\nZCgpOwogICAgICAgIF9icm9rZXIuZXZpY3RBbGwoZW50aXRpZXMsIHRoaXMp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGV2aWN0QWxsKE9iamVjdC4uLiBl\nbnRpdGllcykgewogICAgICAgIGV2aWN0QWxsKEFycmF5cy5hc0xpc3QoZW50\naXRpZXMpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBldmljdEFsbCgpIHsK\nICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsKICAgICAgICBfYnJv\na2VyLmV2aWN0QWxsKHRoaXMpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGV2\naWN0QWxsKENsYXNzIGNscykgewogICAgICAgIGFzc2VydE5vdENsb3NlSW52\nb2tlZCgpOwogICAgICAgIF9icm9rZXIuZXZpY3RBbGwoX2Jyb2tlci5uZXdF\neHRlbnQoY2xzLCB0cnVlKSwgdGhpcyk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgZXZpY3RBbGwoRXh0ZW50IGV4dGVudCkgewogICAgICAgIGFzc2VydE5v\ndENsb3NlSW52b2tlZCgpOwogICAgICAgIF9icm9rZXIuZXZpY3RBbGwoKChF\neHRlbnRJbXBsKSBleHRlbnQpLmdldERlbGVnYXRlKCksIHRoaXMpOwogICAg\nfQoKICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJ1bmNoZWNrZWQiKQogICAgcHVi\nbGljIDxUPiBUIGRldGFjaChUIGVudGl0eSkgewogICAgICAgIGFzc2VydE5v\ndENsb3NlSW52b2tlZCgpOwogICAgICAgIHJldHVybiAoVCkgX2Jyb2tlci5k\nZXRhY2goZW50aXR5LCB0aGlzKTsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0\nW10gZGV0YWNoQWxsKE9iamVjdC4uLiBlbnRpdGllcykgewogICAgICAgIGFz\nc2VydE5vdENsb3NlSW52b2tlZCgpOwogICAgICAgIHJldHVybiBfYnJva2Vy\nLmRldGFjaEFsbChBcnJheXMuYXNMaXN0KGVudGl0aWVzKSwgdGhpcyk7CiAg\nICB9CgogICAgcHVibGljIENvbGxlY3Rpb24gZGV0YWNoQWxsKENvbGxlY3Rp\nb24gZW50aXRpZXMpIHsKICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQo\nKTsKICAgICAgICByZXR1cm4gQXJyYXlzLmFzTGlzdChfYnJva2VyLmRldGFj\naEFsbChlbnRpdGllcywgdGhpcykpOwogICAgfQoKICAgIEBTdXBwcmVzc1dh\ncm5pbmdzKCJ1bmNoZWNrZWQiKQogICAgcHVibGljIDxUPiBUIG1lcmdlKFQg\nZW50aXR5KSB7CiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7CiAg\nICAgICAgcmV0dXJuIChUKSBfYnJva2VyLmF0dGFjaChlbnRpdHksIHRydWUs\nIHRoaXMpOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3RbXSBtZXJnZUFsbChP\nYmplY3QuLi4gZW50aXRpZXMpIHsKICAgICAgICBpZiAoZW50aXRpZXMubGVu\nZ3RoID09IDApCiAgICAgICAgICAgIHJldHVybiBFTVBUWV9PQkpFQ1RTOwog\nICAgICAgIHJldHVybiBtZXJnZUFsbChBcnJheXMuYXNMaXN0KGVudGl0aWVz\nKSkudG9BcnJheSgpOwogICAgfQoKICAgIHB1YmxpYyBDb2xsZWN0aW9uIG1l\ncmdlQWxsKENvbGxlY3Rpb24gZW50aXRpZXMpIHsKICAgICAgICBhc3NlcnRO\nb3RDbG9zZUludm9rZWQoKTsKICAgICAgICByZXR1cm4gQXJyYXlzLmFzTGlz\ndChfYnJva2VyLmF0dGFjaEFsbChlbnRpdGllcywgdHJ1ZSwgdGhpcykpOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHRyYW5zYWN0aW9uYWwoT2JqZWN0IGVu\ndGl0eSwgYm9vbGVhbiB1cGRhdGVWZXJzaW9uKSB7CiAgICAgICAgYXNzZXJ0\nTm90Q2xvc2VJbnZva2VkKCk7CiAgICAgICAgX2Jyb2tlci50cmFuc2FjdGlv\nbmFsKGVudGl0eSwgdXBkYXRlVmVyc2lvbiwgdGhpcyk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgdHJhbnNhY3Rpb25hbEFsbChDb2xsZWN0aW9uIG9ianMs\nIGJvb2xlYW4gdXBkYXRlVmVyc2lvbikgewogICAgICAgIGFzc2VydE5vdENs\nb3NlSW52b2tlZCgpOwogICAgICAgIF9icm9rZXIudHJhbnNhY3Rpb25hbEFs\nbChvYmpzLCB1cGRhdGVWZXJzaW9uLCB0aGlzKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCB0cmFuc2FjdGlvbmFsQWxsKE9iamVjdFtdIG9ianMsIGJvb2xl\nYW4gdXBkYXRlVmVyc2lvbikgewogICAgICAgIGFzc2VydE5vdENsb3NlSW52\nb2tlZCgpOwogICAgICAgIF9icm9rZXIudHJhbnNhY3Rpb25hbEFsbChBcnJh\neXMuYXNMaXN0KG9ianMpLCB1cGRhdGVWZXJzaW9uLCB0aGlzKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBub250cmFuc2FjdGlvbmFsKE9iamVjdCBlbnRp\ndHkpIHsKICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsKICAgICAg\nICBfYnJva2VyLm5vbnRyYW5zYWN0aW9uYWwoZW50aXR5LCB0aGlzKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBub250cmFuc2FjdGlvbmFsQWxsKENvbGxl\nY3Rpb24gb2JqcykgewogICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgp\nOwogICAgICAgIF9icm9rZXIubm9udHJhbnNhY3Rpb25hbEFsbChvYmpzLCB0\naGlzKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBub250cmFuc2FjdGlvbmFs\nQWxsKE9iamVjdFtdIG9ianMpIHsKICAgICAgICBhc3NlcnROb3RDbG9zZUlu\ndm9rZWQoKTsKICAgICAgICBfYnJva2VyLm5vbnRyYW5zYWN0aW9uYWxBbGwo\nQXJyYXlzLmFzTGlzdChvYmpzKSwgdGhpcyk7CiAgICB9CgogICAgcHVibGlj\nIEdlbmVyYXRvciBnZXROYW1lZEdlbmVyYXRvcihTdHJpbmcgbmFtZSkgewog\nICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOwogICAgICAgIHRyeSB7\nCiAgICAgICAgICAgIFNlcXVlbmNlTWV0YURhdGEgbWV0YSA9IF9icm9rZXIu\nZ2V0Q29uZmlndXJhdGlvbigpLgogICAgICAgICAgICAgICAgZ2V0TWV0YURh\ndGFSZXBvc2l0b3J5SW5zdGFuY2UoKS5nZXRTZXF1ZW5jZU1ldGFEYXRhKG5h\nbWUsCiAgICAgICAgICAgICAgICBfYnJva2VyLmdldENsYXNzTG9hZGVyKCks\nIHRydWUpOwogICAgICAgICAgICBTZXEgc2VxID0gbWV0YS5nZXRJbnN0YW5j\nZShfYnJva2VyLmdldENsYXNzTG9hZGVyKCkpOwogICAgICAgICAgICByZXR1\ncm4gbmV3IEdlbmVyYXRvckltcGwoc2VxLCBuYW1lLCBfYnJva2VyLCBudWxs\nKTsKICAgICAgICB9IGNhdGNoIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7CiAg\nICAgICAgICAgIHRocm93IFBlcnNpc3RlbmNlRXhjZXB0aW9ucy50b1BlcnNp\nc3RlbmNlRXhjZXB0aW9uKHJlKTsKICAgICAgICB9CiAgICB9CgogICAgcHVi\nbGljIEdlbmVyYXRvciBnZXRJZEdlbmVyYXRvcihDbGFzcyBmb3JDbGFzcykg\newogICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOwogICAgICAgIHRy\neSB7CiAgICAgICAgICAgIENsYXNzTWV0YURhdGEgbWV0YSA9IF9icm9rZXIu\nZ2V0Q29uZmlndXJhdGlvbigpLgogICAgICAgICAgICAgICAgZ2V0TWV0YURh\ndGFSZXBvc2l0b3J5SW5zdGFuY2UoKS5nZXRNZXRhRGF0YShmb3JDbGFzcywK\nICAgICAgICAgICAgICAgIF9icm9rZXIuZ2V0Q2xhc3NMb2FkZXIoKSwgdHJ1\nZSk7CiAgICAgICAgICAgIFNlcSBzZXEgPSBfYnJva2VyLmdldElkZW50aXR5\nU2VxdWVuY2UobWV0YSk7CiAgICAgICAgICAgIHJldHVybiAoc2VxID09IG51\nbGwpID8gbnVsbCA6IG5ldyBHZW5lcmF0b3JJbXBsKHNlcSwgbnVsbCwgX2Jy\nb2tlciwKICAgICAgICAgICAgICAgIG1ldGEpOwogICAgICAgIH0gY2F0Y2gg\nKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIHRocm93IFBlcnNpc3RlbmNl\nRXhjZXB0aW9ucy50b1BlcnNpc3RlbmNlRXhjZXB0aW9uKGUpOwogICAgICAg\nIH0KICAgIH0KCiAgICBwdWJsaWMgR2VuZXJhdG9yIGdldEZpZWxkR2VuZXJh\ndG9yKENsYXNzIGZvckNsYXNzLCBTdHJpbmcgZmllbGROYW1lKSB7CiAgICAg\nICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7CiAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgQ2xhc3NNZXRhRGF0YSBtZXRhID0gX2Jyb2tlci5nZXRDb25m\naWd1cmF0aW9uKCkuCiAgICAgICAgICAgICAgICBnZXRNZXRhRGF0YVJlcG9z\naXRvcnlJbnN0YW5jZSgpLmdldE1ldGFEYXRhKGZvckNsYXNzLAogICAgICAg\nICAgICAgICAgX2Jyb2tlci5nZXRDbGFzc0xvYWRlcigpLCB0cnVlKTsKICAg\nICAgICAgICAgRmllbGRNZXRhRGF0YSBmbWQgPSBtZXRhLmdldEZpZWxkKGZp\nZWxkTmFtZSk7CiAgICAgICAgICAgIGlmIChmbWQgPT0gbnVsbCkKICAgICAg\nICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlvbihfbG9jLmdl\ndCgibm8tbmFtZWQtZmllbGQiLAogICAgICAgICAgICAgICAgICAgIGZvckNs\nYXNzLCBmaWVsZE5hbWUpLCBudWxsLCBudWxsLCBmYWxzZSk7CgogICAgICAg\nICAgICBTZXEgc2VxID0gX2Jyb2tlci5nZXRWYWx1ZVNlcXVlbmNlKGZtZCk7\nCiAgICAgICAgICAgIHJldHVybiAoc2VxID09IG51bGwpID8gbnVsbCA6IG5l\ndyBHZW5lcmF0b3JJbXBsKHNlcSwgbnVsbCwgX2Jyb2tlciwKICAgICAgICAg\nICAgICAgIG1ldGEpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7\nCiAgICAgICAgICAgIHRocm93IFBlcnNpc3RlbmNlRXhjZXB0aW9ucy50b1Bl\ncnNpc3RlbmNlRXhjZXB0aW9uKGUpOwogICAgICAgIH0KICAgIH0KCiAgICBw\ndWJsaWMgPFQ+IEV4dGVudDxUPiBjcmVhdGVFeHRlbnQoQ2xhc3M8VD4gY2xz\nLCBib29sZWFuIHN1YmNsYXNzZXMpIHsKICAgICAgICBhc3NlcnROb3RDbG9z\nZUludm9rZWQoKTsKICAgICAgICByZXR1cm4gbmV3IEV4dGVudEltcGw8VD4o\ndGhpcywgX2Jyb2tlci5uZXdFeHRlbnQoY2xzLCBzdWJjbGFzc2VzKSk7CiAg\nICB9CgogICAgcHVibGljIE9wZW5KUEFRdWVyeSBjcmVhdGVRdWVyeShTdHJp\nbmcgcXVlcnkpIHsKICAgICAgICByZXR1cm4gY3JlYXRlUXVlcnkoSlBRTFBh\ncnNlci5MQU5HX0pQUUwsIHF1ZXJ5KTsKICAgIH0KCiAgICBwdWJsaWMgT3Bl\nbkpQQVF1ZXJ5IGNyZWF0ZVF1ZXJ5KFN0cmluZyBsYW5ndWFnZSwgU3RyaW5n\nIHF1ZXJ5KSB7CiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7CiAg\nICAgICAgcmV0dXJuIG5ldyBRdWVyeUltcGwodGhpcywgX2Jyb2tlci5uZXdR\ndWVyeShsYW5ndWFnZSwgcXVlcnkpKTsKICAgIH0KCiAgICBwdWJsaWMgT3Bl\nbkpQQVF1ZXJ5IGNyZWF0ZVF1ZXJ5KFF1ZXJ5IHF1ZXJ5KSB7CiAgICAgICAg\naWYgKHF1ZXJ5ID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBjcmVhdGVR\ndWVyeSgoU3RyaW5nKSBudWxsKTsKICAgICAgICBhc3NlcnROb3RDbG9zZUlu\ndm9rZWQoKTsKICAgICAgICBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlF1\nZXJ5IHEgPSAoKFF1ZXJ5SW1wbCkgcXVlcnkpLmdldERlbGVnYXRlKCk7CiAg\nICAgICAgcmV0dXJuIG5ldyBRdWVyeUltcGwodGhpcywgX2Jyb2tlci5uZXdR\ndWVyeShxLmdldExhbmd1YWdlKCksCiAgICAgICAgICAgIHEpKTsKICAgIH0K\nCiAgICBwdWJsaWMgT3BlbkpQQVF1ZXJ5IGNyZWF0ZU5hbWVkUXVlcnkoU3Ry\naW5nIG5hbWUpIHsKICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsK\nICAgICAgICBfYnJva2VyLmFzc2VydE9wZW4oKTsKICAgICAgICB0cnkgewog\nICAgICAgICAgICBRdWVyeU1ldGFEYXRhIG1ldGEgPSBfYnJva2VyLmdldENv\nbmZpZ3VyYXRpb24oKS4KICAgICAgICAgICAgICAgIGdldE1ldGFEYXRhUmVw\nb3NpdG9yeUluc3RhbmNlKCkuZ2V0UXVlcnlNZXRhRGF0YShudWxsLCBuYW1l\nLAogICAgICAgICAgICAgICAgX2Jyb2tlci5nZXRDbGFzc0xvYWRlcigpLCB0\ncnVlKTsKICAgICAgICAgICAgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5R\ndWVyeSBkZWwgPQogICAgICAgICAgICAgICAgX2Jyb2tlci5uZXdRdWVyeSht\nZXRhLmdldExhbmd1YWdlKCksIG51bGwpOwogICAgICAgICAgICBtZXRhLnNl\ndEludG8oZGVsKTsKICAgICAgICAgICAgZGVsLmNvbXBpbGUoKTsKCiAgICAg\nICAgICAgIE9wZW5KUEFRdWVyeSBxID0gbmV3IFF1ZXJ5SW1wbCh0aGlzLCBk\nZWwpOwogICAgICAgICAgICBTdHJpbmdbXSBoaW50cyA9IG1ldGEuZ2V0SGlu\ndEtleXMoKTsKICAgICAgICAgICAgT2JqZWN0W10gdmFsdWVzID0gbWV0YS5n\nZXRIaW50VmFsdWVzKCk7CiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBp\nIDwgaGludHMubGVuZ3RoOyBpKyspCiAgICAgICAgICAgICAgICBxLnNldEhp\nbnQoaGludHNbaV0sIHZhbHVlc1tpXSk7CiAgICAgICAgICAgIHJldHVybiBx\nOwogICAgICAgIH0gY2F0Y2ggKFJ1bnRpbWVFeGNlcHRpb24gcmUpIHsKICAg\nICAgICAgICAgdGhyb3cgUGVyc2lzdGVuY2VFeGNlcHRpb25zLnRvUGVyc2lz\ndGVuY2VFeGNlcHRpb24ocmUpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJs\naWMgT3BlbkpQQVF1ZXJ5IGNyZWF0ZU5hdGl2ZVF1ZXJ5KFN0cmluZyBxdWVy\neSkgewogICAgICAgIHZhbGlkYXRlU1FMKHF1ZXJ5KTsKICAgICAgICByZXR1\ncm4gY3JlYXRlUXVlcnkoUXVlcnlMYW5ndWFnZXMuTEFOR19TUUwsIHF1ZXJ5\nKTsKICAgIH0KCiAgICBwdWJsaWMgT3BlbkpQQVF1ZXJ5IGNyZWF0ZU5hdGl2\nZVF1ZXJ5KFN0cmluZyBxdWVyeSwgQ2xhc3MgY2xzKSB7CiAgICAgICAgcmV0\ndXJuIGNyZWF0ZU5hdGl2ZVF1ZXJ5KHF1ZXJ5KS5zZXRSZXN1bHRDbGFzcyhj\nbHMpOwogICAgfQoKICAgIHB1YmxpYyBPcGVuSlBBUXVlcnkgY3JlYXRlTmF0\naXZlUXVlcnkoU3RyaW5nIHF1ZXJ5LCBTdHJpbmcgbWFwcGluZ05hbWUpIHsK\nICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsKICAgICAgICB2YWxp\nZGF0ZVNRTChxdWVyeSk7CiAgICAgICAgb3JnLmFwYWNoZS5vcGVuanBhLmtl\ncm5lbC5RdWVyeSBrZXJuZWxRdWVyeSA9IF9icm9rZXIubmV3UXVlcnkoCiAg\nICAgICAgICAgIFF1ZXJ5TGFuZ3VhZ2VzLkxBTkdfU1FMLCBxdWVyeSk7CiAg\nICAgICAga2VybmVsUXVlcnkuc2V0UmVzdWx0TWFwcGluZyhudWxsLCBtYXBw\naW5nTmFtZSk7CiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeUltcGwodGhpcywg\na2VybmVsUXVlcnkpOwogICAgfQoKICAgIC8qKgogICAgICogVmFsaWRhdGUg\ndGhhdCB0aGUgdXNlciBwcm92aWRlZCBTUUwuCiAgICAgKi8KICAgIHByaXZh\ndGUgc3RhdGljIHZvaWQgdmFsaWRhdGVTUUwoU3RyaW5nIHF1ZXJ5KSB7CiAg\nICAgICAgaWYgKFN0cmluZ1V0aWxzLnRyaW1Ub051bGwocXVlcnkpID09IG51\nbGwpCiAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlvbihf\nbG9jLmdldCgibm8tc3FsIiksIG51bGwsIG51bGwsIGZhbHNlKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBzZXRGbHVzaE1vZGUoRmx1c2hNb2RlVHlwZSBm\nbHVzaE1vZGUpIHsKICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsK\nICAgICAgICBfYnJva2VyLmFzc2VydE9wZW4oKTsKICAgICAgICBfYnJva2Vy\nLmdldEZldGNoQ29uZmlndXJhdGlvbigpLnNldEZsdXNoQmVmb3JlUXVlcmll\ncwogICAgICAgICAgICAodG9GbHVzaEJlZm9yZVF1ZXJpZXMoZmx1c2hNb2Rl\nKSk7CiAgICB9CgogICAgcHVibGljIEZsdXNoTW9kZVR5cGUgZ2V0Rmx1c2hN\nb2RlKCkgewogICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOwogICAg\nICAgIF9icm9rZXIuYXNzZXJ0T3BlbigpOwogICAgICAgIHJldHVybiBmcm9t\nRmx1c2hCZWZvcmVRdWVyaWVzKF9icm9rZXIuZ2V0RmV0Y2hDb25maWd1cmF0\naW9uKCkuCiAgICAgICAgICAgIGdldEZsdXNoQmVmb3JlUXVlcmllcygpKTsK\nICAgIH0KCiAgICAvKioKICAgICAqIFRyYW5zbGF0ZSBvdXIgaW50ZXJuYWwg\nZmx1c2ggY29uc3RhbnQgdG8gYSBmbHVzaCBtb2RlIGVudW0gdmFsdWUuCiAg\nICAgKi8KICAgIHN0YXRpYyBGbHVzaE1vZGVUeXBlIGZyb21GbHVzaEJlZm9y\nZVF1ZXJpZXMoaW50IGZsdXNoKSB7CiAgICAgICAgc3dpdGNoIChmbHVzaCkg\newogICAgICAgICAgICBjYXNlIFF1ZXJ5Rmx1c2hNb2Rlcy5GTFVTSF9UUlVF\nOgogICAgICAgICAgICAgICAgcmV0dXJuIEZsdXNoTW9kZVR5cGUuQVVUTzsK\nICAgICAgICAgICAgY2FzZSBRdWVyeUZsdXNoTW9kZXMuRkxVU0hfRkFMU0U6\nCiAgICAgICAgICAgICAgICByZXR1cm4gRmx1c2hNb2RlVHlwZS5DT01NSVQ7\nCiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICByZXR1cm4g\nbnVsbDsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBUcmFuc2xh\ndGUgYSBmbHVzaCBtb2RlIGVudW0gdmFsdWUgdG8gb3VyIGludGVybmFsIGZs\ndXNoIGNvbnN0YW50LgogICAgICovCiAgICBzdGF0aWMgaW50IHRvRmx1c2hC\nZWZvcmVRdWVyaWVzKEZsdXNoTW9kZVR5cGUgZmx1c2hNb2RlKSB7CiAgICAg\nICAgLy8gY2hvb3NlIGRlZmF1bHQgZm9yIG51bGwKICAgICAgICBpZiAoZmx1\nc2hNb2RlID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBRdWVyeUZsdXNo\nTW9kZXMuRkxVU0hfV0lUSF9DT05ORUNUSU9OOwogICAgICAgIGlmIChmbHVz\naE1vZGUgPT0gRmx1c2hNb2RlVHlwZS5BVVRPKQogICAgICAgICAgICByZXR1\ncm4gUXVlcnlGbHVzaE1vZGVzLkZMVVNIX1RSVUU7CiAgICAgICAgaWYgKGZs\ndXNoTW9kZSA9PSBGbHVzaE1vZGVUeXBlLkNPTU1JVCkKICAgICAgICAgICAg\ncmV0dXJuIFF1ZXJ5Rmx1c2hNb2Rlcy5GTFVTSF9GQUxTRTsKICAgICAgICB0\naHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24oZmx1c2hNb2RlLnRvU3RyaW5n\nKCksIG51bGwsIG51bGwsIGZhbHNlKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBjbGVhcigpIHsKICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsK\nICAgICAgICBfYnJva2VyLmRldGFjaEFsbCh0aGlzLCBmYWxzZSk7CiAgICB9\nCgogICAgcHVibGljIE9iamVjdCBnZXREZWxlZ2F0ZSgpIHsKICAgICAgICBf\nYnJva2VyLmFzc2VydE9wZW4oKTsKICAgICAgICBhc3NlcnROb3RDbG9zZUlu\ndm9rZWQoKTsKICAgICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICBwdWJs\naWMgTG9ja01vZGVUeXBlIGdldExvY2tNb2RlKE9iamVjdCBlbnRpdHkpIHsK\nICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsKICAgICAgICByZXR1\ncm4gZnJvbUxvY2tMZXZlbChfYnJva2VyLmdldExvY2tMZXZlbChlbnRpdHkp\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBsb2NrKE9iamVjdCBlbnRpdHks\nIExvY2tNb2RlVHlwZSBtb2RlKSB7CiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJ\nbnZva2VkKCk7CiAgICAgICAgX2Jyb2tlci5sb2NrKGVudGl0eSwgdG9Mb2Nr\nTGV2ZWwobW9kZSksIC0xLCB0aGlzKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBsb2NrKE9iamVjdCBlbnRpdHkpIHsKICAgICAgICBhc3NlcnROb3RDbG9z\nZUludm9rZWQoKTsKICAgICAgICBfYnJva2VyLmxvY2soZW50aXR5LCB0aGlz\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBsb2NrKE9iamVjdCBlbnRpdHks\nIExvY2tNb2RlVHlwZSBtb2RlLCBpbnQgdGltZW91dCkgewogICAgICAgIGFz\nc2VydE5vdENsb3NlSW52b2tlZCgpOwogICAgICAgIF9icm9rZXIubG9jayhl\nbnRpdHksIHRvTG9ja0xldmVsKG1vZGUpLCB0aW1lb3V0LCB0aGlzKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBsb2NrQWxsKENvbGxlY3Rpb24gZW50aXRp\nZXMpIHsKICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsKICAgICAg\nICBfYnJva2VyLmxvY2tBbGwoZW50aXRpZXMsIHRoaXMpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIGxvY2tBbGwoQ29sbGVjdGlvbiBlbnRpdGllcywgTG9j\na01vZGVUeXBlIG1vZGUsIGludCB0aW1lb3V0KSB7CiAgICAgICAgYXNzZXJ0\nTm90Q2xvc2VJbnZva2VkKCk7CiAgICAgICAgX2Jyb2tlci5sb2NrQWxsKGVu\ndGl0aWVzLCB0b0xvY2tMZXZlbChtb2RlKSwgdGltZW91dCwgdGhpcyk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgbG9ja0FsbChPYmplY3QuLi4gZW50aXRp\nZXMpIHsKICAgICAgICBsb2NrQWxsKEFycmF5cy5hc0xpc3QoZW50aXRpZXMp\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBsb2NrQWxsKE9iamVjdFtdIGVu\ndGl0aWVzLCBMb2NrTW9kZVR5cGUgbW9kZSwgaW50IHRpbWVvdXQpIHsKICAg\nICAgICBsb2NrQWxsKEFycmF5cy5hc0xpc3QoZW50aXRpZXMpLCBtb2RlLCB0\naW1lb3V0KTsKICAgIH0KCiAgICAvKioKICAgICAqIFRyYW5zbGF0ZSBvdXIg\naW50ZXJuYWwgbG9jayBsZXZlbCB0byBhIGphdmF4LnBlcnNpc3RlbmNlIGVu\ndW0gdmFsdWUuCiAgICAgKi8KICAgIHN0YXRpYyBMb2NrTW9kZVR5cGUgZnJv\nbUxvY2tMZXZlbChpbnQgbGV2ZWwpIHsKICAgICAgICBpZiAobGV2ZWwgPCBM\nb2NrTGV2ZWxzLkxPQ0tfUkVBRCkKICAgICAgICAgICAgcmV0dXJuIG51bGw7\nCiAgICAgICAgaWYgKGxldmVsIDwgTG9ja0xldmVscy5MT0NLX1dSSVRFKQog\nICAgICAgICAgICByZXR1cm4gTG9ja01vZGVUeXBlLlJFQUQ7CiAgICAgICAg\ncmV0dXJuIExvY2tNb2RlVHlwZS5XUklURTsKICAgIH0KCiAgICAvKioKICAg\nICAqIFRyYW5zbGF0ZSB0aGUgamF2YXgucGVyc2lzdGVuY2UgZW51bSB2YWx1\nZSB0byBvdXIgaW50ZXJuYWwgbG9jayBsZXZlbC4KICAgICAqLwogICAgc3Rh\ndGljIGludCB0b0xvY2tMZXZlbChMb2NrTW9kZVR5cGUgbW9kZSkgewogICAg\nICAgIGlmIChtb2RlID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBMb2Nr\nTGV2ZWxzLkxPQ0tfTk9ORTsKICAgICAgICBpZiAobW9kZSA9PSBMb2NrTW9k\nZVR5cGUuUkVBRCkKICAgICAgICAgICAgcmV0dXJuIExvY2tMZXZlbHMuTE9D\nS19SRUFEOwogICAgICAgIGlmIChtb2RlID09IExvY2tNb2RlVHlwZS5XUklU\nRSkKICAgICAgICAgICAgcmV0dXJuIExvY2tMZXZlbHMuTE9DS19XUklURTsK\nICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24obW9kZS50b1N0\ncmluZygpLCBudWxsLCBudWxsLCB0cnVlKTsKICAgIH0KCiAgICBwdWJsaWMg\nYm9vbGVhbiBjYW5jZWxBbGwoKSB7CiAgICAgICAgcmV0dXJuIF9icm9rZXIu\nY2FuY2VsQWxsKCk7CiAgICB9CgogICAgcHVibGljIE9iamVjdCBnZXRDb25u\nZWN0aW9uKCkgewogICAgICAgIHJldHVybiBfYnJva2VyLmdldENvbm5lY3Rp\nb24oKTsKICAgIH0KCiAgICBwdWJsaWMgQ29sbGVjdGlvbiBnZXRNYW5hZ2Vk\nT2JqZWN0cygpIHsKICAgICAgICByZXR1cm4gX2Jyb2tlci5nZXRNYW5hZ2Vk\nT2JqZWN0cygpOwogICAgfQoKICAgIHB1YmxpYyBDb2xsZWN0aW9uIGdldFRy\nYW5zYWN0aW9uYWxPYmplY3RzKCkgewogICAgICAgIHJldHVybiBfYnJva2Vy\nLmdldFRyYW5zYWN0aW9uYWxPYmplY3RzKCk7CiAgICB9CgogICAgcHVibGlj\nIENvbGxlY3Rpb24gZ2V0UGVuZGluZ1RyYW5zYWN0aW9uYWxPYmplY3RzKCkg\newogICAgICAgIHJldHVybiBfYnJva2VyLmdldFBlbmRpbmdUcmFuc2FjdGlv\nbmFsT2JqZWN0cygpOwogICAgfQoKICAgIHB1YmxpYyBDb2xsZWN0aW9uIGdl\ndERpcnR5T2JqZWN0cygpIHsKICAgICAgICByZXR1cm4gX2Jyb2tlci5nZXRE\naXJ0eU9iamVjdHMoKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBnZXRP\ncmRlckRpcnR5T2JqZWN0cygpIHsKICAgICAgICByZXR1cm4gX2Jyb2tlci5n\nZXRPcmRlckRpcnR5T2JqZWN0cygpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHNldE9yZGVyRGlydHlPYmplY3RzKGJvb2xlYW4gb3JkZXIpIHsKICAgICAg\nICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsKICAgICAgICBfYnJva2VyLnNl\ndE9yZGVyRGlydHlPYmplY3RzKG9yZGVyKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBkaXJ0eUNsYXNzKENsYXNzIGNscykgewogICAgICAgIGFzc2VydE5v\ndENsb3NlSW52b2tlZCgpOwogICAgICAgIF9icm9rZXIuZGlydHlUeXBlKGNs\ncyk7CiAgICB9CgogICAgQFN1cHByZXNzV2FybmluZ3MoInVuY2hlY2tlZCIp\nCiAgICBwdWJsaWMgQ29sbGVjdGlvbjxDbGFzcz4gZ2V0UGVyc2lzdGVkQ2xh\nc3NlcygpIHsKICAgICAgICByZXR1cm4gKENvbGxlY3Rpb248Q2xhc3M+KSBf\nYnJva2VyLmdldFBlcnNpc3RlZFR5cGVzKCk7CiAgICB9CgogICAgQFN1cHBy\nZXNzV2FybmluZ3MoInVuY2hlY2tlZCIpCiAgICBwdWJsaWMgQ29sbGVjdGlv\nbjxDbGFzcz4gZ2V0VXBkYXRlZENsYXNzZXMoKSB7CiAgICAgICAgcmV0dXJu\nIChDb2xsZWN0aW9uPENsYXNzPikgX2Jyb2tlci5nZXRVcGRhdGVkVHlwZXMo\nKTsKICAgIH0KCiAgICBAU3VwcHJlc3NXYXJuaW5ncygidW5jaGVja2VkIikK\nICAgIHB1YmxpYyBDb2xsZWN0aW9uPENsYXNzPiBnZXRSZW1vdmVkQ2xhc3Nl\ncygpIHsKICAgICAgICByZXR1cm4gKENvbGxlY3Rpb248Q2xhc3M+KSBfYnJv\na2VyLmdldERlbGV0ZWRUeXBlcygpOwogICAgfQoKICAgIHB1YmxpYyA8VD4g\nVCBjcmVhdGVJbnN0YW5jZShDbGFzczxUPiBjbHMpIHsKICAgICAgICBhc3Nl\ncnROb3RDbG9zZUludm9rZWQoKTsKICAgICAgICByZXR1cm4gKFQpIF9icm9r\nZXIubmV3SW5zdGFuY2UoY2xzKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBj\nbG9zZSgpIHsKICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsKICAg\nICAgICBfYnJva2VyLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIGJvb2xl\nYW4gaXNPcGVuKCkgewogICAgICAgIHJldHVybiAhX2Jyb2tlci5pc0Nsb3Nl\nSW52b2tlZCgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGRpcnR5KE9iamVj\ndCBvLCBTdHJpbmcgZmllbGQpIHsKICAgICAgICBhc3NlcnROb3RDbG9zZUlu\ndm9rZWQoKTsKICAgICAgICBPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtID0gX2Jy\nb2tlci5nZXRTdGF0ZU1hbmFnZXIobyk7CiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgaWYgKHNtICE9IG51bGwpCiAgICAgICAgICAgICAgICBzbS5kaXJ0\neShmaWVsZCk7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAg\nICAgICAgICAgdGhyb3cgUGVyc2lzdGVuY2VFeGNlcHRpb25zLnRvUGVyc2lz\ndGVuY2VFeGNlcHRpb24oZSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1Ymxp\nYyBPYmplY3QgZ2V0T2JqZWN0SWQoT2JqZWN0IG8pIHsKICAgICAgICBhc3Nl\ncnROb3RDbG9zZUludm9rZWQoKTsKICAgICAgICByZXR1cm4gSlBBRmFjYWRl\nSGVscGVyLmZyb21PcGVuSlBBT2JqZWN0SWQoX2Jyb2tlci5nZXRPYmplY3RJ\nZChvKSk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gaXNEaXJ0eShPYmpl\nY3QgbykgewogICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOwogICAg\nICAgIHJldHVybiBfYnJva2VyLmlzRGlydHkobyk7CiAgICB9CgogICAgcHVi\nbGljIGJvb2xlYW4gaXNUcmFuc2FjdGlvbmFsKE9iamVjdCBvKSB7CiAgICAg\nICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7CiAgICAgICAgcmV0dXJuIF9i\ncm9rZXIuaXNUcmFuc2FjdGlvbmFsKG8pOwogICAgfQoKICAgIHB1YmxpYyBi\nb29sZWFuIGlzUGVyc2lzdGVudChPYmplY3QgbykgewogICAgICAgIGFzc2Vy\ndE5vdENsb3NlSW52b2tlZCgpOwogICAgICAgIHJldHVybiBfYnJva2VyLmlz\nUGVyc2lzdGVudChvKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBpc05l\nd2x5UGVyc2lzdGVudChPYmplY3QgbykgewogICAgICAgIGFzc2VydE5vdENs\nb3NlSW52b2tlZCgpOwogICAgICAgIHJldHVybiBfYnJva2VyLmlzTmV3KG8p\nOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGlzUmVtb3ZlZChPYmplY3Qg\nbykgewogICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOwogICAgICAg\nIHJldHVybiBfYnJva2VyLmlzRGVsZXRlZChvKTsKICAgIH0KCiAgICBwdWJs\naWMgYm9vbGVhbiBpc0RldGFjaGVkKE9iamVjdCBlbnRpdHkpIHsKICAgICAg\nICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsKICAgICAgICByZXR1cm4gX2Jy\nb2tlci5pc0RldGFjaGVkKGVudGl0eSk7CiAgICB9CgogICAgcHVibGljIE9i\namVjdCBnZXRWZXJzaW9uKE9iamVjdCBvKSB7CiAgICAgICAgYXNzZXJ0Tm90\nQ2xvc2VJbnZva2VkKCk7CiAgICAgICAgcmV0dXJuIF9icm9rZXIuZ2V0VmVy\nc2lvbihvKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRocm93IGFwcHJvcHJp\nYXRlIGV4Y2VwdGlvbiBpZiBjbG9zZSBoYXMgYmVlbiBpbnZva2VkIGJ1dCB0\naGUgYnJva2VyCiAgICAgKiBpcyBzdGlsbCBvcGVuLiAgV2UgdGVzdCBvbmx5\nIGZvciB0aGlzIGJlY2F1c2UgaWYgdGhlIGJyb2tlciBpcyBhbHJlYWR5CiAg\nICAgKiBjbG9zZWQsIGl0IHdpbGwgdGhyb3cgaXRzIG93biBtb3JlIGluZm9y\nbWF0aXZlIGV4Y2VwdGlvbiB3aGVuIHdlIAogICAgICogZGVsZWdhdGUgdGhl\nIHBlbmRpbmcgb3BlcmF0aW9uIHRvIGl0LgogICAgICovCiAgICB2b2lkIGFz\nc2VydE5vdENsb3NlSW52b2tlZCgpIHsKICAgICAgICBpZiAoIV9icm9rZXIu\naXNDbG9zZWQoKSAmJiBfYnJva2VyLmlzQ2xvc2VJbnZva2VkKCkpCiAgICAg\nICAgICAgIHRocm93IG5ldyBJbnZhbGlkU3RhdGVFeGNlcHRpb24oX2xvYy5n\nZXQoImNsb3NlLWludm9rZWQiKSwgbnVsbCwKICAgICAgICAgICAgICAgIG51\nbGwsIHRydWUpOwogICAgfQoKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vCiAgICAvLyBGaW5kQ2FsbGJhY2tzIGltcGxlbWVudGF0aW9u\nCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKICAgIHB1\nYmxpYyBPYmplY3QgcHJvY2Vzc0FyZ3VtZW50KE9iamVjdCBhcmcpIHsKICAg\nICAgICByZXR1cm4gYXJnOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgcHJv\nY2Vzc1JldHVybihPYmplY3Qgb2lkLCBPcGVuSlBBU3RhdGVNYW5hZ2VyIHNt\nKSB7CiAgICAgICAgcmV0dXJuIChzbSA9PSBudWxsIHx8IHNtLmlzRGVsZXRl\nZCgpKSA/IG51bGwgOiBzbS5nZXRNYW5hZ2VkSW5zdGFuY2UoKTsKICAgIH0K\nCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIC8vIE9w\nQ2FsbGJhY2tzIGltcGxlbWVudGF0aW9uCiAgICAvLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8KCiAgICBwdWJsaWMgaW50IHByb2Nlc3NBcmd1bWVu\ndChpbnQgb3AsIE9iamVjdCBvYmosIE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20p\nIHsKICAgICAgICBzd2l0Y2ggKG9wKSB7CiAgICAgICAgICAgIGNhc2UgT1Bf\nREVMRVRFOgogICAgICAgICAgICAgICAgLy8gY2FzY2FkZSB0aHJvdWdoIG5v\nbi1wZXJzaXN0ZW50IG5vbi1kZXRhY2hlZCBpbnN0YW5jZXMKICAgICAgICAg\nICAgICAgIGlmIChzbSA9PSBudWxsICYmICFfYnJva2VyLmlzRGV0YWNoZWQo\nb2JqKSkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gQUNUX0NBU0NBREU7\nCiAgICAgICAgICAgICAgICBpZiAoc20gIT0gbnVsbCAmJiAhc20uaXNEZXRh\nY2hlZCgpICYmICFzbS5pc1BlcnNpc3RlbnQoKSkKICAgICAgICAgICAgICAg\nICAgICByZXR1cm4gQUNUX0NBU0NBREU7CiAgICAgICAgICAgICAgICAvLyBp\nZ25vcmUgZGVsZXRlZCBpbnN0YW5jZXMKICAgICAgICAgICAgICAgIGlmIChz\nbSAhPSBudWxsICYmIHNtLmlzRGVsZXRlZCgpKQogICAgICAgICAgICAgICAg\nICAgIHJldHVybiBBQ1RfTk9ORTsKICAgICAgICAgICAgICAgIGJyZWFrOwog\nICAgICAgICAgICBjYXNlIE9QX0FUVEFDSDoKICAgICAgICAgICAgICAgIC8v\nIGRpZSBvbiByZW1vdmVkCiAgICAgICAgICAgICAgICBpZiAoc20gIT0gbnVs\nbCAmJiBzbS5pc0RlbGV0ZWQoKSkKICAgICAgICAgICAgICAgICAgICB0aHJv\ndyBuZXcgVXNlckV4Y2VwdGlvbihfbG9jLmdldCgicmVtb3ZlZCIsCiAgICAg\nICAgICAgICAgICAgICAgICAgIEV4Y2VwdGlvbnMudG9TdHJpbmcob2JqKSkp\nLnNldEZhaWxlZE9iamVjdChvYmopOwogICAgICAgICAgICAgICAgLy8gY2Fz\nY2FkZSB0aHJvdWdoIG1hbmFnZWQgaW5zdGFuY2VzCiAgICAgICAgICAgICAg\nICBpZiAoc20gIT0gbnVsbCAmJiAhc20uaXNEZXRhY2hlZCgpKQogICAgICAg\nICAgICAgICAgICAgIHJldHVybiBBQ1RfQ0FTQ0FERTsKICAgICAgICAgICAg\nICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIE9QX1JFRlJFU0g6CiAgICAg\nICAgICAgICAgICAvLyBkaWUgb24gdW5tYW5hZ2VkIGluc3RhbmNlcwogICAg\nICAgICAgICAgICAgaWYgKHNtID09IG51bGwpCiAgICAgICAgICAgICAgICAg\nICAgdGhyb3cgbmV3IFVzZXJFeGNlcHRpb24oX2xvYy5nZXQoIm5vdC1tYW5h\nZ2VkIiwKICAgICAgICAgICAgICAgICAgICAgICAgRXhjZXB0aW9ucy50b1N0\ncmluZyhvYmopKSkuc2V0RmFpbGVkT2JqZWN0KG9iaik7CiAgICAgICAgICAg\nICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIEFDVF9SVU4g\nfCBBQ1RfQ0FTQ0FERTsKICAgIH0KCiAgICBwdWJsaWMgaW50IGhhc2hDb2Rl\nKCkgewogICAgICAgIHJldHVybiBfYnJva2VyLmhhc2hDb2RlKCk7CiAgICB9\nCgogICAgcHVibGljIGJvb2xlYW4gZXF1YWxzKE9iamVjdCBvdGhlcikgewog\nICAgICAgIGlmIChvdGhlciA9PSB0aGlzKQogICAgICAgICAgICByZXR1cm4g\ndHJ1ZTsKICAgICAgICBpZiAoIShvdGhlciBpbnN0YW5jZW9mIEVudGl0eU1h\nbmFnZXJJbXBsKSkKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAg\nIHJldHVybiBfYnJva2VyLmVxdWFscygoKEVudGl0eU1hbmFnZXJJbXBsKSBv\ndGhlcikuX2Jyb2tlcik7CiAgICB9Cn0K\n","encoding":"base64"}

