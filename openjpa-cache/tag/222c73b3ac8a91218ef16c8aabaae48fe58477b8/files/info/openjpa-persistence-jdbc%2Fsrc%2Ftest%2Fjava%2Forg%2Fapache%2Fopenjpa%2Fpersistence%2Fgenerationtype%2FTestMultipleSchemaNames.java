{"sha":"34206343fe2836980652bb85342f2aa129123c28","node_id":"MDQ6QmxvYjIwNjM2NDozNDIwNjM0M2ZlMjgzNjk4MDY1MmJiODUzNDJmMmFhMTI5MTIzYzI4","size":12694,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/34206343fe2836980652bb85342f2aa129123c28","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5nZW5lcmF0aW9u\ndHlwZTsKCmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKCmltcG9ydCBqYXZheC5w\nZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyOwppbXBvcnQgamF2YXgucGVyc2lz\ndGVuY2UuUXVlcnk7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMu\nc3FsLk15U1FMRGljdGlvbmFyeTsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5wZXJzaXN0ZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdlcjsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBUGVyc2lzdGVu\nY2U7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UudGVz\ndC5TaW5nbGVFTUZUZXN0Q2FzZTsKCnB1YmxpYyBjbGFzcyBUZXN0TXVsdGlw\nbGVTY2hlbWFOYW1lcyBleHRlbmRzIFNpbmdsZUVNRlRlc3RDYXNlIHsKICAg\nIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7CiAgICAgICAg\nc2V0VXAoRG9nMS5jbGFzcywgRG9nMi5jbGFzcywgRG9nVGFibGUuY2xhc3Ms\nIERvZ1RhYmxlMi5jbGFzcywKICAgICAgICAgICAgICAgIERvZ1RhYmxlMy5j\nbGFzcywgRG9nVGFibGU0LmNsYXNzKTsKCiAgICAgICAgaWYoZ2V0REJEaWN0\naW9uYXJ5KGVtZikgaW5zdGFuY2VvZiBNeVNRTERpY3Rpb25hcnkpIHsgCiAg\nICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAg\nRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7\nCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAg\nIC8vIGNsZWFudXAgZGF0YWJhc2UgZmlyc3QKICAgICAgICBRdWVyeSBxcnkg\nPSBlbS5jcmVhdGVRdWVyeSgic2VsZWN0IGQgZnJvbSBEb2cxIGQiKTsKICAg\nICAgICBMaXN0IHJlc3VsdCA9IHFyeS5nZXRSZXN1bHRMaXN0KCk7CgogICAg\nICAgIGZvciAoaW50IGluZGV4ID0gMDsgaW5kZXggPCByZXN1bHQuc2l6ZSgp\nOyBpbmRleCsrKSB7CiAgICAgICAgICAgIERvZzEgT2JqID0gKERvZzEpIHJl\nc3VsdC5nZXQoaW5kZXgpOwogICAgICAgICAgICBlbS5yZW1vdmUoT2JqKTsK\nICAgICAgICB9CiAgICAgICAgUXVlcnkgcXJ5MiA9IGVtLmNyZWF0ZVF1ZXJ5\nKCJzZWxlY3QgZCBmcm9tIERvZzIgZCIpOwogICAgICAgIExpc3QgcmVzdWx0\nMiA9IHFyeTIuZ2V0UmVzdWx0TGlzdCgpOwoKICAgICAgICBmb3IgKGludCBp\nbmRleCA9IDA7IGluZGV4IDwgcmVzdWx0Mi5zaXplKCk7IGluZGV4KyspIHsK\nICAgICAgICAgICAgRG9nMiBPYmogPSAoRG9nMikgcmVzdWx0Mi5nZXQoaW5k\nZXgpOwogICAgICAgICAgICBlbS5yZW1vdmUoT2JqKTsKICAgICAgICB9CiAg\nICAgICAgUXVlcnkgcXJ5MyA9IGVtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgZCBm\ncm9tIERvZ1RhYmxlIGQiKTsKICAgICAgICBMaXN0IHJlc3VsdDMgPSBxcnkz\nLmdldFJlc3VsdExpc3QoKTsKCiAgICAgICAgZm9yIChpbnQgaW5kZXggPSAw\nOyBpbmRleCA8IHJlc3VsdDMuc2l6ZSgpOyBpbmRleCsrKSB7CiAgICAgICAg\nICAgIERvZ1RhYmxlIE9iaiA9IChEb2dUYWJsZSkgcmVzdWx0My5nZXQoaW5k\nZXgpOwogICAgICAgICAgICBlbS5yZW1vdmUoT2JqKTsKICAgICAgICB9CiAg\nICAgICAgUXVlcnkgcXJ5NCA9IGVtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgZCBm\ncm9tIERvZ1RhYmxlMiBkIik7CiAgICAgICAgTGlzdCByZXN1bHQ0ID0gcXJ5\nNC5nZXRSZXN1bHRMaXN0KCk7CgogICAgICAgIGZvciAoaW50IGluZGV4ID0g\nMDsgaW5kZXggPCByZXN1bHQ0LnNpemUoKTsgaW5kZXgrKykgewogICAgICAg\nICAgICBEb2dUYWJsZTIgT2JqID0gKERvZ1RhYmxlMikgcmVzdWx0NC5nZXQo\naW5kZXgpOwogICAgICAgICAgICBlbS5yZW1vdmUoT2JqKTsKICAgICAgICB9\nCgogICAgICAgIFF1ZXJ5IHFyeTUgPSBlbS5jcmVhdGVRdWVyeSgic2VsZWN0\nIGQgZnJvbSBEb2dUYWJsZTMgZCIpOwogICAgICAgIExpc3QgcmVzdWx0NSA9\nIHFyeTUuZ2V0UmVzdWx0TGlzdCgpOwoKICAgICAgICBmb3IgKGludCBpbmRl\neCA9IDA7IGluZGV4IDwgcmVzdWx0NS5zaXplKCk7IGluZGV4KyspIHsKICAg\nICAgICAgICAgRG9nVGFibGUzIE9iaiA9IChEb2dUYWJsZTMpIHJlc3VsdDUu\nZ2V0KGluZGV4KTsKICAgICAgICAgICAgZW0ucmVtb3ZlKE9iaik7CiAgICAg\nICAgfQoKICAgICAgICBRdWVyeSBxcnk2ID0gZW0uY3JlYXRlUXVlcnkoInNl\nbGVjdCBkIGZyb20gRG9nVGFibGU0IGQiKTsKICAgICAgICBMaXN0IHJlc3Vs\ndDYgPSBxcnk2LmdldFJlc3VsdExpc3QoKTsKCiAgICAgICAgZm9yIChpbnQg\naW5kZXggPSAwOyBpbmRleCA8IHJlc3VsdDYuc2l6ZSgpOyBpbmRleCsrKSB7\nCiAgICAgICAgICAgIERvZ1RhYmxlNCBPYmogPSAoRG9nVGFibGU0KSByZXN1\nbHQ2LmdldChpbmRleCk7CiAgICAgICAgICAgIGVtLnJlbW92ZShPYmopOwog\nICAgICAgIH0KCiAgICAgICAgUXVlcnkgZGVsc2NoZW1hMSA9IGVtCiAgICAg\nICAgICAgICAgICAuY3JlYXRlTmF0aXZlUXVlcnkoImRlbGV0ZSBmcm9tIHNj\naGVtYTEub3BlbmpwYV9zZXF1ZW5jZV90YWJsZSIpOwogICAgICAgIGRlbHNj\naGVtYTEuZXhlY3V0ZVVwZGF0ZSgpOwogICAgICAgIFF1ZXJ5IGRlbHNjaGVt\nYTIgPSBlbQogICAgICAgICAgICAgICAgLmNyZWF0ZU5hdGl2ZVF1ZXJ5KCJk\nZWxldGUgZnJvbSBzY2hlbWEyLm9wZW5qcGFfc2VxdWVuY2VfdGFibGUiKTsK\nICAgICAgICBkZWxzY2hlbWEyLmV4ZWN1dGVVcGRhdGUoKTsKICAgICAgICBR\ndWVyeSBkZWxnZW50YWJsZSA9IGVtLmNyZWF0ZU5hdGl2ZVF1ZXJ5KCJkZWxl\ndGUgZnJvbSBzY2hlbWExLmlkX2dlbjEiKTsKICAgICAgICBkZWxnZW50YWJs\nZS5leGVjdXRlVXBkYXRlKCk7CiAgICAgICAgUXVlcnkgZGVsZ2VudGFibGUy\nID0gZW0KICAgICAgICAgICAgICAgIC5jcmVhdGVOYXRpdmVRdWVyeSgiZGVs\nZXRlIGZyb20gc2NoZW1hMi5pZF9nZW4yIik7CiAgICAgICAgZGVsZ2VudGFi\nbGUyLmV4ZWN1dGVVcGRhdGUoKTsKICAgICAgICBRdWVyeSBkZWxnZW50YWJs\nZTMgPSBlbQogICAgICAgICAgICAgICAgLmNyZWF0ZU5hdGl2ZVF1ZXJ5KCJk\nZWxldGUgZnJvbSBzY2hlbWEzZy5pZF9nZW4zIik7CiAgICAgICAgZGVsZ2Vu\ndGFibGUzLmV4ZWN1dGVVcGRhdGUoKTsKICAgICAgICBRdWVyeSBkZWxnZW50\nYWJsZTQgPSBlbQogICAgICAgICAgICAgICAgLmNyZWF0ZU5hdGl2ZVF1ZXJ5\nKCJkZWxldGUgZnJvbSBzY2hlbWE0Zy5pZF9nZW40Iik7CiAgICAgICAgZGVs\nZ2VudGFibGU0LmV4ZWN1dGVVcGRhdGUoKTsKCiAgICAgICAgZW0uZ2V0VHJh\nbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwoKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0R2VuZXJhdGVkQVVUTygpIHsKICAg\nICAgICBpZihnZXREQkRpY3Rpb25hcnkoZW1mKSBpbnN0YW5jZW9mIE15U1FM\nRGljdGlvbmFyeSkgeyAKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0K\nICAgICAgICAKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0\nZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdl\nciBrZW0gPSBPcGVuSlBBUGVyc2lzdGVuY2UuY2FzdChlbSk7CiAgICAgICAg\nZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwoKICAgICAgICBEb2cxIGRv\nZzEgPSBuZXcgRG9nMSgpOwogICAgICAgIGRvZzEuc2V0TmFtZSgiaGVsbG9E\nb2cxIik7CiAgICAgICAgZG9nMS5zZXRQcmljZSgxMjAwMCk7CgogICAgICAg\nIGVtLnBlcnNpc3QoZG9nMSk7CiAgICAgICAgRG9nMSBkb2cxYSA9IG5ldyBE\nb2cxKCk7CiAgICAgICAgZG9nMWEuc2V0TmFtZSgiaGVsbG9Eb2cyIik7CiAg\nICAgICAgZG9nMWEuc2V0UHJpY2UoMjIwMDApOwogICAgICAgIGVtLnBlcnNp\nc3QoZG9nMWEpOwogICAgICAgIC8vIGFkZCBkb2cyCiAgICAgICAgRG9nMiBk\nb2cyID0gbmV3IERvZzIoKTsKICAgICAgICBkb2cyLnNldE5hbWUoImhlbGxv\nRG9nMyIpOwogICAgICAgIGRvZzIuc2V0UHJpY2UoMTUwMDApOwogICAgICAg\nIGVtLnBlcnNpc3QoZG9nMik7CgogICAgICAgIERvZzIgZG9nMmEgPSBuZXcg\nRG9nMigpOwogICAgICAgIGRvZzJhLnNldE5hbWUoImhlbGxvRG9nNCIpOwog\nICAgICAgIGRvZzJhLnNldFByaWNlKDI1MDAwKTsKICAgICAgICBlbS5wZXJz\naXN0KGRvZzJhKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1p\ndCgpOwoKICAgICAgICBEb2cxIGRvZzF4ID0gZW0uZmluZChEb2cxLmNsYXNz\nLCBrZW0uZ2V0T2JqZWN0SWQoZG9nMSkpOwogICAgICAgIC8vIERlcmJ5IGNh\nbid0IGd1YXJhbnRlZSB0aGUgb3JkZXIgb2YgdGhlIGdlbmVyYXRlZCB2YWx1\nZSwgdGhlcmVmb3JlLAogICAgICAgIC8vIHdlIGNhbid0IGFzc2VydCB0aGUg\naWQgYmFzZWQgb24gdGhlIG9yZGVyLiBGb3IgZGIyLCB3ZSBzZWUgdGhlIGlk\nIAogICAgICAgIC8vIHZhbHVlIGluIHRoZSByaWdodCBvcmRlcgogICAgICAg\nIGFzc2VydFRydWUoZG9nMXguZ2V0SWQyKCkgPT0gMSB8fCBkb2cxeC5nZXRJ\nZDIoKSA9PSAyKTsKICAgICAgICBhc3NlcnRFcXVhbHMoZG9nMXguZ2V0TmFt\nZSgpLCAiaGVsbG9Eb2cxIik7CiAgICAgICAgZG9nMXguc2V0TmFtZSgiRG9n\nMSIpOwogICAgICAgIGRvZzF4LnNldERvbWVzdGljKHRydWUpOwogICAgICAg\nIERvZzEgZG9nMTEgPSBlbS5maW5kKERvZzEuY2xhc3MsIGtlbS5nZXRPYmpl\nY3RJZChkb2cxYSkpOwogICAgICAgIGFzc2VydFRydWUoZG9nMTEuZ2V0SWQy\nKCkgPT0gMSB8fCBkb2cxMS5nZXRJZDIoKSA9PSAyKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoZG9nMTEuZ2V0TmFtZSgpLCAiaGVsbG9Eb2cyIik7CiAgICAg\nICAgZG9nMTEuc2V0TmFtZSgiRG9nMiIpOwogICAgICAgIGRvZzExLnNldERv\nbWVzdGljKHRydWUpOwogICAgICAgIC8vIHVwZGF0ZSBkb2cyCiAgICAgICAg\nRG9nMiBkb2cyeCA9IGVtLmZpbmQoRG9nMi5jbGFzcywga2VtLmdldE9iamVj\ndElkKGRvZzIpKTsKICAgICAgICBhc3NlcnRUcnVlKGRvZzJ4LmdldElkMigp\nID09IDEgfHwgZG9nMnguZ2V0SWQyKCkgPT0gMik7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKGRvZzJ4LmdldE5hbWUoKSwgImhlbGxvRG9nMyIpOwogICAgICAg\nIGRvZzJ4LnNldE5hbWUoIkRvZzMiKTsKICAgICAgICBkb2cyeC5zZXREb21l\nc3RpYyh0cnVlKTsKICAgICAgICBEb2cyIGRvZzIxID0gZW0uZmluZChEb2cy\nLmNsYXNzLCBrZW0uZ2V0T2JqZWN0SWQoZG9nMmEpKTsKICAgICAgICBhc3Nl\ncnRUcnVlKGRvZzIxLmdldElkMigpID09IDEgfHwgZG9nMjEuZ2V0SWQyKCkg\nPT0gMik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGRvZzIxLmdldE5hbWUoKSwg\nImhlbGxvRG9nNCIpOwogICAgICAgIGRvZzIxLnNldE5hbWUoIkRvZzQiKTsK\nICAgICAgICBkb2cyMS5zZXREb21lc3RpYyh0cnVlKTsKCiAgICAgICAgLy8g\nZ2V0IHRoZSB1cGRhdGUgZG9nIG5hbWUKCiAgICAgICAgZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5iZWdpbigpOwogICAgICAgIFF1ZXJ5IHFyeTEgPSBlbS5jcmVh\ndGVRdWVyeSgic2VsZWN0IGQgZnJvbSBEb2cxIGQgb3JkZXIgYnkgZC5uYW1l\nIik7CiAgICAgICAgTGlzdCByZXN1bHQxID0gcXJ5MS5nZXRSZXN1bHRMaXN0\nKCk7CiAgICAgICAgZm9yIChpbnQgaW5kZXggPSAwOyBpbmRleCA8IHJlc3Vs\ndDEuc2l6ZSgpOyBpbmRleCsrKSB7CiAgICAgICAgICAgIERvZzEgZG9nNCA9\nIChEb2cxKSByZXN1bHQxLmdldChpbmRleCk7CiAgICAgICAgICAgIGludCBp\nID0gaW5kZXggKyAxOwogICAgICAgICAgICBhc3NlcnRUcnVlKGRvZzQuZ2V0\nSWQyKCkgPT0gMSB8fCBkb2c0LmdldElkMigpID09IDIpOwogICAgICAgICAg\nICBhc3NlcnRFcXVhbHMoZG9nNC5nZXROYW1lKCksICJEb2ciICsgaSk7CiAg\nICAgICAgfQoKICAgICAgICBRdWVyeSBxcnkyID0gZW0uY3JlYXRlUXVlcnko\nInNlbGVjdCBkIGZyb20gRG9nMiBkIG9yZGVyIGJ5IGQubmFtZSIpOwogICAg\nICAgIExpc3QgcmVzdWx0MiA9IHFyeTIuZ2V0UmVzdWx0TGlzdCgpOwoKICAg\nICAgICBmb3IgKGludCBpbmRleCA9IDA7IGluZGV4IDwgcmVzdWx0Mi5zaXpl\nKCk7IGluZGV4KyspIHsKICAgICAgICAgICAgRG9nMiBkb2c1ID0gKERvZzIp\nIHJlc3VsdDIuZ2V0KGluZGV4KTsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZShk\nb2c1LmdldElkMigpID09IDEgfHwgZG9nNS5nZXRJZDIoKSA9PSAyKTsKICAg\nICAgICAgICAgaW50IGogPSBpbmRleCArIDM7CiAgICAgICAgICAgIGFzc2Vy\ndEVxdWFscyhkb2c1LmdldE5hbWUoKSwgIkRvZyIgKyBqKTsKICAgICAgICB9\nCgogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAg\nICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0R2Vu\nZXJhdGVkVEFCTEUoKSB7CiAgICAgICAgaWYoZ2V0REJEaWN0aW9uYXJ5KGVt\nZikgaW5zdGFuY2VvZiBNeVNRTERpY3Rpb25hcnkpIHsgCiAgICAgICAgICAg\nIHJldHVybjsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgRW50aXR5TWFu\nYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAg\nT3BlbkpQQUVudGl0eU1hbmFnZXIga2VtID0gT3BlbkpQQVBlcnNpc3RlbmNl\nLmNhc3QoZW0pOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4o\nKTsKCiAgICAgICAgRG9nVGFibGUgZG9nMSA9IG5ldyBEb2dUYWJsZSgpOwog\nICAgICAgIGRvZzEuc2V0TmFtZSgiaGVsbG9Eb2cxIik7CiAgICAgICAgZG9n\nMS5zZXRQcmljZSgxMjAwMCk7CgogICAgICAgIGVtLnBlcnNpc3QoZG9nMSk7\nCiAgICAgICAgRG9nVGFibGUgZG9nMWEgPSBuZXcgRG9nVGFibGUoKTsKICAg\nICAgICBkb2cxYS5zZXROYW1lKCJoZWxsb0RvZzIiKTsKICAgICAgICBkb2cx\nYS5zZXRQcmljZSgyMjAwMCk7CiAgICAgICAgZW0ucGVyc2lzdChkb2cxYSk7\nCiAgICAgICAgLy8gYWRkIGRvZzIKICAgICAgICBEb2dUYWJsZTIgZG9nMiA9\nIG5ldyBEb2dUYWJsZTIoKTsKICAgICAgICBkb2cyLnNldE5hbWUoImhlbGxv\nRG9nMyIpOwogICAgICAgIGRvZzIuc2V0UHJpY2UoMTUwMDApOwogICAgICAg\nIGVtLnBlcnNpc3QoZG9nMik7CgogICAgICAgIERvZ1RhYmxlMiBkb2cyYSA9\nIG5ldyBEb2dUYWJsZTIoKTsKICAgICAgICBkb2cyYS5zZXROYW1lKCJoZWxs\nb0RvZzQiKTsKICAgICAgICBkb2cyYS5zZXRQcmljZSgyNTAwMCk7CiAgICAg\nICAgZW0ucGVyc2lzdChkb2cyYSk7CgogICAgICAgIC8vIGFkZCBkb2czCiAg\nICAgICAgRG9nVGFibGUzIGRvZzMgPSBuZXcgRG9nVGFibGUzKCk7CiAgICAg\nICAgZG9nMy5zZXROYW1lKCJoZWxsb0RvZzUiKTsKICAgICAgICBkb2czLnNl\ndFByaWNlKDE1MDAxKTsKICAgICAgICBlbS5wZXJzaXN0KGRvZzMpOwoKICAg\nICAgICBEb2dUYWJsZTMgZG9nM2EgPSBuZXcgRG9nVGFibGUzKCk7CiAgICAg\nICAgZG9nM2Euc2V0TmFtZSgiaGVsbG9Eb2c2Iik7CiAgICAgICAgZG9nM2Eu\nc2V0UHJpY2UoMjUwMDEpOwogICAgICAgIGVtLnBlcnNpc3QoZG9nM2EpOwoK\nICAgICAgICAvLyBhZGQgZG9nNAogICAgICAgIERvZ1RhYmxlNCBkb2c0ID0g\nbmV3IERvZ1RhYmxlNCgpOwogICAgICAgIGRvZzQuc2V0TmFtZSgiaGVsbG9E\nb2c3Iik7CiAgICAgICAgZG9nNC5zZXRQcmljZSgxNTAwMik7CiAgICAgICAg\nZW0ucGVyc2lzdChkb2c0KTsKCiAgICAgICAgRG9nVGFibGU0IGRvZzRhID0g\nbmV3IERvZ1RhYmxlNCgpOwogICAgICAgIGRvZzRhLnNldE5hbWUoImhlbGxv\nRG9nOCIpOwogICAgICAgIGRvZzRhLnNldFByaWNlKDI1MDAyKTsKICAgICAg\nICBlbS5wZXJzaXN0KGRvZzRhKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlv\nbigpLmNvbW1pdCgpOyAgICAgICAgCiAgICAgICAgCiAgICAgICAgRG9nVGFi\nbGUgZG9nMXggPSBlbS5maW5kKERvZ1RhYmxlLmNsYXNzLCBrZW0uZ2V0T2Jq\nZWN0SWQoZG9nMSkpOwogICAgICAgIGFzc2VydFRydWUoZG9nMXguZ2V0SWQy\nKCkgPT0gMjAgfHwgZG9nMXguZ2V0SWQyKCkgPT0gMjEpOwogICAgICAgIGFz\nc2VydEVxdWFscyhkb2cxeC5nZXROYW1lKCksICJoZWxsb0RvZzEiKTsKICAg\nICAgICBkb2cxeC5zZXROYW1lKCJEb2cxIik7CiAgICAgICAgZG9nMXguc2V0\nRG9tZXN0aWModHJ1ZSk7CiAgICAgICAgRG9nVGFibGUgZG9nMTEgPSBlbS5m\naW5kKERvZ1RhYmxlLmNsYXNzLCBrZW0uZ2V0T2JqZWN0SWQoZG9nMWEpKTsK\nICAgICAgICBhc3NlcnRUcnVlKGRvZzExLmdldElkMigpID09IDIwIHx8IGRv\nZzExLmdldElkMigpID09IDIxKTsKICAgICAgICBhc3NlcnRFcXVhbHMoZG9n\nMTEuZ2V0TmFtZSgpLCAiaGVsbG9Eb2cyIik7CiAgICAgICAgZG9nMTEuc2V0\nTmFtZSgiRG9nMiIpOwogICAgICAgIGRvZzExLnNldERvbWVzdGljKHRydWUp\nOwogICAgICAgIAogICAgICAgIC8vIHVwZGF0ZSBkb2cyCiAgICAgICAgRG9n\nVGFibGUyIGRvZzJ4ID0gZW0uZmluZChEb2dUYWJsZTIuY2xhc3MsIGtlbS5n\nZXRPYmplY3RJZChkb2cyKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShkb2cyeC5n\nZXRJZDIoKSA9PSAxMDAgfHwgZG9nMnguZ2V0SWQyKCkgPT0gMTAxKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoZG9nMnguZ2V0TmFtZSgpLCAiaGVsbG9Eb2cz\nIik7CiAgICAgICAgZG9nMnguc2V0TmFtZSgiRG9nMyIpOwogICAgICAgIGRv\nZzJ4LnNldERvbWVzdGljKHRydWUpOwogICAgICAgIERvZ1RhYmxlMiBkb2cy\nMSA9IGVtLmZpbmQoRG9nVGFibGUyLmNsYXNzLCBrZW0uZ2V0T2JqZWN0SWQo\nZG9nMmEpKTsKICAgICAgICBhc3NlcnRUcnVlKGRvZzIxLmdldElkMigpID09\nIDEwMCB8fCBkb2cyMS5nZXRJZDIoKSA9PSAxMDEpOwogICAgICAgIGFzc2Vy\ndEVxdWFscyhkb2cyMS5nZXROYW1lKCksICJoZWxsb0RvZzQiKTsKICAgICAg\nICBkb2cyMS5zZXROYW1lKCJEb2c0Iik7CiAgICAgICAgZG9nMjEuc2V0RG9t\nZXN0aWModHJ1ZSk7CgogICAgICAgIC8vIHVwZGF0ZSBkb2czCiAgICAgICAg\nRG9nVGFibGUzIGRvZzN4ID0gZW0uZmluZChEb2dUYWJsZTMuY2xhc3MsIGtl\nbS5nZXRPYmplY3RJZChkb2czKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShkb2cz\neC5nZXRJZDIoKSA9PSAxMDAgfHwgZG9nM3guZ2V0SWQyKCkgPT0gMTAxKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoZG9nM3guZ2V0TmFtZSgpLCAiaGVsbG9E\nb2c1Iik7CiAgICAgICAgZG9nM3guc2V0TmFtZSgiRG9nNSIpOwogICAgICAg\nIGRvZzN4LnNldERvbWVzdGljKHRydWUpOwogICAgICAgIERvZ1RhYmxlMyBk\nb2czMSA9IGVtLmZpbmQoRG9nVGFibGUzLmNsYXNzLCBrZW0uZ2V0T2JqZWN0\nSWQoZG9nM2EpKTsKICAgICAgICBhc3NlcnRUcnVlKGRvZzMxLmdldElkMigp\nID09IDEwMCB8fCBkb2czMS5nZXRJZDIoKSA9PSAxMDEpOwogICAgICAgIGFz\nc2VydEVxdWFscyhkb2czMS5nZXROYW1lKCksICJoZWxsb0RvZzYiKTsKICAg\nICAgICBkb2czMS5zZXROYW1lKCJEb2c2Iik7CiAgICAgICAgZG9nMzEuc2V0\nRG9tZXN0aWModHJ1ZSk7CgogICAgICAgIC8vIHVwZGF0ZSBkb2c0CiAgICAg\nICAgRG9nVGFibGU0IGRvZzR4ID0gZW0uZmluZChEb2dUYWJsZTQuY2xhc3Ms\nIGtlbS5nZXRPYmplY3RJZChkb2c0KSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShk\nb2c0eC5nZXRJZDIoKSA9PSAxMDAgfHwgZG9nNHguZ2V0SWQyKCkgPT0gMTAx\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoZG9nNHguZ2V0TmFtZSgpLCAiaGVs\nbG9Eb2c3Iik7CiAgICAgICAgZG9nNHguc2V0TmFtZSgiRG9nNyIpOwogICAg\nICAgIGRvZzR4LnNldERvbWVzdGljKHRydWUpOwogICAgICAgIERvZ1RhYmxl\nNCBkb2c0MSA9IGVtLmZpbmQoRG9nVGFibGU0LmNsYXNzLCBrZW0uZ2V0T2Jq\nZWN0SWQoZG9nNGEpKTsKICAgICAgICBhc3NlcnRUcnVlKGRvZzQxLmdldElk\nMigpID09IDEwMCB8fCBkb2c0MS5nZXRJZDIoKSA9PSAxMDEpOwogICAgICAg\nIGFzc2VydEVxdWFscyhkb2c0MS5nZXROYW1lKCksICJoZWxsb0RvZzgiKTsK\nICAgICAgICBkb2c0MS5zZXROYW1lKCJEb2c4Iik7CiAgICAgICAgZG9nNDEu\nc2V0RG9tZXN0aWModHJ1ZSk7CgogICAgICAgIC8vIGdldCB0aGUgdXBkYXRl\nIGRvZyBuYW1lCgogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4o\nKTsKICAgICAgICBRdWVyeSBxcnkxID0gZW0uY3JlYXRlUXVlcnkoInNlbGVj\ndCBkIGZyb20gRG9nVGFibGUgZCBvcmRlciBieSBkLm5hbWUiKTsKICAgICAg\nICBMaXN0IHJlc3VsdDEgPSBxcnkxLmdldFJlc3VsdExpc3QoKTsKICAgICAg\nICBmb3IgKGludCBpbmRleCA9IDA7IGluZGV4IDwgcmVzdWx0MS5zaXplKCk7\nIGluZGV4KyspIHsKICAgICAgICAgICAgRG9nVGFibGUgZG9nMXh4ID0gKERv\nZ1RhYmxlKSByZXN1bHQxLmdldChpbmRleCk7CiAgICAgICAgICAgIGFzc2Vy\ndFRydWUoZG9nMXh4LmdldElkMigpID09IDIwIHx8IGRvZzF4eC5nZXRJZDIo\nKSA9PSAyMSk7CiAgICAgICAgICAgIGludCBqID0gaW5kZXggKyAxOwogICAg\nICAgICAgICBhc3NlcnRFcXVhbHMoZG9nMXh4LmdldE5hbWUoKSwgIkRvZyIg\nKyBqKTsKCiAgICAgICAgfQoKICAgICAgICBRdWVyeSBxcnkyID0gZW0KICAg\nICAgICAgICAgICAgIC5jcmVhdGVRdWVyeSgic2VsZWN0IGQgZnJvbSBEb2dU\nYWJsZTIgZCBvcmRlciBieSBkLm5hbWUiKTsKICAgICAgICBMaXN0IHJlc3Vs\ndDIgPSBxcnkyLmdldFJlc3VsdExpc3QoKTsKCiAgICAgICAgZm9yIChpbnQg\naW5kZXggPSAwOyBpbmRleCA8IHJlc3VsdDIuc2l6ZSgpOyBpbmRleCsrKSB7\nCiAgICAgICAgICAgIERvZ1RhYmxlMiBkb2cyeHggPSAoRG9nVGFibGUyKSBy\nZXN1bHQyLmdldChpbmRleCk7CiAgICAgICAgICAgIGFzc2VydFRydWUoZG9n\nMnh4LmdldElkMigpID09IDEwMCB8fCBkb2cyeHguZ2V0SWQyKCkgPT0gMTAx\nKTsKICAgICAgICAgICAgaW50IGogPSBpbmRleCArIDM7CiAgICAgICAgICAg\nIGFzc2VydEVxdWFscyhkb2cyeHguZ2V0TmFtZSgpLCAiRG9nIiArIGopOwog\nICAgICAgIH0KCiAgICAgICAgUXVlcnkgcXJ5MyA9IGVtCiAgICAgICAgICAg\nICAgICAuY3JlYXRlUXVlcnkoInNlbGVjdCBkIGZyb20gRG9nVGFibGUzIGQg\nb3JkZXIgYnkgZC5uYW1lIik7CiAgICAgICAgTGlzdCByZXN1bHQzID0gcXJ5\nMy5nZXRSZXN1bHRMaXN0KCk7CgogICAgICAgIGZvciAoaW50IGluZGV4ID0g\nMDsgaW5kZXggPCByZXN1bHQzLnNpemUoKTsgaW5kZXgrKykgewogICAgICAg\nICAgICBEb2dUYWJsZTMgZG9nM3h4ID0gKERvZ1RhYmxlMykgcmVzdWx0My5n\nZXQoaW5kZXgpOwogICAgICAgICAgICBhc3NlcnRUcnVlKGRvZzN4eC5nZXRJ\nZDIoKSA9PSAxMDAgfHwgZG9nM3h4LmdldElkMigpID09IDEwMSk7CiAgICAg\nICAgICAgIGludCBqID0gaW5kZXggKyA1OwogICAgICAgICAgICBhc3NlcnRF\ncXVhbHMoZG9nM3h4LmdldE5hbWUoKSwgIkRvZyIgKyBqKTsKICAgICAgICB9\nCgogICAgICAgIFF1ZXJ5IHFyeTQgPSBlbQogICAgICAgICAgICAgICAgLmNy\nZWF0ZVF1ZXJ5KCJzZWxlY3QgZCBmcm9tIERvZ1RhYmxlNCBkIG9yZGVyIGJ5\nIGQubmFtZSIpOwogICAgICAgIExpc3QgcmVzdWx0NCA9IHFyeTQuZ2V0UmVz\ndWx0TGlzdCgpOwoKICAgICAgICBmb3IgKGludCBpbmRleCA9IDA7IGluZGV4\nIDwgcmVzdWx0NC5zaXplKCk7IGluZGV4KyspIHsKICAgICAgICAgICAgRG9n\nVGFibGU0IGRvZzR4eCA9IChEb2dUYWJsZTQpIHJlc3VsdDQuZ2V0KGluZGV4\nKTsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZShkb2c0eHguZ2V0SWQyKCkgPT0g\nMTAwIHx8IGRvZzR4eC5nZXRJZDIoKSA9PSAxMDEpOwogICAgICAgICAgICBp\nbnQgaiA9IGluZGV4ICsgNzsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKGRv\nZzR4eC5nZXROYW1lKCksICJEb2ciICsgaik7CiAgICAgICAgfQoKICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIGVtLmNs\nb3NlKCk7CiAgICB9Cn0gLy8gZW5kIG9mIFRlc3RNdWx0aXBsZVNjaGVtYU5h\nbWVzCg==\n","encoding":"base64"}

