{"sha":"70c55856cfb32b1deb7c4b2c433a45ab10d90a2c","node_id":"MDQ6QmxvYjIwNjM2NDo3MGM1NTg1NmNmYjMyYjFkZWI3YzRiMmM0MzNhNDVhYjEwZDkwYTJj","size":6336,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/70c55856cfb32b1deb7c4b2c433a45ab10d90a2c","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuanBxbC5m\ndW5jdGlvbnM7CgppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5TWFu\nYWdlcjsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5jb25mLkpE\nQkNDb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpk\nYmMuc3FsLkRCRGljdGlvbmFyeTsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5qZGJjLnNxbC5NeVNRTERpY3Rpb25hcnk7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXJTUEk7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY29tbW9u\nLmFwcHMuQ29tcFVzZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVy\nc2lzdGVuY2UudGVzdC5TaW5nbGVFTUZUZXN0Q2FzZTsKCnB1YmxpYyBjbGFz\ncyBUZXN0RUpCUUxGdW5jdGlvbiBleHRlbmRzIFNpbmdsZUVNRlRlc3RDYXNl\nIHsKCiAgICBwcml2YXRlIGludCB1c2VyaWQzLCB1c2VyaWQ1OwoKICAgIHB1\nYmxpYyB2b2lkIHNldFVwKCkgewogICAgICAgIHNldFVwKENvbXBVc2VyLmNs\nYXNzLCBDTEVBUl9UQUJMRVMpOwoKICAgICAgICBDb21wVXNlciB1c2VyMSA9\nIGNyZWF0ZVVzZXIoIlNlZXRoYSIsICJNQUMiLCAzNiwgdHJ1ZSk7CiAgICAg\nICAgQ29tcFVzZXIgdXNlcjIgPSBjcmVhdGVVc2VyKCJTaGFubm9uICIsICJQ\nQyIsIDM2LCBmYWxzZSk7CiAgICAgICAgQ29tcFVzZXIgdXNlcjMgPSBjcmVh\ndGVVc2VyKCJVZ28iLCAiUEMiLCAxOSwgdHJ1ZSk7CiAgICAgICAgQ29tcFVz\nZXIgdXNlcjQgPSBjcmVhdGVVc2VyKCJfSmFjb2IiLCAiTElOVVgiLCAxMCwg\ndHJ1ZSk7CiAgICAgICAgQ29tcFVzZXIgdXNlcjUgPSBjcmVhdGVVc2VyKCJG\nYW16eSIsICJVTklYIiwgMjksIGZhbHNlKTsKICAgICAgICBDb21wVXNlciB1\nc2VyNiA9IGNyZWF0ZVVzZXIoIlNoYWRlIiwgIlVOSVgiLCAyMywgZmFsc2Up\nOwoKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0\neU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2lu\nKCk7CiAgICAgICAgZW0ucGVyc2lzdCh1c2VyMSk7CiAgICAgICAgZW0ucGVy\nc2lzdCh1c2VyMik7CiAgICAgICAgZW0ucGVyc2lzdCh1c2VyMyk7CiAgICAg\nICAgdXNlcmlkMyA9IHVzZXIzLmdldFVzZXJpZCgpOwogICAgICAgIGVtLnBl\ncnNpc3QodXNlcjQpOwogICAgICAgIGVtLnBlcnNpc3QodXNlcjUpOwogICAg\nICAgIHVzZXJpZDUgPSB1c2VyNS5nZXRVc2VyaWQoKTsKICAgICAgICBlbS5w\nZXJzaXN0KHVzZXI2KTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNv\nbW1pdCgpOwogICAgICAgIGVtLmNsZWFyKCk7CiAgICAgICAgZW0uY2xvc2Uo\nKTsKICAgIH0KCiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RMb3dlckZ1bmMo\nKSB7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXJTUEkgZW0gPSBlbWYu\nY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIERCRGljdGlvbmFyeSBk\naWN0ID0gKChKREJDQ29uZmlndXJhdGlvbikgZW0uZ2V0Q29uZmlndXJhdGlv\nbigpKS5nZXREQkRpY3Rpb25hcnlJbnN0YW5jZSgpOwogICAgICAgIGlmIChk\naWN0IGluc3RhbmNlb2YgTXlTUUxEaWN0aW9uYXJ5ICkgewogICAgICAgICAg\nICAvLyBUaGlzIHRlc3RjYXNlIHJlcXVpcmVzIE9QRU5KUEEtNjEyIHRvIGV4\nZWN1dGUgb24gTXlTUUwuIAogICAgICAgICAgICByZXR1cm47CiAgICAgICAg\nfQogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKCiAgICAg\nICAgQ29tcFVzZXIgdXNlciA9IGVtLmZpbmQoQ29tcFVzZXIuY2xhc3MsIHVz\nZXJpZDMpOwogICAgICAgIGFzc2VydE5vdE51bGwodXNlcik7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKCJVZ28iLCB1c2VyLmdldE5hbWUoKSk7CgogICAgICAg\nIFN0cmluZyBxdWVyeSA9ICJVUERBVEUgQ29tcFVzZXIgZSBTRVQgIiArCiAg\nICAgICAgICAgICJlLm5hbWUgPSBMT1dFUihlLm5hbWUpIFdIRVJFIGUubmFt\nZT0nVWdvJyI7CgogICAgICAgIGludCByZXN1bHQgPSBlbS5jcmVhdGVRdWVy\neShxdWVyeSkuZXhlY3V0ZVVwZGF0ZSgpOwoKICAgICAgICB1c2VyID0gZW0u\nZmluZChDb21wVXNlci5jbGFzcywgdXNlcmlkMyk7CiAgICAgICAgZW0ucmVm\ncmVzaCh1c2VyKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHVzZXIpOwogICAg\nICAgIGFzc2VydEVxdWFscygidWdvIiwgdXNlci5nZXROYW1lKCkpOwoKICAg\nICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIGVt\nLmNsZWFyKCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCB0ZXN0TG93ZXJDbG9iRnVuYygpIHsKICAgICAgICBPcGVuSlBB\nRW50aXR5TWFuYWdlclNQSSBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2Vy\nKCk7CiAgICAgICAgLy8gc29tZSBkYXRhYmFzZXMgZG8gbm90IHN1cHBvcnQg\nY2FzZSBjb252ZXJzaW9uIG9uIExPQnMsCiAgICAgICAgLy8ganVzdCBza2lw\nIHRoaXMgdGVzdCBjYXNlCiAgICAgICAgREJEaWN0aW9uYXJ5IGRpY3QgPSAo\nKEpEQkNDb25maWd1cmF0aW9uKSBlbS5nZXRDb25maWd1cmF0aW9uKCkpCiAg\nICAgICAgICAgIC5nZXREQkRpY3Rpb25hcnlJbnN0YW5jZSgpOwogICAgICAg\nIGlmICghZGljdC5zdXBwb3J0c0Nhc2VDb252ZXJzaW9uRm9yTG9iKSB7CiAg\nICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgZW0uZ2V0VHJh\nbnNhY3Rpb24oKS5iZWdpbigpOwoKICAgICAgICBDb21wVXNlciB1c2VyID0g\nZW0uZmluZChDb21wVXNlci5jbGFzcywgdXNlcmlkNSk7CiAgICAgICAgYXNz\nZXJ0Tm90TnVsbCh1c2VyKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIkZhbXp5\nIiwgdXNlci5nZXROYW1lKCkpOwoKICAgICAgICBTdHJpbmcgcXVlcnkgPSAi\nVVBEQVRFIENvbXBVc2VyIGUgU0VUICIgKwogICAgICAgICAgICAgICAgImUu\nbmFtZSA9IExPV0VSKGUubmFtZSkgV0hFUkUgTE9XRVIoZS5uYW1lQXNMb2Ip\nPSdmYW16eSciOwoKICAgICAgICBpbnQgcmVzdWx0ID0gZW0uY3JlYXRlUXVl\ncnkocXVlcnkpLmV4ZWN1dGVVcGRhdGUoKTsKCiAgICAgICAgdXNlciA9IGVt\nLmZpbmQoQ29tcFVzZXIuY2xhc3MsIHVzZXJpZDUpOwogICAgICAgIGVtLnJl\nZnJlc2godXNlcik7CiAgICAgICAgYXNzZXJ0Tm90TnVsbCh1c2VyKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoImZhbXp5IiwgdXNlci5nZXROYW1lKCkpOwoK\nICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAg\nIGVtLmNsZWFyKCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0VXBwZXJGdW5jKCkgewogICAgICAgIE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyU1BJIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIo\nKTsKICAgICAgICBEQkRpY3Rpb25hcnkgZGljdCA9ICgoSkRCQ0NvbmZpZ3Vy\nYXRpb24pIGVtLmdldENvbmZpZ3VyYXRpb24oKSkuZ2V0REJEaWN0aW9uYXJ5\nSW5zdGFuY2UoKTsKICAgICAgICBpZiAoZGljdCBpbnN0YW5jZW9mIE15U1FM\nRGljdGlvbmFyeSApIHsKICAgICAgICAgICAgLy8gVGhpcyB0ZXN0Y2FzZSBy\nZXF1aXJlcyBPUEVOSlBBLTYxMiB0byBleGVjdXRlIG9uIE15U1FMLiAKICAg\nICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBlbS5nZXRUcmFu\nc2FjdGlvbigpLmJlZ2luKCk7CgogICAgICAgIENvbXBVc2VyIHVzZXIgPSBl\nbS5maW5kKENvbXBVc2VyLmNsYXNzLCB1c2VyaWQzKTsKICAgICAgICBhc3Nl\ncnROb3ROdWxsKHVzZXIpOwogICAgICAgIGFzc2VydEVxdWFscygiVWdvIiwg\ndXNlci5nZXROYW1lKCkpOwoKICAgICAgICBTdHJpbmcgcXVlcnkgPSAiVVBE\nQVRFIENvbXBVc2VyIGUgU0VUICIgKwogICAgICAgICAgICAiZS5uYW1lID0g\nVVBQRVIoZS5uYW1lKSBXSEVSRSBlLm5hbWU9J1VnbyciOwoKICAgICAgICBp\nbnQgcmVzdWx0ID0gZW0uY3JlYXRlUXVlcnkocXVlcnkpLmV4ZWN1dGVVcGRh\ndGUoKTsKCiAgICAgICAgdXNlciA9IGVtLmZpbmQoQ29tcFVzZXIuY2xhc3Ms\nIHVzZXJpZDMpOwogICAgICAgIGVtLnJlZnJlc2godXNlcik7CiAgICAgICAg\nYXNzZXJ0Tm90TnVsbCh1c2VyKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIlVH\nTyIsIHVzZXIuZ2V0TmFtZSgpKTsKCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rp\nb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbGVhcigpOwogICAgICAgIGVt\nLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFVwcGVyQ2xv\nYkZ1bmMoKSB7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXJTUEkgZW0g\nPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIC8vIHNvbWUg\nZGF0YWJhc2VzIGRvIG5vdCBzdXBwb3J0IGNhc2UgY29udmVyc2lvbiBvbiBM\nT0JzLAogICAgICAgIC8vIGp1c3Qgc2tpcCB0aGlzIHRlc3QgY2FzZQogICAg\nICAgIERCRGljdGlvbmFyeSBkaWN0ID0gKChKREJDQ29uZmlndXJhdGlvbikg\nZW0uZ2V0Q29uZmlndXJhdGlvbigpKQogICAgICAgICAgICAuZ2V0REJEaWN0\naW9uYXJ5SW5zdGFuY2UoKTsKICAgICAgICBpZiAoIWRpY3Quc3VwcG9ydHND\nYXNlQ29udmVyc2lvbkZvckxvYikgewogICAgICAgICAgICByZXR1cm47CiAg\nICAgICAgfQogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsK\nCiAgICAgICAgQ29tcFVzZXIgdXNlciA9IGVtLmZpbmQoQ29tcFVzZXIuY2xh\nc3MsIHVzZXJpZDUpOwogICAgICAgIGFzc2VydE5vdE51bGwodXNlcik7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKCJGYW16eSIsIHVzZXIuZ2V0TmFtZSgpKTsK\nCiAgICAgICAgU3RyaW5nIHF1ZXJ5ID0gIlVQREFURSBDb21wVXNlciBlIFNF\nVCAiICsKICAgICAgICAgICAgICAgICJlLm5hbWUgPSBVUFBFUihlLm5hbWUp\nIFdIRVJFIFVQUEVSKGUubmFtZUFzTG9iKT0nRkFNWlknIjsKCiAgICAgICAg\naW50IHJlc3VsdCA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5KS5leGVjdXRlVXBk\nYXRlKCk7CgogICAgICAgIHVzZXIgPSBlbS5maW5kKENvbXBVc2VyLmNsYXNz\nLCB1c2VyaWQ1KTsKICAgICAgICBlbS5yZWZyZXNoKHVzZXIpOwogICAgICAg\nIGFzc2VydE5vdE51bGwodXNlcik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJG\nQU1aWSIsIHVzZXIuZ2V0TmFtZSgpKTsKCiAgICAgICAgZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbGVhcigpOwogICAgICAg\nIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIENvbXBVc2VyIGNyZWF0\nZVVzZXIoU3RyaW5nIG5hbWUsIFN0cmluZyBjTmFtZSwgaW50IGFnZSwKICAg\nICAgICBib29sZWFuIGlzTWFsZSkgewogICAgICAgIENvbXBVc2VyIHVzZXIg\nPSBuZXcgQ29tcFVzZXIoKTsKICAgICAgICB1c2VyLnNldE5hbWUobmFtZSk7\nCiAgICAgICAgdXNlci5zZXRDb21wdXRlck5hbWUoY05hbWUpOwogICAgICAg\nIHVzZXIuc2V0QWdlKGFnZSk7CiAgICAgICAgdXNlci5zZXROYW1lQXNMb2Io\nbmFtZSk7CiAgICAgICAgcmV0dXJuIHVzZXI7CiAgICB9Cn0K\n","encoding":"base64"}

