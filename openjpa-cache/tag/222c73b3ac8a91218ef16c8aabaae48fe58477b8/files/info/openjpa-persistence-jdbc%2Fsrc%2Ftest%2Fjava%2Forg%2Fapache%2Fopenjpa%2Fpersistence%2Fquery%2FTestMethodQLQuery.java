{"sha":"d0cdbddd6fe77833c5fe52624ac28a4bb34afaee","node_id":"MDQ6QmxvYjIwNjM2NDpkMGNkYmRkZDZmZTc3ODMzYzVmZTUyNjI0YWMyOGE0YmIzNGFmYWVl","size":3504,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/d0cdbddd6fe77833c5fe52624ac28a4bb34afaee","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5xdWVyeTsKCmlt\ncG9ydCBqYXZhLnV0aWwuTWFwOwppbXBvcnQgamF2YS51dGlsLkFycmF5TGlz\ndDsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UudGVz\ndC5TaW5nbGVFTVRlc3RDYXNlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLnBlcnNpc3RlbmNlLk9wZW5KUEFRdWVyeTsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5wZXJzaXN0ZW5jZS5RdWVyeUltcGw7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuQXJndW1lbnRFeGNlcHRpb247Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlF1ZXJ5TGFuZ3VhZ2Vz\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5TdG9yZUNvbnRl\neHQ7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkZldGNoQ29u\nZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkNs\nYXNzTWV0YURhdGE7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnJv\ncC5SZXN1bHRPYmplY3RQcm92aWRlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5saWIucm9wLkxpc3RSZXN1bHRPYmplY3RQcm92aWRlcjsKCnB1Ymxp\nYyBjbGFzcyBUZXN0TWV0aG9kUUxRdWVyeQogICAgZXh0ZW5kcyBTaW5nbGVF\nTVRlc3RDYXNlIHsKCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIHNl\ndFVwKCkgewogICAgICAgIHNldFVwKFNpbXBsZUVudGl0eS5jbGFzcyk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgdGVzdE1ldGhvZFFMV2l0aG91dFBhcmFt\nZXRlcnNEZWNsYXJlZCgpIHsKICAgICAgICBPcGVuSlBBUXVlcnkgcSA9IGVt\nLmNyZWF0ZVF1ZXJ5KFF1ZXJ5TGFuZ3VhZ2VzLkxBTkdfTUVUSE9EUUwsCiAg\nICAgICAgICAgIGdldENsYXNzKCkuZ2V0TmFtZSgpICsgIi5lY2hvIik7CiAg\nICAgICAgKChRdWVyeUltcGwpIHEpLmdldERlbGVnYXRlKCkuc2V0Q2FuZGlk\nYXRlVHlwZSgKICAgICAgICAgICAgU2ltcGxlRW50aXR5LmNsYXNzLCB0cnVl\nKTsKICAgICAgICBxLnNldFBhcmFtZXRlcigicGFyYW0iLCA1KTsKICAgICAg\nICAoKFF1ZXJ5SW1wbCkgcSkuZ2V0RGVsZWdhdGUoKS5kZWNsYXJlUGFyYW1l\ndGVycygiSW50ZWdlciBwYXJhbSIpOwogICAgICAgIGFzc2VydEVxdWFscyg1\nLCBxLmdldFJlc3VsdExpc3QoKS5nZXQoMCkpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RJbnZhbGlkTWV0aG9kUmV0dXJuVHlwZSgpIHsKICAgICAg\nICBPcGVuSlBBUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5KFF1ZXJ5TGFuZ3Vh\nZ2VzLkxBTkdfTUVUSE9EUUwsCiAgICAgICAgICAgIGdldENsYXNzKCkuZ2V0\nTmFtZSgpICsgIi5pbnZhbGlkUmV0dXJuTWV0aCIpOwogICAgICAgICgoUXVl\ncnlJbXBsKSBxKS5nZXREZWxlZ2F0ZSgpLnNldENhbmRpZGF0ZVR5cGUoCiAg\nICAgICAgICAgIFNpbXBsZUVudGl0eS5jbGFzcywgdHJ1ZSk7CiAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgcS5nZXRSZXN1bHRMaXN0KCkuZ2V0KDApOwog\nICAgICAgICAgICBmYWlsKCJzaG91bGQgaGF2ZSBnb3R0ZW4gYW4gZXhjZXB0\naW9uIHNpbmNlIG1ldGhvZCBpcyBpbnZhbGlkIik7CiAgICAgICAgfSBjYXRj\naCAoQXJndW1lbnRFeGNlcHRpb24gYWUpIHsKICAgICAgICAgICAgLy8gZXhw\nZWN0ZWQKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFZv\naWRNZXRob2RSZXR1cm5UeXBlKCkgewogICAgICAgIE9wZW5KUEFRdWVyeSBx\nID0gZW0uY3JlYXRlUXVlcnkoUXVlcnlMYW5ndWFnZXMuTEFOR19NRVRIT0RR\nTCwKICAgICAgICAgICAgZ2V0Q2xhc3MoKS5nZXROYW1lKCkgKyAiLnZvaWRN\nZXRoIik7CiAgICAgICAgKChRdWVyeUltcGwpIHEpLmdldERlbGVnYXRlKCku\nc2V0Q2FuZGlkYXRlVHlwZSgKICAgICAgICAgICAgU2ltcGxlRW50aXR5LmNs\nYXNzLCB0cnVlKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBxLmdldFJl\nc3VsdExpc3QoKS5nZXQoMCk7CiAgICAgICAgICAgIGZhaWwoInNob3VsZCBo\nYXZlIGdvdHRlbiBhbiBleGNlcHRpb24gc2luY2UgbWV0aG9kIGlzIGludmFs\naWQiKTsKICAgICAgICB9IGNhdGNoIChBcmd1bWVudEV4Y2VwdGlvbiBhZSkg\newogICAgICAgICAgICAvLyBleHBlY3RlZAogICAgICAgIH0KICAgIH0KCiAg\nICBwdWJsaWMgc3RhdGljIFJlc3VsdE9iamVjdFByb3ZpZGVyIGVjaG8oU3Rv\ncmVDb250ZXh0IGN0eCwKICAgICAgICBDbGFzc01ldGFEYXRhIG1ldGEsIGJv\nb2xlYW4gc3VicywgTWFwIHBhcmFtcywgRmV0Y2hDb25maWd1cmF0aW9uIGNv\nbmYpIHsKICAgICAgICByZXR1cm4gbmV3IExpc3RSZXN1bHRPYmplY3RQcm92\naWRlcihuZXcgQXJyYXlMaXN0KHBhcmFtcy52YWx1ZXMoKSkpOwogICAgfQoK\nICAgIHB1YmxpYyBzdGF0aWMgdm9pZCB2b2lkTWV0aChTdG9yZUNvbnRleHQg\nY3R4LAogICAgICAgIENsYXNzTWV0YURhdGEgbWV0YSwgYm9vbGVhbiBzdWJz\nLCBNYXAgcGFyYW1zLCBGZXRjaENvbmZpZ3VyYXRpb24gY29uZikgewogICAg\nfQoKICAgIHB1YmxpYyBzdGF0aWMgT2JqZWN0IGludmFsaWRSZXR1cm5NZXRo\nKFN0b3JlQ29udGV4dCBjdHgsCiAgICAgICAgQ2xhc3NNZXRhRGF0YSBtZXRh\nLCBib29sZWFuIHN1YnMsIE1hcCBwYXJhbXMsIEZldGNoQ29uZmlndXJhdGlv\nbiBjb25mKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9Cn0K\n","encoding":"base64"}

