{"sha":"ac5c1371f75a275834f79a14dbe887e4c0a19d7f","node_id":"MDQ6QmxvYjIwNjM2NDphYzVjMTM3MWY3NWEyNzU4MzRmNzlhMTRkYmU4ODdlNGMwYTE5ZDdm","size":5413,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/ac5c1371f75a275834f79a14dbe887e4c0a19d7f","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5xdWVyeTsKCmlt\ncG9ydCBqYXZhLnV0aWwuTGlzdDsKCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5j\nZS5FbnRpdHlNYW5hZ2VyOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuUXVl\ncnk7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuY29uZi5KREJD\nQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLnNxbC5NeVNRTERpY3Rpb25hcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5U1BJ\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnRlc3Qu\nU2luZ2xlRU1GVGVzdENhc2U7CgpwdWJsaWMgY2xhc3MgVGVzdFF1ZXJ5RXNj\nYXBlQ2hhcmFjdGVycwogICAgZXh0ZW5kcyBTaW5nbGVFTUZUZXN0Q2FzZSB7\nCgogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7CiAgICAgICAgc2V0VXAoRW1w\nbG95ZWUuY2xhc3MsIENMRUFSX1RBQkxFUyk7CgogICAgICAgIEVudGl0eU1h\nbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAg\nIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKCiAgICAgICAgRW1wbG95\nZWUgZSA9IG5ldyBFbXBsb3llZSgpOwogICAgICAgIGUuc2V0TmFtZSgiTWlr\nZSBEaWNrIik7CiAgICAgICAgZS5zZXRFbXBJZCgxKTsKICAgICAgICBlbS5w\nZXJzaXN0KGUpOwoKICAgICAgICBlID0gbmV3IEVtcGxveWVlKCk7CiAgICAg\nICAgZS5zZXROYW1lKCJNaWtlIEpvbmVzIik7CiAgICAgICAgZS5zZXRFbXBJ\nZCgyKTsKICAgICAgICBlbS5wZXJzaXN0KGUpOwoKICAgICAgICBlID0gbmV3\nIEVtcGxveWVlKCk7CiAgICAgICAgZS5zZXROYW1lKCJNaWtlIFNtaXRoIik7\nCiAgICAgICAgZS5zZXRFbXBJZCgzKTsKICAgICAgICBlbS5wZXJzaXN0KGUp\nOwogICAgICAgIAogICAgICAgIGUgPSBuZXcgRW1wbG95ZWUoKTsKICAgICAg\nICBlLnNldE5hbWUoIk0la2UgU21pdGgiKTsKICAgICAgICBlLnNldEVtcElk\nKDQpOwogICAgICAgIGVtLnBlcnNpc3QoZSk7CiAgICAgICAgZW0uZ2V0VHJh\nbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHRlYXJEb3duKCkgdGhyb3dzIEV4Y2VwdGlv\nbiB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRp\ndHlNYW5hZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdp\nbigpOwogICAgICAgIGVtLmNyZWF0ZVF1ZXJ5KCJEZWxldGUgZnJvbSBFbXBs\nb3llZSIpLmV4ZWN1dGVVcGRhdGUoKTsKICAgICAgICBlbS5nZXRUcmFuc2Fj\ndGlvbigpLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICAgICAg\nc3VwZXIudGVhckRvd24oKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQg\ndGVzdE5vcm1hbFF1ZXJ5KCkgewogICAgICAgIHBlcmZvcm1GaW5kICgiRW1w\nbG95ZWUuZmluZEJ5TmFtZSIsICIlRGljayIsIDEpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHRlc3RNdWx0aVJlc3VsdFF1ZXJ5KCkgewogICAgICAgIHBl\ncmZvcm1GaW5kICgiRW1wbG95ZWUuZmluZEJ5TmFtZSIsICJNaWtlJSIsIDMp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RFc2NhcGVkUXVlcnkoKSB7\nCiAgICAgICAgaWYoZ2V0REJEaWN0aW9uYXJ5KGVtZikgaW5zdGFuY2VvZiBN\neVNRTERpY3Rpb25hcnkpIHsgCiAgICAgICAgICAgIHJldHVybjsKICAgICAg\nICB9CiAgICAgICAgCiAgICAgICAgcGVyZm9ybUZpbmQgKCJFbXBsb3llZS5m\naW5kQnlOYW1lRXNjYXBlZCIsIAogICAgICAgICAgICAgICAgIk1cXCUlIiwg\nMSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdERvdWJsZUVzY2FwZWRR\ndWVyeSgpIHsKICAgICAgICBwZXJmb3JtRmluZCAoIkVtcGxveWVlLmZpbmRC\neU5hbWUiLCAiXFxcXCIsIDApOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRl\nc3RXcm9uZ0VzY2FwZSgpIHsKICAgICAgICBwZXJmb3JtRmluZCAoIkVtcGxv\neWVlLmZpbmRCeU5hbWUiLCAiTXwlJSIsIDApOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHRlc3REb3VibGVTbGFzaFF1ZXJ5KCkgewogICAgICAgIC8vIGdl\ndCB0aGUgRGljdGlvbmFyeSBhbmQgY2hlY2sgdGhlIGFsd2F5c0FkZFNlYXJj\naFN0cmluZyBmbGFnCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0\nb3J5U1BJIG9qcGFFbWYgPSAKICAgICAgICAgICAgKE9wZW5KUEFFbnRpdHlN\nYW5hZ2VyRmFjdG9yeVNQSSkgZW1mOwogICAgICAgIEpEQkNDb25maWd1cmF0\naW9uIGNvbmYgPSAoSkRCQ0NvbmZpZ3VyYXRpb24pb2pwYUVtZi5nZXRDb25m\naWd1cmF0aW9uKCk7CiAgICAgICAgCiAgICAgICAgaWYgKGNvbmYuZ2V0REJE\naWN0aW9uYXJ5SW5zdGFuY2UoKS4KICAgICAgICAgICAgICAgIHJlcXVpcmVz\nU2VhcmNoU3RyaW5nRXNjYXBlRm9yTGlrZSA9PSB0cnVlKSB7CiAgICAgICAg\nICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHBlcmZvcm1GaW5kICgi\nRW1wbG95ZWUuZmluZEJ5TmFtZSIsICJcXCIsIDApOwogICAgfQoKICAgIEBT\ndXBwcmVzc1dhcm5pbmdzKCJ1bmNoZWNrZWQiKQogICAgcHVibGljIHZvaWQg\ndGVzdERpZmZlcmVudEVzY2FwZUNoYXJhY3RlciAoKSB7CiAgICAgICAgT3Bl\nbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5U1BJIG9qcGFFbWYgPSAKICAgICAg\nICAgICAgKE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSSkgZW1mOwog\nICAgICAgIEpEQkNDb25maWd1cmF0aW9uIGNvbmYgPSAoSkRCQ0NvbmZpZ3Vy\nYXRpb24pb2pwYUVtZi5nZXRDb25maWd1cmF0aW9uKCk7CgogICAgICAgIC8v\nIFdvdWxkIGJlIG5pY2UgdG8ganVzdCBwYXNzIGEgbWFwIHRvIHRoZSBjcmVh\ndGVFbnRpdHlNYW5hZ2VyLCBidXQKICAgICAgICAvLyBzZWVtcyBsaWtlIGl0\nIHdvdWxkIGJlIHRvbyBtdWNoIHRyb3VibGUgdG8gZ2V0IHRoZSBwcm9wZXIg\nREIgdHlwZQogICAgICAgIC8vIGFuZCB0aGVuIGJ1aWxkIHRoZSBzdHJpbmcg\nZm9yIHRoZSBtYXAuCiAgICAgICAgY29uZi5nZXREQkRpY3Rpb25hcnlJbnN0\nYW5jZSgpLnJlcXVpcmVzU2VhcmNoU3RyaW5nRXNjYXBlRm9yTGlrZSA9IHRy\ndWU7CiAgICAgICAgY29uZi5nZXREQkRpY3Rpb25hcnlJbnN0YW5jZSgpLnNl\nYXJjaFN0cmluZ0VzY2FwZSA9ICJ8IjsKICAgICAgICBFbnRpdHlNYW5hZ2Vy\nIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKCiAgICAgICAgUXVl\ncnkgcSA9IGVtLmNyZWF0ZU5hbWVkUXVlcnkoIkVtcGxveWVlLmZpbmRCeU5h\nbWUiKTsKICAgICAgICBxLnNldFBhcmFtZXRlcigibmFtZSIsICJNfCUlIik7\nCiAgICAgICAgTGlzdDxFbXBsb3llZT4gZW1wcyA9IChMaXN0PEVtcGxveWVl\nPikgcS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEs\nIGVtcHMuc2l6ZSgpKTsKCiAgICAgICAgU3RyaW5nIHVubmFtZWRRdWVyeSA9\nCiAgICAgICAgICAgICJTZWxlY3QgZSBmcm9tIEVtcGxveWVlIGUgd2hlcmUg\nZS5uYW1lIExJS0UgOm5hbWUiOwoKICAgICAgICBxID0gZW0uY3JlYXRlUXVl\ncnkodW5uYW1lZFF1ZXJ5KTsKICAgICAgICBxLnNldFBhcmFtZXRlcigibmFt\nZSIsICJNfCUlIik7CiAgICAgICAgZW1wcyA9IChMaXN0PEVtcGxveWVlPikg\ncS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGVt\ncHMuc2l6ZSgpKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIEBT\ndXBwcmVzc1dhcm5pbmdzKCJ1bmNoZWNrZWQiKQogICAgcHJpdmF0ZSB2b2lk\nIHBlcmZvcm1GaW5kIChTdHJpbmcgbmFtZWRRdWVyeSwgU3RyaW5nIHBhcmFt\nZXRlciwKICAgICAgICAgICAgaW50IGV4cGVjdGVkKSB7CiAgICAgICAgRW50\naXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7Cgog\nICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVOYW1lZFF1ZXJ5KG5hbWVkUXVl\ncnkpOwogICAgICAgIHEuc2V0UGFyYW1ldGVyKCJuYW1lIiwgcGFyYW1ldGVy\nKTsKICAgICAgICBMaXN0PEVtcGxveWVlPiBlbXBzID0gKExpc3Q8RW1wbG95\nZWU+KSBxLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nZXhwZWN0ZWQsIGVtcHMuc2l6ZSgpKTsKCiAgICAgICAgU3RyaW5nIHVubmFt\nZWRRdWVyeSA9CiAgICAgICAgICAgICJTZWxlY3QgZSBmcm9tIEVtcGxveWVl\nIGUgd2hlcmUgZS5uYW1lIExJS0UgOm5hbWUiOwogICAgICAgIGlmIChuYW1l\nZFF1ZXJ5LmVxdWFscygiRW1wbG95ZWUuZmluZEJ5TmFtZUVzY2FwZWQiKSkg\newogICAgICAgICAgICB1bm5hbWVkUXVlcnkgPQogICAgICAgICAgICAgICAg\nIlNlbGVjdCBlIGZyb20gRW1wbG95ZWUgZSB3aGVyZSBlLm5hbWUgTElLRSA6\nbmFtZSBFU0NBUEUgJ1xcJyI7CiAgICAgICAgfQogICAgICAgIHEgPSBlbS5j\ncmVhdGVRdWVyeSh1bm5hbWVkUXVlcnkpOwogICAgICAgIHEuc2V0UGFyYW1l\ndGVyKCJuYW1lIiwgcGFyYW1ldGVyKTsKICAgICAgICBlbXBzID0gKExpc3Q8\nRW1wbG95ZWU+KSBxLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoZXhwZWN0ZWQsIGVtcHMuc2l6ZSgpKTsKICAgICAgICBlbS5jbG9z\nZSgpOwogICAgfQp9Cg==\n","encoding":"base64"}

