{"sha":"ef49ea4939749c75d1003f1875f55c00fb9ec7c6","node_id":"MDQ6QmxvYjIwNjM2NDplZjQ5ZWE0OTM5NzQ5Yzc1ZDEwMDNmMTg3NWY1NWMwMGZiOWVjN2M2","size":6070,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/ef49ea4939749c75d1003f1875f55c00fb9ec7c6","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UucXVlcnk7\nCgppbXBvcnQgamF2YS51dGlsLkRhdGU7CmltcG9ydCBqYXZhLnV0aWwuTGlz\ndDsKCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyOwpp\nbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuUXVlcnk7CgppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnRlc3QuU2luZ2xlRU1GVGVzdENh\nc2U7CgovKioKICogVGVzdCBKUFFMIHN1YnF1ZXJ5CiAqLwpwdWJsaWMgY2xh\nc3MgVGVzdFN1YnF1ZXJ5CiAgICBleHRlbmRzIFNpbmdsZUVNRlRlc3RDYXNl\nIHsKCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpIHsKICAgICAgICBzZXRVcChD\ndXN0b21lci5jbGFzcywgQ3VzdG9tZXIuQ3VzdG9tZXJLZXkuY2xhc3MsIE9y\nZGVyLmNsYXNzLAogICAgICAgICAgICBPcmRlckl0ZW0uY2xhc3MsIEVtcGxv\neWVlLmNsYXNzLCBEZXBlbmRlbnQuY2xhc3MsCiAgICAgICAgICAgIERlcGVu\nZGVudElkLmNsYXNzLCBNYWdhemluZS5jbGFzcywgUHVibGlzaGVyLmNsYXNz\nLCBDTEVBUl9UQUJMRVMpOwogICAgfQoKICAgIHN0YXRpYyBTdHJpbmdbXSAg\ncXVlcnlzID0gbmV3IFN0cmluZ1tdIHsKICAgICAgICAic2VsZWN0IG8xLm9p\nZCBmcm9tIE9yZGVyIG8xIHdoZXJlIG8xLm9pZCBpbiAiICsKICAgICAgICAg\nICAgIiAoc2VsZWN0IGRpc3RpbmN0IG8ub2lkIGZyb20gT3JkZXJJdGVtIGks\nIE9yZGVyIG8iICsKICAgICAgICAgICAgIiB3aGVyZSBpLnF1YW50aXR5ID4g\nMTAgYW5kIG8uYW1vdW50ID4gMTAwMCBhbmQgaS5saWQgPSBvLm9pZCkiICwK\nICAgICAgICAic2VsZWN0IG8ub2lkIGZyb20gT3JkZXIgbyB3aGVyZSBvLmN1\nc3RvbWVyLm5hbWUgPSIgKwogICAgICAgICAgICAiIChzZWxlY3QgbWF4KG8y\nLmN1c3RvbWVyLm5hbWUpIGZyb20gT3JkZXIgbzIiICsKICAgICAgICAgICAg\nIiB3aGVyZSBvLmN1c3RvbWVyLmNpZC5pZCA9IG8yLmN1c3RvbWVyLmNpZC5p\nZCkiLAogICAgICAgICJzZWxlY3QgbyBmcm9tIE9yZGVyIG8gd2hlcmUgby5j\ndXN0b21lci5uYW1lID0iICsKICAgICAgICAgICAgIiAoc2VsZWN0IG1heChv\nMi5jdXN0b21lci5uYW1lKSBmcm9tIE9yZGVyIG8yIiArCiAgICAgICAgICAg\nICIgd2hlcmUgby5jdXN0b21lci5jaWQuaWQgPSBvMi5jdXN0b21lci5jaWQu\naWQpIiwKICAgICAgICAic2VsZWN0IG8ub2lkIGZyb20gT3JkZXIgbyB3aGVy\nZSBvLmFtb3VudCA+IiArCiAgICAgICAgICAgICIgKHNlbGVjdCBjb3VudChp\nKSBmcm9tIG8ubGluZWl0ZW1zIGkpIiwKICAgICAgICAic2VsZWN0IG8ub2lk\nIGZyb20gT3JkZXIgbyB3aGVyZSBvLmFtb3VudCA+IiArCiAgICAgICAgICAg\nICIgKHNlbGVjdCBjb3VudChvLmFtb3VudCkgZnJvbSBPcmRlciBvKSIsCiAg\nICAgICAgInNlbGVjdCBvLm9pZCBmcm9tIE9yZGVyIG8gd2hlcmUgby5hbW91\nbnQgPiIgKwogICAgICAgICAgICAiIChzZWxlY3QgY291bnQoby5vaWQpIGZy\nb20gT3JkZXIgbykiLAogICAgICAgICJzZWxlY3Qgby5vaWQgZnJvbSBPcmRl\nciBvIHdoZXJlIG8uYW1vdW50ID4iICsKICAgICAgICAgICAgIiAoc2VsZWN0\nIGF2ZyhvLmFtb3VudCkgZnJvbSBPcmRlciBvKSIsCiAgICAgICAgInNlbGVj\ndCBjLm5hbWUgZnJvbSBDdXN0b21lciBjIHdoZXJlIGV4aXN0cyIgKwogICAg\nICAgICAgICAiIChzZWxlY3QgbyBmcm9tIGMub3JkZXJzIG8gd2hlcmUgby5v\naWQgPSAxKSBvciBleGlzdHMiICsKICAgICAgICAgICAgIiAoc2VsZWN0IG8g\nZnJvbSBjLm9yZGVycyBvIHdoZXJlIG8ub2lkID0gMikiLAogICAgICAgICJz\nZWxlY3QgYy5uYW1lIGZyb20gQ3VzdG9tZXIgYywgaW4oYy5vcmRlcnMpIG8g\nd2hlcmUgby5hbW91bnQgYmV0d2VlbiIgKwogICAgICAgICAgICAiIChzZWxl\nY3QgbWF4KG8uYW1vdW50KSBmcm9tIE9yZGVyIG8pIGFuZCIgKwogICAgICAg\nICAgICAiIChzZWxlY3QgYXZnKG8uYW1vdW50KSBmcm9tIE9yZGVyIG8pICIs\nCiAgICAgICAgInNlbGVjdCBvLm9pZCBmcm9tIE9yZGVyIG8gd2hlcmUgby5h\nbW91bnQgPiIgKwogICAgICAgICAgICAiIChzZWxlY3Qgc3VtKG8yLmFtb3Vu\ndCkgZnJvbSBDdXN0b21lciBjLCBpbihjLm9yZGVycykgbzIpICIsICAgCiAg\nICAgICAgInNlbGVjdCBvLm9pZCBmcm9tIE9yZGVyIG8gd2hlcmUgby5hbW91\nbnQgYmV0d2VlbiIgKwogICAgICAgICAgICAiIChzZWxlY3QgYXZnKG8yLmFt\nb3VudCkgZnJvbSBDdXN0b21lciBjLCBpbihjLm9yZGVycykgbzIpIiArCiAg\nICAgICAgICAgICIgYW5kIChzZWxlY3QgbWluKG8yLmFtb3VudCkgZnJvbSBD\ndXN0b21lciBjLCBpbihjLm9yZGVycykgbzIpIiwKICAgICAgICAic2VsZWN0\nIG8ub2lkIGZyb20gQ3VzdG9tZXIgYywgaW4oYy5vcmRlcnMpbyB3aGVyZSBv\nLmFtb3VudCA+IiArCiAgICAgICAgICAgICIgKHNlbGVjdCBzdW0obzIuYW1v\ndW50KSBmcm9tIGMub3JkZXJzIG8yKSIsCiAgICAgICAgInNlbGVjdCBvMS5v\naWQsIGMubmFtZSBmcm9tIE9yZGVyIG8xLCBDdXN0b21lciBjIHdoZXJlIG8x\nLmFtb3VudCA9ICIgKwogICAgICAgICAgICAiIGFueShzZWxlY3QgbzIuYW1v\ndW50IGZyb20gaW4oYy5vcmRlcnMpIG8yKSIsCiAgICAgICAgIlNFTEVDVCBw\nLCBtICIrCiAgICAgICAgICAgICJGUk9NIFB1Ymxpc2hlciBwICIrCiAgICAg\nICAgICAgICJMRUZUIE9VVEVSIEpPSU4gcC5tYWdhemluZUNvbGxlY3Rpb24g\nbSAiKwogICAgICAgICAgICAiV0hFUkUgbS5pZCA9IChTRUxFQ1QgTUFYKG0y\nLmlkKSAiKwogICAgICAgICAgICAiRlJPTSBNYWdhemluZSBtMiAiKwogICAg\nICAgICAgICAiV0hFUkUgbTIuaWRQdWJsaXNoZXIuaWQgPSBwLmlkICIrCiAg\nICAgICAgICAgICJBTkQgbTIuZGF0ZVB1Ymxpc2hlZCA9ICIrCiAgICAgICAg\nICAgICIoU0VMRUNUIE1BWChtMy5kYXRlUHVibGlzaGVkKSAiKwogICAgICAg\nICAgICAiRlJPTSBNYWdhemluZSBtMyAiKwogICAgICAgICAgICAiV0hFUkUg\nbTMuaWRQdWJsaXNoZXIuaWQgPSBwLmlkKSkgIiwgCiAgICAvLyBvdXRzdGFu\nZGluZyBwcm9ibGVtIHN1YnF1ZXJpZXM6CiAgICAvLyJzZWxlY3QgbyBmcm9t\nIE9yZGVyIG8gd2hlcmUgby5hbW91bnQgPiAoc2VsZWN0IGNvdW50KG8pIGZy\nb20gT3JkZXIgbykiLAogICAgLy8ic2VsZWN0IG8gZnJvbSBPcmRlciBvIHdo\nZXJlIG8uYW1vdW50ID4gKHNlbGVjdCBjb3VudChvMikgZnJvbSBPcmRlciBv\nMikiLAogICAgLy8gInNlbGVjdCBjIGZyb20gQ3VzdG9tZXIgYyBsZWZ0IGpv\naW4gYy5vcmRlcnMgcCB3aGVyZSBub3QgZXhpc3RzIgogICAgLy8gICArICIg\nKHNlbGVjdCBvMiBmcm9tIGMub3JkZXJzIG8yIHdoZXJlIG8yID0gbyIsCiAg\nICB9OwoKCiAgICBzdGF0aWMgU3RyaW5nW10gdXBkYXRlcyA9IG5ldyBTdHJp\nbmdbXSB7CiAgICAgICAgInVwZGF0ZSBPcmRlciBvIHNldCBvLmFtb3VudCA9\nIDEwMDAgd2hlcmUgby5jdXN0b21lci5uYW1lID0gIiArCiAgICAgICAgICAg\nICIgKHNlbGVjdCBtYXgobzIuY3VzdG9tZXIubmFtZSkgZnJvbSBPcmRlciBv\nMiAiICsgCiAgICAgICAgICAgICIgd2hlcmUgby5jdXN0b21lci5jaWQuaWQg\nPSBvMi5jdXN0b21lci5jaWQuaWQpIiwgIAogICAgfTsKCgogICAgcHVibGlj\nIHZvaWQgdGVzdFN1YnF1ZXJ5KCkgewogICAgICAgIGlmKGdldERCRGljdGlv\nbmFyeShlbWYpLnN1cHBvcnRzU3Vic2VsZWN0KSB7CiAgICAgICAgICAgIEVu\ndGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwog\nICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHF1ZXJ5cy5sZW5ndGg7\nIGkrKykgewogICAgICAgICAgICAgICAgU3RyaW5nIHEgPSBxdWVyeXNbaV07\nCiAgICAgICAgICAgICAgICBMaXN0IHJzID0gZW0uY3JlYXRlUXVlcnkocSku\nZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgICAgICAgICAgYXNzZXJ0RXF1YWxz\nKDAsIHJzLnNpemUoKSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGVt\nLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICAgICAgZm9yIChp\nbnQgaSA9IDA7IGkgPCB1cGRhdGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAg\nICAgICAgICBpbnQgdXBkYXRlQ291bnQgPSBlbS5jcmVhdGVRdWVyeSh1cGRh\ndGVzW2ldKS5leGVjdXRlVXBkYXRlKCk7CiAgICAgICAgICAgICAgICBhc3Nl\ncnRFcXVhbHMoMCwgdXBkYXRlQ291bnQpOwogICAgICAgICAgICB9CgogICAg\nICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLnJvbGxiYWNrKCk7CiAgICAg\nICAgICAgIGVtLmNsb3NlKCk7CiAgICAgICAgfQogICAgfQogICAgCiAgICAv\nKioKICAgICAqIFZlcmlmeSBhIHN1YiBxdWVyeSBjYW4gY29udGFpbiBNQVgg\nYW5kIGFkZGl0aW9uYWwgZGF0ZSBjb21wYXJpc29ucyAKICAgICAqIHdpdGhv\ndXQgbG9zaW5nIHRoZSBjb3JyZWN0IGFsaWFzIGluZm9ybWF0aW9uLiBUaGlz\nIHNvcnQgb2YgcXVlcnkgCiAgICAgKiBvcmlnaW5hbGx5IGNhdXNlZCBwcm9i\nbGVtcyBmb3IgREJEaWN0aW9uYXJpZXMgd2hpY2ggdXNlZCBEQVRBQkFTRSBz\neW50YXguIAogICAgICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0U3ViU2VsZWN0\nTWF4RGF0ZVJhbmdlKCkgewogICAgICAgIGlmKGdldERCRGljdGlvbmFyeShl\nbWYpLnN1cHBvcnRzU3Vic2VsZWN0KSB7IAogICAgICAgICAgICBTdHJpbmcg\ncXVlcnkgPQogICAgICAgICAgICAgICAgIlNFTEVDVCBlLGQgZnJvbSBFbXBs\nb3llZSBlLCBEZXBlbmRlbnQgZCAiCiAgICAgICAgICAgICAgICArICJXSEVS\nRSBlLmVtcElkID0gOmVtcGlkICIKICAgICAgICAgICAgICAgICsgIkFORCBk\nLmlkLmVtcGlkID0gKFNFTEVDVCBNQVggKGUyLmVtcElkKSBGUk9NIEVtcGxv\neWVlIGUyKSAiCiAgICAgICAgICAgICAgICArICJBTkQgZC5pZC5lZmZEYXRl\nID4gOm1pbkRhdGUgIgogICAgICAgICAgICAgICAgKyAiQU5EIGQuaWQuZWZm\nRGF0ZSA8IDptYXhEYXRlICI7CiAgICAgICAgICAgIEVudGl0eU1hbmFnZXIg\nZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgICAgICBR\ndWVyeSBxID0gZW0uY3JlYXRlUXVlcnkocXVlcnkpOwogICAgICAgICAgICBx\nLnNldFBhcmFtZXRlcigiZW1waWQiLCAobG9uZykgMTAxKTsKICAgICAgICAg\nICAgcS5zZXRQYXJhbWV0ZXIoIm1pbkRhdGUiLCBuZXcgRGF0ZSgxMDApKTsK\nICAgICAgICAgICAgcS5zZXRQYXJhbWV0ZXIoIm1heERhdGUiLCBuZXcgRGF0\nZSgxMDAwMDApKTsKICAgICAgICAgICAgcS5nZXRSZXN1bHRMaXN0KCk7CiAg\nICAgICAgICAgIGVtLmNsb3NlKCk7CiAgICAgICAgfQogICAgfQp9Cg==\n","encoding":"base64"}

