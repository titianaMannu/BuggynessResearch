{"sha":"c0c457d4d410ce7668e3f7a078f54793af87a884","node_id":"MDQ6QmxvYjIwNjM2NDpjMGM0NTdkNGQ0MTBjZTc2NjhlM2Y3YTA3OGY1NDc5M2FmODdhODg0","size":3351,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/c0c457d4d410ce7668e3f7a078f54793af87a884","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UucmVsYXRp\nb25zOwoKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXI7\nCgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnRlc3Qu\nU2luZ2xlRU1GVGVzdENhc2U7CgpwdWJsaWMgY2xhc3MgVGVzdENoYWluRW50\naXRpZXMgZXh0ZW5kcyBTaW5nbGVFTUZUZXN0Q2FzZSB7CgoJLyoKCSAqIFNl\ndCB0aGlzIG1hZ2ljYWwgbnVtYmVyIHRvIDMgb3IgbGVzcyB0byBhdm9pZCB0\naGUgZXJyb3IuCgkgKi8KCXByaXZhdGUgc3RhdGljIGZpbmFsIGludCBNQUdJ\nQ0FMX05VTUJFUiA9IDUwOwoJCglsb25nIGFpZDsKCglwdWJsaWMgdm9pZCBz\nZXRVcCAoKSB7CgkJc2V0VXAgKENoYWluRW50aXR5QS5jbGFzcywgQ2hhaW5F\nbnRpdHlCLmNsYXNzLCBDaGFpbkVudGl0eUMuY2xhc3MpOwoJCS8vIENyZWF0\nZSBBCgkJQ2hhaW5FbnRpdHlBIGEgPSBuZXcgQ2hhaW5FbnRpdHlBICgpOwoJ\nCWEuc2V0TmFtZSAoIlRFU1RfQSIpOwoJCS8vIFBlcnNpc3QgQQoJCUVudGl0\neU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlciAoKTsKCQll\nbS5nZXRUcmFuc2FjdGlvbiAoKS5iZWdpbiAoKTsKCQllbS5wZXJzaXN0IChh\nKTsKCQlhaWQgPSBhLmdldElkICgpOwoJCWVtLmdldFRyYW5zYWN0aW9uICgp\nLmNvbW1pdCAoKTsKCQllbS5jbG9zZSAoKTsKCQlTeXN0ZW0ub3V0LnByaW50\nbG4gKCJDaGFpbkVudGl0eUEgaWQgPSAiICsgYWlkKTsKCX0KCglwdWJsaWMg\ndm9pZCB0ZXN0Q2hhaW5FbnRpdGllcyAoKSB7CgkJY2hhaW5VcGRhdGUgKCk7\nCgl9CgkKCXByb3RlY3RlZCB2b2lkIGNoYWluVXBkYXRlICgpIHsKCQkvLyBH\nZXQgQQoJCUNoYWluRW50aXR5QSBhID0gZ2V0QSAoKTsKCQkvLyBDcmVhdGUg\nQgoJCUNoYWluRW50aXR5QiBiID0gbmV3IENoYWluRW50aXR5QiAoKTsKCQli\nLnNldE5hbWUgKCJUZXN0X0JfIik7CgkJQ2hhaW5FbnRpdHlDIGM7CgkJLyoK\nCQkgKiBDcmVhdGUgYW5kIGFkZCBDIHRvIEIuIEluY3JlYXNpbmcgdGhlIG51\nbWJlciBvZiBpdGVyYXRpb25zIChudW1iZXIgb2YKCQkgKiBDaGFpbkVudGl0\neUMpIGluY3JlYXNlcyB0aGUgcHJvYmFiaWxpdHkgdG8gZ2V0IHRoZSB1bmlx\ndWUga2V5CgkJICogY29uc3RyYWludCB2aW9sYXRpb24gZXJyb3IuCgkJICov\nCgkJZm9yIChpbnQgaSA9IDE7IGkgPD0gTUFHSUNBTF9OVU1CRVI7IGkrKykg\newoJCQljID0gbmV3IENoYWluRW50aXR5QyAoKTsKCQkJYy5zZXROYW1lICgi\nVGVzdF9DXyIgKyBpKTsKCQkJYi5hZGRDaGFpbkVudGl0eUMgKGMpOwoJCX0K\nCQlhLmFkZENoaWxkRW50aXR5QiAoYik7CgkJLy8gZHVtcCAoYSk7ICAvLyBk\nZWJ1ZwoJCS8vIE1lcmdlIEEKCQlFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNy\nZWF0ZUVudGl0eU1hbmFnZXIgKCk7CgkJZW0uZ2V0VHJhbnNhY3Rpb24gKCku\nYmVnaW4gKCk7CgkJYSA9IGVtLm1lcmdlIChhKTsKCQkvKgoJCSAqIHdvcmth\ncm91bmQ6IFVuY29tbWVudGluZyBmb2xsb3dpbmcgbGluZSBpcyBhIHdvcmth\ncm91bmQuIElmIHdlCgkJICogcmV0cml2ZSBJZHMgb2YgQ2hhaW5FbnRpdHlD\nIG9iamVjdHMgYWZ0ZXIgbWVyZ2UgYnV0IGJlZm9yZSBjb21taXQgd2UKCQkg\nKiBkb24ndCBnZXQgdGhlIGVycm9yLgoJCSAqLwoJCS8vZHVtcCAoYSk7CgkJ\nZW0uZ2V0VHJhbnNhY3Rpb24gKCkuY29tbWl0ICgpOwoJCWVtLmNsb3NlICgp\nOwoJCS8vIGR1bXAgKGdldEEgKCkpOyAgLy8gZGVidWcKCX0KCgkvKioKCSAq\nIEdldCBjcmVhdGVkIENoYWluRW50aXR5QSB1c2luZyBhaWQgZmllbGQuCgkg\nKiAKCSAqIEByZXR1cm4KCSAqLwoJcHJvdGVjdGVkIENoYWluRW50aXR5QSBn\nZXRBICgpIHsKCQlFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0\neU1hbmFnZXIgKCk7CgkJQ2hhaW5FbnRpdHlBIGEgPSBlbS5maW5kIChDaGFp\nbkVudGl0eUEuY2xhc3MsIGFpZCk7CgkJZW0uY2xvc2UgKCk7CgkJcmV0dXJu\nIGE7Cgl9CgoJLyoqCgkgKiBQcmludCB0aGUgb2JqZWN0IGdyYXBoIG9mIGdp\ndmVuIENoYWluRW50aXR5QSB0byBTeXN0ZW0ub3V0CgkgKiAKCSAqIEBwYXJh\nbSB0ZXN0QQoJICovCglwcm90ZWN0ZWQgdm9pZCBkdW1wIChDaGFpbkVudGl0\neUEgdGVzdEEpIHsKCQlTeXN0ZW0ub3V0LnByaW50bG4gKCItLS0tLS0tIik7\nCgkJU3lzdGVtLm91dC5wcmludGxuICh0ZXN0QS5nZXROYW1lICgpICsgIlsi\nICsgdGVzdEEuZ2V0SWQgKCkgKyAiXSIpOwoJCWZvciAoQ2hhaW5FbnRpdHlC\nIHRlc3RCIDogdGVzdEEuZ2V0Q2hpbGRyZW4gKCkpIHsKCQkJU3lzdGVtLm91\ndC5wcmludGxuICh0ZXN0Qi5nZXROYW1lICgpICsgIlsiICsgdGVzdEIuZ2V0\nSWQgKCkgKyAiXSIpOwoJCQlmb3IgKENoYWluRW50aXR5QyB0ZXN0QyA6IHRl\nc3RCLmdldENoYWluRW50aXR5Q1NldCAoKSkgewoJCQkJU3lzdGVtLm91dC5w\ncmludGxuICh0ZXN0Qy5nZXROYW1lICgpICsgIlsiICsgdGVzdEMuZ2V0SWQg\nKCkKCQkJCQkJKyAiXSIpOwoJCQl9CgkJfQoJCVN5c3RlbS5vdXQucHJpbnRs\nbiAoIi0tLS0tLS0iKTsKCX0KCn0K\n","encoding":"base64"}

