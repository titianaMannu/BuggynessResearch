{"sha":"ee9075ad36dffaad785e8469053c80f0e78d2a14","node_id":"MDQ6QmxvYjIwNjM2NDplZTkwNzVhZDM2ZGZmYWFkNzg1ZTg0NjkwNTNjODBmMGU3OGQyYTE0","size":18514,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/ee9075ad36dffaad785e8469053c80f0e78d2a14","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFnRW1wbG95ZWVfTGFzdF9OYW1lIHRv\nIGluIHdyaXRpbmcsCiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRo\nZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuCiAqICJBUyBJUyIgQkFT\nSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUKICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5n\nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucwogKiB1bmRlciB0aGUgTGlj\nZW5zZS4gICAgCiAqLwpwYWNrYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJz\naXN0ZW5jZS5zZXF1ZW5jZTsKCmltcG9ydCBqYXZhLmlvLlByaW50U3RyZWFt\nOwppbXBvcnQgamF2YS5pby5QcmludFdyaXRlcjsKaW1wb3J0IGphdmEuaW8u\nU3RyaW5nV3JpdGVyOwppbXBvcnQgamF2YS5sYW5nLnJlZmxlY3QuTWV0aG9k\nOwppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb25zOwppbXBvcnQgamF2YS51\ndGlsLkxpbmtlZExpc3Q7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKaW1wb3J0\nIGphdmEudXRpbC5TdHJpbmdUb2tlbml6ZXI7CgppbXBvcnQgamF2YXgucGVy\nc2lzdGVuY2UuRW50aXR5TWFuYWdlcjsKCmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5jb25mLkpEQkNDb25maWd1cmF0aW9uOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnRlc3QuU2luZ2xlRU1GVGVz\ndENhc2U7CgovKioKICogQGF1dGhvciBUaW0gTWNDb25uZWxsCiAqIEBzaW5j\nZSAyLjAuMAogKi8KcHVibGljIGNsYXNzIFRlc3RTZXF1ZW5jZSBleHRlbmRz\nIFNpbmdsZUVNRlRlc3RDYXNlIHsKCiAgICBwcml2YXRlIFN0cmluZyBtdWx0\naVRocmVhZEV4ZWN1dGluZyA9IG51bGw7CiAgICBwcml2YXRlIHN0YXRpYyBm\naW5hbCBpbnQgTlVNQkVSX0VOVElUSUVTID0gNTAwMDsKCiAgICBwdWJsaWMg\ndm9pZCBzZXRVcCgpIHsKICAgICAgICBzZXRVcChFbnRpdHlQZXJzb24uY2xh\nc3MsIEVudGl0eUVtcGxveWVlLmNsYXNzLCBDTEVBUl9UQUJMRVMsCiAgICAg\nICAgICAgICJvcGVuanBhLk11bHRpdGhyZWFkZWQiLCAidHJ1ZSIpOwogICAg\nfQoKICAgIC8vIE92ZXJyaWRlIHRlYXJkb3duIHRvIHByZXNlcnZlIGRhdGFi\nYXNlIGNvbnRlbnRzCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIHRl\nYXJEb3duKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgdGVzdE11bHRpVGhyZWFkZWROYXRpdmVTZXF1ZW5jZXMoKSB0aHJv\nd3MgRXhjZXB0aW9uIHsKICAgICAgICBib29sZWFuIHN1cHBvcnRzTmF0aXZl\nU2VxdWVuY2UgPSBmYWxzZTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\nc3VwcG9ydHNOYXRpdmVTZXF1ZW5jZSA9ICgoSkRCQ0NvbmZpZ3VyYXRpb24p\nIGVtZgogICAgICAgICAgICAgICAgLmdldENvbmZpZ3VyYXRpb24oKSkuZ2V0\nREJEaWN0aW9uYXJ5SW5zdGFuY2UoKQogICAgICAgICAgICAgICAgLm5leHRT\nZXF1ZW5jZVF1ZXJ5ICE9IG51bGw7CiAgICAgICAgfSBjYXRjaCAoVGhyb3dh\nYmxlIHQpIHsKICAgICAgICAgICAgc3VwcG9ydHNOYXRpdmVTZXF1ZW5jZSA9\nIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgaWYgKHN1cHBvcnRzTmF0aXZl\nU2VxdWVuY2UpIHsKICAgICAgICAgICAgbXR0ZXN0KDYsIDgpOwogICAgICAg\nICAgICBzd2l0Y2ggKChpbnQpIChNYXRoLnJhbmRvbSgpICogNykpIHsKICAg\nICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY3JlYXRlQW5kUmVt\nb3ZlKCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2Fz\nZSAxOgogICAgICAgICAgICAgICAgY3JlYXRlTWFueVBlcnNvbnNJblNlcGFy\nYXRlVHJhbnNhY3Rpb25zKCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAg\nICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgY3JlYXRlTWFueUVt\ncGxveWVlc0luU2VwYXJhdGVUcmFuc2FjdGlvbnMoKTsKICAgICAgICAgICAg\nICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAg\nICBjcmVhdGVNYW55UGVyc29uc0FuZEVtcGxveWVlc0luU2VwYXJhdGVUcmFu\nc2FjdGlvbnMoKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAg\nICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBjcmVhdGVNYW55UGVyc29uc0lu\nU2luZ2xlVHJhbnNhY3Rpb24oKTsKICAgICAgICAgICAgICAgIGJyZWFrOwog\nICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBjcmVhdGVNYW55\nRW1wbG95ZWVzSW5TaW5nbGVUcmFuc2FjdGlvbigpOwogICAgICAgICAgICAg\nICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAg\nIGNyZWF0ZU1hbnlQZXJzb25zQW5kRW1wbG95ZWVzSW5TaW5nbGVUcmFuc2Fj\ndGlvbigpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0K\nICAgICAgICB9CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIGNyZWF0ZUFuZFJl\nbW92ZSgpIHsKICAgICAgICBpbnQgcGVyc29uX2lkOwogICAgICAgIGludCBl\nbXBsb3llZV9pZDsKCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5j\ncmVhdGVFbnRpdHlNYW5hZ2VyKCk7CgogICAgICAgIEVudGl0eVBlcnNvbiBw\nZXJzb24gPSBuZXcgRW50aXR5UGVyc29uKCk7CiAgICAgICAgcGVyc29uLnNl\ndEZpcnN0TmFtZSgiUGVyc29uX0ZpcnN0X05hbWUiKTsKICAgICAgICBwZXJz\nb24uc2V0TGFzdE5hbWUoIlBlcnNvbl9MYXN0X05hbWUiKTsKCiAgICAgICAg\nRW50aXR5RW1wbG95ZWUgZW1wbG95ZWUgPSBuZXcgRW50aXR5RW1wbG95ZWUo\nKTsKICAgICAgICBlbXBsb3llZS5zZXRGaXJzdE5hbWUoIkVtcGxveWVlX0Zp\ncnN0X05hbWUiKTsKICAgICAgICBlbXBsb3llZS5zZXRMYXN0TmFtZSgiRW1w\nbG95ZWVfTGFzdF9OYW1lIik7CiAgICAgICAgZW1wbG95ZWUuc2V0U2FsYXJ5\nKE5VTUJFUl9FTlRJVElFUyk7CgogICAgICAgIGVtLmdldFRyYW5zYWN0aW9u\nKCkuYmVnaW4oKTsKICAgICAgICBlbS5wZXJzaXN0KHBlcnNvbik7CiAgICAg\nICAgZW0ucGVyc2lzdChlbXBsb3llZSk7CiAgICAgICAgZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5jb21taXQoKTsKCiAgICAgICAgZW0ucmVmcmVzaChwZXJzb24p\nOwogICAgICAgIGVtLnJlZnJlc2goZW1wbG95ZWUpOwogICAgICAgIHBlcnNv\nbl9pZCA9IHBlcnNvbi5nZXRJZCgpOwogICAgICAgIGVtcGxveWVlX2lkID0g\nZW1wbG95ZWUuZ2V0SWQoKTsKCiAgICAgICAgcGVyc29uID0gZW0uZmluZChF\nbnRpdHlQZXJzb24uY2xhc3MsIHBlcnNvbl9pZCk7CiAgICAgICAgYXNzZXJ0\nVHJ1ZShwZXJzb24gIT0gbnVsbCk7CiAgICAgICAgYXNzZXJ0VHJ1ZShwZXJz\nb24uZ2V0SWQoKSA9PSBwZXJzb25faWQpOwogICAgICAgIGFzc2VydFRydWUo\ncGVyc29uLmdldEZpcnN0TmFtZSgpLmVxdWFscygiUGVyc29uX0ZpcnN0X05h\nbWUiKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShwZXJzb24uZ2V0TGFzdE5hbWUo\nKS5lcXVhbHMoIlBlcnNvbl9MYXN0X05hbWUiKSk7CgogICAgICAgIGVtcGxv\neWVlID0gZW0uZmluZChFbnRpdHlFbXBsb3llZS5jbGFzcywgZW1wbG95ZWVf\naWQpOwogICAgICAgIGFzc2VydFRydWUoZW1wbG95ZWUgIT0gbnVsbCk7CiAg\nICAgICAgYXNzZXJ0VHJ1ZShlbXBsb3llZS5nZXRJZCgpID09IGVtcGxveWVl\nX2lkKTsKICAgICAgICBhc3NlcnRUcnVlKGVtcGxveWVlLmdldEZpcnN0TmFt\nZSgpLmVxdWFscygiRW1wbG95ZWVfRmlyc3RfTmFtZSIpKTsKICAgICAgICBh\nc3NlcnRUcnVlKGVtcGxveWVlLmdldExhc3ROYW1lKCkuZXF1YWxzKCJFbXBs\nb3llZV9MYXN0X05hbWUiKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShlbXBsb3ll\nZS5nZXRTYWxhcnkoKSA9PSBOVU1CRVJfRU5USVRJRVMpOwoKICAgICAgICBl\nbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgZW0ucmVtb3Zl\nKHBlcnNvbik7CiAgICAgICAgZW0ucmVtb3ZlKGVtcGxveWVlKTsKICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwoKICAgICAgICBlbS5j\nbGVhcigpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHJpdmF0\nZSB2b2lkIGNyZWF0ZU1hbnlQZXJzb25zSW5TZXBhcmF0ZVRyYW5zYWN0aW9u\ncygpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVu\ndGl0eU1hbmFnZXIoKTsKCiAgICAgICAgZm9yIChpbnQgaWkgPSAwOyBpaSA8\nIE5VTUJFUl9FTlRJVElFUzsgaWkrKykgewogICAgICAgICAgICBFbnRpdHlQ\nZXJzb24gcGVyc29uID0gbmV3IEVudGl0eVBlcnNvbigpOwogICAgICAgICAg\nICBwZXJzb24uc2V0Rmlyc3ROYW1lKCIxX0ZpcnN0X25hbWVfIiArIGlpKTsK\nICAgICAgICAgICAgcGVyc29uLnNldExhc3ROYW1lKCIxX0xhc3RfbmFtZV8i\nICsgaWkpOwoKICAgICAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdp\nbigpOwogICAgICAgICAgICBlbS5wZXJzaXN0KHBlcnNvbik7CiAgICAgICAg\nICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgfQoK\nICAgICAgICBlbS5jbGVhcigpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9\nCgogICAgcHJpdmF0ZSB2b2lkIGNyZWF0ZU1hbnlFbXBsb3llZXNJblNlcGFy\nYXRlVHJhbnNhY3Rpb25zKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0g\nPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwoKICAgICAgICBmb3IgKGlu\ndCBpaSA9IDA7IGlpIDwgTlVNQkVSX0VOVElUSUVTOyBpaSsrKSB7CiAgICAg\nICAgICAgIEVudGl0eUVtcGxveWVlIGVtcGxveWVlID0gbmV3IEVudGl0eUVt\ncGxveWVlKCk7CiAgICAgICAgICAgIGVtcGxveWVlLnNldEZpcnN0TmFtZSgi\nMl9GaXJzdF9uYW1lXyIgKyBpaSk7CiAgICAgICAgICAgIGVtcGxveWVlLnNl\ndExhc3ROYW1lKCIyX0xhc3RfbmFtZV8iICsgaWkpOwogICAgICAgICAgICBl\nbXBsb3llZS5zZXRTYWxhcnkoaWkpOwoKICAgICAgICAgICAgZW0uZ2V0VHJh\nbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgICAgICBlbS5wZXJzaXN0KGVt\ncGxveWVlKTsKICAgICAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21t\naXQoKTsKICAgICAgICB9CgogICAgICAgIGVtLmNsZWFyKCk7CiAgICAgICAg\nZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgY3JlYXRlTWFu\neVBlcnNvbnNBbmRFbXBsb3llZXNJblNlcGFyYXRlVHJhbnNhY3Rpb25zKCkg\newogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5\nTWFuYWdlcigpOwoKICAgICAgICBmb3IgKGludCBpaSA9IDA7IGlpIDwgTlVN\nQkVSX0VOVElUSUVTOyBpaSsrKSB7CiAgICAgICAgICAgIEVudGl0eVBlcnNv\nbiBwZXJzb24gPSBuZXcgRW50aXR5UGVyc29uKCk7CiAgICAgICAgICAgIHBl\ncnNvbi5zZXRGaXJzdE5hbWUoIjNfRmlyc3RfbmFtZV8iICsgaWkpOwogICAg\nICAgICAgICBwZXJzb24uc2V0TGFzdE5hbWUoIjNfTGFzdF9uYW1lXyIgKyBp\naSk7CgogICAgICAgICAgICBFbnRpdHlFbXBsb3llZSBlbXBsb3llZSA9IG5l\ndyBFbnRpdHlFbXBsb3llZSgpOwogICAgICAgICAgICBlbXBsb3llZS5zZXRG\naXJzdE5hbWUoIjRfRmlyc3RfbmFtZV8iICsgaWkpOwogICAgICAgICAgICBl\nbXBsb3llZS5zZXRMYXN0TmFtZSgiNF9MYXN0X25hbWVfIiArIGlpKTsKICAg\nICAgICAgICAgZW1wbG95ZWUuc2V0U2FsYXJ5KGlpKTsKCiAgICAgICAgICAg\nIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICAgICAgZW0u\ncGVyc2lzdChwZXJzb24pOwogICAgICAgICAgICBlbS5wZXJzaXN0KGVtcGxv\neWVlKTsKICAgICAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQo\nKTsKICAgICAgICB9CgogICAgICAgIGVtLmNsZWFyKCk7CiAgICAgICAgZW0u\nY2xvc2UoKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgY3JlYXRlTWFueVBl\ncnNvbnNJblNpbmdsZVRyYW5zYWN0aW9uKCkgewogICAgICAgIEVudGl0eU1h\nbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwoKICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgZm9yIChp\nbnQgaWkgPSAwOyBpaSA8IE5VTUJFUl9FTlRJVElFUzsgaWkrKykgewogICAg\nICAgICAgICBFbnRpdHlQZXJzb24gcGVyc29uID0gbmV3IEVudGl0eVBlcnNv\nbigpOwogICAgICAgICAgICBwZXJzb24uc2V0Rmlyc3ROYW1lKCI1X0ZpcnN0\nX25hbWVfIiArIGlpKTsKICAgICAgICAgICAgcGVyc29uLnNldExhc3ROYW1l\nKCI1X0xhc3RfbmFtZV8iICsgaWkpOwoKICAgICAgICAgICAgZW0ucGVyc2lz\ndChwZXJzb24pOwogICAgICAgIH0KICAgICAgICBlbS5nZXRUcmFuc2FjdGlv\nbigpLmNvbW1pdCgpOwoKICAgICAgICBlbS5jbGVhcigpOwogICAgICAgIGVt\nLmNsb3NlKCk7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIGNyZWF0ZU1hbnlF\nbXBsb3llZXNJblNpbmdsZVRyYW5zYWN0aW9uKCkgewogICAgICAgIEVudGl0\neU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwoKICAg\nICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgZm9y\nIChpbnQgaWkgPSAwOyBpaSA8IE5VTUJFUl9FTlRJVElFUzsgaWkrKykgewog\nICAgICAgICAgICBFbnRpdHlFbXBsb3llZSBlbXBsb3llZSA9IG5ldyBFbnRp\ndHlFbXBsb3llZSgpOwogICAgICAgICAgICBlbXBsb3llZS5zZXRGaXJzdE5h\nbWUoIjZfRmlyc3RfbmFtZV8iICsgaWkpOwogICAgICAgICAgICBlbXBsb3ll\nZS5zZXRMYXN0TmFtZSgiNl9MYXN0X25hbWVfIiArIGlpKTsKICAgICAgICAg\nICAgZW1wbG95ZWUuc2V0U2FsYXJ5KGlpKTsKCiAgICAgICAgICAgIGVtLnBl\ncnNpc3QoZW1wbG95ZWUpOwogICAgICAgIH0KICAgICAgICBlbS5nZXRUcmFu\nc2FjdGlvbigpLmNvbW1pdCgpOwoKICAgICAgICBlbS5jbGVhcigpOwogICAg\nICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIGNyZWF0\nZU1hbnlQZXJzb25zQW5kRW1wbG95ZWVzSW5TaW5nbGVUcmFuc2FjdGlvbigp\nIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0\neU1hbmFnZXIoKTsKCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdp\nbigpOwogICAgICAgIGZvciAoaW50IGlpID0gMDsgaWkgPCBOVU1CRVJfRU5U\nSVRJRVM7IGlpKyspIHsKICAgICAgICAgICAgRW50aXR5UGVyc29uIHBlcnNv\nbiA9IG5ldyBFbnRpdHlQZXJzb24oKTsKICAgICAgICAgICAgcGVyc29uLnNl\ndEZpcnN0TmFtZSgiN19GaXJzdF9uYW1lXyIgKyBpaSk7CiAgICAgICAgICAg\nIHBlcnNvbi5zZXRMYXN0TmFtZSgiN19MYXN0X25hbWVfIiArIGlpKTsKCiAg\nICAgICAgICAgIEVudGl0eUVtcGxveWVlIGVtcGxveWVlID0gbmV3IEVudGl0\neUVtcGxveWVlKCk7CiAgICAgICAgICAgIGVtcGxveWVlLnNldEZpcnN0TmFt\nZSgiOF9GaXJzdF9uYW1lXyIgKyBpaSk7CiAgICAgICAgICAgIGVtcGxveWVl\nLnNldExhc3ROYW1lKCI4X0xhc3RfbmFtZV8iICsgaWkpOwogICAgICAgICAg\nICBlbXBsb3llZS5zZXRTYWxhcnkoaWkpOwoKICAgICAgICAgICAgZW0ucGVy\nc2lzdChwZXJzb24pOwogICAgICAgICAgICBlbS5wZXJzaXN0KGVtcGxveWVl\nKTsKICAgICAgICB9CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21t\naXQoKTsKCiAgICAgICAgZW0uY2xlYXIoKTsKICAgICAgICBlbS5jbG9zZSgp\nOwogICAgfQoKICAgIC8qKgogICAgICogUmUtZXhlY3V0ZSB0aGUgaW52b2tp\nbmcgbWV0aG9kIGEgcmFuZG9tIG51bWJlciBvZiB0aW1lcyBpbiBhIHJhbmRv\nbQogICAgICogbnVtYmVyIG9mIFRocmVhZHMuCiAgICAgKi8KICAgIHB1Ymxp\nYyB2b2lkIG10dGVzdCgpIHRocm93cyBUaHJlYWRpbmdFeGNlcHRpb24gewog\nICAgICAgIC8vIDYgaXRlcmF0aW9ucyBpbiA4IHRocmVhZHMgaXMgYSBnb29k\nIHRyYWRlLW9mZiBiZXR3ZWVuCiAgICAgICAgLy8gdGVzdHMgdGFraW5nIHdh\neSB0b28gbG9uZyBhbmQgaGF2aW5nIGEgZGVjZW50IGNoYW5jZSBvZgogICAg\nICAgIC8vIGlkZW50aWZ5aW5nIE1UIHByb2JsZW1zLgogICAgICAgIGludCBp\ndGVyYXRpb25zID0gNjsKICAgICAgICBpbnQgdGhyZWFkcyA9IDg7CgogICAg\nICAgIG10dGVzdCh0aHJlYWRzLCBpdGVyYXRpb25zKTsKICAgIH0KCiAgICAv\nKioKICAgICAqIEV4ZWN1dGUgdGhlIGNhbGxpbmcgbWV0aG9kIDxjb2RlPml0\nZXJhdGlvbnM8L2NvZGU+IHRpbWVzIGluCiAgICAgKiA8Y29kZT50aHJlYWRz\nPC9jb2RlPiBUaHJlYWRzLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBtdHRl\nc3QoaW50IHRocmVhZHMsIGludCBpdGVyYXRpb25zKSB7CiAgICAgICAgbXR0\nZXN0KDAsIHRocmVhZHMsIGl0ZXJhdGlvbnMpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIG10dGVzdChpbnQgc2VyaWFsQ291bnQsIGludCB0aHJlYWRzLCBp\nbnQgaXRlcmF0aW9ucykKICAgICAgICB0aHJvd3MgVGhyZWFkaW5nRXhjZXB0\naW9uIHsKICAgICAgICBTdHJpbmcgbWV0aG9kTmFtZSA9IGNhbGxpbmdNZXRo\nb2QoIm10dGVzdCIpOwogICAgICAgIG10dGVzdChzZXJpYWxDb3VudCwgdGhy\nZWFkcywgaXRlcmF0aW9ucywgbWV0aG9kTmFtZSwgbmV3IE9iamVjdFswXSk7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBFeGVjdXRlIGEgdGVzdCBtZXRob2Qg\naW4gbXVsdGlwbGUgdGhyZWFkcy4KICAgICAqIAogICAgICogQHBhcmFtIHRo\ncmVhZHMKICAgICAqICAgICAgICAgICAgdGhlIG51bWJlciBvZiBUaHJlYWRz\nIHRvIHJ1biBpbgogICAgICogQHBhcmFtIGl0ZXJhdGlvbnMKICAgICAqICAg\nICAgICAgICAgdGhlIG51bWJlciBvZiB0aW1lcyB0aGUgbWV0aG9kIHNob3Vs\nZCBiZSBleGVjdXRlIGluIGEgc2luZ2xlCiAgICAgKiAgICAgICAgICAgIFRo\ncmVhZAogICAgICogQHBhcmFtIG1ldGhvZAogICAgICogICAgICAgICAgICB0\naGUgbmFtZSBvZiB0aGUgbWV0aG9kIHRvIGV4ZWN1dGUKICAgICAqIEBwYXJh\nbSBhcmdzCiAgICAgKiAgICAgICAgICAgIHRoZSBhcmd1bWVudHMgdG8gcGFz\ncyB0byB0aGUgbWV0aG9kCiAgICAgKiBAdGhyb3dzIFRocmVhZGluZ0V4Y2Vw\ndGlvbgogICAgICogICAgICAgICAgICAgaWYgYW4gZXJyb3JzIG9jY3VyIGlu\nIGFueSBvZiB0aGUgVGhyZWFkcy4gVGhlIGFjdHVhbAogICAgICogICAgICAg\nICAgICAgZXhjZXB0aW9ucyB3aWxsIGJlIGVtYmVkZGVkIGluIHRoZSBleGNl\ncHRpb24uIE5vdGUgdGhhdCB0aGlzCiAgICAgKiAgICAgICAgICAgICBtZWFu\ncyB0aGF0IGFzc2VydCgpIGZhaWx1cmVzIHdpbGwgYmUgdHJlYXRlZCBhcyBl\ncnJvcnMgcmF0aGVyCiAgICAgKiAgICAgICAgICAgICB0aGFuIHdhcm5pbmdz\nLgogICAgICogQGF1dGhvciBNYXJjIFBydWQnaG9tbWVhdXgKICAgICAqLwog\nICAgcHVibGljIHZvaWQgbXR0ZXN0KGludCB0aHJlYWRzLCBpbnQgaXRlcmF0\naW9ucywgZmluYWwgU3RyaW5nIG1ldGhvZCwKICAgICAgICBmaW5hbCBPYmpl\nY3RbXSBhcmdzKSB0aHJvd3MgVGhyZWFkaW5nRXhjZXB0aW9uIHsKICAgICAg\nICBtdHRlc3QoMCwgdGhyZWFkcywgaXRlcmF0aW9ucywgbWV0aG9kLCBhcmdz\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBtdHRlc3QoaW50IHNlcmlhbENv\ndW50LCBpbnQgdGhyZWFkcywgaW50IGl0ZXJhdGlvbnMsCiAgICAgICAgZmlu\nYWwgU3RyaW5nIG1ldGhvZCwgZmluYWwgT2JqZWN0W10gYXJncykgdGhyb3dz\nIFRocmVhZGluZ0V4Y2VwdGlvbiB7CiAgICAgICAgaWYgKG11bHRpVGhyZWFk\nRXhlY3V0aW5nICE9IG51bGwgCiAgICAgICAgICAgICYmIG11bHRpVGhyZWFk\nRXhlY3V0aW5nLmVxdWFscyhtZXRob2QpKSB7CiAgICAgICAgICAgIC8vIHdl\nIGFyZSBjdXJyZW50bHkgZXhlY3V0aW5nIGluIG11bHRpLXRocmVhZGVkIG1v\nZGU6CiAgICAgICAgICAgIC8vIGRvbid0IGRlYWRsb2NrIQogICAgICAgICAg\nICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBtdWx0aVRocmVhZEV4ZWN1\ndGluZyA9IG1ldGhvZDsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgQ2xh\nc3M8Pz5bXSBwYXJhbUNsYXNzZXMgPSBuZXcgQ2xhc3NbYXJncy5sZW5ndGhd\nOwogICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBhcmFtQ2xhc3Nl\ncy5sZW5ndGg7IGkrKykKICAgICAgICAgICAgICAgIHBhcmFtQ2xhc3Nlc1tp\nXSA9IGFyZ3NbaV0uZ2V0Q2xhc3MoKTsKCiAgICAgICAgICAgIGZpbmFsIE1l\ndGhvZCBtZXRoOwoKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAg\nIG1ldGggPSBnZXRDbGFzcygpLmdldE1ldGhvZChtZXRob2QsIHBhcmFtQ2xh\nc3Nlcyk7CiAgICAgICAgICAgIH0gY2F0Y2ggKE5vU3VjaE1ldGhvZEV4Y2Vw\ndGlvbiBuc21lKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVGhyZWFk\naW5nRXhjZXB0aW9uKG5zbWUudG9TdHJpbmcoKSwgbnNtZSk7CiAgICAgICAg\nICAgIH0KCiAgICAgICAgICAgIGZpbmFsIE9iamVjdCB0aGl6ID0gdGhpczsK\nCiAgICAgICAgICAgIG10dGVzdCgicmVmbGVjdGlvbiBpbnZvY2F0aW9uOiAo\nIiArIG1ldGhvZCArICIpIiwgc2VyaWFsQ291bnQsCiAgICAgICAgICAgICAg\nICB0aHJlYWRzLCBpdGVyYXRpb25zLCBuZXcgVm9sYXRpbGVSdW5uYWJsZSgp\nIHsKICAgICAgICAgICAgICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB0aHJv\nd3MgRXhjZXB0aW9uIHsKICAgICAgICAgICAgICAgICAgICAgICAgbWV0aC5p\nbnZva2UodGhpeiwgYXJncyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAg\nICAgICAgICAgICAgfSk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAg\nICAgbXVsdGlUaHJlYWRFeGVjdXRpbmcgPSBudWxsOwogICAgICAgIH0KICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBtdHRlc3QoU3RyaW5nIHRpdGxlLCBmaW5h\nbCBpbnQgdGhyZWFkcywgZmluYWwgaW50IGl0ZXJhdGlvbnMsCiAgICAgICAg\nZmluYWwgVm9sYXRpbGVSdW5uYWJsZSBydW5uZXIpIHRocm93cyBUaHJlYWRp\nbmdFeGNlcHRpb24gewogICAgICAgIG10dGVzdCh0aXRsZSwgMCwgdGhyZWFk\ncywgaXRlcmF0aW9ucywgcnVubmVyKTsKICAgIH0KCiAgICAvKioKICAgICAq\nIEV4ZWN1dGUgYSB0ZXN0IG1ldGhvZCBpbiBtdWx0aXBsZSB0aHJlYWRzLgog\nICAgICogCiAgICAgKiBAcGFyYW0gdGl0bGUKICAgICAqICAgICAgICAgICAg\nYSBkZXNjcmlwdGlvbiBvZiB0aGUgdGVzdCwgZm9yIGluY2x1c2lvbiBpbiB0\naGUgZXJyb3IgbWVzc2FnZQogICAgICogQHBhcmFtIHNlcmlhbENvdW50CiAg\nICAgKiAgICAgICAgICAgIHRoZSBudW1iZXIgb2YgdGltZXMgdG8gcnVuIHRo\nZSBtZXRob2Qgc2VyaWFsbHkgYmVmb3JlIHNwYXduaW5nCiAgICAgKiAgICAg\nICAgICAgIHRocmVhZHMuCiAgICAgKiBAcGFyYW0gdGhyZWFkcwogICAgICog\nICAgICAgICAgICB0aGUgbnVtYmVyIG9mIFRocmVhZHMgdG8gcnVuIGluCiAg\nICAgKiBAcGFyYW0gaXRlcmF0aW9ucwogICAgICogICAgICAgICAgICB0aGUg\nbnVtYmVyIG9mIHRpbWVzIHRoZSBtZXRob2Qgc2hvdWxkCiAgICAgKiBAcGFy\nYW0gcnVubmVyCiAgICAgKiAgICAgICAgICAgIHRoZSBWb2xhdGlsZVJ1bm5h\nYmxlIHRoYXQgd2lsbCBleGVjdXRlIHRoZSBhY3R1YWwgdGVzdCBmcm9tCiAg\nICAgKiAgICAgICAgICAgIHdpdGhpbiB0aGUgVGhyZWFkLgogICAgICogQHRo\ncm93cyBUaHJlYWRpbmdFeGNlcHRpb24KICAgICAqICAgICAgICAgICAgIGlm\nIGFuIGVycm9ycyBvY2N1ciBpbiBhbnkgb2YgdGhlIFRocmVhZHMuIFRoZSBh\nY3R1YWwKICAgICAqICAgICAgICAgICAgIGV4Y2VwdGlvbnMgd2lsbCBiZSBl\nbWJlZGRlZCBpbiB0aGUgZXhjZXB0aW9uLiBOb3RlIHRoYXQgdGhpcwogICAg\nICogICAgICAgICAgICAgbWVhbnMgdGhhdCBhc3NlcnQoKSBmYWlsdXJlcyB3\naWxsIGJlIHRyZWF0ZWQgYXMgZXJyb3JzIHJhdGhlcgogICAgICogICAgICAg\nICAgICAgdGhhbiB3YXJuaW5ncy4KICAgICAqIEBhdXRob3IgTWFyYyBQcnVk\nJ2hvbW1lYXV4CiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIG10dGVzdChTdHJp\nbmcgdGl0bGUsIGZpbmFsIGludCBzZXJpYWxDb3VudCwgZmluYWwgaW50IHRo\ncmVhZHMsCiAgICAgICAgZmluYWwgaW50IGl0ZXJhdGlvbnMsIGZpbmFsIFZv\nbGF0aWxlUnVubmFibGUgcnVubmVyKQogICAgICAgIHRocm93cyBUaHJlYWRp\nbmdFeGNlcHRpb24gewogICAgICAgIGZpbmFsIExpc3QgZXhjZXB0aW9ucyA9\nIENvbGxlY3Rpb25zLnN5bmNocm9uaXplZExpc3QobmV3IExpbmtlZExpc3Qo\nKSk7CgogICAgICAgIFRocmVhZFtdIHJ1bm5lcnMgPSBuZXcgVGhyZWFkW3Ro\ncmVhZHNdOwoKICAgICAgICBmaW5hbCBsb25nIHN0YXJ0TWlsbGlzID0gU3lz\ndGVtLmN1cnJlbnRUaW1lTWlsbGlzKCkgKyAxMDAwOwoKICAgICAgICBmb3Ig\nKGludCBpID0gMTsgaSA8PSB0aHJlYWRzOyBpKyspIHsKICAgICAgICAgICAg\nZmluYWwgaW50IHRoaXNUaHJlYWQgPSBpOwoKICAgICAgICAgICAgcnVubmVy\nc1tpIC0gMV0gPSBuZXcgVGhyZWFkKHRpdGxlICsgIiBbIiArIGkgKyAiIG9m\nICIgKyB0aHJlYWRzCiAgICAgICAgICAgICAgICArICJdIikgewogICAgICAg\nICAgICAgICAgcHVibGljIHZvaWQgcnVuKCkgewogICAgICAgICAgICAgICAg\nICAgIC8vIGRvIG91ciBiZXN0IHRvIGhhdmUgYWxsIHRocmVhZHMgc3RhcnQg\nYXQgdGhlIGV4YWN0CiAgICAgICAgICAgICAgICAgICAgLy8gc2FtZSB0aW1l\nLiBUaGlzIGlzIGltcGVyZmVjdCwgYnV0IHRoZSBjbG9zZXIgd2UKICAgICAg\nICAgICAgICAgICAgICAvLyBnZXQgdG8gZXZlcnlvbmUgc3RhcnRpbmcgYXQg\ndGhlIHNhbWUgdGltZSwgdGhlCiAgICAgICAgICAgICAgICAgICAgLy8gYmV0\ndGVyIGNoYW5jZSB3ZSBoYXZlIGZvciBpZGVudGlmeWluZyBNVCBwcm9ibGVt\ncy4KICAgICAgICAgICAgICAgICAgICB3aGlsZSAoU3lzdGVtLmN1cnJlbnRU\naW1lTWlsbGlzKCkgPCBzdGFydE1pbGxpcykKICAgICAgICAgICAgICAgICAg\nICAgICAgeWllbGQoKTsKCiAgICAgICAgICAgICAgICAgICAgaW50IHRoaXNJ\ndGVyYXRpb24gPSAxOwogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAg\nICAgICAgICAgICAgICAgICAgIGZvciAoOyB0aGlzSXRlcmF0aW9uIDw9IGl0\nZXJhdGlvbnM7IHRoaXNJdGVyYXRpb24rKykgewogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgLy8gZ28gZ28gZ28hCiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICBydW5uZXIucnVuKCk7CiAgICAgICAgICAgICAgICAgICAgICAg\nIH0KICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUgZXJy\nb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3luY2hyb25pemVkIChl\neGNlcHRpb25zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBl\nbWJlZCB0aGUgZXhjZXB0aW9uIGludG8gc29tZXRoaW5nIHRoYXQgZ2l2ZXMK\nICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVzIHNvbWUgbW9yZSBp\nbmZvcm1hdGlvbiBhYm91dCB0aGUgdGhyZWFkaW5nCiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAvLyBlbnZpcm9ubWVudAogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgZXhjZXB0aW9ucy5hZGQobmV3IFRocmVhZGluZ0V4Y2Vw\ndGlvbigidGhyZWFkPSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICArIHRoaXMudG9TdHJpbmcoKSArICI7dGhyZWFkTnVtPSIgKyB0aGlzVGhy\nZWFkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAiO21heFRo\ncmVhZHM9IiArIHRocmVhZHMgKyAiO2l0ZXJhdGlvbj0iCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgKyB0aGlzSXRlcmF0aW9uICsgIjttYXhJ\ndGVyYXRpb25zPSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAr\nIGl0ZXJhdGlvbnMsIGVycm9yKSk7CiAgICAgICAgICAgICAgICAgICAgICAg\nIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAg\nICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICAvLyBzdGFydCB0aGUg\nc2VyaWFsIHRlc3RzKGRvZXMgbm90IHNwYXduIHRoZSB0aHJlYWRzKQogICAg\nICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc2VyaWFsQ291bnQ7IGkrKykgewog\nICAgICAgICAgICBydW5uZXJzWzBdLnJ1bigpOwogICAgICAgIH0KCiAgICAg\nICAgLy8gc3RhcnQgdGhlIG11bHRpdGhyZWFkZWQKICAgICAgICBmb3IgKGlu\ndCBpID0gMDsgaSA8IHRocmVhZHM7IGkrKykgewogICAgICAgICAgICBydW5u\nZXJzW2ldLnN0YXJ0KCk7CiAgICAgICAgfQoKICAgICAgICAvLyB3YWl0IGZv\nciB0aGVtIGFsbCB0byBjb21wbGV0ZQogICAgICAgIGZvciAoaW50IGkgPSAw\nOyBpIDwgdGhyZWFkczsgaSsrKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAg\nICAgICAgICAgICBydW5uZXJzW2ldLmpvaW4oKTsKICAgICAgICAgICAgfSBj\nYXRjaCAoSW50ZXJydXB0ZWRFeGNlcHRpb24gZSkgewogICAgICAgICAgICB9\nCiAgICAgICAgfQoKICAgICAgICBpZiAoZXhjZXB0aW9ucy5zaXplKCkgPT0g\nMCkKICAgICAgICAgICAgcmV0dXJuOyAvLyBzd2VlZWVlZWVldDogbm8gZXJy\nb3JzCgogICAgICAgIC8vIGVtYmVkIGFsbCB0aGUgZXhjZXB0aW9ucyB0aGF0\nIHdlcmUgdGhyb3dzIGludG8gYQogICAgICAgIC8vIFRocmVhZGluZ0V4Y2Vw\ndGlvbgogICAgICAgIFRocm93YWJsZVtdIGVycm9ycyA9IChUaHJvd2FibGVb\nXSkgZXhjZXB0aW9ucy50b0FycmF5KG5ldyBUaHJvd2FibGVbMF0pOwogICAg\nICAgIHRocm93IG5ldyBUaHJlYWRpbmdFeGNlcHRpb24oIlRoZSAiICsgZXJy\nb3JzLmxlbmd0aAogICAgICAgICAgICArICIgZW1iZWRkZWQgZXJyb3JzICIg\nKyAib2NjdXJlZCBpbiB0aGUgZXhlY3V0aW9uIG9mICIgKyBpdGVyYXRpb25z\nCiAgICAgICAgICAgICsgIiBpdGVyYXRpb25zICIgKyAib2YgIiArIHRocmVh\nZHMgKyAiIHRocmVhZHM6IFsiICsgdGl0bGUgKyAiXSIsCiAgICAgICAgICAg\nIGVycm9ycyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDaGVjayB0byBzZWUg\naWYgd2UgYXJlIGluIHRoZSB0b3AtbGV2ZWwgZXhlY3V0aW9uIHN0YWNrLgog\nICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBpc1Jvb3RUaHJlYWQoKSB7CiAg\nICAgICAgcmV0dXJuIG11bHRpVGhyZWFkRXhlY3V0aW5nID09IG51bGw7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBBIFJ1bm5hYmxlIHRoYXQgY2FuIHRocm93\nIGFuIEV4Y2VwdGlvbjogdXNlZCB0byB0ZXN0IGNhc2VzLgogICAgICovCiAg\nICBwdWJsaWMgc3RhdGljIGludGVyZmFjZSBWb2xhdGlsZVJ1bm5hYmxlIHsK\nCiAgICAgICAgcHVibGljIHZvaWQgcnVuKCkgdGhyb3dzIEV4Y2VwdGlvbjsK\nICAgIH0KCiAgICAvKioKICAgICAqIEV4Y2VwdGlvbiBmb3IgZXJyb3JzIGNh\ndWdodCBkdXJpbmcgdGhyZWFkaW5nIHRlc3RzLgogICAgICovCiAgICBwdWJs\naWMgY2xhc3MgVGhyZWFkaW5nRXhjZXB0aW9uIGV4dGVuZHMgUnVudGltZUV4\nY2VwdGlvbiB7CgogICAgICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGxvbmcg\nc2VyaWFsVmVyc2lvblVJRCA9IC0xOTExNzY5ODQ1NTUyNTA3OTU2TDsKICAg\nICAgICBwcml2YXRlIGZpbmFsIFRocm93YWJsZVtdIF9uZXN0ZWQ7CgogICAg\nICAgIHB1YmxpYyBUaHJlYWRpbmdFeGNlcHRpb24oU3RyaW5nIG1zZywgVGhy\nb3dhYmxlIG5lc3RlZCkgewogICAgICAgICAgICBzdXBlcihtc2cpOwogICAg\nICAgICAgICBpZiAobmVzdGVkID09IG51bGwpCiAgICAgICAgICAgICAgICBf\nbmVzdGVkID0gbmV3IFRocm93YWJsZVswXTsKICAgICAgICAgICAgZWxzZQog\nICAgICAgICAgICAgICAgX25lc3RlZCA9IG5ldyBUaHJvd2FibGVbXSB7IG5l\nc3RlZCB9OwogICAgICAgIH0KCiAgICAgICAgcHVibGljIFRocmVhZGluZ0V4\nY2VwdGlvbihTdHJpbmcgbXNnLCBUaHJvd2FibGVbXSBuZXN0ZWQpIHsKICAg\nICAgICAgICAgc3VwZXIobXNnKTsKICAgICAgICAgICAgaWYgKG5lc3RlZCA9\nPSBudWxsKQogICAgICAgICAgICAgICAgX25lc3RlZCA9IG5ldyBUaHJvd2Fi\nbGVbMF07CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIF9uZXN0\nZWQgPSBuZXN0ZWQ7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBw\ncmludFN0YWNrVHJhY2UoKSB7CiAgICAgICAgICAgIHByaW50U3RhY2tUcmFj\nZShTeXN0ZW0ub3V0KTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lk\nIHByaW50U3RhY2tUcmFjZShQcmludFN0cmVhbSBvdXQpIHsKICAgICAgICAg\nICAgcHJpbnRTdGFja1RyYWNlKG5ldyBQcmludFdyaXRlcihvdXQpKTsKICAg\nICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHByaW50U3RhY2tUcmFjZShQ\ncmludFdyaXRlciBvdXQpIHsKICAgICAgICAgICAgc3VwZXIucHJpbnRTdGFj\na1RyYWNlKG91dCk7CiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwg\nX25lc3RlZC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgb3V0LnBy\naW50KCJOZXN0ZWQgVGhyb3dhYmxlICMiICsgKGkgKyAxKSArICI6ICIpOwog\nICAgICAgICAgICAgICAgX25lc3RlZFtpXS5wcmludFN0YWNrVHJhY2Uob3V0\nKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAg\nICAqIFJldHVybiB0aGUgbGFzdCBtZXRob2QgbmFtZSB0aGF0IGNhbGxlZCB0\naGlzIG9uZSBieSBwYXJzaW5nIHRoZSBjdXJyZW50CiAgICAgKiBzdGFjayB0\ncmFjZS4KICAgICAqIAogICAgICogQHBhcmFtIGV4Y2x1ZGUKICAgICAqICAg\nICAgICAgICAgYSBtZXRob2QgbmFtZSB0byBza2lwCiAgICAgKiBAdGhyb3dz\nIElsbGVnYWxTdGF0ZUV4Y2VwdGlvbgogICAgICogICAgICAgICAgICAgSWYg\ndGhlIGNhbGxpbmcgbWV0aG9kIGNvdWxkIG5vdCBiZSBpZGVudGlmaWVkLgog\nICAgICogQGF1dGhvciBNYXJjIFBydWQnaG9tbWVhdXgKICAgICAqLwogICAg\ncHVibGljIFN0cmluZyBjYWxsaW5nTWV0aG9kKFN0cmluZyBleGNsdWRlKSB7\nCiAgICAgICAgLy8gZGV0ZXJtaW5lIHRoZSBjdXJyZW50bHkgZXhlY3V0aW5n\nIG1ldGhvZCBieQogICAgICAgIC8vIGxvb2tpbmcgYXQgdGhlIHN0YWNrIHRy\nYWNrLiBIYWNraXNoLCBidXQgY29udmVuaWVudC4KICAgICAgICBTdHJpbmdX\ncml0ZXIgc3cgPSBuZXcgU3RyaW5nV3JpdGVyKCk7CiAgICAgICAgbmV3IEV4\nY2VwdGlvbigpLnByaW50U3RhY2tUcmFjZShuZXcgUHJpbnRXcml0ZXIoc3cp\nKTsKICAgICAgICBmb3IgKFN0cmluZ1Rva2VuaXplciBzdGFja1RyYWNlID0g\nbmV3IFN0cmluZ1Rva2VuaXplcihzdy50b1N0cmluZygpLAogICAgICAgICAg\nICBTeXN0ZW0uZ2V0UHJvcGVydHkoImxpbmUuc2VwYXJhdG9yIikpCiAgICAg\nICAgICAgIDsgc3RhY2tUcmFjZS5oYXNNb3JlVG9rZW5zKCkgOyApIHsKICAg\nICAgICAgICAgU3RyaW5nIGxpbmUgPSBzdGFja1RyYWNlLm5leHRUb2tlbigp\nLnRyaW0oKTsKCiAgICAgICAgICAgIC8vIG5vdCBhIHN0YWNrIHRyYWNlIGVs\nZW1lbnQKICAgICAgICAgICAgaWYgKCEobGluZS5zdGFydHNXaXRoKCJhdCAi\nKSkpCiAgICAgICAgICAgICAgICBjb250aW51ZTsKCiAgICAgICAgICAgIFN0\ncmluZyBmdWxsTWV0aG9kTmFtZSA9IGxpbmUuc3Vic3RyaW5nKDAsIGxpbmUu\naW5kZXhPZigiKCIpKTsKCiAgICAgICAgICAgIFN0cmluZyBzaG9ydE1ldGhv\nZE5hbWUgPSBmdWxsTWV0aG9kTmFtZS5zdWJzdHJpbmcoZnVsbE1ldGhvZE5h\nbWUKICAgICAgICAgICAgICAgIC5sYXN0SW5kZXhPZigiLiIpICsgMSk7Cgog\nICAgICAgICAgICAvLyBza2lwIG91ciBvd24gbWV0aG9kcyEKICAgICAgICAg\nICAgaWYgKHNob3J0TWV0aG9kTmFtZS5lcXVhbHMoImNhbGxpbmdNZXRob2Qi\nKSkKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICBpZiAo\nZXhjbHVkZSAhPSBudWxsICYmIHNob3J0TWV0aG9kTmFtZS5lcXVhbHMoZXhj\nbHVkZSkpCiAgICAgICAgICAgICAgICBjb250aW51ZTsKCiAgICAgICAgICAg\nIHJldHVybiBzaG9ydE1ldGhvZE5hbWU7CiAgICAgICAgfQoKICAgICAgICB0\naHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKCJDb3VsZCBub3QgaWRl\nbnRpZnkgY2FsbGluZyAiCiAgICAgICAgICAgICsgIm1ldGhvZCBpbiBzdGFj\nayB0cmFjZSIpOwogICAgfQp9Cg==\n","encoding":"base64"}

