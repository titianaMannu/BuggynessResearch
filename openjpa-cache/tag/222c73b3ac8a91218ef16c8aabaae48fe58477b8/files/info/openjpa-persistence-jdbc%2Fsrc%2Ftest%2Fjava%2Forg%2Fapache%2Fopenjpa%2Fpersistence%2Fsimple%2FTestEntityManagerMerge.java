{"sha":"47ae8de872b02e53be7b030465c7f950c537b23a","node_id":"MDQ6QmxvYjIwNjM2NDo0N2FlOGRlODcyYjAyZTUzYmU3YjAzMDQ2NWM3Zjk1MGM1MzdiMjNh","size":3861,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/47ae8de872b02e53be7b030465c7f950c537b23a","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uuc2ltcGxl\nOwoKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXI7Cgpp\nbXBvcnQganVuaXQudGV4dHVpLlRlc3RSdW5uZXI7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UudGVzdC5TaW5nbGVFTVRlc3RDYXNl\nOwoKLyoqCiAqIFRlc3QgY2FzZSB0byBlbnN1cmUgdGhhdCB0aGUgcHJvcGVy\nIEpQQSBtZXJnZSBzZW1hbnRpY3MgYXJlIHByb2Nlc3NlZC4KICoKICogQGF1\ndGhvciBLZXZpbiBTdXR0ZXIKICovCnB1YmxpYyBjbGFzcyBUZXN0RW50aXR5\nTWFuYWdlck1lcmdlCiAgICBleHRlbmRzIFNpbmdsZUVNVGVzdENhc2UgewoK\nICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgewogICAgICAgIHNldFVwKEFsbEZp\nZWxkVHlwZXMuY2xhc3MsIFBlcnNvbi5jbGFzcyk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgdGVzdE1lcmdlKCkgewogICAgICAgIC8vIENyZWF0ZSBFbnRp\ndHlNYW5hZ2VyIGFuZCBTdGFydCBhIHRyYW5zYWN0aW9uICgxKQogICAgICAg\nIGJlZ2luKCk7CgogICAgICAgIC8vIEluc2VydCBhIG5ldyBvYmplY3QgaW50\nbyB0aGUgUEMKICAgICAgICBBbGxGaWVsZFR5cGVzIHRlc3RPYmplY3QgPSBu\nZXcgQWxsRmllbGRUeXBlcygpOwogICAgICAgIHRlc3RPYmplY3Quc2V0U3Ry\naW5nRmllbGQoIm5ldyB0ZXN0IG9iamVjdCIpOwogICAgICAgIHBlcnNpc3Qo\ndGVzdE9iamVjdCk7CiAgICAgICAgYXNzZXJ0VHJ1ZSgidGVzdE9iamVjdCBu\nb3QgZm91bmQgaW4gcGMiLCBlbS5jb250YWlucyh0ZXN0T2JqZWN0KSk7CiAg\nICAgICAgCiAgICAgICAgLy8gTW9kaWZ5IHRoaXMgb2JqZWN0Li4uCiAgICAg\nICAgdGVzdE9iamVjdC5zZXRTdHJpbmdGaWVsZCgidXBkYXRlZCB0ZXN0IG9i\namVjdCIpOwoKICAgICAgICAvLyBBdHRlbXB0IHRvIG1lcmdlIHRoaXMgdXBk\nYXRlZCBvYmplY3QgaW50byB0aGUgUEMuICBTaG91bGQgYmUgaWdub3JlZC4K\nICAgICAgICBBbGxGaWVsZFR5cGVzIG1lcmdlZE9iamVjdCA9IGVtLm1lcmdl\nKHRlc3RPYmplY3QpOwogICAgICAgIGFzc2VydFRydWUoIm1lcmdlZE9iamVj\ndCBhbmQgdGVzdE9iamVjdCBhcmUgbm90IGVxdWFsIiwgCiAgICAgICAgICAg\nICAgICBtZXJnZWRPYmplY3QuZXF1YWxzKHRlc3RPYmplY3QpKTsKICAgICAg\nICBhc3NlcnRUcnVlKCJtZXJnZWRPYmplY3QgYW5kIHRlc3RPYmplY3QgYXJl\nIG5vdCA9PSIsIAogICAgICAgICAgICAgICAgbWVyZ2VkT2JqZWN0ID09IHRl\nc3RPYmplY3QpOwogICAgICAgIGFzc2VydFRydWUoInRlc3RPYmplY3Qgbm90\nIGZvdW5kIGluIHBjIiwgZW0uY29udGFpbnModGVzdE9iamVjdCkpOwogICAg\nICAgIGFzc2VydFRydWUoIm1lcmdlZE9iamVjdCBub3QgZm91bmQgaW4gcGMi\nLCBlbS5jb250YWlucyhtZXJnZWRPYmplY3QpKTsKICAgICAgICAKICAgICAg\nICAvLyBBbmQsIG9uY2UgYWdhaW4uLi4KICAgICAgICB0ZXN0T2JqZWN0LnNl\ndFN0cmluZ0ZpZWxkKCJ5ZXQgYW5vdGhlciB1cGRhdGUiKTsKICAgICAgICBB\nbGxGaWVsZFR5cGVzIG1lcmdlZE9iamVjdDIgPSBlbS5tZXJnZSh0ZXN0T2Jq\nZWN0KTsKICAgICAgICBhc3NlcnRUcnVlKCJtZXJnZWRPYmplY3QyIGFuZCB0\nZXN0T2JqZWN0IGFyZSBub3QgZXF1YWwiLCAKICAgICAgICAgICAgICAgIG1l\ncmdlZE9iamVjdDIuZXF1YWxzKHRlc3RPYmplY3QpKTsKICAgICAgICBhc3Nl\ncnRUcnVlKCJtZXJnZWRPYmplY3QyIGFuZCB0ZXN0T2JqZWN0IGFyZSBub3Qg\nPT0iLCAKICAgICAgICAgICAgICAgIG1lcmdlZE9iamVjdDIgPT0gdGVzdE9i\namVjdCk7CiAgICAgICAgYXNzZXJ0VHJ1ZSgidGVzdE9iamVjdCBub3QgZm91\nbmQgaW4gcGMiLCBlbS5jb250YWlucyh0ZXN0T2JqZWN0KSk7CiAgICAgICAg\nYXNzZXJ0VHJ1ZSgibWVyZ2VkT2JqZWN0MiBub3QgZm91bmQgaW4gcGMiLCBl\nbS5jb250YWlucyhtZXJnZWRPYmplY3QyKSk7CiAgICAgICAgCiAgICAgICAg\nLy8gUm9sbGJhY2sKICAgICAgICByb2xsYmFjaygpOwogIAogICAgfQogICAg\nCiAgICAvKioKICAgICAqIFRoaXMgdGVzdCB2ZXJpZmllcyB0aGF0IHBlcnNp\nc3RpbmcgYSBuZXcgZW50aXR5IHdoaWNoIG1hdGNoZXMgYW4gZXhpc3Rpbmcg\nCiAgICAgKiByb3cgaW4gdGhlIGRhdGFiYXNlIHN1Y2NlZWRzLiAKICAgICAq\nLwogICAgcHVibGljIHZvaWQgdGVzdE1lcmdlRXhpc3RpbmdFbnRpdHkoKSB7\nCiAgICAgICAgUGVyc29uIHAgPSBuZXcgUGVyc29uKCk7CiAgICAgICAgcC5z\nZXRJZCgxMDIpOwoKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNy\nZWF0ZUVudGl0eU1hbmFnZXIoKTsKCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rp\nb24oKS5iZWdpbigpOwogICAgICAgIGVtLnBlcnNpc3QocCk7CiAgICAgICAg\nZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9z\nZSgpOwoKICAgICAgICBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7\nCiAgICAgICAgcCA9IG5ldyBQZXJzb24oKTsKICAgICAgICBwLnNldElkKDEw\nMik7CiAgICAgICAgcC5zZXRGb3JlbmFtZSgiSmFuZSIpOwoKICAgICAgICBl\nbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgZW0ubWVyZ2Uo\ncCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKCiAg\nICAgICAgZW0uY2xvc2UoKTsKCiAgICAgICAgZW0gPSBlbWYuY3JlYXRlRW50\naXR5TWFuYWdlcigpOwogICAgICAgIHAgPSAoUGVyc29uKSBlbS5jcmVhdGVR\ndWVyeSgiU2VsZWN0IHAgZnJvbSBQZXJzb24gcCB3aGVyZSBwLmlkID0gMTAy\nIikKICAgICAgICAgICAgICAgIC5nZXRTaW5nbGVSZXN1bHQoKTsKCiAgICAg\nICAgYXNzZXJ0Tm90TnVsbChwKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIkph\nbmUiLCBwLmdldEZvcmVuYW1lKCkpOwogICAgICAgIAogICAgICAgIGVtLmNs\nb3NlKCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWlu\nKFN0cmluZ1tdIGFyZ3MpIHsKICAgICAgICBUZXN0UnVubmVyLnJ1bihUZXN0\nRW50aXR5TWFuYWdlck1lcmdlLmNsYXNzKTsKICAgIH0KfQoK\n","encoding":"base64"}

