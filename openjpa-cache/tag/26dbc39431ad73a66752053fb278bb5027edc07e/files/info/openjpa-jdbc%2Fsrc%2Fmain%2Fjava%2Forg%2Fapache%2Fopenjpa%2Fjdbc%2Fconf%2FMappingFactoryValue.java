{"sha":"33329e1581636d9540ff77e6ad4b19a61df9f8ec","node_id":"MDQ6QmxvYjIwNjM2NDozMzMyOWUxNTgxNjM2ZDk1NDBmZjc3ZTZhZDRiMTlhNjFkZjlmOGVj","size":6167,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/33329e1581636d9540ff77e6ad4b19a61df9f8ec","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5jb25mOwoKaW1wb3J0\nIG9yZy5hcGFjaGUuY29tbW9ucy5sYW5nLlN0cmluZ1V0aWxzOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5NZXRhRGF0YVBsdXNNYXBw\naW5nRmFjdG9yeTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29u\nZi5Db25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxp\nYi5jb25mLkNvbmZpZ3VyYXRpb25zOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmxpYi5jb25mLlBsdWdpblZhbHVlOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmxpYi5sb2cuTG9nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmxpYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5tZXRhLk1ldGFEYXRhRmFjdG9yeTsKCi8qKgogKiBIYW5kbGVzIHRoZSBj\nb21wbGV4IGxvZ2ljIG9mIGNyZWF0aW5nIGEge0BsaW5rIE1ldGFEYXRhRmFj\ndG9yeX0gZm9yCiAqIGNvbWJpbmVkIG1ldGFkYXRhIGFuZCBtYXBwaW5nLgog\nKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKiBAbm9qYXZhZG9jCiAqLwpwdWJs\naWMgY2xhc3MgTWFwcGluZ0ZhY3RvcnlWYWx1ZQogICAgZXh0ZW5kcyBQbHVn\naW5WYWx1ZSB7CgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9jYWxpemVy\nIF9sb2MgPSBMb2NhbGl6ZXIuZm9yUGFja2FnZQogICAgICAgIChNYXBwaW5n\nRmFjdG9yeVZhbHVlLmNsYXNzKTsKCiAgICBwcml2YXRlIFN0cmluZ1tdIF9t\nZXRhRmFjdG9yeURlZmF1bHRzID0gbnVsbDsKICAgIHByaXZhdGUgU3RyaW5n\nW10gX21hcHBlZE1ldGFGYWN0b3J5RGVmYXVsdHMgPSBudWxsOwoKICAgIHB1\nYmxpYyBNYXBwaW5nRmFjdG9yeVZhbHVlKFN0cmluZyBwcm9wKSB7CiAgICAg\nICAgc3VwZXIocHJvcCwgZmFsc2UpOwogICAgfQoKICAgIC8qKgogICAgICog\nRGVmYXVsdCBzZXR0aW5nIGZvciBhIGdpdmVuIDxjb2RlPk1ldGFEYXRhRmFj\ndG9yeTwvY29kZT4gYWxpYXMgc2V0dGluZy4KICAgICAqIElmIGEgPGNvZGU+\nTWFwcGluZ0ZhY3Rvcnk8L2NvZGU+IHZhbHVlIGlzIG5vdCBzdXBwbGllZCwg\nd2UgY2hlY2sgdGhlc2UKICAgICAqIGRlZmF1bHRzIGFnYWluc3QgdGhlIDxj\nb2RlPk1ldGFEYXRhRmFjdG9yeTwvY29kZT4gc2V0dGluZy4gSWYgdGhlCiAg\nICAgKiA8Y29kZT5NZXRhRGF0YUZhY3Rvcnk8L2NvZGU+IGRvZXMgbm90IGhh\ndmUgYSBkZWZhdWx0LCB3ZSBhc3N1bWUgaXQKICAgICAqIGhhbmRsZXMgYm90\naCBtZXRhZGF0YSBhbmQgbWFwcGluZyBmYWN0b3J5LgogICAgICovCiAgICBw\ndWJsaWMgdm9pZCBzZXRNZXRhRGF0YUZhY3RvcnlEZWZhdWx0KFN0cmluZyBt\nZXRhQWxpYXMsCiAgICAgICAgU3RyaW5nIG1hcHBpbmdBbGlhcykgewogICAg\nICAgIF9tZXRhRmFjdG9yeURlZmF1bHRzID0gc2V0QWxpYXMobWV0YUFsaWFz\nLCBtYXBwaW5nQWxpYXMsCiAgICAgICAgICAgIF9tZXRhRmFjdG9yeURlZmF1\nbHRzKTsKICAgIH0KCiAgICAvKioKICAgICAqIElmIHRoZSA8Y29kZT5NYXBw\naW5nPC9jb2RlPiBwcm9wZXJ0eSBpcyBzZXQsIHdlIGNoZWNrIHRoZXNlIGRl\nZmF1bHRzCiAgICAgKiBiZWZvcmUgY2hlY2tpbmcgbWV0YWRhdGEgZmFjdG9y\neSBkZWZhdWx0cy4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0TWFwcGVk\nTWV0YURhdGFGYWN0b3J5RGVmYXVsdChTdHJpbmcgbWV0YUFsaWFzLAogICAg\nICAgIFN0cmluZyBtYXBwaW5nQWxpYXMpIHsKICAgICAgICBfbWFwcGVkTWV0\nYUZhY3RvcnlEZWZhdWx0cyA9IHNldEFsaWFzKG1ldGFBbGlhcywgbWFwcGlu\nZ0FsaWFzLAogICAgICAgICAgICBfbWFwcGVkTWV0YUZhY3RvcnlEZWZhdWx0\ncyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBJbnRhbnRpYXRlIGEge0BsaW5r\nIE1ldGFEYXRhRmFjdG9yeX0gcmVzcG9uc2libGUgZm9yIGJvdGggbWV0YWRh\ndGEgYW5kCiAgICAgKiBtYXBwaW5nLgogICAgICovCiAgICBwdWJsaWMgTWV0\nYURhdGFGYWN0b3J5IGluc3RhbnRpYXRlTWV0YURhdGFGYWN0b3J5KENvbmZp\nZ3VyYXRpb24gY29uZiwKICAgICAgICBQbHVnaW5WYWx1ZSBtZXRhUGx1Z2lu\nLCBTdHJpbmcgbWFwcGluZykgewogICAgICAgIHJldHVybiBpbnN0YW50aWF0\nZU1ldGFEYXRhRmFjdG9yeShjb25mLCBtZXRhUGx1Z2luLCBtYXBwaW5nLCB0\ncnVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIEludGFudGlhdGUgYSB7QGxp\nbmsgTWV0YURhdGFGYWN0b3J5fSByZXNwb25zaWJsZSBmb3IgYm90aCBtZXRh\nZGF0YSBhbmQKICAgICAqIG1hcHBpbmcuCiAgICAgKi8KICAgIHB1YmxpYyBN\nZXRhRGF0YUZhY3RvcnkgaW5zdGFudGlhdGVNZXRhRGF0YUZhY3RvcnkoQ29u\nZmlndXJhdGlvbiBjb25mLAogICAgICAgIFBsdWdpblZhbHVlIG1ldGFQbHVn\naW4sIFN0cmluZyBtYXBwaW5nLCBib29sZWFuIGZhdGFsKSB7CiAgICAgICAg\nU3RyaW5nIGNsc05hbWUgPSBnZXRDbGFzc05hbWUoKTsKICAgICAgICBTdHJp\nbmcgcHJvcHMgPSBnZXRQcm9wZXJ0aWVzKCk7CiAgICAgICAgU3RyaW5nIG1l\ndGFDbHNOYW1lID0gbWV0YVBsdWdpbi5nZXRDbGFzc05hbWUoKTsKICAgICAg\nICBTdHJpbmcgbWV0YVByb3BzID0gbWV0YVBsdWdpbi5nZXRQcm9wZXJ0aWVz\nKCk7CgogICAgICAgIC8vIGlmIG5vIG1hcHBpbmcgZmFjdG9yeSBzZXQsIGNo\nZWNrIGZvciBkZWZhdWx0IGZvciB0aGlzIGZhY3RvcnkKICAgICAgICBpZiAo\nU3RyaW5nVXRpbHMuaXNFbXB0eShjbHNOYW1lKSkgewogICAgICAgICAgICBT\ndHJpbmcgZGVmOwogICAgICAgICAgICBpZiAoIVN0cmluZ1V0aWxzLmlzRW1w\ndHkobWFwcGluZykpIHsKICAgICAgICAgICAgICAgIGRlZiA9IHVuYWxpYXMo\nbWV0YVBsdWdpbi5hbGlhcyhtZXRhQ2xzTmFtZSksCiAgICAgICAgICAgICAg\nICAgICAgX21hcHBlZE1ldGFGYWN0b3J5RGVmYXVsdHMsIHRydWUpOwogICAg\nICAgICAgICAgICAgaWYgKGRlZiAhPSBudWxsKQogICAgICAgICAgICAgICAg\nICAgIGNsc05hbWUgPSB1bmFsaWFzKGRlZik7CiAgICAgICAgICAgIH0KICAg\nICAgICAgICAgaWYgKFN0cmluZ1V0aWxzLmlzRW1wdHkoY2xzTmFtZSkpIHsK\nICAgICAgICAgICAgICAgIGRlZiA9IHVuYWxpYXMobWV0YVBsdWdpbi5hbGlh\ncyhtZXRhQ2xzTmFtZSksCiAgICAgICAgICAgICAgICAgICAgX21ldGFGYWN0\nb3J5RGVmYXVsdHMsIHRydWUpOwogICAgICAgICAgICAgICAgaWYgKGRlZiAh\nPSBudWxsKQogICAgICAgICAgICAgICAgICAgIGNsc05hbWUgPSB1bmFsaWFz\nKGRlZik7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIGlm\nIG1hcHBpbmcgZmFjdG9yeSBhbmQgbWV0YWRhdGEgZmFjdG9yeSB0aGUgc2Ft\nZSwgY29tYmluZQogICAgICAgIC8vIGludG8gbWV0YWRhdGEgZmFjdG9yeQog\nICAgICAgIGlmIChjbHNOYW1lICE9IG51bGwgJiYgY2xzTmFtZS5lcXVhbHMo\nbWV0YUNsc05hbWUpKSB7CiAgICAgICAgICAgIGlmIChwcm9wcyAhPSBudWxs\nICYmIG1ldGFQcm9wcyA9PSBudWxsKQogICAgICAgICAgICAgICAgbWV0YVBy\nb3BzID0gcHJvcHM7CiAgICAgICAgICAgIGVsc2UgaWYgKHByb3BzICE9IG51\nbGwpCiAgICAgICAgICAgICAgICBtZXRhUHJvcHMgKz0gIiwiICsgcHJvcHM7\nCiAgICAgICAgICAgIGNsc05hbWUgPSBudWxsOwogICAgICAgICAgICBwcm9w\ncyA9IG51bGw7CiAgICAgICAgfQoKICAgICAgICAvLyBpbnN0YW50aWF0ZSBm\nYWN0b3JpZXMKICAgICAgICBNZXRhRGF0YUZhY3RvcnkgbWFwID0gKE1ldGFE\nYXRhRmFjdG9yeSkgbmV3SW5zdGFuY2UoY2xzTmFtZSwKICAgICAgICAgICAg\nTWV0YURhdGFGYWN0b3J5LmNsYXNzLCBjb25mLCBmYXRhbCk7CiAgICAgICAg\nTWV0YURhdGFGYWN0b3J5IG1ldGE7CiAgICAgICAgaWYgKG1hcCAhPSBudWxs\nCiAgICAgICAgICAgICYmIG1hcC5nZXRDbGFzcygpLmdldE5hbWUoKS5pbmRl\neE9mKCJEZXByZWNhdGVkIikgIT0gLTEpIHsKICAgICAgICAgICAgLy8gZGVw\ncmVjYXRlZCBtYXBwaW5nIGZhY3RvcmllcyB0YWtlIG92ZXIgbWV0YWRhdGEg\ndG9vLCBzbyB3ZSBoYXZlCiAgICAgICAgICAgIC8vIHRvIHNwZWNpYWwtY2Fz\nZSB0aGVtIHRvIHRyZWF0IHRoZW0gbGlrZSBtZXRhZGF0YSBmYWN0b3J5IG9u\nbHkKICAgICAgICAgICAgbWV0YSA9IG1hcDsKICAgICAgICAgICAgbWFwID0g\nbnVsbDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBtZXRhID0gKE1l\ndGFEYXRhRmFjdG9yeSkgbWV0YVBsdWdpbi5uZXdJbnN0YW5jZQogICAgICAg\nICAgICAgICAgKG1ldGFDbHNOYW1lLCBNZXRhRGF0YUZhY3RvcnkuY2xhc3Ms\nIGNvbmYsIGZhdGFsKTsKICAgICAgICB9CgogICAgICAgIC8vIGNvbmZpZ3Vy\nZSBmYWN0b3JpZXMuICBpZiBvbmx5IG1ldGEgZmFjdG9yeSwgYWxsb3cgdXNl\nciB0byBzcGVjaWZ5CiAgICAgICAgLy8gaXRzIG1hcHBpbmcgcHJvcGVydGll\ncyBpbiB0aGUgbWFwcGluZyBmYWN0b3J5IHNldHRpbmcKICAgICAgICBpZiAo\nbWFwID09IG51bGwgJiYgcHJvcHMgIT0gbnVsbCkgewogICAgICAgICAgICBp\nZiAobWV0YVByb3BzID09IG51bGwpCiAgICAgICAgICAgICAgICBtZXRhUHJv\ncHMgPSBwcm9wczsKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAg\nbWV0YVByb3BzICs9ICIsICIgKyBwcm9wczsKICAgICAgICB9CiAgICAgICAg\nQ29uZmlndXJhdGlvbnMuY29uZmlndXJlSW5zdGFuY2UobWFwLCBjb25mLCBw\ncm9wcywKICAgICAgICAgICAgKGZhdGFsKSA/IGdldFByb3BlcnR5KCkgOiBu\ndWxsKTsKICAgICAgICBDb25maWd1cmF0aW9ucy5jb25maWd1cmVJbnN0YW5j\nZShtZXRhLCBjb25mLCBtZXRhUHJvcHMsCiAgICAgICAgICAgIChmYXRhbCkg\nPyBtZXRhUGx1Z2luLmdldFByb3BlcnR5KCkgOiBudWxsKTsKCiAgICAgICAg\nTG9nIGxvZyA9IGNvbmYuZ2V0TG9nKEpEQkNDb25maWd1cmF0aW9uLkxPR19N\nRVRBREFUQSk7CiAgICAgICAgaWYgKGxvZy5pc1RyYWNlRW5hYmxlZCgpKSB7\nCiAgICAgICAgICAgIGxvZy50cmFjZShfbG9jLmdldCgibWV0YS1mYWN0b3J5\nIiwgbWV0YSkpOwogICAgICAgICAgICBpZiAobWFwICE9IG51bGwpCiAgICAg\nICAgICAgICAgICBsb2cudHJhY2UoX2xvYy5nZXQoIm1hcC1mYWN0b3J5Iiwg\nbWFwKSk7CiAgICAgICAgfQoKICAgICAgICAvLyBpZiBubyBtYXBwaW5nIHNl\ndHRpbmcsIHJldHVybiBtZXRhIGZhY3RvcnkgYWxvbmUsIGFzc3VtaW5nIGl0\nIGhhbmRsZXMKICAgICAgICAvLyBib3RoIG1ldGFkYXRhIGFuZCBtYXBwaW5n\nCiAgICAgICAgTWV0YURhdGFGYWN0b3J5IHJldCA9IChtYXAgPT0gbnVsbCkg\nPyBtZXRhCiAgICAgICAgICAgIDogbmV3IE1ldGFEYXRhUGx1c01hcHBpbmdG\nYWN0b3J5KG1ldGEsIG1hcCk7CiAgICAgICAgcmV0dXJuIHJldDsKICAgIH0K\nfQo=\n","encoding":"base64"}

