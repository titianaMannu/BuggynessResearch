{"sha":"a14c605f051b098049f8d601119506330b10899c","node_id":"MDQ6QmxvYjIwNjM2NDphMTRjNjA1ZjA1MWIwOTgwNDlmOGQ2MDExMTk1MDYzMzBiMTA4OTlj","size":4002,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/a14c605f051b098049f8d601119506330b10899c","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWw7CgppbXBv\ncnQgamF2YS5zcWwuUmVzdWx0U2V0OwppbXBvcnQgamF2YS5zcWwuUmVzdWx0\nU2V0TWV0YURhdGE7CmltcG9ydCBqYXZhLnNxbC5TUUxFeGNlcHRpb247Cgpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5KYXZhU1FMVHlw\nZXM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuUmVzdWx0\nU2V0UmVzdWx0OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3Fs\nLlNRTEV4Y2VwdGlvbnM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2Vy\nbmVsLlJlc3VsdFBhY2tlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5s\naWIucm9wLlJlc3VsdE9iamVjdFByb3ZpZGVyOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLnV0aWwuU3RvcmVFeGNlcHRpb247CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEudXRpbC5VbnN1cHBvcnRlZEV4Y2VwdGlvbjsKaW1wb3J0\nIHNlcnAudXRpbC5OdW1iZXJzOwoKLyoqCiAqIFByb3ZpZGVzIGFsbCBjb2x1\nbW4gZGF0YSBpbiBhIHtAbGluayBSZXN1bHRTZXR9LgogKgogKiBAYXV0aG9y\nIEFiZSBXaGl0ZQogKi8KY2xhc3MgU1FMUHJvamVjdGlvblJlc3VsdE9iamVj\ndFByb3ZpZGVyCiAgICBpbXBsZW1lbnRzIFJlc3VsdE9iamVjdFByb3ZpZGVy\nIHsKCiAgICBwcml2YXRlIGZpbmFsIEpEQkNTdG9yZSBfc3RvcmU7CiAgICBw\ncml2YXRlIGZpbmFsIEpEQkNGZXRjaENvbmZpZ3VyYXRpb24gX2ZldGNoOwog\nICAgcHJpdmF0ZSBmaW5hbCBSZXN1bHRTZXRSZXN1bHQgX3JlczsKICAgIHBy\naXZhdGUgZmluYWwgUmVzdWx0UGFja2VyIF9wYWNrZXI7CiAgICBwcml2YXRl\nIGZpbmFsIGludCBfY29sczsKCiAgICAvKioKICAgICAqIENvbnN0cnVjdG9y\nLgogICAgICoKICAgICAqIEBwYXJhbSByZXMgdGhlIHJlc3VsdCBkYXRhCiAg\nICAgKiBAcGFyYW0gY2xzIHRoZSByZXN1bHQgY2xhc3M7IG1heSBiZSBudWxs\nIGZvciB0aGUgZGVmYXVsdAogICAgICovCiAgICBwdWJsaWMgU1FMUHJvamVj\ndGlvblJlc3VsdE9iamVjdFByb3ZpZGVyKEpEQkNTdG9yZSBzdG9yZSwKICAg\nICAgICBKREJDRmV0Y2hDb25maWd1cmF0aW9uIGZldGNoLCBSZXN1bHRTZXRS\nZXN1bHQgcmVzLCBDbGFzcyBjbHMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2Vw\ndGlvbiB7CiAgICAgICAgX3N0b3JlID0gc3RvcmU7CiAgICAgICAgX2ZldGNo\nID0gZmV0Y2g7CgogICAgICAgIFJlc3VsdFNldE1ldGFEYXRhIG1ldGEgPSBy\nZXMuZ2V0UmVzdWx0U2V0KCkuZ2V0TWV0YURhdGEoKTsKICAgICAgICBfcmVz\nID0gcmVzOwogICAgICAgIF9jb2xzID0gbWV0YS5nZXRDb2x1bW5Db3VudCgp\nOwoKICAgICAgICBpZiAoY2xzICE9IG51bGwpIHsKICAgICAgICAgICAgU3Ry\naW5nW10gYWxpYXNlcyA9IG5ldyBTdHJpbmdbX2NvbHNdOwogICAgICAgICAg\nICBmb3IgKGludCBpID0gMDsgaSA8IF9jb2xzOyBpKyspCiAgICAgICAgICAg\nICAgICBhbGlhc2VzW2ldID0gbWV0YS5nZXRDb2x1bW5MYWJlbChpICsgMSk7\nCiAgICAgICAgICAgIF9wYWNrZXIgPSBuZXcgUmVzdWx0UGFja2VyKG51bGws\nIGFsaWFzZXMsIGNscyk7CiAgICAgICAgfSBlbHNlCiAgICAgICAgICAgIF9w\nYWNrZXIgPSBudWxsOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIHN1cHBv\ncnRzUmFuZG9tQWNjZXNzKCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAg\nIHJldHVybiBfcmVzLnN1cHBvcnRzUmFuZG9tQWNjZXNzKCk7CiAgICAgICAg\nfSBjYXRjaCAoVGhyb3dhYmxlIHQpIHsKICAgICAgICAgICAgcmV0dXJuIGZh\nbHNlOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCBvcGVuKCkg\newogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgZ2V0UmVzdWx0T2JqZWN0KCkK\nICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBpZiAoX2Nv\nbHMgPT0gMSkgewogICAgICAgICAgICBPYmplY3QgdmFsID0gX3Jlcy5nZXRP\nYmplY3QoTnVtYmVycy52YWx1ZU9mKDEpLAogICAgICAgICAgICAgICAgSmF2\nYVNRTFR5cGVzLkpEQkNfREVGQVVMVCwgbnVsbCk7CiAgICAgICAgICAgIHJl\ndHVybiAoX3BhY2tlciA9PSBudWxsKSA/IHZhbCA6IF9wYWNrZXIucGFjayh2\nYWwpOwogICAgICAgIH0KCiAgICAgICAgT2JqZWN0W10gdmFscyA9IG5ldyBP\nYmplY3RbX2NvbHNdOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgdmFs\ncy5sZW5ndGg7IGkrKykKICAgICAgICAgICAgdmFsc1tpXSA9IF9yZXMuZ2V0\nT2JqZWN0KE51bWJlcnMudmFsdWVPZihpICsgMSksCiAgICAgICAgICAgICAg\nICBKYXZhU1FMVHlwZXMuSkRCQ19ERUZBVUxULCBudWxsKTsKICAgICAgICBy\nZXR1cm4gKF9wYWNrZXIgPT0gbnVsbCkgPyB2YWxzIDogX3BhY2tlci5wYWNr\nKHZhbHMpOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIG5leHQoKQogICAg\nICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBfcmVz\nLm5leHQoKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBhYnNvbHV0ZShp\nbnQgcG9zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAg\nIHJldHVybiBfcmVzLmFic29sdXRlKHBvcyk7CiAgICB9CgogICAgcHVibGlj\nIGludCBzaXplKCkKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAg\nICAgICBpZiAoX2ZldGNoLmdldExSU1NpemUoKSA9PSBMUlNTaXplcy5TSVpF\nX1VOS05PV04KICAgICAgICAgICAgfHwgIXN1cHBvcnRzUmFuZG9tQWNjZXNz\nKCkpCiAgICAgICAgICAgIHJldHVybiBJbnRlZ2VyLk1BWF9WQUxVRTsKICAg\nICAgICByZXR1cm4gX3Jlcy5zaXplKCk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgcmVzZXQoKSB7CiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkRXhj\nZXB0aW9uKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgY2xvc2UoKSB7CiAg\nICAgICAgX3Jlcy5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGhh\nbmRsZUNoZWNrZWRFeGNlcHRpb24oRXhjZXB0aW9uIGUpIHsKICAgICAgICBp\nZiAoZSBpbnN0YW5jZW9mIFNRTEV4Y2VwdGlvbikKICAgICAgICAgICAgdGhy\nb3cgU1FMRXhjZXB0aW9ucy5nZXRTdG9yZSgoU1FMRXhjZXB0aW9uKSBlLAog\nICAgICAgICAgICAgICAgX3N0b3JlLmdldERCRGljdGlvbmFyeSgpKTsKICAg\nICAgICB0aHJvdyBuZXcgU3RvcmVFeGNlcHRpb24oZSk7CiAgICB9Cn0K\n","encoding":"base64"}

