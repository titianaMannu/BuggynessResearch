{"sha":"329fcad522c2a38571bcf7ae444dfe06d0bc21b3","node_id":"MDQ6QmxvYjIwNjM2NDozMjlmY2FkNTIyYzJhMzg1NzFiY2Y3YWU0NDRkZmUwNmQwYmMyMWIz","size":7613,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/329fcad522c2a38571bcf7ae444dfe06d0bc21b3","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWw7CgppbXBv\ncnQgamF2YS5zcWwuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmEuc3FsLlNRTEV4\nY2VwdGlvbjsKaW1wb3J0IGphdmEuc3FsLlR5cGVzOwoKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5qZGJjLmNvbmYuSkRCQ0NvbmZpZ3VyYXRpb247Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5jb25mLkpEQkNDb25maWd1\ncmF0aW9uSW1wbDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1l\ndGEuQ2xhc3NNYXBwaW5nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpk\nYmMubWV0YS5NYXBwaW5nUmVwb3NpdG9yeTsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNjaGVtYS5Db2x1bW47CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEuamRiYy5zY2hlbWEuVGFibGU7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEuamRiYy5zcWwuREJEaWN0aW9uYXJ5OwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmxpYi5jb25mLkNvbmZpZ3VyYXRpb25zOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5PcHRpb25zOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuSmF2YVR5cGVzOwoKLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vCi8vIE5PVEU6IERvIG5vdCBjaGFuZ2UgcHJvcGVydHkgbmFtZXM7\nIHNlZSBTZXF1ZW5jZU1ldGFEYXRhCi8vIGFuZCBTZXF1ZW5jZU1hcHBpbmcg\nZm9yIHN0YW5kYXJkIHByb3BlcnR5IG5hbWVzLgovLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8K\nCi8qKgogKiBTcGVjaWFsaXphdGlvbiBvZiB0aGUge0BsaW5rIFRhYmxlSkRC\nQ1NlcX0gdGhhdCBtYWludGFpbnMgbXVsdGlwbGUKICogc2VxdWVuY2UgY291\nbnRzLiBFYWNoIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MgcmVwcmVzZW50cyBv\nbmUgcm93IHdpdGgKICogYSBrbm93biBzdHJpbmcgcHJpbWFyeSBrZXkgdmFs\ndWUsIG1vcmUgb3IgbGVzcy4gVGhlIHRhYmxlIG5hbWUgZGVmYXVsdHMKICog\ndG8gPGNvZGU+T1BFTkpQQV9TRVFVRU5DRVNfVEFCTEU8L2NvZGU+LgogKgog\nKiBAYXV0aG9yIEFiZSBXaGl0ZQogKi8KcHVibGljIGNsYXNzIFZhbHVlVGFi\nbGVKREJDU2VxCiAgICBleHRlbmRzIFRhYmxlSkRCQ1NlcSB7CgogICAgcHVi\nbGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgUEtfVkFMVUUgPSAiUHJpbWFyeUtl\neVZhbHVlIjsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6ZXIg\nX2xvYyA9IExvY2FsaXplci5mb3JQYWNrYWdlCiAgICAgICAgKFZhbHVlVGFi\nbGVKREJDU2VxLmNsYXNzKTsKCiAgICBwcml2YXRlIFN0cmluZyBfdmFsdWUg\nPSAiREVGQVVMVCI7CgogICAgcHVibGljIFZhbHVlVGFibGVKREJDU2VxKCkg\newogICAgICAgIHNldFRhYmxlKCJPUEVOSlBBX1NFUVVFTkNFU19UQUJMRSIp\nOwogICAgfQoKICAgIC8qKgogICAgICogVGhlIHByaW1hcnkga2V5IHZhbHVl\nIGZvciB0aGlzIHJvdy4gRGVmYXVsdHMgdG8gPGNvZGU+REVGQVVMVDwvY29k\nZT4uCiAgICAgKi8KICAgIHB1YmxpYyBTdHJpbmcgZ2V0UHJpbWFyeUtleVZh\nbHVlKCkgewogICAgICAgIHJldHVybiBfdmFsdWU7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBUaGUgcHJpbWFyeSBrZXkgdmFsdWUgZm9yIHRoaXMgcm93LiBE\nZWZhdWx0cyB0byA8Y29kZT5ERUZBVUxUPC9jb2RlPi4KICAgICAqLwogICAg\ncHVibGljIHZvaWQgc2V0UHJpbWFyeUtleVZhbHVlKFN0cmluZyB2YWx1ZSkg\newogICAgICAgIF92YWx1ZSA9IHZhbHVlOwogICAgfQoKICAgIHByb3RlY3Rl\nZCBDb2x1bW4gYWRkUHJpbWFyeUtleUNvbHVtbihUYWJsZSB0YWJsZSkgewog\nICAgICAgIERCRGljdGlvbmFyeSBkaWN0ID0gZ2V0Q29uZmlndXJhdGlvbigp\nLmdldERCRGljdGlvbmFyeUluc3RhbmNlKCk7CiAgICAgICAgQ29sdW1uIHBr\nQ29sdW1uID0gdGFibGUuYWRkQ29sdW1uKGRpY3QuZ2V0VmFsaWRDb2x1bW5O\nYW1lCiAgICAgICAgICAgIChnZXRQcmltYXJ5S2V5Q29sdW1uKCksIHRhYmxl\nKSk7CiAgICAgICAgcGtDb2x1bW4uc2V0VHlwZShkaWN0LmdldFByZWZlcnJl\nZFR5cGUoVHlwZXMuVkFSQ0hBUikpOwogICAgICAgIHBrQ29sdW1uLnNldEph\ndmFUeXBlKEphdmFUeXBlcy5TVFJJTkcpOwogICAgICAgIHBrQ29sdW1uLnNl\ndFNpemUoZGljdC5jaGFyYWN0ZXJDb2x1bW5TaXplKTsKICAgICAgICByZXR1\ncm4gcGtDb2x1bW47CiAgICB9CgogICAgcHJvdGVjdGVkIE9iamVjdCBnZXRQ\ncmltYXJ5S2V5KENsYXNzTWFwcGluZyBtYXBwaW5nKSB7CiAgICAgICAgcmV0\ndXJuIF92YWx1ZTsKICAgIH0KCiAgICAvLy8vLy8vLy8KICAgIC8vIE1haW4K\nICAgIC8vLy8vLy8vLwoKICAgIC8qKgogICAgICogVXNhZ2U6IGphdmEgb3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMua2VybmVsLlZhbHVlVGFibGVKREJDU2Vx\nIFtvcHRpb25dKgogICAgICogLWFjdGlvbi8tYSAmbHQ7YWRkIHwgZHJvcCB8\nIGdldCB8IHNldCZndDsgW3ByaW1hcnkga2V5IHZhbHVlXSBbdmFsdWVdCiAg\nICAgKiAgV2hlcmUgdGhlIGZvbGxvd2luZyBvcHRpb25zIGFyZSByZWNvZ25p\nemVkLgogICAgICogPHVsPgogICAgICogPGxpPjxpPi1wcm9wZXJ0aWVzLy1w\nICZsdDtwcm9wZXJ0aWVzIGZpbGUgb3IgcmVzb3VyY2UmZ3Q7PC9pPjogVGhl\nCiAgICAgKiBwYXRoIG9yIHJlc291cmNlIG5hbWUgb2YgYSBPcGVuSlBBIHBy\nb3BlcnRpZXMgZmlsZSBjb250YWluaW5nCiAgICAgKiBpbmZvcm1hdGlvbiBz\ndWNoIGFzIHRoZSBsaWNlbnNlIGtleQlhbmQgY29ubmVjdGlvbiBkYXRhIGFz\nCiAgICAgKiBvdXRsaW5lZCBpbiB7QGxpbmsgSkRCQ0NvbmZpZ3VyYXRpb259\nLiBPcHRpb25hbC48L2xpPgogICAgICogPGxpPjxpPi0mbHQ7cHJvcGVydHkg\nbmFtZSZndDsgJmx0O3Byb3BlcnR5IHZhbHVlJmd0OzwvaT46IEFsbCBiZWFu\nCiAgICAgKiBwcm9wZXJ0aWVzIG9mIHRoZSBPcGVuSlBBIHtAbGluayBKREJD\nQ29uZmlndXJhdGlvbn0gY2FuIGJlIHNldCBieQogICAgICogdXNpbmcgdGhl\naXIJbmFtZXMgYW5kIHN1cHBseWluZyBhIHZhbHVlLiBGb3IgZXhhbXBsZToK\nICAgICAqIDxjb2RlPi1saWNlbnNlS2V5IGFkc2xmamE4M3IzbGthZGY8L2Nv\nZGU+PC9saT4KICAgICAqIDwvdWw+CiAgICAgKiAgVGhlIHZhcmlvdXMgYWN0\naW9ucyBhcmUgYXMgZm9sbG93cy4KICAgICAqIDx1bD4KICAgICAqIDxsaT48\naT5hZGQ8L2k+OiBDcmVhdGUgdGhlIHNlcXVlbmNlIHRhYmxlLjwvbGk+CiAg\nICAgKiA8bGk+PGk+ZHJvcDwvaT46IERyb3AgdGhlIHNlcXVlbmNlIHRhYmxl\nLjwvbGk+CiAgICAgKiA8bGk+PGk+Z2V0PC9pPjogUHJpbnQgdGhlIGN1cnJl\nbnQgc2VxdWVuY2UgdmFsdWUgZm9yIHRoZSBnaXZlbgogICAgICogcHJpbWFy\neSBrZXkgdmFsdWUuPC9saT4KICAgICAqIDxsaT48aT5zZXQ8L2k+OiBTZXQg\ndGhlIHNlcXVlbmNlIHZhbHVlIGZvciB0aGUgZ2l2ZW4gcHJpbWFyeSBrZXkK\nICAgICAqIHZhbHVlLjwvbGk+CiAgICAgKiA8L3VsPgogICAgICovCiAgICBw\ndWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKQogICAgICAg\nIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIE9wdGlvbnMgb3B0cyA9IG5l\ndyBPcHRpb25zKCk7CiAgICAgICAgZmluYWwgU3RyaW5nW10gYXJndW1lbnRz\nID0gb3B0cy5zZXRGcm9tQ21kTGluZShhcmdzKTsKICAgICAgICBib29sZWFu\nIHJldCA9IENvbmZpZ3VyYXRpb25zLnJ1bkFnYWluc3RBbGxBbmNob3JzKG9w\ndHMsCiAgICAgICAgICAgIG5ldyBDb25maWd1cmF0aW9ucy5SdW5uYWJsZSgp\nIHsKICAgICAgICAgICAgcHVibGljIGJvb2xlYW4gcnVuKE9wdGlvbnMgb3B0\ncykgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgICAgICAgICBKREJDQ29u\nZmlndXJhdGlvbiBjb25mID0gbmV3IEpEQkNDb25maWd1cmF0aW9uSW1wbCgp\nOwogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBy\nZXR1cm4gVmFsdWVUYWJsZUpEQkNTZXEucnVuKGNvbmYsIGFyZ3VtZW50cywg\nb3B0cyk7CiAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAg\nICAgICAgICAgIGNvbmYuY2xvc2UoKTsKICAgICAgICAgICAgICAgIH0KICAg\nICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGlmICghcmV0KQogICAg\nICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oX2xvYy5nZXQoImNsc3RhYmxl\nLXNlcS11c2FnZSIpKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJ1biB0aGUg\ndG9vbC4gUmV0dXJucyBmYWxzZSBpZiBpbnZhbGlkIG9wdGlvbnMgd2VyZSBn\naXZlbi4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBib29sZWFuIHJ1bihK\nREJDQ29uZmlndXJhdGlvbiBjb25mLCBTdHJpbmdbXSBhcmdzLAogICAgICAg\nIE9wdGlvbnMgb3B0cykKICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsKICAg\nICAgICBTdHJpbmcgYWN0aW9uID0gb3B0cy5yZW1vdmVQcm9wZXJ0eSgiYWN0\naW9uIiwgImEiLCBudWxsKTsKICAgICAgICBDb25maWd1cmF0aW9ucy5wb3B1\nbGF0ZUNvbmZpZ3VyYXRpb24oY29uZiwgb3B0cyk7CiAgICAgICAgcmV0dXJu\nIHJ1bihjb25mLCBhcmdzLCBhY3Rpb24sIG51bGwsIG51bGwpOwogICAgfQoK\nICAgIC8qKgogICAgICogUnVuIHRoZSB0b29sLiBSZXR1cm4gZmFsc2UgaWYg\nYW4gaW52YWxpZCBvcHRpb24gd2FzIGdpdmVuLgogICAgICovCiAgICBwdWJs\naWMgc3RhdGljIGJvb2xlYW4gcnVuKEpEQkNDb25maWd1cmF0aW9uIGNvbmYs\nIFN0cmluZ1tdIGFyZ3MsCiAgICAgICAgU3RyaW5nIGFjdGlvbiwgTWFwcGlu\nZ1JlcG9zaXRvcnkgcmVwb3MsIENsYXNzTG9hZGVyIGxvYWRlcikKICAgICAg\nICB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBWYWx1ZVRhYmxlSkRCQ1Nl\ncSBzZXEgPSBuZXcgVmFsdWVUYWJsZUpEQkNTZXEoKTsKICAgICAgICBTdHJp\nbmcgcHJvcHMgPSBDb25maWd1cmF0aW9ucy5nZXRQcm9wZXJ0aWVzKGNvbmYu\nZ2V0U2VxdWVuY2UoKSk7CiAgICAgICAgQ29uZmlndXJhdGlvbnMuY29uZmln\ndXJlSW5zdGFuY2Uoc2VxLCBjb25mLCBwcm9wcyk7CgogICAgICAgIGlmIChB\nQ1RJT05fRFJPUC5lcXVhbHMoYWN0aW9uKSkgewogICAgICAgICAgICBpZiAo\nYXJncy5sZW5ndGggIT0gMCkKICAgICAgICAgICAgICAgIHJldHVybiBmYWxz\nZTsKICAgICAgICAgICAgc2VxLmRyb3BUYWJsZSgpOwogICAgICAgIH0gZWxz\nZSBpZiAoQUNUSU9OX0FERC5lcXVhbHMoYWN0aW9uKSkgewogICAgICAgICAg\nICBpZiAoYXJncy5sZW5ndGggIT0gMCkKICAgICAgICAgICAgICAgIHJldHVy\nbiBmYWxzZTsKICAgICAgICAgICAgc2VxLnJlZnJlc2hUYWJsZSgpOwogICAg\nICAgIH0gZWxzZSBpZiAoQUNUSU9OX0dFVC5lcXVhbHMoYWN0aW9uKSB8fCBB\nQ1RJT05fU0VULmVxdWFscyhhY3Rpb24pKSB7CiAgICAgICAgICAgIGlmIChh\ncmdzLmxlbmd0aCA+IDApCiAgICAgICAgICAgICAgICBzZXEuc2V0UHJpbWFy\neUtleVZhbHVlKGFyZ3NbMF0pOwoKICAgICAgICAgICAgQ29ubmVjdGlvbiBj\nb25uID0gY29uZi5nZXREYXRhU291cmNlMihudWxsKS5nZXRDb25uZWN0aW9u\nKCk7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBsb25nIGN1\nciA9IHNlcS5nZXRTZXF1ZW5jZShudWxsLCBjb25uKTsKICAgICAgICAgICAg\nICAgIGlmIChBQ1RJT05fR0VULmVxdWFscyhhY3Rpb24pKQogICAgICAgICAg\nICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihzZXEuZ2V0UHJpbWFyeUtl\neVZhbHVlKCkgKyAiOiAiICsgY3VyKTsKICAgICAgICAgICAgICAgIGVsc2Ug\newogICAgICAgICAgICAgICAgICAgIGxvbmcgc2V0OwogICAgICAgICAgICAg\nICAgICAgIGlmIChhcmdzLmxlbmd0aCA+IDEpCiAgICAgICAgICAgICAgICAg\nICAgICAgIHNldCA9IExvbmcucGFyc2VMb25nKGFyZ3NbMV0pOwogICAgICAg\nICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgc2V0\nID0gY3VyICsgc2VxLmdldEFsbG9jYXRlKCk7CiAgICAgICAgICAgICAgICAg\nICAgaWYgKHNldCA8IGN1cikKICAgICAgICAgICAgICAgICAgICAgICAgc2V0\nID0gY3VyOwogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAg\nICAgICAgICAgICAgICBTdGF0dXMgc3RhdCA9IHNlcS5nZXRTdGF0dXMobnVs\nbCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlcS5zZXRTZXF1ZW5jZShu\ndWxsLCBzdGF0LCAoaW50KSAoc2V0IC0gY3VyKSwgdHJ1ZSwKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIGNvbm4pOwogICAgICAgICAgICAgICAgICAg\nICAgICBzZXQgPSBzdGF0LnNlcTsKICAgICAgICAgICAgICAgICAgICB9CiAg\nICAgICAgICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKHNlcS5nZXRQ\ncmltYXJ5S2V5VmFsdWUoKSArICI6ICIgKyBzZXQpOwogICAgICAgICAgICAg\nICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhdGNoIChOdW1iZXJG\nb3JtYXRFeGNlcHRpb24gbmZlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4g\nZmFsc2U7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAg\nICB0cnkgewogICAgICAgICAgICAgICAgICAgIGNvbm4uY2xvc2UoKTsKICAg\nICAgICAgICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBzZSkgewogICAg\nICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlCiAg\nICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICByZXR1cm4gdHJ1ZTsK\nICAgIH0KfQo=\n","encoding":"base64"}

