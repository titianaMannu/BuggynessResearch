{"sha":"5d2a3ef4c3ecb968ccee6a4a18ccc44e5a90f7b4","node_id":"MDQ6QmxvYjIwNjM2NDo1ZDJhM2VmNGMzZWNiOTY4Y2NlZTZhNGExOGNjYzQ0ZTVhOTBmN2I0","size":5283,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/5d2a3ef4c3ecb968ccee6a4a18ccc44e5a90f7b4","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuZXhwczsK\nCmltcG9ydCBqYXZhLnNxbC5TUUxFeGNlcHRpb247CgppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMubWV0YS5DbGFzc01hcHBpbmc7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLkphdmFTUUxUeXBlczsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5SZXN1bHQ7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuU1FMQnVmZmVyOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNlbGVjdDsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuRmlsdGVyczsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuZXhwcy5FeHByZXNzaW9uVmlzaXRv\ncjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkNsYXNzTWV0YURh\ndGE7CgovKioKICogQWdncmVnYXRlIGxpc3RlbmVyIHRoYXQgZXZhbHVhdGVz\nIHRvIGEgdmFsdWUuCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqLwpjbGFz\ncyBBZ2dyZWdhdGUKICAgIGV4dGVuZHMgQWJzdHJhY3RWYWwgewoKICAgIHBy\naXZhdGUgZmluYWwgSkRCQ0FnZ3JlZ2F0ZUxpc3RlbmVyIF9saXN0ZW5lcjsK\nICAgIHByaXZhdGUgZmluYWwgVmFsIF9hcmc7CiAgICBwcml2YXRlIGZpbmFs\nIENsYXNzTWFwcGluZyBfY2FuZGlkYXRlOwogICAgcHJpdmF0ZSBDbGFzc01l\ndGFEYXRhIF9tZXRhID0gbnVsbDsKICAgIHByaXZhdGUgQ2xhc3MgX2Nhc3Qg\nPSBudWxsOwoKICAgIC8qKgogICAgICogQ29uc3RydWN0b3IuCiAgICAgKi8K\nICAgIHB1YmxpYyBBZ2dyZWdhdGUoSkRCQ0FnZ3JlZ2F0ZUxpc3RlbmVyIGxp\nc3RlbmVyLCBWYWwgYXJnLAogICAgICAgIENsYXNzTWFwcGluZyBjYW5kaWRh\ndGUpIHsKICAgICAgICBfbGlzdGVuZXIgPSBsaXN0ZW5lcjsKICAgICAgICBf\nYXJnID0gYXJnOwogICAgICAgIF9jYW5kaWRhdGUgPSBjYW5kaWRhdGU7CiAg\nICB9CgogICAgcHVibGljIENsYXNzTWV0YURhdGEgZ2V0TWV0YURhdGEoKSB7\nCiAgICAgICAgcmV0dXJuIF9tZXRhOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHNldE1ldGFEYXRhKENsYXNzTWV0YURhdGEgbWV0YSkgewogICAgICAgIF9t\nZXRhID0gbWV0YTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBpc0FnZ3Jl\nZ2F0ZSgpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBwdWJs\naWMgQ2xhc3MgZ2V0VHlwZSgpIHsKICAgICAgICBpZiAoX2Nhc3QgIT0gbnVs\nbCkKICAgICAgICAgICAgcmV0dXJuIF9jYXN0OwogICAgICAgIHJldHVybiBf\nbGlzdGVuZXIuZ2V0VHlwZShnZXRBcmdUeXBlcygpKTsKICAgIH0KCiAgICBw\ncml2YXRlIENsYXNzW10gZ2V0QXJnVHlwZXMoKSB7CiAgICAgICAgaWYgKF9h\ncmcgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAg\naWYgKF9hcmcgaW5zdGFuY2VvZiBBcmdzKQogICAgICAgICAgICByZXR1cm4g\nKChBcmdzKSBfYXJnKS5nZXRUeXBlcygpOwogICAgICAgIHJldHVybiBuZXcg\nQ2xhc3NbXXsgX2FyZy5nZXRUeXBlKCkgfTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBzZXRJbXBsaWNpdFR5cGUoQ2xhc3MgdHlwZSkgewogICAgICAgIF9j\nYXN0ID0gdHlwZTsKICAgIH0KCiAgICBwdWJsaWMgRXhwU3RhdGUgaW5pdGlh\nbGl6ZShTZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwgaW50IGZsYWdzKSB7\nCiAgICAgICAgaWYgKF9hcmcgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJu\nIEV4cFN0YXRlLk5VTEw7CgogICAgICAgIC8vIG5vdGUgdGhhdCB3ZSB0ZWxs\nIHRhcmdldHMgYW5kIGFyZ3MgdG8gZXh0ZW5zaW9ucyB0aGF0IGFyZSBzcWwK\nICAgICAgICAvLyBwYXRocyB0byBnbyBhaGVhZCBhbmQgam9pbiB0byB0aGVp\nciByZWxhdGVkIG9iamVjdCAoaWYgYW55KSwKICAgICAgICAvLyBiZWNhdXNl\nIHdlIGFzc3VtZSB0aGF0LCB1bmxpa2UgbW9zdCBvcGVyYXRpb25zLCBpZiBh\nIHJlbGF0aW9uCiAgICAgICAgLy8gZmllbGQgbGlrZSBhIDEtMSBpcyBnaXZl\nbiBhcyB0aGUgdGFyZ2V0IG9mIGFuIGV4dGVuc2lvbiwgdGhlbgogICAgICAg\nIC8vIHRoZSBleHRlbnNpb24gcHJvYmFibHkgYWN0cyBvbiBzb21lIGZpZWxk\nIG9yIGNvbHVtbiBpbiB0aGUKICAgICAgICAvLyByZWxhdGVkIG9iamVjdCwg\nbm90IHRoZSAxLTEgZmllbGQgaXRzZWxmCiAgICAgICAgcmV0dXJuIF9hcmcu\naW5pdGlhbGl6ZShzZWwsIGN0eCwgSk9JTl9SRUwpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHNlbGVjdChTZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwg\nRXhwU3RhdGUgc3RhdGUsIAogICAgICAgIGJvb2xlYW4gcGtzKSB7CiAgICAg\nICAgc2VsLnNlbGVjdChuZXdTUUxCdWZmZXIoc2VsLCBjdHgsIHN0YXRlKSwg\ndGhpcyk7CiAgICAgICAgc2VsLnNldEFnZ3JlZ2F0ZSh0cnVlKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBzZWxlY3RDb2x1bW5zKFNlbGVjdCBzZWwsIEV4\ncENvbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSwgCiAgICAgICAgYm9vbGVh\nbiBwa3MpIHsKICAgICAgICBpZiAoX2FyZyAhPSBudWxsKQogICAgICAgICAg\nICBfYXJnLnNlbGVjdENvbHVtbnMoc2VsLCBjdHgsIHN0YXRlLCB0cnVlKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCBncm91cEJ5KFNlbGVjdCBzZWwsIEV4\ncENvbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSkgewogICAgICAgIHNlbC5n\ncm91cEJ5KG5ld1NRTEJ1ZmZlcihzZWwsIGN0eCwgc3RhdGUpKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBvcmRlckJ5KFNlbGVjdCBzZWwsIEV4cENvbnRl\neHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSwgCiAgICAgICAgYm9vbGVhbiBhc2Mp\nIHsKICAgICAgICBzZWwub3JkZXJCeShuZXdTUUxCdWZmZXIoc2VsLCBjdHgs\nIHN0YXRlKSwgYXNjLCBmYWxzZSk7CiAgICB9CgogICAgcHJpdmF0ZSBTUUxC\ndWZmZXIgbmV3U1FMQnVmZmVyKFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4\nLCBFeHBTdGF0ZSBzdGF0ZSkgewogICAgICAgIGNhbGN1bGF0ZVZhbHVlKHNl\nbCwgY3R4LCBzdGF0ZSwgbnVsbCwgbnVsbCk7CiAgICAgICAgU1FMQnVmZmVy\nIGJ1ZiA9IG5ldyBTUUxCdWZmZXIoY3R4LnN0b3JlLmdldERCRGljdGlvbmFy\neSgpKTsKICAgICAgICBhcHBlbmRUbyhzZWwsIGN0eCwgc3RhdGUsIGJ1Ziwg\nMCk7CiAgICAgICAgcmV0dXJuIGJ1ZjsKICAgIH0KCiAgICBwdWJsaWMgT2Jq\nZWN0IGxvYWQoRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlLCBSZXN1\nbHQgcmVzKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAg\nIHJldHVybiBGaWx0ZXJzLmNvbnZlcnQocmVzLmdldE9iamVjdCh0aGlzLCBK\nYXZhU1FMVHlwZXMuSkRCQ19ERUZBVUxULCAKICAgICAgICAgICAgbnVsbCks\nIGdldFR5cGUoKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgY2FsY3VsYXRl\nVmFsdWUoU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0\nYXRlLCAKICAgICAgICBWYWwgb3RoZXIsIEV4cFN0YXRlIG90aGVyU3RhdGUp\nIHsKICAgICAgICBpZiAoX2FyZyAhPSBudWxsKQogICAgICAgICAgICBfYXJn\nLmNhbGN1bGF0ZVZhbHVlKHNlbCwgY3R4LCBzdGF0ZSwgbnVsbCwgbnVsbCk7\nCiAgICB9CgogICAgcHVibGljIGludCBsZW5ndGgoU2VsZWN0IHNlbCwgRXhw\nQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlKSB7CiAgICAgICAgcmV0dXJu\nIDE7CiAgICB9CgogICAgcHVibGljIHZvaWQgYXBwZW5kVG8oU2VsZWN0IHNl\nbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlLCAKICAgICAgICBT\nUUxCdWZmZXIgc3FsLCBpbnQgaW5kZXgpIHsKICAgICAgICBfbGlzdGVuZXIu\nYXBwZW5kVG8oc3FsLCBnZXRBcmdzKHNlbCwgY3R4LCBzdGF0ZSksIF9jYW5k\naWRhdGUsIAogICAgICAgICAgICBjdHguc3RvcmUpOwogICAgICAgIHNlbC5h\ncHBlbmQoc3FsLCBzdGF0ZS5qb2lucyk7CiAgICB9CgogICAgcHJpdmF0ZSBG\naWx0ZXJWYWx1ZVtdIGdldEFyZ3MoU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBj\ndHgsIEV4cFN0YXRlIHN0YXRlKSB7CiAgICAgICAgaWYgKF9hcmcgPT0gbnVs\nbCkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKF9hcmcg\naW5zdGFuY2VvZiBBcmdzKQogICAgICAgICAgICByZXR1cm4gKChBcmdzKSBf\nYXJnKS5uZXdGaWx0ZXJWYWx1ZXMoc2VsLCBjdHgsIHN0YXRlKTsKICAgICAg\nICByZXR1cm4gbmV3IEZpbHRlclZhbHVlW117CiAgICAgICAgICAgIG5ldyBG\naWx0ZXJWYWx1ZUltcGwoc2VsLCBjdHgsIHN0YXRlLCBfYXJnKQogICAgICAg\nIH07CiAgICB9CgogICAgcHVibGljIHZvaWQgYWNjZXB0VmlzaXQoRXhwcmVz\nc2lvblZpc2l0b3IgdmlzaXRvcikgewogICAgICAgIHZpc2l0b3IuZW50ZXIo\ndGhpcyk7CiAgICAgICAgaWYgKF9hcmcgIT0gbnVsbCkKICAgICAgICAgICAg\nX2FyZy5hY2NlcHRWaXNpdCh2aXNpdG9yKTsKICAgICAgICB2aXNpdG9yLmV4\naXQodGhpcyk7CiAgICB9Cn0K\n","encoding":"base64"}

