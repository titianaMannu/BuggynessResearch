{"sha":"6c893715eabbc800cb1a89ff1f7399552b330f6a","node_id":"MDQ6QmxvYjIwNjM2NDo2Yzg5MzcxNWVhYmJjODAwY2IxYTg5ZmYxZjczOTk1NTJiMzMwZjZh","size":4543,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/6c893715eabbc800cb1a89ff1f7399552b330f6a","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuZXhwczsK\nCmltcG9ydCBqYXZhLnV0aWwuTWFwOwoKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLnNxbC5TUUxCdWZmZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5zcWwuU2VsZWN0OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmtlcm5lbC5GaWx0ZXJzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmtlcm5lbC5leHBzLkV4cHJlc3Npb25WaXNpdG9yOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmxpYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS51dGlsLlVzZXJFeGNlcHRpb247CgovKioKICogQ29t\ncGFyZXMgdHdvIHZhbHVlcyBmb3IgZXF1YWxpdHkuCiAqCiAqIEBhdXRob3Ig\nQWJlIFdoaXRlCiAqLwphYnN0cmFjdCBjbGFzcyBDb21wYXJlRXF1YWxFeHBy\nZXNzaW9uCiAgICBpbXBsZW1lbnRzIEV4cCB7CgogICAgcHJpdmF0ZSBzdGF0\naWMgZmluYWwgTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6ZXIuZm9yUGFja2Fn\nZQogICAgICAgIChDb21wYXJlRXF1YWxFeHByZXNzaW9uLmNsYXNzKTsKCiAg\nICBwcml2YXRlIGZpbmFsIFZhbCBfdmFsMTsKICAgIHByaXZhdGUgZmluYWwg\nVmFsIF92YWwyOwoKICAgIC8qKgogICAgICogQ29uc3RydWN0b3IuIFN1cHBs\neSB2YWx1ZXMgdG8gY29tcGFyZS4KICAgICAqLwogICAgcHVibGljIENvbXBh\ncmVFcXVhbEV4cHJlc3Npb24oVmFsIHZhbDEsIFZhbCB2YWwyKSB7CiAgICAg\nICAgX3ZhbDEgPSB2YWwxOwogICAgICAgIF92YWwyID0gdmFsMjsKICAgIH0K\nCiAgICBwdWJsaWMgVmFsIGdldFZhbHVlMSgpIHsKICAgICAgICByZXR1cm4g\nX3ZhbDE7CiAgICB9CgogICAgcHVibGljIFZhbCBnZXRWYWx1ZTIoKSB7CiAg\nICAgICAgcmV0dXJuIF92YWwyOwogICAgfQoKICAgIHB1YmxpYyBFeHBTdGF0\nZSBpbml0aWFsaXplKFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBNYXAg\nY29udGFpbnMpIHsKICAgICAgICBib29sZWFuIGRpcmVjdCA9IGlzRGlyZWN0\nQ29tcGFyaXNvbigpOwogICAgICAgIGludCBmbGFnczEgPSAwOwogICAgICAg\nIGludCBmbGFnczIgPSAwOwogICAgICAgIEV4cFN0YXRlIHMxID0gbnVsbDsK\nICAgICAgICBFeHBTdGF0ZSBzMiA9IG51bGw7CiAgICAgICAgaWYgKF92YWwx\nIGluc3RhbmNlb2YgQ29uc3QpIHsKICAgICAgICAgICAgczEgPSBfdmFsMS5p\nbml0aWFsaXplKHNlbCwgY3R4LCAwKTsKICAgICAgICAgICAgaWYgKGRpcmVj\ndCAmJiAoKENvbnN0KSBfdmFsMSkuZ2V0VmFsdWUoY3R4LCBzMSkgPT0gbnVs\nbCkKICAgICAgICAgICAgICAgIGZsYWdzMiA9IFZhbC5OVUxMX0NNUDsKICAg\nICAgICB9CiAgICAgICAgaWYgKF92YWwyIGluc3RhbmNlb2YgQ29uc3QpIHsK\nICAgICAgICAgICAgczIgPSBfdmFsMi5pbml0aWFsaXplKHNlbCwgY3R4LCAw\nKTsKICAgICAgICAgICAgaWYgKGRpcmVjdCAmJiAoKENvbnN0KSBfdmFsMiku\nZ2V0VmFsdWUoY3R4LCBzMikgPT0gbnVsbCkKICAgICAgICAgICAgICAgIGZs\nYWdzMSA9IFZhbC5OVUxMX0NNUDsKICAgICAgICB9CiAgICAgICAgCiAgICAg\nICAgaWYgKHMxID09IG51bGwpCiAgICAgICAgICAgIHMxID0gX3ZhbDEuaW5p\ndGlhbGl6ZShzZWwsIGN0eCwgZmxhZ3MxKTsKICAgICAgICBpZiAoczIgPT0g\nbnVsbCkKICAgICAgICAgICAgczIgPSBfdmFsMi5pbml0aWFsaXplKHNlbCwg\nY3R4LCBmbGFnczIpOwogICAgICAgIHJldHVybiBuZXcgQmluYXJ5T3BFeHBT\ndGF0ZShzZWwuYW5kKHMxLmpvaW5zLCBzMi5qb2lucyksIHMxLCBzMik7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgYXBwZW5kVG8oU2VsZWN0IHNlbCwgRXhw\nQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlLCAKICAgICAgICBTUUxCdWZm\nZXIgYnVmKSB7CiAgICAgICAgQmluYXJ5T3BFeHBTdGF0ZSBic3RhdGUgPSAo\nQmluYXJ5T3BFeHBTdGF0ZSkgc3RhdGU7CiAgICAgICAgX3ZhbDEuY2FsY3Vs\nYXRlVmFsdWUoc2VsLCBjdHgsIGJzdGF0ZS5zdGF0ZTEsIF92YWwyLCBic3Rh\ndGUuc3RhdGUyKTsKICAgICAgICBfdmFsMi5jYWxjdWxhdGVWYWx1ZShzZWws\nIGN0eCwgYnN0YXRlLnN0YXRlMiwgX3ZhbDEsIGJzdGF0ZS5zdGF0ZTEpOwog\nICAgICAgIGlmICghRmlsdGVycy5jYW5Db252ZXJ0KF92YWwxLmdldFR5cGUo\nKSwgX3ZhbDIuZ2V0VHlwZSgpLCBmYWxzZSkKICAgICAgICAgICAgJiYgIUZp\nbHRlcnMuY2FuQ29udmVydChfdmFsMi5nZXRUeXBlKCksIF92YWwxLmdldFR5\ncGUoKSwgZmFsc2UpKQogICAgICAgICAgICB0aHJvdyBuZXcgVXNlckV4Y2Vw\ndGlvbihfbG9jLmdldCgiY2FudC1jb252ZXJ0IiwgX3ZhbDEuZ2V0VHlwZSgp\nLAogICAgICAgICAgICAgICAgX3ZhbDIuZ2V0VHlwZSgpKSk7CgogICAgICAg\nIGJvb2xlYW4gdmFsMU51bGwgPSBfdmFsMSBpbnN0YW5jZW9mIENvbnN0CiAg\nICAgICAgICAgICYmICgoQ29uc3QpIF92YWwxKS5pc1NRTFZhbHVlTnVsbChz\nZWwsIGN0eCwgYnN0YXRlLnN0YXRlMSk7CiAgICAgICAgYm9vbGVhbiB2YWwy\nTnVsbCA9IF92YWwyIGluc3RhbmNlb2YgQ29uc3QKICAgICAgICAgICAgJiYg\nKChDb25zdCkgX3ZhbDIpLmlzU1FMVmFsdWVOdWxsKHNlbCwgY3R4LCBic3Rh\ndGUuc3RhdGUyKTsKICAgICAgICBhcHBlbmRUbyhzZWwsIGN0eCwgYnN0YXRl\nLCBidWYsIHZhbDFOdWxsLCB2YWwyTnVsbCk7CiAgICAgICAgc2VsLmFwcGVu\nZChidWYsIHN0YXRlLmpvaW5zKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBz\nZWxlY3RDb2x1bW5zKFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBFeHBT\ndGF0ZSBzdGF0ZSwgCiAgICAgICAgYm9vbGVhbiBwa3MpIHsKICAgICAgICBC\naW5hcnlPcEV4cFN0YXRlIGJzdGF0ZSA9IChCaW5hcnlPcEV4cFN0YXRlKSBz\ndGF0ZTsKICAgICAgICBfdmFsMS5zZWxlY3RDb2x1bW5zKHNlbCwgY3R4LCBi\nc3RhdGUuc3RhdGUxLCB0cnVlKTsKICAgICAgICBfdmFsMi5zZWxlY3RDb2x1\nbW5zKHNlbCwgY3R4LCBic3RhdGUuc3RhdGUyLCB0cnVlKTsKICAgIH0KCiAg\nICAvKioKICAgICAqIEFwcGVuZCB0aGUgU1FMIGZvciB0aGUgY29tcGFyaXNv\nbi4KICAgICAqLwogICAgcHJvdGVjdGVkIGFic3RyYWN0IHZvaWQgYXBwZW5k\nVG8oU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIAogICAgICAgIEJpbmFy\neU9wRXhwU3RhdGUgc3RhdGUsIFNRTEJ1ZmZlciBidWYsIGJvb2xlYW4gdmFs\nMU51bGwsIAogICAgICAgIGJvb2xlYW4gdmFsMk51bGwpOwoKICAgIC8qKgog\nICAgICogU3ViY2xhc3NlcyBjYW4gb3ZlcnJpZGUgdGhpcyBtZXRob2QgaWYs\nIHdoZW4gdGhleSBjb21wYXJlIHRvIGFub3RoZXIsCiAgICAgKiB2YWx1ZSwg\ndGhlIGNvbXBhcmlzb24gaXMgaW5kaXJlY3QuIEZvciBleGFtcGxlLCBmaWVs\nZC5jb250YWlucyAoeCkKICAgICAqIHNob3VsZCBjb21wYXJlIGVsZW1lbnQg\ndmFsdWVzIHRvIG51bGwsIG5vdCB0aGUgZmllbGQgaXRzZWxmLgogICAgICov\nCiAgICBwcm90ZWN0ZWQgYm9vbGVhbiBpc0RpcmVjdENvbXBhcmlzb24oKSB7\nCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nYWNjZXB0VmlzaXQoRXhwcmVzc2lvblZpc2l0b3IgdmlzaXRvcikgewogICAg\nICAgIHZpc2l0b3IuZW50ZXIodGhpcyk7CiAgICAgICAgX3ZhbDEuYWNjZXB0\nVmlzaXQodmlzaXRvcik7CiAgICAgICAgX3ZhbDIuYWNjZXB0VmlzaXQodmlz\naXRvcik7CiAgICAgICAgdmlzaXRvci5leGl0KHRoaXMpOwogICAgfQp9Cg==\n","encoding":"base64"}

