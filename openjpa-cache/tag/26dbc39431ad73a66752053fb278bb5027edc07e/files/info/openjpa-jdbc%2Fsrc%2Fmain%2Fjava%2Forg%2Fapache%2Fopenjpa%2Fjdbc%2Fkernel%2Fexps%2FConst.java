{"sha":"6a1918d93a16d9e926f963021cd48103da5d1b77","node_id":"MDQ6QmxvYjIwNjM2NDo2YTE5MThkOTNhMTZkOWU5MjZmOTYzMDIxY2Q0ODEwM2RhNWQxYjc3","size":5939,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/6a1918d93a16d9e926f963021cd48103da5d1b77","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuZXhwczsK\nCmltcG9ydCBqYXZhLnNxbC5TUUxFeGNlcHRpb247CmltcG9ydCBqYXZhLnV0\naWwuQ29sbGVjdGlvbjsKaW1wb3J0IGphdmEudXRpbC5NYXA7CgppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLkNvbHVtbjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5SZXN1bHQ7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuU1FMQnVmZmVyOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNlbGVjdDsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuZXhwcy5Db25zdGFudDsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkNsYXNzTWV0YURhdGE7CgovKioK\nICogQSBsaXRlcmFsIG9yIHBhcmFtZXRlciBpbiB0aGUgZmlsdGVyLgogKgog\nKiBAYXV0aG9yIEFiZSBXaGl0ZQogKi8KYWJzdHJhY3QgY2xhc3MgQ29uc3QK\nICAgIGV4dGVuZHMgQWJzdHJhY3RWYWwKICAgIGltcGxlbWVudHMgQ29uc3Rh\nbnQgewoKICAgIHByaXZhdGUgQ2xhc3NNZXRhRGF0YSBfbWV0YSA9IG51bGw7\nCgogICAgcHVibGljIENsYXNzTWV0YURhdGEgZ2V0TWV0YURhdGEoKSB7CiAg\nICAgICAgcmV0dXJuIF9tZXRhOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNl\ndE1ldGFEYXRhKENsYXNzTWV0YURhdGEgbWV0YSkgewogICAgICAgIF9tZXRh\nID0gbWV0YTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgU1FM\nIHZhbHVlIG9mIHRoaXMgY29uc3RhbnQuCiAgICAgKi8KICAgIHB1YmxpYyBP\nYmplY3QgZ2V0U1FMVmFsdWUoU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgs\nIEV4cFN0YXRlIHN0YXRlKSB7CiAgICAgICAgcmV0dXJuIGdldFZhbHVlKGN0\neCwgc3RhdGUpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRydWUg\naWYgdGhpcyBjb25zdGFudCdzIFNRTCB2YWx1ZSBpcyBlcXVpdmFsZW50IHRv\nIE5VTEwuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlzU1FMVmFsdWVO\ndWxsKFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0\nZSkgewogICAgICAgIE9iamVjdCB2YWwgPSBnZXRTUUxWYWx1ZShzZWwsIGN0\neCwgc3RhdGUpOwogICAgICAgIGlmICh2YWwgPT0gbnVsbCkKICAgICAgICAg\nICAgcmV0dXJuIHRydWU7CiAgICAgICAgaWYgKCEodmFsIGluc3RhbmNlb2Yg\nT2JqZWN0W10pKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CgogICAgICAg\nIC8vIGFsbC1udWxsIGFycmF5IGlzIGNvbnNpZGVyZWQgbnVsbAogICAgICAg\nIE9iamVjdFtdIGFyciA9IChPYmplY3RbXSkgdmFsOwogICAgICAgIGZvciAo\naW50IGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKQogICAgICAgICAgICBp\nZiAoYXJyW2ldICE9IG51bGwpCiAgICAgICAgICAgICAgICByZXR1cm4gZmFs\nc2U7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBSZXR1cm4gdGhlIHZhbHVlIG9mIHRoaXMgY29uc3RhbnQuICBNYXkgYmUg\nbW9yZSByb2J1c3QgdGhhbiB0aGUKICAgICAqIHBhcmFtZXRlcnMtb25seSBm\nb3JtLgogICAgICovCiAgICBwdWJsaWMgT2JqZWN0IGdldFZhbHVlKEV4cENv\nbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSkgewogICAgICAgIHJldHVybiBn\nZXRWYWx1ZShjdHgucGFyYW1zKTsKICAgIH0KCiAgICBwdWJsaWMgRXhwU3Rh\ndGUgaW5pdGlhbGl6ZShTZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwgaW50\nIGZsYWdzKSB7CiAgICAgICAgcmV0dXJuIG5ldyBDb25zdEV4cFN0YXRlKCk7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBDb25zdGFudCBleHByZXNzaW9uIHN0\nYXRlLgogICAgICovCiAgICBwcm90ZWN0ZWQgc3RhdGljIGNsYXNzIENvbnN0\nRXhwU3RhdGUKICAgICAgICBleHRlbmRzIEV4cFN0YXRlIHsKCiAgICAgICAg\ncHVibGljIENvbHVtbltdIGNvbHMgPSBudWxsOwoKICAgICAgICAvKioKICAg\nICAgICAgKiBSZXR1cm4gdGhlIGNvbHVtbiBmb3IgdGhlIHZhbHVlIGF0IHRo\nZSBzcGVjaWZpZWQgaW5kZXgsIG9yIG51bGwuCiAgICAgICAgICovCiAgICAg\nICAgcHVibGljIENvbHVtbiBnZXRDb2x1bW4oaW50IGluZGV4KSB7CiAgICAg\nICAgICAgIHJldHVybiAoY29scyAhPSBudWxsICYmIGNvbHMubGVuZ3RoID4g\naW5kZXgpID8gY29sc1tpbmRleF0gOiBudWxsOwogICAgICAgIH0KICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBjYWxjdWxhdGVWYWx1ZShTZWxlY3Qgc2VsLCBF\neHBDb250ZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUsIAogICAgICAgIFZhbCBv\ndGhlciwgRXhwU3RhdGUgb3RoZXJTdGF0ZSkgewogICAgICAgIGlmIChvdGhl\nciBpbnN0YW5jZW9mIFBDUGF0aCkKICAgICAgICAgICAgKChDb25zdEV4cFN0\nYXRlKSBzdGF0ZSkuY29scyA9ICgoUENQYXRoKSBvdGhlcikuCiAgICAgICAg\nICAgICAgICBnZXRDb2x1bW5zKG90aGVyU3RhdGUpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHNlbGVjdChTZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwg\nRXhwU3RhdGUgc3RhdGUsIAogICAgICAgIGJvb2xlYW4gcGtzKSB7CiAgICAg\nICAgc2VsLnNlbGVjdChuZXdTUUxCdWZmZXIoc2VsLCBjdHgsIHN0YXRlKSwg\ndGhpcyk7CiAgICB9CgogICAgcHJpdmF0ZSBTUUxCdWZmZXIgbmV3U1FMQnVm\nZmVyKFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0\nZSkgewogICAgICAgIGNhbGN1bGF0ZVZhbHVlKHNlbCwgY3R4LCBzdGF0ZSwg\nbnVsbCwgbnVsbCk7CiAgICAgICAgU1FMQnVmZmVyIGJ1ZiA9IG5ldyBTUUxC\ndWZmZXIoY3R4LnN0b3JlLmdldERCRGljdGlvbmFyeSgpKTsKICAgICAgICBh\ncHBlbmRUbyhzZWwsIGN0eCwgc3RhdGUsIGJ1ZiwgMCk7CiAgICAgICAgcmV0\ndXJuIGJ1ZjsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZWxlY3RDb2x1bW5z\nKFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSwg\nCiAgICAgICAgYm9vbGVhbiBwa3MpIHsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBncm91cEJ5KFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBFeHBTdGF0\nZSBzdGF0ZSkgewogICAgICAgIHNlbC5ncm91cEJ5KG5ld1NRTEJ1ZmZlcihz\nZWwsIGN0eCwgc3RhdGUpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBvcmRl\nckJ5KFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0\nZSwgCiAgICAgICAgYm9vbGVhbiBhc2MpIHsKICAgICAgICBzZWwub3JkZXJC\neShuZXdTUUxCdWZmZXIoc2VsLCBjdHgsIHN0YXRlKSwgYXNjLCBmYWxzZSk7\nCiAgICB9CgogICAgcHVibGljIE9iamVjdCBsb2FkKEV4cENvbnRleHQgY3R4\nLCBFeHBTdGF0ZSBzdGF0ZSwgUmVzdWx0IHJlcykKICAgICAgICB0aHJvd3Mg\nU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gZ2V0VmFsdWUoY3R4LCBz\ndGF0ZSk7CiAgICB9CgogICAgcHVibGljIGludCBsZW5ndGgoU2VsZWN0IHNl\nbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlKSB7CiAgICAgICAg\ncmV0dXJuIDE7CiAgICB9CgogICAgcHVibGljIHZvaWQgYXBwZW5kSXNFbXB0\neShTZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUs\nIAogICAgICAgIFNRTEJ1ZmZlciBzcWwpIHsKICAgICAgICBPYmplY3Qgb2Jq\nID0gZ2V0VmFsdWUoY3R4LCBzdGF0ZSk7CiAgICAgICAgaWYgKG9iaiBpbnN0\nYW5jZW9mIENvbGxlY3Rpb24gJiYgKChDb2xsZWN0aW9uKSBvYmopLmlzRW1w\ndHkoKSkKICAgICAgICAgICAgc3FsLmFwcGVuZChUUlVFKTsKICAgICAgICBl\nbHNlIGlmIChvYmogaW5zdGFuY2VvZiBNYXAgJiYgKChNYXApIG9iaikuaXNF\nbXB0eSgpKQogICAgICAgICAgICBzcWwuYXBwZW5kKFRSVUUpOwogICAgICAg\nIGVsc2UKICAgICAgICAgICAgc3FsLmFwcGVuZChGQUxTRSk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgYXBwZW5kSXNOb3RFbXB0eShTZWxlY3Qgc2VsLCBF\neHBDb250ZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUsIAogICAgICAgIFNRTEJ1\nZmZlciBzcWwpewogICAgICAgIE9iamVjdCBvYmogPSBnZXRWYWx1ZShjdHgs\nIHN0YXRlKTsKICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgQ29sbGVjdGlv\nbiAmJiAoKENvbGxlY3Rpb24pIG9iaikuaXNFbXB0eSgpKQogICAgICAgICAg\nICBzcWwuYXBwZW5kKEZBTFNFKTsKICAgICAgICBlbHNlIGlmIChvYmogaW5z\ndGFuY2VvZiBNYXAgJiYgKChNYXApIG9iaikuaXNFbXB0eSgpKQogICAgICAg\nICAgICBzcWwuYXBwZW5kKEZBTFNFKTsKICAgICAgICBlbHNlCiAgICAgICAg\nICAgIHNxbC5hcHBlbmQoVFJVRSk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nYXBwZW5kU2l6ZShTZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwgRXhwU3Rh\ndGUgc3RhdGUsIAogICAgICAgIFNRTEJ1ZmZlciBzcWwpIHsKICAgICAgICBP\nYmplY3Qgb2JqID0gZ2V0VmFsdWUoY3R4LCBzdGF0ZSk7CiAgICAgICAgaWYg\nKG9iaiBpbnN0YW5jZW9mIENvbGxlY3Rpb24pCiAgICAgICAgICAgIHNxbC5h\ncHBlbmRWYWx1ZSgoKENvbGxlY3Rpb24pIG9iaikuc2l6ZSgpKTsKICAgICAg\nICBlbHNlIGlmIChvYmogaW5zdGFuY2VvZiBNYXApCiAgICAgICAgICAgIHNx\nbC5hcHBlbmRWYWx1ZSgoKE1hcCkgb2JqKS5zaXplKCkpOwogICAgICAgIGVs\nc2UKICAgICAgICAgICAgc3FsLmFwcGVuZCgiMSIpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIGFwcGVuZElzTnVsbChTZWxlY3Qgc2VsLCBFeHBDb250ZXh0\nIGN0eCwgRXhwU3RhdGUgc3RhdGUsIAogICAgICAgIFNRTEJ1ZmZlciBzcWwp\nIHsKICAgICAgICBpZiAoaXNTUUxWYWx1ZU51bGwoc2VsLCBjdHgsIHN0YXRl\nKSkKICAgICAgICAgICAgc3FsLmFwcGVuZChUUlVFKTsKICAgICAgICBlbHNl\nCiAgICAgICAgICAgIHNxbC5hcHBlbmQoRkFMU0UpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIGFwcGVuZElzTm90TnVsbChTZWxlY3Qgc2VsLCBFeHBDb250\nZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUsIAogICAgICAgIFNRTEJ1ZmZlciBz\ncWwpIHsKICAgICAgICBpZiAoIWlzU1FMVmFsdWVOdWxsKHNlbCwgY3R4LCBz\ndGF0ZSkpCiAgICAgICAgICAgIHNxbC5hcHBlbmQoVFJVRSk7CiAgICAgICAg\nZWxzZQogICAgICAgICAgICBzcWwuYXBwZW5kKEZBTFNFKTsKICAgIH0KfQo=\n","encoding":"base64"}

