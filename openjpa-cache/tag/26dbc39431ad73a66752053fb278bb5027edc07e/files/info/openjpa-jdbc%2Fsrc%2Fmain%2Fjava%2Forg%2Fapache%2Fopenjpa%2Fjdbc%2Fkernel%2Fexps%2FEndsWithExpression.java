{"sha":"74d766a85ae78bfa171d7dadf8d795aa0fac9934","node_id":"MDQ6QmxvYjIwNjM2NDo3NGQ3NjZhODVhZTc4YmZhMTcxZDdkYWRmOGQ3OTVhYTBmYWM5OTM0","size":6523,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/74d766a85ae78bfa171d7dadf8d795aa0fac9934","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuZXhwczsK\nCmltcG9ydCBqYXZhLnV0aWwuTWFwOwoKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLm1ldGEuQ2xhc3NNYXBwaW5nOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmpkYmMubWV0YS5GaWVsZE1hcHBpbmc7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuQ29sdW1uOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLlRhYmxlOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLkRCRGljdGlvbmFyeTsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5TUUxCdWZmZXI7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuU2VsZWN0OwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5leHBzLkV4cHJlc3Npb25WaXNp\ndG9yOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuWE1MTWV0YURh\ndGE7CgovKioKICogVGVzdCBpZiBvbmUgc3RyaW5nIGVuZHMgd2l0aCBhbm90\naGVyLgogKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKi8KY2xhc3MgRW5kc1dp\ndGhFeHByZXNzaW9uCiAgICBpbXBsZW1lbnRzIEV4cCB7CgogICAgcHJpdmF0\nZSBmaW5hbCBWYWwgX3ZhbDE7CiAgICBwcml2YXRlIGZpbmFsIFZhbCBfdmFs\nMjsKCiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yLiBTdXBwbHkgdmFsdWVz\nLgogICAgICovCiAgICBwdWJsaWMgRW5kc1dpdGhFeHByZXNzaW9uKFZhbCB2\nYWwxLCBWYWwgdmFsMikgewogICAgICAgIF92YWwxID0gdmFsMTsKICAgICAg\nICBfdmFsMiA9IHZhbDI7CiAgICB9CgogICAgcHVibGljIEV4cFN0YXRlIGlu\naXRpYWxpemUoU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIE1hcCBjb250\nYWlucykgewogICAgICAgIEV4cFN0YXRlIHMxID0gX3ZhbDEuaW5pdGlhbGl6\nZShzZWwsIGN0eCwgMCk7CiAgICAgICAgRXhwU3RhdGUgczIgPSBfdmFsMi5p\nbml0aWFsaXplKHNlbCwgY3R4LCAwKTsKICAgICAgICByZXR1cm4gbmV3IEJp\nbmFyeU9wRXhwU3RhdGUoc2VsLmFuZChzMS5qb2lucywgczIuam9pbnMpLCBz\nMSwgczIpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGFwcGVuZFRvKFNlbGVj\ndCBzZWwsIEV4cENvbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSwgCiAgICAg\nICAgU1FMQnVmZmVyIGJ1ZikgewogICAgICAgIEJpbmFyeU9wRXhwU3RhdGUg\nYnN0YXRlID0gKEJpbmFyeU9wRXhwU3RhdGUpIHN0YXRlOwogICAgICAgIF92\nYWwxLmNhbGN1bGF0ZVZhbHVlKHNlbCwgY3R4LCBic3RhdGUuc3RhdGUxLCBf\ndmFsMiwgYnN0YXRlLnN0YXRlMik7CiAgICAgICAgX3ZhbDIuY2FsY3VsYXRl\nVmFsdWUoc2VsLCBjdHgsIGJzdGF0ZS5zdGF0ZTIsIF92YWwxLCBic3RhdGUu\nc3RhdGUxKTsKCiAgICAgICAgREJEaWN0aW9uYXJ5IGRpY3QgPSBjdHguc3Rv\ncmUuZ2V0REJEaWN0aW9uYXJ5KCk7CiAgICAgICAgU3RyaW5nIGZ1bmMgPSBk\naWN0LnN0cmluZ0xlbmd0aEZ1bmN0aW9uOwogICAgICAgIFN0cmluZyBwcmUg\nPSBudWxsOwogICAgICAgIFN0cmluZyBwb3N0ID0gbnVsbDsKICAgICAgICBp\nZiAoZnVuYyAhPSBudWxsKSB7CiAgICAgICAgICAgIGludCBpZHggPSBmdW5j\nLmluZGV4T2YoInswfSIpOwogICAgICAgICAgICBwcmUgPSBmdW5jLnN1YnN0\ncmluZygwLCBpZHgpOwogICAgICAgICAgICBwb3N0ID0gZnVuYy5zdWJzdHJp\nbmcoaWR4ICsgMyk7CiAgICAgICAgfQoKICAgICAgICBpZiAoX3ZhbDEgaW5z\ndGFuY2VvZiBDb25zdCAmJiAoKENvbnN0KSBfdmFsMSkuZ2V0VmFsdWUoY3R4\nLCAKICAgICAgICAgICAgYnN0YXRlLnN0YXRlMSkgPT0gbnVsbCkKICAgICAg\nICAgICAgYnVmLmFwcGVuZCgiMSA8PiAxIik7CiAgICAgICAgZWxzZSBpZiAo\nX3ZhbDIgaW5zdGFuY2VvZiBDb25zdCkgewogICAgICAgICAgICBPYmplY3Qg\nbyA9ICgoQ29uc3QpIF92YWwyKS5nZXRWYWx1ZShjdHgsIGJzdGF0ZS5zdGF0\nZTIpOwogICAgICAgICAgICBpZiAobyA9PSBudWxsKQogICAgICAgICAgICAg\nICAgYnVmLmFwcGVuZCgiMSA8PiAxIik7CiAgICAgICAgICAgIGVsc2Ugewog\nICAgICAgICAgICAgICAgQ29sdW1uIGNvbCA9IG51bGw7CiAgICAgICAgICAg\nICAgICBpZiAoX3ZhbDEgaW5zdGFuY2VvZiBQQ1BhdGgpIHsKICAgICAgICAg\nICAgICAgICAgICBDb2x1bW5bXSBjb2xzID0gKChQQ1BhdGgpIF92YWwxKS5n\nZXRDb2x1bW5zKGJzdGF0ZS5zdGF0ZTEpOwogICAgICAgICAgICAgICAgICAg\nIGlmIChjb2xzLmxlbmd0aCA9PSAxKQogICAgICAgICAgICAgICAgICAgICAg\nICBjb2wgPSBjb2xzWzBdOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAg\nICAgICAgIF92YWwxLmFwcGVuZFRvKHNlbCwgY3R4LCBic3RhdGUuc3RhdGUx\nLCBidWYsIDApOwogICAgICAgICAgICAgICAgYnVmLmFwcGVuZCgiIExJS0Ug\nIik7CiAgICAgICAgICAgICAgICBidWYuYXBwZW5kVmFsdWUoIiUiICsgby50\nb1N0cmluZygpLCBjb2wpOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNl\nIHsKICAgICAgICAgICAgLy8gaWYgd2UgY2FuJ3QgdXNlIExJS0UsIHdlIGhh\ndmUgdG8gdGFrZSB0aGUgc3Vic3RyaW5nIG9mIHRoZQogICAgICAgICAgICAv\nLyBmaXJzdCB2YWx1ZSBhbmQgY29tcGFyZSBpdCB0byB0aGUgc2Vjb25kCiAg\nICAgICAgICAgIGRpY3QuYXNzZXJ0U3VwcG9ydChwcmUgIT0gbnVsbCwgIlN0\ncmluZ0xlbmd0aEZ1bmN0aW9uIik7CiAgICAgICAgICAgIGRpY3Quc3Vic3Ry\naW5nKGJ1ZiwgCiAgICAgICAgICAgICAgICBuZXcgRmlsdGVyVmFsdWVJbXBs\nKHNlbCwgY3R4LCBic3RhdGUuc3RhdGUxLCBfdmFsMSksCiAgICAgICAgICAg\nICAgICBuZXcgU3RyaW5nTGVuZ3RoRGlmZmVyZW5jZUZpbHRlclZhbHVlKHNl\nbCwgY3R4LCBic3RhdGUsIHByZSwgCiAgICAgICAgICAgICAgICAgICAgcG9z\ndCksIG51bGwpOwogICAgICAgICAgICBidWYuYXBwZW5kKCIgPSAiKTsKICAg\nICAgICAgICAgX3ZhbDIuYXBwZW5kVG8oc2VsLCBjdHgsIGJzdGF0ZS5zdGF0\nZTIsIGJ1ZiwgMCk7CiAgICAgICAgfQoKICAgICAgICBzZWwuYXBwZW5kKGJ1\nZiwgc3RhdGUuam9pbnMpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNlbGVj\ndENvbHVtbnMoU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRl\nIHN0YXRlLCAKICAgICAgICBib29sZWFuIHBrcykgewogICAgICAgIEJpbmFy\neU9wRXhwU3RhdGUgYnN0YXRlID0gKEJpbmFyeU9wRXhwU3RhdGUpIHN0YXRl\nOwogICAgICAgIF92YWwxLnNlbGVjdENvbHVtbnMoc2VsLCBjdHgsIGJzdGF0\nZS5zdGF0ZTEsIHRydWUpOwogICAgICAgIF92YWwyLnNlbGVjdENvbHVtbnMo\nc2VsLCBjdHgsIGJzdGF0ZS5zdGF0ZTIsIHRydWUpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIGFjY2VwdFZpc2l0KEV4cHJlc3Npb25WaXNpdG9yIHZpc2l0\nb3IpIHsKICAgICAgICB2aXNpdG9yLmVudGVyKHRoaXMpOwogICAgICAgIF92\nYWwxLmFjY2VwdFZpc2l0KHZpc2l0b3IpOwogICAgICAgIF92YWwyLmFjY2Vw\ndFZpc2l0KHZpc2l0b3IpOwogICAgICAgIHZpc2l0b3IuZXhpdCh0aGlzKTsK\nICAgIH0KCiAgICAvKioKICAgICAqIEV2YWx1YXRlcyB0byB0aGUgbGVuZ3Ro\nIG9mIGEgZ2l2ZW4gdmFsdWUuCiAgICAgKi8KICAgIHByaXZhdGUgY2xhc3Mg\nU3RyaW5nTGVuZ3RoRGlmZmVyZW5jZUZpbHRlclZhbHVlCiAgICAgICAgaW1w\nbGVtZW50cyBGaWx0ZXJWYWx1ZSB7CgogICAgICAgIHByaXZhdGUgZmluYWwg\nU2VsZWN0IF9zZWw7CiAgICAgICAgcHJpdmF0ZSBmaW5hbCBFeHBDb250ZXh0\nIF9jdHg7CiAgICAgICAgcHJpdmF0ZSBmaW5hbCBCaW5hcnlPcEV4cFN0YXRl\nIF9zdGF0ZTsKICAgICAgICBwcml2YXRlIGZpbmFsIFN0cmluZyBfcHJlOwog\nICAgICAgIHByaXZhdGUgZmluYWwgU3RyaW5nIF9wb3N0OwoKICAgICAgICBw\ndWJsaWMgU3RyaW5nTGVuZ3RoRGlmZmVyZW5jZUZpbHRlclZhbHVlKFNlbGVj\ndCBzZWwsIEV4cENvbnRleHQgY3R4LCAKICAgICAgICAgICAgQmluYXJ5T3BF\neHBTdGF0ZSBzdGF0ZSwgU3RyaW5nIHByZSwgU3RyaW5nIHBvc3QpIHsKICAg\nICAgICAgICAgX3NlbCA9IHNlbDsKICAgICAgICAgICAgX2N0eCA9IGN0eDsK\nICAgICAgICAgICAgX3N0YXRlID0gc3RhdGU7CiAgICAgICAgICAgIF9wcmUg\nPSBwcmU7CiAgICAgICAgICAgIF9wb3N0ID0gcG9zdDsKICAgICAgICB9Cgog\nICAgICAgIHB1YmxpYyBDbGFzcyBnZXRUeXBlKCkgewogICAgICAgICAgICBy\nZXR1cm4gaW50LmNsYXNzOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIGlu\ndCBsZW5ndGgoKSB7CiAgICAgICAgICAgIHJldHVybiAxOwogICAgICAgIH0K\nCiAgICAgICAgcHVibGljIHZvaWQgYXBwZW5kVG8oU1FMQnVmZmVyIGJ1Zikg\newogICAgICAgICAgICBhcHBlbmRUbyhidWYsIDApOwogICAgICAgIH0KCiAg\nICAgICAgcHVibGljIHZvaWQgYXBwZW5kVG8oU1FMQnVmZmVyIGJ1ZiwgaW50\nIGluZGV4KSB7CiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoX3ByZSk7CiAgICAg\nICAgICAgIF92YWwxLmFwcGVuZFRvKF9zZWwsIF9jdHgsIF9zdGF0ZS5zdGF0\nZTEsIGJ1ZiwgaW5kZXgpOwogICAgICAgICAgICBidWYuYXBwZW5kKF9wb3N0\nKS5hcHBlbmQoIiAtICIpLmFwcGVuZChfcHJlKTsKICAgICAgICAgICAgX3Zh\nbDIuYXBwZW5kVG8oX3NlbCwgX2N0eCwgX3N0YXRlLnN0YXRlMiwgYnVmLCBp\nbmRleCk7CiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoX3Bvc3QpOwogICAgICAg\nIH0KCiAgICAgICAgcHVibGljIFN0cmluZyBnZXRDb2x1bW5BbGlhcyhDb2x1\nbW4gY29sKSB7CiAgICAgICAgICAgIHJldHVybiBfc2VsLmdldENvbHVtbkFs\naWFzKGNvbCwgX3N0YXRlLmpvaW5zKTsKICAgICAgICB9CgogICAgICAgIHB1\nYmxpYyBTdHJpbmcgZ2V0Q29sdW1uQWxpYXMoU3RyaW5nIGNvbCwgVGFibGUg\ndGFibGUpIHsKICAgICAgICAgICAgcmV0dXJuIF9zZWwuZ2V0Q29sdW1uQWxp\nYXMoY29sLCB0YWJsZSwgX3N0YXRlLmpvaW5zKTsKICAgICAgICB9CgogICAg\nICAgIHB1YmxpYyBPYmplY3QgdG9EYXRhU3RvcmVWYWx1ZShPYmplY3QgdmFs\nKSB7CiAgICAgICAgICAgIHJldHVybiB2YWw7CiAgICAgICAgfQoKICAgICAg\nICBwdWJsaWMgYm9vbGVhbiBpc0NvbnN0YW50KCkgewogICAgICAgICAgICBy\nZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgT2JqZWN0\nIGdldFZhbHVlKCkgewogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAg\nICB9CgogICAgICAgIHB1YmxpYyBPYmplY3QgZ2V0U1FMVmFsdWUoKSB7CiAg\nICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KCiAgICAgICAgcHVi\nbGljIGJvb2xlYW4gaXNQYXRoKCkgewogICAgICAgICAgICByZXR1cm4gZmFs\nc2U7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgQ2xhc3NNYXBwaW5nIGdl\ndENsYXNzTWFwcGluZygpIHsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAg\nICAgICAgfQoKICAgICAgICBwdWJsaWMgRmllbGRNYXBwaW5nIGdldEZpZWxk\nTWFwcGluZygpIHsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAg\nfQogICAgICAgIAogICAgICAgIHB1YmxpYyBQQ1BhdGggZ2V0WFBhdGgoKSB7\nCiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgICAgICAK\nICAgICAgICBwdWJsaWMgWE1MTWV0YURhdGEgZ2V0WG1sTWFwcGluZygpIHsK\nICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgfQp9Cg==\n","encoding":"base64"}

