{"sha":"120bfee9d892ad9900308a820a8cb48c61d42e08","node_id":"MDQ6QmxvYjIwNjM2NDoxMjBiZmVlOWQ4OTJhZDk5MDAzMDhhODIwYThjYjQ4YzYxZDQyZTA4","size":5897,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/120bfee9d892ad9900308a820a8cb48c61d42e08","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuZXhwczsK\nCmltcG9ydCBqYXZhLnNxbC5TUUxFeGNlcHRpb247CgppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMubWV0YS5DbGFzc01hcHBpbmc7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLkpvaW5hYmxlOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLkNvbHVtbjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5SZXN1bHQ7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuU1FMQnVmZmVyOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNlbGVjdDsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuRmlsdGVyczsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5rZXJuZWwuZXhwcy5FeHByZXNzaW9uVmlzaXRvcjsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6ZXI7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5DbGFzc01ldGFEYXRh\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuQXBwbGljYXRpb25J\nZHM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5JZDsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLk9wZW5KUEFJZDsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS51dGlsLlVzZXJFeGNlcHRpb247CmltcG9ydCBz\nZXJwLnV0aWwuTnVtYmVyczsKCi8qKgogKiBTZWxlY3QgdGhlIG9pZCB2YWx1\nZSBvZiBhbiBvYmplY3Q7IHR5cGljYWxseSB1c2VkIGluIHByb2plY3Rpb25z\nLgogKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKi8KY2xhc3MgR2V0T2JqZWN0\nSWQKICAgIGV4dGVuZHMgQWJzdHJhY3RWYWwgewoKICAgIHByaXZhdGUgc3Rh\ndGljIGZpbmFsIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVyLmZvclBhY2th\nZ2UKICAgICAgICAoR2V0T2JqZWN0SWQuY2xhc3MpOwoKICAgIHByaXZhdGUg\nZmluYWwgUENQYXRoIF9wYXRoOwogICAgcHJpdmF0ZSBDbGFzc01ldGFEYXRh\nIF9tZXRhID0gbnVsbDsKCiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yLiBQ\ncm92aWRlIHRoZSB2YWx1ZSB3aG9zZSBvaWQgdG8gZXh0cmFjdC4KICAgICAq\nLwogICAgcHVibGljIEdldE9iamVjdElkKFBDUGF0aCBwYXRoKSB7CiAgICAg\nICAgX3BhdGggPSBwYXRoOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJu\nIHRoZSBvaWQgY29sdW1ucy4KICAgICAqLwogICAgcHVibGljIENvbHVtbltd\nIGdldENvbHVtbnMoRXhwU3RhdGUgc3RhdGUpIHsKICAgICAgICByZXR1cm4g\nX3BhdGguZ2V0Q2xhc3NNYXBwaW5nKHN0YXRlKS5nZXRQcmltYXJ5S2V5Q29s\ndW1ucygpOwogICAgfQoKICAgIHB1YmxpYyBDbGFzc01ldGFEYXRhIGdldE1l\ndGFEYXRhKCkgewogICAgICAgIHJldHVybiBfbWV0YTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBzZXRNZXRhRGF0YShDbGFzc01ldGFEYXRhIG1ldGEpIHsK\nICAgICAgICBfbWV0YSA9IG1ldGE7CiAgICB9CgogICAgcHVibGljIENsYXNz\nIGdldFR5cGUoKSB7CiAgICAgICAgcmV0dXJuIE9iamVjdC5jbGFzczsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRJbXBsaWNpdFR5cGUoQ2xhc3MgdHlw\nZSkgewogICAgfQoKICAgIHB1YmxpYyBFeHBTdGF0ZSBpbml0aWFsaXplKFNl\nbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBpbnQgZmxhZ3MpIHsKICAgICAg\nICBFeHBTdGF0ZSBzdGF0ZSA9IF9wYXRoLmluaXRpYWxpemUoc2VsLCBjdHgs\nIEpPSU5fUkVMKTsKCiAgICAgICAgLy8gaXQncyBkaWZmaWN1bHQgdG8gZ2V0\nIGNhbGxzIG9uIG5vbi1wYyBmaWVsZHMgdG8gYWx3YXlzIHJldHVybiBudWxs\nCiAgICAgICAgLy8gd2l0aG91dCBzY3Jld2luZyB1cCB0aGUgU1FMLCB0byBq\ndXN0IGRvbid0IGxldCB1c2VycyBjYWxsIGl0IG9uCiAgICAgICAgLy8gbm9u\nLXBjIGZpZWxkcyBhdCBhbGwKICAgICAgICBDbGFzc01hcHBpbmcgY2xzID0g\nX3BhdGguZ2V0Q2xhc3NNYXBwaW5nKHN0YXRlKTsKICAgICAgICBpZiAoY2xz\nID09IG51bGwgfHwgY2xzLmdldEVtYmVkZGluZ01hcHBpbmcoKSAhPSBudWxs\nKQogICAgICAgICAgICB0aHJvdyBuZXcgVXNlckV4Y2VwdGlvbihfbG9jLmdl\ndCgiYmFkLWdldG9iamVjdGlkIiwKICAgICAgICAgICAgICAgIF9wYXRoLmdl\ndEZpZWxkTWFwcGluZyhzdGF0ZSkpKTsKICAgICAgICByZXR1cm4gc3RhdGU7\nCiAgICB9CgogICAgcHVibGljIE9iamVjdCB0b0RhdGFTdG9yZVZhbHVlKFNl\nbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSwgCiAg\nICAgICAgT2JqZWN0IHZhbCkgewogICAgICAgIC8vIGlmIGRhdGFzdG9yZSBp\nZGVudGl0eSwgdHJ5IHRvIGNvbnZlcnQgdG8gYSBsb25nIHZhbHVlCiAgICAg\nICAgQ2xhc3NNYXBwaW5nIG1hcHBpbmcgPSBfcGF0aC5nZXRDbGFzc01hcHBp\nbmcoc3RhdGUpOwogICAgICAgIGlmIChtYXBwaW5nLmdldElkZW50aXR5VHlw\nZSgpID09IG1hcHBpbmcuSURfREFUQVNUT1JFKSB7CiAgICAgICAgICAgIGlm\nICh2YWwgaW5zdGFuY2VvZiBJZCkKICAgICAgICAgICAgICAgIHJldHVybiBO\ndW1iZXJzLnZhbHVlT2YoKChJZCkgdmFsKS5nZXRJZCgpKTsKICAgICAgICAg\nICAgcmV0dXJuIEZpbHRlcnMuY29udmVydCh2YWwsIGxvbmcuY2xhc3MpOwog\nICAgICAgIH0KCiAgICAgICAgLy8gaWYgdW5rbm93biBpZGVudGl0eSwgY2Fu\nJ3QgZG8gbXVjaAogICAgICAgIGlmIChtYXBwaW5nLmdldElkZW50aXR5VHlw\nZSgpID09IG1hcHBpbmcuSURfVU5LTk9XTikKICAgICAgICAgICAgcmV0dXJu\nICh2YWwgaW5zdGFuY2VvZiBPcGVuSlBBSWQpID8KICAgICAgICAgICAgICAg\nICgoT3BlbkpQQUlkKSB2YWwpLmdldElkT2JqZWN0KCkgOiB2YWw7CgogICAg\nICAgIC8vIGFwcGxpY2F0aW9uIGlkZW50aXR5OyBjb252ZXJ0IHRvIHBrIHZh\nbHVlcyBpbiB0aGUgc2FtZSBvcmRlciBhcwogICAgICAgIC8vIHRoZSBtYXBw\naW5nJ3MgcHJpbWFyeSBrZXkgY29sdW1ucyB3aWxsIGJlIHJldHVybmVkCiAg\nICAgICAgT2JqZWN0W10gcGtzID0gQXBwbGljYXRpb25JZHMudG9QS1ZhbHVl\ncyh2YWwsIG1hcHBpbmcpOwogICAgICAgIGlmIChwa3MubGVuZ3RoID09IDEp\nCiAgICAgICAgICAgIHJldHVybiBwa3NbMF07CiAgICAgICAgaWYgKHZhbCA9\nPSBudWxsKQogICAgICAgICAgICByZXR1cm4gcGtzOwogICAgICAgIHdoaWxl\nICghbWFwcGluZy5pc1ByaW1hcnlLZXlPYmplY3RJZChmYWxzZSkpCiAgICAg\nICAgICAgIG1hcHBpbmcgPSBtYXBwaW5nLmdldEpvaW5hYmxlUENTdXBlcmNs\nYXNzTWFwcGluZygpOwoKICAgICAgICBDb2x1bW5bXSBjb2xzID0gbWFwcGlu\nZy5nZXRQcmltYXJ5S2V5Q29sdW1ucygpOwogICAgICAgIE9iamVjdFtdIHZh\nbHMgPSBuZXcgT2JqZWN0W2NvbHMubGVuZ3RoXTsKICAgICAgICBKb2luYWJs\nZSBqb2luOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgY29scy5sZW5n\ndGg7IGkrKykgewogICAgICAgICAgICBqb2luID0gbWFwcGluZy5hc3NlcnRK\nb2luYWJsZShjb2xzW2ldKTsKICAgICAgICAgICAgdmFsc1tpXSA9IHBrc1tt\nYXBwaW5nLmdldEZpZWxkKGpvaW4uZ2V0RmllbGRJbmRleCgpKS4KICAgICAg\nICAgICAgICAgIGdldFByaW1hcnlLZXlJbmRleCgpXTsKICAgICAgICAgICAg\ndmFsc1tpXSA9IGpvaW4uZ2V0Sm9pblZhbHVlKHZhbHNbaV0sIGNvbHNbaV0s\nIGN0eC5zdG9yZSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB2YWxzOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHNlbGVjdChTZWxlY3Qgc2VsLCBFeHBD\nb250ZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUsIAogICAgICAgIGJvb2xlYW4g\ncGtzKSB7CiAgICAgICAgc2VsZWN0Q29sdW1ucyhzZWwsIGN0eCwgc3RhdGUs\nIHRydWUpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNlbGVjdENvbHVtbnMo\nU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlLCAK\nICAgICAgICBib29sZWFuIHBrcykgewogICAgICAgIF9wYXRoLnNlbGVjdENv\nbHVtbnMoc2VsLCBjdHgsIHN0YXRlLCB0cnVlKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBncm91cEJ5KFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBF\neHBTdGF0ZSBzdGF0ZSkgewogICAgICAgIF9wYXRoLmdyb3VwQnkoc2VsLCBj\ndHgsIHN0YXRlKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBvcmRlckJ5KFNl\nbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSwgCiAg\nICAgICAgYm9vbGVhbiBhc2MpIHsKICAgICAgICBfcGF0aC5vcmRlckJ5KHNl\nbCwgY3R4LCBzdGF0ZSwgYXNjKTsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0\nIGxvYWQoRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlLCBSZXN1bHQg\ncmVzKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJl\ndHVybiBfcGF0aC5sb2FkKGN0eCwgc3RhdGUsIHJlcywgdHJ1ZSk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgY2FsY3VsYXRlVmFsdWUoU2VsZWN0IHNlbCwg\nRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlLCAKICAgICAgICBWYWwg\nb3RoZXIsIEV4cFN0YXRlIG90aGVyU3RhdGUpIHsKICAgICAgICBfcGF0aC5j\nYWxjdWxhdGVWYWx1ZShzZWwsIGN0eCwgc3RhdGUsIG51bGwsIG51bGwpOwog\nICAgfQoKICAgIHB1YmxpYyBpbnQgbGVuZ3RoKFNlbGVjdCBzZWwsIEV4cENv\nbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSkgewogICAgICAgIHJldHVybiBf\ncGF0aC5sZW5ndGgoc2VsLCBjdHgsIHN0YXRlKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBhcHBlbmRUbyhTZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwg\nRXhwU3RhdGUgc3RhdGUsIAogICAgICAgIFNRTEJ1ZmZlciBzcWwsIGludCBp\nbmRleCkgewogICAgICAgIF9wYXRoLmFwcGVuZFRvKHNlbCwgY3R4LCBzdGF0\nZSwgc3FsLCBpbmRleCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgYWNjZXB0\nVmlzaXQoRXhwcmVzc2lvblZpc2l0b3IgdmlzaXRvcikgewogICAgICAgIHZp\nc2l0b3IuZW50ZXIodGhpcyk7CiAgICAgICAgX3BhdGguYWNjZXB0VmlzaXQo\ndmlzaXRvcik7CiAgICAgICAgdmlzaXRvci5leGl0KHRoaXMpOwogICAgfQp9\nCgo=\n","encoding":"base64"}

