{"sha":"bfbd4af79d1ac08df5ef7a04df91d2e9860d6c56","node_id":"MDQ6QmxvYjIwNjM2NDpiZmJkNGFmNzlkMWFjMDhkZjVlZjdhMDRkZjkxZDJlOTg2MGQ2YzU2","size":3493,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/bfbd4af79d1ac08df5ef7a04df91d2e9860d6c56","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuZXhwczsK\nCmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsKaW1wb3J0IGphdmEudXRpbC5J\ndGVyYXRvcjsKaW1wb3J0IGphdmEudXRpbC5NYXA7CgppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNRTEJ1ZmZlcjsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5qZGJjLnNxbC5TZWxlY3Q7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEua2VybmVsLmV4cHMuRXhwcmVzc2lvblZpc2l0b3I7Cgov\nKioKICogQ29tYmluZXMgdHdvIGV4cHJlc3Npb25zLgogKgogKiBAYXV0aG9y\nIEFiZSBXaGl0ZQogKi8KY2xhc3MgT3JFeHByZXNzaW9uCiAgICBpbXBsZW1l\nbnRzIEV4cCB7CgogICAgcHJpdmF0ZSBmaW5hbCBFeHAgX2V4cDE7CiAgICBw\ncml2YXRlIGZpbmFsIEV4cCBfZXhwMjsKCiAgICAvKioKICAgICAqIENvbnN0\ncnVjdG9yLiBTdXBwbHkgdGhlIGV4cHJlc3Npb25zIHRvIGNvbWJpbmUuCiAg\nICAgKi8KICAgIHB1YmxpYyBPckV4cHJlc3Npb24oRXhwIGV4cDEsIEV4cCBl\neHAyKSB7CiAgICAgICAgX2V4cDEgPSBleHAxOwogICAgICAgIF9leHAyID0g\nZXhwMjsKICAgIH0KCiAgICBwdWJsaWMgRXhwU3RhdGUgaW5pdGlhbGl6ZShT\nZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwgTWFwIGNvbnRhaW5zKSB7CiAg\nICAgICAgLy8gd2hlbiBPUidpbmcgZXhwcmVzc2lvbnMgZWFjaCBleHByZXNz\naW9uIGdldHMgaXRzIG93biBjb3B5IG9mIHRoZQogICAgICAgIC8vIGNvbnRh\naW5zIGNvdW50cywgY2F1c2UgaXQncyBPSyBmb3IgZWFjaCB0byB1c2UgdGhl\nIHNhbWUgYWxpYXNlcwogICAgICAgIE1hcCBjb250YWluczIgPSBudWxsOwog\nICAgICAgIGlmIChjb250YWlucyAhPSBudWxsKQogICAgICAgICAgICBjb250\nYWluczIgPSBuZXcgSGFzaE1hcChjb250YWlucyk7CgogICAgICAgIEV4cFN0\nYXRlIHMxID0gX2V4cDEuaW5pdGlhbGl6ZShzZWwsIGN0eCwgY29udGFpbnMp\nOwogICAgICAgIEV4cFN0YXRlIHMyID0gX2V4cDIuaW5pdGlhbGl6ZShzZWws\nIGN0eCwgY29udGFpbnMyKTsKICAgICAgICBFeHBTdGF0ZSByZXQgPSBuZXcg\nQmluYXJ5T3BFeHBTdGF0ZShzZWwub3IoczEuam9pbnMsIHMyLmpvaW5zKSwg\nczEsIHMyKTsKICAgICAgICBpZiAoY29udGFpbnMgPT0gbnVsbCkKICAgICAg\nICAgICAgcmV0dXJuIHJldDsKCiAgICAgICAgLy8gY29tYmluZSB0aGUgY29u\ndGFpbnMgY291bnRzIGZyb20gdGhlIGNvcHkgaW50byB0aGUgbWFpbiBtYXAK\nICAgICAgICBNYXAuRW50cnkgZW50cnk7CiAgICAgICAgSW50ZWdlciB2YWwx\nLCB2YWwyOwogICAgICAgIGZvciAoSXRlcmF0b3IgaXRyID0gY29udGFpbnMy\nLmVudHJ5U2V0KCkuaXRlcmF0b3IoKTsgaXRyLmhhc05leHQoKTspIHsKICAg\nICAgICAgICAgZW50cnkgPSAoTWFwLkVudHJ5KSBpdHIubmV4dCgpOwogICAg\nICAgICAgICB2YWwyID0gKEludGVnZXIpIGVudHJ5LmdldFZhbHVlKCk7CiAg\nICAgICAgICAgIHZhbDEgPSAoSW50ZWdlcikgY29udGFpbnMuZ2V0KGVudHJ5\nLmdldEtleSgpKTsKICAgICAgICAgICAgaWYgKHZhbDEgPT0gbnVsbCB8fCB2\nYWwyLmludFZhbHVlKCkgPiB2YWwxLmludFZhbHVlKCkpCiAgICAgICAgICAg\nICAgICBjb250YWlucy5wdXQoZW50cnkuZ2V0S2V5KCksIHZhbDIpOwogICAg\nICAgIH0KICAgICAgICByZXR1cm4gcmV0OwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIGFwcGVuZFRvKFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBFeHBT\ndGF0ZSBzdGF0ZSwgCiAgICAgICAgU1FMQnVmZmVyIGJ1ZikgewogICAgICAg\nIEJpbmFyeU9wRXhwU3RhdGUgYnN0YXRlID0gKEJpbmFyeU9wRXhwU3RhdGUp\nIHN0YXRlOwogICAgICAgIGJvb2xlYW4gcGFyZW4gPSBic3RhdGUuam9pbnMg\nIT0gbnVsbCAmJiAhYnN0YXRlLmpvaW5zLmlzRW1wdHkoKTsKICAgICAgICBp\nZiAocGFyZW4pCiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoIigiKTsKCiAgICAg\nICAgX2V4cDEuYXBwZW5kVG8oc2VsLCBjdHgsIGJzdGF0ZS5zdGF0ZTEsIGJ1\nZik7CiAgICAgICAgYnVmLmFwcGVuZCgiIE9SICIpOwogICAgICAgIF9leHAy\nLmFwcGVuZFRvKHNlbCwgY3R4LCBic3RhdGUuc3RhdGUyLCBidWYpOwoKICAg\nICAgICBpZiAocGFyZW4pCiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoIikiKTsK\nICAgICAgICBzZWwuYXBwZW5kKGJ1ZiwgYnN0YXRlLmpvaW5zKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBzZWxlY3RDb2x1bW5zKFNlbGVjdCBzZWwsIEV4\ncENvbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSwgCiAgICAgICAgYm9vbGVh\nbiBwa3MpIHsKICAgICAgICBCaW5hcnlPcEV4cFN0YXRlIGJzdGF0ZSA9IChC\naW5hcnlPcEV4cFN0YXRlKSBzdGF0ZTsKICAgICAgICBfZXhwMS5zZWxlY3RD\nb2x1bW5zKHNlbCwgY3R4LCBic3RhdGUuc3RhdGUxLCBwa3MpOwogICAgICAg\nIF9leHAyLnNlbGVjdENvbHVtbnMoc2VsLCBjdHgsIGJzdGF0ZS5zdGF0ZTIs\nIHBrcyk7CiAgICB9CgogICAgcHVibGljIHZvaWQgYWNjZXB0VmlzaXQoRXhw\ncmVzc2lvblZpc2l0b3IgdmlzaXRvcikgewogICAgICAgIHZpc2l0b3IuZW50\nZXIodGhpcyk7CiAgICAgICAgX2V4cDEuYWNjZXB0VmlzaXQodmlzaXRvcik7\nCiAgICAgICAgX2V4cDIuYWNjZXB0VmlzaXQodmlzaXRvcik7CiAgICAgICAg\ndmlzaXRvci5leGl0KHRoaXMpOwogICAgfQp9Cg==\n","encoding":"base64"}

