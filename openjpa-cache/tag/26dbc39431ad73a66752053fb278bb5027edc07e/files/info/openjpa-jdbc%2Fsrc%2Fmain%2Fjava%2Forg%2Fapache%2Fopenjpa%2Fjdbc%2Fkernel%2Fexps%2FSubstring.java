{"sha":"a7d01bde7d6ce5d4382ae93de97166e470e00973","node_id":"MDQ6QmxvYjIwNjM2NDphN2QwMWJkZTdkNmNlNWQ0MzgyYWU5M2RlOTcxNjZlNDcwZTAwOTcz","size":4794,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/a7d01bde7d6ce5d4382ae93de97166e470e00973","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuZXhwczsK\nCmltcG9ydCBqYXZhLnNxbC5TUUxFeGNlcHRpb247CgppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMubWV0YS5KYXZhU1FMVHlwZXM7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuUmVzdWx0OwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNRTEJ1ZmZlcjsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5TZWxlY3Q7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEua2VybmVsLkZpbHRlcnM7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEua2VybmVsLmV4cHMuRXhwcmVzc2lvblZpc2l0b3I7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5DbGFzc01ldGFEYXRhOwoK\nLyoqCiAqIFRha2UgYSBzdWJzdHJpbmcgb2YgYSBzdHJpbmcuCiAqCiAqIEBh\ndXRob3IgQWJlIFdoaXRlCiAqLwpwdWJsaWMgY2xhc3MgU3Vic3RyaW5nCiAg\nICBleHRlbmRzIEFic3RyYWN0VmFsIHsKCiAgICBwcml2YXRlIGZpbmFsIFZh\nbCBfdmFsMTsKICAgIHByaXZhdGUgZmluYWwgVmFsIF92YWwyOwogICAgcHJp\ndmF0ZSBDbGFzc01ldGFEYXRhIF9tZXRhID0gbnVsbDsKCiAgICAvKioKICAg\nICAqIENvbnN0cnVjdG9yLiBQcm92aWRlIHRoZSBzdHJpbmdzIHRvIG9wZXJh\ndGUgb24uCiAgICAgKi8KICAgIHB1YmxpYyBTdWJzdHJpbmcoVmFsIHZhbDEs\nIFZhbCB2YWwyKSB7CiAgICAgICAgX3ZhbDEgPSB2YWwxOwogICAgICAgIF92\nYWwyID0gdmFsMjsKICAgIH0KCiAgICBwdWJsaWMgVmFsIGdldFZhbDEoKSB7\nCiAgICAgICAgcmV0dXJuIF92YWwxOwogICAgfQoKICAgIHB1YmxpYyBWYWwg\nZ2V0VmFsMigpIHsKICAgICAgICByZXR1cm4gX3ZhbDI7CiAgICB9CgogICAg\ncHVibGljIENsYXNzTWV0YURhdGEgZ2V0TWV0YURhdGEoKSB7CiAgICAgICAg\ncmV0dXJuIF9tZXRhOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldE1ldGFE\nYXRhKENsYXNzTWV0YURhdGEgbWV0YSkgewogICAgICAgIF9tZXRhID0gbWV0\nYTsKICAgIH0KCiAgICBwdWJsaWMgQ2xhc3MgZ2V0VHlwZSgpIHsKICAgICAg\nICByZXR1cm4gU3RyaW5nLmNsYXNzOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHNldEltcGxpY2l0VHlwZShDbGFzcyB0eXBlKSB7CiAgICB9CgogICAgcHVi\nbGljIEV4cFN0YXRlIGluaXRpYWxpemUoU2VsZWN0IHNlbCwgRXhwQ29udGV4\ndCBjdHgsIGludCBmbGFncykgewogICAgICAgIEV4cFN0YXRlIHMxID0gX3Zh\nbDEuaW5pdGlhbGl6ZShzZWwsIGN0eCwgMCk7CiAgICAgICAgRXhwU3RhdGUg\nczIgPSBfdmFsMi5pbml0aWFsaXplKHNlbCwgY3R4LCAwKTsKICAgICAgICBy\nZXR1cm4gbmV3IEJpbmFyeU9wRXhwU3RhdGUoc2VsLmFuZChzMS5qb2lucywg\nczIuam9pbnMpLCBzMSwgczIpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNl\nbGVjdChTZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwgRXhwU3RhdGUgc3Rh\ndGUsIAogICAgICAgIGJvb2xlYW4gcGtzKSB7CiAgICAgICAgc2VsLnNlbGVj\ndChuZXdTUUxCdWZmZXIoc2VsLCBjdHgsIHN0YXRlKSwgdGhpcyk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgc2VsZWN0Q29sdW1ucyhTZWxlY3Qgc2VsLCBF\neHBDb250ZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUsIAogICAgICAgIGJvb2xl\nYW4gcGtzKSB7CiAgICAgICAgQmluYXJ5T3BFeHBTdGF0ZSBic3RhdGUgPSAo\nQmluYXJ5T3BFeHBTdGF0ZSkgc3RhdGU7CiAgICAgICAgX3ZhbDEuc2VsZWN0\nQ29sdW1ucyhzZWwsIGN0eCwgYnN0YXRlLnN0YXRlMSwgdHJ1ZSk7CiAgICAg\nICAgX3ZhbDIuc2VsZWN0Q29sdW1ucyhzZWwsIGN0eCwgYnN0YXRlLnN0YXRl\nMiwgdHJ1ZSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgZ3JvdXBCeShTZWxl\nY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUpIHsKICAg\nICAgICBzZWwuZ3JvdXBCeShuZXdTUUxCdWZmZXIoc2VsLCBjdHgsIHN0YXRl\nKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgb3JkZXJCeShTZWxlY3Qgc2Vs\nLCBFeHBDb250ZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUsIAogICAgICAgIGJv\nb2xlYW4gYXNjKSB7CiAgICAgICAgc2VsLm9yZGVyQnkobmV3U1FMQnVmZmVy\nKHNlbCwgY3R4LCBzdGF0ZSksIGFzYywgZmFsc2UpOwogICAgfQoKICAgIHBy\naXZhdGUgU1FMQnVmZmVyIG5ld1NRTEJ1ZmZlcihTZWxlY3Qgc2VsLCBFeHBD\nb250ZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUpIHsKICAgICAgICBjYWxjdWxh\ndGVWYWx1ZShzZWwsIGN0eCwgc3RhdGUsIG51bGwsIG51bGwpOwogICAgICAg\nIFNRTEJ1ZmZlciBidWYgPSBuZXcgU1FMQnVmZmVyKGN0eC5zdG9yZS5nZXRE\nQkRpY3Rpb25hcnkoKSk7CiAgICAgICAgYXBwZW5kVG8oc2VsLCBjdHgsIHN0\nYXRlLCBidWYsIDApOwogICAgICAgIHJldHVybiBidWY7CiAgICB9CgogICAg\ncHVibGljIE9iamVjdCBsb2FkKEV4cENvbnRleHQgY3R4LCBFeHBTdGF0ZSBz\ndGF0ZSwgUmVzdWx0IHJlcykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9u\nIHsKICAgICAgICByZXR1cm4gRmlsdGVycy5jb252ZXJ0KHJlcy5nZXRPYmpl\nY3QodGhpcywKICAgICAgICAgICAgSmF2YVNRTFR5cGVzLkpEQkNfREVGQVVM\nVCwgbnVsbCksIGdldFR5cGUoKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nY2FsY3VsYXRlVmFsdWUoU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4\ncFN0YXRlIHN0YXRlLCAKICAgICAgICBWYWwgb3RoZXIsIEV4cFN0YXRlIG90\naGVyU3RhdGUpIHsKICAgICAgICBCaW5hcnlPcEV4cFN0YXRlIGJzdGF0ZSA9\nIChCaW5hcnlPcEV4cFN0YXRlKSBzdGF0ZTsKICAgICAgICBfdmFsMS5jYWxj\ndWxhdGVWYWx1ZShzZWwsIGN0eCwgYnN0YXRlLnN0YXRlMSwgbnVsbCwgbnVs\nbCk7CiAgICAgICAgX3ZhbDIuY2FsY3VsYXRlVmFsdWUoc2VsLCBjdHgsIGJz\ndGF0ZS5zdGF0ZTIsIG51bGwsIG51bGwpOwogICAgfQoKICAgIHB1YmxpYyBp\nbnQgbGVuZ3RoKFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBFeHBTdGF0\nZSBzdGF0ZSkgewogICAgICAgIHJldHVybiAxOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIGFwcGVuZFRvKFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBF\neHBTdGF0ZSBzdGF0ZSwgCiAgICAgICAgU1FMQnVmZmVyIHNxbCwgaW50IGlu\nZGV4KSB7CiAgICAgICAgQmluYXJ5T3BFeHBTdGF0ZSBic3RhdGUgPSAoQmlu\nYXJ5T3BFeHBTdGF0ZSkgc3RhdGU7CiAgICAgICAgRmlsdGVyVmFsdWUgc3Ry\nID0gbmV3IEZpbHRlclZhbHVlSW1wbChzZWwsIGN0eCwgYnN0YXRlLnN0YXRl\nMSwgX3ZhbDEpOwogICAgICAgIEZpbHRlclZhbHVlIHN0YXJ0OwogICAgICAg\nIEZpbHRlclZhbHVlIGVuZCA9IG51bGw7CiAgICAgICAgaWYgKF92YWwyIGlu\nc3RhbmNlb2YgQXJncykgewogICAgICAgICAgICBGaWx0ZXJWYWx1ZVtdIGZp\nbHRzID0gKChBcmdzKSBfdmFsMikubmV3RmlsdGVyVmFsdWVzKHNlbCwgY3R4\nLCAKICAgICAgICAgICAgICAgIGJzdGF0ZS5zdGF0ZTIpOwogICAgICAgICAg\nICBzdGFydCA9IGZpbHRzWzBdOwogICAgICAgICAgICBlbmQgPSBmaWx0c1sx\nXTsKICAgICAgICB9IGVsc2UKICAgICAgICAgICAgc3RhcnQgPSBuZXcgRmls\ndGVyVmFsdWVJbXBsKHNlbCwgY3R4LCBic3RhdGUuc3RhdGUyLCBfdmFsMik7\nCgogICAgICAgIGN0eC5zdG9yZS5nZXREQkRpY3Rpb25hcnkoKS5zdWJzdHJp\nbmcoc3FsLCBzdHIsIHN0YXJ0LCBlbmQpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIGFjY2VwdFZpc2l0KEV4cHJlc3Npb25WaXNpdG9yIHZpc2l0b3IpIHsK\nICAgICAgICB2aXNpdG9yLmVudGVyKHRoaXMpOwogICAgICAgIF92YWwxLmFj\nY2VwdFZpc2l0KHZpc2l0b3IpOwogICAgICAgIF92YWwyLmFjY2VwdFZpc2l0\nKHZpc2l0b3IpOwogICAgICAgIHZpc2l0b3IuZXhpdCh0aGlzKTsKICAgIH0K\nCiAgICBwdWJsaWMgaW50IGdldElkKCkgewogICAgICAgIHJldHVybiBWYWwu\nU1VCU1RSSU5HX1ZBTDsKICAgIH0KfQoK\n","encoding":"base64"}

