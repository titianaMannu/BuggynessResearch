{"sha":"64e94eaf7d86f43338c4082f836446eeec48954a","node_id":"MDQ6QmxvYjIwNjM2NDo2NGU5NGVhZjdkODZmNDMzMzhjNDA4MmY4MzY0NDZlZWVjNDg5NTRh","size":4610,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/64e94eaf7d86f43338c4082f836446eeec48954a","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuZXhwczsK\nCmltcG9ydCBqYXZhLnNxbC5TUUxFeGNlcHRpb247CgppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMubWV0YS5KYXZhU1FMVHlwZXM7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuUmVzdWx0OwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNRTEJ1ZmZlcjsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5TZWxlY3Q7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEua2VybmVsLkZpbHRlcnM7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEua2VybmVsLmV4cHMuRXhwcmVzc2lvblZpc2l0b3I7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5DbGFzc01ldGFEYXRhOwoK\nLyoqCiAqIFZhbHVlIHByb2R1Y2VkIGJ5IGEgdW5hcnkgb3BlcmF0aW9uIG9u\nIGEgdmFsdWUuCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqLwphYnN0cmFj\ndCBjbGFzcyBVbmFyeU9wCiAgICBleHRlbmRzIEFic3RyYWN0VmFsIHsKCiAg\nICBwcml2YXRlIGZpbmFsIFZhbCBfdmFsOwogICAgcHJpdmF0ZSBDbGFzc01l\ndGFEYXRhIF9tZXRhID0gbnVsbDsKICAgIHByaXZhdGUgQ2xhc3MgX2Nhc3Qg\nPSBudWxsOwogICAgcHJpdmF0ZSBib29sZWFuIF9ub1BhcmVuID0gZmFsc2U7\nCgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3Rvci4gUHJvdmlkZSB0aGUgdmFs\ndWUgdG8gb3BlcmF0ZSBvbi4KICAgICAqLwogICAgcHVibGljIFVuYXJ5T3Ao\nVmFsIHZhbCkgewogICAgICAgIF92YWwgPSB2YWw7CiAgICB9CiAgICAKICAg\nIHB1YmxpYyBVbmFyeU9wKFZhbCB2YWwsIGJvb2xlYW4gbm9QYXJlbikgewog\nICAgICAgIF92YWwgPSB2YWw7CiAgICAgICAgX25vUGFyZW4gPSBub1BhcmVu\nOwogICAgfQoKICAgIHB1YmxpYyBWYWwgZ2V0VmFsdWUoKSB7CiAgICAgICAg\ncmV0dXJuIF92YWw7CiAgICB9CgogICAgcHVibGljIENsYXNzTWV0YURhdGEg\nZ2V0TWV0YURhdGEoKSB7CiAgICAgICAgcmV0dXJuIF9tZXRhOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHNldE1ldGFEYXRhKENsYXNzTWV0YURhdGEgbWV0\nYSkgewogICAgICAgIF9tZXRhID0gbWV0YTsKICAgIH0KCiAgICBwdWJsaWMg\nQ2xhc3MgZ2V0VHlwZSgpIHsKICAgICAgICBpZiAoX2Nhc3QgIT0gbnVsbCkK\nICAgICAgICAgICAgcmV0dXJuIF9jYXN0OwogICAgICAgIHJldHVybiBnZXRU\neXBlKF92YWwuZ2V0VHlwZSgpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBz\nZXRJbXBsaWNpdFR5cGUoQ2xhc3MgdHlwZSkgewogICAgICAgIF9jYXN0ID0g\ndHlwZTsKICAgIH0KCiAgICBwdWJsaWMgRXhwU3RhdGUgaW5pdGlhbGl6ZShT\nZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwgaW50IGZsYWdzKSB7CiAgICAg\nICAgcmV0dXJuIGluaXRpYWxpemVWYWx1ZShzZWwsIGN0eCwgZmxhZ3MpOwog\nICAgfQoKICAgIHByb3RlY3RlZCBFeHBTdGF0ZSBpbml0aWFsaXplVmFsdWUo\nU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIGludCBmbGFncykgewogICAg\nICAgIHJldHVybiBfdmFsLmluaXRpYWxpemUoc2VsLCBjdHgsIGZsYWdzKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZWxlY3QoU2VsZWN0IHNlbCwgRXhw\nQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlLCAKICAgICAgICBib29sZWFu\nIHBrcykgewogICAgICAgIHNlbC5zZWxlY3QobmV3U1FMQnVmZmVyKHNlbCwg\nY3R4LCBzdGF0ZSksIHRoaXMpOwogICAgICAgIGlmIChpc0FnZ3JlZ2F0ZSgp\nKQogICAgICAgICAgICBzZWwuc2V0QWdncmVnYXRlKHRydWUpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHNlbGVjdENvbHVtbnMoU2VsZWN0IHNlbCwgRXhw\nQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlLCAKICAgICAgICBib29sZWFu\nIHBrcykgewogICAgICAgIF92YWwuc2VsZWN0Q29sdW1ucyhzZWwsIGN0eCwg\nc3RhdGUsIHRydWUpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGdyb3VwQnko\nU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlKSB7\nCiAgICAgICAgc2VsLmdyb3VwQnkobmV3U1FMQnVmZmVyKHNlbCwgY3R4LCBz\ndGF0ZSkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIG9yZGVyQnkoU2VsZWN0\nIHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlLCAKICAgICAg\nICBib29sZWFuIGFzYykgewogICAgICAgIHNlbC5vcmRlckJ5KG5ld1NRTEJ1\nZmZlcihzZWwsIGN0eCwgc3RhdGUpLCBhc2MsIGZhbHNlKTsKICAgIH0KCiAg\nICBwcml2YXRlIFNRTEJ1ZmZlciBuZXdTUUxCdWZmZXIoU2VsZWN0IHNlbCwg\nRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlKSB7CiAgICAgICAgY2Fs\nY3VsYXRlVmFsdWUoc2VsLCBjdHgsIHN0YXRlLCBudWxsLCBudWxsKTsKICAg\nICAgICBTUUxCdWZmZXIgYnVmID0gbmV3IFNRTEJ1ZmZlcihjdHguc3RvcmUu\nZ2V0REJEaWN0aW9uYXJ5KCkpOwogICAgICAgIGFwcGVuZFRvKHNlbCwgY3R4\nLCBzdGF0ZSwgYnVmLCAwKTsKICAgICAgICByZXR1cm4gYnVmOwogICAgfQoK\nICAgIHB1YmxpYyBPYmplY3QgbG9hZChFeHBDb250ZXh0IGN0eCwgRXhwU3Rh\ndGUgc3RhdGUsIFJlc3VsdCByZXMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2Vw\ndGlvbiB7CiAgICAgICAgcmV0dXJuIEZpbHRlcnMuY29udmVydChyZXMuZ2V0\nT2JqZWN0KHRoaXMsCiAgICAgICAgICAgIEphdmFTUUxUeXBlcy5KREJDX0RF\nRkFVTFQsIG51bGwpLCBnZXRUeXBlKCkpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIGNhbGN1bGF0ZVZhbHVlKFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4\nLCBFeHBTdGF0ZSBzdGF0ZSwgCiAgICAgICAgVmFsIG90aGVyLCBFeHBTdGF0\nZSBvdGhlclN0YXRlKSB7CiAgICAgICAgX3ZhbC5jYWxjdWxhdGVWYWx1ZShz\nZWwsIGN0eCwgc3RhdGUsIG51bGwsIG51bGwpOwogICAgfQoKICAgIHB1Ymxp\nYyBpbnQgbGVuZ3RoKFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4LCBFeHBT\ndGF0ZSBzdGF0ZSkgewogICAgICAgIHJldHVybiAxOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIGFwcGVuZFRvKFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4\nLCBFeHBTdGF0ZSBzdGF0ZSwgCiAgICAgICAgU1FMQnVmZmVyIHNxbCwgaW50\nIGluZGV4KSB7CiAgICAgICAgc3FsLmFwcGVuZChnZXRPcGVyYXRvcigpKTsK\nICAgICAgICBzcWwuYXBwZW5kKF9ub1BhcmVuID8gIiAiIDogIigiKTsKICAg\nICAgICBfdmFsLmFwcGVuZFRvKHNlbCwgY3R4LCBzdGF0ZSwgc3FsLCAwKTsK\nICAgICAgICBzcWwuYWRkQ2FzdEZvclBhcmFtKGdldE9wZXJhdG9yKCksIF92\nYWwpOwogICAgICAgIGlmICghX25vUGFyZW4pCiAgICAgICAgICAgIHNxbC5h\ncHBlbmQoIikiKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUg\ndHlwZSBvZiB0aGlzIHZhbHVlIGJhc2VkIG9uIHRoZSBhcmd1bWVudCB0eXBl\nLiBSZXR1cm5zCiAgICAgKiB0aGUgYXJndW1lbnQgdHlwZSBieSBkZWZhdWx0\nLgogICAgICovCiAgICBwcm90ZWN0ZWQgQ2xhc3MgZ2V0VHlwZShDbGFzcyBj\nKSB7CiAgICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgLyoqCiAgICAgKiBS\nZXR1cm4gdGhlIG5hbWUgb2YgdGhpcyBvcGVyYXRvci4KICAgICAqLwogICAg\ncHJvdGVjdGVkIGFic3RyYWN0IFN0cmluZyBnZXRPcGVyYXRvcigpOwoKICAg\nIHB1YmxpYyB2b2lkIGFjY2VwdFZpc2l0KEV4cHJlc3Npb25WaXNpdG9yIHZp\nc2l0b3IpIHsKICAgICAgICB2aXNpdG9yLmVudGVyKHRoaXMpOwogICAgICAg\nIF92YWwuYWNjZXB0VmlzaXQodmlzaXRvcik7CiAgICAgICAgdmlzaXRvci5l\neGl0KHRoaXMpOwogICAgfQp9Cgo=\n","encoding":"base64"}

