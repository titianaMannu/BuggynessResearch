{"sha":"20efe87097b1c4e6be5c3ed573fa80da9d89455c","node_id":"MDQ6QmxvYjIwNjM2NDoyMGVmZTg3MDk3YjFjNGU2YmU1YzNlZDU3M2ZhODBkYTlkODk0NTVj","size":4320,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/20efe87097b1c4e6be5c3ed573fa80da9d89455c","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhOwoKaW1wb3J0\nIGphdmEuc3FsLlNRTEV4Y2VwdGlvbjsKCmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5rZXJuZWwuSkRCQ1N0b3JlOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmpkYmMuc2NoZW1hLkNvbHVtbjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLnNjaGVtYS5Gb3JlaWduS2V5OwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLkpvaW5zOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMuc3FsLlJlc3VsdDsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5rZXJuZWwuT3BlbkpQQVN0YXRlTWFuYWdlcjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6ZXI7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5NZXRhRGF0YUV4Y2VwdGlvbjsK\nCi8qKgogKiBEZWxlZ2F0ZXMgdG8gYW5vdGhlciB7QGxpbmsgSm9pbmFibGV9\nIGFmdGVyIGRvaW5nIGNvbHVtbgogKiB0cmFuc2xhdGlvbi4gVXNlZnVsIGZv\nciBqb2lucyB0aGF0IGFyZSBub3QgbWFuYWdlZCBieSBhbnkgZmllbGRzIG9u\nCiAqIHRoZSBqb2luZWQtZnJvbSBzaWRlLiBGb3IgZXhhbXBsZSwgYSB2ZXJ0\naWNhbCBjbGFzcyBtYXBwaW5nIG1hbmFnZXMKICogZm9yZWlnbiBrZXkgY29s\ndW1ucyBsaW5raW5nIHRvIHRoZSBzdXBlcmNsYXNzIHRhYmxlLiBJdCBuZWVk\ncyB0byB1c2UKICogdGhlIGpvaW5hYmxlcyBvZiB0aGUgc3VwZXJjbGFzcyB0\nbyBhY3R1YWxseSBleHRyYWN0IHRoZSBjb2x1bW4gdmFsdWVzCiAqIGZyb20g\nZmllbGQgdmFsdWVzIGFuZCBzbyBmb3J0aCwgYnV0IGluIG9yZGVyIGZvciBv\ndGhlciBtYXBwaW5ncyB0byBqb2luCiAqIHRvIGl0cyBmb3JlaWduIGtleSBj\nb2x1bW5zIGl0IG5lZWRzIGpvaW5hYmxlcyBvZiBpdHMgb3duLiBTbyBpdCBj\ncmVhdGVzCiAqIGRlbGVnYXRpbmcgam9pbmFibGVzLgogKgogKiBAYXV0aG9y\nIEFiZSBXaGl0ZQogKi8KcHVibGljIGNsYXNzIERlbGVnYXRpbmdKb2luYWJs\nZQogICAgaW1wbGVtZW50cyBKb2luYWJsZSB7CgogICAgcHJpdmF0ZSBzdGF0\naWMgZmluYWwgTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6ZXIuZm9yUGFja2Fn\nZQogICAgICAgIChEZWxlZ2F0aW5nSm9pbmFibGUuY2xhc3MpOwoKICAgIHBy\naXZhdGUgZmluYWwgSm9pbmFibGUgX2pvaW47CiAgICBwcml2YXRlIGZpbmFs\nIEZvcmVpZ25LZXkgX2ZrOwogICAgcHJpdmF0ZSBmaW5hbCBDb2x1bW5bXSBf\nY29sczsKCiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yLgogICAgICoKICAg\nICAqIEBwYXJhbSBqb2luIHRoZSBtYXBwaW5nIHRvIGRlbGVnYXRlIHRvCiAg\nICAgKiBAcGFyYW0gZmsgdGhlIGZvcmVpZ24ga2V5IHRvIHVzZSB0byB0cmFu\nc2xhdGUgYW55IGdpdmVuIGNvbHVtbnMKICAgICAqIHRvIHRoZSBnaXZlbiBk\nZWxlZ2F0ZSdzIGNvbHVtbnMKICAgICAqLwogICAgcHVibGljIERlbGVnYXRp\nbmdKb2luYWJsZShKb2luYWJsZSBqb2luLCBGb3JlaWduS2V5IGZrKSB7CiAg\nICAgICAgX2pvaW4gPSBqb2luOwogICAgICAgIF9mayA9IGZrOwoKICAgICAg\nICBDb2x1bW5bXSBwa3MgPSBqb2luLmdldENvbHVtbnMoKTsKICAgICAgICBf\nY29scyA9IG5ldyBDb2x1bW5bcGtzLmxlbmd0aF07CiAgICAgICAgZm9yIChp\nbnQgaSA9IDA7IGkgPCBwa3MubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAg\nX2NvbHNbaV0gPSBmay5nZXRDb2x1bW4ocGtzW2ldKTsKICAgICAgICAgICAg\naWYgKF9jb2xzW2ldID09IG51bGwpCiAgICAgICAgICAgICAgICB0aHJvdyBu\nZXcgTWV0YURhdGFFeGNlcHRpb24oX2xvYy5nZXQoImluY29tcGxldGUtam9p\nbiIsCiAgICAgICAgICAgICAgICAgICAgcGtzW2ldLmdldEZ1bGxOYW1lKCkp\nKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3Rv\nci4KICAgICAqCiAgICAgKiBAcGFyYW0gam9pbiB0aGUgbWFwcGluZyB0byBk\nZWxlZ2F0ZSB0bwogICAgICogQHBhcmFtIGNvbHMgdHJhbnNsYXRlZCBjb2x1\nbW5zCiAgICAgKi8KICAgIHB1YmxpYyBEZWxlZ2F0aW5nSm9pbmFibGUoSm9p\nbmFibGUgam9pbiwgQ29sdW1uW10gY29scykgewogICAgICAgIF9qb2luID0g\nam9pbjsKICAgICAgICBfZmsgPSBudWxsOwogICAgICAgIF9jb2xzID0gY29s\nczsKICAgICAgICBpZiAoY29scy5sZW5ndGggIT0gam9pbi5nZXRDb2x1bW5z\nKCkubGVuZ3RoKQogICAgICAgICAgICB0aHJvdyBuZXcgTWV0YURhdGFFeGNl\ncHRpb24oX2xvYy5nZXQoImJhZC1yZW1hcCIsCiAgICAgICAgICAgICAgICBq\nb2luLmdldENvbHVtbnMoKVswXS5nZXRGdWxsTmFtZSgpKSk7CiAgICB9Cgog\nICAgcHVibGljIGludCBnZXRGaWVsZEluZGV4KCkgewogICAgICAgIHJldHVy\nbiBfam9pbi5nZXRGaWVsZEluZGV4KCk7CiAgICB9CgogICAgcHVibGljIE9i\namVjdCBnZXRQcmltYXJ5S2V5VmFsdWUoUmVzdWx0IHJlcywgQ29sdW1uW10g\nY29scywgRm9yZWlnbktleSBmaywgCiAgICAgICAgSkRCQ1N0b3JlIHN0b3Jl\nLCBKb2lucyBqb2lucykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsK\nICAgICAgICByZXR1cm4gX2pvaW4uZ2V0UHJpbWFyeUtleVZhbHVlKHJlcywg\nY29scywgZmssIHN0b3JlLCBqb2lucyk7CiAgICB9CgogICAgcHVibGljIENv\nbHVtbltdIGdldENvbHVtbnMoKSB7CiAgICAgICAgcmV0dXJuIF9jb2xzOwog\nICAgfQoKICAgIHB1YmxpYyBPYmplY3QgZ2V0Sm9pblZhbHVlKE9iamVjdCB2\nYWwsIENvbHVtbiBjb2wsIEpEQkNTdG9yZSBzdG9yZSkgewogICAgICAgIHJl\ndHVybiBfam9pbi5nZXRKb2luVmFsdWUodmFsLCB0cmFuc2xhdGUoY29sKSwg\nc3RvcmUpOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgZ2V0Sm9pblZhbHVl\nKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIENvbHVtbiBjb2wsCiAgICAgICAg\nSkRCQ1N0b3JlIHN0b3JlKSB7CiAgICAgICAgcmV0dXJuIF9qb2luLmdldEpv\naW5WYWx1ZShzbSwgdHJhbnNsYXRlKGNvbCksIHN0b3JlKTsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCBzZXRBdXRvQXNzaWduZWRWYWx1ZShPcGVuSlBBU3Rh\ndGVNYW5hZ2VyIHNtLCBKREJDU3RvcmUgc3RvcmUsCiAgICAgICAgQ29sdW1u\nIGNvbCwgT2JqZWN0IGF1dG9nZW4pIHsKICAgICAgICBfam9pbi5zZXRBdXRv\nQXNzaWduZWRWYWx1ZShzbSwgc3RvcmUsIHRyYW5zbGF0ZShjb2wpLCBhdXRv\nZ2VuKTsKICAgIH0KCiAgICBwcml2YXRlIENvbHVtbiB0cmFuc2xhdGUoQ29s\ndW1uIGNvbCkgewogICAgICAgIGlmIChfZmsgIT0gbnVsbCkKICAgICAgICAg\nICAgcmV0dXJuIF9may5nZXRQcmltYXJ5S2V5Q29sdW1uKGNvbCk7CgogICAg\nICAgIENvbHVtbltdIGNvbHMgPSBfam9pbi5nZXRDb2x1bW5zKCk7CiAgICAg\nICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb2xzLmxlbmd0aDsgaSsrKQogICAg\nICAgICAgICBpZiAoY29sID09IGNvbHNbaV0pCiAgICAgICAgICAgICAgICBy\nZXR1cm4gX2NvbHNbaV07CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9Cn0K\n","encoding":"base64"}

