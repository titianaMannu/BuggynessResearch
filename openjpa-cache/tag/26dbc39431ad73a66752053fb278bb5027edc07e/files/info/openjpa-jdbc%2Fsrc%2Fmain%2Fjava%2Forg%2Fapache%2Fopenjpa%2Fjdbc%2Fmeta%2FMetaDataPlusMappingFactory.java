{"sha":"1b2bec007c1d9e47512059d1a845406df816ee3e","node_id":"MDQ6QmxvYjIwNjM2NDoxYjJiZWMwMDdjMWQ5ZTQ3NTEyMDU5ZDFhODQ1NDA2ZGY4MTZlZTNl","size":4492,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/1b2bec007c1d9e47512059d1a845406df816ee3e","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhOwoKaW1wb3J0\nIGphdmEuaW8uRmlsZTsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOwpp\nbXBvcnQgamF2YS51dGlsLk1hcDsKaW1wb3J0IGphdmEudXRpbC5TZXQ7Cgpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuQ2xhc3NNZXRhRGF0YTsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkRlbGVnYXRpbmdNZXRh\nRGF0YUZhY3Rvcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5N\nZXRhRGF0YUZhY3Rvcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0\nYS5NZXRhRGF0YVJlcG9zaXRvcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEubWV0YS5RdWVyeU1ldGFEYXRhOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLm1ldGEuU2VxdWVuY2VNZXRhRGF0YTsKCi8qKgogKiBDb21iaW5lcyB0\nd28gaW50ZXJuYWwge0BsaW5rIE1ldGFEYXRhRmFjdG9yeX0gaW5zdGFuY2Vz\nIC0tIG9uZSBmb3IKICogbWV0YWRhdGEsIG9uZSBmb3IgbWFwcGluZ3MgLS0g\naW50byBhIHNpbmdsZSB7QGxpbmsgTWV0YURhdGFGYWN0b3J5fSBmYWNhZGUu\nCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqIEBub2phdmFkb2MKICovCnB1\nYmxpYyBjbGFzcyBNZXRhRGF0YVBsdXNNYXBwaW5nRmFjdG9yeQogICAgZXh0\nZW5kcyBEZWxlZ2F0aW5nTWV0YURhdGFGYWN0b3J5IHsKCiAgICBwcml2YXRl\nIGZpbmFsIE1ldGFEYXRhRmFjdG9yeSBfbWFwOwoKICAgIC8qKgogICAgICog\nQ29uc3RydWN0b3I7IHN1cHBseSBkZWxlZ2F0ZXMuCiAgICAgKi8KICAgIHB1\nYmxpYyBNZXRhRGF0YVBsdXNNYXBwaW5nRmFjdG9yeShNZXRhRGF0YUZhY3Rv\ncnkgbWV0YSwKICAgICAgICBNZXRhRGF0YUZhY3RvcnkgbWFwKSB7CiAgICAg\nICAgc3VwZXIobWV0YSk7CiAgICAgICAgX21hcCA9IG1hcDsKCiAgICAgICAg\nbWV0YS5zZXRTdHJpY3QodHJ1ZSk7CiAgICAgICAgbWFwLnNldFN0cmljdCh0\ncnVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIE1hcHBpbmcgZmFjdG9yeSBk\nZWxlZ2F0ZS4KICAgICAqLwogICAgcHVibGljIE1ldGFEYXRhRmFjdG9yeSBn\nZXRNYXBwaW5nRGVsZWdhdGUoKSB7CiAgICAgICAgcmV0dXJuIF9tYXA7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBJbm5lcm1vc3QgbWFwcGluZyBkZWxlZ2F0\nZS4KICAgICAqLwogICAgcHVibGljIE1ldGFEYXRhRmFjdG9yeSBnZXRJbm5l\ncm1vc3RNYXBwaW5nRGVsZWdhdGUoKSB7CiAgICAgICAgaWYgKF9tYXAgaW5z\ndGFuY2VvZiBEZWxlZ2F0aW5nTWV0YURhdGFGYWN0b3J5KQogICAgICAgICAg\nICByZXR1cm4gKChEZWxlZ2F0aW5nTWV0YURhdGFGYWN0b3J5KSBfbWFwKS5n\nZXRJbm5lcm1vc3REZWxlZ2F0ZSgpOwogICAgICAgIHJldHVybiBfbWFwOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldFJlcG9zaXRvcnkoTWV0YURhdGFS\nZXBvc2l0b3J5IHJlcG9zKSB7CiAgICAgICAgc3VwZXIuc2V0UmVwb3NpdG9y\neShyZXBvcyk7CiAgICAgICAgX21hcC5zZXRSZXBvc2l0b3J5KHJlcG9zKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRTdG9yZURpcmVjdG9yeShGaWxl\nIGRpcikgewogICAgICAgIHN1cGVyLnNldFN0b3JlRGlyZWN0b3J5KGRpcik7\nCiAgICAgICAgX21hcC5zZXRTdG9yZURpcmVjdG9yeShkaXIpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHNldFN0b3JlTW9kZShpbnQgc3RvcmUpIHsKICAg\nICAgICBzdXBlci5zZXRTdG9yZU1vZGUoc3RvcmUpOwogICAgICAgIF9tYXAu\nc2V0U3RvcmVNb2RlKHN0b3JlKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBz\nZXRTdHJpY3QoYm9vbGVhbiBzdHJpY3QpIHsKICAgICAgICAvLyBhbHdheXMg\naW4gc3RyaWN0IG1vZGUKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBsb2FkKENs\nYXNzIGNscywgaW50IG1vZGUsIENsYXNzTG9hZGVyIGVudkxvYWRlcikgewog\nICAgICAgIGlmICgobW9kZSAmIH5NT0RFX01BUFBJTkcpICE9IE1PREVfTk9O\nRSkKICAgICAgICAgICAgc3VwZXIubG9hZChjbHMsIG1vZGUgJiB+TU9ERV9N\nQVBQSU5HLCBlbnZMb2FkZXIpOwogICAgICAgIGlmIChjbHMgIT0gbnVsbCAm\nJiAobW9kZSAmIE1PREVfTUFQUElORykgIT0gMCkKICAgICAgICAgICAgX21h\ncC5sb2FkKGNscywgbW9kZSAmIH5NT0RFX01FVEEsIGVudkxvYWRlcik7CiAg\nICB9CgogICAgcHVibGljIGJvb2xlYW4gc3RvcmUoQ2xhc3NNZXRhRGF0YVtd\nIG1ldGFzLCBRdWVyeU1ldGFEYXRhW10gcXVlcmllcywKICAgICAgICBTZXF1\nZW5jZU1ldGFEYXRhW10gc2VxcywgaW50IG1vZGUsIE1hcCBvdXRwdXQpIHsK\nICAgICAgICBib29sZWFuIHN0b3JlID0gdHJ1ZTsKICAgICAgICBpZiAoKG1v\nZGUgJiB+TU9ERV9NQVBQSU5HKSAhPSBNT0RFX05PTkUpCiAgICAgICAgICAg\nIHN0b3JlICY9IHN1cGVyLnN0b3JlKG1ldGFzLCBxdWVyaWVzLCBzZXFzLCBt\nb2RlICYgfk1PREVfTUFQUElORywKICAgICAgICAgICAgICAgIG91dHB1dCk7\nCiAgICAgICAgaWYgKChtb2RlICYgTU9ERV9NQVBQSU5HKSAhPSAwKQogICAg\nICAgICAgICBzdG9yZSAmPSBfbWFwLnN0b3JlKG1ldGFzLCBxdWVyaWVzLCBz\nZXFzLCBtb2RlICYgfk1PREVfTUVUQSwKICAgICAgICAgICAgICAgIG91dHB1\ndCk7CiAgICAgICAgcmV0dXJuIHN0b3JlOwogICAgfQoKICAgIHB1YmxpYyBi\nb29sZWFuIGRyb3AoQ2xhc3NbXSBjbHMsIGludCBtb2RlLCBDbGFzc0xvYWRl\nciBlbnZMb2FkZXIpIHsKICAgICAgICBib29sZWFuIGRyb3AgPSB0cnVlOwog\nICAgICAgIGlmICgobW9kZSAmIH5NT0RFX01BUFBJTkcpICE9IE1PREVfTk9O\nRSkKICAgICAgICAgICAgZHJvcCAmPSBzdXBlci5kcm9wKGNscywgbW9kZSAm\nIH5NT0RFX01BUFBJTkcsIGVudkxvYWRlcik7CiAgICAgICAgaWYgKChtb2Rl\nICYgTU9ERV9NQVBQSU5HKSAhPSAwKQogICAgICAgICAgICBkcm9wICY9IF9t\nYXAuZHJvcChjbHMsIG1vZGUgJiB+TU9ERV9NRVRBLCBlbnZMb2FkZXIpOwog\nICAgICAgIHJldHVybiBkcm9wOwogICAgfQoKICAgIHB1YmxpYyBTZXQgZ2V0\nUGVyc2lzdGVudFR5cGVOYW1lcyhib29sZWFuIGNsYXNzcGF0aCwKICAgICAg\nICBDbGFzc0xvYWRlciBlbnZMb2FkZXIpIHsKICAgICAgICBTZXQgbmFtZXMg\nPSBzdXBlci5nZXRQZXJzaXN0ZW50VHlwZU5hbWVzKGNsYXNzcGF0aCwgZW52\nTG9hZGVyKTsKICAgICAgICBpZiAobmFtZXMgIT0gbnVsbCAmJiAhbmFtZXMu\naXNFbXB0eSgpKQogICAgICAgICAgICByZXR1cm4gbmFtZXM7CiAgICAgICAg\ncmV0dXJuIF9tYXAuZ2V0UGVyc2lzdGVudFR5cGVOYW1lcyhjbGFzc3BhdGgs\nIGVudkxvYWRlcik7CiAgICB9CgogICAgcHVibGljIHZvaWQgY2xlYXIoKSB7\nCiAgICAgICAgc3VwZXIuY2xlYXIoKTsKICAgICAgICBfbWFwLmNsZWFyKCk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgYWRkQ2xhc3NFeHRlbnNpb25LZXlz\nKENvbGxlY3Rpb24gZXh0cykgewogICAgICAgIHN1cGVyLmFkZENsYXNzRXh0\nZW5zaW9uS2V5cyhleHRzKTsKICAgICAgICBfbWFwLmFkZENsYXNzRXh0ZW5z\naW9uS2V5cyhleHRzKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBhZGRGaWVs\nZEV4dGVuc2lvbktleXMoQ29sbGVjdGlvbiBleHRzKSB7CiAgICAgICAgc3Vw\nZXIuYWRkRmllbGRFeHRlbnNpb25LZXlzKGV4dHMpOwogICAgICAgIF9tYXAu\nYWRkRmllbGRFeHRlbnNpb25LZXlzKGV4dHMpOwogICAgfQp9Cg==\n","encoding":"base64"}

