{"sha":"608c0a8d5d01ef1c5ba187cf9c2f1b52ab924f33","node_id":"MDQ6QmxvYjIwNjM2NDo2MDhjMGE4ZDVkMDFlZjFjNWJhMTg3Y2Y5YzJmMWI1MmFiOTI0ZjMz","size":9337,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/608c0a8d5d01ef1c5ba187cf9c2f1b52ab924f33","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhOwoKaW1wb3J0\nIGphdmEudXRpbC5Qcm9wZXJ0aWVzOwppbXBvcnQgamF2YS51dGlsLlNldDsK\naW1wb3J0IGphdmEudXRpbC5UcmVlU2V0OwoKaW1wb3J0IG9yZy5hcGFjaGUu\nY29tbW9ucy5sYW5nLlN0cmluZ1V0aWxzOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmpkYmMuc2NoZW1hLkNvbHVtbjsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNjaGVtYS5Gb3JlaWduS2V5OwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLlRhYmxlOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmxpYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0IHNlcnAu\ndXRpbC5TdHJpbmdzOwoKLyoqCiAqIFNpbXBsZSB7QGxpbmsgUmV2ZXJzZUN1\nc3RvbWl6ZXJ9IHRoYXQgdXNlcyBhIHByb3BlcnRpZXMgZmlsZSB0bwogKiB0\nbyBhbGxvdyBjdXN0b21pemF0aW9uIG9mIGJhc2ljIGNsYXNzIGFuZCBmaWVs\nZCBwcm9wZXJ0aWVzLiBUaGUKICogY3VzdG9taXplciB1c2VzIHRoZSBmb2xs\nb3dpbmcga2V5czoKICogPHVsPgogKiA8bGk+PGk+Jmx0O3RhYmxlIG5hbWUm\nZ3Q7LnRhYmxlLXR5cGU8L2k+OiBPdmVycmlkZSB0aGUgZGVmYXVsdCB0eXBl\nIG9mIHRoZQogKiBnaXZlbiB0YWJsZS4gTGVnYWwgdmFsdWVzIGFyZTogPGNv\nZGU+YmFzZSwgc2Vjb25kYXJ5LAogKiBzZWNvbmRhcnktb3V0ZXIsIGFzc29j\naWF0aW9uLCBzdWJjbGFzcywgbm9uZTwvY29kZT4uIFNlZQogKiB0aGUgVEFC\nTEVfWFhYIGNvbnN0YW50cyBpbiB7QGxpbmsgUmV2ZXJzZU1hcHBpbmdUb29s\nfSBmb3IgZGVzY3JpcHRpb25zLjwvbGk+CiAqIDxsaT48aT4mbHQ7Y2xhc3Mg\nbmFtZSZndDsucmVuYW1lPC9pPjogT3ZlcnJpZGUgdGhlIHRvb2wtZ2VuZXJh\ndGVkIGNsYXNzIG5hbWUKICogd2l0aCB0aGUgZ2l2ZW4gdmFsdWUuIFVzZSBm\ndWxsIGNsYXNzIG5hbWVzLCBpbmNsdWRpbmcgcGFja2FnZS4gVXNlIGEKICog\ndmFsdWUgb2YgPGNvZGU+bm9uZTwvY29kZT4gdG8gcmVqZWN0IHRoZSBjbGFz\ncyBhbmQgbGVhdmUgdGhlCiAqIGNvcnJlc3BvbmRpbmcgdGFibGUgdW5tYXBw\nZWQuPC9saT4KICogPGxpPjxpPiZsdDt0YWJsZSBuYW1lJmd0Oy5jbGFzcy1u\nYW1lPC9pPjogQXNzaWduIHRoZSBnaXZlbiBmdWxseS1xdWFsaWZpZWQKICog\nY2xhc3MgbmFtZSB0byB0aGUgdHlwZSBjcmVhdGVkIGZyb20gdGhlIGdpdmVu\nIHRhYmxlLiBVc2UgYSB2YWx1ZSBvZgogKiA8Y29kZT5ub25lPC9jb2RlPiB0\nbyBwcmV2ZW50IG1hcHBpbmcgdGhpcyB0YWJsZS4gVGhpcyBwcm9wZXJ0eSBj\nYW4gYmUKICogdXNlZCBpbiBwbGFjZSBvZiB0aGUgPGNvZGU+cmVuYW1lPC9j\nb2RlPiBwcm9wZXJ0eS4KICogPGxpPjxpPiZsdDtjbGFzcyBuYW1lJmd0Oy5p\nZGVudGl0eTwvaT46IFNldCB0aGlzIHByb3BlcnR5IHRvCiAqIDxjb2RlPmRh\ndGFzdG9yZTwvY29kZT4sIDxjb2RlPmJ1aWx0aW48L2NvZGU+LCBvciB0aGUg\nZGVzaXJlZAogKiBmdWxseS1xdWFsaWZpZWQgYXBwbGljYXRpb24gaWRlbnRp\ndHkgY2xhc3MgbmFtZSB0byBvdmVycmlkZSB0aGUKICogcmV2ZXJzZSBtYXBw\naW5nIHRvb2wncyBkZWZhdWx0IGlkZW50aXR5IHNldHRpbmdzLiBJZiB0aGUg\nY2xhc3MgaGFzIGJlZW4KICogcmVuYW1lZCwgdXNlIHRoZSBuZXcgbmFtZS48\nL2xpPgogKiA8bGk+PGk+Jmx0O2NsYXNzIG5hbWUmZ3Q7LiZsdDtmaWVsZCBu\nYW1lJmd0Oy5yZW5hbWU8L2k+OiBPdmVycmlkZSB0aGUKICogdG9vbC1nZW5l\ncmF0ZWQgZmllbGQgbmFtZSB3aXRoIHRoZSBnaXZlbiB2YWx1ZS4gVXNlIHRo\nZSBmaWVsZCBvd25lcidzCiAqIGZ1bGwgY2xhc3MgbmFtZSBpbiB0aGUgcHJv\ncGVydHkga2V5LiBUaGUgcHJvcGVydHkgdmFsdWUgc2hvdWxkIGJlIHRoZQog\nKiBuZXcgZmllbGQgbmFtZSwgd2l0aG91dCB0aGUgcHJlY2VkaW5nIGNsYXNz\nIG5hbWUuIFVzZSBhIHZhbHVlIG9mCiAqIDxjb2RlPm5vbmU8L2NvZGU+IHRv\nIHJlamVjdCB0aGUgZ2VuZXJhdGVkIG1hcHBpbmcuPC9saT4KICogPGxpPjxp\nPiZsdDt0YWJsZSBuYW1lJmd0Oy4mbHQ7Y29sdW1uIG5hbWUmZ3Q7LmZpZWxk\nLW5hbWU8L2k+OiBBc3NpZ24gdGhlCiAqIGZpZWxkIG5hbWUgdG8gdXNlIGZv\nciB0aGUgbWFwcGluZyBvZiBhIHBhcnRpY3VsYXIgY29sdW1uLiBJZiB0aGlz\nIGlzCiAqIGEgbXVsdGktY29sdW1uIG1hcHBpbmcsIGFueSBvbmUgb2YgdGhl\nIGNvbHVtbnMgY2FuIGJlIHVzZWQuIFVzZSBhIHZhbHVlCiAqIG9mIDxjb2Rl\nPm5vbmU8L2NvZGU+IHRvIHByZXZlbnQgdGhlIGNvbHVtbiAoYW5kIGFzc29j\naWF0ZWQgY29sdW1ucykKICogZnJvbSBiZWluZyBtYXBwZWQuIFRoaXMgcHJv\ncGVydHkgY2FuIGJlIHVzZWQgaW4gcGxhY2Ugb2YgdGhlCiAqIDxjb2RlPnJl\nbmFtZTwvY29kZT4gcHJvcGVydHkuCiAqIDxsaT48aT4mbHQ7Y2xhc3MgbmFt\nZSZndDsuJmx0O2ZpZWxkIG5hbWUmZ3Q7LnR5cGU8L2k+OiBUaGUgY2xhc3Mg\nbmFtZSBvZgogKiB0aGUgdHlwZSB0byBnaXZlIHRoZSBuYW1lZCBmaWVsZC4g\nVXNlIGZ1bGwgY2xhc3MgbmFtZXMuIElmIHRoZSBmaWVsZAogKiBoYXMgYmVl\nbiByZW5hbWVkLCB1c2UgdGhlIG5ldyBuYW1lLjwvbGk+CiAqIDxsaT48aT4m\nbHQ7Y2xhc3MgbmFtZSZndDsuJmx0O2ZpZWxkIG5hbWUmZ3Q7LnZhbHVlPC9p\nPjogVGhlIGluaXRpYWwgdmFsdWUKICogZm9yIHRoZSBuYW1lZCBmaWVsZC4g\nVGhlIGdpdmVuIHN0cmluZyB3aWxsIGJlIHBsYWNlZCBhcy1pcyBpbiB0aGUK\nICogZ2VuZXJhdGVkIEphdmEgY29kZSwgc28gYmUgc3VyZSB0byBhZGQgcXVv\ndGVzIHRvIHN0cmluZ3MsIGV0Yy4gSWYgdGhlCiAqIGZpZWxkIGhhcyBiZWVu\nIHJlbmFtZWQsIHVzZSB0aGUgbmV3IG5hbWUuPC9saT4KICogPC91bD4gQWxs\nIGtleXMgYXJlIG9wdGlvbmFsOyBpZiBub3Qgc3BlY2lmaWVkLCB0aGUgY3Vz\ndG9taXplciBrZWVwcyB0aGUKICogZGVmYXVsdCB2YWx1ZSBnZW5lcmF0ZWQg\nYnkgdGhlIHJldmVyc2UgbWFwcGluZyB0b29sLgogKi8KcHVibGljIGNsYXNz\nIFByb3BlcnRpZXNSZXZlcnNlQ3VzdG9taXplcgogICAgaW1wbGVtZW50cyBS\nZXZlcnNlQ3VzdG9taXplciB7CgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwg\nTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6ZXIuZm9yUGFja2FnZQogICAgICAg\nIChQcm9wZXJ0aWVzUmV2ZXJzZUN1c3RvbWl6ZXIuY2xhc3MpOwoKICAgIHBy\nb3RlY3RlZCBSZXZlcnNlTWFwcGluZ1Rvb2wgdG9vbCA9IG51bGw7CiAgICBw\ncml2YXRlIFByb3BlcnRpZXMgX3Byb3BzID0gbnVsbDsKICAgIHByaXZhdGUg\nU2V0IF91bmFjY2Vzc2VkID0gbnVsbDsKCiAgICBwdWJsaWMgdm9pZCBzZXRD\nb25maWd1cmF0aW9uKFByb3BlcnRpZXMgcHJvcHMpIHsKICAgICAgICBfcHJv\ncHMgPSBwcm9wczsKICAgICAgICBfdW5hY2Nlc3NlZCA9IG5ldyBUcmVlU2V0\nKHByb3BzLmtleVNldCgpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRU\nb29sKFJldmVyc2VNYXBwaW5nVG9vbCB0b29sKSB7CiAgICAgICAgdGhpcy50\nb29sID0gdG9vbDsKICAgIH0KCiAgICBwdWJsaWMgaW50IGdldFRhYmxlVHlw\nZShUYWJsZSB0YWJsZSwgaW50IGRlZmF1bHRUeXBlKSB7CiAgICAgICAgU3Ry\naW5nIHR5cGUgPSBnZXRQcm9wZXJ0eSh0YWJsZS5nZXROYW1lKCkgKyAiLnRh\nYmxlLXR5cGUiKTsKICAgICAgICBpZiAodHlwZSA9PSBudWxsICYmIHRhYmxl\nLmdldFNjaGVtYU5hbWUoKSAhPSBudWxsKQogICAgICAgICAgICB0eXBlID0g\nZ2V0UHJvcGVydHkodGFibGUuZ2V0RnVsbE5hbWUoKSArICIudGFibGUtdHlw\nZSIpOwogICAgICAgIGlmICh0eXBlID09IG51bGwpCiAgICAgICAgICAgIHJl\ndHVybiBkZWZhdWx0VHlwZTsKICAgICAgICBpZiAoIm5vbmUiLmVxdWFscyh0\neXBlKSkKICAgICAgICAgICAgcmV0dXJuIFJldmVyc2VNYXBwaW5nVG9vbC5U\nQUJMRV9OT05FOwogICAgICAgIGlmICgiYmFzZSIuZXF1YWxzKHR5cGUpKQog\nICAgICAgICAgICByZXR1cm4gUmV2ZXJzZU1hcHBpbmdUb29sLlRBQkxFX0JB\nU0U7CiAgICAgICAgaWYgKCJzZWNvbmRhcnkiLmVxdWFscyh0eXBlKSkKICAg\nICAgICAgICAgcmV0dXJuIFJldmVyc2VNYXBwaW5nVG9vbC5UQUJMRV9TRUNP\nTkRBUlk7CiAgICAgICAgaWYgKCJzZWNvbmRhcnktb3V0ZXIiLmVxdWFscyh0\neXBlKSkKICAgICAgICAgICAgcmV0dXJuIFJldmVyc2VNYXBwaW5nVG9vbC5U\nQUJMRV9TRUNPTkRBUllfT1VURVI7CiAgICAgICAgaWYgKCJhc3NvY2lhdGlv\nbiIuZXF1YWxzKHR5cGUpKQogICAgICAgICAgICByZXR1cm4gUmV2ZXJzZU1h\ncHBpbmdUb29sLlRBQkxFX0FTU09DSUFUSU9OOwogICAgICAgIGlmICgic3Vi\nY2xhc3MiLmVxdWFscyh0eXBlKSkKICAgICAgICAgICAgcmV0dXJuIFJldmVy\nc2VNYXBwaW5nVG9vbC5UQUJMRV9TVUJDTEFTUzsKICAgICAgICB0aHJvdyBu\nZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKHRhYmxlLmdldE5hbWUoKSAr\nICIudGFibGUtdHlwZTogIgogICAgICAgICAgICArIHR5cGUpOwogICAgfQoK\nICAgIHB1YmxpYyBTdHJpbmcgZ2V0Q2xhc3NOYW1lKFRhYmxlIHRhYmxlLCBT\ndHJpbmcgZGVmYXVsdE5hbWUpIHsKICAgICAgICAvLyBjaGVjayBmb3IgYSBy\nZW5hbWUgcHJvcGVydHkgb3IgYSB0YWJsZS1uYW1pbmcgcHJvcGVydHkKICAg\nICAgICBTdHJpbmcgbmFtZSA9IGdldFByb3BlcnR5KGRlZmF1bHROYW1lICsg\nIi5yZW5hbWUiKTsKICAgICAgICBpZiAobmFtZSA9PSBudWxsKSB7CiAgICAg\nICAgICAgIG5hbWUgPSBnZXRQcm9wZXJ0eSh0YWJsZS5nZXROYW1lKCkgKyAi\nLmNsYXNzLW5hbWUiKTsKICAgICAgICAgICAgaWYgKG5hbWUgPT0gbnVsbCAm\nJiB0YWJsZS5nZXRTY2hlbWFOYW1lKCkgIT0gbnVsbCkKICAgICAgICAgICAg\nICAgIG5hbWUgPSBnZXRQcm9wZXJ0eSh0YWJsZS5nZXRGdWxsTmFtZSgpICsg\nIi5jbGFzcy1uYW1lIik7CiAgICAgICAgfQoKICAgICAgICBpZiAobmFtZSA9\nPSBudWxsKSB7CiAgICAgICAgICAgIGlmICh0b29sLmdldExvZygpLmlzVHJh\nY2VFbmFibGVkKCkpCiAgICAgICAgICAgICAgICB0b29sLmdldExvZygpLnRy\nYWNlKF9sb2MuZ2V0KCJjdXN0b20tbm8tY2xhc3MiLAogICAgICAgICAgICAg\nICAgICAgIGRlZmF1bHROYW1lLCB0YWJsZSkpOwogICAgICAgICAgICByZXR1\ncm4gZGVmYXVsdE5hbWU7CiAgICAgICAgfQoKICAgICAgICBpZiAoIm5vbmUi\nLmVxdWFscyhuYW1lKSkgewogICAgICAgICAgICBpZiAodG9vbC5nZXRMb2co\nKS5pc0luZm9FbmFibGVkKCkpCiAgICAgICAgICAgICAgICB0b29sLmdldExv\nZygpLmluZm8oX2xvYy5nZXQoImN1c3RvbS1ybS1jbGFzcyIsCiAgICAgICAg\nICAgICAgICAgICAgZGVmYXVsdE5hbWUsIHRhYmxlKSk7CiAgICAgICAgICAg\nIHJldHVybiBudWxsOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRvb2wuZ2V0\nTG9nKCkuaXNJbmZvRW5hYmxlZCgpKQogICAgICAgICAgICB0b29sLmdldExv\nZygpLmluZm8oX2xvYy5nZXQoImN1c3RvbS1jbGFzcyIsIGRlZmF1bHROYW1l\nLCBuYW1lKSk7CiAgICAgICAgcmV0dXJuIG5hbWU7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgY3VzdG9taXplKENsYXNzTWFwcGluZyBjbHMpIHsKICAgICAg\nICAvLyBjdXN0b21pemUgaWRlbnRpdHkgdHlwZQogICAgICAgIFN0cmluZyBp\nZCA9IGdldFByb3BlcnR5KGNscy5nZXREZXNjcmliZWRUeXBlKCkuZ2V0TmFt\nZSgpCiAgICAgICAgICAgICsgIi5pZGVudGl0eSIpOwogICAgICAgIGlmICgi\nZGF0YXN0b3JlIi5lcXVhbHMoaWQpKSB7CiAgICAgICAgICAgIGNscy5zZXRP\nYmplY3RJZFR5cGUobnVsbCwgZmFsc2UpOwogICAgICAgICAgICBjbHMuc2V0\nSWRlbnRpdHlUeXBlKENsYXNzTWFwcGluZy5JRF9EQVRBU1RPUkUpOwogICAg\nICAgIH0gZWxzZSBpZiAoImJ1aWx0aW4iLmVxdWFscyhpZCkpIHsKICAgICAg\nICAgICAgY2xzLnNldE9iamVjdElkVHlwZShudWxsLCBmYWxzZSk7CiAgICAg\nICAgICAgIGNscy5zZXRJZGVudGl0eVR5cGUoQ2xhc3NNYXBwaW5nLklEX0FQ\nUExJQ0FUSU9OKTsKICAgICAgICB9IGVsc2UgaWYgKGlkICE9IG51bGwpCiAg\nICAgICAgICAgIGNscy5zZXRPYmplY3RJZFR5cGUodG9vbC5nZW5lcmF0ZUNs\nYXNzKGlkLCBudWxsKSwgZmFsc2UpOwogICAgfQoKICAgIHB1YmxpYyBTdHJp\nbmcgZ2V0Q2xhc3NDb2RlKENsYXNzTWFwcGluZyBtYXBwaW5nKSB7CiAgICAg\nICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgcHVibGljIHZvaWQgY3VzdG9t\naXplKEZpZWxkTWFwcGluZyBmaWVsZCkgewogICAgICAgIFN0cmluZyB0eXBl\nID0gZ2V0UHJvcGVydHkoZmllbGQuZ2V0RnVsbE5hbWUoZmFsc2UpICsgIi50\neXBlIik7CiAgICAgICAgaWYgKHR5cGUgIT0gbnVsbCkKICAgICAgICAgICAg\nZmllbGQuc2V0RGVjbGFyZWRUeXBlKFN0cmluZ3MudG9DbGFzcyh0eXBlLCBu\ndWxsKSk7CiAgICB9CgogICAgcHVibGljIFN0cmluZyBnZXRGaWVsZE5hbWUo\nQ2xhc3NNYXBwaW5nIGRlYywgQ29sdW1uW10gY29scywgRm9yZWlnbktleSBm\naywKICAgICAgICBTdHJpbmcgZGVmYXVsdE5hbWUpIHsKICAgICAgICAvLyBj\naGVjayBmb3IgYSByZW5hbWUgcHJvcGVydHkgb3IgYSBjb2x1bW4tbmFtaW5n\nIHByb3BlcnR5CiAgICAgICAgU3RyaW5nIG5hbWUgPSBnZXRQcm9wZXJ0eShk\nZWMuZ2V0RGVzY3JpYmVkVHlwZSgpLmdldE5hbWUoKSArICIuIgogICAgICAg\nICAgICArIGRlZmF1bHROYW1lICsgIi5yZW5hbWUiKTsKICAgICAgICBmb3Ig\nKGludCBpID0gMDsgbmFtZSA9PSBudWxsICYmIGkgPCBjb2xzLmxlbmd0aDsg\naSsrKSB7CiAgICAgICAgICAgIG5hbWUgPSBnZXRQcm9wZXJ0eShjb2xzW2ld\nLmdldFRhYmxlTmFtZSgpICsgIi4iCiAgICAgICAgICAgICAgICArIGNvbHNb\naV0uZ2V0TmFtZSgpICsgIi4iICsgImZpZWxkLW5hbWUiKTsKICAgICAgICAg\nICAgaWYgKG5hbWUgPT0gbnVsbCAmJiBjb2xzW2ldLmdldFRhYmxlKCkuZ2V0\nU2NoZW1hTmFtZSgpICE9IG51bGwpCiAgICAgICAgICAgICAgICBuYW1lID0g\nZ2V0UHJvcGVydHkoY29sc1tpXS5nZXRUYWJsZSgpLmdldEZ1bGxOYW1lKCkK\nICAgICAgICAgICAgICAgICAgICArICIuIiArIGNvbHNbaV0uZ2V0TmFtZSgp\nICsgIi4iICsgImZpZWxkLW5hbWUiKTsKICAgICAgICB9CgogICAgICAgIGlm\nIChuYW1lID09IG51bGwpIHsKICAgICAgICAgICAgaWYgKHRvb2wuZ2V0TG9n\nKCkuaXNUcmFjZUVuYWJsZWQoKSkKICAgICAgICAgICAgICAgIHRvb2wuZ2V0\nTG9nKCkudHJhY2UoX2xvYy5nZXQoImN1c3RvbS1uby1maWVsZCIsIGRlZmF1\nbHROYW1lLAogICAgICAgICAgICAgICAgICAgIGRlYykpOwogICAgICAgICAg\nICByZXR1cm4gZGVmYXVsdE5hbWU7CiAgICAgICAgfQoKICAgICAgICBpZiAo\nIm5vbmUiLmVxdWFscyhuYW1lKSkgewogICAgICAgICAgICBpZiAodG9vbC5n\nZXRMb2coKS5pc0luZm9FbmFibGVkKCkpCiAgICAgICAgICAgICAgICB0b29s\nLmdldExvZygpLmluZm8oX2xvYy5nZXQoImN1c3RvbS1ybS1maWVsZCIsIGRl\nZmF1bHROYW1lLAogICAgICAgICAgICAgICAgICAgIGRlYykpOwogICAgICAg\nICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CgogICAgICAgIGlmICh0b29s\nLmdldExvZygpLmlzSW5mb0VuYWJsZWQoKSkKICAgICAgICAgICAgdG9vbC5n\nZXRMb2coKS5pbmZvKF9sb2MuZ2V0KCJjdXN0b20tZmllbGQiLCBkZWZhdWx0\nTmFtZSwgZGVjLAogICAgICAgICAgICAgICAgbmFtZSkpOwogICAgICAgIHJl\ndHVybiBuYW1lOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgZ2V0SW5pdGlh\nbFZhbHVlKEZpZWxkTWFwcGluZyBmaWVsZCkgewogICAgICAgIHJldHVybiBn\nZXRQcm9wZXJ0eShmaWVsZC5nZXRGdWxsTmFtZShmYWxzZSkgKyAiLnZhbHVl\nIik7CiAgICB9CgogICAgcHVibGljIFN0cmluZyBnZXREZWNsYXJhdGlvbihG\naWVsZE1hcHBpbmcgZmllbGQpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAg\nIH0KCiAgICBwdWJsaWMgU3RyaW5nIGdldEZpZWxkQ29kZShGaWVsZE1hcHBp\nbmcgZmllbGQpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICBw\ndWJsaWMgYm9vbGVhbiB1bm1hcHBlZFRhYmxlKFRhYmxlIHRhYmxlKSB7CiAg\nICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGNs\nb3NlKCkgewogICAgICAgIGlmICghX3VuYWNjZXNzZWQuaXNFbXB0eSgpICYm\nIHRvb2wuZ2V0TG9nKCkuaXNUcmFjZUVuYWJsZWQoKSkKICAgICAgICAgICAg\ndG9vbC5nZXRMb2coKS50cmFjZShfbG9jLmdldCgiY3VzdG9tLXVudXNlZC1w\ncm9wcyIsIF91bmFjY2Vzc2VkKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBS\nZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIGZvciB0aGUgZ2l2ZW4ga2V5LCBv\nciBudWxsIGlmIG5vbmUuCiAgICAgKi8KICAgIHByb3RlY3RlZCBTdHJpbmcg\nZ2V0UHJvcGVydHkoU3RyaW5nIGtleSkgewogICAgICAgIFN0cmluZyB2YWwg\nPSBTdHJpbmdVdGlscy50cmltVG9OdWxsKF9wcm9wcy5nZXRQcm9wZXJ0eShr\nZXkpKTsKICAgICAgICBfdW5hY2Nlc3NlZC5yZW1vdmUoa2V5KTsKICAgICAg\nICByZXR1cm4gdmFsOwogICAgfQp9Cg==\n","encoding":"base64"}

