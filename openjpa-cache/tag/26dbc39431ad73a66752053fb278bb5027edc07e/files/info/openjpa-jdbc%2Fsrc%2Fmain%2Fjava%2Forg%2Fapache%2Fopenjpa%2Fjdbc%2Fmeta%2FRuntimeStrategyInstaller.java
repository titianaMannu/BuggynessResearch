{"sha":"425ed86cb004e716e303912f94d0e756b1dc6af1","node_id":"MDQ6QmxvYjIwNjM2NDo0MjVlZDg2Y2IwMDRlNzE2ZTMwMzkxMmY5NGQwZTc1NmIxZGM2YWYx","size":3572,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/425ed86cb004e716e303912f94d0e756b1dc6af1","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhOwoKaW1wb3J0\nIGphdmEubGFuZy5yZWZsZWN0Lk1vZGlmaWVyOwoKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLm1ldGEuc3RyYXRzLk5vbmVGaWVsZFN0cmF0ZWd5\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkxvY2FsaXpl\ncjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLk1ldGFEYXRhRXhj\nZXB0aW9uOwoKLyoqCiAqIEluc3RhbGxlciB0aGF0IGF0dGVtcHRzIHRvIHVz\nZSB0aGUgZ2l2ZW4gbWFwcGluZyBpbmZvcm1hdGlvbiwgYW5kCiAqIGZhaWxz\nIGlmIGl0IGRvZXMgbm90IHdvcmsuCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRl\nCiAqIEBub2phdmFkb2MKICogQHNpbmNlIDAuNC4wCiAqLwpwdWJsaWMgY2xh\nc3MgUnVudGltZVN0cmF0ZWd5SW5zdGFsbGVyCiAgICBleHRlbmRzIFN0cmF0\nZWd5SW5zdGFsbGVyIHsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2Nh\nbGl6ZXIgX2xvYyA9IExvY2FsaXplci5mb3JQYWNrYWdlCiAgICAgICAgKFJ1\nbnRpbWVTdHJhdGVneUluc3RhbGxlci5jbGFzcyk7CgogICAgLyoqCiAgICAg\nKiBDb25zdHJ1Y3Rvcjsgc3VwcGx5IGNvbmZpZ3VyYXRpb24uCiAgICAgKi8K\nICAgIHB1YmxpYyBSdW50aW1lU3RyYXRlZ3lJbnN0YWxsZXIoTWFwcGluZ1Jl\ncG9zaXRvcnkgcmVwb3MpIHsKICAgICAgICBzdXBlcihyZXBvcyk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgaW5zdGFsbFN0cmF0ZWd5KENsYXNzTWFwcGlu\nZyBjbHMpIHsKICAgICAgICBpZiAoKGNscy5nZXRTb3VyY2VNb2RlKCkgJiBj\nbHMuTU9ERV9NQVBQSU5HKSA9PSAwKQogICAgICAgICAgICB0aHJvdyBuZXcg\nTWV0YURhdGFFeGNlcHRpb24oX2xvYy5nZXQoIm5vLW1hcHBpbmciLCBjbHMp\nKTsKCiAgICAgICAgQ2xhc3NTdHJhdGVneSBzdHJhdCA9IHJlcG9zLm5hbWVk\nU3RyYXRlZ3koY2xzKTsKICAgICAgICBpZiAoc3RyYXQgPT0gbnVsbCkKICAg\nICAgICAgICAgc3RyYXQgPSByZXBvcy5kZWZhdWx0U3RyYXRlZ3koY2xzLCBm\nYWxzZSk7CiAgICAgICAgY2xzLnNldFN0cmF0ZWd5KHN0cmF0LCBCb29sZWFu\nLkZBTFNFKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBpbnN0YWxsU3RyYXRl\nZ3koRmllbGRNYXBwaW5nIGZpZWxkKSB7CiAgICAgICAgRmllbGRTdHJhdGVn\neSBzdHJhdGVneSA9IHJlcG9zLm5hbWVkU3RyYXRlZ3koZmllbGQsIHRydWUp\nOwogICAgICAgIGlmIChzdHJhdGVneSA9PSBudWxsKSB7CiAgICAgICAgICAg\nIHRyeSB7CiAgICAgICAgICAgICAgICBzdHJhdGVneSA9IHJlcG9zLmRlZmF1\nbHRTdHJhdGVneShmaWVsZCwgdHJ1ZSwgZmFsc2UpOwogICAgICAgICAgICB9\nIGNhdGNoIChNZXRhRGF0YUV4Y2VwdGlvbiBtZGUpIHsKICAgICAgICAgICAg\nICAgIC8vIGlmIHRoZSBwYXJlbnQgY2xhc3MgaXMgYWJzdHJhY3QgYW5kIGZp\nZWxkIGlzIHVubWFwcGVkLAogICAgICAgICAgICAgICAgLy8gYWxsb3cgaXQg\ndG8gcGFzcyAoYXNzdW1lIHN1YmNsYXNzZXMgbWFwIHRoZSBmaWVsZCkKICAg\nICAgICAgICAgICAgIENsYXNzIGNscyA9IGZpZWxkLmdldERlZmluaW5nTWV0\nYURhdGEoKS5nZXREZXNjcmliZWRUeXBlKCk7CiAgICAgICAgICAgICAgICBp\nZiAoIU1vZGlmaWVyLmlzQWJzdHJhY3QoY2xzLmdldE1vZGlmaWVycygpKQog\nICAgICAgICAgICAgICAgICAgIHx8IGZpZWxkLmdldE1hcHBlZEJ5KCkgIT0g\nbnVsbAogICAgICAgICAgICAgICAgICAgIHx8IGZpZWxkLmdldE1hcHBpbmdJ\nbmZvKCkuaGFzU2NoZW1hQ29tcG9uZW50cygpCiAgICAgICAgICAgICAgICAg\nICAgfHwgZmllbGQuZ2V0VmFsdWVJbmZvKCkuaGFzU2NoZW1hQ29tcG9uZW50\ncygpCiAgICAgICAgICAgICAgICAgICAgfHwgZmllbGQuZ2V0RWxlbWVudE1h\ncHBpbmcoKS5nZXRWYWx1ZUluZm8oKS4KICAgICAgICAgICAgICAgICAgICBo\nYXNTY2hlbWFDb21wb25lbnRzKCkKICAgICAgICAgICAgICAgICAgICB8fCBm\naWVsZC5nZXRLZXlNYXBwaW5nKCkuZ2V0VmFsdWVJbmZvKCkuCiAgICAgICAg\nICAgICAgICAgICAgaGFzU2NoZW1hQ29tcG9uZW50cygpKQogICAgICAgICAg\nICAgICAgICAgIHRocm93IG1kZTsKCiAgICAgICAgICAgICAgICBzdHJhdGVn\neSA9IE5vbmVGaWVsZFN0cmF0ZWd5LmdldEluc3RhbmNlKCk7CiAgICAgICAg\nICAgIH0KICAgICAgICB9CiAgICAgICAgZmllbGQuc2V0U3RyYXRlZ3koc3Ry\nYXRlZ3ksIEJvb2xlYW4uRkFMU0UpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIGluc3RhbGxTdHJhdGVneShWZXJzaW9uIHZlcnNpb24pIHsKICAgICAgICBW\nZXJzaW9uU3RyYXRlZ3kgc3RyYXQgPSByZXBvcy5uYW1lZFN0cmF0ZWd5KHZl\ncnNpb24pOwogICAgICAgIGlmIChzdHJhdCA9PSBudWxsKQogICAgICAgICAg\nICBzdHJhdCA9IHJlcG9zLmRlZmF1bHRTdHJhdGVneSh2ZXJzaW9uLCBmYWxz\nZSk7CiAgICAgICAgdmVyc2lvbi5zZXRTdHJhdGVneShzdHJhdCwgQm9vbGVh\nbi5GQUxTRSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgaW5zdGFsbFN0cmF0\nZWd5KERpc2NyaW1pbmF0b3IgZGlzY3JpbSkgewogICAgICAgIERpc2NyaW1p\nbmF0b3JTdHJhdGVneSBzdHJhdCA9IHJlcG9zLm5hbWVkU3RyYXRlZ3koZGlz\nY3JpbSk7CiAgICAgICAgaWYgKHN0cmF0ID09IG51bGwpCiAgICAgICAgICAg\nIHN0cmF0ID0gcmVwb3MuZGVmYXVsdFN0cmF0ZWd5KGRpc2NyaW0sIGZhbHNl\nKTsKICAgICAgICBkaXNjcmltLnNldFN0cmF0ZWd5KHN0cmF0LCBCb29sZWFu\nLkZBTFNFKTsKICAgIH0KfQo=\n","encoding":"base64"}

