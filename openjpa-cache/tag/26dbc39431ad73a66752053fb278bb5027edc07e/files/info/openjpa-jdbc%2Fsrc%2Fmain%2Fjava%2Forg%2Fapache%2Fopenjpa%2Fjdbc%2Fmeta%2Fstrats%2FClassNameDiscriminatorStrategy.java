{"sha":"2b9cac70295c76a4e213cfcc668ce98bbd80f1a4","node_id":"MDQ6QmxvYjIwNjM2NDoyYjljYWM3MDI5NWM3NmE0ZTIxM2NmY2M2NjhjZTk4YmJkODBmMWE0","size":4384,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/2b9cac70295c76a4e213cfcc668ce98bbd80f1a4","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLnN0cmF0czsK\nCmltcG9ydCBqYXZhLnNxbC5Db25uZWN0aW9uOwppbXBvcnQgamF2YS5zcWwu\nUHJlcGFyZWRTdGF0ZW1lbnQ7CmltcG9ydCBqYXZhLnNxbC5SZXN1bHRTZXQ7\nCmltcG9ydCBqYXZhLnNxbC5TUUxFeGNlcHRpb247CgppbXBvcnQgb3JnLmFw\nYWNoZS5jb21tb25zLmxhbmcuU3RyaW5nVXRpbHM7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuSkRCQ1N0b3JlOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5DbGFzc01hcHBpbmc7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuQ29sdW1uOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLkRCRGljdGlvbmFyeTsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5TUUxCdWZmZXI7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmxvZy5Mb2c7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuSmF2YVR5cGVzOwoKLyoqCiAq\nIFN0b3JlcyB0aGUgY2xhc3MgbmFtZSBhbG9uZyB3aXRoIGVhY2ggZGF0YWJh\nc2Ugb2JqZWN0IHJlY29yZC4KICoKICogQGF1dGhvciBBYmUgV2hpdGUKICov\nCnB1YmxpYyBjbGFzcyBDbGFzc05hbWVEaXNjcmltaW5hdG9yU3RyYXRlZ3kK\nICAgIGV4dGVuZHMgSW5WYWx1ZURpc2NyaW1pbmF0b3JTdHJhdGVneSB7Cgog\nICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9jYWxpemVyIF9sb2MgPSBMb2Nh\nbGl6ZXIuZm9yUGFja2FnZQogICAgICAgIChDbGFzc05hbWVEaXNjcmltaW5h\ndG9yU3RyYXRlZ3kuY2xhc3MpOwoKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwg\nU3RyaW5nIEFMSUFTID0gImNsYXNzLW5hbWUiOwoKICAgIHB1YmxpYyBTdHJp\nbmcgZ2V0QWxpYXMoKSB7CiAgICAgICAgcmV0dXJuIEFMSUFTOwogICAgfQoK\nICAgIHByb3RlY3RlZCBpbnQgZ2V0SmF2YVR5cGUoKSB7CiAgICAgICAgcmV0\ndXJuIEphdmFUeXBlcy5TVFJJTkc7CiAgICB9CgogICAgcHJvdGVjdGVkIE9i\namVjdCBnZXREaXNjcmltaW5hdG9yVmFsdWUoQ2xhc3NNYXBwaW5nIGNscykg\newogICAgICAgIHJldHVybiBjbHMuZ2V0RGVzY3JpYmVkVHlwZSgpLmdldE5h\nbWUoKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgQ2xhc3MgZ2V0Q2xhc3MoT2Jq\nZWN0IHZhbCwgSkRCQ1N0b3JlIHN0b3JlKQogICAgICAgIHRocm93cyBDbGFz\nc05vdEZvdW5kRXhjZXB0aW9uIHsKICAgICAgICBDbGFzc0xvYWRlciBsb2Fk\nZXIgPSBnZXRDbGFzc0xvYWRlcihzdG9yZSk7CiAgICAgICAgcmV0dXJuIENs\nYXNzLmZvck5hbWUoKFN0cmluZykgdmFsLCB0cnVlLCBsb2FkZXIpOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIGxvYWRTdWJjbGFzc2VzKEpEQkNTdG9yZSBz\ndG9yZSkKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uLCBDbGFzc05vdEZv\ndW5kRXhjZXB0aW9uIHsKICAgICAgICBpZiAoaXNGaW5hbCkgewogICAgICAg\nICAgICBkaXNjLnNldFN1YmNsYXNzZXNMb2FkZWQodHJ1ZSk7CiAgICAgICAg\nICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIENvbHVtbiBjb2wgPSBk\naXNjLmdldENvbHVtbnMoKVswXTsKICAgICAgICBEQkRpY3Rpb25hcnkgZGlj\ndCA9IHN0b3JlLmdldERCRGljdGlvbmFyeSgpOwogICAgICAgIFNRTEJ1ZmZl\nciBzZWxlY3QgPSBkaWN0LnRvU2VsZWN0KG5ldyBTUUxCdWZmZXIoZGljdCku\nYXBwZW5kKGNvbCksCiAgICAgICAgICAgIHN0b3JlLmdldEZldGNoQ29uZmln\ndXJhdGlvbigpLAogICAgICAgICAgICBuZXcgU1FMQnVmZmVyKGRpY3QpLmFw\ncGVuZChjb2wuZ2V0VGFibGUoKSksIG51bGwsIG51bGwsCiAgICAgICAgICAg\nIG51bGwsIG51bGwsIHRydWUsIGZhbHNlLCAwLCBMb25nLk1BWF9WQUxVRSk7\nCgogICAgICAgIExvZyBsb2cgPSBkaXNjLmdldE1hcHBpbmdSZXBvc2l0b3J5\nKCkuZ2V0TG9nKCk7CiAgICAgICAgaWYgKGxvZy5pc1RyYWNlRW5hYmxlZCgp\nKQogICAgICAgICAgICBsb2cudHJhY2UoX2xvYy5nZXQoImxvYWQtc3VicyIs\nIGNvbC5nZXRUYWJsZSgpLmdldEZ1bGxOYW1lKCkpKTsKCiAgICAgICAgQ2xh\nc3NMb2FkZXIgbG9hZGVyID0gZ2V0Q2xhc3NMb2FkZXIoc3RvcmUpOwogICAg\nICAgIENvbm5lY3Rpb24gY29ubiA9IHN0b3JlLmdldENvbm5lY3Rpb24oKTsK\nICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG1udCA9IG51bGw7CiAgICAg\nICAgUmVzdWx0U2V0IHJzID0gbnVsbDsKICAgICAgICB0cnkgewogICAgICAg\nICAgICBzdG1udCA9IHNlbGVjdC5wcmVwYXJlU3RhdGVtZW50KGNvbm4pOwog\nICAgICAgICAgICBycyA9IHN0bW50LmV4ZWN1dGVRdWVyeSgpOwogICAgICAg\nICAgICBTdHJpbmcgY2xhc3NOYW1lOwogICAgICAgICAgICB3aGlsZSAocnMu\nbmV4dCgpKSB7CiAgICAgICAgICAgICAgICBjbGFzc05hbWUgPSBkaWN0Lmdl\ndFN0cmluZyhycywgMSk7CiAgICAgICAgICAgICAgICBpZiAoU3RyaW5nVXRp\nbHMuaXNFbXB0eShjbGFzc05hbWUpKQogICAgICAgICAgICAgICAgICAgIHRo\ncm93IG5ldyBDbGFzc05vdEZvdW5kRXhjZXB0aW9uKF9sb2MuZ2V0KCJuby1j\nbGFzcy1uYW1lIiwKICAgICAgICAgICAgICAgICAgICAgICAgZGlzYy5nZXRD\nbGFzc01hcHBpbmcoKSwgY29sKS5nZXRNZXNzYWdlKCkpOwogICAgICAgICAg\nICAgICAgQ2xhc3MuZm9yTmFtZShjbGFzc05hbWUsIHRydWUsIGxvYWRlcik7\nCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZGlzYy5zZXRTdWJjbGFzc2Vz\nTG9hZGVkKHRydWUpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAg\nIGlmIChycyAhPSBudWxsKQogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgICAgICAgICBycy5jbG9zZSgpOwogICAgICAgICAgICAgICAgfSBj\nYXRjaCAoU1FMRXhjZXB0aW9uIHNlKSB7CiAgICAgICAgICAgICAgICB9CiAg\nICAgICAgICAgIGlmIChzdG1udCAhPSBudWxsKQogICAgICAgICAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgICAgICAgICBzdG1udC5jbG9zZSgpOwogICAg\nICAgICAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIHNlKSB7CiAgICAg\nICAgICAgICAgICB9CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAg\nICBjb25uLmNsb3NlKCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2Vw\ndGlvbiBzZSkgewogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAg\nIC8qKgogICAgICogUmV0dXJuIHRoZSBjbGFzcyBsb2FkZXIgdG8gdXNlIGZv\nciBsb2FkaW5nIGNsYXNzIG5hbWVzLgogICAgICovCiAgICBwcml2YXRlIENs\nYXNzTG9hZGVyIGdldENsYXNzTG9hZGVyKEpEQkNTdG9yZSBzdG9yZSkgewog\nICAgICAgIHJldHVybiBzdG9yZS5nZXRDb25maWd1cmF0aW9uKCkuZ2V0Q2xh\nc3NSZXNvbHZlckluc3RhbmNlKCkuCiAgICAgICAgICAgIGdldENsYXNzTG9h\nZGVyKGRpc2MuZ2V0Q2xhc3NNYXBwaW5nKCkuZ2V0RGVzY3JpYmVkVHlwZSgp\nLAogICAgICAgICAgICAgICAgc3RvcmUuZ2V0Q29udGV4dCgpLmdldENsYXNz\nTG9hZGVyKCkpOwogICAgfQp9Cg==\n","encoding":"base64"}

