{"sha":"617ac6c064a8e106c2f3406dfe0e896caa8b0ca0","node_id":"MDQ6QmxvYjIwNjM2NDo2MTdhYzZjMDY0YThlMTA2YzJmMzQwNmRmZTBlODk2Y2FhOGIwY2Ew","size":4954,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/617ac6c064a8e106c2f3406dfe0e896caa8b0ca0","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLnN0cmF0czsK\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLkNsYXNzTWFw\ncGluZzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1ldGEuRmll\nbGRNYXBwaW5nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0\nYS5WYWx1ZU1hcHBpbmc7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5zY2hlbWEuQ29sdW1uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpk\nYmMuc2NoZW1hLkZvcmVpZ25LZXk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5zcWwuREJEaWN0aW9uYXJ5OwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmpkYmMuc3FsLkpvaW5zOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmpkYmMuc3FsLlNRTEJ1ZmZlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLnNxbC5TZWxlY3Q7CgovKioKICogQW4gYWJzdHJhY3QgY29u\ndGFpbmVyIG1hcHBpbmcgdGhhdCBoYW5kbGVzIHRyYXZlcnNpbmcgdGhlCiAq\nIGpvaW4gdG8gZXhhbWluZSB0aGUgc2l6ZSBvZiB0aGUgcmVsYXRpb24uCiAq\nCiAqIEBhdXRob3IgTWFyYyBQcnVkJ2hvbW1lYXV4CiAqLwpwdWJsaWMgYWJz\ndHJhY3QgY2xhc3MgQ29udGFpbmVyRmllbGRTdHJhdGVneQogICAgZXh0ZW5k\ncyBBYnN0cmFjdEZpZWxkU3RyYXRlZ3kgewoKICAgIC8qKgogICAgICogUmV0\ndXJuIGFsbCBpbmRlcGVuZGVudCBtYXBwaW5ncyB0byB3aGljaCB0aGlzIHN0\ncmF0ZWd5IG11c3Qgam9pbiBpbgogICAgICogb3JkZXIgdG8gYWNjZXNzIGNv\nbGxlY3Rpb24gZWxlbWVudHMsIG9yIGVtcHR5IGFycmF5IGlmIG5vbmUuCiAg\nICAgKgogICAgICogQHBhcmFtIHRyYXZlcnNlIHdoZXRoZXIgd2UncmUgdHJh\ndmVyc2luZyB0aHJvdWdoIHRvIHRoZSByZWxhdGVkIHR5cGUKICAgICAqIEBz\nZWUgVmFsdWVNYXBwaW5nI2dldEluZGVwZW5kZW50VHlwZU1hcHBpbmdzCiAg\nICAgKiBAc2VlIENsYXNzTWFwcGluZyNFTVBUWV9NQVBQSU5HUwogICAgICov\nCiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgQ2xhc3NNYXBwaW5nW10gZ2V0SW5k\nZXBlbmRlbnRFbGVtZW50TWFwcGluZ3MKICAgICAgICAoYm9vbGVhbiB0cmF2\nZXJzZSk7CgogICAgcHVibGljIHZvaWQgYXBwZW5kSXNFbXB0eShTUUxCdWZm\nZXIgc3FsLCBTZWxlY3Qgc2VsLCBKb2lucyBqb2lucykgewogICAgICAgIHRl\nc3RFbXB0eShzcWwsIHNlbCwgam9pbnMsIHRydWUpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIGFwcGVuZElzTm90RW1wdHkoU1FMQnVmZmVyIHNxbCwgU2Vs\nZWN0IHNlbCwgSm9pbnMgam9pbnMpIHsKICAgICAgICB0ZXN0RW1wdHkoc3Fs\nLCBzZWwsIGpvaW5zLCBmYWxzZSk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nYXBwZW5kSXNOdWxsKFNRTEJ1ZmZlciBzcWwsIFNlbGVjdCBzZWwsIEpvaW5z\nIGpvaW5zKSB7CiAgICAgICAgdGVzdEVtcHR5KHNxbCwgc2VsLCBqb2lucywg\ndHJ1ZSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgYXBwZW5kSXNOb3ROdWxs\nKFNRTEJ1ZmZlciBzcWwsIFNlbGVjdCBzZWwsIEpvaW5zIGpvaW5zKSB7CiAg\nICAgICAgdGVzdEVtcHR5KHNxbCwgc2VsLCBqb2lucywgZmFsc2UpOwogICAg\nfQoKICAgIC8qKgogICAgICogQXBwZW5kcyBTUUwgZm9yIGEgc3ViLXNlbGVj\ndCB0ZXN0aW5nIHdoZXRoZXIgdGhlIGNvbnRhaW5lciBpcyBlbXB0eS4KICAg\nICAqLwogICAgcHJpdmF0ZSB2b2lkIHRlc3RFbXB0eShTUUxCdWZmZXIgc3Fs\nLCBTZWxlY3Qgc2VsLCBKb2lucyBqb2lucywKICAgICAgICBib29sZWFuIGVt\ncHR5KSB7CiAgICAgICAgaWYgKGVtcHR5KQogICAgICAgICAgICBzcWwuYXBw\nZW5kKCIwID0gIik7CiAgICAgICAgZWxzZQogICAgICAgICAgICBzcWwuYXBw\nZW5kKCIwIDwgIik7CgogICAgICAgIGFwcGVuZFNpemUoc3FsLCBzZWwsIGpv\naW5zKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgRm9yZWlnbktl\neSBnZXRKb2luRm9yZWlnbktleSgpOwoKICAgIHB1YmxpYyB2b2lkIGFwcGVu\nZFNpemUoU1FMQnVmZmVyIHNxbCwgU2VsZWN0IHNlbCwgSm9pbnMgam9pbnMp\nIHsKICAgICAgICBEQkRpY3Rpb25hcnkgZGljdCA9IGZpZWxkLmdldE1hcHBp\nbmdSZXBvc2l0b3J5KCkuZ2V0REJEaWN0aW9uYXJ5KCk7CiAgICAgICAgZGlj\ndC5hc3NlcnRTdXBwb3J0KGRpY3Quc3VwcG9ydHNTdWJzZWxlY3QsICJTdXBw\nb3J0c1N1YnNlbGVjdCIpOwoKICAgICAgICBDbGFzc01hcHBpbmdbXSBpbmQg\nPSBnZXRJbmRlcGVuZGVudEVsZW1lbnRNYXBwaW5ncyhmYWxzZSk7CiAgICAg\nICAgaWYgKGluZCAhPSBudWxsICYmIGluZC5sZW5ndGggPiAxKQogICAgICAg\nICAgICB0aHJvdyBSZWxhdGlvblN0cmF0ZWdpZXMudW5qb2luYWJsZShmaWVs\nZCk7CgogICAgICAgIEZvcmVpZ25LZXkgZmsgPSBnZXRKb2luRm9yZWlnbktl\neSgpOwogICAgICAgIGFwcGVuZEpvaW5Db3VudChzcWwsIHNlbCwgam9pbnMs\nIGRpY3QsIGZpZWxkLCBmayk7CiAgICB9CgogICAgcHJvdGVjdGVkIHN0YXRp\nYyB2b2lkIGFwcGVuZEpvaW5Db3VudChTUUxCdWZmZXIgc3FsLCBTZWxlY3Qg\nc2VsLAogICAgICAgIEpvaW5zIGpvaW5zLCBEQkRpY3Rpb25hcnkgZGljdCwg\nRmllbGRNYXBwaW5nIGZpZWxkLCBGb3JlaWduS2V5IGZrKSB7CiAgICAgICAg\nU3RyaW5nIGZ1bGxUYWJsZSA9IGRpY3QuZ2V0RnVsbE5hbWUoZmsuZ2V0VGFi\nbGUoKSwgZmFsc2UpOwogICAgICAgIHNxbC5hcHBlbmQoIihTRUxFQ1QgQ09V\nTlQoKikgRlJPTSAiKS5hcHBlbmQoZnVsbFRhYmxlKS4KICAgICAgICAgICAg\nYXBwZW5kKCIgV0hFUkUgIik7CiAgICAgICAgYXBwZW5kVW5hbGlhc2VkSm9p\nbihzcWwsIHNlbCwgam9pbnMsIGRpY3QsIGZpZWxkLCBmayk7CiAgICAgICAg\nc3FsLmFwcGVuZCgiKSIpOwogICAgfQoKICAgIHB1YmxpYyBzdGF0aWMgdm9p\nZCBhcHBlbmRVbmFsaWFzZWRKb2luKFNRTEJ1ZmZlciBzcWwsIFNlbGVjdCBz\nZWwsCiAgICAgICAgSm9pbnMgam9pbnMsIERCRGljdGlvbmFyeSBkaWN0LCBG\naWVsZE1hcHBpbmcgZmllbGQsIEZvcmVpZ25LZXkgZmspIHsKICAgICAgICBT\ndHJpbmcgZnVsbFRhYmxlID0gZGljdC5nZXRGdWxsTmFtZShmay5nZXRUYWJs\nZSgpLCBmYWxzZSk7CgogICAgICAgIENvbHVtbltdIGNvbHMgPSBmay5nZXRD\nb2x1bW5zKCk7CiAgICAgICAgQ29sdW1uW10gcGtzID0gZmsuZ2V0UHJpbWFy\neUtleUNvbHVtbnMoKTsKICAgICAgICBpbnQgY291bnQgPSAwOwogICAgICAg\nIGZvciAoaW50IGkgPSAwOyBpIDwgY29scy5sZW5ndGg7IGkrKywgY291bnQr\nKykgewogICAgICAgICAgICBpZiAoY291bnQgPiAwKQogICAgICAgICAgICAg\nICAgc3FsLmFwcGVuZCgiIEFORCAiKTsKICAgICAgICAgICAgc3FsLmFwcGVu\nZChmdWxsVGFibGUpLmFwcGVuZCgiLiIpLmFwcGVuZChjb2xzW2ldKS5hcHBl\nbmQoIiA9ICIpLgogICAgICAgICAgICAgICAgYXBwZW5kKHNlbC5nZXRDb2x1\nbW5BbGlhcyhwa3NbaV0sIGpvaW5zKSk7CiAgICAgICAgfQoKICAgICAgICBj\nb2xzID0gZmsuZ2V0Q29uc3RhbnRDb2x1bW5zKCk7CiAgICAgICAgZm9yIChp\nbnQgaSA9IDA7IGkgPCBjb2xzLmxlbmd0aDsgaSsrLCBjb3VudCsrKSB7CiAg\nICAgICAgICAgIGlmIChjb3VudCA+IDApCiAgICAgICAgICAgICAgICBzcWwu\nYXBwZW5kKCIgQU5EICIpOwogICAgICAgICAgICBzcWwuYXBwZW5kKGZ1bGxU\nYWJsZSkuYXBwZW5kKCIuIikuYXBwZW5kKGNvbHNbaV0pLmFwcGVuZCgiID0g\nIikuCiAgICAgICAgICAgICAgICBhcHBlbmRWYWx1ZShmay5nZXRDb25zdGFu\ndChjb2xzW2ldKSwgY29sc1tpXSk7CiAgICAgICAgfQoKICAgICAgICBwa3Mg\nPSBmay5nZXRDb25zdGFudFByaW1hcnlLZXlDb2x1bW5zKCk7CiAgICAgICAg\nZm9yIChpbnQgaSA9IDA7IGkgPCBwa3MubGVuZ3RoOyBpKyssIGNvdW50Kysp\nIHsKICAgICAgICAgICAgaWYgKGNvdW50ID4gMCkKICAgICAgICAgICAgICAg\nIHNxbC5hcHBlbmQoIiBBTkQgIik7CiAgICAgICAgICAgIHNxbC5hcHBlbmQo\nc2VsLmdldENvbHVtbkFsaWFzKHBrc1tpXSwgam9pbnMpKS5hcHBlbmQoIiA9\nICIpLgogICAgICAgICAgICAgICAgYXBwZW5kVmFsdWUoZmsuZ2V0UHJpbWFy\neUtleUNvbnN0YW50KHBrc1tpXSksIHBrc1tpXSk7CiAgICAgICAgfQogICAg\nfQp9Cg==\n","encoding":"base64"}

