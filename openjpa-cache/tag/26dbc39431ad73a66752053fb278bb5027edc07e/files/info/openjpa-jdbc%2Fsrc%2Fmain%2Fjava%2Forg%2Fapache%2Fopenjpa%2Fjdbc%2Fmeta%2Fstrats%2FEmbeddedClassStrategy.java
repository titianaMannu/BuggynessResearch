{"sha":"f46c5454f87a24c5aac32ef570f0a5d8036bf41f","node_id":"MDQ6QmxvYjIwNjM2NDpmNDZjNTQ1NGY4N2EyNGM1YWFjMzJlZjU3MGYwYTVkODAzNmJmNDFm","size":3569,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/f46c5454f87a24c5aac32ef570f0a5d8036bf41f","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLnN0cmF0czsK\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLkNsYXNzTWFw\ncGluZzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1ldGEuQ2xh\nc3NNYXBwaW5nSW5mbzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLm1ldGEuSmF2YVNRTFR5cGVzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMubWV0YS5WYWx1ZU1hcHBpbmc7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5zY2hlbWEuQ29sdW1uOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmtlcm5lbC5PcGVuSlBBU3RhdGVNYW5hZ2VyOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS51dGlsLk1ldGFEYXRhRXhjZXB0aW9uOwoKLyoq\nCiAqIENsYXNzIG1hcHBpbmcgZm9yIGVtYmVkZGVkIG9iamVjdHMuCiAqCiAq\nIEBhdXRob3IgQWJlIFdoaXRlCiAqIEBub2phdmFkb2MKICovCnB1YmxpYyBj\nbGFzcyBFbWJlZGRlZENsYXNzU3RyYXRlZ3kKICAgIGV4dGVuZHMgQWJzdHJh\nY3RDbGFzc1N0cmF0ZWd5IHsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBM\nb2NhbGl6ZXIgX2xvYyA9IExvY2FsaXplci5mb3JQYWNrYWdlCiAgICAgICAg\nKEVtYmVkZGVkQ2xhc3NTdHJhdGVneS5jbGFzcyk7CgogICAgcHVibGljIHZv\naWQgbWFwKGJvb2xlYW4gYWRhcHQpIHsKICAgICAgICBWYWx1ZU1hcHBpbmcg\ndm0gPSBjbHMuZ2V0RW1iZWRkaW5nTWFwcGluZygpOwogICAgICAgIGlmICh2\nbSA9PSBudWxsIHx8IHZtLmdldFR5cGUoKSAhPSBjbHMuZ2V0RGVzY3JpYmVk\nVHlwZSgpKQogICAgICAgICAgICB0aHJvdyBuZXcgTWV0YURhdGFFeGNlcHRp\nb24oX2xvYy5nZXQoIm5vdC1lbWJlZCIsIGNscykpOwoKICAgICAgICBDbGFz\nc01hcHBpbmdJbmZvIGluZm8gPSBjbHMuZ2V0TWFwcGluZ0luZm8oKTsKICAg\nICAgICBpbmZvLmFzc2VydE5vU2NoZW1hQ29tcG9uZW50cyhjbHMsIHRydWUp\nOwoKICAgICAgICBDbGFzc01hcHBpbmcgb3duZXIgPSB2bS5nZXRGaWVsZE1h\ncHBpbmcoKS5nZXREZWZpbmluZ01hcHBpbmcoKTsKICAgICAgICBjbHMuc2V0\nSWRlbnRpdHlUeXBlKG93bmVyLmdldElkZW50aXR5VHlwZSgpKTsKICAgICAg\nICBjbHMuc2V0T2JqZWN0SWRUeXBlKG93bmVyLmdldE9iamVjdElkVHlwZSgp\nLAogICAgICAgICAgICBvd25lci5pc09iamVjdElkVHlwZVNoYXJlZCgpKTsK\nICAgICAgICBjbHMuc2V0VGFibGUodm0uZ2V0RmllbGRNYXBwaW5nKCkuZ2V0\nVGFibGUoKSk7CiAgICAgICAgY2xzLnNldFByaW1hcnlLZXlDb2x1bW5zKG93\nbmVyLmdldFByaW1hcnlLZXlDb2x1bW5zKCkpOwogICAgICAgIGNscy5zZXRD\nb2x1bW5JTyhvd25lci5nZXRDb2x1bW5JTygpKTsKICAgIH0KCiAgICAvKioK\nICAgICAqIFJldHVybiB0aGUgcHJvcGVyIHN5bnRoZXRpYyBudWxsIGluZGlj\nYXRvciB2YWx1ZSBmb3IgdGhlIGdpdmVuIGluc3RhbmNlLgogICAgICovCiAg\nICBwdWJsaWMgT2JqZWN0IGdldE51bGxJbmRpY2F0b3JWYWx1ZShPcGVuSlBB\nU3RhdGVNYW5hZ2VyIHNtKSB7CiAgICAgICAgQ29sdW1uW10gY29scyA9IGNs\ncy5nZXRFbWJlZGRpbmdNYXBwaW5nKCkuZ2V0Q29sdW1ucygpOwogICAgICAg\nIGlmIChjb2xzLmxlbmd0aCAhPSAxKQogICAgICAgICAgICByZXR1cm4gbnVs\nbDsKICAgICAgICBpZiAoc20gPT0gbnVsbCAmJiAhY29sc1swXS5pc05vdE51\nbGwoKSkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKHNt\nID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBKYXZhU1FMVHlwZXMuZ2V0\nRW1wdHlWYWx1ZShjb2xzWzBdLmdldEphdmFUeXBlKCkpOwogICAgICAgIHJl\ndHVybiBKYXZhU1FMVHlwZXMuZ2V0Tm9uRW1wdHlWYWx1ZShjb2xzWzBdLmdl\ndEphdmFUeXBlKCkpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHdo\nZXRoZXIgdGhlIGdpdmVuIG51bGwgaW5kaWNhdG9yIHZhbHVlIG1lYW5zIHRo\nZSBvYmplY3QgaXMgbnVsbC4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4g\naW5kaWNhdGVzTnVsbChPYmplY3QgdmFsKSB7CiAgICAgICAgQ29sdW1uW10g\nY29scyA9IGNscy5nZXRFbWJlZGRpbmdNYXBwaW5nKCkuZ2V0Q29sdW1ucygp\nOwogICAgICAgIGlmIChjb2xzLmxlbmd0aCAhPSAxKQogICAgICAgICAgICBy\nZXR1cm4gZmFsc2U7CiAgICAgICAgaWYgKHZhbCA9PSBudWxsKQogICAgICAg\nICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICBpZiAoY29sc1swXS5pc05vdE51\nbGwoKQogICAgICAgICAgICAmJiB2YWwuZXF1YWxzKEphdmFTUUxUeXBlcy5n\nZXRFbXB0eVZhbHVlKGNvbHNbMF0uZ2V0SmF2YVR5cGUoKSkpKQogICAgICAg\nICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICBpZiAoY29sc1swXS5nZXREZWZh\ndWx0U3RyaW5nKCkgIT0gbnVsbAogICAgICAgICAgICAmJiB2YWwudG9TdHJp\nbmcoKS5lcXVhbHMoY29sc1swXS5nZXREZWZhdWx0U3RyaW5nKCkpKQogICAg\nICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAg\nICB9CgogICAgcHVibGljIGJvb2xlYW4gaXNQcmltYXJ5S2V5T2JqZWN0SWQo\nYm9vbGVhbiBoYXNBbGwpIHsKICAgICAgICByZXR1cm4gY2xzLmdldEVtYmVk\nZGluZ01hcHBpbmcoKS5nZXRGaWVsZE1hcHBpbmcoKS4KICAgICAgICAgICAg\nZ2V0RGVmaW5pbmdNYXBwaW5nKCkuaXNQcmltYXJ5S2V5T2JqZWN0SWQoaGFz\nQWxsKTsKICAgIH0KfQo=\n","encoding":"base64"}

