{"sha":"7eda87247d162f52552f46708491b6a890b6948e","node_id":"MDQ6QmxvYjIwNjM2NDo3ZWRhODcyNDdkMTYyZjUyNTUyZjQ2NzA4NDkxYjZhODkwYjY5NDhl","size":3727,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/7eda87247d162f52552f46708491b6a890b6948e","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLnN0cmF0czsK\nCmltcG9ydCBqYXZhLnNxbC5SZXN1bHRTZXQ7CmltcG9ydCBqYXZhLnNxbC5T\nUUxFeGNlcHRpb247CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMu\na2VybmVsLkpEQkNTdG9yZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5q\nZGJjLnNxbC5EQkRpY3Rpb25hcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5zcWwuUm93OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpk\nYmMuc3FsLlNRTEV4Y2VwdGlvbnM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEua2VybmVsLk9wZW5KUEFTdGF0ZU1hbmFnZXI7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLm1ldGEuSmF2YVR5cGVzOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLnV0aWwuTWV0YURhdGFFeGNlcHRpb247CgovKioKICogTWFw\ncGluZyBmb3Igc2VyaWFsaXplZCBmaWVsZHMgb24gYSBkaWN0aW9uYXJ5IHRo\nYXQgaGFzIGEgbWF4aW11bSBlbWJlZGRlZAogKiBCTE9CIHNpemUuCiAqCiAq\nIEBhdXRob3IgQWJlIFdoaXRlCiAqIEBub2phdmFkb2MKICogQHNpbmNlIDAu\nNC4wCiAqLwpwdWJsaWMgY2xhc3MgTWF4RW1iZWRkZWRCbG9iRmllbGRTdHJh\ndGVneQogICAgZXh0ZW5kcyBNYXhFbWJlZGRlZExvYkZpZWxkU3RyYXRlZ3kg\newoKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvY2FsaXplciBfbG9jID0g\nTG9jYWxpemVyLmZvclBhY2thZ2UKICAgICAgICAoTWF4RW1iZWRkZWRCbG9i\nRmllbGRTdHJhdGVneS5jbGFzcyk7CgogICAgcHJpdmF0ZSBpbnQgX21heFNp\nemUgPSAwOwoKICAgIHByb3RlY3RlZCBpbnQgZ2V0RXhwZWN0ZWRKYXZhVHlw\nZSgpIHsKICAgICAgICByZXR1cm4gSmF2YVR5cGVzLk9CSkVDVDsKICAgIH0K\nCiAgICBwcm90ZWN0ZWQgdm9pZCB1cGRhdGUoT3BlbkpQQVN0YXRlTWFuYWdl\nciBzbSwgUm93IHJvdykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsK\nICAgICAgICBieXRlW10gYiA9IChieXRlW10pIHNtLmdldEltcGxEYXRhKGZp\nZWxkLmdldEluZGV4KCkpOwogICAgICAgIGlmIChiID09IG51bGwgfHwgYi5s\nZW5ndGggPiBfbWF4U2l6ZSkKICAgICAgICAgICAgcm93LnNldE51bGwoZmll\nbGQuZ2V0Q29sdW1ucygpWzBdLCB0cnVlKTsKICAgICAgICBlbHNlIHsKICAg\nICAgICAgICAgc20uc2V0SW1wbERhdGEoZmllbGQuZ2V0SW5kZXgoKSwgbnVs\nbCk7CiAgICAgICAgICAgIERCRGljdGlvbmFyeS5TZXJpYWxpemVkRGF0YSBk\nYXQgPQogICAgICAgICAgICAgICAgbmV3IERCRGljdGlvbmFyeS5TZXJpYWxp\nemVkRGF0YShiKTsKICAgICAgICAgICAgcm93LnNldE9iamVjdChmaWVsZC5n\nZXRDb2x1bW5zKClbMF0sIGRhdCk7CiAgICAgICAgfQogICAgfQoKICAgIHBy\nb3RlY3RlZCBCb29sZWFuIGlzQ3VzdG9tKE9wZW5KUEFTdGF0ZU1hbmFnZXIg\nc20sIEpEQkNTdG9yZSBzdG9yZSkgewogICAgICAgIC8vIGhhdmUgd2UgYWxy\nZWFkeSBzdG9yZWQgb3VyIHNlcmlhbGl6ZWQgZGF0YT8KICAgICAgICBieXRl\nW10gYiA9IChieXRlW10pIHNtLmdldEltcGxEYXRhKGZpZWxkLmdldEluZGV4\nKCkpOwogICAgICAgIGlmIChiID09IG51bGwpIHsKICAgICAgICAgICAgT2Jq\nZWN0IG8gPSBzbS5mZXRjaChmaWVsZC5nZXRJbmRleCgpKTsKICAgICAgICAg\nICAgaWYgKG8gPT0gbnVsbCkKICAgICAgICAgICAgICAgIHJldHVybiBCb29s\nZWFuLkZBTFNFOwoKICAgICAgICAgICAgLy8gc2VyaWFsaXplIGZpZWxkIHZh\nbHVlCiAgICAgICAgICAgIERCRGljdGlvbmFyeSBkaWN0ID0gZmllbGQuZ2V0\nTWFwcGluZ1JlcG9zaXRvcnkoKS5nZXREQkRpY3Rpb25hcnkoKTsKICAgICAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGIgPSBkaWN0LnNlcmlhbGl6\nZShvLCBzdG9yZSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlv\nbiBzZSkgewogICAgICAgICAgICAgICAgdGhyb3cgU1FMRXhjZXB0aW9ucy5n\nZXRTdG9yZShzZSwgZGljdCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAg\nIC8vIHNldCBpbiBpbXBsIGRhdGEgc28gdGhhdCB3ZSBkb24ndCBoYXZlIHRv\nIHJlLXNlcmlhbGl6ZSBvbiBzdG9yZQogICAgICAgICAgICBzbS5zZXRJbXBs\nRGF0YShmaWVsZC5nZXRJbmRleCgpLCBiKTsKICAgICAgICB9CiAgICAgICAg\ncmV0dXJuIChiLmxlbmd0aCA+IF9tYXhTaXplKSA/IG51bGwgOiBCb29sZWFu\nLkZBTFNFOwogICAgfQoKICAgIHByb3RlY3RlZCB2b2lkIHB1dERhdGEoT3Bl\nbkpQQVN0YXRlTWFuYWdlciBzbSwgUmVzdWx0U2V0IHJzLAogICAgICAgIERC\nRGljdGlvbmFyeSBkaWN0KQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24g\newogICAgICAgIGJ5dGVbXSBiID0gKGJ5dGVbXSkgc20uc2V0SW1wbERhdGEo\nZmllbGQuZ2V0SW5kZXgoKSwgbnVsbCk7CiAgICAgICAgT2JqZWN0IGJsb2Ig\nPSBycy5nZXRCbG9iKDEpOwogICAgICAgIGRpY3QucHV0Qnl0ZXMoYmxvYiwg\nYik7CiAgICB9CgogICAgcHVibGljIHZvaWQgbWFwKGJvb2xlYW4gYWRhcHQp\nIHsKICAgICAgICBpZiAoIWZpZWxkLmlzU2VyaWFsaXplZCgpKQogICAgICAg\nICAgICB0aHJvdyBuZXcgTWV0YURhdGFFeGNlcHRpb24oX2xvYy5nZXQoIm5v\ndC1zZXJpYWxpemVkIiwgZmllbGQpKTsKICAgICAgICBzdXBlci5tYXAoYWRh\ncHQpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGluaXRpYWxpemUoKSB7CiAg\nICAgICAgREJEaWN0aW9uYXJ5IGRpY3QgPSBmaWVsZC5nZXRNYXBwaW5nUmVw\nb3NpdG9yeSgpLmdldERCRGljdGlvbmFyeSgpOwogICAgICAgIF9tYXhTaXpl\nID0gZGljdC5tYXhFbWJlZGRlZEJsb2JTaXplOwogICAgICAgIGZpZWxkLnNl\ndFVzZXNJbXBsRGF0YShCb29sZWFuLlRSVUUpOwogICAgfQp9Cg==\n","encoding":"base64"}

