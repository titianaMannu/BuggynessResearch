{"sha":"16e962cefc9839ea432ef4b3148c2c341a757088","node_id":"MDQ6QmxvYjIwNjM2NDoxNmU5NjJjZWZjOTgzOWVhNDMyZWY0YjMxNDhjMmMzNDFhNzU3MDg4","size":3918,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/16e962cefc9839ea432ef4b3148c2c341a757088","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLnN0cmF0czsK\nCmltcG9ydCBqYXZhLmlvLkNoYXJBcnJheVJlYWRlcjsKaW1wb3J0IGphdmEu\naW8uQ2hhckFycmF5V3JpdGVyOwppbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlv\nbjsKaW1wb3J0IGphdmEuaW8uUmVhZGVyOwppbXBvcnQgamF2YS5sYW5nLnJl\nZmxlY3QuQXJyYXk7CmltcG9ydCBqYXZhLnNxbC5SZXN1bHRTZXQ7CmltcG9y\ndCBqYXZhLnNxbC5TUUxFeGNlcHRpb247CgppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmpkYmMua2VybmVsLkpEQkNTdG9yZTsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLm1ldGEuSmF2YVNRTFR5cGVzOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLkNvbHVtbjsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5EQkRpY3Rpb25hcnk7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuSm9pbnM7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuUmVzdWx0OwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlJvdzsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5rZXJuZWwuT3BlbkpQQVN0YXRlTWFuYWdlcjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6ZXI7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5NZXRhRGF0YUV4Y2VwdGlvbjsK\nCi8qKgogKiBNYXBwaW5nIGZvciBDTE9CIGNoYXJhY3RlciBhcnJheSBvbiBh\nIGRpY3Rpb25hcnkgdGhhdCBoYXMgYSBtYXhpbXVtCiAqIGVtYmVkZGVkIENM\nT0Igc2l6ZS4KICoKICogQGF1dGhvciBBYmUgV2hpdGUKICogQG5vamF2YWRv\nYwogKiBAc2luY2UgMC40LjAKICovCnB1YmxpYyBjbGFzcyBNYXhFbWJlZGRl\nZENoYXJBcnJheUZpZWxkU3RyYXRlZ3kKICAgIGV4dGVuZHMgTWF4RW1iZWRk\nZWRMb2JGaWVsZFN0cmF0ZWd5IHsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5h\nbCBMb2NhbGl6ZXIgX2xvYyA9IExvY2FsaXplci5mb3JQYWNrYWdlCiAgICAg\nICAgKE1heEVtYmVkZGVkQ2hhckFycmF5RmllbGRTdHJhdGVneS5jbGFzcyk7\nCgogICAgcHJpdmF0ZSBpbnQgX21heFNpemUgPSAwOwoKICAgIHByb3RlY3Rl\nZCBpbnQgZ2V0RXhwZWN0ZWRKYXZhVHlwZSgpIHsKICAgICAgICByZXR1cm4g\nSmF2YVNRTFR5cGVzLkNIQVJfU1RSRUFNOwogICAgfQoKICAgIHByb3RlY3Rl\nZCB2b2lkIHVwZGF0ZShPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBSb3cgcm93\nKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIGNoYXJb\nXSBjID0gUHJpbWl0aXZlV3JhcHBlckFycmF5cy4KICAgICAgICAgICAgdG9D\naGFyQXJyYXkoc20uZmV0Y2hPYmplY3QoZmllbGQuZ2V0SW5kZXgoKSkpOwog\nICAgICAgIGlmIChjID09IG51bGwgfHwgYy5sZW5ndGggPiBfbWF4U2l6ZSkK\nICAgICAgICAgICAgcm93LnNldE51bGwoZmllbGQuZ2V0Q29sdW1ucygpWzBd\nLCB0cnVlKTsKICAgICAgICBlbHNlCiAgICAgICAgICAgIHJvdy5zZXRDaGFy\nYWN0ZXJTdHJlYW0oZmllbGQuZ2V0Q29sdW1ucygpWzBdLAogICAgICAgICAg\nICAgICAgbmV3IENoYXJBcnJheVJlYWRlcihjKSwgYy5sZW5ndGgpOwogICAg\nfQoKICAgIHByb3RlY3RlZCBCb29sZWFuIGlzQ3VzdG9tKE9wZW5KUEFTdGF0\nZU1hbmFnZXIgc20sIEpEQkNTdG9yZSBzdG9yZSkgewogICAgICAgIE9iamVj\ndCB2YWwgPSBzbS5mZXRjaE9iamVjdChmaWVsZC5nZXRJbmRleCgpKTsKICAg\nICAgICByZXR1cm4gKHZhbCAhPSBudWxsICYmIEFycmF5LmdldExlbmd0aCh2\nYWwpID4gX21heFNpemUpID8gbnVsbAogICAgICAgICAgICA6IEJvb2xlYW4u\nRkFMU0U7CiAgICB9CgogICAgcHJvdGVjdGVkIHZvaWQgcHV0RGF0YShPcGVu\nSlBBU3RhdGVNYW5hZ2VyIHNtLCBSZXN1bHRTZXQgcnMsCiAgICAgICAgREJE\naWN0aW9uYXJ5IGRpY3QpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7\nCiAgICAgICAgT2JqZWN0IGNsb2IgPSBycy5nZXRDbG9iKDEpOwogICAgICAg\nIGRpY3QucHV0Q2hhcnMoY2xvYiwgUHJpbWl0aXZlV3JhcHBlckFycmF5cy4K\nICAgICAgICAgICAgdG9DaGFyQXJyYXkoc20uZmV0Y2hPYmplY3QoZmllbGQu\nZ2V0SW5kZXgoKSkpKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgT2JqZWN0IGxv\nYWQoQ29sdW1uIGNvbCwgUmVzdWx0IHJlcywgSm9pbnMgam9pbnMpCiAgICAg\nICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgUmVhZGVyIHJlYWRl\nciA9IHJlcy5nZXRDaGFyYWN0ZXJTdHJlYW0oY29sLCBqb2lucyk7CiAgICAg\nICAgaWYgKHJlYWRlciA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gbnVs\nbDsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgQ2hhckFycmF5V3JpdGVy\nIHdyaXRlciA9IG5ldyBDaGFyQXJyYXlXcml0ZXIoKTsKICAgICAgICAgICAg\nZm9yIChpbnQgYzsgKGMgPSByZWFkZXIucmVhZCgpKSAhPSAtMTspCiAgICAg\nICAgICAgICAgICB3cml0ZXIud3JpdGUoYyk7CiAgICAgICAgICAgIHJldHVy\nbiBQcmltaXRpdmVXcmFwcGVyQXJyYXlzLnRvT2JqZWN0VmFsdWUoZmllbGQs\nCiAgICAgICAgICAgICAgICB3cml0ZXIudG9DaGFyQXJyYXkoKSk7CiAgICAg\nICAgfSBjYXRjaCAoSU9FeGNlcHRpb24gaW9lKSB7CiAgICAgICAgICAgIHRo\ncm93IG5ldyBTUUxFeGNlcHRpb24oaW9lLnRvU3RyaW5nKCkpOwogICAgICAg\nIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCBtYXAoYm9vbGVhbiBhZGFwdCkg\newogICAgICAgIGlmIChmaWVsZC5nZXRUeXBlKCkgIT0gY2hhcltdLmNsYXNz\nCiAgICAgICAgICAgICYmIGZpZWxkLmdldFR5cGUoKSAhPSBDaGFyYWN0ZXJb\nXS5jbGFzcykKICAgICAgICAgICAgdGhyb3cgbmV3IE1ldGFEYXRhRXhjZXB0\naW9uKF9sb2MuZ2V0KCJub3QtY2hhcnMiLCBmaWVsZCkpOwogICAgICAgIHN1\ncGVyLm1hcChhZGFwdCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgaW5pdGlh\nbGl6ZSgpIHsKICAgICAgICBEQkRpY3Rpb25hcnkgZGljdCA9IGZpZWxkLmdl\ndE1hcHBpbmdSZXBvc2l0b3J5KCkuZ2V0REJEaWN0aW9uYXJ5KCk7CiAgICAg\nICAgX21heFNpemUgPSBkaWN0Lm1heEVtYmVkZGVkQ2xvYlNpemU7CiAgICB9\nCn0K\n","encoding":"base64"}

