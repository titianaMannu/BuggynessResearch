{"sha":"61aa40a2a44ebce75c687aefc82ec4236d7f2953","node_id":"MDQ6QmxvYjIwNjM2NDo2MWFhNDBhMmE0NGViY2U3NWM2ODdhZWZjODJlYzQyMzZkN2YyOTUz","size":2978,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/61aa40a2a44ebce75c687aefc82ec4236d7f2953","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLnN0cmF0czsK\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLlZhbHVlTWFw\ncGluZzsKCi8qKgogKiBQcmltaXRpdmUgd3JhcHBlciBhcnJheSBoZWxwZXIg\nbWV0aG9kcy4KICoKICogQGF1dGhvciBNYXJjIFBydWQnaG9tbWVhdXgKICov\nCmNsYXNzIFByaW1pdGl2ZVdyYXBwZXJBcnJheXMgewoKICAgIC8qKgogICAg\nICogQ29udmVydCB0aGUgZ2l2ZW4gcHJpbWl0aXZlIGFycmF5IHRvIGEgd3Jh\ncHBlciBhcnJheSBpZiBuZWVkZWQuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0\naWMgT2JqZWN0IHRvT2JqZWN0VmFsdWUoVmFsdWVNYXBwaW5nIHZtLCBjaGFy\nW10gYXJyYXkpIHsKICAgICAgICBpZiAoYXJyYXkgPT0gbnVsbCkKICAgICAg\nICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKHZtLmdldFR5cGUoKS5n\nZXRDb21wb25lbnRUeXBlKCkgPT0gQ2hhcmFjdGVyLmNsYXNzKSB7CiAgICAg\nICAgICAgIENoYXJhY3RlcltdIG9iamVjdEFycmF5ID0gbmV3IENoYXJhY3Rl\nclthcnJheS5sZW5ndGhdOwogICAgICAgICAgICBmb3IgKGludCBpID0gMDsg\naSA8IGFycmF5Lmxlbmd0aDsgaSsrKQogICAgICAgICAgICAgICAgb2JqZWN0\nQXJyYXlbaV0gPSBuZXcgQ2hhcmFjdGVyKGFycmF5W2ldKTsKICAgICAgICAg\nICAgcmV0dXJuIG9iamVjdEFycmF5OwogICAgICAgIH0KICAgICAgICByZXR1\ncm4gYXJyYXk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDb252ZXJ0IHRoZSBn\naXZlbiB2YWx1ZSB0byBhIHByaW1pdGl2ZSBhcnJheSBpZiBuZWVkZWQuCiAg\nICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgY2hhcltdIHRvQ2hhckFycmF5KE9i\namVjdCBvYikgewogICAgICAgIGlmIChvYiBpbnN0YW5jZW9mIENoYXJhY3Rl\ncltdKSB7CiAgICAgICAgICAgIENoYXJhY3RlcltdIGNoYXJPYiA9IChDaGFy\nYWN0ZXJbXSkgb2I7CiAgICAgICAgICAgIGNoYXJbXSBjaGFycyA9IG5ldyBj\naGFyW2NoYXJPYi5sZW5ndGhdOwogICAgICAgICAgICBmb3IgKGludCBpID0g\nMDsgaSA8IGNoYXJPYi5sZW5ndGg7IGkrKykKICAgICAgICAgICAgICAgIGNo\nYXJzW2ldID0gY2hhck9iW2ldID09IG51bGwgPyAwIDogY2hhck9iW2ldLmNo\nYXJWYWx1ZSgpOwogICAgICAgICAgICByZXR1cm4gY2hhcnM7CiAgICAgICAg\nfQogICAgICAgIHJldHVybiAoY2hhcltdKSBvYjsKICAgIH0KCiAgICAvKioK\nICAgICAqIENvbnZlcnQgdGhlIGdpdmVuIHByaW1pdGl2ZSBhcnJheSB0byBh\nIHdyYXBwZXIgYXJyYXkgaWYgbmVlZGVkLgogICAgICovCiAgICBwdWJsaWMg\nc3RhdGljIE9iamVjdCB0b09iamVjdFZhbHVlKFZhbHVlTWFwcGluZyB2bSwg\nYnl0ZVtdIGFycmF5KSB7CiAgICAgICAgaWYgKGFycmF5ID09IG51bGwpCiAg\nICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIGlmICh2bS5nZXRUeXBl\nKCkuZ2V0Q29tcG9uZW50VHlwZSgpID09IEJ5dGUuY2xhc3MpIHsKICAgICAg\nICAgICAgQnl0ZVtdIG9iamVjdEFycmF5ID0gbmV3IEJ5dGVbYXJyYXkubGVu\nZ3RoXTsKICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBhcnJheS5s\nZW5ndGg7IGkrKykKICAgICAgICAgICAgICAgIG9iamVjdEFycmF5W2ldID0g\nbmV3IEJ5dGUoYXJyYXlbaV0pOwogICAgICAgICAgICByZXR1cm4gb2JqZWN0\nQXJyYXk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBhcnJheTsKICAgIH0K\nCiAgICAvKioKICAgICAqIENvbnZlcnQgdGhlIGdpdmVuIHZhbHVlIHRvIGEg\ncHJpbWl0aXZlIGFycmF5IGlmIG5lZWRlZC4KICAgICAqLwogICAgcHVibGlj\nIHN0YXRpYyBieXRlW10gdG9CeXRlQXJyYXkoT2JqZWN0IG9iKSB7CiAgICAg\nICAgaWYgKG9iIGluc3RhbmNlb2YgQnl0ZVtdKSB7CiAgICAgICAgICAgIEJ5\ndGVbXSBieXRlT2IgPSAoQnl0ZVtdKSBvYjsKICAgICAgICAgICAgYnl0ZVtd\nIGJ5dGVzID0gbmV3IGJ5dGVbYnl0ZU9iLmxlbmd0aF07CiAgICAgICAgICAg\nIGZvciAoaW50IGkgPSAwOyBpIDwgYnl0ZU9iLmxlbmd0aDsgaSsrKQogICAg\nICAgICAgICAgICAgYnl0ZXNbaV0gPSBieXRlT2JbaV0gPT0gbnVsbCA/IDAg\nOiBieXRlT2JbaV0uYnl0ZVZhbHVlKCk7CiAgICAgICAgICAgIHJldHVybiBi\neXRlczsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIChieXRlW10pIG9iOwog\nICAgfQp9Cgo=\n","encoding":"base64"}

