{"sha":"9ed5caf9158059123979ceebe985e43561969dc1","node_id":"MDQ6QmxvYjIwNjM2NDo5ZWQ1Y2FmOTE1ODA1OTEyMzk3OWNlZWJlOTg1ZTQzNTYxOTY5ZGMx","size":6180,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/9ed5caf9158059123979ceebe985e43561969dc1","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLnN0cmF0czsK\nCmltcG9ydCBqYXZhLnNxbC5TUUxFeGNlcHRpb247CmltcG9ydCBqYXZhLnV0\naWwuQ29sbGVjdGlvbjsKaW1wb3J0IGphdmEudXRpbC5NYXA7CgppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmNvbmYuT3BlbkpQQUNvbmZpZ3VyYXRpb247\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuSkRCQ0Zl\ndGNoQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5q\nZGJjLmtlcm5lbC5KREJDU3RvcmU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5tZXRhLkNsYXNzTWFwcGluZzsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLm1ldGEuRmllbGRNYXBwaW5nOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMubWV0YS5WYWx1ZU1hcHBpbmc7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuQ29sdW1uOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLkZvcmVpZ25LZXk7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuSm9pbnM7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuUmVzdWx0OwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNlbGVjdDsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5VbmlvbjsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5rZXJuZWwuT3BlbkpQQVN0YXRlTWFuYWdlcjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6ZXI7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5KYXZhVHlwZXM7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5JbnRlcm5hbEV4Y2VwdGlvbjsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLk1ldGFEYXRhRXhjZXB0\naW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuUHJveHk7Cgov\nKioKICogVXNlcyBhbiBpbnZlcnNlIGZvcmVpZ24ga2V5IGluIHRoZSB0YWJs\nZSBvZiB0aGUgbWFwIHZhbHVlIHRvIGRldGVybWluZQogKiBtYXAgdmFsdWVz\nLiBEZXJpdmVzIG1hcCBrZXlzIGZyb20gYSBmaWVsZCBpbiBlYWNoIHZhbHVl\nLgogKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKi8KcHVibGljIGNsYXNzIFJl\nbGF0aW9uTWFwSW52ZXJzZUtleUZpZWxkU3RyYXRlZ3kKICAgIGV4dGVuZHMg\nUmVsYXRpb25Ub01hbnlJbnZlcnNlS2V5RmllbGRTdHJhdGVneQogICAgaW1w\nbGVtZW50cyBMUlNNYXBGaWVsZFN0cmF0ZWd5IHsKCiAgICBwcml2YXRlIHN0\nYXRpYyBmaW5hbCBMb2NhbGl6ZXIgX2xvYyA9IExvY2FsaXplci5mb3JQYWNr\nYWdlCiAgICAgICAgKFJlbGF0aW9uTWFwSW52ZXJzZUtleUZpZWxkU3RyYXRl\nZ3kuY2xhc3MpOwoKICAgIHB1YmxpYyBGaWVsZE1hcHBpbmcgZ2V0RmllbGRN\nYXBwaW5nKCkgewogICAgICAgIHJldHVybiBmaWVsZDsKICAgIH0KCiAgICBw\ndWJsaWMgQ2xhc3NNYXBwaW5nW10gZ2V0SW5kZXBlbmRlbnRLZXlNYXBwaW5n\ncyhib29sZWFuIHRyYXZlcnNlKSB7CiAgICAgICAgcmV0dXJuIENsYXNzTWFw\ncGluZy5FTVBUWV9NQVBQSU5HUzsKICAgIH0KCiAgICBwdWJsaWMgQ2xhc3NN\nYXBwaW5nW10gZ2V0SW5kZXBlbmRlbnRWYWx1ZU1hcHBpbmdzKGJvb2xlYW4g\ndHJhdmVyc2UpIHsKICAgICAgICByZXR1cm4gZ2V0SW5kZXBlbmRlbnRFbGVt\nZW50TWFwcGluZ3ModHJhdmVyc2UpOwogICAgfQoKICAgIHB1YmxpYyBDb2x1\nbW5bXSBnZXRLZXlDb2x1bW5zKENsYXNzTWFwcGluZyBjbHMpIHsKICAgICAg\nICByZXR1cm4gY2xzLmdldEZpZWxkTWFwcGluZyhmaWVsZC5nZXRLZXkoKS4K\nICAgICAgICAgICAgZ2V0VmFsdWVNYXBwZWRCeU1ldGFEYXRhKCkuZ2V0SW5k\nZXgoKSkuZ2V0Q29sdW1ucygpOwogICAgfQoKICAgIHB1YmxpYyBDb2x1bW5b\nXSBnZXRWYWx1ZUNvbHVtbnMoQ2xhc3NNYXBwaW5nIGNscykgewogICAgICAg\nIHJldHVybiBjbHMuZ2V0UHJpbWFyeUtleUNvbHVtbnMoKTsKICAgIH0KCiAg\nICBwdWJsaWMgRm9yZWlnbktleSBnZXRKb2luRm9yZWlnbktleShDbGFzc01h\ncHBpbmcgY2xzKSB7CiAgICAgICAgcmV0dXJuIHN1cGVyLmdldEpvaW5Gb3Jl\naWduS2V5KGNscyk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2VsZWN0S2V5\nKFNlbGVjdCBzZWwsIENsYXNzTWFwcGluZyBrZXksIE9wZW5KUEFTdGF0ZU1h\nbmFnZXIgc20sCiAgICAgICAgSkRCQ1N0b3JlIHN0b3JlLCBKREJDRmV0Y2hD\nb25maWd1cmF0aW9uIGZldGNoLCBKb2lucyBqb2lucykgewogICAgICAgIHRo\ncm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgfQoKICAgIHB1Ymxp\nYyBPYmplY3QgbG9hZEtleShPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBKREJD\nU3RvcmUgc3RvcmUsCiAgICAgICAgSkRCQ0ZldGNoQ29uZmlndXJhdGlvbiBm\nZXRjaCwgUmVzdWx0IHJlcywgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dz\nIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhj\nZXB0aW9uKCk7CiAgICB9CgogICAgcHVibGljIE9iamVjdCBkZXJpdmVLZXko\nSkRCQ1N0b3JlIHN0b3JlLCBPYmplY3QgdmFsdWUpIHsKICAgICAgICBPcGVu\nSlBBU3RhdGVNYW5hZ2VyIHNtID0gUmVsYXRpb25TdHJhdGVnaWVzLmdldFN0\nYXRlTWFuYWdlcih2YWx1ZSwKICAgICAgICAgICAgc3RvcmUuZ2V0Q29udGV4\ndCgpKTsKICAgICAgICByZXR1cm4gKHNtID09IG51bGwpID8gbnVsbCA6IHNt\nLmZldGNoRmllbGQoZmllbGQuZ2V0S2V5KCkuCiAgICAgICAgICAgIGdldFZh\nbHVlTWFwcGVkQnlNZXRhRGF0YSgpLmdldEluZGV4KCksIGZhbHNlKTsKICAg\nIH0KCiAgICBwdWJsaWMgT2JqZWN0IGRlcml2ZVZhbHVlKEpEQkNTdG9yZSBz\ndG9yZSwgT2JqZWN0IGtleSkgewogICAgICAgIHJldHVybiBudWxsOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHNlbGVjdFZhbHVlKFNlbGVjdCBzZWwsIENs\nYXNzTWFwcGluZyB2YWwsCiAgICAgICAgT3BlbkpQQVN0YXRlTWFuYWdlciBz\nbSwgSkRCQ1N0b3JlIHN0b3JlLCBKREJDRmV0Y2hDb25maWd1cmF0aW9uIGZl\ndGNoLCAKICAgICAgICBKb2lucyBqb2lucykgewogICAgICAgIHNlbGVjdEVs\nZW1lbnQoc2VsLCB2YWwsIHN0b3JlLCBmZXRjaCwgSkRCQ0ZldGNoQ29uZmln\ndXJhdGlvbi5FQUdFUl9OT05FLAogICAgICAgICAgICBqb2lucyk7CiAgICB9\nCgogICAgcHVibGljIE9iamVjdCBsb2FkVmFsdWUoT3BlbkpQQVN0YXRlTWFu\nYWdlciBzbSwgSkRCQ1N0b3JlIHN0b3JlLAogICAgICAgIEpEQkNGZXRjaENv\nbmZpZ3VyYXRpb24gZmV0Y2gsIFJlc3VsdCByZXMsIEpvaW5zIGpvaW5zKQog\nICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBs\nb2FkRWxlbWVudChzbSwgc3RvcmUsIGZldGNoLCByZXMsIGpvaW5zKTsKICAg\nIH0KCiAgICBwdWJsaWMgUmVzdWx0W10gZ2V0UmVzdWx0cyhmaW5hbCBPcGVu\nSlBBU3RhdGVNYW5hZ2VyIHNtLAogICAgICAgIGZpbmFsIEpEQkNTdG9yZSBz\ndG9yZSwgZmluYWwgSkRCQ0ZldGNoQ29uZmlndXJhdGlvbiBmZXRjaCwKICAg\nICAgICBmaW5hbCBpbnQgZWFnZXJNb2RlLCBmaW5hbCBKb2luc1tdIGpvaW5z\nLCBib29sZWFuIGxycykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsK\nICAgICAgICBWYWx1ZU1hcHBpbmcgdmFsID0gZmllbGQuZ2V0RWxlbWVudE1h\ncHBpbmcoKTsKICAgICAgICBmaW5hbCBDbGFzc01hcHBpbmdbXSB2YWxzID0g\ndmFsLmdldEluZGVwZW5kZW50VHlwZU1hcHBpbmdzKCk7CiAgICAgICAgVW5p\nb24gdW5pb24gPSBzdG9yZS5nZXRTUUxGYWN0b3J5KCkubmV3VW5pb24odmFs\ncy5sZW5ndGgpOwogICAgICAgIGlmIChmZXRjaC5nZXRTdWJjbGFzc0ZldGNo\nTW9kZSh2YWwuZ2V0VHlwZU1hcHBpbmcoKSkKICAgICAgICAgICAgIT0gSkRC\nQ0ZldGNoQ29uZmlndXJhdGlvbi5FQUdFUl9KT0lOKQogICAgICAgICAgICB1\nbmlvbi5hYm9ydFVuaW9uKCk7CiAgICAgICAgdW5pb24uc2V0TFJTKGxycyk7\nCiAgICAgICAgdW5pb24uc2VsZWN0KG5ldyBVbmlvbi5TZWxlY3RvcigpIHsK\nICAgICAgICAgICAgcHVibGljIHZvaWQgc2VsZWN0KFNlbGVjdCBzZWwsIGlu\ndCBpZHgpIHsKICAgICAgICAgICAgICAgIGpvaW5zWzFdID0gc2VsZWN0QWxs\nKHNlbCwgdmFsc1tpZHhdLCBzbSwgc3RvcmUsIGZldGNoLAogICAgICAgICAg\nICAgICAgICAgIGVhZ2VyTW9kZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9\nKTsKICAgICAgICBSZXN1bHQgcmVzID0gdW5pb24uZXhlY3V0ZShzdG9yZSwg\nZmV0Y2gpOwogICAgICAgIHJldHVybiBuZXcgUmVzdWx0W117IHJlcywgcmVz\nIH07CiAgICB9CgogICAgcHVibGljIEpvaW5zIGpvaW5LZXlSZWxhdGlvbihK\nb2lucyBqb2lucywgQ2xhc3NNYXBwaW5nIGtleSkgewogICAgICAgIHJldHVy\nbiBqb2luczsKICAgIH0KCiAgICBwdWJsaWMgSm9pbnMgam9pblZhbHVlUmVs\nYXRpb24oSm9pbnMgam9pbnMsIENsYXNzTWFwcGluZyB2YWwpIHsKICAgICAg\nICByZXR1cm4gam9pbkVsZW1lbnRSZWxhdGlvbihqb2lucywgdmFsKTsKICAg\nIH0KCiAgICBwcm90ZWN0ZWQgUHJveHkgbmV3TFJTUHJveHkoKSB7CiAgICAg\nICAgcmV0dXJuIG5ldyBMUlNQcm94eU1hcCh0aGlzKTsKICAgIH0KCiAgICBw\ncm90ZWN0ZWQgdm9pZCBhZGQoSkRCQ1N0b3JlIHN0b3JlLCBPYmplY3QgY29s\nbCwgT2JqZWN0IG9iaikgewogICAgICAgIGlmIChvYmogIT0gbnVsbCkKICAg\nICAgICAgICAgKChNYXApIGNvbGwpLnB1dChkZXJpdmVLZXkoc3RvcmUsIG9i\naiksIG9iaik7CiAgICB9CgogICAgcHJvdGVjdGVkIENvbGxlY3Rpb24gdG9D\nb2xsZWN0aW9uKE9iamVjdCB2YWwpIHsKICAgICAgICByZXR1cm4gKHZhbCA9\nPSBudWxsKSA/IG51bGwgOiAoKE1hcCkgdmFsKS52YWx1ZXMoKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBtYXAoYm9vbGVhbiBhZGFwdCkgewogICAgICAg\nIGlmIChmaWVsZC5nZXRUeXBlQ29kZSgpICE9IEphdmFUeXBlcy5NQVApCiAg\nICAgICAgICAgIHRocm93IG5ldyBNZXRhRGF0YUV4Y2VwdGlvbihfbG9jLmdl\ndCgibm90LW1hcCIsIGZpZWxkKSk7CiAgICAgICAgaWYgKGZpZWxkLmdldEtl\neSgpLmdldFZhbHVlTWFwcGVkQnkoKSA9PSBudWxsKQogICAgICAgICAgICB0\naHJvdyBuZXcgTWV0YURhdGFFeGNlcHRpb24oX2xvYy5nZXQoIm5vdC1tYXBw\nZWQtYnkta2V5IiwgZmllbGQpKTsKICAgICAgICBzdXBlci5tYXAoYWRhcHQp\nOwogICAgfQoKICAgIHB1YmxpYyBKb2lucyBqb2luS2V5KEpvaW5zIGpvaW5z\nLCBib29sZWFuIGZvcmNlT3V0ZXIpIHsKICAgICAgICByZXR1cm4gam9pblJl\nbGF0aW9uKGpvaW4oam9pbnMsIGZvcmNlT3V0ZXIpLCBmb3JjZU91dGVyLCBm\nYWxzZSk7CiAgICB9Cn0K\n","encoding":"base64"}

