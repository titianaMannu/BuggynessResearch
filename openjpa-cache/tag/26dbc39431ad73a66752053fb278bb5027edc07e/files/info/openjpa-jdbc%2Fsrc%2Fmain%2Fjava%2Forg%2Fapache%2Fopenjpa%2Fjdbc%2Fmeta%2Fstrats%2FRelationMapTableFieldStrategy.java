{"sha":"3c50a40549018a0dbcdaa946d9ccc094ccf5d8db","node_id":"MDQ6QmxvYjIwNjM2NDozYzUwYTQwNTQ5MDE4YTBkYmNkYWE5NDZkOWNjYzA5NGNjZjVkOGRi","size":6140,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/3c50a40549018a0dbcdaa946d9ccc094ccf5d8db","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLnN0cmF0czsK\nCmltcG9ydCBqYXZhLnNxbC5TUUxFeGNlcHRpb247CmltcG9ydCBqYXZhLnV0\naWwuQ29sbGVjdGlvbjsKaW1wb3J0IGphdmEudXRpbC5NYXA7CgppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmNvbmYuT3BlbkpQQUNvbmZpZ3VyYXRpb247\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuSkRCQ0Zl\ndGNoQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5q\nZGJjLmtlcm5lbC5KREJDU3RvcmU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5tZXRhLkNsYXNzTWFwcGluZzsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLm1ldGEuRmllbGRNYXBwaW5nOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMubWV0YS5WYWx1ZU1hcHBpbmc7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuQ29sdW1uOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLkZvcmVpZ25LZXk7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuSm9pbnM7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuUmVzdWx0OwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNlbGVjdDsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5VbmlvbjsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5rZXJuZWwuT3BlbkpQQVN0YXRlTWFuYWdlcjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6ZXI7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5KYXZhVHlwZXM7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5JbnRlcm5hbEV4Y2VwdGlvbjsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLk1ldGFEYXRhRXhjZXB0\naW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuUHJveHk7Cgov\nKioKICogVXNlcyBhbiBhc3NvY2lhdGlvbiB0YWJsZSB0byBob2xkIG1hcCB2\nYWx1ZXMuIERlcml2ZXMgbWFwIGtleXMgZnJvbQogKiBhIGZpZWxkIGluIGVh\nY2ggdmFsdWUuCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqLwpwdWJsaWMg\nY2xhc3MgUmVsYXRpb25NYXBUYWJsZUZpZWxkU3RyYXRlZ3kKICAgIGV4dGVu\nZHMgUmVsYXRpb25Ub01hbnlUYWJsZUZpZWxkU3RyYXRlZ3kKICAgIGltcGxl\nbWVudHMgTFJTTWFwRmllbGRTdHJhdGVneSB7CgogICAgcHJpdmF0ZSBzdGF0\naWMgZmluYWwgTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6ZXIuZm9yUGFja2Fn\nZQogICAgICAgIChSZWxhdGlvbk1hcFRhYmxlRmllbGRTdHJhdGVneS5jbGFz\ncyk7CgogICAgcHVibGljIEZpZWxkTWFwcGluZyBnZXRGaWVsZE1hcHBpbmco\nKSB7CiAgICAgICAgcmV0dXJuIGZpZWxkOwogICAgfQoKICAgIHB1YmxpYyBD\nbGFzc01hcHBpbmdbXSBnZXRJbmRlcGVuZGVudEtleU1hcHBpbmdzKGJvb2xl\nYW4gdHJhdmVyc2UpIHsKICAgICAgICByZXR1cm4gQ2xhc3NNYXBwaW5nLkVN\nUFRZX01BUFBJTkdTOwogICAgfQoKICAgIHB1YmxpYyBDbGFzc01hcHBpbmdb\nXSBnZXRJbmRlcGVuZGVudFZhbHVlTWFwcGluZ3MoYm9vbGVhbiB0cmF2ZXJz\nZSkgewogICAgICAgIHJldHVybiBnZXRJbmRlcGVuZGVudEVsZW1lbnRNYXBw\naW5ncyh0cmF2ZXJzZSk7CiAgICB9CgogICAgcHVibGljIEZvcmVpZ25LZXkg\nZ2V0Sm9pbkZvcmVpZ25LZXkoQ2xhc3NNYXBwaW5nIGNscykgewogICAgICAg\nIHJldHVybiBzdXBlci5nZXRKb2luRm9yZWlnbktleShjbHMpOwogICAgfQoK\nICAgIHB1YmxpYyBDb2x1bW5bXSBnZXRLZXlDb2x1bW5zKENsYXNzTWFwcGlu\nZyBjbHMpIHsKICAgICAgICByZXR1cm4gY2xzLmdldEZpZWxkTWFwcGluZyhm\naWVsZC5nZXRLZXkoKS4KICAgICAgICAgICAgZ2V0VmFsdWVNYXBwZWRCeU1l\ndGFEYXRhKCkuZ2V0SW5kZXgoKSkuZ2V0Q29sdW1ucygpOwogICAgfQoKICAg\nIHB1YmxpYyBDb2x1bW5bXSBnZXRWYWx1ZUNvbHVtbnMoQ2xhc3NNYXBwaW5n\nIGNscykgewogICAgICAgIHJldHVybiBmaWVsZC5nZXRFbGVtZW50TWFwcGlu\nZygpLmdldENvbHVtbnMoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZWxl\nY3RLZXkoU2VsZWN0IHNlbCwgQ2xhc3NNYXBwaW5nIGtleSwgT3BlbkpQQVN0\nYXRlTWFuYWdlciBzbSwKICAgICAgICBKREJDU3RvcmUgc3RvcmUsIEpEQkNG\nZXRjaENvbmZpZ3VyYXRpb24gZmV0Y2gsIEpvaW5zIGpvaW5zKSB7CiAgICAg\nICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICB9CgogICAg\ncHVibGljIE9iamVjdCBsb2FkS2V5KE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20s\nIEpEQkNTdG9yZSBzdG9yZSwKICAgICAgICBKREJDRmV0Y2hDb25maWd1cmF0\naW9uIGZldGNoLCBSZXN1bHQgcmVzLCBKb2lucyBqb2lucykKICAgICAgICB0\naHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICB0aHJvdyBuZXcgSW50ZXJu\nYWxFeGNlcHRpb24oKTsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IGRlcml2\nZUtleShKREJDU3RvcmUgc3RvcmUsIE9iamVjdCB2YWx1ZSkgewogICAgICAg\nIE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20gPSBSZWxhdGlvblN0cmF0ZWdpZXMu\nZ2V0U3RhdGVNYW5hZ2VyKHZhbHVlLAogICAgICAgICAgICBzdG9yZS5nZXRD\nb250ZXh0KCkpOwogICAgICAgIHJldHVybiAoc20gPT0gbnVsbCkgPyBudWxs\nIDogc20uZmV0Y2hGaWVsZChmaWVsZC5nZXRLZXkoKS4KICAgICAgICAgICAg\nZ2V0VmFsdWVNYXBwZWRCeU1ldGFEYXRhKCkuZ2V0SW5kZXgoKSwgZmFsc2Up\nOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgZGVyaXZlVmFsdWUoSkRCQ1N0\nb3JlIHN0b3JlLCBPYmplY3Qga2V5KSB7CiAgICAgICAgcmV0dXJuIG51bGw7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgc2VsZWN0VmFsdWUoU2VsZWN0IHNl\nbCwgQ2xhc3NNYXBwaW5nIHZhbCwKICAgICAgICBPcGVuSlBBU3RhdGVNYW5h\nZ2VyIHNtLCBKREJDU3RvcmUgc3RvcmUsIEpEQkNGZXRjaENvbmZpZ3VyYXRp\nb24gZmV0Y2gsIAogICAgICAgIEpvaW5zIGpvaW5zKSB7CiAgICAgICAgc2Vs\nZWN0RWxlbWVudChzZWwsIHZhbCwgc3RvcmUsIGZldGNoLCBKREJDRmV0Y2hD\nb25maWd1cmF0aW9uLkVBR0VSX05PTkUsCiAgICAgICAgICAgIGpvaW5zKTsK\nICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IGxvYWRWYWx1ZShPcGVuSlBBU3Rh\ndGVNYW5hZ2VyIHNtLCBKREJDU3RvcmUgc3RvcmUsCiAgICAgICAgSkRCQ0Zl\ndGNoQ29uZmlndXJhdGlvbiBmZXRjaCwgUmVzdWx0IHJlcywgSm9pbnMgam9p\nbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0\ndXJuIGxvYWRFbGVtZW50KHNtLCBzdG9yZSwgZmV0Y2gsIHJlcywgam9pbnMp\nOwogICAgfQoKICAgIHB1YmxpYyBSZXN1bHRbXSBnZXRSZXN1bHRzKGZpbmFs\nIE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sCiAgICAgICAgZmluYWwgSkRCQ1N0\nb3JlIHN0b3JlLCBmaW5hbCBKREJDRmV0Y2hDb25maWd1cmF0aW9uIGZldGNo\nLAogICAgICAgIGZpbmFsIGludCBlYWdlck1vZGUsIGZpbmFsIEpvaW5zW10g\nam9pbnMsIGJvb2xlYW4gbHJzKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRp\nb24gewogICAgICAgIFZhbHVlTWFwcGluZyB2YWwgPSBmaWVsZC5nZXRFbGVt\nZW50TWFwcGluZygpOwogICAgICAgIGZpbmFsIENsYXNzTWFwcGluZ1tdIHZh\nbHMgPSB2YWwuZ2V0SW5kZXBlbmRlbnRUeXBlTWFwcGluZ3MoKTsKICAgICAg\nICBVbmlvbiB1bmlvbiA9IHN0b3JlLmdldFNRTEZhY3RvcnkoKS5uZXdVbmlv\nbih2YWxzLmxlbmd0aCk7CiAgICAgICAgaWYgKGZldGNoLmdldFN1YmNsYXNz\nRmV0Y2hNb2RlKHZhbC5nZXRUeXBlTWFwcGluZygpKQogICAgICAgICAgICAh\nPSBKREJDRmV0Y2hDb25maWd1cmF0aW9uLkVBR0VSX0pPSU4pCiAgICAgICAg\nICAgIHVuaW9uLmFib3J0VW5pb24oKTsKICAgICAgICB1bmlvbi5zZXRMUlMo\nbHJzKTsKICAgICAgICB1bmlvbi5zZWxlY3QobmV3IFVuaW9uLlNlbGVjdG9y\nKCkgewogICAgICAgICAgICBwdWJsaWMgdm9pZCBzZWxlY3QoU2VsZWN0IHNl\nbCwgaW50IGlkeCkgewogICAgICAgICAgICAgICAgam9pbnNbMV0gPSBzZWxl\nY3RBbGwoc2VsLCB2YWxzW2lkeF0sIHNtLCBzdG9yZSwgZmV0Y2gsCiAgICAg\nICAgICAgICAgICAgICAgZWFnZXJNb2RlKTsKICAgICAgICAgICAgfQogICAg\nICAgIH0pOwogICAgICAgIFJlc3VsdCByZXMgPSB1bmlvbi5leGVjdXRlKHN0\nb3JlLCBmZXRjaCk7CiAgICAgICAgcmV0dXJuIG5ldyBSZXN1bHRbXXsgcmVz\nLCByZXMgfTsKICAgIH0KCiAgICBwdWJsaWMgSm9pbnMgam9pbktleVJlbGF0\naW9uKEpvaW5zIGpvaW5zLCBDbGFzc01hcHBpbmcga2V5KSB7CiAgICAgICAg\ncmV0dXJuIGpvaW5zOwogICAgfQoKICAgIHB1YmxpYyBKb2lucyBqb2luVmFs\ndWVSZWxhdGlvbihKb2lucyBqb2lucywgQ2xhc3NNYXBwaW5nIHZhbCkgewog\nICAgICAgIHJldHVybiBqb2luRWxlbWVudFJlbGF0aW9uKGpvaW5zLCB2YWwp\nOwogICAgfQoKICAgIHByb3RlY3RlZCBQcm94eSBuZXdMUlNQcm94eSgpIHsK\nICAgICAgICByZXR1cm4gbmV3IExSU1Byb3h5TWFwKHRoaXMpOwogICAgfQoK\nICAgIHByb3RlY3RlZCB2b2lkIGFkZChKREJDU3RvcmUgc3RvcmUsIE9iamVj\ndCBjb2xsLCBPYmplY3Qgb2JqKSB7CiAgICAgICAgaWYgKG9iaiAhPSBudWxs\nKQogICAgICAgICAgICAoKE1hcCkgY29sbCkucHV0KGRlcml2ZUtleShzdG9y\nZSwgb2JqKSwgb2JqKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgQ29sbGVjdGlv\nbiB0b0NvbGxlY3Rpb24oT2JqZWN0IHZhbCkgewogICAgICAgIHJldHVybiAo\ndmFsID09IG51bGwpID8gbnVsbCA6ICgoTWFwKSB2YWwpLnZhbHVlcygpOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIG1hcChib29sZWFuIGFkYXB0KSB7CiAg\nICAgICAgaWYgKGZpZWxkLmdldFR5cGVDb2RlKCkgIT0gSmF2YVR5cGVzLk1B\nUCkKICAgICAgICAgICAgdGhyb3cgbmV3IE1ldGFEYXRhRXhjZXB0aW9uKF9s\nb2MuZ2V0KCJub3QtbWFwIiwgZmllbGQpKTsKICAgICAgICBpZiAoZmllbGQu\nZ2V0S2V5KCkuZ2V0VmFsdWVNYXBwZWRCeSgpID09IG51bGwpCiAgICAgICAg\nICAgIHRocm93IG5ldyBNZXRhRGF0YUV4Y2VwdGlvbihfbG9jLmdldCgibm90\nLW1hcHBlZC1ieS1rZXkiLCBmaWVsZCkpOwogICAgICAgIHN1cGVyLm1hcChh\nZGFwdCk7CiAgICB9CgogICAgcHVibGljIEpvaW5zIGpvaW5LZXkoSm9pbnMg\nam9pbnMsIGJvb2xlYW4gZm9yY2VPdXRlcikgewogICAgICAgIHJldHVybiBq\nb2luUmVsYXRpb24oam9pbihqb2lucywgZm9yY2VPdXRlciksIGZvcmNlT3V0\nZXIsIGZhbHNlKTsKICAgIH0KfQo=\n","encoding":"base64"}

