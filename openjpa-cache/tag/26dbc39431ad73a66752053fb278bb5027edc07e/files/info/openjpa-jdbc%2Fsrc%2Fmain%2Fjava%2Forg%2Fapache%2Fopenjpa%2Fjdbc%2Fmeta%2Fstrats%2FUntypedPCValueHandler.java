{"sha":"4ae7cdaa5740e2359c64f007204d845b0d8bec7a","node_id":"MDQ6QmxvYjIwNjM2NDo0YWU3Y2RhYTU3NDBlMjM1OWM2NGYwMDcyMDRkODQ1YjBkOGJlYzdh","size":4415,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/4ae7cdaa5740e2359c64f007204d845b0d8bec7a","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLnN0cmF0czsK\nCmltcG9ydCBqYXZhLnNxbC5TUUxFeGNlcHRpb247CgppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmVuaGFuY2UuUGVyc2lzdGVuY2VDYXBhYmxlOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMua2VybmVsLkpEQkNGZXRjaENv\nbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5r\nZXJuZWwuSkRCQ1N0b3JlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpk\nYmMubWV0YS5SZWxhdGlvbklkOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMubWV0YS5WYWx1ZU1hcHBpbmc7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5zY2hlbWEuQ29sdW1uOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmpkYmMuc2NoZW1hLkNvbHVtbklPOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmtlcm5lbC5PcGVuSlBBU3RhdGVNYW5hZ2VyOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5TdG9yZUNvbnRleHQ7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuSmF2YVR5cGVzOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuU3RvcmVFeGNlcHRpb247CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5JbXBsSGVscGVyOwoKLyoqCiAq\nIEhhbmRsZXIgZm9yIHVua25vd24gcGVyc2lzdGVuY2UtY2FwYWJsZSBvYmpl\nY3QgZmllbGRzIHRoYXQgc3RvcmVzCiAqIHN0cmluZ2lmaWVkIG9pZHMuCiAq\nCiAqIEBub2phdmFkb2MKICovCnB1YmxpYyBjbGFzcyBVbnR5cGVkUENWYWx1\nZUhhbmRsZXIKICAgIGV4dGVuZHMgQWJzdHJhY3RWYWx1ZUhhbmRsZXIKICAg\nIGltcGxlbWVudHMgUmVsYXRpb25JZCB7CgogICAgcHJpdmF0ZSBzdGF0aWMg\nZmluYWwgTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6ZXIuZm9yUGFja2FnZQog\nICAgICAgIChVbnR5cGVkUENWYWx1ZUhhbmRsZXIuY2xhc3MpOwogICAgcHJp\ndmF0ZSBzdGF0aWMgZmluYWwgVW50eXBlZFBDVmFsdWVIYW5kbGVyIF9pbnN0\nYW5jZSA9CiAgICAgICAgbmV3IFVudHlwZWRQQ1ZhbHVlSGFuZGxlcigpOwoK\nICAgIC8qKgogICAgICogU2luZ2xldG9uIGluc3RhbmNlLgogICAgICovCiAg\nICBwdWJsaWMgc3RhdGljIFVudHlwZWRQQ1ZhbHVlSGFuZGxlciBnZXRJbnN0\nYW5jZSgpIHsKICAgICAgICByZXR1cm4gX2luc3RhbmNlOwogICAgfQoKICAg\nIHB1YmxpYyBDb2x1bW5bXSBtYXAoVmFsdWVNYXBwaW5nIHZtLCBTdHJpbmcg\nbmFtZSwgQ29sdW1uSU8gaW8sCiAgICAgICAgYm9vbGVhbiBhZGFwdCkgewog\nICAgICAgIENvbHVtbiBjb2wgPSBuZXcgQ29sdW1uKCk7CiAgICAgICAgY29s\nLnNldE5hbWUobmFtZSk7CiAgICAgICAgY29sLnNldEphdmFUeXBlKEphdmFU\neXBlcy5TVFJJTkcpOwogICAgICAgIGNvbC5zZXRSZWxhdGlvbklkKHRydWUp\nOwogICAgICAgIHJldHVybiBuZXcgQ29sdW1uW117IGNvbCB9OwogICAgfQoK\nICAgIHB1YmxpYyBib29sZWFuIGlzVmVyc2lvbmFibGUoVmFsdWVNYXBwaW5n\nIHZtKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgcHVibGlj\nIGJvb2xlYW4gb2JqZWN0VmFsdWVSZXF1aXJlc0xvYWQoVmFsdWVNYXBwaW5n\nIHZtKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgcHVibGlj\nIE9iamVjdCB0b0RhdGFTdG9yZVZhbHVlKFZhbHVlTWFwcGluZyB2bSwgT2Jq\nZWN0IHZhbCwKICAgICAgICBKREJDU3RvcmUgc3RvcmUpIHsKICAgICAgICAv\nLyBpbiB0aGUgcGFzdCB3ZSd2ZSBiZWVuIGxlbmllbnQgYWJvdXQgYmVpbmcg\nYWJsZSB0byB0cmFuc2xhdGUgb2JqZWN0cwogICAgICAgIC8vIGZyb20gb3Ro\nZXIgcGVyc2lzdGVuY2UgY29udGV4dHMsIHNvIHRyeSB0byBnZXQgc20gZGly\nZWN0bHkgZnJvbQogICAgICAgIC8vIGluc3RhbmNlIGJlZm9yZSBhc2tpbmcg\nb3VyIGNvbnRleHQKICAgICAgICBpZiAoSW1wbEhlbHBlci5pc01hbmFnZWFi\nbGUodmFsKSkgewogICAgICAgICAgICBQZXJzaXN0ZW5jZUNhcGFibGUgcGMg\nPSBJbXBsSGVscGVyLnRvUGVyc2lzdGVuY2VDYXBhYmxlKHZhbCwKICAgICAg\nICAgICAgICAgIHN0b3JlLmdldENvbmZpZ3VyYXRpb24oKSk7CiAgICAgICAg\nICAgIGlmIChwYy5wY0dldFN0YXRlTWFuYWdlcigpICE9IG51bGwpCiAgICAg\nICAgICAgICAgICByZXR1cm4gcGMucGNHZXRTdGF0ZU1hbmFnZXIoKTsKICAg\nICAgICB9CiAgICAgICAgcmV0dXJuIFJlbGF0aW9uU3RyYXRlZ2llcy5nZXRT\ndGF0ZU1hbmFnZXIodmFsLCBzdG9yZS5nZXRDb250ZXh0KCkpOwogICAgfQoK\nICAgIHB1YmxpYyBPYmplY3QgdG9PYmplY3RWYWx1ZShWYWx1ZU1hcHBpbmcg\ndm0sIE9iamVjdCB2YWwsCiAgICAgICAgT3BlbkpQQVN0YXRlTWFuYWdlciBz\nbSwgSkRCQ1N0b3JlIHN0b3JlLCBKREJDRmV0Y2hDb25maWd1cmF0aW9uIGZl\ndGNoKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIGlm\nICh2YWwgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CgogICAg\nICAgIFN0cmluZyBzdHIgPSAoU3RyaW5nKSB2YWw7CiAgICAgICAgaW50IGlk\neCA9IHN0ci5pbmRleE9mKCc6Jyk7CiAgICAgICAgaWYgKGlkeCA9PSAtMSkK\nICAgICAgICAgICAgdGhyb3cgbmV3IFN0b3JlRXhjZXB0aW9uKF9sb2MuZ2V0\nKCJvaWQtaW52YWxpZCIsIHN0ciwgdm0pKTsKICAgICAgICBTdHJpbmcgY2xz\nTmFtZSA9IHN0ci5zdWJzdHJpbmcoMCwgaWR4KTsKICAgICAgICBTdHJpbmcg\nb2lkU3RyID0gc3RyLnN1YnN0cmluZyhpZHggKyAxKTsKCiAgICAgICAgU3Rv\ncmVDb250ZXh0IGN0eCA9IHN0b3JlLmdldENvbnRleHQoKTsKICAgICAgICBD\nbGFzc0xvYWRlciBsb2FkZXIgPSBzdG9yZS5nZXRDb25maWd1cmF0aW9uKCku\nCiAgICAgICAgICAgIGdldENsYXNzUmVzb2x2ZXJJbnN0YW5jZSgpLmdldENs\nYXNzTG9hZGVyKHZtLmdldFR5cGUoKSwKICAgICAgICAgICAgY3R4LmdldENs\nYXNzTG9hZGVyKCkpOwogICAgICAgIENsYXNzIGNscyA9IG51bGw7CiAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgY2xzID0gQ2xhc3MuZm9yTmFtZShjbHNO\nYW1lLCB0cnVlLCBsb2FkZXIpOwogICAgICAgIH0gY2F0Y2ggKENsYXNzTm90\nRm91bmRFeGNlcHRpb24gY25mZSkgewogICAgICAgICAgICB0aHJvdyBuZXcg\nU3RvcmVFeGNlcHRpb24oY25mZSk7CiAgICAgICAgfQoKICAgICAgICBPYmpl\nY3Qgb2lkID0gY3R4Lm5ld09iamVjdElkKGNscywgb2lkU3RyKTsKICAgICAg\nICByZXR1cm4gc3RvcmUuZmluZChvaWQsIHZtLCBmZXRjaCk7CiAgICB9Cgog\nICAgcHVibGljIE9iamVjdCB0b1JlbGF0aW9uRGF0YVN0b3JlVmFsdWUoT3Bl\nbkpQQVN0YXRlTWFuYWdlciBzbSwgQ29sdW1uIGNvbCkgewogICAgICAgIGlm\nIChzbSA9PSBudWxsIHx8IHNtLmdldE9iamVjdElkKCkgPT0gbnVsbCkKICAg\nICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgcmV0dXJuIHNtLmdldE1l\ndGFEYXRhKCkuZ2V0RGVzY3JpYmVkVHlwZSgpLmdldE5hbWUoKSArICI6Igog\nICAgICAgICAgICArIHNtLmdldE9iamVjdElkKCkudG9TdHJpbmcoKTsKICAg\nIH0KfQo=\n","encoding":"base64"}

