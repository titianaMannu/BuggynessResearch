{"sha":"2f181c7195148cc39b4a2c3545cf450f66b2c534","node_id":"MDQ6QmxvYjIwNjM2NDoyZjE4MWM3MTk1MTQ4Y2MzOWI0YTJjMzU0NWNmNDUwZjY2YjJjNTM0","size":10069,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/2f181c7195148cc39b4a2c3545cf450f66b2c534","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWE7CgppbXBv\ncnQgamF2YS5pby5TZXJpYWxpemFibGU7CgovKioKICogTWV0YWRhdGEgYWJv\ndXQgY29sdW1uIEkvTyBpbiBhIHNwZWNpZmljIGNvbnRleHQuIEluIHRoZSBj\nb250ZXh0IG9mCiAqIGEgZm9yZWlnbiBrZXksIHRoZSBzdGFuZGFyZCBmb3Jl\naWduIGtleSBjb2x1bW5zIGFyZSBpbmRleGVkIGZpcnN0LCB0aGVuCiAqIHRo\nZSBjb25zdGFudCBjb2x1bW5zLgogKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQog\nKi8KcHVibGljIGNsYXNzIENvbHVtbklPCiAgICBpbXBsZW1lbnRzIFNlcmlh\nbGl6YWJsZSB7CgogICAgcHVibGljIHN0YXRpYyBmaW5hbCBDb2x1bW5JTyBV\nTlJFU1RSSUNURUQgPSBuZXcgQ29sdW1uSU8oKSB7CiAgICAgICAgcHVibGlj\nIHZvaWQgc2V0SW5zZXJ0YWJsZShpbnQgY29sLCBib29sZWFuIGluc2VydGFi\nbGUpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0\naW9uRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9p\nZCBzZXRVcGRhdGFibGUoaW50IGNvbCwgYm9vbGVhbiB1cGRhdGFibGUpIHsK\nICAgICAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhj\nZXB0aW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBzZXRO\ndWxsSW5zZXJ0YWJsZShpbnQgY29sLCBib29sZWFuIGluc2VydGFibGUpIHsK\nICAgICAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhj\nZXB0aW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBzZXRO\ndWxsVXBkYXRhYmxlKGludCBjb2wsIGJvb2xlYW4gaW5zZXJ0YWJsZSkgewog\nICAgICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNl\ncHRpb24oKTsKICAgICAgICB9CiAgICB9OwoKICAgIHByaXZhdGUgaW50IF91\nbkluc2VydGFibGUgPSAwOwogICAgcHJpdmF0ZSBpbnQgX3VuVXBkYXRhYmxl\nID0gMDsKICAgIHByaXZhdGUgaW50IF91bk51bGxJbnNlcnRhYmxlID0gMDsK\nICAgIHByaXZhdGUgaW50IF91bk51bGxVcGRhdGFibGUgPSAwOwoKICAgIC8q\nKgogICAgICogV2hldGhlciB0aGUgY29sdW1uIGF0IHRoZSBnaXZlbiBpbmRl\neCBpcyBpbnNlcnRhYmxlIGluIHRoaXMgY29udGV4dC4KICAgICAqLwogICAg\ncHVibGljIGJvb2xlYW4gaXNJbnNlcnRhYmxlKGludCBjb2wsIGJvb2xlYW4g\nbnVsbFZhbHVlKSB7CiAgICAgICAgcmV0dXJuIGlzKGNvbCwgX3VuSW5zZXJ0\nYWJsZSwgX3VuTnVsbEluc2VydGFibGUsIG51bGxWYWx1ZSk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBFcXVpdmFsZW50IHRvIDxjb2RlPmlzSW5zZXJ0YWJs\nZSAoMCwgbnVsbFZhbHVlKTwvY29kZT4sIGJ1dCByZXR1cm5zCiAgICAgKiBm\nYWxzZSBpZiB0aGUgZ2l2ZW4gY29sdW1uIGlzIG51bGwuCiAgICAgKi8KICAg\nIHB1YmxpYyBib29sZWFuIGlzSW5zZXJ0YWJsZShDb2x1bW4gY29sLCBib29s\nZWFuIG51bGxWYWx1ZSkgewogICAgICAgIHJldHVybiBpcyhjb2wsIF91bklu\nc2VydGFibGUsIF91bk51bGxJbnNlcnRhYmxlLCBudWxsVmFsdWUpOwogICAg\nfQoKICAgIC8qKgogICAgICogV2hldGhlciBhbnkgY29sdW1uIHVwIHRvIGJ1\ndCBleGNsdWRpbmcgdGhlIGdpdmVuIGluZGV4IGlzIGluc2VydGFibGUuCiAg\nICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlzQW55SW5zZXJ0YWJsZShpbnQg\nY29sLCBib29sZWFuIG51bGxWYWx1ZSkgewogICAgICAgIHJldHVybiBpc0Fu\neShjb2wsIF91bkluc2VydGFibGUsIF91bk51bGxJbnNlcnRhYmxlLCBudWxs\nVmFsdWUpOwogICAgfQoKICAgIC8qKgogICAgICogRXF1aXZhbGVudCB0byA8\nY29kZT5pc0FueUluc2VydGFibGUgKGNvbHMubGVuZ3RoLCBudWxsVmFsdWUp\nPC9jb2RlPi4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gaXNBbnlJbnNl\ncnRhYmxlKENvbHVtbltdIGNvbHMsIGJvb2xlYW4gbnVsbFZhbHVlKSB7CiAg\nICAgICAgcmV0dXJuIGlzQW55KGNvbHMsIF91bkluc2VydGFibGUsIF91bk51\nbGxJbnNlcnRhYmxlLCBudWxsVmFsdWUpOwogICAgfQoKICAgIC8qKgogICAg\nICogUmV0dXJuIHRydWUgaWYgYW55IGNvbHVtbnMgZm9yIHRoZSBnaXZlbiBr\nZXkgYXJlIGluc2VydGFibGUuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFu\nIGlzQW55SW5zZXJ0YWJsZShGb3JlaWduS2V5IGZrLCBib29sZWFuIG51bGxW\nYWx1ZSkgewogICAgICAgIHJldHVybiBpc0FueShmaywgX3VuSW5zZXJ0YWJs\nZSwgX3VuTnVsbEluc2VydGFibGUsIG51bGxWYWx1ZSkKICAgICAgICAgICAg\nJiYgKCFudWxsVmFsdWUgfHwgZmsuaXNMb2dpY2FsKCkgfHwgaXNOdWxsYWJs\nZShmaykpOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciBhbGwgY29s\ndW1ucyB1cCB0byBidXQgZXhjbHVkaW5nIHRoZSBnaXZlbiBpbmRleCBhcmUg\naW5zZXJ0YWJsZS4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gaXNBbGxJ\nbnNlcnRhYmxlKGludCBjb2wsIGJvb2xlYW4gbnVsbFZhbHVlKSB7CiAgICAg\nICAgcmV0dXJuIGlzQWxsKGNvbCwgX3VuSW5zZXJ0YWJsZSwgX3VuTnVsbElu\nc2VydGFibGUsIG51bGxWYWx1ZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBF\ncXVpdmFsZW50IHRvIDxjb2RlPmlzQWxsSW5zZXJ0YWJsZSAoY29scy5sZW5n\ndGgsIG51bGxWYWx1ZSk8L2NvZGU+LgogICAgICovCiAgICBwdWJsaWMgYm9v\nbGVhbiBpc0FsbEluc2VydGFibGUoQ29sdW1uW10gY29scywgYm9vbGVhbiBu\ndWxsVmFsdWUpIHsKICAgICAgICByZXR1cm4gaXNBbGwoY29scywgX3VuSW5z\nZXJ0YWJsZSwgX3VuTnVsbEluc2VydGFibGUsIG51bGxWYWx1ZSk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBSZXR1cm4gdHJ1ZSBpZiBhbGwgY29sdW1ucyBm\nb3IgdGhlIGdpdmVuIGtleSBhcmUgaW5zZXJ0YWJsZS4KICAgICAqLwogICAg\ncHVibGljIGJvb2xlYW4gaXNBbGxJbnNlcnRhYmxlKEZvcmVpZ25LZXkgZmss\nIGJvb2xlYW4gbnVsbFZhbHVlKSB7CiAgICAgICAgcmV0dXJuIGlzQWxsKGZr\nLCBfdW5JbnNlcnRhYmxlLCBfdW5OdWxsSW5zZXJ0YWJsZSwgbnVsbFZhbHVl\nKQogICAgICAgICAgICAmJiAoIW51bGxWYWx1ZSB8fCBmay5pc0xvZ2ljYWwo\nKSB8fCBpc051bGxhYmxlKGZrKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBX\naGV0aGVyIHRoZSBjb2x1bW4gYXQgdGhlIGdpdmVuIGluZGV4IGlzIGluc2Vy\ndGFibGUgaW4gdGhpcyBjb250ZXh0LgogICAgICovCiAgICBwdWJsaWMgdm9p\nZCBzZXRJbnNlcnRhYmxlKGludCBjb2wsIGJvb2xlYW4gaW5zZXJ0YWJsZSkg\newogICAgICAgIF91bkluc2VydGFibGUgPSBzZXQoY29sLCBpbnNlcnRhYmxl\nLCBfdW5JbnNlcnRhYmxlKTsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRo\nZXIgdGhpcyBjb250ZXh0IGNhbiBpbnNlcnQgdGhlIGdpdmVuIGNvbHVtbiBh\ncyBudWxsL2RlZmF1bHQgaW4KICAgICAqIHRoaXMgY29udGV4dC4KICAgICAq\nLwogICAgcHVibGljIHZvaWQgc2V0TnVsbEluc2VydGFibGUoaW50IGNvbCwg\nYm9vbGVhbiBpbnNlcnRhYmxlKSB7CiAgICAgICAgX3VuTnVsbEluc2VydGFi\nbGUgPSBzZXQoY29sLCBpbnNlcnRhYmxlLCBfdW5OdWxsSW5zZXJ0YWJsZSk7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRoZSBjb2x1bW4gYXQg\ndGhlIGdpdmVuIGluZGV4IGlzIHVwZGF0YWJsZSBpbiB0aGlzIGNvbnRleHQu\nCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlzVXBkYXRhYmxlKGludCBj\nb2wsIGJvb2xlYW4gbnVsbFZhbHVlKSB7CiAgICAgICAgcmV0dXJuIGlzKGNv\nbCwgX3VuVXBkYXRhYmxlLCBfdW5OdWxsVXBkYXRhYmxlLCBudWxsVmFsdWUp\nOwogICAgfQoKICAgIC8qKgogICAgICogRXF1aXZhbGVudCB0byA8Y29kZT5p\nc1VwZGF0YWJsZSAoMCwgbnVsbFZhbHVlKTwvY29kZT4sIGJ1dCByZXR1cm5z\nCiAgICAgKiBmYWxzZSBpZiB0aGUgZ2l2ZW4gY29sdW1uIGlzIG51bGwuCiAg\nICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlzVXBkYXRhYmxlKENvbHVtbiBj\nb2wsIGJvb2xlYW4gbnVsbFZhbHVlKSB7CiAgICAgICAgcmV0dXJuIGlzKGNv\nbCwgX3VuVXBkYXRhYmxlLCBfdW5OdWxsVXBkYXRhYmxlLCBudWxsVmFsdWUp\nOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciBhbnkgY29sdW1uIHVw\nIHRvIGJ1dCBleGNsdWRpbmcgdGhlIGdpdmVuIGluZGV4IGlzIHVwZGF0YWJs\nZS4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gaXNBbnlVcGRhdGFibGUo\naW50IGNvbCwgYm9vbGVhbiBudWxsVmFsdWUpIHsKICAgICAgICByZXR1cm4g\naXNBbnkoY29sLCBfdW5VcGRhdGFibGUsIF91bk51bGxVcGRhdGFibGUsIG51\nbGxWYWx1ZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBFcXVpdmFsZW50IHRv\nIDxjb2RlPmlzQW55VXBkYXRhYmxlIChjb2xzLmxlbmd0aCwgbnVsbFZhbHVl\nKTwvY29kZT4uCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlzQW55VXBk\nYXRhYmxlKENvbHVtbltdIGNvbHMsIGJvb2xlYW4gbnVsbFZhbHVlKSB7CiAg\nICAgICAgcmV0dXJuIGlzQW55KGNvbHMsIF91blVwZGF0YWJsZSwgX3VuTnVs\nbFVwZGF0YWJsZSwgbnVsbFZhbHVlKTsKICAgIH0KCiAgICAvKioKICAgICAq\nIFJldHVybiB0cnVlIGlmIGFueSBjb2x1bW5zIGZvciB0aGUgZ2l2ZW4ga2V5\nIGFyZSB1cGRhdGFibGUuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlz\nQW55VXBkYXRhYmxlKEZvcmVpZ25LZXkgZmssIGJvb2xlYW4gbnVsbFZhbHVl\nKSB7CiAgICAgICAgcmV0dXJuIGlzQW55KGZrLCBfdW5VcGRhdGFibGUsIF91\nbk51bGxVcGRhdGFibGUsIG51bGxWYWx1ZSkKICAgICAgICAgICAgJiYgKCFu\ndWxsVmFsdWUgfHwgZmsuaXNMb2dpY2FsKCkgfHwgaXNOdWxsYWJsZShmaykp\nOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciBhbGwgY29sdW1ucyB1\ncCB0byBidXQgZXhjbHVkaW5nIHRoZSBnaXZlbiBpbmRleCBhcmUgdXBkYXRh\nYmxlLgogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBpc0FsbFVwZGF0YWJs\nZShpbnQgY29sLCBib29sZWFuIG51bGxWYWx1ZSkgewogICAgICAgIHJldHVy\nbiBpc0FsbChjb2wsIF91blVwZGF0YWJsZSwgX3VuTnVsbFVwZGF0YWJsZSwg\nbnVsbFZhbHVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIEVxdWl2YWxlbnQg\ndG8gPGNvZGU+aXNBbGxVcGRhdGFibGUgKGNvbHMubGVuZ3RoLCBudWxsVmFs\ndWUpPC9jb2RlPi4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gaXNBbGxV\ncGRhdGFibGUoQ29sdW1uW10gY29scywgYm9vbGVhbiBudWxsVmFsdWUpIHsK\nICAgICAgICByZXR1cm4gaXNBbGwoY29scywgX3VuVXBkYXRhYmxlLCBfdW5O\ndWxsVXBkYXRhYmxlLCBudWxsVmFsdWUpOwogICAgfQoKICAgIC8qKgogICAg\nICogUmV0dXJuIHRydWUgaWYgYWxsIGNvbHVtbnMgZm9yIHRoZSBnaXZlbiBr\nZXkgYXJlIHVwZGF0YWJsZS4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4g\naXNBbGxVcGRhdGFibGUoRm9yZWlnbktleSBmaywgYm9vbGVhbiBudWxsVmFs\ndWUpIHsKICAgICAgICByZXR1cm4gaXNBbGwoZmssIF91blVwZGF0YWJsZSwg\nX3VuTnVsbFVwZGF0YWJsZSwgbnVsbFZhbHVlKQogICAgICAgICAgICAmJiAo\nIW51bGxWYWx1ZSB8fCBmay5pc0xvZ2ljYWwoKSB8fCBpc051bGxhYmxlKGZr\nKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRoZSBjb2x1bW4g\nYXQgdGhlIGdpdmVuIGluZGV4IGlzIHVwZGF0YWJsZSBpbiB0aGlzIGNvbnRl\neHQuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFVwZGF0YWJsZShpbnQg\nY29sLCBib29sZWFuIHVwZGF0YWJsZSkgewogICAgICAgIF91blVwZGF0YWJs\nZSA9IHNldChjb2wsIHVwZGF0YWJsZSwgX3VuVXBkYXRhYmxlKTsKICAgIH0K\nCiAgICAvKioKICAgICAqIFdoZXRoZXIgdGhpcyBjb250ZXh0IGNhbiBzZXQg\ndGhlIGdpdmVuIGNvbHVtbiB0byBudWxsL2RlZmF1bHQgaW4KICAgICAqIHRo\naXMgY29udGV4dC4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0TnVsbFVw\nZGF0YWJsZShpbnQgY29sLCBib29sZWFuIHVwZGF0YWJsZSkgewogICAgICAg\nIF91bk51bGxVcGRhdGFibGUgPSBzZXQoY29sLCB1cGRhdGFibGUsIF91bk51\nbGxVcGRhdGFibGUpOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciB0\naGUgY29sdW1uIGF0IHRoZSBnaXZlbiBpbmRleCBoYXMgdGhlIGdpdmVuIHBy\nb3BlcnR5LgogICAgICovCiAgICBwcml2YXRlIGJvb2xlYW4gaXMoaW50IGNv\nbCwgaW50IHByb3BlcnR5LCBpbnQgbnVsbFByb3BlcnR5LAogICAgICAgIGJv\nb2xlYW4gbnVsbFZhbHVlKSB7CiAgICAgICAgcmV0dXJuIChwcm9wZXJ0eSAm\nICgyIDw8IGNvbCkpID09IDAKICAgICAgICAgICAgJiYgKCFudWxsVmFsdWUg\nfHwgKG51bGxQcm9wZXJ0eSAmICgyIDw8IGNvbCkpID09IDApOwogICAgfQoK\nICAgIC8qKgogICAgICogV2hldGhlciB0aGUgY29sdW1uIGhhcyB0aGUgZ2l2\nZW4gcHJvcGVydHkuCiAgICAgKi8KICAgIHByaXZhdGUgYm9vbGVhbiBpcyhD\nb2x1bW4gY29sLCBpbnQgcHJvcGVydHksIGludCBudWxsUHJvcGVydHksCiAg\nICAgICAgYm9vbGVhbiBudWxsVmFsdWUpIHsKICAgICAgICByZXR1cm4gY29s\nICE9IG51bGwgJiYgaXMoMCwgcHJvcGVydHksIG51bGxQcm9wZXJ0eSwgbnVs\nbFZhbHVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIgYW55IGNv\nbHVtbiB1cCB0byBidXQgZXhjbHVkaW5nIHRoZSBnaXZlbiBpbmRleCBoYXMg\ndGhlIGdpdmVuCiAgICAgKiBwcm9wZXJ0eS4KICAgICAqLwogICAgcHJpdmF0\nZSBib29sZWFuIGlzQW55KGludCBjb2wsIGludCBwcm9wZXJ0eSwgaW50IG51\nbGxQcm9wZXJ0eSwKICAgICAgICBib29sZWFuIG51bGxWYWx1ZSkgewogICAg\nICAgIGlmIChjb2wgPT0gMCkKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwog\nICAgICAgIGlmIChwcm9wZXJ0eSA9PSAwKQogICAgICAgICAgICByZXR1cm4g\ndHJ1ZTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNvbDsgaSsrKQog\nICAgICAgICAgICBpZiAoaXMoaSwgcHJvcGVydHksIG51bGxQcm9wZXJ0eSwg\nbnVsbFZhbHVlKSkKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAg\nICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRo\nZXIgYW55IGNvbHVtbnMgaGF2ZSB0aGUgZ2l2ZW4gcHJvcGVydHkuCiAgICAg\nKi8KICAgIHByaXZhdGUgYm9vbGVhbiBpc0FueShDb2x1bW5bXSBjb2xzLCBp\nbnQgcHJvcGVydHksIGludCBudWxsUHJvcGVydHksCiAgICAgICAgYm9vbGVh\nbiBudWxsVmFsdWUpIHsKICAgICAgICByZXR1cm4gaXNBbnkoY29scy5sZW5n\ndGgsIHByb3BlcnR5LCBudWxsUHJvcGVydHksIG51bGxWYWx1ZSk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBXaGV0aGVyIGFueSBjb2x1bW5zIGZvciB0aGUg\nZ2l2ZW4ga2V5IGhhdmUgdGhlIHByb3BlcnR5LgogICAgICovCiAgICBwcml2\nYXRlIGJvb2xlYW4gaXNBbnkoRm9yZWlnbktleSBmaywgaW50IHByb3BlcnR5\nLCBpbnQgbnVsbFByb3BlcnR5LAogICAgICAgIGJvb2xlYW4gbnVsbFZhbHVl\nKSB7CiAgICAgICAgcmV0dXJuIGZrICE9IG51bGwgJiYgaXNBbnkoZmsuZ2V0\nQ29sdW1ucygpLmxlbmd0aAogICAgICAgICAgICArIGZrLmdldENvbnN0YW50\nQ29sdW1ucygpLmxlbmd0aCwgcHJvcGVydHksIG51bGxQcm9wZXJ0eSwKICAg\nICAgICAgICAgbnVsbFZhbHVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIFdo\nZXRoZXIgYWxsIGNvbHVtbnMgdXAgdG8gYnV0IGV4Y2x1ZGluZyB0aGUgZ2l2\nZW4gaW5kZXggaGF2ZSB0aGUgZ2l2ZW4KICAgICAqIHByb3BlcnR5LgogICAg\nICovCiAgICBwcml2YXRlIGJvb2xlYW4gaXNBbGwoaW50IGNvbCwgaW50IHBy\nb3BlcnR5LCBpbnQgbnVsbFByb3BlcnR5LAogICAgICAgIGJvb2xlYW4gbnVs\nbFZhbHVlKSB7CiAgICAgICAgaWYgKGNvbCA9PSAwKQogICAgICAgICAgICBy\nZXR1cm4gZmFsc2U7CiAgICAgICAgaWYgKHByb3BlcnR5ID09IDApCiAgICAg\nICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBp\nIDwgY29sOyBpKyspCiAgICAgICAgICAgIGlmICghaXMoaSwgcHJvcGVydHks\nIG51bGxQcm9wZXJ0eSwgbnVsbFZhbHVlKSkKICAgICAgICAgICAgICAgIHJl\ndHVybiBmYWxzZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAv\nKioKICAgICAqIFdoZXRoZXIgYWxsIGNvbHVtbnMgaGF2ZSB0aGUgZ2l2ZW4g\ncHJvcGVydHkuCiAgICAgKi8KICAgIHByaXZhdGUgYm9vbGVhbiBpc0FsbChD\nb2x1bW5bXSBjb2xzLCBpbnQgcHJvcGVydHksIGludCBudWxsUHJvcGVydHks\nCiAgICAgICAgYm9vbGVhbiBudWxsVmFsdWUpIHsKICAgICAgICByZXR1cm4g\naXNBbGwoY29scy5sZW5ndGgsIHByb3BlcnR5LCBudWxsUHJvcGVydHksIG51\nbGxWYWx1ZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVyIGFsbCBj\nb2x1bW5zIGZvciB0aGUga2V5IGhhdmUgdGhlIGdpdmVuIHByb3BlcnR5Lgog\nICAgICovCiAgICBwcml2YXRlIGJvb2xlYW4gaXNBbGwoRm9yZWlnbktleSBm\naywgaW50IHByb3BlcnR5LCBpbnQgbnVsbFByb3BlcnR5LAogICAgICAgIGJv\nb2xlYW4gbnVsbFZhbHVlKSB7CiAgICAgICAgcmV0dXJuIGZrICE9IG51bGwg\nJiYgaXNBbGwoZmsuZ2V0Q29sdW1ucygpLmxlbmd0aAogICAgICAgICAgICAr\nIGZrLmdldENvbnN0YW50Q29sdW1ucygpLmxlbmd0aCwgcHJvcGVydHksIG51\nbGxQcm9wZXJ0eSwKICAgICAgICAgICAgbnVsbFZhbHVlKTsKICAgIH0KCiAg\nICAvKioKICAgICAqIFNldCB0aGUgZ2l2ZW4gcHJvcGVydHkuCiAgICAgKi8K\nICAgIHByaXZhdGUgaW50IHNldChpbnQgY29sLCBib29sZWFuIGlzLCBpbnQg\ncHJvcGVydHkpIHsKICAgICAgICBpZiAoaXMpCiAgICAgICAgICAgIHJldHVy\nbiBwcm9wZXJ0eSAmIH4oMiA8PCBjb2wpOwogICAgICAgIHJldHVybiBwcm9w\nZXJ0eSB8ICgyIDw8IGNvbCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0\naGVyIHRoZSBnaXZlbiBmb3JlaWduIGtleSBpcyBudWxsYWJsZS4KICAgICAq\nLwogICAgcHJpdmF0ZSBib29sZWFuIGlzTnVsbGFibGUoRm9yZWlnbktleSBm\naykgewogICAgICAgIENvbHVtbltdIGNvbHMgPSBmay5nZXRDb2x1bW5zKCk7\nCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb2xzLmxlbmd0aDsgaSsr\nKQogICAgICAgICAgICBpZiAoY29sc1tpXS5pc05vdE51bGwoKSB8fCBjb2xz\nW2ldLmlzUHJpbWFyeUtleSgpKQogICAgICAgICAgICAgICAgcmV0dXJuIGZh\nbHNlOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQp9Cg==\n","encoding":"base64"}

