{"sha":"eb19597b5dd22f743d5acde372176bcbac7d3ec0","node_id":"MDQ6QmxvYjIwNjM2NDplYjE5NTk3YjVkZDIyZjc0M2Q1YWNkZTM3MjE3NmJjYmFjN2QzZWMw","size":4550,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/eb19597b5dd22f743d5acde372176bcbac7d3ec0","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWE7CgppbXBv\ncnQgamF2YS5zcWwuVHlwZXM7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMuY29uZi5KREJDQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLnNxbC5EQkRpY3Rpb25hcnk7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEubGliLmNvbmYuQ29uZmlndXJhYmxlOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5jb25mLkNvbmZpZ3VyYXRpb247Cgov\nKioKICogRmFjdG9yeSB3aG9zZSBzY2hlbWEgZ3JvdXAgZHluYW1pY2FsbHkg\nZmlsbHMgaXRzZWxmIHdpdGggaW5mb3JtYXRpb24KICogYXMgbWFwcGluZ3Mg\ndmFsaWRhdGUgdGhlbXNlbHZlcyBpbiB0aGVpciA8Y29kZT5tYXA8L2NvZGU+\nIG1ldGhvZC4KICogVGFibGVzIGFyZSBhZGRlZCB3aGVuIHtAbGluayBTY2hl\nbWFHcm91cCNmaW5kVGFibGV9IGlzIGNhbGxlZC4gQ29sdW1ucwogKiBhcmUg\nYWRkZWQgdG8gdGFibGVzIHdoZW4ge0BsaW5rIFRhYmxlI2dldENvbHVtbn0g\naXMgY2FsbGVkLiBBbmQgdGhlCiAqIGNvbHVtbiB0eXBlcyBhcmUgc2V0IHdo\nZW4ge0BsaW5rIENvbHVtbiNpc0NvbXBhdGlibGV9IGlzIGNhbGxlZC4KICoK\nICogQGF1dGhvciBBYmUgV2hpdGUKICovCnB1YmxpYyBjbGFzcyBEeW5hbWlj\nU2NoZW1hRmFjdG9yeQogICAgZXh0ZW5kcyBTY2hlbWFHcm91cAogICAgaW1w\nbGVtZW50cyBTY2hlbWFGYWN0b3J5LCBDb25maWd1cmFibGUgewoKICAgIHBy\naXZhdGUgdHJhbnNpZW50IERCRGljdGlvbmFyeSBfZGljdCA9IG51bGw7CiAg\nICBwcml2YXRlIFN0cmluZyBfc2NoZW1hID0gbnVsbDsKCiAgICBwdWJsaWMg\ndm9pZCBzZXRDb25maWd1cmF0aW9uKENvbmZpZ3VyYXRpb24gY29uZikgewog\nICAgICAgIEpEQkNDb25maWd1cmF0aW9uIGpjb25mID0gKEpEQkNDb25maWd1\ncmF0aW9uKSBjb25mOwogICAgICAgIF9kaWN0ID0gamNvbmYuZ2V0REJEaWN0\naW9uYXJ5SW5zdGFuY2UoKTsKICAgICAgICBfc2NoZW1hID0gamNvbmYuZ2V0\nU2NoZW1hKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc3RhcnRDb25maWd1\ncmF0aW9uKCkgewogICAgfQoKICAgIHB1YmxpYyB2b2lkIGVuZENvbmZpZ3Vy\nYXRpb24oKSB7CiAgICB9CiAgICAKICAgIHB1YmxpYyBTY2hlbWFHcm91cCBy\nZWFkU2NoZW1hKCkgewogICAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHN0b3JlU2NoZW1hKFNjaGVtYUdyb3VwIHNjaGVtYSkg\newogICAgICAgIC8vIG5vdGhpbmcgdG8gZG8KICAgIH0KCiAgICBwdWJsaWMg\nYm9vbGVhbiBpc0tub3duVGFibGUoVGFibGUgdGFibGUpIHsKICAgICAgICBy\nZXR1cm4gc3VwZXIuZmluZFRhYmxlKHRhYmxlKSAhPSBudWxsOwogICAgfQoK\nICAgIHB1YmxpYyBib29sZWFuIGlzS25vd25UYWJsZShTdHJpbmcgbmFtZSkg\newogICAgICAgIHJldHVybiBzdXBlci5maW5kVGFibGUobmFtZSkgIT0gbnVs\nbDsKICAgIH0KCiAgICBwdWJsaWMgVGFibGUgZmluZFRhYmxlKFN0cmluZyBu\nYW1lKSB7CiAgICAgICAgaWYgKG5hbWUgPT0gbnVsbCkKICAgICAgICAgICAg\ncmV0dXJuIG51bGw7CgogICAgICAgIFRhYmxlIHRhYmxlID0gc3VwZXIuZmlu\nZFRhYmxlKG5hbWUpOwogICAgICAgIGlmICh0YWJsZSAhPSBudWxsKQogICAg\nICAgICAgICByZXR1cm4gdGFibGU7CgogICAgICAgIC8vIGlmIGZ1bGwgbmFt\nZSwgc3BsaXQKICAgICAgICBTdHJpbmcgc2NoZW1hTmFtZSA9IG51bGw7CiAg\nICAgICAgU3RyaW5nIHRhYmxlTmFtZSA9IG5hbWU7CiAgICAgICAgaW50IGRv\ndElkeCA9IG5hbWUubGFzdEluZGV4T2YoJy4nKTsKICAgICAgICBpZiAoZG90\nSWR4ICE9IC0xKSB7CiAgICAgICAgICAgIHNjaGVtYU5hbWUgPSBuYW1lLnN1\nYnN0cmluZygwLCBkb3RJZHgpOwogICAgICAgICAgICB0YWJsZU5hbWUgPSBu\nYW1lLnN1YnN0cmluZyhkb3RJZHggKyAxKTsKICAgICAgICB9IGVsc2UKICAg\nICAgICAgICAgc2NoZW1hTmFtZSA9IF9zY2hlbWE7CgogICAgICAgIFNjaGVt\nYSBzY2hlbWEgPSBnZXRTY2hlbWEoc2NoZW1hTmFtZSk7CiAgICAgICAgaWYg\nKHNjaGVtYSA9PSBudWxsKQogICAgICAgICAgICBzY2hlbWEgPSBhZGRTY2hl\nbWEoc2NoZW1hTmFtZSk7CiAgICAgICAgcmV0dXJuIHNjaGVtYS5hZGRUYWJs\nZSh0YWJsZU5hbWUpOwogICAgfQoKICAgIHByb3RlY3RlZCBUYWJsZSBuZXdU\nYWJsZShTdHJpbmcgbmFtZSwgU2NoZW1hIHNjaGVtYSkgewogICAgICAgIHJl\ndHVybiBuZXcgRHluYW1pY1RhYmxlKG5hbWUsIHNjaGVtYSk7CiAgICB9Cgog\nICAgcHJvdGVjdGVkIENvbHVtbiBuZXdDb2x1bW4oU3RyaW5nIG5hbWUsIFRh\nYmxlIHRhYmxlKSB7CiAgICAgICAgcmV0dXJuIG5ldyBEeW5hbWljQ29sdW1u\nKG5hbWUsIHRhYmxlKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRhYmxlIHR5\ncGUgdGhhdCBhZGRzIGNvbHVtbnMgd2hlbiB7QGxpbmsgI2dldENvbHVtbn0g\naXMgY2FsbGVkLgogICAgICovCiAgICBwcml2YXRlIHN0YXRpYyBjbGFzcyBE\neW5hbWljVGFibGUKICAgICAgICBleHRlbmRzIFRhYmxlIHsKCiAgICAgICAg\ncHVibGljIER5bmFtaWNUYWJsZShTdHJpbmcgbmFtZSwgU2NoZW1hIHNjaGVt\nYSkgewogICAgICAgICAgICBzdXBlcihuYW1lLCBzY2hlbWEpOwogICAgICAg\nIH0KCiAgICAgICAgcHVibGljIENvbHVtbiBnZXRDb2x1bW4oU3RyaW5nIG5h\nbWUpIHsKICAgICAgICAgICAgaWYgKG5hbWUgPT0gbnVsbCkKICAgICAgICAg\nICAgICAgIHJldHVybiBudWxsOwoKICAgICAgICAgICAgQ29sdW1uIGNvbCA9\nIHN1cGVyLmdldENvbHVtbihuYW1lKTsKICAgICAgICAgICAgaWYgKGNvbCAh\nPSBudWxsKQogICAgICAgICAgICAgICAgcmV0dXJuIGNvbDsKICAgICAgICAg\nICAgcmV0dXJuIGFkZENvbHVtbihuYW1lKTsKICAgICAgICB9CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBDb2x1bW4gdHlwZSB0aGF0IHNldHMgaXRzIHR5cGUg\nd2hlbiB7QGxpbmsgI2lzQ29tcGF0aWJsZX0gaXMgY2FsbGVkLgogICAgICov\nCiAgICBwcml2YXRlIGNsYXNzIER5bmFtaWNDb2x1bW4KICAgICAgICBleHRl\nbmRzIENvbHVtbiB7CgogICAgICAgIHB1YmxpYyBEeW5hbWljQ29sdW1uKFN0\ncmluZyBuYW1lLCBUYWJsZSB0YWJsZSkgewogICAgICAgICAgICBzdXBlcihu\nYW1lLCB0YWJsZSk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgYm9vbGVh\nbiBpc0NvbXBhdGlibGUoaW50IHR5cGUsIFN0cmluZyB0eXBlTmFtZSwgaW50\nIHNpemUsCiAgICAgICAgICAgIGludCBkZWNpbWFscykgewogICAgICAgICAg\nICBpZiAoZ2V0VHlwZSgpICE9IFR5cGVzLk9USEVSKQogICAgICAgICAgICAg\nICAgcmV0dXJuIHN1cGVyLmlzQ29tcGF0aWJsZSh0eXBlLCB0eXBlTmFtZSwg\nc2l6ZSwgZGVjaW1hbHMpOwoKICAgICAgICAgICAgaWYgKHR5cGUgPT0gVHlw\nZXMuVkFSQ0hBUiAmJiBzaXplIDw9IDApCiAgICAgICAgICAgICAgICBzaXpl\nID0gX2RpY3QuY2hhcmFjdGVyQ29sdW1uU2l6ZTsKICAgICAgICAgICAgc2V0\nVHlwZSh0eXBlKTsKICAgICAgICAgICAgc2V0U2l6ZShzaXplKTsKICAgICAg\nICAgICAgaWYgKHR5cGVOYW1lICE9IG51bGwpCiAgICAgICAgICAgICAgICBz\nZXRUeXBlTmFtZSh0eXBlTmFtZSk7CiAgICAgICAgICAgIGlmIChkZWNpbWFs\ncyA+PSAwKQogICAgICAgICAgICAgICAgc2V0RGVjaW1hbERpZ2l0cyhkZWNp\nbWFscyk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAg\nIH0KfQo=\n","encoding":"base64"}

