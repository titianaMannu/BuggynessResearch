{"sha":"57f0a74a29bedb386443f0587152bd3236886c1d","node_id":"MDQ6QmxvYjIwNjM2NDo1N2YwYTc0YTI5YmVkYjM4NjQ0M2YwNTg3MTUyYmQzMjM2ODg2YzFk","size":5297,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/57f0a74a29bedb386443f0587152bd3236886c1d","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWE7CgppbXBv\ncnQgamF2YS51dGlsLkFycmF5TGlzdDsKaW1wb3J0IGphdmEudXRpbC5MaXN0\nOwoKaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5sYW5nLk9iamVjdFV0aWxz\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkxvY2FsaXpl\ncjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLkludmFsaWRTdGF0\nZUV4Y2VwdGlvbjsKCi8qKgogKiBDb25zdHJhaW50IG92ZXIgbG9jYWwgdGFi\nbGUgY29sdW1ucywgYXMgb3Bwb3NlZCB0byBhIGZvcmVpZ24ga2V5IHdoaWNo\nCiAqIHNwYW5zIHRhYmxlcy4gQ29sdW1uIEFQSXMgY2FuIHJlcHJlc2VudCBh\nIGZ1bGwgY29uc3RyYWludCBvciBhIHBhcnRpYWwKICogY29uc3RyYWludCwg\nYWxpZ25pbmcgd2l0aCB7QGxpbmsgamF2YS5zcWwuRGF0YWJhc2VNZXRhRGF0\nYX0uCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqLwpwdWJsaWMgYWJzdHJh\nY3QgY2xhc3MgTG9jYWxDb25zdHJhaW50CiAgICBleHRlbmRzIENvbnN0cmFp\nbnQgewoKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvY2FsaXplciBfbG9j\nID0gTG9jYWxpemVyLmZvclBhY2thZ2UKICAgICAgICAoTG9jYWxDb25zdHJh\naW50LmNsYXNzKTsKCiAgICBwcml2YXRlIExpc3QgX2NvbExpc3QgPSBudWxs\nOwogICAgcHJpdmF0ZSBDb2x1bW5bXSBfY29scyA9IG51bGw7CgogICAgLyoq\nCiAgICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yLgogICAgICovCiAgICBwdWJs\naWMgTG9jYWxDb25zdHJhaW50KCkgewogICAgfQoKICAgIC8qKgogICAgICog\nQ29uc3RydWN0b3IuCiAgICAgKgogICAgICogQHBhcmFtIG5hbWUgdGhlIG5h\nbWUgb2YgdGhlIGNvbnN0cmFpbnQsIGlmIGFueQogICAgICogQHBhcmFtIHRh\nYmxlIHRoZSB0YWJsZSBvZiB0aGUgY29uc3RyYWludAogICAgICovCiAgICBw\ndWJsaWMgTG9jYWxDb25zdHJhaW50KFN0cmluZyBuYW1lLCBUYWJsZSB0YWJs\nZSkgewogICAgICAgIHN1cGVyKG5hbWUsIHRhYmxlKTsKICAgIH0KCiAgICAv\nKioKICAgICAqIENhbGxlZCB3aGVuIHRoZSBjb25zdHJhaW50IGlzIHJlbW92\nZWQgZnJvbSBpdHMgdGFibGUuCiAgICAgKi8KICAgIHZvaWQgcmVtb3ZlKCkg\newogICAgICAgIC8vIHJlbW92ZSBhbGwgY29sdW1ucwogICAgICAgIHNldENv\nbHVtbnMobnVsbCk7CiAgICAgICAgc3VwZXIucmVtb3ZlKCk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBSZXR1cm4gYWxsIHRoZSBjb2x1bW5zIHRoZSBjb25z\ndHJhaW50IHNwYW5zLgogICAgICovCiAgICBwdWJsaWMgQ29sdW1uW10gZ2V0\nQ29sdW1ucygpIHsKICAgICAgICBpZiAoX2NvbHMgPT0gbnVsbCkKICAgICAg\nICAgICAgX2NvbHMgPSAoX2NvbExpc3QgPT0gbnVsbCkgPyBTY2hlbWFzLkVN\nUFRZX0NPTFVNTlMKICAgICAgICAgICAgICAgIDogKENvbHVtbltdKSBfY29s\nTGlzdC50b0FycmF5KG5ldyBDb2x1bW5bX2NvbExpc3Quc2l6ZSgpXSk7CiAg\nICAgICAgcmV0dXJuIF9jb2xzOwogICAgfQoKICAgIC8qKgogICAgICogU2V0\nIHRoZSBjb2x1bW5zIHRoZSBjb25zdHJhaW50IHNwYW5zLgogICAgICovCiAg\nICBwdWJsaWMgdm9pZCBzZXRDb2x1bW5zKENvbHVtbltdIGNvbHMpIHsKICAg\nICAgICBDb2x1bW5bXSBjdXIgPSBnZXRDb2x1bW5zKCk7CiAgICAgICAgZm9y\nIChpbnQgaSA9IDA7IGkgPCBjdXIubGVuZ3RoOyBpKyspCiAgICAgICAgICAg\nIHJlbW92ZUNvbHVtbihjdXJbaV0pOwoKICAgICAgICBpZiAoY29scyAhPSBu\ndWxsKQogICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNvbHMubGVu\nZ3RoOyBpKyspCiAgICAgICAgICAgICAgICBhZGRDb2x1bW4oY29sc1tpXSk7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBBZGQgYSBjb2x1bW4gdG8gdGhlIGNv\nbnN0cmFpbnQuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIGFkZENvbHVtbihD\nb2x1bW4gY29sKSB7CiAgICAJaWYgKGNvbCA9PSBudWxsKQogICAgICAgICAg\nICB0aHJvdyBuZXcgSW52YWxpZFN0YXRlRXhjZXB0aW9uKF9sb2MuZ2V0KCJ0\nYWJsZS1taXNtYXRjaCIsCiAgICAgICAgICAgICAgICBjb2wgPT0gbnVsbCA/\nIG51bGwgOiBjb2wuZ2V0VGFibGUoKSwKICAgICAgICAgICAgICAgIGNvbCA9\nPSBudWxsID8gbnVsbCA6IGdldFRhYmxlKCkpKTsKICAgIAkKICAgICAgICBp\nZiAoX2NvbExpc3QgPT0gbnVsbCkKICAgICAgICAgICAgX2NvbExpc3QgPSBu\nZXcgQXJyYXlMaXN0KDMpOwogICAgICAgIGVsc2UgaWYgKF9jb2xMaXN0LmNv\nbnRhaW5zKGNvbCkpCiAgICAgICAgICAgIHJldHVybjsKCiAgICAgICAgX2Nv\nbExpc3QuYWRkKGNvbCk7CiAgICAgICAgX2NvbHMgPSBudWxsOwogICAgfQoK\nICAgIC8qKgogICAgICogUmVtb3ZlIGEgY29sdW1uIGZyb20gdGhlIGNvbnN0\ncmFpbnQuCiAgICAgKgogICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBjb2x1\nbW4gd2FzIHJlbW92ZWQsIGZhbHNlIGlmIG5vdCBwYXJ0IG9mIHRoZQogICAg\nICogcHJpbWFyeSBrZXkKICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gcmVt\nb3ZlQ29sdW1uKENvbHVtbiBjb2wpIHsKICAgICAgICBpZiAoY29sID09IG51\nbGwgfHwgX2NvbExpc3QgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIGZh\nbHNlOwogICAgICAgIGlmIChfY29sTGlzdC5yZW1vdmUoY29sKSkgewogICAg\nICAgICAgICBfY29scyA9IG51bGw7CiAgICAgICAgICAgIHJldHVybiB0cnVl\nOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBSZXR1cm4gdHJ1ZSBpZiB0aGUgcGsgaW5jbHVkZXMgdGhl\nIGdpdmVuIGNvbHVtbi4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gY29u\ndGFpbnNDb2x1bW4oQ29sdW1uIGNvbCkgewogICAgICAgIGlmIChjb2wgPT0g\nbnVsbCB8fCBfY29sTGlzdCA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4g\nZmFsc2U7CiAgICAgICAgcmV0dXJuIF9jb2xMaXN0LmNvbnRhaW5zKGNvbCk7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBSZWYgYWxsIGNvbHVtbnMgaW4gdGhp\ncyBjb25zdHJhaW50LgogICAgICovCiAgICBwdWJsaWMgdm9pZCByZWZDb2x1\nbW5zKCkgewogICAgICAgIENvbHVtbltdIGNvbHMgPSBnZXRDb2x1bW5zKCk7\nCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb2xzLmxlbmd0aDsgaSsr\nKQogICAgICAgICAgICBjb2xzW2ldLnJlZigpOwogICAgfQoKICAgIC8qKgog\nICAgICogRGVyZWYgYWxsIGNvbHVtbnMgaW4gdGhpcyBjb25zdHJhaW50Lgog\nICAgICovCiAgICBwdWJsaWMgdm9pZCBkZXJlZkNvbHVtbnMoKSB7CiAgICAg\nICAgQ29sdW1uW10gY29scyA9IGdldENvbHVtbnMoKTsKICAgICAgICBmb3Ig\nKGludCBpID0gMDsgaSA8IGNvbHMubGVuZ3RoOyBpKyspCiAgICAgICAgICAg\nIGNvbHNbaV0uZGVyZWYoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVy\nbiB0cnVlIGlmIHRoZSBnaXZlbiBjb2x1bW5zIG1hdGNoIHRoZSBjb2x1bW5z\nIG9mIHRoaXMgY29uc3RyYWludC4KICAgICAqLwogICAgcHVibGljIGJvb2xl\nYW4gY29sdW1uc01hdGNoKENvbHVtbltdIG9jb2xzKSB7CiAgICAgICAgQ29s\ndW1uW10gY29scyA9IGdldENvbHVtbnMoKTsKICAgICAgICBpZiAoY29scy5s\nZW5ndGggIT0gb2NvbHMubGVuZ3RoKQogICAgICAgICAgICByZXR1cm4gZmFs\nc2U7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBvY29scy5sZW5ndGg7\nIGkrKykKICAgICAgICAgICAgaWYgKCFoYXNDb2x1bW4oY29scywgb2NvbHNb\naV0pKQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIHJl\ndHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHdoZXRo\nZXIgdGhlIGdpdmVuIGNvbHVtbiBleGlzdHMgaW4gdGhlIGFycmF5LgogICAg\nICovCiAgICBwcml2YXRlIHN0YXRpYyBib29sZWFuIGhhc0NvbHVtbihDb2x1\nbW5bXSBjb2xzLCBDb2x1bW4gY29sKSB7CiAgICAgICAgZm9yIChpbnQgaSA9\nIDA7IGkgPCBjb2xzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICBpZiAoY29s\nc1tpXS5nZXRGdWxsTmFtZSgpLmVxdWFsc0lnbm9yZUNhc2UoY29sLmdldEZ1\nbGxOYW1lKCkpKQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAg\nICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJu\nIHRydWUgaWYgdGhlIGNvbHVtbnMgb2YgdGhpcyBjb25zdHJhaW50IG1hdGNo\nZXMgdGhhdCBvZgogICAgICogdGhlIGdpdmVuIG9uZS4gVGhlIGNvbnN0cmFp\nbnRzIGFyZSBub3QgY29tcGFyZWQgb24gbmFtZS4KICAgICAqLwogICAgcHJv\ndGVjdGVkIGJvb2xlYW4gZXF1YWxzTG9jYWxDb25zdHJhaW50KExvY2FsQ29u\nc3RyYWludCBsYykgewogICAgICAgIGlmIChsYyA9PSB0aGlzKQogICAgICAg\nICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICBpZiAobGMgPT0gbnVsbCkKICAg\nICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIHJldHVybiBjb2x1bW5z\nTWF0Y2gobGMuZ2V0Q29sdW1ucygpKTsKICAgIH0KfQo=\n","encoding":"base64"}

