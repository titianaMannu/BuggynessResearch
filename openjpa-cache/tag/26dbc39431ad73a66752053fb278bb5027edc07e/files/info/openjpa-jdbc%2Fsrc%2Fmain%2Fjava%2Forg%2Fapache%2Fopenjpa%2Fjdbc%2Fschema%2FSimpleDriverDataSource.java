{"sha":"06a82cb26f92bb0741b5243ec59c0ab0fb87fdd5","node_id":"MDQ6QmxvYjIwNjM2NDowNmE4MmNiMjZmOTJiYjA3NDFiNTI0M2VjNTljMGFiMGZiODdmZGQ1","size":5884,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/06a82cb26f92bb0741b5243ec59c0ab0fb87fdd5","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWE7CgppbXBv\ncnQgamF2YS5pby5QcmludFdyaXRlcjsKaW1wb3J0IGphdmEuc2VjdXJpdHku\nQWNjZXNzQ29udHJvbGxlcjsKaW1wb3J0IGphdmEuc2VjdXJpdHkuUHJpdmls\nZWdlZEFjdGlvbkV4Y2VwdGlvbjsKaW1wb3J0IGphdmEuc3FsLkNvbm5lY3Rp\nb247CmltcG9ydCBqYXZhLnNxbC5Ecml2ZXI7CmltcG9ydCBqYXZhLnNxbC5E\ncml2ZXJNYW5hZ2VyOwppbXBvcnQgamF2YS5zcWwuU1FMRXhjZXB0aW9uOwpp\nbXBvcnQgamF2YS51dGlsLkxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuUHJvcGVy\ndGllczsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuREJE\naWN0aW9uYXJ5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5qZGJj\nLkRlbGVnYXRpbmdEYXRhU291cmNlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmxpYi51dGlsLkoyRG9Qcml2SGVscGVyOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmxpYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS51dGlsLlN0b3JlRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnV0aWwuVXNlckV4Y2VwdGlvbjsKCi8qKgogKiBOb24t\ncG9vbGluZyBkcml2ZXIgZGF0YSBzb3VyY2UuCiAqLwpwdWJsaWMgY2xhc3Mg\nU2ltcGxlRHJpdmVyRGF0YVNvdXJjZQogICAgaW1wbGVtZW50cyBEcml2ZXJE\nYXRhU291cmNlIHsKCiAgICBwcml2YXRlIFN0cmluZyBfY29ubmVjdGlvbkRy\naXZlck5hbWU7CiAgICBwcml2YXRlIFN0cmluZyBfY29ubmVjdGlvblVSTDsK\nICAgIHByaXZhdGUgU3RyaW5nIF9jb25uZWN0aW9uVXNlck5hbWU7CiAgICBw\ncml2YXRlIFN0cmluZyBfY29ubmVjdGlvblBhc3N3b3JkOwogICAgcHJpdmF0\nZSBQcm9wZXJ0aWVzIF9jb25uZWN0aW9uUHJvcGVydGllczsKICAgIHByaXZh\ndGUgUHJvcGVydGllcyBfY29ubmVjdGlvbkZhY3RvcnlQcm9wZXJ0aWVzOwog\nICAgcHJpdmF0ZSBEcml2ZXIgX2RyaXZlcjsKICAgIHByaXZhdGUgQ2xhc3NM\nb2FkZXIgX2NsYXNzTG9hZGVyOwogICAgCiAgICBwcm90ZWN0ZWQgc3RhdGlj\nIExvY2FsaXplciBfbG9jID0gCiAgICAJTG9jYWxpemVyLmZvclBhY2thZ2Uo\nU2ltcGxlRHJpdmVyRGF0YVNvdXJjZS5jbGFzcyk7CiAgICBwcm90ZWN0ZWQg\nc3RhdGljIExvY2FsaXplciBfZWxvYyA9IAogICAgCUxvY2FsaXplci5mb3JQ\nYWNrYWdlKERlbGVnYXRpbmdEYXRhU291cmNlLmNsYXNzKTsKCiAgICBwdWJs\naWMgQ29ubmVjdGlvbiBnZXRDb25uZWN0aW9uKCkKICAgICAgICB0aHJvd3Mg\nU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gZ2V0Q29ubmVjdGlvbihu\ndWxsKTsKICAgIH0KCiAgICBwdWJsaWMgQ29ubmVjdGlvbiBnZXRDb25uZWN0\naW9uKFN0cmluZyB1c2VybmFtZSwgU3RyaW5nIHBhc3N3b3JkKQogICAgICAg\nIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIFByb3BlcnRpZXMgcHJv\ncHMgPSBuZXcgUHJvcGVydGllcygpOwogICAgICAgIGlmICh1c2VybmFtZSA9\nPSBudWxsKQogICAgICAgICAgICB1c2VybmFtZSA9IF9jb25uZWN0aW9uVXNl\nck5hbWU7CiAgICAgICAgaWYgKHVzZXJuYW1lICE9IG51bGwpCiAgICAgICAg\nICAgIHByb3BzLnB1dCgidXNlciIsIHVzZXJuYW1lKTsKCiAgICAgICAgaWYg\nKHBhc3N3b3JkID09IG51bGwpCiAgICAgICAgICAgIHBhc3N3b3JkID0gX2Nv\nbm5lY3Rpb25QYXNzd29yZDsKICAgICAgICBpZiAocGFzc3dvcmQgIT0gbnVs\nbCkKICAgICAgICAgICAgcHJvcHMucHV0KCJwYXNzd29yZCIsIHBhc3N3b3Jk\nKTsKCiAgICAgICAgcmV0dXJuIGdldENvbm5lY3Rpb24ocHJvcHMpOwogICAg\nfQoKICAgIHB1YmxpYyBDb25uZWN0aW9uIGdldENvbm5lY3Rpb24oUHJvcGVy\ndGllcyBwcm9wcykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAg\nIAlDb25uZWN0aW9uIGNvbiA9IGdldERyaXZlcigpLmNvbm5lY3QoX2Nvbm5l\nY3Rpb25VUkwsIHByb3BzKTsKICAgIAlpZiAoY29uID09IG51bGwpIHsKICAg\nICAgICAJdGhyb3cgbmV3IFNRTEV4Y2VwdGlvbihfZWxvYy5nZXQoInBvb2xk\ncy1udWxsIiwKICAgICAgICAJCQlfY29ubmVjdGlvbkRyaXZlck5hbWUsIF9j\nb25uZWN0aW9uVVJMKS5nZXRNZXNzYWdlKCkpOwogICAgICAgIH0KICAgICAg\nICByZXR1cm4gY29uOwogICAgfQoKICAgIHB1YmxpYyBpbnQgZ2V0TG9naW5U\naW1lb3V0KCkgewogICAgICAgIHJldHVybiAwOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHNldExvZ2luVGltZW91dChpbnQgc2Vjb25kcykgewogICAgfQoK\nICAgIHB1YmxpYyBQcmludFdyaXRlciBnZXRMb2dXcml0ZXIoKSB7CiAgICAg\nICAgcmV0dXJuIERyaXZlck1hbmFnZXIuZ2V0TG9nV3JpdGVyKCk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgc2V0TG9nV3JpdGVyKFByaW50V3JpdGVyIG91\ndCkgewogICAgfQoKICAgIHB1YmxpYyB2b2lkIGluaXREQkRpY3Rpb25hcnko\nREJEaWN0aW9uYXJ5IGRpY3QpIHsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBz\nZXRDb25uZWN0aW9uVVJMKFN0cmluZyBjb25uZWN0aW9uVVJMKSB7CiAgICAg\nICAgX2Nvbm5lY3Rpb25VUkwgPSBjb25uZWN0aW9uVVJMOwogICAgfQoKICAg\nIHB1YmxpYyBTdHJpbmcgZ2V0Q29ubmVjdGlvblVSTCgpIHsKICAgICAgICBy\nZXR1cm4gX2Nvbm5lY3Rpb25VUkw7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nc2V0Q29ubmVjdGlvblVzZXJOYW1lKFN0cmluZyBjb25uZWN0aW9uVXNlck5h\nbWUpIHsKICAgICAgICBfY29ubmVjdGlvblVzZXJOYW1lID0gY29ubmVjdGlv\nblVzZXJOYW1lOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgZ2V0Q29ubmVj\ndGlvblVzZXJOYW1lKCkgewogICAgICAgIHJldHVybiBfY29ubmVjdGlvblVz\nZXJOYW1lOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldENvbm5lY3Rpb25Q\nYXNzd29yZChTdHJpbmcgY29ubmVjdGlvblBhc3N3b3JkKSB7CiAgICAgICAg\nX2Nvbm5lY3Rpb25QYXNzd29yZCA9IGNvbm5lY3Rpb25QYXNzd29yZDsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRDb25uZWN0aW9uUHJvcGVydGllcyhQ\ncm9wZXJ0aWVzIHByb3BzKSB7CiAgICAgICAgX2Nvbm5lY3Rpb25Qcm9wZXJ0\naWVzID0gcHJvcHM7CiAgICB9CgogICAgcHVibGljIFByb3BlcnRpZXMgZ2V0\nQ29ubmVjdGlvblByb3BlcnRpZXMoKSB7CiAgICAgICAgcmV0dXJuIF9jb25u\nZWN0aW9uUHJvcGVydGllczsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRD\nb25uZWN0aW9uRmFjdG9yeVByb3BlcnRpZXMoUHJvcGVydGllcyBwcm9wcykg\newogICAgICAgIF9jb25uZWN0aW9uRmFjdG9yeVByb3BlcnRpZXMgPSBwcm9w\nczsKICAgIH0KCiAgICBwdWJsaWMgUHJvcGVydGllcyBnZXRDb25uZWN0aW9u\nRmFjdG9yeVByb3BlcnRpZXMoKSB7CiAgICAgICAgcmV0dXJuIF9jb25uZWN0\naW9uRmFjdG9yeVByb3BlcnRpZXM7CiAgICB9CgogICAgcHVibGljIExpc3Qg\nY3JlYXRlQ29ubmVjdGlvbkRlY29yYXRvcnMoKSB7CiAgICAgICAgcmV0dXJu\nIG51bGw7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0Q2xhc3NMb2FkZXIo\nQ2xhc3NMb2FkZXIgY2xhc3NMb2FkZXIpIHsKICAgICAgICBfY2xhc3NMb2Fk\nZXIgPSBjbGFzc0xvYWRlcjsKICAgIH0KCiAgICBwdWJsaWMgQ2xhc3NMb2Fk\nZXIgZ2V0Q2xhc3NMb2FkZXIoKSB7CiAgICAgICAgcmV0dXJuIF9jbGFzc0xv\nYWRlcjsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRDb25uZWN0aW9uRHJp\ndmVyTmFtZShTdHJpbmcgY29ubmVjdGlvbkRyaXZlck5hbWUpIHsKICAgICAg\nICBfY29ubmVjdGlvbkRyaXZlck5hbWUgPSBjb25uZWN0aW9uRHJpdmVyTmFt\nZTsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nIGdldENvbm5lY3Rpb25Ecml2\nZXJOYW1lKCkgewogICAgICAgIHJldHVybiBfY29ubmVjdGlvbkRyaXZlck5h\nbWU7CiAgICB9CgogICAgcHJpdmF0ZSBEcml2ZXIgZ2V0RHJpdmVyKCkgewog\nICAgICAgIGlmIChfZHJpdmVyICE9IG51bGwpCiAgICAgICAgICAgIHJldHVy\nbiBfZHJpdmVyOwoKICAgICAgICB0cnkgeyAKICAgICAgICAgICAgX2RyaXZl\nciA9IERyaXZlck1hbmFnZXIuZ2V0RHJpdmVyKF9jb25uZWN0aW9uVVJMKTsK\nICAgICAgICAgICAgaWYgKF9kcml2ZXIgIT0gbnVsbCkKICAgICAgICAgICAg\nICAgIHJldHVybiBfZHJpdmVyOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlv\nbiBlKSB7CiAgICAgICAgfQoKICAgICAgICB0cnkgewogICAgICAgICAgICBD\nbGFzcy5mb3JOYW1lKF9jb25uZWN0aW9uRHJpdmVyTmFtZSwgdHJ1ZSwgX2Ns\nYXNzTG9hZGVyKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewog\nICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgICBfZHJpdmVyID0g\nRHJpdmVyTWFuYWdlci5nZXREcml2ZXIoX2Nvbm5lY3Rpb25VUkwpOwogICAg\nICAgICAgICBpZiAoX2RyaXZlciAhPSBudWxsKQogICAgICAgICAgICAgICAg\ncmV0dXJuIF9kcml2ZXI7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUp\nIHsKICAgICAgICB9CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIENsYXNz\nIGMgPSBDbGFzcy5mb3JOYW1lKF9jb25uZWN0aW9uRHJpdmVyTmFtZSwKICAg\nICAgICAgICAgICAgIHRydWUsIF9jbGFzc0xvYWRlcik7CiAgICAgICAgICAg\nIF9kcml2ZXIgPSAoRHJpdmVyKSBBY2Nlc3NDb250cm9sbGVyLmRvUHJpdmls\nZWdlZCgKICAgICAgICAgICAgICAgIEoyRG9Qcml2SGVscGVyLm5ld0luc3Rh\nbmNlQWN0aW9uKGMpKTsKICAgICAgICAgICAgcmV0dXJuIF9kcml2ZXI7CiAg\nICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgaWYg\nKGUgaW5zdGFuY2VvZiBSdW50aW1lRXhjZXB0aW9uKQogICAgICAgICAgICAg\nICAgdGhyb3coUnVudGltZUV4Y2VwdGlvbikgZTsKICAgICAgICAgICAgaWYg\nKGUgaW5zdGFuY2VvZiBQcml2aWxlZ2VkQWN0aW9uRXhjZXB0aW9uKQogICAg\nICAgICAgICAgICAgZSA9ICgoUHJpdmlsZWdlZEFjdGlvbkV4Y2VwdGlvbikg\nZSkuZ2V0RXhjZXB0aW9uKCk7CiAgICAgICAgICAgIHRocm93IG5ldyBTdG9y\nZUV4Y2VwdGlvbihlKTsKICAgICAgICB9CiAgICB9Cn0KCg==\n","encoding":"base64"}

