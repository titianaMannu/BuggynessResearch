{"sha":"df21bcf4ba369d3f9032fb1906fe84282752055f","node_id":"MDQ6QmxvYjIwNjM2NDpkZjIxYmNmNGJhMzY5ZDNmOTAzMmZiMTkwNmZlODQyODI3NTIwNTVm","size":16713,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/df21bcf4ba369d3f9032fb1906fe84282752055f","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWE7CgppbXBv\ncnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEuaW8uU3RyaW5n\nUmVhZGVyOwppbXBvcnQgamF2YS5pby5TdHJpbmdXcml0ZXI7CmltcG9ydCBq\nYXZhLmlvLldyaXRlcjsKaW1wb3J0IGphdmEuc3FsLkNvbm5lY3Rpb247Cmlt\ncG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDsKaW1wb3J0IGphdmEu\nc3FsLlJlc3VsdFNldDsKaW1wb3J0IGphdmEuc3FsLlNRTEV4Y2VwdGlvbjsK\naW1wb3J0IGphdmEuc3FsLlR5cGVzOwoKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLmNvbmYuSkRCQ0NvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuamRiYy5jb25mLkpEQkNDb25maWd1cmF0aW9uSW1w\nbDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5EQkRpY3Rp\nb25hcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuU1FM\nQnVmZmVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNR\nTEV4Y2VwdGlvbnM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmNv\nbmYuQ29uZmlndXJhYmxlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxp\nYi5jb25mLkNvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEubGliLmNvbmYuQ29uZmlndXJhdGlvbnM7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEubGliLmxvZy5Mb2c7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEubGliLnV0aWwuTG9jYWxpemVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmxpYi51dGlsLk9wdGlvbnM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEubWV0YS5KYXZhVHlwZXM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\ndXRpbC5HZW5lcmFsRXhjZXB0aW9uOwppbXBvcnQgc2VycC51dGlsLk51bWJl\ncnM7CmltcG9ydCBzZXJwLnV0aWwuU3RyaW5nczsKCi8qKgogKiBGYWN0b3J5\nIHRoYXQgdXNlcyBhbiBYTUwgc2NoZW1hIGRlZmluaXRpb24gc3RvcmVkIGlu\nIGEgZGF0YWJhc2UgdGFibGUKICogdG8gcmVjb3JkIHRoZSBzeXN0ZW0gc2No\nZW1hLgogKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKi8KcHVibGljIGNsYXNz\nIFRhYmxlU2NoZW1hRmFjdG9yeQogICAgaW1wbGVtZW50cyBTY2hlbWFGYWN0\nb3J5LCBDb25maWd1cmFibGUgewoKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwg\nU3RyaW5nIEFDVElPTl9BREQgPSAiYWRkIjsKICAgIHB1YmxpYyBzdGF0aWMg\nZmluYWwgU3RyaW5nIEFDVElPTl9EUk9QID0gImRyb3AiOwoKICAgIHByaXZh\ndGUgc3RhdGljIGZpbmFsIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVyLmZv\nclBhY2thZ2UKICAgICAgICAoVGFibGVTY2hlbWFGYWN0b3J5LmNsYXNzKTsK\nICAgIHByaXZhdGUgc3RhdGljIGJvb2xlYW4gX3JlZnJlc2hlZFRhYmxlID0g\nZmFsc2U7CgogICAgcHJpdmF0ZSBKREJDQ29uZmlndXJhdGlvbiBfY29uZiA9\nIG51bGw7CiAgICBwcml2YXRlIExvZyBfbG9nID0gbnVsbDsKICAgIHByaXZh\ndGUgU3RyaW5nIF90YWJsZSA9ICJPUEVOSlBBX1NDSEVNQSI7CiAgICBwcml2\nYXRlIFN0cmluZyBfcGtDb2x1bW5OYW1lID0gIklEIjsKICAgIHByaXZhdGUg\nU3RyaW5nIF9zY2hlbWFDb2x1bW5OYW1lID0gIlNDSEVNQV9ERUYiOwogICAg\ncHJpdmF0ZSBDb2x1bW4gX3BrQ29sdW1uID0gbnVsbDsKICAgIHByaXZhdGUg\nQ29sdW1uIF9zY2hlbWFDb2x1bW4gPSBudWxsOwoKICAgIC8qKgogICAgICog\nVGhlIG5hbWUgb2YgdGhlIHNjaGVtYSBkZWZpbml0aW9uIHRhYmxlLiBEZWZh\ndWx0cyB0bwogICAgICogPGNvZGU+T1BFTkpQQV9TQ0hFTUE8L2NvZGU+Lgog\nICAgICovCiAgICBwdWJsaWMgU3RyaW5nIGdldFRhYmxlKCkgewogICAgICAg\nIHJldHVybiBfdGFibGU7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgbmFt\nZSBvZiB0aGUgc2NoZW1hIGRlZmluaXRpb24gdGFibGUuIERlZmF1bHRzIHRv\nCiAgICAgKiA8Y29kZT5PUEVOSlBBX1NDSEVNQTwvY29kZT4uCiAgICAgKi8K\nICAgIHB1YmxpYyB2b2lkIHNldFRhYmxlKFN0cmluZyBuYW1lKSB7CiAgICAg\nICAgX3RhYmxlID0gbmFtZTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXBy\nZWNhdGVkIFVzZSB7QGxpbmsgI3NldFRhYmxlfS4gUmV0YWluZWQgZm9yCiAg\nICAgKiBiYWNrd2FyZHMtY29tcGF0aWJsZSBhdXRvLWNvbmZpZ3VyYXRpb24u\nCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFRhYmxlTmFtZShTdHJpbmcg\nbmFtZSkgewogICAgICAgIHNldFRhYmxlKG5hbWUpOwogICAgfQoKICAgIC8q\nKgogICAgICogVGhlIG5hbWUgb2YgdGhlIHByaW1hcnkga2V5IGNvbHVtbiBv\nbiB0aGUgc2NoZW1hIGRlZmluaXRpb24gdGFibGUuCiAgICAgKiBEZWZhdWx0\ncyB0byA8Y29kZT5JRDwvY29kZT4uCiAgICAgKi8KICAgIHB1YmxpYyB2b2lk\nIHNldFByaW1hcnlLZXlDb2x1bW4oU3RyaW5nIG5hbWUpIHsKICAgICAgICBf\ncGtDb2x1bW5OYW1lID0gbmFtZTsKICAgIH0KCiAgICAvKioKICAgICAqIFRo\nZSBuYW1lIG9mIHRoZSBwcmltYXJ5IGtleSBjb2x1bW4gb24gdGhlIHNjaGVt\nYSBkZWZpbml0aW9uIHRhYmxlLgogICAgICogRGVmYXVsdHMgdG8gPGNvZGU+\nSUQ8L2NvZGU+LgogICAgICovCiAgICBwdWJsaWMgU3RyaW5nIGdldFByaW1h\ncnlLZXlDb2x1bW4oKSB7CiAgICAgICAgcmV0dXJuIF9wa0NvbHVtbk5hbWU7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgc2NoZW1h\nIGNvbHVtbiBvbiB0aGUgc2NoZW1hIGRlZmluaXRpb24gdGFibGUuCiAgICAg\nKiBEZWZhdWx0cyB0byA8Y29kZT5TQ0hFTUFfREVGPC9jb2RlPi4KICAgICAq\nLwogICAgcHVibGljIHZvaWQgc2V0U2NoZW1hQ29sdW1uKFN0cmluZyBuYW1l\nKSB7CiAgICAgICAgX3NjaGVtYUNvbHVtbk5hbWUgPSBuYW1lOwogICAgfQoK\nICAgIC8qKgogICAgICogVGhlIG5hbWUgb2YgdGhlIHNjaGVtYSBjb2x1bW4g\nb24gdGhlIHNjaGVtYSBkZWZpbml0aW9uIHRhYmxlLgogICAgICogRGVmYXVs\ndHMgdG8gPGNvZGU+U0NIRU1BX0RFRjwvY29kZT4uCiAgICAgKi8KICAgIHB1\nYmxpYyBTdHJpbmcgZ2V0U2NoZW1hQ29sdW1uKCkgewogICAgICAgIHJldHVy\nbiBfc2NoZW1hQ29sdW1uTmFtZTsKICAgIH0KCiAgICBwdWJsaWMgSkRCQ0Nv\nbmZpZ3VyYXRpb24gZ2V0Q29uZmlndXJhdGlvbigpIHsKICAgICAgICByZXR1\ncm4gX2NvbmY7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0Q29uZmlndXJh\ndGlvbihDb25maWd1cmF0aW9uIGNvbmYpIHsKICAgICAgICBfY29uZiA9IChK\nREJDQ29uZmlndXJhdGlvbikgY29uZjsKICAgICAgICBfbG9nID0gX2NvbmYu\nZ2V0TG9nKEpEQkNDb25maWd1cmF0aW9uLkxPR19TQ0hFTUEpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHN0YXJ0Q29uZmlndXJhdGlvbigpIHsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBlbmRDb25maWd1cmF0aW9uKCkgewogICAgICAg\nIGJ1aWxkVGFibGUoKTsKICAgIH0KCiAgICBwdWJsaWMgc3luY2hyb25pemVk\nIFNjaGVtYUdyb3VwIHJlYWRTY2hlbWEoKSB7CiAgICAgICAgU3RyaW5nIHNj\naGVtYSA9IG51bGw7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgc2NoZW1h\nID0gcmVhZFNjaGVtYUNvbHVtbigpOwogICAgICAgIH0gY2F0Y2ggKFNRTEV4\nY2VwdGlvbiBzZSkgewogICAgICAgICAgICBpZiAoX2xvZy5pc1dhcm5FbmFi\nbGVkKCkpCiAgICAgICAgICAgICAgICBfbG9nLndhcm4oX2xvYy5nZXQoImJh\nZC1zY2gtcmVhZCIsIHNlKSk7CiAgICAgICAgfQogICAgICAgIGlmIChzY2hl\nbWEgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIG5ldyBTY2hlbWFHcm91\ncCgpOwoKICAgICAgICBYTUxTY2hlbWFQYXJzZXIgcGFyc2VyID0gbmV3IFhN\nTFNjaGVtYVBhcnNlcihfY29uZik7CiAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgcGFyc2VyLnBhcnNlKG5ldyBTdHJpbmdSZWFkZXIoc2NoZW1hKSwKICAg\nICAgICAgICAgICAgIF9zY2hlbWFDb2x1bW4uZ2V0RnVsbE5hbWUoKSk7CiAg\nICAgICAgfSBjYXRjaCAoSU9FeGNlcHRpb24gaW9lKSB7CiAgICAgICAgICAg\nIHRocm93IG5ldyBHZW5lcmFsRXhjZXB0aW9uKGlvZSk7CiAgICAgICAgfQog\nICAgICAgIHJldHVybiBwYXJzZXIuZ2V0U2NoZW1hR3JvdXAoKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBzdG9yZVNjaGVtYShTY2hlbWFHcm91cCBzY2hl\nbWEpIHsKICAgICAgICBYTUxTY2hlbWFTZXJpYWxpemVyIHNlciA9IG5ldyBY\nTUxTY2hlbWFTZXJpYWxpemVyKF9jb25mKTsKICAgICAgICBzZXIuYWRkQWxs\nKHNjaGVtYSk7CiAgICAgICAgV3JpdGVyIHdyaXRlciA9IG5ldyBTdHJpbmdX\ncml0ZXIoKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBzZXIuc2VyaWFs\naXplKHdyaXRlciwgc2VyLkNPTVBBQ1QpOwogICAgICAgIH0gY2F0Y2ggKElP\nRXhjZXB0aW9uIGlvZSkgewogICAgICAgICAgICB0aHJvdyBuZXcgR2VuZXJh\nbEV4Y2VwdGlvbihpb2UpOwogICAgICAgIH0KCiAgICAgICAgU3RyaW5nIHNj\naGVtYVN0ciA9IHdyaXRlci50b1N0cmluZygpOwogICAgICAgIHRyeSB7CiAg\nICAgICAgICAgIHdyaXRlU2NoZW1hQ29sdW1uKHNjaGVtYVN0cik7CiAgICAg\nICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIHNlKSB7CiAgICAgICAgICAgIGlm\nIChfbG9nLmlzV2FybkVuYWJsZWQoKSkKICAgICAgICAgICAgICAgIF9sb2cu\nd2FybihfbG9jLmdldCgiYmFkLXNjaC13cml0ZS0xIiwgc2UpKTsKCiAgICAg\nICAgICAgIC8vIG1heWJlIHRoZSB1cGRhdGUgZmFpbGVkIGIvYyB0aGUgc2Vx\ndWVuY2UgdGFibGUgZG9lc24ndAogICAgICAgICAgICAvLyBleGlzdCB5ZXQ7\nIGNyZWF0ZSBpdCBub3c7IG5vdGUgdGhhdCB0aG91Z2ggd2Ugc3luY2hyb25p\nemUKICAgICAgICAgICAgLy8gaGVyZSwgb3RoZXIgSlZNcyBjYW4gc3RpbGwg\nYmUgdHJ5aW5nIHRvIGNyZWF0ZSB0aGUgdGFibGUgYXQKICAgICAgICAgICAg\nLy8gdGhlIHNhbWUgdGltZSAodW5saWtlbHksIHNpbmNlIHRoaXMgaXMgYSBk\nZXYtdG9vbCBvcCkKICAgICAgICAgICAgc3luY2hyb25pemVkIChUYWJsZVNj\naGVtYUZhY3RvcnkuY2xhc3MpIHsKICAgICAgICAgICAgICAgIGlmICghX3Jl\nZnJlc2hlZFRhYmxlKSB7CiAgICAgICAgICAgICAgICAgICAgX3JlZnJlc2hl\nZFRhYmxlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAg\nICAgICAgICAgICAgICAgICAgICByZWZyZXNoVGFibGUoKTsKICAgICAgICAg\nICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAg\nICAgICAgICAgICAgICBpZiAoX2xvZy5pc1dhcm5FbmFibGVkKCkpCiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICBfbG9nLndhcm4oX2xvYy5nZXQoImJh\nZC1zY2gtcmVmIiwgZSkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAg\nICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAg\nICAgICAgICAgIHdyaXRlU2NoZW1hQ29sdW1uKHNjaGVtYVN0cik7CiAgICAg\nICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAg\nICAgICAgICAgIGlmIChfbG9nLmlzV2FybkVuYWJsZWQoKSkKICAgICAgICAg\nICAgICAgICAgICAgICAgX2xvZy53YXJuKF9sb2MuZ2V0KCJiYWQtc2NoLXdy\naXRlLTIiKSk7CgogICAgICAgICAgICAgICAgICAgIC8vIHRocm93IG9yaWdp\nbmFsIGV4Y2VwdGlvbgogICAgICAgICAgICAgICAgICAgIHRocm93IFNRTEV4\nY2VwdGlvbnMuZ2V0U3RvcmUoc2UsCiAgICAgICAgICAgICAgICAgICAgICAg\nIF9jb25mLmdldERCRGljdGlvbmFyeUluc3RhbmNlKCkpOwogICAgICAgICAg\nICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8q\nKgogICAgICogQ3JlYXRlcyB0aGUgc2NoZW1hIHRhYmxlIGluIHRoZSBEQi4K\nICAgICAqLwogICAgcHVibGljIHZvaWQgcmVmcmVzaFRhYmxlKCkKICAgICAg\nICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBpZiAoX2xvZy5pc0lu\nZm9FbmFibGVkKCkpCiAgICAgICAgICAgIF9sb2cuaW5mbyhfbG9jLmdldCgi\nbWFrZS1zY2gtdGFibGUiKSk7CgogICAgICAgIC8vIGNyZWF0ZSB0aGUgdGFi\nbGUKICAgICAgICBTY2hlbWFUb29sIHRvb2wgPSBuZXcgU2NoZW1hVG9vbChf\nY29uZik7CiAgICAgICAgdG9vbC5zZXRJZ25vcmVFcnJvcnModHJ1ZSk7CiAg\nICAgICAgdG9vbC5jcmVhdGVUYWJsZShfcGtDb2x1bW4uZ2V0VGFibGUoKSk7\nCgogICAgICAgIC8vIGluc2VydCBhbiBlbXB0eSBzY2hlbWEKICAgICAgICBD\nb25uZWN0aW9uIGNvbm4gPSBnZXRDb25uZWN0aW9uKCk7CiAgICAgICAgUHJl\ncGFyZWRTdGF0ZW1lbnQgc3RtbnQgPSBudWxsOwogICAgICAgIGJvb2xlYW4g\nd2FzQXV0byA9IHRydWU7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgd2Fz\nQXV0byA9IGNvbm4uZ2V0QXV0b0NvbW1pdCgpOwogICAgICAgICAgICBpZiAo\nIXdhc0F1dG8pCiAgICAgICAgICAgICAgICBjb25uLnNldEF1dG9Db21taXQo\ndHJ1ZSk7CgogICAgICAgICAgICBEQkRpY3Rpb25hcnkgZGljdCA9IF9jb25m\nLmdldERCRGljdGlvbmFyeUluc3RhbmNlKCk7CiAgICAgICAgICAgIHN0bW50\nID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KCJJTlNFUlQgSU5UTyAiCiAgICAg\nICAgICAgICAgICArIGRpY3QuZ2V0RnVsbE5hbWUoX3BrQ29sdW1uLmdldFRh\nYmxlKCksIGZhbHNlKQogICAgICAgICAgICAgICAgKyAiICgiICsgX3BrQ29s\ndW1uICsgIiwgIiArIF9zY2hlbWFDb2x1bW4gKyAiKSBWQUxVRVMgKD8sID8p\nIik7CiAgICAgICAgICAgIGRpY3Quc2V0SW50KHN0bW50LCAxLCAxLCBfcGtD\nb2x1bW4pOwogICAgICAgICAgICBkaWN0LnNldE51bGwoc3RtbnQsIDIsIF9z\nY2hlbWFDb2x1bW4uZ2V0VHlwZSgpLCBfc2NoZW1hQ29sdW1uKTsKCiAgICAg\nICAgICAgIHN0bW50LmV4ZWN1dGVVcGRhdGUoKTsKICAgICAgICB9IGZpbmFs\nbHkgewogICAgICAgICAgICBpZiAoc3RtbnQgIT0gbnVsbCkKICAgICAgICAg\nICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgc3RtbnQuY2xvc2Uo\nKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBzZSkg\newogICAgICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIXdhc0F1dG8p\nCiAgICAgICAgICAgICAgICBjb25uLnNldEF1dG9Db21taXQoZmFsc2UpOwog\nICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29ubi5jbG9zZSgp\nOwogICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gc2UpIHsKICAg\nICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIERy\nb3BzIHRoZSBzZXF1ZW5jZSB0YWJsZSBpbiB0aGUgREIuCiAgICAgKi8KICAg\nIHB1YmxpYyB2b2lkIGRyb3BUYWJsZSgpCiAgICAgICAgdGhyb3dzIFNRTEV4\nY2VwdGlvbiB7CiAgICAgICAgaWYgKF9sb2cuaXNJbmZvRW5hYmxlZCgpKQog\nICAgICAgICAgICBfbG9nLmluZm8oX2xvYy5nZXQoImRyb3Atc2NoLXRhYmxl\nIikpOwoKICAgICAgICAvLyBkcm9wIHRoZSB0YWJsZQogICAgICAgIFNjaGVt\nYVRvb2wgdG9vbCA9IG5ldyBTY2hlbWFUb29sKF9jb25mKTsKICAgICAgICB0\nb29sLnNldElnbm9yZUVycm9ycyh0cnVlKTsKICAgICAgICB0b29sLmRyb3BU\nYWJsZShfcGtDb2x1bW4uZ2V0VGFibGUoKSk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBSZXR1cm5zIHRoZSBzY2hlbWEgYXMgYW4gWE1MIHN0cmluZy4KICAg\nICAqLwogICAgcHVibGljIFN0cmluZyByZWFkU2NoZW1hQ29sdW1uKCkKICAg\nICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBEQkRpY3Rpb25h\ncnkgZGljdCA9IF9jb25mLmdldERCRGljdGlvbmFyeUluc3RhbmNlKCk7CiAg\nICAgICAgU1FMQnVmZmVyIHNlbCA9IG5ldyBTUUxCdWZmZXIoZGljdCkuYXBw\nZW5kKF9zY2hlbWFDb2x1bW4pOwogICAgICAgIFNRTEJ1ZmZlciB3aGVyZSA9\nIG5ldyBTUUxCdWZmZXIoZGljdCkuYXBwZW5kKF9wa0NvbHVtbikuYXBwZW5k\nKCIgPSAiKS4KICAgICAgICAgICAgYXBwZW5kVmFsdWUoTnVtYmVycy52YWx1\nZU9mKDEpLCBfcGtDb2x1bW4pOwogICAgICAgIFNRTEJ1ZmZlciB0YWJsZXMg\nPSBuZXcgU1FMQnVmZmVyKGRpY3QpLmFwcGVuZChfcGtDb2x1bW4uZ2V0VGFi\nbGUoKSk7CgogICAgICAgIFNRTEJ1ZmZlciBzZWxlY3QgPSBkaWN0LnRvU2Vs\nZWN0KHNlbCwgbnVsbCwgdGFibGVzLCB3aGVyZSwgbnVsbCwKICAgICAgICAg\nICAgbnVsbCwgbnVsbCwgZmFsc2UsIGZhbHNlLCAwLCBMb25nLk1BWF9WQUxV\nRSk7CgogICAgICAgIENvbm5lY3Rpb24gY29ubiA9IGdldENvbm5lY3Rpb24o\nKTsKICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG1udCA9IG51bGw7CiAg\nICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDsKICAgICAgICBib29sZWFuIHdh\nc0F1dG8gPSB0cnVlOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHdhc0F1\ndG8gPSBjb25uLmdldEF1dG9Db21taXQoKTsKICAgICAgICAgICAgaWYgKCF3\nYXNBdXRvKQogICAgICAgICAgICAgICAgY29ubi5zZXRBdXRvQ29tbWl0KHRy\ndWUpOwoKICAgICAgICAgICAgc3RtbnQgPSBzZWxlY3QucHJlcGFyZVN0YXRl\nbWVudChjb25uKTsKICAgICAgICAgICAgcnMgPSBzdG1udC5leGVjdXRlUXVl\ncnkoKTsKICAgICAgICAgICAgcnMubmV4dCgpOwogICAgICAgICAgICBTdHJp\nbmcgc2NoZW1hID0gKF9zY2hlbWFDb2x1bW4uZ2V0VHlwZSgpID09IFR5cGVz\nLkNMT0IpID8KICAgICAgICAgICAgICAgIGRpY3QuZ2V0Q2xvYlN0cmluZyhy\ncywgMSkgOiBkaWN0LmdldFN0cmluZyhycywgMSk7CiAgICAgICAgICAgIHJl\ndHVybiBzY2hlbWE7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAg\naWYgKHJzICE9IG51bGwpCiAgICAgICAgICAgICAgICB0cnkgewogICAgICAg\nICAgICAgICAgICAgIHJzLmNsb3NlKCk7CiAgICAgICAgICAgICAgICB9IGNh\ndGNoIChTUUxFeGNlcHRpb24gc2UpIHsKICAgICAgICAgICAgICAgIH0KICAg\nICAgICAgICAgaWYgKHN0bW50ICE9IG51bGwpCiAgICAgICAgICAgICAgICB0\ncnkgewogICAgICAgICAgICAgICAgICAgIHN0bW50LmNsb3NlKCk7CiAgICAg\nICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gc2UpIHsKICAgICAg\nICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCF3YXNBdXRvKQogICAgICAg\nICAgICAgICAgY29ubi5zZXRBdXRvQ29tbWl0KGZhbHNlKTsKICAgICAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbm4uY2xvc2UoKTsKICAgICAg\nICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIHNlKSB7CiAgICAgICAgICAg\nIH0KICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBXcml0ZXMgdGhl\nIHNjaGVtYSBhcyBhIHN0cmluZyB0byB0aGUgZGF0YWJhc2UuCiAgICAgKi8K\nICAgIHB1YmxpYyB2b2lkIHdyaXRlU2NoZW1hQ29sdW1uKFN0cmluZyBzY2hl\nbWEpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgLy8g\nYWx3YXlzIHVzZSBzcGVjaWFsIGNsb2IgaGFuZGxpbmcgd2hlbiBkaWN0IGhh\ncyBtYXggZW1iZWRkZWQgc2l6ZTsKICAgICAgICAvLyBmb3Igc29tZSByZWFz\nb24gb3B0aW1pemluZyBmb3Igc3RyaW5nIGxlbmd0aCBjYXVzZXMgZXJyb3Jz\nCiAgICAgICAgREJEaWN0aW9uYXJ5IGRpY3QgPSBfY29uZi5nZXREQkRpY3Rp\nb25hcnlJbnN0YW5jZSgpOwogICAgICAgIGJvb2xlYW4gZW1iZWRkZWQgPSBk\naWN0Lm1heEVtYmVkZGVkQ2xvYlNpemUgPT0gLTE7CiAgICAgICAgU3RyaW5n\nIHVwZGF0ZTsKICAgICAgICBpZiAoZW1iZWRkZWQpCiAgICAgICAgICAgIHVw\nZGF0ZSA9ICJVUERBVEUgIiArIGRpY3QuZ2V0RnVsbE5hbWUoX3BrQ29sdW1u\nLmdldFRhYmxlKCksIGZhbHNlKQogICAgICAgICAgICAgICAgKyAiIFNFVCAi\nICsgX3NjaGVtYUNvbHVtbiArICIgPSA/ICBXSEVSRSAiICsgX3BrQ29sdW1u\nICsgIiA9ID8iOwogICAgICAgIGVsc2UKICAgICAgICAgICAgdXBkYXRlID0g\nIlNFTEVDVCAiICsgX3NjaGVtYUNvbHVtbiArICIgRlJPTSAiCiAgICAgICAg\nICAgICAgICArIGRpY3QuZ2V0RnVsbE5hbWUoX3BrQ29sdW1uLmdldFRhYmxl\nKCksIGZhbHNlKQogICAgICAgICAgICAgICAgKyAiIFdIRVJFICIgKyBfcGtD\nb2x1bW4gKyAiID0gPyI7CgogICAgICAgIENvbm5lY3Rpb24gY29ubiA9IGdl\ndENvbm5lY3Rpb24oKTsKICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG1u\ndCA9IG51bGw7CiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDsKICAgICAg\nICBib29sZWFuIHdhc0F1dG8gPSB0cnVlOwogICAgICAgIHRyeSB7CiAgICAg\nICAgICAgIC8vIGlmIGVtYmVkZGVkIHdlIHdhbnQgYXV0b2NvbW1pdCB0cnVl\nLCBlbHNlIGZhbHNlCiAgICAgICAgICAgIHdhc0F1dG8gPSBjb25uLmdldEF1\ndG9Db21taXQoKTsKICAgICAgICAgICAgaWYgKHdhc0F1dG8gIT0gZW1iZWRk\nZWQpCiAgICAgICAgICAgICAgICBjb25uLnNldEF1dG9Db21taXQoZW1iZWRk\nZWQpOwoKICAgICAgICAgICAgaWYgKGVtYmVkZGVkKSB7CiAgICAgICAgICAg\nICAgICBzdG1udCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudCh1cGRhdGUpOwog\nICAgICAgICAgICAgICAgaWYgKHNjaGVtYSA9PSBudWxsKQogICAgICAgICAg\nICAgICAgICAgIGRpY3Quc2V0TnVsbChzdG1udCwgMSwgX3NjaGVtYUNvbHVt\nbi5nZXRUeXBlKCksCiAgICAgICAgICAgICAgICAgICAgICAgIF9zY2hlbWFD\nb2x1bW4pOwogICAgICAgICAgICAgICAgZWxzZSBpZiAoX3NjaGVtYUNvbHVt\nbi5nZXRUeXBlKCkgPT0gVHlwZXMuQ0xPQikKICAgICAgICAgICAgICAgICAg\nICBkaWN0LnNldENsb2JTdHJpbmcoc3RtbnQsIDEsIHNjaGVtYSwgX3NjaGVt\nYUNvbHVtbik7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAg\nICAgICAgZGljdC5zZXRTdHJpbmcoc3RtbnQsIDEsIHNjaGVtYSwgX3NjaGVt\nYUNvbHVtbik7CiAgICAgICAgICAgICAgICBkaWN0LnNldEludChzdG1udCwg\nMiwgMSwgX3BrQ29sdW1uKTsKICAgICAgICAgICAgICAgIHN0bW50LmV4ZWN1\ndGVVcGRhdGUoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAg\nICAgIHN0bW50ID0gY29ubi5wcmVwYXJlU3RhdGVtZW50KHVwZGF0ZSwKICAg\nICAgICAgICAgICAgICAgICBSZXN1bHRTZXQuVFlQRV9TQ1JPTExfSU5TRU5T\nSVRJVkUsCiAgICAgICAgICAgICAgICAgICAgUmVzdWx0U2V0LkNPTkNVUl9V\nUERBVEFCTEUpOwogICAgICAgICAgICAgICAgZGljdC5zZXRJbnQoc3RtbnQs\nIDEsIDEsIF9wa0NvbHVtbik7CiAgICAgICAgICAgICAgICBycyA9IHN0bW50\nLmV4ZWN1dGVRdWVyeSgpOwogICAgICAgICAgICAgICAgcnMubmV4dCgpOwog\nICAgICAgICAgICAgICAgZGljdC5wdXRTdHJpbmcocnMuZ2V0Q2xvYigxKSwg\nc2NoZW1hKTsKICAgICAgICAgICAgICAgIGNvbm4uY29tbWl0KCk7CiAgICAg\nICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZmluYWxseSB7CiAgICAgICAg\nICAgIGlmIChycyAhPSBudWxsKQogICAgICAgICAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgICAgICAgICBycy5jbG9zZSgpOwogICAgICAgICAgICAgICAg\nfSBjYXRjaCAoU1FMRXhjZXB0aW9uIHNlKSB7CiAgICAgICAgICAgICAgICB9\nCiAgICAgICAgICAgIGlmIChzdG1udCAhPSBudWxsKQogICAgICAgICAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBzdG1udC5jbG9zZSgpOwog\nICAgICAgICAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIHNlKSB7CiAg\nICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh3YXNBdXRvICE9IGVt\nYmVkZGVkKQogICAgICAgICAgICAgICAgY29ubi5zZXRBdXRvQ29tbWl0KHdh\nc0F1dG8pOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29u\nbi5jbG9zZSgpOwogICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24g\nc2UpIHsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAvKioK\nICAgICAqIENyZWF0ZXMgdGhlIG9iamVjdC1sZXZlbCByZXByZXNlbnRhdGlv\nbiBvZiB0aGUgc2VxdWVuY2UgdGFibGUuCiAgICAgKi8KICAgIHByaXZhdGUg\ndm9pZCBidWlsZFRhYmxlKCkgewogICAgICAgIFN0cmluZyB0YWJsZU5hbWUg\nPSBTdHJpbmdzLmdldENsYXNzTmFtZShfdGFibGUpOwogICAgICAgIFN0cmlu\nZyBzY2hlbWFOYW1lID0gU3RyaW5ncy5nZXRQYWNrYWdlTmFtZShfdGFibGUp\nOwogICAgICAgIGlmIChzY2hlbWFOYW1lLmxlbmd0aCgpID09IDApCiAgICAg\nICAgICAgIHNjaGVtYU5hbWUgPSBTY2hlbWFzLmdldE5ld1RhYmxlU2NoZW1h\nKF9jb25mKTsKCiAgICAgICAgLy8gYnVpbGQgdGhlIHRhYmxlIGluIG9uZSBv\nZiB0aGUgZGVzaWduYXRlZCBzY2hlbWFzCiAgICAgICAgU2NoZW1hR3JvdXAg\nZ3JvdXAgPSBuZXcgU2NoZW1hR3JvdXAoKTsKICAgICAgICBTY2hlbWEgc2No\nZW1hID0gZ3JvdXAuYWRkU2NoZW1hKHNjaGVtYU5hbWUpOwoKICAgICAgICBU\nYWJsZSB0YWJsZSA9IHNjaGVtYS5hZGRUYWJsZSh0YWJsZU5hbWUpOwogICAg\nICAgIFByaW1hcnlLZXkgcGsgPSB0YWJsZS5hZGRQcmltYXJ5S2V5KCk7Cgog\nICAgICAgIERCRGljdGlvbmFyeSBkaWN0ID0gX2NvbmYuZ2V0REJEaWN0aW9u\nYXJ5SW5zdGFuY2UoKTsKICAgICAgICBfcGtDb2x1bW4gPSB0YWJsZS5hZGRD\nb2x1bW4oZGljdC5nZXRWYWxpZENvbHVtbk5hbWUKICAgICAgICAgICAgKF9w\na0NvbHVtbk5hbWUsIHRhYmxlKSk7CiAgICAgICAgX3BrQ29sdW1uLnNldFR5\ncGUoZGljdC5nZXRQcmVmZXJyZWRUeXBlKFR5cGVzLlRJTllJTlQpKTsKICAg\nICAgICBfcGtDb2x1bW4uc2V0SmF2YVR5cGUoSmF2YVR5cGVzLklOVCk7CiAg\nICAgICAgcGsuYWRkQ29sdW1uKF9wa0NvbHVtbik7CgogICAgICAgIF9zY2hl\nbWFDb2x1bW4gPSB0YWJsZS5hZGRDb2x1bW4oZGljdC5nZXRWYWxpZENvbHVt\nbk5hbWUKICAgICAgICAgICAgKF9zY2hlbWFDb2x1bW5OYW1lLCB0YWJsZSkp\nOwogICAgICAgIF9zY2hlbWFDb2x1bW4uc2V0VHlwZShkaWN0LmdldFByZWZl\ncnJlZFR5cGUoVHlwZXMuQ0xPQikpOwogICAgICAgIF9zY2hlbWFDb2x1bW4u\nc2V0SmF2YVR5cGUoSmF2YVR5cGVzLlNUUklORyk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBSZXR1cm4gYSBjb25uZWN0aW9uIHRvIHVzZS4KICAgICAqLwog\nICAgcHJpdmF0ZSBDb25uZWN0aW9uIGdldENvbm5lY3Rpb24oKQogICAgICAg\nIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBfY29uZi5n\nZXREYXRhU291cmNlMihudWxsKS5nZXRDb25uZWN0aW9uKCk7CiAgICB9Cgog\nICAgLy8vLy8vLy8vCiAgICAvLyBNYWluCiAgICAvLy8vLy8vLy8KCiAgICAv\nKioKICAgICAqIFVzYWdlOiBqYXZhIG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLnNjaGVtYS5UYWJsZVNjaGVtYUZhY3RvcnkKICAgICAqIFtvcHRpb25dKiAt\nYWN0aW9uLy1hICZsdDthZGQgfCBkcm9wJmd0OwogICAgICogIFdoZXJlIHRo\nZSBmb2xsb3dpbmcgb3B0aW9ucyBhcmUgcmVjb2duaXplZC4KICAgICAqIDx1\nbD4KICAgICAqIDxsaT48aT4tcHJvcGVydGllcy8tcCAmbHQ7cHJvcGVydGll\ncyBmaWxlIG9yIHJlc291cmNlJmd0OzwvaT46IFRoZQogICAgICogcGF0aCBv\nciByZXNvdXJjZSBuYW1lIG9mIGEgT3BlbkpQQSBwcm9wZXJ0aWVzIGZpbGUg\nY29udGFpbmluZwogICAgICogaW5mb3JtYXRpb24gc3VjaCBhcyB0aGUgbGlj\nZW5zZSBrZXkJYW5kIGNvbm5lY3Rpb24gZGF0YSBhcwogICAgICogb3V0bGlu\nZWQgaW4ge0BsaW5rIEpEQkNDb25maWd1cmF0aW9ufS4gT3B0aW9uYWwuPC9s\naT4KICAgICAqIDxsaT48aT4tJmx0O3Byb3BlcnR5IG5hbWUmZ3Q7ICZsdDtw\ncm9wZXJ0eSB2YWx1ZSZndDs8L2k+OiBBbGwgYmVhbgogICAgICogcHJvcGVy\ndGllcyBvZiB0aGUgT3BlbkpQQSB7QGxpbmsgSkRCQ0NvbmZpZ3VyYXRpb259\nIGNhbiBiZSBzZXQgYnkKICAgICAqIHVzaW5nIHRoZWlyCW5hbWVzIGFuZCBz\ndXBwbHlpbmcgYSB2YWx1ZS4gRm9yIGV4YW1wbGU6CiAgICAgKiA8Y29kZT4t\nbGljZW5zZUtleSBhZHNsZmphODNyM2xrYWRmPC9jb2RlPjwvbGk+CiAgICAg\nKiA8L3VsPgogICAgICogIFRoZSB2YXJpb3VzIGFjdGlvbnMgYXJlIGFzIGZv\nbGxvd3MuCiAgICAgKiA8dWw+CiAgICAgKiA8bGk+PGk+YWRkPC9pPjogQ3Jl\nYXRlIHRoZSBzY2hlbWEgdGFibGUuPC9saT4KICAgICAqIDxsaT48aT5kcm9w\nPC9pPjogRHJvcCB0aGUgc2NoZW1hIHRhYmxlLjwvbGk+CiAgICAgKiA8L3Vs\nPgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdb\nXSBhcmdzKQogICAgICAgIHRocm93cyBJT0V4Y2VwdGlvbiwgU1FMRXhjZXB0\naW9uIHsKICAgICAgICBPcHRpb25zIG9wdHMgPSBuZXcgT3B0aW9ucygpOwog\nICAgICAgIGZpbmFsIFN0cmluZ1tdIGFyZ3VtZW50cyA9IG9wdHMuc2V0RnJv\nbUNtZExpbmUoYXJncyk7CiAgICAgICAgYm9vbGVhbiByZXQgPSBDb25maWd1\ncmF0aW9ucy5ydW5BZ2FpbnN0QWxsQW5jaG9ycyhvcHRzLAogICAgICAgICAg\nICBuZXcgQ29uZmlndXJhdGlvbnMuUnVubmFibGUoKSB7CiAgICAgICAgICAg\nIHB1YmxpYyBib29sZWFuIHJ1bihPcHRpb25zIG9wdHMpIHRocm93cyBFeGNl\ncHRpb24gewogICAgICAgICAgICAgICAgSkRCQ0NvbmZpZ3VyYXRpb24gY29u\nZiA9IG5ldyBKREJDQ29uZmlndXJhdGlvbkltcGwoKTsKICAgICAgICAgICAg\nICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFRhYmxlU2No\nZW1hRmFjdG9yeS5ydW4oY29uZiwgYXJndW1lbnRzLCBvcHRzKTsKICAgICAg\nICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICAgICAgY29u\nZi5jbG9zZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAg\nICAgICAgfSk7CiAgICAgICAgaWYgKCFyZXQpCiAgICAgICAgICAgIFN5c3Rl\nbS5vdXQucHJpbnRsbihfbG9jLmdldCgic2NoLXVzYWdlIikpOwogICAgfQoK\nICAgIC8qKgogICAgICogUnVuIHRoZSB0b29sLiBSZXR1cm5zIGZhbHNlIGlm\nIGludmFsaWQgb3B0aW9ucyB3ZXJlIGdpdmVuLgogICAgICoKICAgICAqIEBz\nZWUgI21haW4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBib29sZWFuIHJ1\nbihKREJDQ29uZmlndXJhdGlvbiBjb25mLCBTdHJpbmdbXSBhcmdzLAogICAg\nICAgIE9wdGlvbnMgb3B0cykKICAgICAgICB0aHJvd3MgSU9FeGNlcHRpb24s\nIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgU3RyaW5nIGFjdGlvbiA9IG9wdHMu\ncmVtb3ZlUHJvcGVydHkoImFjdGlvbiIsICJhIiwgbnVsbCk7CiAgICAgICAg\nQ29uZmlndXJhdGlvbnMucG9wdWxhdGVDb25maWd1cmF0aW9uKGNvbmYsIG9w\ndHMpOwogICAgICAgIHJldHVybiBydW4oY29uZiwgYWN0aW9uKTsKICAgIH0K\nCiAgICAvKioKICAgICAqIFJ1biB0aGUgdG9vbC4KICAgICAqLwogICAgcHVi\nbGljIHN0YXRpYyBib29sZWFuIHJ1bihKREJDQ29uZmlndXJhdGlvbiBjb25m\nLCBTdHJpbmcgYWN0aW9uKQogICAgICAgIHRocm93cyBJT0V4Y2VwdGlvbiwg\nU1FMRXhjZXB0aW9uIHsKICAgICAgICAvLyBydW4gdGhlIGFjdGlvbgogICAg\nICAgIFRhYmxlU2NoZW1hRmFjdG9yeSBmYWN0b3J5ID0gbmV3IFRhYmxlU2No\nZW1hRmFjdG9yeSgpOwogICAgICAgIFN0cmluZyBwcm9wcyA9IENvbmZpZ3Vy\nYXRpb25zLmdldFByb3BlcnRpZXMoY29uZi5nZXRTY2hlbWFGYWN0b3J5KCkp\nOwogICAgICAgIENvbmZpZ3VyYXRpb25zLmNvbmZpZ3VyZUluc3RhbmNlKGZh\nY3RvcnksIGNvbmYsIHByb3BzKTsKCiAgICAgICAgaWYgKEFDVElPTl9EUk9Q\nLmVxdWFscyhhY3Rpb24pKQogICAgICAgICAgICBmYWN0b3J5LmRyb3BUYWJs\nZSgpOwogICAgICAgIGVsc2UgaWYgKEFDVElPTl9BREQuZXF1YWxzKGFjdGlv\nbikpCiAgICAgICAgICAgIGZhY3RvcnkucmVmcmVzaFRhYmxlKCk7CiAgICAg\nICAgZWxzZQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgcmV0\ndXJuIHRydWU7CiAgICB9Cn0K\n","encoding":"base64"}

