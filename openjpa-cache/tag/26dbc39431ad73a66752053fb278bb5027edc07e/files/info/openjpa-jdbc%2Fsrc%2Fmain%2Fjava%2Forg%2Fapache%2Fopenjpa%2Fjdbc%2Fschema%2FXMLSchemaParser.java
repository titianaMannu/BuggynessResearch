{"sha":"c2d293215d9a8a9c20a0ed8f170cc77494caca06","node_id":"MDQ6QmxvYjIwNjM2NDpjMmQyOTMyMTVkOWE4YTljMjBhMGVkOGYxNzBjYzc3NDk0Y2FjYTA2","size":21407,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/c2d293215d9a8a9c20a0ed8f170cc77494caca06","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWE7CgppbXBv\ncnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEuaW8uSW5wdXRT\ndHJlYW1SZWFkZXI7CmltcG9ydCBqYXZhLmlvLlJlYWRlcjsKaW1wb3J0IGph\ndmEudXRpbC5Db2xsZWN0aW9uOwppbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9y\nOwppbXBvcnQgamF2YS51dGlsLkxpbmtlZExpc3Q7CgppbXBvcnQgb3JnLnht\nbC5zYXguQXR0cmlidXRlczsKaW1wb3J0IG9yZy54bWwuc2F4LkxvY2F0b3I7\nCmltcG9ydCBvcmcueG1sLnNheC5TQVhFeGNlcHRpb247CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuamRiYy5jb25mLkpEQkNDb25maWd1cmF0aW9uOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLkRCRGljdGlvbmFy\neTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIubWV0YS5YTUxNZXRh\nRGF0YVBhcnNlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRp\nbC5Mb2NhbGl6ZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0\naWwuTG9jYWxpemVyLk1lc3NhZ2U7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEudXRpbC5Vc2VyRXhjZXB0aW9uOwoKaW1wb3J0IHNlcnAudXRpbC5OdW1i\nZXJzOwoKLyoqCiAqIEN1c3RvbSBTQVggcGFyc2VyIHVzZWQgdG8gcGFyc2Ug\ne0BsaW5rIFNjaGVtYX0gb2JqZWN0cy4gVGhlIHBhcnNlcgogKiB3aWxsIHBs\nYWNlIGFsbCBwYXJzZWQgc2NoZW1hcyBpbnRvIHRoZSBjdXJyZW50IHtAbGlu\nayBTY2hlbWFHcm91cH0sIHNldAogKiB2aWEgdGhlIHtAbGluayAjc2V0U2No\nZW1hR3JvdXB9IG1ldGhvZC4gVGhpcyBhbGxvd3MgcGFyc2luZyBvZgogKiBt\ndWx0aXBsZSBmaWxlcyBpbnRvIGEgc2luZ2xlIHNjaGVtYSBncm91cC4KICog\nIFRoZSBwYXJzZXIgZGVzZXJpYWxpemVzIGZyb20gdGhlIGZvbGxvd2luZyBY\nTUwgZm9ybWF0OjxiciAvPgogKiA8Y29kZT4gJmx0OyFFTEVNRU5UIHNjaGVt\nYXMgKHNjaGVtYSkrJmd0OzxiciAvPgogKiAmbHQ7IUVMRU1FTlQgc2NoZW1h\nICh0YWJsZXxzZXF1ZW5jZSkrJmd0OzxiciAvPgogKiAmbHQ7IUFUVExJU1Qg\nc2NoZW1hIG5hbWUgQ0RBVEEgI0lNUExJRUQmZ3Q7PGJyIC8+CiAqICZsdDsh\nRUxFTUVOVCB0YWJsZSAoY29sdW1ufGluZGV4fHBrfGZrfHVuaXF1ZSkrJmd0\nOzxiciAvPgogKiAmbHQ7IUFUVExJU1QgdGFibGUgbmFtZSBDREFUQSAjUkVR\nVUlSRUQmZ3Q7PGJyIC8+CiAqICZsdDshRUxFTUVOVCBjb2x1bW4gRU1QVFkm\nZ3Q7PGJyIC8+CiAqICZsdDshQVRUTElTVCBjb2x1bW4gbmFtZSBDREFUQSAj\nUkVRVUlSRUQmZ3Q7PGJyIC8+CiAqICZsdDshQVRUTElTVCBjb2x1bW4gdHlw\nZSAoYXJyYXl8YmlnaW50fGJpbmFyeXxiaXR8YmxvYnxjaGFyfGNsb2IKICog\nfGRhdGV8ZGVjaW1hbHxkaXN0aW5jdHxkb3VibGV8ZmxvYXR8aW50ZWdlcnxq\nYXZhX29iamVjdAogKiB8bG9uZ3ZhcmJpbmFyeXxsb25ndmFyY2hhcnxudWxs\nfG51bWVyaWN8b3RoZXJ8cmVhbHxyZWZ8c21hbGxpbnR8c3RydWN0CiAqIHx0\naW1lfHRpbXN0YW1wfHRpbnlpbnR8dmFyYmluYXJ5fHZhcmNoYXIpICNSRVFV\nSVJFRCZndDs8YnIgLz4KICogJmx0OyFBVFRMSVNUIGNvbHVtbiB0eXBlLW5h\nbWUgQ0RBVEEgI0lNUExJRUQmZ3Q7PGJyIC8+CiAqICZsdDshQVRUTElTVCBj\nb2x1bW4gc2l6ZSBDREFUQSAjSU1QTElFRCZndDs8YnIgLz4KICogJmx0OyFB\nVFRMSVNUIGNvbHVtbiBkZWNpbWFsLWRpZ2l0cyBDREFUQSAjSU1QTElFRCZn\ndDs8YnIgLz4KICogJmx0OyFBVFRMSVNUIGNvbHVtbiBub3QtbnVsbCAodHJ1\nZXxmYWxzZSkgImZhbHNlIiZndDs8YnIgLz4KICogJmx0OyFBVFRMSVNUIGNv\nbHVtbiBkZWZhdWx0IENEQVRBICNJTVBMSUVEJmd0OzxiciAvPgogKiAmbHQ7\nIUFUVExJU1QgY29sdW1uIGF1dG8tYXNzaWduICh0cnVlfGZhbHNlKSAiZmFs\nc2UiJmd0OzxiciAvPgogKiAmbHQ7IUVMRU1FTlQgaW5kZXggKG9uKSomZ3Q7\nPGJyIC8+CiAqICZsdDshQVRUTElTVCBpbmRleCBuYW1lIENEQVRBICNSRVFV\nSVJFRCZndDs8YnIgLz4KICogJmx0OyFBVFRMSVNUIGluZGV4IGNvbHVtbiBD\nREFUQSAjSU1QTElFRCZndDs8YnIgLz4KICogJmx0OyFBVFRMSVNUIGluZGV4\nIHVuaXF1ZSAodHJ1ZXxmYWxzZSkgImZhbHNlIiZndDs8YnIgLz4KICogJmx0\nOyFFTEVNRU5UIG9uIEVNUFRZJmd0OzxiciAvPgogKiAmbHQ7IUFUVExJU1Qg\nb24gY29sdW1uIENEQVRBICNSRVFVSVJFRCZndDs8YnIgLz4KICogJmx0OyFF\nTEVNRU5UIHBrIChvbikqJmd0OzxiciAvPiAmbHQ7IUFUVExJU1QgcGsgbmFt\nZSBDREFUQSAjSU1QTElFRCZndDs8YnIgLz4KICogJmx0OyFBVFRMSVNUIHBr\nIGNvbHVtbiBDREFUQSAjSU1QTElFRCZndDs8YnIgLz4KICogJmx0OyFFTEVN\nRU5UIGZrIChqb2luKSomZ3Q7PGJyIC8+CiAqICZsdDshQVRUTElTVCBmayBu\nYW1lIENEQVRBICNJTVBMSUVEJmd0OzxiciAvPgogKiAmbHQ7IUFUVExJU1Qg\nZmsgZGVmZXJyZWQgKHRydWV8ZmFsc2UpICJmYWxzZSImZ3Q7PGJyIC8+CiAq\nICZsdDshQVRUTElTVCBmayBjb2x1bW4gQ0RBVEEgI0lNUExJRUQmZ3Q7PGJy\nIC8+CiAqICZsdDshQVRUTElTVCBmayB0by10YWJsZSBDREFUQSAjUkVRVUlS\nRUQmZ3Q7PGJyIC8+CiAqICZsdDshQVRUTElTVCBmayBkZWxldGUtYWN0aW9u\nIChjYXNjYWRlfGRlZmF1bHR8cmVzdHJpY3R8bm9uZXxudWxsKQogKiAibm9u\nZSImZ3Q7PGJyIC8+CiAqICZsdDshQVRUTElTVCBmayB1cGRhdGUtYWN0aW9u\nIChjYXNjYWRlfGRlZmF1bHR8cmVzdHJpY3R8bm9uZXxudWxsKQogKiAibm9u\nZSImZ3Q7PGJyIC8+ICZsdDshRUxFTUVOVCB1bmlxdWUgKG9uKSomZ3Q7PGJy\nIC8+CiAqICZsdDshQVRUTElTVCB1bmlxdWUgbmFtZSBDREFUQSAjSU1QTElF\nRCZndDs8YnIgLz4KICogJmx0OyFBVFRMSVNUIHVuaXF1ZSBjb2x1bW4gQ0RB\nVEEgI0lNUExJRUQmZ3Q7PGJyIC8+CiAqICZsdDshQVRUTElTVCB1bmlxdWUg\nZGVmZXJyZWQgKHRydWV8ZmFsc2UpICJmYWxzZSImZ3Q7PGJyIC8+CiAqICZs\ndDshRUxFTUVOVCBqb2luIEVNUFRZJmd0OzxiciAvPgogKiAmbHQ7IUFUVExJ\nU1Qgam9pbiBjb2x1bW4gQ0RBVEEgI0lNUExJRUQmZ3Q7PGJyIC8+CiAqICZs\ndDshQVRUTElTVCBqb2luIHZhbHVlIENEQVRBICNJTVBMSUVEJmd0OzxiciAv\nPgogKiAmbHQ7IUFUVExJU1Qgam9pbiB0by1jb2x1bW4gQ0RBVEEgI1JFUVVJ\nUkVEJmd0OzxiciAvPgogKiAmbHQ7IUVMRU1FTlQgc2VxdWVuY2UgRU1QVFkm\nZ3Q7PGJyIC8+CiAqICZsdDshQVRUTElTVCBzZXF1ZW5jZSBuYW1lIENEQVRB\nICNSRVFVSVJFRCZndDs8YnIgLz4KICogJmx0OyFBVFRMSVNUIHNlcXVlbmNl\nIGluaXRpYWwtdmFsdWUgQ0RBVEEgI0lNUExJRUQmZ3Q7PGJyIC8+CiAqICZs\ndDshQVRUTElTVCBzZXF1ZW5jZSBpbmNyZW1lbnQgQ0RBVEEgI0lNUExJRUQm\nZ3Q7PGJyIC8+CiAqICZsdDshQVRUTElTVCBzZXF1ZW5jZSBhbGxvY2F0ZSBD\nREFUQSAjSU1QTElFRCZndDs8YnIgLz4KICogPC9jb2RlPgogKiAgU2NoZW1h\nIHBhcnNlcnMgYXJlIG5vdCB0aHJlYWRzYWZlLgogKgogKiBAYXV0aG9yIEFi\nZSBXaGl0ZQogKiBAbm9qYXZhZG9jCiAqLwpwdWJsaWMgY2xhc3MgWE1MU2No\nZW1hUGFyc2VyCiAgICBleHRlbmRzIFhNTE1ldGFEYXRhUGFyc2VyCiAgICBp\nbXBsZW1lbnRzIFNjaGVtYVBhcnNlciB7CgogICAgcHJpdmF0ZSBzdGF0aWMg\nZmluYWwgTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6ZXIuZm9yUGFja2FnZQog\nICAgICAgIChYTUxTY2hlbWFQYXJzZXIuY2xhc3MpOwoKICAgIHByaXZhdGUg\nZmluYWwgREJEaWN0aW9uYXJ5IF9kaWN0OwoKICAgIC8vIHN0YXRlIGZvciBj\ndXJyZW50IHBhcnNlCiAgICBwcml2YXRlIFNjaGVtYUdyb3VwIF9ncm91cCA9\nIG51bGw7CiAgICBwcml2YXRlIFNjaGVtYSBfc2NoZW1hID0gbnVsbDsKICAg\nIHByaXZhdGUgVGFibGUgX3RhYmxlID0gbnVsbDsKICAgIHByaXZhdGUgUHJp\nbWFyeUtleUluZm8gX3BrID0gbnVsbDsKICAgIHByaXZhdGUgSW5kZXhJbmZv\nIF9pbmRleCA9IG51bGw7CiAgICBwcml2YXRlIFVuaXF1ZUluZm8gX3VucSA9\nIG51bGw7CiAgICBwcml2YXRlIEZvcmVpZ25LZXlJbmZvIF9mayA9IG51bGw7\nCiAgICBwcml2YXRlIGJvb2xlYW4gX2RlbGF5ID0gZmFsc2U7CgogICAgLy8g\ndXNlZCB0byBjb2xsZWN0IGluZm8gb24gc2NoZW1hIGVsZW1lbnRzIGJlZm9y\nZSB0aGV5J3JlIHJlc29sdmVkCiAgICBwcml2YXRlIGZpbmFsIENvbGxlY3Rp\nb24gX3BrSW5mb3MgPSBuZXcgTGlua2VkTGlzdCgpOwogICAgcHJpdmF0ZSBm\naW5hbCBDb2xsZWN0aW9uIF9pbmRleEluZm9zID0gbmV3IExpbmtlZExpc3Qo\nKTsKICAgIHByaXZhdGUgZmluYWwgQ29sbGVjdGlvbiBfdW5xSW5mb3MgPSBu\nZXcgTGlua2VkTGlzdCgpOwogICAgcHJpdmF0ZSBmaW5hbCBDb2xsZWN0aW9u\nIF9ma0luZm9zID0gbmV3IExpbmtlZExpc3QoKTsKCiAgICAvKioKICAgICAq\nIENvbnN0cnVjdG9yLiBTdXBwbHkgY29uZmlndXJhdGlvbi4KICAgICAqLwog\nICAgcHVibGljIFhNTFNjaGVtYVBhcnNlcihKREJDQ29uZmlndXJhdGlvbiBj\nb25mKSB7CiAgICAgICAgX2RpY3QgPSBjb25mLmdldERCRGljdGlvbmFyeUlu\nc3RhbmNlKCk7CiAgICAgICAgc2V0TG9nKGNvbmYuZ2V0TG9nKEpEQkNDb25m\naWd1cmF0aW9uLkxPR19TQ0hFTUEpKTsKICAgICAgICBzZXRQYXJzZVRleHQo\nZmFsc2UpOwogICAgICAgIHNldFN1ZmZpeCgiLnNjaGVtYSIpOwogICAgfQoK\nICAgIHB1YmxpYyBib29sZWFuIGdldERlbGF5Q29uc3RyYWludFJlc29sdmUo\nKSB7CiAgICAgICAgcmV0dXJuIF9kZWxheTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBzZXREZWxheUNvbnN0cmFpbnRSZXNvbHZlKGJvb2xlYW4gZGVsYXkp\nIHsKICAgICAgICBfZGVsYXkgPSBkZWxheTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCByZXNvbHZlQ29uc3RyYWludHMoKSB7CiAgICAgICAgcmVzb2x2ZVBy\naW1hcnlLZXlzKCk7CiAgICAgICAgcmVzb2x2ZUluZGV4ZXMoKTsKICAgICAg\nICByZXNvbHZlRm9yZWlnbktleXMoKTsKICAgICAgICByZXNvbHZlVW5pcXVl\ncygpOwogICAgICAgIGNsZWFyQ29uc3RyYWludEluZm8oKTsKICAgIH0KCiAg\nICAvKioKICAgICAqIENsZWFyIGNvbnN0cmFpbnQgaW5mb3MuCiAgICAgKi8K\nICAgIHByaXZhdGUgdm9pZCBjbGVhckNvbnN0cmFpbnRJbmZvKCkgewogICAg\nICAgIF9wa0luZm9zLmNsZWFyKCk7CiAgICAgICAgX2luZGV4SW5mb3MuY2xl\nYXIoKTsKICAgICAgICBfZmtJbmZvcy5jbGVhcigpOwogICAgICAgIF91bnFJ\nbmZvcy5jbGVhcigpOwogICAgfQoKICAgIHB1YmxpYyBTY2hlbWFHcm91cCBn\nZXRTY2hlbWFHcm91cCgpIHsKICAgICAgICBpZiAoX2dyb3VwID09IG51bGwp\nCiAgICAgICAgICAgIF9ncm91cCA9IG5ldyBTY2hlbWFHcm91cCgpOwogICAg\nICAgIHJldHVybiBfZ3JvdXA7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0\nU2NoZW1hR3JvdXAoU2NoZW1hR3JvdXAgZ3JvdXApIHsKICAgICAgICBfZ3Jv\ndXAgPSBncm91cDsKICAgIH0KCiAgICAvKioKICAgICAqIFBhcnNlIHRoZSBz\nY2hlbWEgcmVsYXRpbmcgdG8gdGhlIGdpdmVuIGNsYXNzLiBUaGUgc2NoZW1h\ncyB3aWxsCiAgICAgKiBiZSBhZGRlZCB0byB0aGUgY3VycmVudCBzY2hlbWEg\nZ3JvdXAuCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIGZpbmlzaCgpIHsK\nICAgICAgICAvLyBub3cgcmVzb2x2ZSBwaywgaWR4LCBmayBpbmZvCiAgICAg\nICAgc3VwZXIuZmluaXNoKCk7CiAgICAgICAgaWYgKCFfZGVsYXkpCiAgICAg\nICAgICAgIHJlc29sdmVDb25zdHJhaW50cygpOwogICAgfQoKICAgIC8qKgog\nICAgICogVHJhbnNmb3JtcyB0aGUgY29sbGVjdGVkIHByaW1hcnkga2V5IGlu\nZm9ybWF0aW9uIGludG8gYWN0dWFsCiAgICAgKiBwcmltYXJ5IGtleXMgb24g\ndGhlIHNjaGVtYSB0YWJsZXMuCiAgICAgKi8KICAgIHByaXZhdGUgdm9pZCBy\nZXNvbHZlUHJpbWFyeUtleXMoKSB7CiAgICAgICAgUHJpbWFyeUtleUluZm8g\ncGtJbmZvOwogICAgICAgIFN0cmluZyBjb2xOYW1lOwogICAgICAgIENvbHVt\nbiBjb2w7CiAgICAgICAgZm9yIChJdGVyYXRvciBpdHIgPSBfcGtJbmZvcy5p\ndGVyYXRvcigpOyBpdHIuaGFzTmV4dCgpOykgewogICAgICAgICAgICBwa0lu\nZm8gPSAoUHJpbWFyeUtleUluZm8pIGl0ci5uZXh0KCk7CiAgICAgICAgICAg\nIGZvciAoSXRlcmF0b3IgY29scyA9IHBrSW5mby5jb2xzLml0ZXJhdG9yKCk7\nIGNvbHMuaGFzTmV4dCgpOykgewogICAgICAgICAgICAgICAgY29sTmFtZSA9\nIChTdHJpbmcpIGNvbHMubmV4dCgpOwogICAgICAgICAgICAgICAgY29sID0g\ncGtJbmZvLnBrLmdldFRhYmxlKCkuZ2V0Q29sdW1uKGNvbE5hbWUpOwogICAg\nICAgICAgICAgICAgaWYgKGNvbCA9PSBudWxsKQogICAgICAgICAgICAgICAg\nICAgIHRocm93VXNlckV4Y2VwdGlvbihfbG9jLmdldCgicGstcmVzb2x2ZSIs\nIG5ldyBPYmplY3RbXQogICAgICAgICAgICAgICAgICAgICAgICB7IGNvbE5h\nbWUsIHBrSW5mby5way5nZXRUYWJsZSgpIH0pKTsKICAgICAgICAgICAgICAg\nIHBrSW5mby5way5hZGRDb2x1bW4oY29sKTsKICAgICAgICAgICAgfQogICAg\nICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFRyYW5zZm9ybXMgdGhlIGNv\nbGxlY3RlZCBpbmRleCBpbmZvcm1hdGlvbiBpbnRvIGFjdHVhbAogICAgICog\naW5kZXhlcyBvbiB0aGUgc2NoZW1hIHRhYmxlcy4KICAgICAqLwogICAgcHJp\ndmF0ZSB2b2lkIHJlc29sdmVJbmRleGVzKCkgewogICAgICAgIEluZGV4SW5m\nbyBpbmRleEluZm87CiAgICAgICAgU3RyaW5nIGNvbE5hbWU7CiAgICAgICAg\nQ29sdW1uIGNvbDsKICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9IF9pbmRl\neEluZm9zLml0ZXJhdG9yKCk7IGl0ci5oYXNOZXh0KCk7KSB7CiAgICAgICAg\nICAgIGluZGV4SW5mbyA9IChJbmRleEluZm8pIGl0ci5uZXh0KCk7CiAgICAg\nICAgICAgIGZvciAoSXRlcmF0b3IgY29scyA9IGluZGV4SW5mby5jb2xzLml0\nZXJhdG9yKCk7IGNvbHMuaGFzTmV4dCgpOykgewogICAgICAgICAgICAgICAg\nY29sTmFtZSA9IChTdHJpbmcpIGNvbHMubmV4dCgpOwogICAgICAgICAgICAg\nICAgY29sID0gaW5kZXhJbmZvLmluZGV4LmdldFRhYmxlKCkuZ2V0Q29sdW1u\nKGNvbE5hbWUpOwogICAgICAgICAgICAgICAgaWYgKGNvbCA9PSBudWxsKQog\nICAgICAgICAgICAgICAgICAgIHRocm93VXNlckV4Y2VwdGlvbihfbG9jLmdl\ndCgiaW5kZXgtcmVzb2x2ZSIsIG5ldyBPYmplY3RbXQogICAgICAgICAgICAg\nICAgICAgICAgICB7IGluZGV4SW5mby5pbmRleCwgY29sTmFtZSwKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIGluZGV4SW5mby5pbmRleC5nZXRUYWJs\nZSgpIH0pKTsKICAgICAgICAgICAgICAgIGluZGV4SW5mby5pbmRleC5hZGRD\nb2x1bW4oY29sKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAg\nICAvKioKICAgICAqIFRyYW5zZm9ybXMgdGhlIGNvbGxlY3RlZCBmb3JlaWdu\nIGtleSBpbmZvcm1hdGlvbiBpbnRvIGFjdHVhbAogICAgICogZm9yZWlnbiBr\nZXlzIG9uIHRoZSBzY2hlbWEgdGFibGVzLgogICAgICovCiAgICBwcml2YXRl\nIHZvaWQgcmVzb2x2ZUZvcmVpZ25LZXlzKCkgewogICAgICAgIEZvcmVpZ25L\nZXlJbmZvIGZrSW5mbzsKICAgICAgICBUYWJsZSB0b1RhYmxlOwogICAgICAg\nIENvbHVtbiBjb2w7CiAgICAgICAgU3RyaW5nIGNvbE5hbWU7CiAgICAgICAg\nQ29sdW1uIHBrQ29sOwogICAgICAgIFN0cmluZyBwa0NvbE5hbWU7CiAgICAg\nICAgUHJpbWFyeUtleSBwazsKICAgICAgICBJdGVyYXRvciBwa3M7CiAgICAg\nICAgSXRlcmF0b3IgY29sczsKICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9\nIF9ma0luZm9zLml0ZXJhdG9yKCk7IGl0ci5oYXNOZXh0KCk7KSB7CiAgICAg\nICAgICAgIGZrSW5mbyA9IChGb3JlaWduS2V5SW5mbykgaXRyLm5leHQoKTsK\nICAgICAgICAgICAgdG9UYWJsZSA9IF9ncm91cC5maW5kVGFibGUoZmtJbmZv\nLnRvVGFibGUpOwogICAgICAgICAgICBpZiAodG9UYWJsZSA9PSBudWxsIHx8\nIHRvVGFibGUuZ2V0UHJpbWFyeUtleSgpID09IG51bGwpCiAgICAgICAgICAg\nICAgICB0aHJvd1VzZXJFeGNlcHRpb24oX2xvYy5nZXQoImZrLXRvdGFibGUi\nLCBuZXcgT2JqZWN0W10KICAgICAgICAgICAgICAgICAgICB7IGZrSW5mby5m\naywgZmtJbmZvLnRvVGFibGUsIGZrSW5mby5may5nZXRUYWJsZSgpIH0pKTsK\nCiAgICAgICAgICAgIC8vIGNoZWNrIGlmIG9ubHkgb25lIGZrIGNvbHVtbiBs\naXN0ZWQgdXNpbmcgc2hvcnRjdXQKICAgICAgICAgICAgcGsgPSB0b1RhYmxl\nLmdldFByaW1hcnlLZXkoKTsKICAgICAgICAgICAgaWYgKGZrSW5mby5jb2xz\nLnNpemUoKSA9PSAxICYmIGZrSW5mby5wa3Muc2l6ZSgpID09IDApCiAgICAg\nICAgICAgICAgICBma0luZm8ucGtzLmFkZChway5nZXRDb2x1bW5zKClbMF0u\nZ2V0TmFtZSgpKTsKCiAgICAgICAgICAgIC8vIG1ha2Ugam9pbnMKICAgICAg\nICAgICAgcGtzID0gZmtJbmZvLnBrcy5pdGVyYXRvcigpOwogICAgICAgICAg\nICBmb3IgKGNvbHMgPSBma0luZm8uY29scy5pdGVyYXRvcigpOyBjb2xzLmhh\nc05leHQoKTspIHsKICAgICAgICAgICAgICAgIGNvbE5hbWUgPSAoU3RyaW5n\nKSBjb2xzLm5leHQoKTsKICAgICAgICAgICAgICAgIGNvbCA9IGZrSW5mby5m\nay5nZXRUYWJsZSgpLmdldENvbHVtbihjb2xOYW1lKTsKICAgICAgICAgICAg\nICAgIGlmIChjb2wgPT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICB0aHJv\nd1VzZXJFeGNlcHRpb24oX2xvYy5nZXQoImZrLW5vY29sIiwKICAgICAgICAg\nICAgICAgICAgICAgICAgZmtJbmZvLmZrLCBjb2xOYW1lLCBma0luZm8uZmsu\nZ2V0VGFibGUoKSkpOwoKICAgICAgICAgICAgICAgIHBrQ29sTmFtZSA9IChT\ndHJpbmcpIHBrcy5uZXh0KCk7CiAgICAgICAgICAgICAgICBwa0NvbCA9IHRv\nVGFibGUuZ2V0Q29sdW1uKHBrQ29sTmFtZSk7CiAgICAgICAgICAgICAgICBp\nZiAocGtDb2wgPT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICB0aHJvd1Vz\nZXJFeGNlcHRpb24oX2xvYy5nZXQoImZrLW5vcGtjb2wiLCBuZXcgT2JqZWN0\nW10KICAgICAgICAgICAgICAgICAgICAgICAgeyBma0luZm8uZmssIHBrQ29s\nTmFtZSwgdG9UYWJsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZr\nSW5mby5may5nZXRUYWJsZSgpIH0pKTsKCiAgICAgICAgICAgICAgICBma0lu\nZm8uZmsuam9pbihjb2wsIHBrQ29sKTsKICAgICAgICAgICAgfQoKICAgICAg\nICAgICAgLy8gbWFrZSBjb25zdGFudCBqb2lucwogICAgICAgICAgICBjb2xz\nID0gZmtJbmZvLmNvbnN0Q29scy5pdGVyYXRvcigpOwogICAgICAgICAgICBm\nb3IgKEl0ZXJhdG9yIHZhbHMgPSBma0luZm8uY29uc3RzLml0ZXJhdG9yKCk7\nIHZhbHMuaGFzTmV4dCgpOykgewogICAgICAgICAgICAgICAgY29sTmFtZSA9\nIChTdHJpbmcpIGNvbHMubmV4dCgpOwogICAgICAgICAgICAgICAgY29sID0g\nZmtJbmZvLmZrLmdldFRhYmxlKCkuZ2V0Q29sdW1uKGNvbE5hbWUpOwogICAg\nICAgICAgICAgICAgaWYgKGNvbCA9PSBudWxsKQogICAgICAgICAgICAgICAg\nICAgIHRocm93VXNlckV4Y2VwdGlvbihfbG9jLmdldCgiZmstbm9jb2wiLAog\nICAgICAgICAgICAgICAgICAgICAgICBma0luZm8uZmssIGNvbE5hbWUsIGZr\nSW5mby5may5nZXRUYWJsZSgpKSk7CgogICAgICAgICAgICAgICAgZmtJbmZv\nLmZrLmpvaW5Db25zdGFudChjb2wsIHZhbHMubmV4dCgpKTsKICAgICAgICAg\nICAgfQoKICAgICAgICAgICAgcGtzID0gZmtJbmZvLmNvbnN0Q29sc1BLLml0\nZXJhdG9yKCk7CiAgICAgICAgICAgIGZvciAoSXRlcmF0b3IgdmFscyA9IGZr\nSW5mby5jb25zdHNQSy5pdGVyYXRvcigpOyB2YWxzLmhhc05leHQoKTspIHsK\nICAgICAgICAgICAgICAgIHBrQ29sTmFtZSA9IChTdHJpbmcpIHBrcy5uZXh0\nKCk7CiAgICAgICAgICAgICAgICBwa0NvbCA9IHRvVGFibGUuZ2V0Q29sdW1u\nKHBrQ29sTmFtZSk7CiAgICAgICAgICAgICAgICBpZiAocGtDb2wgPT0gbnVs\nbCkKICAgICAgICAgICAgICAgICAgICB0aHJvd1VzZXJFeGNlcHRpb24oX2xv\nYy5nZXQoImZrLW5vcGtjb2wiLCBuZXcgT2JqZWN0W10KICAgICAgICAgICAg\nICAgICAgICAgICAgeyBma0luZm8uZmssIHBrQ29sTmFtZSwgdG9UYWJsZSwK\nICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZrSW5mby5may5nZXRUYWJs\nZSgpIH0pKTsKCiAgICAgICAgICAgICAgICBma0luZm8uZmsuam9pbkNvbnN0\nYW50KHZhbHMubmV4dCgpLCBwa0NvbCk7CiAgICAgICAgICAgIH0KICAgICAg\nICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBUcmFuc2Zvcm1zIHRoZSBjb2xs\nZWN0ZWQgdW5pcXVlIGNvbnN0cmFpbnQgaW5mb3JtYXRpb24gaW50byBhY3R1\nYWwKICAgICAqIGNvbnN0cmFpbnRzIG9uIHRoZSBzY2hlbWEgdGFibGVzLgog\nICAgICovCiAgICBwcml2YXRlIHZvaWQgcmVzb2x2ZVVuaXF1ZXMoKSB7CiAg\nICAgICAgVW5pcXVlSW5mbyB1bnFJbmZvOwogICAgICAgIFN0cmluZyBjb2xO\nYW1lOwogICAgICAgIENvbHVtbiBjb2w7CiAgICAgICAgZm9yIChJdGVyYXRv\nciBpdHIgPSBfdW5xSW5mb3MuaXRlcmF0b3IoKTsgaXRyLmhhc05leHQoKTsp\nIHsKICAgICAgICAgICAgdW5xSW5mbyA9IChVbmlxdWVJbmZvKSBpdHIubmV4\ndCgpOwogICAgICAgICAgICBmb3IgKEl0ZXJhdG9yIGNvbHMgPSB1bnFJbmZv\nLmNvbHMuaXRlcmF0b3IoKTsgY29scy5oYXNOZXh0KCk7KSB7CiAgICAgICAg\nICAgICAgICBjb2xOYW1lID0gKFN0cmluZykgY29scy5uZXh0KCk7CiAgICAg\nICAgICAgICAgICBjb2wgPSB1bnFJbmZvLnVucS5nZXRUYWJsZSgpLmdldENv\nbHVtbihjb2xOYW1lKTsKICAgICAgICAgICAgICAgIGlmIChjb2wgPT0gbnVs\nbCkKICAgICAgICAgICAgICAgICAgICB0aHJvd1VzZXJFeGNlcHRpb24oX2xv\nYy5nZXQoInVucS1yZXNvbHZlIiwgbmV3IE9iamVjdFtdCiAgICAgICAgICAg\nICAgICAgICAgICAgIHsgdW5xSW5mby51bnEsIGNvbE5hbWUsIHVucUluZm8u\ndW5xLmdldFRhYmxlKCkgfSkpOwogICAgICAgICAgICAgICAgdW5xSW5mby51\nbnEuYWRkQ29sdW1uKGNvbCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAg\nICB9CgogICAgcHJvdGVjdGVkIHZvaWQgcmVzZXQoKSB7CiAgICAgICAgX3Nj\naGVtYSA9IG51bGw7CiAgICAgICAgX3RhYmxlID0gbnVsbDsKICAgICAgICBf\ncGsgPSBudWxsOwogICAgICAgIF9pbmRleCA9IG51bGw7CiAgICAgICAgX2Zr\nID0gbnVsbDsKICAgICAgICBfdW5xID0gbnVsbDsKICAgICAgICBpZiAoIV9k\nZWxheSkKICAgICAgICAgICAgY2xlYXJDb25zdHJhaW50SW5mbygpOwogICAg\nfQoKICAgIHByb3RlY3RlZCBSZWFkZXIgZ2V0RG9jVHlwZSgpCiAgICAgICAg\ndGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gbmV3IElucHV0\nU3RyZWFtUmVhZGVyKFhNTFNjaGVtYVBhcnNlci5jbGFzcwogICAgICAgICAg\nICAuZ2V0UmVzb3VyY2VBc1N0cmVhbSgic2NoZW1hcy1kb2N0eXBlLnJzcmMi\nKSk7CiAgICB9CgogICAgcHJvdGVjdGVkIGJvb2xlYW4gc3RhcnRFbGVtZW50\nKFN0cmluZyBuYW1lLCBBdHRyaWJ1dGVzIGF0dHJzKQogICAgICAgIHRocm93\ncyBTQVhFeGNlcHRpb24gewogICAgICAgIHN3aXRjaCAobmFtZS5jaGFyQXQo\nMCkpIHsKICAgICAgICAgICAgY2FzZSdzJzoKICAgICAgICAgICAgICAgIGlm\nICgic2NoZW1hIi5lcXVhbHMobmFtZSkpCiAgICAgICAgICAgICAgICAgICAg\nc3RhcnRTY2hlbWEoYXR0cnMpOwogICAgICAgICAgICAgICAgZWxzZSBpZiAo\nInNlcXVlbmNlIi5lcXVhbHMobmFtZSkpCiAgICAgICAgICAgICAgICAgICAg\nc3RhcnRTZXF1ZW5jZShhdHRycyk7CiAgICAgICAgICAgICAgICByZXR1cm4g\ndHJ1ZTsKICAgICAgICAgICAgY2FzZSd0JzoKICAgICAgICAgICAgICAgIHN0\nYXJ0VGFibGUoYXR0cnMpOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7\nCiAgICAgICAgICAgIGNhc2UnYyc6CiAgICAgICAgICAgICAgICBzdGFydENv\nbHVtbihhdHRycyk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAg\nICAgICAgICAgY2FzZSdwJzoKICAgICAgICAgICAgICAgIHN0YXJ0UHJpbWFy\neUtleShhdHRycyk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAg\nICAgICAgICAgY2FzZSdpJzoKICAgICAgICAgICAgICAgIHN0YXJ0SW5kZXgo\nYXR0cnMpOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAg\nICAgIGNhc2UndSc6CiAgICAgICAgICAgICAgICBzdGFydFVuaXF1ZShhdHRy\ncyk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAg\nY2FzZSdmJzoKICAgICAgICAgICAgICAgIHN0YXJ0Rm9yZWlnbktleShhdHRy\ncyk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAg\nY2FzZSdvJzoKICAgICAgICAgICAgICAgIHN0YXJ0T24oYXR0cnMpOwogICAg\nICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIGNhc2Unaic6\nCiAgICAgICAgICAgICAgICBzdGFydEpvaW4oYXR0cnMpOwogICAgICAgICAg\nICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAg\nICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQoKICAg\nIHByb3RlY3RlZCB2b2lkIGVuZEVsZW1lbnQoU3RyaW5nIG5hbWUpIHsKICAg\nICAgICBzd2l0Y2ggKG5hbWUuY2hhckF0KDApKSB7CiAgICAgICAgICAgIGNh\nc2Uncyc6CiAgICAgICAgICAgICAgICBpZiAoInNjaGVtYSIuZXF1YWxzKG5h\nbWUpKQogICAgICAgICAgICAgICAgICAgIGVuZFNjaGVtYSgpOwogICAgICAg\nICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UndCc6CiAgICAgICAg\nICAgICAgICBlbmRUYWJsZSgpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAg\nICAgICAgICAgIGNhc2UncCc6CiAgICAgICAgICAgICAgICBlbmRQcmltYXJ5\nS2V5KCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2Fz\nZSdpJzoKICAgICAgICAgICAgICAgIGVuZEluZGV4KCk7CiAgICAgICAgICAg\nICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSd1JzoKICAgICAgICAgICAg\nICAgIGVuZFVuaXF1ZSgpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAg\nICAgICAgIGNhc2UnZic6CiAgICAgICAgICAgICAgICBlbmRGb3JlaWduS2V5\nKCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICB9Cgog\nICAgcHJpdmF0ZSB2b2lkIHN0YXJ0U2NoZW1hKEF0dHJpYnV0ZXMgYXR0cnMp\nIHsKICAgICAgICAvLyBjcmVhdGVzIGdyb3VwIGlmIG5vdCBzZXQKICAgICAg\nICBTY2hlbWFHcm91cCBncm91cCA9IGdldFNjaGVtYUdyb3VwKCk7CgogICAg\nICAgIFN0cmluZyBuYW1lID0gYXR0cnMuZ2V0VmFsdWUoIm5hbWUiKTsKICAg\nICAgICBfc2NoZW1hID0gZ3JvdXAuZ2V0U2NoZW1hKG5hbWUpOwogICAgICAg\nIGlmIChfc2NoZW1hID09IG51bGwpCiAgICAgICAgICAgIF9zY2hlbWEgPSBn\ncm91cC5hZGRTY2hlbWEobmFtZSk7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lk\nIGVuZFNjaGVtYSgpIHsKICAgICAgICBfc2NoZW1hID0gbnVsbDsKICAgIH0K\nCiAgICBwcml2YXRlIHZvaWQgc3RhcnRTZXF1ZW5jZShBdHRyaWJ1dGVzIGF0\ndHJzKSB7CiAgICAgICAgU2VxdWVuY2Ugc2VxID0gX3NjaGVtYS5hZGRTZXF1\nZW5jZShhdHRycy5nZXRWYWx1ZSgibmFtZSIpKTsKICAgICAgICBMb2NhdG9y\nIGxvY2F0b3IgPSBnZXRMb2NhdGlvbigpLmdldExvY2F0b3IoKTsKICAgICAg\nICBpZiAobG9jYXRvciAhPSBudWxsKSB7CiAgICAgICAgICAgIHNlcS5zZXRM\naW5lTnVtYmVyKE51bWJlcnMudmFsdWVPZihsb2NhdG9yLmdldExpbmVOdW1i\nZXIoKSkpOwogICAgICAgICAgICBzZXEuc2V0Q29sTnVtYmVyKE51bWJlcnMu\ndmFsdWVPZihsb2NhdG9yLmdldENvbHVtbk51bWJlcigpKSk7CiAgICAgICAg\nfQogICAgICAgIHNlcS5zZXRTb3VyY2UoZ2V0U291cmNlRmlsZSgpLCBzZXEu\nU1JDX1hNTCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgU3RyaW5nIHZh\nbCA9IGF0dHJzLmdldFZhbHVlKCJpbml0aWFsLXZhbHVlIik7CiAgICAgICAg\nICAgIGlmICh2YWwgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHNlcS5zZXRJ\nbml0aWFsVmFsdWUoSW50ZWdlci5wYXJzZUludCh2YWwpKTsKICAgICAgICAg\nICAgdmFsID0gYXR0cnMuZ2V0VmFsdWUoImluY3JlbWVudCIpOwogICAgICAg\nICAgICBpZiAodmFsICE9IG51bGwpCiAgICAgICAgICAgICAgICBzZXEuc2V0\nSW5jcmVtZW50KEludGVnZXIucGFyc2VJbnQodmFsKSk7CiAgICAgICAgICAg\nIHZhbCA9IGF0dHJzLmdldFZhbHVlKCJhbGxvY2F0ZSIpOwogICAgICAgICAg\nICBpZiAodmFsICE9IG51bGwpCiAgICAgICAgICAgICAgICBzZXEuc2V0QWxs\nb2NhdGUoSW50ZWdlci5wYXJzZUludCh2YWwpKTsKICAgICAgICB9IGNhdGNo\nIChOdW1iZXJGb3JtYXRFeGNlcHRpb24gbmZlKSB7CiAgICAgICAgICAgIHRo\ncm93VXNlckV4Y2VwdGlvbihfbG9jLmdldCgiYmFkLXNlcS1udW0iLCBzZXEu\nZ2V0RnVsbE5hbWUoKSkpOwogICAgICAgIH0KICAgIH0KCiAgICBwcml2YXRl\nIHZvaWQgc3RhcnRUYWJsZShBdHRyaWJ1dGVzIGF0dHJzKSB7CiAgICAgICAg\nX3RhYmxlID0gX3NjaGVtYS5hZGRUYWJsZShhdHRycy5nZXRWYWx1ZSgibmFt\nZSIpKTsKICAgICAgICBfdGFibGUuc2V0U291cmNlKGdldFNvdXJjZUZpbGUo\nKSwgX3RhYmxlLlNSQ19YTUwpOwogICAgICAgIExvY2F0b3IgbG9jYXRvciA9\nIGdldExvY2F0aW9uKCkuZ2V0TG9jYXRvcigpOwogICAgICAgIGlmIChsb2Nh\ndG9yICE9IG51bGwpIHsKICAgICAgICAgICAgX3RhYmxlLnNldExpbmVOdW1i\nZXIoTnVtYmVycy52YWx1ZU9mKGxvY2F0b3IuZ2V0TGluZU51bWJlcigpKSk7\nCiAgICAgICAgICAgIF90YWJsZS5zZXRDb2xOdW1iZXIoTnVtYmVycy52YWx1\nZU9mKGxvY2F0b3IuZ2V0Q29sdW1uTnVtYmVyKCkpKTsKICAgICAgICB9CiAg\nICB9CgogICAgcHJpdmF0ZSB2b2lkIGVuZFRhYmxlKCkgewogICAgICAgIF90\nYWJsZSA9IG51bGw7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIHN0YXJ0Q29s\ndW1uKEF0dHJpYnV0ZXMgYXR0cnMpIHsKICAgICAgICBDb2x1bW4gY29sID0g\nX3RhYmxlLmFkZENvbHVtbihhdHRycy5nZXRWYWx1ZSgibmFtZSIpKTsKICAg\nICAgICBjb2wuc2V0VHlwZShfZGljdC5nZXRQcmVmZXJyZWRUeXBlKFNjaGVt\nYXMuZ2V0SkRCQ1R5cGUKICAgICAgICAgICAgKGF0dHJzLmdldFZhbHVlKCJ0\neXBlIikpKSk7CiAgICAgICAgY29sLnNldFR5cGVOYW1lKGF0dHJzLmdldFZh\nbHVlKCJ0eXBlLW5hbWUiKSk7CiAgICAgICAgU3RyaW5nIHZhbCA9IGF0dHJz\nLmdldFZhbHVlKCJzaXplIik7CiAgICAgICAgaWYgKHZhbCAhPSBudWxsKQog\nICAgICAgICAgICBjb2wuc2V0U2l6ZShJbnRlZ2VyLnBhcnNlSW50KHZhbCkp\nOwogICAgICAgIHZhbCA9IGF0dHJzLmdldFZhbHVlKCJkZWNpbWFsLWRpZ2l0\ncyIpOwogICAgICAgIGlmICh2YWwgIT0gbnVsbCkKICAgICAgICAgICAgY29s\nLnNldERlY2ltYWxEaWdpdHMoSW50ZWdlci5wYXJzZUludCh2YWwpKTsKICAg\nICAgICBjb2wuc2V0Tm90TnVsbCgidHJ1ZSIuZXF1YWxzKGF0dHJzLmdldFZh\nbHVlKCJub3QtbnVsbCIpKSk7CiAgICAgICAgY29sLnNldEF1dG9Bc3NpZ25l\nZCgidHJ1ZSIuZXF1YWxzKGF0dHJzLmdldFZhbHVlKCJhdXRvLWFzc2lnbiIp\nKQogICAgICAgICAgICB8fCAidHJ1ZSIuZXF1YWxzKGF0dHJzLmdldFZhbHVl\nKCJhdXRvLWluY3JlbWVudCIpKSk7IC8vIG9sZCBhdHRyCiAgICAgICAgY29s\nLnNldERlZmF1bHRTdHJpbmcoYXR0cnMuZ2V0VmFsdWUoImRlZmF1bHQiKSk7\nCiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIHN0YXJ0UHJpbWFyeUtleShBdHRy\naWJ1dGVzIGF0dHJzKSB7CiAgICAgICAgX3BrID0gbmV3IFByaW1hcnlLZXlJ\nbmZvKCk7CiAgICAgICAgX3BrLnBrID0gX3RhYmxlLmFkZFByaW1hcnlLZXko\nYXR0cnMuZ2V0VmFsdWUoIm5hbWUiKSk7CiAgICAgICAgX3BrLnBrLnNldExv\nZ2ljYWwoInRydWUiLmVxdWFscyhhdHRycy5nZXRWYWx1ZSgibG9naWNhbCIp\nKSk7CgogICAgICAgIFN0cmluZyB2YWwgPSBhdHRycy5nZXRWYWx1ZSgiY29s\ndW1uIik7CiAgICAgICAgaWYgKHZhbCAhPSBudWxsKQogICAgICAgICAgICBf\ncGsuY29scy5hZGQodmFsKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgZW5k\nUHJpbWFyeUtleSgpIHsKICAgICAgICBfcGtJbmZvcy5hZGQoX3BrKTsKICAg\nICAgICBfcGsgPSBudWxsOwogICAgfQoKICAgIHByaXZhdGUgdm9pZCBzdGFy\ndEluZGV4KEF0dHJpYnV0ZXMgYXR0cnMpIHsKICAgICAgICBfaW5kZXggPSBu\nZXcgSW5kZXhJbmZvKCk7CiAgICAgICAgX2luZGV4LmluZGV4ID0gX3RhYmxl\nLmFkZEluZGV4KGF0dHJzLmdldFZhbHVlKCJuYW1lIikpOwogICAgICAgIF9p\nbmRleC5pbmRleC5zZXRVbmlxdWUoInRydWUiLmVxdWFscyhhdHRycy5nZXRW\nYWx1ZSgidW5pcXVlIikpKTsKCiAgICAgICAgU3RyaW5nIHZhbCA9IGF0dHJz\nLmdldFZhbHVlKCJjb2x1bW4iKTsKICAgICAgICBpZiAodmFsICE9IG51bGwp\nCiAgICAgICAgICAgIF9pbmRleC5jb2xzLmFkZCh2YWwpOwogICAgfQoKICAg\nIHByaXZhdGUgdm9pZCBlbmRJbmRleCgpIHsKICAgICAgICBfaW5kZXhJbmZv\ncy5hZGQoX2luZGV4KTsKICAgICAgICBfaW5kZXggPSBudWxsOwogICAgfQoK\nICAgIHByaXZhdGUgdm9pZCBzdGFydFVuaXF1ZShBdHRyaWJ1dGVzIGF0dHJz\nKSB7CiAgICAgICAgX3VucSA9IG5ldyBVbmlxdWVJbmZvKCk7CiAgICAgICAg\nX3VucS51bnEgPSBfdGFibGUuYWRkVW5pcXVlKGF0dHJzLmdldFZhbHVlKCJu\nYW1lIikpOwogICAgICAgIF91bnEudW5xLnNldERlZmVycmVkKCJ0cnVlIi5l\ncXVhbHMoYXR0cnMuZ2V0VmFsdWUoImRlZmVycmVkIikpKTsKCiAgICAgICAg\nU3RyaW5nIHZhbCA9IGF0dHJzLmdldFZhbHVlKCJjb2x1bW4iKTsKICAgICAg\nICBpZiAodmFsICE9IG51bGwpCiAgICAgICAgICAgIF91bnEuY29scy5hZGQo\ndmFsKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgZW5kVW5pcXVlKCkgewog\nICAgICAgIF91bnFJbmZvcy5hZGQoX3VucSk7CiAgICAgICAgX3VucSA9IG51\nbGw7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIHN0YXJ0Rm9yZWlnbktleShB\ndHRyaWJ1dGVzIGF0dHJzKSB7CiAgICAgICAgX2ZrID0gbmV3IEZvcmVpZ25L\nZXlJbmZvKCk7CiAgICAgICAgX2ZrLmZrID0gX3RhYmxlLmFkZEZvcmVpZ25L\nZXkoYXR0cnMuZ2V0VmFsdWUoIm5hbWUiKSk7CgogICAgICAgIGlmICgidHJ1\nZSIuZXF1YWxzKGF0dHJzLmdldFZhbHVlKCJkZWZlcnJlZCIpKSkKICAgICAg\nICAgICAgX2ZrLmZrLnNldERlZmVycmVkKHRydWUpOwoKICAgICAgICAvLyBz\nZXQgdXBkYXRlIGFjdGlvbiBiZWZvcmUgZGVsZXRlIGFjdGlvbiBpbiBjYXNl\nIHVzZXIgaW5jb3JyZWN0bHkKICAgICAgICAvLyBzZXRzIHVwZGF0ZS1hY3Rp\nb24gdG8gIm5vbmUiIHdoZW4gdGhlcmUgaXMgYSBkZWxldGUtYWN0aW9uOyBv\ndGhlcndpc2UKICAgICAgICAvLyBzZXR0aW5nIHRoZSB1cGRhdGUtYWN0aW9u\nIHRvICJub25lIiB3aWxsIGFsc28gYXV0b21hdGljYWxseSBzZXQgdGhlCiAg\nICAgICAgLy8gZGVsZXRlLWFjdGlvbiB0byAibm9uZSIsIHNpbmNlIEZLcyBj\nYW5ub3QgaGF2ZSBvbmUgYWN0aW8gYmUgbm9uZSBhbmQKICAgICAgICAvLyB0\naGUgb3RoZXIgYmUgbm9uLW5vbmUKICAgICAgICBTdHJpbmcgYWN0aW9uID0g\nYXR0cnMuZ2V0VmFsdWUoInVwZGF0ZS1hY3Rpb24iKTsKICAgICAgICBpZiAo\nYWN0aW9uICE9IG51bGwpCiAgICAgICAgICAgIF9may5may5zZXRVcGRhdGVB\nY3Rpb24oRm9yZWlnbktleS5nZXRBY3Rpb24oYWN0aW9uKSk7CiAgICAgICAg\nYWN0aW9uID0gYXR0cnMuZ2V0VmFsdWUoImRlbGV0ZS1hY3Rpb24iKTsKICAg\nICAgICBpZiAoYWN0aW9uICE9IG51bGwpCiAgICAgICAgICAgIF9may5may5z\nZXREZWxldGVBY3Rpb24oRm9yZWlnbktleS5nZXRBY3Rpb24oYWN0aW9uKSk7\nCgogICAgICAgIF9may50b1RhYmxlID0gYXR0cnMuZ2V0VmFsdWUoInRvLXRh\nYmxlIik7CiAgICAgICAgU3RyaW5nIHZhbCA9IGF0dHJzLmdldFZhbHVlKCJj\nb2x1bW4iKTsKICAgICAgICBpZiAodmFsICE9IG51bGwpCiAgICAgICAgICAg\nIF9may5jb2xzLmFkZCh2YWwpOwogICAgfQoKICAgIHByaXZhdGUgdm9pZCBl\nbmRGb3JlaWduS2V5KCkgewogICAgICAgIF9ma0luZm9zLmFkZChfZmspOwog\nICAgICAgIF9mayA9IG51bGw7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIHN0\nYXJ0T24oQXR0cmlidXRlcyBhdHRycykgewogICAgICAgIFN0cmluZyBjb2wg\nPSBhdHRycy5nZXRWYWx1ZSgiY29sdW1uIik7CiAgICAgICAgaWYgKF9wayAh\nPSBudWxsKQogICAgICAgICAgICBfcGsuY29scy5hZGQoY29sKTsKICAgICAg\nICBlbHNlIGlmIChfaW5kZXggIT0gbnVsbCkKICAgICAgICAgICAgX2luZGV4\nLmNvbHMuYWRkKGNvbCk7CiAgICAgICAgZWxzZQogICAgICAgICAgICBfdW5x\nLmNvbHMuYWRkKGNvbCk7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIHN0YXJ0\nSm9pbihBdHRyaWJ1dGVzIGF0dHJzKSB7CiAgICAgICAgU3RyaW5nIGNvbCA9\nIGF0dHJzLmdldFZhbHVlKCJjb2x1bW4iKTsKICAgICAgICBTdHJpbmcgdG9D\nb2wgPSBhdHRycy5nZXRWYWx1ZSgidG8tY29sdW1uIik7CiAgICAgICAgU3Ry\naW5nIHZhbCA9IGF0dHJzLmdldFZhbHVlKCJ2YWx1ZSIpOwogICAgICAgIGlm\nICh2YWwgPT0gbnVsbCkgewogICAgICAgICAgICBfZmsuY29scy5hZGQoY29s\nKTsKICAgICAgICAgICAgX2ZrLnBrcy5hZGQodG9Db2wpOwogICAgICAgIH0g\nZWxzZSBpZiAoY29sID09IG51bGwpIHsKICAgICAgICAgICAgX2ZrLmNvbnN0\nc1BLLmFkZChjb252ZXJ0Q29uc3RhbnQodmFsKSk7CiAgICAgICAgICAgIF9m\nay5jb25zdENvbHNQSy5hZGQodG9Db2wpOwogICAgICAgIH0gZWxzZSB7CiAg\nICAgICAgICAgIF9may5jb25zdHMuYWRkKGNvbnZlcnRDb25zdGFudCh2YWwp\nKTsKICAgICAgICAgICAgX2ZrLmNvbnN0Q29scy5hZGQoY29sKTsKICAgICAg\nICB9CiAgICB9CgogICAgcHJpdmF0ZSBzdGF0aWMgT2JqZWN0IGNvbnZlcnRD\nb25zdGFudChTdHJpbmcgdmFsKSB7CiAgICAgICAgaWYgKCJudWxsIi5lcXVh\nbHModmFsKSkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgaWYg\nKHZhbC5zdGFydHNXaXRoKCInIikpCiAgICAgICAgICAgIHJldHVybiB2YWwu\nc3Vic3RyaW5nKDEsIHZhbC5sZW5ndGgoKSAtIDEpOwogICAgICAgIGlmICh2\nYWwuaW5kZXhPZignLicpID09IC0xKQogICAgICAgICAgICByZXR1cm4gbmV3\nIExvbmcodmFsKTsKICAgICAgICByZXR1cm4gbmV3IERvdWJsZSh2YWwpOwog\nICAgfQoKICAgIHByaXZhdGUgdm9pZCB0aHJvd1VzZXJFeGNlcHRpb24oTWVz\nc2FnZSBtc2cpIHsKICAgICAgICB0aHJvdyBuZXcgVXNlckV4Y2VwdGlvbihn\nZXRTb3VyY2VOYW1lKCkgKyAiOiAiICsgbXNnLmdldE1lc3NhZ2UoKSk7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBVc2VkIHRvIGhvbGQgcHJpbWFyeSBrZXkg\naW5mbyBiZWZvcmUgaXQgaXMgcmVzb2x2ZWQuCiAgICAgKi8KICAgIHByaXZh\ndGUgc3RhdGljIGNsYXNzIFByaW1hcnlLZXlJbmZvIHsKCiAgICAgICAgcHVi\nbGljIFByaW1hcnlLZXkgcGsgPSBudWxsOwogICAgICAgIHB1YmxpYyBDb2xs\nZWN0aW9uIGNvbHMgPSBuZXcgTGlua2VkTGlzdCgpOwogICAgfQoKICAgIC8q\nKgogICAgICogVXNlZCB0byBob2xkIGluZGV4IGluZm8gYmVmb3JlIGl0IGlz\nIHJlc29sdmVkLgogICAgICovCiAgICBwcml2YXRlIHN0YXRpYyBjbGFzcyBJ\nbmRleEluZm8gewoKICAgICAgICBwdWJsaWMgSW5kZXggaW5kZXggPSBudWxs\nOwogICAgICAgIHB1YmxpYyBDb2xsZWN0aW9uIGNvbHMgPSBuZXcgTGlua2Vk\nTGlzdCgpOwogICAgfQoKICAgIC8qKgogICAgICogVXNlZCB0byBob2xkIHVu\naXF1ZSBjb25zdHJhaW50IGluZm8gYmVmb3JlIGl0IGlzIHJlc29sdmVkLgog\nICAgICovCiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIFVuaXF1ZUluZm8gewoK\nICAgICAgICBwdWJsaWMgVW5pcXVlIHVucSA9IG51bGw7CiAgICAgICAgcHVi\nbGljIENvbGxlY3Rpb24gY29scyA9IG5ldyBMaW5rZWRMaXN0KCk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBVc2VkIHRvIGhvbGQgZm9yZWlnbiBrZXkgaW5m\nbyBiZWZvcmUgaXQgaXMgcmVzb2x2ZWQuCiAgICAgKi8KICAgIHByaXZhdGUg\nc3RhdGljIGNsYXNzIEZvcmVpZ25LZXlJbmZvIHsKCiAgICAgICAgcHVibGlj\nIEZvcmVpZ25LZXkgZmsgPSBudWxsOwogICAgICAgIHB1YmxpYyBTdHJpbmcg\ndG9UYWJsZSA9IG51bGw7CiAgICAgICAgcHVibGljIENvbGxlY3Rpb24gY29s\ncyA9IG5ldyBMaW5rZWRMaXN0KCk7CiAgICAgICAgcHVibGljIENvbGxlY3Rp\nb24gcGtzID0gbmV3IExpbmtlZExpc3QoKTsKICAgICAgICBwdWJsaWMgQ29s\nbGVjdGlvbiBjb25zdHMgPSBuZXcgTGlua2VkTGlzdCgpOwogICAgICAgIHB1\nYmxpYyBDb2xsZWN0aW9uIGNvbnN0Q29scyA9IG5ldyBMaW5rZWRMaXN0KCk7\nCiAgICAgICAgcHVibGljIENvbGxlY3Rpb24gY29uc3RzUEsgPSBuZXcgTGlu\na2VkTGlzdCgpOwogICAgICAgIHB1YmxpYyBDb2xsZWN0aW9uIGNvbnN0Q29s\nc1BLID0gbmV3IExpbmtlZExpc3QoKTsKICAgIH0KfQo=\n","encoding":"base64"}

