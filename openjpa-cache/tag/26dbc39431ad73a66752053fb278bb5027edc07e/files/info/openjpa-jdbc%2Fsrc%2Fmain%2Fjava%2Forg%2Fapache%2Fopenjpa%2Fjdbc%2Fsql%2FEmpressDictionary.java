{"sha":"4e753881e26aa70350ceea73223483b7a38b8d3a","node_id":"MDQ6QmxvYjIwNjM2NDo0ZTc1Mzg4MWUyNmFhNzAzNTBjZWVhNzMyMjM0ODNiN2EzOGI4ZDNh","size":6863,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/4e753881e26aa70350ceea73223483b7a38b8d3a","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWw7CgppbXBvcnQg\namF2YS5zcWwuUHJlcGFyZWRTdGF0ZW1lbnQ7CmltcG9ydCBqYXZhLnNxbC5T\nUUxFeGNlcHRpb247CmltcG9ydCBqYXZhLnV0aWwuQXJyYXlzOwoKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmtlcm5lbC5KREJDRmV0Y2hDb25m\naWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2No\nZW1hLkNvbHVtbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNj\naGVtYS5UYWJsZTsKCi8qKgogKiBEaWN0aW9uYXJ5IGZvciBFbXByZXNzIHVz\naW5nIE9EQkMgc2VydmVyIGNvbWJpbmVkIHdpdGggdGhlaXIKICogdHlwZSAy\nIGRyaXZlci4gVGhpcyBkaWN0aW9uYXJ5IG1heSBpc3N1ZXMgd2l0aCBvdGhl\ncgogKiBkcml2ZXIvdG9wb2xvZ3kgY29uZmlndXJhdGlvbnMuCiAqICBFbXBy\nZXNzIGRvZXMgbm90IGFsbG93IG11bHRpcGxlIGNvbm5lY3Rpb25zIHRvIHJl\nYWQgcm93cwogKiByZWFkIGluIGEgdHJhbnNhY3Rpb24sIGVmZmVjdGl2ZWx5\nIGZvcmNpbmcgcGVzc2ltaXN0aWMgdHJhbnNhY3Rpb25zCiAqIHJlZ2FyZGxl\nc3Mgb2YgdGhlIE9wdGltaXN0aWMgc2V0dGluZy4gVG8gYWxsb3cgdXNlcnMg\ndG8gdXNlCiAqIG9wdGltaXN0aWMgdHJhbnNhY3Rpb25zIGluIGEgbXVsdGkt\nY29ubmVjdGlvbiBldmlyb25tZW50LCB5b3UKICogbXVzdCBzZXQgdGhlIEFs\nbG93Q29uY3VycmVudFJlYWQgc2V0dGluZyB0byB0cnVlIGluIGFkZGl0aW9u\nCiAqIHRvIHN0YW5kYXJkIG9wdGlvbnMuCiAqICBFbXByZXNzIGhhcyB0aGUg\nZm9sbG93aW5nIGFkZGl0aW9uYWwgbGltaXRhdGlvbnM6CiAqIDx1bD4KICog\nPGxpPkZvcmVpZ24ga2V5cyBhcmUgcXVpdGUgbGltaXRlZCBpbiBFbXByZXNz\nIGFuZCBpdCBpcyByZWNvbW1lbmRlZAogKiB0aGF0IHRoZXNlIGJlIGNyZWF0\nZWQgYnkgaGFuZC48L2xpPgogKiA8bGk+QmF0Y2hpbmcgY2FuIGJlIHVucmVs\naWFibGUuIFVzaW5nIEJhdGNoTGltaXQ9MCBpcyBzdHJvbmdseQogKiByZWNv\nbW1lbmRlZC48L2xpPgogKiA8bGk+VXNpbmcgQWxsb3dDb25jdXJyZW50UmVh\nZCBzaG91bGQgYmUgYWNjb21wYW5pZWQgYnkKICogU2ltdWxhdGVMb2NraW5n\nPXRydWU8L2xpPgogKiA8bGk+Q29ubmVjdGlvbnMgc2hvdWxkIGJlIHJvbGxl\nZCBiYWNrIG9uIHJldHVybiB0byBlbnN1cmUgbG9ja3MKICogYXJlIHJlbGVh\nc2VkIChzZWUgT3BlbkpQQSBkZWZhdWx0IERhdGFTb3VyY2UgZG9jdW1lbnRh\ndGlvbi48L2xpPgogKiA8bGk+Q2VydGFpbiBvdXRlciBqb2lucyByZXF1aXJp\nbmcgcGFyYW1ldGVycyBpbiBhIHN1YnNlbGVjdCBpcyBub3QKICogc3VwcG9y\ndGVkIGJ5IEVtcHJlc3MgYW5kIG1heSB1bmRlciBjZXJ0YWluIGNvbmZpZ3Vy\nYXRpb25zIGNhdXNlCiAqIHNpemUgKCkgY2FsbHMgb24gcXVlcnkgcmVzdWx0\ncyBhbmQgTFJTIGZpZWxkcyB0byB0aHJvdyBhbiBleGNlcHRpb24uPC9saT4K\nICogPGxpPkNlcnRhaW4gYWdncmVnYXRlIGZ1bmN0aW9ucyBhcmUgbm90IHN1\ncHBvcnRlZC48L2xpPgogKiA8L3VsPgogKi8KcHVibGljIGNsYXNzIEVtcHJl\nc3NEaWN0aW9uYXJ5CiAgICBleHRlbmRzIERCRGljdGlvbmFyeSB7CgogICAg\nLyoqCiAgICAgKiBUaGlzIHNldHRpbmcgaW5zZXJ0cyAiQllQQVNTIiBhZnRl\nciBldmVyeSAiU0VMRUNUIi4gVGhpcwogICAgICogYWxsb3dzIGZvciBtdWx0\naXBsZSB0cmFuc2FjdGlvbmFsIHJlYWRzIG9mIHRoZSBzYW1lIHJvdwogICAg\nICogZnJvbSBkaWZmZXJlbnQgY29ubmVjdGlvbnMgYXQgdGhlIGV4cGVuc2Ug\nb2YgbG9zcyBvZgogICAgICogcGVzc2ltaXN0aWMgbG9ja2luZy4gRGVmYXVs\ndHMgdG8gZmFsc2UuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGFsbG93\nQ29uY3VycmVudFJlYWQgPSBmYWxzZTsKCiAgICBwdWJsaWMgRW1wcmVzc0Rp\nY3Rpb25hcnkoKSB7CiAgICAgICAgcGxhdGZvcm0gPSAiRW1wcmVzcyI7Cgog\nICAgICAgIHZhbGlkYXRpb25TUUwgPSAiU0VMRUNUIERJU1RJTkNUIHRvZGF5\nIEZST00gc3lzX3RhYmxlcyI7CiAgICAgICAgam9pblN5bnRheCA9IFNZTlRB\nWF9UUkFESVRJT05BTDsKICAgICAgICB0b1VwcGVyQ2FzZUZ1bmN0aW9uID0g\nIlRPVVBQRVIoezB9KSI7CiAgICAgICAgdG9Mb3dlckNhc2VGdW5jdGlvbiA9\nICJUT0xPV0VSKHswfSkiOwoKICAgICAgICBzdXBwb3J0c0RlZmVycmVkQ29u\nc3RyYWludHMgPSBmYWxzZTsKICAgICAgICByZXF1aXJlc0FsaWFzRm9yU3Vi\nc2VsZWN0ID0gdHJ1ZTsKICAgICAgICBtYXhUYWJsZU5hbWVMZW5ndGggPSAy\nODsKICAgICAgICBtYXhDb2x1bW5OYW1lTGVuZ3RoID0gMjg7CiAgICAgICAg\nbWF4SW5kZXhOYW1lTGVuZ3RoID0gMjg7CiAgICAgICAgbWF4Q29uc3RyYWlu\ndE5hbWVMZW5ndGggPSAyODsKICAgICAgICBzY2hlbWFDYXNlID0gU0NIRU1B\nX0NBU0VfUFJFU0VSVkU7CgogICAgICAgIHVzZUdldEJ5dGVzRm9yQmxvYnMg\nPSB0cnVlOwogICAgICAgIHVzZVNldEJ5dGVzRm9yQmxvYnMgPSB0cnVlOwog\nICAgICAgIHVzZUdldFN0cmluZ0ZvckNsb2JzID0gdHJ1ZTsKICAgICAgICB1\nc2VTZXRTdHJpbmdGb3JDbG9icyA9IHRydWU7CgogICAgICAgIGNsb2JUeXBl\nTmFtZSA9ICJURVhUIjsKICAgICAgICBibG9iVHlwZU5hbWUgPSAiQlVMSyI7\nCiAgICAgICAgcmVhbFR5cGVOYW1lID0gIkZMT0FUKDgpIjsKICAgICAgICBi\naWdpbnRUeXBlTmFtZSA9ICJERUNJTUFMKDM4KSI7CiAgICAgICAgdGltZXN0\nYW1wVHlwZU5hbWUgPSAiREFURSI7CiAgICAgICAgdmFyY2hhclR5cGVOYW1l\nID0gIkNIQVJBQ1RFUiI7CiAgICAgICAgdGlueWludFR5cGVOYW1lID0gIkRP\nVUJMRSBQUkVDSVNJT04iOwogICAgICAgIGRvdWJsZVR5cGVOYW1lID0gIlNN\nQUxMSU5UIjsKICAgICAgICBiaXRUeXBlTmFtZSA9ICJTTUFMTElOVCI7Cgog\nICAgICAgIGZpeGVkU2l6ZVR5cGVOYW1lU2V0LmFkZEFsbChBcnJheXMuYXNM\naXN0KG5ldyBTdHJpbmdbXXsKICAgICAgICAgICAgIlRFWFQiLCAiQlVMSyIs\nICJMT05HRkxPQVQiLCAiSU5URUdFUjY0IiwgIlNIT1JUSU5URUdFUiIsCiAg\nICAgICAgICAgICJMT05HSU5URUdFUiIsCiAgICAgICAgfSkpOwogICAgfQoK\nICAgIHB1YmxpYyBib29sZWFuIGlzU3lzdGVtSW5kZXgoU3RyaW5nIG5hbWUs\nIFRhYmxlIHRhYmxlKSB7CiAgICAgICAgcmV0dXJuIG5hbWUudG9VcHBlckNh\nc2UoKS5zdGFydHNXaXRoKCJTWVNfIik7CiAgICB9CgogICAgcHVibGljIFNR\nTEJ1ZmZlciB0b1NlbGVjdChTUUxCdWZmZXIgc2VsZWN0cywgSkRCQ0ZldGNo\nQ29uZmlndXJhdGlvbiBmZXRjaCwKICAgICAgICBTUUxCdWZmZXIgZnJvbSwg\nU1FMQnVmZmVyIHdoZXJlLCBTUUxCdWZmZXIgZ3JvdXAsCiAgICAgICAgU1FM\nQnVmZmVyIGhhdmluZywgU1FMQnVmZmVyIG9yZGVyLAogICAgICAgIGJvb2xl\nYW4gZGlzdGluY3QsIGJvb2xlYW4gZm9yVXBkYXRlLCBsb25nIHN0YXJ0SWR4\nLCBsb25nIGVuZElkeCkgewogICAgICAgIGlmICghYWxsb3dDb25jdXJyZW50\nUmVhZCkKICAgICAgICAgICAgcmV0dXJuIHN1cGVyLnRvU2VsZWN0KHNlbGVj\ndHMsIGZldGNoLCBmcm9tLCB3aGVyZSwgZ3JvdXAsCiAgICAgICAgICAgICAg\nICBoYXZpbmcsIG9yZGVyLCBkaXN0aW5jdCwgZm9yVXBkYXRlLCBzdGFydElk\neCwgZW5kSWR4KTsKCiAgICAgICAgLy8gb3ZlcnJpZGUgdG8gYWxsb3cgYSAi\nQllQQVNTIiB0byBiZSBpbnNlcnRlZCBwb3N0LSJzZWxlY3QiCiAgICAgICAg\nLy8gZGVwZW5kaW5nIG9uIGFsbG93Q29uY3VycmVudFJlYWQgc2V0dGluZwog\nICAgICAgIFNRTEJ1ZmZlciBidWYgPSBuZXcgU1FMQnVmZmVyKHRoaXMpOwog\nICAgICAgIGJ1Zi5hcHBlbmQoIlNFTEVDVCBCWVBBU1MgIik7CiAgICAgICAg\naWYgKGRpc3RpbmN0KQogICAgICAgICAgICBidWYuYXBwZW5kKCJESVNUSU5D\nVCAiKTsKICAgICAgICBidWYuYXBwZW5kKHNlbGVjdHMpLmFwcGVuZCgiIEZS\nT00gIikuYXBwZW5kKGZyb20pOwoKICAgICAgICBpZiAod2hlcmUgIT0gbnVs\nbCAmJiAhd2hlcmUuaXNFbXB0eSgpKQogICAgICAgICAgICBidWYuYXBwZW5k\nKCIgV0hFUkUgIikuYXBwZW5kKHdoZXJlKTsKICAgICAgICBpZiAoZ3JvdXAg\nIT0gbnVsbCAmJiAhZ3JvdXAuaXNFbXB0eSgpKQogICAgICAgICAgICBidWYu\nYXBwZW5kKCIgR1JPVVAgQlkgIikuYXBwZW5kKGdyb3VwKTsKICAgICAgICBp\nZiAoaGF2aW5nICE9IG51bGwgJiYgIWhhdmluZy5pc0VtcHR5KCkpCiAgICAg\nICAgICAgIGJ1Zi5hcHBlbmQoIiBIQVZJTkcgIikuYXBwZW5kKGhhdmluZyk7\nCiAgICAgICAgaWYgKG9yZGVyICE9IG51bGwgJiYgIW9yZGVyLmlzRW1wdHko\nKSkKICAgICAgICAgICAgYnVmLmFwcGVuZCgiIE9SREVSIEJZICIpLmFwcGVu\nZChvcmRlcik7CiAgICAgICAgcmV0dXJuIGJ1ZjsKICAgIH0KCiAgICBwdWJs\naWMgU3RyaW5nW10gZ2V0RHJvcENvbHVtblNRTChDb2x1bW4gY29sdW1uKSB7\nCiAgICAgICAgLy8gZW1wcmVzcyB3YW50cyBkcm9wcGVkIGNvbHVtbnMgaW4g\ndGhlIGZvcm06IEFMVEVSIFRBQkxFIGZvbwogICAgICAgIC8vIERFTEVURSBj\nb2x1bW5Ub0Ryb3AKICAgICAgICByZXR1cm4gbmV3IFN0cmluZ1tdeyAiQUxU\nRVIgVEFCTEUgIgogICAgICAgICAgICArIGdldEZ1bGxOYW1lKGNvbHVtbi5n\nZXRUYWJsZSgpLCBmYWxzZSkgKyAiIERFTEVURSAiICsgY29sdW1uIH07CiAg\nICB9CgogICAgcHVibGljIHZvaWQgc2V0RmxvYXQoUHJlcGFyZWRTdGF0ZW1l\nbnQgc3RtbnQsIGludCBpZHgsIGZsb2F0IHZhbCwKICAgICAgICBDb2x1bW4g\nY29sKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIC8v\nIGVtcHJlc3Mgc2VlbXMgdG8gYWxsb3cgSU5GSU5JVFkgdG8gYmUgc3RvcmVk\nLCBidXQgbm90IHJldHJpZXZlZCwKICAgICAgICAvLyB3aGljaCBjYW4gcHJv\ndmUgdG8gYmUgZGlmZmljdWx0IHRvIGhhbmRsZQogICAgICAgIGlmICh2YWwg\nPT0gRmxvYXQuUE9TSVRJVkVfSU5GSU5JVFkpIHsKICAgICAgICAgICAgdmFs\nID0gRmxvYXQuTUFYX1ZBTFVFOwogICAgICAgICAgICBzdG9yYWdlV2Fybmlu\nZyhuZXcgRmxvYXQoRmxvYXQuUE9TSVRJVkVfSU5GSU5JVFkpLAogICAgICAg\nICAgICAgICAgbmV3IEZsb2F0KHZhbCkpOwogICAgICAgIH0gZWxzZSBpZiAo\ndmFsID09IEZsb2F0Lk5FR0FUSVZFX0lORklOSVRZKSB7CiAgICAgICAgICAg\nIHZhbCA9IEZsb2F0Lk1JTl9WQUxVRSArIDE7CiAgICAgICAgICAgIHN0b3Jh\nZ2VXYXJuaW5nKG5ldyBGbG9hdChGbG9hdC5ORUdBVElWRV9JTkZJTklUWSks\nCiAgICAgICAgICAgICAgICBuZXcgRmxvYXQodmFsKSk7CiAgICAgICAgfQog\nICAgICAgIHN1cGVyLnNldEZsb2F0KHN0bW50LCBpZHgsIHZhbCwgY29sKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXREb3VibGUoUHJlcGFyZWRTdGF0\nZW1lbnQgc3RtbnQsIGludCBpZHgsIGRvdWJsZSB2YWwsCiAgICAgICAgQ29s\ndW1uIGNvbCkKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAg\nICAvLyBlbXByZXNzIHNlZW1zIHRvIGFsbG93IElORklOSVRZIHRvIGJlIHN0\nb3JlZCwgYnV0IG5vdCByZXRyaWV2ZWQsCiAgICAgICAgLy8gd2hpY2ggY2Fu\nIHByb3ZlIHRvIGJlIGRpZmZpY3VsdCB0byBoYW5kbGUKICAgICAgICBpZiAo\ndmFsID09IERvdWJsZS5QT1NJVElWRV9JTkZJTklUWSkgewogICAgICAgICAg\nICB2YWwgPSBEb3VibGUuTUFYX1ZBTFVFOwogICAgICAgICAgICBzdG9yYWdl\nV2FybmluZyhuZXcgRG91YmxlKERvdWJsZS5QT1NJVElWRV9JTkZJTklUWSks\nCiAgICAgICAgICAgICAgICBuZXcgRG91YmxlKHZhbCkpOwogICAgICAgIH0g\nZWxzZSBpZiAodmFsID09IERvdWJsZS5ORUdBVElWRV9JTkZJTklUWSkgewog\nICAgICAgICAgICB2YWwgPSBEb3VibGUuTUlOX1ZBTFVFICsgMTsKICAgICAg\nICAgICAgc3RvcmFnZVdhcm5pbmcobmV3IERvdWJsZShEb3VibGUuTkVHQVRJ\nVkVfSU5GSU5JVFkpLAogICAgICAgICAgICAgICAgbmV3IERvdWJsZSh2YWwp\nKTsKICAgICAgICB9CiAgICAgICAgc3VwZXIuc2V0RG91YmxlKHN0bW50LCBp\nZHgsIHZhbCwgY29sKTsKICAgIH0KfQo=\n","encoding":"base64"}

