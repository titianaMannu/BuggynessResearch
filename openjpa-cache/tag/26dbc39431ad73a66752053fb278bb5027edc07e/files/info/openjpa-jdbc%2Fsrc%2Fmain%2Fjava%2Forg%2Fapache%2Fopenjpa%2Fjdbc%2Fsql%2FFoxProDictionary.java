{"sha":"414942cf21675a7ce25076ff9d7aa34c6c8d6830","node_id":"MDQ6QmxvYjIwNjM2NDo0MTQ5NDJjZjIxNjc1YTdjZTI1MDc2ZmY5ZDdhYTM0YzZjOGQ2ODMw","size":5860,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/414942cf21675a7ce25076ff9d7aa34c6c8d6830","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWw7CgppbXBvcnQg\namF2YS5zcWwuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmEuc3FsLkRhdGFiYXNl\nTWV0YURhdGE7CmltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDsK\naW1wb3J0IGphdmEuc3FsLlJlc3VsdFNldDsKaW1wb3J0IGphdmEuc3FsLlNR\nTEV4Y2VwdGlvbjsKaW1wb3J0IGphdmEuc3FsLlR5cGVzOwoKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5Db2x1bW47CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuSW5kZXg7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuUHJpbWFyeUtleTsKCi8q\nKgogKiBEaWN0aW9uYXJ5IGZvciBWaXN1YWwgRm94UHJvIHZpYSBEYXRhRGly\nZWN0IFNlcXVlTGluawogKiBhbmQgRGF0YURpcmVjdCBPREJDIEZveFBybyBk\ncml2ZXIuIFRoaXMgd2lsbCBub3QKICogd29yayB3aXRoIGFueSBvdGhlciBj\nb21iaW5hdGlvbiBvZiBKREJDL09EQkMgc2VydmVyIGFuZCBPREJDIGRyaXZl\nci4KICogIEZveFBybyBoYXMgdGhlIGZvbGxvd2luZyBsaW1pdGF0aW9uczoK\nICogPHVsPgogKiA8bGk+UHJpbWFyeSBLZXlzIGFuZCBpbmRleGVzIGNhbm5v\ndCBiZSBjcmVhdGVkIHZpYSBKREJDPC9saT4KICogPGxpPk9ubHkgaGFzIGZp\neGVkLWxlbmd0aCBjaGFyIGZpZWxkczogYWxsIHN0cmluZ3MgbXVzdCBiZQog\nKiB0cmltbWVkIGluIHJlc3VsdCBzZXRzPC9saT4KICogPGxpPkRvZXMgbm90\nIGhhdmUgc3VmZmljaWVudCBzdXBwb3J0IGZvciBmb3JlaWduIGtleXM8L2xp\nPgogKiA8bGk+T0RCQyBkcml2ZXIgY2Fubm90IGhhbmRsZSBjZXJ0YWluIEFn\nZ3JlZ2F0ZSBmdW5jdGlvbnMuPC9saT4KICogPGxpPkxvY2tpbmcgaXMgZXh0\ncmVtZWxleSB1bnJlbGlhYmxlLiBNdWx0aXBsZSBjbGllbnRzCiAqIGFjY2Vz\nc2luZyBzaW5nbGUgZGF0YXN0b3JlIG1heSByZXN1bHQgaW4gY29uY3VycmVu\nY3kKICogZGF0YSB2YWxpZGl0eSBlcnJvcnMuPC9saT4KICogPC91bD4KICov\nCnB1YmxpYyBjbGFzcyBGb3hQcm9EaWN0aW9uYXJ5CiAgICBleHRlbmRzIERC\nRGljdGlvbmFyeSB7CgogICAgcHVibGljIEZveFByb0RpY3Rpb25hcnkoKSB7\nCiAgICAgICAgcGxhdGZvcm0gPSAiVmlzdWFsIEZveFBybyI7CiAgICAgICAg\nam9pblN5bnRheCA9IFNZTlRBWF9UUkFESVRJT05BTDsKCiAgICAgICAgc3Vw\ncG9ydHNGb3JlaWduS2V5cyA9IGZhbHNlOwogICAgICAgIHN1cHBvcnRzRGVm\nZXJyZWRDb25zdHJhaW50cyA9IGZhbHNlOwogICAgICAgIG1heFRhYmxlTmFt\nZUxlbmd0aCA9IDMwOwogICAgICAgIG1heENvbHVtbk5hbWVMZW5ndGggPSAz\nMDsKICAgICAgICBtYXhJbmRleE5hbWVMZW5ndGggPSA4OwogICAgICAgIG1h\neENvbnN0cmFpbnROYW1lTGVuZ3RoID0gODsKCiAgICAgICAgYmluYXJ5VHlw\nZU5hbWUgPSAiR0VORVJBTCI7CiAgICAgICAgYmxvYlR5cGVOYW1lID0gIkdF\nTkVSQUwiOwogICAgICAgIGxvbmdWYXJiaW5hcnlUeXBlTmFtZSA9ICJHRU5F\nUkFMIjsKICAgICAgICBjbG9iVHlwZU5hbWUgPSAiTUVNTyI7CiAgICAgICAg\nbG9uZ1ZhcmNoYXJUeXBlTmFtZSA9ICJNRU1PIjsKICAgICAgICBkYXRlVHlw\nZU5hbWUgPSAiVElNRVNUQU1QIjsKICAgICAgICB0aW1lVHlwZU5hbWUgPSAi\nVElNRVNUQU1QIjsKICAgICAgICB2YXJjaGFyVHlwZU5hbWUgPSAiQ0hBUkFD\nVEVSezB9IjsKICAgICAgICBiaWdpbnRUeXBlTmFtZSA9ICJET1VCTEUiOwog\nICAgICAgIG51bWVyaWNUeXBlTmFtZSA9ICJJTlRFR0VSIjsKICAgICAgICBz\nbWFsbGludFR5cGVOYW1lID0gIklOVEVHRVIiOwogICAgICAgIGJpdFR5cGVO\nYW1lID0gIk5VTUVSSUMoMSkiOwogICAgICAgIGludGVnZXJUeXBlTmFtZSA9\nICJJTlRFR0VSIjsKICAgICAgICB0aW55aW50VHlwZU5hbWUgPSAiSU5URUdF\nUiI7CiAgICAgICAgZGVjaW1hbFR5cGVOYW1lID0gIkRPVUJMRSI7CiAgICAg\nICAgZG91YmxlVHlwZU5hbWUgPSAiRE9VQkxFIjsKICAgICAgICByZWFsVHlw\nZU5hbWUgPSAiRE9VQkxFIjsKICAgICAgICBmbG9hdFR5cGVOYW1lID0gIk5V\nTUVSSUMoMTksMTYpIjsKCiAgICAgICAgLy8gdGhlIG1heCBjaGFyYWN0ZXIg\nbGl0ZXJhbCBsZW5ndGggaXMgYWN0dWFsbHkgMjU0LCBidXQgZm9yIHByaW1h\ncnkKICAgICAgICAvLyBrZXlzLCBpdCBpcyAyNDA7IGRlZmF1bHQgdG8gdGhh\ndCBsZW5ndGggc28gdXNlcnMgY2FuIGFkZCBQS3MgbGF0ZXIKICAgICAgICBj\naGFyYWN0ZXJDb2x1bW5TaXplID0gMjQwOwogICAgfQoKICAgIHB1YmxpYyBT\ndHJpbmcgZ2V0U3RyaW5nKFJlc3VsdFNldCBycywgaW50IGNvbHVtbikKICAg\nICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAvLyBmb3hwcm8g\nZG9lc24ndCBhdXRvLXRydW5jYXRlIHZhbHVlcy4KICAgICAgICBTdHJpbmcg\nc3RyID0gcnMuZ2V0U3RyaW5nKGNvbHVtbik7CiAgICAgICAgaWYgKHN0ciAh\nPSBudWxsKQogICAgICAgICAgICBzdHIgPSBzdHIudHJpbSgpOwogICAgICAg\nIHJldHVybiBzdHI7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0TnVsbChQ\ncmVwYXJlZFN0YXRlbWVudCBzdG1udCwgaW50IGlkeCwgaW50IGNvbFR5cGUs\nCiAgICAgICAgQ29sdW1uIGNvbCkKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0\naW9uIHsKICAgICAgICAvLyBlbnN1cmUgdGhhdCBibG9iL2Nsb2IgaXMgaGFu\nZGxlZCB3aXRoIHNhZmUgbWV0aG9kcy4KICAgICAgICBzd2l0Y2ggKGNvbFR5\ncGUpIHsKICAgICAgICAgICAgY2FzZSBUeXBlcy5CTE9COgogICAgICAgICAg\nICAgICAgc3RtbnQuc2V0Qnl0ZXMoaWR4LCBudWxsKTsKICAgICAgICAgICAg\nICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIFR5cGVzLkNMT0I6CiAgICAg\nICAgICAgICAgICBzdG1udC5zZXRTdHJpbmcoaWR4LCBudWxsKTsKICAgICAg\nICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAg\nICAgICAgICAgc3VwZXIuc2V0TnVsbChzdG1udCwgaWR4LCBjb2xUeXBlLCBj\nb2wpOwogICAgICAgIH0KICAgIH0KCiAgICBwcm90ZWN0ZWQgU3RyaW5nIGFw\ncGVuZFNpemUoQ29sdW1uIGNvbCwgU3RyaW5nIHR5cGVOYW1lKSB7CiAgICAg\nICAgLy8gZm94cHJvIGRvZXMgbm90IGxpa2UgdW5zaXplZCBjb2x1bW4gZGVj\nbGFyYXRpb25zLgogICAgICAgIGlmIChjb2wuZ2V0U2l6ZSgpID09IDApIHsK\nICAgICAgICAgICAgaWYgKCJDSEFSQUNURVIiLmVxdWFscyh0eXBlTmFtZSkp\nCiAgICAgICAgICAgICAgICBjb2wuc2V0U2l6ZSgyNDApOwogICAgICAgICAg\nICBlbHNlIGlmICgiTlVNRVJJQyIuZXF1YWxzKHR5cGVOYW1lKSkKICAgICAg\nICAgICAgICAgIGNvbC5zZXRTaXplKDE5KTsKICAgICAgICB9CiAgICAgICAg\ncmV0dXJuIHN1cGVyLmFwcGVuZFNpemUoY29sLCB0eXBlTmFtZSk7CiAgICB9\nCgogICAgcHJvdGVjdGVkIFN0cmluZyBnZXRQcmltYXJ5S2V5Q29uc3RyYWlu\ndFNRTChQcmltYXJ5S2V5IHBrKSB7CiAgICAgICAgLy8gdGhpcyBmb3hwcm8g\nZHJpdmVyIGNvbWJpbmF0aW9uIGRvZXMgbm90IHN1cHBvcnQgcHJpbWFyeSBr\nZXlzCiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgcHVibGljIFN0\ncmluZ1tdIGdldENyZWF0ZUluZGV4U1FMKEluZGV4IGluZGV4KSB7CiAgICAg\nICAgLy8gZm94cHJvIEpEQkMgYWNjZXNzIGRvZXMgbm90IGFsbG93IHRoZSBj\ncmVhdGlvbiBvZiBpbmRleGVzCiAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmdb\nMF07CiAgICB9CgogICAgcHVibGljIENvbHVtbltdIGdldENvbHVtbnMoRGF0\nYWJhc2VNZXRhRGF0YSBtZXRhLCBTdHJpbmcgY2F0YWxvZywKICAgICAgICBT\ndHJpbmcgc2NoZW1hTmFtZSwgU3RyaW5nIHRhYmxlTmFtZSwgU3RyaW5nIGNv\nbHVtbk5hbWUsIENvbm5lY3Rpb24gY29ubikKICAgICAgICB0aHJvd3MgU1FM\nRXhjZXB0aW9uIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBDb2x1bW5b\nXSBjb2xzID0gc3VwZXIuZ2V0Q29sdW1ucyhtZXRhLCBjYXRhbG9nLCBzY2hl\nbWFOYW1lLAogICAgICAgICAgICAgICAgdGFibGVOYW1lLCBjb2x1bW5OYW1l\nLCBjb25uKTsKICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGNvbHMgIT0g\nbnVsbCAmJiBpIDwgY29scy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAg\nICAgLy8gZm94cHJvIHJldHVybnMgYW4gb2RkIHR5cGUgIjExIiBjb2RlIGZv\nciBEQVRFVElNRSBmaWVsZHMKICAgICAgICAgICAgICAgIGlmIChjb2xzW2ld\nLmdldFR5cGUoKSA9PSAxMSkKICAgICAgICAgICAgICAgICAgICBjb2xzW2ld\nLnNldFR5cGUoVHlwZXMuVElNRVNUQU1QKTsKICAgICAgICAgICAgICAgICAg\nICAvLyBNRU1PIG1hcHMgdG8gTE9OR1ZBUkNIQVIgZHVyaW5nIHJldmVyc2Ug\nYW5hbHlzaXMKICAgICAgICAgICAgICAgIGVsc2UgaWYgKCJNRU1PIi5lcXVh\nbHMoY29sc1tpXS5nZXRUeXBlTmFtZSgpKSkKICAgICAgICAgICAgICAgICAg\nICBjb2xzW2ldLnNldFR5cGUoVHlwZXMuQ0xPQik7CiAgICAgICAgICAgIH0K\nICAgICAgICAgICAgcmV0dXJuIGNvbHM7CiAgICAgICAgfSBjYXRjaCAoU1FM\nRXhjZXB0aW9uIHNlKSB7CiAgICAgICAgICAgIC8vIGZveHBybyB0aHJvd3Mg\nYW4gZXhjZXB0aW9uIGlmIHRoZSB0YWJsZSBzcGVjaWZpZWQgaW4gdGhlCiAg\nICAgICAgICAgIC8vIGNvbHVtbiBsaXN0IGlzIG5vdCBmb3VuZAogICAgICAg\nICAgICBpZiAoc2UuZ2V0RXJyb3JDb2RlKCkgPT0gNTYyKQogICAgICAgICAg\nICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIHRocm93IHNlOwogICAg\nICAgIH0KICAgIH0KCiAgICBwdWJsaWMgUHJpbWFyeUtleVtdIGdldFByaW1h\ncnlLZXlzKERhdGFiYXNlTWV0YURhdGEgbWV0YSwgU3RyaW5nIGNhdGFsb2cs\nCiAgICAgICAgU3RyaW5nIHNjaGVtYU5hbWUsIFN0cmluZyB0YWJsZU5hbWUs\nIENvbm5lY3Rpb24gY29ubikKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9u\nIHsKICAgICAgICAvLyB0aGlzIGNvbWJpbmF0aW9uIGRvZXMgbm90IHJlbGlh\nYmx5IHJldHVybiBQSyBpbmZvcm1hdGlvbgogICAgICAgIHJldHVybiBudWxs\nOwogICAgfQp9Cg==\n","encoding":"base64"}

