{"sha":"8b3b52e1c3b7937df5a3309777c02a7238069e26","node_id":"MDQ6QmxvYjIwNjM2NDo4YjNiNTJlMWMzYjc5MzdkZjVhMzMwOTc3N2MwMmE3MjM4MDY5ZTI2","size":4473,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/8b3b52e1c3b7937df5a3309777c02a7238069e26","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWw7CgppbXBvcnQg\namF2YS5zcWwuVHlwZXM7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpk\nYmMua2VybmVsLmV4cHMuRmlsdGVyVmFsdWU7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEuamRiYy5zY2hlbWEuQ29sdW1uOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmpkYmMuc2NoZW1hLkluZGV4OwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmxpYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS51dGlsLlN0b3JlRXhjZXB0aW9uOwoKLyoqCiAqIERpY3Rp\nb25hcnkgZm9yIEJvcmxhbmQgSW50ZXJiYXNlLgogKi8KcHVibGljIGNsYXNz\nIEludGVyYmFzZURpY3Rpb25hcnkKICAgIGV4dGVuZHMgREJEaWN0aW9uYXJ5\nIHsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6ZXIgX2xvYyA9\nIExvY2FsaXplci5mb3JQYWNrYWdlCiAgICAgICAgKEludGVyYmFzZURpY3Rp\nb25hcnkuY2xhc3MpOwoKICAgIHB1YmxpYyBJbnRlcmJhc2VEaWN0aW9uYXJ5\nKCkgewogICAgICAgIHBsYXRmb3JtID0gIkJvcmxhbmQgSW50ZXJiYXNlIjsK\nICAgICAgICB2YWxpZGF0aW9uU1FMID0gIlNFTEVDVCAxIEZST00gUkRCJERB\nVEFCQVNFIjsKICAgICAgICBzdXBwb3J0c0RlZmVycmVkQ29uc3RyYWludHMg\nPSBmYWxzZTsKCiAgICAgICAgdXNlR2V0U3RyaW5nRm9yQ2xvYnMgPSB0cnVl\nOwogICAgICAgIHVzZVNldFN0cmluZ0ZvckNsb2JzID0gdHJ1ZTsKICAgICAg\nICB1c2VHZXRCeXRlc0ZvckJsb2JzID0gdHJ1ZTsKICAgICAgICB1c2VTZXRC\neXRlc0ZvckJsb2JzID0gdHJ1ZTsKCiAgICAgICAgLy8gdGhlIEpEQkMgZHJp\ndmVyIGNsYWltcyAzMSwgYnV0IHRoYXQgY2F1c2VzIGV4Y2VwdGlvbnMKICAg\nICAgICBtYXhUYWJsZU5hbWVMZW5ndGggPSAzMDsKCiAgICAgICAgYmlnaW50\nVHlwZU5hbWUgPSAiTlVNRVJJQygxOCwwKSI7CiAgICAgICAgaW50ZWdlclR5\ncGVOYW1lID0gIklOVEVHRVIiOwogICAgICAgIGRvdWJsZVR5cGVOYW1lID0g\nIkRPVUJMRSBQUkVDSVNJT04iOwogICAgICAgIGNoYXJUeXBlTmFtZSA9ICJD\nSEFSKDEpIjsKICAgICAgICBibG9iVHlwZU5hbWUgPSAiQkxPQiI7CiAgICAg\nICAgY2xvYlR5cGVOYW1lID0gIkJMT0IgU1VCX1RZUEUgMSI7CiAgICAgICAg\nYml0VHlwZU5hbWUgPSAiU01BTExJTlQiOwogICAgICAgIHNtYWxsaW50VHlw\nZU5hbWUgPSAiU01BTExJTlQiOwogICAgICAgIHRpbnlpbnRUeXBlTmFtZSA9\nICJTTUFMTElOVCI7CgogICAgICAgIC8vIG5vIHN1cHBvcnQgZm9yIGxvd2Vy\nLWNhc2luZyBvciBmaW5kaW5nIHRoZSBsZW5ndGggb2Ygc3RyaW5ncwogICAg\nICAgIC8vIChhbHRob3VnaCBpdCBjYW4gYmUgYWRkZWQgdG8gdGhlIGRhdGFi\nYXNlOyBzZWUKICAgICAgICAvLyBodHRwOi8vYmRuLmJvcmxhbmQuY29tL2Fy\ndGljbGUvMCwxNDEwLDI3NTYzLDAwLmh0bWwgKQogICAgICAgIHRvTG93ZXJD\nYXNlRnVuY3Rpb24gPSBudWxsOwogICAgICAgIHN0cmluZ0xlbmd0aEZ1bmN0\naW9uID0gbnVsbDsKICAgIH0KCiAgICBwcm90ZWN0ZWQgU3RyaW5nIGdldFRh\nYmxlTmFtZUZvck1ldGFkYXRhKFN0cmluZyB0YWJsZU5hbWUpIHsKICAgICAg\nICByZXR1cm4gKHRhYmxlTmFtZSA9PSBudWxsKSA/ICIlIgogICAgICAgICAg\nICA6IHN1cGVyLmdldFRhYmxlTmFtZUZvck1ldGFkYXRhKHRhYmxlTmFtZSk7\nCiAgICB9CgogICAgcHJvdGVjdGVkIFN0cmluZyBnZXRDb2x1bW5OYW1lRm9y\nTWV0YWRhdGEoU3RyaW5nIGNvbHVtbk5hbWUpIHsKICAgICAgICByZXR1cm4g\nKGNvbHVtbk5hbWUgPT0gbnVsbCkgPyAiJSIKICAgICAgICAgICAgOiBzdXBl\nci5nZXRDb2x1bW5OYW1lRm9yTWV0YWRhdGEoY29sdW1uTmFtZSk7CiAgICB9\nCgogICAgcHJvdGVjdGVkIFN0cmluZyBhcHBlbmRTaXplKENvbHVtbiBjb2ws\nIFN0cmluZyB0eXBlTmFtZSkgewogICAgICAgIGlmIChjb2wuaXNQcmltYXJ5\nS2V5KCkgJiYgY29sLmdldFR5cGUoKSA9PSBUeXBlcy5WQVJDSEFSKSB7CiAg\nICAgICAgICAgIC8vIHJlZHVjZSBzaXplIG9mIHZhcmNoYXIgcHJpbWFyeSBr\nZXkgY29scyBwcm9wb3J0aW9uYWwgdG8gdGhlCiAgICAgICAgICAgIC8vIG51\nbWJlciBvZiBjb2xzLCBiZWNhdXNlIGludGVyYmFzZSBjYXBzIHRoZSB0b3Rh\nbCBwayBzaXplCiAgICAgICAgICAgIGludCBudW1LZXlzID0gMTsKICAgICAg\nICAgICAgaWYgKGNvbC5nZXRUYWJsZSgpICE9IG51bGwKICAgICAgICAgICAg\nICAgICYmIGNvbC5nZXRUYWJsZSgpLmdldFByaW1hcnlLZXkoKSAhPSBudWxs\nKQogICAgICAgICAgICAgICAgbnVtS2V5cyA9IGNvbC5nZXRUYWJsZSgpLmdl\ndFByaW1hcnlLZXkoKS5nZXRDb2x1bW5zKCkubGVuZ3RoOwogICAgICAgICAg\nICBjb2wuc2V0U2l6ZShNYXRoLm1pbihjb2wuZ2V0U2l6ZSgpLCAyMDAgLyBu\ndW1LZXlzKSk7CiAgICAgICAgfSBlbHNlIGlmIChjb2wuZ2V0VHlwZSgpID09\nIFR5cGVzLlZBUkNIQVIgJiYgY29sLmdldFNpemUoKSA+IDIwMAogICAgICAg\nICAgICAmJiBjb2wuZ2V0VGFibGUoKSAhPSBudWxsKSB7CiAgICAgICAgICAg\nIC8vIGluZGV4ZWQgdmFyY2hhciBjb2xzIGhhdmUgdG8gYmUgPD0gMjUwIGNo\nYXJzCiAgICAgICAgICAgIEluZGV4W10gaWR4ID0gY29sLmdldFRhYmxlKCku\nZ2V0SW5kZXhlcygpOwogICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8\nIGlkeC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgaWYgKGlkeFtp\nXS5jb250YWluc0NvbHVtbihjb2wpKSB7CiAgICAgICAgICAgICAgICAgICAg\nY29sLnNldFNpemUoTWF0aC5taW4oY29sLmdldFNpemUoKSwgMjAwKSk7CiAg\nICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAg\nICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHN1cGVyLmFw\ncGVuZFNpemUoY29sLCB0eXBlTmFtZSk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgaW5kZXhPZihTUUxCdWZmZXIgYnVmLCBGaWx0ZXJWYWx1ZSBzdHIsIEZp\nbHRlclZhbHVlIGZpbmQsCiAgICAgICAgRmlsdGVyVmFsdWUgc3RhcnQpIHsK\nICAgICAgICB0aHJvdyBuZXcgU3RvcmVFeGNlcHRpb24oX2xvYy5nZXQoImlu\nZGV4b2Ytbm90LXN1cHBvcnRlZCIsIHBsYXRmb3JtKSk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgc3Vic3RyaW5nKFNRTEJ1ZmZlciBidWYsIEZpbHRlclZh\nbHVlIHN0ciwgRmlsdGVyVmFsdWUgc3RhcnQsCiAgICAgICAgRmlsdGVyVmFs\ndWUgZW5kKSB7CiAgICAgICAgdGhyb3cgbmV3IFN0b3JlRXhjZXB0aW9uKF9s\nb2MuZ2V0KCJzdWJzdHJpbmctbm90LXN1cHBvcnRlZCIsCiAgICAgICAgICAg\nIHBsYXRmb3JtKSk7CiAgICB9CgogICAgcHVibGljIFN0cmluZ1tdIGdldERy\nb3BDb2x1bW5TUUwoQ29sdW1uIGNvbHVtbikgewogICAgICAgIC8vIEludGVy\nYmFzZSB1c2VzICJBTFRFUiBUQUJMRSBEUk9QIDxDT0xVTU5fTkFNRT4iIHJh\ndGhlciB0aGFuIHRoZQogICAgICAgIC8vIHVzdWFsICJBTFRFUiBUQUJMRSBE\nUk9QIENPTFVNTiA8Q09MVU1OX05BTUU+IgogICAgICAgIHJldHVybiBuZXcg\nU3RyaW5nW117ICJBTFRFUiBUQUJMRSAiCiAgICAgICAgICAgICsgZ2V0RnVs\nbE5hbWUoY29sdW1uLmdldFRhYmxlKCksIGZhbHNlKSArICIgRFJPUCAiICsg\nY29sdW1uIH07CiAgICB9Cn0K\n","encoding":"base64"}

