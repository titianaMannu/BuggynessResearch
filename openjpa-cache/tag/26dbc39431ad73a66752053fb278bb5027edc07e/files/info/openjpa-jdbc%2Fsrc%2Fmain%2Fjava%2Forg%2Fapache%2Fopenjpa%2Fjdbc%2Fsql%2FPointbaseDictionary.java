{"sha":"6162a54537794b818c1e6ac14fb8fc12decda438","node_id":"MDQ6QmxvYjIwNjM2NDo2MTYyYTU0NTM3Nzk0YjgxOGMxZTZhYzE0ZmI4ZmMxMmRlY2RhNDM4","size":4318,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/6162a54537794b818c1e6ac14fb8fc12decda438","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWw7CgppbXBvcnQg\namF2YS5zcWwuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmEuc3FsLkRhdGFiYXNl\nTWV0YURhdGE7CmltcG9ydCBqYXZhLnNxbC5TUUxFeGNlcHRpb247CmltcG9y\ndCBqYXZhLnNxbC5UeXBlczsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5rZXJuZWwuZXhwcy5GaWx0ZXJWYWx1ZTsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLnNjaGVtYS5Db2x1bW47CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuSW5kZXg7CgovKioKICogRGljdGlv\nbmFyeSBmb3IgUG9pbnRiYXNlIEVtYmVkZGVkLgogKi8KcHVibGljIGNsYXNz\nIFBvaW50YmFzZURpY3Rpb25hcnkKICAgIGV4dGVuZHMgREJEaWN0aW9uYXJ5\nIHsKCiAgICBwdWJsaWMgUG9pbnRiYXNlRGljdGlvbmFyeSgpIHsKICAgICAg\nICBwbGF0Zm9ybSA9ICJQb2ludGJhc2UgRW1iZWRkZWQiOwogICAgICAgIHN1\ncHBvcnRzRGVmZXJyZWRDb25zdHJhaW50cyA9IGZhbHNlOwogICAgICAgIHN1\ncHBvcnRzTXVsdGlwbGVOb250cmFuc2FjdGlvbmFsUmVzdWx0U2V0cyA9IGZh\nbHNlOwogICAgICAgIHJlcXVpcmVzQWxpYXNGb3JTdWJzZWxlY3QgPSB0cnVl\nOwoKICAgICAgICBzdXBwb3J0c0xvY2tpbmdXaXRoRGlzdGluY3RDbGF1c2Ug\nPSBmYWxzZTsKICAgICAgICBzdXBwb3J0c0xvY2tpbmdXaXRoTXVsdGlwbGVU\nYWJsZXMgPSBmYWxzZTsKICAgICAgICBzdXBwb3J0c0xvY2tpbmdXaXRoRGlz\ndGluY3RDbGF1c2UgPSBmYWxzZTsKCiAgICAgICAgYml0VHlwZU5hbWUgPSAi\nVElOWUlOVCI7CiAgICAgICAgYmxvYlR5cGVOYW1lID0gIkJMT0IoMU0pIjsK\nICAgICAgICBsb25nVmFyYmluYXJ5VHlwZU5hbWUgPSAiQkxPQigxTSkiOwog\nICAgICAgIGNoYXJUeXBlTmFtZSA9ICJDSEFSQUNURVJ7MH0iOwogICAgICAg\nIGNsb2JUeXBlTmFtZSA9ICJDTE9CKDFNKSI7CiAgICAgICAgZG91YmxlVHlw\nZU5hbWUgPSAiRE9VQkxFIFBSRUNJU0lPTiI7CiAgICAgICAgZmxvYXRUeXBl\nTmFtZSA9ICJGTE9BVCI7CiAgICAgICAgYmlnaW50VHlwZU5hbWUgPSAiQklH\nSU5UIjsKICAgICAgICBpbnRlZ2VyVHlwZU5hbWUgPSAiSU5URUdFUiI7CiAg\nICAgICAgcmVhbFR5cGVOYW1lID0gIlJFQUwiOwogICAgICAgIHNtYWxsaW50\nVHlwZU5hbWUgPSAiU01BTExJTlQiOwogICAgICAgIHRpbnlpbnRUeXBlTmFt\nZSA9ICJUSU5ZSU5UIjsKCiAgICAgICAgLy8gdGhlcmUgaXMgbm8gYnVpbGQt\naW4gZnVuY3Rpb24gZm9yIGdldHRpbmcgdGhlIGxhc3QgZ2VuZXJhdGVkCiAg\nICAgICAgLy8ga2V5IGluIFBvaW50YmFzZTsgdXNpbmcgTUFYIHdpbGwgaGF2\nZSB0byBzdWZmaWNlCiAgICAgICAgc3VwcG9ydHNBdXRvQXNzaWduID0gdHJ1\nZTsKICAgICAgICBsYXN0R2VuZXJhdGVkS2V5UXVlcnkgPSAiU0VMRUNUIE1B\nWCh7MH0pIEZST00gezF9IjsKICAgICAgICBhdXRvQXNzaWduVHlwZU5hbWUg\nPSAiQklHSU5UIElERU5USVRZIjsKICAgIH0KCiAgICBwdWJsaWMgaW50IGdl\ndFByZWZlcnJlZFR5cGUoaW50IHR5cGUpIHsKICAgICAgICBzd2l0Y2ggKHR5\ncGUpIHsKICAgICAgICAgICAgY2FzZSBUeXBlcy5MT05HVkFSQ0hBUjoKICAg\nICAgICAgICAgICAgIHJldHVybiBUeXBlcy5DTE9COwogICAgICAgICAgICBk\nZWZhdWx0OgogICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmdldFByZWZl\ncnJlZFR5cGUodHlwZSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBD\nb2x1bW5bXSBnZXRDb2x1bW5zKERhdGFiYXNlTWV0YURhdGEgbWV0YSwgU3Ry\naW5nIGNhdGFsb2csCiAgICAgICAgU3RyaW5nIHNjaGVtYU5hbWUsIFN0cmlu\nZyB0YWJsZU5hbWUsIFN0cmluZyBjb2x1bW5OYW1lLCBDb25uZWN0aW9uIGNv\nbm4pCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgQ29s\ndW1uW10gY29scyA9IHN1cGVyLmdldENvbHVtbnMobWV0YSwgY2F0YWxvZywg\nc2NoZW1hTmFtZSwgdGFibGVOYW1lLAogICAgICAgICAgICBjb2x1bW5OYW1l\nLCBjb25uKTsKCiAgICAgICAgLy8gcG9pbnRiYXNlIHJlcG9ydHMgdGhlIHR5\ncGUgZm9yIGEgQ0xPQiBmaWVsZCBhcyBWQVJDSEFSOiBvdmVycmlkZSBpdAog\nICAgICAgIGZvciAoaW50IGkgPSAwOyBjb2xzICE9IG51bGwgJiYgaSA8IGNv\nbHMubGVuZ3RoOyBpKyspCiAgICAgICAgICAgIGlmIChjb2xzW2ldLmdldFR5\ncGVOYW1lKCkudG9VcHBlckNhc2UoKS5zdGFydHNXaXRoKCJDTE9CIikpCiAg\nICAgICAgICAgICAgICBjb2xzW2ldLnNldFR5cGUoVHlwZXMuQ0xPQik7CiAg\nICAgICAgcmV0dXJuIGNvbHM7CiAgICB9CgogICAgcHVibGljIFN0cmluZyBn\nZXRGdWxsTmFtZShJbmRleCBpbmRleCkgewogICAgICAgIHJldHVybiBnZXRG\ndWxsTmFtZShpbmRleC5nZXRUYWJsZSgpLCBmYWxzZSkgKyAiLiIgKyBpbmRl\neC5nZXROYW1lKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc3Vic3RyaW5n\nKFNRTEJ1ZmZlciBidWYsIEZpbHRlclZhbHVlIHN0ciwgRmlsdGVyVmFsdWUg\nc3RhcnQsCiAgICAgICAgRmlsdGVyVmFsdWUgZW5kKSB7CiAgICAgICAgLy8g\nU1VCU1RSSU5HIGluIFBvaW50YmFzZSBpcyBvZiB0aGUgZm9ybToKICAgICAg\nICAvLyBTRUxFQ1QgU1VCU1RSSU5HKFNPTUVfQ09MVU1OIEZST00gMSBGT1Ig\nNSkKICAgICAgICBidWYuYXBwZW5kKCJTVUJTVFJJTkcoIik7CiAgICAgICAg\nc3RyLmFwcGVuZFRvKGJ1Zik7CiAgICAgICAgYnVmLmFwcGVuZCgiIEZST00g\nIik7CiAgICAgICAgc3RhcnQuYXBwZW5kVG8oYnVmKTsKICAgICAgICBidWYu\nYXBwZW5kKCIgKyAxIik7CiAgICAgICAgaWYgKGVuZCAhPSBudWxsKSB7CiAg\nICAgICAgICAgIGJ1Zi5hcHBlbmQoIiBGT1IgIik7CiAgICAgICAgICAgIGVu\nZC5hcHBlbmRUbyhidWYpOwogICAgICAgICAgICBidWYuYXBwZW5kKCIgLSAo\nIik7CiAgICAgICAgICAgIHN0YXJ0LmFwcGVuZFRvKGJ1Zik7CiAgICAgICAg\nICAgIGJ1Zi5hcHBlbmQoIikiKTsKICAgICAgICB9CiAgICAgICAgYnVmLmFw\ncGVuZCgiKSIpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGluZGV4T2YoU1FM\nQnVmZmVyIGJ1ZiwgRmlsdGVyVmFsdWUgc3RyLCBGaWx0ZXJWYWx1ZSBmaW5k\nLAogICAgICAgIEZpbHRlclZhbHVlIHN0YXJ0KSB7CiAgICAgICAgYnVmLmFw\ncGVuZCgiKFBPU0lUSU9OKCIpOwogICAgICAgIGZpbmQuYXBwZW5kVG8oYnVm\nKTsKICAgICAgICBidWYuYXBwZW5kKCIgSU4gIik7CiAgICAgICAgaWYgKHN0\nYXJ0ICE9IG51bGwpCiAgICAgICAgICAgIHN1YnN0cmluZyhidWYsIHN0ciwg\nc3RhcnQsIG51bGwpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgc3RyLmFw\ncGVuZFRvKGJ1Zik7CiAgICAgICAgYnVmLmFwcGVuZCgiKSAtIDEiKTsKICAg\nICAgICBpZiAoc3RhcnQgIT0gbnVsbCkgewogICAgICAgICAgICBidWYuYXBw\nZW5kKCIgKyAiKTsKICAgICAgICAgICAgc3RhcnQuYXBwZW5kVG8oYnVmKTsK\nICAgICAgICB9CiAgICAgICAgYnVmLmFwcGVuZCgiKSIpOwogICAgfQp9Cg==\n","encoding":"base64"}

