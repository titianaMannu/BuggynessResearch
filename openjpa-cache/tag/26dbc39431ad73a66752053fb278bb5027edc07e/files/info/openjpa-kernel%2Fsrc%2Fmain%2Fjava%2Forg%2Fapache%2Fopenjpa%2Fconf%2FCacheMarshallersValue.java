{"sha":"c1276f97d1687ea1f79c1ae5d342e309186e23d4","node_id":"MDQ6QmxvYjIwNjM2NDpjMTI3NmY5N2QxNjg3ZWExZjc5YzFhZTVkMzQyZTMwOTE4NmUyM2Q0","size":4110,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/c1276f97d1687ea1f79c1ae5d342e309186e23d4","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLg0KICovDQpwYWNrYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5jb25m\nOw0KDQppbXBvcnQgamF2YS51dGlsLkhhc2hNYXA7DQppbXBvcnQgamF2YS51\ndGlsLk1hcDsNCg0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIubG9n\nLkxvZzsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9j\nYWxpemVyOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5Q\nbHVnaW5MaXN0VmFsdWU7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmNv\nbmYuTm9PcENhY2hlTWFyc2hhbGxlcjsNCmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEubGliLmNvbmYuQ29uZmlndXJhdGlvbjsNCg0KLyoqDQogKiBBIGNv\nbmZpZ3VyYXRpb24gdmFsdWUgZm9yIGhhbmRsaW5nIGFuZCBhY2Nlc3Npbmcg\nY2FjaGUgbWFyc2hhbGxlcnMuDQogKg0KICogQHNpbmNlIDEuMS4wDQogKi8N\nCnB1YmxpYyBjbGFzcyBDYWNoZU1hcnNoYWxsZXJzVmFsdWUNCiAgICBleHRl\nbmRzIFBsdWdpbkxpc3RWYWx1ZSB7DQoNCiAgICBwcml2YXRlIHN0YXRpYyBm\naW5hbCBTdHJpbmcgS0VZID0gIkNhY2hlTWFyc2hhbGxlcnMiOw0KICAgIHBy\naXZhdGUgc3RhdGljIGZpbmFsIENhY2hlTWFyc2hhbGxlciBOT19PUF9DQUNI\nRV9NQVJTSEFMTEVSDQogICAgICAgID0gbmV3IE5vT3BDYWNoZU1hcnNoYWxs\nZXIoKTsNCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6ZXIgX2xv\nYyA9DQogICAgICAgIExvY2FsaXplci5mb3JQYWNrYWdlKENhY2hlTWFyc2hh\nbGxlcnNWYWx1ZS5jbGFzcyk7DQoNCiAgICBwcml2YXRlIENvbmZpZ3VyYXRp\nb24gX2NvbmY7DQogICAgcHJpdmF0ZSBNYXAgX21hcnNoYWxsZXJzOw0KICAg\nIHByaXZhdGUgYm9vbGVhbiBfaW5pdGlhbGl6ZWQ7DQoNCiAgICBwdWJsaWMg\nQ2FjaGVNYXJzaGFsbGVyc1ZhbHVlKENvbmZpZ3VyYXRpb24gY29uZikgew0K\nICAgICAgICBzdXBlcihLRVkpOw0KICAgICAgICBfY29uZiA9IGNvbmY7DQog\nICAgICAgIHNldEFsaWFzKCJkZWZhdWx0IiwgQ2FjaGVNYXJzaGFsbGVySW1w\nbC5jbGFzcy5nZXROYW1lKCkpOw0KICAgICAgICBzZXRBbGlhcygibm9uZSIs\nIG51bGwpOw0KICAgICAgICBzZXREZWZhdWx0KCJub25lIik7DQogICAgICAg\nIHNldFN0cmluZygibm9uZSIpOw0KICAgICAgICBzZXRTY29wZShnZXRDbGFz\ncygpKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgT2JqZWN0IGluc3RhbnRpYXRl\nKENsYXNzIGVsZW1UeXBlLCBDb25maWd1cmF0aW9uIGNvbmYsDQogICAgICAg\nIGJvb2xlYW4gZmF0YWwpIHsNCiAgICAgICAgQ2FjaGVNYXJzaGFsbGVyW10g\nbXMgPSAoQ2FjaGVNYXJzaGFsbGVyW10pDQogICAgICAgICAgICBzdXBlci5p\nbnN0YW50aWF0ZShlbGVtVHlwZSwgY29uZiwgZmF0YWwpOw0KICAgICAgICBp\nZiAobXMgIT0gbnVsbCkgew0KICAgICAgICAgICAgX21hcnNoYWxsZXJzID0g\nbmV3IEhhc2hNYXAoKTsNCiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBp\nIDwgbXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICBTdHJpbmcg\nbWlkID0gbXNbaV0uZ2V0SWQoKTsNCiAgICAgICAgICAgICAgICBpZiAobWlk\nICE9IG51bGwpDQogICAgICAgICAgICAgICAgICAgIF9tYXJzaGFsbGVycy5w\ndXQobWlkLCBtc1tpXSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0gZWxz\nZSB7DQogICAgICAgICAgICBfbWFyc2hhbGxlcnMgPSBudWxsOw0KICAgICAg\nICB9DQogICAgICAgIHJldHVybiBtczsNCiAgICB9DQoNCiAgICAvKioNCiAg\nICAgKiBSZXR1cm4gdGhlIHtAbGluayBDYWNoZU1hcnNoYWxsZXJ9IHRvIHVz\nZSBmb3IgY2FjaGluZyBtZXRhZGF0YSBvZiBpZA0KICAgICAqIDxjb2RlPmlk\nPC9jb2RlPi4gSWYgbm8gbWFyc2hhbGxlciBleGlzdHMgZm9yIHRoZSBpZCwg\ncmV0dXJucw0KICAgICAqIHtAbGluayBOb09wQ2FjaGVNYXJzaGFsbGVyfS4N\nCiAgICAgKi8NCiAgICBwdWJsaWMgQ2FjaGVNYXJzaGFsbGVyIGdldE1hcnNo\nYWxsZXJCeUlkKFN0cmluZyBpZCkgew0KICAgICAgICBpbml0aWFsaXplKCk7\nDQoNCiAgICAgICAgQ2FjaGVNYXJzaGFsbGVyIGNtID0gKENhY2hlTWFyc2hh\nbGxlcikgX21hcnNoYWxsZXJzLmdldChpZCk7DQogICAgICAgIGlmIChjbSA9\nPSBudWxsKSB7DQogICAgICAgICAgICBpZiAoZ2V0TG9nKCkuaXNUcmFjZUVu\nYWJsZWQoKSkNCiAgICAgICAgICAgICAgICBnZXRMb2coKS50cmFjZShfbG9j\nLmdldCgiY2FjaGUtbWFyc2hhbGxlci1ub3QtZm91bmQiLCBpZCkpOw0KICAg\nICAgICAgICAgcmV0dXJuIE5PX09QX0NBQ0hFX01BUlNIQUxMRVI7DQogICAg\nICAgIH0gZWxzZSB7DQogICAgICAgICAgICBpZiAoZ2V0TG9nKCkuaXNUcmFj\nZUVuYWJsZWQoKSkNCiAgICAgICAgICAgICAgICBnZXRMb2coKS50cmFjZShf\nbG9jLmdldCgiY2FjaGUtbWFyc2hhbGxlci1mb3VuZCIsIGlkLA0KICAgICAg\nICAgICAgICAgICAgICBjbS5nZXRDbGFzcygpLmdldE5hbWUoKSkpOw0KICAg\nICAgICAgICAgcmV0dXJuIGNtOw0KICAgICAgICB9DQogICAgfQ0KDQogICAg\ncHJpdmF0ZSBMb2cgZ2V0TG9nKCkgew0KICAgICAgICByZXR1cm4gX2NvbmYu\nZ2V0Q29uZmlndXJhdGlvbkxvZygpOw0KICAgIH0NCg0KICAgIC8qKg0KICAg\nICAqIFJldHVybiB0aGUge0BsaW5rIENhY2hlTWFyc2hhbGxlcn0gdG8gdXNl\nIGZvciBjYWNoaW5nIG1ldGFkYXRhIG9mIGlkDQogICAgICogPGNvZGU+aWQ8\nL2NvZGU+LiBJZiBubyBtYXJzaGFsbGVyIGV4aXN0cyBmb3IgdGhlIGlkLCBy\nZXR1cm5zDQogICAgICoge0BsaW5rIE5vT3BDYWNoZU1hcnNoYWxsZXJ9Lg0K\nICAgICAqLw0KICAgIHB1YmxpYyBzdGF0aWMgQ2FjaGVNYXJzaGFsbGVyIGdl\ndE1hcnNoYWxsZXJCeUlkKENvbmZpZ3VyYXRpb24gYywgU3RyaW5nIGlkKXsN\nCiAgICAgICAgQ2FjaGVNYXJzaGFsbGVyc1ZhbHVlIHYgPQ0KICAgICAgICAg\nICAgKChPcGVuSlBBQ29uZmlndXJhdGlvbkltcGwpIGMpLmNhY2hlTWFyc2hh\nbGxlclBsdWdpbnM7DQogICAgICAgIHJldHVybiB2LmdldE1hcnNoYWxsZXJC\neUlkKGlkKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgTWFwIGdldEluc3RhbmNl\nc0FzTWFwKCkgew0KICAgICAgICByZXR1cm4gX21hcnNoYWxsZXJzOw0KICAg\nIH0NCg0KICAgIHByb3RlY3RlZCBzeW5jaHJvbml6ZWQgdm9pZCBpbml0aWFs\naXplKCkgew0KICAgICAgICBpZiAoIV9pbml0aWFsaXplZCkgew0KICAgICAg\nICAgICAgaW5zdGFudGlhdGUoQ2FjaGVNYXJzaGFsbGVyLmNsYXNzLCBfY29u\nZik7DQogICAgICAgICAgICBfaW5pdGlhbGl6ZWQgPSB0cnVlOw0KICAgICAg\nICB9DQogICAgfQ0KfQ0K\n","encoding":"base64"}

