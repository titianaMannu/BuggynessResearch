{"sha":"b8cefc0befad8b0d74b911ba1bd8ec9a67d4267a","node_id":"MDQ6QmxvYjIwNjM2NDpiOGNlZmMwYmVmYWQ4YjBkNzRiOTExYmExYmQ4ZWM5YTY3ZDQyNjdh","size":4343,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/b8cefc0befad8b0d74b911ba1bd8ec9a67d4267a","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWw7CgppbXBvcnQg\namF2YS5pby5CeXRlQXJyYXlPdXRwdXRTdHJlYW07CmltcG9ydCBqYXZhLmlv\nLklPRXhjZXB0aW9uOwppbXBvcnQgamF2YS5pby5JbnB1dFN0cmVhbTsKaW1w\nb3J0IGphdmEuc2VjdXJpdHkuQWNjZXNzQ29udHJvbGxlcjsKCmltcG9ydCBz\nZXJwLmJ5dGVjb2RlLmxvd2xldmVsLkNvbnN0YW50UG9vbFRhYmxlOwoKLyoq\nCiAqIENsYXNzTG9hZGVyIGltcGxlbWVudGF0aW9uIHRoYXQgYWxsb3dzIGNs\nYXNzZXMgdG8gYmUgdGVtcG9yYXJpbHkKICogbG9hZGVkIGFuZCB0aGVuIHRo\ncm93biBhd2F5LiBVc2VmdWwgZm9yIHRoZSBlbmhhbmNlciB0byBiZSBhYmxl\nCiAqIHRvIHJ1biBhZ2FpbnN0IGEgY2xhc3Mgd2l0aG91dCBmaXJzdCBsb2Fk\naW5nKGFuZCB0aHVzIHBvbGx1dGluZykKICogdGhlIHBhcmVudCBDbGFzc0xv\nYWRlci4KICoKICogQGF1dGhvciBNYXJjIFBydWQnaG9tbWVhdXgKICogQG5v\namF2YWRvYwogKi8KcHVibGljIGNsYXNzIFRlbXBvcmFyeUNsYXNzTG9hZGVy\nIGV4dGVuZHMgQ2xhc3NMb2FkZXIgewoKICAgIHB1YmxpYyBUZW1wb3JhcnlD\nbGFzc0xvYWRlcihDbGFzc0xvYWRlciBwYXJlbnQpIHsKICAgICAgICBzdXBl\ncihwYXJlbnQpOwogICAgfQoKICAgIHB1YmxpYyBDbGFzcyBsb2FkQ2xhc3Mo\nU3RyaW5nIG5hbWUpIHRocm93cyBDbGFzc05vdEZvdW5kRXhjZXB0aW9uIHsK\nICAgICAgICByZXR1cm4gbG9hZENsYXNzKG5hbWUsIGZhbHNlKTsKICAgIH0K\nCiAgICBwcm90ZWN0ZWQgQ2xhc3MgbG9hZENsYXNzKFN0cmluZyBuYW1lLCBi\nb29sZWFuIHJlc29sdmUpCiAgICAgICAgdGhyb3dzIENsYXNzTm90Rm91bmRF\neGNlcHRpb24gewogICAgICAgIC8vIHNlZSBpZiB3ZSd2ZSBhbHJlYWR5IGxv\nYWRlZCBpdAogICAgICAgIENsYXNzIGMgPSBmaW5kTG9hZGVkQ2xhc3MobmFt\nZSk7CiAgICAgICAgaWYgKGMgIT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJu\nIGM7CgogICAgICAgIC8vIGJ1ZyAjMjgzLiBkZWZlciB0byBzeXN0ZW0gaWYg\ndGhlIG5hbWUgaXMgYSBwcm90ZWN0ZWQgbmFtZS4KICAgICAgICAvLyAic3Vu\nLiIgaXMgcmVxdWlyZWQgZm9yIEpESyAxLjQsIHdoaWNoIGhhcyBhbiBhY2Nl\nc3MgY2hlY2sgZm9yCiAgICAgICAgLy8gc3VuLnJlZmxlY3QuR2VuZXJhdGVk\nU2VyaWFsaXphdGlvbkNvbnN0cnVjdG9yQWNjZXNzb3IxCiAgICAgICAgaWYg\nKG5hbWUuc3RhcnRzV2l0aCgiamF2YS4iKSB8fCBuYW1lLnN0YXJ0c1dpdGgo\nImphdmF4LiIpCiAgICAgICAgICAgIHx8IG5hbWUuc3RhcnRzV2l0aCgic3Vu\nLiIpKQogICAgICAgICAgICByZXR1cm4gQ2xhc3MuZm9yTmFtZShuYW1lLCBy\nZXNvbHZlLCBnZXRDbGFzcygpLmdldENsYXNzTG9hZGVyKCkpOwoKICAgICAg\nICBTdHJpbmcgcmVzb3VyY2VOYW1lID0gbmFtZS5yZXBsYWNlKCcuJywgJy8n\nKSArICIuY2xhc3MiOwogICAgICAgIElucHV0U3RyZWFtIHJlc291cmNlID0g\nZ2V0UmVzb3VyY2VBc1N0cmVhbShyZXNvdXJjZU5hbWUpOwogICAgICAgIGlm\nIChyZXNvdXJjZSA9PSBudWxsKQogICAgICAgICAgICB0aHJvdyBuZXcgQ2xh\nc3NOb3RGb3VuZEV4Y2VwdGlvbihuYW1lKTsKCiAgICAgICAgQnl0ZUFycmF5\nT3V0cHV0U3RyZWFtIGJvdXQgPSBuZXcgQnl0ZUFycmF5T3V0cHV0U3RyZWFt\nKCk7CiAgICAgICAgYnl0ZVtdIGIgPSBuZXcgYnl0ZVsxMDI0XTsKICAgICAg\nICB0cnkgewogICAgICAgICAgICBmb3IgKGludCBuID0gMDsgKG4gPSByZXNv\ndXJjZS5yZWFkKGIsIDAsIGIubGVuZ3RoKSkgIT0gLTE7CiAgICAgICAgICAg\nICAgICBib3V0LndyaXRlKGIsIDAsIG4pKQogICAgICAgICAgICAgICAgOwog\nICAgICAgICAgICBieXRlW10gY2xhc3NCeXRlcyA9IGJvdXQudG9CeXRlQXJy\nYXkoKTsKICAgICAgICAgICAgLy8gVG8gYXZvaWQgY2xhc3Nsb2FkZXIgaXNz\ndWVzIHdpdGggdGhlIEpWTSAoU3VuIGFuZCBJQk0pLCB3ZQogICAgICAgICAg\nICAvLyB3aWxsIG5vdCBsb2FkIEVudW1zIHZpYSB0aGUgVGVtcG9yYXJ5Q2xh\nc3NMb2FkZXIgZWl0aGVyLgogICAgICAgICAgICAvLyBSZWZlcmVuY2UgSklS\nQSBJc3N1ZSBPUEVOSlBBLTY0NiBmb3IgbW9yZSBpbmZvcm1hdGlvbi4KICAg\nICAgICAgICAgaWYgKGlzQW5ub3RhdGlvbihjbGFzc0J5dGVzKSB8fCBpc0Vu\ndW0oY2xhc3NCeXRlcykpCiAgICAgICAgICAgICAgICByZXR1cm4gQ2xhc3Mu\nZm9yTmFtZShuYW1lLCByZXNvbHZlLCBnZXRDbGFzcygpLgogICAgICAgICAg\nICAgICAgICAgIGdldENsYXNzTG9hZGVyKCkpOwoKICAgICAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgICAgIHJldHVybiBkZWZpbmVDbGFzcyhuYW1lLCBj\nbGFzc0J5dGVzLCAwLCBjbGFzc0J5dGVzLmxlbmd0aCk7CiAgICAgICAgICAg\nIH0gY2F0Y2ggKFNlY3VyaXR5RXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAg\nICAgIC8vIHBvc3NpYmxlIHByb2hpYml0ZWQgcGFja2FnZTogZGVmZXIgdG8g\ndGhlIHBhcmVudAogICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmxvYWRD\nbGFzcyhuYW1lLCByZXNvbHZlKTsKICAgICAgICAgICAgfQogICAgICAgIH0g\nY2F0Y2ggKElPRXhjZXB0aW9uIGlvZSkgewogICAgICAgICAgICAvLyBkZWZl\nciB0byB0aGUgcGFyZW50CiAgICAgICAgICAgIHJldHVybiBzdXBlci5sb2Fk\nQ2xhc3MobmFtZSwgcmVzb2x2ZSk7CiAgICAgICAgfQogICAgfQoKICAgIC8q\nKgogICAgICogRmFzdC1wYXJzZSB0aGUgZ2l2ZW4gY2xhc3MgYnl0ZWNvZGUg\ndG8gZGV0ZXJtaW5lIGlmIGl0IGlzIGFuCiAgICAgKiBhbm5vdGF0aW9uIGNs\nYXNzLgogICAgICovCiAgICBwcml2YXRlIHN0YXRpYyBib29sZWFuIGlzQW5u\nb3RhdGlvbihieXRlW10gYikgewogICAgICAgIGlmIChKYXZhVmVyc2lvbnMu\nVkVSU0lPTiA8IDUpCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAg\nICBpbnQgaWR4ID0gQ29uc3RhbnRQb29sVGFibGUuZ2V0RW5kSW5kZXgoYik7\nCiAgICAgICAgaW50IGFjY2VzcyA9IENvbnN0YW50UG9vbFRhYmxlLnJlYWRV\nbnNpZ25lZFNob3J0KGIsIGlkeCk7CiAgICAgICAgcmV0dXJuIChhY2Nlc3Mg\nJiAweDIwMDApICE9IDA7IC8vIGFjY2VzcyBjb25zdGFudCBmb3IgYW5ub3Rh\ndGlvbiB0eXBlCiAgICB9CgogICAgLyoqCiAgICAgKiBGYXN0LXBhcnNlIHRo\nZSBnaXZlbiBjbGFzcyBieXRlY29kZSB0byBkZXRlcm1pbmUgaWYgaXQgaXMg\nYW4KICAgICAqIGVudW0gY2xhc3MuCiAgICAgKi8KICAgIHByaXZhdGUgc3Rh\ndGljIGJvb2xlYW4gaXNFbnVtKGJ5dGVbXSBiKSB7CiAgICAgICAgaWYgKEph\ndmFWZXJzaW9ucy5WRVJTSU9OIDwgNSkKICAgICAgICAgICAgcmV0dXJuIGZh\nbHNlOwogICAgICAgIGludCBpZHggPSBDb25zdGFudFBvb2xUYWJsZS5nZXRF\nbmRJbmRleChiKTsKICAgICAgICBpbnQgYWNjZXNzID0gQ29uc3RhbnRQb29s\nVGFibGUucmVhZFVuc2lnbmVkU2hvcnQoYiwgaWR4KTsKICAgICAgICByZXR1\ncm4gKGFjY2VzcyAmIDB4NDAwMCkgIT0gMDsgLy8gYWNjZXNzIGNvbnN0YW50\nIGZvciBlbnVtIHR5cGUKICAgIH0KfQo=\n","encoding":"base64"}

