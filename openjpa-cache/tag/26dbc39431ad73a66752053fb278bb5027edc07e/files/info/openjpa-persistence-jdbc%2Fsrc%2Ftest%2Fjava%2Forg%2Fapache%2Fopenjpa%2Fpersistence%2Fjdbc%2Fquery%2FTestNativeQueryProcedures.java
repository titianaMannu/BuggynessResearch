{"sha":"636f14afd0129814b50f991b78e1edc4dbd3ec02","node_id":"MDQ6QmxvYjIwNjM2NDo2MzZmMTRhZmQwMTI5ODE0YjUwZjk5MWI3OGUxZWRjNGRiZDNlYzAy","size":6341,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/636f14afd0129814b50f991b78e1edc4dbd3ec02","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5qZGJjLnF1ZXJ5\nOwoKaW1wb3J0IGphdmEudXRpbC5MaXN0OwoKaW1wb3J0IGphdmF4LnBlcnNp\nc3RlbmNlLkVudGl0eU1hbmFnZXI7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5j\nZS5RdWVyeTsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5jb25m\nLkpEQkNDb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMuc3FsLkRlcmJ5RGljdGlvbmFyeTsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdlckZhY3Rv\ncnlTUEk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uu\namRiYy5xdWVyeS5kb21haW4uQXBwbGljYW50OwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLnBlcnNpc3RlbmNlLmpkYmMucXVlcnkucHJvY2VkdXJlLkRl\ncmJ5UHJvY2VkdXJlTGlzdDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5w\nZXJzaXN0ZW5jZS5qZGJjLnF1ZXJ5LnByb2NlZHVyZS5Qcm9jZWR1cmVMaXN0\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnRlc3Qu\nU2luZ2xlRU1GVGVzdENhc2U7CgovKioKICogVGVzdHMgdGhhdCBOYXRpdmUg\ncXVlcmllcyB1c2Ugb25seSAxLWJhc2VkIHBvc2l0aW9uYWwgcGFyYW1ldGVy\ncyBhbmQgCiAqIGRpc2FsbG93cyBuYW1lZCBwYXJhbWV0ZXJzLgogKiAKICog\nT3JpZ2luYWxseSByZXBvcnRlZCBpbiAKICogPEEgSFJFPSJodHRwOi8vaXNz\ndWVzLmFwYWNoZS5vcmcvamlyYS9icm93c2UvT1BFTkpQQS0xMTI+T1BFTkpQ\nQS0xMTI8L0E+CiAqICAKICogQGF1dGhvciBCLkouIFJlZWQKICoKICovCnB1\nYmxpYyBjbGFzcyBUZXN0TmF0aXZlUXVlcnlQcm9jZWR1cmVzIGV4dGVuZHMg\nU2luZ2xlRU1GVGVzdENhc2UgewogICAgUHJvY2VkdXJlTGlzdCBwcm9jZWR1\ncmVMaXN0ID0gbnVsbDsKICAgIAogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMg\ndm9pZCBzZXRVcCgpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIHN1cGVy\nLnNldFVwKEFwcGxpY2FudC5jbGFzcywgQ0xFQVJfVEFCTEVTKTsKCiAgICAg\nICAgLy8gRmlndXJlIG91dCB3aGljaCBEQiB3ZSBoYXZlIGFuZCBnZXQgdGhl\nIHByb3BlciBEQiBQcm9jZWR1cmUgTGlzdAogICAgICAgIE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyRmFjdG9yeVNQSSBvanBhRW1mID0gCiAgICAgICAgICAgIChP\ncGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEkpIGVtZjsKICAgICAgICBK\nREJDQ29uZmlndXJhdGlvbiBjb25mID0gKEpEQkNDb25maWd1cmF0aW9uKSBv\nanBhRW1mLmdldENvbmZpZ3VyYXRpb24oKTsKICAgICAgICAKICAgICAgICBp\nZiAoY29uZi5nZXREQkRpY3Rpb25hcnlJbnN0YW5jZSgpIGluc3RhbmNlb2Yg\nRGVyYnlEaWN0aW9uYXJ5KSB7CiAgICAgICAgICAgIHByb2NlZHVyZUxpc3Qg\nPSBuZXcgRGVyYnlQcm9jZWR1cmVMaXN0KCk7CiAgICAgICAgfQoKICAgICAg\nICBpZiAocHJvY2VkdXJlTGlzdCAhPSBudWxsKSB7CiAgICAgICAgICAgIEVu\ndGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwog\nICAgICAgICAgICBMaXN0PFN0cmluZz4gY3JlYXRlTGlzdCA9IHByb2NlZHVy\nZUxpc3QuZ2V0Q3JlYXRlUHJvY2VkdXJlTGlzdCgpOwogICAgICAgICAgICB0\ncnkgewogICAgICAgICAgICAgICAgZm9yIChTdHJpbmcgY3JlYXRlUHJvY2Vk\ndXJlIDogY3JlYXRlTGlzdCkgewogICAgICAgICAgICAgICAgICAgIGVtLmdl\ndFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICAgICAgICAgICAgICBR\ndWVyeSBxdWVyeSA9IGVtLmNyZWF0ZU5hdGl2ZVF1ZXJ5KGNyZWF0ZVByb2Nl\nZHVyZSk7CiAgICAgICAgICAgICAgICAgICAgcXVlcnkuZXhlY3V0ZVVwZGF0\nZSgpOwogICAgICAgICAgICAgICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCku\nY29tbWl0KCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0\nY2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAgICBlLnByaW50U3Rh\nY2tUcmFjZSgpOwogICAgICAgICAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24o\nKS5jb21taXQoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbS5jbGVh\ncigpOwogICAgICAgICAgICBlbS5jbG9zZSgpOwogICAgICAgIH0KICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCB0ZWFyRG93bigpIHRocm93cyBFeGNlcHRpb24g\newogICAgICAgIGlmIChwcm9jZWR1cmVMaXN0ICE9IG51bGwpIHsKICAgICAg\nICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgICAgIExpc3Q8U3RyaW5nPiBkcm9wTGlzdCA9IHBy\nb2NlZHVyZUxpc3QuZ2V0RHJvcFByb2NlZHVyZUxpc3QoKTsKICAgICAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgICAgIGZvciAoU3RyaW5nIGRyb3BQcm9j\nZWR1cmUgOiBkcm9wTGlzdCkgewogICAgICAgICAgICAgICAgICAgIGVtLmdl\ndFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICAgICAgICAgICAgICBR\ndWVyeSBxdWVyeSA9IGVtLmNyZWF0ZU5hdGl2ZVF1ZXJ5KGRyb3BQcm9jZWR1\ncmUpOwogICAgICAgICAgICAgICAgICAgIHF1ZXJ5LmV4ZWN1dGVVcGRhdGUo\nKTsKICAgICAgICAgICAgICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNv\nbW1pdCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNo\nIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICAgICAgZS5wcmludFN0YWNr\nVHJhY2UoKTsKICAgICAgICAgICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCku\nY29tbWl0KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZW0uY2xlYXIo\nKTsKICAgICAgICAgICAgZW0uY2xvc2UoKTsKICAgICAgICB9CiAgICAgICAg\nc3VwZXIudGVhckRvd24oKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQg\ndGVzdE5vUmV0dXJuTm9QYXJhbVByb2NlZHVyZSgpIHsKICAgICAgICBpZiAo\ncHJvY2VkdXJlTGlzdCAhPSBudWxsKSB7CiAgICAgICAgICAgIEVudGl0eU1h\nbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwoKICAgICAg\nICAgICAgQXBwbGljYW50IGFwcGxpY2FudDEgPSBuZXcgQXBwbGljYW50KCk7\nCiAgICAgICAgICAgIGFwcGxpY2FudDEuc2V0TmFtZSgiQ2hhcmxpZSIpOwog\nICAgICAgICAgICBBcHBsaWNhbnQgYXBwbGljYW50MiA9IG5ldyBBcHBsaWNh\nbnQoKTsKICAgICAgICAgICAgYXBwbGljYW50Mi5zZXROYW1lKCJTbm9vcHki\nKTsKCiAgICAgICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsK\nICAgICAgICAgICAgZW0ucGVyc2lzdChhcHBsaWNhbnQxKTsKICAgICAgICAg\nICAgZW0ucGVyc2lzdChhcHBsaWNhbnQyKTsKICAgICAgICAgICAgZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5jb21taXQoKTsKCiAgICAgICAgICAgIFN0cmluZyBz\ncWwgPSBwcm9jZWR1cmVMaXN0LmNhbGxBZGRYVG9DaGFybGllKCk7CgogICAg\nICAgICAgICAvLyBxdWVyeS5nZXRTaW5nbGVSZXN1bHQoKSBhbmQgcXVlcnku\nZ2V0UmVzdWx0TGlzdCgpIGJvdGggdGhyb3cgYW4KICAgICAgICAgICAgLy8g\nZXhjZXB0aW9uOiBTdGF0ZW1lbnQuZXhlY3V0ZVF1ZXJ5KCkgY2Fubm90IGJl\nIGNhbGxlZCB3aXRoIGEKICAgICAgICAgICAgLy8gc3RhdGVtZW50IHRoYXQg\ncmV0dXJucyBhIHJvdyBjb3VudAogICAgICAgICAgICB0cnkgewogICAgICAg\nICAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAg\nICAgICAgICAgUXVlcnkgcXVlcnkgPSBlbS5jcmVhdGVOYXRpdmVRdWVyeShz\ncWwpOwogICAgICAgICAgICAgICAgcXVlcnkuZ2V0U2luZ2xlUmVzdWx0KCk7\nCiAgICAgICAgICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgp\nOwogICAgICAgICAgICAgICAgZmFpbCgiRXhwZWN0ZWQgZXhjZXB0aW9uLiBn\nZXRTaW5nbGVSZXN1bHQoKSB3aXRoIG5vIHJldHVybnMgIisgCiAgICAgICAg\nICAgICAgICAgICAgInNob3VsZCBmYWlsLiIpOwogICAgICAgICAgICB9IGNh\ndGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICAgICAgLy9FeHBlY3Rl\nZCBleGNlcHRpb24KICAgICAgICAgICAgICAgIGVtLmdldFRyYW5zYWN0aW9u\nKCkucm9sbGJhY2soKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0cnkg\newogICAgICAgICAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigp\nOwogICAgICAgICAgICAgICAgUXVlcnkgcXVlcnkgPSBlbS5jcmVhdGVOYXRp\ndmVRdWVyeShzcWwpOwogICAgICAgICAgICAgICAgcXVlcnkuZ2V0UmVzdWx0\nTGlzdCgpOwogICAgICAgICAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5j\nb21taXQoKTsKICAgICAgICAgICAgICAgIGZhaWwoIkV4cGVjdGVkIGV4Y2Vw\ndGlvbi4gZ2V0UmVzdWx0TGlzdCgpIHdpdGggbm8gcmV0dXJucyAiICsgCiAg\nICAgICAgICAgICAgICAgICAgInNob3VsZCBmYWlsLiIpOwogICAgICAgICAg\nICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICAgICAgLy9F\neHBlY3RlZCBleGNlcHRpb24KICAgICAgICAgICAgICAgIGVtLmdldFRyYW5z\nYWN0aW9uKCkucm9sbGJhY2soKTsKICAgICAgICAgICAgfQoKICAgICAgICAg\nICAgLy8gVGhpcyBvbmUgc2hvdWxkIHdvcmsgcHJvcGVybHkKICAgICAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCku\nYmVnaW4oKTsKICAgICAgICAgICAgICAgIFF1ZXJ5IHF1ZXJ5ID0gZW0uY3Jl\nYXRlTmF0aXZlUXVlcnkoc3FsKTsKICAgICAgICAgICAgICAgIHF1ZXJ5LmV4\nZWN1dGVVcGRhdGUoKTsKICAgICAgICAgICAgICAgIGVtLmdldFRyYW5zYWN0\naW9uKCkuY29tbWl0KCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlv\nbiBlKSB7CiAgICAgICAgICAgICAgICBmYWlsKCJDYXVnaHQgdW5leHBlY3Rl\nZCBleGNlcHRpb24gZXhlY3V0aW5nIHN0b3JlZCBwcm9jZWR1cmU6ICIKICAg\nICAgICAgICAgICAgICAgICArIGUuZ2V0TWVzc2FnZSgpKTsKICAgICAgICAg\nICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAg\nICAgIH0KICAgICAgICAKICAgICAgICAgICAgZW0uY2xlYXIoKTsKICAgICAg\nICAgICAgZW0uY2xvc2UoKTsKICAgICAgICAgICAgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOwogICAgICAgICAgICBhcHBsaWNhbnQxID0gZW0u\nZmluZChBcHBsaWNhbnQuY2xhc3MsIGFwcGxpY2FudDEuZ2V0SWQoKSk7CiAg\nICAgICAgICAgIGFwcGxpY2FudDIgPSBlbS5maW5kKEFwcGxpY2FudC5jbGFz\ncywgYXBwbGljYW50Mi5nZXRJZCgpKTsKCiAgICAgICAgICAgIC8vIHZlcmlm\neSBvbmUgY2hhbmdlZCBhbmQgb25lIGRpZG4ndAogICAgICAgICAgICBhc3Nl\ncnRFcXVhbHMoIkNoYXJsaWV4IiwgYXBwbGljYW50MS5nZXROYW1lKCkpOwog\nICAgICAgICAgICBhc3NlcnRFcXVhbHMoIlNub29weSIsIGFwcGxpY2FudDIu\nZ2V0TmFtZSgpKTsKICAgICAgICAKICAgICAgICAgICAgZW0uY2xlYXIoKTsK\nICAgICAgICAgICAgZW0uY2xvc2UoKTsKICAgICAgICB9CiAgICB9Cn0=\n","encoding":"base64"}

