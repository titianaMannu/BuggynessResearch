{"sha":"d4be3634cd884256e95fdeddeac6b779ebf50d1f","node_id":"MDQ6QmxvYjIwNjM2NDpkNGJlMzYzNGNkODg0MjU2ZTk1ZmRlZGRlYWM2Yjc3OWViZjUwZDFm","size":8984,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/d4be3634cd884256e95fdeddeac6b779ebf50d1f","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2UucmVsYXRpb25zOw0KDQppbXBvcnQgamF2YS51dGlsLkNv\nbGxlY3Rpb247DQppbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9yOw0KaW1wb3J0\nIGphdmEudXRpbC5MaXN0Ow0KaW1wb3J0IGphdmEudXRpbC5TZXQ7DQoNCmlt\ncG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyOw0KaW1wb3J0\nIGphdmF4LnBlcnNpc3RlbmNlLlF1ZXJ5Ow0KDQppbXBvcnQganVuaXQudGV4\ndHVpLlRlc3RSdW5uZXI7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBl\ncnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyOw0KaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBUXVlcnk7DQppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnF1ZXJ5Lk1hZ2F6\naW5lOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5x\ndWVyeS5QdWJsaXNoZXI7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBl\ncnNpc3RlbmNlLnRlc3QuU1FMTGlzdGVuZXJUZXN0Q2FzZTsNCg0KDQpwdWJs\naWMgY2xhc3MgVGVzdEludmVyc2VFYWdlclNRTA0KICAgIGV4dGVuZHMgU1FM\nTGlzdGVuZXJUZXN0Q2FzZSB7DQoNCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgp\nIHsNCiAgICAgICAgc2V0VXAoQ3VzdG9tZXIuY2xhc3MsIEN1c3RvbWVyLkN1\nc3RvbWVyS2V5LmNsYXNzLCBPcmRlci5jbGFzcywgDQogICAgICAgIAlFbnRp\ndHlBSW52ZXJzZUVhZ2VyLmNsYXNzLCBFbnRpdHlBMUludmVyc2VFYWdlci5j\nbGFzcywgRW50aXR5QTJJbnZlcnNlRWFnZXIuY2xhc3MsIA0KICAgICAgICAJ\nRW50aXR5QkludmVyc2VFYWdlci5jbGFzcywgRW50aXR5Q0ludmVyc2VFYWdl\nci5jbGFzcywgRW50aXR5REludmVyc2VFYWdlci5jbGFzcywNCiAgICAgICAg\nICAgIFB1Ymxpc2hlci5jbGFzcywgTWFnYXppbmUuY2xhc3MpOw0KICAgICAg\nICANCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRp\ndHlNYW5hZ2VyKCk7DQogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVn\naW4oKTsNCg0KICAgICAgICBDdXN0b21lci5DdXN0b21lcktleSBjayA9IG5l\ndyBDdXN0b21lci5DdXN0b21lcktleSgiVVNBIiwgMSk7DQogICAgICAgIEN1\nc3RvbWVyIGMgPSBuZXcgQ3VzdG9tZXIoKTsNCiAgICAgICAgYy5zZXRDaWQo\nY2spOw0KICAgICAgICBjLnNldE5hbWUoImN1c3RvbWVyMSIpOw0KICAgICAg\nICBlbS5wZXJzaXN0KGMpOw0KICAgICAgICANCiAgICAgICAgZm9yIChpbnQg\naSA9IDA7IGkgPCA0OyBpKyspIHsNCiAgICAgICAgICAgIE9yZGVyIG9yZGVy\nID0gbmV3IE9yZGVyKCk7DQogICAgICAgICAgICBvcmRlci5zZXRDdXN0b21l\ncihjKTsNCiAgICAgICAgICAgIGVtLnBlcnNpc3Qob3JkZXIpOw0KICAgICAg\nICB9DQoNCiAgICAgICAgRW50aXR5QUludmVyc2VFYWdlciBhID0gbmV3IEVu\ndGl0eUFJbnZlcnNlRWFnZXIoImEiKTsNCiAgICAgICAgZW0ucGVyc2lzdChh\nKTsNCiAgICAgICAgDQogICAgICAgIEVudGl0eUExSW52ZXJzZUVhZ2VyIGEx\nID0gbmV3IEVudGl0eUExSW52ZXJzZUVhZ2VyKCJhMSIpOw0KICAgICAgICBl\nbS5wZXJzaXN0KGExKTsNCiAgICAgICAgDQogICAgICAgIEVudGl0eUEySW52\nZXJzZUVhZ2VyIGEyID0gbmV3IEVudGl0eUEySW52ZXJzZUVhZ2VyKCJhMiIp\nOw0KICAgICAgICBlbS5wZXJzaXN0KGEyKTsNCg0KICAgICAgICBmb3IgKGlu\ndCBpID0gMDsgaSA8IDQ7IGkrKykgew0KICAgICAgICAgICAgRW50aXR5Qklu\ndmVyc2VFYWdlciBiID0gbmV3IEVudGl0eUJJbnZlcnNlRWFnZXIoImIiICsg\naSk7DQogICAgICAgICAgICBhLmFkZEIoYik7DQogICAgICAgICAgICBiLnNl\ndEEoYSk7DQogICAgICAgICAgICBlbS5wZXJzaXN0KGIpOw0KICAgICAgICB9\nDQogICAgICAgIA0KICAgICAgICBmb3IgKGludCBpID0gNDsgaSA8IDg7IGkr\nKykgew0KICAgICAgICAgICAgRW50aXR5QkludmVyc2VFYWdlciBiID0gbmV3\nIEVudGl0eUJJbnZlcnNlRWFnZXIoImIiICsgaSk7DQogICAgICAgICAgICBh\nMS5hZGRCKGIpOw0KICAgICAgICAgICAgYi5zZXRBKGExKTsNCiAgICAgICAg\nICAgIGVtLnBlcnNpc3QoYik7DQogICAgICAgIH0NCg0KICAgICAgICBmb3Ig\nKGludCBpID0gODsgaSA8IDEyOyBpKyspIHsNCiAgICAgICAgICAgIEVudGl0\neUJJbnZlcnNlRWFnZXIgYiA9IG5ldyBFbnRpdHlCSW52ZXJzZUVhZ2VyKCJi\nIiArIGkpOw0KICAgICAgICAgICAgYTIuYWRkQihiKTsNCiAgICAgICAgICAg\nIGIuc2V0QShhMik7DQogICAgICAgICAgICBlbS5wZXJzaXN0KGIpOw0KICAg\nICAgICB9DQogICAgICAgIA0KICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8\nIDQ7IGkrKykgew0KICAgICAgICAgICAgRW50aXR5Q0ludmVyc2VFYWdlciBj\nMSA9IG5ldyBFbnRpdHlDSW52ZXJzZUVhZ2VyKCJjIitpLCBpLCBpKTsNCiAg\nICAgICAgICAgIGVtLnBlcnNpc3QoYzEpOw0KDQogICAgICAgICAgICBFbnRp\ndHlESW52ZXJzZUVhZ2VyIGQxID0gbmV3IEVudGl0eURJbnZlcnNlRWFnZXIo\nImQiK2ksICJkIitpLCBpLCBpKTsNCiAgICAgICAgICAgIGVtLnBlcnNpc3Qo\nZDEpOw0KDQogICAgICAgICAgICBjMS5zZXREKGQxKTsNCiAgICAgICAgICAg\nIGQxLnNldEMoYzEpOw0KICAgICAgICB9DQoNCiAgICAgICAgUHVibGlzaGVy\nIHAxID0gbmV3IFB1Ymxpc2hlcigpOw0KICAgICAgICBwMS5zZXROYW1lKCJw\ndWJsaXNoZXIxIik7DQogICAgICAgIGVtLnBlcnNpc3QocDEpOw0KICAgDQog\nICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgNDsgaSsrKSB7DQogICAgICAg\nICAgICBNYWdhemluZSBtYWdhemluZSA9IG5ldyBNYWdhemluZSgpOw0KICAg\nICAgICAgICAgbWFnYXppbmUuc2V0SWRQdWJsaXNoZXIocDEpOw0KICAgICAg\nICAgICAgbWFnYXppbmUuc2V0TmFtZSgibWFnYWdpbmUiK2krIl8iK3AxLmdl\ndE5hbWUoKSk7DQogICAgICAgICAgICBlbS5wZXJzaXN0KG1hZ2F6aW5lKTsN\nCiAgICAgICAgfQ0KDQogICAgICAgIFB1Ymxpc2hlciBwMiA9IG5ldyBQdWJs\naXNoZXIoKTsNCiAgICAgICAgcDIuc2V0TmFtZSgicHVibGlzaGVyMiIpOw0K\nICAgICAgICBlbS5wZXJzaXN0KHAyKTsNCiAgIA0KICAgICAgICBmb3IgKGlu\ndCBpID0gMDsgaSA8IDQ7IGkrKykgew0KICAgICAgICAgICAgTWFnYXppbmUg\nbWFnYXppbmUgPSBuZXcgTWFnYXppbmUoKTsNCiAgICAgICAgICAgIG1hZ2F6\naW5lLnNldElkUHVibGlzaGVyKHAyKTsNCiAgICAgICAgICAgIG1hZ2F6aW5l\nLnNldE5hbWUoIm1hZ2FnaW5lIitpKyJfIitwMi5nZXROYW1lKCkpOw0KICAg\nICAgICAgICAgZW0ucGVyc2lzdChtYWdhemluZSk7DQogICAgICAgIH0NCg0K\nICAgICAgICBlbS5mbHVzaCgpOw0KICAgICAgICBlbS5nZXRUcmFuc2FjdGlv\nbigpLmNvbW1pdCgpOw0KICAgICAgICBlbS5jbG9zZSgpOw0KICAgIH0NCg0K\nICAgIHB1YmxpYyB2b2lkIHRlc3RPbmVUb01hbnlJbnZlcnNlRWFnZXJRdWVy\neSgpIHsNCiAgICAgICAgc3FsLmNsZWFyKCk7DQoNCiAgICAgICAgT3BlbkpQ\nQUVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigp\nOw0KICAgICAgICBPcGVuSlBBUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5KCJT\nRUxFQ1QgYyBGUk9NIEN1c3RvbWVyIGMgIik7DQogICAgICAgIExpc3Q8Q3Vz\ndG9tZXI+IHJlcyA9IHEuZ2V0UmVzdWx0TGlzdCgpOyANCg0KICAgICAgICBh\nc3NlcnRFcXVhbHMoMSwgcmVzLnNpemUoKSk7DQoNCiAgICAgICAgZm9yIChp\nbnQgaSA9IDA7IGkgPCByZXMuc2l6ZSgpOyBpKyspIHsNCiAgICAgICAgICAg\nIEN1c3RvbWVyIGMgPSAoQ3VzdG9tZXIpcmVzLmdldChpKTsNCiAgICAgICAg\nICAgIENvbGxlY3Rpb248T3JkZXI+IG9yZGVycyA9IGMuZ2V0T3JkZXJzKCk7\nDQogICAgICAgICAgICBmb3IgKEl0ZXJhdG9yPE9yZGVyPiBpdGVyPW9yZGVy\ncy5pdGVyYXRvcigpOyBpdGVyLmhhc05leHQoKTspIHsNCiAgICAgICAgICAg\nICAgICBPcmRlciBvcmRlciA9IChPcmRlcilpdGVyLm5leHQoKTsNCiAgICAg\nICAgICAgICAgICBhc3NlcnRFcXVhbHMob3JkZXIuZ2V0Q3VzdG9tZXIoKSwg\nYyk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAg\nICAgIGFzc2VydEVxdWFscygyLCBzcWwuc2l6ZSgpKTsNCiAgICAgICAgZW0u\nY2xvc2UoKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0T25lVG9P\nbmVJbnZlcnNlRWFnZXJRdWVyeSgpIHsNCiAgICAgICAgc3FsLmNsZWFyKCk7\nDQoNCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3Jl\nYXRlRW50aXR5TWFuYWdlcigpOw0KICAgICAgICBTdHJpbmcgcXVlcnkgPSAi\nc2VsZWN0IGMgRlJPTSBFbnRpdHlDSW52ZXJzZUVhZ2VyIGMiOw0KICAgICAg\nICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnkocXVlcnkpOw0KICAgICAgICBM\naXN0PEVudGl0eUNJbnZlcnNlRWFnZXI+IHJlcyA9IHEuZ2V0UmVzdWx0TGlz\ndCgpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoNCwgcmVzLnNpemUoKSk7DQoN\nCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCByZXMuc2l6ZSgpOyBpKysp\nIHsNCiAgICAgICAgICAgIEVudGl0eUNJbnZlcnNlRWFnZXIgYyA9IChFbnRp\ndHlDSW52ZXJzZUVhZ2VyKXJlcy5nZXQoaSk7DQogICAgICAgICAgICBFbnRp\ndHlESW52ZXJzZUVhZ2VyIGQgPSBjLmdldEQoKTsNCiAgICAgICAgICAgIGFz\nc2VydEVxdWFscyhjLCBkLmdldEMoKSk7DQogICAgICAgIH0NCg0KICAgICAg\nICBhc3NlcnRFcXVhbHMoMSwgc3FsLnNpemUoKSk7DQogICAgICAgIGVtLmNs\nb3NlKCk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdE9uZVRvTWFu\neUluaGVyaXRhbmNlUXVlcnkoKSB7DQogICAgICAgIHNxbC5jbGVhcigpOw0K\nDQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0\nZUVudGl0eU1hbmFnZXIoKTsNCiAgICAgICAgU3RyaW5nIHF1ZXJ5ID0gInNl\nbGVjdCBhIEZST00gRW50aXR5QTFJbnZlcnNlRWFnZXIgYSI7DQogICAgICAg\nIFF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeShxdWVyeSk7DQogICAgICAgIExp\nc3QgbGlzdCA9IHEuZ2V0UmVzdWx0TGlzdCgpOw0KICAgICAgICBhc3NlcnRF\ncXVhbHMoMSwgbGlzdC5zaXplKCkpOw0KICAgICAgICBmb3IgKGludCBpID0g\nMDsgaSA8IGxpc3Quc2l6ZSgpOyBpKyspIHsNCiAgICAgICAgICAgIEVudGl0\neUExSW52ZXJzZUVhZ2VyIGExID0gKEVudGl0eUExSW52ZXJzZUVhZ2VyKWxp\nc3QuZ2V0KGkpOw0KICAgICAgICAgICAgQ29sbGVjdGlvbjxFbnRpdHlCSW52\nZXJzZUVhZ2VyPiBsaXN0QiA9IGExLmdldExpc3RCKCk7DQogICAgICAgICAg\nICBhc3NlcnRFcXVhbHMoNCwgbGlzdEIuc2l6ZSgpKTsNCiAgICAgICAgICAg\nIGZvciAoSXRlcmF0b3IgaXRlcj1saXN0Qi5pdGVyYXRvcigpOyBpdGVyLmhh\nc05leHQoKTspIHsNCiAgICAgICAgICAgICAgICBFbnRpdHlCSW52ZXJzZUVh\nZ2VyIGIgPSAoRW50aXR5QkludmVyc2VFYWdlcilpdGVyLm5leHQoKTsNCiAg\nICAgICAgICAgICAgICBFbnRpdHlBSW52ZXJzZUVhZ2VyIGEgPSBiLmdldEEo\nKTsNCiAgICAgICAgICAgICAgICBhc3NlcnRFcXVhbHMoYTEsIGEpOw0KICAg\nICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGFzc2VydEVxdWFscygz\nLCBzcWwuc2l6ZSgpKTsNCiAgICAgICAgc3FsLmNsZWFyKCk7DQoNCiAgICAg\nICAgcXVlcnkgPSAic2VsZWN0IGEgRlJPTSBFbnRpdHlBMkludmVyc2VFYWdl\nciBhIjsNCiAgICAgICAgcSA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5KTsNCiAg\nICAgICAgbGlzdCA9IHEuZ2V0UmVzdWx0TGlzdCgpOw0KICAgICAgICBhc3Nl\ncnRFcXVhbHMoMSwgbGlzdC5zaXplKCkpOw0KICAgICAgICBmb3IgKGludCBp\nID0gMDsgaSA8IGxpc3Quc2l6ZSgpOyBpKyspIHsNCiAgICAgICAgICAgIEVu\ndGl0eUEySW52ZXJzZUVhZ2VyIGEyID0gKEVudGl0eUEySW52ZXJzZUVhZ2Vy\nKWxpc3QuZ2V0KGkpOw0KICAgICAgICAgICAgQ29sbGVjdGlvbiBsaXN0QiA9\nIGEyLmdldExpc3RCKCk7DQogICAgICAgICAgICBhc3NlcnRFcXVhbHMoNCwg\nbGlzdEIuc2l6ZSgpKTsNCiAgICAgICAgICAgIGZvciAoSXRlcmF0b3IgaXRl\ncj1saXN0Qi5pdGVyYXRvcigpOyBpdGVyLmhhc05leHQoKTspIHsNCiAgICAg\nICAgICAgICAgICBFbnRpdHlCSW52ZXJzZUVhZ2VyIGIgPSAoRW50aXR5Qklu\ndmVyc2VFYWdlcilpdGVyLm5leHQoKTsNCiAgICAgICAgICAgICAgICBFbnRp\ndHlBSW52ZXJzZUVhZ2VyIGEgPSBiLmdldEEoKTsNCiAgICAgICAgICAgICAg\nICBhc3NlcnRFcXVhbHMoYTIsIGEpOw0KICAgICAgICAgICAgfQ0KICAgICAg\nICB9DQogICAgICAgIGFzc2VydEVxdWFscygzLCBzcWwuc2l6ZSgpKTsNCiAg\nICAgICAgc3FsLmNsZWFyKCk7DQogICAgICAgIA0KICAgICAgICBxdWVyeSA9\nICJzZWxlY3QgYSBGUk9NIEVudGl0eUFJbnZlcnNlRWFnZXIgYSI7DQogICAg\nICAgIHEgPSBlbS5jcmVhdGVRdWVyeShxdWVyeSk7DQogICAgICAgIGxpc3Qg\nPSBxLmdldFJlc3VsdExpc3QoKTsNCiAgICAgICAgYXNzZXJ0RXF1YWxzKDMs\nIGxpc3Quc2l6ZSgpKTsNCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBs\naXN0LnNpemUoKTsgaSsrKSB7DQogICAgICAgICAgICBFbnRpdHlBSW52ZXJz\nZUVhZ2VyIGEwID0gKEVudGl0eUFJbnZlcnNlRWFnZXIpbGlzdC5nZXQoaSk7\nDQogICAgICAgICAgICBDb2xsZWN0aW9uIGxpc3RCID0gYTAuZ2V0TGlzdEIo\nKTsNCiAgICAgICAgICAgIGFzc2VydEVxdWFscyg0LCBsaXN0Qi5zaXplKCkp\nOw0KICAgICAgICAgICAgZm9yIChJdGVyYXRvciBpdGVyPWxpc3RCLml0ZXJh\ndG9yKCk7IGl0ZXIuaGFzTmV4dCgpOykgew0KICAgICAgICAgICAgICAgIEVu\ndGl0eUJJbnZlcnNlRWFnZXIgYiA9IChFbnRpdHlCSW52ZXJzZUVhZ2VyKWl0\nZXIubmV4dCgpOw0KICAgICAgICAgICAgICAgIEVudGl0eUFJbnZlcnNlRWFn\nZXIgYSA9IGIuZ2V0QSgpOw0KICAgICAgICAgICAgICAgIGFzc2VydEVxdWFs\ncyhhMCwgYSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAg\nDQogICAgICAgIGFzc2VydEVxdWFscygyLCBzcWwuc2l6ZSgpKTsNCiAgICAg\nICAgZW0uY2xvc2UoKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nT25lVG9NYW55RWFnZXJJbnZlcnNlTGF6eVF1ZXJ5KCkgew0KICAgICAgICBz\ncWwuY2xlYXIoKTsNCg0KICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBl\nbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7DQogICAgICAgIFN0cmlu\nZyBxdWVyeSA9ICJzZWxlY3QgcCBGUk9NIFB1Ymxpc2hlciBwIjsNCiAgICAg\nICAgUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5KTsNCiAgICAgICAg\nTGlzdCBsaXN0ID0gcS5nZXRSZXN1bHRMaXN0KCk7DQogICAgICAgIGFzc2Vy\ndEVxdWFscygyLCBsaXN0LnNpemUoKSk7DQogICAgICAgIGFzc2VydEVxdWFs\ncygyLCBzcWwuc2l6ZSgpKTsNCg0KICAgICAgICBzcWwuY2xlYXIoKTsNCiAg\nICAgICAgZW0uY2xlYXIoKTsNCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkg\nPCBsaXN0LnNpemUoKTsgaSsrKSB7DQogICAgICAgICAgICBQdWJsaXNoZXIg\ncCA9IChQdWJsaXNoZXIpIGxpc3QuZ2V0KGkpOw0KICAgICAgICAgICAgU2V0\nPE1hZ2F6aW5lPiBtYWdhemluZXMgPSBwLmdldE1hZ2F6aW5lQ29sbGVjdGlv\nbigpOw0KICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKDQsIG1hZ2F6aW5lcy5z\naXplKCkpOw0KICAgICAgICAgICAgZm9yIChJdGVyYXRvciBpdGVyID0gbWFn\nYXppbmVzLml0ZXJhdG9yKCk7IGl0ZXIuaGFzTmV4dCgpOykgew0KICAgICAg\nICAgICAgICAgIE1hZ2F6aW5lIG0gPSAoTWFnYXppbmUpIGl0ZXIubmV4dCgp\nOw0KICAgICAgICAgICAgICAgIFB1Ymxpc2hlciBtcCA9IG0uZ2V0SWRQdWJs\naXNoZXIoKTsNCiAgICAgICAgICAgICAgICBhc3NlcnRFcXVhbHMocCwgbXAp\nOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgYXNzZXJ0\nRXF1YWxzKDAsIHNxbC5zaXplKCkpOw0KICAgICAgICBlbS5jbG9zZSgpOw0K\nICAgIH0NCg0KICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1td\nIGFyZ3MpIHsNCiAgICAgICAgVGVzdFJ1bm5lci5ydW4oVGVzdEludmVyc2VF\nYWdlclNRTC5jbGFzcyk7DQogICAgfQ0KfQ0KDQo=\n","encoding":"base64"}

