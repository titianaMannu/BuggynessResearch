{"sha":"7d9babe02dad45027c411dbfa729e70deddde082","node_id":"MDQ6QmxvYjIwNjM2NDo3ZDliYWJlMDJkYWQ0NTAyN2M0MTFkYmZhNzI5ZTcwZGVkZGRlMDgy","size":5944,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/7d9babe02dad45027c411dbfa729e70deddde082","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UucmVsYXRp\nb25zOwoKaW1wb3J0IGphdmEudXRpbC5MaXN0OwoKaW1wb3J0IGphdmF4LnBl\ncnNpc3RlbmNlLkVudGl0eU1hbmFnZXI7CgppbXBvcnQganVuaXQuZnJhbWV3\nb3JrLkFzc2VydDsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lz\ndGVuY2UudGVzdC5TaW5nbGVFTUZUZXN0Q2FzZTsKCgpwdWJsaWMgY2xhc3Mg\nVGVzdFJlbGF0aW9uRmllbGRBc1ByaW1hcnlLZXlBbmRGb3JlaWduS2V5IAog\nICAgZXh0ZW5kcyBTaW5nbGVFTUZUZXN0Q2FzZSB7CgoJcHVibGljIHZvaWQg\nc2V0VXAoKSB7CgkgICAgc2V0VXAoQy5jbGFzcywgQ00uY2xhc3MsIEQuY2xh\nc3MsIEUuY2xhc3MsIFZDLmNsYXNzLCBWQ1MuY2xhc3MpOwoJICAgIAogICAg\nICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdl\ncigpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGVtLmdldFRyYW5zYWN0\naW9uKCkuYmVnaW4oKTsKICAgICAgICAgICAgTGlzdDxFPiBlcyA9IChMaXN0\nPEU+KSBlbS5jcmVhdGVRdWVyeSgKICAgICAgICAgICAgIlNlbGVjdCBlIGZy\nb20gRSBlIikuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgICAgICBmb3IgKEUg\nZSA6IGVzKSAKICAgICAgICAgICAgICAgIGVtLnJlbW92ZShlKTsKCiAgICAg\nICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAg\nICAgIGVtLmNsb3NlKCk7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUp\nIHsKICAgICAgICAgICAgCiAgICAgICAgfQoJICAgIAoJICAgIGVtID0gZW1m\nLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKCSAgICBlbS5nZXRUcmFuc2FjdGlv\nbigpLmJlZ2luKCk7CgoJICAgIEUgZSA9IG5ldyBFKCk7CgkgICAgZS5zZXRF\nSWQoIkUxIik7CgkgICAgZS5zZXROYW1lKCJFMSIpOwoKCSAgICBWQyB2YyA9\nIG5ldyBWQygpOwoJICAgIHZjLnNldFZjSWQoIlZDMSIpOwoKCSAgICBWQ1Mg\ndmNzZXQgPSBuZXcgVkNTKCk7CgkgICAgdmNzZXQuc2V0VmNzSWQoIlZDUzEi\nKTsKCSAgICB2Y3NldC5zZXROYW1lKCJWQ1NFVDEiKTsKCSAgICB2Y3NldC5h\nZGRWQyh2Yyk7CgkgICAgdmNzZXQuc2V0RShlKTsKCgkgICAgQyBjID0gbmV3\nIEMoKTsKCSAgICBjLnNldENJZCgiQzEiKTsKCgkgICAgQ00gY20gPSBuZXcg\nQ00oKTsKCSAgICBjbS5zZXRDbUlkKCJDTTEiKTsKCSAgICBjbS5zZXRFKGUp\nOwoJICAgIGNtLmFkZEMoYyk7CgoJICAgIEQgZCA9IG5ldyBEKCk7CgkgICAg\nZC5zZXRBKCJhZGRyIik7CgkgICAgZC5zZXRWYyh2Yyk7CgkgICAgZC5zZXRJ\nZCgiSU0xIik7CgoJICAgIGVtLnBlcnNpc3QoZSk7CgkgICAgZW0ucGVyc2lz\ndCh2Yyk7CgkgICAgZW0ucGVyc2lzdCh2Y3NldCk7CgkgICAgZW0ucGVyc2lz\ndChjKTsKCSAgICBlbS5wZXJzaXN0KGNtKTsKCSAgICBlbS5wZXJzaXN0KGQp\nOwoKCSAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwoJICAgIGVt\nLmNsb3NlKCk7Cgl9CgoJcHVibGljIHZvaWQgdGVzdFVuYm91bmRFbnRpdGll\ncygpIHsKCSAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0\neU1hbmFnZXIoKTsKCSAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7\nCgkgICAgVkNTIHZjU2V0ID0gbmV3IFZDUygpOwoJICAgIHZjU2V0LnNldFZj\nc0lkKCJWQ1NFVDIiKTsKCSAgICB2Y1NldC5zZXROYW1lKCJWQ1NFVDIiKTsK\nCSAgICB0cnkgewoJICAgICAgICBlbS5wZXJzaXN0KHZjU2V0KTsKCSAgICAg\nICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKCSAgICAgICAgQXNz\nZXJ0LmZhaWwoImRpZG4ndCB0aHJvdyBleHBlY3RlZCBQZXJzaXN0ZW5jZUV4\nY2VwdGlvbiIpOwoJICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CgkgICAg\nICAgIC8vIHRlc3QgcGFzcwoJICAgIH0gZmluYWxseSB7CgkgICAgICAgIGlm\nIChlbS5nZXRUcmFuc2FjdGlvbigpLmlzQWN0aXZlKCkpCgkgICAgICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLnJvbGxiYWNrKCk7CgkgICAgfQoKCSAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CgkgICAgVkMgdmMgPSBu\nZXcgVkMoKTsKCSAgICB2Yy5zZXRWY0lkKCJWQzIiKTsKCSAgICB0cnkgewoJ\nICAgICAgICBlbS5wZXJzaXN0KHZjKTsKCSAgICAgICAgZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5jb21taXQoKTsKCSAgICAgICAgQXNzZXJ0LmZhaWwoImRpZG4n\ndCB0aHJvdyBleHBlY3RlZCBQZXJzaXN0ZW5jZUV4Y2VwdGlvbiIpOwoJICAg\nIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CgkgICAgICAgIC8vIHRlc3QgcGFz\ncwoJICAgIH0gZmluYWxseSB7CgkgICAgICAgIGlmIChlbS5nZXRUcmFuc2Fj\ndGlvbigpLmlzQWN0aXZlKCkpCgkgICAgICAgICAgICBlbS5nZXRUcmFuc2Fj\ndGlvbigpLnJvbGxiYWNrKCk7CgkgICAgfQoKCSAgICBlbS5nZXRUcmFuc2Fj\ndGlvbigpLmJlZ2luKCk7CgkgICAgQ00gY20gPSBuZXcgQ00oKTsKCSAgICBj\nbS5zZXRDbUlkKCJDTUlEMiIpOwoJICAgIHRyeSB7CgkgICAgICAgIGVtLnBl\ncnNpc3QoY20pOwoJICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1p\ndCgpOwoJICAgICAgICBBc3NlcnQuZmFpbCgiZGlkbid0IHRocm93IGV4cGVj\ndGVkIFBlcnNpc3RlbmNlRXhjZXB0aW9uIik7CgkgICAgfSBjYXRjaCAoRXhj\nZXB0aW9uIGUpIHsKCSAgICAgICAgLy8gdGVzdCBwYXNzCgkgICAgfSBmaW5h\nbGx5IHsKCSAgICAgICAgaWYgKGVtLmdldFRyYW5zYWN0aW9uKCkuaXNBY3Rp\ndmUoKSkKCSAgICAgICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkucm9sbGJh\nY2soKTsKCSAgICB9CgoJICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4o\nKTsKCSAgICBDIGMgPSBuZXcgQygpOwoJICAgIGMuc2V0Q0lkKCJDSUQyIik7\nCgkgICAgdHJ5IHsKCSAgICAgICAgZW0ucGVyc2lzdChjKTsKCSAgICAgICAg\nZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKCSAgICAgICAgQXNzZXJ0\nLmZhaWwoImRpZG4ndCB0aHJvdyBleHBlY3RlZCBQZXJzaXN0ZW5jZUV4Y2Vw\ndGlvbiIpOwoJICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CgkgICAgICAg\nIC8vIHRlc3QgcGFzcwoJICAgIH0gZmluYWxseSB7CgkgICAgICAgIGlmIChl\nbS5nZXRUcmFuc2FjdGlvbigpLmlzQWN0aXZlKCkpCgkgICAgICAgICAgICBl\nbS5nZXRUcmFuc2FjdGlvbigpLnJvbGxiYWNrKCk7CgkgICAgfQoKCSAgICBl\nbS5jbG9zZSgpOwoJfQoKCXB1YmxpYyB2b2lkIHRlc3RRdWVyeSgpIHsKCSAg\nICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIo\nKTsKCSAgICBMaXN0PEU+IGVzID0gKExpc3Q8RT4pIGVtLmNyZWF0ZVF1ZXJ5\nKAoJICAgICAgICAiU2VsZWN0IGUgZnJvbSBFIGUgd2hlcmUgZS5uYW1lPSdF\nMSciKS5nZXRSZXN1bHRMaXN0KCk7CgkgICAgQXNzZXJ0LmFzc2VydEVxdWFs\ncygxLCBlcy5zaXplKCkpOwoJICAgIEUgZSA9IChFKSBlcy5nZXQoMCk7Cgkg\nICAgQXNzZXJ0LmFzc2VydEVxdWFscygiRTEiLCBlLmdldE5hbWUoKSk7Cgkg\nICAgQXNzZXJ0LmFzc2VydEVxdWFscygxLCBlLmdldFZjc3MoKS5zaXplKCkp\nOwoJICAgIEFzc2VydC5hc3NlcnRFcXVhbHMoMSwgZS5nZXRDbXMoKS5zaXpl\nKCkpOwoJICAgIEFzc2VydC5hc3NlcnRFcXVhbHMoMSwgZS5nZXRWY3NzKCku\nc2l6ZSgpKTsKCgkgICAgLy8gR2V0IHZpcnR1YWwgY29udGFpbmVyIHNldCBh\nbmQgY2hlY2sgdGhhdCBpdCBoYXMgYSByZWZlcmVuY2UgdG8gdGhlCgkgICAg\nLy8gZW5zZW1ibGUKCSAgICBMaXN0PFZDUz4gdmNzcyA9IChMaXN0PFZDUz4p\nIGVtLmNyZWF0ZVF1ZXJ5KAoJICAgICAgICAiU2VsZWN0IHZjc2V0IGZyb20g\nVkNTIHZjc2V0IHdoZXJlIHZjc2V0LnZjc0lkPSdWQ1MxJyIpCgkgICAgICAg\nIC5nZXRSZXN1bHRMaXN0KCk7CgkgICAgQXNzZXJ0LmFzc2VydEVxdWFscygx\nLCB2Y3NzLnNpemUoKSk7CgkgICAgQXNzZXJ0LmFzc2VydEVxdWFscyhlLCAo\nKFZDUykgdmNzcy5nZXQoMCkpLmdldEUoKSk7CgkgICAgZW0uY2xvc2UoKTsK\nCX0KCglwdWJsaWMgdm9pZCB0ZXN0RGVsZXRlcygpIHsKCSAgICAvLyBSZW1v\ndmUgVkMgc2V0IGFuZCBjaGVjayB0aGF0IGFsbCBWQ3MgYmVsb25naW5nIHRv\nIHRoYXQgc2V0IGFyZQoJICAgIC8vIGRlbGV0ZWQgYnV0IG5vdCB0aGUgZW5z\nZW1ibGUgaXRzZWxmCgkgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVh\ndGVFbnRpdHlNYW5hZ2VyKCk7CgkgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5i\nZWdpbigpOwoJICAgIFZDUyB2Y3NldCA9IChWQ1MpIGVtLmNyZWF0ZVF1ZXJ5\nKAoJICAgICAgICAiU2VsZWN0IHZjc2V0IGZyb20gVkNTIHZjc2V0IHdoZXJl\nIHZjc2V0LnZjc0lkPSdWQ1MxJyIpCgkgICAgICAgIC5nZXRTaW5nbGVSZXN1\nbHQoKTsKCSAgICBlbS5yZW1vdmUodmNzZXQpOwoJICAgIGVtLmdldFRyYW5z\nYWN0aW9uKCkuY29tbWl0KCk7CgoJICAgIC8vIEdldCB2aXJ0dWFsQ29udGFp\nbmVyCgkgICAgTGlzdDxWQz4gdmNzID0gKExpc3Q8VkM+KSBlbS5jcmVhdGVR\ndWVyeSgKCSAgICAgICAgIlNlbGVjdCB2YyBmcm9tIFZDIHZjIHdoZXJlIHZj\nLnZjSWQ9J1ZDMSciKQoJICAgICAgICAuZ2V0UmVzdWx0TGlzdCgpOwoJICAg\nIEFzc2VydC5hc3NlcnRFcXVhbHMoMCwgdmNzLnNpemUoKSk7CgoJICAgIC8v\nIE1ha2Ugc3VyZSBFIGFuZCBJIGFyZSBzdGlsbCB0aGVyZQoJICAgIExpc3Q8\nRT4gZXMgPSAoTGlzdDxFPikgZW0uY3JlYXRlUXVlcnkoCgkgICAgICAgICJT\nZWxlY3QgZSBmcm9tIEUgZSIpLmdldFJlc3VsdExpc3QoKTsKCSAgICBBc3Nl\ncnQuYXNzZXJ0RXF1YWxzKDEsIGVzLnNpemUoKSk7Cgl9CgoJcHVibGljIHZv\naWQgdGVhckRvd24oKSB0aHJvd3MgRXhjZXB0aW9uIHsKCSAgICBFbnRpdHlN\nYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKCSAgICBl\nbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CgkgICAgTGlzdDxFPiBlcyA9\nIChMaXN0PEU+KSBlbS5jcmVhdGVRdWVyeSgKCSAgICAgICAgIlNlbGVjdCBl\nIGZyb20gRSBlIikuZ2V0UmVzdWx0TGlzdCgpOwoJICAgIGZvciAoRSBlIDog\nZXMpIHsKCSAgICAgICAgZW0ucmVtb3ZlKGUpOwoJICAgIH0KCgkgICAgZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKCSAgICBlbS5jbG9zZSgpOwoJ\nfQp9Cg==\n","encoding":"base64"}

