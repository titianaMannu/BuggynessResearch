{"sha":"9eba7afe03f809307a1ad4f45f046f807dafd4d4","node_id":"MDQ6QmxvYjIwNjM2NDo5ZWJhN2FmZTAzZjgwOTMwN2ExYWQ0ZjQ1ZjA0NmY4MDdkYWZkNGQ0","size":4452,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/9eba7afe03f809307a1ad4f45f046f807dafd4d4","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UudGVzdDsK\nCmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGphdmEudXRpbC5BcnJh\neUxpc3Q7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5qZGJjLkFi\nc3RyYWN0SkRCQ0xpc3RlbmVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmxpYi5qZGJjLkpEQkNFdmVudDsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5saWIuamRiYy5KREJDTGlzdGVuZXI7CgovKioKICogQmFzZSBjbGFzcyBm\nb3IgdGVzdHMgdGhhdCBuZWVkIHRvIGNoZWNrIGdlbmVyYXRlZCBTUUwuCiAq\nCiAqIEBhdXRob3IgUGF0cmljayBMaW5za2V5CiAqLwpwdWJsaWMgYWJzdHJh\nY3QgY2xhc3MgU1FMTGlzdGVuZXJUZXN0Q2FzZQogICAgZXh0ZW5kcyBTaW5n\nbGVFTUZUZXN0Q2FzZSB7CiAgICBwcml2YXRlIHN0YXRpYyBTdHJpbmcgX25s\nID0gU3lzdGVtLmdldFByb3BlcnR5KCJsaW5lLnNlcGFyYXRvciIpOwogICAg\ncHJvdGVjdGVkIExpc3Q8U3RyaW5nPiBzcWwgPSBuZXcgQXJyYXlMaXN0PFN0\ncmluZz4oKTsKICAgIHByb3RlY3RlZCBpbnQgc3FsQ291bnQ7CiAgICAKICAg\nIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgc2V0VXAoT2JqZWN0Li4uIHBy\nb3BzKSB7CiAgICAgICAgT2JqZWN0W10gY29weSA9IG5ldyBPYmplY3RbcHJv\ncHMubGVuZ3RoICsgMl07CiAgICAgICAgU3lzdGVtLmFycmF5Y29weShwcm9w\ncywgMCwgY29weSwgMCwgcHJvcHMubGVuZ3RoKTsKICAgICAgICBjb3B5W2Nv\ncHkubGVuZ3RoIC0gMl0gPSAib3BlbmpwYS5qZGJjLkpEQkNMaXN0ZW5lcnMi\nOwogICAgICAgIGNvcHlbY29weS5sZW5ndGggLSAxXSA9IG5ldyBKREJDTGlz\ndGVuZXJbXSB7IG5ldyBMaXN0ZW5lcigpIH07CiAgICAgICAgc3VwZXIuc2V0\nVXAoY29weSk7IAogICAgfQoKICAgIC8qKgogICAgICogQ29uZmlybSB0aGF0\nIHRoZSBzcGVjaWZpZWQgU1FMIGhhcyBiZWVuIGV4ZWN1dGVkLgogICAgICoK\nICAgICAqIEBwYXJhbSBzcWxFeHAgdGhlIFNRTCBleHByZXNzaW9uLiBFLmcu\nLCAiU0VMRUNUIEZPTyAuKiIKICAgICAqLwogICAgcHVibGljIHZvaWQgYXNz\nZXJ0U1FMKFN0cmluZyBzcWxFeHApIHsKICAgICAgICBmb3IgKFN0cmluZyBz\ndGF0ZW1lbnQgOiBzcWwpIHsKICAgICAgICAgICAgaWYgKHN0YXRlbWVudC5t\nYXRjaGVzKHNxbEV4cCkpCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAg\nICAgfQoKICAgICAgICBmYWlsKCJFeHBlY3RlZCByZWd1bGFyIGV4cHJlc3Np\nb24gPCIgKyBzcWxFeHAgKyAiPiB0byBoYXZlIgogICAgICAgICAgICArICIg\nZXhpc3RlZCBpbiBTUUwgc3RhdGVtZW50czogIiArIHNxbCk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBDb25maXJtIHRoYXQgdGhlIHNwZWNpZmllZCBTUUwg\naGFzIG5vdCBiZWVuIGV4ZWN1dGVkLgogICAgICoKICAgICAqIEBwYXJhbSBz\ncWxFeHAgdGhlIFNRTCBleHByZXNzaW9uLiBFLmcuLCAiU0VMRUNUIEJBRENP\nTFVNTiAuKiIKICAgICAqLwogICAgcHVibGljIHZvaWQgYXNzZXJ0Tm90U1FM\nKFN0cmluZyBzcWxFeHApIHsKICAgICAgICBib29sZWFuIGZhaWxlZCA9IGZh\nbHNlOwoKICAgICAgICBmb3IgKFN0cmluZyBzdGF0ZW1lbnQgOiBzcWwpIHsK\nICAgICAgICAgICAgaWYgKHN0YXRlbWVudC5tYXRjaGVzKHNxbEV4cCkpCiAg\nICAgICAgICAgICAgICBmYWlsZWQgPSB0cnVlOwogICAgICAgIH0KCiAgICAg\nICAgaWYgKGZhaWxlZCkKICAgICAgICAgICAgZmFpbCgiUmVndWxhciBleHBy\nZXNzaW9uIDwiICsgc3FsRXhwICsgIj4iCiAgICAgICAgICAgICAgICArICIg\nc2hvdWxkIG5vdCBoYXZlIGJlZW4gZXhlY3V0ZWQgaW4gU1FMIHN0YXRlbWVu\ndHM6ICIgKyBzcWwpOwogICAgfQoKICAgIC8qKgogICAgICogQ29uZmlybSB0\naGF0IHRoZSBleGVjdXRlZCBTUUwgU3RyaW5nIGNvbnRhaW5zIHRoZSBzcGVj\naWZpZWQgc3FsRXhwLgogICAgICoKICAgICAqIEBwYXJhbSBzcWxFeHAgdGhl\nIFNRTCBleHByZXNzaW9uLiBFLmcuLCAiU0VMRUNUIEJBRENPTFVNTiAuKiIK\nICAgICAqLwogICAgcHVibGljIHZvaWQgYXNzZXJ0Q29udGFpbnNTUUwoU3Ry\naW5nIHNxbEV4cCkgewogICAgICAgIGZvciAoU3RyaW5nIHN0YXRlbWVudCA6\nIHNxbCkgewogICAgICAgICAgICBpZiAoc3RhdGVtZW50LmNvbnRhaW5zKHNx\nbEV4cCkpCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAg\nICAgICBmYWlsKCJFeHBlY3RlZCByZWd1bGFyIGV4cHJlc3Npb24gPCIgKyBz\ncWxFeHAgKyAiPiB0byBiZSIKICAgICAgICAgICAgKyAiIGNvbnRhaW5lZCBp\nbiBTUUwgc3RhdGVtZW50czogIiArIHNxbCk7CiAgICB9CiAgICAKICAgIC8q\nKgogICAgICogR2V0cyB0aGUgbnVtYmVyIG9mIFNRTCBpc3N1ZWQgc2luY2Ug\nbGFzdCByZXNldC4KICAgICAqLwogICAgcHVibGljIGludCBnZXRTUUxDb3Vu\ndCgpIHsKICAgIAlyZXR1cm4gc3FsQ291bnQ7CiAgICB9CiAgICAKICAgIC8q\nKgogICAgICogUmVzZXRzIFNRTCBjb3VudC4KICAgICAqIEByZXR1cm4gbnVt\nYmVyIG9mIFNRTCBjb3VudGVkIHNpbmNlIGxhc3QgcmVzZXQuCiAgICAgKi8K\nICAgIHB1YmxpYyBpbnQgcmVzZXRTUUxDb3VudCgpIHsKICAgIAlpbnQgdG1w\nID0gc3FsQ291bnQ7CiAgICAJc3FsQ291bnQgPSAwOwogICAgCXJldHVybiB0\nbXA7CiAgICB9CgogICAgcHVibGljIGNsYXNzIExpc3RlbmVyCiAgICAgICAg\nZXh0ZW5kcyBBYnN0cmFjdEpEQkNMaXN0ZW5lciB7CgogICAgICAgIEBPdmVy\ncmlkZQogICAgICAgIHB1YmxpYyB2b2lkIGJlZm9yZUV4ZWN1dGVTdGF0ZW1l\nbnQoSkRCQ0V2ZW50IGV2ZW50KSB7CiAgICAgICAgICAgIGlmIChldmVudC5n\nZXRTUUwoKSAhPSBudWxsICYmIHNxbCAhPSBudWxsKSB7CiAgICAgICAgICAg\nICAgICBzcWwuYWRkKGV2ZW50LmdldFNRTCgpKTsKICAgICAgICAgICAgICAg\nIHNxbENvdW50Kys7CiAgICAgICAgICAgIH0KCQl9Cgl9CiAgICAKICAgIHB1\nYmxpYyB2b2lkIGFzc2VydFNRTE9yZGVyKFN0cmluZy4uLiBleHBlY3RlZCkg\newogICAgICAgIGludCBoaXRzID0gMDsKCiAgICAgICAgZm9yIChTdHJpbmcg\nZXhlY3V0ZWRTUUwgOiBzcWwpIHsKICAgICAgICAgICAgaWYgKGV4ZWN1dGVk\nU1FMLm1hdGNoZXMoZXhwZWN0ZWRbaGl0c10pKSB7CiAgICAgICAgICAgICAg\nICBoaXRzKys7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlm\nIChoaXRzICE9IGV4cGVjdGVkLmxlbmd0aCkgewogICAgICAgICAgICBTdHJp\nbmdCdWlsZGVyIHNiID0gbmV3IFN0cmluZ0J1aWxkZXIoKTsKICAgICAgICAg\nICAgc2IuYXBwZW5kKCJEaWQgbm90IGZpbmQgU1FMIGluIGV4cGVjdGVkIG9y\nZGVyIDogIikuYXBwZW5kKF9ubCk7CiAgICAgICAgICAgIGZvciAoU3RyaW5n\nIHMgOiBleHBlY3RlZCkgewogICAgICAgICAgICAgICAgc2IuYXBwZW5kKHMp\nLmFwcGVuZChfbmwpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBzYi5h\ncHBlbmQoIlNRTCBTdGF0ZW1lbnRzIGlzc3VlZCA6ICIpOwogICAgICAgICAg\nICBmb3IgKFN0cmluZyBzIDogc3FsKSB7CiAgICAgICAgICAgICAgICBzYi5h\ncHBlbmQocykuYXBwZW5kKF9ubCk7CiAgICAgICAgICAgIH0KICAgICAgICAg\nICAgZmFpbChzYi50b1N0cmluZygpKTsKICAgICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

