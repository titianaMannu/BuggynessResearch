{"sha":"0fefc75c6f3d45ff6ad233d4f5353fed7858672b","node_id":"MDQ6QmxvYjIwNjM2NDowZmVmYzc1YzZmM2Q0NWZmNmFkMjMzZDRmNTM1M2ZlZDc4NTg2NzJi","size":16477,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/0fefc75c6f3d45ff6ad233d4f5353fed7858672b","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\nc2xpY2UuamRiYzsNCg0KaW1wb3J0IGphdmEuc3FsLkNvbm5lY3Rpb247DQpp\nbXBvcnQgamF2YS5zcWwuU1FMRXhjZXB0aW9uOw0KaW1wb3J0IGphdmEudXRp\nbC5BcnJheUxpc3Q7DQppbXBvcnQgamF2YS51dGlsLkFycmF5czsNCmltcG9y\ndCBqYXZhLnV0aWwuQml0U2V0Ow0KaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0\naW9uOw0KaW1wb3J0IGphdmEudXRpbC5IYXNoTWFwOw0KaW1wb3J0IGphdmEu\ndXRpbC5MaXN0Ow0KaW1wb3J0IGphdmEudXRpbC5NYXA7DQppbXBvcnQgamF2\nYS51dGlsLmNvbmN1cnJlbnQuQ2FsbGFibGU7DQppbXBvcnQgamF2YS51dGls\nLmNvbmN1cnJlbnQuRXhlY3V0aW9uRXhjZXB0aW9uOw0KaW1wb3J0IGphdmEu\ndXRpbC5jb25jdXJyZW50LkV4ZWN1dG9yU2VydmljZTsNCmltcG9ydCBqYXZh\nLnV0aWwuY29uY3VycmVudC5FeGVjdXRvcnM7DQppbXBvcnQgamF2YS51dGls\nLmNvbmN1cnJlbnQuRnV0dXJlOw0KDQppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmpkYmMuY29uZi5KREJDQ29uZmlndXJhdGlvbjsNCmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuQ29ubmVjdGlvbkluZm87DQpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMua2VybmVsLkpEQkNTdG9y\nZTsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuSkRC\nQ1N0b3JlTWFuYWdlcjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5zcWwuUmVzdWx0Ow0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLnNxbC5SZXN1bHRTZXRSZXN1bHQ7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmtlcm5lbC5GZXRjaENvbmZpZ3VyYXRpb247DQppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmtlcm5lbC5PcGVuSlBBU3RhdGVNYW5hZ2VyOw0KaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuUENTdGF0ZTsNCmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlF1ZXJ5TGFuZ3VhZ2VzOw0K\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuU2VxOw0KaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuU3RvcmVDb250ZXh0Ow0KaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuU3RvcmVNYW5hZ2VyOw0K\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuU3RvcmVRdWVyeTsN\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLmV4cHMuRXhwcmVz\nc2lvblBhcnNlcjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnJv\ncC5NZXJnZWRSZXN1bHRPYmplY3RQcm92aWRlcjsNCmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEubGliLnJvcC5SZXN1bHRPYmplY3RQcm92aWRlcjsNCmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOw0K\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkNsYXNzTWV0YURhdGE7\nDQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuRmllbGRNZXRhRGF0\nYTsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuc2xpY2UuRGlzdHJpYnV0\naW9uUG9saWN5Ow0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5zbGljZS5Q\ncm9kdWN0RGVyaXZhdGlvbjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\ndXRpbC5JbnRlcm5hbEV4Y2VwdGlvbjsNCmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEudXRpbC5TdG9yZUV4Y2VwdGlvbjsNCmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEudXRpbC5Vc2VyRXhjZXB0aW9uOw0KDQovKioNCiAqIEEgU3Rv\ncmUgbWFuYWdlciBmb3IgbXVsdGlwbGUgcGh5c2ljYWwgZGF0YWJhc2VzIHJl\nZmVycmVkIGFzIDxlbT5zbGljZTwvZW0+Lg0KICogVGhpcyByZWNlaXZlciBi\nZWhhdmVzIGxpa2UgYSBUcmFuc2FjdGlvbiBNYW5hZ2VyIGFzIGl0IGltcGxl\nbWVudHMgdHdvLXBoYXNlDQogKiBjb21taXQgcHJvdG9jb2wgaWYgYWxsIHRo\nZSBjb21wb25lbnQgc2xpY2VzIGlzIFhBLWNvbXBsYWludC4gVGhlIGFjdGlv\nbnMgYXJlDQogKiBkZWxlZ2F0ZWQgdG8gdGhlIHVuZGVybHlpbmcgc2xpY2Vz\nLiBUaGUgYWN0aW9ucyBhcmUgZXhlY3V0ZWQgaW4gcGFyYWxsZWwNCiAqIHRo\ncmVhZHMgd2hlbmV2ZXIgcG9zc2libGUgc3VjaCBhcyBmbHVzaGluZyBvciBx\ndWVyeS4gPGJyPg0KICogDQogKiBAYXV0aG9yIFBpbmFraSBQb2RkYXINCiAq\nIA0KICovDQpjbGFzcyBEaXN0cmlidXRlZFN0b3JlTWFuYWdlciBleHRlbmRz\nIEpEQkNTdG9yZU1hbmFnZXIgew0KICAgIHByaXZhdGUgZmluYWwgTGlzdDxT\nbGljZVN0b3JlTWFuYWdlcj4gX3NsaWNlczsNCiAgICBwcml2YXRlIEpEQkNT\ndG9yZU1hbmFnZXIgX21hc3RlcjsNCiAgICBwcml2YXRlIGZpbmFsIERpc3Ry\naWJ1dGVkSkRCQ0NvbmZpZ3VyYXRpb24gX2NvbmY7DQogICAgcHJpdmF0ZSBz\ndGF0aWMgZmluYWwgTG9jYWxpemVyIF9sb2MgPQ0KICAgICAgICAgICAgTG9j\nYWxpemVyLmZvclBhY2thZ2UoRGlzdHJpYnV0ZWRTdG9yZU1hbmFnZXIuY2xh\nc3MpOw0KICAgIHByaXZhdGUgc3RhdGljIEV4ZWN1dG9yU2VydmljZSB0aHJl\nYWRQb29sID0gRXhlY3V0b3JzLm5ld0NhY2hlZFRocmVhZFBvb2woKTsNCg0K\nICAgIC8qKg0KICAgICAqIENvbnN0cnVjdHMgYSBzZXQgb2YgY2hpbGQgU3Rv\ncmVNYW5hZ2VycyBlYWNoIGNvbm5lY3RlZCB0byBhIHBoeXNpY2FsDQogICAg\nICogRGF0YVNvdXJjZS4NCiAgICAgKiANCiAgICAgKiBUaGUgc3VwcGxpZWQg\nY29uZmlndXJhdGlvbiBjYXJyaWVzIG11bHRpcGxlIFVSTCBmb3IgdW5kZXJs\neWluZyBwaHlzaWNhbA0KICAgICAqIHNsaWNlcy4gVGhlIGZpcnN0IHNsaWNl\nIGlzIHJlZmVycmVkIGFzIDxlbT5tYXN0ZXI8L2VtPiBhbmQgaXMgdXNlZCB0\nbw0KICAgICAqIGdldCBTZXF1ZW5jZSBiYXNlZCBlbnRpdHkgaWRlbnRpZmll\ncnMuDQogICAgICovDQogICAgcHVibGljIERpc3RyaWJ1dGVkU3RvcmVNYW5h\nZ2VyKERpc3RyaWJ1dGVkSkRCQ0NvbmZpZ3VyYXRpb24gY29uZikgew0KICAg\nICAgICBzdXBlcigpOw0KICAgICAgICBfY29uZiA9IGNvbmY7DQogICAgICAg\nIF9zbGljZXMgPSBuZXcgQXJyYXlMaXN0PFNsaWNlU3RvcmVNYW5hZ2VyPigp\nOw0KICAgICAgICBMaXN0PFN0cmluZz4gc2xpY2VOYW1lcyA9IGNvbmYuZ2V0\nQWN0aXZlU2xpY2VOYW1lcygpOw0KICAgICAgICBmb3IgKFN0cmluZyBuYW1l\nIDogc2xpY2VOYW1lcykgew0KICAgICAgICAgICAgU2xpY2VTdG9yZU1hbmFn\nZXIgc2xpY2UgPSBuZXcgU2xpY2VTdG9yZU1hbmFnZXINCiAgICAgICAgICAg\nICAgICAoY29uZi5nZXRTbGljZShuYW1lKSk7DQogICAgICAgICAgICBfc2xp\nY2VzLmFkZChzbGljZSk7DQogICAgICAgICAgICBpZiAobmFtZS5lcXVhbHMo\nY29uZi5nZXRNYXN0ZXIoKS5nZXROYW1lKCkpKQ0KICAgICAgICAgICAgICAg\nIF9tYXN0ZXIgPSBzbGljZTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHB1\nYmxpYyBEaXN0cmlidXRlZEpEQkNDb25maWd1cmF0aW9uIGdldENvbmZpZ3Vy\nYXRpb24oKSB7DQogICAgICAgIHJldHVybiBfY29uZjsNCiAgICB9DQoNCiAg\nICAvKioNCiAgICAgKiBEZWNpZGVzIHRoZSBpbmRleCBvZiB0aGUgU3RvcmVN\nYW5hZ2VyIGJ5IGZpcnN0IGxvb2tpbmcgYXQgdGhlDQogICAgICogaW1wbGVt\nZW50YXRpb24gZGF0YS4gSWYgbm90IGZvdW5kIHRoZW4ge0BsaW5rIERpc3Ry\naWJ1dGlvblBvbGljeQ0KICAgICAqIERpc3RyaWJ1dGlvblBvbGljeX0gZGV0\nZXJtaW5lcyB0aGUgdGFyZ2V0IHN0b3JlIGZvciBuZXcgaW5zdGFuY2VzIGFu\nZA0KICAgICAqIGFkZGl0aW9uYWwgY29ubmVjdGlvbiBpbmZvIGlzIHVzZWQg\ndG8gZXN0aW1hdGUgZm9yIHRoZSBleGlzdGluZw0KICAgICAqIGluc3RhbmNl\ncy4NCiAgICAgKi8NCiAgICBwcm90ZWN0ZWQgU3RyaW5nIGZpbmRTbGljZU5h\nbWUoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgT2JqZWN0IGluZm8pIHsNCiAg\nICAgICAgYm9vbGVhbiBoYXNJbmRleCA9IGhhc1NsaWNlKHNtKTsNCiAgICAg\nICAgaWYgKGhhc0luZGV4KQ0KICAgICAgICAgICAgcmV0dXJuIHNtLmdldElt\ncGxEYXRhKCkudG9TdHJpbmcoKTsNCiAgICAgICAgU3RyaW5nIHNsaWNlID0g\nZXN0aW1hdGVTbGljZShzbSwgaW5mbyk7DQogICAgICAgIGlmIChzbGljZSA9\nPSBudWxsKQ0KICAgICAgICAgICAgcmV0dXJuIGFzc2lnblNsaWNlKHNtKTsN\nCiAgICAgICAgcmV0dXJuIHNsaWNlOw0KICAgIH0NCg0KICAgIHByaXZhdGUg\nYm9vbGVhbiBoYXNTbGljZShPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtKSB7DQog\nICAgICAgIHJldHVybiBzbS5nZXRJbXBsRGF0YSgpICE9IG51bGw7DQogICAg\nfQ0KDQogICAgcHJpdmF0ZSBTdHJpbmcgYXNzaWduU2xpY2UoT3BlbkpQQVN0\nYXRlTWFuYWdlciBzbSkgew0KICAgICAgICBPYmplY3QgcGMgPSBzbS5nZXRQ\nZXJzaXN0ZW5jZUNhcGFibGUoKTsNCiAgICAgICAgRGlzdHJpYnV0aW9uUG9s\naWN5IHBvbGljeSA9IF9jb25mLmdldERpc3RyaWJ1dGlvblBvbGljeUluc3Rh\nbmNlKCk7DQogICAgICAgIExpc3Q8U3RyaW5nPiBzbGljZU5hbWVzID0gX2Nv\nbmYuZ2V0QWN0aXZlU2xpY2VOYW1lcygpOw0KICAgICAgICBTdHJpbmcgc2xp\nY2UgPXBvbGljeS5kaXN0cmlidXRlKHBjLCBzbGljZU5hbWVzLCBnZXRDb250\nZXh0KCkpOw0KICAgICAgICBpZiAoIXNsaWNlTmFtZXMuY29udGFpbnMoc2xp\nY2UpKSB7DQogICAgICAgICAgICB0aHJvdyBuZXcgVXNlckV4Y2VwdGlvbihf\nbG9jLmdldCgiYmFkLXBvbGljeS1zbGljZSIsIG5ldyBPYmplY3RbXSB7DQog\nICAgICAgICAgICAgICAgICAgIHBvbGljeS5nZXRDbGFzcygpLmdldE5hbWUo\nKSwgc2xpY2UsIHBjLCBzbGljZU5hbWVzIH0pKTsNCiAgICAgICAgfQ0KICAg\nICAgICBzbS5zZXRJbXBsRGF0YShzbGljZSwgdHJ1ZSk7DQogICAgICAgIHJl\ndHVybiBzbGljZTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBUaGUgYWRk\naXRpb25hbCBlZGF0YSBpcyB1c2VkLCBpZiBwb3NzaWJsZSwgdG8gZmluZCB0\naGUgU3RvcmVNYW5hZ2VyDQogICAgICogbWFuYWdpbmcgdGhlIGdpdmVuIFN0\nYXRlTWFuYWdlci4gSWYgdGhlIGFkZGl0aW9uYWwgZGF0YSBpcyB1bmF2YWls\nYWJsZQ0KICAgICAqIHRoZW4gcmV0dXJuIG51bGwuDQogICAgICogDQogICAg\nICovDQogICAgcHJpdmF0ZSBTdHJpbmcgZXN0aW1hdGVTbGljZShPcGVuSlBB\nU3RhdGVNYW5hZ2VyIHNtLCBPYmplY3QgZWRhdGEpIHsNCiAgICAgICAgaWYg\nKGVkYXRhID09IG51bGwgfHwgIShlZGF0YSBpbnN0YW5jZW9mIENvbm5lY3Rp\nb25JbmZvKSkNCiAgICAgICAgICAgIHJldHVybiBudWxsOw0KDQogICAgICAg\nIFJlc3VsdCByZXN1bHQgPSAoKENvbm5lY3Rpb25JbmZvKSBlZGF0YSkucmVz\ndWx0Ow0KICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUmVzdWx0U2V0\nUmVzdWx0KSB7DQogICAgICAgICAgICBKREJDU3RvcmUgc3RvcmUgPSAoKFJl\nc3VsdFNldFJlc3VsdCkgcmVzdWx0KS5nZXRTdG9yZSgpOw0KICAgICAgICAg\nICAgZm9yIChTbGljZVN0b3JlTWFuYWdlciBzbGljZSA6IF9zbGljZXMpIHsN\nCiAgICAgICAgICAgICAgICBpZiAoc2xpY2UgPT0gc3RvcmUpIHsNCiAgICAg\nICAgICAgICAgICAgICAgU3RyaW5nIHNsaWNlSWQgPSBzbGljZS5nZXROYW1l\nKCk7DQogICAgICAgICAgICAgICAgICAgIHNtLnNldEltcGxEYXRhKHNsaWNl\nSWQsIHRydWUpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2xpY2VJ\nZDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAg\nIH0NCiAgICAgICAgcmV0dXJuIG51bGw7DQogICAgfQ0KDQogICAgLyoqDQog\nICAgICogU2VsZWN0cyBhIGNoaWxkIFN0b3JlTWFuYWdlciB3aGVyZSB0aGUg\nZ2l2ZW4gaW5zdGFuY2UgcmVzaWRlcy4NCiAgICAgKi8NCiAgICBwcml2YXRl\nIFN0b3JlTWFuYWdlciBzZWxlY3RTdG9yZShPcGVuSlBBU3RhdGVNYW5hZ2Vy\nIHNtLCBPYmplY3QgZWRhdGEpIHsNCiAgICAgICAgU3RyaW5nIG5hbWUgPSBm\naW5kU2xpY2VOYW1lKHNtLCBlZGF0YSk7DQogICAgICAgIFNsaWNlU3RvcmVN\nYW5hZ2VyIHNsaWNlID0gbG9va3VwKG5hbWUpOw0KICAgICAgICBpZiAoc2xp\nY2UgPT0gbnVsbCkNCiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4\nY2VwdGlvbihfbG9jLmdldCgid3Jvbmctc2xpY2UiLCBuYW1lLCBzbSkpOw0K\nICAgICAgICByZXR1cm4gc2xpY2U7DQogICAgfQ0KDQogICAgcHVibGljIGJv\nb2xlYW4gYXNzaWduRmllbGQoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgaW50\nIGZpZWxkLA0KICAgICAgICAgICAgYm9vbGVhbiBwcmVGbHVzaCkgew0KICAg\nICAgICByZXR1cm4gc2VsZWN0U3RvcmUoc20sIG51bGwpLmFzc2lnbkZpZWxk\nKHNtLCBmaWVsZCwgcHJlRmx1c2gpOw0KICAgIH0NCg0KICAgIHB1YmxpYyBi\nb29sZWFuIGFzc2lnbk9iamVjdElkKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20s\nIGJvb2xlYW4gcHJlRmx1c2gpIHsNCiAgICAgICAgcmV0dXJuIF9tYXN0ZXIu\nYXNzaWduT2JqZWN0SWQoc20sIHByZUZsdXNoKTsNCiAgICB9DQoNCiAgICBw\ndWJsaWMgdm9pZCBiZWZvcmVTdGF0ZUNoYW5nZShPcGVuSlBBU3RhdGVNYW5h\nZ2VyIHNtLCBQQ1N0YXRlIGZyb21TdGF0ZSwNCiAgICAgICAgICAgIFBDU3Rh\ndGUgdG9TdGF0ZSkgew0KICAgICAgICBfbWFzdGVyLmJlZm9yZVN0YXRlQ2hh\nbmdlKHNtLCBmcm9tU3RhdGUsIHRvU3RhdGUpOw0KICAgIH0NCg0KICAgIHB1\nYmxpYyB2b2lkIGJlZ2luT3B0aW1pc3RpYygpIHsNCiAgICAgICAgZm9yIChT\nbGljZVN0b3JlTWFuYWdlciBzbGljZSA6IF9zbGljZXMpDQogICAgICAgICAg\nICBzbGljZS5iZWdpbk9wdGltaXN0aWMoKTsNCiAgICB9DQoNCiAgICBwdWJs\naWMgYm9vbGVhbiBjYW5jZWxBbGwoKSB7DQogICAgICAgIGJvb2xlYW4gcmV0\nID0gdHJ1ZTsNCiAgICAgICAgZm9yIChTbGljZVN0b3JlTWFuYWdlciBzbGlj\nZSA6IF9zbGljZXMpDQogICAgICAgICAgICByZXQgPSBzbGljZS5jYW5jZWxB\nbGwoKSAmIHJldDsNCiAgICAgICAgcmV0dXJuIHJldDsNCiAgICB9DQoNCiAg\nICBwdWJsaWMgaW50IGNvbXBhcmVWZXJzaW9uKE9wZW5KUEFTdGF0ZU1hbmFn\nZXIgc20sIE9iamVjdCB2MSwgT2JqZWN0IHYyKSB7DQogICAgICAgIHJldHVy\nbiBzZWxlY3RTdG9yZShzbSwgbnVsbCkuY29tcGFyZVZlcnNpb24oc20sIHYx\nLCB2Mik7DQogICAgfQ0KDQogICAgcHVibGljIE9iamVjdCBjb3B5RGF0YVN0\nb3JlSWQoT2JqZWN0IG9pZCwgQ2xhc3NNZXRhRGF0YSBtZXRhKSB7DQogICAg\nICAgIHJldHVybiBfbWFzdGVyLmNvcHlEYXRhU3RvcmVJZChvaWQsIG1ldGEp\nOw0KICAgIH0NCg0KICAgIHB1YmxpYyBSZXN1bHRPYmplY3RQcm92aWRlciBl\neGVjdXRlRXh0ZW50KENsYXNzTWV0YURhdGEgbWV0YSwNCiAgICAgICAgICAg\nIGJvb2xlYW4gc3ViY2xhc3NlcywgRmV0Y2hDb25maWd1cmF0aW9uIGZldGNo\nKSB7DQogICAgICAgIGludCBpID0gMDsNCiAgICAgICAgTGlzdDxTbGljZVN0\nb3JlTWFuYWdlcj4gdGFyZ2V0cyA9IGdldFRhcmdldHMoZmV0Y2gpOw0KICAg\nICAgICBSZXN1bHRPYmplY3RQcm92aWRlcltdIHRtcCA9IG5ldyBSZXN1bHRP\nYmplY3RQcm92aWRlclt0YXJnZXRzLnNpemUoKV07DQogICAgICAgIGZvciAo\nU2xpY2VTdG9yZU1hbmFnZXIgc2xpY2UgOiB0YXJnZXRzKSB7DQogICAgICAg\nICAgICB0bXBbaSsrXSA9IHNsaWNlLmV4ZWN1dGVFeHRlbnQobWV0YSwgc3Vi\nY2xhc3NlcywgZmV0Y2gpOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBu\nZXcgTWVyZ2VkUmVzdWx0T2JqZWN0UHJvdmlkZXIodG1wKTsNCiAgICB9DQoN\nCiAgICBwdWJsaWMgYm9vbGVhbiBleGlzdHMoT3BlbkpQQVN0YXRlTWFuYWdl\nciBzbSwgT2JqZWN0IGVkYXRhKSB7DQogICAgICAgIGZvciAoU2xpY2VTdG9y\nZU1hbmFnZXIgc2xpY2UgOiBfc2xpY2VzKSB7DQogICAgICAgICAgICBpZiAo\nc2xpY2UuZXhpc3RzKHNtLCBlZGF0YSkpIHsNCiAgICAgICAgICAgICAgICBz\nbS5zZXRJbXBsRGF0YShzbGljZS5nZXROYW1lKCksIHRydWUpOw0KICAgICAg\nICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAg\nICB9DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQoNCiAgICANCiAg\nICAvKioNCiAgICAgKiBGbHVzaCB0aGUgZ2l2ZW4gU3RhdGVNYW5hZ2VycyBh\nZnRlciBiaW5uaW5nIHRoZW0gdG8gcmVzcGVjdGl2ZSBwaHlzaWNhbA0KICAg\nICAqIHNsaWNlcy4NCiAgICAgKi8NCiAgICBwdWJsaWMgQ29sbGVjdGlvbiBm\nbHVzaChDb2xsZWN0aW9uIHNtcykgew0KICAgICAgICBDb2xsZWN0aW9uIGV4\nY2VwdGlvbnMgPSBuZXcgQXJyYXlMaXN0KCk7DQogICAgICAgIExpc3Q8RnV0\ndXJlPENvbGxlY3Rpb24+PiBmdXR1cmVzID0gbmV3IEFycmF5TGlzdDxGdXR1\ncmU8Q29sbGVjdGlvbj4+KCk7DQogICAgICAgIE1hcDxTdHJpbmcsIExpc3Q8\nT3BlbkpQQVN0YXRlTWFuYWdlcj4+IHN1YnNldHMgPSBiaW4oc21zLCBudWxs\nKTsNCiAgICAgICAgZm9yIChTbGljZVN0b3JlTWFuYWdlciBzbGljZSA6IF9z\nbGljZXMpIHsNCiAgICAgICAgICAgIExpc3Q8T3BlbkpQQVN0YXRlTWFuYWdl\ncj4gc3Vic2V0ID0gc3Vic2V0cy5nZXQoc2xpY2UuZ2V0TmFtZSgpKTsNCiAg\nICAgICAgICAgIGlmIChzdWJzZXQuaXNFbXB0eSgpKQ0KICAgICAgICAgICAg\nICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgZnV0dXJlcy5hZGQodGhyZWFk\nUG9vbC5zdWJtaXQobmV3IEZsdXNoZXIoc2xpY2UsIHN1YnNldCkpKTsNCiAg\nICAgICAgfQ0KICAgICAgICBmb3IgKEZ1dHVyZTxDb2xsZWN0aW9uPiBmdXR1\ncmUgOiBmdXR1cmVzKSB7DQogICAgICAgICAgICBDb2xsZWN0aW9uIGVycm9y\nOw0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBlcnJvciA9\nIGZ1dHVyZS5nZXQoKTsNCiAgICAgICAgICAgICAgICBpZiAoIShlcnJvciA9\nPSBudWxsIHx8IGVycm9yLmlzRW1wdHkoKSkpIHsNCiAgICAgICAgICAgICAg\nICAgICAgZXhjZXB0aW9ucy5hZGRBbGwoZXJyb3IpOw0KICAgICAgICAgICAg\nICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKEludGVycnVwdGVkRXhjZXB0\naW9uIGUpIHsNCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU3RvcmVFeGNl\ncHRpb24oZSk7DQogICAgICAgICAgICB9IGNhdGNoIChFeGVjdXRpb25FeGNl\ncHRpb24gZSkgew0KICAgICAgICAgICAgICAgIHRocm93IG5ldyBTdG9yZUV4\nY2VwdGlvbihlLmdldENhdXNlKCkpOw0KICAgICAgICAgICAgfQ0KICAgICAg\nICB9DQogICAgICAgIHJldHVybiBleGNlcHRpb25zOw0KICAgIH0NCiAgICAN\nCiAgICAvKioNCiAgICAgKiBTZXBhcmF0ZSB0aGUgZ2l2ZW4gbGlzdCBvZiBT\ndGF0ZU1hbmFnZXJzIGluIHNlcGFyYXRlIGxpc3RzIGZvciBlYWNoIHNsaWNl\nIA0KICAgICAqIGJ5IHRoZSBhc3NvY2lhdGVkIHNsaWNlIGlkZW50aWZpZXIg\nb2YgZWFjaCBTdGF0ZU1hbmFnZXIuDQogICAgICogQHBhcmFtIHNtcw0KICAg\nICAqIEBwYXJhbSBlZGF0YQ0KICAgICAqIEByZXR1cm4NCiAgICAgKi8NCiAg\nICBwcml2YXRlIE1hcDxTdHJpbmcsIExpc3Q8T3BlbkpQQVN0YXRlTWFuYWdl\ncj4+IGJpbigNCiAgICAgICAgICAgIENvbGxlY3Rpb24vKjxTdGF0ZU1hbmFn\nZT4qLyBzbXMsIE9iamVjdCBlZGF0YSkgew0KICAgICAgICBNYXA8U3RyaW5n\nLCBMaXN0PE9wZW5KUEFTdGF0ZU1hbmFnZXI+PiBzdWJzZXRzID0NCiAgICAg\nICAgICAgICAgICBuZXcgSGFzaE1hcDxTdHJpbmcsIExpc3Q8T3BlbkpQQVN0\nYXRlTWFuYWdlcj4+KCk7DQogICAgICAgIGZvciAoU2xpY2VTdG9yZU1hbmFn\nZXIgc2xpY2UgOiBfc2xpY2VzKQ0KICAgICAgICAgICAgc3Vic2V0cy5wdXQo\nc2xpY2UuZ2V0TmFtZSgpLCBuZXcgQXJyYXlMaXN0PE9wZW5KUEFTdGF0ZU1h\nbmFnZXI+KCkpOw0KICAgICAgICBmb3IgKE9iamVjdCB4IDogc21zKSB7DQog\nICAgICAgICAgICBPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtID0gKE9wZW5KUEFT\ndGF0ZU1hbmFnZXIpIHg7DQogICAgICAgICAgICBTdHJpbmcgc2xpY2UgPSBm\naW5kU2xpY2VOYW1lKHNtLCBlZGF0YSk7DQogICAgICAgICAgICBzdWJzZXRz\nLmdldChzbGljZSkuYWRkKHNtKTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1\ncm4gc3Vic2V0czsNCiAgICB9DQoNCiAgICBwdWJsaWMgT2JqZWN0IGdldENs\naWVudENvbm5lY3Rpb24oKSB7DQogICAgICAgIHRocm93IG5ldyBVbnN1cHBv\ncnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOw0KICAgIH0NCg0KICAgIHB1Ymxp\nYyBTZXEgZ2V0RGF0YVN0b3JlSWRTZXF1ZW5jZShDbGFzc01ldGFEYXRhIGZv\nckNsYXNzKSB7DQogICAgICAgIHJldHVybiBfbWFzdGVyLmdldERhdGFTdG9y\nZUlkU2VxdWVuY2UoZm9yQ2xhc3MpOw0KICAgIH0NCg0KICAgIHB1YmxpYyBD\nbGFzcyBnZXREYXRhU3RvcmVJZFR5cGUoQ2xhc3NNZXRhRGF0YSBtZXRhKSB7\nDQogICAgICAgIHJldHVybiBfbWFzdGVyLmdldERhdGFTdG9yZUlkVHlwZSht\nZXRhKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgQ2xhc3MgZ2V0TWFuYWdlZFR5\ncGUoT2JqZWN0IG9pZCkgew0KICAgICAgICByZXR1cm4gX21hc3Rlci5nZXRN\nYW5hZ2VkVHlwZShvaWQpOw0KICAgIH0NCg0KICAgIHB1YmxpYyBTZXEgZ2V0\nVmFsdWVTZXF1ZW5jZShGaWVsZE1ldGFEYXRhIGZvckZpZWxkKSB7DQogICAg\nICAgIHJldHVybiBfbWFzdGVyLmdldFZhbHVlU2VxdWVuY2UoZm9yRmllbGQp\nOw0KICAgIH0NCg0KICAgIHB1YmxpYyBib29sZWFuIGluaXRpYWxpemUoT3Bl\nbkpQQVN0YXRlTWFuYWdlciBzbSwgUENTdGF0ZSBzdGF0ZSwNCiAgICAgICAg\nICAgIEZldGNoQ29uZmlndXJhdGlvbiBmZXRjaCwgT2JqZWN0IGVkYXRhKSB7\nDQogICAgICAgIGlmIChlZGF0YSBpbnN0YW5jZW9mIENvbm5lY3Rpb25JbmZv\nKSB7DQogICAgICAgICAgICBTdHJpbmcgc2xpY2UgPSBmaW5kU2xpY2VOYW1l\nKHNtLCAoQ29ubmVjdGlvbkluZm8pIGVkYXRhKTsNCiAgICAgICAgICAgIGlm\nIChzbGljZSAhPSBudWxsKQ0KICAgICAgICAgICAgICAgIHJldHVybiBsb29r\ndXAoc2xpY2UpLmluaXRpYWxpemUoc20sIHN0YXRlLCBmZXRjaCwgZWRhdGEp\nOw0KICAgICAgICB9DQogICAgICAgIC8vIG5vdCBhIHBhcnQgb2YgUXVlcnkg\ncmVzdWx0IGxvYWQuIExvb2sgaW50byB0aGUgc2xpY2VzIHRpbGwgZm91bmQN\nCiAgICAgICAgTGlzdDxTbGljZVN0b3JlTWFuYWdlcj4gdGFyZ2V0cyA9IGdl\ndFRhcmdldHMoZmV0Y2gpOw0KICAgICAgICBmb3IgKFNsaWNlU3RvcmVNYW5h\nZ2VyIHNsaWNlIDogdGFyZ2V0cykgew0KICAgICAgICAgICAgaWYgKHNsaWNl\nLmluaXRpYWxpemUoc20sIHN0YXRlLCBmZXRjaCwgZWRhdGEpKSB7DQogICAg\nICAgICAgICAgICAgc20uc2V0SW1wbERhdGEoc2xpY2UuZ2V0TmFtZSgpLCB0\ncnVlKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAg\nICAgIH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gZmFsc2U7DQoNCiAg\nICB9DQoNCiAgICBwdWJsaWMgYm9vbGVhbiBsb2FkKE9wZW5KUEFTdGF0ZU1h\nbmFnZXIgc20sIEJpdFNldCBmaWVsZHMsDQogICAgICAgICAgICBGZXRjaENv\nbmZpZ3VyYXRpb24gZmV0Y2gsIGludCBsb2NrTGV2ZWwsIE9iamVjdCBlZGF0\nYSkgew0KICAgICAgICByZXR1cm4gc2VsZWN0U3RvcmUoc20sIGVkYXRhKS5s\nb2FkKHNtLCBmaWVsZHMsIGZldGNoLCBsb2NrTGV2ZWwsIGVkYXRhKTsNCiAg\nICB9DQoNCiAgICBwdWJsaWMgQ29sbGVjdGlvbiBsb2FkQWxsKENvbGxlY3Rp\nb24gc21zLCBQQ1N0YXRlIHN0YXRlLCBpbnQgbG9hZCwNCiAgICAgICAgICAg\nIEZldGNoQ29uZmlndXJhdGlvbiBmZXRjaCwgT2JqZWN0IGVkYXRhKSB7DQog\nICAgICAgIE1hcDxTdHJpbmcsIExpc3Q8T3BlbkpQQVN0YXRlTWFuYWdlcj4+\nIHN1YnNldHMgPSBiaW4oc21zLCBlZGF0YSk7DQogICAgICAgIENvbGxlY3Rp\nb24gcmVzdWx0ID0gbmV3IEFycmF5TGlzdCgpOw0KICAgICAgICBmb3IgKFNs\naWNlU3RvcmVNYW5hZ2VyIHNsaWNlIDogX3NsaWNlcykgew0KICAgICAgICAg\nICAgTGlzdDxPcGVuSlBBU3RhdGVNYW5hZ2VyPiBzdWJzZXQgPSBzdWJzZXRz\nLmdldChzbGljZS5nZXROYW1lKCkpOw0KICAgICAgICAgICAgaWYgKHN1YnNl\ndC5pc0VtcHR5KCkpDQogICAgICAgICAgICAgICAgY29udGludWU7DQogICAg\nICAgICAgICBDb2xsZWN0aW9uIHRtcCA9IHNsaWNlLmxvYWRBbGwoc3Vic2V0\nLCBzdGF0ZSwgbG9hZCwgZmV0Y2gsIGVkYXRhKTsNCiAgICAgICAgICAgIGlm\nICh0bXAgIT0gbnVsbCAmJiAhdG1wLmlzRW1wdHkoKSkNCiAgICAgICAgICAg\nICAgICByZXN1bHQuYWRkQWxsKHRtcCk7DQogICAgICAgIH0NCiAgICAgICAg\ncmV0dXJuIHJlc3VsdDsNCiAgICB9DQoNCiAgICBwdWJsaWMgT2JqZWN0IG5l\nd0RhdGFTdG9yZUlkKE9iamVjdCBvaWRWYWwsIENsYXNzTWV0YURhdGEgbWV0\nYSkgew0KICAgICAgICByZXR1cm4gX21hc3Rlci5uZXdEYXRhU3RvcmVJZChv\naWRWYWwsIG1ldGEpOw0KICAgIH0NCg0KICAgIHB1YmxpYyBGZXRjaENvbmZp\nZ3VyYXRpb24gbmV3RmV0Y2hDb25maWd1cmF0aW9uKCkgew0KICAgICAgICBy\nZXR1cm4gX21hc3Rlci5uZXdGZXRjaENvbmZpZ3VyYXRpb24oKTsNCiAgICB9\nDQoNCiAgICAvKioNCiAgICAgKiBDb25zdHJ1Y3QgYSBkaXN0cmlidXRlZCBx\ndWVyeSB0byBiZSBleGVjdXRlZCBhZ2FpbnN0IGFsbCB0aGUgc2xpY2VzLg0K\nICAgICAqLw0KICAgIHB1YmxpYyBTdG9yZVF1ZXJ5IG5ld1F1ZXJ5KFN0cmlu\nZyBsYW5ndWFnZSkgew0KICAgICAgICBFeHByZXNzaW9uUGFyc2VyIHBhcnNl\nciA9IFF1ZXJ5TGFuZ3VhZ2VzLnBhcnNlckZvckxhbmd1YWdlKGxhbmd1YWdl\nKTsNCiAgICAgICAgRGlzdHJpYnV0ZWRTdG9yZVF1ZXJ5IHJldCA9IG5ldyBE\naXN0cmlidXRlZFN0b3JlUXVlcnkodGhpcywgcGFyc2VyKTsNCiAgICAgICAg\nZm9yIChTbGljZVN0b3JlTWFuYWdlciBzbGljZSA6IF9zbGljZXMpIHsNCiAg\nICAgICAgICAgIHJldC5hZGQoc2xpY2UubmV3UXVlcnkobGFuZ3VhZ2UpKTsN\nCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gcmV0Ow0KICAgIH0NCg0KICAg\nIC8qKg0KICAgICAqIFNldHMgdGhlIGNvbnRleHQgZm9yIHRoaXMgcmVjZWl2\nZXIgYW5kIGFsbCBpdHMgdW5kZXJseWluZyBzbGljZXMuDQogICAgICovDQog\nICAgcHVibGljIHZvaWQgc2V0Q29udGV4dChTdG9yZUNvbnRleHQgY3R4KSB7\nDQogICAgICAgIHN1cGVyLnNldENvbnRleHQoY3R4KTsNCiAgICAgICAgZm9y\nIChTbGljZVN0b3JlTWFuYWdlciBzdG9yZSA6IF9zbGljZXMpIHsNCiAgICAg\nICAgICAgIHN0b3JlLnNldENvbnRleHQoY3R4LCANCiAgICAgICAgICAgICAg\nICAgICAgKEpEQkNDb25maWd1cmF0aW9uKXN0b3JlLmdldFNsaWNlKCkuZ2V0\nQ29uZmlndXJhdGlvbigpKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHBy\naXZhdGUgU2xpY2VTdG9yZU1hbmFnZXIgbG9va3VwKFN0cmluZyBuYW1lKSB7\nDQogICAgICAgIGZvciAoU2xpY2VTdG9yZU1hbmFnZXIgc2xpY2UgOiBfc2xp\nY2VzKQ0KICAgICAgICAgICAgaWYgKHNsaWNlLmdldE5hbWUoKS5lcXVhbHMo\nbmFtZSkpDQogICAgICAgICAgICAgICAgcmV0dXJuIHNsaWNlOw0KICAgICAg\nICByZXR1cm4gbnVsbDsNCiAgICB9DQoNCiAgICBwdWJsaWMgYm9vbGVhbiBz\neW5jVmVyc2lvbihPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBPYmplY3QgZWRh\ndGEpIHsNCiAgICAgICAgcmV0dXJuIHNlbGVjdFN0b3JlKHNtLCBlZGF0YSku\nc3luY1ZlcnNpb24oc20sIGVkYXRhKTsNCiAgICB9DQoNCiAgICBAT3ZlcnJp\nZGUNCiAgICBwcm90ZWN0ZWQgUmVmQ291bnRDb25uZWN0aW9uIGNvbm5lY3RJ\nbnRlcm5hbCgpIHRocm93cyBTUUxFeGNlcHRpb24gew0KICAgICAgICBMaXN0\nPENvbm5lY3Rpb24+IGxpc3QgPSBuZXcgQXJyYXlMaXN0PENvbm5lY3Rpb24+\nKCk7DQogICAgICAgIGZvciAoU2xpY2VTdG9yZU1hbmFnZXIgc2xpY2UgOiBf\nc2xpY2VzKQ0KICAgICAgICAgICAgbGlzdC5hZGQoc2xpY2UuZ2V0Q29ubmVj\ndGlvbigpKTsNCiAgICAgICAgRGlzdHJpYnV0ZWRDb25uZWN0aW9uIGNvbiA9\nIG5ldyBEaXN0cmlidXRlZENvbm5lY3Rpb24obGlzdCk7DQogICAgICAgIHJl\ndHVybiBuZXcgUmVmQ291bnRDb25uZWN0aW9uKGNvbik7DQogICAgfQ0KICAg\nIA0KICAgIC8qKg0KICAgICAqIEdldHMgdGhlIGxpc3Qgb2Ygc2xpY2VzIG1l\nbnRpb25lZCBhcyAgDQogICAgICoge0BsaW5rIFByb2R1Y3REZXJpdmF0aW9u\nI0hJTlRfVEFSR0VUIGhpbnR9IG9mIHRoZSBnaXZlbg0KICAgICAqIHtAbGlu\nayBGZXRjaENvbmZpZ3VyYXRpb24jZ2V0SGludChTdHJpbmcpIGZldGNoIGNv\nbmZpZ3VyYXRpb259LiANCiAgICAgKiANCiAgICAgKiBAcmV0dXJuIGFsbCBh\nY3RpdmUgc2xpY2VzIGlmIGEpIHRoZSBoaW50IGlzIG5vdCBzcGVjaWZpZWQg\nb3IgYikgYSBudWxsIA0KICAgICAqIHZhbHVlIG9yIGMpIGEgbm9uLVN0cmlu\nZyBvciBkKSBtYXRjaGVzIG5vIGFjdGl2ZSBzbGljZS4NCiAgICAgKi8NCiAg\nICBMaXN0PFNsaWNlU3RvcmVNYW5hZ2VyPiBnZXRUYXJnZXRzKEZldGNoQ29u\nZmlndXJhdGlvbiBmZXRjaCkgew0KICAgICAgICBpZiAoZmV0Y2ggPT0gbnVs\nbCkNCiAgICAgICAgICAgIHJldHVybiBfc2xpY2VzOw0KICAgICAgICBPYmpl\nY3QgaGludCA9IGZldGNoLmdldEhpbnQoUHJvZHVjdERlcml2YXRpb24uSElO\nVF9UQVJHRVQpOw0KICAgICAgICBpZiAoaGludCA9PSBudWxsIHx8ICEoaGlu\ndCBpbnN0YW5jZW9mIFN0cmluZykpIA0KICAgICAgICAgICAgcmV0dXJuIF9z\nbGljZXM7DQogICAgICAgIExpc3Q8U3RyaW5nPiB0YXJnZXROYW1lcyA9IEFy\ncmF5cy5hc0xpc3QoaGludC50b1N0cmluZygpLnNwbGl0KCJcXCwiKSk7DQog\nICAgICAgIExpc3Q8U2xpY2VTdG9yZU1hbmFnZXI+IHRhcmdldHMgPSBuZXcg\nQXJyYXlMaXN0PFNsaWNlU3RvcmVNYW5hZ2VyPigpOw0KICAgICAgICBmb3Ig\nKFNsaWNlU3RvcmVNYW5hZ2VyIHNsaWNlIDogX3NsaWNlcykgew0KICAgICAg\nICAgICBpZiAodGFyZ2V0TmFtZXMuY29udGFpbnMoc2xpY2UuZ2V0TmFtZSgp\nKSkNCiAgICAgICAgICAgICAgdGFyZ2V0cy5hZGQoc2xpY2UpOw0KICAgICAg\nICAgICB9DQogICAgICAgICAgaWYgKHRhcmdldHMuaXNFbXB0eSgpKQ0KICAg\nICAgICAgICAgcmV0dXJuIF9zbGljZXM7DQogICAgICAgIHJldHVybiB0YXJn\nZXRzOw0KICAgIH0NCiAgICANCiAgICB2b2lkIGxvZyhTdHJpbmcgcykgew0K\nICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIlsiK1RocmVhZC5jdXJyZW50\nVGhyZWFkKCkuZ2V0TmFtZSgpKyJdICIgKyB0aGlzICsgcyk7DQogICAgfQ0K\nDQogICAgcHJpdmF0ZSBzdGF0aWMgY2xhc3MgRmx1c2hlciBpbXBsZW1lbnRz\nIENhbGxhYmxlPENvbGxlY3Rpb24+IHsNCiAgICAgICAgZmluYWwgU2xpY2VT\ndG9yZU1hbmFnZXIgc3RvcmU7DQogICAgICAgIGZpbmFsIENvbGxlY3Rpb24g\ndG9GbHVzaDsNCg0KICAgICAgICBGbHVzaGVyKFNsaWNlU3RvcmVNYW5hZ2Vy\nIHN0b3JlLCBDb2xsZWN0aW9uIHRvRmx1c2gpIHsNCiAgICAgICAgICAgIHRo\naXMuc3RvcmUgPSBzdG9yZTsNCiAgICAgICAgICAgIHRoaXMudG9GbHVzaCA9\nIHRvRmx1c2g7DQogICAgICAgIH0NCg0KICAgICAgICBwdWJsaWMgQ29sbGVj\ndGlvbiBjYWxsKCkgdGhyb3dzIEV4Y2VwdGlvbiB7DQogICAgICAgICAgICBy\nZXR1cm4gc3RvcmUuZmx1c2godG9GbHVzaCk7DQogICAgICAgIH0NCiAgICB9\nDQoNCn0NCg==\n","encoding":"base64"}

