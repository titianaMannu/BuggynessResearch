{"sha":"ca066c72324c30a050a3073e4877505090e4d33d","node_id":"MDQ6QmxvYjIwNjM2NDpjYTA2NmM3MjMyNGMzMGEwNTBhMzA3M2U0ODc3NTA1MDkwZTRkMzNk","size":7731,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/ca066c72324c30a050a3073e4877505090e4d33d","content":"LyoqCiAqICBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5k\nYXRpb24gKEFTRikgdW5kZXIgb25lIG9yIG1vcmUKICogIGNvbnRyaWJ1dG9y\nIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUgZGlz\ndHJpYnV0ZWQgd2l0aAogKiAgdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGlu\nZm9ybWF0aW9uIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLgogKiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUgdG8gWW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAKICogICh0aGUgIkxpY2Vuc2Ui\nKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxp\nYW5jZSB3aXRoCiAqICB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEg\nY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgaHR0cDovL3d3dy5h\ncGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqICBVbmxlc3Mg\ncmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdy\naXRpbmcsIHNvZnR3YXJlCiAqICBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGlj\nZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiAg\nV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQs\nIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqICBTZWUgdGhlIExpY2Vu\nc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlz\nc2lvbnMgYW5kCiAqICBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4K\nICovCnBhY2thZ2Ugb3JnLmFwYWNoZS5vcGVuanBhLmludGVncmF0aW9uLmRh\neXRyYWRlcjsKCmltcG9ydCBqYXZhLmlvLlNlcmlhbGl6YWJsZTsKaW1wb3J0\nIGphdmEubWF0aC5CaWdEZWNpbWFsOwppbXBvcnQgamF2YS51dGlsLkRhdGU7\nCgppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuQ29sdW1uOwppbXBvcnQgamF2\nYXgucGVyc2lzdGVuY2UuRW50aXR5OwppbXBvcnQgamF2YXgucGVyc2lzdGVu\nY2UuRmV0Y2hUeXBlOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuR2VuZXJh\ndGVkVmFsdWU7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5HZW5lcmF0aW9u\nVHlwZTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLklkOwppbXBvcnQgamF2\nYXgucGVyc2lzdGVuY2UuSm9pbkNvbHVtbjsKaW1wb3J0IGphdmF4LnBlcnNp\nc3RlbmNlLk1hbnlUb09uZTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLk5h\nbWVkUXVlcmllczsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLk5hbWVkUXVl\ncnk7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5UYWJsZTsKaW1wb3J0IGph\ndmF4LnBlcnNpc3RlbmNlLlRhYmxlR2VuZXJhdG9yOwppbXBvcnQgamF2YXgu\ncGVyc2lzdGVuY2UuVGVtcG9yYWw7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5j\nZS5UZW1wb3JhbFR5cGU7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5UcmFu\nc2llbnQ7CgovLyBpbXBvcnQgb3JnLmFwYWNoZS5nZXJvbmltby5zYW1wbGVz\nLmRheXRyYWRlci51dGlsLkxvZzsKLy8gaW1wb3J0IG9yZy5hcGFjaGUuZ2Vy\nb25pbW8uc2FtcGxlcy5kYXl0cmFkZXIudXRpbC5UcmFkZUNvbmZpZzsKCkBF\nbnRpdHkobmFtZSA9ICJob2xkaW5nZWpiIikKQFRhYmxlKG5hbWUgPSAiaG9s\nZGluZ2VqYiIpCkBOYW1lZFF1ZXJpZXMoIHsKICAgICAgICBATmFtZWRRdWVy\neShuYW1lID0gImhvbGRpbmdlamIuZmluZEJ5UHVyY2hhc2VwcmljZSIsIHF1\nZXJ5ID0gIlNFTEVDVCBoIEZST00gaG9sZGluZ2VqYiBoIFdIRVJFIGgucHVy\nY2hhc2VQcmljZSA9IDpwdXJjaGFzZXByaWNlIiksCiAgICAgICAgQE5hbWVk\nUXVlcnkobmFtZSA9ICJob2xkaW5nZWpiLmZpbmRCeUhvbGRpbmdpZCIsIHF1\nZXJ5ID0gIlNFTEVDVCBoIEZST00gaG9sZGluZ2VqYiBoIFdIRVJFIGguaG9s\nZGluZ0lEID0gOmhvbGRpbmdpZCIpLAogICAgICAgIEBOYW1lZFF1ZXJ5KG5h\nbWUgPSAiaG9sZGluZ2VqYi5maW5kQnlRdWFudGl0eSIsIHF1ZXJ5ID0gIlNF\nTEVDVCBoIEZST00gaG9sZGluZ2VqYiBoIFdIRVJFIGgucXVhbnRpdHkgPSA6\ncXVhbnRpdHkiKSwKICAgICAgICBATmFtZWRRdWVyeShuYW1lID0gImhvbGRp\nbmdlamIuZmluZEJ5UHVyY2hhc2VkYXRlIiwgcXVlcnkgPSAiU0VMRUNUIGgg\nRlJPTSBob2xkaW5nZWpiIGggV0hFUkUgaC5wdXJjaGFzZURhdGUgPSA6cHVy\nY2hhc2VkYXRlIiksCiAgICAgICAgQE5hbWVkUXVlcnkobmFtZSA9ICJob2xk\naW5nZWpiLmhvbGRpbmdzQnlVc2VySUQiLCBxdWVyeSA9ICJTRUxFQ1QgaCBG\nUk9NIGhvbGRpbmdlamIgaCB3aGVyZSBoLmFjY291bnQucHJvZmlsZS51c2Vy\nSUQgPSA6dXNlcklEIikKICAgIH0pCnB1YmxpYyBjbGFzcyBIb2xkaW5nRGF0\nYUJlYW4gaW1wbGVtZW50cyBTZXJpYWxpemFibGUgewoKICAgIHByaXZhdGUg\nc3RhdGljIGZpbmFsIGxvbmcgc2VyaWFsVmVyc2lvblVJRCA9IDQ3NzkyOTM2\nNTI0MzQ4MjMyODBMOwoKICAgIC8qIHBlcnNpc3RlbnQvcmVsYXRpb25zaGlw\nIGZpZWxkcyAqLwoKICAgIEBUYWJsZUdlbmVyYXRvcigKICAgICAgICAgICAg\nbmFtZT0iaG9sZGluZ0lkR2VuIiwKICAgICAgICAgICAgdGFibGU9IktFWUdF\nTkVKQiIsCiAgICAgICAgICAgIHBrQ29sdW1uTmFtZT0iS0VZTkFNRSIsCiAg\nICAgICAgICAgIHZhbHVlQ29sdW1uTmFtZT0iS0VZVkFMIiwKICAgICAgICAg\nICAgcGtDb2x1bW5WYWx1ZT0iaG9sZGluZyIsCiAgICAgICAgICAgIGFsbG9j\nYXRpb25TaXplPTEwMDApCiAgICBASWQKICAgIEBHZW5lcmF0ZWRWYWx1ZShz\ndHJhdGVneT1HZW5lcmF0aW9uVHlwZS5UQUJMRSwgZ2VuZXJhdG9yPSJob2xk\naW5nSWRHZW4iKQogICAgQENvbHVtbihuYW1lID0gIkhPTERJTkdJRCIsIG51\nbGxhYmxlID0gZmFsc2UpCiAgICBwcml2YXRlIEludGVnZXIgaG9sZGluZ0lE\nOyAgICAgICAgICAgICAgLyogaG9sZGluZ0lEICovCiAgICAKICAgIEBDb2x1\nbW4obmFtZSA9ICJRVUFOVElUWSIsIG51bGxhYmxlID0gZmFsc2UpCiAgICBw\ncml2YXRlIGRvdWJsZSBxdWFudGl0eTsgICAgICAgICAgICAgICAgLyogcXVh\nbnRpdHkgKi8KICAgIAogICAgQENvbHVtbihuYW1lID0gIlBVUkNIQVNFUFJJ\nQ0UiKQogICAgcHJpdmF0ZSBCaWdEZWNpbWFsIHB1cmNoYXNlUHJpY2U7ICAg\nICAgIC8qIHB1cmNoYXNlUHJpY2UgKi8KICAgIAogICAgQENvbHVtbihuYW1l\nID0gIlBVUkNIQVNFREFURSIpCiAgICBAVGVtcG9yYWwoVGVtcG9yYWxUeXBl\nLlRJTUVTVEFNUCkKICAgIHByaXZhdGUgRGF0ZSBwdXJjaGFzZURhdGU7ICAg\nICAgICAgICAgICAvKiBwdXJjaGFzZURhdGUgKi8KICAgIAogICAgQFRyYW5z\naWVudAogICAgcHJpdmF0ZSBTdHJpbmcgcXVvdGVJRDsgICAgICAgICAgICAg\nICAgIC8qIEhvbGRpbmcoKikgIC0tLT4gUXVvdGUoMSkgKi8KICAgIAogICAg\nQE1hbnlUb09uZShmZXRjaD1GZXRjaFR5cGUuTEFaWSkKICAgIEBKb2luQ29s\ndW1uKG5hbWU9IkFDQ09VTlRfQUNDT1VOVElEIikKICAgIHByaXZhdGUgQWNj\nb3VudERhdGFCZWFuIGFjY291bnQ7CiAgICAKICAgIEBNYW55VG9PbmUoZmV0\nY2g9RmV0Y2hUeXBlLkVBR0VSKQogICAgQEpvaW5Db2x1bW4obmFtZSA9ICJR\nVU9URV9TWU1CT0wiKQogICAgcHJpdmF0ZSBRdW90ZURhdGFCZWFuIHF1b3Rl\nOwoKLy8gICAgQFZlcnNpb24KLy8gICAgcHJpdmF0ZSBJbnRlZ2VyIG9wdExv\nY2s7CgogICAgcHVibGljIEhvbGRpbmdEYXRhQmVhbigpIHsKICAgIH0KCiAg\nICBwdWJsaWMgSG9sZGluZ0RhdGFCZWFuKEludGVnZXIgaG9sZGluZ0lELAog\nICAgICAgICAgICBkb3VibGUgcXVhbnRpdHksCiAgICAgICAgICAgIEJpZ0Rl\nY2ltYWwgcHVyY2hhc2VQcmljZSwKICAgICAgICAgICAgRGF0ZSBwdXJjaGFz\nZURhdGUsCiAgICAgICAgICAgIFN0cmluZyBxdW90ZUlEKSB7CiAgICAgICAg\nc2V0SG9sZGluZ0lEKGhvbGRpbmdJRCk7CiAgICAgICAgc2V0UXVhbnRpdHko\ncXVhbnRpdHkpOwogICAgICAgIHNldFB1cmNoYXNlUHJpY2UocHVyY2hhc2VQ\ncmljZSk7CiAgICAgICAgc2V0UHVyY2hhc2VEYXRlKHB1cmNoYXNlRGF0ZSk7\nCiAgICAgICAgc2V0UXVvdGVJRChxdW90ZUlEKTsKICAgIH0KCiAgICBwdWJs\naWMgSG9sZGluZ0RhdGFCZWFuKGRvdWJsZSBxdWFudGl0eSwKICAgICAgICAg\nICAgQmlnRGVjaW1hbCBwdXJjaGFzZVByaWNlLAogICAgICAgICAgICBEYXRl\nIHB1cmNoYXNlRGF0ZSwKICAgICAgICAgICAgQWNjb3VudERhdGFCZWFuIGFj\nY291bnQsCiAgICAgICAgICAgIFF1b3RlRGF0YUJlYW4gcXVvdGUpIHsKICAg\nICAgICBzZXRRdWFudGl0eShxdWFudGl0eSk7CiAgICAgICAgc2V0UHVyY2hh\nc2VQcmljZShwdXJjaGFzZVByaWNlKTsKICAgICAgICBzZXRQdXJjaGFzZURh\ndGUocHVyY2hhc2VEYXRlKTsKICAgICAgICBzZXRBY2NvdW50KGFjY291bnQp\nOwogICAgICAgIHNldFF1b3RlKHF1b3RlKTsKICAgIH0KCiAgICBwdWJsaWMg\nc3RhdGljIEhvbGRpbmdEYXRhQmVhbiBnZXRSYW5kb21JbnN0YW5jZSgpIHsK\nICAgICAgICByZXR1cm4gbmV3IEhvbGRpbmdEYXRhQmVhbigKICAgICAgICAg\nICAgICAgIG5ldyBJbnRlZ2VyKFRyYWRlQ29uZmlnLnJuZEludCgxMDAwMDAp\nKSwgICAgIC8vaG9sZGluZ0lECiAgICAgICAgICAgICAgICBUcmFkZUNvbmZp\nZy5ybmRRdWFudGl0eSgpLCAgICAgICAgICAgICAgICAgICAgIC8vcXVhbnRp\ndHkKICAgICAgICAgICAgICAgIFRyYWRlQ29uZmlnLnJuZEJpZ0RlY2ltYWwo\nMTAwMC4wZiksICAgICAgICAgICAgIC8vcHVyY2hhc2VQcmljZQogICAgICAg\nICAgICAgICAgbmV3IGphdmEudXRpbC5EYXRlKFRyYWRlQ29uZmlnLnJuZElu\ndChJbnRlZ2VyLk1BWF9WQUxVRSkpLCAvL3B1cmNoYXNlRGF0ZQogICAgICAg\nICAgICAgICAgVHJhZGVDb25maWcucm5kU3ltYm9sKCkgICAgICAgICAgICAg\nICAgICAgICAgICAvLyBzeW1ib2wKICAgICAgICApOwogICAgfQoKICAgIHB1\nYmxpYyBTdHJpbmcgdG9TdHJpbmcoKSB7CiAgICAgICAgcmV0dXJuICJcblx0\nSG9sZGluZyBEYXRhIGZvciBob2xkaW5nOiAiICsgZ2V0SG9sZGluZ0lEKCkK\nICAgICAgICAgICAgICAgICsgIlxuXHRcdCAgICAgIHF1YW50aXR5OiIgKyBn\nZXRRdWFudGl0eSgpCiAgICAgICAgICAgICAgICArICJcblx0XHQgcHVyY2hh\nc2VQcmljZToiICsgZ2V0UHVyY2hhc2VQcmljZSgpCiAgICAgICAgICAgICAg\nICArICJcblx0XHQgIHB1cmNoYXNlRGF0ZToiICsgZ2V0UHVyY2hhc2VEYXRl\nKCkKICAgICAgICAgICAgICAgICsgIlxuXHRcdCAgICAgICBxdW90ZUlEOiIg\nKyBnZXRRdW90ZUlEKCkKICAgICAgICAgICAgICAgIDsKICAgIH0KCiAgICBw\ndWJsaWMgU3RyaW5nIHRvSFRNTCgpIHsKICAgICAgICByZXR1cm4gIjxCUj5I\nb2xkaW5nIERhdGEgZm9yIGhvbGRpbmc6ICIgKyBnZXRIb2xkaW5nSUQoKSAr\nICI8L0I+IgogICAgICAgICAgICAgICAgKyAiPExJPiAgICAgIHF1YW50aXR5\nOiIgKyBnZXRRdWFudGl0eSgpICsgIjwvTEk+IgogICAgICAgICAgICAgICAg\nKyAiPExJPiBwdXJjaGFzZVByaWNlOiIgKyBnZXRQdXJjaGFzZVByaWNlKCkg\nKyAiPC9MST4iCiAgICAgICAgICAgICAgICArICI8TEk+ICBwdXJjaGFzZURh\ndGU6IiArIGdldFB1cmNoYXNlRGF0ZSgpICsgIjwvTEk+IgogICAgICAgICAg\nICAgICAgKyAiPExJPiAgICAgICBxdW90ZUlEOiIgKyBnZXRRdW90ZUlEKCkg\nKyAiPC9MST4iCiAgICAgICAgICAgICAgICA7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgcHJpbnQoKSB7CiAgICAgICAgLy8gTG9nLmxvZyh0aGlzLnRvU3Ry\naW5nKCkpOwogICAgfQoKICAgIHB1YmxpYyBJbnRlZ2VyIGdldEhvbGRpbmdJ\nRCgpIHsKICAgICAgICByZXR1cm4gaG9sZGluZ0lEOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHNldEhvbGRpbmdJRChJbnRlZ2VyIGhvbGRpbmdJRCkgewog\nICAgICAgIHRoaXMuaG9sZGluZ0lEID0gaG9sZGluZ0lEOwogICAgfQoKICAg\nIHB1YmxpYyBkb3VibGUgZ2V0UXVhbnRpdHkoKSB7CiAgICAgICAgcmV0dXJu\nIHF1YW50aXR5OwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldFF1YW50aXR5\nKGRvdWJsZSBxdWFudGl0eSkgewogICAgICAgIHRoaXMucXVhbnRpdHkgPSBx\ndWFudGl0eTsKICAgIH0KCiAgICBwdWJsaWMgQmlnRGVjaW1hbCBnZXRQdXJj\naGFzZVByaWNlKCkgewogICAgICAgIHJldHVybiBwdXJjaGFzZVByaWNlOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldFB1cmNoYXNlUHJpY2UoQmlnRGVj\naW1hbCBwdXJjaGFzZVByaWNlKSB7CiAgICAgICAgdGhpcy5wdXJjaGFzZVBy\naWNlID0gcHVyY2hhc2VQcmljZTsKICAgIH0KCiAgICBwdWJsaWMgRGF0ZSBn\nZXRQdXJjaGFzZURhdGUoKSB7CiAgICAgICAgcmV0dXJuIHB1cmNoYXNlRGF0\nZTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRQdXJjaGFzZURhdGUoRGF0\nZSBwdXJjaGFzZURhdGUpIHsKICAgICAgICB0aGlzLnB1cmNoYXNlRGF0ZSA9\nIHB1cmNoYXNlRGF0ZTsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nIGdldFF1\nb3RlSUQoKSB7CiAgICAgICAgaWYgKHF1b3RlICE9IG51bGwpIHsKICAgICAg\nICAgICAgcmV0dXJuIHF1b3RlLmdldFN5bWJvbCgpOwogICAgICAgIH0KICAg\nICAgICByZXR1cm4gcXVvdGVJRDsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBz\nZXRRdW90ZUlEKFN0cmluZyBxdW90ZUlEKSB7CiAgICAgICAgdGhpcy5xdW90\nZUlEID0gcXVvdGVJRDsKICAgIH0KCiAgICBwdWJsaWMgQWNjb3VudERhdGFC\nZWFuIGdldEFjY291bnQoKSB7CiAgICAgICAgcmV0dXJuIGFjY291bnQ7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgc2V0QWNjb3VudChBY2NvdW50RGF0YUJl\nYW4gYWNjb3VudCkgewogICAgICAgIHRoaXMuYWNjb3VudCA9IGFjY291bnQ7\nCiAgICB9CgogICAgLyogRGlzYWJsZWQgZm9yIEQxODUyNzMKICAgICBwdWJs\naWMgU3RyaW5nIGdldFN5bWJvbCgpIHsKICAgICAgICAgcmV0dXJuIGdldFF1\nb3RlSUQoKTsKICAgICB9CiAgICAgKi8KICAgIAogICAgcHVibGljIFF1b3Rl\nRGF0YUJlYW4gZ2V0UXVvdGUoKSB7CiAgICAgICAgcmV0dXJuIHF1b3RlOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldFF1b3RlKFF1b3RlRGF0YUJlYW4g\ncXVvdGUpIHsKICAgICAgICB0aGlzLnF1b3RlID0gcXVvdGU7CiAgICB9CiAg\nICAKICAgIEBPdmVycmlkZQogICAgcHVibGljIGludCBoYXNoQ29kZSgpIHsK\nICAgICAgICBpbnQgaGFzaCA9IDA7CiAgICAgICAgaGFzaCArPSAodGhpcy5o\nb2xkaW5nSUQgIT0gbnVsbCA/IHRoaXMuaG9sZGluZ0lELmhhc2hDb2RlKCkg\nOiAwKTsKICAgICAgICByZXR1cm4gaGFzaDsKICAgIH0KCiAgICBAT3ZlcnJp\nZGUKICAgIHB1YmxpYyBib29sZWFuIGVxdWFscyhPYmplY3Qgb2JqZWN0KSB7\nCiAgICAgICAgLy8gVE9ETzogV2FybmluZyAtIHRoaXMgbWV0aG9kIHdvbid0\nIHdvcmsgaW4gdGhlIGNhc2UgdGhlIGlkIGZpZWxkcyBhcmUgbm90IHNldAog\nICAgICAgIGlmICghKG9iamVjdCBpbnN0YW5jZW9mIEhvbGRpbmdEYXRhQmVh\nbikpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAg\nICAgICBIb2xkaW5nRGF0YUJlYW4gb3RoZXIgPSAoSG9sZGluZ0RhdGFCZWFu\nKSBvYmplY3Q7CiAgICAgICAgaWYgKHRoaXMuaG9sZGluZ0lEICE9IG90aGVy\nLmhvbGRpbmdJRCAmJiAodGhpcy5ob2xkaW5nSUQgPT0gbnVsbCB8fCAhdGhp\ncy5ob2xkaW5nSUQuZXF1YWxzKG90aGVyLmhvbGRpbmdJRCkpKSByZXR1cm4g\nZmFsc2U7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Cn0K\n","encoding":"base64"}

