{"sha":"51b5bdc5261ce4ba7f69316e66a59aed609b374c","node_id":"MDQ6QmxvYjIwNjM2NDo1MWI1YmRjNTI2MWNlNGJhN2Y2OTMxNmU2NmE1OWFlZDYwOWIzNzRj","size":6813,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/51b5bdc5261ce4ba7f69316e66a59aed609b374c","content":"LyoqCiAqICBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5k\nYXRpb24gKEFTRikgdW5kZXIgb25lIG9yIG1vcmUKICogIGNvbnRyaWJ1dG9y\nIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUgZGlz\ndHJpYnV0ZWQgd2l0aAogKiAgdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGlu\nZm9ybWF0aW9uIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLgogKiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUgdG8gWW91IHVuZGVyIHRoZSBB\ncGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAKICogICh0aGUgIkxpY2Vuc2Ui\nKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxp\nYW5jZSB3aXRoCiAqICB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEg\nY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiAgICAgaHR0cDovL3d3dy5h\ncGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAqCiAqICBVbmxlc3Mg\ncmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdy\naXRpbmcsIHNvZnR3YXJlCiAqICBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGlj\nZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiAg\nV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQs\nIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAqICBTZWUgdGhlIExpY2Vu\nc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlz\nc2lvbnMgYW5kCiAqICBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4K\nICovCnBhY2thZ2Ugb3JnLmFwYWNoZS5vcGVuanBhLmludGVncmF0aW9uLmRh\neXRyYWRlcjsKCmltcG9ydCBqYXZhLmlvLlNlcmlhbGl6YWJsZTsKaW1wb3J0\nIGphdmEubWF0aC5CaWdEZWNpbWFsOwppbXBvcnQgamF2YS51dGlsLkFycmF5\nTGlzdDsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOwppbXBvcnQgamF2\nYS51dGlsLkRhdGU7CmltcG9ydCBqYXZhLnV0aWwuSXRlcmF0b3I7CgovLyBp\nbXBvcnQgb3JnLmFwYWNoZS5nZXJvbmltby5zYW1wbGVzLmRheXRyYWRlci5i\nZWFucy5RdW90ZURhdGFCZWFuOwovLyBpbXBvcnQgb3JnLmFwYWNoZS5nZXJv\nbmltby5zYW1wbGVzLmRheXRyYWRlci51dGlsLkxvZzsKLy8gaW1wb3J0IG9y\nZy5hcGFjaGUuZ2Vyb25pbW8uc2FtcGxlcy5kYXl0cmFkZXIudXRpbC5UcmFk\nZUNvbmZpZzsKCnB1YmxpYyBjbGFzcyBNYXJrZXRTdW1tYXJ5RGF0YUJlYW4g\naW1wbGVtZW50cyBTZXJpYWxpemFibGUKewoKCXByaXZhdGUgc3RhdGljIGZp\nbmFsIGxvbmcgc2VyaWFsVmVyc2lvblVJRCA9IC0yNzUzMzczNTAyMjI4MDgy\nNTAxTDsKCQogICAgcHJpdmF0ZSBCaWdEZWNpbWFsIAlUU0lBOwkJCS8qIFRy\nYWRlIFN0b2NrIEluZGV4IEF2ZXJhZ2UgKi8KCXByaXZhdGUgQmlnRGVjaW1h\nbCAJb3BlblRTSUE7CQkvKiBUcmFkZSBTdG9jayBJbmRleCBBdmVyYWdlIGF0\nIHRoZSBvcGVuICovCQoJcHJpdmF0ZSBkb3VibGUgIAl2b2x1bWU7IAkJLyog\ndm9sdW1lIG9mIHNoYXJlcyB0cmFkZWQgKi8KCXByaXZhdGUgQ29sbGVjdGlv\nbiAJdG9wR2FpbmVyczsJCS8qIENvbGxlY3Rpb24gb2YgdG9wIGdhaW5pbmcg\nc3RvY2tzICovCglwcml2YXRlIENvbGxlY3Rpb24gCXRvcExvc2VyczsJCS8q\nIENvbGxlY3Rpb24gb2YgdG9wIGxvc2luZyBzdG9ja3MgKi8JCgkvL0ZVVFVS\nRSBwcml2YXRlIENvbGxlY3Rpb24gCXRvcFZvbHVtZTsJCS8qIENvbGxlY3Rp\nb24gb2YgdG9wIHN0b2NrcyBieSB2b2x1bWUgKi8JCQoJcHJpdmF0ZSBEYXRl\nCQkJc3VtbWFyeURhdGU7ICAgLyogRGF0ZSB0aGlzIHN1bW1hcnkgd2FzIHRh\na2VuICovCgkKCS8vY2FjaGUgdGhlIGdhaW5QZXJjZW50IG9uY2UgY29tcHV0\nZWQgZm9yIHRoaXMgYmVhbgoJcHJpdmF0ZSBCaWdEZWNpbWFsICBnYWluUGVy\nY2VudD1udWxsOwoKCXB1YmxpYyBNYXJrZXRTdW1tYXJ5RGF0YUJlYW4oKXsg\nfQoJcHVibGljIE1hcmtldFN1bW1hcnlEYXRhQmVhbihCaWdEZWNpbWFsIFRT\nSUEsCgkJCQkJCQlCaWdEZWNpbWFsICBvcGVuVFNJQSwKCQkJCQkJCWRvdWJs\nZQkJdm9sdW1lLAoJCQkJCQkJQ29sbGVjdGlvbiAJdG9wR2FpbmVycywKCQkJ\nCQkJCUNvbGxlY3Rpb24gCXRvcExvc2Vycy8vLCBDb2xsZWN0aW9uIHRvcFZv\nbHVtZQoJCQkJCQkJKQoJewoJCXNldFRTSUEoVFNJQSk7CgkJc2V0T3BlblRT\nSUEob3BlblRTSUEpOwoJCXNldFZvbHVtZSh2b2x1bWUpOwoJCXNldFRvcEdh\naW5lcnModG9wR2FpbmVycyk7CgkJc2V0VG9wTG9zZXJzKHRvcExvc2Vycyk7\nCgkJc2V0U3VtbWFyeURhdGUobmV3IGphdmEuc3FsLkRhdGUoU3lzdGVtLmN1\ncnJlbnRUaW1lTWlsbGlzKCkpKTsKCQlnYWluUGVyY2VudCA9IGNvbXB1dGVH\nYWluUGVyY2VudChnZXRUU0lBKCksIGdldE9wZW5UU0lBKCkpOwoJCQoJfQoJ\nCglwdWJsaWMgc3RhdGljIE1hcmtldFN1bW1hcnlEYXRhQmVhbiBnZXRSYW5k\nb21JbnN0YW5jZSgpIHsKCQlDb2xsZWN0aW9uIGdhaW4gPSBuZXcgQXJyYXlM\naXN0KCk7CgkJQ29sbGVjdGlvbiBsb3NlID0gbmV3IEFycmF5TGlzdCgpOwoJ\nCQoJCWZvciAoaW50IGlpID0gMDsgaWkgPCA1OyBpaSsrKSB7CgkJCVF1b3Rl\nRGF0YUJlYW4gcXVvdGUxID0gUXVvdGVEYXRhQmVhbi5nZXRSYW5kb21JbnN0\nYW5jZSgpOwoJCQlRdW90ZURhdGFCZWFuIHF1b3RlMiA9IFF1b3RlRGF0YUJl\nYW4uZ2V0UmFuZG9tSW5zdGFuY2UoKTsKCQkJCgkJCWdhaW4uYWRkKHF1b3Rl\nMSk7CgkJCWxvc2UuYWRkKHF1b3RlMik7CgkJfQoJCQoJCXJldHVybiBuZXcg\nTWFya2V0U3VtbWFyeURhdGFCZWFuKAoJCQlUcmFkZUNvbmZpZy5ybmRCaWdE\nZWNpbWFsKDEwMDAwMDAuMGYpLAoJCQlUcmFkZUNvbmZpZy5ybmRCaWdEZWNp\nbWFsKDEwMDAwMDAuMGYpLAoJCQlUcmFkZUNvbmZpZy5ybmRRdWFudGl0eSgp\nLAoJCQlnYWluLAoJCQlsb3NlCgkJKTsKCX0KCglwdWJsaWMgU3RyaW5nIHRv\nU3RyaW5nKCkKCXsKCQlTdHJpbmcgcmV0ID0gIlxuXHRNYXJrZXQgU3VtbWFy\neSBhdDogIiArIGdldFN1bW1hcnlEYXRlKCkKCQkJKyAiXG5cdFx0ICAgICAg\nICBUU0lBOiIgKyBnZXRUU0lBKCkKCQkJKyAiXG5cdFx0ICAgIG9wZW5UU0lB\nOiIgKyBnZXRPcGVuVFNJQSgpCgkJCSsgIlxuXHRcdCAgICAgICAgZ2Fpbjoi\nICsgZ2V0R2FpblBlcmNlbnQoKQoJCQkrICJcblx0XHQgICAgICB2b2x1bWU6\nIiArIGdldFZvbHVtZSgpCgkJCTsKCgkJaWYgKCAoZ2V0VG9wR2FpbmVycygp\nPT1udWxsKSB8fCAoZ2V0VG9wTG9zZXJzKCk9PW51bGwpICkKCQkJcmV0dXJu\nIHJldDsKCQlyZXQgKz0gIlxuXHRcdCAgIEN1cnJlbnQgVG9wIEdhaW5lcnM6\nIjsKCQlJdGVyYXRvciBpdCA9IGdldFRvcEdhaW5lcnMoKS5pdGVyYXRvcigp\nOwoJCXdoaWxlICggaXQuaGFzTmV4dCgpICkgCgkJewoJCQlRdW90ZURhdGFC\nZWFuIHF1b3RlRGF0YSA9IChRdW90ZURhdGFCZWFuKSBpdC5uZXh0KCk7CgkJ\nCXJldCArPSAoICJcblx0XHRcdCIgICsgcXVvdGVEYXRhLnRvU3RyaW5nKCkg\nKTsKCQl9CgkJcmV0ICs9ICJcblx0XHQgICBDdXJyZW50IFRvcCBMb3NlcnM6\nIjsKCQlpdCA9IGdldFRvcExvc2VycygpLml0ZXJhdG9yKCk7CgkJd2hpbGUg\nKCBpdC5oYXNOZXh0KCkgKSAKCQl7CgkJCVF1b3RlRGF0YUJlYW4gcXVvdGVE\nYXRhID0gKFF1b3RlRGF0YUJlYW4pIGl0Lm5leHQoKTsKCQkJcmV0ICs9ICgg\nIlxuXHRcdFx0IiAgKyBxdW90ZURhdGEudG9TdHJpbmcoKSApOwoJCX0KCQly\nZXR1cm4gcmV0OwkJCgl9CglwdWJsaWMgU3RyaW5nIHRvSFRNTCgpCgl7CgkJ\nU3RyaW5nIHJldCA9ICI8QlI+TWFya2V0IFN1bW1hcnkgYXQ6ICIgKyBnZXRT\ndW1tYXJ5RGF0ZSgpCgkJCSsgIjxMST4gICAgICAgIFRTSUE6IiArIGdldFRT\nSUEoKSArICI8L0xJPiIKCQkJKyAiPExJPiAgICBvcGVuVFNJQToiICsgZ2V0\nT3BlblRTSUEoKSArICI8L0xJPiIKCQkJKyAiPExJPiAgICAgIHZvbHVtZToi\nICsgZ2V0Vm9sdW1lKCkgKyAiPC9MST4iCgkJCTsKCQlpZiAoIChnZXRUb3BH\nYWluZXJzKCk9PW51bGwpIHx8IChnZXRUb3BMb3NlcnMoKT09bnVsbCkgKQoJ\nCQlyZXR1cm4gcmV0OwoJCXJldCArPSAiPEJSPiBDdXJyZW50IFRvcCBHYWlu\nZXJzOiI7CgkJSXRlcmF0b3IgaXQgPSBnZXRUb3BHYWluZXJzKCkuaXRlcmF0\nb3IoKTsKCQl3aGlsZSAoIGl0Lmhhc05leHQoKSApIAoJCXsKCQkJUXVvdGVE\nYXRhQmVhbiBxdW90ZURhdGEgPSAoUXVvdGVEYXRhQmVhbikgaXQubmV4dCgp\nOwoJCQlyZXQgKz0gKCAiPExJPiIgICsgcXVvdGVEYXRhLnRvU3RyaW5nKCkg\nICsgIjwvTEk+IiApOwoJCX0KCQlyZXQgKz0gIjxCUj4gICBDdXJyZW50IFRv\ncCBMb3NlcnM6IjsKCQlpdCA9IGdldFRvcExvc2VycygpLml0ZXJhdG9yKCk7\nCgkJd2hpbGUgKCBpdC5oYXNOZXh0KCkgKSAKCQl7CgkJCVF1b3RlRGF0YUJl\nYW4gcXVvdGVEYXRhID0gKFF1b3RlRGF0YUJlYW4pIGl0Lm5leHQoKTsKCQkJ\ncmV0ICs9ICggIjxMST4iICArIHF1b3RlRGF0YS50b1N0cmluZygpICArICI8\nL0xJPiIgKTsKCQl9CgkJcmV0dXJuIHJldDsKCX0KCXB1YmxpYyB2b2lkIHBy\naW50KCkKCXsKCQkvLyBMb2cubG9nKCB0aGlzLnRvU3RyaW5nKCkgKTsKCX0J\nCgkKCXB1YmxpYyBCaWdEZWNpbWFsIGdldEdhaW5QZXJjZW50KCkKCXsKCQlp\nZiAoIGdhaW5QZXJjZW50ID09IG51bGwgKQoJCQlnYWluUGVyY2VudCA9IGNv\nbXB1dGVHYWluUGVyY2VudChnZXRUU0lBKCksIGdldE9wZW5UU0lBKCkpOwoJ\nCXJldHVybiBnYWluUGVyY2VudDsKCX0KCgoJLyoqCgkgKiBHZXRzIHRoZSB0\nU0lBCgkgKiBAcmV0dXJuIFJldHVybnMgYSBCaWdEZWNpbWFsCgkgKi8KCXB1\nYmxpYyBCaWdEZWNpbWFsIGdldFRTSUEoKSB7CgkJcmV0dXJuIFRTSUE7Cgl9\nCgkvKioKCSAqIFNldHMgdGhlIHRTSUEKCSAqIEBwYXJhbSB0U0lBIFRoZSB0\nU0lBIHRvIHNldAoJICovCglwdWJsaWMgdm9pZCBzZXRUU0lBKEJpZ0RlY2lt\nYWwgdFNJQSkgewoJCVRTSUEgPSB0U0lBOwoJfQoKCS8qKgoJICogR2V0cyB0\naGUgb3BlblRTSUEKCSAqIEByZXR1cm4gUmV0dXJucyBhIEJpZ0RlY2ltYWwK\nCSAqLwoJcHVibGljIEJpZ0RlY2ltYWwgZ2V0T3BlblRTSUEoKSB7CgkJcmV0\ndXJuIG9wZW5UU0lBOwoJfQoJLyoqCgkgKiBTZXRzIHRoZSBvcGVuVFNJQQoJ\nICogQHBhcmFtIG9wZW5UU0lBIFRoZSBvcGVuVFNJQSB0byBzZXQKCSAqLwoJ\ncHVibGljIHZvaWQgc2V0T3BlblRTSUEoQmlnRGVjaW1hbCBvcGVuVFNJQSkg\newoJCXRoaXMub3BlblRTSUEgPSBvcGVuVFNJQTsKCX0KCgkvKioKCSAqIEdl\ndHMgdGhlIHZvbHVtZQoJICogQHJldHVybiBSZXR1cm5zIGEgQmlnRGVjaW1h\nbAoJICovCglwdWJsaWMgZG91YmxlIGdldFZvbHVtZSgpIHsKCQlyZXR1cm4g\ndm9sdW1lOwoJfQoJLyoqCgkgKiBTZXRzIHRoZSB2b2x1bWUKCSAqIEBwYXJh\nbSB2b2x1bWUgVGhlIHZvbHVtZSB0byBzZXQKCSAqLwoJcHVibGljIHZvaWQg\nc2V0Vm9sdW1lKGRvdWJsZSB2b2x1bWUpIHsKCQl0aGlzLnZvbHVtZSA9IHZv\nbHVtZTsKCX0KCgkvKioKCSAqIEdldHMgdGhlIHRvcEdhaW5lcnMKCSAqIEBy\nZXR1cm4gUmV0dXJucyBhIENvbGxlY3Rpb24KCSAqLwoJcHVibGljIENvbGxl\nY3Rpb24gZ2V0VG9wR2FpbmVycygpIHsKCQlyZXR1cm4gdG9wR2FpbmVyczsK\nCX0KCS8qKgoJICogU2V0cyB0aGUgdG9wR2FpbmVycwoJICogQHBhcmFtIHRv\ncEdhaW5lcnMgVGhlIHRvcEdhaW5lcnMgdG8gc2V0CgkgKi8KCXB1YmxpYyB2\nb2lkIHNldFRvcEdhaW5lcnMoQ29sbGVjdGlvbiB0b3BHYWluZXJzKSB7CgkJ\ndGhpcy50b3BHYWluZXJzID0gdG9wR2FpbmVyczsKCX0KCgkvKioKCSAqIEdl\ndHMgdGhlIHRvcExvc2VycwoJICogQHJldHVybiBSZXR1cm5zIGEgQ29sbGVj\ndGlvbgoJICovCglwdWJsaWMgQ29sbGVjdGlvbiBnZXRUb3BMb3NlcnMoKSB7\nCgkJcmV0dXJuIHRvcExvc2VyczsKCX0KCS8qKgoJICogU2V0cyB0aGUgdG9w\nTG9zZXJzCgkgKiBAcGFyYW0gdG9wTG9zZXJzIFRoZSB0b3BMb3NlcnMgdG8g\nc2V0CgkgKi8KCXB1YmxpYyB2b2lkIHNldFRvcExvc2VycyhDb2xsZWN0aW9u\nIHRvcExvc2VycykgewoJCXRoaXMudG9wTG9zZXJzID0gdG9wTG9zZXJzOwoJ\nfQoKCS8qKgoJICogR2V0cyB0aGUgc3VtbWFyeURhdGUKCSAqIEByZXR1cm4g\nUmV0dXJucyBhIERhdGUKCSAqLwoJcHVibGljIERhdGUgZ2V0U3VtbWFyeURh\ndGUoKSB7CgkJcmV0dXJuIHN1bW1hcnlEYXRlOwoJfQoJLyoqCgkgKiBTZXRz\nIHRoZSBzdW1tYXJ5RGF0ZQoJICogQHBhcmFtIHN1bW1hcnlEYXRlIFRoZSBz\ndW1tYXJ5RGF0ZSB0byBzZXQKCSAqLwoJcHVibGljIHZvaWQgc2V0U3VtbWFy\neURhdGUoRGF0ZSBzdW1tYXJ5RGF0ZSkgewoJCXRoaXMuc3VtbWFyeURhdGUg\nPSBzdW1tYXJ5RGF0ZTsKCX0KCgkvLyBmcm9tIEZpbmFuY2lhbFV0aWxzCiAg\nICBwcml2YXRlIEJpZ0RlY2ltYWwgY29tcHV0ZUdhaW5QZXJjZW50KEJpZ0Rl\nY2ltYWwgY3VycmVudEJhbGFuY2UsIEJpZ0RlY2ltYWwgb3BlbkJhbGFuY2Up\nCiAgICB7CiAgICAgICAgaWYgKG9wZW5CYWxhbmNlLmRvdWJsZVZhbHVlKCkg\nPT0gMC4wKSByZXR1cm4gKG5ldyBCaWdEZWNpbWFsKDAuMDApKS5zZXRTY2Fs\nZSgyKTsKICAgICAgICBCaWdEZWNpbWFsIGdhaW5QZXJjZW50ID0gY3VycmVu\ndEJhbGFuY2UuZGl2aWRlKG9wZW5CYWxhbmNlLCBCaWdEZWNpbWFsLlJPVU5E\nX0hBTEZfVVApCiAgICAgICAgICAgIC5zdWJ0cmFjdCgobmV3IEJpZ0RlY2lt\nYWwoMS4wMCkpLnNldFNjYWxlKDIpKS5tdWx0aXBseSgobmV3IEJpZ0RlY2lt\nYWwoMTAwLjAwKSkuc2V0U2NhbGUoMikpOwogICAgICAgIHJldHVybiBnYWlu\nUGVyY2VudDsKICAgIH0KCn0K\n","encoding":"base64"}

