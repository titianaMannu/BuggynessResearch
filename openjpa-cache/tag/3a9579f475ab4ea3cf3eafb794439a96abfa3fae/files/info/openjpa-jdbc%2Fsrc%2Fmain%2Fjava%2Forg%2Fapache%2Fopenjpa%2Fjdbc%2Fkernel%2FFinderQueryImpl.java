{"sha":"e9af893e7988c7b98e1e2d0e7900355998283eb4","node_id":"MDQ6QmxvYjIwNjM2NDplOWFmODkzZTc5ODhjN2I5OGUxZTJkMGU3OTAwMzU1OTk4MjgzZWI0","size":6608,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/e9af893e7988c7b98e1e2d0e7900355998283eb4","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWw7CgppbXBv\ncnQgamF2YS5zcWwuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmEuc3FsLlByZXBh\ncmVkU3RhdGVtZW50OwppbXBvcnQgamF2YS5zcWwuUmVzdWx0U2V0OwppbXBv\ncnQgamF2YS5zcWwuU1FMRXhjZXB0aW9uOwoKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLm1ldGEuQ2xhc3NNYXBwaW5nOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMubWV0YS5Kb2luYWJsZTsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5Db2x1bW47CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuREJEaWN0aW9uYXJ5OwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLkxvZ2ljYWxVbmlvbjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5SZXN1bHQ7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuU1FMQnVmZmVyOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNlbGVjdEV4ZWN1dG9y\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNlbGVjdElt\ncGw7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuVW5pb247\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkZldGNoQ29uZmln\ndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuRmlu\nZGVyUXVlcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLk9w\nZW5KUEFTdGF0ZU1hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\na2VybmVsLlN0b3JlTWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5tZXRhLkZpZWxkTWV0YURhdGE7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEudXRpbC5BcHBsaWNhdGlvbklkczsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS51dGlsLklkOwoKCi8qKgogKiBJbXBsZW1lbnRzIEZpbmRlciBRdWVy\neSBpZGVudGlmaWVkIGJ5IENsYXNzTWFwcHBpbmcgZm9yIFNlbGVjdEV4ZWN1\ndG9yIHRoYXQgCiAqIGNhbiBiZSBleGVjdXRlZCB0byBnZW5lcmF0ZSBSZXN1\nbHQuIAogKiAgCiAqIEBhdXRob3IgUGluYWtpIFBvZGRhcgogKgogKiBAc2lu\nY2UgMi4wLjAKICovCnB1YmxpYyBjbGFzcyBGaW5kZXJRdWVyeUltcGwgCiAg\nICBpbXBsZW1lbnRzIEZpbmRlclF1ZXJ5PENsYXNzTWFwcGluZywgU2VsZWN0\nRXhlY3V0b3IsIFJlc3VsdD4gewogICAgcHJpdmF0ZSBmaW5hbCBDbGFzc01h\ncHBpbmcgX21hcHBpbmc7CiAgICBwcml2YXRlIGZpbmFsIFNlbGVjdEltcGwg\nX3NlbGVjdDsKICAgIHByaXZhdGUgZmluYWwgQ29sdW1uW10gX3BrQ29sczsK\nICAgIHByaXZhdGUgZmluYWwgSm9pbmFibGVbXSAgX2pvaW5zOwogICAgcHJp\ndmF0ZSBmaW5hbCBpbnRbXSBfcGtJbmRpY2VzOwogICAgcHJpdmF0ZSBmaW5h\nbCBTUUxCdWZmZXIgX2J1ZmZlcjsKICAgIHByaXZhdGUgZmluYWwgU3RyaW5n\nIF9zcWw7CiAgICAKICAgIC8qKgogICAgICogQXR0ZW1wdHMgdG8gY29uc3Ry\ndWN0IGEgRmluZGVyUXVlcnkgZnJvbSB0aGUgZ2l2ZW4gU2VsZWN0IGZvciB0\naGUgZ2l2ZW4KICAgICAqIG1hcHBpbmcuIFRoZSBnaXZlbiBTZWxlY3QgbWF5\nIG5vdCBiZSBhbWVuYWJsZSBmb3IgY2FjaGluZyBhbmQgdGhlbiBhIG51bGwK\nICAgICAqIHZhbHVlIGlzIHJldHVybmVkLiAKICAgICAqLwogICAgc3RhdGlj\nIEZpbmRlclF1ZXJ5SW1wbCBuZXdGaW5kZXIoQ2xhc3NNYXBwaW5nIG1hcHBp\nbmcsCiAgICAgICAgU2VsZWN0RXhlY3V0b3Igc2VsZWN0KSB7CiAgICAgICAg\nU2VsZWN0SW1wbCBpbXBsID0gZXh0cmFjdEltcGxlbWVudGF0aW9uKHNlbGVj\ndCk7CiAgICAgICAgaWYgKGltcGwgPT0gbnVsbCkKICAgICAgICAgICAgcmV0\ndXJuIG51bGw7CiAgICAgICAgU1FMQnVmZmVyIGJ1ZmZlciA9IGltcGwuZ2V0\nU1FMKCk7CiAgICAgICAgQ29sdW1uW10gcGtDb2xzID0gbWFwcGluZy5nZXRQ\ncmltYXJ5S2V5Q29sdW1ucygpOwogICAgICAgIGJvb2xlYW4gY2FuQ2FjaGUg\nPSBwa0NvbHMubGVuZ3RoID09IGJ1ZmZlci5nZXRQYXJhbWV0ZXJzKCkuc2l6\nZSgpOwogICAgICAgIHJldHVybiAoY2FuQ2FjaGUpCiAgICAgICAgICAgID8g\nbmV3IEZpbmRlclF1ZXJ5SW1wbChtYXBwaW5nLCBpbXBsLCBidWZmZXIpIDog\nbnVsbDsKICAgIH0KCiAgICBwcml2YXRlIEZpbmRlclF1ZXJ5SW1wbChDbGFz\nc01hcHBpbmcgbWFwcGluZywgU2VsZWN0SW1wbCBzZWxlY3QsCiAgICAgICAg\nU1FMQnVmZmVyIGJ1ZmZlcikgewogICAgICAgIHN1cGVyKCk7CiAgICAgICAg\nX21hcHBpbmcgPSBtYXBwaW5nOwogICAgICAgIF9zZWxlY3QgPSBzZWxlY3Q7\nCiAgICAgICAgX2J1ZmZlciA9IGJ1ZmZlcjsKICAgICAgICBfc3FsID0gX2J1\nZmZlci5nZXRTUUwoKTsKICAgICAgICBfcGtDb2xzID0gX21hcHBpbmcuZ2V0\nUHJpbWFyeUtleUNvbHVtbnMoKTsKICAgICAgICBfam9pbnMgPSBuZXcgSm9p\nbmFibGVbX3BrQ29scy5sZW5ndGhdOwogICAgICAgIGZvciAoaW50IGkgPSAw\nOyBpIDwgX3BrQ29scy5sZW5ndGg7IGkrKykKICAgICAgICAgICAgX2pvaW5z\nW2ldID0gX21hcHBpbmcuYXNzZXJ0Sm9pbmFibGUoX3BrQ29sc1tpXSk7CiAg\nICAgICAgX3BrSW5kaWNlcyA9IG5ldyBpbnRbX3BrQ29scy5sZW5ndGhdOwog\nICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX3BrQ29scy5sZW5ndGg7IGkr\nKykgewogICAgICAgICAgICBGaWVsZE1ldGFEYXRhIHBrID0gX21hcHBpbmcu\nZ2V0RmllbGQoX2pvaW5zW2ldLmdldEZpZWxkSW5kZXgoKSk7CiAgICAgICAg\nICAgIF9wa0luZGljZXNbaV0gPSBwayA9PSBudWxsID8gMCA6IHBrLmdldFBy\naW1hcnlLZXlJbmRleCgpOwogICAgICAgIH0KICAgICAgICAKICAgIH0KICAg\nIAogICAgcHVibGljIENsYXNzTWFwcGluZyBnZXRJZGVudGlmaWVyKCkgewog\nICAgICAgIHJldHVybiBfbWFwcGluZzsKICAgIH0KICAgIAogICAgcHVibGlj\nIFNlbGVjdEV4ZWN1dG9yIGdldERlbGVnYXRlKCkgewogICAgICAgIHJldHVy\nbiBfc2VsZWN0OwogICAgfQogICAgCiAgICBwdWJsaWMgU3RyaW5nIGdldFF1\nZXJ5U3RyaW5nKCkgewogICAgICAgIHJldHVybiBfc3FsOwogICAgfQogICAg\nCiAgICBwdWJsaWMgQ29sdW1uW10gZ2V0UEtDb2x1bW5zKCkgewogICAgICAg\nIHJldHVybiBfcGtDb2xzOwogICAgfQogICAgCiAgICBwcml2YXRlIE9iamVj\ndFtdIGdldFBLVmFsdWVzKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIEpEQkNT\ndG9yZSBzdG9yZSkgewogICAgICAgIE9iamVjdFtdIHBrcyA9IG51bGw7CiAg\nICAgICAgT2JqZWN0IG9pZCA9IHNtLmdldE9iamVjdElkKCk7CiAgICAgICAg\naWYgKF9tYXBwaW5nLmdldElkZW50aXR5VHlwZSgpID09IENsYXNzTWFwcGlu\nZy5JRF9BUFBMSUNBVElPTikKICAgICAgICAgICAgcGtzID0gQXBwbGljYXRp\nb25JZHMudG9QS1ZhbHVlcyhvaWQsIF9tYXBwaW5nKTsKICAgIAogICAgICAg\nIE9iamVjdFtdIHZhbCA9IG5ldyBPYmplY3RbX3BrQ29scy5sZW5ndGhdOwog\nICAgICAgIGludCBjb3VudCA9IDA7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7\nIGkgPCBfcGtDb2xzLmxlbmd0aDsgaSsrLCBjb3VudCsrKSB7CiAgICAgICAg\nICAgIGlmIChwa3MgPT0gbnVsbCkKICAgICAgICAgICAgICAgIHZhbFswXSA9\nIChvaWQgPT0gbnVsbCkgCiAgICAgICAgICAgICAgICAgICAgPyBudWxsIDog\nKChJZCkgb2lkKS5nZXRJZCgpOwogICAgICAgICAgICBlbHNlIHsKICAgICAg\nICAgICAgICAgIHZhbFtpXSA9IF9qb2luc1tpXS5nZXRKb2luVmFsdWUocGtz\nW19wa0luZGljZXNbaV1dLCBfcGtDb2xzW2ldLCAKICAgICAgICAgICAgICAg\nICAgICBzdG9yZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAg\ncmV0dXJuIHZhbDsKICAgIH0KICAgIAogICAgcHVibGljIFJlc3VsdCBleGVj\ndXRlKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIFN0b3JlTWFuYWdlciBzdG9y\nZSwgCiAgICAgICAgRmV0Y2hDb25maWd1cmF0aW9uIGZldGNoKSB7CiAgICAg\nICAgYm9vbGVhbiBmb3JVcGRhdGUgPSBmYWxzZTsKICAgICAgICBKREJDU3Rv\ncmUganN0b3JlID0gKEpEQkNTdG9yZSlzdG9yZTsKICAgICAgICBDb25uZWN0\naW9uIGNvbm4gPSBqc3RvcmUuZ2V0Q29ubmVjdGlvbigpOwogICAgICAgIERC\nRGljdGlvbmFyeSBkaWN0ID0ganN0b3JlLmdldERCRGljdGlvbmFyeSgpOwog\nICAgICAgIFByZXBhcmVkU3RhdGVtZW50IHN0bW50ID0gbnVsbDsKICAgICAg\nICBSZXN1bHRTZXQgcnMgPSBudWxsOwogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIHN0bW50ID0gX3NlbGVjdC5wcmVwYXJlU3RhdGVtZW50KGNvbm4sIF9z\ncWwpOwogICAgICAgICAgICBPYmplY3RbXSBwYXJhbXMgPSBnZXRQS1ZhbHVl\ncyhzbSwganN0b3JlKTsKICAgICAgICAgICAgaWYgKHN0bW50ICE9IG51bGwp\nIHsKICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDxwYXJhbXMu\nbGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBkaWN0LnNldFVu\na25vd24oc3RtbnQsIGkrMSwgcGFyYW1zW2ldLCBfcGtDb2xzW2ldKTsKICAg\nICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBkaWN0\nLnNldFRpbWVvdXRzKHN0bW50LCAoSkRCQ0ZldGNoQ29uZmlndXJhdGlvbilm\nZXRjaCwgZm9yVXBkYXRlKTsKICAgICAgICAgICAgcnMgPSBfc2VsZWN0LmV4\nZWN1dGVRdWVyeShjb25uLCBzdG1udCwgZ2V0UXVlcnlTdHJpbmcoKSwganN0\nb3JlLAogICAgICAgICAgICAgICAgcGFyYW1zLCBfcGtDb2xzKTsKICAgICAg\nICAgICAgcmV0dXJuIF9zZWxlY3QuZ2V0RWFnZXJSZXN1bHQoY29ubiwgc3Rt\nbnQsIHJzLCBqc3RvcmUsIAogICAgICAgICAgICAgICAgKEpEQkNGZXRjaENv\nbmZpZ3VyYXRpb24pZmV0Y2gsIGZvclVwZGF0ZSwgX2J1ZmZlcik7CiAgICAg\nICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIHNlKSB7CiAgICAgICAgICAgIGlm\nIChzdG1udCAhPSBudWxsKQogICAgICAgICAgICAgICAgdHJ5IHsgc3RtbnQu\nY2xvc2UoKTsgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIHNlMikge30KICAgICAg\nICAgICAgdHJ5IHsgY29ubi5jbG9zZSgpOyB9IGNhdGNoIChTUUxFeGNlcHRp\nb24gc2UyKSB7fQogICAgICAgICAgICB0aHJvdyBuZXcgUnVudGltZUV4Y2Vw\ndGlvbihzZSk7CiAgICAgICAgfQogICAgfQogICAgCiAgICBwcml2YXRlIHN0\nYXRpYyBTZWxlY3RJbXBsIGV4dHJhY3RJbXBsZW1lbnRhdGlvbihTZWxlY3RF\neGVjdXRvciBzZWxlY3RvcikgewogICAgICAgIGlmIChzZWxlY3RvciA9PSBu\ndWxsIHx8IHNlbGVjdG9yLmhhc011bHRpcGxlU2VsZWN0cygpKQogICAgICAg\nICAgICByZXR1cm4gbnVsbDsKICAgICAgICBpZiAoc2VsZWN0b3IgaW5zdGFu\nY2VvZiBTZWxlY3RJbXBsKSAKICAgICAgICAgICAgcmV0dXJuIChTZWxlY3RJ\nbXBsKXNlbGVjdG9yOwogICAgICAgIGlmIChzZWxlY3RvciBpbnN0YW5jZW9m\nIExvZ2ljYWxVbmlvbi5VbmlvblNlbGVjdCkKICAgICAgICAgICAgcmV0dXJu\nICgoTG9naWNhbFVuaW9uLlVuaW9uU2VsZWN0KXNlbGVjdG9yKS5nZXREZWxl\nZ2F0ZSgpOwogICAgICAgIGlmIChzZWxlY3RvciBpbnN0YW5jZW9mIFVuaW9u\nKSAKICAgICAgICAgICAgcmV0dXJuIGV4dHJhY3RJbXBsZW1lbnRhdGlvbigo\nKFVuaW9uKXNlbGVjdG9yKS5nZXRTZWxlY3RzKClbMF0pOwogICAgICAgIAog\nICAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgCiAgICBwdWJsaWMgU3Ry\naW5nIHRvU3RyaW5nKCkgewogICAgICAgIHJldHVybiBfbWFwcGluZyArICI6\nIFsiICsgZ2V0UXVlcnlTdHJpbmcoKSArICJdIjsKICAgIH0KfQo=\n","encoding":"base64"}

