{"sha":"558e8569e4fbac7165d0f9827242a3a5dc74e9eb","node_id":"MDQ6QmxvYjIwNjM2NDo1NThlODU2OWU0ZmJhYzcxNjVkMGY5ODI3MjQyYTNhNWRjNzRlOWVi","size":16661,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/558e8569e4fbac7165d0f9827242a3a5dc74e9eb","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\nCnBhY2thZ2Ugb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMua2VybmVsOwoKaW1w\nb3J0IGphdmEudXRpbC5BcnJheXM7CmltcG9ydCBqYXZhLnV0aWwuQ29sbGVj\ndGlvbjsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsKaW1wb3J0IGph\ndmEudXRpbC5IYXNoTWFwOwppbXBvcnQgamF2YS51dGlsLkxpc3Q7CmltcG9y\ndCBqYXZhLnV0aWwuTWFwOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5q\nZGJjLm1ldGEuQ2xhc3NNYXBwaW5nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmpkYmMubWV0YS5GaWVsZE1hcHBpbmc7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEuamRiYy5tZXRhLk1hcHBpbmdSZXBvc2l0b3J5OwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLkNvbHVtbjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5Mb2dpY2FsVW5pb247Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuU1FMQnVmZmVyOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNlbGVjdEV4ZWN1\ndG9yOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNlbGVj\ndEltcGw7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuVW5p\nb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkJyb2tlcjsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuUHJlcGFyZWRRdWVy\neTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuUXVlcnk7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlF1ZXJ5SW1wbDsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuUXVlcnlMYW5ndWFnZXM7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlN0b3JlUXVlcnk7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlByZXBhcmVkUXVl\ncnlDYWNoZS5FeGNsdXNpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\na2VybmVsLmV4cHMuUXVlcnlFeHByZXNzaW9uczsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5saWIucm9wLlJhbmdlUmVzdWx0T2JqZWN0UHJvdmlkZXI7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnJvcC5SZXN1bHRMaXN0\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkxvY2FsaXpl\ncjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkZpZWxkTWV0YURh\ndGE7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5JbXBsSGVscGVy\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuSW50ZXJuYWxFeGNl\ncHRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5Vc2VyRXhj\nZXB0aW9uOwoKLyoqCiAqIEltcGxlbWVudHMge0BsaW5rIFByZXBhcmVkUXVl\ncnl9IGZvciBTUUwgcXVlcmllcy4KICogUHJlcGFyZWRRdWVyeSBob2xkcyB0\naGUgcG9zdC1jb21waWxhdGlvbiBhbmQgcG9zdC1leGVjdXRpb24gc3RhdGUg\nb2YgYSBrZXJuZWwgUXVlcnkuCiAqIFRoZSBwb3N0LWV4ZWN1dGlvbiBpbnRl\ncm5hbCBzdGF0ZSBvZiBhIHF1ZXJ5IGlzIGFwcGVuZGVkIGFzIGEgPGVtPnVz\nZXIgb2JqZWN0PC9lbT4KICogdG8gdGhlIHVzZXItdmlzaWJsZSByZXN1bHQg\ndG8gbWFpbnRhaW4gdGhlIEFQSSBjb250cmFjdC4gCiAqIAogKiBAYXV0aG9y\nIFBpbmFraSBQb2RkYXIKICoKICovCnB1YmxpYyBjbGFzcyBQcmVwYXJlZFF1\nZXJ5SW1wbCBpbXBsZW1lbnRzIFByZXBhcmVkUXVlcnkgewogICAgcHJpdmF0\nZSBzdGF0aWMgTG9jYWxpemVyIF9sb2MgPSAKICAgICAgICBMb2NhbGl6ZXIu\nZm9yUGFja2FnZShQcmVwYXJlZFF1ZXJ5SW1wbC5jbGFzcyk7CgogICAgcHJp\ndmF0ZSBmaW5hbCBTdHJpbmcgX2lkOwogICAgcHJpdmF0ZSBTdHJpbmcgX3Nx\nbDsKICAgIHByaXZhdGUgYm9vbGVhbiBfaW5pdGlhbGl6ZWQ7CiAgICAKICAg\nIC8vIFBvc3QtY29tcGlsYXRpb24gc3RhdGUgb2YgYW4gZXhlY3V0YWJsZSBx\ndWVyeSwgcG9wdWxhdGVkIG9uIGNvbnN0cnVjdGlvbgogICAgcHJpdmF0ZSBD\nbGFzczw/PiBfY2FuZGlkYXRlOwogICAgcHJpdmF0ZSBib29sZWFuIF9zdWJj\nbGFzc2VzOwogICAgCiAgICAvLyBwb3N0LWV4ZWN1dGlvbiBzdGF0ZSBvZiBh\nIHF1ZXJ5CiAgICBwcml2YXRlIFF1ZXJ5RXhwcmVzc2lvbnNbXSBfZXhwczsK\nICAgIHByaXZhdGUgQ2xhc3M8Pz5bXSBfcHJvalR5cGVzOwoKICAgIC8vIFBv\nc2l0aW9uIG9mIHRoZSB1c2VyIGRlZmluZWQgcGFyYW1ldGVycyBpbiB0aGUg\nX3BhcmFtcyBsaXN0CiAgICBwcml2YXRlIE1hcDxPYmplY3QsIGludFtdPiAg\nICBfdXNlclBhcmFtUG9zaXRpb25zOwogICAgcHJpdmF0ZSBNYXA8SW50ZWdl\nciwgT2JqZWN0PiBfdGVtcGxhdGU7CiAgICBwcml2YXRlIFNlbGVjdEltcGwg\nc2VsZWN0OwoKICAgIC8qKgogICAgICogQ29uc3RydWN0LgogICAgICogCiAg\nICAgKiBAcGFyYW0gaWQgYW4gaWRlbnRpZmllciBmb3IgdGhpcyBxdWVyeSB0\nbyBiZSB1c2VkIGFzIGNhY2hlIGtleQogICAgICogQHBhcmFtIGNvbXBpbGVk\nIGEgY29tcGlsZWQgcXVlcnkgCiAgICAgKi8KICAgIHB1YmxpYyBQcmVwYXJl\nZFF1ZXJ5SW1wbChTdHJpbmcgaWQsIFF1ZXJ5IGNvbXBpbGVkKSB7CiAgICAg\nICAgdGhpcyhpZCwgbnVsbCwgY29tcGlsZWQpOwogICAgfQogICAgCiAgICAv\nKioKICAgICAqIENvbnN0cnVjdC4KICAgICAqIAogICAgICogQHBhcmFtIGlk\nIGFuIGlkZW50aWZpZXIgZm9yIHRoaXMgcXVlcnkgdG8gYmUgdXNlZCBhcyBj\nYWNoZSBrZXkKICAgICAqIEBwYXJhbSBjb3JyZXNwb25kaW5nIGRhdGEgc3Rv\ncmUgbGFuZ3VhZ2UgcXVlcnkgc3RyaW5nIAogICAgICogQHBhcmFtIGNvbXBp\nbGVkIGEgY29tcGlsZWQgcXVlcnkgCiAgICAgKi8KICAgIHB1YmxpYyBQcmVw\nYXJlZFF1ZXJ5SW1wbChTdHJpbmcgaWQsIFN0cmluZyBzcWwsIFF1ZXJ5IGNv\nbXBpbGVkKSB7CiAgICAgICAgdGhpcy5faWQgPSBpZDsKICAgICAgICB0aGlz\nLl9zcWwgPSBzcWw7CiAgICAgICAgaWYgKGNvbXBpbGVkICE9IG51bGwpIHsK\nICAgICAgICAgICAgX2NhbmRpZGF0ZSAgICA9IGNvbXBpbGVkLmdldENhbmRp\nZGF0ZVR5cGUoKTsKICAgICAgICAgICAgX3N1YmNsYXNzZXMgICA9IGNvbXBp\nbGVkLmhhc1N1YmNsYXNzZXMoKTsKICAgICAgICB9CiAgICB9CiAgICAKICAg\nIHB1YmxpYyBTdHJpbmcgZ2V0SWRlbnRpZmllcigpIHsKICAgICAgICByZXR1\ncm4gX2lkOwogICAgfQogICAgCiAgICBwdWJsaWMgU3RyaW5nIGdldExhbmd1\nYWdlKCkgewogICAgICAgIHJldHVybiBRdWVyeUxhbmd1YWdlcy5MQU5HX1BS\nRVBBUkVEX1NRTDsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBHZXQgdGhl\nIG9yaWdpbmFsIHF1ZXJ5IHN0cmluZyB3aGljaCBpcyBzYW1lIGFzIHRoZSBp\nZGVudGlmaWVyIG9mIHRoaXMgCiAgICAgKiByZWNlaXZlci4KICAgICAqLwog\nICAgcHVibGljIFN0cmluZyBnZXRPcmlnaW5hbFF1ZXJ5KCkgewogICAgICAg\nIHJldHVybiBnZXRJZGVudGlmaWVyKCk7CiAgICB9CiAgICAKICAgIHB1Ymxp\nYyBTdHJpbmcgZ2V0VGFyZ2V0UXVlcnkoKSB7CiAgICAgICAgcmV0dXJuIF9z\ncWw7CiAgICB9CiAgICAKICAgIHZvaWQgc2V0VGFyZ2V0UXVlcnkoU3RyaW5n\nIHNxbCkgewogICAgICAgIF9zcWwgPSBzcWw7CiAgICB9CiAgICAKICAgIHB1\nYmxpYyBib29sZWFuIGlzSW5pdGlhbGl6ZWQoKSB7CiAgICAgICAgcmV0dXJu\nIF9pbml0aWFsaXplZDsKICAgIH0KICAgIAogICAgcHVibGljIFF1ZXJ5RXhw\ncmVzc2lvbnNbXSBnZXRRdWVyeUV4cHJlc3Npb25zKCkgewogICAgICAgIHJl\ndHVybiBfZXhwczsKICAgIH0KICAgIAogICAgcHVibGljIENsYXNzW10gZ2V0\nUHJvamVjdGlvblR5cGVzKCkgewogICAgICAgIHJldHVybiBfcHJvalR5cGVz\nOwogICAgfQogICAgCiAgICAvKioKICAgICAqIFBvdXJzIHRoZSBwb3N0LWNv\nbXBpbGF0aW9uIHN0YXRlIGhlbGQgYnkgdGhpcyByZWNlaXZlciB0byB0aGUg\nZ2l2ZW4KICAgICAqIHF1ZXJ5LgogICAgICovCiAgICBwdWJsaWMgdm9pZCBz\nZXRJbnRvKFF1ZXJ5IHEpIHsKICAgIAlxLnNldFF1ZXJ5KF9pZCk7CiAgICAg\nICAgcS5zZXRDYW5kaWRhdGVUeXBlKF9jYW5kaWRhdGUsIF9zdWJjbGFzc2Vz\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIEluaXRpYWxpemUgdGhpcyByZWNl\naXZlciB3aXRoIHBvc3QtZXhlY3V0aW9uIHJlc3VsdC4KICAgICAqIFRoZSBp\nbnB1dCBhcmd1bWVudCBpcyBwcm9jZXNzZWQgb25seSBpZiBpdCBpcyBhIHtA\nbGluayBSZXN1bHRMaXN0fSB3aXRoCiAgICAgKiBhbiBhdHRhY2hlZCB7QGxp\nbmsgU2VsZWN0UmVzdWx0T2JqZWN0UHJvdmlkZXJ9IGFzIGl0cwogICAgICog\ne0BsaW5rIFJlc3VsdExpc3QjZ2V0VXNlck9iamVjdCgpIHVzZXIgb2JqZWN0\nfS4gCiAgICAgKiAKICAgICAqIEByZXR1cm4gYW4gZXhjbHVzaW9uIGlmIGNh\nbiBub3QgYmUgaW5pdGlhbGl6ZWQgZm9yIHNvbWUgcmVhc29uLiAKICAgICAq\nIG51bGwgaWYgaW5pdGlhbGl6YXRpb24gaXMgc3VjY2Vzc2Z1bC4gCiAgICAg\nKi8KICAgIHB1YmxpYyBFeGNsdXNpb24gaW5pdGlhbGl6ZShPYmplY3QgcmVz\ndWx0KSB7CiAgICAgICAgaWYgKGlzSW5pdGlhbGl6ZWQoKSkKICAgICAgICAg\nICAgcmV0dXJuIG51bGw7CiAgICAgICAgT2JqZWN0W10gZXh0cmFjdCA9IGV4\ndHJhY3RTZWxlY3RFeGVjdXRvcihyZXN1bHQpOwogICAgICAgIFNlbGVjdEV4\nZWN1dG9yIHNlbGVjdG9yID0gKFNlbGVjdEV4ZWN1dG9yKWV4dHJhY3RbMF07\nCiAgICAgICAgaWYgKHNlbGVjdG9yID09IG51bGwpCiAgICAgICAgICAgIHJl\ndHVybiBuZXcgUHJlcGFyZWRRdWVyeUNhY2hlSW1wbC5TdHJvbmdFeGNsdXNp\nb24oX2lkLCAoKExvY2FsaXplci5NZXNzYWdlKWV4dHJhY3RbMV0pLmdldE1l\nc3NhZ2UoKSk7CiAgICAgICAgaWYgKHNlbGVjdG9yID09IG51bGwgfHwgc2Vs\nZWN0b3IuaGFzTXVsdGlwbGVTZWxlY3RzKCkKICAgICAgICAgICAgfHwgKChz\nZWxlY3RvciBpbnN0YW5jZW9mIFVuaW9uKSAKICAgICAgICAgICAgJiYgKCgo\nVW5pb24pc2VsZWN0b3IpLmdldFNlbGVjdHMoKS5sZW5ndGggIT0gMSkpKQog\nICAgICAgICAgICByZXR1cm4gbmV3IFByZXBhcmVkUXVlcnlDYWNoZUltcGwu\nU3Ryb25nRXhjbHVzaW9uKF9pZCwgX2xvYy5nZXQoImV4Y2x1ZGUtbXVsdGkt\nc2VsZWN0IiwgX2lkKS5nZXRNZXNzYWdlKCkpOwogICAgICAgIHNlbGVjdCA9\nIGV4dHJhY3RJbXBsZW1lbnRhdGlvbihzZWxlY3Rvcik7CiAgICAgICAgaWYg\nKHNlbGVjdCA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gbmV3IFByZXBh\ncmVkUXVlcnlDYWNoZUltcGwuU3Ryb25nRXhjbHVzaW9uKF9pZCwgX2xvYy5n\nZXQoImV4Y2x1ZGUtbm8tc2VsZWN0IiwgX2lkKS5nZXRNZXNzYWdlKCkpOwog\nICAgICAgIFNRTEJ1ZmZlciBidWZmZXIgPSBzZWxlY3Rvci5nZXRTUUwoKTsK\nICAgICAgICBpZiAoYnVmZmVyID09IG51bGwpCiAgICAgICAgICAgIHJldHVy\nbiBuZXcgUHJlcGFyZWRRdWVyeUNhY2hlSW1wbC5TdHJvbmdFeGNsdXNpb24o\nX2lkLCBfbG9jLmdldCgiZXhjbHVkZS1uby1zcWwiLCBfaWQpLmdldE1lc3Nh\nZ2UoKSk7OwogICAgICAgIGlmIChpc1VzaW5nRmllbGRTdHJhdGVneSgpKQog\nICAgICAgICAgICByZXR1cm4gbmV3IFByZXBhcmVkUXVlcnlDYWNoZUltcGwu\nU3Ryb25nRXhjbHVzaW9uKF9pZCwgCiAgICAgICAgICAgICAgICBfbG9jLmdl\ndCgiZXhjbHVkZS11c2VyLXN0cmF0ZWd5IiwgX2lkKS5nZXRNZXNzYWdlKCkp\nOzsKICAgICAgICAgICAgICAgIAogICAgICAgIGlmIChpc1BhZ2luYXRlZCgp\nKQogICAgICAgICAgICByZXR1cm4gbmV3IFByZXBhcmVkUXVlcnlDYWNoZUlt\ncGwuU3Ryb25nRXhjbHVzaW9uKF9pZCwgCiAgICAgICAgICAgICAgICBfbG9j\nLmdldCgiZXhjbHVkZS1wYWdpbmF0aW9uIiwgX2lkKS5nZXRNZXNzYWdlKCkp\nOzsKCiAgICAgICAgc2V0VGFyZ2V0UXVlcnkoYnVmZmVyLmdldFNRTCgpKTsK\nICAgICAgICBzZXRQYXJhbWV0ZXJzKGJ1ZmZlci5nZXRQYXJhbWV0ZXJzKCkp\nOwogICAgICAgIHNldFVzZXJQYXJhbWV0ZXJQb3NpdGlvbnMoYnVmZmVyLmdl\ndFVzZXJQYXJhbWV0ZXJzKCkpOwogICAgICAgIF9pbml0aWFsaXplZCA9IHRy\ndWU7CiAgICAgICAgCiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICAK\nICAgIC8qKgogICAgICogRXh0cmFjdCB0aGUgdW5kZXJseWluZyBTZWxlY3RF\neGVjdXRvciBmcm9tIHRoZSBnaXZlbiBhcmd1bWVudCwgaWYgcG9zc2libGUu\nCiAgICAgKiAKICAgICAqIEByZXR1cm4gdHdvIG9iamVjdHMgaW4gYW4gYXJy\nYXkuIFRoZSBlbGVtZW50IGF0IGluZGV4IDAgaXMgU2VsZWN0RXhlY3V0b3Is\nIAogICAgICogaWYgaXQgY2FuIGJlIGV4dHJhY3RlZC4gVGhlIGVsZW1lbnQg\nYXQgaW5kZXggMSBpcyB0aGUgcmVhc29uIHdoeSBpdCBjYW4KICAgICAqIG5v\ndCBiZSBleHRyYWN0ZWQuCiAgICAgKi8KICAgIHByaXZhdGUgT2JqZWN0W10g\nZXh0cmFjdFNlbGVjdEV4ZWN1dG9yKE9iamVjdCByZXN1bHQpIHsKICAgICAg\nICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUmVzdWx0TGlzdCA9PSBmYWxzZSkK\nICAgICAgICAgICAgcmV0dXJuIG5ldyBPYmplY3RbXXtudWxsLCBfbG9jLmdl\ndCgiZXhjbHVkZS1ub3QtcmVzdWx0IiwgX2lkKX07CiAgICAgICAgT2JqZWN0\nIHVzZXJPYmplY3QgPSAoKFJlc3VsdExpc3Q8Pz4pcmVzdWx0KS5nZXRVc2Vy\nT2JqZWN0KCk7CiAgICAgICAgaWYgKHVzZXJPYmplY3QgPT0gbnVsbCB8fCAh\ndXNlck9iamVjdC5nZXRDbGFzcygpLmlzQXJyYXkoKSB8fCAoKE9iamVjdFtd\nKXVzZXJPYmplY3QpLmxlbmd0aCAhPSAyKQogICAgICAgICAgICByZXR1cm4g\nbmV3IE9iamVjdFtde251bGwsIF9sb2MuZ2V0KCJleGNsdWRlLW5vLXVzZXIt\nb2JqZWN0IiwgX2lkKX07CiAgICAgICAgT2JqZWN0IHByb3ZpZGVyID0gKChP\nYmplY3RbXSl1c2VyT2JqZWN0KVswXTsKICAgICAgICBPYmplY3QgZXhlY3V0\nb3IgPSAoKE9iamVjdFtdKXVzZXJPYmplY3QpWzFdOwogICAgICAgIGlmIChl\neGVjdXRvciBpbnN0YW5jZW9mIFN0b3JlUXVlcnkuRXhlY3V0b3IgPT0gZmFs\nc2UpCiAgICAgICAgICAgIHJldHVybiBuZXcgT2JqZWN0W117bnVsbCwgX2xv\nYy5nZXQoImV4Y2x1ZGUtbm90LWV4ZWN1dG9yIiwgX2lkKX07CiAgICAgICAg\nX2V4cHMgPSAoKFN0b3JlUXVlcnkuRXhlY3V0b3IpZXhlY3V0b3IpLmdldFF1\nZXJ5RXhwcmVzc2lvbnMoKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8\nIF9leHBzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChpc1VzaW5n\nRXh0ZXJuYWxpemVkUGFyYW1ldGVyKF9leHBzW2ldKSkgewogICAgICAgICAg\nICAgICAgcmV0dXJuIG5ldyBPYmplY3RbXXtudWxsLCBfbG9jLmdldCgiZXhj\nbHVkZS1leHRlcm5hbGl6ZWQtcGFyYW0iLCBfaWQpfTsKICAgICAgICAgICAg\nfQogICAgICAgIH0KICAgICAgICBpZiAoX2V4cHNbMF0ucHJvamVjdGlvbnMu\nbGVuZ3RoID09IDApIHsKICAgICAgICAgICAgX3Byb2pUeXBlcyA9IFN0b3Jl\nUXVlcnkuRU1QVFlfQ0xBU1NFUzsKICAgICAgICB9IGVsc2UgewogICAgICAg\nICAgICBfcHJvalR5cGVzID0gbmV3IENsYXNzW19leHBzWzBdLnByb2plY3Rp\nb25zLmxlbmd0aF07CiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwg\nX2V4cHNbMF0ucHJvamVjdGlvbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAg\nICAgICAgIF9wcm9qVHlwZXNbaV0gPSBfZXhwc1swXS5wcm9qZWN0aW9uc1tp\nXS5nZXRUeXBlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAg\naWYgKHByb3ZpZGVyIGluc3RhbmNlb2YgUXVlcnlJbXBsLlBhY2tpbmdSZXN1\nbHRPYmplY3RQcm92aWRlcikgewogICAgICAgICAgICBwcm92aWRlciA9ICgo\nUXVlcnlJbXBsLlBhY2tpbmdSZXN1bHRPYmplY3RQcm92aWRlcilwcm92aWRl\ncikuZ2V0RGVsZWdhdGUoKTsKICAgICAgICB9CiAgICAgICAgaWYgKHByb3Zp\nZGVyIGluc3RhbmNlb2YgUmFuZ2VSZXN1bHRPYmplY3RQcm92aWRlcikgewog\nICAgICAgICAgICBwcm92aWRlciA9ICgoUmFuZ2VSZXN1bHRPYmplY3RQcm92\naWRlcilwcm92aWRlcikuZ2V0RGVsZWdhdGUoKTsKICAgICAgICB9CiAgICAg\nICAgaWYgKHByb3ZpZGVyIGluc3RhbmNlb2YgU2VsZWN0UmVzdWx0T2JqZWN0\nUHJvdmlkZXIpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBPYmplY3RbXXso\nKFNlbGVjdFJlc3VsdE9iamVjdFByb3ZpZGVyKXByb3ZpZGVyKS5nZXRTZWxl\nY3QoKSwgbnVsbH07CiAgICAgICAgfSAKICAgICAgICByZXR1cm4gbmV3IE9i\namVjdFtde251bGwsIF9sb2MuZ2V0KCJleGNsdWRlLW5vdC1zZWxlY3Qtcm9w\nIiwgX2lkLCBwcm92aWRlci5nZXRDbGFzcygpLmdldE5hbWUoKSl9OwogICAg\nfQogICAgCiAgICBwcml2YXRlIFNlbGVjdEltcGwgZXh0cmFjdEltcGxlbWVu\ndGF0aW9uKFNlbGVjdEV4ZWN1dG9yIHNlbGVjdG9yKSB7CiAgICAgICAgaWYg\nKHNlbGVjdG9yID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBudWxsOwog\nICAgICAgIGlmIChzZWxlY3RvciBpbnN0YW5jZW9mIFNlbGVjdEltcGwpIAog\nICAgICAgICAgICByZXR1cm4gKFNlbGVjdEltcGwpc2VsZWN0b3I7CiAgICAg\nICAgaWYgKHNlbGVjdG9yIGluc3RhbmNlb2YgTG9naWNhbFVuaW9uLlVuaW9u\nU2VsZWN0KQogICAgICAgICAgICByZXR1cm4gKChMb2dpY2FsVW5pb24uVW5p\nb25TZWxlY3Qpc2VsZWN0b3IpLmdldERlbGVnYXRlKCk7CiAgICAgICAgaWYg\nKHNlbGVjdG9yIGluc3RhbmNlb2YgVW5pb24pIAogICAgICAgICAgICByZXR1\ncm4gZXh0cmFjdEltcGxlbWVudGF0aW9uKCgoVW5pb24pc2VsZWN0b3IpLmdl\ndFNlbGVjdHMoKVswXSk7CiAgICAgICAgCiAgICAgICAgcmV0dXJuIG51bGw7\nCiAgICB9CiAgICAKICAgIHByaXZhdGUgYm9vbGVhbiBpc1VzaW5nRXh0ZXJu\nYWxpemVkUGFyYW1ldGVyKFF1ZXJ5RXhwcmVzc2lvbnMgZXhwKSB7CiAgICAg\nICAgaWYgKGV4cCA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7\nCiAgICAgICAgTGlzdDxGaWVsZE1ldGFEYXRhPiBmbWRzID0gZXhwLmdldFBh\ncmFtZXRlcml6ZWRGaWVsZHMoKTsKICAgICAgICBpZiAoZm1kcyA9PSBudWxs\nIHx8IGZtZHMuaXNFbXB0eSgpKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7\nCiAgICAgICAgZm9yIChGaWVsZE1ldGFEYXRhIGZtZCA6IGZtZHMpIHsKICAg\nICAgICAgICAgaWYgKGZtZC5pc0V4dGVybmFsaXplZCgpKQogICAgICAgICAg\nICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIHJldHVybiBm\nYWxzZTsKICAgIH0KICAgIAogICAgcHJpdmF0ZSBib29sZWFuIGlzUGFnaW5h\ndGVkKCkgewogICAgICAgIGlmIChzZWxlY3QgaW5zdGFuY2VvZiBTZWxlY3RJ\nbXBsKSB7CiAgICAgICAgICAgIGlmICgoKFNlbGVjdEltcGwpc2VsZWN0KS5n\nZXRTdGFydEluZGV4KCkgIT0gMCB8fCAKICAgICAgICAgICAgICAgICgoU2Vs\nZWN0SW1wbClzZWxlY3QpLmdldEVuZEluZGV4KCkgIT0gTG9uZy5NQVhfVkFM\nVUUpCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAg\nICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSAgICAgICAgCiAgICBwcml2YXRl\nIGJvb2xlYW4gaXNVc2luZ0ZpZWxkU3RyYXRlZ3koKSB7CiAgICAgICAgZm9y\nIChpbnQgaSA9IDA7IGkgPCBfZXhwcy5sZW5ndGg7IGkrKykgewogICAgICAg\nICAgICBpZiAoaXNVc2luZ0ZpZWxkU3RyYXRlZ3koX2V4cHNbaV0pKSB7CiAg\nICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAg\nICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgcHJpdmF0\nZSBib29sZWFuIGlzVXNpbmdGaWVsZFN0cmF0ZWd5KFF1ZXJ5RXhwcmVzc2lv\nbnMgZXhwKSB7CiAgICAgICAgaWYgKGV4cCA9PSBudWxsKQogICAgICAgICAg\nICByZXR1cm4gZmFsc2U7CiAgICAgICAgTGlzdDxGaWVsZE1ldGFEYXRhPiBm\nbWRzID0gZXhwLmdldFBhcmFtZXRlcml6ZWRGaWVsZHMoKTsKICAgICAgICBp\nZiAoZm1kcyA9PSBudWxsIHx8IGZtZHMuaXNFbXB0eSgpKQogICAgICAgICAg\nICByZXR1cm4gZmFsc2U7CiAgICAgICAgZm9yIChGaWVsZE1ldGFEYXRhIGZt\nZCA6IGZtZHMpIHsKICAgICAgICAgICAgaWYgKCgoRmllbGRNYXBwaW5nKWZt\nZCkuZ2V0TWFwcGluZ0luZm8oKS5nZXRTdHJhdGVneSgpICE9IG51bGwpCiAg\nICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAg\ncmV0dXJuIGZhbHNlOwogICAgfQogICAgCiAgICAvKioKICAgICAqIE1lcmdl\nIHRoZSBnaXZlbiB1c2VyIHBhcmFtZXRlcnMgd2l0aCBpdHMgb3duIHBhcmFt\nZXRlci4gVGhlIGdpdmVuIG1hcAogICAgICogbXVzdCBiZSBjb21wYXRpYmxl\nIHdpdGggdGhlIHVzZXIgcGFyYW1ldGVycyBleHRyYWN0ZWQgZHVyaW5nIAog\nICAgICoge0BsaW5rICNpbml0aWFsaXplKE9iamVjdCkgaW5pdGlhbGl6YXRp\nb259LiAKICAgICAqIAogICAgICogQHJldHVybiAwLWJhc2VkIHBhcmFtZXRl\nciBpbmRleCBtYXBwZWQgdG8gY29ycmVzcG9uZGluZyB2YWx1ZXMuCiAgICAg\nKiAKICAgICAqLwogICAgcHVibGljIE1hcDxJbnRlZ2VyLCBPYmplY3Q+IHJl\ncGFyYW1ldHJpemUoTWFwIHVzZXIsIEJyb2tlciBicm9rZXIpIHsKICAgICAg\nICBpZiAoIWlzSW5pdGlhbGl6ZWQoKSkKICAgICAgICAgICAgdGhyb3cgbmV3\nIEludGVybmFsRXhjZXB0aW9uKCJyZXBhcmFtZXRlcml6ZSgpIG9uIHVuaW5p\ndGlhbGl6ZWQuIik7CiAgICAgICAgaWYgKHVzZXIgPT0gbnVsbCB8fCB1c2Vy\nLmlzRW1wdHkoKSkgewogICAgICAgICAgICBpZiAoIV91c2VyUGFyYW1Qb3Np\ndGlvbnMuaXNFbXB0eSgpKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcg\nVXNlckV4Y2VwdGlvbihfbG9jLmdldCgidXBhcmFtLW51bGwiLCAKICAgICAg\nICAgICAgICAgICAgICBfdXNlclBhcmFtUG9zaXRpb25zLmtleVNldCgpLCB0\naGlzKSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBy\nZXR1cm4gX3RlbXBsYXRlOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAg\nICAgIGlmICghX3VzZXJQYXJhbVBvc2l0aW9ucy5rZXlTZXQoKS5lcXVhbHMo\ndXNlci5rZXlTZXQoKSkpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJF\neGNlcHRpb24oX2xvYy5nZXQoInVwYXJhbS1taXNtYXRjaCIsIAogICAgICAg\nICAgICAgICAgX3VzZXJQYXJhbVBvc2l0aW9ucy5rZXlTZXQoKSwgdXNlci5r\nZXlTZXQoKSwgdGhpcykpOwogICAgICAgIH0KICAgICAgICBNYXA8SW50ZWdl\nciwgT2JqZWN0PiByZXN1bHQgPSBuZXcgSGFzaE1hcDxJbnRlZ2VyLCBPYmpl\nY3Q+KF90ZW1wbGF0ZSk7CiAgICAgICAgCiAgICAgICAgZm9yIChPYmplY3Qg\na2V5IDogdXNlci5rZXlTZXQoKSkgewogICAgICAgICAgICBpbnRbXSBpbmRp\nY2VzID0gX3VzZXJQYXJhbVBvc2l0aW9ucy5nZXQoa2V5KTsKICAgICAgICAg\nICAgaWYgKGluZGljZXMgPT0gbnVsbCB8fCBpbmRpY2VzLmxlbmd0aCA9PSAw\nKQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFeGNlcHRpb24oX2xv\nYy5nZXQoInVwYXJhbS1uby1wb3MiLCBrZXksIHRoaXMpKTsKICAgICAgICAg\nICAgT2JqZWN0IHZhbCA9IHVzZXIuZ2V0KGtleSk7CiAgICAgICAgICAgIGlm\nIChJbXBsSGVscGVyLmlzTWFuYWdlYWJsZSh2YWwpKSB7CiAgICAgICAgICAg\nICAgICBzZXRQZXJzaXN0ZW5jZUNhcGFibGVQYXJhbWV0ZXIocmVzdWx0LCB2\nYWwsIGluZGljZXMsIGJyb2tlcik7CiAgICAgICAgICAgIH0gZWxzZSBpZiAo\ndmFsIGluc3RhbmNlb2YgQ29sbGVjdGlvbikgewogICAgICAgICAgICAgICAg\nc2V0Q29sbGVjdGlvblZhbHVlZFBhcmFtZXRlcihyZXN1bHQsIChDb2xsZWN0\naW9uKXZhbCwgaW5kaWNlcywgCiAgICAgICAgICAgICAgICAgICAga2V5KTsK\nICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGZvciAoaW50\nIGogOiBpbmRpY2VzKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCBp\nbnN0YW5jZW9mIEVudW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYg\nKF90ZW1wbGF0ZS5nZXQoaikgaW5zdGFuY2VvZiBJbnRlZ2VyKSB7CiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSAoKEVudW0pdmFsKS5vcmRp\nbmFsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSAoKEVudW0pdmFsKS5uYW1l\nKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAg\nICAgICB9IAogICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXQoaiwgdmFs\nKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0K\nICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgCiAgICAvKioKICAg\nICAqIENhbGN1bGF0ZSBwcmltYXJ5IGtleSBpZGVudGl0eSB2YWx1ZShzKSBv\nZiB0aGUgZ2l2ZW4gbWFuYWdlYWJsZSBpbnN0YW5jZQogICAgICogYW5kIGZp\nbGwgaW4gdGhlIGdpdmVuIG1hcC4KICAgICAqIAogICAgICogQHBhcmFtIHZh\nbHVlcyBhIG1hcCBvZiBpbnRlZ2VyIHBhcmFtZXRlciBpbmRleCB0byBwYXJh\nbWV0ZXIgdmFsdWUKICAgICAqIEBwYXJhbSBwYyBhIG1hbmFnZWFibGUgaW5z\ndGFuY2UKICAgICAqIEBwYXJhbSBpbmRpY2VzIHRoZSBpbmRpY2VzIG9mIHRo\nZSBjb2x1bW4gdmFsdWVzCiAgICAgKiBAcGFyYW0gYnJva2VyIHVzZWQgdG8g\nb2J0YWluIHRoZSBwcmltYXJ5IGtleSB2YWx1ZXMKICAgICAqLwogICAgcHJp\ndmF0ZSB2b2lkIHNldFBlcnNpc3RlbmNlQ2FwYWJsZVBhcmFtZXRlcihNYXA8\nSW50ZWdlcixPYmplY3Q+IHJlc3VsdCwgCiAgICAgICAgT2JqZWN0IHBjLCBp\nbnRbXSBpbmRpY2VzLCBCcm9rZXIgYnJva2VyKSB7CiAgICAgICAgSkRCQ1N0\nb3JlIHN0b3JlID0gKEpEQkNTdG9yZSlicm9rZXIuZ2V0U3RvcmVNYW5hZ2Vy\nKCkKICAgICAgICAgICAgLmdldElubmVybW9zdERlbGVnYXRlKCk7CiAgICAg\nICAgTWFwcGluZ1JlcG9zaXRvcnkgcmVwb3MgPSBzdG9yZS5nZXRDb25maWd1\ncmF0aW9uKCkKICAgICAgICAgICAgLmdldE1hcHBpbmdSZXBvc2l0b3J5SW5z\ndGFuY2UoKTsKICAgICAgICBDbGFzc01hcHBpbmcgbWFwcGluZyA9IHJlcG9z\nLmdldE1hcHBpbmcocGMuZ2V0Q2xhc3MoKSwgCiAgICAgICAgICAgIGJyb2tl\nci5nZXRDbGFzc0xvYWRlcigpLCB0cnVlKTsKICAgICAgICBDb2x1bW5bXSBw\na3MgPSBtYXBwaW5nLmdldFByaW1hcnlLZXlDb2x1bW5zKCk7CiAgICAgICAg\nT2JqZWN0IGNvbHMgPSBtYXBwaW5nLnRvRGF0YVN0b3JlVmFsdWUocGMsIHBr\ncywgc3RvcmUpOwogICAgICAgIGlmIChjb2xzIGluc3RhbmNlb2YgT2JqZWN0\nW10pIHsKICAgICAgICAgICAgT2JqZWN0W10gYXJyYXkgPSAoT2JqZWN0W10p\nY29sczsKICAgICAgICAgICAgaW50IG4gPSBhcnJheS5sZW5ndGg7CiAgICAg\nICAgICAgIGlmIChuID4gaW5kaWNlcy5sZW5ndGggfHwgaW5kaWNlcy5sZW5n\ndGglbiAhPSAwKQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFeGNl\ncHRpb24oX2xvYy5nZXQoInVwYXJhbS1wYy1rZXkiLCAKICAgICAgICAgICAg\nICAgICAgICBwYy5nZXRDbGFzcygpLCBuLCBBcnJheXMudG9TdHJpbmcoaW5k\naWNlcykpKTsKICAgICAgICAgICAgaW50IGsgPSAwOwogICAgICAgICAgICBm\nb3IgKGludCBqIDogaW5kaWNlcykgewogICAgICAgICAgICAgICAgcmVzdWx0\nLnB1dChqLCBhcnJheVtrJW5dKTsKICAgICAgICAgICAgICAgIGsrKzsKICAg\nICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGZvciAo\naW50IGogOiBpbmRpY2VzKSB7CiAgICAgICAgICAgICAgICByZXN1bHQucHV0\nKGosIGNvbHMpOwogICAgICAgICAgICB9CiAgICAgICAgfSAKICAgIH0KICAg\nIAogICAgcHJpdmF0ZSB2b2lkIHNldENvbGxlY3Rpb25WYWx1ZWRQYXJhbWV0\nZXIoTWFwPEludGVnZXIsT2JqZWN0PiByZXN1bHQsIAogICAgICAgIENvbGxl\nY3Rpb24gdmFsdWVzLCBpbnRbXSBpbmRpY2VzLCBPYmplY3QgcGFyYW0pIHsK\nICAgICAgICBpbnQgbiA9IHZhbHVlcy5zaXplKCk7CiAgICAgICAgT2JqZWN0\nW10gYXJyYXkgPSB2YWx1ZXMudG9BcnJheSgpOwogICAgICAgIGlmIChuID4g\naW5kaWNlcy5sZW5ndGggfHwgaW5kaWNlcy5sZW5ndGglbiAhPSAwKSB7CiAg\nICAgICAgICAgIHRocm93IG5ldyBVc2VyRXhjZXB0aW9uKF9sb2MuZ2V0KCJ1\ncGFyYW0tY29sbC1zaXplIiwgcGFyYW0sIHZhbHVlcywgCiAgICAgICAgICAg\nICAgICBBcnJheXMudG9TdHJpbmcoaW5kaWNlcykpKTsKICAgICAgICB9CiAg\nICAgICAgaW50IGsgPSAwOwogICAgICAgIGZvciAoaW50IGogOiBpbmRpY2Vz\nKSB7CiAgICAgICAgICAgIHJlc3VsdC5wdXQoaiwgYXJyYXlbayVuXSk7CiAg\nICAgICAgICAgIGsrKzsKICAgICAgICB9CiAgICAgICAgCiAgICB9CiAgICAv\nKioKICAgICAqIE1hcmtzIHRoZSBwb3NpdGlvbnMgYW5kIGtleXMgb2YgdXNl\nciBwYXJhbWV0ZXJzLgogICAgICogCiAgICAgKiBAcGFyYW0gbGlzdCBldmVu\nIGVsZW1lbnRzIGFyZSBudW1iZXJzIHJlcHJlc2VudGluZyB0aGUgcG9zaXRp\nb24gb2YgYSAKICAgICAqIHVzZXIgcGFyYW1ldGVyIGluIHRoZSBfcGFyYW0g\nbGlzdC4gT2RkIGVsZW1lbnRzIGFyZSB0aGUgdXNlciBwYXJhbWV0ZXIKICAg\nICAqIGtleS4gQSB1c2VyIHBhcmFtZXRlciBrZXkgbWF5IGFwcGVhciBtb3Jl\nIHRoYW4gb25jZS4KICAgICAqLwogICAgdm9pZCBzZXRVc2VyUGFyYW1ldGVy\nUG9zaXRpb25zKExpc3QgbGlzdCkgewogICAgICAgIF91c2VyUGFyYW1Qb3Np\ndGlvbnMgPSBuZXcgSGFzaE1hcDxPYmplY3QsIGludFtdPigpOwogICAgICAg\nIGZvciAoaW50IGkgPSAxOyBsaXN0ICE9IG51bGwgJiYgaSA8IGxpc3Quc2l6\nZSgpOyBpICs9IDIpIHsKICAgICAgICAgICAgT2JqZWN0IGtleSA9IGxpc3Qu\nZ2V0KGkpOwogICAgICAgICAgICBpbnQgcCA9IChJbnRlZ2VyKWxpc3QuZ2V0\nKGktMSk7CiAgICAgICAgICAgIGludFtdIHBvc2l0aW9ucyA9IF91c2VyUGFy\nYW1Qb3NpdGlvbnMuZ2V0KGtleSk7CiAgICAgICAgICAgIGlmIChwb3NpdGlv\nbnMgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgcG9zaXRpb25zID0gbmV3\nIGludFtde3B9OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAg\nICAgaW50W10gdGVtcCA9IG5ldyBpbnRbcG9zaXRpb25zLmxlbmd0aCsxXTsK\nICAgICAgICAgICAgICAgIFN5c3RlbS5hcnJheWNvcHkocG9zaXRpb25zLCAw\nLCB0ZW1wLCAwLCBwb3NpdGlvbnMubGVuZ3RoKTsKICAgICAgICAgICAgICAg\nIHRlbXBbcG9zaXRpb25zLmxlbmd0aF0gPSBwOwogICAgICAgICAgICAgICAg\ncG9zaXRpb25zID0gdGVtcDsKICAgICAgICAgICAgfQogICAgICAgICAgICBf\ndXNlclBhcmFtUG9zaXRpb25zLnB1dChrZXksIHBvc2l0aW9ucyk7CiAgICAg\nICAgfQogICAgfQogICAgCiAgICB2b2lkIHNldFBhcmFtZXRlcnMoTGlzdCBs\naXN0KSB7CiAgICAgICAgTWFwPEludGVnZXIsIE9iamVjdD4gdG1wID0gbmV3\nIEhhc2hNYXA8SW50ZWdlciwgT2JqZWN0PigpOwogICAgICAgIGZvciAoaW50\nIGkgPSAwOyBsaXN0ICE9IG51bGwgJiYgaSA8IGxpc3Quc2l6ZSgpOyBpKysp\nIHsKICAgICAgICAgICAgdG1wLnB1dChpLCBsaXN0LmdldChpKSk7CiAgICAg\nICAgfQogICAgICAgIF90ZW1wbGF0ZSA9IENvbGxlY3Rpb25zLnVubW9kaWZp\nYWJsZU1hcCh0bXApOwogICAgfQogICAgCiAgICBTZWxlY3RJbXBsIGdldFNl\nbGVjdCgpIHsKICAgICAgICByZXR1cm4gc2VsZWN0OwogICAgfQogICAgCiAg\nICBwdWJsaWMgU3RyaW5nIHRvU3RyaW5nKCkgewogICAgICAgIHJldHVybiAi\nUHJlcGFyZWRRdWVyeTogWyIgKyBnZXRPcmlnaW5hbFF1ZXJ5KCkgKyAiXSAt\nLT4gWyIgKyAKICAgICAgICAgICAgICAgZ2V0VGFyZ2V0UXVlcnkoKSArICJd\nIjsKICAgIH0KfQo=\n","encoding":"base64"}

