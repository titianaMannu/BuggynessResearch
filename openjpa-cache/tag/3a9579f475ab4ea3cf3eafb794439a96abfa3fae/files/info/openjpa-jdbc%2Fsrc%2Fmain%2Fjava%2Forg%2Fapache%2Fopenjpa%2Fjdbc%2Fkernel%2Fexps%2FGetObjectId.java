{"sha":"5343345012ccaf139e449e31aa5fa795929e71e9","node_id":"MDQ6QmxvYjIwNjM2NDo1MzQzMzQ1MDEyY2NhZjEzOWU0NDllMzFhYTVmYTc5NTkyOWU3MWU5","size":5854,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/5343345012ccaf139e449e31aa5fa795929e71e9","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuZXhwczsK\nCmltcG9ydCBqYXZhLnNxbC5TUUxFeGNlcHRpb247CgppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMubWV0YS5DbGFzc01hcHBpbmc7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLkpvaW5hYmxlOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLkNvbHVtbjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5SZXN1bHQ7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuU1FMQnVmZmVyOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNlbGVjdDsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuRmlsdGVyczsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5rZXJuZWwuZXhwcy5FeHByZXNzaW9uVmlzaXRvcjsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6ZXI7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5DbGFzc01ldGFEYXRh\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuQXBwbGljYXRpb25J\nZHM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5JZDsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLk9wZW5KUEFJZDsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS51dGlsLlVzZXJFeGNlcHRpb247CgovKioKICog\nU2VsZWN0IHRoZSBvaWQgdmFsdWUgb2YgYW4gb2JqZWN0OyB0eXBpY2FsbHkg\ndXNlZCBpbiBwcm9qZWN0aW9ucy4KICoKICogQGF1dGhvciBBYmUgV2hpdGUK\nICovCmNsYXNzIEdldE9iamVjdElkCiAgICBleHRlbmRzIEFic3RyYWN0VmFs\nIHsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6ZXIgX2xvYyA9\nIExvY2FsaXplci5mb3JQYWNrYWdlCiAgICAgICAgKEdldE9iamVjdElkLmNs\nYXNzKTsKCiAgICBwcml2YXRlIGZpbmFsIFBDUGF0aCBfcGF0aDsKICAgIHBy\naXZhdGUgQ2xhc3NNZXRhRGF0YSBfbWV0YSA9IG51bGw7CgogICAgLyoqCiAg\nICAgKiBDb25zdHJ1Y3Rvci4gUHJvdmlkZSB0aGUgdmFsdWUgd2hvc2Ugb2lk\nIHRvIGV4dHJhY3QuCiAgICAgKi8KICAgIHB1YmxpYyBHZXRPYmplY3RJZChQ\nQ1BhdGggcGF0aCkgewogICAgICAgIF9wYXRoID0gcGF0aDsKICAgIH0KCiAg\nICAvKioKICAgICAqIFJldHVybiB0aGUgb2lkIGNvbHVtbnMuCiAgICAgKi8K\nICAgIHB1YmxpYyBDb2x1bW5bXSBnZXRDb2x1bW5zKEV4cFN0YXRlIHN0YXRl\nKSB7CiAgICAgICAgcmV0dXJuIF9wYXRoLmdldENsYXNzTWFwcGluZyhzdGF0\nZSkuZ2V0UHJpbWFyeUtleUNvbHVtbnMoKTsKICAgIH0KCiAgICBwdWJsaWMg\nQ2xhc3NNZXRhRGF0YSBnZXRNZXRhRGF0YSgpIHsKICAgICAgICByZXR1cm4g\nX21ldGE7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0TWV0YURhdGEoQ2xh\nc3NNZXRhRGF0YSBtZXRhKSB7CiAgICAgICAgX21ldGEgPSBtZXRhOwogICAg\nfQoKICAgIHB1YmxpYyBDbGFzcyBnZXRUeXBlKCkgewogICAgICAgIHJldHVy\nbiBPYmplY3QuY2xhc3M7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0SW1w\nbGljaXRUeXBlKENsYXNzIHR5cGUpIHsKICAgIH0KCiAgICBwdWJsaWMgRXhw\nU3RhdGUgaW5pdGlhbGl6ZShTZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwg\naW50IGZsYWdzKSB7CiAgICAgICAgRXhwU3RhdGUgc3RhdGUgPSBfcGF0aC5p\nbml0aWFsaXplKHNlbCwgY3R4LCBKT0lOX1JFTCk7CgogICAgICAgIC8vIGl0\nJ3MgZGlmZmljdWx0IHRvIGdldCBjYWxscyBvbiBub24tcGMgZmllbGRzIHRv\nIGFsd2F5cyByZXR1cm4gbnVsbAogICAgICAgIC8vIHdpdGhvdXQgc2NyZXdp\nbmcgdXAgdGhlIFNRTCwgdG8ganVzdCBkb24ndCBsZXQgdXNlcnMgY2FsbCBp\ndCBvbgogICAgICAgIC8vIG5vbi1wYyBmaWVsZHMgYXQgYWxsCiAgICAgICAg\nQ2xhc3NNYXBwaW5nIGNscyA9IF9wYXRoLmdldENsYXNzTWFwcGluZyhzdGF0\nZSk7CiAgICAgICAgaWYgKGNscyA9PSBudWxsIHx8IGNscy5nZXRFbWJlZGRp\nbmdNYXBwaW5nKCkgIT0gbnVsbCkKICAgICAgICAgICAgdGhyb3cgbmV3IFVz\nZXJFeGNlcHRpb24oX2xvYy5nZXQoImJhZC1nZXRvYmplY3RpZCIsCiAgICAg\nICAgICAgICAgICBfcGF0aC5nZXRGaWVsZE1hcHBpbmcoc3RhdGUpKSk7CiAg\nICAgICAgcmV0dXJuIHN0YXRlOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3Qg\ndG9EYXRhU3RvcmVWYWx1ZShTZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwg\nRXhwU3RhdGUgc3RhdGUsIAogICAgICAgIE9iamVjdCB2YWwpIHsKICAgICAg\nICAvLyBpZiBkYXRhc3RvcmUgaWRlbnRpdHksIHRyeSB0byBjb252ZXJ0IHRv\nIGEgbG9uZyB2YWx1ZQogICAgICAgIENsYXNzTWFwcGluZyBtYXBwaW5nID0g\nX3BhdGguZ2V0Q2xhc3NNYXBwaW5nKHN0YXRlKTsKICAgICAgICBpZiAobWFw\ncGluZy5nZXRJZGVudGl0eVR5cGUoKSA9PSBtYXBwaW5nLklEX0RBVEFTVE9S\nRSkgewogICAgICAgICAgICBpZiAodmFsIGluc3RhbmNlb2YgSWQpCiAgICAg\nICAgICAgICAgICByZXR1cm4gKChJZCkgdmFsKS5nZXRJZCgpOwogICAgICAg\nICAgICByZXR1cm4gRmlsdGVycy5jb252ZXJ0KHZhbCwgbG9uZy5jbGFzcyk7\nCiAgICAgICAgfQoKICAgICAgICAvLyBpZiB1bmtub3duIGlkZW50aXR5LCBj\nYW4ndCBkbyBtdWNoCiAgICAgICAgaWYgKG1hcHBpbmcuZ2V0SWRlbnRpdHlU\neXBlKCkgPT0gbWFwcGluZy5JRF9VTktOT1dOKQogICAgICAgICAgICByZXR1\ncm4gKHZhbCBpbnN0YW5jZW9mIE9wZW5KUEFJZCkgPwogICAgICAgICAgICAg\nICAgKChPcGVuSlBBSWQpIHZhbCkuZ2V0SWRPYmplY3QoKSA6IHZhbDsKCiAg\nICAgICAgLy8gYXBwbGljYXRpb24gaWRlbnRpdHk7IGNvbnZlcnQgdG8gcGsg\ndmFsdWVzIGluIHRoZSBzYW1lIG9yZGVyIGFzCiAgICAgICAgLy8gdGhlIG1h\ncHBpbmcncyBwcmltYXJ5IGtleSBjb2x1bW5zIHdpbGwgYmUgcmV0dXJuZWQK\nICAgICAgICBPYmplY3RbXSBwa3MgPSBBcHBsaWNhdGlvbklkcy50b1BLVmFs\ndWVzKHZhbCwgbWFwcGluZyk7CiAgICAgICAgaWYgKHBrcy5sZW5ndGggPT0g\nMSkKICAgICAgICAgICAgcmV0dXJuIHBrc1swXTsKICAgICAgICBpZiAodmFs\nID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBwa3M7CiAgICAgICAgd2hp\nbGUgKCFtYXBwaW5nLmlzUHJpbWFyeUtleU9iamVjdElkKGZhbHNlKSkKICAg\nICAgICAgICAgbWFwcGluZyA9IG1hcHBpbmcuZ2V0Sm9pbmFibGVQQ1N1cGVy\nY2xhc3NNYXBwaW5nKCk7CgogICAgICAgIENvbHVtbltdIGNvbHMgPSBtYXBw\naW5nLmdldFByaW1hcnlLZXlDb2x1bW5zKCk7CiAgICAgICAgT2JqZWN0W10g\ndmFscyA9IG5ldyBPYmplY3RbY29scy5sZW5ndGhdOwogICAgICAgIEpvaW5h\nYmxlIGpvaW47CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb2xzLmxl\nbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGpvaW4gPSBtYXBwaW5nLmFzc2Vy\ndEpvaW5hYmxlKGNvbHNbaV0pOwogICAgICAgICAgICB2YWxzW2ldID0gcGtz\nW21hcHBpbmcuZ2V0RmllbGQoam9pbi5nZXRGaWVsZEluZGV4KCkpLgogICAg\nICAgICAgICAgICAgZ2V0UHJpbWFyeUtleUluZGV4KCldOwogICAgICAgICAg\nICB2YWxzW2ldID0gam9pbi5nZXRKb2luVmFsdWUodmFsc1tpXSwgY29sc1tp\nXSwgY3R4LnN0b3JlKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHZhbHM7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgc2VsZWN0KFNlbGVjdCBzZWwsIEV4\ncENvbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSwgCiAgICAgICAgYm9vbGVh\nbiBwa3MpIHsKICAgICAgICBzZWxlY3RDb2x1bW5zKHNlbCwgY3R4LCBzdGF0\nZSwgdHJ1ZSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2VsZWN0Q29sdW1u\ncyhTZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUs\nIAogICAgICAgIGJvb2xlYW4gcGtzKSB7CiAgICAgICAgX3BhdGguc2VsZWN0\nQ29sdW1ucyhzZWwsIGN0eCwgc3RhdGUsIHRydWUpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIGdyb3VwQnkoU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgs\nIEV4cFN0YXRlIHN0YXRlKSB7CiAgICAgICAgX3BhdGguZ3JvdXBCeShzZWws\nIGN0eCwgc3RhdGUpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIG9yZGVyQnko\nU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlLCAK\nICAgICAgICBib29sZWFuIGFzYykgewogICAgICAgIF9wYXRoLm9yZGVyQnko\nc2VsLCBjdHgsIHN0YXRlLCBhc2MpOwogICAgfQoKICAgIHB1YmxpYyBPYmpl\nY3QgbG9hZChFeHBDb250ZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUsIFJlc3Vs\ndCByZXMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAg\ncmV0dXJuIF9wYXRoLmxvYWQoY3R4LCBzdGF0ZSwgcmVzLCB0cnVlKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBjYWxjdWxhdGVWYWx1ZShTZWxlY3Qgc2Vs\nLCBFeHBDb250ZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUsIAogICAgICAgIFZh\nbCBvdGhlciwgRXhwU3RhdGUgb3RoZXJTdGF0ZSkgewogICAgICAgIF9wYXRo\nLmNhbGN1bGF0ZVZhbHVlKHNlbCwgY3R4LCBzdGF0ZSwgbnVsbCwgbnVsbCk7\nCiAgICB9CgogICAgcHVibGljIGludCBsZW5ndGgoU2VsZWN0IHNlbCwgRXhw\nQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlKSB7CiAgICAgICAgcmV0dXJu\nIF9wYXRoLmxlbmd0aChzZWwsIGN0eCwgc3RhdGUpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIGFwcGVuZFRvKFNlbGVjdCBzZWwsIEV4cENvbnRleHQgY3R4\nLCBFeHBTdGF0ZSBzdGF0ZSwgCiAgICAgICAgU1FMQnVmZmVyIHNxbCwgaW50\nIGluZGV4KSB7CiAgICAgICAgX3BhdGguYXBwZW5kVG8oc2VsLCBjdHgsIHN0\nYXRlLCBzcWwsIGluZGV4KTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBhY2Nl\ncHRWaXNpdChFeHByZXNzaW9uVmlzaXRvciB2aXNpdG9yKSB7CiAgICAgICAg\ndmlzaXRvci5lbnRlcih0aGlzKTsKICAgICAgICBfcGF0aC5hY2NlcHRWaXNp\ndCh2aXNpdG9yKTsKICAgICAgICB2aXNpdG9yLmV4aXQodGhpcyk7CiAgICB9\nCn0KCg==\n","encoding":"base64"}

