{"sha":"d5d1a0e0eaece695414f83847e1afdfab4a28115","node_id":"MDQ6QmxvYjIwNjM2NDpkNWQxYTBlMGVhZWNlNjk1NDE0ZjgzODQ3ZTFhZmRmYWI0YTI4MTE1","size":21650,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/d5d1a0e0eaece695414f83847e1afdfab4a28115","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWE7CgppbXBv\ncnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEuaW8uSW5wdXRT\ndHJlYW1SZWFkZXI7CmltcG9ydCBqYXZhLmlvLlJlYWRlcjsKaW1wb3J0IGph\ndmEudXRpbC5Db2xsZWN0aW9uOwppbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9y\nOwppbXBvcnQgamF2YS51dGlsLkxpbmtlZExpc3Q7CgppbXBvcnQgb3JnLnht\nbC5zYXguQXR0cmlidXRlczsKaW1wb3J0IG9yZy54bWwuc2F4LkxvY2F0b3I7\nCmltcG9ydCBvcmcueG1sLnNheC5TQVhFeGNlcHRpb247CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuamRiYy5jb25mLkpEQkNDb25maWd1cmF0aW9uOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLkRCRGljdGlvbmFy\neTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIubWV0YS5Tb3VyY2VU\ncmFja2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5tZXRhLlhN\nTE1ldGFEYXRhUGFyc2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxp\nYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5s\naWIudXRpbC5Mb2NhbGl6ZXIuTWVzc2FnZTsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS51dGlsLlVzZXJFeGNlcHRpb247CgoKLyoqCiAqIEN1c3RvbSBT\nQVggcGFyc2VyIHVzZWQgdG8gcGFyc2Uge0BsaW5rIFNjaGVtYX0gb2JqZWN0\ncy4gVGhlIHBhcnNlcgogKiB3aWxsIHBsYWNlIGFsbCBwYXJzZWQgc2NoZW1h\ncyBpbnRvIHRoZSBjdXJyZW50IHtAbGluayBTY2hlbWFHcm91cH0sIHNldAog\nKiB2aWEgdGhlIHtAbGluayAjc2V0U2NoZW1hR3JvdXB9IG1ldGhvZC4gVGhp\ncyBhbGxvd3MgcGFyc2luZyBvZgogKiBtdWx0aXBsZSBmaWxlcyBpbnRvIGEg\nc2luZ2xlIHNjaGVtYSBncm91cC4KICogIFRoZSBwYXJzZXIgZGVzZXJpYWxp\nemVzIGZyb20gdGhlIGZvbGxvd2luZyBYTUwgZm9ybWF0OjxiciAvPgogKiA8\nY29kZT4gJmx0OyFFTEVNRU5UIHNjaGVtYXMgKHNjaGVtYSkrJmd0OzxiciAv\nPgogKiAmbHQ7IUVMRU1FTlQgc2NoZW1hICh0YWJsZXxzZXF1ZW5jZSkrJmd0\nOzxiciAvPgogKiAmbHQ7IUFUVExJU1Qgc2NoZW1hIG5hbWUgQ0RBVEEgI0lN\nUExJRUQmZ3Q7PGJyIC8+CiAqICZsdDshRUxFTUVOVCB0YWJsZSAoY29sdW1u\nfGluZGV4fHBrfGZrfHVuaXF1ZSkrJmd0OzxiciAvPgogKiAmbHQ7IUFUVExJ\nU1QgdGFibGUgbmFtZSBDREFUQSAjUkVRVUlSRUQmZ3Q7PGJyIC8+CiAqICZs\ndDshRUxFTUVOVCBjb2x1bW4gRU1QVFkmZ3Q7PGJyIC8+CiAqICZsdDshQVRU\nTElTVCBjb2x1bW4gbmFtZSBDREFUQSAjUkVRVUlSRUQmZ3Q7PGJyIC8+CiAq\nICZsdDshQVRUTElTVCBjb2x1bW4gdHlwZSAoYXJyYXl8YmlnaW50fGJpbmFy\neXxiaXR8YmxvYnxjaGFyfGNsb2IKICogfGRhdGV8ZGVjaW1hbHxkaXN0aW5j\ndHxkb3VibGV8ZmxvYXR8aW50ZWdlcnxqYXZhX29iamVjdAogKiB8bG9uZ3Zh\ncmJpbmFyeXxsb25ndmFyY2hhcnxudWxsfG51bWVyaWN8b3RoZXJ8cmVhbHxy\nZWZ8c21hbGxpbnR8c3RydWN0CiAqIHx0aW1lfHRpbXN0YW1wfHRpbnlpbnR8\ndmFyYmluYXJ5fHZhcmNoYXIpICNSRVFVSVJFRCZndDs8YnIgLz4KICogJmx0\nOyFBVFRMSVNUIGNvbHVtbiB0eXBlLW5hbWUgQ0RBVEEgI0lNUExJRUQmZ3Q7\nPGJyIC8+CiAqICZsdDshQVRUTElTVCBjb2x1bW4gc2l6ZSBDREFUQSAjSU1Q\nTElFRCZndDs8YnIgLz4KICogJmx0OyFBVFRMSVNUIGNvbHVtbiBkZWNpbWFs\nLWRpZ2l0cyBDREFUQSAjSU1QTElFRCZndDs8YnIgLz4KICogJmx0OyFBVFRM\nSVNUIGNvbHVtbiBub3QtbnVsbCAodHJ1ZXxmYWxzZSkgImZhbHNlIiZndDs8\nYnIgLz4KICogJmx0OyFBVFRMSVNUIGNvbHVtbiBkZWZhdWx0IENEQVRBICNJ\nTVBMSUVEJmd0OzxiciAvPgogKiAmbHQ7IUFUVExJU1QgY29sdW1uIGF1dG8t\nYXNzaWduICh0cnVlfGZhbHNlKSAiZmFsc2UiJmd0OzxiciAvPgogKiAmbHQ7\nIUVMRU1FTlQgaW5kZXggKG9uKSomZ3Q7PGJyIC8+CiAqICZsdDshQVRUTElT\nVCBpbmRleCBuYW1lIENEQVRBICNSRVFVSVJFRCZndDs8YnIgLz4KICogJmx0\nOyFBVFRMSVNUIGluZGV4IGNvbHVtbiBDREFUQSAjSU1QTElFRCZndDs8YnIg\nLz4KICogJmx0OyFBVFRMSVNUIGluZGV4IHVuaXF1ZSAodHJ1ZXxmYWxzZSkg\nImZhbHNlIiZndDs8YnIgLz4KICogJmx0OyFFTEVNRU5UIG9uIEVNUFRZJmd0\nOzxiciAvPgogKiAmbHQ7IUFUVExJU1Qgb24gY29sdW1uIENEQVRBICNSRVFV\nSVJFRCZndDs8YnIgLz4KICogJmx0OyFFTEVNRU5UIHBrIChvbikqJmd0Ozxi\nciAvPiAmbHQ7IUFUVExJU1QgcGsgbmFtZSBDREFUQSAjSU1QTElFRCZndDs8\nYnIgLz4KICogJmx0OyFBVFRMSVNUIHBrIGNvbHVtbiBDREFUQSAjSU1QTElF\nRCZndDs8YnIgLz4KICogJmx0OyFFTEVNRU5UIGZrIChqb2luKSomZ3Q7PGJy\nIC8+CiAqICZsdDshQVRUTElTVCBmayBuYW1lIENEQVRBICNJTVBMSUVEJmd0\nOzxiciAvPgogKiAmbHQ7IUFUVExJU1QgZmsgZGVmZXJyZWQgKHRydWV8ZmFs\nc2UpICJmYWxzZSImZ3Q7PGJyIC8+CiAqICZsdDshQVRUTElTVCBmayBjb2x1\nbW4gQ0RBVEEgI0lNUExJRUQmZ3Q7PGJyIC8+CiAqICZsdDshQVRUTElTVCBm\nayB0by10YWJsZSBDREFUQSAjUkVRVUlSRUQmZ3Q7PGJyIC8+CiAqICZsdDsh\nQVRUTElTVCBmayBkZWxldGUtYWN0aW9uIChjYXNjYWRlfGRlZmF1bHR8cmVz\ndHJpY3R8bm9uZXxudWxsKQogKiAibm9uZSImZ3Q7PGJyIC8+CiAqICZsdDsh\nQVRUTElTVCBmayB1cGRhdGUtYWN0aW9uIChjYXNjYWRlfGRlZmF1bHR8cmVz\ndHJpY3R8bm9uZXxudWxsKQogKiAibm9uZSImZ3Q7PGJyIC8+ICZsdDshRUxF\nTUVOVCB1bmlxdWUgKG9uKSomZ3Q7PGJyIC8+CiAqICZsdDshQVRUTElTVCB1\nbmlxdWUgbmFtZSBDREFUQSAjSU1QTElFRCZndDs8YnIgLz4KICogJmx0OyFB\nVFRMSVNUIHVuaXF1ZSBjb2x1bW4gQ0RBVEEgI0lNUExJRUQmZ3Q7PGJyIC8+\nCiAqICZsdDshQVRUTElTVCB1bmlxdWUgZGVmZXJyZWQgKHRydWV8ZmFsc2Up\nICJmYWxzZSImZ3Q7PGJyIC8+CiAqICZsdDshRUxFTUVOVCBqb2luIEVNUFRZ\nJmd0OzxiciAvPgogKiAmbHQ7IUFUVExJU1Qgam9pbiBjb2x1bW4gQ0RBVEEg\nI0lNUExJRUQmZ3Q7PGJyIC8+CiAqICZsdDshQVRUTElTVCBqb2luIHZhbHVl\nIENEQVRBICNJTVBMSUVEJmd0OzxiciAvPgogKiAmbHQ7IUFUVExJU1Qgam9p\nbiB0by1jb2x1bW4gQ0RBVEEgI1JFUVVJUkVEJmd0OzxiciAvPgogKiAmbHQ7\nIUVMRU1FTlQgc2VxdWVuY2UgRU1QVFkmZ3Q7PGJyIC8+CiAqICZsdDshQVRU\nTElTVCBzZXF1ZW5jZSBuYW1lIENEQVRBICNSRVFVSVJFRCZndDs8YnIgLz4K\nICogJmx0OyFBVFRMSVNUIHNlcXVlbmNlIGluaXRpYWwtdmFsdWUgQ0RBVEEg\nI0lNUExJRUQmZ3Q7PGJyIC8+CiAqICZsdDshQVRUTElTVCBzZXF1ZW5jZSBp\nbmNyZW1lbnQgQ0RBVEEgI0lNUExJRUQmZ3Q7PGJyIC8+CiAqICZsdDshQVRU\nTElTVCBzZXF1ZW5jZSBhbGxvY2F0ZSBDREFUQSAjSU1QTElFRCZndDs8YnIg\nLz4KICogPC9jb2RlPgogKiAgU2NoZW1hIHBhcnNlcnMgYXJlIG5vdCB0aHJl\nYWRzYWZlLgogKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKiBAbm9qYXZhZG9j\nCiAqLwpwdWJsaWMgY2xhc3MgWE1MU2NoZW1hUGFyc2VyCiAgICBleHRlbmRz\nIFhNTE1ldGFEYXRhUGFyc2VyCiAgICBpbXBsZW1lbnRzIFNjaGVtYVBhcnNl\nciB7CgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9jYWxpemVyIF9sb2Mg\nPSBMb2NhbGl6ZXIuZm9yUGFja2FnZQogICAgICAgIChYTUxTY2hlbWFQYXJz\nZXIuY2xhc3MpOwoKICAgIHByaXZhdGUgZmluYWwgREJEaWN0aW9uYXJ5IF9k\naWN0OwoKICAgIC8vIHN0YXRlIGZvciBjdXJyZW50IHBhcnNlCiAgICBwcml2\nYXRlIFNjaGVtYUdyb3VwIF9ncm91cCA9IG51bGw7CiAgICBwcml2YXRlIFNj\naGVtYSBfc2NoZW1hID0gbnVsbDsKICAgIHByaXZhdGUgVGFibGUgX3RhYmxl\nID0gbnVsbDsKICAgIHByaXZhdGUgUHJpbWFyeUtleUluZm8gX3BrID0gbnVs\nbDsKICAgIHByaXZhdGUgSW5kZXhJbmZvIF9pbmRleCA9IG51bGw7CiAgICBw\ncml2YXRlIFVuaXF1ZUluZm8gX3VucSA9IG51bGw7CiAgICBwcml2YXRlIEZv\ncmVpZ25LZXlJbmZvIF9mayA9IG51bGw7CiAgICBwcml2YXRlIGJvb2xlYW4g\nX2RlbGF5ID0gZmFsc2U7CgogICAgLy8gdXNlZCB0byBjb2xsZWN0IGluZm8g\nb24gc2NoZW1hIGVsZW1lbnRzIGJlZm9yZSB0aGV5J3JlIHJlc29sdmVkCiAg\nICBwcml2YXRlIGZpbmFsIENvbGxlY3Rpb248UHJpbWFyeUtleUluZm8+IF9w\na0luZm9zID0gbmV3IExpbmtlZExpc3Q8UHJpbWFyeUtleUluZm8+KCk7CiAg\nICBwcml2YXRlIGZpbmFsIENvbGxlY3Rpb248SW5kZXhJbmZvPiBfaW5kZXhJ\nbmZvcyA9IG5ldyBMaW5rZWRMaXN0PEluZGV4SW5mbz4oKTsKICAgIHByaXZh\ndGUgZmluYWwgQ29sbGVjdGlvbjxVbmlxdWVJbmZvPiBfdW5xSW5mb3MgPSBu\nZXcgTGlua2VkTGlzdDxVbmlxdWVJbmZvPigpOwogICAgcHJpdmF0ZSBmaW5h\nbCBDb2xsZWN0aW9uPEZvcmVpZ25LZXlJbmZvPiBfZmtJbmZvcyA9IG5ldyBM\naW5rZWRMaXN0PEZvcmVpZ25LZXlJbmZvPigpOwoKICAgIC8qKgogICAgICog\nQ29uc3RydWN0b3IuIFN1cHBseSBjb25maWd1cmF0aW9uLgogICAgICovCiAg\nICBwdWJsaWMgWE1MU2NoZW1hUGFyc2VyKEpEQkNDb25maWd1cmF0aW9uIGNv\nbmYpIHsKICAgICAgICBfZGljdCA9IGNvbmYuZ2V0REJEaWN0aW9uYXJ5SW5z\ndGFuY2UoKTsKICAgICAgICBzZXRMb2coY29uZi5nZXRMb2coSkRCQ0NvbmZp\nZ3VyYXRpb24uTE9HX1NDSEVNQSkpOwogICAgICAgIHNldFBhcnNlVGV4dChm\nYWxzZSk7CiAgICAgICAgc2V0U3VmZml4KCIuc2NoZW1hIik7CiAgICB9Cgog\nICAgcHVibGljIGJvb2xlYW4gZ2V0RGVsYXlDb25zdHJhaW50UmVzb2x2ZSgp\nIHsKICAgICAgICByZXR1cm4gX2RlbGF5OwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHNldERlbGF5Q29uc3RyYWludFJlc29sdmUoYm9vbGVhbiBkZWxheSkg\newogICAgICAgIF9kZWxheSA9IGRlbGF5OwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHJlc29sdmVDb25zdHJhaW50cygpIHsKICAgICAgICByZXNvbHZlUHJp\nbWFyeUtleXMoKTsKICAgICAgICByZXNvbHZlSW5kZXhlcygpOwogICAgICAg\nIHJlc29sdmVGb3JlaWduS2V5cygpOwogICAgICAgIHJlc29sdmVVbmlxdWVz\nKCk7CiAgICAgICAgY2xlYXJDb25zdHJhaW50SW5mbygpOwogICAgfQoKICAg\nIC8qKgogICAgICogQ2xlYXIgY29uc3RyYWludCBpbmZvcy4KICAgICAqLwog\nICAgcHJpdmF0ZSB2b2lkIGNsZWFyQ29uc3RyYWludEluZm8oKSB7CiAgICAg\nICAgX3BrSW5mb3MuY2xlYXIoKTsKICAgICAgICBfaW5kZXhJbmZvcy5jbGVh\ncigpOwogICAgICAgIF9ma0luZm9zLmNsZWFyKCk7CiAgICAgICAgX3VucUlu\nZm9zLmNsZWFyKCk7CiAgICB9CgogICAgcHVibGljIFNjaGVtYUdyb3VwIGdl\ndFNjaGVtYUdyb3VwKCkgewogICAgICAgIGlmIChfZ3JvdXAgPT0gbnVsbCkK\nICAgICAgICAgICAgX2dyb3VwID0gbmV3IFNjaGVtYUdyb3VwKCk7CiAgICAg\nICAgcmV0dXJuIF9ncm91cDsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRT\nY2hlbWFHcm91cChTY2hlbWFHcm91cCBncm91cCkgewogICAgICAgIF9ncm91\ncCA9IGdyb3VwOwogICAgfQoKICAgIC8qKgogICAgICogUGFyc2UgdGhlIHNj\naGVtYSByZWxhdGluZyB0byB0aGUgZ2l2ZW4gY2xhc3MuIFRoZSBzY2hlbWFz\nIHdpbGwKICAgICAqIGJlIGFkZGVkIHRvIHRoZSBjdXJyZW50IHNjaGVtYSBn\ncm91cC4KICAgICAqLwogICAgcHJvdGVjdGVkIHZvaWQgZmluaXNoKCkgewog\nICAgICAgIC8vIG5vdyByZXNvbHZlIHBrLCBpZHgsIGZrIGluZm8KICAgICAg\nICBzdXBlci5maW5pc2goKTsKICAgICAgICBpZiAoIV9kZWxheSkKICAgICAg\nICAgICAgcmVzb2x2ZUNvbnN0cmFpbnRzKCk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBUcmFuc2Zvcm1zIHRoZSBjb2xsZWN0ZWQgcHJpbWFyeSBrZXkgaW5m\nb3JtYXRpb24gaW50byBhY3R1YWwKICAgICAqIHByaW1hcnkga2V5cyBvbiB0\naGUgc2NoZW1hIHRhYmxlcy4KICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIHJl\nc29sdmVQcmltYXJ5S2V5cygpIHsKICAgICAgICBQcmltYXJ5S2V5SW5mbyBw\na0luZm87CiAgICAgICAgU3RyaW5nIGNvbE5hbWU7CiAgICAgICAgQ29sdW1u\nIGNvbDsKICAgICAgICBmb3IgKEl0ZXJhdG9yPFByaW1hcnlLZXlJbmZvPiBp\ndHIgPSBfcGtJbmZvcy5pdGVyYXRvcigpOyBpdHIuaGFzTmV4dCgpOykgewog\nICAgICAgICAgICBwa0luZm8gPSBpdHIubmV4dCgpOwogICAgICAgICAgICBm\nb3IgKEl0ZXJhdG9yPFN0cmluZz4gY29scyA9IHBrSW5mby5jb2xzLml0ZXJh\ndG9yKCk7IGNvbHMuaGFzTmV4dCgpOykgewogICAgICAgICAgICAgICAgY29s\nTmFtZSA9IGNvbHMubmV4dCgpOwogICAgICAgICAgICAgICAgY29sID0gcGtJ\nbmZvLnBrLmdldFRhYmxlKCkuZ2V0Q29sdW1uKGNvbE5hbWUpOwogICAgICAg\nICAgICAgICAgaWYgKGNvbCA9PSBudWxsKQogICAgICAgICAgICAgICAgICAg\nIHRocm93VXNlckV4Y2VwdGlvbihfbG9jLmdldCgicGstcmVzb2x2ZSIsIG5l\ndyBPYmplY3RbXQogICAgICAgICAgICAgICAgICAgICAgICB7IGNvbE5hbWUs\nIHBrSW5mby5way5nZXRUYWJsZSgpIH0pKTsKICAgICAgICAgICAgICAgIHBr\nSW5mby5way5hZGRDb2x1bW4oY29sKTsKICAgICAgICAgICAgfQogICAgICAg\nIH0KICAgIH0KCiAgICAvKioKICAgICAqIFRyYW5zZm9ybXMgdGhlIGNvbGxl\nY3RlZCBpbmRleCBpbmZvcm1hdGlvbiBpbnRvIGFjdHVhbAogICAgICogaW5k\nZXhlcyBvbiB0aGUgc2NoZW1hIHRhYmxlcy4KICAgICAqLwogICAgcHJpdmF0\nZSB2b2lkIHJlc29sdmVJbmRleGVzKCkgewogICAgICAgIEluZGV4SW5mbyBp\nbmRleEluZm87CiAgICAgICAgU3RyaW5nIGNvbE5hbWU7CiAgICAgICAgQ29s\ndW1uIGNvbDsKICAgICAgICBmb3IgKEl0ZXJhdG9yPEluZGV4SW5mbz4gaXRy\nID0gX2luZGV4SW5mb3MuaXRlcmF0b3IoKTsgaXRyLmhhc05leHQoKTspIHsK\nICAgICAgICAgICAgaW5kZXhJbmZvID0gaXRyLm5leHQoKTsKICAgICAgICAg\nICAgZm9yIChJdGVyYXRvcjxTdHJpbmc+IGNvbHMgPSBpbmRleEluZm8uY29s\ncy5pdGVyYXRvcigpOyBjb2xzLmhhc05leHQoKTspIHsKICAgICAgICAgICAg\nICAgIGNvbE5hbWUgPSBjb2xzLm5leHQoKTsKICAgICAgICAgICAgICAgIGNv\nbCA9IGluZGV4SW5mby5pbmRleC5nZXRUYWJsZSgpLmdldENvbHVtbihjb2xO\nYW1lKTsKICAgICAgICAgICAgICAgIGlmIChjb2wgPT0gbnVsbCkKICAgICAg\nICAgICAgICAgICAgICB0aHJvd1VzZXJFeGNlcHRpb24oX2xvYy5nZXQoImlu\nZGV4LXJlc29sdmUiLCBuZXcgT2JqZWN0W10KICAgICAgICAgICAgICAgICAg\nICAgICAgeyBpbmRleEluZm8uaW5kZXgsIGNvbE5hbWUsCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICBpbmRleEluZm8uaW5kZXguZ2V0VGFibGUoKSB9\nKSk7CiAgICAgICAgICAgICAgICBpbmRleEluZm8uaW5kZXguYWRkQ29sdW1u\nKGNvbCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgLyoq\nCiAgICAgKiBUcmFuc2Zvcm1zIHRoZSBjb2xsZWN0ZWQgZm9yZWlnbiBrZXkg\naW5mb3JtYXRpb24gaW50byBhY3R1YWwKICAgICAqIGZvcmVpZ24ga2V5cyBv\nbiB0aGUgc2NoZW1hIHRhYmxlcy4KICAgICAqLwogICAgcHJpdmF0ZSB2b2lk\nIHJlc29sdmVGb3JlaWduS2V5cygpIHsKICAgICAgICBGb3JlaWduS2V5SW5m\nbyBma0luZm87CiAgICAgICAgVGFibGUgdG9UYWJsZTsKICAgICAgICBDb2x1\nbW4gY29sOwogICAgICAgIFN0cmluZyBjb2xOYW1lOwogICAgICAgIENvbHVt\nbiBwa0NvbDsKICAgICAgICBTdHJpbmcgcGtDb2xOYW1lOwogICAgICAgIFBy\naW1hcnlLZXkgcGs7CiAgICAgICAgSXRlcmF0b3I8U3RyaW5nPiBwa3M7CiAg\nICAgICAgSXRlcmF0b3I8U3RyaW5nPiBjb2xzOwogICAgICAgIGZvciAoSXRl\ncmF0b3I8Rm9yZWlnbktleUluZm8+IGl0ciA9IF9ma0luZm9zLml0ZXJhdG9y\nKCk7IGl0ci5oYXNOZXh0KCk7KSB7CiAgICAgICAgICAgIGZrSW5mbyA9IGl0\nci5uZXh0KCk7CiAgICAgICAgICAgIHRvVGFibGUgPSBfZ3JvdXAuZmluZFRh\nYmxlKGZrSW5mby50b1RhYmxlKTsKICAgICAgICAgICAgaWYgKHRvVGFibGUg\nPT0gbnVsbCB8fCB0b1RhYmxlLmdldFByaW1hcnlLZXkoKSA9PSBudWxsKQog\nICAgICAgICAgICAgICAgdGhyb3dVc2VyRXhjZXB0aW9uKF9sb2MuZ2V0KCJm\nay10b3RhYmxlIiwgbmV3IE9iamVjdFtdCiAgICAgICAgICAgICAgICAgICAg\neyBma0luZm8uZmssIGZrSW5mby50b1RhYmxlLCBma0luZm8uZmsuZ2V0VGFi\nbGUoKSB9KSk7CgogICAgICAgICAgICAvLyBjaGVjayBpZiBvbmx5IG9uZSBm\nayBjb2x1bW4gbGlzdGVkIHVzaW5nIHNob3J0Y3V0CiAgICAgICAgICAgIHBr\nID0gdG9UYWJsZS5nZXRQcmltYXJ5S2V5KCk7CiAgICAgICAgICAgIGlmIChm\na0luZm8uY29scy5zaXplKCkgPT0gMSAmJiBma0luZm8ucGtzLnNpemUoKSA9\nPSAwKQogICAgICAgICAgICAgICAgZmtJbmZvLnBrcy5hZGQocGsuZ2V0Q29s\ndW1ucygpWzBdLmdldE5hbWUoKSk7CgogICAgICAgICAgICAvLyBtYWtlIGpv\naW5zCiAgICAgICAgICAgIHBrcyA9IGZrSW5mby5wa3MuaXRlcmF0b3IoKTsK\nICAgICAgICAgICAgZm9yIChjb2xzID0gZmtJbmZvLmNvbHMuaXRlcmF0b3Io\nKTsgY29scy5oYXNOZXh0KCk7KSB7CiAgICAgICAgICAgICAgICBjb2xOYW1l\nID0gKFN0cmluZykgY29scy5uZXh0KCk7CiAgICAgICAgICAgICAgICBjb2wg\nPSBma0luZm8uZmsuZ2V0VGFibGUoKS5nZXRDb2x1bW4oY29sTmFtZSk7CiAg\nICAgICAgICAgICAgICBpZiAoY29sID09IG51bGwpCiAgICAgICAgICAgICAg\nICAgICAgdGhyb3dVc2VyRXhjZXB0aW9uKF9sb2MuZ2V0KCJmay1ub2NvbCIs\nCiAgICAgICAgICAgICAgICAgICAgICAgIGZrSW5mby5maywgY29sTmFtZSwg\nZmtJbmZvLmZrLmdldFRhYmxlKCkpKTsKCiAgICAgICAgICAgICAgICBwa0Nv\nbE5hbWUgPSAoU3RyaW5nKSBwa3MubmV4dCgpOwogICAgICAgICAgICAgICAg\ncGtDb2wgPSB0b1RhYmxlLmdldENvbHVtbihwa0NvbE5hbWUpOwogICAgICAg\nICAgICAgICAgaWYgKHBrQ29sID09IG51bGwpCiAgICAgICAgICAgICAgICAg\nICAgdGhyb3dVc2VyRXhjZXB0aW9uKF9sb2MuZ2V0KCJmay1ub3BrY29sIiwg\nbmV3IE9iamVjdFtdCiAgICAgICAgICAgICAgICAgICAgICAgIHsgZmtJbmZv\nLmZrLCBwa0NvbE5hbWUsIHRvVGFibGUsCiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICBma0luZm8uZmsuZ2V0VGFibGUoKSB9KSk7CgogICAgICAgICAg\nICAgICAgZmtJbmZvLmZrLmpvaW4oY29sLCBwa0NvbCk7CiAgICAgICAgICAg\nIH0KCiAgICAgICAgICAgIC8vIG1ha2UgY29uc3RhbnQgam9pbnMKICAgICAg\nICAgICAgY29scyA9IGZrSW5mby5jb25zdENvbHMuaXRlcmF0b3IoKTsKICAg\nICAgICAgICAgZm9yIChJdGVyYXRvcjxPYmplY3Q+IHZhbHMgPSBma0luZm8u\nY29uc3RzLml0ZXJhdG9yKCk7IHZhbHMuaGFzTmV4dCgpOykgewogICAgICAg\nICAgICAgICAgY29sTmFtZSA9IGNvbHMubmV4dCgpOwogICAgICAgICAgICAg\nICAgY29sID0gZmtJbmZvLmZrLmdldFRhYmxlKCkuZ2V0Q29sdW1uKGNvbE5h\nbWUpOwogICAgICAgICAgICAgICAgaWYgKGNvbCA9PSBudWxsKQogICAgICAg\nICAgICAgICAgICAgIHRocm93VXNlckV4Y2VwdGlvbihfbG9jLmdldCgiZmst\nbm9jb2wiLAogICAgICAgICAgICAgICAgICAgICAgICBma0luZm8uZmssIGNv\nbE5hbWUsIGZrSW5mby5may5nZXRUYWJsZSgpKSk7CgogICAgICAgICAgICAg\nICAgZmtJbmZvLmZrLmpvaW5Db25zdGFudChjb2wsIHZhbHMubmV4dCgpKTsK\nICAgICAgICAgICAgfQoKICAgICAgICAgICAgcGtzID0gZmtJbmZvLmNvbnN0\nQ29sc1BLLml0ZXJhdG9yKCk7CiAgICAgICAgICAgIGZvciAoSXRlcmF0b3I8\nT2JqZWN0PiB2YWxzID0gZmtJbmZvLmNvbnN0c1BLLml0ZXJhdG9yKCk7IHZh\nbHMuaGFzTmV4dCgpOykgewogICAgICAgICAgICAgICAgcGtDb2xOYW1lID0g\ncGtzLm5leHQoKTsKICAgICAgICAgICAgICAgIHBrQ29sID0gdG9UYWJsZS5n\nZXRDb2x1bW4ocGtDb2xOYW1lKTsKICAgICAgICAgICAgICAgIGlmIChwa0Nv\nbCA9PSBudWxsKQogICAgICAgICAgICAgICAgICAgIHRocm93VXNlckV4Y2Vw\ndGlvbihfbG9jLmdldCgiZmstbm9wa2NvbCIsIG5ldyBPYmplY3RbXQogICAg\nICAgICAgICAgICAgICAgICAgICB7IGZrSW5mby5maywgcGtDb2xOYW1lLCB0\nb1RhYmxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtJbmZvLmZr\nLmdldFRhYmxlKCkgfSkpOwoKICAgICAgICAgICAgICAgIGZrSW5mby5may5q\nb2luQ29uc3RhbnQodmFscy5uZXh0KCksIHBrQ29sKTsKICAgICAgICAgICAg\nfQogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFRyYW5zZm9ybXMg\ndGhlIGNvbGxlY3RlZCB1bmlxdWUgY29uc3RyYWludCBpbmZvcm1hdGlvbiBp\nbnRvIGFjdHVhbAogICAgICogY29uc3RyYWludHMgb24gdGhlIHNjaGVtYSB0\nYWJsZXMuCiAgICAgKi8KICAgIHByaXZhdGUgdm9pZCByZXNvbHZlVW5pcXVl\ncygpIHsKICAgICAgICBVbmlxdWVJbmZvIHVucUluZm87CiAgICAgICAgU3Ry\naW5nIGNvbE5hbWU7CiAgICAgICAgQ29sdW1uIGNvbDsKICAgICAgICBmb3Ig\nKEl0ZXJhdG9yPFVuaXF1ZUluZm8+IGl0ciA9IF91bnFJbmZvcy5pdGVyYXRv\ncigpOyBpdHIuaGFzTmV4dCgpOykgewogICAgICAgICAgICB1bnFJbmZvID0g\naXRyLm5leHQoKTsKICAgICAgICAgICAgZm9yIChJdGVyYXRvcjxTdHJpbmc+\nIGNvbHMgPSB1bnFJbmZvLmNvbHMuaXRlcmF0b3IoKTsgY29scy5oYXNOZXh0\nKCk7KSB7CiAgICAgICAgICAgICAgICBjb2xOYW1lID0gKFN0cmluZykgY29s\ncy5uZXh0KCk7CiAgICAgICAgICAgICAgICBjb2wgPSB1bnFJbmZvLnVucS5n\nZXRUYWJsZSgpLmdldENvbHVtbihjb2xOYW1lKTsKICAgICAgICAgICAgICAg\nIGlmIChjb2wgPT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICB0aHJvd1Vz\nZXJFeGNlcHRpb24oX2xvYy5nZXQoInVucS1yZXNvbHZlIiwgbmV3IE9iamVj\ndFtdCiAgICAgICAgICAgICAgICAgICAgICAgIHsgdW5xSW5mby51bnEsIGNv\nbE5hbWUsIHVucUluZm8udW5xLmdldFRhYmxlKCkgfSkpOwogICAgICAgICAg\nICAgICAgdW5xSW5mby51bnEuYWRkQ29sdW1uKGNvbCk7CiAgICAgICAgICAg\nIH0KICAgICAgICB9CiAgICB9CgogICAgcHJvdGVjdGVkIHZvaWQgcmVzZXQo\nKSB7CiAgICAgICAgX3NjaGVtYSA9IG51bGw7CiAgICAgICAgX3RhYmxlID0g\nbnVsbDsKICAgICAgICBfcGsgPSBudWxsOwogICAgICAgIF9pbmRleCA9IG51\nbGw7CiAgICAgICAgX2ZrID0gbnVsbDsKICAgICAgICBfdW5xID0gbnVsbDsK\nICAgICAgICBpZiAoIV9kZWxheSkKICAgICAgICAgICAgY2xlYXJDb25zdHJh\naW50SW5mbygpOwogICAgfQoKICAgIHByb3RlY3RlZCBSZWFkZXIgZ2V0RG9j\nVHlwZSgpCiAgICAgICAgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICBy\nZXR1cm4gbmV3IElucHV0U3RyZWFtUmVhZGVyKFhNTFNjaGVtYVBhcnNlci5j\nbGFzcwogICAgICAgICAgICAuZ2V0UmVzb3VyY2VBc1N0cmVhbSgic2NoZW1h\ncy1kb2N0eXBlLnJzcmMiKSk7CiAgICB9CgogICAgcHJvdGVjdGVkIGJvb2xl\nYW4gc3RhcnRFbGVtZW50KFN0cmluZyBuYW1lLCBBdHRyaWJ1dGVzIGF0dHJz\nKQogICAgICAgIHRocm93cyBTQVhFeGNlcHRpb24gewogICAgICAgIHN3aXRj\naCAobmFtZS5jaGFyQXQoMCkpIHsKICAgICAgICAgICAgY2FzZSdzJzoKICAg\nICAgICAgICAgICAgIGlmICgic2NoZW1hIi5lcXVhbHMobmFtZSkpCiAgICAg\nICAgICAgICAgICAgICAgc3RhcnRTY2hlbWEoYXR0cnMpOwogICAgICAgICAg\nICAgICAgZWxzZSBpZiAoInNlcXVlbmNlIi5lcXVhbHMobmFtZSkpCiAgICAg\nICAgICAgICAgICAgICAgc3RhcnRTZXF1ZW5jZShhdHRycyk7CiAgICAgICAg\nICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgY2FzZSd0JzoKICAg\nICAgICAgICAgICAgIHN0YXJ0VGFibGUoYXR0cnMpOwogICAgICAgICAgICAg\nICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIGNhc2UnYyc6CiAgICAgICAg\nICAgICAgICBzdGFydENvbHVtbihhdHRycyk7CiAgICAgICAgICAgICAgICBy\nZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgY2FzZSdwJzoKICAgICAgICAgICAg\nICAgIHN0YXJ0UHJpbWFyeUtleShhdHRycyk7CiAgICAgICAgICAgICAgICBy\nZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgY2FzZSdpJzoKICAgICAgICAgICAg\nICAgIHN0YXJ0SW5kZXgoYXR0cnMpOwogICAgICAgICAgICAgICAgcmV0dXJu\nIHRydWU7CiAgICAgICAgICAgIGNhc2UndSc6CiAgICAgICAgICAgICAgICBz\ndGFydFVuaXF1ZShhdHRycyk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1\nZTsKICAgICAgICAgICAgY2FzZSdmJzoKICAgICAgICAgICAgICAgIHN0YXJ0\nRm9yZWlnbktleShhdHRycyk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1\nZTsKICAgICAgICAgICAgY2FzZSdvJzoKICAgICAgICAgICAgICAgIHN0YXJ0\nT24oYXR0cnMpOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAg\nICAgICAgIGNhc2Unaic6CiAgICAgICAgICAgICAgICBzdGFydEpvaW4oYXR0\ncnMpOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAg\nIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAg\nICAgfQogICAgfQoKICAgIHByb3RlY3RlZCB2b2lkIGVuZEVsZW1lbnQoU3Ry\naW5nIG5hbWUpIHsKICAgICAgICBzd2l0Y2ggKG5hbWUuY2hhckF0KDApKSB7\nCiAgICAgICAgICAgIGNhc2Uncyc6CiAgICAgICAgICAgICAgICBpZiAoInNj\naGVtYSIuZXF1YWxzKG5hbWUpKQogICAgICAgICAgICAgICAgICAgIGVuZFNj\naGVtYSgpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNh\nc2UndCc6CiAgICAgICAgICAgICAgICBlbmRUYWJsZSgpOwogICAgICAgICAg\nICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UncCc6CiAgICAgICAgICAg\nICAgICBlbmRQcmltYXJ5S2V5KCk7CiAgICAgICAgICAgICAgICBicmVhazsK\nICAgICAgICAgICAgY2FzZSdpJzoKICAgICAgICAgICAgICAgIGVuZEluZGV4\nKCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSd1\nJzoKICAgICAgICAgICAgICAgIGVuZFVuaXF1ZSgpOwogICAgICAgICAgICAg\nICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UnZic6CiAgICAgICAgICAgICAg\nICBlbmRGb3JlaWduS2V5KCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAg\nICAgICB9CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIHN0YXJ0U2NoZW1hKEF0\ndHJpYnV0ZXMgYXR0cnMpIHsKICAgICAgICAvLyBjcmVhdGVzIGdyb3VwIGlm\nIG5vdCBzZXQKICAgICAgICBTY2hlbWFHcm91cCBncm91cCA9IGdldFNjaGVt\nYUdyb3VwKCk7CgogICAgICAgIFN0cmluZyBuYW1lID0gYXR0cnMuZ2V0VmFs\ndWUoIm5hbWUiKTsKICAgICAgICBfc2NoZW1hID0gZ3JvdXAuZ2V0U2NoZW1h\nKG5hbWUpOwogICAgICAgIGlmIChfc2NoZW1hID09IG51bGwpCiAgICAgICAg\nICAgIF9zY2hlbWEgPSBncm91cC5hZGRTY2hlbWEobmFtZSk7CiAgICB9Cgog\nICAgcHJpdmF0ZSB2b2lkIGVuZFNjaGVtYSgpIHsKICAgICAgICBfc2NoZW1h\nID0gbnVsbDsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgc3RhcnRTZXF1ZW5j\nZShBdHRyaWJ1dGVzIGF0dHJzKSB7CiAgICAgICAgU2VxdWVuY2Ugc2VxID0g\nX3NjaGVtYS5hZGRTZXF1ZW5jZShhdHRycy5nZXRWYWx1ZSgibmFtZSIpKTsK\nICAgICAgICBMb2NhdG9yIGxvY2F0b3IgPSBnZXRMb2NhdGlvbigpLmdldExv\nY2F0b3IoKTsKICAgICAgICBpZiAobG9jYXRvciAhPSBudWxsKSB7CiAgICAg\nICAgICAgIHNlcS5zZXRMaW5lTnVtYmVyKGxvY2F0b3IuZ2V0TGluZU51bWJl\ncigpKTsKICAgICAgICAgICAgc2VxLnNldENvbE51bWJlcihsb2NhdG9yLmdl\ndENvbHVtbk51bWJlcigpKTsKICAgICAgICB9CiAgICAgICAgc2VxLnNldFNv\ndXJjZShnZXRTb3VyY2VGaWxlKCksIFNvdXJjZVRyYWNrZXIuU1JDX1hNTCk7\nCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgU3RyaW5nIHZhbCA9IGF0dHJz\nLmdldFZhbHVlKCJpbml0aWFsLXZhbHVlIik7CiAgICAgICAgICAgIGlmICh2\nYWwgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHNlcS5zZXRJbml0aWFsVmFs\ndWUoSW50ZWdlci5wYXJzZUludCh2YWwpKTsKICAgICAgICAgICAgdmFsID0g\nYXR0cnMuZ2V0VmFsdWUoImluY3JlbWVudCIpOwogICAgICAgICAgICBpZiAo\ndmFsICE9IG51bGwpCiAgICAgICAgICAgICAgICBzZXEuc2V0SW5jcmVtZW50\nKEludGVnZXIucGFyc2VJbnQodmFsKSk7CiAgICAgICAgICAgIHZhbCA9IGF0\ndHJzLmdldFZhbHVlKCJhbGxvY2F0ZSIpOwogICAgICAgICAgICBpZiAodmFs\nICE9IG51bGwpCiAgICAgICAgICAgICAgICBzZXEuc2V0QWxsb2NhdGUoSW50\nZWdlci5wYXJzZUludCh2YWwpKTsKICAgICAgICB9IGNhdGNoIChOdW1iZXJG\nb3JtYXRFeGNlcHRpb24gbmZlKSB7CiAgICAgICAgICAgIHRocm93VXNlckV4\nY2VwdGlvbihfbG9jLmdldCgiYmFkLXNlcS1udW0iLCBzZXEuZ2V0RnVsbE5h\nbWUoKSkpOwogICAgICAgIH0KICAgIH0KCiAgICBwcml2YXRlIHZvaWQgc3Rh\ncnRUYWJsZShBdHRyaWJ1dGVzIGF0dHJzKSB7CiAgICAgICAgX3RhYmxlID0g\nX3NjaGVtYS5hZGRUYWJsZShhdHRycy5nZXRWYWx1ZSgibmFtZSIpKTsKICAg\nICAgICBfdGFibGUuc2V0U291cmNlKGdldFNvdXJjZUZpbGUoKSwgU291cmNl\nVHJhY2tlci5TUkNfWE1MKTsKICAgICAgICBMb2NhdG9yIGxvY2F0b3IgPSBn\nZXRMb2NhdGlvbigpLmdldExvY2F0b3IoKTsKICAgICAgICBpZiAobG9jYXRv\nciAhPSBudWxsKSB7CiAgICAgICAgICAgIF90YWJsZS5zZXRMaW5lTnVtYmVy\nKGxvY2F0b3IuZ2V0TGluZU51bWJlcigpKTsKICAgICAgICAgICAgX3RhYmxl\nLnNldENvbE51bWJlcihsb2NhdG9yLmdldENvbHVtbk51bWJlcigpKTsKICAg\nICAgICB9CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIGVuZFRhYmxlKCkgewog\nICAgICAgIF90YWJsZSA9IG51bGw7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lk\nIHN0YXJ0Q29sdW1uKEF0dHJpYnV0ZXMgYXR0cnMpIHsKICAgICAgICBDb2x1\nbW4gY29sID0gX3RhYmxlLmFkZENvbHVtbihhdHRycy5nZXRWYWx1ZSgibmFt\nZSIpKTsKICAgICAgICBjb2wuc2V0VHlwZShfZGljdC5nZXRQcmVmZXJyZWRU\neXBlKFNjaGVtYXMuZ2V0SkRCQ1R5cGUKICAgICAgICAgICAgKGF0dHJzLmdl\ndFZhbHVlKCJ0eXBlIikpKSk7CiAgICAgICAgY29sLnNldFR5cGVOYW1lKGF0\ndHJzLmdldFZhbHVlKCJ0eXBlLW5hbWUiKSk7CiAgICAgICAgU3RyaW5nIHZh\nbCA9IGF0dHJzLmdldFZhbHVlKCJzaXplIik7CiAgICAgICAgaWYgKHZhbCAh\nPSBudWxsKQogICAgICAgICAgICBjb2wuc2V0U2l6ZShJbnRlZ2VyLnBhcnNl\nSW50KHZhbCkpOwogICAgICAgIHZhbCA9IGF0dHJzLmdldFZhbHVlKCJkZWNp\nbWFsLWRpZ2l0cyIpOwogICAgICAgIGlmICh2YWwgIT0gbnVsbCkKICAgICAg\nICAgICAgY29sLnNldERlY2ltYWxEaWdpdHMoSW50ZWdlci5wYXJzZUludCh2\nYWwpKTsKICAgICAgICBjb2wuc2V0Tm90TnVsbCgidHJ1ZSIuZXF1YWxzKGF0\ndHJzLmdldFZhbHVlKCJub3QtbnVsbCIpKSk7CiAgICAgICAgY29sLnNldEF1\ndG9Bc3NpZ25lZCgidHJ1ZSIuZXF1YWxzKGF0dHJzLmdldFZhbHVlKCJhdXRv\nLWFzc2lnbiIpKQogICAgICAgICAgICB8fCAidHJ1ZSIuZXF1YWxzKGF0dHJz\nLmdldFZhbHVlKCJhdXRvLWluY3JlbWVudCIpKSk7IC8vIG9sZCBhdHRyCiAg\nICAgICAgY29sLnNldERlZmF1bHRTdHJpbmcoYXR0cnMuZ2V0VmFsdWUoImRl\nZmF1bHQiKSk7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIHN0YXJ0UHJpbWFy\neUtleShBdHRyaWJ1dGVzIGF0dHJzKSB7CiAgICAgICAgX3BrID0gbmV3IFBy\naW1hcnlLZXlJbmZvKCk7CiAgICAgICAgX3BrLnBrID0gX3RhYmxlLmFkZFBy\naW1hcnlLZXkoYXR0cnMuZ2V0VmFsdWUoIm5hbWUiKSk7CiAgICAgICAgX3Br\nLnBrLnNldExvZ2ljYWwoInRydWUiLmVxdWFscyhhdHRycy5nZXRWYWx1ZSgi\nbG9naWNhbCIpKSk7CgogICAgICAgIFN0cmluZyB2YWwgPSBhdHRycy5nZXRW\nYWx1ZSgiY29sdW1uIik7CiAgICAgICAgaWYgKHZhbCAhPSBudWxsKQogICAg\nICAgICAgICBfcGsuY29scy5hZGQodmFsKTsKICAgIH0KCiAgICBwcml2YXRl\nIHZvaWQgZW5kUHJpbWFyeUtleSgpIHsKICAgICAgICBfcGtJbmZvcy5hZGQo\nX3BrKTsKICAgICAgICBfcGsgPSBudWxsOwogICAgfQoKICAgIHByaXZhdGUg\ndm9pZCBzdGFydEluZGV4KEF0dHJpYnV0ZXMgYXR0cnMpIHsKICAgICAgICBf\naW5kZXggPSBuZXcgSW5kZXhJbmZvKCk7CiAgICAgICAgX2luZGV4LmluZGV4\nID0gX3RhYmxlLmFkZEluZGV4KGF0dHJzLmdldFZhbHVlKCJuYW1lIikpOwog\nICAgICAgIF9pbmRleC5pbmRleC5zZXRVbmlxdWUoInRydWUiLmVxdWFscyhh\ndHRycy5nZXRWYWx1ZSgidW5pcXVlIikpKTsKCiAgICAgICAgU3RyaW5nIHZh\nbCA9IGF0dHJzLmdldFZhbHVlKCJjb2x1bW4iKTsKICAgICAgICBpZiAodmFs\nICE9IG51bGwpCiAgICAgICAgICAgIF9pbmRleC5jb2xzLmFkZCh2YWwpOwog\nICAgfQoKICAgIHByaXZhdGUgdm9pZCBlbmRJbmRleCgpIHsKICAgICAgICBf\naW5kZXhJbmZvcy5hZGQoX2luZGV4KTsKICAgICAgICBfaW5kZXggPSBudWxs\nOwogICAgfQoKICAgIHByaXZhdGUgdm9pZCBzdGFydFVuaXF1ZShBdHRyaWJ1\ndGVzIGF0dHJzKSB7CiAgICAgICAgX3VucSA9IG5ldyBVbmlxdWVJbmZvKCk7\nCiAgICAgICAgX3VucS51bnEgPSBfdGFibGUuYWRkVW5pcXVlKGF0dHJzLmdl\ndFZhbHVlKCJuYW1lIikpOwogICAgICAgIF91bnEudW5xLnNldERlZmVycmVk\nKCJ0cnVlIi5lcXVhbHMoYXR0cnMuZ2V0VmFsdWUoImRlZmVycmVkIikpKTsK\nCiAgICAgICAgU3RyaW5nIHZhbCA9IGF0dHJzLmdldFZhbHVlKCJjb2x1bW4i\nKTsKICAgICAgICBpZiAodmFsICE9IG51bGwpCiAgICAgICAgICAgIF91bnEu\nY29scy5hZGQodmFsKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgZW5kVW5p\ncXVlKCkgewogICAgICAgIF91bnFJbmZvcy5hZGQoX3VucSk7CiAgICAgICAg\nX3VucSA9IG51bGw7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIHN0YXJ0Rm9y\nZWlnbktleShBdHRyaWJ1dGVzIGF0dHJzKSB7CiAgICAgICAgX2ZrID0gbmV3\nIEZvcmVpZ25LZXlJbmZvKCk7CiAgICAgICAgX2ZrLmZrID0gX3RhYmxlLmFk\nZEZvcmVpZ25LZXkoYXR0cnMuZ2V0VmFsdWUoIm5hbWUiKSk7CgogICAgICAg\nIGlmICgidHJ1ZSIuZXF1YWxzKGF0dHJzLmdldFZhbHVlKCJkZWZlcnJlZCIp\nKSkKICAgICAgICAgICAgX2ZrLmZrLnNldERlZmVycmVkKHRydWUpOwoKICAg\nICAgICAvLyBzZXQgdXBkYXRlIGFjdGlvbiBiZWZvcmUgZGVsZXRlIGFjdGlv\nbiBpbiBjYXNlIHVzZXIgaW5jb3JyZWN0bHkKICAgICAgICAvLyBzZXRzIHVw\nZGF0ZS1hY3Rpb24gdG8gIm5vbmUiIHdoZW4gdGhlcmUgaXMgYSBkZWxldGUt\nYWN0aW9uOyBvdGhlcndpc2UKICAgICAgICAvLyBzZXR0aW5nIHRoZSB1cGRh\ndGUtYWN0aW9uIHRvICJub25lIiB3aWxsIGFsc28gYXV0b21hdGljYWxseSBz\nZXQgdGhlCiAgICAgICAgLy8gZGVsZXRlLWFjdGlvbiB0byAibm9uZSIsIHNp\nbmNlIEZLcyBjYW5ub3QgaGF2ZSBvbmUgYWN0aW8gYmUgbm9uZSBhbmQKICAg\nICAgICAvLyB0aGUgb3RoZXIgYmUgbm9uLW5vbmUKICAgICAgICBTdHJpbmcg\nYWN0aW9uID0gYXR0cnMuZ2V0VmFsdWUoInVwZGF0ZS1hY3Rpb24iKTsKICAg\nICAgICBpZiAoYWN0aW9uICE9IG51bGwpCiAgICAgICAgICAgIF9may5may5z\nZXRVcGRhdGVBY3Rpb24oRm9yZWlnbktleS5nZXRBY3Rpb24oYWN0aW9uKSk7\nCiAgICAgICAgYWN0aW9uID0gYXR0cnMuZ2V0VmFsdWUoImRlbGV0ZS1hY3Rp\nb24iKTsKICAgICAgICBpZiAoYWN0aW9uICE9IG51bGwpCiAgICAgICAgICAg\nIF9may5may5zZXREZWxldGVBY3Rpb24oRm9yZWlnbktleS5nZXRBY3Rpb24o\nYWN0aW9uKSk7CgogICAgICAgIF9may50b1RhYmxlID0gYXR0cnMuZ2V0VmFs\ndWUoInRvLXRhYmxlIik7CiAgICAgICAgU3RyaW5nIHZhbCA9IGF0dHJzLmdl\ndFZhbHVlKCJjb2x1bW4iKTsKICAgICAgICBpZiAodmFsICE9IG51bGwpCiAg\nICAgICAgICAgIF9may5jb2xzLmFkZCh2YWwpOwogICAgfQoKICAgIHByaXZh\ndGUgdm9pZCBlbmRGb3JlaWduS2V5KCkgewogICAgICAgIF9ma0luZm9zLmFk\nZChfZmspOwogICAgICAgIF9mayA9IG51bGw7CiAgICB9CgogICAgcHJpdmF0\nZSB2b2lkIHN0YXJ0T24oQXR0cmlidXRlcyBhdHRycykgewogICAgICAgIFN0\ncmluZyBjb2wgPSBhdHRycy5nZXRWYWx1ZSgiY29sdW1uIik7CiAgICAgICAg\naWYgKF9wayAhPSBudWxsKQogICAgICAgICAgICBfcGsuY29scy5hZGQoY29s\nKTsKICAgICAgICBlbHNlIGlmIChfaW5kZXggIT0gbnVsbCkKICAgICAgICAg\nICAgX2luZGV4LmNvbHMuYWRkKGNvbCk7CiAgICAgICAgZWxzZQogICAgICAg\nICAgICBfdW5xLmNvbHMuYWRkKGNvbCk7CiAgICB9CgogICAgcHJpdmF0ZSB2\nb2lkIHN0YXJ0Sm9pbihBdHRyaWJ1dGVzIGF0dHJzKSB7CiAgICAgICAgU3Ry\naW5nIGNvbCA9IGF0dHJzLmdldFZhbHVlKCJjb2x1bW4iKTsKICAgICAgICBT\ndHJpbmcgdG9Db2wgPSBhdHRycy5nZXRWYWx1ZSgidG8tY29sdW1uIik7CiAg\nICAgICAgU3RyaW5nIHZhbCA9IGF0dHJzLmdldFZhbHVlKCJ2YWx1ZSIpOwog\nICAgICAgIGlmICh2YWwgPT0gbnVsbCkgewogICAgICAgICAgICBfZmsuY29s\ncy5hZGQoY29sKTsKICAgICAgICAgICAgX2ZrLnBrcy5hZGQodG9Db2wpOwog\nICAgICAgIH0gZWxzZSBpZiAoY29sID09IG51bGwpIHsKICAgICAgICAgICAg\nX2ZrLmNvbnN0c1BLLmFkZChjb252ZXJ0Q29uc3RhbnQodmFsKSk7CiAgICAg\nICAgICAgIF9may5jb25zdENvbHNQSy5hZGQodG9Db2wpOwogICAgICAgIH0g\nZWxzZSB7CiAgICAgICAgICAgIF9may5jb25zdHMuYWRkKGNvbnZlcnRDb25z\ndGFudCh2YWwpKTsKICAgICAgICAgICAgX2ZrLmNvbnN0Q29scy5hZGQoY29s\nKTsKICAgICAgICB9CiAgICB9CgogICAgcHJpdmF0ZSBzdGF0aWMgT2JqZWN0\nIGNvbnZlcnRDb25zdGFudChTdHJpbmcgdmFsKSB7CiAgICAgICAgaWYgKCJu\ndWxsIi5lcXVhbHModmFsKSkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAg\nICAgICAgaWYgKHZhbC5zdGFydHNXaXRoKCInIikpCiAgICAgICAgICAgIHJl\ndHVybiB2YWwuc3Vic3RyaW5nKDEsIHZhbC5sZW5ndGgoKSAtIDEpOwogICAg\nICAgIGlmICh2YWwuaW5kZXhPZignLicpID09IC0xKQogICAgICAgICAgICBy\nZXR1cm4gbmV3IExvbmcodmFsKTsKICAgICAgICByZXR1cm4gbmV3IERvdWJs\nZSh2YWwpOwogICAgfQoKICAgIHByaXZhdGUgdm9pZCB0aHJvd1VzZXJFeGNl\ncHRpb24oTWVzc2FnZSBtc2cpIHsKICAgICAgICB0aHJvdyBuZXcgVXNlckV4\nY2VwdGlvbihnZXRTb3VyY2VOYW1lKCkgKyAiOiAiICsgbXNnLmdldE1lc3Nh\nZ2UoKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBVc2VkIHRvIGhvbGQgcHJp\nbWFyeSBrZXkgaW5mbyBiZWZvcmUgaXQgaXMgcmVzb2x2ZWQuCiAgICAgKi8K\nICAgIHByaXZhdGUgc3RhdGljIGNsYXNzIFByaW1hcnlLZXlJbmZvIHsKCiAg\nICAgICAgcHVibGljIFByaW1hcnlLZXkgcGsgPSBudWxsOwogICAgICAgIHB1\nYmxpYyBDb2xsZWN0aW9uPFN0cmluZz4gY29scyA9IG5ldyBMaW5rZWRMaXN0\nPFN0cmluZz4oKTsKICAgIH0KCiAgICAvKioKICAgICAqIFVzZWQgdG8gaG9s\nZCBpbmRleCBpbmZvIGJlZm9yZSBpdCBpcyByZXNvbHZlZC4KICAgICAqLwog\nICAgcHJpdmF0ZSBzdGF0aWMgY2xhc3MgSW5kZXhJbmZvIHsKCiAgICAgICAg\ncHVibGljIEluZGV4IGluZGV4ID0gbnVsbDsKICAgICAgICBwdWJsaWMgQ29s\nbGVjdGlvbjxTdHJpbmc+IGNvbHMgPSBuZXcgTGlua2VkTGlzdDxTdHJpbmc+\nKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBVc2VkIHRvIGhvbGQgdW5pcXVl\nIGNvbnN0cmFpbnQgaW5mbyBiZWZvcmUgaXQgaXMgcmVzb2x2ZWQuCiAgICAg\nKi8KICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgVW5pcXVlSW5mbyB7CgogICAg\nICAgIHB1YmxpYyBVbmlxdWUgdW5xID0gbnVsbDsKICAgICAgICBwdWJsaWMg\nQ29sbGVjdGlvbjxTdHJpbmc+IGNvbHMgPSBuZXcgTGlua2VkTGlzdDxTdHJp\nbmc+KCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBVc2VkIHRvIGhvbGQgZm9y\nZWlnbiBrZXkgaW5mbyBiZWZvcmUgaXQgaXMgcmVzb2x2ZWQuCiAgICAgKi8K\nICAgIHByaXZhdGUgc3RhdGljIGNsYXNzIEZvcmVpZ25LZXlJbmZvIHsKCiAg\nICAgICAgcHVibGljIEZvcmVpZ25LZXkgZmsgPSBudWxsOwogICAgICAgIHB1\nYmxpYyBTdHJpbmcgdG9UYWJsZSA9IG51bGw7CiAgICAgICAgcHVibGljIENv\nbGxlY3Rpb248U3RyaW5nPiBjb2xzID0gbmV3IExpbmtlZExpc3Q8U3RyaW5n\nPigpOwogICAgICAgIHB1YmxpYyBDb2xsZWN0aW9uPFN0cmluZz4gcGtzID0g\nbmV3IExpbmtlZExpc3Q8U3RyaW5nPigpOwogICAgICAgIHB1YmxpYyBDb2xs\nZWN0aW9uPE9iamVjdD4gY29uc3RzID0gbmV3IExpbmtlZExpc3Q8T2JqZWN0\nPigpOwogICAgICAgIHB1YmxpYyBDb2xsZWN0aW9uPFN0cmluZz4gY29uc3RD\nb2xzID0gbmV3IExpbmtlZExpc3Q8U3RyaW5nPigpOwogICAgICAgIHB1Ymxp\nYyBDb2xsZWN0aW9uPE9iamVjdD4gY29uc3RzUEsgPSBuZXcgTGlua2VkTGlz\ndDxPYmplY3Q+KCk7CiAgICAgICAgcHVibGljIENvbGxlY3Rpb248U3RyaW5n\nPiBjb25zdENvbHNQSyA9IG5ldyBMaW5rZWRMaXN0PFN0cmluZz4oKTsKICAg\nIH0KfQo=\n","encoding":"base64"}

