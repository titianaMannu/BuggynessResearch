{"sha":"d4cbb8af617caaa476ddd1ee4c6c1fd03e2afb5a","node_id":"MDQ6QmxvYjIwNjM2NDpkNGNiYjhhZjYxN2NhYWE0NzZkZGQxZWU0YzZjMWZkMDNlMmFmYjVh","size":14318,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/d4cbb8af617caaa476ddd1ee4c6c1fd03e2afb5a","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWw7CgppbXBvcnQg\namF2YS5zcWwuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmEuc3FsLkRhdGFiYXNl\nTWV0YURhdGE7CmltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDsK\naW1wb3J0IGphdmEuc3FsLlJlc3VsdFNldDsKaW1wb3J0IGphdmEuc3FsLlNR\nTEV4Y2VwdGlvbjsKaW1wb3J0IGphdmEuc3FsLlN0YXRlbWVudDsKaW1wb3J0\nIGphdmEuc3FsLlR5cGVzOwppbXBvcnQgamF2YS51dGlsLkFycmF5czsKaW1w\nb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOwppbXBvcnQgamF2YS51dGlsLlNl\ndDsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5pZGVudGlmaWVy\nLkRCSWRlbnRpZmllcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLmlkZW50aWZpZXIuREJJZGVudGlmaWVyLkRCSWRlbnRpZmllclR5cGU7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuZXhwcy5GaWx0\nZXJWYWx1ZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVt\nYS5Db2x1bW47CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hl\nbWEuRm9yZWlnbktleTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLnNjaGVtYS5JbmRleDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLnNjaGVtYS5QcmltYXJ5S2V5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMuc2NoZW1hLlRhYmxlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmxpYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5saWIudXRpbC5SZWZlcmVuY2VIYXNoU2V0OwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLnV0aWwuU3RvcmVFeGNlcHRpb247CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEudXRpbC5VbnN1cHBvcnRlZEV4Y2VwdGlvbjsKCi8qKgog\nKiBEaWN0aW9uYXJ5IGZvciBJbmZvcm1peCBkYXRhYmFzZS4gTm90YWJsZSBm\nZWF0dXJlczoKICogPHVsPgogKiA8bGk+SW5mb3JtaXggZG9lcyBub3QgYWxs\nb3cgcGVzc2ltaXN0aWMgbG9ja2luZyBvbiBzY3JvbGxhYmxlIHJlc3VsdAog\nKiBzZXRzLjwvbGk+CiAqIDxsaT5TRVQgTE9DSyBNT0RFIFRPIFdBSVQgTiBz\ndGF0ZW1lbnRzIGFyZSBpc3N1ZWQgdG8gd2FpdCBvbiBsb2Nrcy4gU2VlCiAq\nIHtAbGluayAjbG9ja1dhaXRTZWNvbmRzfSBhbmQge0BsaW5rICNsb2NrTW9k\nZUVuYWJsZWR9LjwvbGk+CiAqIDxsaT5MT0NLIE1PREUgUk9XIGlzIHVzZWQg\nYnkgZGVmYXVsdCBmb3IgdGFibGUgY3JlYXRpb24gdG8gYWxsb3cgdGhlCiAq\nIG1heGltdW0gY29uY3VycmVuY3kuPC9saT4KICogPC91bD4KICovCnB1Ymxp\nYyBjbGFzcyBJbmZvcm1peERpY3Rpb25hcnkKICAgIGV4dGVuZHMgREJEaWN0\naW9uYXJ5IHsKCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBWRU5E\nT1JfSUJNID0gImlibSI7CgogICAgLyoqCiAgICAgKiBJZiB0cnVlLCB0aGVu\nIHdlIHdpbGwgaXNzdWUgYSAiU0VUIExPQ0sgTU9ERSBUTyBXQUlUIE4iCiAg\nICAgKiBzdGF0ZW1lbnQgd2hlbmV2ZXIgd2UgY3JlYXRlIGEge0BsaW5rIENv\nbm5lY3Rpb259LCBpbiBvcmRlcgogICAgICogYWxsb3cgd2FpdGluZyBvbiBs\nb2Nrcy4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gbG9ja01vZGVFbmFi\nbGVkID0gZmFsc2U7CgogICAgLyoqCiAgICAgKiBJZiB7QGxpbmsgI2xvY2tN\nb2RlRW5hYmxlZH0gaXMgPGNvZGU+dHJ1ZTwvY29kZT4sIHRoZW4gdGhpcwog\nICAgICogcGFyYW1ldGVyIHNwZWNpZmllcyB0aGUgbnVtYmVyIG9mIHNlY29u\nZHMgd2Ugd2lsbCB3YWl0IHRvCiAgICAgKiBvYnRhaW4gYSBsb2NrIGZvciBp\nbnNlcnRzIGFuZCBwZXNzaW1pc3RpYyBsb2NraW5nLgogICAgICovCiAgICBw\ndWJsaWMgaW50IGxvY2tXYWl0U2Vjb25kcyA9IDMwOwoKICAgIC8qKgogICAg\nICogSW5mb3JtaXggSkRCQyBtZXRhZGF0YSBmb3IgYWxsIGtub3duIGRyaXZl\ncnMgcmV0dXJucyB3aXRoIHRoZQogICAgICogdGFibGUgY2F0YWxvZyBhbmQg\ndGhlIHRhYmxlIHNjaGVtYSBuYW1lIHN3YXBwZWQuIEEgPGNvZGU+dHJ1ZTwv\nY29kZT4KICAgICAqIHZhbHVlIGZvciB0aGlzIHByb3BlcnR5IGluZGljYXRl\ncyB0aGF0IHRoZXkgc2hvdWxkIGJlIHJldmVyc2VkLgogICAgICovCiAgICBw\ndWJsaWMgYm9vbGVhbiBzd2FwU2NoZW1hQW5kQ2F0YWxvZyA9IHRydWU7Cgog\nICAgcHJvdGVjdGVkIGJvb2xlYW4gdXNlSkNDID0gZmFsc2U7CiAgICAvLyB3\nZWFrIHNldCBvZiBjb25uZWN0aW9ucyB3ZSd2ZSBhbHJlYWR5IGV4ZWN1dGVk\nIGxvY2sgbW9kZSBzcWwgb24KICAgIHByaXZhdGUgZmluYWwgQ29sbGVjdGlv\nbiBfc2VlbkNvbm5lY3Rpb25zID0gbmV3IFJlZmVyZW5jZUhhc2hTZXQKICAg\nICAgICAoUmVmZXJlbmNlSGFzaFNldC5XRUFLKTsKCiAgICBwcml2YXRlIHN0\nYXRpYyBmaW5hbCBMb2NhbGl6ZXIgX2xvYyA9IExvY2FsaXplci5mb3JQYWNr\nYWdlCiAgICAgICAgKEluZm9ybWl4RGljdGlvbmFyeS5jbGFzcyk7CgogICAg\ncHVibGljIEluZm9ybWl4RGljdGlvbmFyeSgpIHsKICAgICAgICBwbGF0Zm9y\nbSA9ICJJbmZvcm1peCI7CiAgICAgICAgdmFsaWRhdGlvblNRTCA9ICJTRUxF\nQ1QgRklSU1QgMSBDVVJSRU5UIFRJTUVTVEFNUCAiCiAgICAgICAgICAgICsg\nIkZST00gaW5mb3JtaXguc3lzdGFibGVzIjsKCiAgICAgICAgc3VwcG9ydHNB\ndXRvQXNzaWduID0gdHJ1ZTsKICAgICAgICBhdXRvQXNzaWduVHlwZU5hbWUg\nPSAic2VyaWFsIjsKICAgICAgICBsYXN0R2VuZXJhdGVkS2V5UXVlcnkgPSAi\nU0VMRUNUIEZJUlNUIDEgREJJTkZPKCdzcWxjYS5zcWxlcnJkMScpICIKICAg\nICAgICAgICAgKyAiRlJPTSBpbmZvcm1peC5zeXN0YWJsZXMiOwoKICAgICAg\nICAvLyBpbmZvcm1peCBhY3R1YWxseSBkb2VzIHN1cHBvcnQgZGVmZXJyZWQg\nY29uc3RyYWludHMsIGJ1dCBub3QKICAgICAgICAvLyBpbiB0aGUgdGFibGUg\nZGVmaW5pdGlvbjsgZGVmZXJyZWQgY29uc3RyYWludHMgY2FuIGJlIGFjdGl2\nYXRlZCBieQogICAgICAgIC8vIGludm9raW5nICJzZXQgY29uc3RyYWludHMg\nYWxsIGRlZmVycmVkIiBvbiB0aGUgY29ubmVjdGlvbiwgd2hpY2gKICAgICAg\nICAvLyB3ZSBkb24ndCBkbyB5ZXQKICAgICAgICBzdXBwb3J0c0RlZmVycmVk\nQ29uc3RyYWludHMgPSBmYWxzZTsKICAgICAgICBjb25zdHJhaW50TmFtZU1v\nZGUgPSBDT05TX05BTUVfQUZURVI7CgogICAgICAgIC8vIGluZm9ybWl4IHN1\ncHBvcnRzICJDTE9CIiB0eXBlLCBidXQgYW55IGF0dGVtcHQgdG8gaW5zZXJ0\nCiAgICAgICAgLy8gaW50byB0aGVtIHJhaXNlczogImphdmEuc3FsLlNRTEV4\nY2VwdGlvbjogQ2FuJ3QgY29udmVydCBmcm9tbnVsbCIKICAgICAgICB1c2VH\nZXRTdHJpbmdGb3JDbG9icyA9IHRydWU7CiAgICAgICAgbG9uZ1ZhcmNoYXJU\neXBlTmFtZSA9ICJURVhUIjsKICAgICAgICBjbG9iVHlwZU5hbWUgPSAiVEVY\nVCI7CiAgICAgICAgc21hbGxpbnRUeXBlTmFtZSA9ICJJTlQ4IjsKICAgICAg\nICB0aW55aW50VHlwZU5hbWUgPSAiSU5UOCI7CiAgICAgICAgZmxvYXRUeXBl\nTmFtZSA9ICJGTE9BVCI7CiAgICAgICAgYml0VHlwZU5hbWUgPSAiQk9PTEVB\nTiI7CiAgICAgICAgYmxvYlR5cGVOYW1lID0gIkJZVEUiOwogICAgICAgIGRv\ndWJsZVR5cGVOYW1lID0gIk5VTUVSSUMoMzIsMjApIjsKICAgICAgICBkYXRl\nVHlwZU5hbWUgPSAiREFURSI7CiAgICAgICAgdGltZVR5cGVOYW1lID0gIkRB\nVEVUSU1FIEhPVVIgVE8gU0VDT05EIjsKICAgICAgICB0aW1lc3RhbXBUeXBl\nTmFtZSA9ICJEQVRFVElNRSBZRUFSIFRPIEZSQUNUSU9OKDMpIjsKICAgICAg\nICBkb3VibGVUeXBlTmFtZSA9ICJOVU1FUklDKDMyLDIwKSI7CiAgICAgICAg\nZmxvYXRUeXBlTmFtZSA9ICJSRUFMIjsKICAgICAgICBiaWdpbnRUeXBlTmFt\nZSA9ICJOVU1FUklDKDMyLDApIjsKICAgICAgICBkb3VibGVUeXBlTmFtZSA9\nICJET1VCTEUgUFJFQ0lTSU9OIjsKICAgICAgICBmaXhlZFNpemVUeXBlTmFt\nZVNldC5hZGRBbGwoQXJyYXlzLmFzTGlzdChuZXcgU3RyaW5nW117CiAgICAg\nICAgICAgICJCWVRFIiwgIkRPVUJMRSBQUkVDSVNJT04iLCAiSU5URVJWQUwi\nLCAiU01BTExGTE9BVCIsICJURVhUIiwKICAgICAgICAgICAgIklOVDgiLAog\nICAgICAgIH0pKTsKCiAgICAgICAgc3VwcG9ydHNMb2NraW5nV2l0aERpc3Rp\nbmN0Q2xhdXNlID0gZmFsc2U7CiAgICAgICAgc3VwcG9ydHNMb2NraW5nV2l0\naE11bHRpcGxlVGFibGVzID0gZmFsc2U7CiAgICAgICAgc3VwcG9ydHNMb2Nr\naW5nV2l0aE9yZGVyQ2xhdXNlID0gZmFsc2U7CgogICAgICAgIC8vIHRoZSBp\nbmZvcm1peCBKREJDIGRyaXZlcnMgaGF2ZSBwcm9ibGVtcyB3aXRoIHVzaW5n\nIHRoZQogICAgICAgIC8vIHNjaGVtYSBuYW1lIGluIHJlZmxlY3Rpb24gb24g\nY29sdW1ucyBhbmQgdGFibGVzCiAgICAgICAgc3VwcG9ydHNTY2hlbWFGb3JH\nZXRDb2x1bW5zID0gZmFsc2U7CiAgICAgICAgc3VwcG9ydHNTY2hlbWFGb3JH\nZXRUYWJsZXMgPSBmYWxzZTsKCiAgICAgICAgLy8gSW5mb3JtaXggZG9lc24n\ndCBzdXBwb3J0IGFsaWFzZXMgaW4gZGVsZXRlcyBpZiB0aGUgdGFibGUgaGFz\nIGFuIGluZGV4CiAgICAgICAgYWxsb3dzQWxpYXNJbkJ1bGtDbGF1c2UgPSBm\nYWxzZTsKICAgICAgICAKICAgICAgICAvLyBJbmZvcm1peCBkb2Vzbid0IHVu\nZGVyc3RhbmQgIlggQ1JPU1MgSk9JTiBZIiwgYnV0IGl0IGRvZXMgdW5kZXJz\ndGFuZAogICAgICAgIC8vIHRoZSBlcXVpdmFsZW50ICJYIEpPSU4gWSBPTiAx\nID0gMSIKICAgICAgICBjcm9zc0pvaW5DbGF1c2UgPSAiSk9JTiI7CiAgICAg\nICAgcmVxdWlyZXNDb25kaXRpb25Gb3JDcm9zc0pvaW4gPSB0cnVlOwoKICAg\nICAgICBjb25jYXRlbmF0ZUZ1bmN0aW9uID0gIkNPTkNBVCh7MH0sezF9KSI7\nCiAgICAgICAgbmV4dFNlcXVlbmNlUXVlcnkgPSAiU0VMRUNUIHswfS5ORVhU\nVkFMIEZST00gU1lTVEFCTEVTIFdIRVJFIFRBQklEPTEiOwogICAgICAgIHN1\ncHBvcnRzQ29ycmVsYXRlZFN1YnNlbGVjdCA9IGZhbHNlOwogICAgICAgIHN3\nYXBTY2hlbWFBbmRDYXRhbG9nID0gZmFsc2U7CiAgICAgICAgCiAgICAgICAg\nLy8gSW5mb3JtaXggZG9lcyBub3Qgc3VwcG9ydCBmb3JlaWduIGtleSBkZWxl\ndGUgYWN0aW9uIE5VTEwgb3IgREVGQVVMVAogICAgICAgIHN1cHBvcnRzTnVs\nbERlbGV0ZUFjdGlvbiA9IGZhbHNlOwogICAgICAgIHN1cHBvcnRzRGVmYXVs\ndERlbGV0ZUFjdGlvbiA9IGZhbHNlOwogICAgICAgIAogICAgICAgIHRyaW1T\nY2hlbWFOYW1lID0gdHJ1ZTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1\nYmxpYyB2b2lkIGNvbm5lY3RlZENvbmZpZ3VyYXRpb24oQ29ubmVjdGlvbiBj\nb25uKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHN1\ncGVyLmNvbm5lY3RlZENvbmZpZ3VyYXRpb24oY29ubik7CgogICAgICAgIERh\ndGFiYXNlTWV0YURhdGEgbWV0YSA9IGNvbm4uZ2V0TWV0YURhdGEoKTsKICAg\nICAgICBTdHJpbmcgZHJpdmVyTmFtZSA9IG1ldGEuZ2V0RHJpdmVyTmFtZSgp\nOwogICAgICAgIGlmIChkcml2ZXJOYW1lICE9IG51bGwpIHsKICAgICAgICAg\nICAgaWYgKGRyaXZlck5hbWUuZXF1YWxzKCJJQk0gREIyIEpEQkMgVW5pdmVy\nc2FsIERyaXZlciBBcmNoaXRlY3R1cmUiKSkKICAgICAgICAgICAgeyAKICAg\nICAgICAgICAgICAgIGRyaXZlclZlbmRvciA9IFZFTkRPUl9JQk07CiAgICAg\nICAgICAgICAgICB1c2VKQ0MgPSB0cnVlOwogICAgICAgICAgICAgICAgc2V0\nSWRlbnRpZmllckNhc2UobWV0YSk7CiAgICAgICAgICAgIH0gCiAgICAgICAg\nICAgIGVsc2UgaWYgKGRyaXZlck5hbWUuZXF1YWxzKCJJQk0gSW5mb3JtaXgg\nSkRCQyBEcml2ZXIgZm9yIElCTSBJbmZvcm1peCBEeW5hbWljIFNlcnZlciIp\nKSB7CiAgICAgICAgICAgICAgICBzZXRJZGVudGlmaWVyQ2FzZShtZXRhKTsK\nICAgICAgICAgICAgICAgIGRyaXZlclZlbmRvciA9IFZFTkRPUl9JQk07CiAg\nICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoIkluZm9ybWl4Ii5l\ncXVhbHNJZ25vcmVDYXNlKGRyaXZlck5hbWUpKQogICAgICAgICAgICAgICAg\nZHJpdmVyVmVuZG9yID0gVkVORE9SX0RBVEFESVJFQ1Q7CiAgICAgICAgICAg\nIGVsc2UKICAgICAgICAgICAgICAgIGRyaXZlclZlbmRvciA9IFZFTkRPUl9P\nVEhFUjsKICAgICAgICB9IGVsc2UKICAgICAgICAgICAgZHJpdmVyVmVuZG9y\nID0gVkVORE9SX09USEVSOwoKICAgICAgICBpZiAoaXNKREJDMykgewogICAg\nICAgICAgICBjb25uLnNldEhvbGRhYmlsaXR5KFJlc3VsdFNldC5IT0xEX0NV\nUlNPUlNfT1ZFUl9DT01NSVQpOwogICAgICAgICAgICBpZiAobG9nLmlzVHJh\nY2VFbmFibGVkKCkpCiAgICAgICAgICAgICAgICBsb2cudHJhY2UoX2xvYy5n\nZXQoImNvbm5lY3Rpb24tZGVmYXVsdHMiLCBuZXcgT2JqZWN0W117CiAgICAg\nICAgICAgICAgICAgICAgY29ubi5nZXRBdXRvQ29tbWl0KCksIGNvbm4uZ2V0\nSG9sZGFiaWxpdHkoKSwKICAgICAgICAgICAgICAgICAgICBjb25uLmdldFRy\nYW5zYWN0aW9uSXNvbGF0aW9uKCl9KSk7CiAgICAgICAgfQogICAgfQogICAg\nCiAgICBwcml2YXRlIHZvaWQgc2V0SWRlbnRpZmllckNhc2UoRGF0YWJhc2VN\nZXRhRGF0YSBtZXRhKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgLy8g\nbG93ZXIgY2FzZSBpZGVudGlmaWVycyBpcyB0aGUgZGVmYXVsdCBmb3IgdGhl\nIEpDQyBhbmQgbmV3ZXIKICAgICAgICAgICAgLy8gSW5mb3JtaXggSkRCQyBk\ncml2ZXJzCiAgICAgICAgICAgIGlmIChtZXRhLnN0b3Jlc0xvd2VyQ2FzZUlk\nZW50aWZpZXJzKCkpIHsgCiAgICAgICAgICAgICAgICBzY2hlbWFDYXNlID0g\nU0NIRU1BX0NBU0VfTE9XRVI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAg\nZWxzZSBpZiAobWV0YS5zdG9yZXNNaXhlZENhc2VJZGVudGlmaWVycygpKSB7\nCiAgICAgICAgICAgICAgICBzY2hlbWFDYXNlID0gU0NIRU1BX0NBU0VfUFJF\nU0VSVkU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gb3RoZXJ3aXNl\nLCB1c2UgdGhlIGRlZmF1bHQgKHVwcGVyKQogICAgICAgIH0KICAgICAgICBj\nYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgZ2V0TG9nKCku\nd2FybigiY2Fubm90LWRldGVybWluZS1pZGVudGlmaWVyLWJhc2UtY2FzZSIp\nOwogICAgICAgICAgICBpZiAoZ2V0TG9nKCkuaXNUcmFjZUVuYWJsZWQoKSkg\newogICAgICAgICAgICAgICAgZ2V0TG9nKCkudHJhY2UoZS50b1N0cmluZygp\nLCBlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBAT3Zl\ncnJpZGUKICAgIHB1YmxpYyBDb2x1bW5bXSBnZXRDb2x1bW5zKERhdGFiYXNl\nTWV0YURhdGEgbWV0YSwgU3RyaW5nIGNhdGFsb2csCiAgICAgICAgU3RyaW5n\nIHNjaGVtYU5hbWUsIFN0cmluZyB0YWJsZU5hbWUsIFN0cmluZyBjb2x1bW5O\nYW1lLCBDb25uZWN0aW9uIGNvbm4pCiAgICAgICAgdGhyb3dzIFNRTEV4Y2Vw\ndGlvbiB7CiAgICAgICAgcmV0dXJuIGdldENvbHVtbnMobWV0YSwgREJJZGVu\ndGlmaWVyLm5ld0NhdGFsb2coY2F0YWxvZyksIAogICAgICAgICAgICBEQklk\nZW50aWZpZXIubmV3U2NoZW1hKHNjaGVtYU5hbWUpLERCSWRlbnRpZmllci5u\nZXdUYWJsZSh0YWJsZU5hbWUpLAogICAgICAgICAgICBEQklkZW50aWZpZXIu\nbmV3Q29sdW1uKGNvbHVtbk5hbWUpLCBjb25uKTsKICAgIH0KCiAgICBAT3Zl\ncnJpZGUKICAgIHB1YmxpYyBDb2x1bW5bXSBnZXRDb2x1bW5zKERhdGFiYXNl\nTWV0YURhdGEgbWV0YSwgREJJZGVudGlmaWVyIGNhdGFsb2csCiAgICAgICAg\nREJJZGVudGlmaWVyIHNjaGVtYU5hbWUsIERCSWRlbnRpZmllciB0YWJsZU5h\nbWUsIERCSWRlbnRpZmllciBjb2x1bW5OYW1lLCBDb25uZWN0aW9uIGNvbm4p\nCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgQ29sdW1u\nW10gY29scyA9IHN1cGVyLmdldENvbHVtbnMobWV0YSwgY2F0YWxvZywgc2No\nZW1hTmFtZSwgdGFibGVOYW1lLAogICAgICAgICAgICBjb2x1bW5OYW1lLCBj\nb25uKTsKCiAgICAgICAgLy8gdHJlYXQgbG9ndmFyY2hhciBhcyBjbG9iCiAg\nICAgICAgZm9yIChpbnQgaSA9IDA7IGNvbHMgIT0gbnVsbCAmJiBpIDwgY29s\ncy5sZW5ndGg7IGkrKykKICAgICAgICAgICAgaWYgKGNvbHNbaV0uZ2V0VHlw\nZSgpID09IFR5cGVzLkxPTkdWQVJDSEFSKQogICAgICAgICAgICAgICAgY29s\nc1tpXS5zZXRUeXBlKFR5cGVzLkNMT0IpOwogICAgICAgIHJldHVybiBjb2xz\nOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIENvbHVtbiBuZXdD\nb2x1bW4oUmVzdWx0U2V0IGNvbE1ldGEpCiAgICAgICAgdGhyb3dzIFNRTEV4\nY2VwdGlvbiB7CiAgICAgICAgQ29sdW1uIGNvbCA9IHN1cGVyLm5ld0NvbHVt\nbihjb2xNZXRhKTsKICAgICAgICBpZiAoc3dhcFNjaGVtYUFuZENhdGFsb2cp\nCiAgICAgICAgICAgIGNvbC5zZXRTY2hlbWFJZGVudGlmaWVyKGZyb21EQk5h\nbWUoY29sTWV0YS5nZXRTdHJpbmcoIlRBQkxFX0NBVCIpLCBEQklkZW50aWZp\nZXJUeXBlLkNBVEFMT0cpKTsKICAgICAgICByZXR1cm4gY29sOwogICAgfQoK\nICAgIEBPdmVycmlkZQogICAgcHVibGljIFByaW1hcnlLZXkgbmV3UHJpbWFy\neUtleShSZXN1bHRTZXQgcGtNZXRhKQogICAgICAgIHRocm93cyBTUUxFeGNl\ncHRpb24gewogICAgICAgIFByaW1hcnlLZXkgcGsgPSBzdXBlci5uZXdQcmlt\nYXJ5S2V5KHBrTWV0YSk7CiAgICAgICAgaWYgKHN3YXBTY2hlbWFBbmRDYXRh\nbG9nKQogICAgICAgICAgICBway5zZXRTY2hlbWFJZGVudGlmaWVyKGZyb21E\nQk5hbWUocGtNZXRhLmdldFN0cmluZygiVEFCTEVfQ0FUIiksIERCSWRlbnRp\nZmllclR5cGUuQ0FUQUxPRykpOwogICAgICAgIHJldHVybiBwazsKICAgIH0K\nCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBJbmRleCBuZXdJbmRleChSZXN1\nbHRTZXQgaWR4TWV0YSkKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsK\nICAgICAgICBJbmRleCBpZHggPSBzdXBlci5uZXdJbmRleChpZHhNZXRhKTsK\nICAgICAgICBpZiAoc3dhcFNjaGVtYUFuZENhdGFsb2cpCiAgICAgICAgICAg\nIGlkeC5zZXRTY2hlbWFJZGVudGlmaWVyKGZyb21EQk5hbWUoaWR4TWV0YS5n\nZXRTdHJpbmcoIlRBQkxFX0NBVCIpLCBEQklkZW50aWZpZXJUeXBlLkNBVEFM\nT0cpKTsKICAgICAgICByZXR1cm4gaWR4OwogICAgfQoKICAgIEBPdmVycmlk\nZQogICAgcHVibGljIHZvaWQgc2V0Qm9vbGVhbihQcmVwYXJlZFN0YXRlbWVu\ndCBzdG1udCwgaW50IGlkeCwgYm9vbGVhbiB2YWwsCiAgICAgICAgQ29sdW1u\nIGNvbCkKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAv\nLyBpbmZvcm1peCBhY3R1YWxseSByZXF1aXJlcyB0aGF0IGEgYm9vbGVhbiBi\nZSBzZXQ6IGl0IGNhbm5vdAogICAgICAgIC8vIGhhbmRsZSBhIG51bWVyaWMg\nYXJndW1lbnQKICAgICAgICBzdG1udC5zZXRTdHJpbmcoaWR4LCB2YWwgPyAi\ndCIgOiAiZiIpOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIFN0\ncmluZ1tdIGdldENyZWF0ZVRhYmxlU1FMKFRhYmxlIHRhYmxlKSB7CiAgICAg\nICAgU3RyaW5nW10gY3JlYXRlID0gc3VwZXIuZ2V0Q3JlYXRlVGFibGVTUUwo\ndGFibGUpOwogICAgICAgIGNyZWF0ZVswXSA9IGNyZWF0ZVswXSArICIgTE9D\nSyBNT0RFIFJPVyI7CiAgICAgICAgcmV0dXJuIGNyZWF0ZTsKICAgIH0KCiAg\nICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBTdHJpbmdbXSBnZXRBZGRQcmltYXJ5\nS2V5U1FMKFByaW1hcnlLZXkgcGspIHsKICAgICAgICBTdHJpbmcgcGtzcWwg\nPSBnZXRQcmltYXJ5S2V5Q29uc3RyYWludFNRTChwayk7CiAgICAgICAgaWYg\nKHBrc3FsID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBuZXcgU3RyaW5n\nWzBdOwogICAgICAgIHJldHVybiBuZXcgU3RyaW5nW117ICJBTFRFUiBUQUJM\nRSAiCiAgICAgICAgICAgICsgZ2V0RnVsbE5hbWUocGsuZ2V0VGFibGUoKSwg\nZmFsc2UpICsgIiBBREQgQ09OU1RSQUlOVCAiICsgcGtzcWwgfTsKICAgIH0K\nCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBTdHJpbmdbXSBnZXRBZGRGb3Jl\naWduS2V5U1FMKEZvcmVpZ25LZXkgZmspIHsKICAgICAgICBTdHJpbmcgZmtz\ncWwgPSBnZXRGb3JlaWduS2V5Q29uc3RyYWludFNRTChmayk7CiAgICAgICAg\naWYgKGZrc3FsID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBuZXcgU3Ry\naW5nWzBdOwogICAgICAgIHJldHVybiBuZXcgU3RyaW5nW117ICJBTFRFUiBU\nQUJMRSAiCiAgICAgICAgICAgICsgZ2V0RnVsbE5hbWUoZmsuZ2V0VGFibGUo\nKSwgZmFsc2UpICsgIiBBREQgQ09OU1RSQUlOVCAiICsgZmtzcWwgfTsKICAg\nIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBib29sZWFuIHN1cHBvcnRz\nUmFuZG9tQWNjZXNzUmVzdWx0U2V0KFNlbGVjdCBzZWwsCiAgICAgICAgYm9v\nbGVhbiBmb3JVcGRhdGUpIHsKICAgICAgICByZXR1cm4gIWZvclVwZGF0ZSAm\nJiAhc2VsLmlzTG9iKCkKICAgICAgICAgICAgJiYgc3VwZXIuc3VwcG9ydHNS\nYW5kb21BY2Nlc3NSZXN1bHRTZXQoc2VsLCBmb3JVcGRhdGUpOwogICAgfQoK\nICAgIEBPdmVycmlkZQogICAgcHVibGljIENvbm5lY3Rpb24gZGVjb3JhdGUo\nQ29ubmVjdGlvbiBjb25uKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24g\newogICAgICAgIGNvbm4gPSBzdXBlci5kZWNvcmF0ZShjb25uKTsKICAgICAg\nICBpZiAoaXNKREJDMyAmJiBjb25uLmdldEhvbGRhYmlsaXR5KCkgIT0gCiAg\nICAgICAgICAgIFJlc3VsdFNldC5IT0xEX0NVUlNPUlNfT1ZFUl9DT01NSVQp\nIHsKICAgICAgICAgICAgY29ubi5zZXRIb2xkYWJpbGl0eShSZXN1bHRTZXQu\nSE9MRF9DVVJTT1JTX09WRVJfQ09NTUlUKTsKICAgICAgICAgICAgaWYgKGxv\nZy5pc1RyYWNlRW5hYmxlZCgpKSB7ICAgICAgICAgICAgICAgICAgICAKICAg\nICAgICAgICAgICAgIGxvZy50cmFjZShfbG9jLmdldCgiY29ubmVjdGlvbi1k\nZWZhdWx0cyIsIG5ldyBPYmplY3RbXXsKICAgICAgICAgICAgICAgICAgICBj\nb25uLmdldEF1dG9Db21taXQoKSwgY29ubi5nZXRIb2xkYWJpbGl0eSgpLAog\nICAgICAgICAgICAgICAgICAgIGNvbm4uZ2V0VHJhbnNhY3Rpb25Jc29sYXRp\nb24oKX0pKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8g\naWYgd2UgaGF2ZW4ndCBhbHJlYWR5IGRvbmUgc28sIGluaXRpYWxpemUgdGhl\nIGxvY2sgbW9kZSBvZiB0aGUKICAgICAgICAvLyBjb25uZWN0aW9uCiAgICAg\nICAgaWYgKGxvY2tNb2RlRW5hYmxlZCAmJiBfc2VlbkNvbm5lY3Rpb25zLmFk\nZChjb25uKSkgewogICAgICAgICAgICBTdHJpbmcgc3FsID0gIlNFVCBMT0NL\nIE1PREUgVE8gV0FJVCI7CiAgICAgICAgICAgIGlmIChsb2NrV2FpdFNlY29u\nZHMgPiAwKQogICAgICAgICAgICAgICAgc3FsID0gc3FsICsgIiAiICsgbG9j\na1dhaXRTZWNvbmRzOwoKICAgICAgICAgICAgU3RhdGVtZW50IHN0bW50ID0g\nbnVsbDsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHN0bW50\nID0gY29ubi5jcmVhdGVTdGF0ZW1lbnQoKTsKICAgICAgICAgICAgICAgIHN0\nbW50LmV4ZWN1dGVVcGRhdGUoc3FsKTsKICAgICAgICAgICAgfSBjYXRjaCAo\nU1FMRXhjZXB0aW9uIHNlKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBTUUxF\neGNlcHRpb25zLmdldFN0b3JlKHNlLCB0aGlzKTsKICAgICAgICAgICAgfSBm\naW5hbGx5IHsKICAgICAgICAgICAgICAgIGlmIChzdG1udCAhPSBudWxsKQog\nICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAg\nICAgIHN0bW50LmNsb3NlKCk7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRj\naCAoU1FMRXhjZXB0aW9uIHNlKSB7CiAgICAgICAgICAgICAgICAgICAgfQog\nICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyB0aGUgZGF0YWRp\ncmVjdCBkcml2ZXIgcmVxdWlyZXMgdGhhdCB3ZSBpc3N1ZSBhIHJvbGxiYWNr\nIGJlZm9yZSB1c2luZwogICAgICAgIC8vIGVhY2ggY29ubmVjdGlvbgogICAg\nICAgIGlmIChWRU5ET1JfREFUQURJUkVDVC5lcXVhbHNJZ25vcmVDYXNlKGRy\naXZlclZlbmRvcikpCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAg\nICBjb25uLnJvbGxiYWNrKCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKFNRTEV4\nY2VwdGlvbiBzZSkgewogICAgICAgICAgICB9CiAgICAgICAgcmV0dXJuIGNv\nbm47CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBpbmRl\neE9mKFNRTEJ1ZmZlciBidWYsIEZpbHRlclZhbHVlIHN0ciwgRmlsdGVyVmFs\ndWUgZmluZCwKICAgICAgICBGaWx0ZXJWYWx1ZSBzdGFydCkgewogICAgICAg\nIHRocm93IG5ldyBVbnN1cHBvcnRlZEV4Y2VwdGlvbihfbG9jLmdldCgiZnVu\nY3Rpb24tbm90LXN1cHBvcnRlZCIsCiAgICAgICAgICAgICAgICBnZXRDbGFz\ncygpLCAiTE9DQVRFIikpOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVi\nbGljIGJvb2xlYW4gbmVlZHNUb0NyZWF0ZUluZGV4KEluZGV4IGlkeCwgVGFi\nbGUgdGFibGUpIHsKICAgICAgIC8vIEluZm9ybWl4IHdpbGwgYXV0b21hdGlj\nYWxseSBjcmVhdGUgYSB1bmlxdWUgaW5kZXggZm9yIHRoZSAKICAgICAgIC8v\nIHByaW1hcnkga2V5LCBzbyBkb24ndCBjcmVhdGUgYW5vdGhlciBpbmRleCBh\nZ2FpbgogICAgICAgUHJpbWFyeUtleSBwayA9IHRhYmxlLmdldFByaW1hcnlL\nZXkoKTsKICAgICAgIGlmIChwayAhPSBudWxsICYmIGlkeC5jb2x1bW5zTWF0\nY2gocGsuZ2V0Q29sdW1ucygpKSkKICAgICAgICAgICByZXR1cm4gZmFsc2U7\nCiAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIAogICAgcHVibGljIGJv\nb2xlYW4gdXNlSkNDKCkgewogICAgICAgIHJldHVybiB1c2VKQ0M7CiAgICB9\nCiAgICAKICAgIC8qKgogICAgICogUmV0dXJuIERCIHNwZWNpZmljIHNjaGVt\nYUNhc2UgCiAgICAgKi8KICAgIEBPdmVycmlkZQogICAgcHVibGljIFN0cmlu\nZyBnZXRTY2hlbWFDYXNlKCl7CiAgICAgICAgcmV0dXJuIHNjaGVtYUNhc2U7\nCiAgICB9CiAgICAgICAgCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBib29s\nZWFuIGlzRmF0YWxFeGNlcHRpb24oaW50IHN1YnR5cGUsIFNRTEV4Y2VwdGlv\nbiBleCkgewogICAgICAgIAogICAgICAgIC8vIFNRTCBTdGF0ZSBvZiBJWDAw\nMCBpcyBhIGdlbmVyYWwgcHVycG9zZSBJbmZvcm1peCBlcnJvciBjb2RlCiAg\nICAgICAgLy8gY2F0ZWdvcnksIHNvIG9ubHkgcmV0dXJuIEJvb2xlYW4uVFJV\nRSBpZiB3ZSBtYXRjaCBTUUwgQ29kZXMKICAgICAgICAvLyByZWNvdmVyYWJs\nZSA9IEJvb2xlYW4uRkFMU0U7CiAgICAgICAgaWYgKChzdWJ0eXBlID09IFN0\nb3JlRXhjZXB0aW9uLkxPQ0sgJiYgZXguZ2V0RXJyb3JDb2RlKCkgPT0gLTE1\nNCkgCiAgICAgICAgICB8fChzdWJ0eXBlID09IFN0b3JlRXhjZXB0aW9uLlFV\nRVJZICYmIGV4LmdldEVycm9yQ29kZSgpID09IC0yMTMpKSB7CiAgICAgICAg\nICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAg\ncmV0dXJuIHN1cGVyLmlzRmF0YWxFeGNlcHRpb24oc3VidHlwZSwgZXgpOwog\nICAgfQp9Cgo=\n","encoding":"base64"}

