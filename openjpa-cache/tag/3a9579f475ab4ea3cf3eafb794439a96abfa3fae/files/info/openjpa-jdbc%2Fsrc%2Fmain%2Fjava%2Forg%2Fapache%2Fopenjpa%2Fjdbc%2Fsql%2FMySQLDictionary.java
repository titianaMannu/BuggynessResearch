{"sha":"6efadb88bae3db50e8f59a4acc03eff4be34d7e0","node_id":"MDQ6QmxvYjIwNjM2NDo2ZWZhZGI4OGJhZTNkYjUwZThmNTlhNGFjYzAzZWZmNGJlMzRkN2Uw","size":17107,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/6efadb88bae3db50e8f59a4acc03eff4be34d7e0","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWw7CgppbXBvcnQg\namF2YS5zcWwuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmEuc3FsLkRhdGFiYXNl\nTWV0YURhdGE7CmltcG9ydCBqYXZhLnNxbC5SZXN1bHRTZXQ7CmltcG9ydCBq\nYXZhLnNxbC5TUUxFeGNlcHRpb247CmltcG9ydCBqYXZhLnNxbC5UeXBlczsK\naW1wb3J0IGphdmEudXRpbC5BcnJheXM7CmltcG9ydCBqYXZhLnV0aWwuQ29s\nbGVjdGlvbjsKaW1wb3J0IGphdmEudXRpbC5IYXNoU2V0OwppbXBvcnQgamF2\nYS51dGlsLkxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuU2V0OwoKaW1wb3J0IG9y\nZy5hcGFjaGUuY29tbW9ucy5sYW5nLlN0cmluZ1V0aWxzOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMuaWRlbnRpZmllci5EQklkZW50aWZpZXI7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuSkRCQ0Zl\ndGNoQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5q\nZGJjLmtlcm5lbC5KREJDU3RvcmU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5rZXJuZWwuZXhwcy5GaWx0ZXJWYWx1ZTsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5Db2x1bW47CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuRm9yZWlnbktleTsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5JbmRleDsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5QcmltYXJ5S2V5Owpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLlRhYmxlOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuU3RvcmVFeGNlcHRpb247\nCgovKioKICogRGljdGlvbmFyeSBmb3IgTXlTUUwuCiAqLwpwdWJsaWMgY2xh\nc3MgTXlTUUxEaWN0aW9uYXJ5CiAgICBleHRlbmRzIERCRGljdGlvbmFyeSB7\nCgogICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgU0VMRUNUX0hJTlQg\nPSAib3BlbmpwYS5oaW50Lk15U1FMU2VsZWN0SGludCI7CgogICAgcHVibGlj\nIHN0YXRpYyBmaW5hbCBTdHJpbmcgREVMSU1JVEVSX0JBQ0tfVElDSyA9ICJg\nIjsKICAgIAogICAgLyoqCiAgICAgKiBUaGUgTXlTUUwgdGFibGUgdHlwZSB0\nbyB1c2Ugd2hlbiBjcmVhdGluZyB0YWJsZXM7IGRlZmF1bHRzIHRvIGlubm9k\nYi4KICAgICAqLwogICAgcHVibGljIFN0cmluZyB0YWJsZVR5cGUgPSAiaW5u\nb2RiIjsKCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8gdXNlIGNsb2JzOyBk\nZWZhdWx0cyB0byB0cnVlLiBTZXQgdGhpcyB0byBmYWxzZSBpZiB5b3UgaGF2\nZSBhbgogICAgICogb2xkIHZlcnNpb24gb2YgTXlTUUwgd2hpY2ggZG9lcyBu\nb3QgaGFuZGxlIGNsb2JzIHByb3Blcmx5LgogICAgICovCiAgICBwdWJsaWMg\nYm9vbGVhbiB1c2VDbG9icyA9IHRydWU7CgogICAgLyoqCiAgICAgKiBXaGV0\naGVyIHRoZSBkcml2ZXIgYXV0b21hdGljYWxseSBkZXNlcmlhbGl6ZXMgYmxv\nYnMuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGRyaXZlckRlc2VyaWFs\naXplc0Jsb2JzID0gZmFsc2U7CgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRv\nIGlubGluZSBtdWx0aS10YWJsZSBidWxrLWRlbGV0ZSBvcGVyYXRpb25zIGlu\ndG8gTXlTUUwncyAKICAgICAqIGNvbWJpbmVkIDxjb2RlPkRFTEVURSBGUk9N\nIGZvbywgYmFyLCBiYXo8L2NvZGU+IHN5bnRheC4gCiAgICAgKiBEZWZhdWx0\ncyB0byBmYWxzZSwgc2luY2UgdGhpcyBtYXkgZmFpbCBpbiB0aGUgcHJlc2Vu\nY2Ugb2YgSW5ub0RCIHRhYmxlcwogICAgICogd2l0aCBmb3JlaWduIGtleXMu\nCiAgICAgKiBAc2VlIGh0dHA6Ly9kZXYubXlzcWwuY29tL2RvYy9yZWZtYW4v\nNS4wL2VuL2RlbGV0ZS5odG1sCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFu\nIG9wdGltaXplTXVsdGlUYWJsZURlbGV0ZXMgPSBmYWxzZTsKCiAgICBwdWJs\naWMgc3RhdGljIGZpbmFsIFN0cmluZyB0aW55QmxvYlR5cGVOYW1lID0gIlRJ\nTllCTE9CIjsKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgU3RyaW5nIG1lZGl1\nbUJsb2JUeXBlTmFtZSA9ICJNRURJVU1CTE9CIjsKICAgIHB1YmxpYyBzdGF0\naWMgZmluYWwgU3RyaW5nIGxvbmdCbG9iVHlwZU5hbWUgPSAiTE9OR0JMT0Ii\nOwoKICAgIHB1YmxpYyBNeVNRTERpY3Rpb25hcnkoKSB7CiAgICAgICAgcGxh\ndGZvcm0gPSAiTXlTUUwiOwogICAgICAgIHZhbGlkYXRpb25TUUwgPSAiU0VM\nRUNUIE5PVygpIjsKICAgICAgICBkaXN0aW5jdENvdW50Q29sdW1uU2VwYXJh\ndG9yID0gIiwiOwoKICAgICAgICBzdXBwb3J0c0RlZmVycmVkQ29uc3RyYWlu\ndHMgPSBmYWxzZTsKICAgICAgICBjb25zdHJhaW50TmFtZU1vZGUgPSBDT05T\nX05BTUVfTUlEOwogICAgICAgIHN1cHBvcnRzTXVsdGlwbGVOb250cmFuc2Fj\ndGlvbmFsUmVzdWx0U2V0cyA9IGZhbHNlOwogICAgICAgIHJlcXVpcmVzQWxp\nYXNGb3JTdWJzZWxlY3QgPSB0cnVlOyAvLyBuZXcgdmVyc2lvbnMKICAgICAg\nICByZXF1aXJlc1RhcmdldEZvckRlbGV0ZSA9IHRydWU7CiAgICAgICAgc3Vw\ncG9ydHNTZWxlY3RTdGFydEluZGV4ID0gdHJ1ZTsKICAgICAgICBzdXBwb3J0\nc1NlbGVjdEVuZEluZGV4ID0gdHJ1ZTsKCiAgICAgICAgY29uY2F0ZW5hdGVG\ndW5jdGlvbiA9ICJDT05DQVQoezB9LHsxfSkiOwoKICAgICAgICBtYXhUYWJs\nZU5hbWVMZW5ndGggPSA2NDsKICAgICAgICBtYXhDb2x1bW5OYW1lTGVuZ3Ro\nID0gNjQ7CiAgICAgICAgbWF4SW5kZXhOYW1lTGVuZ3RoID0gNjQ7CiAgICAg\nICAgbWF4Q29uc3RyYWludE5hbWVMZW5ndGggPSA2NDsKICAgICAgICBtYXhJ\nbmRleGVzUGVyVGFibGUgPSAzMjsKICAgICAgICBzY2hlbWFDYXNlID0gU0NI\nRU1BX0NBU0VfUFJFU0VSVkU7CgogICAgICAgIHN1cHBvcnRzQXV0b0Fzc2ln\nbiA9IHRydWU7CiAgICAgICAgbGFzdEdlbmVyYXRlZEtleVF1ZXJ5ID0gIlNF\nTEVDVCBMQVNUX0lOU0VSVF9JRCgpIjsKICAgICAgICBhdXRvQXNzaWduQ2xh\ndXNlID0gIkFVVE9fSU5DUkVNRU5UIjsKCiAgICAgICAgY2xvYlR5cGVOYW1l\nID0gIlRFWFQiOwogICAgICAgIGxvbmdWYXJjaGFyVHlwZU5hbWUgPSAiVEVY\nVCI7CiAgICAgICAgbG9uZ1ZhcmJpbmFyeVR5cGVOYW1lID0gIkxPTkcgVkFS\nQklOQVJZIjsKICAgICAgICB0aW1lc3RhbXBUeXBlTmFtZSA9ICJEQVRFVElN\nRSI7CiAgICAgICAgeG1sVHlwZU5hbWUgPSAiVEVYVCI7CiAgICAgICAgZml4\nZWRTaXplVHlwZU5hbWVTZXQuYWRkQWxsKEFycmF5cy5hc0xpc3QobmV3IFN0\ncmluZ1tdewogICAgICAgICAgICAiQk9PTCIsICJMT05HIFZBUkJJTkFSWSIs\nICJNRURJVU1CTE9CIiwgIkxPTkdCTE9CIiwKICAgICAgICAgICAgIlRJTllC\nTE9CIiwgIkxPTkcgVkFSQ0hBUiIsICJNRURJVU1URVhUIiwgIkxPTkdURVhU\nIiwgIlRFWFQiLAogICAgICAgICAgICAiVElOWVRFWFQiLCAiRE9VQkxFIFBS\nRUNJU0lPTiIsICJFTlVNIiwgIlNFVCIsICJEQVRFVElNRSIsCiAgICAgICAg\nfSkpOwogICAgICAgIHJlc2VydmVkV29yZFNldC5hZGRBbGwoQXJyYXlzLmFz\nTGlzdChuZXcgU3RyaW5nW117CiAgICAgICAgICAgICJBVVRPX0lOQ1JFTUVO\nVCIsICJCSU5BUlkiLCAiQkxPQiIsICJDSEFOR0UiLCAiRU5VTSIsICJJTkZJ\nTEUiLAogICAgICAgICAgICAiSU5UMSIsICJJTlQyIiwgIklOVDQiLCAiRkxP\nQVQxIiwgIkZMT0FUMiIsICJGTE9BVDQiLCAiTE9BRCIsCiAgICAgICAgICAg\nICJNRURJVU1JTlQiLCAiT1VURklMRSIsICJSRVBMQUNFIiwgIlNUQVJUSU5H\nIiwgIlRFWFQiLCAiVU5TSUdORUQiLCAKICAgICAgICAgICAgIlpFUk9GSUxM\nIiwKICAgICAgICB9KSk7CgogICAgICAgIC8vIHJlc2VydmVkV29yZFNldCBz\ndWJzZXQgdGhhdCBDQU5OT1QgYmUgdXNlZCBhcyB2YWxpZCBjb2x1bW4gbmFt\nZXMKICAgICAgICAvLyAoaS5lLiwgd2l0aG91dCBzdXJyb3VuZGluZyB0aGVt\nIHdpdGggZG91YmxlLXF1b3RlcykKICAgICAgICBpbnZhbGlkQ29sdW1uV29y\nZFNldC5hZGRBbGwoQXJyYXlzLmFzTGlzdChuZXcgU3RyaW5nW117CiAgICAg\nICAgICAgICJBREQiLCAiQUxMIiwgIkFMVEVSIiwgIkFORCIsICJBUyIsICJB\nU0MiLCAiQkVUV0VFTiIsICJCSU5BUlkiLAogICAgICAgICAgICAiQkxPQiIs\nICJCT1RIIiwgIkJZIiwgIkNBU0NBREUiLCAiQ0FTRSIsICJDSEFOR0UiLCAi\nQ0hBUiIsIAogICAgICAgICAgICAiQ0hBUkFDVEVSIiwgIkNIRUNLIiwgIkNP\nTExBVEUiLCAiQ09MVU1OIiwgIkNPTlNUUkFJTlQiLCAiQ09OVElOVUUiLAog\nICAgICAgICAgICAiQ09OVkVSVCIsICJDUkVBVEUiLCAiQ1JPU1MiLCAiQ1VS\nUkVOVF9EQVRFIiwgIkNVUlJFTlRfVElNRSIsCiAgICAgICAgICAgICJDVVJS\nRU5UX1RJTUVTVEFNUCIsICJDVVJSRU5UX1VTRVIiLCAiQ1VSU09SIiwgIkRF\nQyIsICJERUNJTUFMIiwKICAgICAgICAgICAgIkRFQ0xBUkUiLCAiREVGQVVM\nVCIsICJERUxFVEUiLCAiREVTQyIsICJERVNDUklCRSIsICJESVNUSU5DVCIs\nCiAgICAgICAgICAgICJET1VCTEUiLCAiRFJPUCIsICJFTFNFIiwgIkVORC1F\nWEVDIiwgIkVYSVNUUyIsICJGQUxTRSIsICJGRVRDSCIsCiAgICAgICAgICAg\nICJGTE9BVCIsICJGTE9BVDQiLCAiRk9SIiwgIkZPUkVJR04iLCAiRlJPTSIs\nICJHUkFOVCIsICJHUk9VUCIsCiAgICAgICAgICAgICJIQVZJTkciLCAiSU4i\nLCAiSU5GSUxFIiwgIklOTkVSIiwgIklOU0VOU0lUSVZFIiwgIklOU0VSVCIs\nICJJTlQiLAogICAgICAgICAgICAiSU5UMSIsICJJTlQyIiwgIklOVDQiLCAi\nSU5URUdFUiIsICJJTlRFUlZBTCIsICJJTlRPIiwgIklTIiwgIkpPSU4iLAog\nICAgICAgICAgICAiS0VZIiwgIkxFQURJTkciLCAiTEVGVCIsICJMSUtFIiwg\nIkxPQUQiLCAiTUFUQ0giLCAiTUVESVVNSU5UIiwKICAgICAgICAgICAgIk5B\nVFVSQUwiLCAiTk9UIiwgIk5VTEwiLCAiTlVNRVJJQyIsICJPTiIsICJPUFRJ\nT04iLCAiT1IiLCAiT1JERVIiLAogICAgICAgICAgICAiT1VURVIiLCAiT1VU\nRklMRSIsICJQUkVDSVNJT04iLCAiUFJJTUFSWSIsICJQUk9DRURVUkUiLCAi\nUkVBRCIsCiAgICAgICAgICAgICJSRUFMIiwgIlJFRkVSRU5DRVMiLCAiUkVQ\nTEFDRSIsICJSRVNUUklDVCIsICJSRVZPS0UiLCAiUklHSFQiLAogICAgICAg\nICAgICAiU0NIRU1BIiwgIlNFTEVDVCIsICJTRVQiLCAiU01BTExJTlQiLCAi\nU1FMIiwgIlNRTFNUQVRFIiwKICAgICAgICAgICAgIlNUQVJUSU5HIiwgIlRB\nQkxFIiwgIlRIRU4iLCAiVE8iLCAiVFJBSUxJTkciLCAiVFJVRSIsICJVTklP\nTiIsCiAgICAgICAgICAgICJVTklRVUUiLCAiVU5TSUdORUQiLCAiVVBEQVRF\nIiwgIlVTQUdFIiwgIlVTSU5HIiwgIlZBTFVFUyIsCiAgICAgICAgICAgICJW\nQVJDSEFSIiwgIlZBUllJTkciLCAiV0hFTiIsICJXSEVSRSIsICJXSVRIIiwg\nIldSSVRFIiwgIlpFUk9GSUxMIiwKICAgICAgICB9KSk7CgogICAgICAgIC8v\nIE15U1FMIHJlcXVpcmVzIGRvdWJsZS1lc2NhcGUgZm9yIHN0cmluZ3MKICAg\nICAgICBzZWFyY2hTdHJpbmdFc2NhcGUgPSAiXFxcXCI7CgogICAgICAgIHR5\ncGVNb2RpZmllclNldC5hZGRBbGwoQXJyYXlzLmFzTGlzdChuZXcgU3RyaW5n\nW10geyAiVU5TSUdORUQiLAogICAgICAgICAgICAiWkVST0ZJTEwiIH0pKTsK\nCiAgICAgICAgc2V0TGVhZGluZ0RlbGltaXRlcihERUxJTUlURVJfQkFDS19U\nSUNLKTsKICAgICAgICBzZXRUcmFpbGluZ0RlbGltaXRlcihERUxJTUlURVJf\nQkFDS19USUNLKTsKICAgICAgICAKICAgICAgICBmaXhlZFNpemVUeXBlTmFt\nZVNldC5yZW1vdmUoIk5VTUVSSUMiKTsKICAgIH0KCiAgICBAT3ZlcnJpZGUK\nICAgIHB1YmxpYyB2b2lkIGNvbm5lY3RlZENvbmZpZ3VyYXRpb24oQ29ubmVj\ndGlvbiBjb25uKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBzdXBl\nci5jb25uZWN0ZWRDb25maWd1cmF0aW9uKGNvbm4pOwoKICAgICAgICBEYXRh\nYmFzZU1ldGFEYXRhIG1ldGFEYXRhID0gY29ubi5nZXRNZXRhRGF0YSgpOwog\nICAgICAgIGludCBtYWogPSAwOwogICAgICAgIGludCBtaW4gPSAwOwogICAg\nICAgIGlmIChpc0pEQkMzKSB7CiAgICAgICAgICAgIG1haiA9IG1ldGFEYXRh\nLmdldERhdGFiYXNlTWFqb3JWZXJzaW9uKCk7CiAgICAgICAgICAgIG1pbiA9\nIG1ldGFEYXRhLmdldERhdGFiYXNlTWlub3JWZXJzaW9uKCk7CiAgICAgICAg\nfSBlbHNlIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIC8v\nIFRoZSBwcm9kdWN0IHZlcnNpb24gbG9va3MgbGlrZSA0LjEuMy1udCBvciA1\nLjEuMzAKICAgICAgICAgICAgICAgIFN0cmluZyBwcm9kdWN0VmVyc2lvbiA9\nIG1ldGFEYXRhLmdldERhdGFiYXNlUHJvZHVjdFZlcnNpb24oKTsKICAgICAg\nICAgICAgICAgIGludFtdIHZlcnNpb25zID0gZ2V0TWFqb3JNaW5vclZlcnNp\nb25zKHByb2R1Y3RWZXJzaW9uKTsKICAgICAgICAgICAgICAgIG1haiA9IHZl\ncnNpb25zWzBdOwogICAgICAgICAgICAgICAgbWluID0gdmVyc2lvbnNbMV07\nCiAgICAgICAgICAgIH0gY2F0Y2ggKElsbGVnYWxBcmd1bWVudEV4Y2VwdGlv\nbiBlKSB7CiAgICAgICAgICAgICAgICAvLyB3ZSBkb24ndCB1bmRlcnN0YW5k\nIHRoZSB2ZXJzaW9uIGZvcm1hdC4KICAgICAgICAgICAgICAgIC8vIFRoYXQg\naXMgb2suIFdlIGp1c3QgdGFrZSB0aGUgZGVmYXVsdCB2YWx1ZXMuCiAgICAg\nICAgICAgICAgICBpZiAobG9nLmlzV2FybkVuYWJsZWQoKSkKICAgICAgICAg\nICAgICAgICAgICBsb2cud2FybihlLnRvU3RyaW5nKCksIGUpOwogICAgICAg\nICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChtYWogPCA0IHx8IChtYWog\nPT0gNCAmJiBtaW4gPCAxKSkgewogICAgICAgICAgICBzdXBwb3J0c1N1YnNl\nbGVjdCA9IGZhbHNlOwogICAgICAgICAgICBhbGxvd3NBbGlhc0luQnVsa0Ns\nYXVzZSA9IGZhbHNlOwogICAgICAgICAgICBzdXBwb3J0c0ZvcmVpZ25LZXlz\nQ29tcG9zaXRlID0gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGlmIChtYWog\nPiA1IHx8IChtYWogPT0gNSAmJiBtaW4gPj0gMSkpCiAgICAgICAgICAgIHN1\ncHBvcnRzWE1MQ29sdW1uID0gdHJ1ZTsKCiAgICAgICAgaWYgKG1ldGFEYXRh\nLmdldERyaXZlck1ham9yVmVyc2lvbigpIDwgNSkKICAgICAgICAgICAgZHJp\ndmVyRGVzZXJpYWxpemVzQmxvYnMgPSB0cnVlOwogICAgfQoKICAgIEBPdmVy\ncmlkZQogICAgcHVibGljIENvbm5lY3Rpb24gZGVjb3JhdGUoQ29ubmVjdGlv\nbiBjb25uKSAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgY29ubiA9\nIHN1cGVyLmRlY29yYXRlKGNvbm4pOwogICAgICAgIFN0cmluZyBkcml2ZXIg\nPSBjb25mLmdldENvbm5lY3Rpb25Ecml2ZXJOYW1lKCk7CiAgICAgICAgaWYg\nKCJjb20ubXlzcWwuamRiYy5SZXBsaWNhdGlvbkRyaXZlciIuZXF1YWxzKGRy\naXZlcikpCiAgICAgICAgICAgIGNvbm4uc2V0UmVhZE9ubHkodHJ1ZSk7CiAg\nICAgICAgcmV0dXJuIGNvbm47CiAgICB9CiAgICAKICAgIHByaXZhdGUgc3Rh\ndGljIGludFtdIGdldE1ham9yTWlub3JWZXJzaW9ucyhTdHJpbmcgdmVyc2lv\nblN0cikKICAgICAgICB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9u\nIHsKICAgICAgICBpbnQgYmVnaW5JbmRleCA9IDA7CgogICAgICAgIHZlcnNp\nb25TdHIgPSB2ZXJzaW9uU3RyLnRyaW0oKTsKICAgICAgICBjaGFyW10gY2hh\nckFyciA9IHZlcnNpb25TdHIudG9DaGFyQXJyYXkoKTsKICAgICAgICBmb3Ig\nKGludCBpID0gMDsgaSA8IGNoYXJBcnIubGVuZ3RoOyBpKyspIHsKICAgICAg\nICAgICAgaWYgKENoYXJhY3Rlci5pc0RpZ2l0KGNoYXJBcnJbaV0pKSB7CiAg\nICAgICAgICAgICAgICBiZWdpbkluZGV4ID0gaTsKICAgICAgICAgICAgICAg\nIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpbnQg\nZW5kSW5kZXggPSBjaGFyQXJyLmxlbmd0aDsKICAgICAgICBmb3IgKGludCBp\nID0gYmVnaW5JbmRleCsxOyBpIDwgY2hhckFyci5sZW5ndGg7IGkrKykgewog\nICAgICAgICAgICBpZiAoY2hhckFycltpXSAhPSAnLicgJiYgIUNoYXJhY3Rl\nci5pc0RpZ2l0KGNoYXJBcnJbaV0pKSB7CiAgICAgICAgICAgICAgICBlbmRJ\nbmRleCA9IGk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAg\nfQogICAgICAgIH0KCiAgICAgICAgU3RyaW5nW10gYXJyID0gdmVyc2lvblN0\nci5zdWJzdHJpbmcoYmVnaW5JbmRleCwgZW5kSW5kZXgpLnNwbGl0KCJcXC4i\nKTsKICAgICAgICBpZiAoYXJyLmxlbmd0aCA8IDIpCiAgICAgICAgICAgIHRo\ncm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oKTsKCiAgICAgICAg\naW50IG1haiA9IEludGVnZXIucGFyc2VJbnQoYXJyWzBdKTsKICAgICAgICBp\nbnQgbWluID0gSW50ZWdlci5wYXJzZUludChhcnJbMV0pOwogICAgICAgIHJl\ndHVybiBuZXcgaW50W117bWFqLCBtaW59OwogICAgfQoKICAgIEBPdmVycmlk\nZQogICAgcHVibGljIFN0cmluZ1tdIGdldENyZWF0ZVRhYmxlU1FMKFRhYmxl\nIHRhYmxlKSB7CiAgICAgICAgU3RyaW5nW10gc3FsID0gc3VwZXIuZ2V0Q3Jl\nYXRlVGFibGVTUUwodGFibGUpOwogICAgICAgIGlmICghU3RyaW5nVXRpbHMu\naXNFbXB0eSh0YWJsZVR5cGUpKQogICAgICAgICAgICBzcWxbMF0gPSBzcWxb\nMF0gKyAiIEVOR0lORSA9ICIgKyB0YWJsZVR5cGU7CiAgICAgICAgcmV0dXJu\nIHNxbDsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBTdHJpbmdb\nXSBnZXREcm9wSW5kZXhTUUwoSW5kZXggaW5kZXgpIHsKICAgICAgICByZXR1\ncm4gbmV3IFN0cmluZ1tdeyAiRFJPUCBJTkRFWCAiICsgZ2V0RnVsbE5hbWUo\naW5kZXgpICsgIiBPTiAiCiAgICAgICAgICAgICsgZ2V0RnVsbE5hbWUoaW5k\nZXguZ2V0VGFibGUoKSwgZmFsc2UpIH07CiAgICB9CgogICAgLyoqCiAgICAg\nKiBSZXR1cm4gPGNvZGU+QUxURVIgVEFCTEUgJmx0O3RhYmxlIG5hbWUmZ3Q7\nIERST1AgUFJJTUFSWSBLRVk8L2NvZGU+LgogICAgICovCiAgICBAT3ZlcnJp\nZGUKICAgIHB1YmxpYyBTdHJpbmdbXSBnZXREcm9wUHJpbWFyeUtleVNRTChQ\ncmltYXJ5S2V5IHBrKSB7CiAgICAgICAgaWYgKERCSWRlbnRpZmllci5pc051\nbGwocGsuZ2V0SWRlbnRpZmllcigpKSkKICAgICAgICAgICAgcmV0dXJuIG5l\ndyBTdHJpbmdbMF07CiAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmdbXXsgIkFM\nVEVSIFRBQkxFICIKICAgICAgICAgICAgKyBnZXRGdWxsTmFtZShway5nZXRU\nYWJsZSgpLCBmYWxzZSkKICAgICAgICAgICAgKyAiIERST1AgUFJJTUFSWSBL\nRVkiIH07CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gPGNvZGU+QUxU\nRVIgVEFCTEUgJmx0O3RhYmxlIG5hbWUmZ3Q7IERST1AgRk9SRUlHTiBLRVkK\nICAgICAqICZsdDtmayBuYW1lJmd0OzwvY29kZT4uCiAgICAgKi8KICAgIEBP\ndmVycmlkZQogICAgcHVibGljIFN0cmluZ1tdIGdldERyb3BGb3JlaWduS2V5\nU1FMKEZvcmVpZ25LZXkgZmssIENvbm5lY3Rpb24gY29ubikgewogICAgICAg\nIGlmIChEQklkZW50aWZpZXIuaXNOdWxsKGZrLmdldElkZW50aWZpZXIoKSkp\nIHsKICAgICAgICAgICAgREJJZGVudGlmaWVyIGZrTmFtZSA9IGZrLmxvYWRJ\nZGVudGlmaWVyRnJvbURCKHRoaXMsY29ubik7CiAgICAgICAgICAgIFN0cmlu\nZ1tdIHJldFZhbCA9IChma05hbWUgPT0gbnVsbCkgPyAgbmV3IFN0cmluZ1sw\nXSA6CiAgICAgICAgICAgICAgICBuZXcgU3RyaW5nW117ICJBTFRFUiBUQUJM\nRSAiCiAgICAgICAgICAgICAgICArIGdldEZ1bGxOYW1lKGZrLmdldFRhYmxl\nKCksIGZhbHNlKQogICAgICAgICAgICAgICAgKyAiIERST1AgRk9SRUlHTiBL\nRVkgIiArIHRvREJOYW1lKGZrTmFtZSkgfTsKICAgICAgICAgICAgcmV0dXJu\nIHJldFZhbDsgICAKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG5ldyBTdHJp\nbmdbXXsgIkFMVEVSIFRBQkxFICIKICAgICAgICAgICAgKyBnZXRGdWxsTmFt\nZShmay5nZXRUYWJsZSgpLCBmYWxzZSkKICAgICAgICAgICAgKyAiIERST1Ag\nRk9SRUlHTiBLRVkgIiArIHRvREJOYW1lKGZrLmdldElkZW50aWZpZXIoKSkg\nfTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBTdHJpbmdbXSBn\nZXRBZGRQcmltYXJ5S2V5U1FMKFByaW1hcnlLZXkgcGspIHsKICAgICAgICBT\ndHJpbmdbXSBzcWwgPSBzdXBlci5nZXRBZGRQcmltYXJ5S2V5U1FMKHBrKTsK\nCiAgICAgICAgLy8gbXlzcWwgcmVxdWlyZXMgdGhhdCBhIGNvbHVtbiBiZSBk\nZWNsYXJlZCBOT1QgTlVMTCBiZWZvcmUKICAgICAgICAvLyBpdCBjYW4gYmUg\nbWFkZSBhIHByaW1hcnkga2V5LgogICAgICAgIENvbHVtbltdIGNvbHMgPSBw\nay5nZXRDb2x1bW5zKCk7CiAgICAgICAgU3RyaW5nW10gcmV0ID0gbmV3IFN0\ncmluZ1tjb2xzLmxlbmd0aCArIHNxbC5sZW5ndGhdOwogICAgICAgIGZvciAo\naW50IGkgPSAwOyBpIDwgY29scy5sZW5ndGg7IGkrKykgewogICAgICAgICAg\nICByZXRbaV0gPSAiQUxURVIgVEFCTEUgIiArIGdldEZ1bGxOYW1lKGNvbHNb\naV0uZ2V0VGFibGUoKSwgZmFsc2UpCiAgICAgICAgICAgICAgICArICIgQ0hB\nTkdFICIgKyB0b0RCTmFtZShjb2xzW2ldLmdldElkZW50aWZpZXIoKSkKICAg\nICAgICAgICAgICAgICsgIiAiICsgdG9EQk5hbWUoY29sc1tpXS5nZXRJZGVu\ndGlmaWVyKCkpIC8vIG5hbWUgdHdpY2UKICAgICAgICAgICAgICAgICsgIiAi\nICsgZ2V0VHlwZU5hbWUoY29sc1tpXSkgKyAiIE5PVCBOVUxMIjsKICAgICAg\nICB9CgogICAgICAgIFN5c3RlbS5hcnJheWNvcHkoc3FsLCAwLCByZXQsIGNv\nbHMubGVuZ3RoLCBzcWwubGVuZ3RoKTsKICAgICAgICByZXR1cm4gcmV0Owog\nICAgfQogICAgCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBTdHJpbmdbXSBn\nZXREZWxldGVUYWJsZUNvbnRlbnRzU1FMKFRhYmxlW10gdGFibGVzLENvbm5l\nY3Rpb24gY29ubikgewogICAgICAgIC8vIG15c3FsID49IDQgc3VwcG9ydHMg\nbW9yZS1vcHRpbWFsIGRlbGV0ZSBzeW50YXgKICAgICAgICBpZiAoIW9wdGlt\naXplTXVsdGlUYWJsZURlbGV0ZXMpCiAgICAgICAgICAgIHJldHVybiBzdXBl\nci5nZXREZWxldGVUYWJsZUNvbnRlbnRzU1FMKHRhYmxlcyxjb25uKTsKICAg\nICAgICBlbHNlIHsKICAgICAgICAgICAgU3RyaW5nQnVpbGRlciBidWYgPSBu\nZXcgU3RyaW5nQnVpbGRlcih0YWJsZXMubGVuZ3RoICogOCk7CiAgICAgICAg\nICAgIGJ1Zi5hcHBlbmQoIkRFTEVURSBGUk9NICIpOwogICAgICAgICAgICBm\nb3IgKGludCBpID0gMDsgaSA8IHRhYmxlcy5sZW5ndGg7IGkrKykgewogICAg\nICAgICAgICAgICAgYnVmLmFwcGVuZCh0b0RCTmFtZSh0YWJsZXNbaV0uZ2V0\nRnVsbElkZW50aWZpZXIoKSkpOwogICAgICAgICAgICAgICAgaWYgKGkgPCB0\nYWJsZXMubGVuZ3RoIC0gMSkKICAgICAgICAgICAgICAgICAgICBidWYuYXBw\nZW5kKCIsICIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBu\nZXcgU3RyaW5nW10geyBidWYudG9TdHJpbmcoKSB9OwogICAgICAgIH0KICAg\nIH0KCiAgICBAT3ZlcnJpZGUKICAgIHByb3RlY3RlZCB2b2lkIGFwcGVuZFNl\nbGVjdFJhbmdlKFNRTEJ1ZmZlciBidWYsIGxvbmcgc3RhcnQsIGxvbmcgZW5k\nLAogICAgICAgIGJvb2xlYW4gc3Vic2VsZWN0KSB7CiAgICAgICAgYnVmLmFw\ncGVuZCgiIExJTUlUICIpLmFwcGVuZFZhbHVlKHN0YXJ0KS5hcHBlbmQoIiwg\nIik7CiAgICAgICAgaWYgKGVuZCA9PSBMb25nLk1BWF9WQUxVRSkKICAgICAg\nICAgICAgYnVmLmFwcGVuZFZhbHVlKExvbmcuTUFYX1ZBTFVFKTsKICAgICAg\nICBlbHNlCiAgICAgICAgICAgIGJ1Zi5hcHBlbmRWYWx1ZShlbmQgLSBzdGFy\ndCk7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwcm90ZWN0ZWQgQ29sdW1u\nIG5ld0NvbHVtbihSZXN1bHRTZXQgY29sTWV0YSkKICAgICAgICB0aHJvd3Mg\nU1FMRXhjZXB0aW9uIHsKICAgICAgICBDb2x1bW4gY29sID0gc3VwZXIubmV3\nQ29sdW1uKGNvbE1ldGEpOwogICAgICAgIGlmIChjb2wuaXNOb3ROdWxsKCkg\nJiYgIjAiLmVxdWFscyhjb2wuZ2V0RGVmYXVsdFN0cmluZygpKSkKICAgICAg\nICAgICAgY29sLnNldERlZmF1bHRTdHJpbmcobnVsbCk7CiAgICAgICAgcmV0\ndXJuIGNvbDsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBPYmpl\nY3QgZ2V0QmxvYk9iamVjdChSZXN1bHRTZXQgcnMsIGludCBjb2x1bW4sIEpE\nQkNTdG9yZSBzdG9yZSkKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsK\nICAgICAgICAvLyBpZiB0aGUgdXNlciBoYXMgc2V0IGEgZ2V0LWJsb2Igc3Ry\nYXRlZ3kgZXhwbGljaXRseSBvciB0aGUgZHJpdmVyCiAgICAgICAgLy8gZG9l\ncyBub3QgYXV0b21hdGljYWxseSBkZXNlcmlhbGl6ZSwgZGVsZWdhdGUgdG8g\nc3VwZXIKICAgICAgICBpZiAodXNlR2V0Qnl0ZXNGb3JCbG9icyB8fCB1c2VH\nZXRPYmplY3RGb3JCbG9icwogICAgICAgICAgICB8fCAhZHJpdmVyRGVzZXJp\nYWxpemVzQmxvYnMpCiAgICAgICAgICAgIHJldHVybiBzdXBlci5nZXRCbG9i\nT2JqZWN0KHJzLCBjb2x1bW4sIHN0b3JlKTsKCiAgICAgICAgLy8gbW9zdCBt\neXNxbCBkcml2ZXJzIGRlc2VyaWFsaXplIG9uIGdldE9iamVjdAogICAgICAg\nIHJldHVybiBycy5nZXRPYmplY3QoY29sdW1uKTsKICAgIH0KCiAgICBAT3Zl\ncnJpZGUKICAgIHB1YmxpYyBpbnQgZ2V0UHJlZmVycmVkVHlwZShpbnQgdHlw\nZSkgewogICAgICAgIGlmICh0eXBlID09IFR5cGVzLkNMT0IgJiYgIXVzZUNs\nb2JzKQogICAgICAgICAgICByZXR1cm4gVHlwZXMuTE9OR1ZBUkNIQVI7CiAg\nICAgICAgcmV0dXJuIHN1cGVyLmdldFByZWZlcnJlZFR5cGUodHlwZSk7CiAg\nICB9CiAgICAKICAgIC8qKgogICAgICogQXBwZW5kIFhNTCBjb21wYXJpc29u\nLgogICAgICogCiAgICAgKiBAcGFyYW0gYnVmIHRoZSBTUUwgYnVmZmVyIHRv\nIHdyaXRlIHRoZSBjb21wYXJpc29uCiAgICAgKiBAcGFyYW0gb3AgdGhlIGNv\nbXBhcmlzb24gb3BlcmF0aW9uIHRvIHBlcmZvcm0KICAgICAqIEBwYXJhbSBs\naHMgdGhlIGxlZnQgaGFuZCBzaWRlIG9mIHRoZSBjb21wYXJpc29uCiAgICAg\nKiBAcGFyYW0gcmhzIHRoZSByaWdodCBoYW5kIHNpZGUgb2YgdGhlIGNvbXBh\ncmlzb24KICAgICAqIEBwYXJhbSBsaHN4bWwgaW5kaWNhdGVzIHdoZXRoZXIg\ndGhlIGxlZnQgb3BlcmFuZCBtYXBzIHRvIFhNTAogICAgICogQHBhcmFtIHJo\nc3htbCBpbmRpY2F0ZXMgd2hldGhlciB0aGUgcmlnaHQgb3BlcmFuZCBtYXBz\nIHRvIFhNTAogICAgICovCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lk\nIGFwcGVuZFhtbENvbXBhcmlzb24oU1FMQnVmZmVyIGJ1ZiwgU3RyaW5nIG9w\nLCBGaWx0ZXJWYWx1ZSBsaHMsCiAgICAgICAgRmlsdGVyVmFsdWUgcmhzLCBi\nb29sZWFuIGxoc3htbCwgYm9vbGVhbiByaHN4bWwpIHsKICAgICAgICBzdXBl\nci5hcHBlbmRYbWxDb21wYXJpc29uKGJ1Ziwgb3AsIGxocywgcmhzLCBsaHN4\nbWwsIHJoc3htbCk7CiAgICAgICAgaWYgKGxoc3htbCkKICAgICAgICAgICAg\nYXBwZW5kWG1sVmFsdWUoYnVmLCBsaHMpOwogICAgICAgIGVsc2UKICAgICAg\nICAgICAgbGhzLmFwcGVuZFRvKGJ1Zik7CiAgICAgICAgYnVmLmFwcGVuZCgi\nICIpLmFwcGVuZChvcCkuYXBwZW5kKCIgIik7CiAgICAgICAgaWYgKHJoc3ht\nbCkKICAgICAgICAgICAgYXBwZW5kWG1sVmFsdWUoYnVmLCByaHMpOwogICAg\nICAgIGVsc2UKICAgICAgICAgICAgcmhzLmFwcGVuZFRvKGJ1Zik7CiAgICB9\nCiAgICAKICAgIC8qKgogICAgICogQXBwZW5kIFhNTCBjb2x1bW4gdmFsdWUg\nc28gdGhhdCBpdCBjYW4gYmUgdXNlZCBpbiBjb21wYXJpc29ucy4KICAgICAq\nIAogICAgICogQHBhcmFtIGJ1ZiB0aGUgU1FMIGJ1ZmZlciB0byB3cml0ZSB0\naGUgdmFsdWUKICAgICAqIEBwYXJhbSB2YWwgdGhlIHZhbHVlIHRvIGJlIHdy\naXR0ZW4KICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIGFwcGVuZFhtbFZhbHVl\nKFNRTEJ1ZmZlciBidWYsIEZpbHRlclZhbHVlIHZhbCkgewogICAgICAgIGJ1\nZi5hcHBlbmQoIkV4dHJhY3RWYWx1ZSgiKS4KICAgICAgICAgICAgYXBwZW5k\nKHZhbC5nZXRDb2x1bW5BbGlhcyh2YWwuZ2V0RmllbGRNYXBwaW5nKCkuZ2V0\nQ29sdW1ucygpWzBdKSkuCiAgICAgICAgICAgIGFwcGVuZCgiLCcvKi8iKTsK\nICAgICAgICB2YWwuYXBwZW5kVG8oYnVmKTsKICAgICAgICBidWYuYXBwZW5k\nKCInKSIpOwogICAgfQogICAgCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBp\nbnQgZ2V0QmF0Y2hGZXRjaFNpemUoaW50IGJhdGNoRmV0Y2hTaXplKSB7CiAg\nICAgICAgcmV0dXJuIEludGVnZXIuTUlOX1ZBTFVFOwogICAgfQoKICAgIC8q\nKgogICAgICogQ2hlY2sgdG8gc2VlIGlmIHdlIGhhdmUgc2V0IHRoZSB7QGxp\nbmsgI1NFTEVDVF9ISU5UfSBpbiB0aGUKICAgICAqIGZldGNoIGNvbmZpZ3Vy\nYXRpb24sIGFuZCBpZiBzbywgYXBwZW5kIHRoZSBNeVNRTCBoaW50IGFmdGVy\nIHRoZQogICAgICogIlNFTEVDVCIgcGFydCBvZiB0aGUgcXVlcnkuCiAgICAg\nKi8KICAgIEBPdmVycmlkZQogICAgcHVibGljIFN0cmluZyBnZXRTZWxlY3RP\ncGVyYXRpb24oSkRCQ0ZldGNoQ29uZmlndXJhdGlvbiBmZXRjaCkgewogICAg\nICAgIE9iamVjdCBoaW50ID0gZmV0Y2ggPT0gbnVsbCA/IG51bGwgOiBmZXRj\naC5nZXRIaW50KFNFTEVDVF9ISU5UKTsKICAgICAgICBTdHJpbmcgc2VsZWN0\nID0gIlNFTEVDVCI7CiAgICAgICAgaWYgKGhpbnQgIT0gbnVsbCkKICAgICAg\nICAgICAgc2VsZWN0ICs9ICIgIiArIGhpbnQ7CiAgICAgICAgcmV0dXJuIHNl\nbGVjdDsKICAgIH0KICAgIAogICAgQE92ZXJyaWRlCiAgICBwcm90ZWN0ZWQg\nQ29sbGVjdGlvbjxTdHJpbmc+IGdldFNlbGVjdFRhYmxlQWxpYXNlcyhTZWxl\nY3Qgc2VsKSB7CiAgICAgICAgU2V0PFN0cmluZz4gcmVzdWx0ID0gbmV3IEhh\nc2hTZXQ8U3RyaW5nPigpOwogICAgICAgIExpc3Q8U3RyaW5nPiBzZWxlY3Rz\nID0gc2VsLmdldElkZW50aWZpZXJBbGlhc2VzKCk7CiAgICAgICAgZm9yIChT\ndHJpbmcgcyA6IHNlbGVjdHMpIHsKICAgICAgICAgICAgU3RyaW5nIHRhYmxl\nQWxpYXMgPSBzLnN1YnN0cmluZygwLCBzLmluZGV4T2YoJy4nKSk7CiAgICAg\nICAgICAgIHJlc3VsdC5hZGQodGFibGVBbGlhcyk7CiAgICAgICAgfQogICAg\nICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAKICAgIEBPdmVycmlkZQog\nICAgcHVibGljIGJvb2xlYW4gaXNGYXRhbEV4Y2VwdGlvbihpbnQgc3VidHlw\nZSwgU1FMRXhjZXB0aW9uIGV4KSB7CiAgICAgICAgaWYgKChzdWJ0eXBlID09\nIFN0b3JlRXhjZXB0aW9uLkxPQ0sgICYmIGV4LmdldEVycm9yQ29kZSgpID09\nIDEyMDUpCiAgICAgICAgICB8fChzdWJ0eXBlID09IFN0b3JlRXhjZXB0aW9u\nLlFVRVJZICYmIGV4LmdldEVycm9yQ29kZSgpID09IDEzMTcpKSB7CiAgICAg\nICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgaWYgKGV4\nLmdldEVycm9yQ29kZSgpID09IDAgJiYgZXguZ2V0U1FMU3RhdGUoKSA9PSBu\ndWxsKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgcmV0dXJu\nIHN1cGVyLmlzRmF0YWxFeGNlcHRpb24oc3VidHlwZSwgZXgpOwogICAgfQoK\nICAgIC8qKgogICAgICogT1BFTkpQQS03NDAgU3BlY2lhbCBjYXNlIGZvciBN\neVNxbCBzcGVjaWFsIGNvbHVtbiB0eXBlcywKICAgICAqIGxpa2UgTE9OR1RF\nWFQsIExPTkdCTE9HIGV0Yy4uCiAgICAgKiBAc2VlIG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLnNxbC5EQkRpY3Rpb25hcnkjZ2V0VHlwZU5hbWUob3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLkNvbHVtbikKICAgICAqLwogICAg\nQE92ZXJyaWRlCiAgICBwdWJsaWMgU3RyaW5nIGdldFR5cGVOYW1lKENvbHVt\nbiBjb2wpIHsKICAgICAgICBpZiAoY29sLmdldFR5cGUoKSA9PSBUeXBlcy5C\nTE9CKSB7CiAgICAgICAgICAgIGlmIChjb2wuZ2V0U2l6ZSgpID09IDApICAg\nLy8gdW5rbm93biBzaXplCiAgICAgICAgICAgICAgICByZXR1cm4gYmxvYlR5\ncGVOYW1lOyAgLy8gcmV0dXJuIG9sZCBkZWZhdWx0IG9mIDY0S0IKICAgICAg\nICAgICAgZWxzZSBpZiAoY29sLmdldFNpemUoKSA8PSAyNTUpCiAgICAgICAg\nICAgICAgICByZXR1cm4gdGlueUJsb2JUeXBlTmFtZTsKICAgICAgICAgICAg\nZWxzZSBpZiAoY29sLmdldFNpemUoKSA8PSA2NTUzNSkKICAgICAgICAgICAg\nICAgIHJldHVybiBibG9iVHlwZU5hbWU7ICAvLyBvbGQgZGVmYXVsdCBvZiA2\nNEtCCiAgICAgICAgICAgIGVsc2UgaWYgKGNvbC5nZXRTaXplKCkgPD0gMTY3\nNzcyMTUpCiAgICAgICAgICAgICAgICByZXR1cm4gbWVkaXVtQmxvYlR5cGVO\nYW1lOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICByZXR1cm4g\nbG9uZ0Jsb2JUeXBlTmFtZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAg\nICByZXR1cm4gc3VwZXIuZ2V0VHlwZU5hbWUoY29sKTsKICAgICAgICB9CiAg\nICB9Cn0KCg==\n","encoding":"base64"}

