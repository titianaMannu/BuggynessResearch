{"sha":"57afbd5377b298934f12bb09f43163751d927a1a","node_id":"MDQ6QmxvYjIwNjM2NDo1N2FmYmQ1Mzc3YjI5ODkzNGYxMmJiMDlmNDMxNjM3NTFkOTI3YTFh","size":5006,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/57afbd5377b298934f12bb09f43163751d927a1a","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuY29uZjsKCmltcG9ydCBqYXZh\nLmlvLkZpbGU7CmltcG9ydCBqYXZhLmlvLklucHV0U3RyZWFtOwppbXBvcnQg\namF2YS5zZWN1cml0eS5BY2Nlc3NDb250cm9sbGVyOwppbXBvcnQgamF2YS51\ndGlsLlByb3BlcnRpZXM7CmltcG9ydCBqYXZhLnV0aWwuU3RyaW5nVG9rZW5p\nemVyOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5KMkRv\nUHJpdkhlbHBlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRp\nbC5Mb2NhbGl6ZXI7CgovKioKICogVGhpcyBjbGFzcyBjb250YWlucyB2ZXJz\naW9uIGluZm9ybWF0aW9uIGZvciBPcGVuSlBBLiBJdCB1c2VzCiAqIEFudCdz\nIGZpbHRlciB0b2tlbnMgdG8gY29udmVydCB0aGUgdGVtcGxhdGUgaW50byBh\nIGphdmEKICogZmlsZSB3aXRoIGN1cnJlbnQgaW5mb3JtYXRpb24uCiAqCiAq\nIEBhdXRob3IgTWFyYyBQcnVkJ2hvbW1lYXV4LCBQYXRyaWNrIExpbnNrZXkK\nICovCnB1YmxpYyBjbGFzcyBPcGVuSlBBVmVyc2lvbiB7CgogICAgcHJpdmF0\nZSBzdGF0aWMgZmluYWwgTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6ZXIuZm9y\nUGFja2FnZShPcGVuSlBBVmVyc2lvbi5jbGFzcyk7CgogICAgcHVibGljIHN0\nYXRpYyBmaW5hbCBTdHJpbmcgVkVSU0lPTl9OVU1CRVI7CiAgICBwdWJsaWMg\nc3RhdGljIGZpbmFsIFN0cmluZyBWRVJTSU9OX0lEOwogICAgcHVibGljIHN0\nYXRpYyBmaW5hbCBTdHJpbmcgVkVORE9SX05BTUUgPSAiT3BlbkpQQSI7CiAg\nICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBNQUpPUl9SRUxFQVNFOwogICAg\ncHVibGljIHN0YXRpYyBmaW5hbCBpbnQgTUlOT1JfUkVMRUFTRTsKICAgIHB1\nYmxpYyBzdGF0aWMgZmluYWwgaW50IFBBVENIX1JFTEVBU0U7CiAgICBwdWJs\naWMgc3RhdGljIGZpbmFsIFN0cmluZyBSRUxFQVNFX1NUQVRVUzsKICAgIHB1\nYmxpYyBzdGF0aWMgZmluYWwgU3RyaW5nIFJFVklTSU9OX05VTUJFUjsKCiAg\nICBzdGF0aWMgewogICAgICAgIFByb3BlcnRpZXMgcmV2aXNpb25Qcm9wcyA9\nIG5ldyBQcm9wZXJ0aWVzKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\nSW5wdXRTdHJlYW0gaW4gPSBPcGVuSlBBVmVyc2lvbi5jbGFzcy5nZXRSZXNv\ndXJjZUFzU3RyZWFtCiAgICAgICAgICAgICAgICAoIi9NRVRBLUlORi9vcmcu\nYXBhY2hlLm9wZW5qcGEucmV2aXNpb24ucHJvcGVydGllcyIpOwogICAgICAg\nICAgICBpZiAoaW4gIT0gbnVsbCkgewogICAgICAgICAgICAgICAgdHJ5IHsK\nICAgICAgICAgICAgICAgICAgICByZXZpc2lvblByb3BzLmxvYWQoaW4pOwog\nICAgICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgICAg\nICBpbi5jbG9zZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9\nCiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICB9Cgog\nICAgICAgIFN0cmluZyB2ZXJzID0gcmV2aXNpb25Qcm9wcy5nZXRQcm9wZXJ0\neSgib3BlbmpwYS52ZXJzaW9uIik7CiAgICAgICAgaWYgKHZlcnMgPT0gbnVs\nbCB8fCAiIi5lcXVhbHModmVycy50cmltKCkpKQogICAgICAgICAgICB2ZXJz\nID0gIjAuMC4wIjsKICAgICAgICBWRVJTSU9OX05VTUJFUiA9IHZlcnM7Cgog\nICAgICAgIFN0cmluZ1Rva2VuaXplciB0b2sgPSBuZXcgU3RyaW5nVG9rZW5p\nemVyKFZFUlNJT05fTlVNQkVSLCAiLi0iKTsKICAgICAgICBpbnQgbWFqb3Is\nIG1pbm9yLCBwYXRjaDsKICAgICAgICB0cnkgewogICAgICAgICAgICBtYWpv\nciA9IHRvay5oYXNNb3JlVG9rZW5zKCkgPyBJbnRlZ2VyLnBhcnNlSW50KHRv\nay5uZXh0VG9rZW4oKSkgOiAwOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlv\nbiBlKSB7CiAgICAgICAgICAgIG1ham9yID0gMDsKICAgICAgICB9CgogICAg\nICAgIHRyeSB7CiAgICAgICAgICAgIG1pbm9yID0gdG9rLmhhc01vcmVUb2tl\nbnMoKSA/IEludGVnZXIucGFyc2VJbnQodG9rLm5leHRUb2tlbigpKSA6IDA7\nCiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAg\nbWlub3IgPSAwOwogICAgICAgIH0KCiAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgcGF0Y2ggPSB0b2suaGFzTW9yZVRva2VucygpID8gSW50ZWdlci5wYXJz\nZUludCh0b2submV4dFRva2VuKCkpIDogMDsKICAgICAgICB9IGNhdGNoIChF\neGNlcHRpb24gZSkgewogICAgICAgICAgICBwYXRjaCA9IDA7CiAgICAgICAg\nfQoKICAgICAgICBTdHJpbmcgcmV2aXNpb24gPSByZXZpc2lvblByb3BzLmdl\ndFByb3BlcnR5KCJyZXZpc2lvbi5udW1iZXIiKTsKCiAgICAgICAgTUFKT1Jf\nUkVMRUFTRSA9IG1ham9yOwogICAgICAgIE1JTk9SX1JFTEVBU0UgPSBtaW5v\ncjsKICAgICAgICBQQVRDSF9SRUxFQVNFID0gcGF0Y2g7CiAgICAgICAgUkVM\nRUFTRV9TVEFUVVMgPSB0b2suaGFzTW9yZVRva2VucygpID8gdG9rLm5leHRU\nb2tlbigiISIpIDogIiI7CiAgICAgICAgUkVWSVNJT05fTlVNQkVSID0gcmV2\naXNpb247CiAgICAgICAgVkVSU0lPTl9JRCA9ICJvcGVuanBhLSIgKyBWRVJT\nSU9OX05VTUJFUiArICItciIgKyBSRVZJU0lPTl9OVU1CRVI7CiAgICB9Cgog\nICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nIFtdIGFyZ3MpIHsK\nICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4obmV3IE9wZW5KUEFWZXJzaW9u\nKCkudG9TdHJpbmcoKSk7CiAgICB9CgogICAgcHVibGljIFN0cmluZyB0b1N0\ncmluZygpIHsKICAgICAgICBTdHJpbmdCdWlsZGVyIGJ1ZiA9IG5ldyBTdHJp\nbmdCdWlsZGVyKDgwICogNDApOwogICAgICAgIGFwcGVuZE9wZW5KUEFCYW5u\nZXIoYnVmKTsKICAgICAgICBidWYuYXBwZW5kKCJcbiIpOwoKICAgICAgICBh\ncHBlbmRQcm9wZXJ0eSgib3MubmFtZSIsIGJ1ZikuYXBwZW5kKCJcbiIpOwog\nICAgICAgIGFwcGVuZFByb3BlcnR5KCJvcy52ZXJzaW9uIiwgYnVmKS5hcHBl\nbmQoIlxuIik7CiAgICAgICAgYXBwZW5kUHJvcGVydHkoIm9zLmFyY2giLCBi\ndWYpLmFwcGVuZCgiXG5cbiIpOwoKICAgICAgICBhcHBlbmRQcm9wZXJ0eSgi\namF2YS52ZXJzaW9uIiwgYnVmKS5hcHBlbmQoIlxuIik7CiAgICAgICAgYXBw\nZW5kUHJvcGVydHkoImphdmEudmVuZG9yIiwgYnVmKS5hcHBlbmQoIlxuXG4i\nKTsKCiAgICAgICAgYnVmLmFwcGVuZCgiamF2YS5jbGFzcy5wYXRoOlxuIik7\nCiAgICAgICAgU3RyaW5nVG9rZW5pemVyIHRvayA9CiAgICAgICAgICAgIG5l\ndyBTdHJpbmdUb2tlbml6ZXIoQWNjZXNzQ29udHJvbGxlci5kb1ByaXZpbGVn\nZWQoSjJEb1ByaXZIZWxwZXIKICAgICAgICAgICAgICAgIC5nZXRQcm9wZXJ0\neUFjdGlvbigiamF2YS5jbGFzcy5wYXRoIikpLCBGaWxlLnBhdGhTZXBhcmF0\nb3IpOwogICAgICAgIHdoaWxlICh0b2suaGFzTW9yZVRva2VucygpKSB7CiAg\nICAgICAgICAgIGJ1Zi5hcHBlbmQoIlx0IikuYXBwZW5kKHRvay5uZXh0VG9r\nZW4oKSk7CiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoIlxuIik7CiAgICAgICAg\nfQogICAgICAgIGJ1Zi5hcHBlbmQoIlxuIik7CgogICAgICAgIGFwcGVuZFBy\nb3BlcnR5KCJ1c2VyLmRpciIsIGJ1Zik7CiAgICAgICAgcmV0dXJuIGJ1Zi50\nb1N0cmluZygpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGFwcGVuZE9wZW5K\nUEFCYW5uZXIoU3RyaW5nQnVpbGRlciBidWYpIHsKICAgICAgICBidWYuYXBw\nZW5kKFZFTkRPUl9OQU1FKS5hcHBlbmQoIiAiKTsKICAgICAgICBidWYuYXBw\nZW5kKFZFUlNJT05fTlVNQkVSKTsKICAgICAgICBidWYuYXBwZW5kKCJcbiIp\nOwogICAgICAgIGJ1Zi5hcHBlbmQoX2xvYy5nZXQoInZlcnNpb24taWQiKSku\nYXBwZW5kKCI6ICIpLmFwcGVuZChWRVJTSU9OX0lEKTsKICAgICAgICBidWYu\nYXBwZW5kKCJcbiIpOwogICAgICAgIGJ1Zi5hcHBlbmQoX2xvYy5nZXQoIm9w\nZW5qcGEtcmV2aXNpb24iKSkuYXBwZW5kKCI6ICIpLmFwcGVuZChSRVZJU0lP\nTl9OVU1CRVIpOwogICAgICAgIGJ1Zi5hcHBlbmQoIlxuIik7CiAgICB9Cgog\nICAgcHJpdmF0ZSBTdHJpbmdCdWlsZGVyIGFwcGVuZFByb3BlcnR5KFN0cmlu\nZyBwcm9wLCBTdHJpbmdCdWlsZGVyIGJ1ZikgewogICAgICAgIHJldHVybiBi\ndWYuYXBwZW5kKHByb3ApLmFwcGVuZCgiOiAiKS5hcHBlbmQoCiAgICAgICAg\nICAgIEFjY2Vzc0NvbnRyb2xsZXIuZG9Qcml2aWxlZ2VkKEoyRG9Qcml2SGVs\ncGVyCiAgICAgICAgICAgICAgICAuZ2V0UHJvcGVydHlBY3Rpb24ocHJvcCkp\nKTsKICAgIH0KfQo=\n","encoding":"base64"}

