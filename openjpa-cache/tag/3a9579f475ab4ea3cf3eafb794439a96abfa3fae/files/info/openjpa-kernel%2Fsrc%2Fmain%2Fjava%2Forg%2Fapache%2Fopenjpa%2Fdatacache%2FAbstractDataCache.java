{"sha":"aa2985adcbdb2b88a8125ed2cf4be5b7de0ee229","node_id":"MDQ6QmxvYjIwNjM2NDphYTI5ODVhZGNiZGIyYjg4YTgxMjVlZDJjZjRiZTViN2RlMGVlMjI5","size":17068,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/aa2985adcbdb2b88a8125ed2cf4be5b7de0ee229","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuZGF0YWNhY2hlOwoKaW1wb3J0\nIGphdmEudXRpbC5BcnJheUxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuQXJyYXlz\nOwppbXBvcnQgamF2YS51dGlsLkJpdFNldDsKaW1wb3J0IGphdmEudXRpbC5D\nb2xsZWN0aW9uOwppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb25zOwppbXBv\ncnQgamF2YS51dGlsLkhhc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuSGFzaFNl\ndDsKaW1wb3J0IGphdmEudXRpbC5JdGVyYXRvcjsKaW1wb3J0IGphdmEudXRp\nbC5MaXN0OwppbXBvcnQgamF2YS51dGlsLk1hcDsKaW1wb3J0IGphdmEudXRp\nbC5TZXQ7CgppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmxhbmcuU3RyaW5n\nVXRpbHM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuY29uZi5PcGVuSlBB\nQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5ldmVu\ndC5SZW1vdGVDb21taXRFdmVudDsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5ldmVudC5SZW1vdGVDb21taXRMaXN0ZW5lcjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5saWIuY29uZi5Db25maWd1cmFibGU7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEubGliLmNvbmYuQ29uZmlndXJhdGlvbjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5saWIubG9nLkxvZzsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6ZXI7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuY29uY3VycmVudC5BYnN0cmFjdENv\nbmN1cnJlbnRFdmVudE1hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEudXRpbC5HZW5lcmFsRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnV0aWwuT3BlbkpQQUV4Y2VwdGlvbjsKCmltcG9ydCBzZXJwLnV0\naWwuU3RyaW5nczsKCi8qKgogKiBBYnN0cmFjdCB7QGxpbmsgRGF0YUNhY2hl\nfSBpbXBsZW1lbnRhdGlvbiB0aGF0IHByb3ZpZGVzIHZhcmlvdXMKICogc3Rh\ndGlzdGljcywgbG9nZ2luZywgYW5kIHRpbWVvdXQgZnVuY3Rpb25hbGl0eSBj\nb21tb24gYWNyb3NzIGNhY2hlCiAqIGltcGxlbWVudGF0aW9ucy4KICoKICog\nQGF1dGhvciBQYXRyaWNrIExpbnNrZXkKICogQGF1dGhvciBBYmUgV2hpdGUK\nICovCkBTdXBwcmVzc1dhcm5pbmdzKCJzZXJpYWwiKQpwdWJsaWMgYWJzdHJh\nY3QgY2xhc3MgQWJzdHJhY3REYXRhQ2FjaGUgZXh0ZW5kcyBBYnN0cmFjdENv\nbmN1cnJlbnRFdmVudE1hbmFnZXIKICAgIGltcGxlbWVudHMgRGF0YUNhY2hl\nLCBDb25maWd1cmFibGUgewoJCiAgICBwcm90ZWN0ZWQgQ2FjaGVTdGF0aXN0\naWNzLkRlZmF1bHQgc3RhdHMgPSBuZXcgQ2FjaGVTdGF0aXN0aWNzLkRlZmF1\nbHQoKTsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBCaXRTZXQgRU1QVFlf\nQklUU0VUID0gbmV3IEJpdFNldCgwKTsKCiAgICBwcml2YXRlIHN0YXRpYyBm\naW5hbCBMb2NhbGl6ZXIgc19sb2MgPSBMb2NhbGl6ZXIuZm9yUGFja2FnZShB\nYnN0cmFjdERhdGFDYWNoZS5jbGFzcyk7CiAgICAKCiAgICAvKioKICAgICAq\nIFRoZSBjb25maWd1cmF0aW9uIHNldCBieSB0aGUgc3lzdGVtLgogICAgICov\nCiAgICBwcm90ZWN0ZWQgT3BlbkpQQUNvbmZpZ3VyYXRpb24gY29uZjsKCiAg\nICAvKioKICAgICAqIFRoZSBsb2cgdG8gdXNlLgogICAgICovCiAgICBwcm90\nZWN0ZWQgTG9nIGxvZzsKCiAgICBwcml2YXRlIFN0cmluZyBfbmFtZSA9IG51\nbGw7CiAgICBwcml2YXRlIGJvb2xlYW4gX2Nsb3NlZCA9IGZhbHNlOwogICAg\ncHJpdmF0ZSBTdHJpbmcgX3NjaGVkdWxlID0gbnVsbDsKICAgIHByb3RlY3Rl\nZCBTZXQ8U3RyaW5nPiBfaW5jbHVkZWRUeXBlcyA9IG5ldyBIYXNoU2V0PFN0\ncmluZz4oKTsKICAgIHByb3RlY3RlZCBTZXQ8U3RyaW5nPiBfZXhjbHVkZWRU\neXBlcyA9IG5ldyBIYXNoU2V0PFN0cmluZz4oKTsKCiAgICBwdWJsaWMgU3Ry\naW5nIGdldE5hbWUoKSB7CiAgICAgICAgcmV0dXJuIF9uYW1lOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHNldE5hbWUoU3RyaW5nIG5hbWUpIHsKICAgICAg\nICBfbmFtZSA9IG5hbWU7CiAgICB9CiAgICBwdWJsaWMgdm9pZCBzZXRFbmFi\nbGVTdGF0aXN0aWNzKGJvb2xlYW4gZW5hYmxlKXsKICAgICAgICBpZihlbmFi\nbGUgPT0gdHJ1ZSl7CiAgICAgICAgICAgIHN0YXRzLmVuYWJsZSgpOwogICAg\nICAgIH0KICAgIH0KICAgIHB1YmxpYyB2b2lkIGdldEVuYWJsZVN0YXRpc3Rp\nY3MoKXsKICAgICAgICBzdGF0cy5pc0VuYWJsZWQoKTsKICAgIH0KCiAgICBw\ndWJsaWMgU3RyaW5nIGdldEV2aWN0aW9uU2NoZWR1bGUoKSB7CiAgICAgICAg\ncmV0dXJuIF9zY2hlZHVsZTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRF\ndmljdGlvblNjaGVkdWxlKFN0cmluZyBzKSB7CiAgICAgICAgX3NjaGVkdWxl\nID0gczsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgaW5pdGlhbGl6ZShE\nYXRhQ2FjaGVNYW5hZ2VyIG1hbmFnZXIpIHsKICAgICAgICBpZiAoX3NjaGVk\ndWxlICE9IG51bGwgJiYgISIiLmVxdWFscyhfc2NoZWR1bGUpKSB7CiAgICAg\nICAgICAgIENsZWFyYWJsZVNjaGVkdWxlciBzY2hlZHVsZXIgPSBtYW5hZ2Vy\nLmdldENsZWFyYWJsZVNjaGVkdWxlcigpOwogICAgICAgICAgICBpZiAoc2No\nZWR1bGVyICE9IG51bGwpCiAgICAgICAgICAgICAgICBzY2hlZHVsZXIuc2No\nZWR1bGVFdmljdGlvbih0aGlzLCBfc2NoZWR1bGUpOwogICAgICAgIH0KICAg\nICAgICAvLyBDYXN0IGhlcmUgcmF0aGVyIHRoYW4gYWRkIHRvIHRoZSBpbnRl\ncmZhY2UgYmVjYXVzZSB0aGlzIGlzIGEgaGFjayB0byBzdXBwb3J0IGFuIG9s\nZGVyIHdheSBvZiBjb25maWd1cmluZwogICAgICAgIGlmKG1hbmFnZXIgaW5z\ndGFuY2VvZiBEYXRhQ2FjaGVNYW5hZ2VySW1wbCl7CiAgICAgICAgICAgIExp\nc3Q8U3RyaW5nPiBpbnZhbGlkQ29uZmlndXJlZCA9IG5ldyBBcnJheUxpc3Q8\nU3RyaW5nPigpOwogICAgICAgICAgICAvLyBhc3NlcnQgdGhhdCB0aGluZ3Mg\nYXJlIGNvbmZpZ3VyZWQgcHJvcGVybHkKICAgICAgICAgICAgaWYoX2luY2x1\nZGVkVHlwZXMhPW51bGwpewogICAgICAgICAgICAgICAgZm9yKFN0cmluZyBz\nIDogX2luY2x1ZGVkVHlwZXMpewogICAgICAgICAgICAgICAgICAgIGlmKF9l\neGNsdWRlZFR5cGVzLmNvbnRhaW5zKHMpKXsKICAgICAgICAgICAgICAgICAg\nICAgICAgaW52YWxpZENvbmZpZ3VyZWQuYWRkKHMpOwogICAgICAgICAgICAg\nICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlm\nIChpbnZhbGlkQ29uZmlndXJlZC5zaXplKCkgPiAwKSB7CiAgICAgICAgICAg\nICAgICAgICAgdGhyb3cgbmV3IEdlbmVyYWxFeGNlcHRpb24oc19sb2MuZ2V0\nKCJpbnZhbGlkLXR5cGVzLWV4Y2x1ZGVkLXR5cGVzIiwgaW52YWxpZENvbmZp\nZ3VyZWQudG9TdHJpbmcoKSkpOwogICAgICAgICAgICAgICAgfQogICAgICAg\nICAgICB9CiAgICAgICAgICAgICgoRGF0YUNhY2hlTWFuYWdlckltcGwpbWFu\nYWdlcikuc2V0VHlwZXMoX2luY2x1ZGVkVHlwZXMsIF9leGNsdWRlZFR5cGVz\nKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZvaWQgY29tbWl0KENv\nbGxlY3Rpb248RGF0YUNhY2hlUENEYXRhPiBhZGRpdGlvbnMsIENvbGxlY3Rp\nb248RGF0YUNhY2hlUENEYXRhPiBuZXdVcGRhdGVzLAogICAgICAgICAgICBD\nb2xsZWN0aW9uPERhdGFDYWNoZVBDRGF0YT4gZXhpc3RpbmdVcGRhdGVzLCBD\nb2xsZWN0aW9uPE9iamVjdD4gZGVsZXRlcykgewogICAgICAgIC8vIHJlbW92\nZSBhbGwgb2JqZWN0cyBpbiBkZWxldGVzIGxpc3QKICAgICAgICByZW1vdmVB\nbGxJbnRlcm5hbChkZWxldGVzKTsKCiAgICAgICAgLy8gbmV4dCwgYWRkIGFs\nbCB0aGUgbmV3IGFkZGl0aW9ucwogICAgICAgIHB1dEFsbEludGVybmFsKGFk\nZGl0aW9ucyk7CiAgICAgICAgcHV0QWxsSW50ZXJuYWwobmV3VXBkYXRlcyk7\nCgogICAgICAgIC8vIHBvc3NpYmx5IGFkZCB0aGUgZXhpc3RpbmcgdXBkYXRl\ncywgZGVwZW5kaW5nIG9uIHRoZQogICAgICAgIC8vIHNlbWFudGljcyBvZiB0\naGUgY2FjaGUsIGFzIGRpY3RhdGVkIGJ5IHJlY2FjaGVVcGRhdGVzKCkKICAg\nICAgICBpZiAocmVjYWNoZVVwZGF0ZXMoKSkKICAgICAgICAgICAgcHV0QWxs\nSW50ZXJuYWwoZXhpc3RpbmdVcGRhdGVzKTsKCiAgICAgICAgaWYgKGxvZy5p\nc1RyYWNlRW5hYmxlZCgpKSB7CiAgICAgICAgICAgIENvbGxlY3Rpb248T2Jq\nZWN0PiBhZGRJZHMgPSBuZXcgQXJyYXlMaXN0PE9iamVjdD4oYWRkaXRpb25z\nLnNpemUoKSk7CiAgICAgICAgICAgIENvbGxlY3Rpb248T2JqZWN0PiB1cElk\ncyA9IG5ldyBBcnJheUxpc3Q8T2JqZWN0PihuZXdVcGRhdGVzLnNpemUoKSk7\nCiAgICAgICAgICAgIENvbGxlY3Rpb248T2JqZWN0PiBleElkcyA9IG5ldyBB\ncnJheUxpc3Q8T2JqZWN0PihleGlzdGluZ1VwZGF0ZXMuc2l6ZSgpKTsKCiAg\nICAgICAgICAgIGZvciAoRGF0YUNhY2hlUENEYXRhIGFkZGl0aW9uIDogYWRk\naXRpb25zKQogICAgICAgICAgICAgICAgYWRkSWRzLmFkZChhZGRpdGlvbi5n\nZXRJZCgpKTsKICAgICAgICAgICAgZm9yIChEYXRhQ2FjaGVQQ0RhdGEgbmV3\nVXBkYXRlIDogbmV3VXBkYXRlcykKICAgICAgICAgICAgICAgIHVwSWRzLmFk\nZChuZXdVcGRhdGUuZ2V0SWQoKSk7CiAgICAgICAgICAgIGZvciAoRGF0YUNh\nY2hlUENEYXRhIGV4aXN0aW5nVXBkYXRlIDogZXhpc3RpbmdVcGRhdGVzKQog\nICAgICAgICAgICAgICAgZXhJZHMuYWRkKGV4aXN0aW5nVXBkYXRlLmdldElk\nKCkpOwoKICAgICAgICAgICAgbG9nLnRyYWNlKHNfbG9jLmdldCgiY2FjaGUt\nY29tbWl0IiwgbmV3IE9iamVjdFtdeyBhZGRJZHMsIHVwSWRzLCBleElkcywg\nZGVsZXRlcyB9KSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBib29s\nZWFuIGNvbnRhaW5zKE9iamVjdCBrZXkpIHsKICAgICAgICBEYXRhQ2FjaGVQ\nQ0RhdGEgbyA9IGdldEludGVybmFsKGtleSk7CiAgICAgICAgaWYgKHN0YXRz\nLmlzRW5hYmxlZCgpKSB7CiAgICAgICAgICAgIHN0YXRzLm5ld0dldChvID09\nIG51bGwgPyBudWxsIDogby5nZXRUeXBlKCksIG8gIT0gbnVsbCk7CiAgICAg\nICAgfQogICAgICAgIGlmIChvICE9IG51bGwgJiYgby5pc1RpbWVkT3V0KCkp\nIHsKICAgICAgICAgICAgbyA9IG51bGw7CiAgICAgICAgICAgIHJlbW92ZUlu\ndGVybmFsKGtleSk7CiAgICAgICAgICAgIGlmIChsb2cuaXNUcmFjZUVuYWJs\nZWQoKSkKICAgICAgICAgICAgICAgIGxvZy50cmFjZShzX2xvYy5nZXQoImNh\nY2hlLXRpbWVvdXQiLCBrZXkpKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJu\nIG8gIT0gbnVsbDsKICAgIH0KCiAgICBwdWJsaWMgQml0U2V0IGNvbnRhaW5z\nQWxsKENvbGxlY3Rpb248T2JqZWN0PiBrZXlzKSB7CiAgICAgICAgaWYgKGtl\neXMuaXNFbXB0eSgpKQogICAgICAgICAgICByZXR1cm4gRU1QVFlfQklUU0VU\nOwoKICAgICAgICBCaXRTZXQgc2V0ID0gbmV3IEJpdFNldChrZXlzLnNpemUo\nKSk7CiAgICAgICAgaW50IGkgPSAwOwogICAgICAgIGZvciAoSXRlcmF0b3I8\nT2JqZWN0PiBpdGVyID0ga2V5cy5pdGVyYXRvcigpOyBpdGVyLmhhc05leHQo\nKTsgaSsrKQogICAgICAgICAgICBpZiAoY29udGFpbnMoaXRlci5uZXh0KCkp\nKQogICAgICAgICAgICAgICAgc2V0LnNldChpKTsKICAgICAgICByZXR1cm4g\nc2V0OwogICAgfQoKICAgIHB1YmxpYyBEYXRhQ2FjaGVQQ0RhdGEgZ2V0KE9i\namVjdCBrZXkpIHsKICAgICAgICBEYXRhQ2FjaGVQQ0RhdGEgbyA9IGdldElu\ndGVybmFsKGtleSk7CiAgICAgICAgaWYgKG8gIT0gbnVsbCAmJiBvLmlzVGlt\nZWRPdXQoKSkgewogICAgICAgICAgICBvID0gbnVsbDsKICAgICAgICAgICAg\ncmVtb3ZlSW50ZXJuYWwoa2V5KTsKICAgICAgICAgICAgaWYgKGxvZy5pc1Ry\nYWNlRW5hYmxlZCgpKQogICAgICAgICAgICAgICAgbG9nLnRyYWNlKHNfbG9j\nLmdldCgiY2FjaGUtdGltZW91dCIsIGtleSkpOwogICAgICAgIH0KICAgICAg\nICBpZiAobG9nLmlzVHJhY2VFbmFibGVkKCkpIHsKICAgICAgICAgICAgaWYg\nKG8gPT0gbnVsbCkKICAgICAgICAgICAgICAgIGxvZy50cmFjZShzX2xvYy5n\nZXQoImNhY2hlLW1pc3MiLCBrZXkpKTsKICAgICAgICAgICAgZWxzZQogICAg\nICAgICAgICAgICAgbG9nLnRyYWNlKHNfbG9jLmdldCgiY2FjaGUtaGl0Iiwg\na2V5KSk7CiAgICAgICAgfQogICAgICAgIGlmIChzdGF0cy5pc0VuYWJsZWQo\nKSkgewogICAgICAgICAgICBzdGF0cy5uZXdHZXQoKG8gPT0gbnVsbCkgPyBu\ndWxsIDogby5nZXRUeXBlKCksIG8gIT0gbnVsbCk7CiAgICAgICAgfQogICAg\nICAgIHJldHVybiBvOwogICAgfQoKCiAgICAvKioKICAgICAqIFJldHVybnMg\ndGhlIG9iamVjdHMgZm9yIHRoZSBnaXZlbiBrZXkgTGlzdC4KICAgICAqLwog\nICAgcHVibGljIE1hcDxPYmplY3QsRGF0YUNhY2hlUENEYXRhPiBnZXRBbGwo\nTGlzdDxPYmplY3Q+IGtleXMpIHsKICAgICAgICBNYXA8T2JqZWN0LERhdGFD\nYWNoZVBDRGF0YT4gcmVzdWx0TWFwID0gbmV3IEhhc2hNYXA8T2JqZWN0LERh\ndGFDYWNoZVBDRGF0YT4oa2V5cy5zaXplKCkpOwogICAgICAgIGZvciAoT2Jq\nZWN0IGtleSA6IGtleXMpCiAgICAgICAgICAgIHJlc3VsdE1hcC5wdXQoa2V5\nLCBnZXQoa2V5KSk7CiAgICAgICAgcmV0dXJuIHJlc3VsdE1hcDsKICAgIH0K\nCiAgICBwdWJsaWMgRGF0YUNhY2hlUENEYXRhIHB1dChEYXRhQ2FjaGVQQ0Rh\ndGEgZGF0YSkgewogICAgICAgIGlmIChzdGF0cy5pc0VuYWJsZWQoKSkgewog\nICAgICAgICAgICBzdGF0cy5uZXdQdXQoZGF0YS5nZXRUeXBlKCkpOwogICAg\nICAgIH0KICAgICAgICBEYXRhQ2FjaGVQQ0RhdGEgbyA9IHB1dEludGVybmFs\nKGRhdGEuZ2V0SWQoKSwgZGF0YSk7CiAgICAgICAgaWYgKGxvZy5pc1RyYWNl\nRW5hYmxlZCgpKQogICAgICAgICAgICBsb2cudHJhY2Uoc19sb2MuZ2V0KCJj\nYWNoZS1wdXQiLCBkYXRhLmdldElkKCkpKTsKICAgICAgICByZXR1cm4gKG8g\nPT0gbnVsbCB8fCBvLmlzVGltZWRPdXQoKSkgPyBudWxsIDogbzsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCB1cGRhdGUoRGF0YUNhY2hlUENEYXRhIGRhdGEp\nIHsKICAgICAgICBpZiAocmVjYWNoZVVwZGF0ZXMoKSkgewogICAgICAgICAg\nICBpZiAoc3RhdHMuaXNFbmFibGVkKCkpIHsKICAgICAgICAgICAgICAgIHN0\nYXRzLm5ld1B1dChkYXRhLmdldFR5cGUoKSk7CiAgICAgICAgICAgIH0KICAg\nICAgICAgICAgcHV0SW50ZXJuYWwoZGF0YS5nZXRJZCgpLCBkYXRhKTsKICAg\nICAgICB9CiAgICB9CgogICAgcHVibGljIERhdGFDYWNoZVBDRGF0YSByZW1v\ndmUoT2JqZWN0IGtleSkgewogICAgICAgIERhdGFDYWNoZVBDRGF0YSBvID0g\ncmVtb3ZlSW50ZXJuYWwoa2V5KTsKICAgICAgICBpZiAobyAhPSBudWxsICYm\nIG8uaXNUaW1lZE91dCgpKQogICAgICAgICAgICBvID0gbnVsbDsKICAgICAg\nICBpZiAobG9nLmlzVHJhY2VFbmFibGVkKCkpIHsKICAgICAgICAgICAgaWYg\nKG8gPT0gbnVsbCkKICAgICAgICAgICAgICAgIGxvZy50cmFjZShzX2xvYy5n\nZXQoImNhY2hlLXJlbW92ZS1taXNzIiwga2V5KSk7CiAgICAgICAgICAgIGVs\nc2UKICAgICAgICAgICAgICAgIGxvZy50cmFjZShzX2xvYy5nZXQoImNhY2hl\nLXJlbW92ZS1oaXQiLCBrZXkpKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJu\nIG87CiAgICB9CgogICAgcHVibGljIEJpdFNldCByZW1vdmVBbGwoQ29sbGVj\ndGlvbjxPYmplY3Q+IGtleXMpIHsKICAgICAgICBpZiAoa2V5cy5pc0VtcHR5\nKCkpCiAgICAgICAgICAgIHJldHVybiBFTVBUWV9CSVRTRVQ7CgogICAgICAg\nIEJpdFNldCBzZXQgPSBuZXcgQml0U2V0KGtleXMuc2l6ZSgpKTsKICAgICAg\nICBpbnQgaSA9IDA7CiAgICAgICAgZm9yIChJdGVyYXRvcjxPYmplY3Q+IGl0\nZXIgPSBrZXlzLml0ZXJhdG9yKCk7IGl0ZXIuaGFzTmV4dCgpOyBpKyspCiAg\nICAgICAgICAgIGlmIChyZW1vdmUoaXRlci5uZXh0KCkpICE9IG51bGwpCiAg\nICAgICAgICAgICAgICBzZXQuc2V0KGkpOwogICAgICAgIHJldHVybiBzZXQ7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBSZW1vdmUgdGhlIG9iamVjdHMgb2Yg\ndGhlIGdpdmVuIGNsYXNzIGZyb20gdGhlIGNhY2hlLgogICAgICovCiAgICBw\ndWJsaWMgdm9pZCByZW1vdmVBbGwoQ2xhc3M8Pz4gY2xzLCBib29sZWFuIHN1\nYkNsYXNzZXMpIHsKICAgICAgICByZW1vdmVBbGxJbnRlcm5hbChjbHMsIHN1\nYkNsYXNzZXMpOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIHBpbihPYmpl\nY3Qga2V5KSB7CiAgICAgICAgYm9vbGVhbiBib29sID0gcGluSW50ZXJuYWwo\na2V5KTsKICAgICAgICBpZiAobG9nLmlzVHJhY2VFbmFibGVkKCkpIHsKICAg\nICAgICAgICAgaWYgKGJvb2wpCiAgICAgICAgICAgICAgICBsb2cudHJhY2Uo\nc19sb2MuZ2V0KCJjYWNoZS1waW4taGl0Iiwga2V5KSk7CiAgICAgICAgICAg\nIGVsc2UKICAgICAgICAgICAgICAgIGxvZy50cmFjZShzX2xvYy5nZXQoImNh\nY2hlLXBpbi1taXNzIiwga2V5KSk7CiAgICAgICAgfQogICAgICAgIHJldHVy\nbiBib29sOwogICAgfQoKICAgIHB1YmxpYyBCaXRTZXQgcGluQWxsKENvbGxl\nY3Rpb248T2JqZWN0PiBrZXlzKSB7CiAgICAgICAgaWYgKGtleXMuaXNFbXB0\neSgpKQogICAgICAgICAgICByZXR1cm4gRU1QVFlfQklUU0VUOwoKICAgICAg\nICBCaXRTZXQgc2V0ID0gbmV3IEJpdFNldChrZXlzLnNpemUoKSk7CiAgICAg\nICAgaW50IGkgPSAwOwogICAgICAgIGZvciAoSXRlcmF0b3I8T2JqZWN0PiBp\ndGVyID0ga2V5cy5pdGVyYXRvcigpOyBpdGVyLmhhc05leHQoKTsgaSsrKQog\nICAgICAgICAgICBpZiAocGluKGl0ZXIubmV4dCgpKSkKICAgICAgICAgICAg\nICAgIHNldC5zZXQoaSk7CiAgICAgICAgcmV0dXJuIHNldDsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCBwaW5BbGwoQ2xhc3M8Pz4gY2xzLCBib29sZWFuIHN1\nYnMpIHsKICAgICAgICBpZiAobG9nLmlzV2FybkVuYWJsZWQoKSkKICAgICAg\nICAgICAgbG9nLndhcm4oc19sb2MuZ2V0KCJjYWNoZS1jbGFzcy1waW4iLCBn\nZXROYW1lKCkpKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiB1bnBpbihP\nYmplY3Qga2V5KSB7CiAgICAgICAgYm9vbGVhbiBib29sID0gdW5waW5JbnRl\ncm5hbChrZXkpOwogICAgICAgIGlmIChsb2cuaXNUcmFjZUVuYWJsZWQoKSkg\newogICAgICAgICAgICBpZiAoYm9vbCkKICAgICAgICAgICAgICAgIGxvZy50\ncmFjZShzX2xvYy5nZXQoImNhY2hlLXVucGluLWhpdCIsIGtleSkpOwogICAg\nICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBsb2cudHJhY2Uoc19sb2Mu\nZ2V0KCJjYWNoZS11bnBpbi1taXNzIiwga2V5KSk7CiAgICAgICAgfQogICAg\nICAgIHJldHVybiBib29sOwogICAgfQoKICAgIHB1YmxpYyBCaXRTZXQgdW5w\naW5BbGwoQ29sbGVjdGlvbjxPYmplY3Q+IGtleXMpIHsKICAgICAgICBpZiAo\na2V5cy5pc0VtcHR5KCkpCiAgICAgICAgICAgIHJldHVybiBFTVBUWV9CSVRT\nRVQ7CgogICAgICAgIEJpdFNldCBzZXQgPSBuZXcgQml0U2V0KGtleXMuc2l6\nZSgpKTsKICAgICAgICBpbnQgaSA9IDA7CiAgICAgICAgZm9yIChJdGVyYXRv\ncjxPYmplY3Q+IGl0ZXIgPSBrZXlzLml0ZXJhdG9yKCk7IGl0ZXIuaGFzTmV4\ndCgpOyBpKyspCiAgICAgICAgICAgIGlmICh1bnBpbihpdGVyLm5leHQoKSkp\nCiAgICAgICAgICAgICAgICBzZXQuc2V0KGkpOwogICAgICAgIHJldHVybiBz\nZXQ7CiAgICB9CgogICAgcHVibGljIHZvaWQgdW5waW5BbGwoQ2xhc3M8Pz4g\nY2xzLCBib29sZWFuIHN1YnMpIHsKICAgICAgICBpZiAobG9nLmlzV2FybkVu\nYWJsZWQoKSkKICAgICAgICAgICAgbG9nLndhcm4oc19sb2MuZ2V0KCJjYWNo\nZS1jbGFzcy11bnBpbiIsIGdldE5hbWUoKSkpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIGNsZWFyKCkgewogICAgICAgIGNsZWFySW50ZXJuYWwoKTsKICAg\nICAgICBpZiAobG9nLmlzVHJhY2VFbmFibGVkKCkpCiAgICAgICAgICAgIGxv\nZy50cmFjZShzX2xvYy5nZXQoImNhY2hlLWNsZWFyIiwgZ2V0TmFtZSgpKSk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgY2xvc2UoKSB7CiAgICAgICAgY2xv\nc2UodHJ1ZSk7CiAgICB9CgogICAgcHJvdGVjdGVkIHZvaWQgY2xvc2UoYm9v\nbGVhbiBjbGVhcikgewogICAgICAgIGlmICghX2Nsb3NlZCkgewogICAgICAg\nICAgICBpZiAoY2xlYXIpCiAgICAgICAgICAgICAgICBjbGVhckludGVybmFs\nKCk7CiAgICAgICAgICAgIF9jbG9zZWQgPSB0cnVlOwogICAgICAgIH0KICAg\nIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBpc0Nsb3NlZCgpIHsKICAgICAgICBy\nZXR1cm4gX2Nsb3NlZDsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBhZGRFeHBp\ncmF0aW9uTGlzdGVuZXIoRXhwaXJhdGlvbkxpc3RlbmVyIGxpc3Rlbikgewog\nICAgICAgIGFkZExpc3RlbmVyKGxpc3Rlbik7CiAgICB9CgogICAgcHVibGlj\nIGJvb2xlYW4gcmVtb3ZlRXhwaXJhdGlvbkxpc3RlbmVyKEV4cGlyYXRpb25M\naXN0ZW5lciBsaXN0ZW4pIHsKICAgICAgICByZXR1cm4gcmVtb3ZlTGlzdGVu\nZXIobGlzdGVuKTsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nIHRvU3RyaW5n\nKCkgewogICAgICAgIHJldHVybiAiWyIgKyBzdXBlci50b1N0cmluZygpICsg\nIjoiICsgX25hbWUgKyAiXSI7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGlz\nIG1ldGhvZCBpcyBwYXJ0IG9mIHRoZSB7QGxpbmsgUmVtb3RlQ29tbWl0TGlz\ndGVuZXJ9IGludGVyZmFjZS4gSWYKICAgICAqIHlvdXIgY2FjaGUgc3ViY2xh\nc3MgcmVsaWVzIG9uIE9wZW5KUEEgZm9yIGNsdXN0ZXJpbmcgc3VwcG9ydCwg\nbWFrZSBpdAogICAgICogaW1wbGVtZW50IDxjb2RlPlJlbW90ZUNvbW1pdExp\nc3RlbmVyPC9jb2RlPi4gVGhpcyBtZXRob2Qgd2lsbCB0YWtlCiAgICAgKiBj\nYXJlIG9mIGludmFsaWRhdGluZyBlbnRyaWVzIGZyb20gcmVtb3RlIGNvbW1p\ndHMuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIGFmdGVyQ29tbWl0KFJlbW90\nZUNvbW1pdEV2ZW50IGV2ZW50KSB7CiAgICAgICAgaWYgKF9jbG9zZWQpCiAg\nICAgICAgICAgIHJldHVybjsKCiAgICAgICAgaWYgKGV2ZW50LmdldFBheWxv\nYWRUeXBlKCkgPT0gUmVtb3RlQ29tbWl0RXZlbnQuUEFZTE9BRF9FWFRFTlRT\nKSB7CiAgICAgICAgICAgIHJlbW92ZUFsbFR5cGVOYW1lc0ludGVybmFsKGV2\nZW50LmdldFVwZGF0ZWRUeXBlTmFtZXMoKSk7CiAgICAgICAgICAgIHJlbW92\nZUFsbFR5cGVOYW1lc0ludGVybmFsKGV2ZW50LmdldERlbGV0ZWRUeXBlTmFt\nZXMoKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gZHJvcCBh\nbGwgdGhlIGNvbW1pdHRlZCBPSURzLCBleGNlcHRpbmcgYnJhbmQKICAgICAg\nICAgICAgLy8gbmV3IE9JRHMuIGJyYW5kIG5ldyBPSURzIGVpdGhlciB3b24n\ndCBiZSBpbgogICAgICAgICAgICAvLyB0aGUgY2FjaGUsIG9yIGlmIHRoZXkg\nYXJlLCB3aWxsIGJlIG1vcmUgdXAgdG8gZGF0ZQogICAgICAgICAgICByZW1v\ndmVBbGxJbnRlcm5hbChldmVudC5nZXRVcGRhdGVkT2JqZWN0SWRzKCkpOwog\nICAgICAgICAgICByZW1vdmVBbGxJbnRlcm5hbChldmVudC5nZXREZWxldGVk\nT2JqZWN0SWRzKCkpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAq\nIEludm9rZSB3aGVuIGEga2V5IGlzIHJlbW92ZWQgZnJvbSB0aGlzIGNhY2hl\nLiBQcm9wYWdhdGVzIHRoZQogICAgICogZXhwaXJhdGlvbiBldmVudCBvbiB0\nbyBhbGwgZXhwaXJhdGlvbiBsaXN0ZW5lcnMgcmVnaXN0ZXJlZAogICAgICog\nd2l0aCB0aGlzIGNsYXNzLgogICAgICovCiAgICBwcm90ZWN0ZWQgdm9pZCBr\nZXlSZW1vdmVkKE9iamVjdCBrZXksIGJvb2xlYW4gZXhwaXJlZCkgewogICAg\nICAgIC8vIE5vdGlmeSBhbnkgZXhwaXJhdGlvbiBsaXN0ZW5lcnMgb2YgdGhl\nIGV4cGlyYXRpb24uCiAgICAgICAgaWYgKGhhc0xpc3RlbmVycygpKQogICAg\nICAgICAgICBmaXJlRXZlbnQobmV3IEV4cGlyYXRpb25FdmVudCh0aGlzLCBr\nZXksIGV4cGlyZWQpKTsKCiAgICAgICAgaWYgKGV4cGlyZWQgJiYgbG9nLmlz\nVHJhY2VFbmFibGVkKCkpCiAgICAgICAgICAgIGxvZy50cmFjZShzX2xvYy5n\nZXQoImNhY2hlLWV4cGlyZWQiLCBrZXkpKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIFJldHVybiA8Y29kZT50cnVlPC9jb2RlPiBpZiB1cGRhdGVzIHRvIGRh\ndGEgYWxyZWFkeSBpbiB0aGUKICAgICAqIGNhY2hlIChlaXRoZXIgaW4ge0Bs\naW5rICNjb21taXR9IG9yIHRoZSB7QGxpbmsgI3VwZGF0ZX0pCiAgICAgKiBz\naG91bGQgYmUgcHV0IGJhY2sgaW50byB0aGUgY2FjaGUuIFJldHVybnMgZmFs\nc2UgYnkgZGVmYXVsdC4KICAgICAqLwogICAgcHJvdGVjdGVkIGJvb2xlYW4g\ncmVjYWNoZVVwZGF0ZXMoKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAg\nfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBvYmplY3QgZm9yIHRoZSBn\naXZlbiBvaWQuCiAgICAgKi8KICAgIHByb3RlY3RlZCBhYnN0cmFjdCBEYXRh\nQ2FjaGVQQ0RhdGEgZ2V0SW50ZXJuYWwoT2JqZWN0IG9pZCk7CgogICAgLyoq\nCiAgICAgKiBBZGQgdGhlIGdpdmVuIG9iamVjdCB0byB0aGUgY2FjaGUsIHJl\ndHVybmluZyB0aGUgb2xkIG9iamVjdCB1bmRlciB0aGUKICAgICAqIGdpdmVu\nIG9pZC4KICAgICAqLwogICAgcHJvdGVjdGVkIGFic3RyYWN0IERhdGFDYWNo\nZVBDRGF0YSBwdXRJbnRlcm5hbChPYmplY3Qgb2lkLAogICAgICAgICAgICBE\nYXRhQ2FjaGVQQ0RhdGEgcGMpOwogICAgCiAgICAvKioKICAgICAqIEFkZCBh\nbGwgb2YgdGhlIGdpdmVuIG9iamVjdHMgdG8gdGhlIGNhY2hlLgogICAgICov\nCiAgICBwcm90ZWN0ZWQgdm9pZCBwdXRBbGxJbnRlcm5hbChDb2xsZWN0aW9u\nPERhdGFDYWNoZVBDRGF0YT4gcGNzKSB7CiAgICAgICAgZm9yIChEYXRhQ2Fj\naGVQQ0RhdGEgcGMgOiBwY3MpIHsKICAgICAgICAgICAgaWYgKHN0YXRzLmlz\nRW5hYmxlZCgpKSB7CiAgICAgICAgICAgICAgICBzdGF0cy5uZXdQdXQocGMu\nZ2V0VHlwZSgpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBwdXRJbnRl\ncm5hbChwYy5nZXRJZCgpLCBwYyk7CiAgICAgICAgfQogICAgfQoKICAgIC8q\nKgogICAgICogUmVtb3ZlIHRoZSBvYmplY3QgdW5kZXIgdGhlIGdpdmVuIG9p\nZCBmcm9tIHRoZSBjYWNoZS4KICAgICAqLwogICAgcHJvdGVjdGVkIGFic3Ry\nYWN0IERhdGFDYWNoZVBDRGF0YSByZW1vdmVJbnRlcm5hbChPYmplY3Qgb2lk\nKTsKCiAgICAvKioKICAgICAqIEV2aWN0IG9iamVjdHMgaW4gY2FjaGUgYnkg\nY2xhc3MuCiAgICAgKi8KICAgIHByb3RlY3RlZCBhYnN0cmFjdCB2b2lkIHJl\nbW92ZUFsbEludGVybmFsKENsYXNzPD8+IGNscywgYm9vbGVhbiBzdWJjbGFz\nc2VzKTsKCiAgICAvKioKICAgICAqIFJlbW92ZSBhbGwgb2JqZWN0cyB1bmRl\nciB0aGUgZ2l2ZW4gb2lkcyBmcm9tIHRoZSBjYWNoZS4KICAgICAqLwogICAg\ncHJvdGVjdGVkIHZvaWQgcmVtb3ZlQWxsSW50ZXJuYWwoQ29sbGVjdGlvbjxP\nYmplY3Q+IG9pZHMpIHsKICAgICAgICBmb3IgKE9iamVjdCBvaWQgOiBvaWRz\nKQogICAgICAgICAgICByZW1vdmVJbnRlcm5hbChvaWQpOwogICAgfQoKICAg\nIC8qKgogICAgICogUmVtb3ZlIGFsbCBvYmplY3RzIG9mIHRoZSBnaXZlbiBj\nbGFzcyBuYW1lcyBmcm9tIHRoZSBjYWNoZS4KICAgICAqLwogICAgcHJvdGVj\ndGVkIHZvaWQgcmVtb3ZlQWxsVHlwZU5hbWVzSW50ZXJuYWwoQ29sbGVjdGlv\nbjxTdHJpbmc+IGNsYXNzTmFtZXMpIHsKICAgICAgICBDb2xsZWN0aW9uPENs\nYXNzPD8+PiBjbGFzc2VzID0gQ2FjaGVzLmFkZFR5cGVzQnlOYW1lKGNvbmYs\nIGNsYXNzTmFtZXMsIG51bGwpOwogICAgICAgIGlmIChjbGFzc2VzID09IG51\nbGwpCiAgICAgICAgICAgIHJldHVybjsKCiAgICAgICAgZm9yIChDbGFzczw/\nPiBjbHMgOiBjbGFzc2VzKSB7CiAgICAgICAgICAgIGlmIChsb2cuaXNUcmFj\nZUVuYWJsZWQoKSkKICAgICAgICAgICAgICAgIGxvZy50cmFjZShzX2xvYy5n\nZXQoImNhY2hlLXJlbW92ZWNsYXNzIiwgY2xzLmdldE5hbWUoKSkpOwogICAg\nICAgICAgICByZW1vdmVBbGxJbnRlcm5hbChjbHMsIGZhbHNlKTsKICAgICAg\nICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBDbGVhciB0aGUgY2FjaGUuCiAg\nICAgKi8KICAgIHByb3RlY3RlZCBhYnN0cmFjdCB2b2lkIGNsZWFySW50ZXJu\nYWwoKTsKCiAgICAvKioKICAgICAqIFBpbiBhbiBvYmplY3QgdG8gdGhlIGNh\nY2hlLgogICAgICovCiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgYm9vbGVhbiBw\naW5JbnRlcm5hbChPYmplY3Qgb2lkKTsKCiAgICAvKioKICAgICAqIFVucGlu\nIGFuIG9iamVjdCBmcm9tIHRoZSBjYWNoZS4KICAgICAqLwogICAgcHJvdGVj\ndGVkIGFic3RyYWN0IGJvb2xlYW4gdW5waW5JbnRlcm5hbChPYmplY3Qgb2lk\nKTsKICAgIAogICAgLyoqCiAgICAgKiAKICAgICAqLwogICAgcHVibGljIERh\ndGFDYWNoZSBnZXRQYXJ0aXRpb24oU3RyaW5nIG5hbWUsIGJvb2xlYW4gY3Jl\nYXRlKSB7CiAgICAgICAgaWYgKFN0cmluZ1V0aWxzLmVxdWFscyhfbmFtZSwg\nbmFtZSkpCiAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgIHJldHVy\nbiBudWxsOwogICAgfQoKICAgIC8qKgogICAgICogCiAgICAgKi8KICAgIHB1\nYmxpYyBTZXQ8U3RyaW5nPiBnZXRQYXJ0aXRpb25OYW1lcygpIHsKICAgICAg\nICByZXR1cm4gQ29sbGVjdGlvbnMuZW1wdHlTZXQoKTsKICAgIH0KICAgIAog\nICAgcHVibGljIGJvb2xlYW4gaXNQYXJ0aXRpb25lZCgpIHsKICAgICAgICBy\nZXR1cm4gZmFsc2U7CiAgICB9CgogICAgcHVibGljIENhY2hlU3RhdGlzdGlj\ncyBnZXRTdGF0aXN0aWNzKCkgewogICAgCXJldHVybiBzdGF0czsKICAgIH0K\nCiAgICAvLyAtLS0tLS0tLS0tIENvbmZpZ3VyYWJsZSBpbXBsZW1lbnRhdGlv\nbiAtLS0tLS0tLS0tCgogICAgcHVibGljIHZvaWQgc2V0Q29uZmlndXJhdGlv\nbihDb25maWd1cmF0aW9uIGNvbmYpIHsKICAgICAgICB0aGlzLmNvbmYgPSAo\nT3BlbkpQQUNvbmZpZ3VyYXRpb24pIGNvbmY7CiAgICAgICAgdGhpcy5sb2cg\nPSBjb25mLmdldExvZyhPcGVuSlBBQ29uZmlndXJhdGlvbi5MT0dfREFUQUNB\nQ0hFKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzdGFydENvbmZpZ3VyYXRp\nb24oKSB7CiAgICB9CgogICAgcHVibGljIHZvaWQgZW5kQ29uZmlndXJhdGlv\nbigpIHsKICAgICAgICBpZiAoX25hbWUgPT0gbnVsbCkKICAgICAgICAgICAg\nc2V0TmFtZShOQU1FX0RFRkFVTFQpOwogICAgfQoKICAgIC8vIC0tLS0tLS0t\nLS0gQWJzdHJhY3RFdmVudE1hbmFnZXIgaW1wbGVtZW50YXRpb24gLS0tLS0t\nLS0tLQoKICAgIHByb3RlY3RlZCB2b2lkIGZpcmVFdmVudChPYmplY3QgZXZl\nbnQsIE9iamVjdCBsaXN0ZW5lcikgewogICAgICAgIEV4cGlyYXRpb25MaXN0\nZW5lciBsaXN0ZW4gPSAoRXhwaXJhdGlvbkxpc3RlbmVyKSBsaXN0ZW5lcjsK\nICAgICAgICBFeHBpcmF0aW9uRXZlbnQgZXYgPSAoRXhwaXJhdGlvbkV2ZW50\nKSBldmVudDsKICAgICAgICB0cnkgewogICAgICAgICAgICBsaXN0ZW4ub25F\neHBpcmUoZXYpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAg\nICAgICAgICAgIGlmIChsb2cuaXNXYXJuRW5hYmxlZCgpKQogICAgICAgICAg\nICAgICAgbG9nLndhcm4oc19sb2MuZ2V0KCJleHAtbGlzdGVuZXItZXgiKSwg\nZSk7CgkJfQoJfQogICAgCiAgICBwdWJsaWMgU2V0PFN0cmluZz4gZ2V0VHlw\nZXMoKSB7CiAgICAgICAgcmV0dXJuIF9pbmNsdWRlZFR5cGVzOwogICAgfQoK\nICAgIHB1YmxpYyBTZXQ8U3RyaW5nPiBnZXRFeGNsdWRlZFR5cGVzKCkgewog\nICAgICAgIHJldHVybiBfZXhjbHVkZWRUeXBlczsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBzZXRUeXBlcyhTZXQ8U3RyaW5nPiB0eXBlcykgewogICAgICAg\nIF9pbmNsdWRlZFR5cGVzID0gdHlwZXM7CiAgICB9CgogICAgcHVibGljIHZv\naWQgc2V0VHlwZXMoU3RyaW5nIHR5cGVzKSB7CiAgICAgICAgX2luY2x1ZGVk\nVHlwZXMgPQogICAgICAgICAgICBTdHJpbmdVdGlscy5pc0VtcHR5KHR5cGVz\nKSA/IG51bGwgOiBuZXcgSGFzaFNldDxTdHJpbmc+KEFycmF5cy5hc0xpc3Qo\nU3RyaW5ncy5zcGxpdCh0eXBlcywgIjsiLCAwKSkpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHNldEV4Y2x1ZGVkVHlwZXMoU2V0PFN0cmluZz4gdHlwZXMp\nIHsKICAgICAgICBfZXhjbHVkZWRUeXBlcyA9IHR5cGVzOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHNldEV4Y2x1ZGVkVHlwZXMoU3RyaW5nIHR5cGVzKSB7\nCiAgICAgICAgX2V4Y2x1ZGVkVHlwZXMgPQogICAgICAgICAgICBTdHJpbmdV\ndGlscy5pc0VtcHR5KHR5cGVzKSA/IG51bGwgOiBuZXcgSGFzaFNldDxTdHJp\nbmc+KEFycmF5cy5hc0xpc3QoU3RyaW5ncy5zcGxpdCh0eXBlcywgIjsiLCAw\nKSkpOwogICAgfQp9Cg==\n","encoding":"base64"}

