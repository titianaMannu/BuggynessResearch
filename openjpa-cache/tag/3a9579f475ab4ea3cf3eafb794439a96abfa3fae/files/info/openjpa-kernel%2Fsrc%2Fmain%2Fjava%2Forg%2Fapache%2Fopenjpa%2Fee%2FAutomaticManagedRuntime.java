{"sha":"4e10490553b5218fb4aea1b80849cdcd94926f5d","node_id":"MDQ6QmxvYjIwNjM2NDo0ZTEwNDkwNTUzYjUyMThmYjRhZWExYjgwODQ5Y2RjZDk0OTI2ZjVk","size":10285,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/4e10490553b5218fb4aea1b80849cdcd94926f5d","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuZWU7CgppbXBvcnQgamF2YS51\ndGlsLkxpbmtlZExpc3Q7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKCmltcG9y\ndCBqYXZheC50cmFuc2FjdGlvbi5Ob3RTdXBwb3J0ZWRFeGNlcHRpb247Cmlt\ncG9ydCBqYXZheC50cmFuc2FjdGlvbi5TeXN0ZW1FeGNlcHRpb247CmltcG9y\ndCBqYXZheC50cmFuc2FjdGlvbi5UcmFuc2FjdGlvbk1hbmFnZXI7CgppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5jb25mLkNvbmZpZ3VyYWJsZTsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5Db25maWd1cmF0\naW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkoyRG9Q\ncml2SGVscGVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGls\nLkxvY2FsaXplcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLklu\ndmFsaWRTdGF0ZUV4Y2VwdGlvbjsKCi8qKgogKiBJbXBsZW1lbnRhdGlvbiBv\nZiB0aGUge0BsaW5rIE1hbmFnZWRSdW50aW1lfSBpbnRlcmZhY2UgdGhhdCBz\nZWFyY2hlcwogKiB0aHJvdWdoIGEgc2V0IG9mIGtub3duIEpOREkgbG9jYXRp\nb25zIGFuZCBtZXRob2QgaW52b2NhdGlvbnMgdG8gbG9jYXRlIHRoZQogKiBh\ncHByb3ByaWF0ZSBtZWNoYW5pc20gZm9yIG9idGFpbmluZyBhIFRyYW5zYWN0\naW9uTWFuYWdlci4KICogIEJ1aWx0IGluIHN1cHBvcnQgaXMgcHJvdmlkZWQg\nZm9yIHRoZSBmb2xsb3dpbmcgQXBwbGljYXRpb24gU2VydmVyczoKICogPHVs\nPgogKiA8bGk+Qmx1ZXN0b25lPC9saT4KICogPGxpPkdsYXNzRmlzaDwvbGk+\nCiAqIDxsaT5IUCBBcHBsaWNhdGlvbiBTZXJ2ZXI8L2xpPgogKiA8bGk+SkJv\nc3M8L2xpPgogKiA8bGk+SlJ1bjwvbGk+CiAqIDxsaT5PcGVuRUpCPC9saT4K\nICogPGxpPk9yYWNsZSBBcHBsaWNhdGlvbiBTZXJ2ZXI8L2xpPgogKiA8bGk+\nT3Jpb248L2xpPgogKiA8bGk+U3VuT05FPC9saT4KICogPGxpPldlYmxvZ2lj\nPC9saT4KICogPGxpPldlYnNwaGVyZTwvbGk+CiAqIDwvdWw+CiAqCiAqIEBh\ndXRob3IgTWFyYyBQcnVkJ2hvbW1lYXV4CiAqLwpwdWJsaWMgY2xhc3MgQXV0\nb21hdGljTWFuYWdlZFJ1bnRpbWUgZXh0ZW5kcyBBYnN0cmFjdE1hbmFnZWRS\ndW50aW1lCiAgICBpbXBsZW1lbnRzIE1hbmFnZWRSdW50aW1lLCBDb25maWd1\ncmFibGUgewoKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBbXSBK\nTkRJX0xPQ1MgPSBuZXcgU3RyaW5nIFtdewogICAgICAgICJqYXZheC50cmFu\nc2FjdGlvbi5UcmFuc2FjdGlvbk1hbmFnZXIiLCAvLyB3ZWJsb2dpYwogICAg\nICAgICJqYXZhOi9UcmFuc2FjdGlvbk1hbmFnZXIiLCAvLyBqYm9zcywganJ1\nbiwgR2Vyb25pbW8KICAgICAgICAiamF2YTovRGVmYXVsdERvbWFpbi9UcmFu\nc2FjdGlvbk1hbmFnZXIiLCAvLyBqcnVuIHRvbwogICAgICAgICJqYXZhOmNv\nbXAvcG0vVHJhbnNhY3Rpb25NYW5hZ2VyIiwgLy8gb3Jpb24gJiBvcmFjbGUK\nICAgICAgICAiamF2YTpjb21wL1RyYW5zYWN0aW9uTWFuYWdlciIsIC8vIGdl\nbmVyaWMKICAgICAgICAiamF2YTphcHBzZXJ2ZXIvVHJhbnNhY3Rpb25NYW5h\nZ2VyIiwgLy8gR2xhc3NGaXNoCiAgICAgICAgImphdmE6cG0vVHJhbnNhY3Rp\nb25NYW5hZ2VyIiwgLy8gYm9ybGFuZAogICAgICAgICJhcmllczpzZXJ2aWNl\ncy9qYXZheC50cmFuc2FjdGlvbi5UcmFuc2FjdGlvbk1hbmFnZXIiLCAvLyBB\ncGFjaGUgQXJpZXMKICAgIH07CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBT\ndHJpbmcgW10gTUVUSE9EUyA9IG5ldyBTdHJpbmdbXXsKICAgICAgICAiY29t\nLmFyanVuYS5qdGEuSlRBX1RyYW5zYWN0aW9uTWFuYWdlci50cmFuc2FjdGlv\nbk1hbmFnZXIiLCAvLyBocAogICAgICAgICJjb20uYmx1ZXN0b25lLmp0YS5T\nYVRyYW5zYWN0aW9uTWFuYWdlckZhY3RvcnkuU2FHZXRUcmFuc2FjdGlvbk1h\nbmFnZXIiLAogICAgICAgICJvcmcub3BlbmVqYi5PcGVuRUpCLmdldFRyYW5z\nYWN0aW9uTWFuYWdlciIsCiAgICAgICAgImNvbS5zdW4uanRzLmp0YS5UcmFu\nc2FjdGlvbk1hbmFnZXJJbXBsLmdldFRyYW5zYWN0aW9uTWFuYWdlckltcGwi\nLAogICAgICAgICJjb20uaW5wcmlzZS52aXNpdHJhbnNhY3QuanRhLlRyYW5z\nYWN0aW9uTWFuYWdlckltcGwuIgogICAgICAgICAgICArICJnZXRUcmFuc2Fj\ndGlvbk1hbmFnZXJJbXBsIiwgLy8gYm9ybGFuZAogICAgfTsKCiAgICBwcml2\nYXRlIHN0YXRpYyBmaW5hbCBNYW5hZ2VkUnVudGltZSBSRUdJU1RSWTsKICAg\nIHByaXZhdGUgc3RhdGljIGZpbmFsIFdMU01hbmFnZWRSdW50aW1lIFdMUzsK\nICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN1bk9uZU1hbmFnZWRSdW50aW1l\nIFNVTk9ORTsKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFdBU01hbmFnZWRS\ndW50aW1lIFdBUzsKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFdBU1JlZ2lz\ndHJ5TWFuYWdlZFJ1bnRpbWUgV0FTX1JFRzsKCiAgICBwcml2YXRlIHN0YXRp\nYyBMb2NhbGl6ZXIgX2xvYyA9IExvY2FsaXplci5mb3JQYWNrYWdlCiAgICAg\nICAgKEF1dG9tYXRpY01hbmFnZWRSdW50aW1lLmNsYXNzKTsKCiAgICBzdGF0\naWMgewogICAgICAgIE1hbmFnZWRSdW50aW1lIG1yID0gbnVsbDsKCiAgICAg\nICAgbXIgPSBudWxsOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIG1yID0g\nKE1hbmFnZWRSdW50aW1lKSBDbGFzcy4KICAgICAgICAgICAgICAgIGZvck5h\nbWUoIm9yZy5hcGFjaGUub3BlbmpwYS5lZS5SZWdpc3RyeU1hbmFnZWRSdW50\naW1lIikuCiAgICAgICAgICAgICAgICAgICAgbmV3SW5zdGFuY2UoKTsKICAg\nICAgICB9IGNhdGNoIChUaHJvd2FibGUgdCkgewogICAgICAgICAgICAvLyBt\naWdodCBiZSBKVEEgdmVyc2lvbiBsb3dlciB0aGFuIDEuMSwgd2hpY2ggZG9l\nc24ndCBoYXZlIAogICAgICAgICAgICAvLyBUcmFuc2FjdGlvblN5bmNocm9u\naXphdGlvblJlZ2lzdHJ5CiAgICAgICAgfQogICAgICAgIFJFR0lTVFJZID0g\nbXI7CgogICAgICAgIG1yID0gbnVsbDsKICAgICAgICB0cnkgewogICAgICAg\nICAgICBtciA9IG5ldyBXTFNNYW5hZ2VkUnVudGltZSgpOwogICAgICAgIH0g\nY2F0Y2ggKFRocm93YWJsZSB0KSB7CiAgICAgICAgfQogICAgICAgIFdMUyA9\nIChXTFNNYW5hZ2VkUnVudGltZSkgbXI7CgogICAgICAgIG1yID0gbnVsbDsK\nICAgICAgICB0cnkgewogICAgICAgICAgICBtciA9IG5ldyBTdW5PbmVNYW5h\nZ2VkUnVudGltZSgpOwogICAgICAgIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7\nCiAgICAgICAgfQogICAgICAgIFNVTk9ORSA9IChTdW5PbmVNYW5hZ2VkUnVu\ndGltZSkgbXI7CgogICAgICAgIG1yID0gbnVsbDsKICAgICAgICB0cnkgewog\nICAgICAgICAgICBtciA9IG5ldyBXQVNNYW5hZ2VkUnVudGltZSgpOwogICAg\nICAgIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7CiAgICAgICAgfQogICAgICAg\nIFdBUyA9IChXQVNNYW5hZ2VkUnVudGltZSkgbXI7CgogICAgICAgIG1yID0g\nbnVsbDsKICAgICAgICB0cnkgewogICAgICAgICAgICAvLyBJbiBhIFdlYlNw\naGVyZSBlbnZpcm9ubWVudCB0aGUgdGhyZWFkJ3MgY3VycmVudCBjbGFzc2xv\nYWRlciBtaWdodAogICAgICAgICAgICAvLyBub3QgaGF2ZSBhY2Nlc3MgdG8g\ndGhlIFdlYlNwaGVyZSBBUElzLiBIb3dldmVyIHRoZSAicnVudGltZSIKICAg\nICAgICAgICAgLy8gY2xhc3Nsb2FkZXIgd2lsbCBoYXZlIGFjY2VzcyB0byB0\naGVtLgogICAgICAgICAgICAKICAgICAgICAgICAgLy8gU2hvdWxkIG5vdCBu\nZWVkIGEgZG9Qcml2IGdldHRpbmcgdGhpcyBjbGFzcycgY2xhc3Nsb2FkZXIK\nICAgICAgICAgICAgQ2xhc3NMb2FkZXIgY2wgPSBBdXRvbWF0aWNNYW5hZ2Vk\nUnVudGltZS5jbGFzcy5nZXRDbGFzc0xvYWRlcigpOwoKICAgICAgICAgICAg\nQ2xhc3M8V0FTUmVnaXN0cnlNYW5hZ2VkUnVudGltZT4gbXJDbGFzcyA9CiAg\nICAgICAgICAgICAgICAoQ2xhc3M8V0FTUmVnaXN0cnlNYW5hZ2VkUnVudGlt\nZT4pIEoyRG9Qcml2SGVscGVyCiAgICAgICAgICAgICAgICAgICAgICAgIC5n\nZXRGb3JOYW1lQWN0aW9uKAogICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIFdBU1JlZ2lzdHJ5TWFuYWdlZFJ1bnRpbWUuY2xhc3MuZ2V0TmFtZSgp\nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRydWUsIGNsKS5y\ndW4oKTsKICAgICAgICAgICAgbXIgPSBKMkRvUHJpdkhlbHBlci5uZXdJbnN0\nYW5jZUFjdGlvbihtckNsYXNzKS5ydW4oKTsKICAgICAgICB9IGNhdGNoIChU\naHJvd2FibGUgdCkgewogICAgICAgICAgICAvLyBzYWZlIHRvIGlnbm9yZQog\nICAgICAgIH0KICAgICAgICBXQVNfUkVHID0gKFdBU1JlZ2lzdHJ5TWFuYWdl\nZFJ1bnRpbWUpIG1yOwogICAgfQoKICAgIHByaXZhdGUgQ29uZmlndXJhdGlv\nbiBfY29uZiA9IG51bGw7CiAgICBwcml2YXRlIE1hbmFnZWRSdW50aW1lIF9y\ndW50aW1lID0gbnVsbDsKICAgIAogICAgcHVibGljIFRyYW5zYWN0aW9uTWFu\nYWdlciBnZXRUcmFuc2FjdGlvbk1hbmFnZXIoKQogICAgICAgIHRocm93cyBF\neGNlcHRpb24gewogICAgICAgIGlmIChfcnVudGltZSAhPSBudWxsKQogICAg\nICAgICAgICByZXR1cm4gX3J1bnRpbWUuZ2V0VHJhbnNhY3Rpb25NYW5hZ2Vy\nKCk7CgogICAgICAgIExpc3Q8VGhyb3dhYmxlPiBlcnJvcnMgPSBuZXcgTGlu\na2VkTGlzdDxUaHJvd2FibGU+KCk7CiAgICAgICAgVHJhbnNhY3Rpb25NYW5h\nZ2VyIHRtID0gbnVsbDsKCiAgICAgICAgLy8gVHJ5IHRoZSByZWdpc3RyeSBl\neHRlbnNpb25zIGZpcnN0IHNvIHRoYXQgYW55IGFwcGxpY2FibGUgdmVuZG9y\nCiAgICAgICAgLy8gc3BlY2lmaWMgZXh0ZW5zaW9ucyBhcmUgdXNlZC4KICAg\nICAgICBpZiAoV0FTX1JFRyAhPSBudWxsKSB7CiAgICAgICAgICAgIHRyeSB7\nCiAgICAgICAgICAgICAgICB0bSA9IFdBU19SRUcuZ2V0VHJhbnNhY3Rpb25N\nYW5hZ2VyKCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7\nCiAgICAgICAgICAgICAgICBlcnJvcnMuYWRkKHQpOwogICAgICAgICAgICB9\nCiAgICAgICAgICAgIGlmICh0bSAhPSBudWxsKSB7CiAgICAgICAgICAgICAg\nICBfcnVudGltZSA9IFdBU19SRUc7CiAgICAgICAgICAgICAgICByZXR1cm4g\ndG07CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIFRoZW4g\ndHJ5IHRoZSByZWdpc3RyeSwgd2hpY2ggaXMgdGhlIG9mZmljaWFsIHdheSB0\nbyBvYnRhaW4KICAgICAgICAvLyB0cmFuc2FjdGlvbiBzeW5jaHJvbmljYXRp\nb24gaW4gSlRBIDEuMQogICAgICAgIGlmIChSRUdJU1RSWSAhPSBudWxsKSB7\nCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICB0bSA9IFJFR0lT\nVFJZLmdldFRyYW5zYWN0aW9uTWFuYWdlcigpOwogICAgICAgICAgICB9IGNh\ndGNoIChUaHJvd2FibGUgdCkgewogICAgICAgICAgICAgICAgZXJyb3JzLmFk\nZCh0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodG0gIT0gbnVs\nbCkgewogICAgICAgICAgICAgICAgX3J1bnRpbWUgPSBSRUdJU1RSWTsKICAg\nICAgICAgICAgICAgIHJldHVybiB0bTsKICAgICAgICAgICAgfQogICAgICAg\nIH0KCiAgICAgICAgaWYgKFdMUyAhPSBudWxsKSB7CiAgICAgICAgICAgIHRy\neSB7CiAgICAgICAgICAgICAgICB0bSA9IFdMUy5nZXRUcmFuc2FjdGlvbk1h\nbmFnZXIoKTsKICAgICAgICAgICAgfSBjYXRjaCAoVGhyb3dhYmxlIHQpIHsK\nICAgICAgICAgICAgICAgIGVycm9ycy5hZGQodCk7CiAgICAgICAgICAgIH0K\nICAgICAgICAgICAgaWYgKHRtICE9IG51bGwpIHsKICAgICAgICAgICAgICAg\nIF9ydW50aW1lID0gV0xTOwogICAgICAgICAgICAgICAgcmV0dXJuIHRtOwog\nICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoV0FTICE9IG51\nbGwpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIFdBUy5z\nZXRDb25maWd1cmF0aW9uKF9jb25mKTsKICAgICAgICAgICAgICAgIFdBUy5z\ndGFydENvbmZpZ3VyYXRpb24oKTsKICAgICAgICAgICAgICAgIFdBUy5lbmRD\nb25maWd1cmF0aW9uKCk7CiAgICAgICAgICAgICAgICB0bSA9IFdBUy5nZXRU\ncmFuc2FjdGlvbk1hbmFnZXIoKTsKICAgICAgICAgICAgfSBjYXRjaCAoVGhy\nb3dhYmxlIHQpIHsKICAgICAgICAgICAgICAgIGVycm9ycy5hZGQodCk7CiAg\nICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHRtICE9IG51bGwpIHsKICAg\nICAgICAgICAgICAgIF9ydW50aW1lID0gV0FTOwogICAgICAgICAgICAgICAg\ncmV0dXJuIHRtOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAv\nLyB0cnkgdG8gZmluZCBhIGpuZGkgcnVudGltZQogICAgICAgIEpORElNYW5h\nZ2VkUnVudGltZSBqbXIgPSBuZXcgSk5ESU1hbmFnZWRSdW50aW1lKCk7CiAg\nICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBKTkRJX0xPQ1MubGVuZ3RoOyBp\nKyspIHsKICAgICAgICAgICAgam1yLnNldFRyYW5zYWN0aW9uTWFuYWdlck5h\nbWUoSk5ESV9MT0NTW2ldKTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgICAgIHRtID0gam1yLmdldFRyYW5zYWN0aW9uTWFuYWdlcigpOwogICAg\nICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUgdCkgewogICAgICAgICAgICAg\nICAgZXJyb3JzLmFkZCh0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBp\nZiAodG0gIT0gbnVsbCkgewogICAgICAgICAgICAgICAgX3J1bnRpbWUgPSBq\nbXI7CiAgICAgICAgICAgICAgICByZXR1cm4gdG07CiAgICAgICAgICAgIH0K\nICAgICAgICB9CgogICAgICAgIC8vIGxvb2sgZm9yIGEgbWV0aG9kIHJ1bnRp\nbWUKICAgICAgICBJbnZvY2F0aW9uTWFuYWdlZFJ1bnRpbWUgaW1yID0gbmV3\nIEludm9jYXRpb25NYW5hZ2VkUnVudGltZSgpOwogICAgICAgIGZvciAoaW50\nIGkgPSAwOyBpIDwgTUVUSE9EUy5sZW5ndGg7IGkrKykgewogICAgICAgICAg\nICBpbXIuc2V0Q29uZmlndXJhdGlvbihfY29uZik7CiAgICAgICAgICAgIGlt\nci5zZXRUcmFuc2FjdGlvbk1hbmFnZXJNZXRob2QoTUVUSE9EU1tpXSk7CiAg\nICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICB0bSA9IGltci5nZXRU\ncmFuc2FjdGlvbk1hbmFnZXIoKTsKICAgICAgICAgICAgfSBjYXRjaCAoVGhy\nb3dhYmxlIHQpIHsKICAgICAgICAgICAgICAgIGVycm9ycy5hZGQodCk7CiAg\nICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHRtICE9IG51bGwpIHsKICAg\nICAgICAgICAgICAgIF9ydW50aW1lID0gaW1yOwogICAgICAgICAgICAgICAg\ncmV0dXJuIHRtOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBp\nZiAoU1VOT05FICE9IG51bGwpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgICAgIHRtID0gU1VOT05FLmdldFRyYW5zYWN0aW9uTWFuYWdlcigp\nOwogICAgICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUgdCkgewogICAgICAg\nICAgICAgICAgZXJyb3JzLmFkZCh0KTsKICAgICAgICAgICAgfQogICAgICAg\nICAgICBpZiAodG0gIT0gbnVsbCkgewogICAgICAgICAgICAgICAgX3J1bnRp\nbWUgPSBTVU5PTkU7CiAgICAgICAgICAgICAgICByZXR1cm4gdG07CiAgICAg\nICAgICAgIH0KICAgICAgICB9CgogICAgICAgIFRocm93YWJsZVtdIHQgPSAo\nVGhyb3dhYmxlIFtdKSBlcnJvcnMudG9BcnJheSgKICAgICAgICAgICAgbmV3\nIFRocm93YWJsZSBbZXJyb3JzLnNpemUoKV0pOwogICAgICAgIHRocm93IG5l\ndyBJbnZhbGlkU3RhdGVFeGNlcHRpb24oX2xvYy5nZXQoInRtLW5vdC1mb3Vu\nZCIpKS4KICAgICAgICAgICAgc2V0RmF0YWwodHJ1ZSkuc2V0TmVzdGVkVGhy\nb3dhYmxlcyh0KTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRDb25maWd1\ncmF0aW9uKENvbmZpZ3VyYXRpb24gY29uZikgewogICAgICAgIF9jb25mID0g\nY29uZjsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzdGFydENvbmZpZ3VyYXRp\nb24oKSB7CiAgICB9CgogICAgcHVibGljIHZvaWQgZW5kQ29uZmlndXJhdGlv\nbigpIHsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRSb2xsYmFja09ubHko\nVGhyb3dhYmxlIGNhdXNlKQogICAgICAgIHRocm93cyBFeGNlcHRpb24gewog\nICAgICAgIC8vIGNoZWNrIHRvIHNlZSBpZiB0aGUgcnVudGltZSBpcyBjYWNo\nZWQKICAgICAgICBpZiAoX3J1bnRpbWUgPT0gbnVsbCkKICAgICAgICAgICAg\nZ2V0VHJhbnNhY3Rpb25NYW5hZ2VyKCk7CgogICAgICAgIGlmIChfcnVudGlt\nZSAhPSBudWxsKQogICAgICAgICAgICBfcnVudGltZS5zZXRSb2xsYmFja09u\nbHkoY2F1c2UpOwogICAgfQoKICAgIHB1YmxpYyBUaHJvd2FibGUgZ2V0Um9s\nbGJhY2tDYXVzZSgpCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAg\nICAgLy8gY2hlY2sgdG8gc2VlIGlmIHRoZSBydW50aW1lIGlzIGNhY2hlZAog\nICAgICAgIGlmIChfcnVudGltZSA9PSBudWxsKQogICAgICAgICAgICBnZXRU\ncmFuc2FjdGlvbk1hbmFnZXIoKTsKCiAgICAgICAgaWYgKF9ydW50aW1lICE9\nIG51bGwpCiAgICAgICAgICAgIHJldHVybiBfcnVudGltZS5nZXRSb2xsYmFj\na0NhdXNlKCk7CgogICAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgCiAg\nICBwdWJsaWMgT2JqZWN0IGdldFRyYW5zYWN0aW9uS2V5KCkgdGhyb3dzIEV4\nY2VwdGlvbiwgU3lzdGVtRXhjZXB0aW9uIHsKICAgICAgICBpZihfcnVudGlt\nZSA9PSBudWxsKSAKICAgICAgICAgICAgZ2V0VHJhbnNhY3Rpb25NYW5hZ2Vy\nKCk7CiAgICAgICAgCiAgICAgICAgaWYoX3J1bnRpbWUgIT0gbnVsbCApCiAg\nICAgICAgICAgIHJldHVybiBfcnVudGltZS5nZXRUcmFuc2FjdGlvbktleSgp\nOwogICAgICAgIAogICAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIC8q\nKgogICAgICogRGVsZWdhdGUgbm9uVHJhbnNhY3Rpb25hbCB3b3JrIHRvIHRo\nZSBhcHByb3ByaWF0ZSBtYW5hZ2VkIHJ1bnRpbWUuIElmIG5vCiAgICAgKiBt\nYW5hZ2VkIHJ1bnRpbWUgaXMgZm91bmQgdGhlbiBkZWxlZ2F0ZSB7QGxpbmsg\nQWJzdHJhY3RNYW5hZ2VkUnVudGltZX0uCiAgICAgKi8KICAgIHB1YmxpYyB2\nb2lkIGRvTm9uVHJhbnNhY3Rpb25hbFdvcmsoUnVubmFibGUgcnVubmFibGUp\nCiAgICAgICAgICAgIHRocm93cyBOb3RTdXBwb3J0ZWRFeGNlcHRpb24gewog\nICAgICAgIC8vIE9idGFpbiBhIHRyYW5zYWN0aW9uIG1hbmFnZXIgdG8gaW5p\ndGlhbGl6ZSB0aGUgcnVudGltZS4KICAgICAgICB0cnkgewogICAgICAgICAg\nICBnZXRUcmFuc2FjdGlvbk1hbmFnZXIoKTsKICAgICAgICB9IGNhdGNoIChF\neGNlcHRpb24gZSkgewogICAgICAgICAgICBOb3RTdXBwb3J0ZWRFeGNlcHRp\nb24gbnNlID0KICAgICAgICAgICAgICAgIG5ldyBOb3RTdXBwb3J0ZWRFeGNl\ncHRpb24oX2xvYwogICAgICAgICAgICAgICAgICAgICAgICAuZ2V0KCJ0bS11\nbmF2YWlsYWJsZSIsIF9ydW50aW1lKS5nZXRNZXNzYWdlKCkpOwogICAgICAg\nICAgICBuc2UuaW5pdENhdXNlKGUpOwogICAgICAgICAgICB0aHJvdyBuc2U7\nCiAgICAgICAgfQogICAgICAgIF9ydW50aW1lLmRvTm9uVHJhbnNhY3Rpb25h\nbFdvcmsocnVubmFibGUpOwogICAgfQp9Cg==\n","encoding":"base64"}

