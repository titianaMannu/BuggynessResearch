{"sha":"839952c5162f6e8bee1a9e8a30ca27cc3b166d2c","node_id":"MDQ6QmxvYjIwNjM2NDo4Mzk5NTJjNTE2MmY2ZThiZWUxYTllOGEzMGNhMjdjYzNiMTY2ZDJj","size":4028,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/839952c5162f6e8bee1a9e8a30ca27cc3b166d2c","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsOwoKaW1wb3J0IGph\ndmEudXRpbC5CaXRTZXQ7CmltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbjsK\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuZW5oYW5jZS5QZXJzaXN0ZW5j\nZUNhcGFibGU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5DbGFz\nc01ldGFEYXRhOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuRmll\nbGRNZXRhRGF0YTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLlBy\nb3h5OwoKLyoqCiAqIAogKgogKi8KcHVibGljIGNsYXNzIERldGFjaE1hbmFn\nZXJMaXRlIHsKICAgIHB1YmxpYyBEZXRhY2hNYW5hZ2VyTGl0ZSgpIHsKICAg\nIH0KCiAgICAvKioKICAgICAqIFRoaXMgbWV0aG9kIHdpbGwgZGV0YWNoIGFs\nbCBwcm92aWRlZCBTdGF0ZU1hbmFnZXJzIGluIHBsYWNlLgogICAgICogCiAg\nICAgKiBAcGFyYW0gc3RhdGVzCiAgICAgKiAgICAgICAgICAgIFRoZSBTdGF0\nZU1hbmFnZXJzIHRvIGJlIGRldGFjaGVkLgogICAgICovCiAgICBwdWJsaWMg\ndm9pZCBkZXRhY2hBbGwoQ29sbGVjdGlvbjxTdGF0ZU1hbmFnZXJJbXBsPiBz\ndGF0ZXMpIHsKICAgICAgICBUcmFuc2ZlckZpZWxkTWFuYWdlciBmbSA9IG5l\ndyBUcmFuc2ZlckZpZWxkTWFuYWdlcigpOwogICAgICAgIGZvciAoU3RhdGVN\nYW5hZ2VySW1wbCBzbSA6IHN0YXRlcykgewogICAgICAgICAgICBDbGFzc01l\ndGFEYXRhIGNtZCA9IHNtLmdldE1ldGFEYXRhKCk7CiAgICAgICAgICAgIGlm\nIChzbS5pc1BlcnNpc3RlbnQoKSAmJiBjbWQuaXNEZXRhY2hhYmxlKCkpIHsK\nICAgICAgICAgICAgICAgIFBlcnNpc3RlbmNlQ2FwYWJsZSBwYyA9IHNtLmdl\ndFBlcnNpc3RlbmNlQ2FwYWJsZSgpOwogICAgICAgICAgICAgICAgaWYocGMu\ncGNJc0RldGFjaGVkKCkgPT0gZmFsc2UpewogICAgICAgICAgICAgICAgICAg\nIC8vIERldGFjaCBwcm94eSBmaWVsZHMuCiAgICAgICAgICAgICAgICAgICAg\nQml0U2V0IGxvYWRlZCA9IHNtLmdldExvYWRlZCgpOwogICAgICAgICAgICAg\nICAgICAgIGZvciAoRmllbGRNZXRhRGF0YSBmbWQgOiBjbWQuZ2V0UHJveHlG\naWVsZHMoKSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9hZGVk\nLmdldChmbWQuZ2V0SW5kZXgoKSkpIHsKICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIGRldGFjaFByb3h5RmllbGQoZm1kLCBwYywgc20sIGZtKTsKICAg\nICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0K\nICAgICAgICAgICAgICAgICAgICBwYy5wY1JlcGxhY2VTdGF0ZU1hbmFnZXIo\nbnVsbCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAg\nICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBEZXRhY2ggdGhlIHByb3ZpZGVk\nIHByb3h5IGZpZWxkLgogICAgICogCiAgICAgKiBAcGFyYW0gZm1kCiAgICAg\nKiAgICAgICAgICAgIFRoZSBmaWVsZCB0byBiZSBkZXRhY2hlZC4KICAgICAq\nIEBwYXJhbSBwYwogICAgICogICAgICAgICAgICBUaGUgUGVyc2lzdGVuY2VD\nYXBhYmxlIHRoYXQgdGhlIGZpZWxkIGJlbG9uZ3MgdG8uCiAgICAgKiBAcGFy\nYW0gc20KICAgICAqICAgICAgICAgICAgVGhlIFN0YXRlTWFuYWdlckltcGwg\ndGhhdCB0aGUgUGVyc2lzdGVuY2VDYXBhYmxlIGJlbG9uZ3MgdG8uCiAgICAg\nKi8KICAgIHByaXZhdGUgdm9pZCBkZXRhY2hQcm94eUZpZWxkKEZpZWxkTWV0\nYURhdGEgZm1kLCBQZXJzaXN0ZW5jZUNhcGFibGUgcGMsCiAgICAgICAgICAg\nIFN0YXRlTWFuYWdlckltcGwgc20sIFRyYW5zZmVyRmllbGRNYW5hZ2VyIGZt\nKSB7CiAgICAgICAgaW50IGZpZWxkSW5kZXggPSBmbWQuZ2V0SW5kZXgoKTsK\nICAgICAgICBpZiAoZm1kLmlzTFJTKCkgPT0gdHJ1ZSkgewogICAgICAgICAg\nICAvLyBuZWVkIHRvIG51bGwgb3V0IExSUyBmaWVsZHMuCiAgICAgICAgICAg\nIG51bGxGaWVsZChmaWVsZEluZGV4LCBwYywgc20sIGZtKTsKICAgICAgICB9\nIGVsc2UgewogICAgICAgICAgICBPYmplY3QgbyA9IHNtLmZldGNoT2JqZWN0\nKGZpZWxkSW5kZXgpOwogICAgICAgICAgICBpZiAobyBpbnN0YW5jZW9mIFBy\nb3h5KSB7CiAgICAgICAgICAgICAgICAvLyBHZXQgdW5wcm94aWVkIG9iamVj\ndCBhbmQgcmVwbGFjZQogICAgICAgICAgICAgICAgUHJveHkgcHJveHkgPSAo\nUHJveHkpIG87CiAgICAgICAgICAgICAgICBPYmplY3QgdW5wcm94aWVkID0g\ncHJveHkuY29weShwcm94eSk7CiAgICAgICAgICAgICAgICBmbS5zdG9yZU9i\namVjdEZpZWxkKGZpZWxkSW5kZXgsIHVucHJveGllZCk7CiAgICAgICAgICAg\nICAgICBzbS5yZXBsYWNlRmllbGQocGMsIGZtLCBmaWVsZEluZGV4KTsKICAg\nICAgICAgICAgICAgIGZtLmNsZWFyKCk7CiAgICAgICAgICAgICAgICAvLyBj\nbGVhbiB1cCBvbGQgcHJveHkKICAgICAgICAgICAgICAgIHByb3h5LnNldE93\nbmVyKG51bGwsIC0xKTsKICAgICAgICAgICAgICAgIGlmIChwcm94eS5nZXRD\naGFuZ2VUcmFja2VyKCkgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAg\nIHByb3h5LmdldENoYW5nZVRyYWNrZXIoKS5zdG9wVHJhY2tpbmcoKTsKICAg\nICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0K\nCiAgICAvKioKICAgICAqIFByaXZhdGUgd29ya2VyIG1ldGhvZCB0aGF0IHJl\ncGxhY2VzIHRoZSB2YWx1ZSBhdCBmaWVsZEluZGV4IGluIHNtIHdpdGggbnVs\nbC4KICAgICAqIAogICAgICogQHBhcmFtIGZpZWxkSW5kZXgKICAgICAqICAg\nICAgICAgICAgVGhlIGluZGV4IG9mIHRoZSBmaWVsZCB0byBiZSBudWxsZWQg\nb3V0LgogICAgICogQHBhcmFtIHBjCiAgICAgKiAgICAgICAgICAgIFRoZSBQ\nZXJzaXN0ZW5jZUNhcGFibGUgdGhhdCB0aGUgZmllbGQgYmVsb25ncyB0by4K\nICAgICAqIEBwYXJhbSBzbQogICAgICogICAgICAgICAgICBUaGUgU3RhdGVN\nYW5hZ2VySW1wbCB0aGF0IHRoZSBQZXJzaXN0ZW5jZUNhcGFibGUgYmVsb25n\ncyB0by4KICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIG51bGxGaWVsZChpbnQg\nZmllbGRJbmRleCwgUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBTdGF0ZU1hbmFn\nZXJJbXBsIHNtLCBUcmFuc2ZlckZpZWxkTWFuYWdlciBmbSkgewogICAgICAg\nIGZtLnN0b3JlT2JqZWN0RmllbGQoZmllbGRJbmRleCwgbnVsbCk7CiAgICAg\nICAgc20ucmVwbGFjZUZpZWxkKHBjLCBmbSwgZmllbGRJbmRleCk7CiAgICAg\nICAgZm0uY2xlYXIoKTsKICAgIH0KfQo=\n","encoding":"base64"}

