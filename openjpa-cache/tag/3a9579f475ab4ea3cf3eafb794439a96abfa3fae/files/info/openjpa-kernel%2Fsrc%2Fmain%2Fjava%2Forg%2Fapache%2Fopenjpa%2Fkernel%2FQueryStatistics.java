{"sha":"be0306d6cc262c7eb9235bd0faa3a8809df3b2ac","node_id":"MDQ6QmxvYjIwNjM2NDpiZTAzMDZkNmNjMjYyYzdlYjkyMzViZDBmYWEzYTg4MDlkZjNiMmFj","size":6359,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/be0306d6cc262c7eb9235bd0faa3a8809df3b2ac","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsOwoKaW1wb3J0IGph\ndmEuaW8uUHJpbnRTdHJlYW07CmltcG9ydCBqYXZhLmlvLlNlcmlhbGl6YWJs\nZTsKaW1wb3J0IGphdmEudXRpbC5EYXRlOwppbXBvcnQgamF2YS51dGlsLkhh\nc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuTWFwOwppbXBvcnQgamF2YS51dGls\nLlNldDsKCi8qKgogKiBSZWNvcmRzIHF1ZXJ5IGV4ZWN1dGlvbiBzdGF0aXN0\naWNzLgogKiAKICogU3RhdGlzdGljcyBjYW4gYmUgcmVzZXQuCiAqIAogKiBH\nYXRoZXJzIGJvdGggYWNjdW11bGF0ZWQgc3RhdGlzdGljcyBzaW5jZSBzdGFy\ndCBhcyB3ZWxsIGFzIHN0YXRpc3RpY3Mgc2luY2UKICogbGFzdCByZXNldC4K\nICogIAogKiBAc2luY2UgMS4zLjAKICogCiAqIEBhdXRob3IgUGluYWtpIFBv\nZGRhcgogKiAKICovCnB1YmxpYyBpbnRlcmZhY2UgUXVlcnlTdGF0aXN0aWNz\nPFQ+IGV4dGVuZHMgU2VyaWFsaXphYmxlIHsKICAgIAogICAgLyoqCiAgICAg\nKiAgR2V0cyBhbGwgdGhlIGlkZW50aWZpZXIga2V5cyBmb3IgdGhlIGNhY2hl\nZCBxdWVyaWVzLgogICAgICovCiAgICBwdWJsaWMgU2V0PFQ+IGtleXMoKTsK\nCQoJLyoqCgkgKiBSZWNvcmQgdGhhdCB0aGUgZ2l2ZW4gcXVlcnkgaGFzIGJl\nZW4gZXhlY3V0ZWQuIAoJICovCgl2b2lkIHJlY29yZEV4ZWN1dGlvbihUIHF1\nZXJ5KTsKCQkKCS8qKgoJICogR2V0cyBudW1iZXIgb2YgdG90YWwgcXVlcnkg\nZXhlY3V0aW9uIHNpbmNlIGxhc3QgcmVzZXQuCgkgKi8KCXB1YmxpYyBsb25n\nIGdldEV4ZWN1dGlvbkNvdW50KCk7CgoJLyoqCgkgKiBHZXRzIG51bWJlciBv\nZiB0b3RhbCBxdWVyeSBleGVjdXRpb24gc2luY2Ugc3RhcnQuCgkgKi8KCXB1\nYmxpYyBsb25nIGdldFRvdGFsRXhlY3V0aW9uQ291bnQoKTsKCgkvKioKCSAq\nIEdldHMgbnVtYmVyIG9mIGV4ZWN1dGlvbnMgZm9yIHRoZSBnaXZlbiBxdWVy\neSBzaW5jZSBsYXN0IHJlc2V0LgoJICovCglwdWJsaWMgbG9uZyBnZXRFeGVj\ndXRpb25Db3VudChUIHF1ZXJ5KTsKCgkvKioKCSAqIEdldHMgbnVtYmVyIG9m\nIGV4ZWN1dGlvbnMgZm9yIHRoZSBnaXZlbiBxdWVyeSBzaW5jZSBzdGFydC4K\nCSAqLwoJcHVibGljIGxvbmcgZ2V0VG90YWxFeGVjdXRpb25Db3VudChUIHF1\nZXJ5KTsKCgkvKioKICAgICAqIEdldHMgbnVtYmVyIG9mIHRvdGFsIHF1ZXJ5\nIGV4ZWN1dGlvbiB0aGF0IGFyZSBjYWNoZWQgc2luY2UgbGFzdCByZXNldC4K\nCSAqLwoJcHVibGljIGxvbmcgZ2V0SGl0Q291bnQoKTsKCgkvKioKCSAqIEdl\ndHMgbnVtYmVyIG9mIHRvdGFsIHF1ZXJ5IGV4ZWN1dGlvbiB0aGF0IGFyZSBj\nYWNoZWQgc2luY2Ugc3RhcnQuCgkgKi8KCXB1YmxpYyBsb25nIGdldFRvdGFs\nSGl0Q291bnQoKTsKCgkvKioKCSAqIEdldHMgbnVtYmVyIG9mIGV4ZWN1dGlv\nbnMgZm9yIHRoZSBnaXZlbiBxdWVyeSB0aGF0IGFyZSBjYWNoZWQgc2luY2Ug\nCgkgKiBsYXN0IHJlc2V0LgoJICovCglwdWJsaWMgbG9uZyBnZXRIaXRDb3Vu\ndChUIHF1ZXJ5KTsKCgkvKioKCSAqIEdldHMgbnVtYmVyIG9mIGV4ZWN1dGlv\nbnMgZm9yIHRoZSBnaXZlbiBxdWVyeSB0aGF0IGFyZSBjYWNoZWQgc2luY2Ug\nCgkgKiBzdGFydC4KCSAqLwoJcHVibGljIGxvbmcgZ2V0VG90YWxIaXRDb3Vu\ndChUIHF1ZXJ5KTsKCgkvKioKCSAqIEdldHMgdGhlIHRpbWUgb2YgbGFzdCBy\nZXNldC4KCSAqLwoJcHVibGljIERhdGUgc2luY2UoKTsKCgkvKioKCSAqIEdl\ndHMgdGhlIHRpbWUgb2Ygc3RhcnQuCgkgKi8KCXB1YmxpYyBEYXRlIHN0YXJ0\nKCk7CgoJLyoqCgkgKiBDbGVhcnMgYWxsICBzdGF0aXN0aWNzIGFjY3VtdWxh\ndGVkIHNpbmNlIGxhc3QgcmVzZXQuCgkgKi8KCXB1YmxpYyB2b2lkIHJlc2V0\nKCk7CgkKCS8qKgoJICogQ2xlYXJzIGFsbCBzdGF0aXN0aWNzIGFjY3VtdWxh\ndGVkIHNpbmNlIHN0YXJ0LgoJICovCglwdWJsaWMgdm9pZCBjbGVhcigpOwoJ\nCgkvKioKCSAqIER1bXBzIG9uIHRoZSBnaXZlbiBvdXRwdXQgc3RyZWFtLgoJ\nICovCglwdWJsaWMgdm9pZCBkdW1wKFByaW50U3RyZWFtIG91dCk7CgkKCS8q\nKgoJICogQSBkZWZhdWx0IGltcGxlbWVudGF0aW9uLgoJICoKCSAqLwoJcHVi\nbGljIHN0YXRpYyBjbGFzcyBEZWZhdWx0PFQ+IGltcGxlbWVudHMgUXVlcnlT\ndGF0aXN0aWNzPFQ+IHsKCQlwcml2YXRlIHN0YXRpYyBmaW5hbCBpbnQgQVJS\nQVlfU0laRSA9IDI7CiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgaW50\nIFJFQUQgID0gMDsKICAgICAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBpbnQg\nSElUICAgPSAxOwogICAgICAgIAoJCXByaXZhdGUgbG9uZ1tdIGFzdGF0ID0g\nbmV3IGxvbmdbQVJSQVlfU0laRV07CgkJcHJpdmF0ZSBsb25nW10gc3RhdCAg\nPSBuZXcgbG9uZ1tBUlJBWV9TSVpFXTsKCQlwcml2YXRlIE1hcDxULCBsb25n\nW10+IHN0YXRzICA9IG5ldyBIYXNoTWFwPFQsIGxvbmdbXT4oKTsKCQlwcml2\nYXRlIE1hcDxULCBsb25nW10+IGFzdGF0cyA9IG5ldyBIYXNoTWFwPFQsIGxv\nbmdbXT4oKTsKCQlwcml2YXRlIERhdGUgc3RhcnQgPSBuZXcgRGF0ZSgpOwoJ\nCXByaXZhdGUgRGF0ZSBzaW5jZSA9IHN0YXJ0OwoJCQoJCXB1YmxpYyBTZXQ8\nVD4ga2V5cygpIHsKCQkgICAgcmV0dXJuIHN0YXRzLmtleVNldCgpOwoJCX0K\nCgkJcHVibGljIGxvbmcgZ2V0RXhlY3V0aW9uQ291bnQoKSB7CgkJCXJldHVy\nbiBzdGF0W1JFQURdOwoJCX0KCgkJcHVibGljIGxvbmcgZ2V0VG90YWxFeGVj\ndXRpb25Db3VudCgpIHsKCQkJcmV0dXJuIGFzdGF0W1JFQURdOwoJCX0KCgkJ\ncHVibGljIGxvbmcgZ2V0RXhlY3V0aW9uQ291bnQoVCBxdWVyeSkgewoJCQly\nZXR1cm4gZ2V0Q291bnQoc3RhdHMsIHF1ZXJ5LCBSRUFEKTsKCQl9CgoJCXB1\nYmxpYyBsb25nIGdldFRvdGFsRXhlY3V0aW9uQ291bnQoVCBxdWVyeSkgewoJ\nCQlyZXR1cm4gZ2V0Q291bnQoYXN0YXRzLCBxdWVyeSwgUkVBRCk7CgkJfQoK\nCQlwdWJsaWMgbG9uZyBnZXRIaXRDb3VudCgpIHsKCQkJcmV0dXJuIHN0YXRb\nSElUXTsKCQl9CgoJCXB1YmxpYyBsb25nIGdldFRvdGFsSGl0Q291bnQoKSB7\nCgkJCXJldHVybiBhc3RhdFtISVRdOwoJCX0KCgkJcHVibGljIGxvbmcgZ2V0\nSGl0Q291bnQoVCBxdWVyeSkgewoJCQlyZXR1cm4gZ2V0Q291bnQoc3RhdHMs\nIHF1ZXJ5LCBISVQpOwoJCX0KCgkJcHVibGljIGxvbmcgZ2V0VG90YWxIaXRD\nb3VudChUIHF1ZXJ5KSB7CgkJCXJldHVybiBnZXRDb3VudChhc3RhdHMsIHF1\nZXJ5LCBISVQpOwoJCX0KCgkJcHJpdmF0ZSBsb25nIGdldENvdW50KE1hcDxU\nLCBsb25nW10+IHRhcmdldCwgVCBxdWVyeSwgaW50IGkpIHsKCQkJbG9uZ1td\nIHJvdyA9IHRhcmdldC5nZXQocXVlcnkpOwoJCQlyZXR1cm4gKHJvdyA9PSBu\ndWxsKSA/IDAgOiByb3dbaV07CgkJfQoKCQlwdWJsaWMgRGF0ZSBzaW5jZSgp\nIHsKCQkJcmV0dXJuIHNpbmNlOwoJCX0KCgkJcHVibGljIERhdGUgc3RhcnQo\nKSB7CgkJCXJldHVybiBzdGFydDsKCQl9CgoJCXB1YmxpYyB2b2lkIHJlc2V0\nKCkgewoJCQlzdGF0ID0gbmV3IGxvbmdbQVJSQVlfU0laRV07CgkJCXN0YXRz\nLmNsZWFyKCk7CgkJCXNpbmNlID0gbmV3IERhdGUoKTsKCQl9CgkJCgkgICAg\ncHVibGljIHZvaWQgY2xlYXIoKSB7CgkgICAgICAgYXN0YXQgPSBuZXcgbG9u\nZ1tBUlJBWV9TSVpFXTsKCSAgICAgICBzdGF0ICA9IG5ldyBsb25nW0FSUkFZ\nX1NJWkVdOwoJICAgICAgIHN0YXRzID0gbmV3IEhhc2hNYXA8VCwgbG9uZ1td\nPigpOwoJICAgICAgIGFzdGF0cyA9IG5ldyBIYXNoTWFwPFQsIGxvbmdbXT4o\nKTsKCSAgICAgICBzdGFydCAgPSBuZXcgRGF0ZSgpOwoJICAgICAgIHNpbmNl\nICA9IHN0YXJ0OwoJICAgIH0KCgoJCXByaXZhdGUgdm9pZCBhZGRTYW1wbGUo\nVCBxdWVyeSwgaW50IGluZGV4KSB7CgkJCXN0YXRbaW5kZXhdKys7CgkJCWFz\ndGF0W2luZGV4XSsrOwoJCQlhZGRTYW1wbGUoc3RhdHMsIHF1ZXJ5LCBpbmRl\neCk7CgkJCWFkZFNhbXBsZShhc3RhdHMsIHF1ZXJ5LCBpbmRleCk7CgkJfQoJ\nCQoJCXByaXZhdGUgdm9pZCBhZGRTYW1wbGUoTWFwPFQsIGxvbmdbXT4gdGFy\nZ2V0LCBUIHF1ZXJ5LCBpbnQgaSkgewoJCQlsb25nW10gcm93ID0gdGFyZ2V0\nLmdldChxdWVyeSk7CgkJCWlmIChyb3cgPT0gbnVsbCkgewoJCQkJcm93ID0g\nbmV3IGxvbmdbQVJSQVlfU0laRV07CgkJCX0KCQkJcm93W2ldKys7CgkJCXRh\ncmdldC5wdXQocXVlcnksIHJvdyk7CgkJfQoJCQoJCXB1YmxpYyB2b2lkIHJl\nY29yZEV4ZWN1dGlvbihUIHF1ZXJ5KSB7CgkJICAgIGlmIChxdWVyeSA9PSBu\ndWxsKQoJCSAgICAgICAgcmV0dXJuOwoJCSAgICBib29sZWFuIGNhY2hlZCA9\nIChhc3RhdHMuY29udGFpbnNLZXkocXVlcnkpKTsKCQkJYWRkU2FtcGxlKHF1\nZXJ5LCBSRUFEKTsKCQkJaWYgKGNhY2hlZCkKCQkJCWFkZFNhbXBsZShxdWVy\neSwgSElUKTsKCQl9CgkJCgkJcHVibGljIHZvaWQgZHVtcChQcmludFN0cmVh\nbSBvdXQpIHsKICAgICAgICAgICAgU3RyaW5nIGhlYWRlciA9ICJRdWVyeSBT\ndGF0aXN0aWNzIHN0YXJ0aW5nIGZyb20gIiArIHN0YXJ0OwoJCQlvdXQucHJp\nbnQoaGVhZGVyKTsKCQkJaWYgKHNpbmNlID09IHN0YXJ0KSB7CgkJCQlvdXQu\ncHJpbnRsbigpOwogICAgICAgICAgICAgICAgb3V0LnByaW50bG4oIlRvdGFs\nIFF1ZXJ5IEV4ZWN1dGlvbjogIiArIHRvU3RyaW5nKGFzdGF0KSk7IAoJCQkJ\nb3V0LnByaW50bG4oIlx0VG90YWwgXHRcdFF1ZXJ5Iik7CgkJCX0gZWxzZSB7\nCgkJCQlvdXQucHJpbnRsbigiIGxhc3QgcmVzZXQgb24gIiArIHNpbmNlKTsK\nICAgICAgICAgICAgICAgIG91dC5wcmludGxuKCJUb3RhbCBRdWVyeSBFeGVj\ndXRpb24gc2luY2Ugc3RhcnQgIiArIAogICAgICAgICAgICAgICAgICAgICAg\nICB0b1N0cmluZyhhc3RhdCkgICsgIiBzaW5jZSByZXNldCAiICsgdG9TdHJp\nbmcoc3RhdCkpOwogICAgICAgICAgICAgICAgb3V0LnByaW50bG4oIlx0U2lu\nY2UgU3RhcnQgXHRTaW5jZSBSZXNldCBcdFx0UXVlcnkiKTsKCQkJfQoJCQlp\nbnQgaSA9IDA7CgkJCWZvciAoVCBrZXkgOiBzdGF0cy5rZXlTZXQoKSkgewoJ\nCQkJaSsrOwoJCQkJbG9uZ1tdIGFyb3cgPSBhc3RhdHMuZ2V0KGtleSk7CgkJ\nCQlpZiAoc2luY2UgPT0gc3RhcnQpIHsKICAgICAgICAgICAgICAgICAgICBv\ndXQucHJpbnRsbihpICsgIi4gXHQiICsgdG9TdHJpbmcoYXJvdykgKyAiIFx0\nIiArIGtleSk7CgkJCQl9IGVsc2UgewoJCQkJCWxvbmdbXSByb3cgID0gc3Rh\ndHMuZ2V0KGtleSk7CiAgICAgICAgICAgICAgICAgICAgb3V0LnByaW50bG4o\naSArICIuIFx0IiArIHRvU3RyaW5nKGFyb3cpICsgIiBcdCIgIAoJCQkJCSAg\nICArIHRvU3RyaW5nKHJvdykgKyAiIFx0XHQiICsga2V5KTsKCQkJCX0KCQkJ\nfQoJCX0KCQkKCQlsb25nIHBjdChsb25nIHBlciwgbG9uZyBjZW50KSB7CgkJ\nCWlmIChjZW50IDw9IDApCgkJCQlyZXR1cm4gMDsKCQkJcmV0dXJuICgxMDAq\ncGVyKS9jZW50OwoJCX0KCQkKCQlTdHJpbmcgdG9TdHJpbmcobG9uZ1tdIHJv\ndykgewogICAgICAgICAgICByZXR1cm4gcm93W1JFQURdICsgIjoiICsgcm93\nW0hJVF0gKyAiKCIgKyBwY3Qocm93W0hJVF0sIHJvd1tSRUFEXSkKCQkJKyAi\nJSkiOwoJCX0KCX0KfQo=\n","encoding":"base64"}

