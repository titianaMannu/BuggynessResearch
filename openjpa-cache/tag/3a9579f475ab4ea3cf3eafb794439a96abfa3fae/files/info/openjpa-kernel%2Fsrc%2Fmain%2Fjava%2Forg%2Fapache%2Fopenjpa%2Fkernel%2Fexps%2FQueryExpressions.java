{"sha":"560c6f9ed5df184ff8b1ebcdbe5d1714260457c6","node_id":"MDQ6QmxvYjIwNjM2NDo1NjBjNmY5ZWQ1ZGYxODRmZjhiMWViY2RiZTVkMTcxNDI2MDQ1N2M2","size":6717,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/560c6f9ed5df184ff8b1ebcdbe5d1714260457c6","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLmV4cHM7CgppbXBv\ncnQgamF2YS5pby5TZXJpYWxpemFibGU7CmltcG9ydCBqYXZhLnV0aWwuQXJy\nYXlMaXN0OwppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb25zOwppbXBvcnQg\namF2YS51dGlsLkxpbmtlZEhhc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuTGlz\ndDsKaW1wb3J0IGphdmEudXRpbC5NYXA7CmltcG9ydCBqYXZhLnV0aWwuU3Rh\nY2s7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5RdWVyeU9w\nZXJhdGlvbnM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlJl\nc3VsdFNoYXBlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5T\ndG9yZVF1ZXJ5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5l\neHBzLkNvbnRleHQ7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0\naWwuT3JkZXJlZE1hcDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRh\nLkNsYXNzTWV0YURhdGE7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0\nYS5GaWVsZE1ldGFEYXRhOwoKLyoqCiAqIFN0cnVjdCB0byBob2xkIHRoZSBz\ndGF0ZSBvZiBhIHBhcnNlZCBleHByZXNzaW9uIHF1ZXJ5LgogKgogKiBAYXV0\naG9yIEFiZSBXaGl0ZQogKiBAc2luY2UgMC4zLjIKICogQG5vamF2YWRvYwog\nKi8KQFN1cHByZXNzV2FybmluZ3MoInNlcmlhbCIpCnB1YmxpYyBjbGFzcyBR\ndWVyeUV4cHJlc3Npb25zCiAgICBpbXBsZW1lbnRzIFNlcmlhbGl6YWJsZSB7\nCgogICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgRElTVElOQ1RfQVVUTyA9\nIDIgPDwgMDsKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IERJU1RJTkNU\nX1RSVUUgPSAyIDw8IDE7CiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBE\nSVNUSU5DVF9GQUxTRSA9IDIgPDwgMjsKICAgIHB1YmxpYyBzdGF0aWMgZmlu\nYWwgVmFsdWVbXSBFTVBUWV9WQUxVRVMgPSBuZXcgVmFsdWVbMF07CiAgICAK\nICAgIC8qKgogICAgICogTWFwIG9mIHtAbGluayBGaWVsZE1ldGFEYXRhfSx7\nQGxpbmsgVmFsdWV9IGZvciB1cGRhdGUgc3RhdGVtZW50cy4KICAgICAqLwog\nICAgcHVibGljIE1hcDxQYXRoLCBWYWx1ZT4gdXBkYXRlcyA9IENvbGxlY3Rp\nb25zLmVtcHR5TWFwKCk7CiAgICBwdWJsaWMgaW50IGRpc3RpbmN0ID0gRElT\nVElOQ1RfQVVUTzsKICAgIHB1YmxpYyBTdHJpbmcgYWxpYXMgPSBudWxsOwog\nICAgcHVibGljIFZhbHVlW10gcHJvamVjdGlvbnMgPSBFTVBUWV9WQUxVRVM7\nCiAgICBwdWJsaWMgU3RyaW5nW10gcHJvamVjdGlvbkNsYXVzZXMgPSBTdG9y\nZVF1ZXJ5LkVNUFRZX1NUUklOR1M7CiAgICBwdWJsaWMgU3RyaW5nW10gcHJv\namVjdGlvbkFsaWFzZXMgPSBTdG9yZVF1ZXJ5LkVNUFRZX1NUUklOR1M7CiAg\nICBwdWJsaWMgQ2xhc3M8Pz4gcmVzdWx0Q2xhc3MgPSBudWxsOwogICAgcHVi\nbGljIEV4cHJlc3Npb24gZmlsdGVyID0gbnVsbDsKICAgIHB1YmxpYyBWYWx1\nZVtdIGdyb3VwaW5nID0gRU1QVFlfVkFMVUVTOwogICAgcHVibGljIFN0cmlu\nZ1tdIGdyb3VwaW5nQ2xhdXNlcyA9IFN0b3JlUXVlcnkuRU1QVFlfU1RSSU5H\nUzsKICAgIHB1YmxpYyBFeHByZXNzaW9uIGhhdmluZyA9IG51bGw7CiAgICBw\ndWJsaWMgVmFsdWVbXSBvcmRlcmluZyA9IEVNUFRZX1ZBTFVFUzsKICAgIHB1\nYmxpYyBib29sZWFuW10gYXNjZW5kaW5nID0gU3RvcmVRdWVyeS5FTVBUWV9C\nT09MRUFOUzsKICAgIHB1YmxpYyBTdHJpbmdbXSBvcmRlcmluZ0NsYXVzZXMg\nPSBTdG9yZVF1ZXJ5LkVNUFRZX1NUUklOR1M7CiAgICBwdWJsaWMgU3RyaW5n\nW10gb3JkZXJpbmdBbGlhc2VzID0gU3RvcmVRdWVyeS5FTVBUWV9TVFJJTkdT\nOwogICAgcHVibGljIE9yZGVyZWRNYXA8T2JqZWN0LENsYXNzPD8+PiBwYXJh\nbWV0ZXJUeXBlcyA9IFN0b3JlUXVlcnkuRU1QVFlfT1JERVJFRF9QQVJBTVM7\nCiAgICBwdWJsaWMgaW50IG9wZXJhdGlvbiA9IFF1ZXJ5T3BlcmF0aW9ucy5P\nUF9TRUxFQ1Q7CiAgICBwdWJsaWMgQ2xhc3NNZXRhRGF0YVtdIGFjY2Vzc1Bh\ndGggPSBTdG9yZVF1ZXJ5LkVNUFRZX01FVEFTOwogICAgcHVibGljIFN0cmlu\nZ1tdIGZldGNoUGF0aHMgPSBTdG9yZVF1ZXJ5LkVNUFRZX1NUUklOR1M7CiAg\nICBwdWJsaWMgU3RyaW5nW10gZmV0Y2hJbm5lclBhdGhzID0gU3RvcmVRdWVy\neS5FTVBUWV9TVFJJTkdTOwogICAgcHVibGljIFZhbHVlW10gcmFuZ2UgPSBF\nTVBUWV9WQUxVRVM7CiAgICBwcml2YXRlIEJvb2xlYW4gX2FnZ3JlZ2F0ZSA9\nIG51bGw7CiAgICBwcml2YXRlIFN0YWNrPENvbnRleHQ+IF9jb250ZXh0cyA9\nIG51bGw7CiAgICBwdWJsaWMgT2JqZWN0IHN0YXRlOwogICAgcHVibGljIFJl\nc3VsdFNoYXBlPD8+IHNoYXBlOwogICAgCiAgICAvKioKICAgICAqIFNldCBy\nZWZlcmVuY2UgdG8gdGhlIEpQUUwgcXVlcnkgY29udGV4dHMuCiAgICAgKiBA\ncGFyYW0gY29udGV4dHMKICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0Q29u\ndGV4dHMoU3RhY2s8Q29udGV4dD4gY29udGV4dHMpIHsKICAgICAgICBfY29u\ndGV4dHMgPSBjb250ZXh0czsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVy\nbnMgdGhlIGN1cnJlbnQgSlBRTCBxdWVyeSBjb250ZXh0LgogICAgICogQHJl\ndHVybgogICAgICovCiAgICBwdWJsaWMgQ29udGV4dCBjdHgoKSB7CiAgICAg\nICAgcmV0dXJuIF9jb250ZXh0cy5wZWVrKCk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBXaGV0aGVyIHRoaXMgaXMgYW4gYWdncmVnYXRlIHJlc3VsdHMuCiAg\nICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlzQWdncmVnYXRlKCkgewogICAg\nICAgIGlmIChwcm9qZWN0aW9ucy5sZW5ndGggPT0gMCkKICAgICAgICAgICAg\ncmV0dXJuIGZhbHNlOyAKICAgICAgICBpZiAoX2FnZ3JlZ2F0ZSA9PSBudWxs\nKQogICAgICAgICAgICBfYWdncmVnYXRlID0gKEFnZ3JlZ2F0ZUV4cHJlc3Np\nb25WaXNpdG9yLmlzQWdncmVnYXRlKHByb2plY3Rpb25zKSkKICAgICAgICAg\nICAgICAgID8gQm9vbGVhbi5UUlVFIDogQm9vbGVhbi5GQUxTRTsKICAgICAg\nICByZXR1cm4gX2FnZ3JlZ2F0ZS5ib29sZWFuVmFsdWUoKTsgICAgCiAgICB9\nCiAgICAKICAgIHB1YmxpYyBib29sZWFuIGlzRGlzdGluY3QoKSB7CiAgICAg\nICAgcmV0dXJuIGRpc3RpbmN0ICE9IERJU1RJTkNUX0ZBTFNFOwogICAgfQog\nICAgCiAgICAvKioKICAgICAqIEdldHMgdGhlIGZpZWxkcyB0aGF0IGFyZSBi\nb3VuZCB0byBwYXJhbWV0ZXJzLgogICAgICogCiAgICAgKiBAcmV0dXJuIGVt\ncHR5IGlmIHRoZSBxdWVyeSBoYXMgbm8gZmlsdGVyaW5nIGNvbmRpdGlvbiBv\nciBubyBwYXJhbWV0ZXJzLgogICAgICovCiAgICBwdWJsaWMgTGlzdDxGaWVs\nZE1ldGFEYXRhPiBnZXRQYXJhbWV0ZXJpemVkRmllbGRzKCkgewogICAgICAg\nIHJldHVybiBQYXJhbWV0ZXJFeHByZXNzaW9uVmlzaXRvci5jb2xsZWN0UGFy\nYW1ldGVyaXplZEZpZWxkcyhmaWx0ZXIpOwogICAgfQoKICAgIC8qKgogICAg\nICogQWRkIGFuIHVwZGF0ZS4KICAgICAqLwogICAgcHVibGljIHZvaWQgcHV0\nVXBkYXRlKFBhdGggcGF0aCwgVmFsdWUgdmFsKSB7CiAgICAgICAgaWYgKHVw\nZGF0ZXMgPT0gQ29sbGVjdGlvbnMuRU1QVFlfTUFQKQogICAgICAgICAgICB1\ncGRhdGVzID0gbmV3IExpbmtlZEhhc2hNYXA8UGF0aCwgVmFsdWU+KCk7CiAg\nICAgICAgdXBkYXRlcy5wdXQocGF0aCwgdmFsKTsKICAgIH0KCiAgICAvKioK\nICAgICAqIFZpc2l0b3IgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgb3VyIHByb2pl\nY3Rpb25zIGFyZSBhZ2dyZWdhdGVzLgogICAgICovCiAgICBwcml2YXRlIHN0\nYXRpYyBjbGFzcyBBZ2dyZWdhdGVFeHByZXNzaW9uVmlzaXRvcgogICAgICAg\nIGV4dGVuZHMgQWJzdHJhY3RFeHByZXNzaW9uVmlzaXRvciB7CiAgICAgICAg\nCiAgICAgICAgcHJpdmF0ZSBWYWx1ZSBfc3ViID0gbnVsbDsKICAgICAgICBw\ncml2YXRlIGJvb2xlYW4gX2FnZyA9IGZhbHNlOwoKICAgICAgICAvKioKICAg\nICAgICAgKiBSZXR1cm4gd2hldGhlciB0aGUgZ2l2ZW4gdmFsdWVzIGluY2x1\nZGUgcHJvamVjdGlvbnMuCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHN0\nYXRpYyBib29sZWFuIGlzQWdncmVnYXRlKFZhbHVlW10gdmFscykgewogICAg\nICAgICAgICBpZiAodmFscy5sZW5ndGggPT0gMCkKICAgICAgICAgICAgICAg\nIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgQWdncmVnYXRlRXhwcmVzc2lv\nblZpc2l0b3IgdiA9IG5ldyBBZ2dyZWdhdGVFeHByZXNzaW9uVmlzaXRvcigp\nOwogICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHZhbHMubGVuZ3Ro\nICYmICF2Ll9hZ2c7IGkrKykKICAgICAgICAgICAgICAgIHZhbHNbaV0uYWNj\nZXB0VmlzaXQodik7CiAgICAgICAgICAgIHJldHVybiB2Ll9hZ2c7CiAgICAg\nICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBlbnRlcihWYWx1ZSB2YWwpIHsK\nICAgICAgICAgICAgaWYgKF9hZ2cpCiAgICAgICAgICAgICAgICByZXR1cm47\nCiAgICAgICAgICAgIGlmIChfc3ViID09IG51bGwpIHsKICAgICAgICAgICAg\nICAgIGlmICh2YWwuaXNBZ2dyZWdhdGUoKSkKICAgICAgICAgICAgICAgICAg\nICBfYWdnID0gdHJ1ZTsKICAgICAgICAgICAgfSBlbHNlIGlmICh2YWwgaW5z\ndGFuY2VvZiBTdWJxdWVyeSkKICAgICAgICAgICAgICAgIF9zdWIgPSB2YWw7\nCiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBleGl0KFZhbHVlIHZh\nbCkgewogICAgICAgICAgICBpZiAodmFsID09IF9zdWIpCiAgICAgICAgICAg\nICAgICBfc3ViID0gbnVsbDsKICAgICAgICB9CiAgICB9CiAgICAKICAgIC8q\nKgogICAgICogVmlzaXRzIHRoZSBleHByZXNzaW9uIHRyZWUgdG8gZmluZCB0\naGUgcGFyYW1ldGVyIG5vZGVzLgogICAgICogQGF1dGhvciBQaW5ha2kgUG9k\nZGFyCiAgICAgKgogICAgICovCiAgICBwcml2YXRlIHN0YXRpYyBjbGFzcyBQ\nYXJhbWV0ZXJFeHByZXNzaW9uVmlzaXRvciBleHRlbmRzIEFic3RyYWN0RXhw\ncmVzc2lvblZpc2l0b3IgewogICAgICAgIHByaXZhdGUgRmllbGRNZXRhRGF0\nYSBfcGFyYW1ldGVyaXplZDsKICAgICAgICBwcml2YXRlIExpc3Q8RmllbGRN\nZXRhRGF0YT4gX2NvbGxlY3RlZCA9IG5ldyBBcnJheUxpc3Q8RmllbGRNZXRh\nRGF0YT4oKTsKICAgICAgICAvKioKICAgICAgICAgKiBFbnRlcnMgdGhlIGN1\ncnJlbnQgbm9kZS4KICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgdm9pZCBl\nbnRlcihWYWx1ZSB2YWwpIHsKICAgICAgICAgICAgaWYgKHZhbCBpbnN0YW5j\nZW9mIFBhcmFtZXRlcikgewogICAgICAgICAgICAgICAgaWYgKF9wYXJhbWV0\nZXJpemVkICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICBfY29sbGVj\ndGVkLmFkZChfcGFyYW1ldGVyaXplZCk7CiAgICAgICAgICAgICAgICB9IAog\nICAgICAgICAgICB9IGVsc2UgaWYgKHZhbCBpbnN0YW5jZW9mIFBhdGgpIHsK\nICAgICAgICAgICAgICAgIF9wYXJhbWV0ZXJpemVkID0gKChQYXRoKXZhbCku\nbGFzdCgpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAg\nX3BhcmFtZXRlcml6ZWQgPSBudWxsOwogICAgICAgICAgICB9CiAgICAgICAg\nfQogICAgICAgIAogICAgICAgIHB1YmxpYyBzdGF0aWMgTGlzdDxGaWVsZE1l\ndGFEYXRhPiBjb2xsZWN0UGFyYW1ldGVyaXplZEZpZWxkcyhFeHByZXNzaW9u\nIGUpIHsKICAgICAgICAgICAgaWYgKGUgPT0gbnVsbCkgewogICAgICAgICAg\nICAgICAgcmV0dXJuIENvbGxlY3Rpb25zLmVtcHR5TGlzdCgpOwogICAgICAg\nICAgICB9CiAgICAgICAgICAgIFBhcmFtZXRlckV4cHJlc3Npb25WaXNpdG9y\nIHZpc2l0b3IgPSBuZXcgUGFyYW1ldGVyRXhwcmVzc2lvblZpc2l0b3IoKTsK\nICAgICAgICAgICAgZS5hY2NlcHRWaXNpdCh2aXNpdG9yKTsKICAgICAgICAg\nICAgcmV0dXJuIHZpc2l0b3IuX2NvbGxlY3RlZDsKICAgICAgICB9CiAgICAg\nICAgCiAgICB9Cn0K\n","encoding":"base64"}

