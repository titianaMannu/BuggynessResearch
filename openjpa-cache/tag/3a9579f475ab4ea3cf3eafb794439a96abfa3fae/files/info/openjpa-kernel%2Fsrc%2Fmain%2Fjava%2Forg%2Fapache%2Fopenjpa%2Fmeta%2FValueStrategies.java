{"sha":"18fa7d91f7eb59023eea8bc4b630fc4cb1392c49","node_id":"MDQ6QmxvYjIwNjM2NDoxOGZhN2Q5MWY3ZWI1OTAyM2VlYThiYzRiNjMwZmM0Y2IxMzkyYzQ5","size":4826,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/18fa7d91f7eb59023eea8bc4b630fc4cb1392c49","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YTsKCmltcG9ydCBvcmcu\nYXBhY2hlLmNvbW1vbnMuY29sbGVjdGlvbnMuYmlkaW1hcC5UcmVlQmlkaU1h\ncDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5jb25mLk9wZW5KUEFDb25m\naWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGls\nLkxvY2FsaXplcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRp\nbC5TdHJpbmdEaXN0YW5jZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51\ndGlsLk1ldGFEYXRhRXhjZXB0aW9uOwoKLyoqCiAqIFN0cmF0ZWdpZXMgZm9y\nIHBlcnNpc3RlbnQgdmFsdWUgZ2VuZXJhdGlvbi4KICoKICogQGF1dGhvciBB\nYmUgV2hpdGUKICogQHNpbmNlIDAuNC4wCiAqLwpwdWJsaWMgY2xhc3MgVmFs\ndWVTdHJhdGVnaWVzIHsKCiAgICAvKioKICAgICAqIE5vIHZhbHVlIHN0cmF0\nZWd5LgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBOT05F\nID0gMDsKCiAgICAvKioKICAgICAqICJuYXRpdmUiIHZhbHVlIHN0cmF0ZWd5\nLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBOQVRJVkUg\nPSAxOwoKICAgIC8qKgogICAgICogInNlcXVlbmNlIiB2YWx1ZSBzdHJhdGVn\neS4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgU0VRVUVO\nQ0UgPSAyOwoKICAgIC8qKgogICAgICogImF1dG9hc3NpZ25lZCIgdmFsdWUg\nc3RyYXRlZ3kuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50\nIEFVVE9BU1NJR04gPSAzOwoKICAgIC8qKgogICAgICogImluY3JlbWVudCIg\ndmFsdWUgc3RyYXRlZ3kuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZmlu\nYWwgaW50IElOQ1JFTUVOVCA9IDQ7CgogICAgLyoqCiAgICAgKiAidXVpZC1z\ndHJpbmciIHZhbHVlIHN0cmF0ZWd5LgogICAgICovCiAgICBwdWJsaWMgc3Rh\ndGljIGZpbmFsIGludCBVVUlEX1NUUklORyA9IDU7CgogICAgLyoqCiAgICAg\nKiAidXVpZC1oZXgiIHZhbHVlIHN0cmF0ZWd5LgogICAgICovCiAgICBwdWJs\naWMgc3RhdGljIGZpbmFsIGludCBVVUlEX0hFWCA9IDY7CgogICAgLyoqCiAg\nICAgKiAidXVpZC10eXBlNC1zdHJpbmciIHZhbHVlIHN0cmF0ZWd5LgogICAg\nICovCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBVVUlEX1RZUEU0X1NU\nUklORyA9IDc7CgogICAgLyoqCiAgICAgKiAidXVpZC10eXBlNC1oZXgiIHZh\nbHVlIHN0cmF0ZWd5LgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZpbmFs\nIGludCBVVUlEX1RZUEU0X0hFWCA9IDg7CgogICAgcHJpdmF0ZSBzdGF0aWMg\nZmluYWwgTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6ZXIuZm9yUGFja2FnZQog\nICAgICAgIChWYWx1ZVN0cmF0ZWdpZXMuY2xhc3MpOwoKICAgIC8vIHRhYmxl\nIG9mIG5hbWVzIGFuZCBzdHJhdGVnaWVzCiAgICBwcml2YXRlIHN0YXRpYyBm\naW5hbCBUcmVlQmlkaU1hcCBfbWFwID0gbmV3IFRyZWVCaWRpTWFwKCk7Cgog\nICAgc3RhdGljIHsKICAgICAgICBfbWFwLnB1dCgibm9uZSIsIE5PTkUpOwog\nICAgICAgIF9tYXAucHV0KCJuYXRpdmUiLCBOQVRJVkUpOwogICAgICAgIF9t\nYXAucHV0KCJzZXF1ZW5jZSIsIFNFUVVFTkNFKTsKICAgICAgICBfbWFwLnB1\ndCgiYXV0b2Fzc2lnbiIsIEFVVE9BU1NJR04pOwogICAgICAgIF9tYXAucHV0\nKCJpbmNyZW1lbnQiLCBJTkNSRU1FTlQpOwogICAgICAgIF9tYXAucHV0KCJ1\ndWlkLXN0cmluZyIsIFVVSURfU1RSSU5HKTsKICAgICAgICBfbWFwLnB1dCgi\ndXVpZC1oZXgiLCBVVUlEX0hFWCk7CiAgICAgICAgX21hcC5wdXQoInV1aWQt\ndHlwZTQtc3RyaW5nIiwgVVVJRF9UWVBFNF9TVFJJTkcpOwogICAgICAgIF9t\nYXAucHV0KCJ1dWlkLXR5cGU0LWhleCIsIFVVSURfVFlQRTRfSEVYKTsKICAg\nIH0KCiAgICAvKioKICAgICAqIENvbnZlcnQgdGhlIGdpdmVuIHN0cmF0ZWd5\nIHRvIGEgbmFtZS4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBTdHJpbmcg\nZ2V0TmFtZShpbnQgc3RyYXRlZ3kpIHsKICAgICAgICBPYmplY3QgY29kZSA9\nIHN0cmF0ZWd5OwogICAgICAgIFN0cmluZyBuYW1lID0gKFN0cmluZykgX21h\ncC5nZXRLZXkoY29kZSk7CiAgICAgICAgaWYgKG5hbWUgIT0gbnVsbCkKICAg\nICAgICAgICAgcmV0dXJuIG5hbWU7CiAgICAgICAgdGhyb3cgbmV3IElsbGVn\nYWxBcmd1bWVudEV4Y2VwdGlvbihjb2RlLnRvU3RyaW5nKCkpOwogICAgfQoK\nICAgIC8qKgogICAgICogQ29udmVydCB0aGUgZ2l2ZW4gc3RyYXRlZ3kgbmFt\nZSB0byBpdHMgY29uc3RhbnQuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMg\naW50IGdldENvZGUoU3RyaW5nIHZhbCwgT2JqZWN0IGNvbnRleHQpIHsKICAg\nICAgICBpZiAodmFsID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBOT05F\nOwogICAgICAgIE9iamVjdCBjb2RlID0gX21hcC5nZXQodmFsKTsKICAgICAg\nICBpZiAoY29kZSAhPSBudWxsKQogICAgICAgICAgICByZXR1cm4gKChOdW1i\nZXIpIGNvZGUpLmludFZhbHVlKCk7CgogICAgICAgIC8vIG5vdCBhIHJlY29n\nbml6ZWQgc3RyYXRlZ3k7IGNoZWNrIGZvciB0eXBvCiAgICAgICAgU3RyaW5n\nIGNsb3Nlc3QgPSBTdHJpbmdEaXN0YW5jZS5nZXRDbG9zZXN0TGV2ZW5zaHRl\naW5EaXN0YW5jZSh2YWwsCiAgICAgICAgICAgIF9tYXAua2V5U2V0KCksIC41\nRik7CiAgICAgICAgU3RyaW5nIG1zZzsKICAgICAgICBpZiAoY2xvc2VzdCAh\nPSBudWxsKQogICAgICAgICAgICBtc2cgPSBfbG9jLmdldCgiYmFkLXZhbHVl\nLXN0cmF0ZWd5LWhpbnQiLCBuZXcgT2JqZWN0W117CiAgICAgICAgICAgICAg\nICBjb250ZXh0LCB2YWwsIGNsb3Nlc3QsIF9tYXAua2V5U2V0KCkgfSkuZ2V0\nTWVzc2FnZSgpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgbXNnID0gX2xv\nYy5nZXQoImJhZC12YWx1ZS1zdHJhdGVneSIsIGNvbnRleHQsIHZhbCwgX21h\ncC5rZXlTZXQoKSkKICAgICAgICAgICAgICAgIC5nZXRNZXNzYWdlKCk7CiAg\nICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihtc2cp\nOwogICAgfQoKICAgIC8qKgogICAgICogQXNzZXJ0IHRoYXQgdGhlIGdpdmVu\nIHN0cmF0ZWd5IGlzIHN1cHBvcnRlZCBieSB0aGUgY3VycmVudCBydW50aW1l\nLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgYXNzZXJ0U3VwcG9y\ndGVkKGludCBzdHJhdGVneSwgTWV0YURhdGFDb250ZXh0IGNvbnRleHQsCiAg\nICAgICAgU3RyaW5nIGF0dHJpYnV0ZU5hbWUpIHsKICAgICAgICBPcGVuSlBB\nQ29uZmlndXJhdGlvbiBjb25mID0gY29udGV4dC5nZXRSZXBvc2l0b3J5KCku\nZ2V0Q29uZmlndXJhdGlvbigpOwogICAgICAgIGJvb2xlYW4gc3VwcG9ydGVk\nID0gdHJ1ZTsKICAgICAgICBzd2l0Y2ggKHN0cmF0ZWd5KSB7CiAgICAgICAg\nICAgIGNhc2UgQVVUT0FTU0lHTjoKICAgICAgICAgICAgICAgIHN1cHBvcnRl\nZCA9IGNvbmYuc3VwcG9ydGVkT3B0aW9ucygpLmNvbnRhaW5zCiAgICAgICAg\nICAgICAgICAgICAgKE9wZW5KUEFDb25maWd1cmF0aW9uLk9QVElPTl9WQUxV\nRV9BVVRPQVNTSUdOKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAg\nICAgICBjYXNlIElOQ1JFTUVOVDoKICAgICAgICAgICAgICAgIHN1cHBvcnRl\nZCA9IGNvbmYuc3VwcG9ydGVkT3B0aW9ucygpLmNvbnRhaW5zCiAgICAgICAg\nICAgICAgICAgICAgKE9wZW5KUEFDb25maWd1cmF0aW9uLk9QVElPTl9WQUxV\nRV9JTkNSRU1FTlQpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAg\nICAgIGNhc2UgTkFUSVZFOgogICAgICAgICAgICAgICAgc3VwcG9ydGVkID0g\nY29udGV4dCBpbnN0YW5jZW9mIENsYXNzTWV0YURhdGE7CiAgICAgICAgICAg\nICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgaWYgKCFzdXBwb3J0ZWQp\nCiAgICAgICAgICAgIHRocm93IG5ldyBNZXRhRGF0YUV4Y2VwdGlvbihfbG9j\nLmdldCgidW5zdXBwb3J0ZWQtdmFsdWUtc3RyYXRlZ3kiLAogICAgICAgICAg\nICAgICAgY29udGV4dCwgZ2V0TmFtZShzdHJhdGVneSksIGF0dHJpYnV0ZU5h\nbWUpKTsKCX0KfQo=\n","encoding":"base64"}

