{"sha":"554ead6cc2e1c10667aeacfc0217b6ca105b2c29","node_id":"MDQ6QmxvYjIwNjM2NDo1NTRlYWQ2Y2MyZTFjMTA2NjdhZWFjZmMwMjE3YjZjYTEwNWIyYzI5","size":10446,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/554ead6cc2e1c10667aeacfc0217b6ca105b2c29","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbDsKCmltcG9ydCBqYXZh\nLmlvLk9iamVjdE91dHB1dFN0cmVhbTsKaW1wb3J0IGphdmEuaW8uT3V0cHV0\nU3RyZWFtOwppbXBvcnQgamF2YS5pby5QcmludFN0cmVhbTsKaW1wb3J0IGph\ndmEuaW8uUHJpbnRXcml0ZXI7CmltcG9ydCBqYXZhLmlvLlNlcmlhbGl6YWJs\nZTsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOwppbXBvcnQgamF2YS51\ndGlsLkl0ZXJhdG9yOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5jb25m\nLk9wZW5KUEFWZXJzaW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmVu\naGFuY2UuUGVyc2lzdGVuY2VDYXBhYmxlOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmxpYi51dGlsLkoyRG9Qcml2SGVscGVyOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmxpYi51dGlsLkphdmFWZXJzaW9uczsKCi8qKgogKiBV\ndGlsaXR5IG1ldGhvZHMgZm9yIGV4dGVybmFsaXppbmcgYW5kIGhhbmRsaW5n\nIGV4Y2VwdGlvbnMuCiAqCiAqIEBhdXRob3IgTWFyYyBQcnVkJ2hvbW1lYXV4\nCiAqIEBzaW5jZSAwLjIuNQogKiBAbm9qYXZhZG9jCiAqLwpwdWJsaWMgY2xh\nc3MgRXhjZXB0aW9ucyB7CgogICAgcHVibGljIHN0YXRpYyBmaW5hbCBUaHJv\nd2FibGVbXSBFTVBUWV9USFJPV0FCTEVTID0gbmV3IFRocm93YWJsZVswXTsK\nCiAgICBzdGF0aWMgZmluYWwgU3RyaW5nIFNFUCA9IEoyRG9Qcml2SGVscGVy\nLmdldExpbmVTZXBhcmF0b3IoKTsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5h\nbCBPdXRwdXRTdHJlYW0gREVWX05VTEwgPSBuZXcgT3V0cHV0U3RyZWFtKCkg\newogICAgICAgIHB1YmxpYyB2b2lkIHdyaXRlKGludCBiKSB7CiAgICAgICAg\nfQogICAgfTsKCiAgICAvKioKICAgICAqIFRlc3QgdG8gc2VlIGlmIHRoZSBz\ncGVjaWZpZWQgb2JqZWN0IHdpbGwgYmUgYWJsZSB0byBiZSBzZXJpYWxpemVk\nLiBUaGlzCiAgICAgKiB3aWxsIGNoZWNrIGlmIHRoZSBvYmplY3QgaW1wbGVt\nZW50cyB7QGxpbmsgU2VyaWFsaXphYmxlfSwgYW5kIGlmIHNvLAogICAgICog\nd2lsbCB0cnkgdG8gcGVyZm9ybSBhbiBhY3R1YWwgc2VyaWFsaXphdGlvbi4g\nVGhpcyBpcyBpbiBjYXNlIHRoZSBvYmplY3QKICAgICAqIGhhcyBmaWVsZHMg\nd2hpY2gsIGluIHR1cm4sIGFyZSBub3Qgc2VyaWFsaXphYmxlLgogICAgICoK\nICAgICAqIEBwYXJhbSBvYiB0aGUgb2JqZWN0IHRvIHRlc3QKICAgICAqIEBy\nZXR1cm4gdHJ1ZSBpZiB0aGUgb2JqZWN0IHdpbGwgYmUgYWJsZSB0byBiZSBz\nZXJpYWxpemVkCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGljIGJvb2xlYW4g\naXNTZXJpYWxpemFibGUoT2JqZWN0IG9iKSB7CiAgICAgICAgaWYgKCEob2Ig\naW5zdGFuY2VvZiBTZXJpYWxpemFibGUpKQogICAgICAgICAgICByZXR1cm4g\nZmFsc2U7CgogICAgICAgIC8vIGRvbid0IHNlcmlhbGl6ZSBwZXJzaXN0ZW50\nIG9iamVjdHMgZXhjZXB0aW9ucyB0byBwcmV2ZW50CiAgICAgICAgLy8gcmVh\nZGluZyBpbiBhbGwgdGhlIHN0YXRlCiAgICAgICAgaWYgKCFJbXBsSGVscGVy\nLmlzTWFuYWdlZFR5cGUobnVsbCwgb2IuZ2V0Q2xhc3MoKSkpCiAgICAgICAg\nICAgIHJldHVybiBmYWxzZTsKCiAgICAgICAgLy8gbm93IGRvIGFuIGFjdHVh\nbCB0ZXN0IHRvIHNlZSBpZiB3ZSB3aWxsIGJlCiAgICAgICAgLy8gYWJsZSB0\nbyBwZXJmb3JtIHRoZSBzZXJpYWxpemF0aW9uCiAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgbmV3IE9iamVjdE91dHB1dFN0cmVhbShERVZfTlVMTCkud3Jp\ndGVPYmplY3Qob2IpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAg\nICB9IGNhdGNoIChUaHJvd2FibGUgdCkgewogICAgICAgICAgICByZXR1cm4g\nZmFsc2U7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogU2FmZWx5\nIHN0cmluZ2lmeSB0aGUgZ2l2ZW4gb2JqZWN0LgogICAgICovCiAgICBwdWJs\naWMgc3RhdGljIFN0cmluZyB0b1N0cmluZyhPYmplY3Qgb2IpIHsKICAgICAg\nICBpZiAob2IgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuICJudWxsIjsK\nCiAgICAgICAgLy8gZG9uJ3QgdGFrZSBvaWQgb2YgbmV3IG9iamVjdHMgc2lu\nY2UgaXQgY2FuIGNhdXNlIGEgZmx1c2ggaWYgYXV0by1pbmMKICAgICAgICAv\nLyBhbmQgdGhlIGlkIGlzIG1lYW5pbmdsZXNzIGFueXdheQogICAgICAgIE9i\namVjdCBvaWQgPSBnZXRPYmplY3RJZChvYik7CgogICAgICAgIGlmIChvaWQg\nIT0gbnVsbCkgewogICAgICAgICAgICBpZiAob2lkIGluc3RhbmNlb2YgSWQp\nCiAgICAgICAgICAgICAgICByZXR1cm4gb2lkLnRvU3RyaW5nKCk7CiAgICAg\nICAgICAgIFN0cmluZyBvaWRTdHJpbmcgPSBvaWQudG9TdHJpbmcoKTsKICAg\nICAgICAgICAgLy8gc29tZSBvaWRzIHN0cmluZ2lmeSB0aGVpciBjbGFzcyBu\nYW1lcy4gU29tZSBkbyBub3QuCiAgICAgICAgICAgIGlmIChvaWRTdHJpbmcu\naW5kZXhPZihvYi5nZXRDbGFzcygpLmdldE5hbWUoKSkgPT0gLTEpIHsKICAg\nICAgICAgICAgICAgIHJldHVybiBvYi5nZXRDbGFzcygpLmdldE5hbWUoKSAr\nICItIiArIG9pZFN0cmluZzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAg\nICAgICAgICAgIHJldHVybiBvaWRTdHJpbmc7CiAgICAgICAgICAgIH0KICAg\nICAgICB9CgogICAgICAgIGlmIChJbXBsSGVscGVyLmlzTWFuYWdlZFR5cGUo\nbnVsbCwgb2IuZ2V0Q2xhc3MoKSkpIHsKICAgICAgICAgICAgLy8gbmV2ZXIg\nY2FsbCB0b1N0cmluZygpIG9uIGEgUGVyc2lzdGVuY2VDYXBhYmxlLCBzaW5j\nZQogICAgICAgICAgICAvLyBpdCBtYXkgYWNjZXNzIHBlcnNpc3RlbnQgZmll\nbGRzOyBmYWxsLWJhY2sgdG8gdXNpbmcKICAgICAgICAgICAgLy8gdGhlIHN0\nYW5kYXJkIG9iamVjdCBzdHJpbmdpZmljYXRpb24gbWVjaGFuaXNtLiBOZXcK\nICAgICAgICAgICAgLy8gaW5zdGFuY2VzIHRoYXQgdXNlIHByb3h5aW5nIChw\ncm9wZXJ0eS1hY2Nlc3MgaW5zdGFuY2VzLAogICAgICAgICAgICAvLyBmb3Ig\nZXhhbXBsZSkgdGhhdCB3ZXJlIGNyZWF0ZWQgd2l0aCB0aGUgJ25ldycga2V5\nd29yZAogICAgICAgICAgICAvLyB3aWxsIG5vdCBlbmQgdXAgaW4gdGhpcyBj\nb2RlLCB3aGljaCBpcyBvayBzaW5jZSB0aGV5CiAgICAgICAgICAgIC8vIGRv\nbid0IGRvIGxhenkgbG9hZGluZyBhbnl3YXlzLCBzbyB0aGV5IHdpbGwgc3Ry\naW5naWZ5CiAgICAgICAgICAgIC8vIHNhZmVseS4KICAgICAgICAgICAgcmV0\ndXJuIG9iLmdldENsYXNzKCkuZ2V0TmFtZSgpICsgIkAiCiAgICAgICAgICAg\nICAgICArIEludGVnZXIudG9IZXhTdHJpbmcoU3lzdGVtLmlkZW50aXR5SGFz\naENvZGUob2IpKTsKICAgICAgICB9CgogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIFN0cmluZyBzID0gb2IudG9TdHJpbmcoKTsKICAgICAgICAgICAgaWYg\nKHMuaW5kZXhPZihvYi5nZXRDbGFzcygpLmdldE5hbWUoKSkgPT0gLTEpCiAg\nICAgICAgICAgICAgICBzICs9ICIgWyIgKyBvYi5nZXRDbGFzcygpLmdldE5h\nbWUoKSArICJdIjsKICAgICAgICAgICAgcmV0dXJuIHM7CiAgICAgICAgfSBj\nYXRjaCAoVGhyb3dhYmxlIHQpIHsKICAgICAgICAgICAgcmV0dXJuIG9iLmdl\ndENsYXNzKCkuZ2V0TmFtZSgpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioK\nICAgICAqIFNhZmVseSBzdHJpbmdpZnkgdGhlIGdpdmVuIG9iamVjdHMuCiAg\nICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgU3RyaW5nIHRvU3RyaW5nKENvbGxl\nY3Rpb24gZmFpbGVkKSB7CiAgICAgICAgU3RyaW5nQnVpbGRlciBidWYgPSBu\nZXcgU3RyaW5nQnVpbGRlcigpOwogICAgICAgIGJ1Zi5hcHBlbmQoIlsiKTsK\nICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9IGZhaWxlZC5pdGVyYXRvcigp\nOyBpdHIuaGFzTmV4dCgpOykgewogICAgICAgICAgICBidWYuYXBwZW5kKEV4\nY2VwdGlvbnMudG9TdHJpbmcoaXRyLm5leHQoKSkpOwogICAgICAgICAgICBp\nZiAoaXRyLmhhc05leHQoKSkKICAgICAgICAgICAgICAgIGJ1Zi5hcHBlbmQo\nIiwgIik7CiAgICAgICAgfQogICAgICAgIGJ1Zi5hcHBlbmQoIl0iKTsKICAg\nICAgICByZXR1cm4gYnVmLnRvU3RyaW5nKCk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBTdHJpbmdpZnkgdGhlIGdpdmVuIGV4Y2VwdGlvbi4KICAgICAqLwog\nICAgcHVibGljIHN0YXRpYyBTdHJpbmcgdG9TdHJpbmcoRXhjZXB0aW9uSW5m\nbyBlKSB7CiAgICAgICAgaW50IHR5cGUgPSBlLmdldFR5cGUoKTsKICAgICAg\nICBTdHJpbmdCdWlsZGVyIGJ1ZiA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7CiAg\nICAgICAgYnVmLmFwcGVuZCgiPCIpLgogICAgICAgICAgICBhcHBlbmQoT3Bl\nbkpQQVZlcnNpb24uVkVSU0lPTl9JRCkuCiAgICAgICAgICAgIGFwcGVuZCgn\nICcpLgogICAgICAgICAgICBhcHBlbmQoZS5pc0ZhdGFsKCkgPyAiZmF0YWwg\nIiA6ICJub25mYXRhbCAiKS4KICAgICAgICAgICAgYXBwZW5kICh0eXBlID09\nIEV4Y2VwdGlvbkluZm8uR0VORVJBTCA/ICJnZW5lcmFsIGVycm9yIiA6CiAg\nICAgICAgICAgICAgICB0eXBlID09IEV4Y2VwdGlvbkluZm8uSU5URVJOQUwg\nPyAiaW50ZXJuYWwgZXJyb3IiIDoKICAgICAgICAgICAgICAgIHR5cGUgPT0g\nRXhjZXB0aW9uSW5mby5TVE9SRSA/ICJzdG9yZSBlcnJvciIgOgogICAgICAg\nICAgICAgICAgdHlwZSA9PSBFeGNlcHRpb25JbmZvLlVOU1VQUE9SVEVEID8g\nInVuc3VwcG9ydGVkIGVycm9yIiA6CiAgICAgICAgICAgICAgICB0eXBlID09\nIEV4Y2VwdGlvbkluZm8uVVNFUiA/ICJ1c2VyIGVycm9yIiA6CiAgICAgICAg\nICAgICAgICAodHlwZSArICIgZXJyb3IiKSkuCiAgICAgICAgICAgIGFwcGVu\nZCgiPiAiKTsKICAgICAgICBidWYuYXBwZW5kKGUuZ2V0Q2xhc3MoKS5nZXRO\nYW1lKCkpLmFwcGVuZCgiOiAiKS4KICAgICAgICAgICAgYXBwZW5kKGUuZ2V0\nTWVzc2FnZSgpKTsKICAgICAgICBPYmplY3QgZmFpbGVkID0gZS5nZXRGYWls\nZWRPYmplY3QoKTsKICAgICAgICBpZiAoZmFpbGVkICE9IG51bGwpCiAgICAg\nICAgICAgIGJ1Zi5hcHBlbmQoU0VQKS5hcHBlbmQoIkZhaWxlZE9iamVjdDog\nIikuCiAgICAgICAgICAgICAgICBhcHBlbmQodG9TdHJpbmcoZmFpbGVkKSk7\nCiAgICAgICAgcmV0dXJuIGJ1Zi50b1N0cmluZygpOwogICAgfQoKICAgIC8q\nKgogICAgICogUHJpbnQgdGhlIHN0YWNrIHRyYWNlIG9mIHRoZSBleGNlcHRp\nb24ncyBuZXN0ZWQgdGhyb3dhYmxlcy4KICAgICAqLwogICAgcHVibGljIHN0\nYXRpYyB2b2lkIHByaW50TmVzdGVkVGhyb3dhYmxlcyhFeGNlcHRpb25JbmZv\nIGUsIFByaW50U3RyZWFtIG91dCkgewogICAgICAgIC8vIGlmIHRoaXMgaXMg\nSmF2YSAxLjQgYW5kIHRoZXJlIGlzIGV4YWN0bHkgYSBzaW5nbGUKICAgICAg\nICAvLyBleGNlcHRpb24sIHRoZW4gZGVmZXIgdG8gMS40J3MgYmVoYXZpb3Ig\nb2YgcHJpbnRpbmcKICAgICAgICAvLyBvdXQgdGhlIHJlc3VsdCBvZiBnZXRD\nYXVzZSgpLiBUaGlzIGRlZmVycmFsIGhhcHBlbnMgaW4KICAgICAgICAvLyB0\naGUgY2FsbGluZyBjb2RlLgogICAgICAgIFRocm93YWJsZVtdIG5lc3RlZCA9\nIGUuZ2V0TmVzdGVkVGhyb3dhYmxlcygpOwogICAgICAgIGludCBpID0gKEph\ndmFWZXJzaW9ucy5WRVJTSU9OID49IDQpID8gMSA6IDA7CiAgICAgICAgaWYg\nKGkgPCBuZXN0ZWQubGVuZ3RoKSB7CiAgICAgICAgICAgIG91dC5wcmludGxu\nKCJOZXN0ZWRUaHJvd2FibGVzOiIpOwogICAgICAgICAgICBmb3IgKDsgaSA8\nIG5lc3RlZC5sZW5ndGg7IGkrKykKICAgICAgICAgICAgICAgIC8vIGd1YXJk\nIGFnYWluc3QgYSBuYXN0eSBudWxsIGluIHRoZSBhcnJheQogICAgICAgICAg\nICAgICAgaWYgKG5lc3RlZFtpXSAhPSBudWxsKQogICAgICAgICAgICAgICAg\nICAgIG5lc3RlZFtpXS5wcmludFN0YWNrVHJhY2Uob3V0KTsKICAgICAgICB9\nCiAgICB9CgogICAgLyoqCiAgICAgKiBQcmludCB0aGUgc3RhY2sgdHJhY2Ug\nb2YgdGhlIGV4Y2VwdGlvbidzIG5lc3RlZCB0aHJvd2FibGVzLgogICAgICov\nCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgcHJpbnROZXN0ZWRUaHJvd2FibGVz\nKEV4Y2VwdGlvbkluZm8gZSwgUHJpbnRXcml0ZXIgb3V0KSB7CiAgICAgICAg\nLy8gaWYgdGhpcyBpcyBKYXZhIDEuNCBhbmQgdGhlcmUgaXMgZXhhY3RseSBh\nIHNpbmdsZQogICAgICAgIC8vIGV4Y2VwdGlvbiwgdGhlbiBkZWZlciB0byAx\nLjQncyBiZWhhdmlvciBvZiBwcmludGluZwogICAgICAgIC8vIG91dCB0aGUg\ncmVzdWx0IG9mIGdldENhdXNlKCkuIFRoaXMgZGVmZXJyYWwgaGFwcGVucyBp\nbgogICAgICAgIC8vIHRoZSBjYWxsaW5nIGNvZGUuCiAgICAgICAgVGhyb3dh\nYmxlW10gbmVzdGVkID0gZS5nZXROZXN0ZWRUaHJvd2FibGVzKCk7CiAgICAg\nICAgaW50IGkgPSAoSmF2YVZlcnNpb25zLlZFUlNJT04gPj0gNCkgPyAxIDog\nMDsKICAgICAgICBpZiAoaSA8IG5lc3RlZC5sZW5ndGgpIHsKICAgICAgICAg\nICAgb3V0LnByaW50bG4oIk5lc3RlZFRocm93YWJsZXM6Iik7CiAgICAgICAg\nICAgIGZvciAoOyBpIDwgbmVzdGVkLmxlbmd0aDsgaSsrKQogICAgICAgICAg\nICAgICAgLy8gZ3VhcmQgYWdhaW5zdCBhIG5hc3R5IG51bGwgaW4gdGhlIGFy\ncmF5CiAgICAgICAgICAgICAgICBpZiAobmVzdGVkW2ldICE9IG51bGwpCiAg\nICAgICAgICAgICAgICAgICAgbmVzdGVkW2ldLnByaW50U3RhY2tUcmFjZShv\ndXQpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIENvbnZlcnQg\ndGhlIHNwZWNpZmllZCBmYWlsZWQgb2JqZWN0IGludG8gYSBzZXJpYWxpemFi\nbGUKICAgICAqIG9iamVjdCBmb3Igd2hlbiB3ZSBhcmUgc2VyaWFsaXppbmcg\nYW4gRXhjZXB0aW9uLiBJdCB3aWxsCiAgICAgKiB0cnkgdGhlIGZvbGxvd2lu\nZzoKICAgICAqIDx1bD4KICAgICAqIDxsaT5pZiB0aGUgb2JqZWN0IGNhbiBi\nZSBzZXJpYWxpemVkLCByZXR1cm4gdGhlIG9iamVjdCBpdHNlbGY8L2xpPgog\nICAgICogPGxpPmlmIHRoZSBvYmplY3QgaGFzIGEgc2VyaWFsaXphYmxlIG9p\nZCwgcmV0dXJuIHRoZSBvaWQ8L2xpPgogICAgICogPGxpPmlmIHRoZSBvYmpl\nY3QgaGFzIGEgbm9uLXNlcmlhbGl6YWJsZSBvaWQsIHJldHVybiB0aGUgb2lk\nJ3MKICAgICAqIHRvU3RyaW5nIGFuZCB0aGUgb2JqZWN0IGNsYXNzPC9saT4K\nICAgICAqIDxsaT5yZXR1cm4gdGhlIG9iamVjdCdzIHRvU3RyaW5nPC9saT4K\nICAgICAqIDwvdWw+CiAgICAgKgogICAgICogQHBhcmFtIG9iIHRoZSBvYmpl\nY3QgdG8gY29udmVydAogICAgICogQHJldHVybiBzb21lIHNlcmlhbGl6ZWQg\ncmVwcmVzZW50YXRpb24gb2YgdGhlIG9iamVjdAogICAgICovCiAgICBwdWJs\naWMgc3RhdGljIE9iamVjdCByZXBsYWNlRmFpbGVkT2JqZWN0KE9iamVjdCBv\nYikgewogICAgICAgIGlmIChvYiA9PSBudWxsKQogICAgICAgICAgICByZXR1\ncm4gbnVsbDsKICAgICAgICBpZiAoaXNTZXJpYWxpemFibGUob2IpKQogICAg\nICAgICAgICByZXR1cm4gb2I7CgogICAgICAgIC8vIGRvbid0IHRha2Ugb2lk\nIG9mIG5ldyBvYmplY3RzIHNpbmNlIGl0IGNhbiBjYXVzZSBhIGZsdXNoIGlm\nIGF1dG8taW5jCiAgICAgICAgLy8gYW5kIHRoZSBpZCBpcyBtZWFuaW5nbGVz\ncyBhbnl3YXkKICAgICAgICBPYmplY3Qgb2lkID0gZ2V0T2JqZWN0SWQob2Ip\nOwogICAgICAgIGlmIChvaWQgIT0gbnVsbCAmJiBpc1NlcmlhbGl6YWJsZShv\naWQpKQogICAgICAgICAgICByZXR1cm4gb2lkOwoKICAgICAgICAvLyBsYXN0\nIGRpdGNoOiBzdHJpbmdpZnkgdGhlIG9iamVjdAogICAgICAgIHJldHVybiB0\nb1N0cmluZyhvYik7CiAgICB9CgogICAgLyoqCiAgICAgKiBDb252ZXJ0IHRo\nZSBzcGVjaWZpZWQgdGhyb3dhYmxlcyBpbnRvIGEgc2VyaWFsemFibGUgYXJy\nYXkuIElmCiAgICAgKiBhbnkgb2YgdGhlIG5lc3RlZCB0aHJvd2FibGVzIGNh\nbm5vdCBiZSBzZXJpYWxpemVkLCB0aGV5IHdpbGwKICAgICAqIGJlIGNvbnZl\ncnRlZCBpbnRvIGEgRXhjZXB0aW9uIHdpdGggdGhlIG9yaWdpbmFsIG1lc3Nh\nZ2UuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgVGhyb3dhYmxlW10gcmVw\nbGFjZU5lc3RlZFRocm93YWJsZXMoVGhyb3dhYmxlW10gbmVzdGVkKSB7CiAg\nICAgICAgaWYgKG5lc3RlZCA9PSBudWxsIHx8IG5lc3RlZC5sZW5ndGggPT0g\nMCkKICAgICAgICAgICAgcmV0dXJuIG5lc3RlZDsKICAgICAgICBpZiAoaXNT\nZXJpYWxpemFibGUobmVzdGVkKSkKICAgICAgICAgICAgcmV0dXJuIG5lc3Rl\nZDsKCiAgICAgICAgVGhyb3dhYmxlW10gbmV3TmVzdGVkID0gbmV3IFRocm93\nYWJsZVtuZXN0ZWQubGVuZ3RoXTsKICAgICAgICBmb3IgKGludCBpID0gMDsg\naSA8IG5lc3RlZC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAoaXNT\nZXJpYWxpemFibGUobmVzdGVkW2ldKSkKICAgICAgICAgICAgICAgIG5ld05l\nc3RlZFtpXSA9IG5lc3RlZFtpXTsKICAgICAgICAgICAgZWxzZQogICAgICAg\nICAgICAgICAgLy8gZ3VhcmQgYWdhaW5zdCBhIG5hc3R5IG51bGwgaW4gdGhl\nIGFycmF5IGJ5IHVzaW5nIHZhbHVlT2YKICAgICAgICAgICAgICAgIC8vIGlu\nc3RlYWQgb2YgdG9TdHJpbmcgdG8gcHJldmVudCB0aHJvd2luZyB5ZXQgYW5v\ndGhlciAKICAgICAgICAgICAgICAgIC8vIGV4Y2VwdGlvbgogICAgICAgICAg\nICAgICAgbmV3TmVzdGVkW2ldID0gbmV3IEV4Y2VwdGlvbihTdHJpbmcudmFs\ndWVPZihuZXN0ZWRbaV0pKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG5l\nd05lc3RlZDsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgb2Jq\nZWN0IGlkIGZvciA8Y29kZT5vYjwvY29kZT4gaWYgaXQgaGFzIG9uZSwgb3IK\nICAgICAqIDxjb2RlPm51bGw8L2NvZGU+IG90aGVyd2lzZS4KICAgICAqLwog\nICAgcHJpdmF0ZSBzdGF0aWMgT2JqZWN0IGdldE9iamVjdElkKE9iamVjdCBv\nYikgewogICAgICAgIGlmICghSW1wbEhlbHBlci5pc01hbmFnZWFibGUob2Ip\nKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKCiAgICAgICAgUGVyc2lzdGVu\nY2VDYXBhYmxlIHBjID0gSW1wbEhlbHBlci50b1BlcnNpc3RlbmNlQ2FwYWJs\nZShvYiwgbnVsbCk7CiAgICAgICAgaWYgKHBjID09IG51bGwgfHwgcGMucGNJ\nc05ldygpKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICBlbHNl\nCiAgICAgICAgICAgIHJldHVybiBwYy5wY0ZldGNoT2JqZWN0SWQoKTsKCX0K\nICAgIAogICAgcHVibGljIHN0YXRpYyBTdHJpbmcgdG9DbGFzc05hbWUoQ2xh\nc3M8Pz4gY2xzKSB7CiAgICAgICAgaWYgKGNscyA9PSBudWxsKSByZXR1cm4g\nIiI7CiAgICAgICAgaWYgKGNscy5pc0FycmF5KCkpCiAgICAgICAgICAgIHJl\ndHVybiB0b0NsYXNzTmFtZShjbHMuZ2V0Q29tcG9uZW50VHlwZSgpKSsiW10i\nOwogICAgICAgIHJldHVybiBjbHMuZ2V0TmFtZSgpOwogICAgfQogICAgCiAg\nICBwdWJsaWMgc3RhdGljIFN0cmluZyB0b0NsYXNzTmFtZXMoQ29sbGVjdGlv\nbjw/IGV4dGVuZHMgQ2xhc3M8Pz4+IGNsYXNzZXMpIHsKICAgICAgICBpZiAo\nY2xhc3NlcyA9PSBudWxsKSByZXR1cm4gIiI7CiAgICAgICAgU3RyaW5nQnVp\nbGRlciBidWZmZXIgPSBuZXcgU3RyaW5nQnVpbGRlcigpOwogICAgICAgIGZv\nciAoQ2xhc3M8Pz4gY2xzIDogY2xhc3NlcykgewogICAgICAgICAgICBidWZm\nZXIuYXBwZW5kKCJcclxuIikuYXBwZW5kKHRvQ2xhc3NOYW1lKGNscykpOwog\nICAgICAgIH0KICAgICAgICByZXR1cm4gYnVmZmVyLnRvU3RyaW5nKCk7CiAg\nICB9Cn0K\n","encoding":"base64"}

