{"sha":"70f020a9f41a3cd06f8ddfb3dfa0943d6bc76c70","node_id":"MDQ6QmxvYjIwNjM2NDo3MGYwMjBhOWY0MWEzY2QwNmY4ZGRmYjNkZmEwOTQzZDZiYzc2Yzcw","size":5282,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/70f020a9f41a3cd06f8ddfb3dfa0943d6bc76c70","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbDsKCmltcG9ydCBqYXZh\nLnNlY3VyaXR5LkFjY2Vzc0NvbnRyb2xsZXI7CgppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmtlcm5lbC5PcGVuSlBBU3RhdGVNYW5hZ2VyOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkoyRG9Qcml2SGVscGVyOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkxvY2FsaXplcjsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkNsYXNzTWV0YURhdGE7\nCgovKioKICogVXRpbGl0eSBtZXRob2RzIGZvciBtYW5hZ2luZyBwcm94aWVz\nLgogKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKi8KcHVibGljIGNsYXNzIFBy\nb3hpZXMgewoKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvY2FsaXplciBf\nbG9jID0gTG9jYWxpemVyLmZvclBhY2thZ2UoUHJveGllcy5jbGFzcyk7Cgog\nICAgLyoqCiAgICAgKiBVc2VkIGJ5IHByb3h5IHR5cGVzIHRvIGNoZWNrIGlm\nIHRoZSBnaXZlbiBvd25lcnMgYW5kIGZpZWxkIG5hbWVzCiAgICAgKiBhcmUg\nZXF1aXZhbGVudC4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBib29sZWFu\nIGlzT3duZXIoUHJveHkgcHJveHksIE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20s\nCiAgICAgICAgaW50IGZpZWxkKSB7CiAgICAgICAgcmV0dXJuIHByb3h5Lmdl\ndE93bmVyKCkgPT0gc20gJiYgcHJveHkuZ2V0T3duZXJGaWVsZCgpID09IGZp\nZWxkOwogICAgfQoKICAgIC8qKgogICAgICogVXNlZCBieSBwcm94eSB0eXBl\ncyB0byBjaGVjayB0aGF0IGFuIGF0dGVtcHQgdG8gYWRkIGEgbmV3IHZhbHVl\nIGlzIGxlZ2FsLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgYXNz\nZXJ0QWxsb3dlZFR5cGUoT2JqZWN0IHZhbHVlLCBDbGFzcyBhbGxvd2VkKSB7\nCiAgICAgICAgaWYgKHZhbHVlICE9IG51bGwgJiYgYWxsb3dlZCAhPSBudWxs\nICYmICFhbGxvd2VkLmlzSW5zdGFuY2UodmFsdWUpKSB7CiAgICAgICAgICAg\nIHRocm93IG5ldyBVc2VyRXhjZXB0aW9uKF9sb2MuZ2V0KCJiYWQtZWxlbS10\neXBlIiwgbmV3IE9iamVjdFtdewogICAgICAgICAgICAgICAgQWNjZXNzQ29u\ndHJvbGxlci5kb1ByaXZpbGVnZWQoCiAgICAgICAgICAgICAgICAgICAgSjJE\nb1ByaXZIZWxwZXIuZ2V0Q2xhc3NMb2FkZXJBY3Rpb24oYWxsb3dlZCkpLAog\nICAgICAgICAgICAgICAgYWxsb3dlZCwKICAgICAgICAgICAgICAgIEFjY2Vz\nc0NvbnRyb2xsZXIuZG9Qcml2aWxlZ2VkKAogICAgICAgICAgICAgICAgICAg\nIEoyRG9Qcml2SGVscGVyLmdldENsYXNzTG9hZGVyQWN0aW9uKHZhbHVlLmdl\ndENsYXNzKCkpKSwKICAgICAgICAgICAgICAgIHZhbHVlLmdldENsYXNzKCkK\nICAgICAgICAgICAgfSkpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAg\nICAqIFVzZWQgYnkgcHJveHkgdHlwZXMgdG8gZGlydHkgdGhlaXIgb3duZXIu\nCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBkaXJ0eShQcm94eSBw\ncm94eSwgYm9vbGVhbiBzdG9wVHJhY2tpbmcpIHsKICAgICAgICBpZiAocHJv\neHkuZ2V0T3duZXIoKSAhPSBudWxsKQogICAgICAgICAgICBwcm94eS5nZXRP\nd25lcigpLmRpcnR5KHByb3h5LmdldE93bmVyRmllbGQoKSk7CiAgICAgICAg\naWYgKHN0b3BUcmFja2luZyAmJiBwcm94eS5nZXRDaGFuZ2VUcmFja2VyKCkg\nIT0gbnVsbCkKICAgICAgICAgICAgcHJveHkuZ2V0Q2hhbmdlVHJhY2tlcigp\nLnN0b3BUcmFja2luZygpOwogICAgfQoKICAgIC8qKgogICAgICogVXNlZCBi\neSBwcm94eSB0eXBlcyB0byBub3RpZnkgY29sbGVjdGlvbiBvd25lciBvbiBl\nbGVtZW50IHJlbW92YWwuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgdm9p\nZCByZW1vdmVkKFByb3h5IHByb3h5LCBPYmplY3QgcmVtb3ZlZCwgYm9vbGVh\nbiBrZXkpIHsKICAgICAgICBpZiAocHJveHkuZ2V0T3duZXIoKSAhPSBudWxs\nICYmIHJlbW92ZWQgIT0gbnVsbCkKICAgICAgICAgICAgcHJveHkuZ2V0T3du\nZXIoKS5yZW1vdmVkKHByb3h5LmdldE93bmVyRmllbGQoKSwgcmVtb3ZlZCwg\na2V5KTsKICAgIH0KCiAgICAvKioKICAgICAqIFVzZWQgYnkgcHJveHkgdHlw\nZXMgdG8gc2VyaWFsaXplIG5vbi1wcm94eSB2ZXJzaW9ucy4KICAgICAqLwog\nICAgcHVibGljIHN0YXRpYyBPYmplY3Qgd3JpdGVSZXBsYWNlKFByb3h5IHBy\nb3h5LCBib29sZWFuIGRldGFjaGFibGUpIHsKICAgICAgICAvKiBPUEVOSlBB\nLTEwOTcgUmVtb3ZlICRwcm94eSBjbGFzc2VzIGR1cmluZyBzZXJpYWxpemF0\naW9uIGJhc2VkIG9uOgogICAgICAgICAqICAgMSkgTm8gUHJveHksIHRoZW4g\ncmV0dXJuIGFzLWlzCiAgICAgICAgICogICAyKSBSdW50aW1lIGNyZWF0ZWQg\ncHJveHkgKCFkZXRhY2hhYmxlKSwgdGhlbiB1bnByb3h5CiAgICAgICAgICog\nICAzKSBObyBTdGF0ZU1hbmFnZXIgKERldGFjaGVkU3RhdGVGaWVsZD09ZmFs\nc2UpLCB0aGVuIHJldHVybiBhcy1pcwogICAgICAgICAqICAgNCkgSWYgZGV0\nYWNoZWQsIHRoZW4gdW5wcm94eQogICAgICAgICAqICAgNSkgSWYgQ2xhc3NN\nZXRhRGF0YSBleGlzdHMgYW5kIERldGFjaGVkU3RhdGVGaWVsZCAhPSBUUlVF\nCiAgICAgICAgICogICAgICAoZGVmYXVsdCBvZiBEZXRhY2hlZFN0YXRlRmll\nbGQ9PXRyYW5zaWVudCksIHRoZW4gdW5wcm94eQogICAgICAgICAqICAgNikg\nRWxzZSwgcmV0dXJuIGFzLWlzCiAgICAgICAgICogCiAgICAgICAgICogT3Jp\nZ2luYWwgY29kZSAtCiAgICAgICAgICogICAxKSBSdW50aW1lIGNyZWF0ZWQg\ncHJveHkgKCFkZXRhY2hhYmxlKSwgdGhlbiB1bnByb3h5CiAgICAgICAgICog\nICAyKSBObyBQcm94eSwgdGhlbiByZXR1cm4gYXMtaXMKICAgICAgICAgKiAg\nIDMpIE5vIFN0YXRlTWFuYWdlciAoRGV0YWNoZWRTdGF0ZUZpZWxkPT1mYWxz\nZSksIHRoZW4gcmV0dXJuIGFzLWlzCiAgICAgICAgICogICA0KSBJZiBkZXRh\nY2hlZCwgdGhlbiByZXR1cm4gYXMtaXMgPC0tLSBFUlJPUiBhcyBFTS5jbGVh\ncigpIG1hcmtzCiAgICAgICAgICogICAgICBlbnRpdHkgYXMgZGV0YWNoZWQg\nYnV0IGRvZXNuJ3QgcmVtb3ZlIGFueSAkcHJveHkgdXNhZ2UKICAgICAgICAg\nKiAgIDUpIEVsc2UsIHVucHJveHkKICAgICAgICAgKiAKICAgICAgICAgKiAg\naWYgKGRldGFjaGFibGUgJiYgKHByb3h5ID09IG51bGwgfHwgcHJveHkuZ2V0\nT3duZXIoKSA9PSBudWxsIAogICAgICAgICAqICAgICAgfHwgcHJveHkuZ2V0\nT3duZXIoKS5pc0RldGFjaGVkKCkpKQogICAgICAgICAqICAgICAgcmV0dXJu\nIHByb3h5OwogICAgICAgICAqCiAgICAgICAgICovCiAgICAgICAgaWYgKHBy\nb3h5ID09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuIHByb3h5OwogICAg\nICAgIH0gZWxzZSBpZiAoIWRldGFjaGFibGUpIHsKICAgICAgICAgICAgLy8g\nT1BFTkpQQS0xNTcxIC0gdXNpbmcgb3VyIHJ1bnRpbWUgZ2VuZXJhdGVkIHBy\nb3hpZXMsIHNvIHJlbW92ZSBhbnkgJHByb3h5CiAgICAgICAgICAgIHJldHVy\nbiBwcm94eS5jb3B5KHByb3h5KTsKICAgICAgICB9IGVsc2UgaWYgKHByb3h5\nLmdldE93bmVyKCkgPT0gbnVsbCkgewogICAgICAgICAgICAvLyBubyBTdGF0\nZU1hbmFnZXIgKERldGFjaGVkU3RhdGVGaWVsZD09ZmFsc2UpLCBzbyBubyAk\ncHJveHkgdG8gcmVtb3ZlCiAgICAgICAgICAgIHJldHVybiBwcm94eTsKICAg\nICAgICB9IGVsc2UgaWYgKHByb3h5LmdldE93bmVyKCkuaXNEZXRhY2hlZCgp\nKSB7CiAgICAgICAgICAgIC8vIGFscmVhZHkgZGV0YWNoZWQsIHNvIHJlbW92\nZSBhbnkgJHByb3h5CiAgICAgICAgICAgIHJldHVybiBwcm94eS5jb3B5KHBy\nb3h5KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyB1c2luZyBh\nIFN0YXRlTWFuYWdlciwgc28gZGV0ZXJtaW5lIHdoYXQgRGV0YWNoZWRTdGF0\nZSBpcyBiZWluZyB1c2VkCiAgICAgICAgICAgIE9wZW5KUEFTdGF0ZU1hbmFn\nZXIgc20gPSBwcm94eS5nZXRPd25lcigpOyAgLy8gIW51bGwgY2hlY2tlZCBm\nb3IgYWJvdmUKICAgICAgICAgICAgQ2xhc3NNZXRhRGF0YSBtZXRhID0gc20u\nZ2V0TWV0YURhdGEoKTsgICAgICAvLyBpZiBudWxsLCBubyBwcm94aWVzPwog\nICAgICAgICAgICBpZiAoKG1ldGEgIT0gbnVsbCkgJiYgKCFCb29sZWFuLlRS\nVUUuZXF1YWxzKG1ldGEudXNlc0RldGFjaGVkU3RhdGUoKSkpKSB7CiAgICAg\nICAgICAgICAgICAvLyBjb25maWd1cmVkIHRvIHVzZSB0cmFuc2llbnQgKG51\nbGwpIG9yIG5vIChGQUxTRSkgU3RhdGVNYW5nZXIsIHNvIHJlbW92ZSBhbnkg\nJHByb3h5CiAgICAgICAgICAgICAgICByZXR1cm4gcHJveHkuY29weShwcm94\neSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBE\nZXRhY2hlZFN0YXRlRmllbGQ9PXRydWUsIHdoaWNoIG1lYW5zIHRvIGtlZXAg\ndGhlIFNNIGFuZCAkcHJveHkgaW4gdGhlIHNlcmlhbGl6ZWQgb2JqZWN0cwog\nICAgICAgICAgICAgICAgcmV0dXJuIHByb3h5OwogICAgICAgICAgICB9CiAg\nICAgICAgfQogICAgfQp9Cgo=\n","encoding":"base64"}

