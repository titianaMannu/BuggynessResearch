{"sha":"396c0e9ca85baad5aa907c89f7baa4af8e531c44","node_id":"MDQ6QmxvYjIwNjM2NDozOTZjMGU5Y2E4NWJhYWQ1YWE5MDdjODlmN2JhYTRhZjhlNTMxYzQ0","size":12204,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/396c0e9ca85baad5aa907c89f7baa4af8e531c44","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2U7CgppbXBv\ncnQgamF2YS5sYW5nLnJlZmxlY3QuQ29uc3RydWN0b3I7CmltcG9ydCBqYXZh\nLmxhbmcucmVmbGVjdC5JbnZvY2F0aW9uVGFyZ2V0RXhjZXB0aW9uOwppbXBv\ncnQgamF2YS51dGlsLkNvbGxlY3Rpb25zOwppbXBvcnQgamF2YS51dGlsLkhh\nc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuTWFwOwppbXBvcnQgamF2YS51dGls\nLlNldDsKCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5DYWNoZTsKaW1wb3J0\nIGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXJGYWN0b3J5OwppbXBv\ncnQgamF2YXgucGVyc2lzdGVuY2UuUGVyc2lzdGVuY2VVbml0VXRpbDsKaW1w\nb3J0IGphdmF4LnBlcnNpc3RlbmNlLnNwaS5Mb2FkU3RhdGU7CgppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmNvbmYuT3BlbkpQQUNvbmZpZ3VyYXRpb247\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkF1dG9EZXRhY2g7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkJyb2tlcjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuQnJva2VyRmFjdG9yeTsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuRGVsZWdhdGluZ0Jy\nb2tlckZhY3Rvcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVs\nLkRlbGVnYXRpbmdGZXRjaENvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEua2VybmVsLkZldGNoQ29uZmlndXJhdGlvbjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5Db25maWd1cmF0aW9uczsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5WYWx1ZTsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5DbG9zZWFibGU7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmNyaXRlcmlh\nLkNyaXRlcmlhQnVpbGRlckltcGw7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEucGVyc2lzdGVuY2UuY3JpdGVyaWEuT3BlbkpQQUNyaXRlcmlhQnVpbGRl\ncjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5tZXRh\nLk1ldGFtb2RlbEltcGw7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVy\nc2lzdGVuY2UucXVlcnkuT3BlbkpQQVF1ZXJ5QnVpbGRlcjsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5xdWVyeS5RdWVyeUJ1aWxk\nZXJJbXBsOwoKLyoqCiAqIEltcGxlbWVudGF0aW9uIG9mIHtAbGluayBFbnRp\ndHlNYW5hZ2VyRmFjdG9yeX0gdGhhdCBhY3RzIGFzIGEKICogZmFjYWRlIHRv\nIGEge0BsaW5rIEJyb2tlckZhY3Rvcnl9LgogKgogKiBAYXV0aG9yIE1hcmMg\nUHJ1ZCdob21tZWF1eAogKiBAbm9qYXZhZG9jCiAqLwpAU3VwcHJlc3NXYXJu\naW5ncygic2VyaWFsIikKcHVibGljIGNsYXNzIEVudGl0eU1hbmFnZXJGYWN0\nb3J5SW1wbAogICAgaW1wbGVtZW50cyBPcGVuSlBBRW50aXR5TWFuYWdlckZh\nY3RvcnksIE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSSwKICAgIENs\nb3NlYWJsZSwgUGVyc2lzdGVuY2VVbml0VXRpbCB7CgogICAgcHJpdmF0ZSBz\ndGF0aWMgZmluYWwgTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6ZXIuZm9yUGFj\na2FnZQogICAgICAgIChFbnRpdHlNYW5hZ2VyRmFjdG9yeUltcGwuY2xhc3Mp\nOwoKICAgIHByaXZhdGUgRGVsZWdhdGluZ0Jyb2tlckZhY3RvcnkgX2ZhY3Rv\ncnkgPSBudWxsOwogICAgcHJpdmF0ZSB0cmFuc2llbnQgQ29uc3RydWN0b3I8\nRmV0Y2hQbGFuPiBfcGxhbiA9IG51bGw7CiAgICBwcml2YXRlIHRyYW5zaWVu\ndCBTdG9yZUNhY2hlIF9jYWNoZSA9IG51bGw7CiAgICBwcml2YXRlIHRyYW5z\naWVudCBRdWVyeVJlc3VsdENhY2hlIF9xdWVyeUNhY2hlID0gbnVsbDsKICAg\nIHByaXZhdGUgdHJhbnNpZW50IE1ldGFtb2RlbEltcGwgX21ldGFNb2RlbDsK\nICAgIAogICAgLyoqCiAgICAgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIHByb3Zp\nZGVkIGZvciBhdXRvLWluc3RhbnRpYXRpb24uCiAgICAgKi8KICAgIHB1Ymxp\nYyBFbnRpdHlNYW5hZ2VyRmFjdG9yeUltcGwoKSB7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBTdXBwbHkgZGVsZWdhdGUgb24gY29uc3RydWN0aW9uLgogICAg\nICovCiAgICBwdWJsaWMgRW50aXR5TWFuYWdlckZhY3RvcnlJbXBsKEJyb2tl\nckZhY3RvcnkgZmFjdG9yeSkgewogICAgICAgIHNldEJyb2tlckZhY3Rvcnko\nZmFjdG9yeSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBEZWxlZ2F0ZS4KICAg\nICAqLwogICAgcHVibGljIEJyb2tlckZhY3RvcnkgZ2V0QnJva2VyRmFjdG9y\neSgpIHsKICAgICAgICByZXR1cm4gX2ZhY3RvcnkuZ2V0RGVsZWdhdGUoKTsK\nICAgIH0KCiAgICAvKioKICAgICAqIERlbGVnYXRlIG11c3QgYmUgcHJvdmlk\nZWQgYmVmb3JlIHVzZS4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0QnJv\na2VyRmFjdG9yeShCcm9rZXJGYWN0b3J5IGZhY3RvcnkpIHsKICAgICAgICBf\nZmFjdG9yeSA9IG5ldyBEZWxlZ2F0aW5nQnJva2VyRmFjdG9yeShmYWN0b3J5\nLAogICAgICAgICAgICBQZXJzaXN0ZW5jZUV4Y2VwdGlvbnMuVFJBTlNMQVRP\nUik7CiAgICB9CgogICAgcHVibGljIE9wZW5KUEFDb25maWd1cmF0aW9uIGdl\ndENvbmZpZ3VyYXRpb24oKSB7CiAgICAgICAgcmV0dXJuIF9mYWN0b3J5Lmdl\ndENvbmZpZ3VyYXRpb24oKTsKICAgIH0KICAgIAogICAgcHVibGljIE1hcDxT\ndHJpbmcsT2JqZWN0PiBnZXRQcm9wZXJ0aWVzKCkgewogICAgICAgIE1hcDxT\ndHJpbmcsT2JqZWN0PiBwcm9wcyA9IF9mYWN0b3J5LmdldFByb3BlcnRpZXMo\nKTsKICAgICAgICAvLyBjb252ZXJ0IHRvIHVzZXIgcmVhZGFibGUgdmFsdWVz\nCiAgICAgICAgcHJvcHMucHV0QWxsKGNyZWF0ZUVudGl0eU1hbmFnZXIoKS5n\nZXRQcm9wZXJ0aWVzKCkpOwogICAgICAgIHJldHVybiBwcm9wczsKICAgIH0K\nCiAgICBwdWJsaWMgT2JqZWN0IHB1dFVzZXJPYmplY3QoT2JqZWN0IGtleSwg\nT2JqZWN0IHZhbCkgewogICAgICAgIHJldHVybiBfZmFjdG9yeS5wdXRVc2Vy\nT2JqZWN0KGtleSwgdmFsKTsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IGdl\ndFVzZXJPYmplY3QoT2JqZWN0IGtleSkgewogICAgICAgIHJldHVybiBfZmFj\ndG9yeS5nZXRVc2VyT2JqZWN0KGtleSk7CiAgICB9CgogICAgcHVibGljIFN0\nb3JlQ2FjaGUgZ2V0U3RvcmVDYWNoZSgpIHsKICAgICAgICBfZmFjdG9yeS5s\nb2NrKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKF9jYWNoZSA9\nPSBudWxsKSB7CiAgICAgICAgICAgICAgICBPcGVuSlBBQ29uZmlndXJhdGlv\nbiBjb25mID0gX2ZhY3RvcnkuZ2V0Q29uZmlndXJhdGlvbigpOwogICAgICAg\nICAgICAgICAgX2NhY2hlID0gbmV3IFN0b3JlQ2FjaGVJbXBsKHRoaXMsCiAg\nICAgICAgICAgICAgICAgICAgY29uZi5nZXREYXRhQ2FjaGVNYW5hZ2VySW5z\ndGFuY2UoKS5nZXRTeXN0ZW1EYXRhQ2FjaGUoKSk7CiAgICAgICAgICAgIH0K\nICAgICAgICAgICAgcmV0dXJuIF9jYWNoZTsKICAgICAgICB9IGZpbmFsbHkg\newogICAgICAgICAgICBfZmFjdG9yeS51bmxvY2soKTsKICAgICAgICB9CiAg\nICB9CgogICAgcHVibGljIFN0b3JlQ2FjaGUgZ2V0U3RvcmVDYWNoZShTdHJp\nbmcgY2FjaGVOYW1lKSB7CiAgICAgICAgcmV0dXJuIG5ldyBTdG9yZUNhY2hl\nSW1wbCh0aGlzLCBfZmFjdG9yeS5nZXRDb25maWd1cmF0aW9uKCkuCiAgICAg\nICAgICAgIGdldERhdGFDYWNoZU1hbmFnZXJJbnN0YW5jZSgpLmdldERhdGFD\nYWNoZShjYWNoZU5hbWUsIHRydWUpKTsKICAgIH0KCiAgICBwdWJsaWMgUXVl\ncnlSZXN1bHRDYWNoZSBnZXRRdWVyeVJlc3VsdENhY2hlKCkgewogICAgICAg\nIF9mYWN0b3J5LmxvY2soKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBp\nZiAoX3F1ZXJ5Q2FjaGUgPT0gbnVsbCkKICAgICAgICAgICAgICAgIF9xdWVy\neUNhY2hlID0gbmV3IFF1ZXJ5UmVzdWx0Q2FjaGVJbXBsKF9mYWN0b3J5Lgog\nICAgICAgICAgICAgICAgICAgIGdldENvbmZpZ3VyYXRpb24oKS5nZXREYXRh\nQ2FjaGVNYW5hZ2VySW5zdGFuY2UoKS4KICAgICAgICAgICAgICAgICAgICBn\nZXRTeXN0ZW1RdWVyeUNhY2hlKCkpOwogICAgICAgICAgICByZXR1cm4gX3F1\nZXJ5Q2FjaGU7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgX2Zh\nY3RvcnkudW5sb2NrKCk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBP\ncGVuSlBBRW50aXR5TWFuYWdlclNQSSBjcmVhdGVFbnRpdHlNYW5hZ2VyKCkg\newogICAgICAgIHJldHVybiBjcmVhdGVFbnRpdHlNYW5hZ2VyKG51bGwpOwog\nICAgfQoKICAgIC8qKgogICAgICogQ3JlYXRlcyBhbmQgY29uZmlndXJlcyBh\nIGVudGl0eSBtYW5hZ2VyIHdpdGggdGhlIGdpdmVuIHByb3BlcnRpZXMuCiAg\nICAgKiAgCiAgICAgKiBUaGUgcHJvcGVydHkga2V5cyBpbiB0aGUgZ2l2ZW4g\nbWFwIGNhbiBiZSBlaXRoZXIgcXVhbGlmaWVkIG9yIG5vdC4KICAgICAqIAog\nICAgICogQHJldHVybiBsaXN0IG9mIGV4Y2VwdGlvbnMgcmFpc2VkIG9yIGVt\ncHR5IGxpc3QuCiAgICAgKi8KICAgIHB1YmxpYyBPcGVuSlBBRW50aXR5TWFu\nYWdlclNQSSBjcmVhdGVFbnRpdHlNYW5hZ2VyKE1hcCBwcm9wcykgewogICAg\nICAgIGlmIChwcm9wcyA9PSBudWxsKQogICAgICAgICAgICBwcm9wcyA9IENv\nbGxlY3Rpb25zLkVNUFRZX01BUDsKICAgICAgICBlbHNlIGlmICghcHJvcHMu\naXNFbXB0eSgpKQogICAgICAgICAgICBwcm9wcyA9IG5ldyBIYXNoTWFwKHBy\nb3BzKTsKCiAgICAgICAgT3BlbkpQQUNvbmZpZ3VyYXRpb24gY29uZiA9IGdl\ndENvbmZpZ3VyYXRpb24oKTsKICAgICAgICBTdHJpbmcgdXNlciA9IChTdHJp\nbmcpIENvbmZpZ3VyYXRpb25zLnJlbW92ZVByb3BlcnR5KCJDb25uZWN0aW9u\nVXNlck5hbWUiLCBwcm9wcyk7CiAgICAgICAgaWYgKHVzZXIgPT0gbnVsbCkK\nICAgICAgICAgICAgdXNlciA9IGNvbmYuZ2V0Q29ubmVjdGlvblVzZXJOYW1l\nKCk7CiAgICAgICAgU3RyaW5nIHBhc3MgPSAoU3RyaW5nKSBDb25maWd1cmF0\naW9ucy5yZW1vdmVQcm9wZXJ0eSgiQ29ubmVjdGlvblBhc3N3b3JkIiwgcHJv\ncHMpOwogICAgICAgIGlmIChwYXNzID09IG51bGwpCiAgICAgICAgICAgIHBh\nc3MgPSBjb25mLmdldENvbm5lY3Rpb25QYXNzd29yZCgpOwoKICAgICAgICBT\ndHJpbmcgc3RyID0gKFN0cmluZykgQ29uZmlndXJhdGlvbnMucmVtb3ZlUHJv\ncGVydHkoIlRyYW5zYWN0aW9uTW9kZSIsIHByb3BzKTsKICAgICAgICBib29s\nZWFuIG1hbmFnZWQ7CiAgICAgICAgaWYgKHN0ciA9PSBudWxsKQogICAgICAg\nICAgICBtYW5hZ2VkID0gY29uZi5pc1RyYW5zYWN0aW9uTW9kZU1hbmFnZWQo\nKTsKICAgICAgICBlbHNlIHsKICAgICAgICAgICAgVmFsdWUgdmFsID0gY29u\nZi5nZXRWYWx1ZSgiVHJhbnNhY3Rpb25Nb2RlIik7CiAgICAgICAgICAgIG1h\nbmFnZWQgPSBCb29sZWFuLnBhcnNlQm9vbGVhbih2YWwudW5hbGlhcyhzdHIp\nKTsKICAgICAgICB9CgogICAgICAgIE9iamVjdCBvYmogPSBDb25maWd1cmF0\naW9ucy5yZW1vdmVQcm9wZXJ0eSgiQ29ubmVjdGlvblJldGFpbk1vZGUiLCBw\ncm9wcyk7CiAgICAgICAgaW50IHJldGFpbk1vZGU7CiAgICAgICAgaWYgKG9i\naiBpbnN0YW5jZW9mIE51bWJlcikgewogICAgICAgICAgICByZXRhaW5Nb2Rl\nID0gKChOdW1iZXIpIG9iaikuaW50VmFsdWUoKTsKICAgICAgICB9IGVsc2Ug\naWYgKG9iaiA9PSBudWxsKSB7CiAgICAgICAgICAgIHJldGFpbk1vZGUgPSBj\nb25mLmdldENvbm5lY3Rpb25SZXRhaW5Nb2RlQ29uc3RhbnQoKTsKICAgICAg\nICB9IGVsc2UgewogICAgICAgICAgICBWYWx1ZSB2YWwgPSBjb25mLmdldFZh\nbHVlKCJDb25uZWN0aW9uUmV0YWluTW9kZSIpOwogICAgICAgICAgICB0cnkg\newogICAgICAgICAgICAgICAgcmV0YWluTW9kZSA9IEludGVnZXIucGFyc2VJ\nbnQodmFsLnVuYWxpYXMoKFN0cmluZykgb2JqKSk7CiAgICAgICAgICAgIH0g\nY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBu\nZXcgQXJndW1lbnRFeGNlcHRpb24oX2xvYy5nZXQoImJhZC1lbS1wcm9wIiwg\nIm9wZW5qcGEuQ29ubmVjdGlvblJldGFpbk1vZGUiLCBvYmopLAogICAgICAg\nICAgICAgICAgICAgIG5ldyBUaHJvd2FibGVbXXsgZSB9LCBvYmosIHRydWUp\nOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBqYXZheC5w\nZXJzaXN0ZW5jZS5qdGFEYXRhU291cmNlIGFuZCBvcGVuanBhLkNvbm5lY3Rp\nb25GYWN0b3J5IG5hbWUgYXJlIGVxdWl2YWxlbnQuCiAgICAgICAgLy8gcHJl\nZmVyIGphdmF4LnBlcnNpc3RlbmNlIGZvciBub3cuIAogICAgICAgIFN0cmlu\nZyBjZk5hbWUgPSAoU3RyaW5nKSBDb25maWd1cmF0aW9ucy5yZW1vdmVQcm9w\nZXJ0eSgianRhRGF0YVNvdXJjZSIsIHByb3BzKTsgIAogICAgICAgIGlmKGNm\nTmFtZSA9PSBudWxsKSB7CiAgICAgICAgICAgIGNmTmFtZSA9IChTdHJpbmcp\nIENvbmZpZ3VyYXRpb25zLnJlbW92ZVByb3BlcnR5KCJDb25uZWN0aW9uRmFj\ndG9yeU5hbWUiLCBwcm9wcyk7CiAgICAgICAgfQogICAgICAgIAogICAgICAg\nIFN0cmluZyBjZjJOYW1lID0gKFN0cmluZykgQ29uZmlndXJhdGlvbnMucmVt\nb3ZlUHJvcGVydHkoIm5vbkp0YURhdGFTb3VyY2UiLCBwcm9wcyk7IAogICAg\nICAgIAogICAgICAgIGlmKGNmMk5hbWUgPT0gbnVsbCkgeyAKICAgICAgICAg\nICAgY2YyTmFtZSA9IChTdHJpbmcpIENvbmZpZ3VyYXRpb25zLnJlbW92ZVBy\nb3BlcnR5KCJDb25uZWN0aW9uRmFjdG9yeTJOYW1lIiwgcHJvcHMpOwogICAg\nICAgIH0KICAgICAgICAKICAgICAgICBCcm9rZXIgYnJva2VyID0gX2ZhY3Rv\ncnkubmV3QnJva2VyKHVzZXIsIHBhc3MsIG1hbmFnZWQsIHJldGFpbk1vZGUs\nIGZhbHNlLCBjZk5hbWUsIGNmMk5hbWUpOwogICAgICAgICAgICAKICAgICAg\nICAvLyBhZGQgYXV0b2RldGFjaCBmb3IgY2xvc2UgYW5kIHJvbGxiYWNrIGNv\nbmRpdGlvbnMgdG8gdGhlIGNvbmZpZ3VyYXRpb24KICAgICAgICBicm9rZXIu\nc2V0QXV0b0RldGFjaChBdXRvRGV0YWNoLkRFVEFDSF9DTE9TRSwgdHJ1ZSk7\nCiAgICAgICAgYnJva2VyLnNldEF1dG9EZXRhY2goQXV0b0RldGFjaC5ERVRB\nQ0hfUk9MTEJBQ0ssIHRydWUpOwogICAgICAgIGJyb2tlci5zZXREZXRhY2hl\nZE5ldyhmYWxzZSk7CiAgICAgICAgCiAgICAgICAgT3BlbkpQQUVudGl0eU1h\nbmFnZXJTUEkgZW0gPSBuZXdFbnRpdHlNYW5hZ2VySW1wbChicm9rZXIpOwoK\nICAgICAgICAvLyBhbGxvdyBzZXR0aW5nIG9mIG90aGVyIGJlYW4gcHJvcGVy\ndGllcyBvZiBFTQogICAgICAgIGZvciAoT2JqZWN0IGtleSA6IHByb3BzLmtl\neVNldCgpKSB7CiAgICAgICAgICAgIGVtLnNldFByb3BlcnR5KGtleS50b1N0\ncmluZygpLCBwcm9wcy5nZXQoa2V5KSk7CiAgICAgICAgfQogICAgICAgIHJl\ndHVybiBlbTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBDcmVhdGUgYSBu\nZXcgZW50aXR5IG1hbmFnZXIgYXJvdW5kIHRoZSBnaXZlbiBicm9rZXIuCiAg\nICAgKi8KICAgIHByb3RlY3RlZCBFbnRpdHlNYW5hZ2VySW1wbCBuZXdFbnRp\ndHlNYW5hZ2VySW1wbChCcm9rZXIgYnJva2VyKSB7CiAgICAgICAgcmV0dXJu\nIG5ldyBFbnRpdHlNYW5hZ2VySW1wbCh0aGlzLCBicm9rZXIpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIGFkZExpZmVjeWNsZUxpc3RlbmVyKE9iamVjdCBs\naXN0ZW5lciwgQ2xhc3MuLi4gY2xhc3NlcykgewogICAgICAgIF9mYWN0b3J5\nLmFkZExpZmVjeWNsZUxpc3RlbmVyKGxpc3RlbmVyLCBjbGFzc2VzKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCByZW1vdmVMaWZlY3ljbGVMaXN0ZW5lcihP\nYmplY3QgbGlzdGVuZXIpIHsKICAgICAgICBfZmFjdG9yeS5yZW1vdmVMaWZl\nY3ljbGVMaXN0ZW5lcihsaXN0ZW5lcik7CiAgICB9CgogICAgcHVibGljIHZv\naWQgYWRkVHJhbnNhY3Rpb25MaXN0ZW5lcihPYmplY3QgbGlzdGVuZXIpIHsK\nICAgICAgICBfZmFjdG9yeS5hZGRUcmFuc2FjdGlvbkxpc3RlbmVyKGxpc3Rl\nbmVyKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCByZW1vdmVUcmFuc2FjdGlv\nbkxpc3RlbmVyKE9iamVjdCBsaXN0ZW5lcikgewogICAgICAgIF9mYWN0b3J5\nLnJlbW92ZVRyYW5zYWN0aW9uTGlzdGVuZXIobGlzdGVuZXIpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIGNsb3NlKCkgewogICAgICAgIF9mYWN0b3J5LmNs\nb3NlKCk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gaXNPcGVuKCkgewog\nICAgICAgIHJldHVybiAhX2ZhY3RvcnkuaXNDbG9zZWQoKTsKICAgIH0KCiAg\nICBwdWJsaWMgaW50IGhhc2hDb2RlKCkgewogICAgICAgIHJldHVybiAoX2Zh\nY3RvcnkgPT0gbnVsbCkgPyAwIDogX2ZhY3RvcnkuaGFzaENvZGUoKTsKICAg\nIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBlcXVhbHMoT2JqZWN0IG90aGVyKSB7\nCiAgICAgICAgaWYgKG90aGVyID09IHRoaXMpCiAgICAgICAgICAgIHJldHVy\nbiB0cnVlOwogICAgICAgIGlmICgob3RoZXIgPT0gbnVsbCkgfHwgKG90aGVy\nLmdldENsYXNzKCkgIT0gdGhpcy5nZXRDbGFzcygpKSkKICAgICAgICAgICAg\ncmV0dXJuIGZhbHNlOwogICAgICAgIGlmIChfZmFjdG9yeSA9PSBudWxsKQog\nICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgcmV0dXJuIF9mYWN0\nb3J5LmVxdWFscygoKEVudGl0eU1hbmFnZXJGYWN0b3J5SW1wbCkgb3RoZXIp\nLl9mYWN0b3J5KTsKICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhIHN0\nb3JlLXNwZWNpZmljIGZhY2FkZSBmb3IgdGhlIGdpdmVuIGZldGNoIGNvbmZp\nZ3VyYXRpb24uCgkgKiBJZiBubyBmYWNhZGUgY2xhc3MgZXhpc3RzLCB3ZSB1\nc2UgdGhlIGRlZmF1bHQge0BsaW5rIEZldGNoUGxhbn0uCiAgICAgKi8KICAg\nIEZldGNoUGxhbiB0b0ZldGNoUGxhbihCcm9rZXIgYnJva2VyLCBGZXRjaENv\nbmZpZ3VyYXRpb24gZmV0Y2gpIHsKICAgICAgICBpZiAoZmV0Y2ggPT0gbnVs\nbCkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CgogICAgICAgIGlmIChmZXRj\naCBpbnN0YW5jZW9mIERlbGVnYXRpbmdGZXRjaENvbmZpZ3VyYXRpb24pCiAg\nICAgICAgICAgIGZldGNoID0gKChEZWxlZ2F0aW5nRmV0Y2hDb25maWd1cmF0\naW9uKSBmZXRjaCkuCiAgICAgICAgICAgICAgICBnZXRJbm5lcm1vc3REZWxl\nZ2F0ZSgpOwoKICAgICAgICB0cnkgewogICAgICAgICAgICBpZiAoX3BsYW4g\nPT0gbnVsbCkgewogICAgICAgICAgICAgICAgQ2xhc3Mgc3RvcmVUeXBlID0g\nKGJyb2tlciA9PSBudWxsKSA/IG51bGwgOiBicm9rZXIuCiAgICAgICAgICAg\nICAgICAgICAgZ2V0U3RvcmVNYW5hZ2VyKCkuZ2V0SW5uZXJtb3N0RGVsZWdh\ndGUoKS5nZXRDbGFzcygpOwogICAgICAgICAgICAgICAgQ2xhc3MgY2xzID0g\nX2ZhY3RvcnkuZ2V0Q29uZmlndXJhdGlvbigpLgogICAgICAgICAgICAgICAg\nICAgIGdldFN0b3JlRmFjYWRlVHlwZVJlZ2lzdHJ5KCkuCiAgICAgICAgICAg\nICAgICAgICAgZ2V0SW1wbGVtZW50YXRpb24oRmV0Y2hQbGFuLmNsYXNzLCBz\ndG9yZVR5cGUsIAogICAgICAgICAgICAgICAgICAgIAkJRmV0Y2hQbGFuSW1w\nbC5jbGFzcyk7CiAgICAgICAgICAgICAgICBfcGxhbiA9IGNscy5nZXRDb25z\ndHJ1Y3RvcihGZXRjaENvbmZpZ3VyYXRpb24uY2xhc3MpOwogICAgICAgICAg\nICB9CiAgICAgICAgICAgIHJldHVybiBfcGxhbi5uZXdJbnN0YW5jZShmZXRj\naCk7CiAgICAgICAgfSBjYXRjaCAoSW52b2NhdGlvblRhcmdldEV4Y2VwdGlv\nbiBpdGUpIHsKICAgICAgICAgICAgdGhyb3cgUGVyc2lzdGVuY2VFeGNlcHRp\nb25zLnRvUGVyc2lzdGVuY2VFeGNlcHRpb24KICAgICAgICAgICAgICAgIChp\ndGUuZ2V0VGFyZ2V0RXhjZXB0aW9uKCkpOwogICAgICAgIH0gY2F0Y2ggKEV4\nY2VwdGlvbiBlKSB7CiAgICAgICAgICAgIHRocm93IFBlcnNpc3RlbmNlRXhj\nZXB0aW9ucy50b1BlcnNpc3RlbmNlRXhjZXB0aW9uKGUpOwogICAgICAgIH0K\nCX0KCiAgICBwdWJsaWMgQ2FjaGUgZ2V0Q2FjaGUoKSB7CiAgICAgICAgX2Zh\nY3RvcnkuYXNzZXJ0T3BlbigpOwogICAgICAgIHJldHVybiBnZXRTdG9yZUNh\nY2hlKCk7CiAgICB9CgogICAgcHVibGljIE9wZW5KUEFDcml0ZXJpYUJ1aWxk\nZXIgZ2V0Q3JpdGVyaWFCdWlsZGVyKCkgewogICAgICAgIHJldHVybiBuZXcg\nQ3JpdGVyaWFCdWlsZGVySW1wbCgpLnNldE1ldGFNb2RlbChnZXRNZXRhbW9k\nZWwoKSk7CiAgICB9CiAgICAKICAgIHB1YmxpYyBPcGVuSlBBUXVlcnlCdWls\nZGVyIGdldER5bmFtaWNRdWVyeUJ1aWxkZXIoKSB7CiAgICAgICAgcmV0dXJu\nIG5ldyBRdWVyeUJ1aWxkZXJJbXBsKHRoaXMpOwogICAgfQoKICAgIHB1Ymxp\nYyBTZXQ8U3RyaW5nPiBnZXRTdXBwb3J0ZWRQcm9wZXJ0aWVzKCkgewogICAg\nICAgIHJldHVybiBfZmFjdG9yeS5nZXRTdXBwb3J0ZWRQcm9wZXJ0aWVzKCk7\nCiAgICB9CgogICAgcHVibGljIE1ldGFtb2RlbEltcGwgZ2V0TWV0YW1vZGVs\nKCkgewogICAgICAgIGlmIChfbWV0YU1vZGVsID09IG51bGwpIHsKICAgICAg\nICAgICAgX21ldGFNb2RlbCA9IG5ldyBNZXRhbW9kZWxJbXBsKGdldENvbmZp\nZ3VyYXRpb24oKQogICAgICAgICAgICAgICAgLmdldE1ldGFEYXRhUmVwb3Np\ndG9yeUluc3RhbmNlKCkpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gX21l\ndGFNb2RlbDsKICAgIH0KCiAgICBwdWJsaWMgUGVyc2lzdGVuY2VVbml0VXRp\nbCBnZXRQZXJzaXN0ZW5jZVVuaXRVdGlsKCkgewogICAgICAgIHJldHVybiB0\naGlzOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IHRoZSBpZGVudGlmaWVy\nIGZvciB0aGUgc3BlY2lmaWVkIGVudGl0eS4gIElmIG5vdCBtYW5hZ2VkIGJ5\nIGFueQogICAgICogb2YgdGhlIGVtJ3MgaW4gdGhpcyBQVSBvciBub3QgcGVy\nc2lzdGVuY2UgY2FwYWJsZSwgcmV0dXJuIG51bGwuCiAgICAgKi8KICAgIHB1\nYmxpYyBPYmplY3QgZ2V0SWRlbnRpZmllcihPYmplY3QgZW50aXR5KSB7CiAg\nICAgICAgcmV0dXJuIE9wZW5KUEFQZXJzaXN0ZW5jZVV0aWwuZ2V0SWRlbnRp\nZmllcih0aGlzLCBlbnRpdHkpOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFu\nIGlzTG9hZGVkKE9iamVjdCBlbnRpdHkpIHsKICAgICAgICByZXR1cm4gaXNM\nb2FkZWQoZW50aXR5LCBudWxsKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVh\nbiBpc0xvYWRlZChPYmplY3QgZW50aXR5LCBTdHJpbmcgYXR0cmlidXRlKSB7\nCiAgICAgICAgaWYgKGVudGl0eSA9PSBudWxsKSB7CiAgICAgICAgICAgIHJl\ndHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIChPcGVuSlBB\nUGVyc2lzdGVuY2VVdGlsLmlzTWFuYWdlZEJ5KHRoaXMsIGVudGl0eSkgJiYK\nICAgICAgICAgICAgICAgIChPcGVuSlBBUGVyc2lzdGVuY2VVdGlsLmlzTG9h\nZGVkKGVudGl0eSwgYXR0cmlidXRlKSA9PSBMb2FkU3RhdGUuTE9BREVEKSk7\nCiAgICB9Cn0K\n","encoding":"base64"}

