{"sha":"1da06aec7784ab831a1cbabc326e1f41979b6c37","node_id":"MDQ6QmxvYjIwNjM2NDoxZGEwNmFlYzc3ODRhYjgzMWExY2JhYmMzMjZlMWY0MTk3OWI2YzM3","size":9329,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/1da06aec7784ab831a1cbabc326e1f41979b6c37","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2U7CgppbXBv\ncnQgamF2YS51dGlsLkhhc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuTWFwOwoK\naW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkNhY2hlUmV0cmlldmVNb2RlOwpp\nbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuQ2FjaGVTdG9yZU1vZGU7CmltcG9y\ndCBqYXZheC5wZXJzaXN0ZW5jZS5TaGFyZWRDYWNoZU1vZGU7CgppbXBvcnQg\nb3JnLmFwYWNoZS5jb21tb25zLmxhbmcuU3RyaW5nVXRpbHM7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuZGF0YWNhY2hlLkRhdGFDYWNoZU1vZGU7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkRhdGFDYWNoZVJldHJp\nZXZlTW9kZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuRGF0\nYUNhY2hlU3RvcmVNb2RlOwoKLyoqCiAqIEVudW1lcmF0ZXMgY29uZmlndXJh\ndGlvbiBwcm9wZXJ0eSBrZXlzIGRlZmluZWQgaW4gSlBBIDIuMCBTcGVjaWZp\nY2F0aW9uLgogKiA8YnI+CiAqIFByb3ZpZGVzIHN0YXRpYyB1dGlsaXR5IGZ1\nbmN0aW9ucyB0byByZWFkIHRoZWlyIHZhbHVlcyBmcm9tIHN1cHBsaWVkIG1h\ncCBvZiBwcm9wZXJ0aWVzLgogKiA8YnI+CiAqIFByb3ZpZGVzIHN0YXRpYyB1\ndGlsaXR5IGZ1bmN0aW9ucyB0byBjb252ZXJ0IHRoZW0gdG8gdmFsdWVzIHRo\nYXQgYXJlIGZpdCBmb3IgT3BlbkpQQSBpbXBsZW1lbnRhdGlvbi4gIAogKiA8\nYnI+CiAqIEBhdXRob3IgUGluYWtpIFBvZGRhcgogKiBAc2luY2UgMi4wLjAK\nICoKICovCnB1YmxpYyBjbGFzcyBKUEFQcm9wZXJ0aWVzIHsKICAgIHByaXZh\ndGUgc3RhdGljIGZpbmFsIFN0cmluZyBSRUdFWF9ET1QgICAgICAgICAgID0g\nIlxcLiI7CiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBQUkVGSVgg\nICAgICAgICAgICAgID0gImphdmF4LnBlcnNpc3RlbmNlLiI7CiAgICAKICAg\nIHB1YmxpYyBzdGF0aWMgZmluYWwgU3RyaW5nIFBST1ZJREVSICAgICAgICAg\nICAgPSBQUkVGSVggKyAicHJvdmlkZXIiOwogICAgcHVibGljIHN0YXRpYyBm\naW5hbCBTdHJpbmcgVFJBTlNBQ1RJT05fVFlQRSAgICA9IFBSRUZJWCArICJ0\ncmFuc2FjdGlvblR5cGUiOwogICAgCiAgICBwdWJsaWMgc3RhdGljIGZpbmFs\nIFN0cmluZyBEQVRBU09VUkNFICAgICAgICAgID0gUFJFRklYICsgImRhdGFT\nb3VyY2UiOwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgREFUQVNP\nVVJDRV9KVEEgICAgICA9IFBSRUZJWCArICJqdGFEYXRhU291cmNlIjsKICAg\nIHB1YmxpYyBzdGF0aWMgZmluYWwgU3RyaW5nIERBVEFTT1VSQ0VfTk9OSlRB\nICAgPSBQUkVGSVggKyAibm9uSnRhRGF0YVNvdXJjZSI7CiAgICAKICAgIHB1\nYmxpYyBzdGF0aWMgZmluYWwgU3RyaW5nIEpEQkNfRFJJVkVSICAgICAgICAg\nID0gUFJFRklYICsgImpkYmMuZHJpdmVyIjsKICAgIHB1YmxpYyBzdGF0aWMg\nZmluYWwgU3RyaW5nIEpEQkNfVVJMICAgICAgICAgICAgID0gUFJFRklYICsg\nImpkYmMudXJsIjsKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgU3RyaW5nIEpE\nQkNfVVNFUiAgICAgICAgICAgID0gUFJFRklYICsgImpkYmMudXNlciI7CiAg\nICBwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBKREJDX1BBU1NXT1JEICAg\nICAgICA9IFBSRUZJWCArICJqZGJjLnBhc3N3b3JkIjsKICAgIAogICAgcHVi\nbGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgTE9DS19TQ09QRSAgICAgICAgICAg\nPSBQUkVGSVggKyAibG9jay5zY29wZSI7CiAgICBwdWJsaWMgc3RhdGljIGZp\nbmFsIFN0cmluZyBMT0NLX1RJTUVPVVQgICAgICAgICA9IFBSRUZJWCArICJs\nb2NrLnRpbWVvdXQiOwogICAgCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIFN0\ncmluZyBRVUVSWV9USU1FT1VUICAgICAgICA9IFBSRUZJWCArICJxdWVyeS50\naW1lb3V0IjsKICAgIAogICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcg\nQ0FDSEVfTU9ERSAgICAgICAgICAgPSBQUkVGSVggKyAic2hhcmVkQ2FjaGUu\nbW9kZSI7CiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBDQUNIRV9T\nVE9SRV9NT0RFICAgICA9IFBSRUZJWCArICJjYWNoZS5zdG9yZU1vZGUiOwog\nICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgQ0FDSEVfUkVUUklFVkVf\nTU9ERSAgPSBQUkVGSVggKyAiY2FjaGUucmV0cmlldmVNb2RlIjsKICAgIAog\nICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgVkFMSURBVEVfRkFDVE9S\nWSAgICAgPSBQUkVGSVggKyAidmFsaWRhdGlvbi5mYWN0b3J5IjsKICAgIHB1\nYmxpYyBzdGF0aWMgZmluYWwgU3RyaW5nIFZBTElEQVRFX01PREUgICAgICAg\nID0gUFJFRklYICsgInZhbGlkYXRpb24ubW9kZSI7CiAgICBwdWJsaWMgc3Rh\ndGljIGZpbmFsIFN0cmluZyBWQUxJREFURV9QUkVfUEVSU0lTVCA9IFBSRUZJ\nWCArICJ2YWxpZGF0aW9uLmdyb3VwLnByZS1wZXJzaXN0IjsKICAgIHB1Ymxp\nYyBzdGF0aWMgZmluYWwgU3RyaW5nIFZBTElEQVRFX1BSRV9SRU1PVkUgID0g\nUFJFRklYICsgInZhbGlkYXRpb24uZ3JvdXAucHJlLXJlbW92ZSI7CiAgICBw\ndWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBWQUxJREFURV9QUkVfVVBEQVRF\nICA9IFBSRUZJWCArICJ2YWxpZGF0aW9uLmdyb3VwLnByZS11cGRhdGUiOwog\nICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgVkFMSURBVEVfR1JPVVBf\nREVGQVVMVCA9ICJqYXZheC52YWxpZGF0aW9uLmdyb3Vwcy5EZWZhdWx0IjsK\nICAgIAogICAgcHJpdmF0ZSBzdGF0aWMgTWFwPFN0cmluZyxTdHJpbmc+IF9u\nYW1lcyA9IG5ldyBIYXNoTWFwPFN0cmluZywgU3RyaW5nPigpOwogICAgCiAg\nICAvKioKICAgICAqIFJlY29yZCB0aGUgZ2l2ZW4ga2VybmVsIHByb3BlcnR5\nIGtleSAod2hpY2ggaXMgYSBiZWFuIHByb3BlcnR5IG5hbWUgd2l0aG91dCBh\nbnkgc3VmZml4KQogICAgICogY29ycmVzcG9uZGluZyB0byB0aGUgZ2l2ZW4g\nb3JpZ2luYWwgSlBBL09wZW5KUEEgcHJvcGVydHkgdXNlZCBieSB0aGUgdXNl\nciB0byBzZXQgdGhlIHZhbHVlcy4KICAgICAqLwogICAgc3RhdGljIHZvaWQg\ncmVjb3JkKFN0cmluZyBrZXJuZWwsIFN0cmluZyB1c2VyKSB7CiAgICAgICAg\nX25hbWVzLnB1dChrZXJuZWwsIHVzZXIpOwogICAgfQogICAgCiAgICAvKioK\nICAgICAqIEdldHMgdGhlIG9yaWdpbmFsIEpQQSBQcm9wZXJ0eSBuYW1lIGNv\ncnJlc3BvbmRpbmcgdG8gdGhlIGtlcm5lbCBwcm9wZXJ0eSBrZXkgCiAgICAg\nKiAod2hpY2ggaXMgYSBiZWFuIHByb3BlcnR5IG5hbWUgd2l0aG91dCBhbnkg\nc3VmZml4KS4KICAgICAqLwogICAgc3RhdGljIFN0cmluZyBnZXRVc2VyTmFt\nZShTdHJpbmcgYmVhblByb3BlcnR5KSB7CiAgICAgICAgcmV0dXJuIF9uYW1l\ncy5jb250YWluc0tleShiZWFuUHJvcGVydHkpID8gX25hbWVzLmdldChiZWFu\nUHJvcGVydHkpIDogYmVhblByb3BlcnR5OwogICAgfQogICAgCiAgICAvKioK\nICAgICAqIElzIHRoZSBnaXZlbiBrZXkgYXBwZWFycyB0byBiZSBhIHZhbGlk\nIEpQQSBzcGVjaWZpY2F0aW9uIGRlZmluZWQga2V5PwogICAgICogCiAgICAg\nKiBAcmV0dXJuIHRydWUgaWYgdGhlIGdpdmVuIHN0cmluZyBtZXJlbHkgcHJl\nZml4ZWQgd2l0aCA8Y29kZT5qYXZheC5wZXJzaXN0ZW5jZS48L2NvZGU+Lgog\nICAgICogRG9lcyBub3QgcmVhbGx5IGNoZWNrIGFsbCB0aGUga2V5cyBkZWZp\nbmVkIGluIHRoZSBzcGVjaWZpY2F0aW9uLgogICAgICovCiAgICBwdWJsaWMg\nc3RhdGljIGJvb2xlYW4gaXNWYWxpZEtleShTdHJpbmcga2V5KSB7CiAgICAg\nICAgcmV0dXJuIGtleSAhPSBudWxsICYmIGtleS5zdGFydHNXaXRoKFBSRUZJ\nWCk7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogR2V0cyBhIGJlYW4tc3R5\nbGUgcHJvcGVydHkgbmFtZSBmcm9tIHRoZSBnaXZlbiBrZXkuCiAgICAgKiAK\nICAgICAqIEBwYXJhbSBrZXkgbXVzdCBiZWdpbiB3aXRoIEpQQSBwcm9wZXJ0\neSBwcmVmaXggPGNvZGU+amF2YXgucGVyc2lzdGVuY2U8L2NvZGU+CiAgICAg\nKiAKICAgICAqIEByZXR1cm4gY29uY2F0ZW5hdGVzIGVhY2ggcGFydCBvZiB0\naGUgc3RyaW5nIGxlYXZpbmcgb3V0IDxjb2RlPmphdmF4LnBlcnNpc3RlbmNl\nLjwvY29kZT4gcHJlZml4LiAKICAgICAqIFBhcnQgb2Ygc3RyaW5nIGlzIHdo\nYXQgYXBwZWFycyBiZXR3ZWVuIERPVCBjaGFyYWN0ZXIuCiAgICAgKi8KICAg\nIHB1YmxpYyBzdGF0aWMgU3RyaW5nIGdldEJlYW5Qcm9wZXJ0eShTdHJpbmcg\na2V5KSB7CiAgICAgICAgaWYgKCFpc1ZhbGlkS2V5KGtleSkpCiAgICAgICAg\nICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oIkludmFs\naWQgSlBBIHByb3BlcnR5ICIgKyBrZXkpOwogICAgICAgIFN0cmluZ1tdIHBh\ncnRzID0ga2V5LnNwbGl0KFJFR0VYX0RPVCk7CiAgICAgICAgU3RyaW5nQnVp\nbGRlciBidWYgPSBuZXcgU3RyaW5nQnVpbGRlcigpOwogICAgICAgIGZvciAo\naW50IGkgPSAyOyBpIDwgcGFydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAg\nICAgYnVmLmFwcGVuZChTdHJpbmdVdGlscy5jYXBpdGFsaXplKHBhcnRzW2ld\nKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBidWYudG9TdHJpbmcoKTsK\nICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBDb252ZXJ0IHRoZSBnaXZlbiB1\nc2VyIHZhbHVlIHRvIGEgdmFsdWUgY29uc3VtYWJsZSBieSBPcGVuSlBBIGtl\ncm5lbCBjb25zdHJ1Y3RzLgogICAgICogCiAgICAgKiBAcmV0dXJuIHRoZSBz\nYW1lIHZhbHVlIGlmIHRoZSBnaXZlbiBrZXkgaXMgbm90IGEgdmFsaWQgSlBB\nIHByb3BlcnR5IGtleSBvciB0aGUgdmFsdWUgaXMgbnVsbC4KICAgICAqLwog\nICAgcHVibGljIHN0YXRpYyA8VD4gVCAgY29udmVydFRvS2VybmVsVmFsdWUo\nQ2xhc3M8VD4gcmVzdWx0VHlwZSwgU3RyaW5nIGtleSwgT2JqZWN0IHZhbHVl\nKSB7CiAgICAgICAgaWYgKHZhbHVlID09IG51bGwpCiAgICAgICAgICAgIHJl\ndHVybiBudWxsOwogICAgICAgIGlmIChKUEFQcm9wZXJ0aWVzLmlzVmFsaWRL\nZXkoa2V5KSkgewogICAgICAgICAgICAvLyB3b3JrcyBiZWNhdXNlIGVudW0g\ndmFsdWVzIGFyZSBpZGVudGljYWwgU3RyaW5nCiAgICAgICAgICAgIGlmICh2\nYWx1ZSBpbnN0YW5jZW9mIENhY2hlUmV0cmlldmVNb2RlIHx8ICh2YWx1ZSBp\nbnN0YW5jZW9mIFN0cmluZyAmJiBDQUNIRV9SRVRSSUVWRV9NT0RFLmVxdWFs\ncyhrZXkpKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIChUKURhdGFDYWNo\nZVJldHJpZXZlTW9kZS52YWx1ZU9mKHZhbHVlLnRvU3RyaW5nKCkudHJpbSgp\nLnRvVXBwZXJDYXNlKCkpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVl\nIGluc3RhbmNlb2YgQ2FjaGVTdG9yZU1vZGUgfHwgKHZhbHVlIGluc3RhbmNl\nb2YgU3RyaW5nICYmIENBQ0hFX1NUT1JFX01PREUuZXF1YWxzKGtleSkpKSB7\nCiAgICAgICAgICAgICAgICByZXR1cm4gKFQpRGF0YUNhY2hlU3RvcmVNb2Rl\nLnZhbHVlT2YodmFsdWUudG9TdHJpbmcoKS50cmltKCkudG9VcHBlckNhc2Uo\nKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIChU\nKXZhbHVlOwogICAgfQogICAgCiAgICAvKioKICAgICAqIENvbnZlcnQgdGhl\nIGdpdmVuIGtlcm5lbCB2YWx1ZSB0byBhIHZhbHVlIHZpc2libGUgdG8gdGhl\nIHVzZXIuCiAgICAgKiAKICAgICAqIEByZXR1cm4gdGhlIHNhbWUgdmFsdWUg\naWYgdGhlIGdpdmVuIGtleSBpcyBub3QgYSB2YWxpZCBKUEEgcHJvcGVydHkg\na2V5IG9yIHRoZSB2YWx1ZSBpcyBudWxsLgogICAgICovCiAgICBwdWJsaWMg\nc3RhdGljIE9iamVjdCBjb252ZXJ0VG9Vc2VyVmFsdWUoU3RyaW5nIGtleSwg\nT2JqZWN0IHZhbHVlKSB7CiAgICAgICAgaWYgKHZhbHVlID09IG51bGwpCiAg\nICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIGlmIChKUEFQcm9wZXJ0\naWVzLmlzVmFsaWRLZXkoa2V5KSkgewogICAgICAgICAgICAvLyB3b3JrcyBi\nZWNhdXNlIGVudW0gdmFsdWVzIGFyZSBpZGVudGljYWwgU3RyaW5nCiAgICAg\nICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERhdGFDYWNoZVJldHJpZXZl\nTW9kZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIENhY2hlUmV0cmlldmVN\nb2RlLnZhbHVlT2YodmFsdWUudG9TdHJpbmcoKS50cmltKCkudG9VcHBlckNh\nc2UoKSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2Vv\nZiBEYXRhQ2FjaGVTdG9yZU1vZGUpIHsKICAgICAgICAgICAgICAgIHJldHVy\nbiBDYWNoZVN0b3JlTW9kZS52YWx1ZU9mKHZhbHVlLnRvU3RyaW5nKCkudHJp\nbSgpLnRvVXBwZXJDYXNlKCkpOwogICAgICAgICAgICB9CiAgICAgICAgfQog\nICAgICAgIHJldHVybiB2YWx1ZTsKICAgIH0KICAgIAogICAgLyoqCiAgICAg\nKiBHZXQgdGhlIHZhbHVlIG9mIHRoZSBnaXZlbiBrZXkgZnJvbSB0aGUgZ2l2\nZW4gcHJvcGVydGllcyBhZnRlciBjb252ZXJ0aW5nIGl0IHRvIHRoZSBnaXZl\nbgogICAgICogZW51bWVyYXRlZCB2YWx1ZS4KICAgICAqLwogICAgcHVibGlj\nIHN0YXRpYyA8RSBleHRlbmRzIEVudW08RT4+IEUgZ2V0RW51bVZhbHVlKENs\nYXNzPEU+IHR5cGUsIFN0cmluZyBrZXksIE1hcDxTdHJpbmcsT2JqZWN0PiBw\ncm9wKSB7CiAgICAgICAgcmV0dXJuIGdldEVudW1WYWx1ZSh0eXBlLCBudWxs\nLCBrZXksIHByb3ApOwogICAgfQogICAgCiAgICAvKioKICAgICAqIEdldHMg\nYSBlbnVtIHZhbHVlIG9mIHRoZSBnaXZlbiB0eXBlIGZyb20gdGhlIGdpdmVu\nIHByb3BlcnRpZXMgbG9va2luZyB1cCB3aXRoIHRoZSBnaXZlbiBrZXkuCiAg\nICAgKiBDb252ZXJ0cyB0aGUgb3JpZ2luYWwgdmFsdWUgZnJvbSBhIFN0cmlu\nZyBvciBvcmRpbmFsIG51bWJlciwgaWYgbmVjZXNzYXJ5LgogICAgICogQ29u\ndmVyc2lvbiBmcm9tIGFuIGludGVncmFsIG51bWJlciB0byBlbnVtIHZhbHVl\nIGlzIG9ubHkgYXR0ZW1wdGVkIGlmIHRoZSBhbGxvd2VkIGVudW0gdmFsdWVz\nCiAgICAgKiBhcmUgcHJvdmlkZWQgYXMgbm9uLW51bGwsIG5vbi1lbXB0eSBh\ncnJheS4gCiAgICAgKiAKICAgICAqIEByZXR1cm4gbnVsbCBpZiB0aGUga2V5\nIGRvZXMgbm90IGV4aXN0IGluIHRoZSBnaXZlbiBwcm9wZXJ0aWVzLgogICAg\nICovCiAgICBwdWJsaWMgc3RhdGljIDxFIGV4dGVuZHMgRW51bTxFPj4gRSBn\nZXRFbnVtVmFsdWUoQ2xhc3M8RT4gdHlwZSwgRVtdIHZhbHVlcywgU3RyaW5n\nIGtleSwgTWFwPFN0cmluZyxPYmplY3Q+IHByb3ApIHsKICAgICAgICBpZiAo\ncHJvcCA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAg\nICByZXR1cm4gZ2V0RW51bVZhbHVlKHR5cGUsIHZhbHVlcywgcHJvcC5nZXQo\na2V5KSk7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogR2V0cyBhIGVudW0g\ndmFsdWUgb2YgdGhlIGdpdmVuIHR5cGUgZnJvbSB0aGUgZ2l2ZW4gdmFsdWUu\nCiAgICAgKiBDb252ZXJ0cyB0aGUgb3JpZ2luYWwgdmFsdWUgZnJvbSBhIFN0\ncmluZywgaWYgbmVjZXNzYXJ5LgogICAgICogCiAgICAgKiBAcmV0dXJuIG51\nbGwgaWYgdGhlIGtleSBkb2VzIG5vdCBleGlzdCBpbiB0aGUgZ2l2ZW4gcHJv\ncGVydGllcy4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyA8RSBleHRlbmRz\nIEVudW08RT4+IEUgIGdldEVudW1WYWx1ZShDbGFzczxFPiB0eXBlLCBPYmpl\nY3QgdmFsKSB7CiAgICAgICAgcmV0dXJuIGdldEVudW1WYWx1ZSh0eXBlLCBu\ndWxsLCB2YWwpOwogICAgfQogICAgCiAgICAvKioKICAgICAqIEdldHMgYSBl\nbnVtIHZhbHVlIG9mIHRoZSBnaXZlbiB0eXBlIGZyb20gdGhlIGdpdmVuIHZh\nbHVlLgogICAgICogQ29udmVydHMgdGhlIG9yaWdpbmFsIHZhbHVlIGZyb20g\nYSBTdHJpbmcgb3Igb3JkaW5hbCBudW1iZXIsIGlmIG5lY2Vzc2FyeS4KICAg\nICAqIENvbnZlcnNpb24gZnJvbSBhbiBpbnRlZ3JhbCBudW1iZXIgdG8gZW51\nbSB2YWx1ZSBpcyBvbmx5IGF0dGVtcHRlZCBpZiB0aGUgYWxsb3dlZCBlbnVt\nIHZhbHVlcwogICAgICogYXJlIHByb3ZpZGVkIGFzIG5vbi1udWxsLCBub24t\nZW1wdHkgYXJyYXkuIAogICAgICogCiAgICAgKiBAcmV0dXJuIG51bGwgaWYg\ndGhlIGtleSBkb2VzIG5vdCBleGlzdCBpbiB0aGUgZ2l2ZW4gcHJvcGVydGll\ncy4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyA8RSBleHRlbmRzIEVudW08\nRT4+IEUgIGdldEVudW1WYWx1ZShDbGFzczxFPiB0eXBlLCBFW10gdmFsdWVz\nLCBPYmplY3QgdmFsKSB7CiAgICAgICAgaWYgKHZhbCA9PSBudWxsKQogICAg\nICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICBpZiAodHlwZS5pc0luc3Rh\nbmNlKHZhbCkpCiAgICAgICAgICAgIHJldHVybiAoRSl2YWw7CiAgICAgICAg\naWYgKHZhbCBpbnN0YW5jZW9mIFN0cmluZykgewogICAgICAgICAgICByZXR1\ncm4gRW51bS52YWx1ZU9mKHR5cGUsIHZhbC50b1N0cmluZygpLnRyaW0oKS50\nb1VwcGVyQ2FzZSgpKTsKICAgICAgICB9CiAgICAgICAgaWYgKHZhbHVlcyAh\nPSBudWxsICYmIHZhbHVlcy5sZW5ndGggPiAwICYmIHZhbCBpbnN0YW5jZW9m\nIE51bWJlcikgewogICAgICAgICAgICByZXR1cm4gdmFsdWVzWygoTnVtYmVy\nKXZhbCkuaW50VmFsdWUoKV07CiAgICAgICAgfQogICAgICAgIHJldHVybiBu\ndWxsOyAKICAgIH0KfQo=\n","encoding":"base64"}

