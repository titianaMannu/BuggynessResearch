{"sha":"45e42cf2a754bd8db8d04e84c769cdcf875731ef","node_id":"MDQ6QmxvYjIwNjM2NDo0NWU0MmNmMmE3NTRiZDhkYjhkMDRlODRjNzY5Y2RjZjg3NTczMWVm","size":4793,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/45e42cf2a754bd8db8d04e84c769cdcf875731ef","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5jYWxsYmFja3M7\nCgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnRlc3Qu\nU2luZ2xlRU1GVGVzdENhc2U7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXI7CgpwdWJsaWMgY2xh\nc3MgVGVzdEVudGl0eUxpc3RlbmVycyBleHRlbmRzIFNpbmdsZUVNRlRlc3RD\nYXNlIHsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBpbnQgRU5USVRZX0xJ\nU1RFTkVSX0VOVElUWSA9IDE7CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBp\nbnQgR0xPQkFMX0xJU1RFTkVSX0VOVElUWSA9IDI7CiAgICBwcml2YXRlIHN0\nYXRpYyBmaW5hbCBpbnQgRFVQTElDQVRFX0xJU1RFTkVSX0VOVElUWSA9IDM7\nCiAgICAKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgewogICAgICAgIHNldFVw\nKENMRUFSX1RBQkxFUyk7CiAgICAgICAgTGlzdGVuZXJJbXBsLnByZVBlcnNp\nc3RDb3VudCA9IDA7CiAgICAgICAgTGlzdGVuZXJJbXBsLnBvc3RQZXJzaXN0\nQ291bnQgPSAwOwogICAgICAgIExpc3RlbmVySW1wbC5wcmVVcGRhdGVDb3Vu\ndCA9IDA7CiAgICAgICAgTGlzdGVuZXJJbXBsLnBvc3RVcGRhdGVDb3VudCA9\nIDA7CiAgICAgICAgTGlzdGVuZXJJbXBsLnByZVJlbW92ZUNvdW50ID0gMDsK\nICAgICAgICBMaXN0ZW5lckltcGwucG9zdFJlbW92ZUNvdW50ID0gMDsKICAg\nICAgICBMaXN0ZW5lckltcGwucG9zdExvYWRDb3VudCA9IDA7CiAgICB9Cgog\nICAgQE92ZXJyaWRlCiAgICBwcm90ZWN0ZWQgU3RyaW5nIGdldFBlcnNpc3Rl\nbmNlVW5pdE5hbWUoKSB7CiAgICAgICAgcmV0dXJuICJsaXN0ZW5lci1wdSI7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEVudGl0eUxpc3RlbmVycygp\nIHsKICAgICAgICBoZWxwZXIoRU5USVRZX0xJU1RFTkVSX0VOVElUWSk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgdGVzdEdsb2JhbExpc3RlbmVycygpIHsK\nICAgICAgICBoZWxwZXIoR0xPQkFMX0xJU1RFTkVSX0VOVElUWSk7CiAgICB9\nCiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3REdXBsaWNhdGVMaXN0ZW5lcnMo\nKSB7CiAgICAgICAgc3VwZXIuc2V0VXAoQ0xFQVJfVEFCTEVTLCBEdXBsaWNh\ndGVMaXN0ZW5lckVudGl0eS5jbGFzcywgCiAgICAgICAgICAgICJvcGVuanBh\nLkNhbGxiYWNrcyIsICJBbGxvd3NEdXBsaWNhdGVMaXN0ZW5lcj1mYWxzZSIp\nOwogICAgICAgIGFzc2VydEZhbHNlKGVtZi5nZXRDb25maWd1cmF0aW9uKCku\nZ2V0Q2FsbGJhY2tPcHRpb25zSW5zdGFuY2UoKQogICAgICAgICAgICAuZ2V0\nQWxsb3dzRHVwbGljYXRlTGlzdGVuZXIoKSk7CiAgICAgICAgaGVscGVyKERV\nUExJQ0FURV9MSVNURU5FUl9FTlRJVFkpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIGhlbHBlcihpbnQgZW50aXR5TGlzdGVuZXJzKSB7CiAgICAgICAgT3Bl\nbkpQQUVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdl\ncigpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGVtLmdldFRyYW5zYWN0\naW9uKCkuYmVnaW4oKTsKICAgICAgICAgICAgTGlzdGVuZXJUZXN0RW50aXR5\nIG8gPSBudWxsOwogICAgICAgICAgICBzd2l0Y2ggKGVudGl0eUxpc3RlbmVy\ncykgewogICAgICAgICAgICBjYXNlIEVOVElUWV9MSVNURU5FUl9FTlRJVFk6\nCiAgICAgICAgICAgICAgICBvID0gbmV3IEVudGl0eUxpc3RlbmVyRW50aXR5\nKCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBH\nTE9CQUxfTElTVEVORVJfRU5USVRZOgogICAgICAgICAgICAgICAgbyA9IG5l\ndyBHbG9iYWxMaXN0ZW5lckVudGl0eSgpOwogICAgICAgICAgICAgICAgYnJl\nYWs7CiAgICAgICAgICAgIGNhc2UgRFVQTElDQVRFX0xJU1RFTkVSX0VOVElU\nWToKICAgICAgICAgICAgICAgIG8gPSBuZXcgRHVwbGljYXRlTGlzdGVuZXJF\nbnRpdHkoKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAg\nICAgCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZW0ucGVyc2lzdChvKTsK\nCiAgICAgICAgICAgIGFzc2VydFN0YXR1cygxLCAwLCAwLCAwLCAwLCAwLCAw\nKTsKCiAgICAgICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7\nCiAgICAgICAgICAgIGxvbmcgaWQgPSBvLmdldElkKCk7CiAgICAgICAgICAg\nIGVtLmNsb3NlKCk7CgogICAgICAgICAgICBhc3NlcnRTdGF0dXMoMSwgMSwg\nMCwgMCwgMCwgMCwgMCk7CgogICAgICAgICAgICBlbSA9IGVtZi5jcmVhdGVF\nbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgICAgIGVtLmdldFRyYW5zYWN0aW9u\nKCkuYmVnaW4oKTsKICAgICAgICAgICAgc3dpdGNoIChlbnRpdHlMaXN0ZW5l\ncnMpIHsKICAgICAgICAgICAgY2FzZSBFTlRJVFlfTElTVEVORVJfRU5USVRZ\nOgogICAgICAgICAgICAgICAgbyA9IGVtLmZpbmQoRW50aXR5TGlzdGVuZXJF\nbnRpdHkuY2xhc3MsIGlkKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAg\nICAgICAgICBjYXNlIEdMT0JBTF9MSVNURU5FUl9FTlRJVFk6CiAgICAgICAg\nICAgICAgICBvID0gZW0uZmluZChHbG9iYWxMaXN0ZW5lckVudGl0eS5jbGFz\ncywgaWQpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNh\nc2UgRFVQTElDQVRFX0xJU1RFTkVSX0VOVElUWToKICAgICAgICAgICAgICAg\nIG8gPSBlbS5maW5kKER1cGxpY2F0ZUxpc3RlbmVyRW50aXR5LmNsYXNzLCBp\nZCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIAog\nICAgICAgICAgICB9CiAgICAgICAgICAgIGFzc2VydE5vdE51bGwobyk7CiAg\nICAgICAgICAgIGFzc2VydFN0YXR1cygxLCAxLCAwLCAwLCAwLCAwLCAxKTsK\nCiAgICAgICAgICAgIG8uc2V0VmFsdWUoby5nZXRWYWx1ZSgpICsgMSk7Cgog\nICAgICAgICAgICBlbS5mbHVzaCgpOwogICAgICAgICAgICBhc3NlcnRTdGF0\ndXMoMSwgMSwgMSwgMSwgMCwgMCwgMSk7CgogICAgICAgICAgICBlbS5yZW1v\ndmUobyk7CiAgICAgICAgICAgIGFzc2VydFN0YXR1cygxLCAxLCAxLCAxLCAx\nLCAwLCAxKTsKCiAgICAgICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29t\nbWl0KCk7CgogICAgICAgICAgICBhc3NlcnRTdGF0dXMoMSwgMSwgMSwgMSwg\nMSwgMSwgMSk7CgogICAgICAgICAgICBlbS5jbG9zZSgpOwogICAgICAgIH0g\nZmluYWxseSB7CiAgICAgICAgICAgIGlmIChlbSAhPSBudWxsICYmIGVtLmdl\ndFRyYW5zYWN0aW9uKCkuaXNBY3RpdmUoKSkKICAgICAgICAgICAgICAgIGVt\nLmdldFRyYW5zYWN0aW9uKCkucm9sbGJhY2soKTsKICAgICAgICAgICAgaWYg\nKGVtICE9IG51bGwgJiYgZW0uaXNPcGVuKCkpCiAgICAgICAgICAgICAgICBl\nbS5jbG9zZSgpOwogICAgICAgIH0KICAgIH0KCiAgICBwcml2YXRlIHZvaWQg\nYXNzZXJ0U3RhdHVzKAogICAgICAgIGludCBwcmVQZXJzaXN0LCBpbnQgcG9z\ndFBlcnNpc3QsCiAgICAgICAgaW50IHByZVVwZGF0ZSwgaW50IHBvc3RVcGRh\ndGUsCiAgICAgICAgaW50IHByZVJlbW92ZSwgaW50IHBvc3RSZW1vdmUsCiAg\nICAgICAgaW50IHBvc3RMb2FkKSB7CiAgICAgICAgYXNzZXJ0RXF1YWxzKHBy\nZVBlcnNpc3QsIExpc3RlbmVySW1wbC5wcmVQZXJzaXN0Q291bnQpOwogICAg\nICAgIGFzc2VydEVxdWFscyhwb3N0UGVyc2lzdCwgTGlzdGVuZXJJbXBsLnBv\nc3RQZXJzaXN0Q291bnQpOwogICAgICAgIGFzc2VydEVxdWFscyhwcmVVcGRh\ndGUsIExpc3RlbmVySW1wbC5wcmVVcGRhdGVDb3VudCk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKHBvc3RVcGRhdGUsIExpc3RlbmVySW1wbC5wb3N0VXBkYXRl\nQ291bnQpOwogICAgICAgIGFzc2VydEVxdWFscyhwcmVSZW1vdmUsIExpc3Rl\nbmVySW1wbC5wcmVSZW1vdmVDb3VudCk7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKHBvc3RSZW1vdmUsIExpc3RlbmVySW1wbC5wb3N0UmVtb3ZlQ291bnQpOwog\nICAgICAgIGFzc2VydEVxdWFscyhwb3N0TG9hZCwgTGlzdGVuZXJJbXBsLnBv\nc3RMb2FkQ291bnQpOwogICAgfQoKfQo=\n","encoding":"base64"}

