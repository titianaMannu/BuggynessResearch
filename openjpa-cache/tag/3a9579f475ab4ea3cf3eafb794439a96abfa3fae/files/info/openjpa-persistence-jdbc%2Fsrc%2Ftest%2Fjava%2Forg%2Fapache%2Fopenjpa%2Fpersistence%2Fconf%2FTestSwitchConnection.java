{"sha":"aa8944fa6d67b85b363447709e46a96656b30721","node_id":"MDQ6QmxvYjIwNjM2NDphYTg5NDRmYTZkNjdiODViMzYzNDQ3NzA5ZTQ2YTk2NjU2YjMwNzIx","size":4466,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/aa8944fa6d67b85b363447709e46a96656b30721","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY29uZjsK\nCmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsKaW1wb3J0IGphdmEudXRpbC5N\nYXA7CgppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5RXhpc3RzRXhj\nZXB0aW9uOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5TWFuYWdl\ncjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXJGYWN0\nb3J5OwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuUm9sbGJhY2tFeGNlcHRp\nb247CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnRl\nc3QuQWJzdHJhY3RQZXJzaXN0ZW5jZVRlc3RDYXNlOwoKcHVibGljIGNsYXNz\nIFRlc3RTd2l0Y2hDb25uZWN0aW9uIGV4dGVuZHMgQWJzdHJhY3RQZXJzaXN0\nZW5jZVRlc3RDYXNlIHsKICAgIHByaXZhdGUgU3RyaW5nIGRlZmF1bHRKbmRp\nTmFtZSA9ICJqZGJjL21vY2tlZCI7CiAgICBwcml2YXRlIFN0cmluZ1tdIGpu\nZGlOYW1lcyA9IHsgImpkYmMvbW9ja2VkMSIgfTsKICAgIAogICAgcHJvdGVj\ndGVkIHZvaWQgaW5pdEVNRihTdHJpbmcgY2ZOYW1lKSB7IAogICAgICAgIEVu\ndGl0eU1hbmFnZXJGYWN0b3J5IGVtZiA9IGdldEVtZigib3BlbmpwYS5Db25u\nZWN0aW9uRmFjdG9yeU5hbWUiLCBjZk5hbWUpOwogICAgICAgIAogICAgICAg\nIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigp\nOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAg\nICBlbS5jcmVhdGVRdWVyeSgiRGVsZXRlIGZyb20gY29uZlBlcnNvbiIpLmV4\nZWN1dGVVcGRhdGUoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNv\nbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICAgICAgCiAgICAgICAg\nZW1mLmNsb3NlKCk7CiAgICB9CiAgICAKICAgIHByb3RlY3RlZCBFbnRpdHlN\nYW5hZ2VyRmFjdG9yeSBnZXRFbWYoU3RyaW5nIGNmUHJvcGVydHlOYW1lLCBT\ndHJpbmcgY2ZQcm9wZXJ0eVZhbHVlKSB7IAogICAgICAgIC8vIG51bGwgb3V0\nIHRoZSBkcml2ZXIgdG8gcHJldmVudCBzeXN0ZW0gcHJvcGVydGllcyBmcm9t\nIHRha2luZyBlZmZlY3QuCiAgICAgICAgLy8gZG8gbm90IHNldCBjb25uZWN0\naW9uRmFjdG9yeU1vZGVNYW5hZ2VkIC0gb3IgY29ubmVjdGlvbkZhY3Rvcnky\nIHdpbGwgYmUgdXNlZC4gCiAgICAgICAgcmV0dXJuIGNyZWF0ZUVNRigKICAg\nICAgICAgICAgIm9wZW5qcGEuQ29ubmVjdGlvbkRyaXZlck5hbWUiLCAiIiwg\nCiAgICAgICAgICAgIGNmUHJvcGVydHlOYW1lLCBjZlByb3BlcnR5VmFsdWUs\nCiAgICAgICAgICAgIFBlcnNvbi5jbGFzcyk7IAogICAgfQogICAgCiAgICBw\ncm90ZWN0ZWQgRW50aXR5TWFuYWdlciBnZXRFbShFbnRpdHlNYW5hZ2VyRmFj\ndG9yeSBlbWYsIFN0cmluZyBuYW1lLCBTdHJpbmcgdmFsdWUpIHsKICAgICAg\nICBNYXA8U3RyaW5nLCBPYmplY3Q+IHByb3BzID0gbmV3IEhhc2hNYXA8U3Ry\naW5nLCBPYmplY3Q+KCk7CiAgICAgICAgcHJvcHMucHV0KG5hbWUsIHZhbHVl\nKTsKICAgICAgICByZXR1cm4gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIocHJv\ncHMpOwogICAgfQogICAgCiAgICBwcm90ZWN0ZWQgdm9pZCBjcmVhdGVUYWJs\nZXMoKSB7IAogICAgICAgIC8vIGNyZWF0ZSBhbiBFTUYgZm9yIGVhY2ggZGF0\nYWJhc2U7CiAgICAgICAgaW5pdEVNRihkZWZhdWx0Sm5kaU5hbWUpOwogICAg\nICAgIGluaXRFTUYoam5kaU5hbWVzWzBdKTsKICAgIH0KICAgIAogICAgcHVi\nbGljIHZvaWQgdGVzdENvbm5lY3Rpb25GYWN0b3J5TmFtZSgpIHsgCiAgICAg\nICAgLy8gc3BsaXQgb3V0IHNvIHRoYXQgd2UgY2FuIHRyeSBqYXZheC5wZXJz\naXN0ZW5jZS5qdGFEYXRhU291cmNlIGluIHRoZSBmdXR1cmUuIAogICAgICAg\nIG92ZXJyaWRlUHJvcGVydHlPbkVNKCJvcGVuanBhLkNvbm5lY3Rpb25GYWN0\nb3J5TmFtZSIsIGpuZGlOYW1lc1swXSk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgb3ZlcnJpZGVQcm9wZXJ0eU9uRU0oU3RyaW5nIG5hbWUsIFN0cmluZyB2\nYWx1ZSkgewogICAgICAgIC8vIFRPRE8gRGlzYWJsZSBmb3Igbm9uIGRlcmJ5\nLiAKICAgICAgICBjcmVhdGVUYWJsZXMoKTsKICAgICAgICAKICAgICAgICAv\nLyB1c2UgdGhlIGRlZmF1bHQgSm5kaU5hbWUgZm9yIHRoZSBiYXNlIEVudGl0\neU1hbmFnZXJGYWN0b3J5CiAgICAgICAgRW50aXR5TWFuYWdlckZhY3Rvcnkg\nZW1mID0gZ2V0RW1mKG5hbWUsIGRlZmF1bHRKbmRpTmFtZSk7CiAgICAgICAg\nYXNzZXJ0Tm90TnVsbChlbWYpOwoKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVt\nID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBhc3NlcnRO\nb3ROdWxsKGVtKTsKCiAgICAgICAgRW50aXR5TWFuYWdlciBlbTEgPSBnZXRF\nbShlbWYsIG5hbWUsIHZhbHVlKTsgCiAgICAgICAgYXNzZXJ0Tm90TnVsbChl\nbTEpOwoKICAgICAgICAvLyAncHJvdmUnIHRoYXQgd2UncmUgdXNpbmcgYSBk\naWZmZXJlbnQgZGF0YWJhc2UgYnkgaW5zZXJ0aW5nIHRoZSBzYW1lIHJvdwog\nICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBl\nbS5wZXJzaXN0KG5ldyBQZXJzb24oMSkpOwogICAgICAgIGVtLmdldFRyYW5z\nYWN0aW9uKCkuY29tbWl0KCk7CgogICAgICAgIGVtMS5nZXRUcmFuc2FjdGlv\nbigpLmJlZ2luKCk7CiAgICAgICAgZW0xLnBlcnNpc3QobmV3IFBlcnNvbigx\nKSk7CiAgICAgICAgZW0xLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7Cgog\nICAgICAgIGVtLmNsZWFyKCk7CiAgICAgICAgZW0xLmNsZWFyKCk7CgogICAg\nICAgIC8vIHNhbml0eSB0ZXN0LCBtYWtlIHN1cmUgaW5zZXJ0aW5nIHRoZSBz\nYW1lIHJvdyBhZ2FpbiBmYWlscy4KICAgICAgICAKICAgICAgICBlbS5nZXRU\ncmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgZW0ucGVyc2lzdChuZXcg\nUGVyc29uKDEpKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBlbS5nZXRU\ncmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgICAgICBmYWlsKCJTaG91\nbGQgbm90IGJlIGFibGUgdG8gY29tbWl0IHRoZSBzYW1lIHJvdyBhIHNlY29u\nZCB0aW1lIik7CiAgICAgICAgfSBjYXRjaCAoUm9sbGJhY2tFeGNlcHRpb24g\ncmJlKSB7CiAgICAgICAgICAgIGFzc2VydFRydWUocmJlLmdldENhdXNlKCkg\naW5zdGFuY2VvZiBFbnRpdHlFeGlzdHNFeGNlcHRpb24pOwogICAgICAgICAg\nICAvLyBleHBlY3RlZAogICAgICAgIH0KCiAgICAgICAgZW0xLmdldFRyYW5z\nYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBlbTEucGVyc2lzdChuZXcgUGVy\nc29uKDEpKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBlbTEuZ2V0VHJh\nbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICAgICAgZmFpbCgiU2hvdWxk\nIG5vdCBiZSBhYmxlIHRvIGNvbW1pdCB0aGUgc2FtZSByb3cgYSBzZWNvbmQg\ndGltZSIpOwogICAgICAgIH0gY2F0Y2ggKFJvbGxiYWNrRXhjZXB0aW9uIHJi\nZSkgewogICAgICAgICAgICBhc3NlcnRUcnVlKHJiZS5nZXRDYXVzZSgpIGlu\nc3RhbmNlb2YgRW50aXR5RXhpc3RzRXhjZXB0aW9uKTsKICAgICAgICAgICAg\nLy8gZXhwZWN0ZWQKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgZW0uY2xv\nc2UoKTsKICAgICAgICBlbTEuY2xvc2UoKTsKICAgICAgICBlbWYuY2xvc2Uo\nKTsKICAgIH0KfQo=\n","encoding":"base64"}

