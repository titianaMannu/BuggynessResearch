{"sha":"a19e1a1e91c366277d76a019176e42534f30dd99","node_id":"MDQ6QmxvYjIwNjM2NDphMTllMWExZTkxYzM2NjI3N2Q3NmEwMTkxNzZlNDI1MzRmMzBkZDk5","size":65153,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/a19e1a1e91c366277d76a019176e42534f30dd99","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY3JpdGVy\naWE7CgppbXBvcnQgamF2YS5tYXRoLkJpZ0RlY2ltYWw7CmltcG9ydCBqYXZh\nLnNxbC5EYXRlOwppbXBvcnQgamF2YS5zcWwuVGltZTsKaW1wb3J0IGphdmEu\nc3FsLlRpbWVzdGFtcDsKaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Cmlt\ncG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsKaW1wb3J0IGphdmEudXRpbC5MaXN0\nOwppbXBvcnQgamF2YS51dGlsLk1hcDsKCmltcG9ydCBqYXZheC5wZXJzaXN0\nZW5jZS5QYXJhbWV0ZXI7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5RdWVy\neTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLlR1cGxlOwppbXBvcnQgamF2\nYXgucGVyc2lzdGVuY2UuVHlwZWRRdWVyeTsKaW1wb3J0IGphdmF4LnBlcnNp\nc3RlbmNlLmNyaXRlcmlhLkNyaXRlcmlhUXVlcnk7CmltcG9ydCBqYXZheC5w\nZXJzaXN0ZW5jZS5jcml0ZXJpYS5FeHByZXNzaW9uOwppbXBvcnQgamF2YXgu\ncGVyc2lzdGVuY2UuY3JpdGVyaWEuSm9pbjsKaW1wb3J0IGphdmF4LnBlcnNp\nc3RlbmNlLmNyaXRlcmlhLkpvaW5UeXBlOwppbXBvcnQgamF2YXgucGVyc2lz\ndGVuY2UuY3JpdGVyaWEuTGlzdEpvaW47CmltcG9ydCBqYXZheC5wZXJzaXN0\nZW5jZS5jcml0ZXJpYS5NYXBKb2luOwppbXBvcnQgamF2YXgucGVyc2lzdGVu\nY2UuY3JpdGVyaWEuUGFyYW1ldGVyRXhwcmVzc2lvbjsKaW1wb3J0IGphdmF4\nLnBlcnNpc3RlbmNlLmNyaXRlcmlhLlBhdGg7CmltcG9ydCBqYXZheC5wZXJz\naXN0ZW5jZS5jcml0ZXJpYS5Sb290OwppbXBvcnQgamF2YXgucGVyc2lzdGVu\nY2UuY3JpdGVyaWEuU2VsZWN0aW9uOwppbXBvcnQgamF2YXgucGVyc2lzdGVu\nY2UuY3JpdGVyaWEuU2V0Sm9pbjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNl\nLmNyaXRlcmlhLlN1YnF1ZXJ5OwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2Uu\nbWV0YW1vZGVsLkVudGl0eVR5cGU7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5j\nZS5tZXRhbW9kZWwuTWV0YW1vZGVsOwoKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLnNxbC5PcmFjbGVEaWN0aW9uYXJ5OwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnRlc3QuQWxsb3dGYWlsdXJlOwoK\nLyoqCiAqIFRlc3RzIHR5cGUtc3RyaWN0IHZlcnNpb24gb2YgQ3JpdGVyaWEg\nQVBJLgogKiAKICogTW9zdCBvZiB0aGUgdGVzdHMgYnVpbGQgQ3JpdGVyaWEg\nUXVlcnkgYW5kIHRoZW4gZXhlY3V0ZSB0aGUgcXVlcnkgYXMgd2VsbCBhcwog\nKiBhIHJlZmVyZW5jZSBKUFFMIHF1ZXJ5IHN1cHBsaWVkIGFzIGEgc3RyaW5n\nLiBUaGUgdGVzdCBpcyB2YWxpZGF0ZWQgYnkKICogYXNzZXJ0aW5nIHRoYXQg\ndGhlIHJlc3VsdGFudCBTUUwgcXVlcmllcyBmb3IgdGhlc2UgdHdvIGFsdGVy\nbmF0aXZlIGZvcm0gb2YKICogZXhlY3V0aW5nIGEgcXVlcnkgYXJlIHRoZSBz\nYW1lLgogKiAKICogCiAqLwpwdWJsaWMgY2xhc3MgVGVzdFR5cGVzYWZlQ3Jp\ndGVyaWEgZXh0ZW5kcyBDcml0ZXJpYVRlc3QgewogICAgcHJpdmF0ZSBzdGF0\naWMgZmluYWwgU3RyaW5nIFRSVUVfSlBRTCA9ICJTRUxFQ1QgcCBGUk9NIFBl\ncnNvbiBwIFdIRVJFIDE9MSI7CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBT\ndHJpbmcgRkFMU0VfSlBRTCA9ICJTRUxFQ1QgcCBGUk9NIFBlcnNvbiBwIFdI\nRVJFIDE8PjEiOwogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0VHJ1ZUxpdGVy\nYWwoKSB7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxQZXJzb24+IHEgPSBjYi5j\ncmVhdGVRdWVyeShQZXJzb24uY2xhc3MpOwogICAgICAgIHEuZnJvbShQZXJz\nb24uY2xhc3MpOwogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKHEud2hlcmUo\nY2IubGl0ZXJhbChCb29sZWFuLlRSVUUpKSwgVFJVRV9KUFFMKTsKICAgIH0K\nICAgIAogICAgcHVibGljIHZvaWQgdGVzdEZhbHNlTGl0ZXJhbCgpIHsKICAg\nICAgICBDcml0ZXJpYVF1ZXJ5PFBlcnNvbj4gcSA9IGNiLmNyZWF0ZVF1ZXJ5\nKFBlcnNvbi5jbGFzcyk7CiAgICAgICAgcS5mcm9tKFBlcnNvbi5jbGFzcyk7\nCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UocS53aGVyZShjYi5saXRlcmFs\nKEJvb2xlYW4uRkFMU0UpKSwgRkFMU0VfSlBRTCk7CiAgICB9CiAgICAKICAg\nIHB1YmxpYyB2b2lkIHRlc3REZWZhdWx0QW5kSXNUcnVlKCkgewogICAgICAg\nIENyaXRlcmlhUXVlcnk8UGVyc29uPiBxID0gY2IuY3JlYXRlUXVlcnkoUGVy\nc29uLmNsYXNzKTsKICAgICAgICBxLmZyb20oUGVyc29uLmNsYXNzKTsKICAg\nICAgICBhc3NlcnRFcXVpdmFsZW5jZShxLndoZXJlKGNiLmFuZCgpKSwgVFJV\nRV9KUFFMKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdERlZmF1\nbHRPcklzRmFsc2UoKSB7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxQZXJzb24+\nIHEgPSBjYi5jcmVhdGVRdWVyeShQZXJzb24uY2xhc3MpOwogICAgICAgIHEu\nZnJvbShQZXJzb24uY2xhc3MpOwogICAgICAgIGFzc2VydEVxdWl2YWxlbmNl\nKHEud2hlcmUoY2Iub3IoKSksIEZBTFNFX0pQUUwpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHRlc3RaZXJvRGlzanVuY3RJc0ZhbHNlKCkgewogICAgICAg\nIENyaXRlcmlhUXVlcnk8UGVyc29uPiBxID0gY2IuY3JlYXRlUXVlcnkoUGVy\nc29uLmNsYXNzKTsKICAgICAgICBxLmZyb20oUGVyc29uLmNsYXNzKTsKICAg\nICAgICBhc3NlcnRFcXVpdmFsZW5jZShxLndoZXJlKGNiLmRpc2p1bmN0aW9u\nKCkpLCBGQUxTRV9KUFFMKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQg\ndGVzdFplcm9Db25qdW5jdElzVHJ1ZSgpIHsKICAgICAgICBDcml0ZXJpYVF1\nZXJ5PFBlcnNvbj4gcSA9IGNiLmNyZWF0ZVF1ZXJ5KFBlcnNvbi5jbGFzcyk7\nCiAgICAgICAgcS5mcm9tKFBlcnNvbi5jbGFzcyk7CiAgICAgICAgYXNzZXJ0\nRXF1aXZhbGVuY2UocS53aGVyZShjYi5jb25qdW5jdGlvbigpKSwgVFJVRV9K\nUFFMKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0RXhwcmVzc2lvbnMo\nKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIG8ucXVhbnRpdHks\nIG8udG90YWxDb3N0KjEuMDgsICIKICAgICAgICAgICAgICAgICsgImEuemlw\nQ29kZSBGUk9NIEN1c3RvbWVyIGMgSk9JTiBjLm9yZGVycyBvIEpPSU4gYy5h\nZGRyZXNzIGEgIgogICAgICAgICAgICAgICAgKyAiV0hFUkUgYS5zdGF0ZSA9\nICdDQScgQU5EIGEuY291bnR5ID0gJ1NhbnRhIENsYXJhJyI7CiAgICAgICAg\nQ3JpdGVyaWFRdWVyeTw/PiBxID0gY2IuY3JlYXRlUXVlcnkoKTsKICAgICAg\nICBSb290PEN1c3RvbWVyPiBjdXN0ID0gcS5mcm9tKEN1c3RvbWVyLmNsYXNz\nKTsKICAgICAgICBTZXRKb2luPEN1c3RvbWVyLCBPcmRlcj4gb3JkZXIgPSBj\ndXN0LmpvaW5TZXQoIm9yZGVycyIpOwogICAgICAgIEpvaW48Q3VzdG9tZXIs\nIEFkZHJlc3M+IGFkZHJlc3MgPSBjdXN0LmpvaW4oImFkZHJlc3MiKTsKICAg\nICAgICBxLndoZXJlKGNiLmVxdWFsKGFkZHJlc3MuZ2V0KCJzdGF0ZSIpLCAi\nQ0EiKSwgY2IuZXF1YWwoYWRkcmVzcwogICAgICAgICAgICAuZ2V0KCJjb3Vu\ndHkiKSwgIlNhbnRhIENsYXJhIikpOwogICAgICAgIEV4cHJlc3Npb248RG91\nYmxlPiB0YXhlZENvc3QgPSBjYi5wcm9kKG9yZGVyLmdldChPcmRlcl8udG90\nYWxDb3N0KSwgMS4wOCk7CiAgICAgICAgcS5tdWx0aXNlbGVjdChvcmRlci5n\nZXQoInF1YW50aXR5IiksIHRheGVkQ29zdCwgYWRkcmVzcy5nZXQoInppcENv\nZGUiKSk7CgogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKHEsIGpwcWwpOwog\nICAgfQogICAgcHVibGljIHZvaWQgdGVzdEV4cGxpY3RSb290KCkgewogICAg\nICAgIFN0cmluZyBqcHFsID0gInNlbGVjdCBhIGZyb20gQWNjb3VudCBhIjsK\nICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PEFjY291bnQ+IGMgPSBj\nYi5jcmVhdGVRdWVyeShBY2NvdW50LmNsYXNzKTsKICAgICAgICBSb290PEFj\nY291bnQ+IGFjY291bnQgPSBjLmZyb20oQWNjb3VudC5jbGFzcyk7CiAgICAg\nICAgYy5zZWxlY3QoYWNjb3VudCk7CgogICAgICAgIGFzc2VydEVxdWl2YWxl\nbmNlKGMsIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RJbXBs\naWNpdFJvb3QoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0IGEg\nZnJvbSBBY2NvdW50IGEiOwogICAgICAgIAogICAgICAgIENyaXRlcmlhUXVl\ncnk8QWNjb3VudD4gYyA9IGNiLmNyZWF0ZVF1ZXJ5KEFjY291bnQuY2xhc3Mp\nOwogICAgICAgIGMuZnJvbShBY2NvdW50LmNsYXNzKTsKCiAgICAgICAgYXNz\nZXJ0RXF1aXZhbGVuY2UoYywganBxbCk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgdGVzdEVxdWFsV2l0aEF0dHJpYnV0ZUFuZExpdGVyYWwoKSB7CiAgICAg\nICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0IGEgZnJvbSBBY2NvdW50IGEgd2hl\ncmUgYS5iYWxhbmNlPTEwMCI7CgogICAgICAgIENyaXRlcmlhUXVlcnkgYyA9\nIGNiLmNyZWF0ZVF1ZXJ5KCk7CiAgICAgICAgUm9vdDxBY2NvdW50PiBhY2Nv\ndW50ID0gYy5mcm9tKEFjY291bnQuY2xhc3MpOwogICAgICAgIGMuc2VsZWN0\nKGFjY291bnQpLndoZXJlKGNiLmVxdWFsKGFjY291bnQuZ2V0KEFjY291bnRf\nLmJhbGFuY2UpLCAxMDApKTsKCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2Uo\nYywganBxbCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEVxdWFsV2l0\naEF0dHJpYnV0ZUFuZEF0dHJpYnV0ZSgpIHsKICAgICAgICBTdHJpbmcganBx\nbCA9ICJzZWxlY3QgYSBmcm9tIEFjY291bnQgYSB3aGVyZSBhLmJhbGFuY2U9\nYS5sb2FuIjsKCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxBY2NvdW50PiBjID0g\nY2IuY3JlYXRlUXVlcnkoQWNjb3VudC5jbGFzcyk7CiAgICAgICAgUm9vdDxB\nY2NvdW50PiBhY2NvdW50ID0gYy5mcm9tKEFjY291bnQuY2xhc3MpOwogICAg\nICAgIGMuc2VsZWN0KGFjY291bnQpLndoZXJlKAogICAgICAgICAgICAgICAg\nY2IuZXF1YWwoYWNjb3VudC5nZXQoQWNjb3VudF8uYmFsYW5jZSksIGFjY291\nbnQKICAgICAgICAgICAgICAgICAgICAgICAgLmdldChBY2NvdW50Xy5sb2Fu\nKSkpOwoKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShjLCBqcHFsKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0UHJvamVjdGlvbigpIHsKICAgICAg\nICBTdHJpbmcganBxbCA9ICJzZWxlY3QgYS5iYWxhbmNlLGEubG9hbiBmcm9t\nIEFjY291bnQgYSI7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxUdXBsZT4gYyA9\nIGNiLmNyZWF0ZVR1cGxlUXVlcnkoKTsKICAgICAgICBSb290PEFjY291bnQ+\nIGFjY291bnQgPSBjLmZyb20oQWNjb3VudC5jbGFzcyk7CiAgICAgICAgYy5t\ndWx0aXNlbGVjdChhY2NvdW50LmdldChBY2NvdW50Xy5iYWxhbmNlKSwgYWNj\nb3VudC5nZXQoQWNjb3VudF8ubG9hbikpOwogICAgICAgIGFzc2VydEVxdWl2\nYWxlbmNlKGMsIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RB\nYnNFeHByZXNzaW9uKCkgewogICAgICAgIFN0cmluZyBqcHFsID0gInNlbGVj\ndCBhIGZyb20gQWNjb3VudCBhIHdoZXJlIGFicyhhLmJhbGFuY2UpPTEwMCI7\nCgogICAgICAgIENyaXRlcmlhUXVlcnk8QWNjb3VudD4gYyA9IGNiLmNyZWF0\nZVF1ZXJ5KEFjY291bnQuY2xhc3MpOwogICAgICAgIFJvb3Q8QWNjb3VudD4g\nYWNjb3VudCA9IGMuZnJvbShBY2NvdW50LmNsYXNzKTsKCiAgICAgICAgYy5z\nZWxlY3QoYWNjb3VudCkud2hlcmUoY2IuZXF1YWwoY2IuYWJzKGFjY291bnQu\nZ2V0KEFjY291bnRfLmJhbGFuY2UpKSwgMTAwKSk7CiAgICAgICAgYXNzZXJ0\nRXF1aXZhbGVuY2UoYywganBxbCk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\ndGVzdEF2Z0V4cHJlc3Npb24oKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAi\nc2VsZWN0IGF2ZyhhLmJhbGFuY2UpIGZyb20gQWNjb3VudCBhIjsKCiAgICAg\nICAgQ3JpdGVyaWFRdWVyeTxEb3VibGU+IGMgPSBjYi5jcmVhdGVRdWVyeShE\nb3VibGUuY2xhc3MpOwogICAgICAgIFJvb3Q8QWNjb3VudD4gYWNjb3VudCA9\nIGMuZnJvbShBY2NvdW50LmNsYXNzKTsKCiAgICAgICAgYy5zZWxlY3QoY2Iu\nYXZnKGFjY291bnQuZ2V0KEFjY291bnRfLmJhbGFuY2UpKSk7CiAgICAgICAg\nYXNzZXJ0RXF1aXZhbGVuY2UoYywganBxbCk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgdGVzdEluUHJlZGljYXRlKCkgewogICAgICAgIFN0cmluZyBqcHFs\nID0gInNlbGVjdCBhIGZyb20gQWNjb3VudCBhIHdoZXJlIGEubmFtZSBpbiAo\nJ1gnLCdZJywnWicpIjsKICAgICAgICBDcml0ZXJpYVF1ZXJ5PEFjY291bnQ+\nIGMgPSBjYi5jcmVhdGVRdWVyeShBY2NvdW50LmNsYXNzKTsKICAgICAgICBS\nb290PEFjY291bnQ+IGFjY291bnQgPSBjLmZyb20oQWNjb3VudC5jbGFzcyk7\nCiAgICAgICAgYy53aGVyZShjYi5pbihhY2NvdW50LmdldChBY2NvdW50Xy5u\nYW1lKSkudmFsdWUoIlgiKS52YWx1ZSgiWSIpLnZhbHVlKCJaIikpOwogICAg\nICAgIGFzc2VydEVxdWl2YWxlbmNlKGMsIGpwcWwpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHRlc3RJblByZWRpY2F0ZVdpdGhQYXRoKCkgewogICAgICAg\nIFN0cmluZyBqcHFsID0gInNlbGVjdCBhIGZyb20gQWNjb3VudCBhIHdoZXJl\nIGEub3duZXIubmFtZSBpbiAoJ1gnLCdZJywnWicpIjsKICAgICAgICBDcml0\nZXJpYVF1ZXJ5PEFjY291bnQ+IGMgPSBjYi5jcmVhdGVRdWVyeShBY2NvdW50\nLmNsYXNzKTsKICAgICAgICBSb290PEFjY291bnQ+IGFjY291bnQgPSBjLmZy\nb20oQWNjb3VudC5jbGFzcyk7CiAgICAgICAgYy53aGVyZShjYi5pbihhY2Nv\ndW50LmdldChBY2NvdW50Xy5vd25lcikuZ2V0KFBlcnNvbl8ubmFtZSkpLnZh\nbHVlKCJYIikKICAgICAgICAgICAgICAgIC52YWx1ZSgiWSIpLnZhbHVlKCJa\nIikpOwogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKGMsIGpwcWwpOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RCaW5hcnlQcmVkaWNhdGUoKSB7CiAg\nICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0IGEgZnJvbSBBY2NvdW50IGEg\nd2hlcmUgYS5iYWxhbmNlPjEwMCBhbmQgYS5iYWxhbmNlPDIwMCI7CgogICAg\nICAgIENyaXRlcmlhUXVlcnk8QWNjb3VudD4gYyA9IGNiLmNyZWF0ZVF1ZXJ5\nKEFjY291bnQuY2xhc3MpOwogICAgICAgIFJvb3Q8QWNjb3VudD4gYWNjb3Vu\ndCA9IGMuZnJvbShBY2NvdW50LmNsYXNzKTsKICAgICAgICBjLnNlbGVjdChh\nY2NvdW50KS53aGVyZSgKICAgICAgICAgICAgICAgIGNiLmFuZChjYi5ncmVh\ndGVyVGhhbihhY2NvdW50LmdldChBY2NvdW50Xy5iYWxhbmNlKSwgMTAwKSwg\nY2IKICAgICAgICAgICAgICAgICAgICAgICAgLmxlc3NUaGFuKGFjY291bnQu\nZ2V0KEFjY291bnRfLmJhbGFuY2UpLCAyMDApKSk7CgogICAgICAgIGFzc2Vy\ndEVxdWl2YWxlbmNlKGMsIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHRlc3RFcXVhbFdpdGhBdHRyaWJ1dGVBbmRVbmFyeUV4cHJlc3Npb24oKSB7\nCiAgICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0IGEgZnJvbSBBY2NvdW50\nIGEgd2hlcmUgYS5iYWxhbmNlPWFicyhhLmJhbGFuY2UpIjsKCiAgICAgICAg\nQ3JpdGVyaWFRdWVyeTxBY2NvdW50PiBjID0gY2IuY3JlYXRlUXVlcnkoQWNj\nb3VudC5jbGFzcyk7CiAgICAgICAgUm9vdDxBY2NvdW50PiBhY2NvdW50ID0g\nYy5mcm9tKEFjY291bnQuY2xhc3MpOwogICAgICAgIGMuc2VsZWN0KGFjY291\nbnQpLndoZXJlKAogICAgICAgICAgICAgICAgY2IuZXF1YWwoYWNjb3VudC5n\nZXQoQWNjb3VudF8uYmFsYW5jZSksIGNiLmFicyhhY2NvdW50CiAgICAgICAg\nICAgICAgICAgICAgICAgIC5nZXQoQWNjb3VudF8uYmFsYW5jZSkpKSk7Cgog\nICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKGMsIGpwcWwpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHRlc3RCZXR3ZWVuRXhwcmVzc2lvbigpIHsKICAgICAg\nICBTdHJpbmcganBxbCA9CiAgICAgICAgICAgICJzZWxlY3QgYSBmcm9tIEFj\nY291bnQgYSB3aGVyZSBhLmJhbGFuY2UgYmV0d2VlbiAxMDAgYW5kIDIwMCI7\nCgogICAgICAgIENyaXRlcmlhUXVlcnk8QWNjb3VudD4gYyA9IGNiLmNyZWF0\nZVF1ZXJ5KEFjY291bnQuY2xhc3MpOwogICAgICAgIFJvb3Q8QWNjb3VudD4g\nYWNjb3VudCA9IGMuZnJvbShBY2NvdW50LmNsYXNzKTsKICAgICAgICBjLnNl\nbGVjdChhY2NvdW50KS53aGVyZSgKICAgICAgICAgICAgICAgIGNiLmJldHdl\nZW4oYWNjb3VudC5nZXQoQWNjb3VudF8uYmFsYW5jZSksIDEwMCwgMjAwKSk7\nCgogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKGMsIGpwcWwpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHRlc3RTaW1wbGVQYXRoKCkgewogICAgICAgIFN0\ncmluZyBqcHFsID0gInNlbGVjdCBhIGZyb20gQWNjb3VudCBhIHdoZXJlIGEu\nb3duZXIubmFtZT0nUGluYWtpJyI7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxB\nY2NvdW50PiBjID0gY2IuY3JlYXRlUXVlcnkoQWNjb3VudC5jbGFzcyk7CiAg\nICAgICAgUm9vdDxBY2NvdW50PiBhID0gYy5mcm9tKEFjY291bnQuY2xhc3Mp\nOwogICAgICAgIGMud2hlcmUoY2IuZXF1YWwoYS5nZXQoQWNjb3VudF8ub3du\nZXIpLmdldChQZXJzb25fLm5hbWUpLCAiUGluYWtpIikpOwoKICAgICAgICBh\nc3NlcnRFcXVpdmFsZW5jZShjLCBqcHFsKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0U2ltcGxlTGVmdEpvaW4oKSB7CiAgICAgICAgU3RyaW5nIGpw\ncWwgPSAiU0VMRUNUIGMgRlJPTSBDdXN0b21lciBjIExFRlQgSk9JTiBjLm9y\nZGVycyBvICI7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxDdXN0b21lcj4gYyA9\nIGNiLmNyZWF0ZVF1ZXJ5KEN1c3RvbWVyLmNsYXNzKTsKICAgICAgICBjLmZy\nb20oQ3VzdG9tZXIuY2xhc3MpLmpvaW4oQ3VzdG9tZXJfLm9yZGVycywgSm9p\nblR5cGUuTEVGVCk7CiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UoYywganBx\nbCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdE11bHRpcGFydE5hdmln\nYXRpb24oKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0IGEgZnJv\nbSBBIGEgd2hlcmUgYS5iLmFnZT0yMiI7CiAgICAgICAgCiAgICAgICAgQ3Jp\ndGVyaWFRdWVyeTxBPiBjcSA9IGNiLmNyZWF0ZVF1ZXJ5KEEuY2xhc3MpOwog\nICAgICAgIFJvb3Q8QT4gYSA9IGNxLmZyb20oQS5jbGFzcyk7CiAgICAgICAg\nY3Eud2hlcmUoY2IuZXF1YWwoYS5nZXQoQV8uYikuZ2V0KEJfLmFnZSksIDIy\nKSk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UoY3EsIGpw\ncWwpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0TXVsdGlMZXZl\nbEpvaW5zKCkgewogICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVDVCBjIEZS\nT00gQ3VzdG9tZXIgYyBKT0lOIGMub3JkZXJzIG8gIiAKICAgICAgICAgICAg\nICAgICAgICArICJKT0lOIG8ubGluZUl0ZW1zIGkgV0hFUkUgaS5wcm9kdWN0\nLnByb2R1Y3RUeXBlID0gJ3ByaW50ZXInIjsKCiAgICAgICAgQ3JpdGVyaWFR\ndWVyeTxDdXN0b21lcj4gY3EgPSBjYi5jcmVhdGVRdWVyeShDdXN0b21lci5j\nbGFzcyk7CiAgICAgICAgUm9vdDxDdXN0b21lcj4gYyA9IGNxLmZyb20oQ3Vz\ndG9tZXIuY2xhc3MpOwogICAgICAgIEpvaW48Q3VzdG9tZXIsIE9yZGVyPiBv\nID0gYy5qb2luKEN1c3RvbWVyXy5vcmRlcnMpOwogICAgICAgIEpvaW48T3Jk\nZXIsIExpbmVJdGVtPiBpID0gby5qb2luKE9yZGVyXy5saW5lSXRlbXMpOwog\nICAgICAgIGNxLnNlbGVjdChjKQogICAgICAgICAgICAud2hlcmUoY2IuZXF1\nYWwoaS5nZXQoTGluZUl0ZW1fLnByb2R1Y3QpCiAgICAgICAgICAgIC5nZXQo\nUHJvZHVjdF8ucHJvZHVjdFR5cGUpLCAicHJpbnRlciIpKTsKCiAgICAgICAg\nYXNzZXJ0RXF1aXZhbGVuY2UoY3EsIGpwcWwpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RKb2luc05vdFByZXNlbnRJbldoZXJlQ2xhdXNlKCkgewog\nICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVDVCBjIEZST00gQ3VzdG9tZXIg\nYyBMRUZUIEpPSU4gYy5vcmRlcnMgbyBXSEVSRSBjLnN0YXR1cyA9IDEiOwog\nICAgICAgIAogICAgICAgIENyaXRlcmlhUXVlcnk8Q3VzdG9tZXI+IGMgPSBj\nYi5jcmVhdGVRdWVyeShDdXN0b21lci5jbGFzcyk7CiAgICAgICAgUm9vdDxD\ndXN0b21lcj4gY3VzdCA9IGMuZnJvbShDdXN0b21lci5jbGFzcyk7CiAgICAg\nICAgSm9pbjxDdXN0b21lciwgT3JkZXI+IG9yZGVyID0gY3VzdAogICAgICAg\nIC5qb2luKEN1c3RvbWVyXy5vcmRlcnMsIEpvaW5UeXBlLkxFRlQpOwogICAg\nICAgIGMud2hlcmUoY2IuZXF1YWwoY3VzdC5nZXQoQ3VzdG9tZXJfLnN0YXR1\ncyksIDEpKS5zZWxlY3QoY3VzdCk7CgogICAgICAgIGFzc2VydEVxdWl2YWxl\nbmNlKGMsIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RGZXRj\naEpvaW5zKCkgewogICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVDVCBkIEZS\nT00gRGVwYXJ0bWVudCBkIExFRlQgSk9JTiBGRVRDSCBkLmVtcGxveWVlcyBX\nSEVSRSBkLmRlcHRObyA9IDEiOwogICAgICAgIAogICAgICAgIENyaXRlcmlh\nUXVlcnk8RGVwYXJ0bWVudD4gcSA9IGNiLmNyZWF0ZVF1ZXJ5KERlcGFydG1l\nbnQuY2xhc3MpOwogICAgICAgIFJvb3Q8RGVwYXJ0bWVudD4gZCA9IHEuZnJv\nbShEZXBhcnRtZW50LmNsYXNzKTsKICAgICAgICBkLmZldGNoKERlcGFydG1l\nbnRfLmVtcGxveWVlcywgSm9pblR5cGUuTEVGVCk7CiAgICAgICAgcS53aGVy\nZShjYi5lcXVhbChkLmdldChEZXBhcnRtZW50Xy5kZXB0Tm8pLCAxKSkuc2Vs\nZWN0KGQpOwoKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShxLCBqcHFsKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0Sm9pbmVkUGF0aEluUHJvamVj\ndGlvbigpIHsKICAgICAgICBTdHJpbmcganBxbDEgPSAiU0VMRUNUIHAudmVu\nZG9yIEZST00gRW1wbG95ZWUgZSBKT0lOIGUuY29udGFjdEluZm8ucGhvbmVz\nIHAgIgogICAgICAgICAgICAgICAgICAgICArICJXSEVSRSBlLmNvbnRhY3RJ\nbmZvLmFkZHJlc3MuemlwQ29kZSA9ICc5NTA1NCciOwoKICAgICAgICBTdHJp\nbmcganBxbCA9ICJTRUxFQ1QgcC52ZW5kb3IgRlJPTSBFbXBsb3llZSBlIEpP\nSU4gZS5jb250YWN0SW5mbyBjIEpPSU4gYy5waG9uZXMgcCAiCiAgICAgICAg\nICAgICAgICAgICAgKyAiV0hFUkUgYy5hZGRyZXNzLnppcENvZGUgPSAnOTUw\nNTQnIjsKCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxTdHJpbmc+IGNxID0gY2Iu\nY3JlYXRlUXVlcnkoU3RyaW5nLmNsYXNzKTsKICAgICAgICBSb290PEVtcGxv\neWVlPiBlID0gY3EuZnJvbShFbXBsb3llZS5jbGFzcyk7CiAgICAgICAgSm9p\nbjxDb250YWN0LCBQaG9uZT4gcCA9IGUuam9pbihFbXBsb3llZV8uY29udGFj\ndEluZm8pLmpvaW4oQ29udGFjdF8ucGhvbmVzKTsKICAgICAgICBjcS53aGVy\nZShjYi5lcXVhbChlLmdldChFbXBsb3llZV8uY29udGFjdEluZm8pLmdldChD\nb250YWN0Xy5hZGRyZXNzKQogICAgICAgICAgICAgICAgLmdldChBZGRyZXNz\nXy56aXBDb2RlKSwgIjk1MDU0IikpOwogICAgICAgIGNxLnNlbGVjdChwLmdl\ndChQaG9uZV8udmVuZG9yKSk7CgogICAgICAgIGFzc2VydEVxdWl2YWxlbmNl\nKGNxLCBqcHFsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0S2V5RXhw\ncmVzc2lvbigpIHsKLy8gICAgICAgIFN0cmluZyBqcHFsID0KLy8gICAgICAg\nICAgICAiU0VMRUNUIGkubmFtZSwgcCBGUk9NIEl0ZW0gaSBKT0lOIGkucGhv\ndG9zIHAgV0hFUkUgS0VZKHApICIKLy8gICAgICAgICAgICArICJMSUtFICcl\nZWdyZXQlJyI7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0IGkubmFt\nZSwgVkFMVUUocCkgZnJvbSBJdGVtIGkgam9pbiBpLnBob3RvcyBwIHdoZXJl\nIEtFWShwKSBsaWtlICdlZ3JldCciOwoKICAgICAgICBDcml0ZXJpYVF1ZXJ5\nPFR1cGxlPiBxID0gY2IuY3JlYXRlVHVwbGVRdWVyeSgpOwogICAgICAgIFJv\nb3Q8SXRlbT4gaXRlbSA9IHEuZnJvbShJdGVtLmNsYXNzKTsKICAgICAgICBN\nYXBKb2luPEl0ZW0sIFN0cmluZywgUGhvdG8+IHBob3RvID0gaXRlbS5qb2lu\nKEl0ZW1fLnBob3Rvcyk7CiAgICAgICAgcS5tdWx0aXNlbGVjdChpdGVtLmdl\ndChJdGVtXy5uYW1lKSwgcGhvdG8pLndoZXJlKGNiLmxpa2UocGhvdG8ua2V5\nKCksICIlZWdyZXQlIikpOwoKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShx\nLCBqcHFsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0SW5kZXhFeHBy\nZXNzaW9uKCkgewogICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVDVCB0IEZS\nT00gQ3JlZGl0Q2FyZCBjIEpPSU4gYy50cmFuc2FjdGlvbkhpc3RvcnkgdCAi\nCiAgICAgICAgICAgICsgIldIRVJFIGMuY3VzdG9tZXIuYWNjb3VudE51bSA9\nIDMyMTk4NyBBTkQgSU5ERVgodCkgQkVUV0VFTiAwIEFORCA5IjsKICAgICAg\nICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PFRyYW5zYWN0aW9uSGlzdG9yeT4g\ncSA9IGNiLmNyZWF0ZVF1ZXJ5KFRyYW5zYWN0aW9uSGlzdG9yeS5jbGFzcyk7\nCiAgICAgICAgUm9vdDxDcmVkaXRDYXJkPiBjID0gcS5mcm9tKENyZWRpdENh\ncmQuY2xhc3MpOwogICAgICAgIExpc3RKb2luPENyZWRpdENhcmQsIFRyYW5z\nYWN0aW9uSGlzdG9yeT4gdCA9IGMKICAgICAgICAuam9pbihDcmVkaXRDYXJk\nXy50cmFuc2FjdGlvbkhpc3RvcnkpOwogICAgICAgIHEuc2VsZWN0KHQpLndo\nZXJlKGNiLmFuZCgKICAgICAgICAgICAgY2IuZXF1YWwoYy5nZXQoQ3JlZGl0\nQ2FyZF8uY3VzdG9tZXIpLmdldChDdXN0b21lcl8uYWNjb3VudE51bSksCiAg\nICAgICAgICAgICAgICAzMjE5ODcpLCAKICAgICAgICAgICAgY2IuYmV0d2Vl\nbih0LmluZGV4KCksIDAsIDkpKSk7CgogICAgICAgIGFzc2VydEVxdWl2YWxl\nbmNlKHEsIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RJc0Vt\ncHR5RXhwcmVzc2lvbigpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJTRUxF\nQ1QgbyBGUk9NIE9yZGVyIG8gV0hFUkUgby5saW5lSXRlbXMgSVMgRU1QVFki\nOwogICAgICAgIAogICAgICAgIENyaXRlcmlhUXVlcnk8T3JkZXI+IHEgPSBj\nYi5jcmVhdGVRdWVyeShPcmRlci5jbGFzcyk7CiAgICAgICAgUm9vdDxPcmRl\ncj4gb3JkZXIgPSBxLmZyb20oT3JkZXIuY2xhc3MpOwogICAgICAgIHEud2hl\ncmUoY2IuaXNFbXB0eShvcmRlci5nZXQoT3JkZXJfLmxpbmVJdGVtcykpKS5z\nZWxlY3Qob3JkZXIpOwoKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShxLCBq\ncHFsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0RXhwcmVzc2lvbklu\nUHJvamVjdGlvbigpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJTRUxFQ1Qg\nby5xdWFudGl0eSwgby50b3RhbENvc3QqMS4wOCwgIgogICAgICAgICAgICAr\nICJhLnppcENvZGUgRlJPTSBDdXN0b21lciBjIEpPSU4gYy5vcmRlcnMgbyBK\nT0lOIGMuYWRkcmVzcyBhICIKICAgICAgICAgICAgKyAiV0hFUkUgYS5zdGF0\nZSA9ICdDQScgQU5EIGEuY291bnR5ID0gJ1NhbnRhIENsYXJhJyI7CiAgICAg\nICAgCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxUdXBsZT4gY3EgPSBjYi5jcmVh\ndGVUdXBsZVF1ZXJ5KCk7CiAgICAgICAgUm9vdDxDdXN0b21lcj4gYyA9IGNx\nLmZyb20oQ3VzdG9tZXIuY2xhc3MpOwogICAgICAgIEpvaW48Q3VzdG9tZXIs\nIE9yZGVyPiBvID0gYy5qb2luKEN1c3RvbWVyXy5vcmRlcnMpOwogICAgICAg\nIEpvaW48Q3VzdG9tZXIsIEFkZHJlc3M+IGEgPSBjLmpvaW4oQ3VzdG9tZXJf\nLmFkZHJlc3MpOwogICAgICAgIGNxLndoZXJlKGNiLmFuZCgKICAgICAgICAg\nICAgY2IuZXF1YWwoYS5nZXQoQWRkcmVzc18uc3RhdGUpLCAiQ0EiKSwgCiAg\nICAgICAgICAgIGNiLmVxdWFsKGEuZ2V0KEFkZHJlc3NfLmNvdW50eSksICJT\nYW50YSBDbGFyYSIpKSk7CiAgICAgICAgY3EubXVsdGlzZWxlY3Qoby5nZXQo\nT3JkZXJfLnF1YW50aXR5KSwgY2IucHJvZChvCiAgICAgICAgICAgICAgICAu\nZ2V0KE9yZGVyXy50b3RhbENvc3QpLCAxLjA4KSwgYS5nZXQoQWRkcmVzc18u\nemlwQ29kZSkpOwoKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShjcSwganBx\nbCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFR5cGVFeHByZXNzaW9u\nKCkgewogICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVDVCBUWVBFKGUpIEZS\nT00gRW1wbG95ZWUgZSBXSEVSRSBUWVBFKGUpIDw+IEV4ZW1wdCI7CiAgICAg\nICAgCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxPYmplY3Q+IHEgPSBjYi5jcmVh\ndGVRdWVyeSgpOwogICAgICAgIFJvb3Q8RW1wbG95ZWU+IGVtcCA9IHEuZnJv\nbShFbXBsb3llZS5jbGFzcyk7CiAgICAgICAgcS5tdWx0aXNlbGVjdChlbXAu\ndHlwZSgpKS53aGVyZShjYi5ub3RFcXVhbChlbXAudHlwZSgpLCBFeGVtcHQu\nY2xhc3MpKTsKCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UocSwganBxbCk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEluZGV4RXhwcmVzc2lvbkFu\nZExpZXRyYWwoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIHcu\nbmFtZSBGUk9NIENvdXJzZSBjIEpPSU4gYy5zdHVkZW50V2FpdExpc3QgdyAi\nCiAgICAgICAgICAgICAgICAgICAgKyAiV0hFUkUgYy5uYW1lID0gJ0NhbGN1\nbHVzJyBBTkQgSU5ERVgodykgPSAwIjsKICAgICAgICAKICAgICAgICBDcml0\nZXJpYVF1ZXJ5PFN0cmluZz4gcSA9IGNiLmNyZWF0ZVF1ZXJ5KFN0cmluZy5j\nbGFzcyk7CiAgICAgICAgUm9vdDxDb3Vyc2U+IGNvdXJzZSA9IHEuZnJvbShD\nb3Vyc2UuY2xhc3MpOwogICAgICAgIExpc3RKb2luPENvdXJzZSwgU3R1ZGVu\ndD4gdyA9IGNvdXJzZS5qb2luKENvdXJzZV8uc3R1ZGVudFdhaXRMaXN0KTsK\nICAgICAgICBxLndoZXJlKGNiLmFuZCgKICAgICAgICAgICAgY2IuZXF1YWwo\nY291cnNlLmdldChDb3Vyc2VfLm5hbWUpLCAiQ2FsY3VsdXMiKSwKICAgICAg\nICAgICAgY2IuZXF1YWwody5pbmRleCgpLCAwKSkpLnNlbGVjdCh3LmdldChT\ndHVkZW50Xy5uYW1lKSk7CgogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKHEs\nIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RBZ2dyZWdhdGVJ\nblByb2plY3Rpb24oKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNU\nIFNVTShpLnByaWNlKSBGUk9NIE9yZGVyIG8gSk9JTiBvLmxpbmVJdGVtcyBp\nICIgKyAKICAgICAgICAgICAgIkpPSU4gby5jdXN0b21lciBjIFdIRVJFIGMu\nbGFzdE5hbWUgPSAnU21pdGgnIEFORCAiICsgCiAgICAgICAgICAgICJjLmZp\ncnN0TmFtZSA9ICdKb2huJyI7CiAgICAgICAgCiAgICAgICAgQ3JpdGVyaWFR\ndWVyeTxEb3VibGU+IHEgPSBjYi5jcmVhdGVRdWVyeShEb3VibGUuY2xhc3Mp\nOwogICAgICAgIFJvb3Q8T3JkZXI+IG8gPSBxLmZyb20oT3JkZXIuY2xhc3Mp\nOwogICAgICAgIEpvaW48T3JkZXIsIExpbmVJdGVtPiBpID0gby5qb2luKE9y\nZGVyXy5saW5lSXRlbXMpOwogICAgICAgIEpvaW48T3JkZXIsIEN1c3RvbWVy\nPiBjID0gby5qb2luKE9yZGVyXy5jdXN0b21lcik7CiAgICAgICAgcS53aGVy\nZShjYi5hbmQoCiAgICAgICAgICAgIGNiLmVxdWFsKGMuZ2V0KEN1c3RvbWVy\nXy5sYXN0TmFtZSksICJTbWl0aCIpLCAKICAgICAgICAgICAgY2IuZXF1YWwo\nYy5nZXQoQ3VzdG9tZXJfLmZpcnN0TmFtZSksICJKb2huIikpKTsKICAgICAg\nICBxLnNlbGVjdChjYi5zdW0oaS5nZXQoTGluZUl0ZW1fLnByaWNlKSkpOwoK\nICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShxLCBqcHFsKTsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0U2l6ZUV4cHJlc3Npb24oKSB7CiAgICAgICAg\nU3RyaW5nIGpwcWwgPSAiU0VMRUNUIFNJWkUoZC5lbXBsb3llZXMpIEZST00g\nRGVwYXJ0bWVudCBkICIKICAgICAgICAgICAgKyAiV0hFUkUgZC5uYW1lID0g\nJ1NhbGVzJyI7CiAgICAgICAgCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxJbnRl\nZ2VyPiBxID0gY2IuY3JlYXRlUXVlcnkoSW50ZWdlci5jbGFzcyk7CiAgICAg\nICAgUm9vdDxEZXBhcnRtZW50PiBkID0gcS5mcm9tKERlcGFydG1lbnQuY2xh\nc3MpOwogICAgICAgIHEud2hlcmUoY2IuZXF1YWwoZC5nZXQoRGVwYXJ0bWVu\ndF8ubmFtZSksICJTYWxlcyIpKTsKICAgICAgICBxLnNlbGVjdChjYi5zaXpl\nKGQuZ2V0KERlcGFydG1lbnRfLmVtcGxveWVlcykpKTsKCiAgICAgICAgYXNz\nZXJ0RXF1aXZhbGVuY2UocSwganBxbCk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgdGVzdENhc2VFeHByZXNzaW9uKCkgewogICAgICAgIFN0cmluZyBqcHFs\nID0gIlNFTEVDVCBlLm5hbWUsIENBU0UgIiAKICAgICAgICAJCSsgIldIRU4g\nZS5yYXRpbmcgPSAxIFRIRU4gZS5zYWxhcnkgKiAxLjEgIgogICAgICAgICAg\nICAgICAgKyAiV0hFTiBlLnJhdGluZyA9IDIgVEhFTiBlLnNhbGFyeSAqIDEu\nMiAiCiAgICAgICAgICAgICAgICArICJFTFNFIGUuc2FsYXJ5ICogMS4wMSBF\nTkQgIgogICAgICAgICAgICArICJGUk9NIEVtcGxveWVlIGUgV0hFUkUgZS5k\nZXBhcnRtZW50Lm5hbWUgPSAnRW5naW5lZXJpbmcnIjsKICAgICAgICBDcml0\nZXJpYVF1ZXJ5PD8+IHEgPSBjYi5jcmVhdGVRdWVyeSgpOwogICAgICAgIFJv\nb3Q8RW1wbG95ZWU+IGUgPSBxLmZyb20oRW1wbG95ZWUuY2xhc3MpOwogICAg\nICAgIHEud2hlcmUoY2IuZXF1YWwoZS5nZXQoRW1wbG95ZWVfLmRlcGFydG1l\nbnQpLmdldChEZXBhcnRtZW50Xy5uYW1lKSwgIkVuZ2luZWVyaW5nIikpOwog\nICAgICAgIHEubXVsdGlzZWxlY3QoZS5nZXQoRW1wbG95ZWVfLm5hbWUpLCAK\nICAgICAgICAgICAgICAgIGNiLnNlbGVjdENhc2UoKQogICAgICAgICAgICAg\nICAgICAud2hlbihjYi5lcXVhbChlLmdldChFbXBsb3llZV8ucmF0aW5nKSwg\nMSksIGNiLnByb2QoZS5nZXQoRW1wbG95ZWVfLnNhbGFyeSksIDEuMSkpCiAg\nICAgICAgICAgICAgICAgIC53aGVuKGNiLmVxdWFsKGUuZ2V0KEVtcGxveWVl\nXy5yYXRpbmcpLCAyKSwgY2IucHJvZChlLmdldChFbXBsb3llZV8uc2FsYXJ5\nKSwgMS4yKSkKICAgICAgICAgICAgICAgICAgLm90aGVyd2lzZShjYi5wcm9k\nKGUuZ2V0KEVtcGxveWVlXy5zYWxhcnkpLCAxLjAxKSkpOwoKICAgICAgICBh\nc3NlcnRFcXVpdmFsZW5jZShxLCBqcHFsKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0RXhwcmVzc2lvbjEoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwg\nPSAiU0VMRUNUIG8ucXVhbnRpdHksIG8udG90YWxDb3N0KjEuMDgsICIKICAg\nICAgICAgICAgKyAiYS56aXBDb2RlIEZST00gQ3VzdG9tZXIgYyBKT0lOIGMu\nb3JkZXJzIG8gSk9JTiBjLmFkZHJlc3MgYSAiCiAgICAgICAgICAgICsgIldI\nRVJFIGEuc3RhdGUgPSAnQ0EnIEFORCBhLmNvdW50eSA9ICdTYW50YSBDbGFy\nYSciOwogICAgICAgIAogICAgICAgIENyaXRlcmlhUXVlcnk8VHVwbGU+IHEg\nPSBjYi5jcmVhdGVUdXBsZVF1ZXJ5KCk7CiAgICAgICAgUm9vdDxDdXN0b21l\ncj4gY3VzdCA9IHEuZnJvbShDdXN0b21lci5jbGFzcyk7CiAgICAgICAgSm9p\nbjxDdXN0b21lciwgT3JkZXI+IG9yZGVyID0gY3VzdC5qb2luKEN1c3RvbWVy\nXy5vcmRlcnMpOwogICAgICAgIEpvaW48Q3VzdG9tZXIsIEFkZHJlc3M+IGFk\nZHJlc3MgPSBjdXN0LmpvaW4oQ3VzdG9tZXJfLmFkZHJlc3MpOwogICAgICAg\nIHEud2hlcmUoY2IuYW5kKAogICAgICAgICAgICBjYi5lcXVhbChhZGRyZXNz\nLmdldChBZGRyZXNzXy5zdGF0ZSksICJDQSIpLCAKICAgICAgICAgICAgY2Iu\nZXF1YWwoYWRkcmVzcy5nZXQoQWRkcmVzc18uY291bnR5KSwgIlNhbnRhIENs\nYXJhIikpKTsKICAgICAgICBxLm11bHRpc2VsZWN0KG9yZGVyLmdldChPcmRl\ncl8ucXVhbnRpdHkpLCBjYi5wcm9kKG9yZGVyCiAgICAgICAgICAgICAgICAu\nZ2V0KE9yZGVyXy50b3RhbENvc3QpLCAxLjA4KSwgYWRkcmVzcy5nZXQoQWRk\ncmVzc18uemlwQ29kZSkpOwoKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShx\nLCBqcHFsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0RXhwcmVzc2lv\nbjMoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIHcubmFtZSBG\nUk9NIENvdXJzZSBjIEpPSU4gYy5zdHVkZW50V2FpdExpc3QgdyAiCiAgICAg\nICAgICAgICsgIldIRVJFIGMubmFtZSA9ICdDYWxjdWx1cycgQU5EIElOREVY\nKHcpID0gMCI7CiAgICAgICAgCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxTdHJp\nbmc+IHEgPSBjYi5jcmVhdGVRdWVyeShTdHJpbmcuY2xhc3MpOwogICAgICAg\nIFJvb3Q8Q291cnNlPiBjb3Vyc2UgPSBxLmZyb20oQ291cnNlLmNsYXNzKTsK\nICAgICAgICBMaXN0Sm9pbjxDb3Vyc2UsIFN0dWRlbnQ+IHcgPSBjb3Vyc2Uu\nam9pbihDb3Vyc2VfLnN0dWRlbnRXYWl0TGlzdCk7CiAgICAgICAgcS53aGVy\nZShjYi5hbmQoCiAgICAgICAgICAgIGNiLmVxdWFsKGNvdXJzZS5nZXQoQ291\ncnNlXy5uYW1lKSwgIkNhbGN1bHVzIiksCiAgICAgICAgICAgIGNiLmVxdWFs\nKHcuaW5kZXgoKSwgMCkpKS5zZWxlY3Qody5nZXQoU3R1ZGVudF8ubmFtZSkp\nOwoKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShxLCBqcHFsKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0R2VuZXJhbENhc2VFeHByZXNzaW9uKCkg\newogICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVDVCBlLm5hbWUsIENBU0Ug\nIgogICAgICAgICAgICArICJXSEVOIGUucmF0aW5nID0gMSBUSEVOIGUuc2Fs\nYXJ5ICogMS4xICIKICAgICAgICAgICAgKyAiV0hFTiBlLnJhdGluZyA9IDIg\nVEhFTiBlLnNhbGFyeSAqIDEuMiBFTFNFIGUuc2FsYXJ5ICogIgogICAgICAg\nICAgICArICIxLjAxIEVORCAiCiAgICAgICAgICAgICsgIkZST00gRW1wbG95\nZWUgZSBXSEVSRSBlLmRlcGFydG1lbnQubmFtZSA9ICdFbmdpbmVlcmluZyci\nOwogICAgICAgIENyaXRlcmlhUXVlcnk8Pz4gcSA9IGNiLmNyZWF0ZVF1ZXJ5\nKCk7CiAgICAgICAgUm9vdDxFbXBsb3llZT4gZSA9IHEuZnJvbShFbXBsb3ll\nZS5jbGFzcyk7CiAgICAgICAgcS53aGVyZShjYi5lcXVhbChlLmdldChFbXBs\nb3llZV8uZGVwYXJ0bWVudCkuZ2V0KERlcGFydG1lbnRfLm5hbWUpLCAiRW5n\naW5lZXJpbmciKSk7CiAgICAgICAgcS5tdWx0aXNlbGVjdChlLmdldChFbXBs\nb3llZV8ubmFtZSksIAogICAgICAgICAgICAgICAgY2Iuc2VsZWN0Q2FzZSgp\nCiAgICAgICAgICAgICAgICAgIC53aGVuKGNiLmVxdWFsKGUuZ2V0KEVtcGxv\neWVlXy5yYXRpbmcpLCAxKSwgY2IucHJvZChlLmdldChFbXBsb3llZV8uc2Fs\nYXJ5KSwgMS4xKSkKICAgICAgICAgICAgICAgICAgLndoZW4oY2IuZXF1YWwo\nZS5nZXQoRW1wbG95ZWVfLnJhdGluZyksIDIpLCBjYi5wcm9kKGUuZ2V0KEVt\ncGxveWVlXy5zYWxhcnkpLCAxLjIpKQogICAgICAgICAgICAgICAgICAub3Ro\nZXJ3aXNlKGNiLnByb2QoZS5nZXQoRW1wbG95ZWVfLnNhbGFyeSksIDEuMDEp\nKSk7CgogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKHEsIGpwcWwpOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RTaW1wbGVDYXNlRXhwcmVzc2lvbjEo\nKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIGUubmFtZSwgQ0FT\nRSBlLnJhdGluZyAiCiAgICAgICAgICAgICsgIldIRU4gMSBUSEVOIGUuc2Fs\nYXJ5ICogMS4xICIKICAgICAgICAgICAgKyAiV0hFTiAyIFRIRU4gZS5zYWxh\ncnkgKiAxLjIgRUxTRSBlLnNhbGFyeSAqIDEuMDEgRU5EICIKICAgICAgICAg\nICAgKyAiRlJPTSBFbXBsb3llZSBlIFdIRVJFIGUuZGVwYXJ0bWVudC5uYW1l\nID0gJ0VuZ2luZWVyaW5nJyI7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxUdXBs\nZT4gcSA9IGNiLmNyZWF0ZVR1cGxlUXVlcnkoKTsKICAgICAgICBSb290PEVt\ncGxveWVlPiBlID0gcS5mcm9tKEVtcGxveWVlLmNsYXNzKTsKICAgICAgICBx\nLndoZXJlKGNiLmVxdWFsKGUuZ2V0KEVtcGxveWVlXy5kZXBhcnRtZW50KS5n\nZXQoRGVwYXJ0bWVudF8ubmFtZSksICJFbmdpbmVlcmluZyIpKTsKICAgICAg\nICBFeHByZXNzaW9uPExvbmc+IHNhbGFyeSA9IGUuZ2V0KEVtcGxveWVlXy5z\nYWxhcnkpOyAKICAgICAgICBFeHByZXNzaW9uPEludGVnZXI+IHJhdGluZyAg\nPSBlLmdldChFbXBsb3llZV8ucmF0aW5nKTsKICAgICAgICBxLm11bHRpc2Vs\nZWN0KGUuZ2V0KEVtcGxveWVlXy5uYW1lKSwKICAgICAgICAgICAgICAgICAg\nICAgIGNiLnNlbGVjdENhc2UocmF0aW5nKS4KICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgd2hlbigxLCBjYi5wcm9kKHNhbGFyeSwgMS4xKSkKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAud2hlbigyLCBjYi5wcm9kKHNh\nbGFyeSwgMS4yKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAub3Ro\nZXJ3aXNlKGNiLnByb2Qoc2FsYXJ5LCAxLjAxKSkpOwoKICAgICAgICBhc3Nl\ncnRFcXVpdmFsZW5jZShxLCBqcHFsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0U2ltcGxlQ2FzZUV4cHJlc3Npb24yKCkgewogICAgICAgIFN0cmlu\nZyBqcHFsID0gIlNFTEVDVCBlLm5hbWUsIENBU0UgZS5yYXRpbmcgV0hFTiAx\nIFRIRU4gMTAgIgogICAgICAgICAgICArICJXSEVOIDIgVEhFTiAyMCBFTFNF\nIDMwIEVORCAiCiAgICAgICAgICAgICsgIkZST00gRW1wbG95ZWUgZSBXSEVS\nRSBlLmRlcGFydG1lbnQubmFtZSA9ICdFbmdpbmVlcmluZyciOwogICAgICAg\nIENyaXRlcmlhUXVlcnk8VHVwbGU+IHEgPSBjYi5jcmVhdGVUdXBsZVF1ZXJ5\nKCk7CiAgICAgICAgUm9vdDxFbXBsb3llZT4gZSA9IHEuZnJvbShFbXBsb3ll\nZS5jbGFzcyk7CiAgICAgICAgRXhwcmVzc2lvbjxJbnRlZ2VyPiByYXRpbmcg\nID0gZS5nZXQoRW1wbG95ZWVfLnJhdGluZyk7CiAgICAgICAgcS53aGVyZShj\nYi5lcXVhbChlLmdldChFbXBsb3llZV8uZGVwYXJ0bWVudCkuZ2V0KERlcGFy\ndG1lbnRfLm5hbWUpLCAiRW5naW5lZXJpbmciKSk7CiAgICAgICAgcS5tdWx0\naXNlbGVjdChlLmdldChFbXBsb3llZV8ubmFtZSksIAogICAgICAgICAgICAg\nICAgY2Iuc2VsZWN0Q2FzZShyYXRpbmcpCiAgICAgICAgICAgICAgICAgIC53\naGVuKDEsIDEwKQogICAgICAgICAgICAgICAgICAud2hlbigyLCAyMCkKICAg\nICAgICAgICAgICAgICAgLm90aGVyd2lzZSgzMCkpOwogICAgICAgIGFzc2Vy\ndEVxdWl2YWxlbmNlKHEsIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHRlc3RMaXRlcmFscygpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJTRUxF\nQ1QgcCBGUk9NIFBlcnNvbiBwIHdoZXJlICdKb2UnIE1FTUJFUiBPRiBwLm5p\nY2tOYW1lcyI7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxQZXJzb24+IHEgPSBj\nYi5jcmVhdGVRdWVyeShQZXJzb24uY2xhc3MpOwogICAgICAgIFJvb3Q8UGVy\nc29uPiBwID0gcS5mcm9tKFBlcnNvbi5jbGFzcyk7CiAgICAgICAgcS5zZWxl\nY3QocCkud2hlcmUoY2IuaXNNZW1iZXIoY2IubGl0ZXJhbCgiSm9lIiksIHAu\nZ2V0KFBlcnNvbl8ubmlja05hbWVzKSkpOwoKICAgICAgICBhc3NlcnRFcXVp\ndmFsZW5jZShxLCBqcHFsKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQg\ndGVzdFBhcmFtZXRlcnMxKCkgewogICAgICAgIFN0cmluZyBqcHFsID0gIlNF\nTEVDVCBjIEZST00gQ3VzdG9tZXIgYyBXaGVyZSBjLnN0YXR1cyA9IDpzdGF0\nIjsKICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PEN1c3RvbWVyPiBx\nID0gY2IuY3JlYXRlUXVlcnkoQ3VzdG9tZXIuY2xhc3MpOwogICAgICAgIFJv\nb3Q8Q3VzdG9tZXI+IGMgPSBxLmZyb20oQ3VzdG9tZXIuY2xhc3MpOwogICAg\nICAgIFBhcmFtZXRlcjxJbnRlZ2VyPiBwYXJhbSA9IGNiLnBhcmFtZXRlcihJ\nbnRlZ2VyLmNsYXNzLCAic3RhdCIpOwogICAgICAgIHEuc2VsZWN0KGMpLndo\nZXJlKGNiLmVxdWFsKGMuZ2V0KEN1c3RvbWVyXy5zdGF0dXMpLCBwYXJhbSkp\nOwoKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShuZXcgUXVlcnlEZWNvcmF0\nb3IoKSB7CiAgICAgICAgICAgIHB1YmxpYyB2b2lkIGRlY29yYXRlKFF1ZXJ5\nIHEpIHsKICAgICAgICAgICAgICAgIHEuc2V0UGFyYW1ldGVyKCJzdGF0Iiwg\nMSk7CiAgICAgICAgICAgIH0KICAgICAgICB9LCBxLCBqcHFsKTsKICAgIH0K\nICAgIAogICAgcHVibGljIHZvaWQgdGVzdFBhcmFtZXRlcnMyKCkgewogICAg\nICAgIFN0cmluZyBqcHFsID0gIlNFTEVDVCBjIEZST00gQ3VzdG9tZXIgYyBX\naGVyZSBjLnN0YXR1cyA9IDpzdGF0IEFORCBjLm5hbWUgPSA6bmFtZSI7CiAg\nICAgICAgCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxDdXN0b21lcj4gcSA9IGNi\nLmNyZWF0ZVF1ZXJ5KEN1c3RvbWVyLmNsYXNzKTsKICAgICAgICBSb290PEN1\nc3RvbWVyPiBjID0gcS5mcm9tKEN1c3RvbWVyLmNsYXNzKTsKICAgICAgICBQ\nYXJhbWV0ZXI8SW50ZWdlcj4gcGFyYW0xID0gY2IucGFyYW1ldGVyKEludGVn\nZXIuY2xhc3MsICJzdGF0Iik7CiAgICAgICAgUGFyYW1ldGVyPFN0cmluZz4g\ncGFyYW0yID0gY2IucGFyYW1ldGVyKFN0cmluZy5jbGFzcywgIm5hbWUiKTsK\nICAgICAgICBxLnNlbGVjdChjKS53aGVyZShjYi5hbmQoY2IuZXF1YWwoYy5n\nZXQoQ3VzdG9tZXJfLnN0YXR1cyksIHBhcmFtMSksIAogICAgICAgICAgICAg\nICAgY2IuZXF1YWwoYy5nZXQoQ3VzdG9tZXJfLm5hbWUpLCBwYXJhbTIpKSk7\nCgogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKG5ldyBRdWVyeURlY29yYXRv\ncigpIHsKICAgICAgICAgICAgcHVibGljIHZvaWQgZGVjb3JhdGUoUXVlcnkg\ncSkgewogICAgICAgICAgICAgICAgcS5zZXRQYXJhbWV0ZXIoInN0YXQiLCAx\nKTsKICAgICAgICAgICAgICAgIHEuc2V0UGFyYW1ldGVyKCJuYW1lIiwgInRl\nc3QiKTsKICAgICAgICAgICAgfQogICAgICAgIH0sIHEsIGpwcWwpOwogICAg\nfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0UGFyYW1ldGVyczMoKSB7CiAg\nICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIGMgRlJPTSBDdXN0b21lciBj\nIFdoZXJlIGMuc3RhdHVzID0gOnN0YXQiOwoKICAgICAgICBDcml0ZXJpYVF1\nZXJ5PEN1c3RvbWVyPiBxID0gY2IuY3JlYXRlUXVlcnkoQ3VzdG9tZXIuY2xh\nc3MpOwogICAgICAgIFJvb3Q8Q3VzdG9tZXI+IGMgPSBxLmZyb20oQ3VzdG9t\nZXIuY2xhc3MpOwogICAgICAgIFBhcmFtZXRlcjxJbnRlZ2VyPiBwYXJhbSA9\nIGNiLnBhcmFtZXRlcihJbnRlZ2VyLmNsYXNzLCAic3RhdCIpOwogICAgICAg\nIHEuc2VsZWN0KGMpLndoZXJlKGNiLmVxdWFsKGMuZ2V0KEN1c3RvbWVyXy5z\ndGF0dXMpLCBwYXJhbSkpOwogICAgICAgIAogICAgICAgIGFzc2VydEVxdWl2\nYWxlbmNlKG5ldyBRdWVyeURlY29yYXRvcigpIHsKICAgICAgICAgICAgcHVi\nbGljIHZvaWQgZGVjb3JhdGUoUXVlcnkgcSkgewogICAgICAgICAgICAgICAg\ncS5zZXRQYXJhbWV0ZXIoInN0YXQiLCAxKTsKICAgICAgICAgICAgfQogICAg\nICAgIH0sIHEsIGpwcWwpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0\nZXN0UGFyYW1ldGVyczQoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VM\nRUNUIGMgRlJPTSBDdXN0b21lciBjIFdoZXJlIGMuc3RhdHVzID0gOnN0YXQg\nQU5EIGMubmFtZSA9IDpuYW1lIjsKICAgICAgICAKICAgICAgICBDcml0ZXJp\nYVF1ZXJ5PEN1c3RvbWVyPiBxID0gY2IuY3JlYXRlUXVlcnkoQ3VzdG9tZXIu\nY2xhc3MpOwogICAgICAgIFJvb3Q8Q3VzdG9tZXI+IGMgPSBxLmZyb20oQ3Vz\ndG9tZXIuY2xhc3MpOwogICAgICAgIFBhcmFtZXRlcjxJbnRlZ2VyPiBwYXJh\nbTEgPSBjYi5wYXJhbWV0ZXIoSW50ZWdlci5jbGFzcywgInN0YXQiKTsKICAg\nICAgICBQYXJhbWV0ZXI8U3RyaW5nPiBwYXJhbTIgPSBjYi5wYXJhbWV0ZXIo\nU3RyaW5nLmNsYXNzLCAibmFtZSIpOwogICAgICAgIHEuc2VsZWN0KGMpLndo\nZXJlKGNiLmFuZChjYi5lcXVhbChjLmdldChDdXN0b21lcl8uc3RhdHVzKSwg\ncGFyYW0xKSwgCiAgICAgICAgICAgICAgICBjYi5lcXVhbChjLmdldChDdXN0\nb21lcl8ubmFtZSksIHBhcmFtMikpKTsKICAgICAgICBhc3NlcnRFcXVpdmFs\nZW5jZShuZXcgUXVlcnlEZWNvcmF0b3IoKSB7CiAgICAgICAgICAgIHB1Ymxp\nYyB2b2lkIGRlY29yYXRlKFF1ZXJ5IHEpIHsKICAgICAgICAgICAgICAgIHEu\nc2V0UGFyYW1ldGVyKCJzdGF0IiwgMSk7CiAgICAgICAgICAgICAgICBxLnNl\ndFBhcmFtZXRlcigibmFtZSIsICJ0ZXN0Iik7CiAgICAgICAgICAgIH0KICAg\nICAgICB9LCBxLCBqcHFsKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQg\ndGVzdFBhcmFtZXRlcnM1KCkgewogICAgICAgIFN0cmluZyBqcHFsID0gIlNF\nTEVDVCBjIEZST00gQ3VzdG9tZXIgYyBXaGVyZSBjLnN0YXR1cyBJTiAoOmNv\nbGwpIjsKICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PEN1c3RvbWVy\nPiBxID0gY2IuY3JlYXRlUXVlcnkoQ3VzdG9tZXIuY2xhc3MpOwogICAgICAg\nIFJvb3Q8Q3VzdG9tZXI+IGMgPSBxLmZyb20oQ3VzdG9tZXIuY2xhc3MpOwog\nICAgICAgIFBhcmFtZXRlckV4cHJlc3Npb248TGlzdD4gcGFyYW0xID0gY2Iu\ncGFyYW1ldGVyKExpc3QuY2xhc3MsICJjb2xsIik7CiAgICAgICAgcS53aGVy\nZShjLmdldChDdXN0b21lcl8uc3RhdHVzKS5pbihwYXJhbTEpKTsKICAgICAg\nICBxLnNlbGVjdChjKTsKICAgICAgICBmaW5hbCBMaXN0IHZhbHMgPSBuZXcg\nQXJyYXlMaXN0KCk7CiAgICAgICAgdmFscy5hZGQoMSk7CiAgICAgICAgdmFs\ncy5hZGQoMik7CiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UobmV3IFF1ZXJ5\nRGVjb3JhdG9yKCkgewogICAgICAgICAgICBwdWJsaWMgdm9pZCBkZWNvcmF0\nZShRdWVyeSBxKSB7CiAgICAgICAgICAgICAgICBxLnNldFBhcmFtZXRlcigi\nY29sbCIsIHZhbHMpOwogICAgICAgICAgICB9CiAgICAgICAgfSwgcSwganBx\nbCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RTZWxlY3RMaXN0\nMSgpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJTRUxFQ1Qgdi5sb2NhdGlv\nbi5zdHJlZXQsIEtFWShpKS50aXRsZSwgVkFMVUUoaSkgRlJPTSAiCiAgICAg\nICAgICAgICsgIlZpZGVvU3RvcmUgdiBKT0lOIHYudmlkZW9JbnZlbnRvcnkg\naSBXSEVSRSB2LmxvY2F0aW9uLnppcENvZGUgPSAiCiAgICAgICAgICAgICsg\nIic5NDMwMScgQU5EIFZBTFVFKGkpID4gMCI7CiAgICAgICAgCiAgICAgICAg\nQ3JpdGVyaWFRdWVyeTxUdXBsZT4gcSA9IGNiLmNyZWF0ZVR1cGxlUXVlcnko\nKTsKICAgICAgICBSb290PFZpZGVvU3RvcmU+IHYgPSBxLmZyb20oVmlkZW9T\ndG9yZS5jbGFzcyk7CiAgICAgICAgTWFwSm9pbjxWaWRlb1N0b3JlLCBNb3Zp\nZSwgSW50ZWdlcj4gaSA9IHYuam9pbihWaWRlb1N0b3JlXy52aWRlb0ludmVu\ndG9yeSk7CiAgICAgICAgcS53aGVyZShjYi5hbmQoCiAgICAgICAgY2IuZXF1\nYWwodi5nZXQoVmlkZW9TdG9yZV8ubG9jYXRpb24pLmdldChBZGRyZXNzXy56\naXBDb2RlKSwgIjk0MzAxIiksIAogICAgICAgIGNiLmd0KGkudmFsdWUoKSwg\nMCkpKTsKICAgICAgICBxLm11bHRpc2VsZWN0KHYuZ2V0KFZpZGVvU3RvcmVf\nLmxvY2F0aW9uKS5nZXQoQWRkcmVzc18uc3RyZWV0KSwgCiAgICAgICAgICAg\nICAgICBpLmtleSgpLmdldChNb3ZpZV8udGl0bGUpLCAKICAgICAgICAgICAg\nICAgIGkudmFsdWUoKSk7CgogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKHEs\nIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3ROZXdDb25zdHJ1\nY3QoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIE5FVyBDdXN0\nb21lckRldGFpbHMoYy5pZCwgYy5zdGF0dXMpIEZST00gQ3VzdG9tZXIgYyI7\nCiAgICAgICAgCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxDdXN0b21lckRldGFp\nbHM+IHEgPSBjYi5jcmVhdGVRdWVyeShDdXN0b21lckRldGFpbHMuY2xhc3Mp\nOwoKICAgICAgICBSb290PEN1c3RvbWVyPiBjID0gcS5mcm9tKEN1c3RvbWVy\nLmNsYXNzKTsKICAgICAgICBxLnNlbGVjdChjYi5jb25zdHJ1Y3QoQ3VzdG9t\nZXJEZXRhaWxzLmNsYXNzLCBjLmdldChDdXN0b21lcl8uaWQpLCBjLmdldChD\ndXN0b21lcl8uc3RhdHVzKSkpOwogICAgICAgIGFzc2VydEVxdWl2YWxlbmNl\nKHEsIGpwcWwpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q29u\nc3RydWN0b3JJblByb2plY3Rpb24oKSB7CiAgICAgICAgU3RyaW5nIGpwcWwg\nPSAiU0VMRUNUIE5FVyBDdXN0b21lckRldGFpbHMoYy5pZCwgYy5zdGF0dXMs\nIG8ucXVhbnRpdHkpICIKICAgICAgICAgICAgICAgICAgICArICJGUk9NIEN1\nc3RvbWVyIGMgSk9JTiBjLm9yZGVycyBvIFdIRVJFIG8ucXVhbnRpdHkgPiAx\nMDAiOwogICAgICAgIAogICAgICAgIENyaXRlcmlhUXVlcnk8Q3VzdG9tZXJE\nZXRhaWxzPiBxID0gY2IuY3JlYXRlUXVlcnkoQ3VzdG9tZXJEZXRhaWxzLmNs\nYXNzKTsKICAgICAgICBSb290PEN1c3RvbWVyPiBjID0gcS5mcm9tKEN1c3Rv\nbWVyLmNsYXNzKTsKICAgICAgICBTZXRKb2luPEN1c3RvbWVyLCBPcmRlcj4g\nbyA9IGMuam9pbihDdXN0b21lcl8ub3JkZXJzKTsKICAgICAgICBxLndoZXJl\nKGNiLmd0KG8uZ2V0KE9yZGVyXy5xdWFudGl0eSksIDEwMCkpOwogICAgICAg\nIHEuc2VsZWN0KGNiLmNvbnN0cnVjdChDdXN0b21lckRldGFpbHMuY2xhc3Ms\nIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYy5nZXQoQ3VzdG9tZXJf\nLmlkKSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjLmdldChDdXN0\nb21lcl8uc3RhdHVzKSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBv\nLmdldChPcmRlcl8ucXVhbnRpdHkpKSk7CgogICAgICAgIGFzc2VydEVxdWl2\nYWxlbmNlKHEsIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RN\ndWx0aXBsZUNvbnN0cnVjdG9ySW5Qcm9qZWN0aW9uKCkgewogICAgICAgIFN0\ncmluZyBqcHFsID0gIlNFTEVDVCBORVcgQ3VzdG9tZXJEZXRhaWxzKGMuaWQs\nIGMuc3RhdHVzKSwgIiAKICAgICAgICAgICAgICAgICAgICArICJORVcgQ3Vz\ndG9tZXJGdWxsTmFtZShjLmZpcnN0TmFtZSwgYy5sYXN0TmFtZSkgIgogICAg\nICAgICAgICAgICAgICAgICsgIkZST00gQ3VzdG9tZXIgYyI7CiAgICAgICAg\nCiAgICAgICAgQ3JpdGVyaWFRdWVyeTw/PiBxID0gY2IuY3JlYXRlUXVlcnko\nKTsKICAgICAgICBSb290PEN1c3RvbWVyPiBjID0gcS5mcm9tKEN1c3RvbWVy\nLmNsYXNzKTsKICAgICAgICBxLm11bHRpc2VsZWN0KGNiLmNvbnN0cnVjdChD\ndXN0b21lckRldGFpbHMuY2xhc3MsIAogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIGMuZ2V0KEN1c3RvbWVyXy5pZCksIAogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgIGMuZ2V0KEN1c3RvbWVyXy5zdGF0dXMpKSwKICAgICAg\nICAgICAgICAgIGNiLmNvbnN0cnVjdChDdXN0b21lckZ1bGxOYW1lLmNsYXNz\nLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjLmdldChDdXN0b21l\ncl8uZmlyc3ROYW1lKSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nYy5nZXQoQ3VzdG9tZXJfLmxhc3ROYW1lKSkKICAgICAgICApOwogICAgICAg\nIGVtLmNyZWF0ZVF1ZXJ5KHEpLmdldFJlc3VsdExpc3QoKTsKICAgICAgICAK\nICAgICAgICAvLyBhc3NlcnRFcXVpdmFsZW5jZShxLCBqcHFsKTsKICAgIH0K\nICAgIAogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0U3VicXVlcmllczEoKSB7\nCiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIGdvb2RDdXN0b21lciBG\nUk9NIEN1c3RvbWVyIGdvb2RDdXN0b21lciBXSEVSRSAiCiAgICAgICAgICAg\nICsgImdvb2RDdXN0b21lci5iYWxhbmNlT3dlZCA8IChTRUxFQ1QgQVZHKGMu\nYmFsYW5jZU93ZWQpICIgCiAgICAgICAgICAgICsgIiBGUk9NICIKICAgICAg\nICAgICAgKyAiQ3VzdG9tZXIgYykiOwogICAgICAgIENyaXRlcmlhUXVlcnk8\nQ3VzdG9tZXI+IHEgPSBjYi5jcmVhdGVRdWVyeShDdXN0b21lci5jbGFzcyk7\nCiAgICAgICAgUm9vdDxDdXN0b21lcj4gZ29vZEN1c3RvbWVyID0gcS5mcm9t\nKEN1c3RvbWVyLmNsYXNzKTsKICAgICAgICBTdWJxdWVyeTxEb3VibGU+IHNx\nID0gcS5zdWJxdWVyeShEb3VibGUuY2xhc3MpOwogICAgICAgIFJvb3Q8Q3Vz\ndG9tZXI+IGMgPSBzcS5mcm9tKEN1c3RvbWVyLmNsYXNzKTsKICAgICAgICBx\nLndoZXJlKGNiLmx0KGdvb2RDdXN0b21lci5nZXQoQ3VzdG9tZXJfLmJhbGFu\nY2VPd2VkKSwgc3Euc2VsZWN0KGNiCiAgICAgICAgICAgICAgICAuYXZnKGMu\nZ2V0KEN1c3RvbWVyXy5iYWxhbmNlT3dlZCkpKSkpOwogICAgICAgIHEuc2Vs\nZWN0KGdvb2RDdXN0b21lcik7CgogICAgICAgIGFzc2VydEVxdWl2YWxlbmNl\nKHEsIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RTdWJxdWVy\naWVzMigpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJTRUxFQ1QgRElTVElO\nQ1QgZW1wIEZST00gRW1wbG95ZWUgZW1wIFdIRVJFIEVYSVNUUyAoIgogICAg\nICAgICAgICArICJTRUxFQ1Qgc3BvdXNlRW1wIEZST00gRW1wbG95ZWUgc3Bv\ndXNlRW1wIFdIRVJFIHNwb3VzZUVtcCA9IgogICAgICAgICAgICArICIgZW1w\nLnNwb3VzZSkiOwogICAgICAgIENyaXRlcmlhUXVlcnk8RW1wbG95ZWU+IHEg\nPSBjYi5jcmVhdGVRdWVyeShFbXBsb3llZS5jbGFzcyk7CiAgICAgICAgUm9v\ndDxFbXBsb3llZT4gZW1wID0gcS5mcm9tKEVtcGxveWVlLmNsYXNzKTsKICAg\nICAgICBTdWJxdWVyeTxFbXBsb3llZT4gc3EgPSBxLnN1YnF1ZXJ5KEVtcGxv\neWVlLmNsYXNzKTsKICAgICAgICBSb290PEVtcGxveWVlPiBzcG91c2VFbXAg\nPSBzcS5mcm9tKEVtcGxveWVlLmNsYXNzKTsKICAgICAgICBzcS5zZWxlY3Qo\nc3BvdXNlRW1wKTsKICAgICAgICBzcS53aGVyZShjYi5lcXVhbChzcG91c2VF\nbXAsIGVtcC5nZXQoRW1wbG95ZWVfLnNwb3VzZSkpKTsKICAgICAgICBxLndo\nZXJlKGNiLmV4aXN0cyhzcSkpOwogICAgICAgIHEuc2VsZWN0KGVtcCkuZGlz\ndGluY3QodHJ1ZSk7CgogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKHEsIGpw\ncWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RTdWJxdWVyaWVzMygp\nIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJTRUxFQ1QgZW1wIEZST00gRW1w\nbG95ZWUgZW1wIFdIRVJFIGVtcC5zYWxhcnkgPiBBTEwgKCIKICAgICAgICAg\nICAgKyAiU0VMRUNUIG0uc2FsYXJ5IEZST00gTWFuYWdlciBtIFdIRVJFIG0u\nZGVwYXJ0bWVudCA9ICIKICAgICAgICAgICAgKyAiZW1wLmRlcGFydG1lbnQp\nIjsKICAgICAgICBDcml0ZXJpYVF1ZXJ5PEVtcGxveWVlPiBxID0gY2IuY3Jl\nYXRlUXVlcnkoRW1wbG95ZWUuY2xhc3MpOwogICAgICAgIFJvb3Q8RW1wbG95\nZWU+IGVtcCA9IHEuZnJvbShFbXBsb3llZS5jbGFzcyk7CiAgICAgICAgcS5z\nZWxlY3QoZW1wKTsKICAgICAgICBTdWJxdWVyeTxCaWdEZWNpbWFsPiBzcSA9\nIHEuc3VicXVlcnkoQmlnRGVjaW1hbC5jbGFzcyk7CiAgICAgICAgUm9vdDxN\nYW5hZ2VyPiBtID0gc3EuZnJvbShNYW5hZ2VyLmNsYXNzKTsKICAgICAgICBz\ncS5zZWxlY3QobS5nZXQoTWFuYWdlcl8uc2FsYXJ5KSk7CiAgICAgICAgc3Eu\nd2hlcmUoY2IuZXF1YWwobS5nZXQoTWFuYWdlcl8uZGVwYXJ0bWVudCksIGVt\ncAogICAgICAgICAgICAgICAgLmdldChFbXBsb3llZV8uZGVwYXJ0bWVudCkp\nKTsKICAgICAgICBxLndoZXJlKGNiLmd0KGVtcC5nZXQoRW1wbG95ZWVfLnNh\nbGFyeSksIGNiLmFsbChzcSkpKTsKCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVu\nY2UocSwganBxbCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFN1YnF1\nZXJpZXM0KCkgewogICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVDVCBjIEZS\nT00gQ3VzdG9tZXIgYyBXSEVSRSAiCiAgICAgICAgICAgICsgIihTRUxFQ1Qg\nQ09VTlQobykgRlJPTSBjLm9yZGVycyBvKSA+IDEwIjsKICAgICAgICBDcml0\nZXJpYVF1ZXJ5PEN1c3RvbWVyPiBxID0gY2IuY3JlYXRlUXVlcnkoQ3VzdG9t\nZXIuY2xhc3MpOwogICAgICAgIFJvb3Q8Q3VzdG9tZXI+IGMxID0gcS5mcm9t\nKEN1c3RvbWVyLmNsYXNzKTsKICAgICAgICBxLnNlbGVjdChjMSk7CiAgICAg\nICAgU3VicXVlcnk8TG9uZz4gc3EzID0gcS5zdWJxdWVyeShMb25nLmNsYXNz\nKTsKICAgICAgICBSb290PEN1c3RvbWVyPiBjMiA9IHNxMy5jb3JyZWxhdGUo\nYzEpOwogICAgICAgIEpvaW48Q3VzdG9tZXIsIE9yZGVyPiBvID0gYzIuam9p\nbihDdXN0b21lcl8ub3JkZXJzKTsKICAgICAgICBxLndoZXJlKGNiLmd0KHNx\nMy5zZWxlY3QoY2IuY291bnQobykpLCAxMCkpOwoKICAgICAgICBhc3NlcnRF\ncXVpdmFsZW5jZShxLCBqcHFsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0\nZXN0U3VicXVlcmllczUoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VM\nRUNUIG8gRlJPTSBPcmRlciBvIFdIRVJFIDEwMDAwIDwgQUxMICgiCiAgICAg\nICAgICAgICsgIlNFTEVDVCBhLmJhbGFuY2UgRlJPTSBvLmN1c3RvbWVyIGMg\nSk9JTiBjLmFjY291bnRzIGEpIjsKICAgICAgICBDcml0ZXJpYVF1ZXJ5PE9y\nZGVyPiBxID0gY2IuY3JlYXRlUXVlcnkoT3JkZXIuY2xhc3MpOwogICAgICAg\nIFJvb3Q8T3JkZXI+IG8gPSBxLmZyb20oT3JkZXIuY2xhc3MpOwogICAgICAg\nIHEuc2VsZWN0KG8pOwogICAgICAgIFN1YnF1ZXJ5PEludGVnZXI+IHNxID0g\ncS5zdWJxdWVyeShJbnRlZ2VyLmNsYXNzKTsKICAgICAgICBSb290PE9yZGVy\nPiBvc3EgPSBzcS5jb3JyZWxhdGUobyk7CiAgICAgICAgSm9pbjxPcmRlciwg\nQ3VzdG9tZXI+IGMgPSBvc3Euam9pbihPcmRlcl8uY3VzdG9tZXIpOwogICAg\nICAgIEpvaW48Q3VzdG9tZXIsIEFjY291bnQ+IGEgPSBjLmpvaW4oQ3VzdG9t\nZXJfLmFjY291bnRzKTsKICAgICAgICBzcS5zZWxlY3QoYS5nZXQoQWNjb3Vu\ndF8uYmFsYW5jZSkpOwogICAgICAgIHEud2hlcmUoY2IubHQoY2IubGl0ZXJh\nbCgxMDAwMCksIGNiLmFsbChzcSkpKTsKCiAgICAgICAgYXNzZXJ0RXF1aXZh\nbGVuY2UocSwganBxbCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFN1\nYnF1ZXJpZXM2KCkgewogICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVDVCBv\nIEZST00gT3JkZXIgbyBKT0lOIG8uY3VzdG9tZXIgYyBXSEVSRSAxMDAwMCA8\nICIKICAgICAgICAgICAgKyAiQUxMIChTRUxFQ1QgYS5iYWxhbmNlIEZST00g\nYy5hY2NvdW50cyBhKSI7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxPcmRlcj4g\ncSA9IGNiLmNyZWF0ZVF1ZXJ5KE9yZGVyLmNsYXNzKTsKICAgICAgICBSb290\nPE9yZGVyPiBvID0gcS5mcm9tKE9yZGVyLmNsYXNzKTsKICAgICAgICBxLnNl\nbGVjdChvKTsKICAgICAgICBKb2luPE9yZGVyLCBDdXN0b21lcj4gYyA9IG8u\nam9pbihPcmRlcl8uY3VzdG9tZXIpOwogICAgICAgIFN1YnF1ZXJ5PEludGVn\nZXI+IHNxID0gcS5zdWJxdWVyeShJbnRlZ2VyLmNsYXNzKTsKICAgICAgICBK\nb2luPE9yZGVyLCBDdXN0b21lcj4gY3NxID0gc3EuY29ycmVsYXRlKGMpOwog\nICAgICAgIEpvaW48Q3VzdG9tZXIsIEFjY291bnQ+IGEgPSBjc3Euam9pbihD\ndXN0b21lcl8uYWNjb3VudHMpOwogICAgICAgIHNxLnNlbGVjdChhLmdldChB\nY2NvdW50Xy5iYWxhbmNlKSk7CiAgICAgICAgcS53aGVyZShjYi5sdChjYi5s\naXRlcmFsKDEwMDAwKSwgY2IuYWxsKHNxKSkpOwoKICAgICAgICBhc3NlcnRF\ncXVpdmFsZW5jZShxLCBqcHFsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0\nZXN0R3JvdXBCeUFuZEhhdmluZygpIHsKICAgICAgICBTdHJpbmcganBxbCA9\nICJTRUxFQ1QgYy5zdGF0dXMsIEFWRyhjLmZpbGxlZE9yZGVyQ291bnQpLCBD\nT1VOVChjKSBGUk9NICIKICAgICAgICAgICAgKyAiQ3VzdG9tZXIgYyBHUk9V\nUCBCWSBjLnN0YXR1cyBIQVZJTkcgYy5zdGF0dXMgSU4gKDEsIDIpIjsKICAg\nICAgICBDcml0ZXJpYVF1ZXJ5PFR1cGxlPiBxID0gY2IuY3JlYXRlVHVwbGVR\ndWVyeSgpOwogICAgICAgIFJvb3Q8Q3VzdG9tZXI+IGMgPSBxLmZyb20oQ3Vz\ndG9tZXIuY2xhc3MpOwogICAgICAgIHEuZ3JvdXBCeShjLmdldChDdXN0b21l\ncl8uc3RhdHVzKSk7CiAgICAgICAgcS5oYXZpbmcoY2IuaW4oYy5nZXQoQ3Vz\ndG9tZXJfLnN0YXR1cykpLnZhbHVlKDEpLnZhbHVlKDIpKTsKICAgICAgICBx\nLm11bHRpc2VsZWN0KGMuZ2V0KEN1c3RvbWVyXy5zdGF0dXMpLCBjYi5hdmco\nYwogICAgICAgICAgICAgICAgLmdldChDdXN0b21lcl8uZmlsbGVkT3JkZXJD\nb3VudCkpLCBjYi5jb3VudChjKSk7CgogICAgICAgIGFzc2VydEVxdWl2YWxl\nbmNlKHEsIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RPcmRl\ncmluZzEoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIG8gRlJP\nTSBDdXN0b21lciBjIEpPSU4gYy5vcmRlcnMgbyAiCiAgICAgICAgICAgICsg\nIkpPSU4gYy5hZGRyZXNzIGEgV0hFUkUgYS5zdGF0ZSA9ICdDQScgT1JERVIg\nQlkgby5xdWFudGl0eSBERVNDLCAiCiAgICAgICAgICAgICsgIm8udG90YWxD\nb3N0IjsKICAgICAgICBDcml0ZXJpYVF1ZXJ5PE9yZGVyPiBxID0gY2IuY3Jl\nYXRlUXVlcnkoT3JkZXIuY2xhc3MpOwogICAgICAgIFJvb3Q8Q3VzdG9tZXI+\nIGMgPSBxLmZyb20oQ3VzdG9tZXIuY2xhc3MpOwogICAgICAgIEpvaW48Q3Vz\ndG9tZXIsIE9yZGVyPiBvID0gYy5qb2luKEN1c3RvbWVyXy5vcmRlcnMpOwog\nICAgICAgIEpvaW48Q3VzdG9tZXIsIEFkZHJlc3M+IGEgPSBjLmpvaW4oQ3Vz\ndG9tZXJfLmFkZHJlc3MpOwogICAgICAgIHEud2hlcmUoY2IuZXF1YWwoYS5n\nZXQoQWRkcmVzc18uc3RhdGUpLCAiQ0EiKSk7CiAgICAgICAgcS5vcmRlckJ5\nKGNiLmRlc2Moby5nZXQoT3JkZXJfLnF1YW50aXR5KSksIGNiLmFzYyhvCiAg\nICAgICAgICAgICAgICAuZ2V0KE9yZGVyXy50b3RhbENvc3QpKSk7CiAgICAg\nICAgcS5zZWxlY3Qobyk7CgogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKHEs\nIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RPcmRlcmluZzIo\nKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIG8ucXVhbnRpdHks\nIGEuemlwQ29kZSBGUk9NIEN1c3RvbWVyIGMgIgogICAgICAgICAgICArICJK\nT0lOIGMub3JkZXJzIG8gSk9JTiBjLmFkZHJlc3MgYSBXSEVSRSBhLnN0YXRl\nID0gJ0NBJyAiCiAgICAgICAgICAgICsgIk9SREVSIEJZIG8ucXVhbnRpdHks\nIGEuemlwQ29kZSI7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxUdXBsZT4gcSA9\nIGNiLmNyZWF0ZVR1cGxlUXVlcnkoKTsKICAgICAgICBSb290PEN1c3RvbWVy\nPiBjID0gcS5mcm9tKEN1c3RvbWVyLmNsYXNzKTsKICAgICAgICBKb2luPEN1\nc3RvbWVyLCBPcmRlcj4gbyA9IGMuam9pbihDdXN0b21lcl8ub3JkZXJzKTsK\nICAgICAgICBKb2luPEN1c3RvbWVyLCBBZGRyZXNzPiBhID0gYy5qb2luKEN1\nc3RvbWVyXy5hZGRyZXNzKTsKICAgICAgICBxLndoZXJlKGNiLmVxdWFsKGEu\nZ2V0KEFkZHJlc3NfLnN0YXRlKSwgIkNBIikpOwogICAgICAgIHEub3JkZXJC\neShjYi5hc2Moby5nZXQoT3JkZXJfLnF1YW50aXR5KSksIGNiLmFzYyhhCiAg\nICAgICAgICAgICAgICAuZ2V0KEFkZHJlc3NfLnppcENvZGUpKSk7CiAgICAg\nICAgcS5tdWx0aXNlbGVjdChvLmdldChPcmRlcl8ucXVhbnRpdHkpLCBhLmdl\ndChBZGRyZXNzXy56aXBDb2RlKSk7CgogICAgICAgIGFzc2VydEVxdWl2YWxl\nbmNlKHEsIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RPcmRl\ncmluZzMoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIG8ucXVh\nbnRpdHksIG8udG90YWxDb3N0ICogMS4wOCBBUyB0YXhlZENvc3QsICIKICAg\nICAgICAgICAgKyAiYS56aXBDb2RlIEZST00gQ3VzdG9tZXIgYyBKT0lOIGMu\nb3JkZXJzIG8gSk9JTiBjLmFkZHJlc3MgYSAiCiAgICAgICAgICAgICsgIldI\nRVJFIGEuc3RhdGUgPSAnQ0EnIEFORCBhLmNvdW50eSA9ICdTYW50YSBDbGFy\nYScgIgogICAgICAgICAgICArICJPUkRFUiBCWSBvLnF1YW50aXR5LCB0YXhl\nZENvc3QsIGEuemlwQ29kZSI7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxUdXBs\nZT4gcSA9IGNiLmNyZWF0ZVR1cGxlUXVlcnkoKTsKICAgICAgICBSb290PEN1\nc3RvbWVyPiBjID0gcS5mcm9tKEN1c3RvbWVyLmNsYXNzKTsKICAgICAgICBK\nb2luPEN1c3RvbWVyLCBPcmRlcj4gbyA9IGMuam9pbihDdXN0b21lcl8ub3Jk\nZXJzKTsKICAgICAgICBKb2luPEN1c3RvbWVyLCBBZGRyZXNzPiBhID0gYy5q\nb2luKEN1c3RvbWVyXy5hZGRyZXNzKTsKICAgICAgICBFeHByZXNzaW9uPERv\ndWJsZT4gdGF4ZWRDb3N0ID0gKEV4cHJlc3Npb248RG91YmxlPiljYi5wcm9k\nKG8uZ2V0KE9yZGVyXy50b3RhbENvc3QpLCAxLjA4KS5hbGlhcygidGF4ZWRD\nb3N0Iik7CiAgICAgICAgcS53aGVyZShjYi5lcXVhbChhLmdldChBZGRyZXNz\nXy5zdGF0ZSksICJDQSIpLCAKICAgICAgICAgICAgICAgIGNiLmVxdWFsKGEu\nZ2V0KEFkZHJlc3NfLmNvdW50eSksICJTYW50YSBDbGFyYSIpKTsKICAgICAg\nICBxLm9yZGVyQnkoY2IuYXNjKG8uZ2V0KE9yZGVyXy5xdWFudGl0eSkpLCAK\nICAgICAgICAgICAgICAgIGNiLmFzYyh0YXhlZENvc3QpLAogICAgICAgICAg\nICAgICAgY2IuYXNjKGEuZ2V0KEFkZHJlc3NfLnppcENvZGUpKSk7CiAgICAg\nICAgcS5tdWx0aXNlbGVjdChvLmdldChPcmRlcl8ucXVhbnRpdHkpLCB0YXhl\nZENvc3QsIGEuZ2V0KEFkZHJlc3NfLnppcENvZGUpKTsKCiAgICAgICAgYXNz\nZXJ0RXF1aXZhbGVuY2UocSwganBxbCk7CiAgICB9CiAgICAKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RPcmRlcmluZzQoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwg\nPSAiU0VMRUNUIGMgRlJPTSBDdXN0b21lciBjIE9SREVSIEJZIGMubmFtZSBE\nRVNDLCBjLnN0YXR1cyI7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxDdXN0b21l\ncj4gcSA9IGNiLmNyZWF0ZVF1ZXJ5KEN1c3RvbWVyLmNsYXNzKTsKICAgICAg\nICBSb290PEN1c3RvbWVyPiBjID0gcS5mcm9tKEN1c3RvbWVyLmNsYXNzKTsK\nICAgICAgICBxLm9yZGVyQnkoY2IuZGVzYyhjLmdldChDdXN0b21lcl8ubmFt\nZSkpLCAKICAgICAgICAgICAgICAgICAgY2IuYXNjKGMuZ2V0KEN1c3RvbWVy\nXy5zdGF0dXMpKSk7CiAgICAgICAgcS5zZWxlY3QoYyk7CgogICAgICAgIGFz\nc2VydEVxdWl2YWxlbmNlKHEsIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHRlc3RPcmRlcmluZzUoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAi\nU0VMRUNUIGMuZmlyc3ROYW1lLCBjLmxhc3ROYW1lLCBjLmJhbGFuY2VPd2Vk\nIEZST00gQ3VzdG9tZXIgYyBPUkRFUiBCWSBjLm5hbWUgREVTQywgYy5zdGF0\ndXMiOwogICAgICAgIAogICAgICAgIENyaXRlcmlhUXVlcnk8VHVwbGU+IHEg\nPSBjYi5jcmVhdGVUdXBsZVF1ZXJ5KCk7CiAgICAgICAgUm9vdDxDdXN0b21l\ncj4gYyA9IHEuZnJvbShDdXN0b21lci5jbGFzcyk7CiAgICAgICAgcS5vcmRl\nckJ5KGNiLmRlc2MoYy5nZXQoQ3VzdG9tZXJfLm5hbWUpKSwgY2IuYXNjKGMK\nICAgICAgICAgICAgICAgIC5nZXQoQ3VzdG9tZXJfLnN0YXR1cykpKTsKICAg\nICAgICBxLm11bHRpc2VsZWN0KGMuZ2V0KEN1c3RvbWVyXy5maXJzdE5hbWUp\nLCBjLmdldChDdXN0b21lcl8ubGFzdE5hbWUpLCBjCiAgICAgICAgICAgICAg\nICAuZ2V0KEN1c3RvbWVyXy5iYWxhbmNlT3dlZCkpOwoKICAgICAgICBhc3Nl\ncnRFcXVpdmFsZW5jZShxLCBqcHFsKTsKICAgIH0KICAgIAogICAgLyoqCiAg\nICAgKiAwLWFyZyBmdW5jdGlvbiB3b3JrcyBvbmx5IGlmIHRoZXJlIGlzIG90\naGVyIHByb2plY3Rpb24gaXRlbXMgdG8gZGV0ZXJtaW5lIHRoZSB0YWJsZSB0\nbyBzZWxlY3QgZnJvbS4gCiAgICAgKi8KICAgIEBBbGxvd0ZhaWx1cmUobWVz\nc2FnZT0icnVucyBvbmx5IG9uIGRhdGFiYXNlcyB3aXRoIENVUlJFTlRfVVNF\nUigpIGZ1bmN0aW9uIGUuZy4gTXlTUUwgYnV0IG5vdCBEZXJieSIpCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0RnVuY3Rpb25XaXRoTm9Bcmd1bWVudCgpIHsKICAg\nICAgICBTdHJpbmcganBxbCA9ICJTRUxFQ1QgYy5iYWxhbmNlT3dlZCBGUk9N\nIEN1c3RvbWVyIGMiOwogICAgICAgIFN0cmluZyBzcWwgPSAiU0VMRUNUIENV\nUlJFTlRfVVNFUigpLCB0MC5iYWxhbmNlT3dlZCBGUk9NIENSX0NVU1QgdDAi\nOwogICAgICAgIAogICAgICAgIENyaXRlcmlhUXVlcnk8VHVwbGU+IHEgPSBj\nYi5jcmVhdGVUdXBsZVF1ZXJ5KCk7CiAgICAgICAgUm9vdDxDdXN0b21lcj4g\nYyA9IHEuZnJvbShDdXN0b21lci5jbGFzcyk7CiAgICAgICAgcS5tdWx0aXNl\nbGVjdChjYi5mdW5jdGlvbigiQ1VSUkVOVF9VU0VSIiwgU3RyaW5nLmNsYXNz\nLCAoRXhwcmVzc2lvbjw/PltdKW51bGwpLCBjLmdldChDdXN0b21lcl8uYmFs\nYW5jZU93ZWQpKTsKICAgICAgICAKICAgICAgICBleGVjdXRlQW5kQ29tcGFy\nZVNRTChxLCBzcWwpOwovLyAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UocSwg\nanBxbCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEZ1bmN0aW9uV2l0\naE9uZUFyZ3VtZW50KCkgewogICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVD\nVCBNQVgoYy5iYWxhbmNlT3dlZCkgRlJPTSBDdXN0b21lciBjIjsKICAgICAg\nICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PFR1cGxlPiBxID0gY2IuY3JlYXRl\nVHVwbGVRdWVyeSgpOwogICAgICAgIFJvb3Q8Q3VzdG9tZXI+IGMgPSBxLmZy\nb20oQ3VzdG9tZXIuY2xhc3MpOwogICAgICAgIHEubXVsdGlzZWxlY3QoY2Iu\nZnVuY3Rpb24oIk1BWCIsIEludGVnZXIuY2xhc3MsIGMuZ2V0KEN1c3RvbWVy\nXy5iYWxhbmNlT3dlZCkpKTsKICAgICAgICAKICAgICAgICBhc3NlcnRFcXVp\ndmFsZW5jZShxLCBqcHFsKTsKCiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lk\nIHRlc3RGdW5jdGlvbldpdGhUd29Bcmd1bWVudCgpIHsKICAgICAgICBTdHJp\nbmcganBxbCA9ICJTRUxFQ1QgTU9EKGMuYmFsYW5jZU93ZWQsMTApIEZST00g\nQ3VzdG9tZXIgYyI7CiAgICAgICAgCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxU\ndXBsZT4gcSA9IGNiLmNyZWF0ZVR1cGxlUXVlcnkoKTsKICAgICAgICBSb290\nPEN1c3RvbWVyPiBjID0gcS5mcm9tKEN1c3RvbWVyLmNsYXNzKTsKICAgICAg\nICBxLm11bHRpc2VsZWN0KGNiLmZ1bmN0aW9uKCJNT0QiLCBJbnRlZ2VyLmNs\nYXNzLCBjLmdldChDdXN0b21lcl8uYmFsYW5jZU93ZWQpLCBjYi5saXRlcmFs\nKDEwKSkpOwogICAgICAgIAogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKHEs\nIGpwcWwpOwoKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdEZ1bmN0\naW9uV2l0aEZ1bmN0aW9uQXJndW1lbnRJbk9yZGVyQnkoKSB7CiAgICAgICAg\nU3RyaW5nIGpwcWwgPSAiU0VMRUNUIE1PRChjLmJhbGFuY2VPd2VkLDEwKSBG\nUk9NIEN1c3RvbWVyIGMgV0hFUkUgTEVOR1RIKGMubmFtZSk+MyBPUkRFUiBC\nWSBMRU5HVEgoYy5uYW1lKSI7CiAgICAgICAgU3RyaW5nIHNxbCA9ICJTRUxF\nQ1QgTU9EKHQwLmJhbGFuY2VPd2VkLCA/KSwgTEVOR1RIKHQwLm5hbWUpIEZS\nT00gQ1JfQ1VTVCB0MCBXSEVSRSAoTEVOR1RIKHQwLm5hbWUpID4gPykgIiAr\nCiAgICAgICAgICAgICAgICAgICAgICJPUkRFUiBCWSBMRU5HVEgodDAubmFt\nZSkgQVNDIjsKICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PFR1cGxl\nPiBxID0gY2IuY3JlYXRlVHVwbGVRdWVyeSgpOwogICAgICAgIFJvb3Q8Q3Vz\ndG9tZXI+IGMgPSBxLmZyb20oQ3VzdG9tZXIuY2xhc3MpOwogICAgICAgIEV4\ncHJlc3Npb248SW50ZWdlcj4gbmFtZUxlbmd0aCA9IGNiLmZ1bmN0aW9uKCJM\nRU5HVEgiLCBJbnRlZ2VyLmNsYXNzLCBjLmdldChDdXN0b21lcl8ubmFtZSkp\nOwogICAgICAgIHEubXVsdGlzZWxlY3QoY2IuZnVuY3Rpb24oIk1PRCIsIElu\ndGVnZXIuY2xhc3MsIGMuZ2V0KEN1c3RvbWVyXy5iYWxhbmNlT3dlZCksIGNi\nLmxpdGVyYWwoMTApKSk7CiAgICAgICAgcS53aGVyZShjYi5ncmVhdGVyVGhh\nbihuYW1lTGVuZ3RoLCAzKSk7CiAgICAgICAgcS5vcmRlckJ5KGNiLmFzYyhu\nYW1lTGVuZ3RoKSk7CiAgICAgICAgCiAgICAgICAgZXhlY3V0ZUFuZENvbXBh\ncmVTUUwocSwgc3FsKTsKCiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEtl\neXMxKCkgewogICAgICAgIFN0cmluZyBzcWwgPSAiU0VMRUNUIHQwLm5hbWUs\nIHQyLmlkLCB0Mi5sYWJlbCBGUk9NIENSX0lURU0gdDAgIgogICAgICAgICAg\nICArICJJTk5FUiBKT0lOIENSX0lURU1fcGhvdG9zIHQxIE9OIHQwLmlkID0g\ndDEuSVRFTV9JRCAiCiAgICAgICAgICAgICsgIklOTkVSIEpPSU4gQ1JfUEhU\nIHQyIE9OIHQxLlZBTFVFX0lEID0gdDIuaWQgV0hFUkUgIiArIAogICAgICAg\nICAgICAiKCh0MS5LRVkwID0gPyBPUiB0MS5LRVkwID0gPyBPUiB0MS5LRVkw\nID0gPyBPUiB0MS5LRVkwID0gPyBPUiB0MS5LRVkwID0gPykgIgogICAgICAg\nICAgICArICJBTkQgMCA8IChTRUxFQ1QgQ09VTlQoKikgRlJPTSBDUl9JVEVN\nX3Bob3RvcyBXSEVSRSBDUl9JVEVNX3Bob3Rvcy5JVEVNX0lEID0gdDAuaWQp\nKSI7CgogICAgICAgIENyaXRlcmlhUXVlcnk8Q3VzdG9tZXI+IHEgPSBjYi5j\ncmVhdGVRdWVyeShDdXN0b21lci5jbGFzcyk7CiAgICAgICAgUm9vdDxJdGVt\nPiBpdGVtID0gcS5mcm9tKEl0ZW0uY2xhc3MpOwogICAgICAgIE1hcEpvaW48\nSXRlbSwgU3RyaW5nLCBQaG90bz4gcGhvdG8gPSBpdGVtLmpvaW4oSXRlbV8u\ncGhvdG9zKTsKICAgICAgICBxLm11bHRpc2VsZWN0KGl0ZW0uZ2V0KEl0ZW1f\nLm5hbWUpLCBwaG90byk7CiAgICAgICAgTWFwPFN0cmluZywgUGhvdG8+IHBo\nb3RvMSA9IG5ldyBIYXNoTWFwPFN0cmluZywgUGhvdG8+KCk7CiAgICAgICAg\nZm9yIChpbnQgaSA9IDA7IGkgPCA1OyBpKyspIHsKICAgICAgICAgICAgUGhv\ndG8gcDEgPSBuZXcgUGhvdG8oKTsKICAgICAgICAgICAgcDEuc2V0TGFiZWwo\nImxhYmVsIiArIGkpOwogICAgICAgICAgICBwaG90bzEucHV0KCJwaG90byIg\nKyBpLCBwMSk7CiAgICAgICAgfQogICAgICAgIHEud2hlcmUocGhvdG8ua2V5\nKCkuaW4oY2Iua2V5cyhwaG90bzEpKSk7IAogICAgICAgIGV4ZWN1dGVBbmRD\nb21wYXJlU1FMKHEsIHNxbCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVz\ndEtleXMyKCkgewogICAgICAgIFN0cmluZyBzcWwgPSAiU0VMRUNUIHQwLm5h\nbWUsIHQyLmlkLCB0Mi5sYWJlbCBGUk9NIENSX0lURU0gdDAgIgogICAgICAg\nICAgICArICJJTk5FUiBKT0lOIENSX0lURU1fcGhvdG9zIHQxIE9OIHQwLmlk\nID0gdDEuSVRFTV9JRCAiCiAgICAgICAgICAgICsgIklOTkVSIEpPSU4gQ1Jf\nUEhUIHQyIE9OIHQxLlZBTFVFX0lEID0gdDIuaWQgV0hFUkUgIiArIAogICAg\nICAgICAgICAiKHQxLktFWTAgSU4gKD8sID8sID8sID8sID8pKSI7CgogICAg\nICAgIENyaXRlcmlhUXVlcnk8Q3VzdG9tZXI+IHEgPSBjYi5jcmVhdGVRdWVy\neShDdXN0b21lci5jbGFzcyk7CiAgICAgICAgUm9vdDxJdGVtPiBpdGVtID0g\ncS5mcm9tKEl0ZW0uY2xhc3MpOwogICAgICAgIE1hcEpvaW48SXRlbSwgU3Ry\naW5nLCBQaG90bz4gcGhvdG8gPSBpdGVtLmpvaW4oSXRlbV8ucGhvdG9zKTsK\nICAgICAgICBxLm11bHRpc2VsZWN0KGl0ZW0uZ2V0KEl0ZW1fLm5hbWUpLCBw\naG90byk7CiAgICAgICAgTWFwPFN0cmluZywgUGhvdG8+IHBob3RvMSA9IG5l\ndyBIYXNoTWFwPFN0cmluZywgUGhvdG8+KCk7CiAgICAgICAgZm9yIChpbnQg\naSA9IDA7IGkgPCA1OyBpKyspIHsKICAgICAgICAgICAgUGhvdG8gcDEgPSBu\nZXcgUGhvdG8oKTsKICAgICAgICAgICAgcDEuc2V0TGFiZWwoImxhYmVsIiAr\nIGkpOwogICAgICAgICAgICBwaG90bzEucHV0KCJwaG90byIgKyBpLCBwMSk7\nCiAgICAgICAgfQogICAgICAgIHEud2hlcmUoY2IuaXNNZW1iZXIocGhvdG8u\na2V5KCksIGNiLmtleXMocGhvdG8xKSkpOyAKICAgICAgICBleGVjdXRlQW5k\nQ29tcGFyZVNRTChxLCBzcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRl\nc3RLZXlzMygpIHsKICAgICAgICBTdHJpbmcgc3FsID0gIlNFTEVDVCB0MC5u\nYW1lLCB0Mi5pZCwgdDIubGFiZWwgRlJPTSBDUl9JVEVNIHQwICIKICAgICAg\nICAgICAgKyAiSU5ORVIgSk9JTiBDUl9JVEVNX3Bob3RvcyB0MSBPTiB0MC5p\nZCA9IHQxLklURU1fSUQgIgogICAgICAgICAgICArICJJTk5FUiBKT0lOIENS\nX1BIVCB0MiBPTiB0MS5WQUxVRV9JRCA9IHQyLmlkIFdIRVJFICgxIDw+IDEp\nIjsKCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxDdXN0b21lcj4gcSA9IGNiLmNy\nZWF0ZVF1ZXJ5KEN1c3RvbWVyLmNsYXNzKTsKICAgICAgICBSb290PEl0ZW0+\nIGl0ZW0gPSBxLmZyb20oSXRlbS5jbGFzcyk7CiAgICAgICAgTWFwSm9pbjxJ\ndGVtLCBTdHJpbmcsIFBob3RvPiBwaG90byA9IGl0ZW0uam9pbihJdGVtXy5w\naG90b3MpOwogICAgICAgIHEubXVsdGlzZWxlY3QoaXRlbS5nZXQoSXRlbV8u\nbmFtZSksIHBob3RvKTsKICAgICAgICBNYXA8U3RyaW5nLCBQaG90bz4gcGhv\ndG8xID0gbmV3IEhhc2hNYXA8U3RyaW5nLCBQaG90bz4oKTsKICAgICAgICBm\nb3IgKGludCBpID0gMDsgaSA8IDU7IGkrKykgewogICAgICAgICAgICBQaG90\nbyBwMSA9IG5ldyBQaG90bygpOwogICAgICAgICAgICBwMS5zZXRMYWJlbCgi\nbGFiZWwiICsgaSk7CiAgICAgICAgICAgIHBob3RvMS5wdXQoInBob3RvIiAr\nIGksIHAxKTsKICAgICAgICB9CiAgICAgICAgcS53aGVyZShjYi5pc0VtcHR5\nKGNiLmtleXMocGhvdG8xKSkpOyAKICAgICAgICBleGVjdXRlQW5kQ29tcGFy\nZVNRTChxLCBzcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RLZXlz\nNCgpIHsKICAgICAgICBTdHJpbmcgc3FsID0gIlNFTEVDVCB0MC5uYW1lLCB0\nMi5pZCwgdDIubGFiZWwgRlJPTSBDUl9JVEVNIHQwICIKICAgICAgICAgICAg\nKyAiSU5ORVIgSk9JTiBDUl9JVEVNX3Bob3RvcyB0MSBPTiB0MC5pZCA9IHQx\nLklURU1fSUQgIgogICAgICAgICAgICArICJJTk5FUiBKT0lOIENSX1BIVCB0\nMiBPTiB0MS5WQUxVRV9JRCA9IHQyLmlkIFdIRVJFICg1ID0gNSkiOwoKICAg\nICAgICBDcml0ZXJpYVF1ZXJ5PEN1c3RvbWVyPiBxID0gY2IuY3JlYXRlUXVl\ncnkoQ3VzdG9tZXIuY2xhc3MpOwogICAgICAgIFJvb3Q8SXRlbT4gaXRlbSA9\nIHEuZnJvbShJdGVtLmNsYXNzKTsKICAgICAgICBNYXBKb2luPEl0ZW0sIFN0\ncmluZywgUGhvdG8+IHBob3RvID0gaXRlbS5qb2luKEl0ZW1fLnBob3Rvcyk7\nCiAgICAgICAgcS5tdWx0aXNlbGVjdChpdGVtLmdldChJdGVtXy5uYW1lKSwg\ncGhvdG8pOwogICAgICAgIE1hcDxTdHJpbmcsIFBob3RvPiBwaG90bzEgPSBu\nZXcgSGFzaE1hcDxTdHJpbmcsIFBob3RvPigpOwogICAgICAgIGZvciAoaW50\nIGkgPSAwOyBpIDwgNTsgaSsrKSB7CiAgICAgICAgICAgIFBob3RvIHAxID0g\nbmV3IFBob3RvKCk7CiAgICAgICAgICAgIHAxLnNldExhYmVsKCJsYWJlbCIg\nKyBpKTsKICAgICAgICAgICAgcGhvdG8xLnB1dCgicGhvdG8iICsgaSwgcDEp\nOwogICAgICAgIH0KICAgICAgICBxLndoZXJlKGNiLmVxdWFsKGNiLnNpemUo\nY2Iua2V5cyhwaG90bzEpKSwgNSkpOyAKICAgICAgICBleGVjdXRlQW5kQ29t\ncGFyZVNRTChxLCBzcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RL\nZXlzNSgpIHsKICAgICAgICBTdHJpbmcgc3FsID0gIlNFTEVDVCB0MC5uYW1l\nLCB0Mi5pZCwgdDIubGFiZWwgRlJPTSBDUl9JVEVNIHQwICIKICAgICAgICAg\nICAgKyAiSU5ORVIgSk9JTiBDUl9JVEVNX3Bob3RvcyB0MSBPTiB0MC5pZCA9\nIHQxLklURU1fSUQgIgogICAgICAgICAgICArICJJTk5FUiBKT0lOIENSX1BI\nVCB0MiBPTiB0MS5WQUxVRV9JRCA9IHQyLmlkIFdIRVJFICIgKyAKICAgICAg\nICAgICAgIihOT1QgKHQxLktFWTAgPSA/IE9SIHQxLktFWTAgPSA/IE9SIHQx\nLktFWTAgPSA/IE9SIHQxLktFWTAgPSA/IE9SIHQxLktFWTAgPSA/KSAiCiAg\nICAgICAgICAgICsgIkFORCAwIDwgKFNFTEVDVCBDT1VOVCgqKSBGUk9NIENS\nX0lURU1fcGhvdG9zIFdIRVJFIENSX0lURU1fcGhvdG9zLklURU1fSUQgPSB0\nMC5pZCkpIjsKICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PEN1c3Rv\nbWVyPiBxID0gY2IuY3JlYXRlUXVlcnkoQ3VzdG9tZXIuY2xhc3MpOwogICAg\nICAgIFJvb3Q8SXRlbT4gaXRlbSA9IHEuZnJvbShJdGVtLmNsYXNzKTsKICAg\nICAgICBNYXBKb2luPEl0ZW0sIFN0cmluZywgUGhvdG8+IHBob3RvID0gaXRl\nbS5qb2luKEl0ZW1fLnBob3Rvcyk7CiAgICAgICAgcS5tdWx0aXNlbGVjdChp\ndGVtLmdldChJdGVtXy5uYW1lKSwgcGhvdG8pOwogICAgICAgIE1hcDxTdHJp\nbmcsIFBob3RvPiBwaG90bzEgPSBuZXcgSGFzaE1hcDxTdHJpbmcsIFBob3Rv\nPigpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgNTsgaSsrKSB7CiAg\nICAgICAgICAgIFBob3RvIHAxID0gbmV3IFBob3RvKCk7CiAgICAgICAgICAg\nIHAxLnNldExhYmVsKCJsYWJlbCIgKyBpKTsKICAgICAgICAgICAgcGhvdG8x\nLnB1dCgicGhvdG8iICsgaSwgcDEpOwogICAgICAgIH0KICAgICAgICBxLndo\nZXJlKHBob3RvLmtleSgpLmluKGNiLmtleXMocGhvdG8xKSkubm90KCkpOyAK\nICAgICAgICBleGVjdXRlQW5kQ29tcGFyZVNRTChxLCBzcWwpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHRlc3RLZXlzNigpIHsKICAgICAgICBTdHJpbmcg\nc3FsID0gIlNFTEVDVCB0MC5uYW1lLCB0Mi5pZCwgdDIubGFiZWwgRlJPTSBD\nUl9JVEVNIHQwICIKICAgICAgICAgICAgKyAiSU5ORVIgSk9JTiBDUl9JVEVN\nX3Bob3RvcyB0MSBPTiB0MC5pZCA9IHQxLklURU1fSUQgIgogICAgICAgICAg\nICArICJJTk5FUiBKT0lOIENSX1BIVCB0MiBPTiB0MS5WQUxVRV9JRCA9IHQy\nLmlkIFdIRVJFICIgKyAKICAgICAgICAgICAgIihOT1QgKHQxLktFWTAgSU4g\nKD8sID8sID8sID8sID8pKSkiOwoKICAgICAgICBDcml0ZXJpYVF1ZXJ5PEN1\nc3RvbWVyPiBxID0gY2IuY3JlYXRlUXVlcnkoQ3VzdG9tZXIuY2xhc3MpOwog\nICAgICAgIFJvb3Q8SXRlbT4gaXRlbSA9IHEuZnJvbShJdGVtLmNsYXNzKTsK\nICAgICAgICBNYXBKb2luPEl0ZW0sIFN0cmluZywgUGhvdG8+IHBob3RvID0g\naXRlbS5qb2luKEl0ZW1fLnBob3Rvcyk7CiAgICAgICAgcS5tdWx0aXNlbGVj\ndChpdGVtLmdldChJdGVtXy5uYW1lKSwgcGhvdG8pOwogICAgICAgIE1hcDxT\ndHJpbmcsIFBob3RvPiBwaG90bzEgPSBuZXcgSGFzaE1hcDxTdHJpbmcsIFBo\nb3RvPigpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgNTsgaSsrKSB7\nCiAgICAgICAgICAgIFBob3RvIHAxID0gbmV3IFBob3RvKCk7CiAgICAgICAg\nICAgIHAxLnNldExhYmVsKCJsYWJlbCIgKyBpKTsKICAgICAgICAgICAgcGhv\ndG8xLnB1dCgicGhvdG8iICsgaSwgcDEpOwogICAgICAgIH0KICAgICAgICBx\nLndoZXJlKGNiLmlzTm90TWVtYmVyKHBob3RvLmtleSgpLCBjYi5rZXlzKHBo\nb3RvMSkpKTsgCiAgICAgICAgZXhlY3V0ZUFuZENvbXBhcmVTUUwocSwgc3Fs\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0S2V5czcoKSB7CiAgICAg\nICAgU3RyaW5nIHNxbCA9ICJTRUxFQ1QgdDAubmFtZSwgdDIuaWQsIHQyLmxh\nYmVsIEZST00gQ1JfSVRFTSB0MCAiCiAgICAgICAgICAgICsgIklOTkVSIEpP\nSU4gQ1JfSVRFTV9waG90b3MgdDEgT04gdDAuaWQgPSB0MS5JVEVNX0lEICIK\nICAgICAgICAgICAgKyAiSU5ORVIgSk9JTiBDUl9QSFQgdDIgT04gdDEuVkFM\nVUVfSUQgPSB0Mi5pZCBXSEVSRSAoTk9UICgxIDw+IDEpKSI7CgogICAgICAg\nIENyaXRlcmlhUXVlcnk8Q3VzdG9tZXI+IHEgPSBjYi5jcmVhdGVRdWVyeShD\ndXN0b21lci5jbGFzcyk7CiAgICAgICAgUm9vdDxJdGVtPiBpdGVtID0gcS5m\ncm9tKEl0ZW0uY2xhc3MpOwogICAgICAgIE1hcEpvaW48SXRlbSwgU3RyaW5n\nLCBQaG90bz4gcGhvdG8gPSBpdGVtLmpvaW4oSXRlbV8ucGhvdG9zKTsKICAg\nICAgICBxLm11bHRpc2VsZWN0KGl0ZW0uZ2V0KEl0ZW1fLm5hbWUpLCBwaG90\nbyk7CiAgICAgICAgTWFwPFN0cmluZywgUGhvdG8+IHBob3RvMSA9IG5ldyBI\nYXNoTWFwPFN0cmluZywgUGhvdG8+KCk7CiAgICAgICAgZm9yIChpbnQgaSA9\nIDA7IGkgPCA1OyBpKyspIHsKICAgICAgICAgICAgUGhvdG8gcDEgPSBuZXcg\nUGhvdG8oKTsKICAgICAgICAgICAgcDEuc2V0TGFiZWwoImxhYmVsIiArIGkp\nOwogICAgICAgICAgICBwaG90bzEucHV0KCJwaG90byIgKyBpLCBwMSk7CiAg\nICAgICAgfQogICAgICAgIHEud2hlcmUoY2IuaXNOb3RFbXB0eShjYi5rZXlz\nKHBob3RvMSkpKTsgCiAgICAgICAgZXhlY3V0ZUFuZENvbXBhcmVTUUwocSwg\nc3FsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0S2V5czgoKSB7CiAg\nICAgICAgU3RyaW5nIHNxbCA9ICJTRUxFQ1QgdDAubmFtZSwgdDIuaWQsIHQy\nLmxhYmVsIEZST00gQ1JfSVRFTSB0MCAiCiAgICAgICAgICAgICsgIklOTkVS\nIEpPSU4gQ1JfSVRFTV9waG90b3MgdDEgT04gdDAuaWQgPSB0MS5JVEVNX0lE\nICIKICAgICAgICAgICAgKyAiSU5ORVIgSk9JTiBDUl9QSFQgdDIgT04gdDEu\nVkFMVUVfSUQgPSB0Mi5pZCBXSEVSRSAoNSA9IDQpIjsKICAgICAgICBDcml0\nZXJpYVF1ZXJ5PEN1c3RvbWVyPiBxID0gY2IuY3JlYXRlUXVlcnkoQ3VzdG9t\nZXIuY2xhc3MpOwogICAgICAgIFJvb3Q8SXRlbT4gaXRlbSA9IHEuZnJvbShJ\ndGVtLmNsYXNzKTsKICAgICAgICBNYXBKb2luPEl0ZW0sIFN0cmluZywgUGhv\ndG8+IHBob3RvID0gaXRlbS5qb2luKEl0ZW1fLnBob3Rvcyk7CiAgICAgICAg\ncS5tdWx0aXNlbGVjdChpdGVtLmdldChJdGVtXy5uYW1lKSwgcGhvdG8pOwog\nICAgICAgIE1hcDxTdHJpbmcsIFBob3RvPiBwaG90bzEgPSBuZXcgSGFzaE1h\ncDxTdHJpbmcsIFBob3RvPigpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBp\nIDwgNTsgaSsrKSB7CiAgICAgICAgICAgIFBob3RvIHAxID0gbmV3IFBob3Rv\nKCk7CiAgICAgICAgICAgIHAxLnNldExhYmVsKCJsYWJlbCIgKyBpKTsKICAg\nICAgICAgICAgcGhvdG8xLnB1dCgicGhvdG8iICsgaSwgcDEpOwogICAgICAg\nIH0KICAgICAgICBxLndoZXJlKGNiLmVxdWFsKGNiLnNpemUoY2Iua2V5cyhw\naG90bzEpKSwgNCkpOyAKICAgICAgICBleGVjdXRlQW5kQ29tcGFyZVNRTChx\nLCBzcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RWYWx1ZXMxKCkg\newogICAgICAgIFN0cmluZyBzcWwgPSAiU0VMRUNUIHQwLm5hbWUsIHQyLmlk\nLCB0Mi5sYWJlbCBGUk9NIENSX0lURU0gdDAgIgogICAgICAgICAgICArICJJ\nTk5FUiBKT0lOIENSX0lURU1fcGhvdG9zIHQxIE9OIHQwLmlkID0gdDEuSVRF\nTV9JRCAiCiAgICAgICAgICAgICsgIklOTkVSIEpPSU4gQ1JfUEhUIHQyIE9O\nIHQxLlZBTFVFX0lEID0gdDIuaWQgV0hFUkUgIiArCiAgICAgICAgICAgICIo\nKHQxLlZBTFVFX0lEID0gPyBPUiB0MS5WQUxVRV9JRCA9ID8gT1IgdDEuVkFM\nVUVfSUQgPSA/IE9SIHQxLlZBTFVFX0lEID0gPyBPUiB0MS5WQUxVRV9JRCA9\nID8pICIKICAgICAgICAgICAgKyAiQU5EIDAgPCAoU0VMRUNUIENPVU5UKCop\nIEZST00gQ1JfSVRFTV9waG90b3MgV0hFUkUgQ1JfSVRFTV9waG90b3MuSVRF\nTV9JRCA9IHQwLmlkKSkiOwoKICAgICAgICBDcml0ZXJpYVF1ZXJ5PEN1c3Rv\nbWVyPiBxID0gY2IuY3JlYXRlUXVlcnkoQ3VzdG9tZXIuY2xhc3MpOwogICAg\nICAgIFJvb3Q8SXRlbT4gaXRlbSA9IHEuZnJvbShJdGVtLmNsYXNzKTsKICAg\nICAgICBNYXBKb2luPEl0ZW0sIFN0cmluZywgUGhvdG8+IHBob3RvID0gaXRl\nbS5qb2luKEl0ZW1fLnBob3Rvcyk7CiAgICAgICAgcS5tdWx0aXNlbGVjdChp\ndGVtLmdldChJdGVtXy5uYW1lKSwgcGhvdG8pOwogICAgICAgIE1hcDxTdHJp\nbmcsIFBob3RvPiBwaG90bzEgPSBuZXcgSGFzaE1hcDxTdHJpbmcsIFBob3Rv\nPigpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgNTsgaSsrKSB7CiAg\nICAgICAgICAgIFBob3RvIHAxID0gbmV3IFBob3RvKCk7CiAgICAgICAgICAg\nIHAxLnNldExhYmVsKCJsYWJlbCIgKyBpKTsKICAgICAgICAgICAgcGhvdG8x\nLnB1dCgicGhvdG8iICsgaSwgcDEpOwogICAgICAgIH0KICAgICAgICBxLndo\nZXJlKHBob3RvLnZhbHVlKCkuaW4oY2IudmFsdWVzKHBob3RvMSkpKTsgCiAg\nICAgICAgZXhlY3V0ZUFuZENvbXBhcmVTUUwocSwgc3FsKTsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0VmFsdWVzMigpIHsKICAgICAgICBTdHJpbmcg\nc3FsID0gIlNFTEVDVCB0MC5uYW1lLCB0Mi5pZCwgdDIubGFiZWwgRlJPTSBD\nUl9JVEVNIHQwICIKICAgICAgICAgICAgKyAiSU5ORVIgSk9JTiBDUl9JVEVN\nX3Bob3RvcyB0MSBPTiB0MC5pZCA9IHQxLklURU1fSUQgIgogICAgICAgICAg\nICArICJJTk5FUiBKT0lOIENSX1BIVCB0MiBPTiB0MS5WQUxVRV9JRCA9IHQy\nLmlkIFdIRVJFICh0MS5WQUxVRV9JRCBJTiAoPywgPywgPywgPywgPykpIjsK\nCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxDdXN0b21lcj4gcSA9IGNiLmNyZWF0\nZVF1ZXJ5KEN1c3RvbWVyLmNsYXNzKTsKICAgICAgICBSb290PEl0ZW0+IGl0\nZW0gPSBxLmZyb20oSXRlbS5jbGFzcyk7CiAgICAgICAgTWFwSm9pbjxJdGVt\nLCBTdHJpbmcsIFBob3RvPiBwaG90byA9IGl0ZW0uam9pbihJdGVtXy5waG90\nb3MpOwogICAgICAgIHEubXVsdGlzZWxlY3QoaXRlbS5nZXQoSXRlbV8ubmFt\nZSksIHBob3RvKTsKICAgICAgICBNYXA8U3RyaW5nLCBQaG90bz4gcGhvdG8x\nID0gbmV3IEhhc2hNYXA8U3RyaW5nLCBQaG90bz4oKTsKICAgICAgICBmb3Ig\nKGludCBpID0gMDsgaSA8IDU7IGkrKykgewogICAgICAgICAgICBQaG90byBw\nMSA9IG5ldyBQaG90bygpOwogICAgICAgICAgICBwMS5zZXRMYWJlbCgibGFi\nZWwiICsgaSk7CiAgICAgICAgICAgIHBob3RvMS5wdXQoInBob3RvIiArIGks\nIHAxKTsKICAgICAgICB9CiAgICAgICAgcS53aGVyZShjYi5pc01lbWJlcihw\naG90by52YWx1ZSgpLCBjYi52YWx1ZXMocGhvdG8xKSkpOyAKICAgICAgICBl\neGVjdXRlQW5kQ29tcGFyZVNRTChxLCBzcWwpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RWYWx1ZXMzKCkgewogICAgICAgIFN0cmluZyBzcWwgPSAi\nU0VMRUNUIHQwLm5hbWUsIHQyLmlkLCB0Mi5sYWJlbCBGUk9NIENSX0lURU0g\ndDAgIgogICAgICAgICAgICArICJJTk5FUiBKT0lOIENSX0lURU1fcGhvdG9z\nIHQxIE9OIHQwLmlkID0gdDEuSVRFTV9JRCAiCiAgICAgICAgICAgICsgIklO\nTkVSIEpPSU4gQ1JfUEhUIHQyIE9OIHQxLlZBTFVFX0lEID0gdDIuaWQgV0hF\nUkUgKDEgPD4gMSkiOwoKICAgICAgICBDcml0ZXJpYVF1ZXJ5PEN1c3RvbWVy\nPiBxID0gY2IuY3JlYXRlUXVlcnkoQ3VzdG9tZXIuY2xhc3MpOwogICAgICAg\nIFJvb3Q8SXRlbT4gaXRlbSA9IHEuZnJvbShJdGVtLmNsYXNzKTsKICAgICAg\nICBNYXBKb2luPEl0ZW0sIFN0cmluZywgUGhvdG8+IHBob3RvID0gaXRlbS5q\nb2luKEl0ZW1fLnBob3Rvcyk7CiAgICAgICAgcS5tdWx0aXNlbGVjdChpdGVt\nLmdldChJdGVtXy5uYW1lKSwgcGhvdG8pOwogICAgICAgIE1hcDxTdHJpbmcs\nIFBob3RvPiBwaG90bzEgPSBuZXcgSGFzaE1hcDxTdHJpbmcsIFBob3RvPigp\nOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgNTsgaSsrKSB7CiAgICAg\nICAgICAgIFBob3RvIHAxID0gbmV3IFBob3RvKCk7CiAgICAgICAgICAgIHAx\nLnNldExhYmVsKCJsYWJlbCIgKyBpKTsKICAgICAgICAgICAgcGhvdG8xLnB1\ndCgicGhvdG8iICsgaSwgcDEpOwogICAgICAgIH0KICAgICAgICBxLndoZXJl\nKGNiLmlzRW1wdHkoY2IudmFsdWVzKHBob3RvMSkpKTsgCiAgICAgICAgZXhl\nY3V0ZUFuZENvbXBhcmVTUUwocSwgc3FsKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0VmFsdWU0KCkgewogICAgICAgIFN0cmluZyBzcWwgPSAiU0VM\nRUNUIHQwLm5hbWUsIHQyLmlkLCB0Mi5sYWJlbCBGUk9NIENSX0lURU0gdDAg\nIgogICAgICAgICAgICArICJJTk5FUiBKT0lOIENSX0lURU1fcGhvdG9zIHQx\nIE9OIHQwLmlkID0gdDEuSVRFTV9JRCAiCiAgICAgICAgICAgICsgIklOTkVS\nIEpPSU4gQ1JfUEhUIHQyIE9OIHQxLlZBTFVFX0lEID0gdDIuaWQgV0hFUkUg\nKDUgPSA1KSI7CgogICAgICAgIENyaXRlcmlhUXVlcnk8Q3VzdG9tZXI+IHEg\nPSBjYi5jcmVhdGVRdWVyeShDdXN0b21lci5jbGFzcyk7CiAgICAgICAgUm9v\ndDxJdGVtPiBpdGVtID0gcS5mcm9tKEl0ZW0uY2xhc3MpOwogICAgICAgIE1h\ncEpvaW48SXRlbSwgU3RyaW5nLCBQaG90bz4gcGhvdG8gPSBpdGVtLmpvaW4o\nSXRlbV8ucGhvdG9zKTsKICAgICAgICBxLm11bHRpc2VsZWN0KGl0ZW0uZ2V0\nKEl0ZW1fLm5hbWUpLCBwaG90byk7CiAgICAgICAgTWFwPFN0cmluZywgUGhv\ndG8+IHBob3RvMSA9IG5ldyBIYXNoTWFwPFN0cmluZywgUGhvdG8+KCk7CiAg\nICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCA1OyBpKyspIHsKICAgICAgICAg\nICAgUGhvdG8gcDEgPSBuZXcgUGhvdG8oKTsKICAgICAgICAgICAgcDEuc2V0\nTGFiZWwoImxhYmVsIiArIGkpOwogICAgICAgICAgICBwaG90bzEucHV0KCJw\naG90byIgKyBpLCBwMSk7CiAgICAgICAgfQogICAgICAgIHEud2hlcmUoY2Iu\nZXF1YWwoY2Iuc2l6ZShjYi52YWx1ZXMocGhvdG8xKSksIDUpKTsgCiAgICAg\nICAgZXhlY3V0ZUFuZENvbXBhcmVTUUwocSwgc3FsKTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0VmFsdWVzNSgpIHsKICAgICAgICBTdHJpbmcgc3Fs\nID0gIlNFTEVDVCB0MC5uYW1lLCB0Mi5pZCwgdDIubGFiZWwgRlJPTSBDUl9J\nVEVNIHQwICIKICAgICAgICAgICAgKyAiSU5ORVIgSk9JTiBDUl9JVEVNX3Bo\nb3RvcyB0MSBPTiB0MC5pZCA9IHQxLklURU1fSUQgIgogICAgICAgICAgICAr\nICJJTk5FUiBKT0lOIENSX1BIVCB0MiBPTiB0MS5WQUxVRV9JRCA9IHQyLmlk\nIFdIRVJFICIKICAgICAgICAgICAgKyAiKDAgPSAoU0VMRUNUIENPVU5UKCop\nIEZST00gQ1JfSVRFTV9waG90b3MgdDMgV0hFUkUgIgogICAgICAgICAgICAr\nICIodDMuVkFMVUVfSUQgPSA/IE9SIHQzLlZBTFVFX0lEID0gPyBPUiB0My5W\nQUxVRV9JRCA9ID8gT1IgdDMuVkFMVUVfSUQgPSA/IE9SIHQzLlZBTFVFX0lE\nID0gPykgIgogICAgICAgICAgICArICJBTkQgdDAuaWQgPSB0MS5JVEVNX0lE\nKSAiCiAgICAgICAgICAgICsgIkFORCAwIDwgKFNFTEVDVCBDT1VOVCgqKSBG\nUk9NIENSX0lURU1fcGhvdG9zIFdIRVJFIENSX0lURU1fcGhvdG9zLklURU1f\nSUQgPSB0MC5pZCkpIjsKICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5\nPEN1c3RvbWVyPiBxID0gY2IuY3JlYXRlUXVlcnkoQ3VzdG9tZXIuY2xhc3Mp\nOwogICAgICAgIFJvb3Q8SXRlbT4gaXRlbSA9IHEuZnJvbShJdGVtLmNsYXNz\nKTsKICAgICAgICBNYXBKb2luPEl0ZW0sIFN0cmluZywgUGhvdG8+IHBob3Rv\nID0gaXRlbS5qb2luKEl0ZW1fLnBob3Rvcyk7CiAgICAgICAgcS5tdWx0aXNl\nbGVjdChpdGVtLmdldChJdGVtXy5uYW1lKSwgcGhvdG8pOwogICAgICAgIE1h\ncDxTdHJpbmcsIFBob3RvPiBwaG90bzEgPSBuZXcgSGFzaE1hcDxTdHJpbmcs\nIFBob3RvPigpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgNTsgaSsr\nKSB7CiAgICAgICAgICAgIFBob3RvIHAxID0gbmV3IFBob3RvKCk7CiAgICAg\nICAgICAgIHAxLnNldExhYmVsKCJsYWJlbCIgKyBpKTsKICAgICAgICAgICAg\ncGhvdG8xLnB1dCgicGhvdG8iICsgaSwgcDEpOwogICAgICAgIH0KICAgICAg\nICBxLndoZXJlKHBob3RvLnZhbHVlKCkuaW4oY2IudmFsdWVzKHBob3RvMSkp\nLm5vdCgpKTsgCiAgICAgICAgZXhlY3V0ZUFuZENvbXBhcmVTUUwocSwgc3Fs\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0VmFsdWVzNigpIHsKICAg\nICAgICBTdHJpbmcgc3FsID0gIlNFTEVDVCB0MC5uYW1lLCB0Mi5pZCwgdDIu\nbGFiZWwgRlJPTSBDUl9JVEVNIHQwICIKICAgICAgICAgICAgKyAiSU5ORVIg\nSk9JTiBDUl9JVEVNX3Bob3RvcyB0MSBPTiB0MC5pZCA9IHQxLklURU1fSUQg\nIgogICAgICAgICAgICArICJJTk5FUiBKT0lOIENSX1BIVCB0MiBPTiB0MS5W\nQUxVRV9JRCA9IHQyLmlkIFdIRVJFIChOT1QgKHQxLlZBTFVFX0lEIElOICg/\nLCA/LCA/LCA/LCA/KSkpIjsKCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxDdXN0\nb21lcj4gcSA9IGNiLmNyZWF0ZVF1ZXJ5KEN1c3RvbWVyLmNsYXNzKTsKICAg\nICAgICBSb290PEl0ZW0+IGl0ZW0gPSBxLmZyb20oSXRlbS5jbGFzcyk7CiAg\nICAgICAgTWFwSm9pbjxJdGVtLCBTdHJpbmcsIFBob3RvPiBwaG90byA9IGl0\nZW0uam9pbihJdGVtXy5waG90b3MpOwogICAgICAgIHEubXVsdGlzZWxlY3Qo\naXRlbS5nZXQoSXRlbV8ubmFtZSksIHBob3RvKTsKICAgICAgICBNYXA8U3Ry\naW5nLCBQaG90bz4gcGhvdG8xID0gbmV3IEhhc2hNYXA8U3RyaW5nLCBQaG90\nbz4oKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IDU7IGkrKykgewog\nICAgICAgICAgICBQaG90byBwMSA9IG5ldyBQaG90bygpOwogICAgICAgICAg\nICBwMS5zZXRMYWJlbCgibGFiZWwiICsgaSk7CiAgICAgICAgICAgIHBob3Rv\nMS5wdXQoInBob3RvIiArIGksIHAxKTsKICAgICAgICB9CiAgICAgICAgcS53\naGVyZShjYi5pc05vdE1lbWJlcihwaG90by52YWx1ZSgpLCBjYi52YWx1ZXMo\ncGhvdG8xKSkpOyAKICAgICAgICBleGVjdXRlQW5kQ29tcGFyZVNRTChxLCBz\ncWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RWYWx1ZXM3KCkgewog\nICAgICAgIFN0cmluZyBzcWwgPSAiU0VMRUNUIHQwLm5hbWUsIHQyLmlkLCB0\nMi5sYWJlbCBGUk9NIENSX0lURU0gdDAgIgogICAgICAgICAgICArICJJTk5F\nUiBKT0lOIENSX0lURU1fcGhvdG9zIHQxIE9OIHQwLmlkID0gdDEuSVRFTV9J\nRCAiCiAgICAgICAgICAgICsgIklOTkVSIEpPSU4gQ1JfUEhUIHQyIE9OIHQx\nLlZBTFVFX0lEID0gdDIuaWQgV0hFUkUgKE5PVCAoMSA8PiAxKSkiOwoKICAg\nICAgICBDcml0ZXJpYVF1ZXJ5PEN1c3RvbWVyPiBxID0gY2IuY3JlYXRlUXVl\ncnkoQ3VzdG9tZXIuY2xhc3MpOwogICAgICAgIFJvb3Q8SXRlbT4gaXRlbSA9\nIHEuZnJvbShJdGVtLmNsYXNzKTsKICAgICAgICBNYXBKb2luPEl0ZW0sIFN0\ncmluZywgUGhvdG8+IHBob3RvID0gaXRlbS5qb2luKEl0ZW1fLnBob3Rvcyk7\nCiAgICAgICAgcS5tdWx0aXNlbGVjdChpdGVtLmdldChJdGVtXy5uYW1lKSwg\ncGhvdG8pOwogICAgICAgIE1hcDxTdHJpbmcsIFBob3RvPiBwaG90bzEgPSBu\nZXcgSGFzaE1hcDxTdHJpbmcsIFBob3RvPigpOwogICAgICAgIGZvciAoaW50\nIGkgPSAwOyBpIDwgNTsgaSsrKSB7CiAgICAgICAgICAgIFBob3RvIHAxID0g\nbmV3IFBob3RvKCk7CiAgICAgICAgICAgIHAxLnNldExhYmVsKCJsYWJlbCIg\nKyBpKTsKICAgICAgICAgICAgcGhvdG8xLnB1dCgicGhvdG8iICsgaSwgcDEp\nOwogICAgICAgIH0KICAgICAgICBxLndoZXJlKGNiLmlzTm90RW1wdHkoY2Iu\ndmFsdWVzKHBob3RvMSkpKTsgCiAgICAgICAgZXhlY3V0ZUFuZENvbXBhcmVT\nUUwocSwgc3FsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0VmFsdWU4\nKCkgewogICAgICAgIFN0cmluZyBzcWwgPSAiU0VMRUNUIHQwLm5hbWUsIHQy\nLmlkLCB0Mi5sYWJlbCBGUk9NIENSX0lURU0gdDAgIgogICAgICAgICAgICAr\nICJJTk5FUiBKT0lOIENSX0lURU1fcGhvdG9zIHQxIE9OIHQwLmlkID0gdDEu\nSVRFTV9JRCAiCiAgICAgICAgICAgICsgIklOTkVSIEpPSU4gQ1JfUEhUIHQy\nIE9OIHQxLlZBTFVFX0lEID0gdDIuaWQgV0hFUkUgKDUgPSA0KSI7CgogICAg\nICAgIENyaXRlcmlhUXVlcnk8Q3VzdG9tZXI+IHEgPSBjYi5jcmVhdGVRdWVy\neShDdXN0b21lci5jbGFzcyk7CiAgICAgICAgUm9vdDxJdGVtPiBpdGVtID0g\ncS5mcm9tKEl0ZW0uY2xhc3MpOwogICAgICAgIE1hcEpvaW48SXRlbSwgU3Ry\naW5nLCBQaG90bz4gcGhvdG8gPSBpdGVtLmpvaW4oSXRlbV8ucGhvdG9zKTsK\nICAgICAgICBxLm11bHRpc2VsZWN0KGl0ZW0uZ2V0KEl0ZW1fLm5hbWUpLCBw\naG90byk7CiAgICAgICAgTWFwPFN0cmluZywgUGhvdG8+IHBob3RvMSA9IG5l\ndyBIYXNoTWFwPFN0cmluZywgUGhvdG8+KCk7CiAgICAgICAgZm9yIChpbnQg\naSA9IDA7IGkgPCA1OyBpKyspIHsKICAgICAgICAgICAgUGhvdG8gcDEgPSBu\nZXcgUGhvdG8oKTsKICAgICAgICAgICAgcDEuc2V0TGFiZWwoImxhYmVsIiAr\nIGkpOwogICAgICAgICAgICBwaG90bzEucHV0KCJwaG90byIgKyBpLCBwMSk7\nCiAgICAgICAgfQogICAgICAgIHEud2hlcmUoY2IuZXF1YWwoY2Iuc2l6ZShj\nYi52YWx1ZXMocGhvdG8xKSksIDQpKTsgCiAgICAgICAgZXhlY3V0ZUFuZENv\nbXBhcmVTUUwocSwgc3FsKTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBU\naGUgc3ludGF4IGZvciBqb2luaW5nIHRoZSBrZXkgb2YgYSBNYXAgYXR0cmli\ndXRlIGlzIGRpZmZlcmVudCBpbiBKUFFMLgogICAgICogSGVuY2UgaW5zdGVh\nZCBvZiBjb21wYXJpbmcgdGFyZ2V0IFNRTCB3ZSBjb21wYXJlIHRoZSByZXN1\nbHQuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RKb2luS2V5KCkgewog\nICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBl\nbS5jcmVhdGVRdWVyeSgiREVMRVRFIEZST00gU3R1ZGVudCBzIikuZXhlY3V0\nZVVwZGF0ZSgpOwogICAgICAgIGVtLmNyZWF0ZVF1ZXJ5KCJERUxFVEUgRlJP\nTSBDb3Vyc2UgcyIpLmV4ZWN1dGVVcGRhdGUoKTsKICAgICAgICBlbS5jcmVh\ndGVRdWVyeSgiREVMRVRFIEZST00gU2VtZXN0ZXIgcyIpLmV4ZWN1dGVVcGRh\ndGUoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwog\nICAgICAgIAogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsK\nICAgICAgICBTdHVkZW50IHMxID0gbmV3IFN0dWRlbnQoKTsgczEuc2V0TmFt\nZSgiUzEiKTsKICAgICAgICBTdHVkZW50IHMyID0gbmV3IFN0dWRlbnQoKTsg\nczIuc2V0TmFtZSgiUzIiKTsKICAgICAgICBTdHVkZW50IHMzID0gbmV3IFN0\ndWRlbnQoKTsgczMuc2V0TmFtZSgiUzMiKTsKICAgICAgICBTdHVkZW50IHM0\nID0gbmV3IFN0dWRlbnQoKTsgczQuc2V0TmFtZSgiUzQiKTsKICAgICAgICBT\nZW1lc3RlciBzbTEgPSBuZXcgU2VtZXN0ZXIoKTsgc20xLnNldE5hbWUoIlN1\nbW1lciIpOwogICAgICAgIFNlbWVzdGVyIHNtMiA9IG5ldyBTZW1lc3Rlcigp\nOyBzbTIuc2V0TmFtZSgiRmFsbCIpOwogICAgICAgIENvdXJzZSBjMSA9IG5l\ndyBDb3Vyc2UoKTsgYzEuc2V0TmFtZSgiQzEiKTsKICAgICAgICBDb3Vyc2Ug\nYzIgPSBuZXcgQ291cnNlKCk7IGMyLnNldE5hbWUoIkMyIik7CgogICAgICAg\nIHMxLmFkZFRvRW5yb2xsbWVudChjMSwgc20xKTsgczEuYWRkVG9FbnJvbGxt\nZW50KGMyLCBzbTIpOwogICAgICAgIHMyLmFkZFRvRW5yb2xsbWVudChjMiwg\nc20xKTsgczIuYWRkVG9FbnJvbGxtZW50KGMxLCBzbTIpOwogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgczMuYWRkVG9FbnJvbGxtZW50\nKGMxLCBzbTIpOyAKICAgICAgICBzNC5hZGRUb0Vucm9sbG1lbnQoYzIsIHNt\nMSk7CiAgICAgICAgCiAgICAgICAgZW0ucGVyc2lzdChzMSk7IGVtLnBlcnNp\nc3QoczIpOyBlbS5wZXJzaXN0KHMzKTsgZW0ucGVyc2lzdChzNCk7CiAgICAg\nICAgZW0ucGVyc2lzdChjMSk7IGVtLnBlcnNpc3QoYzIpOwogICAgICAgIGVt\nLnBlcnNpc3Qoc20xKTsgZW0ucGVyc2lzdChzbTIpOwogICAgICAgIGVtLmdl\ndFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgCiAgICAgICAgU3Ry\naW5nIGpwcWwgPSAic2VsZWN0IHMgZnJvbSBTdHVkZW50IHMgSk9JTiBzLmVu\ncm9sbG1lbnQgZSB3aGVyZSBLRVkoZSkubmFtZT06bmFtZSI7CiAgICAgICAg\nTGlzdDxTdHVkZW50PiBqUmVzdWx0ID0gZW0uY3JlYXRlUXVlcnkoanBxbCku\nc2V0UGFyYW1ldGVyKCJuYW1lIiwgIkMxIikuZ2V0UmVzdWx0TGlzdCgpOwog\nICAgICAgIAogICAgICAgIENyaXRlcmlhUXVlcnk8U3R1ZGVudD4gcSA9IGNi\nLmNyZWF0ZVF1ZXJ5KFN0dWRlbnQuY2xhc3MpOwogICAgICAgIFJvb3Q8U3R1\nZGVudD4gcyA9IHEuZnJvbShTdHVkZW50LmNsYXNzKTsKICAgICAgICBKb2lu\nPE1hcDxDb3Vyc2UsU2VtZXN0ZXI+LENvdXJzZT4gYyA9ICgoSm9pbnMuTWFw\nKXMuam9pbihTdHVkZW50Xy5lbnJvbGxtZW50KSkuam9pbktleSgpOwogICAg\nICAgIHEud2hlcmUoY2IuZXF1YWwoYy5nZXQoQ291cnNlXy5uYW1lKSwgY2Iu\ncGFyYW1ldGVyKFN0cmluZy5jbGFzcywgIm5hbWUiKSkpOwogICAgICAgIAog\nICAgICAgIExpc3Q8U3R1ZGVudD4gY1Jlc3VsdCA9IGVtLmNyZWF0ZVF1ZXJ5\nKHEpLnNldFBhcmFtZXRlcigibmFtZSIsIkMxIikuZ2V0UmVzdWx0TGlzdCgp\nOwogICAgICAgIAogICAgICAgIGFzc2VydEZhbHNlKGpSZXN1bHQuaXNFbXB0\neSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoY1Jlc3VsdC5zaXplKCksIGpS\nZXN1bHQuc2l6ZSgpKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGpS\nZXN1bHQuc2l6ZSgpOyBpKyspIHsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxz\nKGpSZXN1bHQuZ2V0KGkpLmdldE5hbWUoKSwgY1Jlc3VsdC5nZXQoaSkuZ2V0\nTmFtZSgpKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lk\nIHRlc3RBbGlhc0luT3JkZXJCeUNsYXVzZSgpIHsKICAgICAgICBTdHJpbmcg\nanBxbCA9ICJTRUxFQ1QgQVZHKGEuYmFsYW5jZSkgQVMgeCBGUk9NIEFjY291\nbnQgYSBPUkRFUiBCWSB4IjsKCiAgICAgICAgT3BlbkpQQUNyaXRlcmlhUXVl\ncnk8RG91YmxlPiBjID0gY2IuY3JlYXRlUXVlcnkoRG91YmxlLmNsYXNzKTsK\nICAgICAgICBSb290PEFjY291bnQ+IGFjY291bnQgPSBjLmZyb20oQWNjb3Vu\ndC5jbGFzcyk7CiAgICAgICAgRXhwcmVzc2lvbjxEb3VibGU+IG9yaWdpbmFs\nID0gY2IuYXZnKGFjY291bnQuZ2V0KEFjY291bnRfLmJhbGFuY2UpKTsKICAg\nICAgICBFeHByZXNzaW9uPERvdWJsZT4gYWxpYXNlZCA9IChFeHByZXNzaW9u\nPERvdWJsZT4pb3JpZ2luYWwuYWxpYXMoIngiKTsKICAgICAgICBjLm9yZGVy\nQnkoY2IuYXNjKGFsaWFzZWQpKTsKICAgICAgICBhc3NlcnRTYW1lKG9yaWdp\nbmFsLCBhbGlhc2VkKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIngiLCBhbGlh\nc2VkLmdldEFsaWFzKCkpOwogICAgICAgIGMuc2VsZWN0KGFsaWFzZWQpOwog\nICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKGMsIGpwcWwpOwogICAgICAgIGFz\nc2VydEVxdWFscyhqcHFsLCBjLnRvQ1FMKCkpOwogICAgfQogICAgCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0UmVhbGlhc05vdEFsbG93ZWQoKSB7CiAgICAgICAg\nT3BlbkpQQUNyaXRlcmlhUXVlcnk8RG91YmxlPiBjID0gY2IuY3JlYXRlUXVl\ncnkoRG91YmxlLmNsYXNzKTsKICAgICAgICBSb290PEFjY291bnQ+IGFjY291\nbnQgPSBjLmZyb20oQWNjb3VudC5jbGFzcyk7CiAgICAgICAgU2VsZWN0aW9u\nPERvdWJsZT4gdGVybSA9IGNiLmF2ZyhhY2NvdW50LmdldChBY2NvdW50Xy5i\nYWxhbmNlKSk7CiAgICAgICAgdGVybS5hbGlhcygiZmlyc3R0aW1lIik7CiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgdGVybS5hbGlhcygic2Vjb25kdGlt\nZSIpOwogICAgICAgICAgICBmYWlsKCJFeHBlY3RlZCB0byBmYWlsIG9uIHJl\nLWFsaWFzaW5nIik7CiAgICAgICAgfSBjYXRjaCAoSWxsZWdhbFN0YXRlRXhj\nZXB0aW9uIGUpIHsKICAgICAgICAgICAgLy8gZ29vZAogICAgICAgIH0KICAg\nIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdEludmFsaWRBbGlhc05vdEFs\nbG93ZWQoKSB7CiAgICAgICAgT3BlbkpQQUNyaXRlcmlhUXVlcnk8RG91Ymxl\nPiBjID0gY2IuY3JlYXRlUXVlcnkoRG91YmxlLmNsYXNzKTsKICAgICAgICBS\nb290PEFjY291bnQ+IGFjY291bnQgPSBjLmZyb20oQWNjb3VudC5jbGFzcyk7\nCiAgICAgICAgU2VsZWN0aW9uPERvdWJsZT4gdGVybSA9IGNiLmF2ZyhhY2Nv\ndW50LmdldChBY2NvdW50Xy5iYWxhbmNlKSk7CiAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgdGVybS5hbGlhcygiZnJvbSIpOwogICAgICAgICAgICBmYWls\nKCJFeHBlY3RlZCB0byBmYWlsIG9uIHJlc2VydmVkIHdvcmQgYXMgYWxpYXMi\nKTsKICAgICAgICB9IGNhdGNoIChJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24g\nZSkgewogICAgICAgICAgICAvLyBnb29kCiAgICAgICAgICAgIGFzc2VydE51\nbGwodGVybS5nZXRBbGlhcygpKTsKICAgICAgICB9CiAgICAgICAgdHJ5IHsK\nICAgICAgICAgICAgdGVybS5hbGlhcygiIHdpdGggYSBzcGFjZSIpOwogICAg\nICAgICAgICBmYWlsKCJFeHBlY3RlZCB0byBmYWlsIG9uIGludmFsaWQgYWxp\nYXMiKTsKICAgICAgICB9IGNhdGNoIChJbGxlZ2FsQXJndW1lbnRFeGNlcHRp\nb24gZSkgewogICAgICAgICAgICAvLyBnb29kCiAgICAgICAgICAgIGFzc2Vy\ndE51bGwodGVybS5nZXRBbGlhcygpKTsKICAgICAgICB9CiAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgdGVybS5hbGlhcygiIHdpdGg/a25vd25fc3ltYm9s\nIik7CiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGVkIHRvIGZhaWwgb24gaW52\nYWxpZCBhbGlhcyIpOwogICAgICAgIH0gY2F0Y2ggKElsbGVnYWxBcmd1bWVu\ndEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIC8vIGdvb2QKICAgICAgICAg\nICAgYXNzZXJ0TnVsbCh0ZXJtLmdldEFsaWFzKCkpOwogICAgICAgIH0KICAg\nIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdEludmFsaWRQYXJhbWV0ZXJO\nYW1lKCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNiLnBhcmFtZXRl\ncihJbnRlZ2VyLmNsYXNzLCAiZnJvbSIpOwogICAgICAgICAgICBmYWlsKCJF\neHBlY3RlZCB0byBmYWlsIG9uIHJlc2VydmVkIHdvcmQgYXMgYWxpYXMiKTsK\nICAgICAgICB9IGNhdGNoIChJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gZSkg\newogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgICBjYi5wYXJh\nbWV0ZXIoSW50ZWdlci5jbGFzcywgIjpuYW1lIik7CiAgICAgICAgICAgIGZh\naWwoIkV4cGVjdGVkIHRvIGZhaWwgb24gaW52YWxpZCBhbGlhcyIpOwogICAg\nICAgIH0gY2F0Y2ggKElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBlKSB7CiAg\nICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNiLnBhcmFtZXRl\ncihJbnRlZ2VyLmNsYXNzLCAiPzMiKTsKICAgICAgICAgICAgZmFpbCgiRXhw\nZWN0ZWQgdG8gZmFpbCBvbiBpbnZhbGlkIGFsaWFzIik7CiAgICAgICAgfSBj\nYXRjaCAoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGUpIHsKICAgICAgICB9\nCiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RHcm91cEJ5T25NYXhS\nZXN1bHQoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIGMuYWRk\ncmVzcy5jb3VudHJ5LCBjb3VudChjKSBmcm9tIEN1c3RvbWVyIGMgR1JPVVAg\nQlkgYy5hZGRyZXNzLmNvdW50cnkgIiArCiAgICAgICAgICAgICAgICAgICAg\nICAiSEFWSU5HIENPVU5UKGMuYWRkcmVzcy5jb3VudHJ5KT4zIjsKICAgICAg\nICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PE9iamVjdFtdPiBjID0gY2IuY3Jl\nYXRlUXVlcnkoT2JqZWN0W10uY2xhc3MpOwogICAgICAgIFJvb3Q8Q3VzdG9t\nZXI+IGN1c3RvbWVyID0gYy5mcm9tKEN1c3RvbWVyLmNsYXNzKTsKICAgICAg\nICBQYXRoPFN0cmluZz4gY291bnRyeSA9IGN1c3RvbWVyLmdldChDdXN0b21l\ncl8uYWRkcmVzcykuZ2V0KEFkZHJlc3NfLmNvdW50cnkpOwogICAgICAgIGMu\nbXVsdGlzZWxlY3QoY291bnRyeSwgY2IuY291bnQoY3VzdG9tZXIpKQogICAg\nICAgICAuZ3JvdXBCeShjb3VudHJ5KQogICAgICAgICAuaGF2aW5nKGNiLmd0\nKGNiLmNvdW50KGNvdW50cnkpLCAzKSk7CiAgICAgICAgCiAgICAgICAgYXNz\nZXJ0RXF1aXZhbGVuY2UobmV3IFF1ZXJ5RGVjb3JhdG9yKCl7CiAgICAgICAg\nICAgIHB1YmxpYyB2b2lkIGRlY29yYXRlKFF1ZXJ5IHEpIHsKICAgICAgICAg\nICAgICAgIHEuc2V0TWF4UmVzdWx0cygyMCk7CiAgICAgICAgICAgIH0KICAg\nICAgICB9LCBjLCBqcHFsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nRW1wdHlBbmQoKSB7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxPcmRlcj4gYyA9\nIGNiLmNyZWF0ZVF1ZXJ5KE9yZGVyLmNsYXNzKTsKICAgICAgICBSb290PE9y\nZGVyPiBvcmRlciA9IGMuZnJvbShPcmRlci5jbGFzcyk7CiAgICAgICAgYy53\naGVyZShjYi5hbmQoY2Iubm90KGNiLmVxdWFsKG9yZGVyLmdldChPcmRlcl8u\nY3VzdG9tZXIpLmdldChDdXN0b21lcl8ubmFtZSksICJSb2JlcnQgRS4gQmlz\nc2V0dCIpKSwKICAgICAgICAgICAgICAgIGNiLmlzVHJ1ZShjYi5jb25qdW5j\ndGlvbigpKSkpOwogICAgICAgIGVtLmNyZWF0ZVF1ZXJ5KGMpLmdldFJlc3Vs\ndExpc3QoKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdEVtcHR5\nT3IoKSB7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxPcmRlcj4gYyA9IGNiLmNy\nZWF0ZVF1ZXJ5KE9yZGVyLmNsYXNzKTsKICAgICAgICBSb290PE9yZGVyPiBv\ncmRlciA9IGMuZnJvbShPcmRlci5jbGFzcyk7CiAgICAgICAgYy53aGVyZShj\nYi5hbmQoY2Iubm90KGNiLmVxdWFsKG9yZGVyLmdldChPcmRlcl8uY3VzdG9t\nZXIpLmdldChDdXN0b21lcl8ubmFtZSksICJSb2JlcnQgRS4gQmlzc2V0dCIp\nKSwKICAgICAgICAgICAgICAgIGNiLmlzVHJ1ZShjYi5kaXNqdW5jdGlvbigp\nKSkpOwogICAgICAgIGVtLmNyZWF0ZVF1ZXJ5KGMpLmdldFJlc3VsdExpc3Qo\nKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdERlZmF1bHRQcm9q\nZWN0aW9uV2l0aFVudHlwZWRSZXN1bHQoKSB7CiAgICAgICAgQ3JpdGVyaWFR\ndWVyeSBjcXVlcnkgPSBjYi5jcmVhdGVRdWVyeSgpOyAKICAgICAgICBSb290\nPEN1c3RvbWVyPiBjdXN0b21lciA9IGNxdWVyeS5mcm9tKEN1c3RvbWVyLmNs\nYXNzKTsKCiAgICAgICAgLy9HZXQgTWV0YW1vZGVsIGZyb20gUm9vdAogICAg\nICAgIEVudGl0eVR5cGU8Q3VzdG9tZXI+IEN1c3RvbWVyXyA9IGN1c3RvbWVy\nLmdldE1vZGVsKCk7CgogICAgICAgIGNxdWVyeS53aGVyZShjYi5lcXVhbCgK\nICAgICAgICAgICAgICAgIGN1c3RvbWVyLmdldChDdXN0b21lcl8uZ2V0U2lu\nZ3VsYXJBdHRyaWJ1dGUoIm5hbWUiLCBTdHJpbmcuY2xhc3MpKSwgCiAgICAg\nICAgICAgICAgICBjYi5udWxsTGl0ZXJhbChTdHJpbmcuY2xhc3MpKSk7Cgog\nICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeShjcXVlcnkpOwogICAg\nfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q291bnREaXN0aW5jdCgpIHsK\nICAgICAgICBTdHJpbmcganBxbCA9ICJzZWxlY3QgQ09VTlQoRElTVElOQ1Qg\nYS5uYW1lKSBmcm9tIEFjY291bnQgYSI7CiAgICAgICAgCiAgICAgICAgQ3Jp\ndGVyaWFRdWVyeTxMb25nPiBjID0gY2IuY3JlYXRlUXVlcnkoTG9uZy5jbGFz\ncyk7CiAgICAgICAgUm9vdDxBY2NvdW50PiBhID0gYy5mcm9tKEFjY291bnQu\nY2xhc3MpOwogICAgICAgIGMuc2VsZWN0KGNiLmNvdW50RGlzdGluY3QoYS5n\nZXQoQWNjb3VudF8ubmFtZSkpKTsKICAgICAgICAKICAgICAgICBhc3NlcnRF\ncXVpdmFsZW5jZShjLCBqcHFsKTsKICAgIH0KICAgIAogICAgcHVibGljIHZv\naWQgdGVzdENvdW50RGlzdGluY3RPbkpvaW4oKSB7CiAgICAgICAgU3RyaW5n\nIGpwcWwgPSAic2VsZWN0IENPVU5UKERJU1RJTkNUIGEuYi5hZ2UpIGZyb20g\nQSBhIjsKICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PExvbmc+IGMg\nPSBjYi5jcmVhdGVRdWVyeShMb25nLmNsYXNzKTsKICAgICAgICBSb290PEE+\nIGEgPSBjLmZyb20oQS5jbGFzcyk7CiAgICAgICAgYy5zZWxlY3QoY2IuY291\nbnREaXN0aW5jdChhLmdldChBXy5iKS5nZXQoQl8uYWdlKSkpOwogICAgICAg\nIAogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKGMsIGpwcWwpOwogICAgfQoK\nICAgIAogICAgcHVibGljIHZvaWQgdGVzdFNpemVSZXR1cm5zSW50ZWdlcigp\nIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJzZWxlY3QgU0laRShjLmFjY291\nbnRzKSBmcm9tIEN1c3RvbWVyIGMiOwogICAgICAgIENyaXRlcmlhUXVlcnk8\nSW50ZWdlcj4gYyA9IGNiLmNyZWF0ZVF1ZXJ5KEludGVnZXIuY2xhc3MpOwog\nICAgICAgIFJvb3Q8Q3VzdG9tZXI+IGN1c3RvbWVyID0gYy5mcm9tKEN1c3Rv\nbWVyLmNsYXNzKTsKICAgICAgICBjLnNlbGVjdChjYi5zaXplKGN1c3RvbWVy\nLmdldChDdXN0b21lcl8uYWNjb3VudHMpKSk7CiAgICAgICAgCiAgICAgICAg\nYXNzZXJ0RXF1aXZhbGVuY2UoYywganBxbCk7CiAgICAgICAgCiAgICB9CiAg\nICAKICAgIHB1YmxpYyB2b2lkIHRlc3REaXNqdW5jdGlvbkFzRmFsc2UoKSB7\nCiAgICAgICAgTWV0YW1vZGVsIG1tID0gZW0uZ2V0TWV0YW1vZGVsKCk7Cgog\nICAgICAgIENyaXRlcmlhUXVlcnk8T3JkZXI+IGNxdWVyeSA9IGNiLmNyZWF0\nZVF1ZXJ5KE9yZGVyLmNsYXNzKTsKICAgICAgICBSb290PE9yZGVyPiBvcmRl\nciA9IGNxdWVyeS5mcm9tKE9yZGVyLmNsYXNzKTsKICAgICAgICAKICAgICAg\nIEVudGl0eVR5cGU8T3JkZXI+IE9yZGVyXyA9IG9yZGVyLmdldE1vZGVsKCk7\nCiAgICAgICBFbnRpdHlUeXBlPEN1c3RvbWVyPiBDdXN0b21lcl8gPSBtbS5l\nbnRpdHkoQ3VzdG9tZXIuY2xhc3MpOwogICAgICAgY3F1ZXJ5LndoZXJlKGNi\nLmFuZChjYi5lcXVhbCgKICAgICAgICAgb3JkZXIuZ2V0KE9yZGVyXy5nZXRT\naW5ndWxhckF0dHJpYnV0ZSgiY3VzdG9tZXIiLCBDdXN0b21lci5jbGFzcykp\nCiAgICAgICAgICAgICAgICAgIC5nZXQoQ3VzdG9tZXJfLmdldFNpbmd1bGFy\nQXR0cmlidXRlKCJuYW1lIiwgU3RyaW5nLmNsYXNzKSksICJSb2JlcnQgRS4g\nQmlzc2V0dCIpLAogICAgICAgICBjYi5pc0ZhbHNlKGNiLmRpc2p1bmN0aW9u\nKCkpKSk7CgogICAgICAgY3F1ZXJ5LmRpc3RpbmN0KHRydWUpOwoKICAgICAg\nIFF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeShjcXVlcnkpOwoKICAgICAgIExp\nc3QgcmVzdWx0ID0gcS5nZXRSZXN1bHRMaXN0KCk7ICAgICAgICAKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q3VycmVudFRpbWVSZXR1cm5zU1FMVHlw\nZXMoKSB7CiAgICAgICAgaWYgKGdldERpY3Rpb25hcnkoKSBpbnN0YW5jZW9m\nIE9yYWNsZURpY3Rpb25hcnkpIHsKICAgICAgICAgICAgLy8gT3JhY2xlIGRv\nZXMgbm90IGhhdmUgQ1VSUkVOVF9USU1FIGZ1bmN0aW9uLCBub3IgZG9lcyBp\ndCBzdXBwb3J0IERCIGdlbmVyYXRlZCBpZGVudGl0eQogICAgICAgICAgICBy\nZXR1cm47CiAgICAgICAgfQogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCku\nYmVnaW4oKTsKICAgICAgICBQcm9kdWN0IHBjID0gbmV3IFByb2R1Y3QoKTsK\nICAgICAgICBlbS5wZXJzaXN0KHBjKTsKICAgICAgICBlbS5nZXRUcmFuc2Fj\ndGlvbigpLmNvbW1pdCgpOwogICAgICAgIAogICAgICAgIGludCBwaWQgPSBw\nYy5nZXRQaWQoKTsKICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PFRp\nbWU+IGNxdWVyeSA9IGNiLmNyZWF0ZVF1ZXJ5KFRpbWUuY2xhc3MpOwogICAg\nICAgIFJvb3Q8UHJvZHVjdD4gcHJvZHVjdCA9IGNxdWVyeS5mcm9tKFByb2R1\nY3QuY2xhc3MpOwogICAgICAgIGNxdWVyeS5zZWxlY3QoY2IuY3VycmVudFRp\nbWUoKSk7CiAgICAgICAgY3F1ZXJ5LndoZXJlKGNiLmVxdWFsKHByb2R1Y3Qu\nZ2V0KFByb2R1Y3RfLnBpZCksIHBpZCkpOwoKICAgICAgICBUeXBlZFF1ZXJ5\nPFRpbWU+IHRxID0gZW0uY3JlYXRlUXVlcnkoY3F1ZXJ5KTsKICAgICAgICBP\nYmplY3QgcmVzdWx0ID0gdHEuZ2V0U2luZ2xlUmVzdWx0KCk7CiAgICAgICAg\nYXNzZXJ0VHJ1ZShyZXN1bHQuZ2V0Q2xhc3MoKSArICIgbm90IGluc3RhbmNl\nIG9mIFRpbWUiLCByZXN1bHQgaW5zdGFuY2VvZiBUaW1lKTsgIAogICAgICAg\nIAogICAgfSAgICAKCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q3VycmVudERhdGVS\nZXR1cm5zU1FMVHlwZXMoKSB7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24o\nKS5iZWdpbigpOwogICAgICAgIE9yZGVyIHBjID0gbmV3IE9yZGVyKCk7CiAg\nICAgICAgZW0ucGVyc2lzdChwYyk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rp\nb24oKS5jb21taXQoKTsKICAgICAgICAKICAgICAgICBpbnQgb2lkID0gcGMu\nZ2V0SWQoKTsKICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PERhdGU+\nIGNxdWVyeSA9IGNiLmNyZWF0ZVF1ZXJ5KERhdGUuY2xhc3MpOwogICAgICAg\nIFJvb3Q8T3JkZXI+IG9yZGVyID0gY3F1ZXJ5LmZyb20oT3JkZXIuY2xhc3Mp\nOwogICAgICAgIGNxdWVyeS5zZWxlY3QoY2IuY3VycmVudERhdGUoKSk7CiAg\nICAgICAgY3F1ZXJ5LndoZXJlKGNiLmVxdWFsKG9yZGVyLmdldChPcmRlcl8u\naWQpLCBvaWQpKTsKCiAgICAgICAgVHlwZWRRdWVyeTxEYXRlPiB0cSA9IGVt\nLmNyZWF0ZVF1ZXJ5KGNxdWVyeSk7CiAgICAgICAgT2JqZWN0IHJlc3VsdCA9\nIHRxLmdldFNpbmdsZVJlc3VsdCgpOwogICAgICAgIGFzc2VydFRydWUocmVz\ndWx0LmdldENsYXNzKCkgKyAiIG5vdCBpbnN0YW5jZSBvZiBEYXRlIiwgcmVz\ndWx0IGluc3RhbmNlb2YgRGF0ZSk7ICAKCiAgICB9CgogICAgcHVibGljIHZv\naWQgdGVzdEN1cnJlbnRUaW1lc3RhbXBSZXR1cm5zU1FMVHlwZXMoKSB7CiAg\nICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIE9y\nZGVyIHBjID0gbmV3IE9yZGVyKCk7CiAgICAgICAgZW0ucGVyc2lzdChwYyk7\nCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKCiAgICAg\nICAgaW50IG9pZCA9IHBjLmdldElkKCk7CgogICAgICAgIENyaXRlcmlhUXVl\ncnk8VGltZXN0YW1wPiBjcXVlcnkgPSBjYi5jcmVhdGVRdWVyeShUaW1lc3Rh\nbXAuY2xhc3MpOwogICAgICAgIFJvb3Q8T3JkZXI+IG9yZGVyID0gY3F1ZXJ5\nLmZyb20oT3JkZXIuY2xhc3MpOwogICAgICAgIGNxdWVyeS5zZWxlY3QoY2Iu\nY3VycmVudFRpbWVzdGFtcCgpKTsKICAgICAgICBjcXVlcnkud2hlcmUoY2Iu\nZXF1YWwob3JkZXIuZ2V0KE9yZGVyXy5pZCksIG9pZCkpOwoKICAgICAgICBU\neXBlZFF1ZXJ5PFRpbWVzdGFtcD4gdHEgPSBlbS5jcmVhdGVRdWVyeShjcXVl\ncnkpOwogICAgICAgIE9iamVjdCByZXN1bHQgPSB0cS5nZXRTaW5nbGVSZXN1\nbHQoKTsKICAgICAgICBhc3NlcnRUcnVlKHJlc3VsdC5nZXRDbGFzcygpICsg\nIiBub3QgaW5zdGFuY2Ugb2YgVGltZXN0YW1wIiwgcmVzdWx0IGluc3RhbmNl\nb2YgVGltZXN0YW1wKTsgIAogICAgICAgIAogICAgfQogICAgCi8vICAgIHB1\nYmxpYyB2b2lkIHRlc3RJbk1lbW9yeUFjY2Vzc1BhdGgoKSB7Ci8vICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7Ci8vICAgICAgICAvLyBt\ndXN0IGhhdmUgbmV3L2RpcnR5IG1hbmFnZWQgaW5zdGFuY2VzIHRvIGV4ZXJj\naXNlIHRoZSBjb2RlIHBhdGgKLy8gICAgICAgIGVtLnBlcnNpc3QobmV3IEN1\nc3RvbWVyKCkpOwovLyAgICAgICAgQ3JpdGVyaWFRdWVyeTxDdXN0b21lcj4g\nY3F1ZXJ5ID0gY2IuY3JlYXRlUXVlcnkoQ3VzdG9tZXIuY2xhc3MpOwovLyAg\nICAgICAgUm9vdDxDdXN0b21lcj4gY3VzdG9tZXIgPSBjcXVlcnkuZnJvbShD\ndXN0b21lci5jbGFzcyk7Ci8vICAgICAgICBGZXRjaDxDdXN0b21lciwgQWNj\nb3VudD4gYyA9IGN1c3RvbWVyLmZldGNoKCJhY2NvdW50cyIsIEpvaW5UeXBl\nLkxFRlQpOwovLyAgICAgICAgY3F1ZXJ5LndoZXJlKGNiLmxpa2UoY3VzdG9t\nZXIuPFN0cmluZz5nZXQoImZpcnN0TmFtZSIpLCAiYSUiKSkuc2VsZWN0KGN1\nc3RvbWVyKS5kaXN0aW5jdCh0cnVlKTsKLy8gICAgICAgIFR5cGVkUXVlcnk8\nQ3VzdG9tZXI+IHRxdWVyeSA9IGVtLmNyZWF0ZVF1ZXJ5KGNxdWVyeSk7Ci8v\nICAgICAgICB0cXVlcnkuc2V0TWF4UmVzdWx0cygzKTsKLy8gICAgICAgIExp\nc3Q8Q3VzdG9tZXI+IHJlc3VsdCA9IHRxdWVyeS5nZXRSZXN1bHRMaXN0KCk7\nCi8vCi8vICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdExpdGVyYWxJ\nblByb2plY3Rpb24oKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0\nICdhJyBmcm9tIEN1c3RvbWVyIGMgd2hlcmUgYy5pZD0xMCI7CiAgICAgICAg\nCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxTdHJpbmc+IGNxID0gY2IuY3JlYXRl\nUXVlcnkoU3RyaW5nLmNsYXNzKTsKICAgICAgICBSb290PEN1c3RvbWVyPiBj\nID0gY3EuZnJvbShDdXN0b21lci5jbGFzcyk7CiAgICAgICAgY3Euc2VsZWN0\nKGNiLnRvU3RyaW5nKGNiLmxpdGVyYWwoJ2EnKSkpOwogICAgICAgIGNxLndo\nZXJlKGNiLmVxdWFsKGMuZ2V0KEN1c3RvbWVyXy5pZCksIDEwKSk7CiAgICAg\nICAgYXNzZXJ0RXF1aXZhbGVuY2UoY3EsIGpwcWwpOwogICAgfQogICAgCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0QmlnRGVjaW1hbENvbnZlcnNpb24oKSB7CiAg\nICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0IGMuYWNjb3VudE51bSoxMC4z\nMjU5NyBmcm9tIEN1c3RvbWVyIGMgd2hlcmUgYy5pZD0xMCI7CiAgICAgICAg\nCiAgICAgICAgbG9uZyBhY2NvdW50TnVtYmVyID0gMTIzNDUxNjI3OTsKICAg\nICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgQ3Vz\ndG9tZXIgY3VzdG9tZXIgPSBuZXcgQ3VzdG9tZXIoKTsKICAgICAgICBjdXN0\nb21lci5zZXRBY2NvdW50TnVtKGFjY291bnROdW1iZXIpOwogICAgICAgIGVt\nLnBlcnNpc3QoY3VzdG9tZXIpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9u\nKCkuY29tbWl0KCk7CiAgICAgICAgCiAgICAgICAgbG9uZyBjaWQgPSBjdXN0\nb21lci5nZXRJZCgpOwogICAgICAgIAogICAgICAgIENyaXRlcmlhUXVlcnk8\nQmlnRGVjaW1hbD4gY3EgPSBjYi5jcmVhdGVRdWVyeShCaWdEZWNpbWFsLmNs\nYXNzKTsKICAgICAgICBSb290PEN1c3RvbWVyPiBjID0gY3EuZnJvbShDdXN0\nb21lci5jbGFzcyk7CiAgICAgICAgY3Euc2VsZWN0KGNiLnRvQmlnRGVjaW1h\nbChjYi5wcm9kKGMuZ2V0KEN1c3RvbWVyXy5hY2NvdW50TnVtKSwgbmV3IEJp\nZ0RlY2ltYWwoMTAuMzI1OTcpKSkpOwogICAgICAgIGNxLndoZXJlKGNiLmVx\ndWFsKGMuZ2V0KEN1c3RvbWVyXy5pZCksIGNpZCkpOwogICAgICAgIC8vYXNz\nZXJ0RXF1aXZhbGVuY2UoY3EsIGpwcWwpOwogICAgICAgIAogICAgICAgIExp\nc3Q8QmlnRGVjaW1hbD4gcmVzdWx0ID0gZW0uY3JlYXRlUXVlcnkoY3EpLmdl\ndFJlc3VsdExpc3QoKTsKICAgICAgICBhc3NlcnRGYWxzZShyZXN1bHQuaXNF\nbXB0eSgpKTsKICAgICAgICBhc3NlcnRUcnVlKHJlc3VsdC5nZXQoMCkgaW5z\ndGFuY2VvZiBCaWdEZWNpbWFsKTsKICAgIH0KICAgIAogICAKfQo=\n","encoding":"base64"}

