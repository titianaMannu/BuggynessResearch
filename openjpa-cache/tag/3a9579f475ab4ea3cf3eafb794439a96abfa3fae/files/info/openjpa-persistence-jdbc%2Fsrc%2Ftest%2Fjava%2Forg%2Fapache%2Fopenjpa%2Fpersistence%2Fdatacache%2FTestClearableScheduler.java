{"sha":"4709bc2dfefb9c75674792f0ab8f67471e24669c","node_id":"MDQ6QmxvYjIwNjM2NDo0NzA5YmMyZGZlZmI5Yzc1Njc0NzkyZjBhYjhmNjc0NzFlMjQ2Njlj","size":5819,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/4709bc2dfefb9c75674792f0ab8f67471e24669c","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZGF0YWNh\nY2hlOwoKaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7CmltcG9ydCBqYXZh\nLnV0aWwuQ2FsZW5kYXI7CmltcG9ydCBqYXZhLnV0aWwuRGF0ZTsKaW1wb3J0\nIGphdmEudXRpbC5MaXN0OwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5j\nb25mLk9wZW5KUEFDb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmRhdGFjYWNoZS5Db25jdXJyZW50RGF0YUNhY2hlOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmRhdGFjYWNoZS5EYXRhQ2FjaGVNYW5hZ2Vy\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmRhdGFjYWNoZS5DbGVhcmFi\nbGVTY2hlZHVsZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lz\ndGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXJTUEk7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZGF0YWNhY2hlLmNvbW1vbi5hcHBz\nLlNjaGVkdWxlZEV2aWN0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLnBlcnNpc3RlbmNlLnRlc3QuU2luZ2xlRU1GVGVzdENhc2U7CgpwdWJsaWMg\nY2xhc3MgVGVzdENsZWFyYWJsZVNjaGVkdWxlciBleHRlbmRzIFNpbmdsZUVN\nRlRlc3RDYXNlIHsKCiAgICBwcml2YXRlIHN0YXRpYyBTdHJpbmcgZ2V0TWlu\ndXRlc1N0cmluZygpIHsKICAgICAgICBTdHJpbmdCdWZmZXIgYnVmID0gbmV3\nIFN0cmluZ0J1ZmZlcigpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwg\nNjA7IGkrKykgewogICAgICAgICAgICBpZiAoaSAlIDIgPT0gMCkKICAgICAg\nICAgICAgICAgIGJ1Zi5hcHBlbmQoaSkuYXBwZW5kKCcsJyk7CiAgICAgICAg\nfQogICAgICAgIHJldHVybiBidWYudG9TdHJpbmcoKTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBzZXRVcCgpIHsKICAgICAgICBzZXRVcCgKICAgICAgICAg\nICAgIm9wZW5qcGEuRGF0YUNhY2hlIiwgInRydWUoRXZpY3Rpb25TY2hlZHVs\nZT0rMSkiCiAgICAgICAgICAgICwgIm9wZW5qcGEuUXVlcnlDYWNoZSIsICJ0\ncnVlIgogICAgICAgICAgICAsIm9wZW5qcGEuUmVtb3RlQ29tbWl0UHJvdmlk\nZXIiLCAic2p2bSIKICAgICAgICAgICAgLFNjaGVkdWxlZEV2aWN0aW9uLmNs\nYXNzLCBDTEVBUl9UQUJMRVMKICAgICAgICAgICAgKTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0QmFzaWMoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAg\nICAgICBPcGVuSlBBRW50aXR5TWFuYWdlclNQSSBlbSA9IGVtZi5jcmVhdGVF\nbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgT3BlbkpQQUNvbmZpZ3VyYXRpb24g\nY29uZiA9ICgoT3BlbkpQQUVudGl0eU1hbmFnZXJTUEkpIGVtKS5nZXRDb25m\naWd1cmF0aW9uKCk7CiAgICAgICAgQ2xlYXJhYmxlU2NoZWR1bGVyIHNjaGVk\ndWxlciA9IG5ldyBDbGVhcmFibGVTY2hlZHVsZXIoY29uZik7CiAgICAgICAg\nLy8gTWFrZSB0aGUgc2NoZWR1bGVyIHJ1biBldmVyeSAxIG1pbnV0ZQogICAg\nICAgIHNjaGVkdWxlci5zZXRJbnRlcnZhbCgxKTsKICAgICAgICBEdW1teUNh\nY2hlIGNhY2hlMSA9IG5ldyBEdW1teUNhY2hlKCk7CiAgICAgICAgRHVtbXlD\nYWNoZSBjYWNoZTIgPSBuZXcgRHVtbXlDYWNoZSgpOwoKICAgICAgICBDYWxl\nbmRhciBjYWwgPSBDYWxlbmRhci5nZXRJbnN0YW5jZSgpOwogICAgICAgIGNh\nbC5zZXRUaW1lKG5ldyBEYXRlKCkpOwogICAgICAgIGludCBjdXJyTWluID0g\nY2FsLmdldChDYWxlbmRhci5NSU5VVEUpOwogICAgICAgIGludCBwbHVzT25l\nID0gY3Vyck1pbisxOwogICAgICAgIGludCBwbHVzVHdvID0gcGx1c09uZSsx\nOwogICAgICAgIGlmKHBsdXNPbmU+PTYwKXsKICAgICAgICAgICAgcGx1c09u\nZS09NjA7CiAgICAgICAgfQogICAgICAgIGlmKHBsdXNUd28+PTYwKXsKICAg\nICAgICAgICAgcGx1c1R3by09NjA7CiAgICAgICAgfQogICAgICAgIC8vIFNj\naGVkdWxlIGV2aWN0aW9uIHRvIGhhcHBlbiB0aGUgbmV4dCB0d28gbWludXRl\ncwogICAgICAgIHNjaGVkdWxlci5zY2hlZHVsZUV2aWN0aW9uKGNhY2hlMiwg\ncGx1c09uZSsiLCIrcGx1c1R3bysiICogKiAqICoiKTsKCiAgICAgICAgLy8g\nU2NoZWR1bGUgZXZpY3Rpb24gdG8gaGFwcGVuIGV2ZXJ5IG1pbnR1ZSBvbiBj\nYWNoZSAxCiAgICAgICAgc2NoZWR1bGVyLnNjaGVkdWxlRXZpY3Rpb24oY2Fj\naGUxLCAoIisxIikpOwogICAgICAgIAogICAgICAgIFRocmVhZC5jdXJyZW50\nVGhyZWFkKCkuc2xlZXAoNjEwMDApOwogICAgICAgIGFzc2VydEVxdWFscygx\nLGNhY2hlMS5nZXRDbGVhckNvdW50KCkpOwogICAgICAgIGFzc2VydEVxdWFs\ncygxLGNhY2hlMi5nZXRDbGVhckNvdW50KCkpOwogICAgICAgIAogICAgICAg\nIFRocmVhZC5jdXJyZW50VGhyZWFkKCkuc2xlZXAoNjAwMDApOwogICAgICAg\nIGFzc2VydEVxdWFscygyLGNhY2hlMS5nZXRDbGVhckNvdW50KCkpOwogICAg\nICAgIGFzc2VydEVxdWFscygyLGNhY2hlMi5nZXRDbGVhckNvdW50KCkpOwog\nICAgICAgIAogICAgICAgIFRocmVhZC5jdXJyZW50VGhyZWFkKCkuc2xlZXAo\nNjAwMDApOwogICAgICAgIGFzc2VydEVxdWFscygzLGNhY2hlMS5nZXRDbGVh\nckNvdW50KCkpOwogICAgICAgIGFzc2VydEVxdWFscygyLGNhY2hlMi5nZXRD\nbGVhckNvdW50KCkpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nTXVsdGl0aHJlYWRlZEluaXRpYWxpemF0aW9uKCkgdGhyb3dzIEV4Y2VwdGlv\nbiB7CiAgICAgICAgZmluYWwgT3BlbkpQQUNvbmZpZ3VyYXRpb24gY29uZiA9\nICBlbWYuZ2V0Q29uZmlndXJhdGlvbigpOwogICAgICAgIGZpbmFsIExpc3Q8\nRGF0YUNhY2hlTWFuYWdlcj4gZGNtcyA9IG5ldyBBcnJheUxpc3Q8RGF0YUNh\nY2hlTWFuYWdlcj4oKTsKICAgICAgICBSdW5uYWJsZSByID0gbmV3IFJ1bm5h\nYmxlKCl7CiAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsKICAgICAg\nICAgICAgICAgIGRjbXMuYWRkKGNvbmYuZ2V0RGF0YUNhY2hlTWFuYWdlcklu\nc3RhbmNlKCkpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBM\naXN0PFRocmVhZD4gd29ya2VycyA9IG5ldyBBcnJheUxpc3Q8VGhyZWFkPigp\nOwogICAgICAgIGZvcihpbnQgaSA9IDA7aTwyMDtpKyspewogICAgICAgICAg\nICB3b3JrZXJzLmFkZChuZXcgVGhyZWFkKHIpKTsKICAgICAgICB9CiAgICAg\nICAgZm9yKFRocmVhZCB0IDogd29ya2Vycyl7CiAgICAgICAgICAgIHQuc3Rh\ncnQoKTsKICAgICAgICB9CiAgICAgICAgZm9yKFRocmVhZCB0IDogd29ya2Vy\ncyl7CiAgICAgICAgICAgIHQuam9pbigpOwogICAgICAgIH0KICAgICAgICBE\nYXRhQ2FjaGVNYW5hZ2VyIHByZXYgPSBkY21zLmdldCgwKTsKICAgICAgICBm\nb3IoRGF0YUNhY2hlTWFuYWdlciBkY20gOiBkY21zKXsKICAgICAgICAgICAg\nYXNzZXJ0VHJ1ZShwcmV2ID09IGRjbSk7CiAgICAgICAgICAgIHByZXYgPSBk\nY207CiAgICAgICAgfQoKICAgIH0KCiAgICAvKioKICAgICAqIFBhc3MgaW4g\nNCBvdXQgb2YgNSB0b2tlbnMuCiAgICAgKi8KICAgIC8vIHByaXZhdGUgdm9p\nZCBkb1Rlc3QoU3RyaW5nIHZhbGlkLCBTdHJpbmcgaW52YWxpZCkgdGhyb3dz\nIEV4Y2VwdGlvbiB7CiAgICAvLwogICAgLy8gT3BlbkpQQUVudGl0eU1hbmFn\nZXJGYWN0b3J5IGVtZiA9IChPcGVuSlBBRW50aXR5TWFuYWdlckZhY3Rvcnkp\nIGdldEVtZigpOwogICAgLy8gT3BlbkpQQUNvbmZpZ3VyYXRpb24gY29uZiA9\nICgoT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5U1BJKQogICAgLy8gT3Bl\nbkpQQVBlcnNpc3RlbmNlLmNhc3QoZW1mKSkuZ2V0Q29uZmlndXJhdGlvbigp\nOwogICAgLy8KICAgIC8vIERhdGFDYWNoZVNjaGVkdWxlciBzY2hlZHVsZXIg\nPSBuZXcgRGF0YUNhY2hlU2NoZWR1bGVyKGNvbmYpOwogICAgLy8gc2NoZWR1\nbGVyLnNldEludGVydmFsKDEpOwogICAgLy8KICAgIC8vIENhbGVuZGFyIGNh\nbCA9IENhbGVuZGFyLmdldEluc3RhbmNlKCk7CiAgICAvLyBjYWwuc2V0VGlt\nZShuZXcgRGF0ZSgpKTsKICAgIC8vIFN0cmluZyBzY2hlZCA9ICgoY2FsLmdl\ndChDYWxlbmRhci5NSU5VVEUpICsgMSkgJSA2MCkgKyAiICI7CiAgICAvLyBE\ndW1teUNhY2hlIHZhbGlkQ2FjaGUgPSBuZXcgRHVtbXlDYWNoZSgpOwogICAg\nLy8gc2NoZWR1bGVyLnNjaGVkdWxlRXZpY3Rpb24odmFsaWRDYWNoZSwgc2No\nZWQgKyB2YWxpZCk7CiAgICAvLyBEdW1teUNhY2hlIGludmFsaWRDYWNoZSA9\nIG5ldyBEdW1teUNhY2hlKCk7CiAgICAvLyBzY2hlZHVsZXIuc2NoZWR1bGVF\ndmljdGlvbihpbnZhbGlkQ2FjaGUsIHNjaGVkICsgaW52YWxpZCk7CiAgICAv\nLyBUaHJlYWQgdGhyZWFkID0gbmV3IFRocmVhZChzY2hlZHVsZXIpOwogICAg\nLy8gdGhyZWFkLnNldERhZW1vbih0cnVlKTsKICAgIC8vIHRocmVhZC5zdGFy\ndCgpOwogICAgLy8gLy8gdGVzdCB0aGF0IGl0IGRpZCBub3QgcnVuIHlldC4u\nLgogICAgLy8gVGhyZWFkLmN1cnJlbnRUaHJlYWQoKS5zbGVlcCg3MCAqIDEw\nMDApOyAvLyA3MCBzZWNvbmRzCiAgICAvLyBzY2hlZHVsZXIuc3RvcCgpOwog\nICAgLy8gLy8gYXNzZXJ0RXF1YWxzKDIsIHZhbGlkQ2FjaGUuY2xlYXJDb3Vu\ndCk7CiAgICAvLyBhc3NlcnRUcnVlKCJXcm9uZyBpbnZvY2F0aW9uIGNvdW50\nOiAiICsgdmFsaWRDYWNoZS5jbGVhckNvdW50LCB2YWxpZENhY2hlLmNsZWFy\nQ291bnQgPT0gMQogICAgLy8gfHwgdmFsaWRDYWNoZS5jbGVhckNvdW50ID09\nIDIpOwogICAgLy8gYXNzZXJ0RXF1YWxzKDAsIGludmFsaWRDYWNoZS5jbGVh\nckNvdW50KTsKICAgIC8vIH0KICAgIHByaXZhdGUgY2xhc3MgRHVtbXlDYWNo\nZSBleHRlbmRzIENvbmN1cnJlbnREYXRhQ2FjaGUgewoKICAgICAgICBpbnQg\nY2xlYXJDb3VudCA9IDA7CgogICAgICAgIHB1YmxpYyBzeW5jaHJvbml6ZWQg\naW50IGdldENsZWFyQ291bnQoKXsKICAgICAgICAgICAgcmV0dXJuIGNsZWFy\nQ291bnQ7CiAgICAgICAgfQogICAgICAgIHB1YmxpYyBzeW5jaHJvbml6ZWQg\ndm9pZCBjbGVhcigpIHsKICAgICAgICAgICAgY2xlYXJDb3VudCsrOwogICAg\nICAgIH0KICAgIH0KfQo=\n","encoding":"base64"}

