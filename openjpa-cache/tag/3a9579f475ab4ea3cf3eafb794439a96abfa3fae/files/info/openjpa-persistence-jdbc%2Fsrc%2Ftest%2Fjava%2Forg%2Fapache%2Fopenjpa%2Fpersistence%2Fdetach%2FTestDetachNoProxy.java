{"sha":"b2faf88d8d90561bec7d2fc612f5795ac3b3e17b","node_id":"MDQ6QmxvYjIwNjM2NDpiMmZhZjg4ZDhkOTA1NjFiZWM3ZDJmYzYxMmY1Nzk1YWMzYjNlMTdi","size":11436,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/b2faf88d8d90561bec7d2fc612f5795ac3b3e17b","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZGV0YWNo\nOwoKaW1wb3J0IGphdmEuaW8uQnl0ZUFycmF5SW5wdXRTdHJlYW07CmltcG9y\ndCBqYXZhLmlvLkJ5dGVBcnJheU91dHB1dFN0cmVhbTsKaW1wb3J0IGphdmEu\naW8uSU9FeGNlcHRpb247CmltcG9ydCBqYXZhLmlvLk9iamVjdElucHV0U3Ry\nZWFtOwppbXBvcnQgamF2YS5pby5PYmplY3RPdXRwdXRTdHJlYW07CmltcG9y\ndCBqYXZhLnV0aWwuQXJyYXlMaXN0OwoKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5jb25mLkNvbXBhdGliaWxpdHk7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEubGliLmxvZy5Mb2c7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXI7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UudGVzdC5TaW5nbGVFTUZUZXN0\nQ2FzZTsKCnB1YmxpYyBjbGFzcyBUZXN0RGV0YWNoTm9Qcm94eSBleHRlbmRz\nIFNpbmdsZUVNRlRlc3RDYXNlIHsKICAgIAogICAgcHJpdmF0ZSBzdGF0aWMg\nZmluYWwgaW50IG51bUVudGl0aWVzID0gMzsKICAgIHByaXZhdGUgc3RhdGlj\nIGZpbmFsIFN0cmluZyBQUk9YWSA9IG5ldyBTdHJpbmcoIiRwcm94eSIpOwog\nICAgcHJpdmF0ZSBMb2cgbG9nOwogICAgCiAgICBwdWJsaWMgdm9pZCBzZXRV\ncCgpIHsKICAgICAgICBzZXRVcChEUk9QX1RBQkxFUywgRW50aXR5MjAuY2xh\nc3MpOwogICAgICAgIGxvZyA9IGVtZi5nZXRDb25maWd1cmF0aW9uKCkuZ2V0\nTG9nKCJ0ZXN0Iik7CiAgICAgICAgCiAgICAgICAgLy8gY2hlY2sgYW5kIHNl\ndCBDb21wYXRpYmlsaXR5IHZhbHVlcyB0byBuZXcgMi4wIHZhbHVlcwogICAg\nICAgIENvbXBhdGliaWxpdHkgY29tcGF0ID0gZW1mLmdldENvbmZpZ3VyYXRp\nb24oKS5nZXRDb21wYXRpYmlsaXR5SW5zdGFuY2UoKTsKICAgICAgICBhc3Nl\ncnROb3ROdWxsKGNvbXBhdCk7CiAgICAgICAgaWYgKGxvZy5pc1RyYWNlRW5h\nYmxlZCgpKSB7CiAgICAgICAgICAgIGxvZy50cmFjZSgiQmVmb3JlIHNldCwg\nRmx1c2hCZWZvcmVEZXRhY2g9IiArIGNvbXBhdC5nZXRGbHVzaEJlZm9yZURl\ndGFjaCgpKTsKICAgICAgICAgICAgbG9nLnRyYWNlKCJCZWZvcmUgc2V0LCBD\nb3B5T25EZXRhY2g9IiArIGNvbXBhdC5nZXRDb3B5T25EZXRhY2goKSk7CiAg\nICAgICAgICAgIGxvZy50cmFjZSgiQmVmb3JlIHNldCwgQ2FzY2FkZVdpdGhE\nZXRhY2g9IiArIGNvbXBhdC5nZXRDYXNjYWRlV2l0aERldGFjaCgpKTsKICAg\nICAgICB9CiAgICAgICAgY29tcGF0LnNldEZsdXNoQmVmb3JlRGV0YWNoKGZh\nbHNlKTsKICAgICAgICBjb21wYXQuc2V0Q29weU9uRGV0YWNoKGZhbHNlKTsK\nICAgICAgICBjb21wYXQuc2V0Q2FzY2FkZVdpdGhEZXRhY2goZmFsc2UpOwog\nICAgICAgIGlmIChsb2cuaXNUcmFjZUVuYWJsZWQoKSkgewogICAgICAgICAg\nICBsb2cudHJhY2UoIkFmdGVyIHNldCwgRmx1c2hCZWZvcmVEZXRhY2g9IiAr\nIGNvbXBhdC5nZXRGbHVzaEJlZm9yZURldGFjaCgpKTsKICAgICAgICAgICAg\nbG9nLnRyYWNlKCJBZnRlciBzZXQsIENvcHlPbkRldGFjaD0iICsgY29tcGF0\nLmdldENvcHlPbkRldGFjaCgpKTsKICAgICAgICAgICAgbG9nLnRyYWNlKCJB\nZnRlciBzZXQsIENhc2NhZGVXaXRoRGV0YWNoPSIgKyBjb21wYXQuZ2V0Q2Fz\nY2FkZVdpdGhEZXRhY2goKSk7CiAgICAgICAgfQogICAgICAgIGNyZWF0ZUVu\ndGl0aWVzKG51bUVudGl0aWVzKTsKICAgIH0KICAgIAogICAgcHJpdmF0ZSB2\nb2lkIGNyZWF0ZUVudGl0aWVzKGludCBjb3VudCkgewogICAgICAgIEVudGl0\neTIwIGUyMCA9IG51bGw7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIg\nZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdl\ndFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBmb3IgKGludCBpPTA7\nIGk8Y291bnQ7IGkrKykgewogICAgICAgICAgICBlMjAgPSBuZXcgRW50aXR5\nMjAoaSk7CiAgICAgICAgICAgIGVtLnBlcnNpc3QoZTIwKTsKICAgICAgICB9\nCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAg\nICBlbS5jbG9zZSgpOwogICAgfQogICAgCiAgICAvKiAKICAgICAqIFZlcmlm\neSB0aGF0IGFuIGluLXBsYWNlIGRldGFjaGVkIGVudGl0eSBkb2VzIG5vdCB1\nc2UgdGhlIHByb3h5IGNsYXNzZXMuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lk\nIHRlc3REZXRhY2goKSB7CiAgICAgICAgaWYgKGxvZy5pc1RyYWNlRW5hYmxl\nZCgpKQogICAgICAgICAgICBsb2cudHJhY2UoIioqKioqIHRlc3REZXRhY2go\nKSAqKioqKiIpOwogICAgICAgIEludGVnZXIgaWQgPSBuZXcgSW50ZWdlcigw\nKTsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVh\ndGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgCiAgICAgICAgZW0uY2xlYXIo\nKTsKICAgICAgICBFbnRpdHkyMCBlMjAgPSBlbS5maW5kKEVudGl0eTIwLmNs\nYXNzLCBpZCk7CiAgICAgICAgaWYgKGxvZy5pc1RyYWNlRW5hYmxlZCgpKQog\nICAgICAgICAgICBsb2cudHJhY2UoIioqIGFmdGVyIGZpbmQiKTsKICAgICAg\nICBhc3NlcnRUcnVlKGVtLmNvbnRhaW5zKGUyMCkpOwogICAgICAgIGFzc2Vy\ndEZhbHNlKGVtLmlzRGV0YWNoZWQoZTIwKSk7CiAgICAgICAgdmVyaWZ5U2Vy\naWFsaXphYmxlKGUyMCwgdHJ1ZSwgZmFsc2UpOwogICAgICAgIAogICAgICAg\nIC8vIG5ldyBvcGVuanBhLTIuMC4wIGJlaGF2aW9yLCB3aGVyZSBkZXRhY2go\nKSBkb2Vzbid0IHJldHVybiB1cGRhdGVkIGVudGl0eSwgYnV0IGRvZXMgaXQg\naW4tcGxhY2UKICAgICAgICBlbS5kZXRhY2goZTIwKTsKICAgICAgICBpZiAo\nbG9nLmlzVHJhY2VFbmFibGVkKCkpCiAgICAgICAgICAgIGxvZy50cmFjZSgi\nKiogYWZ0ZXIgZGV0YWNoIik7CiAgICAgICAgLy8gaW4tcGxhY2UgdXBkYXRl\nZCBlbnRpdHkgc2hvdWxkIG5vdCBoYXZlIGFueSBwcm94eSBjbGFzc2VzIGFu\nZCBzaG91bGQgYmUgZGV0YWNoZWQKICAgICAgICBhc3NlcnRGYWxzZShlbS5j\nb250YWlucyhlMjApKTsKICAgICAgICBhc3NlcnRUcnVlKGVtLmlzRGV0YWNo\nZWQoZTIwKSk7CiAgICAgICAgdmVyaWZ5U2VyaWFsaXphYmxlKGUyMCwgZmFs\nc2UsIGZhbHNlKTsKICAgICAgICAgICAgICAgCiAgICAgICAgZW0uY2xvc2Uo\nKTsKICAgIH0KCiAgICAvKiAKICAgICAqIFZlcmlmeSB0aGF0IGEgZGV0YWNo\nQ29weSgpIHJldHVybmVkIGVudGl0eSBkb2VzIG5vdCBjb250YWluIGFueSBw\ncm94eSBjbGFzc2VzLgogICAgICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0RGV0\nYWNoQ29weSgpIHsKICAgICAgICBpZiAobG9nLmlzVHJhY2VFbmFibGVkKCkp\nCiAgICAgICAgICAgIGxvZy50cmFjZSgiKioqKiogdGVzdERldGFjaENvcHko\nKSAqKioqKiIpOwogICAgICAgIEludGVnZXIgaWQgPSBuZXcgSW50ZWdlcigw\nKTsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVh\ndGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0uY2xlYXIoKTsKCiAgICAg\nICAgRW50aXR5MjAgZTIwID0gZW0uZmluZChFbnRpdHkyMC5jbGFzcywgaWQp\nOwogICAgICAgIGlmIChsb2cuaXNUcmFjZUVuYWJsZWQoKSkKICAgICAgICAg\nICAgbG9nLnRyYWNlKCIqKiBhZnRlciBmaW5kIik7CiAgICAgICAgYXNzZXJ0\nVHJ1ZShlbS5jb250YWlucyhlMjApKTsKICAgICAgICBhc3NlcnRGYWxzZShl\nbS5pc0RldGFjaGVkKGUyMCkpOwogICAgICAgIHZlcmlmeVNlcmlhbGl6YWJs\nZShlMjAsIHRydWUsIGZhbHNlKTsKICAgICAgICAKICAgICAgICAvLyBUZXN0\nIG5ldyBkZXRhY2hDb3B5KCkgbWV0aG9kIGFkZGVkIGluIDIuMC4wCiAgICAg\nICAgRW50aXR5MjAgZTIwY29weSA9IGVtLmRldGFjaENvcHkoZTIwKTsKICAg\nICAgICBpZiAobG9nLmlzVHJhY2VFbmFibGVkKCkpCiAgICAgICAgICAgIGxv\nZy50cmFjZSgiKiogYWZ0ZXIgZGV0YWNoQ29weSIpOwogICAgICAgIC8vIHZl\ncmlmeSBlMjAgaXMgc2FtZSBhcyBhYm92ZQogICAgICAgIGFzc2VydFRydWUo\nZW0uY29udGFpbnMoZTIwKSk7CiAgICAgICAgYXNzZXJ0RmFsc2UoZW0uaXNE\nZXRhY2hlZChlMjApKTsKICAgICAgICB2ZXJpZnlTZXJpYWxpemFibGUoZTIw\nLCB0cnVlLCBmYWxzZSk7CiAgICAgICAgLy8gdmVyaWZ5IGNvcHkgZG9lcyBu\nb3QgaGF2ZSBhbnkgcHJveHkgY2xhc3NlcyAoaW4tcGxhY2UgdXBkYXRlZCkg\naXMgZGV0YWNoZWQKICAgICAgICBhc3NlcnRGYWxzZShlbS5jb250YWlucyhl\nMjBjb3B5KSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShlbS5pc0RldGFjaGVkKGUy\nMGNvcHkpKTsKICAgICAgICB2ZXJpZnlTZXJpYWxpemFibGUoZTIwY29weSwg\nZmFsc2UsIGZhbHNlKTsKICAgICAgICAKICAgICAgICBlbS5jbG9zZSgpOwog\nICAgfQoKICAgIC8qCiAgICAgKiBWZXJpZnkgdGhhdCBpbi1wbGFjZSBkZXRh\nY2hBbGwgZW50aXRpZXMgZG8gbm90IHVzZSB0aGUgcHJveHkgY2xhc3Nlcy4K\nICAgICAqLwogICAgcHVibGljIHZvaWQgdGVzdERldGFjaEFsbCgpIHsKICAg\nICAgICBpZiAobG9nLmlzVHJhY2VFbmFibGVkKCkpCiAgICAgICAgICAgIGxv\nZy50cmFjZSgiKioqKiogdGVzdERldGFjaEFsbCgpICoqKioqIik7CiAgICAg\nICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5\nTWFuYWdlcigpOwogICAgICAgIGVtLmNsZWFyKCk7CgogICAgICAgIEFycmF5\nTGlzdDxFbnRpdHkyMD4gZTIwTGlzdCA9IG5ldyBBcnJheUxpc3Q8RW50aXR5\nMjA+KG51bUVudGl0aWVzKTsKICAgICAgICBmb3IgKGludCBpPTA7IGk8bnVt\nRW50aXRpZXM7IGkrKykgewogICAgICAgICAgICBFbnRpdHkyMCBlMjAgPSBl\nbS5maW5kKEVudGl0eTIwLmNsYXNzLCBuZXcgSW50ZWdlcihpKSk7CiAgICAg\nICAgICAgIGUyMExpc3QuYWRkKGUyMCk7CiAgICAgICAgICAgIGlmIChsb2cu\naXNUcmFjZUVuYWJsZWQoKSkKICAgICAgICAgICAgICAgIGxvZy50cmFjZSgi\nKiogYWZ0ZXIgZmluZCBFbnRpdHkyMCgiICsgaSArICIpIik7CiAgICAgICAg\nICAgIGFzc2VydFRydWUoZW0uY29udGFpbnMoZTIwKSk7CiAgICAgICAgICAg\nIGFzc2VydEZhbHNlKGVtLmlzRGV0YWNoZWQoZTIwKSk7CiAgICAgICAgICAg\nIHZlcmlmeVNlcmlhbGl6YWJsZShlMjAsIHRydWUsIGZhbHNlKTsgICAgICAg\nICAgICAKICAgICAgICB9CgogICAgICAgIC8vIG5ldyBvcGVuanBhLTIuMC4w\nIGJlaGF2aW9yLCB3aGVyZSBkZXRhY2hBbGwoKSB1cGRhdGVzIGVudGl0aWVz\nIGluLXBsYWNlCiAgICAgICAgLy8gQXJyYXlMaXN0PEVudGl0eTIwPiBlMjBM\naXN0Q29weSA9IG5ldyBBcnJheUxpc3Q8RW50aXR5MjA+KGVtLmRldGFjaEFs\nbChlMjBMaXN0KSk7CiAgICAgICAgLy8gZW0uZGV0YWNoQWxsKGUyMExpc3Qp\nOyAgIC8vIGZvciBzb21lIHJlYXNvbiBjYWxsaW5nIHdpdGggQ29sbGVjdGlv\nbiBjYXVzZXMgYSBOUEUsIHNvIHVzZSBPYmplY3RbXSBpbnN0ZWFkCiAgICAg\nICAgZW0uZGV0YWNoQWxsKGUyMExpc3QuZ2V0KDApLCBlMjBMaXN0LmdldCgx\nKSwgZTIwTGlzdC5nZXQoMikpOwogICAgICAgIGZvciAoaW50IGk9MDsgaTxu\ndW1FbnRpdGllczsgaSsrKSB7CiAgICAgICAgICAgIGlmIChsb2cuaXNUcmFj\nZUVuYWJsZWQoKSkKICAgICAgICAgICAgICAgIGxvZy50cmFjZSgiKiogYWZ0\nZXIgRU0uZGV0YWNoQWxsKCkgdmVyaWZ5IGUyMExpc3QoIiArIGkgKyAiKSIp\nOwogICAgICAgICAgICBFbnRpdHkyMCBlMjAgPSBlMjBMaXN0LmdldChpKTsK\nICAgICAgICAgICAgLy8gZW50aXR5IHNob3VsZCBub3QgaGF2ZSBhbnkgcHJv\neHkgY2xhc3NlcyAoaW4tcGxhY2UgdXBkYXRlZCkgYW5kIGlzIGRldGFjaGVk\nCiAgICAgICAgICAgIGFzc2VydEZhbHNlKGVtLmNvbnRhaW5zKGUyMCkpOwog\nICAgICAgICAgICBhc3NlcnRUcnVlKGVtLmlzRGV0YWNoZWQoZTIwKSk7CiAg\nICAgICAgICAgIHZlcmlmeVNlcmlhbGl6YWJsZShlMjAsIGZhbHNlLCBmYWxz\nZSk7CiAgICAgICAgfQoKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAg\nIC8qCiAgICAgKiBWZXJpZnkgdGhhdCBhZnRlciBFTS5jbGVhcigpIGVudGl0\naWVzIHN0aWxsIGNvbnRhaW4gcHJveHkgY2xhc3Nlcy4KICAgICAqLwogICAg\ncHVibGljIHZvaWQgdGVzdENsZWFyKCkgewogICAgICAgIGlmIChsb2cuaXNU\ncmFjZUVuYWJsZWQoKSkKICAgICAgICAgICAgbG9nLnRyYWNlKCIqKioqKiB0\nZXN0Q2xlYXIoKSAqKioqKiIpOwogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBl\nbS5jbGVhcigpOwoKICAgICAgICBBcnJheUxpc3Q8RW50aXR5MjA+IGUyMExp\nc3QgPSBuZXcgQXJyYXlMaXN0PEVudGl0eTIwPihudW1FbnRpdGllcyk7CiAg\nICAgICAgZm9yIChpbnQgaT0wOyBpPG51bUVudGl0aWVzOyBpKyspIHsKICAg\nICAgICAgICAgRW50aXR5MjAgZTIwID0gZW0uZmluZChFbnRpdHkyMC5jbGFz\ncywgbmV3IEludGVnZXIoaSkpOwogICAgICAgICAgICBlMjBMaXN0LmFkZChl\nMjApOwogICAgICAgICAgICBpZiAobG9nLmlzVHJhY2VFbmFibGVkKCkpCiAg\nICAgICAgICAgICAgICBsb2cudHJhY2UoIioqIGFmdGVyIGZpbmQgRW50aXR5\nMjAoIiArIGkgKyAiKSIpOwogICAgICAgICAgICBhc3NlcnRUcnVlKGVtLmNv\nbnRhaW5zKGUyMCkpOwogICAgICAgICAgICBhc3NlcnRGYWxzZShlbS5pc0Rl\ndGFjaGVkKGUyMCkpOwogICAgICAgICAgICB2ZXJpZnlTZXJpYWxpemFibGUo\nZTIwLCB0cnVlLCBmYWxzZSk7ICAgICAgICAgICAgCiAgICAgICAgfQoKICAg\nICAgICBlbS5jbGVhcigpOwoKICAgICAgICBmb3IgKGludCBpPTA7IGk8bnVt\nRW50aXRpZXM7IGkrKykgewogICAgICAgICAgICBpZiAobG9nLmlzVHJhY2VF\nbmFibGVkKCkpCiAgICAgICAgICAgICAgICBsb2cudHJhY2UoIioqIGFmdGVy\nIEVNLmNsZWFyKCkgdmVyaWZ5IEVudGl0eTIwKCIgKyBpICsgIikiKTsKICAg\nICAgICAgICAgRW50aXR5MjAgZTIwID0gZTIwTGlzdC5nZXQoaSk7CiAgICAg\nICAgICAgIGFzc2VydEZhbHNlKGVtLmNvbnRhaW5zKGUyMCkpOwogICAgICAg\nICAgICBhc3NlcnRUcnVlKGVtLmlzRGV0YWNoZWQoZTIwKSk7CiAgICAgICAg\nICAgIC8vIGVudGl0eSBzaG91bGQgc3RpbGwgaGF2ZSBwcm94eSBjbGFzc2Vz\nIGFuZCBpcyBkZXRhY2hlZCwKICAgICAgICAgICAgLy8gT2xkIDEuMi54IEJl\naGF2aW9yIC0KICAgICAgICAgICAgLy8gICB0aGUgJHByb3h5IGNsYXNzZXMg\nYXJlIG5vdCByZW1vdmVkIGR1cmluZyBzZXJpYWxpemF0aW9uCiAgICAgICAg\nICAgIC8vIHZlcmlmeVNlcmlhbGl6YWJsZShlMjAsIHRydWUsIHRydWUpOwog\nICAgICAgICAgICAvLyBPUEVOSlBBLTEwOTcgTmV3IGJlaGF2aW9yIC0gJHBy\nb3h5IGNsYXNzZXMgYXJlIHJlbW92ZWQKICAgICAgICAgICAgdmVyaWZ5U2Vy\naWFsaXphYmxlKGUyMCwgdHJ1ZSwgZmFsc2UpOwogICAgICAgIH0KCiAgICAg\nICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRlc3QgdGhh\ndCB0aGUgZW50aXR5IGlzL2lzIG5vdCB1c2luZyBvdXIgJHByb3h5IGNsYXNz\nZXMgYmVmb3JlCiAgICAgKiBhbmQgYWZ0ZXIgc2VyaWFsaXphdGlvbi4KICAg\nICAqCiAgICAgKiBAcGFyYW0gZTIwIEVudGl0eSB0byB0ZXN0LgogICAgICog\nQHBhcmFtIHVzZXNQcm94eUJlZm9yZSB2ZXJpZnkgdGhhdCB0aGUgZW50aXR5\nIHVzZXMgdGhlICRwcm94eSBjbGFzc2VzCiAgICAgKiAgICAgICAgYmVmb3Jl\nIHNlcmlhbGl6YXRpb24gaWYgdHJ1ZSBhbmQgZG9lcyBub3QgaWYgZmFsc2Uu\nCiAgICAgKiBAcGFyYW0gdXNlc1Byb3h5QWZ0ZXIgdmVyaWZ5IHRoYXQgdGhl\nIGVudGl0eSB1c2VzIHRoZSAkcHJveHkgY2xhc3NlcwogICAgICogICAgICAg\nIGFmdGVyIHNlcmlhbGl6YXRpb24gaWYgdHJ1ZSBhbmQgZG9lcyBub3QgaWYg\nZmFsc2UuCiAgICAgKi8KICAgIHByaXZhdGUgdm9pZCB2ZXJpZnlTZXJpYWxp\nemFibGUoRW50aXR5MjAgZTIwLCBib29sZWFuIHVzZXNQcm94eUJlZm9yZSwK\nICAgICAgICAgICAgYm9vbGVhbiB1c2VzUHJveHlBZnRlcikgewogICAgICAg\nIEJ5dGVBcnJheU91dHB1dFN0cmVhbSBiYW9zID0gbmV3IEJ5dGVBcnJheU91\ndHB1dFN0cmVhbSgpOwogICAgICAgIE9iamVjdE91dHB1dFN0cmVhbSBvb3Mg\nPSBudWxsOwogICAgICAgIGJ5dGVbXSBlMjBieXRlcyA9IG51bGw7CiAgICAg\nICAgCiAgICAgICAgaWYgKGxvZy5pc1RyYWNlRW5hYmxlZCgpKQogICAgICAg\nICAgICBsb2cudHJhY2UoInZlcmlmeVNlcmlhbGl6YWJsZSgpIC0gYmVmb3Jl\nIHNlcmlhbGl6ZSIpOwogICAgICAgIHZlcmlmeUVudGl0aWVzKGUyMCwgdXNl\nc1Byb3h5QmVmb3JlKTsKCiAgICAgICAgLy8gZmlyc3Qgc2VyaWFsaXplCiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgb29zID0gbmV3IE9iamVjdE91dHB1\ndFN0cmVhbShiYW9zKTsKICAgICAgICAgICAgb29zLndyaXRlT2JqZWN0KGUy\nMCk7CiAgICAgICAgICAgIGUyMGJ5dGVzID0gYmFvcy50b0J5dGVBcnJheSgp\nOwogICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGUpIHsKICAgICAgICAg\nICAgZmFpbChlLnRvU3RyaW5nKCkpOwogICAgICAgIH0gZmluYWxseSB7CiAg\nICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBpZiAob29zICE9IG51\nbGwpCiAgICAgICAgICAgICAgICAgICAgb29zLmNsb3NlKCk7CiAgICAgICAg\nICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgfQog\nICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyB0aGVuIGRlc2VyaWFsaXpl\nIGFuZCBhc3NlcnQgbm8gJHByb3h5IGNsYXNzZXMgZXhpc3QKICAgICAgICBC\neXRlQXJyYXlJbnB1dFN0cmVhbSBiYWlzID0gbmV3IEJ5dGVBcnJheUlucHV0\nU3RyZWFtKGUyMGJ5dGVzKTsKICAgICAgICBPYmplY3RJbnB1dFN0cmVhbSBv\naXMgPSBudWxsOwogICAgICAgIEVudGl0eTIwIGUyMG5ldyA9IG51bGw7CiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgb2lzID0gbmV3IE9iamVjdElucHV0\nU3RyZWFtKGJhaXMpOwogICAgICAgICAgICBlMjBuZXcgPSAoRW50aXR5MjAp\nIG9pcy5yZWFkT2JqZWN0KCk7CiAgICAgICAgICAgIGlmIChsb2cuaXNUcmFj\nZUVuYWJsZWQoKSkKICAgICAgICAgICAgICAgIGxvZy50cmFjZSgidmVyaWZ5\nU2VyaWFsaXphYmxlKCkgLSBhZnRlciBkZXNlcmlhbGl6ZSIpOwogICAgICAg\nICAgICB2ZXJpZnlFbnRpdGllcyhlMjBuZXcsIHVzZXNQcm94eUFmdGVyKTsK\nICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAg\nIGZhaWwoZS50b1N0cmluZygpKTsKICAgICAgICB9IGNhdGNoIChDbGFzc05v\ndEZvdW5kRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgZmFpbChlLnRvU3Ry\naW5nKCkpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIHRyeSB7\nCiAgICAgICAgICAgICAgICBpZiAob2lzICE9IG51bGwpCiAgICAgICAgICAg\nICAgICAgICAgb2lzLmNsb3NlKCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKElP\nRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICB9\nCgogICAgcHJpdmF0ZSB2b2lkIHZlcmlmeUVudGl0aWVzKEVudGl0eTIwIGUy\nMCwgYm9vbGVhbiB1c2VzUHJveHkpIHsKICAgICAgICBpZiAobG9nLmlzVHJh\nY2VFbmFibGVkKCkpIHsKICAgICAgICAgICAgbG9nLnRyYWNlKCJ2ZXJpZnlF\nbnRpdGllcygpIC0gYXNzZXJ0aW5nIGV4cGVjdGVkIHByb3h5IHVzYWdlIGlz\nICIgKyB1c2VzUHJveHkpOwogICAgICAgICAgICBwcmludENsYXNzTmFtZXMo\nZTIwKTsKICAgICAgICB9CiAgICAgICAgYXNzZXJ0VHJ1ZSgiRXhwZWN0ZWQg\nc3FsRGF0ZSBlbmRzV2l0aCgkcHJveHkpIHRvIHJldHVybiAiICsgdXNlc1By\nb3h5LAogICAgICAgICAgICB1c2VzUHJveHkgPT0gZTIwLmdldERhdGUoKS5n\nZXRDbGFzcygpLmdldENhbm9uaWNhbE5hbWUoKS5lbmRzV2l0aChQUk9YWSkp\nOwogICAgICAgIGFzc2VydFRydWUoIkV4cGVjdGVkIHNxbFRpbWUgZW5kc1dp\ndGgoJHByb3h5KSB0byByZXR1cm4gIiArIHVzZXNQcm94eSwKICAgICAgICAg\nICAgdXNlc1Byb3h5ID09IGUyMC5nZXRUaW1lKCkuZ2V0Q2xhc3MoKS5nZXRD\nYW5vbmljYWxOYW1lKCkuZW5kc1dpdGgoUFJPWFkpKTsKICAgICAgICBhc3Nl\ncnRUcnVlKCJFeHBlY3RlZCBzcWxUaW1lc3RhbXAgZW5kc1dpdGgoJHByb3h5\nKSB0byByZXR1cm4gIiArIHVzZXNQcm94eSwKICAgICAgICAgICAgdXNlc1By\nb3h5ID09IGUyMC5nZXRUaW1lc3RhbXAoKS5nZXRDbGFzcygpLmdldENhbm9u\naWNhbE5hbWUoKS5lbmRzV2l0aChQUk9YWSkpOwogICAgICAgIAogICAgfQog\nICAgCiAgICBwcml2YXRlIHZvaWQgcHJpbnRDbGFzc05hbWVzKEVudGl0eTIw\nIGUyMCkgewogICAgICAgIGlmIChsb2cuaXNUcmFjZUVuYWJsZWQoKSkgewog\nICAgICAgICAgICBsb2cudHJhY2UoInNxbERhdGUgPSAiICsgZTIwLmdldERh\ndGUoKS5nZXRDbGFzcygpLmdldENhbm9uaWNhbE5hbWUoKSk7CiAgICAgICAg\nICAgIGxvZy50cmFjZSgic3FsVGltZSA9ICIgKyBlMjAuZ2V0VGltZSgpLmdl\ndENsYXNzKCkuZ2V0Q2Fub25pY2FsTmFtZSgpKTsKICAgICAgICAgICAgbG9n\nLnRyYWNlKCJzcWxUaW1lc3RhbXAgPSAiICsgZTIwLmdldFRpbWVzdGFtcCgp\nLmdldENsYXNzKCkuZ2V0Q2Fub25pY2FsTmFtZSgpKTsKICAgICAgICB9CiAg\nICB9Cn0K\n","encoding":"base64"}

