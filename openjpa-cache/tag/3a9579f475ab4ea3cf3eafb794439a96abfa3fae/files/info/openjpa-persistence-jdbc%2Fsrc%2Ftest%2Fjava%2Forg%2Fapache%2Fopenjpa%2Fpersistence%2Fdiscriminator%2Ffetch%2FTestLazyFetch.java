{"sha":"16dfe8bfab54410a8d002017fb3f6bc7932ed291","node_id":"MDQ6QmxvYjIwNjM2NDoxNmRmZThiZmFiNTQ0MTBhOGQwMDIwMTdmYjNmNmJjNzkzMmVkMjkx","size":3828,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/16dfe8bfab54410a8d002017fb3f6bc7932ed291","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZGlzY3Jp\nbWluYXRvci5mZXRjaDsKCmltcG9ydCBqYXZhLnV0aWwuSGFzaFNldDsKaW1w\nb3J0IGphdmEudXRpbC5MaXN0OwoKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNl\nLkVudGl0eU1hbmFnZXI7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRp\ndHlNYW5hZ2VyRmFjdG9yeTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVu\ndGl0eVRyYW5zYWN0aW9uOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5w\nZXJzaXN0ZW5jZS50ZXN0LlBlcnNpc3RlbmNlVGVzdENhc2U7CgpwdWJsaWMg\nY2xhc3MgVGVzdExhenlGZXRjaCBleHRlbmRzIFBlcnNpc3RlbmNlVGVzdENh\nc2UgewogICAgcHJpdmF0ZSBzdGF0aWMgaW50IE5fRU1QUyA9IDM7CgogICAg\ncHVibGljIEVudGl0eU1hbmFnZXJGYWN0b3J5IG5ld0VtZigpIHsKICAgICAg\nICBFbnRpdHlNYW5hZ2VyRmFjdG9yeSBlbWYgPSBjcmVhdGVFTUYoUGVyc29u\nLmNsYXNzLCBFbXBsb3llZS5jbGFzcywgTWFuYWdlci5jbGFzcyk7CiAgICAg\nICAgYXNzZXJ0Tm90TnVsbCgiVW5hYmxlIHRvIGNyZWF0ZSBFbnRpdHlNYW5h\nZ2VyRmFjdG9yeSIsIGVtZik7CiAgICAgICAgcmV0dXJuIGVtZjsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpIHsKICAgICAgICBFbnRpdHlNYW5h\nZ2VyRmFjdG9yeSBlbWYgPSBuZXdFbWYoKTsKICAgICAgICBFbnRpdHlNYW5h\nZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBF\nbnRpdHlUcmFuc2FjdGlvbiB0cmFuID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsK\nCiAgICAgICAgLy8gY2xlYW51cCBmcm9tIHByZXZpb3VzIGV4ZWN1dGlvbgog\nICAgICAgIHRyYW4uYmVnaW4oKTsKICAgICAgICBlbS5jcmVhdGVRdWVyeSgi\nRGVsZXRlIGZyb20gRF9GX01hbmFnZXIiKS5leGVjdXRlVXBkYXRlKCk7CiAg\nICAgICAgZW0uY3JlYXRlUXVlcnkoIkRlbGV0ZSBmcm9tIERfRl9FbXBsb3ll\nZSIpLmV4ZWN1dGVVcGRhdGUoKTsKICAgICAgICB0cmFuLmNvbW1pdCgpOwoK\nICAgICAgICAvLyBwb3B1bGF0ZSBhIHNtYWxsIGdyYXBoLgogICAgICAgIHRy\nYW4uYmVnaW4oKTsKICAgICAgICBNYW5hZ2VyIG0gPSBuZXcgTWFuYWdlcigp\nOwogICAgICAgIG0uc2V0SWQoMTApOwogICAgICAgIG0uc2V0RW1wbG95ZWVz\nKG5ldyBIYXNoU2V0PEVtcGxveWVlPigpKTsKICAgICAgICBlbS5wZXJzaXN0\nKG0pOwoKICAgICAgICBFbXBsb3llZSBlOwogICAgICAgIGZvciAoaW50IGkg\nPSAwOyBpIDwgTl9FTVBTOyBpKyspIHsKICAgICAgICAgICAgZSA9IG5ldyBF\nbXBsb3llZSgpOwogICAgICAgICAgICBlLnNldElkKGkgKyAxKTsKICAgICAg\nICAgICAgZS5zZXRNYW5hZ2VyKG0pOwogICAgICAgICAgICBtLmdldEVtcGxv\neWVlcygpLmFkZChlKTsKICAgICAgICAgICAgZW0ucGVyc2lzdChlKTsKICAg\nICAgICB9CiAgICAgICAgdHJhbi5jb21taXQoKTsKCiAgICAgICAgZW0uY2xv\nc2UoKTsKICAgICAgICBlbWYuY2xvc2UoKTsKICAgIH0KCiAgICBAU3VwcHJl\nc3NXYXJuaW5ncygidW5jaGVja2VkIikKICAgIHB1YmxpYyB2b2lkIHRlc3RG\nZXRjaE9uZVNpZGVGaXJzdCgpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyRmFj\ndG9yeSBlbWYgPSBuZXdFbWYoKTsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVt\nID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKCiAgICAgICAgTGlzdDxN\nYW5hZ2VyPiBtYW5hZ2VycyA9IGVtLmNyZWF0ZVF1ZXJ5KCJTZWxlY3QgbSBm\ncm9tIERfRl9NYW5hZ2VyIG0iKS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDEsIG1hbmFnZXJzLnNpemUoKSk7CiAgICAgICAgTWFu\nYWdlciBtID0gbWFuYWdlcnMuZ2V0KDApOwogICAgICAgIAogICAgICAgIExp\nc3Q8RW1wbG95ZWU+IGVtcHMgPSBlbS5jcmVhdGVRdWVyeSgiU2VsZWN0IGUg\nZnJvbSBEX0ZfRW1wbG95ZWUgZSIpLmdldFJlc3VsdExpc3QoKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoTl9FTVBTLCBlbXBzLnNpemUoKSk7CiAgICAgICAg\nCiAgICAgICAgZm9yKEVtcGxveWVlIGUgOiBlbXBzKSB7IAogICAgICAgICAg\nICBhc3NlcnROb3ROdWxsKGUuZ2V0TWFuYWdlcigpKTsKICAgICAgICAgICAg\nYXNzZXJ0VHJ1ZShtLmdldEVtcGxveWVlcygpLmNvbnRhaW5zKGUpKTsKICAg\nICAgICAgICAgYXNzZXJ0RXF1YWxzKG0sIGUuZ2V0TWFuYWdlcigpKTsKICAg\nICAgICB9CiAgICAgICAgZW0uY2xvc2UoKTsKICAgICAgICBlbWYuY2xvc2Uo\nKTsKICAgIH0gICAKICAgIAogICAgQFN1cHByZXNzV2FybmluZ3MoInVuY2hl\nY2tlZCIpCiAgICBwdWJsaWMgdm9pZCB0ZXN0RmV0Y2hNYW55U2lkZUZpcnN0\nKCkgewogICAgICAgIEVudGl0eU1hbmFnZXJGYWN0b3J5IGVtZiA9IG5ld0Vt\nZigpOwogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50\naXR5TWFuYWdlcigpOwogICAgICAgIAogICAgICAgIExpc3Q8RW1wbG95ZWU+\nIGVtcHMgPSBlbS5jcmVhdGVRdWVyeSgiU2VsZWN0IGUgZnJvbSBEX0ZfRW1w\nbG95ZWUgZSIpLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoTl9FTVBTLCBlbXBzLnNpemUoKSk7CiAgICAgICAgCiAgICAgICAgTGlz\ndDxNYW5hZ2VyPiBtYW5hZ2VycyA9IGVtLmNyZWF0ZVF1ZXJ5KCJTZWxlY3Qg\nbSBmcm9tIERfRl9NYW5hZ2VyIG0iKS5nZXRSZXN1bHRMaXN0KCk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKDEsIG1hbmFnZXJzLnNpemUoKSk7CiAgICAgICAg\nTWFuYWdlciBtID0gbWFuYWdlcnMuZ2V0KDApOwogICAgICAgIAogICAgICAg\nIGZvcihFbXBsb3llZSBlIDogZW1wcykgeyAKICAgICAgICAgICAgYXNzZXJ0\nTm90TnVsbChlLmdldE1hbmFnZXIoKSk7CiAgICAgICAgICAgIGFzc2VydFRy\ndWUobS5nZXRFbXBsb3llZXMoKS5jb250YWlucyhlKSk7CiAgICAgICAgICAg\nIGFzc2VydEVxdWFscyhtLCBlLmdldE1hbmFnZXIoKSk7CiAgICAgICAgfQog\nICAgICAgIGVtLmNsb3NlKCk7CiAgICAgICAgZW1mLmNsb3NlKCk7CiAgICB9\nCn0K\n","encoding":"base64"}

