{"sha":"efb20dbdb7b3110bfbefd2e68543dee3913fa0ef","node_id":"MDQ6QmxvYjIwNjM2NDplZmIyMGRiZGI3YjMxMTBiZmJlZmQyZTY4NTQzZGVlMzkxM2ZhMGVm","size":107955,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/efb20dbdb7b3110bfbefd2e68543dee3913fa0ef","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5lbWJlZDsKCmlt\ncG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uOwppbXBvcnQgamF2YS5zcWwuU1FM\nRXhjZXB0aW9uOwppbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wOwppbXBvcnQg\namF2YS51dGlsLkFycmF5TGlzdDsKaW1wb3J0IGphdmEudXRpbC5BcnJheXM7\nCmltcG9ydCBqYXZhLnV0aWwuQ2FsZW5kYXI7CmltcG9ydCBqYXZhLnV0aWwu\nQ29sbGVjdGlvbjsKaW1wb3J0IGphdmEudXRpbC5EYXRlOwppbXBvcnQgamF2\nYS51dGlsLkdyZWdvcmlhbkNhbGVuZGFyOwppbXBvcnQgamF2YS51dGlsLkhh\nc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuSGFzaFNldDsKaW1wb3J0IGphdmEu\ndXRpbC5MaXN0OwppbXBvcnQgamF2YS51dGlsLk1hcDsKaW1wb3J0IGphdmEu\ndXRpbC5TZXQ7CgppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5TWFu\nYWdlcjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXJG\nYWN0b3J5OwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5VHJhbnNh\nY3Rpb247CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5QZXJzaXN0ZW5jZVVu\naXRVdGlsOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuUXVlcnk7CgppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuY29uZi5KREJDQ29uZmlndXJh\ndGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1ldGEuTWFw\ncGluZ1Rvb2w7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRh\nLk1hcHBpbmdUb29sLkZsYWdzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMuc3FsLkRCRGljdGlvbmFyeTsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLnNxbC5PcmFjbGVEaWN0aW9uYXJ5OwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLkFyZ3VtZW50RXhjZXB0aW9uOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFF\nbnRpdHlNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNp\nc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyU1BJOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFQZXJzaXN0ZW5jZTsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS50ZXN0LlNR\nTExpc3RlbmVyVGVzdENhc2U7CgpwdWJsaWMgY2xhc3MgVGVzdEVtYmVkZGFi\nbGUgZXh0ZW5kcyBTUUxMaXN0ZW5lclRlc3RDYXNlIHsKICAgIHByaXZhdGUg\nc3RhdGljIGZpbmFsIENhbGVuZGFyIGNhbCA9IG5ldyBHcmVnb3JpYW5DYWxl\nbmRhcigpOwogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgSW50ZWdlciB0aW1l\nSGFzaCA9IG5ldyBJbnRlZ2VyKGNhbC5oYXNoQ29kZSgpKTsKICAgIHB1Ymxp\nYyBpbnQgbnVtRW1iZWRkYWJsZXMgPSAxOwogICAgcHVibGljIGludCBudW1C\nYXNpY1R5cGVzID0gMTsKICAgIHB1YmxpYyBpbnQgbnVtUHJvZ3JhbU1hbmFn\nZXJzID0gMjsKICAgIHB1YmxpYyBpbnQgbnVtTmlja05hbWVzID0gMzsKICAg\nIHB1YmxpYyBpbnQgbnVtRW1wbG95ZWVzUGVyUGhvbmVOdW1iZXIgPSAxOwog\nICAgcHVibGljIGludCBudW1QaG9uZU51bWJlcnNQZXJFbXBsb3llZSA9IDI7\nCiAgICBwdWJsaWMgaW50IG51bUVtcGxveWVlc1BlclByb2dyYW1NYW5hZ2Vy\nID0gMjsKICAgIHB1YmxpYyBpbnQgbnVtRW1wbG95ZWVzID0gbnVtUHJvZ3Jh\nbU1hbmFnZXJzCiAgICAgICAgKiBudW1FbXBsb3llZXNQZXJQcm9ncmFtTWFu\nYWdlcjsKICAgIHB1YmxpYyBpbnQgbnVtUGhvbmVOdW1iZXJzID0gbnVtRW1w\nbG95ZWVzICogbnVtUGhvbmVOdW1iZXJzUGVyRW1wbG95ZWU7CiAgICBwdWJs\naWMgaW50IG51bURlcGFydG1lbnRzID0gMjsKICAgIHB1YmxpYyBpbnQgbnVt\nRW1wbG95ZWVzUGVyRGVwdCA9IDI7CiAgICBwdWJsaWMgaW50IG51bUl0ZW1z\nID0gMjsKICAgIHB1YmxpYyBpbnQgbnVtSW1hZ2VzUGVySXRlbSA9IDM7CiAg\nICBwdWJsaWMgaW50IG51bUNvbXBhbnkgPSAyOwogICAgcHVibGljIGludCBu\ndW1EaXZpc2lvbnNQZXJDbyA9IDI7CiAgICBwdWJsaWMgaW50IElEID0gMTsK\nICAgIHB1YmxpYyBpbnQgaXRlbUlkID0gMTsKICAgIHB1YmxpYyBpbnQgY29t\ncElkID0gMTsKICAgIHB1YmxpYyBpbnQgZGl2SWQgPSAxOwogICAgcHVibGlj\nIGludCB2cElkID0gMTsKICAgIHB1YmxpYyBpbnQgZGVwdElkID0gMTsKICAg\nIHB1YmxpYyBpbnQgZW1wSWQgPSAxOwogICAgcHVibGljIGludCBwaG9uZUlk\nID0gMTsKICAgIHB1YmxpYyBpbnQgcG1JZCA9IDE7CiAgICBwdWJsaWMgaW50\nIHBhcmtpbmdTcG90SWQgPSAxOwogICAgcHVibGljIE1hcDxJbnRlZ2VyLCBQ\naG9uZU51bWJlcj4gcGhvbmVzID0KICAgICAgICBuZXcgSGFzaE1hcDxJbnRl\nZ2VyLCBQaG9uZU51bWJlcj4oKTsKICAgIHB1YmxpYyBNYXA8SW50ZWdlciwg\nRW1wbG95ZWU+IGVtcGxveWVlcyA9IG5ldyBIYXNoTWFwPEludGVnZXIsIEVt\ncGxveWVlPigpOwoKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgewogICAgICAg\nIHNldFVwKEVtYmVkLmNsYXNzLCBFbWJlZF9Db2xsX0VtYmVkLmNsYXNzLCBF\nbWJlZF9Db2xsX0ludGVnZXIuY2xhc3MsIAogICAgICAgICAgICBFbWJlZF9F\nbWJlZC5jbGFzcywgRW1iZWRfRW1iZWRfVG9NYW55LmNsYXNzLCBFbWJlZF9U\nb01hbnkuY2xhc3MsIAogICAgICAgICAgICBFbWJlZF9Ub09uZS5jbGFzcywg\nRW50aXR5QV9Db2xsX0VtYmVkX1RvT25lLmNsYXNzLCAKICAgICAgICAgICAg\nRW50aXR5QV9Db2xsX1N0cmluZy5jbGFzcywgRW50aXR5QV9FbWJlZF9Db2xs\nX0VtYmVkLmNsYXNzLCAKICAgICAgICAgICAgRW50aXR5QV9FbWJlZF9Db2xs\nX0ludGVnZXIuY2xhc3MsIEVudGl0eUFfRW1iZWRfRW1iZWQuY2xhc3MsIAog\nICAgICAgICAgICBFbnRpdHlBX0VtYmVkX0VtYmVkX1RvTWFueS5jbGFzcywg\nRW50aXR5QV9FbWJlZF9Ub01hbnkuY2xhc3MsIAogICAgICAgICAgICBFbnRp\ndHlBX0VtYmVkX1RvT25lLmNsYXNzLCBFbnRpdHlCMS5jbGFzcywgCiAgICAg\nICAgICAgIEVudGl0eUFfQ29sbF9FbWJlZF9FbWJlZC5jbGFzcywgQ29udGFj\ndEluZm8uY2xhc3MsCiAgICAgICAgICAgIEVtcGxveWVlLmNsYXNzLCBKb2JJ\nbmZvLmNsYXNzLCBMb2NhdGlvbkRldGFpbHMuY2xhc3MsCiAgICAgICAgICAg\nIFBhcmtpbmdTcG90LmNsYXNzLCBQaG9uZU51bWJlci5jbGFzcywgUHJvZ3Jh\nbU1hbmFnZXIuY2xhc3MsCiAgICAgICAgICAgIERlcGFydG1lbnQxLmNsYXNz\nLCBFbXBsb3llZTEuY2xhc3MsIERlcGFydG1lbnQyLmNsYXNzLAogICAgICAg\nICAgICBFbXBsb3llZTIuY2xhc3MsIEVtcGxveWVlUEsyLmNsYXNzLCBEZXBh\ncnRtZW50My5jbGFzcywKICAgICAgICAgICAgRW1wbG95ZWUzLmNsYXNzLCBF\nbXBsb3llZU5hbWUzLmNsYXNzLCBJdGVtMS5jbGFzcywgSXRlbTIuY2xhc3Ms\nCiAgICAgICAgICAgIEl0ZW0zLmNsYXNzLCBJdGVtNC5jbGFzcywgSXRlbTUu\nY2xhc3MsIEZpbGVOYW1lNC5jbGFzcywgCiAgICAgICAgICAgIENvbXBhbnkx\nLmNsYXNzLCBDb21wYW55Mi5jbGFzcywgRGl2aXNpb24uY2xhc3MsICAgCiAg\nICAgICAgICAgIFZpY2VQcmVzaWRlbnQuY2xhc3MsIEVudGl0eUFfRW1iZWRf\nTWFwcGVkVG9PbmUuY2xhc3MsCiAgICAgICAgICAgIEVtYmVkX01hcHBlZFRv\nT25lLmNsYXNzLCBFbWJlZF9NYXBwZWRUb09uZUNhc2NhZGVEZWxldGUuY2xh\nc3MsIAogICAgICAgICAgICBFbnRpdHlBX0VtYmVkX01hcHBlZFRvT25lQ2Fz\nY2FkZURlbGV0ZS5jbGFzcywgRW50aXR5QjIuY2xhc3MsIAogICAgICAgICAg\nICBCb29rLmNsYXNzLCBMaXN0aW5nLmNsYXNzLCBTZWxsZXIuY2xhc3MsCiAg\nICAgICAgICAgIEVudGl0eUFfRW1iZWRfQ29sbF9NYXAuY2xhc3MsIEVtYmVk\nX0NvbGxfTWFwLmNsYXNzLCBFbnRpdHlBX0VtYmVkLmNsYXNzLAogICAgICAg\nICAgICBFbnRpdHlBX0VtYmVkX0NvbXBsZXguY2xhc3MsIEEuY2xhc3MsIENM\nRUFSX1RBQkxFUyk7CiAgICAgICAgICAgIHNxbC5jbGVhcigpOwogICAgICAg\nICAgICBEQkRpY3Rpb25hcnkgZGljdCA9ICgoSkRCQ0NvbmZpZ3VyYXRpb24p\nZW1mLmdldENvbmZpZ3VyYXRpb24oKSkuZ2V0REJEaWN0aW9uYXJ5SW5zdGFu\nY2UoKTsKICAgICAgICAgICAgaWYgKGRpY3QuZ2V0Q2xhc3MoKS5nZXROYW1l\nKCkuaW5kZXhPZigib3JhY2xlIikgIT0gLTEpIHsKICAgICAgICAgICAgICAg\nICgoT3JhY2xlRGljdGlvbmFyeSlkaWN0KS51c2VUcmlnZ2Vyc0ZvckF1dG9B\nc3NpZ24gPSB0cnVlOwogICAgICAgICAgICB9CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgdGVzdEdyb3VwQnlFbWJlZCgpIHsKICAgICAgICBFbnRpdHlNYW5h\nZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBT\ndHJpbmcgcXVlcnlbXSA9IHsKICAgICAgICAgICAgICAgICJzZWxlY3QgS0VZ\nKGUpIGZyb20gRGVwYXJ0bWVudDMgZCBqb2luIGQuZW1wcyBlIGdyb3VwIGJ5\nIEtFWShlKSIsCiAgICAgICAgICAgICAgICAic2VsZWN0IGEuZW1iZWQgZnJv\nbSBFbnRpdHlBX0VtYmVkX0VtYmVkIGEgZ3JvdXAgYnkgYS5lbWJlZCIsCiAg\nICAgICAgICAgICAgICAic2VsZWN0IGUgZnJvbSBFbnRpdHlBX0VtYmVkX0Vt\nYmVkIGEgam9pbiBhLmVtYmVkIGUgZ3JvdXAgYnkgZSIsCiAgICAgICAgfTsK\nICAgICAgICBMaXN0IHJzID0gbnVsbDsKICAgICAgICBmb3IgKGludCBpID0g\nMDsgaSA8IHF1ZXJ5Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHRyeSB7\nCiAgICAgICAgICAgICAgICBycyA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5W2ld\nKS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgICAgIH0gY2F0Y2goQXJndW1l\nbnRFeGNlcHRpb24gZSkgewogICAgICAgICAgICAgICAgU3lzdGVtLm91dC5w\ncmludGxuKGUuZ2V0TWVzc2FnZSgpKTsgLy8gYXMgZXhwZWN0ZWQgOiBHcm91\ncCBieSBlbWJlZGRhYmxlIGZpZWxkIGlzIG5vdCBhbGxvd2VkCiAgICAgICAg\nICAgIH0KICAgICAgICB9CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0S2V5RW1iZWRkYWJsZUNvbXBhcmUoKSB7CiAg\nICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgU3RyaW5nIHF1ZXJ5W10gPSB7CiAgICAgICAgICAg\nICAgICAic2VsZWN0IG8gZnJvbSBDb21wYW55MSBjIGpvaW4gYy5vcmdhbml6\nYXRpb24gbyB3aGVyZSBLRVkobykgPSA/MSIsCiAgICAgICAgICAgICAgICAi\nc2VsZWN0IGQgZnJvbSBEZXBhcnRtZW50MyBkIGpvaW4gZC5lbXBzIGUgd2hl\ncmUgS0VZKGUpID0gPyAxIgogICAgICAgIH07CiAgICAgICAgTGlzdCBycyA9\nIG51bGw7CiAgICAgICAgRGl2aXNpb24gZCA9IG5ldyBEaXZpc2lvbigpOwog\nICAgICAgIGQuc2V0SWQoMTApOwogICAgICAgIGQuc2V0TmFtZSgiZGl2aXNp\nb24gMTAiKTsKICAgICAgICBFbXBsb3llZU5hbWUzIG5hbWUgPSBuZXcgRW1w\nbG95ZWVOYW1lMygiZm5hbWUxIiwgImxuYW1lMSIpOwogICAgICAgIGZvciAo\naW50IGkgPSAwOyBpIDwgcXVlcnkubGVuZ3RoOyBpKyspIHsKICAgICAgICAg\nICAgc3dpdGNoIChpKSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAg\nICAgICAgIC8vIERpdmlzaW9uIGlzIGFuIGVtYmVkZGFibGUgYXMgd2VsbCBh\ncyBhbiBlbnRpdHksIGNvbXBhcmlzb24gaXMgYWxsb3dlZAogICAgICAgICAg\nICAgICAgcnMgPSBlbS5jcmVhdGVRdWVyeShxdWVyeVtpXSkuc2V0UGFyYW1l\ndGVyKDEsIGQpLmdldFJlc3VsdExpc3QoKTsKICAgICAgICAgICAgICAgIGJy\nZWFrOwogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICB0cnkg\newogICAgICAgICAgICAgICAgICAgIHJzID0gZW0uY3JlYXRlUXVlcnkocXVl\ncnlbaV0pLnNldFBhcmFtZXRlcigxLCBuYW1lKS5nZXRSZXN1bHRMaXN0KCk7\nCiAgICAgICAgICAgICAgICB9IGNhdGNoKEFyZ3VtZW50RXhjZXB0aW9uIGUp\nIHsKICAgICAgICAgICAgICAgICAgICAvLyBhcyBleHBlY3RlZCA6IGNvbXBh\ncmUgZW1iZWRkYWJsZSBpcyBub3QgYWxsb3dlZAogICAgICAgICAgICAgICAg\nICAgIFN5c3RlbS5vdXQucHJpbnRsbihlLmdldE1lc3NhZ2UoKSk7IAogICAg\nICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAg\nICAgIH0KICAgICAgICB9CiAgICAgICAgZW0uY2xvc2UoKTsgICAgICAgIAog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RFbnRpdHlBX0VtYmVkX0NvbGxf\nTWFwKCkgewogICAgICAgIHF1ZXJ5RW50aXR5QV9FbWJlZF9Db2xsX01hcCgp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHF1ZXJ5RW50aXR5QV9FbWJlZF9D\nb2xsX01hcCgpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNy\nZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBTdHJpbmcgcXVlcnlbXSA9\nIHsKICAgICAgICAgICAgICAgICJzZWxlY3QgZSBmcm9tIEVudGl0eUFfRW1i\nZWRfQ29sbF9NYXAgYSBqb2luIGEuZW1iZWQgZSAiICsKICAgICAgICAgICAg\nICAgICJqb2luIGUubWFwS2V5SW50ZWdlciBpIHdoZXJlIHZhbHVlKGkpID4g\nMCAiLAogICAgICAgICAgICB9OwogICAgICAgIExpc3QgcnMgPSBudWxsOwog\nICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcXVlcnkubGVuZ3RoOyBpKysp\nIHsKICAgICAgICAgICAgcnMgPSBlbS5jcmVhdGVRdWVyeShxdWVyeVtpXSku\nZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgICAgICBlbS5jbGVhcigpOwogICAg\nICAgIH0KICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHRlc3RFbnRpdHlBX0NvbGxfU3RyaW5nKCkgewogICAgICAgIGNyZWF0\nZUVudGl0eUFfQ29sbF9TdHJpbmcoKTsKICAgICAgICBxdWVyeUVudGl0eUFf\nQ29sbF9TdHJpbmcoKTsKICAgICAgICBmaW5kRW50aXR5QV9Db2xsX1N0cmlu\nZygpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RFbnRpdHlBX0VtYmVk\nX1RvT25lKCkgewogICAgICAgIGNyZWF0ZUVudGl0eUFfRW1iZWRfVG9PbmUo\nKTsKICAgICAgICBxdWVyeUVudGl0eUFfRW1iZWRfVG9PbmUoKTsKICAgICAg\nICBmaW5kRW50aXR5QV9FbWJlZF9Ub09uZSgpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RFbnRpdHlBX0VtYmVkX01hcHBlZFRvT25lKCkgewogICAg\nICAgIGNyZWF0ZUVudGl0eUFfRW1iZWRfTWFwcGVkVG9PbmUoKTsKICAgICAg\nICBxdWVyeUVudGl0eUFfRW1iZWRfTWFwcGVkVG9PbmUoKTsKICAgICAgICBm\naW5kRW50aXR5QV9FbWJlZF9NYXBwZWRUb09uZSgpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHRlc3RFbnRpdHlBX0NvbGxfRW1iZWRfVG9PbmUoKSB7CiAg\nICAgICAgY3JlYXRlRW50aXR5QV9Db2xsX0VtYmVkX1RvT25lKCk7CiAgICAg\nICAgcXVlcnlFbnRpdHlBX0NvbGxfRW1iZWRfVG9PbmUoKTsKICAgICAgICBm\naW5kRW50aXR5QV9Db2xsX0VtYmVkX1RvT25lKCk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgdGVzdEVudGl0eUFfRW1iZWRfVG9NYW55KCkgewogICAgICAg\nIGNyZWF0ZUVudGl0eUFfRW1iZWRfVG9NYW55KCk7CiAgICAgICAgcXVlcnlF\nbnRpdHlBX0VtYmVkX1RvTWFueSgpOwogICAgICAgIGZpbmRFbnRpdHlBX0Vt\nYmVkX1RvTWFueSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RFbnRp\ndHlBX0VtYmVkX0VtYmVkX1RvTWFueSgpIHsKICAgICAgICBjcmVhdGVFbnRp\ndHlBX0VtYmVkX0VtYmVkX1RvTWFueSgpOwogICAgICAgIHF1ZXJ5RW50aXR5\nQV9FbWJlZF9FbWJlZF9Ub01hbnkoKTsKICAgICAgICBmaW5kRW50aXR5QV9F\nbWJlZF9FbWJlZF9Ub01hbnkoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0\nZXN0RW50aXR5QV9FbWJlZF9Db2xsX0ludGVnZXIoKSB7CiAgICAgICAgY3Jl\nYXRlRW50aXR5QV9FbWJlZF9Db2xsX0ludGVnZXIoKTsKICAgICAgICBxdWVy\neUVudGl0eUFfRW1iZWRfQ29sbF9JbnRlZ2VyKCk7CiAgICAgICAgZmluZEVu\ndGl0eUFfRW1iZWRfQ29sbF9JbnRlZ2VyKCk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgdGVzdEVudGl0eUFfRW1iZWRfRW1iZWQoKSB7CiAgICAgICAgY3Jl\nYXRlRW50aXR5QV9FbWJlZF9FbWJlZCgpOwogICAgICAgIHF1ZXJ5RW50aXR5\nQV9FbWJlZF9FbWJlZCgpOwogICAgICAgIGZpbmRFbnRpdHlBX0VtYmVkX0Vt\nYmVkKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEVudGl0eUFfQ29s\nbF9FbWJlZF9FbWJlZCgpIHsKICAgICAgICBjcmVhdGVFbnRpdHlBX0NvbGxf\nRW1iZWRfRW1iZWQoKTsKICAgICAgICBxdWVyeUVudGl0eUFfQ29sbF9FbWJl\nZF9FbWJlZCgpOwogICAgICAgIGZpbmRFbnRpdHlBX0NvbGxfRW1iZWRfRW1i\nZWQoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0RW50aXR5QV9FbWJl\nZF9Db2xsX0VtYmVkKCkgewogICAgICAgIGNyZWF0ZUVudGl0eUFfRW1iZWRf\nQ29sbF9FbWJlZCgpOwogICAgICAgIHF1ZXJ5RW50aXR5QV9FbWJlZF9Db2xs\nX0VtYmVkKCk7CiAgICAgICAgZmluZEVudGl0eUFfRW1iZWRfQ29sbF9FbWJl\nZCgpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0RW1wbG95ZWUo\nKSB7CiAgICAgICAgY3JlYXRlRW1wbG95ZWVPYmooKTsKICAgICAgICBxdWVy\neUVtcGxveWVlT2JqKCk7CiAgICAgICAgZmluZEVtcGxveWVlT2JqKCk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgdGVzdE1hcEtleSgpIHsKICAgICAgICBj\ncmVhdGVPYmpNYXBLZXkoKTsKICAgICAgICBxdWVyeU9iak1hcEtleSgpOwog\nICAgICAgIGZpbmRPYmpNYXBLZXkoKTsKICAgIH0KICAgIAogICAgcHVibGlj\nIHZvaWQgdGVzdE1hcEtleUNsYXNzKCkgewogICAgICAgIGNyZWF0ZU9iak1h\ncEtleUNsYXNzKCk7CiAgICAgICAgcXVlcnlPYmpNYXBLZXlDbGFzcygpOwog\nICAgICAgIGZpbmRPYmpNYXBLZXlDbGFzcygpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RNYXBLZXlFbnVtZXJhdGVkKCkgewogICAgICAgIGNyZWF0\nZU9iak1hcEtleUVudW1lcmF0ZWQoKTsKICAgICAgICBmaW5kT2JqTWFwS2V5\nRW51bWVyYXRlZCgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RNYXBL\nZXlUZW1wb3JhbCgpIHsKICAgICAgICBjcmVhdGVPYmpNYXBLZXlUZW1wb3Jh\nbCgpOwogICAgICAgIGZpbmRPYmpNYXBLZXlUZW1wb3JhbCgpOwogICAgICAg\nIHF1ZXJ5T2JqTWFwS2V5VGVtcG9yYWwoKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0RW50aXR5QV9FbWJlZF9NYXBwZWRUb09uZUNhc2NhZGVEZWxl\ndGUoKSB7CiAgICAgICAgY3JlYXRlRW50aXR5QV9FbWJlZF9NYXBwZWRUb09u\nZUNhc2NhZGVEZWxldGUoKTsKICAgICAgICB1cGRhdGVFbnRpdHlBX0VtYmVk\nX01hcHBlZFRvT25lQ2FzY2FkZURlbGV0ZSgpOwogICAgfQogICAgCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0RW1iZWRkYWJsZUNvbnRhaW5pbmdSZWxhdGlvbldp\ndGhHZW5lcmF0ZWRLZXkoKSAKICAgICAgICB0aHJvd3MgSU9FeGNlcHRpb24s\nIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgY3JlYXRlRW1iZWRkYWJsZUNvbnRh\naW5pbmdSZWxhdGlvbldpdGhHZW5lcmF0ZWRLZXkoKTsKICAgIH0KCiAgICAv\nKgogICAgICogQ3JlYXRlIEVudGl0eUFfQ29sbF9TdHJpbmcKICAgICAqLwog\nICAgcHVibGljIHZvaWQgY3JlYXRlRW50aXR5QV9Db2xsX1N0cmluZygpIHsK\nICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1h\nbmFnZXIoKTsKICAgICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0cmFuID0gZW0u\nZ2V0VHJhbnNhY3Rpb24oKTsKICAgICAgICBjcmVhdGVFbnRpdHlBX0NvbGxf\nU3RyaW5nKGVtLCBJRCk7CiAgICAgICAgCiAgICAgICAgRW50aXR5QjEgYiA9\nIG5ldyBFbnRpdHlCMSgpOwogICAgICAgIGIuc2V0SWQoSUQpOwogICAgICAg\nIGIuc2V0TmFtZSgiYiIgKyBJRCk7CiAgICAgICAgZW0ucGVyc2lzdChiKTsK\nICAgICAgICAKICAgICAgICB0cmFuLmJlZ2luKCk7CiAgICAgICAgZW0uZmx1\nc2goKTsKICAgICAgICB0cmFuLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3Nl\nKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgY3JlYXRlRW50aXR5QV9Db2xs\nX1N0cmluZyhFbnRpdHlNYW5hZ2VyIGVtLCBpbnQgaWQpIHsKICAgICAgICBF\nbnRpdHlBX0NvbGxfU3RyaW5nIGEgPSBuZXcgRW50aXR5QV9Db2xsX1N0cmlu\nZygpOwogICAgICAgIGEuc2V0SWQoaWQpOwogICAgICAgIGEuc2V0TmFtZSgi\nYSIgKyBpZCk7CiAgICAgICAgYS5zZXRBZ2UoaWQpOwogICAgICAgIGZvciAo\naW50IGkgPSAwOyBpIDwgbnVtQmFzaWNUeXBlczsgaSsrKQogICAgICAgICAg\nICBhLmFkZE5pY2tOYW1lKCJuaWNrTmFtZV8iICsgaWQgKyBpKTsKICAgICAg\nICBhLmFkZENyZWRpdFJhdGluZyhFbnRpdHlBX0NvbGxfU3RyaW5nLkNyZWRp\ndFJhdGluZy5QT09SKTsKICAgICAgICBhLmFkZFRpbWVzdGFtcChuZXcgVGlt\nZXN0YW1wKFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpKSk7CiAgICAgICAg\nYS5hZGRMb2IoImxvYiIpOwogICAgICAgIGVtLnBlcnNpc3QoYSk7CiAgICB9\nCgogICAgLyoKICAgICAqIENyZWF0ZSBFbnRpdHlBX0VtYmVkX1RvT25lCiAg\nICAgKi8KICAgIHB1YmxpYyB2b2lkIGNyZWF0ZUVudGl0eUFfRW1iZWRfVG9P\nbmUoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVF\nbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgRW50aXR5VHJhbnNhY3Rpb24gdHJh\nbiA9IGVtLmdldFRyYW5zYWN0aW9uKCk7CiAgICAgICAgY3JlYXRlRW50aXR5\nQV9FbWJlZF9Ub09uZShlbSwgSUQpOwogICAgICAgIHRyYW4uYmVnaW4oKTsK\nICAgICAgICBlbS5mbHVzaCgpOwogICAgICAgIHRyYW4uY29tbWl0KCk7CiAg\nICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjcmVh\ndGVFbnRpdHlBX0VtYmVkX1RvT25lKEVudGl0eU1hbmFnZXIgZW0sIGludCBp\nZCkgewogICAgICAgIEVudGl0eUFfRW1iZWRfVG9PbmUgYSA9IG5ldyBFbnRp\ndHlBX0VtYmVkX1RvT25lKCk7CiAgICAgICAgYS5zZXRJZChpZCk7CiAgICAg\nICAgYS5zZXROYW1lKCJhIiArIGlkKTsKICAgICAgICBhLnNldEFnZShpZCk7\nCiAgICAgICAgRW1iZWRfVG9PbmUgZW1iZWQgPSBjcmVhdGVFbWJlZF9Ub09u\nZShlbSwgaWQpOwogICAgICAgIGEuc2V0RW1iZWQoZW1iZWQpOwogICAgICAg\nIGVtLnBlcnNpc3QoYSk7CiAgICB9CgogICAgcHVibGljIEVtYmVkX1RvT25l\nIGNyZWF0ZUVtYmVkX1RvT25lKEVudGl0eU1hbmFnZXIgZW0sIGludCBpZCkg\newogICAgICAgIEVtYmVkX1RvT25lIGVtYmVkID0gbmV3IEVtYmVkX1RvT25l\nKCk7CiAgICAgICAgZW1iZWQuc2V0TmFtZTEoIm5hbWUxIik7CiAgICAgICAg\nZW1iZWQuc2V0TmFtZTIoIm5hbWUyIik7CiAgICAgICAgZW1iZWQuc2V0TmFt\nZTMoIm5hbWUzIik7CiAgICAgICAgRW50aXR5QjEgYiA9IG5ldyBFbnRpdHlC\nMSgpOwogICAgICAgIGIuc2V0SWQoaWQpOwogICAgICAgIGIuc2V0TmFtZSgi\nYiIgKyBpZCk7CiAgICAgICAgZW1iZWQuc2V0RW50aXR5QihiKTsKICAgICAg\nICBlbS5wZXJzaXN0KGIpOwogICAgICAgIHJldHVybiBlbWJlZDsKICAgIH0K\nCiAgICAvKgogICAgICogQ3JlYXRlIEVudGl0eUFfRW1iZWRfTWFwcGVkVG9P\nbmUKICAgICAqLwogICAgcHVibGljIHZvaWQgY3JlYXRlRW50aXR5QV9FbWJl\nZF9NYXBwZWRUb09uZSgpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0g\nZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBFbnRpdHlUcmFu\nc2FjdGlvbiB0cmFuID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsKICAgICAgICBj\ncmVhdGVFbnRpdHlBX0VtYmVkX01hcHBlZFRvT25lKGVtLCBJRCk7CiAgICAg\nICAgdHJhbi5iZWdpbigpOwogICAgICAgIGVtLmZsdXNoKCk7CiAgICAgICAg\ndHJhbi5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIGNyZWF0ZUVudGl0eUFfRW1iZWRfTWFwcGVkVG9PbmUo\nRW50aXR5TWFuYWdlciBlbSwgaW50IGlkKSB7CiAgICAgICAgRW50aXR5QV9F\nbWJlZF9NYXBwZWRUb09uZSBhID0gbmV3IEVudGl0eUFfRW1iZWRfTWFwcGVk\nVG9PbmUoKTsKICAgICAgICBhLnNldElkKGlkKTsKICAgICAgICBhLnNldE5h\nbWUoImEiICsgaWQpOwogICAgICAgIGEuc2V0QWdlKGlkKTsKICAgICAgICBF\nbWJlZF9NYXBwZWRUb09uZSBlbWJlZCA9IGNyZWF0ZUVtYmVkX01hcHBlZFRv\nT25lKGVtLCBpZCwgYSk7CiAgICAgICAgYS5zZXRFbWJlZChlbWJlZCk7CiAg\nICAgICAgZW0ucGVyc2lzdChhKTsKICAgIH0KCiAgICBwdWJsaWMgRW1iZWRf\nTWFwcGVkVG9PbmUgY3JlYXRlRW1iZWRfTWFwcGVkVG9PbmUoRW50aXR5TWFu\nYWdlciBlbSwgaW50IGlkLCAKICAgICAgICBFbnRpdHlBX0VtYmVkX01hcHBl\nZFRvT25lIGEpIHsKICAgICAgICBFbWJlZF9NYXBwZWRUb09uZSBlbWJlZCA9\nIG5ldyBFbWJlZF9NYXBwZWRUb09uZSgpOwogICAgICAgIGVtYmVkLnNldE5h\nbWUxKCJuYW1lMSIpOwogICAgICAgIGVtYmVkLnNldE5hbWUyKCJuYW1lMiIp\nOwogICAgICAgIGVtYmVkLnNldE5hbWUzKCJuYW1lMyIpOwogICAgICAgIEVu\ndGl0eUIxIGIgPSBuZXcgRW50aXR5QjEoKTsKICAgICAgICBiLnNldElkKGlk\nKTsKICAgICAgICBiLnNldE5hbWUoImJtIiArIGlkKTsKICAgICAgICBiLnNl\ndEVudGl0eUEoYSk7CiAgICAgICAgZW1iZWQuc2V0TWFwcGVkRW50aXR5Qihi\nKTsKICAgICAgICBlbS5wZXJzaXN0KGIpOwogICAgICAgIHJldHVybiBlbWJl\nZDsKICAgIH0KCiAgICAvKgogICAgICogQ3JlYXRlIEVudGl0eUFfRW1iZWRf\nTWFwcGVkVG9PbmVDYXNjYWRlRGVsZXRlCiAgICAgKi8KICAgIHB1YmxpYyB2\nb2lkIGNyZWF0ZUVudGl0eUFfRW1iZWRfTWFwcGVkVG9PbmVDYXNjYWRlRGVs\nZXRlKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIEVudGl0eVRyYW5zYWN0aW9uIHRy\nYW4gPSBlbS5nZXRUcmFuc2FjdGlvbigpOwogICAgICAgIGNyZWF0ZUVudGl0\neUFfRW1iZWRfTWFwcGVkVG9PbmVDYXNjYWRlRGVsZXRlKGVtLCBJRCk7CiAg\nICAgICAgdHJhbi5iZWdpbigpOwogICAgICAgIGVtLmZsdXNoKCk7CiAgICAg\nICAgdHJhbi5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIGNyZWF0ZUVudGl0eUFfRW1iZWRfTWFwcGVkVG9P\nbmVDYXNjYWRlRGVsZXRlKEVudGl0eU1hbmFnZXIgZW0sIAogICAgICAgIGlu\ndCBpZCkgewogICAgICAgIEVudGl0eUFfRW1iZWRfTWFwcGVkVG9PbmVDYXNj\nYWRlRGVsZXRlIGEgPSAKICAgICAgICAgICAgbmV3IEVudGl0eUFfRW1iZWRf\nTWFwcGVkVG9PbmVDYXNjYWRlRGVsZXRlKCk7CiAgICAgICAgYS5zZXRJZChp\nZCk7CiAgICAgICAgYS5zZXROYW1lKCJhIiArIGlkKTsKICAgICAgICBhLnNl\ndEFnZShpZCk7CiAgICAgICAgRW1iZWRfTWFwcGVkVG9PbmVDYXNjYWRlRGVs\nZXRlIGVtYmVkID0gCiAgICAgICAgICAgIGNyZWF0ZUVtYmVkX01hcHBlZFRv\nT25lRGVsZXRlQ2FzY2FkZShlbSwgaWQsIGEpOwogICAgICAgIGEuc2V0RW1i\nZWQoZW1iZWQpOwogICAgICAgIGVtLnBlcnNpc3QoYSk7CiAgICB9CgogICAg\ncHVibGljIEVtYmVkX01hcHBlZFRvT25lQ2FzY2FkZURlbGV0ZSBjcmVhdGVF\nbWJlZF9NYXBwZWRUb09uZURlbGV0ZUNhc2NhZGUoCiAgICAgICAgRW50aXR5\nTWFuYWdlciBlbSwgaW50IGlkLCBFbnRpdHlBX0VtYmVkX01hcHBlZFRvT25l\nQ2FzY2FkZURlbGV0ZSBhKSB7CiAgICAgICAgRW1iZWRfTWFwcGVkVG9PbmVD\nYXNjYWRlRGVsZXRlIGVtYmVkID0KICAgICAgICAgICAgbmV3IEVtYmVkX01h\ncHBlZFRvT25lQ2FzY2FkZURlbGV0ZSgpOwogICAgICAgIGVtYmVkLnNldE5h\nbWUxKCJuYW1lMSIpOwogICAgICAgIGVtYmVkLnNldE5hbWUyKCJuYW1lMiIp\nOwogICAgICAgIGVtYmVkLnNldE5hbWUzKCJuYW1lMyIpOwogICAgICAgIEVu\ndGl0eUIyIGIgPSBuZXcgRW50aXR5QjIoKTsKICAgICAgICBiLnNldElkKGlk\nKTsKICAgICAgICBiLnNldE5hbWUoImJtIiArIGlkKTsKICAgICAgICBiLnNl\ndEVudGl0eUEoYSk7CiAgICAgICAgZW1iZWQuc2V0TWFwcGVkRW50aXR5Qihi\nKTsKICAgICAgICBlbS5wZXJzaXN0KGIpOwogICAgICAgIHJldHVybiBlbWJl\nZDsKICAgIH0KICAgIAogICAgLyoKICAgICAqIFVwZGF0ZSBFbnRpdHlBX0Vt\nYmVkX01hcHBlZFRvT25lQ2FzY2FkZURlbGV0ZQogICAgICovCiAgICBwdWJs\naWMgdm9pZCB1cGRhdGVFbnRpdHlBX0VtYmVkX01hcHBlZFRvT25lQ2FzY2Fk\nZURlbGV0ZSgpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNy\nZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBFbnRpdHlUcmFuc2FjdGlv\nbiB0cmFuID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsKICAgICAgICB1cGRhdGVF\nbnRpdHlBX0VtYmVkX01hcHBlZFRvT25lQ2FzY2FkZURlbGV0ZShlbSwgSUQp\nOwogICAgICAgIHRyYW4uYmVnaW4oKTsKICAgICAgICBlbS5mbHVzaCgpOwog\nICAgICAgIHRyYW4uY29tbWl0KCk7CiAgICAgICAgZW0uY2xlYXIoKTsKICAg\nICAgICAKICAgICAgICBFbnRpdHlBX0VtYmVkX01hcHBlZFRvT25lQ2FzY2Fk\nZURlbGV0ZSBhID0gCiAgICAgICAgICAgIGVtLmZpbmQoRW50aXR5QV9FbWJl\nZF9NYXBwZWRUb09uZUNhc2NhZGVEZWxldGUuY2xhc3MsIElEKTsKICAgICAg\nICBhc3NlcnROb3ROdWxsKGEpOwogICAgICAgIAogICAgICAgIEVudGl0eUIy\nIGIyID0gZW0uZmluZChFbnRpdHlCMi5jbGFzcywgSUQpOwogICAgICAgIGFz\nc2VydE5vdE51bGwoYjIpOwogICAgICAgIAogICAgICAgIGVtLmNsb3NlKCk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgdXBkYXRlRW50aXR5QV9FbWJlZF9N\nYXBwZWRUb09uZUNhc2NhZGVEZWxldGUoRW50aXR5TWFuYWdlciBlbSwgCiAg\nICAgICAgaW50IGlkKSB7CiAgICAgICAgRW50aXR5QV9FbWJlZF9NYXBwZWRU\nb09uZUNhc2NhZGVEZWxldGUgYSA9IAogICAgICAgICAgICBlbS5maW5kKEVu\ndGl0eUFfRW1iZWRfTWFwcGVkVG9PbmVDYXNjYWRlRGVsZXRlLmNsYXNzLCBp\nZCk7CiAgICAgICAgYS5zZXROYW1lKCJuZXdhIiArIGlkKTsKICAgICAgICBh\nLnNldEFnZShpZCArIDEpOwogICAgICAgIEVtYmVkX01hcHBlZFRvT25lQ2Fz\nY2FkZURlbGV0ZSBlbWJlZCA9IAogICAgICAgICAgICBjcmVhdGVFbWJlZF9N\nYXBwZWRUb09uZURlbGV0ZUNhc2NhZGUoZW0sIGlkKzEsIGEpOwogICAgICAg\nIGEuc2V0RW1iZWQoZW1iZWQpOwogICAgfQogICAgCiAgICAvKgogICAgICog\nQ3JlYXRlIEVudGl0eUFfQ29sbF9FbWJlZF9Ub09uZQogICAgICovCiAgICBw\ndWJsaWMgdm9pZCBjcmVhdGVFbnRpdHlBX0NvbGxfRW1iZWRfVG9PbmUoKSB7\nCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlN\nYW5hZ2VyKCk7CiAgICAgICAgRW50aXR5VHJhbnNhY3Rpb24gdHJhbiA9IGVt\nLmdldFRyYW5zYWN0aW9uKCk7CiAgICAgICAgY3JlYXRlRW50aXR5QV9Db2xs\nX0VtYmVkX1RvT25lKGVtLCBJRCk7CiAgICAgICAgdHJhbi5iZWdpbigpOwog\nICAgICAgIGVtLmZsdXNoKCk7CiAgICAgICAgdHJhbi5jb21taXQoKTsKICAg\nICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGNyZWF0\nZUVudGl0eUFfQ29sbF9FbWJlZF9Ub09uZShFbnRpdHlNYW5hZ2VyIGVtLCBp\nbnQgaWQpIHsKICAgICAgICBFbnRpdHlBX0NvbGxfRW1iZWRfVG9PbmUgYSA9\nIG5ldyBFbnRpdHlBX0NvbGxfRW1iZWRfVG9PbmUoKTsKICAgICAgICBhLnNl\ndElkKGlkKTsKICAgICAgICBhLnNldE5hbWUoImEiICsgaWQpOwogICAgICAg\nIGEuc2V0QWdlKGlkKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG51\nbUVtYmVkZGFibGVzOyBpKyspIHsKICAgICAgICAgICAgRW1iZWRfVG9PbmUg\nZW1iZWQgPSBjcmVhdGVFbWJlZF9Ub09uZShlbSwgaStpZCk7CiAgICAgICAg\nICAgIGEuYWRkRW1iZWQxVG9PbmUoZW1iZWQpOwogICAgICAgIH0KICAgICAg\nICBlbS5wZXJzaXN0KGEpOwogICAgfQoKICAgIC8qCiAgICAgKiBDcmVhdGUg\nRW50aXR5QV9FbWJlZF9Ub01hbnkKICAgICAqLwogICAgcHVibGljIHZvaWQg\nY3JlYXRlRW50aXR5QV9FbWJlZF9Ub01hbnkoKSB7CiAgICAgICAgRW50aXR5\nTWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAg\nICAgRW50aXR5VHJhbnNhY3Rpb24gdHJhbiA9IGVtLmdldFRyYW5zYWN0aW9u\nKCk7CiAgICAgICAgY3JlYXRlRW50aXR5QV9FbWJlZF9Ub01hbnkoZW0sIElE\nKTsKICAgICAgICB0cmFuLmJlZ2luKCk7CiAgICAgICAgZW0uZmx1c2goKTsK\nICAgICAgICB0cmFuLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgY3JlYXRlRW50aXR5QV9FbWJlZF9Ub01h\nbnkoRW50aXR5TWFuYWdlciBlbSwgaW50IGlkKSB7CiAgICAgICAgRW50aXR5\nQV9FbWJlZF9Ub01hbnkgYSA9IG5ldyBFbnRpdHlBX0VtYmVkX1RvTWFueSgp\nOwogICAgICAgIGEuc2V0SWQoaWQpOwogICAgICAgIGEuc2V0TmFtZSgiYSIg\nKyBpZCk7CiAgICAgICAgYS5zZXRBZ2UoaWQpOwogICAgICAgIEVtYmVkX1Rv\nTWFueSBlbWJlZCA9IGNyZWF0ZUVtYmVkX1RvTWFueShlbSwgaWQpOwogICAg\nICAgIGEuc2V0RW1iZWQoZW1iZWQpOwogICAgICAgIGVtLnBlcnNpc3QoYSk7\nCiAgICB9CgogICAgcHVibGljIEVtYmVkX1RvTWFueSBjcmVhdGVFbWJlZF9U\nb01hbnkoRW50aXR5TWFuYWdlciBlbSwgaW50IGlkKSB7CiAgICAgICAgRW1i\nZWRfVG9NYW55IGVtYmVkID0gbmV3IEVtYmVkX1RvTWFueSgpOwogICAgICAg\nIGVtYmVkLnNldE5hbWUxKCJuYW1lMSIpOwogICAgICAgIGVtYmVkLnNldE5h\nbWUyKCJuYW1lMiIpOwogICAgICAgIGVtYmVkLnNldE5hbWUzKCJuYW1lMyIp\nOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbnVtRW1iZWRkYWJsZXM7\nIGkrKykgewogICAgICAgICAgICBFbnRpdHlCMSBiID0gbmV3IEVudGl0eUIx\nKCk7CiAgICAgICAgICAgIGIuc2V0SWQoaWQgKyBpKTsKICAgICAgICAgICAg\nYi5zZXROYW1lKCJiIiArIGlkICsgaSk7CiAgICAgICAgICAgIGVtYmVkLmFk\nZEVudGl0eUIoYik7CiAgICAgICAgICAgIGVtLnBlcnNpc3QoYik7CiAgICAg\nICAgfQogICAgICAgIHJldHVybiBlbWJlZDsKICAgIH0KCiAgIC8qCiAgICAg\nKiBDcmVhdGUgRW50aXR5QV9FbWJlZF9FbWJlZF9Ub01hbnkKICAgICAqLwog\nICAgcHVibGljIHZvaWQgY3JlYXRlRW50aXR5QV9FbWJlZF9FbWJlZF9Ub01h\nbnkoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVF\nbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgRW50aXR5VHJhbnNhY3Rpb24gdHJh\nbiA9IGVtLmdldFRyYW5zYWN0aW9uKCk7CiAgICAgICAgY3JlYXRlRW50aXR5\nQV9FbWJlZF9FbWJlZF9Ub01hbnkoZW0sIElEKTsKICAgICAgICB0cmFuLmJl\nZ2luKCk7CiAgICAgICAgZW0uZmx1c2goKTsKICAgICAgICB0cmFuLmNvbW1p\ndCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgY3JlYXRlRW50aXR5QV9FbWJlZF9FbWJlZF9Ub01hbnkoRW50aXR5TWFu\nYWdlciBlbSwgaW50IGlkKSB7CiAgICAgICAgRW50aXR5QV9FbWJlZF9FbWJl\nZF9Ub01hbnkgYSA9IG5ldyBFbnRpdHlBX0VtYmVkX0VtYmVkX1RvTWFueSgp\nOwogICAgICAgIGEuc2V0SWQoaWQpOwogICAgICAgIGEuc2V0TmFtZSgiYSIg\nKyBpZCk7CiAgICAgICAgYS5zZXRBZ2UoaWQpOwogICAgICAgIEVtYmVkX0Vt\nYmVkX1RvTWFueSBlbWJlZCA9IGNyZWF0ZUVtYmVkX0VtYmVkX1RvTWFueShl\nbSwgaWQpOwogICAgICAgIGEuc2V0RW1iZWQoZW1iZWQpOwogICAgICAgIGVt\nLnBlcnNpc3QoYSk7CiAgICB9CgogICAgcHVibGljIEVtYmVkX0VtYmVkX1Rv\nTWFueSBjcmVhdGVFbWJlZF9FbWJlZF9Ub01hbnkoRW50aXR5TWFuYWdlciBl\nbSwKICAgICAgICAgICAgaW50IGlkKSB7CiAgICAgICAgRW1iZWRfRW1iZWRf\nVG9NYW55IGVtYmVkID0gbmV3IEVtYmVkX0VtYmVkX1RvTWFueSgpOwogICAg\nICAgIGVtYmVkLnNldEludFZhbDEoMSk7CiAgICAgICAgZW1iZWQuc2V0SW50\nVmFsMigyKTsKICAgICAgICBlbWJlZC5zZXRJbnRWYWwzKDMpOwogICAgICAg\nIEVtYmVkX1RvTWFueSBlbWJlZF9Ub01hbnkgPSBjcmVhdGVFbWJlZF9Ub01h\nbnkoZW0sIGlkKTsKICAgICAgICBlbWJlZC5zZXRFbWJlZChlbWJlZF9Ub01h\nbnkpOwogICAgICAgIHJldHVybiBlbWJlZDsKICAgIH0KICAgIAogICAgLyoK\nICAgICAqIENyZWF0ZSBFbnRpdHlBX0VtYmVkX0NvbGxfSW50ZWdlcgogICAg\nICovCiAgICBwdWJsaWMgdm9pZCBjcmVhdGVFbnRpdHlBX0VtYmVkX0NvbGxf\nSW50ZWdlcigpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNy\nZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBFbnRpdHlUcmFuc2FjdGlv\nbiB0cmFuID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsKICAgICAgICBjcmVhdGVF\nbnRpdHlBX0VtYmVkX0NvbGxfSW50ZWdlcihlbSwgSUQpOwogICAgICAgIHRy\nYW4uYmVnaW4oKTsKICAgICAgICBlbS5mbHVzaCgpOwogICAgICAgIHRyYW4u\nY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBjcmVhdGVFbnRpdHlBX0VtYmVkX0NvbGxfSW50ZWdlcihFbnRp\ndHlNYW5hZ2VyIGVtLCBpbnQgaWQpIHsKICAgICAgICBFbnRpdHlBX0VtYmVk\nX0NvbGxfSW50ZWdlciBhID0gbmV3IEVudGl0eUFfRW1iZWRfQ29sbF9JbnRl\nZ2VyKCk7CiAgICAgICAgYS5zZXRJZChpZCk7CiAgICAgICAgYS5zZXROYW1l\nKCJhIiArIGlkKTsKICAgICAgICBhLnNldEFnZShpZCk7CiAgICAgICAgRW1i\nZWRfQ29sbF9JbnRlZ2VyIGVtYmVkID0gY3JlYXRlRW1iZWRfQ29sbF9JbnRl\nZ2VyKGVtLCBpZCk7CiAgICAgICAgYS5zZXRFbWJlZChlbWJlZCk7CiAgICAg\nICAgZW0ucGVyc2lzdChhKTsKICAgIH0KCiAgICBwdWJsaWMgRW1iZWRfQ29s\nbF9JbnRlZ2VyIGNyZWF0ZUVtYmVkX0NvbGxfSW50ZWdlcihFbnRpdHlNYW5h\nZ2VyIGVtLAogICAgICAgICAgICBpbnQgaWQpIHsKICAgICAgICBFbWJlZF9D\nb2xsX0ludGVnZXIgZW1iZWQgPSBuZXcgRW1iZWRfQ29sbF9JbnRlZ2VyKCk7\nCiAgICAgICAgZW1iZWQuc2V0SW50VmFsMShpZCoxMCArIDEpOwogICAgICAg\nIGVtYmVkLnNldEludFZhbDIoaWQqMTAgKyAyKTsKICAgICAgICBlbWJlZC5z\nZXRJbnRWYWwzKGlkKjEwICsgMyk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7\nIGkgPCBudW1CYXNpY1R5cGVzOyBpKyspIHsKICAgICAgICAgICAgZW1iZWQu\nYWRkT3RoZXJJbnRWYWwoaWQgKiAxMDAgKyBpKTsKICAgICAgICB9CiAgICAg\nICAgcmV0dXJuIGVtYmVkOwogICAgfQoKICAgIC8qCiAgICAgKiBDcmVhdGUg\nRW50aXR5QV9FbWJlZF9FbWJlZAogICAgICovCiAgICBwdWJsaWMgdm9pZCBj\ncmVhdGVFbnRpdHlBX0VtYmVkX0VtYmVkKCkgewogICAgICAgIEVudGl0eU1h\nbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAg\nIEVudGl0eVRyYW5zYWN0aW9uIHRyYW4gPSBlbS5nZXRUcmFuc2FjdGlvbigp\nOwogICAgICAgIGNyZWF0ZUVudGl0eUFfRW1iZWRfRW1iZWQoZW0sIElEKTsK\nICAgICAgICB0cmFuLmJlZ2luKCk7CiAgICAgICAgZW0uZmx1c2goKTsKICAg\nICAgICB0cmFuLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgY3JlYXRlRW50aXR5QV9FbWJlZF9FbWJlZChF\nbnRpdHlNYW5hZ2VyIGVtLCBpbnQgaWQpIHsKICAgICAgICBFbnRpdHlBX0Vt\nYmVkX0VtYmVkIGEgPSBuZXcgRW50aXR5QV9FbWJlZF9FbWJlZCgpOwogICAg\nICAgIGEuc2V0SWQoaWQpOwogICAgICAgIGEuc2V0TmFtZSgiYSIgKyBpZCk7\nCiAgICAgICAgYS5zZXRBZ2UoaWQpOwogICAgICAgIEVtYmVkX0VtYmVkIGVt\nYmVkID0gY3JlYXRlRW1iZWRfRW1iZWQoZW0sIGlkLCAwKTsKICAgICAgICBh\nLnNldEVtYmVkKGVtYmVkKTsKICAgICAgICBlbS5wZXJzaXN0KGEpOwogICAg\nfQoKICAgIHB1YmxpYyBFbWJlZF9FbWJlZCBjcmVhdGVFbWJlZF9FbWJlZChF\nbnRpdHlNYW5hZ2VyIGVtLCBpbnQgaWQsIGludCBpZHgpIHsKICAgICAgICBF\nbWJlZF9FbWJlZCBlbWJlZCA9IG5ldyBFbWJlZF9FbWJlZCgpOwogICAgICAg\nIGVtYmVkLnNldEludFZhbDEoaWQgKiAxMDAgKyBpZHggKiAxMCArIDEpOwog\nICAgICAgIGVtYmVkLnNldEludFZhbDIoaWQgKiAxMDAgKyBpZHggKiAxMCAr\nIDIpOwogICAgICAgIGVtYmVkLnNldEludFZhbDMoaWQgKiAxMDAgKyBpZHgg\nKiAxMCArIDMpOwogICAgICAgIEVtYmVkIGVtYmVkMSA9IGNyZWF0ZUVtYmVk\nKGlkLCBpZHgpOwogICAgICAgIGVtYmVkLnNldEVtYmVkKGVtYmVkMSk7CiAg\nICAgICAgcmV0dXJuIGVtYmVkOwogICAgfQoKICAgIHB1YmxpYyBFbWJlZCBj\ncmVhdGVFbWJlZChpbnQgaWQsIGludCBpZHgpIHsKICAgICAgICBFbWJlZCBl\nbWJlZCA9IG5ldyBFbWJlZCgpOwogICAgICAgIGVtYmVkLnNldEludFZhbDEo\naWQgKiAxMDAgKyBpZHggKiAxMCArIDQpOwogICAgICAgIGVtYmVkLnNldElu\ndFZhbDIoaWQgKiAxMDAgKyBpZHggKiAxMCArIDUpOwogICAgICAgIGVtYmVk\nLnNldEludFZhbDMoaWQgKiAxMDAgKyBpZHggKiAxMCArIDYpOwogICAgICAg\nIHJldHVybiBlbWJlZDsKICAgIH0KCiAgICAvKgogICAgICogQ3JlYXRlIEVu\ndGl0eUFfQ29sbF9FbWJlZF9FbWJlZAogICAgICovCiAgICBwdWJsaWMgdm9p\nZCBjcmVhdGVFbnRpdHlBX0NvbGxfRW1iZWRfRW1iZWQoKSB7CiAgICAgICAg\nRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7\nCiAgICAgICAgRW50aXR5VHJhbnNhY3Rpb24gdHJhbiA9IGVtLmdldFRyYW5z\nYWN0aW9uKCk7CiAgICAgICAgY3JlYXRlRW50aXR5QV9Db2xsX0VtYmVkX0Vt\nYmVkKGVtLCBJRCk7CiAgICAgICAgdHJhbi5iZWdpbigpOwogICAgICAgIGVt\nLmZsdXNoKCk7CiAgICAgICAgdHJhbi5jb21taXQoKTsKICAgICAgICBlbS5j\nbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGNyZWF0ZUVudGl0eUFf\nQ29sbF9FbWJlZF9FbWJlZChFbnRpdHlNYW5hZ2VyIGVtLCBpbnQgaWQpIHsK\nICAgICAgICBFbnRpdHlBX0NvbGxfRW1iZWRfRW1iZWQgYSA9IG5ldyBFbnRp\ndHlBX0NvbGxfRW1iZWRfRW1iZWQoKTsKICAgICAgICBhLnNldElkKGlkKTsK\nICAgICAgICBhLnNldE5hbWUoImEiICsgaWQpOwogICAgICAgIGEuc2V0QWdl\nKGlkKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG51bUVtYmVkZGFi\nbGVzOyBpKyspIHsKICAgICAgICAgICAgRW1iZWRfRW1iZWQgZW1iZWQgPSBj\ncmVhdGVFbWJlZF9FbWJlZChlbSwgaWQsIGkpOwogICAgICAgICAgICBhLmFk\nZEVtYmVkKGVtYmVkKTsKICAgICAgICB9CiAgICAgICAgZW0ucGVyc2lzdChh\nKTsKICAgIH0KCiAgICAvKgogICAgICogQ3JlYXRlIEVudGl0eUFfRW1iZWRf\nQ29sbF9FbWJlZAogICAgICovCiAgICBwdWJsaWMgdm9pZCBjcmVhdGVFbnRp\ndHlBX0VtYmVkX0NvbGxfRW1iZWQoKSB7CiAgICAgICAgRW50aXR5TWFuYWdl\nciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgRW50\naXR5VHJhbnNhY3Rpb24gdHJhbiA9IGVtLmdldFRyYW5zYWN0aW9uKCk7CiAg\nICAgICAgY3JlYXRlRW50aXR5QV9FbWJlZF9Db2xsX0VtYmVkKGVtLCBJRCk7\nCiAgICAgICAgdHJhbi5iZWdpbigpOwogICAgICAgIGVtLmZsdXNoKCk7CiAg\nICAgICAgdHJhbi5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIGNyZWF0ZUVudGl0eUFfRW1iZWRfQ29sbF9F\nbWJlZChFbnRpdHlNYW5hZ2VyIGVtLCBpbnQgaWQpIHsKICAgICAgICBFbnRp\ndHlBX0VtYmVkX0NvbGxfRW1iZWQgYSA9IG5ldyBFbnRpdHlBX0VtYmVkX0Nv\nbGxfRW1iZWQoKTsKICAgICAgICBhLnNldElkKGlkKTsKICAgICAgICBhLnNl\ndE5hbWUoImEiICsgaWQpOwogICAgICAgIGEuc2V0QWdlKGlkKTsKICAgICAg\nICBFbWJlZF9Db2xsX0VtYmVkIGVtYmVkID0gY3JlYXRlRW1iZWRfQ29sbF9F\nbWJlZChlbSwgaWQpOwogICAgICAgIGEuc2V0RW1iZWQoZW1iZWQpOwogICAg\nICAgIGVtLnBlcnNpc3QoYSk7CiAgICB9CgogICAgcHVibGljIEVtYmVkX0Nv\nbGxfRW1iZWQgY3JlYXRlRW1iZWRfQ29sbF9FbWJlZChFbnRpdHlNYW5hZ2Vy\nIGVtLCBpbnQgaWQpIHsKICAgICAgICBFbWJlZF9Db2xsX0VtYmVkIGVtYmVk\nID0gbmV3IEVtYmVkX0NvbGxfRW1iZWQoKTsKICAgICAgICBlbWJlZC5zZXRJ\nbnRWYWwxKGlkICogMTAgKyAxKTsKICAgICAgICBlbWJlZC5zZXRJbnRWYWwy\nKGlkICogMTAgKyAyKTsKICAgICAgICBlbWJlZC5zZXRJbnRWYWwzKGlkICog\nMTAgKyAzKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG51bUVtYmVk\nZGFibGVzOyBpKyspIHsKICAgICAgICAgICAgRW1iZWQgZW1iZWQxID0gY3Jl\nYXRlRW1iZWQoaWQsIGkpOwogICAgICAgICAgICBlbWJlZC5hZGRFbWJlZChl\nbWJlZDEpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZW1iZWQ7CiAgICB9\nCgogICAgLyoKICAgICAqIENyZWF0ZSBFbXBsb3llZQogICAgICovCiAgICBw\ndWJsaWMgdm9pZCBjcmVhdGVFbXBsb3llZU9iaigpIHsKICAgICAgICBFbnRp\ndHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAg\nICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0cmFuID0gZW0uZ2V0VHJhbnNhY3Rp\nb24oKTsKICAgICAgICBjcmVhdGVQaG9uZU51bWJlcnMoZW0pOwogICAgICAg\nIGNyZWF0ZUVtcGxveWVlcyhlbSk7CiAgICAgICAgY3JlYXRlUHJvZ3JhbU1h\nbmFnZXJzKGVtKTsKICAgICAgICAKICAgICAgICB0cmFuLmJlZ2luKCk7CiAg\nICAgICAgZW0uZmx1c2goKTsKICAgICAgICB0cmFuLmNvbW1pdCgpOwogICAg\nICAgIGVtLmNsb3NlKCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIGNy\nZWF0ZVByb2dyYW1NYW5hZ2VycyhFbnRpdHlNYW5hZ2VyIGVtKSB7CiAgICAg\nICAgZW1wSWQgPSAxOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbnVt\nUHJvZ3JhbU1hbmFnZXJzOyBpKyspCiAgICAgICAgICAgIGNyZWF0ZVByb2dy\nYW1NYW5hZ2VyKGVtLCBwbUlkKyspOwogICAgfQogICAgCiAgICBwdWJsaWMg\ndm9pZCBjcmVhdGVQcm9ncmFtTWFuYWdlcihFbnRpdHlNYW5hZ2VyIGVtLCBp\nbnQgaWQpIHsKICAgICAgICBQcm9ncmFtTWFuYWdlciBwbSA9IG5ldyBQcm9n\ncmFtTWFuYWdlcigpOwogICAgICAgIHBtLnNldElkKGlkKTsKICAgICAgICBm\nb3IgKGludCBpID0gMDsgaSA8IG51bUVtcGxveWVlc1BlclByb2dyYW1NYW5h\nZ2VyOyBpKyspIHsKICAgICAgICAgICAgRW1wbG95ZWUgZSA9IGVtcGxveWVl\ncy5nZXQoZW1wSWQrKyk7CiAgICAgICAgICAgIHBtLmFkZE1hbmFnZShlKTsK\nICAgICAgICAgICAgSm9iSW5mbyBqb2JJbmZvID0gbmV3IEpvYkluZm8oKTsK\nICAgICAgICAgICAgam9iSW5mby5zZXRKb2JEZXNjcmlwdGlvbigiam9iRGVz\nY3JpcHRpb24iICsgZS5nZXRFbXBJZCgpKTsKICAgICAgICAgICAgam9iSW5m\nby5zZXRQcm9ncmFtTWFuYWdlcihwbSk7CiAgICAgICAgICAgIGUuc2V0Sm9i\nSW5mbyhqb2JJbmZvKTsKICAgICAgICB9CiAgICAgICAgZW0ucGVyc2lzdChw\nbSk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIGNyZWF0ZUVtcGxveWVl\ncyhFbnRpdHlNYW5hZ2VyIGVtKSB7CiAgICAgICAgcGhvbmVJZCA9IDE7CiAg\nICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBudW1FbXBsb3llZXM7IGkrKykg\newogICAgICAgICAgICBFbXBsb3llZSBlID0gY3JlYXRlRW1wbG95ZWUoZW0s\nIGVtcElkKyspOwogICAgICAgICAgICBlbXBsb3llZXMucHV0KGUuZ2V0RW1w\nSWQoKSwgZSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBFbXBsb3ll\nZSBjcmVhdGVFbXBsb3llZShFbnRpdHlNYW5hZ2VyIGVtLCBpbnQgaWQpIHsK\nICAgICAgICBFbXBsb3llZSBlID0gbmV3IEVtcGxveWVlKCk7CiAgICAgICAg\nZS5zZXRFbXBJZChpZCk7CiAgICAgICAgQ29udGFjdEluZm8gY29udGFjdElu\nZm8gPSBuZXcgQ29udGFjdEluZm8oKTsKICAgICAgICBmb3IgKGludCBpID0g\nMDsgaSA8IG51bVBob25lTnVtYmVyc1BlckVtcGxveWVlOyBpKyspIHsgCiAg\nICAgICAgICAgIFBob25lTnVtYmVyIHBob25lTnVtYmVyID0gcGhvbmVzLmdl\ndChwaG9uZUlkKyspOwogICAgICAgICAgICBjb250YWN0SW5mby5hZGRQaG9u\nZU51bWJlcihwaG9uZU51bWJlcik7CiAgICAgICAgICAgIGUuc2V0Q29udGFj\ndEluZm8oY29udGFjdEluZm8pOwogICAgICAgICAgICBwaG9uZU51bWJlci5h\nZGRFbXBsb3llZXMoZSk7CiAgICAgICAgICAgIGVtLnBlcnNpc3QocGhvbmVO\ndW1iZXIpOwogICAgICAgIH0KICAgICAgICBQYXJraW5nU3BvdCBwYXJraW5n\nU3BvdCA9IGNyZWF0ZVBhcmtpbmdTcG90KGVtLCBwYXJraW5nU3BvdElkKysp\nOwogICAgICAgIExvY2F0aW9uRGV0YWlscyBsb2NhdGlvbiA9IG5ldyBMb2Nh\ndGlvbkRldGFpbHMoKTsKICAgICAgICBsb2NhdGlvbi5zZXRPZmZpY2VOdW1i\nZXIoaWQpOwogICAgICAgIGxvY2F0aW9uLnNldFBhcmtpbmdTcG90KHBhcmtp\nbmdTcG90KTsKICAgICAgICBlLnNldExvY2F0aW9uRGV0YWlscyhsb2NhdGlv\nbik7CiAgICAgICAgcGFya2luZ1Nwb3Quc2V0QXNzaWduZWRUbyhlKTsKICAg\nICAgICBmb3IgKGludCBpID0gMDsgaSA8IG51bU5pY2tOYW1lczsgaSsrKQog\nICAgICAgICAgICBlLmFkZE5pY2tOYW1lKCJuaWNrTmFtZSIgKyBpZCArIGkp\nOwogICAgICAgIGVtLnBlcnNpc3QocGFya2luZ1Nwb3QpOwogICAgICAgIGVt\nLnBlcnNpc3QoZSk7CiAgICAgICAgcmV0dXJuIGU7CiAgICB9CiAgICAKICAg\nIHB1YmxpYyB2b2lkIGNyZWF0ZVBob25lTnVtYmVycyhFbnRpdHlNYW5hZ2Vy\nIGVtKSB7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBudW1QaG9uZU51\nbWJlcnM7IGkrKykgewogICAgICAgICAgICBQaG9uZU51bWJlciBwID0gbmV3\nIFBob25lTnVtYmVyKCk7CiAgICAgICAgICAgIHAuc2V0TnVtYmVyKHBob25l\nSWQrKyk7CiAgICAgICAgICAgIHBob25lcy5wdXQocC5nZXROdW1iZXIoKSwg\ncCk7CiAgICAgICAgICAgIGVtLnBlcnNpc3QocCk7CiAgICAgICAgfQogICAg\nfSAgICAKICAgIAogICAgcHVibGljIFBhcmtpbmdTcG90IGNyZWF0ZVBhcmtp\nbmdTcG90KEVudGl0eU1hbmFnZXIgZW0sIGludCBpZCkgewogICAgICAgIFBh\ncmtpbmdTcG90IHAgPSBuZXcgUGFya2luZ1Nwb3QoKTsKICAgICAgICBwLnNl\ndElkKGlkKTsKICAgICAgICBwLnNldEdhcmFnZSgiZ2FyYWdlIiArIGlkKTsK\nICAgICAgICBlbS5wZXJzaXN0KHApOwogICAgICAgIHJldHVybiBwOwogICAg\nfSAgICAKCiAgICBwdWJsaWMgdm9pZCBmaW5kRW1wbG95ZWVPYmooKSB7CiAg\nICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgUHJvZ3JhbU1hbmFnZXIgcG0gPSBlbS5maW5kKFBy\nb2dyYW1NYW5hZ2VyLmNsYXNzLCAxKTsKICAgICAgICBhc3NlcnRQcm9ncmFt\nTWFuYWdlcihwbSk7CgogICAgICAgIHBtID0gZW0uZmluZChQcm9ncmFtTWFu\nYWdlci5jbGFzcywgMik7CiAgICAgICAgYXNzZXJ0UHJvZ3JhbU1hbmFnZXIo\ncG0pOwoKICAgICAgICBFbXBsb3llZSBlID0gZW0uZmluZChFbXBsb3llZS5j\nbGFzcywgMSk7CiAgICAgICAgYXNzZXJ0RW1wbG95ZWUoZSk7CiAgICAgICAg\nCiAgICAgICAgUGhvbmVOdW1iZXIgcCA9IGVtLmZpbmQoUGhvbmVOdW1iZXIu\nY2xhc3MsIDEpOwogICAgICAgIGFzc2VydFBob25lTnVtYmVyKHApOwogICAg\nICAgIAogICAgICAgIFBhcmtpbmdTcG90IHBzID0gZW0uZmluZChQYXJraW5n\nU3BvdC5jbGFzcywgMSk7CiAgICAgICAgYXNzZXJ0UGFya2luZ1Nwb3QocHMp\nOwogICAgICAgCiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KICAgIAogICAg\ncHVibGljIHZvaWQgcXVlcnlFbXBsb3llZU9iaigpIHsKICAgICAgICBxdWVy\neVByb2dyYW1NYW5hZ2VyKGVtZik7CiAgICAgICAgcXVlcnlFbXBsb3llZU9i\naihlbWYpOwogICAgICAgIHF1ZXJ5UGhvbmVOdW1iZXIoZW1mKTsKICAgICAg\nICBxdWVyeVBhcmtpbmdTcG90KGVtZik7CiAgICB9CiAgICAKICAgIHB1Ymxp\nYyB2b2lkIHF1ZXJ5UGFya2luZ1Nwb3QoRW50aXR5TWFuYWdlckZhY3Rvcnkg\nZW1mKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVF\nbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgRW50aXR5VHJhbnNhY3Rpb24gdHJh\nbiA9IGVtLmdldFRyYW5zYWN0aW9uKCk7CiAgICAgICAgdHJhbi5iZWdpbigp\nOwogICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeSgic2VsZWN0IHAg\nZnJvbSBQYXJraW5nU3BvdCBwIik7CiAgICAgICAgTGlzdDxQYXJraW5nU3Bv\ndD4gcHMgPSBxLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBmb3IgKFBhcmtp\nbmdTcG90IHAgOiBwcyl7CiAgICAgICAgICAgIGFzc2VydFBhcmtpbmdTcG90\nKHApOwogICAgICAgIH0KICAgICAgICB0cmFuLmNvbW1pdCgpOwogICAgICAg\nIGVtLmNsb3NlKCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHF1ZXJ5\nUHJvZ3JhbU1hbmFnZXIoRW50aXR5TWFuYWdlckZhY3RvcnkgZW1mKSB7CiAg\nICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgRW50aXR5VHJhbnNhY3Rpb24gdHJhbiA9IGVtLmdl\ndFRyYW5zYWN0aW9uKCk7CiAgICAgICAgdHJhbi5iZWdpbigpOwogICAgICAg\nIFF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeSgic2VsZWN0IHBtIGZyb20gUHJv\nZ3JhbU1hbmFnZXIgcG0iKTsKICAgICAgICBMaXN0PFByb2dyYW1NYW5hZ2Vy\nPiBwbXMgPSBxLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBmb3IgKFByb2dy\nYW1NYW5hZ2VyIHBtIDogcG1zKXsKICAgICAgICAgICAgYXNzZXJ0UHJvZ3Jh\nbU1hbmFnZXIocG0pOwogICAgICAgIH0KICAgICAgICB0cmFuLmNvbW1pdCgp\nOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\ncXVlcnlQaG9uZU51bWJlcihFbnRpdHlNYW5hZ2VyRmFjdG9yeSBlbWYpIHsK\nICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1h\nbmFnZXIoKTsKICAgICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0cmFuID0gZW0u\nZ2V0VHJhbnNhY3Rpb24oKTsKICAgICAgICB0cmFuLmJlZ2luKCk7CiAgICAg\nICAgUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgcCBmcm9tIFBo\nb25lTnVtYmVyIHAiKTsKICAgICAgICBMaXN0PFBob25lTnVtYmVyPiBwcyA9\nIHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGZvciAoUGhvbmVOdW1iZXIg\ncCA6IHBzKXsKICAgICAgICAgICAgYXNzZXJ0UGhvbmVOdW1iZXIocCk7CiAg\nICAgICAgfQogICAgICAgIHRyYW4uY29tbWl0KCk7CiAgICAgICAgZW0uY2xv\nc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBxdWVyeUVtcGxveWVlT2Jq\nKEVudGl0eU1hbmFnZXJGYWN0b3J5IGVtZikgewogICAgICAgIEVudGl0eU1h\nbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAg\nIEVudGl0eVRyYW5zYWN0aW9uIHRyYW4gPSBlbS5nZXRUcmFuc2FjdGlvbigp\nOwogICAgICAgIHRyYW4uYmVnaW4oKTsKICAgICAgICBRdWVyeSBxID0gZW0u\nY3JlYXRlUXVlcnkoInNlbGVjdCBlIGZyb20gRW1wbG95ZWUgZSIpOwogICAg\nICAgIExpc3Q8RW1wbG95ZWU+IGVzID0gcS5nZXRSZXN1bHRMaXN0KCk7CiAg\nICAgICAgZm9yIChFbXBsb3llZSBlIDogZXMpewogICAgICAgICAgICBhc3Nl\ncnRFbXBsb3llZShlKTsKICAgICAgICB9CiAgICAgICAgdHJhbi5jb21taXQo\nKTsKICAgICAgICBlbS5jbGVhcigpOwogICAgICAgIC8vIHRlc3QgcmFuZ2Ug\ndmFyaWFibGUgb3ZlciBlbGVtZW50IGNvbGxlY3Rpb24KICAgICAgICBTdHJp\nbmdbXSBxdWVyeSA9IHsKICAgICAgICAgICAgInNlbGVjdCBlIGZyb20gRW1w\nbG95ZWUgZSwgaW4gKGUubmlja05hbWVzKSBuICIgKwogICAgICAgICAgICAg\nICAgIiB3aGVyZSBuIGxpa2UgJyUxJyIsICAKICAgICAgICB9OwogICAgICAg\nIGZvciAoaW50IGkgPSAwOyBpIDwgcXVlcnkubGVuZ3RoOyBpKyspIHsKICAg\nICAgICAgICAgZXMgPSBlbS5jcmVhdGVRdWVyeShxdWVyeVtpXSkuZ2V0UmVz\ndWx0TGlzdCgpOwogICAgICAgICAgICBmb3IgKEVtcGxveWVlIGUgOiBlcyl7\nCiAgICAgICAgICAgICAgICBhc3NlcnRFbXBsb3llZShlKTsKICAgICAgICAg\nICAgfQogICAgICAgIH0KICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIGFzc2VydFByb2dyYW1NYW5hZ2VyKFByb2dyYW1NYW5h\nZ2VyIHBtKSB7CiAgICAgICAgaW50IGlkID0gcG0uZ2V0SWQoKTsKICAgICAg\nICBDb2xsZWN0aW9uPEVtcGxveWVlPiBlcyA9IHBtLmdldE1hbmFnZXMoKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMobnVtRW1wbG95ZWVzUGVyUHJvZ3JhbU1h\nbmFnZXIsIGVzLnNpemUoKSk7CiAgICAgICAgZm9yIChFbXBsb3llZSBlIDog\nZXMpIHsKICAgICAgICAgICAgYXNzZXJ0RW1wbG95ZWUoZSk7CiAgICAgICAg\nfQogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCBhc3NlcnRFbXBsb3llZShF\nbXBsb3llZSBlKSB7CiAgICAgICAgaW50IGlkID0gZS5nZXRFbXBJZCgpOwog\nICAgICAgIENvbnRhY3RJbmZvIGMgPSBlLmdldENvbnRhY3RJbmZvKCk7CiAg\nICAgICAgTGlzdDxQaG9uZU51bWJlcj4gcGhvbmVzID0gYy5nZXRQaG9uZU51\nbWJlcnMoKTsKICAgICAgICBhc3NlcnRFcXVhbHMobnVtUGhvbmVOdW1iZXJz\nUGVyRW1wbG95ZWUsIHBob25lcy5zaXplKCkpOwogICAgICAgIGZvciAoUGhv\nbmVOdW1iZXIgcCA6IHBob25lcykgewogICAgICAgICAgICBhc3NlcnRQaG9u\nZU51bWJlcihwKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgTG9jYXRp\nb25EZXRhaWxzIGxvYyA9IGUuZ2V0TG9jYXRpb25EZXRhaWxzKCk7CiAgICAg\nICAgaW50IG9mZmljZU51bWJlciA9IGxvYy5nZXRPZmZpY2VOdW1iZXIoKTsK\nICAgICAgICBQYXJraW5nU3BvdCBwID0gbG9jLmdldFBhcmtpbmdTcG90KCk7\nCiAgICAgICAgYXNzZXJ0UGFya2luZ1Nwb3QocCk7CiAgICAgICAgUHJvZ3Jh\nbU1hbmFnZXIgcG0gPSBlLmdldEpvYkluZm8oKS5nZXRQcm9ncmFtTWFuYWdl\ncigpOwogICAgICAgIFNldDxTdHJpbmc+IG5pY2tOYW1lcyA9IGUuZ2V0Tmlj\na05hbWVzKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKG51bU5pY2tOYW1lcywg\nbmlja05hbWVzLnNpemUoKSk7CiAgICAgICAgCiAgICB9CiAgICAKICAgIHB1\nYmxpYyB2b2lkIGFzc2VydFBob25lTnVtYmVyKFBob25lTnVtYmVyIHApIHsK\nICAgICAgICBpbnQgbnVtYmVyID0gcC5nZXROdW1iZXIoKTsKICAgICAgICBD\nb2xsZWN0aW9uPEVtcGxveWVlPiBlcyA9IHAuZ2V0RW1wbG95ZWVzKCk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKG51bUVtcGxveWVlc1BlclBob25lTnVtYmVy\nLCBlcy5zaXplKCkpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCBhc3Nl\ncnRQYXJraW5nU3BvdChQYXJraW5nU3BvdCBwKSB7CiAgICAgICAgU3RyaW5n\nIGdhcmFnZSA9IHAuZ2V0R2FyYWdlKCk7CiAgICAgICAgRW1wbG95ZWUgZSA9\nIHAuZ2V0QXNzaWduZWRUbygpOwogICAgfQogICAgCiAgICAvKgogICAgICog\nRmluZCBFbnRpdHlBX0NvbGxfU3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyB2\nb2lkIGZpbmRFbnRpdHlBX0NvbGxfU3RyaW5nKCkgewogICAgICAgIEVudGl0\neU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAg\nICAgIEVudGl0eUFfQ29sbF9TdHJpbmcgYSA9IGVtLmZpbmQoRW50aXR5QV9D\nb2xsX1N0cmluZy5jbGFzcywgSUQpOwogICAgICAgIGNoZWNrRW50aXR5QV9D\nb2xsX1N0cmluZyhhKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAg\nIC8qCiAgICAgKiBGaW5kIEVudGl0eUFfRW1iZWRfVG9PbmUKICAgICAqLwog\nICAgcHVibGljIHZvaWQgZmluZEVudGl0eUFfRW1iZWRfVG9PbmUoKSB7CiAg\nICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgRW50aXR5QV9FbWJlZF9Ub09uZSBhID0gZW0uZmlu\nZChFbnRpdHlBX0VtYmVkX1RvT25lLmNsYXNzLCBJRCk7CiAgICAgICAgY2hl\nY2tFbnRpdHlBX0VtYmVkX1RvT25lKGEpOwogICAgICAgIGVtLmdldFRyYW5z\nYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBlbS5yZW1vdmUoYSk7CiAgICAg\nICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICAvL2Rl\nbGV0ZSBjYXNjYWRlCiAgICAgICAgRW50aXR5QjEgYiA9IGVtLmZpbmQoRW50\naXR5QjEuY2xhc3MsIElEKTsKICAgICAgICBhc3NlcnROdWxsKGIpOwogICAg\nICAgIGVtLmNsb3NlKCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRl\nc3RMYXp5RmV0Y2hFbWJlZCgpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVt\nID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBFbnRpdHlB\nX0VtYmVkIGEgPSBuZXcgRW50aXR5QV9FbWJlZCgpOwogICAgICAgIGEuc2V0\nSWQoSUQpOwogICAgICAgIGEuc2V0TmFtZSgibmFtZSIpOwogICAgICAgIGEu\nc2V0QWdlKDEpOwogICAgICAgIEVtYmVkIGVtYiA9IG5ldyBFbWJlZCgpOwog\nICAgICAgIGVtYi5zZXRJbnRWYWwxKDEpOwogICAgICAgIGVtYi5zZXRJbnRW\nYWwxKDIpOwogICAgICAgIGVtYi5zZXRJbnRWYWwxKDMpOwogICAgICAgIGEu\nc2V0RW1iZWQoZW1iKTsKICAgICAgICBlbS5wZXJzaXN0KGEpOwogICAgICAg\nIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBlbS5nZXRU\ncmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIGVtLmNsZWFyKCk7CiAg\nICAgICAgCiAgICAgICAgUGVyc2lzdGVuY2VVbml0VXRpbCBwdXUgPSBlbWYu\nZ2V0UGVyc2lzdGVuY2VVbml0VXRpbCgpOwogICAgICAgIE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyIGtlbSA9IE9wZW5KUEFQZXJzaXN0ZW5jZS5jYXN0KGVtKTsK\nICAgICAgICAvLyBkbyBub3QgZmV0Y2ggZW1iCiAgICAgICAga2VtLmdldEZl\ndGNoUGxhbigpLnJlc2V0RmV0Y2hHcm91cHMoKS5yZW1vdmVGZXRjaEdyb3Vw\nKCJkZWZhdWx0IikKICAgICAgICAgICAgLmFkZEZpZWxkKEVudGl0eUFfRW1i\nZWQuY2xhc3MsICJuYW1lIikKICAgICAgICAgICAgLmFkZEZpZWxkKEVudGl0\neUFfRW1iZWQuY2xhc3MsICJhZ2UiKTsKICAgICAgICBhID0gZW0uZmluZChF\nbnRpdHlBX0VtYmVkLmNsYXNzLCBJRCk7CiAgICAgICAgYXNzZXJ0Tm90TnVs\nbChhKTsKICAgICAgICBFbWJlZCBlbWJlZCA9IGEuZ2V0RW1iZWQoKTsKICAg\nICAgICBhc3NlcnROdWxsKGVtYmVkKTsKICAgICAgICBhc3NlcnRGYWxzZShw\ndXUuaXNMb2FkZWQoYSwgImVtYmVkIikpOwogICAgfQoKICAgIC8qCiAgICAg\nKiBGaW5kIEVudGl0eUFfRW1iZWRfTWFwcGVkVG9PbmUKICAgICAqLwogICAg\ncHVibGljIHZvaWQgZmluZEVudGl0eUFfRW1iZWRfTWFwcGVkVG9PbmUoKSB7\nCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlN\nYW5hZ2VyKCk7CiAgICAgICAgRW50aXR5QV9FbWJlZF9NYXBwZWRUb09uZSBh\nID0KICAgICAgICAgICAgZW0uZmluZChFbnRpdHlBX0VtYmVkX01hcHBlZFRv\nT25lLmNsYXNzLCBJRCk7CiAgICAgICAgY2hlY2tFbnRpdHlBX0VtYmVkX01h\ncHBlZFRvT25lKGEpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAg\nLyoKICAgICAqIEZpbmQgRW50aXR5QV9Db2xsX0VtYmVkX1RvT25lCiAgICAg\nKi8KICAgIHB1YmxpYyB2b2lkIGZpbmRFbnRpdHlBX0NvbGxfRW1iZWRfVG9P\nbmUoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVF\nbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgRW50aXR5QV9Db2xsX0VtYmVkX1Rv\nT25lIGEgPQogICAgICAgICAgICBlbS5maW5kKEVudGl0eUFfQ29sbF9FbWJl\nZF9Ub09uZS5jbGFzcywgSUQpOwogICAgICAgIGNoZWNrRW50aXR5QV9Db2xs\nX0VtYmVkX1RvT25lKGEpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9Cgog\nICAgLyoKICAgICAqIEZpbmQgRW50aXR5QV9FbWJlZF9Ub01hbnkKICAgICAq\nLwogICAgcHVibGljIHZvaWQgZmluZEVudGl0eUFfRW1iZWRfVG9NYW55KCkg\newogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5\nTWFuYWdlcigpOwogICAgICAgIEVudGl0eUFfRW1iZWRfVG9NYW55IGEgPSBl\nbS5maW5kKEVudGl0eUFfRW1iZWRfVG9NYW55LmNsYXNzLCBJRCk7CiAgICAg\nICAgY2hlY2tFbnRpdHlBX0VtYmVkX1RvTWFueShhKTsKICAgICAgICBlbS5j\nbG9zZSgpOwogICAgfQoKICAgIC8qCiAgICAgKiBGaW5kIEVudGl0eUFfRW1i\nZWRfRW1iZWRfVG9NYW55CiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIGZpbmRF\nbnRpdHlBX0VtYmVkX0VtYmVkX1RvTWFueSgpIHsKICAgICAgICBFbnRpdHlN\nYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAg\nICBFbnRpdHlBX0VtYmVkX0VtYmVkX1RvTWFueSBhID0KICAgICAgICAgICAg\nZW0uZmluZChFbnRpdHlBX0VtYmVkX0VtYmVkX1RvTWFueS5jbGFzcywgSUQp\nOwogICAgICAgIGNoZWNrRW50aXR5QV9FbWJlZF9FbWJlZF9Ub01hbnkoYSk7\nCiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICAvKgogICAgICogRmlu\nZCBFbnRpdHlBX0VtYmVkX0NvbGxfSW50ZWdlcgogICAgICovCiAgICBwdWJs\naWMgdm9pZCBmaW5kRW50aXR5QV9FbWJlZF9Db2xsX0ludGVnZXIoKSB7CiAg\nICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgRW50aXR5QV9FbWJlZF9Db2xsX0ludGVnZXIgYSA9\nCiAgICAgICAgICAgIGVtLmZpbmQoRW50aXR5QV9FbWJlZF9Db2xsX0ludGVn\nZXIuY2xhc3MsIElEKTsKICAgICAgICBjaGVja0VudGl0eUFfRW1iZWRfQ29s\nbF9JbnRlZ2VyKGEpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAg\nLyoKICAgICAqIEZpbmQgRW50aXR5QV9FbWJlZF9FbWJlZAogICAgICovCiAg\nICBwdWJsaWMgdm9pZCBmaW5kRW50aXR5QV9FbWJlZF9FbWJlZCgpIHsKICAg\nICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsKICAgICAgICBFbnRpdHlBX0VtYmVkX0VtYmVkIGEgPSBlbS5maW5k\nKEVudGl0eUFfRW1iZWRfRW1iZWQuY2xhc3MsIElEKTsKICAgICAgICBjaGVj\na0VudGl0eUFfRW1iZWRfRW1iZWQoYSk7CiAgICAgICAgZW0uY2xvc2UoKTsK\nICAgIH0KCiAgICAvKgogICAgICogRmluZCBFbnRpdHlBX0NvbGxfRW1iZWRf\nRW1iZWQKICAgICAqLwogICAgcHVibGljIHZvaWQgZmluZEVudGl0eUFfQ29s\nbF9FbWJlZF9FbWJlZCgpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0g\nZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBFbnRpdHlBX0Nv\nbGxfRW1iZWRfRW1iZWQgYSA9CiAgICAgICAgICAgIGVtLmZpbmQoRW50aXR5\nQV9Db2xsX0VtYmVkX0VtYmVkLmNsYXNzLCBJRCk7CiAgICAgICAgY2hlY2tF\nbnRpdHlBX0NvbGxfRW1iZWRfRW1iZWQoYSk7CiAgICAgICAgCiAgICAgICAg\nZW0uY2xlYXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2lu\nKCk7CiAgICAgICAgRW1iZWRfRW1iZWQgZW1iZWQgPSBjcmVhdGVFbWJlZF9F\nbWJlZChlbSwgSUQsIDEwMCk7CiAgICAgICAgYS5hZGRFbWJlZChlbWJlZCk7\nCiAgICAgICAgZW0ubWVyZ2UoYSk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rp\nb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAg\nIC8qCiAgICAgKiBGaW5kIEVudGl0eUFfRW1iZWRfQ29sbF9FbWJlZAogICAg\nICovCiAgICBwdWJsaWMgdm9pZCBmaW5kRW50aXR5QV9FbWJlZF9Db2xsX0Vt\nYmVkKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIEVudGl0eUFfRW1iZWRfQ29sbF9F\nbWJlZCBhID0KICAgICAgICAgICAgZW0uZmluZChFbnRpdHlBX0VtYmVkX0Nv\nbGxfRW1iZWQuY2xhc3MsIElEKTsKICAgICAgICBjaGVja0VudGl0eUFfRW1i\nZWRfQ29sbF9FbWJlZChhKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoK\nICAgIC8qCiAgICAgKiBjaGVjayBFbnRpdHlBX0NvbGxfU3RyaW5nCiAgICAg\nKi8KICAgIHB1YmxpYyB2b2lkIGNoZWNrRW50aXR5QV9Db2xsX1N0cmluZyhF\nbnRpdHlBX0NvbGxfU3RyaW5nIGEpIHsKICAgICAgICBpbnQgaWQgPSBhLmdl\ndElkKCk7CiAgICAgICAgU3RyaW5nIG5hbWUgPSBhLmdldE5hbWUoKTsKICAg\nICAgICBpbnQgYWdlID0gYS5nZXRBZ2UoKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoMSwgaWQpOwogICAgICAgIGFzc2VydEVxdWFscygiYSIgKyBpZCAsbmFt\nZSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGFnZSk7CiAgICAgICAgU2V0\nPFN0cmluZz4gbmlja05hbWVzID0gYS5nZXROaWNrTmFtZXMoKTsKICAgICAg\nICBmb3IgKFN0cmluZyBuaWNrTmFtZSA6IG5pY2tOYW1lcykKICAgICAgICAg\nICAgYXNzZXJ0RXF1YWxzKCJuaWNrTmFtZV8iICsgaWQgKyAiMCIsIG5pY2tO\nYW1lKTsKICAgICAgICBMaXN0PEVudGl0eUFfQ29sbF9TdHJpbmcuQ3JlZGl0\nUmF0aW5nPiBjciA9IGEuZ2V0Q3JlZGl0UmF0aW5nKCk7CiAgICAgICAgZm9y\nIChFbnRpdHlBX0NvbGxfU3RyaW5nLkNyZWRpdFJhdGluZyBjIDogY3IpCiAg\nICAgICAgICAgIGFzc2VydEVxdWFscygiUE9PUiIsIGMudG9TdHJpbmcoKSk7\nCiAgICB9CgogICAgLyoKICAgICAqIGNoZWNrIEVudGl0eUFfRW1iZWRfVG9P\nbmUKICAgICAqLwogICAgcHVibGljIHZvaWQgY2hlY2tFbnRpdHlBX0VtYmVk\nX1RvT25lKEVudGl0eUFfRW1iZWRfVG9PbmUgYSkgewogICAgICAgIGludCBp\nZCA9IGEuZ2V0SWQoKTsKICAgICAgICBTdHJpbmcgbmFtZSA9IGEuZ2V0TmFt\nZSgpOwogICAgICAgIGludCBhZ2UgPSBhLmdldEFnZSgpOwogICAgICAgIGFz\nc2VydEVxdWFscygxLCBpZCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJhIiAr\nIGlkICxuYW1lKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgYWdlKTsKICAg\nICAgICBFbWJlZF9Ub09uZSBlbWJlZCA9IGEuZ2V0RW1iZWQoKTsKICAgICAg\nICBjaGVja0VtYmVkX1RvT25lKGVtYmVkKTsKICAgIH0KCiAgICAvKgogICAg\nICogY2hlY2sgRW50aXR5QV9FbWJlZF9NYXBwZWRUb09uZQogICAgICovCiAg\nICBwdWJsaWMgdm9pZCBjaGVja0VudGl0eUFfRW1iZWRfTWFwcGVkVG9PbmUo\nRW50aXR5QV9FbWJlZF9NYXBwZWRUb09uZSBhKSB7CiAgICAgICAgaW50IGlk\nID0gYS5nZXRJZCgpOwogICAgICAgIFN0cmluZyBuYW1lID0gYS5nZXROYW1l\nKCk7CiAgICAgICAgaW50IGFnZSA9IGEuZ2V0QWdlKCk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDEsIGlkKTsKICAgICAgICBhc3NlcnRFcXVhbHMoImEiICsg\naWQgLG5hbWUpOwogICAgICAgIGFzc2VydEVxdWFscygxLCBhZ2UpOwogICAg\nICAgIEVtYmVkX01hcHBlZFRvT25lIGVtYmVkID0gYS5nZXRFbWJlZCgpOwog\nICAgICAgIGNoZWNrRW1iZWRfTWFwcGVkVG9PbmUoZW1iZWQpOwogICAgfQoK\nICAgIC8qCiAgICAgKiBjaGVjayBFbnRpdHlBX0NvbGxfRW1iZWRfVG9PbmUK\nICAgICAqLwogICAgcHVibGljIHZvaWQgY2hlY2tFbnRpdHlBX0NvbGxfRW1i\nZWRfVG9PbmUoRW50aXR5QV9Db2xsX0VtYmVkX1RvT25lIGEpIHsKICAgICAg\nICBpbnQgaWQgPSBhLmdldElkKCk7CiAgICAgICAgU3RyaW5nIG5hbWUgPSBh\nLmdldE5hbWUoKTsKICAgICAgICBpbnQgYWdlID0gYS5nZXRBZ2UoKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoMSwgaWQpOwogICAgICAgIGFzc2VydEVxdWFs\ncygiYSIgKyBpZCAsbmFtZSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGFn\nZSk7CiAgICAgICAgU2V0PEVtYmVkX1RvT25lPiBlbWJlZHMgPSBhLmdldEVt\nYmVkMVRvT25lcygpOwogICAgICAgIGZvciAoRW1iZWRfVG9PbmUgZW1iZWQg\nOiBlbWJlZHMpCiAgICAgICAgICAgIGNoZWNrRW1iZWRfVG9PbmUoZW1iZWQp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGNoZWNrRW1iZWRfVG9PbmUoRW1i\nZWRfVG9PbmUgZW1iZWQpIHsKICAgICAgICBTdHJpbmcgbmFtZTEgPSBlbWJl\nZC5nZXROYW1lMSgpOwogICAgICAgIFN0cmluZyBuYW1lMiA9IGVtYmVkLmdl\ndE5hbWUyKCk7CiAgICAgICAgU3RyaW5nIG5hbWUzID0gZW1iZWQuZ2V0TmFt\nZTMoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIm5hbWUxIiwgbmFtZTEpOwog\nICAgICAgIGFzc2VydEVxdWFscygibmFtZTIiLCBuYW1lMik7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKCJuYW1lMyIsIG5hbWUzKTsKICAgICAgICBFbnRpdHlC\nMSBiID0gZW1iZWQuZ2V0RW50aXR5QigpOwogICAgICAgIGFzc2VydEVxdWFs\ncygxLCBiLmdldElkKCkpOwogICAgICAgIGFzc2VydEVxdWFscygiYiIgKyBi\nLmdldElkKCksIGIuZ2V0TmFtZSgpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBjaGVja0VtYmVkX01hcHBlZFRvT25lKEVtYmVkX01hcHBlZFRvT25lIGVt\nYmVkKSB7CiAgICAgICAgU3RyaW5nIG5hbWUxID0gZW1iZWQuZ2V0TmFtZTEo\nKTsKICAgICAgICBTdHJpbmcgbmFtZTIgPSBlbWJlZC5nZXROYW1lMigpOwog\nICAgICAgIFN0cmluZyBuYW1lMyA9IGVtYmVkLmdldE5hbWUzKCk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKCJuYW1lMSIsIG5hbWUxKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoIm5hbWUyIiwgbmFtZTIpOwogICAgICAgIGFzc2VydEVxdWFs\ncygibmFtZTMiLCBuYW1lMyk7CiAgICAgICAgRW50aXR5QjEgYiA9IGVtYmVk\nLmdldE1hcHBlZEVudGl0eUIoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMSwg\nYi5nZXRJZCgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoImJtIiArIGIuZ2V0\nSWQoKSwgYi5nZXROYW1lKCkpOwogICAgfQoKICAgIC8qCiAgICAgKiBjaGVj\nayBFbnRpdHlBX0VtYmVkX1RvTWFueQogICAgICovCiAgICBwdWJsaWMgdm9p\nZCBjaGVja0VudGl0eUFfRW1iZWRfVG9NYW55KEVudGl0eUFfRW1iZWRfVG9N\nYW55IGEpIHsKICAgICAgICBpbnQgaWQgPSBhLmdldElkKCk7CiAgICAgICAg\nU3RyaW5nIG5hbWUgPSBhLmdldE5hbWUoKTsKICAgICAgICBpbnQgYWdlID0g\nYS5nZXRBZ2UoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgaWQpOwogICAg\nICAgIGFzc2VydEVxdWFscygiYSIgKyBpZCAsbmFtZSk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDEsIGFnZSk7CiAgICAgICAgRW1iZWRfVG9NYW55IGVtYmVk\nID0gYS5nZXRFbWJlZCgpOwogICAgICAgIGNoZWNrRW1iZWRfVG9NYW55KGVt\nYmVkKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjaGVja0VtYmVkX1RvTWFu\neShFbWJlZF9Ub01hbnkgZW1iZWQpIHsKICAgICAgICBTdHJpbmcgbmFtZTEg\nPSBlbWJlZC5nZXROYW1lMSgpOwogICAgICAgIFN0cmluZyBuYW1lMiA9IGVt\nYmVkLmdldE5hbWUyKCk7CiAgICAgICAgU3RyaW5nIG5hbWUzID0gZW1iZWQu\nZ2V0TmFtZTMoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIm5hbWUxIiwgbmFt\nZTEpOwogICAgICAgIGFzc2VydEVxdWFscygibmFtZTIiLCBuYW1lMik7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKCJuYW1lMyIsIG5hbWUzKTsKICAgICAgICBM\naXN0PEVudGl0eUIxPiBicyA9IGVtYmVkLmdldEVudGl0eUJzKCk7CiAgICAg\nICAgZm9yIChFbnRpdHlCMSBiIDogYnMpIHsKICAgICAgICAgICAgYXNzZXJ0\nRXF1YWxzKDEsIGIuZ2V0SWQoKSk7CiAgICAgICAgICAgIGFzc2VydEVxdWFs\ncygiYiIgKyBiLmdldElkKCkgKyAiMCIsIGIuZ2V0TmFtZSgpKTsKICAgICAg\nICB9CiAgICB9CgogICAgLyoKICAgICAqIGNoZWNrIEVudGl0eUFfRW1iZWRf\nRW1iZWRfVG9NYW55CiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIGNoZWNrRW50\naXR5QV9FbWJlZF9FbWJlZF9Ub01hbnkoRW50aXR5QV9FbWJlZF9FbWJlZF9U\nb01hbnkgYSkgewogICAgICAgIGludCBpZCA9IGEuZ2V0SWQoKTsKICAgICAg\nICBTdHJpbmcgbmFtZSA9IGEuZ2V0TmFtZSgpOwogICAgICAgIGludCBhZ2Ug\nPSBhLmdldEFnZSgpOwogICAgICAgIGFzc2VydEVxdWFscygxLCBpZCk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKCJhIiArIGlkICxuYW1lKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoMSwgYWdlKTsKICAgICAgICBFbWJlZF9FbWJlZF9Ub01h\nbnkgZW1iZWQgPSBhLmdldEVtYmVkKCk7CiAgICAgICAgY2hlY2tFbWJlZF9F\nbWJlZF9Ub01hbnkoZW1iZWQpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9p\nZCBjaGVja0VtYmVkX0VtYmVkX1RvTWFueShFbWJlZF9FbWJlZF9Ub01hbnkg\nZW1iZWQpIHsKICAgICAgICBpbnQgaW50VmFsMSA9IGVtYmVkLmdldEludFZh\nbDEoKTsKICAgICAgICBpbnQgaW50VmFsMiA9IGVtYmVkLmdldEludFZhbDIo\nKTsKICAgICAgICBpbnQgaW50VmFsMyA9IGVtYmVkLmdldEludFZhbDMoKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoMSwgaW50VmFsMSk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDIsIGludFZhbDIpOwogICAgICAgIGFzc2VydEVxdWFscygz\nLCBpbnRWYWwzKTsKICAgICAgICBFbWJlZF9Ub01hbnkgZW1iZWQxID0gZW1i\nZWQuZ2V0RW1iZWQoKTsKICAgICAgICBjaGVja0VtYmVkX1RvTWFueShlbWJl\nZDEpOwogICAgfQogICAgCiAgICAvKgogICAgICogY2hlY2sgRW50aXR5QV9F\nbWJlZF9Db2xsX0ludGVnZXIKICAgICAqLwogICAgcHVibGljIHZvaWQgY2hl\nY2tFbnRpdHlBX0VtYmVkX0NvbGxfSW50ZWdlcihFbnRpdHlBX0VtYmVkX0Nv\nbGxfSW50ZWdlciBhKSB7CiAgICAgICAgaW50IGlkID0gYS5nZXRJZCgpOwog\nICAgICAgIFN0cmluZyBuYW1lID0gYS5nZXROYW1lKCk7CiAgICAgICAgaW50\nIGFnZSA9IGEuZ2V0QWdlKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGlk\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoImEiICsgaWQgLG5hbWUpOwogICAg\nICAgIGFzc2VydEVxdWFscygxLCBhZ2UpOwogICAgICAgIEVtYmVkX0NvbGxf\nSW50ZWdlciBlbWJlZCA9IGEuZ2V0RW1iZWQoKTsKICAgICAgICBjaGVja0Vt\nYmVkX0ludGVnZXJzKGVtYmVkKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBj\naGVja0VtYmVkX0ludGVnZXJzKEVtYmVkX0NvbGxfSW50ZWdlciBlbWJlZCkg\newogICAgICAgIGludCBpbnRWYWwxID0gZW1iZWQuZ2V0SW50VmFsMSgpOwog\nICAgICAgIGludCBpbnRWYWwyID0gZW1iZWQuZ2V0SW50VmFsMigpOwogICAg\nICAgIGludCBpbnRWYWwzID0gZW1iZWQuZ2V0SW50VmFsMygpOwogICAgICAg\nIGFzc2VydEVxdWFscygxMSwgaW50VmFsMSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDEyLCBpbnRWYWwyKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMTMsIGlu\ndFZhbDMpOwogICAgICAgIFNldDxJbnRlZ2VyPiBpbnRWYWxzID0gZW1iZWQu\nZ2V0T3RoZXJJbnRWYWxzKCk7CiAgICAgICAgZm9yIChJbnRlZ2VyIGludFZh\nbCA6IGludFZhbHMpIHsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKDEwMCwg\naW50VmFsLmludFZhbHVlKCkpOwogICAgICAgIH0KICAgIH0KCiAgICAvKgog\nICAgICogY2hlY2sgRW50aXR5QV9FbWJlZF9FbWJlZAogICAgICovCiAgICBw\ndWJsaWMgdm9pZCBjaGVja0VudGl0eUFfRW1iZWRfRW1iZWQoRW50aXR5QV9F\nbWJlZF9FbWJlZCBhKSB7CiAgICAgICAgaW50IGlkID0gYS5nZXRJZCgpOwog\nICAgICAgIFN0cmluZyBuYW1lID0gYS5nZXROYW1lKCk7CiAgICAgICAgaW50\nIGFnZSA9IGEuZ2V0QWdlKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGlk\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoImEiICsgaWQgLG5hbWUpOwogICAg\nICAgIGFzc2VydEVxdWFscygxLCBhZ2UpOwogICAgICAgIEVtYmVkX0VtYmVk\nIGVtYmVkID0gYS5nZXRFbWJlZCgpOwogICAgICAgIGNoZWNrRW1iZWRfRW1i\nZWQoZW1iZWQpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGNoZWNrRW1iZWRf\nRW1iZWQoRW1iZWRfRW1iZWQgZW1iZWQpIHsKICAgICAgICBpbnQgaW50VmFs\nMSA9IGVtYmVkLmdldEludFZhbDEoKTsKICAgICAgICBpbnQgaW50VmFsMiA9\nIGVtYmVkLmdldEludFZhbDIoKTsKICAgICAgICBpbnQgaW50VmFsMyA9IGVt\nYmVkLmdldEludFZhbDMoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMTAxLCBp\nbnRWYWwxKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMTAyLCBpbnRWYWwyKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoMTAzLCBpbnRWYWwzKTsKICAgICAgICBF\nbWJlZCBlbWJlZDEgPSBlbWJlZC5nZXRFbWJlZCgpOwogICAgICAgIGNoZWNr\nRW1iZWQoZW1iZWQxKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjaGVja0Vt\nYmVkKEVtYmVkIGVtYmVkKSB7CiAgICAgICAgaW50IGludFZhbDEgPSBlbWJl\nZC5nZXRJbnRWYWwxKCk7CiAgICAgICAgaW50IGludFZhbDIgPSBlbWJlZC5n\nZXRJbnRWYWwyKCk7CiAgICAgICAgaW50IGludFZhbDMgPSBlbWJlZC5nZXRJ\nbnRWYWwzKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEwNCwgaW50VmFsMSk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEwNSwgaW50VmFsMik7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDEwNiwgaW50VmFsMyk7CiAgICB9CgogICAgLyoKICAg\nICAqIGNoZWNrIEVudGl0eUFfQ29sbF9FbWJlZF9FbWJlZAogICAgICovCiAg\nICBwdWJsaWMgdm9pZCBjaGVja0VudGl0eUFfQ29sbF9FbWJlZF9FbWJlZChF\nbnRpdHlBX0NvbGxfRW1iZWRfRW1iZWQgYSkgewogICAgICAgIGludCBpZCA9\nIGEuZ2V0SWQoKTsKICAgICAgICBTdHJpbmcgbmFtZSA9IGEuZ2V0TmFtZSgp\nOwogICAgICAgIGludCBhZ2UgPSBhLmdldEFnZSgpOwogICAgICAgIGFzc2Vy\ndEVxdWFscygxLCBpZCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJhIiArIGlk\nICxuYW1lKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgYWdlKTsKICAgICAg\nICBMaXN0PEVtYmVkX0VtYmVkPiBlbWJlZHMgPSBhLmdldEVtYmVkcygpOwog\nICAgICAgIGZvciAoRW1iZWRfRW1iZWQgZW1iZWQgOiBlbWJlZHMpCiAgICAg\nICAgICAgIGNoZWNrRW1iZWRfRW1iZWQoZW1iZWQpOwogICAgfQoKICAgIC8q\nCiAgICAgKiBjaGVjayBFbnRpdHlBX0VtYmVkX0NvbGxfRW1iZWQKICAgICAq\nLwogICAgcHVibGljIHZvaWQgY2hlY2tFbnRpdHlBX0VtYmVkX0NvbGxfRW1i\nZWQoRW50aXR5QV9FbWJlZF9Db2xsX0VtYmVkIGEpIHsKICAgICAgICBpbnQg\naWQgPSBhLmdldElkKCk7CiAgICAgICAgU3RyaW5nIG5hbWUgPSBhLmdldE5h\nbWUoKTsKICAgICAgICBpbnQgYWdlID0gYS5nZXRBZ2UoKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoMSwgaWQpOwogICAgICAgIGFzc2VydEVxdWFscygiYSIg\nKyBpZCAsbmFtZSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGFnZSk7CiAg\nICAgICAgRW1iZWRfQ29sbF9FbWJlZCBlbWJlZCA9IGEuZ2V0RW1iZWQoKTsK\nICAgICAgICBjaGVja0VtYmVkX0NvbGxfRW1iZWQoZW1iZWQpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIGNoZWNrRW1iZWRfQ29sbF9FbWJlZChFbWJlZF9D\nb2xsX0VtYmVkIGVtYmVkKSB7CiAgICAgICAgaW50IGludFZhbDEgPSBlbWJl\nZC5nZXRJbnRWYWwxKCk7CiAgICAgICAgaW50IGludFZhbDIgPSBlbWJlZC5n\nZXRJbnRWYWwyKCk7CiAgICAgICAgaW50IGludFZhbDMgPSBlbWJlZC5nZXRJ\nbnRWYWwzKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDExLCBpbnRWYWwxKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoMTIsIGludFZhbDIpOwogICAgICAgIGFz\nc2VydEVxdWFscygxMywgaW50VmFsMyk7CiAgICAgICAgTGlzdDxFbWJlZD4g\nZW1iZWRzID0gZW1iZWQuZ2V0RW1iZWRzKCk7CiAgICAgICAgZm9yIChFbWJl\nZCBlbWJlZDEgOiBlbWJlZHMpCiAgICAgICAgICAgIGNoZWNrRW1iZWQoZW1i\nZWQxKTsKICAgIH0KCiAgICAvKgogICAgICogUXVlcnkgRW50aXR5QV9Db2xs\nX1N0cmluZwogICAgICovCiAgICBwdWJsaWMgdm9pZCBxdWVyeUVudGl0eUFf\nQ29sbF9TdHJpbmcoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVt\nZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgU3RyaW5nW10gcXVl\ncnkgPSB7CiAgICAgICAgICAgICJzZWxlY3QgZSBmcm9tICIgKwogICAgICAg\nICAgICAgICAgIiBFbnRpdHlBX0NvbGxfU3RyaW5nIGEgIiArCiAgICAgICAg\nICAgICAgICAiICwgaW4gKGEubmlja05hbWVzKSBlIG9yZGVyIGJ5IGEuaWQi\nLAogICAgICAgICAgICAic2VsZWN0IGUgZnJvbSAiICsKICAgICAgICAgICAg\nICAgICIgRW50aXR5QV9Db2xsX1N0cmluZyBhICIgKwogICAgICAgICAgICAg\nICAgIiAsIGluIChhLm5pY2tOYW1lcykgZSBvcmRlciBieSBhLmlkIiwKICAg\nICAgICAgICAgInNlbGVjdCBlIGZyb20gIiArCiAgICAgICAgICAgICAgICAi\nIEVudGl0eUFfQ29sbF9TdHJpbmcgYSAiICsKICAgICAgICAgICAgICAgICIg\nLCBpbiAoYS5uaWNrTmFtZXMpIGUgb3JkZXIgYnkgZSIsCiAgICAgICAgICAg\nICJzZWxlY3QgYSBmcm9tICIgKwogICAgICAgICAgICAgICAgIiBFbnRpdHlB\nX0NvbGxfU3RyaW5nIGEgIiArCiAgICAgICAgICAgICAgICAiIFdIRVJFIGEu\nbmlja05hbWVzIElTIEVNUFRZIG9yZGVyIGJ5IGEiLAogICAgICAgICAgICAi\nc2VsZWN0IGEgZnJvbSAiICsKICAgICAgICAgICAgICAgICIgRW50aXR5QV9D\nb2xsX1N0cmluZyBhICIgKwogICAgICAgICAgICAgICAgIiBXSEVSRSBleGlz\ndHMgKHNlbGVjdCBuIGZyb20gRW50aXR5QV9Db2xsX1N0cmluZyBhLCAiICsK\nICAgICAgICAgICAgICAgICIgaW4gKGEubmlja05hbWVzKSBuIHdoZXJlIG4g\nbGlrZSAnJTEnKSAiICsKICAgICAgICAgICAgICAgICIgb3JkZXIgYnkgYSIs\nCiAgICAgICAgfTsKICAgICAgICBMaXN0IHJzID0gbnVsbDsKICAgICAgICBm\nb3IgKGludCBpID0gMDsgaSA8IHF1ZXJ5Lmxlbmd0aDsgaSsrKSB7CiAgICAg\nICAgICAgIHJzID0gZW0uY3JlYXRlUXVlcnkocXVlcnlbaV0pLmdldFJlc3Vs\ndExpc3QoKTsKICAgICAgICAgICAgc3dpdGNoIChpKSB7CiAgICAgICAgICAg\nIGNhc2UgMDoKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBjYXNl\nIDI6CiAgICAgICAgICAgICAgICBhc3NlcnRUcnVlKHJzLnNpemUoKSA+IDAp\nOwogICAgICAgICAgICAgICAgT2JqZWN0IG9iaiA9IHJzLmdldCgwKTsKICAg\nICAgICAgICAgICAgIGFzc2VydFRydWUob2JqIGluc3RhbmNlb2YgU3RyaW5n\nKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDM6\nCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIGFzc2VydFRy\ndWUocnMuc2l6ZSgpID09IDApOwogICAgICAgICAgICB9CiAgICAgICAgICAg\nIGVtLmNsZWFyKCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIFN0cmlu\nZ1tdIHF1ZXJ5V2l0aFBhcmFtZXRlcnMgPSB7CiAgICAgICAgICAgICAgICAi\nc2VsZWN0IGIubmFtZSBmcm9tICIgKyAKICAgICAgICAgICAgICAgICAgICAi\nRW50aXR5QjEgYiAiICsgCiAgICAgICAgICAgICAgICAgICAgIldIRVJFIGIu\naWQgaW4gIiArIAogICAgICAgICAgICAgICAgICAgICIoc2VsZWN0IGEuaWQg\nRlJPTSBFbnRpdHlBX0NvbGxfU3RyaW5nIGEgd2hlcmUgPzEgTUVNQkVSIE9G\nIGEubmlja05hbWVzKSIsCiAgICAgICAgICAgICAgICAic2VsZWN0IGIubmFt\nZSBmcm9tICIgKyAKICAgICAgICAgICAgICAgICAgICAiRW50aXR5QjEgYiAi\nICsgCiAgICAgICAgICAgICAgICAgICAgIldIRVJFIGIuaWQgbm90IGluICIg\nKyAKICAgICAgICAgICAgICAgICAgICAiKHNlbGVjdCBhLmlkIEZST00gRW50\naXR5QV9Db2xsX1N0cmluZyBhIHdoZXJlID8xIE1FTUJFUiBPRiBhLm5pY2tO\nYW1lcykiCiAgICAgICAgfTsKICAgICAgICAgICAgCiAgICAgICAgZm9yIChp\nbnQgaSA9IDA7IGkgPCBxdWVyeVdpdGhQYXJhbWV0ZXJzLmxlbmd0aDsgaSsr\nKSB7CiAgICAgICAgICAgIFF1ZXJ5IHExID0gZW0uY3JlYXRlUXVlcnkocXVl\ncnlXaXRoUGFyYW1ldGVyc1tpXSk7CiAgICAgICAgICAgIHExLnNldFBhcmFt\nZXRlcigxLCAibmlja05hbWVfMTAiKTsKICAgICAgICAgICAgcnMgPSBxMS5n\nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgICAgIHN3aXRjaCAoaSkgewogICAg\nICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBTdHJpbmcgb2JqID0g\nKFN0cmluZylycy5nZXQoMCk7CiAgICAgICAgICAgICAgICBhc3NlcnRFcXVh\nbHMoImIxIiwgb2JqKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAg\nICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICBhc3NlcnRUcnVlKHJzLnNp\nemUoKSA9PSAwKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAg\nICB9CiAgICAgICAgfSAgICAgICAgCiAgICAgICAgCiAgICAgICAgRW50aXR5\nVHJhbnNhY3Rpb24gdHJhbiA9IGVtLmdldFRyYW5zYWN0aW9uKCk7CiAgICAg\nICAgdHJhbi5iZWdpbigpOwogICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVR\ndWVyeSgic2VsZWN0IGEgZnJvbSBFbnRpdHlBX0NvbGxfU3RyaW5nIGEiKTsK\nICAgICAgICBMaXN0PEVudGl0eUFfQ29sbF9TdHJpbmc+IGFzID0gcS5nZXRS\nZXN1bHRMaXN0KCk7CiAgICAgICAgZm9yIChFbnRpdHlBX0NvbGxfU3RyaW5n\nIGEgOiBhcykgewogICAgICAgICAgICBjaGVja0VudGl0eUFfQ29sbF9TdHJp\nbmcoYSk7CiAgICAgICAgfQogICAgICAgIHRyYW4uY29tbWl0KCk7CiAgICAg\nICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICAvKgogICAgICogUXVlcnkgRW50\naXR5QV9FbWJlZF9Ub09uZQogICAgICovCiAgICBwdWJsaWMgdm9pZCBxdWVy\neUVudGl0eUFfRW1iZWRfVG9PbmUoKSB7CiAgICAgICAgRW50aXR5TWFuYWdl\nciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgLy8g\ndGVzdCBzZWxlY3QgZW1iZWQgb2JqZWN0CiAgICAgICAgU3RyaW5nW10gcXVl\ncnkgPSB7CiAgICAgICAgICAgICJzZWxlY3QgYS5lbWJlZCBmcm9tICIgKwog\nICAgICAgICAgICAgICAgIiBFbnRpdHlBX0VtYmVkX1RvT25lIGEgIiwKICAg\nICAgICAgICAgInNlbGVjdCBhLmVtYmVkIGZyb20gIiArCiAgICAgICAgICAg\nICAgICAiIEVudGl0eUFfRW1iZWRfVG9PbmUgYSAiLAogICAgICAgICAgICAi\nc2VsZWN0IGUgZnJvbSBFbnRpdHlBX0VtYmVkX1RvT25lIGEgIiArCiAgICAg\nICAgICAgICAgICAiIGpvaW4gYS5lbWJlZCBlIGpvaW4gZS5iIGIgd2hlcmUg\nZS5iLmlkID4gMCBvcmRlciBieSBhLmlkIiwKICAgICAgICAgICAgInNlbGVj\ndCBlIGZyb20gRW50aXR5QV9FbWJlZF9Ub09uZSBhICIgKwogICAgICAgICAg\nICAgICAgIiBqb2luIGEuZW1iZWQgZSBqb2luIGUuYiBiIHdoZXJlIGUuYi5p\nZCA+IDAgb3JkZXIgYnkgYS5pZCIsCiAgICAgICAgICAgICJzZWxlY3QgYS5l\nbWJlZCBmcm9tICIgKwogICAgICAgICAgICAgICAgIiBFbnRpdHlBX0VtYmVk\nX1RvT25lIGEgT1JERVIgQlkgYS5lbWJlZCIsCiAgICAgICAgICAgICJzZWxl\nY3QgYS5lbWJlZCBmcm9tICIgKwogICAgICAgICAgICAgICAgIiBFbnRpdHlB\nX0VtYmVkX1RvT25lIGEgV0hFUkUgYS5lbWJlZC5iIElTIE5PVCBOVUxMICIg\nKwogICAgICAgICAgICAgICAgIiBPUkRFUiBCWSBhLmVtYmVkIiwKICAgICAg\nICAgICAgInNlbGVjdCBhLmVtYmVkIGZyb20gIiArCiAgICAgICAgICAgICAg\nICAiIEVudGl0eUFfRW1iZWRfVG9PbmUgYSBXSEVSRSBleGlzdHMgIiArCiAg\nICAgICAgICAgICAgICAiIChzZWxlY3QgYSBmcm9tIEVudGl0eUFfRW1iZWRf\nVG9PbmUgYSAiICsKICAgICAgICAgICAgICAgICIgd2hlcmUgYS5lbWJlZC5i\nIElTIE5PVCBOVUxMKSAiICsKICAgICAgICAgICAgICAgICIgT1JERVIgQlkg\nYS5lbWJlZCIsCiAgICAgICAgfTsKICAgICAgICBmb3IgKGludCBpID0gMDsg\naSA8IHF1ZXJ5Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIExpc3Q8T2Jq\nZWN0W10+IHJzID0gbnVsbDsKICAgICAgICAgICAgcnMgPSBlbS5jcmVhdGVR\ndWVyeShxdWVyeVtpXSkuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgICAgICBh\nc3NlcnRUcnVlKHJzLnNpemUoKSA+IDApOwogICAgICAgICAgICBPYmplY3Qg\nb2JqID0gcnMuZ2V0KDApOwogICAgICAgICAgICBhc3NlcnRUcnVlKG9iaiBp\nbnN0YW5jZW9mIEVtYmVkX1RvT25lKTsKICAgICAgICAgICAgYXNzZXJ0VHJ1\nZSgoKEVtYmVkX1RvT25lKSBvYmopLmdldEVudGl0eUIoKSAhPSBudWxsKTsK\nICAgICAgICAgICAgZW0uY2xlYXIoKTsKICAgICAgICB9CiAgICAgICAgRW50\naXR5VHJhbnNhY3Rpb24gdHJhbiA9IGVtLmdldFRyYW5zYWN0aW9uKCk7CiAg\nICAgICAgdHJhbi5iZWdpbigpOwogICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVh\ndGVRdWVyeSgic2VsZWN0IGEgZnJvbSBFbnRpdHlBX0VtYmVkX1RvT25lIGEi\nKTsKICAgICAgICBMaXN0PEVudGl0eUFfRW1iZWRfVG9PbmU+IGFzID0gcS5n\nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgZm9yIChFbnRpdHlBX0VtYmVkX1Rv\nT25lIGEgOiBhcykgewogICAgICAgICAgICBjaGVja0VudGl0eUFfRW1iZWRf\nVG9PbmUoYSk7CiAgICAgICAgfQogICAgICAgIHRyYW4uY29tbWl0KCk7CiAg\nICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICAvKgogICAgICogUXVlcnkg\nRW50aXR5QV9FbWJlZF9NYXBwZWRUb09uZQogICAgICovCiAgICBwdWJsaWMg\ndm9pZCBxdWVyeUVudGl0eUFfRW1iZWRfTWFwcGVkVG9PbmUoKSB7CiAgICAg\nICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2Vy\nKCk7CiAgICAgICAgLy8gdGVzdCBzZWxlY3QgZW1iZWQgb2JqZWN0CiAgICAg\nICAgU3RyaW5nW10gcXVlcnkgPSB7CiAgICAgICAgICAgICJzZWxlY3QgYS5l\nbWJlZCBmcm9tICIgKwogICAgICAgICAgICAgICAgIiBFbnRpdHlBX0VtYmVk\nX01hcHBlZFRvT25lIGEgIiwKICAgICAgICAgICAgInNlbGVjdCBlIGZyb20g\nRW50aXR5QV9FbWJlZF9NYXBwZWRUb09uZSBhICIgKwogICAgICAgICAgICAg\nICAgIiBqb2luIGEuZW1iZWQgZSBqb2luIGUuYm0gYm0gd2hlcmUgZS5ibS5p\nZCA+IDAgb3JkZXIgYnkgYS5pZCIsCiAgICAgICAgICAgICJzZWxlY3QgYS5l\nbWJlZCBhcyBlIGZyb20gIiArCiAgICAgICAgICAgICAgICAiIEVudGl0eUFf\nRW1iZWRfTWFwcGVkVG9PbmUgYSBPUkRFUiBCWSBlIiwKICAgICAgICAgICAg\nInNlbGVjdCBhLmVtYmVkIGZyb20gIiArCiAgICAgICAgICAgICAgICAiIEVu\ndGl0eUFfRW1iZWRfTWFwcGVkVG9PbmUgYSBXSEVSRSBhLmVtYmVkLmJtIElT\nIE5PVCBOVUxMIiwKICAgICAgICAgICAgInNlbGVjdCBhLmVtYmVkIGZyb20g\nIiArCiAgICAgICAgICAgICAgICAiIEVudGl0eUFfRW1iZWRfTWFwcGVkVG9P\nbmUgYSAiICsKICAgICAgICAgICAgICAgICIgV0hFUkUgZXhpc3RzICIgKwog\nICAgICAgICAgICAgICAgIiAoc2VsZWN0IGEgZnJvbSBFbnRpdHlBX0VtYmVk\nX01hcHBlZFRvT25lIGEgIiArCiAgICAgICAgICAgICAgICAiIHdoZXJlIGEu\nZW1iZWQuYm0gSVMgTk9UIE5VTEwpIiwKICAgICAgICB9OwogICAgICAgIGZv\nciAoaW50IGkgPSAwOyBpIDwgcXVlcnkubGVuZ3RoOyBpKyspIHsKICAgICAg\nICAgICAgTGlzdDxPYmplY3RbXT4gcnMgPSBudWxsOwogICAgICAgICAgICBy\ncyA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5W2ldKS5nZXRSZXN1bHRMaXN0KCk7\nCiAgICAgICAgICAgIGFzc2VydFRydWUocnMuc2l6ZSgpID4gMCk7CiAgICAg\nICAgICAgIE9iamVjdCBvYmogPSBycy5nZXQoMCk7CiAgICAgICAgICAgIGFz\nc2VydFRydWUob2JqIGluc3RhbmNlb2YgRW1iZWRfTWFwcGVkVG9PbmUpOwog\nICAgICAgICAgICBhc3NlcnRUcnVlKCgoRW1iZWRfTWFwcGVkVG9PbmUpIG9i\naikuZ2V0TWFwcGVkRW50aXR5QigpICE9IG51bGwpOwogICAgICAgICAgICBl\nbS5jbGVhcigpOwogICAgICAgIH0KICAgICAgICBTdHJpbmdbXSBxdWVyeTIg\nPSB7CiAgICAgICAgICAgIC8vIGVtYmVkZGFibGUgaW4gY29uZGl0aW9uYWwg\nZXhwcmVzc2lvbiBzaG91bGQgZmFpbAogICAgICAgICAgICAic2VsZWN0IGEu\nZW1iZWQgZnJvbSAiICsKICAgICAgICAgICAgICAgICIgRW50aXR5QV9FbWJl\nZF9NYXBwZWRUb09uZSBhICIgKwogICAgICAgICAgICAgICAgIiBXSEVSRSBl\neGlzdHMgIiArCiAgICAgICAgICAgICAgICAiIChzZWxlY3QgZSBmcm9tIEVu\ndGl0eUFfRW1iZWRfTWFwcGVkVG9PbmUgYSIgKwogICAgICAgICAgICAgICAg\nIiBqb2luIGEuZW1iZWQgZSAiICsKICAgICAgICAgICAgICAgICIgd2hlcmUg\nZS5ibSBJUyBOT1QgTlVMTCkiLAogICAgICAgICAgICAic2VsZWN0IGEuZW1i\nZWQgZnJvbSAiICsKICAgICAgICAgICAgICAgICIgRW50aXR5QV9FbWJlZF9N\nYXBwZWRUb09uZSBhICIgKwogICAgICAgICAgICAgICAgIiBXSEVSRSBleGlz\ndHMgIiArCiAgICAgICAgICAgICAgICAiIChzZWxlY3QgYS5lbWJlZCBmcm9t\nIEVudGl0eUFfRW1iZWRfTWFwcGVkVG9PbmUgYSAiICsKICAgICAgICAgICAg\nICAgICIgd2hlcmUgYS5lbWJlZC5ibSBJUyBOT1QgTlVMTCkiLAogICAgICAg\nIH07CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBxdWVyeTIubGVuZ3Ro\nOyBpKyspIHsKICAgICAgICAgICAgTGlzdDxPYmplY3RbXT4gcnMgPSBudWxs\nOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcnMgPSBlbS5j\ncmVhdGVRdWVyeShxdWVyeTJbaV0pLmdldFJlc3VsdExpc3QoKTsKICAgICAg\nICAgICAgfSBjYXRjaCAoQXJndW1lbnRFeGNlcHRpb24gZSkgewogICAgICAg\nICAgICAgICAgLy8gYXMgZXhwZWN0ZWQKICAgICAgICAgICAgfQogICAgICAg\nIH0KCiAgICAgICAgRW50aXR5VHJhbnNhY3Rpb24gdHJhbiA9IGVtLmdldFRy\nYW5zYWN0aW9uKCk7CiAgICAgICAgdHJhbi5iZWdpbigpOwogICAgICAgIFF1\nZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeSgic2VsZWN0IGEgZnJvbSBFbnRpdHlB\nX0VtYmVkX01hcHBlZFRvT25lIGEiKTsKICAgICAgICBMaXN0PEVudGl0eUFf\nRW1iZWRfTWFwcGVkVG9PbmU+IGFzID0gcS5nZXRSZXN1bHRMaXN0KCk7CiAg\nICAgICAgZm9yIChFbnRpdHlBX0VtYmVkX01hcHBlZFRvT25lIGEgOiBhcykg\newogICAgICAgICAgICBjaGVja0VudGl0eUFfRW1iZWRfTWFwcGVkVG9PbmUo\nYSk7CiAgICAgICAgfQogICAgICAgIHRyYW4uY29tbWl0KCk7CiAgICAgICAg\nZW0uY2xvc2UoKTsKICAgIH0KCiAgICAvKgogICAgICogUXVlcnkgRW50aXR5\nQV9Db2xsX0VtYmVkX1RvT25lCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHF1\nZXJ5RW50aXR5QV9Db2xsX0VtYmVkX1RvT25lKCkgewogICAgICAgIEVudGl0\neU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAg\nICAgIC8vIHRlc3Qgc2VsZWN0IGVtYmVkIG9iamVjdCBmcm9tIGVsZW1lbnQg\nY29sbGVjdGlvbgogICAgICAgIFN0cmluZ1tdIHF1ZXJ5ID0gewogICAgICAg\nICAgICAic2VsZWN0IGUsIGUuYiBmcm9tICIgKwogICAgICAgICAgICAgICAg\nIiBFbnRpdHlBX0NvbGxfRW1iZWRfVG9PbmUgYSAiICsKICAgICAgICAgICAg\nICAgICIgLCBpbiAoYS5lbWJlZDFzKSBlIG9yZGVyIGJ5IGUubmFtZTEiLAog\nICAgICAgICAgICAic2VsZWN0IGUsIGEuaWQgZnJvbSBFbnRpdHlBX0NvbGxf\nRW1iZWRfVG9PbmUgYSAiICsKICAgICAgICAgICAgICAgICIgLCBpbiAoYS5l\nbWJlZDFzKSBlIHdoZXJlIGUuYi5pZCA+IDAgb3JkZXIgYnkgYS5pZCIsCiAg\nICAgICAgICAgICJzZWxlY3QgZSwgZS5iLmlkICBmcm9tICIgKwogICAgICAg\nICAgICAgICAgIiBFbnRpdHlBX0NvbGxfRW1iZWRfVG9PbmUgYSAiICsKICAg\nICAgICAgICAgICAgICIgLCBpbiAoYS5lbWJlZDFzKSBlIHdoZXJlIGUubmFt\nZTEgbGlrZSAnJTEnIiArCiAgICAgICAgICAgICAgICAiIG9yZGVyIGJ5IGUu\nbmFtZTMiLAogICAgICAgICAgICAic2VsZWN0IGUsIGUuYi5pZCAgZnJvbSAi\nICsKICAgICAgICAgICAgICAgICIgRW50aXR5QV9Db2xsX0VtYmVkX1RvT25l\nIGEgIiArCiAgICAgICAgICAgICAgICAiICwgaW4gKGEuZW1iZWQxcykgZSB3\naGVyZSBlLm5hbWUxIGxpa2UgJyUxJyIgKwogICAgICAgICAgICAgICAgIiBv\ncmRlciBieSBlIiwKICAgICAgICAgICAgInNlbGVjdCBlLCBlLmIuaWQgIGZy\nb20gIiArCiAgICAgICAgICAgICAgICAiIEVudGl0eUFfQ29sbF9FbWJlZF9U\nb09uZSBhICIgKwogICAgICAgICAgICAgICAgIiAsIGluIChhLmVtYmVkMXMp\nIGUgd2hlcmUgZS5uYW1lMSBsaWtlICclMScgYW5kIiArCiAgICAgICAgICAg\nICAgICAiIGEuZW1iZWQxcyBJUyBOT1QgRU1QVFkgYW5kICIgKwogICAgICAg\nICAgICAgICAgIiBlLmIgSVMgTk9UIE5VTEwgIiArCiAgICAgICAgICAgICAg\nICAiIG9yZGVyIGJ5IGUiLAogICAgICAgICAgICAvLyB0aGUgZm9sbG93aW5n\nIHF1ZXJ5IHdvcmtzIGluIERCMiBidXQgbm90IGluIERlcmJ5OgogICAgICAg\nICAgICAvLyBiZWNhdXNlIERlcmJ5IHN1YnF1ZXJ5IGlzIG9ubHkgYWxsb3dl\nZCB0byAKICAgICAgICAgICAgLy8gcmV0dXJuIGEgc2luZ2xlIGNvbHVtbi4g\nCiAgICAgICAgICAgIC8qCiAgICAgICAgICAgICJzZWxlY3QgZSwgZS5iLmlk\nICBmcm9tICIgKwogICAgICAgICAgICAgICAgIiBFbnRpdHlBX0NvbGxfRW1i\nZWRfVG9PbmUgYSAiICsKICAgICAgICAgICAgICAgICIgLCBpbiAoYS5lbWJl\nZDFzKSBlIHdoZXJlICIgKwogICAgICAgICAgICAgICAgIiBleGlzdHMgKHNl\nbGVjdCBhLmVtYmVkMXMgZnJvbSAiICsKICAgICAgICAgICAgICAgICIgRW50\naXR5QV9Db2xsX0VtYmVkX1RvT25lIGEpIGFuZCAiICsKICAgICAgICAgICAg\nICAgICIgZXhpc3RzIChzZWxlY3QgZS5iIGZyb20gYS5lbWJlZDFzIGUpICIg\nKwogICAgICAgICAgICAgICAgIiBvcmRlciBieSBlIiwKICAgICAgICAgICAg\nKi8KICAgICAgICB9OwogICAgICAgIExpc3Q8T2JqZWN0W10+IHJzID0gbnVs\nbDsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHF1ZXJ5Lmxlbmd0aDsg\naSsrKSB7CiAgICAgICAgICAgIHJzID0gZW0uY3JlYXRlUXVlcnkocXVlcnlb\naV0pLmdldFJlc3VsdExpc3QoKTsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZShy\ncy5zaXplKCkgPiAwKTsKICAgICAgICAgICAgT2JqZWN0IG9iaiA9ICgoT2Jq\nZWN0W10pIHJzLmdldCgwKSlbMF07CiAgICAgICAgICAgIGFzc2VydFRydWUo\nb2JqIGluc3RhbmNlb2YgRW1iZWRfVG9PbmUpOwogICAgICAgICAgICBhc3Nl\ncnRUcnVlKCgoRW1iZWRfVG9PbmUpIG9iaikuZ2V0RW50aXR5QigpICE9IG51\nbGwpOwogICAgICAgICAgICBzd2l0Y2ggKGkpIHsKICAgICAgICAgICAgY2Fz\nZSAwOgogICAgICAgICAgICAgICAgT2JqZWN0IGIgPSAoKE9iamVjdFtdKSBy\ncy5nZXQoMCkpWzFdOwogICAgICAgICAgICAgICAgYXNzZXJ0VHJ1ZShiIGlu\nc3RhbmNlb2YgRW50aXR5QjEpOwogICAgICAgICAgICAgICAgYXNzZXJ0RXF1\nYWxzKCgoRW50aXR5QjEpIGIpLmdldElkKCksCiAgICAgICAgICAgICAgICAg\nICAgKChFbWJlZF9Ub09uZSkgb2JqKS5nZXRFbnRpdHlCKCkuZ2V0SWQoKSk7\nCiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAg\nICAgICBlbS5jbGVhcigpOwogICAgICAgIH0KICAgICAgICBFbnRpdHlUcmFu\nc2FjdGlvbiB0cmFuID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsKICAgICAgICB0\ncmFuLmJlZ2luKCk7CiAgICAgICAgUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5\nKCJzZWxlY3QgYSBmcm9tIEVudGl0eUFfQ29sbF9FbWJlZF9Ub09uZSBhIik7\nCiAgICAgICAgTGlzdDxFbnRpdHlBX0NvbGxfRW1iZWRfVG9PbmU+IGFzID0g\ncS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgZm9yIChFbnRpdHlBX0NvbGxf\nRW1iZWRfVG9PbmUgYSA6IGFzKSB7CiAgICAgICAgICAgIGNoZWNrRW50aXR5\nQV9Db2xsX0VtYmVkX1RvT25lKGEpOwogICAgICAgIH0KICAgICAgICB0cmFu\nLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgLyoK\nICAgICAqIFF1ZXJ5IEVudGl0eUFfRW1iZWRfVG9NYW55CiAgICAgKi8KICAg\nIHB1YmxpYyB2b2lkIHF1ZXJ5RW50aXR5QV9FbWJlZF9Ub01hbnkoKSB7CiAg\nICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgLy8gdGVzdCBzZWxlY3QgZW1iZWRkYWJsZQogICAg\nICAgIFN0cmluZyBxdWVyeVtdID0gewogICAgICAgICAgICAic2VsZWN0IGEu\nZW1iZWQgZnJvbSBFbnRpdHlBX0VtYmVkX1RvTWFueSBhIiwKICAgICAgICAg\nICAgInNlbGVjdCBlIGZyb20gRW50aXR5QV9FbWJlZF9Ub01hbnkgYSBqb2lu\nIGEuZW1iZWQgZSIsCiAgICAgICAgICAgICJzZWxlY3QgYiBmcm9tIEVudGl0\neUFfRW1iZWRfVG9NYW55IGEgam9pbiBhLmVtYmVkLmJzIiArCiAgICAgICAg\nICAgICAgICAiIGIiLAogICAgICAgICAgICAic2VsZWN0IGUgZnJvbSBFbnRp\ndHlBX0VtYmVkX1RvTWFueSBhIGpvaW4gYS5lbWJlZCBlICIgKwogICAgICAg\nICAgICAgICAgIiB3aGVyZSBlLm5hbWUxIGxpa2UgJyUxJyIsCiAgICAgICAg\nICAgICJzZWxlY3QgYS5lbWJlZCBmcm9tIEVudGl0eUFfRW1iZWRfVG9NYW55\nIGEgT1JERVIgQlkgYS5lbWJlZCIsCiAgICAgICAgICAgICJzZWxlY3QgZSBm\ncm9tIEVudGl0eUFfRW1iZWRfVG9NYW55IGEgam9pbiBhLmVtYmVkIGUgT1JE\nRVIgQlkgZSIsCiAgICAgICAgICAgICJzZWxlY3QgYiBmcm9tIEVudGl0eUFf\nRW1iZWRfVG9NYW55IGEgam9pbiBhLmVtYmVkLmJzIiArCiAgICAgICAgICAg\nICAgICAiIGIgT1JERVIgQlkgYiIsCiAgICAgICAgICAgICJzZWxlY3QgZSBm\ncm9tIEVudGl0eUFfRW1iZWRfVG9NYW55IGEgam9pbiBhLmVtYmVkIGUgIiAr\nCiAgICAgICAgICAgICAgICAiIFdIRVJFIGUuYnMgSVMgTk9UIEVNUFRZIE9S\nREVSIEJZIGUiLAogICAgICAgICAgICAic2VsZWN0IGEgZnJvbSBFbnRpdHlB\nX0VtYmVkX1RvTWFueSBhICIgKwogICAgICAgICAgICAgICAgIiBXSEVSRSBl\neGlzdHMgKHNlbGVjdCBhIGZyb20gRW50aXR5QV9FbWJlZF9Ub01hbnkgYSIg\nKwogICAgICAgICAgICAgICAgIiB3aGVyZSBhLmVtYmVkLmJzIElTIE5PVCBF\nTVBUWSkgT1JERVIgQlkgYSIsCiAgICAgICAgICAgICJzZWxlY3QgYSBmcm9t\nIEVudGl0eUFfRW1iZWRfVG9NYW55IGEgIiArCiAgICAgICAgICAgICAgICAi\nIFdIRVJFIGV4aXN0cyAoc2VsZWN0IGEgZnJvbSBFbnRpdHlBX0VtYmVkX1Rv\nTWFueSBhIiArCiAgICAgICAgICAgICAgICAiIHdoZXJlIGEuZW1iZWQuYnMg\nSVMgTk9UIEVNUFRZKSBPUkRFUiBCWSBhIiwKICAgICAgICAgICAgfTsKICAg\nICAgICBMaXN0IHJzID0gbnVsbDsKICAgICAgICBmb3IgKGludCBpID0gMDsg\naSA8IHF1ZXJ5Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHJzID0gZW0u\nY3JlYXRlUXVlcnkocXVlcnlbaV0pLmdldFJlc3VsdExpc3QoKTsKICAgICAg\nICAgICAgYXNzZXJ0VHJ1ZShycy5zaXplKCkgPiAwKTsKICAgICAgICAgICAg\nT2JqZWN0IG9iaiA9IHJzLmdldCgwKTsKICAgICAgICAgICAgc3dpdGNoIChp\nKSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgY2FzZSAxOgog\nICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIGNhc2UgNToKICAgICAg\nICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgYXNzZXJ0VHJ1ZShvYmog\naW5zdGFuY2VvZiBFbWJlZF9Ub01hbnkpOwogICAgICAgICAgICAgICAgYXNz\nZXJ0VHJ1ZSgoKEVtYmVkX1RvTWFueSkgb2JqKS5nZXRFbnRpdHlCcygpLnNp\nemUoKSA+IDApOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAg\nIGNhc2UgMjoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAg\nYXNzZXJ0VHJ1ZShvYmogaW5zdGFuY2VvZiBFbnRpdHlCMSk7CiAgICAgICAg\nICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAg\nICBjYXNlIDk6CiAgICAgICAgICAgICAgICBhc3NlcnRUcnVlKG9iaiBpbnN0\nYW5jZW9mIEVudGl0eUFfRW1iZWRfVG9NYW55KTsKICAgICAgICAgICAgICAg\nIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVtLmNsZWFyKCk7\nCiAgICAgICAgfQogICAgICAgIEVudGl0eVRyYW5zYWN0aW9uIHRyYW4gPSBl\nbS5nZXRUcmFuc2FjdGlvbigpOwogICAgICAgIHRyYW4uYmVnaW4oKTsKICAg\nICAgICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnkoInNlbGVjdCBhIGZyb20g\nRW50aXR5QV9FbWJlZF9Ub01hbnkgYSIpOwogICAgICAgIExpc3Q8RW50aXR5\nQV9FbWJlZF9Ub01hbnk+IGFzID0gcS5nZXRSZXN1bHRMaXN0KCk7CiAgICAg\nICAgZm9yIChFbnRpdHlBX0VtYmVkX1RvTWFueSBhIDogYXMpIHsKICAgICAg\nICAgICAgY2hlY2tFbnRpdHlBX0VtYmVkX1RvTWFueShhKTsKICAgICAgICB9\nCiAgICAgICAgdHJhbi5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwog\nICAgfQoKICAgIC8qCiAgICAgKiBRdWVyeSBFbnRpdHlBX0VtYmVkX0VtYmVk\nX1RvTWFueQogICAgICovCiAgICBwdWJsaWMgdm9pZCBxdWVyeUVudGl0eUFf\nRW1iZWRfRW1iZWRfVG9NYW55KCkgewogICAgICAgIEVudGl0eU1hbmFnZXIg\nZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIC8vIHRl\nc3Qgc2VsZWN0IGVtYmVkZGFibGUKICAgICAgICBTdHJpbmcgcXVlcnlbXSA9\nIHsKICAgICAgICAgICAgInNlbGVjdCBhLmVtYmVkIGZyb20gRW50aXR5QV9F\nbWJlZF9FbWJlZF9Ub01hbnkgYSIsCiAgICAgICAgICAgICJzZWxlY3QgYS5l\nbWJlZCBmcm9tIEVudGl0eUFfRW1iZWRfRW1iZWRfVG9NYW55IGEiICsKICAg\nICAgICAgICAgICAgICIgd2hlcmUgYS5lbWJlZC5lbWJlZC5uYW1lMSBsaWtl\nICclMScgIiwKICAgICAgICAgICAgInNlbGVjdCBhLmVtYmVkLmVtYmVkIGZy\nb20gRW50aXR5QV9FbWJlZF9FbWJlZF9Ub01hbnkgYSIsCiAgICAgICAgICAg\nICJzZWxlY3QgYiBmcm9tIEVudGl0eUFfRW1iZWRfRW1iZWRfVG9NYW55IGEg\nam9pbiBhLmVtYmVkLmVtYmVkLmJzIiArCiAgICAgICAgICAgICAgICAiIGIi\nLAogICAgICAgICAgICAic2VsZWN0IGEuZW1iZWQuZW1iZWQgZnJvbSBFbnRp\ndHlBX0VtYmVkX0VtYmVkX1RvTWFueSBhICIgKwogICAgICAgICAgICAgICAg\nIiB3aGVyZSBhLmVtYmVkLmVtYmVkLm5hbWUxIGxpa2UgJyUxJyIsCiAgICAg\nICAgICAgICJzZWxlY3QgZTIgZnJvbSBFbnRpdHlBX0VtYmVkX0VtYmVkX1Rv\nTWFueSBhICIgKwogICAgICAgICAgICAgICAgIiBsZWZ0IGpvaW4gYS5lbWJl\nZCBlMSBsZWZ0IGpvaW4gZTEuZW1iZWQgZTIiLAogICAgICAgICAgICAic2Vs\nZWN0IGUyIGZyb20gRW50aXR5QV9FbWJlZF9FbWJlZF9Ub01hbnkgYSAiICsK\nICAgICAgICAgICAgICAgICIgam9pbiBhLmVtYmVkIGUxIGpvaW4gZTEuZW1i\nZWQgZTIiLAogICAgICAgICAgICAic2VsZWN0IGEuZW1iZWQgYXMgZSBmcm9t\nIEVudGl0eUFfRW1iZWRfRW1iZWRfVG9NYW55IGEgT1JERVIgQlkgZSIsCiAg\nICAgICAgICAgICJzZWxlY3QgYS5lbWJlZC5lbWJlZCBhcyBlIGZyb20gRW50\naXR5QV9FbWJlZF9FbWJlZF9Ub01hbnkgYSAiICsKICAgICAgICAgICAgICAg\nICIgd2hlcmUgYS5lbWJlZC5lbWJlZC5uYW1lMSBsaWtlICclMScgT1JERVIg\nQlkgZSIsCiAgICAgICAgICAgICJzZWxlY3QgYS5lbWJlZCBmcm9tIEVudGl0\neUFfRW1iZWRfRW1iZWRfVG9NYW55IGEgIiArCiAgICAgICAgICAgICAgICAi\nIHdoZXJlIGEuZW1iZWQuZW1iZWQuYnMgSVMgTk9UIEVNUFRZIiwKICAgICAg\nICAgICAgInNlbGVjdCBhLmVtYmVkIGZyb20gRW50aXR5QV9FbWJlZF9FbWJl\nZF9Ub01hbnkgYSAiICsKICAgICAgICAgICAgICAgICIgd2hlcmUgZXhpc3Rz\nIChzZWxlY3QgYS5lbWJlZC5lbWJlZC5icyBmcm9tICIgKwogICAgICAgICAg\nICAgICAgIiBFbnRpdHlBX0VtYmVkX0VtYmVkX1RvTWFueSBhKSIsCiAgICAg\nICAgICAgICJzZWxlY3QgYiBmcm9tIEVudGl0eUFfRW1iZWRfRW1iZWRfVG9N\nYW55IGEgam9pbiBhLmVtYmVkLmVtYmVkLmJzIiArCiAgICAgICAgICAgICAg\nICAiIGIiLAogICAgICAgIH07CiAgICAgICAgTGlzdCBycyA9IG51bGw7CiAg\nICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBxdWVyeS5sZW5ndGg7IGkrKykg\newogICAgICAgICAgICBycyA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5W2ldKS5n\nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgICAgIGFzc2VydFRydWUocnMuc2l6\nZSgpID4gMCk7CiAgICAgICAgICAgIE9iamVjdCBvYmogPSBycy5nZXQoMCk7\nCiAgICAgICAgICAgIHN3aXRjaCAoaSkgewogICAgICAgICAgICBjYXNlIDA6\nCiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgY2FzZSA3OgogICAg\nICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAg\nICAgICAgICBhc3NlcnRUcnVlKG9iaiBpbnN0YW5jZW9mIEVtYmVkX0VtYmVk\nX1RvTWFueSk7CiAgICAgICAgICAgICAgICBhc3NlcnRUcnVlKCgoRW1iZWRf\nRW1iZWRfVG9NYW55KSBvYmopLmdldEVtYmVkKCkuZ2V0RW50aXR5QnMoKS4K\nICAgICAgICAgICAgICAgICAgICBzaXplKCkgPiAwKTsKICAgICAgICAgICAg\nICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIGNh\nc2UgNDoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBjYXNlIDY6\nCiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIGFzc2VydFRy\ndWUob2JqIGluc3RhbmNlb2YgRW1iZWRfVG9NYW55KTsKICAgICAgICAgICAg\nICAgIGFzc2VydFRydWUoKChFbWJlZF9Ub01hbnkpIG9iaikuZ2V0RW50aXR5\nQnMoKS5zaXplKCkgPiAwKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAg\nICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAg\nICAgICAgICBhc3NlcnRUcnVlKG9iaiBpbnN0YW5jZW9mIEVudGl0eUIxKTsK\nICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9ICAgICAgICAK\nICAgICAgICAgICAgZW0uY2xlYXIoKTsKICAgICAgICB9CiAgICAgICAgRW50\naXR5VHJhbnNhY3Rpb24gdHJhbiA9IGVtLmdldFRyYW5zYWN0aW9uKCk7CiAg\nICAgICAgdHJhbi5iZWdpbigpOwogICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVh\ndGVRdWVyeSgic2VsZWN0IGEgZnJvbSBFbnRpdHlBX0VtYmVkX0VtYmVkX1Rv\nTWFueSBhIik7CiAgICAgICAgTGlzdDxFbnRpdHlBX0VtYmVkX0VtYmVkX1Rv\nTWFueT4gYXMgPSBxLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBmb3IgKEVu\ndGl0eUFfRW1iZWRfRW1iZWRfVG9NYW55IGEgOiBhcykgewogICAgICAgICAg\nICBjaGVja0VudGl0eUFfRW1iZWRfRW1iZWRfVG9NYW55KGEpOwogICAgICAg\nIH0KICAgICAgICB0cmFuLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7\nCiAgICB9CgogICAgLyoKICAgICAqIFF1ZXJ5IEVudGl0eUFfRW1iZWRfQ29s\nbF9JbnRlZ2VyCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHF1ZXJ5RW50aXR5\nQV9FbWJlZF9Db2xsX0ludGVnZXIoKSB7CiAgICAgICAgRW50aXR5TWFuYWdl\nciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgLy8g\ndGVzdCBzZWxlY3QgZW1iZWQgb2JqZWN0IGZyb20gZWxlbWVudCBjb2xsZWN0\naW9uIGluIGVtYmVkZGFibGUgb2JqZWN0CiAgICAgICAgU3RyaW5nW10gcXVl\ncnkgPSB7CiAgICAgICAgICAgICJzZWxlY3QgZSwgYS5pZCBmcm9tICIgKwog\nICAgICAgICAgICAgICAgIiBFbnRpdHlBX0VtYmVkX0NvbGxfSW50ZWdlciBh\nICIgKwogICAgICAgICAgICAgICAgIiAsIGluIChhLmVtYmVkLm90aGVySW50\nVmFscykgZSBvcmRlciBieSBlIiwKICAgICAgICAgICAgInNlbGVjdCBlLCBh\nLmlkIGZyb20gIiArCiAgICAgICAgICAgICAgICAiIEVudGl0eUFfRW1iZWRf\nQ29sbF9JbnRlZ2VyIGEgIiArCiAgICAgICAgICAgICAgICAiICwgaW4gKGEu\nZW1iZWQub3RoZXJJbnRWYWxzKSBlIG9yZGVyIGJ5IGUiLAogICAgICAgICAg\nICAic2VsZWN0IGUsIGEuaWQgZnJvbSAiICsKICAgICAgICAgICAgICAgICIg\nRW50aXR5QV9FbWJlZF9Db2xsX0ludGVnZXIgYSAiICsKICAgICAgICAgICAg\nICAgICIgLCBpbiAoYS5lbWJlZC5vdGhlckludFZhbHMpIGUgb3JkZXIgYnkg\nYS5pZCIsCiAgICAgICAgICAgICJzZWxlY3QgZSwgYS5lbWJlZC5pbnRWYWwx\nIGZyb20gRW50aXR5QV9FbWJlZF9Db2xsX0ludGVnZXIgYSAiICsKICAgICAg\nICAgICAgICAgICIgLCBpbiAoYS5lbWJlZC5vdGhlckludFZhbHMpIGUgb3Jk\nZXIgYnkgYS5pZCIsCiAgICAgICAgICAgICJzZWxlY3QgZSwgYS5lbWJlZC5p\nbnRWYWwyIGZyb20gIiArCiAgICAgICAgICAgICAgICAiIEVudGl0eUFfRW1i\nZWRfQ29sbF9JbnRlZ2VyIGEgIiArCiAgICAgICAgICAgICAgICAiICwgaW4g\nKGEuZW1iZWQub3RoZXJJbnRWYWxzKSBlIG9yZGVyIGJ5IGUiLAogICAgICAg\nICAgICAic2VsZWN0IGUsIGEuZW1iZWQuaW50VmFsMiBmcm9tICIgKwogICAg\nICAgICAgICAgICAgIiBFbnRpdHlBX0VtYmVkX0NvbGxfSW50ZWdlciBhICIg\nKwogICAgICAgICAgICAgICAgIiAsIGluIChhLmVtYmVkLm90aGVySW50VmFs\ncykgZSAiICsKICAgICAgICAgICAgICAgICIgV0hFUkUgYS5lbWJlZC5vdGhl\nckludFZhbHMgSVMgTk9UIEVNUFRZIG9yZGVyIGJ5IGUiLAogICAgICAgICAg\nICAic2VsZWN0IGUsIGEuZW1iZWQuaW50VmFsMiBmcm9tICIgKwogICAgICAg\nICAgICAgICAgIiBFbnRpdHlBX0VtYmVkX0NvbGxfSW50ZWdlciBhICIgKwog\nICAgICAgICAgICAgICAgIiAsIGluIChhLmVtYmVkLm90aGVySW50VmFscykg\nZSAiICsKICAgICAgICAgICAgICAgICIgV0hFUkUgZXhpc3RzIChzZWxlY3Qg\nYSBmcm9tICIgKwogICAgICAgICAgICAgICAgIiBFbnRpdHlBX0VtYmVkX0Nv\nbGxfSW50ZWdlciBhICIgKwogICAgICAgICAgICAgICAgIiAsIGluIChhLmVt\nYmVkLm90aGVySW50VmFscykgZSAiICsKICAgICAgICAgICAgICAgICIgd2hl\ncmUgZSA+IDApIG9yZGVyIGJ5IGUiLAogICAgICAgICAgICAic2VsZWN0IGUs\nIGEwLmludFZhbDIgZnJvbSBFbnRpdHlBX0VtYmVkX0NvbGxfSW50ZWdlciBh\nICIgKwogICAgICAgICAgICAgICAgIkpPSU4gYS5lbWJlZCBhMCBKT0lOIGEw\nLm90aGVySW50VmFscyBlIFdIRVJFIGV4aXN0cyAoc2VsZWN0IGEgZnJvbSAi\nICsKICAgICAgICAgICAgICAgICIgRW50aXR5QV9FbWJlZF9Db2xsX0ludGVn\nZXIgYSBKT0lOIGEuZW1iZWQgYTAgSk9JTiBhMC5vdGhlckludFZhbHMgZSAi\nICsKICAgICAgICAgICAgICAgICIgd2hlcmUgZSA+IDApIG9yZGVyIGJ5IGUi\nLAogICAgICAgIH07CiAgICAgICAgTGlzdDxPYmplY3RbXT4gcnMgPSBudWxs\nOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcXVlcnkubGVuZ3RoOyBp\nKyspIHsKICAgICAgICAgICAgcnMgPSBlbS5jcmVhdGVRdWVyeShxdWVyeVtp\nXSkuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgICAgICBhc3NlcnRUcnVlKHJz\nLnNpemUoKSA+IDApOwogICAgICAgICAgICBPYmplY3Qgb2JqID0gKChPYmpl\nY3RbXSkgcnMuZ2V0KDApKVswXTsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZShv\nYmogaW5zdGFuY2VvZiBJbnRlZ2VyKTsKICAgICAgICAgICAgZW0uY2xlYXIo\nKTsKICAgICAgICB9CgogICAgICAgIEVudGl0eVRyYW5zYWN0aW9uIHRyYW4g\nPSBlbS5nZXRUcmFuc2FjdGlvbigpOwogICAgICAgIHRyYW4uYmVnaW4oKTsK\nICAgICAgICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnkoInNlbGVjdCBhIGZy\nb20gRW50aXR5QV9FbWJlZF9Db2xsX0ludGVnZXIgYSIpOwogICAgICAgIExp\nc3Q8RW50aXR5QV9FbWJlZF9Db2xsX0ludGVnZXI+IGFzID0gcS5nZXRSZXN1\nbHRMaXN0KCk7CiAgICAgICAgZm9yIChFbnRpdHlBX0VtYmVkX0NvbGxfSW50\nZWdlciBhIDogYXMpIHsKICAgICAgICAgICAgY2hlY2tFbnRpdHlBX0VtYmVk\nX0NvbGxfSW50ZWdlcihhKTsKICAgICAgICB9CiAgICAgICAgdHJhbi5jb21t\naXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIC8qCiAgICAg\nKiBRdWVyeSBFbnRpdHlBX0VtYmVkX0VtYmVkCiAgICAgKi8KICAgIHB1Ymxp\nYyB2b2lkIHF1ZXJ5RW50aXR5QV9FbWJlZF9FbWJlZCgpIHsKICAgICAgICBF\nbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsK\nICAgICAgICAvLyB0ZXN0IHNlbGVjdCBlbWJlZGRhYmxlCiAgICAgICAgU3Ry\naW5nIHF1ZXJ5W10gPSB7CiAgICAgICAgICAgICJzZWxlY3QgYS5lbWJlZCBm\ncm9tIEVudGl0eUFfRW1iZWRfRW1iZWQgYSIsCiAgICAgICAgICAgICJzZWxl\nY3QgYS5lbWJlZC5lbWJlZCBmcm9tIEVudGl0eUFfRW1iZWRfRW1iZWQgYSIs\nCiAgICAgICAgICAgICJzZWxlY3QgYS5lbWJlZCBhcyBlIGZyb20gRW50aXR5\nQV9FbWJlZF9FbWJlZCBhIE9SREVSIEJZIGUiLAogICAgICAgIH07CiAgICAg\nICAgU3RyaW5nIHF1ZXJ5MltdID0gewogICAgICAgICAgICAic2VsZWN0IGEu\nZW1iZWQgZnJvbSBFbnRpdHlBX0VtYmVkX0VtYmVkIGEgV0hFUkUgYS5lbWJl\nZC5lbWJlZCAiICsKICAgICAgICAgICAgICAgICIgSVMgTk9UIE5VTEwiLAog\nICAgICAgICAgICAic2VsZWN0IGEuZW1iZWQgZnJvbSBFbnRpdHlBX0VtYmVk\nX0VtYmVkIGEgIiArICIgV0hFUkUgZXhpc3RzICIgKwogICAgICAgICAgICAg\nICAgIiAoc2VsZWN0IGEuZW1iZWQuZW1iZWQgZnJvbSBFbnRpdHlBX0VtYmVk\nX0VtYmVkIGEiICsKICAgICAgICAgICAgICAgICIgd2hlcmUgYS5lbWJlZCBJ\nUyBOT1QgTlVMTCkgIiwKICAgICAgICB9OwogICAgICAgIExpc3QgcnMgPSBu\ndWxsOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcXVlcnkubGVuZ3Ro\nOyBpKyspIHsKICAgICAgICAgICAgcnMgPSBlbS5jcmVhdGVRdWVyeShxdWVy\neVtpXSkuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgICAgICBhc3NlcnRUcnVl\nKHJzLnNpemUoKSA+IDApOwogICAgICAgICAgICBzd2l0Y2ggKGkpIHsKICAg\nICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAg\nICAgICAgICBhc3NlcnRUcnVlKHJzLmdldCgwKSBpbnN0YW5jZW9mIEVtYmVk\nX0VtYmVkKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBj\nYXNlIDE6CiAgICAgICAgICAgICAgICBhc3NlcnRUcnVlKHJzLmdldCgwKSBp\nbnN0YW5jZW9mIEVtYmVkKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAg\nICAgICAgICB9CiAgICAgICAgICAgIGVtLmNsZWFyKCk7CiAgICAgICAgfQog\nICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcXVlcnkyLmxlbmd0aDsgaSsr\nKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBycyA9IGVt\nLmNyZWF0ZVF1ZXJ5KHF1ZXJ5MltpXSkuZ2V0UmVzdWx0TGlzdCgpOwogICAg\nICAgICAgICB9IGNhdGNoKEFyZ3VtZW50RXhjZXB0aW9uIGUpIHsKICAgICAg\nICAgICAgICAgIC8vIGFzIGV4cGVjdGVkOiBjb21wYXJpc29uIG92ZXIgZW1i\nZWRkZWQgb2JqZWN0IGlzIG5vdCBhbGxvd2VkCiAgICAgICAgICAgIH0KICAg\nICAgICB9CiAgICAgICAgRW50aXR5VHJhbnNhY3Rpb24gdHJhbiA9IGVtLmdl\ndFRyYW5zYWN0aW9uKCk7CiAgICAgICAgdHJhbi5iZWdpbigpOwogICAgICAg\nIFF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeSgic2VsZWN0IGEgZnJvbSBFbnRp\ndHlBX0VtYmVkX0VtYmVkIGEiKTsKICAgICAgICBMaXN0PEVudGl0eUFfRW1i\nZWRfRW1iZWQ+IGFzID0gcS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgZm9y\nIChFbnRpdHlBX0VtYmVkX0VtYmVkIGEgOiBhcykgewogICAgICAgICAgICBj\naGVja0VudGl0eUFfRW1iZWRfRW1iZWQoYSk7CiAgICAgICAgfQogICAgICAg\nIHRyYW4uY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAg\nICAvKgogICAgICogUXVlcnkgRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVkCiAg\nICAgKi8KICAgIHB1YmxpYyB2b2lkIHF1ZXJ5RW50aXR5QV9Db2xsX0VtYmVk\nX0VtYmVkKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3Jl\nYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIC8vIHRlc3Qgc2VsZWN0IGVt\nYmVkIG9iamVjdCBmcm9tIGVsZW1lbnQgY29sbGVjdGlvbgogICAgICAgIFN0\ncmluZ1tdIHF1ZXJ5ID0gewogICAgICAgICAgICAic2VsZWN0IGUsIGUuaW50\nVmFsMSwgZS5lbWJlZC5pbnRWYWwyIGZyb20gIiArCiAgICAgICAgICAgICAg\nICAiIEVudGl0eUFfQ29sbF9FbWJlZF9FbWJlZCBhICIgKwogICAgICAgICAg\nICAgICAgIiAsIGluIChhLmVtYmVkcykgZSBvcmRlciBieSBlLmludFZhbDMi\nLAogICAgICAgICAgICAic2VsZWN0IGUsIGUuaW50VmFsMSwgZS5lbWJlZC5p\nbnRWYWwyIGZyb20gIiArCiAgICAgICAgICAgICAgICAiIEVudGl0eUFfQ29s\nbF9FbWJlZF9FbWJlZCBhICIgKwogICAgICAgICAgICAgICAgIiAsIGluIChh\nLmVtYmVkcykgZSBvcmRlciBieSBlLmludFZhbDMiLAogICAgICAgICAgICAi\nc2VsZWN0IGUsIGEuaWQgZnJvbSBFbnRpdHlBX0NvbGxfRW1iZWRfRW1iZWQg\nYSAiICsKICAgICAgICAgICAgICAgICIgLCBpbiAoYS5lbWJlZHMpIGUgb3Jk\nZXIgYnkgYS5pZCIsCiAgICAgICAgICAgICJzZWxlY3QgZSwgYS5pZCBmcm9t\nIEVudGl0eUFfQ29sbF9FbWJlZF9FbWJlZCBhICIgKwogICAgICAgICAgICAg\nICAgIiAsIGluIChhLmVtYmVkcykgZSBvcmRlciBieSBlIGRlc2MiLAogICAg\nICAgICAgICAic2VsZWN0IGUsIGUuaW50VmFsMSwgZS5lbWJlZC5pbnRWYWwy\nIGZyb20gIiArCiAgICAgICAgICAgICAgICAiIEVudGl0eUFfQ29sbF9FbWJl\nZF9FbWJlZCBhICIgKwogICAgICAgICAgICAgICAgIiAsIGluIChhLmVtYmVk\ncykgZSBXSEVSRSBhLmVtYmVkcyBJUyBOT1QgRU1QVFkgIiArCiAgICAgICAg\nICAgICAgICAiIG9yZGVyIGJ5IGUuaW50VmFsMyIsCiAgICAgICAgICAgIC8v\nIHRoZSBmb2xsb3dpbmcgcXVlcnkgd29ya3MgaW4gREIyIGJ1dCBub3QgaW4g\nRGVyYnksCiAgICAgICAgICAgIC8vIGJlY2F1c2UgRGVyYnkgc3VicXVlcnkg\naXMgb25seSBhbGxvd2VkIHRvIAogICAgICAgICAgICAvLyByZXR1cm4gYSBz\naW5nbGUgY29sdW1uLiAKICAgICAgICAgICAgLyoKICAgICAgICAgICAgInNl\nbGVjdCBlLCBlLmludFZhbDEsIGUuZW1iZWQuaW50VmFsMiBmcm9tICIgKwog\nICAgICAgICAgICAgICAgIiBFbnRpdHlBX0NvbGxfRW1iZWRfRW1iZWQgYSAi\nICsKICAgICAgICAgICAgICAgICIgLCBpbiAoYS5lbWJlZHMpIGUgV0hFUkUg\nZXhpc3RzIChzZWxlY3QgYS5lbWJlZHMgIiArCiAgICAgICAgICAgICAgICAi\nIGZyb20gRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVkIGEpICIgKwogICAgICAg\nICAgICAgICAgIiBvcmRlciBieSBlLmludFZhbDMiLAogICAgICAgICAgICAq\nLwogICAgICAgIH07CiAgICAgICAgU3RyaW5nW10gcXVlcnkyID0gewogICAg\nICAgICAgICAic2VsZWN0IGUsIGUuaW50VmFsMSwgZS5lbWJlZC5pbnRWYWwy\nIGZyb20gIiArCiAgICAgICAgICAgICAgICAiIEVudGl0eUFfQ29sbF9FbWJl\nZF9FbWJlZCBhICIgKwogICAgICAgICAgICAgICAgIiAsIGluIChhLmVtYmVk\ncykgZSBXSEVSRSBlLmludFZhbDEgPCBBTlkgKHNlbGVjdCBlMi5pbnRWYWwy\nICIgKwogICAgICAgICAgICAgICAgIiBmcm9tIEVudGl0eUFfQ29sbF9FbWJl\nZF9FbWJlZCBhMSwgaW4gKGExLmVtYmVkcykgZTIpICIgKwogICAgICAgICAg\nICAgICAgIiBvcmRlciBieSBlLmludFZhbDMiLAogICAgICAgICAgICAic2Vs\nZWN0IGUsIGUuaW50VmFsMSwgZS5lbWJlZC5pbnRWYWwyIGZyb20gIiArCiAg\nICAgICAgICAgICAgICAiIEVudGl0eUFfQ29sbF9FbWJlZF9FbWJlZCBhICIg\nKwogICAgICAgICAgICAgICAgIiAsIGluIChhLmVtYmVkcykgZSBXSEVSRSBl\nLmludFZhbDEgPCBBTEwgKHNlbGVjdCBlMi5pbnRWYWwyICIgKwogICAgICAg\nICAgICAgICAgIiBmcm9tIEVudGl0eUFfQ29sbF9FbWJlZF9FbWJlZCBhMSwg\naW4gKGExLmVtYmVkcykgZTIpICIgKwogICAgICAgICAgICAgICAgIiBvcmRl\nciBieSBlLmludFZhbDMiLAogICAgICAgICAgICAic2VsZWN0IGUsIGUuaW50\nVmFsMSwgZS5lbWJlZC5pbnRWYWwyIGZyb20gIiArCiAgICAgICAgICAgICAg\nICAiIEVudGl0eUFfQ29sbF9FbWJlZF9FbWJlZCBhICIgKwogICAgICAgICAg\nICAgICAgIiAsIGluIChhLmVtYmVkcykgZSBXSEVSRSBlLmludFZhbDEgPD0g\nU09NRSAiICsKICAgICAgICAgICAgICAgICIgKHNlbGVjdCBlMi5pbnRWYWwy\nICIgKwogICAgICAgICAgICAgICAgIiBmcm9tIEVudGl0eUFfQ29sbF9FbWJl\nZF9FbWJlZCBhMSwgaW4gKGExLmVtYmVkcykgZTIpICIgKwogICAgICAgICAg\nICAgICAgIiBvcmRlciBieSBlLmludFZhbDMiLAogICAgICAgICAgICAic2Vs\nZWN0IGUsIGUuaW50VmFsMSwgZS5lbWJlZC5pbnRWYWwyIGZyb20gIiArCiAg\nICAgICAgICAgICAgICAiIEVudGl0eUFfQ29sbF9FbWJlZF9FbWJlZCBhICIg\nKwogICAgICAgICAgICAgICAgIiAsIGluIChhLmVtYmVkcykgZSBXSEVSRSBl\nLmludFZhbDEgPiBBTEwgKHNlbGVjdCBlMi5pbnRWYWwyICIgKwogICAgICAg\nICAgICAgICAgIiBmcm9tIEVudGl0eUFfQ29sbF9FbWJlZF9FbWJlZCBhMSwg\naW4gKGExLmVtYmVkcykgZTIpICIgKwogICAgICAgICAgICAgICAgIiBvcmRl\nciBieSBlLmludFZhbDMiLAogICAgICAgICAgICAvLyBub24tY29yZWxhdGVk\nIHN1YnF1ZXJ5OgogICAgICAgICAgICAvLyBGaXhlZCBpbiBPUEVOSlBBLTEx\nODU6IGtub3duIHByb2JsZW0gaW4gdGFibGUgYWxpYXMgcmVzb2x1dGlvbiBm\nb3Igc3VicXVlcnkKICAgICAgICAgICAgLy8gICAgICAgdGhlIGdlbmFyYXRl\nZCBTUUwgc3VicXVlcnkgc2hvdWxkIGJlIG5vbi1jb3JlbGF0ZWQsCiAgICAg\nICAgICAgIC8vICAgICAgIGJ1dCBnZW5lcmF0ZWQgY29yZWxhdGVkIHN1YnF1\nZXJ5LgogICAgICAgICAgICAic2VsZWN0IGUsIGUuaW50VmFsMSwgZS5lbWJl\nZC5pbnRWYWwyIGZyb20gIiArCiAgICAgICAgICAgICAgICAiIEVudGl0eUFf\nQ29sbF9FbWJlZF9FbWJlZCBhICIgKwogICAgICAgICAgICAgICAgIiAsIGlu\nIChhLmVtYmVkcykgZSBXSEVSRSBlLmludFZhbDEgPCBBTlkgKHNlbGVjdCBl\nLmludFZhbDIgIiArCiAgICAgICAgICAgICAgICAiIGZyb20gRW50aXR5QV9D\nb2xsX0VtYmVkX0VtYmVkIGEsIGluIChhLmVtYmVkcykgZSkgIiArCiAgICAg\nICAgICAgICAgICAiIG9yZGVyIGJ5IGUuaW50VmFsMyIsCiAgICAgICAgICAg\nICJzZWxlY3QgZSwgZS5pbnRWYWwxLCBlLmVtYmVkLmludFZhbDIgZnJvbSAi\nICsKICAgICAgICAgICAgICAgICIgRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVk\nIGEgIiArCiAgICAgICAgICAgICAgICAiICwgaW4gKGEuZW1iZWRzKSBlIFdI\nRVJFIGUuaW50VmFsMSA8IEFMTCAoc2VsZWN0IGUuaW50VmFsMiAiICsKICAg\nICAgICAgICAgICAgICIgZnJvbSBFbnRpdHlBX0NvbGxfRW1iZWRfRW1iZWQg\nYSwgaW4gKGEuZW1iZWRzKSBlKSAiICsKICAgICAgICAgICAgICAgICIgb3Jk\nZXIgYnkgZS5pbnRWYWwzIiwKICAgICAgICAgICAgInNlbGVjdCBlLCBlLmlu\ndFZhbDEsIGUuZW1iZWQuaW50VmFsMiBmcm9tICIgKwogICAgICAgICAgICAg\nICAgIiBFbnRpdHlBX0NvbGxfRW1iZWRfRW1iZWQgYSAiICsKICAgICAgICAg\nICAgICAgICIgLCBpbiAoYS5lbWJlZHMpIGUgV0hFUkUgZS5pbnRWYWwxIDw9\nIFNPTUUgIiArCiAgICAgICAgICAgICAgICAiIChzZWxlY3QgZS5pbnRWYWwy\nICIgKwogICAgICAgICAgICAgICAgIiBmcm9tIEVudGl0eUFfQ29sbF9FbWJl\nZF9FbWJlZCBhLCBpbiAoYS5lbWJlZHMpIGUpICIgKwogICAgICAgICAgICAg\nICAgIiBvcmRlciBieSBlLmludFZhbDMiLAogICAgICAgICAgICAic2VsZWN0\nIGUsIGUuaW50VmFsMSwgZS5lbWJlZC5pbnRWYWwyIGZyb20gIiArCiAgICAg\nICAgICAgICAgICAiIEVudGl0eUFfQ29sbF9FbWJlZF9FbWJlZCBhICIgKwog\nICAgICAgICAgICAgICAgIiAsIGluIChhLmVtYmVkcykgZSBXSEVSRSBlLmlu\ndFZhbDEgPiBBTEwgKHNlbGVjdCBlLmludFZhbDIgIiArCiAgICAgICAgICAg\nICAgICAiIGZyb20gRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVkIGEsIGluIChh\nLmVtYmVkcykgZSkgIiArCiAgICAgICAgICAgICAgICAiIG9yZGVyIGJ5IGUu\naW50VmFsMyIsCiAgICAgICAgICAgIC8vIGNvcmVsYXRlZCBzdWJxdWVyeToK\nICAgICAgICAgICAgLy8gRml4ZWQgaW4gT1BFTkpQQS0xMTg1OiBrbm93biBw\ncm9ibGVtIGluIHRhYmxlIGFsaWFzIHJlc29sdXRpb24gZm9yIHN1YnF1ZXJ5\nCiAgICAgICAgICAgIC8vICAgICAgIHRoZSBnZW5hcmF0ZWQgU1FMIHN1YnF1\nZXJ5IHNob3VsZCBiZSBjb3JlbGF0ZWQsCiAgICAgICAgICAgIC8vICAgICAg\nIGJ1dCBnZW5lcmF0ZWQgbm9uLWNvcmVsYXRlZCBzdWJxdWVyeS4KICAgICAg\nICAgICAgInNlbGVjdCBlLCBlLmludFZhbDEsIGUuZW1iZWQuaW50VmFsMiBm\ncm9tICIgKwogICAgICAgICAgICAgICAgIiBFbnRpdHlBX0NvbGxfRW1iZWRf\nRW1iZWQgYSAiICsKICAgICAgICAgICAgICAgICIgLCBpbiAoYS5lbWJlZHMp\nIGUgV0hFUkUgZS5pbnRWYWwxIDwgQU5ZIChzZWxlY3QgZTIuaW50VmFsMiAi\nICsKICAgICAgICAgICAgICAgICIgZnJvbSBpbihhLmVtYmVkcykgZTIpICIg\nKwogICAgICAgICAgICAgICAgIiBvcmRlciBieSBlLmludFZhbDMiLAogICAg\nICAgICAgICAic2VsZWN0IGUsIGUuaW50VmFsMSwgZS5lbWJlZC5pbnRWYWwy\nIGZyb20gIiArCiAgICAgICAgICAgICAgICAiIEVudGl0eUFfQ29sbF9FbWJl\nZF9FbWJlZCBhICIgKwogICAgICAgICAgICAgICAgIiAsIGluIChhLmVtYmVk\ncykgZSBXSEVSRSBlLmludFZhbDEgPCBBTEwgKHNlbGVjdCBlMi5pbnRWYWwy\nICIgKwogICAgICAgICAgICAgICAgIiBmcm9tIGEuZW1iZWRzIGUyKSAiICsK\nICAgICAgICAgICAgICAgICIgb3JkZXIgYnkgZS5pbnRWYWwzIiwKICAgICAg\nICAgICAgInNlbGVjdCBlLCBlLmludFZhbDEsIGUuZW1iZWQuaW50VmFsMiBm\ncm9tICIgKwogICAgICAgICAgICAgICAgIiBFbnRpdHlBX0NvbGxfRW1iZWRf\nRW1iZWQgYSAiICsKICAgICAgICAgICAgICAgICIgLCBpbiAoYS5lbWJlZHMp\nIGUgV0hFUkUgZS5pbnRWYWwxIDw9IFNPTUUgIiArCiAgICAgICAgICAgICAg\nICAiIChzZWxlY3QgZTIuaW50VmFsMiAiICsKICAgICAgICAgICAgICAgICIg\nZnJvbSBpbihhLmVtYmVkcykgZTIpICIgKwogICAgICAgICAgICAgICAgIiBv\ncmRlciBieSBlLmludFZhbDMiLAogICAgICAgICAgICAic2VsZWN0IGUsIGUu\naW50VmFsMSwgZS5lbWJlZC5pbnRWYWwyIGZyb20gIiArCiAgICAgICAgICAg\nICAgICAiIEVudGl0eUFfQ29sbF9FbWJlZF9FbWJlZCBhICIgKwogICAgICAg\nICAgICAgICAgIiAsIGluIChhLmVtYmVkcykgZSBXSEVSRSBlLmludFZhbDEg\nPiBBTEwgKHNlbGVjdCBlMi5pbnRWYWwyICIgKwogICAgICAgICAgICAgICAg\nIiBmcm9tIGEuZW1iZWRzIGUyKSAiICsKICAgICAgICAgICAgICAgICIgb3Jk\nZXIgYnkgZS5pbnRWYWwzIiwKICAgICAgICB9OwogICAgICAgIFN0cmluZ1td\nIHF1ZXJ5MyA9IHsKICAgICAgICAgICAgLy8gcXVlcnkgd2l0aCBwYXJhbWV0\nZXIgb2YgZW1iZWRkYWJsZSBvYmplY3QKICAgICAgICAgICAgInNlbGVjdCBl\nLCBlLmludFZhbDEsIGUuZW1iZWQuaW50VmFsMiBmcm9tICIgKwogICAgICAg\nICAgICAgICAgIiBFbnRpdHlBX0NvbGxfRW1iZWRfRW1iZWQgYSAiICsKICAg\nICAgICAgICAgICAgICIgLCBpbiAoYS5lbWJlZHMpIGUgV0hFUkUgPzEgTUVN\nQkVSIE9GIGEuZW1iZWRzICIgKwogICAgICAgICAgICAgICAgIiBvcmRlciBi\neSBlLmludFZhbDMiLAogICAgICAgICAgICAic2VsZWN0IGUsIGUuaW50VmFs\nMSwgZS5lbWJlZC5pbnRWYWwyIGZyb20gIiArCiAgICAgICAgICAgICAgICAi\nIEVudGl0eUFfQ29sbF9FbWJlZF9FbWJlZCBhICIgKwogICAgICAgICAgICAg\nICAgIiBsZWZ0IGpvaW4gYS5lbWJlZHMgZSBXSEVSRSA/MSBNRU1CRVIgT0Yg\nYS5lbWJlZHMgIiArCiAgICAgICAgICAgICAgICAiIG9yZGVyIGJ5IGUuaW50\nVmFsMyIsCiAgICAgICAgICAgICJzZWxlY3QgZSwgZS5pbnRWYWwxLCBlLmVt\nYmVkLmludFZhbDIgZnJvbSAiICsKICAgICAgICAgICAgICAgICIgRW50aXR5\nQV9Db2xsX0VtYmVkX0VtYmVkIGEgIiArCiAgICAgICAgICAgICAgICAiICwg\naW4gKGEuZW1iZWRzKSBlIFdIRVJFID8xID0gZSAiICsKICAgICAgICAgICAg\nICAgICIgb3JkZXIgYnkgZS5pbnRWYWwzIiwKICAgICAgICB9OwoKICAgICAg\nICBMaXN0IHJzID0gbnVsbDsKICAgICAgICBPYmplY3Qgb2JqID0gbnVsbDsK\nICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHF1ZXJ5Lmxlbmd0aDsgaSsr\nKSB7CiAgICAgICAgICAgIHJzID0gZW0uY3JlYXRlUXVlcnkocXVlcnlbaV0p\nLmdldFJlc3VsdExpc3QoKTsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZShycy5z\naXplKCkgPiAwKTsKICAgICAgICAgICAgb2JqID0gKChPYmplY3RbXSkgcnMu\nZ2V0KDApKVswXTsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZShvYmogaW5zdGFu\nY2VvZiBFbWJlZF9FbWJlZCk7CiAgICAgICAgfQogICAgICAgIGZvciAoaW50\nIGkgPSAwOyBpIDwgcXVlcnkyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAg\nIHJzID0gZW0uY3JlYXRlUXVlcnkocXVlcnkyW2ldKS5nZXRSZXN1bHRMaXN0\nKCk7CiAgICAgICAgICAgIGlmIChycy5zaXplKCkgPiAwKSB7CiAgICAgICAg\nICAgICAgICBvYmogPSAoKE9iamVjdFtdKSBycy5nZXQoMCkpWzBdOwogICAg\nICAgICAgICAgICAgYXNzZXJ0VHJ1ZShvYmogaW5zdGFuY2VvZiBFbWJlZF9F\nbWJlZCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZm9yIChp\nbnQgaSA9IDA7IGkgPCBxdWVyeTMubGVuZ3RoOyBpKyspIHsKICAgICAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgcnMgPSBlbS5jcmVhdGVRdWVyeShxdWVy\neTNbaV0pLnNldFBhcmFtZXRlcigxLCBvYmopLmdldFJlc3VsdExpc3QoKTsK\nICAgICAgICAgICAgfSBjYXRjaChBcmd1bWVudEV4Y2VwdGlvbiBlKSB7CiAg\nICAgICAgICAgICAgICAvLyBhcyBleHBlY3RlZDogY29tcGFyaXNvbiBvdmVy\nIGVtYmVkZGVkIG9iamVjdCBpcyBub3QgYWxsb3dlZAogICAgICAgICAgICB9\nCiAgICAgICAgfQoKICAgICAgICBlbS5jbGVhcigpOwoKICAgICAgICBFbnRp\ndHlUcmFuc2FjdGlvbiB0cmFuID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsKICAg\nICAgICB0cmFuLmJlZ2luKCk7CiAgICAgICAgUXVlcnkgcSA9IGVtLmNyZWF0\nZVF1ZXJ5KCJzZWxlY3QgYSBmcm9tIEVudGl0eUFfQ29sbF9FbWJlZF9FbWJl\nZCBhIik7CiAgICAgICAgTGlzdDxFbnRpdHlBX0NvbGxfRW1iZWRfRW1iZWQ+\nIGFzID0gcS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgZm9yIChFbnRpdHlB\nX0NvbGxfRW1iZWRfRW1iZWQgYSA6IGFzKSB7CiAgICAgICAgICAgIGNoZWNr\nRW50aXR5QV9Db2xsX0VtYmVkX0VtYmVkKGEpOwogICAgICAgIH0KICAgICAg\nICB0cmFuLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9Cgog\nICAgLyoKICAgICAqIFF1ZXJ5IEVudGl0eUFfRW1iZWRfQ29sbF9FbWJlZAog\nICAgICovCiAgICBwdWJsaWMgdm9pZCBxdWVyeUVudGl0eUFfRW1iZWRfQ29s\nbF9FbWJlZCgpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNy\nZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICAvLyB0ZXN0IHNlbGVjdCBl\nbWJlZCBvYmplY3QgZnJvbSBlbGVtZW50IGNvbGxlY3Rpb24gaW4gZW1iZWRk\nYWJsZSBvYmplY3QKICAgICAgICBTdHJpbmdbXSBxdWVyeSA9IHsKICAgICAg\nICAgICAgInNlbGVjdCBlLCBlLmludFZhbDEsIGUuaW50VmFsMiBmcm9tICIg\nKwogICAgICAgICAgICAgICAgIiBFbnRpdHlBX0VtYmVkX0NvbGxfRW1iZWQg\nYSAiICsKICAgICAgICAgICAgICAgICIgLCBpbiAoYS5lbWJlZC5lbWJlZHMp\nIGUgb3JkZXIgYnkgZSIsCiAgICAgICAgICAgICJzZWxlY3QgZSwgZS5pbnRW\nYWwxIGZyb20gIiArCiAgICAgICAgICAgICAgICAiIEVudGl0eUFfRW1iZWRf\nQ29sbF9FbWJlZCBhICIgKwogICAgICAgICAgICAgICAgIiAsIGluIChhLmVt\nYmVkLmVtYmVkcykgZSBvcmRlciBieSBlLmludFZhbDMiLAogICAgICAgICAg\nICAic2VsZWN0IGUsIGEuaWQgZnJvbSBFbnRpdHlBX0VtYmVkX0NvbGxfRW1i\nZWQgYSAiICsKICAgICAgICAgICAgICAgICIgLCBpbiAoYS5lbWJlZC5lbWJl\nZHMpIGUgb3JkZXIgYnkgYS5pZCIsCiAgICAgICAgICAgICJzZWxlY3QgZSwg\nZS5pbnRWYWwxLCBlLmludFZhbDIgZnJvbSAiICsKICAgICAgICAgICAgICAg\nICIgRW50aXR5QV9FbWJlZF9Db2xsX0VtYmVkIGEgIiArCiAgICAgICAgICAg\nICAgICAiICwgaW4gKGEuZW1iZWQuZW1iZWRzKSBlIG9yZGVyIGJ5IGUuaW50\nVmFsMyIsCiAgICAgICAgICAgICJzZWxlY3QgZSwgZS5pbnRWYWwxLCBlLmlu\ndFZhbDIgZnJvbSAiICsKICAgICAgICAgICAgICAgICIgRW50aXR5QV9FbWJl\nZF9Db2xsX0VtYmVkIGEgIiArCiAgICAgICAgICAgICAgICAiICwgaW4gKGEu\nZW1iZWQuZW1iZWRzKSBlIHdoZXJlIGEuZW1iZWQuZW1iZWRzIElTIE5PVCBF\nTVBUWSIgKwogICAgICAgICAgICAgICAgIiBvcmRlciBieSBlIiwKICAgICAg\nICAgICAgInNlbGVjdCBlLCBlLmludFZhbDEsIGUuaW50VmFsMiBmcm9tICIg\nKwogICAgICAgICAgICAgICAgIiBFbnRpdHlBX0VtYmVkX0NvbGxfRW1iZWQg\nYSAiICsKICAgICAgICAgICAgICAgICIgLCBpbiAoYS5lbWJlZC5lbWJlZHMp\nIGUgd2hlcmUgZXhpc3RzIChzZWxlY3QgZS5pbnRWYWwxICIgKwogICAgICAg\nICAgICAgICAgIiBmcm9tIEVudGl0eUFfRW1iZWRfQ29sbF9FbWJlZCBhLCBp\nbiAoYS5lbWJlZC5lbWJlZHMpIGUgIiArCiAgICAgICAgICAgICAgICAiIHdo\nZXJlIGUuaW50VmFsMiA9IDEwNSkgIiArCiAgICAgICAgICAgICAgICAiIG9y\nZGVyIGJ5IGUiLAogICAgICAgICAgICAic2VsZWN0IGUsIGEgZnJvbSAiICsK\nICAgICAgICAgICAgICAgICIgRW50aXR5QV9FbWJlZF9Db2xsX0VtYmVkIGEg\nIiArCiAgICAgICAgICAgICAgICAiICwgaW4gKGEuZW1iZWQuZW1iZWRzKSBl\nICIgKwogICAgICAgICAgICAgICAgIiB3aGVyZSBlLmludFZhbDEgPSBTT01F\nICIgKwogICAgICAgICAgICAgICAgIiAoc2VsZWN0IGUyLmludFZhbDEgZnJv\nbSAiICsKICAgICAgICAgICAgICAgICIgRW50aXR5QV9FbWJlZF9Db2xsX0Vt\nYmVkIGEyICIgKwogICAgICAgICAgICAgICAgIiAsIGluIChhMi5lbWJlZC5l\nbWJlZHMpIGUyKSAiICsKICAgICAgICAgICAgICAgICIgb3JkZXIgYnkgZSIs\nCiAgICAgICAgfTsKICAgICAgICBTdHJpbmdbXSBxdWVyeTIgPSB7CiAgICAg\nICAgICAgICJzZWxlY3QgZSwgYSBmcm9tICIgKwogICAgICAgICAgICAgICAg\nIiBFbnRpdHlBX0VtYmVkX0NvbGxfRW1iZWQgYSAiICsKICAgICAgICAgICAg\nICAgICIgLCBpbiAoYS5lbWJlZC5lbWJlZHMpIGUgIiArCiAgICAgICAgICAg\nICAgICAiIHdoZXJlIGUgPSA/MSBvcmRlciBieSBlIiwKICAgICAgICB9Owog\nICAgICAgIExpc3Q8T2JqZWN0W10+IHJzID0gbnVsbDsKICAgICAgICBFbnRp\ndHlBX0VtYmVkX0NvbGxfRW1iZWQgZWEgPSBudWxsOwogICAgICAgIE9iamVj\ndCBvYmogPSBudWxsOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcXVl\ncnkubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgcnMgPSBlbS5jcmVhdGVR\ndWVyeShxdWVyeVtpXSkuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgICAgICBh\nc3NlcnRUcnVlKHJzLnNpemUoKSA+IDApOwogICAgICAgICAgICBvYmogPSAo\nKE9iamVjdFtdKSBycy5nZXQoMCkpWzBdOwogICAgICAgICAgICBhc3NlcnRU\ncnVlKG9iaiBpbnN0YW5jZW9mIEVtYmVkKTsKICAgICAgICAgICAgaWYgKGkg\nPT0gcXVlcnkubGVuZ3RoLTEpCiAgICAgICAgICAgICAgICBlYSA9IChFbnRp\ndHlBX0VtYmVkX0NvbGxfRW1iZWQpICgoT2JqZWN0W10pIHJzLmdldCgwKSlb\nMV07CiAgICAgICAgfQoKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHF1\nZXJ5Mi5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB0cnkgewogICAgICAg\nICAgICBycyA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5MltpXSkuCiAgICAgICAg\nICAgICAgICBzZXRQYXJhbWV0ZXIoMSwgKEVtYmVkKSBvYmopLgogICAgICAg\nICAgICAgICAgZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgICAgICB9IGNhdGNo\nIChBcmd1bWVudEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAgICAvLyBl\neHBlY3RlZCBleGNlcHRpb246IGNvbXBhcmlzb24gb3ZlciBlbWJlZGRlZCBv\nYmplY3QgaXMgbm90IGFsbG93ZWQKICAgICAgICAgICAgfQogICAgICAgIH0K\nICAgICAgICB0cnkgewogICAgICAgICAgICBycyA9IGVtLmNyZWF0ZVF1ZXJ5\nKCJzZWxlY3QgYSBmcm9tICIgKwogICAgICAgICAgICAgICAgIiBFbnRpdHlB\nX0VtYmVkX0NvbGxfRW1iZWQgYSAiICsKICAgICAgICAgICAgICAgICIgd2hl\ncmUgYS5lbWJlZCA9ID8xIG9yZGVyIGJ5IGUiKS4KICAgICAgICAgICAgICAg\nIHNldFBhcmFtZXRlcigxLCBlYS5nZXRFbWJlZCgpKS4KICAgICAgICAgICAg\nICAgIGdldFJlc3VsdExpc3QoKTsKICAgICAgICB9IGNhdGNoIChBcmd1bWVu\ndEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIC8vIGV4cGVjdGVkIGV4Y2Vw\ndGlvbjogY29tcGFyaXNvbiBvdmVyIGVtYmVkZGVkIG9iamVjdCBpcyBub3Qg\nYWxsb3dlZAogICAgICAgIH0KICAgICAgICBlbS5jbGVhcigpOwoKICAgICAg\nICBFbnRpdHlUcmFuc2FjdGlvbiB0cmFuID0gZW0uZ2V0VHJhbnNhY3Rpb24o\nKTsKICAgICAgICB0cmFuLmJlZ2luKCk7CiAgICAgICAgUXVlcnkgcSA9IGVt\nLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgYSBmcm9tIEVudGl0eUFfRW1iZWRfQ29s\nbF9FbWJlZCBhIik7CiAgICAgICAgTGlzdDxFbnRpdHlBX0VtYmVkX0NvbGxf\nRW1iZWQ+IGFzID0gcS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgZm9yIChF\nbnRpdHlBX0VtYmVkX0NvbGxfRW1iZWQgYSA6IGFzKSB7CiAgICAgICAgICAg\nIGNoZWNrRW50aXR5QV9FbWJlZF9Db2xsX0VtYmVkKGEpOwogICAgICAgIH0K\nICAgICAgICB0cmFuLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAg\nICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIGNyZWF0ZU9iak1hcEtleSgpIHsK\nICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1h\nbmFnZXIoKTsKICAgICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0cmFuID0gZW0u\nZ2V0VHJhbnNhY3Rpb24oKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8\nIG51bURlcGFydG1lbnRzOyBpKyspCiAgICAgICAgICAgIGNyZWF0ZURlcGFy\ndG1lbnQxKGVtLCBkZXB0SWQrKyk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7\nIGkgPCBudW1EZXBhcnRtZW50czsgaSsrKQogICAgICAgICAgICBjcmVhdGVE\nZXBhcnRtZW50MihlbSwgZGVwdElkKyspOwogICAgICAgIGZvciAoaW50IGkg\nPSAwOyBpIDwgbnVtRGVwYXJ0bWVudHM7IGkrKykKICAgICAgICAgICAgY3Jl\nYXRlRGVwYXJ0bWVudDMoZW0sIGRlcHRJZCsrKTsKICAgICAgICB0cmFuLmJl\nZ2luKCk7CiAgICAgICAgZW0uZmx1c2goKTsKICAgICAgICB0cmFuLmNvbW1p\ndCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgY3JlYXRlT2JqTWFwS2V5RW51bWVyYXRlZCgpIHsKICAgICAgICBFbnRp\ndHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAg\nICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0cmFuID0gZW0uZ2V0VHJhbnNhY3Rp\nb24oKTsKICAgICAgICBJdGVtNCBpdGVtID0gbmV3IEl0ZW00KCk7CiAgICAg\nICAgaXRlbS5zZXRJZCgxKTsKICAgICAgICBGaWxlTmFtZTQgZmlsZU5hbWUx\nID0gbmV3IEZpbGVOYW1lNCgiZmlsZSIgKyAxLCAiZmlsZSIgKyAxKTsKICAg\nICAgICBpdGVtLmFkZEltYWdlKEl0ZW00LkNhdGFnb3J5LkExLCBmaWxlTmFt\nZTEpOwoKICAgICAgICBGaWxlTmFtZTQgZmlsZU5hbWUyID0gbmV3IEZpbGVO\nYW1lNCgiZmlsZSIgKyAyLCAiZmlsZSIgKyAyKTsKICAgICAgICBpdGVtLmFk\nZEltYWdlKEl0ZW00LkNhdGFnb3J5LkEyLCBmaWxlTmFtZTIpOwoKICAgICAg\nICBGaWxlTmFtZTQgZmlsZU5hbWUzID0gbmV3IEZpbGVOYW1lNCgiZmlsZSIg\nKyAzLCAiZmlsZSIgKyAzKTsKICAgICAgICBpdGVtLmFkZEltYWdlKEl0ZW00\nLkNhdGFnb3J5LkEzLCBmaWxlTmFtZTMpOwoKICAgICAgICBlbS5wZXJzaXN0\nKGl0ZW0pOwogICAgICAgIHRyYW4uYmVnaW4oKTsKICAgICAgICBlbS5mbHVz\naCgpOwogICAgICAgIHRyYW4uY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2Uo\nKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgY3JlYXRlT2JqTWFwS2V5\nVGVtcG9yYWwoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5j\ncmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgRW50aXR5VHJhbnNhY3Rp\nb24gdHJhbiA9IGVtLmdldFRyYW5zYWN0aW9uKCk7CiAgICAgICAgSXRlbTUg\naXRlbSA9IG5ldyBJdGVtNSgpOwogICAgICAgIGl0ZW0uc2V0SWQoMSk7CiAg\nICAgICAgbG9uZyB0cyA9IFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpOwog\nICAgICAgIFRpbWVzdGFtcCB0czEgPSBuZXcgVGltZXN0YW1wKHRzKTsKICAg\nICAgICBUaW1lc3RhbXAgdHMyID0gbmV3IFRpbWVzdGFtcCh0cysxMDAwMDAw\nKTsKICAgICAgICBUaW1lc3RhbXAgdHMzID0gbmV3IFRpbWVzdGFtcCh0cysy\nMDAwMDAwKTsKICAgICAgICAKICAgICAgICBGaWxlTmFtZTQgZmlsZU5hbWUx\nID0gbmV3IEZpbGVOYW1lNCgiZmlsZSIgKyAxLCAiZmlsZSIgKyAxKTsKICAg\nICAgICBpdGVtLmFkZEltYWdlKHRzMSwgZmlsZU5hbWUxKTsKCiAgICAgICAg\nRmlsZU5hbWU0IGZpbGVOYW1lMiA9IG5ldyBGaWxlTmFtZTQoImZpbGUiICsg\nMiwgImZpbGUiICsgMik7CiAgICAgICAgaXRlbS5hZGRJbWFnZSh0czIsIGZp\nbGVOYW1lMik7CgogICAgICAgIEZpbGVOYW1lNCBmaWxlTmFtZTMgPSBuZXcg\nRmlsZU5hbWU0KCJmaWxlIiArIDMsICJmaWxlIiArIDMpOwogICAgICAgIGl0\nZW0uYWRkSW1hZ2UodHMzLCBmaWxlTmFtZTMpOwoKICAgICAgICBlbS5wZXJz\naXN0KGl0ZW0pOwogICAgICAgIHRyYW4uYmVnaW4oKTsKICAgICAgICBlbS5m\nbHVzaCgpOwogICAgICAgIHRyYW4uY29tbWl0KCk7CiAgICAgICAgZW0uY2xv\nc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjcmVhdGVPYmpNYXBLZXlD\nbGFzcygpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0\nZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0\ncmFuID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsKICAgICAgICBmb3IgKGludCBp\nID0gMDsgaSA8IG51bUl0ZW1zOyBpKyspCiAgICAgICAgICAgIGNyZWF0ZUl0\nZW0xKGVtLCBpdGVtSWQrKyk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkg\nPCBudW1JdGVtczsgaSsrKQogICAgICAgICAgICBjcmVhdGVJdGVtMihlbSwg\naXRlbUlkKyspOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbnVtSXRl\nbXM7IGkrKykKICAgICAgICAgICAgY3JlYXRlSXRlbTMoZW0sIGl0ZW1JZCsr\nKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG51bUNvbXBhbnk7IGkr\nKykKICAgICAgICAgICAgY3JlYXRlQ29tcGFueTEoZW0sIGNvbXBJZCsrKTsK\nICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG51bUNvbXBhbnk7IGkrKykK\nICAgICAgICAgICAgY3JlYXRlQ29tcGFueTIoZW0sIGNvbXBJZCsrKTsKICAg\nICAgICB0cmFuLmJlZ2luKCk7CiAgICAgICAgZW0uZmx1c2goKTsKICAgICAg\nICB0cmFuLmNvbW1pdCgpOwogICAgICAgIGJvb2xlYW4gZm91bmQgPSBmYWxz\nZTsKICAgICAgICBmb3IgKFN0cmluZyBzcWxTdHIgOiBzcWwpIHsKICAgICAg\nICAgICAgaWYgKHNxbFN0ci50b1VwcGVyQ2FzZSgpLmluZGV4T2YoIklURU0y\nX1hYWCIpICE9IC0xKSB7CiAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7\nCiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfSAKICAgICAg\nICAgICAgaWYgKHNxbFN0ci50b1VwcGVyQ2FzZSgpLmluZGV4T2YoIklURU0y\nX0lNQUdFUyIpICE9IC0xKSB7CiAgICAgICAgICAgICAgICBmb3VuZCA9IGZh\nbHNlOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAg\nICAgICB9CiAgICAgICAgaWYgKCFmb3VuZCkgewogICAgICAgICAgICBmYWls\nKCJUYWJsZSBuYW1lIElURU0yX0lNRyBzcGVjaWZpZWQgaW4gdGhlIE1hcEtl\neUNvbHVtbiBhbm5vdGF0aW9uIGlzIG5vdCBob25vcmVkIik7CiAgICAgICAg\nfQogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nY3JlYXRlSXRlbTEoRW50aXR5TWFuYWdlciBlbSwgaW50IGlkKSB7CiAgICAg\nICAgSXRlbTEgaXRlbSA9IG5ldyBJdGVtMSgpOwogICAgICAgIGl0ZW0uc2V0\nSWQoaWQpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbnVtSW1hZ2Vz\nUGVySXRlbTsgaSsrKSB7CiAgICAgICAgICAgIGl0ZW0uYWRkSW1hZ2UoImlt\nYWdlIiArIGlkICsgaSwgImZpbGUiICsgaWQgKyBpKTsKICAgICAgICB9CiAg\nICAgICAgZW0ucGVyc2lzdChpdGVtKTsKICAgIH0KICAgIAogICAgcHVibGlj\nIHZvaWQgY3JlYXRlSXRlbTIoRW50aXR5TWFuYWdlciBlbSwgaW50IGlkKSB7\nCiAgICAgICAgSXRlbTIgaXRlbSA9IG5ldyBJdGVtMigpOwogICAgICAgIGl0\nZW0uc2V0SWQoaWQpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbnVt\nSW1hZ2VzUGVySXRlbTsgaSsrKSB7CiAgICAgICAgICAgIGl0ZW0uYWRkSW1h\nZ2UoImltYWdlIiArIGlkICsgaSwgImZpbGUiICsgaWQgKyBpKTsKICAgICAg\nICB9CiAgICAgICAgZW0ucGVyc2lzdChpdGVtKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBjcmVhdGVJdGVtMyhFbnRpdHlNYW5hZ2VyIGVtLCBpbnQgaWQp\nIHsKICAgICAgICBJdGVtMyBpdGVtID0gbmV3IEl0ZW0zKCk7CiAgICAgICAg\naXRlbS5zZXRJZChpZCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBu\ndW1JbWFnZXNQZXJJdGVtOyBpKyspIHsKICAgICAgICAgICAgaXRlbS5hZGRJ\nbWFnZSgiaW1hZ2UiICsgaWQgKyBpLCAiZmlsZSIgKyBpZCArIGkpOwogICAg\nICAgIH0KICAgICAgICBlbS5wZXJzaXN0KGl0ZW0pOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIGNyZWF0ZUNvbXBhbnkxKEVudGl0eU1hbmFnZXIgZW0sIGlu\ndCBpZCkgewogICAgICAgIENvbXBhbnkxIGMgPSBuZXcgQ29tcGFueTEoKTsK\nICAgICAgICBjLnNldElkKGlkKTsKICAgICAgICBmb3IgKGludCBpID0gMDsg\naSA8IG51bURpdmlzaW9uc1BlckNvOyBpKyspIHsKICAgICAgICAgICAgRGl2\naXNpb24gZCA9IGNyZWF0ZURpdmlzaW9uKGVtLCBkaXZJZCsrKTsKICAgICAg\nICAgICAgVmljZVByZXNpZGVudCB2cCA9IGNyZWF0ZVZpY2VQcmVzaWRlbnQo\nZW0sIHZwSWQrKyk7CiAgICAgICAgICAgIGMuYWRkVG9Pcmdhbml6YXRpb24o\nZCwgdnApOwogICAgICAgICAgICBlbS5wZXJzaXN0KGQpOwogICAgICAgICAg\nICBlbS5wZXJzaXN0KHZwKTsKICAgICAgICB9CiAgICAgICAgZW0ucGVyc2lz\ndChjKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgY3JlYXRlQ29tcGFu\neTIoRW50aXR5TWFuYWdlciBlbSwgaW50IGlkKSB7CiAgICAgICAgQ29tcGFu\neTIgYyA9IG5ldyBDb21wYW55MigpOwogICAgICAgIGMuc2V0SWQoaWQpOwog\nICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbnVtRGl2aXNpb25zUGVyQ287\nIGkrKykgewogICAgICAgICAgICBEaXZpc2lvbiBkID0gY3JlYXRlRGl2aXNp\nb24oZW0sIGRpdklkKyspOwogICAgICAgICAgICBWaWNlUHJlc2lkZW50IHZw\nID0gY3JlYXRlVmljZVByZXNpZGVudChlbSwgdnBJZCsrKTsKICAgICAgICAg\nICAgYy5hZGRUb09yZ2FuaXphdGlvbihkLCB2cCk7CiAgICAgICAgICAgIGVt\nLnBlcnNpc3QoZCk7CiAgICAgICAgICAgIGVtLnBlcnNpc3QodnApOwogICAg\nICAgIH0KICAgICAgICBlbS5wZXJzaXN0KGMpOwogICAgfQoKICAgIHB1Ymxp\nYyBEaXZpc2lvbiBjcmVhdGVEaXZpc2lvbihFbnRpdHlNYW5hZ2VyIGVtLCBp\nbnQgaWQpIHsKICAgICAgICBEaXZpc2lvbiBkID0gbmV3IERpdmlzaW9uKCk7\nCiAgICAgICAgZC5zZXRJZChpZCk7CiAgICAgICAgZC5zZXROYW1lKCJkIiAr\nIGlkKTsKICAgICAgICByZXR1cm4gZDsKICAgIH0KICAgIAogICAgcHVibGlj\nIFZpY2VQcmVzaWRlbnQgY3JlYXRlVmljZVByZXNpZGVudChFbnRpdHlNYW5h\nZ2VyIGVtLCBpbnQgaWQpIHsKICAgICAgICBWaWNlUHJlc2lkZW50IHZwID0g\nbmV3IFZpY2VQcmVzaWRlbnQoKTsKICAgICAgICB2cC5zZXRJZChpZCk7CiAg\nICAgICAgdnAuc2V0TmFtZSgidnAiICsgaWQpOwogICAgICAgIHJldHVybiB2\ncDsKICAgIH0gICAgCgogICAgcHVibGljIHZvaWQgY3JlYXRlRGVwYXJ0bWVu\ndDEoRW50aXR5TWFuYWdlciBlbSwgaW50IGlkKSB7CiAgICAgICAgRGVwYXJ0\nbWVudDEgZCA9IG5ldyBEZXBhcnRtZW50MSgpOwogICAgICAgIGQuc2V0RGVw\ndElkKGlkKTsKICAgICAgICBNYXAgZW1wcyA9IG5ldyBIYXNoTWFwKCk7CiAg\nICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBudW1FbXBsb3llZXNQZXJEZXB0\nOyBpKyspIHsKICAgICAgICAgICAgRW1wbG95ZWUxIGUgPSBjcmVhdGVFbXBs\nb3llZTEoZW0sIGVtcElkKyspOwogICAgICAgICAgICAvL2QuYWRkRW1wbG95\nZWUxKGUpOwogICAgICAgICAgICBlbXBzLnB1dChlLmdldEVtcElkKCksIGUp\nOwogICAgICAgICAgICBlLnNldERlcGFydG1lbnQoZCk7CiAgICAgICAgICAg\nIGVtLnBlcnNpc3QoZSk7CiAgICAgICAgfQogICAgICAgIGQuc2V0RW1wTWFw\nKGVtcHMpOwogICAgICAgIGVtLnBlcnNpc3QoZCk7CiAgICB9CiAgICAKICAg\nIHB1YmxpYyBFbXBsb3llZTEgY3JlYXRlRW1wbG95ZWUxKEVudGl0eU1hbmFn\nZXIgZW0sIGludCBpZCkgewogICAgICAgIEVtcGxveWVlMSBlID0gbmV3IEVt\ncGxveWVlMSgpOwogICAgICAgIGUuc2V0RW1wSWQoaWQpOwogICAgICAgIHJl\ndHVybiBlOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCBjcmVhdGVEZXBh\ncnRtZW50MihFbnRpdHlNYW5hZ2VyIGVtLCBpbnQgaWQpIHsKICAgICAgICBE\nZXBhcnRtZW50MiBkID0gbmV3IERlcGFydG1lbnQyKCk7CiAgICAgICAgZC5z\nZXREZXB0SWQoaWQpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbnVt\nRW1wbG95ZWVzUGVyRGVwdDsgaSsrKSB7CiAgICAgICAgICAgIEVtcGxveWVl\nMiBlID0gY3JlYXRlRW1wbG95ZWUyKGVtLCBlbXBJZCsrKTsKICAgICAgICAg\nICAgZC5hZGRFbXBsb3llZShlKTsKICAgICAgICAgICAgZS5zZXREZXBhcnRt\nZW50KGQpOwogICAgICAgICAgICBlbS5wZXJzaXN0KGUpOwogICAgICAgIH0K\nICAgICAgICBlbS5wZXJzaXN0KGQpOwogICAgfQogICAgCiAgICBwdWJsaWMg\nRW1wbG95ZWUyIGNyZWF0ZUVtcGxveWVlMihFbnRpdHlNYW5hZ2VyIGVtLCBp\nbnQgaWQpIHsKICAgICAgICBFbXBsb3llZTIgZSA9IG5ldyBFbXBsb3llZTIo\nImUiICsgaWQsIG5ldyBEYXRlKCkpOwogICAgICAgIHJldHVybiBlOwogICAg\nfQogICAgCiAgICBwdWJsaWMgdm9pZCBjcmVhdGVEZXBhcnRtZW50MyhFbnRp\ndHlNYW5hZ2VyIGVtLCBpbnQgaWQpIHsKICAgICAgICBEZXBhcnRtZW50MyBk\nID0gbmV3IERlcGFydG1lbnQzKCk7CiAgICAgICAgZC5zZXREZXB0SWQoaWQp\nOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbnVtRW1wbG95ZWVzUGVy\nRGVwdDsgaSsrKSB7CiAgICAgICAgICAgIEVtcGxveWVlMyBlID0gY3JlYXRl\nRW1wbG95ZWUzKGVtLCBlbXBJZCsrKTsKICAgICAgICAgICAgZC5hZGRFbXBs\nb3llZShlKTsKICAgICAgICAgICAgZS5zZXREZXBhcnRtZW50KGQpOwogICAg\nICAgICAgICBlbS5wZXJzaXN0KGUpOwogICAgICAgIH0KICAgICAgICBlbS5w\nZXJzaXN0KGQpOwogICAgfQogICAgCiAgICBwdWJsaWMgRW1wbG95ZWUzIGNy\nZWF0ZUVtcGxveWVlMyhFbnRpdHlNYW5hZ2VyIGVtLCBpbnQgaWQpIHsKICAg\nICAgICBFbXBsb3llZTMgZSA9IG5ldyBFbXBsb3llZTMoKTsKICAgICAgICBF\nbXBsb3llZU5hbWUzIG5hbWUgPSBuZXcgRW1wbG95ZWVOYW1lMygiZiIgKyBp\nZCwgImwiICsgaWQpOwogICAgICAgIGUuc2V0RW1wSWQoaWQpOwogICAgICAg\nIGUuc2V0TmFtZShuYW1lKTsKICAgICAgICByZXR1cm4gZTsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCBmaW5kT2JqTWFwS2V5KCkgewogICAgICAgIEVudGl0\neU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAg\nICAgIERlcGFydG1lbnQxIGQxID0gZW0uZmluZChEZXBhcnRtZW50MS5jbGFz\ncywgMSk7CiAgICAgICAgYXNzZXJ0RGVwYXJ0bWVudDEoZDEpOwogICAgICAg\nIAogICAgICAgIEVtcGxveWVlMSBlMSA9IGVtLmZpbmQoRW1wbG95ZWUxLmNs\nYXNzLCAxKTsKICAgICAgICBhc3NlcnRFbXBsb3llZTEoZTEpOwogICAgICAg\nIAogICAgICAgIERlcGFydG1lbnQyIGQyID0gZW0uZmluZChEZXBhcnRtZW50\nMi5jbGFzcywgMyk7CiAgICAgICAgYXNzZXJ0RGVwYXJ0bWVudDIoZDIpOwog\nICAgICAgIAogICAgICAgIE1hcCBlbXBzID0gZDIuZ2V0RW1wTWFwKCk7CiAg\nICAgICAgU2V0PEVtcGxveWVlUEsyPiBrZXlzID0gZW1wcy5rZXlTZXQoKTsK\nICAgICAgICBmb3IgKEVtcGxveWVlUEsyIGtleSA6IGtleXMpIHsKICAgICAg\nICAgICAgRW1wbG95ZWUyIGUyID0gZW0uZmluZChFbXBsb3llZTIuY2xhc3Ms\nIGtleSk7CiAgICAgICAgICAgIGFzc2VydEVtcGxveWVlMihlMik7CiAgICAg\nICAgfQogICAgICAgIAogICAgICAgIERlcGFydG1lbnQzIGQzID0gZW0uZmlu\nZChEZXBhcnRtZW50My5jbGFzcywgNSk7CiAgICAgICAgYXNzZXJ0RGVwYXJ0\nbWVudDMoZDMpOwogICAgICAgIAogICAgICAgIEVtcGxveWVlMyBlMyA9IGVt\nLmZpbmQoRW1wbG95ZWUzLmNsYXNzLCA5KTsKICAgICAgICBhc3NlcnRFbXBs\nb3llZTMoZTMpOwogICAgICAgIAogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9\nCiAgICAKICAgIHB1YmxpYyB2b2lkIGFzc2VydERlcGFydG1lbnQxKERlcGFy\ndG1lbnQxIGQpIHsKICAgICAgICBpbnQgaWQgPSBkLmdldERlcHRJZCgpOwog\nICAgICAgIE1hcDxJbnRlZ2VyLCBFbXBsb3llZTE+IGVzID0gZC5nZXRFbXBN\nYXAoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMixlcy5zaXplKCkpOwogICAg\nICAgIFNldCBrZXlzID0gZXMua2V5U2V0KCk7CiAgICAgICAgZm9yIChPYmpl\nY3Qgb2JqIDoga2V5cykgewogICAgICAgICAgICBJbnRlZ2VyIGVtcElkID0g\nKEludGVnZXIpIG9iajsKICAgICAgICAgICAgRW1wbG95ZWUxIGUgPSBlcy5n\nZXQoZW1wSWQpOwogICAgICAgICAgICBhc3NlcnRFcXVhbHMoZW1wSWQuaW50\nVmFsdWUoKSwgZS5nZXRFbXBJZCgpKTsKICAgICAgICB9CiAgICB9CiAgICAK\nICAgIHB1YmxpYyB2b2lkIGFzc2VydERlcGFydG1lbnQyKERlcGFydG1lbnQy\nIGQpIHsKICAgICAgICBpbnQgaWQgPSBkLmdldERlcHRJZCgpOwogICAgICAg\nIE1hcDxFbXBsb3llZVBLMiwgRW1wbG95ZWUyPiBlcyA9IGQuZ2V0RW1wTWFw\nKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDIsZXMuc2l6ZSgpKTsKICAgICAg\nICBTZXQ8RW1wbG95ZWVQSzI+IGtleXMgPSBlcy5rZXlTZXQoKTsKICAgICAg\nICBmb3IgKEVtcGxveWVlUEsyIHBrIDoga2V5cykgewogICAgICAgICAgICBF\nbXBsb3llZTIgZSA9IGVzLmdldChwayk7CiAgICAgICAgICAgIGFzc2VydEVx\ndWFscyhwaywgZS5nZXRFbXBQSygpKTsKICAgICAgICB9CiAgICB9ICAgCgog\nICAgcHVibGljIHZvaWQgYXNzZXJ0RGVwYXJ0bWVudDMoRGVwYXJ0bWVudDMg\nZCkgewogICAgICAgIGludCBpZCA9IGQuZ2V0RGVwdElkKCk7CiAgICAgICAg\nTWFwPEVtcGxveWVlTmFtZTMsIEVtcGxveWVlMz4gZXMgPSBkLmdldEVtcGxv\neWVlcygpOwogICAgICAgIGFzc2VydEVxdWFscygyLGVzLnNpemUoKSk7CiAg\nICAgICAgU2V0PEVtcGxveWVlTmFtZTM+IGtleXMgPSBlcy5rZXlTZXQoKTsK\nICAgICAgICBmb3IgKEVtcGxveWVlTmFtZTMga2V5IDoga2V5cykgewogICAg\nICAgICAgICBFbXBsb3llZTMgZSA9IGVzLmdldChrZXkpOwogICAgICAgICAg\nICBhc3NlcnRFcXVhbHMoa2V5LCBlLmdldE5hbWUoKSk7CiAgICAgICAgfQog\nICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCBhc3NlcnRFbXBsb3llZTEoRW1w\nbG95ZWUxIGUpIHsKICAgICAgICBpbnQgaWQgPSBlLmdldEVtcElkKCk7CiAg\nICAgICAgRGVwYXJ0bWVudDEgZCA9IGUuZ2V0RGVwYXJ0bWVudCgpOwogICAg\nICAgIGFzc2VydERlcGFydG1lbnQxKGQpOwogICAgfQogICAgCiAgICBwdWJs\naWMgdm9pZCBhc3NlcnRFbXBsb3llZTIoRW1wbG95ZWUyIGUpIHsKICAgICAg\nICBFbXBsb3llZVBLMiBwayA9IGUuZ2V0RW1wUEsoKTsKICAgICAgICBEZXBh\ncnRtZW50MiBkID0gZS5nZXREZXBhcnRtZW50KCk7CiAgICAgICAgYXNzZXJ0\nRGVwYXJ0bWVudDIoZCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIGFz\nc2VydEVtcGxveWVlMyhFbXBsb3llZTMgZSkgewogICAgICAgIGludCBpZCA9\nIGUuZ2V0RW1wSWQoKTsKICAgICAgICBEZXBhcnRtZW50MyBkID0gZS5nZXRE\nZXBhcnRtZW50KCk7CiAgICAgICAgYXNzZXJ0RGVwYXJ0bWVudDMoZCk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgcXVlcnlPYmpNYXBLZXkoKSB7CiAgICAg\nICAgcXVlcnlEZXBhcnRtZW50KGVtZik7CiAgICAgICAgcXVlcnlFbXBsb3ll\nZShlbWYpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCBxdWVyeURlcGFy\ndG1lbnQoRW50aXR5TWFuYWdlckZhY3RvcnkgZW1mKSB7CiAgICAgICAgRW50\naXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAg\nICAgICAgRW50aXR5VHJhbnNhY3Rpb24gdHJhbiA9IGVtLmdldFRyYW5zYWN0\naW9uKCk7CiAgICAgICAgdHJhbi5iZWdpbigpOwogICAgICAgIFF1ZXJ5IHEx\nID0gZW0uY3JlYXRlUXVlcnkoInNlbGVjdCBkIGZyb20gRGVwYXJ0bWVudDEg\nZCIpOwogICAgICAgIExpc3Q8RGVwYXJ0bWVudDE+IGRzMSA9IHExLmdldFJl\nc3VsdExpc3QoKTsKICAgICAgICBmb3IgKERlcGFydG1lbnQxIGQgOiBkczEp\newogICAgICAgICAgICBhc3NlcnREZXBhcnRtZW50MShkKTsKICAgICAgICB9\nCiAgICAgICAgCiAgICAgICAgUXVlcnkgcTIgPSBlbS5jcmVhdGVRdWVyeSgi\nc2VsZWN0IGQgZnJvbSBEZXBhcnRtZW50MiBkIik7CiAgICAgICAgTGlzdDxE\nZXBhcnRtZW50Mj4gZHMyID0gcTIuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAg\nIGZvciAoRGVwYXJ0bWVudDIgZCA6IGRzMil7CiAgICAgICAgICAgIGFzc2Vy\ndERlcGFydG1lbnQyKGQpOwogICAgICAgIH0KCiAgICAgICAgUXVlcnkgcTMg\nPSBlbS5jcmVhdGVRdWVyeSgic2VsZWN0IGQgZnJvbSBEZXBhcnRtZW50MyBk\nIik7CiAgICAgICAgTGlzdDxEZXBhcnRtZW50Mz4gZHMzID0gcTMuZ2V0UmVz\ndWx0TGlzdCgpOwogICAgICAgIGZvciAoRGVwYXJ0bWVudDMgZCA6IGRzMyl7\nCiAgICAgICAgICAgIGFzc2VydERlcGFydG1lbnQzKGQpOwogICAgICAgIH0K\nICAgICAgICAKICAgICAgICB0cmFuLmNvbW1pdCgpOwoKICAgICAgICBTdHJp\nbmcgcXVlcnlbXSA9IHsKICAgICAgICAgICAgInNlbGVjdCBkIGZyb20gRGVw\nYXJ0bWVudDEgZCBqb2luIGQuZW1wTWFwIGUgIiArCiAgICAgICAgICAgICAg\nICAiIHdoZXJlIEtFWShlKSA+IDEgb3JkZXIgYnkgZCIsCiAgICAgICAgICAg\nICJzZWxlY3QgZCBmcm9tIERlcGFydG1lbnQxIGQgam9pbiBkLmVtcE1hcCBl\nIiArCiAgICAgICAgICAgICAgICAiIHdoZXJlIGQuZGVwdElkID0gS0VZKGUp\nIG9yZGVyIGJ5IGQiLAogICAgICAgICAgICAic2VsZWN0IGQgZnJvbSBEZXBh\ncnRtZW50MSBkICIgKwogICAgICAgICAgICAgICAgIiB3aGVyZSBkLmRlcHRJ\nZCA8IEFOWSAiICsKICAgICAgICAgICAgICAgICIgKHNlbGVjdCBLRVkoZSkg\nZnJvbSBpbihkLmVtcE1hcCkgZSkgIiArCiAgICAgICAgICAgICAgICAiIG9y\nZGVyIGJ5IGQiLAogICAgICAgICAgICAic2VsZWN0IGQgZnJvbSBEZXBhcnRt\nZW50MSBkICIgKwogICAgICAgICAgICAgICAgIiB3aGVyZSBkLmRlcHRJZCA8\nIFNPTUUgIiArCiAgICAgICAgICAgICAgICAiIChzZWxlY3QgS0VZKGUpIGZy\nb20gRGVwYXJ0bWVudDEgZDEsIGluKGQxLmVtcE1hcCkgZSkgIiArCiAgICAg\nICAgICAgICAgICAiIG9yZGVyIGJ5IGQiLAogICAgICAgIH07CiAgICAgICAg\nZm9yIChpbnQgaSA9IDA7IGkgPCBxdWVyeS5sZW5ndGg7IGkrKykgewogICAg\nICAgICAgICBkczEgPSBlbS5jcmVhdGVRdWVyeShxdWVyeVtpXSkuZ2V0UmVz\ndWx0TGlzdCgpOwogICAgICAgICAgICBhc3NlcnREZXBhcnRtZW50MShkczEu\nZ2V0KDApKTsKICAgICAgICB9CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBxdWVyeUVtcGxveWVlKEVudGl0eU1hbmFnZXJG\nYWN0b3J5IGVtZikgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYu\nY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIEVudGl0eVRyYW5zYWN0\naW9uIHRyYW4gPSBlbS5nZXRUcmFuc2FjdGlvbigpOwogICAgICAgIHRyYW4u\nYmVnaW4oKTsKICAgICAgICBRdWVyeSBxMSA9IGVtLmNyZWF0ZVF1ZXJ5KCJz\nZWxlY3QgZSBmcm9tIEVtcGxveWVlMSBlIik7CiAgICAgICAgTGlzdDxFbXBs\nb3llZTE+IGVzMSA9IHExLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBmb3Ig\nKEVtcGxveWVlMSBlIDogZXMxKXsKICAgICAgICAgICAgYXNzZXJ0RW1wbG95\nZWUxKGUpOwogICAgICAgIH0KCiAgICAgICAgUXVlcnkgcTIgPSBlbS5jcmVh\ndGVRdWVyeSgic2VsZWN0IGUgZnJvbSBFbXBsb3llZTIgZSIpOwogICAgICAg\nIExpc3Q8RW1wbG95ZWUyPiBlczIgPSBxMi5nZXRSZXN1bHRMaXN0KCk7CiAg\nICAgICAgZm9yIChFbXBsb3llZTIgZSA6IGVzMil7CiAgICAgICAgICAgIGFz\nc2VydEVtcGxveWVlMihlKTsKICAgICAgICB9CgogICAgICAgIFF1ZXJ5IHEz\nID0gZW0uY3JlYXRlUXVlcnkoInNlbGVjdCBlIGZyb20gRW1wbG95ZWUzIGUi\nKTsKICAgICAgICBMaXN0PEVtcGxveWVlMz4gZXMzID0gcTMuZ2V0UmVzdWx0\nTGlzdCgpOwogICAgICAgIGZvciAoRW1wbG95ZWUzIGUgOiBlczMpewogICAg\nICAgICAgICBhc3NlcnRFbXBsb3llZTMoZSk7CiAgICAgICAgfQogICAgICAg\nIHRyYW4uY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KICAg\nIAogICAgcHVibGljIHZvaWQgZmluZE9iak1hcEtleUNsYXNzKCkgewogICAg\nICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdl\ncigpOwogICAgICAgIAogICAgICAgIEl0ZW0xIGl0ZW0xID0gZW0uZmluZChJ\ndGVtMS5jbGFzcywgMSk7CiAgICAgICAgYXNzZXJ0SXRlbTEoaXRlbTEpOwog\nICAgICAgIAogICAgICAgIEl0ZW0yIGl0ZW0yID0gZW0uZmluZChJdGVtMi5j\nbGFzcywgMyk7CiAgICAgICAgYXNzZXJ0SXRlbTIoaXRlbTIpOwogICAgICAg\nIAogICAgICAgIEl0ZW0zIGl0ZW0zID0gZW0uZmluZChJdGVtMy5jbGFzcywg\nNSk7CiAgICAgICAgYXNzZXJ0SXRlbTMoaXRlbTMpOwoKICAgICAgICBDb21w\nYW55MSBjMSA9IGVtLmZpbmQoQ29tcGFueTEuY2xhc3MsIDEpOwogICAgICAg\nIGFzc2VydENvbXBhbnkxKGMxKTsKICAgICAgICAKICAgICAgICBDb21wYW55\nMiBjMiA9IGVtLmZpbmQoQ29tcGFueTIuY2xhc3MsIDMpOwogICAgICAgIGFz\nc2VydENvbXBhbnkyKGMyKTsKCiAgICAgICAgRGl2aXNpb24gZCA9IGVtLmZp\nbmQoRGl2aXNpb24uY2xhc3MsIDEpOwogICAgICAgIGFzc2VydERpdmlzaW9u\nKGQpOwogICAgICAgIAogICAgICAgIFZpY2VQcmVzaWRlbnQgdnAgPSBlbS5m\naW5kKFZpY2VQcmVzaWRlbnQuY2xhc3MsIDEpOwogICAgICAgIGFzc2VydFZp\nY2VQcmVzaWRlbnQodnApOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCBh\nc3NlcnRJdGVtMShJdGVtMSBpdGVtKSB7CiAgICAgICAgaW50IGlkID0gaXRl\nbS5nZXRJZCgpOwogICAgICAgIE1hcCBpbWFnZXMgPSBpdGVtLmdldEltYWdl\ncygpOwogICAgICAgIGFzc2VydEVxdWFscyhudW1JbWFnZXNQZXJJdGVtLCBp\nbWFnZXMuc2l6ZSgpKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgYXNz\nZXJ0SXRlbTIoSXRlbTIgaXRlbSkgewogICAgICAgIGludCBpZCA9IGl0ZW0u\nZ2V0SWQoKTsKICAgICAgICBNYXAgaW1hZ2VzID0gaXRlbS5nZXRJbWFnZXMo\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMobnVtSW1hZ2VzUGVySXRlbSwgaW1h\nZ2VzLnNpemUoKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgYXNzZXJ0SXRl\nbTMoSXRlbTMgaXRlbSkgewogICAgICAgIGludCBpZCA9IGl0ZW0uZ2V0SWQo\nKTsKICAgICAgICBNYXAgaW1hZ2VzID0gaXRlbS5nZXRJbWFnZXMoKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMobnVtSW1hZ2VzUGVySXRlbSwgaW1hZ2VzLnNp\nemUoKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgYXNzZXJ0Q29tcGFueTEo\nQ29tcGFueTEgYykgewogICAgICAgIGludCBpZCA9IGMuZ2V0SWQoKTsKICAg\nICAgICBNYXAgb3JnYW5pemF0aW9uID0gYy5nZXRPcmdhbml6YXRpb24oKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoMixvcmdhbml6YXRpb24uc2l6ZSgpKTsK\nICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgYXNzZXJ0Q29tcGFueTIoQ29t\ncGFueTIgYykgewogICAgICAgIGludCBpZCA9IGMuZ2V0SWQoKTsKICAgICAg\nICBNYXAgb3JnYW5pemF0aW9uID0gYy5nZXRPcmdhbml6YXRpb24oKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoMixvcmdhbml6YXRpb24uc2l6ZSgpKTsKICAg\nIH0gICAgCiAgICAKICAgIHB1YmxpYyB2b2lkIGFzc2VydERpdmlzaW9uKERp\ndmlzaW9uIGQpIHsKICAgICAgICBpbnQgaWQgPSBkLmdldElkKCk7CiAgICAg\nICAgU3RyaW5nIG5hbWUgPSBkLmdldE5hbWUoKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBhc3NlcnRWaWNlUHJlc2lkZW50KFZpY2VQcmVzaWRlbnQgdnAp\nIHsKICAgICAgICBpbnQgaWQgPSB2cC5nZXRJZCgpOwogICAgICAgIFN0cmlu\nZyBuYW1lID0gdnAuZ2V0TmFtZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHF1ZXJ5T2JqTWFwS2V5Q2xhc3MoKSB7CiAgICAgICAgcXVlcnlJdGVtKGVt\nZik7CiAgICAgICAgcXVlcnlDb21wYW55KGVtZik7CiAgICAgICAgcXVlcnlE\naXZpc2lvbihlbWYpOwogICAgICAgIHF1ZXJ5VmljZVByZXNpZGVudChlbWYp\nOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCBmaW5kT2JqTWFwS2V5RW51\nbWVyYXRlZCgpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNy\nZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBJdGVtNCBpdGVtID0gZW0u\nZmluZChJdGVtNC5jbGFzcywgMSk7CiAgICAgICAgRmlsZU5hbWU0IGZpbGVO\nYW1lMSA9IGl0ZW0uZ2V0SW1hZ2UoSXRlbTQuQ2F0YWdvcnkuQTEpOwogICAg\nICAgIGFzc2VydEVxdWFscygiZmlsZTEiLCBmaWxlTmFtZTEuZ2V0Rk5hbWUo\nKSk7ICAgICAgIAogICAgICAgIGFzc2VydEVxdWFscygiZmlsZTEiLCBmaWxl\nTmFtZTEuZ2V0TE5hbWUoKSk7ICAgICAgIAogICAgICAgIAogICAgICAgIEZp\nbGVOYW1lNCBmaWxlTmFtZTIgPSBpdGVtLmdldEltYWdlKEl0ZW00LkNhdGFn\nb3J5LkEyKTsKICAgICAgICBhc3NlcnRFcXVhbHMoImZpbGUyIiwgZmlsZU5h\nbWUyLmdldEZOYW1lKCkpOyAgICAgICAKICAgICAgICBhc3NlcnRFcXVhbHMo\nImZpbGUyIiwgZmlsZU5hbWUyLmdldExOYW1lKCkpOyAgICAgICAKICAgICAg\nICAKICAgICAgICBGaWxlTmFtZTQgZmlsZU5hbWUzID0gaXRlbS5nZXRJbWFn\nZShJdGVtNC5DYXRhZ29yeS5BMyk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJm\naWxlMyIsIGZpbGVOYW1lMy5nZXRGTmFtZSgpKTsgICAgICAgCiAgICAgICAg\nYXNzZXJ0RXF1YWxzKCJmaWxlMyIsIGZpbGVOYW1lMy5nZXRMTmFtZSgpKTsg\nICAgICAgCiAgICB9CgogICAgcHVibGljIHZvaWQgZmluZE9iak1hcEtleVRl\nbXBvcmFsKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3Jl\nYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIEl0ZW01IGl0ZW0gPSBlbS5m\naW5kKEl0ZW01LmNsYXNzLCAxKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMywg\naXRlbS5nZXRJbWFnZXMoKS5zaXplKCkpOwogICAgfQogICAgCiAgICBwdWJs\naWMgdm9pZCBxdWVyeU9iak1hcEtleVRlbXBvcmFsKCkgewogICAgICAgIEVu\ndGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwog\nICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVDVCBWQUxVRShpbWcpIEZST00g\nSXRlbTUgaXRlbSwgSU4gKGl0ZW0uaW1hZ2VzKSBpbWcgIiArIAogICAgICAg\nICAgICAiV0hFUkUgaW1nLmZOYW1lID0gOmZOYW1lIGFuZCBpdGVtLmlkID0g\nOmlkIjsKICAgICAgICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnkoanBxbCk7\nCiAgICAgICAgcS5zZXRQYXJhbWV0ZXIoImZOYW1lIiwgImZpbGUxIik7CiAg\nICAgICAgcS5zZXRQYXJhbWV0ZXIoImlkIiwgMSk7CiAgICAgICAgTGlzdCBj\nb2xsID0gcS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKDEsIGNvbGwuc2l6ZSgpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBxdWVy\neUl0ZW0oRW50aXR5TWFuYWdlckZhY3RvcnkgZW1mKSB7CiAgICAgICAgRW50\naXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAg\nICAgICAgRW50aXR5VHJhbnNhY3Rpb24gdHJhbiA9IGVtLmdldFRyYW5zYWN0\naW9uKCk7CiAgICAgICAgdHJhbi5iZWdpbigpOwogICAgICAgIFF1ZXJ5IHEx\nID0gZW0uY3JlYXRlUXVlcnkoInNlbGVjdCBpIGZyb20gSXRlbTEgaSIpOwog\nICAgICAgIExpc3Q8SXRlbTE+IGlzMSA9IHExLmdldFJlc3VsdExpc3QoKTsK\nICAgICAgICBmb3IgKEl0ZW0xIGl0ZW0gOiBpczEpewogICAgICAgICAgICBh\nc3NlcnRJdGVtMShpdGVtKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAg\nUXVlcnkgcTIgPSBlbS5jcmVhdGVRdWVyeSgic2VsZWN0IGkgZnJvbSBJdGVt\nMiBpIik7CiAgICAgICAgTGlzdDxJdGVtMj4gaXMyID0gcTIuZ2V0UmVzdWx0\nTGlzdCgpOwogICAgICAgIGZvciAoSXRlbTIgaXRlbSA6IGlzMil7CiAgICAg\nICAgICAgIGFzc2VydEl0ZW0yKGl0ZW0pOwogICAgICAgIH0KCiAgICAgICAg\nUXVlcnkgcTMgPSBlbS5jcmVhdGVRdWVyeSgic2VsZWN0IGkgZnJvbSBJdGVt\nMyBpIik7CiAgICAgICAgTGlzdDxJdGVtMz4gaXMzID0gcTMuZ2V0UmVzdWx0\nTGlzdCgpOwogICAgICAgIGZvciAoSXRlbTMgaXRlbSA6IGlzMyl7CiAgICAg\nICAgICAgIGFzc2VydEl0ZW0zKGl0ZW0pOwogICAgICAgIH0KCiAgICAgICAg\ndHJhbi5jb21taXQoKTsKCiAgICAgICAgU3RyaW5nIGltYWdlS2V5MSA9IChT\ndHJpbmcpIGlzMS5nZXQoMCkuZ2V0SW1hZ2VzKCkuCiAgICAgICAgICAgIGtl\neVNldCgpLnRvQXJyYXkoKVswXTsKICAgICAgICBTdHJpbmcgaW1hZ2VLZXky\nID0gKFN0cmluZykgaXMyLmdldCgwKS5nZXRJbWFnZXMoKS4KICAgICAgICAg\nICAga2V5U2V0KCkudG9BcnJheSgpWzBdOwogICAgICAgIFN0cmluZyBpbWFn\nZUtleTMgPSAoU3RyaW5nKSBpczMuZ2V0KDApLmdldEltYWdlcygpLgogICAg\nICAgICAgICBrZXlTZXQoKS50b0FycmF5KClbMF07CiAgICAgICAgU3RyaW5n\nW10gcXVlcnkgPSB7CiAgICAgICAgICAgICJzZWxlY3QgaSBmcm9tIEl0ZW0x\nIGkiICsKICAgICAgICAgICAgICAgICIgd2hlcmUgPzEgPSBhbnkgIiArCiAg\nICAgICAgICAgICAgICAiIChzZWxlY3QgS0VZKGUpIGZyb20gSXRlbTEgaSwg\naW4oaS5pbWFnZXMpIGUpICIgKwogICAgICAgICAgICAgICAgIiBvcmRlciBi\neSBpIiwKICAgICAgICAgICAgInNlbGVjdCBpIGZyb20gSXRlbTEgaSIgKwog\nICAgICAgICAgICAgICAgIiB3aGVyZSBleGlzdHMgIiArCiAgICAgICAgICAg\nICAgICAiIChzZWxlY3QgZSBmcm9tIEl0ZW0xIGksIGluKGkuaW1hZ2VzKSBl\nIiArCiAgICAgICAgICAgICAgICAiICAgd2hlcmUgPzEgPSBLRVkoZSkpICIg\nKwogICAgICAgICAgICAgICAgIiBvcmRlciBieSBpIiwKICAgICAgICB9Owog\nICAgICAgIFN0cmluZ1tdIHF1ZXJ5MiA9IHsKICAgICAgICAgICAgInNlbGVj\ndCBpIGZyb20gSXRlbTIgaSIgKwogICAgICAgICAgICAgICAgIiB3aGVyZSA/\nMSA9IGFueSAiICsKICAgICAgICAgICAgICAgICIgKHNlbGVjdCBLRVkoZSkg\nZnJvbSBJdGVtMiBpLCBpbihpLmltYWdlcykgZSkgIiArCiAgICAgICAgICAg\nICAgICAiIG9yZGVyIGJ5IGkiLAogICAgICAgICAgICAic2VsZWN0IGkgZnJv\nbSBJdGVtMiBpIiArCiAgICAgICAgICAgICAgICAiIHdoZXJlIGV4aXN0cyAi\nICsKICAgICAgICAgICAgICAgICIgKHNlbGVjdCBlIGZyb20gSXRlbTIgaSwg\naW4oaS5pbWFnZXMpIGUiICsKICAgICAgICAgICAgICAgICIgICB3aGVyZSA/\nMSA9IEtFWShlKSkgIiArCiAgICAgICAgICAgICAgICAiIG9yZGVyIGJ5IGki\nLAogICAgICAgIH07CiAgICAgICAgU3RyaW5nW10gcXVlcnkzID0gewogICAg\nICAgICAgICAic2VsZWN0IGkgZnJvbSBJdGVtMyBpIiArCiAgICAgICAgICAg\nICAgICAiIHdoZXJlID8xID0gYW55ICIgKwogICAgICAgICAgICAgICAgIiAo\nc2VsZWN0IEtFWShlKSBmcm9tIEl0ZW0zIGksIGluKGkuaW1hZ2VzKSBlKSAi\nICsKICAgICAgICAgICAgICAgICIgb3JkZXIgYnkgaSIsCiAgICAgICAgICAg\nICJzZWxlY3QgaSBmcm9tIEl0ZW0zIGkiICsKICAgICAgICAgICAgICAgICIg\nd2hlcmUgZXhpc3RzICIgKwogICAgICAgICAgICAgICAgIiAoc2VsZWN0IGUg\nZnJvbSBJdGVtMyBpLCBpbihpLmltYWdlcykgZSIgKwogICAgICAgICAgICAg\nICAgIiAgIHdoZXJlID8xID0gS0VZKGUpKSAiICsKICAgICAgICAgICAgICAg\nICIgb3JkZXIgYnkgaSIsCiAgICAgICAgfTsKCiAgICAgICAgZm9yIChpbnQg\naSA9IDA7IGkgPCBxdWVyeS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBR\ndWVyeSBxID0gZW0uY3JlYXRlUXVlcnkocXVlcnlbaV0pOwogICAgICAgICAg\nICBxLnNldFBhcmFtZXRlcigxLCBpbWFnZUtleTEpOwogICAgICAgICAgICBp\nczEgPSBxLmdldFJlc3VsdExpc3QoKTsKICAgICAgICAgICAgZm9yIChJdGVt\nMSBpdGVtIDogaXMxKXsKICAgICAgICAgICAgICAgIGFzc2VydEl0ZW0xKGl0\nZW0pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZvciAoaW50\nIGkgPSAwOyBpIDwgcXVlcnkyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAg\nIFF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeShxdWVyeTJbaV0pOwogICAgICAg\nICAgICBxLnNldFBhcmFtZXRlcigxLCBpbWFnZUtleTIpOwogICAgICAgICAg\nICBpczIgPSBxLmdldFJlc3VsdExpc3QoKTsKICAgICAgICAgICAgZm9yIChJ\ndGVtMiBpdGVtIDogaXMyKXsKICAgICAgICAgICAgICAgIGFzc2VydEl0ZW0y\nKGl0ZW0pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZvciAo\naW50IGkgPSAwOyBpIDwgcXVlcnkzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAg\nICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeShxdWVyeTNbaV0pOwogICAg\nICAgICAgICBxLnNldFBhcmFtZXRlcigxLCBpbWFnZUtleTMpOwogICAgICAg\nICAgICBpczMgPSBxLmdldFJlc3VsdExpc3QoKTsKICAgICAgICAgICAgZm9y\nIChJdGVtMyBpdGVtIDogaXMzKXsKICAgICAgICAgICAgICAgIGFzc2VydEl0\nZW0zKGl0ZW0pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVt\nLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgcXVlcnlDb21wYW55\nKEVudGl0eU1hbmFnZXJGYWN0b3J5IGVtZikgewogICAgICAgIEVudGl0eU1h\nbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAg\nIEVudGl0eVRyYW5zYWN0aW9uIHRyYW4gPSBlbS5nZXRUcmFuc2FjdGlvbigp\nOwogICAgICAgIHRyYW4uYmVnaW4oKTsKICAgICAgICBRdWVyeSBxMSA9IGVt\nLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgYyBmcm9tIENvbXBhbnkxIGMiKTsKICAg\nICAgICBMaXN0PENvbXBhbnkxPiBjczEgPSBxMS5nZXRSZXN1bHRMaXN0KCk7\nCiAgICAgICAgZm9yIChDb21wYW55MSBjIDogY3MxKXsKICAgICAgICAgICAg\nYXNzZXJ0Q29tcGFueTEoYyk7CiAgICAgICAgfQogICAgICAgIFF1ZXJ5IHEy\nID0gZW0uY3JlYXRlUXVlcnkoInNlbGVjdCBjIGZyb20gQ29tcGFueTIgYyIp\nOwogICAgICAgIExpc3Q8Q29tcGFueTI+IGNzMiA9IHEyLmdldFJlc3VsdExp\nc3QoKTsKICAgICAgICBmb3IgKENvbXBhbnkyIGMgOiBjczIpewogICAgICAg\nICAgICBhc3NlcnRDb21wYW55MihjKTsKICAgICAgICB9CiAgICAgICAgdHJh\nbi5jb21taXQoKTsKCiAgICAgICAgZW0uY2xlYXIoKTsKICAgICAgICAvLyB0\nZXN0IEtFWShlKSBpbiBzdWJxdWVyeQogICAgICAgIERpdmlzaW9uIGQxID0g\nKERpdmlzaW9uKSAoKENvbXBhbnkxKSBjczEuZ2V0KDApKS5nZXRPcmdhbml6\nYXRpb24oKS4KICAgICAgICAgICAga2V5U2V0KCkudG9BcnJheSgpWzBdOwog\nICAgICAgIERpdmlzaW9uIGQyID0gKERpdmlzaW9uKSAoKENvbXBhbnkyKSBj\nczIuZ2V0KDApKS5nZXRPcmdhbml6YXRpb24oKS4KICAgICAgICAgICAga2V5\nU2V0KCkudG9BcnJheSgpWzBdOwogICAgICAgIFN0cmluZ1tdIHF1ZXJ5ID0g\newogICAgICAgICAgICAic2VsZWN0IGMgZnJvbSBDb21wYW55MSBjLCBpbihj\nLm9yZ2FuaXphdGlvbikgZCAiICsKICAgICAgICAgICAgICAgICIgd2hlcmUg\nS0VZKGQpID0gPzEiLAogICAgICAgICAgICAic2VsZWN0IGMgZnJvbSBDb21w\nYW55MSBjICIgKwogICAgICAgICAgICAgICAgIiB3aGVyZSA/MSA9ICIgKwog\nICAgICAgICAgICAgICAgIiAoc2VsZWN0IEtFWShkKSBmcm9tIENvbXBhbnkx\nIGMsIGluKGMub3JnYW5pemF0aW9uKSBkIiArCiAgICAgICAgICAgICAgICAi\nICAgd2hlcmUgZC5pZCA9IDEpIiArCiAgICAgICAgICAgICAgICAiIG9yZGVy\nIGJ5IGMgIiwgIAogICAgICAgICAgICAic2VsZWN0IGMgZnJvbSBDb21wYW55\nMSBjIHdoZXJlIGV4aXN0cyIgKwogICAgICAgICAgICAgICAgIiAoc2VsZWN0\nIGQgZnJvbSBpbihjLm9yZ2FuaXphdGlvbikgZCIgKwogICAgICAgICAgICAg\nICAgIiAgd2hlcmUgS0VZKGQpID0gPzEpIiArCiAgICAgICAgICAgICAgICAi\nIG9yZGVyIGJ5IGMgIiwgIAogICAgICAgICAgICAic2VsZWN0IGMgZnJvbSBD\nb21wYW55MSBjIHdoZXJlIGV4aXN0cyIgKwogICAgICAgICAgICAgICAgIiAo\nc2VsZWN0IGQgZnJvbSBjLm9yZ2FuaXphdGlvbiBkIiArCiAgICAgICAgICAg\nICAgICAiICB3aGVyZSBLRVkoZCkgPSA/MSkiICsKICAgICAgICAgICAgICAg\nICIgb3JkZXIgYnkgYyAiLCAgCiAgICAgICAgfTsKICAgICAgICBmb3IgKGlu\ndCBpID0gMDsgaSA8IHF1ZXJ5Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAg\nIFF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeShxdWVyeVtpXSk7CiAgICAgICAg\nICAgIHEuc2V0UGFyYW1ldGVyKDEsIGQxKTsKICAgICAgICAgICAgY3MxID0g\ncS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgICAgIGZvciAoQ29tcGFueTEg\nYyA6IGNzMSl7CiAgICAgICAgICAgICAgICBhc3NlcnRDb21wYW55MShjKTsK\nICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgU3RyaW5nW10gcXVl\ncnkyID0gewogICAgICAgICAgICAic2VsZWN0IGMgZnJvbSBDb21wYW55MiBj\nIiArCiAgICAgICAgICAgICAgICAiIHdoZXJlID8xID0gIiArCiAgICAgICAg\nICAgICAgICAiIChzZWxlY3QgS0VZKGQpIGZyb20gQ29tcGFueTIgYywgaW4o\nYy5vcmdhbml6YXRpb24pIGQiICsKICAgICAgICAgICAgICAgICIgICB3aGVy\nZSBkLmlkID0gMykiICsKICAgICAgICAgICAgICAgICIgb3JkZXIgYnkgYyAi\nLCAgCiAgICAgICAgICAgICJzZWxlY3QgYyBmcm9tIENvbXBhbnkyIGMgd2hl\ncmUgZXhpc3RzIiArCiAgICAgICAgICAgICAgICAiIChzZWxlY3QgZCBmcm9t\nIGluKGMub3JnYW5pemF0aW9uKSBkIiArCiAgICAgICAgICAgICAgICAiICB3\naGVyZSBLRVkoZCkgPSA/MSkiICsKICAgICAgICAgICAgICAgICIgb3JkZXIg\nYnkgYyAiLCAgCiAgICAgICAgICAgICJzZWxlY3QgYyBmcm9tIENvbXBhbnky\nIGMgd2hlcmUgZXhpc3RzIiArCiAgICAgICAgICAgICAgICAiIChzZWxlY3Qg\nZCBmcm9tIGMub3JnYW5pemF0aW9uIGQiICsKICAgICAgICAgICAgICAgICIg\nIHdoZXJlIEtFWShkKSA9ID8xKSIgKwogICAgICAgICAgICAgICAgIiBvcmRl\nciBieSBjICIsICAKICAgICAgICB9OwoKICAgICAgICBmb3IgKGludCBpID0g\nMDsgaSA8IHF1ZXJ5Mi5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBRdWVy\neSBxID0gZW0uY3JlYXRlUXVlcnkocXVlcnkyW2ldKTsKICAgICAgICAgICAg\ncS5zZXRQYXJhbWV0ZXIoMSwgZDIpOwogICAgICAgICAgICBjczIgPSBxLmdl\ndFJlc3VsdExpc3QoKTsKICAgICAgICAgICAgZm9yIChDb21wYW55MiBjIDog\nY3MyKXsKICAgICAgICAgICAgICAgIGFzc2VydENvbXBhbnkyKGMpOwogICAg\nICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgcXVlcnlEaXZpc2lvbihFbnRpdHlNYW5hZ2Vy\nRmFjdG9yeSBlbWYpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1m\nLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBFbnRpdHlUcmFuc2Fj\ndGlvbiB0cmFuID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsKICAgICAgICB0cmFu\nLmJlZ2luKCk7CiAgICAgICAgUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5KCJz\nZWxlY3QgZCBmcm9tIERpdmlzaW9uIGQiKTsKICAgICAgICBMaXN0PERpdmlz\naW9uPiBkcyA9IHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGZvciAoRGl2\naXNpb24gZCA6IGRzKXsKICAgICAgICAgICAgYXNzZXJ0RGl2aXNpb24oZCk7\nCiAgICAgICAgfQogICAgICAgIHRyYW4uY29tbWl0KCk7CiAgICAgICAgZW0u\nY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBxdWVyeVZpY2VQcmVz\naWRlbnQoRW50aXR5TWFuYWdlckZhY3RvcnkgZW1mKSB7CiAgICAgICAgRW50\naXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAg\nICAgICAgRW50aXR5VHJhbnNhY3Rpb24gdHJhbiA9IGVtLmdldFRyYW5zYWN0\naW9uKCk7CiAgICAgICAgdHJhbi5iZWdpbigpOwogICAgICAgIFF1ZXJ5IHEg\nPSBlbS5jcmVhdGVRdWVyeSgic2VsZWN0IHZwIGZyb20gVmljZVByZXNpZGVu\ndCB2cCIpOwogICAgICAgIExpc3Q8VmljZVByZXNpZGVudD4gdnBzID0gcS5n\nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgZm9yIChWaWNlUHJlc2lkZW50IHZw\nIDogdnBzKXsKICAgICAgICAgICAgYXNzZXJ0VmljZVByZXNpZGVudCh2cCk7\nCiAgICAgICAgfQogICAgICAgIHRyYW4uY29tbWl0KCk7CiAgICAgICAgZW0u\nY2xvc2UoKTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBUbyBydW4gdGhp\ncyBtZXRob2Qgb24gT3JhY2xlIHJlcXVpcmVzIHRoZSB1c2VyIHRvIGhhdmUg\ndGhlIGF1dGhvcml0eQogICAgICogdG8gY3JlYXRlIHRyaWdnZXJzLiAgZXgu\nICBHUkFOVCBDUkVBVEUgVFJJR0dFUiBUTyAiU0NPVFQiCiAgICAgKi8KICAg\nIHB1YmxpYyB2b2lkIGNyZWF0ZUVtYmVkZGFibGVDb250YWluaW5nUmVsYXRp\nb25XaXRoR2VuZXJhdGVkS2V5KCkgCiAgICAgICAgdGhyb3dzIElPRXhjZXB0\naW9uLCBTUUxFeGNlcHRpb24gewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0g\nPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIAogICAgICAg\nIE9wZW5KUEFFbnRpdHlNYW5hZ2VyU1BJIG9qZW0gPSAoT3BlbkpQQUVudGl0\neU1hbmFnZXJTUEkpZW07CiAgICAgICAgSkRCQ0NvbmZpZ3VyYXRpb24gY29u\nZiA9IChKREJDQ29uZmlndXJhdGlvbikgb2plbS5nZXRDb25maWd1cmF0aW9u\nKCk7CiAgICAgICAgREJEaWN0aW9uYXJ5IGRpY3QgPSBjb25mLmdldERCRGlj\ndGlvbmFyeUluc3RhbmNlKCk7CiAgICAgICAgaWYgKGRpY3QgaW5zdGFuY2Vv\nZiBPcmFjbGVEaWN0aW9uYXJ5KSB7CiAgICAgICAgICAgIHJlY3JlYXRlT3Jh\nY2xlQXJ0aWZhY3RzKChPcmFjbGVEaWN0aW9uYXJ5KWRpY3QsIGNvbmYpOyAg\nICAgICAgICAgICAgICAKICAgICAgICB9CiAgICAgICAgRW50aXR5VHJhbnNh\nY3Rpb24gdHJhbiA9IGVtLmdldFRyYW5zYWN0aW9uKCk7CiAgICAgICAgCiAg\nICAgICAgQm9vayBiID0gbmV3IEJvb2soMTU5MDU5NjQ1NSk7CiAgICAgICAg\nU2VsbGVyIGJvYiA9IG5ldyBTZWxsZXIoIkJvYidzIGJvb2tzISIpOwogICAg\nICAgIFNlbGxlciBqaW0gPSBuZXcgU2VsbGVyKCJKaW0ncyBib29rcyEiKTsK\nICAgICAgICBTZWxsZXIgbWlrZSA9IG5ldyBTZWxsZXIoIk1pa2VzJ3MgYm9v\na3MhIik7CiAgICAgICAgYi5hZGRMaXN0aW5nKG5ldyBMaXN0aW5nKGJvYiAs\nIDQ0LjE1KSk7CiAgICAgICAgYi5hZGRMaXN0aW5nKG5ldyBMaXN0aW5nKGpp\nbSAsIDM0LjE1KSk7CiAgICAgICAgYi5hZGRMaXN0aW5nKG5ldyBMaXN0aW5n\nKG1pa2UgLCAxNC4xNSkpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCku\nYmVnaW4oKTsKICAgICAgICBlbS5wZXJzaXN0KGIpOwogICAgICAgIGVtLmdl\ndFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgaW50IGlkID0gYi5n\nZXRJZCgpOwogICAgICAgIGVtLmNsZWFyKCk7CiAgICAgICAgQm9vayBiMiA9\nIGVtLmZpbmQoQm9vay5jbGFzcywgaWQpOwogICAgICAgIFNldDxMaXN0aW5n\nPiBsaXN0aW5ncyA9IGIyLmdldExpc3RpbmdzKCk7CiAgICAgICAgZm9yIChM\naXN0aW5nIGxpc3RpbmcgOiBsaXN0aW5ncykgewogICAgICAgICAgICBTZWxs\nZXIgc2VsbGVyID0gbGlzdGluZy5nZXRTZWxsZXIoKTsKICAgICAgICAgICAg\nYXNzZXJ0Tm90TnVsbChzZWxsZXIpOwogICAgICAgICAgICBhc3NlcnRUcnVl\nKHNlbGxlci5nZXRJZCgpICE9IDApOwogICAgICAgIH0KICAgIH0KCiAgICAv\nKgogICAgICogVGhpcyBtZXRob2QgdXNlcyB0aGUgbWFwcGluZyB0b29sIHRv\nIHJlZ2VuZXJhdGUgT3JhY2xlIGRiIGFydGlmYWN0cwogICAgICogd2l0aCB0\naGUgdXNlVHJpZ2dlcnNGb3JBdXRvQXNzaWduIGRiIG9wdGlvbiBlbmFibGVk\nLgogICAgICovCiAgICBwcml2YXRlIHZvaWQgcmVjcmVhdGVPcmFjbGVBcnRp\nZmFjdHMoT3JhY2xlRGljdGlvbmFyeSBkaWN0LCAKICAgICAgICBKREJDQ29u\nZmlndXJhdGlvbiBjb25mKSB0aHJvd3MgSU9FeGNlcHRpb24sIFNRTEV4Y2Vw\ndGlvbiB7CiAgICAgICAgZGljdC51c2VUcmlnZ2Vyc0ZvckF1dG9Bc3NpZ24g\nPSB0cnVlOwogICAgICAgIEZsYWdzIGZsYWdzID0gbmV3IE1hcHBpbmdUb29s\nLkZsYWdzKCk7CiAgICAgICAgZmxhZ3MuZHJvcFRhYmxlcyA9IHRydWU7CiAg\nICAgICAgZmxhZ3Muc2NoZW1hQWN0aW9uID0gImRyb3AsYWRkIjsKICAgICAg\nICBmbGFncy5zZXF1ZW5jZXMgPSB0cnVlOwogICAgICAgIGZsYWdzLmlnbm9y\nZUVycm9ycyA9IHRydWU7CiAgICAgICAgZmxhZ3MuZHJvcFNlcXVlbmNlcyA9\nIHRydWU7CiAgICAgICAgTWFwcGluZ1Rvb2wucnVuKCAKICAgICAgICAgICAg\nY29uZiwgCiAgICAgICAgICAgIG5ldyBTdHJpbmdbXSB7ICJvcmcuYXBhY2hl\nLm9wZW5qcGEucGVyc2lzdGVuY2UuZW1iZWQuQm9vayIgfSwKICAgICAgICAg\nICAgZmxhZ3MsCiAgICAgICAgICAgIGNvbmYuZ2V0Q2xhc3NSZXNvbHZlcklu\nc3RhbmNlKCkuCiAgICAgICAgICAgIGdldENsYXNzTG9hZGVyKE1hcHBpbmdU\nb29sLmNsYXNzLCBudWxsKSk7ICAgICAgICAKICAgIH0KCiAgICAvKgogICAg\nICogRW50aXR5QV9FbWJlZF9Db21wbGV4IHJvdXRpbmVzCiAgICAgKi8KICAg\nIHB1YmxpYyB2b2lkIHRlc3RFbnRpdHlBX0VtYmVkX0NvbXBsZXgoKSB7CiAg\nICAgICAgZ2V0TG9nKCkudHJhY2UoInRlc3RFbnRpdHlBX0VtYmVkX0NvbXBs\nZXgoKSAtIGVudGVyZWQiKTsKICAgICAgICBjcmVhdGVFbnRpdHlBX0VtYmVk\nX0NvbXBsZXgobnVsbCk7CiAgICAgICAgcXVlcnlFbnRpdHlBX0VtYmVkX0Nv\nbXBsZXgobnVsbCk7CiAgICAgICAgZmluZEVudGl0eUFfRW1iZWRfQ29tcGxl\neChudWxsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0RW50aXR5QV9F\nbWJlZF9Db21wbGV4MigpIHsKICAgICAgICBnZXRMb2coKS50cmFjZSgidGVz\ndEVudGl0eUFfRW1iZWRfQ29tcGxleDIoKSAtIGVudGVyZWQiKTsKICAgICAg\nICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIo\nKTsKICAgICAgICBlbS5jbGVhcigpOwogICAgICAgIGNyZWF0ZUVudGl0eUFf\nRW1iZWRfQ29tcGxleChlbSk7CiAgICAgICAgZW0uY2xlYXIoKTsKICAgICAg\nICAvL3F1ZXJ5RW50aXR5QV9FbWJlZF9Db21wbGV4KGVtKTsKICAgICAgICAv\nL2VtLmNsZWFyKCk7CiAgICAgICAgZmluZEVudGl0eUFfRW1iZWRfQ29tcGxl\neChlbSk7CiAgICAgICAgZW0uY2xlYXIoKTsKICAgICAgICB1cGRhdGVFbnRp\ndHlBX0VtYmVkX0NvbXBsZXgoZW0pOwogICAgICAgIGVtLmNsZWFyKCk7CiAg\nICAgICAgZmluZEVudGl0eUFfRW1iZWRfQ29tcGxleChlbSk7CiAgICAgICAg\nZW0uY2xlYXIoKTsKICAgICAgICByZW1vdmVFbnRpdHlBX0VtYmVkX0NvbXBs\nZXgoZW0pOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgY3JlYXRlRW50aXR5QV9FbWJlZF9Db21wbGV4KEVudGl0eU1hbmFn\nZXIgZW0pIHsKICAgICAgICBCb29sZWFuIGVtQ2xvc2UgPSBmYWxzZTsKICAg\nICAgICBpZiAoZW0gPT0gbnVsbCkgewogICAgICAgICAgICBlbSA9IGVtZi5j\ncmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgICAgIGVtQ2xvc2UgPSB0\ncnVlOwogICAgICAgIH0KICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJl\nZ2luKCk7CiAgICAgICAgY3JlYXRlRW50aXR5QV9FbWJlZF9Db21wbGV4KGVt\nLCBJRCk7CiAgICAgICAgLy9lbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7\nCiAgICAgICAgZW0uZmx1c2goKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlv\nbigpLmNvbW1pdCgpOwogICAgICAgIGlmIChlbUNsb3NlKSB7CiAgICAgICAg\nICAgIGVtLmNsb3NlKCk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIGNyZWF0ZUVudGl0eUFfRW1iZWRfQ29tcGxleChFbnRpdHlNYW5hZ2Vy\nIGVtLCBpbnQgaWQpIHsKICAgICAgICBnZXRMb2coKS50cmFjZSgiY3JlYXRl\nRW50aXR5QV9FbWJlZF9Db21wbGV4KCkgLSBlbnRlcmVkIik7CiAgICAgICAg\nRW50aXR5QV9FbWJlZF9Db21wbGV4IGEgPSBuZXcgRW50aXR5QV9FbWJlZF9D\nb21wbGV4KCk7CiAgICAgICAgYS5zZXRJZChpZCk7CiAgICAgICAgYS5zZXRO\nYW1lKCJhIiArIGlkKTsKICAgICAgICBhLnNldEFnZShpZCk7CiAgICAgICAg\nZm9yIChpbnQgaSA9IDA7IGkgPCBudW1CYXNpY1R5cGVzOyBpKyspIHsKICAg\nICAgICAgICAgYS5hZGROaWNrTmFtZSgibmlja05hbWVfIiArIGlkICsgaSk7\nCiAgICAgICAgfQogICAgICAgIGEuYWRkQ3JlZGl0UmF0aW5nKEVudGl0eUFf\nRW1iZWRfQ29tcGxleC5DcmVkaXRSYXRpbmcuUE9PUik7CiAgICAgICAgYS5h\nZGRUaW1lc3RhbXAobmV3IFRpbWVzdGFtcChjYWwuZ2V0VGltZUluTWlsbGlz\nKCkpKTsKICAgICAgICBhLmFkZExvYigibG9iXzAiKTsKICAgICAgICBhLnNl\ndEVtYmVkKGNyZWF0ZUVtYmVkX0VtYmVkKGVtLCBudW1FbWJlZGRhYmxlcywg\nMCkpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbnVtRW1iZWRkYWJs\nZXM7IGkrKykgewogICAgICAgICAgICBFbWJlZF9FbWJlZCBlbWJlZCA9IGNy\nZWF0ZUVtYmVkX0VtYmVkKGVtLCBpZCwgaSk7CiAgICAgICAgICAgIGEuYWRk\nRW1iZWQoZW1iZWQpOwogICAgICAgIH0KICAgICAgICBmb3IgKGludCBpID0g\nMDsgaSA8IG51bUVtYmVkZGFibGVzOyBpKyspIHsKICAgICAgICAgICAgRW1i\nZWRfVG9PbmUgZW1iZWQgPSBjcmVhdGVFbWJlZF9Ub09uZShlbSwgaStpZCk7\nCiAgICAgICAgICAgIGEuYWRkRW1iZWQxVG9PbmVzKGVtYmVkKTsKICAgICAg\nICB9CiAgICAgICAgYS5zZXRUcmFuc2llbnRKYXZhVmFsdWUodGltZUhhc2gp\nOwogICAgICAgIGEuc2V0VHJhbnNpZW50VmFsdWUodGltZUhhc2gpOwogICAg\nICAgIGVtLnBlcnNpc3QoYSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgY2hl\nY2tFbnRpdHlBX0VtYmVkX0NvbXBsZXgoRW50aXR5QV9FbWJlZF9Db21wbGV4\nIGEpIHsKICAgICAgICBnZXRMb2coKS50cmFjZSgiY2hlY2tFbnRpdHlBX0Vt\nYmVkX0NvbXBsZXgoKSAtIGVudGVyZWQiKTsKICAgICAgICBpbnQgaWQgPSBh\nLmdldElkKCk7CiAgICAgICAgU3RyaW5nIG5hbWUgPSBhLmdldE5hbWUoKTsK\nICAgICAgICBpbnQgYWdlID0gYS5nZXRBZ2UoKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoSUQsIGlkKTsKICAgICAgICBhc3NlcnRFcXVhbHMoImEiICsgaWQg\nLG5hbWUpOwogICAgICAgIGFzc2VydEVxdWFscyhJRCwgYWdlKTsKICAgICAg\nICBTZXQ8U3RyaW5nPiBuaWNrTmFtZXMgPSBhLmdldE5pY2tOYW1lcygpOwog\nICAgICAgIGZvciAoU3RyaW5nIG5pY2tOYW1lIDogbmlja05hbWVzKSB7CiAg\nICAgICAgICAgIGFzc2VydEVxdWFscygibmlja05hbWVfIiArIGlkICsgIjAi\nLCBuaWNrTmFtZSk7CiAgICAgICAgfQogICAgICAgIExpc3Q8RW50aXR5QV9F\nbWJlZF9Db21wbGV4LkNyZWRpdFJhdGluZz4gY3IgPSBhLmdldENyZWRpdFJh\ndGluZygpOwogICAgICAgIGZvciAoRW50aXR5QV9FbWJlZF9Db21wbGV4LkNy\nZWRpdFJhdGluZyBjIDogY3IpIHsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxz\nKCJQT09SIiwgYy50b1N0cmluZygpKTsKICAgICAgICB9CiAgICAgICAgTGlz\ndDxUaW1lc3RhbXA+IHRzdGFtcHMgPSBhLmdldFRpbWVzdGFtcHMoKTsKICAg\nICAgICBmb3IgKFRpbWVzdGFtcCB0cyA6IHRzdGFtcHMpIHsKICAgICAgICAg\nICAgYXNzZXJ0Tm90RXF1YWxzKDAsIHRzLmdldFRpbWUoKSk7CiAgICAgICAg\nfQogICAgICAgIExpc3Q8U3RyaW5nPiBsb2JzID0gYS5nZXRMb2JzKCk7CiAg\nICAgICAgaW50IGkgPSAwOwogICAgICAgIGZvciAoU3RyaW5nIGxvYiA6IGxv\nYnMpIHsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKCJsb2JfIiArIGkrKywg\nbG9iKTsKICAgICAgICB9CiAgICAgICAgRW1iZWRfRW1iZWQgZW1iZWRkZWQg\nPSBhLmdldEVtYmVkKCk7CiAgICAgICAgY2hlY2tFbWJlZF9FbWJlZChlbWJl\nZGRlZCk7CiAgICAgICAgTGlzdDxFbWJlZF9FbWJlZD4gZW1iZWRzID0gYS5n\nZXRFbWJlZHMoKTsKICAgICAgICBmb3IgKEVtYmVkX0VtYmVkIGVtYmVkIDog\nZW1iZWRzKSB7CiAgICAgICAgICAgIGNoZWNrRW1iZWRfRW1iZWQoZW1iZWQp\nOwogICAgICAgIH0KICAgICAgICBTZXQ8RW1iZWRfVG9PbmU+IGVtYmVkT25l\ncyA9IGEuZ2V0RW1iZWQxVG9PbmVzKCk7CiAgICAgICAgZm9yIChFbWJlZF9U\nb09uZSBlbWJlZCA6IGVtYmVkT25lcykgewogICAgICAgICAgICBjaGVja0Vt\nYmVkX1RvT25lKGVtYmVkKTsKICAgICAgICB9CiAgICAgICAgYXNzZXJ0Tm90\nRXF1YWxzKGEuZ2V0VHJhbnNpZW50SmF2YVZhbHVlKCksIHRpbWVIYXNoKTsK\nICAgICAgICBhc3NlcnROb3RFcXVhbHMoYS5nZXRUcmFuc2llbnRWYWx1ZSgp\nLCB0aW1lSGFzaCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgZmluZEVudGl0\neUFfRW1iZWRfQ29tcGxleChFbnRpdHlNYW5hZ2VyIGVtKSB7CiAgICAgICAg\nQm9vbGVhbiBlbUNsb3NlID0gZmFsc2U7CiAgICAgICAgZ2V0TG9nKCkudHJh\nY2UoImZpbmRFbnRpdHlBX0VtYmVkX0NvbXBsZXgoKSAtIGVudGVyZWQiKTsK\nICAgICAgICBpZiAoZW0gPT0gbnVsbCkgewogICAgICAgICAgICBlbSA9IGVt\nZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgICAgIGVtQ2xvc2Ug\nPSB0cnVlOwogICAgICAgIH0KICAgICAgICBFbnRpdHlBX0VtYmVkX0NvbXBs\nZXggYSA9IGVtLmZpbmQoRW50aXR5QV9FbWJlZF9Db21wbGV4LmNsYXNzLCBJ\nRCk7CiAgICAgICAgY2hlY2tFbnRpdHlBX0VtYmVkX0NvbXBsZXgoYSk7CiAg\nICAgICAgaWYgKGVtQ2xvc2UpIHsKICAgICAgICAgICAgZW0uY2xvc2UoKTsK\nICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZvaWQgdXBkYXRlRW50aXR5\nQV9FbWJlZF9Db21wbGV4KEVudGl0eU1hbmFnZXIgZW0pIHsKICAgICAgICBC\nb29sZWFuIGVtQ2xvc2UgPSBmYWxzZTsKICAgICAgICBnZXRMb2coKS50cmFj\nZSgidXBkYXRlRW50aXR5QV9FbWJlZF9Db21wbGV4KCkgLSBlbnRlcmVkIik7\nCiAgICAgICAgaWYgKGVtID09IG51bGwpIHsKICAgICAgICAgICAgZW0gPSBl\nbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgICAgICBlbUNsb3Nl\nID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24o\nKS5iZWdpbigpOwogICAgICAgIEVudGl0eUFfRW1iZWRfQ29tcGxleCBhID0g\nZW0uZmluZChFbnRpdHlBX0VtYmVkX0NvbXBsZXguY2xhc3MsIElEKTsKICAg\nICAgICBjaGVja0VudGl0eUFfRW1iZWRfQ29tcGxleChhKTsKICAgICAgICBm\nb3IgKGludCBpID0gMTsgaSA8IG51bUVtYmVkZGFibGVzOyBpKyspIHsKICAg\nICAgICAgICAgYS5hZGRMb2IoImxvYl8iICsgaSk7CiAgICAgICAgfQogICAg\nICAgIGEuc2V0VHJhbnNpZW50SmF2YVZhbHVlKDIwMDkpOwogICAgICAgIGEu\nc2V0VHJhbnNpZW50VmFsdWUoMjAwOSk7CiAgICAgICAgZW0ucGVyc2lzdChh\nKTsKICAgICAgICBlbS5mbHVzaCgpOwogICAgICAgIGVtLmdldFRyYW5zYWN0\naW9uKCkuY29tbWl0KCk7CiAgICAgICAgaWYgKGVtQ2xvc2UpIHsKICAgICAg\nICAgICAgZW0uY2xvc2UoKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgcmVtb3ZlRW50aXR5QV9FbWJlZF9Db21wbGV4KEVudGl0eU1hbmFn\nZXIgZW0pIHsKICAgICAgICBCb29sZWFuIGVtQ2xvc2UgPSBmYWxzZTsKICAg\nICAgICBnZXRMb2coKS50cmFjZSgicmVtb3ZlRW50aXR5QV9FbWJlZF9Db21w\nbGV4KCkgLSBlbnRlcmVkIik7CiAgICAgICAgaWYgKGVtID09IG51bGwpIHsK\nICAgICAgICAgICAgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwog\nICAgICAgICAgICBlbUNsb3NlID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAg\nZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIEVudGl0eUFf\nRW1iZWRfQ29tcGxleCBhID0gZW0uZmluZChFbnRpdHlBX0VtYmVkX0NvbXBs\nZXguY2xhc3MsIElEKTsKICAgICAgICBjaGVja0VudGl0eUFfRW1iZWRfQ29t\ncGxleChhKTsKICAgICAgICBlbS5yZW1vdmUoYSk7CiAgICAgICAgZW0uZmx1\nc2goKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwog\nICAgICAgIGVtLmNsZWFyKCk7CiAgICAgICAgYSA9IGVtLmZpbmQoRW50aXR5\nQV9FbWJlZF9Db21wbGV4LmNsYXNzLCBJRCk7CiAgICAgICAgYXNzZXJ0TnVs\nbCgiRW50aXR5IHNob3VsZCBubyBsb25nZXIgZXhpc3QiLCBhKTsKICAgICAg\nICBpZiAoZW1DbG9zZSkgewogICAgICAgICAgICBlbS5jbG9zZSgpOwogICAg\nICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCBxdWVyeUVudGl0eUFfRW1i\nZWRfQ29tcGxleChFbnRpdHlNYW5hZ2VyIGVtKSB7CiAgICAgICAgQm9vbGVh\nbiBlbUNsb3NlID0gZmFsc2U7CiAgICAgICAgZ2V0TG9nKCkudHJhY2UoInF1\nZXJ5RW50aXR5QV9FbWJlZF9Db21wbGV4KCkgLSBlbnRlcmVkIik7CiAgICAg\nICAgaWYgKGVtID09IG51bGwpIHsKICAgICAgICAgICAgZW0gPSBlbWYuY3Jl\nYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgICAgICBlbUNsb3NlID0gdHJ1\nZTsKICAgICAgICB9CiAgICAgICAgU3RyaW5nW10gcXVlcnkgPSB7CiAgICAg\nICAgICAgICJzZWxlY3QgZSBmcm9tICIgKwogICAgICAgICAgICAgICAgIiBF\nbnRpdHlBX0VtYmVkX0NvbXBsZXggYSAiICsKICAgICAgICAgICAgICAgICIg\nLCBpbiAoYS5uaWNrTmFtZXMpIGUgb3JkZXIgYnkgYS5pZCIsCiAgICAgICAg\nICAgICJzZWxlY3QgZSBmcm9tICIgKwogICAgICAgICAgICAgICAgIiBFbnRp\ndHlBX0VtYmVkX0NvbXBsZXggYSAiICsKICAgICAgICAgICAgICAgICIgLCBp\nbiAoYS5uaWNrTmFtZXMpIGUgb3JkZXIgYnkgYS5pZCIsCiAgICAgICAgICAg\nICJzZWxlY3QgZSBmcm9tICIgKwogICAgICAgICAgICAgICAgIiBFbnRpdHlB\nX0VtYmVkX0NvbXBsZXggYSAiICsKICAgICAgICAgICAgICAgICIgLCBpbiAo\nYS5uaWNrTmFtZXMpIGUgb3JkZXIgYnkgZSIsCiAgICAgICAgICAgICJzZWxl\nY3QgYSBmcm9tICIgKwogICAgICAgICAgICAgICAgIiBFbnRpdHlBX0VtYmVk\nX0NvbXBsZXggYSAiICsKICAgICAgICAgICAgICAgICIgV0hFUkUgYS5uaWNr\nTmFtZXMgSVMgRU1QVFkgb3JkZXIgYnkgYSIsCiAgICAgICAgICAgICJzZWxl\nY3QgYSBmcm9tICIgKwogICAgICAgICAgICAgICAgIiBFbnRpdHlBX0VtYmVk\nX0NvbXBsZXggYSAiICsKICAgICAgICAgICAgICAgICIgV0hFUkUgZXhpc3Rz\nIChzZWxlY3QgbiBmcm9tIEVudGl0eUFfRW1iZWRfQ29tcGxleCBhLCAiICsK\nICAgICAgICAgICAgICAgICIgaW4gKGEubmlja05hbWVzKSBuIHdoZXJlIG4g\nbGlrZSAnJTEnKSAiICsKICAgICAgICAgICAgICAgICIgb3JkZXIgYnkgYSIs\nCiAgICAgICAgfTsKICAgICAgICBMaXN0IHJzID0gbnVsbDsKICAgICAgICBm\nb3IgKGludCBpID0gMDsgaSA8IHF1ZXJ5Lmxlbmd0aDsgaSsrKSB7CiAgICAg\nICAgICAgIHJzID0gZW0uY3JlYXRlUXVlcnkocXVlcnlbaV0pLmdldFJlc3Vs\ndExpc3QoKTsKICAgICAgICAgICAgc3dpdGNoIChpKSB7CiAgICAgICAgICAg\nIGNhc2UgMDoKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBjYXNl\nIDI6CiAgICAgICAgICAgICAgICBhc3NlcnRUcnVlKHJzLnNpemUoKSA+IDAp\nOwogICAgICAgICAgICAgICAgT2JqZWN0IG9iaiA9IHJzLmdldCgwKTsKICAg\nICAgICAgICAgICAgIGFzc2VydFRydWUob2JqIGluc3RhbmNlb2YgU3RyaW5n\nKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDM6\nCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIGFzc2VydFRy\ndWUocnMuc2l6ZSgpID09IDApOwogICAgICAgICAgICB9CiAgICAgICAgICAg\nIGVtLmNsZWFyKCk7CiAgICAgICAgfQogICAgICAgIGVtLmdldFRyYW5zYWN0\naW9uKCkuYmVnaW4oKTsKICAgICAgICBRdWVyeSBxID0gZW0uY3JlYXRlUXVl\ncnkoInNlbGVjdCBhIGZyb20gRW50aXR5QV9FbWJlZF9Db21wbGV4IGEiKTsK\nICAgICAgICBMaXN0PEVudGl0eUFfRW1iZWRfQ29tcGxleD4gYXMgPSBxLmdl\ndFJlc3VsdExpc3QoKTsKICAgICAgICBmb3IgKEVudGl0eUFfRW1iZWRfQ29t\ncGxleCBhIDogYXMpIHsKICAgICAgICAgICAgY2hlY2tFbnRpdHlBX0VtYmVk\nX0NvbXBsZXgoYSk7CiAgICAgICAgfQogICAgICAgIGVtLmdldFRyYW5zYWN0\naW9uKCkuY29tbWl0KCk7CiAgICAgICAgaWYgKGVtQ2xvc2UpIHsKICAgICAg\nICAgICAgZW0uY2xvc2UoKTsKICAgICAgICB9CiAgICB9CgogICAgLyoKICAg\nICAqIEVudGl0eUFfRW1iZWRfQ29tcGxleCByb3V0aW5lcwogICAgICovCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0RW1iZWRkYWJsZUNvbGxVc2luZ0FycmF5c0Fz\nTGlzdCgpIHsKICAgICAgICBnZXRMb2coKS50cmFjZSgidGVzdEVtYmVkZGFi\nbGVDb2xsVXNpbmdBcnJheXNBc0xpc3QoKSAtIGVudGVyZWQiKTsKICAgICAg\nICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIo\nKTsKICAgICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0cmFuID0gZW0uZ2V0VHJh\nbnNhY3Rpb24oKTsKICAgICAgICBFbWJlZF9FbWJlZFtdIGVtYmVkQXJyYXkg\nPSBuZXcgRW1iZWRfRW1iZWRbNV07CiAgICAgICAgZm9yIChpbnQgaSA9IDE7\nIGkgPCA1OyBpKyspIHsKICAgICAgICAgIGVtYmVkQXJyYXlbaV0gPSBuZXcg\nRW1iZWRfRW1iZWQoKTsKICAgICAgICAgIGVtYmVkQXJyYXlbaV0uc2V0SW50\nVmFsMShpKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgTGlzdCBlbWJl\nZExpc3QgPSBBcnJheXMuYXNMaXN0KGVtYmVkQXJyYXkpOwogICAgICAgIEVu\ndGl0eUFfQ29sbF9FbWJlZF9FbWJlZCBhMSA9IG5ldyBFbnRpdHlBX0NvbGxf\nRW1iZWRfRW1iZWQoKTsKICAgICAgICBhMS5zZXRJZCgxKTsKICAgICAgICBh\nMS5zZXRBZ2UoMSk7CiAgICAgICAgYTEuc2V0TmFtZSgibmFtZSIgKyAxKTsK\nICAgICAgICBhMS5zZXRFbWJlZHMoZW1iZWRMaXN0KTsKICAgICAgICAKICAg\nICAgICBlbS5wZXJzaXN0KGExKTsKICAgICAgICB0cmFuLmJlZ2luKCk7CiAg\nICAgICAgZW0uZmx1c2goKTsKICAgICAgICB0cmFuLmNvbW1pdCgpOwoKICAg\nICAgICAvL3VwZGF0ZQogICAgICAgIHRyYW4uYmVnaW4oKTsKICAgICAgICBF\nbWJlZF9FbWJlZCBlbWJlZDEgPSBuZXcgRW1iZWRfRW1iZWQoKTsKICAgICAg\nICBlbWJlZDEuc2V0SW50VmFsMSgxMDApOwogICAgICAgIGExLmFkZEVtYmVk\nKGVtYmVkMSk7CiAgICAgICAgdHJhbi5jb21taXQoKTsKICAgICAgICBlbS5j\nbGVhcigpOwogICAgICAgIAogICAgICAgIC8vZmluZAogICAgICAgIEVudGl0\neUFfQ29sbF9FbWJlZF9FbWJlZCBmaW5kQSA9IGVtLmZpbmQoRW50aXR5QV9D\nb2xsX0VtYmVkX0VtYmVkLmNsYXNzLCAxKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoNiwgZmluZEEuZ2V0RW1iZWRzKCkuc2l6ZSgpKTsKICAgICAgICBlbS5j\nbG9zZSgpOwogICAgfQoKICAgIC8qCiAgICAgKiB0ZXN0IHRoZSBkZWZhdWx0\nIG5hbWUgZm9yIGVsZW1lbnQgY29sbGVjdGlvbiB0YWJsZQogICAgICovCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0RGVmYXVsdE5hbWVGb3JFbGVtZW50Q29sbGVj\ndGlvbigpIHsKICAgICAgICBnZXRMb2coKS50cmFjZSgidGVzdERlZmF1bHRO\nYW1lRm9yRWxlbWVudENvbGxlY3Rpb24oKSAtIGVudGVyZWQiKTsKICAgICAg\nICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIo\nKTsKICAgICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0cmFuID0gZW0uZ2V0VHJh\nbnNhY3Rpb24oKTsKICAgICAgICB0cmFuLmJlZ2luKCk7IAogICAgICAgIEEg\nYSA9IG5ldyBBKCk7CiAgICAgICAgYS5zZXRJZCgiMSIpOwogICAgICAgIEVt\nYmVkIGVtYmVkID0gbmV3IEVtYmVkKCk7CiAgICAgICAgZW1iZWQuc2V0SW50\nVmFsMSgxKTsKICAgICAgICBlbWJlZC5zZXRJbnRWYWwyKDIpOwogICAgICAg\nIGVtYmVkLnNldEludFZhbDMoMyk7CiAgICAgICAgU2V0IGVtYmVkcyA9IG5l\ndyBIYXNoU2V0KCk7CiAgICAgICAgZW1iZWRzLmFkZChlbWJlZCk7CiAgICAg\nICAgYS5zZXRFbWJlZHMoZW1iZWRzKTsKICAgICAgICBDb2xsZWN0aW9uPERh\ndGU+IGRhdGVzID0gbmV3IEFycmF5TGlzdDxEYXRlPigpOwogICAgICAgIGRh\ndGVzLmFkZChuZXcgRGF0ZSgpKTsKICAgICAgICBhLnNldENvbGxlY3Rpb25E\nYXRlKGRhdGVzKTsKICAgICAgICBlbS5wZXJzaXN0KGEpOwogICAgICAgIHRy\nYW4uY29tbWl0KCk7CiAgICAgICAgYm9vbGVhbiBmb3VuZCA9IGZhbHNlOwog\nICAgICAgIGZvciAoU3RyaW5nIHNxbFN0ciA6IHNxbCkgewogICAgICAgICAg\nICBpZiAoc3FsU3RyLnRvVXBwZXJDYXNlKCkuaW5kZXhPZigiQV9FTUJFRFMi\nKSAhPSAtMSkgewogICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwogICAg\nICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0gCiAgICAgICAgfQog\nICAgICAgIGFzc2VydFRydWUoZm91bmQpOwogICAgICAgIAogICAgICAgIGZv\ndW5kID0gZmFsc2U7CiAgICAgICAgZm9yIChTdHJpbmcgc3FsU3RyIDogc3Fs\nKSB7CiAgICAgICAgICAgIGlmIChzcWxTdHIudG9VcHBlckNhc2UoKS5pbmRl\neE9mKCJWQUxVRSIpICE9IC0xKSB7CiAgICAgICAgICAgICAgICBmb3VuZCA9\nIHRydWU7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfSAK\nICAgICAgICB9CiAgICAgICAgYXNzZXJ0VHJ1ZShmb3VuZCk7CiAgICB9Cn0K\n","encoding":"base64"}

