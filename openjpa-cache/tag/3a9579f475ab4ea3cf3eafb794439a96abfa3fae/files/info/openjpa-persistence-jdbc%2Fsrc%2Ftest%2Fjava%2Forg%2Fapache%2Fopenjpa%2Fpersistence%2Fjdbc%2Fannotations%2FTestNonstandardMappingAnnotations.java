{"sha":"5f131af61cd32711ffe8aaec2c2ad3321312c4c9","node_id":"MDQ6QmxvYjIwNjM2NDo1ZjEzMWFmNjFjZDMyNzExZmZlOGFhZWMyYzJhZDMzMjEzMTJjNGM5","size":14943,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/5f131af61cd32711ffe8aaec2c2ad3321312c4c9","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5qZGJjLmFubm90\nYXRpb25zOwoKaW1wb3J0IGphdmEuYXd0Lio7CmltcG9ydCBqYXZhLnV0aWwu\nTWFwOwoKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLlF1ZXJ5OwoKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmNvbmYuSkRCQ0NvbmZpZ3VyYXRp\nb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLkNsYXNz\nTWFwcGluZzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1ldGEu\nRGlzY3JpbWluYXRvcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLm1ldGEuRmllbGRNYXBwaW5nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMubWV0YS5WYWx1ZU1hcHBpbmc7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5tZXRhLnN0cmF0cy5DbGFzc05hbWVEaXNjcmltaW5hdG9y\nU3RyYXRlZ3k7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hl\nbWEuRm9yZWlnbktleTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLnNxbC5EQkRpY3Rpb25hcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2UuSlBBRmFjYWRlSGVscGVyOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnRlc3QuU2lu\nZ2xlRU1GVGVzdENhc2U7CgovKioKICogPHA+VGVzdCB0aGUgcGFyc2luZyBv\nZiBub24tc3RhbmRhcmQgbWFwcGluZyBhbm5vdGF0aW9ucy48L3A+CiAqCiAq\nIEBhdXRob3IgQWJlIFdoaXRlCiAqLwpwdWJsaWMgY2xhc3MgVGVzdE5vbnN0\nYW5kYXJkTWFwcGluZ0Fubm90YXRpb25zCiAgICBleHRlbmRzIFNpbmdsZUVN\nRlRlc3RDYXNlIHsKCiAgICBwcml2YXRlIENsYXNzTWFwcGluZyBfbWFwcGlu\nZzsKICAgIHByaXZhdGUgREJEaWN0aW9uYXJ5IF9kaWN0OwoKICAgIHB1Ymxp\nYyB2b2lkIHNldFVwKCkgewogICAgICAgIHNldFVwKE5vbnN0YW5kYXJkTWFw\ncGluZ0VudGl0eS5jbGFzcywgTm9uc3RhbmRhcmRNYXBwaW5nRW50aXR5My5j\nbGFzcywgRXh0ZW5zaW9uc0VudGl0eS5jbGFzcywKICAgICAgICAgICAgTm9u\nc3RhbmRhcmRNYXBwaW5nTWFwcGVkU3VwZXIuY2xhc3MsIEVtYmVkVmFsdWUy\nLmNsYXNzLCBFbWJlZFZhbHVlMy5jbGFzcywKICAgICAgICAgICAgRW1iZWRW\nYWx1ZS5jbGFzcywgTm9uc3RhbmRhcmRNYXBwaW5nRW50aXR5NC5jbGFzcywg\nTm9uc3RhbmRhcmRNYXBwaW5nTWFwcGVkU3VwZXI0LmNsYXNzLCAKICAgICAg\nICAgICAgQ0xFQVJfVEFCTEVTLCBSRVRBSU5fREFUQSk7CgogICAgICAgIC8v\nIHRyaWdnZXIgY29tcGxldGUgcmVzb2x1dGlvbiBvZiBtZXRhZGF0YSBldGMu\nCiAgICAgICAgZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKS5jbG9zZSgpOwoK\nICAgICAgICBKREJDQ29uZmlndXJhdGlvbiBjb25mID0gKEpEQkNDb25maWd1\ncmF0aW9uKSBlbWYuZ2V0Q29uZmlndXJhdGlvbigpOwogICAgICAgIF9kaWN0\nID0gY29uZi5nZXREQkRpY3Rpb25hcnlJbnN0YW5jZSgpOwogICAgICAgIF9t\nYXBwaW5nID0gKENsYXNzTWFwcGluZykgSlBBRmFjYWRlSGVscGVyLmdldE1l\ndGFEYXRhKGVtZiwKICAgICAgICAgICAgTm9uc3RhbmRhcmRNYXBwaW5nRW50\naXR5LmNsYXNzKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0Tm9ucG9s\neW1vcnBoaWMoKSB7CiAgICAgICAgRmllbGRNYXBwaW5nIGZtID0gX21hcHBp\nbmcuZ2V0RmllbGRNYXBwaW5nKCJzdXBlclJlbCIpOwogICAgICAgIGFzc2Vy\ndEVxdWFscyhWYWx1ZU1hcHBpbmcuUE9MWV9GQUxTRSwgZm0uZ2V0UG9seW1v\ncnBoaWMoKSk7CgogICAgICAgIFZhbHVlTWFwcGluZyB2bSA9IF9tYXBwaW5n\nLmdldEZpZWxkTWFwcGluZygiam9pbkNvbGxlY3Rpb24iKS4KICAgICAgICAg\nICAgZ2V0RWxlbWVudE1hcHBpbmcoKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nVmFsdWVNYXBwaW5nLlBPTFlfSk9JTkFCTEUsIHZtLmdldFBvbHltb3JwaGlj\nKCkpOwoKICAgICAgICB2bSA9IF9tYXBwaW5nLmdldEZpZWxkTWFwcGluZygi\nam9pbk1hcCIpLmdldEtleU1hcHBpbmcoKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoVmFsdWVNYXBwaW5nLlBPTFlfRkFMU0UsIHZtLmdldFBvbHltb3JwaGlj\nKCkpOwogICAgICAgIHZtID0gX21hcHBpbmcuZ2V0RmllbGRNYXBwaW5nKCJq\nb2luTWFwIikuZ2V0RWxlbWVudE1hcHBpbmcoKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoVmFsdWVNYXBwaW5nLlBPTFlfRkFMU0UsIHZtLmdldFBvbHltb3Jw\naGljKCkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3REYXRhU3RvcmVJ\nZENvbHVtbigpIHsKICAgICAgICBhc3NlcnRFcXVhbHMoIk5PTlNURF9FTlRJ\nVFkiLCBfbWFwcGluZy5nZXRUYWJsZSgpLmdldE5hbWUoKSk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKENsYXNzTWFwcGluZy5JRF9EQVRBU1RPUkUsIF9tYXBw\naW5nLmdldElkZW50aXR5VHlwZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nMSwgX21hcHBpbmcuZ2V0UHJpbWFyeUtleUNvbHVtbnMoKS5sZW5ndGgpOwog\nICAgICAgIGFzc2VydEVxdWFscygiT0lEIiwgX21hcHBpbmcuZ2V0UHJpbWFy\neUtleUNvbHVtbnMoKVswXS5nZXROYW1lKCkpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHRlc3REaXNjcmltaW5hdG9yKCkgewogICAgICAgIERpc2NyaW1p\nbmF0b3IgZGlzYyA9IF9tYXBwaW5nLmdldERpc2NyaW1pbmF0b3IoKTsKICAg\nICAgICBhc3NlcnRUcnVlKGRpc2MuZ2V0U3RyYXRlZ3koKSBpbnN0YW5jZW9m\nCiAgICAgICAgICAgIENsYXNzTmFtZURpc2NyaW1pbmF0b3JTdHJhdGVneSk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGRpc2MuZ2V0Q29sdW1ucygpLmxl\nbmd0aCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJESVNDUklNIiwgZGlzYy5n\nZXRDb2x1bW5zKClbMF0uZ2V0TmFtZSgpKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0U3VwZXJjbGFzc092ZXJyaWRlKCkgewogICAgICAgIEZpZWxk\nTWFwcGluZyBmbSA9IF9tYXBwaW5nLmdldEZpZWxkTWFwcGluZygic3VwZXJD\nb2xsZWN0aW9uIik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJTVVBfQ09MTCIs\nIGZtLmdldFRhYmxlKCkuZ2V0TmFtZSgpKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoMSwgZm0uZ2V0Sm9pbkZvcmVpZ25LZXkoKS5nZXRDb2x1bW5zKCkubGVu\nZ3RoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIk9XTkVSIiwgZm0uZ2V0Sm9p\nbkZvcmVpZ25LZXkoKS5nZXRDb2x1bW5zKClbMF0uCiAgICAgICAgICAgIGdl\ndE5hbWUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGZtLmdldEVsZW1l\nbnRNYXBwaW5nKCkuZ2V0Q29sdW1ucygpLmxlbmd0aCk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKCJTVVBfRUxFTSIsIGZtLmdldEVsZW1lbnRNYXBwaW5nKCku\nZ2V0Q29sdW1ucygpWzBdLgogICAgICAgICAgICBnZXROYW1lKCkpOwogICAg\nICAgIGFzc2VydE51bGwoZm0uZ2V0RWxlbWVudE1hcHBpbmcoKS5nZXRWYWx1\nZUluZGV4KCkpOwogICAgICAgIGFzc2VydE5vdE51bGwoZm0uZ2V0Sm9pbklu\nZGV4KCkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RDdXN0b21GaWVs\nZCgpIHsKICAgICAgICBGaWVsZE1hcHBpbmcgZm0gPSBfbWFwcGluZy5nZXRG\naWVsZE1hcHBpbmcoImN1c3RvbSIpOwogICAgICAgIGFzc2VydFRydWUoZm0u\nZ2V0SGFuZGxlcigpIGluc3RhbmNlb2YgUG9pbnRIYW5kbGVyKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoMiwgZm0uZ2V0Q29sdW1ucygpLmxlbmd0aCk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKCJYX0NPTCIsIGZtLmdldENvbHVtbnMoKVsw\nXS5nZXROYW1lKCkpOwogICAgICAgIGFzc2VydEVxdWFscygiWV9DT0wiLCBm\nbS5nZXRDb2x1bW5zKClbMV0uZ2V0TmFtZSgpKTsKICAgICAgICBhc3NlcnRO\nb3ROdWxsKGZtLmdldFZhbHVlSW5kZXgoKSk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgdGVzdFZhbHVlQ29sbGVjdGlvbigpIHsKICAgICAgICBGaWVsZE1h\ncHBpbmcgZm0gPSBfbWFwcGluZy5nZXRGaWVsZE1hcHBpbmcoInN0cmluZ0Nv\nbGxlY3Rpb24iKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIlNUUklOR1NfQ09M\nTCIsIGZtLmdldFRhYmxlKCkuZ2V0TmFtZSgpKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoMSwgZm0uZ2V0Sm9pbkZvcmVpZ25LZXkoKS5nZXRDb2x1bW5zKCku\nbGVuZ3RoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIk9XTkVSIiwgZm0uZ2V0\nSm9pbkZvcmVpZ25LZXkoKS5nZXRDb2x1bW5zKClbMF0uCiAgICAgICAgICAg\nIGdldE5hbWUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGZtLmdldEVs\nZW1lbnRNYXBwaW5nKCkuZ2V0Q29sdW1ucygpLmxlbmd0aCk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKCJTVFJfRUxFTSIsIGZtLmdldEVsZW1lbnRNYXBwaW5n\nKCkuZ2V0Q29sdW1ucygpWzBdLgogICAgICAgICAgICBnZXROYW1lKCkpOwog\nICAgICAgIGFzc2VydEVxdWFscygxMjcsIGZtLmdldEVsZW1lbnRNYXBwaW5n\nKCkuZ2V0Q29sdW1ucygpWzBdLmdldFNpemUoKSk7CiAgICAgICAgYXNzZXJ0\nTm90TnVsbChmbS5nZXRFbGVtZW50TWFwcGluZygpLmdldFZhbHVlSW5kZXgo\nKSk7CiAgICAgICAgYXNzZXJ0TnVsbChmbS5nZXRKb2luSW5kZXgoKSk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgdGVzdEpvaW5Db2xsZWN0aW9uKCkgewog\nICAgICAgIEZpZWxkTWFwcGluZyBmbSA9IF9tYXBwaW5nLmdldEZpZWxkTWFw\ncGluZygiam9pbkNvbGxlY3Rpb24iKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nIkpPSU5fQ09MTCIsIGZtLmdldFRhYmxlKCkuZ2V0TmFtZSgpKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoMSwgZm0uZ2V0Sm9pbkZvcmVpZ25LZXkoKS5nZXRD\nb2x1bW5zKCkubGVuZ3RoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIk9XTkVS\nIiwgZm0uZ2V0Sm9pbkZvcmVpZ25LZXkoKS5nZXRDb2x1bW5zKClbMF0uCiAg\nICAgICAgICAgIGdldE5hbWUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEs\nIGZtLmdldEVsZW1lbnRNYXBwaW5nKCkuZ2V0Q29sdW1ucygpLmxlbmd0aCk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKCJKT0lOX0VMRU0iLCBmbS5nZXRFbGVt\nZW50TWFwcGluZygpLmdldENvbHVtbnMoKVswXS4KICAgICAgICAgICAgZ2V0\nTmFtZSgpKTsKICAgICAgICBhc3NlcnRGb3JlaWduS2V5KGZtLmdldEpvaW5G\nb3JlaWduS2V5KCkpOwogICAgICAgIGFzc2VydEZvcmVpZ25LZXkoZm0uZ2V0\nRWxlbWVudE1hcHBpbmcoKS5nZXRGb3JlaWduS2V5KCkpOwogICAgfQoKICAg\nIHByaXZhdGUgdm9pZCBhc3NlcnRGb3JlaWduS2V5KEZvcmVpZ25LZXkgZmsp\nIHsKICAgICAgICBpZiAoX2RpY3Quc3VwcG9ydHNGb3JlaWduS2V5cykKICAg\nICAgICAgICAgYXNzZXJ0RXF1YWxzKEZvcmVpZ25LZXkuQUNUSU9OX1JFU1RS\nSUNULCBmay5nZXREZWxldGVBY3Rpb24oKSk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgdGVzdFZhbHVlTWFwKCkgewogICAgICAgIEZpZWxkTWFwcGluZyBm\nbSA9IF9tYXBwaW5nLmdldEZpZWxkTWFwcGluZygic3RyaW5nTWFwIik7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKCJTVFJJTkdTX01BUCIsIGZtLmdldFRhYmxl\nKCkuZ2V0TmFtZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgZm0uZ2V0\nSm9pbkZvcmVpZ25LZXkoKS5nZXRDb2x1bW5zKCkubGVuZ3RoKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoIk9XTkVSIiwgZm0uZ2V0Sm9pbkZvcmVpZ25LZXko\nKS5nZXRDb2x1bW5zKClbMF0uCiAgICAgICAgICAgIGdldE5hbWUoKSk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKDEsIGZtLmdldEtleU1hcHBpbmcoKS5nZXRD\nb2x1bW5zKCkubGVuZ3RoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIlNUUl9L\nRVkiLCBmbS5nZXRLZXlNYXBwaW5nKCkuZ2V0Q29sdW1ucygpWzBdLgogICAg\nICAgICAgICBnZXROYW1lKCkpOwogICAgICAgIGFzc2VydEVxdWFscygxMjcs\nIGZtLmdldEtleU1hcHBpbmcoKS5nZXRDb2x1bW5zKClbMF0uZ2V0U2l6ZSgp\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgZm0uZ2V0RWxlbWVudE1hcHBp\nbmcoKS5nZXRDb2x1bW5zKCkubGVuZ3RoKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoIlNUUl9WQUwiLCBmbS5nZXRFbGVtZW50TWFwcGluZygpLmdldENvbHVt\nbnMoKVswXS4KICAgICAgICAgICAgZ2V0TmFtZSgpKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoMTI3LCBmbS5nZXRFbGVtZW50TWFwcGluZygpLmdldENvbHVt\nbnMoKVswXS5nZXRTaXplKCkpOwogICAgICAgIGFzc2VydE51bGwoZm0uZ2V0\nSm9pbkluZGV4KCkpOwogICAgICAgIGFzc2VydE5vdE51bGwoZm0uZ2V0S2V5\nTWFwcGluZygpLmdldFZhbHVlSW5kZXgoKSk7CiAgICAgICAgYXNzZXJ0Tm90\nTnVsbChmbS5nZXRFbGVtZW50TWFwcGluZygpLmdldFZhbHVlSW5kZXgoKSk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEpvaW5NYXAoKSB7CiAgICAg\nICAgRmllbGRNYXBwaW5nIGZtID0gX21hcHBpbmcuZ2V0RmllbGRNYXBwaW5n\nKCJqb2luTWFwIik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJKT0lOX01BUCIs\nIGZtLmdldFRhYmxlKCkuZ2V0TmFtZSgpKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoMSwgZm0uZ2V0Sm9pbkZvcmVpZ25LZXkoKS5nZXRDb2x1bW5zKCkubGVu\nZ3RoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIk9XTkVSIiwgZm0uZ2V0Sm9p\nbkZvcmVpZ25LZXkoKS5nZXRDb2x1bW5zKClbMF0uCiAgICAgICAgICAgIGdl\ndE5hbWUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGZtLmdldEtleU1h\ncHBpbmcoKS5nZXRDb2x1bW5zKCkubGVuZ3RoKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoIkpPSU5fS0VZIiwgZm0uZ2V0S2V5TWFwcGluZygpLmdldENvbHVt\nbnMoKVswXS4KICAgICAgICAgICAgZ2V0TmFtZSgpKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoMSwgZm0uZ2V0RWxlbWVudE1hcHBpbmcoKS5nZXRDb2x1bW5z\nKCkubGVuZ3RoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIkpPSU5fVkFMIiwg\nZm0uZ2V0RWxlbWVudE1hcHBpbmcoKS5nZXRDb2x1bW5zKClbMF0uCiAgICAg\nICAgICAgIGdldE5hbWUoKSk7CiAgICAgICAgYXNzZXJ0Rm9yZWlnbktleShm\nbS5nZXRKb2luRm9yZWlnbktleSgpKTsKICAgICAgICBhc3NlcnRGb3JlaWdu\nS2V5KGZtLmdldEtleU1hcHBpbmcoKS5nZXRGb3JlaWduS2V5KCkpOwogICAg\nICAgIGFzc2VydEZvcmVpZ25LZXkoZm0uZ2V0RWxlbWVudE1hcHBpbmcoKS5n\nZXRGb3JlaWduS2V5KCkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RF\nbWJlZGRlZE92ZXJyaWRlKCkgewogICAgICAgIEZpZWxkTWFwcGluZyBmbSA9\nIF9tYXBwaW5nLmdldEZpZWxkTWFwcGluZygiZW1iZWQiKTsKICAgICAgICBh\nc3NlcnRUcnVlKGZtLmlzRW1iZWRkZWQoKSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDEsIGZtLmdldENvbHVtbnMoKS5sZW5ndGgpOwogICAgICAgIGFzc2Vy\ndFRydWUoIlVVSURfSEVYIi5lcXVhbHNJZ25vcmVDYXNlKGZtLmdldENvbHVt\nbnMoKVswXS4KICAgICAgICAgICAgZ2V0TmFtZSgpKSk7CgogICAgICAgIENs\nYXNzTWFwcGluZyBlbWJlZCA9IGZtLmdldEVtYmVkZGVkTWFwcGluZygpOwog\nICAgICAgIGZtID0gZW1iZWQuZ2V0RmllbGRNYXBwaW5nKCJyZWwiKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoMSwgZm0uZ2V0Q29sdW1ucygpLmxlbmd0aCk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKCJFTV9SRUxfSUQiLCBmbS5nZXRDb2x1\nbW5zKClbMF0uZ2V0TmFtZSgpKTsKICAgICAgICBmbSA9IGVtYmVkLmdldEZp\nZWxkTWFwcGluZygiZWFnZXIiKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIkVN\nX0VBR0VSIiwgZm0uZ2V0VGFibGUoKS5nZXROYW1lKCkpOwogICAgICAgIGFz\nc2VydEVxdWFscygxLCBmbS5nZXRFbGVtZW50TWFwcGluZygpLmdldENvbHVt\nbnMoKS5sZW5ndGgpOwogICAgICAgIGFzc2VydEVxdWFscygiRUxFTV9FQUdF\nUl9JRCIsIGZtLmdldEVsZW1lbnRNYXBwaW5nKCkuZ2V0Q29sdW1ucygpWzBd\nLgogICAgICAgICAgICBnZXROYW1lKCkpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHRlc3RFbWJlZGRlZEVsZW1lbnRPdmVycmlkZSgpIHsKICAgICAgICBG\naWVsZE1hcHBpbmcgZm0gPSBfbWFwcGluZy5nZXRGaWVsZE1hcHBpbmcoImVt\nYmVkQ29sbGVjdGlvbiIpOwogICAgICAgIGFzc2VydFRydWUoZm0uZ2V0RWxl\nbWVudCgpLmlzRW1iZWRkZWQoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJF\nTUJFRF9DT0xMIiwgZm0uZ2V0VGFibGUoKS5nZXROYW1lKCkpOwogICAgICAg\nIGFzc2VydEVxdWFscygwLCBmbS5nZXRFbGVtZW50TWFwcGluZygpLmdldENv\nbHVtbnMoKS5sZW5ndGgpOwoKICAgICAgICBDbGFzc01hcHBpbmcgZW1iZWQg\nPSBmbS5nZXRFbGVtZW50TWFwcGluZygpLmdldEVtYmVkZGVkTWFwcGluZygp\nOwogICAgICAgIGZtID0gZW1iZWQuZ2V0RmllbGRNYXBwaW5nKCJiYXNpYyIp\nOwogICAgICAgIGFzc2VydEVxdWFscygxLCBmbS5nZXRDb2x1bW5zKCkubGVu\nZ3RoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIkVNX0JBU0lDIiwgZm0uZ2V0\nQ29sdW1ucygpWzBdLmdldE5hbWUoKSk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgdGVzdEluc2VydEFuZFJldHJpZXZlKCkgewogICAgICAgIE5vbnN0YW5k\nYXJkTWFwcGluZ0VudGl0eSBwYyA9IG5ldyBOb25zdGFuZGFyZE1hcHBpbmdF\nbnRpdHkoKTsKICAgICAgICBwYy5nZXRTdXBlckNvbGxlY3Rpb24oKS5hZGQo\nInN1cGVyIik7CiAgICAgICAgcGMuc2V0Q3VzdG9tKG5ldyBQb2ludCgxLCAy\nKSk7CiAgICAgICAgcGMuZ2V0U3RyaW5nQ29sbGVjdGlvbigpLmFkZCgic3Ry\naW5nIik7CiAgICAgICAgTm9uc3RhbmRhcmRNYXBwaW5nRW50aXR5IHBjMiA9\nIG5ldyBOb25zdGFuZGFyZE1hcHBpbmdFbnRpdHkoKTsKICAgICAgICBwYy5n\nZXRKb2luQ29sbGVjdGlvbigpLmFkZChwYzIpOwogICAgICAgIHBjLmdldFN0\ncmluZ01hcCgpLnB1dCgic3RyaW5nS2V5IiwgInN0cmluZ1ZhbHVlIik7CiAg\nICAgICAgTm9uc3RhbmRhcmRNYXBwaW5nRW50aXR5IHBjMyA9IG5ldyBOb25z\ndGFuZGFyZE1hcHBpbmdFbnRpdHkoKTsKICAgICAgICBwYy5nZXRKb2luTWFw\nKCkucHV0KHBjMiwgcGMzKTsKICAgICAgICBFeHRlbnNpb25zRW50aXR5IGVt\nYmVkID0gbmV3IEV4dGVuc2lvbnNFbnRpdHkoKTsKICAgICAgICBlbWJlZC5z\nZXRFeHRlcm5hbFZhbHVlcygnTScpOwogICAgICAgIGVtYmVkLnNldEV4dGVy\nbmFsaXplcihTdHJpbmcuY2xhc3MpOwogICAgICAgIHBjLnNldEVtYmVkKGVt\nYmVkKTsKICAgICAgICBFbWJlZFZhbHVlMiBlbWJlZDIgPSBuZXcgRW1iZWRW\nYWx1ZTIoKTsKICAgICAgICBlbWJlZDIuc2V0QmFzaWMoImJhc2ljIik7CiAg\nICAgICAgcGMuZ2V0RW1iZWRDb2xsZWN0aW9uKCkuYWRkKGVtYmVkMik7Cgog\nICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVu\ndGl0eU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJl\nZ2luKCk7CiAgICAgICAgZW0ucGVyc2lzdEFsbChuZXcgT2JqZWN0W117IHBj\nLCBwYzIsIHBjMyB9KTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNv\nbW1pdCgpOwogICAgICAgIE9iamVjdCBwY0lkID0gZW0uZ2V0T2JqZWN0SWQo\ncGMpOwogICAgICAgIE9iamVjdCBwYzJJZCA9IGVtLmdldE9iamVjdElkKHBj\nMik7CiAgICAgICAgT2JqZWN0IHBjM0lkID0gZW0uZ2V0T2JqZWN0SWQocGMz\nKTsKICAgICAgICBlbS5jbG9zZSgpOwoKICAgICAgICBlbSA9IGVtZi5jcmVh\ndGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgcGMgPSBlbS5maW5kKE5vbnN0\nYW5kYXJkTWFwcGluZ0VudGl0eS5jbGFzcywgcGNJZCk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDEsIHBjLmdldFN1cGVyQ29sbGVjdGlvbigpLnNpemUoKSk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKCJzdXBlciIsIHBjLmdldFN1cGVyQ29s\nbGVjdGlvbigpLmdldCgwKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIHBj\nLmdldEN1c3RvbSgpLngpOwogICAgICAgIGFzc2VydEVxdWFscygyLCBwYy5n\nZXRDdXN0b20oKS55KTsKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgcGMuZ2V0\nU3RyaW5nQ29sbGVjdGlvbigpLnNpemUoKSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKCJzdHJpbmciLCBwYy5nZXRTdHJpbmdDb2xsZWN0aW9uKCkuZ2V0KDAp\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgcGMuZ2V0Sm9pbkNvbGxlY3Rp\nb24oKS5zaXplKCkpOwogICAgICAgIGFzc2VydEVxdWFscyhwYzJJZCwgZW0u\nZ2V0T2JqZWN0SWQocGMuZ2V0Sm9pbkNvbGxlY3Rpb24oKS5nZXQoMCkpKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoMSwgcGMuZ2V0U3RyaW5nTWFwKCkuc2l6\nZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoInN0cmluZ1ZhbHVlIiwgcGMu\nZ2V0U3RyaW5nTWFwKCkuZ2V0KCJzdHJpbmdLZXkiKSk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKDEsIHBjLmdldEpvaW5NYXAoKS5zaXplKCkpOwogICAgICAg\nIE1hcC5FbnRyeSBlbnRyeSA9IHBjLmdldEpvaW5NYXAoKS5lbnRyeVNldCgp\nLml0ZXJhdG9yKCkubmV4dCgpOwogICAgICAgIGFzc2VydEVxdWFscyhwYzJJ\nZCwgZW0uZ2V0T2JqZWN0SWQoZW50cnkuZ2V0S2V5KCkpKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMocGMzSWQsIGVtLmdldE9iamVjdElkKGVudHJ5LmdldFZh\nbHVlKCkpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoJ00nLCBwYy5nZXRFbWJl\nZCgpLmdldEV4dGVybmFsVmFsdWVzKCkpOwogICAgICAgIGFzc2VydEVxdWFs\ncyhTdHJpbmcuY2xhc3MsIHBjLmdldEVtYmVkKCkuZ2V0RXh0ZXJuYWxpemVy\nKCkpOwogICAgICAgIGFzc2VydEVxdWFscygxLCBwYy5nZXRFbWJlZENvbGxl\nY3Rpb24oKS5zaXplKCkpOwogICAgICAgIGFzc2VydEVxdWFscygiYmFzaWMi\nLCBwYy5nZXRFbWJlZENvbGxlY3Rpb24oKS5nZXQoMCkuZ2V0QmFzaWMoKSk7\nCiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0\nZXN0SW5zZXJ0QW5kUmV0cmlldmVFbWJlZGRlZENvbGxlY3Rpb24oKSB7CiAg\nICAgICAgTm9uc3RhbmRhcmRNYXBwaW5nRW50aXR5IHBjID0gbmV3IE5vbnN0\nYW5kYXJkTWFwcGluZ0VudGl0eSgpOwogICAgICAgIEVtYmVkVmFsdWUyIGVt\nYmVkMiA9IG5ldyBFbWJlZFZhbHVlMigpOwogICAgICAgIGVtYmVkMi5zZXRC\nYXNpYygiYmFzaWMiKTsKICAgICAgICBwYy5nZXRFbWJlZENvbGxlY3Rpb24o\nKS5hZGQoZW1iZWQyKTsKCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIg\nZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdl\ndFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBlbS5wZXJzaXN0KHBj\nKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAg\nICAgIE9iamVjdCBwY0lkID0gZW0uZ2V0T2JqZWN0SWQocGMpOwogICAgICAg\nIGVtLmNsb3NlKCk7CgogICAgICAgIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1h\nbmFnZXIoKTsKICAgICAgICBwYyA9IGVtLmZpbmQoTm9uc3RhbmRhcmRNYXBw\naW5nRW50aXR5LmNsYXNzLCBwY0lkKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nMSwgcGMuZ2V0RW1iZWRDb2xsZWN0aW9uKCkuc2l6ZSgpKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoImJhc2ljIiwgcGMuZ2V0RW1iZWRDb2xsZWN0aW9uKCku\nZ2V0KDApLmdldEJhc2ljKCkpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgdGVzdEluc2VydEFuZFJldHJpZXZlRW1iZWRk\nZWRPYmplY3RXaXRoU3RyYXRlZ3koKSB7CiAgICAgICAgTm9uc3RhbmRhcmRN\nYXBwaW5nRW50aXR5MyBwYyA9IG5ldyBOb25zdGFuZGFyZE1hcHBpbmdFbnRp\ndHkzKCk7CiAgICAgICAgRW1iZWRWYWx1ZTMgZW1iZWQzID0gbmV3IEVtYmVk\nVmFsdWUzKCk7CiAgICAgICAgZW1iZWQzLnNldEJhc2ljKCJiYXNpYyIpOwog\nICAgICAgIFBvaW50IHBvaW50ID0gbmV3IFBvaW50KCk7CiAgICAgICAgcG9p\nbnQuc2V0TG9jYXRpb24oMSwgMik7CiAgICAgICAgZW1iZWQzLnNldFBvaW50\nKHBvaW50KTsKICAgICAgICBwYy5nZXRFbWJlZFZhbDNzKCkuYWRkKGVtYmVk\nMyk7CiAgICAgICAgcGMuc2V0RW1iZWRWYWwzKGVtYmVkMyk7CiAgICAgICAg\ncGMuc2V0SWQoMSk7CgogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVt\nID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRU\ncmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgZW0ucGVyc2lzdChwYyk7\nCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAg\nICBPYmplY3QgcGNJZCA9IGVtLmdldE9iamVjdElkKHBjKTsKICAgICAgICBl\nbS5jbG9zZSgpOwoKICAgICAgICBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgcGMgPSBlbS5maW5kKE5vbnN0YW5kYXJkTWFwcGlu\nZ0VudGl0eTMuY2xhc3MsIHBjSWQpOwogICAgICAgIGFzc2VydEVxdWFscygx\nLCBwYy5nZXRFbWJlZFZhbDNzKCkuc2l6ZSgpKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoImJhc2ljIiwgcGMuZ2V0RW1iZWRWYWwzcygpLmdldCgwKS5nZXRC\nYXNpYygpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMS4wLCBwYy5nZXRFbWJl\nZFZhbDNzKCkuZ2V0KDApLmdldFBvaW50KCkuZ2V0WCgpKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoMi4wLCBwYy5nZXRFbWJlZFZhbDNzKCkuZ2V0KDApLmdl\ndFBvaW50KCkuZ2V0WSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMS4wLCBw\nYy5nZXRFbWJlZFZhbDMoKS5nZXRQb2ludCgpLmdldFgoKSk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDIuMCwgcGMuZ2V0RW1iZWRWYWwzKCkuZ2V0UG9pbnQo\nKS5nZXRZKCkpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgdGVzdEluc2VydEFuZFJldHJpZXZlTWFwcGVkU3VwZXJXaXRo\nU3RyYXRlZ3koKSB7CiAgICAgICAgTm9uc3RhbmRhcmRNYXBwaW5nRW50aXR5\nNCBwYyA9IG5ldyBOb25zdGFuZGFyZE1hcHBpbmdFbnRpdHk0KCk7CiAgICAg\nICAgUG9pbnQgcG9pbnQgPSBuZXcgUG9pbnQoKTsKICAgICAgICBwb2ludC5z\nZXRMb2NhdGlvbigxLCAyKTsKICAgICAgICBwYy5zZXRQb2ludChwb2ludCk7\nCiAgICAgICAgcGMuc2V0SWQoMSk7CiAgICAgICAgcGMuc2V0TmFtZSgibmFt\nZTEiKTsKICAgICAgICAKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBl\nbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIGVtLnBlcnNpc3QocGMp\nOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAg\nICAgT2JqZWN0IHBjSWQgPSBlbS5nZXRPYmplY3RJZChwYyk7CiAgICAgICAg\nZW0uY2xvc2UoKTsKCiAgICAgICAgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFu\nYWdlcigpOwogICAgICAgIHBjID0gZW0uZmluZChOb25zdGFuZGFyZE1hcHBp\nbmdFbnRpdHk0LmNsYXNzLCBwY0lkKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nIm5hbWUxIiwgcGMuZ2V0TmFtZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nMS4wLCBwYy5nZXRQb2ludCgpLmdldFgoKSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDIuMCwgcGMuZ2V0UG9pbnQoKS5nZXRZKCkpOwogICAgICAgIAogICAg\nICAgIGZvciAoaW50IGkgPSAwOyBpIDwgMjsgaSsrKSB7CiAgICAgICAgICAg\nIFF1ZXJ5IHF1ZXJ5ID0gZW0uY3JlYXRlUXVlcnkoInNlbGVjdCBzIGZyb20g\nTm9uc3RhbmRhcmRNYXBwaW5nRW50aXR5NCBzIHdoZXJlIHMucG9pbnQgPSA6\ncG9pbnQiKTsKICAgICAgICAgICAgcXVlcnkuc2V0UGFyYW1ldGVyKCJwb2lu\ndCIsIG5ldyBQb2ludCgxLCAyKSk7CiAgICAgICAgICAgIGphdmEudXRpbC5M\naXN0PE5vbnN0YW5kYXJkTWFwcGluZ0VudGl0eTQ+IGxpc3QgPSBxdWVyeS5n\nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgICAgIGZvciAoTm9uc3RhbmRhcmRN\nYXBwaW5nRW50aXR5NCBwYzEgOiBsaXN0KSB7CiAgICAgICAgICAgICAgICBh\nc3NlcnRFcXVhbHMoMS4wLCBwYzEuZ2V0UG9pbnQoKS5nZXRYKCkpOwogICAg\nICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKDIuMCwgcGMxLmdldFBvaW50KCku\nZ2V0WSgpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbS5jbGVhcigp\nOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBlbS5jbG9zZSgpOwogICAg\nfX0K\n","encoding":"base64"}

