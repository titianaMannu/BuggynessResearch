{"sha":"a472afa5922b47a8c35b58597afe7a1edb12d14e","node_id":"MDQ6QmxvYjIwNjM2NDphNDcyYWZhNTkyMmI0N2E4YzM1YjU4NTk3YWZlN2ExZWRiMTJkMTRl","size":13945,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/a472afa5922b47a8c35b58597afe7a1edb12d14e","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuamRiYy5t\nYXBzLnNwZWNfMTBfMV8yNl9leDA7CgppbXBvcnQgamF2YS51dGlsLkFycmF5\nTGlzdDsKaW1wb3J0IGphdmEudXRpbC5EYXRlOwppbXBvcnQgamF2YS51dGls\nLkhhc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGphdmEu\ndXRpbC5NYXA7CmltcG9ydCBqYXZhLnV0aWwuU2V0OwoKaW1wb3J0IGphdmF4\nLnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXI7CmltcG9ydCBqYXZheC5wZXJz\naXN0ZW5jZS5FbnRpdHlNYW5hZ2VyRmFjdG9yeTsKaW1wb3J0IGphdmF4LnBl\ncnNpc3RlbmNlLkVudGl0eVRyYW5zYWN0aW9uOwppbXBvcnQgamF2YXgucGVy\nc2lzdGVuY2UuUXVlcnk7CgppbXBvcnQganVuaXQuZnJhbWV3b3JrLkFzc2Vy\ndDsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlF1ZXJ5SW1w\nbDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS50ZXN0\nLkFsbG93RmFpbHVyZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJz\naXN0ZW5jZS50ZXN0LlNRTExpc3RlbmVyVGVzdENhc2U7CgpwdWJsaWMgY2xh\nc3MgVGVzdFNwZWMxMF8xXzI2IGV4dGVuZHMgU1FMTGlzdGVuZXJUZXN0Q2Fz\nZSB7CgogICAgcHVibGljIGludCBudW1EZXBhcnRtZW50cyA9IDI7CiAgICBw\ndWJsaWMgaW50IG51bUVtcGxveWVlc1BlckRlcHQgPSAyOwogICAgcHVibGlj\nIExpc3Q8U3RyaW5nPiBuYW1lZFF1ZXJpZXMgPSBuZXcgQXJyYXlMaXN0PFN0\ncmluZz4oKTsKCiAgICBwdWJsaWMgaW50IGRlcHRJZCA9IDE7CiAgICBwdWJs\naWMgaW50IGVtcElkID0gMTsKCiAgICBwdWJsaWMgTGlzdDxEZXBhcnRtZW50\nMT4gcnNBbGxEZXBhcnRtZW50MSA9IG51bGw7CiAgICBwdWJsaWMgTGlzdDxE\nZXBhcnRtZW50Mj4gcnNBbGxEZXBhcnRtZW50MiA9IG51bGw7CiAgICBwdWJs\naWMgTGlzdDxEZXBhcnRtZW50Mz4gcnNBbGxEZXBhcnRtZW50MyA9IG51bGw7\nCgogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7CiAgICAgICAgc3VwZXIuc2V0\nVXAoRFJPUF9UQUJMRVMsCiAgICAgICAgICAgIERlcGFydG1lbnQxLmNsYXNz\nLAogICAgICAgICAgICBEZXBhcnRtZW50Mi5jbGFzcywKICAgICAgICAgICAg\nRGVwYXJ0bWVudDMuY2xhc3MsCiAgICAgICAgICAgIEVtcGxveWVlMS5jbGFz\ncywKICAgICAgICAgICAgRW1wbG95ZWUyLmNsYXNzLAogICAgICAgICAgICBF\nbXBsb3llZTMuY2xhc3MsCiAgICAgICAgICAgIEVtcGxveWVlTmFtZTMuY2xh\nc3MsCiAgICAgICAgICAgIEVtcGxveWVlUEsyLmNsYXNzKTsKICAgICAgICBj\ncmVhdGVPYmooKTsKICAgICAgICByc0FsbERlcGFydG1lbnQxID0gZ2V0QWxs\nKERlcGFydG1lbnQxLmNsYXNzKTsKICAgICAgICByc0FsbERlcGFydG1lbnQy\nID0gZ2V0QWxsKERlcGFydG1lbnQyLmNsYXNzKTsKICAgICAgICByc0FsbERl\ncGFydG1lbnQzID0gZ2V0QWxsKERlcGFydG1lbnQzLmNsYXNzKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0SGF2aW5nQ2xhdXNlV2l0aEVudGl0eUV4\ncHJlc3Npb24oKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBFbnRpdHlN\nYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAg\nICBFbXBsb3llZTEgZTEgPSBlbS5maW5kKEVtcGxveWVlMS5jbGFzcywgMSk7\nCiAgICAgICAgZW0uY2xlYXIoKTsKICAgICAgICBTdHJpbmcgcXVlcnkgPSAi\nc2VsZWN0IGUgZnJvbSBEZXBhcnRtZW50MSBkLCAiICsKICAgICAgICAgICAg\nIiBpbiAoZC5lbXBNYXApIGUgIiArCiAgICAgICAgICAgICJncm91cCBieSBl\nICIgKwogICAgICAgICAgICAiaGF2aW5nIGUgPSA/MSI7IAogICAgICAgIFF1\nZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeShxdWVyeSk7IAogICAgICAgIHEuc2V0\nUGFyYW1ldGVyKDEsIGUxKTsKICAgICAgICBMaXN0PEVtcGxveWVlMT4gcnMg\nPSAoTGlzdDxFbXBsb3llZTE+KSBxLmdldFJlc3VsdExpc3QoKTsKICAgICAg\nICBFbXBsb3llZTEgZTIgPSBycy5nZXQoMCk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKGUxLmdldEVtcElkKCksIGUyLmdldEVtcElkKCkpOwoKICAgICAgICBl\nbS5jbGVhcigpOwogICAgICAgIHF1ZXJ5ID0gInNlbGVjdCBlIGZyb20gRGVw\nYXJ0bWVudDEgZCwgIiArCiAgICAgICAgICAgICIgaW4gKGQuZW1wTWFwKSBl\nICIgKwogICAgICAgICAgICAiZ3JvdXAgYnkgZSAiICsKICAgICAgICAgICAg\nImhhdmluZyBlIDw+ID8xIjsgCiAgICAgICAgcSA9IGVtLmNyZWF0ZVF1ZXJ5\nKHF1ZXJ5KTsgCiAgICAgICAgcS5zZXRQYXJhbWV0ZXIoMSwgZTEpOwogICAg\nICAgIHJzID0gKExpc3Q8RW1wbG95ZWUxPikgcS5nZXRSZXN1bHRMaXN0KCk7\nCiAgICAgICAgRW1wbG95ZWUxIGUzID0gcnMuZ2V0KDApOwogICAgICAgIGFz\nc2VydE5vdEVxdWFscyhlMS5nZXRFbXBJZCgpLCBlMy5nZXRFbXBJZCgpKTsK\nCiAgICAgICAgZW0uY2xlYXIoKTsKICAgICAgICBxdWVyeSA9ICJzZWxlY3Qg\ndmFsdWUoZSkgZnJvbSBEZXBhcnRtZW50MSBkLCAiICsKICAgICAgICAgICAg\nIiBpbiAoZC5lbXBNYXApIGUgIiArCiAgICAgICAgICAgICJncm91cCBieSB2\nYWx1ZShlKSAiICsKICAgICAgICAgICAgImhhdmluZyB2YWx1ZShlKSA9ID8x\nIjsgCiAgICAgICAgcSA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5KTsgCiAgICAg\nICAgcS5zZXRQYXJhbWV0ZXIoMSwgZTEpOwogICAgICAgIHJzID0gKExpc3Q8\nRW1wbG95ZWUxPikgcS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgRW1wbG95\nZWUxIGU0ID0gcnMuZ2V0KDApOwogICAgICAgIGFzc2VydEVxdWFscyhlMS5n\nZXRFbXBJZCgpLCBlNC5nZXRFbXBJZCgpKTsKICAgICAgICBlbS5jbG9zZSgp\nOwogICAgfQoKICAgIEBBbGxvd0ZhaWx1cmUKICAgIHB1YmxpYyB2b2lkIHRl\nc3RRdWVyeUluTWVtb3J5UXVhbGlmaWVkSWQoKSB0aHJvd3MgRXhjZXB0aW9u\nIHsKICAgICAgICBxdWVyeVF1YWxpZmllZElkKHRydWUpOwogICAgfQogICAg\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0UXVlcnlRdWFsaWZpZWRJZCgpIHRocm93\ncyBFeGNlcHRpb24gewogICAgICAgIHF1ZXJ5UXVhbGlmaWVkSWQoZmFsc2Up\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldENhbmRpZGF0ZShRdWVyeSBx\nLCBDbGFzczw/PiBjbHopIAogICAgICAgIHRocm93cyBFeGNlcHRpb24gewog\nICAgICAgIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5RdWVyeUlt\ncGwgcTEgPSAKICAgICAgICAgICAgKG9yZy5hcGFjaGUub3BlbmpwYS5wZXJz\naXN0ZW5jZS5RdWVyeUltcGwpIHE7CiAgICAgICAgb3JnLmFwYWNoZS5vcGVu\nanBhLmtlcm5lbC5RdWVyeSBxMiA9IHExLmdldERlbGVnYXRlKCk7CiAgICAg\nICAgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5RdWVyeUltcGwgcWkgPSAo\nUXVlcnlJbXBsKSBxMjsKICAgICAgICBpZiAoY2x6ID09IERlcGFydG1lbnQx\nLmNsYXNzKQogICAgICAgICAgICBxaS5zZXRDYW5kaWRhdGVDb2xsZWN0aW9u\nKHJzQWxsRGVwYXJ0bWVudDEpOwogICAgICAgIGVsc2UgaWYgKGNseiA9PSBE\nZXBhcnRtZW50Mi5jbGFzcykKICAgICAgICAgICAgcWkuc2V0Q2FuZGlkYXRl\nQ29sbGVjdGlvbihyc0FsbERlcGFydG1lbnQyKTsKICAgICAgICBlbHNlIGlm\nIChjbHogPT0gRGVwYXJ0bWVudDMuY2xhc3MpCiAgICAgICAgICAgIHFpLnNl\ndENhbmRpZGF0ZUNvbGxlY3Rpb24ocnNBbGxEZXBhcnRtZW50Myk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgcXVlcnlRdWFsaWZpZWRJZChib29sZWFuIGlu\nTWVtb3J5KSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBFbnRpdHlNYW5h\nZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBT\ndHJpbmcgcXVlcnkgPSAic2VsZWN0IEtFWShlKSBmcm9tIERlcGFydG1lbnQx\nIGQsICIgKwogICAgICAgICAgICAiIGluIChkLmVtcE1hcCkgZSI7CiAgICAg\nICAgUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5KTsKICAgICAgICBp\nZiAoaW5NZW1vcnkpIAogICAgICAgICAgICBzZXRDYW5kaWRhdGUocSwgRGVw\nYXJ0bWVudDEuY2xhc3MpOwogICAgICAgIExpc3Q8Pz4gcnMgPSBxLmdldFJl\nc3VsdExpc3QoKTsKICAgICAgICBJbnRlZ2VyIGQgPSAoSW50ZWdlcikgcnMu\nZ2V0KDApOwogICAgICAgIAogICAgICAgIHF1ZXJ5ID0gInNlbGVjdCBLRVko\nZSkgZnJvbSBEZXBhcnRtZW50MiBkLCAiICsKICAgICAgICAgICAgIiBpbiAo\nZC5lbXBNYXApIGUiOwogICAgICAgIHEgPSBlbS5jcmVhdGVRdWVyeShxdWVy\neSk7CiAgICAgICAgaWYgKGluTWVtb3J5KSAKICAgICAgICAgICAgc2V0Q2Fu\nZGlkYXRlKHEsIERlcGFydG1lbnQyLmNsYXNzKTsKICAgICAgICBycyA9IHEu\nZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIEVtcGxveWVlUEsyIGQyID0gKEVt\ncGxveWVlUEsyKSBycy5nZXQoMCk7CiAgICAgICAgCiAgICAgICAgcXVlcnkg\nPSAic2VsZWN0IEtFWShlKSBmcm9tIERlcGFydG1lbnQzIGQsICIgKwogICAg\nICAgICAgICAiIGluIChkLmVtcHMpIGUiOwogICAgICAgIHEgPSBlbS5jcmVh\ndGVRdWVyeShxdWVyeSk7CiAgICAgICAgaWYgKGluTWVtb3J5KSAKICAgICAg\nICAgICAgc2V0Q2FuZGlkYXRlKHEsIERlcGFydG1lbnQzLmNsYXNzKTsKICAg\nICAgICBycyA9IHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIEVtcGxveWVl\nTmFtZTMgZDMgPSAoRW1wbG95ZWVOYW1lMykgcnMuZ2V0KDApOwogICAgICAg\nIAogICAgICAgIC8vIENoZWNrIEhBVklORyBjbGF1c2Ugc3VwcG9ydCBmb3Ig\nS0VZCiAgICAgICAgcXVlcnkgPSAic2VsZWN0IEtFWShlKSBmcm9tIERlcGFy\ndG1lbnQxIGQsICIgKwogICAgICAgICIgaW4gKGQuZW1wTWFwKSBlICIgKwog\nICAgICAgICJncm91cCBieSBLRVkoZSkgIiArCiAgICAgICAgImhhdmluZyBL\nRVkoZSkgPSAyIjsKICAgICAgICBxID0gZW0uY3JlYXRlUXVlcnkocXVlcnkp\nOwogICAgICAgIGlmIChpbk1lbW9yeSkgCiAgICAgICAgICAgIHNldENhbmRp\nZGF0ZShxLCBEZXBhcnRtZW50MS5jbGFzcyk7CiAgICAgICAgcnMgPSBxLmdl\ndFJlc3VsdExpc3QoKTsKICAgICAgICBJbnRlZ2VyIGRlcHRJZCA9IChJbnRl\nZ2VyKSBycy5nZXQoMCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJkZXB0IGlk\nIGlzIG5vdCAyIiwgMiwgZGVwdElkLmludFZhbHVlKCkpOwogICAgICAgIAog\nICAgICAgIHF1ZXJ5ID0gInNlbGVjdCBLRVkoZSkubE5hbWUgZnJvbSBEZXBh\ncnRtZW50MyBkLCAiICsgImluIChkLmVtcHMpIGUgIiArICJncm91cCBieSBL\nRVkoZSkubE5hbWUgIgogICAgICAgICAgICAgICAgKyAiaGF2aW5nIEtFWShl\nKS5sTmFtZSBsaWtlICdsJSciOwogICAgICAgIHEgPSBlbS5jcmVhdGVRdWVy\neShxdWVyeSk7CiAgICAgICAgaWYgKGluTWVtb3J5KQogICAgICAgICAgICBz\nZXRDYW5kaWRhdGUocSwgRGVwYXJ0bWVudDEuY2xhc3MpOwogICAgICAgIHJz\nID0gcS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJu\ndW1iZXIgb2YgZW1wbG95ZWVzIGlzIG5vdCBlcXVhbCB0byBudW1EZXBhcnRt\nZW50cypudW1FbXBsb3llZXNQZXJEZXB0IiwgbnVtRGVwYXJ0bWVudHMKICAg\nICAgICAgICAgICAgICogbnVtRW1wbG95ZWVzUGVyRGVwdCwgcnMuc2l6ZSgp\nKTsKCiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0UXVlcnlPYmplY3QoKSB7CiAgICAgICAgcXVlcnlPYmooKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBjcmVhdGVPYmooKSB7CiAgICAgICAgRW50\naXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAg\nICAgICAgRW50aXR5VHJhbnNhY3Rpb24gdHJhbiA9IGVtLmdldFRyYW5zYWN0\naW9uKCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBudW1EZXBhcnRt\nZW50czsgaSsrKQogICAgICAgICAgICBjcmVhdGVEZXBhcnRtZW50MShlbSwg\nZGVwdElkKyspOwoKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG51bURl\ncGFydG1lbnRzOyBpKyspCiAgICAgICAgICAgIGNyZWF0ZURlcGFydG1lbnQy\nKGVtLCBkZXB0SWQrKyk7CgogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwg\nbnVtRGVwYXJ0bWVudHM7IGkrKykKICAgICAgICAgICAgY3JlYXRlRGVwYXJ0\nbWVudDMoZW0sIGRlcHRJZCsrKTsKCiAgICAgICAgdHJhbi5iZWdpbigpOwog\nICAgICAgIGVtLmZsdXNoKCk7CiAgICAgICAgdHJhbi5jb21taXQoKTsKICAg\nICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGNyZWF0\nZURlcGFydG1lbnQxKEVudGl0eU1hbmFnZXIgZW0sIGludCBpZCkgewogICAg\nICAgIERlcGFydG1lbnQxIGQgPSBuZXcgRGVwYXJ0bWVudDEoKTsKICAgICAg\nICBkLnNldERlcHRJZChpZCk7CiAgICAgICAgTWFwPEludGVnZXIsRW1wbG95\nZWUxPiBlbXBNYXAgPSBuZXcgSGFzaE1hcDxJbnRlZ2VyLEVtcGxveWVlMT4o\nKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG51bUVtcGxveWVlc1Bl\nckRlcHQ7IGkrKykgewogICAgICAgICAgICBFbXBsb3llZTEgZSA9IGNyZWF0\nZUVtcGxveWVlMShlbSwgZW1wSWQrKyk7CiAgICAgICAgICAgIC8vZC5hZGRF\nbXBsb3llZTEoZSk7CiAgICAgICAgICAgIGVtcE1hcC5wdXQoZS5nZXRFbXBJ\nZCgpLCBlKTsKICAgICAgICAgICAgZS5zZXREZXBhcnRtZW50KGQpOwogICAg\nICAgICAgICBlbS5wZXJzaXN0KGUpOwogICAgICAgIH0KICAgICAgICBkLnNl\ndEVtcE1hcChlbXBNYXApOwogICAgICAgIGVtLnBlcnNpc3QoZCk7CiAgICB9\nCgogICAgcHVibGljIEVtcGxveWVlMSBjcmVhdGVFbXBsb3llZTEoRW50aXR5\nTWFuYWdlciBlbSwgaW50IGlkKSB7CiAgICAgICAgRW1wbG95ZWUxIGUgPSBu\nZXcgRW1wbG95ZWUxKCk7CiAgICAgICAgZS5zZXRFbXBJZChpZCk7CiAgICAg\nICAgcmV0dXJuIGU7CiAgICB9CgogICAgcHVibGljIHZvaWQgY3JlYXRlRGVw\nYXJ0bWVudDIoRW50aXR5TWFuYWdlciBlbSwgaW50IGlkKSB7CiAgICAgICAg\nRGVwYXJ0bWVudDIgZCA9IG5ldyBEZXBhcnRtZW50MigpOwogICAgICAgIGQu\nc2V0RGVwdElkKGlkKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG51\nbUVtcGxveWVlc1BlckRlcHQ7IGkrKykgewogICAgICAgICAgICBFbXBsb3ll\nZTIgZSA9IGNyZWF0ZUVtcGxveWVlMihlbSwgZW1wSWQrKyk7CiAgICAgICAg\nICAgIGQuYWRkRW1wbG95ZWUoZSk7CiAgICAgICAgICAgIGUuc2V0RGVwYXJ0\nbWVudChkKTsKICAgICAgICAgICAgZW0ucGVyc2lzdChlKTsKICAgICAgICB9\nCiAgICAgICAgZW0ucGVyc2lzdChkKTsKICAgIH0KCiAgICBwdWJsaWMgRW1w\nbG95ZWUyIGNyZWF0ZUVtcGxveWVlMihFbnRpdHlNYW5hZ2VyIGVtLCBpbnQg\naWQpIHsKICAgICAgICBFbXBsb3llZTIgZSA9IG5ldyBFbXBsb3llZTIoImUi\nICsgaWQsIG5ldyBEYXRlKCkpOwogICAgICAgIHJldHVybiBlOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIGNyZWF0ZURlcGFydG1lbnQzKEVudGl0eU1hbmFn\nZXIgZW0sIGludCBpZCkgewogICAgICAgIERlcGFydG1lbnQzIGQgPSBuZXcg\nRGVwYXJ0bWVudDMoKTsKICAgICAgICBkLnNldERlcHRJZChpZCk7CiAgICAg\nICAgZm9yIChpbnQgaSA9IDA7IGkgPCBudW1FbXBsb3llZXNQZXJEZXB0OyBp\nKyspIHsKICAgICAgICAgICAgRW1wbG95ZWUzIGUgPSBjcmVhdGVFbXBsb3ll\nZTMoZW0sIGVtcElkKyspOwogICAgICAgICAgICBkLmFkZEVtcGxveWVlKGUp\nOwogICAgICAgICAgICBlLnNldERlcGFydG1lbnQoZCk7CiAgICAgICAgICAg\nIGVtLnBlcnNpc3QoZSk7CiAgICAgICAgfQogICAgICAgIGVtLnBlcnNpc3Qo\nZCk7CiAgICB9CgogICAgcHVibGljIEVtcGxveWVlMyBjcmVhdGVFbXBsb3ll\nZTMoRW50aXR5TWFuYWdlciBlbSwgaW50IGlkKSB7CiAgICAgICAgRW1wbG95\nZWUzIGUgPSBuZXcgRW1wbG95ZWUzKCk7CiAgICAgICAgRW1wbG95ZWVOYW1l\nMyBuYW1lID0gbmV3IEVtcGxveWVlTmFtZTMoImYiICsgaWQsICJsIiArIGlk\nKTsKICAgICAgICBlLnNldEVtcElkKGlkKTsKICAgICAgICBlLnNldE5hbWUo\nbmFtZSk7CiAgICAgICAgcmV0dXJuIGU7CiAgICB9CgogICAgcHVibGljIHZv\naWQgZmluZE9iaigpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1m\nLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBEZXBhcnRtZW50MSBk\nMSA9IGVtLmZpbmQoRGVwYXJ0bWVudDEuY2xhc3MsIDEpOwogICAgICAgIGFz\nc2VydERlcGFydG1lbnQxKGQxKTsKCiAgICAgICAgRW1wbG95ZWUxIGUxID0g\nZW0uZmluZChFbXBsb3llZTEuY2xhc3MsIDEpOwogICAgICAgIGFzc2VydEVt\ncGxveWVlMShlMSk7CgogICAgICAgIERlcGFydG1lbnQyIGQyID0gZW0uZmlu\nZChEZXBhcnRtZW50Mi5jbGFzcywgMyk7CiAgICAgICAgYXNzZXJ0RGVwYXJ0\nbWVudDIoZDIpOwoKICAgICAgICBNYXAgZW1wTWFwID0gZDIuZ2V0RW1wTWFw\nKCk7CiAgICAgICAgU2V0PEVtcGxveWVlUEsyPiBrZXlzID0gZW1wTWFwLmtl\neVNldCgpOwogICAgICAgIGZvciAoRW1wbG95ZWVQSzIga2V5IDoga2V5cykg\newogICAgICAgICAgICBFbXBsb3llZTIgZTIgPSBlbS5maW5kKEVtcGxveWVl\nMi5jbGFzcywga2V5KTsKICAgICAgICAgICAgYXNzZXJ0RW1wbG95ZWUyKGUy\nKTsKICAgICAgICB9CgogICAgICAgIERlcGFydG1lbnQzIGQzID0gZW0uZmlu\nZChEZXBhcnRtZW50My5jbGFzcywgNSk7CiAgICAgICAgYXNzZXJ0RGVwYXJ0\nbWVudDMoZDMpOwoKICAgICAgICBFbXBsb3llZTMgZTMgPSBlbS5maW5kKEVt\ncGxveWVlMy5jbGFzcywgOSk7CiAgICAgICAgYXNzZXJ0RW1wbG95ZWUzKGUz\nKTsKCiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBhc3NlcnREZXBhcnRtZW50MShEZXBhcnRtZW50MSBkKSB7CiAgICAgICAg\naW50IGlkID0gZC5nZXREZXB0SWQoKTsKICAgICAgICBNYXA8SW50ZWdlciwg\nRW1wbG95ZWUxPiBlcyA9IGQuZ2V0RW1wTWFwKCk7CiAgICAgICAgQXNzZXJ0\nLmFzc2VydEVxdWFscygyLGVzLnNpemUoKSk7CiAgICAgICAgU2V0IGtleXMg\nPSBlcy5rZXlTZXQoKTsKICAgICAgICBmb3IgKE9iamVjdCBvYmogOiBrZXlz\nKSB7CiAgICAgICAgICAgIEludGVnZXIgZW1wSWQgPSAoSW50ZWdlcikgb2Jq\nOwogICAgICAgICAgICBFbXBsb3llZTEgZSA9IGVzLmdldChlbXBJZCk7CiAg\nICAgICAgICAgIEFzc2VydC5hc3NlcnRFcXVhbHMoZW1wSWQuaW50VmFsdWUo\nKSwgZS5nZXRFbXBJZCgpKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgYXNzZXJ0RGVwYXJ0bWVudDIoRGVwYXJ0bWVudDIgZCkgewogICAg\nICAgIGludCBpZCA9IGQuZ2V0RGVwdElkKCk7CiAgICAgICAgTWFwPEVtcGxv\neWVlUEsyLCBFbXBsb3llZTI+IGVzID0gZC5nZXRFbXBNYXAoKTsKICAgICAg\nICBBc3NlcnQuYXNzZXJ0RXF1YWxzKDIsZXMuc2l6ZSgpKTsKICAgICAgICBT\nZXQ8RW1wbG95ZWVQSzI+IGtleXMgPSBlcy5rZXlTZXQoKTsKICAgICAgICBm\nb3IgKEVtcGxveWVlUEsyIHBrIDoga2V5cykgewogICAgICAgICAgICBFbXBs\nb3llZTIgZSA9IGVzLmdldChwayk7CiAgICAgICAgICAgIEFzc2VydC5hc3Nl\ncnRFcXVhbHMocGssIGUuZ2V0RW1wUEsoKSk7CiAgICAgICAgfQogICAgfQkK\nCiAgICBwdWJsaWMgdm9pZCBhc3NlcnREZXBhcnRtZW50MyhEZXBhcnRtZW50\nMyBkKSB7CiAgICAgICAgaW50IGlkID0gZC5nZXREZXB0SWQoKTsKICAgICAg\nICBNYXA8RW1wbG95ZWVOYW1lMywgRW1wbG95ZWUzPiBlcyA9IGQuZ2V0RW1w\nbG95ZWVzKCk7CiAgICAgICAgQXNzZXJ0LmFzc2VydEVxdWFscygyLGVzLnNp\nemUoKSk7CiAgICAgICAgU2V0PEVtcGxveWVlTmFtZTM+IGtleXMgPSBlcy5r\nZXlTZXQoKTsKICAgICAgICBmb3IgKEVtcGxveWVlTmFtZTMga2V5IDoga2V5\ncykgewogICAgICAgICAgICBFbXBsb3llZTMgZSA9IGVzLmdldChrZXkpOwog\nICAgICAgICAgICBBc3NlcnQuYXNzZXJ0RXF1YWxzKGtleSwgZS5nZXROYW1l\nKCkpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCBhc3NlcnRF\nbXBsb3llZTEoRW1wbG95ZWUxIGUpIHsKICAgICAgICBpbnQgaWQgPSBlLmdl\ndEVtcElkKCk7CiAgICAgICAgRGVwYXJ0bWVudDEgZCA9IGUuZ2V0RGVwYXJ0\nbWVudCgpOwogICAgICAgIGFzc2VydERlcGFydG1lbnQxKGQpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIGFzc2VydEVtcGxveWVlMihFbXBsb3llZTIgZSkg\newogICAgICAgIEVtcGxveWVlUEsyIHBrID0gZS5nZXRFbXBQSygpOwogICAg\nICAgIERlcGFydG1lbnQyIGQgPSBlLmdldERlcGFydG1lbnQoKTsKICAgICAg\nICBhc3NlcnREZXBhcnRtZW50MihkKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBhc3NlcnRFbXBsb3llZTMoRW1wbG95ZWUzIGUpIHsKICAgICAgICBpbnQg\naWQgPSBlLmdldEVtcElkKCk7CiAgICAgICAgRGVwYXJ0bWVudDMgZCA9IGUu\nZ2V0RGVwYXJ0bWVudCgpOwogICAgICAgIGFzc2VydERlcGFydG1lbnQzKGQp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHF1ZXJ5T2JqKCkgewogICAgICAg\nIHF1ZXJ5RGVwYXJ0bWVudDEoZW1mKTsKICAgICAgICBxdWVyeUVtcGxveWVl\nMShlbWYpOwogICAgICAgIHF1ZXJ5RGVwYXJ0bWVudDIoZW1mKTsKICAgICAg\nICBxdWVyeUVtcGxveWVlMihlbWYpOwogICAgICAgIHF1ZXJ5RGVwYXJ0bWVu\ndDMoZW1mKTsKICAgICAgICBxdWVyeUVtcGxveWVlMyhlbWYpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHF1ZXJ5RGVwYXJ0bWVudDEoRW50aXR5TWFuYWdl\nckZhY3RvcnkgZW1mKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVt\nZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgRW50aXR5VHJhbnNh\nY3Rpb24gdHJhbiA9IGVtLmdldFRyYW5zYWN0aW9uKCk7CiAgICAgICAgdHJh\nbi5iZWdpbigpOwogICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeSgi\nc2VsZWN0IGQgZnJvbSBEZXBhcnRtZW50MSBkIik7CiAgICAgICAgTGlzdDxE\nZXBhcnRtZW50MT4gZHMgPSBxLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBm\nb3IgKERlcGFydG1lbnQxIGQgOiBkcykKICAgICAgICAgICAgYXNzZXJ0RGVw\nYXJ0bWVudDEoZCk7CgogICAgICAgIHRyYW4uY29tbWl0KCk7CiAgICAgICAg\nZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBxdWVyeUVtcGxv\neWVlMShFbnRpdHlNYW5hZ2VyRmFjdG9yeSBlbWYpIHsKICAgICAgICBFbnRp\ndHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAg\nICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0cmFuID0gZW0uZ2V0VHJhbnNhY3Rp\nb24oKTsKICAgICAgICB0cmFuLmJlZ2luKCk7CiAgICAgICAgUXVlcnkgcSA9\nIGVtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgZSBmcm9tIEVtcGxveWVlMSBlIik7\nCiAgICAgICAgTGlzdDxFbXBsb3llZTE+IGVzID0gcS5nZXRSZXN1bHRMaXN0\nKCk7CiAgICAgICAgZm9yIChFbXBsb3llZTEgZSA6IGVzKQogICAgICAgICAg\nICBhc3NlcnRFbXBsb3llZTEoZSk7CgogICAgICAgIHRyYW4uY29tbWl0KCk7\nCiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBx\ndWVyeURlcGFydG1lbnQyKEVudGl0eU1hbmFnZXJGYWN0b3J5IGVtZikgewog\nICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFu\nYWdlcigpOwogICAgICAgIEVudGl0eVRyYW5zYWN0aW9uIHRyYW4gPSBlbS5n\nZXRUcmFuc2FjdGlvbigpOwogICAgICAgIHRyYW4uYmVnaW4oKTsKICAgICAg\nICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnkoInNlbGVjdCBkIGZyb20gRGVw\nYXJ0bWVudDIgZCIpOwogICAgICAgIExpc3Q8RGVwYXJ0bWVudDI+IGRzID0g\ncS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgZm9yIChEZXBhcnRtZW50MiBk\nIDogZHMpCiAgICAgICAgICAgIGFzc2VydERlcGFydG1lbnQyKGQpOwoKICAg\nICAgICB0cmFuLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgcXVlcnlFbXBsb3llZTIoRW50aXR5TWFuYWdl\nckZhY3RvcnkgZW1mKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVt\nZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgRW50aXR5VHJhbnNh\nY3Rpb24gdHJhbiA9IGVtLmdldFRyYW5zYWN0aW9uKCk7CiAgICAgICAgdHJh\nbi5iZWdpbigpOwogICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeSgi\nc2VsZWN0IGUgZnJvbSBFbXBsb3llZTIgZSIpOwogICAgICAgIExpc3Q8RW1w\nbG95ZWUyPiBlcyA9IHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGZvciAo\nRW1wbG95ZWUyIGUgOiBlcykKICAgICAgICAgICAgYXNzZXJ0RW1wbG95ZWUy\nKGUpOwoKICAgICAgICB0cmFuLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3Nl\nKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgcXVlcnlEZXBhcnRtZW50MyhF\nbnRpdHlNYW5hZ2VyRmFjdG9yeSBlbWYpIHsKICAgICAgICBFbnRpdHlNYW5h\nZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBF\nbnRpdHlUcmFuc2FjdGlvbiB0cmFuID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsK\nICAgICAgICB0cmFuLmJlZ2luKCk7CiAgICAgICAgUXVlcnkgcSA9IGVtLmNy\nZWF0ZVF1ZXJ5KCJzZWxlY3QgZCBmcm9tIERlcGFydG1lbnQzIGQiKTsKICAg\nICAgICBMaXN0PERlcGFydG1lbnQzPiBkcyA9IHEuZ2V0UmVzdWx0TGlzdCgp\nOwogICAgICAgIGZvciAoRGVwYXJ0bWVudDMgZCA6IGRzKQogICAgICAgICAg\nICBhc3NlcnREZXBhcnRtZW50MyhkKTsKCiAgICAgICAgdHJhbi5jb21taXQo\nKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHF1ZXJ5RW1wbG95ZWUzKEVudGl0eU1hbmFnZXJGYWN0b3J5IGVtZikgewog\nICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFu\nYWdlcigpOwogICAgICAgIEVudGl0eVRyYW5zYWN0aW9uIHRyYW4gPSBlbS5n\nZXRUcmFuc2FjdGlvbigpOwogICAgICAgIHRyYW4uYmVnaW4oKTsKICAgICAg\nICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnkoInNlbGVjdCBlIGZyb20gRW1w\nbG95ZWUzIGUiKTsKICAgICAgICBMaXN0PEVtcGxveWVlMz4gZXMgPSBxLmdl\ndFJlc3VsdExpc3QoKTsKICAgICAgICBmb3IgKEVtcGxveWVlMyBlIDogZXMp\nCiAgICAgICAgICAgIGFzc2VydEVtcGxveWVlMyhlKTsKCiAgICAgICAgdHJh\nbi5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQp9Cg==\n","encoding":"base64"}

