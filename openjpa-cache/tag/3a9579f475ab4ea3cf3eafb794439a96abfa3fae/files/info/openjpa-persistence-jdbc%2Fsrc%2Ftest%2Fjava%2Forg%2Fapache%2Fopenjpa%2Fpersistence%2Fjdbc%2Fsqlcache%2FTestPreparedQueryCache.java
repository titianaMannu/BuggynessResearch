{"sha":"4eaf391128ba1781dab779aeb907ececaabbeb1f","node_id":"MDQ6QmxvYjIwNjM2NDo0ZWFmMzkxMTI4YmExNzgxZGFiNzc5YWViOTA3ZWNlY2FhYmJlYjFm","size":48519,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/4eaf391128ba1781dab779aeb907ececaabbeb1f","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuamRiYy5z\ncWxjYWNoZTsKCmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0OwppbXBvcnQg\namF2YS51dGlsLkFycmF5czsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9u\nczsKaW1wb3J0IGphdmEudXRpbC5JdGVyYXRvcjsKaW1wb3J0IGphdmEudXRp\nbC5MaXN0OwppbXBvcnQgamF2YS51dGlsLlByb3BlcnRpZXM7CgppbXBvcnQg\namF2YXgucGVyc2lzdGVuY2UuRW50aXR5TWFuYWdlcjsKaW1wb3J0IGphdmF4\nLnBlcnNpc3RlbmNlLkxvY2tNb2RlVHlwZTsKaW1wb3J0IGphdmF4LnBlcnNp\nc3RlbmNlLlF1ZXJ5OwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuVHlwZWRR\ndWVyeTsKCmltcG9ydCBqdW5pdC5mcmFtZXdvcmsuVGVzdENhc2U7CgppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5QcmVwYXJlZFF1ZXJ5Owpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5QcmVwYXJlZFF1ZXJ5\nQ2FjaGU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlF1ZXJ5\nSGludHM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlF1ZXJ5\nTGFuZ3VhZ2VzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5R\ndWVyeVN0YXRpc3RpY3M7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2Vy\nbmVsLmpwcWwuSlBRTFBhcnNlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5saWIuamRiYy5BYnN0cmFjdEpEQkNMaXN0ZW5lcjsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5saWIuamRiYy5KREJDRXZlbnQ7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEubGliLmpkYmMuSkRCQ0xpc3RlbmVyOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlN\nYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNl\nLk9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSTsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdl\nclNQSTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5P\ncGVuSlBBUGVyc2lzdGVuY2U7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2UuT3BlbkpQQVF1ZXJ5OwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnBlcnNpc3RlbmNlLmpkYmMuc3FsY2FjaGUuRW1wbG95ZWUuQ2F0\nZWdvcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uu\ndGVzdC5BbGxvd0ZhaWx1cmU7CgovKioKICogVGVzdHMgY29ycmVjdG5lc3Mg\nYW5kIHBlcmZvcm1hbmNlIG9mIHF1ZXJpZXMgd2l0aCBhbmQgd2l0aG91dCBQ\ncmVwYXJlZCBRdWVyeSBDYWNoZWluZy4KICogIAogKiBUaGlzIHRlc3QgdXNl\ncyBhIHNpbmdsZSBFbnRpdHlNYW5hZ2VyRmFjdG9yeSBpbml0aWFsaXplZCB3\naXRoIGZpeGVkIHNldCBvZiBlbnRpdHkgY2xhc3NlcyAKICogYW5kIGFwcHJv\ncHJpYXRlIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVycyBmb3IgUHJlcGFyZWQg\nUXVlcnkgQ2FjaGUuIAogKiAKICogVGhlIGVudGl0eSBjbGFzc2VzIGFyZSBz\ncGVjaWZpZWQgaW4gcGVyc2lzdGVuY2UgdW5pdCA8Y29kZT4iUHJlcGFyZWRR\ndWVyeSI8L2NvZGU+IGluIGEgCiAqIDxjb2RlPk1FVEEtSU5GL3BlcnNpc3Rl\nbmNlLnhtbDwvY29kZT4gdGhhdCBtdXN0IGJlIGF2YWlsYWJsZSB0byB0aGUg\nY2xhc3NwYXRoLgogKiAKICogQ29uZmlndXJlcyB0aGUgRW50aXR5TWFuYWdl\nckZhY3Rvcnkgd2l0aCBwcm9wZXJ0aWVzIHRoYXQgYXJlIHJlbGV2YW50IHRv\nIHRlc3RpbmcgUHJlcGFyZWRRdWVyeSBjYWNoZXMuCiAqIFN3aXRjaGVzIG9m\nZiBydW50aW1lIGVuaGFuY2VtZW50IHRvIGF2b2lkIHVuaW50ZW5kZWQgY29u\nc2VxdWVuY2VzLgogKiBQcm92aWRlcyBmYWNpbGl0aWVzIHRvIHJ1biBhIEpQ\nUUwgcXVlcnkgd2l0aCBhbmQgd2l0aG91dCBjYWNoZSBhbmQgY29tcHV0ZSB0\naGUgcGVyZm9ybWFuY2UgZGVsdGEuIAogKiAKICogVXNlcyBhIGhhcmQtY29k\nZWQgZGF0YSBzZXQgaW5pdGlhbGl6ZWQgb25jZSBmb3IgdGhlIGVudGlyZSBz\ndWl0ZS4gCiAqIAogKiBAYXV0aG9yIFBpbmFraSBQb2RkYXIKICogCiAqLwpw\ndWJsaWMgY2xhc3MgVGVzdFByZXBhcmVkUXVlcnlDYWNoZSBleHRlbmRzIFRl\nc3RDYXNlIHsKICAgIAogICAgcHJpdmF0ZSBzdGF0aWMgU3RyaW5nIFJFU09V\nUkNFID0gIk1FVEEtSU5GL3BlcnNpc3RlbmNlLnhtbCI7IAogICAgcHJpdmF0\nZSBzdGF0aWMgU3RyaW5nIFVOSVRfTkFNRSA9ICJQcmVwYXJlZFF1ZXJ5IjsK\nICAgIAogICAgcHJvdGVjdGVkIHN0YXRpYyBmaW5hbCBpbnQgU0FNUExFX1NJ\nWkUgPSAxMDA7ICAvLyBuby4gb2Ygb2JzZXJ2YXRpb25zIGZvciBwZXJmb3Jt\nYW5jZSBzdGF0aXN0aWNzIAogICAgcHVibGljIHN0YXRpYyBmaW5hbCBib29s\nZWFuIFVTRV9DQUNIRSAgPSB0cnVlOyAvLyBtbmVtb25pYyBmb3IgdXNpbmcg\nY2FjaGUKICAgIHByaXZhdGUgc3RhdGljIE9iamVjdFtdIE5PX1BBUkFNUyAg\nICAgID0gbnVsbDsgLy8gbW5lbW9uaWMgZm9yIG5vIHF1ZXJ5IHBhcmFtZXRl\ncnMKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgYm9vbGVhbiBJU19OQU1FRF9R\nVUVSWSAgPSB0cnVlOyAvLyBtbmVtb25pYyBmb3IgbmFtZWQgcXVlcnkKICAg\nIAogICAgcHJpdmF0ZSBzdGF0aWMgYm9vbGVhbiBGQUlMX0lGX1BFUkZfREVH\nUkFERSA9IGZhbHNlOyAKCiAgICAKICAgIHByaXZhdGUgc3RhdGljIENvbXBh\nbnkgSUJNOwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmdbXSBDT01Q\nQU5ZX05BTUVTICAgID0geyJJQk0iLCAiQkVBIiwgImFjbWUub3JnIiB9Owog\nICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnRbXSAgICBTVEFSVF9ZRUFSUyAg\nICAgID0gezE5MDAsIDIwMDAsIDIwMTAgfTsKCXB1YmxpYyBzdGF0aWMgZmlu\nYWwgU3RyaW5nW10gREVQQVJUTUVOVF9OQU1FUyA9IHsiTWFya2V0aW5nIiwg\nIlNhbGVzIiwgIkVuZ2luZWVyaW5nIiB9OwogICAgcHVibGljIHN0YXRpYyBm\naW5hbCBTdHJpbmdbXSBFTVBMT1lFRV9OQU1FUyAgID0geyJUb20iLCAiRGlj\nayIsICJIYXJyYXkiIH07CglwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZ1td\nIENJVFlfTkFNRVMgICAgICAgPSB7IlR1bHNhIiwgIkR1cmJhbiIsICJIYXJs\nZW0ifTsKCQogICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgRVhDTFVE\nRURfUVVFUllfMSA9ICJzZWxlY3QgY291bnQocCkgZnJvbSBDb21wYW55IHAi\nOwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgRVhDTFVERURfUVVF\nUllfMiA9ICJzZWxlY3QgY291bnQocCkgZnJvbSBEZXBhcnRtZW50IHAiOwoJ\ncHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgSU5DTFVERURfUVVFUlkgICA9\nICJzZWxlY3QgcCBmcm9tIEFkZHJlc3MgcCI7CgkKICAgIHB1YmxpYyBzdGF0\naWMgZmluYWwgbG9uZ1tdIEJPT0tfSURTICAgICA9IHsxMDAwLCAyMDAwLCAz\nMDAwfTsKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgU3RyaW5nW10gQk9PS19O\nQU1FUyA9IHsiQXJndW1lbnRhdGl2ZSBJbmRpYW4iLCAiVGluIERydW0iLCAi\nQmxpbmsifTsKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgbG9uZ1tdIENEX0lE\nUyAgICAgICA9IHsxMDAxLCAyMDAxLCAzMDAxfTsKICAgIHB1YmxpYyBzdGF0\naWMgZmluYWwgU3RyaW5nW10gQ0RfTEFCRUxTICA9ICB7IkJlYXRsZXMiLCAi\nU2luYXRyYSIsICJEb24ndCBSb2NrIE15IEJvYXQifTsKICAgIAogICAgcHJv\ndGVjdGVkIHN0YXRpYyBPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEkg\nZW1mOwogICAgcHJvdGVjdGVkIHN0YXRpYyBTUUxBdWRpdG9yIGF1ZGl0b3I7\nCiAgICBwcml2YXRlIE9wZW5KUEFFbnRpdHlNYW5hZ2VyU1BJIGVtOwoJCgkv\nKioKCSAqIFNldHMgdXAgdGhlIHRlc3Qgc3VpdGUgd2l0aCBhIHN0YXRpY2Fs\nbHkgaW5pdGlhbGl6ZWQgRW50aXR5TWFuYWdlckZhY3RvcnkuCgkgKiBDcmVh\ndGVzIGRhdGEgb25jZSBmb3IgYWxsIG90aGVyIHRlc3RzIHRvIHVzZS4KCSAq\nLwoJcHVibGljIHZvaWQgc2V0VXAoKSAgewogICAgICAgIGlmIChlbWYgPT0g\nbnVsbCkgewogICAgICAgICAgICBQcm9wZXJ0aWVzIGNvbmZpZyA9IG5ldyBQ\ncm9wZXJ0aWVzKCk7CiAgICAgICAgICAgIGNvbmZpZy5wdXQoIm9wZW5qcGEu\namRiYy5TeW5jaHJvbml6ZU1hcHBpbmdzIiwgImJ1aWxkU2NoZW1hKEZvcmVp\nZ25LZXlzPXRydWUsU2NoZW1hQWN0aW9uPSdkcm9wLGFkZCcpIik7CiAgICAg\nICAgICAgIGNvbmZpZy5wdXQoIm9wZW5qcGEuamRiYy5KREJDTGlzdGVuZXJz\nIiwgbmV3IEpEQkNMaXN0ZW5lcltdIHsgYXVkaXRvciA9IG5ldyBTUUxBdWRp\ndG9yKCl9KTsKICAgICAgICAgICAgY29uZmlnLnB1dCgib3BlbmpwYS5qZGJj\nLlF1ZXJ5U1FMQ2FjaGUiLCAidHJ1ZSIpOwogICAgICAgICAgICBjb25maWcu\ncHV0KCJvcGVuanBhLlJ1bnRpbWVVbmVuaGFuY2VkQ2xhc3NlcyIsICJ1bnN1\ncHBvcnRlZCIpOwogICAgICAgICAgICBjb25maWcucHV0KCJvcGVuanBhLkR5\nbmFtaWNFbmhhbmNlbWVudEFnZW50IiwgImZhbHNlIik7CiAgICAgICAgICAg\nIGVtZiA9IChPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEkpT3BlbkpQ\nQVBlcnNpc3RlbmNlLmNyZWF0ZUVudGl0eU1hbmFnZXJGYWN0b3J5KAogICAg\nICAgICAgICAgICAgICAgIFVOSVRfTkFNRSwgUkVTT1VSQ0UsIGNvbmZpZyk7\nCiAgICAgICAgICAgIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsK\nICAgICAgICAgICAgY3JlYXRlVGVzdERhdGEoKTsKICAgICAgICB9IGVsc2Ug\newogICAgCQllbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAg\nICAgICAgIGdldFByZXBhcmVkUXVlcnlDYWNoZSgpLmNsZWFyKCk7CiAgICAg\nICAgfQoJfQoJCgkvKioKCSAqIENyZWF0ZSBkYXRhIGZvciB0aGUgZW50aXJl\nIHRlc3Qgc3VpdGUgdG8gdXNlLgoJICovCgl2b2lkIGNyZWF0ZVRlc3REYXRh\nKCkgewoJICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKCSAgICBm\nb3IgKGludCBpID0gMDsgaSA8IENPTVBBTllfTkFNRVMubGVuZ3RoOyBpKysp\nIHsKCSAgICAgICAgQ29tcGFueSBjb21wYW55ID0gbmV3IENvbXBhbnkoKTsK\nCSAgICAgICAgaWYgKGkgPT0gMCkgCgkgICAgICAgICAgICBJQk0gPSBjb21w\nYW55OwoJICAgICAgICBjb21wYW55LnNldE5hbWUoQ09NUEFOWV9OQU1FU1tp\nXSk7CgkgICAgICAgIGNvbXBhbnkuc2V0U3RhcnRZZWFyKFNUQVJUX1lFQVJT\nW2ldKTsKCSAgICAgICAgZW0ucGVyc2lzdChjb21wYW55KTsKCSAgICAgICAg\nZm9yIChpbnQgaiA9IDA7IGogPCBERVBBUlRNRU5UX05BTUVTLmxlbmd0aDsg\naisrKSB7CgkgICAgICAgICAgICBEZXBhcnRtZW50IGRlcHQgPSBuZXcgRGVw\nYXJ0bWVudCgpOwoJICAgICAgICAgICAgZGVwdC5zZXROYW1lKERFUEFSVE1F\nTlRfTkFNRVNbal0pOwoJICAgICAgICAgICAgY29tcGFueS5hZGREZXBhcnRt\nZW50KGRlcHQpOwoJICAgICAgICAgICAgZW0ucGVyc2lzdChkZXB0KTsKCSAg\nICAgICAgICAgIGZvciAoaW50IGsgPSAwOyBrIDwgRU1QTE9ZRUVfTkFNRVMu\nbGVuZ3RoOyBrKyspIHsKCSAgICAgICAgICAgICAgICBFbXBsb3llZSBlbXAg\nPSBuZXcgRW1wbG95ZWUoKTsKCSAgICAgICAgICAgICAgICBlbXAuc2V0TmFt\nZShFTVBMT1lFRV9OQU1FU1trXSk7CgkgICAgICAgICAgICAgICAgQWRkcmVz\ncyBhZGRyID0gbmV3IEFkZHJlc3MoKTsKCSAgICAgICAgICAgICAgICBhZGRy\nLnNldENpdHkoQ0lUWV9OQU1FU1trXSk7CiAgICAgICAgICAgICAgICAgICAg\nZW0ucGVyc2lzdChlbXApOwoJICAgICAgICAgICAgICAgIGVtLnBlcnNpc3Qo\nYWRkcik7CgkgICAgICAgICAgICAgICAgZW1wLnNldEFkZHJlc3MoYWRkcik7\nCiAgICAgICAgICAgICAgICAgICAgZGVwdC5hZGRFbXBsb3llZXMoZW1wKTsK\nCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH0KICAgICAgICBQZXJz\nb24gcDEgPSBuZXcgUGVyc29uKCJKb2huIiwgIkRvZSIsIChzaG9ydCk0NSwg\nMTk2NCk7CiAgICAgICAgUGVyc29uIHAyID0gbmV3IFBlcnNvbigiSm9obiIs\nICJEb2UiLCAoc2hvcnQpNDIsIDE5NjcpOwogICAgICAgIFBlcnNvbiBwMyA9\nIG5ldyBQZXJzb24oIkhhcnJ5IiwgIkRvZSIsIChzaG9ydCkxMiwgMTk5NSk7\nCiAgICAgICAgUGVyc29uIHA0ID0gbmV3IFBlcnNvbigiQmFycnkiLCAiRG9l\nIiwgKHNob3J0KTIyLCAxOTg1KTsKICAgICAgICBlbS5wZXJzaXN0KHAxKTsK\nICAgICAgICBlbS5wZXJzaXN0KHAyKTsKICAgICAgICBlbS5wZXJzaXN0KHAz\nKTsKICAgICAgICBlbS5wZXJzaXN0KHA0KTsKICAgICAgICAKICAgICAgICBB\ndXRob3IgYTEgPSBuZXcgQXV0aG9yKCJBdXRob3IxIiwgIiIsIChzaG9ydCk0\nMCwgMTk2MCk7CiAgICAgICAgQXV0aG9yIGEyID0gbmV3IEF1dGhvcigiQXV0\naG9yMiIsICIiLCAoc2hvcnQpNDEsIDE5NjEpOwogICAgICAgIEF1dGhvciBh\nMyA9IG5ldyBBdXRob3IoIkF1dGhvcjMiLCAiIiwgKHNob3J0KTQyLCAxOTYy\nKTsKICAgICAgICBTaW5nZXIgczEgPSBuZXcgU2luZ2VyKCJTaW5nZXIxIiwg\nIiIsIChzaG9ydCkyMSwgMTk5MSk7CiAgICAgICAgU2luZ2VyIHMyID0gbmV3\nIFNpbmdlcigiU2luZ2VyMiIsICIiLCAoc2hvcnQpMjIsIDE5OTIpOwogICAg\nICAgIAogICAgICAgIGxvbmcgaWQgPSAxMDA7CiAgICAgICAgQm9vayAgIGIx\nID0gbmV3IEJvb2soIkJvb2sxIik7CiAgICAgICAgQm9vayAgIGIyID0gbmV3\nIEJvb2soIkJvb2syIik7CiAgICAgICAgQ0QgICAgIGMxID0gbmV3IENEKCJD\nRDEiKTsKICAgICAgICBDRCAgICAgYzIgPSBuZXcgQ0QoIkNEMiIpOwogICAg\nICAgIAogICAgICAgIGIxLnNldElkKGlkKyspOyBiMS5zZXRUaXRsZSgidGl0\nbGUtMSIpOyBiMS5zZXRUb2tlbigiTEFSR0UiKTsKICAgICAgICBiMi5zZXRJ\nZChpZCsrKTsgYjIuc2V0VGl0bGUoInRpdGxlLTIiKTsgYjIuc2V0VG9rZW4o\nIk1FRElVTSIpOwogICAgICAgIGMxLnNldElkKGlkKyspOwogICAgICAgIGMy\nLnNldElkKGlkKyspOwogICAgICAgIGIxLmFkZEF1dGhvcihhMSk7CiAgICAg\nICAgYjEuYWRkQXV0aG9yKGEyKTsKICAgICAgICBiMi5hZGRBdXRob3IoYTIp\nOwogICAgICAgIGIyLmFkZEF1dGhvcihhMyk7CiAgICAgICAgYzEuc2V0U2lu\nZ2VyKHMxKTsKICAgICAgICBjMi5zZXRTaW5nZXIoczIpOwogICAgICAgIAog\nICAgICAgIGVtLnBlcnNpc3QoYTEpOyBlbS5wZXJzaXN0KGEyKTsgICBlbS5w\nZXJzaXN0KGEzKTsKICAgICAgICBlbS5wZXJzaXN0KHMxKTsgZW0ucGVyc2lz\ndChzMik7CiAgICAgICAgZW0ucGVyc2lzdChiMSk7IGVtLnBlcnNpc3QoYjIp\nOwogICAgICAgIGVtLnBlcnNpc3QoYzEpOyBlbS5wZXJzaXN0KGMyKTsKCiAg\nICAgICAgaWQgPSAoaW50KVN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpOwog\nICAgICAgIE9yZGVySlBBIG8xID0gbmV3IE9yZGVySlBBKCk7CiAgICAgICAg\nbzEuc2V0T3JkZXJJZChpZCsrKTsKICAgICAgICBvMS5zZXRDdXN0b21lcklk\nKDMzOSk7CiAgICAgICAgbzEuc2V0RGlzdHJpY3RJZCgzKTsKICAgICAgICBv\nMS5zZXRXYXJlaG91c2VJZCgyMyk7CiAgICAgICAgCiAgICAgICAgT3JkZXJK\nUEEgbzIgPSBuZXcgT3JkZXJKUEEoKTsKICAgICAgICBvMi5zZXRPcmRlcklk\nKGlkKyspOwogICAgICAgIG8yLnNldEN1c3RvbWVySWQoMjk2Nyk7CiAgICAg\nICAgbzIuc2V0RGlzdHJpY3RJZCg1KTsKICAgICAgICBvMi5zZXRXYXJlaG91\nc2VJZCgyMik7CiAgICAgICAgCiAgICAgICAgZW0ucGVyc2lzdChvMSk7CiAg\nICAgICAgZW0ucGVyc2lzdChvMik7CiAgICAgICAgCiAgICAgICAgCiAgICAg\nICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKCX0KCglwdWJsaWMg\ndm9pZCB0ZWFyRG93bigpIHRocm93cyBFeGNlcHRpb24gewoJICAgIGlmIChl\nbS5pc09wZW4oKSkKCSAgICAgICAgZW0uY2xvc2UoKTsKCQlzdXBlci50ZWFy\nRG93bigpOwoJfQoJCgoJcHVibGljIHZvaWQgdGVzdFByZXBhcmVkUXVlcnlD\nYWNoZUlzQWN0aXZlQnlEZWZhdWx0KCkgewoJCWFzc2VydE5vdE51bGwoZ2V0\nUHJlcGFyZWRRdWVyeUNhY2hlKCkpOwoJfQoJCglwdWJsaWMgdm9pZCB0ZXN0\nUHJlcGFyZWRRdWVyeUNhY2hlSXNQZXJVbml0U2luZ2xldG9uKCkgewoJCVBy\nZXBhcmVkUXVlcnlDYWNoZSBjMSA9IGdldFByZXBhcmVkUXVlcnlDYWNoZSgp\nOwoJCVByZXBhcmVkUXVlcnlDYWNoZSBjMiA9IGdldFByZXBhcmVkUXVlcnlD\nYWNoZSgpOwoJCWFzc2VydFNhbWUoYzEsIGMyKTsKCX0KCQoJcHVibGljIHZv\naWQgdGVzdFByZXBhcmVkUXVlcnlJZGVudGlmaWVySXNPcmlnaW5hbEpQUUxR\ndWVyeSgpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJzZWxlY3QgcCBmcm9t\nIENvbXBhbnkgcCI7CiAgICAgICAgT3BlbkpQQVF1ZXJ5PD8+IHExID0gZW0u\nY3JlYXRlUXVlcnkoanBxbCk7CiAgICAgICAgcTEuZ2V0UmVzdWx0TGlzdCgp\nOwogICAgICAgIFByZXBhcmVkUXVlcnkgcHEgPSBnZXRQcmVwYXJlZFF1ZXJ5\nQ2FjaGUoKS5nZXQoanBxbCk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChwcSk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKGpwcWwsIHBxLmdldElkZW50aWZpZXIo\nKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGpwcWwsIHBxLmdldE9yaWdpbmFs\nUXVlcnkoKSk7Cgl9CgkKCXB1YmxpYyB2b2lkIHRlc3RPcmlnaW5hbEpQUUxR\ndWVyeVN0cmluZ0lzU2V0T25QcmVwYXJlZFF1ZXJ5KCkgewogICAgICAgIFN0\ncmluZyBqcHFsID0gInNlbGVjdCBwIGZyb20gQ29tcGFueSBwIjsKICAgICAg\nICBPcGVuSlBBUXVlcnk8Pz4gcTEgPSBlbS5jcmVhdGVRdWVyeShqcHFsKTsK\nICAgICAgICBxMS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgUHJlcGFyZWRR\ndWVyeSBwcSA9IGdldFByZXBhcmVkUXVlcnlDYWNoZSgpLmdldChqcHFsKTsK\nICAgICAgICBhc3NlcnROb3ROdWxsKHBxKTsKICAgICAgICBPcGVuSlBBUXVl\ncnk8Pz4gcTIgPSBlbS5jcmVhdGVRdWVyeShqcHFsKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoanBxbCxxMi5nZXRRdWVyeVN0cmluZygpKTsKCX0KCglwdWJs\naWMgdm9pZCB0ZXN0T3JkZXJCeUVsZW1lbnRzQWJzZW50SW5Qcm9qZWN0aW9u\nKCkgewoJICAgIFN0cmluZyBqcHFsID0gInNlbGVjdCBjLm5hbWUgZnJvbSBD\nb21wYW55IGMgT1JERVIgQlkgYy5zdGFydFllYXIiOwogICAgICAgIE9wZW5K\nUEFRdWVyeTw/PiBxMSA9IGVtLmNyZWF0ZVF1ZXJ5KGpwcWwpOwogICAgICAg\nIExpc3QgbDEgPSBxMS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgCiAgICAg\nICAgUHJlcGFyZWRRdWVyeSBwcSA9IGdldFByZXBhcmVkUXVlcnlDYWNoZSgp\nLmdldChqcHFsKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHBxKTsKICAgICAg\nICBPcGVuSlBBUXVlcnk8Pz4gcTIgPSBlbS5jcmVhdGVRdWVyeShqcHFsKTsK\nICAgICAgICBMaXN0IGwyID0gcTIuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAg\nIAogICAgICAgIGFzc2VydEVxdWFscyhsMS5zaXplKCksIGwyLnNpemUoKSk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKGwxLnRvU3RyaW5nKCksIGwyLnRvU3Ry\naW5nKCkpOwoJfQoJCglwdWJsaWMgdm9pZCB0ZXN0RXhjbHVzaW9uUGF0dGVy\nbigpIHsKCQlPcGVuSlBBUXVlcnk8Pz4gcTEgPSBlbS5jcmVhdGVRdWVyeShF\nWENMVURFRF9RVUVSWV8xKTsKCQlxMS5nZXRSZXN1bHRMaXN0KCk7CgkJYXNz\nZXJ0Tm90Q2FjaGVkKEVYQ0xVREVEX1FVRVJZXzEpOwoJCQoJCU9wZW5KUEFR\ndWVyeTw/PiBxMiA9IGVtLmNyZWF0ZVF1ZXJ5KEVYQ0xVREVEX1FVRVJZXzIp\nOwoJCXEyLmdldFJlc3VsdExpc3QoKTsKCQlhc3NlcnROb3RDYWNoZWQoRVhD\nTFVERURfUVVFUllfMik7CgkJCgkJT3BlbkpQQVF1ZXJ5PD8+IHEzID0gZW0u\nY3JlYXRlUXVlcnkoSU5DTFVERURfUVVFUlkpOwoJCXEzLmdldFJlc3VsdExp\nc3QoKTsKCQlhc3NlcnRDYWNoZWQoSU5DTFVERURfUVVFUlkpOwoJfQoJCgl2\nb2lkIGFzc2VydExhbmd1YWdlKE9wZW5KUEFRdWVyeTw/PiBxLCBTdHJpbmcg\nbGFuZykgewoJCWFzc2VydEVxdWFscyhsYW5nLCBxLmdldExhbmd1YWdlKCkp\nOwoJfQoJCgl2b2lkIGFzc2VydENhY2hlZChTdHJpbmcgaWQpIHsKCQlQcmVw\nYXJlZFF1ZXJ5IGNhY2hlZCA9IGdldFByZXBhcmVkUXVlcnlDYWNoZSgpLmdl\ndChpZCk7CgkJYXNzZXJ0Tm90TnVsbChnZXRQcmVwYXJlZFF1ZXJ5Q2FjaGUo\nKSArICI6ICIgKyBnZXRQcmVwYXJlZFF1ZXJ5Q2FjaGUoKS5nZXRNYXBWaWV3\nKCkgKyAKCQkJCSIgZG9lcyBub3QgY29udGFpbiAiICsgaWQsIGNhY2hlZCk7\nCgl9CgkKCXZvaWQgYXNzZXJ0Tm90Q2FjaGVkKFN0cmluZyBpZCkgewoJICAg\nIFByZXBhcmVkUXVlcnlDYWNoZSBjYWNoZSA9IGdldFByZXBhcmVkUXVlcnlD\nYWNoZSgpOwoJCWlmIChjYWNoZSAhPSBudWxsKSB7CgkJCWFzc2VydE51bGwo\nY2FjaGUuZ2V0KGlkKSk7CgkJfQoJfQoJCglwdWJsaWMgdm9pZCB0ZXN0UHJl\ncGFyZWRRdWVyeUlzQ2FjaGVkT25FeGVjdXRpb24oKSB7CgkJU3RyaW5nIGpw\ncWwgPSAic2VsZWN0IHAgZnJvbSBDb21wYW55IHAiOwoJCU9wZW5KUEFRdWVy\neTw/PiBxMSA9IGVtLmNyZWF0ZVF1ZXJ5KGpwcWwpOwoJCWFzc2VydE5vdENh\nY2hlZChqcHFsKTsKCQlhc3NlcnRMYW5ndWFnZShxMSwgSlBRTFBhcnNlci5M\nQU5HX0pQUUwpOwoJCQoJCXExLmdldFJlc3VsdExpc3QoKTsKCQlhc3NlcnRD\nYWNoZWQoanBxbCk7CgkJYXNzZXJ0TGFuZ3VhZ2UocTEsIEpQUUxQYXJzZXIu\nTEFOR19KUFFMKTsKCQkKCQlQcmVwYXJlZFF1ZXJ5IGNhY2hlZCA9IGdldFBy\nZXBhcmVkUXVlcnlDYWNoZSgpLmdldChqcHFsKTsKCQlhc3NlcnRFcXVhbHMo\nanBxbCwgY2FjaGVkLmdldElkZW50aWZpZXIoKSk7CgkJYXNzZXJ0RmFsc2Uo\nanBxbC5lcXVhbHNJZ25vcmVDYXNlKGNhY2hlZC5nZXRUYXJnZXRRdWVyeSgp\nKSk7Cgl9CgoJcHVibGljIHZvaWQgdGVzdFByZXBhcmVkUXVlcnlJc0NhY2hl\nZEFjcm9zc0V4ZWN1dGlvbigpIHsKCQlTdHJpbmcganBxbCA9ICJzZWxlY3Qg\ncCBmcm9tIENvbXBhbnkgcCI7CgkJT3BlbkpQQVF1ZXJ5PD8+IHExID0gZW0u\nY3JlYXRlUXVlcnkoanBxbCk7CgkJYXNzZXJ0Tm90Q2FjaGVkKGpwcWwpOwoJ\nCWFzc2VydExhbmd1YWdlKHExLCBKUFFMUGFyc2VyLkxBTkdfSlBRTCk7CgkJ\nCgkJCgkJcTEuZ2V0UmVzdWx0TGlzdCgpOwoJCWFzc2VydENhY2hlZChqcHFs\nKTsKCQlhc3NlcnRMYW5ndWFnZShxMSwgSlBRTFBhcnNlci5MQU5HX0pQUUwp\nOwoJCQoJCS8vIENyZWF0ZSBhIG5ldyBxdWVyeSB3aXRoIHRoZSBzYW1lIEpQ\nUUwKCQkvLyBUaGlzIGlzIG5vdCBvbmx5IGNhY2hlZCwgaXRzIGxhbmd1YWdl\nIGlzIGRpZmZlcmVudCB0b28KCQlPcGVuSlBBUXVlcnk8Pz4gcTIgPSBlbS5j\ncmVhdGVRdWVyeShqcHFsKTsKCQlhc3NlcnRDYWNoZWQoanBxbCk7CgkJYXNz\nZXJ0TGFuZ3VhZ2UocTIsIFF1ZXJ5TGFuZ3VhZ2VzLkxBTkdfUFJFUEFSRURf\nU1FMKTsKCX0KCQoJcHVibGljIHZvaWQgdGVzdEludmFsaWRhdGVQcmVwYXJl\nZFF1ZXJ5V2l0aEhpbnQoKSB7CgkJU3RyaW5nIGpwcWwgPSAic2VsZWN0IHAg\nZnJvbSBDb21wYW55IHAiOwoJCU9wZW5KUEFRdWVyeTw/PiBxMSA9IGVtLmNy\nZWF0ZVF1ZXJ5KGpwcWwpOwoJCWFzc2VydE5vdENhY2hlZChqcHFsKTsKCQkK\nCQlxMS5nZXRSZXN1bHRMaXN0KCk7CgkJYXNzZXJ0Q2FjaGVkKGpwcWwpOwoJ\nCWFzc2VydExhbmd1YWdlKHExLCBKUFFMUGFyc2VyLkxBTkdfSlBRTCk7CgkJ\nCgkJLy8gQ3JlYXRlIGEgbmV3IHF1ZXJ5IHdpdGggdGhlIHNhbWUgSlBRTAoJ\nCS8vIFRoaXMgaXMgY2FjaGVkIG9uIGNyZWF0aW9uLCBpdHMgbGFuZ3VhZ2Ug\naXMgUHJlcGFyZWQgU1FMCgkJT3BlbkpQQVF1ZXJ5PD8+IHEyID0gZW0uY3Jl\nYXRlUXVlcnkoanBxbCk7CgkJYXNzZXJ0Q2FjaGVkKGpwcWwpOwoJCWFzc2Vy\ndExhbmd1YWdlKHEyLCBRdWVyeUxhbmd1YWdlcy5MQU5HX1BSRVBBUkVEX1NR\nTCk7CgkJcTIuZ2V0UmVzdWx0TGlzdCgpOwoJCQoJCS8vIE5vdyBleGVjdXRl\nIHdpdGggaGludHMgdG8gaW52YWxpZGF0ZS4gCgkJcTIuc2V0SGludChRdWVy\neUhpbnRzLkhJTlRfSU5WQUxJREFURV9QUkVQQVJFRF9RVUVSWSwgdHJ1ZSk7\nCgkJLy8gSW1tZWRpYXRlbHkgaXQgc2hvdWxkIGJlIHJlbW92ZWQgZnJvbSB0\naGUgY2FjaGUKCQlhc3NlcnROb3RDYWNoZWQoanBxbCk7CgkJYXNzZXJ0RXF1\nYWxzKEpQUUxQYXJzZXIuTEFOR19KUFFMLCBxMi5nZXRMYW5ndWFnZSgpKTsK\nCQlxMi5nZXRSZXN1bHRMaXN0KCk7CgkJCgkJLy8gQ3JlYXRlIGEgbmV3IHF1\nZXJ5IHdpdGggdGhlIHNhbWUgSlBRTAoJCS8vIFRoaXMgaXMgbm90IGNhY2hl\nZCBvbiBjcmVhdGlvbiwgaXRzIGxhbmd1YWdlIGlzIEpQUUwKCQlPcGVuSlBB\nUXVlcnk8Pz4gcTMgPSBlbS5jcmVhdGVRdWVyeShqcHFsKTsKCQlhc3NlcnRO\nb3RDYWNoZWQoanBxbCk7CgkJYXNzZXJ0TGFuZ3VhZ2UocTMsIEpQUUxQYXJz\nZXIuTEFOR19KUFFMKTsKCX0KCQoJcHVibGljIHZvaWQgdGVzdElnbm9yZVBy\nZXBhcmVkUXVlcnlXaXRoSGludCgpIHsKCQlTdHJpbmcganBxbCA9ICJzZWxl\nY3QgcCBmcm9tIENvbXBhbnkgcCI7CgkJT3BlbkpQQVF1ZXJ5PD8+IHExID0g\nZW0uY3JlYXRlUXVlcnkoanBxbCk7CgkJYXNzZXJ0Tm90Q2FjaGVkKGpwcWwp\nOwoJCQoJCXExLmdldFJlc3VsdExpc3QoKTsKCQlhc3NlcnRDYWNoZWQoanBx\nbCk7CgkJYXNzZXJ0TGFuZ3VhZ2UocTEsIEpQUUxQYXJzZXIuTEFOR19KUFFM\nKTsKCQkKCQkvLyBDcmVhdGUgYSBuZXcgcXVlcnkgd2l0aCB0aGUgc2FtZSBK\nUFFMCgkJLy8gVGhpcyBpcyBjYWNoZWQgb24gY3JlYXRpb24sIGl0cyBsYW5n\ndWFnZSBpcyBQUkVQQVJFRCBTUUwKCQlPcGVuSlBBUXVlcnk8Pz4gcTIgPSBl\nbS5jcmVhdGVRdWVyeShqcHFsKTsKCQlhc3NlcnRDYWNoZWQoanBxbCk7CgkJ\nYXNzZXJ0TGFuZ3VhZ2UocTIsIFF1ZXJ5TGFuZ3VhZ2VzLkxBTkdfUFJFUEFS\nRURfU1FMKTsKCQlxMi5nZXRSZXN1bHRMaXN0KCk7CgkJCgkJLy8gTm93IGV4\nZWN1dGUgd2l0aCBoaW50cyB0byBpZ25vcmUuIAoJCXEyLnNldEhpbnQoUXVl\ncnlIaW50cy5ISU5UX0lHTk9SRV9QUkVQQVJFRF9RVUVSWSwgdHJ1ZSk7CgkJ\nLy8gSXQgc2hvdWxkIHJlbWFpbiBpbiB0aGUgY2FjaGUKCQlhc3NlcnRDYWNo\nZWQoanBxbCk7CgkJLy8gQnV0IGl0cyBsYW5ndWFnZSBzaG91bGQgYmUgSlBR\nTCBhbmQgbm90IFBSRVBBUkVEIFNRTAoJCWFzc2VydEVxdWFscyhKUFFMUGFy\nc2VyLkxBTkdfSlBRTCwgcTIuZ2V0TGFuZ3VhZ2UoKSk7CgkJcTIuZ2V0UmVz\ndWx0TGlzdCgpOwoJCQoJCS8vIENyZWF0ZSBhIG5ldyBxdWVyeSB3aXRoIHRo\nZSBzYW1lIEpQUUwKCQkvLyBUaGlzIGlzIGNhY2hlZCBvbiBjcmVhdGlvbiwg\naXRzIGxhbmd1YWdlIGlzIFBSRVBBUkVEIFNRTAoJCU9wZW5KUEFRdWVyeTw/\nPiBxMyA9IGVtLmNyZWF0ZVF1ZXJ5KGpwcWwpOwoJCWFzc2VydENhY2hlZChq\ncHFsKTsKCQlhc3NlcnRMYW5ndWFnZShxMywgUXVlcnlMYW5ndWFnZXMuTEFO\nR19QUkVQQVJFRF9TUUwpOwoJfQoKCXB1YmxpYyB2b2lkIHRlc3RRdWVyeVN0\nYXRpc3RpY3MoKSB7CiAgICAgICAgUXVlcnlTdGF0aXN0aWNzPFN0cmluZz4g\nc3RhdHMgPSBnZXRQcmVwYXJlZFF1ZXJ5Q2FjaGUoKS5nZXRTdGF0aXN0aWNz\nKCk7CiAgICAgICAgc3RhdHMucmVzZXQoKTsKCiAgICAgICAgU3RyaW5nIGpw\ncWwxID0gInNlbGVjdCBjIGZyb20gQ29tcGFueSBjIjsKICAgICAgICBTdHJp\nbmcganBxbDIgPSAic2VsZWN0IGMgZnJvbSBDb21wYW55IGMgd2hlcmUgYy5u\nYW1lID0gJ1BPYmplY3QnIjsKCQlpbnQgTjEgPSA1OwoJCWludCBOMiA9IDg7\nCgkJZm9yIChpbnQgaSA9IDA7IGkgPCBOMTsgaSsrKSB7CgkgICAgICAgIE9w\nZW5KUEFRdWVyeTw/PiBxMSA9IGVtLmNyZWF0ZVF1ZXJ5KGpwcWwxKTsKCQkJ\ncTEuZ2V0UmVzdWx0TGlzdCgpOwoJCX0KCQlmb3IgKGludCBpID0gMDsgaSA8\nIE4yOyBpKyspIHsKCSAgICAgICAgT3BlbkpQQVF1ZXJ5PD8+IHEyID0gZW0u\nY3JlYXRlUXVlcnkoanBxbDIpOwoJCQlxMi5nZXRSZXN1bHRMaXN0KCk7CgkJ\nfQoJCQoJCWFzc2VydEVxdWFscyhOMSwgICAgICBzdGF0cy5nZXRFeGVjdXRp\nb25Db3VudChqcHFsMSkpOwoJCWFzc2VydEVxdWFscyhOMiwgICAgICBzdGF0\ncy5nZXRFeGVjdXRpb25Db3VudChqcHFsMikpOwoJCWFzc2VydEVxdWFscyhO\nMStOMiwgICBzdGF0cy5nZXRFeGVjdXRpb25Db3VudCgpKTsKCQlhc3NlcnRF\ncXVhbHMoTjEtMSwgICAgc3RhdHMuZ2V0SGl0Q291bnQoanBxbDEpKTsKCQlh\nc3NlcnRFcXVhbHMoTjItMSwgICAgc3RhdHMuZ2V0SGl0Q291bnQoanBxbDIp\nKTsKCQlhc3NlcnRFcXVhbHMoTjErTjItMiwgc3RhdHMuZ2V0SGl0Q291bnQo\nKSk7CgkJCgl9CgoJcHVibGljIHZvaWQgdGVzdFJlc2V0UXVlcnlTdGF0aXN0\naWNzKCkgewogICAgICAgIFF1ZXJ5U3RhdGlzdGljczxTdHJpbmc+IHN0YXRz\nID0gZ2V0UHJlcGFyZWRRdWVyeUNhY2hlKCkuZ2V0U3RhdGlzdGljcygpOwog\nICAgICAgIHN0YXRzLnJlc2V0KCk7CiAgICAgICAgCgkJU3RyaW5nIGpwcWwx\nID0gInNlbGVjdCBjIGZyb20gQ29tcGFueSBjIjsKICAgICAgICBTdHJpbmcg\nanBxbDIgPSAic2VsZWN0IGMgZnJvbSBDb21wYW55IGMgd2hlcmUgYy5uYW1l\nID0gJ1BPYmplY3QnIjsKCQlpbnQgTjEwID0gNDsKCQlpbnQgTjIwID0gNzsK\nCQlmb3IgKGludCBpID0gMDsgaSA8IE4xMDsgaSsrKSB7CgkgICAgICAgIE9w\nZW5KUEFRdWVyeTw/PiBxMSA9IGVtLmNyZWF0ZVF1ZXJ5KGpwcWwxKTsKCQkJ\ncTEuZ2V0UmVzdWx0TGlzdCgpOwoJCX0KCQlmb3IgKGludCBpID0gMDsgaSA8\nIE4yMDsgaSsrKSB7CgkgICAgICAgIE9wZW5KUEFRdWVyeTw/PiBxMiA9IGVt\nLmNyZWF0ZVF1ZXJ5KGpwcWwyKTsKCQkJcTIuZ2V0UmVzdWx0TGlzdCgpOwoJ\nCX0KCQkKCQlhc3NlcnRFcXVhbHMoTjEwLCAgICAgICBzdGF0cy5nZXRFeGVj\ndXRpb25Db3VudChqcHFsMSkpOwoJCWFzc2VydEVxdWFscyhOMjAsICAgICAg\nIHN0YXRzLmdldEV4ZWN1dGlvbkNvdW50KGpwcWwyKSk7CgkJYXNzZXJ0RXF1\nYWxzKE4xMCtOMjAsICAgc3RhdHMuZ2V0RXhlY3V0aW9uQ291bnQoKSk7CgkJ\nYXNzZXJ0RXF1YWxzKE4xMC0xLCAgICAgc3RhdHMuZ2V0SGl0Q291bnQoanBx\nbDEpKTsKCQlhc3NlcnRFcXVhbHMoTjIwLTEsICAgICBzdGF0cy5nZXRIaXRD\nb3VudChqcHFsMikpOwoJCWFzc2VydEVxdWFscyhOMTArTjIwLTIsIHN0YXRz\nLmdldEhpdENvdW50KCkpOwoJCQoJCXN0YXRzLnJlc2V0KCk7CgkJCgkJaW50\nIE4xMSA9IDc7CgkJaW50IE4yMSA9IDQ7CgkJZm9yIChpbnQgaSA9IDA7IGkg\nPCBOMTE7IGkrKykgewogICAgICAgICAgICBPcGVuSlBBUXVlcnk8Pz4gcTEg\nPSBlbS5jcmVhdGVRdWVyeShqcHFsMSk7CgkJCXExLmdldFJlc3VsdExpc3Qo\nKTsKCQl9CgkJZm9yIChpbnQgaSA9IDA7IGkgPCBOMjE7IGkrKykgewogICAg\nICAgICAgICBPcGVuSlBBUXVlcnk8Pz4gcTIgPSBlbS5jcmVhdGVRdWVyeShq\ncHFsMik7CgkJCXEyLmdldFJlc3VsdExpc3QoKTsKCQl9CgoJCWFzc2VydEVx\ndWFscyhOMTEsICAgICBzdGF0cy5nZXRFeGVjdXRpb25Db3VudChqcHFsMSkp\nOwoJCWFzc2VydEVxdWFscyhOMjEsICAgICBzdGF0cy5nZXRFeGVjdXRpb25D\nb3VudChqcHFsMikpOwoJCWFzc2VydEVxdWFscyhOMTErTjIxLCBzdGF0cy5n\nZXRFeGVjdXRpb25Db3VudCgpKTsKCQlhc3NlcnRFcXVhbHMoTjExLCAgICAg\nc3RhdHMuZ2V0SGl0Q291bnQoanBxbDEpKTsKCQlhc3NlcnRFcXVhbHMoTjIx\nLCAgICAgc3RhdHMuZ2V0SGl0Q291bnQoanBxbDIpKTsKCQlhc3NlcnRFcXVh\nbHMoTjExK04yMSwgc3RhdHMuZ2V0SGl0Q291bnQoKSk7CgkJCi8vCQlhc3Nl\ncnRFcXVhbHMoTjEwK04xMSwgICAgIHN0YXRzLmdldFRvdGFsRXhlY3V0aW9u\nQ291bnQoanBxbDEpKTsKLy8JCWFzc2VydEVxdWFscyhOMjArTjIxLCAgICAg\nc3RhdHMuZ2V0VG90YWxFeGVjdXRpb25Db3VudChqcHFsMikpOwovLwkJYXNz\nZXJ0RXF1YWxzKE4xMCtOMTErTjIwK04yMSwgc3RhdHMuZ2V0VG90YWxFeGVj\ndXRpb25Db3VudCgpKTsKCQlhc3NlcnRFcXVhbHMoTjEwK04xMS0xLCAgICAg\nc3RhdHMuZ2V0VG90YWxIaXRDb3VudChqcHFsMSkpOwoJCWFzc2VydEVxdWFs\ncyhOMjArTjIxLTEsICAgICBzdGF0cy5nZXRUb3RhbEhpdENvdW50KGpwcWwy\nKSk7CgkJYXNzZXJ0RXF1YWxzKE4xMCtOMTErTjIwK04yMS0yLCBzdGF0cy5n\nZXRUb3RhbEhpdENvdW50KCkpOwoJCQoJfQoKCXB1YmxpYyB2b2lkIHRlc3RR\ndWVyeVdpdGhOb1BhcmFtZXRlcigpIHsKCQlTdHJpbmcganBxbCA9ICJzZWxl\nY3QgcCBmcm9tIENvbXBhbnkgcCI7CgkJY29tcGFyZShqcHFsLCAhSVNfTkFN\nRURfUVVFUlkpOwoJfQoKCXB1YmxpYyB2b2lkIHRlc3RRdWVyeVdpdGhMaXRl\ncmFsKCkgewogICAgICAgIFN0cmluZyBqcHFsID0gInNlbGVjdCBwIGZyb20g\nQ29tcGFueSBwIHdoZXJlIHAubmFtZSA9ICIgKyBsaXRlcmFsKENPTVBBTllf\nTkFNRVNbMF0pOwoJCWNvbXBhcmUoanBxbCwgIUlTX05BTUVEX1FVRVJZKTsK\nCX0KCglwdWJsaWMgdm9pZCB0ZXN0UXVlcnlXaXRoUGFyYW1ldGVyKCkgewoJ\nCVN0cmluZyBqcHFsID0gInNlbGVjdCBwIGZyb20gQ29tcGFueSBwIHdoZXJl\nIHAubmFtZSA9IDpwYXJhbSI7CgkJT2JqZWN0W10gcGFyYW1zID0geyJwYXJh\nbSIsIENPTVBBTllfTkFNRVNbMF19OwoJCWNvbXBhcmUoanBxbCwgIUlTX05B\nTUVEX1FVRVJZLCAgcGFyYW1zKTsKCX0KCglwdWJsaWMgdm9pZCB0ZXN0UXVl\ncnlXaXRoSm9pbnNBbmRQYXJhbWV0ZXJzKCkgewogICAgICAgIFN0cmluZyBq\ncHFsID0gInNlbGVjdCBlIGZyb20gRW1wbG95ZWUgZSAiICsgIndoZXJlIGUu\nbmFtZSA9IDplbXAiCgkJCQkJKyAiIGFuZCBlLmRlcGFydG1lbnQubmFtZSA9\nIDpkZXB0IgogICAgICAgICAgICAgICAgICAgICsgIiBhbmQgZS5kZXBhcnRt\nZW50LmNvbXBhbnkubmFtZSBMSUtFICAiCiAgICAgICAgICAgICAgICAgICAg\nKyBsaXRlcmFsKENPTVBBTllfTkFNRVNbMF0pIAoJCQkJCSsgIiBhbmQgZS5h\nZGRyZXNzLmNpdHkgPSA6Y2l0eSI7CgkJT2JqZWN0W10gcGFyYW1zID0geyAi\nZW1wIiwgRU1QTE9ZRUVfTkFNRVNbMF0sIAogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgImRlcHQiLCBERVBBUlRNRU5UX05BTUVTWzBdLAoJCQkJCQkJ\nImNpdHkiLCBDSVRZX05BTUVTWzBdfTsKCQljb21wYXJlKGpwcWwsICFJU19O\nQU1FRF9RVUVSWSwgIHBhcmFtcyk7Cgl9CgoJcHVibGljIHZvaWQgdGVzdE5h\nbWVkUXVlcnlXaXRoTm9QYXJhbWV0ZXIoKSB7CgkJU3RyaW5nIG5hbWVkUXVl\ncnkgPSAiQ29tcGFueS5QcmVwYXJlZFF1ZXJ5V2l0aE5vUGFyYW1ldGVyIjsK\nICAgICAgICBjb21wYXJlKG5hbWVkUXVlcnksIElTX05BTUVEX1FVRVJZKTsK\nCX0KCglwdWJsaWMgdm9pZCB0ZXN0TmFtZWRRdWVyeVdpdGhMaXRlcmFsKCkg\newoJCVN0cmluZyBuYW1lZFF1ZXJ5ID0gIkNvbXBhbnkuUHJlcGFyZWRRdWVy\neVdpdGhMaXRlcmFsIjsKCQljb21wYXJlKG5hbWVkUXVlcnksIElTX05BTUVE\nX1FVRVJZKTsKCX0KCglwdWJsaWMgdm9pZCB0ZXN0TmFtZWRRdWVyeVdpdGhQ\nb3NpdGlvbmFsUGFyYW1ldGVyKCkgewogICAgICAgIFN0cmluZyBuYW1lZFF1\nZXJ5ID0gIkNvbXBhbnkuUHJlcGFyZWRRdWVyeVdpdGhQb3NpdGlvbmFsUGFy\nYW1ldGVyIjsKCQlPYmplY3RbXSBwYXJhbXMgPSB7MSwgQ09NUEFOWV9OQU1F\nU1swXSwgMiwgU1RBUlRfWUVBUlNbMF19OwoJCWNvbXBhcmUobmFtZWRRdWVy\neSwgSVNfTkFNRURfUVVFUlksICBwYXJhbXMpOwoJfQoJCglwdWJsaWMgdm9p\nZCB0ZXN0TmFtZWRRdWVyeVdpdGhOYW1lZFBhcmFtZXRlcigpIHsKCQlTdHJp\nbmcgbmFtZWRRdWVyeSA9ICJDb21wYW55LlByZXBhcmVkUXVlcnlXaXRoTmFt\nZWRQYXJhbWV0ZXIiOwogICAgICAgIE9iamVjdFtdIHBhcmFtcyA9IHsibmFt\nZSIsIENPTVBBTllfTkFNRVNbMF0sICJzdGFydFllYXIiLAogICAgICAgICAg\nICAgICAgU1RBUlRfWUVBUlNbMF19OwoJCWNvbXBhcmUobmFtZWRRdWVyeSwg\nSVNfTkFNRURfUVVFUlksICBwYXJhbXMpOwoJfQoJCglwdWJsaWMgdm9pZCB0\nZXN0UGVyc2lzdGVuY2VDYXBhYmxlUGFyYW1ldGVyKCkgewogICAgICAgIFN0\ncmluZyBqcHFsID0gInNlbGVjdCBlIGZyb20gRW1wbG95ZWUgZSAiICsKICAg\nICAgICAgICAgICAgICJ3aGVyZSBlLmRlcGFydG1lbnQuY29tcGFueT06Y29t\ncGFueSI7CgkgICAgT2JqZWN0W10gcGFyYW1zID0geyJjb21wYW55IiwgSUJN\nfTsKCSAgICBjb21wYXJlKGpwcWwsICFJU19OQU1FRF9RVUVSWSwgIHBhcmFt\ncyk7Cgl9CgkKCS8qKgoJICogUHJvamVjdCByZXN1bHRzIGFyZSByZXR1cm5l\nZCB3aXRoIGRpZmZlcmVudCB0eXBlcyBvZiBST1AuCgkgKi8KCXB1YmxpYyB2\nb2lkIHRlc3RQcm9qZWN0aW9uUmVzdWx0KCkgewogICAgICAgIFN0cmluZyBq\ncHFsID0gInNlbGVjdCBlLm5hbWUgZnJvbSBFbXBsb3llZSBlICIgKwogICAg\nICAgICAgICAgICAgIndoZXJlIGUuYWRkcmVzcy5jaXR5PTpjaXR5IjsKICAg\nICAgICBPYmplY3RbXSBwYXJhbXMgPSB7ImNpdHkiLCBDSVRZX05BTUVTWzBd\nfTsKICAgICAgICBjb21wYXJlKGpwcWwsICFJU19OQU1FRF9RVUVSWSwgcGFy\nYW1zKTsKCX0KCQoJcHVibGljIHZvaWQgdGVzdENvbGxlY3Rpb25WYWx1ZWRQ\nYXJhbWV0ZXJzKCkgewoJICAgIFN0cmluZyBqcHFsID0gInNlbGVjdCBlIGZy\nb20gRW1wbG95ZWUgZSB3aGVyZSBlLm5hbWUgaW4gOm5hbWVzIjsKCSAgICBP\nYmplY3RbXSBwYXJhbXMxID0geyJuYW1lcyIsCgkgICAgICAgICAgICBBcnJh\neXMuYXNMaXN0KG5ldyBTdHJpbmdbXXtFTVBMT1lFRV9OQU1FU1swXSwKCSAg\nICAgICAgICAgIEVNUExPWUVFX05BTUVTWzFdfSl9OwogICAgICAgIE9iamVj\ndFtdIHBhcmFtczIgPSB7Im5hbWVzIiwKICAgICAgICAgICAgICAgIEFycmF5\ncy5hc0xpc3QobmV3IFN0cmluZ1tde0VNUExPWUVFX05BTUVTWzJdfSl9Owog\nICAgICAgIE9iamVjdFtdIHBhcmFtczMgPSB7Im5hbWVzIiwgQXJyYXlzLmFz\nTGlzdChFTVBMT1lFRV9OQU1FUyl9OwogICAgICAgIAogICAgICAgIGludCBl\neHBlY3RlZENvdW50ID0gMiAqIENPTVBBTllfTkFNRVMubGVuZ3RoICogREVQ\nQVJUTUVOVF9OQU1FUy5sZW5ndGg7CiAgICAgICAgcnVuKGpwcWwsICFJU19O\nQU1FRF9RVUVSWSwgcGFyYW1zMSwgZXhwZWN0ZWRDb3VudCwgVVNFX0NBQ0hF\nLCAxKTsKICAgICAgICAKICAgICAgICBleHBlY3RlZENvdW50ID0gMSAqIENP\nTVBBTllfTkFNRVMubGVuZ3RoICogREVQQVJUTUVOVF9OQU1FUy5sZW5ndGg7\nCiAgICAgICAgcnVuKGpwcWwsICFJU19OQU1FRF9RVUVSWSwgcGFyYW1zMiwg\nZXhwZWN0ZWRDb3VudCwgVVNFX0NBQ0hFLCAxKTsKICAgICAgICAKICAgICAg\nICBleHBlY3RlZENvdW50ID0gRU1QTE9ZRUVfTkFNRVMubGVuZ3RoICogQ09N\nUEFOWV9OQU1FUy5sZW5ndGggKiBERVBBUlRNRU5UX05BTUVTLmxlbmd0aDsK\nICAgICAgICBydW4oanBxbCwgIUlTX05BTUVEX1FVRVJZLCBwYXJhbXMzLCBl\neHBlY3RlZENvdW50LCBVU0VfQ0FDSEUsIDEpOwoJfQoJCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0UXVlcnlQcm9qZWN0aW9uTm90Q2FuZGlkYXRlQ2xhc3MoKSB7\nCiAgICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0IGUuZGVwYXJ0bWVudCBm\ncm9tIEVtcGxveWVlIGUiOwogICAgICAgIGNvbXBhcmUoanBxbCwgIUlTX05B\nTUVEX1FVRVJZKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdFF1\nZXJ5TXVsdGlwbGVQcm9qZWN0aW9uQ2xhc3MoKSB7CiAgICAgICAgU3RyaW5n\nIGpwcWwgPSAic2VsZWN0IGQsIGUgZnJvbSBEZXBhcnRtZW50IGQsIGluIChk\nLmVtcGxveWVlcykgZSI7CiAgICAgICAgY29tcGFyZShqcHFsLCAhSVNfTkFN\nRURfUVVFUlkpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0UXVl\ncnlXaXRoT3JkZXJCeUNsYXVzZSgpIHsKICAgICAgICBTdHJpbmcganBxbCA9\nICJzZWxlY3QgZS5uYW1lIGZyb20gRW1wbG95ZWUgZSBvcmRlciBieSBlLmlk\nIjsKICAgICAgICBjb21wYXJlKGpwcWwsICFJU19OQU1FRF9RVUVSWSk7CiAg\nICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RRdWVyeUNvdW50KCkgewog\nICAgICAgIFN0cmluZyBqcHFsID0gInNlbGVjdCBjb3VudChlKSxkIGZyb20g\nRGVwYXJ0bWVudCBkIGpvaW4gZC5lbXBsb3llZXMgZSBncm91cCBieSBkIjsK\nICAgICAgICBjb21wYXJlKGpwcWwsICFJU19OQU1FRF9RVUVSWSk7CiAgICB9\nCiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RQcm9qZWN0UmVwZWF0c1Rlcm0o\nKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0IGUubmFtZSwgZS5u\nYW1lIGZyb20gRW1wbG95ZWUgZSI7CiAgICAgICAgY29tcGFyZShqcHFsLCAh\nSVNfTkFNRURfUVVFUlkpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0\nZXN0UHJvamVjdEVtYmVkZGVkKCkgewogICAgICAgIFN0cmluZyBqcHFsID0g\nInNlbGVjdCBlLmFkZHJlc3MgZnJvbSBFbXBsb3llZSBlIjsKICAgICAgICBj\nb21wYXJlKGpwcWwsICFJU19OQU1FRF9RVUVSWSk7CiAgICB9CiAgICAKICAg\nIHB1YmxpYyB2b2lkIHRlc3ROZWVkc1R5cGVDb252ZXJzaW9uKCkgewogICAg\nICAgIFN0cmluZyBqcHFsID0gInNlbGVjdCBlLm5hbWUsIGUuaXNNYW5hZ2Vy\nIGZyb20gRW1wbG95ZWUgZSI7CiAgICAgICAgY29tcGFyZShqcHFsLCAhSVNf\nTkFNRURfUVVFUlkpOwogICAgfSAgICAKCQoJU3RyaW5nIGxpdGVyYWwoU3Ry\naW5nIHMpIHsKCSAgICByZXR1cm4gIiciK3MrIiciOwoJfQoJCiAgICBwdWJs\naWMgdm9pZCB0ZXN0UG9zaXRpb25hbCgpIHsKICAgICAgICBTdHJpbmcganBx\nbCA9ICJzZWxlY3QgcCBmcm9tIFBlcnNvbiBwIHdoZXJlIHAuZmlyc3ROYW1l\nPT8xIiArCiAgICAgICAgICAgICAgICAgICAgICAiIGFuZCBwLmxhc3ROYW1l\nPSdEb2UnIGFuZCBwLmFnZSA+ID8yIjsKICAgICAgICBFbnRpdHlNYW5hZ2Vy\nIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICAKICAg\nICAgICBPcGVuSlBBUXVlcnk8Pz4gcTEgPSBPcGVuSlBBUGVyc2lzdGVuY2Uu\nY2FzdChlbS5jcmVhdGVRdWVyeShqcHFsKSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKEpQUUxQYXJzZXIuTEFOR19KUFFMLCBxMS5nZXRMYW5ndWFnZSgpKTsK\nICAgICAgICAKICAgICAgICBMaXN0PD8+IHJlc3VsdDEgPSBxMS5zZXRQYXJh\nbWV0ZXIoMSwgIkpvaG4iKQogICAgICAgICAgICAgICAgICAgICAgIC5zZXRQ\nYXJhbWV0ZXIoMiwgKHNob3J0KTQwKQogICAgICAgICAgICAgICAgICAgICAg\nIC5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDIsIHJlc3VsdDEuc2l6ZSgpKTsKICAgICAgICAKICAgICAgICBPcGVu\nSlBBUXVlcnk8Pz4gcTIgPSBPcGVuSlBBUGVyc2lzdGVuY2UuY2FzdChlbS5j\ncmVhdGVRdWVyeShqcHFsKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKFF1ZXJ5\nTGFuZ3VhZ2VzLkxBTkdfUFJFUEFSRURfU1FMLCBxMi5nZXRMYW5ndWFnZSgp\nKTsKICAgICAgICBMaXN0PD8+IHJlc3VsdDIgPSBxMi5zZXRQYXJhbWV0ZXIo\nMSwgIkhhcnJ5IikKICAgICAgICAgICAgICAgICAgLnNldFBhcmFtZXRlcigy\nLCAoc2hvcnQpMTApCiAgICAgICAgICAgICAgICAgIC5nZXRSZXN1bHRMaXN0\nKCk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIHJlc3VsdDIu\nc2l6ZSgpKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdE5hbWVk\nKCkgewogICAgICAgIFN0cmluZyBqcHFsID0gInNlbGVjdCBwIGZyb20gUGVy\nc29uIHAgd2hlcmUgcC5maXJzdE5hbWU9OmZpcnN0IiArCiAgICAgICAgICAg\nICAgICAgICAgICAiIGFuZCBwLmxhc3ROYW1lPSdEb2UnIGFuZCBwLmFnZSA+\nIDphZ2UiOwogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIAogICAgICAgIE9wZW5KUEFRdWVy\neTw/PiBxMSA9IE9wZW5KUEFQZXJzaXN0ZW5jZS5jYXN0KGVtLmNyZWF0ZVF1\nZXJ5KGpwcWwpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoSlBRTFBhcnNlci5M\nQU5HX0pQUUwsIHExLmdldExhbmd1YWdlKCkpOwogICAgICAgIAogICAgICAg\nIExpc3Q8Pz4gcmVzdWx0MSA9IHExLnNldFBhcmFtZXRlcigiZmlyc3QiLCAi\nSm9obiIpCiAgICAgICAgICAgICAgICAgICAgICAgLnNldFBhcmFtZXRlcigi\nYWdlIiwgKHNob3J0KTQwKQogICAgICAgICAgICAgICAgICAgICAgIC5nZXRS\nZXN1bHRMaXN0KCk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0RXF1YWxzKDIs\nIHJlc3VsdDEuc2l6ZSgpKTsKICAgICAgICAKICAgICAgICBPcGVuSlBBUXVl\ncnk8Pz4gcTIgPSBPcGVuSlBBUGVyc2lzdGVuY2UuY2FzdChlbS5jcmVhdGVR\ndWVyeShqcHFsKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKFF1ZXJ5TGFuZ3Vh\nZ2VzLkxBTkdfUFJFUEFSRURfU1FMLCBxMi5nZXRMYW5ndWFnZSgpKTsKICAg\nICAgICBMaXN0PD8+IHJlc3VsdDIgPSBxMi5zZXRQYXJhbWV0ZXIoImZpcnN0\nIiwgIkJhcnJ5IikKICAgICAgICAgICAgICAgICAgLnNldFBhcmFtZXRlcigi\nYWdlIiwgKHNob3J0KTIwKQogICAgICAgICAgICAgICAgICAuZ2V0UmVzdWx0\nTGlzdCgpOwogICAgICAgIAogICAgICAgIGFzc2VydEVxdWFscygxLCByZXN1\nbHQyLnNpemUoKSk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RX\ncm9uZ1BhcmFtZXRlclZhbHVlVHlwZVRocm93RXhjZXB0aW9uKCkgewogICAg\nICAgIFN0cmluZyBqcHFsID0gInNlbGVjdCBwIGZyb20gUGVyc29uIHAgd2hl\ncmUgcC5maXJzdE5hbWU9OmZpcnN0IiAKICAgICAgICAgICAgICAgICAgICAr\nICIgYW5kIHAuYWdlID4gOmFnZSI7CiAgICAgICAgRW50aXR5TWFuYWdlciBl\nbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CgogICAgICAgIE9wZW5K\nUEFRdWVyeTw/PiBxMSA9IE9wZW5KUEFQZXJzaXN0ZW5jZS5jYXN0KGVtLmNy\nZWF0ZVF1ZXJ5KGpwcWwpKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBM\naXN0PD8+IHJlc3VsdDEgPSBxMS5zZXRQYXJhbWV0ZXIoImZpcnN0IiwgKHNo\nb3J0KTQwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRQYXJh\nbWV0ZXIoImFnZSIsICJKb2huIikKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgICAgICBmYWlsKCJFeHBl\nY3RlZCB0byBmYWlsIHdpdGggd3JvbmcgcGFyYW1ldGVyIHZhbHVlIik7CiAg\nICAgICAgfSBjYXRjaCAoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGUpIHsK\nICAgICAgICAgICAgLy8gZ29vZAogICAgICAgIH0KICAgIH0KICAgIAogICAg\ncHVibGljIHZvaWQgdGVzdE51bGxQYXJhbWV0ZXJWYWx1ZUZvclByaW1pdGl2\nZVR5cGVUaHJvd3NFeGNlcHRpb24oKSB7CiAgICAgICAgU3RyaW5nIGpwcWwg\nPSAic2VsZWN0IHAgZnJvbSBQZXJzb24gcCB3aGVyZSBwLmZpcnN0TmFtZT06\nZmlyc3QiIAogICAgICAgICAgICAgICAgICAgICsgIiBhbmQgcC5hZ2UgPiA6\nYWdlIjsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVu\ndGl0eU1hbmFnZXIoKTsKCiAgICAgICAgT3BlbkpQQVF1ZXJ5PD8+IHExID0g\nT3BlbkpQQVBlcnNpc3RlbmNlLmNhc3QoZW0uY3JlYXRlUXVlcnkoanBxbCkp\nOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIExpc3Q8Pz4gcmVzdWx0MSA9\nIHExLnNldFBhcmFtZXRlcigiZmlyc3QiLCAiSm9obiIpCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgLnNldFBhcmFtZXRlcigiYWdlIiwgbnVsbCkK\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZ2V0UmVzdWx0TGlzdCgp\nOwogICAgICAgICAgICBmYWlsKCJFeHBlY3RlZCB0byBmYWlsIHdpdGggbnVs\nbCBwYXJhbWV0ZXIgdmFsdWUgZm9yIHByaW1pdGl2ZXMiKTsKICAgICAgICB9\nIGNhdGNoIChSdW50aW1lRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgLy8g\nZ29vZAogICAgICAgIH0KICAgIH0KICAgIHB1YmxpYyB2b2lkIHRlc3RRdWVy\neVdpdGhMYXp5UmVsYXRpb25Jc0NhY2hlZCgpIHsKICAgICAgICAvLyBBdXRo\nb3IgaXMgbGF6aWx5IHJlbGF0ZWQgdG8gQm9vawogICAgICAgIFN0cmluZyBq\ncHFsID0gInNlbGVjdCBwIGZyb20gQXV0aG9yIHAiOwogICAgICAgIEVudGl0\neU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAg\nICAgIAogICAgICAgIFF1ZXJ5IHExID0gZW0uY3JlYXRlUXVlcnkoanBxbCk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKE9wZW5KUEFQZXJzaXN0ZW5jZS5jYXN0\nKHExKS5nZXRMYW5ndWFnZSgpLAogICAgICAgICAgICAgICAgSlBRTFBhcnNl\nci5MQU5HX0pQUUwpOwogICAgICAgIExpc3Q8QXV0aG9yPiBhdXRob3JzMSA9\nIHExLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBhc3NlcnRGYWxzZShhdXRo\nb3JzMS5pc0VtcHR5KCkpOwogICAgICAgIEF1dGhvciBhdXRob3IxID0gYXV0\naG9yczEuaXRlcmF0b3IoKS5uZXh0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsg\nLy8gbm90aGluZyB3aWxsIGJlIGxvYWRlZCBieSBjaGFuY2UKICAgICAgICAK\nICAgICAgICBhc3NlcnROdWxsKGF1dGhvcjEuZ2V0Qm9va3MoKSk7CiAgICAg\nICAgCiAgICAgICAgLy8gZG8gdGhlIHNhbWUgdGhpbmcgYWdhaW4sIHRoaXMg\ndGltZSBxdWVyeSBzaG91bGQgYmUgY2FjaGVkCiAgICAgICAgZW0gPSBlbWYu\nY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIFF1ZXJ5IHEyID0gZW0u\nY3JlYXRlUXVlcnkoanBxbCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKE9wZW5K\nUEFQZXJzaXN0ZW5jZS5jYXN0KHEyKS5nZXRMYW5ndWFnZSgpLAogICAgICAg\nICAgICAgICAgUXVlcnlMYW5ndWFnZXMuTEFOR19QUkVQQVJFRF9TUUwpOwog\nICAgICAgIExpc3Q8QXV0aG9yPiBhdXRob3JzMiA9IHEyLmdldFJlc3VsdExp\nc3QoKTsKICAgICAgICBhc3NlcnRGYWxzZShhdXRob3JzMi5pc0VtcHR5KCkp\nOwogICAgICAgIEF1dGhvciBhdXRob3IyID0gYXV0aG9yczIuaXRlcmF0b3Io\nKS5uZXh0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgICAgICAKICAgICAg\nICBhc3NlcnROdWxsKGF1dGhvcjIuZ2V0Qm9va3MoKSk7CiAgICB9CiAgICAK\nICAgIHB1YmxpYyB2b2lkIHRlc3RRdWVyeVdpdGhFYWdlclJlbGF0aW9uSXNO\nb3RDYWNoZWQoKSB7CiAgICAgICAgLy8gQm9vayBpcyBlYWdlcmx5IHJlbGF0\nZWQgdG8gQXV0aG9yCiAgICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0IGIg\nZnJvbSBCb29rIGIiOwogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYu\nY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIAogICAgICAgIFF1ZXJ5\nIHExID0gZW0uY3JlYXRlUXVlcnkoanBxbCk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKE9wZW5KUEFQZXJzaXN0ZW5jZS5jYXN0KHExKS5nZXRMYW5ndWFnZSgp\nLAogICAgICAgICAgICAgICAgSlBRTFBhcnNlci5MQU5HX0pQUUwpOwogICAg\nICAgIExpc3Q8Qm9vaz4gYm9va3MgPSBxMS5nZXRSZXN1bHRMaXN0KCk7CiAg\nICAgICAgYXNzZXJ0RmFsc2UoYm9va3MuaXNFbXB0eSgpKTsKICAgICAgICBC\nb29rIGJvb2sxID0gYm9va3MuaXRlcmF0b3IoKS5uZXh0KCk7CiAgICAgICAg\nZW0uY2xvc2UoKTsgLy8gbm90aGluZyB3aWxsIGJlIGxvYWRlZCBieSBjaGFu\nY2UKICAgICAgICAKICAgICAgICBhc3NlcnROb3ROdWxsKGJvb2sxLmdldEF1\ndGhvcnMoKSk7CiAgICAgICAgYXNzZXJ0RmFsc2UoYm9vazEuZ2V0QXV0aG9y\ncygpLmlzRW1wdHkoKSk7CiAgICAgICAgCiAgICAgICAgLy8gZG8gdGhlIHNh\nbWUgdGhpbmcgYWdhaW4sIHRoaXMgdGltZSBxdWVyeSBzaG91bGQgbm90IGJl\nIGNhY2hlZAogICAgICAgIC8vIGJlY2F1c2UgaXQgcmVxdWlyZXMgbXVsdGlw\nbGUgc2VsZWN0cwogICAgICAgIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsKICAgICAgICBRdWVyeSBxMiA9IGVtLmNyZWF0ZVF1ZXJ5KGpwcWwp\nOwogICAgICAgIGFzc2VydEVxdWFscyhPcGVuSlBBUGVyc2lzdGVuY2UuY2Fz\ndChxMikuZ2V0TGFuZ3VhZ2UoKSwKICAgICAgICAgICAgICAgIEpQUUxQYXJz\nZXIuTEFOR19KUFFMKTsKICAgICAgICBMaXN0PEJvb2s+IGJvb2tzMiA9IHEy\nLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBhc3NlcnRGYWxzZShib29rczIu\naXNFbXB0eSgpKTsKICAgICAgICBCb29rIGJvb2syID0gYm9va3MyLml0ZXJh\ndG9yKCkubmV4dCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICAgICAgCiAg\nICAgICAgYXNzZXJ0Tm90TnVsbChib29rMi5nZXRBdXRob3JzKCkpOwogICAg\nICAgIGFzc2VydEZhbHNlKGJvb2syLmdldEF1dGhvcnMoKS5pc0VtcHR5KCkp\nOwogICAgfQoKICAgIEBBbGxvd0ZhaWx1cmUobWVzc2FnZT0iV2UgaGF2ZSBw\ncm9ibGVtcyB3aXRoIHJlcGFyYW1ldHJpemF0aW9uIG9mIHN1YnF1ZXJ5ICsg\nY29uc3RhbnQgbGl0ZXJhbHMiKQogICAgcHVibGljIHZvaWQgeHRlc3RRdWVy\neVdpdGhVc2VyRGVmaW5lZEFuZEludGVybmFsUGFyYW10ZXJzSW5TdWJxdWVy\neSgpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJTZWxlY3QgYSBGcm9tIEFk\nZHJlc3MgYSBXaGVyZSBOb3QgRXhpc3RzICgiCiAgICAgICAgICAgICsgIiAg\nICAgU2VsZWN0IHMuaWQgRnJvbSBTaW5nZXIgQXMgcyBXaGVyZSAiCiAgICAg\nICAgICAgICsgIiAgICAgICAgcy5hZGRyZXNzID0gYSAgQW5kICIKICAgICAg\nICAgICAgKyAiICAgICAgICBOb3QgKCIKICAgICAgICAgICAgKyAiICAgICAg\nICAgICAgICAocy5maXJzdE5hbWUgPSA6Zmlyc3ROYW1lKSAiCiAgICAgICAg\nICAgICsgIiAgICAgICAgICAgICAgT3IgIgogICAgICAgICAgICArICIgICAg\nICAgICAgICAgICgiCiAgICAgICAgICAgICsgIiAgICAgICAgICAgICAgICAg\nICgiCiAgICAgICAgICAgICsgIiAgICAgICAgICAgICAgICAgICAgICBleGlz\ndHMgKHNlbGVjdCBjLmlkIGZyb20gQ0QgYyB3aGVyZSBjLnNpbmdlciA9IHMg\nYW5kIGMuc3RhdHVzID0gMSkgQW5kICIKICAgICAgICAgICAgKyAiICAgICAg\nICAgICAgICAgICAgICAgIHMubGFzdE5hbWUgPSA6bGFzdE5hbWUiCiAgICAg\nICAgICAgICsgIiAgICAgICAgICAgICAgICAgICkgIgogICAgICAgICAgICAr\nICIgICAgICAgICAgICAgICAgICBPciAiCiAgICAgICAgICAgICsgIiAgICAg\nICAgICAgICAgICAgICgiCiAgICAgICAgICAgICsgIiAgICAgICAgICAgICAg\nICAgICAgICBub3QgZXhpc3RzIChTZWxlY3QgYy5pZCBmcm9tIENEIGMgd2hl\ncmUgYy5zaW5nZXIgPSBzIGFuZCBjLnN0YXR1cyA9IDIpIgogICAgICAgICAg\nICArICIgICAgICAgICAgICAgICAgICApIgogICAgICAgICAgICArICIgICAg\nICAgICAgICAgICkiCiAgICAgICAgICAgICsgIiAgICAgICAgICAgICkiCiAg\nICAgICAgICAgICsgIiAgICAgKSI7CiAgICAgICAgCiAgICAgICAgUXVlcnkg\nalEgPSBlbS5jcmVhdGVRdWVyeShqcHFsKTsKICAgICAgICBqUS5zZXRQYXJh\nbWV0ZXIoImxhc3ROYW1lIiwgIkxhc3ROYW1lIik7CiAgICAgICAgalEuc2V0\nUGFyYW1ldGVyKCJmaXJzdE5hbWUiLCAiRmlyc3ROYW1lIik7CiAgICAgICAg\nTGlzdCBqTGlzdCA9IGpRLmdldFJlc3VsdExpc3QoKTsKICAgICAgICAKICAg\nICAgICBRdWVyeSBqUTEgPSBlbS5jcmVhdGVRdWVyeShqcHFsKTsKICAgICAg\nICBqUTEuc2V0UGFyYW1ldGVyKCJsYXN0TmFtZSIsICJMYXN0TmFtZTEiKTsK\nICAgICAgICBqUTEuc2V0UGFyYW1ldGVyKCJmaXJzdE5hbWUiLCAiRmlyc3RO\nYW1lMSIpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIExpc3Qgakxpc3Qx\nID0galExLmdldFJlc3VsdExpc3QoKTsKICAgICAgICB9IGNhdGNoIChFeGNl\ncHRpb24gZSkgewogICAgICAgICAgICBTeXN0ZW0uZXJyLnByaW50bG4oalEx\nLmdldFBhcmFtZXRlcnMoKSk7CiAgICAgICAgICAgIGUucHJpbnRTdGFja1Ry\nYWNlKCk7CiAgICAgICAgICAgIGZhaWwoIkZhaWwgdG8gZXhlY3V0ZSBhZ2Fp\nbiAtIFBhcmFtZXRlcnMgYXJlIG1lc3NlZCB1cDoiICsgZS5nZXRNZXNzYWdl\nKCkpOwogICAgICAgIH0KICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVz\ndFByZXBhcmVkUXVlcnlJZ25vcmVkV2hlbkxvY2tNb2RlSXNTZXQoKSB7CiAg\nICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0IHAgZnJvbSBBdXRob3IgcCI7\nCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlN\nYW5hZ2VyKCk7CiAgICAgICAgCiAgICAgICAgUXVlcnkgcTEgPSBlbS5jcmVh\ndGVRdWVyeShqcHFsKTsKICAgICAgICBhc3NlcnRFcXVhbHMoSlBRTFBhcnNl\nci5MQU5HX0pQUUwsIE9wZW5KUEFQZXJzaXN0ZW5jZS5jYXN0KHExKS5nZXRM\nYW5ndWFnZSgpKTsKICAgICAgICBMaXN0PEF1dGhvcj4gYXV0aG9yczEgPSBx\nMS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgCiAgICAgICAgLy8gZG8gdGhl\nIHNhbWUgdGhpbmcgYWdhaW4sIHRoaXMgdGltZSBxdWVyeSBzaG91bGQgYmUg\nY2FjaGVkCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwog\nICAgICAgIFF1ZXJ5IHEyID0gZW0uY3JlYXRlUXVlcnkoanBxbCk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKFF1ZXJ5TGFuZ3VhZ2VzLkxBTkdfUFJFUEFSRURf\nU1FMLCBPcGVuSlBBUGVyc2lzdGVuY2UuY2FzdChxMikuZ2V0TGFuZ3VhZ2Uo\nKSk7CiAgICAgICAgTG9ja01vZGVUeXBlIGxtb2RlMSA9IHEyLmdldExvY2tN\nb2RlKCk7CiAgICAgICAgcTIuc2V0TG9ja01vZGUoTG9ja01vZGVUeXBlLk9Q\nVElNSVNUSUMpOwogICAgICAgIExvY2tNb2RlVHlwZSBsbW9kZTIgPSBxMi5n\nZXRMb2NrTW9kZSgpOwogICAgICAgIGFzc2VydEVxdWFscyhKUFFMUGFyc2Vy\nLkxBTkdfSlBRTCwgT3BlbkpQQVBlcnNpc3RlbmNlLmNhc3QocTIpLmdldExh\nbmd1YWdlKCkpOwogICAgICAgIGFzc2VydEZhbHNlKGxtb2RlMS5lcXVhbHMo\nbG1vZGUyKSk7CiAgICAgICAgTGlzdDxBdXRob3I+IGF1dGhvcnMyID0gcTIu\nZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCku\ncm9sbGJhY2soKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdEVu\ndW1QYXJhbWV0ZXIoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0\nIGUgZnJvbSBFbXBsb3llZSBlIHdoZXJlIGUuc3RhdHVzPTpjdXJyZW50IGFu\nZCBlLmhpcmVTdGF0dXM9OmhpcmUiOwogICAgICAgIEVudGl0eU1hbmFnZXIg\nZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIAogICAg\nICAgIFR5cGVkUXVlcnk8RW1wbG95ZWU+IHExID0gZW0uY3JlYXRlUXVlcnko\nanBxbCwgRW1wbG95ZWUuY2xhc3MpOwogICAgICAgIGFzc2VydEVxdWFscyhK\nUFFMUGFyc2VyLkxBTkdfSlBRTCwgT3BlbkpQQVBlcnNpc3RlbmNlLmNhc3Qo\ncTEpLmdldExhbmd1YWdlKCkpOwogICAgICAgIExpc3Q8RW1wbG95ZWU+IGVt\ncHMgPSBxMS5zZXRQYXJhbWV0ZXIoImN1cnJlbnQiLCBDYXRlZ29yeS5QRVJN\nQU5FTlQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldFBh\ncmFtZXRlcigiaGlyZSIsIENhdGVnb3J5LkNPTlRSQUNUT1IpLmdldFJlc3Vs\ndExpc3QoKTsKICAgICAgICAKICAgICAgICAvLyBkbyB0aGUgc2FtZSB0aGlu\nZyBhZ2FpbiwgdGhpcyB0aW1lIHF1ZXJ5IHNob3VsZCBiZSBjYWNoZWQKICAg\nICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgVHlw\nZWRRdWVyeTxFbXBsb3llZT4gcTIgPSBlbS5jcmVhdGVRdWVyeShqcHFsLCBF\nbXBsb3llZS5jbGFzcyk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKFF1ZXJ5TGFu\nZ3VhZ2VzLkxBTkdfUFJFUEFSRURfU1FMLCBPcGVuSlBBUGVyc2lzdGVuY2Uu\nY2FzdChxMikuZ2V0TGFuZ3VhZ2UoKSk7CiAgICAgICAgTGlzdDxFbXBsb3ll\nZT4gZW1wczIgPSBxMi5zZXRQYXJhbWV0ZXIoImN1cnJlbnQiLCBDYXRlZ29y\neS5QRVJNQU5FTlQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0\nUGFyYW1ldGVyKCJoaXJlIiwgQ2F0ZWdvcnkuQ09OVFJBQ1RPUikuZ2V0UmVz\ndWx0TGlzdCgpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkucm9sbGJh\nY2soKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdE11bHRpdGhy\nZWFkZWRBY2Nlc3MoKSB7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIg\nZW0xID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBTdHJp\nbmcganBxbCA9ICJzZWxlY3QgcCBmcm9tIEF1dGhvciBwIHdoZXJlIHAubmFt\nZT06bmFtZSI7CiAgICAgICAgaW50IE4gPSA1OwogICAgICAgIFRocmVhZFtd\nIHRocmVhZHMgPSAgbmV3IFRocmVhZFtOXTsKICAgICAgICBRdWVyeVRocmVh\nZFtdIHF0cyA9IG5ldyBRdWVyeVRocmVhZFtOXTsKICAgICAgICBmb3IgKGlu\ndCBpID0gMDsgaSA8IE47IGkrKykgewogICAgICAgICAgICBPcGVuSlBBRW50\naXR5TWFuYWdlciBlbXQgPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwog\nICAgICAgICAgICBxdHNbaV0gPSBuZXcgUXVlcnlUaHJlYWQoZW10LCBqcHFs\nKTsKICAgICAgICAgICAgdGhyZWFkc1tpXSA9IG5ldyBUaHJlYWQocXRzW2ld\nKTsKICAgICAgICAgICAgdGhyZWFkc1tpXS5zZXREYWVtb24odHJ1ZSk7CiAg\nICAgICAgfQogICAgICAgIGZvciAoVGhyZWFkIHQgOiB0aHJlYWRzKSB7CiAg\nICAgICAgICAgIHQuc3RhcnQoKTsgCiAgICAgICAgfQogICAgICAgIGZvciAo\naW50IGkgPSAwOyBpIDwgTjsgaSsrKSB7CiAgICAgICAgICAgIHRyeSB7CiAg\nICAgICAgICAgICAgdGhyZWFkc1tpXS5qb2luKCk7CiAgICAgICAgICAgICAg\nYXNzZXJ0RmFsc2UocXRzW2ldLmlzRmFpbGVkKCkpOwogICAgICAgICAgICB9\nIGNhdGNoIChJbnRlcnJ1cHRlZEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAg\nICAgICBlLnByaW50U3RhY2tUcmFjZSgpOwogICAgICAgICAgICAgICAgZmFp\nbCgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0UGFyYW1ldGVyT25FeHRlcm5hbGl6ZWRGaWVsZElz\nRXhjbHVkZWQoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0IGIg\nZnJvbSBCb29rIGIgd2hlcmUgYi50aXRsZT06dGl0bGUgYW5kIGIudG9rZW49\nOnRva2VuIjsKICAgICAgICBRdWVyeSBxMSA9IGVtLmNyZWF0ZVF1ZXJ5KGpw\ncWwpCiAgICAgICAgICAuc2V0UGFyYW1ldGVyKCJ0aXRsZSIsICJ0aXRsZS0x\nIikKICAgICAgICAgIC5zZXRQYXJhbWV0ZXIoInRva2VuIiwgIkxBUkdFIik7\nCiAgICAgICAgLy8gZGVmYXVsdCBmZXRjaGVzIGF1dGhvcnMgZWFnZXJseSBh\nbmQgdGh1cyBjcmVhdGVzIG11bHRpcGxlIFNRTCBhbmQgaGVuY2Ugbm90IGNh\nY2hlcyBhbnl3YXkKICAgICAgICBPcGVuSlBBUGVyc2lzdGVuY2UuY2FzdChx\nMSkuZ2V0RmV0Y2hQbGFuKCkucmVtb3ZlRmV0Y2hHcm91cCgiZGVmYXVsdCIp\nOwogICAgICAgIGFzc2VydEZhbHNlKHExLmdldFJlc3VsdExpc3QoKS5pc0Vt\ncHR5KCkpOwogICAgICAgIGFzc2VydE5vdENhY2hlZChqcHFsKTsKICAgICAg\nICBRdWVyeSBxMiA9IGVtLmNyZWF0ZVF1ZXJ5KGpwcWwpCiAgICAgICAgICAg\nICAgICAgICAgIC5zZXRQYXJhbWV0ZXIoInRpdGxlIiwgInRpdGxlLTIiKQog\nICAgICAgICAgICAgICAgICAgICAuc2V0UGFyYW1ldGVyKCJ0b2tlbiIsICJN\nRURJVU0iKTsKICAgICAgIGFzc2VydEZhbHNlKHEyLmdldFJlc3VsdExpc3Qo\nKS5pc0VtcHR5KCkpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nTm9QYXJhbWV0ZXJPbkV4dGVybmFsaXplZEZpZWxkSXNJbmNsdWRlZCgpIHsK\nICAgICAgICBTdHJpbmcganBxbCA9ICJzZWxlY3QgYiBmcm9tIEJvb2sgYiB3\naGVyZSBiLnRpdGxlPTp0aXRsZSI7CiAgICAgICAgUXVlcnkgcTEgPSBlbS5j\ncmVhdGVRdWVyeShqcHFsKQogICAgICAgICAgLnNldFBhcmFtZXRlcigidGl0\nbGUiLCAidGl0bGUtMSIpOwogICAgICAgIC8vIGRlZmF1bHQgZmV0Y2hlcyBh\ndXRob3JzIGVhZ2VybHkgYW5kIHRodXMgY3JlYXRlcyBtdWx0aXBsZSBTUUwg\nYW5kIGhlbmNlIG5vdCBjYWNoZXMgYW55d2F5CiAgICAgICAgT3BlbkpQQVBl\ncnNpc3RlbmNlLmNhc3QocTEpLmdldEZldGNoUGxhbigpLnJlbW92ZUZldGNo\nR3JvdXAoImRlZmF1bHQiKTsKICAgICAgICBhc3NlcnRGYWxzZShxMS5nZXRS\nZXN1bHRMaXN0KCkuaXNFbXB0eSgpKTsKICAgICAgICBhc3NlcnRDYWNoZWQo\nanBxbCk7CiAgICAgICAgUXVlcnkgcTIgPSBlbS5jcmVhdGVRdWVyeShqcHFs\nKQogICAgICAgICAgICAgICAgICAgICAuc2V0UGFyYW1ldGVyKCJ0aXRsZSIs\nICJ0aXRsZS0yIik7CiAgICAgICBhc3NlcnRGYWxzZShxMi5nZXRSZXN1bHRM\naXN0KCkuaXNFbXB0eSgpKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQg\ndGVzdFJlcGVhdGVkUGFyYW1ldGVySW5TdWJxdWVyeUluRGlmZmVyZW50T3Jk\nZXIoKSB7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0gPSBlbWYu\nY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIFN0cmluZyBqcHFsID0g\nICJzZWxlY3QgbyBmcm9tIE9yZGVySlBBIG8gIiAKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICArICJ3aGVyZSBvLk9yZGVySWQgaW4gKHNlbGVjdCBt\nYXgobzEuT3JkZXJJZCkgZnJvbSBPcmRlckpQQSBvMSAiCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgKyAgIndoZXJlICgobzEuQ3VzdG9t\nZXJJZCA9IDpjdXN0b21lcklkKSAiIAogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICsgICJhbmQgICAobzEuRGlzdHJpY3RJZCA9IDpkaXN0\ncmljdElkKSAiIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICsgICJhbmQgICAobzEuV2FyZWhvdXNlSWQgPSA6d2FyZWhvdXNlSWQpKSkg\nIiAKICAgICAgICAgICAgICAgICAgICArICAiYW5kIChvLkN1c3RvbWVySWQg\nPSA6Y3VzdG9tZXJJZCkgIgogICAgICAgICAgICAgICAgICAgICsgICJhbmQg\nKG8uV2FyZWhvdXNlSWQgPSA6d2FyZWhvdXNlSWQpICIKICAgICAgICAgICAg\nICAgICAgICArICAiYW5kIChvLkRpc3RyaWN0SWQgPSA6ZGlzdHJpY3RJZCki\nOwoKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAg\nICAgVHlwZWRRdWVyeTxPcmRlckpQQT4gcTEgPSBlbS5jcmVhdGVRdWVyeShq\ncHFsLCBPcmRlckpQQS5jbGFzcyk7CiAgICAgICAgcTEuc2V0UGFyYW1ldGVy\nKCJjdXN0b21lcklkIiwgMzM5KQogICAgICAgICAgLnNldFBhcmFtZXRlcigi\nZGlzdHJpY3RJZCIsIDMpCiAgICAgICAgICAuc2V0UGFyYW1ldGVyKCJ3YXJl\naG91c2VJZCIsIDIzKTsKICAgICAgICAgICAgICAgICAgCiAgICAgICAgYXNz\nZXJ0RXF1YWxzKEpQUUxQYXJzZXIuTEFOR19KUFFMLCBPcGVuSlBBUGVyc2lz\ndGVuY2UuY2FzdChxMSkuZ2V0TGFuZ3VhZ2UoKSk7CiAgICAgICAgYXNzZXJ0\nRmFsc2UocTEuZ2V0UmVzdWx0TGlzdCgpLmlzRW1wdHkoKSk7CiAgICAgICAg\nCiAgICAgICAgCiAgICAgICAgVHlwZWRRdWVyeTxPcmRlckpQQT4gcTIgPSBl\nbS5jcmVhdGVRdWVyeShqcHFsLCBPcmRlckpQQS5jbGFzcyk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKFF1ZXJ5TGFuZ3VhZ2VzLkxBTkdfUFJFUEFSRURfU1FM\nLCBPcGVuSlBBUGVyc2lzdGVuY2UuY2FzdChxMikuZ2V0TGFuZ3VhZ2UoKSk7\nCiAgICAgICAgcTIuc2V0UGFyYW1ldGVyKCJjdXN0b21lcklkIiwgMjk2NykK\nICAgICAgICAgIC5zZXRQYXJhbWV0ZXIoImRpc3RyaWN0SWQiLCA1KQogICAg\nICAgICAgLnNldFBhcmFtZXRlcigid2FyZWhvdXNlSWQiLCAyMik7CiAgICAg\nICAgCiAgICAgICAgYXNzZXJ0RmFsc2UocTIuZ2V0UmVzdWx0TGlzdCgpLmlz\nRW1wdHkoKSk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5yb2xsYmFj\naygpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0UmVwZWF0ZWRQ\nYXJhbWV0ZXJJblN1YnF1ZXJ5SW5TYW1lT3JkZXIoKSB7CiAgICAgICAgT3Bl\nbkpQQUVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdl\ncigpOwogICAgICAgIFN0cmluZyBqcHFsID0gICJzZWxlY3QgbyBmcm9tIE9y\nZGVySlBBIG8gIiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICArICJ3\naGVyZSBvLk9yZGVySWQgaW4gKHNlbGVjdCBtYXgobzEuT3JkZXJJZCkgZnJv\nbSBPcmRlckpQQSBvMSAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nKyAgIndoZXJlICgobzEuQ3VzdG9tZXJJZCA9IDpjdXN0b21lcklkKSAiIAog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgICJhbmQgICAobzEuRGlz\ndHJpY3RJZCA9IDpkaXN0cmljdElkKSAiIAogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICsgICJhbmQgICAobzEuV2FyZWhvdXNlSWQgPSA6d2FyZWhv\ndXNlSWQpKSkgIiAKICAgICAgICAgICAgICAgICAgICAgICAgKyAgImFuZCAo\nby5DdXN0b21lcklkID0gOmN1c3RvbWVySWQpICIKICAgICAgICAgICAgICAg\nICAgICAgICAgKyAgImFuZCAoby5EaXN0cmljdElkID0gOmRpc3RyaWN0SWQp\nICIKICAgICAgICAgICAgICAgICAgICAgICAgKyAgImFuZCAoby5XYXJlaG91\nc2VJZCA9IDp3YXJlaG91c2VJZCkiOwoKICAgICAgICBlbS5nZXRUcmFuc2Fj\ndGlvbigpLmJlZ2luKCk7CiAgICAgICAgVHlwZWRRdWVyeTxPcmRlckpQQT4g\ncTEgPSBlbS5jcmVhdGVRdWVyeShqcHFsLCBPcmRlckpQQS5jbGFzcyk7CiAg\nICAgICAgcTEuc2V0UGFyYW1ldGVyKCJjdXN0b21lcklkIiwgMzM5KQogICAg\nICAgICAgLnNldFBhcmFtZXRlcigiZGlzdHJpY3RJZCIsIDMpCiAgICAgICAg\nICAuc2V0UGFyYW1ldGVyKCJ3YXJlaG91c2VJZCIsIDIzKTsKICAgICAgICAg\nICAgICAgICAgCiAgICAgICAgYXNzZXJ0RXF1YWxzKEpQUUxQYXJzZXIuTEFO\nR19KUFFMLCBPcGVuSlBBUGVyc2lzdGVuY2UuY2FzdChxMSkuZ2V0TGFuZ3Vh\nZ2UoKSk7CiAgICAgICAgYXNzZXJ0RmFsc2UocTEuZ2V0UmVzdWx0TGlzdCgp\nLmlzRW1wdHkoKSk7CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgVHlwZWRR\ndWVyeTxPcmRlckpQQT4gcTIgPSBlbS5jcmVhdGVRdWVyeShqcHFsLCBPcmRl\nckpQQS5jbGFzcyk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKFF1ZXJ5TGFuZ3Vh\nZ2VzLkxBTkdfUFJFUEFSRURfU1FMLCBPcGVuSlBBUGVyc2lzdGVuY2UuY2Fz\ndChxMikuZ2V0TGFuZ3VhZ2UoKSk7CiAgICAgICAgcTIuc2V0UGFyYW1ldGVy\nKCJjdXN0b21lcklkIiwgMjk2NykKICAgICAgICAgIC5zZXRQYXJhbWV0ZXIo\nImRpc3RyaWN0SWQiLCA1KQogICAgICAgICAgLnNldFBhcmFtZXRlcigid2Fy\nZWhvdXNlSWQiLCAyMik7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0RmFsc2Uo\ncTIuZ2V0UmVzdWx0TGlzdCgpLmlzRW1wdHkoKSk7CiAgICAgICAgZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5yb2xsYmFjaygpOwogICAgfQogICAgCiAgICBwdWJs\naWMgdm9pZCB0ZXN0UGFydGlhbGx5UmVwZWF0ZWRQYXJhbWV0ZXJJblN1YnF1\nZXJ5KCkgewogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVtID0gZW1m\nLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBTdHJpbmcganBxbCA9\nICAic2VsZWN0IG8gZnJvbSBPcmRlckpQQSBvICIgCiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgKyAid2hlcmUgby5PcmRlcklkIGluIChzZWxlY3Qg\nbWF4KG8xLk9yZGVySWQpIGZyb20gT3JkZXJKUEEgbzEgIgogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICsgICJ3aGVyZSAoKG8xLkN1c3RvbWVySWQg\nPSA6Y3VzdG9tZXJJZCkgIiAKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICArICAiYW5kICAgKG8xLldhcmVob3VzZUlkID0gOndhcmVob3VzZUlkKSkp\nICIgCiAgICAgICAgICAgICAgICAgICAgICAgICsgICJhbmQgKG8uQ3VzdG9t\nZXJJZCA9IDpjdXN0b21lcklkKSAiCiAgICAgICAgICAgICAgICAgICAgICAg\nICsgICJhbmQgKG8uRGlzdHJpY3RJZCA9IDpkaXN0cmljdElkKSAiCiAgICAg\nICAgICAgICAgICAgICAgICAgICsgICJhbmQgKG8uV2FyZWhvdXNlSWQgPSA6\nd2FyZWhvdXNlSWQpIjsKCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5i\nZWdpbigpOwogICAgICAgIFR5cGVkUXVlcnk8T3JkZXJKUEE+IHExID0gZW0u\nY3JlYXRlUXVlcnkoanBxbCwgT3JkZXJKUEEuY2xhc3MpOwogICAgICAgIHEx\nLnNldFBhcmFtZXRlcigiY3VzdG9tZXJJZCIsIDMzOSkKICAgICAgICAgIC5z\nZXRQYXJhbWV0ZXIoImRpc3RyaWN0SWQiLCAzKQogICAgICAgICAgLnNldFBh\ncmFtZXRlcigid2FyZWhvdXNlSWQiLCAyMyk7CiAgICAgICAgICAgICAgICAg\nIAogICAgICAgIGFzc2VydEVxdWFscyhKUFFMUGFyc2VyLkxBTkdfSlBRTCwg\nT3BlbkpQQVBlcnNpc3RlbmNlLmNhc3QocTEpLmdldExhbmd1YWdlKCkpOwog\nICAgICAgIGFzc2VydEZhbHNlKHExLmdldFJlc3VsdExpc3QoKS5pc0VtcHR5\nKCkpOwogICAgICAgIAogICAgICAgIAogICAgICAgIFR5cGVkUXVlcnk8T3Jk\nZXJKUEE+IHEyID0gZW0uY3JlYXRlUXVlcnkoanBxbCwgT3JkZXJKUEEuY2xh\nc3MpOwogICAgICAgIGFzc2VydEVxdWFscyhRdWVyeUxhbmd1YWdlcy5MQU5H\nX1BSRVBBUkVEX1NRTCwgT3BlbkpQQVBlcnNpc3RlbmNlLmNhc3QocTIpLmdl\ndExhbmd1YWdlKCkpOwogICAgICAgIHEyLnNldFBhcmFtZXRlcigiY3VzdG9t\nZXJJZCIsIDI5NjcpCiAgICAgICAgICAuc2V0UGFyYW1ldGVyKCJkaXN0cmlj\ndElkIiwgNSkKICAgICAgICAgIC5zZXRQYXJhbWV0ZXIoIndhcmVob3VzZUlk\nIiwgMjIpOwogICAgICAgIAogICAgICAgIGFzc2VydEZhbHNlKHEyLmdldFJl\nc3VsdExpc3QoKS5pc0VtcHR5KCkpOwogICAgICAgIGVtLmdldFRyYW5zYWN0\naW9uKCkucm9sbGJhY2soKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQg\ndGVzdFBhcnRpYWxseVJlcGVhdGVkUGFyYW1ldGVySW5NYWlucXVlcnkoKSB7\nCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIFN0cmluZyBqcHFsID0gICJzZWxl\nY3QgbyBmcm9tIE9yZGVySlBBIG8gIiAKICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICArICJ3aGVyZSBvLk9yZGVySWQgaW4gKHNlbGVjdCBtYXgobzEu\nT3JkZXJJZCkgZnJvbSBPcmRlckpQQSBvMSAiCiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgKyAgIndoZXJlICgobzEuQ3VzdG9tZXJJZCA9IDpjdXN0\nb21lcklkKSAiIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgICJh\nbmQgICAobzEuRGlzdHJpY3RJZCA9IDpkaXN0cmljdElkKSAiIAogICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICsgICJhbmQgICAobzEuV2FyZWhvdXNl\nSWQgPSA6d2FyZWhvdXNlSWQpKSkgIiAKICAgICAgICAgICAgICAgICAgICAg\nICAgKyAgImFuZCAoby5DdXN0b21lcklkID0gOmN1c3RvbWVySWQpICIKICAg\nICAgICAgICAgICAgICAgICAgICAgKyAgImFuZCAoby5XYXJlaG91c2VJZCA9\nIDp3YXJlaG91c2VJZCkiOwoKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigp\nLmJlZ2luKCk7CiAgICAgICAgVHlwZWRRdWVyeTxPcmRlckpQQT4gcTEgPSBl\nbS5jcmVhdGVRdWVyeShqcHFsLCBPcmRlckpQQS5jbGFzcyk7CiAgICAgICAg\ncTEuc2V0UGFyYW1ldGVyKCJjdXN0b21lcklkIiwgMzM5KQogICAgICAgICAg\nLnNldFBhcmFtZXRlcigiZGlzdHJpY3RJZCIsIDMpCiAgICAgICAgICAuc2V0\nUGFyYW1ldGVyKCJ3YXJlaG91c2VJZCIsIDIzKTsKICAgICAgICAgICAgICAg\nICAgCiAgICAgICAgYXNzZXJ0RXF1YWxzKEpQUUxQYXJzZXIuTEFOR19KUFFM\nLCBPcGVuSlBBUGVyc2lzdGVuY2UuY2FzdChxMSkuZ2V0TGFuZ3VhZ2UoKSk7\nCiAgICAgICAgYXNzZXJ0RmFsc2UocTEuZ2V0UmVzdWx0TGlzdCgpLmlzRW1w\ndHkoKSk7CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgVHlwZWRRdWVyeTxP\ncmRlckpQQT4gcTIgPSBlbS5jcmVhdGVRdWVyeShqcHFsLCBPcmRlckpQQS5j\nbGFzcyk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKFF1ZXJ5TGFuZ3VhZ2VzLkxB\nTkdfUFJFUEFSRURfU1FMLCBPcGVuSlBBUGVyc2lzdGVuY2UuY2FzdChxMiku\nZ2V0TGFuZ3VhZ2UoKSk7CiAgICAgICAgcTIuc2V0UGFyYW1ldGVyKCJjdXN0\nb21lcklkIiwgMjk2NykKICAgICAgICAgIC5zZXRQYXJhbWV0ZXIoImRpc3Ry\naWN0SWQiLCA1KQogICAgICAgICAgLnNldFBhcmFtZXRlcigid2FyZWhvdXNl\nSWQiLCAyMik7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0RmFsc2UocTIuZ2V0\nUmVzdWx0TGlzdCgpLmlzRW1wdHkoKSk7CiAgICAgICAgZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5yb2xsYmFjaygpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRl\nc3RSYW5nZUlzRXhjbHVkZWQoKSB7CiAgICAgICAgTGlzdDxDb21wYW55PiBs\nID0gbnVsbDsKCiAgICAgICAgbCA9IGdldEFsbENvbXBhbmllc1BhZ2VkKDAs\nIDEpOwogICAgICAgIGFzc2VydEVxdWFscygxLCBsLnNpemUoKSk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKCJCRUEiLCBsLmdldCgwKS5nZXROYW1lKCkpOwog\nICAgICAgIAogICAgICAgIGwgPSBnZXRBbGxDb21wYW5pZXNQYWdlZCgxLCAx\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgbC5zaXplKCkpOwogICAgICAg\nIGFzc2VydEVxdWFscygiSUJNIiwgbC5nZXQoMCkuZ2V0TmFtZSgpKTsKICAg\nICAgICAKICAgICAgICBsID0gZ2V0QWxsQ29tcGFuaWVzUGFnZWQoMiwgMSk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIGwuc2l6ZSgpKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoImFjbWUub3JnIiwgbC5nZXQoMCkuZ2V0TmFtZSgpKTsK\nICAgIH0KCiAgICBwdWJsaWMgTGlzdDxDb21wYW55PiBnZXRBbGxDb21wYW5p\nZXNQYWdlZChpbnQgc3RhcnQsIGludCBtYXgpIHsKICAgICAgICBFbnRpdHlN\nYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAg\nICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnkoInNlbGVjdCBwIGZyb20gQ29t\ncGFueSBwIG9yZGVyIGJ5IHAubmFtZSIpOwogICAgICAgIHEuc2V0Rmlyc3RS\nZXN1bHQoc3RhcnQpOwogICAgICAgIHEuc2V0TWF4UmVzdWx0cyhtYXgpOwog\nICAgICAgIHJldHVybiAoTGlzdDxDb21wYW55PikgcS5nZXRSZXN1bHRMaXN0\nKCk7CiAgICB9CiAgICAKICAgIFByZXBhcmVkUXVlcnlDYWNoZSBnZXRQcmVw\nYXJlZFF1ZXJ5Q2FjaGUoKSB7CiAgICAgICAgcmV0dXJuIGVtZi5nZXRDb25m\naWd1cmF0aW9uKCkuZ2V0UXVlcnlTUUxDYWNoZUluc3RhbmNlKCk7CiAgICB9\nCiAgICAKICAgIC8qKgogICAgICogQ29tcGFyZSB0aGUgcmVzdWx0IG9mIGV4\nZWN1dGlvbiBvZiB0aGUgbm9uLXBhcmFtZXRlcml6ZWQgcXVlcnkgd2l0aCBh\nbmQgd2l0aG91dCBQcmVwYXJlZFF1ZXJ5IGNhY2hlLgogICAgICogCiAgICAg\nKiBAcGFyYW0ganBxbCBhIFN0cmluZyByZXByZXNlbnRpbmcgZWl0aGVyIGEg\nSlBRTCBvciB0aGUgbmFtZSBvZiBhIE5hbWVkUXVlcnkKICAgICAqIEBwYXJh\nbSBpc05hbWVkUXVlcnkgZmxhZ3MgaWYgdGhlIGZpcnN0IGlucHV0IHJlcHJl\nc2VudHMgYSBKUFFMIHN0cmluZyBvciBhIE5hbWVkUXVlcnkgbmFtZQogICAg\nICovCiAgICB2b2lkIGNvbXBhcmUoU3RyaW5nIGpwcWwsIGJvb2xlYW4gaXNO\nYW1lZCkgewogICAgICAgIGNvbXBhcmUoanBxbCwgaXNOYW1lZCwgLTEsIE5P\nX1BBUkFNUyk7CiAgICB9CgogICAgCiAgICAvKioKICAgICAqIENvbXBhcmUg\ndGhlIHJlc3VsdCBvZiBleGVjdXRpb24gb2YgdGhlIG5vbi1wYXJhbWV0ZXJp\nemVkIHF1ZXJ5IHdpdGggYW5kIHdpdGhvdXQgUHJlcGFyZWRRdWVyeSBjYWNo\nZS4KICAgICAqIAogICAgICogQHBhcmFtIGpwcWwgYSBTdHJpbmcgcmVwcmVz\nZW50aW5nIGVpdGhlciBhIEpQUUwgb3IgdGhlIG5hbWUgb2YgYSBOYW1lZFF1\nZXJ5CiAgICAgKiBAcGFyYW0gaXNOYW1lZFF1ZXJ5IGZsYWdzIGlmIHRoZSBm\naXJzdCBpbnB1dCByZXByZXNlbnRzIGEgSlBRTCBzdHJpbmcgb3IgYSBOYW1l\nZFF1ZXJ5IG5hbWUKICAgICAqIEBwYXJhbSBleHBlY3RlZENvdW50IGV4cGVj\ndGVkIG51bWJlciBvZiByZXN1bHRzCiAgICAgKi8KICAgIHZvaWQgY29tcGFy\nZShTdHJpbmcganBxbCwgYm9vbGVhbiBpc05hbWVkLCBpbnQgZXhwZWN0ZWRD\nb3VudCkgewogICAgICAgIGNvbXBhcmUoanBxbCwgaXNOYW1lZCwgZXhwZWN0\nZWRDb3VudCwgTk9fUEFSQU1TKTsKICAgIH0KICAgIAogICAgLyoqCiAgICAg\nKiBDb21wYXJlIHRoZSByZXN1bHQgb2YgZXhlY3V0aW9uIG9mIHRoZSBxdWVy\neSB3aXRoIGFuZCB3aXRob3V0IFByZXBhcmVkUXVlcnkgY2FjaGUuCiAgICAg\nKiAKICAgICAqIAogICAgICogQHBhcmFtIGpwcWwgYSBTdHJpbmcgcmVwcmVz\nZW50aW5nIGVpdGhlciBhIEpQUUwgb3IgdGhlIG5hbWUgb2YgYSBOYW1lZFF1\nZXJ5CiAgICAgKiBAcGFyYW0gaXNOYW1lZFF1ZXJ5IGZsYWdzIGlmIHRoZSBm\naXJzdCBpbnB1dCByZXByZXNlbnRzIGEgSlBRTCBzdHJpbmcgb3IgYSBOYW1l\nZFF1ZXJ5IG5hbWUKICAgICAqIEBwYXJhbSBwYXJhbXMgYSBldmVuIHNpemVk\nIGFycmF5IHdob3NlIGV2ZW4taW5kZXhlZCBlbGVtZW50cyBhcmUga2V5cyBh\nbmQgb2RkLWluZGV4ZWQgZWxlbWVudHMgYXJlIGNvcnJlc3BvbmRpbmcKICAg\nICAqIHBhcmFtZXRlciB2YWx1ZSBmb3IgdGhlIHF1ZXJ5LiBBIG51bGwgYXJy\nYXkgZGVub3RlcyB0aGUgcXVlcnkgaXMgbm90IHBhcmFtZXRlcml6ZWQuCiAg\nICAgKi8KICAgIHZvaWQgY29tcGFyZShTdHJpbmcganBxbCwgYm9vbGVhbiBp\nc05hbWVkLCBPYmplY3QuLi4gcGFyYW1zKSB7CiAgICAgICAgY29tcGFyZShq\ncHFsLCBpc05hbWVkLCAtMSwgcGFyYW1zKTsKICAgIH0KICAgIC8qKgogICAg\nICogQ29tcGFyZSB0aGUgcmVzdWx0IG9mIGV4ZWN1dGlvbiBvZiB0aGUgcXVl\ncnkgd2l0aCBhbmQgd2l0aG91dCBQcmVwYXJlZFF1ZXJ5IGNhY2hlLgogICAg\nICogCiAgICAgKiAKICAgICAqIEBwYXJhbSBqcHFsIGEgU3RyaW5nIHJlcHJl\nc2VudGluZyBlaXRoZXIgYSBKUFFMIG9yIHRoZSBuYW1lIG9mIGEgTmFtZWRR\ndWVyeQogICAgICogQHBhcmFtIGlzTmFtZWRRdWVyeSBmbGFncyBpZiB0aGUg\nZmlyc3QgaW5wdXQgcmVwcmVzZW50cyBhIEpQUUwgc3RyaW5nIG9yIGEgTmFt\nZWRRdWVyeSBuYW1lCiAgICAgKiBAcGFyYW0gcGFyYW1zIGEgZXZlbiBzaXpl\nZCBhcnJheSB3aG9zZSBldmVuLWluZGV4ZWQgZWxlbWVudHMgYXJlIGtleXMg\nYW5kIG9kZC1pbmRleGVkIGVsZW1lbnRzIGFyZSBjb3JyZXNwb25kaW5nCiAg\nICAgKiBwYXJhbWV0ZXIgdmFsdWUgZm9yIHRoZSBxdWVyeS4gQSBudWxsIGFy\ncmF5IGRlbm90ZXMgdGhlIHF1ZXJ5IGlzIG5vdCBwYXJhbWV0ZXJpemVkLgog\nICAgICogQHBhcmFtIGV4cGVjdGVkQ291bnQgZXhwZWN0ZWQgbnVtYmVyIG9m\nIHJlc3VsdHMuIFN1cHBseSBhIG5lZ2F0aXZlIG51bWJlciB0byBpZ25vcmUu\nCiAgICAgKi8KICAgIHZvaWQgY29tcGFyZShTdHJpbmcgcXVlcnksIGJvb2xl\nYW4gaXNOYW1lZCwgaW50IGV4cGVjdGVkQ291bnQsIE9iamVjdC4uLiBwYXJh\nbXMpIHsKICAgICAgICBydW4ocXVlcnksIGlzTmFtZWQsIHBhcmFtcywgZXhw\nZWN0ZWRDb3VudCwgIVVTRV9DQUNIRSwgMSk7IC8vIHJ1biB0aGUgcXVlcnkg\nb25jZSBmb3Igd2FybWluZyB1cAogICAgICAgIAogICAgICAgIC8vIHJ1biBO\nIHRpbWVzIHdpdGhvdXQgY2FjaGUKICAgICAgICBhdWRpdG9yLmNsZWFyKCk7\nCiAgICAgICAgbG9uZyB3aXRob3V0ID0gcnVuKHF1ZXJ5LCBpc05hbWVkLCBw\nYXJhbXMsIGV4cGVjdGVkQ291bnQsICFVU0VfQ0FDSEUsIFNBTVBMRV9TSVpF\nKTsKICAgICAgICBMaXN0PFN0cmluZz4gb3JpZ2luYWxTUUxzID0gYXVkaXRv\nci5nZXRTUUxzKCk7CiAgICAgICAgCiAgICAgICAgLy8gcnVuIE4gdGltZXMg\nd2l0aCBjYWNoZQogICAgICAgIGF1ZGl0b3IuY2xlYXIoKTsKICAgICAgICBs\nb25nIHdpdGggPSBydW4ocXVlcnksIGlzTmFtZWQsIHBhcmFtcywgZXhwZWN0\nZWRDb3VudCwgVVNFX0NBQ0hFLCBTQU1QTEVfU0laRSk7CiAgICAgICAgTGlz\ndDxTdHJpbmc+IGNhY2hlZFNRTHMgPSBhdWRpdG9yLmdldFNRTHMoKTsKICAg\nICAgICAKICAgICAgICBjb21wYXJlU1FMcyhvcmlnaW5hbFNRTHMsIGNhY2hl\nZFNRTHMpOwogICAgICAgIGxvbmcgZGVsdGEgPSAod2l0aG91dCA9PSAwKSA/\nIDAgOiAod2l0aG91dCAtIHdpdGgpICogMTAwIC8gd2l0aG91dDsKICAgICAg\nICAKICAgICAgICBTdHJpbmcganBxbCA9IGdldEpQUUxTdHJpbmcocXVlcnks\nIGlzTmFtZWQpOwogICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbigoZGVsdGEg\nPCAwID8gIioqKldBUk4gIiA6ICIiKSArIE1hdGguYWJzKGRlbHRhKSArICIl\nICIgKyAKICAgICAgICAgICAgICAgIChkZWx0YSA8IDAgPyAiZGVncmFkdGlv\nbiIgOiAiaW1wcm92ZW1lbnQiKSArICIgZm9yIFsiKyBqcHFsICsgIl0iKTsK\nICAgICAgICBhc3NlcnRUcnVlKE1hdGguYWJzKGRlbHRhKSArICIlIGRlZ3Jh\nZHRpb24gZm9yIFsiKyBqcHFsICsgIl0iLCAhRkFJTF9JRl9QRVJGX0RFR1JB\nREUgfHwgZGVsdGEgPiAwKTsKICAgIH0KICAgIAogICAgdm9pZCBjb21wYXJl\nU1FMcyhMaXN0PFN0cmluZz4gYSwgTGlzdDxTdHJpbmc+IGIpIHsKICAgICAg\nICBhc3NlcnRFcXVhbHMoYS5zaXplKCksIGIuc2l6ZSgpKTsKICAgICAgICBm\nb3IgKGludCBpID0gMDsgaSA8IGEuc2l6ZSgpOyBpKyspIHsKICAgICAgICAg\nICAgYXNzZXJ0RXF1YWxzKGEuZ2V0KGkpLCBiLmdldChpKSk7CiAgICAgICAg\nfQogICAgfQoKICAgIC8qKgogICAgICogQ3JlYXRlIGEgcXVlcnkgZnJvbSB0\naGUgZ2l2ZW4gc3RyaW5nIGFuZCBleGVjdXRlIGl0IGZvciBnaXZlbiBudW1i\nZXIgb2YgdGltZXMuCiAgICAgKiAKICAgICAqIEBwYXJhbSBqcHFsIGEgU3Ry\naW5nIHJlcHJlc2VudGluZyBlaXRoZXIgYSBKUFFMIG9yIHRoZSBuYW1lIG9m\nIGEgTmFtZWRRdWVyeQogICAgICogQHBhcmFtIGlzTmFtZWRRdWVyeSBmbGFn\ncyBpZiB0aGUgZmlyc3QgaW5wdXQgcmVwcmVzZW50cyBhIEpQUUwgc3RyaW5n\nIG9yIGEgTmFtZWRRdWVyeSBuYW1lCiAgICAgKiBAcGFyYW0gcGFyYW1zIGEg\nZXZlbiBzaXplZCBhcnJheSB3aG9zZSBldmVuLWluZGV4ZWQgZWxlbWVudHMg\nYXJlIGtleXMgYW5kIG9kZC1pbmRleGVkIGVsZW1lbnRzIGFyZSBjb3JyZXNw\nb25kaW5nCiAgICAgKiBwYXJhbWV0ZXIgdmFsdWUgZm9yIHRoZSBxdWVyeS4g\nQSBudWxsIGFycmF5IGRlbm90ZXMgdGhlIHF1ZXJ5IGlzIG5vdCBwYXJhbWV0\nZXJpemVkLgogICAgICogQHBhcmFtIGV4cGVjdGVkQ291bnQgZXhwZWN0ZWQg\nbnVtYmVyIG9mIHJlc3VsdHMuIFN1cHBseSBhIG5lZ2F0aXZlIG51bWJlciB0\nbyBpZ25vcmUuCiAgICAgKiBAcGFyYW0gdXNlQ2FjaGUgZmxhZ3MgaWYgdGhl\nIFByZXBhcmVkUXVlcnkgY2FjaGUgaXMgdG8gYmUgYWN0aXZhdGVkLgogICAg\nICogQHBhcmFtIE4gbnVtYmVyIG9mIHRpbWVzIHRoZSBxdWVyeSBpcyB0byBi\nZSBleGVjdXRlZCB0byBjYWxjdWxhdGUgcmVhc29uYWJsZSBzdGF0aXN0aWNz\nLgogICAgICogCiAgICAgKiBAcmV0dXJuIG1lZGlhbiB0aW1lIHRvIGV4ZWN1\ndGUgYSBxdWVyeSBhbmQgaXRlcmF0ZSB0aHJvdWdoIGl0cyByZXN1bHRzIAog\nICAgICovCiAgICBsb25nIHJ1bihTdHJpbmcganBxbCwgYm9vbGVhbiBpc05h\nbWVkUXVlcnksIE9iamVjdFtdIHBhcmFtcywgaW50IGV4cGVjdGVkQ291bnQs\nIGJvb2xlYW4gdXNlQ2FjaGUsIGludCBOKSB7CiAgICAgICAgTGlzdDxMb25n\nPiBzdGF0cyA9IG5ldyBBcnJheUxpc3Q8TG9uZz4oKTsKICAgICAgICBTdHJp\nbmcgY2FjaGVLZXkgPSBnZXRKUFFMU3RyaW5nKGpwcWwsIGlzTmFtZWRRdWVy\neSk7CiAgICAgICAgUXVlcnlTdGF0aXN0aWNzPFN0cmluZz4gY2FjaGVTdGF0\ncyA9IGdldFByZXBhcmVkUXVlcnlDYWNoZSgpLmdldFN0YXRpc3RpY3MoKTsK\nICAgICAgICBnZXRQcmVwYXJlZFF1ZXJ5Q2FjaGUoKS5jbGVhcigpOwogICAg\nICAgIGFzc2VydEVxdWFscygwLCBjYWNoZVN0YXRzLmdldEV4ZWN1dGlvbkNv\ndW50KGNhY2hlS2V5KSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDAsIGNhY2hl\nU3RhdHMuZ2V0SGl0Q291bnQoY2FjaGVLZXkpKTsKICAgICAgICAKICAgICAg\nICBmb3IgKGludCBpID0gMDsgaSA8IE47IGkrKykgewogICAgICAgICAgICBP\ncGVuSlBBRW50aXR5TWFuYWdlclNQSSBlbSA9IChPcGVuSlBBRW50aXR5TWFu\nYWdlclNQSSllbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgICAg\nICBlbS5zZXRRdWVyeVNRTENhY2hlKHVzZUNhY2hlKTsKICAgICAgICAgICAg\nYXNzZXJ0RXF1YWxzKHVzZUNhY2hlLCBlbS5nZXRRdWVyeVNRTENhY2hlKCkp\nOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gbWVhc3VyZSB0aW1lIAog\nICAgICAgICAgICBsb25nIHN0YXJ0ID0gU3lzdGVtLm5hbm9UaW1lKCk7CiAg\nICAgICAgICAgIE9wZW5KUEFRdWVyeTw/PiBxID0gaXNOYW1lZFF1ZXJ5ID8g\nZW0uY3JlYXRlTmFtZWRRdWVyeShqcHFsKSA6IGVtLmNyZWF0ZVF1ZXJ5KGpw\ncWwpOwogICAgICAgICAgICBwYXJhbWV0ZXJpemUocSwgcGFyYW1zKTsKICAg\nICAgICAgICAgTGlzdDw/PiBsaXN0ID0gcS5nZXRSZXN1bHRMaXN0KCk7CiAg\nICAgICAgICAgIGlmIChleHBlY3RlZENvdW50ID49IDApCiAgICAgICAgICAg\nICAgICBhc3NlcnRFcXVhbHMoZXhwZWN0ZWRDb3VudCwgbGlzdC5zaXplKCkp\nOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBhc3NlcnRGYWxz\nZShsaXN0LmlzRW1wdHkoKSk7CiAgICAgICAgICAgIGl0ZXJhdGUobGlzdCk7\nCiAgICAgICAgICAgIGxvbmcgZW5kID0gU3lzdGVtLm5hbm9UaW1lKCk7ICAg\nCiAgICAgICAgICAgIAogICAgICAgICAgICBhc3NlcnRFcXVhbHModXNlQ2Fj\naGUgPyBpKzEgOiAwLCBjYWNoZVN0YXRzLmdldEV4ZWN1dGlvbkNvdW50KGNh\nY2hlS2V5KSk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscyh1c2VDYWNoZSA/\nIGkgOiAwLCAgIGNhY2hlU3RhdHMuZ2V0SGl0Q291bnQoY2FjaGVLZXkpKTsK\nICAgICAgICAgICAgCiAgICAgICAgICAgIHEuY2xvc2VBbGwoKTsKICAgICAg\nICAgICAgc3RhdHMuYWRkKGVuZCAtIHN0YXJ0KTsKICAgICAgICAgICAgZW0u\nY2xvc2UoKTsKICAgICAgICB9CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJFeGVj\ndXRpb24gQ291bnQgWyIgKyBjYWNoZUtleSArICJdIiwgdXNlQ2FjaGUgPyBO\nIDogMCwgY2FjaGVTdGF0cy5nZXRUb3RhbEV4ZWN1dGlvbkNvdW50KCkpOwog\nICAgICAgIGFzc2VydEVxdWFscygiSGl0IENvdW50IFsiICsgY2FjaGVLZXkg\nKyAiXSIsIHVzZUNhY2hlID8gTi0xIDogMCwgY2FjaGVTdGF0cy5nZXRUb3Rh\nbEhpdENvdW50KCkpOwogICAgICAgIAogICAgICAgIENvbGxlY3Rpb25zLnNv\ncnQoc3RhdHMpOwogICAgICAgIHJldHVybiBzdGF0cy5nZXQoTi8yKTsKICAg\nIH0gICAKICAgIAogICAgCiAgICB2b2lkIHBhcmFtZXRlcml6ZShRdWVyeSBx\nLCBPYmplY3RbXSBwYXJhbXMpIHsKICAgICAgICBpZiAocGFyYW1zID09IG51\nbGwpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBmb3IgKGludCBqID0g\nMDsgcGFyYW1zICE9IG51bGwgJiYgaiA8IHBhcmFtcy5sZW5ndGggLSAxOyBq\nICs9IDIpIHsKICAgICAgICAgICAgT2JqZWN0IGtleSA9IHBhcmFtc1tqXTsK\nICAgICAgICAgICAgT2JqZWN0IHZhbCA9IHBhcmFtc1tqICsgMV07CiAgICAg\nICAgICAgIGlmIChrZXkgaW5zdGFuY2VvZiBJbnRlZ2VyKQogICAgICAgICAg\nICAgICAgcS5zZXRQYXJhbWV0ZXIoKChOdW1iZXIpa2V5KS5pbnRWYWx1ZSgp\nLCB2YWwpOyAKICAgICAgICAgICAgZWxzZSBpZiAoa2V5IGluc3RhbmNlb2Yg\nU3RyaW5nKQogICAgICAgICAgICAgICAgcS5zZXRQYXJhbWV0ZXIoa2V5LnRv\nU3RyaW5nKCksIHZhbCk7IAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAg\nICAgICBmYWlsKCJrZXkgIiArIGtleSArICIgaXMgbmVpdGhlciBOdW1iZXIg\nbm9yIFN0cmluZyIpOwogICAgICAgIH0KICAgIH0KICAgIAogICAgdm9pZCBp\ndGVyYXRlKExpc3Q8Pz4gbGlzdCkgewogICAgICAgIEl0ZXJhdG9yPD8+IGkg\nPSBsaXN0Lml0ZXJhdG9yKCk7CiAgICAgICAgd2hpbGUgKGkuaGFzTmV4dCgp\nKQogICAgICAgICAgICBpLm5leHQoKTsKICAgIH0KICAgIAogICAgLyoqCiAg\nICAgKiBHZXRzIHRoZSBKUFFMIFN0cmluZyBvZiBhIE5hbWVkUXVlcnkgb2Yg\ndGhlIGdpdmVuIG5hbWUuCiAgICAgKi8KICAgIFN0cmluZyBnZXRKUFFMU3Ry\naW5nKFN0cmluZyBuYW1lLCBib29sZWFuIGlzTmFtZWRRdWVyeSkgewogICAg\nICAgIGlmICghaXNOYW1lZFF1ZXJ5KQogICAgICAgICAgICByZXR1cm4gbmFt\nZTsKICAgICAgICByZXR1cm4gZW1mLmdldENvbmZpZ3VyYXRpb24oKQogICAg\nICAgICAgICAgICAgICAuZ2V0TWV0YURhdGFSZXBvc2l0b3J5SW5zdGFuY2Uo\nKQogICAgICAgICAgICAgICAgICAuZ2V0UXVlcnlNZXRhRGF0YShudWxsLCBu\nYW1lLCBudWxsLCB0cnVlKQogICAgICAgICAgICAgICAgICAuZ2V0UXVlcnlT\ndHJpbmcoKTsKICAgIH0KCgogICAgLyoqCiAgICAgKiBBIEpEQkMgTGlzdGVu\nZXIgdG8gYXVkaXQgdGFyZ2V0IFNRTCBleGVjdXRlZCBwZXIgSlBRTCBxdWVy\neS4KICAgICAqCiAgICAgKi8KICAgIHB1YmxpYyBjbGFzcyBTUUxBdWRpdG9y\nIGV4dGVuZHMgQWJzdHJhY3RKREJDTGlzdGVuZXIgewogICAgICAgIHByaXZh\ndGUgTGlzdDxTdHJpbmc+IHNxbHMgPSBuZXcgQXJyYXlMaXN0PFN0cmluZz4o\nKTsKICAgIAogICAgICAgIEBPdmVycmlkZQogICAgICAgIHB1YmxpYyB2b2lk\nIGJlZm9yZUV4ZWN1dGVTdGF0ZW1lbnQoSkRCQ0V2ZW50IGV2ZW50KSB7CiAg\nICAgICAgICAgIGlmIChldmVudC5nZXRTUUwoKSAhPSBudWxsICYmIHNxbHMg\nIT0gbnVsbCkgewogICAgICAgICAgICAgICBzcWxzLmFkZChldmVudC5nZXRT\nUUwoKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAg\nICAgdm9pZCBjbGVhcigpIHsKICAgICAgICAgICAgc3Fscy5jbGVhcigpOwog\nICAgICAgIH0KICAgICAgICAKICAgICAgICBMaXN0PFN0cmluZz4gZ2V0U1FM\ncygpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBBcnJheUxpc3Q8U3RyaW5n\nPihzcWxzKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIHB1YmxpYyBzdGF0\naWMgY2xhc3MgUXVlcnlUaHJlYWQgaW1wbGVtZW50cyBSdW5uYWJsZSB7CiAg\nICAgICAgcHJpdmF0ZSBmaW5hbCBPcGVuSlBBRW50aXR5TWFuYWdlciBlbTsK\nICAgICAgICBwcml2YXRlIGZpbmFsIFN0cmluZyBqcHFsOwogICAgICAgIHBy\naXZhdGUgYm9vbGVhbiBmYWlsZWQgPSBmYWxzZTsKICAgICAgICBwdWJsaWMg\nUXVlcnlUaHJlYWQoT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0sIFN0cmluZyBq\ncHFsKSB7CiAgICAgICAgICAgIHN1cGVyKCk7CiAgICAgICAgICAgIHRoaXMu\nZW0gPSBlbTsKICAgICAgICAgICAgdGhpcy5qcHFsID0ganBxbDsKICAgICAg\nICB9CiAgICAgICAgCiAgICAgICAgcHVibGljIHZvaWQgcnVuKCkgewogICAg\nICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7\nIGkgPCAxMCAmJiAhZmFpbGVkOyBpKyspIHsKICAgICAgICAgICAgICAgICAg\nICBPcGVuSlBBUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5KGpwcWwpOwogICAg\nICAgICAgICAgICAgICAgIHEuc2V0UGFyYW1ldGVyKCJuYW1lIiwgIkF1dGhv\nci0iK2kpOwogICAgICAgICAgICAgICAgICAgIHEuZ2V0UmVzdWx0TGlzdCgp\nOwogICAgICAgICAgICAgICAgICAgIGlmIChpID4gMSkgCiAgICAgICAgICAg\nICAgICAgICAgICAgIGFzc2VydEVxdWFscyhRdWVyeUxhbmd1YWdlcy5MQU5H\nX1BSRVBBUkVEX1NRTCwgcS5nZXRMYW5ndWFnZSgpKTsKICAgICAgICAgICAg\nICAgIH0KICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAg\nICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7CiAgICAgICAgICAg\nICAgICBmYWlsZWQgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgfQog\nICAgICAgIAogICAgICAgIHB1YmxpYyBib29sZWFuIGlzRmFpbGVkKCkgewog\nICAgICAgICAgICByZXR1cm4gZmFpbGVkOwogICAgICAgIH0KICAgICAgICAK\nICAgIH0KCn0K\n","encoding":"base64"}

