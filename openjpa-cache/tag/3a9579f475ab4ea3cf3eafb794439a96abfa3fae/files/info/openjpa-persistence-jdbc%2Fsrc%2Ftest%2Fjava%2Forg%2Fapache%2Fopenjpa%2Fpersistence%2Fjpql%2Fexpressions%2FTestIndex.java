{"sha":"143405192495b89234b76d6945df4a4e2aa573fa","node_id":"MDQ6QmxvYjIwNjM2NDoxNDM0MDUxOTI0OTViODkyMzRiNzZkNjk0NWRmNGE0ZTJhYTU3M2Zh","size":25349,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/143405192495b89234b76d6945df4a4e2aa573fa","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuanBxbC5l\neHByZXNzaW9uczsKCmltcG9ydCBqYXZhLmxhbmcucmVmbGVjdC5Db25zdHJ1\nY3RvcjsKaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7CmltcG9ydCBqYXZh\nLnV0aWwuQXJyYXlzOwppbXBvcnQgamF2YS51dGlsLkxpc3Q7CgppbXBvcnQg\namF2YXgucGVyc2lzdGVuY2UuRW50aXR5TWFuYWdlcjsKaW1wb3J0IGphdmF4\nLnBlcnNpc3RlbmNlLlF1ZXJ5OwoKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5saWIubG9nLkxvZzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJz\naXN0ZW5jZS5qcHFsLmVudGl0aWVzLklDb2x1bW5FbnRpdHk7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuanBxbC5lbnRpdGllcy5J\nTmFtZUVudGl0eTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0\nZW5jZS5qcHFsLmVudGl0aWVzLklPcmRlcmVkRWxlbWVudHM7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuanBxbC5lbnRpdGllcy5J\nT3JkZXJlZEVudGl0eTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJz\naXN0ZW5jZS5qcHFsLmVudGl0aWVzLk9yZGVyZWRFbGVtZW50RW50aXR5Owpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmpwcWwuZW50\naXRpZXMuT3JkZXJlZE1hbnlUb01hbnlFbnRpdHk7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuanBxbC5lbnRpdGllcy5PcmRlcmVk\nTmFtZUVudGl0eTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0\nZW5jZS5qcHFsLmVudGl0aWVzLk9yZGVyZWRPbmVUb01hbnlFbnRpdHk7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuanBxbC5lbnRp\ndGllcy5Vbm9yZGVyZWROYW1lRW50aXR5OwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnBlcnNpc3RlbmNlLmpwcWwuZW50aXRpZXMuWE1MT3JkZXJlZEVs\nZW1lbnRFbnRpdHk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lz\ndGVuY2UuanBxbC5lbnRpdGllcy5YTUxPcmRlcmVkTWFueVRvTWFueUVudGl0\neTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5qcHFs\nLmVudGl0aWVzLlhNTE9yZGVyZWROYW1lRW50aXR5OwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmpwcWwuZW50aXRpZXMuWE1MT3Jk\nZXJlZE9uZVRvTWFueUVudGl0eTsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5wZXJzaXN0ZW5jZS5qcHFsLmVudGl0aWVzLlhNTFVub3JkZXJlZE5hbWVF\nbnRpdHk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uu\ncHJveHkuVHJlZU5vZGU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVy\nc2lzdGVuY2UudGVzdC5KUEFFbnRpdHlDbGFzc0VudW07CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UudGVzdC5TaW5nbGVFTUZUZXN0\nQ2FzZTsKCi8qKgogKiBUZXN0IEpQUUwgSW5kZXggZnVuY3Rpb24gb24gTzJN\nLCBNMk0gYW5kIEVsZW1lbnQgY29sbGVjdGlvbnMgdXNpbmcgYW5ub3RhdGlv\nbnMgYW5kIFhNTC4KICogIAogKiBAYXV0aG9yIENhdGFsaW5hIFdlaSwgQWxi\nZXJ0IExlZSwgRG9uYWxkIFdvb2RzCiAqLwpwdWJsaWMgY2xhc3MgVGVzdElu\nZGV4IGV4dGVuZHMgU2luZ2xlRU1GVGVzdENhc2UgewogICAgCiAgICBwcml2\nYXRlIExvZyBsb2cgPSBudWxsOwogICAgCiAgICBwcml2YXRlIGVudW0gSlBR\nTEluZGV4RW50aXR5Q2xhc3NlcyBpbXBsZW1lbnRzIEpQQUVudGl0eUNsYXNz\nRW51bSB7CiAgICAgICAgT3JkZXJlZEVsZW1lbnRFbnRpdHkoT3JkZXJlZEVs\nZW1lbnRFbnRpdHkuY2xhc3MpLAogICAgICAgIE9yZGVyZWRPbmVUb01hbnlF\nbnRpdHkoT3JkZXJlZE9uZVRvTWFueUVudGl0eS5jbGFzcyksCiAgICAgICAg\nT3JkZXJlZE1hbnlUb01hbnlFbnRpdHkoT3JkZXJlZE1hbnlUb01hbnlFbnRp\ndHkuY2xhc3MpLAogICAgICAgIFhNTE9yZGVyZWRFbGVtZW50RW50aXR5KFhN\nTE9yZGVyZWRFbGVtZW50RW50aXR5LmNsYXNzKSwKICAgICAgICBYTUxPcmRl\ncmVkT25lVG9NYW55RW50aXR5KFhNTE9yZGVyZWRPbmVUb01hbnlFbnRpdHku\nY2xhc3MpLAogICAgICAgIFhNTE9yZGVyZWRNYW55VG9NYW55RW50aXR5KFhN\nTE9yZGVyZWRNYW55VG9NYW55RW50aXR5LmNsYXNzKSwKICAgICAgICBVbm9y\nZGVyZWROYW1lRW50aXR5KFVub3JkZXJlZE5hbWVFbnRpdHkuY2xhc3MpLAog\nICAgICAgIFhNTFVub3JkZXJlZE5hbWVFbnRpdHkoWE1MVW5vcmRlcmVkTmFt\nZUVudGl0eS5jbGFzcyksCiAgICAgICAgT3JkZXJlZE5hbWVFbnRpdHkoT3Jk\nZXJlZE5hbWVFbnRpdHkuY2xhc3MpOwoKICAgICAgICBwcml2YXRlIENsYXNz\nPD8+IGNsYXp6OwogICAgICAgIHByaXZhdGUgU3RyaW5nIGZ1bGxFbnRpdHlO\nYW1lOwogICAgICAgIHByaXZhdGUgU3RyaW5nIGVudGl0eU5hbWU7CgogICAg\nICAgIEpQUUxJbmRleEVudGl0eUNsYXNzZXMoQ2xhc3M8Pz4gY2xhenopIHsK\nICAgICAgICAgICAgdGhpcy5jbGF6eiA9IGNsYXp6OwogICAgICAgICAgICBm\ndWxsRW50aXR5TmFtZSA9IGNsYXp6LmdldE5hbWUoKTsKICAgICAgICAgICAg\nZW50aXR5TmFtZSA9IGZ1bGxFbnRpdHlOYW1lLnN1YnN0cmluZyhnZXRFbnRp\ndHlDbGFzc05hbWUoKQogICAgICAgICAgICAgICAgLmxhc3RJbmRleE9mKCcu\nJykgKyAxKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBDbGFzczw/PiBn\nZXRFbnRpdHlDbGFzcygpIHsKICAgICAgICAgICAgcmV0dXJuIGNsYXp6Owog\nICAgICAgIH0KCiAgICAgICAgcHVibGljIFN0cmluZyBnZXRFbnRpdHlDbGFz\nc05hbWUoKSB7CiAgICAgICAgICAgIHJldHVybiBmdWxsRW50aXR5TmFtZTsK\nICAgICAgICB9CgogICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0RW50aXR5TmFt\nZSgpIHsKICAgICAgICAgICAgcmV0dXJuIGVudGl0eU5hbWU7CiAgICAgICAg\nfQogICAgfQoKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZ1tdIEVs\nZW1lbnRfTmFtZXMgPSB7ICJBX0VsZW1lbnQiLCAiQl9FbGVtZW50IiwKICAg\nICAgICAiQ19FbGVtZW50IiwgIkRfRWxlbWVudCIsICJFX0VsZW1lbnQiLCAi\nRl9FbGVtZW50IiwgfTsKCiAgICBAT3ZlcnJpZGUKICAgIHByb3RlY3RlZCBT\ndHJpbmcgZ2V0UGVyc2lzdGVuY2VVbml0TmFtZSgpIHsKICAgICAgICAvLyB0\naGlzIHNldHMgdXAgdGhlIHRlc3RjYXNlIGNvZGUgc28gb3VyIEVNRiBpcyBj\ncmVhdGVkIGFuZCBjbGVhbmVkIHVwIGZvciB1cwogICAgICAgIHJldHVybiAi\nSlBRTEluZGV4IjsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2\nb2lkIHNldFVwKCkgewogICAgICAgIHN1cGVyLnNldFVwKENMRUFSX1RBQkxF\nUywgVHJlZU5vZGUuY2xhc3MsIAogICAgICAgICAgICBPcmRlcmVkRWxlbWVu\ndEVudGl0eS5jbGFzcywgVW5vcmRlcmVkTmFtZUVudGl0eS5jbGFzcywKICAg\nICAgICAgICAgT3JkZXJlZE9uZVRvTWFueUVudGl0eS5jbGFzcywgT3JkZXJl\nZE1hbnlUb01hbnlFbnRpdHkuY2xhc3MsCiAgICAgICAgICAgIE9yZGVyZWRO\nYW1lRW50aXR5LmNsYXNzKTsKICAgICAgICAgICAgLy8gWE1MT3JkZXJlZE9u\nZVRvTWFueUVudGl0eS5jbGFzcywgWE1MT3JkZXJlZE1hbnlUb01hbnlFbnRp\ndHkuY2xhc3MsCiAgICAgICAgICAgIC8vIFhNTE9yZGVyZWRFbGVtZW50RW50\naXR5LmNsYXNzLCBYTUxVbm9yZGVyZWROYW1lRW50aXR5LmNsYXNzLAogICAg\nICAgICAgICAvLyBYTUxPcmRlcmVkTmFtZUVudGl0eS5jbGFzcyk7CgogICAg\nICAgIGxvZyA9ICBlbWYuZ2V0Q29uZmlndXJhdGlvbigpLmdldExvZygidGVz\ndCIpOwogICAgfQoKICAgIC8vIG9yaWdpbmFsIHRlc3RjYXNlIGJ5IENhdGFs\naW5hCiAgICBwdWJsaWMgdm9pZCB0ZXN0TzJNVHJlZVF1ZXJ5SW5kZXgoKSB7\nCiAgICAgICAgaW50W10gZmFuT3V0cyA9IHsyLDMsNH07CiAgICAgICAgY3Jl\nYXRlVHJlZU5vZGVFbnRpdGllcyhmYW5PdXRzKTsKICAgICAgICBFbnRpdHlN\nYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAg\nICBTdHJpbmcgcXVlcnkgPSAiU0VMRUNUIGluZGV4KGMpIGZyb20gVHJlZU5v\nZGUgdCwgaW4gKHQuY2hpbGRlcm4pIGMiICsKICAgICAgICAgICAgIiBXSEVS\nRSBpbmRleChjKSA9IDIiOyAKICAgICAgICAKICAgICAgICBMaXN0PE9iamVj\ndD4gcnMgPSBlbS5jcmVhdGVRdWVyeShxdWVyeSkuZ2V0UmVzdWx0TGlzdCgp\nOwogICAgICAgIGZvciAoT2JqZWN0IHQ6IHJzKQogICAgICAgICAgICBhc3Nl\ncnRFcXVhbHMoMiwgSW50ZWdlci5wYXJzZUludCh0LnRvU3RyaW5nKCkpKTsK\nICAgICAgICAKICAgICAgICBlbS5jbG9zZSgpOyAgICAgICAgICAgICAgICAK\nICAgIH0KCiAgICAvLyBUZXN0Y2FzZXMgYWRkZWQgYnkgRG9uYWxkIHdpdGgg\nY29kZSByZXVzZWQgZnJvbSBhbm5vbnhtbCB0ZXN0cyBieSBBbGJlcnQKICAg\nIHB1YmxpYyB2b2lkIHRlc3RPMk1RdWVyeUluZGV4KCkgewogICAgICAgIGNy\nZWF0ZUVudGl0aWVzKEpQUUxJbmRleEVudGl0eUNsYXNzZXMuT3JkZXJlZE9u\nZVRvTWFueUVudGl0eSwgVW5vcmRlcmVkTmFtZUVudGl0eS5jbGFzcyk7CiAg\nICAgICAgdmVyaWZ5RW50aXRpZXMoSlBRTEluZGV4RW50aXR5Q2xhc3Nlcy5P\ncmRlcmVkT25lVG9NYW55RW50aXR5LCBVbm9yZGVyZWROYW1lRW50aXR5LmNs\nYXNzKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0TzJNWE1MUXVlcnlJ\nbmRleCgpIHsKICAgICAgICBjcmVhdGVFbnRpdGllcyhKUFFMSW5kZXhFbnRp\ndHlDbGFzc2VzLlhNTE9yZGVyZWRPbmVUb01hbnlFbnRpdHksIFhNTFVub3Jk\nZXJlZE5hbWVFbnRpdHkuY2xhc3MpOwogICAgICAgIHZlcmlmeUVudGl0aWVz\nKEpQUUxJbmRleEVudGl0eUNsYXNzZXMuWE1MT3JkZXJlZE9uZVRvTWFueUVu\ndGl0eSwgWE1MVW5vcmRlcmVkTmFtZUVudGl0eS5jbGFzcyk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgdGVzdE0yTVF1ZXJ5SW5kZXgoKSB7CiAgICAgICAg\nY3JlYXRlRW50aXRpZXMoSlBRTEluZGV4RW50aXR5Q2xhc3Nlcy5PcmRlcmVk\nTWFueVRvTWFueUVudGl0eSwgT3JkZXJlZE5hbWVFbnRpdHkuY2xhc3MpOwog\nICAgICAgIHZlcmlmeUVudGl0aWVzKEpQUUxJbmRleEVudGl0eUNsYXNzZXMu\nT3JkZXJlZE1hbnlUb01hbnlFbnRpdHksIE9yZGVyZWROYW1lRW50aXR5LmNs\nYXNzKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0TTJNWE1MUXVlcnlJ\nbmRleCgpIHsKICAgICAgICBjcmVhdGVFbnRpdGllcyhKUFFMSW5kZXhFbnRp\ndHlDbGFzc2VzLk9yZGVyZWRNYW55VG9NYW55RW50aXR5LCBYTUxPcmRlcmVk\nTmFtZUVudGl0eS5jbGFzcyk7CiAgICAgICAgdmVyaWZ5RW50aXRpZXMoSlBR\nTEluZGV4RW50aXR5Q2xhc3Nlcy5PcmRlcmVkTWFueVRvTWFueUVudGl0eSwg\nWE1MT3JkZXJlZE5hbWVFbnRpdHkuY2xhc3MpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RFbGVtZW50UXVlcnlJbmRleCgpIHsKICAgICAgICBjcmVh\ndGVFbnRpdGllcyhKUFFMSW5kZXhFbnRpdHlDbGFzc2VzLk9yZGVyZWRFbGVt\nZW50RW50aXR5LCBTdHJpbmcuY2xhc3MpOwogICAgICAgIHZlcmlmeUVudGl0\naWVzKEpQUUxJbmRleEVudGl0eUNsYXNzZXMuT3JkZXJlZEVsZW1lbnRFbnRp\ndHksIFN0cmluZy5jbGFzcyk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVz\ndEVsZW1lbnRYTUxRdWVyeUluZGV4KCkgewogICAgICAgIGNyZWF0ZUVudGl0\naWVzKEpQUUxJbmRleEVudGl0eUNsYXNzZXMuWE1MT3JkZXJlZEVsZW1lbnRF\nbnRpdHksIFN0cmluZy5jbGFzcyk7CiAgICAgICAgdmVyaWZ5RW50aXRpZXMo\nSlBRTEluZGV4RW50aXR5Q2xhc3Nlcy5YTUxPcmRlcmVkRWxlbWVudEVudGl0\neSwgU3RyaW5nLmNsYXNzKTsKICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0\nZSBhbmQgcGVyc2lzdCBhIHVuaWZvcm0gT25lVG9NYW55IHRyZWUgd2l0aCBn\naXZlbiBmYW4gb3V0LgogICAgICovCiAgICBwcml2YXRlIFRyZWVOb2RlIGNy\nZWF0ZVRyZWVOb2RlRW50aXRpZXMoaW50W10gb3JpZ2luYWwpIHsKICAgICAg\nICBUcmVlTm9kZSByb290ID0gbmV3IFRyZWVOb2RlKCk7CiAgICAgICAgcm9v\ndC5jcmVhdGVUcmVlKG9yaWdpbmFsKTsKICAgICAgICBhc3NlcnRBcnJheUVx\ndWFscyhvcmlnaW5hbCwgcm9vdC5nZXRGYW5PdXRzKCkpOwogICAgICAgIAog\nICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFu\nYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsK\nICAgICAgICBlbS5wZXJzaXN0KHJvb3QpOwogICAgICAgIGVtLmdldFRyYW5z\nYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xlYXIoKTsKICAgICAg\nICAKICAgICAgICByZXR1cm4gcm9vdDsKICAgIH0KCiAgICAvKioKICAgICAq\nICBBc3NlcnRzIHRoZSBnaXZlbiBhcnJheXMgaGF2ZSBleGFjdGx5IHNhbWUg\nZWxlbWVudHMgYXQgdGhlIHNhbWUgaW5kZXguCiAgICAgKi8KICAgIHByaXZh\ndGUgdm9pZCBhc3NlcnRBcnJheUVxdWFscyhpbnRbXSBhLCBpbnRbXSBiKSB7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKGEubGVuZ3RoLCBiLmxlbmd0aCk7CiAg\nICAgICAgZm9yIChpbnQgaSA9IDA7IGk8YS5sZW5ndGg7IGkrKykKICAgICAg\nICAgICAgYXNzZXJ0RXF1YWxzKGFbaV0sIGJbaV0pOwogICAgfQogICAgCiAg\nICBwcml2YXRlIDxDLEU+IHZvaWQgY3JlYXRlRW50aXRpZXMoSlBRTEluZGV4\nRW50aXR5Q2xhc3NlcyBlbnRpdHlUeXBlLCBDbGFzczxFPiBlbGVtZW50Q2xh\nc3MpCiAgICB7CiAgICAgICAgaWYgKElPcmRlcmVkRW50aXR5LmNsYXNzLmlz\nQXNzaWduYWJsZUZyb20oZW50aXR5VHlwZS5nZXRFbnRpdHlDbGFzcygpKSkg\newogICAgICAgICAgICBpZiAoSU5hbWVFbnRpdHkuY2xhc3MuaXNBc3NpZ25h\nYmxlRnJvbShlbGVtZW50Q2xhc3MpKSB7CiAgICAgICAgICAgICAgICBsb2cu\ndHJhY2UoIioqIFRlc3QgSU5hbWVFbnRpdHkgbW9kaWZpY2F0aW9ucyBvbiBJ\nT3JkZXJlZEVudGl0eS4iKTsKICAgICAgICAgICAgICAgIGNyZWF0ZU8yTUVu\ndGl0aWVzKGVudGl0eVR5cGUsIChDbGFzczxJTmFtZUVudGl0eT4pZWxlbWVu\ndENsYXNzKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChJQ29sdW1uRW50aXR5\nLmNsYXNzLmlzQXNzaWduYWJsZUZyb20oZWxlbWVudENsYXNzKSkgewogICAg\nICAgICAgICAgICAgbG9nLnRyYWNlKCIqKiBUZXN0IElDb2x1bW5FbnRpdHkg\nbW9kaWZpY2F0aW9ucyBvbiBJT3JkZXJlZEVudGl0eS4iKTsKICAgICAgICAg\nICAgICAgIGNyZWF0ZU0yTUVudGl0aWVzKGVudGl0eVR5cGUsIChDbGFzczxJ\nQ29sdW1uRW50aXR5PillbGVtZW50Q2xhc3MpOwogICAgICAgICAgICB9IGVs\nc2UgewogICAgICAgICAgICAgICAgZmFpbCgiY3JlYXRlRW50aXRpZXMoSU9y\nZGVyZWRFbnRpdHkpIC0gVW5leHBlY3RlZCBlbGVtZW50Q2xhc3M9IiArIGVs\nZW1lbnRDbGFzcy5nZXRTaW1wbGVOYW1lKCkpOwogICAgICAgICAgICB9CiAg\nICAgICAgfSBlbHNlIGlmIChJT3JkZXJlZEVsZW1lbnRzLmNsYXNzLmlzQXNz\naWduYWJsZUZyb20oZW50aXR5VHlwZS5nZXRFbnRpdHlDbGFzcygpKSkgewog\nICAgICAgICAgICBpZiAoU3RyaW5nLmNsYXNzLmlzQXNzaWduYWJsZUZyb20o\nZWxlbWVudENsYXNzKSkgewogICAgICAgICAgICAgICAgbG9nLnRyYWNlKCIq\nKiBUZXN0IFN0cmluZyBtb2RpZmljYXRpb25zIG9uIElPcmRlcmVkRWxlbWVu\ndHMuIik7CiAgICAgICAgICAgICAgICBjcmVhdGVPcmRlcmVkRWxlbWVudHMo\nZW50aXR5VHlwZSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAg\nICAgICBmYWlsKCJjcmVhdGVFbnRpdGllcyhJT3JkZXJlZEVsZW1lbnRzKSAt\nIFVuZXhwZWN0ZWQgZWxlbWVudENsYXNzPSIgKyBlbGVtZW50Q2xhc3MuZ2V0\nU2ltcGxlTmFtZSgpKTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7\nCiAgICAgICAgICAgIGZhaWwoImNyZWF0ZUVudGl0aWVzKCkgLSBVbmV4cGVj\ndGVkIGVudGl0eVR5cGU9IiArIGVudGl0eVR5cGUuZ2V0RW50aXR5TmFtZSgp\nKTsgICAgICAgICAgICAKICAgICAgICB9CiAgICB9CiAgICAgICAgCiAgICBw\ncml2YXRlIHZvaWQgY3JlYXRlTzJNRW50aXRpZXMoSlBRTEluZGV4RW50aXR5\nQ2xhc3NlcyBlbnRpdHlUeXBlLCBDbGFzczxJTmFtZUVudGl0eT4gZWxlbWVu\ndENsYXNzKQogICAgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBudWxs\nOwogICAgICAgIAogICAgICAgIHRyeSB7CiAgICAgICAgICAgIENsYXNzPElP\ncmRlcmVkRW50aXR5PiBlbnRpdHlDbGFzcyA9CiAgICAgICAgICAgICAgICAo\nQ2xhc3M8SU9yZGVyZWRFbnRpdHk+KUNsYXNzLmZvck5hbWUoZW50aXR5VHlw\nZS5nZXRFbnRpdHlDbGFzc05hbWUoKSk7CiAgICAgICAgICAgIFN0cmluZyBl\nbnRpdHlDbGFzc05hbWUgPSBlbnRpdHlUeXBlLmdldEVudGl0eU5hbWUoKTsK\nICAgICAgICAgICAgU3RyaW5nIGVsZW1lbnRDbGFzc05hbWUgPSBlbGVtZW50\nQ2xhc3MuZ2V0TmFtZSgpLnN1YnN0cmluZygKICAgICAgICAgICAgICAgIGVs\nZW1lbnRDbGFzcy5nZXROYW1lKCkubGFzdEluZGV4T2YoJy4nKSArIDEpOwog\nICAgICAgICAgICBJbnRlZ2VyIGVudGl0eUlkID0gMTsKICAgICAgICAgICAg\nCiAgICAgICAgICAgIC8vIGNyZWF0ZSB0aGUgZW50aXR5CiAgICAgICAgICAg\nIElPcmRlcmVkRW50aXR5IG5ld0VudGl0eSA9IChJT3JkZXJlZEVudGl0eSlj\nb25zdHJ1Y3ROZXdFbnRpdHlPYmplY3QoZW50aXR5VHlwZSk7CiAgICAgICAg\nICAgIG5ld0VudGl0eS5zZXRJZChlbnRpdHlJZCk7CiAgICAgICAgICAgIAog\nICAgICAgICAgICAvLyBjcmVhdGUgdGhlIGVsZW1lbnRzIHRvIGFkZAogICAg\nICAgICAgICBDb25zdHJ1Y3RvcjxJTmFtZUVudGl0eT4gZWxlbWVudENvbnN0\ncmN0b3IgPSBlbGVtZW50Q2xhc3MuZ2V0Q29uc3RydWN0b3IoU3RyaW5nLmNs\nYXNzKTsKICAgICAgICAgICAgTGlzdDxJTmFtZUVudGl0eT4gbmV3RWxlbWVu\ndHMgPSBuZXcgQXJyYXlMaXN0PElOYW1lRW50aXR5PigpOwogICAgICAgICAg\nICBmb3IgKGludCBpPTA7IGk8RWxlbWVudF9OYW1lcy5sZW5ndGg7IGkrKykg\newogICAgICAgICAgICAgICAgbmV3RWxlbWVudHMuYWRkKGVsZW1lbnRDb25z\ndHJjdG9yLm5ld0luc3RhbmNlKEVsZW1lbnRfTmFtZXNbaV0pKTsKICAgICAg\nICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgLy8gYWRkIHRoZSBl\nbnRpdGllcwogICAgICAgICAgICBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4o\nKTsKICAgICAgICAgICAgZm9yIChJTmFtZUVudGl0eSBuZXdFbGVtZW50IDog\nbmV3RWxlbWVudHMpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGVt\nLnBlcnNpc3QobmV3RWxlbWVudCk7CiAgICAgICAgICAgICAgICBuZXdFbnRp\ndHkuYWRkRW50aXR5KChJTmFtZUVudGl0eSluZXdFbGVtZW50KTsKICAgICAg\nICAgICAgfQogICAgICAgICAgICBlbS5wZXJzaXN0KG5ld0VudGl0eSk7CiAg\nICAgICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAg\nICAgICAgIGVtLmNsZWFyKCk7CgogICAgICAgICAgICAvLyB2ZXJpZnkgdGhl\nIGVudGl0eSB3YXMgc3RvcmVkCiAgICAgICAgICAgIElPcmRlcmVkRW50aXR5\nIGZpbmRFbnRpdHkgPSBlbS5maW5kKGVudGl0eUNsYXNzLCBlbnRpdHlJZCk7\nCiAgICAgICAgICAgIGFzc2VydE5vdE51bGwoIkZvdW5kIGVudGl0eSBqdXN0\nIGNyZWF0ZWQiLCBmaW5kRW50aXR5KTsKICAgICAgICAgICAgYXNzZXJ0RXF1\nYWxzKCJWZXJpZnkgZW50aXR5IGlkID0gIiArIGVudGl0eUlkLCBlbnRpdHlJ\nZC5pbnRWYWx1ZSgpLCBmaW5kRW50aXR5LmdldElkKCkpOwogICAgICAgICAg\nICBhc3NlcnRFcXVhbHMoIlZlcmlmeSBlbnRpdHkgbmFtZSA9ICIgKyBlbnRp\ndHlDbGFzcy5nZXROYW1lKCksIGVudGl0eUNsYXNzLmdldE5hbWUoKSwKICAg\nICAgICAgICAgICAgIGZpbmRFbnRpdHkuZ2V0Q2xhc3MoKS5nZXROYW1lKCkp\nOwoKICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUgdCkgewogICAgICAgICAg\nICBsb2cuZXJyb3IodCk7CiAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1l\nRXhjZXB0aW9uKHQpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAg\nIGlmIChlbSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBpZiAoZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5pc0FjdGl2ZSgpKSB7CiAgICAgICAgICAgICAgICAg\nICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5yb2xsYmFjaygpOwogICAgICAgICAg\nICAgICAgfQogICAgICAgICAgICAgICAgZW0uY2xvc2UoKTsKICAgICAgICAg\nICAgICAgIGVtID0gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAg\nIH0KICAgIAogICAgcHJpdmF0ZSB2b2lkIGNyZWF0ZU0yTUVudGl0aWVzKEpQ\nUUxJbmRleEVudGl0eUNsYXNzZXMgZW50aXR5VHlwZSwgQ2xhc3M8SUNvbHVt\nbkVudGl0eT4gZWxlbWVudENsYXNzKQogICAgewogICAgICAgIEVudGl0eU1h\nbmFnZXIgZW0gPSBudWxsOwogICAgICAgIAogICAgICAgIHRyeSB7CiAgICAg\nICAgICAgIENsYXNzPElPcmRlcmVkRW50aXR5PiBlbnRpdHlDbGFzcyA9CiAg\nICAgICAgICAgICAgICAoQ2xhc3M8SU9yZGVyZWRFbnRpdHk+KUNsYXNzLmZv\nck5hbWUoZW50aXR5VHlwZS5nZXRFbnRpdHlDbGFzc05hbWUoKSk7CiAgICAg\nICAgICAgIFN0cmluZyBlbnRpdHlDbGFzc05hbWUgPSBlbnRpdHlUeXBlLmdl\ndEVudGl0eU5hbWUoKTsKICAgICAgICAgICAgU3RyaW5nIGVsZW1lbnRDbGFz\nc05hbWUgPSBlbGVtZW50Q2xhc3MuZ2V0TmFtZSgpLnN1YnN0cmluZygKICAg\nICAgICAgICAgICAgIGVsZW1lbnRDbGFzcy5nZXROYW1lKCkubGFzdEluZGV4\nT2YoJy4nKSArIDEpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gY3Jl\nYXRlIHRoZSBFTSBhbmQgdHJhbnNhY3Rpb24KICAgICAgICAgICAgZW0gPSBl\nbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgICAgICBlbS5nZXRU\ncmFuc2FjdGlvbigpLmJlZ2luKCk7CgogICAgICAgICAgICAvLyBjcmVhdGUg\nYW5kIHBlcnNpc3QgdGhlIGVudGl0aWVzCiAgICAgICAgICAgIExpc3Q8SU9y\nZGVyZWRFbnRpdHk+IG5ld0VudGl0aWVzID0gbmV3IEFycmF5TGlzdDxJT3Jk\nZXJlZEVudGl0eT4oKTsKICAgICAgICAgICAgZm9yIChpbnQgaT0wOyBpPDM7\nIGkrKykgewogICAgICAgICAgICAgICAgSU9yZGVyZWRFbnRpdHkgbmV3RW50\naXR5ID0gKElPcmRlcmVkRW50aXR5KWNvbnN0cnVjdE5ld0VudGl0eU9iamVj\ndChlbnRpdHlUeXBlKTsKICAgICAgICAgICAgICAgIG5ld0VudGl0eS5zZXRJ\nZChpKTsKICAgICAgICAgICAgICAgIGVtLnBlcnNpc3QobmV3RW50aXR5KTsK\nICAgICAgICAgICAgICAgIG5ld0VudGl0aWVzLmFkZChuZXdFbnRpdHkpOwog\nICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBjcmVh\ndGUgYW5kIHBlcnNpc3QgdGhlIGVsZW1lbnRzCiAgICAgICAgICAgIENvbnN0\ncnVjdG9yPElDb2x1bW5FbnRpdHk+IGVsZW1lbnRDb25zdHJjdG9yID0gZWxl\nbWVudENsYXNzLmdldENvbnN0cnVjdG9yKFN0cmluZy5jbGFzcyk7CiAgICAg\nICAgICAgIExpc3Q8SU5hbWVFbnRpdHk+IG5ld0VsZW1lbnRzID0gbmV3IEFy\ncmF5TGlzdDxJTmFtZUVudGl0eT4oKTsKICAgICAgICAgICAgSUNvbHVtbkVu\ndGl0eSBuZXdFbGVtZW50OwogICAgICAgICAgICBmb3IgKGludCBpPTA7IGk8\nRWxlbWVudF9OYW1lcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAg\nbmV3RWxlbWVudCA9IGVsZW1lbnRDb25zdHJjdG9yLm5ld0luc3RhbmNlKEVs\nZW1lbnRfTmFtZXNbaV0pOwogICAgICAgICAgICAgICAgLy8gYWRkIHBhcmVu\ndCByZWxhdGlvbnNoaXBzCiAgICAgICAgICAgICAgICBuZXdFbGVtZW50LnNl\ndEVudGl0aWVzKG5ld0VudGl0aWVzKTsKICAgICAgICAgICAgICAgIGVtLnBl\ncnNpc3QobmV3RWxlbWVudCk7CiAgICAgICAgICAgICAgICBuZXdFbGVtZW50\ncy5hZGQobmV3RWxlbWVudCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAg\nCiAgICAgICAgICAgIC8vIHVwZGF0ZSBlbnRpdGllcyB3aXRoIGVsZW1lbnRz\nCiAgICAgICAgICAgIGZvciAoSU9yZGVyZWRFbnRpdHkgbmV3RW50aXR5IDog\nbmV3RW50aXRpZXMpIHsKICAgICAgICAgICAgICAgIG5ld0VudGl0eS5zZXRF\nbnRpdGllcyhuZXdFbGVtZW50cyk7CiAgICAgICAgICAgICAgICBlbS5wZXJz\naXN0KG5ld0VudGl0eSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICAgICAgZW0uY2xl\nYXIoKTsKCiAgICAgICAgICAgIC8vIHZlcmlmeSB0aGUgZW50aXRpZXMgd2Vy\nZSBzdG9yZWQKICAgICAgICAgICAgZm9yIChpbnQgaT0wOyBpPEVsZW1lbnRf\nTmFtZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIElPcmRlcmVk\nRW50aXR5IGZpbmRFbnRpdHkgPSBlbS5maW5kKGVudGl0eUNsYXNzLCBpKTsK\nICAgICAgICAgICAgICAgIGFzc2VydE5vdE51bGwoIkZvdW5kIGVudGl0eSBq\ndXN0IGNyZWF0ZWQiLCBmaW5kRW50aXR5KTsKICAgICAgICAgICAgICAgIGFz\nc2VydEVxdWFscygiVmVyaWZ5IGVudGl0eSBpZCA9ICIgKyBpLCBpLCBmaW5k\nRW50aXR5LmdldElkKCkpOwogICAgICAgICAgICAgICAgYXNzZXJ0RXF1YWxz\nKCJWZXJpZnkgZW50aXR5IG5hbWUgPSAiICsgZW50aXR5Q2xhc3MuZ2V0TmFt\nZSgpLCBlbnRpdHlDbGFzcy5nZXROYW1lKCksCiAgICAgICAgICAgICAgICAg\nICAgZmluZEVudGl0eS5nZXRDbGFzcygpLmdldE5hbWUoKSk7CiAgICAgICAg\nICAgIH0KICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUgdCkgewogICAgICAg\nICAgICBsb2cuZXJyb3IodCk7CiAgICAgICAgICAgIHRocm93IG5ldyBSdW50\naW1lRXhjZXB0aW9uKHQpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAg\nICAgIGlmIChlbSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBpZiAoZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5pc0FjdGl2ZSgpKSB7CiAgICAgICAgICAgICAg\nICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5yb2xsYmFjaygpOwogICAgICAg\nICAgICAgICAgfQogICAgICAgICAgICAgICAgZW0uY2xvc2UoKTsKICAgICAg\nICAgICAgICAgIGVtID0gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgIH0K\nICAgIH0KICAgIAogICAgcHJpdmF0ZSB2b2lkIGNyZWF0ZU9yZGVyZWRFbGVt\nZW50cyhKUFFMSW5kZXhFbnRpdHlDbGFzc2VzIGVudGl0eVR5cGUpCiAgICB7\nCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IG51bGw7CiAgICAgICAgCiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgQ2xhc3M8SU9yZGVyZWRFbGVtZW50\ncz4gZW50aXR5Q2xhc3MgPQogICAgICAgICAgICAgICAgKENsYXNzPElPcmRl\ncmVkRWxlbWVudHM+KUNsYXNzLmZvck5hbWUoZW50aXR5VHlwZS5nZXRFbnRp\ndHlDbGFzc05hbWUoKSk7CiAgICAgICAgICAgIFN0cmluZyBlbnRpdHlDbGFz\nc05hbWUgPSBlbnRpdHlUeXBlLmdldEVudGl0eU5hbWUoKTsKICAgICAgICAg\nICAgSW50ZWdlciBlbnRpdHlJZCA9IDE7CiAgICAgICAgICAgIAogICAgICAg\nICAgICBJT3JkZXJlZEVsZW1lbnRzIG5ld0VudGl0eSA9IChJT3JkZXJlZEVs\nZW1lbnRzKWNvbnN0cnVjdE5ld0VudGl0eU9iamVjdChlbnRpdHlUeXBlKTsK\nICAgICAgICAgICAgbmV3RW50aXR5LnNldElkKGVudGl0eUlkKTsKICAgICAg\nICAgICAgTGlzdDxTdHJpbmc+IG5hbWVzTGlzdCA9IG5ldyBBcnJheUxpc3Q8\nU3RyaW5nPigpOwogICAgICAgICAgICBmb3IgKGludCBpPTA7IGk8RWxlbWVu\ndF9OYW1lcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgbmFtZXNM\naXN0LmFkZChFbGVtZW50X05hbWVzW2ldKTsKICAgICAgICAgICAgfQogICAg\nICAgICAgICBuZXdFbnRpdHkuc2V0TGlzdEVsZW1lbnRzKG5hbWVzTGlzdCk7\nCiAgICAgICAgICAgIC8vIGFkZCB0aGUgZW50aXR5CiAgICAgICAgICAgIGVt\nID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICAgICAgZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgICAgICBlbS5wZXJz\naXN0KG5ld0VudGl0eSk7CiAgICAgICAgICAgIGVtLmdldFRyYW5zYWN0aW9u\nKCkuY29tbWl0KCk7CiAgICAgICAgICAgIGVtLmNsZWFyKCk7CgogICAgICAg\nICAgICAvLyB2ZXJpZnkgdGhlIGVudGl0eSB3YXMgc3RvcmVkCiAgICAgICAg\nICAgIGxvZy50cmFjZSgiVmVyaWZpbmcgdGhlIGVudGl0eSB3YXMgc3RvcmVk\nIik7CiAgICAgICAgICAgIElPcmRlcmVkRWxlbWVudHMgZmluZEVudGl0eSA9\nIGVtLmZpbmQoZW50aXR5Q2xhc3MsIGVudGl0eUlkKTsKICAgICAgICAgICAg\nYXNzZXJ0Tm90TnVsbCgiRm91bmQgZW50aXR5IGp1c3QgY3JlYXRlZCIsIGZp\nbmRFbnRpdHkpOwogICAgICAgICAgICBhc3NlcnRFcXVhbHMoIlZlcmlmeSBl\nbnRpdHkgaWQgPSAiICsgZW50aXR5SWQsIGVudGl0eUlkLmludFZhbHVlKCks\nIGZpbmRFbnRpdHkuZ2V0SWQoKSk7CiAgICAgICAgICAgIGFzc2VydEVxdWFs\ncygiVmVyaWZ5IGVudGl0eSBuYW1lID0gIiArIGVudGl0eUNsYXNzLmdldE5h\nbWUoKSwgZW50aXR5Q2xhc3MuZ2V0TmFtZSgpLAogICAgICAgICAgICAgICAg\nZmluZEVudGl0eS5nZXRDbGFzcygpLmdldE5hbWUoKSk7CgogICAgICAgIH0g\nY2F0Y2ggKFRocm93YWJsZSB0KSB7CiAgICAgICAgICAgIGxvZy5lcnJvcih0\nKTsKICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24odCk7\nCiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgaWYgKGVtICE9IG51\nbGwpIHsKICAgICAgICAgICAgICAgIGlmIChlbS5nZXRUcmFuc2FjdGlvbigp\nLmlzQWN0aXZlKCkpIHsKICAgICAgICAgICAgICAgICAgICBlbS5nZXRUcmFu\nc2FjdGlvbigpLnJvbGxiYWNrKCk7CiAgICAgICAgICAgICAgICB9CiAgICAg\nICAgICAgICAgICBlbS5jbG9zZSgpOwogICAgICAgICAgICAgICAgZW0gPSBu\ndWxsOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgCiAgICBw\ncml2YXRlIDxDLEU+IHZvaWQgdmVyaWZ5RW50aXRpZXMoSlBRTEluZGV4RW50\naXR5Q2xhc3NlcyBlbnRpdHlUeXBlLCBDbGFzczxFPiBlbGVtZW50Q2xhc3Mp\nCiAgICB7CiAgICAgICAgaWYgKElPcmRlcmVkRW50aXR5LmNsYXNzLmlzQXNz\naWduYWJsZUZyb20oZW50aXR5VHlwZS5nZXRFbnRpdHlDbGFzcygpKSkgewog\nICAgICAgICAgICBpZiAoSU5hbWVFbnRpdHkuY2xhc3MuaXNBc3NpZ25hYmxl\nRnJvbShlbGVtZW50Q2xhc3MpKSB7CiAgICAgICAgICAgICAgICBsb2cudHJh\nY2UoIioqIFZlcmlmeSBJTmFtZUVudGl0eSBtb2RpZmljYXRpb25zIG9uIElP\ncmRlcmVkRW50aXR5LiIpOwogICAgICAgICAgICAgICAgdmVyaWZ5TzJNRW50\naXRpZXMoZW50aXR5VHlwZSwgKENsYXNzPElOYW1lRW50aXR5PillbGVtZW50\nQ2xhc3MpOwogICAgICAgICAgICB9IGVsc2UgaWYgKElDb2x1bW5FbnRpdHku\nY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShlbGVtZW50Q2xhc3MpKSB7CiAgICAg\nICAgICAgICAgICBsb2cudHJhY2UoIioqIFZlcmlmeSBJQ29sdW1uRW50aXR5\nIG1vZGlmaWNhdGlvbnMgb24gSU9yZGVyZWRFbnRpdHkuIik7CiAgICAgICAg\nICAgICAgICB2ZXJpZnlNMk1FbnRpdGllcyhlbnRpdHlUeXBlLCAoQ2xhc3M8\nSUNvbHVtbkVudGl0eT4pZWxlbWVudENsYXNzKTsKICAgICAgICAgICAgfSBl\nbHNlIHsKICAgICAgICAgICAgICAgIGZhaWwoInZlcmlmeUVudGl0aWVzKElP\ncmRlcmVkRW50aXR5KSAtIFVuZXhwZWN0ZWQgZWxlbWVudENsYXNzPSIgKyBl\nbGVtZW50Q2xhc3MuZ2V0U2ltcGxlTmFtZSgpKTsKICAgICAgICAgICAgfQog\nICAgICAgIH0gZWxzZSBpZiAoSU9yZGVyZWRFbGVtZW50cy5jbGFzcy5pc0Fz\nc2lnbmFibGVGcm9tKGVudGl0eVR5cGUuZ2V0RW50aXR5Q2xhc3MoKSkpIHsK\nICAgICAgICAgICAgaWYgKFN0cmluZy5jbGFzcy5pc0Fzc2lnbmFibGVGcm9t\nKGVsZW1lbnRDbGFzcykpIHsKICAgICAgICAgICAgICAgIGxvZy50cmFjZSgi\nKiogVGVzdCBTdHJpbmcgbW9kaWZpY2F0aW9ucyBvbiBJT3JkZXJlZEVsZW1l\nbnRzLiIpOwogICAgICAgICAgICAgICAgdmVyaWZ5T3JkZXJlZEVsZW1lbnRz\nKGVudGl0eVR5cGUpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAg\nICAgICAgZmFpbCgidmVyaWZ5RW50aXRpZXMoSU9yZGVyZWRFbGVtZW50cykg\nLSBVbmV4cGVjdGVkIGVsZW1lbnRDbGFzcz0iICsgZWxlbWVudENsYXNzLmdl\ndFNpbXBsZU5hbWUoKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2Ug\newogICAgICAgICAgICBmYWlsKCJ2ZXJpZnlFbnRpdGllcygpIC0gVW5leHBl\nY3RlZCBlbnRpdHlUeXBlPSIgKyBlbnRpdHlUeXBlLmdldEVudGl0eU5hbWUo\nKSk7ICAgICAgICAgICAgCiAgICAgICAgfQogICAgfQogICAgCiAgICBwcml2\nYXRlIDxFPiB2b2lkIHZlcmlmeU8yTUVudGl0aWVzKEpQUUxJbmRleEVudGl0\neUNsYXNzZXMgZW50aXR5VHlwZSwgQ2xhc3M8SU5hbWVFbnRpdHk+IGVsZW1l\nbnRDbGFzcykKICAgIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gbnVs\nbDsKICAgICAgICAKICAgICAgICB0cnkgewogICAgICAgICAgICBDbGFzczxJ\nT3JkZXJlZEVudGl0eT4gZW50aXR5Q2xhc3MgPSAoQ2xhc3M8SU9yZGVyZWRF\nbnRpdHk+KUNsYXNzLmZvck5hbWUoZW50aXR5VHlwZS5nZXRFbnRpdHlDbGFz\nc05hbWUoKSk7CiAgICAgICAgICAgIFN0cmluZyBlbnRpdHlDbGFzc05hbWUg\nPSBlbnRpdHlUeXBlLmdldEVudGl0eU5hbWUoKTsKICAgICAgICAgICAgZW50\naXR5Q2xhc3NOYW1lID0gZW50aXR5Q2xhc3NOYW1lLnN1YnN0cmluZyhlbnRp\ndHlDbGFzc05hbWUubGFzdEluZGV4T2YoJy4nKSArIDEpOwoKICAgICAgICAg\nICAgaWYgKGxvZy5pc1RyYWNlRW5hYmxlZCgpKSB7CiAgICAgICAgICAgICAg\nICBsb2cudHJhY2UoIlF1ZXJ5ICIgKyBlbnRpdHlDbGFzc05hbWUgKyAiIGFu\nZCB2ZXJpZnkgJ2VudGl0aWVzJyBjb2xsZWN0aW9uIGhhcyAiCiAgICAgICAg\nICAgICAgICAgICAgKyBFbGVtZW50X05hbWVzLmxlbmd0aCArICIgZWxlbWVu\ndHMgaW4gdGhpcyBvcmRlcjogIgogICAgICAgICAgICAgICAgICAgICsgQXJy\nYXlzLnRvU3RyaW5nKEVsZW1lbnRfTmFtZXMpKTsKICAgICAgICAgICAgfQog\nICAgICAgICAgICAKICAgICAgICAgICAgZW0gPSBlbWYuY3JlYXRlRW50aXR5\nTWFuYWdlcigpOwogICAgICAgICAgICBlbS5jbGVhcigpOwogICAgICAgICAg\nICBpbnQgaWR4ID0gMDsKICAgICAgICAgICAgZm9yIChTdHJpbmcgZXhwZWN0\nZWRFbnRpdHlOYW1lIDogRWxlbWVudF9OYW1lcykgewogICAgICAgICAgICAg\nICAgUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgdyBmcm9tICIg\nKyBlbnRpdHlDbGFzc05hbWUKICAgICAgICAgICAgICAgICAgICArICIgbyBq\nb2luIG8uZW50aXRpZXMgdyB3aGVyZSBpbmRleCh3KSA9ICIgKyBpZHgpOwog\nICAgICAgICAgICAgICAgTGlzdDxFPiByZXMgPSAoTGlzdDxFPilxLmdldFJl\nc3VsdExpc3QoKTsKICAgICAgICAgICAgICAgIGFzc2VydEVxdWFscygiICBW\nZXJpZnkgcXVlcnkgcmV0dXJucyAxIGVsZW1lbnQgZm9yIGluZGV4ICIgKyBp\nZHgsIDEsIHJlcy5zaXplKCkpOwogICAgICAgICAgICAgICAgaWYgKHJlcy5z\naXplKCkgPT0gMSkgewogICAgICAgICAgICAgICAgICAgIE9iamVjdCBvbyA9\nIHJlcy5nZXQoMCk7CiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0RXF1YWxz\nKCIgIFZlcmlmeSBlbGVtZW50IHR5cGUgaXMgIiArIGVsZW1lbnRDbGFzcy5n\nZXROYW1lKCksIGVsZW1lbnRDbGFzcy5nZXROYW1lKCksCiAgICAgICAgICAg\nICAgICAgICAgICAgIG9vLmdldENsYXNzKCkuZ2V0TmFtZSgpKTsKICAgICAg\nICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBT\ndHJpbmcgbmFtZSA9IChTdHJpbmcpIGVsZW1lbnRDbGFzcy5nZXRNZXRob2Qo\nImdldE5hbWUiKS5pbnZva2Uob28pOwogICAgICAgICAgICAgICAgICAgICAg\nICBhc3NlcnRFcXVhbHMoIiAgVmVyaWZ5IGVsZW1lbnQgdmFsdWUgaXMgJyIK\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgZXhwZWN0ZWRFbnRpdHlO\nYW1lICsgIiciLCBleHBlY3RlZEVudGl0eU5hbWUsIG5hbWUpOwogICAgICAg\nICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAg\nICAgICAgICAgICAgICAgIGxvZy5lcnJvcigiICBDYXVnaHQgdW5leHBlY3Rl\nZCBleGNlcHRpb246IiArIGUuZ2V0TWVzc2FnZSgpKTsKICAgICAgICAgICAg\nICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oZSk7CiAg\nICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAg\nICAgICAgICAgKytpZHg7CiAgICAgICAgICAgIH0KICAgICAgICB9IGNhdGNo\nIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBsb2cuZXJyb3IoZSk7CiAg\nICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKGUpOwogICAg\nICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIGlmIChlbSAhPSBudWxsKSB7\nCiAgICAgICAgICAgICAgICBlbS5jbG9zZSgpOwogICAgICAgICAgICAgICAg\nZW0gPSBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAg\nCiAgICBwcml2YXRlIDxFPiB2b2lkIHZlcmlmeU0yTUVudGl0aWVzKEpQUUxJ\nbmRleEVudGl0eUNsYXNzZXMgZW50aXR5VHlwZSwgQ2xhc3M8SUNvbHVtbkVu\ndGl0eT4gZWxlbWVudENsYXNzKQogICAgewogICAgICAgIEVudGl0eU1hbmFn\nZXIgZW0gPSBudWxsOwogICAgICAgIAogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIENsYXNzPElPcmRlcmVkRW50aXR5PiBlbnRpdHlDbGFzcyA9IChDbGFz\nczxJT3JkZXJlZEVudGl0eT4pQ2xhc3MuZm9yTmFtZShlbnRpdHlUeXBlLmdl\ndEVudGl0eUNsYXNzTmFtZSgpKTsKICAgICAgICAgICAgU3RyaW5nIGVudGl0\neUNsYXNzTmFtZSA9IGVudGl0eVR5cGUuZ2V0RW50aXR5TmFtZSgpOwogICAg\nICAgICAgICBlbnRpdHlDbGFzc05hbWUgPSBlbnRpdHlDbGFzc05hbWUuc3Vi\nc3RyaW5nKGVudGl0eUNsYXNzTmFtZS5sYXN0SW5kZXhPZignLicpICsgMSk7\nCiAgICAgICAgICAgIFN0cmluZyBlbGVtZW50Q2xhc3NOYW1lID0gZW50aXR5\nVHlwZS5nZXRFbnRpdHlOYW1lKCk7CiAgICAgICAgICAgIGVsZW1lbnRDbGFz\nc05hbWUgPSBlbGVtZW50Q2xhc3NOYW1lLnN1YnN0cmluZyhlbGVtZW50Q2xh\nc3NOYW1lLmxhc3RJbmRleE9mKCcuJykgKyAxKTsKCiAgICAgICAgICAgIGlm\nIChsb2cuaXNUcmFjZUVuYWJsZWQoKSkgewogICAgICAgICAgICAgICAgbG9n\nLnRyYWNlKCJRdWVyeSAiICsgZW50aXR5Q2xhc3NOYW1lICsgIiBhbmQgdmVy\naWZ5ICdlbnRpdGllcycgY29sbGVjdGlvbiBoYXMgIgogICAgICAgICAgICAg\nICAgICAgICsgRWxlbWVudF9OYW1lcy5sZW5ndGggKyAiIGVsZW1lbnRzIGlu\nIHRoaXMgb3JkZXI6ICIKICAgICAgICAgICAgICAgICAgICArIEFycmF5cy50\nb1N0cmluZyhFbGVtZW50X05hbWVzKSk7CiAgICAgICAgICAgIH0KICAgICAg\nICAgICAgCiAgICAgICAgICAgIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsKICAgICAgICAgICAgZW0uY2xlYXIoKTsKICAgICAgICAgICAgaW50\nIGlkeCA9IDAsIGlkeDIgPSAwOwogICAgICAgICAgICBmb3IgKFN0cmluZyBl\neHBlY3RlZEVudGl0eU5hbWUgOiBFbGVtZW50X05hbWVzKSB7CiAgICAgICAg\nICAgICAgICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnkoInNlbGVjdCB3IGZy\nb20gIiArIGVudGl0eUNsYXNzTmFtZQogICAgICAgICAgICAgICAgICAgICsg\nIiBvIGpvaW4gby5lbnRpdGllcyB3IHdoZXJlIGluZGV4KHcpID0gIiArIGlk\neCk7CiAgICAgICAgICAgICAgICBMaXN0PEU+IHJlcyA9IChMaXN0PEU+KXEu\nZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgICAgICAgICAgYXNzZXJ0RXF1YWxz\nKCIgIFZlcmlmeSBxdWVyeSByZXR1cm5zIDEgZWxlbWVudCBmb3IgaW5kZXgg\nIiArIGlkeCwgMSwgcmVzLnNpemUoKSk7CiAgICAgICAgICAgICAgICBpZiAo\ncmVzLnNpemUoKSA9PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgT2JqZWN0\nIG9vID0gcmVzLmdldCgwKTsKICAgICAgICAgICAgICAgICAgICBhc3NlcnRF\ncXVhbHMoIiAgVmVyaWZ5IGVsZW1lbnQgdHlwZSBpcyAiICsgZWxlbWVudENs\nYXNzLmdldE5hbWUoKSwgZWxlbWVudENsYXNzLmdldE5hbWUoKSwKICAgICAg\nICAgICAgICAgICAgICAgICAgb28uZ2V0Q2xhc3MoKS5nZXROYW1lKCkpOwog\nICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAg\nICAgIFN0cmluZyBuYW1lID0gKFN0cmluZykgZWxlbWVudENsYXNzLmdldE1l\ndGhvZCgiZ2V0TmFtZSIpLmludm9rZShvbyk7CiAgICAgICAgICAgICAgICAg\nICAgICAgIGFzc2VydEVxdWFscygiICBWZXJpZnkgZWxlbWVudCB2YWx1ZSBp\ncyAnIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBleHBlY3RlZEVu\ndGl0eU5hbWUgKyAiJyIsIGV4cGVjdGVkRW50aXR5TmFtZSwgbmFtZSk7CiAg\nICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAg\nICBpZiAobG9nLmlzVHJhY2VFbmFibGVkKCkpIHsKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgIGxvZy50cmFjZSgiUXVlcnkgIiArIGVsZW1lbnRDbGFz\nc05hbWUgKyAiIGFuZCB2ZXJpZnkgJ2VudGl0aWVzJyBjb2xsZWN0aW9uIGNv\nbnRlbnQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAg\nICAgICAgICAgICAgICBRdWVyeSBxMiA9IGVtLmNyZWF0ZVF1ZXJ5KCJzZWxl\nY3QgdyBmcm9tICIgKyBlbGVtZW50Q2xhc3NOYW1lCiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICArICIgbyBqb2luIG8uZW50aXRpZXMgdyB3aGVyZSBp\nbmRleCh3KSA9ICIgKyBpZHgyKTsKICAgICAgICAgICAgICAgICAgICAgICAg\nTGlzdDxFPiByZXMyID0gKExpc3Q8RT4pcS5nZXRSZXN1bHRMaXN0KCk7CiAg\nICAgICAgICAgICAgICAgICAgICAgIGFzc2VydEVxdWFscygiICBWZXJpZnkg\ncXVlcnkgcmV0dXJucyAxIGVudGl0eSBmb3IgaW5kZXggIiArIGlkeDIsIDEs\nIHJlczIuc2l6ZSgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJl\nczIuc2l6ZSgpID09IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIE9iamVjdCBvbzIgPSByZXMyLmdldCgwKTsKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgIGFzc2VydEVxdWFscygiICBWZXJpZnkgZW50aXR5IHR5cGUg\naXMgIiArIGVudGl0eUNsYXNzLmdldE5hbWUoKSwgZW50aXR5Q2xhc3MuZ2V0\nTmFtZSgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9vMi5n\nZXRDbGFzcygpLmdldE5hbWUoKSk7CiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0\ncmluZyBuYW1lMiA9IChTdHJpbmcpIGVudGl0eUNsYXNzLmdldE1ldGhvZCgi\nZ2V0TmFtZSIpLmludm9rZShvbzIpOwogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgIGFzc2VydEVxdWFscygiICBWZXJpZnkgZW50aXR5IHZhbHVl\nIGlzICciCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsg\nZXhwZWN0ZWRFbnRpdHlOYW1lICsgIiciLCBleHBlY3RlZEVudGl0eU5hbWUs\nIG5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAo\nRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICBsb2cuZXJyb3IoIiAgQ2F1Z2h0IHVuZXhwZWN0ZWQgZXhjZXB0aW9uOiIg\nKyBlLmdldE1lc3NhZ2UoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oZSk7CiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAg\nIH0KICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkg\newogICAgICAgICAgICAgICAgICAgICAgICBsb2cuZXJyb3IoIiAgQ2F1Z2h0\nIHVuZXhwZWN0ZWQgZXhjZXB0aW9uOiIgKyBlLmdldE1lc3NhZ2UoKSk7CiAg\nICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0\naW9uKGUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAg\nIH0KICAgICAgICAgICAgICAgICsraWR4OwogICAgICAgICAgICB9CiAgICAg\nICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgbG9nLmVy\ncm9yKGUpOwogICAgICAgICAgICB0aHJvdyBuZXcgUnVudGltZUV4Y2VwdGlv\nbihlKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBpZiAoZW0g\nIT0gbnVsbCkgewogICAgICAgICAgICAgICAgZW0uY2xvc2UoKTsKICAgICAg\nICAgICAgICAgIGVtID0gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgIH0K\nICAgIH0KICAgIAogICAgcHJpdmF0ZSA8RT4gdm9pZCB2ZXJpZnlPcmRlcmVk\nRWxlbWVudHMoSlBRTEluZGV4RW50aXR5Q2xhc3NlcyBlbnRpdHlUeXBlKQog\nICAgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBudWxsOwogICAgICAg\nIAogICAgICAgIHRyeSB7CiAgICAgICAgICAgIENsYXNzPElPcmRlcmVkRW50\naXR5PiBlbnRpdHlDbGFzcyA9IChDbGFzczxJT3JkZXJlZEVudGl0eT4pQ2xh\nc3MuZm9yTmFtZShlbnRpdHlUeXBlLmdldEVudGl0eUNsYXNzTmFtZSgpKTsK\nICAgICAgICAgICAgU3RyaW5nIGVudGl0eUNsYXNzTmFtZSA9IGVudGl0eVR5\ncGUuZ2V0RW50aXR5TmFtZSgpOwogICAgICAgICAgICBlbnRpdHlDbGFzc05h\nbWUgPSBlbnRpdHlDbGFzc05hbWUuc3Vic3RyaW5nKGVudGl0eUNsYXNzTmFt\nZS5sYXN0SW5kZXhPZignLicpICsgMSk7CgogICAgICAgICAgICBpZiAobG9n\nLmlzVHJhY2VFbmFibGVkKCkpIHsKICAgICAgICAgICAgICAgIGxvZy50cmFj\nZSgiUXVlcnkgIiArIGVudGl0eUNsYXNzTmFtZSArICIgYW5kIHZlcmlmeSAn\nZWxlbWVudHMnIGNvbGxlY3Rpb24gaGFzICIKICAgICAgICAgICAgICAgICAg\nICArIEVsZW1lbnRfTmFtZXMubGVuZ3RoICsgIiBlbGVtZW50cyBpbiB0aGlz\nIG9yZGVyOiAiCiAgICAgICAgICAgICAgICAgICAgKyBBcnJheXMudG9TdHJp\nbmcoRWxlbWVudF9OYW1lcykpOwogICAgICAgICAgICB9CiAgICAgICAgICAg\nIAogICAgICAgICAgICBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7\nCiAgICAgICAgICAgIGVtLmNsZWFyKCk7CiAgICAgICAgICAgIGludCBpZHgg\nPSAwOwogICAgICAgICAgICBmb3IgKFN0cmluZyBleHBlY3RlZEVudGl0eU5h\nbWUgOiBFbGVtZW50X05hbWVzKSB7CiAgICAgICAgICAgICAgICBRdWVyeSBx\nID0gZW0uY3JlYXRlUXVlcnkoInNlbGVjdCB3IGZyb20gIiArIGVudGl0eUNs\nYXNzTmFtZQogICAgICAgICAgICAgICAgICAgICsgIiBvIGpvaW4gby5lbGVt\nZW50cyB3IHdoZXJlIGluZGV4KHcpID0gIiArIGlkeCk7CiAgICAgICAgICAg\nICAgICBMaXN0PEU+IHJlcyA9IChMaXN0PEU+KXEuZ2V0UmVzdWx0TGlzdCgp\nOwogICAgICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKCIgIFZlcmlmeSBxdWVy\neSByZXR1cm5zIDEgZWxlbWVudCBmb3IgaW5kZXggIiArIGlkeCwgMSwgcmVz\nLnNpemUoKSk7CiAgICAgICAgICAgICAgICBpZiAocmVzLnNpemUoKSA9PSAx\nKSB7CiAgICAgICAgICAgICAgICAgICAgT2JqZWN0IG9vID0gcmVzLmdldCgw\nKTsKICAgICAgICAgICAgICAgICAgICBhc3NlcnRFcXVhbHMoIiAgVmVyaWZ5\nIGVsZW1lbnQgdHlwZSBpcyBTdHJpbmciLCBTdHJpbmcuY2xhc3MuZ2V0TmFt\nZSgpLAogICAgICAgICAgICAgICAgICAgICAgICBvby5nZXRDbGFzcygpLmdl\ndE5hbWUoKSk7CiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIG5hbWU7CiAg\nICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAg\nICAgbmFtZSA9IChTdHJpbmcpIG9vLnRvU3RyaW5nKCk7CiAgICAgICAgICAg\nICAgICAgICAgICAgIGFzc2VydEVxdWFscygiICBWZXJpZnkgZWxlbWVudCB2\nYWx1ZSBpcyAnIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBleHBl\nY3RlZEVudGl0eU5hbWUgKyAiJyIsIGV4cGVjdGVkRW50aXR5TmFtZSwgbmFt\nZSk7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUp\nIHsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmVycm9yKCIgIENhdWdo\ndCB1bmV4cGVjdGVkIGV4Y2VwdGlvbjoiICsgZS5nZXRNZXNzYWdlKCkpOwog\nICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUnVudGltZUV4Y2Vw\ndGlvbihlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAg\nICB9CiAgICAgICAgICAgICAgICArK2lkeDsKICAgICAgICAgICAgfQogICAg\nICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGxvZy5l\ncnJvcihlKTsKICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRp\nb24oZSk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgaWYgKGVt\nICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIGVtLmNsb3NlKCk7CiAgICAg\nICAgICAgICAgICBlbSA9IG51bGw7CiAgICAgICAgICAgIH0KICAgICAgICB9\nCiAgICB9CiAgICAKfQo=\n","encoding":"base64"}

