{"sha":"ff5c8d3a81a6c306eb3a122c6d95ef03de57a4ea","node_id":"MDQ6QmxvYjIwNjM2NDpmZjVjOGQzYTgxYTZjMzA2ZWIzYTEyMmM2ZDk1ZWYwM2RlNTdhNGVh","size":5647,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/ff5c8d3a81a6c306eb3a122c6d95ef03de57a4ea","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UucHJveHk7\nCgppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5TWFuYWdlcjsKCmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UudGVzdC5TaW5n\nbGVFTUZUZXN0Q2FzZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGls\nLkNoYW5nZVRyYWNrZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRp\nbC5Qcm94eUNvbGxlY3Rpb247CgovKioKICogVGVzdHMgcHJveHlpbmcgYW5k\nIGNoYW5nZSB0cmFja2luZyBvZiBjb2xsZWN0aW9uIGZpZWxkcyBmb3IgbW9k\naWZpY2F0aW9uIGluCiAqIGRldGFjaGVkIHN0YXRlLgogKiAKICogT3JpZ2lu\nYWxseSByZXBvcnRlZCBpbgogKiA8QSBIUkVGPSJodHRwczovL2lzc3Vlcy5h\ncGFjaGUub3JnL2ppcmEvYnJvd3NlL09QRU5KUEEtNjI4Ij5PUEVOSlBBLTYy\nODwvQT4KICogCiAqIEBhdXRob3IgUGluYWtpIFBvZGRhcgogKgogKi8KcHVi\nbGljIGNsYXNzIFRlc3RQcm94eUNvbGxlY3Rpb24gZXh0ZW5kcyBTaW5nbGVF\nTUZUZXN0Q2FzZSB7CglwdWJsaWMgdm9pZCBzZXRVcCgpIHsKCQlzdXBlci5z\nZXRVcChDTEVBUl9UQUJMRVMsIFRyZWVOb2RlLmNsYXNzKTsKCX0KCS8qKgoJ\nICogVGVzdHMgdGhhdCBhIHVuaWZvcm0gdHJlZSBpcyBjcmVhdGVkIHdpdGgg\nZXhwZWN0ZWQgZmFuIG91dHMgYXQgZWFjaCAKCSAqIGxldmVsLiBUaGlzIGlz\nIG5vdCBhIHBlcnNpc3RlbnQgb3BlcmF0aW9uLCBqdXN0IGluLW1lbW9yeS4g\nCgkgKi8KCXB1YmxpYyB2b2lkIHRlc3RDcmVhdGVUcmVlKCkgewoJCVRyZWVO\nb2RlIHJvb3QgPSBuZXcgVHJlZU5vZGUoKTsKCQlyb290LnNldE5hbWUoIjAi\nKTsKCQlpbnRbXSBmYW5PdXRzID0gezEsMiwzfTsKCQlyb290LmNyZWF0ZVRy\nZWUoZmFuT3V0cyk7CgkJYXNzZXJ0QXJyYXlFcXVhbHMoZmFuT3V0cywgcm9v\ndC5nZXRGYW5PdXRzKCkpOwoJfQoJCgkvKioKICAgICAqIFRlc3RzIHRoYXQg\nYSB1bmlmb3JtIHRyZWUgY2FuIGJlIG1vZGlmaWVkIHdpdGggZGlmZmVyZW50\nIGZhbiBvdXRzIGF0IGVhY2gKCSAqIGxldmVsLiBUaGlzIGlzIG5vdCBhIHBl\ncnNpc3RlbnQgb3BlcmF0aW9uLCBqdXN0IGluLW1lbW9yeS4gCgkgKi8KCXB1\nYmxpYyB2b2lkIHRlc3RNb2RpZnlUcmVlKCkgewoJCWludFtdIGZhbk91dHMg\nPSB7MSwyLDIsNH07CgkJaW50W10gbmV3RmFuT3V0cyA9IHsxLDMsMSwyfTsK\nCQlUcmVlTm9kZSByb290ID0gbmV3IFRyZWVOb2RlKCk7CgkJcm9vdC5jcmVh\ndGVUcmVlKGZhbk91dHMpOwoJCWFzc2VydEFycmF5RXF1YWxzKGZhbk91dHMs\nIHJvb3QuZ2V0RmFuT3V0cygpKTsKCQkKCQlyb290Lm1vZGlmeShuZXdGYW5P\ndXRzKTsKCQlhc3NlcnRBcnJheUVxdWFscyhuZXdGYW5PdXRzLCByb290Lmdl\ndEZhbk91dHMoKSk7Cgl9CgkKCS8qKgogICAgICogVGVzdHMgdGhhdCBhIHVu\naWZvcm0gdHJlZSBpcyBwZXJzaXN0ZWQgYW5kIGxhdGVyIGZldGNoZWQgYmFj\nayB3aXRoIHNhbWUKCSAqIG51bWJlciBvZiBjaGlsZHJlbiBhdCBldmVyeSBs\nZXZlbC4KCSAqLwoJcHVibGljIHZvaWQgdGVzdFBlcnNpc3RUcmVlKCkgewoJ\nCWludFtdIGZhbk91dHMgPSB7MiwzLDR9OwoJCXZlcmlmeShjcmVhdGUoZmFu\nT3V0cyksIGZhbk91dHMpOwoJfQoJCglwdWJsaWMgdm9pZCB0ZXN0QWRkTm9k\nZUF0TGVhZigpIHsKCQlpbnRbXSBvcmlnaW5hbCA9IHsxLDIsM307CgkJaW50\nW10gbW9kaWZpZXIgPSB7MSwyLDR9OyAvLyBhZGQgbmV3IGNoaWxkIGF0IExl\ndmVsIDIKCQljcmVhdGVNb2RpZnlBbmRNZXJnZShvcmlnaW5hbCwgbW9kaWZp\nZXIpOwoJfQoJCglwdWJsaWMgdm9pZCB0ZXN0QWRkTmV3TGV2ZWwoKSB7CgkJ\naW50W10gb3JpZ2luYWwgPSB7MSwyLDN9OwoJCWludFtdIG1vZGlmaWVyID0g\nezEsMiwzLDJ9OyAvLyBhZGQgMiBuZXcgY2hpbGRyZW4gYXQgbmV3IExldmVs\nIAoJCWNyZWF0ZU1vZGlmeUFuZE1lcmdlKG9yaWdpbmFsLCBtb2RpZmllcik7\nCgl9CgkKCXB1YmxpYyB2b2lkIHRlc3RBZGRBbmRSZW1vdmUoKSB7CgkJaW50\nW10gb3JpZ2luYWwgPSB7MiwzLDR9OwogICAgICAgIGludFtdIG1vZGlmaWVy\nID0gezQsMywyfTsgLy8gYWRkIDEgYXQgTGV2ZWwgMSArIHJlbW92ZSAxIGF0\nIExldmVsIDMKCQljcmVhdGVNb2RpZnlBbmRNZXJnZShvcmlnaW5hbCwgbW9k\naWZpZXIpOwoJfQoJCglwdWJsaWMgdm9pZCB0ZXN0QWRkQXRBbGxMZXZlbCgp\nIHsKCQlpbnRbXSBvcmlnaW5hbCA9IHsyLDMsNH07CgkJaW50W10gbW9kaWZp\nZXIgPSB7Myw0LDV9OyAvLyBhZGQgMSBhdCBlYWNoIExldmVsIAoJCWNyZWF0\nZU1vZGlmeUFuZE1lcmdlKG9yaWdpbmFsLCBtb2RpZmllcik7Cgl9CgkKCXB1\nYmxpYyB2b2lkIHRlc3RSZW1vdmVBdEFsbExldmVsKCkgewoJCWludFtdIG9y\naWdpbmFsID0gezIsMyw0fTsKCQlpbnRbXSBtb2RpZmllciA9IHsxLDIsM307\nIC8vIHJlbW92ZSAxIGZyb20gZWFjaCBMZXZlbCAKCQljcmVhdGVNb2RpZnlB\nbmRNZXJnZShvcmlnaW5hbCwgbW9kaWZpZXIpOwoJfQoJLyoqCgkgKiBDcmVh\ndGUgYSB1bmlmb3JtIHRyZWUgd2l0aCBvcmlnaW5hbCBmYW5vdXQuCgkgKiBQ\nZXJzaXN0LgoJICogVmVyaWZ5IGluIGEgc2VwYXJhdGUgcGVyc2lzdGVuY2Ug\nY29udGV4dCB0aGF0IHRoZSB0cmVlIGlzIHN0b3JlZC4KCSAqIE1vZGlmeSB0\naGUgdHJlZSBieSBhZGRpbmcgb3IgZGVsZXRpbmcgbm9kZXMgYWNjb3JkaW5n\nIHRvIHRoZSBnaXZlbiAKCSAqIG1vZGlmaWVkIGZhbm91dHMgb3V0c2lkZSBh\nIHRyYW5zYWN0aW9uLgoJICogTWVyZ2UgdGhlIGNoYW5nZXMuCgkgKiBWZXJp\nZnkgdGhhdCB0aGUgY2hhbmdlcyBhcmUgbWVyZ2VkIGJ5IGZldGNoaW5nIHRo\nZSBtb2RpZmllZCB2ZXJzaW9uLgoJICogCgkgKiBAcGFyYW0gb3JpZ2luYWwK\nCSAqIEBwYXJhbSBtb2RpZmllZAoJICovCgl2b2lkIGNyZWF0ZU1vZGlmeUFu\nZE1lcmdlKGludFtdIG9yaWdpbmFsLCBpbnRbXSBtb2RpZmllcikgewoJCVRy\nZWVOb2RlIHJvb3QgPSBjcmVhdGUob3JpZ2luYWwpOwoJCQoJCUVudGl0eU1h\nbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwoJCWVtLmdl\ndFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKCQlUcmVlTm9kZSBtb2RpZmllZCA9\nIGVtLmZpbmQoVHJlZU5vZGUuY2xhc3MsIHJvb3QuZ2V0SWQoKSk7CgkJbW9k\naWZpZWQubW9kaWZ5KG1vZGlmaWVyKTsKCQllbS5tZXJnZShtb2RpZmllZCk7\nCgkJZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKCgkJZW0uY2xlYXIo\nKTsKCgkJYXNzZXJ0UHJveHlDb2xsZWN0aW9uKHJvb3QuZ2V0Tm9kZXMoKSwg\nZmFsc2UpOwoKCQl2ZXJpZnkocm9vdCwgbW9kaWZpZXIpOwoJfQoJCgkvKioK\nCSAqIENyZWF0ZSBhIHVuaWZvcm0gdHJlZSB3aXRoIGdpdmVuIGZhbiBvdXQu\nCgkgKiBQZXJzaXN0LgogICAgICogVmVyaWZ5IHRoYXQgdGhlIHRyZWUgaXMg\nc3RvcmVkIGJ5IGZldGNoaW5nIGl0IGluIGEgc2VwYXJhdGUgcGVyc2lzdGVu\nY2UKCSAqIGNvbnRleHQuCgkgKi8KCVRyZWVOb2RlIGNyZWF0ZShpbnRbXSBv\ncmlnaW5hbCkgewoJCVRyZWVOb2RlIHJvb3QgPSBuZXcgVHJlZU5vZGUoKTsK\nCQlyb290LmNyZWF0ZVRyZWUob3JpZ2luYWwpOwoJCQoJCUVudGl0eU1hbmFn\nZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwoJCWVtLmdldFRy\nYW5zYWN0aW9uKCkuYmVnaW4oKTsKCQllbS5wZXJzaXN0KHJvb3QpOwoJCWVt\nLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CgkJZW0uY2xlYXIoKTsKCQkK\nCQlyZXR1cm4gcm9vdDsKCX0KCQoJdm9pZCB2ZXJpZnkoVHJlZU5vZGUgbm9k\nZSwgaW50W10gZmFuT3V0cykgewoJCUVudGl0eU1hbmFnZXIgZW0gPSBlbWYu\nY3JlYXRlRW50aXR5TWFuYWdlcigpOwoJCWVtLmdldFRyYW5zYWN0aW9uKCku\nYmVnaW4oKTsKCQlUcmVlTm9kZSB0ZXN0ID0gZW0uZmluZChUcmVlTm9kZS5j\nbGFzcywgbm9kZS5nZXRJZCgpKTsKCQlhc3NlcnROb3ROdWxsKHRlc3QpOwoJ\nCWFzc2VydEFycmF5RXF1YWxzKGZhbk91dHMsIHRlc3QuZ2V0RmFuT3V0cygp\nKTsKCX0KCiAgICAvKiogCiAgICAgKiBBc3NlcnRzIHRoZSBnaXZlbiBhcnJh\neXMgaGF2ZSBleGFjdGx5IHNhbWUgZWxlbWVudHMgYXQgdGhlIHNhbWUgaW5k\nZXguCiAgICAgKi8KCXZvaWQgYXNzZXJ0QXJyYXlFcXVhbHMoaW50W10gYSwg\naW50W10gYikgewoJCWFzc2VydEVxdWFscyhhLmxlbmd0aCwgYi5sZW5ndGgp\nOwoJCWZvciAoaW50IGkgPSAwOyBpPGEubGVuZ3RoOyBpKyspCgkJCWFzc2Vy\ndEVxdWFscyhhW2ldLCBiW2ldKTsKCX0KCgkvKioKICAgICAqIEFzc2VydHMg\ndGhhdCB0aGUgZ2l2ZW4gb2JqZWN0IGlzIGEgcHJveHkgY29sbGVjdGlvbiBh\nbmQgd2hldGhlciBpdCBpcwoJICogdHJhY2tpbmcgY2hhbmdlcy4KCSAqLwoJ\ndm9pZCBhc3NlcnRQcm94eUNvbGxlY3Rpb24oT2JqZWN0IG8sIGJvb2xlYW4g\ndHJhY2tpbmcpIHsKCQlhc3NlcnRUcnVlKG8gaW5zdGFuY2VvZiBQcm94eUNv\nbGxlY3Rpb24pOwoJCUNoYW5nZVRyYWNrZXIgdHJhY2tlciA9ICgoUHJveHlD\nb2xsZWN0aW9uKW8pLmdldENoYW5nZVRyYWNrZXIoKTsKCQlpZiAodHJhY2tp\nbmcpIHsKCQkJYXNzZXJ0Tm90TnVsbCh0cmFja2VyKTsKCQkJYXNzZXJ0VHJ1\nZSh0cmFja2VyLmlzVHJhY2tpbmcoKSk7CgkJfSBlbHNlIHsKCQkJYXNzZXJ0\nRmFsc2UodHJhY2tlci5pc1RyYWNraW5nKCkpOwoJCX0KCX0KCgkvKioKCSAq\nIEFzc2VydHMgdGhhdCB0aGUgZ2l2ZW4gb2JqZWN0IGlzIE5PVCBhIHByb3h5\nIGNvbGxlY3Rpb24uCgkgKi8KCXZvaWQgYXNzZXJ0Tm90UHJveHlDb2xsZWN0\naW9uKE9iamVjdCBvKSB7CgkJYXNzZXJ0RmFsc2UobyBpbnN0YW5jZW9mIFBy\nb3h5Q29sbGVjdGlvbik7Cgl9Cn0KCg==\n","encoding":"base64"}

