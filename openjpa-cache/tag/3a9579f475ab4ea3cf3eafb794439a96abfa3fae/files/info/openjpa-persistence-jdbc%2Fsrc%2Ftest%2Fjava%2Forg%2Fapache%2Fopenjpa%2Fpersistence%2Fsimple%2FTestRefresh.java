{"sha":"632a32abc0fc02f014f6cd68f33320646bc9199b","node_id":"MDQ6QmxvYjIwNjM2NDo2MzJhMzJhYmMwZmMwMmYwMTRmNmNkNjhmMzMzMjA2NDZiYzkxOTli","size":5619,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/632a32abc0fc02f014f6cd68f33320646bc9199b","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uuc2ltcGxl\nOwoKaW1wb3J0IGphdmEuc3FsLkNvbm5lY3Rpb247CmltcG9ydCBqYXZhLnNx\nbC5TUUxFeGNlcHRpb247CmltcG9ydCBqYXZhLnV0aWwuTWFwOwoKaW1wb3J0\nIGphdmF4LnBlcnNpc3RlbmNlLkNhY2hlUmV0cmlldmVNb2RlOwppbXBvcnQg\namF2YXgucGVyc2lzdGVuY2UuQ2FjaGVTdG9yZU1vZGU7CmltcG9ydCBqYXZh\neC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyOwoKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5rZXJuZWwuQnJva2VyOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnBlcnNpc3RlbmNlLkpQQVByb3BlcnRpZXM7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFn\nZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UudGVz\ndC5TaW5nbGVFTVRlc3RDYXNlOwoKcHVibGljIGNsYXNzIFRlc3RSZWZyZXNo\nIGV4dGVuZHMgU2luZ2xlRU1UZXN0Q2FzZSB7CgogICAgcHVibGljIHZvaWQg\nc2V0VXAoKSB7CiAgICAgICAgc3VwZXIuc2V0VXAoQ0xFQVJfVEFCTEVTLCBJ\ndGVtLmNsYXNzLCAKICAgICAgICAgICAgICJvcGVuanBhLkF1dG9EZXRhY2gi\nLCAiY29tbWl0IiwKICAgICAgICAgICAgICJvcGVuanBhLkRhdGFDYWNoZSIs\nICJ0cnVlIiwKICAgICAgICAgICAgICJvcGVuanBhLlJlbW90ZUNvbW1pdFBy\nb3ZpZGVyIiwgInNqdm0iKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nRmx1c2hSZWZyZXNoTmV3SW5zdGFuY2UoKSB7CiAgICAgICAgZW0uZ2V0VHJh\nbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIEl0ZW0gaXRlbSA9IG5ldyBJ\ndGVtKCk7CiAgICAgICAgaXRlbS5zZXRJdGVtRGF0YSgiVGVzdCBEYXRhIik7\nCiAgICAgICAgZW0ucGVyc2lzdChpdGVtKTsKICAgICAgICBlbS5mbHVzaCgp\nOwogICAgICAgIGVtLnJlZnJlc2goaXRlbSk7CiAgICAgICAgZW0uZ2V0VHJh\nbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIlRl\nc3QgRGF0YSIsIGl0ZW0uZ2V0SXRlbURhdGEoKSk7CiAgICB9CiAgICAKICAg\nIC8qKgogICAgICogUmVmcmVzaCBhbHdheXMgYnlwYXNzIEwyIGNhY2hlLgog\nICAgICogQWNjb3JkaW5nIHRvIEpQQSAyLjAgU3BlYyBTZWN0aW9uIDMuNy4y\nOgogICAgICogIlRoZSByZXRyaWV2ZU1vZGUgcHJvcGVydHkgaXMgaWdub3Jl\nZCBmb3IgdGhlIHJlZnJlc2ggbWV0aG9kLAogICAgICogIHdoaWNoIGFsd2F5\ncyBjYXVzZXMgZGF0YSB0byBiZSByZXRyaWV2ZWQgZnJvbSB0aGUgZGF0YWJh\nc2UsIG5vdCB0aGUgY2FjaGUuIgogICAgICovCiAgICBwdWJsaWMgdm9pZCB0\nZXN0UmVmcmVzaEJ5cGFzc0wyQ2FjaGUoKSB7CiAgICAgICAgU3RyaW5nIG9y\naWdpbmFsID0gIk9yaWdpbmFsIEwyIENhY2hlZCBEYXRhIjsKICAgICAgICBT\ndHJpbmcgc25lYWtVcGRhdGUgPSAiU25lYWsgVXBkYXRlIjsKICAgICAgICBl\nbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgSXRlbSBpdGVt\nID0gbmV3IEl0ZW0oKTsKICAgICAgICBpdGVtLnNldEl0ZW1EYXRhKG9yaWdp\nbmFsKTsKICAgICAgICBlbS5wZXJzaXN0KGl0ZW0pOwogICAgICAgIGVtLmdl\ndFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgYXNzZXJ0Q2FjaGVk\nKEl0ZW0uY2xhc3MsIGl0ZW0uZ2V0SXRlbUlkKCkpOwogICAgICAgIAogICAg\nICAgIC8vIFNuZWFraWx5IHVwZGF0ZSB3aXRoIFNRTAogICAgICAgIFN0cmlu\nZyBzcWwgPSAiVVBEQVRFIElfSVRFTSBTRVQgSV9EQVRBPT8xIFdIRVJFIElf\nSUQ9PzIiOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsK\nICAgICAgICBpbnQgdXBkYXRlQ291bnQgPSBlbS5jcmVhdGVOYXRpdmVRdWVy\neShzcWwpCiAgICAgICAgICAgIC5zZXRQYXJhbWV0ZXIoMSwgc25lYWtVcGRh\ndGUpCiAgICAgICAgICAgIC5zZXRQYXJhbWV0ZXIoMiwgaXRlbS5nZXRJdGVt\nSWQoKSkKICAgICAgICAgICAgLmV4ZWN1dGVVcGRhdGUoKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoMSwgdXBkYXRlQ291bnQpOwogICAgICAgIGVtLmdldFRy\nYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgCiAgICAgICAgZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIC8vIEZpbmQgd2lsbCBm\naW5kIHRoZSBMMiBjYWNoZWQgZGF0YQogICAgICAgIGl0ZW0gPSBlbS5maW5k\nKEl0ZW0uY2xhc3MsIGl0ZW0uZ2V0SXRlbUlkKCkpOwogICAgICAgIGFzc2Vy\ndEVxdWFscyhvcmlnaW5hbCwgaXRlbS5nZXRJdGVtRGF0YSgpKTsKICAgICAg\nICAvLyBCdXQgcmVmcmVzaCB3aWxsIGdldCB0aGUgYWN0dWFsIGRhdGFiYXNl\nIHJlY29yZAogICAgICAgIGVtLnJlZnJlc2goaXRlbSk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKHNuZWFrVXBkYXRlLCBpdGVtLmdldEl0ZW1EYXRhKCkpOwoK\nICAgICAgICAvLyBFdmVuIGlmIGNhY2hlIHJldHJpZXZlIG1vZGUgaXMgc2V0\nIHRvIFVTRQogICAgICAgIGVtLnNldFByb3BlcnR5KEpQQVByb3BlcnRpZXMu\nQ0FDSEVfUkVUUklFVkVfTU9ERSwgQ2FjaGVSZXRyaWV2ZU1vZGUuVVNFKTsK\nICAgICAgICBlbS5yZWZyZXNoKGl0ZW0pOwogICAgICAgIGFzc2VydEVxdWFs\ncyhzbmVha1VwZGF0ZSwgaXRlbS5nZXRJdGVtRGF0YSgpKTsKICAgICAgICBl\nbS5nZXRUcmFuc2FjdGlvbigpLnJvbGxiYWNrKCk7CiAgICB9CiAgICAKICAg\nIHB1YmxpYyB2b2lkIHRlc3RDYWNoZVJldHJpZXZlTW9kZVNldHRpbmcoKSB7\nCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLnNldFByb3BlcnR5KEpQQVBy\nb3BlcnRpZXMuQ0FDSEVfUkVUUklFVkVfTU9ERSwgQ2FjaGVSZXRyaWV2ZU1v\nZGUuVVNFKTsKICAgICAgICBNYXA8U3RyaW5nLCBPYmplY3Q+IHByb3BlcnRp\nZXMgPSBlbS5nZXRQcm9wZXJ0aWVzKCk7CiAgICAgICAgaWYgKCFwcm9wZXJ0\naWVzLmNvbnRhaW5zS2V5KEpQQVByb3BlcnRpZXMuQ0FDSEVfUkVUUklFVkVf\nTU9ERSkpIHsKICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKHByb3Bl\ncnRpZXMpOwogICAgICAgICAgICBmYWlsKCJFeHBlY3RlZCAiICsgSlBBUHJv\ncGVydGllcy5DQUNIRV9SRVRSSUVWRV9NT0RFICsgIiBwcm9wZXJ0aWVzIGJl\nIHJldHVybmVkIik7CiAgICAgICAgfQogICAgICAgIE9iamVjdCBtb2RlID0g\ncHJvcGVydGllcy5nZXQoSlBBUHJvcGVydGllcy5DQUNIRV9SRVRSSUVWRV9N\nT0RFKTsKICAgICAgICBhc3NlcnRFcXVhbHMobW9kZSwgQ2FjaGVSZXRyaWV2\nZU1vZGUuVVNFKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdENh\nY2hlU3RvcmVNb2RlU2V0dGluZygpIHsKICAgICAgICBPcGVuSlBBRW50aXR5\nTWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAg\nICAgZW0uc2V0UHJvcGVydHkoSlBBUHJvcGVydGllcy5DQUNIRV9TVE9SRV9N\nT0RFLCBDYWNoZVN0b3JlTW9kZS5VU0UpOwogICAgICAgIE1hcDxTdHJpbmcs\nIE9iamVjdD4gcHJvcGVydGllcyA9IGVtLmdldFByb3BlcnRpZXMoKTsKICAg\nICAgICBpZiAoIXByb3BlcnRpZXMuY29udGFpbnNLZXkoSlBBUHJvcGVydGll\ncy5DQUNIRV9TVE9SRV9NT0RFKSkgewogICAgICAgICAgICBTeXN0ZW0uZXJy\nLnByaW50bG4ocHJvcGVydGllcyk7CiAgICAgICAgICAgIGZhaWwoIkV4cGVj\ndGVkICIgKyBKUEFQcm9wZXJ0aWVzLkNBQ0hFX1NUT1JFX01PREUgKyAiIHBy\nb3BlcnRpZXMgYmUgcmV0dXJuZWQiKTsKICAgICAgICB9CiAgICAgICAgT2Jq\nZWN0IG1vZGUgPSBwcm9wZXJ0aWVzLmdldChKUEFQcm9wZXJ0aWVzLkNBQ0hF\nX1NUT1JFX01PREUpOwogICAgICAgIGFzc2VydEVxdWFscyhtb2RlLCBDYWNo\nZVN0b3JlTW9kZS5VU0UpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0\nZXN0UmVmcmVzaEFmdGVyUmVtb3ZlKCkgewogICAgICAgIHRyeSB7CiAgICAg\nICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICAg\nICAgSXRlbSBpdGVtID0gbmV3IEl0ZW0oKTsKICAgICAgICAgICAgaXRlbS5z\nZXRJdGVtRGF0YSgiVGVzdCBEYXRhIik7CiAgICAgICAgICAgIGVtLnBlcnNp\nc3QoaXRlbSk7CiAgICAgICAgICAgIGVtLmZsdXNoKCk7CiAgICAgICAgICAg\nIGVtLnJlbW92ZShpdGVtKTsKICAgICAgICAgICAgZW0uZmx1c2goKTsKICAg\nICAgICAgICAgZW0ucmVmcmVzaChpdGVtKTsKICAgICAgICAgICAgZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICAgICAgZmFpbCgiRGlk\nIG5vdCBjYXRjaCBleHBlY3RlZCBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24g\nZm9yIHJlZnJlc2goKSBvZiByZW1vdmVkIGVudGl0eSIpOwogICAgICAgIH0g\nY2F0Y2ggKElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBlKSB7CiAgICAgICAg\nICAgIC8vIEV4cGVjdGVkIGV4Y2VwdGlvbgogICAgICAgIH0KICAgIH0KICAg\nIAogICAgCiAgICB2b2lkIGFzc2VydENhY2hlZChDbGFzczw/PiBjbHMsIE9i\namVjdCBvaWQpIHsKICAgICAgICBhc3NlcnRUcnVlKGNscyArICI6IiArIG9p\nZCArICIgc2hvdWxkIGJlIGluIEwyIGNhY2hlLCBidXQgbm90IiwgZW1mLmdl\ndENhY2hlKCkuY29udGFpbnMoY2xzLCBvaWQpKTsKICAgIH0KICAgIAogICAg\ndm9pZCBhc3NlcnROb3RDYWNoZWQoQ2xhc3M8Pz4gY2xzLCBPYmplY3Qgb2lk\nKSB7CiAgICAgICAgYXNzZXJ0VHJ1ZShjbHMgKyAiOiIgKyBvaWQgKyAiIHNo\nb3VsZCBub3QgYmUgaW4gTDIgY2FjaGUsIGJ1dCBpcyIsICFlbWYuZ2V0Q2Fj\naGUoKS5jb250YWlucyhjbHMsIG9pZCkpOwogICAgfQogICAgCn0K\n","encoding":"base64"}

