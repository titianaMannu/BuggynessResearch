{"sha":"dda04a4eed7a0880f279bfa3cf08a4f0da1aaaa2","node_id":"MDQ6QmxvYjIwNjM2NDpkZGEwNGE0ZWVkN2EwODgwZjI3OWJmYTNjZjA4YTRmMGRhMWFhYWEy","size":24648,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/dda04a4eed7a0880f279bfa3cf08a4f0da1aaaa2","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UudGVzdDsK\nCmltcG9ydCBqYXZhLmlvLkJ5dGVBcnJheUlucHV0U3RyZWFtOwppbXBvcnQg\namF2YS5pby5CeXRlQXJyYXlPdXRwdXRTdHJlYW07CmltcG9ydCBqYXZhLmlv\nLklPRXhjZXB0aW9uOwppbXBvcnQgamF2YS5pby5PYmplY3RJbnB1dFN0cmVh\nbTsKaW1wb3J0IGphdmEuaW8uT2JqZWN0T3V0cHV0U3RyZWFtOwppbXBvcnQg\namF2YS5sYW5nLnJlZmxlY3QuQ29uc3RydWN0b3I7CmltcG9ydCBqYXZhLmxh\nbmcucmVmbGVjdC5JbnZvY2F0aW9uVGFyZ2V0RXhjZXB0aW9uOwppbXBvcnQg\namF2YS5sYW5nLnJlZmxlY3QuTWV0aG9kOwppbXBvcnQgamF2YS5sYW5nLnJl\nZmxlY3QuTW9kaWZpZXI7CmltcG9ydCBqYXZhLnNxbC5TUUxFeGNlcHRpb247\nCmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0OwppbXBvcnQgamF2YS51dGls\nLkhhc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGphdmEu\ndXRpbC5NYXA7CgppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuQ2FjaGU7Cmlt\ncG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyOwppbXBvcnQg\namF2YXgucGVyc2lzdGVuY2UuRW50aXR5TWFuYWdlckZhY3Rvcnk7CmltcG9y\ndCBqYXZheC5wZXJzaXN0ZW5jZS5QZXJzaXN0ZW5jZTsKCmltcG9ydCBqdW5p\ndC5mcmFtZXdvcmsuVGVzdENhc2U7CmltcG9ydCBqdW5pdC5mcmFtZXdvcmsu\nVGVzdFJlc3VsdDsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVs\nLkFic3RyYWN0QnJva2VyRmFjdG9yeTsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5rZXJuZWwuQnJva2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLm1ldGEuQ2xhc3NNZXRhRGF0YTsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5wZXJzaXN0ZW5jZS5KUEFGYWNhZGVIZWxwZXI7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXJG\nYWN0b3J5U1BJOwoKLyoqCiAqIEJhc2UgY2xhc3MgZm9yIFBlcnNpc3RlbmNl\nIFRlc3RDYXNlcy4gVGhpcyBjbGFzcyBjb250YWlucyB1dGlsaXR5IG1ldGhv\nZHMgYnV0IGRvZXMgbm90IG1haW50YWluIGFuIEVudGl0eU1hbmFnZXIgb3IK\nICogRW50aXR5TWFuYWdlckZhY3RvcnkgLSB0aGVzZSB0YXNrcyBhcmUgbGVm\ndCBmb3Igc3ViY2xhc3NlcyB0byBoYW5kbGUuCiAqLwpwdWJsaWMgYWJzdHJh\nY3QgY2xhc3MgQWJzdHJhY3RQZXJzaXN0ZW5jZVRlc3RDYXNlIGV4dGVuZHMg\nVGVzdENhc2UgewogICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgRlJF\nU0hfRU1GID0gIkNyZWF0ZXMgbmV3IEVudGl0eU1hbmFnZXJGYWN0b3J5IjsK\nICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgU3RyaW5nIFJFVEFJTl9EQVRBID0g\nIlJldGFpbiBkYXRhIGFmdGVyIHRlc3QgcnVuIjsKICAgIHByaXZhdGUgYm9v\nbGVhbiByZXRhaW5EYXRhT25UZWFyRG93bjsKICAgIHByb3RlY3RlZCBib29s\nZWFuIF9mcmVzaCA9IGZhbHNlOwogICAgcHJpdmF0ZSBCb29sZWFuIHRlc3Rz\nRGlzYWJsZWQgPSBCb29sZWFuLkZBTFNFOwoKICAgIHB1YmxpYyBzdGF0aWMg\nZmluYWwgU3RyaW5nIEFMTE9XX0ZBSUxVUkVfTE9HID0gImxvZyI7CiAgICBw\ndWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBBTExPV19GQUlMVVJFX0lHTk9S\nRSA9ICJpZ25vcmUiOwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcg\nQUxMT1dfRkFJTFVSRV9TWVNfUFJPUCA9ICJ0ZXN0cy5vcGVuanBhLmFsbG93\nZmFpbHVyZSI7CgogICAgcHJpdmF0ZSBzdGF0aWMgU3RyaW5nIGFsbG93RmFp\nbHVyZUNvbmZpZyA9IFN5c3RlbS5nZXRQcm9wZXJ0eShBTExPV19GQUlMVVJF\nX1NZU19QUk9QLCBBTExPV19GQUlMVVJFX0lHTk9SRSk7CiAgICAvKioKICAg\nICAqIE1hcmtlciBvYmplY3QgeW91IHBhc3MgdG8ge0BsaW5rICNzZXRVcH0g\ndG8gaW5kaWNhdGUgdGhhdCB0aGUgZGF0YWJhc2UgdGFibGUgcm93cyBzaG91\nbGQgYmUgY2xlYXJlZC4KICAgICAqLwogICAgcHJvdGVjdGVkIHN0YXRpYyBm\naW5hbCBPYmplY3QgQ0xFQVJfVEFCTEVTID0gbmV3IE9iamVjdCgpOwoKICAg\nIC8qKgogICAgICogTWFya2VyIG9iamVjdCB5b3UgcGFzcyB0byB7QGxpbmsg\nI3NldFVwfSB0byBpbmRpY2F0ZSB0aGF0IHRoZSBkYXRhYmFzZSB0YWJsZSBz\naG91bGQgYmUgZHJvcHBlZCBhbmQgdGhlbgogICAgICogcmVjcmVhdGVkLgog\nICAgICovCiAgICBwcm90ZWN0ZWQgc3RhdGljIGZpbmFsIE9iamVjdCBEUk9Q\nX1RBQkxFUyA9IG5ldyBPYmplY3QoKTsKCiAgICAvKioKICAgICAqIFRoZSB7\nQGxpbmsgVGVzdFJlc3VsdH0gaW5zdGFuY2UgZm9yIHRoZSBjdXJyZW50IHRl\nc3QgcnVuLgogICAgICovCiAgICBwcm90ZWN0ZWQgVGVzdFJlc3VsdCB0ZXN0\nUmVzdWx0OwoKICAgIC8qKgogICAgICogQ3JlYXRlIGFuIGVudGl0eSBtYW5h\nZ2VyIGZhY3RvcnkuIFB1dCB7QGxpbmsgI0NMRUFSX1RBQkxFU30gaW4gdGhp\ncyBsaXN0IHRvIHRlbGwgdGhlIHRlc3QgZnJhbWV3b3JrIHRvIGRlbGV0ZSBh\nbGwKICAgICAqIHRhYmxlIGNvbnRlbnRzIGJlZm9yZSBydW5uaW5nIHRoZSB0\nZXN0cy4KICAgICAqIAogICAgICogQHBhcmFtIHByb3BzCiAgICAgKiAgICAg\nICAgICAgIGxpc3Qgb2YgcGVyc2lzdGVudCB0eXBlcyB1c2VkIGluIHRlc3Rp\nbmcgYW5kL29yIGNvbmZpZ3VyYXRpb24gdmFsdWVzIGluIHRoZSBmb3JtCiAg\nICAgKiAgICAgICAgICAgIGtleSx2YWx1ZSxrZXksdmFsdWUuLi4KICAgICAq\nLwogICAgcHJvdGVjdGVkIE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQ\nSSBjcmVhdGVFTUYoZmluYWwgT2JqZWN0Li4uIHByb3BzKSB7CiAgICAgICAg\ncmV0dXJuIGNyZWF0ZU5hbWVkRU1GKGdldFBlcnNpc3RlbmNlVW5pdE5hbWUo\nKSwgcHJvcHMpOwogICAgfQoKICAgIC8qKgogICAgICogVGhlIG5hbWUgb2Yg\ndGhlIHBlcnNpc3RlbmNlIHVuaXQgdGhhdCB0aGlzIHRlc3QgY2xhc3Mgc2hv\ndWxkIHVzZSBieSBkZWZhdWx0LiBUaGlzIGRlZmF1bHRzIHRvICJ0ZXN0Ii4K\nICAgICAqLwogICAgcHJvdGVjdGVkIFN0cmluZyBnZXRQZXJzaXN0ZW5jZVVu\naXROYW1lKCkgewogICAgICAgIHJldHVybiAidGVzdCI7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBDcmVhdGUgYW4gZW50aXR5IG1hbmFnZXIgZmFjdG9yeSBm\nb3IgcGVyc2lzdGVuY2UgdW5pdCA8Y29kZT5wdTwvY29kZT4uIFB1dCB7QGxp\nbmsgI0NMRUFSX1RBQkxFU30gaW4gdGhpcyBsaXN0IHRvCiAgICAgKiB0ZWxs\nIHRoZSB0ZXN0IGZyYW1ld29yayB0byBkZWxldGUgYWxsIHRhYmxlIGNvbnRl\nbnRzIGJlZm9yZSBydW5uaW5nIHRoZSB0ZXN0cy4KICAgICAqIAogICAgICog\nQHBhcmFtIHByb3BzCiAgICAgKiAgICAgICAgICAgIGxpc3Qgb2YgcGVyc2lz\ndGVudCB0eXBlcyB1c2VkIGluIHRlc3RpbmcgYW5kL29yIGNvbmZpZ3VyYXRp\nb24gdmFsdWVzIGluIHRoZSBmb3JtCiAgICAgKiAgICAgICAgICAgIGtleSx2\nYWx1ZSxrZXksdmFsdWUuLi4KICAgICAqLwogICAgcHJvdGVjdGVkIE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSSBjcmVhdGVOYW1lZEVNRihmaW5h\nbCBTdHJpbmcgcHUsIE9iamVjdC4uLiBwcm9wcykgewogICAgICAgIE1hcDxT\ndHJpbmcsIE9iamVjdD4gbWFwID0gZ2V0UHJvcGVydGllc01hcChwcm9wcyk7\nCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5U1BJIG9lbWYg\nPSBudWxsOwogICAgICAgIE1hcDxPYmplY3QsIE9iamVjdD4gY29uZmlnID0g\nbmV3IEhhc2hNYXA8T2JqZWN0LCBPYmplY3Q+KFN5c3RlbS5nZXRQcm9wZXJ0\naWVzKCkpOwogICAgICAgIGNvbmZpZy5wdXRBbGwobWFwKTsKICAgICAgICBv\nZW1mID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSSkgUGVyc2lz\ndGVuY2UuY3JlYXRlRW50aXR5TWFuYWdlckZhY3RvcnkocHUsIGNvbmZpZyk7\nCiAgICAgICAgaWYgKG9lbWYgPT0gbnVsbCkgewogICAgICAgICAgICB0aHJv\ndyBuZXcgTnVsbFBvaW50ZXJFeGNlcHRpb24oIkV4cGVjdGVkIGFuIGVudGl0\neSBtYW5hZ2VyIGZhY3RvcnkgIiArICJmb3IgdGhlIHBlcnNpc3RlbmNlIHVu\naXQgbmFtZWQ6IFwiIgogICAgICAgICAgICAgICAgKyBwdSArICJcIiIpOwog\nICAgICAgIH0KICAgICAgICByZXR1cm4gb2VtZjsKICAgIH0KCiAgICBwcm90\nZWN0ZWQgTWFwPFN0cmluZywgT2JqZWN0PiBnZXRQcm9wZXJ0aWVzTWFwKE9i\namVjdC4uLiBwcm9wcykgewogICAgICAgIE1hcDxTdHJpbmcsIE9iamVjdD4g\nbWFwID0gbmV3IEhhc2hNYXA8U3RyaW5nLCBPYmplY3Q+KCk7CiAgICAgICAg\nbWFwLnB1dCgib3BlbmpwYS5EeW5hbWljRW5oYW5jZW1lbnRBZ2VudCIsICJm\nYWxzZSIpOwogICAgICAgIExpc3Q8Q2xhc3M8Pz4+IHR5cGVzID0gbmV3IEFy\ncmF5TGlzdDxDbGFzczw/Pj4oKTsKICAgICAgICBib29sZWFuIHByb3AgPSBm\nYWxzZTsKCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IHByb3BzICE9IG51bGwg\nJiYgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChw\ncm9wc1tpXSA9PSBGUkVTSF9FTUYpIHsKICAgICAgICAgICAgICAgIF9mcmVz\naCA9IHRydWU7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAg\nICAgfQogICAgICAgICAgICBpZiAocHJvcHNbaV0gPT0gUkVUQUlOX0RBVEEp\nIHsKICAgICAgICAgICAgICAgIHJldGFpbkRhdGFPblRlYXJEb3duID0gdHJ1\nZTsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAg\nICAgICAgICAgIGlmIChwcm9wKSB7CiAgICAgICAgICAgICAgICBtYXAucHV0\nKChTdHJpbmcpIHByb3BzW2kgLSAxXSwgcHJvcHNbaV0pOwogICAgICAgICAg\nICAgICAgcHJvcCA9IGZhbHNlOwogICAgICAgICAgICB9IGVsc2UgaWYgKHBy\nb3BzW2ldID09IENMRUFSX1RBQkxFUykgewogICAgICAgICAgICAgICAgbWFw\nLnB1dCgib3BlbmpwYS5qZGJjLlN5bmNocm9uaXplTWFwcGluZ3MiLCAiYnVp\nbGRTY2hlbWEoRm9yZWlnbktleXM9dHJ1ZSwiCiAgICAgICAgICAgICAgICAg\nICAgKyAiU2NoZW1hQWN0aW9uPSdhZGQsZGVsZXRlVGFibGVDb250ZW50cycp\nIik7CiAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvcHNbaV0gPT0gRFJPUF9U\nQUJMRVMpIHsKICAgICAgICAgICAgICAgIG1hcC5wdXQoIm9wZW5qcGEuamRi\nYy5TeW5jaHJvbml6ZU1hcHBpbmdzIiwgImJ1aWxkU2NoZW1hKEZvcmVpZ25L\nZXlzPXRydWUsIgogICAgICAgICAgICAgICAgICAgICsgIlNjaGVtYUFjdGlv\nbj0nZHJvcCxhZGQnKSIpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHByb3Bz\nW2ldIGluc3RhbmNlb2YgQ2xhc3M8Pz4pIHsKICAgICAgICAgICAgICAgIHR5\ncGVzLmFkZCgoQ2xhc3M8Pz4pIHByb3BzW2ldKTsKICAgICAgICAgICAgfSAK\nICAgICAgICAgICAgZWxzZSBpZiAocHJvcHNbaV0gaW5zdGFuY2VvZiBDbGFz\nczw/PltdKSB7IAogICAgICAgICAgICAgICAgZm9yKENsYXNzPD8+IGNsc3Mg\nOiAoQ2xhc3M8Pz5bXSkgcHJvcHNbaV0pIHsgCiAgICAgICAgICAgICAgICAg\nICAgdHlwZXMuYWRkKGNsc3MpOwogICAgICAgICAgICAgICAgfQogICAgICAg\nICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKHByb3BzW2ldICE9IG51bGwp\nIHsKICAgICAgICAgICAgICAgIHByb3AgPSB0cnVlOwogICAgICAgICAgICB9\nCiAgICAgICAgfQoKICAgICAgICBpZiAoIXR5cGVzLmlzRW1wdHkoKSkgewog\nICAgICAgICAgICBTdHJpbmdCdWZmZXIgYnVmID0gbmV3IFN0cmluZ0J1ZmZl\ncigpOwogICAgICAgICAgICBmb3IgKENsYXNzPD8+IGMgOiB0eXBlcykgewog\nICAgICAgICAgICAgICAgaWYgKGJ1Zi5sZW5ndGgoKSA+IDApIHsKICAgICAg\nICAgICAgICAgICAgICBidWYuYXBwZW5kKCI7Iik7CiAgICAgICAgICAgICAg\nICB9CiAgICAgICAgICAgICAgICBidWYuYXBwZW5kKGMuZ2V0TmFtZSgpKTsK\nICAgICAgICAgICAgfQogICAgICAgICAgICBTdHJpbmcgb2xkVmFsdWUgPQog\nICAgICAgICAgICAgICAgbWFwLmNvbnRhaW5zS2V5KCJvcGVuanBhLk1ldGFE\nYXRhRmFjdG9yeSIpID8gIiwiICsgbWFwLmdldCgib3BlbmpwYS5NZXRhRGF0\nYUZhY3RvcnkiKS50b1N0cmluZygpIDogIiI7CiAgICAgICAgICAgIG1hcC5w\ndXQoIm9wZW5qcGEuTWV0YURhdGFGYWN0b3J5IiwgImpwYShUeXBlcz0iICsg\nYnVmLnRvU3RyaW5nKCkgKyBvbGRWYWx1ZSArICIpIik7CiAgICAgICAgfSBl\nbHNlIHsKICAgICAgICAgICAgbWFwLnB1dCgib3BlbmpwYS5NZXRhRGF0YUZh\nY3RvcnkiLCAianBhIik7CiAgICAgICAgfQogICAgICAgIHJldHVybiBtYXA7\nCiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBydW4oVGVz\ndFJlc3VsdCB0ZXN0UmVzdWx0KSB7CiAgICAgICAgdGhpcy50ZXN0UmVzdWx0\nID0gdGVzdFJlc3VsdDsKICAgICAgICBzdXBlci5ydW4odGVzdFJlc3VsdCk7\nCiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCB0ZWFyRG93\nbigpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIHN1cGVyLnRlYXJEb3duKCk7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0\naW9uIGUpIHsKICAgICAgICAgICAgLy8gaWYgYSB0ZXN0IGZhaWxlZCwgc3dh\nbGxvdyBhbnkgZXhjZXB0aW9ucyB0aGF0IGhhcHBlbgogICAgICAgICAgICAv\nLyBkdXJpbmcgdGVhci1kb3duLCBhcyB0aGVzZSBqdXN0IG1hc2sgdGhlIG9y\naWdpbmFsIHByb2JsZW0uCiAgICAgICAgICAgIGlmICh0ZXN0UmVzdWx0Lndh\nc1N1Y2Nlc3NmdWwoKSkgewogICAgICAgICAgICAgICAgdGhyb3cgZTsKICAg\nICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFNh\nZmVseSBjbG9zZSB0aGUgZ2l2ZW4gZmFjdG9yeS4KICAgICAqLwogICAgcHJv\ndGVjdGVkIGJvb2xlYW4gY2xvc2VFTUYoRW50aXR5TWFuYWdlckZhY3Rvcnkg\nZW1mKSB7CiAgICAgICAgaWYgKGVtZiA9PSBudWxsIHx8ICFlbWYuaXNPcGVu\nKCkpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAg\nICAgICAgY2xvc2VBbGxPcGVuRU1zKGVtZik7CiAgICAgICAgZW1mLmNsb3Nl\nKCk7CiAgICAgICAgcmV0dXJuICFlbWYuaXNPcGVuKCk7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBDbG9zZXMgYWxsIG9wZW4gZW50aXR5IG1hbmFnZXJzIGFm\ndGVyIGZpcnN0IHJvbGxpbmcgYmFjayBhbnkgb3BlbiB0cmFuc2FjdGlvbnMu\nCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIGNsb3NlQWxsT3BlbkVNcyhF\nbnRpdHlNYW5hZ2VyRmFjdG9yeSBlbWYpIHsKICAgICAgICBpZiAoZW1mID09\nIG51bGwgfHwgIWVtZi5pc09wZW4oKSkgewogICAgICAgICAgICByZXR1cm47\nCiAgICAgICAgfQoKICAgICAgICBmb3IgKEJyb2tlciBiIDogKChBYnN0cmFj\ndEJyb2tlckZhY3RvcnkpIEpQQUZhY2FkZUhlbHBlci50b0Jyb2tlckZhY3Rv\ncnkoZW1mKSkuZ2V0T3BlbkJyb2tlcnMoKSkgewogICAgICAgICAgICBpZiAo\nYiAhPSBudWxsICYmICFiLmlzQ2xvc2VkKCkpIHsKICAgICAgICAgICAgICAg\nIEVudGl0eU1hbmFnZXIgZW0gPSBKUEFGYWNhZGVIZWxwZXIudG9FbnRpdHlN\nYW5hZ2VyKGIpOwogICAgICAgICAgICAgICAgaWYgKGVtLmdldFRyYW5zYWN0\naW9uKCkuaXNBY3RpdmUoKSkgewogICAgICAgICAgICAgICAgICAgIGVtLmdl\ndFRyYW5zYWN0aW9uKCkucm9sbGJhY2soKTsKICAgICAgICAgICAgICAgIH0K\nICAgICAgICAgICAgICAgIGVtLmNsb3NlKCk7CiAgICAgICAgICAgIH0KICAg\nICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBEZWxldGUgYWxsIGluc3Rh\nbmNlcyBvZiB0aGUgZ2l2ZW4gdHlwZXMgdXNpbmcgYnVsayBkZWxldGUgcXVl\ncmllcywgYnV0IGRvIG5vdCBjbG9zZSBhbnkgb3BlbiBlbnRpdHkgbWFuYWdl\ncnMuCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIGNsZWFyKEVudGl0eU1h\nbmFnZXJGYWN0b3J5IGVtZiwgQ2xhc3M8Pz4uLi4gdHlwZXMpIHsKICAgICAg\nICBpZiAoZW1mID09IG51bGwgfHwgdHlwZXMubGVuZ3RoID09IDApIHsKICAg\nICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgTGlzdDxDbGFz\nc01ldGFEYXRhPiBtZXRhcyA9IG5ldyBBcnJheUxpc3Q8Q2xhc3NNZXRhRGF0\nYT4odHlwZXMubGVuZ3RoKTsKICAgICAgICBmb3IgKENsYXNzPD8+IGMgOiB0\neXBlcykgewogICAgICAgICAgICBDbGFzc01ldGFEYXRhIG1ldGEgPSBKUEFG\nYWNhZGVIZWxwZXIuZ2V0TWV0YURhdGEoZW1mLCBjKTsKICAgICAgICAgICAg\naWYgKG1ldGEgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgbWV0YXMuYWRk\nKG1ldGEpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGNsZWFy\nKGVtZiwgZmFsc2UsIG1ldGFzLnRvQXJyYXkobmV3IENsYXNzTWV0YURhdGFb\nbWV0YXMuc2l6ZSgpXSkpOwogICAgfQoKICAgIC8qKgogICAgICogRGVsZXRl\nIGFsbCBpbnN0YW5jZXMgb2YgdGhlIHBlcnNpc3RlbnQgdHlwZXMgcmVnaXN0\nZXJlZCB3aXRoIHRoZSBnaXZlbiBmYWN0b3J5IHVzaW5nIGJ1bGsgZGVsZXRl\nIHF1ZXJpZXMsIGFmdGVyCiAgICAgKiBmaXJzdCBjbG9zaW5nIGFsbCBvcGVu\nIGVudGl0eSBtYW5hZ2VycyAoYW5kIHJvbGxpbmcgYmFjayBhbnkgb3BlbiB0\ncmFuc2FjdGlvbnMpLgogICAgICovCiAgICBwcm90ZWN0ZWQgdm9pZCBjbGVh\ncihFbnRpdHlNYW5hZ2VyRmFjdG9yeSBlbWYpIHsKICAgICAgICBpZiAoZW1m\nID09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAg\nICAgICBjbGVhcihlbWYsIHRydWUsICgoT3BlbkpQQUVudGl0eU1hbmFnZXJG\nYWN0b3J5U1BJKSBlbWYpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRNZXRhRGF0\nYVJlcG9zaXRvcnlJbnN0YW5jZSgpCiAgICAgICAgICAgIC5nZXRNZXRhRGF0\nYXMoKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBEZWxldGUgYWxsIGluc3Rh\nbmNlcyBvZiB0aGUgZ2l2ZW4gdHlwZXMgdXNpbmcgYnVsayBkZWxldGUgcXVl\ncmllcy4KICAgICAqIAogICAgICogQHBhcmFtIGVtZgogICAgICogICAgICAg\nICAgICBUaGUgRW50aXR5TWFuYWdlckZhY3RvcnkgdG8gdXNlLiBBIG5ldyBF\nbnRpdHlNYW5hZ2VyIHdpbGwgYmUgY3JlYXRlZCBmcm9tIHRoaXMgRU1GIGFu\nZCB1c2VkIHRvIGV4ZWN1dGUKICAgICAqICAgICAgICAgICAgYnVsayB1cGRh\ndGVzLgogICAgICogQHBhcmFtIGNsb3NlRU1zCiAgICAgKiAgICAgICAgICAg\nIFdoZXRoZXIgYW55IG9wZW4gRU1zIHNob3VsZCBiZSBjbG9zZWQKICAgICAq\nIEBwYXJhbSB0eXBlcwogICAgICogICAgICAgICAgICB0aGUgdHlwZXMgdGhh\ndCB3aWxsIGJlIGNsZWFyZWQuCiAgICAgKi8KICAgIHByaXZhdGUgdm9pZCBj\nbGVhcihFbnRpdHlNYW5hZ2VyRmFjdG9yeSBlbWYsIGJvb2xlYW4gY2xvc2VF\nTXMsIENsYXNzTWV0YURhdGEuLi4gdHlwZXMpIHsKICAgICAgICBpZiAoZW1m\nID09IG51bGwgfHwgdHlwZXMubGVuZ3RoID09IDApIHsKICAgICAgICAgICAg\ncmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgLy8gcHJldmVudCBkZWFkbG9j\nayBieSBjbG9zaW5nIHRoZSBvcGVuIGVudGl0eSBtYW5hZ2VycwogICAgICAg\nIC8vIGFuZCByb2xsaW5nIGJhY2sgYW55IG9wZW4gdHJhbnNhY3Rpb25zCiAg\nICAgICAgLy8gYmVmb3JlIGlzc3VpbmcgZGVsZXRlIHN0YXRlbWVudHMgb24g\nYSBuZXcgZW50aXR5IG1hbmFnZXIuCiAgICAgICAgaWYgKGNsb3NlRU1zKSB7\nCiAgICAgICAgICAgIGNsb3NlQWxsT3BlbkVNcyhlbWYpOwogICAgICAgIH0K\nICAgICAgICBpZiAocmV0YWluRGF0YU9uVGVhckRvd24pIHsKICAgICAgICAg\nICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBFbnRpdHlNYW5hZ2VyIGVt\nID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRU\ncmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgZm9yIChDbGFzc01ldGFE\nYXRhIG1ldGEgOiB0eXBlcykgewogICAgICAgICAgICBpZiAoIW1ldGEuaXNN\nYXBwZWQoKSB8fCBtZXRhLmlzRW1iZWRkZWRPbmx5KCkKICAgICAgICAgICAg\nICAgIHx8IE1vZGlmaWVyLmlzQWJzdHJhY3QobWV0YS5nZXREZXNjcmliZWRU\neXBlKCkuZ2V0TW9kaWZpZXJzKCkpIAogICAgICAgICAgICAgICAgJiYgIWlz\nQmFzZU1hbmFnZWRJbnRlcmZhY2UobWV0YSwgdHlwZXMpKSB7CiAgICAgICAg\nICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBl\nbS5jcmVhdGVRdWVyeSgiREVMRVRFIEZST00gIiArIG1ldGEuZ2V0VHlwZUFs\naWFzKCkgKyAiIG8iKS5leGVjdXRlVXBkYXRlKCk7CiAgICAgICAgfQogICAg\nICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0u\nY2xvc2UoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgZW50\naXR5IG5hbWUgZm9yIHRoZSBnaXZlbiB0eXBlLgogICAgICovCiAgICBwcm90\nZWN0ZWQgU3RyaW5nIGVudGl0eU5hbWUoRW50aXR5TWFuYWdlckZhY3Rvcnkg\nZW1mLCBDbGFzczw/PiBjKSB7CiAgICAgICAgQ2xhc3NNZXRhRGF0YSBtZXRh\nID0gSlBBRmFjYWRlSGVscGVyLmdldE1ldGFEYXRhKGVtZiwgYyk7CiAgICAg\nICAgcmV0dXJuIChtZXRhID09IG51bGwpID8gbnVsbCA6IG1ldGEuZ2V0VHlw\nZUFsaWFzKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBEZXRlcm1pbmVzIGlm\nIHRoZSBjbGFzcyBhc3NvY2lhdGVkIHdpdGggdGhlIHByb3ZpZGVkIHtAbGlu\nayBDbGFzc01ldGFEYXRhfSBpcyBhIG1hbmFnZWQgaW50ZXJmYWNlIGFuZCBk\nb2VzIG5vdAogICAgICogZXh0ZW5kIGFub3RoZXIgbWFuYWdlZCBpbnRlcmZh\nY2UuCiAgICAgKiAKICAgICAqIEBwYXJhbSBtZXRhCiAgICAgKiAgICAgICAg\nICAgIHtAbGluayBDbGFzc01ldGFEYXRhfSBmb3IgdGhlIGNsYXNzIHRvIGV4\nYW1pbmUKICAgICAqIEBwYXJhbSB0eXBlcwogICAgICogICAgICAgICAgICBh\ncnJheSBvZiBjbGFzcyBtZXRhIGRhdGEgZm9yIHBlcnNpc3RlbnQgdHlwZXMK\nICAgICAqIEByZXR1cm4gdHJ1ZSBpZiB0aGUge0BsaW5rIENsYXNzTWV0YURh\ndGF9IGlzIGZvciBhbiBpbnRlcmZhY2UgYW5kIHRoZSBpbnRlcmZhY2UgZG9l\ncyBub3QgZXh0ZW5kIGFub3RoZXIgbWFuYWdlZAogICAgICogICAgICAgICBp\nbnRlcmZhY2UKICAgICAqLwogICAgcHJpdmF0ZSBib29sZWFuIGlzQmFzZU1h\nbmFnZWRJbnRlcmZhY2UoQ2xhc3NNZXRhRGF0YSBtZXRhLCBDbGFzc01ldGFE\nYXRhLi4uIHR5cGVzKSB7CgogICAgICAgIGlmIChNb2RpZmllci5pc0ludGVy\nZmFjZShtZXRhLmdldERlc2NyaWJlZFR5cGUoKS5nZXRNb2RpZmllcnMoKSkg\nJiYgIWlzRXh0ZW5kZWRNYW5hZ2VkSW50ZXJmYWNlKG1ldGEsIHR5cGVzKSkg\newogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAg\ncmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8qKgogICAgICogRGV0ZXJtaW5l\ncyBpZiB0aGUgY2xhc3MgYXNzb2NpYXRlZCB3aXRoIHRoZSBwcm92aWRlZCB7\nQGxpbmsgQ2xhc3NNZXRhRGF0YX0gaXMgYW4gaW50ZXJmYWNlIGFuZCBpZiBp\ndCBleHRlbmRzCiAgICAgKiBhbm90aGVyIG1hbmFnZWQgaW50ZXJmYWNlLgog\nICAgICogCiAgICAgKiBAcGFyYW0gbWV0YQogICAgICogICAgICAgICAgICB7\nQGxpbmsgQ2xhc3NNZXRhRGF0YX0gZm9yIHRoZSBjbGFzcyB0byBleGFtaW5l\nCiAgICAgKiBAcGFyYW0gdHlwZXMKICAgICAqICAgICAgICAgICAgYXJyYXkg\nb2YgY2xhc3MgbWV0YSBkYXRhIGZvciBwZXJzaXN0ZW50IHR5cGVzCiAgICAg\nKiBAcmV0dXJuIHRydWUgaWYgdGhlIHtAbGluayBDbGFzc01ldGFEYXRhfSBp\ncyBmb3IgYW4gaW50ZXJmYWNlIGFuZCB0aGUgaW50ZXJmYWNlIGV4dGVuZHMg\nYW5vdGhlciBtYW5hZ2VkIGludGVyZmFjZQogICAgICovCiAgICBwcml2YXRl\nIGJvb2xlYW4gaXNFeHRlbmRlZE1hbmFnZWRJbnRlcmZhY2UoQ2xhc3NNZXRh\nRGF0YSBtZXRhLCBDbGFzc01ldGFEYXRhLi4uIHR5cGVzKSB7CgogICAgICAg\nIGlmICghTW9kaWZpZXIuaXNJbnRlcmZhY2UobWV0YS5nZXREZXNjcmliZWRU\neXBlKCkuZ2V0TW9kaWZpZXJzKCkpKSB7CiAgICAgICAgICAgIHJldHVybiBm\nYWxzZTsKICAgICAgICB9CgogICAgICAgIC8vIFJ1biB0aHJvdWdoIHRoZSBp\nbnRlcmZhY2UgdGhpcyBjbGFzcyBleHRlbmRzLiBJZiBhbnkgb2YgdGhlbQog\nICAgICAgIC8vIGFyZSBtYW5hZ2VkL2hhdmUgY2xhc3MgbWV0YWRhdGEsIHJl\ndHVybiB0cnVlLgogICAgICAgIENsYXNzPD8+W10gaWZhY2VzID0gbWV0YS5n\nZXREZXNjcmliZWRUeXBlKCkuZ2V0SW50ZXJmYWNlcygpOwogICAgICAgIGZv\nciAoaW50IGkgPSAwOyBpZmFjZXMgIT0gbnVsbCAmJiBpIDwgaWZhY2VzLmxl\nbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGZvciAoQ2xhc3NNZXRhRGF0YSBt\nZXRhMiA6IHR5cGVzKSB7CiAgICAgICAgICAgICAgICBpZiAoaWZhY2VzW2ld\nLmVxdWFscyhtZXRhMi5nZXREZXNjcmliZWRUeXBlKCkpKSB7CiAgICAgICAg\nICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICB9CiAg\nICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwog\nICAgfQoKICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBhc3NlcnROb3RFcXVhbHMo\nT2JqZWN0IG8xLCBPYmplY3QgbzIpIHsKICAgICAgICBpZiAobzEgPT0gbzIp\nIHsKICAgICAgICAgICAgZmFpbCgiZXhwZWN0ZWQgYXJncyB0byBiZSBkaWZm\nZXJlbnQ7IHdlcmUgdGhlIHNhbWUgaW5zdGFuY2UuIik7CiAgICAgICAgfSBl\nbHNlIGlmIChvMSA9PSBudWxsIHx8IG8yID09IG51bGwpIHsKICAgICAgICAg\nICAgcmV0dXJuOwogICAgICAgIH0gZWxzZSBpZiAobzEuZXF1YWxzKG8yKSkg\newogICAgICAgICAgICBmYWlsKCJleHBlY3RlZCBhcmdzIHRvIGJlIGRpZmZl\ncmVudDsgY29tcGFyZWQgZXF1YWwuIik7CiAgICAgICAgfQogICAgfQoKICAg\nIC8qKgogICAgICogUm91bmQtdHJpcCBhIHNlcmlhbGl6YWJsZSBvYmplY3Qg\ndG8gYnl0ZXMuCiAgICAgKi8KICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJ1bmNo\nZWNrZWQiKQogICAgcHVibGljIHN0YXRpYyA8VD4gVCByb3VuZHRyaXAoVCBv\nKSB0aHJvd3MgQ2xhc3NOb3RGb3VuZEV4Y2VwdGlvbiwgSU9FeGNlcHRpb24g\newogICAgICAgIEJ5dGVBcnJheU91dHB1dFN0cmVhbSBieXRlcyA9IG5ldyBC\neXRlQXJyYXlPdXRwdXRTdHJlYW0oKTsKICAgICAgICBPYmplY3RPdXRwdXRT\ndHJlYW0gb3V0ID0gbmV3IE9iamVjdE91dHB1dFN0cmVhbShieXRlcyk7CiAg\nICAgICAgb3V0LndyaXRlT2JqZWN0KG8pOwogICAgICAgIG91dC5mbHVzaCgp\nOwogICAgICAgIE9iamVjdElucHV0U3RyZWFtIGluID0gbmV3IE9iamVjdElu\ncHV0U3RyZWFtKG5ldyBCeXRlQXJyYXlJbnB1dFN0cmVhbShieXRlcy50b0J5\ndGVBcnJheSgpKSk7CiAgICAgICAgcmV0dXJuIChUKSBpbi5yZWFkT2JqZWN0\nKCk7CiAgICB9CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09\nPT09PT09PT09PT09PT09PT09PT09CiAgICAvLyBVdGlsaXR5IG1ldGhvZHMg\nZm9yIGV4Y2VwdGlvbiBoYW5kbGluZwogICAgLy8gPT09PT09PT09PT09PT09\nPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAvKioKICAg\nICAqIEFzc2VydHMgdGhhdCB0aGUgZ2l2ZW4gdGFyZ2V0VHlwZSBpcyBhc3Np\nZ25hYmxlIGZyb20gZ2l2ZW4gYWN0dWFsIFRocm93YWJsZS4KICAgICAqLwog\nICAgcHJvdGVjdGVkIHZvaWQgYXNzZXJ0RXhjZXB0aW9uKGZpbmFsIFRocm93\nYWJsZSBhY3R1YWwsIENsYXNzPD8+IHRhcmdldFR5cGUpIHsKICAgICAgICBh\nc3NlcnRFeGNlcHRpb24oYWN0dWFsLCB0YXJnZXRUeXBlLCBudWxsKTsKICAg\nIH0KCiAgICAvKioKICAgICAqIEFzc2VydHMgdGhhdCB0aGUgZ2l2ZW4gdGFy\nZ2V0VHlwZSBpcyBhc3NpZ25hYmxlIGZyb20gZ2l2ZW4gYWN0dWFsIFRocm93\nYWJsZS4gQXNzZXJ0cyB0aGF0IHRoZSBuZXN0ZWRUeXBlIGlzIAogICAgICog\nbmVzdGVkIChwb3NzaWJseSByZWN1cnNpdmVseSkgd2l0aGluIHRoZSBnaXZl\nbiBhY3R1YWwgVGhyb3dhYmxlLgogICAgICoKICAgICAqIEBwYXJhbSBhY3R1\nYWwKICAgICAqICAgICAgICAgICAgaXMgdGhlIGFjdHVhbCB0aHJvd2FibGUg\ndG8gYmUgdGVzdGVkCiAgICAgKiBAcGFyYW0gdGFyZ2V0VHlwZQogICAgICog\nICAgICAgICAgICBpcyBleHBlY3RlZCB0eXBlIG9yIHN1cGVyIHR5cGUgb2Yg\nYWN0dWFsLiBJZiBudWxsLCB0aGVuIHRoZSBjaGVjayBpcyBvbWl0dGVkLgog\nICAgICogQHBhcmFtIG5lc3RlZFRhcmdldFR5cGUKICAgICAqICAgICAgICAg\nICAgaXMgZXhwZWN0ZWQgdHlwZSBvZiBleGNlcHRpb24gbmVzdGVkIHdpdGhp\nbiBhY3R1YWwuIElmIG51bGwgdGhpcyBzZWFyY2ggaXMgb21pdHRlZC4KICAg\nICAqCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIGFzc2VydEV4Y2VwdGlv\nbihmaW5hbCBUaHJvd2FibGUgYWN0dWFsLCBDbGFzczw/PiB0YXJnZXRUeXBl\nLCBDbGFzczw/PiBuZXN0ZWRUYXJnZXRUeXBlKSB7CiAgICAgICAgYXNzZXJ0\nTm90TnVsbChhY3R1YWwpOwogICAgICAgIENsYXNzPD8+IGFjdHVhbFR5cGUg\nPSBhY3R1YWwuZ2V0Q2xhc3MoKTsKICAgICAgICBpZiAodGFyZ2V0VHlwZSAh\nPSBudWxsICYmICF0YXJnZXRUeXBlLmlzQXNzaWduYWJsZUZyb20oYWN0dWFs\nVHlwZSkpIHsKICAgICAgICAgICAgYWN0dWFsLnByaW50U3RhY2tUcmFjZSgp\nOwogICAgICAgICAgICBmYWlsKHRhcmdldFR5cGUuZ2V0TmFtZSgpICsgIiBp\ncyBub3QgYXNzaWduYWJsZSBmcm9tICIgKyBhY3R1YWxUeXBlLmdldE5hbWUo\nKSk7CiAgICAgICAgfQoKICAgICAgICBpZiAobmVzdGVkVGFyZ2V0VHlwZSAh\nPSBudWxsKSB7CiAgICAgICAgICAgIFRocm93YWJsZSBuZXN0ZWQgPSBhY3R1\nYWwuZ2V0Q2F1c2UoKTsKICAgICAgICAgICAgQ2xhc3M8Pz4gbmVzdGVkQWN0\ndWFsVHlwZSA9IChuZXN0ZWQgPT0gbnVsbCkgPyBudWxsIDogbmVzdGVkLmdl\ndENsYXNzKCk7CiAgICAgICAgICAgIHdoaWxlIChuZXN0ZWRBY3R1YWxUeXBl\nICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIGlmIChuZXN0ZWRUYXJnZXRU\neXBlLmlzQXNzaWduYWJsZUZyb20obmVzdGVkQWN0dWFsVHlwZSkpIHsKICAg\nICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9IGVs\nc2UgewogICAgICAgICAgICAgICAgICAgIFRocm93YWJsZSBuZXh0ID0gbmVz\ndGVkLmdldENhdXNlKCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQg\nPT0gbnVsbCB8fCBuZXh0ID09IG5lc3RlZCkgewogICAgICAgICAgICAgICAg\nICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAg\nICAgICAgICAgICAgbmVzdGVkQWN0dWFsVHlwZSA9IG5leHQuZ2V0Q2xhc3Mo\nKTsKICAgICAgICAgICAgICAgICAgICBuZXN0ZWQgPSBuZXh0OwogICAgICAg\nICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGFjdHVhbC5w\ncmludFN0YWNrVHJhY2UoKTsKICAgICAgICAgICAgZmFpbCgiTm8gbmVzdGVk\nIHR5cGUgIiArIG5lc3RlZFRhcmdldFR5cGUgKyAiIGluICIgKyBhY3R1YWwp\nOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEFzc2VydHMgdGhh\ndCB0aGUgZ2l2ZW4gdGFyZ2V0VHlwZSBpcyBhc3NpZ25hYmxlIGZyb20gZ2l2\nZW4gYWN0dWFsIFRocm93YWJsZSBhbmQgdGhhdCB0aGUgZXhjZXB0aW9uIG1l\nc3NhZ2UKICAgICAqIGNvbnRhaW5zIHRoZSBzcGVjaWZpZWQgbWVzc2FnZSBv\nciBtZXNzYWdlIGZyYWdtZW50cy4KICAgICAqLwogICAgcHJvdGVjdGVkIHZv\naWQgYXNzZXJ0RXhjZXB0aW9uTWVzc2FnZShmaW5hbCBUaHJvd2FibGUgYWN0\ndWFsLCBDbGFzczw/PiB0YXJnZXRUeXBlLCBTdHJpbmcuLi4gbWVzc2FnZXMp\nIHsKICAgICAgICBhc3NlcnRFeGNlcHRpb24oYWN0dWFsLCB0YXJnZXRUeXBl\nLCBudWxsKTsKICAgICAgICBhc3NlcnRNZXNzYWdlKGFjdHVhbCwgbWVzc2Fn\nZXMpOwogICAgfQoKICAgIC8qKgogICAgICogQXNzZXJ0IHRoYXQgZWFjaCBv\nZiBnaXZlbiBrZXlzIGFyZSBwcmVzZW50IGluIHRoZSBtZXNzYWdlIG9mIHRo\nZSBnaXZlbiBUaHJvd2FibGUuCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lk\nIGFzc2VydE1lc3NhZ2UoVGhyb3dhYmxlIGFjdHVhbCwgU3RyaW5nLi4uIGtl\neXMpIHsKICAgICAgICBpZiAoYWN0dWFsID09IG51bGwgfHwga2V5cyA9PSBu\ndWxsKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAg\nU3RyaW5nIG1lc3NhZ2UgPSBhY3R1YWwuZ2V0TWVzc2FnZSgpOwogICAgICAg\nIGZvciAoU3RyaW5nIGtleSA6IGtleXMpIHsKICAgICAgICAgICAgYXNzZXJ0\nVHJ1ZShrZXkgKyAiIGlzIG5vdCBpbiAiICsgbWVzc2FnZSwgbWVzc2FnZS5j\nb250YWlucyhrZXkpKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZv\naWQgcHJpbnRFeGNlcHRpb24oVGhyb3dhYmxlIHQpIHsKICAgICAgICBwcmlu\ndEV4Y2VwdGlvbih0LCAyKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBwcmlu\ndEV4Y2VwdGlvbihUaHJvd2FibGUgdCwgaW50IHRhYikgewogICAgICAgIGlm\nICh0ID09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0K\nICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHRhYiAqIDQ7IGkrKykgewog\nICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50KCIgIik7CiAgICAgICAgfQog\nICAgICAgIFN0cmluZyBzcWxTdGF0ZSA9CiAgICAgICAgICAgICh0IGluc3Rh\nbmNlb2YgU1FMRXhjZXB0aW9uKSA/ICIoU1FMU3RhdGU9IiArICgoU1FMRXhj\nZXB0aW9uKSB0KS5nZXRTUUxTdGF0ZSgpICsgIjoiICsgdC5nZXRNZXNzYWdl\nKCkgKyAiKSIKICAgICAgICAgICAgICAgIDogIiI7CiAgICAgICAgU3lzdGVt\nLm91dC5wcmludGxuKHQuZ2V0Q2xhc3MoKS5nZXROYW1lKCkgKyBzcWxTdGF0\nZSk7CiAgICAgICAgaWYgKHQuZ2V0Q2F1c2UoKSA9PSB0KSB7CiAgICAgICAg\nICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgcHJpbnRFeGNlcHRpb24o\ndC5nZXRDYXVzZSgpLCB0YWIgKyAyKTsKICAgIH0KCiAgICAvKioKICAgICAq\nIE92ZXJyaWRlcyB0byBhbGxvdyB0ZXN0cyBhbm5vdGF0ZWQgd2l0aCBAQWxs\nb3dGYWlsdXJlIHRvIGZhaWwuCiAgICAgKiBJZiBARGF0YWJhc2VQbGF0Zm9y\nbSB2YWx1ZSBtYXRjaGVzIHRoZSBjdXJyZW50IEpEQkMgZHJpdmVyIG9yCiAg\nICAgKiB0ZXN0cyBoYXZlIGJlZW4gZGlzYWJsZWQsIHRoZW4gdGhlIHRlc3Qg\nd2lsbCBub3QgYmUgcnVuLgogICAgICogSWYgdGhlIHRlc3QgaXMgaW4gZXJy\nb3IgdGhlbiB0aGUgbm9ybWFsIHBhdGh3YXkgaXMgZXhlY3V0ZWQuCiAgICAg\nKi8KICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgcnVuQmFyZSgpIHRo\ncm93cyBUaHJvd2FibGUgewogICAgICAgIGlmICghaXNSdW5zT25DdXJyZW50\nUGxhdGZvcm0oKSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQog\nICAgICAgIHJ1bkJhcmUoZ2V0QWxsb3dGYWlsdXJlKCkpOwogICAgfQoKICAg\nIHByb3RlY3RlZCB2b2lkIHJ1bkJhcmUoQWxsb3dGYWlsdXJlIGFsbG93RmFp\nbHVyZUFubm90YXRpb24pIHRocm93cyBUaHJvd2FibGUgewogICAgICAgIGJv\nb2xlYW4gYWxsb3dGYWlsdXJlVmFsdWUgPSBhbGxvd0ZhaWx1cmVBbm5vdGF0\naW9uID09IG51bGwgPyBmYWxzZSA6IGFsbG93RmFpbHVyZUFubm90YXRpb24u\ndmFsdWUoKTsKCiAgICAgICAgaWYgKGFsbG93RmFpbHVyZVZhbHVlKSB7CiAg\nICAgICAgICAgIGlmIChBTExPV19GQUlMVVJFX0lHTk9SRS5lcXVhbHNJZ25v\ncmVDYXNlKGFsbG93RmFpbHVyZUNvbmZpZykpIHsKICAgICAgICAgICAgICAg\nIHJldHVybjsgLy8gc2tpcCB0aGlzIHRlc3QKICAgICAgICAgICAgfSBlbHNl\nIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAg\nc3VwZXIucnVuQmFyZSgpOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoVGhy\nb3dhYmxlIHQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoQUxMT1dfRkFJ\nTFVSRV9MT0cuZXF1YWxzSWdub3JlQ2FzZShhbGxvd0ZhaWx1cmVDb25maWcp\nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRs\nbigiKioqIEZBSUxFRCAoYnV0IGlnbm9yZWQpOiAiICsgdGhpcyk7CiAgICAg\nICAgICAgICAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbigiKioqICAg\nICAgICAgICAgICBSZWFzb24gOiAiICsgYWxsb3dGYWlsdXJlQW5ub3RhdGlv\nbi5tZXNzYWdlKCkpOwogICAgICAgICAgICAgICAgICAgICAgICBTeXN0ZW0u\nZXJyLnByaW50bG4oIlN0YWNrdHJhY2Ugb2YgZmFpbHVyZSIpOwogICAgICAg\nICAgICAgICAgICAgICAgICB0LnByaW50U3RhY2tUcmFjZSgpOwogICAgICAg\nICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAg\nIHRocm93IHQ7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAg\nICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAg\nICAgc3VwZXIucnVuQmFyZSgpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioK\nICAgICAqIE92ZXJyaWRlIHRvIHJ1biB0aGUgdGVzdCBhbmQgYXNzZXJ0IGl0\ncyBzdGF0ZS4KICAgICAqIEBleGNlcHRpb24gVGhyb3dhYmxlIGlmIGFueSBl\neGNlcHRpb24gaXMgdGhyb3duCiAgICAgKi8KICAgIEBPdmVycmlkZQogICAg\ncHJvdGVjdGVkIHZvaWQgcnVuVGVzdCgpIHRocm93cyBUaHJvd2FibGUgewog\nICAgICAgIGlmIChpc1Rlc3RzRGlzYWJsZWQoKSkgewogICAgICAgICAgICBy\nZXR1cm47CiAgICAgICAgfQogICAgICAgIHN1cGVyLnJ1blRlc3QoKTsKICAg\nIH0KICAgIAogICAgLyoqCiAgICAgKiBBZmZpcm1zIGlmIHRoZSB0ZXN0IGNh\nc2Ugb3IgdGhlIHRlc3QgbWV0aG9kIGlzIGFubm90YXRlZCB3aXRoCiAgICAg\nKiAKICAgICAqIEBBbGxvd0ZhaWx1cmUuIE1ldGhvZCBsZXZlbCBhbm5vdGF0\naW9uIGhhcyBoaWdoZXIgcHJlY2VkZW5jZSB0aGFuIENsYXNzIGxldmVsIGFu\nbm90YXRpb24uCiAgICAgKi8KICAgIHByb3RlY3RlZCBBbGxvd0ZhaWx1cmUg\nZ2V0QWxsb3dGYWlsdXJlKCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAg\nIE1ldGhvZCBydW5NZXRob2QgPSBnZXRDbGFzcygpLmdldE1ldGhvZChnZXRO\nYW1lKCksIChDbGFzc1tdKSBudWxsKTsKICAgICAgICAgICAgQWxsb3dGYWls\ndXJlIGFubm8gPSBydW5NZXRob2QuZ2V0QW5ub3RhdGlvbihBbGxvd0ZhaWx1\ncmUuY2xhc3MpOwogICAgICAgICAgICBpZiAoYW5ubyAhPSBudWxsKSB7CiAg\nICAgICAgICAgICAgICByZXR1cm4gYW5ubzsKICAgICAgICAgICAgfQogICAg\nICAgIH0gY2F0Y2ggKFNlY3VyaXR5RXhjZXB0aW9uIGUpIHsKICAgICAgICAg\nICAgLy8gaWdub3JlCiAgICAgICAgfSBjYXRjaCAoTm9TdWNoTWV0aG9kRXhj\nZXB0aW9uIGUpIHsKICAgICAgICAgICAgLy8gaWdub3JlCiAgICAgICAgfQog\nICAgICAgIHJldHVybiBnZXRDbGFzcygpLmdldEFubm90YXRpb24oQWxsb3dG\nYWlsdXJlLmNsYXNzKTsKICAgIH0KCiAgICAvKioKICAgICAqIEFmZmlybXMg\naWYgZWl0aGVyIHRoaXMgdGVzdCBoYXMgYmVlbiBhbm5vdGF0ZWQgd2l0aCBA\nRGF0YWJhc2VQbGF0Zm9ybSBhbmQgYXQgbGVhc3Qgb25lIG9mIHRoZSBzcGVj\naWZpZWQgZHJpdmVyIGlzCiAgICAgKiBhdmFpbGFibGUgaW4gdGhlIGNsYXNz\ncGF0aCwgb3Igbm8gc3VjaCBhbm5vdGF0aW9uIGlzIHVzZWQuCiAgICAgKiAK\nICAgICAqLwogICAgcHJvdGVjdGVkIGJvb2xlYW4gaXNSdW5zT25DdXJyZW50\nUGxhdGZvcm0oKSB7CiAgICAgICAgRGF0YWJhc2VQbGF0Zm9ybSBhbm5vID0g\nZ2V0Q2xhc3MoKS5nZXRBbm5vdGF0aW9uKERhdGFiYXNlUGxhdGZvcm0uY2xh\nc3MpOwogICAgICAgIGlmIChhbm5vID09IG51bGwpIHsKICAgICAgICAgICAg\ncmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIGlmIChhbm5vICE9IG51\nbGwpIHsKICAgICAgICAgICAgU3RyaW5nIHZhbHVlID0gYW5uby52YWx1ZSgp\nOwogICAgICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCB8fCB2YWx1ZS50cmlt\nKCkubGVuZ3RoKCkgPT0gMCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRy\ndWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgU3RyaW5nW10gZHJpdmVy\ncyA9IHZhbHVlLnNwbGl0KCJcXCwiKTsKICAgICAgICAgICAgZm9yIChTdHJp\nbmcgZHJpdmVyIDogZHJpdmVycykgewogICAgICAgICAgICAgICAgdHJ5IHsK\nICAgICAgICAgICAgICAgICAgICBDbGFzcy5mb3JOYW1lKGRyaXZlci50cmlt\nKCksIGZhbHNlLCBUaHJlYWQuY3VycmVudFRocmVhZCgpLmdldENvbnRleHRD\nbGFzc0xvYWRlcigpKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1\nZTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7CiAg\nICAgICAgICAgICAgICAgICAgLy8gaWdub3JlCiAgICAgICAgICAgICAgICB9\nCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNl\nOwogICAgfQoKICAgIC8qKgogICAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIHNw\nZWNpZmllZCBwbGF0Zm9ybSBpcyB0aGUgdGFyZ2V0IGRhdGFiYXNlIHBsYXRm\nb3JtIGluIHVzZSBieSB0aGUgdGVzdCBmcmFtZXdvcmsuCiAgICAgKiAKICAg\nICAqIEBwYXJhbSB0YXJnZXQKICAgICAqICAgICAgICAgICAgcGxhdGZvcm0g\nbmFtZSAoZGVyYnksIGRiMiwgb3JhY2xlLCBldGMuKQogICAgICogQHJldHVy\nbiB0cnVlIGlmIHRoZSBzcGVjaWZpZWQgcGxhdGZvcm0gbWF0Y2hlcyB0aGUg\ncGxhdGZvcm0gaW4gdXNlCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlz\nVGFyZ2V0UGxhdGZvcm0oU3RyaW5nIHRhcmdldCkgewogICAgICAgIFN0cmlu\nZyB1cmwgPSBnZXRQbGF0Zm9ybSgpOwogICAgICAgIHJldHVybiB1cmwgIT0g\nbnVsbCAmJiB1cmwuaW5kZXhPZih0YXJnZXQpICE9IC0xOwogICAgfQoKICAg\nIC8qKgogICAgICogUmV0dXJucyB0aGUgcGxhdGZvcm0gaW4gdXNlIGJ5IHRo\nZSB0ZXN0IGZyYW1ld29yawogICAgICogCiAgICAgKiBAcmV0dXJuIHRoZSBk\nYXRhYmFzZSBwbGF0Zm9ybQogICAgICovCiAgICBwdWJsaWMgU3RyaW5nIGdl\ndFBsYXRmb3JtKCkgewogICAgICAgIHJldHVybiBTeXN0ZW0uZ2V0UHJvcGVy\ndHkoInBsYXRmb3JtIiwgImRlcmJ5Iik7CiAgICB9CiAgICAKICAgIC8qKgog\nICAgICogQXNzZXJ0IHdoZXRoZXIgdGhlIENhY2hlIGNvbnRhaW5zIGFuIGlu\nc3RhbmNlIG9mIHRoZSBzcGVjaWZpZWQgY2xhc3MgYW5kIGlkLgogICAgICog\nCiAgICAgKiBAcGFyYW0gY2FjaGUKICAgICAqICAgICAgICAgICAgVGhlIEpQ\nQSBDYWNoZSB0byB2ZXJpZnkKICAgICAqIEBwYXJhbSBjbHNzCiAgICAgKiAg\nICAgICAgICAgIFRoZSBFbnRpdHkgdHlwZQogICAgICogQHBhcmFtIGlkCiAg\nICAgKiAgICAgICAgICAgIElEIG9mIHRoZSBlbnRpdHkKICAgICAqIEBwYXJh\nbSBleHBlY3RlZAogICAgICogICAgICAgICAgICBXaGV0aGVyIHRoZSBjbGFz\ncyBzaG91bGQgYmUgZm91bmQgaW4gdGhlIGNhY2hlCiAgICAgKi8KICAgIHBy\nb3RlY3RlZCB2b2lkIGFzc2VydENhY2hlZChDYWNoZSBjYWNoZSwgQ2xhc3M8\nPz4gY2xzcywgT2JqZWN0IGlkLCBib29sZWFuIGV4cGVjdGVkKSB7CiAgICAg\nICAgaWYgKGV4cGVjdGVkKSB7CiAgICAgICAgICAgIGFzc2VydFRydWUoU3Ry\naW5nLmZvcm1hdCgiRXhwZWN0ZWQgJXM6JXMgdG8gZXhpc3QgaW4gY2FjaGUi\nLCBjbHNzLCBpZCksIGNhY2hlLmNvbnRhaW5zKGNsc3MsIGlkKSk7CiAgICAg\nICAgfSBlbHNlIHsKICAgICAgICAgICAgYXNzZXJ0RmFsc2UoU3RyaW5nLmZv\ncm1hdCgiRXhwZWN0ZWQgJXM6JXMgbm90IHRvIGV4aXN0IGluIGNhY2hlIiwg\nY2xzcywgaWQpLCBjYWNoZS5jb250YWlucyhjbHNzLCBpZCkpOwogICAgICAg\nIH0KICAgIH0KICAgIAogICAgcHJvdGVjdGVkIHZvaWQgc2V0VGVzdHNEaXNh\nYmxlZChib29sZWFuIGRpc2FibGUpIHsKICAgICAgICBzeW5jaHJvbml6ZWQg\nKHRlc3RzRGlzYWJsZWQpIHsKICAgICAgICAgICAgdGVzdHNEaXNhYmxlZCA9\nIG5ldyBCb29sZWFuKGRpc2FibGUpOwogICAgICAgIH0KICAgIH0KICAgIAog\nICAgcHJvdGVjdGVkIGJvb2xlYW4gaXNUZXN0c0Rpc2FibGVkKCkgewogICAg\nICAgIHN5bmNocm9uaXplZCAodGVzdHNEaXNhYmxlZCkgewogICAgICAgICAg\nICByZXR1cm4gdGVzdHNEaXNhYmxlZC5ib29sZWFuVmFsdWUoKTsKICAgICAg\nICB9CiAgICB9CgogICAgcHJvdGVjdGVkIENsYXNzPD8+IHJlc29sdmVFbnRp\ndHlDbGFzcyhKUEFFbnRpdHlDbGFzc0VudW0gZW51bWVyYXRpb25SZWYpCiAg\nICAgICAgdGhyb3dzIENsYXNzTm90Rm91bmRFeGNlcHRpb24KICAgIHsKICAg\nICAgICBpZiAoZW51bWVyYXRpb25SZWYgPT0gbnVsbCkKICAgICAgICB7CiAg\nICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24o\nIk51bGwgdmFsdWUgcGFzc2VkIGludG8gdGhlIGNvbnN0cnVjdE5ld0VudGl0\neU9iamVjdCBtZXRob2QuIik7CiAgICAgICAgfQogICAgICAgIFN0cmluZyBj\nbGFzc05hbWUgPSBlbnVtZXJhdGlvblJlZi5nZXRFbnRpdHlDbGFzc05hbWUo\nKTsKICAgICAgICBpZiAoY2xhc3NOYW1lID09IG51bGwpCiAgICAgICAgewog\nICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9u\nKCJFbnVtZXJhdGlvbiB0b1N0cmluZygpIG1ldGhvZCBpbXBsZW1lbnRhdGlv\nbiByZXR1cm5lZCBhIG51bGwgdmFsdWUuIik7CiAgICAgICAgfQoKICAgICAg\nICByZXR1cm4gQ2xhc3MuZm9yTmFtZShjbGFzc05hbWUpOwogICAgfQoKICAg\nIHByb3RlY3RlZCBPYmplY3QgY29uc3RydWN0TmV3RW50aXR5T2JqZWN0KEpQ\nQUVudGl0eUNsYXNzRW51bSBlbnVtZXJhdGlvblJlZikKICAgICAgICB0aHJv\nd3MgQ2xhc3NOb3RGb3VuZEV4Y2VwdGlvbiwgU2VjdXJpdHlFeGNlcHRpb24s\nIE5vU3VjaE1ldGhvZEV4Y2VwdGlvbiwKICAgICAgICBJbGxlZ2FsQXJndW1l\nbnRFeGNlcHRpb24sIEluc3RhbnRpYXRpb25FeGNlcHRpb24sCiAgICAgICAg\nSWxsZWdhbEFjY2Vzc0V4Y2VwdGlvbiwgSW52b2NhdGlvblRhcmdldEV4Y2Vw\ndGlvbgogICAgewogICAgICAgIENsYXNzPD8+IGNsYXNzVHlwZSA9IHJlc29s\ndmVFbnRpdHlDbGFzcyhlbnVtZXJhdGlvblJlZik7CiAgICAgICAgQ2xhc3M8\nPz4gY29uc3RydWN0b3JBcmdTaWdbXSA9IG5ldyBDbGFzc1tdIHt9OwogICAg\nICAgIE9iamVjdCBjb25zdHJ1Y3RvckFyZ3NbXSA9IG5ldyBPYmplY3RbXSB7\nfTsKCiAgICAgICAgQ29uc3RydWN0b3I8Pz4gY2xhc3NDb25zdHJ1Y3RvciA9\nIGNsYXNzVHlwZS5nZXRDb25zdHJ1Y3Rvcihjb25zdHJ1Y3RvckFyZ1NpZyk7\nCiAgICAgICAgT2JqZWN0IG5ld0VudGl0eSA9IGNsYXNzQ29uc3RydWN0b3Iu\nbmV3SW5zdGFuY2UoY29uc3RydWN0b3JBcmdzKTsKCiAgICAgICAgcmV0dXJu\nIG5ld0VudGl0eTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgT2JqZWN0IGNvbnN0\ncnVjdE5ld0VudGl0eU9iamVjdChDbGFzczw/PiBlbnRpdHlDbGFzcykKICAg\nICAgICB0aHJvd3MgU2VjdXJpdHlFeGNlcHRpb24sIE5vU3VjaE1ldGhvZEV4\nY2VwdGlvbiwKICAgICAgICBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24sIElu\nc3RhbnRpYXRpb25FeGNlcHRpb24sCiAgICAgICAgSWxsZWdhbEFjY2Vzc0V4\nY2VwdGlvbiwgSW52b2NhdGlvblRhcmdldEV4Y2VwdGlvbgogICAgewogICAg\nICAgIENsYXNzPD8+IGNvbnN0cnVjdG9yQXJnU2lnW10gPSBuZXcgQ2xhc3Nb\nXSB7fTsKICAgICAgICBPYmplY3QgY29uc3RydWN0b3JBcmdzW10gPSBuZXcg\nT2JqZWN0W10ge307CgogICAgICAgIENvbnN0cnVjdG9yPD8+IGNsYXNzQ29u\nc3RydWN0b3IgPSBlbnRpdHlDbGFzcy5nZXRDb25zdHJ1Y3Rvcihjb25zdHJ1\nY3RvckFyZ1NpZyk7CiAgICAgICAgT2JqZWN0IG5ld0VudGl0eSA9IGNsYXNz\nQ29uc3RydWN0b3IubmV3SW5zdGFuY2UoY29uc3RydWN0b3JBcmdzKTsKCiAg\nICAgICAgcmV0dXJuIG5ld0VudGl0eTsKICAgIH0KCn0K\n","encoding":"base64"}

