{"sha":"5940c1cd45aa61e47822e2302112bf6cb8a9538d","node_id":"MDQ6QmxvYjIwNjM2NDo1OTQwYzFjZDQ1YWE2MWU0NzgyMmUyMzAyMTEyYmY2Y2I4YTk1Mzhk","size":7308,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/5940c1cd45aa61e47822e2302112bf6cb8a9538d","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuZGF0YWNhY2hlOwoKaW1wb3J0\nIGphdmEudXRpbC5IYXNoTWFwOwppbXBvcnQgamF2YS51dGlsLk1hcDsKaW1w\nb3J0IGphdmEudXRpbC5TZXQ7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmNvbmYuT3BlbkpQQUNvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEuZW5oYW5jZS5QQ0RhdGFHZW5lcmF0b3I7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEua2VybmVsLk9wZW5KUEFTdGF0ZU1hbmFnZXI7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmNvbmYuT2JqZWN0VmFsdWU7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuQ2xvc2VhYmxl\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuQ2xhc3NNZXRhRGF0\nYTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLkltcGxIZWxwZXI7\nCgovKioKICogRGVmYXVsdCBkYXRhIGNhY2hlIG1hbmFnZXIgcHJvdmlkZXMg\naGFuZGxlIHRvIHV0aWxpdGllcyB7QGxpbmtwbGFpbiBQQ0RhdGFHZW5lcmF0\nb3J9LCB7QGxpbmtwbGFpbiBDbGVhcmFibGVTY2hlZHVsZXJ9CiAqIGFuZCB7\nQGxpbmtwbGFpbiBDYWNoZURpc3RyaWJ1dGlvblBvbGljeX0gZm9yIHRoZSBj\nYWNoZSBvcGVyYXRpb24uIFRoaXMgaW1wbGVtZW50YXRpb24gYWxzbyBkZXRl\ncm1pbmVzIHdoZXRoZXIgYQogKiBtYW5hZ2VkIHR5cGUgaXMgZWxpZ2libGUg\ndG8gY2FjaGUuCiAqIAogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKiBAYXV0aG9y\nIFBhdHJpY2sgTGluc2tleQogKiBAYXV0aG9yIFBpbmFraSBQb2RkYXIKICov\nCnB1YmxpYyBjbGFzcyBEYXRhQ2FjaGVNYW5hZ2VySW1wbAogICAgaW1wbGVt\nZW50cyBDbG9zZWFibGUsIERhdGFDYWNoZU1hbmFnZXIgewoKICAgIHByaXZh\ndGUgT3BlbkpQQUNvbmZpZ3VyYXRpb24gX2NvbmY7CiAgICBwcml2YXRlIERh\ndGFDYWNoZSBfY2FjaGUgPSBudWxsOwogICAgcHJpdmF0ZSBRdWVyeUNhY2hl\nIF9xdWVyeUNhY2hlID0gbnVsbDsKICAgIHByaXZhdGUgRGF0YUNhY2hlUENE\nYXRhR2VuZXJhdG9yIF9wY0dlbmVyYXRvciA9IG51bGw7CiAgICBwcml2YXRl\nIENsZWFyYWJsZVNjaGVkdWxlciBfc2NoZWR1bGVyID0gbnVsbDsKICAgIHBy\naXZhdGUgQ2FjaGVEaXN0cmlidXRpb25Qb2xpY3kgX3BvbGljeSA9IG5ldyBE\nZWZhdWx0Q2FjaGVEaXN0cmlidXRpb25Qb2xpY3koKTsKICAgIHByaXZhdGUg\nTWFwPENsYXNzTWV0YURhdGEsQm9vbGVhbj4gX2NhY2hlYWJsZSA9IG5ldyBI\nYXNoTWFwPENsYXNzTWV0YURhdGEsIEJvb2xlYW4+KCk7CiAgICAKICAgIC8v\nIFByb3BlcnRpZXMgdGhhdCBhcmUgY29uZmlndXJlZCB2aWEgb3BlbmpwYS5E\nYXRhQ2FjaGUgYnV0IG5lZWQgdG8gYmUgdXNlZCBoZXJlLiBUaGlzIGlzIGhl\ncmUgdG8gc3VwcG9ydCB0aGUgMS4yCiAgICAvLyB3YXkgb2YgZG9pbmcgdGhp\nbmdzIHdpdGggb3BlbmpwYS5EYXRhQ2FjaGUoVHlwZXM9eDt5O3osRXhjbHVk\nZWRUeXBlcz1hKQogICAgcHJpdmF0ZSBTZXQ8U3RyaW5nPiBfaW5jbHVkZWRU\neXBlczsKICAgIHByaXZhdGUgU2V0PFN0cmluZz4gX2V4Y2x1ZGVkVHlwZXM7\nCiAgICAKICAgIHB1YmxpYyB2b2lkIGluaXRpYWxpemUoT3BlbkpQQUNvbmZp\nZ3VyYXRpb24gY29uZiwgT2JqZWN0VmFsdWUgZGF0YUNhY2hlLCBPYmplY3RW\nYWx1ZSBxdWVyeUNhY2hlKSB7CiAgICAgICAgX2NvbmYgPSBjb25mOwogICAg\nICAgIF9xdWVyeUNhY2hlID0gKFF1ZXJ5Q2FjaGUpIHF1ZXJ5Q2FjaGUuaW5z\ndGFudGlhdGUoUXVlcnlDYWNoZS5jbGFzcywgY29uZik7CiAgICAgICAgaWYg\nKF9xdWVyeUNhY2hlICE9IG51bGwpCiAgICAgICAgICAgIF9xdWVyeUNhY2hl\nLmluaXRpYWxpemUodGhpcyk7CiAgICAgICAgX2NhY2hlID0gKERhdGFDYWNo\nZSkgZGF0YUNhY2hlLmluc3RhbnRpYXRlKERhdGFDYWNoZS5jbGFzcywgY29u\nZik7CgogICAgICAgIGlmIChfY2FjaGUgPT0gbnVsbCkKICAgICAgICAgICAg\ncmV0dXJuOwogICAgICAgICAKICAgICAgICAvLyBjcmVhdGUgaGVscGVycyBi\nZWZvcmUgaW5pdGlhbGl6aW5nIGNhY2hlcwogICAgICAgIGlmIChjb25mLmdl\ndER5bmFtaWNEYXRhU3RydWN0cygpKQogICAgICAgICAgICBfcGNHZW5lcmF0\nb3IgPSBuZXcgRGF0YUNhY2hlUENEYXRhR2VuZXJhdG9yKGNvbmYpOwogICAg\nICAgIF9zY2hlZHVsZXIgPSBuZXcgQ2xlYXJhYmxlU2NoZWR1bGVyKGNvbmYp\nOwogICAgICAgIAogICAgICAgIF9wb2xpY3kgPSBjb25mLmdldENhY2hlRGlz\ndHJpYnV0aW9uUG9saWN5SW5zdGFuY2UoKTsKCiAgICAgICAgX2NhY2hlLmlu\naXRpYWxpemUodGhpcyk7CgogICAgfQoKICAgIHB1YmxpYyBEYXRhQ2FjaGUg\nZ2V0U3lzdGVtRGF0YUNhY2hlKCkgewogICAgICAgIHJldHVybiBnZXREYXRh\nQ2FjaGUobnVsbCwgZmFsc2UpOwogICAgfQoKICAgIHB1YmxpYyBEYXRhQ2Fj\naGUgZ2V0RGF0YUNhY2hlKFN0cmluZyBuYW1lKSB7CiAgICAgICAgcmV0dXJu\nIGdldERhdGFDYWNoZShuYW1lLCBmYWxzZSk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBSZXR1cm5zIHRoZSBuYW1lZCBjYWNoZS4gCiAgICAgKiBJZiB0aGUg\nZ2l2ZW4gbmFtZSBpcyBuYW1lIG9yIHRoZSBuYW1lIG9mIHRoZSBjYWNoZSBw\nbHVnaW4gdGhlbiByZXR1cm5zIHRoZSBtYWluIGNhY2hlLgogICAgICogT3Ro\nZXJ3aXNlLCB7QGxpbmtwbGFpbiBEYXRhQ2FjaGUjZ2V0UGFydGl0aW9uKFN0\ncmluZywgYm9vbGVhbikgZGVsZWdhdGVzfSB0byB0aGUgbWFpbiBjYWNoZQog\nICAgICogdG8gb2J0YWluIGEgcGFydGl0aW9uLiAgIAogICAgICovCiAgICBw\ndWJsaWMgRGF0YUNhY2hlIGdldERhdGFDYWNoZShTdHJpbmcgbmFtZSwgYm9v\nbGVhbiBjcmVhdGUpIHsKICAgICAgICBpZiAobmFtZSA9PSBudWxsIHx8IChf\nY2FjaGUgIT0gbnVsbCAmJiBuYW1lLmVxdWFscyhfY2FjaGUuZ2V0TmFtZSgp\nKSkpCiAgICAgICAgICAgIHJldHVybiBfY2FjaGU7CiAgICAgICAgaWYgKF9j\nYWNoZSAhPSBudWxsKQogICAgICAgICAgICByZXR1cm4gX2NhY2hlLmdldFBh\ncnRpdGlvbihuYW1lLCBjcmVhdGUpOwogICAgICAgIHJldHVybiBudWxsOwog\nICAgfQoKICAgIHB1YmxpYyBRdWVyeUNhY2hlIGdldFN5c3RlbVF1ZXJ5Q2Fj\naGUoKSB7CiAgICAgICAgcmV0dXJuIF9xdWVyeUNhY2hlOwogICAgfQoKICAg\nIHB1YmxpYyBEYXRhQ2FjaGVQQ0RhdGFHZW5lcmF0b3IgZ2V0UENEYXRhR2Vu\nZXJhdG9yKCkgewogICAgICAgIHJldHVybiBfcGNHZW5lcmF0b3I7CiAgICB9\nCgogICAgcHVibGljIENsZWFyYWJsZVNjaGVkdWxlciBnZXRDbGVhcmFibGVT\nY2hlZHVsZXIoKSB7CiAgICAgICAgcmV0dXJuIF9zY2hlZHVsZXI7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgY2xvc2UoKSB7CiAgICAgICAgSW1wbEhlbHBl\nci5jbG9zZShfY2FjaGUpOwogICAgICAgIEltcGxIZWxwZXIuY2xvc2UoX3F1\nZXJ5Q2FjaGUpOwogICAgICAgIGlmIChfc2NoZWR1bGVyICE9IG51bGwpCiAg\nICAgICAgICAgIF9zY2hlZHVsZXIuc3RvcCgpOwogICAgfQoKICAgIC8qKgog\nICAgICogU2VsZWN0IGNhY2hlIGZvciB0aGUgZ2l2ZW4gbWFuYWdlZCBpbnN0\nYW5jZS4KICAgICAqIElmIHR5cGUgYmFzZWQgdmVyaWZpY2F0aW9uIGFmZmly\nbXMgdGhlIHR5cGUgdG8gYmUgY2FjaGVkIHRoZW4gdGhlIGluc3RhbmNlIGJh\nc2VkIHBvbGljeSAKICAgICAqIGlzIGNhbGxlZCB0byBkZXRlcm1pbmUgdGhl\nIHRhcmdldCBjYWNoZS4gIAogICAgICovCiAgICBwdWJsaWMgRGF0YUNhY2hl\nIHNlbGVjdENhY2hlKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20pIHsKICAgICAg\nICBpZiAoc20gPT0gbnVsbCB8fCAhaXNDYWNoYWJsZShzbS5nZXRNZXRhRGF0\nYSgpKSkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgU3RyaW5n\nIG5hbWUgPSBfcG9saWN5LnNlbGVjdENhY2hlKHNtLCBudWxsKTsKICAgICAg\nICByZXR1cm4gbmFtZSA9PSBudWxsID8gbnVsbCA6IGdldERhdGFDYWNoZShu\nYW1lKTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBHZXRzIHRoZSBpbnN0\nYW5jZS1iYXNlZCBjYWNoZSBkaXN0cmlidXRpb24gcG9saWN5LCBpZiBjb25m\naWd1cmVkLiAKICAgICAqLwogICAgcHVibGljIENhY2hlRGlzdHJpYnV0aW9u\nUG9saWN5IGdldERpc3RyaWJ1dGlvblBvbGljeSgpIHsKICAgICAgICByZXR1\ncm4gX3BvbGljeTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBBZmZpcm1z\nIGlmIHRoZSBnaXZlbiB0eXBlIGlzIGVsaWdpYmxlIGZvciBjYWNoZS4KICAg\nICAqLwogICAgcHVibGljIGJvb2xlYW4gaXNDYWNoYWJsZShDbGFzc01ldGFE\nYXRhIG1ldGEpIHsKICAgICAgICBCb29sZWFuIHJlcyA9IF9jYWNoZWFibGUu\nZ2V0KG1ldGEpOwogICAgICAgIGlmKHJlcyAhPSBudWxsKXsKICAgICAgICAg\nICAgcmV0dXJuIHJlczsKICAgICAgICB9CgogICAgICAgIEJvb2xlYW4gaXND\nYWNoYWJsZSA9IGlzQ2FjaGVhYmxlQnlNb2RlKG1ldGEpOwogICAgICAgIGlm\nIChpc0NhY2hhYmxlID09IG51bGwpIHsKICAgICAgICAgICBpc0NhY2hhYmxl\nID0gaXNDYWNoZWFibGVCeVR5cGUobWV0YSk7CiAgICAgICAgfQogICAgICAg\nIF9jYWNoZWFibGUucHV0KG1ldGEsIGlzQ2FjaGFibGUpOwogICAgICAgIHJl\ndHVybiBpc0NhY2hhYmxlOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCBz\nZXRUeXBlcyhTZXQ8U3RyaW5nPiBpbmNsdWRlZFR5cGVzLCBTZXQ8U3RyaW5n\nPiBleGNsdWRlZFR5cGVzKXsKICAgICAgICBfaW5jbHVkZWRUeXBlcyA9IGlu\nY2x1ZGVkVHlwZXM7CiAgICAgICAgX2V4Y2x1ZGVkVHlwZXMgPSBleGNsdWRl\nZFR5cGVzOwogICAgfQogICAgCiAgICAvKioKICAgICAqIEFmZmlybXMgdGhl\nIGdpdmVuIGNsYXNzIGlzIGVsaWdpYmxlIHRvIGJlIGNhY2hlZCBhY2NvcmRp\nbmcgdG8gdGhlIGNhY2hlIG1vZGUKICAgICAqIGFuZCB0aGUgY2FjaGUgZW5h\nYmxlIGZsYWcgb24gdGhlIGdpdmVuIG1ldGFkYXRhLgogICAgICogIAogICAg\nICogQHJldHVybiBUUlVFIG9yIEZBTFNFIGlmICBjYWNoZSBtb2RlIGlzIGNv\nbmZpZ3VyZWQuIG51bGwgb3RoZXJ3aXNlLgogICAgICovCiAgICBwcml2YXRl\nIEJvb2xlYW4gaXNDYWNoZWFibGVCeU1vZGUoQ2xhc3NNZXRhRGF0YSBtZXRh\nKSB7IAogICAgICAgIFN0cmluZyBtb2RlID0gX2NvbmYuZ2V0RGF0YUNhY2hl\nTW9kZSgpOwogICAgICAgIGlmIChEYXRhQ2FjaGVNb2RlLkFMTC50b1N0cmlu\nZygpLmVxdWFsc0lnbm9yZUNhc2UobW9kZSkpCiAgICAgICAgICAgIHJldHVy\nbiB0cnVlOwogICAgICAgIGlmIChEYXRhQ2FjaGVNb2RlLk5PTkUudG9TdHJp\nbmcoKS5lcXVhbHNJZ25vcmVDYXNlKG1vZGUpKQogICAgICAgICAgICByZXR1\ncm4gZmFsc2U7CiAgICAgICAgaWYgKERhdGFDYWNoZU1vZGUuRU5BQkxFX1NF\nTEVDVElWRS50b1N0cmluZygpLmVxdWFsc0lnbm9yZUNhc2UobW9kZSkpCiAg\nICAgICAgICAgIHJldHVybiBCb29sZWFuLlRSVUUuZXF1YWxzKG1ldGEuZ2V0\nQ2FjaGVFbmFibGVkKCkpOwogICAgICAgIGlmIChEYXRhQ2FjaGVNb2RlLkRJ\nU0FCTEVfU0VMRUNUSVZFLnRvU3RyaW5nKCkuZXF1YWxzSWdub3JlQ2FzZSht\nb2RlKSkKICAgICAgICAgICAgcmV0dXJuICFCb29sZWFuLkZBTFNFLmVxdWFs\ncyhtZXRhLmdldENhY2hlRW5hYmxlZCgpKTsKICAgICAgICByZXR1cm4gbnVs\nbDsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBJcyB0aGUgZ2l2ZW4gdHlw\nZSBjYWNoZWFibGUgYnkgQERhdGFDYWNoZSBhbm5vdGF0aW9uIG9yIG9wZW5q\ncGEuRGF0YUNhY2hlKFR5cGVzL0V4Y2x1ZGVkVHlwZXMpCiAgICAgKiAgCiAg\nICAgKiBAc2VlIENsYXNzTWV0YURhdGEjZ2V0RGF0YUNhY2hlTmFtZSgpCiAg\nICAgKi8KICAgIHByaXZhdGUgQm9vbGVhbiBpc0NhY2hlYWJsZUJ5VHlwZShD\nbGFzc01ldGFEYXRhIG1ldGEpIHsgCiAgICAgICAgaWYgKF9pbmNsdWRlZFR5\ncGVzICE9IG51bGwgJiYgX2luY2x1ZGVkVHlwZXMuc2l6ZSgpID4gMCkgewog\nICAgICAgICAgICByZXR1cm4gX2luY2x1ZGVkVHlwZXMuY29udGFpbnMobWV0\nYS5nZXREZXNjcmliZWRUeXBlKCkuZ2V0TmFtZSgpKTsKICAgICAgICB9CiAg\nICAgICAgaWYgKF9leGNsdWRlZFR5cGVzICE9IG51bGwgJiYgX2V4Y2x1ZGVk\nVHlwZXMuc2l6ZSgpID4gMCkgewogICAgICAgICAgICBpZiAoX2V4Y2x1ZGVk\nVHlwZXMuY29udGFpbnMobWV0YS5nZXREZXNjcmliZWRUeXBlKCkuZ2V0TmFt\nZSgpKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAg\nICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gQ2FzZSB3aGVyZSBU\neXBlcyBpcyBub3Qgc2V0LCBhbmQgRXhjbHVkZWRUeXBlcyBvbmx5IGhhcyBh\nIHN1YiBzZXQgb2YgYWxsCiAgICAgICAgICAgICAgICAvLyBFbnRpdGllcy4K\nICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAg\nICAgICAgfQogICAgICAgIC8vIENoZWNrIGZvciBARGF0YUNhY2hlIGFubm90\nYXRpb25zCiAgICAgICAgcmV0dXJuIG1ldGEuZ2V0RGF0YUNhY2hlTmFtZSgp\nICE9IG51bGw7CiAgICB9Cn0K\n","encoding":"base64"}

