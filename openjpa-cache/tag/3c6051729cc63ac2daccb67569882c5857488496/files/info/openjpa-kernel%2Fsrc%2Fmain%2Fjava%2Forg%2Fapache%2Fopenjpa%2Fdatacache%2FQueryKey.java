{"sha":"70d7b463eb78a6fdecfbe4436420546ed79f09b9","node_id":"MDQ6QmxvYjIwNjM2NDo3MGQ3YjQ2M2ViNzhhNmZkZWNmYmU0NDM2NDIwNTQ2ZWQ3OWYwOWI5","size":17888,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/70d7b463eb78a6fdecfbe4436420546ed79f09b9","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuZGF0YWNhY2hlOwoKaW1wb3J0\nIGphdmEuaW8uRXh0ZXJuYWxpemFibGU7CmltcG9ydCBqYXZhLmlvLklPRXhj\nZXB0aW9uOwppbXBvcnQgamF2YS5pby5PYmplY3RJbnB1dDsKaW1wb3J0IGph\ndmEuaW8uT2JqZWN0T3V0cHV0OwppbXBvcnQgamF2YS51dGlsLkFycmF5TGlz\ndDsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOwppbXBvcnQgamF2YS51\ndGlsLkNvbGxlY3Rpb25zOwppbXBvcnQgamF2YS51dGlsLkRhdGU7CmltcG9y\ndCBqYXZhLnV0aWwuSGFzaE1hcDsKaW1wb3J0IGphdmEudXRpbC5IYXNoU2V0\nOwppbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9yOwppbXBvcnQgamF2YS51dGls\nLkxpbmtlZExpc3Q7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGph\ndmEudXRpbC5NYXA7CmltcG9ydCBqYXZhLnV0aWwuU2V0OwppbXBvcnQgamF2\nYS51dGlsLlNvcnRlZFNldDsKaW1wb3J0IGphdmEudXRpbC5UcmVlU2V0OwoK\naW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5sYW5nLk9iamVjdFV0aWxzOwpp\nbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmxhbmcuU3RyaW5nVXRpbHM7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuZW5oYW5jZS5QQ1JlZ2lzdHJ5Owpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5RdWVyeTsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuUXVlcnlDb250ZXh0OwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5TdG9yZUNvbnRleHQ7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5DbGFzc01ldGFEYXRhOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuSmF2YVR5cGVzOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuTWV0YURhdGFSZXBvc2l0b3J5\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuSW1wbEhlbHBlcjsK\nCi8qKgogKiBUaGlzIGNsYXNzIHN0b3JlcyBpbmZvcm1hdGlvbiBhYm91dCBh\nIHBhcnRpY3VsYXIgaW52b2NhdGlvbiBvZgogKiBhIHF1ZXJ5LiBJdCBjb250\nYWlucyBhIHJlZmVyZW5jZSB0byB0aGUgZXh0ZXJuYWwgcHJvcGVydGllcyBv\nZiB0aGUKICogcXVlcnkgdGhhdCB3YXMgZXhlY3V0ZWQsIGFzIHdlbGwgYXMg\nYW55IHBhcmFtZXRlcnMgdXNlZCB0byBleGVjdXRlCiAqIHRoYXQgcXVlcnks\nIHdpdGggb25lIGV4Y2VwdGlvbjogZmlyc3QtY2xhc3Mgb2JqZWN0cyB1c2Vk\nIGFzCiAqIHBhcmFtZXRlciB2YWx1ZXMgYXJlIGNvbnZlcnRlZCB0byBPSURz\nLgogKgogKiBAYXV0aG9yIFBhdHJpY2sgTGluc2tleQogKi8KcHVibGljIGNs\nYXNzIFF1ZXJ5S2V5CiAgICBpbXBsZW1lbnRzIEV4dGVybmFsaXphYmxlIHsK\nCiAgICAvLyBpbml0aWFsaXplIHRoZSBzZXQgb2YgdW5tb2RpZmlhYmxlIGNs\nYXNzZXMuIFRoaXMgYWxsb3dzIHVzCiAgICAvLyB0byBhdm9pZCBjbG9uaW5n\nIGNvbGxlY3Rpb25zIHRoYXQgYXJlIG5vdCBtb2RpZmlhYmxlLAogICAgLy8g\ncHJvdmlkZWQgdGhhdCB0aGV5IGRvIG5vdCBjb250YWluIG11dGFibGUgb2Jq\nZWN0cy4KICAgIHByaXZhdGUgc3RhdGljIENvbGxlY3Rpb24gc191bm1vZCA9\nIG5ldyBIYXNoU2V0KCk7CgogICAgc3RhdGljIHsKICAgICAgICAvLyBoYW5k\nbGUgdGhlIHNldCB0eXBlczsgamRrIHVzZXMgZGlmZmVyZW50IGNsYXNzZXMg\nZm9yIGNvbGxlY3Rpb24sCiAgICAgICAgLy8gc2V0LCBhbmQgc29ydGVkIHNl\ndAogICAgICAgIFRyZWVTZXQgcyA9IG5ldyBUcmVlU2V0KCk7CiAgICAgICAg\nc191bm1vZC5hZGQoQ29sbGVjdGlvbnMudW5tb2RpZmlhYmxlQ29sbGVjdGlv\nbihzKS5nZXRDbGFzcygpKTsKICAgICAgICBzX3VubW9kLmFkZChDb2xsZWN0\naW9ucy51bm1vZGlmaWFibGVTZXQocykuZ2V0Q2xhc3MoKSk7CiAgICAgICAg\nc191bm1vZC5hZGQoQ29sbGVjdGlvbnMudW5tb2RpZmlhYmxlU29ydGVkU2V0\nKHMpLmdldENsYXNzKCkpOwoKICAgICAgICAvLyBoYW5kbGUgdGhlIGxpc3Qg\ndHlwZXM7IGpkayB1c2VzIGRpZmZlcmVudCBjbGFzc2VzIGZvciBzdGFuZGFy\nZAogICAgICAgIC8vIGFuZCByYW5kb20gYWNjZXNzIGxpc3RzCiAgICAgICAg\nTGlzdCBsID0gbmV3IExpbmtlZExpc3QoKTsKICAgICAgICBzX3VubW9kLmFk\nZChDb2xsZWN0aW9ucy51bm1vZGlmaWFibGVMaXN0KGwpLmdldENsYXNzKCkp\nOwogICAgICAgIGwgPSBuZXcgQXJyYXlMaXN0KDApOwogICAgICAgIHNfdW5t\nb2QuYWRkKENvbGxlY3Rpb25zLnVubW9kaWZpYWJsZUxpc3QobCkuZ2V0Q2xh\nc3MoKSk7CgogICAgICAgIC8vIGhhbmRsZSB0aGUgY29uc3RhbnQgdHlwZXMK\nICAgICAgICBzX3VubW9kLmFkZChDb2xsZWN0aW9ucy5FTVBUWV9TRVQuZ2V0\nQ2xhc3MoKSk7CiAgICAgICAgc191bm1vZC5hZGQoQ29sbGVjdGlvbnMuRU1Q\nVFlfTElTVC5nZXRDbGFzcygpKTsKICAgIH0KCiAgICAvLyBjYWNoaW5nIHN0\nYXRlOyBubyBuZWVkIHRvIGluY2x1ZGUgcGFyYW1ldGVyIGFuZCB2YXJpYWJs\nZSBkZWNsYXJhdGlvbnMKICAgIC8vIGJlY2F1c2UgdGhleSBhcmUgaW1wbGlj\naXQgaW4gdGhlIGZpbHRlcgogICAgcHJpdmF0ZSBTdHJpbmcgX2NhbmRpZGF0\nZUNsYXNzTmFtZTsKICAgIHByaXZhdGUgYm9vbGVhbiBfc3ViY2xhc3NlczsK\nICAgIHByaXZhdGUgU2V0IF9hY2Nlc3NQYXRoQ2xhc3NOYW1lczsKICAgIHBy\naXZhdGUgU3RyaW5nIF9xdWVyeTsKICAgIHByaXZhdGUgYm9vbGVhbiBfaWdu\nb3JlQ2hhbmdlczsKICAgIHByaXZhdGUgTWFwIF9wYXJhbXM7CiAgICBwcml2\nYXRlIGxvbmcgX3JhbmdlU3RhcnQ7CiAgICBwcml2YXRlIGxvbmcgX3Jhbmdl\nRW5kOwoKICAgIC8vICMjIyBwY2w6IDIgTWF5IDIwMDM6IHNob3VsZCB0aGlz\nIHRpbWVvdXQgdGFrZSBpbnRvIGFjY291bnQgdGhlCiAgICAvLyAjIyMgdGlt\nZW91dHMgZm9yIGNsYXNzZXMgaW4gdGhlIGFjY2VzcyBwYXRoIG9mIHRoZSBx\ndWVyeT8KICAgIC8vICMjIyBDdXJyZW50bHksIGl0IG9ubHkgY29uc2lkZXJz\nIHRoZSBjYW5kaWRhdGUgY2xhc3MgYW5kIGl0cwogICAgLy8gIyMjIHN1YmNs\nYXNzZXMuIE5vdGUgdGhhdCB0aGlzIHZhbHVlIGlzIHVzZWQgdG8gZGVjaWRl\nIHdoZXRoZXIKICAgIC8vICMjIyBvciBub3QgT0lEcyBzaG91bGQgYmUgcmVn\naXN0ZXJlZCBmb3IgZXhwaXJhdGlvbiBjYWxsYmFja3MKICAgIHByaXZhdGUg\naW50IF90aW1lb3V0ID0gLTE7CgogICAgLyoqCiAgICAgKiBSZXR1cm4gYSBr\nZXkgZm9yIHRoZSBnaXZlbiBxdWVyeSwgb3IgbnVsbCBpZiBpdCBpcyBub3Qg\nY2FjaGVhYmxlLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIFF1ZXJ5S2V5\nIG5ld0luc3RhbmNlKFF1ZXJ5IHEpIHsKICAgICAgICByZXR1cm4gbmV3SW5z\ndGFuY2UocSwgKE9iamVjdFtdKSBudWxsKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIFJldHVybiBhIGtleSBmb3IgdGhlIGdpdmVuIHF1ZXJ5LCBvciBudWxs\nIGlmIGl0IGlzIG5vdCBjYWNoZWFibGUuCiAgICAgKi8KICAgIHB1YmxpYyBz\ndGF0aWMgUXVlcnlLZXkgbmV3SW5zdGFuY2UoUXVlcnkgcSwgT2JqZWN0W10g\nYXJncykgewogICAgICAgIC8vIGNvbXBpbGUgdG8gbWFrZSBzdXJlIGluZm8g\nZW5jb2RlZCBpbiBxdWVyeSBzdHJpbmcgaXMgYXZhaWxhYmxlCiAgICAgICAg\nLy8gdmlhIEFQSSBjYWxscyAoY2FuZGlkYXRlIGNsYXNzLCByZXN1bHQgY2xh\nc3MsIGV0YykKICAgICAgICBxLmNvbXBpbGUoKTsKICAgICAgICByZXR1cm4g\nbmV3SW5zdGFuY2UocSwgZmFsc2UsIGFyZ3MsIHEuZ2V0Q2FuZGlkYXRlVHlw\nZSgpLAogICAgICAgICAgICBxLmhhc1N1YmNsYXNzZXMoKSwgcS5nZXRTdGFy\ndFJhbmdlKCksIHEuZ2V0RW5kUmFuZ2UoKSk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBSZXR1cm4gYSBrZXkgZm9yIHRoZSBnaXZlbiBxdWVyeSwgb3IgbnVs\nbCBpZiBpdCBpcyBub3QgY2FjaGVhYmxlLgogICAgICovCiAgICBwdWJsaWMg\nc3RhdGljIFF1ZXJ5S2V5IG5ld0luc3RhbmNlKFF1ZXJ5IHEsIE1hcCBhcmdz\nKSB7CiAgICAgICAgLy8gY29tcGlsZSB0byBtYWtlIHN1cmUgaW5mbyBlbmNv\nZGVkIGluIHF1ZXJ5IHN0cmluZyBpcyBhdmFpbGFibGUKICAgICAgICAvLyB2\naWEgQVBJIGNhbGxzIChjYW5kaWRhdGUgY2xhc3MsIHJlc3VsdCBjbGFzcywg\nZXRjKQogICAgICAgIHEuY29tcGlsZSgpOwogICAgICAgIHJldHVybiBuZXdJ\nbnN0YW5jZShxLCBmYWxzZSwgYXJncywgcS5nZXRDYW5kaWRhdGVUeXBlKCks\nCiAgICAgICAgICAgIHEuaGFzU3ViY2xhc3NlcygpLCBxLmdldFN0YXJ0UmFu\nZ2UoKSwgcS5nZXRFbmRSYW5nZSgpKTsKICAgIH0KCiAgICAvKioKICAgICAq\nIFJldHVybiBhIGtleSBmb3IgdGhlIGdpdmVuIHF1ZXJ5LCBvciBudWxsIGlm\nIGl0IGlzIG5vdCBjYWNoZWFibGUuCiAgICAgKi8KICAgIHN0YXRpYyBRdWVy\neUtleSBuZXdJbnN0YW5jZShRdWVyeUNvbnRleHQgcSwgYm9vbGVhbiBwYWNr\nZWQsIE9iamVjdFtdIGFyZ3MsCiAgICAgICAgQ2xhc3MgY2FuZGlkYXRlLCBi\nb29sZWFuIHN1YnMsIGxvbmcgc3RhcnRJZHgsIGxvbmcgZW5kSWR4KSB7CiAg\nICAgICAgUXVlcnlLZXkga2V5ID0gY3JlYXRlS2V5KHEsIHBhY2tlZCwgY2Fu\nZGlkYXRlLCBzdWJzLCBzdGFydElkeCwgZW5kSWR4KTsKICAgICAgICBpZiAo\na2V5ICE9IG51bGwgJiYgc2V0UGFyYW1zKGtleSwgcSwgYXJncykpCiAgICAg\nICAgICAgIHJldHVybiBrZXk7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBSZXR1cm4gYSBrZXkgZm9yIHRoZSBnaXZlbiBx\ndWVyeSwgb3IgbnVsbCBpZiBpdCBpcyBub3QgY2FjaGVhYmxlLgogICAgICov\nCiAgICBzdGF0aWMgUXVlcnlLZXkgbmV3SW5zdGFuY2UoUXVlcnlDb250ZXh0\nIHEsIGJvb2xlYW4gcGFja2VkLCBNYXAgYXJncywKICAgICAgICBDbGFzcyBj\nYW5kaWRhdGUsIGJvb2xlYW4gc3VicywgbG9uZyBzdGFydElkeCwgbG9uZyBl\nbmRJZHgpIHsKICAgICAgICBRdWVyeUtleSBrZXkgPSBjcmVhdGVLZXkocSwg\ncGFja2VkLCBjYW5kaWRhdGUsIHN1YnMsIHN0YXJ0SWR4LCBlbmRJZHgpOwog\nICAgICAgIGlmIChrZXkgIT0gbnVsbCAmJiAoYXJncyA9PSBudWxsIHx8IGFy\nZ3MuaXNFbXB0eSgpIHx8CiAgICAgICAgICAgIHNldFBhcmFtcyhrZXksIHEu\nZ2V0U3RvcmVDb250ZXh0KCksIG5ldyBIYXNoTWFwKGFyZ3MpKSkpCiAgICAg\nICAgICAgIHJldHVybiBrZXk7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBFeHRyYWN0IHRoZSByZWxldmFudCBpZGVudGlm\neWluZyBpbmZvcm1hdGlvbiBmcm9tCiAgICAgKiA8Y29kZT5xPC9jb2RlPi4g\nVGhpcyBpbmNsdWRlcyBpbmZvcm1hdGlvbiBzdWNoIGFzIGNhbmRpZGF0ZQog\nICAgICogY2xhc3MsIHF1ZXJ5IGZpbHRlciwgZXRjLgogICAgICovCiAgICBw\ncml2YXRlIHN0YXRpYyBRdWVyeUtleSBjcmVhdGVLZXkoUXVlcnlDb250ZXh0\nIHEsIGJvb2xlYW4gcGFja2VkLAogICAgICAgIENsYXNzIGNhbmRpZGF0ZUNs\nYXNzLCBib29sZWFuIHN1YmNsYXNzZXMsIGxvbmcgc3RhcnRJZHgsIGxvbmcg\nZW5kSWR4KSB7CiAgICAgICAgaWYgKGNhbmRpZGF0ZUNsYXNzID09IG51bGwp\nCiAgICAgICAgICAgIHJldHVybiBudWxsOwoKICAgICAgICAvLyBjYW4gb25s\neSBjYWNoZSBkYXRhc3RvcmUgcXVlcmllcwogICAgICAgIGlmIChxLmdldENh\nbmRpZGF0ZUNvbGxlY3Rpb24oKSAhPSBudWxsKQogICAgICAgICAgICByZXR1\ncm4gbnVsbDsKCiAgICAgICAgLy8gbm8gc3VwcG9ydCBhbHJlYWR5LXBhY2tl\nZCByZXN1bHRzCiAgICAgICAgaWYgKHEuZ2V0UmVzdWx0VHlwZSgpICE9IG51\nbGwgJiYgcGFja2VkKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKCiAgICAg\nICAgLy8gY2FuJ3QgY2FjaGUgbm9uLXNlcmlhbGl6YWJsZSBub24tbWFuYWdl\nZCBjb21wbGV4IHR5cGVzCiAgICAgICAgQ2xhc3NbXSB0eXBlcyA9IHEuZ2V0\nUHJvamVjdGlvblR5cGVzKCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkg\nPCB0eXBlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBzd2l0Y2ggKEph\ndmFUeXBlcy5nZXRUeXBlQ29kZSh0eXBlc1tpXSkpIHsKICAgICAgICAgICAg\nICAgIGNhc2UgSmF2YVR5cGVzLkFSUkFZOgogICAgICAgICAgICAgICAgICAg\nIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMu\nQ09MTEVDVElPTjoKICAgICAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLk1B\nUDoKICAgICAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLk9CSkVDVDoKICAg\nICAgICAgICAgICAgICAgICBpZiAoIUltcGxIZWxwZXIuaXNNYW5hZ2VkVHlw\nZSgKICAgICAgICAgICAgICAgICAgICAgICAgcS5nZXRTdG9yZUNvbnRleHQo\nKS5nZXRDb25maWd1cmF0aW9uKCksIHR5cGVzW2ldKSkKICAgICAgICAgICAg\nICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICAgICAg\nYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIHdl\nIGNhbid0IGNhY2hlIHRoZSBxdWVyeSBpZiB3ZSBkb24ndCBrbm93IHdoaWNo\nIGNsYXNzZXMgYXJlIGluIHRoZQogICAgICAgIC8vIGFjY2VzcyBwYXRoCiAg\nICAgICAgQ2xhc3NNZXRhRGF0YVtdIG1ldGFzID0gcS5nZXRBY2Nlc3NQYXRo\nTWV0YURhdGFzKCk7CiAgICAgICAgaWYgKG1ldGFzLmxlbmd0aCA9PSAwKQog\nICAgICAgICAgICByZXR1cm4gbnVsbDsKCiAgICAgICAgU2V0IGFjY2Vzc1Bh\ndGhDbGFzc05hbWVzID0gbmV3IEhhc2hTZXQoKGludCkgKG1ldGFzLmxlbmd0\naCAqIDEuMzMgKyAxKSk7CiAgICAgICAgQ2xhc3NNZXRhRGF0YSBtZXRhOwog\nICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbWV0YXMubGVuZ3RoOyBpKysp\nIHsKICAgICAgICAgICAgLy8gc2luY2UgdGhlIGNsYXNzIGNoYW5nZSBmcmFt\nZXdvcmsgZGVhbHMgd2l0aCBsZWFzdC1kZXJpdmVkIHR5cGVzLAogICAgICAg\nICAgICAvLyByZWNvcmQgdGhlIGxlYXN0LWRlcml2ZWQgYWNjZXNzIHBhdGgg\ndHlwZXMKICAgICAgICAgICAgbWV0YSA9IG1ldGFzW2ldOwogICAgICAgICAg\nICBhY2Nlc3NQYXRoQ2xhc3NOYW1lcy5hZGQobWV0YS5nZXREZXNjcmliZWRU\neXBlKCkuZ2V0TmFtZSgpKTsKICAgICAgICAgICAgd2hpbGUgKG1ldGEuZ2V0\nUENTdXBlcmNsYXNzKCkgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgbWV0\nYSA9IG1ldGEuZ2V0UENTdXBlcmNsYXNzTWV0YURhdGEoKTsgCiAgICAgICAg\nICAgIH0KCiAgICAgICAgICAgIGFjY2Vzc1BhdGhDbGFzc05hbWVzLmFkZCht\nZXRhLmdldERlc2NyaWJlZFR5cGUoKS5nZXROYW1lKCkpOwogICAgICAgIH0K\nCiAgICAgICAgLy8gaWYgYW55IG9mIHRoZSB0eXBlcyBhcmUgY3VycmVudGx5\nIGRpcnR5LCB3ZSBjYW4ndCBjYWNoZSB0aGlzIHF1ZXJ5CiAgICAgICAgU3Rv\ncmVDb250ZXh0IGN0eCA9IHEuZ2V0U3RvcmVDb250ZXh0KCk7CiAgICAgICAg\naWYgKGludGVyc2VjdHMoYWNjZXNzUGF0aENsYXNzTmFtZXMsIGN0eC5nZXRQ\nZXJzaXN0ZWRUeXBlcygpKQogICAgICAgICAgICB8fCBpbnRlcnNlY3RzKGFj\nY2Vzc1BhdGhDbGFzc05hbWVzLCBjdHguZ2V0VXBkYXRlZFR5cGVzKCkpCiAg\nICAgICAgICAgIHx8IGludGVyc2VjdHMoYWNjZXNzUGF0aENsYXNzTmFtZXMs\nIGN0eC5nZXREZWxldGVkVHlwZXMoKSkpCiAgICAgICAgICAgIHJldHVybiBu\ndWxsOwoKICAgICAgICAvLyBjYWxjdWxhdGUgdGhlIHRpbWVvdXQgZm9yIHRo\nZSBrZXkKICAgICAgICBNZXRhRGF0YVJlcG9zaXRvcnkgcmVwb3MgPSBjdHgu\nZ2V0Q29uZmlndXJhdGlvbigpLgogICAgICAgICAgICBnZXRNZXRhRGF0YVJl\ncG9zaXRvcnlJbnN0YW5jZSgpOwoKICAgICAgICAvLyB3b24ndCBmaW5kIG1l\ndGFkYXRhIGZvciBpbnRlcmZhY2VzLgogICAgICAgIGlmIChjYW5kaWRhdGVD\nbGFzcy5pc0ludGVyZmFjZSgpKQogICAgICAgICAgICByZXR1cm4gbnVsbDsK\nICAgICAgICBtZXRhID0gcmVwb3MuZ2V0TWV0YURhdGEoY2FuZGlkYXRlQ2xh\nc3MsIGN0eC5nZXRDbGFzc0xvYWRlcigpLCB0cnVlKTsKICAgICAgICBpbnQg\ndGltZW91dCA9IG1ldGEuZ2V0RGF0YUNhY2hlVGltZW91dCgpOwogICAgICAg\nIGlmIChzdWJjbGFzc2VzKSB7CiAgICAgICAgICAgIG1ldGFzID0gbWV0YS5n\nZXRQQ1N1YmNsYXNzTWV0YURhdGFzKCk7CiAgICAgICAgICAgIGludCBzdWJU\naW1lb3V0OwogICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG1ldGFz\nLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBpZiAobWV0YXNbaV0u\nZ2V0RGF0YUNhY2hlKCkgPT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICBy\nZXR1cm4gbnVsbDsKCiAgICAgICAgICAgICAgICBhY2Nlc3NQYXRoQ2xhc3NO\nYW1lcy5hZGQobWV0YXNbaV0uZ2V0RGVzY3JpYmVkVHlwZSgpLmdldE5hbWUo\nKSk7CiAgICAgICAgICAgICAgICBzdWJUaW1lb3V0ID0gbWV0YXNbaV0uZ2V0\nRGF0YUNhY2hlVGltZW91dCgpOwogICAgICAgICAgICAgICAgaWYgKHN1YlRp\nbWVvdXQgIT0gLTEgJiYgc3ViVGltZW91dCA8IHRpbWVvdXQpCiAgICAgICAg\nICAgICAgICAgICAgdGltZW91dCA9IHN1YlRpbWVvdXQ7CiAgICAgICAgICAg\nIH0KICAgICAgICB9CgogICAgICAgIC8vIHRlc3RzIGFsbCBwYXNzZWQ7IGNh\nY2hlYWJsZQogICAgICAgIFF1ZXJ5S2V5IGtleSA9IG5ldyBRdWVyeUtleSgp\nOwogICAgICAgIGtleS5fY2FuZGlkYXRlQ2xhc3NOYW1lID0gY2FuZGlkYXRl\nQ2xhc3MuZ2V0TmFtZSgpOwogICAgICAgIGtleS5fc3ViY2xhc3NlcyA9IHN1\nYmNsYXNzZXM7CiAgICAgICAga2V5Ll9hY2Nlc3NQYXRoQ2xhc3NOYW1lcyA9\nIGFjY2Vzc1BhdGhDbGFzc05hbWVzOwogICAgICAgIGtleS5fdGltZW91dCA9\nIHRpbWVvdXQ7CiAgICAgICAga2V5Ll9xdWVyeSA9IHEuZ2V0UXVlcnlTdHJp\nbmcoKTsKICAgICAgICBrZXkuX2lnbm9yZUNoYW5nZXMgPSBxLmdldElnbm9y\nZUNoYW5nZXMoKTsKICAgICAgICBrZXkuX3JhbmdlU3RhcnQgPSBzdGFydElk\neDsKICAgICAgICBrZXkuX3JhbmdlRW5kID0gZW5kSWR4OwogICAgICAgIHJl\ndHVybiBrZXk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDb252ZXJ0IGFuIGFy\ncmF5IG9mIGFyZ3VtZW50cyBpbnRvIHRoZSBjb3JyZXNwb25kaW5nIHBhcmFt\nZXRlcgogICAgICogbWFwLCBhbmQgZG8gYW55IFBDIHRvIE9JRCBjb252ZXJz\naW9uIG5lY2Vzc2FyeS4KICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgYm9v\nbGVhbiBzZXRQYXJhbXMoUXVlcnlLZXkga2V5LCBRdWVyeUNvbnRleHQgcSwK\nICAgICAgICBPYmplY3RbXSBhcmdzKSB7CiAgICAgICAgaWYgKGFyZ3MgPT0g\nbnVsbCB8fCBhcmdzLmxlbmd0aCA9PSAwKQogICAgICAgICAgICByZXR1cm4g\ndHJ1ZTsKCiAgICAgICAgLy8gQ3JlYXRlIGEgbWFwIGZvciB0aGUgZ2l2ZW4g\ncGFyYW1ldGVycywgYW5kIGNvbnZlcnQgdGhlCiAgICAgICAgLy8gcGFyYW1l\ndGVyIGxpc3QgaW50byBhIG1hcCwgdXNpbmcgdGhlIHF1ZXJ5J3MgcGFyYW1l\ndGVyCiAgICAgICAgLy8gZGVjbGFyYXRpb24gdG8gZGV0ZXJtaW5lIG9yZGVy\naW5nIGV0Yy4KICAgICAgICBNYXAgdHlwZXMgPSBxLmdldE9yZGVyZWRQYXJh\nbWV0ZXJUeXBlcygpOwogICAgICAgIE1hcCBtYXAgPSBuZXcgSGFzaE1hcCgo\naW50KSAodHlwZXMuc2l6ZSgpICogMS4zMyArIDEpKTsKICAgICAgICBpbnQg\naWR4ID0gMDsKICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ZXIgPSB0eXBlcy5r\nZXlTZXQoKS5pdGVyYXRvcigpOyBpdGVyLmhhc05leHQoKTsgaWR4KyspCiAg\nICAgICAgICAgIG1hcC5wdXQoaXRlci5uZXh0KCksIGFyZ3NbaWR4XSk7CiAg\nICAgICAgcmV0dXJuIHNldFBhcmFtcyhrZXksIHEuZ2V0U3RvcmVDb250ZXh0\nKCksIG1hcCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDb252ZXJ0IHBhcmFt\nZXRlcnMgdG8gYSBmb3JtIHRoYXQgaXMgY2FjaGVhYmxlLiBNdXRhYmxlIHBh\ncmFtcwogICAgICogd2lsbCBiZSBjbG9uZWQuCiAgICAgKi8KICAgIHByaXZh\ndGUgc3RhdGljIGJvb2xlYW4gc2V0UGFyYW1zKFF1ZXJ5S2V5IGtleSwgU3Rv\ncmVDb250ZXh0IGN0eCwKICAgICAgICBNYXAgcGFyYW1zKSB7CiAgICAgICAg\naWYgKHBhcmFtcyA9PSBudWxsIHx8IHBhcmFtcy5pc0VtcHR5KCkpCiAgICAg\nICAgICAgIHJldHVybiB0cnVlOwoKICAgICAgICBNYXAuRW50cnkgZTsKICAg\nICAgICBPYmplY3QgdjsKICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ZXIgPSBw\nYXJhbXMuZW50cnlTZXQoKS5pdGVyYXRvcigpOyBpdGVyLmhhc05leHQoKTsp\nIHsKICAgICAgICAgICAgZSA9IChNYXAuRW50cnkpIGl0ZXIubmV4dCgpOwog\nICAgICAgICAgICB2ID0gZS5nZXRWYWx1ZSgpOwogICAgICAgICAgICBpZiAo\nSW1wbEhlbHBlci5pc01hbmFnZWFibGUodikpIHsKICAgICAgICAgICAgICAg\nIGlmICghY3R4LmlzUGVyc2lzdGVudCh2KSB8fCBjdHguaXNOZXcodikgfHwg\nY3R4LmlzRGVsZXRlZCh2KSkKICAgICAgICAgICAgICAgICAgICByZXR1cm4g\nZmFsc2U7CiAgICAgICAgICAgICAgICBlLnNldFZhbHVlKGN0eC5nZXRPYmpl\nY3RJZCh2KSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh2IGlu\nc3RhbmNlb2YgQ29sbGVjdGlvbikgewogICAgICAgICAgICAgICAgQ29sbGVj\ndGlvbiBjID0gKENvbGxlY3Rpb24pIHY7CiAgICAgICAgICAgICAgICBib29s\nZWFuIGNvbnRlbnRzQXJlRGF0ZXMgPSBmYWxzZTsKICAgICAgICAgICAgICAg\nIGlmIChjLml0ZXJhdG9yKCkuaGFzTmV4dCgpKSB7CiAgICAgICAgICAgICAg\nICAgICAgLy8gdGhpcyBhc3N1bWVzIHRoYXQgdGhlIGNvbGxlY3Rpb24gaXMg\naG9tb2dlbmVvdXMKICAgICAgICAgICAgICAgICAgICBPYmplY3QgbyA9IGMu\naXRlcmF0b3IoKS5uZXh0KCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKElt\ncGxIZWxwZXIuaXNNYW5hZ2VhYmxlKG8pKQogICAgICAgICAgICAgICAgICAg\nICAgICByZXR1cm4gZmFsc2U7CgogICAgICAgICAgICAgICAgICAgIC8vIHBj\nbDogMjcgSnVuIDIwMDQ6IGlmIHdlIGdyb3cgdGhpcyBsb2dpYyB0bwogICAg\nICAgICAgICAgICAgICAgIC8vIGhhbmRsZSBvdGhlciBtdXRhYmxlIHR5cGVz\nIHRoYXQgYXJlIG5vdAogICAgICAgICAgICAgICAgICAgIC8vIGtub3duIHRv\nIGJlIGNsb25lYWJsZSwgd2Ugd2lsbCBoYXZlIHRvIGFkZAogICAgICAgICAg\nICAgICAgICAgIC8vIGxvZ2ljIHRvIGhhbmRsZSB0aGVtLiBUaGlzIGlzIGJl\nY2F1c2Ugd2UKICAgICAgICAgICAgICAgICAgICAvLyBjYW4ndCBqdXN0IGNh\nc3QgdG8gQ2xvbmVhYmxlIGFuZCBpbnZva2UKICAgICAgICAgICAgICAgICAg\nICAvLyBjbG9uZSgpLCBhcyBjbG9uZSgpIGlzIGEgcHJvdGVjdGVkIG1ldGhv\nZAogICAgICAgICAgICAgICAgICAgIC8vIGluIE9iamVjdC4KICAgICAgICAg\nICAgICAgICAgICBpZiAobyBpbnN0YW5jZW9mIERhdGUpCiAgICAgICAgICAg\nICAgICAgICAgICAgIGNvbnRlbnRzQXJlRGF0ZXMgPSB0cnVlOwoKICAgICAg\nICAgICAgICAgICAgICAvLyBpZiB0aGUgY29sbGVjdGlvbiBpcyBub3QgYSBr\nbm93biBpbW11dGFibGUKICAgICAgICAgICAgICAgICAgICAvLyB0eXBlLCBv\nciBpZiBpdCBjb250YWlucyBtdXRhYmxlIGluc3RhbmNlcywKICAgICAgICAg\nICAgICAgICAgICAvLyBjbG9uZSBpdCBmb3IgZ29vZCBtZWFzdXJlLgogICAg\nICAgICAgICAgICAgICAgIGlmIChjb250ZW50c0FyZURhdGVzIHx8ICFzX3Vu\nbW9kLmNvbnRhaW5zKGMuZ2V0Q2xhc3MoKSkpIHsKICAgICAgICAgICAgICAg\nICAgICAgICAgLy8gY29weSB0aGUgY29sbGVjdGlvbgogICAgICAgICAgICAg\nICAgICAgICAgICBDb2xsZWN0aW9uIGNvcHk7CiAgICAgICAgICAgICAgICAg\nICAgICAgIGlmIChjIGluc3RhbmNlb2YgU29ydGVkU2V0KQogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgY29weSA9IG5ldyBUcmVlU2V0KCk7CiAgICAg\nICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGMgaW5zdGFuY2VvZiBTZXQp\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3B5ID0gbmV3IEhhc2hT\nZXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgY29weSA9IG5ldyBBcnJheUxpc3QoYy5zaXpl\nKCkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnRzQXJl\nRGF0ZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG11c3Qg\nZ28gdGhyb3VnaCBieSBoYW5kIGFuZCBkbyB0aGUKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgIC8vIGNvcHksIHNpbmNlIERhdGUgaXMgbXV0YWJsZS4K\nICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoSXRlcmF0b3IgaXRy\nMiA9IGMuaXRlcmF0b3IoKTsgaXRyMi5oYXNOZXh0KCk7KQogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIGNvcHkuYWRkKCgoRGF0ZSkgaXRyMi5u\nZXh0KCkpLmNsb25lKCkpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVs\nc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcHkuYWRkQWxsKGMp\nOwoKICAgICAgICAgICAgICAgICAgICAgICAgZS5zZXRWYWx1ZShjb3B5KTsK\nICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAg\nICAgICAgIH0gZWxzZSBpZiAodiBpbnN0YW5jZW9mIERhdGUpCiAgICAgICAg\nICAgICAgICBlLnNldFZhbHVlKCgoRGF0ZSkgdikuY2xvbmUoKSk7CiAgICAg\nICAgfQoKICAgICAgICBrZXkuX3BhcmFtcyA9IHBhcmFtczsKICAgICAgICBy\nZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIFB1YmxpYyBjb25z\ndHJ1Y3RvciBmb3IgZXh0ZXJuYWxpemF0aW9uIG9ubHkuCiAgICAgKi8KICAg\nIHB1YmxpYyBRdWVyeUtleSgpIHsKICAgIH0KCiAgICAvKioKICAgICAqIFJl\ndHVybnMgdGhlIGNhbmRpZGF0ZSBjbGFzcyBuYW1lIGZvciB0aGlzIHF1ZXJ5\nLgogICAgICovCiAgICBwdWJsaWMgU3RyaW5nIGdldENhbmRpZGF0ZVR5cGVO\nYW1lKCkgewogICAgICAgIHJldHVybiBfY2FuZGlkYXRlQ2xhc3NOYW1lOwog\nICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBhbW91bnQgb2YgdGlt\nZSB0aGlzIGtleSBpcyBnb29kIGZvci4KICAgICAqLwogICAgcHVibGljIGlu\ndCBnZXRUaW1lb3V0KCkgewogICAgICAgIHJldHVybiBfdGltZW91dDsKICAg\nIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgPGNvZGU+dHJ1ZTwvY29kZT4g\naWYgbW9kaWZpY2F0aW9ucyB0byBhbnkgb2YgdGhlCiAgICAgKiBjbGFzc2Vz\nIGluIDxjb2RlPmNoYW5nZWQ8L2NvZGU+IHJlc3VsdHMgaW4gYSBwb3NzaWJs\nZQogICAgICogaW52YWxpZGF0aW9uIG9mIHRoaXMgcXVlcnk7IG90aGVyd2lz\nZSByZXR1cm5zCiAgICAgKiA8Y29kZT5mYWxzZTwvY29kZT4uIEludmFsaWRh\ndGlvbiBpcyBwb3NzaWJsZSBpZiBvbmUgb3IgbW9yZSBvZgogICAgICogdGhl\nIGNsYXNzZXMgaW4gdGhpcyBxdWVyeSBrZXkncyBhY2Nlc3MgcGF0aCBoYXMg\nYmVlbiBjaGFuZ2VkLgogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBjaGFu\nZ2VJbnZhbGlkYXRlc1F1ZXJ5KENvbGxlY3Rpb24gY2hhbmdlZCkgewogICAg\nICAgIHJldHVybiBpbnRlcnNlY3RzKF9hY2Nlc3NQYXRoQ2xhc3NOYW1lcywg\nY2hhbmdlZCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRoZSBn\naXZlbiBzZXQgb2YgbGVhc3QtZGVyaXZlZCBjbGFzcyBuYW1lcyBpbnRlcnNl\nY3RzIHdpdGgKICAgICAqIHRoZSBnaXZlbiBzZXQgb2YgY2hhbmdlZCBjbGFz\nc2VzLgogICAgICovCiAgICBwcml2YXRlIHN0YXRpYyBib29sZWFuIGludGVy\nc2VjdHMoQ29sbGVjdGlvbiBuYW1lcywgQ29sbGVjdGlvbiBjaGFuZ2VkKSB7\nCiAgICAgICAgQ2xhc3MgY2xzOwogICAgICAgIENsYXNzIHN1cDsKICAgICAg\nICBmb3IgKEl0ZXJhdG9yIGl0ZXIgPSBjaGFuZ2VkLml0ZXJhdG9yKCk7IGl0\nZXIuaGFzTmV4dCgpOykgewogICAgICAgICAgICBjbHMgPSAoQ2xhc3MpIGl0\nZXIubmV4dCgpOwogICAgICAgICAgICB3aGlsZSAoKHN1cCA9IFBDUmVnaXN0\ncnkuZ2V0UGVyc2lzdGVudFN1cGVyY2xhc3MoY2xzKSkgIT0gbnVsbCkKICAg\nICAgICAgICAgICAgIGNscyA9IHN1cDsKICAgICAgICAgICAgaWYgKG5hbWVz\nLmNvbnRhaW5zKGNscy5nZXROYW1lKCkpKQogICAgICAgICAgICAgICAgcmV0\ndXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAg\nIH0KCiAgICAvKioKICAgICAqIERldGVybWluZSBlcXVhbGl0eSBiYXNlZCBv\nbiBpZGVudGlmeWluZyBpbmZvcm1hdGlvbi4gS2V5cwogICAgICogY3JlYXRl\nZCBmb3IgcXVlcmllcyB0aGF0IHNwZWNpZnkgYSBjYW5kaWRhdGUgY29sbGVj\ndGlvbiBhcmUKICAgICAqIGFsd2F5cyBub3QgZXF1YWwuCiAgICAgKi8KICAg\nIHB1YmxpYyBib29sZWFuIGVxdWFscyhPYmplY3Qgb2IpIHsKICAgICAgICBp\nZiAodGhpcyA9PSBvYikKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAg\nICAgaWYgKG9iID09IG51bGwgfHwgZ2V0Q2xhc3MoKSAhPSBvYi5nZXRDbGFz\ncygpKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CgogICAgICAgIFF1ZXJ5\nS2V5IG90aGVyID0gKFF1ZXJ5S2V5KSBvYjsKICAgICAgICByZXR1cm4gU3Ry\naW5nVXRpbHMuZXF1YWxzKF9jYW5kaWRhdGVDbGFzc05hbWUsCiAgICAgICAg\nICAgIG90aGVyLl9jYW5kaWRhdGVDbGFzc05hbWUpCiAgICAgICAgICAgICYm\nIF9zdWJjbGFzc2VzID09IG90aGVyLl9zdWJjbGFzc2VzCiAgICAgICAgICAg\nICYmIF9pZ25vcmVDaGFuZ2VzID09IG90aGVyLl9pZ25vcmVDaGFuZ2VzCiAg\nICAgICAgICAgICYmIF9yYW5nZVN0YXJ0ID09IG90aGVyLl9yYW5nZVN0YXJ0\nCiAgICAgICAgICAgICYmIF9yYW5nZUVuZCA9PSBvdGhlci5fcmFuZ2VFbmQK\nICAgICAgICAgICAgJiYgU3RyaW5nVXRpbHMuZXF1YWxzKF9xdWVyeSwgb3Ro\nZXIuX3F1ZXJ5KQogICAgICAgICAgICAmJiBPYmplY3RVdGlscy5lcXVhbHMo\nX3BhcmFtcywgb3RoZXIuX3BhcmFtcyk7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBEZWZpbmUgYSBoYXNoaW5nIGFsZ29yaXRobSBjb3JyZXNwb25kaW5nIHRv\nIHRoZSB7QGxpbmsgI2VxdWFsc30KICAgICAqIG1ldGhvZCBkZWZpbmVkIGFi\nb3ZlLgogICAgICovCiAgICBwdWJsaWMgaW50IGhhc2hDb2RlKCkgewogICAg\nICAgIGludCBjb2RlID0gMzcgKiAxNyArIF9jYW5kaWRhdGVDbGFzc05hbWUu\naGFzaENvZGUoKTsKICAgICAgICBpZiAoX3F1ZXJ5ICE9IG51bGwpCiAgICAg\nICAgICAgIGNvZGUgPSAzNyAqIGNvZGUgKyBfcXVlcnkuaGFzaENvZGUoKTsK\nICAgICAgICBpZiAoX3BhcmFtcyAhPSBudWxsKQogICAgICAgICAgICBjb2Rl\nID0gMzcgKiBjb2RlICsgX3BhcmFtcy5oYXNoQ29kZSgpOwogICAgICAgIHJl\ndHVybiBjb2RlOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgdG9TdHJpbmco\nKSB7CiAgICAgICAgU3RyaW5nQnVpbGRlciBidWYgPSBuZXcgU3RyaW5nQnVp\nbGRlcigxMDI0KTsKICAgICAgICBidWYuYXBwZW5kKHN1cGVyLnRvU3RyaW5n\nKCkpLgogICAgICAgICAgICBhcHBlbmQoIltxdWVyeTpbIikuYXBwZW5kKF9x\ndWVyeSkuYXBwZW5kKCJdIikuCiAgICAgICAgICAgIGFwcGVuZCgiLGFjY2Vz\ncyBwYXRoOiIpLmFwcGVuZChfYWNjZXNzUGF0aENsYXNzTmFtZXMpLgogICAg\nICAgICAgICBhcHBlbmQoIixzdWJzOiIpLmFwcGVuZChfc3ViY2xhc3Nlcyku\nCiAgICAgICAgICAgIGFwcGVuZCgiLGlnbm9yZUNoYW5nZXM6IikuYXBwZW5k\nKF9pZ25vcmVDaGFuZ2VzKS4KICAgICAgICAgICAgYXBwZW5kKCIsc3RhcnRS\nYW5nZToiKS5hcHBlbmQoX3JhbmdlU3RhcnQpLgogICAgICAgICAgICBhcHBl\nbmQoIixlbmRSYW5nZToiKS5hcHBlbmQoX3JhbmdlRW5kKS4KICAgICAgICAg\nICAgYXBwZW5kKCIsdGltZW91dDoiKS5hcHBlbmQoX3RpbWVvdXQpLgogICAg\nICAgICAgICBhcHBlbmQoIl0iKTsKICAgICAgICByZXR1cm4gYnVmLnRvU3Ry\naW5nKCk7CiAgICB9CgogICAgLy8gLS0tLS0tLS0tLSBFeHRlcm5hbGl6YWJs\nZSBpbXBsZW1lbnRhdGlvbiAtLS0tLS0tLS0tCgogICAgcHVibGljIHZvaWQg\nd3JpdGVFeHRlcm5hbChPYmplY3RPdXRwdXQgb3V0KQogICAgICAgIHRocm93\ncyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgb3V0LndyaXRlT2JqZWN0KF9jYW5k\naWRhdGVDbGFzc05hbWUpOwogICAgICAgIG91dC53cml0ZUJvb2xlYW4oX3N1\nYmNsYXNzZXMpOwogICAgICAgIG91dC53cml0ZU9iamVjdChfYWNjZXNzUGF0\naENsYXNzTmFtZXMpOwogICAgICAgIG91dC53cml0ZU9iamVjdChfcXVlcnkp\nOwogICAgICAgIG91dC53cml0ZUJvb2xlYW4oX2lnbm9yZUNoYW5nZXMpOwog\nICAgICAgIG91dC53cml0ZU9iamVjdChfcGFyYW1zKTsKICAgICAgICBvdXQu\nd3JpdGVMb25nKF9yYW5nZVN0YXJ0KTsKICAgICAgICBvdXQud3JpdGVMb25n\nKF9yYW5nZUVuZCk7CiAgICAgICAgb3V0LndyaXRlSW50KF90aW1lb3V0KTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCByZWFkRXh0ZXJuYWwoT2JqZWN0SW5w\ndXQgaW4pCiAgICAgICAgdGhyb3dzIElPRXhjZXB0aW9uLCBDbGFzc05vdEZv\ndW5kRXhjZXB0aW9uIHsKICAgICAgICBfY2FuZGlkYXRlQ2xhc3NOYW1lID0g\nKFN0cmluZykgaW4ucmVhZE9iamVjdCgpOwogICAgICAgIF9zdWJjbGFzc2Vz\nID0gaW4ucmVhZEJvb2xlYW4oKTsKICAgICAgICBfYWNjZXNzUGF0aENsYXNz\nTmFtZXMgPSAoU2V0KSBpbi5yZWFkT2JqZWN0KCk7CiAgICAgICAgX3F1ZXJ5\nID0gKFN0cmluZykgaW4ucmVhZE9iamVjdCgpOwogICAgICAgIF9pZ25vcmVD\naGFuZ2VzID0gaW4ucmVhZEJvb2xlYW4oKTsKICAgICAgICBfcGFyYW1zID0g\nKE1hcCkgaW4ucmVhZE9iamVjdCgpOwogICAgICAgIF9yYW5nZVN0YXJ0ID0g\naW4ucmVhZExvbmcoKTsKICAgICAgICBfcmFuZ2VFbmQgPSBpbi5yZWFkTG9u\nZyAoKTsKCQlfdGltZW91dCA9IGluLnJlYWRJbnQgKCk7Cgl9CiAgICAKICAg\nIC8qKgogICAgICogUmV0dXJucyB0aGUgc2V0IG9mIHRoZSBhY2Nlc3NQYXRo\nQ2xhc3NuYW1lcyB0aGF0IGV4aXN0cyBpbiB0aGUgcXVlcnkKICAgICAqIEBy\nZXR1cm4gLS0gUmV0dXJucyBhIHNldCBvZiBhY2Nlc3NwYXRoIGNsYXNzbmFt\nZXMuCiAgICAgKi8KICAgIHB1YmxpYyBTZXQ8U3RyaW5nPiBnZXRBY2Vzc1Bh\ndGhDbGFzc05hbWVzKCkgewogICAgICAgIHJldHVybiB0aGlzLl9hY2Nlc3NQ\nYXRoQ2xhc3NOYW1lczsKICAgIH0KfQo=\n","encoding":"base64"}

