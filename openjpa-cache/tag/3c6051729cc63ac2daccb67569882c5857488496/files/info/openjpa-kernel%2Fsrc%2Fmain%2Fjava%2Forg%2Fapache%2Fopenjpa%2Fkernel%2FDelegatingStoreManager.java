{"sha":"7de80286336914b071cd8e0d0c12b2ab7cd20325","node_id":"MDQ6QmxvYjIwNjM2NDo3ZGU4MDI4NjMzNjkxNGIwNzFjZDhlMGQwYzEyYjJhYjdjZDIwMzI1","size":5968,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/7de80286336914b071cd8e0d0c12b2ab7cd20325","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsOwoKaW1wb3J0IGph\ndmEudXRpbC5CaXRTZXQ7CmltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbjsK\naW1wb3J0IGphdmEudXRpbC5MaXN0OwoKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5saWIucm9wLlJlc3VsdE9iamVjdFByb3ZpZGVyOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLm1ldGEuQ2xhc3NNZXRhRGF0YTsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5tZXRhLkZpZWxkTWV0YURhdGE7CgovKioKICog\nQmFzZSBjbGFzcyBmb3Igc3RvcmUgbWFuYWdlciBkZWNvcmF0b3JzIHRoYXQg\nZGVsZWdhdGUgdG8gYW5vdGhlcgogKiBzdG9yZSBtYW5hZ2VyIGZvciBzb21l\nIG9wZXJhdGlvbnMuCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqLwpwdWJs\naWMgYWJzdHJhY3QgY2xhc3MgRGVsZWdhdGluZ1N0b3JlTWFuYWdlcgogICAg\naW1wbGVtZW50cyBTdG9yZU1hbmFnZXIgewoKICAgIHByaXZhdGUgZmluYWwg\nU3RvcmVNYW5hZ2VyIF9zdG9yZTsKICAgIHByaXZhdGUgZmluYWwgRGVsZWdh\ndGluZ1N0b3JlTWFuYWdlciBfZGVsOwoKICAgIC8qKgogICAgICogQ29uc3Ry\ndWN0b3IuIFN1cHBseSBkZWxlZ2F0ZS4KICAgICAqLwogICAgcHVibGljIERl\nbGVnYXRpbmdTdG9yZU1hbmFnZXIoU3RvcmVNYW5hZ2VyIHN0b3JlKSB7CiAg\nICAgICAgX3N0b3JlID0gc3RvcmU7CiAgICAgICAgaWYgKHN0b3JlIGluc3Rh\nbmNlb2YgRGVsZWdhdGluZ1N0b3JlTWFuYWdlcikKICAgICAgICAgICAgX2Rl\nbCA9IChEZWxlZ2F0aW5nU3RvcmVNYW5hZ2VyKSBfc3RvcmU7CiAgICAgICAg\nZWxzZQogICAgICAgICAgICBfZGVsID0gbnVsbDsKICAgIH0KCiAgICAvKioK\nICAgICAqIFJldHVybiB0aGUgd3JhcHBlZCBzdG9yZSBtYW5hZ2VyLgogICAg\nICovCiAgICBwdWJsaWMgU3RvcmVNYW5hZ2VyIGdldERlbGVnYXRlKCkgewog\nICAgICAgIHJldHVybiBfc3RvcmU7CiAgICB9CgogICAgLyoqCiAgICAgKiBS\nZXR1cm4gdGhlIGJhc2UgdW5kZXJseWluZyBuYXRpdmUgc3RvcmUgbWFuYWdl\nci4KICAgICAqLwogICAgcHVibGljIFN0b3JlTWFuYWdlciBnZXRJbm5lcm1v\nc3REZWxlZ2F0ZSgpIHsKICAgICAgICByZXR1cm4gKF9kZWwgPT0gbnVsbCkg\nPyBfc3RvcmUgOiBfZGVsLmdldElubmVybW9zdERlbGVnYXRlKCk7CiAgICB9\nCgogICAgcHVibGljIGludCBoYXNoQ29kZSgpIHsKICAgICAgICByZXR1cm4g\nZ2V0SW5uZXJtb3N0RGVsZWdhdGUoKS5oYXNoQ29kZSgpOwogICAgfQoKICAg\nIHB1YmxpYyBib29sZWFuIGVxdWFscyhPYmplY3Qgb3RoZXIpIHsKICAgICAg\nICBpZiAob3RoZXIgPT0gdGhpcykKICAgICAgICAgICAgcmV0dXJuIHRydWU7\nCiAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgRGVsZWdhdGluZ1N0b3Jl\nTWFuYWdlcikKICAgICAgICAgICAgb3RoZXIgPSAoKERlbGVnYXRpbmdTdG9y\nZU1hbmFnZXIpIG90aGVyKS5nZXRJbm5lcm1vc3REZWxlZ2F0ZSgpOwogICAg\nICAgIHJldHVybiBnZXRJbm5lcm1vc3REZWxlZ2F0ZSgpLmVxdWFscyhvdGhl\ncik7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0Q29udGV4dChTdG9yZUNv\nbnRleHQgY3R4KSB7CiAgICAgICAgX3N0b3JlLnNldENvbnRleHQoY3R4KTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCBiZWdpbk9wdGltaXN0aWMoKSB7CiAg\nICAgICAgX3N0b3JlLmJlZ2luT3B0aW1pc3RpYygpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHJvbGxiYWNrT3B0aW1pc3RpYygpIHsKICAgICAgICBfc3Rv\ncmUucm9sbGJhY2tPcHRpbWlzdGljKCk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgYmVnaW4oKSB7CiAgICAgICAgX3N0b3JlLmJlZ2luKCk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgY29tbWl0KCkgewogICAgICAgIF9zdG9yZS5jb21t\naXQoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCByb2xsYmFjaygpIHsKICAg\nICAgICBfc3RvcmUucm9sbGJhY2soKTsKICAgIH0KCiAgICBwdWJsaWMgYm9v\nbGVhbiBleGlzdHMoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgT2JqZWN0IGNv\nbnRleHQpIHsKICAgICAgICByZXR1cm4gX3N0b3JlLmV4aXN0cyhzbSwgY29u\ndGV4dCk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gc3luY1ZlcnNpb24o\nT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgT2JqZWN0IGNvbnRleHQpIHsKICAg\nICAgICByZXR1cm4gX3N0b3JlLnN5bmNWZXJzaW9uKHNtLCBjb250ZXh0KTsK\nICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBpbml0aWFsaXplKE9wZW5KUEFT\ndGF0ZU1hbmFnZXIgc20sIFBDU3RhdGUgc3RhdGUsCiAgICAgICAgRmV0Y2hD\nb25maWd1cmF0aW9uIGZldGNoLCBPYmplY3QgY29udGV4dCkgewogICAgICAg\nIHJldHVybiBfc3RvcmUuaW5pdGlhbGl6ZShzbSwgc3RhdGUsIGZldGNoLCBj\nb250ZXh0KTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBsb2FkKE9wZW5K\nUEFTdGF0ZU1hbmFnZXIgc20sIEJpdFNldCBmaWVsZHMsCiAgICAgICAgRmV0\nY2hDb25maWd1cmF0aW9uIGZldGNoLCBpbnQgbG9ja0xldmVsLCBPYmplY3Qg\nY29udGV4dCkgewogICAgICAgIHJldHVybiBfc3RvcmUubG9hZChzbSwgZmll\nbGRzLCBmZXRjaCwgbG9ja0xldmVsLCBjb250ZXh0KTsKICAgIH0KCiAgICBw\ndWJsaWMgQ29sbGVjdGlvbjxPYmplY3Q+IGxvYWRBbGwoQ29sbGVjdGlvbjxP\ncGVuSlBBU3RhdGVNYW5hZ2VyPiBzbXMsIFBDU3RhdGUgc3RhdGUsIGludCBs\nb2FkLAogICAgICAgIEZldGNoQ29uZmlndXJhdGlvbiBmZXRjaCwgT2JqZWN0\nIGNvbnRleHQpIHsKICAgICAgICByZXR1cm4gX3N0b3JlLmxvYWRBbGwoc21z\nLCBzdGF0ZSwgbG9hZCwgZmV0Y2gsIGNvbnRleHQpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIGJlZm9yZVN0YXRlQ2hhbmdlKE9wZW5KUEFTdGF0ZU1hbmFn\nZXIgc20sIFBDU3RhdGUgZnJvbVN0YXRlLAogICAgICAgIFBDU3RhdGUgdG9T\ndGF0ZSkgewogICAgICAgIF9zdG9yZS5iZWZvcmVTdGF0ZUNoYW5nZShzbSwg\nZnJvbVN0YXRlLCB0b1N0YXRlKTsKICAgIH0KCiAgICBwdWJsaWMgQ29sbGVj\ndGlvbjxFeGNlcHRpb24+IGZsdXNoKENvbGxlY3Rpb248T3BlbkpQQVN0YXRl\nTWFuYWdlcj4gc21zKSB7CiAgICAgICAgcmV0dXJuIF9zdG9yZS5mbHVzaChz\nbXMpOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGFzc2lnbk9iamVjdElk\nKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIGJvb2xlYW4gcHJlRmx1c2gpIHsK\nICAgICAgICByZXR1cm4gX3N0b3JlLmFzc2lnbk9iamVjdElkKHNtLCBwcmVG\nbHVzaCk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gYXNzaWduRmllbGQo\nT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgaW50IGZpZWxkLAogICAgICAgIGJv\nb2xlYW4gcHJlRmx1c2gpIHsKICAgICAgICByZXR1cm4gX3N0b3JlLmFzc2ln\nbkZpZWxkKHNtLCBmaWVsZCwgcHJlRmx1c2gpOwogICAgfQoKICAgIHB1Ymxp\nYyBDbGFzczw/PiBnZXRNYW5hZ2VkVHlwZShPYmplY3Qgb2lkKSB7CiAgICAg\nICAgcmV0dXJuIF9zdG9yZS5nZXRNYW5hZ2VkVHlwZShvaWQpOwogICAgfQoK\nICAgIHB1YmxpYyBDbGFzczw/PiBnZXREYXRhU3RvcmVJZFR5cGUoQ2xhc3NN\nZXRhRGF0YSBtZXRhKSB7CiAgICAgICAgcmV0dXJuIF9zdG9yZS5nZXREYXRh\nU3RvcmVJZFR5cGUobWV0YSk7CiAgICB9CgogICAgcHVibGljIE9iamVjdCBj\nb3B5RGF0YVN0b3JlSWQoT2JqZWN0IG9pZCwgQ2xhc3NNZXRhRGF0YSBtZXRh\nKSB7CiAgICAgICAgcmV0dXJuIF9zdG9yZS5jb3B5RGF0YVN0b3JlSWQob2lk\nLCBtZXRhKTsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IG5ld0RhdGFTdG9y\nZUlkKE9iamVjdCBvaWRWYWwsIENsYXNzTWV0YURhdGEgbWV0YSkgewogICAg\nICAgIHJldHVybiBfc3RvcmUubmV3RGF0YVN0b3JlSWQob2lkVmFsLCBtZXRh\nKTsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IGdldENsaWVudENvbm5lY3Rp\nb24oKSB7CiAgICAgICAgcmV0dXJuIF9zdG9yZS5nZXRDbGllbnRDb25uZWN0\naW9uKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgcmV0YWluQ29ubmVjdGlv\nbigpIHsKICAgICAgICBfc3RvcmUucmV0YWluQ29ubmVjdGlvbigpOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHJlbGVhc2VDb25uZWN0aW9uKCkgewogICAg\nICAgIF9zdG9yZS5yZWxlYXNlQ29ubmVjdGlvbigpOwogICAgfQoKICAgIHB1\nYmxpYyBSZXN1bHRPYmplY3RQcm92aWRlciBleGVjdXRlRXh0ZW50KENsYXNz\nTWV0YURhdGEgbWV0YSwKICAgICAgICBib29sZWFuIHN1YmNsYXNzZXMsIEZl\ndGNoQ29uZmlndXJhdGlvbiBmZXRjaCkgewogICAgICAgIHJldHVybiBfc3Rv\ncmUuZXhlY3V0ZUV4dGVudChtZXRhLCBzdWJjbGFzc2VzLCBmZXRjaCk7CiAg\nICB9CgogICAgcHVibGljIFN0b3JlUXVlcnkgbmV3UXVlcnkoU3RyaW5nIGxh\nbmd1YWdlKSB7CiAgICAgICAgcmV0dXJuIF9zdG9yZS5uZXdRdWVyeShsYW5n\ndWFnZSk7CiAgICB9CgogICAgcHVibGljIEZldGNoQ29uZmlndXJhdGlvbiBu\nZXdGZXRjaENvbmZpZ3VyYXRpb24oKSB7CiAgICAgICAgcmV0dXJuIF9zdG9y\nZS5uZXdGZXRjaENvbmZpZ3VyYXRpb24oKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBjbG9zZSgpIHsKICAgICAgICBfc3RvcmUuY2xvc2UoKTsKICAgIH0K\nCiAgICBwdWJsaWMgaW50IGNvbXBhcmVWZXJzaW9uKE9wZW5KUEFTdGF0ZU1h\nbmFnZXIgc3RhdGUsIE9iamVjdCB2MSwgT2JqZWN0IHYyKSB7CiAgICAgICAg\ncmV0dXJuIF9zdG9yZS5jb21wYXJlVmVyc2lvbihzdGF0ZSwgdjEsIHYyKTsK\nICAgIH0KCiAgICBwdWJsaWMgU2VxIGdldERhdGFTdG9yZUlkU2VxdWVuY2Uo\nQ2xhc3NNZXRhRGF0YSBmb3JDbGFzcykgewogICAgICAgIHJldHVybiBfc3Rv\ncmUuZ2V0RGF0YVN0b3JlSWRTZXF1ZW5jZShmb3JDbGFzcyk7CiAgICB9Cgog\nICAgcHVibGljIFNlcSBnZXRWYWx1ZVNlcXVlbmNlKEZpZWxkTWV0YURhdGEg\nZm1kKSB7CiAgICAgICAgcmV0dXJuIF9zdG9yZS5nZXRWYWx1ZVNlcXVlbmNl\nKGZtZCk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gY2FuY2VsQWxsKCkg\newogICAgICAgIHJldHVybiBfc3RvcmUuY2FuY2VsQWxsKCk7Cgl9CgkKICAg\nIHB1YmxpYyBib29sZWFuIGlzQ2FjaGVkKExpc3Q8T2JqZWN0PiBvaWRzLCBC\naXRTZXQgZWRhdGEpIHsKICAgICAgICByZXR1cm4gX3N0b3JlLmlzQ2FjaGVk\nKG9pZHMsIGVkYXRhKTsKICAgIH0KICAgIAp9Cg==\n","encoding":"base64"}

