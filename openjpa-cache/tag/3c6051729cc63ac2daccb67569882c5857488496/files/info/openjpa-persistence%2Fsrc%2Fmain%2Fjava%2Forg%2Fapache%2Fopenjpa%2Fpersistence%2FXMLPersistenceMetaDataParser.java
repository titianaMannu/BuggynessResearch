{"sha":"b1cecccfcd87bd6748bbdc732cc5bd3d99f005d3","node_id":"MDQ6QmxvYjIwNjM2NDpiMWNlY2NjZmNkODdiZDY3NDhiYmRjNzMyY2M1YmQzZDk5ZjAwNWQz","size":72860,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/b1cecccfcd87bd6748bbdc732cc5bd3d99f005d3","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZTsKCmltcG9ydCBq\nYXZhLmlvLkZpbGU7CmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uOwppbXBv\ncnQgamF2YS5sYW5nLnJlZmxlY3QuRmllbGQ7CmltcG9ydCBqYXZhLmxhbmcu\ncmVmbGVjdC5NZW1iZXI7CmltcG9ydCBqYXZhLmxhbmcucmVmbGVjdC5NZXRo\nb2Q7CmltcG9ydCBqYXZhLm5ldC5VUkw7CmltcG9ydCBqYXZhLnV0aWwuQXJy\nYXlMaXN0OwppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247CmltcG9ydCBq\nYXZhLnV0aWwuRW51bVNldDsKaW1wb3J0IGphdmEudXRpbC5IYXNoTWFwOwpp\nbXBvcnQgamF2YS51dGlsLk1hcDsKaW1wb3J0IGphdmEudXRpbC5TZXQ7Cmlt\ncG9ydCBqYXZhLnV0aWwuU3RhY2s7CgppbXBvcnQgamF2YXgucGVyc2lzdGVu\nY2UuQ2FzY2FkZVR5cGU7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5HZW5l\ncmF0aW9uVHlwZTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkxvY2tNb2Rl\nVHlwZTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLk5hbWVkUXVlcnk7Cgpp\nbXBvcnQgc3RhdGljIGphdmF4LnBlcnNpc3RlbmNlLkNhc2NhZGVUeXBlLio7\nCgppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmxhbmcuU3RyaW5nVXRpbHM7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuY29uZi5PcGVuSlBBQ29uZmln\ndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5lbmhhbmNlLlBl\ncnNpc3RlbmNlQ2FwYWJsZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5l\ndmVudC5CZWFuTGlmZWN5Y2xlQ2FsbGJhY2tzOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmV2ZW50LkxpZmVjeWNsZUNhbGxiYWNrczsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5ldmVudC5MaWZlY3ljbGVFdmVudDsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5ldmVudC5NZXRob2RMaWZlY3ljbGVDYWxs\nYmFja3M7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlF1ZXJ5\nTGFuZ3VhZ2VzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5q\ncHFsLkpQUUxQYXJzZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGli\nLmNvbmYuQ29uZmlndXJhdGlvbnM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEubGliLmxvZy5Mb2c7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGli\nLm1ldGEuQ0ZNZXRhRGF0YVBhcnNlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5saWIubWV0YS5Tb3VyY2VUcmFja2VyOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmxpYi5tZXRhLlhNTFZlcnNpb25QYXJzZXI7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuQWNjZXNzQ29kZTsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5tZXRhLkNsYXNzTWV0YURhdGE7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEubWV0YS5EZWxlZ2F0aW5nTWV0YURhdGFGYWN0\nb3J5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuRmllbGRNZXRh\nRGF0YTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkphdmFUeXBl\nczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkxpZmVjeWNsZU1l\ndGFEYXRhOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuTWV0YURh\ndGFDb250ZXh0OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuTWV0\nYURhdGFGYWN0b3J5OwppbXBvcnQgc3RhdGljIG9yZy5hcGFjaGUub3Blbmpw\nYS5tZXRhLk1ldGFEYXRhTW9kZXMuKjsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5tZXRhLk1ldGFEYXRhUmVwb3NpdG9yeTsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5tZXRhLk9yZGVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLm1ldGEuUXVlcnlNZXRhRGF0YTsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5tZXRhLlNlcXVlbmNlTWV0YURhdGE7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEubWV0YS5WYWx1ZU1ldGFEYXRhOwoKaW1wb3J0IHN0YXRpYyBv\ncmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuTWV0YURhdGFUYWcuKjsK\naW1wb3J0IHN0YXRpYyBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uu\nUGVyc2lzdGVuY2VTdHJhdGVneS4qOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLnV0aWwuSW1wbEhlbHBlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS51dGlsLk1ldGFEYXRhRXhjZXB0aW9uOwppbXBvcnQgb3JnLnhtbC5zYXgu\nQXR0cmlidXRlczsKaW1wb3J0IG9yZy54bWwuc2F4LkxvY2F0b3I7CmltcG9y\ndCBvcmcueG1sLnNheC5TQVhFeGNlcHRpb247CgoKLyoqCiAqIEN1c3RvbSBT\nQVggcGFyc2VyIHVzZWQgYnkgdGhlIHN5c3RlbSB0byBxdWlja2x5IHBhcnNl\nIHBlcnNpc3RlbmNlCiAqIG1ldGFkYXRhIGZpbGVzLiBUaGlzIHBhcnNlciBt\nYXkgaW52b2tlCiAqIHtAbGlua3BsYWluIEFubm90YXRpb25QZXJzaXN0ZW5j\nZU1ldGFEYXRhUGFyc2VyIGFub3RoZXIgcGFyc2VyfSB0byBzY2FuCiAqIHNv\ndXJjZSBjb2RlIGFubm90YXRpb24uCiAqCiAqIEBhdXRob3IgU3RldmUgS2lt\nCiAqIEBhdXRob3IgUGluYWtpIFBvZGRhcgogKiBAbm9qYXZhZG9jCiAqLwpw\ndWJsaWMgY2xhc3MgWE1MUGVyc2lzdGVuY2VNZXRhRGF0YVBhcnNlcgogICAg\nZXh0ZW5kcyBDRk1ldGFEYXRhUGFyc2VyCiAgICBpbXBsZW1lbnRzIFBlcnNp\nc3RlbmNlTWV0YURhdGFGYWN0b3J5LlBhcnNlciB7CgogICAgLy8gcGFyc2Ug\nY29uc3RhbnRzCiAgICBwcm90ZWN0ZWQgc3RhdGljIGZpbmFsIFN0cmluZyBF\nTEVNX1BLRyA9ICJwYWNrYWdlIjsKICAgIHByb3RlY3RlZCBzdGF0aWMgZmlu\nYWwgU3RyaW5nIEVMRU1fQUNDRVNTID0gImFjY2VzcyI7CiAgICBwcm90ZWN0\nZWQgc3RhdGljIGZpbmFsIFN0cmluZyBFTEVNX0FUVFJTID0gImF0dHJpYnV0\nZXMiOwogICAgcHJvdGVjdGVkIHN0YXRpYyBmaW5hbCBTdHJpbmcgRUxFTV9M\nSVNURU5FUiA9ICJlbnRpdHktbGlzdGVuZXIiOwogICAgcHJvdGVjdGVkIHN0\nYXRpYyBmaW5hbCBTdHJpbmcgRUxFTV9DQVNDQURFID0gImNhc2NhZGUiOwog\nICAgcHJvdGVjdGVkIHN0YXRpYyBmaW5hbCBTdHJpbmcgRUxFTV9DQVNDQURF\nX0FMTCA9ICJjYXNjYWRlLWFsbCI7CiAgICBwcm90ZWN0ZWQgc3RhdGljIGZp\nbmFsIFN0cmluZyBFTEVNX0NBU0NBREVfUEVSID0gImNhc2NhZGUtcGVyc2lz\ndCI7CiAgICBwcm90ZWN0ZWQgc3RhdGljIGZpbmFsIFN0cmluZyBFTEVNX0NB\nU0NBREVfTUVSID0gImNhc2NhZGUtbWVyZ2UiOwogICAgcHJvdGVjdGVkIHN0\nYXRpYyBmaW5hbCBTdHJpbmcgRUxFTV9DQVNDQURFX1JFTSA9ICJjYXNjYWRl\nLXJlbW92ZSI7CiAgICBwcm90ZWN0ZWQgc3RhdGljIGZpbmFsIFN0cmluZyBF\nTEVNX0NBU0NBREVfUkVGID0gImNhc2NhZGUtcmVmcmVzaCI7CiAgICBwcm90\nZWN0ZWQgc3RhdGljIGZpbmFsIFN0cmluZyBFTEVNX0NBU0NBREVfREVUID0g\nImNhc2NhZGUtZGV0YWNoIjsKICAgIHByb3RlY3RlZCBzdGF0aWMgZmluYWwg\nU3RyaW5nIEVMRU1fUFVfTUVUQSA9ICJwZXJzaXN0ZW5jZS11bml0LW1ldGFk\nYXRhIjsKICAgIHByb3RlY3RlZCBzdGF0aWMgZmluYWwgU3RyaW5nIEVMRU1f\nUFVfREVGID0gInBlcnNpc3RlbmNlLXVuaXQtZGVmYXVsdHMiOwogICAgcHJv\ndGVjdGVkIHN0YXRpYyBmaW5hbCBTdHJpbmcgRUxFTV9YTUxfTUFQX01FVEFf\nQ09NUExFVEUgPSAieG1sLW1hcHBpbmctbWV0YWRhdGEtY29tcGxldGUiOwog\nICAgcHJvdGVjdGVkIHN0YXRpYyBmaW5hbCBTdHJpbmcgRUxFTV9ERUxJTV9J\nRFMgPSAiZGVsaW1pdGVkLWlkZW50aWZpZXJzIjsKICAgIAogICAgLy8gVGhl\nIGZvbGxvd2luZyBpcyBuZWVkZWQgZm9yIGlucHV0IGludG8gdGhlIGRlbGlt\naXRTdHJpbmcoKSBtZXRob2QKICAgIHByb3RlY3RlZCBzdGF0aWMgZW51bSBs\nb2NhbERCSWRlbnRpZmllcnMgewogICAgICAgIFNFUVVFTkNFX0dFTl9TRVFf\nTkFNRSwKICAgICAgICBTRVFVRU5DRV9HRU5fU0NIRU1BCiAgICB9ICAgIAoK\nICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIE1hcDxTdHJpbmcsIE9iamVjdD4g\nX2VsZW1zID0KICAgICAgICBuZXcgSGFzaE1hcDxTdHJpbmcsIE9iamVjdD4o\nKTsKCiAgICAvLyBNYXAgZm9yIHN0b3JpbmcgZGVmZXJyZWQgbWV0YWRhdGEg\nd2hpY2ggbmVlZHMgdG8gYmUgcG9wdWxhdGVkCiAgICAvLyBhZnRlciBlbWJl\nZGRhYmxlcyBhcmUgbG9hZGVkLgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwg\nTWFwPENsYXNzPD8+LCBBcnJheUxpc3Q8TWV0YURhdGFDb250ZXh0Pj4KICAg\nICAgICBfZW1iZWRkYWJsZXMgPSBuZXcgSGFzaE1hcDxDbGFzczw/PiwgQXJy\nYXlMaXN0PE1ldGFEYXRhQ29udGV4dD4+KCk7CiAgICBwcml2YXRlIHN0YXRp\nYyBmaW5hbCBNYXA8Q2xhc3M8Pz4sIEludGVnZXI+CiAgICAgICAgX2VtYmVk\nZGFibGVBY2Nlc3MgPSBuZXcgSGFzaE1hcDxDbGFzczw/PiwgSW50ZWdlcj4o\nKTsKCiAgICBzdGF0aWMgewogICAgICAgIF9lbGVtcy5wdXQoRUxFTV9QS0cs\nIEVMRU1fUEtHKTsKICAgICAgICBfZWxlbXMucHV0KEVMRU1fQUNDRVNTLCBF\nTEVNX0FDQ0VTUyk7CiAgICAgICAgX2VsZW1zLnB1dChFTEVNX0FUVFJTLCBF\nTEVNX0FUVFJTKTsKICAgICAgICBfZWxlbXMucHV0KEVMRU1fTElTVEVORVIs\nIEVMRU1fTElTVEVORVIpOwogICAgICAgIF9lbGVtcy5wdXQoRUxFTV9DQVND\nQURFLCBFTEVNX0NBU0NBREUpOwogICAgICAgIF9lbGVtcy5wdXQoRUxFTV9D\nQVNDQURFX0FMTCwgRUxFTV9DQVNDQURFX0FMTCk7CiAgICAgICAgX2VsZW1z\nLnB1dChFTEVNX0NBU0NBREVfUEVSLCBFTEVNX0NBU0NBREVfUEVSKTsKICAg\nICAgICBfZWxlbXMucHV0KEVMRU1fQ0FTQ0FERV9SRU0sIEVMRU1fQ0FTQ0FE\nRV9SRU0pOwogICAgICAgIF9lbGVtcy5wdXQoRUxFTV9DQVNDQURFX01FUiwg\nRUxFTV9DQVNDQURFX01FUik7CiAgICAgICAgX2VsZW1zLnB1dChFTEVNX0NB\nU0NBREVfUkVGLCBFTEVNX0NBU0NBREVfUkVGKTsKICAgICAgICBfZWxlbXMu\ncHV0KEVMRU1fQ0FTQ0FERV9ERVQsIEVMRU1fQ0FTQ0FERV9ERVQpOwogICAg\nICAgIF9lbGVtcy5wdXQoRUxFTV9QVV9NRVRBLCBFTEVNX1BVX01FVEEpOwog\nICAgICAgIF9lbGVtcy5wdXQoRUxFTV9QVV9ERUYsIEVMRU1fUFVfREVGKTsK\nICAgICAgICBfZWxlbXMucHV0KEVMRU1fWE1MX01BUF9NRVRBX0NPTVBMRVRF\nLCBFTEVNX1hNTF9NQVBfTUVUQV9DT01QTEVURSk7CiAgICAgICAgX2VsZW1z\nLnB1dChFTEVNX0RFTElNX0lEUywgRUxFTV9ERUxJTV9JRFMpOwoKICAgICAg\nICBfZWxlbXMucHV0KCJlbnRpdHktbGlzdGVuZXJzIiwgRU5USVRZX0xJU1RF\nTkVSUyk7CiAgICAgICAgX2VsZW1zLnB1dCgicHJlLXBlcnNpc3QiLCBQUkVf\nUEVSU0lTVCk7CiAgICAgICAgX2VsZW1zLnB1dCgicG9zdC1wZXJzaXN0Iiwg\nUE9TVF9QRVJTSVNUKTsKICAgICAgICBfZWxlbXMucHV0KCJwcmUtcmVtb3Zl\nIiwgUFJFX1JFTU9WRSk7CiAgICAgICAgX2VsZW1zLnB1dCgicG9zdC1yZW1v\ndmUiLCBQT1NUX1JFTU9WRSk7CiAgICAgICAgX2VsZW1zLnB1dCgicHJlLXVw\nZGF0ZSIsIFBSRV9VUERBVEUpOwogICAgICAgIF9lbGVtcy5wdXQoInBvc3Qt\ndXBkYXRlIiwgUE9TVF9VUERBVEUpOwogICAgICAgIF9lbGVtcy5wdXQoInBv\nc3QtbG9hZCIsIFBPU1RfTE9BRCk7CiAgICAgICAgX2VsZW1zLnB1dCgiZXhj\nbHVkZS1kZWZhdWx0LWxpc3RlbmVycyIsIEVYQ0xVREVfREVGQVVMVF9MSVNU\nRU5FUlMpOwogICAgICAgIF9lbGVtcy5wdXQoImV4Y2x1ZGUtc3VwZXJjbGFz\ncy1saXN0ZW5lcnMiLAogICAgICAgICAgICBFWENMVURFX1NVUEVSQ0xBU1Nf\nTElTVEVORVJTKTsKCiAgICAgICAgX2VsZW1zLnB1dCgibmFtZWQtcXVlcnki\nLCBRVUVSWSk7CiAgICAgICAgX2VsZW1zLnB1dCgibmFtZWQtbmF0aXZlLXF1\nZXJ5IiwgTkFUSVZFX1FVRVJZKTsKICAgICAgICBfZWxlbXMucHV0KCJxdWVy\neS1oaW50IiwgUVVFUllfSElOVCk7CiAgICAgICAgX2VsZW1zLnB1dCgicXVl\ncnkiLCBRVUVSWV9TVFJJTkcpOwoKICAgICAgICBfZWxlbXMucHV0KCJmbHVz\naC1tb2RlIiwgRkxVU0hfTU9ERSk7CiAgICAgICAgX2VsZW1zLnB1dCgic2Vx\ndWVuY2UtZ2VuZXJhdG9yIiwgU0VRX0dFTkVSQVRPUik7CgogICAgICAgIF9l\nbGVtcy5wdXQoImlkIiwgSUQpOwogICAgICAgIF9lbGVtcy5wdXQoImlkLWNs\nYXNzIiwgSURfQ0xBU1MpOwogICAgICAgIF9lbGVtcy5wdXQoImVtYmVkZGVk\nLWlkIiwgRU1CRURERURfSUQpOwogICAgICAgIF9lbGVtcy5wdXQoIm1hcHMt\naWQiLCBNQVBQRURfQllfSUQpOwogICAgICAgIF9lbGVtcy5wdXQoInZlcnNp\nb24iLCBWRVJTSU9OKTsKICAgICAgICBfZWxlbXMucHV0KCJnZW5lcmF0ZWQt\ndmFsdWUiLCBHRU5FUkFURURfVkFMVUUpOwogICAgICAgIF9lbGVtcy5wdXQo\nIm1hcC1rZXkiLCBNQVBfS0VZKTsKICAgICAgICBfZWxlbXMucHV0KCJvcmRl\nci1ieSIsIE9SREVSX0JZKTsKICAgICAgICBfZWxlbXMucHV0KCJvcmRlci1j\nb2x1bW4iLCBPUkRFUl9DT0xVTU4pOwogICAgICAgIF9lbGVtcy5wdXQoImxv\nYiIsIExPQik7CgogICAgICAgIF9lbGVtcy5wdXQoImJhc2ljIiwgQkFTSUMp\nOwogICAgICAgIF9lbGVtcy5wdXQoIm1hbnktdG8tb25lIiwgTUFOWV9PTkUp\nOwogICAgICAgIF9lbGVtcy5wdXQoIm9uZS10by1vbmUiLCBPTkVfT05FKTsK\nICAgICAgICBfZWxlbXMucHV0KCJlbWJlZGRlZCIsIEVNQkVEREVEKTsKICAg\nICAgICBfZWxlbXMucHV0KCJvbmUtdG8tbWFueSIsIE9ORV9NQU5ZKTsKICAg\nICAgICBfZWxlbXMucHV0KCJtYW55LXRvLW1hbnkiLCBNQU5ZX01BTlkpOwog\nICAgICAgIF9lbGVtcy5wdXQoInRyYW5zaWVudCIsIFRSQU5TSUVOVCk7CiAg\nICAgICAgX2VsZW1zLnB1dCgiZWxlbWVudC1jb2xsZWN0aW9uIiwgRUxFTV9D\nT0xMKTsKICAgICAgICBfZWxlbXMucHV0KCJtYXAta2V5LWNsYXNzIiwgTUFQ\nX0tFWV9DTEFTUyk7CiAgICB9CgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwg\nTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6ZXIuZm9yUGFja2FnZQogICAgICAg\nIChYTUxQZXJzaXN0ZW5jZU1ldGFEYXRhUGFyc2VyLmNsYXNzKTsKCiAgICBw\ncml2YXRlIGZpbmFsIE9wZW5KUEFDb25maWd1cmF0aW9uIF9jb25mOwogICAg\ncHJpdmF0ZSBNZXRhRGF0YVJlcG9zaXRvcnkgX3JlcG9zID0gbnVsbDsKICAg\nIHByaXZhdGUgQW5ub3RhdGlvblBlcnNpc3RlbmNlTWV0YURhdGFQYXJzZXIg\nX3BhcnNlciA9IG51bGw7CiAgICBwcml2YXRlIENsYXNzTG9hZGVyIF9lbnZM\nb2FkZXIgPSBudWxsOwogICAgcHJpdmF0ZSBpbnQgX21vZGUgPSBNT0RFX05P\nTkU7CiAgICBwcml2YXRlIGJvb2xlYW4gX292ZXJyaWRlID0gZmFsc2U7Cgog\nICAgcHJpdmF0ZSBmaW5hbCBTdGFjazxPYmplY3Q+IF9lbGVtZW50cyA9IG5l\ndyBTdGFjazxPYmplY3Q+KCk7CiAgICBwcml2YXRlIGZpbmFsIFN0YWNrPE9i\namVjdD4gX3BhcmVudHMgPSBuZXcgU3RhY2s8T2JqZWN0PigpOwoKICAgIHBy\naXZhdGUgQ2xhc3M8Pz4gX2NscyA9IG51bGw7CiAgICAvLyBMaXN0IG9mIGNs\nYXNzZXMgY3VycmVudGx5IGJlaW5nIHBhcnNlZAogICAgcHJpdmF0ZSBBcnJh\neUxpc3Q8Q2xhc3M8Pz4+IF9wYXJzZUxpc3QgPSBuZXcgQXJyYXlMaXN0PENs\nYXNzPD8+PigpOwogICAgcHJpdmF0ZSBpbnQgX2ZpZWxkUG9zID0gMDsKICAg\nIHByaXZhdGUgaW50IF9jbHNQb3MgPSAwOwogICAgcHJpdmF0ZSBpbnQgX2Fj\nY2VzcyA9IEFjY2Vzc0NvZGUuVU5LTk9XTjsKICAgIHByaXZhdGUgUGVyc2lz\ndGVuY2VTdHJhdGVneSBfc3RyYXRlZ3kgPSBudWxsOwogICAgcHJpdmF0ZSBT\nZXQ8Q2FzY2FkZVR5cGU+IF9jYXNjYWRlcyA9IG51bGw7CiAgICBwcml2YXRl\nIFNldDxDYXNjYWRlVHlwZT4gX3BrZ0Nhc2NhZGVzID0gbnVsbDsKCiAgICBw\ncml2YXRlIENsYXNzPD8+IF9saXN0ZW5lciA9IG51bGw7CiAgICBwcml2YXRl\nIENvbGxlY3Rpb248TGlmZWN5Y2xlQ2FsbGJhY2tzPltdIF9jYWxsYmFja3Mg\nPSBudWxsOwogICAgcHJpdmF0ZSBDb2xsZWN0aW9uPENsYXNzPD8+PiBfbGlz\ndGVuZXJzID0gbnVsbDsKICAgIHByaXZhdGUgaW50W10gX2hpZ2hzID0gbnVs\nbDsKICAgIHByaXZhdGUgYm9vbGVhbiBfaXNYTUxNYXBwaW5nTWV0YURhdGFD\nb21wbGV0ZSA9IGZhbHNlOwoKICAgIHByaXZhdGUgU3RyaW5nIF9vcm1WZXJz\naW9uOwogICAgcHJpdmF0ZSBTdHJpbmcgX3NjaGVtYUxvY2F0aW9uOwoKICAg\nIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBPUk1fWFNEXzFfMCA9ICJv\ncm1fMV8wLnhzZCI7CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcg\nT1JNX1hTRF8yXzAgPSAib3JtXzJfMC54c2QiOwoKICAgIC8qKgogICAgICog\nQ29uc3RydWN0b3I7IHN1cHBseSBjb25maWd1cmF0aW9uLgogICAgICovCiAg\nICBwdWJsaWMgWE1MUGVyc2lzdGVuY2VNZXRhRGF0YVBhcnNlcihPcGVuSlBB\nQ29uZmlndXJhdGlvbiBjb25mKSB7CiAgICAgICAgX2NvbmYgPSBjb25mOwog\nICAgICAgIHNldFZhbGlkYXRpbmcodHJ1ZSk7CiAgICAgICAgc2V0TG9nKGNv\nbmYuZ2V0TG9nKE9wZW5KUEFDb25maWd1cmF0aW9uLkxPR19NRVRBREFUQSkp\nOwogICAgICAgIHNldFBhcnNlQ29tbWVudHModHJ1ZSk7CiAgICAgICAgc2V0\nTW9kZShNT0RFX01FVEEgfCBNT0RFX01BUFBJTkcgfCBNT0RFX1FVRVJZKTsK\nICAgICAgICBzZXRQYXJzZVRleHQodHJ1ZSk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBDb25maWd1cmF0aW9uIHN1cHBsaWVkIG9uIGNvbnN0cnVjdGlvbi4K\nICAgICAqLwogICAgcHVibGljIE9wZW5KUEFDb25maWd1cmF0aW9uIGdldENv\nbmZpZ3VyYXRpb24oKSB7CiAgICAgICAgcmV0dXJuIF9jb25mOwogICAgfQoK\nICAgIC8qKgogICAgICogVGhlIGFubm90YXRpb24gcGFyc2VyLiBXaGVuIGNs\nYXNzIGlzIGRpc2NvdmVyZWQgaW4gYW4gWE1MIGZpbGUsCiAgICAgKiB3ZSBm\naXJzdCBwYXJzZSBhbnkgYW5ub3RhdGlvbnMgcHJlc2VudCwgdGhlbiBvdmVy\ncmlkZSB3aXRoIHRoZSBYTUwuCiAgICAgKi8KICAgIHB1YmxpYyBBbm5vdGF0\naW9uUGVyc2lzdGVuY2VNZXRhRGF0YVBhcnNlciBnZXRBbm5vdGF0aW9uUGFy\nc2VyKCkgewogICAgICAgIHJldHVybiBfcGFyc2VyOwogICAgfQoKICAgIC8q\nKgogICAgICogVGhlIGFubm90YXRpb24gcGFyc2VyLiBXaGVuIGNsYXNzIGlz\nIGRpc2NvdmVyZWQgaW4gYW4gWE1MIGZpbGUsCiAgICAgKiB3ZSBmaXJzdCBw\nYXJzZSBhbnkgYW5ub3RhdGlvbnMgcHJlc2VudCwgdGhlbiBvdmVycmlkZSB3\naXRoIHRoZSBYTUwuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldEFubm90\nYXRpb25QYXJzZXIoQW5ub3RhdGlvblBlcnNpc3RlbmNlTWV0YURhdGFQYXJz\nZXIgcGFyc2VyKXsKICAgICAgICBfcGFyc2VyID0gcGFyc2VyOwogICAgfQoK\nICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgcmVwb3NpdG9yeSBmb3IgdGhp\ncyBwYXJzZXIuIElmIG5vbmUgaGFzIGJlZW4gc2V0LCBjcmVhdGVzCiAgICAg\nKiBhIG5ldyByZXBvc2l0b3J5IGFuZCBzZXRzIGl0LgogICAgICovCiAgICBw\ndWJsaWMgTWV0YURhdGFSZXBvc2l0b3J5IGdldFJlcG9zaXRvcnkoKSB7CiAg\nICAgICAgaWYgKF9yZXBvcyA9PSBudWxsKSB7CiAgICAgICAgICAgIE1ldGFE\nYXRhUmVwb3NpdG9yeSByZXBvcyA9IF9jb25mLm5ld01ldGFEYXRhUmVwb3Np\ndG9yeUluc3RhbmNlKCk7CiAgICAgICAgICAgIE1ldGFEYXRhRmFjdG9yeSBt\nZGYgPSByZXBvcy5nZXRNZXRhRGF0YUZhY3RvcnkoKTsKICAgICAgICAgICAg\naWYgKG1kZiBpbnN0YW5jZW9mIERlbGVnYXRpbmdNZXRhRGF0YUZhY3Rvcnkp\nCiAgICAgICAgICAgICAgICBtZGYgPSAoKERlbGVnYXRpbmdNZXRhRGF0YUZh\nY3RvcnkpIG1kZikuZ2V0SW5uZXJtb3N0RGVsZWdhdGUoKTsKICAgICAgICAg\nICAgaWYgKG1kZiBpbnN0YW5jZW9mIFBlcnNpc3RlbmNlTWV0YURhdGFGYWN0\nb3J5KQogICAgICAgICAgICAgICAgKChQZXJzaXN0ZW5jZU1ldGFEYXRhRmFj\ndG9yeSkgbWRmKS5zZXRYTUxQYXJzZXIodGhpcyk7CiAgICAgICAgICAgIF9y\nZXBvcyA9IHJlcG9zOwogICAgICAgIH0KICAgICAgICByZXR1cm4gX3JlcG9z\nOwogICAgfQoKICAgIC8qKgogICAgICogU2V0IHRoZSBtZXRhZGF0YSByZXBv\nc2l0b3J5IGZvciB0aGlzIHBhcnNlci4KICAgICAqLwogICAgcHVibGljIHZv\naWQgc2V0UmVwb3NpdG9yeShNZXRhRGF0YVJlcG9zaXRvcnkgcmVwb3MpIHsK\nICAgICAgICBfcmVwb3MgPSByZXBvczsKICAgICAgICBpZiAocmVwb3MgIT0g\nbnVsbAogICAgICAgICAgICAmJiAocmVwb3MuZ2V0VmFsaWRhdGUoKSAmIE1l\ndGFEYXRhUmVwb3NpdG9yeS5WQUxJREFURV9SVU5USU1FKSAhPSAwKQogICAg\nICAgICAgICBzZXRQYXJzZUNvbW1lbnRzKGZhbHNlKTsKICAgIH0KCiAgICAv\nKioKICAgICAqIFJldHVybiB0aGUgZW52aXJvbm1lbnRhbCBjbGFzcyBsb2Fk\nZXIgdG8gcGFzcyBvbiB0byBwYXJzZWQKICAgICAqIG1ldGFkYXRhIGluc3Rh\nbmNlcy4KICAgICAqLwogICAgcHVibGljIENsYXNzTG9hZGVyIGdldEVudkNs\nYXNzTG9hZGVyKCkgewogICAgICAgIHJldHVybiBfZW52TG9hZGVyOwogICAg\nfQoKICAgIC8qKgogICAgICogU2V0IHRoZSBlbnZpcm9ubWVudGFsIGNsYXNz\nIGxvYWRlciB0byBwYXNzIG9uIHRvIHBhcnNlZAogICAgICogbWV0YWRhdGEg\naW5zdGFuY2VzLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRFbnZDbGFz\nc0xvYWRlcihDbGFzc0xvYWRlciBsb2FkZXIpIHsKICAgICAgICBfZW52TG9h\nZGVyID0gbG9hZGVyOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciB0\nbyBhbGxvdyBsYXRlciBwYXJzZXMgb2YgbWFwcGluZyBpbmZvcm1hdGlvbiB0\nbyBvdmVycmlkZQogICAgICogZWFybGllciBpbmZvcm1hdGlvbiBmb3IgdGhl\nIHNhbWUgY2xhc3MuIERlZmF1bHRzIHRvIGZhbHNlLiBVc2VmdWwKICAgICAq\nIHdoZW4gYSB0b29sIGlzIG1hcHBpbmcgYSBjbGFzcywgc28gdGhhdCAuamRv\nIGZpbGUgcGFydGlhbCBtYXBwaW5nCiAgICAgKiBpbmZvcm1hdGlvbiBjYW4g\nYmUgdXNlZCBldmVuIHdoZW4gbWFwcGluZ3MgYXJlIHN0b3JlZCBpbiAub3Jt\nIGZpbGVzCiAgICAgKiBvciBvdGhlciBsb2NhdGlvbnMuCiAgICAgKi8KICAg\nIHB1YmxpYyBib29sZWFuIGdldE1hcHBpbmdPdmVycmlkZSgpIHsKICAgICAg\nICByZXR1cm4gX292ZXJyaWRlOwogICAgfQoKICAgIC8qKgogICAgICogV2hl\ndGhlciB0byBhbGxvdyBsYXRlciBwYXJzZXMgb2YgbWFwcGluZyBpbmZvcm1h\ndGlvbiB0byBvdmVycmlkZQogICAgICogZWFybGllciBpbmZvcm1hdGlvbiBm\nb3IgdGhlIHNhbWUgY2xhc3MuIERlZmF1bHRzIHRvIGZhbHNlLiBVc2VmdWwK\nICAgICAqIHdoZW4gYSB0b29sIGlzIG1hcHBpbmcgYSBjbGFzcywgc28gdGhh\ndCAuamRvIGZpbGUgcGFydGlhbCBtYXBwaW5nCiAgICAgKiBpbmZvcm1hdGlv\nbiBjYW4gYmUgdXNlZCBldmVuIHdoZW4gbWFwcGluZ3MgYXJlIHN0b3JlZCBp\nbiAub3JtIGZpbGVzCiAgICAgKiBvciBvdGhlciBsb2NhdGlvbnMuCiAgICAg\nKi8KICAgIHB1YmxpYyB2b2lkIHNldE1hcHBpbmdPdmVycmlkZShib29sZWFu\nIG92ZXJyaWRlKSB7CiAgICAgICAgX292ZXJyaWRlID0gb3ZlcnJpZGU7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBUaGUgcGFyc2UgbW9kZSBhY2NvcmRpbmcg\ndG8gdGhlIGV4cGVjdGVkIGRvY3VtZW50IHR5cGUuIFRoZQogICAgICogbW9k\nZSBjb25zdGFudHMgYWN0IGFzIGJpdCBmbGFncywgYW5kIHRoZXJlZm9yZSBj\nYW4gYmUgY29tYmluZWQuCiAgICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0TW9k\nZSgpIHsKICAgICAgICByZXR1cm4gX21vZGU7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBUaGUgcGFyc2UgbW9kZSBhY2NvcmRpbmcgdG8gdGhlIGV4cGVjdGVk\nIGRvY3VtZW50IHR5cGUuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldE1v\nZGUoaW50IG1vZGUsIGJvb2xlYW4gb24pIHsKICAgICAgICBpZiAobW9kZSA9\nPSBNT0RFX05PTkUpCiAgICAgICAgICAgIHNldE1vZGUoTU9ERV9OT05FKTsK\nICAgICAgICBlbHNlIGlmIChvbikKICAgICAgICAgICAgc2V0TW9kZShfbW9k\nZSB8IG1vZGUpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgc2V0TW9kZShf\nbW9kZSAmIH5tb2RlKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBwYXJz\nZSBtb2RlIGFjY29yZGluZyB0byB0aGUgZXhwZWN0ZWQgZG9jdW1lbnQgdHlw\nZS4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0TW9kZShpbnQgbW9kZSkg\newogICAgICAgIF9tb2RlID0gbW9kZTsKICAgICAgICBpZiAoX3BhcnNlciAh\nPSBudWxsKQogICAgICAgICAgICBfcGFyc2VyLnNldE1vZGUobW9kZSk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgcGFyc2UoVVJMIHVybCkgdGhyb3dzIElP\nRXhjZXB0aW9uIHsKICAgICAgICAvLyBwZWVrIGF0IHRoZSBkb2MgdG8gZGV0\nZXJtaW5lIHRoZSB2ZXJzaW9uCiAgICAgICAgWE1MVmVyc2lvblBhcnNlciB2\ncCA9IG5ldyBYTUxWZXJzaW9uUGFyc2VyKCJlbnRpdHktbWFwcGluZ3MiKTsK\nICAgICAgICB0cnkgewogICAgICAgICAgICB2cC5wYXJzZSh1cmwpOwogICAg\nICAgICAgICBfb3JtVmVyc2lvbiA9IHZwLmdldFZlcnNpb24oKTsKICAgICAg\nICAgICAgX3NjaGVtYUxvY2F0aW9uID0gdnAuZ2V0U2NoZW1hTG9jYXRpb24o\nKTsKICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUgdCkgewogICAgICAgICAg\nICAgICAgTG9nIGxvZyA9IGdldExvZygpOwogICAgICAgICAgICAgICAgaWYg\nKGxvZy5pc0luZm9FbmFibGVkKCkpCiAgICAgICAgICAgICAgICAgICAgbG9n\nLnRyYWNlKF9sb2MuZ2V0KCJ2ZXJzaW9uLWNoZWNrLWVycm9yIiwKICAgICAg\nICAgICAgICAgICAgICAgICAgdXJsLnRvU3RyaW5nKCkpKTsKICAgICAgICB9\nCiAgICAgICAgc3VwZXIucGFyc2UodXJsKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBwYXJzZShGaWxlIGZpbGUpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAg\nICAgICAgLy8gcGVlayBhdCB0aGUgZG9jIHRvIGRldGVybWluZSB0aGUgdmVy\nc2lvbgogICAgICAgIFhNTFZlcnNpb25QYXJzZXIgdnAgPSBuZXcgWE1MVmVy\nc2lvblBhcnNlcigiZW50aXR5LW1hcHBpbmdzIik7CiAgICAgICAgdHJ5IHsK\nICAgICAgICAgICAgdnAucGFyc2UoZmlsZSk7CiAgICAgICAgICAgIF9vcm1W\nZXJzaW9uID0gdnAuZ2V0VmVyc2lvbigpOwogICAgICAgICAgICBfc2NoZW1h\nTG9jYXRpb24gPSB2cC5nZXRTY2hlbWFMb2NhdGlvbigpOwogICAgICAgIH0g\nY2F0Y2ggKFRocm93YWJsZSB0KSB7CiAgICAgICAgICAgICAgICBMb2cgbG9n\nID0gZ2V0TG9nKCk7CiAgICAgICAgICAgICAgICBpZiAobG9nLmlzSW5mb0Vu\nYWJsZWQoKSkKICAgICAgICAgICAgICAgICAgICBsb2cudHJhY2UoX2xvYy5n\nZXQoInZlcnNpb24tY2hlY2stZXJyb3IiLAogICAgICAgICAgICAgICAgICAg\nICAgICBmaWxlLnRvU3RyaW5nKCkpKTsKICAgICAgICB9CiAgICAgICAgc3Vw\nZXIucGFyc2UoZmlsZSk7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlbmll\nbmNlIG1ldGhvZCBmb3IgaW50ZXJwcmV0aW5nIHtAbGluayAjZ2V0TW9kZX0u\nCiAgICAgKi8KICAgIHByb3RlY3RlZCBib29sZWFuIGlzTWV0YURhdGFNb2Rl\nKCkgewogICAgICAgIHJldHVybiAoX21vZGUgJiBNT0RFX01FVEEpICE9IDA7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBDb252ZW5pZW5jZSBtZXRob2QgZm9y\nIGludGVycHJldGluZyB7QGxpbmsgI2dldE1vZGV9LgogICAgICovCiAgICBw\ncm90ZWN0ZWQgYm9vbGVhbiBpc1F1ZXJ5TW9kZSgpIHsKICAgICAgICByZXR1\ncm4gKF9tb2RlICYgTU9ERV9RVUVSWSkgIT0gMDsKICAgIH0KCiAgICAvKioK\nICAgICAqIENvbnZlbmllbmNlIG1ldGhvZCBmb3IgaW50ZXJwcmV0aW5nIHtA\nbGluayAjZ2V0TW9kZX0uCiAgICAgKi8KICAgIHByb3RlY3RlZCBib29sZWFu\nIGlzTWFwcGluZ01vZGUoKSB7CiAgICAgICAgcmV0dXJuIChfbW9kZSAmIE1P\nREVfTUFQUElORykgIT0gMDsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVy\nbnMgdHJ1ZSBpZiB3ZSdyZSBpbiBtYXBwaW5nIG1vZGUgb3IgaW4gbWV0YWRh\ndGEgbW9kZSB3aXRoCiAgICAgKiBtYXBwaW5nIG92ZXJyaWRlIGVuYWJsZWQu\nCiAgICAgKi8KICAgIHByb3RlY3RlZCBib29sZWFuIGlzTWFwcGluZ092ZXJy\naWRlTW9kZSgpIHsKICAgICAgICByZXR1cm4gaXNNYXBwaW5nTW9kZSgpIHx8\nIChfb3ZlcnJpZGUgJiYgaXNNZXRhRGF0YU1vZGUoKSk7CiAgICB9CgogICAg\nLy8vLy8vLy8vLy8vLy8vCiAgICAvLyBYTUwgcGFyc2luZwogICAgLy8vLy8v\nLy8vLy8vLy8vCgogICAgLyoqCiAgICAgKiBQdXNoIGEgcGFyc2UgZWxlbWVu\ndCBvbnRvIHRoZSBzdGFjay4KICAgICAqLwogICAgcHJvdGVjdGVkIHZvaWQg\ncHVzaEVsZW1lbnQoT2JqZWN0IGVsZW0pIHsKICAgICAgICBfZWxlbWVudHMu\ncHVzaChlbGVtKTsKICAgIH0KCiAgICAvKioKICAgICAqIFBvcCBhIHBhcnNl\nIGVsZW1lbnQgZnJvbSB0aGUgc3RhY2suCiAgICAgKi8KICAgIHByb3RlY3Rl\nZCBPYmplY3QgcG9wRWxlbWVudCgpIHsKICAgICAgICByZXR1cm4gX2VsZW1l\nbnRzLnBvcCgpOwogICAgfQoKICAgIC8qKgogICAgICogUGVlayBhIHBhcnNl\nIGVsZW1lbnQgZnJvbSB0aGUgc3RhY2suCiAgICAgKi8KICAgIHByb3RlY3Rl\nZCBPYmplY3QgcGVla0VsZW1lbnQoKSB7CiAgICAgICAgcmV0dXJuIF9lbGVt\nZW50cy5wZWVrKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhl\nIGN1cnJlbnQgZWxlbWVudCBiZWluZyBwYXJzZWQuIE1heSBiZSBhIGNsYXNz\nIG1ldGFkYXRhLAogICAgICogZmllbGQgbWV0YWRhdGEsIHF1ZXJ5IG1ldGFk\nYXRhLCBldGMuCiAgICAgKi8KICAgIHByb3RlY3RlZCBPYmplY3QgY3VycmVu\ndEVsZW1lbnQoKSB7CiAgICAgICAgaWYgKF9lbGVtZW50cy5pc0VtcHR5KCkp\nCiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIHJldHVybiBfZWxl\nbWVudHMucGVlaygpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRo\nZSBjdXJyZW50IHtAbGluayBQZXJzaXN0ZW5jZVN0cmF0ZWd5fSBpZiBhbnku\nCiAgICAgKi8KICAgIHByb3RlY3RlZCBQZXJzaXN0ZW5jZVN0cmF0ZWd5IGN1\ncnJlbnRTdHJhdGVneSgpIHsKICAgICAgICByZXR1cm4gX3N0cmF0ZWd5Owog\nICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSB0YWcgb2YgdGhlIGN1\ncnJlbnQgcGFyZW50IGVsZW1lbnQuCiAgICAgKi8KICAgIHByb3RlY3RlZCBP\nYmplY3QgY3VycmVudFBhcmVudCgpIHsKICAgICAgICBpZiAoX3BhcmVudHMu\naXNFbXB0eSgpKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICBy\nZXR1cm4gX3BhcmVudHMucGVlaygpOwogICAgfQoKICAgIC8qKgogICAgICog\nUmV0dXJuIHdoZXRoZXIgd2UncmUgcnVubmluZyB0aGUgcGFyc2VyIGF0IHJ1\nbnRpbWUuCiAgICAgKi8KICAgIHByb3RlY3RlZCBib29sZWFuIGlzUnVudGlt\nZSgpIHsKICAgICAgICByZXR1cm4gKGdldFJlcG9zaXRvcnkoKS5nZXRWYWxp\nZGF0ZSgpCiAgICAgICAgICAgICYgTWV0YURhdGFSZXBvc2l0b3J5LlZBTElE\nQVRFX1JVTlRJTUUpICE9IDA7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBw\ncm90ZWN0ZWQgT2JqZWN0IGdldFNjaGVtYVNvdXJjZSgpIHsKICAgICAgICAv\nLyB1c2UgdGhlIGxhdGVzdCBzY2hlbWEgYnkgZGVmYXVsdC4gICd1bmtub3du\nJyBkb2NzIHNob3VsZCBwYXJzZQogICAgICAgIC8vIHdpdGggdGhlIGxhdGVz\ndCBzY2hlbWEuCiAgICAgICAgU3RyaW5nIG9ybXhzZCA9ICJvcm1fMl8wLXhz\nZC5yc3JjIjsKICAgICAgICAvLyBpZiB0aGUgdmVyc2lvbiBhbmQvb3Igc2No\nZW1hIGxvY2F0aW9uIGlzIGZvciAxLjAsIHVzZSB0aGUgMS4wCiAgICAgICAg\nLy8gc2NoZW1hCiAgICAgICAgaWYgKF9vcm1WZXJzaW9uICE9IG51bGwgJiYK\nICAgICAgICAgICAgX29ybVZlcnNpb24uZXF1YWxzKFhNTFZlcnNpb25QYXJz\nZXIuVkVSU0lPTl8xXzApIHx8CiAgICAgICAgICAgIChfc2NoZW1hTG9jYXRp\nb24gIT0gbnVsbCAmJgogICAgICAgICAgICBfc2NoZW1hTG9jYXRpb24uaW5k\nZXhPZihPUk1fWFNEXzFfMCkgIT0gLTEpKSB7CiAgICAgICAgICAgIG9ybXhz\nZCA9ICJvcm0teHNkLnJzcmMiOwogICAgICAgIH0KICAgICAgICByZXR1cm4g\nWE1MUGVyc2lzdGVuY2VNZXRhRGF0YVBhcnNlci5jbGFzcy5nZXRSZXNvdXJj\nZUFzU3RyZWFtKG9ybXhzZCk7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBw\ncm90ZWN0ZWQgU3RyaW5nIGdldFBhY2thZ2VBdHRyaWJ1dGVOYW1lKCkgewog\nICAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIEBPdmVycmlkZQogICAg\ncHJvdGVjdGVkIFN0cmluZyBnZXRDbGFzc0F0dHJpYnV0ZU5hbWUoKSB7CiAg\nICAgICAgcmV0dXJuICJjbGFzcyI7CiAgICB9CgogICAgQE92ZXJyaWRlCiAg\nICBwcm90ZWN0ZWQgaW50IGdldENsYXNzRWxlbWVudERlcHRoKCkgewogICAg\nICAgIHJldHVybiAxOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHJvdGVj\ndGVkIGJvb2xlYW4gaXNDbGFzc0VsZW1lbnROYW1lKFN0cmluZyBuYW1lKSB7\nCiAgICAgICAgcmV0dXJuICJlbnRpdHkiLmVxdWFscyhuYW1lKQogICAgICAg\nICAgICB8fCAiZW1iZWRkYWJsZSIuZXF1YWxzKG5hbWUpCiAgICAgICAgICAg\nIHx8ICJtYXBwZWQtc3VwZXJjbGFzcyIuZXF1YWxzKG5hbWUpOwogICAgfQoK\nICAgIEBPdmVycmlkZQogICAgcHJvdGVjdGVkIHZvaWQgcmVzZXQoKSB7CiAg\nICAJLy8gQWRkIGFsbCByZW1haW5pbmcgZGVmZXJyZWQgZW1iZWRkYWJsZSBt\nZXRhZGF0YQogICAgICAgIGFkZERlZmVycmVkRW1iZWRkYWJsZU1ldGFEYXRh\nKCk7CgogICAgICAgIHN1cGVyLnJlc2V0KCk7CiAgICAgICAgX2VsZW1lbnRz\nLmNsZWFyKCk7CiAgICAgICAgX3BhcmVudHMuY2xlYXIoKTsKICAgICAgICBf\nY2xzID0gbnVsbDsKICAgICAgICBfcGFyc2VMaXN0LmNsZWFyKCk7CiAgICAg\nICAgX2ZpZWxkUG9zID0gMDsKICAgICAgICBfY2xzUG9zID0gMDsKCiAgICAg\nICAgX2FjY2VzcyA9IEFjY2Vzc0NvZGUuVU5LTk9XTjsKICAgICAgICBfc3Ry\nYXRlZ3kgPSBudWxsOwogICAgICAgIF9saXN0ZW5lciA9IG51bGw7CiAgICAg\nICAgX2NhbGxiYWNrcyA9IG51bGw7CiAgICAgICAgX2hpZ2hzID0gbnVsbDsK\nICAgICAgICBfY2FzY2FkZXMgPSBudWxsOwogICAgICAgIF9wa2dDYXNjYWRl\ncyA9IG51bGw7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwcm90ZWN0ZWQg\nYm9vbGVhbiBzdGFydFN5c3RlbUVsZW1lbnQoU3RyaW5nIG5hbWUsIEF0dHJp\nYnV0ZXMgYXR0cnMpCiAgICAgICAgdGhyb3dzIFNBWEV4Y2VwdGlvbiB7CiAg\nICAgICAgT2JqZWN0IHRhZyA9IChPYmplY3QpIF9lbGVtcy5nZXQobmFtZSk7\nCiAgICAgICAgYm9vbGVhbiByZXQgPSBmYWxzZTsKICAgICAgICBpZiAodGFn\nID09IG51bGwpIHsKICAgICAgICAgICAgaWYgKGlzTWFwcGluZ092ZXJyaWRl\nTW9kZSgpKQogICAgICAgICAgICAgICAgdGFnID0gc3RhcnRTeXN0ZW1NYXBw\naW5nRWxlbWVudChuYW1lLCBhdHRycyk7CiAgICAgICAgICAgIHJldCA9IHRh\nZyAhPSBudWxsOwogICAgICAgIH0gZWxzZSBpZiAodGFnIGluc3RhbmNlb2Yg\nTWV0YURhdGFUYWcpIHsKICAgICAgICAgICAgc3dpdGNoICgoTWV0YURhdGFU\nYWcpIHRhZykgewogICAgICAgICAgICAgICAgY2FzZSBRVUVSWToKICAgICAg\nICAgICAgICAgICAgICByZXQgPSBzdGFydE5hbWVkUXVlcnkoYXR0cnMpOwog\nICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2Fz\nZSBRVUVSWV9ISU5UOgogICAgICAgICAgICAgICAgICAgIHJldCA9IHN0YXJ0\nUXVlcnlIaW50KGF0dHJzKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsK\nICAgICAgICAgICAgICAgIGNhc2UgTkFUSVZFX1FVRVJZOgogICAgICAgICAg\nICAgICAgICAgIHJldCA9IHN0YXJ0TmFtZWROYXRpdmVRdWVyeShhdHRycyk7\nCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBj\nYXNlIFFVRVJZX1NUUklORzoKICAgICAgICAgICAgICAgICAgICByZXQgPSBz\ndGFydFF1ZXJ5U3RyaW5nKGF0dHJzKTsKICAgICAgICAgICAgICAgICAgICBi\ncmVhazsKICAgICAgICAgICAgICAgIGNhc2UgU0VRX0dFTkVSQVRPUjoKICAg\nICAgICAgICAgICAgICAgICByZXQgPSBzdGFydFNlcXVlbmNlR2VuZXJhdG9y\nKGF0dHJzKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAg\nICAgICAgIGNhc2UgRkxVU0hfTU9ERToKICAgICAgICAgICAgICAgICAgICBy\nZXQgPSBzdGFydEZsdXNoTW9kZShhdHRycyk7CiAgICAgICAgICAgICAgICAg\nICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIEVOVElUWV9MSVNURU5F\nUlM6CiAgICAgICAgICAgICAgICAgICAgcmV0ID0gc3RhcnRFbnRpdHlMaXN0\nZW5lcnMoYXR0cnMpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAg\nICAgICAgICAgICAgY2FzZSBQUkVfUEVSU0lTVDoKICAgICAgICAgICAgICAg\nIGNhc2UgUE9TVF9QRVJTSVNUOgogICAgICAgICAgICAgICAgY2FzZSBQUkVf\nUkVNT1ZFOgogICAgICAgICAgICAgICAgY2FzZSBQT1NUX1JFTU9WRToKICAg\nICAgICAgICAgICAgIGNhc2UgUFJFX1VQREFURToKICAgICAgICAgICAgICAg\nIGNhc2UgUE9TVF9VUERBVEU6CiAgICAgICAgICAgICAgICBjYXNlIFBPU1Rf\nTE9BRDoKICAgICAgICAgICAgICAgICAgICByZXQgPSBzdGFydENhbGxiYWNr\nKChNZXRhRGF0YVRhZykgdGFnLCBhdHRycyk7CiAgICAgICAgICAgICAgICAg\nICAgYnJlYWs7CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAg\nICAgICAgICAgIHdhcm5VbnN1cHBvcnRlZFRhZyhuYW1lKTsKICAgICAgICAg\nICAgfQogICAgICAgIH0gZWxzZSBpZiAodGFnID09IEVMRU1fUFVfTUVUQSB8\nfCB0YWcgPT0gRUxFTV9QVV9ERUYpCiAgICAgICAgICAgIHJldCA9IGlzTWV0\nYURhdGFNb2RlKCk7CiAgICAgICAgZWxzZSBpZiAodGFnID09IEVMRU1fWE1M\nX01BUF9NRVRBX0NPTVBMRVRFKSB7CiAgICAgICAgICAgIHNldEFubm90YXRp\nb25QYXJzZXIobnVsbCk7CiAgICAgICAgICAgIF9pc1hNTE1hcHBpbmdNZXRh\nRGF0YUNvbXBsZXRlID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgZWxzZSBp\nZiAodGFnID09IEVMRU1fQUNDRVNTKQogICAgICAgICAgICByZXQgPSBfbW9k\nZSAhPSBNT0RFX1FVRVJZOwogICAgICAgIGVsc2UgaWYgKHRhZyA9PSBFTEVN\nX0xJU1RFTkVSKQogICAgICAgICAgICByZXQgPSBzdGFydEVudGl0eUxpc3Rl\nbmVyKGF0dHJzKTsKICAgICAgICBlbHNlIGlmICh0YWcgPT0gRUxFTV9ERUxJ\nTV9JRFMpCiAgICAgICAgICAgIHJldCA9IHN0YXJ0RGVsaW1pdGVkSWRlbnRp\nZmllcnMoKTsKICAgICAgICBlbHNlIGlmICh0YWcgPT0gRUxFTV9DQVNDQURF\nKQogICAgICAgICAgICByZXQgPSBpc01ldGFEYXRhTW9kZSgpOwogICAgICAg\nIGVsc2UgaWYgKHRhZyA9PSBFTEVNX0NBU0NBREVfQUxMIHx8IHRhZyA9PSBF\nTEVNX0NBU0NBREVfUEVSCiAgICAgICAgICAgIHx8IHRhZyA9PSBFTEVNX0NB\nU0NBREVfTUVSIHx8IHRhZyA9PSBFTEVNX0NBU0NBREVfUkVNCiAgICAgICAg\nICAgIHx8IHRhZyA9PSBFTEVNX0NBU0NBREVfUkVGIHx8IHRhZyA9PSBFTEVN\nX0NBU0NBREVfREVUKQogICAgICAgICAgICByZXQgPSBzdGFydENhc2NhZGUo\ndGFnLCBhdHRycyk7CgogICAgICAgIGlmIChyZXQpCiAgICAgICAgICAgIF9w\nYXJlbnRzLnB1c2godGFnKTsKICAgICAgICByZXR1cm4gcmV0OwogICAgfQoK\nICAgIEBPdmVycmlkZQogICAgcHJvdGVjdGVkIHZvaWQgZW5kU3lzdGVtRWxl\nbWVudChTdHJpbmcgbmFtZSkKICAgICAgICB0aHJvd3MgU0FYRXhjZXB0aW9u\nIHsKICAgICAgICBPYmplY3QgdGFnID0gX2VsZW1zLmdldChuYW1lKTsKICAg\nICAgICBpZiAodGFnID09IG51bGwgJiYgaXNNYXBwaW5nT3ZlcnJpZGVNb2Rl\nKCkpCiAgICAgICAgICAgIGVuZFN5c3RlbU1hcHBpbmdFbGVtZW50KG5hbWUp\nOwogICAgICAgIGVsc2UgaWYgKHRhZyBpbnN0YW5jZW9mIE1ldGFEYXRhVGFn\nKSB7CiAgICAgICAgICAgIHN3aXRjaCAoKE1ldGFEYXRhVGFnKSB0YWcpIHsK\nICAgICAgICAgICAgICAgIGNhc2UgUVVFUlk6CiAgICAgICAgICAgICAgICAg\nICAgZW5kTmFtZWRRdWVyeSgpOwogICAgICAgICAgICAgICAgICAgIGJyZWFr\nOwogICAgICAgICAgICAgICAgY2FzZSBRVUVSWV9ISU5UOgogICAgICAgICAg\nICAgICAgICAgIGVuZFF1ZXJ5SGludCgpOwogICAgICAgICAgICAgICAgICAg\nIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSBOQVRJVkVfUVVFUlk6CiAg\nICAgICAgICAgICAgICAgICAgZW5kTmFtZWROYXRpdmVRdWVyeSgpOwogICAg\nICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSBR\nVUVSWV9TVFJJTkc6CiAgICAgICAgICAgICAgICAgICAgZW5kUXVlcnlTdHJp\nbmcoKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAg\nICAgIGNhc2UgU0VRX0dFTkVSQVRPUjoKICAgICAgICAgICAgICAgICAgICBl\nbmRTZXF1ZW5jZUdlbmVyYXRvcigpOwogICAgICAgICAgICAgICAgICAgIGJy\nZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICh0YWcgPT0g\nRUxFTV9BQ0NFU1MpCiAgICAgICAgICAgIGVuZEFjY2VzcygpOwogICAgICAg\nIGVsc2UgaWYgKHRhZyA9PSBFTEVNX0xJU1RFTkVSKQogICAgICAgICAgICBl\nbmRFbnRpdHlMaXN0ZW5lcigpOwoKICAgICAgICBfcGFyZW50cy5wb3AoKTsK\nICAgIH0KCiAgICAvKioKICAgICAqIEltcGxlbWVudCB0byBwYXJzZSBhIG1h\ncHBpbmcgZWxlbWVudCBvdXRzaWRlIG9mIGFueSBjbGFzcy4KICAgICAqCiAg\nICAgKiBAcmV0dXJuIHRoZSB0YWcgZm9yIHRoZSBnaXZlbiBlbGVtZW50LCBv\nciBudWxsIHRvIHNraXAgdGhlIGVsZW1lbnQKICAgICAqLwogICAgcHJvdGVj\ndGVkIE9iamVjdCBzdGFydFN5c3RlbU1hcHBpbmdFbGVtZW50KFN0cmluZyBu\nYW1lLCBBdHRyaWJ1dGVzIGF0dHJzKQogICAgICAgIHRocm93cyBTQVhFeGNl\ncHRpb24gewogICAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIC8qKgog\nICAgICogSW1wbGVtZW50IHRvIHBhcnNlIGEgbWFwcGluZyBlbGVtZW50IG91\ndHNpZGUgb2YgYW55IGNsYXNzLgogICAgICovCiAgICBwcm90ZWN0ZWQgdm9p\nZCBlbmRTeXN0ZW1NYXBwaW5nRWxlbWVudChTdHJpbmcgbmFtZSkKICAgICAg\nICB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgIH0KCiAgICBAT3ZlcnJpZGUK\nICAgIHByb3RlY3RlZCBib29sZWFuIHN0YXJ0Q2xhc3NFbGVtZW50KFN0cmlu\nZyBuYW1lLCBBdHRyaWJ1dGVzIGF0dHJzKQogICAgICAgIHRocm93cyBTQVhF\neGNlcHRpb24gewogICAgICAgIE9iamVjdCB0YWcgPSAoT2JqZWN0KSBfZWxl\nbXMuZ2V0KG5hbWUpOwogICAgICAgIGJvb2xlYW4gcmV0ID0gZmFsc2U7CiAg\nICAgICAgaWYgKHRhZyA9PSBudWxsKSB7CiAgICAgICAgICAgIGlmIChpc01h\ncHBpbmdPdmVycmlkZU1vZGUoKSkKICAgICAgICAgICAgICAgIHRhZyA9IHN0\nYXJ0Q2xhc3NNYXBwaW5nRWxlbWVudChuYW1lLCBhdHRycyk7CiAgICAgICAg\nICAgIHJldCA9IHRhZyAhPSBudWxsOwogICAgICAgIH0gZWxzZSBpZiAodGFn\nIGluc3RhbmNlb2YgTWV0YURhdGFUYWcpIHsKICAgICAgICAgICAgc3dpdGNo\nICgoTWV0YURhdGFUYWcpIHRhZykgewogICAgICAgICAgICAgICAgY2FzZSBH\nRU5FUkFURURfVkFMVUU6CiAgICAgICAgICAgICAgICAgICAgcmV0ID0gc3Rh\ncnRHZW5lcmF0ZWRWYWx1ZShhdHRycyk7CiAgICAgICAgICAgICAgICAgICAg\nYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIElEOgogICAgICAgICAgICAg\nICAgICAgIHJldCA9IHN0YXJ0SWQoYXR0cnMpOwogICAgICAgICAgICAgICAg\nICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSBFTUJFRERFRF9JRDoK\nICAgICAgICAgICAgICAgICAgICByZXQgPSBzdGFydEVtYmVkZGVkSWQoYXR0\ncnMpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAg\nICAgY2FzZSBJRF9DTEFTUzoKICAgICAgICAgICAgICAgICAgICByZXQgPSBz\ndGFydElkQ2xhc3MoYXR0cnMpOwogICAgICAgICAgICAgICAgICAgIGJyZWFr\nOwogICAgICAgICAgICAgICAgY2FzZSBMT0I6CiAgICAgICAgICAgICAgICAg\nICAgcmV0ID0gc3RhcnRMb2IoYXR0cnMpOwogICAgICAgICAgICAgICAgICAg\nIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSBRVUVSWToKICAgICAgICAg\nICAgICAgICAgICByZXQgPSBzdGFydE5hbWVkUXVlcnkoYXR0cnMpOwogICAg\nICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSBR\nVUVSWV9ISU5UOgogICAgICAgICAgICAgICAgICAgIHJldCA9IHN0YXJ0UXVl\ncnlIaW50KGF0dHJzKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAg\nICAgICAgICAgICAgIGNhc2UgTkFUSVZFX1FVRVJZOgogICAgICAgICAgICAg\nICAgICAgIHJldCA9IHN0YXJ0TmFtZWROYXRpdmVRdWVyeShhdHRycyk7CiAg\nICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNl\nIFFVRVJZX1NUUklORzoKICAgICAgICAgICAgICAgICAgICByZXQgPSBzdGFy\ndFF1ZXJ5U3RyaW5nKGF0dHJzKTsKICAgICAgICAgICAgICAgICAgICBicmVh\nazsKICAgICAgICAgICAgICAgIGNhc2UgU0VRX0dFTkVSQVRPUjoKICAgICAg\nICAgICAgICAgICAgICByZXQgPSBzdGFydFNlcXVlbmNlR2VuZXJhdG9yKGF0\ndHJzKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAg\nICAgIGNhc2UgVkVSU0lPTjoKICAgICAgICAgICAgICAgICAgICByZXQgPSBz\ndGFydFZlcnNpb24oYXR0cnMpOwogICAgICAgICAgICAgICAgICAgIGJyZWFr\nOwogICAgICAgICAgICAgICAgY2FzZSBNQVBfS0VZOgogICAgICAgICAgICAg\nICAgICAgIHJldCA9IHN0YXJ0TWFwS2V5KGF0dHJzKTsKICAgICAgICAgICAg\nICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgTUFQX0tFWV9D\nTEFTUzoKICAgICAgICAgICAgICAgICAgICByZXQgPSBzdGFydE1hcEtleUNs\nYXNzKGF0dHJzKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAg\nICAgICAgICAgIGNhc2UgRkxVU0hfTU9ERToKICAgICAgICAgICAgICAgICAg\nICByZXQgPSBzdGFydEZsdXNoTW9kZShhdHRycyk7CiAgICAgICAgICAgICAg\nICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIE9SREVSX0NPTFVN\nTjoKICAgICAgICAgICAgICAgICAgICByZXQgPSBzdGFydE9yZGVyQ29sdW1u\nKGF0dHJzKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAg\nICAgICAgIGNhc2UgT1JERVJfQlk6CiAgICAgICAgICAgICAgICBjYXNlIEVO\nVElUWV9MSVNURU5FUlM6CiAgICAgICAgICAgICAgICAgICAgcmV0ID0gaXNN\nZXRhRGF0YU1vZGUoKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAg\nICAgICAgICAgICAgIGNhc2UgRVhDTFVERV9ERUZBVUxUX0xJU1RFTkVSUzoK\nICAgICAgICAgICAgICAgICAgICByZXQgPSBzdGFydEV4Y2x1ZGVEZWZhdWx0\nTGlzdGVuZXJzKGF0dHJzKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsK\nICAgICAgICAgICAgICAgIGNhc2UgRVhDTFVERV9TVVBFUkNMQVNTX0xJU1RF\nTkVSUzoKICAgICAgICAgICAgICAgICAgICByZXQgPSBzdGFydEV4Y2x1ZGVT\ndXBlcmNsYXNzTGlzdGVuZXJzKGF0dHJzKTsKICAgICAgICAgICAgICAgICAg\nICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgUFJFX1BFUlNJU1Q6CiAg\nICAgICAgICAgICAgICBjYXNlIFBPU1RfUEVSU0lTVDoKICAgICAgICAgICAg\nICAgIGNhc2UgUFJFX1JFTU9WRToKICAgICAgICAgICAgICAgIGNhc2UgUE9T\nVF9SRU1PVkU6CiAgICAgICAgICAgICAgICBjYXNlIFBSRV9VUERBVEU6CiAg\nICAgICAgICAgICAgICBjYXNlIFBPU1RfVVBEQVRFOgogICAgICAgICAgICAg\nICAgY2FzZSBQT1NUX0xPQUQ6CiAgICAgICAgICAgICAgICAgICAgcmV0ID0g\nc3RhcnRDYWxsYmFjaygoTWV0YURhdGFUYWcpIHRhZywgYXR0cnMpOwogICAg\nICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgZGVmYXVs\ndDoKICAgICAgICAgICAgICAgICAgICB3YXJuVW5zdXBwb3J0ZWRUYWcobmFt\nZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHRhZyBpbnN0\nYW5jZW9mIFBlcnNpc3RlbmNlU3RyYXRlZ3kpIHsKICAgICAgICAgICAgUGVy\nc2lzdGVuY2VTdHJhdGVneSBwcyA9IChQZXJzaXN0ZW5jZVN0cmF0ZWd5KSB0\nYWc7CiAgICAgICAgICAgIHJldCA9IHN0YXJ0U3RyYXRlZ3kocHMsIGF0dHJz\nKTsKICAgICAgICAgICAgaWYgKHJldCkKICAgICAgICAgICAgICAgIF9zdHJh\ndGVneSA9IHBzOwogICAgICAgIH0gZWxzZSBpZiAodGFnID09IEVMRU1fTElT\nVEVORVIpCiAgICAgICAgICAgIHJldCA9IHN0YXJ0RW50aXR5TGlzdGVuZXIo\nYXR0cnMpOwogICAgICAgIGVsc2UgaWYgKHRhZyA9PSBFTEVNX0FUVFJTKQog\nICAgICAgICAgICByZXQgPSBfbW9kZSAhPSBNT0RFX1FVRVJZOwogICAgICAg\nIGVsc2UgaWYgKHRhZyA9PSBFTEVNX0NBU0NBREUpCiAgICAgICAgICAgIHJl\ndCA9IGlzTWV0YURhdGFNb2RlKCk7CiAgICAgICAgZWxzZSBpZiAodGFnID09\nIEVMRU1fQ0FTQ0FERV9BTEwgfHwgdGFnID09IEVMRU1fQ0FTQ0FERV9QRVIK\nICAgICAgICAgICAgfHwgdGFnID09IEVMRU1fQ0FTQ0FERV9NRVIgfHwgdGFn\nID09IEVMRU1fQ0FTQ0FERV9SRU0KICAgICAgICAgICAgfHwgdGFnID09IEVM\nRU1fQ0FTQ0FERV9SRUYgfHwgdGFnID09IEVMRU1fQ0FTQ0FERV9ERVQpCiAg\nICAgICAgICAgIHJldCA9IHN0YXJ0Q2FzY2FkZSh0YWcsIGF0dHJzKTsKCiAg\nICAgICAgaWYgKHJldCkKICAgICAgICAgICAgX3BhcmVudHMucHVzaCh0YWcp\nOwogICAgICAgIHJldHVybiByZXQ7CiAgICB9CgogICAgQE92ZXJyaWRlCiAg\nICBwcm90ZWN0ZWQgdm9pZCBlbmRDbGFzc0VsZW1lbnQoU3RyaW5nIG5hbWUp\nCiAgICAgICAgdGhyb3dzIFNBWEV4Y2VwdGlvbiB7CiAgICAgICAgT2JqZWN0\nIHRhZyA9IF9lbGVtcy5nZXQobmFtZSk7CiAgICAgICAgaWYgKHRhZyA9PSBu\ndWxsICYmIGlzTWFwcGluZ092ZXJyaWRlTW9kZSgpKQogICAgICAgICAgICBl\nbmRDbGFzc01hcHBpbmdFbGVtZW50KG5hbWUpOwogICAgICAgIGVsc2UgaWYg\nKHRhZyBpbnN0YW5jZW9mIE1ldGFEYXRhVGFnKSB7CiAgICAgICAgICAgIHN3\naXRjaCAoKE1ldGFEYXRhVGFnKSB0YWcpIHsKICAgICAgICAgICAgICAgIGNh\nc2UgR0VORVJBVEVEX1ZBTFVFOgogICAgICAgICAgICAgICAgICAgIGVuZEdl\nbmVyYXRlZFZhbHVlKCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAg\nICAgICAgICAgICAgICBjYXNlIElEOgogICAgICAgICAgICAgICAgICAgIGVu\nZElkKCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAg\nICAgICBjYXNlIEVNQkVEREVEX0lEOgogICAgICAgICAgICAgICAgICAgIGVu\nZEVtYmVkZGVkSWQoKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAg\nICAgICAgICAgICAgIGNhc2UgSURfQ0xBU1M6CiAgICAgICAgICAgICAgICAg\nICAgZW5kSWRDbGFzcygpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwog\nICAgICAgICAgICAgICAgY2FzZSBMT0I6CiAgICAgICAgICAgICAgICAgICAg\nZW5kTG9iKCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAg\nICAgICAgICBjYXNlIFFVRVJZOgogICAgICAgICAgICAgICAgICAgIGVuZE5h\nbWVkUXVlcnkoKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAg\nICAgICAgICAgIGNhc2UgUVVFUllfSElOVDoKICAgICAgICAgICAgICAgICAg\nICBlbmRRdWVyeUhpbnQoKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsK\nICAgICAgICAgICAgICAgIGNhc2UgTkFUSVZFX1FVRVJZOgogICAgICAgICAg\nICAgICAgICAgIGVuZE5hbWVkTmF0aXZlUXVlcnkoKTsKICAgICAgICAgICAg\nICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgUVVFUllfU1RS\nSU5HOgogICAgICAgICAgICAgICAgICAgIGVuZFF1ZXJ5U3RyaW5nKCk7CiAg\nICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNl\nIFNFUV9HRU5FUkFUT1I6CiAgICAgICAgICAgICAgICAgICAgZW5kU2VxdWVu\nY2VHZW5lcmF0b3IoKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAg\nICAgICAgICAgICAgIGNhc2UgVkVSU0lPTjoKICAgICAgICAgICAgICAgICAg\nICBlbmRWZXJzaW9uKCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAg\nICAgICAgICAgICAgICBjYXNlIE9SREVSX0JZOgogICAgICAgICAgICAgICAg\nICAgIGVuZE9yZGVyQnkoKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsK\nICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAodGFnIGluc3RhbmNl\nb2YgUGVyc2lzdGVuY2VTdHJhdGVneSkKICAgICAgICAgICAgZW5kU3RyYXRl\nZ3koKFBlcnNpc3RlbmNlU3RyYXRlZ3kpIHRhZyk7CiAgICAgICAgZWxzZSBp\nZiAodGFnID09IEVMRU1fQUNDRVNTKQogICAgICAgICAgICBlbmRBY2Nlc3Mo\nKTsKICAgICAgICBlbHNlIGlmICh0YWcgPT0gRUxFTV9MSVNURU5FUikKICAg\nICAgICAgICAgZW5kRW50aXR5TGlzdGVuZXIoKTsKCiAgICAgICAgX3BhcmVu\ndHMucG9wKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBMb2cgd2FybmluZyBh\nYm91dCBhbiB1bnN1cHBvcnRlZCB0YWcuCiAgICAgKi8KICAgIHByaXZhdGUg\ndm9pZCB3YXJuVW5zdXBwb3J0ZWRUYWcoU3RyaW5nIG5hbWUpIHsKICAgICAg\nICBMb2cgbG9nID0gZ2V0TG9nKCk7CiAgICAgICAgaWYgKGxvZy5pc0luZm9F\nbmFibGVkKCkpCiAgICAgICAgICAgIGxvZy50cmFjZShfbG9jLmdldCgidW5z\ndXBwb3J0ZWQtdGFnIiwgbmFtZSkpOwogICAgfQoKICAgIC8qKgogICAgICog\nSW1wbGVtZW50IHRvIHBhcnNlIGEgbWFwcGluZyBlbGVtZW50IHdpdGhpbiBh\nIGNsYXNzLgogICAgICoKICAgICAqIEByZXR1cm4gdGhlIHRhZyBmb3IgdGhl\nIGdpdmVuIGVsZW1lbnQsIG9yIG51bGwgdG8gc2tpcCBlbGVtZW50CiAgICAg\nKi8KICAgIHByb3RlY3RlZCBPYmplY3Qgc3RhcnRDbGFzc01hcHBpbmdFbGVt\nZW50KFN0cmluZyBuYW1lLCBBdHRyaWJ1dGVzIGF0dHJzKQogICAgICAgIHRo\ncm93cyBTQVhFeGNlcHRpb24gewogICAgICAgIHJldHVybiBudWxsOwogICAg\nfQoKICAgIC8qKgogICAgICogSW1wbGVtZW50IHRvIHBhcnNlIGEgbWFwcGlu\nZyBlbGVtZW50IHdpdGhpbiBhIGNsYXNzLgogICAgICovCiAgICBwcm90ZWN0\nZWQgdm9pZCBlbmRDbGFzc01hcHBpbmdFbGVtZW50KFN0cmluZyBuYW1lKQog\nICAgICAgIHRocm93cyBTQVhFeGNlcHRpb24gewogICAgfQoKICAgIGJvb2xl\nYW4gaXNNZXRhRGF0YUNvbXBsZXRlKEF0dHJpYnV0ZXMgYXR0cnMpIHsKICAg\nIAlyZXR1cm4gYXR0cnMgIT0gbnVsbAogICAgCSAgICAmJiAidHJ1ZSIuZXF1\nYWxzKGF0dHJzLmdldFZhbHVlKCJtZXRhZGF0YS1jb21wbGV0ZSIpKTsKICAg\nIH0KCiAgICB2b2lkIHJlc2V0QW5ub3RhdGlvblBhcnNlcigpIHsKICAgIAlz\nZXRBbm5vdGF0aW9uUGFyc2VyKCgoUGVyc2lzdGVuY2VNZXRhRGF0YUZhY3Rv\ncnkpZ2V0UmVwb3NpdG9yeSgpCiAgICAJCQkuZ2V0TWV0YURhdGFGYWN0b3J5\nKCkpLmdldEFubm90YXRpb25QYXJzZXIoKSk7CiAgICB9CgogICAgQE92ZXJy\naWRlCiAgICBwcm90ZWN0ZWQgYm9vbGVhbiBzdGFydENsYXNzKFN0cmluZyBl\nbGVtLCBBdHRyaWJ1dGVzIGF0dHJzKQogICAgICAgIHRocm93cyBTQVhFeGNl\ncHRpb24gewogICAgICAgIGJvb2xlYW4gbWV0YURhdGFDb21wbGV0ZSA9IGZh\nbHNlOwogICAgICAgIHN1cGVyLnN0YXJ0Q2xhc3MoZWxlbSwgYXR0cnMpOwog\nICAgICAgIGlmIChpc01ldGFEYXRhQ29tcGxldGUoYXR0cnMpKSB7CiAgICAg\nICAgICAgIG1ldGFEYXRhQ29tcGxldGUgPSB0cnVlOwogICAgICAgIAlzZXRB\nbm5vdGF0aW9uUGFyc2VyKG51bGwpOwogICAgICAgIH0gZWxzZSBpZiAoIV9p\nc1hNTE1hcHBpbmdNZXRhRGF0YUNvbXBsZXRlKXsKICAgICAgICAJcmVzZXRB\nbm5vdGF0aW9uUGFyc2VyKCk7CiAgICAgICAgfQoKICAgICAgICAvLyBxdWVy\neSBtb2RlIG9ubHk/CiAgICAgICAgX2NscyA9IGNsYXNzRm9yTmFtZShjdXJy\nZW50Q2xhc3NOYW1lKCkpOwoKICAgICAgICAvLyBQcmV2ZW50IGEgcmVlbnRy\nYW50IHBhcnNlIGZvciB0aGUgc2FtZSBjbGFzcwogICAgICAgIGlmIChwYXJz\nZUxpc3RDb250YWlucyhfY2xzKSkgewogICAgICAgICAgICByZXR1cm4gZmFs\nc2U7CiAgICAgICAgfQoKICAgICAgICBpZiAoX21vZGUgPT0gTU9ERV9RVUVS\nWSkgewogICAgICAgICAgICBpZiAoX3BhcnNlciAhPSBudWxsKQogICAgICAg\nICAgICAgICAgX3BhcnNlci5wYXJzZShfY2xzKTsKICAgICAgICAgICAgcmV0\ndXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICBMb2cgbG9nID0gZ2V0TG9n\nKCk7CiAgICAgICAgaWYgKGxvZy5pc1RyYWNlRW5hYmxlZCgpKQogICAgICAg\nICAgICBsb2cudHJhY2UoX2xvYy5nZXQoInBhcnNlLWNsYXNzIiwgX2Nscy5n\nZXROYW1lKCkpKTsKCiAgICAgICAgTWV0YURhdGFSZXBvc2l0b3J5IHJlcG9z\nID0gZ2V0UmVwb3NpdG9yeSgpOwogICAgICAgIENsYXNzTWV0YURhdGEgbWV0\nYSA9IHJlcG9zLmdldENhY2hlZE1ldGFEYXRhKF9jbHMpOwogICAgICAgIGlm\nIChtZXRhICE9IG51bGwKICAgICAgICAgICAgJiYgKChpc01ldGFEYXRhTW9k\nZSgpICYmIChtZXRhLmdldFNvdXJjZU1vZGUoKSAmIE1PREVfTUVUQSkgIT0g\nMCkKICAgICAgICAgICAgfHwgKGlzTWFwcGluZ01vZGUoKSAmJiAobWV0YS5n\nZXRTb3VyY2VNb2RlKCkgJiBNT0RFX01BUFBJTkcpICE9IDApKSkKICAgICAg\nICB7CiAgICAgICAgICAgIGlmIChsb2cuaXNXYXJuRW5hYmxlZCgpKQogICAg\nICAgICAgICAgICAgbG9nLndhcm4oX2xvYy5nZXQoImR1cC1tZXRhZGF0YSIs\nIF9jbHMsIGdldFNvdXJjZU5hbWUoKSkpOwogICAgICAgICAgICBfY2xzID0g\nbnVsbDsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAg\nICAgICAgaW50IGFjY2VzcyA9IEFjY2Vzc0NvZGUuVU5LTk9XTjsKICAgICAg\nICBpZiAobWV0YSA9PSBudWxsKSB7CiAgICAgICAgICAgIGludCBhY2Nlc3ND\nb2RlID0gdG9BY2Nlc3NUeXBlKGF0dHJzLmdldFZhbHVlKCJhY2Nlc3MiKSk7\nCiAgICAgICAgICAgIC8vIGlmIGFjY2VzcyBub3Qgc3BlY2lmaWVkIGFuZCBh\nY2Nlc3Mgd2FzIHNwZWNpZmllZCBhdAogICAgICAgICAgICAvLyB0aGUgc3lz\ndGVtIGxldmVsLCB1c2UgdGhlIHN5c3RlbSBkZWZhdWx0ICh3aGljaCBtYXkK\nICAgICAgICAgICAgLy8gYmUgVU5LTk9XTikKICAgICAgICAgICAgaWYgKGFj\nY2Vzc0NvZGUgPT0gQWNjZXNzQ29kZS5VTktOT1dOKQogICAgICAgICAgICAg\nICAgYWNjZXNzQ29kZSA9IF9hY2Nlc3M7CiAgICAgICAgICAgIG1ldGEgPSBy\nZXBvcy5hZGRNZXRhRGF0YShfY2xzLCBhY2Nlc3NDb2RlLCBtZXRhRGF0YUNv\nbXBsZXRlKTsKICAgICAgICAgICAgRmllbGRNZXRhRGF0YVtdIGZtZHMgPSBt\nZXRhLmdldEZpZWxkcygpOwogICAgICAgICAgICBpZiAobWV0YURhdGFDb21w\nbGV0ZSkgewogICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBm\nbWRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgZm1kc1tp\nXS5zZXRFeHBsaWNpdCh0cnVlKTsKICAgICAgICAgICAgICAgIH0KICAgICAg\nICAgICAgfQogICAgICAgICAgICBtZXRhLnNldEVudkNsYXNzTG9hZGVyKF9l\nbnZMb2FkZXIpOwogICAgICAgICAgICBtZXRhLnNldFNvdXJjZU1vZGUoTU9E\nRV9OT05FKTsKCiAgICAgICAgICAgIC8vIHBhcnNlIGFubm90YXRpb25zIGZp\ncnN0IHNvIFhNTCBvdmVycmlkZXMgdGhlbQogICAgICAgICAgICBpZiAoX3Bh\ncnNlciAhPSBudWxsKQogICAgICAgICAgICAgICAgX3BhcnNlci5wYXJzZShf\nY2xzKTsKICAgICAgICB9CiAgICAgICAgYWNjZXNzID0gbWV0YS5nZXRBY2Nl\nc3NUeXBlKCk7CgogICAgICAgIGJvb2xlYW4gbWFwcGVkU3VwZXIgPSAibWFw\ncGVkLXN1cGVyY2xhc3MiLmVxdWFscyhlbGVtKTsKICAgICAgICBib29sZWFu\nIGVtYmVkZGFibGUgPSAiZW1iZWRkYWJsZSIuZXF1YWxzKGVsZW0pOwogICAg\nICAgIGlmIChpc01ldGFEYXRhTW9kZSgpKSB7CiAgICAgICAgICAgIG1ldGEu\nc2V0U291cmNlKGdldFNvdXJjZUZpbGUoKSwgU291cmNlVHJhY2tlci5TUkNf\nWE1MKTsKICAgICAgICAgICAgbWV0YS5zZXRTb3VyY2VNb2RlKE1PREVfTUVU\nQSwgdHJ1ZSk7CiAgICAgICAgICAgIExvY2F0b3IgbG9jYXRvciA9IGdldExv\nY2F0aW9uKCkuZ2V0TG9jYXRvcigpOwogICAgICAgICAgICBpZiAobG9jYXRv\nciAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBtZXRhLnNldExpbmVOdW1i\nZXIobG9jYXRvci5nZXRMaW5lTnVtYmVyKCkpOwogICAgICAgICAgICAgICAg\nbWV0YS5zZXRDb2xOdW1iZXIobG9jYXRvci5nZXRDb2x1bW5OdW1iZXIoKSk7\nCiAgICAgICAgICAgIH0KICAgICAgICAgICAgbWV0YS5zZXRMaXN0aW5nSW5k\nZXgoX2Nsc1Bvcyk7CiAgICAgICAgICAgIFN0cmluZyBuYW1lID0gYXR0cnMu\nZ2V0VmFsdWUoIm5hbWUiKTsKICAgICAgICAgICAgaWYgKCFTdHJpbmdVdGls\ncy5pc0VtcHR5KG5hbWUpKQogICAgICAgICAgICAgICAgbWV0YS5zZXRUeXBl\nQWxpYXMobmFtZSk7CiAgICAgICAgICAgIG1ldGEuc2V0QWJzdHJhY3QobWFw\ncGVkU3VwZXIpOwogICAgICAgICAgICBtZXRhLnNldEVtYmVkZGVkT25seSht\nYXBwZWRTdXBlciB8fCBlbWJlZGRhYmxlKTsKCiAgICAgICAgICAgIGlmIChl\nbWJlZGRhYmxlKSB7CiAgICAgICAgICAgICAgICBtZXRhLnNldEVtYmVkZGFi\nbGUoKTsKICAgICAgICAgICAgICAgIHNldERlZmVycmVkRW1iZWRkYWJsZUFj\nY2Vzc1R5cGUoX2NscywgYWNjZXNzKTsKICAgICAgICAgICAgfQogICAgICAg\nIH0KCiAgICAgICAgaWYgKGF0dHJzLmdldFZhbHVlKCJjYWNoZWFibGUiKSAh\nPSBudWxsKSB7CiAgICAgICAgICAgIG1ldGEuc2V0Q2FjaGVFbmFibGVkKEJv\nb2xlYW4udmFsdWVPZihhdHRycy5nZXRWYWx1ZSgiY2FjaGVhYmxlIikpKTsK\nICAgICAgICB9CgogICAgICAgIGlmIChpc01hcHBpbmdNb2RlKCkpCiAgICAg\nICAgICAgIG1ldGEuc2V0U291cmNlTW9kZShNT0RFX01BUFBJTkcsIHRydWUp\nOwogICAgICAgIGlmIChpc01hcHBpbmdPdmVycmlkZU1vZGUoKSkKICAgICAg\nICAgICAgc3RhcnRDbGFzc01hcHBpbmcobWV0YSwgbWFwcGVkU3VwZXIsIGF0\ndHJzKTsKICAgICAgICBpZiAoaXNRdWVyeU1vZGUoKSkKICAgICAgICAgICAg\nbWV0YS5zZXRTb3VyY2VNb2RlKE1PREVfUVVFUlksIHRydWUpOwoKICAgICAg\nICBfY2xzUG9zKys7CiAgICAgICAgX2ZpZWxkUG9zID0gMDsKICAgICAgICBh\nZGRDb21tZW50cyhtZXRhKTsKICAgICAgICBwdXNoRWxlbWVudChtZXRhKTsK\nICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAg\nIHByb3RlY3RlZCB2b2lkIGVuZENsYXNzKFN0cmluZyBlbGVtKQogICAgICAg\nIHRocm93cyBTQVhFeGNlcHRpb24gewogICAgICAgIGlmIChfbW9kZSAhPSBN\nT0RFX1FVRVJZKSB7CiAgICAgICAgICAgIENsYXNzTWV0YURhdGEgbWV0YSA9\nIChDbGFzc01ldGFEYXRhKSBwb3BFbGVtZW50KCk7CiAgICAgICAgICAgIHN0\nb3JlQ2FsbGJhY2tzKG1ldGEpOwogICAgICAgICAgICBpZiAoaXNNYXBwaW5n\nT3ZlcnJpZGVNb2RlKCkpCiAgICAgICAgICAgICAgICBlbmRDbGFzc01hcHBp\nbmcobWV0YSk7CiAgICAgICAgfQogICAgICAgIF9jbHMgPSBudWxsOwogICAg\nICAgIHN1cGVyLmVuZENsYXNzKGVsZW0pOwogICAgfQoKICAgIC8qKgogICAg\nICogSW1wbGVtZW50IHRvIGFkZCBtYXBwaW5nIGF0dHJpYnV0ZXMgdG8gY2xh\nc3MuCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIHN0YXJ0Q2xhc3NNYXBw\naW5nKENsYXNzTWV0YURhdGEgbWFwcGluZywKICAgICAgICBib29sZWFuIG1h\ncHBlZFN1cGVyLCBBdHRyaWJ1dGVzIGF0dHJzKQogICAgICAgIHRocm93cyBT\nQVhFeGNlcHRpb24gewogICAgfQoKICAgIC8qKgogICAgICogSW1wbGVtZW50\nIHRvIGZpbmFsaXplIGNsYXNzIG1hcHBpbmcuCiAgICAgKi8KICAgIHByb3Rl\nY3RlZCB2b2lkIGVuZENsYXNzTWFwcGluZyhDbGFzc01ldGFEYXRhIG1hcHBp\nbmcpCiAgICAgICAgdGhyb3dzIFNBWEV4Y2VwdGlvbiB7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBEZWZhdWx0IGFjY2VzcyBlbGVtZW50LgogICAgICovCiAg\nICBwcml2YXRlIHZvaWQgZW5kQWNjZXNzKCkgewogICAgICAgIF9hY2Nlc3Mg\nPSB0b0FjY2Vzc1R5cGUoY3VycmVudFRleHQoKSk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBQYXJzZSB0aGUgZ2l2ZW4gc3RyaW5nIGFzIGFuIGVudGl0eSBh\nY2Nlc3MgdHlwZSwgZGVmYXVsdGluZyB0byBnaXZlbgogICAgICogZGVmYXVs\ndCBpZiBzdHJpbmcgaXMgZW1wdHkuCiAgICAgKi8KICAgIHByaXZhdGUgaW50\nIHRvQWNjZXNzVHlwZShTdHJpbmcgc3RyKSB7CiAgICAgICAgaWYgKFN0cmlu\nZ1V0aWxzLmlzRW1wdHkoc3RyKSkKICAgICAgICAgICAgcmV0dXJuIEFjY2Vz\nc0NvZGUuVU5LTk9XTjsKICAgICAgICBpZiAoIlBST1BFUlRZIi5lcXVhbHMo\nc3RyKSkKICAgICAgICAgICAgcmV0dXJuIEFjY2Vzc0NvZGUuRVhQTElDSVQg\nfCBBY2Nlc3NDb2RlLlBST1BFUlRZOwogICAgICAgIHJldHVybiBBY2Nlc3ND\nb2RlLkVYUExJQ0lUIHwgQWNjZXNzQ29kZS5GSUVMRDsKICAgIH0KICAgIC8q\nKgogICAgICogUGFyc2UgZmx1c2gtbW9kZSBlbGVtZW50LgogICAgICovCiAg\nICBwcml2YXRlIGJvb2xlYW4gc3RhcnRGbHVzaE1vZGUoQXR0cmlidXRlcyBh\ndHRycykKICAgICAgICB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgICAgICBM\nb2cgbG9nID0gZ2V0TG9nKCk7CiAgICAgICAgaWYgKGxvZy5pc1dhcm5FbmFi\nbGVkKCkpCiAgICAgICAgICAgIGxvZy53YXJuKF9sb2MuZ2V0KCJ1bnN1cHBv\ncnRlZCIsICJmbHVzaC1tb2RlIiwgZ2V0U291cmNlTmFtZSgpKSk7CiAgICAg\nICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8qKgogICAgICogUGFyc2Ug\nc2VxdWVuY2UtZ2VuZXJhdG9yLgogICAgICovCiAgICBwcm90ZWN0ZWQgYm9v\nbGVhbiBzdGFydFNlcXVlbmNlR2VuZXJhdG9yKEF0dHJpYnV0ZXMgYXR0cnMp\nIHsKICAgICAgICBpZiAoIWlzTWFwcGluZ092ZXJyaWRlTW9kZSgpKQogICAg\nICAgICAgICByZXR1cm4gZmFsc2U7CgogICAgICAgIFN0cmluZyBuYW1lID0g\nYXR0cnMuZ2V0VmFsdWUoIm5hbWUiKTsKICAgICAgICBMb2cgbG9nID0gZ2V0\nTG9nKCk7CiAgICAgICAgaWYgKGxvZy5pc1RyYWNlRW5hYmxlZCgpKQogICAg\nICAgICAgICBsb2cudHJhY2UoX2xvYy5nZXQoInBhcnNlLXNlcXVlbmNlIiwg\nbmFtZSkpOwoKICAgICAgICBTZXF1ZW5jZU1ldGFEYXRhIG1ldGEgPSBnZXRS\nZXBvc2l0b3J5KCkuZ2V0Q2FjaGVkU2VxdWVuY2VNZXRhRGF0YShuYW1lKTsK\nICAgICAgICBpZiAobWV0YSAhPSBudWxsICYmIGxvZy5pc1dhcm5FbmFibGVk\nKCkpCiAgICAgICAgICAgIGxvZy53YXJuKF9sb2MuZ2V0KCJvdmVycmlkZS1z\nZXF1ZW5jZSIsIG5hbWUpKTsKCiAgICAgICAgbWV0YSA9IGdldFJlcG9zaXRv\ncnkoKS5hZGRTZXF1ZW5jZU1ldGFEYXRhKG5hbWUpOwogICAgICAgIFN0cmlu\nZyBzZXEgPSBhdHRycy5nZXRWYWx1ZSgic2VxdWVuY2UtbmFtZSIpOwogICAg\nICAgIC8vIERvIG5vdCBub3JtYWxpemUgdGhlIHNlcXVlbmNlIG5hbWUgaWYg\naXQgYXBwZWFycyB0byBiZSBhIHBsdWdpbiAKICAgICAgICBpZiAoc2VxLmlu\nZGV4T2YoJygnKSA9PSAtMSl7CiAgICAgICAgICAgIHNlcSA9IG5vcm1hbGl6\nZVNlcXVlbmNlTmFtZShzZXEpOwogICAgICAgIH0KICAgICAgICBTdHJpbmcg\ndmFsID0gYXR0cnMuZ2V0VmFsdWUoImluaXRpYWwtdmFsdWUiKTsKICAgICAg\nICBpbnQgaW5pdGlhbCA9IHZhbCA9PSBudWxsID8gMSA6IEludGVnZXIucGFy\nc2VJbnQodmFsKTsKICAgICAgICB2YWwgPSBhdHRycy5nZXRWYWx1ZSgiYWxs\nb2NhdGlvbi1zaXplIik7CiAgICAgICAgaW50IGFsbG9jYXRlID0gdmFsID09\nIG51bGwgPyA1MCA6IEludGVnZXIucGFyc2VJbnQodmFsKTsKICAgICAgICBT\ndHJpbmcgc2NoZW1hID0gbm9ybWFsaXplU2NoZW1hTmFtZShhdHRycy5nZXRW\nYWx1ZSgic2NoZW1hIikpOwogICAgICAgIFN0cmluZyBjYXRhbG9nID0gbm9y\nbWFsaXplQ2F0YWxvZ05hbWUoYXR0cnMuZ2V0VmFsdWUoImNhdGFsb2ciKSk7\nCgogICAgICAgIFN0cmluZyBjbHNOYW1lLCBwcm9wczsKICAgICAgICBpZiAo\nc2VxID09IG51bGwgfHwgc2VxLmluZGV4T2YoJygnKSA9PSAtMSkgewogICAg\nICAgICAgICBjbHNOYW1lID0gU2VxdWVuY2VNZXRhRGF0YS5JTVBMX05BVElW\nRTsKICAgICAgICAgICAgcHJvcHMgPSBudWxsOwogICAgICAgIH0gZWxzZSB7\nIC8vIHBsdWdpbgogICAgICAgICAgICBjbHNOYW1lID0gQ29uZmlndXJhdGlv\nbnMuZ2V0Q2xhc3NOYW1lKHNlcSk7CiAgICAgICAgICAgIHByb3BzID0gQ29u\nZmlndXJhdGlvbnMuZ2V0UHJvcGVydGllcyhzZXEpOwogICAgICAgICAgICBz\nZXEgPSBudWxsOwogICAgICAgIH0KCiAgICAgICAgbWV0YS5zZXRTZXF1ZW5j\nZVBsdWdpbihDb25maWd1cmF0aW9ucy5nZXRQbHVnaW4oY2xzTmFtZSwgcHJv\ncHMpKTsKICAgICAgICBtZXRhLnNldFNlcXVlbmNlKHNlcSk7CiAgICAgICAg\nbWV0YS5zZXRJbml0aWFsVmFsdWUoaW5pdGlhbCk7CiAgICAgICAgbWV0YS5z\nZXRBbGxvY2F0ZShhbGxvY2F0ZSk7CiAgICAgICAgbWV0YS5zZXRTY2hlbWEo\nc2NoZW1hKTsKICAgICAgICBtZXRhLnNldENhdGFsb2coY2F0YWxvZyk7Cgog\nICAgICAgIE9iamVjdCBjdXIgPSBjdXJyZW50RWxlbWVudCgpOwogICAgICAg\nIE9iamVjdCBzY29wZSA9IChjdXIgaW5zdGFuY2VvZiBDbGFzc01ldGFEYXRh\nKQogICAgICAgICAgICA/ICgoQ2xhc3NNZXRhRGF0YSkgY3VyKS5nZXREZXNj\ncmliZWRUeXBlKCkgOiBudWxsOwogICAgICAgIG1ldGEuc2V0U291cmNlKGdl\ndFNvdXJjZUZpbGUoKSwgc2NvcGUsIFNvdXJjZVRyYWNrZXIuU1JDX1hNTCk7\nCiAgICAgICAgTG9jYXRvciBsb2NhdG9yID0gZ2V0TG9jYXRpb24oKS5nZXRM\nb2NhdG9yKCk7CiAgICAgICAgaWYgKGxvY2F0b3IgIT0gbnVsbCkgewogICAg\nICAgICAgICBtZXRhLnNldExpbmVOdW1iZXIobG9jYXRvci5nZXRMaW5lTnVt\nYmVyKCkpOwogICAgICAgICAgICBtZXRhLnNldENvbE51bWJlcihsb2NhdG9y\nLmdldENvbHVtbk51bWJlcigpKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJu\nIHRydWU7CiAgICB9CgogICAgcHJvdGVjdGVkIHZvaWQgZW5kU2VxdWVuY2VH\nZW5lcmF0b3IoKSB7CiAgICB9CgogICAgLyoqCiAgICAgKiBQYXJzZSBpZC4K\nICAgICAqLwogICAgcHJvdGVjdGVkIGJvb2xlYW4gc3RhcnRJZChBdHRyaWJ1\ndGVzIGF0dHJzKQogICAgICAgIHRocm93cyBTQVhFeGNlcHRpb24gewogICAg\nICAgIEZpZWxkTWV0YURhdGEgZm1kID0gcGFyc2VGaWVsZChhdHRycyk7CiAg\nICAgICAgZm1kLnNldEV4cGxpY2l0KHRydWUpOwogICAgICAgIGZtZC5zZXRQ\ncmltYXJ5S2V5KHRydWUpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoK\nICAgIHByb3RlY3RlZCB2b2lkIGVuZElkKCkKICAgICAgICB0aHJvd3MgU0FY\nRXhjZXB0aW9uIHsKICAgICAgICBmaW5pc2hGaWVsZCgpOwogICAgfQoKICAg\nIC8qKgogICAgICogUGFyc2UgZW1iZWRkZWQtaWQuCiAgICAgKi8KICAgIHBy\nb3RlY3RlZCBib29sZWFuIHN0YXJ0RW1iZWRkZWRJZChBdHRyaWJ1dGVzIGF0\ndHJzKQogICAgICAgIHRocm93cyBTQVhFeGNlcHRpb24gewogICAgICAgIEZp\nZWxkTWV0YURhdGEgZm1kID0gcGFyc2VGaWVsZChhdHRycyk7CiAgICAgICAg\nZm1kLnNldEV4cGxpY2l0KHRydWUpOwogICAgICAgIGZtZC5zZXRQcmltYXJ5\nS2V5KHRydWUpOwogICAgICAgIGZtZC5zZXRFbWJlZGRlZCh0cnVlKTsKICAg\nICAgICBmbWQuc2V0U2VyaWFsaXplZChmYWxzZSk7CiAgICAgICAgaWYgKGZt\nZC5nZXRFbWJlZGRlZE1ldGFEYXRhKCkgPT0gbnVsbCkKLy8gICAgICAgICAg\nICBmbWQuYWRkRW1iZWRkZWRNZXRhRGF0YSgpOwogICAgICAgICAgICBkZWZl\nckVtYmVkZGFibGUoZm1kLmdldERlY2xhcmVkVHlwZSgpLCBmbWQpOwogICAg\nICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIHByb3RlY3RlZCB2b2lkIGVu\nZEVtYmVkZGVkSWQoKQogICAgICAgIHRocm93cyBTQVhFeGNlcHRpb24gewog\nICAgICAgIGZpbmlzaEZpZWxkKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBQ\nYXJzZSBpZC1jbGFzcy4KICAgICAqLwogICAgcHJvdGVjdGVkIGJvb2xlYW4g\nc3RhcnRJZENsYXNzKEF0dHJpYnV0ZXMgYXR0cnMpCiAgICAgICAgdGhyb3dz\nIFNBWEV4Y2VwdGlvbiB7CiAgICAgICAgaWYgKCFpc01ldGFEYXRhTW9kZSgp\nKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CgogICAgICAgIENsYXNzTWV0\nYURhdGEgbWV0YSA9IChDbGFzc01ldGFEYXRhKSBjdXJyZW50RWxlbWVudCgp\nOwogICAgICAgIFN0cmluZyBjbHMgPSBhdHRycy5nZXRWYWx1ZSgiY2xhc3Mi\nKTsKICAgICAgICBDbGFzczw/PiBpZENscyA9IG51bGw7CiAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgaWRDbHMgPSBjbGFzc0Zvck5hbWUoY2xzKTsKICAg\nICAgICB9IGNhdGNoIChUaHJvd2FibGUgdCkgewogICAgICAgICAgICB0aHJv\ndyBnZXRFeGNlcHRpb24oX2xvYy5nZXQoImludmFsaWQtaWQtY2xhc3MiLCBt\nZXRhLCBjbHMpLCB0KTsKICAgICAgICB9CiAgICAgICAgbWV0YS5zZXRPYmpl\nY3RJZFR5cGUoaWRDbHMsIHRydWUpOwogICAgICAgIHJldHVybiB0cnVlOwog\nICAgfQoKICAgIHByb3RlY3RlZCB2b2lkIGVuZElkQ2xhc3MoKQogICAgICAg\nIHRocm93cyBTQVhFeGNlcHRpb24gewogICAgfQoKICAgIC8qKgogICAgICog\nUGFyc2UgbG9iLgogICAgICovCiAgICBwcm90ZWN0ZWQgYm9vbGVhbiBzdGFy\ndExvYihBdHRyaWJ1dGVzIGF0dHJzKQogICAgICAgIHRocm93cyBTQVhFeGNl\ncHRpb24gewogICAgICAgIEZpZWxkTWV0YURhdGEgZm1kID0gKEZpZWxkTWV0\nYURhdGEpIGN1cnJlbnRFbGVtZW50KCk7CiAgICAgICAgaW50IHR5cGVDb2Rl\nID0gZm1kLmlzRWxlbWVudENvbGxlY3Rpb24oKSA/IGZtZC5nZXRFbGVtZW50\nKCkuZ2V0RGVjbGFyZWRUeXBlQ29kZSgpIDogZm1kLmdldERlY2xhcmVkVHlw\nZUNvZGUoKTsKICAgICAgICBDbGFzczw/PiB0eXBlID0gZm1kLmlzRWxlbWVu\ndENvbGxlY3Rpb24oKSA/IGZtZC5nZXRFbGVtZW50KCkuZ2V0RGVjbGFyZWRU\neXBlKCkgOiBmbWQuZ2V0RGVjbGFyZWRUeXBlKCk7CiAgICAgICAgaWYgKHR5\ncGVDb2RlICE9IEphdmFUeXBlcy5TVFJJTkcKICAgICAgICAgICAgJiYgdHlw\nZSAhPSBjaGFyW10uY2xhc3MKICAgICAgICAgICAgJiYgdHlwZSAhPSBDaGFy\nYWN0ZXJbXS5jbGFzcwogICAgICAgICAgICAmJiB0eXBlICE9IGJ5dGVbXS5j\nbGFzcwogICAgICAgICAgICAmJiB0eXBlICE9IEJ5dGVbXS5jbGFzcykKICAg\nICAgICAgICAgZm1kLnNldFNlcmlhbGl6ZWQodHJ1ZSk7CiAgICAgICAgcmV0\ndXJuIHRydWU7CiAgICB9CgogICAgcHJvdGVjdGVkIHZvaWQgZW5kTG9iKCkK\nICAgICAgICB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgIH0KCiAgICAvKioK\nICAgICAqIFBhcnNlIGdlbmVyYXRlZC12YWx1ZS4KICAgICAqLwogICAgcHJv\ndGVjdGVkIGJvb2xlYW4gc3RhcnRHZW5lcmF0ZWRWYWx1ZShBdHRyaWJ1dGVz\nIGF0dHJzKQogICAgICAgIHRocm93cyBTQVhFeGNlcHRpb24gewogICAgICAg\nIGlmICghaXNNYXBwaW5nT3ZlcnJpZGVNb2RlKCkpCiAgICAgICAgICAgIHJl\ndHVybiBmYWxzZTsKCiAgICAgICAgU3RyaW5nIHN0cmF0ZWd5ID0gYXR0cnMu\nZ2V0VmFsdWUoInN0cmF0ZWd5Iik7CiAgICAgICAgU3RyaW5nIGdlbmVyYXRv\nciA9IGF0dHJzLmdldFZhbHVlKCJnZW5lcmF0b3IiKTsKICAgICAgICBHZW5l\ncmF0aW9uVHlwZSB0eXBlID0gU3RyaW5nVXRpbHMuaXNFbXB0eShzdHJhdGVn\neSkKICAgICAgICAgICAgPyBHZW5lcmF0aW9uVHlwZS5BVVRPIDogR2VuZXJh\ndGlvblR5cGUudmFsdWVPZihzdHJhdGVneSk7CgogICAgICAgIEZpZWxkTWV0\nYURhdGEgZm1kID0gKEZpZWxkTWV0YURhdGEpIGN1cnJlbnRFbGVtZW50KCk7\nCiAgICAgICAgQW5ub3RhdGlvblBlcnNpc3RlbmNlTWV0YURhdGFQYXJzZXIu\ncGFyc2VHZW5lcmF0ZWRWYWx1ZShmbWQsIHR5cGUsCiAgICAgICAgICAgIGdl\nbmVyYXRvcik7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgcHJv\ndGVjdGVkIHZvaWQgZW5kR2VuZXJhdGVkVmFsdWUoKQogICAgICAgIHRocm93\ncyBTQVhFeGNlcHRpb24gewogICAgfQoKICAgIC8qKgogICAgICogTGF6aWx5\nIHBhcnNlIGNhc2NhZGVzLgogICAgICovCiAgICBwcm90ZWN0ZWQgYm9vbGVh\nbiBzdGFydENhc2NhZGUoT2JqZWN0IHRhZywgQXR0cmlidXRlcyBhdHRycykK\nICAgICAgICB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgICAgICBpZiAoIWlz\nTWV0YURhdGFNb2RlKCkpCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCiAg\nICAgICAgU2V0PENhc2NhZGVUeXBlPiBjYXNjYWRlcyA9IG51bGw7CiAgICAg\nICAgaWYgKGN1cnJlbnRFbGVtZW50KCkgaW5zdGFuY2VvZiBGaWVsZE1ldGFE\nYXRhKSB7CiAgICAgICAgICAgIGlmIChfY2FzY2FkZXMgPT0gbnVsbCkKICAg\nICAgICAgICAgICAgIF9jYXNjYWRlcyA9IEVudW1TZXQubm9uZU9mKENhc2Nh\nZGVUeXBlLmNsYXNzKTsKICAgICAgICAgICAgY2FzY2FkZXMgPSBfY2FzY2Fk\nZXM7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYgKF9wa2dDYXNj\nYWRlcyA9PSBudWxsKQogICAgICAgICAgICAgICAgX3BrZ0Nhc2NhZGVzID0g\nRW51bVNldC5ub25lT2YoQ2FzY2FkZVR5cGUuY2xhc3MpOwogICAgICAgICAg\nICBjYXNjYWRlcyA9IF9wa2dDYXNjYWRlczsKICAgICAgICB9CiAgICAgICAg\nYm9vbGVhbiBhbGwgPSBFTEVNX0NBU0NBREVfQUxMID09IHRhZzsKICAgICAg\nICBpZiAoYWxsIHx8IEVMRU1fQ0FTQ0FERV9QRVIgPT0gdGFnKQogICAgICAg\nICAgICBjYXNjYWRlcy5hZGQoUEVSU0lTVCk7CiAgICAgICAgaWYgKGFsbCB8\nfCBFTEVNX0NBU0NBREVfUkVNID09IHRhZykKICAgICAgICAgICAgY2FzY2Fk\nZXMuYWRkKFJFTU9WRSk7CiAgICAgICAgaWYgKGFsbCB8fCBFTEVNX0NBU0NB\nREVfTUVSID09IHRhZykKICAgICAgICAgICAgY2FzY2FkZXMuYWRkKE1FUkdF\nKTsKICAgICAgICBpZiAoYWxsIHx8IEVMRU1fQ0FTQ0FERV9SRUYgPT0gdGFn\nKQogICAgICAgICAgICBjYXNjYWRlcy5hZGQoUkVGUkVTSCk7CiAgICAgICAg\naWYgKGFsbCB8fCBFTEVNX0NBU0NBREVfREVUID09IHRhZykKICAgICAgICAg\nICAgY2FzY2FkZXMuYWRkKERFVEFDSCk7CiAgICAgICAgcmV0dXJuIHRydWU7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQgdGhlIGNhY2hlZCBjYXNjYWRl\ncyBpbnRvIHRoZSBmaWVsZC4KICAgICAqLwogICAgcHJvdGVjdGVkIHZvaWQg\nc2V0Q2FzY2FkZXMoRmllbGRNZXRhRGF0YSBmbWQpIHsKICAgICAgICBTZXQ8\nQ2FzY2FkZVR5cGU+IGNhc2NhZGVzID0gX2Nhc2NhZGVzOwogICAgICAgIGlm\nIChfY2FzY2FkZXMgPT0gbnVsbCkKICAgICAgICAgICAgY2FzY2FkZXMgPSBf\ncGtnQ2FzY2FkZXM7CiAgICAgICAgaWYgKGNhc2NhZGVzID09IG51bGwpCiAg\nICAgICAgICAgIHJldHVybjsKCiAgICAgICAgVmFsdWVNZXRhRGF0YSB2bWQg\nPSBmbWQ7CiAgICAgICAgc3dpdGNoIChfc3RyYXRlZ3kpIHsKICAgICAgICAg\nICAgY2FzZSBPTkVfTUFOWToKICAgICAgICAgICAgY2FzZSBNQU5ZX01BTlk6\nCiAgICAgICAgICAgICAgICB2bWQgPSBmbWQuZ2V0RWxlbWVudCgpOwogICAg\nICAgIH0KICAgICAgICBmb3IgKENhc2NhZGVUeXBlIGNhc2NhZGUgOiBjYXNj\nYWRlcykgewogICAgICAgICAgICBzd2l0Y2ggKGNhc2NhZGUpIHsKICAgICAg\nICAgICAgICAgIGNhc2UgUEVSU0lTVDoKICAgICAgICAgICAgICAgICAgICB2\nbWQuc2V0Q2FzY2FkZVBlcnNpc3QoVmFsdWVNZXRhRGF0YS5DQVNDQURFX0lN\nTUVESUFURSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAg\nICAgICAgICBjYXNlIE1FUkdFOgogICAgICAgICAgICAgICAgICAgIHZtZC5z\nZXRDYXNjYWRlQXR0YWNoKFZhbHVlTWV0YURhdGEuQ0FTQ0FERV9JTU1FRElB\nVEUpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAg\nICAgY2FzZSBERVRBQ0g6CiAgICAgICAgICAgICAgICAgICAgdm1kLnNldENh\nc2NhZGVEZXRhY2goVmFsdWVNZXRhRGF0YS5DQVNDQURFX0lNTUVESUFURSk7\nCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBj\nYXNlIFJFTU9WRToKICAgICAgICAgICAgICAgICAgICB2bWQuc2V0Q2FzY2Fk\nZURlbGV0ZShWYWx1ZU1ldGFEYXRhLkNBU0NBREVfSU1NRURJQVRFKTsKICAg\nICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2Ug\nUkVGUkVTSDoKICAgICAgICAgICAgICAgICAgICB2bWQuc2V0Q2FzY2FkZVJl\nZnJlc2goVmFsdWVNZXRhRGF0YS5DQVNDQURFX0lNTUVESUFURSk7CiAgICAg\nICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9\nCiAgICAgICAgX2Nhc2NhZGVzID0gbnVsbDsKICAgIH0KCiAgICAvKioKICAg\nICAqIFBhcnNlIGNvbW1vbiBmaWVsZCBhdHRyaWJ1dGVzLgogICAgICovCiAg\nICBwcml2YXRlIEZpZWxkTWV0YURhdGEgcGFyc2VGaWVsZChBdHRyaWJ1dGVz\nIGF0dHJzKQogICAgICAgIHRocm93cyBTQVhFeGNlcHRpb24gewogICAgICAg\nIENsYXNzTWV0YURhdGEgbWV0YSA9IChDbGFzc01ldGFEYXRhKSBjdXJyZW50\nRWxlbWVudCgpOwogICAgICAgIFN0cmluZyBuYW1lID0gYXR0cnMuZ2V0VmFs\ndWUoIm5hbWUiKTsKICAgICAgICBGaWVsZE1ldGFEYXRhIGZpZWxkID0gbWV0\nYS5nZXREZWNsYXJlZEZpZWxkKG5hbWUpOwogICAgICAgIGludCBmbGRBY2Nl\nc3MgPSBnZXRGaWVsZEFjY2VzcyhmaWVsZCwgYXR0cnMpOwogICAgICAgIC8v\nIElmIHRoZSBhY2Nlc3MgZGVmaW5lZCBpbiBYTUwgaXMgbm90IHRoZSBzYW1l\nIGFzIHdoYXQgd2FzIGRlZmluZWQKICAgICAgICAvLyBieSBkZWZhdWx0IG9y\nIGFubm90YXRpb24sIGZpbmQgdGhlIGFwcHJvcHJpYXRlIGJhY2tpbmcgbWVt\nYmVyIGFuZAogICAgICAgIC8vIHJlcGxhY2Ugd2hhdCBpcyBjdXJyZW50bHkg\nZGVmaW5lZCBpbiBtZXRhZGF0YS4KICAgICAgICBpZiAoKGZpZWxkID09IG51\nbGwgfHwgZmllbGQuZ2V0RGVjbGFyZWRUeXBlKCkgPT0gT2JqZWN0LmNsYXNz\nIHx8CiAgICAgICAgICAgICBmaWVsZC5nZXRBY2Nlc3NUeXBlKCkgIT0gZmxk\nQWNjZXNzKQogICAgICAgICAgICAmJiBtZXRhLmdldERlc2NyaWJlZFR5cGUo\nKSAhPSBPYmplY3QuY2xhc3MpIHsKICAgICAgICAgICAgTWVtYmVyIG1lbWJl\nciA9IF9yZXBvcy5nZXRNZXRhRGF0YUZhY3RvcnkoKS5nZXREZWZhdWx0cygp\nCiAgICAgCSAgICAgICAgLmdldE1lbWJlckJ5UHJvcGVydHkobWV0YSwgbmFt\nZSwgZmxkQWNjZXNzLCBmYWxzZSk7CiAgICAgICAgICAgIENsYXNzPD8+IHR5\ncGUgPSBGaWVsZC5jbGFzcy5pc0luc3RhbmNlKG1lbWJlcikgPwogICAgICAg\nICAgICAgICAgKChGaWVsZCltZW1iZXIpLmdldFR5cGUoKSA6ICgoTWV0aG9k\nKW1lbWJlcikuZ2V0UmV0dXJuVHlwZSgpOwoKICAgICAgICAgICAgaWYgKGZp\nZWxkID09IG51bGwpIHsKICAgICAgICAgICAgICAgIGZpZWxkID0gbWV0YS5h\nZGREZWNsYXJlZEZpZWxkKG5hbWUsIHR5cGUpOwogICAgICAgICAgICAgICAg\nUGVyc2lzdGVuY2VNZXRhRGF0YURlZmF1bHRzLnNldENhc2NhZGVOb25lKGZp\nZWxkKTsKICAgICAgICAgICAgICAgIFBlcnNpc3RlbmNlTWV0YURhdGFEZWZh\ndWx0cy5zZXRDYXNjYWRlTm9uZShmaWVsZC5nZXRLZXkoKSk7CiAgICAgICAg\nICAgICAgICBQZXJzaXN0ZW5jZU1ldGFEYXRhRGVmYXVsdHMuc2V0Q2FzY2Fk\nZU5vbmUoZmllbGQuZ2V0RWxlbWVudCgpKTsKICAgICAgICAgICAgfQogICAg\nICAgICAgICBmaWVsZC5iYWNraW5nTWVtYmVyKG1lbWJlcik7CiAgICAgICAg\nfSBlbHNlIGlmIChmaWVsZCA9PSBudWxsKSB7CiAgICAgICAgICAgIGZpZWxk\nID0gbWV0YS5hZGREZWNsYXJlZEZpZWxkKG5hbWUsIE9iamVjdC5jbGFzcyk7\nCiAgICAgICAgICAgIFBlcnNpc3RlbmNlTWV0YURhdGFEZWZhdWx0cy5zZXRD\nYXNjYWRlTm9uZShmaWVsZCk7CiAgICAgICAgICAgIFBlcnNpc3RlbmNlTWV0\nYURhdGFEZWZhdWx0cy5zZXRDYXNjYWRlTm9uZShmaWVsZC5nZXRLZXkoKSk7\nCiAgICAgICAgICAgIFBlcnNpc3RlbmNlTWV0YURhdGFEZWZhdWx0cy5zZXRD\nYXNjYWRlTm9uZShmaWVsZC5nZXRFbGVtZW50KCkpOwogICAgICAgIH0KCiAg\nICAgICAgaWYgKGlzTWV0YURhdGFNb2RlKCkpCiAgICAgICAgICAgIGZpZWxk\nLnNldExpc3RpbmdJbmRleChfZmllbGRQb3MpOwoKICAgICAgICBfZmllbGRQ\nb3MrKzsKICAgICAgICBwdXNoRWxlbWVudChmaWVsZCk7CiAgICAgICAgYWRk\nQ29tbWVudHMoZmllbGQpOwoKICAgICAgICBpZiAoaXNNYXBwaW5nT3ZlcnJp\nZGVNb2RlKCkpCiAgICAgICAgICAgIHN0YXJ0RmllbGRNYXBwaW5nKGZpZWxk\nLCBhdHRycyk7CiAgICAgICAgcmV0dXJuIGZpZWxkOwogICAgfQoKICAgIC8q\nKgogICAgICogUG9wcyBmaWVsZCBlbGVtZW50LgogICAgICovCiAgICBwcml2\nYXRlIHZvaWQgZmluaXNoRmllbGQoKQogICAgICAgIHRocm93cyBTQVhFeGNl\ncHRpb24gewogICAgICAgIEZpZWxkTWV0YURhdGEgZmllbGQgPSAoRmllbGRN\nZXRhRGF0YSkgcG9wRWxlbWVudCgpOwogICAgICAgIHNldENhc2NhZGVzKGZp\nZWxkKTsKICAgICAgICBpZiAoaXNNYXBwaW5nT3ZlcnJpZGVNb2RlKCkpCiAg\nICAgICAgICAgIGVuZEZpZWxkTWFwcGluZyhmaWVsZCk7CiAgICAgICAgX3N0\ncmF0ZWd5ID0gbnVsbDsKICAgIH0KCiAgICAvKioKICAgICAqIERldGVybWlu\nZXMgYWNjZXNzIGZvciBmaWVsZCBiYXNlZCB1cG9uIGV4aXN0aW5nIG1ldGFk\nYXRhIGFuZCBYTUwKICAgICAqIGF0dHJpYnV0ZXMuCiAgICAgKgogICAgICog\nQHBhcmFtIGZpZWxkIEZpZWxkTWV0YURhdGEgY3VycmVudCBtZXRhZGF0YSBm\nb3IgZmllbGQKICAgICAqIEBwYXJhbSBhdHRycyBYTUwgQXR0cmlidXRlcyBk\nZWZpbmVkIG9uIHRoaXMgZmllbGQKICAgICAqIEByZXR1cm4KICAgICAqLwog\nICAgcHJpdmF0ZSBpbnQgZ2V0RmllbGRBY2Nlc3MoRmllbGRNZXRhRGF0YSBm\naWVsZCwgQXR0cmlidXRlcyBhdHRycykgewogICAgICAgIGlmIChhdHRycyAh\nPSBudWxsKSB7CiAgICAgICAgICAgIFN0cmluZyBhY2Nlc3MgPSBhdHRycy5n\nZXRWYWx1ZSgiYWNjZXNzIik7CiAgICAgICAgICAgIGlmICgiUFJPUEVSVFki\nLmVxdWFscyhhY2Nlc3MpKQogICAgICAgICAgICAgICAgcmV0dXJuIEFjY2Vz\nc0NvZGUuRVhQTElDSVQgfCBBY2Nlc3NDb2RlLlBST1BFUlRZOwogICAgICAg\nICAgICBpZiAoIkZJRUxEIi5lcXVhbHMoYWNjZXNzKSkKICAgICAgICAgICAg\nICAgIHJldHVybiBBY2Nlc3NDb2RlLkVYUExJQ0lUIHwgQWNjZXNzQ29kZS5G\nSUVMRDsKICAgICAgICB9CiAgICAgICAgLy8gQ2hlY2sgYWNjZXNzIGRlZmlu\nZWQgb24gZmllbGQsIGlmIHByb3ZpZGVkCiAgICAgICAgaWYgKGZpZWxkICE9\nIG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuIGZpZWxkLmdldEFjY2Vzc1R5\ncGUoKTsKICAgICAgICB9CiAgICAgICAgLy8gT3RoZXJ3aXNlLCBnZXQgdGhl\nIGRlZmF1bHQgYWNjZXNzIHR5cGUgb2YgdGhlIGRlY2xhcmluZyBjbGFzcwog\nICAgICAgIENsYXNzTWV0YURhdGEgbWV0YSA9IChDbGFzc01ldGFEYXRhKSBj\ndXJyZW50RWxlbWVudCgpOwogICAgICAgIGlmIChtZXRhICE9IG51bGwpIHsK\nICAgICAgICAgICAgcmV0dXJuIEFjY2Vzc0NvZGUudG9GaWVsZENvZGUobWV0\nYS5nZXRBY2Nlc3NUeXBlKCkpOwogICAgICAgIH0KICAgICAgICByZXR1cm4g\nQWNjZXNzQ29kZS5VTktOT1dOOwogICAgfQoKICAgIC8qKgogICAgICogSW1w\nbGVtZW50IHRvIGFkZCBmaWVsZCBtYXBwaW5nIGRhdGEuIERvZXMgbm90aGlu\nZyBieSBkZWZhdWx0LgogICAgICovCiAgICBwcm90ZWN0ZWQgdm9pZCBzdGFy\ndEZpZWxkTWFwcGluZyhGaWVsZE1ldGFEYXRhIGZpZWxkLCBBdHRyaWJ1dGVz\nIGF0dHJzKQogICAgICAgIHRocm93cyBTQVhFeGNlcHRpb24gewogICAgfQoK\nICAgIC8qKgogICAgICogSW1wbGVtZW50IHRvIGZpbmFsaXplIGZpZWxkIG1h\ncHBpbmcuIERvZXMgbm90aGluZyBieSBkZWZhdWx0LgogICAgICovCiAgICBw\ncm90ZWN0ZWQgdm9pZCBlbmRGaWVsZE1hcHBpbmcoRmllbGRNZXRhRGF0YSBm\naWVsZCkKICAgICAgICB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgIH0KCiAg\nICAvKioKICAgICAqIFBhcnNlIHZlcnNpb24uCiAgICAgKi8KICAgIHByb3Rl\nY3RlZCBib29sZWFuIHN0YXJ0VmVyc2lvbihBdHRyaWJ1dGVzIGF0dHJzKQog\nICAgICAgIHRocm93cyBTQVhFeGNlcHRpb24gewogICAgICAgIEZpZWxkTWV0\nYURhdGEgZm1kID0gcGFyc2VGaWVsZChhdHRycyk7CiAgICAgICAgZm1kLnNl\ndEV4cGxpY2l0KHRydWUpOwogICAgICAgIGZtZC5zZXRWZXJzaW9uKHRydWUp\nOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIHByb3RlY3RlZCB2\nb2lkIGVuZFZlcnNpb24oKQogICAgICAgIHRocm93cyBTQVhFeGNlcHRpb24g\newogICAgICAgIGZpbmlzaEZpZWxkKCk7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBQYXJzZSBzdHJhdGVneSBlbGVtZW50LgogICAgICovCiAgICBwcml2YXRl\nIGJvb2xlYW4gc3RhcnRTdHJhdGVneShQZXJzaXN0ZW5jZVN0cmF0ZWd5IHN0\ncmF0ZWd5LAogICAgICAgIEF0dHJpYnV0ZXMgYXR0cnMpCiAgICAgICAgdGhy\nb3dzIFNBWEV4Y2VwdGlvbiB7CiAgICAgICAgRmllbGRNZXRhRGF0YSBmbWQg\nPSBwYXJzZUZpZWxkKGF0dHJzKTsKICAgICAgICBmbWQuc2V0RXhwbGljaXQo\ndHJ1ZSk7CiAgICAgICAgZm1kLnNldE1hbmFnZW1lbnQoRmllbGRNZXRhRGF0\nYS5NQU5BR0VfUEVSU0lTVEVOVCk7CgogICAgICAgIFN0cmluZyB2YWwgPSBh\ndHRycy5nZXRWYWx1ZSgib3B0aW9uYWwiKTsKICAgICAgICBpZiAoImZhbHNl\nIi5lcXVhbHModmFsKSkKICAgICAgICAgICAgZm1kLnNldE51bGxWYWx1ZShG\naWVsZE1ldGFEYXRhLk5VTExfRVhDRVBUSU9OKTsKICAgICAgICBlbHNlIGlm\nICgidHJ1ZSIuZXF1YWxzKHZhbCkKICAgICAgICAgICAgICAgICYmIGZtZC5n\nZXROdWxsVmFsdWUoKSA9PSBGaWVsZE1ldGFEYXRhLk5VTExfRVhDRVBUSU9O\nKSB7CiAgICAgICAgICAgIC8vIFJlc2V0IHZhbHVlIGlmIHRoZSBmaWVsZCB3\nYXMgYW5ub3RhdGVkIHdpdGggb3B0aW9uYWw9ZmFsc2UuCiAgICAgICAgICAg\nIC8vIE90aGVyd2lzZSBsZWF2ZSBpdCBhbG9uZS4KICAgICAgICAgICAgZm1k\nLnNldE51bGxWYWx1ZShGaWVsZE1ldGFEYXRhLk5VTExfVU5TRVQpOwogICAg\nICAgIH0KICAgICAgICBpZiAoaXNNYXBwaW5nT3ZlcnJpZGVNb2RlKCkpIHsK\nICAgICAgICAgICAgdmFsID0gYXR0cnMuZ2V0VmFsdWUoIm1hcHBlZC1ieSIp\nOwogICAgICAgICAgICBpZiAodmFsICE9IG51bGwpCiAgICAgICAgICAgICAg\nICBmbWQuc2V0TWFwcGVkQnkodmFsKTsKICAgICAgICB9CiAgICAgICAgcGFy\nc2VTdHJhdGVneShmbWQsIHN0cmF0ZWd5LCBhdHRycyk7CiAgICAgICAgcmV0\ndXJuIHRydWU7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIGVuZFN0cmF0ZWd5\nKFBlcnNpc3RlbmNlU3RyYXRlZ3kgc3RyYXRlZ3kpCiAgICAgICAgdGhyb3dz\nIFNBWEV4Y2VwdGlvbiB7CiAgICAgICAgZmluaXNoRmllbGQoKTsKICAgIH0K\nCiAgICAvKioKICAgICAqIFBhcnNlIHN0cmF0ZWd5IHNwZWNpZmljIGF0dHJp\nYnV0ZXMuCiAgICAgKi8KICAgIHByaXZhdGUgdm9pZCBwYXJzZVN0cmF0ZWd5\nKEZpZWxkTWV0YURhdGEgZm1kLAogICAgICAgIFBlcnNpc3RlbmNlU3RyYXRl\nZ3kgc3RyYXRlZ3ksIEF0dHJpYnV0ZXMgYXR0cnMpCiAgICAgICAgdGhyb3dz\nIFNBWEV4Y2VwdGlvbiB7CiAgICAgICAgc3dpdGNoIChzdHJhdGVneSkgewog\nICAgICAgICAgICBjYXNlIEJBU0lDOgogICAgICAgICAgICAgICAgcGFyc2VC\nYXNpYyhmbWQsIGF0dHJzKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAg\nICAgICAgICBjYXNlIEVNQkVEREVEOgogICAgICAgICAgICAgICAgcGFyc2VF\nbWJlZGRlZChmbWQsIGF0dHJzKTsKICAgICAgICAgICAgICAgIGJyZWFrOwog\nICAgICAgICAgICBjYXNlIE9ORV9PTkU6CiAgICAgICAgICAgICAgICBwYXJz\nZU9uZVRvT25lKGZtZCwgYXR0cnMpOwogICAgICAgICAgICAgICAgYnJlYWs7\nCiAgICAgICAgICAgIGNhc2UgTUFOWV9PTkU6CiAgICAgICAgICAgICAgICBw\nYXJzZU1hbnlUb09uZShmbWQsIGF0dHJzKTsKICAgICAgICAgICAgICAgIGJy\nZWFrOwogICAgICAgICAgICBjYXNlIE1BTllfTUFOWToKICAgICAgICAgICAg\nICAgIHBhcnNlTWFueVRvTWFueShmbWQsIGF0dHJzKTsKICAgICAgICAgICAg\nICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIE9ORV9NQU5ZOgogICAgICAg\nICAgICAgICAgcGFyc2VPbmVUb01hbnkoZm1kLCBhdHRycyk7CiAgICAgICAg\nICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBUUkFOU0lFTlQ6CiAg\nICAgICAgICAgICAgICBTdHJpbmcgdmFsID0gYXR0cnMuZ2V0VmFsdWUoImZl\ndGNoIik7CiAgICAgICAgICAgICAgICBpZiAodmFsICE9IG51bGwpIHsKICAg\nICAgICAgICAgICAgICAgICBmbWQuc2V0SW5EZWZhdWx0RmV0Y2hHcm91cCgi\nRUFHRVIiLmVxdWFscyh2YWwpKTsKICAgICAgICAgICAgICAgIH0KICAgICAg\nICAgICAgICAgIGZtZC5zZXRNYW5hZ2VtZW50KEZpZWxkTWV0YURhdGEuTUFO\nQUdFX05PTkUpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAg\nIGNhc2UgRUxFTV9DT0xMOgogICAgICAgICAgICAgICAgcGFyc2VFbGVtZW50\nQ29sbGVjdGlvbihmbWQsIGF0dHJzKTsKICAgICAgICB9CiAgICB9CgogICAg\nLyoqCiAgICAgKiBQYXJzZSBiYXNpYy4KICAgICAqLwogICAgcHJvdGVjdGVk\nIHZvaWQgcGFyc2VCYXNpYyhGaWVsZE1ldGFEYXRhIGZtZCwgQXR0cmlidXRl\ncyBhdHRycykKICAgICAgICB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgICAg\nICBTdHJpbmcgdmFsID0gYXR0cnMuZ2V0VmFsdWUoImZldGNoIik7CiAgICAg\nICAgaWYgKHZhbCAhPSBudWxsKSB7CiAgICAgICAgICAgIGZtZC5zZXRJbkRl\nZmF1bHRGZXRjaEdyb3VwKCJFQUdFUiIuZXF1YWxzKHZhbCkpOwogICAgICAg\nIH0KICAgIH0KCiAgICAvKioKICAgICAqIFBhcnNlIGVtYmVkZGVkLgogICAg\nICovCiAgICBwcm90ZWN0ZWQgdm9pZCBwYXJzZUVtYmVkZGVkKEZpZWxkTWV0\nYURhdGEgZm1kLCBBdHRyaWJ1dGVzIGF0dHJzKQogICAgICAgIHRocm93cyBT\nQVhFeGNlcHRpb24gewogICAgICAgIGFzc2VydFBDKGZtZCwgIkVtYmVkZGVk\nIik7CiAgICAgICAgZm1kLnNldEluRGVmYXVsdEZldGNoR3JvdXAodHJ1ZSk7\nCiAgICAgICAgZm1kLnNldEVtYmVkZGVkKHRydWUpOwogICAgICAgIGZtZC5z\nZXRTZXJpYWxpemVkKGZhbHNlKTsgLy8gb3ZlcnJpZGUgYW55IExvYiBhbm5v\ndGF0aW9uCgogICAgICAgIGlmIChmbWQuZ2V0RW1iZWRkZWRNZXRhRGF0YSgp\nID09IG51bGwpCi8vICAgICAgICAgICAgZm1kLmFkZEVtYmVkZGVkTWV0YURh\ndGEoKTsKICAgICAgICAgICAgZGVmZXJFbWJlZGRhYmxlKGZtZC5nZXREZWNs\nYXJlZFR5cGUoKSwgZm1kKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRocm93\nIHByb3BlciBleGNlcHRpb24gaWYgZ2l2ZW4gdmFsdWUgaXMgbm90IHBvc3Np\nYmx5IHBlcnNpc3RlbmNlCiAgICAgKiBjYXBhYmxlLgogICAgICovCiAgICBw\ncml2YXRlIHZvaWQgYXNzZXJ0UEMoRmllbGRNZXRhRGF0YSBmbWQsIFN0cmlu\nZyBhdHRyKQogICAgICAgIHRocm93cyBTQVhFeGNlcHRpb24gewogICAgICAg\nIGlmICghSmF2YVR5cGVzLm1heWJlUEMoZm1kKSkKICAgICAgICAgICAgdGhy\nb3cgZ2V0RXhjZXB0aW9uKF9sb2MuZ2V0KCJiYWQtbWV0YS1hbm5vIiwgZm1k\nLCBhdHRyKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBQYXJzZSBvbmUtdG8t\nb25lLgogICAgICovCiAgICBwcm90ZWN0ZWQgdm9pZCBwYXJzZU9uZVRvT25l\nKEZpZWxkTWV0YURhdGEgZm1kLCBBdHRyaWJ1dGVzIGF0dHJzKQogICAgICAg\nIHRocm93cyBTQVhFeGNlcHRpb24gewogICAgICAgIFN0cmluZyB2YWwgPSBh\ndHRycy5nZXRWYWx1ZSgiZmV0Y2giKTsKICAgICAgICBpZiAodmFsID09IG51\nbGwgfHwgIkVBR0VSIi5lcXVhbHModmFsKSkgewogICAgICAgICAgICBmbWQu\nc2V0SW5EZWZhdWx0RmV0Y2hHcm91cCh0cnVlKTsKICAgICAgICB9CiAgICAg\nICAgdmFsID0gYXR0cnMuZ2V0VmFsdWUoInRhcmdldC1lbnRpdHkiKTsKICAg\nICAgICBpZiAodmFsICE9IG51bGwpCiAgICAgICAgICAgIGZtZC5zZXRUeXBl\nT3ZlcnJpZGUoY2xhc3NGb3JOYW1lKHZhbCkpOwogICAgICAgIGFzc2VydFBD\nKGZtZCwgIk9uZVRvT25lIik7CiAgICAgICAgZm1kLnNldFNlcmlhbGl6ZWQo\nZmFsc2UpOyAvLyBvdmVycmlkZSBhbnkgTG9iIGFubm90YXRpb24KICAgICAg\nICBib29sZWFuIG9ycGhhblJlbW92YWwgPSBCb29sZWFuLnZhbHVlT2YoYXR0\ncnMuZ2V0VmFsdWUoCiAgICAgICAgICAgICJvcnBoYW4tcmVtb3ZhbCIpKTsK\nICAgICAgICBzZXRPcnBoYW5SZW1vdmFsKGZtZCwgb3JwaGFuUmVtb3ZhbCk7\nCiAgICAgICAgU3RyaW5nIG1hcHNJZCA9IGF0dHJzLmdldFZhbHVlKCJtYXBz\nLWlkIik7CiAgICAgICAgaWYgKG1hcHNJZCAhPSBudWxsKQogICAgICAgICAg\nICBmbWQuc2V0TWFwcGVkQnlJZFZhbHVlKG1hcHNJZCk7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBQYXJzZSBtYW55LXRvLW9uZS4KICAgICAqLwogICAgcHJv\ndGVjdGVkIHZvaWQgcGFyc2VNYW55VG9PbmUoRmllbGRNZXRhRGF0YSBmbWQs\nIEF0dHJpYnV0ZXMgYXR0cnMpCiAgICAgICAgdGhyb3dzIFNBWEV4Y2VwdGlv\nbiB7CiAgICAgICAgU3RyaW5nIHZhbCA9IGF0dHJzLmdldFZhbHVlKCJmZXRj\naCIpOwogICAgICAgIGlmICh2YWwgPT0gbnVsbCB8fCAiRUFHRVIiLmVxdWFs\ncyh2YWwpKSB7CiAgICAgICAgICAgIGZtZC5zZXRJbkRlZmF1bHRGZXRjaEdy\nb3VwKHRydWUpOwogICAgICAgIH0KICAgICAgICB2YWwgPSBhdHRycy5nZXRW\nYWx1ZSgidGFyZ2V0LWVudGl0eSIpOwogICAgICAgIGlmICh2YWwgIT0gbnVs\nbCkKICAgICAgICAgICAgZm1kLnNldFR5cGVPdmVycmlkZShjbGFzc0Zvck5h\nbWUodmFsKSk7CiAgICAgICAgYXNzZXJ0UEMoZm1kLCAiTWFueVRvT25lIik7\nCiAgICAgICAgZm1kLnNldFNlcmlhbGl6ZWQoZmFsc2UpOyAvLyBvdmVycmlk\nZSBhbnkgTG9iIGFubm90YXRpb24KICAgICAgICBTdHJpbmcgbWFwc0lkID0g\nYXR0cnMuZ2V0VmFsdWUoIm1hcHMtaWQiKTsKICAgICAgICBpZiAobWFwc0lk\nICE9IG51bGwpCiAgICAgICAgICAgIGZtZC5zZXRNYXBwZWRCeUlkVmFsdWUo\nbWFwc0lkKTsKICAgIH0KCiAgICAvKioKICAgICAqIFBhcnNlIG1hbnktdG8t\nbWFueS4KICAgICAqLwogICAgcHJvdGVjdGVkIHZvaWQgcGFyc2VNYW55VG9N\nYW55KEZpZWxkTWV0YURhdGEgZm1kLCBBdHRyaWJ1dGVzIGF0dHJzKQogICAg\nICAgIHRocm93cyBTQVhFeGNlcHRpb24gewogICAgICAgIFN0cmluZyB2YWwg\nPSBhdHRycy5nZXRWYWx1ZSgiZmV0Y2giKTsKICAgICAgICBpZiAodmFsICE9\nIG51bGwpIHsKICAgICAgICAgICAgZm1kLnNldEluRGVmYXVsdEZldGNoR3Jv\ndXAoIkVBR0VSIi5lcXVhbHModmFsKSk7CiAgICAgICAgfQogICAgICAgIHZh\nbCA9IGF0dHJzLmdldFZhbHVlKCJ0YXJnZXQtZW50aXR5Iik7CiAgICAgICAg\naWYgKHZhbCAhPSBudWxsKQogICAgICAgICAgICBmbWQuZ2V0RWxlbWVudCgp\nLnNldERlY2xhcmVkVHlwZShjbGFzc0Zvck5hbWUodmFsKSk7CiAgICAgICAg\nYXNzZXJ0UENDb2xsZWN0aW9uKGZtZCwgIk1hbnlUb01hbnkiKTsKICAgICAg\nICBmbWQuc2V0U2VyaWFsaXplZChmYWxzZSk7IC8vIG92ZXJyaWRlIExvYiBp\nbiBhbm5vdGF0aW9uCiAgICB9CgogICAgLyoqCiAgICAgKiBUaHJvdyBleGNl\ncHRpb24gaWYgZ2l2ZW4gZmllbGQgbm90IGEgY29sbGVjdGlvbiBvZiBwb3Nz\naWJsZSBwZXJzaXN0ZW5jZQogICAgICogY2FwYWJsZXMuCiAgICAgKi8KICAg\nIHByaXZhdGUgdm9pZCBhc3NlcnRQQ0NvbGxlY3Rpb24oRmllbGRNZXRhRGF0\nYSBmbWQsIFN0cmluZyBhdHRyKQogICAgICAgIHRocm93cyBTQVhFeGNlcHRp\nb24gewogICAgICAgIHN3aXRjaCAoZm1kLmdldERlY2xhcmVkVHlwZUNvZGUo\nKSkgewogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5BUlJBWToKICAgICAg\nICAgICAgY2FzZSBKYXZhVHlwZXMuQ09MTEVDVElPTjoKICAgICAgICAgICAg\nY2FzZSBKYXZhVHlwZXMuTUFQOgogICAgICAgICAgICAgICAgaWYgKEphdmFU\neXBlcy5tYXliZVBDKGZtZC5nZXRFbGVtZW50KCkpKQogICAgICAgICAgICAg\nICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgLy8gbm8gYnJlYWsKICAg\nICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIHRocm93IGdldEV4\nY2VwdGlvbihfbG9jLmdldCgiYmFkLW1ldGEtYW5ubyIsIGZtZCwgYXR0cikp\nOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFBhcnNlIG9uZS10\nby1tYW55LgogICAgICovCiAgICBwcm90ZWN0ZWQgdm9pZCBwYXJzZU9uZVRv\nTWFueShGaWVsZE1ldGFEYXRhIGZtZCwgQXR0cmlidXRlcyBhdHRycykKICAg\nICAgICB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgICAgICBTdHJpbmcgdmFs\nID0gYXR0cnMuZ2V0VmFsdWUoImZldGNoIik7CiAgICAgICAgaWYgKHZhbCAh\nPSBudWxsKSB7CiAgICAgICAgICAgIGZtZC5zZXRJbkRlZmF1bHRGZXRjaEdy\nb3VwKCJFQUdFUiIuZXF1YWxzKHZhbCkpOwogICAgICAgIH0KICAgICAgICB2\nYWwgPSBhdHRycy5nZXRWYWx1ZSgidGFyZ2V0LWVudGl0eSIpOwogICAgICAg\nIGlmICh2YWwgIT0gbnVsbCkKICAgICAgICAgICAgZm1kLmdldEVsZW1lbnQo\nKS5zZXREZWNsYXJlZFR5cGUoY2xhc3NGb3JOYW1lKHZhbCkpOwogICAgICAg\nIGFzc2VydFBDQ29sbGVjdGlvbihmbWQsICJPbmVUb01hbnkiKTsKICAgICAg\nICBmbWQuc2V0U2VyaWFsaXplZChmYWxzZSk7IC8vIG92ZXJyaWRlIGFueSBM\nb2IgYW5ub3RhdGlvbgogICAgICAgIGJvb2xlYW4gb3JwaGFuUmVtb3ZhbCA9\nIEJvb2xlYW4udmFsdWVPZihhdHRycy5nZXRWYWx1ZSgKICAgICAgICAgICAg\nIm9ycGhhbi1yZW1vdmFsIikpOwogICAgICAgIHNldE9ycGhhblJlbW92YWwo\nZm1kLmdldEVsZW1lbnQoKSwgb3JwaGFuUmVtb3ZhbCk7CiAgICB9CgogICAg\ncHJvdGVjdGVkIHZvaWQgc2V0T3JwaGFuUmVtb3ZhbChWYWx1ZU1ldGFEYXRh\nIHZtZCwgYm9vbGVhbiBvcnBoYW5SZW1vdmFsKSB7CiAgICAgICAgaWYgKG9y\ncGhhblJlbW92YWwpCiAgICAgICAgICAgIHZtZC5zZXRDYXNjYWRlRGVsZXRl\nKFZhbHVlTWV0YURhdGEuQ0FTQ0FERV9BVVRPKTsKICAgIH0KCiAgICBwcm90\nZWN0ZWQgdm9pZCBwYXJzZUVsZW1lbnRDb2xsZWN0aW9uKEZpZWxkTWV0YURh\ndGEgZm1kLCBBdHRyaWJ1dGVzIGF0dHJzKQogICAgICAgIHRocm93cyBTQVhF\neGNlcHRpb24gewogICAgICAgIFN0cmluZyB2YWwgPSBhdHRycy5nZXRWYWx1\nZSgidGFyZ2V0LWNsYXNzIik7CiAgICAgICAgaWYgKHZhbCAhPSBudWxsKQog\nICAgICAgICAgICBmbWQuZ2V0RWxlbWVudCgpLnNldERlY2xhcmVkVHlwZShj\nbGFzc0Zvck5hbWUodmFsKSk7CgogICAgICAgIGlmIChmbWQuZ2V0RGVjbGFy\nZWRUeXBlQ29kZSgpICE9IEphdmFUeXBlcy5DT0xMRUNUSU9OICYmCiAgICAg\nICAgICAgIGZtZC5nZXREZWNsYXJlZFR5cGVDb2RlKCkgIT0gSmF2YVR5cGVz\nLk1BUCkKICAgICAgICAgICAgdGhyb3cgZ2V0RXhjZXB0aW9uKF9sb2MuZ2V0\nKCJiYWQtbWV0YS1hbm5vIiwgZm1kLAogICAgICAgICAgICAgICAgICAgICJF\nbGVtZW50Q29sbGVjdGlvbiIpKTsKCiAgICAgICAgdmFsID0gYXR0cnMuZ2V0\nVmFsdWUoImZldGNoIik7CiAgICAgICAgaWYgKHZhbCAhPSBudWxsKQogICAg\nICAgICAgICBmbWQuc2V0SW5EZWZhdWx0RmV0Y2hHcm91cCgiRUFHRVIiLmVx\ndWFscyh2YWwpKTsKICAgICAgICBmbWQuc2V0RWxlbWVudENvbGxlY3Rpb24o\ndHJ1ZSk7CiAgICAgICAgZm1kLnNldFNlcmlhbGl6ZWQoZmFsc2UpOwogICAg\nICAgIGlmIChKYXZhVHlwZXMubWF5YmVQQyhmbWQuZ2V0RWxlbWVudCgpKSAm\nJiAhZm1kLmdldEVsZW1lbnQoKS5nZXREZWNsYXJlZFR5cGUoKS5pc0VudW0o\nKSkgewogICAgICAgICAgICBmbWQuZ2V0RWxlbWVudCgpLnNldEVtYmVkZGVk\nKHRydWUpOwogICAgICAgICAgICBpZiAoZm1kLmdldEVsZW1lbnQoKS5nZXRF\nbWJlZGRlZE1ldGFEYXRhKCkgPT0gbnVsbCkKLy8gICAgICAgICAgICAgICAg\nZm1kLmdldEVsZW1lbnQoKS5hZGRFbWJlZGRlZE1ldGFEYXRhKCk7CiAgICAg\nICAgICAgICAgICBkZWZlckVtYmVkZGFibGUoZm1kLmdldEVsZW1lbnQoKS5n\nZXREZWNsYXJlZFR5cGUoKSwKICAgICAgICAgICAgICAgICAgICBmbWQuZ2V0\nRWxlbWVudCgpKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBQ\nYXJzZSBtYXAta2V5LgogICAgICovCiAgICBwcml2YXRlIGJvb2xlYW4gc3Rh\ncnRNYXBLZXkoQXR0cmlidXRlcyBhdHRycykKICAgICAgICB0aHJvd3MgU0FY\nRXhjZXB0aW9uIHsKICAgICAgICBpZiAoIWlzTWFwcGluZ092ZXJyaWRlTW9k\nZSgpKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CgogICAgICAgIEZpZWxk\nTWV0YURhdGEgZm1kID0gKEZpZWxkTWV0YURhdGEpIGN1cnJlbnRFbGVtZW50\nKCk7CiAgICAgICAgU3RyaW5nIG1hcEtleSA9IGF0dHJzLmdldFZhbHVlKCJu\nYW1lIik7CiAgICAgICAgaWYgKG1hcEtleSA9PSBudWxsKQogICAgICAgICAg\nICBmbWQuZ2V0S2V5KCkuc2V0VmFsdWVNYXBwZWRCeShWYWx1ZU1ldGFEYXRh\nLk1BUFBFRF9CWV9QSyk7CiAgICAgICAgZWxzZQogICAgICAgICAgICBmbWQu\nZ2V0S2V5KCkuc2V0VmFsdWVNYXBwZWRCeShtYXBLZXkpOwogICAgICAgIHJl\ndHVybiB0cnVlOwogICAgfQoKCiAgICAvKioKICAgICAqIFBhcnNlIG1hcC1r\nZXktY2xhc3MuCiAgICAgKi8KICAgIHByaXZhdGUgYm9vbGVhbiBzdGFydE1h\ncEtleUNsYXNzKEF0dHJpYnV0ZXMgYXR0cnMpCiAgICB0aHJvd3MgU0FYRXhj\nZXB0aW9uIHsKICAgICAgICBpZiAoIWlzTWFwcGluZ092ZXJyaWRlTW9kZSgp\nKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CgogICAgICAgIEZpZWxkTWV0\nYURhdGEgZm1kID0gKEZpZWxkTWV0YURhdGEpIGN1cnJlbnRFbGVtZW50KCk7\nCiAgICAgICAgU3RyaW5nIG1hcEtleUNsYXNzID0gYXR0cnMuZ2V0VmFsdWUo\nImNsYXNzIik7CgogICAgICAgIGlmIChtYXBLZXlDbGFzcyAhPSBudWxsKSB7\nCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBmbWQuZ2V0S2V5\nKCkuc2V0RGVjbGFyZWRUeXBlKENsYXNzLmZvck5hbWUobWFwS2V5Q2xhc3Mp\nKTsKICAgICAgICAgICAgfSBjYXRjaCAoQ2xhc3NOb3RGb3VuZEV4Y2VwdGlv\nbiBlKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3Vt\nZW50RXhjZXB0aW9uKCJDbGFzcyBub3QgZm91bmQiKTsKICAgICAgICAgICAg\nfQogICAgICAgIH0gZWxzZQogICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdh\nbEFyZ3VtZW50RXhjZXB0aW9uKAogICAgICAgICAgICAiVGhlIHZhbHVlIG9m\nIHRoZSBNYXBLZXlDbGFzcyBjYW5ub3QgYmUgbnVsbCIpOwogICAgICAgIHJl\ndHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogUGFyc2Ugb3JkZXIt\nYnkuCiAgICAgKi8KICAgIHByaXZhdGUgdm9pZCBlbmRPcmRlckJ5KCkKICAg\nICAgICB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgICAgICBGaWVsZE1ldGFE\nYXRhIGZtZCA9IChGaWVsZE1ldGFEYXRhKSBjdXJyZW50RWxlbWVudCgpOwog\nICAgICAgIFN0cmluZyBkZWMgPSBjdXJyZW50VGV4dCgpOwogICAgICAgIGlm\nIChmbWQuaXNFbGVtZW50Q29sbGVjdGlvbigpICYmCiAgICAgICAgICAgIGZt\nZC5nZXRFbGVtZW50KCkuZ2V0RW1iZWRkZWRNZXRhRGF0YSgpICE9IG51bGwg\nfHwKICAgICAgICAgICAgaXNEZWZlcnJlZEVtYmVkZGFibGUoZm1kLmdldEVs\nZW1lbnQoKS5nZXREZWNsYXJlZFR5cGUoKSwKICAgICAgICAgICAgICAgIGZt\nZC5nZXRFbGVtZW50KCkpKSB7CiAgICAgICAgICAgIGlmIChkZWMubGVuZ3Ro\nKCkgPT0gMCB8fCBkZWMuZXF1YWxzKCJBU0MiKSB8fAogICAgICAgICAgICAg\nICAgZGVjLmVxdWFscygiREVTQyIpKQogICAgICAgICAgICAgICAgdGhyb3cg\nbmV3IE1ldGFEYXRhRXhjZXB0aW9uKF9sb2MuZ2V0KAogICAgICAgICAgICAg\nICAgICAgICJpbnZhbGlkLW9yZGVyQnkiLCBmbWQpKTsKICAgICAgICB9CiAg\nICAgICAgaWYgKFN0cmluZ1V0aWxzLmlzRW1wdHkoZGVjKSB8fCBkZWMuZXF1\nYWxzKCJBU0MiKSkKICAgICAgICAgICAgZGVjID0gT3JkZXIuRUxFTUVOVCAr\nICIgYXNjIjsKICAgICAgICBlbHNlIGlmIChkZWMuZXF1YWxzKCJERVNDIikp\nCiAgICAgICAgICAgIGRlYyA9IE9yZGVyLkVMRU1FTlQgKyAiIGRlc2MiOwoK\nICAgICAgICBmbWQuc2V0T3JkZXJEZWNsYXJhdGlvbihkZWMpOwogICAgfQoK\nICAgIC8qKgogICAgICogUGFyc2UgbmFtZWQtcXVlcnkuCiAgICAgKi8KICAg\nIHByb3RlY3RlZCBib29sZWFuIHN0YXJ0TmFtZWRRdWVyeShBdHRyaWJ1dGVz\nIGF0dHJzKQogICAgICAgIHRocm93cyBTQVhFeGNlcHRpb24gewogICAgICAg\nIGlmICghaXNRdWVyeU1vZGUoKSkKICAgICAgICAgICAgcmV0dXJuIGZhbHNl\nOwoKICAgICAgICBTdHJpbmcgbmFtZSA9IGF0dHJzLmdldFZhbHVlKCJuYW1l\nIik7CiAgICAgICAgTG9nIGxvZyA9IGdldExvZygpOwogICAgICAgIGlmIChs\nb2cuaXNUcmFjZUVuYWJsZWQoKSkKICAgICAgICAgICAgbG9nLnRyYWNlKF9s\nb2MuZ2V0KCJwYXJzZS1xdWVyeSIsIG5hbWUpKTsKCiAgICAgICAgUXVlcnlN\nZXRhRGF0YSBtZXRhID0gZ2V0UmVwb3NpdG9yeSgpLnNlYXJjaFF1ZXJ5TWV0\nYURhdGFCeU5hbWUobmFtZSk7CiAgICAgICAgaWYgKG1ldGEgIT0gbnVsbCkg\newogICAgICAgIAlDbGFzczw/PiBkZWZUeXBlID0gbWV0YS5nZXREZWZpbmlu\nZ1R5cGUoKTsKICAgICAgICAgICAgaWYgKChkZWZUeXBlICE9IF9jbHMpICYm\nIGxvZy5pc1dhcm5FbmFibGVkKCkpIHsKICAgICAgICAgICAgICAgIGxvZy53\nYXJuKF9sb2MuZ2V0KCJkdXAtcXVlcnkiLCBuYW1lLCBjdXJyZW50TG9jYXRp\nb24oKSwKICAgICAgICAgICAgCSAgICAgICAgZGVmVHlwZSkpOwogICAgICAg\nICAgICB9CiAgICAgICAgICAgIHB1c2hFbGVtZW50KG1ldGEpOwogICAgICAg\nICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIG1ldGEgPSBn\nZXRSZXBvc2l0b3J5KCkuYWRkUXVlcnlNZXRhRGF0YShudWxsLCBuYW1lKTsK\nICAgICAgICBtZXRhLnNldERlZmluaW5nVHlwZShfY2xzKTsKICAgICAgICBt\nZXRhLnNldFF1ZXJ5U3RyaW5nKGF0dHJzLmdldFZhbHVlKCJxdWVyeSIpKTsK\nICAgICAgICBtZXRhLnNldExhbmd1YWdlKEpQUUxQYXJzZXIuTEFOR19KUFFM\nKTsKICAgICAgICBTdHJpbmcgbG9ja01vZGVTdHIgPSBhdHRycy5nZXRWYWx1\nZSgibG9jay1tb2RlIik7CiAgICAgICAgTG9ja01vZGVUeXBlIGxtdCA9IHBy\nb2Nlc3NOYW1lZFF1ZXJ5TG9ja01vZGVUeXBlKGxvZywgbG9ja01vZGVTdHIs\nIG5hbWUpOwogICAgICAgIGlmIChsbXQgIT0gbnVsbCkgewogICAgICAgICAg\nICBtZXRhLmFkZEhpbnQoIm9wZW5qcGEuRmV0Y2hQbGFuLlJlYWRMb2NrTW9k\nZSIsIGxtdCk7CiAgICAgICAgfQogICAgICAgIExvY2F0b3IgbG9jYXRvciA9\nIGdldExvY2F0aW9uKCkuZ2V0TG9jYXRvcigpOwogICAgICAgIGlmIChsb2Nh\ndG9yICE9IG51bGwpIHsKICAgICAgICAgICAgbWV0YS5zZXRMaW5lTnVtYmVy\nKGxvY2F0b3IuZ2V0TGluZU51bWJlcigpKTsKICAgICAgICAgICAgbWV0YS5z\nZXRDb2xOdW1iZXIobG9jYXRvci5nZXRDb2x1bW5OdW1iZXIoKSk7CiAgICAg\nICAgfQogICAgICAgIE9iamVjdCBjdXIgPSBjdXJyZW50RWxlbWVudCgpOwog\nICAgICAgIE9iamVjdCBzY29wZSA9IChjdXIgaW5zdGFuY2VvZiBDbGFzc01l\ndGFEYXRhKQogICAgICAgICAgICA/ICgoQ2xhc3NNZXRhRGF0YSkgY3VyKS5n\nZXREZXNjcmliZWRUeXBlKCkgOiBudWxsOwogICAgICAgIG1ldGEuc2V0U291\ncmNlKGdldFNvdXJjZUZpbGUoKSwgc2NvcGUsIFNvdXJjZVRyYWNrZXIuU1JD\nX1hNTCk7CiAgICAgICAgaWYgKGlzTWV0YURhdGFNb2RlKCkpCiAgICAgICAg\nICAgIG1ldGEuc2V0U291cmNlTW9kZShNT0RFX01FVEEpOwogICAgICAgIGVs\nc2UgaWYgKGlzTWFwcGluZ01vZGUoKSkKICAgICAgICAgICAgbWV0YS5zZXRT\nb3VyY2VNb2RlKE1PREVfTUFQUElORyk7CiAgICAgICAgZWxzZQogICAgICAg\nICAgICBtZXRhLnNldFNvdXJjZU1vZGUoTU9ERV9RVUVSWSk7CiAgICAgICAg\ncHVzaEVsZW1lbnQobWV0YSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9\nCiAgICAKICAgIC8qKgogICAgICogQSBwcml2YXRlIHdvcmtlciBtZXRob2Qg\ndGhhdCBjYWxjdWxhdGVzIHRoZSBsb2NrIG1vZGUgZm9yIGFuIGluZGl2aWR1\nYWwgTmFtZWRRdWVyeS4gSWYgdGhlIE5hbWVkUXVlcnkgaXMgCiAgICAgKiBj\nb25maWd1cmVkIHRvIHVzZSB0aGUgTk9ORSBsb2NrIG1vZGUoZXhwbGljaXQg\nb3IgaW1wbGljaXQpLCB0aGlzIG1ldGhvZCB3aWxsIHByb21vdGUgdGhlIGxv\nY2sgdG8gYSBSRUFECiAgICAgKiBsZXZlbCBsb2NrLiBUaGlzIHdhcyBkb25l\nIHRvIGFsbG93IGZvciBKUEExIGFwcHMgdG8gZnVuY3Rpb24gcHJvcGVybHkg\ndW5kZXIgYSAyLjAgcnVudGltZS4gCiAgICAgKi8KICAgIHByaXZhdGUgTG9j\na01vZGVUeXBlIHByb2Nlc3NOYW1lZFF1ZXJ5TG9ja01vZGVUeXBlKExvZyBs\nb2csIFN0cmluZyBsb2NrTW9kZVN0cmluZywgU3RyaW5nIHF1ZXJ5TmFtZSkg\newogICAgICAgIGlmIChsb2NrTW9kZVN0cmluZyA9PSBudWxsKSB7CiAgICAg\nICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgICAgICBMb2NrTW9k\nZVR5cGUgbG10ID0gTG9ja01vZGVUeXBlLnZhbHVlT2YobG9ja01vZGVTdHJp\nbmcpOwogICAgICAgIFN0cmluZyBsbSA9IF9jb25mLmdldExvY2tNYW5hZ2Vy\nKCk7CiAgICAgICAgaWYgKGxtICE9IG51bGwpIHsKICAgICAgICAgICAgbG0g\nPSBsbS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICBpZiAobG0uY29udGFp\nbnMoInBlc3NpbWlzdGljIikpIHsKICAgICAgICAgICAgICAgIGlmIChsbXQg\nPT0gTG9ja01vZGVUeXBlLk5PTkUpIHsKICAgICAgICAgICAgICAgICAgICBp\nZiAobG9nICE9IG51bGwgJiYgbG9nLmlzV2FybkVuYWJsZWQoKSA9PSB0cnVl\nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKF9sb2MuZ2V0\nKCJvdmVycmlkZS1uYW1lZC1xdWVyeS1sb2NrLW1vZGUiLCBuZXcgU3RyaW5n\nW10geyAieG1sIiwgcXVlcnlOYW1lLAogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgX2Nscy5nZXROYW1lKCkgfSkpOwogICAgICAgICAgICAgICAgICAg\nIH0KICAgICAgICAgICAgICAgICAgICBsbXQgPSBMb2NrTW9kZVR5cGUuUkVB\nRDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0K\nCiAgICAgICAgcmV0dXJuIGxtdDsKICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9p\nZCBlbmROYW1lZFF1ZXJ5KCkKICAgICAgICB0aHJvd3MgU0FYRXhjZXB0aW9u\nIHsKICAgICAgICBwb3BFbGVtZW50KCk7CiAgICB9CgogICAgcHJvdGVjdGVk\nIGJvb2xlYW4gc3RhcnRRdWVyeVN0cmluZyhBdHRyaWJ1dGVzIGF0dHJzKQog\nICAgICAgIHRocm93cyBTQVhFeGNlcHRpb24gewogICAgICAgIHJldHVybiB0\ncnVlOwogICAgfQoKICAgIHByb3RlY3RlZCB2b2lkIGVuZFF1ZXJ5U3RyaW5n\nKCkKICAgICAgICB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgICAgICBRdWVy\neU1ldGFEYXRhIG1ldGEgPSAoUXVlcnlNZXRhRGF0YSkgY3VycmVudEVsZW1l\nbnQoKTsKICAgICAgICBtZXRhLnNldFF1ZXJ5U3RyaW5nKGN1cnJlbnRUZXh0\nKCkpOwogICAgfQoKICAgIC8qKgogICAgICogUGFyc2UgcXVlcnktaGludC4K\nICAgICAqLwogICAgcHJvdGVjdGVkIGJvb2xlYW4gc3RhcnRRdWVyeUhpbnQo\nQXR0cmlidXRlcyBhdHRycykKICAgICAgICB0aHJvd3MgU0FYRXhjZXB0aW9u\nIHsKICAgICAgICBRdWVyeU1ldGFEYXRhIG1ldGEgPSAoUXVlcnlNZXRhRGF0\nYSkgY3VycmVudEVsZW1lbnQoKTsKICAgICAgICBtZXRhLmFkZEhpbnQoYXR0\ncnMuZ2V0VmFsdWUoIm5hbWUiKSwgYXR0cnMuZ2V0VmFsdWUoInZhbHVlIikp\nOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIHByb3RlY3RlZCB2\nb2lkIGVuZFF1ZXJ5SGludCgpCiAgICAgICAgdGhyb3dzIFNBWEV4Y2VwdGlv\nbiB7CiAgICB9CgogICAgLyoqCiAgICAgKiBQYXJzZSBuYXRpdmUtbmFtZWQt\ncXVlcnkuCiAgICAgKi8KICAgIHByb3RlY3RlZCBib29sZWFuIHN0YXJ0TmFt\nZWROYXRpdmVRdWVyeShBdHRyaWJ1dGVzIGF0dHJzKQogICAgICAgIHRocm93\ncyBTQVhFeGNlcHRpb24gewogICAgICAgIGlmICghaXNRdWVyeU1vZGUoKSkK\nICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoKICAgICAgICBTdHJpbmcgbmFt\nZSA9IGF0dHJzLmdldFZhbHVlKCJuYW1lIik7CiAgICAgICAgTG9nIGxvZyA9\nIGdldExvZygpOwogICAgICAgIGlmIChsb2cuaXNUcmFjZUVuYWJsZWQoKSkK\nICAgICAgICAgICAgbG9nLnRyYWNlKF9sb2MuZ2V0KCJwYXJzZS1uYXRpdmUt\ncXVlcnkiLCBuYW1lKSk7CgogICAgICAgIFF1ZXJ5TWV0YURhdGEgbWV0YSA9\nIGdldFJlcG9zaXRvcnkoKS5nZXRDYWNoZWRRdWVyeU1ldGFEYXRhKG51bGws\nIG5hbWUpOwogICAgICAgIGlmIChtZXRhICE9IG51bGwgJiYgbG9nLmlzV2Fy\nbkVuYWJsZWQoKSkKICAgICAgICAgICAgbG9nLndhcm4oX2xvYy5nZXQoIm92\nZXJyaWRlLXF1ZXJ5IiwgbmFtZSwgY3VycmVudExvY2F0aW9uKCkpKTsKCiAg\nICAgICAgbWV0YSA9IGdldFJlcG9zaXRvcnkoKS5hZGRRdWVyeU1ldGFEYXRh\nKG51bGwsIG5hbWUpOwogICAgICAgIG1ldGEuc2V0RGVmaW5pbmdUeXBlKF9j\nbHMpOwogICAgICAgIG1ldGEuc2V0UXVlcnlTdHJpbmcoYXR0cnMuZ2V0VmFs\ndWUoInF1ZXJ5IikpOwogICAgICAgIG1ldGEuc2V0TGFuZ3VhZ2UoUXVlcnlM\nYW5ndWFnZXMuTEFOR19TUUwpOwogICAgICAgIFN0cmluZyB2YWwgPSBhdHRy\ncy5nZXRWYWx1ZSgicmVzdWx0LWNsYXNzIik7CiAgICAgICAgaWYgKHZhbCAh\nPSBudWxsKSB7CiAgICAgICAgICAgIENsYXNzPD8+IHR5cGUgPSBjbGFzc0Zv\nck5hbWUodmFsKTsKICAgICAgICAgICAgaWYgKEltcGxIZWxwZXIuaXNNYW5h\nZ2VkVHlwZShnZXRDb25maWd1cmF0aW9uKCksIHR5cGUpKQogICAgICAgICAg\nICAgICAgbWV0YS5zZXRDYW5kaWRhdGVUeXBlKHR5cGUpOwogICAgICAgICAg\nICBlbHNlCiAgICAgICAgICAgICAgICBtZXRhLnNldFJlc3VsdFR5cGUodHlw\nZSk7CiAgICAgICAgfQoKICAgICAgICB2YWwgPSBhdHRycy5nZXRWYWx1ZSgi\ncmVzdWx0LXNldC1tYXBwaW5nIik7CiAgICAgICAgaWYgKHZhbCAhPSBudWxs\nKQogICAgICAgICAgICBtZXRhLnNldFJlc3VsdFNldE1hcHBpbmdOYW1lKHZh\nbCk7CgogICAgICAgIE9iamVjdCBjdXIgPSBjdXJyZW50RWxlbWVudCgpOwog\nICAgICAgIE9iamVjdCBzY29wZSA9IChjdXIgaW5zdGFuY2VvZiBDbGFzc01l\ndGFEYXRhKQogICAgICAgICAgICA/ICgoQ2xhc3NNZXRhRGF0YSkgY3VyKS5n\nZXREZXNjcmliZWRUeXBlKCkgOiBudWxsOwogICAgICAgIG1ldGEuc2V0U291\ncmNlKGdldFNvdXJjZUZpbGUoKSwgc2NvcGUsIFNvdXJjZVRyYWNrZXIuU1JD\nX1hNTCk7CiAgICAgICAgTG9jYXRvciBsb2NhdG9yID0gZ2V0TG9jYXRpb24o\nKS5nZXRMb2NhdG9yKCk7CiAgICAgICAgaWYgKGxvY2F0b3IgIT0gbnVsbCkg\newogICAgICAgICAgICBtZXRhLnNldExpbmVOdW1iZXIobG9jYXRvci5nZXRM\naW5lTnVtYmVyKCkpOwogICAgICAgICAgICBtZXRhLnNldENvbE51bWJlcihs\nb2NhdG9yLmdldENvbHVtbk51bWJlcigpKTsKICAgICAgICB9CiAgICAgICAg\naWYgKGlzTWV0YURhdGFNb2RlKCkpCiAgICAgICAgICAgIG1ldGEuc2V0U291\ncmNlTW9kZShNT0RFX01FVEEpOwogICAgICAgIGVsc2UgaWYgKGlzTWFwcGlu\nZ01vZGUoKSkKICAgICAgICAgICAgbWV0YS5zZXRTb3VyY2VNb2RlKE1PREVf\nTUFQUElORyk7CiAgICAgICAgZWxzZQogICAgICAgICAgICBtZXRhLnNldFNv\ndXJjZU1vZGUoTU9ERV9RVUVSWSk7CiAgICAgICAgcHVzaEVsZW1lbnQobWV0\nYSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgcHJvdGVjdGVk\nIHZvaWQgZW5kTmFtZWROYXRpdmVRdWVyeSgpCiAgICAgICAgdGhyb3dzIFNB\nWEV4Y2VwdGlvbiB7CiAgICAgICAgcG9wRWxlbWVudCgpOwogICAgfQoKICAg\nIC8qKgogICAgICogU3RhcnQgZW50aXR5LWxpc3RlbmVycwogICAgICovCiAg\nICBwcml2YXRlIGJvb2xlYW4gc3RhcnRFbnRpdHlMaXN0ZW5lcnMoQXR0cmli\ndXRlcyBhdHRycykKICAgICAgICB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAg\nICAgICBpZiAoIWlzTWV0YURhdGFNb2RlKCkpCiAgICAgICAgICAgIHJldHVy\nbiBmYWxzZTsKICAgICAgICBpZiAoY3VycmVudEVsZW1lbnQoKSA9PSBudWxs\nKQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKCiAgICAgICAgLy8gcmVzZXQg\nbGlzdGVuZXJzIGRlY2xhcmVkIGluIGFubm90YXRpb25zLgogICAgICAgIExp\nZmVjeWNsZU1ldGFEYXRhIG1ldGEgPSAoKENsYXNzTWV0YURhdGEpIGN1cnJl\nbnRFbGVtZW50KCkpLgogICAgICAgICAgICBnZXRMaWZlY3ljbGVNZXRhRGF0\nYSgpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTGlmZWN5Y2xlRXZl\nbnQuQUxMX0VWRU5UUy5sZW5ndGg7IGkrKykKICAgICAgICAgICAgbWV0YS5z\nZXREZWNsYXJlZENhbGxiYWNrcyhpLCBudWxsLCAwKTsKICAgICAgICByZXR1\ncm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIFBhcnNlIGV4Y2x1ZGUt\nZGVmYXVsdC1saXN0ZW5lcnMuCiAgICAgKi8KICAgIHByaXZhdGUgYm9vbGVh\nbiBzdGFydEV4Y2x1ZGVEZWZhdWx0TGlzdGVuZXJzKEF0dHJpYnV0ZXMgYXR0\ncnMpCiAgICAgICAgdGhyb3dzIFNBWEV4Y2VwdGlvbiB7CiAgICAgICAgaWYg\nKCFpc01ldGFEYXRhTW9kZSgpKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7\nCiAgICAgICAgQ2xhc3NNZXRhRGF0YSBtZXRhID0gKENsYXNzTWV0YURhdGEp\nIGN1cnJlbnRFbGVtZW50KCk7CiAgICAgICAgbWV0YS5nZXRMaWZlY3ljbGVN\nZXRhRGF0YSgpLnNldElnbm9yZVN5c3RlbUxpc3RlbmVycyh0cnVlKTsKICAg\nICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIFBhcnNl\nIGV4Y2x1ZGUtc3VwZXJjbGFzcy1saXN0ZW5lcnMuCiAgICAgKi8KICAgIHBy\naXZhdGUgYm9vbGVhbiBzdGFydEV4Y2x1ZGVTdXBlcmNsYXNzTGlzdGVuZXJz\nKEF0dHJpYnV0ZXMgYXR0cnMpCiAgICAgICAgdGhyb3dzIFNBWEV4Y2VwdGlv\nbiB7CiAgICAgICAgaWYgKCFpc01ldGFEYXRhTW9kZSgpKQogICAgICAgICAg\nICByZXR1cm4gZmFsc2U7CiAgICAgICAgQ2xhc3NNZXRhRGF0YSBtZXRhID0g\nKENsYXNzTWV0YURhdGEpIGN1cnJlbnRFbGVtZW50KCk7CiAgICAgICAgbWV0\nYS5nZXRMaWZlY3ljbGVNZXRhRGF0YSgpLnNldElnbm9yZVN1cGVyY2xhc3ND\nYWxsYmFja3MKICAgICAgICAgICAgKExpZmVjeWNsZU1ldGFEYXRhLklHTk9S\nRV9ISUdIKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioK\nICAgICAqIFBhcnNlIGVudGl0eS1saXN0ZW5lci4KICAgICAqLwogICAgcHJp\ndmF0ZSBib29sZWFuIHN0YXJ0RW50aXR5TGlzdGVuZXIoQXR0cmlidXRlcyBh\ndHRycykKICAgICAgICB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgICAgICBf\nbGlzdGVuZXIgPSBjbGFzc0Zvck5hbWUoYXR0cnMuZ2V0VmFsdWUoImNsYXNz\nIikpOwogICAgICAgIGlmICghX2NvbmYuZ2V0Q2FsbGJhY2tPcHRpb25zSW5z\ndGFuY2UoKS5nZXRBbGxvd3NEdXBsaWNhdGVMaXN0ZW5lcigpKSB7CiAgICAg\nICAgICAgIGlmIChfbGlzdGVuZXJzID09IG51bGwpCiAgICAgICAgICAgICAg\nICBfbGlzdGVuZXJzID0gbmV3IEFycmF5TGlzdDxDbGFzczw/Pj4oKTsKICAg\nICAgICAgICAgaWYgKF9saXN0ZW5lcnMuY29udGFpbnMoX2xpc3RlbmVyKSkg\nCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgX2xp\nc3RlbmVycy5hZGQoX2xpc3RlbmVyKTsgICAgCiAgICAgICAgfQogICAgICAg\nICAgICAKICAgICAgICBib29sZWFuIHN5c3RlbSA9IGN1cnJlbnRFbGVtZW50\nKCkgPT0gbnVsbDsKICAgICAgICBDb2xsZWN0aW9uPExpZmVjeWNsZUNhbGxi\nYWNrcz5bXSBwYXJzZWQgPQogICAgICAgICAgICBBbm5vdGF0aW9uUGVyc2lz\ndGVuY2VNZXRhRGF0YVBhcnNlci5wYXJzZUNhbGxiYWNrTWV0aG9kcyhfbGlz\ndGVuZXIsCiAgICAgICAgICAgICAgICBudWxsLCB0cnVlLCB0cnVlLCBfcmVw\nb3MpOwogICAgICAgIGlmIChwYXJzZWQgPT0gbnVsbCkKICAgICAgICAgICAg\ncmV0dXJuIHRydWU7CgogICAgICAgIGlmIChfY2FsbGJhY2tzID09IG51bGwp\nIHsKICAgICAgICAgICAgX2NhbGxiYWNrcyA9IChDb2xsZWN0aW9uPExpZmVj\neWNsZUNhbGxiYWNrcz5bXSkKICAgICAgICAgICAgICAgIG5ldyBDb2xsZWN0\naW9uW0xpZmVjeWNsZUV2ZW50LkFMTF9FVkVOVFMubGVuZ3RoXTsKICAgICAg\nICAgICAgaWYgKCFzeXN0ZW0pCiAgICAgICAgICAgICAgICBfaGlnaHMgPSBu\nZXcgaW50W0xpZmVjeWNsZUV2ZW50LkFMTF9FVkVOVFMubGVuZ3RoXTsKICAg\nICAgICB9CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwYXJzZWQubGVu\nZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKHBhcnNlZFtpXSA9PSBudWxs\nKQogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIGlmIChf\nY2FsbGJhY2tzW2ldID09IG51bGwpCiAgICAgICAgICAgICAgICBfY2FsbGJh\nY2tzW2ldID0gcGFyc2VkW2ldOwogICAgICAgICAgICBlbHNlCiAgICAgICAg\nICAgICAgICBfY2FsbGJhY2tzW2ldLmFkZEFsbChwYXJzZWRbaV0pOwogICAg\nICAgICAgICBpZiAoIXN5c3RlbSkKICAgICAgICAgICAgICAgIF9oaWdoc1tp\nXSArPSBwYXJzZWRbaV0uc2l6ZSgpOwogICAgICAgIH0KICAgICAgICByZXR1\ncm4gdHJ1ZTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgZW5kRW50aXR5TGlz\ndGVuZXIoKQogICAgICAgIHRocm93cyBTQVhFeGNlcHRpb24gewogICAgICAg\nIC8vIHNob3VsZCBiZSBpbiBlbmRFbnRpdHlMaXN0ZW5lcnMgSSB0aGluayB0\nbyBtZXJnZSBjYWxsYmFja3MKICAgICAgICAvLyBpbnRvIGEgc2luZ2xlIGxp\nc3RlbmVyLiAgQnV0IHRoZW4gdGhlIHVzZXIgY2Fubm90IHJlbW92ZS4KICAg\nICAgICBpZiAoY3VycmVudEVsZW1lbnQoKSA9PSBudWxsICYmIF9jYWxsYmFj\na3MgIT0gbnVsbCkgewogICAgICAgICAgICBfcmVwb3MuYWRkU3lzdGVtTGlz\ndGVuZXIobmV3IFBlcnNpc3RlbmNlTGlzdGVuZXJBZGFwdGVyCiAgICAgICAg\nICAgICAgICAoX2NhbGxiYWNrcykpOwogICAgICAgICAgICBfY2FsbGJhY2tz\nID0gbnVsbDsKICAgICAgICB9CiAgICAgICAgX2xpc3RlbmVyID0gbnVsbDsK\nICAgIH0KCiAgICBwcml2YXRlIGJvb2xlYW4gc3RhcnRDYWxsYmFjayhNZXRh\nRGF0YVRhZyBjYWxsYmFjaywgQXR0cmlidXRlcyBhdHRycykKICAgICAgICB0\naHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgICAgICBpZiAoIWlzTWV0YURhdGFN\nb2RlKCkpCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICBpbnRb\nXSBldmVudHMgPSBNZXRhRGF0YVBhcnNlcnMuZ2V0RXZlbnRUeXBlcyhjYWxs\nYmFjaywgX2NvbmYpOwogICAgICAgIGlmIChldmVudHMgPT0gbnVsbCkKICAg\nICAgICAgICAgcmV0dXJuIGZhbHNlOwoKICAgICAgICBib29sZWFuIHN5c3Rl\nbSA9IGN1cnJlbnRFbGVtZW50KCkgPT0gbnVsbDsKCiAgICAgICAgLy8gSWYg\naW4gYSBtdWx0aS1sZXZlbCBwYXJzZSwgZG8gbm90IGFkZCBzeXN0ZW0gbGV2\nZWwgbGlzdGVuZXJzLgogICAgICAgIC8vIE90aGVyd2lzZSwgdGhleSB3aWxs\nIGdldCBhZGRlZCBtdWx0aXBsZSB0aW1lcy4KICAgICAgICBpZiAoc3lzdGVt\nICYmIF9wYXJzZUxpc3QgIT0gbnVsbCAmJiBfcGFyc2VMaXN0LnNpemUoKSA+\nIDApIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAg\nICAgICAgQ2xhc3M8Pz4gdHlwZSA9IGN1cnJlbnRFbGVtZW50KCkgPT0gbnVs\nbCA/IG51bGwgOgogICAgICAgICAgICAoKENsYXNzTWV0YURhdGEpIGN1cnJl\nbnRFbGVtZW50KCkpLmdldERlc2NyaWJlZFR5cGUoKTsKICAgICAgICBpZiAo\ndHlwZSA9PSBudWxsKQogICAgICAgICAgICB0eXBlID0gT2JqZWN0LmNsYXNz\nOwoKICAgICAgICBpZiAoX2NhbGxiYWNrcyA9PSBudWxsKSB7CiAgICAgICAg\nICAgIF9jYWxsYmFja3MgPSAoQ29sbGVjdGlvbjxMaWZlY3ljbGVDYWxsYmFj\na3M+W10pCiAgICAgICAgICAgICAgICBuZXcgQ29sbGVjdGlvbltMaWZlY3lj\nbGVFdmVudC5BTExfRVZFTlRTLmxlbmd0aF07CiAgICAgICAgICAgIGlmICgh\nc3lzdGVtKQogICAgICAgICAgICAgICAgX2hpZ2hzID0gbmV3IGludFtMaWZl\nY3ljbGVFdmVudC5BTExfRVZFTlRTLmxlbmd0aF07CiAgICAgICAgfQoKICAg\nICAgICBMaWZlY3ljbGVDYWxsYmFja3MgYWRhcHRlcjsKICAgICAgICBpZiAo\nX2xpc3RlbmVyICE9IG51bGwpCiAgICAgICAgICAgIGFkYXB0ZXIgPSBuZXcg\nQmVhbkxpZmVjeWNsZUNhbGxiYWNrcyhfbGlzdGVuZXIsCiAgICAgICAgICAg\nICAgICBhdHRycy5nZXRWYWx1ZSgibWV0aG9kLW5hbWUiKSwgZmFsc2UsIHR5\ncGUpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgYWRhcHRlciA9IG5ldyBN\nZXRob2RMaWZlY3ljbGVDYWxsYmFja3MoX2NscywKICAgICAgICAgICAgICAg\nIGF0dHJzLmdldFZhbHVlKCJtZXRob2QtbmFtZSIpLCBmYWxzZSk7CgogICAg\nICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZXZlbnRzLmxlbmd0aDsgaSsrKSB7\nCiAgICAgICAgICAgIGludCBldmVudCA9IGV2ZW50c1tpXTsKICAgICAgICAg\nICAgaWYgKF9saXN0ZW5lciAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBN\nZXRhRGF0YVBhcnNlcnMudmFsaWRhdGVNZXRob2RzRm9yU2FtZUNhbGxiYWNr\nKF9saXN0ZW5lciwKICAgICAgICAgICAgICAgICAgICBfY2FsbGJhY2tzW2V2\nZW50XSwgKChCZWFuTGlmZWN5Y2xlQ2FsbGJhY2tzKSBhZGFwdGVyKS4KICAg\nICAgICAgICAgICAgICAgICBnZXRDYWxsYmFja01ldGhvZCgpLCBjYWxsYmFj\naywgX2NvbmYsIGdldExvZygpKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAg\nICAgICAgICAgICAgIE1ldGFEYXRhUGFyc2Vycy52YWxpZGF0ZU1ldGhvZHNG\nb3JTYW1lQ2FsbGJhY2soX2NscywKICAgICAgICAgICAgICAgICAgICBfY2Fs\nbGJhY2tzW2V2ZW50XSwgKChNZXRob2RMaWZlY3ljbGVDYWxsYmFja3MpIGFk\nYXB0ZXIpLgogICAgICAgICAgICAgICAgICAgIGdldENhbGxiYWNrTWV0aG9k\nKCksIGNhbGxiYWNrLCBfY29uZiwgZ2V0TG9nKCkpOwoKICAgICAgICAgICAg\nfQogICAgICAgICAgICBpZiAoX2NhbGxiYWNrc1tldmVudF0gPT0gbnVsbCkK\nICAgICAgICAgICAgICAgIF9jYWxsYmFja3NbZXZlbnRdID0gbmV3IEFycmF5\nTGlzdDxMaWZlY3ljbGVDYWxsYmFja3M+KDMpOwogICAgICAgICAgICBfY2Fs\nbGJhY2tzW2V2ZW50XS5hZGQoYWRhcHRlcik7CiAgICAgICAgICAgIGlmICgh\nc3lzdGVtICYmIF9saXN0ZW5lciAhPSBudWxsKQogICAgICAgICAgICAgICAg\nX2hpZ2hzW2V2ZW50XSsrOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1\nZTsKICAgIH0KCiAgICAvKioKICAgICAqIFN0b3JlIGxpZmVjeWNsZSBtZXRh\nZGF0YS4KICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIHN0b3JlQ2FsbGJhY2tz\nKENsYXNzTWV0YURhdGEgY2xzKSB7CiAgICAgICAgTGlmZWN5Y2xlTWV0YURh\ndGEgbWV0YSA9IGNscy5nZXRMaWZlY3ljbGVNZXRhRGF0YSgpOwogICAgICAg\nIENsYXNzPD8+IHN1cENscyA9IGNscy5nZXREZXNjcmliZWRUeXBlKCkuZ2V0\nU3VwZXJjbGFzcygpOwogICAgICAgIENvbGxlY3Rpb248TGlmZWN5Y2xlQ2Fs\nbGJhY2tzPltdIHN1cENhbGxzID0gbnVsbDsKICAgICAgICBpZiAoIU9iamVj\ndC5jbGFzcy5lcXVhbHMoc3VwQ2xzKSkgewogICAgICAgICAgICBzdXBDYWxs\ncyA9IEFubm90YXRpb25QZXJzaXN0ZW5jZU1ldGFEYXRhUGFyc2VyLnBhcnNl\nQ2FsbGJhY2tNZXRob2RzCiAgICAgICAgICAgICAgICAoc3VwQ2xzLCBudWxs\nLCB0cnVlLCBmYWxzZSwgX3JlcG9zKTsKICAgICAgICB9CiAgICAgICAgaWYg\nKHN1cENhbGxzICE9IG51bGwpIHsKICAgICAgICAgICAgZm9yIChpbnQgZXZl\nbnQgOiBMaWZlY3ljbGVFdmVudC5BTExfRVZFTlRTKSB7CiAgICAgICAgICAg\nICAgICBpZiAoc3VwQ2FsbHNbZXZlbnRdID09IG51bGwpCiAgICAgICAgICAg\nICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICBtZXRhLnNldE5v\nblBDU3VwZXJjbGFzc0NhbGxiYWNrcyhldmVudCwgc3VwQ2FsbHNbZXZlbnRd\nLnRvQXJyYXkKICAgICAgICAgICAgICAgICAgICAobmV3IExpZmVjeWNsZUNh\nbGxiYWNrc1tzdXBDYWxsc1tldmVudF0uc2l6ZSgpXSksIDApOwogICAgICAg\nICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChfY2FsbGJhY2tzID09IG51\nbGwpCiAgICAgICAgICAgIHJldHVybjsKCiAgICAgICAgZm9yIChpbnQgZXZl\nbnQgOiBMaWZlY3ljbGVFdmVudC5BTExfRVZFTlRTKSB7CiAgICAgICAgICAg\nIGlmIChfY2FsbGJhY2tzW2V2ZW50XSA9PSBudWxsKQogICAgICAgICAgICAg\nICAgY29udGludWU7CiAgICAgICAgICAgIG1ldGEuc2V0RGVjbGFyZWRDYWxs\nYmFja3MoZXZlbnQsIChMaWZlY3ljbGVDYWxsYmFja3NbXSkKICAgICAgICAg\nICAgICAgIF9jYWxsYmFja3NbZXZlbnRdLnRvQXJyYXkKICAgICAgICAgICAg\nICAgICAgICAobmV3IExpZmVjeWNsZUNhbGxiYWNrc1tfY2FsbGJhY2tzW2V2\nZW50XS5zaXplKCldKSwKICAgICAgICAgICAgICAgIF9oaWdoc1tldmVudF0p\nOwogICAgICAgIH0KICAgICAgICBfY2FsbGJhY2tzID0gbnVsbDsKICAgICAg\nICBfaGlnaHMgPSBudWxsOwogICAgfQoKICAgIHByb3RlY3RlZCBib29sZWFu\nIHN0YXJ0T3JkZXJDb2x1bW4oQXR0cmlidXRlcyBhdHRycykKICAgICAgICB0\naHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAg\nIH0KCiAgICAvKioKICAgICAqIEluc3RhbnRpYXRlIHRoZSBnaXZlbiBjbGFz\ncywgdGFraW5nIGludG8gYWNjb3VudCB0aGUgZGVmYXVsdCBwYWNrYWdlLgoJ\nICovCglwcm90ZWN0ZWQgQ2xhc3M8Pz4gY2xhc3NGb3JOYW1lKFN0cmluZyBu\nYW1lKQoJCXRocm93cyBTQVhFeGNlcHRpb24gewoJCWlmICgiRW50aXR5Ii5l\ncXVhbHMobmFtZSkpCgkJCXJldHVybiBQZXJzaXN0ZW5jZUNhcGFibGUuY2xh\nc3M7CgkJcmV0dXJuIHN1cGVyLmNsYXNzRm9yTmFtZShuYW1lLCBpc1J1bnRp\nbWUoKSk7Cgl9CgoJLyoqCgkgKiBQcm9jZXNzIGFsbCBkZWZlcnJlZCBlbWJl\nZGRhYmxlcyB1c2luZyBhbiB1bmtub3duIGFjY2VzcyB0eXBlLgoJICovCglw\ncm90ZWN0ZWQgdm9pZCBhZGREZWZlcnJlZEVtYmVkZGFibGVNZXRhRGF0YSgp\nIHsKCSAgICBpZiAoX2VtYmVkZGFibGVzICE9IG51bGwgJiYgX2VtYmVkZGFi\nbGVzLnNpemUoKSA+IDApIHsKCSAgICAgICAgLy8gUmV2ZXJzZSBpdGVyYXRl\nIHRoZSBhcnJheSBvZiByZW1haW5pbmcgZGVmZXJyZWQgZW1iZWRkYWJsZXMK\nCSAgICAgICAgLy8gc2luY2UgZWxlbWVudHMgd2lsbCBiZSByZW1vdmVkIGFz\nIHRoZXkgYXJlIHByb2Nlc3NlZC4KCSAgICAgICAgQ2xhc3M8Pz5bXSBjbGFz\nc2VzID0gX2VtYmVkZGFibGVzLmtleVNldCgpLnRvQXJyYXkoCgkgICAgICAg\nICAgICBuZXcgQ2xhc3M8Pz5bX2VtYmVkZGFibGVzLnNpemUoKV0pOwoJICAg\nICAgICBmb3IgKGludCBpID0gY2xhc3Nlcy5sZW5ndGggLSAxIDsgaSA+PSAw\nOyBpLS0pIHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAg\nSW50ZWdlciBhY2Nlc3MgPSBfZW1iZWRkYWJsZUFjY2Vzcy5nZXQoY2xhc3Nl\nc1tpXSk7CgkgICAgICAgICAgICAgICAgaWYgKGFjY2VzcyA9PSBudWxsKSB7\nCgkgICAgICAgICAgICAgICAgICAgIGFjY2VzcyA9IEFjY2Vzc0NvZGUuVU5L\nTk9XTjsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYWRk\nRGVmZXJyZWRFbWJlZGRhYmxlTWV0YURhdGEoY2xhc3Nlc1tpXSwKCSAgICAg\nICAgICAgICAgICAgICAgYWNjZXNzKTsKCSAgICAgICAgICAgIH0KCSAgICAg\nICAgICAgIGNhdGNoIChFeGNlcHRpb24gZSkgewoJICAgICAgICAgICAgICAg\nIHRocm93IG5ldyBNZXRhRGF0YUV4Y2VwdGlvbigKCSAgICAgICAgICAgICAg\nICAgICAgX2xvYy5nZXQoIm5vLWVtYmVkZGFibGUtbWV0YWRhdGEiLAoJICAg\nICAgICAgICAgICAgICAgICAgICAgY2xhc3Nlc1tpXS5nZXROYW1lKCkpLCBl\nKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH0JCgl9CgkKICAg\nIC8qKgogICAgICogUHJvY2VzcyBhbGwgZGVmZXJyZWQgZW1iZWRkYWJsZXMg\nYW5kIGVtYmVkZGFibGUgbWFwcGluZyBvdmVycmlkZXMKICAgICAqIGZvciBh\nIGdpdmVuIGNsYXNzLiAgVGhpcyBzaG91bGQgb25seSBoYXBwZW4gYWZ0ZXIg\ndGhlIGFjY2VzcyB0eXBlCiAgICAgKiBvZiB0aGUgZW1iZWRkYWJsZSBpcyBr\nbm93bi4KICAgICAqCiAgICAgKiBAcGFyYW0gZW1iZWRUeXBlIGVtYmVkZGFi\nbGUgY2xhc3MKICAgICAqIEBwYXJhbSBhY2Nlc3MgY2xhc3MgbGV2ZWwgYWNj\nZXNzIGZvciBlbWJlZGRhYmxlCiAgICAgKiBAdGhyb3dzIFNBWEV4Y2VwdGlv\nbgogICAgICovCiAgICBwcm90ZWN0ZWQgdm9pZCBhZGREZWZlcnJlZEVtYmVk\nZGFibGVNZXRhRGF0YShDbGFzczw/PiBlbWJlZFR5cGUsCiAgICAgICAgaW50\nIGFjY2VzcykgdGhyb3dzIFNBWEV4Y2VwdGlvbiB7CiAgICAgICAgQXJyYXlM\naXN0PE1ldGFEYXRhQ29udGV4dD4gZm1kcyA9IF9lbWJlZGRhYmxlcy5nZXQo\nZW1iZWRUeXBlKTsKICAgICAgICBpZiAoZm1kcyAhPSBudWxsICYmIGZtZHMu\nc2l6ZSgpID4gMCkgewogICAgICAgICAgICBmb3IgKE1ldGFEYXRhQ29udGV4\ndCBtZCA6IGZtZHMpIHsKICAgICAgICAgICAgICAgIGlmIChtZCBpbnN0YW5j\nZW9mIEZpZWxkTWV0YURhdGEpIHsKICAgICAgICAgICAgICAgICAgICBGaWVs\nZE1ldGFEYXRhIGZtZCA9IChGaWVsZE1ldGFEYXRhKW1kOwogICAgICAgICAg\nICAgICAgICAgIGZtZC5hZGRFbWJlZGRlZE1ldGFEYXRhKGFjY2Vzcyk7CiAg\nICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmIChtZCBp\nbnN0YW5jZW9mIFZhbHVlTWV0YURhdGEpIHsKICAgICAgICAgICAgICAgICAg\nICBWYWx1ZU1ldGFEYXRhIHZtZCA9IChWYWx1ZU1ldGFEYXRhKW1kOwogICAg\nICAgICAgICAgICAgICAgIHZtZC5hZGRFbWJlZGRlZE1ldGFEYXRhKGFjY2Vz\ncyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAg\nICAgYXBwbHlEZWZlcnJlZEVtYmVkZGFibGVPdmVycmlkZXMoZW1iZWRUeXBl\nKTsKICAgICAgICAgICAgLy8gQ2xlYW4gdXAgZGVmZXJyYWxzIGFmdGVyIHRo\nZXkgaGF2ZSBiZWVuIHByb2Nlc3NlZAogICAgICAgICAgICBmbWRzLmNsZWFy\nKCk7CiAgICAgICAgICAgIF9lbWJlZGRhYmxlcy5yZW1vdmUoZW1iZWRUeXBl\nKTsKICAgICAgICB9CiAgICB9CiAgICBwcm90ZWN0ZWQgdm9pZCBzZXREZWZl\ncnJlZEVtYmVkZGFibGVBY2Nlc3NUeXBlKENsYXNzPD8+IGVtYmVkVHlwZSwK\nICAgICAgICBpbnQgYWNjZXNzKSB7CiAgICAgICAgX2VtYmVkZGFibGVBY2Nl\nc3MucHV0KGVtYmVkVHlwZSwgYWNjZXNzKTsKICAgIH0KCiAgICAvKgogICAg\nICogQ2xlYXIgYW55IGRlZmVycmVkIG1ldGFkYXRhCiAgICAgKi8KICAgIEBP\ndmVycmlkZQogICAgcHJvdGVjdGVkIHZvaWQgY2xlYXJEZWZlcnJlZE1ldGFE\nYXRhKCkgewogICAgICAgIF9lbWJlZGRhYmxlcy5jbGVhcigpOwogICAgICAg\nIF9lbWJlZGRhYmxlQWNjZXNzLmNsZWFyKCk7CiAgICB9CgogICAgLyoKICAg\nICAqIERldGVybWluZXMgd2hldGhlciB0aGUgZW1iZWRkYWJsZSB0eXBlIGlz\nIGRlZmVycmVkLgogICAgICovCiAgICBwcm90ZWN0ZWQgYm9vbGVhbiBpc0Rl\nZmVycmVkRW1iZWRkYWJsZShDbGFzczw/PiBlbWJlZFR5cGUsCiAgICAgICAg\nTWV0YURhdGFDb250ZXh0IGZtZCkgewogICAgICAgIEFycmF5TGlzdDxNZXRh\nRGF0YUNvbnRleHQ+IGZtZHMgPSBfZW1iZWRkYWJsZXMuZ2V0KGVtYmVkVHlw\nZSk7CiAgICAgICAgaWYgKGZtZHMgIT0gbnVsbCkgewogICAgICAgICAgICBy\nZXR1cm4gZm1kcy5jb250YWlucyhmbWQpOwogICAgICAgIH0KICAgICAgICBy\nZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLyoKICAgICAqIEFkZCB0aGUgZm1k\nIHRvIHRoZSBkZWZlciBsaXN0IGZvciBmb3IgdGhlIGdpdmVuIGVtYmVkZGFi\nbGUgdHlwZQogICAgICovCiAgICBwcm90ZWN0ZWQgdm9pZCBkZWZlckVtYmVk\nZGFibGUoQ2xhc3M8Pz4gZW1iZWRUeXBlLCBNZXRhRGF0YUNvbnRleHQgZm1k\nKSB7CiAgICAgICAgQXJyYXlMaXN0PE1ldGFEYXRhQ29udGV4dD4gZm1kcyA9\nIF9lbWJlZGRhYmxlcy5nZXQoZW1iZWRUeXBlKTsKICAgICAgICBpZiAoZm1k\ncyA9PSBudWxsKSB7CiAgICAgICAgICAgIGZtZHMgPSBuZXcgQXJyYXlMaXN0\nPE1ldGFEYXRhQ29udGV4dD4oKTsKICAgICAgICAgICAgX2VtYmVkZGFibGVz\nLnB1dChlbWJlZFR5cGUsIGZtZHMpOwogICAgICAgIH0KICAgICAgICBmbWRz\nLmFkZChmbWQpOwogICAgfQoKICAgIC8qCiAgICAgKiBBcHBseSBhbnkgZGVm\nZXJyZWQgb3ZlcnJpZGVzLgogICAgICovCiAgICBwcm90ZWN0ZWQgdm9pZCBh\ncHBseURlZmVycmVkRW1iZWRkYWJsZU92ZXJyaWRlcyhDbGFzczw/PiBjbHMp\nCiAgICAgICAgdGhyb3dzIFNBWEV4Y2VwdGlvbiB7CiAgICB9CgoJLyoKCSAq\nIEFkZCB0aGUgYXJyYXkgb2YgY2xhc3NlcyB0byB0aGUgYWN0aXZlIHBhcnNl\nIGxpc3QuCgkgKi8KICAgIHB1YmxpYyB2b2lkIGFkZFRvUGFyc2VMaXN0KEFy\ncmF5TGlzdDxDbGFzczw/Pj4gcGFyc2VMaXN0KSB7CiAgICAgICAgaWYgKHBh\ncnNlTGlzdCA9PSBudWxsKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAg\nX3BhcnNlTGlzdC5hZGRBbGwocGFyc2VMaXN0KTsKICAgIH0KCiAgICAvKgog\nICAgICogQWRkIHRoZSBjbGFzcyB0byB0aGUgYWN0aXZlIHBhcnNlIGxpc3Qu\nCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIGFkZFRvUGFyc2VMaXN0KENsYXNz\nPD8+IHBhcmVudENscykgewogICAgICAgIGlmIChwYXJlbnRDbHMgPT0gbnVs\nbCkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIF9wYXJzZUxpc3QuYWRk\nKHBhcmVudENscyk7CiAgICB9CgogICAgLyoKICAgICAqIFdoZXRoZXIgdGhl\nIGFjdGl2ZSBwYXJzZSBsaXN0IGNvbnRhaW5zIHRoZSBzcGVjaWZpZWQgY2xh\nc3MuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIHBhcnNlTGlzdENvbnRh\naW5zKENsYXNzPD8+IGNscykgewogICAgICAgIGlmIChfcGFyc2VMaXN0LnNp\nemUoKSA9PSAwKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAg\ncmV0dXJuIF9wYXJzZUxpc3QuY29udGFpbnMoY2xzKTsKICAgIH0KCiAgICAv\nKgogICAgICogUmV0dXJucyB0aGUgbGlzdCBvZiBjbGFzc2VzIGFjdGl2ZWx5\nIGJlaW5nIHBhcnNlZC4KICAgICAqLwogICAgcHVibGljIEFycmF5TGlzdDxD\nbGFzczw/Pj4gZ2V0UGFyc2VMaXN0KCkgewogICAgICAgIHJldHVybiBfcGFy\nc2VMaXN0OwogICAgfQoKICAgIC8qCiAgICAgKiBSZXR1cm5zIGNsYXNzIGN1\ncnJlbnRseSBiZWluZyBwYXJzZWQuCiAgICAgKi8KICAgIHB1YmxpYyBDbGFz\nczw/PiBnZXRQYXJzZUNsYXNzKCkgewogICAgICAgIHJldHVybiBfY2xzOwog\nICAgfQoKICAgIHByb3RlY3RlZCBib29sZWFuIHN0YXJ0RGVsaW1pdGVkSWRl\nbnRpZmllcnMoKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAg\nCiAgICBwcm90ZWN0ZWQgU3RyaW5nIG5vcm1hbGl6ZVNlcXVlbmNlTmFtZShT\ndHJpbmcgc2VxTmFtZSkgewogICAgICAgIHJldHVybiBzZXFOYW1lOwogICAg\nfQoKICAgIHByb3RlY3RlZCBTdHJpbmcgbm9ybWFsaXplU2NoZW1hTmFtZShT\ndHJpbmcgc2NoTmFtZSkgewogICAgICAgIHJldHVybiBzY2hOYW1lOwogICAg\nfQoKICAgIHByb3RlY3RlZCBTdHJpbmcgbm9ybWFsaXplQ2F0YWxvZ05hbWUo\nU3RyaW5nIGNhdE5hbWUpIHsKICAgICAgICByZXR1cm4gY2F0TmFtZTsKICAg\nIH0KfQo=\n","encoding":"base64"}

