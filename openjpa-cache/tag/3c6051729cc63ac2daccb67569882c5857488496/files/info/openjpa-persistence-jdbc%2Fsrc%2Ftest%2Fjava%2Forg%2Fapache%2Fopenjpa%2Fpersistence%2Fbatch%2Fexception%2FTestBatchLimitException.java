{"sha":"a88d267499b66b7ec86ec7fdece53bba3c18dc58","node_id":"MDQ6QmxvYjIwNjM2NDphODhkMjY3NDk5YjY2YjdlYzg2ZWM3ZmRlY2U1M2JiYTNjMThkYzU4","size":14521,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/a88d267499b66b7ec86ec7fdece53bba3c18dc58","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuYmF0Y2gu\nZXhjZXB0aW9uOwoKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1h\nbmFnZXI7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2Vy\nRmFjdG9yeTsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5jb25m\nLkpEQkNDb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMuc3FsLkRCRGljdGlvbmFyeTsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLnNxbC5PcmFjbGVEaWN0aW9uYXJ5OwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2Vy\nRmFjdG9yeVNQSTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0\nZW5jZS50ZXN0LlBlcnNpc3RlbmNlVGVzdENhc2U7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEudXRpbC5FeGNlcHRpb25JbmZvOwoKLy9UaGlzIHRlc3Qg\nd2FzIGNyZWF0ZWQgZm9yIE9QRU5KUEEtMTU1MC4gIEluIHRoaXMgaXNzdWUg\ndGhlIHVzZXIgd2FzCi8vbm90IGFibGUgdG8gZ2V0IHRoZSAnZmFpbGVkIG9i\namVjdCcgKHRoZSBvYmplY3QgY2F1c2luZyB0aGUgZmFpbHVyZSkgd2hlbgov\nL2JhdGNoIGxpbWl0IHdhcyAtMSBvciBhIHZhbHVlIGdyZWF0ZXIgdGhhbiAx\nLiAgQWxzbywgdGhleSBmb3VuZCB0aGF0IHRoZQovLydwYXJhbXMnIGxpc3Rl\nZCBpbiB0aGUgcHJlcGFyZWQgc3RhdGVtZW50IHdlcmUgbWlzc2luZy4gIFRo\naXMgdGVzdCB3aWxsIHNldAovL3ZhcmlvdXMgYmF0Y2ggbGltaXRzIGFuZCB2\nZXJpZnkgdGhhdCB3aXRoIHRoZSBmaXggdG8gMTU1MCwgdGhlIGNvcnJlY3QK\nLy8nZmFpbGVkIG9iamVjdCcgYW5kIHByZXBhcmVkIHN0YXRlbWVudCBpcyBy\nZXR1cm5lZC4gCnB1YmxpYyBjbGFzcyBUZXN0QmF0Y2hMaW1pdEV4Y2VwdGlv\nbiBleHRlbmRzIFBlcnNpc3RlbmNlVGVzdENhc2UgewoKICAgIHN0YXRpYyBF\nbnQxIGV4cGVjdGVkRmFpbGVkT2JqZWN0OwogICAgc3RhdGljIEVudDEgZXhw\nZWN0ZWRGYWlsZWRPYmplY3RPcmFjbGU7CiAgICBzdGF0aWMgYm9vbGVhbiBp\nc09yYWNsZSA9IGZhbHNlOwogICAgZmluYWwgU3RyaW5nIGV4cGVjdGVkRmFp\nbHVyZU1zZyA9CiAgICAgICAgIklOU0VSVCBJTlRPIEVudDEgKHBrLCBuYW1l\nKSBWQUxVRVMgKD8sID8pIFtwYXJhbXM9KGludCkgMjAwLCAoU3RyaW5nKSB0\nd29odW5kcmVkXSI7CiAgICBmaW5hbCBTdHJpbmcgZXhwZWN0ZWRGYWlsdXJl\nTXNnMTggPQogICAgICAgICJJTlNFUlQgSU5UTyBFbnQxIChwaywgbmFtZSkg\nVkFMVUVTICg/LCA/KSBbcGFyYW1zPShpbnQpIDE4LCAoU3RyaW5nKSBuYW1l\nMThdIjsKICAgIFN0cmluZyBleHBlY3RlZEZhaWx1cmVNc2dPcmFjbGUgPSBl\neHBlY3RlZEZhaWx1cmVNc2cxODsKCiAgICBwdWJsaWMgRW50aXR5TWFuYWdl\nckZhY3RvcnkgbmV3RW1mKFN0cmluZyBiYXRjaExpbWl0KSB7CiAgICAgICAg\nT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5U1BJIGVtZiA9CiAgICAgICAg\nICAgIGNyZWF0ZUVNRihFbnQxLmNsYXNzLCAKICAgICAgICAgICAgICAgICJv\ncGVuanBhLmpkYmMuU3luY2hyb25pemVNYXBwaW5ncyIsIAogICAgICAgICAg\nICAgICAgImJ1aWxkU2NoZW1hKEZvcmVpZ25LZXlzPXRydWUpIiwKICAgICAg\nICAgICAgICAgICJvcGVuanBhLmpkYmMuREJEaWN0aW9uYXJ5IiwgYmF0Y2hM\naW1pdCwgCiAgICAgICAgICAgICAgICBDTEVBUl9UQUJMRVMpOwoKICAgICAg\nICBhc3NlcnROb3ROdWxsKCJVbmFibGUgdG8gY3JlYXRlIEVudGl0eU1hbmFn\nZXJGYWN0b3J5IiwgZW1mKTsKICAgICAgICBKREJDQ29uZmlndXJhdGlvbiBj\nb25mID0gKEpEQkNDb25maWd1cmF0aW9uKSBlbWYuZ2V0Q29uZmlndXJhdGlv\nbigpOwogICAgICAgIERCRGljdGlvbmFyeSBkaWN0ID0gY29uZi5nZXREQkRp\nY3Rpb25hcnlJbnN0YW5jZSgpOwogICAgICAgIGlzT3JhY2xlID0gZGljdCBp\nbnN0YW5jZW9mIE9yYWNsZURpY3Rpb25hcnk7CiAgICAgICAgcmV0dXJuIGVt\nZjsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpIHsKICAgICAgICBl\neHBlY3RlZEZhaWxlZE9iamVjdCA9IG51bGw7CiAgICAgICAgZXhwZWN0ZWRG\nYWlsZWRPYmplY3RPcmFjbGUgPSBudWxsOwogICAgfQoKICAgIC8vIFRlc3Qg\ndGhhdCB3ZSBnZXQgdGhlIGNvcnJlY3QgJ2ZhaWxlZCBvYmplY3QnIHdoZW4g\nd2UgaGF2ZSBhIGJhdGNoTGltdAogICAgLy8gb2YgWCBhbmQgWSByb3dzLCB3\naGVyZSBYPlkuIEEgZHVwbGljYXRlIHJvdyB3aWxsIGJlIGluc2VydGVkCiAg\nICAvLyBzb21ldGltZSB3aXRoaW4gdGhlIFkgcm93cy4gVGhpcyB3aWxsIHZl\ncmlmeSB0aGF0IHdlIGdldCB0aGUgcmlnaHQKICAgIC8vICdmYWlsZWQgb2Jq\nZWN0JyBhbmQgbWVzc2FnZS4KICAgIHB1YmxpYyB2b2lkIHRlc3RFeGNlcHRp\nb25JbkZpcnN0QmF0Y2goKSB0aHJvd3MgVGhyb3dhYmxlIHsKICAgICAgICBF\nbnRpdHlNYW5hZ2VyRmFjdG9yeSBlbWYgPSBuZXdFbWYoImJhdGNoTGltaXQ9\nLTEiKTsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVu\ndGl0eU1hbmFnZXIoKTsKCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5i\nZWdpbigpOwogICAgICAgIGVtLnBlcnNpc3QobmV3IEVudDEoMSwgIm9uZSIp\nKTsKICAgICAgICBleHBlY3RlZEZhaWxlZE9iamVjdCA9IG5ldyBFbnQxKDIw\nMCwgInR3b2h1bmRyZWQiKTsKICAgICAgICBlbS5wZXJzaXN0KGV4cGVjdGVk\nRmFpbGVkT2JqZWN0KTsKICAgICAgICBlbS5wZXJzaXN0KG5ldyBFbnQxKDUs\nICJmaXZlIikpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0\nKCk7CiAgICAgICAgZW0uY2xvc2UoKTsKCiAgICAgICAgRW50aXR5TWFuYWdl\nciBlbTIgPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwoKICAgICAgICBl\nbTIuZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIC8vIHNwZWNp\nYWwgY2FzZSwgZHVlIHRvIGhvdyBPcmFjbGUgcmV0dXJucyBhbGwgc3RhdGVt\nZW50cyBpbiB0aGUgYmF0Y2gKICAgICAgICBleHBlY3RlZEZhaWxlZE9iamVj\ndE9yYWNsZSA9IG5ldyBFbnQxKDE4LCAibmFtZTE4Iik7CiAgICAgICAgZXhw\nZWN0ZWRGYWlsdXJlTXNnT3JhY2xlID0gZXhwZWN0ZWRGYWlsdXJlTXNnMTg7\nCiAgICAgICAgZW0yLnBlcnNpc3QoZXhwZWN0ZWRGYWlsZWRPYmplY3RPcmFj\nbGUpOwogICAgICAgIGVtMi5wZXJzaXN0KG5ldyBFbnQxKDIsICJ0d28iKSk7\nCiAgICAgICAgZW0yLnBlcnNpc3QobmV3IEVudDEoMjAwLCAidHdvaHVuZHJl\nZCIpKTsKICAgICAgICBlbTIucGVyc2lzdChuZXcgRW50MSgzLCAidGhyZWUi\nKSk7CiAgICAgICAgZW0yLnBlcnNpc3QobmV3IEVudDEoMSwgIm9uZSIpKTsK\nICAgICAgICBlbTIucGVyc2lzdChuZXcgRW50MSg1LCAiZml2ZSIpKTsKICAg\nICAgICAKICAgICAgICB0cnkgewogICAgICAgICAgICBlbTIuZ2V0VHJhbnNh\nY3Rpb24oKS5jb21taXQoKTsKICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUg\nZXhjcCkgewogICAgICAgICAgICB2ZXJpZnlFeERldGFpbHMoZXhjcCk7CiAg\nICAgICAgfQogICAgICAgIGZpbmFsbHkgewogICAgICAgICAgICBpZiAoZW0y\nLmdldFRyYW5zYWN0aW9uKCkuaXNBY3RpdmUoKSkgewogICAgICAgICAgICAg\nICAgZW0yLmdldFRyYW5zYWN0aW9uKCkucm9sbGJhY2soKTsKICAgICAgICAg\nICAgfQogICAgICAgICAgICBlbTIuY2xvc2UoKTsKICAgICAgICAgICAgZW1m\nLmNsb3NlKCk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIFRlc3QgdGhhdCB3\nZSBnZXQgdGhlIGNvcnJlY3QgJ2ZhaWxlZCBvYmplY3QnIHdoZW4gdGhlcmUg\naXMgb25seSBvbmUKICAgIC8vIHJvdyBpbiB0aGUgYmF0Y2guIFRoZSAnYmF0\nY2hpbmcnIGxvZ2ljIGV4ZWN1dGVzIGEgZGlmZmVyZW50CiAgICAvLyBzdGF0\nZW1lbnQgd2hlbiBvbmx5IG9uZSByb3cgaXMgdG8gYmUgdXBkYXRlZC9pbnNl\ncnRlZC4KICAgIHB1YmxpYyB2b2lkIHRlc3RFeGNlcHRpb25TaW5nbGVCYXRj\naGVkUm93KCkgdGhyb3dzIFRocm93YWJsZSB7CiAgICAgICAgRW50aXR5TWFu\nYWdlckZhY3RvcnkgZW1mID0gbmV3RW1mKCJiYXRjaExpbWl0PS0xIik7CiAg\nICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CgogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsK\nICAgICAgICBleHBlY3RlZEZhaWxlZE9iamVjdCA9IG5ldyBFbnQxKDIwMCwg\nInR3b2h1bmRyZWQiKTsKICAgICAgICBleHBlY3RlZEZhaWxlZE9iamVjdE9y\nYWNsZSA9IGV4cGVjdGVkRmFpbGVkT2JqZWN0OwogICAgICAgIGV4cGVjdGVk\nRmFpbHVyZU1zZ09yYWNsZSA9IGV4cGVjdGVkRmFpbHVyZU1zZzsKICAgICAg\nICBlbS5wZXJzaXN0KGV4cGVjdGVkRmFpbGVkT2JqZWN0KTsKICAgICAgICBl\nbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3Nl\nKCk7CgogICAgICAgIEVudGl0eU1hbmFnZXIgZW0yID0gZW1mLmNyZWF0ZUVu\ndGl0eU1hbmFnZXIoKTsKCiAgICAgICAgZW0yLmdldFRyYW5zYWN0aW9uKCku\nYmVnaW4oKTsKICAgICAgICBlbTIucGVyc2lzdChuZXcgRW50MSgyMDAsICJ0\nd29odW5kcmVkIikpOwogICAgICAgIAogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIGVtMi5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIH0g\nY2F0Y2ggKFRocm93YWJsZSBleGNwKSB7CiAgICAgICAgICAgIHZlcmlmeUV4\nRGV0YWlscyhleGNwKTsKICAgICAgICB9CiAgICAgICAgZmluYWxseSB7CiAg\nICAgICAgICAgIGlmIChlbTIuZ2V0VHJhbnNhY3Rpb24oKS5pc0FjdGl2ZSgp\nKSB7CiAgICAgICAgICAgICAgICBlbTIuZ2V0VHJhbnNhY3Rpb24oKS5yb2xs\nYmFjaygpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVtMi5jbG9zZSgp\nOwogICAgICAgICAgICBlbWYuY2xvc2UoKTsKICAgICAgICB9CiAgICB9Cgog\nICAgLy8gVGVzdCB0aGF0IHdlIGdldCB0aGUgY29ycmVjdCAnZmFpbGVkIG9i\namVjdCcgYW5kIG1lc3NhZ2Ugd2hlbiB3ZQogICAgLy8gaGF2ZSBhIGJhdGNo\nTGltdCBvZiBYIGFuZCBZIHJvd3MsIHdoZXJlIFk+WC4gSW4gdGhpcyBjYXNl\nLCB0aGUKICAgIC8vIGJhdGNoIGlzIGV4ZWN1dGVkIGV2ZXJ5IHRpbWUgdGhl\nIGJhdGNoTGltdCBpcyBoaXQuIEEgZHVwbGljYXRlCiAgICAvLyByb3cgd2ls\nbCBiZSBpbnNlcnRlZCBzb21ldGltZSBhZnRlciBYIChYKzEsIGkuZSByaWdo\ndCBhdCB0aGUKICAgIC8vIGJvdW5kYXJ5IG9mIHRoZSBiYXRjaCkgdG8gdmVy\naWZ5IHRoYXQgd2UgZ2V0IHRoZSByaWdodAogICAgLy8gJ2ZhaWxlZCBvYmpl\nY3QnIGFuZCBtc2cgbm8gbWF0dGVyIHdoaWNoIGJhdGNoIGEgZHVwbGljYXRl\nIGlzCiAgICAvLyBjb250YWluZWQgaW4uIFRoaXMgdGVzdCBpcyBpbXBvcnRh\nbnQgYmVjYXVzZSBhcyBwYXJ0IG9mIHRoZQogICAgLy8gZml4IHRvIE9QRU5K\nUEEtMTUxMCB3ZSBoYWQgdG8gYWRkIGV4dHJhIGxvZ2ljIHRvIGtlZXAgdHJh\nY2sKICAgIC8vIG9mIHdoaWNoIGJhdGNoIHRoZSAnZmFpbGVkIG9iamVjdCcg\nd2FzIGluLCBhbG9uZyB3aXRoIHRoZQogICAgLy8gaW5kZXggaW50byB0aGF0\nIGJhdGNoLgogICAgcHVibGljIHZvaWQgdGVzdEV4Y2VwdGlvbkluU2Vjb25k\nQmF0Y2goKSB0aHJvd3MgVGhyb3dhYmxlIHsKICAgICAgICBFbnRpdHlNYW5h\nZ2VyRmFjdG9yeSBlbWYgPSBuZXdFbWYoImJhdGNoTGltaXQ9OSIpOwogICAg\nICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdl\ncigpOwoKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAg\nICAgICAgZXhwZWN0ZWRGYWlsZWRPYmplY3QgPSBuZXcgRW50MSgyMDAsICJ0\nd29odW5kcmVkIik7CiAgICAgICAgZXhwZWN0ZWRGYWlsZWRPYmplY3RPcmFj\nbGUgPSBleHBlY3RlZEZhaWxlZE9iamVjdDsKICAgICAgICBleHBlY3RlZEZh\naWx1cmVNc2dPcmFjbGUgPSBleHBlY3RlZEZhaWx1cmVNc2c7CiAgICAgICAg\nZW0ucGVyc2lzdChleHBlY3RlZEZhaWxlZE9iamVjdCk7CiAgICAgICAgZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgp\nOwoKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtMiA9IGVtZi5jcmVhdGVFbnRp\ndHlNYW5hZ2VyKCk7CgogICAgICAgIGVtMi5nZXRUcmFuc2FjdGlvbigpLmJl\nZ2luKCk7CgogICAgICAgIC8vIFB1dCA5IG9iamVjdHMvcm93cyBpbnRvIHRo\nZSBiYXRjaAogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgOTsgaSsrKSB7\nCiAgICAgICAgICAgIGVtMi5wZXJzaXN0KG5ldyBFbnQxKGksICJuYW1lIiAr\nIGkpKTsKICAgICAgICB9CgogICAgICAgIC8vIFB1dCB0aGUgZHVwbGljYXRl\nIG9iamVjdC9yb3cgYXMgdGhlIGZpcnN0IGVsZW1lbnQgaW4gdGhlIHNlY29u\nZCBiYXRjaC4KICAgICAgICBlbTIucGVyc2lzdChuZXcgRW50MSgyMDAsICJ0\nd29odW5kcmVkIikpOwogICAgICAgIAogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIGVtMi5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIH0g\nY2F0Y2ggKFRocm93YWJsZSBleGNwKSB7CiAgICAgICAgICAgIHZlcmlmeUV4\nRGV0YWlscyhleGNwKTsKICAgICAgICB9CiAgICAgICAgZmluYWxseSB7CiAg\nICAgICAgICAgIGlmIChlbTIuZ2V0VHJhbnNhY3Rpb24oKS5pc0FjdGl2ZSgp\nKSB7CiAgICAgICAgICAgICAgICBlbTIuZ2V0VHJhbnNhY3Rpb24oKS5yb2xs\nYmFjaygpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVtMi5jbG9zZSgp\nOwogICAgICAgICAgICBlbWYuY2xvc2UoKTsKICAgICAgICB9CiAgICB9Cgog\nICAgLy8gU2FtZSBhcyB0ZXN0Um93c0dyZWF0ZXJUaGFuQmF0Y2hMaW1pdF9i\nb3VuZGFyeUNhc2UsIGJ1dCB0aGUgb2JqZWN0IHRvIGNhdXNlIHRoZSBmYWls\ndXJlCiAgICAvLyBpcyBpbiB0aGUgbWlkZGxlIG9mIHRoZSBzZWNvbmQgYmF0\nY2guIHRlc3RFeGNlcHRpb25pblNlY29uZEJhdGNoIHB1dHMKICAgIC8vIHRo\nZSBmYWlsaW5nIG9iamVjdCBhcyB0aGUgZmlyc3QgZWxlbWVudCBpbiB0aGUg\nc2Vjb25kIGJhdGNoLCB0aGlzIHRlc3QgcHV0cwogICAgLy8gaXQgc29tZXdo\nZXJlIGluIHRoZSBtaWRkbGUgb2YgdGhlIHRoaXJkIGJhdGNoLiBBZ2Fpbiwg\nd2Ugd2FudCB0byBtYWtlIHN1cmUgb3VyCiAgICAvLyBpbmRleGluZyBpbnRv\nIHRoZSBiYXRjaCBjb250YWluaW5nIHRoZSAnZmFpbGVkIG9iamVjdCcgaXMg\nY29ycmVjdC4KICAgIHB1YmxpYyB2b2lkIHRlc3RFeGNlcHRpb25JblRoaXJk\nQmF0Y2goKSB0aHJvd3MgVGhyb3dhYmxlIHsKICAgICAgICBmaW5hbCBpbnQg\nYmF0Y2hMaW1pdD05OwogICAgICAgIEVudGl0eU1hbmFnZXJGYWN0b3J5IGVt\nZiA9IG5ld0VtZigiYmF0Y2hMaW1pdD0iK2JhdGNoTGltaXQpOwogICAgICAg\nIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigp\nOwoKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAg\nICAgZXhwZWN0ZWRGYWlsZWRPYmplY3QgPSBuZXcgRW50MSgyMDAsICJ0d29o\ndW5kcmVkIik7CiAgICAgICAgZW0ucGVyc2lzdChleHBlY3RlZEZhaWxlZE9i\namVjdCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsK\nICAgICAgICBlbS5jbG9zZSgpOwoKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVt\nMiA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CgogICAgICAgIGVtMi5n\nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CgogICAgICAgIC8vIFBlcnNpc3Qg\nMjEgb2JqZWN0cy9yb3dzLi4uLmFzIHN1Y2ggd2Ugd2lsbCBoYXZlIHR3byAn\nZnVsbCcKICAgICAgICAvLyBiYXRjaGVzICg5KjI9MTgpIGFuZCAzICgyMS0x\nOD0zKSBvYmplY3RzL3Jvd3MgaW4gdGhlIDNyZCBiYXRjaC4KICAgICAgICBp\nbnQgaT0wOwogICAgICAgIGZvciAoOyBpIDwgMipiYXRjaExpbWl0OyBpKysp\nIHsKICAgICAgICAgICAgZW0yLnBlcnNpc3QobmV3IEVudDEoaSwgIm5hbWUi\nICsgaSkpOwogICAgICAgIH0KCiAgICAgICAgLy8gbWFudWFsbHkgY3JlYXRl\nIHRoaXJkIGJhdGNoLCBkdWUgdG8gaG93IE9yYWNsZSByZXR1cm5zIGFsbCBz\ndGF0ZW1lbnRzIGluIHRoZSBiYXRjaAogICAgICAgIGV4cGVjdGVkRmFpbGVk\nT2JqZWN0T3JhY2xlID0gbmV3IEVudDEoaSwgIm5hbWUiICsgaSsrKTsKICAg\nICAgICBleHBlY3RlZEZhaWx1cmVNc2dPcmFjbGUgPSBleHBlY3RlZEZhaWx1\ncmVNc2cxODsKICAgICAgICBlbTIucGVyc2lzdChleHBlY3RlZEZhaWxlZE9i\namVjdE9yYWNsZSk7ICAgIC8vIDE4CiAgICAgICAgZW0yLnBlcnNpc3QobmV3\nIEVudDEoaSwgIm5hbWUiICsgaSsrKSk7ICAgICAvLyAxOQogICAgICAgIGVt\nMi5wZXJzaXN0KG5ldyBFbnQxKGksICJuYW1lIiArIGkrKykpOyAgICAgLy8g\nMjAKICAgICAgICBlbTIucGVyc2lzdChuZXcgRW50MShpLCAibmFtZSIgKyBp\nKyspKTsgICAgIC8vIDIxICAgICAgICAKICAgICAgICAvLyBQdXQgdGhlIGR1\ncGxpY2F0ZSByb3cgaW4gdGhlIDNyZCBiYXRjaC4KICAgICAgICBlbTIucGVy\nc2lzdChuZXcgRW50MSgyMDAsICJ0d29odW5kcmVkIikpOwogICAgICAgIC8v\nIFB1dCBhIGZldyBtb3JlIG9iamVjdHMgaW50byB0aGUgYmF0Y2guCiAgICAg\nICAgZm9yIChpID0gMjI7IGkgPCA0KmJhdGNoTGltaXQ7IGkrKykgewogICAg\nICAgICAgICBlbTIucGVyc2lzdChuZXcgRW50MShpLCAibmFtZSIgKyBpKSk7\nCiAgICAgICAgfQoKICAgICAgICB0cnkgewogICAgICAgICAgICBlbTIuZ2V0\nVHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICB9IGNhdGNoIChUaHJv\nd2FibGUgZXhjcCkgewogICAgICAgICAgICB2ZXJpZnlFeERldGFpbHMoZXhj\ncCk7CiAgICAgICAgfQogICAgICAgIGZpbmFsbHkgewogICAgICAgICAgICBp\nZiAoZW0yLmdldFRyYW5zYWN0aW9uKCkuaXNBY3RpdmUoKSkgewogICAgICAg\nICAgICAgICAgZW0yLmdldFRyYW5zYWN0aW9uKCkucm9sbGJhY2soKTsKICAg\nICAgICAgICAgfQogICAgICAgICAgICBlbTIuY2xvc2UoKTsKICAgICAgICAg\nICAgZW1mLmNsb3NlKCk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIFNpbWls\nYXIgdG8gdGhlIHByZXZpb3VzIHR3byB0ZXN0cywgYnV0IGxldHMgcnVuIHRo\nZSB0ZXN0IHdpdGggYSBsYXJnZQogICAgLy8gYmF0Y2ggd2l0aCBhIGZhaWx1\ncmUsIGFuZCB0aGVuIGNvbW1pdCwgdGhlbiBydW4gbGFyZ2UgYmF0Y2hlcwog\nICAgLy8gYWdhaW4gd2l0aCBmYWlsdXJlcyBhZ2Fpbi4uLi4uanVzdCB3YW50\nIHRvIG1ha2Ugc3VyZSB0aGluZ3MgYXJlIG5vdCBpbgogICAgLy8gc29tZSB3\nYXkgJ3JlLXVzZWQnIGJldHdlZW4gdGhlIHR3byBjb21taXRzIGFzIGZhciBh\ncyB0aGUgaW5kZXhlcyBnby4KICAgIHB1YmxpYyB2b2lkIHRlc3RTZWNvbmRF\neGNlcHRpb25IYXNSaWdodEluZGV4KCkgdGhyb3dzIFRocm93YWJsZSB7CiAg\nICAgICAgZmluYWwgaW50IGJhdGNoTGltaXQ9OTsKCiAgICAgICAgdGVzdEV4\nY2VwdGlvbkluVGhpcmRCYXRjaCgpOwoKICAgICAgICBFbnRpdHlNYW5hZ2Vy\nRmFjdG9yeSBlbWYgPSBuZXdFbWYoImJhdGNoTGltaXQ9OSIpOwogICAgICAg\nIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigp\nOwoKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CgogICAg\nICAgIGZvciAoaW50IGkgPSA0KmJhdGNoTGltaXQ7IGkgPCA1KmJhdGNoTGlt\naXQ7IGkrKykgewogICAgICAgICAgICBlbS5wZXJzaXN0KG5ldyBFbnQxKGks\nICJuYW1lIiArIGkpKTsKICAgICAgICB9CgogICAgICAgIC8vIG1hbnVhbGx5\nIGNhcHR1cmUgc3RhcnQgb2YgYmF0Y2gsIGR1ZSB0byBob3cgT3JhY2xlIHJl\ndHVybnMgYWxsIHN0YXRlbWVudHMgaW4gdGhlIGJhdGNoCiAgICAgICAgZXhw\nZWN0ZWRGYWlsZWRPYmplY3RPcmFjbGUgPSBuZXcgRW50MSgyMDAsICJ0d29o\ndW5kcmVkIik7CiAgICAgICAgZXhwZWN0ZWRGYWlsdXJlTXNnT3JhY2xlID0g\nZXhwZWN0ZWRGYWlsdXJlTXNnOwogICAgICAgIGVtLnBlcnNpc3QoZXhwZWN0\nZWRGYWlsZWRPYmplY3RPcmFjbGUpOwoKICAgICAgICBmb3IgKGludCBpID0g\nNSpiYXRjaExpbWl0OyBpIDwgNypiYXRjaExpbWl0OyBpKyspIHsKICAgICAg\nICAgICAgZW0ucGVyc2lzdChuZXcgRW50MShpLCAibmFtZSIgKyBpKSk7CiAg\nICAgICAgfQoKICAgICAgICB0cnkgewogICAgICAgICAgICBlbS5nZXRUcmFu\nc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIH0gY2F0Y2ggKFRocm93YWJs\nZSBleGNwKSB7CiAgICAgICAgICAgIHZlcmlmeUV4RGV0YWlscyhleGNwKTsK\nICAgICAgICB9CiAgICAgICAgZmluYWxseSB7CiAgICAgICAgICAgIGlmIChl\nbS5nZXRUcmFuc2FjdGlvbigpLmlzQWN0aXZlKCkpIHsKICAgICAgICAgICAg\nICAgIGVtLmdldFRyYW5zYWN0aW9uKCkucm9sbGJhY2soKTsKICAgICAgICAg\nICAgfQogICAgICAgICAgICBlbS5jbG9zZSgpOwogICAgICAgICAgICBlbWYu\nY2xvc2UoKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVz\ndEV4Y2VwdGlvbldpdGhNdWx0aXBsZUNvbW1pdHMoKSB0aHJvd3MgVGhyb3dh\nYmxlIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyRmFjdG9yeSBlbWYgPSBuZXdF\nbWYoImJhdGNoTGltaXQ9LTEiKTsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVt\nID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKCiAgICAgICAgZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIGVtLnBlcnNpc3QobmV3\nIEVudDEoMSwgIm9uZSIpKTsKICAgICAgICBleHBlY3RlZEZhaWxlZE9iamVj\ndCA9IG5ldyBFbnQxKDIwMCwgInR3b2h1bmRyZWQiKTsKICAgICAgICBlbS5w\nZXJzaXN0KGV4cGVjdGVkRmFpbGVkT2JqZWN0KTsKICAgICAgICBlbS5wZXJz\naXN0KG5ldyBFbnQxKDUsICJmaXZlIikpOwogICAgICAgIGVtLmdldFRyYW5z\nYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKCiAgICAg\nICAgRW50aXR5TWFuYWdlciBlbTIgPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdl\ncigpOwogICAgICAgIGVtMi5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAg\nICAgICAgZW0yLnBlcnNpc3QobmV3IEVudDEoNCwgImZvdXIiKSk7CiAgICAg\nICAgZW0yLnBlcnNpc3QobmV3IEVudDEoMCwgInplcm8iKSk7CiAgICAgICAg\nZW0yLnBlcnNpc3QobmV3IEVudDEoMiwgInR3byIpKTsKICAgICAgICBlbTIu\ncGVyc2lzdChuZXcgRW50MSgzLCAidGhyZWUiKSk7CiAgICAgICAgZW0yLmdl\ndFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CgogICAgICAgIGVtMi5nZXRUcmFu\nc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgLy8gc3BlY2lhbCBjYXNlLCBk\ndWUgdG8gaG93IE9yYWNsZSByZXR1cm5zIGFsbCBzdGF0ZW1lbnRzIGluIHRo\nZSBiYXRjaAogICAgICAgIGV4cGVjdGVkRmFpbGVkT2JqZWN0T3JhY2xlID0g\nbmV3IEVudDEoMTgsICJuYW1lMTgiKTsKICAgICAgICBleHBlY3RlZEZhaWx1\ncmVNc2dPcmFjbGUgPSBleHBlY3RlZEZhaWx1cmVNc2cxODsKICAgICAgICBl\nbTIucGVyc2lzdChleHBlY3RlZEZhaWxlZE9iamVjdE9yYWNsZSk7CiAgICAg\nICAgZW0yLnBlcnNpc3QobmV3IEVudDEoNiwgInNpeCIpKTsKICAgICAgICBl\nbTIucGVyc2lzdChuZXcgRW50MSgyMDAsICJ0d29odW5kcmVkIikpOwogICAg\nICAgIGVtMi5wZXJzaXN0KG5ldyBFbnQxKDcsICJzZXZlbiIpKTsKICAgICAg\nICAKICAgICAgICB0cnkgewogICAgICAgICAgICBlbTIuZ2V0VHJhbnNhY3Rp\nb24oKS5jb21taXQoKTsKICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUgZXhj\ncCkgewogICAgICAgICAgICB2ZXJpZnlFeERldGFpbHMoZXhjcCk7CiAgICAg\nICAgfQogICAgICAgIGZpbmFsbHkgewogICAgICAgICAgICBpZiAoZW0yLmdl\ndFRyYW5zYWN0aW9uKCkuaXNBY3RpdmUoKSkgewogICAgICAgICAgICAgICAg\nZW0yLmdldFRyYW5zYWN0aW9uKCkucm9sbGJhY2soKTsKICAgICAgICAgICAg\nfQogICAgICAgICAgICBlbTIuY2xvc2UoKTsKICAgICAgICAgICAgZW1mLmNs\nb3NlKCk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIFZlcmlmeSB0aGF0IHRo\nZSByZXN1bHRhbnQgZXhjZXB0aW9uIGNvbnRhaW5zIHRoZSBjb3JyZWN0ICdm\nYWlsZWQgb2JqZWN0JwogICAgLy8gYW5kIGV4Y2VwdGlvbiBtZXNzYWdlLgog\nICAgcHVibGljIHZvaWQgdmVyaWZ5RXhEZXRhaWxzKFRocm93YWJsZSBleGNw\nKSB0aHJvd3MgVGhyb3dhYmxlIHsKICAgICAgICAvLyBUaGUgZXhjZXB0aW9u\nIHNob3VsZCBjb250YWluIHRoZSAnZmFpbGVkIG9iamVjdCcKICAgICAgICB2\nZXJpZnlGYWlsZWRPYmplY3QoZXhjcCk7CiAgICAgICAgLy8gVGhlIHNlY29u\nZCBjYXVzZSBzaG91bGQgY29udGFpbiB0aGUgbWVzc2FnZSB3aGljaCBzaG93\ncyB0aGUgZmFpbGluZyBwcmVwYXJlZCBzdGF0ZW1lbnQuCiAgICAgICAgVGhy\nb3dhYmxlIGNhdXNlID0gZXhjcC5nZXRDYXVzZSgpLmdldENhdXNlKCk7CiAg\nICAgICAgdmVyaWZ5RXhNc2coY2F1c2UuZ2V0TWVzc2FnZSgpKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCB2ZXJpZnlGYWlsZWRPYmplY3QoVGhyb3dhYmxl\nIGV4Y3ApIHRocm93cyBUaHJvd2FibGUgewogICAgICAgIGlmIChleGNwIGlu\nc3RhbmNlb2YgRXhjZXB0aW9uSW5mbykgewogICAgICAgICAgICBFeGNlcHRp\nb25JbmZvIGUgPSAoRXhjZXB0aW9uSW5mbykgZXhjcDsKCiAgICAgICAgICAg\nIEVudDEgZmFpbGVkT2JqZWN0ID0gKEVudDEpIGUuZ2V0RmFpbGVkT2JqZWN0\nKCk7CgogICAgICAgICAgICBhc3NlcnROb3ROdWxsKCJGYWlsZWQgb2JqZWN0\nIHdhcyBudWxsLiIsIGZhaWxlZE9iamVjdCk7CiAgICAgICAgICAgIGlmICgh\naXNPcmFjbGUpIHsKICAgICAgICAgICAgICAgIGFzc2VydEVxdWFscyhleHBl\nY3RlZEZhaWxlZE9iamVjdCwgZmFpbGVkT2JqZWN0KTsKICAgICAgICAgICAg\nfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIHNwZWNpYWwgY2FzZSwgYXMg\nT3JhY2xlIHJldHVybnMgYWxsIHN0YXRlbWVudHMgaW4gdGhlIGJhdGNoCiAg\nICAgICAgICAgICAgICBhc3NlcnRFcXVhbHMoZXhwZWN0ZWRGYWlsZWRPYmpl\nY3RPcmFjbGUsIGZhaWxlZE9iamVjdCk7ICAgICAgICAgICAgICAgIAogICAg\nICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAg\nICB0aHJvdyBleGNwOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCB2ZXJpZnlFeE1zZyhTdHJpbmcgbXNnKSB7CiAgICAgICAgYXNzZXJ0Tm90\nTnVsbCgiRXhjZXB0aW9uIG1lc3NhZ2Ugd2FzIG51bGwuIiwgbXNnKTsKICAg\nICAgICBpZiAoIWlzT3JhY2xlKSB7CiAgICAgICAgICAgIGFzc2VydFRydWUo\nIkRpZCBub3Qgc2VlIGV4cGVjdGVkIHRleHQgaW4gbWVzc2FnZS4gRXhwZWN0\nZWQgPCIgKyBleHBlY3RlZEZhaWx1cmVNc2cgKyAiPiBidXQgd2FzICIgKwog\nICAgICAgICAgICAgICAgbXNnLCBtc2cuY29udGFpbnMoZXhwZWN0ZWRGYWls\ndXJlTXNnKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gc3Bl\nY2lhbCBjYXNlLCBhcyBPcmFjbGUgcmV0dXJucyBhbGwgc3RhdGVtZW50cyBp\nbiB0aGUgYmF0Y2gKICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgiRGlkIG5vdCBz\nZWUgZXhwZWN0ZWQgdGV4dCBpbiBtZXNzYWdlLiBFeHBlY3RlZCA8IiArIGV4\ncGVjdGVkRmFpbHVyZU1zZ09yYWNsZSArICI+IGJ1dCB3YXMgIiArCiAgICAg\nICAgICAgICAgICBtc2csIG1zZy5jb250YWlucyhleHBlY3RlZEZhaWx1cmVN\nc2dPcmFjbGUpKTsKICAgICAgICB9CiAgICB9Cn0KCg==\n","encoding":"base64"}

