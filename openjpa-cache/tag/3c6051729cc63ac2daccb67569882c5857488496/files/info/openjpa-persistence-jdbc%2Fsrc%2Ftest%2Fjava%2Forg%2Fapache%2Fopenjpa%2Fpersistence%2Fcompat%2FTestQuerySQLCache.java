{"sha":"30691e538c0df99512a38f50c03bbf5a16b59b63","node_id":"MDQ6QmxvYjIwNjM2NDozMDY5MWU1MzhjMGRmOTk1MTJhMzhmNTBjMDNiYmY1YTE2YjU5YjYz","size":9867,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/30691e538c0df99512a38f50c03bbf5a16b59b63","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY29tcGF0\nOwoKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOwppbXBvcnQgamF2YS51\ndGlsLkhhc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuTWFwOwppbXBvcnQgamF2\nYXgucGVyc2lzdGVuY2UuRW50aXR5TWFuYWdlcjsKaW1wb3J0IGphdmF4LnBl\ncnNpc3RlbmNlLkVudGl0eU1hbmFnZXJGYWN0b3J5OwppbXBvcnQgamF2YXgu\ncGVyc2lzdGVuY2UuUGVyc2lzdGVuY2U7CgppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXJJbXBsOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlN\nYW5hZ2VyRmFjdG9yeVNQSTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5w\nZXJzaXN0ZW5jZS5PcGVuSlBBUGVyc2lzdGVuY2U7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UucmVsYXRpb25zLlRibENoaWxkOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnJlbGF0aW9u\ncy5UYmxHcmFuZENoaWxkOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBl\ncnNpc3RlbmNlLnJlbGF0aW9ucy5UYmxQYXJlbnQ7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uuc2ltcGxlLlBlcnNvbjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS50ZXN0LkFsbG93RmFp\nbHVyZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS50\nZXN0LlNpbmdsZUVNRlRlc3RDYXNlOwoKLyoqCiAqIDxiPlRlc3RRdWVyeVNR\nTENhY2hlPC9iPiBpcyB1c2VkIHRvIHZlcmlmeSBtdWx0aXBsZSBwZXJtdXRh\ndGlvbnMgb2Ygb3BlbmpwYS5qZGJjLlF1ZXJ5U1FMQ2FjaGUgc2V0dGluZ3Mg\ndGhhdCB3ZXJlIAogKiB2YWxpZCBpbiBKUEEgMS4yIGJ1dCBtYXkgbm90IGJl\nIHZhbGlkIGluIEpQQSAyLjAKICovCnB1YmxpYyBjbGFzcyBUZXN0UXVlcnlT\nUUxDYWNoZSBleHRlbmRzIFNpbmdsZUVNRlRlc3RDYXNlIHsKICAgIAogICAg\nZmluYWwgaW50IG5UaHJlYWRzID0gNTsKICAgIGZpbmFsIGludCBuUGVvcGxl\nID0gMTAwOwogICAgZmluYWwgaW50IG5JdGVyYXRpb25zID0gMTA7CgogICAg\nQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpIHsKICAgICAgICAv\nLyBuZWVkIHRoaXMgdG8gY2xlYW51cCBleGlzdGluZyB0YWJsZXMgYXMgc29t\nZSBlbnRpdHkgbmFtZXMgYXJlIHJldXNlZAogICAgICAgIHNldFVwKERST1Bf\nVEFCTEVTLCBQZXJzb24uY2xhc3MsIFRibENoaWxkLmNsYXNzLCBUYmxHcmFu\nZENoaWxkLmNsYXNzLCBUYmxQYXJlbnQuY2xhc3MpOwogICAgfQoKICAgIC8q\nCiAgICAgKiBWZXJpZnkgYW4gZXhjZXB0aW9uIGlzIHRocm93biBpZiBhIGJh\nZCBjYWNoZSBpbXBsZW1lbnRhdGlvbiBjbGFzcyBpcyBzcGVjaWZpZWQKICAg\nICAqLwogICAgcHVibGljIHZvaWQgdGVzdEJhZEN1c3RvbUNhY2hlU2V0dGlu\nZygpIHsKICAgICAgICBNYXAgcHJvcHMgPSBuZXcgSGFzaE1hcChTeXN0ZW0u\nZ2V0UHJvcGVydGllcygpKTsKICAgICAgICBwcm9wcy5wdXQoIm9wZW5qcGEu\nTWV0YURhdGFGYWN0b3J5IiwgImpwYShUeXBlcz0iICsgUGVyc29uLmNsYXNz\nLmdldE5hbWUoKSArICIpIik7CiAgICAgICAgcHJvcHMucHV0KCJvcGVuanBh\nLmpkYmMuUXVlcnlTUUxDYWNoZSIsIAogICAgICAgICAgICAgICAgICAib3Jn\nLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmNvbXBhdGlibGUuVGVzdFF1\nZXJ5U1FMQ2FjaGUuQmFkQ2FjaGVNYXAiKTsKCiAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5U1BJIGVtZiA9\nIChPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEkpT3BlbkpQQVBlcnNp\nc3RlbmNlLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgY2FzdChQZXJzaXN0ZW5jZS5jcmVhdGVFbnRpdHlNYW5h\nZ2VyRmFjdG9yeSgidGVzdCIsIHByb3BzKSk7CiAgICAgICAgICAgIC8vIAog\nICAgICAgICAgICAvLyBFTUYgY3JlYXRpb24gbXVzdCB0aHJvdyBhbiBleGNl\ncHRpb24gYmVjYXVzZSB0aGUgY2FjaGUgaW1wbGVtZW50YXRpb24gY2xhc3Mg\nd2lsbCBub3QgYmUgZm91bmQKICAgICAgICAgICAgLy8gCiAgICAgICAgICAg\nIGFzc2VydEZhbHNlKGZhbHNlKTsKICAgICAgICB9CiAgICAgICAgY2F0Y2gg\nKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2VydFRydWUodHJ1ZSk7\nCiAgICAgICAgfQogICAgfQoKCiAgICAvKgogICAgICogVmVyaWZ5IG11bHRp\nLXRocmVhZGVkIG11bHRpLWVudGl0eSBtYW5hZ2VyIGZpbmRlciB3b3JrcyB3\naXRoIHRoZSBRdWVyeVNRTENhY2hlIHNldCB0byAiYWxsIgogICAgICovCiAg\nICBAQWxsb3dGYWlsdXJlKG1lc3NhZ2U9Ik9QRU5KUEEtMTE3OSAyLjAgZG9l\nc24ndCBhbGxvdyAnYWxsJyBhcyBpbiBwcmV2aW91cyByZWxlYXNlcyIpCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0TXVsdGlFTUNhY2hpbmdBbGwoKSB7CiAgICAg\nICAgTWFwIHByb3BzID0gbmV3IEhhc2hNYXAoU3lzdGVtLmdldFByb3BlcnRp\nZXMoKSk7CiAgICAgICAgcHJvcHMucHV0KCJvcGVuanBhLk1ldGFEYXRhRmFj\ndG9yeSIsICJqcGEoVHlwZXM9IiArIFBlcnNvbi5jbGFzcy5nZXROYW1lKCkg\nKyAiKSIpOwogICAgICAgIHByb3BzLnB1dCgib3BlbmpwYS5qZGJjLlF1ZXJ5\nU1FMQ2FjaGUiLCAiYWxsIik7CiAgICAgICAgcnVuTXVsdGlFTUNhY2hpbmco\ncHJvcHMpOyAgICAgICAgCiAgICB9CgoKICAgIC8qCiAgICAgKiBWZXJpZnkg\nbXVsdGktdGhyZWFkZWQgbXVsdGktZW50aXR5IG1hbmFnZXIgZmluZGVyIHdv\ncmtzIHdpdGggdGhlIFF1ZXJ5U1FMQ2FjaGUgc2V0IHRvICJ0cnVlIgogICAg\nICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0TXVsdGlFTUNhY2hpbmdUcnVlKCkg\newogICAgICAgIE1hcCBwcm9wcyA9IG5ldyBIYXNoTWFwKFN5c3RlbS5nZXRQ\ncm9wZXJ0aWVzKCkpOwogICAgICAgIHByb3BzLnB1dCgib3BlbmpwYS5NZXRh\nRGF0YUZhY3RvcnkiLCAianBhKFR5cGVzPSIgKyBQZXJzb24uY2xhc3MuZ2V0\nTmFtZSgpICsgIikiKTsKICAgICAgICBwcm9wcy5wdXQoIm9wZW5qcGEuamRi\nYy5RdWVyeVNRTENhY2hlIiwgInRydWUiKTsKICAgICAgICBydW5NdWx0aUVN\nQ2FjaGluZyhwcm9wcyk7CiAgICB9CgoKICAgIC8qCiAgICAgKiBWZXJpZnkg\nUXVlcnlTUUxDYWNoZVZhbHVlIHNldHRpbmcgInRydWUiIHVzZXMgdGhlIGV4\ncGVjdGVkIGNhY2hlIGltcGxlbWVudGF0aW9uIGFuZCBpcyBjYWNoaW5nCiAg\nICAgKi8KICAgIEBBbGxvd0ZhaWx1cmUobWVzc2FnZT0iRmFpbHMgYWZ0ZXIg\nZmlyc3QgcnVuIHdpdGggZHVwbGljYXRlIGtleSB2YWx1ZSBpbiBhIHVuaXF1\nZSBQSyBjb25zdHJhaW50IG9yIGluZGV4IikKICAgIHB1YmxpYyB2b2lkIHRl\nc3RFYWdlckZldGNoKCkgewogICAgICAgIE1hcCBwcm9wcyA9IG5ldyBIYXNo\nTWFwKFN5c3RlbS5nZXRQcm9wZXJ0aWVzKCkpOwogICAgICAgIHByb3BzLnB1\ndCgib3BlbmpwYS5NZXRhRGF0YUZhY3RvcnkiLCAianBhKFR5cGVzPSIgKyBU\nYmxDaGlsZC5jbGFzcy5nZXROYW1lKCkgKyAiOyIKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsg\nVGJsR3JhbmRDaGlsZC5jbGFzcy5nZXROYW1lKCkgKyAiOyIKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICsgVGJsUGFyZW50LmNsYXNzLmdldE5hbWUoKSArICIpIik7CiAgICAg\nICAgcHJvcHMucHV0KCJvcGVuanBhLmpkYmMuUXVlcnlTUUxDYWNoZSIsICJ0\ncnVlIik7CgogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQ\nSSBlbWYgPSAoT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5U1BJKSBPcGVu\nSlBBUGVyc2lzdGVuY2UuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIGNhc3QoUGVyc2lzdGVuY2UuY3JlYXRlRW50aXR5\nTWFuYWdlckZhY3RvcnkoInRlc3QiLCBwcm9wcykpOwogICAgICAgIEVudGl0\neU1hbmFnZXJJbXBsIGVtID0gKEVudGl0eU1hbmFnZXJJbXBsKWVtZi5jcmVh\ndGVFbnRpdHlNYW5hZ2VyKCk7CgogICAgICAgIGVtLmdldFRyYW5zYWN0aW9u\nKCkuYmVnaW4oKTsKCiAgICAgICAgZm9yIChpbnQgaSA9IDE7IGkgPCAzOyBp\nKyspIHsKICAgICAgICAgICAgVGJsUGFyZW50IHAgPSBuZXcgVGJsUGFyZW50\nKCk7CiAgICAgICAgICAgIHAuc2V0UGFyZW50SWQoaSk7CiAgICAgICAgICAg\nIFRibENoaWxkIGMgPSBuZXcgVGJsQ2hpbGQoKTsKICAgICAgICAgICAgYy5z\nZXRDaGlsZElkKGkpOwogICAgICAgICAgICBjLnNldFRibFBhcmVudChwKTsK\nICAgICAgICAgICAgcC5hZGRUYmxDaGlsZChjKTsKICAgICAgICAgICAgZW0u\ncGVyc2lzdChwKTsKICAgICAgICAgICAgZW0ucGVyc2lzdChjKTsKCiAgICAg\nICAgICAgIFRibEdyYW5kQ2hpbGQgZ2MgPSBuZXcgVGJsR3JhbmRDaGlsZCgp\nOwogICAgICAgICAgICBnYy5zZXRHcmFuZENoaWxkSWQoaSk7CiAgICAgICAg\nICAgIGdjLnNldFRibENoaWxkKGMpOwogICAgICAgICAgICBjLmFkZFRibEdy\nYW5kQ2hpbGQoZ2MpOwoKICAgICAgICAgICAgZW0ucGVyc2lzdChwKTsKICAg\nICAgICAgICAgZW0ucGVyc2lzdChjKTsKICAgICAgICAgICAgZW0ucGVyc2lz\ndChnYyk7CiAgICAgICAgfQogICAgICAgIGVtLmZsdXNoKCk7CiAgICAgICAg\nZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbGVh\ncigpOwoKICAgICAgICBmb3IgKGludCBpID0gMTsgaSA8IDM7IGkrKykgewog\nICAgICAgICAgICBUYmxQYXJlbnQgcCA9IGVtLmZpbmQoVGJsUGFyZW50LmNs\nYXNzLCBpKTsKICAgICAgICAgICAgaW50IHBpZCA9IHAuZ2V0UGFyZW50SWQo\nKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKHBpZCwgaSk7CiAgICAgICAg\nICAgIENvbGxlY3Rpb248VGJsQ2hpbGQ+IGNoaWxkcmVuID0gcC5nZXRUYmxD\naGlsZHJlbigpOwogICAgICAgICAgICBib29sZWFuIGhhc0NoaWxkID0gZmFs\nc2U7CiAgICAgICAgICAgIGZvciAoVGJsQ2hpbGQgYyA6IGNoaWxkcmVuKSB7\nCiAgICAgICAgICAgICAgICBoYXNDaGlsZCA9IHRydWU7CiAgICAgICAgICAg\nICAgICBDb2xsZWN0aW9uPFRibEdyYW5kQ2hpbGQ+IGdjaGlsZHJlbiA9IGMu\nZ2V0VGJsR3JhbmRDaGlsZHJlbigpOwogICAgICAgICAgICAgICAgaW50IGNp\nZCA9IGMuZ2V0Q2hpbGRJZCgpOwogICAgICAgICAgICAgICAgYXNzZXJ0RXF1\nYWxzKGNpZCwgaSk7CiAgICAgICAgICAgICAgICBib29sZWFuIGhhc0dyYW5k\nQ2hpbGQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGZvciAoVGJsR3JhbmRD\naGlsZCBnYyA6IGdjaGlsZHJlbikgewogICAgICAgICAgICAgICAgICAgIGhh\nc0dyYW5kQ2hpbGQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGludCBn\nY0lkID0gZ2MuZ2V0R3JhbmRDaGlsZElkKCk7CiAgICAgICAgICAgICAgICAg\nICAgYXNzZXJ0RXF1YWxzKGdjSWQsIGkpOwogICAgICAgICAgICAgICAgfQog\nICAgICAgICAgICAgICAgYXNzZXJ0VHJ1ZShoYXNHcmFuZENoaWxkKTsKICAg\nICAgICAgICAgfQogICAgICAgICAgICBhc3NlcnRUcnVlKGhhc0NoaWxkKTsK\nICAgICAgICB9CiAgICAgICAgZW0uY2xvc2UoKTsKICAgICAgICBlbWYuY2xv\nc2UoKTsKICAgIH0KCgogICAgcHJpdmF0ZSB2b2lkIHJ1bk11bHRpRU1DYWNo\naW5nKE1hcCBwcm9wcykgewogICAgICAgIEVudGl0eU1hbmFnZXJGYWN0b3J5\nIGVtZmFjID0gUGVyc2lzdGVuY2UuY3JlYXRlRW50aXR5TWFuYWdlckZhY3Rv\ncnkoInRlc3QiLCBwcm9wcyk7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9\nIGVtZmFjLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsgICAgICAgICAgICAKCiAg\nICAgICAgLy8gCiAgICAgICAgLy8gQ3JlYXRlIHNvbWUgZW50aXRpZXMKICAg\nICAgICAvLyAKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7\nCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuUGVvcGxlOyBpKyspIHsK\nICAgICAgICAgICAgUGVyc29uIHAgPSBuZXcgUGVyc29uKCk7CiAgICAgICAg\nICAgIHAuc2V0SWQoaSk7CiAgICAgICAgICAgIGVtLnBlcnNpc3QocCk7CiAg\nICAgICAgfQogICAgICAgIGVtLmZsdXNoKCk7CiAgICAgICAgZW0uZ2V0VHJh\nbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwoKICAg\nICAgICBUaHJlYWRbXSBuZXdUaHJlYWRzID0gbmV3IFRocmVhZFtuVGhyZWFk\nc107CiAgICAgICAgRmluZFBlb3BsZVtdIGN1c3RvbWVyID0gbmV3IEZpbmRQ\nZW9wbGVbblRocmVhZHNdOwogICAgICAgIGZvciAoaW50IGk9MDsgaSA8IG5U\naHJlYWRzOyBpKyspIHsKICAgICAgICAgICAgY3VzdG9tZXJbaV0gPSBuZXcg\nRmluZFBlb3BsZShlbWZhYywgMCwgblBlb3BsZSwgbkl0ZXJhdGlvbnMsIGkp\nOwogICAgICAgICAgICBuZXdUaHJlYWRzW2ldID0gbmV3IFRocmVhZChjdXN0\nb21lcltpXSk7CiAgICAgICAgICAgIG5ld1RocmVhZHNbaV0uc3RhcnQoKTsK\nICAgICAgICB9CgogICAgICAgIC8vIAogICAgICAgIC8vIFdhaXQgZm9yIHRo\nZSB3b3JrZXIgdGhyZWFkcyB0byBjb21wbGV0ZQogICAgICAgIC8vIAogICAg\nICAgIGZvciAoaW50IGkgPSAwOyBpIDwgblRocmVhZHM7IGkrKykgewogICAg\nICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgbmV3VGhyZWFkc1tpXS5q\nb2luKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2F0Y2ggKEludGVy\ncnVwdGVkRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgIHRoaXMuZmFp\nbCgiQ2F1Z2h0IEludGVycnVwdGVkIEV4Y2VwdGlvbjogIiArIGUpOwogICAg\nICAgICAgICB9CiAgICAgICAgfSAgIAoKICAgICAgICAvLyAKICAgICAgICAv\nLyBSdW4gdGhyb3VnaCB0aGUgc3RhdGUgb2YgYWxsIHJ1bm5hYmxlcyB0byBh\nc3NlcnQgaWYgYW55IG9mIHRoZW0gZmFpbGVkLgogICAgICAgIC8vIAogICAg\nICAgIGZvciAoaW50IGkgPSAwOyBpIDwgblRocmVhZHM7IGkrKykgewogICAg\nICAgICAgICBhc3NlcnRGYWxzZShjdXN0b21lcltpXS5oYWRGYWlsdXJlcygp\nKTsKICAgICAgICB9CgogICAgICAgIC8vIAogICAgICAgIC8vIENsZWFuIHVw\nIHRoZSBlbnRpdGllcyB1c2VkIGluIHRoaXMgdGVzdAogICAgICAgIC8vIAog\nICAgICAgIGVtID0gZW1mYWMuY3JlYXRlRW50aXR5TWFuYWdlcigpOyAgICAg\nICAgICAgIAogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsK\nICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG5QZW9wbGU7IGkrKykgewog\nICAgICAgICAgICBQZXJzb24gcCA9IGVtLmZpbmQoUGVyc29uLmNsYXNzLCBp\nKTsKICAgICAgICAgICAgZW0ucmVtb3ZlKHApOwogICAgICAgIH0KICAgICAg\nICBlbS5mbHVzaCgpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29t\nbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KICAgIAogICAgCiAg\nICAvKgogICAgICogU2ltcGxlIHJ1bm5hYmxlIHRvIHRlc3QgZmluZGVyIGlu\nIGEgdGlnaHQgbG9vcC4gIE11bHRpcGxlIGluc3RhbmNlcyBvZiB0aGlzIHJ1\nbm5hYmxlIHdpbGwgcnVuIHNpbXVsdGFuZW91c2x5CiAgICAgKi8KICAgIHBy\naXZhdGUgY2xhc3MgRmluZFBlb3BsZSBpbXBsZW1lbnRzIFJ1bm5hYmxlIHsK\nICAgICAgICBwcml2YXRlIGludCBzdGFydElkOwogICAgICAgIHByaXZhdGUg\naW50IGVuZElkOwogICAgICAgIHByaXZhdGUgaW50IHRocmVhZDsKICAgICAg\nICBwcml2YXRlIGludCBpdGVyYXRpb25zOwogICAgICAgIHByaXZhdGUgRW50\naXR5TWFuYWdlckZhY3RvcnkgZW1mOwogICAgICAgIHByaXZhdGUgYm9vbGVh\nbiBmYWlsdXJlcyA9IGZhbHNlOwoKICAgICAgICBwdWJsaWMgRmluZFBlb3Bs\nZShFbnRpdHlNYW5hZ2VyRmFjdG9yeSBlbWYsIGludCBzdGFydElkLCBpbnQg\nZW5kSWQsIGludCBpdGVyYXRpb25zLCBpbnQgdGhyZWFkKSB7CiAgICAgICAg\nICAgIHN1cGVyKCk7CiAgICAgICAgICAgIHRoaXMuc3RhcnRJZCA9IHN0YXJ0\nSWQ7CiAgICAgICAgICAgIHRoaXMuZW5kSWQgPSBlbmRJZDsKICAgICAgICAg\nICAgdGhpcy50aHJlYWQgPSB0aHJlYWQ7CiAgICAgICAgICAgIHRoaXMuaXRl\ncmF0aW9ucyA9IGl0ZXJhdGlvbnM7CiAgICAgICAgICAgIHRoaXMuZW1mID0g\nZW1mOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIGJvb2xlYW4gaGFkRmFp\nbHVyZXMoKSB7CiAgICAgICAgICAgIHJldHVybiBmYWlsdXJlczsKICAgICAg\nICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsKICAgICAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYu\nY3JlYXRlRW50aXR5TWFuYWdlcigpOyAgICAgICAgICAgIAogICAgICAgICAg\nICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBpdGVyYXRpb25zOyBqKyspIHsK\nCiAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IHN0YXJ0SWQ7IGkg\nPCBlbmRJZDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFBlcnNv\nbiBwMSA9IGVtLmZpbmQoUGVyc29uLmNsYXNzLCBpKTsKICAgICAgICAgICAg\nICAgICAgICAgICAgaWYgKHAxLmdldElkKCkgIT0gaSkgewogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKCJGaW5kZXIg\nZmFpbGVkOiAiICsgaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBm\nYWlsdXJlcyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBi\ncmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAg\nICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbS5jbGVhcigpOyAgCiAg\nICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbS5jbG9zZSgpOyAg\nCiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBl\nKSB7CiAgICAgICAgICAgICAgICBmYWlsdXJlcyA9IHRydWU7CiAgICAgICAg\nICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIlRocmVhZCAiICsgdGhyZWFk\nICsgIiBleGNlcHRpb24gOiIgKyBlICk7CiAgICAgICAgICAgIH0KICAgICAg\nICB9CiAgICB9Cn0K\n","encoding":"base64"}

