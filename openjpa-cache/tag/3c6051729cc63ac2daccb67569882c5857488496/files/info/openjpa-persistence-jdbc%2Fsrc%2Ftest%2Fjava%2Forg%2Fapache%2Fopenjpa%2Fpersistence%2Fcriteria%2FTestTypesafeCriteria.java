{"sha":"b40b2ae6684367c63bc233f146bcbb8e7244115f","node_id":"MDQ6QmxvYjIwNjM2NDpiNDBiMmFlNjY4NDM2N2M2M2JjMjMzZjE0NmJjYmI4ZTcyNDQxMTVm","size":66594,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/b40b2ae6684367c63bc233f146bcbb8e7244115f","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY3JpdGVy\naWE7CgppbXBvcnQgamF2YS5tYXRoLkJpZ0RlY2ltYWw7CmltcG9ydCBqYXZh\nLnNxbC5EYXRlOwppbXBvcnQgamF2YS5zcWwuVGltZTsKaW1wb3J0IGphdmEu\nc3FsLlRpbWVzdGFtcDsKaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Cmlt\ncG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsKaW1wb3J0IGphdmEudXRpbC5MaXN0\nOwppbXBvcnQgamF2YS51dGlsLk1hcDsKCmltcG9ydCBqYXZheC5wZXJzaXN0\nZW5jZS5QYXJhbWV0ZXI7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5RdWVy\neTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLlR1cGxlOwppbXBvcnQgamF2\nYXgucGVyc2lzdGVuY2UuVHlwZWRRdWVyeTsKaW1wb3J0IGphdmF4LnBlcnNp\nc3RlbmNlLmNyaXRlcmlhLkNyaXRlcmlhUXVlcnk7CmltcG9ydCBqYXZheC5w\nZXJzaXN0ZW5jZS5jcml0ZXJpYS5FeHByZXNzaW9uOwppbXBvcnQgamF2YXgu\ncGVyc2lzdGVuY2UuY3JpdGVyaWEuSm9pbjsKaW1wb3J0IGphdmF4LnBlcnNp\nc3RlbmNlLmNyaXRlcmlhLkpvaW5UeXBlOwppbXBvcnQgamF2YXgucGVyc2lz\ndGVuY2UuY3JpdGVyaWEuTGlzdEpvaW47CmltcG9ydCBqYXZheC5wZXJzaXN0\nZW5jZS5jcml0ZXJpYS5NYXBKb2luOwppbXBvcnQgamF2YXgucGVyc2lzdGVu\nY2UuY3JpdGVyaWEuUGFyYW1ldGVyRXhwcmVzc2lvbjsKaW1wb3J0IGphdmF4\nLnBlcnNpc3RlbmNlLmNyaXRlcmlhLlBhdGg7CmltcG9ydCBqYXZheC5wZXJz\naXN0ZW5jZS5jcml0ZXJpYS5Sb290OwppbXBvcnQgamF2YXgucGVyc2lzdGVu\nY2UuY3JpdGVyaWEuU2VsZWN0aW9uOwppbXBvcnQgamF2YXgucGVyc2lzdGVu\nY2UuY3JpdGVyaWEuU2V0Sm9pbjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNl\nLmNyaXRlcmlhLlN1YnF1ZXJ5OwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2Uu\nbWV0YW1vZGVsLkVudGl0eVR5cGU7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5j\nZS5tZXRhbW9kZWwuTWV0YW1vZGVsOwoKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLnNxbC5PcmFjbGVEaWN0aW9uYXJ5OwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNRTFNlcnZlckRpY3Rpb25hcnk7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UudGVzdC5BbGxv\nd0ZhaWx1cmU7CgovKioKICogVGVzdHMgdHlwZS1zdHJpY3QgdmVyc2lvbiBv\nZiBDcml0ZXJpYSBBUEkuCiAqIAogKiBNb3N0IG9mIHRoZSB0ZXN0cyBidWls\nZCBDcml0ZXJpYSBRdWVyeSBhbmQgdGhlbiBleGVjdXRlIHRoZSBxdWVyeSBh\ncyB3ZWxsIGFzCiAqIGEgcmVmZXJlbmNlIEpQUUwgcXVlcnkgc3VwcGxpZWQg\nYXMgYSBzdHJpbmcuIFRoZSB0ZXN0IGlzIHZhbGlkYXRlZCBieQogKiBhc3Nl\ncnRpbmcgdGhhdCB0aGUgcmVzdWx0YW50IFNRTCBxdWVyaWVzIGZvciB0aGVz\nZSB0d28gYWx0ZXJuYXRpdmUgZm9ybSBvZgogKiBleGVjdXRpbmcgYSBxdWVy\neSBhcmUgdGhlIHNhbWUuCiAqIAogKiAKICovCnB1YmxpYyBjbGFzcyBUZXN0\nVHlwZXNhZmVDcml0ZXJpYSBleHRlbmRzIENyaXRlcmlhVGVzdCB7CiAgICBw\ncml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgVFJVRV9KUFFMID0gIlNFTEVD\nVCBwIEZST00gUGVyc29uIHAgV0hFUkUgMT0xIjsKICAgIHByaXZhdGUgc3Rh\ndGljIGZpbmFsIFN0cmluZyBGQUxTRV9KUFFMID0gIlNFTEVDVCBwIEZST00g\nUGVyc29uIHAgV0hFUkUgMTw+MSI7CiAgICAKICAgIHB1YmxpYyB2b2lkIHRl\nc3RUcnVlTGl0ZXJhbCgpIHsKICAgICAgICBDcml0ZXJpYVF1ZXJ5PFBlcnNv\nbj4gcSA9IGNiLmNyZWF0ZVF1ZXJ5KFBlcnNvbi5jbGFzcyk7CiAgICAgICAg\ncS5mcm9tKFBlcnNvbi5jbGFzcyk7CiAgICAgICAgYXNzZXJ0RXF1aXZhbGVu\nY2UocS53aGVyZShjYi5saXRlcmFsKEJvb2xlYW4uVFJVRSkpLCBUUlVFX0pQ\nUUwpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0RmFsc2VMaXRl\ncmFsKCkgewogICAgICAgIENyaXRlcmlhUXVlcnk8UGVyc29uPiBxID0gY2Iu\nY3JlYXRlUXVlcnkoUGVyc29uLmNsYXNzKTsKICAgICAgICBxLmZyb20oUGVy\nc29uLmNsYXNzKTsKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShxLndoZXJl\nKGNiLmxpdGVyYWwoQm9vbGVhbi5GQUxTRSkpLCBGQUxTRV9KUFFMKTsKICAg\nIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdERlZmF1bHRBbmRJc1RydWUo\nKSB7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxQZXJzb24+IHEgPSBjYi5jcmVh\ndGVRdWVyeShQZXJzb24uY2xhc3MpOwogICAgICAgIHEuZnJvbShQZXJzb24u\nY2xhc3MpOwogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKHEud2hlcmUoY2Iu\nYW5kKCkpLCBUUlVFX0pQUUwpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0RGVmYXVsdE9ySXNGYWxzZSgpIHsKICAgICAgICBDcml0ZXJpYVF1\nZXJ5PFBlcnNvbj4gcSA9IGNiLmNyZWF0ZVF1ZXJ5KFBlcnNvbi5jbGFzcyk7\nCiAgICAgICAgcS5mcm9tKFBlcnNvbi5jbGFzcyk7CiAgICAgICAgYXNzZXJ0\nRXF1aXZhbGVuY2UocS53aGVyZShjYi5vcigpKSwgRkFMU0VfSlBRTCk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgdGVzdFplcm9EaXNqdW5jdElzRmFsc2Uo\nKSB7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxQZXJzb24+IHEgPSBjYi5jcmVh\ndGVRdWVyeShQZXJzb24uY2xhc3MpOwogICAgICAgIHEuZnJvbShQZXJzb24u\nY2xhc3MpOwogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKHEud2hlcmUoY2Iu\nZGlzanVuY3Rpb24oKSksIEZBTFNFX0pQUUwpOwogICAgfQogICAgCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0WmVyb0Nvbmp1bmN0SXNUcnVlKCkgewogICAgICAg\nIENyaXRlcmlhUXVlcnk8UGVyc29uPiBxID0gY2IuY3JlYXRlUXVlcnkoUGVy\nc29uLmNsYXNzKTsKICAgICAgICBxLmZyb20oUGVyc29uLmNsYXNzKTsKICAg\nICAgICBhc3NlcnRFcXVpdmFsZW5jZShxLndoZXJlKGNiLmNvbmp1bmN0aW9u\nKCkpLCBUUlVFX0pQUUwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RF\neHByZXNzaW9ucygpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJTRUxFQ1Qg\nby5xdWFudGl0eSwgby50b3RhbENvc3QqMS4wOCwgIgogICAgICAgICAgICAg\nICAgKyAiYS56aXBDb2RlIEZST00gQ3VzdG9tZXIgYyBKT0lOIGMub3JkZXJz\nIG8gSk9JTiBjLmFkZHJlc3MgYSAiCiAgICAgICAgICAgICAgICArICJXSEVS\nRSBhLnN0YXRlID0gJ0NBJyBBTkQgYS5jb3VudHkgPSAnU2FudGEgQ2xhcmEn\nIjsKICAgICAgICBDcml0ZXJpYVF1ZXJ5PD8+IHEgPSBjYi5jcmVhdGVRdWVy\neSgpOwogICAgICAgIFJvb3Q8Q3VzdG9tZXI+IGN1c3QgPSBxLmZyb20oQ3Vz\ndG9tZXIuY2xhc3MpOwogICAgICAgIFNldEpvaW48Q3VzdG9tZXIsIE9yZGVy\nPiBvcmRlciA9IGN1c3Quam9pblNldCgib3JkZXJzIik7CiAgICAgICAgSm9p\nbjxDdXN0b21lciwgQWRkcmVzcz4gYWRkcmVzcyA9IGN1c3Quam9pbigiYWRk\ncmVzcyIpOwogICAgICAgIHEud2hlcmUoY2IuZXF1YWwoYWRkcmVzcy5nZXQo\nInN0YXRlIiksICJDQSIpLCBjYi5lcXVhbChhZGRyZXNzCiAgICAgICAgICAg\nIC5nZXQoImNvdW50eSIpLCAiU2FudGEgQ2xhcmEiKSk7CiAgICAgICAgRXhw\ncmVzc2lvbjxEb3VibGU+IHRheGVkQ29zdCA9IGNiLnByb2Qob3JkZXIuZ2V0\nKE9yZGVyXy50b3RhbENvc3QpLCAxLjA4KTsKICAgICAgICBxLm11bHRpc2Vs\nZWN0KG9yZGVyLmdldCgicXVhbnRpdHkiKSwgdGF4ZWRDb3N0LCBhZGRyZXNz\nLmdldCgiemlwQ29kZSIpKTsKCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2Uo\ncSwganBxbCk7CiAgICB9CiAgICBwdWJsaWMgdm9pZCB0ZXN0RXhwbGljdFJv\nb3QoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0IGEgZnJvbSBB\nY2NvdW50IGEiOwogICAgICAgIAogICAgICAgIENyaXRlcmlhUXVlcnk8QWNj\nb3VudD4gYyA9IGNiLmNyZWF0ZVF1ZXJ5KEFjY291bnQuY2xhc3MpOwogICAg\nICAgIFJvb3Q8QWNjb3VudD4gYWNjb3VudCA9IGMuZnJvbShBY2NvdW50LmNs\nYXNzKTsKICAgICAgICBjLnNlbGVjdChhY2NvdW50KTsKCiAgICAgICAgYXNz\nZXJ0RXF1aXZhbGVuY2UoYywganBxbCk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgdGVzdEltcGxpY2l0Um9vdCgpIHsKICAgICAgICBTdHJpbmcganBxbCA9\nICJzZWxlY3QgYSBmcm9tIEFjY291bnQgYSI7CiAgICAgICAgCiAgICAgICAg\nQ3JpdGVyaWFRdWVyeTxBY2NvdW50PiBjID0gY2IuY3JlYXRlUXVlcnkoQWNj\nb3VudC5jbGFzcyk7CiAgICAgICAgYy5mcm9tKEFjY291bnQuY2xhc3MpOwoK\nICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShjLCBqcHFsKTsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0RXF1YWxXaXRoQXR0cmlidXRlQW5kTGl0ZXJh\nbCgpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJzZWxlY3QgYSBmcm9tIEFj\nY291bnQgYSB3aGVyZSBhLmJhbGFuY2U9MTAwIjsKCiAgICAgICAgQ3JpdGVy\naWFRdWVyeSBjID0gY2IuY3JlYXRlUXVlcnkoKTsKICAgICAgICBSb290PEFj\nY291bnQ+IGFjY291bnQgPSBjLmZyb20oQWNjb3VudC5jbGFzcyk7CiAgICAg\nICAgYy5zZWxlY3QoYWNjb3VudCkud2hlcmUoY2IuZXF1YWwoYWNjb3VudC5n\nZXQoQWNjb3VudF8uYmFsYW5jZSksIDEwMCkpOwoKICAgICAgICBhc3NlcnRF\ncXVpdmFsZW5jZShjLCBqcHFsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0\nZXN0RXF1YWxXaXRoQXR0cmlidXRlQW5kQXR0cmlidXRlKCkgewogICAgICAg\nIFN0cmluZyBqcHFsID0gInNlbGVjdCBhIGZyb20gQWNjb3VudCBhIHdoZXJl\nIGEuYmFsYW5jZT1hLmxvYW4iOwoKICAgICAgICBDcml0ZXJpYVF1ZXJ5PEFj\nY291bnQ+IGMgPSBjYi5jcmVhdGVRdWVyeShBY2NvdW50LmNsYXNzKTsKICAg\nICAgICBSb290PEFjY291bnQ+IGFjY291bnQgPSBjLmZyb20oQWNjb3VudC5j\nbGFzcyk7CiAgICAgICAgYy5zZWxlY3QoYWNjb3VudCkud2hlcmUoCiAgICAg\nICAgICAgICAgICBjYi5lcXVhbChhY2NvdW50LmdldChBY2NvdW50Xy5iYWxh\nbmNlKSwgYWNjb3VudAogICAgICAgICAgICAgICAgICAgICAgICAuZ2V0KEFj\nY291bnRfLmxvYW4pKSk7CgogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKGMs\nIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RQcm9qZWN0aW9u\nKCkgewogICAgICAgIFN0cmluZyBqcHFsID0gInNlbGVjdCBhLmJhbGFuY2Us\nYS5sb2FuIGZyb20gQWNjb3VudCBhIjsKICAgICAgICBDcml0ZXJpYVF1ZXJ5\nPFR1cGxlPiBjID0gY2IuY3JlYXRlVHVwbGVRdWVyeSgpOwogICAgICAgIFJv\nb3Q8QWNjb3VudD4gYWNjb3VudCA9IGMuZnJvbShBY2NvdW50LmNsYXNzKTsK\nICAgICAgICBjLm11bHRpc2VsZWN0KGFjY291bnQuZ2V0KEFjY291bnRfLmJh\nbGFuY2UpLCBhY2NvdW50LmdldChBY2NvdW50Xy5sb2FuKSk7CiAgICAgICAg\nYXNzZXJ0RXF1aXZhbGVuY2UoYywganBxbCk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgdGVzdEFic0V4cHJlc3Npb24oKSB7CiAgICAgICAgU3RyaW5nIGpw\ncWwgPSAic2VsZWN0IGEgZnJvbSBBY2NvdW50IGEgd2hlcmUgYWJzKGEuYmFs\nYW5jZSk9MTAwIjsKCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxBY2NvdW50PiBj\nID0gY2IuY3JlYXRlUXVlcnkoQWNjb3VudC5jbGFzcyk7CiAgICAgICAgUm9v\ndDxBY2NvdW50PiBhY2NvdW50ID0gYy5mcm9tKEFjY291bnQuY2xhc3MpOwoK\nICAgICAgICBjLnNlbGVjdChhY2NvdW50KS53aGVyZShjYi5lcXVhbChjYi5h\nYnMoYWNjb3VudC5nZXQoQWNjb3VudF8uYmFsYW5jZSkpLCAxMDApKTsKICAg\nICAgICBhc3NlcnRFcXVpdmFsZW5jZShjLCBqcHFsKTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0QXZnRXhwcmVzc2lvbigpIHsKICAgICAgICBTdHJp\nbmcganBxbCA9ICJzZWxlY3QgYXZnKGEuYmFsYW5jZSkgZnJvbSBBY2NvdW50\nIGEiOwoKICAgICAgICBDcml0ZXJpYVF1ZXJ5PERvdWJsZT4gYyA9IGNiLmNy\nZWF0ZVF1ZXJ5KERvdWJsZS5jbGFzcyk7CiAgICAgICAgUm9vdDxBY2NvdW50\nPiBhY2NvdW50ID0gYy5mcm9tKEFjY291bnQuY2xhc3MpOwoKICAgICAgICBj\nLnNlbGVjdChjYi5hdmcoYWNjb3VudC5nZXQoQWNjb3VudF8uYmFsYW5jZSkp\nKTsKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShjLCBqcHFsKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0SW5QcmVkaWNhdGUoKSB7CiAgICAgICAg\nU3RyaW5nIGpwcWwgPSAic2VsZWN0IGEgZnJvbSBBY2NvdW50IGEgd2hlcmUg\nYS5uYW1lIGluICgnWCcsJ1knLCdaJykiOwogICAgICAgIENyaXRlcmlhUXVl\ncnk8QWNjb3VudD4gYyA9IGNiLmNyZWF0ZVF1ZXJ5KEFjY291bnQuY2xhc3Mp\nOwogICAgICAgIFJvb3Q8QWNjb3VudD4gYWNjb3VudCA9IGMuZnJvbShBY2Nv\ndW50LmNsYXNzKTsKICAgICAgICBjLndoZXJlKGNiLmluKGFjY291bnQuZ2V0\nKEFjY291bnRfLm5hbWUpKS52YWx1ZSgiWCIpLnZhbHVlKCJZIikudmFsdWUo\nIloiKSk7CiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UoYywganBxbCk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgdGVzdEluUHJlZGljYXRlV2l0aFBhdGgo\nKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0IGEgZnJvbSBBY2Nv\ndW50IGEgd2hlcmUgYS5vd25lci5uYW1lIGluICgnWCcsJ1knLCdaJykiOwog\nICAgICAgIENyaXRlcmlhUXVlcnk8QWNjb3VudD4gYyA9IGNiLmNyZWF0ZVF1\nZXJ5KEFjY291bnQuY2xhc3MpOwogICAgICAgIFJvb3Q8QWNjb3VudD4gYWNj\nb3VudCA9IGMuZnJvbShBY2NvdW50LmNsYXNzKTsKICAgICAgICBjLndoZXJl\nKGNiLmluKGFjY291bnQuZ2V0KEFjY291bnRfLm93bmVyKS5nZXQoUGVyc29u\nXy5uYW1lKSkudmFsdWUoIlgiKQogICAgICAgICAgICAgICAgLnZhbHVlKCJZ\nIikudmFsdWUoIloiKSk7CiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UoYywg\nanBxbCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEJpbmFyeVByZWRp\nY2F0ZSgpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJzZWxlY3QgYSBmcm9t\nIEFjY291bnQgYSB3aGVyZSBhLmJhbGFuY2U+MTAwIGFuZCBhLmJhbGFuY2U8\nMjAwIjsKCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxBY2NvdW50PiBjID0gY2Iu\nY3JlYXRlUXVlcnkoQWNjb3VudC5jbGFzcyk7CiAgICAgICAgUm9vdDxBY2Nv\ndW50PiBhY2NvdW50ID0gYy5mcm9tKEFjY291bnQuY2xhc3MpOwogICAgICAg\nIGMuc2VsZWN0KGFjY291bnQpLndoZXJlKAogICAgICAgICAgICAgICAgY2Iu\nYW5kKGNiLmdyZWF0ZXJUaGFuKGFjY291bnQuZ2V0KEFjY291bnRfLmJhbGFu\nY2UpLCAxMDApLCBjYgogICAgICAgICAgICAgICAgICAgICAgICAubGVzc1Ro\nYW4oYWNjb3VudC5nZXQoQWNjb3VudF8uYmFsYW5jZSksIDIwMCkpKTsKCiAg\nICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UoYywganBxbCk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgdGVzdEVxdWFsV2l0aEF0dHJpYnV0ZUFuZFVuYXJ5RXhw\ncmVzc2lvbigpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJzZWxlY3QgYSBm\ncm9tIEFjY291bnQgYSB3aGVyZSBhLmJhbGFuY2U9YWJzKGEuYmFsYW5jZSki\nOwoKICAgICAgICBDcml0ZXJpYVF1ZXJ5PEFjY291bnQ+IGMgPSBjYi5jcmVh\ndGVRdWVyeShBY2NvdW50LmNsYXNzKTsKICAgICAgICBSb290PEFjY291bnQ+\nIGFjY291bnQgPSBjLmZyb20oQWNjb3VudC5jbGFzcyk7CiAgICAgICAgYy5z\nZWxlY3QoYWNjb3VudCkud2hlcmUoCiAgICAgICAgICAgICAgICBjYi5lcXVh\nbChhY2NvdW50LmdldChBY2NvdW50Xy5iYWxhbmNlKSwgY2IuYWJzKGFjY291\nbnQKICAgICAgICAgICAgICAgICAgICAgICAgLmdldChBY2NvdW50Xy5iYWxh\nbmNlKSkpKTsKCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UoYywganBxbCk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEJldHdlZW5FeHByZXNzaW9u\nKCkgewogICAgICAgIFN0cmluZyBqcHFsID0KICAgICAgICAgICAgInNlbGVj\ndCBhIGZyb20gQWNjb3VudCBhIHdoZXJlIGEuYmFsYW5jZSBiZXR3ZWVuIDEw\nMCBhbmQgMjAwIjsKCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxBY2NvdW50PiBj\nID0gY2IuY3JlYXRlUXVlcnkoQWNjb3VudC5jbGFzcyk7CiAgICAgICAgUm9v\ndDxBY2NvdW50PiBhY2NvdW50ID0gYy5mcm9tKEFjY291bnQuY2xhc3MpOwog\nICAgICAgIGMuc2VsZWN0KGFjY291bnQpLndoZXJlKAogICAgICAgICAgICAg\nICAgY2IuYmV0d2VlbihhY2NvdW50LmdldChBY2NvdW50Xy5iYWxhbmNlKSwg\nMTAwLCAyMDApKTsKCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UoYywganBx\nbCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFNpbXBsZVBhdGgoKSB7\nCiAgICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0IGEgZnJvbSBBY2NvdW50\nIGEgd2hlcmUgYS5vd25lci5uYW1lPSdQaW5ha2knIjsKICAgICAgICBDcml0\nZXJpYVF1ZXJ5PEFjY291bnQ+IGMgPSBjYi5jcmVhdGVRdWVyeShBY2NvdW50\nLmNsYXNzKTsKICAgICAgICBSb290PEFjY291bnQ+IGEgPSBjLmZyb20oQWNj\nb3VudC5jbGFzcyk7CiAgICAgICAgYy53aGVyZShjYi5lcXVhbChhLmdldChB\nY2NvdW50Xy5vd25lcikuZ2V0KFBlcnNvbl8ubmFtZSksICJQaW5ha2kiKSk7\nCgogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKGMsIGpwcWwpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHRlc3RTaW1wbGVMZWZ0Sm9pbigpIHsKICAgICAg\nICBTdHJpbmcganBxbCA9ICJTRUxFQ1QgYyBGUk9NIEN1c3RvbWVyIGMgTEVG\nVCBKT0lOIGMub3JkZXJzIG8gIjsKICAgICAgICBDcml0ZXJpYVF1ZXJ5PEN1\nc3RvbWVyPiBjID0gY2IuY3JlYXRlUXVlcnkoQ3VzdG9tZXIuY2xhc3MpOwog\nICAgICAgIGMuZnJvbShDdXN0b21lci5jbGFzcykuam9pbihDdXN0b21lcl8u\nb3JkZXJzLCBKb2luVHlwZS5MRUZUKTsKICAgICAgICBhc3NlcnRFcXVpdmFs\nZW5jZShjLCBqcHFsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0TXVs\ndGlwYXJ0TmF2aWdhdGlvbigpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJz\nZWxlY3QgYSBmcm9tIEEgYSB3aGVyZSBhLmIuYWdlPTIyIjsKICAgICAgICAK\nICAgICAgICBDcml0ZXJpYVF1ZXJ5PEE+IGNxID0gY2IuY3JlYXRlUXVlcnko\nQS5jbGFzcyk7CiAgICAgICAgUm9vdDxBPiBhID0gY3EuZnJvbShBLmNsYXNz\nKTsKICAgICAgICBjcS53aGVyZShjYi5lcXVhbChhLmdldChBXy5iKS5nZXQo\nQl8uYWdlKSwgMjIpKTsKICAgICAgICAKICAgICAgICBhc3NlcnRFcXVpdmFs\nZW5jZShjcSwganBxbCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRl\nc3RNdWx0aUxldmVsSm9pbnMoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAi\nU0VMRUNUIGMgRlJPTSBDdXN0b21lciBjIEpPSU4gYy5vcmRlcnMgbyAiIAog\nICAgICAgICAgICAgICAgICAgICsgIkpPSU4gby5saW5lSXRlbXMgaSBXSEVS\nRSBpLnByb2R1Y3QucHJvZHVjdFR5cGUgPSAncHJpbnRlciciOwoKICAgICAg\nICBDcml0ZXJpYVF1ZXJ5PEN1c3RvbWVyPiBjcSA9IGNiLmNyZWF0ZVF1ZXJ5\nKEN1c3RvbWVyLmNsYXNzKTsKICAgICAgICBSb290PEN1c3RvbWVyPiBjID0g\nY3EuZnJvbShDdXN0b21lci5jbGFzcyk7CiAgICAgICAgSm9pbjxDdXN0b21l\nciwgT3JkZXI+IG8gPSBjLmpvaW4oQ3VzdG9tZXJfLm9yZGVycyk7CiAgICAg\nICAgSm9pbjxPcmRlciwgTGluZUl0ZW0+IGkgPSBvLmpvaW4oT3JkZXJfLmxp\nbmVJdGVtcyk7CiAgICAgICAgY3Euc2VsZWN0KGMpCiAgICAgICAgICAgIC53\naGVyZShjYi5lcXVhbChpLmdldChMaW5lSXRlbV8ucHJvZHVjdCkKICAgICAg\nICAgICAgLmdldChQcm9kdWN0Xy5wcm9kdWN0VHlwZSksICJwcmludGVyIikp\nOwoKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShjcSwganBxbCk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgdGVzdEpvaW5zTm90UHJlc2VudEluV2hlcmVD\nbGF1c2UoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIGMgRlJP\nTSBDdXN0b21lciBjIExFRlQgSk9JTiBjLm9yZGVycyBvIFdIRVJFIGMuc3Rh\ndHVzID0gMSI7CiAgICAgICAgCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxDdXN0\nb21lcj4gYyA9IGNiLmNyZWF0ZVF1ZXJ5KEN1c3RvbWVyLmNsYXNzKTsKICAg\nICAgICBSb290PEN1c3RvbWVyPiBjdXN0ID0gYy5mcm9tKEN1c3RvbWVyLmNs\nYXNzKTsKICAgICAgICBKb2luPEN1c3RvbWVyLCBPcmRlcj4gb3JkZXIgPSBj\ndXN0CiAgICAgICAgLmpvaW4oQ3VzdG9tZXJfLm9yZGVycywgSm9pblR5cGUu\nTEVGVCk7CiAgICAgICAgYy53aGVyZShjYi5lcXVhbChjdXN0LmdldChDdXN0\nb21lcl8uc3RhdHVzKSwgMSkpLnNlbGVjdChjdXN0KTsKCiAgICAgICAgYXNz\nZXJ0RXF1aXZhbGVuY2UoYywganBxbCk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgdGVzdEZldGNoSm9pbnMoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAi\nU0VMRUNUIGQgRlJPTSBEZXBhcnRtZW50IGQgTEVGVCBKT0lOIEZFVENIIGQu\nZW1wbG95ZWVzIFdIRVJFIGQuZGVwdE5vID0gMSI7CiAgICAgICAgCiAgICAg\nICAgQ3JpdGVyaWFRdWVyeTxEZXBhcnRtZW50PiBxID0gY2IuY3JlYXRlUXVl\ncnkoRGVwYXJ0bWVudC5jbGFzcyk7CiAgICAgICAgUm9vdDxEZXBhcnRtZW50\nPiBkID0gcS5mcm9tKERlcGFydG1lbnQuY2xhc3MpOwogICAgICAgIGQuZmV0\nY2goRGVwYXJ0bWVudF8uZW1wbG95ZWVzLCBKb2luVHlwZS5MRUZUKTsKICAg\nICAgICBxLndoZXJlKGNiLmVxdWFsKGQuZ2V0KERlcGFydG1lbnRfLmRlcHRO\nbyksIDEpKS5zZWxlY3QoZCk7CgogICAgICAgIGFzc2VydEVxdWl2YWxlbmNl\nKHEsIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RKb2luZWRQ\nYXRoSW5Qcm9qZWN0aW9uKCkgewogICAgICAgIFN0cmluZyBqcHFsMSA9ICJT\nRUxFQ1QgcC52ZW5kb3IgRlJPTSBFbXBsb3llZSBlIEpPSU4gZS5jb250YWN0\nSW5mby5waG9uZXMgcCAiCiAgICAgICAgICAgICAgICAgICAgICsgIldIRVJF\nIGUuY29udGFjdEluZm8uYWRkcmVzcy56aXBDb2RlID0gJzk1MDU0JyI7Cgog\nICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVDVCBwLnZlbmRvciBGUk9NIEVt\ncGxveWVlIGUgSk9JTiBlLmNvbnRhY3RJbmZvIGMgSk9JTiBjLnBob25lcyBw\nICIKICAgICAgICAgICAgICAgICAgICArICJXSEVSRSBjLmFkZHJlc3Muemlw\nQ29kZSA9ICc5NTA1NCciOwoKICAgICAgICBDcml0ZXJpYVF1ZXJ5PFN0cmlu\nZz4gY3EgPSBjYi5jcmVhdGVRdWVyeShTdHJpbmcuY2xhc3MpOwogICAgICAg\nIFJvb3Q8RW1wbG95ZWU+IGUgPSBjcS5mcm9tKEVtcGxveWVlLmNsYXNzKTsK\nICAgICAgICBKb2luPENvbnRhY3QsIFBob25lPiBwID0gZS5qb2luKEVtcGxv\neWVlXy5jb250YWN0SW5mbykuam9pbihDb250YWN0Xy5waG9uZXMpOwogICAg\nICAgIGNxLndoZXJlKGNiLmVxdWFsKGUuZ2V0KEVtcGxveWVlXy5jb250YWN0\nSW5mbykuZ2V0KENvbnRhY3RfLmFkZHJlc3MpCiAgICAgICAgICAgICAgICAu\nZ2V0KEFkZHJlc3NfLnppcENvZGUpLCAiOTUwNTQiKSk7CiAgICAgICAgY3Eu\nc2VsZWN0KHAuZ2V0KFBob25lXy52ZW5kb3IpKTsKCiAgICAgICAgYXNzZXJ0\nRXF1aXZhbGVuY2UoY3EsIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHRlc3RLZXlFeHByZXNzaW9uKCkgewovLyAgICAgICAgU3RyaW5nIGpwcWwg\nPQovLyAgICAgICAgICAgICJTRUxFQ1QgaS5uYW1lLCBwIEZST00gSXRlbSBp\nIEpPSU4gaS5waG90b3MgcCBXSEVSRSBLRVkocCkgIgovLyAgICAgICAgICAg\nICsgIkxJS0UgJyVlZ3JldCUnIjsKICAgICAgICBTdHJpbmcganBxbCA9ICJz\nZWxlY3QgaS5uYW1lLCBWQUxVRShwKSBmcm9tIEl0ZW0gaSBqb2luIGkucGhv\ndG9zIHAgd2hlcmUgS0VZKHApIGxpa2UgJ2VncmV0JyI7CgogICAgICAgIENy\naXRlcmlhUXVlcnk8VHVwbGU+IHEgPSBjYi5jcmVhdGVUdXBsZVF1ZXJ5KCk7\nCiAgICAgICAgUm9vdDxJdGVtPiBpdGVtID0gcS5mcm9tKEl0ZW0uY2xhc3Mp\nOwogICAgICAgIE1hcEpvaW48SXRlbSwgU3RyaW5nLCBQaG90bz4gcGhvdG8g\nPSBpdGVtLmpvaW4oSXRlbV8ucGhvdG9zKTsKICAgICAgICBxLm11bHRpc2Vs\nZWN0KGl0ZW0uZ2V0KEl0ZW1fLm5hbWUpLCBwaG90bykud2hlcmUoY2IubGlr\nZShwaG90by5rZXkoKSwgIiVlZ3JldCUiKSk7CgogICAgICAgIGFzc2VydEVx\ndWl2YWxlbmNlKHEsIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRl\nc3RJbmRleEV4cHJlc3Npb24oKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAi\nU0VMRUNUIHQgRlJPTSBDcmVkaXRDYXJkIGMgSk9JTiBjLnRyYW5zYWN0aW9u\nSGlzdG9yeSB0ICIKICAgICAgICAgICAgKyAiV0hFUkUgYy5jdXN0b21lci5h\nY2NvdW50TnVtID0gMzIxOTg3IEFORCBJTkRFWCh0KSBCRVRXRUVOIDAgQU5E\nIDkiOwogICAgICAgIAogICAgICAgIENyaXRlcmlhUXVlcnk8VHJhbnNhY3Rp\nb25IaXN0b3J5PiBxID0gY2IuY3JlYXRlUXVlcnkoVHJhbnNhY3Rpb25IaXN0\nb3J5LmNsYXNzKTsKICAgICAgICBSb290PENyZWRpdENhcmQ+IGMgPSBxLmZy\nb20oQ3JlZGl0Q2FyZC5jbGFzcyk7CiAgICAgICAgTGlzdEpvaW48Q3JlZGl0\nQ2FyZCwgVHJhbnNhY3Rpb25IaXN0b3J5PiB0ID0gYwogICAgICAgIC5qb2lu\nKENyZWRpdENhcmRfLnRyYW5zYWN0aW9uSGlzdG9yeSk7CiAgICAgICAgcS5z\nZWxlY3QodCkud2hlcmUoY2IuYW5kKAogICAgICAgICAgICBjYi5lcXVhbChj\nLmdldChDcmVkaXRDYXJkXy5jdXN0b21lcikuZ2V0KEN1c3RvbWVyXy5hY2Nv\ndW50TnVtKSwKICAgICAgICAgICAgICAgIDMyMTk4NyksIAogICAgICAgICAg\nICBjYi5iZXR3ZWVuKHQuaW5kZXgoKSwgMCwgOSkpKTsKCiAgICAgICAgYXNz\nZXJ0RXF1aXZhbGVuY2UocSwganBxbCk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgdGVzdElzRW1wdHlFeHByZXNzaW9uKCkgewogICAgICAgIFN0cmluZyBq\ncHFsID0gIlNFTEVDVCBvIEZST00gT3JkZXIgbyBXSEVSRSBvLmxpbmVJdGVt\ncyBJUyBFTVBUWSI7CiAgICAgICAgCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxP\ncmRlcj4gcSA9IGNiLmNyZWF0ZVF1ZXJ5KE9yZGVyLmNsYXNzKTsKICAgICAg\nICBSb290PE9yZGVyPiBvcmRlciA9IHEuZnJvbShPcmRlci5jbGFzcyk7CiAg\nICAgICAgcS53aGVyZShjYi5pc0VtcHR5KG9yZGVyLmdldChPcmRlcl8ubGlu\nZUl0ZW1zKSkpLnNlbGVjdChvcmRlcik7CgogICAgICAgIGFzc2VydEVxdWl2\nYWxlbmNlKHEsIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RF\neHByZXNzaW9uSW5Qcm9qZWN0aW9uKCkgewogICAgICAgIFN0cmluZyBqcHFs\nID0gIlNFTEVDVCBvLnF1YW50aXR5LCBvLnRvdGFsQ29zdCoxLjA4LCAiCiAg\nICAgICAgICAgICsgImEuemlwQ29kZSBGUk9NIEN1c3RvbWVyIGMgSk9JTiBj\nLm9yZGVycyBvIEpPSU4gYy5hZGRyZXNzIGEgIgogICAgICAgICAgICArICJX\nSEVSRSBhLnN0YXRlID0gJ0NBJyBBTkQgYS5jb3VudHkgPSAnU2FudGEgQ2xh\ncmEnIjsKICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PFR1cGxlPiBj\ncSA9IGNiLmNyZWF0ZVR1cGxlUXVlcnkoKTsKICAgICAgICBSb290PEN1c3Rv\nbWVyPiBjID0gY3EuZnJvbShDdXN0b21lci5jbGFzcyk7CiAgICAgICAgSm9p\nbjxDdXN0b21lciwgT3JkZXI+IG8gPSBjLmpvaW4oQ3VzdG9tZXJfLm9yZGVy\ncyk7CiAgICAgICAgSm9pbjxDdXN0b21lciwgQWRkcmVzcz4gYSA9IGMuam9p\nbihDdXN0b21lcl8uYWRkcmVzcyk7CiAgICAgICAgY3Eud2hlcmUoY2IuYW5k\nKAogICAgICAgICAgICBjYi5lcXVhbChhLmdldChBZGRyZXNzXy5zdGF0ZSks\nICJDQSIpLCAKICAgICAgICAgICAgY2IuZXF1YWwoYS5nZXQoQWRkcmVzc18u\nY291bnR5KSwgIlNhbnRhIENsYXJhIikpKTsKICAgICAgICBjcS5tdWx0aXNl\nbGVjdChvLmdldChPcmRlcl8ucXVhbnRpdHkpLCBjYi5wcm9kKG8KICAgICAg\nICAgICAgICAgIC5nZXQoT3JkZXJfLnRvdGFsQ29zdCksIDEuMDgpLCBhLmdl\ndChBZGRyZXNzXy56aXBDb2RlKSk7CgogICAgICAgIGFzc2VydEVxdWl2YWxl\nbmNlKGNxLCBqcHFsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0VHlw\nZUV4cHJlc3Npb24oKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNU\nIFRZUEUoZSkgRlJPTSBFbXBsb3llZSBlIFdIRVJFIFRZUEUoZSkgPD4gRXhl\nbXB0IjsKICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PE9iamVjdD4g\ncSA9IGNiLmNyZWF0ZVF1ZXJ5KCk7CiAgICAgICAgUm9vdDxFbXBsb3llZT4g\nZW1wID0gcS5mcm9tKEVtcGxveWVlLmNsYXNzKTsKICAgICAgICBxLm11bHRp\nc2VsZWN0KGVtcC50eXBlKCkpLndoZXJlKGNiLm5vdEVxdWFsKGVtcC50eXBl\nKCksIEV4ZW1wdC5jbGFzcykpOwoKICAgICAgICBhc3NlcnRFcXVpdmFsZW5j\nZShxLCBqcHFsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0SW5kZXhF\neHByZXNzaW9uQW5kTGlldHJhbCgpIHsKICAgICAgICBTdHJpbmcganBxbCA9\nICJTRUxFQ1Qgdy5uYW1lIEZST00gQ291cnNlIGMgSk9JTiBjLnN0dWRlbnRX\nYWl0TGlzdCB3ICIKICAgICAgICAgICAgICAgICAgICArICJXSEVSRSBjLm5h\nbWUgPSAnQ2FsY3VsdXMnIEFORCBJTkRFWCh3KSA9IDAiOwogICAgICAgIAog\nICAgICAgIENyaXRlcmlhUXVlcnk8U3RyaW5nPiBxID0gY2IuY3JlYXRlUXVl\ncnkoU3RyaW5nLmNsYXNzKTsKICAgICAgICBSb290PENvdXJzZT4gY291cnNl\nID0gcS5mcm9tKENvdXJzZS5jbGFzcyk7CiAgICAgICAgTGlzdEpvaW48Q291\ncnNlLCBTdHVkZW50PiB3ID0gY291cnNlLmpvaW4oQ291cnNlXy5zdHVkZW50\nV2FpdExpc3QpOwogICAgICAgIHEud2hlcmUoY2IuYW5kKAogICAgICAgICAg\nICBjYi5lcXVhbChjb3Vyc2UuZ2V0KENvdXJzZV8ubmFtZSksICJDYWxjdWx1\ncyIpLAogICAgICAgICAgICBjYi5lcXVhbCh3LmluZGV4KCksIDApKSkuc2Vs\nZWN0KHcuZ2V0KFN0dWRlbnRfLm5hbWUpKTsKCiAgICAgICAgYXNzZXJ0RXF1\naXZhbGVuY2UocSwganBxbCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVz\ndEFnZ3JlZ2F0ZUluUHJvamVjdGlvbigpIHsKICAgICAgICBTdHJpbmcganBx\nbCA9ICJTRUxFQ1QgU1VNKGkucHJpY2UpIEZST00gT3JkZXIgbyBKT0lOIG8u\nbGluZUl0ZW1zIGkgIiArIAogICAgICAgICAgICAiSk9JTiBvLmN1c3RvbWVy\nIGMgV0hFUkUgYy5sYXN0TmFtZSA9ICdTbWl0aCcgQU5EICIgKyAKICAgICAg\nICAgICAgImMuZmlyc3ROYW1lID0gJ0pvaG4nIjsKICAgICAgICAKICAgICAg\nICBDcml0ZXJpYVF1ZXJ5PERvdWJsZT4gcSA9IGNiLmNyZWF0ZVF1ZXJ5KERv\ndWJsZS5jbGFzcyk7CiAgICAgICAgUm9vdDxPcmRlcj4gbyA9IHEuZnJvbShP\ncmRlci5jbGFzcyk7CiAgICAgICAgSm9pbjxPcmRlciwgTGluZUl0ZW0+IGkg\nPSBvLmpvaW4oT3JkZXJfLmxpbmVJdGVtcyk7CiAgICAgICAgSm9pbjxPcmRl\nciwgQ3VzdG9tZXI+IGMgPSBvLmpvaW4oT3JkZXJfLmN1c3RvbWVyKTsKICAg\nICAgICBxLndoZXJlKGNiLmFuZCgKICAgICAgICAgICAgY2IuZXF1YWwoYy5n\nZXQoQ3VzdG9tZXJfLmxhc3ROYW1lKSwgIlNtaXRoIiksIAogICAgICAgICAg\nICBjYi5lcXVhbChjLmdldChDdXN0b21lcl8uZmlyc3ROYW1lKSwgIkpvaG4i\nKSkpOwogICAgICAgIHEuc2VsZWN0KGNiLnN1bShpLmdldChMaW5lSXRlbV8u\ncHJpY2UpKSk7CgogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKHEsIGpwcWwp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RTaXplRXhwcmVzc2lvbigp\nIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJTRUxFQ1QgU0laRShkLmVtcGxv\neWVlcykgRlJPTSBEZXBhcnRtZW50IGQgIgogICAgICAgICAgICArICJXSEVS\nRSBkLm5hbWUgPSAnU2FsZXMnIjsKICAgICAgICAKICAgICAgICBDcml0ZXJp\nYVF1ZXJ5PEludGVnZXI+IHEgPSBjYi5jcmVhdGVRdWVyeShJbnRlZ2VyLmNs\nYXNzKTsKICAgICAgICBSb290PERlcGFydG1lbnQ+IGQgPSBxLmZyb20oRGVw\nYXJ0bWVudC5jbGFzcyk7CiAgICAgICAgcS53aGVyZShjYi5lcXVhbChkLmdl\ndChEZXBhcnRtZW50Xy5uYW1lKSwgIlNhbGVzIikpOwogICAgICAgIHEuc2Vs\nZWN0KGNiLnNpemUoZC5nZXQoRGVwYXJ0bWVudF8uZW1wbG95ZWVzKSkpOwoK\nICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShxLCBqcHFsKTsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0Q2FzZUV4cHJlc3Npb24oKSB7CiAgICAgICAg\nU3RyaW5nIGpwcWwgPSAiU0VMRUNUIGUubmFtZSwgQ0FTRSAiIAogICAgICAg\nIAkJKyAiV0hFTiBlLnJhdGluZyA9IDEgVEhFTiBlLnNhbGFyeSAqIDEuMSAi\nCiAgICAgICAgICAgICAgICArICJXSEVOIGUucmF0aW5nID0gMiBUSEVOIGUu\nc2FsYXJ5ICogMS4yICIKICAgICAgICAgICAgICAgICsgIkVMU0UgZS5zYWxh\ncnkgKiAxLjAxIEVORCAiCiAgICAgICAgICAgICsgIkZST00gRW1wbG95ZWUg\nZSBXSEVSRSBlLmRlcGFydG1lbnQubmFtZSA9ICdFbmdpbmVlcmluZyciOwog\nICAgICAgIENyaXRlcmlhUXVlcnk8Pz4gcSA9IGNiLmNyZWF0ZVF1ZXJ5KCk7\nCiAgICAgICAgUm9vdDxFbXBsb3llZT4gZSA9IHEuZnJvbShFbXBsb3llZS5j\nbGFzcyk7CiAgICAgICAgcS53aGVyZShjYi5lcXVhbChlLmdldChFbXBsb3ll\nZV8uZGVwYXJ0bWVudCkuZ2V0KERlcGFydG1lbnRfLm5hbWUpLCAiRW5naW5l\nZXJpbmciKSk7CiAgICAgICAgcS5tdWx0aXNlbGVjdChlLmdldChFbXBsb3ll\nZV8ubmFtZSksIAogICAgICAgICAgICAgICAgY2Iuc2VsZWN0Q2FzZSgpCiAg\nICAgICAgICAgICAgICAgIC53aGVuKGNiLmVxdWFsKGUuZ2V0KEVtcGxveWVl\nXy5yYXRpbmcpLCAxKSwgY2IucHJvZChlLmdldChFbXBsb3llZV8uc2FsYXJ5\nKSwgMS4xKSkKICAgICAgICAgICAgICAgICAgLndoZW4oY2IuZXF1YWwoZS5n\nZXQoRW1wbG95ZWVfLnJhdGluZyksIDIpLCBjYi5wcm9kKGUuZ2V0KEVtcGxv\neWVlXy5zYWxhcnkpLCAxLjIpKQogICAgICAgICAgICAgICAgICAub3RoZXJ3\naXNlKGNiLnByb2QoZS5nZXQoRW1wbG95ZWVfLnNhbGFyeSksIDEuMDEpKSk7\nCgogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKHEsIGpwcWwpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHRlc3RFeHByZXNzaW9uMSgpIHsKICAgICAgICBT\ndHJpbmcganBxbCA9ICJTRUxFQ1Qgby5xdWFudGl0eSwgby50b3RhbENvc3Qq\nMS4wOCwgIgogICAgICAgICAgICArICJhLnppcENvZGUgRlJPTSBDdXN0b21l\nciBjIEpPSU4gYy5vcmRlcnMgbyBKT0lOIGMuYWRkcmVzcyBhICIKICAgICAg\nICAgICAgKyAiV0hFUkUgYS5zdGF0ZSA9ICdDQScgQU5EIGEuY291bnR5ID0g\nJ1NhbnRhIENsYXJhJyI7CiAgICAgICAgCiAgICAgICAgQ3JpdGVyaWFRdWVy\neTxUdXBsZT4gcSA9IGNiLmNyZWF0ZVR1cGxlUXVlcnkoKTsKICAgICAgICBS\nb290PEN1c3RvbWVyPiBjdXN0ID0gcS5mcm9tKEN1c3RvbWVyLmNsYXNzKTsK\nICAgICAgICBKb2luPEN1c3RvbWVyLCBPcmRlcj4gb3JkZXIgPSBjdXN0Lmpv\naW4oQ3VzdG9tZXJfLm9yZGVycyk7CiAgICAgICAgSm9pbjxDdXN0b21lciwg\nQWRkcmVzcz4gYWRkcmVzcyA9IGN1c3Quam9pbihDdXN0b21lcl8uYWRkcmVz\ncyk7CiAgICAgICAgcS53aGVyZShjYi5hbmQoCiAgICAgICAgICAgIGNiLmVx\ndWFsKGFkZHJlc3MuZ2V0KEFkZHJlc3NfLnN0YXRlKSwgIkNBIiksIAogICAg\nICAgICAgICBjYi5lcXVhbChhZGRyZXNzLmdldChBZGRyZXNzXy5jb3VudHkp\nLCAiU2FudGEgQ2xhcmEiKSkpOwogICAgICAgIHEubXVsdGlzZWxlY3Qob3Jk\nZXIuZ2V0KE9yZGVyXy5xdWFudGl0eSksIGNiLnByb2Qob3JkZXIKICAgICAg\nICAgICAgICAgIC5nZXQoT3JkZXJfLnRvdGFsQ29zdCksIDEuMDgpLCBhZGRy\nZXNzLmdldChBZGRyZXNzXy56aXBDb2RlKSk7CgogICAgICAgIGFzc2VydEVx\ndWl2YWxlbmNlKHEsIGpwcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRl\nc3RFeHByZXNzaW9uMygpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJTRUxF\nQ1Qgdy5uYW1lIEZST00gQ291cnNlIGMgSk9JTiBjLnN0dWRlbnRXYWl0TGlz\ndCB3ICIKICAgICAgICAgICAgKyAiV0hFUkUgYy5uYW1lID0gJ0NhbGN1bHVz\nJyBBTkQgSU5ERVgodykgPSAwIjsKICAgICAgICAKICAgICAgICBDcml0ZXJp\nYVF1ZXJ5PFN0cmluZz4gcSA9IGNiLmNyZWF0ZVF1ZXJ5KFN0cmluZy5jbGFz\ncyk7CiAgICAgICAgUm9vdDxDb3Vyc2U+IGNvdXJzZSA9IHEuZnJvbShDb3Vy\nc2UuY2xhc3MpOwogICAgICAgIExpc3RKb2luPENvdXJzZSwgU3R1ZGVudD4g\ndyA9IGNvdXJzZS5qb2luKENvdXJzZV8uc3R1ZGVudFdhaXRMaXN0KTsKICAg\nICAgICBxLndoZXJlKGNiLmFuZCgKICAgICAgICAgICAgY2IuZXF1YWwoY291\ncnNlLmdldChDb3Vyc2VfLm5hbWUpLCAiQ2FsY3VsdXMiKSwKICAgICAgICAg\nICAgY2IuZXF1YWwody5pbmRleCgpLCAwKSkpLnNlbGVjdCh3LmdldChTdHVk\nZW50Xy5uYW1lKSk7CgogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKHEsIGpw\ncWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RHZW5lcmFsQ2FzZUV4\ncHJlc3Npb24oKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIGUu\nbmFtZSwgQ0FTRSAiCiAgICAgICAgICAgICsgIldIRU4gZS5yYXRpbmcgPSAx\nIFRIRU4gZS5zYWxhcnkgKiAxLjEgIgogICAgICAgICAgICArICJXSEVOIGUu\ncmF0aW5nID0gMiBUSEVOIGUuc2FsYXJ5ICogMS4yIEVMU0UgZS5zYWxhcnkg\nKiAiCiAgICAgICAgICAgICsgIjEuMDEgRU5EICIKICAgICAgICAgICAgKyAi\nRlJPTSBFbXBsb3llZSBlIFdIRVJFIGUuZGVwYXJ0bWVudC5uYW1lID0gJ0Vu\nZ2luZWVyaW5nJyI7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTw/PiBxID0gY2Iu\nY3JlYXRlUXVlcnkoKTsKICAgICAgICBSb290PEVtcGxveWVlPiBlID0gcS5m\ncm9tKEVtcGxveWVlLmNsYXNzKTsKICAgICAgICBxLndoZXJlKGNiLmVxdWFs\nKGUuZ2V0KEVtcGxveWVlXy5kZXBhcnRtZW50KS5nZXQoRGVwYXJ0bWVudF8u\nbmFtZSksICJFbmdpbmVlcmluZyIpKTsKICAgICAgICBxLm11bHRpc2VsZWN0\nKGUuZ2V0KEVtcGxveWVlXy5uYW1lKSwgCiAgICAgICAgICAgICAgICBjYi5z\nZWxlY3RDYXNlKCkKICAgICAgICAgICAgICAgICAgLndoZW4oY2IuZXF1YWwo\nZS5nZXQoRW1wbG95ZWVfLnJhdGluZyksIDEpLCBjYi5wcm9kKGUuZ2V0KEVt\ncGxveWVlXy5zYWxhcnkpLCAxLjEpKQogICAgICAgICAgICAgICAgICAud2hl\nbihjYi5lcXVhbChlLmdldChFbXBsb3llZV8ucmF0aW5nKSwgMiksIGNiLnBy\nb2QoZS5nZXQoRW1wbG95ZWVfLnNhbGFyeSksIDEuMikpCiAgICAgICAgICAg\nICAgICAgIC5vdGhlcndpc2UoY2IucHJvZChlLmdldChFbXBsb3llZV8uc2Fs\nYXJ5KSwgMS4wMSkpKTsKCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UocSwg\nanBxbCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFNpbXBsZUNhc2VF\neHByZXNzaW9uMSgpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJTRUxFQ1Qg\nZS5uYW1lLCBDQVNFIGUucmF0aW5nICIKICAgICAgICAgICAgKyAiV0hFTiAx\nIFRIRU4gZS5zYWxhcnkgKiAxLjEgIgogICAgICAgICAgICArICJXSEVOIDIg\nVEhFTiBlLnNhbGFyeSAqIDEuMiBFTFNFIGUuc2FsYXJ5ICogMS4wMSBFTkQg\nIgogICAgICAgICAgICArICJGUk9NIEVtcGxveWVlIGUgV0hFUkUgZS5kZXBh\ncnRtZW50Lm5hbWUgPSAnRW5naW5lZXJpbmcnIjsKICAgICAgICBDcml0ZXJp\nYVF1ZXJ5PFR1cGxlPiBxID0gY2IuY3JlYXRlVHVwbGVRdWVyeSgpOwogICAg\nICAgIFJvb3Q8RW1wbG95ZWU+IGUgPSBxLmZyb20oRW1wbG95ZWUuY2xhc3Mp\nOwogICAgICAgIHEud2hlcmUoY2IuZXF1YWwoZS5nZXQoRW1wbG95ZWVfLmRl\ncGFydG1lbnQpLmdldChEZXBhcnRtZW50Xy5uYW1lKSwgIkVuZ2luZWVyaW5n\nIikpOwogICAgICAgIEV4cHJlc3Npb248TG9uZz4gc2FsYXJ5ID0gZS5nZXQo\nRW1wbG95ZWVfLnNhbGFyeSk7IAogICAgICAgIEV4cHJlc3Npb248SW50ZWdl\ncj4gcmF0aW5nICA9IGUuZ2V0KEVtcGxveWVlXy5yYXRpbmcpOwogICAgICAg\nIHEubXVsdGlzZWxlY3QoZS5nZXQoRW1wbG95ZWVfLm5hbWUpLAogICAgICAg\nICAgICAgICAgICAgICAgY2Iuc2VsZWN0Q2FzZShyYXRpbmcpLgogICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICB3aGVuKDEsIGNiLnByb2Qoc2FsYXJ5\nLCAxLjEpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIC53aGVuKDIs\nIGNiLnByb2Qoc2FsYXJ5LCAxLjIpKQogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIC5vdGhlcndpc2UoY2IucHJvZChzYWxhcnksIDEuMDEpKSk7Cgog\nICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKHEsIGpwcWwpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHRlc3RTaW1wbGVDYXNlRXhwcmVzc2lvbjIoKSB7CiAg\nICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIGUubmFtZSwgQ0FTRSBlLnJh\ndGluZyBXSEVOIDEgVEhFTiAxMCAiCiAgICAgICAgICAgICsgIldIRU4gMiBU\nSEVOIDIwIEVMU0UgMzAgRU5EICIKICAgICAgICAgICAgKyAiRlJPTSBFbXBs\nb3llZSBlIFdIRVJFIGUuZGVwYXJ0bWVudC5uYW1lID0gJ0VuZ2luZWVyaW5n\nJyI7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxUdXBsZT4gcSA9IGNiLmNyZWF0\nZVR1cGxlUXVlcnkoKTsKICAgICAgICBSb290PEVtcGxveWVlPiBlID0gcS5m\ncm9tKEVtcGxveWVlLmNsYXNzKTsKICAgICAgICBFeHByZXNzaW9uPEludGVn\nZXI+IHJhdGluZyAgPSBlLmdldChFbXBsb3llZV8ucmF0aW5nKTsKICAgICAg\nICBxLndoZXJlKGNiLmVxdWFsKGUuZ2V0KEVtcGxveWVlXy5kZXBhcnRtZW50\nKS5nZXQoRGVwYXJ0bWVudF8ubmFtZSksICJFbmdpbmVlcmluZyIpKTsKICAg\nICAgICBxLm11bHRpc2VsZWN0KGUuZ2V0KEVtcGxveWVlXy5uYW1lKSwgCiAg\nICAgICAgICAgICAgICBjYi5zZWxlY3RDYXNlKHJhdGluZykKICAgICAgICAg\nICAgICAgICAgLndoZW4oMSwgMTApCiAgICAgICAgICAgICAgICAgIC53aGVu\nKDIsIDIwKQogICAgICAgICAgICAgICAgICAub3RoZXJ3aXNlKDMwKSk7CiAg\nICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UocSwganBxbCk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgdGVzdExpdGVyYWxzKCkgewogICAgICAgIFN0cmluZyBq\ncHFsID0gIlNFTEVDVCBwIEZST00gUGVyc29uIHAgd2hlcmUgJ0pvZScgTUVN\nQkVSIE9GIHAubmlja05hbWVzIjsKICAgICAgICBDcml0ZXJpYVF1ZXJ5PFBl\ncnNvbj4gcSA9IGNiLmNyZWF0ZVF1ZXJ5KFBlcnNvbi5jbGFzcyk7CiAgICAg\nICAgUm9vdDxQZXJzb24+IHAgPSBxLmZyb20oUGVyc29uLmNsYXNzKTsKICAg\nICAgICBxLnNlbGVjdChwKS53aGVyZShjYi5pc01lbWJlcihjYi5saXRlcmFs\nKCJKb2UiKSwgcC5nZXQoUGVyc29uXy5uaWNrTmFtZXMpKSk7CgogICAgICAg\nIGFzc2VydEVxdWl2YWxlbmNlKHEsIGpwcWwpOwogICAgfQogICAgCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0UGFyYW1ldGVyczEoKSB7CiAgICAgICAgU3RyaW5n\nIGpwcWwgPSAiU0VMRUNUIGMgRlJPTSBDdXN0b21lciBjIFdoZXJlIGMuc3Rh\ndHVzID0gOnN0YXQiOwogICAgICAgIAogICAgICAgIENyaXRlcmlhUXVlcnk8\nQ3VzdG9tZXI+IHEgPSBjYi5jcmVhdGVRdWVyeShDdXN0b21lci5jbGFzcyk7\nCiAgICAgICAgUm9vdDxDdXN0b21lcj4gYyA9IHEuZnJvbShDdXN0b21lci5j\nbGFzcyk7CiAgICAgICAgUGFyYW1ldGVyPEludGVnZXI+IHBhcmFtID0gY2Iu\ncGFyYW1ldGVyKEludGVnZXIuY2xhc3MsICJzdGF0Iik7CiAgICAgICAgcS5z\nZWxlY3QoYykud2hlcmUoY2IuZXF1YWwoYy5nZXQoQ3VzdG9tZXJfLnN0YXR1\ncyksIHBhcmFtKSk7CgogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKG5ldyBR\ndWVyeURlY29yYXRvcigpIHsKICAgICAgICAgICAgcHVibGljIHZvaWQgZGVj\nb3JhdGUoUXVlcnkgcSkgewogICAgICAgICAgICAgICAgcS5zZXRQYXJhbWV0\nZXIoInN0YXQiLCAxKTsKICAgICAgICAgICAgfQogICAgICAgIH0sIHEsIGpw\ncWwpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0UGFyYW1ldGVy\nczIoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIGMgRlJPTSBD\ndXN0b21lciBjIFdoZXJlIGMuc3RhdHVzID0gOnN0YXQgQU5EIGMubmFtZSA9\nIDpuYW1lIjsKICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PEN1c3Rv\nbWVyPiBxID0gY2IuY3JlYXRlUXVlcnkoQ3VzdG9tZXIuY2xhc3MpOwogICAg\nICAgIFJvb3Q8Q3VzdG9tZXI+IGMgPSBxLmZyb20oQ3VzdG9tZXIuY2xhc3Mp\nOwogICAgICAgIFBhcmFtZXRlcjxJbnRlZ2VyPiBwYXJhbTEgPSBjYi5wYXJh\nbWV0ZXIoSW50ZWdlci5jbGFzcywgInN0YXQiKTsKICAgICAgICBQYXJhbWV0\nZXI8U3RyaW5nPiBwYXJhbTIgPSBjYi5wYXJhbWV0ZXIoU3RyaW5nLmNsYXNz\nLCAibmFtZSIpOwogICAgICAgIHEuc2VsZWN0KGMpLndoZXJlKGNiLmFuZChj\nYi5lcXVhbChjLmdldChDdXN0b21lcl8uc3RhdHVzKSwgcGFyYW0xKSwgCiAg\nICAgICAgICAgICAgICBjYi5lcXVhbChjLmdldChDdXN0b21lcl8ubmFtZSks\nIHBhcmFtMikpKTsKCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UobmV3IFF1\nZXJ5RGVjb3JhdG9yKCkgewogICAgICAgICAgICBwdWJsaWMgdm9pZCBkZWNv\ncmF0ZShRdWVyeSBxKSB7CiAgICAgICAgICAgICAgICBxLnNldFBhcmFtZXRl\ncigic3RhdCIsIDEpOwogICAgICAgICAgICAgICAgcS5zZXRQYXJhbWV0ZXIo\nIm5hbWUiLCAidGVzdCIpOwogICAgICAgICAgICB9CiAgICAgICAgfSwgcSwg\nanBxbCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RQYXJhbWV0\nZXJzMygpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJTRUxFQ1QgYyBGUk9N\nIEN1c3RvbWVyIGMgV2hlcmUgYy5zdGF0dXMgPSA6c3RhdCI7CgogICAgICAg\nIENyaXRlcmlhUXVlcnk8Q3VzdG9tZXI+IHEgPSBjYi5jcmVhdGVRdWVyeShD\ndXN0b21lci5jbGFzcyk7CiAgICAgICAgUm9vdDxDdXN0b21lcj4gYyA9IHEu\nZnJvbShDdXN0b21lci5jbGFzcyk7CiAgICAgICAgUGFyYW1ldGVyPEludGVn\nZXI+IHBhcmFtID0gY2IucGFyYW1ldGVyKEludGVnZXIuY2xhc3MsICJzdGF0\nIik7CiAgICAgICAgcS5zZWxlY3QoYykud2hlcmUoY2IuZXF1YWwoYy5nZXQo\nQ3VzdG9tZXJfLnN0YXR1cyksIHBhcmFtKSk7CiAgICAgICAgCiAgICAgICAg\nYXNzZXJ0RXF1aXZhbGVuY2UobmV3IFF1ZXJ5RGVjb3JhdG9yKCkgewogICAg\nICAgICAgICBwdWJsaWMgdm9pZCBkZWNvcmF0ZShRdWVyeSBxKSB7CiAgICAg\nICAgICAgICAgICBxLnNldFBhcmFtZXRlcigic3RhdCIsIDEpOwogICAgICAg\nICAgICB9CiAgICAgICAgfSwgcSwganBxbCk7CiAgICB9CiAgICAKICAgIHB1\nYmxpYyB2b2lkIHRlc3RQYXJhbWV0ZXJzNCgpIHsKICAgICAgICBTdHJpbmcg\nanBxbCA9ICJTRUxFQ1QgYyBGUk9NIEN1c3RvbWVyIGMgV2hlcmUgYy5zdGF0\ndXMgPSA6c3RhdCBBTkQgYy5uYW1lID0gOm5hbWUiOwogICAgICAgIAogICAg\nICAgIENyaXRlcmlhUXVlcnk8Q3VzdG9tZXI+IHEgPSBjYi5jcmVhdGVRdWVy\neShDdXN0b21lci5jbGFzcyk7CiAgICAgICAgUm9vdDxDdXN0b21lcj4gYyA9\nIHEuZnJvbShDdXN0b21lci5jbGFzcyk7CiAgICAgICAgUGFyYW1ldGVyPElu\ndGVnZXI+IHBhcmFtMSA9IGNiLnBhcmFtZXRlcihJbnRlZ2VyLmNsYXNzLCAi\nc3RhdCIpOwogICAgICAgIFBhcmFtZXRlcjxTdHJpbmc+IHBhcmFtMiA9IGNi\nLnBhcmFtZXRlcihTdHJpbmcuY2xhc3MsICJuYW1lIik7CiAgICAgICAgcS5z\nZWxlY3QoYykud2hlcmUoY2IuYW5kKGNiLmVxdWFsKGMuZ2V0KEN1c3RvbWVy\nXy5zdGF0dXMpLCBwYXJhbTEpLCAKICAgICAgICAgICAgICAgIGNiLmVxdWFs\nKGMuZ2V0KEN1c3RvbWVyXy5uYW1lKSwgcGFyYW0yKSkpOwogICAgICAgIGFz\nc2VydEVxdWl2YWxlbmNlKG5ldyBRdWVyeURlY29yYXRvcigpIHsKICAgICAg\nICAgICAgcHVibGljIHZvaWQgZGVjb3JhdGUoUXVlcnkgcSkgewogICAgICAg\nICAgICAgICAgcS5zZXRQYXJhbWV0ZXIoInN0YXQiLCAxKTsKICAgICAgICAg\nICAgICAgIHEuc2V0UGFyYW1ldGVyKCJuYW1lIiwgInRlc3QiKTsKICAgICAg\nICAgICAgfQogICAgICAgIH0sIHEsIGpwcWwpOwogICAgfQogICAgCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0UGFyYW1ldGVyczUoKSB7CiAgICAgICAgU3RyaW5n\nIGpwcWwgPSAiU0VMRUNUIGMgRlJPTSBDdXN0b21lciBjIFdoZXJlIGMuc3Rh\ndHVzIElOICg6Y29sbCkiOwogICAgICAgIAogICAgICAgIENyaXRlcmlhUXVl\ncnk8Q3VzdG9tZXI+IHEgPSBjYi5jcmVhdGVRdWVyeShDdXN0b21lci5jbGFz\ncyk7CiAgICAgICAgUm9vdDxDdXN0b21lcj4gYyA9IHEuZnJvbShDdXN0b21l\nci5jbGFzcyk7CiAgICAgICAgUGFyYW1ldGVyRXhwcmVzc2lvbjxMaXN0PiBw\nYXJhbTEgPSBjYi5wYXJhbWV0ZXIoTGlzdC5jbGFzcywgImNvbGwiKTsKICAg\nICAgICBxLndoZXJlKGMuZ2V0KEN1c3RvbWVyXy5zdGF0dXMpLmluKHBhcmFt\nMSkpOwogICAgICAgIHEuc2VsZWN0KGMpOwogICAgICAgIGZpbmFsIExpc3Qg\ndmFscyA9IG5ldyBBcnJheUxpc3QoKTsKICAgICAgICB2YWxzLmFkZCgxKTsK\nICAgICAgICB2YWxzLmFkZCgyKTsKICAgICAgICBhc3NlcnRFcXVpdmFsZW5j\nZShuZXcgUXVlcnlEZWNvcmF0b3IoKSB7CiAgICAgICAgICAgIHB1YmxpYyB2\nb2lkIGRlY29yYXRlKFF1ZXJ5IHEpIHsKICAgICAgICAgICAgICAgIHEuc2V0\nUGFyYW1ldGVyKCJjb2xsIiwgdmFscyk7CiAgICAgICAgICAgIH0KICAgICAg\nICB9LCBxLCBqcHFsKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVz\ndFNlbGVjdExpc3QxKCkgewogICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVD\nVCB2LmxvY2F0aW9uLnN0cmVldCwgS0VZKGkpLnRpdGxlLCBWQUxVRShpKSBG\nUk9NICIKICAgICAgICAgICAgKyAiVmlkZW9TdG9yZSB2IEpPSU4gdi52aWRl\nb0ludmVudG9yeSBpIFdIRVJFIHYubG9jYXRpb24uemlwQ29kZSA9ICIKICAg\nICAgICAgICAgKyAiJzk0MzAxJyBBTkQgVkFMVUUoaSkgPiAwIjsKICAgICAg\nICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PFR1cGxlPiBxID0gY2IuY3JlYXRl\nVHVwbGVRdWVyeSgpOwogICAgICAgIFJvb3Q8VmlkZW9TdG9yZT4gdiA9IHEu\nZnJvbShWaWRlb1N0b3JlLmNsYXNzKTsKICAgICAgICBNYXBKb2luPFZpZGVv\nU3RvcmUsIE1vdmllLCBJbnRlZ2VyPiBpID0gdi5qb2luKFZpZGVvU3RvcmVf\nLnZpZGVvSW52ZW50b3J5KTsKICAgICAgICBxLndoZXJlKGNiLmFuZCgKICAg\nICAgICBjYi5lcXVhbCh2LmdldChWaWRlb1N0b3JlXy5sb2NhdGlvbikuZ2V0\nKEFkZHJlc3NfLnppcENvZGUpLCAiOTQzMDEiKSwgCiAgICAgICAgY2IuZ3Qo\naS52YWx1ZSgpLCAwKSkpOwogICAgICAgIHEubXVsdGlzZWxlY3Qodi5nZXQo\nVmlkZW9TdG9yZV8ubG9jYXRpb24pLmdldChBZGRyZXNzXy5zdHJlZXQpLCAK\nICAgICAgICAgICAgICAgIGkua2V5KCkuZ2V0KE1vdmllXy50aXRsZSksIAog\nICAgICAgICAgICAgICAgaS52YWx1ZSgpKTsKCiAgICAgICAgYXNzZXJ0RXF1\naXZhbGVuY2UocSwganBxbCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVz\ndE5ld0NvbnN0cnVjdCgpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJTRUxF\nQ1QgTkVXIEN1c3RvbWVyRGV0YWlscyhjLmlkLCBjLnN0YXR1cykgRlJPTSBD\ndXN0b21lciBjIjsKICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PEN1\nc3RvbWVyRGV0YWlscz4gcSA9IGNiLmNyZWF0ZVF1ZXJ5KEN1c3RvbWVyRGV0\nYWlscy5jbGFzcyk7CgogICAgICAgIFJvb3Q8Q3VzdG9tZXI+IGMgPSBxLmZy\nb20oQ3VzdG9tZXIuY2xhc3MpOwogICAgICAgIHEuc2VsZWN0KGNiLmNvbnN0\ncnVjdChDdXN0b21lckRldGFpbHMuY2xhc3MsIGMuZ2V0KEN1c3RvbWVyXy5p\nZCksIGMuZ2V0KEN1c3RvbWVyXy5zdGF0dXMpKSk7CiAgICAgICAgYXNzZXJ0\nRXF1aXZhbGVuY2UocSwganBxbCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2\nb2lkIHRlc3RDb25zdHJ1Y3RvckluUHJvamVjdGlvbigpIHsKICAgICAgICBT\ndHJpbmcganBxbCA9ICJTRUxFQ1QgTkVXIEN1c3RvbWVyRGV0YWlscyhjLmlk\nLCBjLnN0YXR1cywgby5xdWFudGl0eSkgIgogICAgICAgICAgICAgICAgICAg\nICsgIkZST00gQ3VzdG9tZXIgYyBKT0lOIGMub3JkZXJzIG8gV0hFUkUgby5x\ndWFudGl0eSA+IDEwMCI7CiAgICAgICAgCiAgICAgICAgQ3JpdGVyaWFRdWVy\neTxDdXN0b21lckRldGFpbHM+IHEgPSBjYi5jcmVhdGVRdWVyeShDdXN0b21l\nckRldGFpbHMuY2xhc3MpOwogICAgICAgIFJvb3Q8Q3VzdG9tZXI+IGMgPSBx\nLmZyb20oQ3VzdG9tZXIuY2xhc3MpOwogICAgICAgIFNldEpvaW48Q3VzdG9t\nZXIsIE9yZGVyPiBvID0gYy5qb2luKEN1c3RvbWVyXy5vcmRlcnMpOwogICAg\nICAgIHEud2hlcmUoY2IuZ3Qoby5nZXQoT3JkZXJfLnF1YW50aXR5KSwgMTAw\nKSk7CiAgICAgICAgcS5zZWxlY3QoY2IuY29uc3RydWN0KEN1c3RvbWVyRGV0\nYWlscy5jbGFzcywgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjLmdl\ndChDdXN0b21lcl8uaWQpLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIGMuZ2V0KEN1c3RvbWVyXy5zdGF0dXMpLCAKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgIG8uZ2V0KE9yZGVyXy5xdWFudGl0eSkpKTsKCiAgICAgICAg\nYXNzZXJ0RXF1aXZhbGVuY2UocSwganBxbCk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgdGVzdE11bHRpcGxlQ29uc3RydWN0b3JJblByb2plY3Rpb24oKSB7\nCiAgICAgICAgU3RyaW5nIGpwcWwgPSAiU0VMRUNUIE5FVyBDdXN0b21lckRl\ndGFpbHMoYy5pZCwgYy5zdGF0dXMpLCAiIAogICAgICAgICAgICAgICAgICAg\nICsgIk5FVyBDdXN0b21lckZ1bGxOYW1lKGMuZmlyc3ROYW1lLCBjLmxhc3RO\nYW1lKSAiCiAgICAgICAgICAgICAgICAgICAgKyAiRlJPTSBDdXN0b21lciBj\nIjsKICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PD8+IHEgPSBjYi5j\ncmVhdGVRdWVyeSgpOwogICAgICAgIFJvb3Q8Q3VzdG9tZXI+IGMgPSBxLmZy\nb20oQ3VzdG9tZXIuY2xhc3MpOwogICAgICAgIHEubXVsdGlzZWxlY3QoY2Iu\nY29uc3RydWN0KEN1c3RvbWVyRGV0YWlscy5jbGFzcywgCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgYy5nZXQoQ3VzdG9tZXJfLmlkKSwgCiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgYy5nZXQoQ3VzdG9tZXJfLnN0YXR1\ncykpLAogICAgICAgICAgICAgICAgY2IuY29uc3RydWN0KEN1c3RvbWVyRnVs\nbE5hbWUuY2xhc3MsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMu\nZ2V0KEN1c3RvbWVyXy5maXJzdE5hbWUpLCAKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICBjLmdldChDdXN0b21lcl8ubGFzdE5hbWUpKQogICAgICAg\nICk7CiAgICAgICAgZW0uY3JlYXRlUXVlcnkocSkuZ2V0UmVzdWx0TGlzdCgp\nOwogICAgICAgIAogICAgICAgIC8vIGFzc2VydEVxdWl2YWxlbmNlKHEsIGpw\ncWwpOwogICAgfQogICAgCiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RTdWJx\ndWVyaWVzMSgpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJTRUxFQ1QgZ29v\nZEN1c3RvbWVyIEZST00gQ3VzdG9tZXIgZ29vZEN1c3RvbWVyIFdIRVJFICIK\nICAgICAgICAgICAgKyAiZ29vZEN1c3RvbWVyLmJhbGFuY2VPd2VkIDwgKFNF\nTEVDVCBBVkcoYy5iYWxhbmNlT3dlZCkgIiAKICAgICAgICAgICAgKyAiIEZS\nT00gIgogICAgICAgICAgICArICJDdXN0b21lciBjKSI7CiAgICAgICAgQ3Jp\ndGVyaWFRdWVyeTxDdXN0b21lcj4gcSA9IGNiLmNyZWF0ZVF1ZXJ5KEN1c3Rv\nbWVyLmNsYXNzKTsKICAgICAgICBSb290PEN1c3RvbWVyPiBnb29kQ3VzdG9t\nZXIgPSBxLmZyb20oQ3VzdG9tZXIuY2xhc3MpOwogICAgICAgIFN1YnF1ZXJ5\nPERvdWJsZT4gc3EgPSBxLnN1YnF1ZXJ5KERvdWJsZS5jbGFzcyk7CiAgICAg\nICAgUm9vdDxDdXN0b21lcj4gYyA9IHNxLmZyb20oQ3VzdG9tZXIuY2xhc3Mp\nOwogICAgICAgIHEud2hlcmUoY2IubHQoZ29vZEN1c3RvbWVyLmdldChDdXN0\nb21lcl8uYmFsYW5jZU93ZWQpLCBzcS5zZWxlY3QoY2IKICAgICAgICAgICAg\nICAgIC5hdmcoYy5nZXQoQ3VzdG9tZXJfLmJhbGFuY2VPd2VkKSkpKSk7CiAg\nICAgICAgcS5zZWxlY3QoZ29vZEN1c3RvbWVyKTsKCiAgICAgICAgYXNzZXJ0\nRXF1aXZhbGVuY2UocSwganBxbCk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\ndGVzdFN1YnF1ZXJpZXMyKCkgewogICAgICAgIFN0cmluZyBqcHFsID0gIlNF\nTEVDVCBESVNUSU5DVCBlbXAgRlJPTSBFbXBsb3llZSBlbXAgV0hFUkUgRVhJ\nU1RTICgiCiAgICAgICAgICAgICsgIlNFTEVDVCBzcG91c2VFbXAgRlJPTSBF\nbXBsb3llZSBzcG91c2VFbXAgV0hFUkUgc3BvdXNlRW1wID0iCiAgICAgICAg\nICAgICsgIiBlbXAuc3BvdXNlKSI7CiAgICAgICAgQ3JpdGVyaWFRdWVyeTxF\nbXBsb3llZT4gcSA9IGNiLmNyZWF0ZVF1ZXJ5KEVtcGxveWVlLmNsYXNzKTsK\nICAgICAgICBSb290PEVtcGxveWVlPiBlbXAgPSBxLmZyb20oRW1wbG95ZWUu\nY2xhc3MpOwogICAgICAgIFN1YnF1ZXJ5PEVtcGxveWVlPiBzcSA9IHEuc3Vi\ncXVlcnkoRW1wbG95ZWUuY2xhc3MpOwogICAgICAgIFJvb3Q8RW1wbG95ZWU+\nIHNwb3VzZUVtcCA9IHNxLmZyb20oRW1wbG95ZWUuY2xhc3MpOwogICAgICAg\nIHNxLnNlbGVjdChzcG91c2VFbXApOwogICAgICAgIHNxLndoZXJlKGNiLmVx\ndWFsKHNwb3VzZUVtcCwgZW1wLmdldChFbXBsb3llZV8uc3BvdXNlKSkpOwog\nICAgICAgIHEud2hlcmUoY2IuZXhpc3RzKHNxKSk7CiAgICAgICAgcS5zZWxl\nY3QoZW1wKS5kaXN0aW5jdCh0cnVlKTsKCiAgICAgICAgYXNzZXJ0RXF1aXZh\nbGVuY2UocSwganBxbCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFN1\nYnF1ZXJpZXMzKCkgewogICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVDVCBl\nbXAgRlJPTSBFbXBsb3llZSBlbXAgV0hFUkUgZW1wLnNhbGFyeSA+IEFMTCAo\nIgogICAgICAgICAgICArICJTRUxFQ1QgbS5zYWxhcnkgRlJPTSBNYW5hZ2Vy\nIG0gV0hFUkUgbS5kZXBhcnRtZW50ID0gIgogICAgICAgICAgICArICJlbXAu\nZGVwYXJ0bWVudCkiOwogICAgICAgIENyaXRlcmlhUXVlcnk8RW1wbG95ZWU+\nIHEgPSBjYi5jcmVhdGVRdWVyeShFbXBsb3llZS5jbGFzcyk7CiAgICAgICAg\nUm9vdDxFbXBsb3llZT4gZW1wID0gcS5mcm9tKEVtcGxveWVlLmNsYXNzKTsK\nICAgICAgICBxLnNlbGVjdChlbXApOwogICAgICAgIFN1YnF1ZXJ5PEJpZ0Rl\nY2ltYWw+IHNxID0gcS5zdWJxdWVyeShCaWdEZWNpbWFsLmNsYXNzKTsKICAg\nICAgICBSb290PE1hbmFnZXI+IG0gPSBzcS5mcm9tKE1hbmFnZXIuY2xhc3Mp\nOwogICAgICAgIHNxLnNlbGVjdChtLmdldChNYW5hZ2VyXy5zYWxhcnkpKTsK\nICAgICAgICBzcS53aGVyZShjYi5lcXVhbChtLmdldChNYW5hZ2VyXy5kZXBh\ncnRtZW50KSwgZW1wCiAgICAgICAgICAgICAgICAuZ2V0KEVtcGxveWVlXy5k\nZXBhcnRtZW50KSkpOwogICAgICAgIHEud2hlcmUoY2IuZ3QoZW1wLmdldChF\nbXBsb3llZV8uc2FsYXJ5KSwgY2IuYWxsKHNxKSkpOwoKICAgICAgICBhc3Nl\ncnRFcXVpdmFsZW5jZShxLCBqcHFsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0U3VicXVlcmllczQoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAi\nU0VMRUNUIGMgRlJPTSBDdXN0b21lciBjIFdIRVJFICIKICAgICAgICAgICAg\nKyAiKFNFTEVDVCBDT1VOVChvKSBGUk9NIGMub3JkZXJzIG8pID4gMTAiOwog\nICAgICAgIENyaXRlcmlhUXVlcnk8Q3VzdG9tZXI+IHEgPSBjYi5jcmVhdGVR\ndWVyeShDdXN0b21lci5jbGFzcyk7CiAgICAgICAgUm9vdDxDdXN0b21lcj4g\nYzEgPSBxLmZyb20oQ3VzdG9tZXIuY2xhc3MpOwogICAgICAgIHEuc2VsZWN0\nKGMxKTsKICAgICAgICBTdWJxdWVyeTxMb25nPiBzcTMgPSBxLnN1YnF1ZXJ5\nKExvbmcuY2xhc3MpOwogICAgICAgIFJvb3Q8Q3VzdG9tZXI+IGMyID0gc3Ez\nLmNvcnJlbGF0ZShjMSk7CiAgICAgICAgSm9pbjxDdXN0b21lciwgT3JkZXI+\nIG8gPSBjMi5qb2luKEN1c3RvbWVyXy5vcmRlcnMpOwogICAgICAgIHEud2hl\ncmUoY2IuZ3Qoc3EzLnNlbGVjdChjYi5jb3VudChvKSksIDEwKSk7CgogICAg\nICAgIGFzc2VydEVxdWl2YWxlbmNlKHEsIGpwcWwpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHRlc3RTdWJxdWVyaWVzNSgpIHsKICAgICAgICBTdHJpbmcg\nanBxbCA9ICJTRUxFQ1QgbyBGUk9NIE9yZGVyIG8gV0hFUkUgMTAwMDAgPCBB\nTEwgKCIKICAgICAgICAgICAgKyAiU0VMRUNUIGEuYmFsYW5jZSBGUk9NIG8u\nY3VzdG9tZXIgYyBKT0lOIGMuYWNjb3VudHMgYSkiOwogICAgICAgIENyaXRl\ncmlhUXVlcnk8T3JkZXI+IHEgPSBjYi5jcmVhdGVRdWVyeShPcmRlci5jbGFz\ncyk7CiAgICAgICAgUm9vdDxPcmRlcj4gbyA9IHEuZnJvbShPcmRlci5jbGFz\ncyk7CiAgICAgICAgcS5zZWxlY3Qobyk7CiAgICAgICAgU3VicXVlcnk8SW50\nZWdlcj4gc3EgPSBxLnN1YnF1ZXJ5KEludGVnZXIuY2xhc3MpOwogICAgICAg\nIFJvb3Q8T3JkZXI+IG9zcSA9IHNxLmNvcnJlbGF0ZShvKTsKICAgICAgICBK\nb2luPE9yZGVyLCBDdXN0b21lcj4gYyA9IG9zcS5qb2luKE9yZGVyXy5jdXN0\nb21lcik7CiAgICAgICAgSm9pbjxDdXN0b21lciwgQWNjb3VudD4gYSA9IGMu\nam9pbihDdXN0b21lcl8uYWNjb3VudHMpOwogICAgICAgIHNxLnNlbGVjdChh\nLmdldChBY2NvdW50Xy5iYWxhbmNlKSk7CiAgICAgICAgcS53aGVyZShjYi5s\ndChjYi5saXRlcmFsKDEwMDAwKSwgY2IuYWxsKHNxKSkpOwoKICAgICAgICBh\nc3NlcnRFcXVpdmFsZW5jZShxLCBqcHFsKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0U3VicXVlcmllczYoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwg\nPSAiU0VMRUNUIG8gRlJPTSBPcmRlciBvIEpPSU4gby5jdXN0b21lciBjIFdI\nRVJFIDEwMDAwIDwgIgogICAgICAgICAgICArICJBTEwgKFNFTEVDVCBhLmJh\nbGFuY2UgRlJPTSBjLmFjY291bnRzIGEpIjsKICAgICAgICBDcml0ZXJpYVF1\nZXJ5PE9yZGVyPiBxID0gY2IuY3JlYXRlUXVlcnkoT3JkZXIuY2xhc3MpOwog\nICAgICAgIFJvb3Q8T3JkZXI+IG8gPSBxLmZyb20oT3JkZXIuY2xhc3MpOwog\nICAgICAgIHEuc2VsZWN0KG8pOwogICAgICAgIEpvaW48T3JkZXIsIEN1c3Rv\nbWVyPiBjID0gby5qb2luKE9yZGVyXy5jdXN0b21lcik7CiAgICAgICAgU3Vi\ncXVlcnk8SW50ZWdlcj4gc3EgPSBxLnN1YnF1ZXJ5KEludGVnZXIuY2xhc3Mp\nOwogICAgICAgIEpvaW48T3JkZXIsIEN1c3RvbWVyPiBjc3EgPSBzcS5jb3Jy\nZWxhdGUoYyk7CiAgICAgICAgSm9pbjxDdXN0b21lciwgQWNjb3VudD4gYSA9\nIGNzcS5qb2luKEN1c3RvbWVyXy5hY2NvdW50cyk7CiAgICAgICAgc3Euc2Vs\nZWN0KGEuZ2V0KEFjY291bnRfLmJhbGFuY2UpKTsKICAgICAgICBxLndoZXJl\nKGNiLmx0KGNiLmxpdGVyYWwoMTAwMDApLCBjYi5hbGwoc3EpKSk7CgogICAg\nICAgIGFzc2VydEVxdWl2YWxlbmNlKHEsIGpwcWwpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHRlc3RHcm91cEJ5QW5kSGF2aW5nKCkgewogICAgICAgIFN0\ncmluZyBqcHFsID0gIlNFTEVDVCBjLnN0YXR1cywgQVZHKGMuZmlsbGVkT3Jk\nZXJDb3VudCksIENPVU5UKGMpIEZST00gIgogICAgICAgICAgICArICJDdXN0\nb21lciBjIEdST1VQIEJZIGMuc3RhdHVzIEhBVklORyBjLnN0YXR1cyBJTiAo\nMSwgMikiOwogICAgICAgIENyaXRlcmlhUXVlcnk8VHVwbGU+IHEgPSBjYi5j\ncmVhdGVUdXBsZVF1ZXJ5KCk7CiAgICAgICAgUm9vdDxDdXN0b21lcj4gYyA9\nIHEuZnJvbShDdXN0b21lci5jbGFzcyk7CiAgICAgICAgcS5ncm91cEJ5KGMu\nZ2V0KEN1c3RvbWVyXy5zdGF0dXMpKTsKICAgICAgICBxLmhhdmluZyhjYi5p\nbihjLmdldChDdXN0b21lcl8uc3RhdHVzKSkudmFsdWUoMSkudmFsdWUoMikp\nOwogICAgICAgIHEubXVsdGlzZWxlY3QoYy5nZXQoQ3VzdG9tZXJfLnN0YXR1\ncyksIGNiLmF2ZyhjCiAgICAgICAgICAgICAgICAuZ2V0KEN1c3RvbWVyXy5m\naWxsZWRPcmRlckNvdW50KSksIGNiLmNvdW50KGMpKTsKCiAgICAgICAgYXNz\nZXJ0RXF1aXZhbGVuY2UocSwganBxbCk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgdGVzdE9yZGVyaW5nMSgpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJT\nRUxFQ1QgbyBGUk9NIEN1c3RvbWVyIGMgSk9JTiBjLm9yZGVycyBvICIKICAg\nICAgICAgICAgKyAiSk9JTiBjLmFkZHJlc3MgYSBXSEVSRSBhLnN0YXRlID0g\nJ0NBJyBPUkRFUiBCWSBvLnF1YW50aXR5IERFU0MsICIKICAgICAgICAgICAg\nKyAiby50b3RhbENvc3QiOwogICAgICAgIENyaXRlcmlhUXVlcnk8T3JkZXI+\nIHEgPSBjYi5jcmVhdGVRdWVyeShPcmRlci5jbGFzcyk7CiAgICAgICAgUm9v\ndDxDdXN0b21lcj4gYyA9IHEuZnJvbShDdXN0b21lci5jbGFzcyk7CiAgICAg\nICAgSm9pbjxDdXN0b21lciwgT3JkZXI+IG8gPSBjLmpvaW4oQ3VzdG9tZXJf\nLm9yZGVycyk7CiAgICAgICAgSm9pbjxDdXN0b21lciwgQWRkcmVzcz4gYSA9\nIGMuam9pbihDdXN0b21lcl8uYWRkcmVzcyk7CiAgICAgICAgcS53aGVyZShj\nYi5lcXVhbChhLmdldChBZGRyZXNzXy5zdGF0ZSksICJDQSIpKTsKICAgICAg\nICBxLm9yZGVyQnkoY2IuZGVzYyhvLmdldChPcmRlcl8ucXVhbnRpdHkpKSwg\nY2IuYXNjKG8KICAgICAgICAgICAgICAgIC5nZXQoT3JkZXJfLnRvdGFsQ29z\ndCkpKTsKICAgICAgICBxLnNlbGVjdChvKTsKCiAgICAgICAgYXNzZXJ0RXF1\naXZhbGVuY2UocSwganBxbCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVz\ndE9yZGVyaW5nMigpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJTRUxFQ1Qg\nby5xdWFudGl0eSwgYS56aXBDb2RlIEZST00gQ3VzdG9tZXIgYyAiCiAgICAg\nICAgICAgICsgIkpPSU4gYy5vcmRlcnMgbyBKT0lOIGMuYWRkcmVzcyBhIFdI\nRVJFIGEuc3RhdGUgPSAnQ0EnICIKICAgICAgICAgICAgKyAiT1JERVIgQlkg\nby5xdWFudGl0eSwgYS56aXBDb2RlIjsKICAgICAgICBDcml0ZXJpYVF1ZXJ5\nPFR1cGxlPiBxID0gY2IuY3JlYXRlVHVwbGVRdWVyeSgpOwogICAgICAgIFJv\nb3Q8Q3VzdG9tZXI+IGMgPSBxLmZyb20oQ3VzdG9tZXIuY2xhc3MpOwogICAg\nICAgIEpvaW48Q3VzdG9tZXIsIE9yZGVyPiBvID0gYy5qb2luKEN1c3RvbWVy\nXy5vcmRlcnMpOwogICAgICAgIEpvaW48Q3VzdG9tZXIsIEFkZHJlc3M+IGEg\nPSBjLmpvaW4oQ3VzdG9tZXJfLmFkZHJlc3MpOwogICAgICAgIHEud2hlcmUo\nY2IuZXF1YWwoYS5nZXQoQWRkcmVzc18uc3RhdGUpLCAiQ0EiKSk7CiAgICAg\nICAgcS5vcmRlckJ5KGNiLmFzYyhvLmdldChPcmRlcl8ucXVhbnRpdHkpKSwg\nY2IuYXNjKGEKICAgICAgICAgICAgICAgIC5nZXQoQWRkcmVzc18uemlwQ29k\nZSkpKTsKICAgICAgICBxLm11bHRpc2VsZWN0KG8uZ2V0KE9yZGVyXy5xdWFu\ndGl0eSksIGEuZ2V0KEFkZHJlc3NfLnppcENvZGUpKTsKCiAgICAgICAgYXNz\nZXJ0RXF1aXZhbGVuY2UocSwganBxbCk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgdGVzdE9yZGVyaW5nMygpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJT\nRUxFQ1Qgby5xdWFudGl0eSwgby50b3RhbENvc3QgKiAxLjA4IEFTIHRheGVk\nQ29zdCwgIgogICAgICAgICAgICArICJhLnppcENvZGUgRlJPTSBDdXN0b21l\nciBjIEpPSU4gYy5vcmRlcnMgbyBKT0lOIGMuYWRkcmVzcyBhICIKICAgICAg\nICAgICAgKyAiV0hFUkUgYS5zdGF0ZSA9ICdDQScgQU5EIGEuY291bnR5ID0g\nJ1NhbnRhIENsYXJhJyAiCiAgICAgICAgICAgICsgIk9SREVSIEJZIG8ucXVh\nbnRpdHksIHRheGVkQ29zdCwgYS56aXBDb2RlIjsKICAgICAgICBDcml0ZXJp\nYVF1ZXJ5PFR1cGxlPiBxID0gY2IuY3JlYXRlVHVwbGVRdWVyeSgpOwogICAg\nICAgIFJvb3Q8Q3VzdG9tZXI+IGMgPSBxLmZyb20oQ3VzdG9tZXIuY2xhc3Mp\nOwogICAgICAgIEpvaW48Q3VzdG9tZXIsIE9yZGVyPiBvID0gYy5qb2luKEN1\nc3RvbWVyXy5vcmRlcnMpOwogICAgICAgIEpvaW48Q3VzdG9tZXIsIEFkZHJl\nc3M+IGEgPSBjLmpvaW4oQ3VzdG9tZXJfLmFkZHJlc3MpOwogICAgICAgIEV4\ncHJlc3Npb248RG91YmxlPiB0YXhlZENvc3QgPSAoRXhwcmVzc2lvbjxEb3Vi\nbGU+KWNiLnByb2Qoby5nZXQoT3JkZXJfLnRvdGFsQ29zdCksIDEuMDgpLmFs\naWFzKCJ0YXhlZENvc3QiKTsKICAgICAgICBxLndoZXJlKGNiLmVxdWFsKGEu\nZ2V0KEFkZHJlc3NfLnN0YXRlKSwgIkNBIiksIAogICAgICAgICAgICAgICAg\nY2IuZXF1YWwoYS5nZXQoQWRkcmVzc18uY291bnR5KSwgIlNhbnRhIENsYXJh\nIikpOwogICAgICAgIHEub3JkZXJCeShjYi5hc2Moby5nZXQoT3JkZXJfLnF1\nYW50aXR5KSksIAogICAgICAgICAgICAgICAgY2IuYXNjKHRheGVkQ29zdCks\nCiAgICAgICAgICAgICAgICBjYi5hc2MoYS5nZXQoQWRkcmVzc18uemlwQ29k\nZSkpKTsKICAgICAgICBxLm11bHRpc2VsZWN0KG8uZ2V0KE9yZGVyXy5xdWFu\ndGl0eSksIHRheGVkQ29zdCwgYS5nZXQoQWRkcmVzc18uemlwQ29kZSkpOwoK\nICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShxLCBqcHFsKTsKICAgIH0KICAg\nIAogICAgcHVibGljIHZvaWQgdGVzdE9yZGVyaW5nNCgpIHsKICAgICAgICBT\ndHJpbmcganBxbCA9ICJTRUxFQ1QgYyBGUk9NIEN1c3RvbWVyIGMgT1JERVIg\nQlkgYy5uYW1lIERFU0MsIGMuc3RhdHVzIjsKICAgICAgICBDcml0ZXJpYVF1\nZXJ5PEN1c3RvbWVyPiBxID0gY2IuY3JlYXRlUXVlcnkoQ3VzdG9tZXIuY2xh\nc3MpOwogICAgICAgIFJvb3Q8Q3VzdG9tZXI+IGMgPSBxLmZyb20oQ3VzdG9t\nZXIuY2xhc3MpOwogICAgICAgIHEub3JkZXJCeShjYi5kZXNjKGMuZ2V0KEN1\nc3RvbWVyXy5uYW1lKSksIAogICAgICAgICAgICAgICAgICBjYi5hc2MoYy5n\nZXQoQ3VzdG9tZXJfLnN0YXR1cykpKTsKICAgICAgICBxLnNlbGVjdChjKTsK\nCiAgICAgICAgYXNzZXJ0RXF1aXZhbGVuY2UocSwganBxbCk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgdGVzdE9yZGVyaW5nNSgpIHsKICAgICAgICBTdHJp\nbmcganBxbCA9ICJTRUxFQ1QgYy5maXJzdE5hbWUsIGMubGFzdE5hbWUsIGMu\nYmFsYW5jZU93ZWQgRlJPTSBDdXN0b21lciBjIE9SREVSIEJZIGMubmFtZSBE\nRVNDLCBjLnN0YXR1cyI7CiAgICAgICAgCiAgICAgICAgQ3JpdGVyaWFRdWVy\neTxUdXBsZT4gcSA9IGNiLmNyZWF0ZVR1cGxlUXVlcnkoKTsKICAgICAgICBS\nb290PEN1c3RvbWVyPiBjID0gcS5mcm9tKEN1c3RvbWVyLmNsYXNzKTsKICAg\nICAgICBxLm9yZGVyQnkoY2IuZGVzYyhjLmdldChDdXN0b21lcl8ubmFtZSkp\nLCBjYi5hc2MoYwogICAgICAgICAgICAgICAgLmdldChDdXN0b21lcl8uc3Rh\ndHVzKSkpOwogICAgICAgIHEubXVsdGlzZWxlY3QoYy5nZXQoQ3VzdG9tZXJf\nLmZpcnN0TmFtZSksIGMuZ2V0KEN1c3RvbWVyXy5sYXN0TmFtZSksIGMKICAg\nICAgICAgICAgICAgIC5nZXQoQ3VzdG9tZXJfLmJhbGFuY2VPd2VkKSk7Cgog\nICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKHEsIGpwcWwpOwogICAgfQogICAg\nCiAgICAvKioKICAgICAqIDAtYXJnIGZ1bmN0aW9uIHdvcmtzIG9ubHkgaWYg\ndGhlcmUgaXMgb3RoZXIgcHJvamVjdGlvbiBpdGVtcyB0byBkZXRlcm1pbmUg\ndGhlIHRhYmxlIHRvIHNlbGVjdCBmcm9tLiAKICAgICAqLwogICAgQEFsbG93\nRmFpbHVyZShtZXNzYWdlPSJydW5zIG9ubHkgb24gZGF0YWJhc2VzIHdpdGgg\nQ1VSUkVOVF9VU0VSKCkgZnVuY3Rpb24gZS5nLiBNeVNRTCBidXQgbm90IERl\ncmJ5IikKICAgIHB1YmxpYyB2b2lkIHRlc3RGdW5jdGlvbldpdGhOb0FyZ3Vt\nZW50KCkgewogICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVDVCBjLmJhbGFu\nY2VPd2VkIEZST00gQ3VzdG9tZXIgYyI7CiAgICAgICAgU3RyaW5nIHNxbCA9\nICJTRUxFQ1QgQ1VSUkVOVF9VU0VSKCksIHQwLmJhbGFuY2VPd2VkIEZST00g\nQ1JfQ1VTVCB0MCI7CiAgICAgICAgCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxU\ndXBsZT4gcSA9IGNiLmNyZWF0ZVR1cGxlUXVlcnkoKTsKICAgICAgICBSb290\nPEN1c3RvbWVyPiBjID0gcS5mcm9tKEN1c3RvbWVyLmNsYXNzKTsKICAgICAg\nICBxLm11bHRpc2VsZWN0KGNiLmZ1bmN0aW9uKCJDVVJSRU5UX1VTRVIiLCBT\ndHJpbmcuY2xhc3MsIChFeHByZXNzaW9uPD8+W10pbnVsbCksIGMuZ2V0KEN1\nc3RvbWVyXy5iYWxhbmNlT3dlZCkpOwogICAgICAgIAogICAgICAgIGV4ZWN1\ndGVBbmRDb21wYXJlU1FMKHEsIHNxbCk7Ci8vICAgICAgICBhc3NlcnRFcXVp\ndmFsZW5jZShxLCBqcHFsKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nRnVuY3Rpb25XaXRoT25lQXJndW1lbnQoKSB7CiAgICAgICAgU3RyaW5nIGpw\ncWwgPSAiU0VMRUNUIE1BWChjLmJhbGFuY2VPd2VkKSBGUk9NIEN1c3RvbWVy\nIGMiOwogICAgICAgIAogICAgICAgIENyaXRlcmlhUXVlcnk8VHVwbGU+IHEg\nPSBjYi5jcmVhdGVUdXBsZVF1ZXJ5KCk7CiAgICAgICAgUm9vdDxDdXN0b21l\ncj4gYyA9IHEuZnJvbShDdXN0b21lci5jbGFzcyk7CiAgICAgICAgcS5tdWx0\naXNlbGVjdChjYi5mdW5jdGlvbigiTUFYIiwgSW50ZWdlci5jbGFzcywgYy5n\nZXQoQ3VzdG9tZXJfLmJhbGFuY2VPd2VkKSkpOwogICAgICAgIAogICAgICAg\nIGFzc2VydEVxdWl2YWxlbmNlKHEsIGpwcWwpOwoKICAgIH0KICAgIAogICAg\ncHVibGljIHZvaWQgdGVzdEZ1bmN0aW9uV2l0aFR3b0FyZ3VtZW50KCkgewog\nICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVDVCBNT0QoYy5iYWxhbmNlT3dl\nZCwxMCkgRlJPTSBDdXN0b21lciBjIjsKICAgICAgICAKICAgICAgICBpZiAo\nZ2V0RGljdGlvbmFyeSgpLnN1cHBvcnRzTW9kT3BlcmF0b3IpIHsKICAgICAg\nICAgICAgLy8gQEFsbG93RmFpbHVyZQogICAgICAgICAgICAvLyBUT0RPIC0g\nU2tpcCBleGVjdXRpbmcgdGhpcyB1bnRpbCBPUEVOSlBBLTE2eHggaXMgZml4\nZWQsIGFzIENyaXRlcmlhQnVpbGRlciBhbHdheXMKICAgICAgICAgICAgLy8g\nZ2VuZXJhdGVzIEpQUUwgd2l0aCBNT0QoLCkgaW5zdGVhZCBvZiB1c2luZyAi\nJSIgZm9yIE1pY3Jvc29mdCBTUUwgU2VydmVyCiAgICAgICAgICAgIGdldEVu\ndGl0eU1hbmFnZXJGYWN0b3J5KCkuZ2V0Q29uZmlndXJhdGlvbigpLmdldExv\nZygidGVzdCIpLndhcm4oCiAgICAgICAgICAgICAgICAiU0tJUFBJTkcgdGVz\ndEZ1bmN0aW9uV2l0aFR3b0FyZ3VtZW50KCkgZm9yIFNRTFNlcnZlciIpOwog\nICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIAogICAgICAg\nIENyaXRlcmlhUXVlcnk8VHVwbGU+IHEgPSBjYi5jcmVhdGVUdXBsZVF1ZXJ5\nKCk7CiAgICAgICAgUm9vdDxDdXN0b21lcj4gYyA9IHEuZnJvbShDdXN0b21l\nci5jbGFzcyk7CiAgICAgICAgcS5tdWx0aXNlbGVjdChjYi5mdW5jdGlvbigi\nTU9EIiwgSW50ZWdlci5jbGFzcywgYy5nZXQoQ3VzdG9tZXJfLmJhbGFuY2VP\nd2VkKSwgY2IubGl0ZXJhbCgxMCkpKTsKICAgICAgICAKICAgICAgICBhc3Nl\ncnRFcXVpdmFsZW5jZShxLCBqcHFsKTsKCiAgICB9CiAgICAKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RGdW5jdGlvbldpdGhGdW5jdGlvbkFyZ3VtZW50SW5PcmRl\nckJ5KCkgewogICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVDVCBNT0QoYy5i\nYWxhbmNlT3dlZCwxMCkgRlJPTSBDdXN0b21lciBjIFdIRVJFIExFTkdUSChj\nLm5hbWUpPjMgT1JERVIgQlkgTEVOR1RIKGMubmFtZSkiOwogICAgICAgIFN0\ncmluZyBzcWwgPSAiU0VMRUNUIE1PRCh0MC5iYWxhbmNlT3dlZCwgPyksIExF\nTkdUSCh0MC5uYW1lKSBGUk9NIENSX0NVU1QgdDAgV0hFUkUgKExFTkdUSCh0\nMC5uYW1lKSA+ID8pICIgKwogICAgICAgICAgICAgICAgICAgICAiT1JERVIg\nQlkgTEVOR1RIKHQwLm5hbWUpIEFTQyI7CiAgICAgICAgCiAgICAgICAgaWYg\nKGdldERpY3Rpb25hcnkoKS5zdXBwb3J0c01vZE9wZXJhdG9yKSB7CiAgICAg\nICAgICAgIC8vIEBBbGxvd0ZhaWx1cmUKICAgICAgICAgICAgLy8gVE9ETyAt\nIFNraXAgZXhlY3V0aW5nIHRoaXMgdW50aWwgT1BFTkpQQS0xNnh4IGlzIGZp\neGVkLCBhcyBDcml0ZXJpYUJ1aWxkZXIgYWx3YXlzCiAgICAgICAgICAgIC8v\nIGdlbmVyYXRlcyBKUFFMIHdpdGggTU9EKCwpIGluc3RlYWQgb2YgdXNpbmcg\nIiUiIGZvciBNaWNyb3NvZnQgU1FMIFNlcnZlcgogICAgICAgICAgICBnZXRF\nbnRpdHlNYW5hZ2VyRmFjdG9yeSgpLmdldENvbmZpZ3VyYXRpb24oKS5nZXRM\nb2coInRlc3QiKS53YXJuKAogICAgICAgICAgICAiU0tJUFBJTkcgdGVzdEZ1\nbmN0aW9uV2l0aEZ1bmN0aW9uQXJndW1lbnRJbk9yZGVyQnkoKSBmb3IgU1FM\nU2VydmVyIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAg\nICAgIENyaXRlcmlhUXVlcnk8VHVwbGU+IHEgPSBjYi5jcmVhdGVUdXBsZVF1\nZXJ5KCk7CiAgICAgICAgUm9vdDxDdXN0b21lcj4gYyA9IHEuZnJvbShDdXN0\nb21lci5jbGFzcyk7CiAgICAgICAgRXhwcmVzc2lvbjxJbnRlZ2VyPiBuYW1l\nTGVuZ3RoID0gY2IuZnVuY3Rpb24oIkxFTkdUSCIsIEludGVnZXIuY2xhc3Ms\nIGMuZ2V0KEN1c3RvbWVyXy5uYW1lKSk7CiAgICAgICAgcS5tdWx0aXNlbGVj\ndChjYi5mdW5jdGlvbigiTU9EIiwgSW50ZWdlci5jbGFzcywgYy5nZXQoQ3Vz\ndG9tZXJfLmJhbGFuY2VPd2VkKSwgY2IubGl0ZXJhbCgxMCkpKTsKICAgICAg\nICBxLndoZXJlKGNiLmdyZWF0ZXJUaGFuKG5hbWVMZW5ndGgsIDMpKTsKICAg\nICAgICBxLm9yZGVyQnkoY2IuYXNjKG5hbWVMZW5ndGgpKTsKICAgICAgICAK\nICAgICAgICBleGVjdXRlQW5kQ29tcGFyZVNRTChxLCBzcWwpOwoKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0S2V5czEoKSB7CiAgICAgICAgU3RyaW5n\nIHNxbCA9ICJTRUxFQ1QgdDAubmFtZSwgdDIuaWQsIHQyLmxhYmVsIEZST00g\nQ1JfSVRFTSB0MCAiCiAgICAgICAgICAgICsgIklOTkVSIEpPSU4gQ1JfSVRF\nTV9waG90b3MgdDEgT04gdDAuaWQgPSB0MS5JVEVNX0lEICIKICAgICAgICAg\nICAgKyAiSU5ORVIgSk9JTiBDUl9QSFQgdDIgT04gdDEuVkFMVUVfSUQgPSB0\nMi5pZCBXSEVSRSAiICsgCiAgICAgICAgICAgICIoKHQxLktFWTAgPSA/IE9S\nIHQxLktFWTAgPSA/IE9SIHQxLktFWTAgPSA/IE9SIHQxLktFWTAgPSA/IE9S\nIHQxLktFWTAgPSA/KSAiCiAgICAgICAgICAgICsgIkFORCAwIDwgKFNFTEVD\nVCBDT1VOVCgqKSBGUk9NIENSX0lURU1fcGhvdG9zIFdIRVJFIENSX0lURU1f\ncGhvdG9zLklURU1fSUQgPSB0MC5pZCkpIjsKCiAgICAgICAgQ3JpdGVyaWFR\ndWVyeTxDdXN0b21lcj4gcSA9IGNiLmNyZWF0ZVF1ZXJ5KEN1c3RvbWVyLmNs\nYXNzKTsKICAgICAgICBSb290PEl0ZW0+IGl0ZW0gPSBxLmZyb20oSXRlbS5j\nbGFzcyk7CiAgICAgICAgTWFwSm9pbjxJdGVtLCBTdHJpbmcsIFBob3RvPiBw\naG90byA9IGl0ZW0uam9pbihJdGVtXy5waG90b3MpOwogICAgICAgIHEubXVs\ndGlzZWxlY3QoaXRlbS5nZXQoSXRlbV8ubmFtZSksIHBob3RvKTsKICAgICAg\nICBNYXA8U3RyaW5nLCBQaG90bz4gcGhvdG8xID0gbmV3IEhhc2hNYXA8U3Ry\naW5nLCBQaG90bz4oKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IDU7\nIGkrKykgewogICAgICAgICAgICBQaG90byBwMSA9IG5ldyBQaG90bygpOwog\nICAgICAgICAgICBwMS5zZXRMYWJlbCgibGFiZWwiICsgaSk7CiAgICAgICAg\nICAgIHBob3RvMS5wdXQoInBob3RvIiArIGksIHAxKTsKICAgICAgICB9CiAg\nICAgICAgcS53aGVyZShwaG90by5rZXkoKS5pbihjYi5rZXlzKHBob3RvMSkp\nKTsgCiAgICAgICAgZXhlY3V0ZUFuZENvbXBhcmVTUUwocSwgc3FsKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0S2V5czIoKSB7CiAgICAgICAgU3Ry\naW5nIHNxbCA9ICJTRUxFQ1QgdDAubmFtZSwgdDIuaWQsIHQyLmxhYmVsIEZS\nT00gQ1JfSVRFTSB0MCAiCiAgICAgICAgICAgICsgIklOTkVSIEpPSU4gQ1Jf\nSVRFTV9waG90b3MgdDEgT04gdDAuaWQgPSB0MS5JVEVNX0lEICIKICAgICAg\nICAgICAgKyAiSU5ORVIgSk9JTiBDUl9QSFQgdDIgT04gdDEuVkFMVUVfSUQg\nPSB0Mi5pZCBXSEVSRSAiICsgCiAgICAgICAgICAgICIodDEuS0VZMCBJTiAo\nPywgPywgPywgPywgPykpIjsKCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxDdXN0\nb21lcj4gcSA9IGNiLmNyZWF0ZVF1ZXJ5KEN1c3RvbWVyLmNsYXNzKTsKICAg\nICAgICBSb290PEl0ZW0+IGl0ZW0gPSBxLmZyb20oSXRlbS5jbGFzcyk7CiAg\nICAgICAgTWFwSm9pbjxJdGVtLCBTdHJpbmcsIFBob3RvPiBwaG90byA9IGl0\nZW0uam9pbihJdGVtXy5waG90b3MpOwogICAgICAgIHEubXVsdGlzZWxlY3Qo\naXRlbS5nZXQoSXRlbV8ubmFtZSksIHBob3RvKTsKICAgICAgICBNYXA8U3Ry\naW5nLCBQaG90bz4gcGhvdG8xID0gbmV3IEhhc2hNYXA8U3RyaW5nLCBQaG90\nbz4oKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IDU7IGkrKykgewog\nICAgICAgICAgICBQaG90byBwMSA9IG5ldyBQaG90bygpOwogICAgICAgICAg\nICBwMS5zZXRMYWJlbCgibGFiZWwiICsgaSk7CiAgICAgICAgICAgIHBob3Rv\nMS5wdXQoInBob3RvIiArIGksIHAxKTsKICAgICAgICB9CiAgICAgICAgcS53\naGVyZShjYi5pc01lbWJlcihwaG90by5rZXkoKSwgY2Iua2V5cyhwaG90bzEp\nKSk7IAogICAgICAgIGV4ZWN1dGVBbmRDb21wYXJlU1FMKHEsIHNxbCk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgdGVzdEtleXMzKCkgewogICAgICAgIFN0\ncmluZyBzcWwgPSAiU0VMRUNUIHQwLm5hbWUsIHQyLmlkLCB0Mi5sYWJlbCBG\nUk9NIENSX0lURU0gdDAgIgogICAgICAgICAgICArICJJTk5FUiBKT0lOIENS\nX0lURU1fcGhvdG9zIHQxIE9OIHQwLmlkID0gdDEuSVRFTV9JRCAiCiAgICAg\nICAgICAgICsgIklOTkVSIEpPSU4gQ1JfUEhUIHQyIE9OIHQxLlZBTFVFX0lE\nID0gdDIuaWQgV0hFUkUgKDEgPD4gMSkiOwoKICAgICAgICBDcml0ZXJpYVF1\nZXJ5PEN1c3RvbWVyPiBxID0gY2IuY3JlYXRlUXVlcnkoQ3VzdG9tZXIuY2xh\nc3MpOwogICAgICAgIFJvb3Q8SXRlbT4gaXRlbSA9IHEuZnJvbShJdGVtLmNs\nYXNzKTsKICAgICAgICBNYXBKb2luPEl0ZW0sIFN0cmluZywgUGhvdG8+IHBo\nb3RvID0gaXRlbS5qb2luKEl0ZW1fLnBob3Rvcyk7CiAgICAgICAgcS5tdWx0\naXNlbGVjdChpdGVtLmdldChJdGVtXy5uYW1lKSwgcGhvdG8pOwogICAgICAg\nIE1hcDxTdHJpbmcsIFBob3RvPiBwaG90bzEgPSBuZXcgSGFzaE1hcDxTdHJp\nbmcsIFBob3RvPigpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgNTsg\naSsrKSB7CiAgICAgICAgICAgIFBob3RvIHAxID0gbmV3IFBob3RvKCk7CiAg\nICAgICAgICAgIHAxLnNldExhYmVsKCJsYWJlbCIgKyBpKTsKICAgICAgICAg\nICAgcGhvdG8xLnB1dCgicGhvdG8iICsgaSwgcDEpOwogICAgICAgIH0KICAg\nICAgICBxLndoZXJlKGNiLmlzRW1wdHkoY2Iua2V5cyhwaG90bzEpKSk7IAog\nICAgICAgIGV4ZWN1dGVBbmRDb21wYXJlU1FMKHEsIHNxbCk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgdGVzdEtleXM0KCkgewogICAgICAgIFN0cmluZyBz\ncWwgPSAiU0VMRUNUIHQwLm5hbWUsIHQyLmlkLCB0Mi5sYWJlbCBGUk9NIENS\nX0lURU0gdDAgIgogICAgICAgICAgICArICJJTk5FUiBKT0lOIENSX0lURU1f\ncGhvdG9zIHQxIE9OIHQwLmlkID0gdDEuSVRFTV9JRCAiCiAgICAgICAgICAg\nICsgIklOTkVSIEpPSU4gQ1JfUEhUIHQyIE9OIHQxLlZBTFVFX0lEID0gdDIu\naWQgV0hFUkUgKDUgPSA1KSI7CgogICAgICAgIENyaXRlcmlhUXVlcnk8Q3Vz\ndG9tZXI+IHEgPSBjYi5jcmVhdGVRdWVyeShDdXN0b21lci5jbGFzcyk7CiAg\nICAgICAgUm9vdDxJdGVtPiBpdGVtID0gcS5mcm9tKEl0ZW0uY2xhc3MpOwog\nICAgICAgIE1hcEpvaW48SXRlbSwgU3RyaW5nLCBQaG90bz4gcGhvdG8gPSBp\ndGVtLmpvaW4oSXRlbV8ucGhvdG9zKTsKICAgICAgICBxLm11bHRpc2VsZWN0\nKGl0ZW0uZ2V0KEl0ZW1fLm5hbWUpLCBwaG90byk7CiAgICAgICAgTWFwPFN0\ncmluZywgUGhvdG8+IHBob3RvMSA9IG5ldyBIYXNoTWFwPFN0cmluZywgUGhv\ndG8+KCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCA1OyBpKyspIHsK\nICAgICAgICAgICAgUGhvdG8gcDEgPSBuZXcgUGhvdG8oKTsKICAgICAgICAg\nICAgcDEuc2V0TGFiZWwoImxhYmVsIiArIGkpOwogICAgICAgICAgICBwaG90\nbzEucHV0KCJwaG90byIgKyBpLCBwMSk7CiAgICAgICAgfQogICAgICAgIHEu\nd2hlcmUoY2IuZXF1YWwoY2Iuc2l6ZShjYi5rZXlzKHBob3RvMSkpLCA1KSk7\nIAogICAgICAgIGV4ZWN1dGVBbmRDb21wYXJlU1FMKHEsIHNxbCk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgdGVzdEtleXM1KCkgewogICAgICAgIFN0cmlu\nZyBzcWwgPSAiU0VMRUNUIHQwLm5hbWUsIHQyLmlkLCB0Mi5sYWJlbCBGUk9N\nIENSX0lURU0gdDAgIgogICAgICAgICAgICArICJJTk5FUiBKT0lOIENSX0lU\nRU1fcGhvdG9zIHQxIE9OIHQwLmlkID0gdDEuSVRFTV9JRCAiCiAgICAgICAg\nICAgICsgIklOTkVSIEpPSU4gQ1JfUEhUIHQyIE9OIHQxLlZBTFVFX0lEID0g\ndDIuaWQgV0hFUkUgIiArIAogICAgICAgICAgICAiKE5PVCAodDEuS0VZMCA9\nID8gT1IgdDEuS0VZMCA9ID8gT1IgdDEuS0VZMCA9ID8gT1IgdDEuS0VZMCA9\nID8gT1IgdDEuS0VZMCA9ID8pICIKICAgICAgICAgICAgKyAiQU5EIDAgPCAo\nU0VMRUNUIENPVU5UKCopIEZST00gQ1JfSVRFTV9waG90b3MgV0hFUkUgQ1Jf\nSVRFTV9waG90b3MuSVRFTV9JRCA9IHQwLmlkKSkiOwogICAgICAgIAogICAg\nICAgIENyaXRlcmlhUXVlcnk8Q3VzdG9tZXI+IHEgPSBjYi5jcmVhdGVRdWVy\neShDdXN0b21lci5jbGFzcyk7CiAgICAgICAgUm9vdDxJdGVtPiBpdGVtID0g\ncS5mcm9tKEl0ZW0uY2xhc3MpOwogICAgICAgIE1hcEpvaW48SXRlbSwgU3Ry\naW5nLCBQaG90bz4gcGhvdG8gPSBpdGVtLmpvaW4oSXRlbV8ucGhvdG9zKTsK\nICAgICAgICBxLm11bHRpc2VsZWN0KGl0ZW0uZ2V0KEl0ZW1fLm5hbWUpLCBw\naG90byk7CiAgICAgICAgTWFwPFN0cmluZywgUGhvdG8+IHBob3RvMSA9IG5l\ndyBIYXNoTWFwPFN0cmluZywgUGhvdG8+KCk7CiAgICAgICAgZm9yIChpbnQg\naSA9IDA7IGkgPCA1OyBpKyspIHsKICAgICAgICAgICAgUGhvdG8gcDEgPSBu\nZXcgUGhvdG8oKTsKICAgICAgICAgICAgcDEuc2V0TGFiZWwoImxhYmVsIiAr\nIGkpOwogICAgICAgICAgICBwaG90bzEucHV0KCJwaG90byIgKyBpLCBwMSk7\nCiAgICAgICAgfQogICAgICAgIHEud2hlcmUocGhvdG8ua2V5KCkuaW4oY2Iu\na2V5cyhwaG90bzEpKS5ub3QoKSk7IAogICAgICAgIGV4ZWN1dGVBbmRDb21w\nYXJlU1FMKHEsIHNxbCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEtl\neXM2KCkgewogICAgICAgIFN0cmluZyBzcWwgPSAiU0VMRUNUIHQwLm5hbWUs\nIHQyLmlkLCB0Mi5sYWJlbCBGUk9NIENSX0lURU0gdDAgIgogICAgICAgICAg\nICArICJJTk5FUiBKT0lOIENSX0lURU1fcGhvdG9zIHQxIE9OIHQwLmlkID0g\ndDEuSVRFTV9JRCAiCiAgICAgICAgICAgICsgIklOTkVSIEpPSU4gQ1JfUEhU\nIHQyIE9OIHQxLlZBTFVFX0lEID0gdDIuaWQgV0hFUkUgIiArIAogICAgICAg\nICAgICAiKE5PVCAodDEuS0VZMCBJTiAoPywgPywgPywgPywgPykpKSI7Cgog\nICAgICAgIENyaXRlcmlhUXVlcnk8Q3VzdG9tZXI+IHEgPSBjYi5jcmVhdGVR\ndWVyeShDdXN0b21lci5jbGFzcyk7CiAgICAgICAgUm9vdDxJdGVtPiBpdGVt\nID0gcS5mcm9tKEl0ZW0uY2xhc3MpOwogICAgICAgIE1hcEpvaW48SXRlbSwg\nU3RyaW5nLCBQaG90bz4gcGhvdG8gPSBpdGVtLmpvaW4oSXRlbV8ucGhvdG9z\nKTsKICAgICAgICBxLm11bHRpc2VsZWN0KGl0ZW0uZ2V0KEl0ZW1fLm5hbWUp\nLCBwaG90byk7CiAgICAgICAgTWFwPFN0cmluZywgUGhvdG8+IHBob3RvMSA9\nIG5ldyBIYXNoTWFwPFN0cmluZywgUGhvdG8+KCk7CiAgICAgICAgZm9yIChp\nbnQgaSA9IDA7IGkgPCA1OyBpKyspIHsKICAgICAgICAgICAgUGhvdG8gcDEg\nPSBuZXcgUGhvdG8oKTsKICAgICAgICAgICAgcDEuc2V0TGFiZWwoImxhYmVs\nIiArIGkpOwogICAgICAgICAgICBwaG90bzEucHV0KCJwaG90byIgKyBpLCBw\nMSk7CiAgICAgICAgfQogICAgICAgIHEud2hlcmUoY2IuaXNOb3RNZW1iZXIo\ncGhvdG8ua2V5KCksIGNiLmtleXMocGhvdG8xKSkpOyAKICAgICAgICBleGVj\ndXRlQW5kQ29tcGFyZVNRTChxLCBzcWwpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHRlc3RLZXlzNygpIHsKICAgICAgICBTdHJpbmcgc3FsID0gIlNFTEVD\nVCB0MC5uYW1lLCB0Mi5pZCwgdDIubGFiZWwgRlJPTSBDUl9JVEVNIHQwICIK\nICAgICAgICAgICAgKyAiSU5ORVIgSk9JTiBDUl9JVEVNX3Bob3RvcyB0MSBP\nTiB0MC5pZCA9IHQxLklURU1fSUQgIgogICAgICAgICAgICArICJJTk5FUiBK\nT0lOIENSX1BIVCB0MiBPTiB0MS5WQUxVRV9JRCA9IHQyLmlkIFdIRVJFIChO\nT1QgKDEgPD4gMSkpIjsKCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxDdXN0b21l\ncj4gcSA9IGNiLmNyZWF0ZVF1ZXJ5KEN1c3RvbWVyLmNsYXNzKTsKICAgICAg\nICBSb290PEl0ZW0+IGl0ZW0gPSBxLmZyb20oSXRlbS5jbGFzcyk7CiAgICAg\nICAgTWFwSm9pbjxJdGVtLCBTdHJpbmcsIFBob3RvPiBwaG90byA9IGl0ZW0u\nam9pbihJdGVtXy5waG90b3MpOwogICAgICAgIHEubXVsdGlzZWxlY3QoaXRl\nbS5nZXQoSXRlbV8ubmFtZSksIHBob3RvKTsKICAgICAgICBNYXA8U3RyaW5n\nLCBQaG90bz4gcGhvdG8xID0gbmV3IEhhc2hNYXA8U3RyaW5nLCBQaG90bz4o\nKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IDU7IGkrKykgewogICAg\nICAgICAgICBQaG90byBwMSA9IG5ldyBQaG90bygpOwogICAgICAgICAgICBw\nMS5zZXRMYWJlbCgibGFiZWwiICsgaSk7CiAgICAgICAgICAgIHBob3RvMS5w\ndXQoInBob3RvIiArIGksIHAxKTsKICAgICAgICB9CiAgICAgICAgcS53aGVy\nZShjYi5pc05vdEVtcHR5KGNiLmtleXMocGhvdG8xKSkpOyAKICAgICAgICBl\neGVjdXRlQW5kQ29tcGFyZVNRTChxLCBzcWwpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RLZXlzOCgpIHsKICAgICAgICBTdHJpbmcgc3FsID0gIlNF\nTEVDVCB0MC5uYW1lLCB0Mi5pZCwgdDIubGFiZWwgRlJPTSBDUl9JVEVNIHQw\nICIKICAgICAgICAgICAgKyAiSU5ORVIgSk9JTiBDUl9JVEVNX3Bob3RvcyB0\nMSBPTiB0MC5pZCA9IHQxLklURU1fSUQgIgogICAgICAgICAgICArICJJTk5F\nUiBKT0lOIENSX1BIVCB0MiBPTiB0MS5WQUxVRV9JRCA9IHQyLmlkIFdIRVJF\nICg1ID0gNCkiOwogICAgICAgIENyaXRlcmlhUXVlcnk8Q3VzdG9tZXI+IHEg\nPSBjYi5jcmVhdGVRdWVyeShDdXN0b21lci5jbGFzcyk7CiAgICAgICAgUm9v\ndDxJdGVtPiBpdGVtID0gcS5mcm9tKEl0ZW0uY2xhc3MpOwogICAgICAgIE1h\ncEpvaW48SXRlbSwgU3RyaW5nLCBQaG90bz4gcGhvdG8gPSBpdGVtLmpvaW4o\nSXRlbV8ucGhvdG9zKTsKICAgICAgICBxLm11bHRpc2VsZWN0KGl0ZW0uZ2V0\nKEl0ZW1fLm5hbWUpLCBwaG90byk7CiAgICAgICAgTWFwPFN0cmluZywgUGhv\ndG8+IHBob3RvMSA9IG5ldyBIYXNoTWFwPFN0cmluZywgUGhvdG8+KCk7CiAg\nICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCA1OyBpKyspIHsKICAgICAgICAg\nICAgUGhvdG8gcDEgPSBuZXcgUGhvdG8oKTsKICAgICAgICAgICAgcDEuc2V0\nTGFiZWwoImxhYmVsIiArIGkpOwogICAgICAgICAgICBwaG90bzEucHV0KCJw\naG90byIgKyBpLCBwMSk7CiAgICAgICAgfQogICAgICAgIHEud2hlcmUoY2Iu\nZXF1YWwoY2Iuc2l6ZShjYi5rZXlzKHBob3RvMSkpLCA0KSk7IAogICAgICAg\nIGV4ZWN1dGVBbmRDb21wYXJlU1FMKHEsIHNxbCk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgdGVzdFZhbHVlczEoKSB7CiAgICAgICAgU3RyaW5nIHNxbCA9\nICJTRUxFQ1QgdDAubmFtZSwgdDIuaWQsIHQyLmxhYmVsIEZST00gQ1JfSVRF\nTSB0MCAiCiAgICAgICAgICAgICsgIklOTkVSIEpPSU4gQ1JfSVRFTV9waG90\nb3MgdDEgT04gdDAuaWQgPSB0MS5JVEVNX0lEICIKICAgICAgICAgICAgKyAi\nSU5ORVIgSk9JTiBDUl9QSFQgdDIgT04gdDEuVkFMVUVfSUQgPSB0Mi5pZCBX\nSEVSRSAiICsKICAgICAgICAgICAgIigodDEuVkFMVUVfSUQgPSA/IE9SIHQx\nLlZBTFVFX0lEID0gPyBPUiB0MS5WQUxVRV9JRCA9ID8gT1IgdDEuVkFMVUVf\nSUQgPSA/IE9SIHQxLlZBTFVFX0lEID0gPykgIgogICAgICAgICAgICArICJB\nTkQgMCA8IChTRUxFQ1QgQ09VTlQoKikgRlJPTSBDUl9JVEVNX3Bob3RvcyBX\nSEVSRSBDUl9JVEVNX3Bob3Rvcy5JVEVNX0lEID0gdDAuaWQpKSI7CgogICAg\nICAgIENyaXRlcmlhUXVlcnk8Q3VzdG9tZXI+IHEgPSBjYi5jcmVhdGVRdWVy\neShDdXN0b21lci5jbGFzcyk7CiAgICAgICAgUm9vdDxJdGVtPiBpdGVtID0g\ncS5mcm9tKEl0ZW0uY2xhc3MpOwogICAgICAgIE1hcEpvaW48SXRlbSwgU3Ry\naW5nLCBQaG90bz4gcGhvdG8gPSBpdGVtLmpvaW4oSXRlbV8ucGhvdG9zKTsK\nICAgICAgICBxLm11bHRpc2VsZWN0KGl0ZW0uZ2V0KEl0ZW1fLm5hbWUpLCBw\naG90byk7CiAgICAgICAgTWFwPFN0cmluZywgUGhvdG8+IHBob3RvMSA9IG5l\ndyBIYXNoTWFwPFN0cmluZywgUGhvdG8+KCk7CiAgICAgICAgZm9yIChpbnQg\naSA9IDA7IGkgPCA1OyBpKyspIHsKICAgICAgICAgICAgUGhvdG8gcDEgPSBu\nZXcgUGhvdG8oKTsKICAgICAgICAgICAgcDEuc2V0TGFiZWwoImxhYmVsIiAr\nIGkpOwogICAgICAgICAgICBwaG90bzEucHV0KCJwaG90byIgKyBpLCBwMSk7\nCiAgICAgICAgfQogICAgICAgIHEud2hlcmUocGhvdG8udmFsdWUoKS5pbihj\nYi52YWx1ZXMocGhvdG8xKSkpOyAKICAgICAgICBleGVjdXRlQW5kQ29tcGFy\nZVNRTChxLCBzcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RWYWx1\nZXMyKCkgewogICAgICAgIFN0cmluZyBzcWwgPSAiU0VMRUNUIHQwLm5hbWUs\nIHQyLmlkLCB0Mi5sYWJlbCBGUk9NIENSX0lURU0gdDAgIgogICAgICAgICAg\nICArICJJTk5FUiBKT0lOIENSX0lURU1fcGhvdG9zIHQxIE9OIHQwLmlkID0g\ndDEuSVRFTV9JRCAiCiAgICAgICAgICAgICsgIklOTkVSIEpPSU4gQ1JfUEhU\nIHQyIE9OIHQxLlZBTFVFX0lEID0gdDIuaWQgV0hFUkUgKHQxLlZBTFVFX0lE\nIElOICg/LCA/LCA/LCA/LCA/KSkiOwoKICAgICAgICBDcml0ZXJpYVF1ZXJ5\nPEN1c3RvbWVyPiBxID0gY2IuY3JlYXRlUXVlcnkoQ3VzdG9tZXIuY2xhc3Mp\nOwogICAgICAgIFJvb3Q8SXRlbT4gaXRlbSA9IHEuZnJvbShJdGVtLmNsYXNz\nKTsKICAgICAgICBNYXBKb2luPEl0ZW0sIFN0cmluZywgUGhvdG8+IHBob3Rv\nID0gaXRlbS5qb2luKEl0ZW1fLnBob3Rvcyk7CiAgICAgICAgcS5tdWx0aXNl\nbGVjdChpdGVtLmdldChJdGVtXy5uYW1lKSwgcGhvdG8pOwogICAgICAgIE1h\ncDxTdHJpbmcsIFBob3RvPiBwaG90bzEgPSBuZXcgSGFzaE1hcDxTdHJpbmcs\nIFBob3RvPigpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgNTsgaSsr\nKSB7CiAgICAgICAgICAgIFBob3RvIHAxID0gbmV3IFBob3RvKCk7CiAgICAg\nICAgICAgIHAxLnNldExhYmVsKCJsYWJlbCIgKyBpKTsKICAgICAgICAgICAg\ncGhvdG8xLnB1dCgicGhvdG8iICsgaSwgcDEpOwogICAgICAgIH0KICAgICAg\nICBxLndoZXJlKGNiLmlzTWVtYmVyKHBob3RvLnZhbHVlKCksIGNiLnZhbHVl\ncyhwaG90bzEpKSk7IAogICAgICAgIGV4ZWN1dGVBbmRDb21wYXJlU1FMKHEs\nIHNxbCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFZhbHVlczMoKSB7\nCiAgICAgICAgU3RyaW5nIHNxbCA9ICJTRUxFQ1QgdDAubmFtZSwgdDIuaWQs\nIHQyLmxhYmVsIEZST00gQ1JfSVRFTSB0MCAiCiAgICAgICAgICAgICsgIklO\nTkVSIEpPSU4gQ1JfSVRFTV9waG90b3MgdDEgT04gdDAuaWQgPSB0MS5JVEVN\nX0lEICIKICAgICAgICAgICAgKyAiSU5ORVIgSk9JTiBDUl9QSFQgdDIgT04g\ndDEuVkFMVUVfSUQgPSB0Mi5pZCBXSEVSRSAoMSA8PiAxKSI7CgogICAgICAg\nIENyaXRlcmlhUXVlcnk8Q3VzdG9tZXI+IHEgPSBjYi5jcmVhdGVRdWVyeShD\ndXN0b21lci5jbGFzcyk7CiAgICAgICAgUm9vdDxJdGVtPiBpdGVtID0gcS5m\ncm9tKEl0ZW0uY2xhc3MpOwogICAgICAgIE1hcEpvaW48SXRlbSwgU3RyaW5n\nLCBQaG90bz4gcGhvdG8gPSBpdGVtLmpvaW4oSXRlbV8ucGhvdG9zKTsKICAg\nICAgICBxLm11bHRpc2VsZWN0KGl0ZW0uZ2V0KEl0ZW1fLm5hbWUpLCBwaG90\nbyk7CiAgICAgICAgTWFwPFN0cmluZywgUGhvdG8+IHBob3RvMSA9IG5ldyBI\nYXNoTWFwPFN0cmluZywgUGhvdG8+KCk7CiAgICAgICAgZm9yIChpbnQgaSA9\nIDA7IGkgPCA1OyBpKyspIHsKICAgICAgICAgICAgUGhvdG8gcDEgPSBuZXcg\nUGhvdG8oKTsKICAgICAgICAgICAgcDEuc2V0TGFiZWwoImxhYmVsIiArIGkp\nOwogICAgICAgICAgICBwaG90bzEucHV0KCJwaG90byIgKyBpLCBwMSk7CiAg\nICAgICAgfQogICAgICAgIHEud2hlcmUoY2IuaXNFbXB0eShjYi52YWx1ZXMo\ncGhvdG8xKSkpOyAKICAgICAgICBleGVjdXRlQW5kQ29tcGFyZVNRTChxLCBz\ncWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RWYWx1ZTQoKSB7CiAg\nICAgICAgU3RyaW5nIHNxbCA9ICJTRUxFQ1QgdDAubmFtZSwgdDIuaWQsIHQy\nLmxhYmVsIEZST00gQ1JfSVRFTSB0MCAiCiAgICAgICAgICAgICsgIklOTkVS\nIEpPSU4gQ1JfSVRFTV9waG90b3MgdDEgT04gdDAuaWQgPSB0MS5JVEVNX0lE\nICIKICAgICAgICAgICAgKyAiSU5ORVIgSk9JTiBDUl9QSFQgdDIgT04gdDEu\nVkFMVUVfSUQgPSB0Mi5pZCBXSEVSRSAoNSA9IDUpIjsKCiAgICAgICAgQ3Jp\ndGVyaWFRdWVyeTxDdXN0b21lcj4gcSA9IGNiLmNyZWF0ZVF1ZXJ5KEN1c3Rv\nbWVyLmNsYXNzKTsKICAgICAgICBSb290PEl0ZW0+IGl0ZW0gPSBxLmZyb20o\nSXRlbS5jbGFzcyk7CiAgICAgICAgTWFwSm9pbjxJdGVtLCBTdHJpbmcsIFBo\nb3RvPiBwaG90byA9IGl0ZW0uam9pbihJdGVtXy5waG90b3MpOwogICAgICAg\nIHEubXVsdGlzZWxlY3QoaXRlbS5nZXQoSXRlbV8ubmFtZSksIHBob3RvKTsK\nICAgICAgICBNYXA8U3RyaW5nLCBQaG90bz4gcGhvdG8xID0gbmV3IEhhc2hN\nYXA8U3RyaW5nLCBQaG90bz4oKTsKICAgICAgICBmb3IgKGludCBpID0gMDsg\naSA8IDU7IGkrKykgewogICAgICAgICAgICBQaG90byBwMSA9IG5ldyBQaG90\nbygpOwogICAgICAgICAgICBwMS5zZXRMYWJlbCgibGFiZWwiICsgaSk7CiAg\nICAgICAgICAgIHBob3RvMS5wdXQoInBob3RvIiArIGksIHAxKTsKICAgICAg\nICB9CiAgICAgICAgcS53aGVyZShjYi5lcXVhbChjYi5zaXplKGNiLnZhbHVl\ncyhwaG90bzEpKSwgNSkpOyAKICAgICAgICBleGVjdXRlQW5kQ29tcGFyZVNR\nTChxLCBzcWwpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RWYWx1ZXM1\nKCkgewogICAgICAgIFN0cmluZyBzcWwgPSAiU0VMRUNUIHQwLm5hbWUsIHQy\nLmlkLCB0Mi5sYWJlbCBGUk9NIENSX0lURU0gdDAgIgogICAgICAgICAgICAr\nICJJTk5FUiBKT0lOIENSX0lURU1fcGhvdG9zIHQxIE9OIHQwLmlkID0gdDEu\nSVRFTV9JRCAiCiAgICAgICAgICAgICsgIklOTkVSIEpPSU4gQ1JfUEhUIHQy\nIE9OIHQxLlZBTFVFX0lEID0gdDIuaWQgV0hFUkUgIgogICAgICAgICAgICAr\nICIoMCA9IChTRUxFQ1QgQ09VTlQoKikgRlJPTSBDUl9JVEVNX3Bob3RvcyB0\nMyBXSEVSRSAiCiAgICAgICAgICAgICsgIih0My5WQUxVRV9JRCA9ID8gT1Ig\ndDMuVkFMVUVfSUQgPSA/IE9SIHQzLlZBTFVFX0lEID0gPyBPUiB0My5WQUxV\nRV9JRCA9ID8gT1IgdDMuVkFMVUVfSUQgPSA/KSAiCiAgICAgICAgICAgICsg\nIkFORCB0MC5pZCA9IHQxLklURU1fSUQpICIKICAgICAgICAgICAgKyAiQU5E\nIDAgPCAoU0VMRUNUIENPVU5UKCopIEZST00gQ1JfSVRFTV9waG90b3MgV0hF\nUkUgQ1JfSVRFTV9waG90b3MuSVRFTV9JRCA9IHQwLmlkKSkiOwogICAgICAg\nIAogICAgICAgIENyaXRlcmlhUXVlcnk8Q3VzdG9tZXI+IHEgPSBjYi5jcmVh\ndGVRdWVyeShDdXN0b21lci5jbGFzcyk7CiAgICAgICAgUm9vdDxJdGVtPiBp\ndGVtID0gcS5mcm9tKEl0ZW0uY2xhc3MpOwogICAgICAgIE1hcEpvaW48SXRl\nbSwgU3RyaW5nLCBQaG90bz4gcGhvdG8gPSBpdGVtLmpvaW4oSXRlbV8ucGhv\ndG9zKTsKICAgICAgICBxLm11bHRpc2VsZWN0KGl0ZW0uZ2V0KEl0ZW1fLm5h\nbWUpLCBwaG90byk7CiAgICAgICAgTWFwPFN0cmluZywgUGhvdG8+IHBob3Rv\nMSA9IG5ldyBIYXNoTWFwPFN0cmluZywgUGhvdG8+KCk7CiAgICAgICAgZm9y\nIChpbnQgaSA9IDA7IGkgPCA1OyBpKyspIHsKICAgICAgICAgICAgUGhvdG8g\ncDEgPSBuZXcgUGhvdG8oKTsKICAgICAgICAgICAgcDEuc2V0TGFiZWwoImxh\nYmVsIiArIGkpOwogICAgICAgICAgICBwaG90bzEucHV0KCJwaG90byIgKyBp\nLCBwMSk7CiAgICAgICAgfQogICAgICAgIHEud2hlcmUocGhvdG8udmFsdWUo\nKS5pbihjYi52YWx1ZXMocGhvdG8xKSkubm90KCkpOyAKICAgICAgICBleGVj\ndXRlQW5kQ29tcGFyZVNRTChxLCBzcWwpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHRlc3RWYWx1ZXM2KCkgewogICAgICAgIFN0cmluZyBzcWwgPSAiU0VM\nRUNUIHQwLm5hbWUsIHQyLmlkLCB0Mi5sYWJlbCBGUk9NIENSX0lURU0gdDAg\nIgogICAgICAgICAgICArICJJTk5FUiBKT0lOIENSX0lURU1fcGhvdG9zIHQx\nIE9OIHQwLmlkID0gdDEuSVRFTV9JRCAiCiAgICAgICAgICAgICsgIklOTkVS\nIEpPSU4gQ1JfUEhUIHQyIE9OIHQxLlZBTFVFX0lEID0gdDIuaWQgV0hFUkUg\nKE5PVCAodDEuVkFMVUVfSUQgSU4gKD8sID8sID8sID8sID8pKSkiOwoKICAg\nICAgICBDcml0ZXJpYVF1ZXJ5PEN1c3RvbWVyPiBxID0gY2IuY3JlYXRlUXVl\ncnkoQ3VzdG9tZXIuY2xhc3MpOwogICAgICAgIFJvb3Q8SXRlbT4gaXRlbSA9\nIHEuZnJvbShJdGVtLmNsYXNzKTsKICAgICAgICBNYXBKb2luPEl0ZW0sIFN0\ncmluZywgUGhvdG8+IHBob3RvID0gaXRlbS5qb2luKEl0ZW1fLnBob3Rvcyk7\nCiAgICAgICAgcS5tdWx0aXNlbGVjdChpdGVtLmdldChJdGVtXy5uYW1lKSwg\ncGhvdG8pOwogICAgICAgIE1hcDxTdHJpbmcsIFBob3RvPiBwaG90bzEgPSBu\nZXcgSGFzaE1hcDxTdHJpbmcsIFBob3RvPigpOwogICAgICAgIGZvciAoaW50\nIGkgPSAwOyBpIDwgNTsgaSsrKSB7CiAgICAgICAgICAgIFBob3RvIHAxID0g\nbmV3IFBob3RvKCk7CiAgICAgICAgICAgIHAxLnNldExhYmVsKCJsYWJlbCIg\nKyBpKTsKICAgICAgICAgICAgcGhvdG8xLnB1dCgicGhvdG8iICsgaSwgcDEp\nOwogICAgICAgIH0KICAgICAgICBxLndoZXJlKGNiLmlzTm90TWVtYmVyKHBo\nb3RvLnZhbHVlKCksIGNiLnZhbHVlcyhwaG90bzEpKSk7IAogICAgICAgIGV4\nZWN1dGVBbmRDb21wYXJlU1FMKHEsIHNxbCk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgdGVzdFZhbHVlczcoKSB7CiAgICAgICAgU3RyaW5nIHNxbCA9ICJT\nRUxFQ1QgdDAubmFtZSwgdDIuaWQsIHQyLmxhYmVsIEZST00gQ1JfSVRFTSB0\nMCAiCiAgICAgICAgICAgICsgIklOTkVSIEpPSU4gQ1JfSVRFTV9waG90b3Mg\ndDEgT04gdDAuaWQgPSB0MS5JVEVNX0lEICIKICAgICAgICAgICAgKyAiSU5O\nRVIgSk9JTiBDUl9QSFQgdDIgT04gdDEuVkFMVUVfSUQgPSB0Mi5pZCBXSEVS\nRSAoTk9UICgxIDw+IDEpKSI7CgogICAgICAgIENyaXRlcmlhUXVlcnk8Q3Vz\ndG9tZXI+IHEgPSBjYi5jcmVhdGVRdWVyeShDdXN0b21lci5jbGFzcyk7CiAg\nICAgICAgUm9vdDxJdGVtPiBpdGVtID0gcS5mcm9tKEl0ZW0uY2xhc3MpOwog\nICAgICAgIE1hcEpvaW48SXRlbSwgU3RyaW5nLCBQaG90bz4gcGhvdG8gPSBp\ndGVtLmpvaW4oSXRlbV8ucGhvdG9zKTsKICAgICAgICBxLm11bHRpc2VsZWN0\nKGl0ZW0uZ2V0KEl0ZW1fLm5hbWUpLCBwaG90byk7CiAgICAgICAgTWFwPFN0\ncmluZywgUGhvdG8+IHBob3RvMSA9IG5ldyBIYXNoTWFwPFN0cmluZywgUGhv\ndG8+KCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCA1OyBpKyspIHsK\nICAgICAgICAgICAgUGhvdG8gcDEgPSBuZXcgUGhvdG8oKTsKICAgICAgICAg\nICAgcDEuc2V0TGFiZWwoImxhYmVsIiArIGkpOwogICAgICAgICAgICBwaG90\nbzEucHV0KCJwaG90byIgKyBpLCBwMSk7CiAgICAgICAgfQogICAgICAgIHEu\nd2hlcmUoY2IuaXNOb3RFbXB0eShjYi52YWx1ZXMocGhvdG8xKSkpOyAKICAg\nICAgICBleGVjdXRlQW5kQ29tcGFyZVNRTChxLCBzcWwpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHRlc3RWYWx1ZTgoKSB7CiAgICAgICAgU3RyaW5nIHNx\nbCA9ICJTRUxFQ1QgdDAubmFtZSwgdDIuaWQsIHQyLmxhYmVsIEZST00gQ1Jf\nSVRFTSB0MCAiCiAgICAgICAgICAgICsgIklOTkVSIEpPSU4gQ1JfSVRFTV9w\naG90b3MgdDEgT04gdDAuaWQgPSB0MS5JVEVNX0lEICIKICAgICAgICAgICAg\nKyAiSU5ORVIgSk9JTiBDUl9QSFQgdDIgT04gdDEuVkFMVUVfSUQgPSB0Mi5p\nZCBXSEVSRSAoNSA9IDQpIjsKCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxDdXN0\nb21lcj4gcSA9IGNiLmNyZWF0ZVF1ZXJ5KEN1c3RvbWVyLmNsYXNzKTsKICAg\nICAgICBSb290PEl0ZW0+IGl0ZW0gPSBxLmZyb20oSXRlbS5jbGFzcyk7CiAg\nICAgICAgTWFwSm9pbjxJdGVtLCBTdHJpbmcsIFBob3RvPiBwaG90byA9IGl0\nZW0uam9pbihJdGVtXy5waG90b3MpOwogICAgICAgIHEubXVsdGlzZWxlY3Qo\naXRlbS5nZXQoSXRlbV8ubmFtZSksIHBob3RvKTsKICAgICAgICBNYXA8U3Ry\naW5nLCBQaG90bz4gcGhvdG8xID0gbmV3IEhhc2hNYXA8U3RyaW5nLCBQaG90\nbz4oKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IDU7IGkrKykgewog\nICAgICAgICAgICBQaG90byBwMSA9IG5ldyBQaG90bygpOwogICAgICAgICAg\nICBwMS5zZXRMYWJlbCgibGFiZWwiICsgaSk7CiAgICAgICAgICAgIHBob3Rv\nMS5wdXQoInBob3RvIiArIGksIHAxKTsKICAgICAgICB9CiAgICAgICAgcS53\naGVyZShjYi5lcXVhbChjYi5zaXplKGNiLnZhbHVlcyhwaG90bzEpKSwgNCkp\nOyAKICAgICAgICBleGVjdXRlQW5kQ29tcGFyZVNRTChxLCBzcWwpOwogICAg\nfQogICAgCiAgICAvKioKICAgICAqIFRoZSBzeW50YXggZm9yIGpvaW5pbmcg\ndGhlIGtleSBvZiBhIE1hcCBhdHRyaWJ1dGUgaXMgZGlmZmVyZW50IGluIEpQ\nUUwuCiAgICAgKiBIZW5jZSBpbnN0ZWFkIG9mIGNvbXBhcmluZyB0YXJnZXQg\nU1FMIHdlIGNvbXBhcmUgdGhlIHJlc3VsdC4KICAgICAqLwogICAgcHVibGlj\nIHZvaWQgdGVzdEpvaW5LZXkoKSB7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rp\nb24oKS5iZWdpbigpOwogICAgICAgIGVtLmNyZWF0ZVF1ZXJ5KCJERUxFVEUg\nRlJPTSBTdHVkZW50IHMiKS5leGVjdXRlVXBkYXRlKCk7CiAgICAgICAgZW0u\nY3JlYXRlUXVlcnkoIkRFTEVURSBGUk9NIENvdXJzZSBzIikuZXhlY3V0ZVVw\nZGF0ZSgpOwogICAgICAgIGVtLmNyZWF0ZVF1ZXJ5KCJERUxFVEUgRlJPTSBT\nZW1lc3RlciBzIikuZXhlY3V0ZVVwZGF0ZSgpOwogICAgICAgIGVtLmdldFRy\nYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgCiAgICAgICAgZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIFN0dWRlbnQgczEgPSBu\nZXcgU3R1ZGVudCgpOyBzMS5zZXROYW1lKCJTMSIpOwogICAgICAgIFN0dWRl\nbnQgczIgPSBuZXcgU3R1ZGVudCgpOyBzMi5zZXROYW1lKCJTMiIpOwogICAg\nICAgIFN0dWRlbnQgczMgPSBuZXcgU3R1ZGVudCgpOyBzMy5zZXROYW1lKCJT\nMyIpOwogICAgICAgIFN0dWRlbnQgczQgPSBuZXcgU3R1ZGVudCgpOyBzNC5z\nZXROYW1lKCJTNCIpOwogICAgICAgIFNlbWVzdGVyIHNtMSA9IG5ldyBTZW1l\nc3RlcigpOyBzbTEuc2V0TmFtZSgiU3VtbWVyIik7CiAgICAgICAgU2VtZXN0\nZXIgc20yID0gbmV3IFNlbWVzdGVyKCk7IHNtMi5zZXROYW1lKCJGYWxsIik7\nCiAgICAgICAgQ291cnNlIGMxID0gbmV3IENvdXJzZSgpOyBjMS5zZXROYW1l\nKCJDMSIpOwogICAgICAgIENvdXJzZSBjMiA9IG5ldyBDb3Vyc2UoKTsgYzIu\nc2V0TmFtZSgiQzIiKTsKCiAgICAgICAgczEuYWRkVG9FbnJvbGxtZW50KGMx\nLCBzbTEpOyBzMS5hZGRUb0Vucm9sbG1lbnQoYzIsIHNtMik7CiAgICAgICAg\nczIuYWRkVG9FbnJvbGxtZW50KGMyLCBzbTEpOyBzMi5hZGRUb0Vucm9sbG1l\nbnQoYzEsIHNtMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICBzMy5hZGRUb0Vucm9sbG1lbnQoYzEsIHNtMik7IAogICAgICAgIHM0\nLmFkZFRvRW5yb2xsbWVudChjMiwgc20xKTsKICAgICAgICAKICAgICAgICBl\nbS5wZXJzaXN0KHMxKTsgZW0ucGVyc2lzdChzMik7IGVtLnBlcnNpc3QoczMp\nOyBlbS5wZXJzaXN0KHM0KTsKICAgICAgICBlbS5wZXJzaXN0KGMxKTsgZW0u\ncGVyc2lzdChjMik7CiAgICAgICAgZW0ucGVyc2lzdChzbTEpOyBlbS5wZXJz\naXN0KHNtMik7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQo\nKTsKICAgICAgICAKICAgICAgICBTdHJpbmcganBxbCA9ICJzZWxlY3QgcyBm\ncm9tIFN0dWRlbnQgcyBKT0lOIHMuZW5yb2xsbWVudCBlIHdoZXJlIEtFWShl\nKS5uYW1lPTpuYW1lIjsKICAgICAgICBMaXN0PFN0dWRlbnQ+IGpSZXN1bHQg\nPSBlbS5jcmVhdGVRdWVyeShqcHFsKS5zZXRQYXJhbWV0ZXIoIm5hbWUiLCAi\nQzEiKS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgCiAgICAgICAgQ3JpdGVy\naWFRdWVyeTxTdHVkZW50PiBxID0gY2IuY3JlYXRlUXVlcnkoU3R1ZGVudC5j\nbGFzcyk7CiAgICAgICAgUm9vdDxTdHVkZW50PiBzID0gcS5mcm9tKFN0dWRl\nbnQuY2xhc3MpOwogICAgICAgIEpvaW48TWFwPENvdXJzZSxTZW1lc3Rlcj4s\nQ291cnNlPiBjID0gKChKb2lucy5NYXApcy5qb2luKFN0dWRlbnRfLmVucm9s\nbG1lbnQpKS5qb2luS2V5KCk7CiAgICAgICAgcS53aGVyZShjYi5lcXVhbChj\nLmdldChDb3Vyc2VfLm5hbWUpLCBjYi5wYXJhbWV0ZXIoU3RyaW5nLmNsYXNz\nLCAibmFtZSIpKSk7CiAgICAgICAgCiAgICAgICAgTGlzdDxTdHVkZW50PiBj\nUmVzdWx0ID0gZW0uY3JlYXRlUXVlcnkocSkuc2V0UGFyYW1ldGVyKCJuYW1l\nIiwiQzEiKS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgCiAgICAgICAgYXNz\nZXJ0RmFsc2UoalJlc3VsdC5pc0VtcHR5KCkpOwogICAgICAgIGFzc2VydEVx\ndWFscyhjUmVzdWx0LnNpemUoKSwgalJlc3VsdC5zaXplKCkpOwogICAgICAg\nIGZvciAoaW50IGkgPSAwOyBpIDwgalJlc3VsdC5zaXplKCk7IGkrKykgewog\nICAgICAgICAgICBhc3NlcnRFcXVhbHMoalJlc3VsdC5nZXQoaSkuZ2V0TmFt\nZSgpLCBjUmVzdWx0LmdldChpKS5nZXROYW1lKCkpOwogICAgICAgIH0KICAg\nIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdEFsaWFzSW5PcmRlckJ5Q2xh\ndXNlKCkgewogICAgICAgIFN0cmluZyBqcHFsID0gIlNFTEVDVCBBVkcoYS5i\nYWxhbmNlKSBBUyB4IEZST00gQWNjb3VudCBhIE9SREVSIEJZIHgiOwoKICAg\nICAgICBPcGVuSlBBQ3JpdGVyaWFRdWVyeTxEb3VibGU+IGMgPSBjYi5jcmVh\ndGVRdWVyeShEb3VibGUuY2xhc3MpOwogICAgICAgIFJvb3Q8QWNjb3VudD4g\nYWNjb3VudCA9IGMuZnJvbShBY2NvdW50LmNsYXNzKTsKICAgICAgICBFeHBy\nZXNzaW9uPERvdWJsZT4gb3JpZ2luYWwgPSBjYi5hdmcoYWNjb3VudC5nZXQo\nQWNjb3VudF8uYmFsYW5jZSkpOwogICAgICAgIEV4cHJlc3Npb248RG91Ymxl\nPiBhbGlhc2VkID0gKEV4cHJlc3Npb248RG91YmxlPilvcmlnaW5hbC5hbGlh\ncygieCIpOwogICAgICAgIGMub3JkZXJCeShjYi5hc2MoYWxpYXNlZCkpOwog\nICAgICAgIGFzc2VydFNhbWUob3JpZ2luYWwsIGFsaWFzZWQpOwogICAgICAg\nIGFzc2VydEVxdWFscygieCIsIGFsaWFzZWQuZ2V0QWxpYXMoKSk7CiAgICAg\nICAgYy5zZWxlY3QoYWxpYXNlZCk7CiAgICAgICAgYXNzZXJ0RXF1aXZhbGVu\nY2UoYywganBxbCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGpwcWwsIGMudG9D\nUUwoKSk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RSZWFsaWFz\nTm90QWxsb3dlZCgpIHsKICAgICAgICBPcGVuSlBBQ3JpdGVyaWFRdWVyeTxE\nb3VibGU+IGMgPSBjYi5jcmVhdGVRdWVyeShEb3VibGUuY2xhc3MpOwogICAg\nICAgIFJvb3Q8QWNjb3VudD4gYWNjb3VudCA9IGMuZnJvbShBY2NvdW50LmNs\nYXNzKTsKICAgICAgICBTZWxlY3Rpb248RG91YmxlPiB0ZXJtID0gY2IuYXZn\nKGFjY291bnQuZ2V0KEFjY291bnRfLmJhbGFuY2UpKTsKICAgICAgICB0ZXJt\nLmFsaWFzKCJmaXJzdHRpbWUiKTsKICAgICAgICB0cnkgewogICAgICAgICAg\nICB0ZXJtLmFsaWFzKCJzZWNvbmR0aW1lIik7CiAgICAgICAgICAgIGZhaWwo\nIkV4cGVjdGVkIHRvIGZhaWwgb24gcmUtYWxpYXNpbmciKTsKICAgICAgICB9\nIGNhdGNoIChJbGxlZ2FsU3RhdGVFeGNlcHRpb24gZSkgewogICAgICAgICAg\nICAvLyBnb29kCiAgICAgICAgfQogICAgfQogICAgCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0SW52YWxpZEFsaWFzTm90QWxsb3dlZCgpIHsKICAgICAgICBPcGVu\nSlBBQ3JpdGVyaWFRdWVyeTxEb3VibGU+IGMgPSBjYi5jcmVhdGVRdWVyeShE\nb3VibGUuY2xhc3MpOwogICAgICAgIFJvb3Q8QWNjb3VudD4gYWNjb3VudCA9\nIGMuZnJvbShBY2NvdW50LmNsYXNzKTsKICAgICAgICBTZWxlY3Rpb248RG91\nYmxlPiB0ZXJtID0gY2IuYXZnKGFjY291bnQuZ2V0KEFjY291bnRfLmJhbGFu\nY2UpKTsKICAgICAgICB0cnkgewogICAgICAgICAgICB0ZXJtLmFsaWFzKCJm\ncm9tIik7CiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGVkIHRvIGZhaWwgb24g\ncmVzZXJ2ZWQgd29yZCBhcyBhbGlhcyIpOwogICAgICAgIH0gY2F0Y2ggKEls\nbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIC8vIGdv\nb2QKICAgICAgICAgICAgYXNzZXJ0TnVsbCh0ZXJtLmdldEFsaWFzKCkpOwog\nICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgICB0ZXJtLmFsaWFz\nKCIgd2l0aCBhIHNwYWNlIik7CiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGVk\nIHRvIGZhaWwgb24gaW52YWxpZCBhbGlhcyIpOwogICAgICAgIH0gY2F0Y2gg\nKElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIC8v\nIGdvb2QKICAgICAgICAgICAgYXNzZXJ0TnVsbCh0ZXJtLmdldEFsaWFzKCkp\nOwogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgICB0ZXJtLmFs\naWFzKCIgd2l0aD9rbm93bl9zeW1ib2wiKTsKICAgICAgICAgICAgZmFpbCgi\nRXhwZWN0ZWQgdG8gZmFpbCBvbiBpbnZhbGlkIGFsaWFzIik7CiAgICAgICAg\nfSBjYXRjaCAoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGUpIHsKICAgICAg\nICAgICAgLy8gZ29vZAogICAgICAgICAgICBhc3NlcnROdWxsKHRlcm0uZ2V0\nQWxpYXMoKSk7CiAgICAgICAgfQogICAgfQogICAgCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0SW52YWxpZFBhcmFtZXRlck5hbWUoKSB7CiAgICAgICAgdHJ5IHsK\nICAgICAgICAgICAgY2IucGFyYW1ldGVyKEludGVnZXIuY2xhc3MsICJmcm9t\nIik7CiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGVkIHRvIGZhaWwgb24gcmVz\nZXJ2ZWQgd29yZCBhcyBhbGlhcyIpOwogICAgICAgIH0gY2F0Y2ggKElsbGVn\nYWxBcmd1bWVudEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgfQogICAgICAgIHRy\neSB7CiAgICAgICAgICAgIGNiLnBhcmFtZXRlcihJbnRlZ2VyLmNsYXNzLCAi\nOm5hbWUiKTsKICAgICAgICAgICAgZmFpbCgiRXhwZWN0ZWQgdG8gZmFpbCBv\nbiBpbnZhbGlkIGFsaWFzIik7CiAgICAgICAgfSBjYXRjaCAoSWxsZWdhbEFy\nZ3VtZW50RXhjZXB0aW9uIGUpIHsKICAgICAgICB9CiAgICAgICAgdHJ5IHsK\nICAgICAgICAgICAgY2IucGFyYW1ldGVyKEludGVnZXIuY2xhc3MsICI/MyIp\nOwogICAgICAgICAgICBmYWlsKCJFeHBlY3RlZCB0byBmYWlsIG9uIGludmFs\naWQgYWxpYXMiKTsKICAgICAgICB9IGNhdGNoIChJbGxlZ2FsQXJndW1lbnRF\neGNlcHRpb24gZSkgewogICAgICAgIH0KICAgIH0KICAgIAogICAgcHVibGlj\nIHZvaWQgdGVzdEdyb3VwQnlPbk1heFJlc3VsdCgpIHsKICAgICAgICBTdHJp\nbmcganBxbCA9ICJTRUxFQ1QgYy5hZGRyZXNzLmNvdW50cnksIGNvdW50KGMp\nIGZyb20gQ3VzdG9tZXIgYyBHUk9VUCBCWSBjLmFkZHJlc3MuY291bnRyeSAi\nICsKICAgICAgICAgICAgICAgICAgICAgICJIQVZJTkcgQ09VTlQoYy5hZGRy\nZXNzLmNvdW50cnkpPjMiOwogICAgICAgIAogICAgICAgIENyaXRlcmlhUXVl\ncnk8T2JqZWN0W10+IGMgPSBjYi5jcmVhdGVRdWVyeShPYmplY3RbXS5jbGFz\ncyk7CiAgICAgICAgUm9vdDxDdXN0b21lcj4gY3VzdG9tZXIgPSBjLmZyb20o\nQ3VzdG9tZXIuY2xhc3MpOwogICAgICAgIFBhdGg8U3RyaW5nPiBjb3VudHJ5\nID0gY3VzdG9tZXIuZ2V0KEN1c3RvbWVyXy5hZGRyZXNzKS5nZXQoQWRkcmVz\nc18uY291bnRyeSk7CiAgICAgICAgYy5tdWx0aXNlbGVjdChjb3VudHJ5LCBj\nYi5jb3VudChjdXN0b21lcikpCiAgICAgICAgIC5ncm91cEJ5KGNvdW50cnkp\nCiAgICAgICAgIC5oYXZpbmcoY2IuZ3QoY2IuY291bnQoY291bnRyeSksIDMp\nKTsKICAgICAgICAKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShuZXcgUXVl\ncnlEZWNvcmF0b3IoKXsKICAgICAgICAgICAgcHVibGljIHZvaWQgZGVjb3Jh\ndGUoUXVlcnkgcSkgewogICAgICAgICAgICAgICAgcS5zZXRNYXhSZXN1bHRz\nKDIwKTsKICAgICAgICAgICAgfQogICAgICAgIH0sIGMsIGpwcWwpOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RFbXB0eUFuZCgpIHsKICAgICAgICBD\ncml0ZXJpYVF1ZXJ5PE9yZGVyPiBjID0gY2IuY3JlYXRlUXVlcnkoT3JkZXIu\nY2xhc3MpOwogICAgICAgIFJvb3Q8T3JkZXI+IG9yZGVyID0gYy5mcm9tKE9y\nZGVyLmNsYXNzKTsKICAgICAgICBjLndoZXJlKGNiLmFuZChjYi5ub3QoY2Iu\nZXF1YWwob3JkZXIuZ2V0KE9yZGVyXy5jdXN0b21lcikuZ2V0KEN1c3RvbWVy\nXy5uYW1lKSwgIlJvYmVydCBFLiBCaXNzZXR0IikpLAogICAgICAgICAgICAg\nICAgY2IuaXNUcnVlKGNiLmNvbmp1bmN0aW9uKCkpKSk7CiAgICAgICAgZW0u\nY3JlYXRlUXVlcnkoYykuZ2V0UmVzdWx0TGlzdCgpOwogICAgfQogICAgCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0RW1wdHlPcigpIHsKICAgICAgICBDcml0ZXJp\nYVF1ZXJ5PE9yZGVyPiBjID0gY2IuY3JlYXRlUXVlcnkoT3JkZXIuY2xhc3Mp\nOwogICAgICAgIFJvb3Q8T3JkZXI+IG9yZGVyID0gYy5mcm9tKE9yZGVyLmNs\nYXNzKTsKICAgICAgICBjLndoZXJlKGNiLmFuZChjYi5ub3QoY2IuZXF1YWwo\nb3JkZXIuZ2V0KE9yZGVyXy5jdXN0b21lcikuZ2V0KEN1c3RvbWVyXy5uYW1l\nKSwgIlJvYmVydCBFLiBCaXNzZXR0IikpLAogICAgICAgICAgICAgICAgY2Iu\naXNUcnVlKGNiLmRpc2p1bmN0aW9uKCkpKSk7CiAgICAgICAgZW0uY3JlYXRl\nUXVlcnkoYykuZ2V0UmVzdWx0TGlzdCgpOwogICAgfQogICAgCiAgICBwdWJs\naWMgdm9pZCB0ZXN0RGVmYXVsdFByb2plY3Rpb25XaXRoVW50eXBlZFJlc3Vs\ndCgpIHsKICAgICAgICBDcml0ZXJpYVF1ZXJ5IGNxdWVyeSA9IGNiLmNyZWF0\nZVF1ZXJ5KCk7IAogICAgICAgIFJvb3Q8Q3VzdG9tZXI+IGN1c3RvbWVyID0g\nY3F1ZXJ5LmZyb20oQ3VzdG9tZXIuY2xhc3MpOwoKICAgICAgICAvL0dldCBN\nZXRhbW9kZWwgZnJvbSBSb290CiAgICAgICAgRW50aXR5VHlwZTxDdXN0b21l\ncj4gQ3VzdG9tZXJfID0gY3VzdG9tZXIuZ2V0TW9kZWwoKTsKCiAgICAgICAg\nY3F1ZXJ5LndoZXJlKGNiLmVxdWFsKAogICAgICAgICAgICAgICAgY3VzdG9t\nZXIuZ2V0KEN1c3RvbWVyXy5nZXRTaW5ndWxhckF0dHJpYnV0ZSgibmFtZSIs\nIFN0cmluZy5jbGFzcykpLCAKICAgICAgICAgICAgICAgIGNiLm51bGxMaXRl\ncmFsKFN0cmluZy5jbGFzcykpKTsKCiAgICAgICAgUXVlcnkgcSA9IGVtLmNy\nZWF0ZVF1ZXJ5KGNxdWVyeSk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lk\nIHRlc3RDb3VudERpc3RpbmN0KCkgewogICAgICAgIFN0cmluZyBqcHFsID0g\nInNlbGVjdCBDT1VOVChESVNUSU5DVCBhLm5hbWUpIGZyb20gQWNjb3VudCBh\nIjsKICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5PExvbmc+IGMgPSBj\nYi5jcmVhdGVRdWVyeShMb25nLmNsYXNzKTsKICAgICAgICBSb290PEFjY291\nbnQ+IGEgPSBjLmZyb20oQWNjb3VudC5jbGFzcyk7CiAgICAgICAgYy5zZWxl\nY3QoY2IuY291bnREaXN0aW5jdChhLmdldChBY2NvdW50Xy5uYW1lKSkpOwog\nICAgICAgIAogICAgICAgIGFzc2VydEVxdWl2YWxlbmNlKGMsIGpwcWwpOwog\nICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q291bnREaXN0aW5jdE9u\nSm9pbigpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJzZWxlY3QgQ09VTlQo\nRElTVElOQ1QgYS5iLmFnZSkgZnJvbSBBIGEiOwogICAgICAgIAogICAgICAg\nIENyaXRlcmlhUXVlcnk8TG9uZz4gYyA9IGNiLmNyZWF0ZVF1ZXJ5KExvbmcu\nY2xhc3MpOwogICAgICAgIFJvb3Q8QT4gYSA9IGMuZnJvbShBLmNsYXNzKTsK\nICAgICAgICBjLnNlbGVjdChjYi5jb3VudERpc3RpbmN0KGEuZ2V0KEFfLmIp\nLmdldChCXy5hZ2UpKSk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0RXF1aXZh\nbGVuY2UoYywganBxbCk7CiAgICB9CgogICAgCiAgICBwdWJsaWMgdm9pZCB0\nZXN0U2l6ZVJldHVybnNJbnRlZ2VyKCkgewogICAgICAgIFN0cmluZyBqcHFs\nID0gInNlbGVjdCBTSVpFKGMuYWNjb3VudHMpIGZyb20gQ3VzdG9tZXIgYyI7\nCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxJbnRlZ2VyPiBjID0gY2IuY3JlYXRl\nUXVlcnkoSW50ZWdlci5jbGFzcyk7CiAgICAgICAgUm9vdDxDdXN0b21lcj4g\nY3VzdG9tZXIgPSBjLmZyb20oQ3VzdG9tZXIuY2xhc3MpOwogICAgICAgIGMu\nc2VsZWN0KGNiLnNpemUoY3VzdG9tZXIuZ2V0KEN1c3RvbWVyXy5hY2NvdW50\ncykpKTsKICAgICAgICAKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShjLCBq\ncHFsKTsKICAgICAgICAKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVz\ndERpc2p1bmN0aW9uQXNGYWxzZSgpIHsKICAgICAgICBNZXRhbW9kZWwgbW0g\nPSBlbS5nZXRNZXRhbW9kZWwoKTsKCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxP\ncmRlcj4gY3F1ZXJ5ID0gY2IuY3JlYXRlUXVlcnkoT3JkZXIuY2xhc3MpOwog\nICAgICAgIFJvb3Q8T3JkZXI+IG9yZGVyID0gY3F1ZXJ5LmZyb20oT3JkZXIu\nY2xhc3MpOwogICAgICAgIAogICAgICAgRW50aXR5VHlwZTxPcmRlcj4gT3Jk\nZXJfID0gb3JkZXIuZ2V0TW9kZWwoKTsKICAgICAgIEVudGl0eVR5cGU8Q3Vz\ndG9tZXI+IEN1c3RvbWVyXyA9IG1tLmVudGl0eShDdXN0b21lci5jbGFzcyk7\nCiAgICAgICBjcXVlcnkud2hlcmUoY2IuYW5kKGNiLmVxdWFsKAogICAgICAg\nICBvcmRlci5nZXQoT3JkZXJfLmdldFNpbmd1bGFyQXR0cmlidXRlKCJjdXN0\nb21lciIsIEN1c3RvbWVyLmNsYXNzKSkKICAgICAgICAgICAgICAgICAgLmdl\ndChDdXN0b21lcl8uZ2V0U2luZ3VsYXJBdHRyaWJ1dGUoIm5hbWUiLCBTdHJp\nbmcuY2xhc3MpKSwgIlJvYmVydCBFLiBCaXNzZXR0IiksCiAgICAgICAgIGNi\nLmlzRmFsc2UoY2IuZGlzanVuY3Rpb24oKSkpKTsKCiAgICAgICBjcXVlcnku\nZGlzdGluY3QodHJ1ZSk7CgogICAgICAgUXVlcnkgcSA9IGVtLmNyZWF0ZVF1\nZXJ5KGNxdWVyeSk7CgogICAgICAgTGlzdCByZXN1bHQgPSBxLmdldFJlc3Vs\ndExpc3QoKTsgICAgICAgIAogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RD\ndXJyZW50VGltZVJldHVybnNTUUxUeXBlcygpIHsKICAgICAgICBpZiAoZ2V0\nRGljdGlvbmFyeSgpIGluc3RhbmNlb2YgT3JhY2xlRGljdGlvbmFyeSkgewog\nICAgICAgICAgICAvLyBPcmFjbGUgZG9lcyBub3QgaGF2ZSBDVVJSRU5UX1RJ\nTUUgZnVuY3Rpb24sIG5vciBkb2VzIGl0IHN1cHBvcnQgREIgZ2VuZXJhdGVk\nIGlkZW50aXR5CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAg\nICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIFByb2R1\nY3QgcGMgPSBuZXcgUHJvZHVjdCgpOwogICAgICAgIGVtLnBlcnNpc3QocGMp\nOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAg\nICAgCiAgICAgICAgaW50IHBpZCA9IHBjLmdldFBpZCgpOwogICAgICAgIAog\nICAgICAgIENyaXRlcmlhUXVlcnk8VGltZT4gY3F1ZXJ5ID0gY2IuY3JlYXRl\nUXVlcnkoVGltZS5jbGFzcyk7CiAgICAgICAgUm9vdDxQcm9kdWN0PiBwcm9k\ndWN0ID0gY3F1ZXJ5LmZyb20oUHJvZHVjdC5jbGFzcyk7CiAgICAgICAgY3F1\nZXJ5LnNlbGVjdChjYi5jdXJyZW50VGltZSgpKTsKICAgICAgICBjcXVlcnku\nd2hlcmUoY2IuZXF1YWwocHJvZHVjdC5nZXQoUHJvZHVjdF8ucGlkKSwgcGlk\nKSk7CgogICAgICAgIFR5cGVkUXVlcnk8VGltZT4gdHEgPSBlbS5jcmVhdGVR\ndWVyeShjcXVlcnkpOwogICAgICAgIE9iamVjdCByZXN1bHQgPSB0cS5nZXRT\naW5nbGVSZXN1bHQoKTsKICAgICAgICBhc3NlcnRUcnVlKHJlc3VsdC5nZXRD\nbGFzcygpICsgIiBub3QgaW5zdGFuY2Ugb2YgVGltZSIsIHJlc3VsdCBpbnN0\nYW5jZW9mIFRpbWUpOyAgCiAgICAgICAgCiAgICB9ICAgIAoKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RDdXJyZW50RGF0ZVJldHVybnNTUUxUeXBlcygpIHsKICAg\nICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgT3Jk\nZXIgcGMgPSBuZXcgT3JkZXIoKTsKICAgICAgICBlbS5wZXJzaXN0KHBjKTsK\nICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAg\nIAogICAgICAgIGludCBvaWQgPSBwYy5nZXRJZCgpOwogICAgICAgIAogICAg\nICAgIENyaXRlcmlhUXVlcnk8RGF0ZT4gY3F1ZXJ5ID0gY2IuY3JlYXRlUXVl\ncnkoRGF0ZS5jbGFzcyk7CiAgICAgICAgUm9vdDxPcmRlcj4gb3JkZXIgPSBj\ncXVlcnkuZnJvbShPcmRlci5jbGFzcyk7CiAgICAgICAgY3F1ZXJ5LnNlbGVj\ndChjYi5jdXJyZW50RGF0ZSgpKTsKICAgICAgICBjcXVlcnkud2hlcmUoY2Iu\nZXF1YWwob3JkZXIuZ2V0KE9yZGVyXy5pZCksIG9pZCkpOwoKICAgICAgICBU\neXBlZFF1ZXJ5PERhdGU+IHRxID0gZW0uY3JlYXRlUXVlcnkoY3F1ZXJ5KTsK\nICAgICAgICBPYmplY3QgcmVzdWx0ID0gdHEuZ2V0U2luZ2xlUmVzdWx0KCk7\nCiAgICAgICAgYXNzZXJ0VHJ1ZShyZXN1bHQuZ2V0Q2xhc3MoKSArICIgbm90\nIGluc3RhbmNlIG9mIERhdGUiLCByZXN1bHQgaW5zdGFuY2VvZiBEYXRlKTsg\nIAoKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q3VycmVudFRpbWVzdGFt\ncFJldHVybnNTUUxUeXBlcygpIHsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlv\nbigpLmJlZ2luKCk7CiAgICAgICAgT3JkZXIgcGMgPSBuZXcgT3JkZXIoKTsK\nICAgICAgICBlbS5wZXJzaXN0KHBjKTsKICAgICAgICBlbS5nZXRUcmFuc2Fj\ndGlvbigpLmNvbW1pdCgpOwoKICAgICAgICBpbnQgb2lkID0gcGMuZ2V0SWQo\nKTsKCiAgICAgICAgQ3JpdGVyaWFRdWVyeTxUaW1lc3RhbXA+IGNxdWVyeSA9\nIGNiLmNyZWF0ZVF1ZXJ5KFRpbWVzdGFtcC5jbGFzcyk7CiAgICAgICAgUm9v\ndDxPcmRlcj4gb3JkZXIgPSBjcXVlcnkuZnJvbShPcmRlci5jbGFzcyk7CiAg\nICAgICAgY3F1ZXJ5LnNlbGVjdChjYi5jdXJyZW50VGltZXN0YW1wKCkpOwog\nICAgICAgIGNxdWVyeS53aGVyZShjYi5lcXVhbChvcmRlci5nZXQoT3JkZXJf\nLmlkKSwgb2lkKSk7CgogICAgICAgIFR5cGVkUXVlcnk8VGltZXN0YW1wPiB0\ncSA9IGVtLmNyZWF0ZVF1ZXJ5KGNxdWVyeSk7CiAgICAgICAgT2JqZWN0IHJl\nc3VsdCA9IHRxLmdldFNpbmdsZVJlc3VsdCgpOwogICAgICAgIGFzc2VydFRy\ndWUocmVzdWx0LmdldENsYXNzKCkgKyAiIG5vdCBpbnN0YW5jZSBvZiBUaW1l\nc3RhbXAiLCByZXN1bHQgaW5zdGFuY2VvZiBUaW1lc3RhbXApOyAgCiAgICAg\nICAgCiAgICB9CiAgICAKLy8gICAgcHVibGljIHZvaWQgdGVzdEluTWVtb3J5\nQWNjZXNzUGF0aCgpIHsKLy8gICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCku\nYmVnaW4oKTsKLy8gICAgICAgIC8vIG11c3QgaGF2ZSBuZXcvZGlydHkgbWFu\nYWdlZCBpbnN0YW5jZXMgdG8gZXhlcmNpc2UgdGhlIGNvZGUgcGF0aAovLyAg\nICAgICAgZW0ucGVyc2lzdChuZXcgQ3VzdG9tZXIoKSk7Ci8vICAgICAgICBD\ncml0ZXJpYVF1ZXJ5PEN1c3RvbWVyPiBjcXVlcnkgPSBjYi5jcmVhdGVRdWVy\neShDdXN0b21lci5jbGFzcyk7Ci8vICAgICAgICBSb290PEN1c3RvbWVyPiBj\ndXN0b21lciA9IGNxdWVyeS5mcm9tKEN1c3RvbWVyLmNsYXNzKTsKLy8gICAg\nICAgIEZldGNoPEN1c3RvbWVyLCBBY2NvdW50PiBjID0gY3VzdG9tZXIuZmV0\nY2goImFjY291bnRzIiwgSm9pblR5cGUuTEVGVCk7Ci8vICAgICAgICBjcXVl\ncnkud2hlcmUoY2IubGlrZShjdXN0b21lci48U3RyaW5nPmdldCgiZmlyc3RO\nYW1lIiksICJhJSIpKS5zZWxlY3QoY3VzdG9tZXIpLmRpc3RpbmN0KHRydWUp\nOwovLyAgICAgICAgVHlwZWRRdWVyeTxDdXN0b21lcj4gdHF1ZXJ5ID0gZW0u\nY3JlYXRlUXVlcnkoY3F1ZXJ5KTsKLy8gICAgICAgIHRxdWVyeS5zZXRNYXhS\nZXN1bHRzKDMpOwovLyAgICAgICAgTGlzdDxDdXN0b21lcj4gcmVzdWx0ID0g\ndHF1ZXJ5LmdldFJlc3VsdExpc3QoKTsKLy8KLy8gICAgfQogICAgCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0TGl0ZXJhbEluUHJvamVjdGlvbigpIHsKICAgICAg\nICBTdHJpbmcganBxbCA9ICJzZWxlY3QgJ2EnIGZyb20gQ3VzdG9tZXIgYyB3\naGVyZSBjLmlkPTEwIjsKICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5\nPFN0cmluZz4gY3EgPSBjYi5jcmVhdGVRdWVyeShTdHJpbmcuY2xhc3MpOwog\nICAgICAgIFJvb3Q8Q3VzdG9tZXI+IGMgPSBjcS5mcm9tKEN1c3RvbWVyLmNs\nYXNzKTsKICAgICAgICBjcS5zZWxlY3QoY2IudG9TdHJpbmcoY2IubGl0ZXJh\nbCgnYScpKSk7CiAgICAgICAgY3Eud2hlcmUoY2IuZXF1YWwoYy5nZXQoQ3Vz\ndG9tZXJfLmlkKSwgMTApKTsKICAgICAgICBhc3NlcnRFcXVpdmFsZW5jZShj\ncSwganBxbCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RCaWdE\nZWNpbWFsQ29udmVyc2lvbigpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJz\nZWxlY3QgYy5hY2NvdW50TnVtKjEwLjMyNTk3IGZyb20gQ3VzdG9tZXIgYyB3\naGVyZSBjLmlkPTEwIjsgICAgICAgIAogICAgICAgIGxvbmcgYWNjb3VudE51\nbWJlciA9IDEyMzQ1MTYyNzk7CiAgICAgICAgCiAgICAgICAgaWYgKGdldERp\nY3Rpb25hcnkoKSBpbnN0YW5jZW9mIFNRTFNlcnZlckRpY3Rpb25hcnkpIHsK\nICAgICAgICAgICAgLy8gQEFsbG93RmFpbHVyZQogICAgICAgICAgICAvLyBU\nT0RPIC0gU2tpcHBpbmcgZm9yIE1TU1FMLCBhcyB0aGUgY2FsY3VsYXRpb24g\ncmVzdWx0IGhhcyBhIHByZWNpc2lvbiBsYXJnZXIgdGhhbiAzOAogICAgICAg\nICAgICAvLyBwYXJhbXM9KEJpZ0RlY2ltYWwpIDEwLjMyNTk2OTk5OTk5OTk5\nOTg3MDk2NTQzOTE4NTk2NTgwNjI0NTgwMzgzMzAwNzgxMjUKICAgICAgICAg\nICAgZ2V0RW50aXR5TWFuYWdlckZhY3RvcnkoKS5nZXRDb25maWd1cmF0aW9u\nKCkuZ2V0TG9nKCJ0ZXN0Iikud2FybigKICAgICAgICAgICAgICAgICJTS0lQ\nUElORyB0ZXN0QmlnRGVjaW1hbENvbnZlcnNpb24oKSBmb3IgU1FMU2VydmVy\nIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgCiAg\nICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIEN1\nc3RvbWVyIGN1c3RvbWVyID0gbmV3IEN1c3RvbWVyKCk7CiAgICAgICAgY3Vz\ndG9tZXIuc2V0QWNjb3VudE51bShhY2NvdW50TnVtYmVyKTsKICAgICAgICBl\nbS5wZXJzaXN0KGN1c3RvbWVyKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlv\nbigpLmNvbW1pdCgpOwogICAgICAgIAogICAgICAgIGxvbmcgY2lkID0gY3Vz\ndG9tZXIuZ2V0SWQoKTsKICAgICAgICAKICAgICAgICBDcml0ZXJpYVF1ZXJ5\nPEJpZ0RlY2ltYWw+IGNxID0gY2IuY3JlYXRlUXVlcnkoQmlnRGVjaW1hbC5j\nbGFzcyk7CiAgICAgICAgUm9vdDxDdXN0b21lcj4gYyA9IGNxLmZyb20oQ3Vz\ndG9tZXIuY2xhc3MpOwogICAgICAgIGNxLnNlbGVjdChjYi50b0JpZ0RlY2lt\nYWwoY2IucHJvZChjLmdldChDdXN0b21lcl8uYWNjb3VudE51bSksIG5ldyBC\naWdEZWNpbWFsKDEwLjMyNTk3KSkpKTsKICAgICAgICBjcS53aGVyZShjYi5l\ncXVhbChjLmdldChDdXN0b21lcl8uaWQpLCBjaWQpKTsKICAgICAgICAvL2Fz\nc2VydEVxdWl2YWxlbmNlKGNxLCBqcHFsKTsKICAgICAgICAKICAgICAgICBM\naXN0PEJpZ0RlY2ltYWw+IHJlc3VsdCA9IGVtLmNyZWF0ZVF1ZXJ5KGNxKS5n\nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgYXNzZXJ0RmFsc2UocmVzdWx0Lmlz\nRW1wdHkoKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShyZXN1bHQuZ2V0KDApIGlu\nc3RhbmNlb2YgQmlnRGVjaW1hbCk7CiAgICB9CiAgICAKICAgCn0K\n","encoding":"base64"}

