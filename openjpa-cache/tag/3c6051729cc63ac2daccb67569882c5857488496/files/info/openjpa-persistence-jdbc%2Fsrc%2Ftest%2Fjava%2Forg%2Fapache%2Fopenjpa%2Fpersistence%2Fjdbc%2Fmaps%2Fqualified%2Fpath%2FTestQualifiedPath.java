{"sha":"0311d614f537716d0381333a7d9fd1a8fe582195","node_id":"MDQ6QmxvYjIwNjM2NDowMzExZDYxNGY1Mzc3MTZkMDM4MTMzM2E3ZDlmZDFhOGZlNTgyMTk1","size":5328,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/0311d614f537716d0381333a7d9fd1a8fe582195","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuamRiYy5t\nYXBzLnF1YWxpZmllZC5wYXRoOwoKaW1wb3J0IGphdmEudXRpbC5IYXNoTWFw\nOwppbXBvcnQgamF2YS51dGlsLkxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuTWFw\nOwoKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLlF1ZXJ5OwoKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBRW50aXR5TWFu\nYWdlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS50\nZXN0LlNRTExpc3RlbmVyVGVzdENhc2U7CgovKioKICogVGVzdCBxdWVyaWVz\nIGNvbnRhaW5pbmcgcXVhbGlmaWVkIHBhdGhzIG9mIHRoZSBmb3JtOgogKiA8\ncHJlPgogKiBnZW5lcmFsX2lkZW50aWZpY2F0aW9uX3ZhcmlhYmxlLntzaW5n\nbGVfdmFsdWVkX29iamVjdF9maWVsZC59KnNpbmdsZV92YWx1ZWRfb2JqZWN0\nX2ZpZWxkIAogKiAgICBvcgogKiBnZW5lcmFsX2lkZW50aWZpY2F0aW9uX3Zh\ncmlhYmxlLntzaW5nbGVfdmFsdWVkX29iamVjdF9maWVsZC59KmNvbGxlY3Rp\nb25fdmFsdWVkX2ZpZWxkIAogKiA8L3ByZT4KICovCnB1YmxpYyBjbGFzcyBU\nZXN0UXVhbGlmaWVkUGF0aCBleHRlbmRzIFNRTExpc3RlbmVyVGVzdENhc2Ug\newogICAgcHJpdmF0ZSBpbnQgbnVtRGl2aXNpb25zID0gMjsKICAgIHByaXZh\ndGUgaW50IG51bUVtcGxveWVlc1BlckRpdmlzaW9uID0gMzsKICAgIHByaXZh\ndGUgaW50IG51bU1vYmlsZVBob25lc1BlckVtcGxveWVlID0gMjsKICAgIAog\nICAgcHJpdmF0ZSBpbnQgZGl2aXNpb25JZCA9IDA7CiAgICBwcml2YXRlIGlu\ndCBlbXBsb3llZUlkID0gMDsKICAgIHByaXZhdGUgaW50IG5hbWVDb3VudCA9\nIDA7CiAgICBwcml2YXRlIGludCBwaG9uZUlkID0gMDsKICAgIHByaXZhdGUg\naW50IHBob25lTnVtYmVyID0gMTIzNDU2Nzg5MDsKICAgIAogICAgT3BlbkpQ\nQUVudGl0eU1hbmFnZXIgZW07CiAgICAKICAgIHB1YmxpYyB2b2lkIHNldFVw\nKCkgewogICAgICAgIHN1cGVyLnNldFVwKENMRUFSX1RBQkxFUywKICAgICAg\nICAgICAgRGl2aXNpb24uY2xhc3MsIEVtcGxveWVlLmNsYXNzLCBQaG9uZS5j\nbGFzcywgUGVyc29uYWxJbmZvLmNsYXNzKTsKICAgICAgICBhc3NlcnROb3RO\ndWxsKGVtZik7CiAgICAgICAgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdl\ncigpOwogICAgICAgIGFzc2VydE5vdE51bGwoZW0pOwogICAgICAgIGNyZWF0\nZU9iaigpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RRdWVyaWVzKCkg\newogICAgICAgIGVtLmNsZWFyKCk7CiAgICAgICAgU3RyaW5nIHF1ZXJ5ID0g\nInNlbGVjdCBwICIgKyAKICAgICAgICAgICAgIiBmcm9tIERpdmlzaW9uIGQs\nIGluKGQuZW1wbG95ZWVzKSBlLCBpbihLRVkoZSkucGVyc29uYWxJbmZvLnBo\nb25lcykgcCI7CiAgICAgICAgUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5KHF1\nZXJ5KTsKICAgICAgICBMaXN0PD8+IHJzID0gcS5nZXRSZXN1bHRMaXN0KCk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKG51bURpdmlzaW9ucypudW1FbXBsb3ll\nZXNQZXJEaXZpc2lvbiooMiArIG51bU1vYmlsZVBob25lc1BlckVtcGxveWVl\nKSwgcnMuc2l6ZSgpKTsKICAgICAgIAogICAgICAgIGVtLmNsZWFyKCk7CiAg\nICAgICAgcXVlcnkgPSAic2VsZWN0IEtFWShlKSAiICsKICAgICAgICAgICAg\nImZyb20gRGl2aXNpb24gZCwgaW4oZC5lbXBsb3llZXMpIGUgIiArCiAgICAg\nICAgICAgICJ3aGVyZSBLRVkoZSkucGVyc29uYWxJbmZvLmxhc3ROYW1lID0g\nJ2xOYW1lMiciOwogICAgICAgIHEgPSBlbS5jcmVhdGVRdWVyeShxdWVyeSk7\nCiAgICAgICAgcnMgPSBxLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoMSwgcnMuc2l6ZSgpKTsKICAgICAgICBFbXBsb3llZSBlbXBs\nb3llZSA9IChFbXBsb3llZSlycy5nZXQoMCk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKCJsTmFtZTIiLCBlbXBsb3llZS5nZXRQZXJzb25hbEluZm8oKS5nZXRM\nYXN0TmFtZSgpKTsKICAgICAgICAKICAgICAgICBlbS5jbGVhcigpOwogICAg\nICAgIHF1ZXJ5ID0gInNlbGVjdCBLRVkoZSkgIiArCiAgICAgICAgICAgICJm\ncm9tIERpdmlzaW9uIGQsIGluKGQuZW1wbG95ZWVzKSBlICIgKwogICAgICAg\nICAgICAib3JkZXIgYnkgS0VZKGUpLnBlcnNvbmFsSW5mby5sYXN0TmFtZSI7\nCiAgICAgICAgcSA9IGVtLmNyZWF0ZVF1ZXJ5KHF1ZXJ5KTsKICAgICAgICBy\ncyA9IHEuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGFzc2VydEVxdWFscyhu\ndW1EaXZpc2lvbnMgKiBudW1FbXBsb3llZXNQZXJEaXZpc2lvbiwgcnMuc2l6\nZSgpKTsKICAgICAgICBlbXBsb3llZSA9IChFbXBsb3llZSlycy5nZXQoMCk7\nCiAgICAgICAgYXNzZXJ0VHJ1ZShlbXBsb3llZS5nZXRQZXJzb25hbEluZm8o\nKS5nZXRMYXN0TmFtZSgpLmVxdWFscygibE5hbWUxIikpOwogICAgICAgIGVt\ncGxveWVlID0gKEVtcGxveWVlKXJzLmdldCgxKTsKICAgICAgICBhc3NlcnRU\ncnVlKGVtcGxveWVlLmdldFBlcnNvbmFsSW5mbygpLmdldExhc3ROYW1lKCku\nZXF1YWxzKCJsTmFtZTIiKSk7CiAgICAgICAgCiAgICAgICAgZW0uY2xlYXIo\nKTsKICAgICAgICBxdWVyeSA9ICJzZWxlY3QgS0VZKGUpLnBlcnNvbmFsSW5m\nby5sYXN0TmFtZSAiICsKICAgICAgICAgICAgImZyb20gRGl2aXNpb24gZCwg\naW4gKGQuZW1wbG95ZWVzKSBlICIgKwogICAgICAgICAgICAiZ3JvdXAgYnkg\nS0VZKGUpLnBlcnNvbmFsSW5mby5sYXN0TmFtZSAiICsKICAgICAgICAgICAg\nImhhdmluZyBLRVkoZSkucGVyc29uYWxJbmZvLmxhc3ROYW1lID0gJ2xOYW1l\nMyciOwogICAgICAgIHEgPSBlbS5jcmVhdGVRdWVyeShxdWVyeSk7CiAgICAg\nICAgcnMgPSBxLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoMSwgcnMuc2l6ZSgpKTsKICAgIH0KICAgIAogICAgcHJpdmF0ZSB2b2lk\nIGNyZWF0ZU9iaigpIHsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJl\nZ2luKCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBudW1EaXZpc2lv\nbnM7IGkrKykgewogICAgICAgICAgICBjcmVhdGVEaXZpc2lvbihkaXZpc2lv\nbklkKyspOwogICAgICAgIH0KICAgICAgICBlbS5mbHVzaCgpOwogICAgICAg\nIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICB9CiAgICAKICAg\nIHByaXZhdGUgdm9pZCBjcmVhdGVEaXZpc2lvbihpbnQgaWQpIHsKICAgICAg\nICBEaXZpc2lvbiBkaXZpc2lvbiA9IG5ldyBEaXZpc2lvbigpOwogICAgICAg\nIGRpdmlzaW9uLnNldElkKGlkKTsKICAgICAgICBNYXA8RW1wbG95ZWUsIFN0\ncmluZz4gZW1wbG95ZWVzID0gbmV3IEhhc2hNYXA8RW1wbG95ZWUsIFN0cmlu\nZz4oKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG51bUVtcGxveWVl\nc1BlckRpdmlzaW9uOyBpKyspIHsKICAgICAgICAgICAgRW1wbG95ZWUgZW1w\nbG95ZWUgPSBjcmVhdGVFbXBsb3llZShlbXBsb3llZUlkKyspOwogICAgICAg\nICAgICBlbXBsb3llZXMucHV0KGVtcGxveWVlLCBlbXBsb3llZS5nZXRQZXJz\nb25hbEluZm8oKS5nZXRMYXN0TmFtZSgpKTsKICAgICAgICB9CiAgICAgICAg\nZGl2aXNpb24uc2V0RW1wbG95ZWVzKGVtcGxveWVlcyk7CiAgICAgICAgZW0u\ncGVyc2lzdChkaXZpc2lvbik7CiAgICB9CiAgICAKICAgIHByaXZhdGUgRW1w\nbG95ZWUgY3JlYXRlRW1wbG95ZWUoaW50IGlkKSB7CiAgICAgICAgRW1wbG95\nZWUgZW1wbG95ZWUgPSBuZXcgRW1wbG95ZWUoKTsKICAgICAgICBlbXBsb3ll\nZS5zZXRJZChpZCk7CiAgICAgICAgCiAgICAgICAgUGVyc29uYWxJbmZvIHBl\ncnNvbmFsSW5mbyA9IG5ldyBQZXJzb25hbEluZm8oKTsKICAgICAgICBwZXJz\nb25hbEluZm8uc2V0Rmlyc3ROYW1lKCJmTmFtZSIgKyBuYW1lQ291bnQrKyk7\nCiAgICAgICAgcGVyc29uYWxJbmZvLnNldExhc3ROYW1lKCJsTmFtZSIgKyBu\nYW1lQ291bnQpOwogICAgICAgIAogICAgICAgIFBob25lIGhvbWVQaG9uZSA9\nIG5ldyBQaG9uZShwaG9uZUlkKyssIFBob25lLkhPTUUsIHBob25lTnVtYmVy\nKyspOwogICAgICAgIHBlcnNvbmFsSW5mby5hZGRQaG9uZShob21lUGhvbmUp\nOwogICAgICAgIFBob25lIG9mZmljZVBob25lID0gbmV3IFBob25lKHBob25l\nSWQrKywgUGhvbmUuT0ZGSUNFLCBwaG9uZU51bWJlcisrKTsKICAgICAgICBw\nZXJzb25hbEluZm8uYWRkUGhvbmUob2ZmaWNlUGhvbmUpOwogICAgICAgIGZv\nciAoaW50IGkgPSAwOyBpIDwgbnVtTW9iaWxlUGhvbmVzUGVyRW1wbG95ZWU7\nIGkrKykgewogICAgICAgICAgICBQaG9uZSBtb2JpbGVQaG9uZSA9IG5ldyBQ\naG9uZShwaG9uZUlkKyssIFBob25lLk1PQklMRSwgcGhvbmVOdW1iZXIrKyk7\nCiAgICAgICAgICAgIHBlcnNvbmFsSW5mby5hZGRQaG9uZShtb2JpbGVQaG9u\nZSk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGVtcGxveWVlLnNldFBl\ncnNvbmFsSW5mbyhwZXJzb25hbEluZm8pOwogICAgICAgIAogICAgICAgIGVt\nLnBlcnNpc3QoZW1wbG95ZWUpOwogICAgICAgIAogICAgICAgIHJldHVybiBl\nbXBsb3llZTsKICAgIH0KCn0K\n","encoding":"base64"}

