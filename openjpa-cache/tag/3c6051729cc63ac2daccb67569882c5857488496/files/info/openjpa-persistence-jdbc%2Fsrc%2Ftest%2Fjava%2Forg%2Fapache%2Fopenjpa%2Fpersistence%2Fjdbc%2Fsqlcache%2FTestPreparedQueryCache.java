{"sha":"286023a5c7698b7c0497f08ddd42ba95ac0c1e56","node_id":"MDQ6QmxvYjIwNjM2NDoyODYwMjNhNWM3Njk4YjdjMDQ5N2YwOGRkZDQyYmE5NWFjMGMxZTU2","size":48554,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/286023a5c7698b7c0497f08ddd42ba95ac0c1e56","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuamRiYy5z\ncWxjYWNoZTsKCmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0OwppbXBvcnQg\namF2YS51dGlsLkFycmF5czsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9u\nczsKaW1wb3J0IGphdmEudXRpbC5JdGVyYXRvcjsKaW1wb3J0IGphdmEudXRp\nbC5MaXN0OwppbXBvcnQgamF2YS51dGlsLlByb3BlcnRpZXM7CgppbXBvcnQg\namF2YXgucGVyc2lzdGVuY2UuRW50aXR5TWFuYWdlcjsKaW1wb3J0IGphdmF4\nLnBlcnNpc3RlbmNlLkxvY2tNb2RlVHlwZTsKaW1wb3J0IGphdmF4LnBlcnNp\nc3RlbmNlLlF1ZXJ5OwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuVHlwZWRR\ndWVyeTsKCmltcG9ydCBqdW5pdC5mcmFtZXdvcmsuVGVzdENhc2U7CgppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5QcmVwYXJlZFF1ZXJ5Owpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5QcmVwYXJlZFF1ZXJ5\nQ2FjaGU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlF1ZXJ5\nSGludHM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlF1ZXJ5\nTGFuZ3VhZ2VzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5R\ndWVyeVN0YXRpc3RpY3M7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2Vy\nbmVsLmpwcWwuSlBRTFBhcnNlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5saWIuamRiYy5BYnN0cmFjdEpEQkNMaXN0ZW5lcjsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5saWIuamRiYy5KREJDRXZlbnQ7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEubGliLmpkYmMuSkRCQ0xpc3RlbmVyOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlN\nYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNl\nLk9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSTsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdl\nclNQSTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5P\ncGVuSlBBUGVyc2lzdGVuY2U7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2UuT3BlbkpQQVF1ZXJ5OwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnBlcnNpc3RlbmNlLmpkYmMuc3FsY2FjaGUuRW1wbG95ZWUuQ2F0\nZWdvcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uu\ndGVzdC5BbGxvd0ZhaWx1cmU7CgovKioKICogVGVzdHMgY29ycmVjdG5lc3Mg\nYW5kIHBlcmZvcm1hbmNlIG9mIHF1ZXJpZXMgd2l0aCBhbmQgd2l0aG91dCBQ\ncmVwYXJlZCBRdWVyeSBDYWNoZWluZy4KICogIAogKiBUaGlzIHRlc3QgdXNl\ncyBhIHNpbmdsZSBFbnRpdHlNYW5hZ2VyRmFjdG9yeSBpbml0aWFsaXplZCB3\naXRoIGZpeGVkIHNldCBvZiBlbnRpdHkgY2xhc3NlcyAKICogYW5kIGFwcHJv\ncHJpYXRlIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVycyBmb3IgUHJlcGFyZWQg\nUXVlcnkgQ2FjaGUuIAogKiAKICogVGhlIGVudGl0eSBjbGFzc2VzIGFyZSBz\ncGVjaWZpZWQgaW4gcGVyc2lzdGVuY2UgdW5pdCA8Y29kZT4iUHJlcGFyZWRR\ndWVyeSI8L2NvZGU+IGluIGEgCiAqIDxjb2RlPk1FVEEtSU5GL3BlcnNpc3Rl\nbmNlLnhtbDwvY29kZT4gdGhhdCBtdXN0IGJlIGF2YWlsYWJsZSB0byB0aGUg\nY2xhc3NwYXRoLgogKiAKICogQ29uZmlndXJlcyB0aGUgRW50aXR5TWFuYWdl\nckZhY3Rvcnkgd2l0aCBwcm9wZXJ0aWVzIHRoYXQgYXJlIHJlbGV2YW50IHRv\nIHRlc3RpbmcgUHJlcGFyZWRRdWVyeSBjYWNoZXMuCiAqIFN3aXRjaGVzIG9m\nZiBydW50aW1lIGVuaGFuY2VtZW50IHRvIGF2b2lkIHVuaW50ZW5kZWQgY29u\nc2VxdWVuY2VzLgogKiBQcm92aWRlcyBmYWNpbGl0aWVzIHRvIHJ1biBhIEpQ\nUUwgcXVlcnkgd2l0aCBhbmQgd2l0aG91dCBjYWNoZSBhbmQgY29tcHV0ZSB0\naGUgcGVyZm9ybWFuY2UgZGVsdGEuIAogKiAKICogVXNlcyBhIGhhcmQtY29k\nZWQgZGF0YSBzZXQgaW5pdGlhbGl6ZWQgb25jZSBmb3IgdGhlIGVudGlyZSBz\ndWl0ZS4gCiAqIAogKiBAYXV0aG9yIFBpbmFraSBQb2RkYXIKICogCiAqLwpw\ndWJsaWMgY2xhc3MgVGVzdFByZXBhcmVkUXVlcnlDYWNoZSBleHRlbmRzIFRl\nc3RDYXNlIHsKICAgIAogICAgcHJpdmF0ZSBzdGF0aWMgU3RyaW5nIFJFU09V\nUkNFID0gIk1FVEEtSU5GL3BlcnNpc3RlbmNlLnhtbCI7IAogICAgcHJpdmF0\nZSBzdGF0aWMgU3RyaW5nIFVOSVRfTkFNRSA9ICJQcmVwYXJlZFF1ZXJ5IjsK\nICAgIAogICAgcHJvdGVjdGVkIHN0YXRpYyBmaW5hbCBpbnQgU0FNUExFX1NJ\nWkUgPSAxMDA7ICAvLyBuby4gb2Ygb2JzZXJ2YXRpb25zIGZvciBwZXJmb3Jt\nYW5jZSBzdGF0aXN0aWNzIAogICAgcHVibGljIHN0YXRpYyBmaW5hbCBib29s\nZWFuIFVTRV9DQUNIRSAgPSB0cnVlOyAvLyBtbmVtb25pYyBmb3IgdXNpbmcg\nY2FjaGUKICAgIHByaXZhdGUgc3RhdGljIE9iamVjdFtdIE5PX1BBUkFNUyAg\nICAgID0gbnVsbDsgLy8gbW5lbW9uaWMgZm9yIG5vIHF1ZXJ5IHBhcmFtZXRl\ncnMKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgYm9vbGVhbiBJU19OQU1FRF9R\nVUVSWSAgPSB0cnVlOyAvLyBtbmVtb25pYyBmb3IgbmFtZWQgcXVlcnkKICAg\nIAogICAgcHJpdmF0ZSBzdGF0aWMgYm9vbGVhbiBGQUlMX0lGX1BFUkZfREVH\nUkFERSA9IGZhbHNlOyAKCiAgICAKICAgIHByaXZhdGUgc3RhdGljIENvbXBh\nbnkgSUJNOwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmdbXSBDT01Q\nQU5ZX05BTUVTICAgID0geyJJQk0iLCAiQkVBIiwgImFjbWUub3JnIiB9Owog\nICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnRbXSAgICBTVEFSVF9ZRUFSUyAg\nICAgID0gezE5MDAsIDIwMDAsIDIwMTAgfTsKCXB1YmxpYyBzdGF0aWMgZmlu\nYWwgU3RyaW5nW10gREVQQVJUTUVOVF9OQU1FUyA9IHsiTWFya2V0aW5nIiwg\nIlNhbGVzIiwgIkVuZ2luZWVyaW5nIiB9OwogICAgcHVibGljIHN0YXRpYyBm\naW5hbCBTdHJpbmdbXSBFTVBMT1lFRV9OQU1FUyAgID0geyJUb20iLCAiRGlj\nayIsICJIYXJyYXkiIH07CglwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZ1td\nIENJVFlfTkFNRVMgICAgICAgPSB7IlR1bHNhIiwgIkR1cmJhbiIsICJIYXJs\nZW0ifTsKCQogICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgRVhDTFVE\nRURfUVVFUllfMSA9ICJzZWxlY3QgY291bnQocCkgZnJvbSBDb21wYW55IHAi\nOwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgRVhDTFVERURfUVVF\nUllfMiA9ICJzZWxlY3QgY291bnQocCkgZnJvbSBEZXBhcnRtZW50IHAiOwoJ\ncHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgSU5DTFVERURfUVVFUlkgICA9\nICJzZWxlY3QgcCBmcm9tIEFkZHJlc3MgcCI7CgkKICAgIHB1YmxpYyBzdGF0\naWMgZmluYWwgbG9uZ1tdIEJPT0tfSURTICAgICA9IHsxMDAwLCAyMDAwLCAz\nMDAwfTsKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgU3RyaW5nW10gQk9PS19O\nQU1FUyA9IHsiQXJndW1lbnRhdGl2ZSBJbmRpYW4iLCAiVGluIERydW0iLCAi\nQmxpbmsifTsKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgbG9uZ1tdIENEX0lE\nUyAgICAgICA9IHsxMDAxLCAyMDAxLCAzMDAxfTsKICAgIHB1YmxpYyBzdGF0\naWMgZmluYWwgU3RyaW5nW10gQ0RfTEFCRUxTICA9ICB7IkJlYXRsZXMiLCAi\nU2luYXRyYSIsICJEb24ndCBSb2NrIE15IEJvYXQifTsKICAgIAogICAgcHJv\ndGVjdGVkIHN0YXRpYyBPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEkg\nZW1mOwogICAgcHJvdGVjdGVkIHN0YXRpYyBTUUxBdWRpdG9yIGF1ZGl0b3I7\nCiAgICBwcml2YXRlIE9wZW5KUEFFbnRpdHlNYW5hZ2VyU1BJIGVtOwoJCgkv\nKioKCSAqIFNldHMgdXAgdGhlIHRlc3Qgc3VpdGUgd2l0aCBhIHN0YXRpY2Fs\nbHkgaW5pdGlhbGl6ZWQgRW50aXR5TWFuYWdlckZhY3RvcnkuCgkgKiBDcmVh\ndGVzIGRhdGEgb25jZSBmb3IgYWxsIG90aGVyIHRlc3RzIHRvIHVzZS4KCSAq\nLwoJcHVibGljIHZvaWQgc2V0VXAoKSAgewogICAgICAgIGlmIChlbWYgPT0g\nbnVsbCkgewogICAgICAgICAgICBQcm9wZXJ0aWVzIGNvbmZpZyA9IG5ldyBQ\ncm9wZXJ0aWVzKCk7CiAgICAgICAgICAgIGNvbmZpZy5wdXQoIm9wZW5qcGEu\namRiYy5TeW5jaHJvbml6ZU1hcHBpbmdzIiwgImJ1aWxkU2NoZW1hKEZvcmVp\nZ25LZXlzPXRydWUsU2NoZW1hQWN0aW9uPSdkcm9wLGFkZCcpIik7CiAgICAg\nICAgICAgIGNvbmZpZy5wdXQoIm9wZW5qcGEuamRiYy5KREJDTGlzdGVuZXJz\nIiwgbmV3IEpEQkNMaXN0ZW5lcltdIHsgYXVkaXRvciA9IG5ldyBTUUxBdWRp\ndG9yKCl9KTsKICAgICAgICAgICAgY29uZmlnLnB1dCgib3BlbmpwYS5qZGJj\nLlF1ZXJ5U1FMQ2FjaGUiLCAidHJ1ZShFbmFibGVTdGF0aXN0aWNzPXRydWUp\nIik7CiAgICAgICAgICAgIGNvbmZpZy5wdXQoIm9wZW5qcGEuUnVudGltZVVu\nZW5oYW5jZWRDbGFzc2VzIiwgInVuc3VwcG9ydGVkIik7CiAgICAgICAgICAg\nIGNvbmZpZy5wdXQoIm9wZW5qcGEuRHluYW1pY0VuaGFuY2VtZW50QWdlbnQi\nLCAiZmFsc2UiKTsKICAgICAgICAgICAgZW1mID0gKE9wZW5KUEFFbnRpdHlN\nYW5hZ2VyRmFjdG9yeVNQSSlPcGVuSlBBUGVyc2lzdGVuY2UuY3JlYXRlRW50\naXR5TWFuYWdlckZhY3RvcnkoCiAgICAgICAgICAgICAgICAgICAgVU5JVF9O\nQU1FLCBSRVNPVVJDRSwgY29uZmlnKTsKICAgICAgICAgICAgZW0gPSBlbWYu\nY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgICAgICBjcmVhdGVUZXN0\nRGF0YSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAJCWVtID0gZW1mLmNyZWF0\nZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICAgICAgZ2V0UHJlcGFyZWRRdWVy\neUNhY2hlKCkuY2xlYXIoKTsKICAgICAgICB9Cgl9CgkKCS8qKgoJICogQ3Jl\nYXRlIGRhdGEgZm9yIHRoZSBlbnRpcmUgdGVzdCBzdWl0ZSB0byB1c2UuCgkg\nKi8KCXZvaWQgY3JlYXRlVGVzdERhdGEoKSB7CgkgICAgZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5iZWdpbigpOwoJICAgIGZvciAoaW50IGkgPSAwOyBpIDwgQ09N\nUEFOWV9OQU1FUy5sZW5ndGg7IGkrKykgewoJICAgICAgICBDb21wYW55IGNv\nbXBhbnkgPSBuZXcgQ29tcGFueSgpOwoJICAgICAgICBpZiAoaSA9PSAwKSAK\nCSAgICAgICAgICAgIElCTSA9IGNvbXBhbnk7CgkgICAgICAgIGNvbXBhbnku\nc2V0TmFtZShDT01QQU5ZX05BTUVTW2ldKTsKCSAgICAgICAgY29tcGFueS5z\nZXRTdGFydFllYXIoU1RBUlRfWUVBUlNbaV0pOwoJICAgICAgICBlbS5wZXJz\naXN0KGNvbXBhbnkpOwoJICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IERF\nUEFSVE1FTlRfTkFNRVMubGVuZ3RoOyBqKyspIHsKCSAgICAgICAgICAgIERl\ncGFydG1lbnQgZGVwdCA9IG5ldyBEZXBhcnRtZW50KCk7CgkgICAgICAgICAg\nICBkZXB0LnNldE5hbWUoREVQQVJUTUVOVF9OQU1FU1tqXSk7CgkgICAgICAg\nICAgICBjb21wYW55LmFkZERlcGFydG1lbnQoZGVwdCk7CgkgICAgICAgICAg\nICBlbS5wZXJzaXN0KGRlcHQpOwoJICAgICAgICAgICAgZm9yIChpbnQgayA9\nIDA7IGsgPCBFTVBMT1lFRV9OQU1FUy5sZW5ndGg7IGsrKykgewoJICAgICAg\nICAgICAgICAgIEVtcGxveWVlIGVtcCA9IG5ldyBFbXBsb3llZSgpOwoJICAg\nICAgICAgICAgICAgIGVtcC5zZXROYW1lKEVNUExPWUVFX05BTUVTW2tdKTsK\nCSAgICAgICAgICAgICAgICBBZGRyZXNzIGFkZHIgPSBuZXcgQWRkcmVzcygp\nOwoJICAgICAgICAgICAgICAgIGFkZHIuc2V0Q2l0eShDSVRZX05BTUVTW2td\nKTsKICAgICAgICAgICAgICAgICAgICBlbS5wZXJzaXN0KGVtcCk7CgkgICAg\nICAgICAgICAgICAgZW0ucGVyc2lzdChhZGRyKTsKCSAgICAgICAgICAgICAg\nICBlbXAuc2V0QWRkcmVzcyhhZGRyKTsKICAgICAgICAgICAgICAgICAgICBk\nZXB0LmFkZEVtcGxveWVlcyhlbXApOwoJICAgICAgICAgICAgfQoJICAgICAg\nICB9CgkgICAgfQogICAgICAgIFBlcnNvbiBwMSA9IG5ldyBQZXJzb24oIkpv\naG4iLCAiRG9lIiwgKHNob3J0KTQ1LCAxOTY0KTsKICAgICAgICBQZXJzb24g\ncDIgPSBuZXcgUGVyc29uKCJKb2huIiwgIkRvZSIsIChzaG9ydCk0MiwgMTk2\nNyk7CiAgICAgICAgUGVyc29uIHAzID0gbmV3IFBlcnNvbigiSGFycnkiLCAi\nRG9lIiwgKHNob3J0KTEyLCAxOTk1KTsKICAgICAgICBQZXJzb24gcDQgPSBu\nZXcgUGVyc29uKCJCYXJyeSIsICJEb2UiLCAoc2hvcnQpMjIsIDE5ODUpOwog\nICAgICAgIGVtLnBlcnNpc3QocDEpOwogICAgICAgIGVtLnBlcnNpc3QocDIp\nOwogICAgICAgIGVtLnBlcnNpc3QocDMpOwogICAgICAgIGVtLnBlcnNpc3Qo\ncDQpOwogICAgICAgIAogICAgICAgIEF1dGhvciBhMSA9IG5ldyBBdXRob3Io\nIkF1dGhvcjEiLCAiIiwgKHNob3J0KTQwLCAxOTYwKTsKICAgICAgICBBdXRo\nb3IgYTIgPSBuZXcgQXV0aG9yKCJBdXRob3IyIiwgIiIsIChzaG9ydCk0MSwg\nMTk2MSk7CiAgICAgICAgQXV0aG9yIGEzID0gbmV3IEF1dGhvcigiQXV0aG9y\nMyIsICIiLCAoc2hvcnQpNDIsIDE5NjIpOwogICAgICAgIFNpbmdlciBzMSA9\nIG5ldyBTaW5nZXIoIlNpbmdlcjEiLCAiIiwgKHNob3J0KTIxLCAxOTkxKTsK\nICAgICAgICBTaW5nZXIgczIgPSBuZXcgU2luZ2VyKCJTaW5nZXIyIiwgIiIs\nIChzaG9ydCkyMiwgMTk5Mik7CiAgICAgICAgCiAgICAgICAgbG9uZyBpZCA9\nIDEwMDsKICAgICAgICBCb29rICAgYjEgPSBuZXcgQm9vaygiQm9vazEiKTsK\nICAgICAgICBCb29rICAgYjIgPSBuZXcgQm9vaygiQm9vazIiKTsKICAgICAg\nICBDRCAgICAgYzEgPSBuZXcgQ0QoIkNEMSIpOwogICAgICAgIENEICAgICBj\nMiA9IG5ldyBDRCgiQ0QyIik7CiAgICAgICAgCiAgICAgICAgYjEuc2V0SWQo\naWQrKyk7IGIxLnNldFRpdGxlKCJ0aXRsZS0xIik7IGIxLnNldFRva2VuKCJM\nQVJHRSIpOwogICAgICAgIGIyLnNldElkKGlkKyspOyBiMi5zZXRUaXRsZSgi\ndGl0bGUtMiIpOyBiMi5zZXRUb2tlbigiTUVESVVNIik7CiAgICAgICAgYzEu\nc2V0SWQoaWQrKyk7CiAgICAgICAgYzIuc2V0SWQoaWQrKyk7CiAgICAgICAg\nYjEuYWRkQXV0aG9yKGExKTsKICAgICAgICBiMS5hZGRBdXRob3IoYTIpOwog\nICAgICAgIGIyLmFkZEF1dGhvcihhMik7CiAgICAgICAgYjIuYWRkQXV0aG9y\nKGEzKTsKICAgICAgICBjMS5zZXRTaW5nZXIoczEpOwogICAgICAgIGMyLnNl\ndFNpbmdlcihzMik7CiAgICAgICAgCiAgICAgICAgZW0ucGVyc2lzdChhMSk7\nIGVtLnBlcnNpc3QoYTIpOyAgIGVtLnBlcnNpc3QoYTMpOwogICAgICAgIGVt\nLnBlcnNpc3QoczEpOyBlbS5wZXJzaXN0KHMyKTsKICAgICAgICBlbS5wZXJz\naXN0KGIxKTsgZW0ucGVyc2lzdChiMik7CiAgICAgICAgZW0ucGVyc2lzdChj\nMSk7IGVtLnBlcnNpc3QoYzIpOwoKICAgICAgICBpZCA9IChpbnQpU3lzdGVt\nLmN1cnJlbnRUaW1lTWlsbGlzKCk7CiAgICAgICAgT3JkZXJKUEEgbzEgPSBu\nZXcgT3JkZXJKUEEoKTsKICAgICAgICBvMS5zZXRPcmRlcklkKGlkKyspOwog\nICAgICAgIG8xLnNldEN1c3RvbWVySWQoMzM5KTsKICAgICAgICBvMS5zZXRE\naXN0cmljdElkKDMpOwogICAgICAgIG8xLnNldFdhcmVob3VzZUlkKDIzKTsK\nICAgICAgICAKICAgICAgICBPcmRlckpQQSBvMiA9IG5ldyBPcmRlckpQQSgp\nOwogICAgICAgIG8yLnNldE9yZGVySWQoaWQrKyk7CiAgICAgICAgbzIuc2V0\nQ3VzdG9tZXJJZCgyOTY3KTsKICAgICAgICBvMi5zZXREaXN0cmljdElkKDUp\nOwogICAgICAgIG8yLnNldFdhcmVob3VzZUlkKDIyKTsKICAgICAgICAKICAg\nICAgICBlbS5wZXJzaXN0KG8xKTsKICAgICAgICBlbS5wZXJzaXN0KG8yKTsK\nICAgICAgICAKICAgICAgICAKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigp\nLmNvbW1pdCgpOwoJfQoKCXB1YmxpYyB2b2lkIHRlYXJEb3duKCkgdGhyb3dz\nIEV4Y2VwdGlvbiB7CgkgICAgaWYgKGVtLmlzT3BlbigpKQoJICAgICAgICBl\nbS5jbG9zZSgpOwoJCXN1cGVyLnRlYXJEb3duKCk7Cgl9CgkKCglwdWJsaWMg\ndm9pZCB0ZXN0UHJlcGFyZWRRdWVyeUNhY2hlSXNBY3RpdmVCeURlZmF1bHQo\nKSB7CgkJYXNzZXJ0Tm90TnVsbChnZXRQcmVwYXJlZFF1ZXJ5Q2FjaGUoKSk7\nCgl9CgkKCXB1YmxpYyB2b2lkIHRlc3RQcmVwYXJlZFF1ZXJ5Q2FjaGVJc1Bl\nclVuaXRTaW5nbGV0b24oKSB7CgkJUHJlcGFyZWRRdWVyeUNhY2hlIGMxID0g\nZ2V0UHJlcGFyZWRRdWVyeUNhY2hlKCk7CgkJUHJlcGFyZWRRdWVyeUNhY2hl\nIGMyID0gZ2V0UHJlcGFyZWRRdWVyeUNhY2hlKCk7CgkJYXNzZXJ0U2FtZShj\nMSwgYzIpOwoJfQoJCglwdWJsaWMgdm9pZCB0ZXN0UHJlcGFyZWRRdWVyeUlk\nZW50aWZpZXJJc09yaWdpbmFsSlBRTFF1ZXJ5KCkgewogICAgICAgIFN0cmlu\nZyBqcHFsID0gInNlbGVjdCBwIGZyb20gQ29tcGFueSBwIjsKICAgICAgICBP\ncGVuSlBBUXVlcnk8Pz4gcTEgPSBlbS5jcmVhdGVRdWVyeShqcHFsKTsKICAg\nICAgICBxMS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgUHJlcGFyZWRRdWVy\neSBwcSA9IGdldFByZXBhcmVkUXVlcnlDYWNoZSgpLmdldChqcHFsKTsKICAg\nICAgICBhc3NlcnROb3ROdWxsKHBxKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nanBxbCwgcHEuZ2V0SWRlbnRpZmllcigpKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoanBxbCwgcHEuZ2V0T3JpZ2luYWxRdWVyeSgpKTsKCX0KCQoJcHVibGlj\nIHZvaWQgdGVzdE9yaWdpbmFsSlBRTFF1ZXJ5U3RyaW5nSXNTZXRPblByZXBh\ncmVkUXVlcnkoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0IHAg\nZnJvbSBDb21wYW55IHAiOwogICAgICAgIE9wZW5KUEFRdWVyeTw/PiBxMSA9\nIGVtLmNyZWF0ZVF1ZXJ5KGpwcWwpOwogICAgICAgIHExLmdldFJlc3VsdExp\nc3QoKTsKICAgICAgICBQcmVwYXJlZFF1ZXJ5IHBxID0gZ2V0UHJlcGFyZWRR\ndWVyeUNhY2hlKCkuZ2V0KGpwcWwpOwogICAgICAgIGFzc2VydE5vdE51bGwo\ncHEpOwogICAgICAgIE9wZW5KUEFRdWVyeTw/PiBxMiA9IGVtLmNyZWF0ZVF1\nZXJ5KGpwcWwpOwogICAgICAgIGFzc2VydEVxdWFscyhqcHFsLHEyLmdldFF1\nZXJ5U3RyaW5nKCkpOwoJfQoKCXB1YmxpYyB2b2lkIHRlc3RPcmRlckJ5RWxl\nbWVudHNBYnNlbnRJblByb2plY3Rpb24oKSB7CgkgICAgU3RyaW5nIGpwcWwg\nPSAic2VsZWN0IGMubmFtZSBmcm9tIENvbXBhbnkgYyBPUkRFUiBCWSBjLnN0\nYXJ0WWVhciI7CiAgICAgICAgT3BlbkpQQVF1ZXJ5PD8+IHExID0gZW0uY3Jl\nYXRlUXVlcnkoanBxbCk7CiAgICAgICAgTGlzdCBsMSA9IHExLmdldFJlc3Vs\ndExpc3QoKTsKICAgICAgICAKICAgICAgICBQcmVwYXJlZFF1ZXJ5IHBxID0g\nZ2V0UHJlcGFyZWRRdWVyeUNhY2hlKCkuZ2V0KGpwcWwpOwogICAgICAgIGFz\nc2VydE5vdE51bGwocHEpOwogICAgICAgIE9wZW5KUEFRdWVyeTw/PiBxMiA9\nIGVtLmNyZWF0ZVF1ZXJ5KGpwcWwpOwogICAgICAgIExpc3QgbDIgPSBxMi5n\nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0RXF1YWxz\nKGwxLnNpemUoKSwgbDIuc2l6ZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nbDEudG9TdHJpbmcoKSwgbDIudG9TdHJpbmcoKSk7Cgl9CgkKCXB1YmxpYyB2\nb2lkIHRlc3RFeGNsdXNpb25QYXR0ZXJuKCkgewoJCU9wZW5KUEFRdWVyeTw/\nPiBxMSA9IGVtLmNyZWF0ZVF1ZXJ5KEVYQ0xVREVEX1FVRVJZXzEpOwoJCXEx\nLmdldFJlc3VsdExpc3QoKTsKCQlhc3NlcnROb3RDYWNoZWQoRVhDTFVERURf\nUVVFUllfMSk7CgkJCgkJT3BlbkpQQVF1ZXJ5PD8+IHEyID0gZW0uY3JlYXRl\nUXVlcnkoRVhDTFVERURfUVVFUllfMik7CgkJcTIuZ2V0UmVzdWx0TGlzdCgp\nOwoJCWFzc2VydE5vdENhY2hlZChFWENMVURFRF9RVUVSWV8yKTsKCQkKCQlP\ncGVuSlBBUXVlcnk8Pz4gcTMgPSBlbS5jcmVhdGVRdWVyeShJTkNMVURFRF9R\nVUVSWSk7CgkJcTMuZ2V0UmVzdWx0TGlzdCgpOwoJCWFzc2VydENhY2hlZChJ\nTkNMVURFRF9RVUVSWSk7Cgl9CgkKCXZvaWQgYXNzZXJ0TGFuZ3VhZ2UoT3Bl\nbkpQQVF1ZXJ5PD8+IHEsIFN0cmluZyBsYW5nKSB7CgkJYXNzZXJ0RXF1YWxz\nKGxhbmcsIHEuZ2V0TGFuZ3VhZ2UoKSk7Cgl9CgkKCXZvaWQgYXNzZXJ0Q2Fj\naGVkKFN0cmluZyBpZCkgewoJCVByZXBhcmVkUXVlcnkgY2FjaGVkID0gZ2V0\nUHJlcGFyZWRRdWVyeUNhY2hlKCkuZ2V0KGlkKTsKCQlhc3NlcnROb3ROdWxs\nKGdldFByZXBhcmVkUXVlcnlDYWNoZSgpICsgIjogIiArIGdldFByZXBhcmVk\nUXVlcnlDYWNoZSgpLmdldE1hcFZpZXcoKSArIAoJCQkJIiBkb2VzIG5vdCBj\nb250YWluICIgKyBpZCwgY2FjaGVkKTsKCX0KCQoJdm9pZCBhc3NlcnROb3RD\nYWNoZWQoU3RyaW5nIGlkKSB7CgkgICAgUHJlcGFyZWRRdWVyeUNhY2hlIGNh\nY2hlID0gZ2V0UHJlcGFyZWRRdWVyeUNhY2hlKCk7CgkJaWYgKGNhY2hlICE9\nIG51bGwpIHsKCQkJYXNzZXJ0TnVsbChjYWNoZS5nZXQoaWQpKTsKCQl9Cgl9\nCgkKCXB1YmxpYyB2b2lkIHRlc3RQcmVwYXJlZFF1ZXJ5SXNDYWNoZWRPbkV4\nZWN1dGlvbigpIHsKCQlTdHJpbmcganBxbCA9ICJzZWxlY3QgcCBmcm9tIENv\nbXBhbnkgcCI7CgkJT3BlbkpQQVF1ZXJ5PD8+IHExID0gZW0uY3JlYXRlUXVl\ncnkoanBxbCk7CgkJYXNzZXJ0Tm90Q2FjaGVkKGpwcWwpOwoJCWFzc2VydExh\nbmd1YWdlKHExLCBKUFFMUGFyc2VyLkxBTkdfSlBRTCk7CgkJCgkJcTEuZ2V0\nUmVzdWx0TGlzdCgpOwoJCWFzc2VydENhY2hlZChqcHFsKTsKCQlhc3NlcnRM\nYW5ndWFnZShxMSwgSlBRTFBhcnNlci5MQU5HX0pQUUwpOwoJCQoJCVByZXBh\ncmVkUXVlcnkgY2FjaGVkID0gZ2V0UHJlcGFyZWRRdWVyeUNhY2hlKCkuZ2V0\nKGpwcWwpOwoJCWFzc2VydEVxdWFscyhqcHFsLCBjYWNoZWQuZ2V0SWRlbnRp\nZmllcigpKTsKCQlhc3NlcnRGYWxzZShqcHFsLmVxdWFsc0lnbm9yZUNhc2Uo\nY2FjaGVkLmdldFRhcmdldFF1ZXJ5KCkpKTsKCX0KCglwdWJsaWMgdm9pZCB0\nZXN0UHJlcGFyZWRRdWVyeUlzQ2FjaGVkQWNyb3NzRXhlY3V0aW9uKCkgewoJ\nCVN0cmluZyBqcHFsID0gInNlbGVjdCBwIGZyb20gQ29tcGFueSBwIjsKCQlP\ncGVuSlBBUXVlcnk8Pz4gcTEgPSBlbS5jcmVhdGVRdWVyeShqcHFsKTsKCQlh\nc3NlcnROb3RDYWNoZWQoanBxbCk7CgkJYXNzZXJ0TGFuZ3VhZ2UocTEsIEpQ\nUUxQYXJzZXIuTEFOR19KUFFMKTsKCQkKCQkKCQlxMS5nZXRSZXN1bHRMaXN0\nKCk7CgkJYXNzZXJ0Q2FjaGVkKGpwcWwpOwoJCWFzc2VydExhbmd1YWdlKHEx\nLCBKUFFMUGFyc2VyLkxBTkdfSlBRTCk7CgkJCgkJLy8gQ3JlYXRlIGEgbmV3\nIHF1ZXJ5IHdpdGggdGhlIHNhbWUgSlBRTAoJCS8vIFRoaXMgaXMgbm90IG9u\nbHkgY2FjaGVkLCBpdHMgbGFuZ3VhZ2UgaXMgZGlmZmVyZW50IHRvbwoJCU9w\nZW5KUEFRdWVyeTw/PiBxMiA9IGVtLmNyZWF0ZVF1ZXJ5KGpwcWwpOwoJCWFz\nc2VydENhY2hlZChqcHFsKTsKCQlhc3NlcnRMYW5ndWFnZShxMiwgUXVlcnlM\nYW5ndWFnZXMuTEFOR19QUkVQQVJFRF9TUUwpOwoJfQoJCglwdWJsaWMgdm9p\nZCB0ZXN0SW52YWxpZGF0ZVByZXBhcmVkUXVlcnlXaXRoSGludCgpIHsKCQlT\ndHJpbmcganBxbCA9ICJzZWxlY3QgcCBmcm9tIENvbXBhbnkgcCI7CgkJT3Bl\nbkpQQVF1ZXJ5PD8+IHExID0gZW0uY3JlYXRlUXVlcnkoanBxbCk7CgkJYXNz\nZXJ0Tm90Q2FjaGVkKGpwcWwpOwoJCQoJCXExLmdldFJlc3VsdExpc3QoKTsK\nCQlhc3NlcnRDYWNoZWQoanBxbCk7CgkJYXNzZXJ0TGFuZ3VhZ2UocTEsIEpQ\nUUxQYXJzZXIuTEFOR19KUFFMKTsKCQkKCQkvLyBDcmVhdGUgYSBuZXcgcXVl\ncnkgd2l0aCB0aGUgc2FtZSBKUFFMCgkJLy8gVGhpcyBpcyBjYWNoZWQgb24g\nY3JlYXRpb24sIGl0cyBsYW5ndWFnZSBpcyBQcmVwYXJlZCBTUUwKCQlPcGVu\nSlBBUXVlcnk8Pz4gcTIgPSBlbS5jcmVhdGVRdWVyeShqcHFsKTsKCQlhc3Nl\ncnRDYWNoZWQoanBxbCk7CgkJYXNzZXJ0TGFuZ3VhZ2UocTIsIFF1ZXJ5TGFu\nZ3VhZ2VzLkxBTkdfUFJFUEFSRURfU1FMKTsKCQlxMi5nZXRSZXN1bHRMaXN0\nKCk7CgkJCgkJLy8gTm93IGV4ZWN1dGUgd2l0aCBoaW50cyB0byBpbnZhbGlk\nYXRlLiAKCQlxMi5zZXRIaW50KFF1ZXJ5SGludHMuSElOVF9JTlZBTElEQVRF\nX1BSRVBBUkVEX1FVRVJZLCB0cnVlKTsKCQkvLyBJbW1lZGlhdGVseSBpdCBz\naG91bGQgYmUgcmVtb3ZlZCBmcm9tIHRoZSBjYWNoZQoJCWFzc2VydE5vdENh\nY2hlZChqcHFsKTsKCQlhc3NlcnRFcXVhbHMoSlBRTFBhcnNlci5MQU5HX0pQ\nUUwsIHEyLmdldExhbmd1YWdlKCkpOwoJCXEyLmdldFJlc3VsdExpc3QoKTsK\nCQkKCQkvLyBDcmVhdGUgYSBuZXcgcXVlcnkgd2l0aCB0aGUgc2FtZSBKUFFM\nCgkJLy8gVGhpcyBpcyBub3QgY2FjaGVkIG9uIGNyZWF0aW9uLCBpdHMgbGFu\nZ3VhZ2UgaXMgSlBRTAoJCU9wZW5KUEFRdWVyeTw/PiBxMyA9IGVtLmNyZWF0\nZVF1ZXJ5KGpwcWwpOwoJCWFzc2VydE5vdENhY2hlZChqcHFsKTsKCQlhc3Nl\ncnRMYW5ndWFnZShxMywgSlBRTFBhcnNlci5MQU5HX0pQUUwpOwoJfQoJCglw\ndWJsaWMgdm9pZCB0ZXN0SWdub3JlUHJlcGFyZWRRdWVyeVdpdGhIaW50KCkg\newoJCVN0cmluZyBqcHFsID0gInNlbGVjdCBwIGZyb20gQ29tcGFueSBwIjsK\nCQlPcGVuSlBBUXVlcnk8Pz4gcTEgPSBlbS5jcmVhdGVRdWVyeShqcHFsKTsK\nCQlhc3NlcnROb3RDYWNoZWQoanBxbCk7CgkJCgkJcTEuZ2V0UmVzdWx0TGlz\ndCgpOwoJCWFzc2VydENhY2hlZChqcHFsKTsKCQlhc3NlcnRMYW5ndWFnZShx\nMSwgSlBRTFBhcnNlci5MQU5HX0pQUUwpOwoJCQoJCS8vIENyZWF0ZSBhIG5l\ndyBxdWVyeSB3aXRoIHRoZSBzYW1lIEpQUUwKCQkvLyBUaGlzIGlzIGNhY2hl\nZCBvbiBjcmVhdGlvbiwgaXRzIGxhbmd1YWdlIGlzIFBSRVBBUkVEIFNRTAoJ\nCU9wZW5KUEFRdWVyeTw/PiBxMiA9IGVtLmNyZWF0ZVF1ZXJ5KGpwcWwpOwoJ\nCWFzc2VydENhY2hlZChqcHFsKTsKCQlhc3NlcnRMYW5ndWFnZShxMiwgUXVl\ncnlMYW5ndWFnZXMuTEFOR19QUkVQQVJFRF9TUUwpOwoJCXEyLmdldFJlc3Vs\ndExpc3QoKTsKCQkKCQkvLyBOb3cgZXhlY3V0ZSB3aXRoIGhpbnRzIHRvIGln\nbm9yZS4gCgkJcTIuc2V0SGludChRdWVyeUhpbnRzLkhJTlRfSUdOT1JFX1BS\nRVBBUkVEX1FVRVJZLCB0cnVlKTsKCQkvLyBJdCBzaG91bGQgcmVtYWluIGlu\nIHRoZSBjYWNoZQoJCWFzc2VydENhY2hlZChqcHFsKTsKCQkvLyBCdXQgaXRz\nIGxhbmd1YWdlIHNob3VsZCBiZSBKUFFMIGFuZCBub3QgUFJFUEFSRUQgU1FM\nCgkJYXNzZXJ0RXF1YWxzKEpQUUxQYXJzZXIuTEFOR19KUFFMLCBxMi5nZXRM\nYW5ndWFnZSgpKTsKCQlxMi5nZXRSZXN1bHRMaXN0KCk7CgkJCgkJLy8gQ3Jl\nYXRlIGEgbmV3IHF1ZXJ5IHdpdGggdGhlIHNhbWUgSlBRTAoJCS8vIFRoaXMg\naXMgY2FjaGVkIG9uIGNyZWF0aW9uLCBpdHMgbGFuZ3VhZ2UgaXMgUFJFUEFS\nRUQgU1FMCgkJT3BlbkpQQVF1ZXJ5PD8+IHEzID0gZW0uY3JlYXRlUXVlcnko\nanBxbCk7CgkJYXNzZXJ0Q2FjaGVkKGpwcWwpOwoJCWFzc2VydExhbmd1YWdl\nKHEzLCBRdWVyeUxhbmd1YWdlcy5MQU5HX1BSRVBBUkVEX1NRTCk7Cgl9CgoJ\ncHVibGljIHZvaWQgdGVzdFF1ZXJ5U3RhdGlzdGljcygpIHsKICAgICAgICBR\ndWVyeVN0YXRpc3RpY3M8U3RyaW5nPiBzdGF0cyA9IGdldFByZXBhcmVkUXVl\ncnlDYWNoZSgpLmdldFN0YXRpc3RpY3MoKTsKICAgICAgICBzdGF0cy5yZXNl\ndCgpOwoKICAgICAgICBTdHJpbmcganBxbDEgPSAic2VsZWN0IGMgZnJvbSBD\nb21wYW55IGMiOwogICAgICAgIFN0cmluZyBqcHFsMiA9ICJzZWxlY3QgYyBm\ncm9tIENvbXBhbnkgYyB3aGVyZSBjLm5hbWUgPSAnUE9iamVjdCciOwoJCWlu\ndCBOMSA9IDU7CgkJaW50IE4yID0gODsKCQlmb3IgKGludCBpID0gMDsgaSA8\nIE4xOyBpKyspIHsKCSAgICAgICAgT3BlbkpQQVF1ZXJ5PD8+IHExID0gZW0u\nY3JlYXRlUXVlcnkoanBxbDEpOwoJCQlxMS5nZXRSZXN1bHRMaXN0KCk7CgkJ\nfQoJCWZvciAoaW50IGkgPSAwOyBpIDwgTjI7IGkrKykgewoJICAgICAgICBP\ncGVuSlBBUXVlcnk8Pz4gcTIgPSBlbS5jcmVhdGVRdWVyeShqcHFsMik7CgkJ\nCXEyLmdldFJlc3VsdExpc3QoKTsKCQl9CgkJCgkJYXNzZXJ0RXF1YWxzKE4x\nLCAgICAgIHN0YXRzLmdldEV4ZWN1dGlvbkNvdW50KGpwcWwxKSk7CgkJYXNz\nZXJ0RXF1YWxzKE4yLCAgICAgIHN0YXRzLmdldEV4ZWN1dGlvbkNvdW50KGpw\ncWwyKSk7CgkJYXNzZXJ0RXF1YWxzKE4xK04yLCAgIHN0YXRzLmdldEV4ZWN1\ndGlvbkNvdW50KCkpOwoJCWFzc2VydEVxdWFscyhOMS0xLCAgICBzdGF0cy5n\nZXRIaXRDb3VudChqcHFsMSkpOwoJCWFzc2VydEVxdWFscyhOMi0xLCAgICBz\ndGF0cy5nZXRIaXRDb3VudChqcHFsMikpOwoJCWFzc2VydEVxdWFscyhOMStO\nMi0yLCBzdGF0cy5nZXRIaXRDb3VudCgpKTsKCQkKCX0KCglwdWJsaWMgdm9p\nZCB0ZXN0UmVzZXRRdWVyeVN0YXRpc3RpY3MoKSB7CiAgICAgICAgUXVlcnlT\ndGF0aXN0aWNzPFN0cmluZz4gc3RhdHMgPSBnZXRQcmVwYXJlZFF1ZXJ5Q2Fj\naGUoKS5nZXRTdGF0aXN0aWNzKCk7CiAgICAgICAgc3RhdHMucmVzZXQoKTsK\nICAgICAgICAKCQlTdHJpbmcganBxbDEgPSAic2VsZWN0IGMgZnJvbSBDb21w\nYW55IGMiOwogICAgICAgIFN0cmluZyBqcHFsMiA9ICJzZWxlY3QgYyBmcm9t\nIENvbXBhbnkgYyB3aGVyZSBjLm5hbWUgPSAnUE9iamVjdCciOwoJCWludCBO\nMTAgPSA0OwoJCWludCBOMjAgPSA3OwoJCWZvciAoaW50IGkgPSAwOyBpIDwg\nTjEwOyBpKyspIHsKCSAgICAgICAgT3BlbkpQQVF1ZXJ5PD8+IHExID0gZW0u\nY3JlYXRlUXVlcnkoanBxbDEpOwoJCQlxMS5nZXRSZXN1bHRMaXN0KCk7CgkJ\nfQoJCWZvciAoaW50IGkgPSAwOyBpIDwgTjIwOyBpKyspIHsKCSAgICAgICAg\nT3BlbkpQQVF1ZXJ5PD8+IHEyID0gZW0uY3JlYXRlUXVlcnkoanBxbDIpOwoJ\nCQlxMi5nZXRSZXN1bHRMaXN0KCk7CgkJfQoJCQoJCWFzc2VydEVxdWFscyhO\nMTAsICAgICAgIHN0YXRzLmdldEV4ZWN1dGlvbkNvdW50KGpwcWwxKSk7CgkJ\nYXNzZXJ0RXF1YWxzKE4yMCwgICAgICAgc3RhdHMuZ2V0RXhlY3V0aW9uQ291\nbnQoanBxbDIpKTsKCQlhc3NlcnRFcXVhbHMoTjEwK04yMCwgICBzdGF0cy5n\nZXRFeGVjdXRpb25Db3VudCgpKTsKCQlhc3NlcnRFcXVhbHMoTjEwLTEsICAg\nICBzdGF0cy5nZXRIaXRDb3VudChqcHFsMSkpOwoJCWFzc2VydEVxdWFscyhO\nMjAtMSwgICAgIHN0YXRzLmdldEhpdENvdW50KGpwcWwyKSk7CgkJYXNzZXJ0\nRXF1YWxzKE4xMCtOMjAtMiwgc3RhdHMuZ2V0SGl0Q291bnQoKSk7CgkJCgkJ\nc3RhdHMucmVzZXQoKTsKCQkKCQlpbnQgTjExID0gNzsKCQlpbnQgTjIxID0g\nNDsKCQlmb3IgKGludCBpID0gMDsgaSA8IE4xMTsgaSsrKSB7CiAgICAgICAg\nICAgIE9wZW5KUEFRdWVyeTw/PiBxMSA9IGVtLmNyZWF0ZVF1ZXJ5KGpwcWwx\nKTsKCQkJcTEuZ2V0UmVzdWx0TGlzdCgpOwoJCX0KCQlmb3IgKGludCBpID0g\nMDsgaSA8IE4yMTsgaSsrKSB7CiAgICAgICAgICAgIE9wZW5KUEFRdWVyeTw/\nPiBxMiA9IGVtLmNyZWF0ZVF1ZXJ5KGpwcWwyKTsKCQkJcTIuZ2V0UmVzdWx0\nTGlzdCgpOwoJCX0KCgkJYXNzZXJ0RXF1YWxzKE4xMSwgICAgIHN0YXRzLmdl\ndEV4ZWN1dGlvbkNvdW50KGpwcWwxKSk7CgkJYXNzZXJ0RXF1YWxzKE4yMSwg\nICAgIHN0YXRzLmdldEV4ZWN1dGlvbkNvdW50KGpwcWwyKSk7CgkJYXNzZXJ0\nRXF1YWxzKE4xMStOMjEsIHN0YXRzLmdldEV4ZWN1dGlvbkNvdW50KCkpOwoJ\nCWFzc2VydEVxdWFscyhOMTEsICAgICBzdGF0cy5nZXRIaXRDb3VudChqcHFs\nMSkpOwoJCWFzc2VydEVxdWFscyhOMjEsICAgICBzdGF0cy5nZXRIaXRDb3Vu\ndChqcHFsMikpOwoJCWFzc2VydEVxdWFscyhOMTErTjIxLCBzdGF0cy5nZXRI\naXRDb3VudCgpKTsKCQkKLy8JCWFzc2VydEVxdWFscyhOMTArTjExLCAgICAg\nc3RhdHMuZ2V0VG90YWxFeGVjdXRpb25Db3VudChqcHFsMSkpOwovLwkJYXNz\nZXJ0RXF1YWxzKE4yMCtOMjEsICAgICBzdGF0cy5nZXRUb3RhbEV4ZWN1dGlv\nbkNvdW50KGpwcWwyKSk7Ci8vCQlhc3NlcnRFcXVhbHMoTjEwK04xMStOMjAr\nTjIxLCBzdGF0cy5nZXRUb3RhbEV4ZWN1dGlvbkNvdW50KCkpOwoJCWFzc2Vy\ndEVxdWFscyhOMTArTjExLTEsICAgICBzdGF0cy5nZXRUb3RhbEhpdENvdW50\nKGpwcWwxKSk7CgkJYXNzZXJ0RXF1YWxzKE4yMCtOMjEtMSwgICAgIHN0YXRz\nLmdldFRvdGFsSGl0Q291bnQoanBxbDIpKTsKCQlhc3NlcnRFcXVhbHMoTjEw\nK04xMStOMjArTjIxLTIsIHN0YXRzLmdldFRvdGFsSGl0Q291bnQoKSk7CgkJ\nCgl9CgoJcHVibGljIHZvaWQgdGVzdFF1ZXJ5V2l0aE5vUGFyYW1ldGVyKCkg\newoJCVN0cmluZyBqcHFsID0gInNlbGVjdCBwIGZyb20gQ29tcGFueSBwIjsK\nCQljb21wYXJlKGpwcWwsICFJU19OQU1FRF9RVUVSWSk7Cgl9CgoJcHVibGlj\nIHZvaWQgdGVzdFF1ZXJ5V2l0aExpdGVyYWwoKSB7CiAgICAgICAgU3RyaW5n\nIGpwcWwgPSAic2VsZWN0IHAgZnJvbSBDb21wYW55IHAgd2hlcmUgcC5uYW1l\nID0gIiArIGxpdGVyYWwoQ09NUEFOWV9OQU1FU1swXSk7CgkJY29tcGFyZShq\ncHFsLCAhSVNfTkFNRURfUVVFUlkpOwoJfQoKCXB1YmxpYyB2b2lkIHRlc3RR\ndWVyeVdpdGhQYXJhbWV0ZXIoKSB7CgkJU3RyaW5nIGpwcWwgPSAic2VsZWN0\nIHAgZnJvbSBDb21wYW55IHAgd2hlcmUgcC5uYW1lID0gOnBhcmFtIjsKCQlP\nYmplY3RbXSBwYXJhbXMgPSB7InBhcmFtIiwgQ09NUEFOWV9OQU1FU1swXX07\nCgkJY29tcGFyZShqcHFsLCAhSVNfTkFNRURfUVVFUlksICBwYXJhbXMpOwoJ\nfQoKCXB1YmxpYyB2b2lkIHRlc3RRdWVyeVdpdGhKb2luc0FuZFBhcmFtZXRl\ncnMoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0IGUgZnJvbSBF\nbXBsb3llZSBlICIgKyAid2hlcmUgZS5uYW1lID0gOmVtcCIKCQkJCQkrICIg\nYW5kIGUuZGVwYXJ0bWVudC5uYW1lID0gOmRlcHQiCiAgICAgICAgICAgICAg\nICAgICAgKyAiIGFuZCBlLmRlcGFydG1lbnQuY29tcGFueS5uYW1lIExJS0Ug\nICIKICAgICAgICAgICAgICAgICAgICArIGxpdGVyYWwoQ09NUEFOWV9OQU1F\nU1swXSkgCgkJCQkJKyAiIGFuZCBlLmFkZHJlc3MuY2l0eSA9IDpjaXR5IjsK\nCQlPYmplY3RbXSBwYXJhbXMgPSB7ICJlbXAiLCBFTVBMT1lFRV9OQU1FU1sw\nXSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZGVwdCIsIERFUEFS\nVE1FTlRfTkFNRVNbMF0sCgkJCQkJCQkiY2l0eSIsIENJVFlfTkFNRVNbMF19\nOwoJCWNvbXBhcmUoanBxbCwgIUlTX05BTUVEX1FVRVJZLCAgcGFyYW1zKTsK\nCX0KCglwdWJsaWMgdm9pZCB0ZXN0TmFtZWRRdWVyeVdpdGhOb1BhcmFtZXRl\ncigpIHsKCQlTdHJpbmcgbmFtZWRRdWVyeSA9ICJDb21wYW55LlByZXBhcmVk\nUXVlcnlXaXRoTm9QYXJhbWV0ZXIiOwogICAgICAgIGNvbXBhcmUobmFtZWRR\ndWVyeSwgSVNfTkFNRURfUVVFUlkpOwoJfQoKCXB1YmxpYyB2b2lkIHRlc3RO\nYW1lZFF1ZXJ5V2l0aExpdGVyYWwoKSB7CgkJU3RyaW5nIG5hbWVkUXVlcnkg\nPSAiQ29tcGFueS5QcmVwYXJlZFF1ZXJ5V2l0aExpdGVyYWwiOwoJCWNvbXBh\ncmUobmFtZWRRdWVyeSwgSVNfTkFNRURfUVVFUlkpOwoJfQoKCXB1YmxpYyB2\nb2lkIHRlc3ROYW1lZFF1ZXJ5V2l0aFBvc2l0aW9uYWxQYXJhbWV0ZXIoKSB7\nCiAgICAgICAgU3RyaW5nIG5hbWVkUXVlcnkgPSAiQ29tcGFueS5QcmVwYXJl\nZFF1ZXJ5V2l0aFBvc2l0aW9uYWxQYXJhbWV0ZXIiOwoJCU9iamVjdFtdIHBh\ncmFtcyA9IHsxLCBDT01QQU5ZX05BTUVTWzBdLCAyLCBTVEFSVF9ZRUFSU1sw\nXX07CgkJY29tcGFyZShuYW1lZFF1ZXJ5LCBJU19OQU1FRF9RVUVSWSwgIHBh\ncmFtcyk7Cgl9CgkKCXB1YmxpYyB2b2lkIHRlc3ROYW1lZFF1ZXJ5V2l0aE5h\nbWVkUGFyYW1ldGVyKCkgewoJCVN0cmluZyBuYW1lZFF1ZXJ5ID0gIkNvbXBh\nbnkuUHJlcGFyZWRRdWVyeVdpdGhOYW1lZFBhcmFtZXRlciI7CiAgICAgICAg\nT2JqZWN0W10gcGFyYW1zID0geyJuYW1lIiwgQ09NUEFOWV9OQU1FU1swXSwg\nInN0YXJ0WWVhciIsCiAgICAgICAgICAgICAgICBTVEFSVF9ZRUFSU1swXX07\nCgkJY29tcGFyZShuYW1lZFF1ZXJ5LCBJU19OQU1FRF9RVUVSWSwgIHBhcmFt\ncyk7Cgl9CgkKCXB1YmxpYyB2b2lkIHRlc3RQZXJzaXN0ZW5jZUNhcGFibGVQ\nYXJhbWV0ZXIoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0IGUg\nZnJvbSBFbXBsb3llZSBlICIgKwogICAgICAgICAgICAgICAgIndoZXJlIGUu\nZGVwYXJ0bWVudC5jb21wYW55PTpjb21wYW55IjsKCSAgICBPYmplY3RbXSBw\nYXJhbXMgPSB7ImNvbXBhbnkiLCBJQk19OwoJICAgIGNvbXBhcmUoanBxbCwg\nIUlTX05BTUVEX1FVRVJZLCAgcGFyYW1zKTsKCX0KCQoJLyoqCgkgKiBQcm9q\nZWN0IHJlc3VsdHMgYXJlIHJldHVybmVkIHdpdGggZGlmZmVyZW50IHR5cGVz\nIG9mIFJPUC4KCSAqLwoJcHVibGljIHZvaWQgdGVzdFByb2plY3Rpb25SZXN1\nbHQoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0IGUubmFtZSBm\ncm9tIEVtcGxveWVlIGUgIiArCiAgICAgICAgICAgICAgICAid2hlcmUgZS5h\nZGRyZXNzLmNpdHk9OmNpdHkiOwogICAgICAgIE9iamVjdFtdIHBhcmFtcyA9\nIHsiY2l0eSIsIENJVFlfTkFNRVNbMF19OwogICAgICAgIGNvbXBhcmUoanBx\nbCwgIUlTX05BTUVEX1FVRVJZLCBwYXJhbXMpOwoJfQoJCglwdWJsaWMgdm9p\nZCB0ZXN0Q29sbGVjdGlvblZhbHVlZFBhcmFtZXRlcnMoKSB7CgkgICAgU3Ry\naW5nIGpwcWwgPSAic2VsZWN0IGUgZnJvbSBFbXBsb3llZSBlIHdoZXJlIGUu\nbmFtZSBpbiA6bmFtZXMiOwoJICAgIE9iamVjdFtdIHBhcmFtczEgPSB7Im5h\nbWVzIiwKCSAgICAgICAgICAgIEFycmF5cy5hc0xpc3QobmV3IFN0cmluZ1td\ne0VNUExPWUVFX05BTUVTWzBdLAoJICAgICAgICAgICAgRU1QTE9ZRUVfTkFN\nRVNbMV19KX07CiAgICAgICAgT2JqZWN0W10gcGFyYW1zMiA9IHsibmFtZXMi\nLAogICAgICAgICAgICAgICAgQXJyYXlzLmFzTGlzdChuZXcgU3RyaW5nW117\nRU1QTE9ZRUVfTkFNRVNbMl19KX07CiAgICAgICAgT2JqZWN0W10gcGFyYW1z\nMyA9IHsibmFtZXMiLCBBcnJheXMuYXNMaXN0KEVNUExPWUVFX05BTUVTKX07\nCiAgICAgICAgCiAgICAgICAgaW50IGV4cGVjdGVkQ291bnQgPSAyICogQ09N\nUEFOWV9OQU1FUy5sZW5ndGggKiBERVBBUlRNRU5UX05BTUVTLmxlbmd0aDsK\nICAgICAgICBydW4oanBxbCwgIUlTX05BTUVEX1FVRVJZLCBwYXJhbXMxLCBl\neHBlY3RlZENvdW50LCBVU0VfQ0FDSEUsIDEpOwogICAgICAgIAogICAgICAg\nIGV4cGVjdGVkQ291bnQgPSAxICogQ09NUEFOWV9OQU1FUy5sZW5ndGggKiBE\nRVBBUlRNRU5UX05BTUVTLmxlbmd0aDsKICAgICAgICBydW4oanBxbCwgIUlT\nX05BTUVEX1FVRVJZLCBwYXJhbXMyLCBleHBlY3RlZENvdW50LCBVU0VfQ0FD\nSEUsIDEpOwogICAgICAgIAogICAgICAgIGV4cGVjdGVkQ291bnQgPSBFTVBM\nT1lFRV9OQU1FUy5sZW5ndGggKiBDT01QQU5ZX05BTUVTLmxlbmd0aCAqIERF\nUEFSVE1FTlRfTkFNRVMubGVuZ3RoOwogICAgICAgIHJ1bihqcHFsLCAhSVNf\nTkFNRURfUVVFUlksIHBhcmFtczMsIGV4cGVjdGVkQ291bnQsIFVTRV9DQUNI\nRSwgMSk7Cgl9CgkKICAgIHB1YmxpYyB2b2lkIHRlc3RRdWVyeVByb2plY3Rp\nb25Ob3RDYW5kaWRhdGVDbGFzcygpIHsKICAgICAgICBTdHJpbmcganBxbCA9\nICJzZWxlY3QgZS5kZXBhcnRtZW50IGZyb20gRW1wbG95ZWUgZSI7CiAgICAg\nICAgY29tcGFyZShqcHFsLCAhSVNfTkFNRURfUVVFUlkpOwogICAgfQogICAg\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0UXVlcnlNdWx0aXBsZVByb2plY3Rpb25D\nbGFzcygpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJzZWxlY3QgZCwgZSBm\ncm9tIERlcGFydG1lbnQgZCwgaW4gKGQuZW1wbG95ZWVzKSBlIjsKICAgICAg\nICBjb21wYXJlKGpwcWwsICFJU19OQU1FRF9RVUVSWSk7CiAgICB9CiAgICAK\nICAgIHB1YmxpYyB2b2lkIHRlc3RRdWVyeVdpdGhPcmRlckJ5Q2xhdXNlKCkg\newogICAgICAgIFN0cmluZyBqcHFsID0gInNlbGVjdCBlLm5hbWUgZnJvbSBF\nbXBsb3llZSBlIG9yZGVyIGJ5IGUuaWQiOwogICAgICAgIGNvbXBhcmUoanBx\nbCwgIUlTX05BTUVEX1FVRVJZKTsKICAgIH0KICAgIAogICAgcHVibGljIHZv\naWQgdGVzdFF1ZXJ5Q291bnQoKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAi\nc2VsZWN0IGNvdW50KGUpLGQgZnJvbSBEZXBhcnRtZW50IGQgam9pbiBkLmVt\ncGxveWVlcyBlIGdyb3VwIGJ5IGQiOwogICAgICAgIGNvbXBhcmUoanBxbCwg\nIUlTX05BTUVEX1FVRVJZKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQg\ndGVzdFByb2plY3RSZXBlYXRzVGVybSgpIHsKICAgICAgICBTdHJpbmcganBx\nbCA9ICJzZWxlY3QgZS5uYW1lLCBlLm5hbWUgZnJvbSBFbXBsb3llZSBlIjsK\nICAgICAgICBjb21wYXJlKGpwcWwsICFJU19OQU1FRF9RVUVSWSk7CiAgICB9\nCiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RQcm9qZWN0RW1iZWRkZWQoKSB7\nCiAgICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0IGUuYWRkcmVzcyBmcm9t\nIEVtcGxveWVlIGUiOwogICAgICAgIGNvbXBhcmUoanBxbCwgIUlTX05BTUVE\nX1FVRVJZKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdE5lZWRz\nVHlwZUNvbnZlcnNpb24oKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAic2Vs\nZWN0IGUubmFtZSwgZS5pc01hbmFnZXIgZnJvbSBFbXBsb3llZSBlIjsKICAg\nICAgICBjb21wYXJlKGpwcWwsICFJU19OQU1FRF9RVUVSWSk7CiAgICB9ICAg\nIAoJCglTdHJpbmcgbGl0ZXJhbChTdHJpbmcgcykgewoJICAgIHJldHVybiAi\nJyIrcysiJyI7Cgl9CgkKICAgIHB1YmxpYyB2b2lkIHRlc3RQb3NpdGlvbmFs\nKCkgewogICAgICAgIFN0cmluZyBqcHFsID0gInNlbGVjdCBwIGZyb20gUGVy\nc29uIHAgd2hlcmUgcC5maXJzdE5hbWU9PzEiICsKICAgICAgICAgICAgICAg\nICAgICAgICIgYW5kIHAubGFzdE5hbWU9J0RvZScgYW5kIHAuYWdlID4gPzIi\nOwogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5\nTWFuYWdlcigpOwogICAgICAgIAogICAgICAgIE9wZW5KUEFRdWVyeTw/PiBx\nMSA9IE9wZW5KUEFQZXJzaXN0ZW5jZS5jYXN0KGVtLmNyZWF0ZVF1ZXJ5KGpw\ncWwpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoSlBRTFBhcnNlci5MQU5HX0pQ\nUUwsIHExLmdldExhbmd1YWdlKCkpOwogICAgICAgIAogICAgICAgIExpc3Q8\nPz4gcmVzdWx0MSA9IHExLnNldFBhcmFtZXRlcigxLCAiSm9obiIpCiAgICAg\nICAgICAgICAgICAgICAgICAgLnNldFBhcmFtZXRlcigyLCAoc2hvcnQpNDAp\nCiAgICAgICAgICAgICAgICAgICAgICAgLmdldFJlc3VsdExpc3QoKTsKICAg\nICAgICAKICAgICAgICBhc3NlcnRFcXVhbHMoMiwgcmVzdWx0MS5zaXplKCkp\nOwogICAgICAgIAogICAgICAgIE9wZW5KUEFRdWVyeTw/PiBxMiA9IE9wZW5K\nUEFQZXJzaXN0ZW5jZS5jYXN0KGVtLmNyZWF0ZVF1ZXJ5KGpwcWwpKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoUXVlcnlMYW5ndWFnZXMuTEFOR19QUkVQQVJF\nRF9TUUwsIHEyLmdldExhbmd1YWdlKCkpOwogICAgICAgIExpc3Q8Pz4gcmVz\ndWx0MiA9IHEyLnNldFBhcmFtZXRlcigxLCAiSGFycnkiKQogICAgICAgICAg\nICAgICAgICAuc2V0UGFyYW1ldGVyKDIsIChzaG9ydCkxMCkKICAgICAgICAg\nICAgICAgICAgLmdldFJlc3VsdExpc3QoKTsKICAgICAgICAKICAgICAgICBh\nc3NlcnRFcXVhbHMoMSwgcmVzdWx0Mi5zaXplKCkpOwogICAgfQogICAgCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0TmFtZWQoKSB7CiAgICAgICAgU3RyaW5nIGpw\ncWwgPSAic2VsZWN0IHAgZnJvbSBQZXJzb24gcCB3aGVyZSBwLmZpcnN0TmFt\nZT06Zmlyc3QiICsKICAgICAgICAgICAgICAgICAgICAgICIgYW5kIHAubGFz\ndE5hbWU9J0RvZScgYW5kIHAuYWdlID4gOmFnZSI7CiAgICAgICAgRW50aXR5\nTWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAg\nICAgCiAgICAgICAgT3BlbkpQQVF1ZXJ5PD8+IHExID0gT3BlbkpQQVBlcnNp\nc3RlbmNlLmNhc3QoZW0uY3JlYXRlUXVlcnkoanBxbCkpOwogICAgICAgIGFz\nc2VydEVxdWFscyhKUFFMUGFyc2VyLkxBTkdfSlBRTCwgcTEuZ2V0TGFuZ3Vh\nZ2UoKSk7CiAgICAgICAgCiAgICAgICAgTGlzdDw/PiByZXN1bHQxID0gcTEu\nc2V0UGFyYW1ldGVyKCJmaXJzdCIsICJKb2huIikKICAgICAgICAgICAgICAg\nICAgICAgICAuc2V0UGFyYW1ldGVyKCJhZ2UiLCAoc2hvcnQpNDApCiAgICAg\nICAgICAgICAgICAgICAgICAgLmdldFJlc3VsdExpc3QoKTsKICAgICAgICAK\nICAgICAgICBhc3NlcnRFcXVhbHMoMiwgcmVzdWx0MS5zaXplKCkpOwogICAg\nICAgIAogICAgICAgIE9wZW5KUEFRdWVyeTw/PiBxMiA9IE9wZW5KUEFQZXJz\naXN0ZW5jZS5jYXN0KGVtLmNyZWF0ZVF1ZXJ5KGpwcWwpKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoUXVlcnlMYW5ndWFnZXMuTEFOR19QUkVQQVJFRF9TUUws\nIHEyLmdldExhbmd1YWdlKCkpOwogICAgICAgIExpc3Q8Pz4gcmVzdWx0MiA9\nIHEyLnNldFBhcmFtZXRlcigiZmlyc3QiLCAiQmFycnkiKQogICAgICAgICAg\nICAgICAgICAuc2V0UGFyYW1ldGVyKCJhZ2UiLCAoc2hvcnQpMjApCiAgICAg\nICAgICAgICAgICAgIC5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgCiAgICAg\nICAgYXNzZXJ0RXF1YWxzKDEsIHJlc3VsdDIuc2l6ZSgpKTsKICAgIH0KICAg\nIAogICAgcHVibGljIHZvaWQgdGVzdFdyb25nUGFyYW1ldGVyVmFsdWVUeXBl\nVGhyb3dFeGNlcHRpb24oKSB7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAic2Vs\nZWN0IHAgZnJvbSBQZXJzb24gcCB3aGVyZSBwLmZpcnN0TmFtZT06Zmlyc3Qi\nIAogICAgICAgICAgICAgICAgICAgICsgIiBhbmQgcC5hZ2UgPiA6YWdlIjsK\nICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1h\nbmFnZXIoKTsKCiAgICAgICAgT3BlbkpQQVF1ZXJ5PD8+IHExID0gT3BlbkpQ\nQVBlcnNpc3RlbmNlLmNhc3QoZW0uY3JlYXRlUXVlcnkoanBxbCkpOwogICAg\nICAgIHRyeSB7CiAgICAgICAgICAgIExpc3Q8Pz4gcmVzdWx0MSA9IHExLnNl\ndFBhcmFtZXRlcigiZmlyc3QiLCAoc2hvcnQpNDApCiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgLnNldFBhcmFtZXRlcigiYWdlIiwgIkpvaG4iKQog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXRSZXN1bHRMaXN0KCk7\nCiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGVkIHRvIGZhaWwgd2l0aCB3cm9u\nZyBwYXJhbWV0ZXIgdmFsdWUiKTsKICAgICAgICB9IGNhdGNoIChJbGxlZ2Fs\nQXJndW1lbnRFeGNlcHRpb24gZSkgewogICAgICAgICAgICAvLyBnb29kCiAg\nICAgICAgfQogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0TnVsbFBh\ncmFtZXRlclZhbHVlRm9yUHJpbWl0aXZlVHlwZVRocm93c0V4Y2VwdGlvbigp\nIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJzZWxlY3QgcCBmcm9tIFBlcnNv\nbiBwIHdoZXJlIHAuZmlyc3ROYW1lPTpmaXJzdCIgCiAgICAgICAgICAgICAg\nICAgICAgKyAiIGFuZCBwLmFnZSA+IDphZ2UiOwogICAgICAgIEVudGl0eU1h\nbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwoKICAgICAg\nICBPcGVuSlBBUXVlcnk8Pz4gcTEgPSBPcGVuSlBBUGVyc2lzdGVuY2UuY2Fz\ndChlbS5jcmVhdGVRdWVyeShqcHFsKSk7CiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgTGlzdDw/PiByZXN1bHQxID0gcTEuc2V0UGFyYW1ldGVyKCJmaXJz\ndCIsICJKb2huIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0\nUGFyYW1ldGVyKCJhZ2UiLCBudWxsKQogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIC5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgICAgIGZhaWwoIkV4\ncGVjdGVkIHRvIGZhaWwgd2l0aCBudWxsIHBhcmFtZXRlciB2YWx1ZSBmb3Ig\ncHJpbWl0aXZlcyIpOwogICAgICAgIH0gY2F0Y2ggKFJ1bnRpbWVFeGNlcHRp\nb24gZSkgewogICAgICAgICAgICAvLyBnb29kCiAgICAgICAgfQogICAgfQog\nICAgcHVibGljIHZvaWQgdGVzdFF1ZXJ5V2l0aExhenlSZWxhdGlvbklzQ2Fj\naGVkKCkgewogICAgICAgIC8vIEF1dGhvciBpcyBsYXppbHkgcmVsYXRlZCB0\nbyBCb29rCiAgICAgICAgU3RyaW5nIGpwcWwgPSAic2VsZWN0IHAgZnJvbSBB\ndXRob3IgcCI7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVh\ndGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgCiAgICAgICAgUXVlcnkgcTEg\nPSBlbS5jcmVhdGVRdWVyeShqcHFsKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nT3BlbkpQQVBlcnNpc3RlbmNlLmNhc3QocTEpLmdldExhbmd1YWdlKCksCiAg\nICAgICAgICAgICAgICBKUFFMUGFyc2VyLkxBTkdfSlBRTCk7CiAgICAgICAg\nTGlzdDxBdXRob3I+IGF1dGhvcnMxID0gcTEuZ2V0UmVzdWx0TGlzdCgpOwog\nICAgICAgIGFzc2VydEZhbHNlKGF1dGhvcnMxLmlzRW1wdHkoKSk7CiAgICAg\nICAgQXV0aG9yIGF1dGhvcjEgPSBhdXRob3JzMS5pdGVyYXRvcigpLm5leHQo\nKTsKICAgICAgICBlbS5jbG9zZSgpOyAvLyBub3RoaW5nIHdpbGwgYmUgbG9h\nZGVkIGJ5IGNoYW5jZQogICAgICAgIAogICAgICAgIGFzc2VydE51bGwoYXV0\naG9yMS5nZXRCb29rcygpKTsKICAgICAgICAKICAgICAgICAvLyBkbyB0aGUg\nc2FtZSB0aGluZyBhZ2FpbiwgdGhpcyB0aW1lIHF1ZXJ5IHNob3VsZCBiZSBj\nYWNoZWQKICAgICAgICBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7\nCiAgICAgICAgUXVlcnkgcTIgPSBlbS5jcmVhdGVRdWVyeShqcHFsKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoT3BlbkpQQVBlcnNpc3RlbmNlLmNhc3QocTIp\nLmdldExhbmd1YWdlKCksCiAgICAgICAgICAgICAgICBRdWVyeUxhbmd1YWdl\ncy5MQU5HX1BSRVBBUkVEX1NRTCk7CiAgICAgICAgTGlzdDxBdXRob3I+IGF1\ndGhvcnMyID0gcTIuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIGFzc2VydEZh\nbHNlKGF1dGhvcnMyLmlzRW1wdHkoKSk7CiAgICAgICAgQXV0aG9yIGF1dGhv\ncjIgPSBhdXRob3JzMi5pdGVyYXRvcigpLm5leHQoKTsKICAgICAgICBlbS5j\nbG9zZSgpOwogICAgICAgIAogICAgICAgIGFzc2VydE51bGwoYXV0aG9yMi5n\nZXRCb29rcygpKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdFF1\nZXJ5V2l0aEVhZ2VyUmVsYXRpb25Jc05vdENhY2hlZCgpIHsKICAgICAgICAv\nLyBCb29rIGlzIGVhZ2VybHkgcmVsYXRlZCB0byBBdXRob3IKICAgICAgICBT\ndHJpbmcganBxbCA9ICJzZWxlY3QgYiBmcm9tIEJvb2sgYiI7CiAgICAgICAg\nRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7\nCiAgICAgICAgCiAgICAgICAgUXVlcnkgcTEgPSBlbS5jcmVhdGVRdWVyeShq\ncHFsKTsKICAgICAgICBhc3NlcnRFcXVhbHMoT3BlbkpQQVBlcnNpc3RlbmNl\nLmNhc3QocTEpLmdldExhbmd1YWdlKCksCiAgICAgICAgICAgICAgICBKUFFM\nUGFyc2VyLkxBTkdfSlBRTCk7CiAgICAgICAgTGlzdDxCb29rPiBib29rcyA9\nIHExLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBhc3NlcnRGYWxzZShib29r\ncy5pc0VtcHR5KCkpOwogICAgICAgIEJvb2sgYm9vazEgPSBib29rcy5pdGVy\nYXRvcigpLm5leHQoKTsKICAgICAgICBlbS5jbG9zZSgpOyAvLyBub3RoaW5n\nIHdpbGwgYmUgbG9hZGVkIGJ5IGNoYW5jZQogICAgICAgIAogICAgICAgIGFz\nc2VydE5vdE51bGwoYm9vazEuZ2V0QXV0aG9ycygpKTsKICAgICAgICBhc3Nl\ncnRGYWxzZShib29rMS5nZXRBdXRob3JzKCkuaXNFbXB0eSgpKTsKICAgICAg\nICAKICAgICAgICAvLyBkbyB0aGUgc2FtZSB0aGluZyBhZ2FpbiwgdGhpcyB0\naW1lIHF1ZXJ5IHNob3VsZCBub3QgYmUgY2FjaGVkCiAgICAgICAgLy8gYmVj\nYXVzZSBpdCByZXF1aXJlcyBtdWx0aXBsZSBzZWxlY3RzCiAgICAgICAgZW0g\nPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIFF1ZXJ5IHEy\nID0gZW0uY3JlYXRlUXVlcnkoanBxbCk7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKE9wZW5KUEFQZXJzaXN0ZW5jZS5jYXN0KHEyKS5nZXRMYW5ndWFnZSgpLAog\nICAgICAgICAgICAgICAgSlBRTFBhcnNlci5MQU5HX0pQUUwpOwogICAgICAg\nIExpc3Q8Qm9vaz4gYm9va3MyID0gcTIuZ2V0UmVzdWx0TGlzdCgpOwogICAg\nICAgIGFzc2VydEZhbHNlKGJvb2tzMi5pc0VtcHR5KCkpOwogICAgICAgIEJv\nb2sgYm9vazIgPSBib29rczIuaXRlcmF0b3IoKS5uZXh0KCk7CiAgICAgICAg\nZW0uY2xvc2UoKTsKICAgICAgICAKICAgICAgICBhc3NlcnROb3ROdWxsKGJv\nb2syLmdldEF1dGhvcnMoKSk7CiAgICAgICAgYXNzZXJ0RmFsc2UoYm9vazIu\nZ2V0QXV0aG9ycygpLmlzRW1wdHkoKSk7CiAgICB9CgogICAgQEFsbG93RmFp\nbHVyZShtZXNzYWdlPSJXZSBoYXZlIHByb2JsZW1zIHdpdGggcmVwYXJhbWV0\ncml6YXRpb24gb2Ygc3VicXVlcnkgKyBjb25zdGFudCBsaXRlcmFscyIpCiAg\nICBwdWJsaWMgdm9pZCB4dGVzdFF1ZXJ5V2l0aFVzZXJEZWZpbmVkQW5kSW50\nZXJuYWxQYXJhbXRlcnNJblN1YnF1ZXJ5KCkgewogICAgICAgIFN0cmluZyBq\ncHFsID0gIlNlbGVjdCBhIEZyb20gQWRkcmVzcyBhIFdoZXJlIE5vdCBFeGlz\ndHMgKCIKICAgICAgICAgICAgKyAiICAgICBTZWxlY3Qgcy5pZCBGcm9tIFNp\nbmdlciBBcyBzIFdoZXJlICIKICAgICAgICAgICAgKyAiICAgICAgICBzLmFk\nZHJlc3MgPSBhICBBbmQgIgogICAgICAgICAgICArICIgICAgICAgIE5vdCAo\nIgogICAgICAgICAgICArICIgICAgICAgICAgICAgIChzLmZpcnN0TmFtZSA9\nIDpmaXJzdE5hbWUpICIKICAgICAgICAgICAgKyAiICAgICAgICAgICAgICBP\nciAiCiAgICAgICAgICAgICsgIiAgICAgICAgICAgICAgKCIKICAgICAgICAg\nICAgKyAiICAgICAgICAgICAgICAgICAgKCIKICAgICAgICAgICAgKyAiICAg\nICAgICAgICAgICAgICAgICAgIGV4aXN0cyAoc2VsZWN0IGMuaWQgZnJvbSBD\nRCBjIHdoZXJlIGMuc2luZ2VyID0gcyBhbmQgYy5zdGF0dXMgPSAxKSBBbmQg\nIgogICAgICAgICAgICArICIgICAgICAgICAgICAgICAgICAgICAgcy5sYXN0\nTmFtZSA9IDpsYXN0TmFtZSIKICAgICAgICAgICAgKyAiICAgICAgICAgICAg\nICAgICAgKSAiCiAgICAgICAgICAgICsgIiAgICAgICAgICAgICAgICAgIE9y\nICIKICAgICAgICAgICAgKyAiICAgICAgICAgICAgICAgICAgKCIKICAgICAg\nICAgICAgKyAiICAgICAgICAgICAgICAgICAgICAgIG5vdCBleGlzdHMgKFNl\nbGVjdCBjLmlkIGZyb20gQ0QgYyB3aGVyZSBjLnNpbmdlciA9IHMgYW5kIGMu\nc3RhdHVzID0gMikiCiAgICAgICAgICAgICsgIiAgICAgICAgICAgICAgICAg\nICkiCiAgICAgICAgICAgICsgIiAgICAgICAgICAgICAgKSIKICAgICAgICAg\nICAgKyAiICAgICAgICAgICAgKSIKICAgICAgICAgICAgKyAiICAgICApIjsK\nICAgICAgICAKICAgICAgICBRdWVyeSBqUSA9IGVtLmNyZWF0ZVF1ZXJ5KGpw\ncWwpOwogICAgICAgIGpRLnNldFBhcmFtZXRlcigibGFzdE5hbWUiLCAiTGFz\ndE5hbWUiKTsKICAgICAgICBqUS5zZXRQYXJhbWV0ZXIoImZpcnN0TmFtZSIs\nICJGaXJzdE5hbWUiKTsKICAgICAgICBMaXN0IGpMaXN0ID0galEuZ2V0UmVz\ndWx0TGlzdCgpOwogICAgICAgIAogICAgICAgIFF1ZXJ5IGpRMSA9IGVtLmNy\nZWF0ZVF1ZXJ5KGpwcWwpOwogICAgICAgIGpRMS5zZXRQYXJhbWV0ZXIoImxh\nc3ROYW1lIiwgIkxhc3ROYW1lMSIpOwogICAgICAgIGpRMS5zZXRQYXJhbWV0\nZXIoImZpcnN0TmFtZSIsICJGaXJzdE5hbWUxIik7CiAgICAgICAgdHJ5IHsK\nICAgICAgICAgICAgTGlzdCBqTGlzdDEgPSBqUTEuZ2V0UmVzdWx0TGlzdCgp\nOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAg\nIFN5c3RlbS5lcnIucHJpbnRsbihqUTEuZ2V0UGFyYW1ldGVycygpKTsKICAg\nICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTsKICAgICAgICAgICAgZmFp\nbCgiRmFpbCB0byBleGVjdXRlIGFnYWluIC0gUGFyYW1ldGVycyBhcmUgbWVz\nc2VkIHVwOiIgKyBlLmdldE1lc3NhZ2UoKSk7CiAgICAgICAgfQogICAgfQog\nICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0UHJlcGFyZWRRdWVyeUlnbm9yZWRX\naGVuTG9ja01vZGVJc1NldCgpIHsKICAgICAgICBTdHJpbmcganBxbCA9ICJz\nZWxlY3QgcCBmcm9tIEF1dGhvciBwIjsKICAgICAgICBFbnRpdHlNYW5hZ2Vy\nIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICAKICAg\nICAgICBRdWVyeSBxMSA9IGVtLmNyZWF0ZVF1ZXJ5KGpwcWwpOwogICAgICAg\nIGFzc2VydEVxdWFscyhKUFFMUGFyc2VyLkxBTkdfSlBRTCwgT3BlbkpQQVBl\ncnNpc3RlbmNlLmNhc3QocTEpLmdldExhbmd1YWdlKCkpOwogICAgICAgIExp\nc3Q8QXV0aG9yPiBhdXRob3JzMSA9IHExLmdldFJlc3VsdExpc3QoKTsKICAg\nICAgICAKICAgICAgICAvLyBkbyB0aGUgc2FtZSB0aGluZyBhZ2FpbiwgdGhp\ncyB0aW1lIHF1ZXJ5IHNob3VsZCBiZSBjYWNoZWQKICAgICAgICBlbS5nZXRU\ncmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgUXVlcnkgcTIgPSBlbS5j\ncmVhdGVRdWVyeShqcHFsKTsKICAgICAgICBhc3NlcnRFcXVhbHMoUXVlcnlM\nYW5ndWFnZXMuTEFOR19QUkVQQVJFRF9TUUwsIE9wZW5KUEFQZXJzaXN0ZW5j\nZS5jYXN0KHEyKS5nZXRMYW5ndWFnZSgpKTsKICAgICAgICBMb2NrTW9kZVR5\ncGUgbG1vZGUxID0gcTIuZ2V0TG9ja01vZGUoKTsKICAgICAgICBxMi5zZXRM\nb2NrTW9kZShMb2NrTW9kZVR5cGUuT1BUSU1JU1RJQyk7CiAgICAgICAgTG9j\na01vZGVUeXBlIGxtb2RlMiA9IHEyLmdldExvY2tNb2RlKCk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKEpQUUxQYXJzZXIuTEFOR19KUFFMLCBPcGVuSlBBUGVy\nc2lzdGVuY2UuY2FzdChxMikuZ2V0TGFuZ3VhZ2UoKSk7CiAgICAgICAgYXNz\nZXJ0RmFsc2UobG1vZGUxLmVxdWFscyhsbW9kZTIpKTsKICAgICAgICBMaXN0\nPEF1dGhvcj4gYXV0aG9yczIgPSBxMi5nZXRSZXN1bHRMaXN0KCk7CiAgICAg\nICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5yb2xsYmFjaygpOwogICAgfQogICAg\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0RW51bVBhcmFtZXRlcigpIHsKICAgICAg\nICBTdHJpbmcganBxbCA9ICJzZWxlY3QgZSBmcm9tIEVtcGxveWVlIGUgd2hl\ncmUgZS5zdGF0dXM9OmN1cnJlbnQgYW5kIGUuaGlyZVN0YXR1cz06aGlyZSI7\nCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlN\nYW5hZ2VyKCk7CiAgICAgICAgCiAgICAgICAgVHlwZWRRdWVyeTxFbXBsb3ll\nZT4gcTEgPSBlbS5jcmVhdGVRdWVyeShqcHFsLCBFbXBsb3llZS5jbGFzcyk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKEpQUUxQYXJzZXIuTEFOR19KUFFMLCBP\ncGVuSlBBUGVyc2lzdGVuY2UuY2FzdChxMSkuZ2V0TGFuZ3VhZ2UoKSk7CiAg\nICAgICAgTGlzdDxFbXBsb3llZT4gZW1wcyA9IHExLnNldFBhcmFtZXRlcigi\nY3VycmVudCIsIENhdGVnb3J5LlBFUk1BTkVOVCkKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAuc2V0UGFyYW1ldGVyKCJoaXJlIiwgQ2F0ZWdv\ncnkuQ09OVFJBQ1RPUikuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIAogICAg\nICAgIC8vIGRvIHRoZSBzYW1lIHRoaW5nIGFnYWluLCB0aGlzIHRpbWUgcXVl\ncnkgc2hvdWxkIGJlIGNhY2hlZAogICAgICAgIGVtLmdldFRyYW5zYWN0aW9u\nKCkuYmVnaW4oKTsKICAgICAgICBUeXBlZFF1ZXJ5PEVtcGxveWVlPiBxMiA9\nIGVtLmNyZWF0ZVF1ZXJ5KGpwcWwsIEVtcGxveWVlLmNsYXNzKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoUXVlcnlMYW5ndWFnZXMuTEFOR19QUkVQQVJFRF9T\nUUwsIE9wZW5KUEFQZXJzaXN0ZW5jZS5jYXN0KHEyKS5nZXRMYW5ndWFnZSgp\nKTsKICAgICAgICBMaXN0PEVtcGxveWVlPiBlbXBzMiA9IHEyLnNldFBhcmFt\nZXRlcigiY3VycmVudCIsIENhdGVnb3J5LlBFUk1BTkVOVCkKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIC5zZXRQYXJhbWV0ZXIoImhpcmUiLCBDYXRl\nZ29yeS5DT05UUkFDVE9SKS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5yb2xsYmFjaygpOwogICAgfQogICAgCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0TXVsdGl0aHJlYWRlZEFjY2VzcygpIHsKICAgICAg\nICBPcGVuSlBBRW50aXR5TWFuYWdlciBlbTEgPSBlbWYuY3JlYXRlRW50aXR5\nTWFuYWdlcigpOwogICAgICAgIFN0cmluZyBqcHFsID0gInNlbGVjdCBwIGZy\nb20gQXV0aG9yIHAgd2hlcmUgcC5uYW1lPTpuYW1lIjsKICAgICAgICBpbnQg\nTiA9IDU7CiAgICAgICAgVGhyZWFkW10gdGhyZWFkcyA9ICBuZXcgVGhyZWFk\nW05dOwogICAgICAgIFF1ZXJ5VGhyZWFkW10gcXRzID0gbmV3IFF1ZXJ5VGhy\nZWFkW05dOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgTjsgaSsrKSB7\nCiAgICAgICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVtdCA9IGVtZi5j\ncmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgICAgIHF0c1tpXSA9IG5l\ndyBRdWVyeVRocmVhZChlbXQsIGpwcWwpOwogICAgICAgICAgICB0aHJlYWRz\nW2ldID0gbmV3IFRocmVhZChxdHNbaV0pOwogICAgICAgICAgICB0aHJlYWRz\nW2ldLnNldERhZW1vbih0cnVlKTsKICAgICAgICB9CiAgICAgICAgZm9yIChU\naHJlYWQgdCA6IHRocmVhZHMpIHsKICAgICAgICAgICAgdC5zdGFydCgpOyAK\nICAgICAgICB9CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBOOyBpKysp\nIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICB0aHJlYWRzW2ld\nLmpvaW4oKTsKICAgICAgICAgICAgICBhc3NlcnRGYWxzZShxdHNbaV0uaXNG\nYWlsZWQoKSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKEludGVycnVwdGVkRXhj\nZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNl\nKCk7CiAgICAgICAgICAgICAgICBmYWlsKCk7CiAgICAgICAgICAgIH0KICAg\nICAgICB9CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RQYXJhbWV0\nZXJPbkV4dGVybmFsaXplZEZpZWxkSXNFeGNsdWRlZCgpIHsKICAgICAgICBT\ndHJpbmcganBxbCA9ICJzZWxlY3QgYiBmcm9tIEJvb2sgYiB3aGVyZSBiLnRp\ndGxlPTp0aXRsZSBhbmQgYi50b2tlbj06dG9rZW4iOwogICAgICAgIFF1ZXJ5\nIHExID0gZW0uY3JlYXRlUXVlcnkoanBxbCkKICAgICAgICAgIC5zZXRQYXJh\nbWV0ZXIoInRpdGxlIiwgInRpdGxlLTEiKQogICAgICAgICAgLnNldFBhcmFt\nZXRlcigidG9rZW4iLCAiTEFSR0UiKTsKICAgICAgICAvLyBkZWZhdWx0IGZl\ndGNoZXMgYXV0aG9ycyBlYWdlcmx5IGFuZCB0aHVzIGNyZWF0ZXMgbXVsdGlw\nbGUgU1FMIGFuZCBoZW5jZSBub3QgY2FjaGVzIGFueXdheQogICAgICAgIE9w\nZW5KUEFQZXJzaXN0ZW5jZS5jYXN0KHExKS5nZXRGZXRjaFBsYW4oKS5yZW1v\ndmVGZXRjaEdyb3VwKCJkZWZhdWx0Iik7CiAgICAgICAgYXNzZXJ0RmFsc2Uo\ncTEuZ2V0UmVzdWx0TGlzdCgpLmlzRW1wdHkoKSk7CiAgICAgICAgYXNzZXJ0\nTm90Q2FjaGVkKGpwcWwpOwogICAgICAgIFF1ZXJ5IHEyID0gZW0uY3JlYXRl\nUXVlcnkoanBxbCkKICAgICAgICAgICAgICAgICAgICAgLnNldFBhcmFtZXRl\ncigidGl0bGUiLCAidGl0bGUtMiIpCiAgICAgICAgICAgICAgICAgICAgIC5z\nZXRQYXJhbWV0ZXIoInRva2VuIiwgIk1FRElVTSIpOwogICAgICAgYXNzZXJ0\nRmFsc2UocTIuZ2V0UmVzdWx0TGlzdCgpLmlzRW1wdHkoKSk7CiAgICB9CiAg\nICAKICAgIHB1YmxpYyB2b2lkIHRlc3ROb1BhcmFtZXRlck9uRXh0ZXJuYWxp\nemVkRmllbGRJc0luY2x1ZGVkKCkgewogICAgICAgIFN0cmluZyBqcHFsID0g\nInNlbGVjdCBiIGZyb20gQm9vayBiIHdoZXJlIGIudGl0bGU9OnRpdGxlIjsK\nICAgICAgICBRdWVyeSBxMSA9IGVtLmNyZWF0ZVF1ZXJ5KGpwcWwpCiAgICAg\nICAgICAuc2V0UGFyYW1ldGVyKCJ0aXRsZSIsICJ0aXRsZS0xIik7CiAgICAg\nICAgLy8gZGVmYXVsdCBmZXRjaGVzIGF1dGhvcnMgZWFnZXJseSBhbmQgdGh1\ncyBjcmVhdGVzIG11bHRpcGxlIFNRTCBhbmQgaGVuY2Ugbm90IGNhY2hlcyBh\nbnl3YXkKICAgICAgICBPcGVuSlBBUGVyc2lzdGVuY2UuY2FzdChxMSkuZ2V0\nRmV0Y2hQbGFuKCkucmVtb3ZlRmV0Y2hHcm91cCgiZGVmYXVsdCIpOwogICAg\nICAgIGFzc2VydEZhbHNlKHExLmdldFJlc3VsdExpc3QoKS5pc0VtcHR5KCkp\nOwogICAgICAgIGFzc2VydENhY2hlZChqcHFsKTsKICAgICAgICBRdWVyeSBx\nMiA9IGVtLmNyZWF0ZVF1ZXJ5KGpwcWwpCiAgICAgICAgICAgICAgICAgICAg\nIC5zZXRQYXJhbWV0ZXIoInRpdGxlIiwgInRpdGxlLTIiKTsKICAgICAgIGFz\nc2VydEZhbHNlKHEyLmdldFJlc3VsdExpc3QoKS5pc0VtcHR5KCkpOwogICAg\nfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0UmVwZWF0ZWRQYXJhbWV0ZXJJ\nblN1YnF1ZXJ5SW5EaWZmZXJlbnRPcmRlcigpIHsKICAgICAgICBPcGVuSlBB\nRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7\nCiAgICAgICAgU3RyaW5nIGpwcWwgPSAgInNlbGVjdCBvIGZyb20gT3JkZXJK\nUEEgbyAiIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgIndoZXJl\nIG8uT3JkZXJJZCBpbiAoc2VsZWN0IG1heChvMS5PcmRlcklkKSBmcm9tIE9y\nZGVySlBBIG8xICIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICArICAid2hlcmUgKChvMS5DdXN0b21lcklkID0gOmN1c3RvbWVySWQpICIg\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAgImFuZCAg\nIChvMS5EaXN0cmljdElkID0gOmRpc3RyaWN0SWQpICIgCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgKyAgImFuZCAgIChvMS5XYXJlaG91\nc2VJZCA9IDp3YXJlaG91c2VJZCkpKSAiIAogICAgICAgICAgICAgICAgICAg\nICsgICJhbmQgKG8uQ3VzdG9tZXJJZCA9IDpjdXN0b21lcklkKSAiCiAgICAg\nICAgICAgICAgICAgICAgKyAgImFuZCAoby5XYXJlaG91c2VJZCA9IDp3YXJl\naG91c2VJZCkgIgogICAgICAgICAgICAgICAgICAgICsgICJhbmQgKG8uRGlz\ndHJpY3RJZCA9IDpkaXN0cmljdElkKSI7CgogICAgICAgIGVtLmdldFRyYW5z\nYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBUeXBlZFF1ZXJ5PE9yZGVySlBB\nPiBxMSA9IGVtLmNyZWF0ZVF1ZXJ5KGpwcWwsIE9yZGVySlBBLmNsYXNzKTsK\nICAgICAgICBxMS5zZXRQYXJhbWV0ZXIoImN1c3RvbWVySWQiLCAzMzkpCiAg\nICAgICAgICAuc2V0UGFyYW1ldGVyKCJkaXN0cmljdElkIiwgMykKICAgICAg\nICAgIC5zZXRQYXJhbWV0ZXIoIndhcmVob3VzZUlkIiwgMjMpOwogICAgICAg\nICAgICAgICAgICAKICAgICAgICBhc3NlcnRFcXVhbHMoSlBRTFBhcnNlci5M\nQU5HX0pQUUwsIE9wZW5KUEFQZXJzaXN0ZW5jZS5jYXN0KHExKS5nZXRMYW5n\ndWFnZSgpKTsKICAgICAgICBhc3NlcnRGYWxzZShxMS5nZXRSZXN1bHRMaXN0\nKCkuaXNFbXB0eSgpKTsKICAgICAgICAKICAgICAgICAKICAgICAgICBUeXBl\nZFF1ZXJ5PE9yZGVySlBBPiBxMiA9IGVtLmNyZWF0ZVF1ZXJ5KGpwcWwsIE9y\nZGVySlBBLmNsYXNzKTsKICAgICAgICBhc3NlcnRFcXVhbHMoUXVlcnlMYW5n\ndWFnZXMuTEFOR19QUkVQQVJFRF9TUUwsIE9wZW5KUEFQZXJzaXN0ZW5jZS5j\nYXN0KHEyKS5nZXRMYW5ndWFnZSgpKTsKICAgICAgICBxMi5zZXRQYXJhbWV0\nZXIoImN1c3RvbWVySWQiLCAyOTY3KQogICAgICAgICAgLnNldFBhcmFtZXRl\ncigiZGlzdHJpY3RJZCIsIDUpCiAgICAgICAgICAuc2V0UGFyYW1ldGVyKCJ3\nYXJlaG91c2VJZCIsIDIyKTsKICAgICAgICAKICAgICAgICBhc3NlcnRGYWxz\nZShxMi5nZXRSZXN1bHRMaXN0KCkuaXNFbXB0eSgpKTsKICAgICAgICBlbS5n\nZXRUcmFuc2FjdGlvbigpLnJvbGxiYWNrKCk7CiAgICB9CiAgICAKICAgIHB1\nYmxpYyB2b2lkIHRlc3RSZXBlYXRlZFBhcmFtZXRlckluU3VicXVlcnlJblNh\nbWVPcmRlcigpIHsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBlbSA9\nIGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgU3RyaW5nIGpw\ncWwgPSAgInNlbGVjdCBvIGZyb20gT3JkZXJKUEEgbyAiIAogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICsgIndoZXJlIG8uT3JkZXJJZCBpbiAoc2Vs\nZWN0IG1heChvMS5PcmRlcklkKSBmcm9tIE9yZGVySlBBIG8xICIKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICArICAid2hlcmUgKChvMS5DdXN0b21l\ncklkID0gOmN1c3RvbWVySWQpICIgCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgKyAgImFuZCAgIChvMS5EaXN0cmljdElkID0gOmRpc3RyaWN0SWQp\nICIgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAgImFuZCAgIChv\nMS5XYXJlaG91c2VJZCA9IDp3YXJlaG91c2VJZCkpKSAiIAogICAgICAgICAg\nICAgICAgICAgICAgICArICAiYW5kIChvLkN1c3RvbWVySWQgPSA6Y3VzdG9t\nZXJJZCkgIgogICAgICAgICAgICAgICAgICAgICAgICArICAiYW5kIChvLkRp\nc3RyaWN0SWQgPSA6ZGlzdHJpY3RJZCkgIgogICAgICAgICAgICAgICAgICAg\nICAgICArICAiYW5kIChvLldhcmVob3VzZUlkID0gOndhcmVob3VzZUlkKSI7\nCgogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAg\nICBUeXBlZFF1ZXJ5PE9yZGVySlBBPiBxMSA9IGVtLmNyZWF0ZVF1ZXJ5KGpw\ncWwsIE9yZGVySlBBLmNsYXNzKTsKICAgICAgICBxMS5zZXRQYXJhbWV0ZXIo\nImN1c3RvbWVySWQiLCAzMzkpCiAgICAgICAgICAuc2V0UGFyYW1ldGVyKCJk\naXN0cmljdElkIiwgMykKICAgICAgICAgIC5zZXRQYXJhbWV0ZXIoIndhcmVo\nb3VzZUlkIiwgMjMpOwogICAgICAgICAgICAgICAgICAKICAgICAgICBhc3Nl\ncnRFcXVhbHMoSlBRTFBhcnNlci5MQU5HX0pQUUwsIE9wZW5KUEFQZXJzaXN0\nZW5jZS5jYXN0KHExKS5nZXRMYW5ndWFnZSgpKTsKICAgICAgICBhc3NlcnRG\nYWxzZShxMS5nZXRSZXN1bHRMaXN0KCkuaXNFbXB0eSgpKTsKICAgICAgICAK\nICAgICAgICAKICAgICAgICBUeXBlZFF1ZXJ5PE9yZGVySlBBPiBxMiA9IGVt\nLmNyZWF0ZVF1ZXJ5KGpwcWwsIE9yZGVySlBBLmNsYXNzKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoUXVlcnlMYW5ndWFnZXMuTEFOR19QUkVQQVJFRF9TUUws\nIE9wZW5KUEFQZXJzaXN0ZW5jZS5jYXN0KHEyKS5nZXRMYW5ndWFnZSgpKTsK\nICAgICAgICBxMi5zZXRQYXJhbWV0ZXIoImN1c3RvbWVySWQiLCAyOTY3KQog\nICAgICAgICAgLnNldFBhcmFtZXRlcigiZGlzdHJpY3RJZCIsIDUpCiAgICAg\nICAgICAuc2V0UGFyYW1ldGVyKCJ3YXJlaG91c2VJZCIsIDIyKTsKICAgICAg\nICAKICAgICAgICBhc3NlcnRGYWxzZShxMi5nZXRSZXN1bHRMaXN0KCkuaXNF\nbXB0eSgpKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLnJvbGxiYWNr\nKCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RQYXJ0aWFsbHlS\nZXBlYXRlZFBhcmFtZXRlckluU3VicXVlcnkoKSB7CiAgICAgICAgT3BlbkpQ\nQUVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigp\nOwogICAgICAgIFN0cmluZyBqcHFsID0gICJzZWxlY3QgbyBmcm9tIE9yZGVy\nSlBBIG8gIiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICArICJ3aGVy\nZSBvLk9yZGVySWQgaW4gKHNlbGVjdCBtYXgobzEuT3JkZXJJZCkgZnJvbSBP\ncmRlckpQQSBvMSAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAg\nIndoZXJlICgobzEuQ3VzdG9tZXJJZCA9IDpjdXN0b21lcklkKSAiIAogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICsgICJhbmQgICAobzEuV2FyZWhv\ndXNlSWQgPSA6d2FyZWhvdXNlSWQpKSkgIiAKICAgICAgICAgICAgICAgICAg\nICAgICAgKyAgImFuZCAoby5DdXN0b21lcklkID0gOmN1c3RvbWVySWQpICIK\nICAgICAgICAgICAgICAgICAgICAgICAgKyAgImFuZCAoby5EaXN0cmljdElk\nID0gOmRpc3RyaWN0SWQpICIKICAgICAgICAgICAgICAgICAgICAgICAgKyAg\nImFuZCAoby5XYXJlaG91c2VJZCA9IDp3YXJlaG91c2VJZCkiOwoKICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgVHlwZWRR\ndWVyeTxPcmRlckpQQT4gcTEgPSBlbS5jcmVhdGVRdWVyeShqcHFsLCBPcmRl\nckpQQS5jbGFzcyk7CiAgICAgICAgcTEuc2V0UGFyYW1ldGVyKCJjdXN0b21l\ncklkIiwgMzM5KQogICAgICAgICAgLnNldFBhcmFtZXRlcigiZGlzdHJpY3RJ\nZCIsIDMpCiAgICAgICAgICAuc2V0UGFyYW1ldGVyKCJ3YXJlaG91c2VJZCIs\nIDIzKTsKICAgICAgICAgICAgICAgICAgCiAgICAgICAgYXNzZXJ0RXF1YWxz\nKEpQUUxQYXJzZXIuTEFOR19KUFFMLCBPcGVuSlBBUGVyc2lzdGVuY2UuY2Fz\ndChxMSkuZ2V0TGFuZ3VhZ2UoKSk7CiAgICAgICAgYXNzZXJ0RmFsc2UocTEu\nZ2V0UmVzdWx0TGlzdCgpLmlzRW1wdHkoKSk7CiAgICAgICAgCiAgICAgICAg\nCiAgICAgICAgVHlwZWRRdWVyeTxPcmRlckpQQT4gcTIgPSBlbS5jcmVhdGVR\ndWVyeShqcHFsLCBPcmRlckpQQS5jbGFzcyk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKFF1ZXJ5TGFuZ3VhZ2VzLkxBTkdfUFJFUEFSRURfU1FMLCBPcGVuSlBB\nUGVyc2lzdGVuY2UuY2FzdChxMikuZ2V0TGFuZ3VhZ2UoKSk7CiAgICAgICAg\ncTIuc2V0UGFyYW1ldGVyKCJjdXN0b21lcklkIiwgMjk2NykKICAgICAgICAg\nIC5zZXRQYXJhbWV0ZXIoImRpc3RyaWN0SWQiLCA1KQogICAgICAgICAgLnNl\ndFBhcmFtZXRlcigid2FyZWhvdXNlSWQiLCAyMik7CiAgICAgICAgCiAgICAg\nICAgYXNzZXJ0RmFsc2UocTIuZ2V0UmVzdWx0TGlzdCgpLmlzRW1wdHkoKSk7\nCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5yb2xsYmFjaygpOwogICAg\nfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0UGFydGlhbGx5UmVwZWF0ZWRQ\nYXJhbWV0ZXJJbk1haW5xdWVyeSgpIHsKICAgICAgICBPcGVuSlBBRW50aXR5\nTWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAg\nICAgU3RyaW5nIGpwcWwgPSAgInNlbGVjdCBvIGZyb20gT3JkZXJKUEEgbyAi\nIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgIndoZXJlIG8uT3Jk\nZXJJZCBpbiAoc2VsZWN0IG1heChvMS5PcmRlcklkKSBmcm9tIE9yZGVySlBB\nIG8xICIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICArICAid2hlcmUg\nKChvMS5DdXN0b21lcklkID0gOmN1c3RvbWVySWQpICIgCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgKyAgImFuZCAgIChvMS5EaXN0cmljdElkID0g\nOmRpc3RyaWN0SWQpICIgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nKyAgImFuZCAgIChvMS5XYXJlaG91c2VJZCA9IDp3YXJlaG91c2VJZCkpKSAi\nIAogICAgICAgICAgICAgICAgICAgICAgICArICAiYW5kIChvLkN1c3RvbWVy\nSWQgPSA6Y3VzdG9tZXJJZCkgIgogICAgICAgICAgICAgICAgICAgICAgICAr\nICAiYW5kIChvLldhcmVob3VzZUlkID0gOndhcmVob3VzZUlkKSI7CgogICAg\nICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBUeXBl\nZFF1ZXJ5PE9yZGVySlBBPiBxMSA9IGVtLmNyZWF0ZVF1ZXJ5KGpwcWwsIE9y\nZGVySlBBLmNsYXNzKTsKICAgICAgICBxMS5zZXRQYXJhbWV0ZXIoImN1c3Rv\nbWVySWQiLCAzMzkpCiAgICAgICAgICAuc2V0UGFyYW1ldGVyKCJkaXN0cmlj\ndElkIiwgMykKICAgICAgICAgIC5zZXRQYXJhbWV0ZXIoIndhcmVob3VzZUlk\nIiwgMjMpOwogICAgICAgICAgICAgICAgICAKICAgICAgICBhc3NlcnRFcXVh\nbHMoSlBRTFBhcnNlci5MQU5HX0pQUUwsIE9wZW5KUEFQZXJzaXN0ZW5jZS5j\nYXN0KHExKS5nZXRMYW5ndWFnZSgpKTsKICAgICAgICBhc3NlcnRGYWxzZShx\nMS5nZXRSZXN1bHRMaXN0KCkuaXNFbXB0eSgpKTsKICAgICAgICAKICAgICAg\nICAKICAgICAgICBUeXBlZFF1ZXJ5PE9yZGVySlBBPiBxMiA9IGVtLmNyZWF0\nZVF1ZXJ5KGpwcWwsIE9yZGVySlBBLmNsYXNzKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoUXVlcnlMYW5ndWFnZXMuTEFOR19QUkVQQVJFRF9TUUwsIE9wZW5K\nUEFQZXJzaXN0ZW5jZS5jYXN0KHEyKS5nZXRMYW5ndWFnZSgpKTsKICAgICAg\nICBxMi5zZXRQYXJhbWV0ZXIoImN1c3RvbWVySWQiLCAyOTY3KQogICAgICAg\nICAgLnNldFBhcmFtZXRlcigiZGlzdHJpY3RJZCIsIDUpCiAgICAgICAgICAu\nc2V0UGFyYW1ldGVyKCJ3YXJlaG91c2VJZCIsIDIyKTsKICAgICAgICAKICAg\nICAgICBhc3NlcnRGYWxzZShxMi5nZXRSZXN1bHRMaXN0KCkuaXNFbXB0eSgp\nKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLnJvbGxiYWNrKCk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgdGVzdFJhbmdlSXNFeGNsdWRlZCgpIHsK\nICAgICAgICBMaXN0PENvbXBhbnk+IGwgPSBudWxsOwoKICAgICAgICBsID0g\nZ2V0QWxsQ29tcGFuaWVzUGFnZWQoMCwgMSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDEsIGwuc2l6ZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMTkwMCwg\nbC5nZXQoMCkuZ2V0U3RhcnRZZWFyKCkpOwogICAgICAgIAogICAgICAgIGwg\nPSBnZXRBbGxDb21wYW5pZXNQYWdlZCgxLCAxKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoMSwgbC5zaXplKCkpOwogICAgICAgIGFzc2VydEVxdWFscygyMDAw\nLCBsLmdldCgwKS5nZXRTdGFydFllYXIoKSk7CiAgICAgICAgCiAgICAgICAg\nbCA9IGdldEFsbENvbXBhbmllc1BhZ2VkKDIsIDEpOwogICAgICAgIGFzc2Vy\ndEVxdWFscygxLCBsLnNpemUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDIw\nMTAsIGwuZ2V0KDApLmdldFN0YXJ0WWVhcigpKTsKICAgIH0KCiAgICBwdWJs\naWMgTGlzdDxDb21wYW55PiBnZXRBbGxDb21wYW5pZXNQYWdlZChpbnQgc3Rh\ncnQsIGludCBtYXgpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1m\nLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBRdWVyeSBxID0gZW0u\nY3JlYXRlUXVlcnkoInNlbGVjdCBwIGZyb20gQ29tcGFueSBwIG9yZGVyIGJ5\nIHAuc3RhcnRZZWFyIik7CiAgICAgICAgcS5zZXRGaXJzdFJlc3VsdChzdGFy\ndCk7CiAgICAgICAgcS5zZXRNYXhSZXN1bHRzKG1heCk7CiAgICAgICAgcmV0\ndXJuIChMaXN0PENvbXBhbnk+KSBxLmdldFJlc3VsdExpc3QoKTsKICAgIH0K\nICAgIAogICAgUHJlcGFyZWRRdWVyeUNhY2hlIGdldFByZXBhcmVkUXVlcnlD\nYWNoZSgpIHsKICAgICAgICByZXR1cm4gZW1mLmdldENvbmZpZ3VyYXRpb24o\nKS5nZXRRdWVyeVNRTENhY2hlSW5zdGFuY2UoKTsKICAgIH0KICAgIAogICAg\nLyoqCiAgICAgKiBDb21wYXJlIHRoZSByZXN1bHQgb2YgZXhlY3V0aW9uIG9m\nIHRoZSBub24tcGFyYW1ldGVyaXplZCBxdWVyeSB3aXRoIGFuZCB3aXRob3V0\nIFByZXBhcmVkUXVlcnkgY2FjaGUuCiAgICAgKiAKICAgICAqIEBwYXJhbSBq\ncHFsIGEgU3RyaW5nIHJlcHJlc2VudGluZyBlaXRoZXIgYSBKUFFMIG9yIHRo\nZSBuYW1lIG9mIGEgTmFtZWRRdWVyeQogICAgICogQHBhcmFtIGlzTmFtZWRR\ndWVyeSBmbGFncyBpZiB0aGUgZmlyc3QgaW5wdXQgcmVwcmVzZW50cyBhIEpQ\nUUwgc3RyaW5nIG9yIGEgTmFtZWRRdWVyeSBuYW1lCiAgICAgKi8KICAgIHZv\naWQgY29tcGFyZShTdHJpbmcganBxbCwgYm9vbGVhbiBpc05hbWVkKSB7CiAg\nICAgICAgY29tcGFyZShqcHFsLCBpc05hbWVkLCAtMSwgTk9fUEFSQU1TKTsK\nICAgIH0KCiAgICAKICAgIC8qKgogICAgICogQ29tcGFyZSB0aGUgcmVzdWx0\nIG9mIGV4ZWN1dGlvbiBvZiB0aGUgbm9uLXBhcmFtZXRlcml6ZWQgcXVlcnkg\nd2l0aCBhbmQgd2l0aG91dCBQcmVwYXJlZFF1ZXJ5IGNhY2hlLgogICAgICog\nCiAgICAgKiBAcGFyYW0ganBxbCBhIFN0cmluZyByZXByZXNlbnRpbmcgZWl0\naGVyIGEgSlBRTCBvciB0aGUgbmFtZSBvZiBhIE5hbWVkUXVlcnkKICAgICAq\nIEBwYXJhbSBpc05hbWVkUXVlcnkgZmxhZ3MgaWYgdGhlIGZpcnN0IGlucHV0\nIHJlcHJlc2VudHMgYSBKUFFMIHN0cmluZyBvciBhIE5hbWVkUXVlcnkgbmFt\nZQogICAgICogQHBhcmFtIGV4cGVjdGVkQ291bnQgZXhwZWN0ZWQgbnVtYmVy\nIG9mIHJlc3VsdHMKICAgICAqLwogICAgdm9pZCBjb21wYXJlKFN0cmluZyBq\ncHFsLCBib29sZWFuIGlzTmFtZWQsIGludCBleHBlY3RlZENvdW50KSB7CiAg\nICAgICAgY29tcGFyZShqcHFsLCBpc05hbWVkLCBleHBlY3RlZENvdW50LCBO\nT19QQVJBTVMpOwogICAgfQogICAgCiAgICAvKioKICAgICAqIENvbXBhcmUg\ndGhlIHJlc3VsdCBvZiBleGVjdXRpb24gb2YgdGhlIHF1ZXJ5IHdpdGggYW5k\nIHdpdGhvdXQgUHJlcGFyZWRRdWVyeSBjYWNoZS4KICAgICAqIAogICAgICog\nCiAgICAgKiBAcGFyYW0ganBxbCBhIFN0cmluZyByZXByZXNlbnRpbmcgZWl0\naGVyIGEgSlBRTCBvciB0aGUgbmFtZSBvZiBhIE5hbWVkUXVlcnkKICAgICAq\nIEBwYXJhbSBpc05hbWVkUXVlcnkgZmxhZ3MgaWYgdGhlIGZpcnN0IGlucHV0\nIHJlcHJlc2VudHMgYSBKUFFMIHN0cmluZyBvciBhIE5hbWVkUXVlcnkgbmFt\nZQogICAgICogQHBhcmFtIHBhcmFtcyBhIGV2ZW4gc2l6ZWQgYXJyYXkgd2hv\nc2UgZXZlbi1pbmRleGVkIGVsZW1lbnRzIGFyZSBrZXlzIGFuZCBvZGQtaW5k\nZXhlZCBlbGVtZW50cyBhcmUgY29ycmVzcG9uZGluZwogICAgICogcGFyYW1l\ndGVyIHZhbHVlIGZvciB0aGUgcXVlcnkuIEEgbnVsbCBhcnJheSBkZW5vdGVz\nIHRoZSBxdWVyeSBpcyBub3QgcGFyYW1ldGVyaXplZC4KICAgICAqLwogICAg\ndm9pZCBjb21wYXJlKFN0cmluZyBqcHFsLCBib29sZWFuIGlzTmFtZWQsIE9i\namVjdC4uLiBwYXJhbXMpIHsKICAgICAgICBjb21wYXJlKGpwcWwsIGlzTmFt\nZWQsIC0xLCBwYXJhbXMpOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wYXJl\nIHRoZSByZXN1bHQgb2YgZXhlY3V0aW9uIG9mIHRoZSBxdWVyeSB3aXRoIGFu\nZCB3aXRob3V0IFByZXBhcmVkUXVlcnkgY2FjaGUuCiAgICAgKiAKICAgICAq\nIAogICAgICogQHBhcmFtIGpwcWwgYSBTdHJpbmcgcmVwcmVzZW50aW5nIGVp\ndGhlciBhIEpQUUwgb3IgdGhlIG5hbWUgb2YgYSBOYW1lZFF1ZXJ5CiAgICAg\nKiBAcGFyYW0gaXNOYW1lZFF1ZXJ5IGZsYWdzIGlmIHRoZSBmaXJzdCBpbnB1\ndCByZXByZXNlbnRzIGEgSlBRTCBzdHJpbmcgb3IgYSBOYW1lZFF1ZXJ5IG5h\nbWUKICAgICAqIEBwYXJhbSBwYXJhbXMgYSBldmVuIHNpemVkIGFycmF5IHdo\nb3NlIGV2ZW4taW5kZXhlZCBlbGVtZW50cyBhcmUga2V5cyBhbmQgb2RkLWlu\nZGV4ZWQgZWxlbWVudHMgYXJlIGNvcnJlc3BvbmRpbmcKICAgICAqIHBhcmFt\nZXRlciB2YWx1ZSBmb3IgdGhlIHF1ZXJ5LiBBIG51bGwgYXJyYXkgZGVub3Rl\ncyB0aGUgcXVlcnkgaXMgbm90IHBhcmFtZXRlcml6ZWQuCiAgICAgKiBAcGFy\nYW0gZXhwZWN0ZWRDb3VudCBleHBlY3RlZCBudW1iZXIgb2YgcmVzdWx0cy4g\nU3VwcGx5IGEgbmVnYXRpdmUgbnVtYmVyIHRvIGlnbm9yZS4KICAgICAqLwog\nICAgdm9pZCBjb21wYXJlKFN0cmluZyBxdWVyeSwgYm9vbGVhbiBpc05hbWVk\nLCBpbnQgZXhwZWN0ZWRDb3VudCwgT2JqZWN0Li4uIHBhcmFtcykgewogICAg\nICAgIHJ1bihxdWVyeSwgaXNOYW1lZCwgcGFyYW1zLCBleHBlY3RlZENvdW50\nLCAhVVNFX0NBQ0hFLCAxKTsgLy8gcnVuIHRoZSBxdWVyeSBvbmNlIGZvciB3\nYXJtaW5nIHVwCiAgICAgICAgCiAgICAgICAgLy8gcnVuIE4gdGltZXMgd2l0\naG91dCBjYWNoZQogICAgICAgIGF1ZGl0b3IuY2xlYXIoKTsKICAgICAgICBs\nb25nIHdpdGhvdXQgPSBydW4ocXVlcnksIGlzTmFtZWQsIHBhcmFtcywgZXhw\nZWN0ZWRDb3VudCwgIVVTRV9DQUNIRSwgU0FNUExFX1NJWkUpOwogICAgICAg\nIExpc3Q8U3RyaW5nPiBvcmlnaW5hbFNRTHMgPSBhdWRpdG9yLmdldFNRTHMo\nKTsKICAgICAgICAKICAgICAgICAvLyBydW4gTiB0aW1lcyB3aXRoIGNhY2hl\nCiAgICAgICAgYXVkaXRvci5jbGVhcigpOwogICAgICAgIGxvbmcgd2l0aCA9\nIHJ1bihxdWVyeSwgaXNOYW1lZCwgcGFyYW1zLCBleHBlY3RlZENvdW50LCBV\nU0VfQ0FDSEUsIFNBTVBMRV9TSVpFKTsKICAgICAgICBMaXN0PFN0cmluZz4g\nY2FjaGVkU1FMcyA9IGF1ZGl0b3IuZ2V0U1FMcygpOwogICAgICAgIAogICAg\nICAgIGNvbXBhcmVTUUxzKG9yaWdpbmFsU1FMcywgY2FjaGVkU1FMcyk7CiAg\nICAgICAgbG9uZyBkZWx0YSA9ICh3aXRob3V0ID09IDApID8gMCA6ICh3aXRo\nb3V0IC0gd2l0aCkgKiAxMDAgLyB3aXRob3V0OwogICAgICAgIAogICAgICAg\nIFN0cmluZyBqcHFsID0gZ2V0SlBRTFN0cmluZyhxdWVyeSwgaXNOYW1lZCk7\nCiAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKChkZWx0YSA8IDAgPyAiKioq\nV0FSTiAiIDogIiIpICsgTWF0aC5hYnMoZGVsdGEpICsgIiUgIiArIAogICAg\nICAgICAgICAgICAgKGRlbHRhIDwgMCA/ICJkZWdyYWR0aW9uIiA6ICJpbXBy\nb3ZlbWVudCIpICsgIiBmb3IgWyIrIGpwcWwgKyAiXSIpOwogICAgICAgIGFz\nc2VydFRydWUoTWF0aC5hYnMoZGVsdGEpICsgIiUgZGVncmFkdGlvbiBmb3Ig\nWyIrIGpwcWwgKyAiXSIsICFGQUlMX0lGX1BFUkZfREVHUkFERSB8fCBkZWx0\nYSA+IDApOwogICAgfQogICAgCiAgICB2b2lkIGNvbXBhcmVTUUxzKExpc3Q8\nU3RyaW5nPiBhLCBMaXN0PFN0cmluZz4gYikgewogICAgICAgIGFzc2VydEVx\ndWFscyhhLnNpemUoKSwgYi5zaXplKCkpOwogICAgICAgIGZvciAoaW50IGkg\nPSAwOyBpIDwgYS5zaXplKCk7IGkrKykgewogICAgICAgICAgICBhc3NlcnRF\ncXVhbHMoYS5nZXQoaSksIGIuZ2V0KGkpKTsKICAgICAgICB9CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBDcmVhdGUgYSBxdWVyeSBmcm9tIHRoZSBnaXZlbiBz\ndHJpbmcgYW5kIGV4ZWN1dGUgaXQgZm9yIGdpdmVuIG51bWJlciBvZiB0aW1l\ncy4KICAgICAqIAogICAgICogQHBhcmFtIGpwcWwgYSBTdHJpbmcgcmVwcmVz\nZW50aW5nIGVpdGhlciBhIEpQUUwgb3IgdGhlIG5hbWUgb2YgYSBOYW1lZFF1\nZXJ5CiAgICAgKiBAcGFyYW0gaXNOYW1lZFF1ZXJ5IGZsYWdzIGlmIHRoZSBm\naXJzdCBpbnB1dCByZXByZXNlbnRzIGEgSlBRTCBzdHJpbmcgb3IgYSBOYW1l\nZFF1ZXJ5IG5hbWUKICAgICAqIEBwYXJhbSBwYXJhbXMgYSBldmVuIHNpemVk\nIGFycmF5IHdob3NlIGV2ZW4taW5kZXhlZCBlbGVtZW50cyBhcmUga2V5cyBh\nbmQgb2RkLWluZGV4ZWQgZWxlbWVudHMgYXJlIGNvcnJlc3BvbmRpbmcKICAg\nICAqIHBhcmFtZXRlciB2YWx1ZSBmb3IgdGhlIHF1ZXJ5LiBBIG51bGwgYXJy\nYXkgZGVub3RlcyB0aGUgcXVlcnkgaXMgbm90IHBhcmFtZXRlcml6ZWQuCiAg\nICAgKiBAcGFyYW0gZXhwZWN0ZWRDb3VudCBleHBlY3RlZCBudW1iZXIgb2Yg\ncmVzdWx0cy4gU3VwcGx5IGEgbmVnYXRpdmUgbnVtYmVyIHRvIGlnbm9yZS4K\nICAgICAqIEBwYXJhbSB1c2VDYWNoZSBmbGFncyBpZiB0aGUgUHJlcGFyZWRR\ndWVyeSBjYWNoZSBpcyB0byBiZSBhY3RpdmF0ZWQuCiAgICAgKiBAcGFyYW0g\nTiBudW1iZXIgb2YgdGltZXMgdGhlIHF1ZXJ5IGlzIHRvIGJlIGV4ZWN1dGVk\nIHRvIGNhbGN1bGF0ZSByZWFzb25hYmxlIHN0YXRpc3RpY3MuCiAgICAgKiAK\nICAgICAqIEByZXR1cm4gbWVkaWFuIHRpbWUgdG8gZXhlY3V0ZSBhIHF1ZXJ5\nIGFuZCBpdGVyYXRlIHRocm91Z2ggaXRzIHJlc3VsdHMgCiAgICAgKi8KICAg\nIGxvbmcgcnVuKFN0cmluZyBqcHFsLCBib29sZWFuIGlzTmFtZWRRdWVyeSwg\nT2JqZWN0W10gcGFyYW1zLCBpbnQgZXhwZWN0ZWRDb3VudCwgYm9vbGVhbiB1\nc2VDYWNoZSwgaW50IE4pIHsKICAgICAgICBMaXN0PExvbmc+IHN0YXRzID0g\nbmV3IEFycmF5TGlzdDxMb25nPigpOwogICAgICAgIFN0cmluZyBjYWNoZUtl\neSA9IGdldEpQUUxTdHJpbmcoanBxbCwgaXNOYW1lZFF1ZXJ5KTsKICAgICAg\nICBRdWVyeVN0YXRpc3RpY3M8U3RyaW5nPiBjYWNoZVN0YXRzID0gZ2V0UHJl\ncGFyZWRRdWVyeUNhY2hlKCkuZ2V0U3RhdGlzdGljcygpOwogICAgICAgIGdl\ndFByZXBhcmVkUXVlcnlDYWNoZSgpLmNsZWFyKCk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKDAsIGNhY2hlU3RhdHMuZ2V0RXhlY3V0aW9uQ291bnQoY2FjaGVL\nZXkpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMCwgY2FjaGVTdGF0cy5nZXRI\naXRDb3VudChjYWNoZUtleSkpOwogICAgICAgIAogICAgICAgIGZvciAoaW50\nIGkgPSAwOyBpIDwgTjsgaSsrKSB7CiAgICAgICAgICAgIE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyU1BJIGVtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyU1BJKWVt\nZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgICAgIGVtLnNldFF1\nZXJ5U1FMQ2FjaGUodXNlQ2FjaGUpOwogICAgICAgICAgICBhc3NlcnRFcXVh\nbHModXNlQ2FjaGUsIGVtLmdldFF1ZXJ5U1FMQ2FjaGUoKSk7CiAgICAgICAg\nICAgIAogICAgICAgICAgICAvLyBtZWFzdXJlIHRpbWUgCiAgICAgICAgICAg\nIGxvbmcgc3RhcnQgPSBTeXN0ZW0ubmFub1RpbWUoKTsKICAgICAgICAgICAg\nT3BlbkpQQVF1ZXJ5PD8+IHEgPSBpc05hbWVkUXVlcnkgPyBlbS5jcmVhdGVO\nYW1lZFF1ZXJ5KGpwcWwpIDogZW0uY3JlYXRlUXVlcnkoanBxbCk7CiAgICAg\nICAgICAgIHBhcmFtZXRlcml6ZShxLCBwYXJhbXMpOwogICAgICAgICAgICBM\naXN0PD8+IGxpc3QgPSBxLmdldFJlc3VsdExpc3QoKTsKICAgICAgICAgICAg\naWYgKGV4cGVjdGVkQ291bnQgPj0gMCkKICAgICAgICAgICAgICAgIGFzc2Vy\ndEVxdWFscyhleHBlY3RlZENvdW50LCBsaXN0LnNpemUoKSk7CiAgICAgICAg\nICAgIGVsc2UKICAgICAgICAgICAgICAgIGFzc2VydEZhbHNlKGxpc3QuaXNF\nbXB0eSgpKTsKICAgICAgICAgICAgaXRlcmF0ZShsaXN0KTsKICAgICAgICAg\nICAgbG9uZyBlbmQgPSBTeXN0ZW0ubmFub1RpbWUoKTsgICAKICAgICAgICAg\nICAgCiAgICAgICAgICAgIGFzc2VydEVxdWFscyh1c2VDYWNoZSA/IGkrMSA6\nIDAsIGNhY2hlU3RhdHMuZ2V0RXhlY3V0aW9uQ291bnQoY2FjaGVLZXkpKTsK\nICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKHVzZUNhY2hlID8gaSA6IDAsICAg\nY2FjaGVTdGF0cy5nZXRIaXRDb3VudChjYWNoZUtleSkpOwogICAgICAgICAg\nICAKICAgICAgICAgICAgcS5jbG9zZUFsbCgpOwogICAgICAgICAgICBzdGF0\ncy5hZGQoZW5kIC0gc3RhcnQpOwogICAgICAgICAgICBlbS5jbG9zZSgpOwog\nICAgICAgIH0KICAgICAgICBhc3NlcnRFcXVhbHMoIkV4ZWN1dGlvbiBDb3Vu\ndCBbIiArIGNhY2hlS2V5ICsgIl0iLCB1c2VDYWNoZSA/IE4gOiAwLCBjYWNo\nZVN0YXRzLmdldFRvdGFsRXhlY3V0aW9uQ291bnQoKSk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKCJIaXQgQ291bnQgWyIgKyBjYWNoZUtleSArICJdIiwgdXNl\nQ2FjaGUgPyBOLTEgOiAwLCBjYWNoZVN0YXRzLmdldFRvdGFsSGl0Q291bnQo\nKSk7CiAgICAgICAgCiAgICAgICAgQ29sbGVjdGlvbnMuc29ydChzdGF0cyk7\nCiAgICAgICAgcmV0dXJuIHN0YXRzLmdldChOLzIpOwogICAgfSAgIAogICAg\nCiAgICAKICAgIHZvaWQgcGFyYW1ldGVyaXplKFF1ZXJ5IHEsIE9iamVjdFtd\nIHBhcmFtcykgewogICAgICAgIGlmIChwYXJhbXMgPT0gbnVsbCkKICAgICAg\nICAgICAgcmV0dXJuOwogICAgICAgIGZvciAoaW50IGogPSAwOyBwYXJhbXMg\nIT0gbnVsbCAmJiBqIDwgcGFyYW1zLmxlbmd0aCAtIDE7IGogKz0gMikgewog\nICAgICAgICAgICBPYmplY3Qga2V5ID0gcGFyYW1zW2pdOwogICAgICAgICAg\nICBPYmplY3QgdmFsID0gcGFyYW1zW2ogKyAxXTsKICAgICAgICAgICAgaWYg\nKGtleSBpbnN0YW5jZW9mIEludGVnZXIpCiAgICAgICAgICAgICAgICBxLnNl\ndFBhcmFtZXRlcigoKE51bWJlcilrZXkpLmludFZhbHVlKCksIHZhbCk7IAog\nICAgICAgICAgICBlbHNlIGlmIChrZXkgaW5zdGFuY2VvZiBTdHJpbmcpCiAg\nICAgICAgICAgICAgICBxLnNldFBhcmFtZXRlcihrZXkudG9TdHJpbmcoKSwg\ndmFsKTsgCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGZhaWwo\nImtleSAiICsga2V5ICsgIiBpcyBuZWl0aGVyIE51bWJlciBub3IgU3RyaW5n\nIik7CiAgICAgICAgfQogICAgfQogICAgCiAgICB2b2lkIGl0ZXJhdGUoTGlz\ndDw/PiBsaXN0KSB7CiAgICAgICAgSXRlcmF0b3I8Pz4gaSA9IGxpc3QuaXRl\ncmF0b3IoKTsKICAgICAgICB3aGlsZSAoaS5oYXNOZXh0KCkpCiAgICAgICAg\nICAgIGkubmV4dCgpOwogICAgfQogICAgCiAgICAvKioKICAgICAqIEdldHMg\ndGhlIEpQUUwgU3RyaW5nIG9mIGEgTmFtZWRRdWVyeSBvZiB0aGUgZ2l2ZW4g\nbmFtZS4KICAgICAqLwogICAgU3RyaW5nIGdldEpQUUxTdHJpbmcoU3RyaW5n\nIG5hbWUsIGJvb2xlYW4gaXNOYW1lZFF1ZXJ5KSB7CiAgICAgICAgaWYgKCFp\nc05hbWVkUXVlcnkpCiAgICAgICAgICAgIHJldHVybiBuYW1lOwogICAgICAg\nIHJldHVybiBlbWYuZ2V0Q29uZmlndXJhdGlvbigpCiAgICAgICAgICAgICAg\nICAgIC5nZXRNZXRhRGF0YVJlcG9zaXRvcnlJbnN0YW5jZSgpCiAgICAgICAg\nICAgICAgICAgIC5nZXRRdWVyeU1ldGFEYXRhKG51bGwsIG5hbWUsIG51bGws\nIHRydWUpCiAgICAgICAgICAgICAgICAgIC5nZXRRdWVyeVN0cmluZygpOwog\nICAgfQoKCiAgICAvKioKICAgICAqIEEgSkRCQyBMaXN0ZW5lciB0byBhdWRp\ndCB0YXJnZXQgU1FMIGV4ZWN1dGVkIHBlciBKUFFMIHF1ZXJ5LgogICAgICoK\nICAgICAqLwogICAgcHVibGljIGNsYXNzIFNRTEF1ZGl0b3IgZXh0ZW5kcyBB\nYnN0cmFjdEpEQkNMaXN0ZW5lciB7CiAgICAgICAgcHJpdmF0ZSBMaXN0PFN0\ncmluZz4gc3FscyA9IG5ldyBBcnJheUxpc3Q8U3RyaW5nPigpOwogICAgCiAg\nICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHVibGljIHZvaWQgYmVmb3JlRXhl\nY3V0ZVN0YXRlbWVudChKREJDRXZlbnQgZXZlbnQpIHsKICAgICAgICAgICAg\naWYgKGV2ZW50LmdldFNRTCgpICE9IG51bGwgJiYgc3FscyAhPSBudWxsKSB7\nCiAgICAgICAgICAgICAgIHNxbHMuYWRkKGV2ZW50LmdldFNRTCgpKTsKICAg\nICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICB2b2lkIGNs\nZWFyKCkgewogICAgICAgICAgICBzcWxzLmNsZWFyKCk7CiAgICAgICAgfQog\nICAgICAgIAogICAgICAgIExpc3Q8U3RyaW5nPiBnZXRTUUxzKCkgewogICAg\nICAgICAgICByZXR1cm4gbmV3IEFycmF5TGlzdDxTdHJpbmc+KHNxbHMpOwog\nICAgICAgIH0KICAgIH0KICAgIAogICAgcHVibGljIHN0YXRpYyBjbGFzcyBR\ndWVyeVRocmVhZCBpbXBsZW1lbnRzIFJ1bm5hYmxlIHsKICAgICAgICBwcml2\nYXRlIGZpbmFsIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVtOwogICAgICAgIHBy\naXZhdGUgZmluYWwgU3RyaW5nIGpwcWw7CiAgICAgICAgcHJpdmF0ZSBib29s\nZWFuIGZhaWxlZCA9IGZhbHNlOwogICAgICAgIHB1YmxpYyBRdWVyeVRocmVh\nZChPcGVuSlBBRW50aXR5TWFuYWdlciBlbSwgU3RyaW5nIGpwcWwpIHsKICAg\nICAgICAgICAgc3VwZXIoKTsKICAgICAgICAgICAgdGhpcy5lbSA9IGVtOwog\nICAgICAgICAgICB0aGlzLmpwcWwgPSBqcHFsOwogICAgICAgIH0KICAgICAg\nICAKICAgICAgICBwdWJsaWMgdm9pZCBydW4oKSB7CiAgICAgICAgICAgIHRy\neSB7CiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IDEwICYm\nICFmYWlsZWQ7IGkrKykgewogICAgICAgICAgICAgICAgICAgIE9wZW5KUEFR\ndWVyeSBxID0gZW0uY3JlYXRlUXVlcnkoanBxbCk7CiAgICAgICAgICAgICAg\nICAgICAgcS5zZXRQYXJhbWV0ZXIoIm5hbWUiLCAiQXV0aG9yLSIraSk7CiAg\nICAgICAgICAgICAgICAgICAgcS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAg\nICAgICAgICAgICAgaWYgKGkgPiAxKSAKICAgICAgICAgICAgICAgICAgICAg\nICAgYXNzZXJ0RXF1YWxzKFF1ZXJ5TGFuZ3VhZ2VzLkxBTkdfUFJFUEFSRURf\nU1FMLCBxLmdldExhbmd1YWdlKCkpOwogICAgICAgICAgICAgICAgfQogICAg\nICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICAg\nICAgZS5wcmludFN0YWNrVHJhY2UoKTsKICAgICAgICAgICAgICAgIGZhaWxl\nZCA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAg\nICAgICAgcHVibGljIGJvb2xlYW4gaXNGYWlsZWQoKSB7CiAgICAgICAgICAg\nIHJldHVybiBmYWlsZWQ7CiAgICAgICAgfQogICAgICAgIAogICAgfQoKfQo=\n","encoding":"base64"}

