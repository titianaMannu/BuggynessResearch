{"sha":"667c8f22d83c2a388ec0a58a8b5440a18926b020","node_id":"MDQ6QmxvYjIwNjM2NDo2NjdjOGYyMmQ4M2MyYTM4OGVjMGE1OGE4YjU0NDBhMTg5MjZiMDIw","size":20582,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/667c8f22d83c2a388ec0a58a8b5440a18926b020","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwoKcGFj\na2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UubWV0YTsKCmlt\ncG9ydCBqYXZhLmxhbmcucmVmbGVjdC5GaWVsZDsKaW1wb3J0IGphdmEubGFu\nZy5yZWZsZWN0Lkludm9jYXRpb25UYXJnZXRFeGNlcHRpb247CmltcG9ydCBq\nYXZhLmxhbmcucmVmbGVjdC5NZXRob2Q7CmltcG9ydCBqYXZhLmxhbmcucmVm\nbGVjdC5Nb2RpZmllcjsKCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5tZXRh\nbW9kZWwuQXR0cmlidXRlOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UubWV0\nYW1vZGVsLkNvbGxlY3Rpb25BdHRyaWJ1dGU7CmltcG9ydCBqYXZheC5wZXJz\naXN0ZW5jZS5tZXRhbW9kZWwuRW50aXR5VHlwZTsKaW1wb3J0IGphdmF4LnBl\ncnNpc3RlbmNlLm1ldGFtb2RlbC5JZGVudGlmaWFibGVUeXBlOwppbXBvcnQg\namF2YXgucGVyc2lzdGVuY2UubWV0YW1vZGVsLkxpc3RBdHRyaWJ1dGU7Cmlt\ncG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5tZXRhbW9kZWwuTWFuYWdlZFR5cGU7\nCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5tZXRhbW9kZWwuU2V0QXR0cmli\ndXRlOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UubWV0YW1vZGVsLlNpbmd1\nbGFyQXR0cmlidXRlOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UubWV0YW1v\nZGVsLkF0dHJpYnV0ZS5QZXJzaXN0ZW50QXR0cmlidXRlVHlwZTsKaW1wb3J0\nIGphdmF4LnBlcnNpc3RlbmNlLm1ldGFtb2RlbC5CaW5kYWJsZS5CaW5kYWJs\nZVR5cGU7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5tZXRhbW9kZWwuUGx1\ncmFsQXR0cmlidXRlLkNvbGxlY3Rpb25UeXBlOwppbXBvcnQgamF2YXgucGVy\nc2lzdGVuY2UubWV0YW1vZGVsLlR5cGUuUGVyc2lzdGVuY2VUeXBlOwoKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkNsYXNzTWV0YURhdGE7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZW1iZWQuQWRk\ncmVzczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5l\nbWJlZC5HZW9jb2RlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNp\nc3RlbmNlLmVuaGFuY2UuaWRlbnRpdHkuQm9vazsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5lbmhhbmNlLmlkZW50aXR5LkJvb2tJ\nZDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5lbmhh\nbmNlLmlkZW50aXR5LkxpYnJhcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEucGVyc2lzdGVuY2UuZW5oYW5jZS5pZGVudGl0eS5QYWdlOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnJlbGF0aW9ucy5PbmVP\nbmVDaGlsZDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5j\nZS5yZWxhdGlvbnMuT25lT25lUGFyZW50OwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnBlcnNpc3RlbmNlLnRlc3QuU2luZ2xlRU1GVGVzdENhc2U7Cgov\nKioKICogVGVzdHMgSlBBIDIuMCBNZXRhbW9kZWwuCiAqIAogKiBAYXV0aG9y\nIFBpbmFraSBQb2RkYXIKICoKICovCnB1YmxpYyBjbGFzcyBUZXN0TWV0YW1v\nZGVsIGV4dGVuZHMgU2luZ2xlRU1GVGVzdENhc2UgewogICAgcHJpdmF0ZSBz\ndGF0aWMgTWV0YW1vZGVsSW1wbCBtb2RlbDsKICAgIAogICAgcHVibGljIHZv\naWQgc2V0VXAoKSB7CiAgICAgICAgaWYgKG1vZGVsID09IG51bGwpIHsKICAg\nIAlzdXBlci5zZXRVcCgKICAgIAkgICAgICAgICJvcGVuanBhLlJ1bnRpbWVV\nbmVuaGFuY2VkQ2xhc3NlcyIsICJ1bnN1cHBvcnRlZCIsCiAgICAJICAgICAg\nICAib3BlbmpwYS5EeW5hbWljRW5oYW5jZW1lbnRBZ2VudCIsICJmYWxzZSIs\nCiAgICAJCQlJbXBsaWNpdEZpZWxkQWNjZXNzTWFwcGVkU3VwZXJjbGFzcy5j\nbGFzcywKICAgIAkgICAgICAgIEltcGxpY2l0RmllbGRBY2Nlc3NCYXNlLmNs\nYXNzLCAKICAgIAkgICAgICAgIEltcGxpY2l0RmllbGRBY2Nlc3NTdWJjbGFz\ncy5jbGFzcywKICAgIAkgICAgICAgIEV4cGxpY2l0RmllbGRBY2Nlc3MuY2xh\nc3MsIAogICAgCSAgICAgICAgRXhwbGljaXRQcm9wZXJ0eUFjY2Vzcy5jbGFz\ncywKICAgIAkgICAgICAgIEVtYmVkMC5jbGFzcywgCiAgICAJICAgICAgICBF\nbWJlZDEuY2xhc3MsCiAgICAJICAgICAgICBPbmVPbmVQYXJlbnQuY2xhc3Ms\nCiAgICAJICAgICAgICBPbmVPbmVDaGlsZC5jbGFzcywKICAgIAkgICAgICAg\nIEJvb2suY2xhc3MsCiAgICAJICAgICAgICBMaWJyYXJ5LmNsYXNzLAogICAg\nCSAgICAgICAgUGFnZS5jbGFzcywKICAgIAkgICAgICAgIEFkZHJlc3MuY2xh\nc3MsCiAgICAJICAgICAgICBHZW9jb2RlLmNsYXNzKTsKICAgIAllbWYuY3Jl\nYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIG1vZGVsID0gKE1ldGFtb2Rl\nbEltcGwpZW1mLmdldE1ldGFtb2RlbCgpOwogICAgICAgIH0KICAgIH0KICAg\nIAogICAgcHVibGljIHZvaWQgdGVzdE1ldGFNb2RlbEZvckRvbWFpbkNsYXNz\nZXNFeGlzdCgpIHsKICAgICAgICBhc3NlcnRGYWxzZShtb2RlbC5nZXRFbnRp\ndGllcygpLmlzRW1wdHkoKSk7CiAgICAgICAgYXNzZXJ0RmFsc2UobW9kZWwu\nZ2V0RW1iZWRkYWJsZXMoKS5pc0VtcHR5KCkpOwogICAgICAgIGFzc2VydEZh\nbHNlKG1vZGVsLmdldE1hbmFnZWRUeXBlcygpLmlzRW1wdHkoKSk7CiAgICB9\nCiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RNZXRhQ2xhc3NGaWVsZHNBcmVQ\nb3B1bGF0ZWQoKSB7CiAgICAgICAgRW50aXR5VHlwZTxJbXBsaWNpdEZpZWxk\nQWNjZXNzU3ViY2xhc3M+IG0gPSAgbW9kZWwuZW50aXR5KEltcGxpY2l0Rmll\nbGRBY2Nlc3NTdWJjbGFzcy5jbGFzcyk7CiAgICAgICAgYXNzZXJ0Tm90TnVs\nbChtKTsKICAgICAgICBDbGFzczw/PiBtQ2xzID0gbS5nZXRKYXZhVHlwZSgp\nOwogICAgICAgIGFzc2VydFNhbWUoSW1wbGljaXRGaWVsZEFjY2Vzc1N1YmNs\nYXNzLmNsYXNzLCBtQ2xzKTsKICAgICAgICAKICAgICAgICBDbGFzczw/PiBt\nMkNscyA9IG1vZGVsLmdldFJlcG9zaXRvcnkoKS5nZXRNZXRhTW9kZWwobUNs\ncywgdHJ1ZSk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChtMkNscyk7CiAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgRmllbGQgZjIgPSBnZXRTdGF0aWNGaWVs\nZChtMkNscywgImJhc2UiKTsKICAgICAgICAgICAgYXNzZXJ0Tm90TnVsbChm\nMik7CiAgICAgICAgICAgIE9iamVjdCB2YWx1ZSA9IGYyLmdldChudWxsKTsK\nICAgICAgICAgICAgYXNzZXJ0Tm90TnVsbCh2YWx1ZSk7CiAgICAgICAgICAg\nIGFzc2VydFRydWUoQXR0cmlidXRlLmNsYXNzLmlzQXNzaWduYWJsZUZyb20o\ndmFsdWUuZ2V0Q2xhc3MoKSkpOwogICAgICAgIH0gY2F0Y2ggKFRocm93YWJs\nZSB0KSB7CiAgICAgICAgICAgIHQucHJpbnRTdGFja1RyYWNlKCk7CiAgICAg\nICAgICAgIGZhaWwoKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIHB1Ymxp\nYyB2b2lkIHRlc3REb21haW5DbGFzc0NhdGVnb3JpemVkSW5QZXJzaXN0ZW50\nQ2F0ZWdvcnkoKSB7CiAgICAJYXNzZXJ0Q2F0ZWdvcnkoUGVyc2lzdGVuY2VU\neXBlLk1BUFBFRF9TVVBFUkNMQVNTLCBJbXBsaWNpdEZpZWxkQWNjZXNzTWFw\ncGVkU3VwZXJjbGFzcy5jbGFzcyk7CiAgICAJYXNzZXJ0Q2F0ZWdvcnkoUGVy\nc2lzdGVuY2VUeXBlLkVOVElUWSwgSW1wbGljaXRGaWVsZEFjY2Vzc0Jhc2Uu\nY2xhc3MpOwogICAgCWFzc2VydENhdGVnb3J5KFBlcnNpc3RlbmNlVHlwZS5F\nTlRJVFksIEltcGxpY2l0RmllbGRBY2Nlc3NTdWJjbGFzcy5jbGFzcyk7CiAg\nICAJYXNzZXJ0Q2F0ZWdvcnkoUGVyc2lzdGVuY2VUeXBlLkVNQkVEREFCTEUs\nIEVtYmVkMC5jbGFzcyk7CiAgICAJYXNzZXJ0Q2F0ZWdvcnkoUGVyc2lzdGVu\nY2VUeXBlLkVNQkVEREFCTEUsIEVtYmVkMS5jbGFzcyk7CiAgICAJCiAgICAg\nICAgYXNzZXJ0Tm90TnVsbChtb2RlbC5lbnRpdHkoSW1wbGljaXRGaWVsZEFj\nY2Vzc0Jhc2UuY2xhc3MpKTsKICAgICAgICBhc3NlcnROb3ROdWxsKG1vZGVs\nLmVudGl0eShJbXBsaWNpdEZpZWxkQWNjZXNzU3ViY2xhc3MuY2xhc3MpKTsg\nICAgICAKICAgICAgICBhc3NlcnROb3ROdWxsKG1vZGVsLmVtYmVkZGFibGUo\nRW1iZWQwLmNsYXNzKSk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChtb2RlbC5l\nbWJlZGRhYmxlKEVtYmVkMS5jbGFzcykpOwogICAgICAgIAogICAgICAgIGph\ndmEudXRpbC5TZXQ8TWFuYWdlZFR5cGU8Pz4+IG1hbmFnZWRUeXBlcyA9IG1v\nZGVsLmdldE1hbmFnZWRUeXBlcygpOwogICAgICAgIG1hbmFnZWRUeXBlcy5y\nZW1vdmVBbGwobW9kZWwuZ2V0RW1iZWRkYWJsZXMoKSk7CiAgICAgICAgbWFu\nYWdlZFR5cGVzLnJlbW92ZUFsbChtb2RlbC5nZXRFbnRpdGllcygpKTsKICAg\nICAgICBhc3NlcnROb3ROdWxsKG1vZGVsLm1hbmFnZWRUeXBlKEltcGxpY2l0\nRmllbGRBY2Nlc3NNYXBwZWRTdXBlcmNsYXNzLmNsYXNzKSk7CiAgICAgICAg\nYXNzZXJ0VHJ1ZShtYW5hZ2VkVHlwZXMuY29udGFpbnMobW9kZWwubWFuYWdl\nZFR5cGUoSW1wbGljaXRGaWVsZEFjY2Vzc01hcHBlZFN1cGVyY2xhc3MuY2xh\nc3MpKSk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RHZXRBdHRy\naWJ1dGVCeU5hbWVBbmRUeXBlRnJvbU1ldGFDbGFzcygpIHsKICAgICAgICBN\nYW5hZ2VkVHlwZTxJbXBsaWNpdEZpZWxkQWNjZXNzQmFzZT4gZTAgPSBtb2Rl\nbC5lbnRpdHkoSW1wbGljaXRGaWVsZEFjY2Vzc0Jhc2UuY2xhc3MpOwogICAg\nICAgIGFzc2VydE5vdE51bGwoZTAuZ2V0QXR0cmlidXRlKCJmMCIpKTsKICAg\nICAgICBhc3NlcnROb3ROdWxsKGUwLmdldFNpbmd1bGFyQXR0cmlidXRlKCJm\nMCIsIFN0cmluZy5jbGFzcykpOwogICAgICAgIGFzc2VydFNhbWUoZTAuZ2V0\nQXR0cmlidXRlKCJmMCIpLCBlMC5nZXRTaW5ndWxhckF0dHJpYnV0ZSgiZjAi\nLCBTdHJpbmcuY2xhc3MpKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBl\nMC5nZXRTaW5ndWxhckF0dHJpYnV0ZSgiZjAiLCBFeHBsaWNpdEZpZWxkQWNj\nZXNzLmNsYXNzKTsKICAgICAgICAgICAgZmFpbCgiRXhwZWN0ZWQgSWxsZWdh\nbEFyZ3VtZW50RXhjZXB0aW9uIik7CiAgICAgICAgfSBjYXRjaCAoSWxsZWdh\nbEFyZ3VtZW50RXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgLy8gZ29vZAog\nICAgICAgIH0KICAgICAgICBNYW5hZ2VkVHlwZTxJbXBsaWNpdEZpZWxkQWNj\nZXNzU3ViY2xhc3M+IGUxID0gbW9kZWwuZW50aXR5KEltcGxpY2l0RmllbGRB\nY2Nlc3NTdWJjbGFzcy5jbGFzcyk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChl\nMS5nZXRBdHRyaWJ1dGUoImYwIikpOwogICAgfQogICAgCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0QXR0cmlidXRlQnlEZWNsYXJhdGlvbigpIHsKICAgICAgICBN\nYW5hZ2VkVHlwZTxJbXBsaWNpdEZpZWxkQWNjZXNzQmFzZT4gZTAgPSBtb2Rl\nbC5lbnRpdHkoSW1wbGljaXRGaWVsZEFjY2Vzc0Jhc2UuY2xhc3MpOwogICAg\nICAgIE1hbmFnZWRUeXBlPEltcGxpY2l0RmllbGRBY2Nlc3NTdWJjbGFzcz4g\nZTEgPSBtb2RlbC5lbnRpdHkoSW1wbGljaXRGaWVsZEFjY2Vzc1N1YmNsYXNz\nLmNsYXNzKTsKICAgICAgICBhc3NlcnROb3ROdWxsKGUwLmdldEF0dHJpYnV0\nZSgiZjAiKSk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChlMS5nZXRBdHRyaWJ1\ndGUoImYwIikpOwogICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihlMC5nZXRB\ndHRyaWJ1dGUoImYwIikpOwogICAgICAgIGFzc2VydE5vdE51bGwoZTAuZ2V0\nU2luZ3VsYXJBdHRyaWJ1dGUoImYwIiwgU3RyaW5nLmNsYXNzKSk7CiAgICAg\nICAgYXNzZXJ0Tm90TnVsbChlMS5nZXRTaW5ndWxhckF0dHJpYnV0ZSgiZjAi\nLCBTdHJpbmcuY2xhc3MpKTsKICAgICAgICBhc3NlcnRTYW1lKGUwLmdldEF0\ndHJpYnV0ZSgiZjAiKSwgZTAuZ2V0U2luZ3VsYXJBdHRyaWJ1dGUoImYwIiwg\nU3RyaW5nLmNsYXNzKSk7CiAgICAgICAgYXNzZXJ0U2FtZShlMS5nZXRBdHRy\naWJ1dGUoImYwIiksIGUxLmdldFNpbmd1bGFyQXR0cmlidXRlKCJmMCIsIFN0\ncmluZy5jbGFzcykpOwogICAgICAgIGFzc2VydE5vdFNhbWUoZTAuZ2V0QXR0\ncmlidXRlKCJmMCIpLCBlMS5nZXRBdHRyaWJ1dGUoImYwIikpOwogICAgICAg\nIGFzc2VydE5vdFNhbWUoZTAuZ2V0U2luZ3VsYXJBdHRyaWJ1dGUoImYwIiwg\nU3RyaW5nLmNsYXNzKSwgZTEuZ2V0U2luZ3VsYXJBdHRyaWJ1dGUoImYwIiwg\nU3RyaW5nLmNsYXNzKSk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChlMC5nZXRE\nZWNsYXJlZEF0dHJpYnV0ZSgiZjAiKSk7CiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgZTEuZ2V0RGVjbGFyZWRBdHRyaWJ1dGUoImYwIik7CiAgICAgICAg\nICAgIGZhaWwoIkV4cGVjdGVkIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiIp\nOwogICAgICAgIH0gY2F0Y2ggKElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBl\nKSB7CiAgICAgICAgICAgIC8vIGdvb2QKICAgICAgICB9CiAgICB9CiAgICAK\nICAgIHB1YmxpYyB2b2lkIHRlc3RQQ0NvbGxlY3Rpb24oKSB7CiAgICAgICAg\nTWFuYWdlZFR5cGU8SW1wbGljaXRGaWVsZEFjY2Vzc0Jhc2U+IGUwID0gbW9k\nZWwuZW50aXR5KEltcGxpY2l0RmllbGRBY2Nlc3NCYXNlLmNsYXNzKTsKICAg\nICAgICBNYW5hZ2VkVHlwZTxFeHBsaWNpdEZpZWxkQWNjZXNzPiByMSA9IG1v\nZGVsLmVudGl0eShFeHBsaWNpdEZpZWxkQWNjZXNzLmNsYXNzKTsKICAgICAg\nICBDb2xsZWN0aW9uQXR0cmlidXRlPD8sPz4gcmVsQ29sbCA9IGUwLmdldENv\nbGxlY3Rpb24oImNvbGxlY3Rpb25SZWxhdGlvbiIsIEV4cGxpY2l0RmllbGRB\nY2Nlc3MuY2xhc3MpOwogICAgICAgIGFzc2VydEVxdWFscyhqYXZheC5wZXJz\naXN0ZW5jZS5tZXRhbW9kZWwuUGx1cmFsQXR0cmlidXRlLkNvbGxlY3Rpb25U\neXBlLkNPTExFQ1RJT04sIAogICAgICAgICAgICAgICAgcmVsQ29sbC5nZXRD\nb2xsZWN0aW9uVHlwZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoZTAsIHJl\nbENvbGwuZ2V0RGVjbGFyaW5nVHlwZSgpKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMocjEsIHJlbENvbGwuZ2V0RWxlbWVudFR5cGUoKSk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKEV4cGxpY2l0RmllbGRBY2Nlc3MuY2xhc3MsIHJlbENvbGwu\nZ2V0QmluZGFibGVKYXZhVHlwZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nQmluZGFibGVUeXBlLlBMVVJBTF9BVFRSSUJVVEUsIHJlbENvbGwuZ2V0Qmlu\nZGFibGVUeXBlKCkpOwogICAgICAgIGFzc2VydEVxdWFscyhBdHRyaWJ1dGUu\nUGVyc2lzdGVudEF0dHJpYnV0ZVR5cGUuT05FX1RPX01BTlksIHJlbENvbGwu\nZ2V0UGVyc2lzdGVudEF0dHJpYnV0ZVR5cGUoKSk7CiAgICB9CiAgICAKICAg\nIHB1YmxpYyB2b2lkIHRlc3RQQ0xpc3QoKSB7CiAgICAgICAgTWFuYWdlZFR5\ncGU8SW1wbGljaXRGaWVsZEFjY2Vzc0Jhc2U+IGUwID0gbW9kZWwuZW50aXR5\nKEltcGxpY2l0RmllbGRBY2Nlc3NCYXNlLmNsYXNzKTsKICAgICAgICBNYW5h\nZ2VkVHlwZTxFeHBsaWNpdEZpZWxkQWNjZXNzPiByMSA9IG1vZGVsLmVudGl0\neShFeHBsaWNpdEZpZWxkQWNjZXNzLmNsYXNzKTsKICAgICAgICBMaXN0QXR0\ncmlidXRlPD8sID8+IHJlbExpc3QgPSBlMC5nZXRMaXN0KCJsaXN0UmVsYXRp\nb24iLCBFeHBsaWNpdEZpZWxkQWNjZXNzLmNsYXNzKTsKICAgICAgICAKICAg\nICAgICBhc3NlcnRFcXVhbHMoQ29sbGVjdGlvblR5cGUuTElTVCwgcmVsTGlz\ndC5nZXRDb2xsZWN0aW9uVHlwZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nZTAsIHJlbExpc3QuZ2V0RGVjbGFyaW5nVHlwZSgpKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMocjEsIHJlbExpc3QuZ2V0RWxlbWVudFR5cGUoKSk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKEV4cGxpY2l0RmllbGRBY2Nlc3MuY2xhc3MsIHJl\nbExpc3QuZ2V0QmluZGFibGVKYXZhVHlwZSgpKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoQmluZGFibGVUeXBlLlBMVVJBTF9BVFRSSUJVVEUsIHJlbExpc3Qu\nZ2V0QmluZGFibGVUeXBlKCkpOwogICAgICAgIGFzc2VydEVxdWFscyhQZXJz\naXN0ZW50QXR0cmlidXRlVHlwZS5PTkVfVE9fTUFOWSwgcmVsTGlzdC5nZXRQ\nZXJzaXN0ZW50QXR0cmlidXRlVHlwZSgpKTsKICAgIH0KICAgIAogICAgcHVi\nbGljIHZvaWQgdGVzdFBDU2V0KCkgewogICAgICAgIE1hbmFnZWRUeXBlPElt\ncGxpY2l0RmllbGRBY2Nlc3NCYXNlPiBlMCA9IG1vZGVsLmVudGl0eShJbXBs\naWNpdEZpZWxkQWNjZXNzQmFzZS5jbGFzcyk7CiAgICAgICAgTWFuYWdlZFR5\ncGU8RXhwbGljaXRGaWVsZEFjY2Vzcz4gcjEgPSBtb2RlbC5lbnRpdHkoRXhw\nbGljaXRGaWVsZEFjY2Vzcy5jbGFzcyk7CiAgICAgICAgU2V0QXR0cmlidXRl\nPD8sID8+IHJlbFNldCA9IGUwLmdldFNldCgic2V0UmVsYXRpb24iLCBFeHBs\naWNpdEZpZWxkQWNjZXNzLmNsYXNzKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\namF2YXgucGVyc2lzdGVuY2UubWV0YW1vZGVsLlBsdXJhbEF0dHJpYnV0ZS5D\nb2xsZWN0aW9uVHlwZS5TRVQsIHJlbFNldC5nZXRDb2xsZWN0aW9uVHlwZSgp\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoZTAsIHJlbFNldC5nZXREZWNsYXJp\nbmdUeXBlKCkpOwogICAgICAgIGFzc2VydEVxdWFscyhyMSwgcmVsU2V0Lmdl\ndEVsZW1lbnRUeXBlKCkpOwogICAgICAgIGFzc2VydEVxdWFscyhFeHBsaWNp\ndEZpZWxkQWNjZXNzLmNsYXNzLCByZWxTZXQuZ2V0QmluZGFibGVKYXZhVHlw\nZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoQmluZGFibGVUeXBlLlBMVVJB\nTF9BVFRSSUJVVEUsIHJlbFNldC5nZXRCaW5kYWJsZVR5cGUoKSk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKFBlcnNpc3RlbnRBdHRyaWJ1dGVUeXBlLk9ORV9U\nT19NQU5ZLCByZWxTZXQuZ2V0UGVyc2lzdGVudEF0dHJpYnV0ZVR5cGUoKSk7\nCiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3REZWNsYXJlZEZpZWxk\ncygpIHsKICAgICAgICBNYW5hZ2VkVHlwZTxJbXBsaWNpdEZpZWxkQWNjZXNz\nU3ViY2xhc3M+IGUxID0gbW9kZWwuZW50aXR5KEltcGxpY2l0RmllbGRBY2Nl\nc3NTdWJjbGFzcy5jbGFzcyk7CiAgICAgICAgamF2YS51dGlsLlNldDw/PiBh\nbGwgPSBlMS5nZXRBdHRyaWJ1dGVzKCk7CiAgICAgICAgamF2YS51dGlsLlNl\ndDw/PiBkZWNsID0gZTEuZ2V0RGVjbGFyZWRBdHRyaWJ1dGVzKCk7CiAgICAg\nICAgYXNzZXJ0VHJ1ZSgiQWxsIGZpZWxkcyAiICsgYWxsICsgIlxyXG5EZWNs\nYXJlZCBmaWVsZHMgIiArIGRlY2wgKyAiXHJcbiIrCiAgICAgICAgICJleHBl\nY2V0ZCBub3QgYWxsIGZpZWxkcyBhcyBkZWNsYXJlZCIsIGFsbC5zaXplKCkg\nPiBkZWNsLnNpemUoKSk7CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRl\nc3ROb25FeGlzdGVudEZpZWxkKCkgewogICAgICAgIE1hbmFnZWRUeXBlPElt\ncGxpY2l0RmllbGRBY2Nlc3NCYXNlPiBlMCA9IG1vZGVsLmVudGl0eShJbXBs\naWNpdEZpZWxkQWNjZXNzQmFzZS5jbGFzcyk7CiAgICAgICAgTWFuYWdlZFR5\ncGU8SW1wbGljaXRGaWVsZEFjY2Vzc1N1YmNsYXNzPiBlMSA9IG1vZGVsLmVu\ndGl0eShJbXBsaWNpdEZpZWxkQWNjZXNzU3ViY2xhc3MuY2xhc3MpOwogICAg\nICAgIGFzc2VydEZhaWxzKGUwLCAieHl6IiwgZmFsc2UpOwogICAgICAgIGFz\nc2VydEZhaWxzKGUxLCAiZjAiLCB0cnVlKTsKICAgIH0KICAgIAogICAgLyoq\nCiAgICAgKiBUZXN0IGFsbCBhdHRyaWJ1dGUgZ2V0dGVycyBvZiBNYW5hZ2Vk\nVHlwZSBmb3IgdmFsaWQgaW5wdXRzLgogICAgICovCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0QXR0cmlidXRlR2V0dGVyc0ZvclZhbGlkSW5wdXQoKSB7CiAgICAg\nICAgSWRlbnRpZmlhYmxlVHlwZTxJbXBsaWNpdEZpZWxkQWNjZXNzU3ViY2xh\nc3M+IHN1YkNsYXNzID0gbW9kZWwuZW50aXR5KEltcGxpY2l0RmllbGRBY2Nl\nc3NTdWJjbGFzcy5jbGFzcyk7CiAgICAgICAgSWRlbnRpZmlhYmxlVHlwZTxJ\nbXBsaWNpdEZpZWxkQWNjZXNzQmFzZT4gc3VwZXJDbGFzcyA9IG1vZGVsLmVu\ndGl0eShJbXBsaWNpdEZpZWxkQWNjZXNzQmFzZS5jbGFzcyk7CiAgICAgICAg\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKHN1cGVyQ2xhc3MsIHN1YkNsYXNzLmdl\ndFN1cGVydHlwZSgpKTsKICAgICAgICAKICAgICAgICBhc3NlcnROb3ROdWxs\nKHN1YkNsYXNzLmdldEF0dHJpYnV0ZSgiZjAiKSk7CiAgICAgICAgYXNzZXJ0\nTm90TnVsbChzdXBlckNsYXNzLmdldEF0dHJpYnV0ZSgiZjAiKSk7CiAgICAg\nICAgYXNzZXJ0Tm90TnVsbChzdWJDbGFzcy5nZXRBdHRyaWJ1dGUoIm1hcFJl\nbGF0aW9uS2V5RW1iZWRkZWQiKSk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0\nTm90TnVsbChzdWJDbGFzcy5nZXRBdHRyaWJ1dGVzKCkpOwogICAgICAgIGFz\nc2VydE5vdE51bGwoc3VwZXJDbGFzcy5nZXRBdHRyaWJ1dGVzKCkpOwogICAg\nICAgIGFzc2VydEVxdWFscygxNCwgc3ViQ2xhc3MuZ2V0QXR0cmlidXRlcygp\nLnNpemUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEyLCBzdXBlckNsYXNz\nLmdldEF0dHJpYnV0ZXMoKS5zaXplKCkpOwogICAgICAgIAogICAgICAgIGFz\nc2VydE5vdE51bGwoc3VwZXJDbGFzcy5nZXRDb2xsZWN0aW9uKCJjb2xsZWN0\naW9uUmVsYXRpb24iKSk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChzdXBlckNs\nYXNzLmdldENvbGxlY3Rpb24oImNvbGxlY3Rpb25SZWxhdGlvbiIsIEV4cGxp\nY2l0RmllbGRBY2Nlc3MuY2xhc3MpKTsKICAgICAgICAKICAgICAgICBhc3Nl\ncnROb3ROdWxsKHN1YkNsYXNzLmdldFBsdXJhbEF0dHJpYnV0ZXMoKSk7CiAg\nICAgICAgYXNzZXJ0Tm90TnVsbChzdXBlckNsYXNzLmdldFBsdXJhbEF0dHJp\nYnV0ZXMoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDYsIHN1YkNsYXNzLmdl\ndFBsdXJhbEF0dHJpYnV0ZXMoKS5zaXplKCkpOwogICAgICAgIGFzc2VydEVx\ndWFscyg1LCBzdXBlckNsYXNzLmdldFBsdXJhbEF0dHJpYnV0ZXMoKS5zaXpl\nKCkpOwogICAgICAgIAogICAgICAgIGFzc2VydE5vdE51bGwoc3ViQ2xhc3Mu\nZ2V0RGVjbGFyZWRBdHRyaWJ1dGUoIm1hcFJlbGF0aW9uS2V5RW1iZWRkZWQi\nKSk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0Tm90TnVsbChzdWJDbGFzcy5n\nZXREZWNsYXJlZEF0dHJpYnV0ZXMoKSk7CiAgICAgICAgYXNzZXJ0Tm90TnVs\nbChzdXBlckNsYXNzLmdldERlY2xhcmVkQXR0cmlidXRlcygpKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoMiwgc3ViQ2xhc3MuZ2V0RGVjbGFyZWRBdHRyaWJ1\ndGVzKCkuc2l6ZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoOSwgc3VwZXJD\nbGFzcy5nZXREZWNsYXJlZEF0dHJpYnV0ZXMoKS5zaXplKCkpOwogICAgICAg\nIAogICAgICAgIGFzc2VydE5vdE51bGwoc3VwZXJDbGFzcy5nZXREZWNsYXJl\nZENvbGxlY3Rpb24oImNvbGxlY3Rpb25SZWxhdGlvbiIpKTsKICAgICAgICAK\nICAgICAgICBhc3NlcnROb3ROdWxsKHN1YkNsYXNzLmdldERlY2xhcmVkUGx1\ncmFsQXR0cmlidXRlcygpKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHN1cGVy\nQ2xhc3MuZ2V0RGVjbGFyZWRQbHVyYWxBdHRyaWJ1dGVzKCkpOwogICAgICAg\nIGFzc2VydEVxdWFscygxLCBzdWJDbGFzcy5nZXREZWNsYXJlZFBsdXJhbEF0\ndHJpYnV0ZXMoKS5zaXplKCkpOwogICAgICAgIGFzc2VydEVxdWFscyg1LCBz\ndXBlckNsYXNzLmdldERlY2xhcmVkUGx1cmFsQXR0cmlidXRlcygpLnNpemUo\nKSk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0Tm90TnVsbChzdXBlckNsYXNz\nLmdldERlY2xhcmVkTGlzdCgibGlzdFJlbGF0aW9uIikpOwogICAgICAgIGFz\nc2VydE5vdE51bGwoc3VwZXJDbGFzcy5nZXREZWNsYXJlZExpc3QoImxpc3RS\nZWxhdGlvbiIsIEV4cGxpY2l0RmllbGRBY2Nlc3MuY2xhc3MpKTsKICAgICAg\nICBhc3NlcnROb3ROdWxsKHN1cGVyQ2xhc3MuZ2V0RGVjbGFyZWRNYXAoIm1h\ncFJlbGF0aW9uS2V5QmFzaWMiKSk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChz\ndXBlckNsYXNzLmdldERlY2xhcmVkTWFwKCJtYXBSZWxhdGlvbktleUJhc2lj\nIiwgSW50ZWdlci5jbGFzcywgRXhwbGljaXRGaWVsZEFjY2Vzcy5jbGFzcykp\nOwogICAgICAgIGFzc2VydE5vdE51bGwoc3VwZXJDbGFzcy5nZXREZWNsYXJl\nZFNldCgic2V0UmVsYXRpb24iKSk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChz\ndXBlckNsYXNzLmdldERlY2xhcmVkU2V0KCJzZXRSZWxhdGlvbiIsIEV4cGxp\nY2l0RmllbGRBY2Nlc3MuY2xhc3MpKTsKICAgICAgICBhc3NlcnROb3ROdWxs\nKHN1cGVyQ2xhc3MuZ2V0RGVjbGFyZWRTaW5ndWxhckF0dHJpYnV0ZSgib25l\nMm9uZVJlbGF0aW9uIikpOwogICAgICAgIGFzc2VydE5vdE51bGwoc3VwZXJD\nbGFzcy5nZXREZWNsYXJlZFNpbmd1bGFyQXR0cmlidXRlKCJvbmUyb25lUmVs\nYXRpb24iLCBFeHBsaWNpdEZpZWxkQWNjZXNzLmNsYXNzKSk7CiAgICAgICAg\nYXNzZXJ0Tm90TnVsbChzdXBlckNsYXNzLmdldERlY2xhcmVkU2luZ3VsYXJB\ndHRyaWJ1dGVzKCkpOwogICAgICAgIAogICAgICAgIAogICAgICAgIGFzc2Vy\ndE5vdE51bGwoc3ViQ2xhc3MuZ2V0TGlzdCgibGlzdFJlbGF0aW9uIikpOwog\nICAgICAgIGFzc2VydE5vdE51bGwoc3ViQ2xhc3MuZ2V0TGlzdCgibGlzdFJl\nbGF0aW9uIiwgRXhwbGljaXRGaWVsZEFjY2Vzcy5jbGFzcykpOwogICAgICAg\nIGFzc2VydE5vdE51bGwoc3ViQ2xhc3MuZ2V0TWFwKCJtYXBSZWxhdGlvbktl\neUJhc2ljIikpOwogICAgICAgIGFzc2VydE5vdE51bGwoc3ViQ2xhc3MuZ2V0\nTWFwKCJtYXBSZWxhdGlvbktleUJhc2ljIiwgSW50ZWdlci5jbGFzcywgRXhw\nbGljaXRGaWVsZEFjY2Vzcy5jbGFzcykpOwogICAgICAgIGFzc2VydE5vdE51\nbGwoc3ViQ2xhc3MuZ2V0UGVyc2lzdGVuY2VUeXBlKCkpOwogICAgICAgIGFz\nc2VydE5vdE51bGwoc3ViQ2xhc3MuZ2V0U2V0KCJzZXRSZWxhdGlvbiIpKTsK\nICAgICAgICBhc3NlcnROb3ROdWxsKHN1YkNsYXNzLmdldFNldCgic2V0UmVs\nYXRpb24iLCBFeHBsaWNpdEZpZWxkQWNjZXNzLmNsYXNzKSk7CiAgICAgICAg\nYXNzZXJ0Tm90TnVsbChzdWJDbGFzcy5nZXRTaW5ndWxhckF0dHJpYnV0ZSgi\nb25lMm9uZVJlbGF0aW9uIikpOwogICAgICAgIGFzc2VydE5vdE51bGwoc3Vi\nQ2xhc3MuZ2V0U2luZ3VsYXJBdHRyaWJ1dGUoIm9uZTJvbmVSZWxhdGlvbiIs\nIEV4cGxpY2l0RmllbGRBY2Nlc3MuY2xhc3MpKTsKICAgICAgICBhc3NlcnRO\nb3ROdWxsKHN1YkNsYXNzLmdldFNpbmd1bGFyQXR0cmlidXRlcygpKTsKICAg\nIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdFNpbXBsZUlkQXR0cmlidXRl\ncygpIHsKICAgICAgICBJZGVudGlmaWFibGVUeXBlPE9uZU9uZVBhcmVudD4g\nZW50aXR5ID0gbW9kZWwuZW50aXR5KE9uZU9uZVBhcmVudC5jbGFzcyk7CiAg\nICAgICAgZm9yIChBdHRyaWJ1dGU8PyBzdXBlciBPbmVPbmVQYXJlbnQsPz4g\nYSA6IGVudGl0eS5nZXRBdHRyaWJ1dGVzKCkpIHsKICAgICAgICAgICAgU3lz\ndGVtLmVyci5wcmludGxuKGEuZ2V0TmFtZSgpKTsKICAgICAgICB9CiAgICAg\nICAgYXNzZXJ0Tm90TnVsbChlbnRpdHkuZ2V0SWQobG9uZy5jbGFzcykpOwog\nICAgICAgIGFzc2VydE5vdE51bGwoZW50aXR5LmdldERlY2xhcmVkSWQobG9u\nZy5jbGFzcykpOwogICAgICAgIGFzc2VydFRydWUoZW50aXR5Lmhhc1Npbmds\nZUlkQXR0cmlidXRlKCkpOwogICAgICAgIGFzc2VydEVxdWFscyhsb25nLmNs\nYXNzLCBlbnRpdHkuZ2V0SWRUeXBlKCkuZ2V0SmF2YVR5cGUoKSk7CiAgICB9\nCiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RWZXJzaW9uQXR0cmlidXRlcygp\nIHsKICAgICAgICBJZGVudGlmaWFibGVUeXBlPE9uZU9uZVBhcmVudD4gZW50\naXR5ID0gbW9kZWwuZW50aXR5KE9uZU9uZVBhcmVudC5jbGFzcyk7CiAgICAg\nICAgZm9yIChBdHRyaWJ1dGU8PyBzdXBlciBPbmVPbmVQYXJlbnQsPz4gYSA6\nIGVudGl0eS5nZXRBdHRyaWJ1dGVzKCkpIHsKICAgICAgICAgICAgU3lzdGVt\nLmVyci5wcmludGxuKGEuZ2V0TmFtZSgpKTsKICAgICAgICB9CiAgICAgICAg\nYXNzZXJ0Tm90TnVsbChlbnRpdHkuZ2V0VmVyc2lvbihJbnRlZ2VyLmNsYXNz\nKSk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChlbnRpdHkuZ2V0RGVjbGFyZWRW\nZXJzaW9uKEludGVnZXIuY2xhc3MpKTsKICAgICAgICBhc3NlcnRUcnVlKGVu\ndGl0eS5oYXNWZXJzaW9uQXR0cmlidXRlKCkpOwogICAgfQogICAgCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0SWRDbGFzc0F0dHJpYnV0ZXMoKSB7CiAgICAgICAg\nSWRlbnRpZmlhYmxlVHlwZTxCb29rPiBlbnRpdHkgPSBtb2RlbC5lbnRpdHko\nQm9vay5jbGFzcyk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0RXF1YWxzKDIs\nIGVudGl0eS5nZXRJZENsYXNzQXR0cmlidXRlcygpLnNpemUoKSk7CiAgICAg\nICAgYXNzZXJ0Tm90TnVsbChlbnRpdHkuZ2V0SWQoU3RyaW5nLmNsYXNzKSk7\nCiAgICAgICAgYXNzZXJ0Tm90TnVsbChlbnRpdHkuZ2V0SWQoTGlicmFyeS5j\nbGFzcykpOwogICAgICAgIGFzc2VydE5vdE51bGwoZW50aXR5LmdldERlY2xh\ncmVkSWQoU3RyaW5nLmNsYXNzKSk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChl\nbnRpdHkuZ2V0RGVjbGFyZWRJZChMaWJyYXJ5LmNsYXNzKSk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKEJvb2tJZC5jbGFzcywgZW50aXR5LmdldElkVHlwZSgp\nLmdldEphdmFUeXBlKCkpOwogICAgICAgIGFzc2VydEZhbHNlKGVudGl0eS5o\nYXNTaW5nbGVJZEF0dHJpYnV0ZSgpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0QmFzaWNBdHRyaWJ1dGVUeXBlKCkgewogICAgICAgIE1hbmFnZWRU\neXBlPEltcGxpY2l0RmllbGRBY2Nlc3NCYXNlPiBlMCA9IG1vZGVsLmVudGl0\neShJbXBsaWNpdEZpZWxkQWNjZXNzQmFzZS5jbGFzcyk7CiAgICAgICAgU2lu\nZ3VsYXJBdHRyaWJ1dGU8SW1wbGljaXRGaWVsZEFjY2Vzc0Jhc2UsPz4gcElu\ndCA9IGUwLmdldERlY2xhcmVkU2luZ3VsYXJBdHRyaWJ1dGUoInByaW1pdGl2\nZUludCIpOwogICAgICAgIGFzc2VydEVxdWFscyhQZXJzaXN0ZW50QXR0cmli\ndXRlVHlwZS5CQVNJQywgcEludC5nZXRQZXJzaXN0ZW50QXR0cmlidXRlVHlw\nZSgpKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdEVtYmVkZGVk\nQXR0cmlidXRlVHlwZSgpIHsKICAgICAgICBNYW5hZ2VkVHlwZTxBZGRyZXNz\nPiB0eXBlID0gbW9kZWwuZW50aXR5KEFkZHJlc3MuY2xhc3MpOwogICAgICAg\nIEF0dHJpYnV0ZS5QZXJzaXN0ZW50QXR0cmlidXRlVHlwZSBhdHRyID0gdHlw\nZS5nZXRBdHRyaWJ1dGUoImdlb2NvZGUiKS5nZXRQZXJzaXN0ZW50QXR0cmli\ndXRlVHlwZSgpOwogICAgICAgIGFzc2VydEVxdWFscyhQZXJzaXN0ZW50QXR0\ncmlidXRlVHlwZS5FTUJFRERFRCwgYXR0cik7CiAgICB9CiAgICAKICAgIHB1\nYmxpYyB2b2lkIHRlc3ROb3RGb3VuZEVycm9yTWVzc2FnZSgpIHsKICAgICAg\nICBJZGVudGlmaWFibGVUeXBlPEltcGxpY2l0RmllbGRBY2Nlc3NCYXNlPiBl\nMCA9IG1vZGVsLmVudGl0eShJbXBsaWNpdEZpZWxkQWNjZXNzQmFzZS5jbGFz\ncyk7CiAgICAgICAgU3RyaW5nIG5hbWUgPSAidW5rbm93biI7CiAgICAgICAg\ndHJ5IHsKICAgICAgICAgIE1ldGhvZFtdIGdldHRlcnMgPSB7CiAgICAgICAg\nICAgIGUwLmdldENsYXNzKCkuZ2V0TWV0aG9kKCJnZXRBdHRyaWJ1dGUiLCAg\nICAgICAgICBuZXcgQ2xhc3M8Pz5bXXtTdHJpbmcuY2xhc3N9KSwKICAgICAg\nICAgICAgZTAuZ2V0Q2xhc3MoKS5nZXRNZXRob2QoImdldENvbGxlY3Rpb24i\nLCAgICAgICAgIG5ldyBDbGFzczw/Pltde1N0cmluZy5jbGFzc30pLAogICAg\nICAgICAgICBlMC5nZXRDbGFzcygpLmdldE1ldGhvZCgiZ2V0TGlzdCIsICAg\nICAgICAgICAgICAgbmV3IENsYXNzPD8+W117U3RyaW5nLmNsYXNzfSksCiAg\nICAgICAgICAgIGUwLmdldENsYXNzKCkuZ2V0TWV0aG9kKCJnZXRTZXQiLCAg\nICAgICAgICAgICAgICBuZXcgQ2xhc3M8Pz5bXXtTdHJpbmcuY2xhc3N9KSwK\nICAgICAgICAgICAgZTAuZ2V0Q2xhc3MoKS5nZXRNZXRob2QoImdldFNpbmd1\nbGFyQXR0cmlidXRlIiwgIG5ldyBDbGFzczw/Pltde1N0cmluZy5jbGFzc30p\nLAogICAgICAgICAgICAKICAgICAgICAgICAgZTAuZ2V0Q2xhc3MoKS5nZXRN\nZXRob2QoImdldERlY2xhcmVkQXR0cmlidXRlIiwgIG5ldyBDbGFzczw/Pltd\ne1N0cmluZy5jbGFzc30pLAogICAgICAgICAgICBlMC5nZXRDbGFzcygpLmdl\ndE1ldGhvZCgiZ2V0RGVjbGFyZWRDb2xsZWN0aW9uIiwgbmV3IENsYXNzPD8+\nW117U3RyaW5nLmNsYXNzfSksCiAgICAgICAgICAgIGUwLmdldENsYXNzKCku\nZ2V0TWV0aG9kKCJnZXREZWNsYXJlZExpc3QiLCAgICAgICBuZXcgQ2xhc3M8\nPz5bXXtTdHJpbmcuY2xhc3N9KSwKICAgICAgICAgICAgZTAuZ2V0Q2xhc3Mo\nKS5nZXRNZXRob2QoImdldERlY2xhcmVkU2V0IiwgICAgICAgIG5ldyBDbGFz\nczw/Pltde1N0cmluZy5jbGFzc30pLAogICAgICAgICAgICBlMC5nZXRDbGFz\ncygpLmdldE1ldGhvZCgiZ2V0RGVjbGFyZWRTaW5ndWxhckF0dHJpYnV0ZSIs\nIG5ldyBDbGFzczw/Pltde1N0cmluZy5jbGFzc30pLAogICAgICAgICAgICAK\nICAgICAgICAgICAgZTAuZ2V0Q2xhc3MoKS5nZXRNZXRob2QoImdldEF0dHJp\nYnV0ZSIsICAgICAgICAgIG5ldyBDbGFzczw/Pltde1N0cmluZy5jbGFzcywg\nQ2xhc3MuY2xhc3N9KSwKICAgICAgICAgICAgZTAuZ2V0Q2xhc3MoKS5nZXRN\nZXRob2QoImdldENvbGxlY3Rpb24iLCAgICAgICAgIG5ldyBDbGFzczw/Pltd\ne1N0cmluZy5jbGFzcywgQ2xhc3MuY2xhc3N9KSwKICAgICAgICAgICAgZTAu\nZ2V0Q2xhc3MoKS5nZXRNZXRob2QoImdldExpc3QiLCAgICAgICAgICAgICAg\nIG5ldyBDbGFzczw/Pltde1N0cmluZy5jbGFzcywgQ2xhc3MuY2xhc3N9KSwK\nICAgICAgICAgICAgZTAuZ2V0Q2xhc3MoKS5nZXRNZXRob2QoImdldFNldCIs\nICAgICAgICAgICAgICAgIG5ldyBDbGFzczw/Pltde1N0cmluZy5jbGFzcywg\nQ2xhc3MuY2xhc3N9KSwKICAgICAgICAgICAgZTAuZ2V0Q2xhc3MoKS5nZXRN\nZXRob2QoImdldFNpbmd1bGFyQXR0cmlidXRlIiwgIG5ldyBDbGFzczw/Pltd\ne1N0cmluZy5jbGFzcywgQ2xhc3MuY2xhc3N9KSwKICAgICAgICAgICAgCiAg\nICAgICAgICAgIGUwLmdldENsYXNzKCkuZ2V0TWV0aG9kKCJnZXREZWNsYXJl\nZEF0dHJpYnV0ZSIsICBuZXcgQ2xhc3M8Pz5bXXtTdHJpbmcuY2xhc3MsIENs\nYXNzLmNsYXNzfSksCiAgICAgICAgICAgIGUwLmdldENsYXNzKCkuZ2V0TWV0\naG9kKCJnZXREZWNsYXJlZENvbGxlY3Rpb24iLCBuZXcgQ2xhc3M8Pz5bXXtT\ndHJpbmcuY2xhc3MsIENsYXNzLmNsYXNzfSksCiAgICAgICAgICAgIGUwLmdl\ndENsYXNzKCkuZ2V0TWV0aG9kKCJnZXREZWNsYXJlZExpc3QiLCAgICAgICBu\nZXcgQ2xhc3M8Pz5bXXtTdHJpbmcuY2xhc3MsIENsYXNzLmNsYXNzfSksCiAg\nICAgICAgICAgIGUwLmdldENsYXNzKCkuZ2V0TWV0aG9kKCJnZXREZWNsYXJl\nZFNldCIsICAgICAgICBuZXcgQ2xhc3M8Pz5bXXtTdHJpbmcuY2xhc3MsIENs\nYXNzLmNsYXNzfSksCiAgICAgICAgICAgIGUwLmdldENsYXNzKCkuZ2V0TWV0\naG9kKCJnZXREZWNsYXJlZFNpbmd1bGFyQXR0cmlidXRlIiwgbmV3IENsYXNz\nPD8+W117U3RyaW5nLmNsYXNzLCBDbGFzcy5jbGFzc30pLAoKICAgICAgICAg\nICAgZTAuZ2V0Q2xhc3MoKS5nZXRNZXRob2QoImdldE1hcCIsICAgICAgICAg\nIG5ldyBDbGFzczw/Pltde1N0cmluZy5jbGFzc30pLAogICAgICAgICAgICBl\nMC5nZXRDbGFzcygpLmdldE1ldGhvZCgiZ2V0TWFwIiwgICAgICAgICAgbmV3\nIENsYXNzPD8+W117U3RyaW5nLmNsYXNzLCBDbGFzcy5jbGFzcywgQ2xhc3Mu\nY2xhc3N9KSwKICAgICAgICAgICAgZTAuZ2V0Q2xhc3MoKS5nZXRNZXRob2Qo\nImdldERlY2xhcmVkTWFwIiwgIG5ldyBDbGFzczw/Pltde1N0cmluZy5jbGFz\nc30pLAogICAgICAgICAgICBlMC5nZXRDbGFzcygpLmdldE1ldGhvZCgiZ2V0\nRGVjbGFyZWRNYXAiLCAgbmV3IENsYXNzPD8+W117U3RyaW5nLmNsYXNzLCBD\nbGFzcy5jbGFzcywgQ2xhc3MuY2xhc3N9KSwKICAgICAgICAgIH07Ci8vICAg\nICAgICAgICAgICAgICBlMC5nZXRDbGFzcygpLmdldE1ldGhvZCgiZ2V0RGVj\nbGFyZWRWZXJzaW9uIiwgbmV3IENsYXNzPD8+W117Q2xhc3MuY2xhc3N9KSwK\nICAgICAgICAKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGdldHRlcnMu\nbGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgT2JqZWN0W10gYXJnczsKICAg\nICAgICAgICAgaWYgKGkgPCAxMCkgewogICAgICAgICAgICAgICAgYXJncyA9\nIG5ldyBPYmplY3RbXXtuYW1lfTsKICAgICAgICAgICAgfSBlbHNlIGlmIChp\nIDwgMjApIHsKICAgICAgICAgICAgICAgIGFyZ3MgPSBuZXcgT2JqZWN0W117\nbmFtZSwgT2JqZWN0LmNsYXNzfTsKICAgICAgICAgICAgfSBlbHNlIGlmIChp\nJTIgPT0gMCkgewogICAgICAgICAgICAgICAgYXJncyA9IG5ldyBPYmplY3Rb\nXXtuYW1lfTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAg\nIGFyZ3MgPSBuZXcgT2JqZWN0W117bmFtZSwgT2JqZWN0LmNsYXNzLCBTdHJp\nbmcuY2xhc3N9OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRyeSB7CiAg\nICAgICAgICAgICAgICBnZXR0ZXJzW2ldLmludm9rZShlMCwgYXJncyk7CiAg\nICAgICAgICAgICAgICBmYWlsKCk7CiAgICAgICAgICAgIH0gIGNhdGNoIChJ\nbnZvY2F0aW9uVGFyZ2V0RXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAg\nU3lzdGVtLmVyci5wcmludGxuKCJFeHBlY2V0ZWQ6IiArIGUuZ2V0VGFyZ2V0\nRXhjZXB0aW9uKCkpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAg\nIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGUucHJpbnRT\ndGFja1RyYWNlKCk7CiAgICAgICAgICAgIGZhaWwoKTsKICAgICAgICB9CiAg\nICB9CiAgICAKICAgIHZvaWQgYXNzZXJ0RmFpbHMoTWFuYWdlZFR5cGU8Pz4g\ndHlwZSwgU3RyaW5nIG5hbWUsIGJvb2xlYW4gZGVjKSB7CiAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgQXR0cmlidXRlPD8sPz4gYSA9IGRlYyA/IHR5cGUu\nZ2V0RGVjbGFyZWRBdHRyaWJ1dGUobmFtZSkgCiAgICAgICAgICAgICAgICA6\nIHR5cGUuZ2V0QXR0cmlidXRlKG5hbWUpOwogICAgICAgICAgICBmYWlsKCJF\neHBlY3RlZCB0byBmYWlsICIgKyBuYW1lICsgIiBvbiAiICsgdHlwZSk7CiAg\nICAgICAgfSBjYXRjaCAoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGUpIHsK\nICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKCJFeHBlY2V0ZWQ6IiAr\nIGUpOwogICAgICAgIH0KICAgIH0KICAgIAogICAgUGVyc2lzdGVuY2VUeXBl\nIGNhdGVnb3JpemUoQ2xhc3M8Pz4gYykgewogICAgICAgIEFic3RyYWN0TWFu\nYWdlZFR5cGU8Pz4gdHlwZSA9IChBYnN0cmFjdE1hbmFnZWRUeXBlPD8+KW1v\nZGVsLmdldFR5cGUoYyk7CiAgICAgICAgQ2xhc3NNZXRhRGF0YSBtZXRhID0g\ndHlwZS5tZXRhOwogICAgICAgIHJldHVybiBNZXRhbW9kZWxJbXBsLmdldFBl\ncnNpc3RlbmNlVHlwZShtZXRhKTsKICAgIH0KICAgIAogICAgdm9pZCBhc3Nl\ncnRDYXRlZ29yeShQZXJzaXN0ZW5jZVR5cGUgY2F0ZWdvcnksIENsYXNzPD8+\nIGNscykgewogICAgCWFzc2VydEVxdWFscyhjbHMudG9TdHJpbmcoKSwgY2F0\nZWdvcnksIGNhdGVnb3JpemUoY2xzKSk7CiAgICB9CiAgICAKICAgIEZpZWxk\nIGdldFN0YXRpY0ZpZWxkKENsYXNzPD8+IGNscywgU3RyaW5nIG5hbWUpIHsK\nICAgICAgICB0cnkgewogICAgICAgICAgICBGaWVsZFtdIGZkcyA9IGNscy5n\nZXREZWNsYXJlZEZpZWxkcygpOwogICAgICAgICAgICBmb3IgKEZpZWxkIGYg\nOiBmZHMpIHsKICAgICAgICAgICAgICAgIGludCBtb2RzID0gZi5nZXRNb2Rp\nZmllcnMoKTsKICAgICAgICAgICAgICAgIGlmIChmLmdldE5hbWUoKS5lcXVh\nbHMobmFtZSkgJiYgTW9kaWZpZXIuaXNTdGF0aWMobW9kcykpCiAgICAgICAg\nICAgICAgICAgICAgcmV0dXJuIGY7CiAgICAgICAgICAgIH0KICAgICAgICB9\nIGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgIH0KICAgICAgICByZXR1\ncm4gbnVsbDsKICAgIH0KfQo=\n","encoding":"base64"}

