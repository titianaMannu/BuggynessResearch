{"sha":"83f850b4b04f9bdafe73c7089da38f078aa3a67f","node_id":"MDQ6QmxvYjIwNjM2NDo4M2Y4NTBiNGIwNGY5YmRhZmU3M2M3MDg5ZGEzOGYwNzhhYTNhNjdm","size":9018,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/83f850b4b04f9bdafe73c7089da38f078aa3a67f","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZSBvciBtb3JlCiAqIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gU2VlIHRoZSBOT1RJQ0UgZmlsZSBkaXN0cmli\ndXRlZCB3aXRoIHRoaXMKICogd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1h\ndGlvbiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gVGhlIEFTRgog\nKiBsaWNlbnNlcyB0aGlzIGZpbGUgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUg\nTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZQogKiAiTGljZW5zZSIpOyB5b3Ug\nbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdp\ndGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0\naGUgTGljZW5zZSBhdAogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5z\nZXMvTElDRU5TRS0yLjAgVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUg\nbGF3CiAqIG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0\ncmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcwogKiBkaXN0cmlidXRlZCBv\nbiBhbiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09O\nRElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1w\nbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3Vh\nZ2UKICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1\nbmRlciB0aGUgTGljZW5zZS4KICovCnBhY2thZ2Ugb3JnLmFwYWNoZS5vcGVu\nanBhLnBlcnNpc3RlbmNlLnF1ZXJ5OwoKaW1wb3J0IGphdmEuc3FsLlNRTEV4\nY2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5IYXNoTWFwOwppbXBvcnQgamF2\nYS51dGlsLk1hcDsKCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlN\nYW5hZ2VyOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuTG9ja01vZGVUeXBl\nOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuTG9ja1RpbWVvdXRFeGNlcHRp\nb247CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5QZXNzaW1pc3RpY0xvY2tF\neGNlcHRpb247CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5RdWVyeTsKaW1w\nb3J0IGphdmF4LnBlcnNpc3RlbmNlLlF1ZXJ5VGltZW91dEV4Y2VwdGlvbjsK\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5jb25mLkpEQkNDb25m\naWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3Fs\nLkRCMkRpY3Rpb25hcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5zcWwuREJEaWN0aW9uYXJ5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMuc3FsLk9yYWNsZURpY3Rpb25hcnk7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0\nb3J5U1BJOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNl\nLmV4Y2VwdGlvbi5QT2JqZWN0OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLnBlcnNpc3RlbmNlLnRlc3QuU2luZ2xlRU1GVGVzdENhc2U7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEudXRpbC5PcGVuSlBBRXhjZXB0aW9uOwoKLyoq\nCiAqIFRlc3RzIHRoYXQgY29ycmVjdCB0aW1lb3V0IGV4Y2VwdGlvbnMgYXJl\nIGJlaW5nIHRocm93biBkZXBlbmRpbmcgb24gd2hldGhlciBpdCBpcyBhIHF1\nZXJ5IG9yIGEgbG9jayBvcGVyYXRpb24uCiAqIAogKiBAYXV0aG9yIFBpbmFr\naSBQb2RkYXIKICoKICovCnB1YmxpYyBjbGFzcyBUZXN0VGltZW91dEV4Y2Vw\ndGlvbiBleHRlbmRzIFNpbmdsZUVNRlRlc3RDYXNlIHsKICAgIHByaXZhdGUg\nZmluYWwgQ2xhc3M8Pz4gZW50aXR5Q2xhc3MgPSBQT2JqZWN0LmNsYXNzOwoK\nICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgewogICAgICAgIC8vIERpc2FibGUg\ndGVzdHMgZm9yIGFueSBEQiB0aGF0IGhhcyBzdXBwb3J0c1NlbGVjdEZvclVw\nZGF0ZT09ZmFsc2UsIGxpa2UgSFNRTERpY3Rpb25hcnkKICAgICAgICBPcGVu\nSlBBRW50aXR5TWFuYWdlckZhY3RvcnlTUEkgdGVtcEVNRiA9IGVtZjsKICAg\nICAgICBpZiAodGVtcEVNRiA9PSBudWxsKSB7CiAgICAgICAgICAgIHRlbXBF\nTUYgPSBjcmVhdGVFTUYoKTsKICAgICAgICB9CiAgICAgICAgYXNzZXJ0Tm90\nTnVsbCh0ZW1wRU1GKTsKICAgICAgICBEQkRpY3Rpb25hcnkgZGljdCA9ICgo\nSkRCQ0NvbmZpZ3VyYXRpb24pdGVtcEVNRi5nZXRDb25maWd1cmF0aW9uKCkp\nLmdldERCRGljdGlvbmFyeUluc3RhbmNlKCk7CiAgICAgICAgYXNzZXJ0Tm90\nTnVsbChkaWN0KTsKICAgICAgICBpZiAoIWRpY3Quc3VwcG9ydHNTZWxlY3RG\nb3JVcGRhdGUpCiAgICAgICAgICAgIHNldFRlc3RzRGlzYWJsZWQodHJ1ZSk7\nCiAgICAgICAgaWYgKGVtZiA9PSBudWxsKSB7CiAgICAgICAgICAgIGNsb3Nl\nRU1GKHRlbXBFTUYpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGlzVGVzdHNE\naXNhYmxlZCgpKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgc3VwZXIu\nc2V0VXAoZW50aXR5Q2xhc3MsIENMRUFSX1RBQkxFUyk7CiAgICB9CiAgICAK\nICAgIHB1YmxpYyB2b2lkIHRlc3RRdWVyeVRpbWVPdXRFeGNlcHRpb25XaGls\nZVF1ZXJ5aW5nV2l0aExvY2tzT25BbHJlYWR5TG9ja2VkRW50aXRpZXMoKSB7\nCiAgICAgICAgaWYgKGdldExvZygpLmlzVHJhY2VFbmFibGVkKCkpCiAgICAg\nICAgICAgIGdldExvZygpLnRyYWNlKCIqKioqKiBFbnRlcmVkIFRlc3RUaW1l\nb3V0RXhjZXB0aW9uLiIgKwogICAgICAgICAgICAgICAgInRlc3RRdWVyeVRp\nbWVPdXRFeGNlcHRpb25XaGlsZVF1ZXJ5aW5nV2l0aExvY2tzT25BbHJlYWR5\nTG9ja2VkRW50aXRpZXMoKSIpOwogICAgICAgIEVudGl0eU1hbmFnZXIgZW0x\nID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBFbnRpdHlN\nYW5hZ2VyIGVtMiA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAg\nICAgYXNzZXJ0Tm90U2FtZShlbTEsIGVtMik7CiAgICAgICAgT2JqZWN0IG9p\nZCA9IGNyZWF0ZUVudGl0eShlbTEpOwogICAgICAgIAogICAgICAgIGVtMS5n\nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgT2JqZWN0IGVudGl0\neSA9IGVtMS5maW5kKGVudGl0eUNsYXNzLCBvaWQpOwogICAgICAgIGFzc2Vy\ndE5vdE51bGwoZW50aXR5KTsKICAgICAgICBlbTEubG9jayhlbnRpdHksIExv\nY2tNb2RlVHlwZS5QRVNTSU1JU1RJQ19XUklURSk7CiAgICAgICAgCiAgICAg\nICAgZW0yLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBmaW5h\nbCBRdWVyeSBxdWVyeSA9IGVtMi5jcmVhdGVRdWVyeSgic2VsZWN0IHAgZnJv\nbSBQT2JqZWN0IHAiKTsKICAgICAgICBxdWVyeS5zZXRMb2NrTW9kZShMb2Nr\nTW9kZVR5cGUuUEVTU0lNSVNUSUNfV1JJVEUpOwogICAgICAgIGxvbmcgdGlt\nZW91dCA9IDEwMDA7CiAgICAgICAgcXVlcnkuc2V0SGludCgiamF2YXgucGVy\nc2lzdGVuY2UucXVlcnkudGltZW91dCIsIHRpbWVvdXQpOwogICAgICAgIHRy\neSB7CiAgICAgICAgICAgIHF1ZXJ5LmdldFJlc3VsdExpc3QoKTsKICAgICAg\nICAgICAgZmFpbCgiRXhwZWN0ZWQgIiArIFF1ZXJ5VGltZW91dEV4Y2VwdGlv\nbi5jbGFzcy5nZXROYW1lKCkpOwogICAgICAgIH0gY2F0Y2ggKFRocm93YWJs\nZSB0KSB7CiAgICAgICAgICAgIGFzc2VydEVycm9yKHQsIFF1ZXJ5VGltZW91\ndEV4Y2VwdGlvbi5jbGFzcyk7CiAgICAgICAgfQogICAgICAgIAogICAgICAg\nIGFzc2VydFRydWUoZW0yLmdldFRyYW5zYWN0aW9uKCkuaXNBY3RpdmUoKSk7\nCiAgICAgICAgZW0yLmdldFRyYW5zYWN0aW9uKCkucm9sbGJhY2soKTsKICAg\nICAgICBlbTEuZ2V0VHJhbnNhY3Rpb24oKS5yb2xsYmFjaygpOwogICAgfQog\nICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0TG9ja1RpbWVPdXRFeGNlcHRpb25X\naGlsZUxvY2tpbmdBbHJlYWR5TG9ja2VkRW50aXRpZXMoKSB7CiAgICAgICAg\naWYgKGdldExvZygpLmlzVHJhY2VFbmFibGVkKCkpCiAgICAgICAgICAgIGdl\ndExvZygpLnRyYWNlKCIqKioqKiBFbnRlcmVkIFRlc3RUaW1lb3V0RXhjZXB0\naW9uLiIgKwogICAgICAgICAgICAgICAgInRlc3RMb2NrVGltZU91dEV4Y2Vw\ndGlvbldoaWxlTG9ja2luZ0FscmVhZHlMb2NrZWRFbnRpdGllcygpIik7CiAg\nICAgICAgRW50aXR5TWFuYWdlciBlbTEgPSBlbWYuY3JlYXRlRW50aXR5TWFu\nYWdlcigpOwogICAgICAgIGZpbmFsIEVudGl0eU1hbmFnZXIgZW0yID0gZW1m\nLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBhc3NlcnROb3RTYW1l\nKGVtMSwgZW0yKTsKICAgICAgICBmaW5hbCBPYmplY3Qgb2lkID0gY3JlYXRl\nRW50aXR5KGVtMSk7CiAgICAgICAgCiAgICAgICAgZW0xLmdldFRyYW5zYWN0\naW9uKCkuYmVnaW4oKTsKICAgICAgICBmaW5hbCBPYmplY3QgZW50aXR5MSA9\nIGVtMS5maW5kKGVudGl0eUNsYXNzLCBvaWQpOwogICAgICAgIGFzc2VydE5v\ndE51bGwoZW50aXR5MSk7CiAgICAgICAgZW0xLmxvY2soZW50aXR5MSwgTG9j\na01vZGVUeXBlLlBFU1NJTUlTVElDX1dSSVRFKTsKICAgICAgICAKICAgICAg\nICBlbTIuZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIGZpbmFs\nIE9iamVjdCBlbnRpdHkyID0gZW0yLmZpbmQoZW50aXR5Q2xhc3MsIG9pZCk7\nCiAgICAgICAgZmluYWwgbG9uZyB0aW1lb3V0ID0gMTAwMDsKICAgICAgICB0\ncnkgewogICAgICAgICAgICBNYXA8U3RyaW5nLE9iamVjdD4gaGludCA9IG5l\ndyBIYXNoTWFwPFN0cmluZywgT2JqZWN0PigpOwogICAgICAgICAgICBoaW50\nLnB1dCgiamF2YXgucGVyc2lzdGVuY2UubG9jay50aW1lb3V0IiwgdGltZW91\ndCk7CiAgICAgICAgICAgIGVtMi5sb2NrKGVudGl0eTIsIExvY2tNb2RlVHlw\nZS5QRVNTSU1JU1RJQ19XUklURSwgaGludCk7CiAgICAgICAgICAgIGZhaWwo\nIkV4cGVjdGVkICIgKyBQZXNzaW1pc3RpY0xvY2tFeGNlcHRpb24uY2xhc3Mu\nZ2V0TmFtZSgpKTsKICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUgdCkgewog\nICAgICAgICAgIGFzc2VydEVycm9yKHQsIFBlc3NpbWlzdGljTG9ja0V4Y2Vw\ndGlvbi5jbGFzcyk7CiAgICAgICAgfQogICAgICAgIGFzc2VydFRydWUoZW0y\nLmdldFRyYW5zYWN0aW9uKCkuaXNBY3RpdmUoKSk7CiAgICAgICAgZW0yLmdl\ndFRyYW5zYWN0aW9uKCkucm9sbGJhY2soKTsKICAgICAgICAKICAgICAgICBl\nbTEuZ2V0VHJhbnNhY3Rpb24oKS5yb2xsYmFjaygpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHRlc3RRdWVyeVRpbWVPdXRFeGNlcHRpb25XaGlsZUZpbmRX\naXRoTG9ja3NPbkFscmVhZHlMb2NrZWRFbnRpdGllcygpIHsKICAgICAgICBm\naW5hbCBpbnQgdGltZW91dCA9IDEwMDA7CiAgICAgICAgaWYgKGdldExvZygp\nLmlzVHJhY2VFbmFibGVkKCkpCiAgICAgICAgICAgIGdldExvZygpLnRyYWNl\nKCIqKioqKiBFbnRlcmVkIFRlc3RUaW1lb3V0RXhjZXB0aW9uLiIgKwogICAg\nICAgICAgICAgICAgInRlc3RRdWVyeVRpbWVPdXRFeGNlcHRpb25XaGlsZUZp\nbmRXaXRoTG9ja3NPbkFscmVhZHlMb2NrZWRFbnRpdGllcygpIik7CiAgICAg\nICAgRW50aXR5TWFuYWdlciBlbTEgPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdl\ncigpOwogICAgICAgIEVudGl0eU1hbmFnZXIgZW0yID0gZW1mLmNyZWF0ZUVu\ndGl0eU1hbmFnZXIoKTsKICAgICAgICBhc3NlcnROb3RTYW1lKGVtMSwgZW0y\nKTsKICAgICAgICBPYmplY3Qgb2lkID0gY3JlYXRlRW50aXR5KGVtMSk7CiAg\nICAgICAgCiAgICAgICAgZW0xLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsK\nICAgICAgICBPYmplY3QgZW50aXR5ID0gZW0xLmZpbmQoZW50aXR5Q2xhc3Ms\nIG9pZCk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChlbnRpdHkpOwogICAgICAg\nIGVtMS5sb2NrKGVudGl0eSwgTG9ja01vZGVUeXBlLlBFU1NJTUlTVElDX1dS\nSVRFKTsKICAgICAgICAKICAgICAgICBlbTIuZ2V0VHJhbnNhY3Rpb24oKS5i\nZWdpbigpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIE1hcDxTdHJpbmcs\nT2JqZWN0PiBoaW50ID0gbmV3IEhhc2hNYXA8U3RyaW5nLCBPYmplY3Q+KCk7\nCiAgICAgICAgICAgIGhpbnQucHV0KCJqYXZheC5wZXJzaXN0ZW5jZS5sb2Nr\nLnRpbWVvdXQiLCB0aW1lb3V0KTsKICAgICAgICAgICAgLy9lbTIuc2V0UHJv\ncGVydHkoImphdmF4LnBlcnNpc3RlbmNlLmxvY2sudGltZW91dCIsIHRpbWVv\ndXQpOwoKICAgICAgICAgICAgZW0yLmZpbmQoZW50aXR5Q2xhc3MsIG9pZCwg\nTG9ja01vZGVUeXBlLlBFU1NJTUlTVElDX1dSSVRFLCBoaW50KTsKICAgICAg\nICAgICAgZmFpbCgiRXhwZWN0ZWQgIiArIExvY2tUaW1lb3V0RXhjZXB0aW9u\nLmNsYXNzLmdldE5hbWUoKSk7CiAgICAgICAgfSBjYXRjaCAoVGhyb3dhYmxl\nIHQpIHsKICAgICAgICAgICAgYXNzZXJ0RXJyb3IodCwgTG9ja1RpbWVvdXRF\neGNlcHRpb24uY2xhc3MpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBh\nc3NlcnRUcnVlKGVtMi5nZXRUcmFuc2FjdGlvbigpLmlzQWN0aXZlKCkpOwog\nICAgICAgIGVtMi5nZXRUcmFuc2FjdGlvbigpLnJvbGxiYWNrKCk7CiAgICAg\nICAgZW0xLmdldFRyYW5zYWN0aW9uKCkucm9sbGJhY2soKTsKICAgIH0KICAg\nIAogICAgcHVibGljIE9iamVjdCBjcmVhdGVFbnRpdHkoRW50aXR5TWFuYWdl\nciBlbSkgewogICAgICAgIGxvbmcgaWQgPSBTeXN0ZW0ubmFub1RpbWUoKTsK\nICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAg\nUE9iamVjdCBwYyA9IG5ldyBQT2JqZWN0KCk7CiAgICAgICAgcGMuc2V0SWQo\naWQpOwogICAgICAgIGVtLnBlcnNpc3QocGMpOwogICAgICAgIGVtLmdldFRy\nYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgcmV0dXJuIGlkOwogICAg\nfQogICAgCiAgICAKICAgIC8qKgogICAgICogQXNzZXJ0IHRoYXQgYW4gZXhj\nZXB0aW9uIG9mIHByb3BlciB0eXBlIGhhcyBiZWVuIHRocm93bi4KICAgICAq\nIEFsc28gY2hlY2tzIHRoYXQgdGhhdCB0aGUgZXhjZXB0aW9uIGhhcyBwb3B1\nbGF0ZWQgdGhlIGZhaWxlZCBvYmplY3QuCiAgICAgKiBAcGFyYW0gYWN0dWFs\nIGV4Y2VwdGlvbiBiZWluZyB0aHJvd24KICAgICAqIEBwYXJhbSBleHBlY2V0\nZWQgdHlwZSBvZiB0aGUgZXhjZXB0aW9uCiAgICAgKi8KICAgIHZvaWQgYXNz\nZXJ0RXJyb3IoVGhyb3dhYmxlIGFjdHVhbCwgQ2xhc3M8PyBleHRlbmRzIFRo\ncm93YWJsZT4gZXhwZWN0ZWQpIHsKICAgICAgICBpZiAoIWV4cGVjdGVkLmlz\nQXNzaWduYWJsZUZyb20oYWN0dWFsLmdldENsYXNzKCkpKSB7CiAgICAgICAg\nICAgIGdldExvZygpLmVycm9yKCJUZXN0VGltZW91dEV4Y2VwdGlvbi5hc3Nl\ncnRFcnJvcigpIC0gdW5leHBlY3RlZCBleGNlcHRpb24gdHlwZSIsIGFjdHVh\nbCk7CiAgICAgICAgICAgIC8vYWN0dWFsLnByaW50U3RhY2tUcmFjZSgpOwog\nICAgICAgICAgICBwcmludChhY3R1YWwsIDApOwogICAgICAgICAgICBmYWls\nKGFjdHVhbC5nZXRDbGFzcygpLmdldE5hbWUoKSArICIgd2FzIHJhaXNlZCBi\ndXQgZXhwZWN0ZWQgIiArIGV4cGVjdGVkLmdldE5hbWUoKSk7CiAgICAgICAg\nfQogICAgICAgIE9iamVjdCBmYWlsZWQgPSBnZXRGYWlsZWRPYmplY3QoYWN0\ndWFsKTsKICAgICAgICBhc3NlcnROb3ROdWxsKCJGYWlsZWQgb2JqZWN0IGlz\nIG51bGwiLCBmYWlsZWQpOwogICAgICAgIGFzc2VydE5vdEVxdWFscygibnVs\nbCIsIGZhaWxlZCk7CiAgICB9IAogICAgCiAgICBPYmplY3QgZ2V0RmFpbGVk\nT2JqZWN0KFRocm93YWJsZSBlKSB7CiAgICAgICAgaWYgKGUgPT0gbnVsbCkg\newogICAgICAgICAgICBnZXRMb2coKS5lcnJvcigiVGVzdFRpbWVvdXRFeGNl\ncHRpb24uZ2V0RmFpbGVkT2JqZWN0KCkgLSBPYmplY3QgZSB3YXMgbnVsbCIp\nOwogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9IGVsc2UgaWYg\nKGUgaW5zdGFuY2VvZiBMb2NrVGltZW91dEV4Y2VwdGlvbikgewogICAgICAg\nICAgICByZXR1cm4gKChMb2NrVGltZW91dEV4Y2VwdGlvbikgZSkuZ2V0T2Jq\nZWN0KCk7CiAgICAgICAgfSBlbHNlIGlmIChlIGluc3RhbmNlb2YgUGVzc2lt\naXN0aWNMb2NrRXhjZXB0aW9uKSB7CiAgICAgICAgICAgIHJldHVybiAoKFBl\nc3NpbWlzdGljTG9ja0V4Y2VwdGlvbikgZSkuZ2V0RW50aXR5KCk7CiAgICAg\nICAgfSBlbHNlIGlmIChlIGluc3RhbmNlb2YgUXVlcnlUaW1lb3V0RXhjZXB0\naW9uKSB7CiAgICAgICAgICAgIHJldHVybiAoKFF1ZXJ5VGltZW91dEV4Y2Vw\ndGlvbikgZSkuZ2V0UXVlcnkoKTsKICAgICAgICB9IGVsc2UgaWYgKGUgaW5z\ndGFuY2VvZiBPcGVuSlBBRXhjZXB0aW9uKSB7CiAgICAgICAgICAgIHJldHVy\nbiAoKE9wZW5KUEFFeGNlcHRpb24pIGUpLmdldEZhaWxlZE9iamVjdCgpOwog\nICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGdldExvZygpLmVycm9yKCJU\nZXN0VGltZW91dEV4Y2VwdGlvbi5nZXRGYWlsZWRPYmplY3QoKSAtIHVuZXhw\nZWN0ZWQgZXhjZXB0aW9uIHR5cGUiLCBlKTsKICAgICAgICAgICAgcmV0dXJu\nIG51bGw7CiAgICAgICAgfQogICAgfQoKICAgIHZvaWQgcHJpbnQoVGhyb3dh\nYmxlIHQsIGludCB0YWIpIHsKICAgICAgICBpZiAodCA9PSBudWxsKSByZXR1\ncm47CiAgICAgICAgU3RyaW5nQnVpbGRlciBzdHIgPSBuZXcgU3RyaW5nQnVp\nbGRlcig4MCk7CiAgICAgICAgZm9yIChpbnQgaT0wOyBpPHRhYio0O2krKykK\nICAgICAgICAgICAgc3RyLmFwcGVuZCgiICIpOwogICAgICAgIFN0cmluZyBz\ncWxTdGF0ZSA9ICh0IGluc3RhbmNlb2YgU1FMRXhjZXB0aW9uKSA/IAogICAg\nICAgICAgICAiKFNRTFN0YXRlPSIgKyAoKFNRTEV4Y2VwdGlvbil0KS5nZXRT\nUUxTdGF0ZSgpICsgIjoiIAogICAgICAgICAgICAgICAgKyB0LmdldE1lc3Nh\nZ2UoKSArICIpIiA6ICIiOwogICAgICAgIHN0ci5hcHBlbmQodC5nZXRDbGFz\ncygpLmdldE5hbWUoKSArIHNxbFN0YXRlKTsKICAgICAgICBnZXRMb2coKS5l\ncnJvcihzdHIpOwogICAgICAgIGlmICh0LmdldENhdXNlKCkgPT0gdCkgCiAg\nICAgICAgICAgIHJldHVybjsKICAgICAgICBwcmludCh0LmdldENhdXNlKCks\nIHRhYisxKTsKICAgIH0KCn0K\n","encoding":"base64"}

