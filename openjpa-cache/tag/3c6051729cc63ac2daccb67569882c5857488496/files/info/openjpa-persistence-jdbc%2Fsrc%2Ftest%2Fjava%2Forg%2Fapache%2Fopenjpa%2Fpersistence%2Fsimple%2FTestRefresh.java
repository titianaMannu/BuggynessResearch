{"sha":"cd63aedb354488397bda6d1c251a7e5e02bd3765","node_id":"MDQ6QmxvYjIwNjM2NDpjZDYzYWVkYjM1NDQ4ODM5N2JkYTZkMWMyNTFhN2U1ZTAyYmQzNzY1","size":9485,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/cd63aedb354488397bda6d1c251a7e5e02bd3765","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uuc2ltcGxl\nOwoKaW1wb3J0IGphdmEudXRpbC5IYXNoTWFwOwppbXBvcnQgamF2YS51dGls\nLk1hcDsKCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5DYWNoZVJldHJpZXZl\nTW9kZTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkNhY2hlU3RvcmVNb2Rl\nOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5KUEFQ\ncm9wZXJ0aWVzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3Rl\nbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnBlcnNpc3RlbmNlLnRlc3QuU2luZ2xlRU1UZXN0Q2FzZTsKCnB1\nYmxpYyBjbGFzcyBUZXN0UmVmcmVzaCBleHRlbmRzIFNpbmdsZUVNVGVzdENh\nc2UgewoKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgewogICAgICAgIHN1cGVy\nLnNldFVwKENMRUFSX1RBQkxFUywgSXRlbS5jbGFzcywgCiAgICAgICAgICAg\nICAib3BlbmpwYS5BdXRvRGV0YWNoIiwgImNvbW1pdCIsCiAgICAgICAgICAg\nICAib3BlbmpwYS5EYXRhQ2FjaGUiLCAidHJ1ZSIsCiAgICAgICAgICAgICAi\nb3BlbmpwYS5SZW1vdGVDb21taXRQcm92aWRlciIsICJzanZtIik7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgdGVzdEZsdXNoUmVmcmVzaE5ld0luc3RhbmNl\nKCkgewogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAg\nICAgICBJdGVtIGl0ZW0gPSBuZXcgSXRlbSgpOwogICAgICAgIGl0ZW0uc2V0\nSXRlbURhdGEoIlRlc3QgRGF0YSIpOwogICAgICAgIGVtLnBlcnNpc3QoaXRl\nbSk7CiAgICAgICAgZW0uZmx1c2goKTsKICAgICAgICBlbS5yZWZyZXNoKGl0\nZW0pOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKCJUZXN0IERhdGEiLCBpdGVtLmdldEl0ZW1E\nYXRhKCkpOwogICAgfQogICAgCiAgICAvKioKICAgICAqIFJlZnJlc2ggYWx3\nYXlzIGJ5cGFzcyBMMiBjYWNoZS4KICAgICAqIEFjY29yZGluZyB0byBKUEEg\nMi4wIFNwZWMgU2VjdGlvbiAzLjcuMjoKICAgICAqICJUaGUgcmV0cmlldmVN\nb2RlIHByb3BlcnR5IGlzIGlnbm9yZWQgZm9yIHRoZSByZWZyZXNoIG1ldGhv\nZCwKICAgICAqICB3aGljaCBhbHdheXMgY2F1c2VzIGRhdGEgdG8gYmUgcmV0\ncmlldmVkIGZyb20gdGhlIGRhdGFiYXNlLCBub3QgdGhlIGNhY2hlLiIKICAg\nICAqLwogICAgcHVibGljIHZvaWQgdGVzdFJlZnJlc2hCeXBhc3NMMkNhY2hl\nKCkgewogICAgICAgIFN0cmluZyBvcmlnaW5hbCA9ICJPcmlnaW5hbCBMMiBD\nYWNoZWQgRGF0YSI7CiAgICAgICAgU3RyaW5nIHNuZWFrVXBkYXRlID0gIlNu\nZWFrIFVwZGF0ZSI7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdp\nbigpOwogICAgICAgIEl0ZW0gaXRlbSA9IG5ldyBJdGVtKCk7CiAgICAgICAg\naXRlbS5zZXRJdGVtRGF0YShvcmlnaW5hbCk7CiAgICAgICAgZW0ucGVyc2lz\ndChpdGVtKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgp\nOwogICAgICAgIGFzc2VydENhY2hlZChJdGVtLmNsYXNzLCBpdGVtLmdldEl0\nZW1JZCgpKTsKICAgICAgICAKICAgICAgICAvLyBTbmVha2lseSB1cGRhdGUg\nd2l0aCBTUUwKICAgICAgICBTdHJpbmcgc3FsID0gIlVQREFURSBJX0lURU0g\nU0VUIElfREFUQT0/MSBXSEVSRSBJX0lEPT8yIjsKICAgICAgICBlbS5nZXRU\ncmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgaW50IHVwZGF0ZUNvdW50\nID0gZW0uY3JlYXRlTmF0aXZlUXVlcnkoc3FsKQogICAgICAgICAgICAuc2V0\nUGFyYW1ldGVyKDEsIHNuZWFrVXBkYXRlKQogICAgICAgICAgICAuc2V0UGFy\nYW1ldGVyKDIsIGl0ZW0uZ2V0SXRlbUlkKCkpCiAgICAgICAgICAgIC5leGVj\ndXRlVXBkYXRlKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIHVwZGF0ZUNv\ndW50KTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwog\nICAgICAgIAogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsK\nICAgICAgICAvLyBGaW5kIHdpbGwgZmluZCB0aGUgTDIgY2FjaGVkIGRhdGEK\nICAgICAgICBpdGVtID0gZW0uZmluZChJdGVtLmNsYXNzLCBpdGVtLmdldEl0\nZW1JZCgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMob3JpZ2luYWwsIGl0ZW0u\nZ2V0SXRlbURhdGEoKSk7CiAgICAgICAgLy8gQnV0IHJlZnJlc2ggd2lsbCBn\nZXQgdGhlIGFjdHVhbCBkYXRhYmFzZSByZWNvcmQKICAgICAgICBlbS5yZWZy\nZXNoKGl0ZW0pOwogICAgICAgIGFzc2VydEVxdWFscyhzbmVha1VwZGF0ZSwg\naXRlbS5nZXRJdGVtRGF0YSgpKTsKCiAgICAgICAgLy8gRXZlbiBpZiBjYWNo\nZSByZXRyaWV2ZSBtb2RlIGlzIHNldCB0byBVU0UKICAgICAgICBlbS5zZXRQ\ncm9wZXJ0eShKUEFQcm9wZXJ0aWVzLkNBQ0hFX1JFVFJJRVZFX01PREUsIENh\nY2hlUmV0cmlldmVNb2RlLlVTRSk7CiAgICAgICAgZW0ucmVmcmVzaChpdGVt\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoc25lYWtVcGRhdGUsIGl0ZW0uZ2V0\nSXRlbURhdGEoKSk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5yb2xs\nYmFjaygpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0Q2FjaGVS\nZXRyaWV2ZU1vZGVTZXR0aW5nKCkgewogICAgICAgIE9wZW5KUEFFbnRpdHlN\nYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAg\nICBlbS5zZXRQcm9wZXJ0eShKUEFQcm9wZXJ0aWVzLkNBQ0hFX1JFVFJJRVZF\nX01PREUsIENhY2hlUmV0cmlldmVNb2RlLlVTRSk7CiAgICAgICAgTWFwPFN0\ncmluZywgT2JqZWN0PiBwcm9wZXJ0aWVzID0gZW0uZ2V0UHJvcGVydGllcygp\nOwogICAgICAgIGlmICghcHJvcGVydGllcy5jb250YWluc0tleShKUEFQcm9w\nZXJ0aWVzLkNBQ0hFX1JFVFJJRVZFX01PREUpKSB7CiAgICAgICAgICAgIFN5\nc3RlbS5lcnIucHJpbnRsbihwcm9wZXJ0aWVzKTsKICAgICAgICAgICAgZmFp\nbCgiRXhwZWN0ZWQgIiArIEpQQVByb3BlcnRpZXMuQ0FDSEVfUkVUUklFVkVf\nTU9ERSArICIgcHJvcGVydGllcyBiZSByZXR1cm5lZCIpOwogICAgICAgIH0K\nICAgICAgICBPYmplY3QgbW9kZSA9IHByb3BlcnRpZXMuZ2V0KEpQQVByb3Bl\ncnRpZXMuQ0FDSEVfUkVUUklFVkVfTU9ERSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKG1vZGUsIENhY2hlUmV0cmlldmVNb2RlLlVTRSk7CiAgICB9CiAgICAK\nICAgIHB1YmxpYyB2b2lkIHRlc3RDYWNoZVN0b3JlTW9kZVNldHRpbmcoKSB7\nCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLnNldFByb3BlcnR5KEpQQVBy\nb3BlcnRpZXMuQ0FDSEVfU1RPUkVfTU9ERSwgQ2FjaGVTdG9yZU1vZGUuVVNF\nKTsKICAgICAgICBNYXA8U3RyaW5nLCBPYmplY3Q+IHByb3BlcnRpZXMgPSBl\nbS5nZXRQcm9wZXJ0aWVzKCk7CiAgICAgICAgaWYgKCFwcm9wZXJ0aWVzLmNv\nbnRhaW5zS2V5KEpQQVByb3BlcnRpZXMuQ0FDSEVfU1RPUkVfTU9ERSkpIHsK\nICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKHByb3BlcnRpZXMpOwog\nICAgICAgICAgICBmYWlsKCJFeHBlY3RlZCAiICsgSlBBUHJvcGVydGllcy5D\nQUNIRV9TVE9SRV9NT0RFICsgIiBwcm9wZXJ0aWVzIGJlIHJldHVybmVkIik7\nCiAgICAgICAgfQogICAgICAgIE9iamVjdCBtb2RlID0gcHJvcGVydGllcy5n\nZXQoSlBBUHJvcGVydGllcy5DQUNIRV9TVE9SRV9NT0RFKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMobW9kZSwgQ2FjaGVTdG9yZU1vZGUuVVNFKTsKICAgIH0K\nICAgIAogICAgcHVibGljIHZvaWQgdGVzdFJlZnJlc2hBZnRlclJlbW92ZSgp\nIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBlbS5nZXRUcmFuc2FjdGlv\nbigpLmJlZ2luKCk7CiAgICAgICAgICAgIEl0ZW0gaXRlbSA9IG5ldyBJdGVt\nKCk7CiAgICAgICAgICAgIGl0ZW0uc2V0SXRlbURhdGEoIlRlc3QgRGF0YSIp\nOwogICAgICAgICAgICBlbS5wZXJzaXN0KGl0ZW0pOwogICAgICAgICAgICBl\nbS5mbHVzaCgpOwogICAgICAgICAgICBlbS5yZW1vdmUoaXRlbSk7CiAgICAg\nICAgICAgIGVtLmZsdXNoKCk7CiAgICAgICAgICAgIGVtLnJlZnJlc2goaXRl\nbSk7CiAgICAgICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7\nCiAgICAgICAgICAgIGZhaWwoIkRpZCBub3QgY2F0Y2ggZXhwZWN0ZWQgSWxs\nZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGZvciByZWZyZXNoKCkgb2YgcmVtb3Zl\nZCBlbnRpdHkiKTsKICAgICAgICB9IGNhdGNoIChJbGxlZ2FsQXJndW1lbnRF\neGNlcHRpb24gZSkgewogICAgICAgICAgICAvLyBFeHBlY3RlZCBleGNlcHRp\nb24KICAgICAgICB9CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RG\naW5kV2l0aENhY2hlUmV0cmlldmVQcm9wZXJ0eSgpIHsKICAgICAgICBTdHJp\nbmcga2V5ID0gIlRlc3QgcHJvcGVydHkgaW4gZmluZC4iOwogICAgICAgIE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAg\nICAgICAgSXRlbSBpdGVtID0gbmV3IEl0ZW0oKTsKICAgICAgICBpdGVtLnNl\ndEl0ZW1EYXRhKGtleSk7CiAgICAgICAgZW0ucGVyc2lzdChpdGVtKTsKICAg\nICAgICBlbS5mbHVzaCgpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCku\nY29tbWl0KCk7CiAgICAgICAgaW50IGlkID0gaXRlbS5nZXRJdGVtSWQoKTsK\nICAgICAgICBlbS5jbGVhcigpOwogICAgICAgIGVtZi5nZXRDYWNoZSgpLmV2\naWN0QWxsKCk7CgogICAgICAgIGFzc2VydEVxdWFscyhrZXksIGl0ZW0uZ2V0\nSXRlbURhdGEoKSk7CgogICAgICAgIGVtLnNldFByb3BlcnR5KEpQQVByb3Bl\ncnRpZXMuQ0FDSEVfU1RPUkVfTU9ERSwgQ2FjaGVTdG9yZU1vZGUuVVNFKTsK\nICAgICAgICBlbS5zZXRQcm9wZXJ0eShKUEFQcm9wZXJ0aWVzLkNBQ0hFX1JF\nVFJJRVZFX01PREUsIENhY2hlUmV0cmlldmVNb2RlLlVTRSk7CiAgICAgICAg\nTWFwPFN0cmluZywgT2JqZWN0PiBwcm9wZXJ0aWVzID0gZW0uZ2V0UHJvcGVy\ndGllcygpOwogICAgICAgIGlmICghcHJvcGVydGllcy5jb250YWluc0tleShK\nUEFQcm9wZXJ0aWVzLkNBQ0hFX1NUT1JFX01PREUpKSB7CiAgICAgICAgICAg\nIFN5c3RlbS5lcnIucHJpbnRsbihwcm9wZXJ0aWVzKTsKICAgICAgICAgICAg\nZmFpbCgiRXhwZWN0ZWQgIiArIEpQQVByb3BlcnRpZXMuQ0FDSEVfU1RPUkVf\nTU9ERSArICIgcHJvcGVydGllcyBiZSByZXR1cm5lZCIpOwogICAgICAgIH0K\nICAgICAgICBpZiAoIXByb3BlcnRpZXMuY29udGFpbnNLZXkoSlBBUHJvcGVy\ndGllcy5DQUNIRV9SRVRSSUVWRV9NT0RFKSkgewogICAgICAgICAgICBTeXN0\nZW0uZXJyLnByaW50bG4ocHJvcGVydGllcyk7CiAgICAgICAgICAgIGZhaWwo\nIkV4cGVjdGVkICIgKyBKUEFQcm9wZXJ0aWVzLkNBQ0hFX1JFVFJJRVZFX01P\nREUgKyAiIHByb3BlcnRpZXMgYmUgcmV0dXJuZWQiKTsKICAgICAgICB9CiAg\nICAgICAgTWFwPFN0cmluZywgT2JqZWN0PiBwYXJhbVByb3BlcnRpZXMgPSBu\nZXcgSGFzaE1hcDxTdHJpbmcsIE9iamVjdD4oKTsKICAgICAgICBwYXJhbVBy\nb3BlcnRpZXMucHV0KEpQQVByb3BlcnRpZXMuQ0FDSEVfU1RPUkVfTU9ERSwg\nQ2FjaGVTdG9yZU1vZGUuQllQQVNTKTsKICAgICAgICBwYXJhbVByb3BlcnRp\nZXMucHV0KEpQQVByb3BlcnRpZXMuQ0FDSEVfUkVUUklFVkVfTU9ERSwgQ2Fj\naGVSZXRyaWV2ZU1vZGUuQllQQVNTKTsKICAgICAgICBJdGVtIGZJdGVtID0g\nZW0uZmluZChJdGVtLmNsYXNzLCBpZCwgcGFyYW1Qcm9wZXJ0aWVzKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoZkl0ZW0uZ2V0SXRlbURhdGEoKSwga2V5KTsK\nICAgICAgICBhc3NlcnROb3RDYWNoZWQoSXRlbS5jbGFzcywgaWQpOwoKICAg\nICAgICBPYmplY3QgbW9kZSA9IGVtLmdldFByb3BlcnRpZXMoKS5nZXQoSlBB\nUHJvcGVydGllcy5DQUNIRV9TVE9SRV9NT0RFKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMobW9kZSwgQ2FjaGVTdG9yZU1vZGUuVVNFKTsgICAgICAgIAogICAg\nICAgIG1vZGUgPSBlbS5nZXRQcm9wZXJ0aWVzKCkuZ2V0KEpQQVByb3BlcnRp\nZXMuQ0FDSEVfUkVUUklFVkVfTU9ERSk7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKG1vZGUsIENhY2hlUmV0cmlldmVNb2RlLlVTRSk7ICAgICAgICAKICAgIH0K\nICAgIAogICAgcHVibGljIHZvaWQgdGVzdFJlZnJlc2hXaXRoQ2FjaGVSZXRy\naWV2ZVByb3BlcnR5KCkgewogICAgICAgIFN0cmluZyBrZXkgPSAiVGVzdCBw\ncm9wZXJ0eSBpbiByZWZyZXNoLiI7CiAgICAgICAgU3RyaW5nIHVwZGF0ZWRL\nZXkgPSAiVXBkYXRlZCB0ZXN0IHByb3BlcnR5IGluIHJlZnJlc2guIjsKICAg\nICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRp\ndHlNYW5hZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdp\nbigpOwogICAgICAgIEl0ZW0gaXRlbSA9IG5ldyBJdGVtKCk7CiAgICAgICAg\naXRlbS5zZXRJdGVtRGF0YShrZXkpOwogICAgICAgIGVtLnBlcnNpc3QoaXRl\nbSk7CiAgICAgICAgZW0uZmx1c2goKTsKICAgICAgICBlbS5nZXRUcmFuc2Fj\ndGlvbigpLmNvbW1pdCgpOwogICAgICAgIGFzc2VydEVxdWFscyhrZXksIGl0\nZW0uZ2V0SXRlbURhdGEoKSk7CiAgICAgICAgCiAgICAgICAgaW50IGlkID0g\naXRlbS5nZXRJdGVtSWQoKTsKICAgICAgICBlbWYuZ2V0Q2FjaGUoKS5ldmlj\ndEFsbCgpOwoKICAgICAgICBhc3NlcnRFcXVhbHMoa2V5LCBpdGVtLmdldEl0\nZW1EYXRhKCkpOwoKICAgICAgICBlbS5zZXRQcm9wZXJ0eShKUEFQcm9wZXJ0\naWVzLkNBQ0hFX1NUT1JFX01PREUsIENhY2hlU3RvcmVNb2RlLlVTRSk7CiAg\nICAgICAgZW0uc2V0UHJvcGVydHkoSlBBUHJvcGVydGllcy5DQUNIRV9SRVRS\nSUVWRV9NT0RFLCBDYWNoZVJldHJpZXZlTW9kZS5VU0UpOwogICAgICAgIE1h\ncDxTdHJpbmcsIE9iamVjdD4gcHJvcGVydGllcyA9IGVtLmdldFByb3BlcnRp\nZXMoKTsKICAgICAgICBpZiAoIXByb3BlcnRpZXMuY29udGFpbnNLZXkoSlBB\nUHJvcGVydGllcy5DQUNIRV9TVE9SRV9NT0RFKSkgewogICAgICAgICAgICBT\neXN0ZW0uZXJyLnByaW50bG4ocHJvcGVydGllcyk7CiAgICAgICAgICAgIGZh\naWwoIkV4cGVjdGVkICIgKyBKUEFQcm9wZXJ0aWVzLkNBQ0hFX1NUT1JFX01P\nREUgKyAiIHByb3BlcnRpZXMgYmUgcmV0dXJuZWQiKTsKICAgICAgICB9CiAg\nICAgICAgaWYgKCFwcm9wZXJ0aWVzLmNvbnRhaW5zS2V5KEpQQVByb3BlcnRp\nZXMuQ0FDSEVfUkVUUklFVkVfTU9ERSkpIHsKICAgICAgICAgICAgU3lzdGVt\nLmVyci5wcmludGxuKHByb3BlcnRpZXMpOwogICAgICAgICAgICBmYWlsKCJF\neHBlY3RlZCAiICsgSlBBUHJvcGVydGllcy5DQUNIRV9SRVRSSUVWRV9NT0RF\nICsgIiBwcm9wZXJ0aWVzIGJlIHJldHVybmVkIik7CiAgICAgICAgfQogICAg\nICAgIE1hcDxTdHJpbmcsIE9iamVjdD4gcGFyYW1Qcm9wZXJ0aWVzID0gbmV3\nIEhhc2hNYXA8U3RyaW5nLCBPYmplY3Q+KCk7CiAgICAgICAgcGFyYW1Qcm9w\nZXJ0aWVzLnB1dChKUEFQcm9wZXJ0aWVzLkNBQ0hFX1NUT1JFX01PREUsIENh\nY2hlU3RvcmVNb2RlLkJZUEFTUyk7CiAgICAgICAgcGFyYW1Qcm9wZXJ0aWVz\nLnB1dChKUEFQcm9wZXJ0aWVzLkNBQ0hFX1JFVFJJRVZFX01PREUsIENhY2hl\nUmV0cmlldmVNb2RlLkJZUEFTUyk7CiAgICAgICAgSXRlbSBmSXRlbSA9IGVt\nLmZpbmQoSXRlbS5jbGFzcywgaWQsIHBhcmFtUHJvcGVydGllcyk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKGtleSwgZkl0ZW0uZ2V0SXRlbURhdGEoKSk7CiAg\nICAgICAgYXNzZXJ0Tm90Q2FjaGVkKEl0ZW0uY2xhc3MsIGlkKTsKCiAgICAg\nICAgZkl0ZW0uc2V0SXRlbURhdGEodXBkYXRlZEtleSk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKHVwZGF0ZWRLZXksIGZJdGVtLmdldEl0ZW1EYXRhKCkpOwoK\nICAgICAgICBlbS5yZWZyZXNoKGZJdGVtLCBwYXJhbVByb3BlcnRpZXMpOwog\nICAgICAgIGFzc2VydEVxdWFscyhrZXksIGZJdGVtLmdldEl0ZW1EYXRhKCkp\nOwogICAgICAgIGFzc2VydE5vdENhY2hlZChJdGVtLmNsYXNzLCBpZCk7Cgog\nICAgICAgIE9iamVjdCBtb2RlID0gZW0uZ2V0UHJvcGVydGllcygpLmdldChK\nUEFQcm9wZXJ0aWVzLkNBQ0hFX1NUT1JFX01PREUpOwogICAgICAgIGFzc2Vy\ndEVxdWFscyhtb2RlLCBDYWNoZVN0b3JlTW9kZS5VU0UpOyAgICAgICAgCiAg\nICAgICAgbW9kZSA9IGVtLmdldFByb3BlcnRpZXMoKS5nZXQoSlBBUHJvcGVy\ndGllcy5DQUNIRV9SRVRSSUVWRV9NT0RFKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMobW9kZSwgQ2FjaGVSZXRyaWV2ZU1vZGUuVVNFKTsgICAgICAgIAogICAg\nfQoKICAgIHZvaWQgYXNzZXJ0Q2FjaGVkKENsYXNzPD8+IGNscywgT2JqZWN0\nIG9pZCkgewogICAgICAgIGFzc2VydFRydWUoY2xzICsgIjoiICsgb2lkICsg\nIiBzaG91bGQgYmUgaW4gTDIgY2FjaGUsIGJ1dCBub3QiLCBlbWYuZ2V0Q2Fj\naGUoKS5jb250YWlucyhjbHMsIG9pZCkpOwogICAgfQogICAgCiAgICB2b2lk\nIGFzc2VydE5vdENhY2hlZChDbGFzczw/PiBjbHMsIE9iamVjdCBvaWQpIHsK\nICAgICAgICBhc3NlcnRUcnVlKGNscyArICI6IiArIG9pZCArICIgc2hvdWxk\nIG5vdCBiZSBpbiBMMiBjYWNoZSwgYnV0IGlzIiwgIWVtZi5nZXRDYWNoZSgp\nLmNvbnRhaW5zKGNscywgb2lkKSk7CiAgICB9CiAgICAKfQo=\n","encoding":"base64"}

