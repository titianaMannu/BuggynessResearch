{"sha":"c108abaccc4680246df4a22a336e00373aa0a076","node_id":"MDQ6QmxvYjIwNjM2NDpjMTA4YWJhY2NjNDY4MDI0NmRmNGEyMmEzMzZlMDAzNzNhYTBhMDc2","size":4176,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/c108abaccc4680246df4a22a336e00373aa0a076","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5sb2NrbWdyOwoK\naW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXI7CmltcG9y\ndCBqYXZheC5wZXJzaXN0ZW5jZS5RdWVyeTsKCmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEucGVyc2lzdGVuY2UuVHJhbnNhY3Rpb25SZXF1aXJlZEV4Y2Vw\ndGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS50\nZXN0LkFsbG93RmFpbHVyZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5w\nZXJzaXN0ZW5jZS50ZXN0LlNRTExpc3RlbmVyVGVzdENhc2U7CgovKioKICog\nVGVzdHMgdGhlIGxvY2sgbW9kZSBvbiBuYW1lZCBxdWVyeSBlbWl0cyBhIEZP\nUiBVUERBVEUgY2xhdXNlIGluIHRhcmdldCBTUUwKICogcXVlcnkuCiAqIAog\nKiAKICovCnB1YmxpYyBjbGFzcyBUZXN0TmFtZWRRdWVyeUxvY2tNb2RlIGV4\ndGVuZHMgU1FMTGlzdGVuZXJUZXN0Q2FzZSB7CiAgICBwdWJsaWMgdm9pZCBz\nZXRVcCgpIHsKICAgICAgICBzdXBlci5zZXRVcChDTEVBUl9UQUJMRVMsIExv\nY2tFbXBsb3llZS5jbGFzcywgCiAgICAgICAgICAgICJvcGVuanBhLkxvY2tN\nYW5hZ2VyIiwgInBlc3NpbWlzdGljIiwgCiAgICAgICAgICAgICJvcGVuanBh\nLk9wdGltaXN0aWMiLCAiZmFsc2UiCiAgICAgICAgICAgICk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgdGVzdEZvclVwZGF0ZUNsYXVzZVByZXNlbnRJbk5h\nbWVkUXVlcnlXaXRoTG9ja01vZGUoKSB7CiAgICAgICAgRW50aXR5TWFuYWdl\nciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIGFzc2VydENsYXVz\nZVByZXNlbnRJblNRTCgiRk9SIFVQREFURSIsIGVtLmNyZWF0ZU5hbWVkUXVl\ncnkoImZpbmRFbXBsb3llZUJ5SWRXaXRoTG9jayIpLnNldFBhcmFtZXRlcigi\naWQiLCAwKSk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5yb2xsYmFj\naygpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAg\nICAgICBhc3NlcnRDbGF1c2VQcmVzZW50SW5TUUwoIkZPUiBVUERBVEUiLCBl\nbS5jcmVhdGVOYW1lZFF1ZXJ5KCJmaW5kRW1wbG95ZWVCeUlkV2l0aExvY2si\nKS5zZXRQYXJhbWV0ZXIoImlkIiwgMCkpOwogICAgICAgIGVtLmdldFRyYW5z\nYWN0aW9uKCkucm9sbGJhY2soKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlv\nbigpLmJlZ2luKCk7CiAgICAgICAgYXNzZXJ0Q2xhdXNlUHJlc2VudEluU1FM\nKCJGT1IgVVBEQVRFIiwgZW0uY3JlYXRlTmFtZWRRdWVyeSgiZmluZEVtcGxv\neWVlQnlJZFdpdGhMb2NrIikuc2V0UGFyYW1ldGVyKCJpZCIsIDApKTsKICAg\nICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLnJvbGxiYWNrKCk7CiAgICB9Cgog\nICAgQEFsbG93RmFpbHVyZQogICAgcHVibGljIHZvaWQgdGVzdE5hbWVkUXVl\ncnlXaXRoTG9ja01vZGVNdXN0RXhlY3V0ZUluVHJhbnNhY3Rpb24oKSB7CiAg\nICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgLy8gZXhlY3V0ZSB3aXRob3V0IGEgdHJhbnNhY3Rp\nb24KICAgICAgICAgdHJ5IHsKICAgICAgICAgZW0uY3JlYXRlTmFtZWRRdWVy\neSgiZmluZEVtcGxveWVlQnlJZFdpdGhMb2NrIikuc2V0UGFyYW1ldGVyKCJp\nZCIsCiAgICAgICAgIDApLmdldFJlc3VsdExpc3QoKTsKICAgICAgICAgZmFp\nbCgiRXhwZWN0ZWQgIiArIFRyYW5zYWN0aW9uUmVxdWlyZWRFeGNlcHRpb24u\nY2xhc3MuZ2V0TmFtZSgpKTsKICAgICAgICAgfSBjYXRjaCAoVHJhbnNhY3Rp\nb25SZXF1aXJlZEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgIC8vIEV4cGVjdGVk\nCiAgICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0Rm9yVXBk\nYXRlQ2xhdXNlUHJlc2VudEluUXVlcnlXaXRoRGVmYXVsdCgpIHsKICAgICAg\nICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIo\nKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAg\nICAgYXNzZXJ0Q2xhdXNlUHJlc2VudEluU1FMKCJGT1IgVVBEQVRFIiwgZW0u\nY3JlYXRlTmFtZWRRdWVyeSgiZmluZEVtcGxveWVlQnlJZCIpLnNldFBhcmFt\nZXRlcigiaWQiLCAwKSk7CiAgICAgICAgYXNzZXJ0Q2xhdXNlUHJlc2VudElu\nU1FMKCJGT1IgVVBEQVRFIiwgZW0uY3JlYXRlTmFtZWRRdWVyeSgiZmluZEVt\ncGxveWVlQnlJZCIpLnNldFBhcmFtZXRlcigiaWQiLCAwKSk7CiAgICAgICAg\nZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgIH0KCiAgICBAQWxs\nb3dGYWlsdXJlCiAgICBwdWJsaWMgdm9pZCB0ZXN0Rm9yVXBkYXRlQ2xhdXNl\nQWJzZW50SW5RdWVyeVdpdGhFeHBsaWN0Tm9Mb2NrKCkgewogICAgICAgIEVu\ndGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwog\nICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBh\nc3NlcnRDbGF1c2VBYnNlbnRJblNRTCgiRk9SIFVQREFURSIsIGVtLmNyZWF0\nZU5hbWVkUXVlcnkoImZpbmRFbXBsb3llZUJ5SWRXaXRoTm9Mb2NrIikuc2V0\nUGFyYW1ldGVyKCJpZCIsIDApKTsKICAgICAgICBhc3NlcnRDbGF1c2VBYnNl\nbnRJblNRTCgiRk9SIFVQREFURSIsIGVtLmNyZWF0ZU5hbWVkUXVlcnkoImZp\nbmRFbXBsb3llZUJ5SWRXaXRoTm9Mb2NrIikuc2V0UGFyYW1ldGVyKCJpZCIs\nIDApKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwog\nICAgfQoKICAgIFN0cmluZyBnZXRMYXN0U1FMKCkgewogICAgICAgIFN0cmlu\nZyBsYXN0ID0gc3FsLmdldChnZXRTUUxDb3VudCgpIC0gMSk7CiAgICAgICAg\nYXNzZXJ0Tm90TnVsbCgiTm8gbGFzdCBzcWwgZm91bmQiLCBsYXN0KTsKICAg\nICAgICByZXR1cm4gbGFzdDsKICAgIH0KCiAgICB2b2lkIGFzc2VydENsYXVz\nZVByZXNlbnRJblNRTChTdHJpbmcgY2xhdXNlLCBRdWVyeSBxKSB7CiAgICAg\nICAgcS5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgU3RyaW5nIGxhc3QgPSBn\nZXRMYXN0U1FMKCk7CiAgICAgICAgYXNzZXJ0VHJ1ZShjbGF1c2UgKyAiIGlz\nIG5vdCBwcmVzZW50IGluICIgKyBsYXN0LCBsYXN0LnRvVXBwZXJDYXNlKCku\naW5kZXhPZihjbGF1c2UpICE9IC0xKTsKICAgIH0KCiAgICB2b2lkIGFzc2Vy\ndENsYXVzZUFic2VudEluU1FMKFN0cmluZyBjbGF1c2UsIFF1ZXJ5IHEpIHsK\nICAgICAgICBxLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBTdHJpbmcgbGFz\ndCA9IGdldExhc3RTUUwoKTsKICAgICAgICBhc3NlcnRUcnVlKGNsYXVzZSAr\nICIgaXMgbm90IGFic2VudCBpbiAiICsgbGFzdCwgbGFzdC50b1VwcGVyQ2Fz\nZSgpLmluZGV4T2YoY2xhdXNlKSA9PSAtMSk7CiAgICB9Cn0K\n","encoding":"base64"}

