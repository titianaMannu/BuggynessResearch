{"sha":"76d7c2c9f5b8f83673bd0dbfb5fe44a90e647667","node_id":"MDQ6QmxvYjIwNjM2NDo3NmQ3YzJjOWY1YjhmODM2NzNiZDBkYmZiNWZlNDRhOTBlNjQ3NjY3","size":7089,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/76d7c2c9f5b8f83673bd0dbfb5fe44a90e647667","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWw7CgppbXBv\ncnQgamF2YS5zcWwuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmEuc3FsLlNRTEV4\nY2VwdGlvbjsKaW1wb3J0IGphdmF4LnNxbC5EYXRhU291cmNlOwppbXBvcnQg\namF2YXgudHJhbnNhY3Rpb24uVHJhbnNhY3Rpb247CmltcG9ydCBqYXZheC50\ncmFuc2FjdGlvbi5UcmFuc2FjdGlvbk1hbmFnZXI7CgppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMuY29uZi5KREJDQ29uZmlndXJhdGlvbjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1ldGEuQ2xhc3NNYXBwaW5n\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLlNjaGVt\nYUdyb3VwOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNR\nTEV4Y2VwdGlvbnM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVs\nLlN0b3JlQ29udGV4dDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRh\nLkNsYXNzTWV0YURhdGE7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRp\nbC5PcGVuSlBBRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLnV0aWwuU3RvcmVFeGNlcHRpb247CgovKioKICogQWJzdHJhY3Qgc2VxdWVu\nY2UgaW1wbGVtZW50YXRpb24uIEhhbmRsZXMgb2J0YWluaW5nIHRoZSBwcm9w\nZXIKICogY29ubmVjdGlvbiB0byB1c2VkIGJhc2VkIG9uIHdoZXRoZXIgdGhl\nIHNlcXVlbmNlIGlzIHRyYW5zYWN0aW9uYWwgYW5kCiAqIHdoZXRoZXIgYSBz\nZWNvbmQgZGF0YXNvdXJjZSBpcyBjb25maWd1cmVkLgogKgogKiBAYXV0aG9y\nIEFiZSBXaGl0ZQogKi8KcHVibGljIGFic3RyYWN0IGNsYXNzIEFic3RyYWN0\nSkRCQ1NlcQogICAgaW1wbGVtZW50cyBKREJDU2VxIHsKCiAgICBwcm90ZWN0\nZWQgaW50IHR5cGUgPSBUWVBFX0RFRkFVTFQ7CiAgICBwcm90ZWN0ZWQgT2Jq\nZWN0IGN1cnJlbnQgPSBudWxsOwogICAgcHJpdmF0ZSB0cmFuc2llbnQgVHJh\nbnNhY3Rpb24gX291dGVyVHJhbnNhY3Rpb247CgogICAgLyoqCiAgICAgKiBS\nZWNvcmRzIHRoZSBzZXF1ZW5jZSB0eXBlLgogICAgICovCiAgICBwdWJsaWMg\ndm9pZCBzZXRUeXBlKGludCB0eXBlKSB7CiAgICAgICAgdGhpcy50eXBlID0g\ndHlwZTsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IG5leHQoU3RvcmVDb250\nZXh0IGN0eCwgQ2xhc3NNZXRhRGF0YSBtZXRhKSB7CiAgICAgICAgSkRCQ1N0\nb3JlIHN0b3JlID0gZ2V0U3RvcmUoY3R4KTsKICAgICAgICB0cnkgewogICAg\nICAgICAgICBjdXJyZW50ID0gbmV4dEludGVybmFsKHN0b3JlLCAoQ2xhc3NN\nYXBwaW5nKSBtZXRhKTsKICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQ7CiAg\nICAgICAgfSBjYXRjaCAoT3BlbkpQQUV4Y2VwdGlvbiBrZSkgewogICAgICAg\nICAgICB0aHJvdyBrZTsKICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24g\nc2UpIHsKICAgICAgICAgICAgdGhyb3cgU1FMRXhjZXB0aW9ucy5nZXRTdG9y\nZShzZSwgc3RvcmUuZ2V0REJEaWN0aW9uYXJ5KCkpOwogICAgICAgIH0gY2F0\nY2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBTdG9y\nZUV4Y2VwdGlvbihlKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIE9i\namVjdCBjdXJyZW50KFN0b3JlQ29udGV4dCBjdHgsIENsYXNzTWV0YURhdGEg\nbWV0YSkgewogICAgICAgIEpEQkNTdG9yZSBzdG9yZSA9IGdldFN0b3JlKGN0\neCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRJ\nbnRlcm5hbChzdG9yZSwgKENsYXNzTWFwcGluZykgbWV0YSk7CiAgICAgICAg\nfSBjYXRjaCAoT3BlbkpQQUV4Y2VwdGlvbiBrZSkgewogICAgICAgICAgICB0\naHJvdyBrZTsKICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gc2UpIHsK\nICAgICAgICAgICAgdGhyb3cgU1FMRXhjZXB0aW9ucy5nZXRTdG9yZShzZSwg\nc3RvcmUuZ2V0REJEaWN0aW9uYXJ5KCkpOwogICAgICAgIH0gY2F0Y2ggKEV4\nY2VwdGlvbiBlKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBTdG9yZUV4Y2Vw\ndGlvbihlKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZvaWQgYWxs\nb2NhdGUoaW50IGFkZGl0aW9uYWwsIFN0b3JlQ29udGV4dCBjdHgsIENsYXNz\nTWV0YURhdGEgbWV0YSkgewogICAgICAgIEpEQkNTdG9yZSBzdG9yZSA9IGdl\ndFN0b3JlKGN0eCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgYWxsb2Nh\ndGVJbnRlcm5hbChhZGRpdGlvbmFsLCBzdG9yZSwgKENsYXNzTWFwcGluZykg\nbWV0YSk7CiAgICAgICAgfSBjYXRjaCAoT3BlbkpQQUV4Y2VwdGlvbiBrZSkg\newogICAgICAgICAgICB0aHJvdyBrZTsKICAgICAgICB9IGNhdGNoIChTUUxF\neGNlcHRpb24gc2UpIHsKICAgICAgICAgICAgdGhyb3cgU1FMRXhjZXB0aW9u\ncy5nZXRTdG9yZShzZSwgc3RvcmUuZ2V0REJEaWN0aW9uYXJ5KCkpOwogICAg\nICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIHRocm93\nIG5ldyBTdG9yZUV4Y2VwdGlvbihlKTsKICAgICAgICB9CiAgICB9CgogICAg\nLyoqCiAgICAgKiBOby1vcC4KICAgICAqLwogICAgcHVibGljIHZvaWQgYWRk\nU2NoZW1hKENsYXNzTWFwcGluZyBtYXBwaW5nLCBTY2hlbWFHcm91cCBncm91\ncCkgewogICAgfQoKICAgIC8qKgogICAgICogTm8tb3AuCiAgICAgKi8KICAg\nIHB1YmxpYyB2b2lkIGNsb3NlKCkgewogICAgfQoKICAgIC8qKgogICAgICog\nUmV0dXJuIHRoZSBuZXh0IHNlcXVlbmNlIG9iamVjdC4KICAgICAqLwogICAg\ncHJvdGVjdGVkIGFic3RyYWN0IE9iamVjdCBuZXh0SW50ZXJuYWwoSkRCQ1N0\nb3JlIHN0b3JlLAogICAgICAgIENsYXNzTWFwcGluZyBtYXBwaW5nKQogICAg\nICAgIHRocm93cyBFeGNlcHRpb247CiAgICAKICAgIC8qKgogICAgICogUmV0\ndXJuIHRoZSB7QGxpbmsgSkRCQ0NvbmZpZ3VyYXRpb259IGZvciB0aGlzIHNl\ncXVlbmNlLgogICAgICovCiAgICBwdWJsaWMgYWJzdHJhY3QgSkRCQ0NvbmZp\nZ3VyYXRpb24gZ2V0Q29uZmlndXJhdGlvbigpOwoKICAgIC8qKgogICAgICog\nUmV0dXJuIHRoZSBjdXJyZW50IHNlcXVlbmNlIG9iamVjdC4gQnkgZGVmYXVs\ndCByZXR1cm5zIHRoZSBsYXN0CiAgICAgKiBzZXF1ZW5jZSB2YWx1ZSB1c2Vk\nLCBvciBudWxsIGlmIG5vIHNlcXVlbmNlIHZhbHVlcyBoYXZlIGJlZW4gcmVx\ndWVzdGVkCiAgICAgKiB5ZXQuIERlZmF1bHQgaW1wbGVtZW50YXRpb24gaXMg\nbm90IHRocmVhZHNhZmUuCiAgICAgKi8KICAgIHByb3RlY3RlZCBPYmplY3Qg\nY3VycmVudEludGVybmFsKEpEQkNTdG9yZSBzdG9yZSwgQ2xhc3NNYXBwaW5n\nIG1hcHBpbmcpCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAg\ncmV0dXJuIGN1cnJlbnQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBBbGxvY2F0\nZSBhZGRpdGlvbmFsIHNlcXVlbmNlIHZhbHVlcy4gRG9lcyBub3RoaW5nIGJ5\nIGRlZmF1bHQuCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIGFsbG9jYXRl\nSW50ZXJuYWwoaW50IGFkZGl0aW9uYWwsIEpEQkNTdG9yZSBzdG9yZSwKICAg\nICAgICBDbGFzc01hcHBpbmcgbWFwcGluZykKICAgICAgICB0aHJvd3MgRXhj\nZXB0aW9uIHsKICAgIH0KCiAgICAvKioKICAgICAqIEV4dHJhY3QgdGhlIHN0\nb3JlIGZyb20gdGhlIGdpdmVuIGNvbnRleHQuCiAgICAgKi8KICAgIHByaXZh\ndGUgSkRCQ1N0b3JlIGdldFN0b3JlKFN0b3JlQ29udGV4dCBjdHgpIHsKICAg\nICAgICByZXR1cm4gKEpEQkNTdG9yZSkgY3R4LmdldFN0b3JlTWFuYWdlcigp\nLmdldElubmVybW9zdERlbGVnYXRlKCk7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBSZXR1cm4gdGhlIGNvbm5lY3Rpb24gdG8gdXNlIGJhc2VkIG9uIHRoZSB0\neXBlIG9mIHNlcXVlbmNlLiBUaGlzCiAgICAgKiBjb25uZWN0aW9uIHdpbGwg\nYXV0b21hdGljYWxseSBiZSBjbG9zZWQ7IGRvIG5vdCBjbG9zZSBpdC4KICAg\nICAqLwogICAgcHJvdGVjdGVkIENvbm5lY3Rpb24gZ2V0Q29ubmVjdGlvbihK\nREJDU3RvcmUgc3RvcmUpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7\nCiAgICAgICAgaWYgKHR5cGUgPT0gVFlQRV9UUkFOU0FDVElPTkFMIHx8IHR5\ncGUgPT0gVFlQRV9DT05USUdVT1VTKQogICAgICAgICAgICByZXR1cm4gc3Rv\ncmUuZ2V0Q29ubmVjdGlvbigpOwogICAgICAgIGVsc2UgaWYgKHN1c3BlbmRJ\nbkpUQSgpKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBU\ncmFuc2FjdGlvbk1hbmFnZXIgdG0gPSBnZXRDb25maWd1cmF0aW9uKCkKICAg\nICAgICAgICAgICAgICAgICAuZ2V0TWFuYWdlZFJ1bnRpbWVJbnN0YW5jZSgp\nLmdldFRyYW5zYWN0aW9uTWFuYWdlcigpOwogICAgICAgICAgICAgICAgX291\ndGVyVHJhbnNhY3Rpb24gPSB0bS5zdXNwZW5kKCk7CiAgICAgICAgICAgICAg\nICB0bS5iZWdpbigpOwogICAgICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmdl\ndENvbm5lY3Rpb24oKTsKICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9u\nIGUpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBTdG9yZUV4Y2VwdGlv\nbihlKTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAg\nICAgIEpEQkNDb25maWd1cmF0aW9uIGNvbmYgPSBzdG9yZS5nZXRDb25maWd1\ncmF0aW9uKCk7CiAgICAgICAgICAgIERhdGFTb3VyY2UgZHMgPSBjb25mLmdl\ndERhdGFTb3VyY2UyKHN0b3JlLmdldENvbnRleHQoKSk7CiAgICAgICAgICAg\nIENvbm5lY3Rpb24gY29ubiA9IGRzLmdldENvbm5lY3Rpb24oKTsKICAgICAg\nICAgICAgaWYgKGNvbm4uZ2V0QXV0b0NvbW1pdCgpKQogICAgICAgICAgICAg\nICAgY29ubi5zZXRBdXRvQ29tbWl0KGZhbHNlKTsKICAgICAgICAgICAgcmV0\ndXJuIGNvbm47CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogQ2xv\nc2UgdGhlIGN1cnJlbnQgY29ubmVjdGlvbi4KICAgICAqLwogICAgcHJvdGVj\ndGVkIHZvaWQgY2xvc2VDb25uZWN0aW9uKENvbm5lY3Rpb24gY29ubikgewog\nICAgICAgIGlmIChjb25uID09IG51bGwpCiAgICAgICAgICAgIHJldHVybjsK\nCiAgICAgICAgaWYgKHR5cGUgPT0gVFlQRV9UUkFOU0FDVElPTkFMIHx8IHR5\ncGUgPT0gVFlQRV9DT05USUdVT1VTKSB7CiAgICAgICAgICAgIC8vIGRvIG5v\ndGhpbmc7IHRoaXMgc2VxIGlzIHBhcnQgb2YgdGhlIGJ1c2luZXNzIHRyYW5z\nYWN0aW9uCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgaWYg\nKHN1c3BlbmRJbkpUQSgpKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAg\nICAgICAgICBUcmFuc2FjdGlvbk1hbmFnZXIgdG0gPSBnZXRDb25maWd1cmF0\naW9uKCkKICAgICAgICAgICAgICAgICAgICAuZ2V0TWFuYWdlZFJ1bnRpbWVJ\nbnN0YW5jZSgpLmdldFRyYW5zYWN0aW9uTWFuYWdlcigpOwogICAgICAgICAg\nICAgICAgdG0uY29tbWl0KCk7CiAgICAgICAgICAgICAgICB0cnkgeyBjb25u\nLmNsb3NlKCk7IH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBzZSkge30KCiAgICAg\nICAgICAgICAgICBpZiAoX291dGVyVHJhbnNhY3Rpb24gIT0gbnVsbCkKICAg\nICAgICAgICAgICAgICAgICB0bS5yZXN1bWUoX291dGVyVHJhbnNhY3Rpb24p\nOwoKICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAg\nICAgICAgICAgIHRocm93IG5ldyBTdG9yZUV4Y2VwdGlvbihlKTsKICAgICAg\nICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgIF9vdXRlclRyYW5z\nYWN0aW9uID0gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7\nCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjb25uLmNvbW1p\ndCgpOwogICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gc2UpIHsK\nICAgICAgICAgICAgICAgIHRocm93IFNRTEV4Y2VwdGlvbnMuZ2V0U3RvcmUo\nc2UpOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAg\ndHJ5IHsgY29ubi5jbG9zZSgpOyB9IGNhdGNoIChTUUxFeGNlcHRpb24gc2Up\nIHt9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICAKICAgIC8q\nKgogICAgICogRGV0ZWN0IHdoZXRoZXIgb3Igbm90IE9wZW5KUEEgc2hvdWxk\nIHN1c3BlbmQgdGhlIHRyYW5zYWN0aW9uIGluIAogICAgICogYSBtYW5hZ2Vk\nIGVudmlyb25tZW50LgogICAgICovCiAgICBwcm90ZWN0ZWQgYm9vbGVhbiBz\ndXNwZW5kSW5KVEEoKSB7CiAgICAgICAgcmV0dXJuIGdldENvbmZpZ3VyYXRp\nb24oKS5pc0Nvbm5lY3Rpb25GYWN0b3J5TW9kZU1hbmFnZWQoKSAmJiAKICAg\nICAgICAgICAgZ2V0Q29uZmlndXJhdGlvbigpLmdldENvbm5lY3Rpb25GYWN0\nb3J5MigpID09IG51bGw7CiAgICB9Cn0K\n","encoding":"base64"}

