{"sha":"796ab9c62683ea1ed6af5bfa2c45c616432558d6","node_id":"MDQ6QmxvYjIwNjM2NDo3OTZhYjljNjI2ODNlYTFlZDZhZjViZmEyYzQ1YzYxNjQzMjU1OGQ2","size":32311,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/796ab9c62683ea1ed6af5bfa2c45c616432558d6","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhOwoKaW1wb3J0\nIGphdmEuc3FsLlNRTEV4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5BcnJh\neUxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuQXJyYXlzOwppbXBvcnQgamF2YS51\ndGlsLkNvbGxlY3Rpb247CmltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbnM7\nCmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsKaW1wb3J0IGphdmEudXRpbC5J\ndGVyYXRvcjsKaW1wb3J0IGphdmEudXRpbC5MaW5rZWRIYXNoU2V0OwppbXBv\ncnQgamF2YS51dGlsLkxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuTWFwOwppbXBv\ncnQgamF2YS51dGlsLlNldDsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nZW5oYW5jZS5QZXJzaXN0ZW5jZUNhcGFibGU7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEuamRiYy5rZXJuZWwuSkRCQ0ZldGNoQ29uZmlndXJhdGlvbjsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmtlcm5lbC5KREJDU3Rv\ncmU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLnN0cmF0\ncy5Ob25lQ2xhc3NTdHJhdGVneTsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5qZGJjLnNjaGVtYS5Db2x1bW47CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5zY2hlbWEuQ29sdW1uSU87CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5zY2hlbWEuRm9yZWlnbktleTsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLnNjaGVtYS5TY2hlbWFzOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLlRhYmxlOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMuc3FsLkpvaW5zOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmpkYmMuc3FsLlJlc3VsdDsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNxbC5Sb3dNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmpkYmMuc3FsLlNlbGVjdDsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5rZXJuZWwuRmV0Y2hDb25maWd1cmF0aW9uOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5PcGVuSlBBU3RhdGVNYW5hZ2VyOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5QQ1N0YXRlOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5sb2cuTG9nOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmxpYi5yb3AuUmVzdWx0T2JqZWN0UHJvdmlkZXI7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVy\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuQ2xhc3NNZXRhRGF0\nYTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLlZhbHVlTWV0YURh\ndGE7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5BcHBsaWNhdGlv\nbklkczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLkludGVybmFs\nRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuTWV0\nYURhdGFFeGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRp\nbC5PcGVuSlBBSWQ7CgovKioKICogU3BlY2lhbGl6YXRpb24gb2YgbWV0YWRh\ndGEgZm9yIHJlbGF0aW9uYWwgZGF0YWJhc2VzLgogKgogKiBAYXV0aG9yIEFi\nZSBXaGl0ZQogKi8KcHVibGljIGNsYXNzIENsYXNzTWFwcGluZwogICAgZXh0\nZW5kcyBDbGFzc01ldGFEYXRhCiAgICBpbXBsZW1lbnRzIENsYXNzU3RyYXRl\nZ3kgewoKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgQ2xhc3NNYXBwaW5nW10g\nRU1QVFlfTUFQUElOR1MgPSBuZXcgQ2xhc3NNYXBwaW5nWzBdOwoKICAgIHBy\naXZhdGUgc3RhdGljIGZpbmFsIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVy\nLmZvclBhY2thZ2UKICAgICAgICAoQ2xhc3NNYXBwaW5nLmNsYXNzKTsKCiAg\nICBwcml2YXRlIGZpbmFsIENsYXNzTWFwcGluZ0luZm8gX2luZm87CiAgICBw\ncml2YXRlIGZpbmFsIERpc2NyaW1pbmF0b3IgX2Rpc2NyaW07CiAgICBwcml2\nYXRlIGZpbmFsIFZlcnNpb24gX3ZlcnNpb247CiAgICBwcml2YXRlIENsYXNz\nU3RyYXRlZ3kgX3N0cmF0ZWd5ID0gbnVsbDsKCiAgICBwcml2YXRlIFRhYmxl\nIF90YWJsZSA9IG51bGw7CiAgICBwcml2YXRlIENvbHVtbklPIF9pbyA9IG51\nbGw7CiAgICBwcml2YXRlIENvbHVtbltdIF9jb2xzID0gU2NoZW1hcy5FTVBU\nWV9DT0xVTU5TOwogICAgcHJpdmF0ZSBGb3JlaWduS2V5IF9mayA9IG51bGw7\nCiAgICBwcml2YXRlIGludCBfc3ViY2xhc3NNb2RlID0gSW50ZWdlci5NQVhf\nVkFMVUU7CgogICAgcHJpdmF0ZSBDbGFzc01hcHBpbmdbXSBfam9pblN1Yk1h\ncHMgPSBudWxsOwogICAgcHJpdmF0ZSBDbGFzc01hcHBpbmdbXSBfYXNzaWdu\nTWFwcyA9IG51bGw7CgogICAgLy8gbWFwcyBjb2x1bW5zIHRvIGpvaW5hYmxl\ncwogICAgcHJpdmF0ZSBmaW5hbCBNYXAgX2pvaW5hYmxlcyA9IENvbGxlY3Rp\nb25zLnN5bmNocm9uaXplZE1hcChuZXcgSGFzaE1hcCgpKTsKCiAgICAvKioK\nICAgICAqIENvbnN0cnVjdG9yLiBTdXBwbHkgZGVzY3JpYmVkIHR5cGUgYW5k\nIG93bmluZyByZXBvc2l0b3J5LgogICAgICovCiAgICBwcm90ZWN0ZWQgQ2xh\nc3NNYXBwaW5nKENsYXNzIHR5cGUsIE1hcHBpbmdSZXBvc2l0b3J5IHJlcG9z\nKSB7CiAgICAgICAgc3VwZXIodHlwZSwgcmVwb3MpOwogICAgICAgIF9kaXNj\ncmltID0gcmVwb3MubmV3RGlzY3JpbWluYXRvcih0aGlzKTsKICAgICAgICBf\ndmVyc2lvbiA9IHJlcG9zLm5ld1ZlcnNpb24odGhpcyk7CiAgICAgICAgX2lu\nZm8gPSByZXBvcy5uZXdNYXBwaW5nSW5mbyh0aGlzKTsKICAgIH0KCiAgICAv\nKioKICAgICAqIEVtYmVkZGVkIGNvbnN0cnVjdG9yLiBTdXBwbHkgZW1iZWRk\naW5nIHZhbHVlIGFuZCBvd25pbmcgcmVwb3NpdG9yeS4KICAgICAqLwogICAg\ncHJvdGVjdGVkIENsYXNzTWFwcGluZyhWYWx1ZU1ldGFEYXRhIHZtZCkgewog\nICAgICAgIHN1cGVyKHZtZCk7CiAgICAgICAgX2Rpc2NyaW0gPSBnZXRNYXBw\naW5nUmVwb3NpdG9yeSgpLm5ld0Rpc2NyaW1pbmF0b3IodGhpcyk7CiAgICAg\nICAgX3ZlcnNpb24gPSBnZXRNYXBwaW5nUmVwb3NpdG9yeSgpLm5ld1ZlcnNp\nb24odGhpcyk7CiAgICAgICAgX2luZm8gPSBnZXRNYXBwaW5nUmVwb3NpdG9y\neSgpLm5ld01hcHBpbmdJbmZvKHRoaXMpOwogICAgfQoKICAgIC8qKgogICAg\nICogVGhlIGNsYXNzIGRpc2NyaW1pbmF0b3IuCiAgICAgKi8KICAgIHB1Ymxp\nYyBEaXNjcmltaW5hdG9yIGdldERpc2NyaW1pbmF0b3IoKSB7CiAgICAgICAg\ncmV0dXJuIF9kaXNjcmltOwogICAgfQoKICAgIC8qKgogICAgICogVGhlIHZl\ncnNpb24gaW5kaWNhdG9yLgogICAgICovCiAgICBwdWJsaWMgVmVyc2lvbiBn\nZXRWZXJzaW9uKCkgewogICAgICAgIHJldHVybiBfdmVyc2lvbjsKICAgIH0K\nCiAgICAvLy8vLy8vLy8vLwogICAgLy8gUnVudGltZQogICAgLy8vLy8vLy8v\nLy8KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgb2lkIHZhbHVlIHN0b3Jl\nZCBpbiB0aGUgcmVzdWx0LiBUaGlzIGltcGxlbWVudGF0aW9uIHdpbGwKICAg\nICAqIHJlY3Vyc2UgdW50aWwgaXQgZmluZHMgYW4gYW5jZXN0b3IgY2xhc3Mg\nd2hvIHVzZXMgb2lkIHZhbHVlcyBmb3IgaXRzCiAgICAgKiBwcmltYXJ5IGtl\neS4KICAgICAqCiAgICAgKiBAcGFyYW0gZmsgaWYgbm9uLW51bGwsIHVzZSB0\naGUgbG9jYWwgY29sdW1ucyBvZiB0aGUgZ2l2ZW4gZm9yZWlnbgogICAgICog\na2V5IGluIHBsYWNlIG9mIHRoaXMgY2xhc3MnIHByaW1hcnkga2V5IGNvbHVt\nbnMKICAgICAqIEBzZWUgI2lzUHJpbWFyeUtleU9iamVjdElkCiAgICAgKi8K\nICAgIHB1YmxpYyBPYmplY3QgZ2V0T2JqZWN0SWQoSkRCQ1N0b3JlIHN0b3Jl\nLCBSZXN1bHQgcmVzLCBGb3JlaWduS2V5IGZrLAogICAgICAgIGJvb2xlYW4g\nc3VicywgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlv\nbiB7CiAgICAgICAgVmFsdWVNYXBwaW5nIGVtYmVkID0gZ2V0RW1iZWRkaW5n\nTWFwcGluZygpOwogICAgICAgIGlmIChlbWJlZCAhPSBudWxsKQogICAgICAg\nICAgICByZXR1cm4gZW1iZWQuZ2V0RmllbGRNYXBwaW5nKCkuZ2V0RGVmaW5p\nbmdNYXBwaW5nKCkuCiAgICAgICAgICAgICAgICBnZXRPYmplY3RJZChzdG9y\nZSwgcmVzLCBmaywgc3Vicywgam9pbnMpOwoKICAgICAgICByZXR1cm4gZ2V0\nT2JqZWN0SWQodGhpcywgc3RvcmUsIHJlcywgZmssIHN1YnMsIGpvaW5zKTsK\nICAgIH0KCiAgICAvKioKICAgICAqIFJlY3Vyc2l2ZSBoZWxwZXIgZm9yIHB1\nYmxpYyA8Y29kZT5nZXRPYmplY3RJZDwvY29kZT4gbWV0aG9kLgogICAgICov\nCiAgICBwcml2YXRlIE9iamVjdCBnZXRPYmplY3RJZChDbGFzc01hcHBpbmcg\nY2xzLCBKREJDU3RvcmUgc3RvcmUsIFJlc3VsdCByZXMsCiAgICAgICAgRm9y\nZWlnbktleSBmaywgYm9vbGVhbiBzdWJzLCBKb2lucyBqb2lucykKICAgICAg\nICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBpZiAoIWlzUHJpbWFy\neUtleU9iamVjdElkKHRydWUpKQogICAgICAgICAgICByZXR1cm4gZ2V0UENT\ndXBlcmNsYXNzTWFwcGluZygpLmdldE9iamVjdElkKGNscywgc3RvcmUsIHJl\ncywgZmssCiAgICAgICAgICAgICAgICBzdWJzLCBqb2lucyk7CiAgICAgICAg\naWYgKGdldElkZW50aXR5VHlwZSgpID09IElEX1VOS05PV04pCiAgICAgICAg\nICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwoKICAgICAgICBD\nb2x1bW5bXSBwa3MgPSBnZXRQcmltYXJ5S2V5Q29sdW1ucygpOwogICAgICAg\nIGlmIChnZXRJZGVudGl0eVR5cGUoKSA9PSBJRF9EQVRBU1RPUkUpIHsKICAg\nICAgICAgICAgQ29sdW1uIGNvbCA9IChmayA9PSBudWxsKSA/IHBrc1swXSA6\nIGZrLmdldENvbHVtbihwa3NbMF0pOwogICAgICAgICAgICBsb25nIGlkID0g\ncmVzLmdldExvbmcoY29sLCBqb2lucyk7CiAgICAgICAgICAgIHJldHVybiAo\naWQgPT0gMCAmJiByZXMud2FzTnVsbCgpKSA/IG51bGwKICAgICAgICAgICAg\nICAgIDogc3RvcmUubmV3RGF0YVN0b3JlSWQoaWQsIGNscywgc3Vicyk7CiAg\nICAgICAgfQoKICAgICAgICAvLyBhcHBsaWNhdGlvbiBpZGVudGl0eQogICAg\nICAgIE9iamVjdFtdIHZhbHMgPSBuZXcgT2JqZWN0W2dldFByaW1hcnlLZXlG\naWVsZHMoKS5sZW5ndGhdOwogICAgICAgIEZpZWxkTWFwcGluZyBmbTsKICAg\nICAgICBKb2luYWJsZSBqb2luOwogICAgICAgIGludCBwa0lkeDsKICAgICAg\nICBmb3IgKGludCBpID0gMDsgaSA8IHBrcy5sZW5ndGg7IGkrKykgewogICAg\nICAgICAgICAvLyB3ZSBrbm93IHRoYXQgYWxsIHBrIGNvbHVtbiBqb2luIG1h\ncHBpbmdzIHVzZSBwcmltYXJ5IGtleSBmaWVsZHMsCiAgICAgICAgICAgIC8v\nIGNhdXNlIHRoaXMgbWFwcGluZyB1c2VzIHRoZSBvaWQgYXMgaXRzIHByaW1h\ncnkga2V5ICh3ZSByZWN1cnNlZAogICAgICAgICAgICAvLyBhdCB0aGUgYmVn\naW5uaW5nIG9mIHRoZSBtZXRob2QgdG8gZW5zdXJlIHRoaXMpCiAgICAgICAg\nICAgIGpvaW4gPSBhc3NlcnRKb2luYWJsZShwa3NbaV0pOwogICAgICAgICAg\nICBmbSA9IGdldEZpZWxkTWFwcGluZyhqb2luLmdldEZpZWxkSW5kZXgoKSk7\nCiAgICAgICAgICAgIHBrSWR4ID0gZm0uZ2V0UHJpbWFyeUtleUluZGV4KCk7\nCgogICAgICAgICAgICAvLyBjb3VsZCBoYXZlIGFscmVhZHkgc2V0IHZhbHVl\nIHdpdGggcHJldmlvdXMgbXVsdGktY29sdW1uIGpvaW5hYmxlCiAgICAgICAg\nICAgIGlmICh2YWxzW3BrSWR4XSA9PSBudWxsKSB7CiAgICAgICAgICAgICAg\nICByZXMuc3RhcnREYXRhUmVxdWVzdChmbSk7CiAgICAgICAgICAgICAgICB2\nYWxzW3BrSWR4XSA9IGpvaW4uZ2V0UHJpbWFyeUtleVZhbHVlKHJlcywgam9p\nbi5nZXRDb2x1bW5zKCksCiAgICAgICAgICAgICAgICAgICAgZmssIHN0b3Jl\nLCBqb2lucyk7CiAgICAgICAgICAgICAgICByZXMuZW5kRGF0YVJlcXVlc3Qo\nKTsKICAgICAgICAgICAgICAgIGlmICh2YWxzW3BrSWR4XSA9PSBudWxsKQog\nICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9\nCiAgICAgICAgfQogICAgICAgIE9iamVjdCBvaWQgPSBBcHBsaWNhdGlvbklk\ncy5mcm9tUEtWYWx1ZXModmFscywgY2xzKTsKICAgICAgICBpZiAoIXN1YnMg\nJiYgb2lkIGluc3RhbmNlb2YgT3BlbkpQQUlkKQogICAgICAgICAgICAoKE9w\nZW5KUEFJZCkgb2lkKS5zZXRNYW5hZ2VkSW5zdGFuY2VUeXBlKGNscy5nZXRE\nZXNjcmliZWRUeXBlKCkpOwogICAgICAgIHJldHVybiBvaWQ7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGdpdmVuIGNvbHVtbiB2YWx1ZShz\nKSBmb3IgdGhlIGdpdmVuIG9iamVjdC4gVGhlIGdpdmVuCiAgICAgKiBjb2x1\nbW5zIHdpbGwgYmUgcHJpbWFyeSBrZXkgY29sdW1ucyBvZiB0aGlzIG1hcHBp\nbmcsIGJ1dCBtYXkgYmUgaW4KICAgICAqIGFueSBvcmRlci4gSWYgdGhlcmUg\naXMgb25seSBvbmUgY29sdW1uLCByZXR1cm4gaXRzIHZhbHVlLiBJZiB0aGVy\nZQogICAgICogYXJlIG11bHRpcGxlIGNvbHVtbnMsIHJldHVybiBhbiBvYmpl\nY3QgYXJyYXkgb2YgdGhlaXIgdmFsdWVzLCBpbiB0aGUKICAgICAqIHNhbWUg\nb3JkZXIgdGhlIGNvbHVtbnMgYXJlIGdpdmVuLgogICAgICovCiAgICBwdWJs\naWMgT2JqZWN0IHRvRGF0YVN0b3JlVmFsdWUoT2JqZWN0IG9iaiwgQ29sdW1u\nW10gY29scywgSkRCQ1N0b3JlIHN0b3JlKSB7CiAgICAgICAgT2JqZWN0IHJl\ndCA9IChjb2xzLmxlbmd0aCA9PSAxKSA/IG51bGwgOiBuZXcgT2JqZWN0W2Nv\nbHMubGVuZ3RoXTsKCiAgICAgICAgLy8gaW4gdGhlIHBhc3Qgd2UndmUgYmVl\nbiBsZW5pZW50IGFib3V0IGJlaW5nIGFibGUgdG8gdHJhbnNsYXRlIG9iamVj\ndHMKICAgICAgICAvLyBmcm9tIG90aGVyIHBlcnNpc3RlbmNlIGNvbnRleHRz\nLCBzbyB0cnkgdG8gZ2V0IHNtIGRpcmVjdGx5IGZyb20KICAgICAgICAvLyBp\nbnN0YW5jZSBiZWZvcmUgYXNraW5nIG91ciBjb250ZXh0CiAgICAgICAgT3Bl\nbkpQQVN0YXRlTWFuYWdlciBzbTsKICAgICAgICBpZiAob2JqIGluc3RhbmNl\nb2YgUGVyc2lzdGVuY2VDYXBhYmxlKQogICAgICAgICAgICBzbSA9IChPcGVu\nSlBBU3RhdGVNYW5hZ2VyKSAoKFBlcnNpc3RlbmNlQ2FwYWJsZSkgb2JqKS4K\nICAgICAgICAgICAgICAgIHBjR2V0U3RhdGVNYW5hZ2VyKCk7CiAgICAgICAg\nZWxzZQogICAgICAgICAgICBzbSA9IHN0b3JlLmdldENvbnRleHQoKS5nZXRT\ndGF0ZU1hbmFnZXIob2JqKTsKICAgICAgICBpZiAoc20gPT0gbnVsbCkKICAg\nICAgICAgICAgcmV0dXJuIHJldDsKCiAgICAgICAgT2JqZWN0IHZhbDsKICAg\nICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNvbHMubGVuZ3RoOyBpKyspIHsK\nICAgICAgICAgICAgdmFsID0gYXNzZXJ0Sm9pbmFibGUoY29sc1tpXSkuZ2V0\nSm9pblZhbHVlKHNtLCBjb2xzW2ldLCBzdG9yZSk7CiAgICAgICAgICAgIGlm\nIChjb2xzLmxlbmd0aCA9PSAxKQogICAgICAgICAgICAgICAgcmV0ID0gdmFs\nOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAoKE9iamVjdFtd\nKSByZXQpW2ldID0gdmFsOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmV0\nOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBqb2luYWJsZSBm\nb3IgdGhlIGdpdmVuIGNvbHVtbiwgb3IgdGhyb3cgYW4gZXhjZXB0aW9uIGlm\nCiAgICAgKiBub25lIGlzIGF2YWlsYWJsZS4KICAgICAqLwogICAgcHVibGlj\nIEpvaW5hYmxlIGFzc2VydEpvaW5hYmxlKENvbHVtbiBjb2wpIHsKICAgICAg\nICBKb2luYWJsZSBqb2luID0gZ2V0Sm9pbmFibGUoY29sKTsKICAgICAgICBp\nZiAoam9pbiA9PSBudWxsKQogICAgICAgICAgICB0aHJvdyBuZXcgTWV0YURh\ndGFFeGNlcHRpb24oX2xvYy5nZXQoIm5vLWpvaW5hYmxlIiwKICAgICAgICAg\nICAgICAgIGNvbC5nZXRGdWxsTmFtZSgpKSk7CiAgICAgICAgcmV0dXJuIGpv\naW47CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIHtAbGluayBK\nb2luYWJsZX0gZm9yIHRoZSBnaXZlbiBjb2x1bW4uIEFueSBjb2x1bW4gdGhh\ndAogICAgICogYW5vdGhlciBtYXBwaW5nIGpvaW5zIHRvIG11c3QgYmUgY29u\ndHJvbGxlZCBieSBhIGpvaW5hYmxlLgogICAgICovCiAgICBwdWJsaWMgSm9p\nbmFibGUgZ2V0Sm9pbmFibGUoQ29sdW1uIGNvbCkgewogICAgICAgIEpvaW5h\nYmxlIGpvaW47CiAgICAgICAgaWYgKGdldEVtYmVkZGluZ01ldGFEYXRhKCkg\nIT0gbnVsbCkgewogICAgICAgICAgICBqb2luID0gZ2V0RW1iZWRkaW5nTWFw\ncGluZygpLmdldEZpZWxkTWFwcGluZygpLgogICAgICAgICAgICAgICAgZ2V0\nRGVmaW5pbmdNYXBwaW5nKCkuZ2V0Sm9pbmFibGUoY29sKTsKICAgICAgICAg\nICAgaWYgKGpvaW4gIT0gbnVsbCkKICAgICAgICAgICAgICAgIHJldHVybiBq\nb2luOwogICAgICAgIH0KICAgICAgICBDbGFzc01hcHBpbmcgc3VwID0gZ2V0\nSm9pbmFibGVQQ1N1cGVyY2xhc3NNYXBwaW5nKCk7CiAgICAgICAgaWYgKHN1\ncCAhPSBudWxsKSB7CiAgICAgICAgICAgIGpvaW4gPSBzdXAuZ2V0Sm9pbmFi\nbGUoY29sKTsKICAgICAgICAgICAgaWYgKGpvaW4gIT0gbnVsbCkKICAgICAg\nICAgICAgICAgIHJldHVybiBqb2luOwogICAgICAgIH0KICAgICAgICByZXR1\ncm4gKEpvaW5hYmxlKSBfam9pbmFibGVzLmdldChjb2wpOwogICAgfQoKICAg\nIC8qKgogICAgICogQWRkIHRoZSBnaXZlbiBjb2x1bW4tdG8tam9pbmFibGUg\nbWFwcGluZy4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0Sm9pbmFibGUo\nQ29sdW1uIGNvbCwgSm9pbmFibGUgam9pbmFibGUpIHsKICAgICAgICAvLyBk\nb24ndCBsZXQgbm9uLXBrIG92ZXJyaWRlIHBrCiAgICAgICAgSm9pbmFibGUg\nam9pbiA9IChKb2luYWJsZSkgX2pvaW5hYmxlcy5nZXQoY29sKTsKICAgICAg\nICBpZiAoam9pbiA9PSBudWxsIHx8IChqb2luLmdldEZpZWxkSW5kZXgoKSAh\nPSAtMQogICAgICAgICAgICAmJiBnZXRGaWVsZChqb2luLmdldEZpZWxkSW5k\nZXgoKSkuZ2V0UHJpbWFyeUtleUluZGV4KCkgPT0gLTEpKQogICAgICAgICAg\nICBfam9pbmFibGVzLnB1dChjb2wsIGpvaW5hYmxlKTsKICAgIH0KCiAgICAv\nKioKICAgICAqIFJldHVybiB3aGV0aGVyIHRoZSBjb2x1bW5zIG9mIHRoZSBn\naXZlbiBmb3JlaWduIGtleSB0byB0aGlzIG1hcHBpbmcKICAgICAqIGNhbiBi\nZSB1c2VkIHRvIGNvbnN0cnVjdCBhbiBvYmplY3QgaWQgZm9yIHRoaXMgdHlw\nZS4gVGhpcyBpcyBhCiAgICAgKiByZWxhdGl2ZWx5IGV4cGVuc2l2ZSBvcGVy\nYXRpb247IGl0cyByZXN1bHRzIHNob3VsZCBiZSBjYWNoZWQuCiAgICAgKgog\nICAgICogQHJldHVybiB7QGxpbmsgQm9vbGVhbiNUUlVFfSBpZiB0aGUgZm9y\nZWlnbiBrZXkgY29udGFpbnMgYWxsIG9pZAogICAgICogY29sdW1ucywgPGNv\nZGU+bnVsbDwvY29kZT4gaWYgaXQgY29udGFpbnMgb25seSBzb21lIGNvbHVt\nbnMsCiAgICAgKiBvciB7QGxpbmsgQm9vbGVhbiNGQUxTRX0gaWYgaXQgY29u\ndGFpbnMgbm9uLW9pZCBjb2x1bW5zCiAgICAgKi8KICAgIHB1YmxpYyBCb29s\nZWFuIGlzRm9yZWlnbktleU9iamVjdElkKEZvcmVpZ25LZXkgZmspIHsKICAg\nICAgICAvLyBpZiB0aGlzIG1hcHBpbmcncyBwcmltYXJ5IGtleSBjYW4ndCBj\nb25zdHJ1Y3QgYW4gb2lkLCB0aGVuIG5vIHdheQogICAgICAgIC8vIGZvcmVp\nZ24ga2V5IGNhbgogICAgICAgIGlmIChnZXRJZGVudGl0eVR5cGUoKSA9PSBJ\nRF9VTktOT1dOIHx8ICFpc1ByaW1hcnlLZXlPYmplY3RJZChmYWxzZSkpCiAg\nICAgICAgICAgIHJldHVybiBCb29sZWFuLkZBTFNFOwoKICAgICAgICAvLyB3\naXRoIGRhdGFzdG9yZSBpZGVudGl0eSwgaXQncyBhbGwgb3Igbm90aGluZwog\nICAgICAgIENvbHVtbltdIGNvbHMgPSBmay5nZXRQcmltYXJ5S2V5Q29sdW1u\ncygpOwogICAgICAgIGlmIChnZXRJZGVudGl0eVR5cGUoKSA9PSBJRF9EQVRB\nU1RPUkUpIHsKICAgICAgICAgICAgaWYgKGNvbHMubGVuZ3RoICE9IDEgfHwg\nY29sc1swXSAhPSBnZXRQcmltYXJ5S2V5Q29sdW1ucygpWzBdKQogICAgICAg\nICAgICAgICAgcmV0dXJuIEJvb2xlYW4uRkFMU0U7CiAgICAgICAgICAgIHJl\ndHVybiBCb29sZWFuLlRSVUU7CiAgICAgICAgfQoKICAgICAgICAvLyBjaGVj\nayB0aGUgam9pbiBtYXBwaW5nIGZvciBlYWNoIHBrIGNvbHVtbiB0byBzZWUg\naWYgaXQgbGlua3MgdXAgdG8KICAgICAgICAvLyBhIHByaW1hcnkga2V5IGZp\nZWxkCiAgICAgICAgSm9pbmFibGUgam9pbjsKICAgICAgICBmb3IgKGludCBp\nID0gMDsgaSA8IGNvbHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgam9p\nbiA9IGFzc2VydEpvaW5hYmxlKGNvbHNbaV0pOwogICAgICAgICAgICBpZiAo\nam9pbi5nZXRGaWVsZEluZGV4KCkgIT0gLTEKICAgICAgICAgICAgICAgICYm\nIGdldEZpZWxkKGpvaW4uZ2V0RmllbGRJbmRleCgpKS5nZXRQcmltYXJ5S2V5\nSW5kZXgoKSA9PSAtMSkKICAgICAgICAgICAgICAgIHJldHVybiBCb29sZWFu\nLkZBTFNFOwogICAgICAgIH0KCiAgICAgICAgLy8gaWYgYWxsIHByaW1hcnkg\na2V5IGxpbmtzLCBzZWUgd2hldGhlciB3ZSBqb2luIHRvIGFsbCBwa3MKICAg\nICAgICBpZiAoaXNQcmltYXJ5S2V5T2JqZWN0SWQodHJ1ZSkKICAgICAgICAg\nICAgJiYgY29scy5sZW5ndGggPT0gZ2V0UHJpbWFyeUtleUNvbHVtbnMoKS5s\nZW5ndGgpCiAgICAgICAgICAgIHJldHVybiBCb29sZWFuLlRSVUU7CiAgICAg\nICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgLy8vLy8vLwogICAgLy8gT1JN\nCiAgICAvLy8vLy8vCgogICAgLyoqCiAgICAgKiBSYXcgbWFwcGluZyBkYXRh\nLgogICAgICovCiAgICBwdWJsaWMgQ2xhc3NNYXBwaW5nSW5mbyBnZXRNYXBw\naW5nSW5mbygpIHsKICAgICAgICByZXR1cm4gX2luZm87CiAgICB9CgogICAg\nLyoqCiAgICAgKiBUaGUgc3RyYXRlZ3kgdXNlZCB0byBtYXAgdGhpcyBtYXBw\naW5nLgogICAgICovCiAgICBwdWJsaWMgQ2xhc3NTdHJhdGVneSBnZXRTdHJh\ndGVneSgpIHsKICAgICAgICByZXR1cm4gX3N0cmF0ZWd5OwogICAgfQoKICAg\nIC8qKgogICAgICogVGhlIHN0cmF0ZWd5IHVzZWQgdG8gbWFwIHRoaXMgbWFw\ncGluZy4gVGhlIDxjb2RlPmFkYXB0PC9jb2RlPgogICAgICogcGFyYW1ldGVy\nIGRldGVybWluZXMgd2hldGhlciB0byBhZGFwdCB3aGVuIG1hcHBpbmcgdGhl\nIHN0cmF0ZWd5OwogICAgICogdXNlIG51bGwgaWYgdGhlIHN0cmF0ZWd5IHNo\nb3VsZCBub3QgYmUgbWFwcGVkLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBz\nZXRTdHJhdGVneShDbGFzc1N0cmF0ZWd5IHN0cmF0ZWd5LCBCb29sZWFuIGFk\nYXB0KSB7CiAgICAgICAgLy8gc2V0IHN0cmF0ZWd5IGZpcnN0IHNvIHdlIGNh\nbiBhY2Nlc3MgaXQgZHVyaW5nIG1hcHBpbmcKICAgICAgICBDbGFzc1N0cmF0\nZWd5IG9yaWcgPSBfc3RyYXRlZ3k7CiAgICAgICAgX3N0cmF0ZWd5ID0gc3Ry\nYXRlZ3k7CiAgICAgICAgaWYgKHN0cmF0ZWd5ICE9IG51bGwpIHsKICAgICAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHN0cmF0ZWd5LnNldENsYXNz\nTWFwcGluZyh0aGlzKTsKICAgICAgICAgICAgICAgIGlmIChhZGFwdCAhPSBu\ndWxsKQogICAgICAgICAgICAgICAgICAgIHN0cmF0ZWd5Lm1hcChhZGFwdC5i\nb29sZWFuVmFsdWUoKSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKFJ1bnRpbWVF\neGNlcHRpb24gcmUpIHsKICAgICAgICAgICAgICAgIC8vIHJlc2V0IHN0cmF0\nZWd5CiAgICAgICAgICAgICAgICBfc3RyYXRlZ3kgPSBvcmlnOwogICAgICAg\nICAgICAgICAgdGhyb3cgcmU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAg\nICB9CgogICAgLyoqCiAgICAgKiBUaGUgbWFwcGluZydzIHByaW1hcnkgdGFi\nbGUuCiAgICAgKi8KICAgIHB1YmxpYyBUYWJsZSBnZXRUYWJsZSgpIHsKICAg\nICAgICByZXR1cm4gX3RhYmxlOwogICAgfQoKICAgIC8qKgogICAgICogVGhl\nIG1hcHBpbmcncyBwcmltYXJ5IHRhYmxlLgogICAgICovCiAgICBwdWJsaWMg\ndm9pZCBzZXRUYWJsZShUYWJsZSB0YWJsZSkgewogICAgICAgIF90YWJsZSA9\nIHRhYmxlOwogICAgfQoKICAgIC8qKgogICAgICogVGhlIGNvbHVtbnMgdGhp\ncyBtYXBwaW5nIHVzZXMgdG8gdW5pcXVlbHkgaWRlbnRpZnkgYW4gb2JqZWN0\nLgogICAgICogVGhlc2Ugd2lsbCB0eXBpY2FsbHkgYmUgdGhlIHByaW1hcnkg\na2V5IGNvbHVtbnMgb3IgdGhlIGNvbHVtbnMgdGhpcwogICAgICogY2xhc3Mg\ndXNlcyB0byBsaW5rIHRvIGl0cyBzdXBlcmNsYXNzIHRhYmxlLgogICAgICov\nCiAgICBwdWJsaWMgQ29sdW1uW10gZ2V0UHJpbWFyeUtleUNvbHVtbnMoKSB7\nCiAgICAgICAgaWYgKF9jb2xzLmxlbmd0aCA9PSAwICYmIGdldElkZW50aXR5\nVHlwZSgpID09IElEX0FQUExJQ0FUSU9OCiAgICAgICAgICAgICYmIGlzTWFw\ncGVkKCkpIHsKICAgICAgICAgICAgRmllbGRNYXBwaW5nW10gcGtzID0gZ2V0\nUHJpbWFyeUtleUZpZWxkTWFwcGluZ3MoKTsKICAgICAgICAgICAgQ29sbGVj\ndGlvbiBjb2xzID0gbmV3IEFycmF5TGlzdChwa3MubGVuZ3RoKTsKICAgICAg\nICAgICAgQ29sdW1uW10gZmllbGRDb2xzOwogICAgICAgICAgICBmb3IgKGlu\ndCBpID0gMDsgaSA8IHBrcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAg\nICAgZmllbGRDb2xzID0gcGtzW2ldLmdldENvbHVtbnMoKTsKICAgICAgICAg\nICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgZmllbGRDb2xzLmxlbmd0aDsg\naisrKQogICAgICAgICAgICAgICAgICAgIGNvbHMuYWRkKGZpZWxkQ29sc1tq\nXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgX2NvbHMgPSAoQ29sdW1u\nW10pIGNvbHMudG9BcnJheShuZXcgQ29sdW1uW2NvbHMuc2l6ZSgpXSk7CiAg\nICAgICAgfQogICAgICAgIHJldHVybiBfY29sczsKICAgIH0KCiAgICAvKioK\nICAgICAqIFRoZSBjb2x1bW5zIHRoaXMgbWFwcGluZyB1c2VzIHRvIHVuaXF1\nZWx5IGlkZW50aWZ5IGFuIG9iamVjdC4KICAgICAqIFRoZXNlIHdpbGwgdHlw\naWNhbGx5IGJlIHRoZSBwcmltYXJ5IGtleSBjb2x1bW5zIG9yIHRoZSBjb2x1\nbW5zIHRoaXMKICAgICAqIGNsYXNzIHVzZXMgdG8gbGluayB0byBpdHMgc3Vw\nZXJjbGFzcyB0YWJsZS4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0UHJp\nbWFyeUtleUNvbHVtbnMoQ29sdW1uW10gY29scykgewogICAgICAgIGlmIChj\nb2xzID09IG51bGwpCiAgICAgICAgICAgIGNvbHMgPSBTY2hlbWFzLkVNUFRZ\nX0NPTFVNTlM7CiAgICAgICAgX2NvbHMgPSBjb2xzOwogICAgfQoKICAgIC8q\nKgogICAgICogSS9PIGluZm9ybWF0aW9uIG9uIHRoZSBrZXkgY29sdW1ucyAv\nIGpvaW4ga2V5LgogICAgICovCiAgICBwdWJsaWMgQ29sdW1uSU8gZ2V0Q29s\ndW1uSU8oKSB7CiAgICAgICAgcmV0dXJuIChfaW8gPT0gbnVsbCkgPyBDb2x1\nbW5JTy5VTlJFU1RSSUNURUQgOiBfaW87CiAgICB9CgogICAgLyoqCiAgICAg\nKiBJL08gaW5mb3JtYXRpb24gb24gdGhlIGtleSBjb2x1bW5zIC8gam9pbiBr\nZXkuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldENvbHVtbklPKENvbHVt\nbklPIGlvKSB7CiAgICAgICAgX2lvID0gaW87CiAgICB9CgogICAgLyoqCiAg\nICAgKiBGb3JlaWduIGtleSBsaW5raW5nIHRoZSBwcmltYXJ5IGtleSBjb2x1\nbW5zIHRvIHRoZSBzdXBlcmNsYXNzIHRhYmxlLAogICAgICogb3IgbnVsbCBp\nZiBub25lLgogICAgICovCiAgICBwdWJsaWMgRm9yZWlnbktleSBnZXRKb2lu\nRm9yZWlnbktleSgpIHsKICAgICAgICByZXR1cm4gX2ZrOwogICAgfQoKICAg\nIC8qKgogICAgICogRm9yZWlnbiBrZXkgbGlua2luZyB0aGUgcHJpbWFyeSBr\nZXkgY29sdW1ucyB0byB0aGUgc3VwZXJjbGFzcyB0YWJsZSwKICAgICAqIG9y\nIG51bGwgaWYgbm9uZS4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0Sm9p\nbkZvcmVpZ25LZXkoRm9yZWlnbktleSBmaykgewogICAgICAgIF9mayA9IGZr\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHJlZlNjaGVtYUNvbXBvbmVudHMo\nKSB7CiAgICAgICAgaWYgKGdldEVtYmVkZGluZ01ldGFEYXRhKCkgPT0gbnVs\nbCkgewogICAgICAgICAgICBpZiAoX3RhYmxlICE9IG51bGwgJiYgX3RhYmxl\nLmdldFByaW1hcnlLZXkoKSAhPSBudWxsKQogICAgICAgICAgICAgICAgX3Rh\nYmxlLmdldFByaW1hcnlLZXkoKS5yZWYoKTsKICAgICAgICAgICAgaWYgKF9m\nayAhPSBudWxsKQogICAgICAgICAgICAgICAgX2ZrLnJlZigpOwogICAgICAg\nICAgICBDb2x1bW5bXSBwa3MgPSBnZXRQcmltYXJ5S2V5Q29sdW1ucygpOwog\nICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBrcy5sZW5ndGg7IGkr\nKykKICAgICAgICAgICAgICAgIHBrc1tpXS5yZWYoKTsKICAgICAgICB9IGVs\nc2UgewogICAgICAgICAgICBGaWVsZE1hcHBpbmdbXSBmaWVsZHMgPSBnZXRG\naWVsZE1hcHBpbmdzKCk7CiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBp\nIDwgZmllbGRzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICAgICAgZmllbGRz\nW2ldLnJlZlNjaGVtYUNvbXBvbmVudHMoKTsKICAgICAgICB9CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBDbGVhciBtYXBwaW5nIGluZm9ybWF0aW9uLCBpbmNs\ndWRpbmcgc3RyYXRlZ3kuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIGNsZWFy\nTWFwcGluZygpIHsKICAgICAgICBfc3RyYXRlZ3kgPSBudWxsOwogICAgICAg\nIF9jb2xzID0gU2NoZW1hcy5FTVBUWV9DT0xVTU5TOwogICAgICAgIF9mayA9\nIG51bGw7CiAgICAgICAgX3RhYmxlID0gbnVsbDsKICAgICAgICBfaW5mby5j\nbGVhcigpOwogICAgICAgIHNldFJlc29sdmUoTU9ERV9NQVBQSU5HIHwgTU9E\nRV9NQVBQSU5HX0lOSVQsIGZhbHNlKTsKICAgIH0KCiAgICAvKioKICAgICAq\nIFVwZGF0ZSB7QGxpbmsgTWFwcGluZ0luZm99IHdpdGggb3VyIGN1cnJlbnQg\nbWFwcGluZyBpbmZvcm1hdGlvbi4KICAgICAqLwogICAgcHVibGljIHZvaWQg\nc3luY01hcHBpbmdJbmZvKCkgewogICAgICAgIGlmIChnZXRFbWJlZGRpbmdN\nZXRhRGF0YSgpID09IG51bGwpCiAgICAgICAgICAgIF9pbmZvLnN5bmNXaXRo\nKHRoaXMpOwogICAgICAgIGVsc2UgewogICAgICAgICAgICBfaW5mby5jbGVh\ncigpOwogICAgICAgICAgICBGaWVsZE1hcHBpbmdbXSBmaWVsZHMgPSBnZXRG\naWVsZE1hcHBpbmdzKCk7CiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBp\nIDwgZmllbGRzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICAgICAgZmllbGRz\nW2ldLnN5bmNNYXBwaW5nSW5mbygpOwogICAgICAgIH0KICAgIH0KCiAgICAv\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAvLyBNZXRhRGF0YSBpbnRlcmZh\nY2UKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICBwcm90ZWN0ZWQg\ndm9pZCBzZXREZXNjcmliZWRUeXBlKENsYXNzIHR5cGUpIHsKICAgICAgICBz\ndXBlci5zZXREZXNjcmliZWRUeXBlKHR5cGUpOwogICAgICAgIC8vIHRoaXMg\nbWV0aG9kIGNhbGxlZCBmcm9tIHN1cGVyY2xhc3MgY29uc3RydWN0b3IsIHNv\nIF9pbmZvIG5vdCB5ZXQKICAgICAgICAvLyBpbml0aWFsaXplZAogICAgICAg\nIGlmIChfaW5mbyAhPSBudWxsKQogICAgICAgICAgICBfaW5mby5zZXRDbGFz\nc05hbWUodHlwZS5nZXROYW1lKCkpOwogICAgfQoKICAgIC8qKgogICAgICog\nVGhlIHN1YmNsYXNzIGZldGNoIG1vZGUsIGFzIG9uZSBvZiB0aGUgZWFnZXIg\nY29uc3RhbnRzIGluCiAgICAgKiB7QGxpbmsgSkRCQ0ZldGNoQ29uZmlndXJh\ndGlvbn0uCiAgICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0U3ViY2xhc3NGZXRj\naE1vZGUoKSB7CiAgICAgICAgaWYgKF9zdWJjbGFzc01vZGUgPT0gSW50ZWdl\nci5NQVhfVkFMVUUpIHsKICAgICAgICAgICAgaWYgKGdldFBDU3VwZXJjbGFz\ncygpICE9IG51bGwpCiAgICAgICAgICAgICAgICBfc3ViY2xhc3NNb2RlID0g\nZ2V0UENTdXBlcmNsYXNzTWFwcGluZygpLgogICAgICAgICAgICAgICAgICAg\nIGdldFN1YmNsYXNzRmV0Y2hNb2RlKCk7CiAgICAgICAgICAgIGVsc2UKICAg\nICAgICAgICAgICAgIF9zdWJjbGFzc01vZGUgPSBGZXRjaENvbmZpZ3VyYXRp\nb24uREVGQVVMVDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIF9zdWJjbGFz\nc01vZGU7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgc3ViY2xhc3MgZmV0\nY2ggbW9kZSwgYXMgb25lIG9mIHRoZSBlYWdlciBjb25zdGFudHMgaW4KICAg\nICAqIHtAbGluayBKREJDRmV0Y2hDb25maWd1cmF0aW9ufS4KICAgICAqLwog\nICAgcHVibGljIHZvaWQgc2V0U3ViY2xhc3NGZXRjaE1vZGUoaW50IG1vZGUp\nIHsKICAgICAgICBfc3ViY2xhc3NNb2RlID0gbW9kZTsKICAgIH0KCiAgICAv\nKioKICAgICAqIENvbnZlbmllbmNlIG1ldGhvZCB0byBwZXJmb3JtIGNhc3Qg\nZnJvbQogICAgICoge0BsaW5rIENsYXNzTWV0YURhdGEjZ2V0UmVwb3NpdG9y\neX0uCiAgICAgKi8KICAgIHB1YmxpYyBNYXBwaW5nUmVwb3NpdG9yeSBnZXRN\nYXBwaW5nUmVwb3NpdG9yeSgpIHsKICAgICAgICByZXR1cm4gKE1hcHBpbmdS\nZXBvc2l0b3J5KSBnZXRSZXBvc2l0b3J5KCk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBDb252ZW5pZW5jZSBtZXRob2QgdG8gcGVyZm9ybSBjYXN0IGZyb20K\nICAgICAqIHtAbGluayBDbGFzc01ldGFEYXRhI2dldEVtYmVkZGluZ01ldGFE\nYXRhfQogICAgICovCiAgICBwdWJsaWMgVmFsdWVNYXBwaW5nIGdldEVtYmVk\nZGluZ01hcHBpbmcoKSB7CiAgICAgICAgcmV0dXJuIChWYWx1ZU1hcHBpbmcp\nIGdldEVtYmVkZGluZ01ldGFEYXRhKCk7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBjbGFzcyBkb2VzIG5vdCB1c2UgdGhl\nICJub25lIiBzdHJhdGVneSAoaW5jbHVkaW5nCiAgICAgKiBpZiBpdCBoYXMg\nYSBudWxsIHN0cmF0ZWd5LCBhbmQgdGhlcmVmb3JlIGlzIHByb2JhYmx5IGlu\nIHRoZSBwcm9jZXNzIG9mCiAgICAgKiBiZWluZyBtYXBwZWQpLgogICAgICov\nCiAgICBwdWJsaWMgYm9vbGVhbiBpc01hcHBlZCgpIHsKICAgICAgICBpZiAo\nIXN1cGVyLmlzTWFwcGVkKCkpCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsK\nICAgICAgICBpZiAoX3N0cmF0ZWd5ICE9IG51bGwpCiAgICAgICAgICAgIHJl\ndHVybiBfc3RyYXRlZ3kgIT0gTm9uZUNsYXNzU3RyYXRlZ3kuZ2V0SW5zdGFu\nY2UoKTsKICAgICAgICByZXR1cm4gIU5vbmVDbGFzc1N0cmF0ZWd5LkFMSUFT\nLmVxdWFscyhfaW5mby5nZXRTdHJhdGVneSgpKTsKICAgIH0KCiAgICAvKioK\nICAgICAqIENvbnZlbmllbmNlIG1ldGhvZCB0byBwZXJmb3JtIGNhc3QgZnJv\nbQogICAgICoge0BsaW5rIENsYXNzTWV0YURhdGEjZ2V0UENTdXBlcmNsYXNz\nTWV0YURhdGF9LgogICAgICovCiAgICBwdWJsaWMgQ2xhc3NNYXBwaW5nIGdl\ndFBDU3VwZXJjbGFzc01hcHBpbmcoKSB7CiAgICAgICAgcmV0dXJuIChDbGFz\nc01hcHBpbmcpIGdldFBDU3VwZXJjbGFzc01ldGFEYXRhKCk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBDb252ZW5pZW5jZSBtZXRob2QgdG8gcGVyZm9ybSBj\nYXN0IGZyb20KICAgICAqIHtAbGluayBDbGFzc01ldGFEYXRhI2dldE1hcHBl\nZFBDU3VwZXJjbGFzc01ldGFEYXRhfS4KICAgICAqLwogICAgcHVibGljIENs\nYXNzTWFwcGluZyBnZXRNYXBwZWRQQ1N1cGVyY2xhc3NNYXBwaW5nKCkgewog\nICAgICAgIHJldHVybiAoQ2xhc3NNYXBwaW5nKSBnZXRNYXBwZWRQQ1N1cGVy\nY2xhc3NNZXRhRGF0YSgpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJu\nIHRoZSBuZWFyZXN0IG1hcHBlZCBzdXBlcmNsYXNzIHRoYXQgY2FuIGpvaW4g\ndG8gdGhpcyBjbGFzcy4KICAgICAqLwogICAgcHVibGljIENsYXNzTWFwcGlu\nZyBnZXRKb2luYWJsZVBDU3VwZXJjbGFzc01hcHBpbmcoKSB7CiAgICAgICAg\nQ2xhc3NNYXBwaW5nIHN1cCA9IGdldE1hcHBlZFBDU3VwZXJjbGFzc01hcHBp\nbmcoKTsKICAgICAgICBpZiAoc3VwID09IG51bGwpCiAgICAgICAgICAgIHJl\ndHVybiBudWxsOwogICAgICAgIGlmIChfZmsgIT0gbnVsbCB8fCBfdGFibGUg\nPT0gbnVsbCB8fCBfdGFibGUuZXF1YWxzKHN1cC5nZXRUYWJsZSgpKSkKICAg\nICAgICAgICAgcmV0dXJuIHN1cDsKICAgICAgICByZXR1cm4gbnVsbDsKICAg\nIH0KCiAgICAvKioKICAgICAqIENvbnZlbmllbmNlIG1ldGhvZCB0byBwZXJm\nb3JtIGNhc3QgZnJvbQogICAgICoge0BsaW5rIENsYXNzTWV0YURhdGEjZ2V0\nUENTdWJjbGFzc01ldGFEYXRhc30uCiAgICAgKi8KICAgIHB1YmxpYyBDbGFz\nc01hcHBpbmdbXSBnZXRQQ1N1YmNsYXNzTWFwcGluZ3MoKSB7CiAgICAgICAg\ncmV0dXJuIChDbGFzc01hcHBpbmdbXSkgZ2V0UENTdWJjbGFzc01ldGFEYXRh\ncygpOwogICAgfQoKICAgIC8qKgogICAgICogQ29udmVuaWVuY2UgbWV0aG9k\nIHRvIHBlcmZvcm0gY2FzdCBmcm9tCiAgICAgKiB7QGxpbmsgQ2xhc3NNZXRh\nRGF0YSNnZXRNYXBwZWRQQ1N1YmNsYXNzTWV0YURhdGFzfS4KICAgICAqLwog\nICAgcHVibGljIENsYXNzTWFwcGluZ1tdIGdldE1hcHBlZFBDU3ViY2xhc3NN\nYXBwaW5ncygpIHsKICAgICAgICByZXR1cm4gKENsYXNzTWFwcGluZ1tdKSBn\nZXRNYXBwZWRQQ1N1YmNsYXNzTWV0YURhdGFzKCk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBSZXR1cm4gbWFwcGVkIHN1YmNsYXNzZXMgdGhhdCBhcmUgcmVh\nY2hhYmxlIHZpYSBqb2lucy4KICAgICAqLwogICAgcHVibGljIENsYXNzTWFw\ncGluZ1tdIGdldEpvaW5hYmxlUENTdWJjbGFzc01hcHBpbmdzKCkgewogICAg\nICAgIENsYXNzTWFwcGluZ1tdIHN1YnMgPSBnZXRNYXBwZWRQQ1N1YmNsYXNz\nTWFwcGluZ3MoKTsgLy8gY2hlY2tzIGZvciBuZXcKICAgICAgICBpZiAoX2pv\naW5TdWJNYXBzID09IG51bGwpIHsKICAgICAgICAgICAgaWYgKHN1YnMubGVu\nZ3RoID09IDApCiAgICAgICAgICAgICAgICBfam9pblN1Yk1hcHMgPSBzdWJz\nOwogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIExpc3Qgam9p\nbmFibGUgPSBuZXcgQXJyYXlMaXN0KHN1YnMubGVuZ3RoKTsKICAgICAgICAg\nICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc3Vicy5sZW5ndGg7IGkrKykK\nICAgICAgICAgICAgICAgICAgICBpZiAoaXNTdWJKb2luYWJsZShzdWJzW2ld\nKSkKICAgICAgICAgICAgICAgICAgICAgICAgam9pbmFibGUuYWRkKHN1YnNb\naV0pOwogICAgICAgICAgICAgICAgX2pvaW5TdWJNYXBzID0gKENsYXNzTWFw\ncGluZ1tdKSBqb2luYWJsZS50b0FycmF5CiAgICAgICAgICAgICAgICAgICAg\nKG5ldyBDbGFzc01hcHBpbmdbam9pbmFibGUuc2l6ZSgpXSk7CiAgICAgICAg\nICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIF9qb2luU3ViTWFwczsK\nICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB3aGV0aGVyIHdlIGNhbiBy\nZWFjaCB0aGUgZ2l2ZW4gc3ViY2xhc3MgdmlhIGpvaW5zLgogICAgICovCiAg\nICBwcml2YXRlIGJvb2xlYW4gaXNTdWJKb2luYWJsZShDbGFzc01hcHBpbmcg\nc3ViKSB7CiAgICAgICAgaWYgKHN1YiA9PSBudWxsKQogICAgICAgICAgICBy\nZXR1cm4gZmFsc2U7CiAgICAgICAgaWYgKHN1YiA9PSB0aGlzKQogICAgICAg\nICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICByZXR1cm4gaXNTdWJKb2luYWJs\nZShzdWIuZ2V0Sm9pbmFibGVQQ1N1cGVyY2xhc3NNYXBwaW5nKCkpOwogICAg\nfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgY2xvc2VzdC1kZXJpdmVk\nIGxpc3Qgb2Ygbm9uLWludGVyLWpvaW5hYmxlIG1hcHBlZCB0eXBlcwogICAg\nICogYXNzaWduYWJsZSB0byB0aGlzIHR5cGUuIE1heSByZXR1cm4gdGhpcyBt\nYXBwaW5nLgogICAgICovCiAgICBwdWJsaWMgQ2xhc3NNYXBwaW5nW10gZ2V0\nSW5kZXBlbmRlbnRBc3NpZ25hYmxlTWFwcGluZ3MoKSB7CiAgICAgICAgQ2xh\nc3NNYXBwaW5nW10gc3VicyA9IGdldE1hcHBlZFBDU3ViY2xhc3NNYXBwaW5n\ncygpOyAvLyBjaGVja3MgZm9yIG5ldwogICAgICAgIGlmIChfYXNzaWduTWFw\ncyA9PSBudWxsKSB7CiAgICAgICAgICAgIC8vIHJlbW92ZSB1bm1hcHBlZCBz\ndWJzCiAgICAgICAgICAgIGlmIChzdWJzLmxlbmd0aCA9PSAwKSB7CiAgICAg\nICAgICAgICAgICBpZiAoaXNNYXBwZWQoKSkKICAgICAgICAgICAgICAgICAg\nICBfYXNzaWduTWFwcyA9IG5ldyBDbGFzc01hcHBpbmdbXXsgdGhpcyB9Owog\nICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIF9hc3Np\nZ25NYXBzID0gc3ViczsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAg\nICAgICAgIGludCBzaXplID0gKGludCkgKHN1YnMubGVuZ3RoICogMS4zMyAr\nIDIpOwogICAgICAgICAgICAgICAgU2V0IGluZGVwZW5kZW50ID0gbmV3IExp\nbmtlZEhhc2hTZXQoc2l6ZSk7CiAgICAgICAgICAgICAgICBpZiAoaXNNYXBw\nZWQoKSkKICAgICAgICAgICAgICAgICAgICBpbmRlcGVuZGVudC5hZGQodGhp\ncyk7CiAgICAgICAgICAgICAgICBpbmRlcGVuZGVudC5hZGRBbGwoQXJyYXlz\nLmFzTGlzdChzdWJzKSk7CgogICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGFs\nbCBtYXBwaW5ncyB0aGF0IGhhdmUgYSBzdXBlcmNsYXNzIG1hcHBpbmcgaW4g\ndGhlIHNldAogICAgICAgICAgICAgICAgQ2xhc3NNYXBwaW5nIG1hcCwgc3Vw\nOwogICAgICAgICAgICAgICAgTGlzdCBjbGVhciA9IG51bGw7CiAgICAgICAg\nICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9IGluZGVwZW5kZW50Lml0ZXJh\ndG9yKCk7IGl0ci5oYXNOZXh0KCk7KSB7CiAgICAgICAgICAgICAgICAgICAg\nbWFwID0gKENsYXNzTWFwcGluZykgaXRyLm5leHQoKTsKICAgICAgICAgICAg\nICAgICAgICBzdXAgPSBtYXAuZ2V0Sm9pbmFibGVQQ1N1cGVyY2xhc3NNYXBw\naW5nKCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHN1cCAhPSBudWxsICYm\nIGluZGVwZW5kZW50LmNvbnRhaW5zKHN1cCkpIHsKICAgICAgICAgICAgICAg\nICAgICAgICAgaWYgKGNsZWFyID09IG51bGwpCiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICBjbGVhciA9IG5ldyBBcnJheUxpc3QoaW5kZXBlbmRlbnQu\nc2l6ZSgpIC0gMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyLmFk\nZChtYXApOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAg\nIH0KICAgICAgICAgICAgICAgIGlmIChjbGVhciAhPSBudWxsKQogICAgICAg\nICAgICAgICAgICAgIGluZGVwZW5kZW50LnJlbW92ZUFsbChjbGVhcik7Cgog\nICAgICAgICAgICAgICAgX2Fzc2lnbk1hcHMgPSAoQ2xhc3NNYXBwaW5nW10p\nIGluZGVwZW5kZW50LnRvQXJyYXkKICAgICAgICAgICAgICAgICAgICAobmV3\nIENsYXNzTWFwcGluZ1tpbmRlcGVuZGVudC5zaXplKCldKTsKICAgICAgICAg\nICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gX2Fzc2lnbk1hcHM7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBDb252ZW5pZW5jZSBtZXRob2QgdG8gcGVy\nZm9ybSBjYXN0IGZyb20ge0BsaW5rIENsYXNzTWV0YURhdGEjZ2V0RmllbGRz\nfS4KICAgICAqLwogICAgcHVibGljIEZpZWxkTWFwcGluZ1tdIGdldEZpZWxk\nTWFwcGluZ3MoKSB7CiAgICAgICAgcmV0dXJuIChGaWVsZE1hcHBpbmdbXSkg\nZ2V0RmllbGRzKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDb252ZW5pZW5j\nZSBtZXRob2QgdG8gcGVyZm9ybSBjYXN0IGZyb20KICAgICAqIHtAbGluayBD\nbGFzc01ldGFEYXRhI2dldERlY2xhcmVkRmllbGRzfS4KICAgICAqLwogICAg\ncHVibGljIEZpZWxkTWFwcGluZ1tdIGdldERlY2xhcmVkRmllbGRNYXBwaW5n\ncygpIHsKICAgICAgICByZXR1cm4gKEZpZWxkTWFwcGluZ1tdKSBnZXREZWNs\nYXJlZEZpZWxkcygpOwogICAgfQoKICAgIC8qKgogICAgICogQ29udmVuaWVu\nY2UgbWV0aG9kIHRvIHBlcmZvcm0gY2FzdCBmcm9tCiAgICAgKiB7QGxpbmsg\nQ2xhc3NNZXRhRGF0YSNnZXRQcmltYXJ5S2V5RmllbGRzfS4KICAgICAqLwog\nICAgcHVibGljIEZpZWxkTWFwcGluZ1tdIGdldFByaW1hcnlLZXlGaWVsZE1h\ncHBpbmdzKCkgewogICAgICAgIHJldHVybiAoRmllbGRNYXBwaW5nW10pIGdl\ndFByaW1hcnlLZXlGaWVsZHMoKTsKICAgIH0KCiAgICAvKioKICAgICAqIENv\nbnZlbmllbmNlIG1ldGhvZCB0byBwZXJmb3JtIGNhc3QgZnJvbQogICAgICog\ne0BsaW5rIENsYXNzTWV0YURhdGEjZ2V0VmVyc2lvbkZpZWxkfS4KICAgICAq\nLwogICAgcHVibGljIEZpZWxkTWFwcGluZyBnZXRWZXJzaW9uRmllbGRNYXBw\naW5nKCkgewogICAgICAgIHJldHVybiAoRmllbGRNYXBwaW5nKSBnZXRWZXJz\naW9uRmllbGQoKTsKICAgIH0KCiAgICAvKioKICAgICAqIENvbnZlbmllbmNl\nIG1ldGhvZCB0byBwZXJmb3JtIGNhc3QgZnJvbQogICAgICoge0BsaW5rIENs\nYXNzTWV0YURhdGEjZ2V0RGVmYXVsdEZldGNoR3JvdXBGaWVsZHN9LgogICAg\nICovCiAgICBwdWJsaWMgRmllbGRNYXBwaW5nW10gZ2V0RGVmYXVsdEZldGNo\nR3JvdXBGaWVsZE1hcHBpbmdzKCkgewogICAgICAgIHJldHVybiAoRmllbGRN\nYXBwaW5nW10pIGdldERlZmF1bHRGZXRjaEdyb3VwRmllbGRzKCk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBDb252ZW5pZW5jZSBtZXRob2QgdG8gcGVyZm9y\nbSBjYXN0IGZyb20KICAgICAqIHtAbGluayBDbGFzc01ldGFEYXRhI2dldERl\nZmluZWRGaWVsZHN9LgogICAgICovCiAgICBwdWJsaWMgRmllbGRNYXBwaW5n\nW10gZ2V0RGVmaW5lZEZpZWxkTWFwcGluZ3MoKSB7CiAgICAgICAgcmV0dXJu\nIChGaWVsZE1hcHBpbmdbXSkgZ2V0RGVmaW5lZEZpZWxkcygpOwogICAgfQoK\nICAgIC8qKgogICAgICogQ29udmVuaWVuY2UgbWV0aG9kIHRvIHBlcmZvcm0g\nY2FzdCBmcm9tCiAgICAgKiB7QGxpbmsgQ2xhc3NNZXRhRGF0YSNnZXRGaWVs\nZHNJbkxpc3RpbmdPcmRlcn0uCiAgICAgKi8KICAgIHB1YmxpYyBGaWVsZE1h\ncHBpbmdbXSBnZXRGaWVsZE1hcHBpbmdzSW5MaXN0aW5nT3JkZXIoKSB7CiAg\nICAgICAgcmV0dXJuIChGaWVsZE1hcHBpbmdbXSkgZ2V0RmllbGRzSW5MaXN0\naW5nT3JkZXIoKTsKICAgIH0KCiAgICAvKioKICAgICAqIENvbnZlbmllbmNl\nIG1ldGhvZCB0byBwZXJmb3JtIGNhc3QgZnJvbQogICAgICoge0BsaW5rIENs\nYXNzTWV0YURhdGEjZ2V0RGVmaW5lZEZpZWxkc0luTGlzdGluZ09yZGVyfS4K\nICAgICAqLwogICAgcHVibGljIEZpZWxkTWFwcGluZ1tdIGdldERlZmluZWRG\naWVsZE1hcHBpbmdzSW5MaXN0aW5nT3JkZXIoKSB7CiAgICAgICAgcmV0dXJu\nIChGaWVsZE1hcHBpbmdbXSkgZ2V0RGVmaW5lZEZpZWxkc0luTGlzdGluZ09y\nZGVyKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDb252ZW5pZW5jZSBtZXRo\nb2QgdG8gcGVyZm9ybSBjYXN0IGZyb20ge0BsaW5rIENsYXNzTWV0YURhdGEj\nZ2V0RmllbGR9LgogICAgICovCiAgICBwdWJsaWMgRmllbGRNYXBwaW5nIGdl\ndEZpZWxkTWFwcGluZyhpbnQgaW5kZXgpIHsKICAgICAgICByZXR1cm4gKEZp\nZWxkTWFwcGluZykgZ2V0RmllbGQoaW5kZXgpOwogICAgfQoKICAgIC8qKgog\nICAgICogQ29udmVuaWVuY2UgbWV0aG9kIHRvIHBlcmZvcm0gY2FzdCBmcm9t\nCiAgICAgKiB7QGxpbmsgQ2xhc3NNZXRhRGF0YSNnZXREZWNsYXJlZEZpZWxk\nfS4KICAgICAqLwogICAgcHVibGljIEZpZWxkTWFwcGluZyBnZXREZWNsYXJl\nZEZpZWxkTWFwcGluZyhpbnQgaW5kZXgpIHsKICAgICAgICByZXR1cm4gKEZp\nZWxkTWFwcGluZykgZ2V0RGVjbGFyZWRGaWVsZChpbmRleCk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBDb252ZW5pZW5jZSBtZXRob2QgdG8gcGVyZm9ybSBj\nYXN0IGZyb20ge0BsaW5rIENsYXNzTWV0YURhdGEjZ2V0RmllbGR9LgogICAg\nICovCiAgICBwdWJsaWMgRmllbGRNYXBwaW5nIGdldEZpZWxkTWFwcGluZyhT\ndHJpbmcgbmFtZSkgewogICAgICAgIHJldHVybiAoRmllbGRNYXBwaW5nKSBn\nZXRGaWVsZChuYW1lKTsKICAgIH0KCiAgICAvKioKICAgICAqIENvbnZlbmll\nbmNlIG1ldGhvZCB0byBwZXJmb3JtIGNhc3QgZnJvbQogICAgICoge0BsaW5r\nIENsYXNzTWV0YURhdGEjZ2V0RGVjbGFyZWRGaWVsZH0uCiAgICAgKi8KICAg\nIHB1YmxpYyBGaWVsZE1hcHBpbmcgZ2V0RGVjbGFyZWRGaWVsZE1hcHBpbmco\nU3RyaW5nIG5hbWUpIHsKICAgICAgICByZXR1cm4gKEZpZWxkTWFwcGluZykg\nZ2V0RGVjbGFyZWRGaWVsZChuYW1lKTsKICAgIH0KCiAgICAvKioKICAgICAq\nIENvbnZlbmllbmNlIG1ldGhvZCB0byBwZXJmb3JtIGNhc3QgZnJvbQogICAg\nICoge0BsaW5rIENsYXNzTWV0YURhdGEjZ2V0RGVjbGFyZWRVbm1hbmFnZWRG\naWVsZHN9LgogICAgICovCiAgICBwdWJsaWMgRmllbGRNYXBwaW5nW10gZ2V0\nRGVjbGFyZWRVbm1hbmFnZWRGaWVsZE1hcHBpbmdzKCkgewogICAgICAgIHJl\ndHVybiAoRmllbGRNYXBwaW5nW10pIGdldERlY2xhcmVkVW5tYW5hZ2VkRmll\nbGRzKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDb252ZW5pZW5jZSBtZXRo\nb2QgdG8gcGVyZm9ybSBjYXN0IGZyb20KICAgICAqIHtAbGluayBDbGFzc01l\ndGFEYXRhI2FkZERlY2xhcmVkRmllbGR9LgogICAgICovCiAgICBwdWJsaWMg\nRmllbGRNYXBwaW5nIGFkZERlY2xhcmVkRmllbGRNYXBwaW5nKFN0cmluZyBu\nYW1lLCBDbGFzcyB0eXBlKSB7CiAgICAgICAgcmV0dXJuIChGaWVsZE1hcHBp\nbmcpIGFkZERlY2xhcmVkRmllbGQobmFtZSwgdHlwZSk7CiAgICB9CgogICAg\ncHJvdGVjdGVkIHZvaWQgcmVzb2x2ZU1hcHBpbmcoYm9vbGVhbiBydW50aW1l\nKSB7CiAgICAgICAgc3VwZXIucmVzb2x2ZU1hcHBpbmcocnVudGltZSk7Cgog\nICAgICAgIC8vIG1hcCBjbGFzcyBzdHJhdGVneTsgaXQgbWF5IGFscmVhZHkg\nYmUgbWFwcGVkIGJ5IHRoZSByZXBvc2l0b3J5IGJlZm9yZQogICAgICAgIC8v\nIHRoZSByZXNvbHZlIHByb2Nlc3MgYmVnaW5zCiAgICAgICAgTWFwcGluZ1Jl\ncG9zaXRvcnkgcmVwb3MgPSBnZXRNYXBwaW5nUmVwb3NpdG9yeSgpOwogICAg\nICAgIGlmIChfc3RyYXRlZ3kgPT0gbnVsbCkKICAgICAgICAgICAgcmVwb3Mu\nZ2V0U3RyYXRlZ3lJbnN0YWxsZXIoKS5pbnN0YWxsU3RyYXRlZ3kodGhpcyk7\nCiAgICAgICAgTG9nIGxvZyA9IGdldFJlcG9zaXRvcnkoKS5nZXRMb2coKTsK\nICAgICAgICBpZiAobG9nLmlzVHJhY2VFbmFibGVkKCkpCiAgICAgICAgICAg\nIGxvZy50cmFjZShfbG9jLmdldCgic3RyYXRlZ3kiLCB0aGlzLCBfc3RyYXRl\nZ3kuZ2V0QWxpYXMoKSkpOwoKICAgICAgICAvLyBtYWtlIHN1cmUgdW5tYXBw\nZWQgc3VwZXJjbGFzcyBmaWVsZHMgYXJlIGRlZmluZWQgaWYgd2UncmUgbWFw\ncGVkOwogICAgICAgIC8vIGFsc28gbWF5IGhhdmUgYmVlbiBkb25lIGJ5IHJl\ncG9zaXRvcnkgYWxyZWFkeQogICAgICAgIGRlZmluZVN1cGVyY2xhc3NGaWVs\nZHMoZ2V0Sm9pbmFibGVQQ1N1cGVyY2xhc3NNYXBwaW5nKCkgPT0gbnVsbCk7\nCgogICAgICAgIC8vIHJlc29sdmUgZXZlcnl0aGluZyB0aGF0IGRvZXNuJ3Qg\ncmVseSBvbiBhbnkgcmVsYXRpb25zIHRvIGF2b2lkCiAgICAgICAgLy8gcmVj\ndXJzaW9uLCB0aGVuIHJlc29sdmUgYWxsIGZpZWxkcwogICAgICAgIHJlc29s\ndmVOb25SZWxhdGlvbk1hcHBpbmdzKCk7CiAgICAgICAgRmllbGRNYXBwaW5n\nW10gZm1zID0gZ2V0RmllbGRNYXBwaW5ncygpOwogICAgICAgIGZvciAoaW50\nIGkgPSAwOyBpIDwgZm1zLmxlbmd0aDsgaSsrKQogICAgICAgICAgICBpZiAo\nZm1zW2ldLmdldERlZmluaW5nTWV0YURhdGEoKSA9PSB0aGlzKQogICAgICAg\nICAgICAgICAgZm1zW2ldLnJlc29sdmUoTU9ERV9NQVBQSU5HKTsKICAgICAg\nICBmbXMgPSBnZXREZWNsYXJlZFVubWFuYWdlZEZpZWxkTWFwcGluZ3MoKTsK\nICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGZtcy5sZW5ndGg7IGkrKykK\nICAgICAgICAgICAgZm1zW2ldLnJlc29sdmUoTU9ERV9NQVBQSU5HKTsKCiAg\nICAgICAgLy8gbWFyayBtYXBwZWQgY29sdW1ucwogICAgICAgIGlmIChfY29s\ncyAhPSBudWxsKSB7CiAgICAgICAgICAgIENvbHVtbklPIGlvID0gZ2V0Q29s\ndW1uSU8oKTsKICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfY29s\ncy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgaWYgKGlvLmlzSW5z\nZXJ0YWJsZShpLCBmYWxzZSkpCiAgICAgICAgICAgICAgICAgICAgX2NvbHNb\naV0uc2V0RmxhZyhDb2x1bW4uRkxBR19ESVJFQ1RfSU5TRVJULCB0cnVlKTsK\nICAgICAgICAgICAgICAgIGlmIChpby5pc1VwZGF0YWJsZShpLCBmYWxzZSkp\nCiAgICAgICAgICAgICAgICAgICAgX2NvbHNbaV0uc2V0RmxhZyhDb2x1bW4u\nRkxBR19ESVJFQ1RfVVBEQVRFLCB0cnVlKTsKICAgICAgICAgICAgfQogICAg\nICAgIH0KICAgICAgICAvLyBvbmNlIGNvbHVtbnMgYXJlIHJlc29sdmVkLCBy\nZXNvbHZlIHVuaXF1ZSBjb25zdHJhaW50cyBhcyB0aGV5IG5lZWQKICAgICAg\nICAvLyB0aGUgY29sdW1ucyBiZSByZXNvbHZlZCAKICAgICAgICBfaW5mby5n\nZXRVbmlxdWVzKHRoaXMsIHRydWUpOwogICAgfQogICAgCiAgICAvKioKICAg\nICAqIFJlc29sdmUgbm9uLXJlbGF0aW9uIGZpZWxkIG1hcHBpbmdzIHNvIHRo\nYXQgd2hlbiB3ZSBkbyByZWxhdGlvbgogICAgICogbWFwcGluZ3MgdGhleSBj\nYW4gcmVseSBvbiB0aGVtIGZvciBqb2lucy4KICAgICAqLwogICAgdm9pZCBy\nZXNvbHZlTm9uUmVsYXRpb25NYXBwaW5ncygpIHsKICAgICAgICAvLyBtYWtl\nIHN1cmUgcHJpbWFyeSBrZXkgZmllbGRzIGFyZSByZXNvbHZlZCBmaXJzdCBi\nZWNhdXNlIG90aGVyCiAgICAgICAgLy8gZmllbGRzIG1pZ2h0IHJlbHkgb24g\ndGhlbQogICAgICAgIEZpZWxkTWFwcGluZ1tdIGZtcyA9IGdldFByaW1hcnlL\nZXlGaWVsZE1hcHBpbmdzKCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkg\nPCBmbXMubGVuZ3RoOyBpKyspCiAgICAgICAgICAgIGZtc1tpXS5yZXNvbHZl\nKE1PREVfTUFQUElORyk7CgogICAgICAgIC8vIHJlc29sdmUgZGVmaW5lZCBm\naWVsZHMgdGhhdCBhcmUgc2FmZTsgdGhhdCBkb24ndCByZWx5IG9uIG90aGVy\nIHR5cGVzCiAgICAgICAgLy8gYWxzbyBiZWluZyByZXNvbHZlZC4gIGRvbid0\nIHVzZSBnZXREZWZpbmVkRmllbGRzIGIvYyBpdCByZWxpZXMgb24KICAgICAg\nICAvLyB3aGV0aGVyIGZpZWxkcyBhcmUgbWFwcGVkLCB3aGljaCBpc24ndCBr\nbm93biB5ZXQKICAgICAgICBmbXMgPSBnZXRGaWVsZE1hcHBpbmdzKCk7CiAg\nICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBmbXMubGVuZ3RoOyBpKyspCiAg\nICAgICAgICAgIGlmIChmbXNbaV0uZ2V0RGVmaW5pbmdNZXRhRGF0YSgpID09\nIHRoaXMKICAgICAgICAgICAgICAgICYmICFmbXNbaV0uaXNUeXBlUEMoKSAm\nJiAhZm1zW2ldLmdldEtleSgpLmlzVHlwZVBDKCkKICAgICAgICAgICAgICAg\nICYmICFmbXNbaV0uZ2V0RWxlbWVudCgpLmlzVHlwZVBDKCkpCiAgICAgICAg\nICAgICAgICBmbXNbaV0ucmVzb2x2ZShNT0RFX01BUFBJTkcpOwoKICAgICAg\nICBfZGlzY3JpbS5yZXNvbHZlKE1PREVfTUFQUElORyk7CiAgICAgICAgX3Zl\ncnNpb24ucmVzb2x2ZShNT0RFX01BUFBJTkcpOyAgICAgICAgCiAgICB9Cgog\nICAgcHJvdGVjdGVkIHZvaWQgaW5pdGlhbGl6ZU1hcHBpbmcoKSB7CiAgICAg\nICAgc3VwZXIuaW5pdGlhbGl6ZU1hcHBpbmcoKTsKCiAgICAgICAgRmllbGRN\nYXBwaW5nW10gZmllbGRzID0gZ2V0RGVmaW5lZEZpZWxkTWFwcGluZ3MoKTsK\nICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGZpZWxkcy5sZW5ndGg7IGkr\nKykKICAgICAgICAgICAgZmllbGRzW2ldLnJlc29sdmUoTU9ERV9NQVBQSU5H\nX0lOSVQpOwogICAgICAgIF9kaXNjcmltLnJlc29sdmUoTU9ERV9NQVBQSU5H\nX0lOSVQpOwogICAgICAgIF92ZXJzaW9uLnJlc29sdmUoTU9ERV9NQVBQSU5H\nX0lOSVQpOwogICAgICAgIF9zdHJhdGVneS5pbml0aWFsaXplKCk7CiAgICB9\nCgogICAgcHJvdGVjdGVkIHZvaWQgY2xlYXJEZWZpbmVkRmllbGRDYWNoZSgp\nIHsKICAgICAgICAvLyBqdXN0IG1ha2UgdGhpcyBtZXRob2QgYXZhaWxhYmxl\nIHRvIG90aGVyIGNsYXNzZXMgaW4gdGhpcyBwYWNrYWdlCiAgICAgICAgc3Vw\nZXIuY2xlYXJEZWZpbmVkRmllbGRDYWNoZSgpOwogICAgfQoKICAgIHByb3Rl\nY3RlZCB2b2lkIGNsZWFyU3ViY2xhc3NDYWNoZSgpIHsKICAgICAgICBzdXBl\nci5jbGVhclN1YmNsYXNzQ2FjaGUoKTsKICAgICAgICBfam9pblN1Yk1hcHMg\nPSBudWxsOwogICAgICAgIF9hc3NpZ25NYXBzID0gbnVsbDsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCBjb3B5KENsYXNzTWV0YURhdGEgY2xzKSB7CiAgICAg\nICAgc3VwZXIuY29weShjbHMpOwogICAgICAgIGlmIChfc3ViY2xhc3NNb2Rl\nID09IEludGVnZXIuTUFYX1ZBTFVFKQogICAgICAgICAgICBfc3ViY2xhc3NN\nb2RlID0gKChDbGFzc01hcHBpbmcpIGNscykuZ2V0U3ViY2xhc3NGZXRjaE1v\nZGUoKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgYm9vbGVhbiB2YWxpZGF0ZURh\ndGFTdG9yZUV4dGVuc2lvblByZWZpeChTdHJpbmcgcHJlZml4KSB7CiAgICAg\nICAgcmV0dXJuICJqZGJjLSIuZXF1YWxzKHByZWZpeCk7CiAgICB9CgogICAg\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIC8vIENsYXNz\nU3RyYXRlZ3kgaW1wbGVtZW50YXRpb24KICAgIC8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vCgogICAgcHVibGljIFN0cmluZyBnZXRBbGlhcygp\nIHsKICAgICAgICByZXR1cm4gYXNzZXJ0U3RyYXRlZ3koKS5nZXRBbGlhcygp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIG1hcChib29sZWFuIGFkYXB0KSB7\nCiAgICAgICAgYXNzZXJ0U3RyYXRlZ3koKS5tYXAoYWRhcHQpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIGluaXRpYWxpemUoKSB7CiAgICAgICAgYXNzZXJ0\nU3RyYXRlZ3koKS5pbml0aWFsaXplKCk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgaW5zZXJ0KE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIEpEQkNTdG9yZSBz\ndG9yZSwgUm93TWFuYWdlciBybSkKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0\naW9uIHsKICAgICAgICBhc3NlcnRTdHJhdGVneSgpLmluc2VydChzbSwgc3Rv\ncmUsIHJtKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB1cGRhdGUoT3BlbkpQ\nQVN0YXRlTWFuYWdlciBzbSwgSkRCQ1N0b3JlIHN0b3JlLCBSb3dNYW5hZ2Vy\nIHJtKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIGFz\nc2VydFN0cmF0ZWd5KCkudXBkYXRlKHNtLCBzdG9yZSwgcm0pOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIGRlbGV0ZShPcGVuSlBBU3RhdGVNYW5hZ2VyIHNt\nLCBKREJDU3RvcmUgc3RvcmUsIFJvd01hbmFnZXIgcm0pCiAgICAgICAgdGhy\nb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgYXNzZXJ0U3RyYXRlZ3koKS5k\nZWxldGUoc20sIHN0b3JlLCBybSk7CiAgICB9CgogICAgcHVibGljIEJvb2xl\nYW4gaXNDdXN0b21JbnNlcnQoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgSkRC\nQ1N0b3JlIHN0b3JlKSB7CiAgICAgICAgcmV0dXJuIGFzc2VydFN0cmF0ZWd5\nKCkuaXNDdXN0b21JbnNlcnQoc20sIHN0b3JlKTsKICAgIH0KCiAgICBwdWJs\naWMgQm9vbGVhbiBpc0N1c3RvbVVwZGF0ZShPcGVuSlBBU3RhdGVNYW5hZ2Vy\nIHNtLCBKREJDU3RvcmUgc3RvcmUpIHsKICAgICAgICByZXR1cm4gYXNzZXJ0\nU3RyYXRlZ3koKS5pc0N1c3RvbVVwZGF0ZShzbSwgc3RvcmUpOwogICAgfQoK\nICAgIHB1YmxpYyBCb29sZWFuIGlzQ3VzdG9tRGVsZXRlKE9wZW5KUEFTdGF0\nZU1hbmFnZXIgc20sIEpEQkNTdG9yZSBzdG9yZSkgewogICAgICAgIHJldHVy\nbiBhc3NlcnRTdHJhdGVneSgpLmlzQ3VzdG9tRGVsZXRlKHNtLCBzdG9yZSk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgY3VzdG9tSW5zZXJ0KE9wZW5KUEFT\ndGF0ZU1hbmFnZXIgc20sIEpEQkNTdG9yZSBzdG9yZSkKICAgICAgICB0aHJv\nd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBhc3NlcnRTdHJhdGVneSgpLmN1\nc3RvbUluc2VydChzbSwgc3RvcmUpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIGN1c3RvbVVwZGF0ZShPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBKREJDU3Rv\ncmUgc3RvcmUpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAg\nICAgYXNzZXJ0U3RyYXRlZ3koKS5jdXN0b21VcGRhdGUoc20sIHN0b3JlKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjdXN0b21EZWxldGUoT3BlbkpQQVN0\nYXRlTWFuYWdlciBzbSwgSkRCQ1N0b3JlIHN0b3JlKQogICAgICAgIHRocm93\ncyBTUUxFeGNlcHRpb24gewogICAgICAgIGFzc2VydFN0cmF0ZWd5KCkuY3Vz\ndG9tRGVsZXRlKHNtLCBzdG9yZSk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nc2V0Q2xhc3NNYXBwaW5nKENsYXNzTWFwcGluZyBvd25lcikgewogICAgICAg\nIGFzc2VydFN0cmF0ZWd5KCkuc2V0Q2xhc3NNYXBwaW5nKG93bmVyKTsKICAg\nIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBpc1ByaW1hcnlLZXlPYmplY3RJZChi\nb29sZWFuIGhhc0FsbCkgewogICAgICAgIHJldHVybiBhc3NlcnRTdHJhdGVn\neSgpLmlzUHJpbWFyeUtleU9iamVjdElkKGhhc0FsbCk7CiAgICB9CgogICAg\ncHVibGljIEpvaW5zIGpvaW5TdXBlcmNsYXNzKEpvaW5zIGpvaW5zLCBib29s\nZWFuIHRvVGhpcykgewogICAgICAgIHJldHVybiBhc3NlcnRTdHJhdGVneSgp\nLmpvaW5TdXBlcmNsYXNzKGpvaW5zLCB0b1RoaXMpOwogICAgfQoKICAgIHB1\nYmxpYyBib29sZWFuIHN1cHBvcnRzRWFnZXJTZWxlY3QoU2VsZWN0IHNlbCwg\nT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwKICAgICAgICBKREJDU3RvcmUgc3Rv\ncmUsIENsYXNzTWFwcGluZyBiYXNlLCBKREJDRmV0Y2hDb25maWd1cmF0aW9u\nIGZldGNoKSB7CiAgICAgICAgcmV0dXJuIGFzc2VydFN0cmF0ZWd5KCkuc3Vw\ncG9ydHNFYWdlclNlbGVjdChzZWwsIHNtLCBzdG9yZSwgYmFzZSwKICAgICAg\nICAgICAgZmV0Y2gpOwogICAgfQoKICAgIHB1YmxpYyBSZXN1bHRPYmplY3RQ\ncm92aWRlciBjdXN0b21Mb2FkKEpEQkNTdG9yZSBzdG9yZSwgYm9vbGVhbiBz\ndWJjbGFzc2VzLAogICAgICAgIEpEQkNGZXRjaENvbmZpZ3VyYXRpb24gZmV0\nY2gsIGxvbmcgc3RhcnRJZHgsIGxvbmcgZW5kSWR4KQogICAgICAgIHRocm93\ncyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBhc3NlcnRTdHJhdGVn\neSgpLmN1c3RvbUxvYWQoc3RvcmUsIHN1YmNsYXNzZXMsIGZldGNoLAogICAg\nICAgICAgICBzdGFydElkeCwgZW5kSWR4KTsKICAgIH0KCiAgICBwdWJsaWMg\nYm9vbGVhbiBjdXN0b21Mb2FkKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIEpE\nQkNTdG9yZSBzdG9yZSwKICAgICAgICBQQ1N0YXRlIHN0YXRlLCBKREJDRmV0\nY2hDb25maWd1cmF0aW9uIGZldGNoKQogICAgICAgIHRocm93cyBTUUxFeGNl\ncHRpb24sIENsYXNzTm90Rm91bmRFeGNlcHRpb24gewogICAgICAgIHJldHVy\nbiBhc3NlcnRTdHJhdGVneSgpLmN1c3RvbUxvYWQoc20sIHN0b3JlLCBzdGF0\nZSwgZmV0Y2gpOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGN1c3RvbUxv\nYWQoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgSkRCQ1N0b3JlIHN0b3JlLAog\nICAgICAgIEpEQkNGZXRjaENvbmZpZ3VyYXRpb24gZmV0Y2gsIFJlc3VsdCBy\nZXN1bHQpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAg\ncmV0dXJuIGFzc2VydFN0cmF0ZWd5KCkuY3VzdG9tTG9hZChzbSwgc3RvcmUs\nIGZldGNoLCByZXN1bHQpOwogICAgfQogICAgCiAgICBwcml2YXRlIENsYXNz\nU3RyYXRlZ3kgYXNzZXJ0U3RyYXRlZ3koKSB7CiAgICAgICAgaWYgKF9zdHJh\ndGVneSA9PSBudWxsKQogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxF\neGNlcHRpb24oKTsKICAgICAgICByZXR1cm4gX3N0cmF0ZWd5OwogICAgfQp9\nCg==\n","encoding":"base64"}

