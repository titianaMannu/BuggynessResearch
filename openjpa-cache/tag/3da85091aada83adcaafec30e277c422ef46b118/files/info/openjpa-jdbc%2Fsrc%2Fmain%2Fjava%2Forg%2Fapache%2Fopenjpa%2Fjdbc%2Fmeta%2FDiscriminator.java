{"sha":"b5f4612b82732f4a3cfd85a8138ef64438b75fd8","node_id":"MDQ6QmxvYjIwNjM2NDpiNWY0NjEyYjgyNzMyZjRhM2NmZDg1YTgxMzhlZjY0NDM4Yjc1ZmQ4","size":12078,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/b5f4612b82732f4a3cfd85a8138ef64438b75fd8","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhOwoKaW1wb3J0\nIGphdmEuc3FsLlNRTEV4Y2VwdGlvbjsKCmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5rZXJuZWwuSkRCQ1N0b3JlOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmpkYmMuc2NoZW1hLkNvbHVtbjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLnNjaGVtYS5Db2x1bW5JTzsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5JbmRleDsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5TY2hlbWFzOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLkpvaW5zOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMuc3FsLlJlc3VsdDsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLnNxbC5Sb3dNYW5hZ2VyOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNRTEJ1ZmZlcjsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5qZGJjLnNxbC5TZWxlY3Q7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEua2VybmVsLk9wZW5KUEFTdGF0ZU1hbmFnZXI7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmxvZy5Mb2c7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLm1ldGEuTWV0YURhdGFDb250ZXh0OwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuTWV0YURhdGFNb2RlczsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLk1ldGFEYXRhUmVwb3NpdG9yeTsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLkludGVybmFsRXhjZXB0\naW9uOwoKLyoqCiAqIEhhbmRsZXMgZGV0ZXJtaW5pbmcgdGhlIG9iamVjdCBj\nbGFzcyBvZiBkYXRhYmFzZSByZWNvcmRzLgogKgogKiBAYXV0aG9yIEFiZSBX\naGl0ZQogKi8KcHVibGljIGNsYXNzIERpc2NyaW1pbmF0b3IKICAgIGltcGxl\nbWVudHMgRGlzY3JpbWluYXRvclN0cmF0ZWd5LCBNZXRhRGF0YUNvbnRleHQs\nIE1ldGFEYXRhTW9kZXMgewoKICAgIC8qKgogICAgICogTnVsbCBkaXNjcmlt\naW5hdG9yIHZhbHVlIG1hcmtlci4KICAgICAqLwogICAgcHVibGljIHN0YXRp\nYyBmaW5hbCBPYmplY3QgTlVMTCA9IG5ldyBPYmplY3QoKTsKCiAgICBwcml2\nYXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6ZXIgX2xvYyA9IExvY2FsaXplci5m\nb3JQYWNrYWdlCiAgICAgICAgKERpc2NyaW1pbmF0b3IuY2xhc3MpOwoKICAg\nIHByaXZhdGUgZmluYWwgQ2xhc3NNYXBwaW5nIF9tYXBwaW5nOwogICAgcHJp\ndmF0ZSBmaW5hbCBEaXNjcmltaW5hdG9yTWFwcGluZ0luZm8gX2luZm87CiAg\nICBwcml2YXRlIERpc2NyaW1pbmF0b3JTdHJhdGVneSBfc3RyYXRlZ3kgPSBu\ndWxsOwogICAgcHJpdmF0ZSBpbnQgX3Jlc01vZGUgPSBNT0RFX05PTkU7Cgog\nICAgcHJpdmF0ZSBDb2x1bW5bXSBfY29scyA9IFNjaGVtYXMuRU1QVFlfQ09M\nVU1OUzsKICAgIHByaXZhdGUgQ29sdW1uSU8gX2lvID0gbnVsbDsKICAgIHBy\naXZhdGUgSW5kZXggX2lkeCA9IG51bGw7CiAgICBwcml2YXRlIGJvb2xlYW4g\nX3N1YnNMb2FkZWQgPSBmYWxzZTsKICAgIHByaXZhdGUgT2JqZWN0IF92YWx1\nZSA9IG51bGw7CgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3Rvci4gU3VwcGx5\nIG93bmluZyBtYXBwaW5nLgogICAgICovCiAgICBwdWJsaWMgRGlzY3JpbWlu\nYXRvcihDbGFzc01hcHBpbmcgbWFwcGluZykgewogICAgICAgIF9tYXBwaW5n\nID0gbWFwcGluZzsKICAgICAgICBfaW5mbyA9IGdldE1hcHBpbmdSZXBvc2l0\nb3J5KCkubmV3TWFwcGluZ0luZm8odGhpcyk7CiAgICB9CgogICAgcHVibGlj\nIE1ldGFEYXRhUmVwb3NpdG9yeSBnZXRSZXBvc2l0b3J5KCkgewogICAgICAg\nIHJldHVybiBfbWFwcGluZy5nZXRSZXBvc2l0b3J5KCk7CiAgICB9CgogICAg\ncHVibGljIE1hcHBpbmdSZXBvc2l0b3J5IGdldE1hcHBpbmdSZXBvc2l0b3J5\nKCkgewogICAgICAgIHJldHVybiBfbWFwcGluZy5nZXRNYXBwaW5nUmVwb3Np\ndG9yeSgpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBvd25p\nbmcgbWFwcGluZy4KICAgICAqLwogICAgcHVibGljIENsYXNzTWFwcGluZyBn\nZXRDbGFzc01hcHBpbmcoKSB7CiAgICAgICAgcmV0dXJuIF9tYXBwaW5nOwog\nICAgfQoKICAgIC8qKgogICAgICogVGhlIHN0cmF0ZWd5IHVzZWQgZm9yIGNs\nYXNzIGRpc2NyaW1pbmF0aW9uLgogICAgICovCiAgICBwdWJsaWMgRGlzY3Jp\nbWluYXRvclN0cmF0ZWd5IGdldFN0cmF0ZWd5KCkgewogICAgICAgIHJldHVy\nbiBfc3RyYXRlZ3k7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgc3RyYXRl\nZ3kgdXNlZCBmb3IgY2xhc3MgZGlzY3JpbWluYXRpb24uIFRoZSA8Y29kZT5h\nZGFwdDwvY29kZT4KICAgICAqIHBhcmFtZXRlciBkZXRlcm1pbmVzIHdoZXRo\nZXIgdG8gYWRhcHQgd2hlbiBtYXBwaW5nIHRoZSBzdHJhdGVneTsKICAgICAq\nIHVzZSBudWxsIGlmIHRoZSBzdHJhdGVneSBzaG91bGQgbm90IGJlIG1hcHBl\nZC4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0U3RyYXRlZ3koRGlzY3Jp\nbWluYXRvclN0cmF0ZWd5IHN0cmF0ZWd5LCBCb29sZWFuIGFkYXB0KSB7CiAg\nICAgICAgLy8gc2V0IHN0cmF0ZWd5IGZpcnN0IHNvIHdlIGNhbiBhY2Nlc3Mg\naXQgZHVyaW5nIG1hcHBpbmcKICAgICAgICBEaXNjcmltaW5hdG9yU3RyYXRl\nZ3kgb3JpZyA9IF9zdHJhdGVneTsKICAgICAgICBfc3RyYXRlZ3kgPSBzdHJh\ndGVneTsKICAgICAgICBpZiAoc3RyYXRlZ3kgIT0gbnVsbCkgewogICAgICAg\nICAgICB0cnkgewogICAgICAgICAgICAgICAgc3RyYXRlZ3kuc2V0RGlzY3Jp\nbWluYXRvcih0aGlzKTsKICAgICAgICAgICAgICAgIGlmIChhZGFwdCAhPSBu\ndWxsKQogICAgICAgICAgICAgICAgICAgIHN0cmF0ZWd5Lm1hcChhZGFwdC5i\nb29sZWFuVmFsdWUoKSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKFJ1bnRpbWVF\neGNlcHRpb24gcmUpIHsKICAgICAgICAgICAgICAgIC8vIHJlc2V0IHN0cmF0\nZWd5CiAgICAgICAgICAgICAgICBfc3RyYXRlZ3kgPSBvcmlnOwogICAgICAg\nICAgICAgICAgdGhyb3cgcmU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAg\nICB9CgogICAgLyoqCiAgICAgKiBUaGUgZGlzY3JpbWluYXRvciB2YWx1ZS4K\nICAgICAqLwogICAgcHVibGljIE9iamVjdCBnZXRWYWx1ZSgpIHsKICAgICAg\nICByZXR1cm4gX3ZhbHVlOwogICAgfQoKICAgIC8qKgogICAgICogVGhlIGRp\nc2NyaW1pbmF0b3IgdmFsdWUuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNl\ndFZhbHVlKE9iamVjdCB2YWx1ZSkgewogICAgICAgIF92YWx1ZSA9IHZhbHVl\nOwogICAgfQoKICAgIC8qKgogICAgICogUmF3IG1hcHBpbmcgZGF0YS4KICAg\nICAqLwogICAgcHVibGljIERpc2NyaW1pbmF0b3JNYXBwaW5nSW5mbyBnZXRN\nYXBwaW5nSW5mbygpIHsKICAgICAgICByZXR1cm4gX2luZm87CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBDb2x1bW5zIHVzZWQgYnkgdGhpcyBEaXNjcmltaW5h\ndG9yLgogICAgICovCiAgICBwdWJsaWMgQ29sdW1uW10gZ2V0Q29sdW1ucygp\nIHsKICAgICAgICByZXR1cm4gX2NvbHM7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBDb2x1bW5zIHVzZWQgYnkgdGhpcyBEaXNjcmltaW5hdG9yLgogICAgICov\nCiAgICBwdWJsaWMgdm9pZCBzZXRDb2x1bW5zKENvbHVtbltdIGNvbHMpIHsK\nICAgICAgICBpZiAoY29scyA9PSBudWxsKQogICAgICAgICAgICBjb2xzID0g\nU2NoZW1hcy5FTVBUWV9DT0xVTU5TOwogICAgICAgIF9jb2xzID0gY29sczsK\nICAgIH0KCiAgICAvKioKICAgICAqIEkvTyBpbmZvcm1hdGlvbiBvbiB0aGUg\nZGlzY3JpbWluYXRvciBjb2x1bW5zLgogICAgICovCiAgICBwdWJsaWMgQ29s\ndW1uSU8gZ2V0Q29sdW1uSU8oKSB7CiAgICAgICAgcmV0dXJuIChfaW8gPT0g\nbnVsbCkgPyBDb2x1bW5JTy5VTlJFU1RSSUNURUQgOiBfaW87CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBJL08gaW5mb3JtYXRpb24gb24gdGhlIGRpc2NyaW1p\nbmF0b3IgY29sdW1ucy4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0Q29s\ndW1uSU8oQ29sdW1uSU8gaW8pIHsKICAgICAgICBfaW8gPSBpbzsKICAgIH0K\nCiAgICAvKioKICAgICAqIEluZGV4IG9uIHRoZSBEaXNjcmltaW5hdG9yIGNv\nbHVtbnMsIG9yIG51bGwgaWYgbm9uZS4KICAgICAqLwogICAgcHVibGljIElu\nZGV4IGdldEluZGV4KCkgewogICAgICAgIHJldHVybiBfaWR4OwogICAgfQoK\nICAgIC8qKgogICAgICogSW5kZXggb24gdGhlIERpc2NyaW1pbmF0b3IgY29s\ndW1ucywgb3IgbnVsbCBpZiBub25lLgogICAgICovCiAgICBwdWJsaWMgdm9p\nZCBzZXRJbmRleChJbmRleCBpZHgpIHsKICAgICAgICBfaWR4ID0gaWR4Owog\nICAgfQoKICAgIC8qKgogICAgICogSW5jcmVtZW50IHRoZSByZWZlcmVuY2Ug\nY291bnQgb2YgdXNlZCBzY2hlbWEgY29tcG9uZW50cy4KICAgICAqLwogICAg\ncHVibGljIHZvaWQgcmVmU2NoZW1hQ29tcG9uZW50cygpIHsKICAgICAgICBm\nb3IgKGludCBpID0gMDsgaSA8IF9jb2xzLmxlbmd0aDsgaSsrKQogICAgICAg\nICAgICBfY29sc1tpXS5yZWYoKTsKICAgIH0KCiAgICAvKioKICAgICAqIENs\nZWFyIG1hcHBpbmcgaW5mb3JtYXRpb24sIGluY2x1ZGluZyBzdHJhdGVneS4K\nICAgICAqLwogICAgcHVibGljIHZvaWQgY2xlYXJNYXBwaW5nKCkgewogICAg\nICAgIF9zdHJhdGVneSA9IG51bGw7CiAgICAgICAgX2NvbHMgPSBTY2hlbWFz\nLkVNUFRZX0NPTFVNTlM7CiAgICAgICAgX2lkeCA9IG51bGw7CiAgICAgICAg\nX3ZhbHVlID0gbnVsbDsKICAgICAgICBfaW5mby5jbGVhcigpOwogICAgICAg\nIHNldFJlc29sdmUoTU9ERV9NQVBQSU5HIHwgTU9ERV9NQVBQSU5HX0lOSVQs\nIGZhbHNlKTsKICAgIH0KCiAgICAvKioKICAgICAqIFVwZGF0ZSB7QGxpbmsg\nTWFwcGluZ0luZm99IHdpdGggb3VyIGN1cnJlbnQgbWFwcGluZyBpbmZvcm1h\ndGlvbi4KICAgICAqLwogICAgcHVibGljIHZvaWQgc3luY01hcHBpbmdJbmZv\nKCkgewogICAgICAgIF9pbmZvLnN5bmNXaXRoKHRoaXMpOwogICAgfQoKICAg\nIC8qKgogICAgICogUmVzb2x2ZSBtb2RlLgogICAgICovCiAgICBwdWJsaWMg\naW50IGdldFJlc29sdmUoKSB7CiAgICAgICAgcmV0dXJuIF9yZXNNb2RlOwog\nICAgfQoKICAgIC8qKgogICAgICogUmVzb2x2ZSBtb2RlLgogICAgICovCiAg\nICBwdWJsaWMgdm9pZCBzZXRSZXNvbHZlKGludCBtb2RlKSB7CiAgICAgICAg\nX3Jlc01vZGUgPSBtb2RlOwogICAgfQoKICAgIC8qKgogICAgICogUmVzb2x2\nZSBtb2RlLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRSZXNvbHZlKGlu\ndCBtb2RlLCBib29sZWFuIG9uKSB7CiAgICAgICAgaWYgKG1vZGUgPT0gTU9E\nRV9OT05FKQogICAgICAgICAgICBfcmVzTW9kZSA9IG1vZGU7CiAgICAgICAg\nZWxzZSBpZiAob24pCiAgICAgICAgICAgIF9yZXNNb2RlIHw9IG1vZGU7CiAg\nICAgICAgZWxzZQogICAgICAgICAgICBfcmVzTW9kZSAmPSB+bW9kZTsKICAg\nIH0KCiAgICAvKioKICAgICAqIFJlc29sdmUgbWFwcGluZyBpbmZvcm1hdGlv\nbi4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gcmVzb2x2ZShpbnQgbW9k\nZSkgewogICAgICAgIGlmICgoX3Jlc01vZGUgJiBtb2RlKSA9PSBtb2RlKQog\nICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICBpbnQgY3VyID0gX3Jl\nc01vZGU7CiAgICAgICAgX3Jlc01vZGUgfD0gbW9kZTsKICAgICAgICBpZiAo\nKG1vZGUgJiBNT0RFX01BUFBJTkcpICE9IDAgJiYgKGN1ciAmIE1PREVfTUFQ\nUElORykgPT0gMCkKICAgICAgICAgICAgcmVzb2x2ZU1hcHBpbmcoKTsKICAg\nICAgICBpZiAoKG1vZGUgJiBNT0RFX01BUFBJTkdfSU5JVCkgIT0gMCAmJiAo\nY3VyICYgTU9ERV9NQVBQSU5HX0lOSVQpID09IDApCiAgICAgICAgICAgIF9z\ndHJhdGVneS5pbml0aWFsaXplKCk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwog\nICAgfQoKICAgIC8qKgogICAgICogU2V0dXAgbWFwcGluZy4KICAgICAqLwog\nICAgcHJpdmF0ZSB2b2lkIHJlc29sdmVNYXBwaW5nKCkgewogICAgICAgIC8v\nIG1hcCBzdHJhdGVneQogICAgICAgIE1hcHBpbmdSZXBvc2l0b3J5IHJlcG9z\nID0gZ2V0TWFwcGluZ1JlcG9zaXRvcnkoKTsKICAgICAgICBpZiAoX3N0cmF0\nZWd5ID09IG51bGwpCiAgICAgICAgICAgIHJlcG9zLmdldFN0cmF0ZWd5SW5z\ndGFsbGVyKCkuaW5zdGFsbFN0cmF0ZWd5KHRoaXMpOwogICAgICAgIExvZyBs\nb2cgPSByZXBvcy5nZXRMb2coKTsKICAgICAgICBpZiAobG9nLmlzVHJhY2VF\nbmFibGVkKCkpCiAgICAgICAgICAgIGxvZy50cmFjZShfbG9jLmdldCgic3Ry\nYXRlZ3kiLCB0aGlzLCBfc3RyYXRlZ3kuZ2V0QWxpYXMoKSkpOwoKICAgICAg\nICAvLyBtYXJrIGNvbHVtbnMgYXMgbWFwcGVkCiAgICAgICAgQ29sdW1uW10g\nY29scyA9IGdldENvbHVtbnMoKTsKICAgICAgICBDb2x1bW5JTyBpbyA9IGdl\ndENvbHVtbklPKCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb2xz\nLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChpby5pc0luc2VydGFi\nbGUoaSwgZmFsc2UpKQogICAgICAgICAgICAgICAgY29sc1tpXS5zZXRGbGFn\nKENvbHVtbi5GTEFHX0RJUkVDVF9JTlNFUlQsIHRydWUpOwogICAgICAgICAg\nICBpZiAoaW8uaXNVcGRhdGFibGUoaSwgZmFsc2UpKQogICAgICAgICAgICAg\nICAgY29sc1tpXS5zZXRGbGFnKENvbHVtbi5GTEFHX0RJUkVDVF9VUERBVEUs\nIHRydWUpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRo\nZXIgdGhpcyBEaXNjcmltaW5hdG9yIGhhcyBsb2FkZWQgc3ViY2xhc3NlcyB5\nZXQuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGdldFN1YmNsYXNzZXNM\nb2FkZWQoKSB7CiAgICAgICAgaWYgKCFfc3Vic0xvYWRlZCkgewogICAgICAg\nICAgICBDbGFzc01hcHBpbmcgc3VwID0gX21hcHBpbmcuZ2V0UENTdXBlcmNs\nYXNzTWFwcGluZygpOwogICAgICAgICAgICBpZiAoc3VwICE9IG51bGwgJiYg\nc3VwLmdldERpc2NyaW1pbmF0b3IoKS5nZXRTdWJjbGFzc2VzTG9hZGVkKCkp\nCiAgICAgICAgICAgICAgICBfc3Vic0xvYWRlZCA9IHRydWU7CiAgICAgICAg\nfQogICAgICAgIHJldHVybiBfc3Vic0xvYWRlZDsKICAgIH0KCiAgICAvKioK\nICAgICAqIFdoZXRoZXIgdGhpcyBEaXNjcmltaW5hdG9yIGhhcyBsb2FkZWQg\nc3ViY2xhc3NlcyB5ZXQuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFN1\nYmNsYXNzZXNMb2FkZWQoYm9vbGVhbiBsb2FkZWQpIHsKICAgICAgICBfc3Vi\nc0xvYWRlZCA9IGxvYWRlZDsKICAgIH0KCiAgICAvKioKICAgICAqIEFkZCBX\nSEVSRSBjb25kaXRpb25zIHRvIHRoZSBnaXZlbiBzZWxlY3QgbGltaXRpbmcg\ndGhlIHJldHVybmVkIHJlc3VsdHMKICAgICAqIHRvIG91ciBtYXBwaW5nIHR5\ncGUsIHBvc3NpYmx5IGluY2x1ZGluZyBzdWJjbGFzc2VzLgogICAgICovCiAg\nICBwdWJsaWMgYm9vbGVhbiBhZGRDbGFzc0NvbmRpdGlvbnMoU2VsZWN0IHNl\nbCwgYm9vbGVhbiBzdWJzLCBKb2lucyBqb2lucykgewogICAgICAgIGlmIChf\nbWFwcGluZy5nZXRKb2luYWJsZVBDU3VwZXJjbGFzc01hcHBpbmcoKSA9PSBu\ndWxsCiAgICAgICAgICAgICYmIF9tYXBwaW5nLmdldEpvaW5hYmxlUENTdWJj\nbGFzc01hcHBpbmdzKCkubGVuZ3RoID09IDApCiAgICAgICAgICAgIHJldHVy\nbiBmYWxzZTsKICAgICAgICBpZiAoIWhhc0NsYXNzQ29uZGl0aW9ucyhfbWFw\ncGluZywgc3VicykpCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCiAgICAg\nICAgLy8gam9pbiBkb3duIHRvIGJhc2UgY2xhc3Mgd2hlcmUgY29uZGl0aW9u\ncyB3aWxsIGJlIGFkZGVkCiAgICAgICAgQ2xhc3NNYXBwaW5nIGZyb20gPSBf\nbWFwcGluZzsKICAgICAgICBDbGFzc01hcHBpbmcgc3VwID0gX21hcHBpbmcu\nZ2V0Sm9pbmFibGVQQ1N1cGVyY2xhc3NNYXBwaW5nKCk7CiAgICAgICAgZm9y\nICg7IHN1cCAhPSBudWxsOyBmcm9tID0gc3VwLCBzdXAgPSBmcm9tCiAgICAg\nICAgICAgIC5nZXRKb2luYWJsZVBDU3VwZXJjbGFzc01hcHBpbmcoKSkgewog\nICAgICAgICAgICBpZiAoZnJvbS5nZXRUYWJsZSgpICE9IHN1cC5nZXRUYWJs\nZSgpKSB7CiAgICAgICAgICAgICAgICBpZiAoam9pbnMgPT0gbnVsbCkKICAg\nICAgICAgICAgICAgICAgICBqb2lucyA9IHNlbC5uZXdKb2lucygpOwogICAg\nICAgICAgICAgICAgam9pbnMgPSBmcm9tLmpvaW5TdXBlcmNsYXNzKGpvaW5z\nLCBmYWxzZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHNl\nbC53aGVyZShnZXRDbGFzc0NvbmRpdGlvbnMoc2VsLCBqb2lucywgX21hcHBp\nbmcsIHN1YnMpLCBqb2lucyk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9\nCgogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLwogICAgLy8gRGlzY3JpbWluYXRvclN0cmF0ZWd5IGltcGxlbWVudGF0aW9u\nCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nCgogICAgcHVibGljIFN0cmluZyBnZXRBbGlhcygpIHsKICAgICAgICByZXR1\ncm4gYXNzZXJ0U3RyYXRlZ3koKS5nZXRBbGlhcygpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIG1hcChib29sZWFuIGFkYXB0KSB7CiAgICAgICAgYXNzZXJ0\nU3RyYXRlZ3koKS5tYXAoYWRhcHQpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIGluaXRpYWxpemUoKSB7CiAgICAgICAgYXNzZXJ0U3RyYXRlZ3koKS5pbml0\naWFsaXplKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgaW5zZXJ0KE9wZW5K\nUEFTdGF0ZU1hbmFnZXIgc20sIEpEQkNTdG9yZSBzdG9yZSwgUm93TWFuYWdl\nciBybSkKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBh\nc3NlcnRTdHJhdGVneSgpLmluc2VydChzbSwgc3RvcmUsIHJtKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCB1cGRhdGUoT3BlbkpQQVN0YXRlTWFuYWdlciBz\nbSwgSkRCQ1N0b3JlIHN0b3JlLCBSb3dNYW5hZ2VyIHJtKQogICAgICAgIHRo\ncm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIGFzc2VydFN0cmF0ZWd5KCku\ndXBkYXRlKHNtLCBzdG9yZSwgcm0pOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIGRlbGV0ZShPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBKREJDU3RvcmUgc3Rv\ncmUsIFJvd01hbmFnZXIgcm0pCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlv\nbiB7CiAgICAgICAgYXNzZXJ0U3RyYXRlZ3koKS5kZWxldGUoc20sIHN0b3Jl\nLCBybSk7CiAgICB9CgogICAgcHVibGljIEJvb2xlYW4gaXNDdXN0b21JbnNl\ncnQoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgSkRCQ1N0b3JlIHN0b3JlKSB7\nCiAgICAgICAgcmV0dXJuIGFzc2VydFN0cmF0ZWd5KCkuaXNDdXN0b21JbnNl\ncnQoc20sIHN0b3JlKTsKICAgIH0KCiAgICBwdWJsaWMgQm9vbGVhbiBpc0N1\nc3RvbVVwZGF0ZShPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBKREJDU3RvcmUg\nc3RvcmUpIHsKICAgICAgICByZXR1cm4gYXNzZXJ0U3RyYXRlZ3koKS5pc0N1\nc3RvbVVwZGF0ZShzbSwgc3RvcmUpOwogICAgfQoKICAgIHB1YmxpYyBCb29s\nZWFuIGlzQ3VzdG9tRGVsZXRlKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIEpE\nQkNTdG9yZSBzdG9yZSkgewogICAgICAgIHJldHVybiBhc3NlcnRTdHJhdGVn\neSgpLmlzQ3VzdG9tRGVsZXRlKHNtLCBzdG9yZSk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgY3VzdG9tSW5zZXJ0KE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20s\nIEpEQkNTdG9yZSBzdG9yZSkKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9u\nIHsKICAgICAgICBhc3NlcnRTdHJhdGVneSgpLmN1c3RvbUluc2VydChzbSwg\nc3RvcmUpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGN1c3RvbVVwZGF0ZShP\ncGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBKREJDU3RvcmUgc3RvcmUpCiAgICAg\nICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgYXNzZXJ0U3RyYXRl\nZ3koKS5jdXN0b21VcGRhdGUoc20sIHN0b3JlKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBjdXN0b21EZWxldGUoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwg\nSkRCQ1N0b3JlIHN0b3JlKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24g\newogICAgICAgIGFzc2VydFN0cmF0ZWd5KCkuY3VzdG9tRGVsZXRlKHNtLCBz\ndG9yZSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0RGlzY3JpbWluYXRv\ncihEaXNjcmltaW5hdG9yIG93bmVyKSB7CiAgICAgICAgYXNzZXJ0U3RyYXRl\nZ3koKS5zZXREaXNjcmltaW5hdG9yKG93bmVyKTsKICAgIH0KCiAgICBwdWJs\naWMgYm9vbGVhbiBzZWxlY3QoU2VsZWN0IHNlbCwgQ2xhc3NNYXBwaW5nIG1h\ncHBpbmcpIHsKICAgICAgICByZXR1cm4gYXNzZXJ0U3RyYXRlZ3koKS5zZWxl\nY3Qoc2VsLCBtYXBwaW5nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBsb2Fk\nU3ViY2xhc3NlcyhKREJDU3RvcmUgc3RvcmUpCiAgICAgICAgdGhyb3dzIFNR\nTEV4Y2VwdGlvbiwgQ2xhc3NOb3RGb3VuZEV4Y2VwdGlvbiB7CiAgICAgICAg\nYXNzZXJ0U3RyYXRlZ3koKS5sb2FkU3ViY2xhc3NlcyhzdG9yZSk7CiAgICB9\nCgogICAgcHVibGljIENsYXNzIGdldENsYXNzKEpEQkNTdG9yZSBzdG9yZSwg\nQ2xhc3NNYXBwaW5nIGJhc2UsIFJlc3VsdCByZXN1bHQpCiAgICAgICAgdGhy\nb3dzIFNRTEV4Y2VwdGlvbiwgQ2xhc3NOb3RGb3VuZEV4Y2VwdGlvbiB7CiAg\nICAgICAgcmV0dXJuIGFzc2VydFN0cmF0ZWd5KCkuZ2V0Q2xhc3Moc3RvcmUs\nIGJhc2UsIHJlc3VsdCk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gaGFz\nQ2xhc3NDb25kaXRpb25zKENsYXNzTWFwcGluZyBiYXNlLCBib29sZWFuIHN1\nYnMpIHsKICAgICAgICByZXR1cm4gYXNzZXJ0U3RyYXRlZ3koKS5oYXNDbGFz\nc0NvbmRpdGlvbnMoYmFzZSwgc3Vicyk7CiAgICB9CgogICAgcHVibGljIFNR\nTEJ1ZmZlciBnZXRDbGFzc0NvbmRpdGlvbnMoU2VsZWN0IHNlbCwgSm9pbnMg\nam9pbnMsIAogICAgICAgIENsYXNzTWFwcGluZyBiYXNlLCBib29sZWFuIHN1\nYnMpIHsKICAgICAgICByZXR1cm4gYXNzZXJ0U3RyYXRlZ3koKS5nZXRDbGFz\nc0NvbmRpdGlvbnMoc2VsLCBqb2lucywgYmFzZSwgc3Vicyk7CiAgICB9Cgog\nICAgcHJpdmF0ZSBEaXNjcmltaW5hdG9yU3RyYXRlZ3kgYXNzZXJ0U3RyYXRl\nZ3koKSB7CiAgICAgICAgaWYgKF9zdHJhdGVneSA9PSBudWxsKQogICAgICAg\nICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICBy\nZXR1cm4gX3N0cmF0ZWd5OwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgdG9T\ndHJpbmcoKSB7CiAgICAgICAgcmV0dXJuIF9tYXBwaW5nICsgIjxkaXNjcmlt\naW5hdG9yPiI7CiAgICB9Cn0K\n","encoding":"base64"}

