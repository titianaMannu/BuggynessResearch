{"sha":"56c526ad0f426a174a9125eea31158fe3c0d2c03","node_id":"MDQ6QmxvYjIwNjM2NDo1NmM1MjZhZDBmNDI2YTE3NGE5MTI1ZWVhMzExNThmZTNjMGQyYzAz","size":42053,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/56c526ad0f426a174a9125eea31158fe3c0d2c03","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhOwoKaW1wb3J0\nIGphdmEuaW8uRmlsZTsKaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247Cmlt\ncG9ydCBqYXZhLmlvLlByaW50V3JpdGVyOwppbXBvcnQgamF2YS5pby5Xcml0\nZXI7CmltcG9ydCBqYXZhLnNxbC5TUUxFeGNlcHRpb247CmltcG9ydCBqYXZh\nLnV0aWwuQXJyYXlzOwppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247Cmlt\ncG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsKaW1wb3J0IGphdmEudXRpbC5IYXNo\nU2V0OwppbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9yOwppbXBvcnQgamF2YS51\ndGlsLk1hcDsKaW1wb3J0IGphdmEudXRpbC5TZXQ7CgppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmNvbmYuT3BlbkpQQUNvbmZpZ3VyYXRpb247CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5jb25mLkpEQkNDb25maWd1cmF0\naW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuY29uZi5KREJD\nQ29uZmlndXJhdGlvbkltcGw7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5rZXJuZWwuSkRCQ1NlcTsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5qZGJjLnNjaGVtYS5Db2x1bW47CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5zY2hlbWEuRHluYW1pY1NjaGVtYUZhY3Rvcnk7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuTGF6eVNjaGVtYUZhY3Rv\ncnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuU2No\nZW1hOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLlNj\naGVtYUdlbmVyYXRvcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLnNjaGVtYS5TY2hlbWFHcm91cDsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5qZGJjLnNjaGVtYS5TY2hlbWFTZXJpYWxpemVyOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLlNjaGVtYVRvb2w7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuVGFibGU7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuWE1MU2NoZW1hU2VyaWFs\naXplcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5EQkRp\nY3Rpb25hcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlNl\ncTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5Db25maWd1\ncmF0aW9uczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIubG9nLkxv\nZzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIubWV0YS5DbGFzc0Fy\nZ1BhcnNlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5G\naWxlczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5Mb2Nh\nbGl6ZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuT3B0\naW9uczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5TZXJ2\naWNlczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkNsYXNzTWV0\nYURhdGE7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5GaWVsZE1l\ndGFEYXRhOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuSmF2YVR5\ncGVzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuTWV0YURhdGFG\nYWN0b3J5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuTWV0YURh\ndGFNb2RlczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLlF1ZXJ5\nTWV0YURhdGE7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5TZXF1\nZW5jZU1ldGFEYXRhOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEu\nVmFsdWVTdHJhdGVnaWVzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0\naWwuR2VuZXJhbEV4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS51dGlsLkludGVybmFsRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnV0aWwuTWV0YURhdGFFeGNlcHRpb247CgovKioKICogVG9vbCBm\nb3IgbWFuaXB1bGF0aW5nIGNsYXNzIG1hcHBpbmdzIGFuZCBhc3NvY2lhdGVk\nIHNjaGVtYS4KICoKICogQGF1dGhvciBBYmUgV2hpdGUKICovCnB1YmxpYyBj\nbGFzcyBNYXBwaW5nVG9vbAogICAgaW1wbGVtZW50cyBNZXRhRGF0YU1vZGVz\nIHsKCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBTQ0hFTUFfQUNU\nSU9OX05PTkUgPSAibm9uZSI7CgogICAgcHVibGljIHN0YXRpYyBmaW5hbCBT\ndHJpbmcgQUNUSU9OX0FERCA9ICJhZGQiOwogICAgcHVibGljIHN0YXRpYyBm\naW5hbCBTdHJpbmcgQUNUSU9OX1JFRlJFU0ggPSAicmVmcmVzaCI7CiAgICBw\ndWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBBQ1RJT05fQlVJTERfU0NIRU1B\nID0gImJ1aWxkU2NoZW1hIjsKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgU3Ry\naW5nIEFDVElPTl9EUk9QID0gImRyb3AiOwogICAgcHVibGljIHN0YXRpYyBm\naW5hbCBTdHJpbmcgQUNUSU9OX1ZBTElEQVRFID0gInZhbGlkYXRlIjsKICAg\nIHB1YmxpYyBzdGF0aWMgZmluYWwgU3RyaW5nIEFDVElPTl9FWFBPUlQgPSAi\nZXhwb3J0IjsKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgU3RyaW5nIEFDVElP\nTl9JTVBPUlQgPSAiaW1wb3J0IjsKCiAgICBwdWJsaWMgc3RhdGljIGZpbmFs\nIFN0cmluZ1tdIEFDVElPTlMgPSBuZXcgU3RyaW5nW117CiAgICAgICAgQUNU\nSU9OX0FERCwKICAgICAgICBBQ1RJT05fUkVGUkVTSCwKICAgICAgICBBQ1RJ\nT05fQlVJTERfU0NIRU1BLAogICAgICAgIEFDVElPTl9EUk9QLAogICAgICAg\nIEFDVElPTl9WQUxJREFURSwKICAgICAgICBBQ1RJT05fRVhQT1JULAogICAg\nICAgIEFDVElPTl9JTVBPUlQsCiAgICB9OwoKICAgIHByaXZhdGUgc3RhdGlj\nIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVyLmZvclBhY2thZ2UoTWFwcGlu\nZ1Rvb2wuY2xhc3MpOwoKICAgIHByaXZhdGUgZmluYWwgSkRCQ0NvbmZpZ3Vy\nYXRpb24gX2NvbmY7CiAgICBwcml2YXRlIGZpbmFsIExvZyBfbG9nOwogICAg\ncHJpdmF0ZSBmaW5hbCBTdHJpbmcgX2FjdGlvbjsKICAgIHByaXZhdGUgZmlu\nYWwgYm9vbGVhbiBfbWV0YTsKICAgIHByaXZhdGUgZmluYWwgaW50IF9tb2Rl\nOwoKICAgIHByaXZhdGUgTWFwcGluZ1JlcG9zaXRvcnkgX3JlcG9zID0gbnVs\nbDsKICAgIHByaXZhdGUgU2NoZW1hR3JvdXAgX3NjaGVtYSA9IG51bGw7CiAg\nICBwcml2YXRlIFNjaGVtYVRvb2wgX3NjaGVtYVRvb2wgPSBudWxsOwogICAg\ncHJpdmF0ZSBTdHJpbmcgX3NjaGVtYUFjdGlvbnMgPSBTY2hlbWFUb29sLkFD\nVElPTl9BREQ7CiAgICBwcml2YXRlIGJvb2xlYW4gX3JlYWRTY2hlbWEgPSBm\nYWxzZTsKICAgIHByaXZhdGUgYm9vbGVhbiBfcGtzID0gZmFsc2U7CiAgICBw\ncml2YXRlIGJvb2xlYW4gX2ZrcyA9IGZhbHNlOwogICAgcHJpdmF0ZSBib29s\nZWFuIF9pbmRleGVzID0gZmFsc2U7CiAgICBwcml2YXRlIGJvb2xlYW4gX3Nl\ncXMgPSB0cnVlOwogICAgcHJpdmF0ZSBib29sZWFuIF9kcm9wVW51c2VkID0g\ndHJ1ZTsKICAgIHByaXZhdGUgYm9vbGVhbiBfaWdub3JlRXJyb3JzID0gZmFs\nc2U7CiAgICBwcml2YXRlIEZpbGUgX2ZpbGUgPSBudWxsOwogICAgcHJpdmF0\nZSBXcml0ZXIgX21hcHBpbmdXcml0ZXIgPSBudWxsOwogICAgcHJpdmF0ZSBX\ncml0ZXIgX3NjaGVtYVdyaXRlciA9IG51bGw7CgogICAgLy8gYnVmZmVyIG1l\ndGFkYXRhcyB0byBiZSBkcm9wcGVkCiAgICBwcml2YXRlIFNldCBfZHJvcENs\ncyA9IG51bGw7CiAgICBwcml2YXRlIFNldCBfZHJvcE1hcCA9IG51bGw7CiAg\nICBwcml2YXRlIGJvb2xlYW4gX2ZsdXNoID0gZmFsc2U7CiAgICBwcml2YXRl\nIGJvb2xlYW4gX2ZsdXNoU2NoZW1hID0gZmFsc2U7CgogICAgLyoqCiAgICAg\nKiBDb25zdHJ1Y3Rvci4gU3VwcGx5IGNvbmZpZ3VyYXRpb24gYW5kIGFjdGlv\nbi4KICAgICAqLwogICAgcHVibGljIE1hcHBpbmdUb29sKEpEQkNDb25maWd1\ncmF0aW9uIGNvbmYsIFN0cmluZyBhY3Rpb24sIGJvb2xlYW4gbWV0YSkgewog\nICAgICAgIF9jb25mID0gY29uZjsKICAgICAgICBfbG9nID0gY29uZi5nZXRM\nb2coSkRCQ0NvbmZpZ3VyYXRpb24uTE9HX01FVEFEQVRBKTsKICAgICAgICBf\nbWV0YSA9IG1ldGE7CgogICAgICAgIGlmIChhY3Rpb24gPT0gbnVsbCkKICAg\nICAgICAgICAgX2FjdGlvbiA9IEFDVElPTl9SRUZSRVNIOwogICAgICAgIGVs\nc2UgaWYgKCFBcnJheXMuYXNMaXN0KEFDVElPTlMpLmNvbnRhaW5zKGFjdGlv\nbikpCiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNl\ncHRpb24oImFjdGlvbiA9PSAiICsgYWN0aW9uKTsKICAgICAgICBlbHNlCiAg\nICAgICAgICAgIF9hY3Rpb24gPSBhY3Rpb247CgogICAgICAgIGlmIChtZXRh\nICYmIEFDVElPTl9BREQuZXF1YWxzKF9hY3Rpb24pKQogICAgICAgICAgICBf\nbW9kZSA9IE1PREVfTUVUQTsKICAgICAgICBlbHNlIGlmIChtZXRhICYmIEFD\nVElPTl9EUk9QLmVxdWFscyhfYWN0aW9uKSkKICAgICAgICAgICAgX21vZGUg\nPSBNT0RFX01FVEEgfCBNT0RFX01BUFBJTkcgfCBNT0RFX1FVRVJZOwogICAg\nICAgIGVsc2UKICAgICAgICAgICAgX21vZGUgPSBNT0RFX01BUFBJTkc7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBUaGUgYWN0aW9uIHN1cHBsaWVkIG9uIGNv\nbnN0cnVjdGlvbi4KICAgICAqLwogICAgcHVibGljIFN0cmluZyBnZXRBY3Rp\nb24oKSB7CiAgICAgICAgcmV0dXJuIF9hY3Rpb247CiAgICB9CgogICAgLyoq\nCiAgICAgKiBXaGV0aGVyIHRoZSBhY3Rpb24gd29ya3Mgb24gbWV0YWRhdGEg\nYXMgd2VsbCBhcyBtYXBwaW5ncy4KICAgICAqLwogICAgcHVibGljIGJvb2xl\nYW4gaXNNZXRhRGF0YUFjdGlvbigpIHsKICAgICAgICByZXR1cm4gX21ldGE7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgc2NoZW1hIG1vZGlmaWNhdGlv\nbiBwb2xpY3ksIG9yIDxjb2RlPm5vbmU8L2NvZGU+LiBTZWUgdGhlCiAgICAg\nKiBBQ1RJT04gY29uc3RhbnRzIGluIHtAbGluayBTY2hlbWFUb29sfS4gTWF5\nIGJlIGEgY29tbWEtc2VwYXJhdGVkCiAgICAgKiBsaXN0IG9mIHZhbHVlcy4g\nRGVmYXVsdHMgdG8ge0BsaW5rIFNjaGVtYVRvb2wjQUNUSU9OX0FERH0uCiAg\nICAgKi8KICAgIHB1YmxpYyBTdHJpbmcgZ2V0U2NoZW1hQWN0aW9uKCkgewog\nICAgICAgIHJldHVybiBfc2NoZW1hQWN0aW9uczsKICAgIH0KCiAgICAvKioK\nICAgICAqIFRoZSBzY2hlbWEgbW9kaWZpY2F0aW9uIHBvbGljeSwgb3IgPGNv\nZGU+bm9uZTwvY29kZT4uIFNlZSB0aGUKICAgICAqIEFDVElPTiBjb25zdGFu\ndHMgaW4ge0BsaW5rIFNjaGVtYVRvb2x9LiBNYXkgYmUgYSBjb21tYS1zZXBh\ncmF0ZWQKICAgICAqIGxpc3Qgb2YgdmFsdWVzLiBEZWZhdWx0cyB0byB7QGxp\nbmsgU2NoZW1hVG9vbCNBQ1RJT05fQUREfS4KICAgICAqLwogICAgcHVibGlj\nIHZvaWQgc2V0U2NoZW1hQWN0aW9uKFN0cmluZyBzY2hlbWFBY3Rpb24pIHsK\nICAgICAgICBfc2NoZW1hQWN0aW9ucyA9IHNjaGVtYUFjdGlvbjsKICAgIH0K\nCiAgICAvKioKICAgICAqIFNldCB0byB0cnVlIHRvIHJlYWQgdGhlIGVudGly\nZSBzY2hlbWEgYmVmb3JlIG1hcHBpbmcuCiAgICAgKiBMZWF2aW5nIHRoaXMg\nb3B0aW9uIGZhbHNlIHNhdmVzIHRpbWUsIGJ1dCBpcyBkYW5nZXJvdXMgd2hl\nbiBhZGRpbmcKICAgICAqIG5ldyBtYXBwaW5ncywgYmVjYXVzZSB3aXRob3V0\nIGZ1bGwga25vd2xlZGdlIG9mIHRoZSBleGlzdGluZyBzY2hlbWEgdGhlCiAg\nICAgKiBtYXBwaW5nIHRvb2wgbWlnaHQgY3JlYXRlIHRhYmxlcyBvciBpbmRl\neGVzIHRoYXQgY29uZmxpY3Qgd2l0aAogICAgICogZXhpc3RpbmcgY29tcG9u\nZW50cy4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gZ2V0UmVhZFNjaGVt\nYSgpIHsKICAgICAgICByZXR1cm4gX3JlYWRTY2hlbWE7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBTZXQgdG8gdHJ1ZSB0byByZWFkIHRoZSBlbnRpcmUgc2No\nZW1hIGJlZm9yZSBtYXBwaW5nLgogICAgICogTGVhdmluZyB0aGlzIG9wdGlv\nbiBmYWxzZSBzYXZlcyB0aW1lLCBidXQgaXMgZGFuZ2Vyb3VzIHdoZW4gYWRk\naW5nCiAgICAgKiBuZXcgbWFwcGluZ3MsIGJlY2F1c2Ugd2l0aG91dCBmdWxs\nIGtub3dsZWRnZSBvZiB0aGUgZXhpc3Rpbmcgc2NoZW1hIHRoZQogICAgICog\nbWFwcGluZyB0b29sIG1pZ2h0IGNyZWF0ZSB0YWJsZXMgb3IgaW5kZXhlcyB0\naGF0IGNvbmZsaWN0IHdpdGgKICAgICAqIGV4aXN0aW5nIGNvbXBvbmVudHMu\nCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFJlYWRTY2hlbWEoYm9vbGVh\nbiByZWFkU2NoZW1hKSB7CiAgICAgICAgX3JlYWRTY2hlbWEgPSByZWFkU2No\nZW1hOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciB0byBtYW5pcHVs\nYXRlIHNlcXVlbmNlcy4gRGVmYXVsdHMgdG8gdHJ1ZS4KICAgICAqLwogICAg\ncHVibGljIGJvb2xlYW4gZ2V0U2VxdWVuY2VzKCkgewogICAgICAgIHJldHVy\nbiBfc2VxczsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8gbWFu\naXB1bGF0ZSBzZXF1ZW5jZXMuIERlZmF1bHRzIHRvIHRydWUuCiAgICAgKi8K\nICAgIHB1YmxpYyB2b2lkIHNldFNlcXVlbmNlcyhib29sZWFuIHNlcXMpIHsK\nICAgICAgICBfc2VxcyA9IHNlcXM7CiAgICB9CgogICAgLyoqCiAgICAgKiBX\naGV0aGVyIGluZGV4ZXMgb24gZXhpc3RpbmcgdGFibGVzIHNob3VsZCBiZSBt\nYW5pcHVsYXRlZC4KICAgICAqIERlZmF1bHRzIHRvIGZhbHNlLgogICAgICov\nCiAgICBwdWJsaWMgYm9vbGVhbiBnZXRJbmRleGVzKCkgewogICAgICAgIHJl\ndHVybiBfaW5kZXhlczsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIg\naW5kZXhlcyBvbiBleGlzdGluZyB0YWJsZXMgc2hvdWxkIGJlIG1hbmlwdWxh\ndGVkLgogICAgICogRGVmYXVsdHMgdG8gZmFsc2UuCiAgICAgKi8KICAgIHB1\nYmxpYyB2b2lkIHNldEluZGV4ZXMoYm9vbGVhbiBpbmRleGVzKSB7CiAgICAg\nICAgX2luZGV4ZXMgPSBpbmRleGVzOwogICAgfQoKICAgIC8qKgogICAgICog\nV2hldGhlciBmb3JlaWduIGtleXMgb24gZXhpc3RpbmcgdGFibGVzIHNob3Vs\nZCBiZSBtYW5pcHVsYXRlZC4KICAgICAqIERlZmF1bHRzIHRvIGZhbHNlLgog\nICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBnZXRGb3JlaWduS2V5cygpIHsK\nICAgICAgICByZXR1cm4gX2ZrczsKICAgIH0KCiAgICAvKioKICAgICAqIFdo\nZXRoZXIgZm9yZWlnbiBrZXlzIG9uIGV4aXN0aW5nIHRhYmxlcyBzaG91bGQg\nYmUgbWFuaXB1bGF0ZWQuCiAgICAgKiBEZWZhdWx0cyB0byBmYWxzZS4KICAg\nICAqLwogICAgcHVibGljIHZvaWQgc2V0Rm9yZWlnbktleXMoYm9vbGVhbiBm\na3MpIHsKICAgICAgICBfZmtzID0gZmtzOwogICAgfQoKICAgIC8qKgogICAg\nICogV2hldGhlciBwcmltYXJ5IGtleXMgb24gZXhpc3RpbmcgdGFibGVzIHNo\nb3VsZCBiZSBtYW5pcHVsYXRlZC4KICAgICAqIERlZmF1bHRzIHRvIGZhbHNl\nLgogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBnZXRQcmltYXJ5S2V5cygp\nIHsKICAgICAgICByZXR1cm4gX3BrczsKICAgIH0KCiAgICAvKioKICAgICAq\nIFdoZXRoZXIgcHJpbWFyeSBrZXlzIG9uIGV4aXN0aW5nIHRhYmxlcyBzaG91\nbGQgYmUgbWFuaXB1bGF0ZWQuCiAgICAgKiBEZWZhdWx0cyB0byBmYWxzZS4K\nICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0UHJpbWFyeUtleXMoYm9vbGVh\nbiBwa3MpIHsKICAgICAgICBfcGtzID0gcGtzOwogICAgfQoKICAgIC8qKgog\nICAgICogV2hldGhlciBzY2hlbWEgY29tcG9uZW50cyB0aGF0IGFyZSB1bnVz\nZWQgYnkgYW55IG1hcHBpbmcgd2lsbCBiZQogICAgICogZHJvcHBlZCBmcm9t\nIHRoaXMgdG9vbCdzIHtAbGluayBTY2hlbWFHcm91cH0sIGFuZCwgZGVwZW5k\naW5nIG9uCiAgICAgKiB0aGUgc2NoZW1hIGFjdGlvbiwgZnJvbSB0aGUgZGF0\nYWJhc2UuIERlZmF1bHRzIHRvIHRydWUuCiAgICAgKi8KICAgIHB1YmxpYyBi\nb29sZWFuIGdldERyb3BVbnVzZWRDb21wb25lbnRzKCkgewogICAgICAgIHJl\ndHVybiBfZHJvcFVudXNlZDsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRo\nZXIgc2NoZW1hIGNvbXBvbmVudHMgdGhhdCBhcmUgdW51c2VkIGJ5IGFueSBt\nYXBwaW5nIHdpbGwgYmUKICAgICAqIGRyb3BwZWQgZnJvbSB0aGlzIHRvb2wn\ncyB7QGxpbmsgU2NoZW1hR3JvdXB9LCBhbmQsIGRlcGVuZGluZyBvbgogICAg\nICogdGhlIHNjaGVtYSBhY3Rpb24sIGZyb20gdGhlIGRhdGFiYXNlLiBEZWZh\ndWx0cyB0byB0cnVlLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXREcm9w\nVW51c2VkQ29tcG9uZW50cyhib29sZWFuIGRyb3BVbnVzZWQpIHsKICAgICAg\nICBfZHJvcFVudXNlZCA9IGRyb3BVbnVzZWQ7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBXaGV0aGVyIGFuZCBTUUwgZXJyb3JzIHNob3VsZCBjYXVzZSBhIGZh\naWx1cmUgb3IganVzdCBpc3N1ZSBhIHdhcm5pbmcuCiAgICAgKi8KICAgIHB1\nYmxpYyB2b2lkIHNldElnbm9yZUVycm9ycyhib29sZWFuIGlnbm9yZUVycm9y\ncykgewogICAgICAgIF9pZ25vcmVFcnJvcnMgPSBpZ25vcmVFcnJvcnM7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVyIGFuZCBTUUwgZXJyb3JzIHNo\nb3VsZCBjYXVzZSBhIGZhaWx1cmUgb3IganVzdCBpc3N1ZSBhIHdhcm5pbmcu\nCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGdldElnbm9yZUVycm9ycygp\nIHsKICAgICAgICByZXR1cm4gX2lnbm9yZUVycm9yczsKICAgIH0KCiAgICAv\nKioKICAgICAqIFJldHVybiB0aGUgc2NoZW1hIHRvb2wgdG8gdXNlIGZvciBz\nY2hlbWEgbW9kaWZpY2F0aW9uLgogICAgICovCiAgICBwcml2YXRlIFNjaGVt\nYVRvb2wgbmV3U2NoZW1hVG9vbChTdHJpbmcgYWN0aW9uKSB7CiAgICAgICAg\naWYgKFNDSEVNQV9BQ1RJT05fTk9ORS5lcXVhbHMoYWN0aW9uKSkKICAgICAg\nICAgICAgYWN0aW9uID0gbnVsbDsKICAgICAgICBTY2hlbWFUb29sIHRvb2wg\nPSBuZXcgU2NoZW1hVG9vbChfY29uZiwgYWN0aW9uKTsKICAgICAgICB0b29s\nLnNldElnbm9yZUVycm9ycyhnZXRJZ25vcmVFcnJvcnMoKSk7CiAgICAgICAg\ndG9vbC5zZXRQcmltYXJ5S2V5cyhnZXRQcmltYXJ5S2V5cygpKTsKICAgICAg\nICB0b29sLnNldEZvcmVpZ25LZXlzKGdldEZvcmVpZ25LZXlzKCkpOwogICAg\nICAgIHRvb2wuc2V0SW5kZXhlcyhnZXRJbmRleGVzKCkpOwogICAgICAgIHRv\nb2wuc2V0U2VxdWVuY2VzKGdldFNlcXVlbmNlcygpKTsKICAgICAgICByZXR1\ncm4gdG9vbDsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCB0aGUgc2NoZW1h\nIHRvb2wgdG8gdXNlIGZvciBzY2hlbWEgbW9kaWZpY2F0aW9uLgogICAgICov\nCiAgICBwdWJsaWMgdm9pZCBzZXRTY2hlbWFUb29sKFNjaGVtYVRvb2wgdG9v\nbCkgewogICAgICAgIF9zY2hlbWFUb29sID0gdG9vbDsKICAgIH0KCiAgICAv\nKioKICAgICAqIFRoZSBzdHJlYW0gdG8gZXhwb3J0IHRoZSBwbGFubmVkIHNj\naGVtYSB0byBhcyBhbiBYTUwgZG9jdW1lbnQuCiAgICAgKiBJZiBub24tbnVs\nbCwgdGhlbiB0aGUgZGF0YWJhc2Ugc2NoZW1hIHdpbGwgbm90IGJlIGFsdGVy\nZWQuCiAgICAgKi8KICAgIHB1YmxpYyBXcml0ZXIgZ2V0U2NoZW1hV3JpdGVy\nKCkgewogICAgICAgIHJldHVybiBfc2NoZW1hV3JpdGVyOwogICAgfQoKICAg\nIC8qKgogICAgICogVGhlIHN0cmVhbSB0byBleHBvcnQgdGhlIHBsYW5uZWQg\nc2NoZW1hIHRvIGFzIGFuIFhNTCBkb2N1bWVudC4KICAgICAqIElmIG5vbi1u\ndWxsLCB0aGVuIHRoZSBkYXRhYmFzZSBzY2hlbWEgd2lsbCBub3QgYmUgYWx0\nZXJlZC4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0U2NoZW1hV3JpdGVy\nKFdyaXRlciBzY2hlbWFXcml0ZXIpIHsKICAgICAgICBfc2NoZW1hV3JpdGVy\nID0gc2NoZW1hV3JpdGVyOwogICAgfQoKICAgIC8qKgogICAgICogVGhlIHN0\ncmVhbSB0byBleHBvcnQgdGhlIHBsYW5uZWQgbWFwcGluZ3MgdG8gYXMgYW4g\nWE1MIGRvY3VtZW50LgogICAgICogSWYgbm9uLW51bGwsIHRoZW4gdGhlIG1h\ncHBpbmcgcmVwb3NpdG9yeSB3aWxsIG5vdCBiZSBhbHRlcmVkLgogICAgICov\nCiAgICBwdWJsaWMgV3JpdGVyIGdldE1hcHBpbmdXcml0ZXIoKSB7CiAgICAg\nICAgcmV0dXJuIF9tYXBwaW5nV3JpdGVyOwogICAgfQoKICAgIC8qKgogICAg\nICogVGhlIHN0cmVhbSB0byBleHBvcnQgdGhlIHBsYW5uZWQgbWFwcGluZ3Mg\ndG8gYXMgYW4gWE1MIGRvY3VtZW50LgogICAgICogSWYgbm9uLW51bGwsIHRo\nZW4gdGhlIG1hcHBpbmcgcmVwb3NpdG9yeSB3aWxsIG5vdCBiZSBhbHRlcmVk\nLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRNYXBwaW5nV3JpdGVyKFdy\naXRlciBtYXBwaW5nV3JpdGVyKSB7CiAgICAgICAgX21hcHBpbmdXcml0ZXIg\nPSBtYXBwaW5nV3JpdGVyOwogICAgfQoKICAgIC8qKgogICAgICogSWYgYWRk\naW5nIG1ldGFkYXRhLCB0aGUgbWV0YWRhdGEgZmlsZSB0byBhZGQgdG8uCiAg\nICAgKi8KICAgIHB1YmxpYyBGaWxlIGdldE1ldGFEYXRhRmlsZSgpIHsKICAg\nICAgICByZXR1cm4gX2ZpbGU7CiAgICB9CgogICAgLyoqCiAgICAgKiBJZiBh\nZGRpbmcgbWV0YWRhdGEsIHRoZSBtZXRhZGF0YSBmaWxlIHRvIGFkZCB0by4K\nICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0TWV0YURhdGFGaWxlKEZpbGUg\nZmlsZSkgewogICAgICAgIF9maWxlID0gZmlsZTsKICAgIH0KCiAgICAvKioK\nICAgICAqIFJldHVybiB0aGUgcmVwb3NpdG9yeSB0byB1c2UgdG8gYWNjZXNz\nIG1hcHBpbmcgaW5mb3JtYXRpb24uCiAgICAgKiBEZWZhdWx0cyB0byBhIG5l\ndyB7QGxpbmsgTWFwcGluZ1JlcG9zaXRvcnl9LgogICAgICovCiAgICBwdWJs\naWMgTWFwcGluZ1JlcG9zaXRvcnkgZ2V0UmVwb3NpdG9yeSgpIHsKICAgICAg\nICBpZiAoX3JlcG9zID09IG51bGwpIHsKICAgICAgICAgICAgX3JlcG9zID0g\nX2NvbmYubmV3TWFwcGluZ1JlcG9zaXRvcnlJbnN0YW5jZSgpOwogICAgICAg\nICAgICBfcmVwb3Muc2V0U2NoZW1hR3JvdXAoZ2V0U2NoZW1hR3JvdXAoKSk7\nCiAgICAgICAgICAgIF9yZXBvcy5zZXRWYWxpZGF0ZShfcmVwb3MuVkFMSURB\nVEVfVU5FTkhBTkNFRCwgZmFsc2UpOwogICAgICAgIH0KICAgICAgICByZXR1\ncm4gX3JlcG9zOwogICAgfQoKICAgIC8qKgogICAgICogU2V0IHRoZSByZXBv\nc2l0b3J5IHRvIHVzZSB0byBhY2Nlc3MgbWFwcGluZyBpbmZvcm1hdGlvbi4K\nICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0UmVwb3NpdG9yeShNYXBwaW5n\nUmVwb3NpdG9yeSByZXBvcykgewogICAgICAgIF9yZXBvcyA9IHJlcG9zOwog\nICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBzY2hlbWEgZ3JvdXAg\ndG8gdXNlIGluIG1hcHBpbmcuIElmIG5vbmUgaGFzIGJlZW4gc2V0LCB0aGUK\nICAgICAqIHNjaGVtYSB3aWxsIGJlIGdlbmVyYXRlZCBmcm9tIHRoZSBkYXRh\nYmFzZS4KICAgICAqLwogICAgcHVibGljIFNjaGVtYUdyb3VwIGdldFNjaGVt\nYUdyb3VwKCkgewogICAgICAgIGlmIChfc2NoZW1hID09IG51bGwpIHsKICAg\nICAgICAgICAgaWYgKF9hY3Rpb24uY29udGFpbnMoQUNUSU9OX0JVSUxEX1ND\nSEVNQSkpIHsKICAgICAgICAgICAgICAgIER5bmFtaWNTY2hlbWFGYWN0b3J5\nIGZhY3RvcnkgPSBuZXcgRHluYW1pY1NjaGVtYUZhY3RvcnkoKTsKICAgICAg\nICAgICAgICAgIGZhY3Rvcnkuc2V0Q29uZmlndXJhdGlvbihfY29uZik7CiAg\nICAgICAgICAgICAgICBfc2NoZW1hID0gZmFjdG9yeTsKICAgICAgICAgICAg\nfSBlbHNlIGlmIChfcmVhZFNjaGVtYSAKICAgICAgICAgICAgICAgIHx8IF9z\nY2hlbWFBY3Rpb25zLmNvbnRhaW5zKFNjaGVtYVRvb2wuQUNUSU9OX1JFVEFJ\nTikKICAgICAgICAgICAgICAgIHx8IF9zY2hlbWFBY3Rpb25zLmNvbnRhaW5z\nKFNjaGVtYVRvb2wuQUNUSU9OX1JFRlJFU0gpKSB7CiAgICAgICAgICAgICAg\nICBfc2NoZW1hID0gKFNjaGVtYUdyb3VwKSBuZXdTY2hlbWFUb29sKG51bGwp\nLmdldERCU2NoZW1hR3JvdXAoKS4KICAgICAgICAgICAgICAgICAgICBjbG9u\nZSgpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8g\nd2l0aCB0aGlzIHdlJ2xsIGp1c3QgcmVhZCB0YWJsZXMgYXMgZGlmZmVyZW50\nIG1hcHBpbmdzCiAgICAgICAgICAgICAgICAvLyBsb29rIGZvciB0aGVtCiAg\nICAgICAgICAgICAgICBMYXp5U2NoZW1hRmFjdG9yeSBmYWN0b3J5ID0gbmV3\nIExhenlTY2hlbWFGYWN0b3J5KCk7CiAgICAgICAgICAgICAgICBmYWN0b3J5\nLnNldENvbmZpZ3VyYXRpb24oX2NvbmYpOwogICAgICAgICAgICAgICAgZmFj\ndG9yeS5zZXRQcmltYXJ5S2V5cyhnZXRQcmltYXJ5S2V5cygpKTsKICAgICAg\nICAgICAgICAgIGZhY3Rvcnkuc2V0Rm9yZWlnbktleXMoZ2V0Rm9yZWlnbktl\neXMoKSk7CiAgICAgICAgICAgICAgICBmYWN0b3J5LnNldEluZGV4ZXMoZ2V0\nSW5kZXhlcygpKTsKICAgICAgICAgICAgICAgIF9zY2hlbWEgPSBmYWN0b3J5\nOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoX3NjaGVtYS5nZXRT\nY2hlbWFzKCkubGVuZ3RoID09IDApCiAgICAgICAgICAgICAgICBfc2NoZW1h\nLmFkZFNjaGVtYSgpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gX3NjaGVt\nYTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCB0aGUgc2NoZW1hIHRvIHVz\nZSBpbiBtYXBwaW5nLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRTY2hl\nbWFHcm91cChTY2hlbWFHcm91cCBzY2hlbWEpIHsKICAgICAgICBfc2NoZW1h\nID0gc2NoZW1hOwogICAgfQoKICAgIC8qKgogICAgICogUmVzZXQgdGhlIGlu\ndGVybmFsIHJlcG9zaXRvcnkuIFRoaXMgaXMgY2FsbGVkIGF1dG9tYXRpY2Fs\nbHkgYWZ0ZXIKICAgICAqIGV2ZXJ5IHtAbGluayAjcmVjb3JkfS4KICAgICAq\nLwogICAgcHVibGljIHZvaWQgY2xlYXIoKSB7CiAgICAgICAgX3JlcG9zID0g\nbnVsbDsKICAgICAgICBfc2NoZW1hID0gbnVsbDsKICAgICAgICBfc2NoZW1h\nVG9vbCA9IG51bGw7CiAgICAgICAgX2ZsdXNoID0gZmFsc2U7CiAgICAgICAg\nX2ZsdXNoU2NoZW1hID0gZmFsc2U7CiAgICAgICAgaWYgKF9kcm9wQ2xzICE9\nIG51bGwpCiAgICAgICAgICAgIF9kcm9wQ2xzLmNsZWFyKCk7CiAgICAgICAg\naWYgKF9kcm9wTWFwICE9IG51bGwpCiAgICAgICAgICAgIF9kcm9wTWFwLmNs\nZWFyKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZWNvcmRzIHRoZSBjaGFu\nZ2VzIHRoYXQgaGF2ZSBiZWVuIG1hZGUgdG8gYm90aCB0aGUgbWFwcGluZ3Mg\nYW5kIHRoZQogICAgICogYXNzb2NpYXRlZCBzY2hlbWEsIGFuZCBjbGVhcnMg\ndGhlIHRvb2wgZm9yIGZ1cnRoZXIgdXNlLiBUaGlzIGFsc28KICAgICAqIGlu\ndm9sdmVzIGNsZWFyaW5nIHRoZSBpbnRlcm5hbCBtYXBwaW5nIHJlcG9zaXRv\ncnkuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHJlY29yZCgpIHsKICAgICAg\nICByZWNvcmQobnVsbCk7CiAgICB9CiAgICAKICAgIHByaXZhdGUgdm9pZCBy\nZWNvcmQoTWFwcGluZ1Rvb2wuRmxhZ3MgZmxhZ3MpIHsKICAgICAgICBNYXBw\naW5nUmVwb3NpdG9yeSByZXBvcyA9IGdldFJlcG9zaXRvcnkoKTsKICAgICAg\nICBNZXRhRGF0YUZhY3RvcnkgaW8gPSByZXBvcy5nZXRNZXRhRGF0YUZhY3Rv\ncnkoKTsKICAgICAgICBDbGFzc01hcHBpbmdbXSBtYXBwaW5nczsKICAgICAg\nICBpZiAoIUFDVElPTl9EUk9QLmVxdWFscyhfYWN0aW9uKSkKICAgICAgICAg\nICAgbWFwcGluZ3MgPSByZXBvcy5nZXRNYXBwaW5ncygpOwogICAgICAgIGVs\nc2UgaWYgKF9kcm9wTWFwICE9IG51bGwpCiAgICAgICAgICAgIG1hcHBpbmdz\nID0gKENsYXNzTWFwcGluZ1tdKSBfZHJvcE1hcC50b0FycmF5CiAgICAgICAg\nICAgICAgICAobmV3IENsYXNzTWFwcGluZ1tfZHJvcE1hcC5zaXplKCldKTsK\nICAgICAgICBlbHNlCiAgICAgICAgICAgIG1hcHBpbmdzID0gbmV3IENsYXNz\nTWFwcGluZ1swXTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKF9k\ncm9wQ2xzICE9IG51bGwgJiYgIV9kcm9wQ2xzLmlzRW1wdHkoKSkgewogICAg\nICAgICAgICAgICAgQ2xhc3NbXSBjbHMgPSAoQ2xhc3NbXSkgX2Ryb3BDbHMu\ndG9BcnJheQogICAgICAgICAgICAgICAgICAgIChuZXcgQ2xhc3NbX2Ryb3BD\nbHMuc2l6ZSgpXSk7CiAgICAgICAgICAgICAgICBpZiAoIWlvLmRyb3AoY2xz\nLCBfbW9kZSwgbnVsbCkpCiAgICAgICAgICAgICAgICAgICAgX2xvZy53YXJu\nKF9sb2MuZ2V0KCJiYWQtZHJvcCIsIF9kcm9wQ2xzKSk7CiAgICAgICAgICAg\nIH0KCiAgICAgICAgICAgIGlmIChfZmx1c2hTY2hlbWEpIHsKICAgICAgICAg\nICAgICAgIC8vIGRyb3AgcG9ydGlvbnMgb2YgdGhlIGtub3duIHNjaGVtYSB0\naGF0IG5vIG1hcHBpbmcgdXNlcywgYW5kCiAgICAgICAgICAgICAgICAvLyBh\nZGQgc2VxdWVuY2VzIHVzZWQgZm9yIHZhbHVlIGdlbmVyYXRpb24KICAgICAg\nICAgICAgICAgIGlmIChfZHJvcFVudXNlZCkKICAgICAgICAgICAgICAgICAg\nICBkcm9wVW51c2VkU2NoZW1hQ29tcG9uZW50cyhtYXBwaW5ncyk7CiAgICAg\nICAgICAgICAgICBhZGRTZXF1ZW5jZUNvbXBvbmVudHMobWFwcGluZ3MpOwoK\nICAgICAgICAgICAgICAgIC8vIG5vdyBydW4gdGhlIHNjaGVtYXRvb2wgYXMg\nbG9uZyBhcyB3ZSdyZSBkb2luZyBzb21lIHNjaGVtYQogICAgICAgICAgICAg\nICAgLy8gYWN0aW9uIGFuZCB0aGUgdXNlciBkb2Vzbid0IGp1c3Qgd2FudCBh\nbiB4bWwgb3V0cHV0CiAgICAgICAgICAgICAgICBTdHJpbmdbXSBzY2hlbWFB\nY3Rpb25zID0gX3NjaGVtYUFjdGlvbnMuc3BsaXQoIiwiKTsKICAgICAgICAg\nICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc2NoZW1hQWN0aW9ucy5sZW5n\ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGlmICghU0NIRU1BX0FD\nVElPTl9OT05FLmVxdWFscyhzY2hlbWFBY3Rpb25zW2ldKQogICAgICAgICAg\nICAgICAgICAgICAgICAmJiAoX3NjaGVtYVdyaXRlciA9PSBudWxsIHx8IChf\nc2NoZW1hVG9vbCAhPSBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAmJiBfc2NoZW1hVG9vbC5nZXRXcml0ZXIoKSAhPSBudWxsKSkpIHsKICAg\nICAgICAgICAgICAgICAgICAgICAgU2NoZW1hVG9vbCB0b29sID0gbmV3U2No\nZW1hVG9vbChzY2hlbWFBY3Rpb25zW2ldKTsKCiAgICAgICAgICAgICAgICAg\nICAgICAgIC8vIGNvbmZpZ3VyZSB0aGUgdG9vbCB3aXRoIGFkZGl0aW9uYWwg\nc2V0dGluZ3MKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZsYWdzICE9\nIG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2wuc2V0\nRHJvcFRhYmxlcyhmbGFncy5kcm9wVGFibGVzKTsKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgIHRvb2wuc2V0RHJvcFNlcXVlbmNlcyhmbGFncy5kcm9w\nU2VxdWVuY2VzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2wu\nc2V0V3JpdGVyKGZsYWdzLnNxbFdyaXRlcik7CiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICB0b29sLnNldE9wZW5KUEFUYWJsZXMoZmxhZ3Mub3Blbmpw\nYVRhYmxlcyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAg\nICAgICAgICAgICAgICAgIHRvb2wuc2V0U2NoZW1hR3JvdXAoZ2V0U2NoZW1h\nR3JvdXAoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2wucnVuKCk7\nCiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2wucmVjb3JkKCk7CiAgICAg\nICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAg\nICAgICAgIC8vIHhtbCBvdXRwdXQgb2Ygc2NoZW1hPwogICAgICAgICAgICAg\nICAgaWYgKF9zY2hlbWFXcml0ZXIgIT0gbnVsbCkgewogICAgICAgICAgICAg\nICAgICAgIC8vIHNlcmlhbGl6ZSB0aGUgcGxhbm5lZCBzY2hlbWEgdG8gdGhl\nIHN0cmVhbQogICAgICAgICAgICAgICAgICAgIFNjaGVtYVNlcmlhbGl6ZXIg\nc2VyID0gbmV3IFhNTFNjaGVtYVNlcmlhbGl6ZXIoX2NvbmYpOwogICAgICAg\nICAgICAgICAgICAgIHNlci5hZGRBbGwoZ2V0U2NoZW1hR3JvdXAoKSk7CiAg\nICAgICAgICAgICAgICAgICAgc2VyLnNlcmlhbGl6ZShfc2NoZW1hV3JpdGVy\nLCBzZXIuUFJFVFRZKTsKICAgICAgICAgICAgICAgICAgICBfc2NoZW1hV3Jp\ndGVyLmZsdXNoKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0K\nICAgICAgICAgICAgaWYgKCFfZmx1c2gpCiAgICAgICAgICAgICAgICByZXR1\ncm47CgogICAgICAgICAgICBRdWVyeU1ldGFEYXRhW10gcXVlcmllcyA9IHJl\ncG9zLmdldFF1ZXJ5TWV0YURhdGFzKCk7CiAgICAgICAgICAgIFNlcXVlbmNl\nTWV0YURhdGFbXSBzZXFzID0gcmVwb3MuZ2V0U2VxdWVuY2VNZXRhRGF0YXMo\nKTsKICAgICAgICAgICAgTWFwIG91dHB1dCA9IG51bGw7CgogICAgICAgICAg\nICAvLyBpZiB3ZSdyZSBvdXRwdXR0aW5nIHRvIHN0cmVhbSwgc2V0IGFsbCBt\nZXRhcyB0byBzYW1lIGZpbGUgc28KICAgICAgICAgICAgLy8gdGhleSBnZXQg\ncGxhY2VkIGluIHNpbmdsZSBzdHJpbmcKICAgICAgICAgICAgaWYgKF9tYXBw\naW5nV3JpdGVyICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIG91dHB1dCA9\nIG5ldyBIYXNoTWFwKCk7CiAgICAgICAgICAgICAgICBGaWxlIHRtcCA9IG5l\ndyBGaWxlKCJvcGVuanBhdG1wIik7CiAgICAgICAgICAgICAgICBmb3IgKGlu\ndCBpID0gMDsgaSA8IG1hcHBpbmdzLmxlbmd0aDsgaSsrKQogICAgICAgICAg\nICAgICAgICAgIG1hcHBpbmdzW2ldLnNldFNvdXJjZSh0bXAsIG1hcHBpbmdz\nW2ldLlNSQ19PVEhFUik7CiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0g\nMDsgaSA8IHF1ZXJpZXMubGVuZ3RoOyBpKyspCiAgICAgICAgICAgICAgICAg\nICAgcXVlcmllc1tpXS5zZXRTb3VyY2UodG1wLCBxdWVyaWVzW2ldLmdldFNv\ndXJjZVNjb3BlKCksCiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJpZXNb\naV0uU1JDX09USEVSKTsKICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAw\nOyBpIDwgc2Vxcy5sZW5ndGg7IGkrKykKICAgICAgICAgICAgICAgICAgICBz\nZXFzW2ldLnNldFNvdXJjZSh0bXAsIHNlcXNbaV0uZ2V0U291cmNlU2NvcGUo\nKSwKICAgICAgICAgICAgICAgICAgICAgICAgc2Vxc1tpXS5TUkNfT1RIRVIp\nOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBzdG9yZQogICAgICAg\nICAgICBpZiAoIWlvLnN0b3JlKG1hcHBpbmdzLCBxdWVyaWVzLCBzZXFzLCBf\nbW9kZSwgb3V0cHV0KSkKICAgICAgICAgICAgICAgIHRocm93IG5ldyBNZXRh\nRGF0YUV4Y2VwdGlvbihfbG9jLmdldCgiYmFkLXN0b3JlIikpOwoKICAgICAg\nICAgICAgLy8gd3JpdGUgdG8gc3RyZWFtCiAgICAgICAgICAgIGlmIChfbWFw\ncGluZ1dyaXRlciAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBQcmludFdy\naXRlciBvdXQgPSBuZXcgUHJpbnRXcml0ZXIoX21hcHBpbmdXcml0ZXIpOwog\nICAgICAgICAgICAgICAgZm9yIChJdGVyYXRvciBpdHIgPSBvdXRwdXQudmFs\ndWVzKCkuaXRlcmF0b3IoKTsKICAgICAgICAgICAgICAgICAgICBpdHIuaGFz\nTmV4dCgpOykKICAgICAgICAgICAgICAgICAgICBvdXQucHJpbnRsbigoU3Ry\naW5nKSBpdHIubmV4dCgpKTsKICAgICAgICAgICAgICAgIG91dC5mbHVzaCgp\nOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGNhdGNoIChSdW50\naW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAgICAgIHRocm93IHJlOwogICAg\nICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIHRocm93\nIG5ldyBHZW5lcmFsRXhjZXB0aW9uKGUpOwogICAgICAgIH0gZmluYWxseSB7\nCiAgICAgICAgICAgIGNsZWFyKCk7CiAgICAgICAgfQogICAgfQoKICAgIC8q\nKgogICAgICogRHJvcHMgc2NoZW1hIGNvbXBvbmVudHMgdGhhdCBhcHBlYXIg\ndG8gYmUgdW51c2VkIGZyb20gdGhlIGxvY2FsCiAgICAgKiBjb3B5IG9mIHRo\nZSBzY2hlbWEgZ3JvdXAuCiAgICAgKi8KICAgIHByaXZhdGUgdm9pZCBkcm9w\nVW51c2VkU2NoZW1hQ29tcG9uZW50cyhDbGFzc01hcHBpbmdbXSBtYXBwaW5n\ncykgewogICAgICAgIEZpZWxkTWFwcGluZ1tdIGZpZWxkczsKICAgICAgICBm\nb3IgKGludCBpID0gMDsgaSA8IG1hcHBpbmdzLmxlbmd0aDsgaSsrKSB7CiAg\nICAgICAgICAgIG1hcHBpbmdzW2ldLnJlZlNjaGVtYUNvbXBvbmVudHMoKTsK\nICAgICAgICAgICAgbWFwcGluZ3NbaV0uZ2V0RGlzY3JpbWluYXRvcigpLnJl\nZlNjaGVtYUNvbXBvbmVudHMoKTsKICAgICAgICAgICAgbWFwcGluZ3NbaV0u\nZ2V0VmVyc2lvbigpLnJlZlNjaGVtYUNvbXBvbmVudHMoKTsKICAgICAgICAg\nICAgZmllbGRzID0gbWFwcGluZ3NbaV0uZ2V0RGVmaW5lZEZpZWxkTWFwcGlu\nZ3MoKTsKICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBmaWVsZHMu\nbGVuZ3RoOyBqKyspCiAgICAgICAgICAgICAgICBmaWVsZHNbal0ucmVmU2No\nZW1hQ29tcG9uZW50cygpOwogICAgICAgIH0KCiAgICAgICAgLy8gYWxzbyBh\nbGxvdyB0aGUgZGJkaWN0aW9uYXJ5IHRvIHJlZiBhbnkgc2NoZW1hIGNvbXBv\nbmVudHMgdGhhdAogICAgICAgIC8vIGl0IGFkZHMgYXBhcnQgZnJvbSBtYXBw\naW5ncwogICAgICAgIFNjaGVtYUdyb3VwIGdyb3VwID0gZ2V0U2NoZW1hR3Jv\ndXAoKTsKICAgICAgICBTY2hlbWFbXSBzY2hlbWFzID0gZ3JvdXAuZ2V0U2No\nZW1hcygpOwogICAgICAgIFRhYmxlW10gdGFibGVzOwogICAgICAgIERCRGlj\ndGlvbmFyeSBkaWN0ID0gX2NvbmYuZ2V0REJEaWN0aW9uYXJ5SW5zdGFuY2Uo\nKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHNjaGVtYXMubGVuZ3Ro\nOyBpKyspIHsKICAgICAgICAgICAgdGFibGVzID0gc2NoZW1hc1tpXS5nZXRU\nYWJsZXMoKTsKICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCB0YWJs\nZXMubGVuZ3RoOyBqKyspCiAgICAgICAgICAgICAgICBkaWN0LnJlZlNjaGVt\nYUNvbXBvbmVudHModGFibGVzW2pdKTsKICAgICAgICB9CgogICAgICAgIGdy\nb3VwLnJlbW92ZVVudXNlZENvbXBvbmVudHMoKTsKICAgIH0KCiAgICAvKioK\nICAgICAqIEFkZCB0YWJsZXMgdXNlZCBieSBzZXF1ZW5jZXMgdG8gdGhlIGdp\ndmVuIHNjaGVtYS4KICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIGFkZFNlcXVl\nbmNlQ29tcG9uZW50cyhDbGFzc01hcHBpbmdbXSBtYXBwaW5ncykgewogICAg\nICAgIFNjaGVtYUdyb3VwIGdyb3VwID0gZ2V0U2NoZW1hR3JvdXAoKTsKICAg\nICAgICBmb3IgKGludCBpID0gMDsgaSA8IG1hcHBpbmdzLmxlbmd0aDsgaSsr\nKQogICAgICAgICAgICBhZGRTZXF1ZW5jZUNvbXBvbmVudHMobWFwcGluZ3Nb\naV0sIGdyb3VwKTsKICAgIH0KCiAgICAvKioKICAgICAqIEFkZCB0YWJsZXMg\ndXNlZCBieSBzZXF1ZW5jZXMgdG8gdGhlIGdpdmVuIHNjaGVtYS4KICAgICAq\nLwogICAgcHJpdmF0ZSB2b2lkIGFkZFNlcXVlbmNlQ29tcG9uZW50cyhDbGFz\nc01hcHBpbmcgbWFwcGluZywKICAgICAgICBTY2hlbWFHcm91cCBncm91cCkg\newogICAgICAgIFNlcXVlbmNlTWV0YURhdGEgc21kID0gbWFwcGluZy5nZXRJ\nZGVudGl0eVNlcXVlbmNlTWV0YURhdGEoKTsKICAgICAgICBTZXEgc2VxID0g\nbnVsbDsKICAgICAgICBpZiAoc21kICE9IG51bGwpCiAgICAgICAgICAgIHNl\ncSA9IHNtZC5nZXRJbnN0YW5jZShudWxsKTsKICAgICAgICBlbHNlIGlmICht\nYXBwaW5nLmdldElkZW50aXR5U3RyYXRlZ3koKSA9PSBWYWx1ZVN0cmF0ZWdp\nZXMuTkFUSVZFCiAgICAgICAgICAgIHx8IChtYXBwaW5nLmdldElkZW50aXR5\nU3RyYXRlZ3koKSA9PSBWYWx1ZVN0cmF0ZWdpZXMuTk9ORQogICAgICAgICAg\nICAmJiBtYXBwaW5nLmdldElkZW50aXR5VHlwZSgpID09IENsYXNzTWFwcGlu\nZy5JRF9EQVRBU1RPUkUpKQogICAgICAgICAgICBzZXEgPSBfY29uZi5nZXRT\nZXF1ZW5jZUluc3RhbmNlKCk7CgogICAgICAgIGlmIChzZXEgaW5zdGFuY2Vv\nZiBKREJDU2VxKQogICAgICAgICAgICAoKEpEQkNTZXEpIHNlcSkuYWRkU2No\nZW1hKG1hcHBpbmcsIGdyb3VwKTsKCiAgICAgICAgRmllbGRNYXBwaW5nW10g\nZm1kczsKICAgICAgICBpZiAobWFwcGluZy5nZXRFbWJlZGRpbmdNZXRhRGF0\nYSgpID09IG51bGwpCiAgICAgICAgICAgIGZtZHMgPSBtYXBwaW5nLmdldERl\nZmluZWRGaWVsZE1hcHBpbmdzKCk7CiAgICAgICAgZWxzZQogICAgICAgICAg\nICBmbWRzID0gbWFwcGluZy5nZXRGaWVsZE1hcHBpbmdzKCk7CiAgICAgICAg\nZm9yIChpbnQgaSA9IDA7IGkgPCBmbWRzLmxlbmd0aDsgaSsrKSB7CiAgICAg\nICAgICAgIHNtZCA9IGZtZHNbaV0uZ2V0VmFsdWVTZXF1ZW5jZU1ldGFEYXRh\nKCk7CiAgICAgICAgICAgIGlmIChzbWQgIT0gbnVsbCkgewogICAgICAgICAg\nICAgICAgc2VxID0gc21kLmdldEluc3RhbmNlKG51bGwpOwogICAgICAgICAg\nICAgICAgaWYgKHNlcSBpbnN0YW5jZW9mIEpEQkNTZXEpCiAgICAgICAgICAg\nICAgICAgICAgKChKREJDU2VxKSBzZXEpLmFkZFNjaGVtYShtYXBwaW5nLCBn\ncm91cCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoZm1kc1tpXS5nZXRFbWJl\nZGRlZE1hcHBpbmcoKSAhPSBudWxsKQogICAgICAgICAgICAgICAgYWRkU2Vx\ndWVuY2VDb21wb25lbnRzKGZtZHNbaV0uZ2V0RW1iZWRkZWRNYXBwaW5nKCks\nIGdyb3VwKTsKICAgICAgICB9CiAgICB9CgogICAgLy8vLy8vLy8vLy8KICAg\nIC8vIEFjdGlvbnMKICAgIC8vLy8vLy8vLy8vCgogICAgLyoqCiAgICAgKiBS\ndW4gdGhlIGNvbmZpZ3VyZWQgYWN0aW9uIG9uIHRoZSBnaXZlbiBpbnN0YW5j\nZS4KICAgICAqLwogICAgcHVibGljIHZvaWQgcnVuKENsYXNzIGNscykgewog\nICAgICAgIGlmIChBQ1RJT05fQURELmVxdWFscyhfYWN0aW9uKSkgewogICAg\nICAgICAgICBpZiAoX21ldGEpCiAgICAgICAgICAgICAgICBhZGRNZXRhKGNs\ncyk7CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGFkZChjbHMp\nOwogICAgICAgIH0gZWxzZSBpZiAoQUNUSU9OX1JFRlJFU0guZXF1YWxzKF9h\nY3Rpb24pKQogICAgICAgICAgICByZWZyZXNoKGNscyk7CiAgICAgICAgZWxz\nZSBpZiAoQUNUSU9OX0JVSUxEX1NDSEVNQS5lcXVhbHMoX2FjdGlvbikpCiAg\nICAgICAgICAgIGJ1aWxkU2NoZW1hKGNscyk7CiAgICAgICAgZWxzZSBpZiAo\nQUNUSU9OX0RST1AuZXF1YWxzKF9hY3Rpb24pKQogICAgICAgICAgICBkcm9w\nKGNscyk7CiAgICAgICAgZWxzZSBpZiAoQUNUSU9OX1ZBTElEQVRFLmVxdWFs\ncyhfYWN0aW9uKSkKICAgICAgICAgICAgdmFsaWRhdGUoY2xzKTsKICAgIH0K\nCiAgICAvKioKICAgICAqIEFkZCB0aGUgbWFwcGluZyBmb3IgdGhlIGdpdmVu\nIGluc3RhbmNlLgogICAgICovCiAgICBwcml2YXRlIHZvaWQgYWRkKENsYXNz\nIGNscykgewogICAgICAgIGlmIChjbHMgPT0gbnVsbCkKICAgICAgICAgICAg\ncmV0dXJuOwoKICAgICAgICBNYXBwaW5nUmVwb3NpdG9yeSByZXBvcyA9IGdl\ndFJlcG9zaXRvcnkoKTsKICAgICAgICByZXBvcy5zZXRTdHJhdGVneUluc3Rh\nbGxlcihuZXcgTWFwcGluZ1N0cmF0ZWd5SW5zdGFsbGVyKHJlcG9zKSk7CiAg\nICAgICAgaWYgKGdldE1hcHBpbmcocmVwb3MsIGNscywgdHJ1ZSkgIT0gbnVs\nbCkgewogICAgICAgICAgICBfZmx1c2ggPSB0cnVlOwogICAgICAgICAgICBf\nZmx1c2hTY2hlbWEgPSB0cnVlOwogICAgICAgIH0KICAgIH0KCiAgICAvKioK\nICAgICAqIFJldHVybiB0aGUgbWFwcGluZyBmb3IgdGhlIGdpdmVuIHR5cGUs\nIG9yIG51bGwgaWYgdGhlIHR5cGUgaXMKICAgICAqIHBlcnNpc3RlbmNlLWF3\nYXJlLgogICAgICovCiAgICBwcml2YXRlIHN0YXRpYyBDbGFzc01hcHBpbmcg\nZ2V0TWFwcGluZyhNYXBwaW5nUmVwb3NpdG9yeSByZXBvcywgQ2xhc3MgY2xz\nLAogICAgICAgIGJvb2xlYW4gdmFsaWRhdGUpIHsKICAgICAgICAvLyB0aGlz\nIHdpbGwgcGFyc2UgYWxsIHBvc3NpYmxlIG1ldGFkYXRhIHJzcmNzIGxvb2tp\nbmcgZm9yIGNscywgc28KICAgICAgICAvLyB3aWxsIGRldGVjdCBpZiBwLWF3\nYXJlCiAgICAgICAgQ2xhc3NNYXBwaW5nIG1hcHBpbmcgPSByZXBvcy5nZXRN\nYXBwaW5nKGNscywgbnVsbCwgZmFsc2UpOwogICAgICAgIGlmIChtYXBwaW5n\nICE9IG51bGwpCiAgICAgICAgICAgIHJldHVybiBtYXBwaW5nOwogICAgICAg\nIGlmICghdmFsaWRhdGUgfHwgY2xzLmlzSW50ZXJmYWNlKCkgCiAgICAgICAg\nICAgIHx8IHJlcG9zLmdldFBlcnNpc3RlbmNlQXdhcmUoY2xzKSAhPSBudWxs\nKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB0aHJvdyBuZXcg\nTWV0YURhdGFFeGNlcHRpb24oX2xvYy5nZXQoIm5vLW1ldGEiLCBjbHMpKTsK\nICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhIG1ldGFkYXRhIGZvciB0\naGUgZ2l2ZW4gaW5zdGFuY2UuCiAgICAgKi8KICAgIHByaXZhdGUgdm9pZCBh\nZGRNZXRhKENsYXNzIGNscykgewogICAgICAgIGlmIChjbHMgPT0gbnVsbCkK\nICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICBfZmx1c2ggPSB0cnVlOwog\nICAgICAgIE1hcHBpbmdSZXBvc2l0b3J5IHJlcG9zID0gZ2V0UmVwb3NpdG9y\neSgpOwogICAgICAgIHJlcG9zLnNldFJlc29sdmUoTU9ERV9NQVBQSU5HLCBm\nYWxzZSk7CiAgICAgICAgTWV0YURhdGFGYWN0b3J5IGZhY3RvcnkgPSByZXBv\ncy5nZXRNZXRhRGF0YUZhY3RvcnkoKTsKICAgICAgICBmYWN0b3J5LmdldERl\nZmF1bHRzKCkuc2V0SWdub3JlTm9uUGVyc2lzdGVudChmYWxzZSk7CiAgICAg\nICAgZmFjdG9yeS5zZXRTdG9yZU1vZGUoTWV0YURhdGFGYWN0b3J5LlNUT1JF\nX1ZFUkJPU0UpOwoKICAgICAgICBDbGFzc01ldGFEYXRhIG1ldGEgPSByZXBv\ncy5hZGRNZXRhRGF0YShjbHMpOwogICAgICAgIEZpZWxkTWV0YURhdGFbXSBm\nbWRzID0gbWV0YS5nZXREZWNsYXJlZEZpZWxkcygpOwogICAgICAgIGZvciAo\naW50IGkgPSAwOyBpIDwgZm1kcy5sZW5ndGg7IGkrKykgewogICAgICAgICAg\nICBpZiAoZm1kc1tpXS5nZXREZWNsYXJlZFR5cGVDb2RlKCkgPT0gSmF2YVR5\ncGVzLk9CSkVDVAogICAgICAgICAgICAgICAgJiYgZm1kc1tpXS5nZXREZWNs\nYXJlZFR5cGUoKSAhPSBPYmplY3QuY2xhc3MpCiAgICAgICAgICAgICAgICBm\nbWRzW2ldLnNldERlY2xhcmVkVHlwZUNvZGUoSmF2YVR5cGVzLlBDKTsKICAg\nICAgICB9CiAgICAgICAgbWV0YS5zZXRTb3VyY2UoX2ZpbGUsIG1ldGEuZ2V0\nU291cmNlVHlwZSgpKTsKICAgICAgICBtZXRhLnNldFJlc29sdmUoTU9ERV9N\nRVRBLCB0cnVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJlZnJlc2ggb3Ig\nYWRkIHRoZSBtYXBwaW5nIGZvciB0aGUgZ2l2ZW4gaW5zdGFuY2UuCiAgICAg\nKi8KICAgIHByaXZhdGUgdm9pZCByZWZyZXNoKENsYXNzIGNscykgewogICAg\nICAgIGlmIChjbHMgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuOwoKICAg\nICAgICBNYXBwaW5nUmVwb3NpdG9yeSByZXBvcyA9IGdldFJlcG9zaXRvcnko\nKTsKICAgICAgICByZXBvcy5zZXRTdHJhdGVneUluc3RhbGxlcihuZXcgUmVm\ncmVzaFN0cmF0ZWd5SW5zdGFsbGVyKHJlcG9zKSk7CiAgICAgICAgaWYgKGdl\ndE1hcHBpbmcocmVwb3MsIGNscywgdHJ1ZSkgIT0gbnVsbCkgewogICAgICAg\nICAgICBfZmx1c2ggPSB0cnVlOwogICAgICAgICAgICBfZmx1c2hTY2hlbWEg\nPSB0cnVlOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFZhbGlk\nYXRlIHRoZSBtYXBwaW5ncyBmb3IgdGhlIGdpdmVuIGNsYXNzIGFuZCBpdHMg\nZmllbGRzLgogICAgICovCiAgICBwcml2YXRlIHZvaWQgdmFsaWRhdGUoQ2xh\nc3MgY2xzKSB7CiAgICAgICAgaWYgKGNscyA9PSBudWxsKQogICAgICAgICAg\nICByZXR1cm47CgogICAgICAgIE1hcHBpbmdSZXBvc2l0b3J5IHJlcG9zID0g\nZ2V0UmVwb3NpdG9yeSgpOwogICAgICAgIHJlcG9zLnNldFN0cmF0ZWd5SW5z\ndGFsbGVyKG5ldyBSdW50aW1lU3RyYXRlZ3lJbnN0YWxsZXIocmVwb3MpKTsK\nICAgICAgICBpZiAoZ2V0TWFwcGluZyhyZXBvcywgY2xzLCB0cnVlKSAhPSBu\ndWxsKQogICAgICAgICAgICBfZmx1c2hTY2hlbWEgPSAhX3NjaGVtYUFjdGlv\nbnMuY29udGFpbnMoU0NIRU1BX0FDVElPTl9OT05FKQogICAgICAgICAgICAg\nICAgJiYgIV9zY2hlbWFBY3Rpb25zLmNvbnRhaW5zKFNjaGVtYVRvb2wuQUNU\nSU9OX0FERCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgdGhlIHNj\naGVtYSB1c2luZyB0aGUgbWFwcGluZyBmb3IgdGhlIGdpdmVuIGluc3RhbmNl\nLgogICAgICovCiAgICBwcml2YXRlIHZvaWQgYnVpbGRTY2hlbWEoQ2xhc3Mg\nY2xzKSB7CiAgICAgICAgaWYgKGNscyA9PSBudWxsKQogICAgICAgICAgICBy\nZXR1cm47CgogICAgICAgIE1hcHBpbmdSZXBvc2l0b3J5IHJlcG9zID0gZ2V0\nUmVwb3NpdG9yeSgpOwogICAgICAgIHJlcG9zLnNldFN0cmF0ZWd5SW5zdGFs\nbGVyKG5ldyBSdW50aW1lU3RyYXRlZ3lJbnN0YWxsZXIocmVwb3MpKTsKICAg\nICAgICBpZiAoZ2V0TWFwcGluZyhyZXBvcywgY2xzLCB0cnVlKSA9PSBudWxs\nKQogICAgICAgICAgICByZXR1cm47CgogICAgICAgIC8vIHNldCBhbnkgbG9n\naWNhbCBwa3MgdG8gbm9uLWxvZ2ljYWwgc28gdGhleSBnZXQgZmx1c2hlZAog\nICAgICAgIF9mbHVzaFNjaGVtYSA9IHRydWU7CiAgICAgICAgU2NoZW1hW10g\nc2NoZW1hcyA9IF9zY2hlbWEuZ2V0U2NoZW1hcygpOwogICAgICAgIFRhYmxl\nW10gdGFibGVzOwogICAgICAgIENvbHVtbltdIGNvbHM7CiAgICAgICAgZm9y\nIChpbnQgaSA9IDA7IGkgPCBzY2hlbWFzLmxlbmd0aDsgaSsrKSB7CiAgICAg\nICAgICAgIHRhYmxlcyA9IHNjaGVtYXNbaV0uZ2V0VGFibGVzKCk7CiAgICAg\nICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgdGFibGVzLmxlbmd0aDsgaisr\nKSB7CiAgICAgICAgICAgICAgICBpZiAodGFibGVzW2pdLmdldFByaW1hcnlL\nZXkoKSA9PSBudWxsKQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwoK\nICAgICAgICAgICAgICAgIHRhYmxlc1tqXS5nZXRQcmltYXJ5S2V5KCkuc2V0\nTG9naWNhbChmYWxzZSk7CiAgICAgICAgICAgICAgICBjb2xzID0gdGFibGVz\nW2pdLmdldFByaW1hcnlLZXkoKS5nZXRDb2x1bW5zKCk7CiAgICAgICAgICAg\nICAgICBmb3IgKGludCBrID0gMDsgayA8IGNvbHMubGVuZ3RoOyBrKyspCiAg\nICAgICAgICAgICAgICAgICAgY29sc1trXS5zZXROb3ROdWxsKHRydWUpOwog\nICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICog\nRHJvcCBtYXBwaW5nIGZvciBnaXZlbiBjbGFzcy4KICAgICAqLwogICAgcHJp\ndmF0ZSB2b2lkIGRyb3AoQ2xhc3MgY2xzKSB7CiAgICAgICAgaWYgKGNscyA9\nPSBudWxsKQogICAgICAgICAgICByZXR1cm47CgogICAgICAgIGlmIChfZHJv\ncENscyA9PSBudWxsKQogICAgICAgICAgICBfZHJvcENscyA9IG5ldyBIYXNo\nU2V0KCk7CiAgICAgICAgX2Ryb3BDbHMuYWRkKGNscyk7CiAgICAgICAgaWYg\nKCFfc2NoZW1hQWN0aW9ucy5jb250YWlucyhTY2hlbWFUb29sLkFDVElPTl9E\nUk9QKSkKICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICBNYXBwaW5nUmVw\nb3NpdG9yeSByZXBvcyA9IGdldFJlcG9zaXRvcnkoKTsKICAgICAgICByZXBv\ncy5zZXRTdHJhdGVneUluc3RhbGxlcihuZXcgUnVudGltZVN0cmF0ZWd5SW5z\ndGFsbGVyKHJlcG9zKSk7CiAgICAgICAgQ2xhc3NNYXBwaW5nIG1hcHBpbmcg\nPSBudWxsOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIG1hcHBpbmcgPSBy\nZXBvcy5nZXRNYXBwaW5nKGNscywgbnVsbCwgZmFsc2UpOwogICAgICAgIH0g\nY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgfQoKICAgICAgICBpZiAo\nbWFwcGluZyAhPSBudWxsKSB7CiAgICAgICAgICAgIF9mbHVzaFNjaGVtYSA9\nIHRydWU7CiAgICAgICAgICAgIGlmIChfZHJvcE1hcCA9PSBudWxsKQogICAg\nICAgICAgICAgICAgX2Ryb3BNYXAgPSBuZXcgSGFzaFNldCgpOwogICAgICAg\nICAgICBfZHJvcE1hcC5hZGQobWFwcGluZyk7CiAgICAgICAgfSBlbHNlCiAg\nICAgICAgICAgIF9sb2cud2FybihfbG9jLmdldCgibm8tZHJvcC1tZXRhIiwg\nY2xzKSk7CiAgICB9CgogICAgLy8vLy8vLy8KICAgIC8vIE1haW4KICAgIC8v\nLy8vLy8vCgogICAgLyoqCiAgICAgKiBVc2FnZTogamF2YSBvcmcuYXBhY2hl\nLm9wZW5qcGEuamRiYy5tZXRhLk1hcHBpbmdUb29sIFtvcHRpb25dKiAKICAg\nICAqIFstYWN0aW9uLy1hICZsdDtyZWZyZXNoIHwgYWRkIHwgYnVpbGRTY2hl\nbWEgfCBkcm9wIHwgdmFsaWRhdGUgfCBpbXBvcnQgCiAgICAgKiB8IGV4cG9y\ndCZndDtdICZsdDtjbGFzcyBuYW1lIHwgLmphdmEgZmlsZSB8IC5jbGFzcyBm\naWxlIHwgLmpkbyBmaWxlJmd0OyoKICAgICAqIFdoZXJlIHRoZSBmb2xsb3dp\nbmcgb3B0aW9ucyBhcmUgcmVjb2duaXplZC4KICAgICAqIDx1bD4KICAgICAq\nIDxsaT48aT4tcHJvcGVydGllcy8tcCAmbHQ7cHJvcGVydGllcyBmaWxlIG9y\nIHJlc291cmNlJmd0OzwvaT46IFRoZQogICAgICogcGF0aCBvciByZXNvdXJj\nZSBuYW1lIG9mIGEgT3BlbkpQQSBwcm9wZXJ0aWVzIGZpbGUgY29udGFpbmlu\nZwogICAgICogaW5mb3JtYXRpb24gYXMgb3V0bGluZWQgaW4ge0BsaW5rIE9w\nZW5KUEFDb25maWd1cmF0aW9ufS4gT3B0aW9uYWwuPC9saT4KICAgICAqIDxs\naT48aT4tJmx0O3Byb3BlcnR5IG5hbWUmZ3Q7ICZsdDtwcm9wZXJ0eSB2YWx1\nZSZndDs8L2k+OiBBbGwgYmVhbgogICAgICogcHJvcGVydGllcyBvZiB0aGUg\nT3BlbkpQQSB7QGxpbmsgSkRCQ0NvbmZpZ3VyYXRpb259IGNhbiBiZSBzZXQg\nYnkKICAgICAqIHVzaW5nIHRoZWlyCW5hbWVzIGFuZCBzdXBwbHlpbmcgYSB2\nYWx1ZS4gRm9yIGV4YW1wbGU6CiAgICAgKiA8Y29kZT4tbGljZW5zZUtleSBh\nZHNsZmphODNyM2xrYWRmPC9jb2RlPjwvbGk+CiAgICAgKiA8bGk+PGk+LWZp\nbGUvLWYgJmx0O3N0ZG91dCB8IG91dHB1dCBmaWxlIG9yIHJlc291cmNlJmd0\nOzwvaT46IFVzZQogICAgICogdGhpcyBvcHRpb24gdG8gd3JpdGUgdGhlIHBs\nYW5uZWQgbWFwcGluZ3MgdG8gYW4gWE1MIGRvY3VtZW50IHJhdGhlcgogICAg\nICogdGhhbiBzdG9yZSB0aGVtIGluIHRoZSByZXBvc2l0b3J5LiBUaGlzIG9w\ndGlvbiBhbHNvIHNwZWNpZmllcyB0aGUKICAgICAqIG1ldGFkYXRhIGZpbGUg\ndG8gd3JpdGUgdG8gaWYgdXNpbmcgdGhlIDxjb2RlPmFkZDwvY29kZT4gYWN0\naW9uIHdpdGgKICAgICAqIHRoZSA8Y29kZT4tbWV0YSB0cnVlPC9jb2RlPiBm\nbGFnLCBvciB0aGUgZmlsZSB0byBkdW1wIHRvIGlmIHVzaW5nCiAgICAgKiB0\naGUgPGNvZGU+ZXhwb3J0PC9jb2RlPiBhY3Rpb24uPC9saT4KICAgICAqIDxs\naT48aT4tc2NoZW1hQWN0aW9uLy1zYSAmbHQ7c2NoZW1hIGFjdGlvbiB8IG5v\nbmUmZ3Q7PC9pPjogVGhlCiAgICAgKiB7QGxpbmsgU2NoZW1hVG9vbH0gZGVm\naW5lcyB0aGUgYWN0aW9ucyBwb3NzaWJsZS4gVGhlIGFjdGlvbnMgd2lsbAog\nICAgICogYXBwbHkgdG8gYWxsIHNjaGVtYSBjb21wb25lbnRzIHVzZWQgYnkg\ndGhlIG1hcHBpbmdzIGludm9sdmVkLgogICAgICogVW5sZXNzIHlvdSBhcmUg\ncnVubmluZyB0aGUgbWFwcGluZyB0b29sIG9uIGFsbCBvZiB5b3VyIHBlcnNp\nc3RlbnQKICAgICAqIHR5cGVzIGF0IG9uY2UsIGJlIGNhcmVmdWwgcnVubmlu\nZyBzY2hlbWEgYWN0aW9ucyB0aGF0IGNhbiBkcm9wIGRhdGEuCiAgICAgKiBJ\ndCBpcyBwb3NzaWJsZSB0byBhY2NpZGVudGFsbHkgZHJvcCBzY2hlbWEgY29t\ncG9uZW50cyB0aGF0IGFyZQogICAgICogdXNlZCBieSBjbGFzc2VzIHlvdSBh\ncmVuJ3QgY3VycmVudGx5IHJ1bm5pbmcgdGhlIHRvb2wgb3Zlci4gVGhlCiAg\nICAgKiBhY3Rpb24gZGVmYXVsdHMgdG8gPGNvZGU+YWRkPC9jb2RlPi48L2xp\nPgogICAgICogPGxpPjxpPi1zY2hlbWFGaWxlLy1zZiAmbHQ7c3Rkb3V0IHwg\nb3V0cHV0IGZpbGUgb3IgcmVzb3VyY2UmZ3Q7PC9pPjogVXNlCiAgICAgKiB0\naGlzIG9wdGlvbiB0byB3cml0ZSB0aGUgcGxhbm5lZCBzY2hlbWEgdG8gYW4g\nWE1MIGRvY3VtZW50IHJhdGhlcgogICAgICogdGhhbiBtb2RpZnkgdGhlIGRh\ndGEgc3RvcmUuPC9saT4KICAgICAqIDxsaT48aT4tc3FsRmlsZS8tc3FsICZs\ndDtzdGRvdXQgfCBvdXRwdXQgZmlsZSBvciByZXNvdXJjZSZndDs8L2k+OiBV\nc2UKICAgICAqIHRoaXMgb3B0aW9uIHRvIHdyaXRlIHRoZSBwbGFubmVkIHNj\naGVtYSBjaGFuZ2VzIGFzIGEgU1FMCiAgICAgKiBzY3JpcHQgcmF0aGVyIHRo\nYW4gbW9kaWZ5aW5nIHRoZSBkYXRhIHN0b3JlLjwvbGk+CiAgICAgKiA8bGk+\nPGk+LWRyb3BUYWJsZXMvLWR0ICZsdDt0cnVlL3QgfCBmYWxzZS9mJmd0Ozwv\naT46IENvcnJlc3BvbmRzIHRvIHRoZQogICAgICogc2FtZS1uYW1lZCBvcHRp\nb24gaW4gdGhlIHtAbGluayBTY2hlbWFUb29sfS48L2xpPgogICAgICogPGxp\nPjxpPi1kcm9wU2VxdWVuY2VzLy1kc3EgJmx0O3RydWUvdCB8IGZhbHNlL2Ym\nZ3Q7PC9pPjogQ29ycmVzcG9uZHMKICAgICAqIHRvIHRoZSBzYW1lLW5hbWVk\nIG9wdGlvbiBpbiB0aGUge0BsaW5rIFNjaGVtYVRvb2x9LjwvbGk+CiAgICAg\nKiA8bGk+PGk+LW9wZW5qcGFUYWJsZXMvLWt0ICZsdDt0cnVlL3QgfCBmYWxz\nZS9mJmd0OzwvaT46IENvcnJlc3BvbmRzIHRvCiAgICAgKiB0aGUgc2FtZS1u\nYW1lZCBvcHRpb24gaW4gdGhlIHtAbGluayBTY2hlbWFUb29sfS48L2xpPgog\nICAgICogPGxpPjxpPi1pZ25vcmVFcnJvcnMvLWkgJmx0O3RydWUvdCB8IGZh\nbHNlL2YmZ3Q7PC9pPjogQ29ycmVzcG9uZHMgdG8gdGhlCiAgICAgKiBzYW1l\nLW5hbWVkIG9wdGlvbiBpbiB0aGUge0BsaW5rIFNjaGVtYVRvb2x9LjwvbGk+\nCiAgICAgKiA8bGk+PGk+LXJlYWRTY2hlbWEvLXJzICZsdDt0cnVlL3QgfCBm\nYWxzZS9mJmd0OzwvaT46IFNldCB0aGlzIHRvIHRydWUKICAgICAqIHRvIHJl\nYWQgdGhlIGVudGlyZSBleGlzdGluZyBzY2hlbWEgKGV2ZW4gd2hlbiBmYWxz\nZSB0aGUgcGFydHMgb2YKICAgICAqIHRoZSBzY2hlbWEgdXNlZCBieSBjbGFz\nc2VzIHRoZSB0b29sIGlzIHJ1biBvbiB3aWxsIHN0aWxsIGJlIHJlYWQpLgog\nICAgICogVHVybmluZyBvbiBzY2hlbWEgcmVhZGluZyBjYW4gZW5zdXJlIHRo\nYXQgbm8gbmFtaW5nIGNvbmZsaWN0cyB3aWxsCiAgICAgKiBvY2N1ciwgYnV0\nIGl0IGNhbiB0YWtlIGEgbG9uZyB0aW1lLjwvbGk+CiAgICAgKiA8bGk+PGk+\nLXByaW1hcnlLZXlzLy1wayAmbHQ7dHJ1ZS90IHwgZmFsc2UvZiZndDs8L2k+\nOiBXaGV0aGVyIHByaW1hcnkKICAgICAqIGtleXMgb24gZXhpc3RpbmcgdGFi\nbGVzIGFyZSBtYW5pcHVsYXRlZC4gRGVmYXVsdHMgdG8gZmFsc2UuPC9saT4K\nICAgICAqIDxsaT48aT4tZm9yZWlnbktleXMvLWZrICZsdDt0cnVlL3QgfCBm\nYWxzZS9mJmd0OzwvaT46IFdoZXRoZXIgZm9yZWlnbgogICAgICoga2V5cyBv\nbiBleGlzdGluZyB0YWJsZXMgYXJlIG1hbmlwdWxhdGVkLiBEZWZhdWx0cyB0\nbyBmYWxzZS48L2xpPgogICAgICogPGxpPjxpPi1pbmRleGVzLy1peCAmbHQ7\ndHJ1ZS90IHwgZmFsc2UvZiZndDs8L2k+OiBXaGV0aGVyIGluZGV4ZXMgb24K\nICAgICAqIGV4aXN0aW5nIHRhYmxlcyBhcmUgbWFuaXB1bGF0ZWQuIERlZmF1\nbHRzIHRvIGZhbHNlLjwvbGk+CiAgICAgKiA8bGk+PGk+LXNlcXVlbmNlcy8t\nc3EgJmx0O3RydWUvdCB8IGZhbHNlL2YmZ3Q7PC9pPjogV2hldGhlciBzZXF1\nZW5jZXMKICAgICAqIGFyZSBtYW5pcHVsYXRlZC4gRGVmYXVsdHMgdG8gdHJ1\nZS48L2xpPgogICAgICogPGxpPjxpPi1zY2hlbWFzLy1zICZsdDtzY2hlbWEg\nYW5kIHRhYmxlIG5hbWVzJmd0OzwvaT46IEEgbGlzdCBvZiBzY2hlbWFzCiAg\nICAgKiBhbmQvb3IgdGFibGVzIHRvIHJlYWQuIENvcnJlc3BvbmRzIHRvIHRo\nZQogICAgICogc2FtZS1uYW1lZCBvcHRpb24gaW4gdGhlIHtAbGluayBTY2hl\nbWFHZW5lcmF0b3J9LiBUaGlzIG9wdGlvbgogICAgICogaXMgaWdub3JlZCBp\nZiA8Y29kZT5yZWFkU2NoZW1hPC9jb2RlPiBpcyBmYWxzZS48L2xpPgogICAg\nICogPGxpPjxpPi1tZXRhLy1tICZsdDt0cnVlL3QgfCBmYWxzZS9mJmd0Ozwv\naT46IFdoZXRoZXIgdGhlIGdpdmVuIGFjdGlvbgogICAgICogYXBwbGllcyB0\nbyBtZXRhZGF0YSBhcyB3ZWxsIGFzIG1hcHBpbmdzLjwvbGk+CiAgICAgKiA8\nL3VsPgogICAgICogIFRoZSB2YXJpb3VzIGFjdGlvbnMgYXJlIGFzIGZvbGxv\nd3MuCiAgICAgKiA8dWw+CiAgICAgKiA8bGk+PGk+cmVmcmVzaDwvaT46IEJy\naW5nIHRoZSBtYXBwaW5nIGluZm9ybWF0aW9uIHVwLXRvLWRhdGUKICAgICAq\nIHdpdGggdGhlIGNsYXNzIGRlZmluaXRpb25zLiBPcGVuSlBBIHdpbGwgYXR0\nZW1wdCB0byB1c2UgYW55IHByb3ZpZGVkCiAgICAgKiBtYXBwaW5nIGluZm9y\nbWF0aW9uLCBhbmQgZmlsbCBpbiBtaXNzaW5nIGluZm9ybWF0aW9uLiBJZiB0\naGUKICAgICAqIHByb3ZpZGVkIGluZm9ybWF0aW9uIGNvbmZsaWN0cyB3aXRo\nIHRoZSBjbGFzcyBkZWZpbml0aW9uLCB0aGUKICAgICAqIGNvbmZsaWN0aW5n\nIGluZm9ybWF0aW9uIHdpbGwgYmUgZGlzY2FyZGVkIGFuZCB0aGUgY2xhc3Mv\nZmllbGQgd2lsbAogICAgICogYmUgcmUtbWFwcGVkIHRvIG5ldyBjb2x1bW5z\nL3RhYmxlcy4gVGhpcyBpcyB0aGUgZGVmYXVsdCBhY3Rpb24uPC9saT4KICAg\nICAqIDxsaT48aT5hZGQ8L2k+OiBJZiB1c2VkIHdpdGggdGhlIDxjb2RlPi1t\nZXRhPC9jb2RlPiBvcHRpb24sIGFkZHMgbmV3CiAgICAgKiBkZWZhdWx0IG1l\ndGFkYXRhIGZvciB0aGUgZ2l2ZW4gY2xhc3MoZXMpLiBPdGhlcndpc2UsIGJy\naW5ncyB0aGUKICAgICAqIG1hcHBpbmcgaW5mb3JtYXRpb24gdXAtdG8tZGF0\nZSB3aXRoIHRoZSBjbGFzcwogICAgICogZGVmaW5pdGlvbnMuIE9wZW5KUEEg\nd2lsbCBhdHRlbXB0IHRvIHVzZSBhbnkgcHJvdmlkZWQgbWFwcGluZwogICAg\nICogaW5mb3JtYXRpb24sIGFuZCBmaWxsIGluIG1pc3NpbmcgaW5mb3JtYXRp\nb24uIE9wZW5KUEEgd2lsbCBmYWlsIGlmCiAgICAgKiB0aGUgcHJvdmlkZWQg\naW5mb3JtYXRpb24gY29uZmxpY3RzIHdpdGggdGhlIGNsYXNzIGRlZmluaXRp\nb24uPC9saT4KICAgICAqIDxsaT48aT5idWlsZFNjaGVtYTwvaT46IENyZWF0\nZSB0aGUgc2NoZW1hIG1hdGNoaW5nIHRoZSBleGlzdGluZwogICAgICogbWFw\ncGluZ3MgZm9yIHRoZSBnaXZlbiBjbGFzcyhlcykuIEFueSBpbnZhbGlkIG1h\ncHBpbmcgaW5mb3JtYXRpb24KICAgICAqIHdpbGwgY2F1c2UgYW4gZXhjZXB0\naW9uLjwvbGk+CiAgICAgKiA8bGk+PGk+ZHJvcDwvaT46IERlbGV0ZSBtYXBw\naW5ncyBmb3IgdGhlIGdpdmVuIGNsYXNzZXMuIElmIHVzZWQgd2l0aAogICAg\nICogdGhlIDxjb2RlPi1tZXRhPC9jb2RlPiBvcHRpb24sIGFsc28gZGVsZXRl\ncyBtZXRhZGF0YS48L2xpPgogICAgICogPGxpPjxpPnZhbGlkYXRlPC9pPjog\nVmFsaWRhdGUgdGhlIGdpdmVuIG1hcHBpbmdzLiBUaGUgbWFwcGluZwogICAg\nICogcmVwb3NpdG9yeSBhbmQgc2NoZW1hIHdpbGwgbm90IGJlIGFmZmVjdGVk\nLjwvbGk+CiAgICAgKiA8bGk+PGk+aW1wb3J0PC9pPjogSW1wb3J0IG1hcHBp\nbmdzIGZyb20gYW4gWE1MIGRvY3VtZW50IGFuZCBzdG9yZQogICAgICogdGhl\nbSBhcyB0aGUgY3VycmVudCBzeXN0ZW0gbWFwcGluZ3MuPC9saT4KICAgICAq\nIDxsaT48aT5leHBvcnQ8L2k+OiBEdW1wIHRoZSBjdXJyZW50IG1hcHBpbmdz\nIGZvciB0aGUgZ2l2ZW4gY2xhc3NlcyB0bwogICAgICogYW4gWE1MIGRvY3Vt\nZW50IHNwZWNpZmllZCBieSB0aGUgPGNvZGU+ZmlsZTwvY29kZT4gb3B0aW9u\nLjwvbGk+CiAgICAgKiBJZiB1c2VkIHdpdGggdGhlIDxjb2RlPi1tZXRhPC9j\nb2RlPiBvcHRpb24sIHRoZSBtZXRhZGF0YSB3aWxsIGJlCiAgICAgKiBpbmNs\ndWRlZCBpbiB0aGUgZXhwb3J0LgogICAgICogPC91bD4KICAgICAqICBFYWNo\nIGNsYXNzIHN1cHBsaWVkIGFzIGFuIGFyZ3VtZW50IG11c3QgaGF2ZSB2YWxp\nZCBtZXRhZGF0YS4gSWYKICAgICAqIG5vIGNsYXNzIGFyZ3VtZW50cyBhcmUg\nZ2l2ZW4sIHRoZSB0b29sIHJ1bnMgb24gYWxsIG1ldGFkYXRhIGZpbGVzIGlu\nCiAgICAgKiB0aGUgQ0xBU1NQQVRILgogICAgICogIEV4YW1wbGVzOgogICAg\nICogPHVsPgogICAgICogPGxpPlJlZnJlc2ggdGhlIG1hcHBpbmdzIGZvciBn\naXZlbiBwYWNrYWdlLCB3aXRob3V0IGRyb3BwaW5nIGFueQogICAgICogc2No\nZW1hIGNvbXBvbmVudHM6PGJyIC8+CiAgICAgKiA8Y29kZT5qYXZhIG9yZy5h\ncGFjaGUub3BlbmpwYS5qZGJjLm1ldGEuTWFwcGluZ1Rvb2wgCiAgICAgKiAg\nICAgIG15cGFja2FnZS5qZG88L2NvZGU+PC9saT4KICAgICAqIDxsaT5SZWZy\nZXNoIHRoZSBtYXBwaW5ncyBmb3IgYWxsIHBlcnNpc3RlbnQgY2xhc3NlcyBp\nbiB0aGUgY2xhc3NwYXRoLAogICAgICogZHJvcHBpbmcgYW55IHVudXNlZCBj\nb2x1bW5zIGFuZCBldmVuIHRhYmxlczo8YnIgLz4KICAgICAqIDxjb2RlPmph\ndmEgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5NYXBwaW5nVG9vbCAt\nc2EgcmVmcmVzaAogICAgICogLWR0IHRydWU8L2NvZGU+PC9saT4KICAgICAq\nIDxsaT5NYWtlIHN1cmUgdGhlIG1hcHBpbmdzIHlvdSd2ZSBjcmVhdGVkIGJ5\nIGhhbmQgbWF0Y2ggdGhlIG9iamVjdAogICAgICogbW9kZWwgYW5kIHNjaGVt\nYTo8YnIgLz4KICAgICAqIDxjb2RlPmphdmEgb3JnLmFwYWNoZS5vcGVuanBh\nLmpiZGMubWV0YS5NYXBwaW5nVG9vbAogICAgICogLWEgdmFsaWRhdGUgUGVy\nc29uLmphdmE8L2NvZGU+PC9saT4KICAgICAqIDxsaT5SZW1vdmUgdGhlIHJl\nY29yZGVkIG1hcHBpbmcgZm9yIGEgZ2l2ZW4gY2xhc3M6PGJyIC8+CiAgICAg\nKiA8Y29kZT5qYXZhIG9yZy5hcGFjaGUub3BlbmpwYS5qYmRjLm1ldGEuTWFw\ncGluZ1Rvb2wKICAgICAqIC1hIGRyb3AgUGVyc29uLmphdmE8L2NvZGU+PC9s\naT4KICAgICAqIDxsaT5SZWNvcmQgdGhlIGN1cnJlbnQgbWFwcGluZ3MgaW4g\nYW4gWE1MIGZpbGU6PGJyIC8+CiAgICAgKiA8Y29kZT5qYXZhIG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLm1ldGEuTWFwcGluZ1Rvb2wKICAgICAqIC1mIG15\ncGFja2FnZS5vcm0gLWEgZXhwb3J0IG15cGFja2FnZS5qZG88L2NvZGU+PC9s\naT4KICAgICAqIDwvdWw+CiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgdm9p\nZCBtYWluKFN0cmluZ1tdIGFyZ3MpCiAgICAgICAgdGhyb3dzIElPRXhjZXB0\naW9uLCBTUUxFeGNlcHRpb24gewogICAgICAgIE9wdGlvbnMgb3B0cyA9IG5l\ndyBPcHRpb25zKCk7CiAgICAgICAgYXJncyA9IG9wdHMuc2V0RnJvbUNtZExp\nbmUoYXJncyk7CiAgICAgICAgSkRCQ0NvbmZpZ3VyYXRpb24gY29uZiA9IG5l\ndyBKREJDQ29uZmlndXJhdGlvbkltcGwoKTsKICAgICAgICB0cnkgewogICAg\nICAgICAgICBpZiAoIXJ1bihjb25mLCBhcmdzLCBvcHRzKSkKICAgICAgICAg\nICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihfbG9jLmdldCgidG9vbC11c2Fn\nZSIpKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBjb25mLmNs\nb3NlKCk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogUnVuIHRo\nZSB0b29sLiBSZXR1cm5zIGZhbHNlIGlmIGludmFsaWQgb3B0aW9ucyBhcmUg\nZ2l2ZW4uCiAgICAgKgogICAgICogQHNlZSAjbWFpbgogICAgICovCiAgICBw\ndWJsaWMgc3RhdGljIGJvb2xlYW4gcnVuKEpEQkNDb25maWd1cmF0aW9uIGNv\nbmYsIFN0cmluZ1tdIGFyZ3MsCiAgICAgICAgT3B0aW9ucyBvcHRzKQogICAg\nICAgIHRocm93cyBJT0V4Y2VwdGlvbiwgU1FMRXhjZXB0aW9uIHsKICAgICAg\nICBpZiAob3B0cy5jb250YWluc0tleSgiaGVscCIpIHx8IG9wdHMuY29udGFp\nbnNLZXkoIi1oZWxwIikpCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCiAg\nICAgICAgLy8gZmxhZ3MKICAgICAgICBGbGFncyBmbGFncyA9IG5ldyBGbGFn\ncygpOwogICAgICAgIGZsYWdzLmFjdGlvbiA9IG9wdHMucmVtb3ZlUHJvcGVy\ndHkoImFjdGlvbiIsICJhIiwgZmxhZ3MuYWN0aW9uKTsKICAgICAgICBmbGFn\ncy5zY2hlbWFBY3Rpb24gPSBvcHRzLnJlbW92ZVByb3BlcnR5KCJzY2hlbWFB\nY3Rpb24iLCAic2EiLAogICAgICAgICAgICBmbGFncy5zY2hlbWFBY3Rpb24p\nOwogICAgICAgIGZsYWdzLmRyb3BUYWJsZXMgPSBvcHRzLnJlbW92ZUJvb2xl\nYW5Qcm9wZXJ0eQogICAgICAgICAgICAoImRyb3BUYWJsZXMiLCAiZHQiLCBm\nbGFncy5kcm9wVGFibGVzKTsKICAgICAgICBmbGFncy5vcGVuanBhVGFibGVz\nID0gb3B0cy5yZW1vdmVCb29sZWFuUHJvcGVydHkKICAgICAgICAgICAgKCJv\ncGVuanBhVGFibGVzIiwgIm90IiwgZmxhZ3Mub3BlbmpwYVRhYmxlcyk7CiAg\nICAgICAgZmxhZ3MuZHJvcFNlcXVlbmNlcyA9IG9wdHMucmVtb3ZlQm9vbGVh\nblByb3BlcnR5CiAgICAgICAgICAgICgiZHJvcFNlcXVlbmNlcyIsICJkc3Ei\nLCBmbGFncy5kcm9wU2VxdWVuY2VzKTsKICAgICAgICBmbGFncy5yZWFkU2No\nZW1hID0gb3B0cy5yZW1vdmVCb29sZWFuUHJvcGVydHkKICAgICAgICAgICAg\nKCJyZWFkU2NoZW1hIiwgInJzIiwgZmxhZ3MucmVhZFNjaGVtYSk7CiAgICAg\nICAgZmxhZ3MucHJpbWFyeUtleXMgPSBvcHRzLnJlbW92ZUJvb2xlYW5Qcm9w\nZXJ0eQogICAgICAgICAgICAoInByaW1hcnlLZXlzIiwgInBrIiwgZmxhZ3Mu\ncHJpbWFyeUtleXMpOwogICAgICAgIGZsYWdzLmluZGV4ZXMgPSBvcHRzLnJl\nbW92ZUJvb2xlYW5Qcm9wZXJ0eSgiaW5kZXhlcyIsICJpeCIsCiAgICAgICAg\nICAgIGZsYWdzLmluZGV4ZXMpOwogICAgICAgIGZsYWdzLmZvcmVpZ25LZXlz\nID0gb3B0cy5yZW1vdmVCb29sZWFuUHJvcGVydHkoImZvcmVpZ25LZXlzIiwg\nImZrIiwKICAgICAgICAgICAgZmxhZ3MuZm9yZWlnbktleXMpOwogICAgICAg\nIGZsYWdzLnNlcXVlbmNlcyA9IG9wdHMucmVtb3ZlQm9vbGVhblByb3BlcnR5\nKCJzZXF1ZW5jZXMiLCAic3EiLAogICAgICAgICAgICBmbGFncy5zZXF1ZW5j\nZXMpOwogICAgICAgIGZsYWdzLmlnbm9yZUVycm9ycyA9IG9wdHMucmVtb3Zl\nQm9vbGVhblByb3BlcnR5CiAgICAgICAgICAgICgiaWdub3JlRXJyb3JzIiwg\nImkiLCBmbGFncy5pZ25vcmVFcnJvcnMpOwogICAgICAgIGZsYWdzLm1ldGEg\nPSBvcHRzLnJlbW92ZUJvb2xlYW5Qcm9wZXJ0eSgibWV0YSIsICJtIiwgZmxh\nZ3MubWV0YSk7CiAgICAgICAgU3RyaW5nIGZpbGVOYW1lID0gb3B0cy5yZW1v\ndmVQcm9wZXJ0eSgiZmlsZSIsICJmIiwgbnVsbCk7CiAgICAgICAgU3RyaW5n\nIHNjaGVtYUZpbGVOYW1lID0gb3B0cy5yZW1vdmVQcm9wZXJ0eSgic2NoZW1h\nRmlsZSIsICJzZiIsIG51bGwpOwogICAgICAgIFN0cmluZyBzcWxGaWxlTmFt\nZSA9IG9wdHMucmVtb3ZlUHJvcGVydHkoInNxbEZpbGUiLCAic3FsIiwgbnVs\nbCk7CiAgICAgICAgU3RyaW5nIHNjaGVtYXMgPSBvcHRzLnJlbW92ZVByb3Bl\ncnR5KCJzIik7CiAgICAgICAgaWYgKHNjaGVtYXMgIT0gbnVsbCkKICAgICAg\nICAgICAgb3B0cy5zZXRQcm9wZXJ0eSgic2NoZW1hcyIsIHNjaGVtYXMpOwoK\nICAgICAgICBDb25maWd1cmF0aW9ucy5wb3B1bGF0ZUNvbmZpZ3VyYXRpb24o\nY29uZiwgb3B0cyk7CiAgICAgICAgQ2xhc3NMb2FkZXIgbG9hZGVyID0gY29u\nZi5nZXRDbGFzc1Jlc29sdmVySW5zdGFuY2UoKS4KICAgICAgICAgICAgZ2V0\nQ2xhc3NMb2FkZXIoTWFwcGluZ1Rvb2wuY2xhc3MsIG51bGwpOwogICAgICAg\nIGlmIChmbGFncy5tZXRhICYmIEFDVElPTl9BREQuZXF1YWxzKGZsYWdzLmFj\ndGlvbikpCiAgICAgICAgICAgIGZsYWdzLm1ldGFEYXRhRmlsZSA9IEZpbGVz\nLmdldEZpbGUoZmlsZU5hbWUsIGxvYWRlcik7CiAgICAgICAgZWxzZQogICAg\nICAgICAgICBmbGFncy5tYXBwaW5nV3JpdGVyID0gRmlsZXMuZ2V0V3JpdGVy\nKGZpbGVOYW1lLCBsb2FkZXIpOwogICAgICAgIGZsYWdzLnNjaGVtYVdyaXRl\nciA9IEZpbGVzLmdldFdyaXRlcihzY2hlbWFGaWxlTmFtZSwgbG9hZGVyKTsK\nICAgICAgICBmbGFncy5zcWxXcml0ZXIgPSBGaWxlcy5nZXRXcml0ZXIoc3Fs\nRmlsZU5hbWUsIGxvYWRlcik7CgogICAgICAgIHJldHVybiBydW4oY29uZiwg\nYXJncywgZmxhZ3MsIGxvYWRlcik7CiAgICB9CgogICAgLyoqCiAgICAgKiBS\ndW4gdGhlIHRvb2wuIFJldHVybiBmYWxzZSBpZiBhbiBpbnZhbGlkIG9wdGlv\nbiB3YXMgZ2l2ZW4uCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgYm9vbGVh\nbiBydW4oSkRCQ0NvbmZpZ3VyYXRpb24gY29uZiwgU3RyaW5nW10gYXJncywK\nICAgICAgICBGbGFncyBmbGFncywgQ2xhc3NMb2FkZXIgbG9hZGVyKQogICAg\nICAgIHRocm93cyBJT0V4Y2VwdGlvbiwgU1FMRXhjZXB0aW9uIHsKICAgICAg\nICAvLyBkZWZhdWx0IGFjdGlvbiBiYXNlZCBvbiB3aGV0aGVyIHRoZSBtYXBw\naW5nIGRlZmF1bHRzIGZpbGxzIGluCiAgICAgICAgLy8gbWlzc2luZyBpbmZv\nCiAgICAgICAgaWYgKGZsYWdzLmFjdGlvbiA9PSBudWxsKSB7CiAgICAgICAg\nICAgIGlmIChjb25mLmdldE1hcHBpbmdEZWZhdWx0c0luc3RhbmNlKCkuZGVm\nYXVsdE1pc3NpbmdJbmZvKCkpCiAgICAgICAgICAgICAgICBmbGFncy5hY3Rp\nb24gPSBBQ1RJT05fQlVJTERfU0NIRU1BOwogICAgICAgICAgICBlbHNlCiAg\nICAgICAgICAgICAgICBmbGFncy5hY3Rpb24gPSBBQ1RJT05fUkVGUkVTSDsK\nICAgICAgICB9CgogICAgICAgIC8vIGNvbGxlY3QgdGhlIGNsYXNzZXMgdG8g\nYWN0IG9uCiAgICAgICAgTG9nIGxvZyA9IGNvbmYuZ2V0TG9nKE9wZW5KUEFD\nb25maWd1cmF0aW9uLkxPR19UT09MKTsKICAgICAgICBDb2xsZWN0aW9uIGNs\nYXNzZXMgPSBudWxsOwogICAgICAgIGlmIChhcmdzLmxlbmd0aCA9PSAwKSB7\nCiAgICAgICAgICAgIGlmIChBQ1RJT05fSU1QT1JULmVxdWFscyhmbGFncy5h\nY3Rpb24pKQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAg\nICAgICBsb2cuaW5mbyhfbG9jLmdldCgicnVubmluZy1hbGwtY2xhc3NlcyIp\nKTsKICAgICAgICAgICAgY2xhc3NlcyA9IGNvbmYuZ2V0TWFwcGluZ1JlcG9z\naXRvcnlJbnN0YW5jZSgpLgogICAgICAgICAgICAgICAgbG9hZFBlcnNpc3Rl\nbnRUeXBlcyh0cnVlLCBsb2FkZXIpOwogICAgICAgIH0gZWxzZSB7CiAgICAg\nICAgICAgIGNsYXNzZXMgPSBuZXcgSGFzaFNldCgpOwogICAgICAgICAgICBD\nbGFzc0FyZ1BhcnNlciBjbGFzc1BhcnNlciA9IGNvbmYuZ2V0TWV0YURhdGFS\nZXBvc2l0b3J5SW5zdGFuY2UoKS4KICAgICAgICAgICAgICAgIGdldE1ldGFE\nYXRhRmFjdG9yeSgpLm5ld0NsYXNzQXJnUGFyc2VyKCk7CiAgICAgICAgICAg\nIGNsYXNzUGFyc2VyLnNldENsYXNzTG9hZGVyKGxvYWRlcik7CiAgICAgICAg\nICAgIENsYXNzW10gcGFyc2VkOwogICAgICAgICAgICBmb3IgKGludCBpID0g\nMDsgYXJncyAhPSBudWxsICYmIGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7CiAg\nICAgICAgICAgICAgICBwYXJzZWQgPSBjbGFzc1BhcnNlci5wYXJzZVR5cGVz\nKGFyZ3NbaV0pOwogICAgICAgICAgICAgICAgY2xhc3Nlcy5hZGRBbGwoQXJy\nYXlzLmFzTGlzdChwYXJzZWQpKTsKICAgICAgICAgICAgfQogICAgICAgIH0K\nCiAgICAgICAgQ2xhc3NbXSBhY3QgPSAoQ2xhc3NbXSkgY2xhc3Nlcy50b0Fy\ncmF5KG5ldyBDbGFzc1tjbGFzc2VzLnNpemUoKV0pOwogICAgICAgIGlmIChB\nQ1RJT05fRVhQT1JULmVxdWFscyhmbGFncy5hY3Rpb24pKSB7CiAgICAgICAg\nICAgIC8vIHJ1biBleHBvcnRzIHVudGlsIHRoZSBmaXJzdCBleHBvcnQgc3Vj\nY2VlZHMKICAgICAgICAgICAgSW1wb3J0RXhwb3J0W10gaW5zdGFuY2VzID0g\nbmV3SW1wb3J0RXhwb3J0cygpOwogICAgICAgICAgICBmb3IgKGludCBpID0g\nMDsgaSA8IGluc3RhbmNlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAg\nICAgaWYgKGluc3RhbmNlc1tpXS5leHBvcnRNYXBwaW5ncyhjb25mLCBhY3Qs\nIGZsYWdzLm1ldGEsIGxvZywKICAgICAgICAgICAgICAgICAgICBmbGFncy5t\nYXBwaW5nV3JpdGVyKSkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1\nZTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAg\nICAgICAgfQogICAgICAgIGlmIChBQ1RJT05fSU1QT1JULmVxdWFscyhmbGFn\ncy5hY3Rpb24pKSB7CiAgICAgICAgICAgIC8vIHJ1biBleHBvcnRzIHVudGls\nIHRoZSBmaXJzdCBleHBvcnQgc3VjY2VlZHMKICAgICAgICAgICAgSW1wb3J0\nRXhwb3J0W10gaW5zdGFuY2VzID0gbmV3SW1wb3J0RXhwb3J0cygpOwogICAg\nICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGluc3RhbmNlcy5sZW5ndGg7\nIGkrKykgewogICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlc1tpXS5pbXBv\ncnRNYXBwaW5ncyhjb25mLCBhY3QsIGFyZ3MsIGZsYWdzLm1ldGEsCiAgICAg\nICAgICAgICAgICAgICAgbG9nLCBsb2FkZXIpKQogICAgICAgICAgICAgICAg\nICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJl\ndHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIE1hcHBpbmdUb29sIHRv\nb2w7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdG9vbCA9IG5ldyBNYXBw\naW5nVG9vbChjb25mLCBmbGFncy5hY3Rpb24sIGZsYWdzLm1ldGEpOwogICAg\nICAgIH0gY2F0Y2ggKElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpYWUpIHsK\nICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAg\nLy8gc2V0dXAgdGhlIHRvb2wKICAgICAgICB0b29sLnNldElnbm9yZUVycm9y\ncyhmbGFncy5pZ25vcmVFcnJvcnMpOwogICAgICAgIHRvb2wuc2V0TWV0YURh\ndGFGaWxlKGZsYWdzLm1ldGFEYXRhRmlsZSk7CiAgICAgICAgdG9vbC5zZXRN\nYXBwaW5nV3JpdGVyKGZsYWdzLm1hcHBpbmdXcml0ZXIpOwogICAgICAgIHRv\nb2wuc2V0U2NoZW1hQWN0aW9uKGZsYWdzLnNjaGVtYUFjdGlvbik7CiAgICAg\nICAgdG9vbC5zZXRTY2hlbWFXcml0ZXIoZmxhZ3Muc2NoZW1hV3JpdGVyKTsK\nICAgICAgICB0b29sLnNldFJlYWRTY2hlbWEoZmxhZ3MucmVhZFNjaGVtYQog\nICAgICAgICAgICAmJiAhQUNUSU9OX1ZBTElEQVRFLmVxdWFscyhmbGFncy5h\nY3Rpb24pKTsKICAgICAgICB0b29sLnNldFByaW1hcnlLZXlzKGZsYWdzLnBy\naW1hcnlLZXlzKTsKICAgICAgICB0b29sLnNldEZvcmVpZ25LZXlzKGZsYWdz\nLmZvcmVpZ25LZXlzKTsKICAgICAgICB0b29sLnNldEluZGV4ZXMoZmxhZ3Mu\naW5kZXhlcyk7CiAgICAgICAgdG9vbC5zZXRTZXF1ZW5jZXMoZmxhZ3Muc2Vx\ndWVuY2VzIHx8IGZsYWdzLmRyb3BTZXF1ZW5jZXMpOwoKICAgICAgICAvLyBh\nbmQgcnVuIHRoZSBhY3Rpb24KICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8\nIGFjdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBsb2cuaW5mbyhfbG9j\nLmdldCgidG9vbC1ydW5uaW5nIiwgYWN0W2ldLCBmbGFncy5hY3Rpb24pKTsK\nICAgICAgICAgICAgaWYgKGkgPT0gMCAmJiBmbGFncy5yZWFkU2NoZW1hKQog\nICAgICAgICAgICAgICAgbG9nLmluZm8oX2xvYy5nZXQoInRvb2wtdGltZSIp\nKTsKICAgICAgICAgICAgdG9vbC5ydW4oYWN0W2ldKTsKICAgICAgICB9CiAg\nICAgICAgbG9nLmluZm8oX2xvYy5nZXQoInRvb2wtcmVjb3JkIikpOwogICAg\nICAgIHRvb2wucmVjb3JkKGZsYWdzKTsKICAgICAgICByZXR1cm4gdHJ1ZTsK\nICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhbiB7QGxpbmsgSW1wb3J0\nRXhwb3J0fSBpbnN0YW5jZS4KICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMg\nSW1wb3J0RXhwb3J0W10gbmV3SW1wb3J0RXhwb3J0cygpIHsKICAgICAgICB0\ncnkgewogICAgICAgICAgICBDbGFzc1tdIHR5cGVzID0gU2VydmljZXMuZ2V0\nSW1wbGVtZW50b3JDbGFzc2VzKEltcG9ydEV4cG9ydC5jbGFzcyk7CiAgICAg\nICAgICAgIEltcG9ydEV4cG9ydFtdIGluc3RhbmNlcyA9IG5ldyBJbXBvcnRF\neHBvcnRbdHlwZXMubGVuZ3RoXTsKICAgICAgICAgICAgZm9yIChpbnQgaSA9\nIDA7IGkgPCB0eXBlcy5sZW5ndGg7IGkrKykKICAgICAgICAgICAgICAgIGlu\nc3RhbmNlc1tpXSA9IChJbXBvcnRFeHBvcnQpIHR5cGVzW2ldLm5ld0luc3Rh\nbmNlKCk7CiAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZXM7CiAgICAgICAg\nfSBjYXRjaCAoVGhyb3dhYmxlIHQpIHsKICAgICAgICAgICAgdGhyb3cgbmV3\nIEludGVybmFsRXhjZXB0aW9uKF9sb2MuZ2V0KCJpbXBvcnRleHBvcnQtaW5z\ndGFudGlhdGUiKSx0KTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAg\nKiBSdW4gZmxhZ3MuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgY2xhc3Mg\nRmxhZ3MgewoKICAgICAgICBwdWJsaWMgU3RyaW5nIGFjdGlvbiA9IG51bGw7\nCiAgICAgICAgcHVibGljIGJvb2xlYW4gbWV0YSA9IGZhbHNlOwogICAgICAg\nIHB1YmxpYyBTdHJpbmcgc2NoZW1hQWN0aW9uID0gU2NoZW1hVG9vbC5BQ1RJ\nT05fQUREOwogICAgICAgIHB1YmxpYyBGaWxlIG1ldGFEYXRhRmlsZSA9IG51\nbGw7CiAgICAgICAgcHVibGljIFdyaXRlciBtYXBwaW5nV3JpdGVyID0gbnVs\nbDsKICAgICAgICBwdWJsaWMgV3JpdGVyIHNjaGVtYVdyaXRlciA9IG51bGw7\nCiAgICAgICAgcHVibGljIFdyaXRlciBzcWxXcml0ZXIgPSBudWxsOwogICAg\nICAgIHB1YmxpYyBib29sZWFuIGlnbm9yZUVycm9ycyA9IGZhbHNlOwogICAg\nICAgIHB1YmxpYyBib29sZWFuIHJlYWRTY2hlbWEgPSBmYWxzZTsKICAgICAg\nICBwdWJsaWMgYm9vbGVhbiBkcm9wVGFibGVzID0gZmFsc2U7CiAgICAgICAg\ncHVibGljIGJvb2xlYW4gb3BlbmpwYVRhYmxlcyA9IGZhbHNlOwogICAgICAg\nIHB1YmxpYyBib29sZWFuIGRyb3BTZXF1ZW5jZXMgPSBmYWxzZTsKICAgICAg\nICBwdWJsaWMgYm9vbGVhbiBzZXF1ZW5jZXMgPSB0cnVlOwogICAgICAgIHB1\nYmxpYyBib29sZWFuIHByaW1hcnlLZXlzID0gZmFsc2U7CiAgICAgICAgcHVi\nbGljIGJvb2xlYW4gZm9yZWlnbktleXMgPSBmYWxzZTsKICAgICAgICBwdWJs\naWMgYm9vbGVhbiBpbmRleGVzID0gZmFsc2U7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBIZWxwZXIgdXNlZCB0byBpbXBvcnQgYW5kIGV4cG9ydCBtYXBwaW5n\nIGRhdGEuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgaW50ZXJmYWNlIElt\ncG9ydEV4cG9ydCB7CgogICAgICAgIC8qKgogICAgICAgICAqIEltcG9ydCBt\nYXBwaW5ncyBmb3IgdGhlIGdpdmVuIGNsYXNzZXMgYmFzZWQgb24gdGhlIGdp\ndmVuIGFyZ3VtZW50cy4KICAgICAgICAgKi8KICAgICAgICBwdWJsaWMgYm9v\nbGVhbiBpbXBvcnRNYXBwaW5ncyhKREJDQ29uZmlndXJhdGlvbiBjb25mLCBD\nbGFzc1tdIGFjdCwKICAgICAgICAgICAgU3RyaW5nW10gYXJncywgYm9vbGVh\nbiBtZXRhLCBMb2cgbG9nLCBDbGFzc0xvYWRlciBsb2FkZXIpCiAgICAgICAg\nICAgIHRocm93cyBJT0V4Y2VwdGlvbjsKCiAgICAgICAgLyoqCiAgICAgICAg\nICogRXhwb3J0IG1hcHBpbmdzIGZvciB0aGUgZ2l2ZW4gY2xhc3NlcyBiYXNl\nZCBvbiB0aGUgZ2l2ZW4gYXJndW1lbnRzLgogICAgICAgICAqLwogICAgICAg\nIHB1YmxpYyBib29sZWFuIGV4cG9ydE1hcHBpbmdzKEpEQkNDb25maWd1cmF0\naW9uIGNvbmYsIENsYXNzW10gYWN0LAogICAgICAgICAgICBib29sZWFuIG1l\ndGEsIExvZyBsb2csIFdyaXRlciB3cml0ZXIpCiAgICAgICAgICAgIHRocm93\ncyBJT0V4Y2VwdGlvbjsKICAgIH0KfQo=\n","encoding":"base64"}

