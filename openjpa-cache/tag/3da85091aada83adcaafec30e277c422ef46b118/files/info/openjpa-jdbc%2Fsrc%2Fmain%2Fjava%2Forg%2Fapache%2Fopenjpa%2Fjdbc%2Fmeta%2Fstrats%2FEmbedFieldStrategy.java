{"sha":"06b0c342ad6cef871a8418e8daf8ba42c69eebf4","node_id":"MDQ6QmxvYjIwNjM2NDowNmIwYzM0MmFkNmNlZjg3MWE4NDE4ZThkYWY4YmE0MmM2OWVlYmY0","size":49277,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/06b0c342ad6cef871a8418e8daf8ba42c69eebf4","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLnN0cmF0czsK\nCmltcG9ydCBqYXZhLmlvLklucHV0U3RyZWFtOwppbXBvcnQgamF2YS5pby5P\nYmplY3RPdXRwdXQ7CmltcG9ydCBqYXZhLmlvLlJlYWRlcjsKaW1wb3J0IGph\ndmEubWF0aC5CaWdEZWNpbWFsOwppbXBvcnQgamF2YS5tYXRoLkJpZ0ludGVn\nZXI7CmltcG9ydCBqYXZhLnNxbC5BcnJheTsKaW1wb3J0IGphdmEuc3FsLkJs\nb2I7CmltcG9ydCBqYXZhLnNxbC5DbG9iOwppbXBvcnQgamF2YS5zcWwuU1FM\nRXhjZXB0aW9uOwppbXBvcnQgamF2YS5zcWwuVGltZTsKaW1wb3J0IGphdmEu\nc3FsLlRpbWVzdGFtcDsKaW1wb3J0IGphdmEudXRpbC5CaXRTZXQ7CmltcG9y\ndCBqYXZhLnV0aWwuQ2FsZW5kYXI7CmltcG9ydCBqYXZhLnV0aWwuQ29sbGVj\ndGlvbjsKaW1wb3J0IGphdmEudXRpbC5EYXRlOwppbXBvcnQgamF2YS51dGls\nLkxvY2FsZTsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuZW5oYW5jZS5Q\nZXJzaXN0ZW5jZUNhcGFibGU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nZW5oYW5jZS5TdGF0ZU1hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5rZXJuZWwuSkRCQ0ZldGNoQ29uZmlndXJhdGlvbjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmtlcm5lbC5KREJDU3RvcmU7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLkNsYXNzTWFwcGlu\nZzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1ldGEuRmllbGRN\nYXBwaW5nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5K\nYXZhU1FMVHlwZXM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5t\nZXRhLlJlbGF0aW9uSWQ7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5tZXRhLlZhbHVlTWFwcGluZ0luZm87CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5zY2hlbWEuQ29sdW1uOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmpkYmMuc2NoZW1hLkNvbHVtbklPOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmpkYmMuc2NoZW1hLkZvcmVpZ25LZXk7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuVGFibGU7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuSm9pbnM7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEuamRiYy5zcWwuUmVzdWx0OwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmpkYmMuc3FsLlJvdzsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLnNxbC5Sb3dNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmpkYmMuc3FsLlNRTEJ1ZmZlcjsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNxbC5TZWxlY3Q7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEua2VybmVsLkZldGNoQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5rZXJuZWwuT3BlbkpQQVN0YXRlTWFuYWdlcjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuUENTdGF0ZTsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuU3RvcmVDb250ZXh0OwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkxvY2FsaXplcjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkNsYXNzTWV0YURhdGE7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5GaWVsZE1ldGFEYXRhOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuVmFsdWVNZXRhRGF0YTsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLkludGVybmFsRXhjZXB0\naW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuTWV0YURhdGFF\neGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5Vc2Vy\nRXhjZXB0aW9uOwoKLyoqCiAqIE1hcHBpbmcgZm9yIGFuIGVtYmVkZGVkIHBl\ncnNpc3RlbnQgb2JqZWN0LgogKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKiBA\nc2luY2UgMC40LjAKICovCnB1YmxpYyBjbGFzcyBFbWJlZEZpZWxkU3RyYXRl\nZ3kKICAgIGV4dGVuZHMgQWJzdHJhY3RGaWVsZFN0cmF0ZWd5IHsKCiAgICBw\ncml2YXRlIHN0YXRpYyBmaW5hbCBpbnQgSU5TRVJUID0gMDsKICAgIHByaXZh\ndGUgc3RhdGljIGZpbmFsIGludCBVUERBVEUgPSAxOwogICAgcHJpdmF0ZSBz\ndGF0aWMgZmluYWwgaW50IERFTEVURSA9IDI7CgogICAgcHJpdmF0ZSBzdGF0\naWMgZmluYWwgTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6ZXIuZm9yUGFja2Fn\nZQogICAgICAgIChFbWJlZEZpZWxkU3RyYXRlZ3kuY2xhc3MpOwoKICAgIHBy\naXZhdGUgYm9vbGVhbiBfc3ludGhldGljID0gZmFsc2U7CgogICAgcHVibGlj\nIHZvaWQgbWFwKGJvb2xlYW4gYWRhcHQpIHsKICAgICAgICBpZiAoZmllbGQu\nZ2V0RW1iZWRkZWRNZXRhRGF0YSgpID09IG51bGwpCiAgICAgICAgICAgIHRo\ncm93IG5ldyBNZXRhRGF0YUV4Y2VwdGlvbihfbG9jLmdldCgibm90LWVtYmVk\nIiwgZmllbGQpKTsKICAgICAgICBhc3NlcnROb3RNYXBwZWRCeSgpOwoKICAg\nICAgICAvLyBtYXAgam9pbiBrZXkgKGlmIGFueSkKICAgICAgICBmaWVsZC5t\nYXBKb2luKGFkYXB0LCBmYWxzZSk7CiAgICAgICAgZmllbGQuZ2V0S2V5TWFw\ncGluZygpLmdldFZhbHVlSW5mbygpLmFzc2VydE5vU2NoZW1hQ29tcG9uZW50\ncwogICAgICAgICAgICAoZmllbGQuZ2V0S2V5KCksICFhZGFwdCk7CiAgICAg\nICAgZmllbGQuZ2V0RWxlbWVudE1hcHBpbmcoKS5nZXRWYWx1ZUluZm8oKS5h\nc3NlcnROb1NjaGVtYUNvbXBvbmVudHMKICAgICAgICAgICAgKGZpZWxkLmdl\ndEVsZW1lbnQoKSwgIWFkYXB0KTsKCiAgICAgICAgVmFsdWVNYXBwaW5nSW5m\nbyB2aW5mbyA9IGZpZWxkLmdldFZhbHVlSW5mbygpOwogICAgICAgIHZpbmZv\nLmFzc2VydE5vSm9pbihmaWVsZCwgdHJ1ZSk7CiAgICAgICAgdmluZm8uYXNz\nZXJ0Tm9Gb3JlaWduS2V5KGZpZWxkLCAhYWRhcHQpOwogICAgICAgIHZpbmZv\nLmFzc2VydE5vVW5pcXVlKGZpZWxkLCAhYWRhcHQpOwogICAgICAgIHZpbmZv\nLmFzc2VydE5vSW5kZXgoZmllbGQsICFhZGFwdCk7CgogICAgICAgIC8vIGJl\nZm9yZSB3ZSBtYXAgdGhlIG51bGwgaW5kaWNhdG9yIGNvbHVtbiwgd2UgbmVl\nZCB0byBtYWtlIHN1cmUgb3VyCiAgICAgICAgLy8gdmFsdWUgaXMgbWFwcGVk\nIHNvIHdlIGNhbiB0ZWxsIHdoZXRoZXIgdGhlIGNvbHVtbiBpcyBzeW50aGV0\naWMKICAgICAgICBmaWVsZC5nZXRWYWx1ZU1hcHBpbmcoKS5yZXNvbHZlKGZp\nZWxkLk1PREVfTUVUQSB8IGZpZWxkLk1PREVfTUFQUElORyk7CiAgICAgICAg\nQ29sdW1uIGNvbCA9IHZpbmZvLmdldE51bGxJbmRpY2F0b3JDb2x1bW4oZmll\nbGQsIGZpZWxkLmdldE5hbWUoKSwKICAgICAgICAgICAgZmllbGQuZ2V0VGFi\nbGUoKSwgYWRhcHQpOwogICAgICAgIGlmIChjb2wgIT0gbnVsbCkgewogICAg\nICAgICAgICBmaWVsZC5zZXRDb2x1bW5zKG5ldyBDb2x1bW5bXXsgY29sIH0p\nOwogICAgICAgICAgICBmaWVsZC5zZXRDb2x1bW5JTyh2aW5mby5nZXRDb2x1\nbW5JTygpKTsKICAgICAgICB9CgogICAgICAgIGZpZWxkLm1hcFByaW1hcnlL\nZXkoYWRhcHQpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGluaXRpYWxpemUo\nKSB7CiAgICAgICAgQ29sdW1uW10gY29scyA9IGZpZWxkLmdldENvbHVtbnMo\nKTsKICAgICAgICBpZiAoY29scy5sZW5ndGggIT0gMSkKICAgICAgICAgICAg\nX3N5bnRoZXRpYyA9IGZhbHNlOwogICAgICAgIGVsc2UgewogICAgICAgICAg\nICAvLyBkbyBhbnkgb2YgdGhlIGVtYmVkZGVkIGZpZWxkIG1hcHBpbmdzIHVz\nZSB0aGlzIGNvbHVtbj8KICAgICAgICAgICAgLy8gaWYgbm90LCBjb25zaWRl\nciBpdCBzeW50aGV0aWMKICAgICAgICAgICAgQ29sdW1uIGNvbCA9IGNvbHNb\nMF07CiAgICAgICAgICAgIGJvb2xlYW4gZm91bmQgPSBmYWxzZTsKICAgICAg\nICAgICAgRmllbGRNYXBwaW5nW10gZmllbGRzID0gZmllbGQuZ2V0RW1iZWRk\nZWRNYXBwaW5nKCkuCiAgICAgICAgICAgICAgICBnZXRGaWVsZE1hcHBpbmdz\nKCk7CiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyAhZm91bmQgJiYgaSA8\nIGZpZWxkcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgY29scyA9\nIGZpZWxkc1tpXS5nZXRDb2x1bW5zKCk7CiAgICAgICAgICAgICAgICBmb3Ig\nKGludCBqID0gMDsgaiA8IGNvbHMubGVuZ3RoOyBqKyspCiAgICAgICAgICAg\nICAgICAgICAgaWYgKGNvbHNbal0uZXF1YWxzKGNvbCkpCiAgICAgICAgICAg\nICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAg\nICAgICAgICBfc3ludGhldGljID0gIWZvdW5kOwogICAgICAgIH0KICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBpbnNlcnQoT3BlbkpQQVN0YXRlTWFuYWdlciBz\nbSwgSkRCQ1N0b3JlIHN0b3JlLCBSb3dNYW5hZ2VyIHJtKQogICAgICAgIHRo\ncm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIFJvdyByb3cgPSBmaWVsZC5n\nZXRSb3coc20sIHN0b3JlLCBybSwgUm93LkFDVElPTl9JTlNFUlQpOwogICAg\nICAgIGlmIChyb3cgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuOwoKICAg\nICAgICBPcGVuSlBBU3RhdGVNYW5hZ2VyIGVtID0gc3RvcmUuZ2V0Q29udGV4\ndCgpLmdldFN0YXRlTWFuYWdlcgogICAgICAgICAgICAoc20uZmV0Y2hPYmpl\nY3QoZmllbGQuZ2V0SW5kZXgoKSkpOwogICAgICAgIGluc2VydChzbSwgZW0s\nIHN0b3JlLCBybSwgcm93KTsKICAgIH0KCiAgICAvKioKICAgICAqIEluc2Vy\ndCBhbiBlbWJlZGRlZCBvYmplY3QuCiAgICAgKgogICAgICogQHBhcmFtIG93\nbmVyIHRoZSBvd25pbmcgc3RhdGUgbWFuYWdlcgogICAgICogQHBhcmFtIHNt\nIHRoZSBlbWJlZGRlZCBzdGF0ZSBtYW5hZ2VyLCBvciBudWxsIGlmIHRoZSB2\nYWx1ZSBpcyBudWxsCiAgICAgKiBAcGFyYW0gcm0gdGhlIHJvdyBtYW5hZ2Vy\nCiAgICAgKiBAcGFyYW0gcm93IGV4cGVjdGVkIHJvdyBmb3IgdGhpcyBlbWJl\nZGRlZCB2YWx1ZQogICAgICovCiAgICBwdWJsaWMgdm9pZCBpbnNlcnQoT3Bl\nbkpQQVN0YXRlTWFuYWdlciBvd25lciwgT3BlbkpQQVN0YXRlTWFuYWdlciBz\nbSwKICAgICAgICBKREJDU3RvcmUgc3RvcmUsIFJvd01hbmFnZXIgcm0sIFJv\ndyByb3cpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAg\nT3BlbkpQQVN0YXRlTWFuYWdlciBlbSA9IHNtOwogICAgICAgIGlmIChlbSA9\nPSBudWxsKQogICAgICAgICAgICBlbSA9IG5ldyBOdWxsRW1iZWRkZWRTdGF0\nZU1hbmFnZXIob3duZXIsIGZpZWxkKTsKICAgICAgICBybSA9IG5ldyBFbWJl\nZGRlZFJvd01hbmFnZXIocm0sIHJvdyk7CiAgICAgICAgRmllbGRNYXBwaW5n\nW10gZmllbGRzID0gZmllbGQuZ2V0RW1iZWRkZWRNYXBwaW5nKCkuZ2V0Rmll\nbGRNYXBwaW5ncygpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZmll\nbGRzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICBpZiAoIUJvb2xlYW4uVFJV\nRS5lcXVhbHMoZmllbGRzW2ldLmlzQ3VzdG9tSW5zZXJ0KGVtLCBzdG9yZSkp\nKQogICAgICAgICAgICAgICAgZmllbGRzW2ldLmluc2VydChlbSwgc3RvcmUs\nIHJtKTsKCiAgICAgICAgaWYgKGZpZWxkLmdldENvbHVtbklPKCkuaXNJbnNl\ncnRhYmxlKDAsIHRydWUpKQogICAgICAgICAgICBzZXROdWxsSW5kaWNhdG9y\nQ29sdW1uKHNtLCByb3cpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHVwZGF0\nZShPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBKREJDU3RvcmUgc3RvcmUsIFJv\nd01hbmFnZXIgcm0pCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAg\nICAgICAgT3BlbkpQQVN0YXRlTWFuYWdlciBlbSA9IHN0b3JlLmdldENvbnRl\neHQoKS5nZXRTdGF0ZU1hbmFnZXIKICAgICAgICAgICAgKHNtLmZldGNoT2Jq\nZWN0KGZpZWxkLmdldEluZGV4KCkpKTsKICAgICAgICBib29sZWFuIG5ld1Zh\nbCA9IGVtID09IG51bGwgfHwgZW0uZ2V0UENTdGF0ZSgpID09IFBDU3RhdGUu\nRUNPUFk7CgogICAgICAgIFJvdyByb3cgPSBudWxsOwogICAgICAgIGlmIChu\nZXdWYWwgJiYgZmllbGQuZ2V0Sm9pbkZvcmVpZ25LZXkoKSAhPSBudWxsCiAg\nICAgICAgICAgICYmIGZpZWxkLmlzSm9pbk91dGVyKCkpIHsKICAgICAgICAg\nICAgLy8gaWYgb3VyIHJlY29yZCBpcyBpbiBhbiBvdXRlci1qb2luZWQgcmVs\nYXRlZCB0YWJsZSBhbmQgd2UncmUgbm90CiAgICAgICAgICAgIC8vIHVwZGF0\naW5nIGFuIGV4aXN0aW5nIHZhbHVlLCBkZWxldGUgdGhlIG9sZCBvbmUKICAg\nICAgICAgICAgUm93IGRlbCA9IHJtLmdldFJvdyhmaWVsZC5nZXRUYWJsZSgp\nLCBSb3cuQUNUSU9OX0RFTEVURSwgc20sIHRydWUpOwogICAgICAgICAgICBk\nZWwud2hlcmVGb3JlaWduS2V5KGZpZWxkLmdldEpvaW5Gb3JlaWduS2V5KCks\nIHNtKTsKICAgICAgICAgICAgZGVsZXRlKHNtLCBudWxsLCBzdG9yZSwgcm0s\nIGRlbCk7CgogICAgICAgICAgICAvLyBpbnNlcnQgdGhlIG5ldyB2YWx1ZQog\nICAgICAgICAgICByb3cgPSBybS5nZXRSb3coZmllbGQuZ2V0VGFibGUoKSwg\nUm93LkFDVElPTl9JTlNFUlQsIHNtLAogICAgICAgICAgICAgICAgZW0gIT0g\nbnVsbCk7CiAgICAgICAgfSBlbHNlCiAgICAgICAgICAgIHJvdyA9IHJtLmdl\ndFJvdyhmaWVsZC5nZXRUYWJsZSgpLCBSb3cuQUNUSU9OX1VQREFURSwgc20s\nIHRydWUpOwogICAgICAgIGlmIChyb3cgPT0gbnVsbCkKICAgICAgICAgICAg\ncmV0dXJuOwoKICAgICAgICBpZiAocm93LmdldEFjdGlvbigpID09IFJvdy5B\nQ1RJT05fSU5TRVJUKQogICAgICAgICAgICBpbnNlcnQoc20sIGVtLCBzdG9y\nZSwgcm0sIHJvdyk7CiAgICAgICAgZWxzZQogICAgICAgICAgICB1cGRhdGUo\nc20sIGVtLCBzdG9yZSwgcm0sIHJvdyk7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBVcGRhdGUgYW4gZW1iZWRkZWQgb2JqZWN0LgogICAgICoKICAgICAqIEBw\nYXJhbSBvd25lciB0aGUgb3duaW5nIHN0YXRlIG1hbmFnZXIKICAgICAqIEBw\nYXJhbSBzbSB0aGUgZW1iZWRkZWQgc3RhdGUgbWFuYWdlciwgb3IgbnVsbCBp\nZiB0aGUgdmFsdWUgaXMgbnVsbAogICAgICogQHBhcmFtIHJtIHRoZSByb3cg\nbWFuYWdlcgogICAgICogQHBhcmFtIHJvdyBleHBlY3RlZCByb3cgZm9yIHRo\naXMgZW1iZWRkZWQgdmFsdWUKICAgICAqLwogICAgcHVibGljIHZvaWQgdXBk\nYXRlKE9wZW5KUEFTdGF0ZU1hbmFnZXIgb3duZXIsIE9wZW5KUEFTdGF0ZU1h\nbmFnZXIgc20sCiAgICAgICAgSkRCQ1N0b3JlIHN0b3JlLCBSb3dNYW5hZ2Vy\nIHJtLCBSb3cgcm93KQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewog\nICAgICAgIE9wZW5KUEFTdGF0ZU1hbmFnZXIgZW0gPSBzbTsKICAgICAgICBp\nZiAoZW0gPT0gbnVsbCkKICAgICAgICAgICAgZW0gPSBuZXcgTnVsbEVtYmVk\nZGVkU3RhdGVNYW5hZ2VyKG93bmVyLCBmaWVsZCk7CiAgICAgICAgcm0gPSBu\nZXcgRW1iZWRkZWRSb3dNYW5hZ2VyKHJtLCByb3cpOwogICAgICAgIEZpZWxk\nTWFwcGluZ1tdIGZpZWxkcyA9IGZpZWxkLmdldEVtYmVkZGVkTWFwcGluZygp\nLmdldEZpZWxkTWFwcGluZ3MoKTsKICAgICAgICBmb3IgKGludCBpID0gMDsg\naSA8IGZpZWxkcy5sZW5ndGg7IGkrKykKICAgICAgICAgICAgaWYgKGVtLmdl\ndERpcnR5KCkuZ2V0KGkpCiAgICAgICAgICAgICAgICAmJiAhZW0uZ2V0Rmx1\nc2hlZCgpLmdldChpKQogICAgICAgICAgICAgICAgJiYgIUJvb2xlYW4uVFJV\nRS5lcXVhbHMoZmllbGRzW2ldLmlzQ3VzdG9tVXBkYXRlKGVtLCBzdG9yZSkp\nKQogICAgICAgICAgICAgICAgZmllbGRzW2ldLnVwZGF0ZShlbSwgc3RvcmUs\nIHJtKTsKCiAgICAgICAgaWYgKGZpZWxkLmdldENvbHVtbklPKCkuaXNVcGRh\ndGFibGUoMCwgdHJ1ZSkpCiAgICAgICAgICAgIHNldE51bGxJbmRpY2F0b3JD\nb2x1bW4oc20sIHJvdyk7CiAgICB9CgogICAgcHVibGljIHZvaWQgZGVsZXRl\nKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIEpEQkNTdG9yZSBzdG9yZSwgUm93\nTWFuYWdlciBybSkKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAg\nICAgICBPcGVuSlBBU3RhdGVNYW5hZ2VyIGVtID0gbnVsbDsKICAgICAgICBp\nZiAoc20uZ2V0TG9hZGVkKCkuZ2V0KGZpZWxkLmdldEluZGV4KCkpKQogICAg\nICAgICAgICBlbSA9IHN0b3JlLmdldENvbnRleHQoKS5nZXRTdGF0ZU1hbmFn\nZXIoc20uZmV0Y2hPYmplY3QKICAgICAgICAgICAgICAgIChmaWVsZC5nZXRJ\nbmRleCgpKSk7CiAgICAgICAgUm93IHJvdyA9IGZpZWxkLmdldFJvdyhzbSwg\nc3RvcmUsIHJtLCBSb3cuQUNUSU9OX0RFTEVURSk7CiAgICAgICAgZGVsZXRl\nKHNtLCBlbSwgc3RvcmUsIHJtLCByb3cpOwogICAgfQoKICAgIC8qKgogICAg\nICogRGVsZXRlIGFuIGVtYmVkZGVkIG9iamVjdCByZWNvcmQuCiAgICAgKgog\nICAgICogQHBhcmFtIG93bmVyIHRoZSBvd25pbmcgc3RhdGUgbWFuYWdlcgog\nICAgICogQHBhcmFtIHNtIHRoZSBlbWJlZGRlZCBzdGF0ZSBtYW5hZ2VyLCBv\nciBudWxsIGlmIG5vdCBrbm93bgogICAgICogQHBhcmFtIHJtIHRoZSByb3cg\nbWFuYWdlcgogICAgICogQHBhcmFtIHJvdyBleHBlY3RlZCByb3cgZm9yIHRo\naXMgZW1iZWRkZWQgdmFsdWUKICAgICAqLwogICAgcHVibGljIHZvaWQgZGVs\nZXRlKE9wZW5KUEFTdGF0ZU1hbmFnZXIgb3duZXIsIE9wZW5KUEFTdGF0ZU1h\nbmFnZXIgc20sCiAgICAgICAgSkRCQ1N0b3JlIHN0b3JlLCBSb3dNYW5hZ2Vy\nIHJtLCBSb3cgcm93KQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewog\nICAgICAgIHJtID0gbmV3IEVtYmVkZGVkUm93TWFuYWdlcihybSwgcm93KTsK\nICAgICAgICBpZiAoc20gPT0gbnVsbCkKICAgICAgICAgICAgc20gPSBuZXcg\nTnVsbEVtYmVkZGVkU3RhdGVNYW5hZ2VyKG93bmVyLCBmaWVsZCk7CiAgICAg\nICAgRmllbGRNYXBwaW5nW10gZmllbGRzID0gZmllbGQuZ2V0RW1iZWRkZWRN\nYXBwaW5nKCkuZ2V0RmllbGRNYXBwaW5ncygpOwogICAgICAgIGZvciAoaW50\nIGkgPSAwOyBpIDwgZmllbGRzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICBp\nZiAoIUJvb2xlYW4uVFJVRS5lcXVhbHMoZmllbGRzW2ldLmlzQ3VzdG9tRGVs\nZXRlKHNtLCBzdG9yZSkpKQogICAgICAgICAgICAgICAgZmllbGRzW2ldLmRl\nbGV0ZShzbSwgc3RvcmUsIHJtKTsKICAgIH0KCiAgICAvKioKICAgICAqIFNl\ndCB0aGUgcHJvcGVyIG51bGwgaW5kaWNhdG9yIHZhbHVlIGludG8gdGhlIGdp\ndmVuIHJvdy4KICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIHNldE51bGxJbmRp\nY2F0b3JDb2x1bW4oT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgUm93IHJvdykK\nICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBpZiAoIV9z\neW50aGV0aWMpCiAgICAgICAgICAgIHJldHVybjsKCiAgICAgICAgQ29sdW1u\nIGNvbCA9IGZpZWxkLmdldENvbHVtbnMoKVswXTsKICAgICAgICBPYmplY3Qg\ndmFsID0gKChFbWJlZGRlZENsYXNzU3RyYXRlZ3kpIGZpZWxkLmdldEVtYmVk\nZGVkTWFwcGluZygpLgogICAgICAgICAgICBnZXRTdHJhdGVneSgpKS5nZXRO\ndWxsSW5kaWNhdG9yVmFsdWUoc20pOwogICAgICAgIGlmICh2YWwgPT0gbnVs\nbCkKICAgICAgICAgICAgcm93LnNldE51bGwoY29sLCB0cnVlKTsKICAgICAg\nICBlbHNlCiAgICAgICAgICAgIHJvdy5zZXRPYmplY3QoY29sLCB2YWwpOwog\nICAgfQoKICAgIHB1YmxpYyBCb29sZWFuIGlzQ3VzdG9tSW5zZXJ0KE9wZW5K\nUEFTdGF0ZU1hbmFnZXIgc20sIEpEQkNTdG9yZSBzdG9yZSkgewogICAgICAg\nIE9wZW5KUEFTdGF0ZU1hbmFnZXIgZW0gPSBzbS5nZXRDb250ZXh0KCkuZ2V0\nU3RhdGVNYW5hZ2VyKHNtLmZldGNoT2JqZWN0CiAgICAgICAgICAgIChmaWVs\nZC5nZXRJbmRleCgpKSk7CiAgICAgICAgQm9vbGVhbiBjdXN0b20gPSBpc0N1\nc3RvbShJTlNFUlQsIHNtLCBlbSwgc3RvcmUpOwogICAgICAgIGlmIChCb29s\nZWFuLlRSVUUuZXF1YWxzKGN1c3RvbSkgJiYgX3N5bnRoZXRpYykKICAgICAg\nICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgcmV0dXJuIGN1c3RvbTsKICAg\nIH0KCiAgICBwdWJsaWMgQm9vbGVhbiBpc0N1c3RvbVVwZGF0ZShPcGVuSlBB\nU3RhdGVNYW5hZ2VyIHNtLCBKREJDU3RvcmUgc3RvcmUpIHsKICAgICAgICBP\ncGVuSlBBU3RhdGVNYW5hZ2VyIGVtID0gc20uZ2V0Q29udGV4dCgpLmdldFN0\nYXRlTWFuYWdlcihzbS5mZXRjaE9iamVjdAogICAgICAgICAgICAoZmllbGQu\nZ2V0SW5kZXgoKSkpOwogICAgICAgIEJvb2xlYW4gY3VzdG9tID0gaXNDdXN0\nb20oVVBEQVRFLCBzbSwgZW0sIHN0b3JlKTsKICAgICAgICBpZiAoQm9vbGVh\nbi5UUlVFLmVxdWFscyhjdXN0b20pICYmIF9zeW50aGV0aWMpCiAgICAgICAg\nICAgIHJldHVybiBudWxsOwogICAgICAgIHJldHVybiBjdXN0b207CiAgICB9\nCgogICAgcHVibGljIEJvb2xlYW4gaXNDdXN0b21EZWxldGUoT3BlbkpQQVN0\nYXRlTWFuYWdlciBzbSwgSkRCQ1N0b3JlIHN0b3JlKSB7CiAgICAgICAgT3Bl\nbkpQQVN0YXRlTWFuYWdlciBlbSA9IHNtLmdldENvbnRleHQoKS5nZXRTdGF0\nZU1hbmFnZXIoc20uZmV0Y2hPYmplY3QKICAgICAgICAgICAgKGZpZWxkLmdl\ndEluZGV4KCkpKTsKICAgICAgICByZXR1cm4gaXNDdXN0b20oREVMRVRFLCBz\nbSwgZW0sIHN0b3JlKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB3\naGV0aGVyIHRoZSBnaXZlbiBhY3Rpb24gcmVxdWlyZXMgY3VzdG9tIGhhbmRs\naW5nIGZvciBhbnkgZmllbGRzLgogICAgICovCiAgICBwcml2YXRlIEJvb2xl\nYW4gaXNDdXN0b20oaW50IGFjdGlvbiwgT3BlbkpQQVN0YXRlTWFuYWdlciBv\nd25lciwKICAgICAgICBPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBKREJDU3Rv\ncmUgc3RvcmUpIHsKICAgICAgICBpZiAoc20gPT0gbnVsbCkKICAgICAgICAg\nICAgc20gPSBuZXcgTnVsbEVtYmVkZGVkU3RhdGVNYW5hZ2VyKG93bmVyLCBm\naWVsZCk7CiAgICAgICAgYm9vbGVhbiBoYXNDdXN0b20gPSBmYWxzZTsKICAg\nICAgICBib29sZWFuIGhhc1N0ZCA9IGZhbHNlOwoKICAgICAgICBGaWVsZE1h\ncHBpbmdbXSBmaWVsZHMgPSBmaWVsZC5nZXRFbWJlZGRlZE1hcHBpbmcoKS5n\nZXRGaWVsZE1hcHBpbmdzKCk7CiAgICAgICAgQm9vbGVhbiBjdXN0b20gPSBu\ndWxsOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZmllbGRzLmxlbmd0\naDsgaSsrKSB7CiAgICAgICAgICAgIHN3aXRjaCAoYWN0aW9uKSB7CiAgICAg\nICAgICAgICAgICBjYXNlIElOU0VSVDoKICAgICAgICAgICAgICAgICAgICBj\ndXN0b20gPSBmaWVsZHNbaV0uaXNDdXN0b21JbnNlcnQoc20sIHN0b3JlKTsK\nICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNh\nc2UgVVBEQVRFOgogICAgICAgICAgICAgICAgICAgIGN1c3RvbSA9IGZpZWxk\nc1tpXS5pc0N1c3RvbVVwZGF0ZShzbSwgc3RvcmUpOwogICAgICAgICAgICAg\nICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSBERUxFVEU6CiAg\nICAgICAgICAgICAgICAgICAgY3VzdG9tID0gZmllbGRzW2ldLmlzQ3VzdG9t\nRGVsZXRlKHNtLCBzdG9yZSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7\nCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICghQm9vbGVhbi5GQUxT\nRS5lcXVhbHMoY3VzdG9tKSkKICAgICAgICAgICAgICAgIGhhc0N1c3RvbSA9\nIHRydWU7CiAgICAgICAgICAgIGlmICghQm9vbGVhbi5UUlVFLmVxdWFscyhj\ndXN0b20pKQogICAgICAgICAgICAgICAgaGFzU3RkID0gdHJ1ZTsKICAgICAg\nICB9CgogICAgICAgIGlmIChoYXNDdXN0b20gJiYgaGFzU3RkKQogICAgICAg\nICAgICByZXR1cm4gbnVsbDsKICAgICAgICByZXR1cm4gKGhhc0N1c3RvbSkg\nPyBCb29sZWFuLlRSVUUgOiBCb29sZWFuLkZBTFNFOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIGN1c3RvbUluc2VydChPcGVuSlBBU3RhdGVNYW5hZ2VyIHNt\nLCBKREJDU3RvcmUgc3RvcmUpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlv\nbiB7CiAgICAgICAgT3BlbkpQQVN0YXRlTWFuYWdlciBlbSA9IHN0b3JlLmdl\ndENvbnRleHQoKS5nZXRTdGF0ZU1hbmFnZXIKICAgICAgICAgICAgKHNtLmZl\ndGNoT2JqZWN0KGZpZWxkLmdldEluZGV4KCkpKTsKICAgICAgICBpZiAoZW0g\nPT0gbnVsbCkKICAgICAgICAgICAgZW0gPSBuZXcgTnVsbEVtYmVkZGVkU3Rh\ndGVNYW5hZ2VyKHNtLCBmaWVsZCk7CiAgICAgICAgRmllbGRNYXBwaW5nW10g\nZmllbGRzID0gZmllbGQuZ2V0RW1iZWRkZWRNYXBwaW5nKCkuZ2V0RmllbGRN\nYXBwaW5ncygpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZmllbGRz\nLmxlbmd0aDsgaSsrKQogICAgICAgICAgICBpZiAoIUJvb2xlYW4uRkFMU0Uu\nZXF1YWxzKGZpZWxkc1tpXS5pc0N1c3RvbUluc2VydChlbSwgc3RvcmUpKSkK\nICAgICAgICAgICAgICAgIGZpZWxkc1tpXS5jdXN0b21JbnNlcnQoZW0sIHN0\nb3JlKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjdXN0b21VcGRhdGUoT3Bl\nbkpQQVN0YXRlTWFuYWdlciBzbSwgSkRCQ1N0b3JlIHN0b3JlKQogICAgICAg\nIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIE9wZW5KUEFTdGF0ZU1h\nbmFnZXIgZW0gPSBzdG9yZS5nZXRDb250ZXh0KCkuZ2V0U3RhdGVNYW5hZ2Vy\nCiAgICAgICAgICAgIChzbS5mZXRjaE9iamVjdChmaWVsZC5nZXRJbmRleCgp\nKSk7CiAgICAgICAgaWYgKGVtID09IG51bGwpCiAgICAgICAgICAgIGVtID0g\nbmV3IE51bGxFbWJlZGRlZFN0YXRlTWFuYWdlcihzbSwgZmllbGQpOwogICAg\nICAgIEZpZWxkTWFwcGluZ1tdIGZpZWxkcyA9IGZpZWxkLmdldEVtYmVkZGVk\nTWFwcGluZygpLmdldEZpZWxkTWFwcGluZ3MoKTsKICAgICAgICBmb3IgKGlu\ndCBpID0gMDsgaSA8IGZpZWxkcy5sZW5ndGg7IGkrKykKICAgICAgICAgICAg\naWYgKGVtLmdldERpcnR5KCkuZ2V0KGkpCiAgICAgICAgICAgICAgICAmJiAh\nZW0uZ2V0Rmx1c2hlZCgpLmdldChpKQogICAgICAgICAgICAgICAgJiYgIUJv\nb2xlYW4uRkFMU0UuZXF1YWxzKGZpZWxkc1tpXS5pc0N1c3RvbVVwZGF0ZShl\nbSwgc3RvcmUpKSkKICAgICAgICAgICAgICAgIGZpZWxkc1tpXS5jdXN0b21V\ncGRhdGUoZW0sIHN0b3JlKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjdXN0\nb21EZWxldGUoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgSkRCQ1N0b3JlIHN0\nb3JlKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIE9w\nZW5KUEFTdGF0ZU1hbmFnZXIgZW0gPSBzdG9yZS5nZXRDb250ZXh0KCkuZ2V0\nU3RhdGVNYW5hZ2VyCiAgICAgICAgICAgIChzbS5mZXRjaE9iamVjdChmaWVs\nZC5nZXRJbmRleCgpKSk7CiAgICAgICAgaWYgKGVtID09IG51bGwpCiAgICAg\nICAgICAgIGVtID0gbmV3IE51bGxFbWJlZGRlZFN0YXRlTWFuYWdlcihzbSwg\nZmllbGQpOwogICAgICAgIEZpZWxkTWFwcGluZ1tdIGZpZWxkcyA9IGZpZWxk\nLmdldEVtYmVkZGVkTWFwcGluZygpLmdldEZpZWxkTWFwcGluZ3MoKTsKICAg\nICAgICBmb3IgKGludCBpID0gMDsgaSA8IGZpZWxkcy5sZW5ndGg7IGkrKykK\nICAgICAgICAgICAgaWYgKCFCb29sZWFuLkZBTFNFLmVxdWFscyhmaWVsZHNb\naV0uaXNDdXN0b21EZWxldGUoZW0sIHN0b3JlKSkpCiAgICAgICAgICAgICAg\nICBmaWVsZHNbaV0uY3VzdG9tRGVsZXRlKGVtLCBzdG9yZSk7CiAgICB9Cgog\nICAgcHVibGljIGludCBzdXBwb3J0c1NlbGVjdChTZWxlY3Qgc2VsLCBpbnQg\ndHlwZSwgT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwKICAgICAgICBKREJDU3Rv\ncmUgc3RvcmUsIEpEQkNGZXRjaENvbmZpZ3VyYXRpb24gZmV0Y2gpIHsKICAg\nICAgICBpZiAodHlwZSA9PSBTZWxlY3QuVFlQRV9KT0lOTEVTUyAmJiBzZWwu\naXNTZWxlY3RlZChmaWVsZC5nZXRUYWJsZSgpKSkKICAgICAgICAgICAgcmV0\ndXJuIDE7CiAgICAgICAgcmV0dXJuIDA7CiAgICB9CgogICAgcHVibGljIGlu\ndCBzZWxlY3QoU2VsZWN0IHNlbCwgT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwg\nSkRCQ1N0b3JlIHN0b3JlLAogICAgICAgIEpEQkNGZXRjaENvbmZpZ3VyYXRp\nb24gZmV0Y2gsIGludCBlYWdlck1vZGUpIHsKICAgICAgICBKb2lucyBqb2lu\ncyA9IGZpZWxkLmpvaW4oc2VsKTsKICAgICAgICBzZWwuc2VsZWN0KGZpZWxk\nLmdldENvbHVtbnMoKSwgam9pbnMpOyAvLyBudWxsIGluZGljYXRvcgoKICAg\nICAgICAvLyBsaW1pdCBlYWdlciBtb2RlIHRvIGpvaW4gYi9jIGF0IHRoaXMg\ncG9pbnQgdGhlIHNlbGVjdCBoYXMgYmVlbgogICAgICAgIC8vIG1vZGlmaWVk\nIGFuZCBhbiBhdHRlbXB0IHRvIGNsb25lIGl0IGZvciBhIHRvLW1hbnkgZWFn\nZXIgc2VsZWN0IGNhbgogICAgICAgIC8vIHJlc3VsdCBpbiBhIGNsb25lIHRo\nYXQgcHJvZHVjZXMgaW52YWxpZCBTUUwKICAgICAgICBlYWdlck1vZGUgPSBN\nYXRoLm1pbihlYWdlck1vZGUsIEpEQkNGZXRjaENvbmZpZ3VyYXRpb24uRUFH\nRVJfSk9JTik7CiAgICAgICAgc2VsLnNlbGVjdChmaWVsZC5nZXRFbWJlZGRl\nZE1hcHBpbmcoKSwgc2VsLlNVQlNfRVhBQ1QsIHN0b3JlLAogICAgICAgICAg\nICBmZXRjaCwgZWFnZXJNb2RlLCBqb2lucyk7CiAgICAgICAgcmV0dXJuIDE7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgbG9hZChPcGVuSlBBU3RhdGVNYW5h\nZ2VyIHNtLCBKREJDU3RvcmUgc3RvcmUsCiAgICAgICAgSkRCQ0ZldGNoQ29u\nZmlndXJhdGlvbiBmZXRjaCwgUmVzdWx0IHJlcykKICAgICAgICB0aHJvd3Mg\nU1FMRXhjZXB0aW9uIHsKICAgICAgICBCb29sZWFuIGlzTnVsbCA9IGluZGlj\nYXRlc051bGwocmVzKTsKICAgICAgICBpZiAoaXNOdWxsID09IG51bGwpCiAg\nICAgICAgICAgIHJldHVybjsKCiAgICAgICAgaWYgKEJvb2xlYW4uVFJVRS5l\ncXVhbHMoaXNOdWxsKSkgewogICAgICAgICAgICBzbS5zdG9yZU9iamVjdChm\naWVsZC5nZXRJbmRleCgpLCBudWxsKTsKICAgICAgICAgICAgcmV0dXJuOwog\nICAgICAgIH0KCiAgICAgICAgLy8jIyMgbm90ZTogd2l0aG91dCBhIG51bGwg\naW5kaWNhdG9yIGNvbHVtbiwgdGhlIGFib3ZlIGluZGljYXRlc051bGwoKQog\nICAgICAgIC8vIyMjIGNhbGwgd2lsbCBhbHdheXMgcmV0dXJuIGZhbHNlLCBt\nZWFuaW5nIHdlIGFsd2F5cyBoYXZlIHRvIGFzc3VtZQogICAgICAgIC8vIyMj\nIHdlIHNlbGVjdGVkIHRoZSBlbWJlZGRlZCBvYmplY3QgZmllbGRzIGFuZCBs\nb2FkIHRoZSBvYmplY3QKICAgICAgICAvLyMjIyBpbW1lZGlhdGVseTsgdGhp\ncyB3aWxsIGJlIGluZWZmaWNpZW50IHdoZW4gdGhlIGVtYmVkZGVkIG9iamVj\ndAogICAgICAgIC8vIyMjIHdhcyBub3Qgc2VsZWN0ZWQgYWZ0ZXIgYWxsCgog\nICAgICAgIFN0b3JlQ29udGV4dCBjdHggPSBzdG9yZS5nZXRDb250ZXh0KCk7\nCiAgICAgICAgT3BlbkpQQVN0YXRlTWFuYWdlciBlbSA9IGN0eC5lbWJlZChu\ndWxsLCBudWxsLCBzbSwgZmllbGQpOwogICAgICAgIHNtLnN0b3JlT2JqZWN0\nKGZpZWxkLmdldEluZGV4KCksIGVtLmdldE1hbmFnZWRJbnN0YW5jZSgpKTsK\nCiAgICAgICAgRmllbGRNYXBwaW5nW10gZmllbGRzID0gZmllbGQuZ2V0RW1i\nZWRkZWRNYXBwaW5nKCkuZ2V0RmllbGRNYXBwaW5ncygpOwogICAgICAgIE9i\namVjdCBlcmVzLCBwcm9jZXNzZWQ7CiAgICAgICAgYm9vbGVhbiBsb2FkZWQg\nPSBmYWxzZTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGZpZWxkcy5s\nZW5ndGg7IGkrKykgewogICAgICAgICAgICBlcmVzID0gcmVzLmdldEVhZ2Vy\nKGZpZWxkc1tpXSk7CiAgICAgICAgICAgIHJlcy5zdGFydERhdGFSZXF1ZXN0\nKGZpZWxkc1tpXSk7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAg\nICBpZiAoZXJlcyA9PSByZXMpCiAgICAgICAgICAgICAgICAgICAgZmllbGRz\nW2ldLmxvYWRFYWdlckpvaW4oZW0sIHN0b3JlLCBmZXRjaCwgcmVzKTsKICAg\nICAgICAgICAgICAgIGVsc2UgaWYgKGVyZXMgIT0gbnVsbCkgewogICAgICAg\nICAgICAgICAgICAgIHByb2Nlc3NlZCA9CiAgICAgICAgICAgICAgICAgICAg\nICAgIGZpZWxkc1tpXS5sb2FkRWFnZXJQYXJhbGxlbChlbSwgc3RvcmUsIGZl\ndGNoLCBlcmVzKTsKICAgICAgICAgICAgICAgICAgICBpZiAocHJvY2Vzc2Vk\nICE9IGVyZXMpCiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5wdXRFYWdl\ncihmaWVsZHNbaV0sIHByb2Nlc3NlZCk7CiAgICAgICAgICAgICAgICB9IGVs\nc2UKICAgICAgICAgICAgICAgICAgICBmaWVsZHNbaV0ubG9hZChlbSwgc3Rv\ncmUsIGZldGNoLCByZXMpOwogICAgICAgICAgICAgICAgbG9hZGVkIHw9IGVt\nLmdldExvYWRlZCgpLmdldChpKTsKICAgICAgICAgICAgfSBmaW5hbGx5IHsK\nICAgICAgICAgICAgICAgIHJlcy5lbmREYXRhUmVxdWVzdCgpOwogICAgICAg\nICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBhZnRlciBsb2FkaW5nIGV2\nZXJ5dGhpbmcgZnJvbSByZXN1bHQsIGxvYWQgdGhlIHJlc3Qgb2YgdGhlCiAg\nICAgICAgLy8gY29uZmlndXJlZCBmaWVsZHMKICAgICAgICBpZiAobG9hZGVk\nKQogICAgICAgICAgICBlbS5sb2FkKGZldGNoKTsKICAgIH0KCiAgICAvKioK\nICAgICAqIFJldHVybiB3aGV0aGVyIHRoZSBnaXZlbiByZXN1bHQgaW5kaWNh\ndGVzIHRoYXQgdGhlIGVtYmVkZGVkIHZhbHVlIGlzCiAgICAgKiBudWxsLgog\nICAgICoKICAgICAqIEByZXR1cm4ge0BsaW5rIEJvb2xlYW4jVFJVRX0gaWYg\ndGhlIHZhbHVlIGlzIG51bGwsIHtAbGluayBCb29sZWFuI0ZBTFNFfQogICAg\nICogaWYgaXQgaXMgbm90LCBvciA8Y29kZT5udWxsPC9jb2RlPiBpZiB0aGUg\ncmVzdWx0IGRvZXMgbm90CiAgICAgKiBjb250YWluIHRoZSBlbWJlZGRlZCB2\nYWx1ZQogICAgICovCiAgICBwcml2YXRlIEJvb2xlYW4gaW5kaWNhdGVzTnVs\nbChSZXN1bHQgcmVzKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewog\nICAgICAgIENvbHVtbltdIGNvbHMgPSBmaWVsZC5nZXRDb2x1bW5zKCk7CiAg\nICAgICAgaWYgKGNvbHMubGVuZ3RoICE9IDEpCiAgICAgICAgICAgIHJldHVy\nbiBCb29sZWFuLkZBTFNFOwogICAgICAgIGlmICghcmVzLmNvbnRhaW5zKGNv\nbHNbMF0pKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKCiAgICAgICAgT2Jq\nZWN0IG9iaiA9IHJlcy5nZXRPYmplY3QoY29sc1swXSwgLTEsIChPYmplY3Qp\nIG51bGwpOwogICAgICAgIGlmICgoKEVtYmVkZGVkQ2xhc3NTdHJhdGVneSkg\nZmllbGQuZ2V0RW1iZWRkZWRNYXBwaW5nKCkuZ2V0U3RyYXRlZ3koKSkuCiAg\nICAgICAgICAgIGluZGljYXRlc051bGwob2JqKSkKICAgICAgICAgICAgcmV0\ndXJuIEJvb2xlYW4uVFJVRTsKICAgICAgICByZXR1cm4gQm9vbGVhbi5GQUxT\nRTsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IHRvRGF0YVN0b3JlVmFsdWUo\nT2JqZWN0IHZhbCwgSkRCQ1N0b3JlIHN0b3JlKSB7CiAgICAgICAgQ2xhc3NN\nYXBwaW5nIHR5cGUgPSBmaWVsZC5nZXRUeXBlTWFwcGluZygpOwogICAgICAg\nIHJldHVybiB0eXBlLnRvRGF0YVN0b3JlVmFsdWUodmFsLCB0eXBlLmdldFBy\naW1hcnlLZXlDb2x1bW5zKCksIHN0b3JlKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBhcHBlbmRJc051bGwoU1FMQnVmZmVyIHNxbCwgU2VsZWN0IHNlbCwg\nSm9pbnMgam9pbnMpIHsKICAgICAgICBhcHBlbmRUZXN0TnVsbChzcWwsIHNl\nbCwgam9pbnMsIHRydWUpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGFwcGVu\nZElzTm90TnVsbChTUUxCdWZmZXIgc3FsLCBTZWxlY3Qgc2VsLCBKb2lucyBq\nb2lucykgewogICAgICAgIGFwcGVuZFRlc3ROdWxsKHNxbCwgc2VsLCBqb2lu\ncywgZmFsc2UpOwogICAgfQoKICAgIC8qKgogICAgICogQXBwZW5kIFNRTCB0\nbyB0ZXN0IHdoZXRoZXIgdGhlIGVtYmVkZGVkIG9iamVjdCBpcyBudWxsLgog\nICAgICovCiAgICBwcml2YXRlIHZvaWQgYXBwZW5kVGVzdE51bGwoU1FMQnVm\nZmVyIHNxbCwgU2VsZWN0IHNlbCwgSm9pbnMgam9pbnMsCiAgICAgICAgYm9v\nbGVhbiBpc051bGwpIHsKICAgICAgICBDb2x1bW5bXSBjb2xzID0gZmllbGQu\nZ2V0Q29sdW1ucygpOwogICAgICAgIGlmIChjb2xzLmxlbmd0aCAhPSAxKSB7\nCiAgICAgICAgICAgIGlmIChpc051bGwpCiAgICAgICAgICAgICAgICBzcWwu\nYXBwZW5kKCIxIDw+IDEiKTsKICAgICAgICAgICAgZWxzZQogICAgICAgICAg\nICAgICAgc3FsLmFwcGVuZCgiMSA9IDEiKTsKICAgICAgICAgICAgcmV0dXJu\nOwogICAgICAgIH0KCiAgICAgICAgT2JqZWN0IHZhbDsKICAgICAgICBpZiAo\nY29sc1swXS5pc05vdE51bGwoKSkgewogICAgICAgICAgICBpZiAoX3N5bnRo\nZXRpYyB8fCBjb2xzWzBdLmdldERlZmF1bHRTdHJpbmcoKSA9PSBudWxsKQog\nICAgICAgICAgICAgICAgdmFsID0gSmF2YVNRTFR5cGVzLmdldEVtcHR5VmFs\ndWUoY29sc1swXS5nZXRKYXZhVHlwZSgpKTsKICAgICAgICAgICAgZWxzZQog\nICAgICAgICAgICAgICAgdmFsID0gY29sc1swXS5nZXREZWZhdWx0KCk7CiAg\nICAgICAgfSBlbHNlCiAgICAgICAgICAgIHZhbCA9IG51bGw7CgogICAgICAg\nIGpvaW5zID0gam9pbihqb2lucywgZmFsc2UpOwogICAgICAgIHNxbC5hcHBl\nbmQoc2VsLmdldENvbHVtbkFsaWFzKGNvbHNbMF0sIGpvaW5zKSk7CiAgICAg\nICAgaWYgKGlzTnVsbCAmJiB2YWwgPT0gbnVsbCkKICAgICAgICAgICAgc3Fs\nLmFwcGVuZCgiIElTICIpOwogICAgICAgIGVsc2UgaWYgKGlzTnVsbCkKICAg\nICAgICAgICAgc3FsLmFwcGVuZCgiID0gIik7CiAgICAgICAgZWxzZSBpZiAo\ndmFsID09IG51bGwpCiAgICAgICAgICAgIHNxbC5hcHBlbmQoIiBJUyBOT1Qg\nIik7CiAgICAgICAgZWxzZQogICAgICAgICAgICBzcWwuYXBwZW5kKCIgPD4g\nIik7CiAgICAgICAgc3FsLmFwcGVuZFZhbHVlKHZhbCwgY29sc1swXSk7CiAg\nICB9CgogICAgcHVibGljIEpvaW5zIGpvaW4oSm9pbnMgam9pbnMsIGJvb2xl\nYW4gZm9yY2VPdXRlcikgewogICAgICAgIHJldHVybiBmaWVsZC5qb2luKGpv\naW5zLCBmb3JjZU91dGVyLCBmYWxzZSk7CiAgICB9CgogICAgcHVibGljIE9i\namVjdCBsb2FkUHJvamVjdGlvbihKREJDU3RvcmUgc3RvcmUsIEpEQkNGZXRj\naENvbmZpZ3VyYXRpb24gZmV0Y2gsCiAgICAgICAgUmVzdWx0IHJlcywgSm9p\nbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAg\nICAgdGhyb3cgbmV3IFVzZXJFeGNlcHRpb24oX2xvYy5nZXQoImNhbnQtcHJv\namVjdC1vd25lZCIsIGZpZWxkKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBT\ndGF0ZSBtYW5hZ2VyIHRoYXQgcmVwcmVzZW50cyBhIG51bGwgZW1iZWRkZWQg\nb2JqZWN0LgogICAgICogVXNlZCB0byB1cGRhdGUgZW1iZWRkZWQgZmllbGRz\nIHdoZW4gdGhlIGVtYmVkZGVkIHZhbHVlIGlzIG51bGwuIFRoaXMKICAgICAq\nIHN0YXRlIG1hbmFnZXIgZG9lc24ndCByZXF1aXJlIGFjY2VzcyB0byB0aGUg\nb2xkIGVtYmVkZGVkIHZhbHVlLCBiZWNhdXNlCiAgICAgKiBhbGwgdXBkYXRl\ncyBhcmUgZmx1c2hlZCBiZWZvcmUgYWxsIGRlbGV0ZXMsIHNvIGFsbCBmb3Jl\naWduIGtleXMgd2lsbAogICAgICogYmUgcHJvcGVybHkgbnVsbGVkIGJlZm9y\nZSB0aGUgcmVsYXRlZCBvYmplY3QgaXMgZGVsZXRlZC4gSG93ZXZlciwgdGhp\ncwogICAgICogc3RhdGUgbWFuYWdlciBzaG91bGQgbm90IGJlIHVzZWQgaWYg\ncG9zc2libGUgd2hlbiB0aGUgcGFyZW50IG9iamVjdCBpcwogICAgICogYmVp\nbmcgZGVsZXRlZDsgaW4gdGhhdCBjYXNlIGhhdmluZyB0aGUgb3JpZ2luYWwg\nZW1iZWRkZWQgc3RhdGUgbWFuYWdlcgogICAgICogaXMgcHJlZmVyYWJsZSBz\nbyB0aGF0IGl0IGNhbiBzZXQgZm9yZWlnbiBrZXkgcmVsYXRpb25zIHRvIG9y\nZGVyIERFTEVURQogICAgICogc3RhdGVtZW50cyB0byBtZWV0IGNvbnN0cmFp\nbnRzLgogICAgICovCiAgICBwcml2YXRlIHN0YXRpYyBjbGFzcyBOdWxsRW1i\nZWRkZWRTdGF0ZU1hbmFnZXIKICAgICAgICBpbXBsZW1lbnRzIE9wZW5KUEFT\ndGF0ZU1hbmFnZXIgewoKICAgICAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBC\naXRTZXQgRU1QVFlfQklUU0VUID0gbmV3IEJpdFNldCgpOwoKICAgICAgICBw\ncml2YXRlIGZpbmFsIE9wZW5KUEFTdGF0ZU1hbmFnZXIgX293bmVyOwogICAg\nICAgIHByaXZhdGUgZmluYWwgVmFsdWVNZXRhRGF0YSBfdm1kOwogICAgICAg\nIHByaXZhdGUgQml0U2V0IF9mdWxsID0gbnVsbDsKCiAgICAgICAgLyoqCiAg\nICAgICAgICogQ29uc3RydWN0b3I7IHN1cHBseSB0aGUgb3duZXIgb2YgdGhl\nIG51bGwvZGVsZXRlZCBlbWJlZGRlZCB2YWx1ZSwKICAgICAgICAgKiBhbmQg\ndGhlIHZhbHVlIG1ldGFkYXRhLgogICAgICAgICAqLwogICAgICAgIHB1Ymxp\nYyBOdWxsRW1iZWRkZWRTdGF0ZU1hbmFnZXIoT3BlbkpQQVN0YXRlTWFuYWdl\nciBvd25lciwKICAgICAgICAgICAgVmFsdWVNZXRhRGF0YSB2bWQpIHsKICAg\nICAgICAgICAgX293bmVyID0gb3duZXI7CiAgICAgICAgICAgIF92bWQgPSB2\nbWQ7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBpbml0aWFsaXpl\nKENsYXNzIGZvclR5cGUsIFBDU3RhdGUgc3RhdGUpIHsKICAgICAgICAgICAg\ndGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAg\nICAgICBwdWJsaWMgdm9pZCBsb2FkKEZldGNoQ29uZmlndXJhdGlvbiBmZXRj\naCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24o\nKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBib29sZWFuIGFzc2lnbk9i\namVjdElkKGJvb2xlYW4gZmx1c2gpIHsKICAgICAgICAgICAgdGhyb3cgbmV3\nIEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJs\naWMgT2JqZWN0IGdldE1hbmFnZWRJbnN0YW5jZSgpIHsKICAgICAgICAgICAg\ncmV0dXJuIG51bGw7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgUGVyc2lz\ndGVuY2VDYXBhYmxlIGdldFBlcnNpc3RlbmNlQ2FwYWJsZSgpIHsKICAgICAg\nICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMg\nQ2xhc3NNZXRhRGF0YSBnZXRNZXRhRGF0YSgpIHsKICAgICAgICAgICAgcmV0\ndXJuIF92bWQuZ2V0RW1iZWRkZWRNZXRhRGF0YSgpOwogICAgICAgIH0KCiAg\nICAgICAgcHVibGljIE9wZW5KUEFTdGF0ZU1hbmFnZXIgZ2V0T3duZXIoKSB7\nCiAgICAgICAgICAgIHJldHVybiBfb3duZXI7CiAgICAgICAgfQoKICAgICAg\nICBwdWJsaWMgVmFsdWVNZXRhRGF0YSBnZXRPd25lck1ldGFEYXRhKCkgewog\nICAgICAgICAgICByZXR1cm4gX3ZtZDsKICAgICAgICB9CgogICAgICAgIHB1\nYmxpYyBib29sZWFuIGlzRW1iZWRkZWQoKSB7CiAgICAgICAgICAgIHJldHVy\nbiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIGJvb2xlYW4gaXNU\ncmFuc2FjdGlvbmFsKCkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAg\nICAgICB9CgogICAgICAgIHB1YmxpYyBib29sZWFuIGlzUGVyc2lzdGVudCgp\nIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAg\nICBwdWJsaWMgYm9vbGVhbiBpc05ldygpIHsKICAgICAgICAgICAgcmV0dXJu\nIF9vd25lci5pc05ldygpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIGJv\nb2xlYW4gaXNEZWxldGVkKCkgewogICAgICAgICAgICByZXR1cm4gX293bmVy\nLmlzRGVsZXRlZCgpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIGJvb2xl\nYW4gaXNEZXRhY2hlZCgpIHsKICAgICAgICAgICAgcmV0dXJuIF9vd25lci5p\nc0RldGFjaGVkKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgYm9vbGVh\nbiBpc1ZlcnNpb25VcGRhdGVSZXF1aXJlZCgpIHsKICAgICAgICAgICAgcmV0\ndXJuIF9vd25lci5pc1ZlcnNpb25VcGRhdGVSZXF1aXJlZCgpOwogICAgICAg\nIH0KCiAgICAgICAgcHVibGljIGJvb2xlYW4gaXNWZXJzaW9uQ2hlY2tSZXF1\naXJlZCgpIHsKICAgICAgICAgICAgcmV0dXJuIF9vd25lci5pc1ZlcnNpb25D\naGVja1JlcXVpcmVkKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgYm9v\nbGVhbiBpc0RpcnR5KCkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAg\nICAgICB9CgogICAgICAgIHB1YmxpYyBib29sZWFuIGlzRmx1c2hlZCgpIHsK\nICAgICAgICAgICAgcmV0dXJuIF9vd25lci5pc0ZsdXNoZWQoKTsKICAgICAg\nICB9CgogICAgICAgIHB1YmxpYyBib29sZWFuIGlzRmx1c2hlZERpcnR5KCkg\newogICAgICAgICAgICByZXR1cm4gaXNGbHVzaGVkKCk7CiAgICAgICAgfQoK\nICAgICAgICBwdWJsaWMgYm9vbGVhbiBpc1Byb3Zpc2lvbmFsKCkgewogICAg\nICAgICAgICByZXR1cm4gX293bmVyLmlzUHJvdmlzaW9uYWwoKTsKICAgICAg\nICB9CgogICAgICAgIHB1YmxpYyBCaXRTZXQgZ2V0TG9hZGVkKCkgewogICAg\nICAgICAgICAvLyBjb25zaWRlciBldmVyeXRoaW5nIGxvYWRlZAogICAgICAg\nICAgICBpZiAoX2Z1bGwgPT0gbnVsbCkgewogICAgICAgICAgICAgICAgRmll\nbGRNZXRhRGF0YVtdIGZtZHMgPSBfdm1kLmdldEVtYmVkZGVkTWV0YURhdGEo\nKS5nZXRGaWVsZHMoKTsKICAgICAgICAgICAgICAgIF9mdWxsID0gbmV3IEJp\ndFNldChmbWRzLmxlbmd0aCk7CiAgICAgICAgICAgICAgICBmb3IgKGludCBp\nID0gMDsgaSA8IGZtZHMubGVuZ3RoOyBpKyspCiAgICAgICAgICAgICAgICAg\nICAgX2Z1bGwuc2V0KGkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJl\ndHVybiBfZnVsbDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBCaXRTZXQg\nZ2V0RGlydHkoKSB7CiAgICAgICAgICAgIC8vIGNvbnNpZGVyIGV2ZXJ5dGhp\nbmcgZGlydHkKICAgICAgICAgICAgaWYgKF9mdWxsID09IG51bGwpIHsKICAg\nICAgICAgICAgICAgIEZpZWxkTWV0YURhdGFbXSBmbWRzID0gX3ZtZC5nZXRF\nbWJlZGRlZE1ldGFEYXRhKCkuZ2V0RmllbGRzKCk7CiAgICAgICAgICAgICAg\nICBfZnVsbCA9IG5ldyBCaXRTZXQoZm1kcy5sZW5ndGgpOwogICAgICAgICAg\nICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBmbWRzLmxlbmd0aDsgaSsrKQog\nICAgICAgICAgICAgICAgICAgIF9mdWxsLnNldChpKTsKICAgICAgICAgICAg\nfQogICAgICAgICAgICByZXR1cm4gX2Z1bGw7CiAgICAgICAgfQoKICAgICAg\nICBwdWJsaWMgQml0U2V0IGdldEZsdXNoZWQoKSB7CiAgICAgICAgICAgIHJl\ndHVybiBFTVBUWV9CSVRTRVQ7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMg\nQml0U2V0IGdldFVubG9hZGVkKEZldGNoQ29uZmlndXJhdGlvbiBmZXRjaCkg\newogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsK\nICAgICAgICB9CgogICAgICAgIHB1YmxpYyBPYmplY3QgbmV3UHJveHkoaW50\nIGZpZWxkKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2Vw\ndGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIE9iamVjdCBuZXdG\naWVsZFByb3h5KGludCBmaWVsZCkgewogICAgICAgICAgICB0aHJvdyBuZXcg\nSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1Ymxp\nYyBib29sZWFuIGlzRGVmYXVsdFZhbHVlKGludCBmaWVsZCkgewogICAgICAg\nICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBT\ndG9yZUNvbnRleHQgZ2V0Q29udGV4dCgpIHsKICAgICAgICAgICAgcmV0dXJu\nIF9vd25lci5nZXRDb250ZXh0KCk7CiAgICAgICAgfQoKICAgICAgICBwdWJs\naWMgT2JqZWN0IGdldElkKCkgewogICAgICAgICAgICByZXR1cm4gX293bmVy\nLmdldElkKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgT2JqZWN0IGdl\ndE9iamVjdElkKCkgewogICAgICAgICAgICByZXR1cm4gX293bmVyLmdldE9i\namVjdElkKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBzZXRP\nYmplY3RJZChPYmplY3Qgb2lkKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJ\nbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIE9iamVjdCBnZXRMb2NrKCkgewogICAgICAgICAgICByZXR1cm4gbnVsbDsK\nICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHNldExvY2soT2JqZWN0\nIGxvY2spIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0\naW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgT2JqZWN0IGdldFZl\ncnNpb24oKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0K\nCiAgICAgICAgcHVibGljIHZvaWQgc2V0VmVyc2lvbihPYmplY3QgdmVyc2lv\nbikgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24o\nKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHNldE5leHRWZXJz\naW9uKE9iamVjdCB2ZXJzaW9uKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJ\nbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIFBDU3RhdGUgZ2V0UENTdGF0ZSgpIHsKICAgICAgICAgICAgcmV0dXJuIChf\nb3duZXIuaXNEZWxldGVkKCkpID8gUENTdGF0ZS5FREVMRVRFRCA6IFBDU3Rh\ndGUuRUNPUFk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgT2JqZWN0IGdl\ndEltcGxEYXRhKCkgewogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAg\nICB9CgogICAgICAgIHB1YmxpYyBPYmplY3Qgc2V0SW1wbERhdGEoT2JqZWN0\nIGRhdGEsIGJvb2xlYW4gY2FjaGVhYmxlKSB7CiAgICAgICAgICAgIHRocm93\nIG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAg\ncHVibGljIGJvb2xlYW4gaXNJbXBsRGF0YUNhY2hlYWJsZSgpIHsKICAgICAg\nICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIE9iamVjdCBnZXRJbXBsRGF0YShpbnQgZmllbGQpIHsKICAgICAgICAgICAg\ncmV0dXJuIG51bGw7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgT2JqZWN0\nIHNldEltcGxEYXRhKGludCBmaWVsZCwgT2JqZWN0IGRhdGEpIHsKICAgICAg\nICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAg\nfQoKICAgICAgICBwdWJsaWMgYm9vbGVhbiBpc0ltcGxEYXRhQ2FjaGVhYmxl\nKGludCBmaWVsZCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAg\nICAgfQoKICAgICAgICBwdWJsaWMgT2JqZWN0IGdldEludGVybWVkaWF0ZShp\nbnQgZmllbGQpIHsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAg\nfQoKICAgICAgICBwdWJsaWMgdm9pZCBzZXRJbnRlcm1lZGlhdGUoaW50IGZp\nZWxkLCBPYmplY3QgdmFsdWUpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IElu\ndGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMg\nYm9vbGVhbiBmZXRjaEJvb2xlYW5GaWVsZChpbnQgZmllbGQpIHsKICAgICAg\nICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIGJ5dGUgZmV0Y2hCeXRlRmllbGQoaW50IGZpZWxkKSB7CiAgICAgICAgICAg\nIHJldHVybiAoYnl0ZSkgMDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBj\naGFyIGZldGNoQ2hhckZpZWxkKGludCBmaWVsZCkgewogICAgICAgICAgICBy\nZXR1cm4gKGNoYXIpIDA7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgZG91\nYmxlIGZldGNoRG91YmxlRmllbGQoaW50IGZpZWxkKSB7CiAgICAgICAgICAg\nIHJldHVybiAwRDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBmbG9hdCBm\nZXRjaEZsb2F0RmllbGQoaW50IGZpZWxkKSB7CiAgICAgICAgICAgIHJldHVy\nbiAwRjsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBpbnQgZmV0Y2hJbnRG\naWVsZChpbnQgZmllbGQpIHsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAg\nICAgfQoKICAgICAgICBwdWJsaWMgbG9uZyBmZXRjaExvbmdGaWVsZChpbnQg\nZmllbGQpIHsKICAgICAgICAgICAgcmV0dXJuIDBMOwogICAgICAgIH0KCiAg\nICAgICAgcHVibGljIE9iamVjdCBmZXRjaE9iamVjdEZpZWxkKGludCBmaWVs\nZCkgewogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CgogICAg\nICAgIHB1YmxpYyBzaG9ydCBmZXRjaFNob3J0RmllbGQoaW50IGZpZWxkKSB7\nCiAgICAgICAgICAgIHJldHVybiAoc2hvcnQpIDA7CiAgICAgICAgfQoKICAg\nICAgICBwdWJsaWMgU3RyaW5nIGZldGNoU3RyaW5nRmllbGQoaW50IGZpZWxk\nKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KCiAgICAg\nICAgcHVibGljIE9iamVjdCBmZXRjaEZpZWxkKGludCBmaWVsZCwgYm9vbGVh\nbiB0cmFuc2l0aW9ucykgewogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAg\nICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHN0b3JlQm9vbGVhbkZpZWxk\nKGludCBmaWVsZCwgYm9vbGVhbiBleHRlcm5hbFZhbCkgewogICAgICAgICAg\nICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9Cgog\nICAgICAgIHB1YmxpYyB2b2lkIHN0b3JlQnl0ZUZpZWxkKGludCBmaWVsZCwg\nYnl0ZSBleHRlcm5hbFZhbCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50\nZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2\nb2lkIHN0b3JlQ2hhckZpZWxkKGludCBmaWVsZCwgY2hhciBleHRlcm5hbFZh\nbCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24o\nKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHN0b3JlRG91Ymxl\nRmllbGQoaW50IGZpZWxkLCBkb3VibGUgZXh0ZXJuYWxWYWwpIHsKICAgICAg\nICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAg\nfQoKICAgICAgICBwdWJsaWMgdm9pZCBzdG9yZUZsb2F0RmllbGQoaW50IGZp\nZWxkLCBmbG9hdCBleHRlcm5hbFZhbCkgewogICAgICAgICAgICB0aHJvdyBu\nZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1\nYmxpYyB2b2lkIHN0b3JlSW50RmllbGQoaW50IGZpZWxkLCBpbnQgZXh0ZXJu\nYWxWYWwpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0\naW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBzdG9yZUxv\nbmdGaWVsZChpbnQgZmllbGQsIGxvbmcgZXh0ZXJuYWxWYWwpIHsKICAgICAg\nICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAg\nfQoKICAgICAgICBwdWJsaWMgdm9pZCBzdG9yZU9iamVjdEZpZWxkKGludCBm\naWVsZCwgT2JqZWN0IGV4dGVybmFsVmFsKSB7CiAgICAgICAgICAgIHRocm93\nIG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAg\ncHVibGljIHZvaWQgc3RvcmVTaG9ydEZpZWxkKGludCBmaWVsZCwgc2hvcnQg\nZXh0ZXJuYWxWYWwpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFs\nRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBz\ndG9yZVN0cmluZ0ZpZWxkKGludCBmaWVsZCwgU3RyaW5nIGV4dGVybmFsVmFs\nKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigp\nOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc3RvcmVGaWVsZChp\nbnQgZmllbGQsIE9iamVjdCB2YWx1ZSkgewogICAgICAgICAgICB0aHJvdyBu\nZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1\nYmxpYyBib29sZWFuIGZldGNoQm9vbGVhbihpbnQgZmllbGQpIHsKICAgICAg\nICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIGJ5dGUgZmV0Y2hCeXRlKGludCBmaWVsZCkgewogICAgICAgICAgICByZXR1\ncm4gKGJ5dGUpIDA7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgY2hhciBm\nZXRjaENoYXIoaW50IGZpZWxkKSB7CiAgICAgICAgICAgIHJldHVybiAoY2hh\ncikgMDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBkb3VibGUgZmV0Y2hE\nb3VibGUoaW50IGZpZWxkKSB7CiAgICAgICAgICAgIHJldHVybiAwRDsKICAg\nICAgICB9CgogICAgICAgIHB1YmxpYyBmbG9hdCBmZXRjaEZsb2F0KGludCBm\naWVsZCkgewogICAgICAgICAgICByZXR1cm4gMEY7CiAgICAgICAgfQoKICAg\nICAgICBwdWJsaWMgaW50IGZldGNoSW50KGludCBmaWVsZCkgewogICAgICAg\nICAgICByZXR1cm4gMDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBsb25n\nIGZldGNoTG9uZyhpbnQgZmllbGQpIHsKICAgICAgICAgICAgcmV0dXJuIDBM\nOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIE9iamVjdCBmZXRjaE9iamVj\ndChpbnQgZmllbGQpIHsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAg\nICAgfQoKICAgICAgICBwdWJsaWMgc2hvcnQgZmV0Y2hTaG9ydChpbnQgZmll\nbGQpIHsKICAgICAgICAgICAgcmV0dXJuIChzaG9ydCkgMDsKICAgICAgICB9\nCgogICAgICAgIHB1YmxpYyBTdHJpbmcgZmV0Y2hTdHJpbmcoaW50IGZpZWxk\nKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KCiAgICAg\nICAgcHVibGljIE9iamVjdCBmZXRjaChpbnQgZmllbGQpIHsKICAgICAgICAg\nICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9p\nZCBzdG9yZUJvb2xlYW4oaW50IGZpZWxkLCBib29sZWFuIGV4dGVybmFsVmFs\nKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigp\nOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc3RvcmVCeXRlKGlu\ndCBmaWVsZCwgYnl0ZSBleHRlcm5hbFZhbCkgewogICAgICAgICAgICB0aHJv\ndyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAg\nIHB1YmxpYyB2b2lkIHN0b3JlQ2hhcihpbnQgZmllbGQsIGNoYXIgZXh0ZXJu\nYWxWYWwpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0\naW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBzdG9yZURv\ndWJsZShpbnQgZmllbGQsIGRvdWJsZSBleHRlcm5hbFZhbCkgewogICAgICAg\nICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9\nCgogICAgICAgIHB1YmxpYyB2b2lkIHN0b3JlRmxvYXQoaW50IGZpZWxkLCBm\nbG9hdCBleHRlcm5hbFZhbCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50\nZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2\nb2lkIHN0b3JlSW50KGludCBmaWVsZCwgaW50IGV4dGVybmFsVmFsKSB7CiAg\nICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwogICAg\nICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc3RvcmVMb25nKGludCBmaWVs\nZCwgbG9uZyBleHRlcm5hbFZhbCkgewogICAgICAgICAgICB0aHJvdyBuZXcg\nSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1Ymxp\nYyB2b2lkIHN0b3JlT2JqZWN0KGludCBmaWVsZCwgT2JqZWN0IGV4dGVybmFs\nVmFsKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlv\nbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc3RvcmVTaG9y\ndChpbnQgZmllbGQsIHNob3J0IGV4dGVybmFsVmFsKSB7CiAgICAgICAgICAg\nIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAg\nICAgICAgcHVibGljIHZvaWQgc3RvcmVTdHJpbmcoaW50IGZpZWxkLCBTdHJp\nbmcgZXh0ZXJuYWxWYWwpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVy\nbmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9p\nZCBzdG9yZShpbnQgZmllbGQsIE9iamVjdCB2YWx1ZSkgewogICAgICAgICAg\nICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9Cgog\nICAgICAgIHB1YmxpYyBPYmplY3QgZmV0Y2hJbml0aWFsRmllbGQoaW50IGZp\nZWxkKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlv\nbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgZGlydHkoaW50\nIGZpZWxkKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2Vw\ndGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgcmVtb3Zl\nZChpbnQgZmllbGQsIE9iamVjdCByZW1vdmVkLCBib29sZWFuIGtleSkgewog\nICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAg\nICAgICB9CgogICAgICAgIHB1YmxpYyBib29sZWFuIGJlZm9yZVJlZnJlc2go\nYm9vbGVhbiByZWZyZXNoQWxsKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJ\nbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIHZvaWQgc2V0UmVtb3RlKGludCBmaWVsZCwgT2JqZWN0IHZhbHVlKSB7CiAg\nICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwogICAg\nICAgIH0KCiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLwogICAgICAgIC8vIFN0YXRlTWFuYWdlciBpbXBsZW1lbnRhdGlvbgogICAg\nICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICAgICAg\ncHVibGljIE9iamVjdCBnZXRQQ1ByaW1hcnlLZXkoT2JqZWN0IG9pZCwgaW50\nIGZpZWxkKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2Vw\ndGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIFN0YXRlTWFuYWdl\nciByZXBsYWNlU3RhdGVNYW5hZ2VyKFN0YXRlTWFuYWdlciBzbSkgewogICAg\nICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAg\nICB9CgogICAgICAgIHB1YmxpYyBPYmplY3QgZ2V0R2VuZXJpY0NvbnRleHQo\nKSB7CiAgICAgICAgICAgIHJldHVybiBnZXRDb250ZXh0KCk7CiAgICAgICAg\nfQoKICAgICAgICBwdWJsaWMgdm9pZCBkaXJ0eShTdHJpbmcgZmllbGQpIHsK\nICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAg\nICAgICAgfQoKICAgICAgICBwdWJsaWMgT2JqZWN0IGZldGNoT2JqZWN0SWQo\nKSB7CiAgICAgICAgICAgIHJldHVybiBnZXRPYmplY3RJZCgpOwogICAgICAg\nIH0KCiAgICAgICAgcHVibGljIHZvaWQgYWNjZXNzaW5nRmllbGQoaW50IGZp\nZWxkKSB7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgYm9vbGVhbiBzZXJp\nYWxpemluZygpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhj\nZXB0aW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgYm9vbGVhbiB3\ncml0ZURldGFjaGVkKE9iamVjdE91dHB1dCBvdXQpIHsKICAgICAgICAgICAg\ndGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAg\nICAgICBwdWJsaWMgdm9pZCBwcm94eURldGFjaGVkRGVzZXJpYWxpemVkKGlu\ndCBpZHgpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0\naW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBzZXR0aW5n\nQm9vbGVhbkZpZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywgaW50IGZpZWxk\nLAogICAgICAgICAgICBib29sZWFuIHZhbDEsIGJvb2xlYW4gdmFsMiwgaW50\nIHNldCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRp\nb24oKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHNldHRpbmdD\naGFyRmllbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgZmllbGQsCiAg\nICAgICAgICAgIGNoYXIgdmFsMSwgY2hhciB2YWwyLCBpbnQgc2V0KSB7CiAg\nICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwogICAg\nICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc2V0dGluZ0J5dGVGaWVsZChQ\nZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGludCBmaWVsZCwKICAgICAgICAgICAg\nYnl0ZSB2YWwxLCBieXRlIHZhbDIsIGludCBzZXQpIHsKICAgICAgICAgICAg\ndGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAg\nICAgICBwdWJsaWMgdm9pZCBzZXR0aW5nU2hvcnRGaWVsZChQZXJzaXN0ZW5j\nZUNhcGFibGUgcGMsIGludCBmaWVsZCwKICAgICAgICAgICAgc2hvcnQgdmFs\nMSwgc2hvcnQgdmFsMiwgaW50IHNldCkgewogICAgICAgICAgICB0aHJvdyBu\nZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1\nYmxpYyB2b2lkIHNldHRpbmdJbnRGaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUg\ncGMsIGludCBmaWVsZCwKICAgICAgICAgICAgaW50IHZhbDEsIGludCB2YWwy\nLCBpbnQgc2V0KSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4\nY2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc2V0\ndGluZ0xvbmdGaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGludCBmaWVs\nZCwKICAgICAgICAgICAgbG9uZyB2YWwxLCBsb25nIHZhbDIsIGludCBzZXQp\nIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7\nCiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBzZXR0aW5nRmxvYXRG\naWVsZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGludCBmaWVsZCwKICAgICAg\nICAgICAgZmxvYXQgdmFsMSwgZmxvYXQgdmFsMiwgaW50IHNldCkgewogICAg\nICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAg\nICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHNldHRpbmdEb3VibGVGaWVsZChQ\nZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGludCBmaWVsZCwKICAgICAgICAgICAg\nZG91YmxlIHZhbDEsIGRvdWJsZSB2YWwyLCBpbnQgc2V0KSB7CiAgICAgICAg\nICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0K\nCiAgICAgICAgcHVibGljIHZvaWQgc2V0dGluZ1N0cmluZ0ZpZWxkKFBlcnNp\nc3RlbmNlQ2FwYWJsZSBwYywgaW50IGZpZWxkLAogICAgICAgICAgICBTdHJp\nbmcgdmFsMSwgU3RyaW5nIHZhbDIsIGludCBzZXQpIHsKICAgICAgICAgICAg\ndGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAg\nICAgICBwdWJsaWMgdm9pZCBzZXR0aW5nT2JqZWN0RmllbGQoUGVyc2lzdGVu\nY2VDYXBhYmxlIHBjLCBpbnQgZmllbGQsCiAgICAgICAgICAgIE9iamVjdCB2\nYWwxLCBPYmplY3QgdmFsMiwgaW50IHNldCkgewogICAgICAgICAgICB0aHJv\ndyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAg\nIHB1YmxpYyB2b2lkIHByb3ZpZGVkQm9vbGVhbkZpZWxkKFBlcnNpc3RlbmNl\nQ2FwYWJsZSBwYywgaW50IGZpZWxkLAogICAgICAgICAgICBib29sZWFuIHZh\nbCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24o\nKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHByb3ZpZGVkQ2hh\nckZpZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywgaW50IGZpZWxkLAogICAg\nICAgICAgICBjaGFyIHZhbCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50\nZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2\nb2lkIHByb3ZpZGVkQnl0ZUZpZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywg\naW50IGZpZWxkLAogICAgICAgICAgICBieXRlIHZhbCkgewogICAgICAgICAg\nICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9Cgog\nICAgICAgIHB1YmxpYyB2b2lkIHByb3ZpZGVkU2hvcnRGaWVsZChQZXJzaXN0\nZW5jZUNhcGFibGUgcGMsIGludCBmaWVsZCwKICAgICAgICAgICAgc2hvcnQg\ndmFsKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlv\nbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgcHJvdmlkZWRJ\nbnRGaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGludCBmaWVsZCwKICAg\nICAgICAgICAgaW50IHZhbCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50\nZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2\nb2lkIHByb3ZpZGVkTG9uZ0ZpZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywg\naW50IGZpZWxkLAogICAgICAgICAgICBsb25nIHZhbCkgewogICAgICAgICAg\nICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9Cgog\nICAgICAgIHB1YmxpYyB2b2lkIHByb3ZpZGVkRmxvYXRGaWVsZChQZXJzaXN0\nZW5jZUNhcGFibGUgcGMsIGludCBmaWVsZCwKICAgICAgICAgICAgZmxvYXQg\ndmFsKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlv\nbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgcHJvdmlkZWRE\nb3VibGVGaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGludCBmaWVsZCwK\nICAgICAgICAgICAgZG91YmxlIHZhbCkgewogICAgICAgICAgICB0aHJvdyBu\nZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1\nYmxpYyB2b2lkIHByb3ZpZGVkU3RyaW5nRmllbGQoUGVyc2lzdGVuY2VDYXBh\nYmxlIHBjLCBpbnQgZmllbGQsCiAgICAgICAgICAgIFN0cmluZyB2YWwpIHsK\nICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAg\nICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBwcm92aWRlZE9iamVjdEZp\nZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywgaW50IGZpZWxkLAogICAgICAg\nICAgICBPYmplY3QgdmFsKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnRl\ncm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIGJv\nb2xlYW4gcmVwbGFjZUJvb2xlYW5GaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUg\ncGMsIGludCBmaWVsZCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJu\nYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBjaGFy\nIHJlcGxhY2VDaGFyRmllbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQg\nZmllbGQpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0\naW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgYnl0ZSByZXBsYWNl\nQnl0ZUZpZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywgaW50IGZpZWxkKSB7\nCiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwog\nICAgICAgIH0KCiAgICAgICAgcHVibGljIHNob3J0IHJlcGxhY2VTaG9ydEZp\nZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywgaW50IGZpZWxkKSB7CiAgICAg\nICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAg\nIH0KCiAgICAgICAgcHVibGljIGludCByZXBsYWNlSW50RmllbGQoUGVyc2lz\ndGVuY2VDYXBhYmxlIHBjLCBpbnQgZmllbGQpIHsKICAgICAgICAgICAgdGhy\nb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAgICAg\nICBwdWJsaWMgbG9uZyByZXBsYWNlTG9uZ0ZpZWxkKFBlcnNpc3RlbmNlQ2Fw\nYWJsZSBwYywgaW50IGZpZWxkKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJ\nbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIGZsb2F0IHJlcGxhY2VGbG9hdEZpZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBw\nYywgaW50IGZpZWxkKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5h\nbEV4Y2VwdGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIGRvdWJs\nZSByZXBsYWNlRG91YmxlRmllbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBp\nbnQgZmllbGQpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhj\nZXB0aW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgU3RyaW5nIHJl\ncGxhY2VTdHJpbmdGaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGludCBm\naWVsZCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRp\nb24oKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBPYmplY3QgcmVwbGFj\nZU9iamVjdEZpZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywgaW50IGZpZWxk\nKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigp\nOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFNwZWNpYWwgcm93\nIG1hbmFnZXIgdHlwZSB0aGF0IHVud3JhcHMgZW1iZWRkZWQgb2JqZWN0cy4K\nICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgY2xhc3MgRW1iZWRkZWRSb3dN\nYW5hZ2VyCiAgICAgICAgaW1wbGVtZW50cyBSb3dNYW5hZ2VyIHsKCiAgICAg\nICAgcHJpdmF0ZSBmaW5hbCBSb3dNYW5hZ2VyIF9ybTsKICAgICAgICBwcml2\nYXRlIGZpbmFsIFJvdyBfcm93OwoKICAgICAgICBwdWJsaWMgRW1iZWRkZWRS\nb3dNYW5hZ2VyKFJvd01hbmFnZXIgZGVsZWdhdGUsIFJvdyByb3cpIHsKICAg\nICAgICAgICAgX3JtID0gZGVsZWdhdGU7CiAgICAgICAgICAgIF9yb3cgPSAo\ncm93ID09IG51bGwpID8gbnVsbCA6IG5ldyBFbWJlZGRlZFJvdyhyb3cpOwog\nICAgICAgIH0KCiAgICAgICAgcHVibGljIGJvb2xlYW4gaGFzQXV0b0Fzc2ln\nbkNvbnN0cmFpbnRzKCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAg\nICAgICAgfQoKICAgICAgICBwdWJsaWMgQ29sbGVjdGlvbiBnZXRJbnNlcnRz\nKCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24o\nKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBDb2xsZWN0aW9uIGdldFVw\nZGF0ZXMoKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2Vw\ndGlvbigpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIENvbGxlY3Rpb24g\nZ2V0RGVsZXRlcygpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFs\nRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgQ29sbGVj\ndGlvbiBnZXRTZWNvbmRhcnlVcGRhdGVzKCkgewogICAgICAgICAgICB0aHJv\ndyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAg\nIHB1YmxpYyBDb2xsZWN0aW9uIGdldFNlY29uZGFyeURlbGV0ZXMoKSB7CiAg\nICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwogICAg\nICAgIH0KCiAgICAgICAgcHVibGljIENvbGxlY3Rpb24gZ2V0QWxsUm93VXBk\nYXRlcygpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0\naW9uKCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgQ29sbGVjdGlvbiBn\nZXRBbGxSb3dEZWxldGVzKCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50\nZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBS\nb3cgZ2V0Um93KFRhYmxlIHRhYmxlLCBpbnQgYWN0aW9uLCBPcGVuSlBBU3Rh\ndGVNYW5hZ2VyIHNtLAogICAgICAgICAgICBib29sZWFuIGNyZWF0ZSkgewog\nICAgICAgICAgICB3aGlsZSAoc20gIT0gbnVsbCAmJiBzbS5nZXRPd25lcigp\nICE9IG51bGwpCiAgICAgICAgICAgICAgICBzbSA9IHNtLmdldE93bmVyKCk7\nCiAgICAgICAgICAgIGlmIChfcm93ICE9IG51bGwgJiYgdGFibGUgPT0gX3Jv\ndy5nZXRUYWJsZSgpCiAgICAgICAgICAgICAgICAmJiBhY3Rpb24gPT0gX3Jv\ndy5nZXRBY3Rpb24oKSkKICAgICAgICAgICAgICAgIHJldHVybiBfcm93Owog\nICAgICAgICAgICByZXR1cm4gbmV3IEVtYmVkZGVkUm93KF9ybS5nZXRSb3co\ndGFibGUsIGFjdGlvbiwgc20sIGNyZWF0ZSkpOwogICAgICAgIH0KCiAgICAg\nICAgcHVibGljIFJvdyBnZXRTZWNvbmRhcnlSb3coVGFibGUgdGFibGUsIGlu\ndCBhY3Rpb24pIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBFbWJlZGRlZFJv\ndyhfcm0uZ2V0U2Vjb25kYXJ5Um93KHRhYmxlLCBhY3Rpb24pKTsKICAgICAg\nICB9CgogICAgICAgIHB1YmxpYyB2b2lkIGZsdXNoU2Vjb25kYXJ5Um93KFJv\ndyByb3cpCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAg\nICAgICAgICBfcm0uZmx1c2hTZWNvbmRhcnlSb3coKChFbWJlZGRlZFJvdykg\ncm93KS5nZXREZWxlZ2F0ZSgpKTsKICAgICAgICB9CgogICAgICAgIHB1Ymxp\nYyBSb3cgZ2V0QWxsUm93cyhUYWJsZSB0YWJsZSwgaW50IGFjdGlvbikgewog\nICAgICAgICAgICByZXR1cm4gbmV3IEVtYmVkZGVkUm93KF9ybS5nZXRBbGxS\nb3dzKHRhYmxlLCBhY3Rpb24pKTsKICAgICAgICB9CgogICAgICAgIHB1Ymxp\nYyB2b2lkIGZsdXNoQWxsUm93cyhSb3cgcm93KQogICAgICAgICAgICB0aHJv\nd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3JtLmZsdXNoQWxsUm93\ncygoKEVtYmVkZGVkUm93KSByb3cpLmdldERlbGVnYXRlKCkpOwogICAgICAg\nIH0KICAgIH0KCiAgICAvKioKICAgICAqIFNwZWNpYWwgcm93IHR5cGUgdGhh\ndCB1bndyYXBzIGVtYmVkZGVkIG9iamVjdHMuCiAgICAgKi8KICAgIHByaXZh\ndGUgc3RhdGljIGNsYXNzIEVtYmVkZGVkUm93CiAgICAgICAgaW1wbGVtZW50\ncyBSb3cgewoKICAgICAgICBwcml2YXRlIGZpbmFsIFJvdyBfcm93OwoKICAg\nICAgICBwdWJsaWMgRW1iZWRkZWRSb3coUm93IGRlbGVnYXRlKSB7CiAgICAg\nICAgICAgIF9yb3cgPSBkZWxlZ2F0ZTsKICAgICAgICB9CgogICAgICAgIHB1\nYmxpYyBSb3cgZ2V0RGVsZWdhdGUoKSB7CiAgICAgICAgICAgIHJldHVybiBf\ncm93OwogICAgICAgIH0KCiAgICAgICAgcHVibGljIGJvb2xlYW4gaXNWYWxp\nZCgpIHsKICAgICAgICAgICAgcmV0dXJuIF9yb3cuaXNWYWxpZCgpOwogICAg\nICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc2V0VmFsaWQoYm9vbGVhbiB2\nYWxpZCkgewogICAgICAgICAgICBfcm93LnNldFZhbGlkKHZhbGlkKTsKICAg\nICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHNldFByaW1hcnlLZXkoT3Bl\nbkpQQVN0YXRlTWFuYWdlciBzbSkKICAgICAgICAgICAgdGhyb3dzIFNRTEV4\nY2VwdGlvbiB7CiAgICAgICAgICAgIF9yb3cuc2V0UHJpbWFyeUtleShnZXRP\nd25lcihzbSkpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc2V0\nUHJpbWFyeUtleShDb2x1bW5JTyBpbywgT3BlbkpQQVN0YXRlTWFuYWdlciBz\nbSkKICAgICAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAg\nICAgIF9yb3cuc2V0UHJpbWFyeUtleShpbywgZ2V0T3duZXIoc20pKTsKICAg\nICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHdoZXJlUHJpbWFyeUtleShP\ncGVuSlBBU3RhdGVNYW5hZ2VyIHNtKQogICAgICAgICAgICB0aHJvd3MgU1FM\nRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy53aGVyZVByaW1hcnlLZXko\nZ2V0T3duZXIoc20pKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lk\nIHNldEZvcmVpZ25LZXkoRm9yZWlnbktleSBmaywgT3BlbkpQQVN0YXRlTWFu\nYWdlciBzbSkKICAgICAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAg\nICAgICAgICAgIF9yb3cuc2V0Rm9yZWlnbktleShmaywgZ2V0T3duZXIoc20p\nKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHNldEZvcmVpZ25L\nZXkoRm9yZWlnbktleSBmaywgQ29sdW1uSU8gaW8sCiAgICAgICAgICAgIE9w\nZW5KUEFTdGF0ZU1hbmFnZXIgc20pCiAgICAgICAgICAgIHRocm93cyBTUUxF\neGNlcHRpb24gewogICAgICAgICAgICBfcm93LnNldEZvcmVpZ25LZXkoZmss\nIGlvLCBnZXRPd25lcihzbSkpOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIHZvaWQgd2hlcmVGb3JlaWduS2V5KEZvcmVpZ25LZXkgZmssIE9wZW5KUEFT\ndGF0ZU1hbmFnZXIgc20pCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRp\nb24gewogICAgICAgICAgICBfcm93LndoZXJlRm9yZWlnbktleShmaywgZ2V0\nT3duZXIoc20pKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHNl\ndFJlbGF0aW9uSWQoQ29sdW1uIGNvbCwgT3BlbkpQQVN0YXRlTWFuYWdlciBz\nbSwKICAgICAgICAgICAgUmVsYXRpb25JZCByZWwpCiAgICAgICAgICAgIHRo\ncm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBfcm93LnNldFJlbGF0\naW9uSWQoY29sLCBnZXRPd25lcihzbSksIHJlbCk7CiAgICAgICAgfQoKICAg\nICAgICBwcml2YXRlIE9wZW5KUEFTdGF0ZU1hbmFnZXIgZ2V0T3duZXIoT3Bl\nbkpQQVN0YXRlTWFuYWdlciBzbSkgewogICAgICAgICAgICB3aGlsZSAoc20g\nIT0gbnVsbCAmJiBzbS5nZXRPd25lcigpICE9IG51bGwpCiAgICAgICAgICAg\nICAgICBzbSA9IHNtLmdldE93bmVyKCk7CiAgICAgICAgICAgIHJldHVybiBz\nbTsKICAgICAgICB9CgogICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLwogICAgICAgIC8vIFBhc3MtdGhyb3VnaCBtZXRob2RzCiAgICAgICAgLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgogICAgICAgIHB1YmxpYyBUYWJsZSBn\nZXRUYWJsZSgpIHsKICAgICAgICAgICAgcmV0dXJuIF9yb3cuZ2V0VGFibGUo\nKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBpbnQgZ2V0QWN0aW9uKCkg\newogICAgICAgICAgICByZXR1cm4gX3Jvdy5nZXRBY3Rpb24oKTsKICAgICAg\nICB9CgogICAgICAgIHB1YmxpYyBPYmplY3QgZ2V0RmFpbGVkT2JqZWN0KCkg\newogICAgICAgICAgICByZXR1cm4gX3Jvdy5nZXRGYWlsZWRPYmplY3QoKTsK\nICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHNldEZhaWxlZE9iamVj\ndChPYmplY3QgZmFpbGVkKSB7CiAgICAgICAgICAgIF9yb3cuc2V0RmFpbGVk\nT2JqZWN0KGZhaWxlZCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgT3Bl\nbkpQQVN0YXRlTWFuYWdlciBnZXRQcmltYXJ5S2V5KCkgewogICAgICAgICAg\nICByZXR1cm4gX3Jvdy5nZXRQcmltYXJ5S2V5KCk7CiAgICAgICAgfQoKICAg\nICAgICBwdWJsaWMgdm9pZCBzZXRBcnJheShDb2x1bW4gY29sLCBBcnJheSB2\nYWwpCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAg\nICAgICBfcm93LnNldEFycmF5KGNvbCwgdmFsKTsKICAgICAgICB9CgogICAg\nICAgIHB1YmxpYyB2b2lkIHNldEFzY2lpU3RyZWFtKENvbHVtbiBjb2wsIElu\ncHV0U3RyZWFtIHZhbCwgaW50IGxlbmd0aCkKICAgICAgICAgICAgdGhyb3dz\nIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIF9yb3cuc2V0QXNjaWlTdHJl\nYW0oY29sLCB2YWwsIGxlbmd0aCk7CiAgICAgICAgfQoKICAgICAgICBwdWJs\naWMgdm9pZCBzZXRCaWdEZWNpbWFsKENvbHVtbiBjb2wsIEJpZ0RlY2ltYWwg\ndmFsKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAg\nICAgICAgX3Jvdy5zZXRCaWdEZWNpbWFsKGNvbCwgdmFsKTsKICAgICAgICB9\nCgogICAgICAgIHB1YmxpYyB2b2lkIHNldEJpZ0ludGVnZXIoQ29sdW1uIGNv\nbCwgQmlnSW50ZWdlciB2YWwpCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNl\ncHRpb24gewogICAgICAgICAgICBfcm93LnNldEJpZ0ludGVnZXIoY29sLCB2\nYWwpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc2V0QmluYXJ5\nU3RyZWFtKENvbHVtbiBjb2wsIElucHV0U3RyZWFtIHZhbCwgaW50IGxlbmd0\naCkKICAgICAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAg\nICAgIF9yb3cuc2V0QmluYXJ5U3RyZWFtKGNvbCwgdmFsLCBsZW5ndGgpOwog\nICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc2V0QmxvYihDb2x1bW4g\nY29sLCBCbG9iIHZhbCkKICAgICAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlv\nbiB7CiAgICAgICAgICAgIF9yb3cuc2V0QmxvYihjb2wsIHZhbCk7CiAgICAg\nICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBzZXRCb29sZWFuKENvbHVtbiBj\nb2wsIGJvb2xlYW4gdmFsKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0\naW9uIHsKICAgICAgICAgICAgX3Jvdy5zZXRCb29sZWFuKGNvbCwgdmFsKTsK\nICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHNldEJ5dGUoQ29sdW1u\nIGNvbCwgYnl0ZSB2YWwpCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRp\nb24gewogICAgICAgICAgICBfcm93LnNldEJ5dGUoY29sLCB2YWwpOwogICAg\nICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc2V0Qnl0ZXMoQ29sdW1uIGNv\nbCwgYnl0ZVtdIHZhbCkKICAgICAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlv\nbiB7CiAgICAgICAgICAgIF9yb3cuc2V0Qnl0ZXMoY29sLCB2YWwpOwogICAg\nICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc2V0Q2FsZW5kYXIoQ29sdW1u\nIGNvbCwgQ2FsZW5kYXIgdmFsKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhj\nZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy5zZXRDYWxlbmRhcihjb2wsIHZh\nbCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBzZXRDaGFyKENv\nbHVtbiBjb2wsIGNoYXIgdmFsKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhj\nZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy5zZXRDaGFyKGNvbCwgdmFsKTsK\nICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHNldENoYXJhY3RlclN0\ncmVhbShDb2x1bW4gY29sLCBSZWFkZXIgdmFsLCBpbnQgbGVuZ3RoKQogICAg\nICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3Jv\ndy5zZXRDaGFyYWN0ZXJTdHJlYW0oY29sLCB2YWwsIGxlbmd0aCk7CiAgICAg\nICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBzZXRDbG9iKENvbHVtbiBjb2ws\nIENsb2IgdmFsKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsK\nICAgICAgICAgICAgX3Jvdy5zZXRDbG9iKGNvbCwgdmFsKTsKICAgICAgICB9\nCgogICAgICAgIHB1YmxpYyB2b2lkIHNldERhdGUoQ29sdW1uIGNvbCwgRGF0\nZSB2YWwpCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAg\nICAgICAgICBfcm93LnNldERhdGUoY29sLCB2YWwpOwogICAgICAgIH0KCiAg\nICAgICAgcHVibGljIHZvaWQgc2V0RGF0ZShDb2x1bW4gY29sLCBqYXZhLnNx\nbC5EYXRlIHZhbCwgQ2FsZW5kYXIgY2FsKQogICAgICAgICAgICB0aHJvd3Mg\nU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy5zZXREYXRlKGNvbCwg\ndmFsLCBjYWwpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc2V0\nRG91YmxlKENvbHVtbiBjb2wsIGRvdWJsZSB2YWwpCiAgICAgICAgICAgIHRo\ncm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBfcm93LnNldERvdWJs\nZShjb2wsIHZhbCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBz\nZXRGbG9hdChDb2x1bW4gY29sLCBmbG9hdCB2YWwpCiAgICAgICAgICAgIHRo\ncm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBfcm93LnNldEZsb2F0\nKGNvbCwgdmFsKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHNl\ndEludChDb2x1bW4gY29sLCBpbnQgdmFsKQogICAgICAgICAgICB0aHJvd3Mg\nU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy5zZXRJbnQoY29sLCB2\nYWwpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc2V0TG9uZyhD\nb2x1bW4gY29sLCBsb25nIHZhbCkKICAgICAgICAgICAgdGhyb3dzIFNRTEV4\nY2VwdGlvbiB7CiAgICAgICAgICAgIF9yb3cuc2V0TG9uZyhjb2wsIHZhbCk7\nCiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBzZXRMb2NhbGUoQ29s\ndW1uIGNvbCwgTG9jYWxlIHZhbCkKICAgICAgICAgICAgdGhyb3dzIFNRTEV4\nY2VwdGlvbiB7CiAgICAgICAgICAgIF9yb3cuc2V0TG9jYWxlKGNvbCwgdmFs\nKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHNldE51bGwoQ29s\ndW1uIGNvbCkKICAgICAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAg\nICAgICAgICAgIF9yb3cuc2V0TnVsbChjb2wpOwogICAgICAgIH0KCiAgICAg\nICAgcHVibGljIHZvaWQgc2V0TnVsbChDb2x1bW4gY29sLCBib29sZWFuIG92\nZXJyaWRlRGVmYXVsdCkKICAgICAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlv\nbiB7CiAgICAgICAgICAgIF9yb3cuc2V0TnVsbChjb2wsIG92ZXJyaWRlRGVm\nYXVsdCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBzZXROdW1i\nZXIoQ29sdW1uIGNvbCwgTnVtYmVyIHZhbCkKICAgICAgICAgICAgdGhyb3dz\nIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIF9yb3cuc2V0TnVtYmVyKGNv\nbCwgdmFsKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHNldE9i\namVjdChDb2x1bW4gY29sLCBPYmplY3QgdmFsKQogICAgICAgICAgICB0aHJv\nd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy5zZXRPYmplY3Qo\nY29sLCB2YWwpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc2V0\nUmF3KENvbHVtbiBjb2wsIFN0cmluZyB2YWwpCiAgICAgICAgICAgIHRocm93\ncyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBfcm93LnNldFJhdyhjb2ws\nIHZhbCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBzZXRTaG9y\ndChDb2x1bW4gY29sLCBzaG9ydCB2YWwpCiAgICAgICAgICAgIHRocm93cyBT\nUUxFeGNlcHRpb24gewogICAgICAgICAgICBfcm93LnNldFNob3J0KGNvbCwg\ndmFsKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHNldFN0cmlu\nZyhDb2x1bW4gY29sLCBTdHJpbmcgdmFsKQogICAgICAgICAgICB0aHJvd3Mg\nU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy5zZXRTdHJpbmcoY29s\nLCB2YWwpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc2V0VGlt\nZShDb2x1bW4gY29sLCBUaW1lIHZhbCwgQ2FsZW5kYXIgY2FsKQogICAgICAg\nICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy5z\nZXRUaW1lKGNvbCwgdmFsLCBjYWwpOwogICAgICAgIH0KCiAgICAgICAgcHVi\nbGljIHZvaWQgc2V0VGltZXN0YW1wKENvbHVtbiBjb2wsIFRpbWVzdGFtcCB2\nYWwsIENhbGVuZGFyIGNhbCkKICAgICAgICAgICAgdGhyb3dzIFNRTEV4Y2Vw\ndGlvbiB7CiAgICAgICAgICAgIF9yb3cuc2V0VGltZXN0YW1wKGNvbCwgdmFs\nLCBjYWwpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgd2hlcmVB\ncnJheShDb2x1bW4gY29sLCBBcnJheSB2YWwpCiAgICAgICAgICAgIHRocm93\ncyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBfcm93LndoZXJlQXJyYXko\nY29sLCB2YWwpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgd2hl\ncmVBc2NpaVN0cmVhbShDb2x1bW4gY29sLCBJbnB1dFN0cmVhbSB2YWwsIGlu\ndCBsZW5ndGgpCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewog\nICAgICAgICAgICBfcm93LndoZXJlQXNjaWlTdHJlYW0oY29sLCB2YWwsIGxl\nbmd0aCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCB3aGVyZUJp\nZ0RlY2ltYWwoQ29sdW1uIGNvbCwgQmlnRGVjaW1hbCB2YWwpCiAgICAgICAg\nICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBfcm93Lndo\nZXJlQmlnRGVjaW1hbChjb2wsIHZhbCk7CiAgICAgICAgfQoKICAgICAgICBw\ndWJsaWMgdm9pZCB3aGVyZUJpZ0ludGVnZXIoQ29sdW1uIGNvbCwgQmlnSW50\nZWdlciB2YWwpCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewog\nICAgICAgICAgICBfcm93LndoZXJlQmlnSW50ZWdlcihjb2wsIHZhbCk7CiAg\nICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCB3aGVyZUJpbmFyeVN0cmVh\nbShDb2x1bW4gY29sLCBJbnB1dFN0cmVhbSB2YWwsIGludCBsZW5ndGgpCiAg\nICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBf\ncm93LndoZXJlQmluYXJ5U3RyZWFtKGNvbCwgdmFsLCBsZW5ndGgpOwogICAg\nICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgd2hlcmVCbG9iKENvbHVtbiBj\nb2wsIEJsb2IgdmFsKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9u\nIHsKICAgICAgICAgICAgX3Jvdy53aGVyZUJsb2IoY29sLCB2YWwpOwogICAg\nICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgd2hlcmVCb29sZWFuKENvbHVt\nbiBjb2wsIGJvb2xlYW4gdmFsKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhj\nZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy53aGVyZUJvb2xlYW4oY29sLCB2\nYWwpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgd2hlcmVCeXRl\nKENvbHVtbiBjb2wsIGJ5dGUgdmFsKQogICAgICAgICAgICB0aHJvd3MgU1FM\nRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy53aGVyZUJ5dGUoY29sLCB2\nYWwpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgd2hlcmVCeXRl\ncyhDb2x1bW4gY29sLCBieXRlW10gdmFsKQogICAgICAgICAgICB0aHJvd3Mg\nU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy53aGVyZUJ5dGVzKGNv\nbCwgdmFsKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHdoZXJl\nQ2FsZW5kYXIoQ29sdW1uIGNvbCwgQ2FsZW5kYXIgdmFsKQogICAgICAgICAg\nICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy53aGVy\nZUNhbGVuZGFyKGNvbCwgdmFsKTsKICAgICAgICB9CgogICAgICAgIHB1Ymxp\nYyB2b2lkIHdoZXJlQ2hhcihDb2x1bW4gY29sLCBjaGFyIHZhbCkKICAgICAg\nICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIF9yb3cu\nd2hlcmVDaGFyKGNvbCwgdmFsKTsKICAgICAgICB9CgogICAgICAgIHB1Ymxp\nYyB2b2lkIHdoZXJlQ2hhcmFjdGVyU3RyZWFtKENvbHVtbiBjb2wsIFJlYWRl\nciB2YWwsIGludCBsZW5ndGgpCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNl\ncHRpb24gewogICAgICAgICAgICBfcm93LndoZXJlQ2hhcmFjdGVyU3RyZWFt\nKGNvbCwgdmFsLCBsZW5ndGgpOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIHZvaWQgd2hlcmVDbG9iKENvbHVtbiBjb2wsIENsb2IgdmFsKQogICAgICAg\nICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy53\naGVyZUNsb2IoY29sLCB2YWwpOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIHZvaWQgd2hlcmVEYXRlKENvbHVtbiBjb2wsIERhdGUgdmFsKQogICAgICAg\nICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy53\naGVyZURhdGUoY29sLCB2YWwpOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIHZvaWQgd2hlcmVEYXRlKENvbHVtbiBjb2wsIGphdmEuc3FsLkRhdGUgdmFs\nLCBDYWxlbmRhciBjYWwpCiAgICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRp\nb24gewogICAgICAgICAgICBfcm93LndoZXJlRGF0ZShjb2wsIHZhbCwgY2Fs\nKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHdoZXJlRG91Ymxl\nKENvbHVtbiBjb2wsIGRvdWJsZSB2YWwpCiAgICAgICAgICAgIHRocm93cyBT\nUUxFeGNlcHRpb24gewogICAgICAgICAgICBfcm93LndoZXJlRG91YmxlKGNv\nbCwgdmFsKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHdoZXJl\nRmxvYXQoQ29sdW1uIGNvbCwgZmxvYXQgdmFsKQogICAgICAgICAgICB0aHJv\nd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy53aGVyZUZsb2F0\nKGNvbCwgdmFsKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHdo\nZXJlSW50KENvbHVtbiBjb2wsIGludCB2YWwpCiAgICAgICAgICAgIHRocm93\ncyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBfcm93LndoZXJlSW50KGNv\nbCwgdmFsKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHdoZXJl\nTG9uZyhDb2x1bW4gY29sLCBsb25nIHZhbCkKICAgICAgICAgICAgdGhyb3dz\nIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIF9yb3cud2hlcmVMb25nKGNv\nbCwgdmFsKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHdoZXJl\nTG9jYWxlKENvbHVtbiBjb2wsIExvY2FsZSB2YWwpCiAgICAgICAgICAgIHRo\ncm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBfcm93LndoZXJlTG9j\nYWxlKGNvbCwgdmFsKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lk\nIHdoZXJlTnVsbChDb2x1bW4gY29sKQogICAgICAgICAgICB0aHJvd3MgU1FM\nRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy53aGVyZU51bGwoY29sKTsK\nICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHdoZXJlTnVtYmVyKENv\nbHVtbiBjb2wsIE51bWJlciB2YWwpCiAgICAgICAgICAgIHRocm93cyBTUUxF\neGNlcHRpb24gewogICAgICAgICAgICBfcm93LndoZXJlTnVtYmVyKGNvbCwg\ndmFsKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHdoZXJlT2Jq\nZWN0KENvbHVtbiBjb2wsIE9iamVjdCB2YWwpCiAgICAgICAgICAgIHRocm93\ncyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBfcm93LndoZXJlT2JqZWN0\nKGNvbCwgdmFsKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHdo\nZXJlUmF3KENvbHVtbiBjb2wsIFN0cmluZyB2YWwpCiAgICAgICAgICAgIHRo\ncm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBfcm93LndoZXJlUmF3\nKGNvbCwgdmFsKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lkIHdo\nZXJlU2hvcnQoQ29sdW1uIGNvbCwgc2hvcnQgdmFsKQogICAgICAgICAgICB0\naHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICAgICAgX3Jvdy53aGVyZVNo\nb3J0KGNvbCwgdmFsKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyB2b2lk\nIHdoZXJlU3RyaW5nKENvbHVtbiBjb2wsIFN0cmluZyB2YWwpCiAgICAgICAg\nICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBfcm93Lndo\nZXJlU3RyaW5nKGNvbCwgdmFsKTsKICAgICAgICB9CgogICAgICAgIHB1Ymxp\nYyB2b2lkIHdoZXJlVGltZShDb2x1bW4gY29sLCBUaW1lIHZhbCwgQ2FsZW5k\nYXIgY2FsKQogICAgICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAg\nICAgICAgICAgX3Jvdy53aGVyZVRpbWUoY29sLCB2YWwsIGNhbCk7CiAgICAg\nICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCB3aGVyZVRpbWVzdGFtcChDb2x1\nbW4gY29sLCBUaW1lc3RhbXAgdmFsLCBDYWxlbmRhciBjYWwpCiAgICAgICAg\nICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBfcm93Lndo\nZXJlVGltZXN0YW1wKGNvbCwgdmFsLCBjYWwpOwogICAgICAgIH0KICAgIH0K\nfQo=\n","encoding":"base64"}

