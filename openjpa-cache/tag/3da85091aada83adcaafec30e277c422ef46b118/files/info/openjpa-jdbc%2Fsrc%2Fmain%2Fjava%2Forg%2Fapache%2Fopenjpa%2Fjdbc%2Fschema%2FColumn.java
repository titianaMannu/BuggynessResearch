{"sha":"ee9c26a0142ba28e41665e8abf9a16b865fcf427","node_id":"MDQ6QmxvYjIwNjM2NDplZTljMjZhMDE0MmJhMjhlNDE2NjVlOGFiZjlhMTZiODY1ZmNmNDI3","size":21074,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/ee9c26a0142ba28e41665e8abf9a16b865fcf427","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWE7CgppbXBv\ncnQgamF2YS5tYXRoLkJpZ0RlY2ltYWw7CmltcG9ydCBqYXZhLm1hdGguQmln\nSW50ZWdlcjsKaW1wb3J0IGphdmEuc3FsLkRhdGFiYXNlTWV0YURhdGE7Cmlt\ncG9ydCBqYXZhLnNxbC5EYXRlOwppbXBvcnQgamF2YS5zcWwuVGltZTsKaW1w\nb3J0IGphdmEuc3FsLlRpbWVzdGFtcDsKaW1wb3J0IGphdmEuc3FsLlR5cGVz\nOwoKaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5sYW5nLlN0cmluZ1V0aWxz\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5KYXZhU1FM\nVHlwZXM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5KYXZhVHlw\nZXM7CmltcG9ydCBzZXJwLnV0aWwuTnVtYmVyczsKCi8qKgogKiBSZXByZXNl\nbnRzIGEgZGF0YWJhc2UgY29sdW1uLiBDbG9zZWx5IGFsaWduZWQgd2l0aCB0\naGUgY29sdW1uCiAqIGluZm9ybWF0aW9uIGF2YWlsYWJsZSBmcm9tIHtAbGlu\nayBEYXRhYmFzZU1ldGFEYXRhfS4KICoKICogQGF1dGhvciBBYmUgV2hpdGUK\nICogQGF1dGhvciBTdGVwaGVuIEtpbQogKi8KcHVibGljIGNsYXNzIENvbHVt\nbgogICAgZXh0ZW5kcyBSZWZlcmVuY2VDb3VudGVyIHsKCiAgICBwdWJsaWMg\nc3RhdGljIGZpbmFsIGludCBGTEFHX1VOSU5TRVJUQUJMRSA9IDIgPDwgMDsK\nICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IEZMQUdfVU5VUERBVEFCTEUg\nPSAyIDw8IDE7CiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBGTEFHX0RJ\nUkVDVF9JTlNFUlQgPSAyIDw8IDI7CiAgICBwdWJsaWMgc3RhdGljIGZpbmFs\nIGludCBGTEFHX0RJUkVDVF9VUERBVEUgPSAyIDw8IDM7CiAgICBwdWJsaWMg\nc3RhdGljIGZpbmFsIGludCBGTEFHX0ZLX0lOU0VSVCA9IDIgPDwgNDsKICAg\nIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IEZMQUdfRktfVVBEQVRFID0gMiA8\nPCA1OwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgRkxBR19QS19KT0lO\nID0gMiA8PCA2OwoKICAgIHByaXZhdGUgU3RyaW5nIF9uYW1lID0gbnVsbDsK\nICAgIHByaXZhdGUgU3RyaW5nIF9mdWxsTmFtZSA9IG51bGw7CiAgICBwcml2\nYXRlIFRhYmxlIF90YWJsZSA9IG51bGw7CiAgICBwcml2YXRlIFN0cmluZyBf\ndGFibGVOYW1lID0gbnVsbDsKICAgIHByaXZhdGUgU3RyaW5nIF9zY2hlbWFO\nYW1lID0gbnVsbDsKICAgIHByaXZhdGUgaW50IF90eXBlID0gVHlwZXMuT1RI\nRVI7CiAgICBwcml2YXRlIFN0cmluZyBfdHlwZU5hbWUgPSBudWxsOwogICAg\ncHJpdmF0ZSBpbnQgX2phdmFUeXBlID0gSmF2YVR5cGVzLk9CSkVDVDsKICAg\nIHByaXZhdGUgaW50IF9zaXplID0gMDsKICAgIHByaXZhdGUgaW50IF9kZWNp\nbWFscyA9IDA7CiAgICBwcml2YXRlIFN0cmluZyBfZGVmYXVsdFN0ciA9IG51\nbGw7CiAgICBwcml2YXRlIE9iamVjdCBfZGVmYXVsdCA9IG51bGw7CiAgICBw\ncml2YXRlIEJvb2xlYW4gX25vdE51bGwgPSBudWxsOwogICAgcHJpdmF0ZSBi\nb29sZWFuIF9hdXRvQXNzaWduID0gZmFsc2U7CiAgICBwcml2YXRlIGJvb2xl\nYW4gX3JlbCA9IGZhbHNlOwogICAgcHJpdmF0ZSBTdHJpbmcgX3RhcmdldCA9\nIG51bGw7CiAgICBwcml2YXRlIFN0cmluZyBfdGFyZ2V0RmllbGQgPSBudWxs\nOwogICAgcHJpdmF0ZSBpbnQgX2ZsYWdzID0gMDsKCiAgICBwcml2YXRlIGlu\ndCBfaW5kZXggPSAwOwogICAgcHJpdmF0ZSBib29sZWFuIF9wayA9IGZhbHNl\nOwoKICAgIC8qKgogICAgICogRGVmYXVsdCBjb25zdHJ1Y3Rvci4KICAgICAq\nLwogICAgcHVibGljIENvbHVtbigpIHsKICAgIH0KCiAgICAvKioKICAgICAq\nIENvbnN0cnVjdG9yLgogICAgICoKICAgICAqIEBwYXJhbSBuYW1lIHRoZSBu\nYW1lIG9mIHRoZSBjb2x1bW4KICAgICAqIEBwYXJhbSB0YWJsZSB0aGUgY29s\ndW1uJ3MgdGFibGUKICAgICAqLwogICAgcHVibGljIENvbHVtbihTdHJpbmcg\nbmFtZSwgVGFibGUgdGFibGUpIHsKICAgICAgICBzZXROYW1lKG5hbWUpOwog\nICAgICAgIGlmICh0YWJsZSAhPSBudWxsKSB7CiAgICAgICAgICAgIHNldFRh\nYmxlTmFtZSh0YWJsZS5nZXROYW1lKCkpOwogICAgICAgICAgICBzZXRTY2hl\nbWFOYW1lKHRhYmxlLmdldFNjaGVtYU5hbWUoKSk7CiAgICAgICAgfQogICAg\nICAgIF90YWJsZSA9IHRhYmxlOwogICAgfQoKICAgIC8qKgogICAgICogQ2Fs\nbGVkIHdoZW4gdGhlIGNvbHVtbiBpcyByZW1vdmVkIGZyb20gaXRzIHRhYmxl\nLiBSZW1vdmVzIHRoZSBjb2x1bW4KICAgICAqIGZyb20gYWxsIHRhYmxlIGNv\nbnN0cmFpbnRzIGFuZCBpbmRleGVzLCB0aGVuIGludmFsaWRhdGVzIGl0Lgog\nICAgICovCiAgICB2b2lkIHJlbW92ZSgpIHsKICAgICAgICBUYWJsZSB0YWJs\nZSA9IGdldFRhYmxlKCk7CiAgICAgICAgaWYgKHRhYmxlID09IG51bGwpCiAg\nICAgICAgICAgIHJldHVybjsKCiAgICAgICAgU2NoZW1hIHNjaGVtYSA9IHRh\nYmxlLmdldFNjaGVtYSgpOwogICAgICAgIGlmIChzY2hlbWEgIT0gbnVsbCAm\nJiBzY2hlbWEuZ2V0U2NoZW1hR3JvdXAoKSAhPSBudWxsKSB7CiAgICAgICAg\nICAgIFNjaGVtYVtdIHNjaGVtYXMgPSBzY2hlbWEuZ2V0U2NoZW1hR3JvdXAo\nKS5nZXRTY2hlbWFzKCk7CiAgICAgICAgICAgIFRhYmxlW10gdGFiczsKICAg\nICAgICAgICAgRm9yZWlnbktleVtdIGZrczsKICAgICAgICAgICAgQ29sdW1u\nW10gY29sczsKICAgICAgICAgICAgQ29sdW1uW10gcGtzOwogICAgICAgICAg\nICBmb3IgKGludCBpID0gMDsgaSA8IHNjaGVtYXMubGVuZ3RoOyBpKyspIHsK\nICAgICAgICAgICAgICAgIHRhYnMgPSBzY2hlbWFzW2ldLmdldFRhYmxlcygp\nOwogICAgICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCB0YWJzLmxl\nbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgZmtzID0gdGFic1tq\nXS5nZXRGb3JlaWduS2V5cygpOwogICAgICAgICAgICAgICAgICAgIGZvciAo\naW50IGsgPSAwOyBrIDwgZmtzLmxlbmd0aDsgaysrKSB7CiAgICAgICAgICAg\nICAgICAgICAgICAgIGNvbHMgPSBma3Nba10uZ2V0Q29sdW1ucygpOwogICAg\nICAgICAgICAgICAgICAgICAgICBwa3MgPSBma3Nba10uZ2V0UHJpbWFyeUtl\neUNvbHVtbnMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpbnQg\nbCA9IDA7IGwgPCBjb2xzLmxlbmd0aDsgbCsrKQogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgaWYgKHRoaXMuZXF1YWxzKGNvbHNbbF0pIHx8IHRoaXMu\nZXF1YWxzKHBrc1tsXSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgZmtzW2tdLnJlbW92ZUpvaW4oY29sc1tsXSk7CgogICAgICAgICAgICAg\nICAgICAgICAgICBjb2xzID0gZmtzW2tdLmdldENvbnN0YW50Q29sdW1ucygp\nOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGludCBsID0gMDsgbCA8\nIGNvbHMubGVuZ3RoOyBsKyspCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICBpZiAodGhpcy5lcXVhbHMoY29sc1tsXSkpCiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgZmtzW2tdLnJlbW92ZUpvaW4oY29sc1tsXSk7Cgog\nICAgICAgICAgICAgICAgICAgICAgICBwa3MgPSBma3Nba10uZ2V0Q29uc3Rh\nbnRQcmltYXJ5S2V5Q29sdW1ucygpOwogICAgICAgICAgICAgICAgICAgICAg\nICBmb3IgKGludCBsID0gMDsgbCA8IHBrcy5sZW5ndGg7IGwrKykKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVxdWFscyhwa3NbbF0p\nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZrc1trXS5yZW1v\ndmVKb2luKHBrc1tsXSk7CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAo\nZmtzW2tdLmdldENvbHVtbnMoKS5sZW5ndGggPT0gMAogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgJiYgZmtzW2tdLmdldENvbnN0YW50Q29sdW1ucygp\nLmxlbmd0aCA9PSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFi\nc1tqXS5yZW1vdmVGb3JlaWduS2V5KGZrc1trXSk7CiAgICAgICAgICAgICAg\nICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAg\nICAgfQoKICAgICAgICBJbmRleFtdIGlkeHMgPSB0YWJsZS5nZXRJbmRleGVz\nKCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBpZHhzLmxlbmd0aDsg\naSsrKQogICAgICAgICAgICBpZiAoaWR4c1tpXS5yZW1vdmVDb2x1bW4odGhp\ncykgJiYgaWR4c1tpXS5nZXRDb2x1bW5zKCkubGVuZ3RoID09IDApCiAgICAg\nICAgICAgICAgICB0YWJsZS5yZW1vdmVJbmRleChpZHhzW2ldKTsKCiAgICAg\nICAgVW5pcXVlW10gdW5xcyA9IHRhYmxlLmdldFVuaXF1ZXMoKTsKICAgICAg\nICBmb3IgKGludCBpID0gMDsgaSA8IHVucXMubGVuZ3RoOyBpKyspCiAgICAg\nICAgICAgIGlmICh1bnFzW2ldLnJlbW92ZUNvbHVtbih0aGlzKSAmJiB1bnFz\nW2ldLmdldENvbHVtbnMoKS5sZW5ndGggPT0gMCkKICAgICAgICAgICAgICAg\nIHRhYmxlLnJlbW92ZVVuaXF1ZSh1bnFzW2ldKTsKCiAgICAgICAgUHJpbWFy\neUtleSBwayA9IHRhYmxlLmdldFByaW1hcnlLZXkoKTsKICAgICAgICBpZiAo\ncGsgIT0gbnVsbCAmJiBway5yZW1vdmVDb2x1bW4odGhpcykgJiYgcGsuZ2V0\nQ29sdW1ucygpLmxlbmd0aCA9PSAwKQogICAgICAgICAgICB0YWJsZS5yZW1v\ndmVQcmltYXJ5S2V5KCk7CgogICAgICAgIF90YWJsZSA9IG51bGw7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIHRhYmxlIGZvciB0aGUgY29s\ndW1uLgogICAgICovCiAgICBwdWJsaWMgVGFibGUgZ2V0VGFibGUoKSB7CiAg\nICAgICAgcmV0dXJuIF90YWJsZTsKICAgIH0KCiAgICAvKioKICAgICAqIFRo\nZSBjb2x1bW4ncyB0YWJsZSBuYW1lLgogICAgICovCiAgICBwdWJsaWMgU3Ry\naW5nIGdldFRhYmxlTmFtZSgpIHsKICAgICAgICByZXR1cm4gX3RhYmxlTmFt\nZTsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBjb2x1bW4ncyB0YWJsZSBu\nYW1lLiBZb3UgY2FuIG9ubHkgY2FsbCB0aGlzIG1ldGhvZCBvbiBjb2x1bW5z\nCiAgICAgKiB3aG9zZSB0YWJsZSBvYmplY3QgaXMgbm90IHNldC4KICAgICAq\nLwogICAgcHVibGljIHZvaWQgc2V0VGFibGVOYW1lKFN0cmluZyBuYW1lKSB7\nCiAgICAgICAgaWYgKGdldFRhYmxlKCkgIT0gbnVsbCkKICAgICAgICAgICAg\ndGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbigpOwogICAgICAgIF90\nYWJsZU5hbWUgPSBuYW1lOwogICAgICAgIF9mdWxsTmFtZSA9IG51bGw7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBUaGUgY29sdW1uJ3Mgc2NoZW1hIG5hbWUu\nCiAgICAgKi8KICAgIHB1YmxpYyBTdHJpbmcgZ2V0U2NoZW1hTmFtZSgpIHsK\nICAgICAgICByZXR1cm4gX3NjaGVtYU5hbWU7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBUaGUgY29sdW1uJ3Mgc2NoZW1hIG5hbWUuIFlvdSBjYW4gb25seSBj\nYWxsIHRoaXMgbWV0aG9kIG9uIGNvbHVtbnMKICAgICAqIHdob3NlIHRhYmxl\nIG9iamVjdCBpcyBub3Qgc2V0LgogICAgICovCiAgICBwdWJsaWMgdm9pZCBz\nZXRTY2hlbWFOYW1lKFN0cmluZyBuYW1lKSB7CiAgICAgICAgaWYgKGdldFRh\nYmxlKCkgIT0gbnVsbCkKICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxT\ndGF0ZUV4Y2VwdGlvbigpOwogICAgICAgIF9zY2hlbWFOYW1lID0gbmFtZTsK\nICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgY29sdW1uJ3MgbmFt\nZS4KICAgICAqLwogICAgcHVibGljIFN0cmluZyBnZXROYW1lKCkgewogICAg\nICAgIHJldHVybiBfbmFtZTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCB0\naGUgY29sdW1uJ3MgbmFtZS4gWW91IGNhbiBvbmx5IGNhbGwgdGhpcyBtZXRo\nb2Qgb24gY29sdW1ucwogICAgICogd2hvc2UgdGFibGUgb2JqZWN0IGlzIG5v\ndCBzZXQuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldE5hbWUoU3RyaW5n\nIG5hbWUpIHsKICAgICAgICBpZiAoZ2V0VGFibGUoKSAhPSBudWxsKQogICAg\nICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKCk7CiAg\nICAgICAgX25hbWUgPSBuYW1lOwogICAgICAgIF9mdWxsTmFtZSA9IG51bGw7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGNvbHVtbidzIGZ1\nbGwgbmFtZSwgaW4gdGhlIGZvcm0gJmx0O3RhYmxlJmd0Oy4mbHQ7bmFtZSZn\ndDsuCiAgICAgKi8KICAgIHB1YmxpYyBTdHJpbmcgZ2V0RnVsbE5hbWUoKSB7\nCiAgICAgICAgaWYgKF9mdWxsTmFtZSA9PSBudWxsKSB7CiAgICAgICAgICAg\nIFN0cmluZyBuYW1lID0gZ2V0TmFtZSgpOwogICAgICAgICAgICBpZiAobmFt\nZSA9PSBudWxsKQogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAg\nICAgICAgIFN0cmluZyB0bmFtZSA9IGdldFRhYmxlTmFtZSgpOwogICAgICAg\nICAgICBpZiAodG5hbWUgPT0gbnVsbCkKICAgICAgICAgICAgICAgIHJldHVy\nbiBuYW1lOwogICAgICAgICAgICBfZnVsbE5hbWUgPSB0bmFtZSArICIuIiAr\nIG5hbWU7CiAgICAgICAgfQogICAgICAgIHJldHVybiBfZnVsbE5hbWU7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGNvbHVtbidzIFNRTCB0\neXBlLiBUaGlzIHdpbGwgYmUgb25lIG9mIHRoZSB0eXBlIGNvbnN0YW50cwog\nICAgICogZGVmaW5lZCBpbiB7QGxpbmsgVHlwZXN9LgogICAgICovCiAgICBw\ndWJsaWMgaW50IGdldFR5cGUoKSB7CiAgICAgICAgcmV0dXJuIF90eXBlOwog\nICAgfQoKICAgIC8qKgogICAgICogU2V0IHRoZSBjb2x1bW4ncyBTUUwgdHlw\nZS4gVGhpcyBzaG91bGQgYmUgb25lIG9mIHRoZSB0eXBlIGNvbnN0YW50cwog\nICAgICogZGVmaW5lZCBpbiB7QGxpbmsgVHlwZXN9LgogICAgICovCiAgICBw\ndWJsaWMgdm9pZCBzZXRUeXBlKGludCBzcWxUeXBlKSB7CiAgICAgICAgX3R5\ncGUgPSBzcWxUeXBlOwogICAgfQoKICAgIC8qKgogICAgICogVGhlIGRhdGFi\nYXNlLXNwZWNpZmljIFNRTCB0eXBlIG9mIHRoaXMgY29sdW1uLgogICAgICov\nCiAgICBwdWJsaWMgU3RyaW5nIGdldFR5cGVOYW1lKCkgewogICAgICAgIHJl\ndHVybiBfdHlwZU5hbWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgZGF0\nYWJhc2Utc3BlY2lmaWMgU1FMIHR5cGUgb2YgdGhpcyBjb2x1bW4uCiAgICAg\nKi8KICAgIHB1YmxpYyB2b2lkIHNldFR5cGVOYW1lKFN0cmluZyB0eXBlTmFt\nZSkgewogICAgICAgIF90eXBlTmFtZSA9IHR5cGVOYW1lOwogICAgfQoKICAg\nIC8qKgogICAgICogVGhlIEphdmEgdHlwZSB0aGUgZGF0YSBpbiB0aGlzIGNv\nbHVtbiBpcyB0cmVhdGVkIGFzLCBmcm9tCiAgICAgKiB7QGxpbmsgSmF2YVR5\ncGVzfSBvciB7QGxpbmsgSmF2YVNRTFR5cGVzfS4KICAgICAqLwogICAgcHVi\nbGljIGludCBnZXRKYXZhVHlwZSgpIHsKICAgICAgICByZXR1cm4gX2phdmFU\neXBlOwogICAgfQoKICAgIC8qKgogICAgICogVGhlIEphdmEgdHlwZSB0aGUg\nZGF0YSBpbiB0aGlzIGNvbHVtbiBpcyB0cmVhdGVkIGFzLCBmcm9tCiAgICAg\nKiB7QGxpbmsgSmF2YVR5cGVzfSBvciB7QGxpbmsgSmF2YVNRTFR5cGVzfS4K\nICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0SmF2YVR5cGUoaW50IHR5cGUp\nIHsKICAgICAgICBfamF2YVR5cGUgPSB0eXBlOwogICAgfQoKICAgIC8qKgog\nICAgICogUmV0dXJuIHRoZSBjb2x1bW4ncyBzaXplLgogICAgICovCiAgICBw\ndWJsaWMgaW50IGdldFNpemUoKSB7CiAgICAgICAgcmV0dXJuIF9zaXplOwog\nICAgfQoKICAgIC8qKgogICAgICogU2V0IHRoZSBjb2x1bW4ncyBzaXplLgog\nICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRTaXplKGludCBzaXplKSB7CiAg\nICAgICAgX3NpemUgPSBzaXplOwogICAgfQoKICAgIC8qKgogICAgICogUmV0\ndXJuIHRoZSBudW1iZXIgb2YgZGVjaW1hbCBkaWdpdHMgZm9yIHRoZSBjb2x1\nbW4sIGlmIGFwcGxpY2FibGUuCiAgICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0\nRGVjaW1hbERpZ2l0cygpIHsKICAgICAgICByZXR1cm4gX2RlY2ltYWxzOwog\nICAgfQoKICAgIC8qKgogICAgICogU2V0IHRoZSBudW1iZXIgb2YgZGVjaW1h\nbCBkaWdpdHMgZm9yIHRoZSBjb2x1bW4uCiAgICAgKi8KICAgIHB1YmxpYyB2\nb2lkIHNldERlY2ltYWxEaWdpdHMoaW50IGRpZ2l0cykgewogICAgICAgIF9k\nZWNpbWFscyA9IGRpZ2l0czsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVy\nbiB0aGUgZGVmYXVsdCB2YWx1ZSBzZXQgZm9yIHRoZSBjb2x1bW4sIGlmIGFu\neS4KICAgICAqLwogICAgcHVibGljIFN0cmluZyBnZXREZWZhdWx0U3RyaW5n\nKCkgewogICAgICAgIHJldHVybiBfZGVmYXVsdFN0cjsKICAgIH0KCiAgICAv\nKioKICAgICAqIFNldCB0aGUgZGVmYXVsdCB2YWx1ZSBmb3IgdGhlIGNvbHVt\nbi4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0RGVmYXVsdFN0cmluZyhT\ndHJpbmcgZGVmKSB7CiAgICAgICAgX2RlZmF1bHRTdHIgPSBkZWY7CiAgICAg\nICAgX2RlZmF1bHQgPSBudWxsOwogICAgfQoKICAgIC8qKgogICAgICogUmV0\ndXJuIHRoZSBkZWZhdWx0IHZhbHVlIHNldCBmb3IgdGhpcyBjb2x1bW4sIGlm\nIGFueS4gSWYgb25seSBhIGRlZmF1bHQKICAgICAqIHN0cmluZyBoYXMgYmVl\nbiBzZXQsIGF0dGVtcHRzIHRvIGNvbnZlcnQgaXQgdG8gdGhlIHJpZ2h0IHR5\ncGUgYmFzZWQKICAgICAqIG9uIHRoZSBKYXZhIHR5cGUgc2V0IGZvciB0aGlz\nIGNvbHVtbi4KICAgICAqLwogICAgcHVibGljIE9iamVjdCBnZXREZWZhdWx0\nKCkgewogICAgICAgIGlmIChfZGVmYXVsdCAhPSBudWxsKQogICAgICAgICAg\nICByZXR1cm4gX2RlZmF1bHQ7CiAgICAgICAgaWYgKF9kZWZhdWx0U3RyID09\nIG51bGwpCiAgICAgICAgICAgIHJldHVybiBudWxsOwoKICAgICAgICBzd2l0\nY2ggKF9qYXZhVHlwZSkgewogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5C\nT09MRUFOOgogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5CT09MRUFOX09C\nSjoKICAgICAgICAgICAgICAgIF9kZWZhdWx0ID0gKCJ0cnVlIi5lcXVhbHMo\nX2RlZmF1bHRTdHIpKSA/IEJvb2xlYW4uVFJVRQogICAgICAgICAgICAgICAg\nICAgIDogQm9vbGVhbi5GQUxTRTsKICAgICAgICAgICAgICAgIGJyZWFrOwog\nICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5CWVRFOgogICAgICAgICAgICBj\nYXNlIEphdmFUeXBlcy5CWVRFX09CSjoKICAgICAgICAgICAgICAgIF9kZWZh\ndWx0ID0gbmV3IEJ5dGUoX2RlZmF1bHRTdHIpOwogICAgICAgICAgICAgICAg\nYnJlYWs7CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkNIQVI6CiAgICAg\nICAgICAgIGNhc2UgSmF2YVR5cGVzLkNIQVJfT0JKOgogICAgICAgICAgICAg\nICAgX2RlZmF1bHQgPSBuZXcgQ2hhcmFjdGVyKF9kZWZhdWx0U3RyLmNoYXJB\ndCgwKSk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2Fz\nZSBKYXZhVHlwZXMuRE9VQkxFOgogICAgICAgICAgICBjYXNlIEphdmFUeXBl\ncy5ET1VCTEVfT0JKOgogICAgICAgICAgICAgICAgX2RlZmF1bHQgPSBuZXcg\nRG91YmxlKF9kZWZhdWx0U3RyKTsKICAgICAgICAgICAgICAgIGJyZWFrOwog\nICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5GTE9BVDoKICAgICAgICAgICAg\nY2FzZSBKYXZhVHlwZXMuRkxPQVRfT0JKOgogICAgICAgICAgICAgICAgX2Rl\nZmF1bHQgPSBuZXcgRmxvYXQoX2RlZmF1bHRTdHIpOwogICAgICAgICAgICAg\nICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLklOVDoKICAg\nICAgICAgICAgY2FzZSBKYXZhVHlwZXMuSU5UX09CSjoKICAgICAgICAgICAg\nICAgIF9kZWZhdWx0ID0gTnVtYmVycy52YWx1ZU9mKEludGVnZXIucGFyc2VJ\nbnQoX2RlZmF1bHRTdHIpKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAg\nICAgICAgICBjYXNlIEphdmFUeXBlcy5MT05HOgogICAgICAgICAgICBjYXNl\nIEphdmFUeXBlcy5MT05HX09CSjoKICAgICAgICAgICAgICAgIF9kZWZhdWx0\nID0gTnVtYmVycy52YWx1ZU9mKExvbmcucGFyc2VMb25nKF9kZWZhdWx0U3Ry\nKSk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBK\nYXZhVHlwZXMuTlVNQkVSOgogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5C\nSUdERUNJTUFMOgogICAgICAgICAgICAgICAgX2RlZmF1bHQgPSBuZXcgQmln\nRGVjaW1hbChfZGVmYXVsdFN0cik7CiAgICAgICAgICAgICAgICBicmVhazsK\nICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuU0hPUlQ6CiAgICAgICAgICAg\nIGNhc2UgSmF2YVR5cGVzLlNIT1JUX09CSjoKICAgICAgICAgICAgICAgIF9k\nZWZhdWx0ID0gbmV3IFNob3J0KF9kZWZhdWx0U3RyKTsKICAgICAgICAgICAg\nICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5EQVRFOgog\nICAgICAgICAgICAgICAgX2RlZmF1bHQgPSBuZXcgamF2YS51dGlsLkRhdGUo\nX2RlZmF1bHRTdHIpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAg\nICAgIGNhc2UgSmF2YVR5cGVzLkJJR0lOVEVHRVI6CiAgICAgICAgICAgICAg\nICBfZGVmYXVsdCA9IG5ldyBCaWdJbnRlZ2VyKF9kZWZhdWx0U3RyKTsKICAg\nICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIEphdmFTUUxU\neXBlcy5TUUxfREFURToKICAgICAgICAgICAgICAgIF9kZWZhdWx0ID0gRGF0\nZS52YWx1ZU9mKF9kZWZhdWx0U3RyKTsKICAgICAgICAgICAgICAgIGJyZWFr\nOwogICAgICAgICAgICBjYXNlIEphdmFTUUxUeXBlcy5USU1FU1RBTVA6CiAg\nICAgICAgICAgICAgICBfZGVmYXVsdCA9IFRpbWVzdGFtcC52YWx1ZU9mKF9k\nZWZhdWx0U3RyKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAg\nICBjYXNlIEphdmFTUUxUeXBlcy5USU1FOgogICAgICAgICAgICAgICAgX2Rl\nZmF1bHQgPSBUaW1lLnZhbHVlT2YoX2RlZmF1bHRTdHIpOwogICAgICAgICAg\nICAgICAgYnJlYWs7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAg\nICAgICBfZGVmYXVsdCA9IF9kZWZhdWx0U3RyOwogICAgICAgIH0KICAgICAg\nICByZXR1cm4gX2RlZmF1bHQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQg\ndGhlIGRlZmF1bHQgdmFsdWUgZm9yIHRoZSBjb2x1bW4uCiAgICAgKi8KICAg\nIHB1YmxpYyB2b2lkIHNldERlZmF1bHQoT2JqZWN0IGRlZikgewogICAgICAg\nIF9kZWZhdWx0ID0gZGVmOwogICAgICAgIF9kZWZhdWx0U3RyID0gKGRlZiA9\nPSBudWxsKSA/IG51bGwgOiBkZWYudG9TdHJpbmcoKTsKICAgIH0KCiAgICAv\nKioKICAgICAqIFJldHVybiB0cnVlIGlmIHRoaXMgaXMgYSBOT1QgTlVMTCBj\nb2x1bW4uCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlzTm90TnVsbCgp\nIHsKICAgICAgICByZXR1cm4gX25vdE51bGwgPT0gQm9vbGVhbi5UUlVFOwog\nICAgfQoKICAgIC8qKgogICAgICogU2V0IHdoZXRoZXIgdGhpcyBpcyBhIE5P\nVCBOVUxMIGNvbHVtbi4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0Tm90\nTnVsbChib29sZWFuIG5vdE51bGwpIHsKICAgICAgICBfbm90TnVsbCA9IChu\nb3ROdWxsKSA/IEJvb2xlYW4uVFJVRSA6IEJvb2xlYW4uRkFMU0U7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRoZSBub3QtbnVsbCBwcm9wZXJ0\neSBoYXMgYmVlbiBzZXQuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlz\nTm90TnVsbEV4cGxpY2l0KCkgewogICAgICAgIHJldHVybiBfbm90TnVsbCAh\nPSBudWxsOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciB0aGlzIGNv\nbHVtbiBpcyBhdXRvLWFzc2lnbmVkIGEgdmFsdWUgb24gaW5zZXJ0LgogICAg\nICovCiAgICBwdWJsaWMgYm9vbGVhbiBpc0F1dG9Bc3NpZ25lZCgpIHsKICAg\nICAgICByZXR1cm4gX2F1dG9Bc3NpZ247CiAgICB9CgogICAgLyoqCiAgICAg\nKiBXaGV0aGVyIHRoaXMgY29sdW1uIGlzIGF1dG8taW5jcmVtZW50aW5nLgog\nICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRBdXRvQXNzaWduZWQoYm9vbGVh\nbiBhdXRvQXNzaWduKSB7CiAgICAgICAgaWYgKGF1dG9Bc3NpZ24gIT0gX2F1\ndG9Bc3NpZ24gJiYgZ2V0VGFibGUoKSAhPSBudWxsKQogICAgICAgICAgICBn\nZXRUYWJsZSgpLmNoYW5nZUF1dG9Bc3NpZ25lZCh0aGlzKTsKICAgICAgICBf\nYXV0b0Fzc2lnbiA9IGF1dG9Bc3NpZ247CiAgICB9CgogICAgLyoqCiAgICAg\nKiBXaGV0aGVyIHRoaXMgY29sdW1uIHN0b3JlcyBzb21lIGZvcm0gb2Ygc2Vy\naWFsaXplZCBpZGVudGl0eSB2YWx1ZSBmb3IKICAgICAqIGEgcmVsYXRlZCBy\nZWNvcmQuIFRoaXMgbWFrZXMgdGhlIGNvbHVtbiBkZXBlbmRlbnQgb24gdGhl\nIGtub3dpbmcgdGhlCiAgICAgKiBmaW5hbCBpZGVudGl0eSBvZiB0aGUgcmVs\nYXRpb24gYmVmb3JlIHRoZSBjb2x1bW4gdmFsdWUgaXMgc2V0LgogICAgICov\nCiAgICBwdWJsaWMgYm9vbGVhbiBpc1JlbGF0aW9uSWQoKSB7CiAgICAgICAg\ncmV0dXJuIF9yZWw7CiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRo\naXMgY29sdW1uIHN0b3JlcyBzb21lIGZvcm0gb2Ygc2VyaWFsaXplZCBpZGVu\ndGl0eSB2YWx1ZSBmb3IKICAgICAqIGEgcmVsYXRlZCByZWNvcmQuIFRoaXMg\nbWFrZXMgdGhlIGNvbHVtbiBkZXBlbmRlbnQgb24gdGhlIGtub3dpbmcgdGhl\nCiAgICAgKiBmaW5hbCBpZGVudGl0eSBvZiB0aGUgcmVsYXRpb24gYmVmb3Jl\nIHRoZSBjb2x1bW4gdmFsdWUgaXMgc2V0LgogICAgICovCiAgICBwdWJsaWMg\ndm9pZCBzZXRSZWxhdGlvbklkKGJvb2xlYW4gcmVsKSB7CiAgICAgICAgaWYg\nKHJlbCAhPSBfcmVsICYmIGdldFRhYmxlKCkgIT0gbnVsbCkKICAgICAgICAg\nICAgZ2V0VGFibGUoKS5jaGFuZ2VSZWxhdGlvbklkKHRoaXMpOwogICAgICAg\nIF9yZWwgPSByZWw7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgbmFtZSBv\nZiB0aGUgY29sdW1uIHRoaXMgY29sdW1uIGpvaW5zIHRvLCBpZiBhbnkuIFVz\nZWQgZm9yIG1hcHBpbmcuCiAgICAgKi8KICAgIHB1YmxpYyBTdHJpbmcgZ2V0\nVGFyZ2V0KCkgewogICAgICAgIHJldHVybiBfdGFyZ2V0OwogICAgfQoKICAg\nIC8qKgogICAgICogVGhlIG5hbWUgb2YgdGhlIGNvbHVtbiB0aGlzIGNvbHVt\nbiBqb2lucyB0bywgaWYgYW55LiBVc2VkIGZvciBtYXBwaW5nLgogICAgICov\nCiAgICBwdWJsaWMgdm9pZCBzZXRUYXJnZXQoU3RyaW5nIHRhcmdldCkgewog\nICAgICAgIF90YXJnZXQgPSBTdHJpbmdVdGlscy50cmltVG9OdWxsKHRhcmdl\ndCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgZmll\nbGQgdGhpcyBjb2x1bW4gam9pbnMgdG8sIGlmIGFueS4gVXNlZCBmb3IgbWFw\ncGluZy4KICAgICAqLwogICAgcHVibGljIFN0cmluZyBnZXRUYXJnZXRGaWVs\nZCgpIHsKICAgICAgICByZXR1cm4gX3RhcmdldEZpZWxkOwogICAgfQoKICAg\nIC8qKgogICAgICogVGhlIG5hbWUgb2YgdGhlIGZpZWxkIHRoaXMgY29sdW1u\nIGpvaW5zIHRvLCBpZiBhbnkuIFVzZWQgZm9yIG1hcHBpbmcuCiAgICAgKi8K\nICAgIHB1YmxpYyB2b2lkIHNldFRhcmdldEZpZWxkKFN0cmluZyB0YXJnZXQp\nIHsKICAgICAgICBpZiAodGFyZ2V0ICE9IG51bGwgJiYgdGFyZ2V0Lmxlbmd0\naCgpID09IDApCiAgICAgICAgICAgIHRhcmdldCA9IG51bGw7CiAgICAgICAg\nX3RhcmdldEZpZWxkID0gdGFyZ2V0OwogICAgfQoKICAgIC8qKgogICAgICog\nRmxhZ3MgYXJlIHVzZWQgZm9yIGJvb2trZWVwaW5nIGluZm9ybWF0aW9uLiBU\naGV5IGFyZSBpZ25vcmVkIGF0IHJ1bnRpbWUuCiAgICAgKi8KICAgIHB1Ymxp\nYyBib29sZWFuIGdldEZsYWcoaW50IGZsYWcpIHsKICAgICAgICByZXR1cm4g\nKF9mbGFncyAmIGZsYWcpICE9IDA7CiAgICB9CgogICAgLyoqCiAgICAgKiBG\nbGFncyBhcmUgdXNlZCBmb3IgYm9va2tlZXBpbmcgaW5mb3JtYXRpb24uIFRo\nZXkgYXJlIGlnbm9yZWQgYXQgcnVudGltZS4KICAgICAqLwogICAgcHVibGlj\nIHZvaWQgc2V0RmxhZyhpbnQgZmxhZywgYm9vbGVhbiBvbikgewogICAgICAg\nIGlmIChvbikKICAgICAgICAgICAgX2ZsYWdzIHw9IGZsYWc7CiAgICAgICAg\nZWxzZQogICAgICAgICAgICBfZmxhZ3MgJj0gfmZsYWc7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBSZXR1cm4gdHJ1ZSBpZiB0aGlzIGNvbHVtbiBiZWxvbmdz\nIHRvIHRoZSB0YWJsZSdzIHByaW1hcnkga2V5LgogICAgICovCiAgICBwdWJs\naWMgYm9vbGVhbiBpc1ByaW1hcnlLZXkoKSB7CiAgICAgICAgcmV0dXJuIF9w\nazsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCB3aGV0aGVyIHRoaXMgY29s\ndW1uIGJlbG9uZ3MgdG8gdGhlIHRhYmxlJ3MgcHJpbWFyeSBrZXkuCiAgICAg\nKi8KICAgIHZvaWQgc2V0UHJpbWFyeUtleShib29sZWFuIHBrKSB7CiAgICAg\nICAgX3BrID0gcGs7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhl\nIGNvbHVtbidzIDAtYmFzZWQgaW5kZXggaW4gdGhlIG93bmluZyB0YWJsZS4K\nICAgICAqLwogICAgcHVibGljIGludCBnZXRJbmRleCgpIHsKICAgICAgICBp\nZiAoZ2V0VGFibGUoKSAhPSBudWxsKQogICAgICAgICAgICBnZXRUYWJsZSgp\nLmluZGV4Q29sdW1ucygpOwogICAgICAgIHJldHVybiBfaW5kZXg7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBTZXQgdGhlIGNvbHVtbidzIDAtYmFzZWQgaW5k\nZXggaW4gdGhlIG93bmluZyB0YWJsZS4KICAgICAqLwogICAgdm9pZCBzZXRJ\nbmRleChpbnQgaW5kZXgpIHsKICAgICAgICBfaW5kZXggPSBpbmRleDsKICAg\nIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdGhpcyBjb2x1bW4gaXMgYSBM\nT0IuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlzTG9iKCkgewogICAg\nICAgIHN3aXRjaCAoX3R5cGUpIHsKICAgICAgICAgICAgY2FzZSBUeXBlcy5C\nSU5BUlk6CiAgICAgICAgICAgIGNhc2UgVHlwZXMuQkxPQjoKICAgICAgICAg\nICAgY2FzZSBUeXBlcy5MT05HVkFSQklOQVJZOgogICAgICAgICAgICBjYXNl\nIFR5cGVzLlZBUkJJTkFSWToKICAgICAgICAgICAgY2FzZSBUeXBlcy5DTE9C\nOgogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIGRl\nZmF1bHQ6CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAg\nfQogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRydWUgaWYgdGhpcyBj\nb2x1bW4gaXMgY29tcGF0aWJsZSB3aXRoIHRoZSBnaXZlbiBKREJDIHR5cGUK\nICAgICAqIGZyb20ge0BsaW5rIFR5cGVzfSBhbmQgc2l6ZS4KICAgICAqLwog\nICAgcHVibGljIGJvb2xlYW4gaXNDb21wYXRpYmxlKGludCB0eXBlLCBTdHJp\nbmcgdHlwZU5hbWUsIGludCBzaXplLCAKICAgICAgICBpbnQgZGVjaW1hbHMp\nIHsKICAgICAgICBpZiAodHlwZSA9PSBUeXBlcy5PVEhFUiB8fCBnZXRUeXBl\nKCkgPT0gVHlwZXMuT1RIRVIpCiAgICAgICAgICAgIHJldHVybiB0cnVlOwoK\nICAgICAgICAvLyBub3RlIHRoYXQgdGhlIGdpdmVuIHNpemUgaXMgY3VycmVu\ndGx5IGlnbm9yZWQsIGJ1dCBtYXkgYmUgdXNlZnVsCiAgICAgICAgLy8gdG8g\nZHluYW1pY2FsbHktcG9wdWxhdGluZyBzdWJjbGFzc2VzCiAgICAgICAgc3dp\ndGNoIChnZXRUeXBlKCkpIHsKICAgICAgICAgICAgY2FzZSBUeXBlcy5CSVQ6\nCiAgICAgICAgICAgIGNhc2UgVHlwZXMuVElOWUlOVDoKICAgICAgICAgICAg\nY2FzZSBUeXBlcy5CSUdJTlQ6CiAgICAgICAgICAgIGNhc2UgVHlwZXMuSU5U\nRUdFUjoKICAgICAgICAgICAgY2FzZSBUeXBlcy5OVU1FUklDOgogICAgICAg\nICAgICBjYXNlIFR5cGVzLlNNQUxMSU5UOgogICAgICAgICAgICBjYXNlIFR5\ncGVzLkRFQ0lNQUw6CiAgICAgICAgICAgIGNhc2UgVHlwZXMuRE9VQkxFOgog\nICAgICAgICAgICBjYXNlIFR5cGVzLkZMT0FUOgogICAgICAgICAgICBjYXNl\nIFR5cGVzLlJFQUw6CiAgICAgICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHsK\nICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGVzLkJJVDoKICAgICAgICAg\nICAgICAgICAgICBjYXNlIFR5cGVzLlRJTllJTlQ6CiAgICAgICAgICAgICAg\nICAgICAgY2FzZSBUeXBlcy5CSUdJTlQ6CiAgICAgICAgICAgICAgICAgICAg\nY2FzZSBUeXBlcy5JTlRFR0VSOgogICAgICAgICAgICAgICAgICAgIGNhc2Ug\nVHlwZXMuTlVNRVJJQzoKICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGVz\nLlNNQUxMSU5UOgogICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZXMuREVD\nSU1BTDoKICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGVzLkRPVUJMRToK\nICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGVzLkZMT0FUOgogICAgICAg\nICAgICAgICAgICAgIGNhc2UgVHlwZXMuUkVBTDoKICAgICAgICAgICAgICAg\nICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICAgICAgZGVm\nYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwog\nICAgICAgICAgICAgICAgfQogICAgICAgICAgICBjYXNlIFR5cGVzLkJJTkFS\nWToKICAgICAgICAgICAgY2FzZSBUeXBlcy5CTE9COgogICAgICAgICAgICBj\nYXNlIFR5cGVzLkxPTkdWQVJCSU5BUlk6CiAgICAgICAgICAgIGNhc2UgVHlw\nZXMuVkFSQklOQVJZOgogICAgICAgICAgICBjYXNlIFR5cGVzLk9USEVSOgog\nICAgICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgICAgICAg\nICAgICAgY2FzZSBUeXBlcy5CSU5BUlk6CiAgICAgICAgICAgICAgICAgICAg\nY2FzZSBUeXBlcy5CTE9COgogICAgICAgICAgICAgICAgICAgIGNhc2UgVHlw\nZXMuTE9OR1ZBUkJJTkFSWToKICAgICAgICAgICAgICAgICAgICBjYXNlIFR5\ncGVzLlZBUkJJTkFSWToKICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGVz\nLk9USEVSOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsK\nICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAg\nICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAg\nICAgICAgIGNhc2UgVHlwZXMuQ0xPQjoKICAgICAgICAgICAgY2FzZSBUeXBl\ncy5DSEFSOgogICAgICAgICAgICBjYXNlIFR5cGVzLkxPTkdWQVJDSEFSOgog\nICAgICAgICAgICBjYXNlIFR5cGVzLlZBUkNIQVI6CiAgICAgICAgICAgICAg\nICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlIFR5\ncGVzLkNMT0I6CiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlcy5DSEFS\nOgogICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZXMuTE9OR1ZBUkNIQVI6\nCiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlcy5WQVJDSEFSOgogICAg\nICAgICAgICAgICAgICAgIGNhc2UgVHlwZXMuREFURToKICAgICAgICAgICAg\nICAgICAgICBjYXNlIFR5cGVzLlRJTUU6CiAgICAgICAgICAgICAgICAgICAg\nY2FzZSBUeXBlcy5USU1FU1RBTVA6CiAgICAgICAgICAgICAgICAgICAgICAg\nIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAg\nICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAg\nICAgICAgIH0KICAgICAgICAgICAgY2FzZSBUeXBlcy5EQVRFOgogICAgICAg\nICAgICBjYXNlIFR5cGVzLlRJTUU6CiAgICAgICAgICAgIGNhc2UgVHlwZXMu\nVElNRVNUQU1QOgogICAgICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7CiAg\nICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlcy5MT05HVkFSQ0hBUjoKICAg\nICAgICAgICAgICAgICAgICBjYXNlIFR5cGVzLkNMT0I6CiAgICAgICAgICAg\nICAgICAgICAgY2FzZSBUeXBlcy5WQVJDSEFSOgogICAgICAgICAgICAgICAg\nICAgIGNhc2UgVHlwZXMuREFURToKICAgICAgICAgICAgICAgICAgICBjYXNl\nIFR5cGVzLlRJTUU6CiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlcy5U\nSU1FU1RBTVA6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVl\nOwogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAg\nICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAg\nICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIHJldHVybiB0eXBl\nID09IGdldFR5cGUoKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAg\nKiBSZXR1cm5zIHRoZSBjb2x1bW4gbmFtZS4KICAgICAqLwogICAgcHVibGlj\nIFN0cmluZyB0b1N0cmluZygpIHsKICAgICAgICByZXR1cm4gZ2V0TmFtZSgp\nOwogICAgfQoKICAgIC8qKgogICAgICogVXNlZnVsIGZvciBkZWJ1Z2dpbmcu\nCiAgICAgKi8KICAgIHB1YmxpYyBTdHJpbmcgZ2V0RGVzY3JpcHRpb24oKSB7\nCiAgICAgICAgU3RyaW5nQnVmZmVyIGJ1ZiA9IG5ldyBTdHJpbmdCdWZmZXIo\nKTsKICAgICAgICBidWYuYXBwZW5kKCJGdWxsIE5hbWU6ICIpLmFwcGVuZChn\nZXRGdWxsTmFtZSgpKS5hcHBlbmQoIlxuIik7CiAgICAgICAgYnVmLmFwcGVu\nZCgiVHlwZTogIikuYXBwZW5kKFNjaGVtYXMuZ2V0SkRCQ05hbWUoZ2V0VHlw\nZSgpKSkuCiAgICAgICAgICAgIGFwcGVuZCgiXG4iKTsKICAgICAgICBidWYu\nYXBwZW5kKCJTaXplOiAiKS5hcHBlbmQoZ2V0U2l6ZSgpKS5hcHBlbmQoIlxu\nIik7CiAgICAgICAgYnVmLmFwcGVuZCgiRGVmYXVsdDogIikuYXBwZW5kKGdl\ndERlZmF1bHRTdHJpbmcoKSkuYXBwZW5kKCJcbiIpOwogICAgICAgIGJ1Zi5h\ncHBlbmQoIk5vdCBOdWxsOiAiKS5hcHBlbmQoaXNOb3ROdWxsKCkpLmFwcGVu\nZCgiXG4iKTsKICAgICAgICByZXR1cm4gYnVmLnRvU3RyaW5nKCk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBUZXN0cyBjb21wYXRpYmlsaXR5LgogICAgICov\nCiAgICBwdWJsaWMgYm9vbGVhbiBlcXVhbHNDb2x1bW4oQ29sdW1uIGNvbCkg\newogICAgICAgIGlmIChjb2wgPT0gdGhpcykKICAgICAgICAgICAgcmV0dXJu\nIHRydWU7CiAgICAgICAgaWYgKGNvbCA9PSBudWxsKQogICAgICAgICAgICBy\nZXR1cm4gZmFsc2U7CgogICAgICAgIGlmICghZ2V0RnVsbE5hbWUoKS5lcXVh\nbHNJZ25vcmVDYXNlKGNvbC5nZXRGdWxsTmFtZSgpKSkKICAgICAgICAgICAg\ncmV0dXJuIGZhbHNlOwogICAgICAgIGlmICghaXNDb21wYXRpYmxlKGNvbC5n\nZXRUeXBlKCksIGNvbC5nZXRUeXBlTmFtZSgpLCBjb2wuZ2V0U2l6ZSgpLAog\nICAgICAgICAgICBjb2wuZ2V0RGVjaW1hbERpZ2l0cygpKSkKICAgICAgICAg\nICAgcmV0dXJuIGZhbHNlOwogICAgICAgIGlmIChnZXRUeXBlKCkgPT0gVHlw\nZXMuVkFSQ0hBUiAmJiBnZXRTaXplKCkgPiAwICYmIGNvbC5nZXRTaXplKCkg\nPiAwCiAgICAgICAgICAgICYmIGdldFNpemUoKSAhPSBjb2wuZ2V0U2l6ZSgp\nKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgcmV0dXJuIHRy\ndWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBDb3B5IGluZm9ybWF0aW9uIGZy\nb20gdGhlIGdpdmVuIGNvbHVtbiB0byB0aGlzIG9uZS4KICAgICAqLwogICAg\ncHVibGljIHZvaWQgY29weShDb2x1bW4gZnJvbSkgewogICAgICAgIGlmIChm\ncm9tID09IG51bGwpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBpZiAo\nZ2V0TmFtZSgpID09IG51bGwpCiAgICAgICAgICAgIHNldE5hbWUoZnJvbS5n\nZXROYW1lKCkpOwogICAgICAgIGlmIChnZXRUeXBlKCkgPT0gVHlwZXMuT1RI\nRVIpCiAgICAgICAgICAgIHNldFR5cGUoZnJvbS5nZXRUeXBlKCkpOwogICAg\nICAgIGlmIChnZXRUeXBlTmFtZSgpID09IG51bGwpCiAgICAgICAgICAgIHNl\ndFR5cGVOYW1lKGZyb20uZ2V0VHlwZU5hbWUoKSk7CiAgICAgICAgaWYgKGdl\ndEphdmFUeXBlKCkgPT0gSmF2YVR5cGVzLk9CSkVDVCkKICAgICAgICAgICAg\nc2V0SmF2YVR5cGUoZnJvbS5nZXRKYXZhVHlwZSgpKTsKICAgICAgICBpZiAo\nZ2V0U2l6ZSgpID09IDApCiAgICAgICAgICAgIHNldFNpemUoZnJvbS5nZXRT\naXplKCkpOwogICAgICAgIGlmIChnZXREZWNpbWFsRGlnaXRzKCkgPT0gMCkK\nICAgICAgICAgICAgc2V0RGVjaW1hbERpZ2l0cyhmcm9tLmdldERlY2ltYWxE\naWdpdHMoKSk7CiAgICAgICAgaWYgKGdldERlZmF1bHRTdHJpbmcoKSA9PSBu\ndWxsKQogICAgICAgICAgICBzZXREZWZhdWx0U3RyaW5nKGZyb20uZ2V0RGVm\nYXVsdFN0cmluZygpKTsKICAgICAgICBpZiAoIWlzTm90TnVsbEV4cGxpY2l0\nKCkgJiYgZnJvbS5pc05vdE51bGxFeHBsaWNpdCgpKQogICAgICAgICAgICBz\nZXROb3ROdWxsKGZyb20uaXNOb3ROdWxsKCkpOwogICAgICAgIGlmICghaXNB\ndXRvQXNzaWduZWQoKSkKICAgICAgICAgICAgc2V0QXV0b0Fzc2lnbmVkKGZy\nb20uaXNBdXRvQXNzaWduZWQoKSk7CiAgICAgICAgaWYgKCFpc1JlbGF0aW9u\nSWQoKSkKICAgICAgICAgICAgc2V0UmVsYXRpb25JZChmcm9tLmlzUmVsYXRp\nb25JZCgpKTsKICAgICAgICBpZiAoZ2V0VGFyZ2V0KCkgPT0gbnVsbCkKICAg\nICAgICAgICAgc2V0VGFyZ2V0KGZyb20uZ2V0VGFyZ2V0KCkpOwogICAgICAg\nIGlmIChnZXRUYXJnZXRGaWVsZCgpID09IG51bGwpCiAgICAgICAgICAgIHNl\ndFRhcmdldEZpZWxkKGZyb20uZ2V0VGFyZ2V0RmllbGQoKSk7CiAgICAgICAg\naWYgKF9mbGFncyA9PSAwKQogICAgICAgICAgICBfZmxhZ3MgPSBmcm9tLl9m\nbGFnczsKICAgIH0KfQo=\n","encoding":"base64"}

