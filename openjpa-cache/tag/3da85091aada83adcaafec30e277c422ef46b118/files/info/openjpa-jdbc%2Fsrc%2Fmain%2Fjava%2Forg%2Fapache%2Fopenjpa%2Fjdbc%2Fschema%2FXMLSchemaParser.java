{"sha":"03ce539d1710e3fc6e4a76a5f2bbe4d1d28c21a1","node_id":"MDQ6QmxvYjIwNjM2NDowM2NlNTM5ZDE3MTBlM2ZjNmU0YTc2YTVmMmJiZTRkMWQyOGMyMWEx","size":20862,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/03ce539d1710e3fc6e4a76a5f2bbe4d1d28c21a1","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWE7CgppbXBv\ncnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEuaW8uSW5wdXRT\ndHJlYW1SZWFkZXI7CmltcG9ydCBqYXZhLmlvLlJlYWRlcjsKaW1wb3J0IGph\ndmEudXRpbC5Db2xsZWN0aW9uOwppbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9y\nOwppbXBvcnQgamF2YS51dGlsLkxpbmtlZExpc3Q7CgppbXBvcnQgb3JnLnht\nbC5zYXguQXR0cmlidXRlczsKaW1wb3J0IG9yZy54bWwuc2F4LlNBWEV4Y2Vw\ndGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmNvbmYuSkRC\nQ0NvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5zcWwuREJEaWN0aW9uYXJ5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmxpYi5tZXRhLlhNTE1ldGFEYXRhUGFyc2VyOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmxpYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6ZXIuTWVzc2FnZTsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLlVzZXJFeGNlcHRpb247CgovKioK\nICogQ3VzdG9tIFNBWCBwYXJzZXIgdXNlZCB0byBwYXJzZSB7QGxpbmsgU2No\nZW1hfSBvYmplY3RzLiBUaGUgcGFyc2VyCiAqIHdpbGwgcGxhY2UgYWxsIHBh\ncnNlZCBzY2hlbWFzIGludG8gdGhlIGN1cnJlbnQge0BsaW5rIFNjaGVtYUdy\nb3VwfSwgc2V0CiAqIHZpYSB0aGUge0BsaW5rICNzZXRTY2hlbWFHcm91cH0g\nbWV0aG9kLiBUaGlzIGFsbG93cyBwYXJzaW5nIG9mCiAqIG11bHRpcGxlIGZp\nbGVzIGludG8gYSBzaW5nbGUgc2NoZW1hIGdyb3VwLgogKiAgVGhlIHBhcnNl\nciBkZXNlcmlhbGl6ZXMgZnJvbSB0aGUgZm9sbG93aW5nIFhNTCBmb3JtYXQ6\nPGJyIC8+CiAqIDxjb2RlPiAmbHQ7IUVMRU1FTlQgc2NoZW1hcyAoc2NoZW1h\nKSsmZ3Q7PGJyIC8+CiAqICZsdDshRUxFTUVOVCBzY2hlbWEgKHRhYmxlfHNl\ncXVlbmNlKSsmZ3Q7PGJyIC8+CiAqICZsdDshQVRUTElTVCBzY2hlbWEgbmFt\nZSBDREFUQSAjSU1QTElFRCZndDs8YnIgLz4KICogJmx0OyFFTEVNRU5UIHRh\nYmxlIChjb2x1bW58aW5kZXh8cGt8Zmt8dW5pcXVlKSsmZ3Q7PGJyIC8+CiAq\nICZsdDshQVRUTElTVCB0YWJsZSBuYW1lIENEQVRBICNSRVFVSVJFRCZndDs8\nYnIgLz4KICogJmx0OyFFTEVNRU5UIGNvbHVtbiBFTVBUWSZndDs8YnIgLz4K\nICogJmx0OyFBVFRMSVNUIGNvbHVtbiBuYW1lIENEQVRBICNSRVFVSVJFRCZn\ndDs8YnIgLz4KICogJmx0OyFBVFRMSVNUIGNvbHVtbiB0eXBlIChhcnJheXxi\naWdpbnR8YmluYXJ5fGJpdHxibG9ifGNoYXJ8Y2xvYgogKiB8ZGF0ZXxkZWNp\nbWFsfGRpc3RpbmN0fGRvdWJsZXxmbG9hdHxpbnRlZ2VyfGphdmFfb2JqZWN0\nCiAqIHxsb25ndmFyYmluYXJ5fGxvbmd2YXJjaGFyfG51bGx8bnVtZXJpY3xv\ndGhlcnxyZWFsfHJlZnxzbWFsbGludHxzdHJ1Y3QKICogfHRpbWV8dGltc3Rh\nbXB8dGlueWludHx2YXJiaW5hcnl8dmFyY2hhcikgI1JFUVVJUkVEJmd0Ozxi\nciAvPgogKiAmbHQ7IUFUVExJU1QgY29sdW1uIHR5cGUtbmFtZSBDREFUQSAj\nSU1QTElFRCZndDs8YnIgLz4KICogJmx0OyFBVFRMSVNUIGNvbHVtbiBzaXpl\nIENEQVRBICNJTVBMSUVEJmd0OzxiciAvPgogKiAmbHQ7IUFUVExJU1QgY29s\ndW1uIGRlY2ltYWwtZGlnaXRzIENEQVRBICNJTVBMSUVEJmd0OzxiciAvPgog\nKiAmbHQ7IUFUVExJU1QgY29sdW1uIG5vdC1udWxsICh0cnVlfGZhbHNlKSAi\nZmFsc2UiJmd0OzxiciAvPgogKiAmbHQ7IUFUVExJU1QgY29sdW1uIGRlZmF1\nbHQgQ0RBVEEgI0lNUExJRUQmZ3Q7PGJyIC8+CiAqICZsdDshQVRUTElTVCBj\nb2x1bW4gYXV0by1hc3NpZ24gKHRydWV8ZmFsc2UpICJmYWxzZSImZ3Q7PGJy\nIC8+CiAqICZsdDshRUxFTUVOVCBpbmRleCAob24pKiZndDs8YnIgLz4KICog\nJmx0OyFBVFRMSVNUIGluZGV4IG5hbWUgQ0RBVEEgI1JFUVVJUkVEJmd0Ozxi\nciAvPgogKiAmbHQ7IUFUVExJU1QgaW5kZXggY29sdW1uIENEQVRBICNJTVBM\nSUVEJmd0OzxiciAvPgogKiAmbHQ7IUFUVExJU1QgaW5kZXggdW5pcXVlICh0\ncnVlfGZhbHNlKSAiZmFsc2UiJmd0OzxiciAvPgogKiAmbHQ7IUVMRU1FTlQg\nb24gRU1QVFkmZ3Q7PGJyIC8+CiAqICZsdDshQVRUTElTVCBvbiBjb2x1bW4g\nQ0RBVEEgI1JFUVVJUkVEJmd0OzxiciAvPgogKiAmbHQ7IUVMRU1FTlQgcGsg\nKG9uKSomZ3Q7PGJyIC8+ICZsdDshQVRUTElTVCBwayBuYW1lIENEQVRBICNJ\nTVBMSUVEJmd0OzxiciAvPgogKiAmbHQ7IUFUVExJU1QgcGsgY29sdW1uIENE\nQVRBICNJTVBMSUVEJmd0OzxiciAvPgogKiAmbHQ7IUVMRU1FTlQgZmsgKGpv\naW4pKiZndDs8YnIgLz4KICogJmx0OyFBVFRMSVNUIGZrIG5hbWUgQ0RBVEEg\nI0lNUExJRUQmZ3Q7PGJyIC8+CiAqICZsdDshQVRUTElTVCBmayBkZWZlcnJl\nZCAodHJ1ZXxmYWxzZSkgImZhbHNlIiZndDs8YnIgLz4KICogJmx0OyFBVFRM\nSVNUIGZrIGNvbHVtbiBDREFUQSAjSU1QTElFRCZndDs8YnIgLz4KICogJmx0\nOyFBVFRMSVNUIGZrIHRvLXRhYmxlIENEQVRBICNSRVFVSVJFRCZndDs8YnIg\nLz4KICogJmx0OyFBVFRMSVNUIGZrIGRlbGV0ZS1hY3Rpb24gKGNhc2NhZGV8\nZGVmYXVsdHxyZXN0cmljdHxub25lfG51bGwpCiAqICJub25lIiZndDs8YnIg\nLz4KICogJmx0OyFBVFRMSVNUIGZrIHVwZGF0ZS1hY3Rpb24gKGNhc2NhZGV8\nZGVmYXVsdHxyZXN0cmljdHxub25lfG51bGwpCiAqICJub25lIiZndDs8YnIg\nLz4gJmx0OyFFTEVNRU5UIHVuaXF1ZSAob24pKiZndDs8YnIgLz4KICogJmx0\nOyFBVFRMSVNUIHVuaXF1ZSBuYW1lIENEQVRBICNJTVBMSUVEJmd0OzxiciAv\nPgogKiAmbHQ7IUFUVExJU1QgdW5pcXVlIGNvbHVtbiBDREFUQSAjSU1QTElF\nRCZndDs8YnIgLz4KICogJmx0OyFBVFRMSVNUIHVuaXF1ZSBkZWZlcnJlZCAo\ndHJ1ZXxmYWxzZSkgImZhbHNlIiZndDs8YnIgLz4KICogJmx0OyFFTEVNRU5U\nIGpvaW4gRU1QVFkmZ3Q7PGJyIC8+CiAqICZsdDshQVRUTElTVCBqb2luIGNv\nbHVtbiBDREFUQSAjSU1QTElFRCZndDs8YnIgLz4KICogJmx0OyFBVFRMSVNU\nIGpvaW4gdmFsdWUgQ0RBVEEgI0lNUExJRUQmZ3Q7PGJyIC8+CiAqICZsdDsh\nQVRUTElTVCBqb2luIHRvLWNvbHVtbiBDREFUQSAjUkVRVUlSRUQmZ3Q7PGJy\nIC8+CiAqICZsdDshRUxFTUVOVCBzZXF1ZW5jZSBFTVBUWSZndDs8YnIgLz4K\nICogJmx0OyFBVFRMSVNUIHNlcXVlbmNlIG5hbWUgQ0RBVEEgI1JFUVVJUkVE\nJmd0OzxiciAvPgogKiAmbHQ7IUFUVExJU1Qgc2VxdWVuY2UgaW5pdGlhbC12\nYWx1ZSBDREFUQSAjSU1QTElFRCZndDs8YnIgLz4KICogJmx0OyFBVFRMSVNU\nIHNlcXVlbmNlIGluY3JlbWVudCBDREFUQSAjSU1QTElFRCZndDs8YnIgLz4K\nICogJmx0OyFBVFRMSVNUIHNlcXVlbmNlIGFsbG9jYXRlIENEQVRBICNJTVBM\nSUVEJmd0OzxiciAvPgogKiA8L2NvZGU+CiAqICBTY2hlbWEgcGFyc2VycyBh\ncmUgbm90IHRocmVhZHNhZmUuCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAq\nIEBub2phdmFkb2MKICovCnB1YmxpYyBjbGFzcyBYTUxTY2hlbWFQYXJzZXIK\nICAgIGV4dGVuZHMgWE1MTWV0YURhdGFQYXJzZXIKICAgIGltcGxlbWVudHMg\nU2NoZW1hUGFyc2VyIHsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2Nh\nbGl6ZXIgX2xvYyA9IExvY2FsaXplci5mb3JQYWNrYWdlCiAgICAgICAgKFhN\nTFNjaGVtYVBhcnNlci5jbGFzcyk7CgogICAgcHJpdmF0ZSBmaW5hbCBEQkRp\nY3Rpb25hcnkgX2RpY3Q7CgogICAgLy8gc3RhdGUgZm9yIGN1cnJlbnQgcGFy\nc2UKICAgIHByaXZhdGUgU2NoZW1hR3JvdXAgX2dyb3VwID0gbnVsbDsKICAg\nIHByaXZhdGUgU2NoZW1hIF9zY2hlbWEgPSBudWxsOwogICAgcHJpdmF0ZSBU\nYWJsZSBfdGFibGUgPSBudWxsOwogICAgcHJpdmF0ZSBQcmltYXJ5S2V5SW5m\nbyBfcGsgPSBudWxsOwogICAgcHJpdmF0ZSBJbmRleEluZm8gX2luZGV4ID0g\nbnVsbDsKICAgIHByaXZhdGUgVW5pcXVlSW5mbyBfdW5xID0gbnVsbDsKICAg\nIHByaXZhdGUgRm9yZWlnbktleUluZm8gX2ZrID0gbnVsbDsKICAgIHByaXZh\ndGUgYm9vbGVhbiBfZGVsYXkgPSBmYWxzZTsKCiAgICAvLyB1c2VkIHRvIGNv\nbGxlY3QgaW5mbyBvbiBzY2hlbWEgZWxlbWVudHMgYmVmb3JlIHRoZXkncmUg\ncmVzb2x2ZWQKICAgIHByaXZhdGUgZmluYWwgQ29sbGVjdGlvbiBfcGtJbmZv\ncyA9IG5ldyBMaW5rZWRMaXN0KCk7CiAgICBwcml2YXRlIGZpbmFsIENvbGxl\nY3Rpb24gX2luZGV4SW5mb3MgPSBuZXcgTGlua2VkTGlzdCgpOwogICAgcHJp\ndmF0ZSBmaW5hbCBDb2xsZWN0aW9uIF91bnFJbmZvcyA9IG5ldyBMaW5rZWRM\naXN0KCk7CiAgICBwcml2YXRlIGZpbmFsIENvbGxlY3Rpb24gX2ZrSW5mb3Mg\nPSBuZXcgTGlua2VkTGlzdCgpOwoKICAgIC8qKgogICAgICogQ29uc3RydWN0\nb3IuIFN1cHBseSBjb25maWd1cmF0aW9uLgogICAgICovCiAgICBwdWJsaWMg\nWE1MU2NoZW1hUGFyc2VyKEpEQkNDb25maWd1cmF0aW9uIGNvbmYpIHsKICAg\nICAgICBfZGljdCA9IGNvbmYuZ2V0REJEaWN0aW9uYXJ5SW5zdGFuY2UoKTsK\nICAgICAgICBzZXRMb2coY29uZi5nZXRMb2coSkRCQ0NvbmZpZ3VyYXRpb24u\nTE9HX1NDSEVNQSkpOwogICAgICAgIHNldFBhcnNlVGV4dChmYWxzZSk7CiAg\nICAgICAgc2V0U3VmZml4KCIuc2NoZW1hIik7CiAgICB9CgogICAgcHVibGlj\nIGJvb2xlYW4gZ2V0RGVsYXlDb25zdHJhaW50UmVzb2x2ZSgpIHsKICAgICAg\nICByZXR1cm4gX2RlbGF5OwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldERl\nbGF5Q29uc3RyYWludFJlc29sdmUoYm9vbGVhbiBkZWxheSkgewogICAgICAg\nIF9kZWxheSA9IGRlbGF5OwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHJlc29s\ndmVDb25zdHJhaW50cygpIHsKICAgICAgICByZXNvbHZlUHJpbWFyeUtleXMo\nKTsKICAgICAgICByZXNvbHZlSW5kZXhlcygpOwogICAgICAgIHJlc29sdmVG\nb3JlaWduS2V5cygpOwogICAgICAgIHJlc29sdmVVbmlxdWVzKCk7CiAgICAg\nICAgY2xlYXJDb25zdHJhaW50SW5mbygpOwogICAgfQoKICAgIC8qKgogICAg\nICogQ2xlYXIgY29uc3RyYWludCBpbmZvcy4KICAgICAqLwogICAgcHJpdmF0\nZSB2b2lkIGNsZWFyQ29uc3RyYWludEluZm8oKSB7CiAgICAgICAgX3BrSW5m\nb3MuY2xlYXIoKTsKICAgICAgICBfaW5kZXhJbmZvcy5jbGVhcigpOwogICAg\nICAgIF9ma0luZm9zLmNsZWFyKCk7CiAgICAgICAgX3VucUluZm9zLmNsZWFy\nKCk7CiAgICB9CgogICAgcHVibGljIFNjaGVtYUdyb3VwIGdldFNjaGVtYUdy\nb3VwKCkgewogICAgICAgIGlmIChfZ3JvdXAgPT0gbnVsbCkKICAgICAgICAg\nICAgX2dyb3VwID0gbmV3IFNjaGVtYUdyb3VwKCk7CiAgICAgICAgcmV0dXJu\nIF9ncm91cDsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRTY2hlbWFHcm91\ncChTY2hlbWFHcm91cCBncm91cCkgewogICAgICAgIF9ncm91cCA9IGdyb3Vw\nOwogICAgfQoKICAgIC8qKgogICAgICogUGFyc2UgdGhlIHNjaGVtYSByZWxh\ndGluZyB0byB0aGUgZ2l2ZW4gY2xhc3MuIFRoZSBzY2hlbWFzIHdpbGwKICAg\nICAqIGJlIGFkZGVkIHRvIHRoZSBjdXJyZW50IHNjaGVtYSBncm91cC4KICAg\nICAqLwogICAgcHJvdGVjdGVkIHZvaWQgZmluaXNoKCkgewogICAgICAgIC8v\nIG5vdyByZXNvbHZlIHBrLCBpZHgsIGZrIGluZm8KICAgICAgICBzdXBlci5m\naW5pc2goKTsKICAgICAgICBpZiAoIV9kZWxheSkKICAgICAgICAgICAgcmVz\nb2x2ZUNvbnN0cmFpbnRzKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBUcmFu\nc2Zvcm1zIHRoZSBjb2xsZWN0ZWQgcHJpbWFyeSBrZXkgaW5mb3JtYXRpb24g\naW50byBhY3R1YWwKICAgICAqIHByaW1hcnkga2V5cyBvbiB0aGUgc2NoZW1h\nIHRhYmxlcy4KICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIHJlc29sdmVQcmlt\nYXJ5S2V5cygpIHsKICAgICAgICBQcmltYXJ5S2V5SW5mbyBwa0luZm87CiAg\nICAgICAgU3RyaW5nIGNvbE5hbWU7CiAgICAgICAgQ29sdW1uIGNvbDsKICAg\nICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9IF9wa0luZm9zLml0ZXJhdG9yKCk7\nIGl0ci5oYXNOZXh0KCk7KSB7CiAgICAgICAgICAgIHBrSW5mbyA9IChQcmlt\nYXJ5S2V5SW5mbykgaXRyLm5leHQoKTsKICAgICAgICAgICAgZm9yIChJdGVy\nYXRvciBjb2xzID0gcGtJbmZvLmNvbHMuaXRlcmF0b3IoKTsgY29scy5oYXNO\nZXh0KCk7KSB7CiAgICAgICAgICAgICAgICBjb2xOYW1lID0gKFN0cmluZykg\nY29scy5uZXh0KCk7CiAgICAgICAgICAgICAgICBjb2wgPSBwa0luZm8ucGsu\nZ2V0VGFibGUoKS5nZXRDb2x1bW4oY29sTmFtZSk7CiAgICAgICAgICAgICAg\nICBpZiAoY29sID09IG51bGwpCiAgICAgICAgICAgICAgICAgICAgdGhyb3dV\nc2VyRXhjZXB0aW9uKF9sb2MuZ2V0KCJway1yZXNvbHZlIiwgbmV3IE9iamVj\ndFtdCiAgICAgICAgICAgICAgICAgICAgICAgIHsgY29sTmFtZSwgcGtJbmZv\nLnBrLmdldFRhYmxlKCkgfSkpOwogICAgICAgICAgICAgICAgcGtJbmZvLnBr\nLmFkZENvbHVtbihjb2wpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAg\nfQoKICAgIC8qKgogICAgICogVHJhbnNmb3JtcyB0aGUgY29sbGVjdGVkIGlu\nZGV4IGluZm9ybWF0aW9uIGludG8gYWN0dWFsCiAgICAgKiBpbmRleGVzIG9u\nIHRoZSBzY2hlbWEgdGFibGVzLgogICAgICovCiAgICBwcml2YXRlIHZvaWQg\ncmVzb2x2ZUluZGV4ZXMoKSB7CiAgICAgICAgSW5kZXhJbmZvIGluZGV4SW5m\nbzsKICAgICAgICBTdHJpbmcgY29sTmFtZTsKICAgICAgICBDb2x1bW4gY29s\nOwogICAgICAgIGZvciAoSXRlcmF0b3IgaXRyID0gX2luZGV4SW5mb3MuaXRl\ncmF0b3IoKTsgaXRyLmhhc05leHQoKTspIHsKICAgICAgICAgICAgaW5kZXhJ\nbmZvID0gKEluZGV4SW5mbykgaXRyLm5leHQoKTsKICAgICAgICAgICAgZm9y\nIChJdGVyYXRvciBjb2xzID0gaW5kZXhJbmZvLmNvbHMuaXRlcmF0b3IoKTsg\nY29scy5oYXNOZXh0KCk7KSB7CiAgICAgICAgICAgICAgICBjb2xOYW1lID0g\nKFN0cmluZykgY29scy5uZXh0KCk7CiAgICAgICAgICAgICAgICBjb2wgPSBp\nbmRleEluZm8uaW5kZXguZ2V0VGFibGUoKS5nZXRDb2x1bW4oY29sTmFtZSk7\nCiAgICAgICAgICAgICAgICBpZiAoY29sID09IG51bGwpCiAgICAgICAgICAg\nICAgICAgICAgdGhyb3dVc2VyRXhjZXB0aW9uKF9sb2MuZ2V0KCJpbmRleC1y\nZXNvbHZlIiwgbmV3IE9iamVjdFtdCiAgICAgICAgICAgICAgICAgICAgICAg\nIHsgaW5kZXhJbmZvLmluZGV4LCBjb2xOYW1lLAogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgaW5kZXhJbmZvLmluZGV4LmdldFRhYmxlKCkgfSkpOwog\nICAgICAgICAgICAgICAgaW5kZXhJbmZvLmluZGV4LmFkZENvbHVtbihjb2wp\nOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAg\nICogVHJhbnNmb3JtcyB0aGUgY29sbGVjdGVkIGZvcmVpZ24ga2V5IGluZm9y\nbWF0aW9uIGludG8gYWN0dWFsCiAgICAgKiBmb3JlaWduIGtleXMgb24gdGhl\nIHNjaGVtYSB0YWJsZXMuCiAgICAgKi8KICAgIHByaXZhdGUgdm9pZCByZXNv\nbHZlRm9yZWlnbktleXMoKSB7CiAgICAgICAgRm9yZWlnbktleUluZm8gZmtJ\nbmZvOwogICAgICAgIFRhYmxlIHRvVGFibGU7CiAgICAgICAgQ29sdW1uIGNv\nbDsKICAgICAgICBTdHJpbmcgY29sTmFtZTsKICAgICAgICBDb2x1bW4gcGtD\nb2w7CiAgICAgICAgU3RyaW5nIHBrQ29sTmFtZTsKICAgICAgICBQcmltYXJ5\nS2V5IHBrOwogICAgICAgIEl0ZXJhdG9yIHBrczsKICAgICAgICBJdGVyYXRv\nciBjb2xzOwogICAgICAgIGZvciAoSXRlcmF0b3IgaXRyID0gX2ZrSW5mb3Mu\naXRlcmF0b3IoKTsgaXRyLmhhc05leHQoKTspIHsKICAgICAgICAgICAgZmtJ\nbmZvID0gKEZvcmVpZ25LZXlJbmZvKSBpdHIubmV4dCgpOwogICAgICAgICAg\nICB0b1RhYmxlID0gX2dyb3VwLmZpbmRUYWJsZShma0luZm8udG9UYWJsZSk7\nCiAgICAgICAgICAgIGlmICh0b1RhYmxlID09IG51bGwgfHwgdG9UYWJsZS5n\nZXRQcmltYXJ5S2V5KCkgPT0gbnVsbCkKICAgICAgICAgICAgICAgIHRocm93\nVXNlckV4Y2VwdGlvbihfbG9jLmdldCgiZmstdG90YWJsZSIsIG5ldyBPYmpl\nY3RbXQogICAgICAgICAgICAgICAgICAgIHsgZmtJbmZvLmZrLCBma0luZm8u\ndG9UYWJsZSwgZmtJbmZvLmZrLmdldFRhYmxlKCkgfSkpOwoKICAgICAgICAg\nICAgLy8gY2hlY2sgaWYgb25seSBvbmUgZmsgY29sdW1uIGxpc3RlZCB1c2lu\nZyBzaG9ydGN1dAogICAgICAgICAgICBwayA9IHRvVGFibGUuZ2V0UHJpbWFy\neUtleSgpOwogICAgICAgICAgICBpZiAoZmtJbmZvLmNvbHMuc2l6ZSgpID09\nIDEgJiYgZmtJbmZvLnBrcy5zaXplKCkgPT0gMCkKICAgICAgICAgICAgICAg\nIGZrSW5mby5wa3MuYWRkKHBrLmdldENvbHVtbnMoKVswXS5nZXROYW1lKCkp\nOwoKICAgICAgICAgICAgLy8gbWFrZSBqb2lucwogICAgICAgICAgICBwa3Mg\nPSBma0luZm8ucGtzLml0ZXJhdG9yKCk7CiAgICAgICAgICAgIGZvciAoY29s\ncyA9IGZrSW5mby5jb2xzLml0ZXJhdG9yKCk7IGNvbHMuaGFzTmV4dCgpOykg\newogICAgICAgICAgICAgICAgY29sTmFtZSA9IChTdHJpbmcpIGNvbHMubmV4\ndCgpOwogICAgICAgICAgICAgICAgY29sID0gZmtJbmZvLmZrLmdldFRhYmxl\nKCkuZ2V0Q29sdW1uKGNvbE5hbWUpOwogICAgICAgICAgICAgICAgaWYgKGNv\nbCA9PSBudWxsKQogICAgICAgICAgICAgICAgICAgIHRocm93VXNlckV4Y2Vw\ndGlvbihfbG9jLmdldCgiZmstbm9jb2wiLAogICAgICAgICAgICAgICAgICAg\nICAgICBma0luZm8uZmssIGNvbE5hbWUsIGZrSW5mby5may5nZXRUYWJsZSgp\nKSk7CgogICAgICAgICAgICAgICAgcGtDb2xOYW1lID0gKFN0cmluZykgcGtz\nLm5leHQoKTsKICAgICAgICAgICAgICAgIHBrQ29sID0gdG9UYWJsZS5nZXRD\nb2x1bW4ocGtDb2xOYW1lKTsKICAgICAgICAgICAgICAgIGlmIChwa0NvbCA9\nPSBudWxsKQogICAgICAgICAgICAgICAgICAgIHRocm93VXNlckV4Y2VwdGlv\nbihfbG9jLmdldCgiZmstbm9wa2NvbCIsIG5ldyBPYmplY3RbXQogICAgICAg\nICAgICAgICAgICAgICAgICB7IGZrSW5mby5maywgcGtDb2xOYW1lLCB0b1Rh\nYmxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmtJbmZvLmZrLmdl\ndFRhYmxlKCkgfSkpOwoKICAgICAgICAgICAgICAgIGZrSW5mby5may5qb2lu\nKGNvbCwgcGtDb2wpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBt\nYWtlIGNvbnN0YW50IGpvaW5zCiAgICAgICAgICAgIGNvbHMgPSBma0luZm8u\nY29uc3RDb2xzLml0ZXJhdG9yKCk7CiAgICAgICAgICAgIGZvciAoSXRlcmF0\nb3IgdmFscyA9IGZrSW5mby5jb25zdHMuaXRlcmF0b3IoKTsgdmFscy5oYXNO\nZXh0KCk7KSB7CiAgICAgICAgICAgICAgICBjb2xOYW1lID0gKFN0cmluZykg\nY29scy5uZXh0KCk7CiAgICAgICAgICAgICAgICBjb2wgPSBma0luZm8uZmsu\nZ2V0VGFibGUoKS5nZXRDb2x1bW4oY29sTmFtZSk7CiAgICAgICAgICAgICAg\nICBpZiAoY29sID09IG51bGwpCiAgICAgICAgICAgICAgICAgICAgdGhyb3dV\nc2VyRXhjZXB0aW9uKF9sb2MuZ2V0KCJmay1ub2NvbCIsCiAgICAgICAgICAg\nICAgICAgICAgICAgIGZrSW5mby5maywgY29sTmFtZSwgZmtJbmZvLmZrLmdl\ndFRhYmxlKCkpKTsKCiAgICAgICAgICAgICAgICBma0luZm8uZmsuam9pbkNv\nbnN0YW50KGNvbCwgdmFscy5uZXh0KCkpOwogICAgICAgICAgICB9CgogICAg\nICAgICAgICBwa3MgPSBma0luZm8uY29uc3RDb2xzUEsuaXRlcmF0b3IoKTsK\nICAgICAgICAgICAgZm9yIChJdGVyYXRvciB2YWxzID0gZmtJbmZvLmNvbnN0\nc1BLLml0ZXJhdG9yKCk7IHZhbHMuaGFzTmV4dCgpOykgewogICAgICAgICAg\nICAgICAgcGtDb2xOYW1lID0gKFN0cmluZykgcGtzLm5leHQoKTsKICAgICAg\nICAgICAgICAgIHBrQ29sID0gdG9UYWJsZS5nZXRDb2x1bW4ocGtDb2xOYW1l\nKTsKICAgICAgICAgICAgICAgIGlmIChwa0NvbCA9PSBudWxsKQogICAgICAg\nICAgICAgICAgICAgIHRocm93VXNlckV4Y2VwdGlvbihfbG9jLmdldCgiZmst\nbm9wa2NvbCIsIG5ldyBPYmplY3RbXQogICAgICAgICAgICAgICAgICAgICAg\nICB7IGZrSW5mby5maywgcGtDb2xOYW1lLCB0b1RhYmxlLAogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgZmtJbmZvLmZrLmdldFRhYmxlKCkgfSkpOwoK\nICAgICAgICAgICAgICAgIGZrSW5mby5may5qb2luQ29uc3RhbnQodmFscy5u\nZXh0KCksIHBrQ29sKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0K\nCiAgICAvKioKICAgICAqIFRyYW5zZm9ybXMgdGhlIGNvbGxlY3RlZCB1bmlx\ndWUgY29uc3RyYWludCBpbmZvcm1hdGlvbiBpbnRvIGFjdHVhbAogICAgICog\nY29uc3RyYWludHMgb24gdGhlIHNjaGVtYSB0YWJsZXMuCiAgICAgKi8KICAg\nIHByaXZhdGUgdm9pZCByZXNvbHZlVW5pcXVlcygpIHsKICAgICAgICBVbmlx\ndWVJbmZvIHVucUluZm87CiAgICAgICAgU3RyaW5nIGNvbE5hbWU7CiAgICAg\nICAgQ29sdW1uIGNvbDsKICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9IF91\nbnFJbmZvcy5pdGVyYXRvcigpOyBpdHIuaGFzTmV4dCgpOykgewogICAgICAg\nICAgICB1bnFJbmZvID0gKFVuaXF1ZUluZm8pIGl0ci5uZXh0KCk7CiAgICAg\nICAgICAgIGZvciAoSXRlcmF0b3IgY29scyA9IHVucUluZm8uY29scy5pdGVy\nYXRvcigpOyBjb2xzLmhhc05leHQoKTspIHsKICAgICAgICAgICAgICAgIGNv\nbE5hbWUgPSAoU3RyaW5nKSBjb2xzLm5leHQoKTsKICAgICAgICAgICAgICAg\nIGNvbCA9IHVucUluZm8udW5xLmdldFRhYmxlKCkuZ2V0Q29sdW1uKGNvbE5h\nbWUpOwogICAgICAgICAgICAgICAgaWYgKGNvbCA9PSBudWxsKQogICAgICAg\nICAgICAgICAgICAgIHRocm93VXNlckV4Y2VwdGlvbihfbG9jLmdldCgidW5x\nLXJlc29sdmUiLCBuZXcgT2JqZWN0W10KICAgICAgICAgICAgICAgICAgICAg\nICAgeyB1bnFJbmZvLnVucSwgY29sTmFtZSwgdW5xSW5mby51bnEuZ2V0VGFi\nbGUoKSB9KSk7CiAgICAgICAgICAgICAgICB1bnFJbmZvLnVucS5hZGRDb2x1\nbW4oY29sKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBw\ncm90ZWN0ZWQgdm9pZCByZXNldCgpIHsKICAgICAgICBfc2NoZW1hID0gbnVs\nbDsKICAgICAgICBfdGFibGUgPSBudWxsOwogICAgICAgIF9wayA9IG51bGw7\nCiAgICAgICAgX2luZGV4ID0gbnVsbDsKICAgICAgICBfZmsgPSBudWxsOwog\nICAgICAgIF91bnEgPSBudWxsOwogICAgICAgIGlmICghX2RlbGF5KQogICAg\nICAgICAgICBjbGVhckNvbnN0cmFpbnRJbmZvKCk7CiAgICB9CgogICAgcHJv\ndGVjdGVkIFJlYWRlciBnZXREb2NUeXBlKCkKICAgICAgICB0aHJvd3MgSU9F\neGNlcHRpb24gewogICAgICAgIHJldHVybiBuZXcgSW5wdXRTdHJlYW1SZWFk\nZXIoWE1MU2NoZW1hUGFyc2VyLmNsYXNzCiAgICAgICAgICAgIC5nZXRSZXNv\ndXJjZUFzU3RyZWFtKCJzY2hlbWFzLWRvY3R5cGUucnNyYyIpKTsKICAgIH0K\nCiAgICBwcm90ZWN0ZWQgYm9vbGVhbiBzdGFydEVsZW1lbnQoU3RyaW5nIG5h\nbWUsIEF0dHJpYnV0ZXMgYXR0cnMpCiAgICAgICAgdGhyb3dzIFNBWEV4Y2Vw\ndGlvbiB7CiAgICAgICAgc3dpdGNoIChuYW1lLmNoYXJBdCgwKSkgewogICAg\nICAgICAgICBjYXNlJ3MnOgogICAgICAgICAgICAgICAgaWYgKCJzY2hlbWEi\nLmVxdWFscyhuYW1lKSkKICAgICAgICAgICAgICAgICAgICBzdGFydFNjaGVt\nYShhdHRycyk7CiAgICAgICAgICAgICAgICBlbHNlIGlmICgic2VxdWVuY2Ui\nLmVxdWFscyhuYW1lKSkKICAgICAgICAgICAgICAgICAgICBzdGFydFNlcXVl\nbmNlKGF0dHJzKTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAg\nICAgICAgICBjYXNlJ3QnOgogICAgICAgICAgICAgICAgc3RhcnRUYWJsZShh\ndHRycyk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAg\nICAgY2FzZSdjJzoKICAgICAgICAgICAgICAgIHN0YXJ0Q29sdW1uKGF0dHJz\nKTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICBj\nYXNlJ3AnOgogICAgICAgICAgICAgICAgc3RhcnRQcmltYXJ5S2V5KGF0dHJz\nKTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICBj\nYXNlJ2knOgogICAgICAgICAgICAgICAgc3RhcnRJbmRleChhdHRycyk7CiAg\nICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgY2FzZSd1\nJzoKICAgICAgICAgICAgICAgIHN0YXJ0VW5pcXVlKGF0dHJzKTsKICAgICAg\nICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICBjYXNlJ2YnOgog\nICAgICAgICAgICAgICAgc3RhcnRGb3JlaWduS2V5KGF0dHJzKTsKICAgICAg\nICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICBjYXNlJ28nOgog\nICAgICAgICAgICAgICAgc3RhcnRPbihhdHRycyk7CiAgICAgICAgICAgICAg\nICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgY2FzZSdqJzoKICAgICAgICAg\nICAgICAgIHN0YXJ0Sm9pbihhdHRycyk7CiAgICAgICAgICAgICAgICByZXR1\ncm4gdHJ1ZTsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAg\nIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgcHJvdGVjdGVk\nIHZvaWQgZW5kRWxlbWVudChTdHJpbmcgbmFtZSkgewogICAgICAgIHN3aXRj\naCAobmFtZS5jaGFyQXQoMCkpIHsKICAgICAgICAgICAgY2FzZSdzJzoKICAg\nICAgICAgICAgICAgIGlmICgic2NoZW1hIi5lcXVhbHMobmFtZSkpCiAgICAg\nICAgICAgICAgICAgICAgZW5kU2NoZW1hKCk7CiAgICAgICAgICAgICAgICBi\ncmVhazsKICAgICAgICAgICAgY2FzZSd0JzoKICAgICAgICAgICAgICAgIGVu\nZFRhYmxlKCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAg\nY2FzZSdwJzoKICAgICAgICAgICAgICAgIGVuZFByaW1hcnlLZXkoKTsKICAg\nICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlJ2knOgogICAg\nICAgICAgICAgICAgZW5kSW5kZXgoKTsKICAgICAgICAgICAgICAgIGJyZWFr\nOwogICAgICAgICAgICBjYXNlJ3UnOgogICAgICAgICAgICAgICAgZW5kVW5p\ncXVlKCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2Fz\nZSdmJzoKICAgICAgICAgICAgICAgIGVuZEZvcmVpZ25LZXkoKTsKICAgICAg\nICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgIH0KCiAgICBwcml2YXRl\nIHZvaWQgc3RhcnRTY2hlbWEoQXR0cmlidXRlcyBhdHRycykgewogICAgICAg\nIC8vIGNyZWF0ZXMgZ3JvdXAgaWYgbm90IHNldAogICAgICAgIFNjaGVtYUdy\nb3VwIGdyb3VwID0gZ2V0U2NoZW1hR3JvdXAoKTsKCiAgICAgICAgU3RyaW5n\nIG5hbWUgPSBhdHRycy5nZXRWYWx1ZSgibmFtZSIpOwogICAgICAgIF9zY2hl\nbWEgPSBncm91cC5nZXRTY2hlbWEobmFtZSk7CiAgICAgICAgaWYgKF9zY2hl\nbWEgPT0gbnVsbCkKICAgICAgICAgICAgX3NjaGVtYSA9IGdyb3VwLmFkZFNj\naGVtYShuYW1lKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgZW5kU2NoZW1h\nKCkgewogICAgICAgIF9zY2hlbWEgPSBudWxsOwogICAgfQoKICAgIHByaXZh\ndGUgdm9pZCBzdGFydFNlcXVlbmNlKEF0dHJpYnV0ZXMgYXR0cnMpIHsKICAg\nICAgICBTZXF1ZW5jZSBzZXEgPSBfc2NoZW1hLmFkZFNlcXVlbmNlKGF0dHJz\nLmdldFZhbHVlKCJuYW1lIikpOwogICAgICAgIHNlcS5zZXRTb3VyY2UoZ2V0\nU291cmNlRmlsZSgpLCBzZXEuU1JDX1hNTCk7CiAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgU3RyaW5nIHZhbCA9IGF0dHJzLmdldFZhbHVlKCJpbml0aWFs\nLXZhbHVlIik7CiAgICAgICAgICAgIGlmICh2YWwgIT0gbnVsbCkKICAgICAg\nICAgICAgICAgIHNlcS5zZXRJbml0aWFsVmFsdWUoSW50ZWdlci5wYXJzZUlu\ndCh2YWwpKTsKICAgICAgICAgICAgdmFsID0gYXR0cnMuZ2V0VmFsdWUoImlu\nY3JlbWVudCIpOwogICAgICAgICAgICBpZiAodmFsICE9IG51bGwpCiAgICAg\nICAgICAgICAgICBzZXEuc2V0SW5jcmVtZW50KEludGVnZXIucGFyc2VJbnQo\ndmFsKSk7CiAgICAgICAgICAgIHZhbCA9IGF0dHJzLmdldFZhbHVlKCJhbGxv\nY2F0ZSIpOwogICAgICAgICAgICBpZiAodmFsICE9IG51bGwpCiAgICAgICAg\nICAgICAgICBzZXEuc2V0QWxsb2NhdGUoSW50ZWdlci5wYXJzZUludCh2YWwp\nKTsKICAgICAgICB9IGNhdGNoIChOdW1iZXJGb3JtYXRFeGNlcHRpb24gbmZl\nKSB7CiAgICAgICAgICAgIHRocm93VXNlckV4Y2VwdGlvbihfbG9jLmdldCgi\nYmFkLXNlcS1udW0iLCBzZXEuZ2V0RnVsbE5hbWUoKSkpOwogICAgICAgIH0K\nICAgIH0KCiAgICBwcml2YXRlIHZvaWQgc3RhcnRUYWJsZShBdHRyaWJ1dGVz\nIGF0dHJzKSB7CiAgICAgICAgX3RhYmxlID0gX3NjaGVtYS5hZGRUYWJsZShh\ndHRycy5nZXRWYWx1ZSgibmFtZSIpKTsKICAgICAgICBfdGFibGUuc2V0U291\ncmNlKGdldFNvdXJjZUZpbGUoKSwgX3RhYmxlLlNSQ19YTUwpOwogICAgfQoK\nICAgIHByaXZhdGUgdm9pZCBlbmRUYWJsZSgpIHsKICAgICAgICBfdGFibGUg\nPSBudWxsOwogICAgfQoKICAgIHByaXZhdGUgdm9pZCBzdGFydENvbHVtbihB\ndHRyaWJ1dGVzIGF0dHJzKSB7CiAgICAgICAgQ29sdW1uIGNvbCA9IF90YWJs\nZS5hZGRDb2x1bW4oYXR0cnMuZ2V0VmFsdWUoIm5hbWUiKSk7CiAgICAgICAg\nY29sLnNldFR5cGUoX2RpY3QuZ2V0UHJlZmVycmVkVHlwZShTY2hlbWFzLmdl\ndEpEQkNUeXBlCiAgICAgICAgICAgIChhdHRycy5nZXRWYWx1ZSgidHlwZSIp\nKSkpOwogICAgICAgIGNvbC5zZXRUeXBlTmFtZShhdHRycy5nZXRWYWx1ZSgi\ndHlwZS1uYW1lIikpOwogICAgICAgIFN0cmluZyB2YWwgPSBhdHRycy5nZXRW\nYWx1ZSgic2l6ZSIpOwogICAgICAgIGlmICh2YWwgIT0gbnVsbCkKICAgICAg\nICAgICAgY29sLnNldFNpemUoSW50ZWdlci5wYXJzZUludCh2YWwpKTsKICAg\nICAgICB2YWwgPSBhdHRycy5nZXRWYWx1ZSgiZGVjaW1hbC1kaWdpdHMiKTsK\nICAgICAgICBpZiAodmFsICE9IG51bGwpCiAgICAgICAgICAgIGNvbC5zZXRE\nZWNpbWFsRGlnaXRzKEludGVnZXIucGFyc2VJbnQodmFsKSk7CiAgICAgICAg\nY29sLnNldE5vdE51bGwoInRydWUiLmVxdWFscyhhdHRycy5nZXRWYWx1ZSgi\nbm90LW51bGwiKSkpOwogICAgICAgIGNvbC5zZXRBdXRvQXNzaWduZWQoInRy\ndWUiLmVxdWFscyhhdHRycy5nZXRWYWx1ZSgiYXV0by1hc3NpZ24iKSkKICAg\nICAgICAgICAgfHwgInRydWUiLmVxdWFscyhhdHRycy5nZXRWYWx1ZSgiYXV0\nby1pbmNyZW1lbnQiKSkpOyAvLyBvbGQgYXR0cgogICAgICAgIGNvbC5zZXRE\nZWZhdWx0U3RyaW5nKGF0dHJzLmdldFZhbHVlKCJkZWZhdWx0IikpOwogICAg\nfQoKICAgIHByaXZhdGUgdm9pZCBzdGFydFByaW1hcnlLZXkoQXR0cmlidXRl\ncyBhdHRycykgewogICAgICAgIF9wayA9IG5ldyBQcmltYXJ5S2V5SW5mbygp\nOwogICAgICAgIF9way5wayA9IF90YWJsZS5hZGRQcmltYXJ5S2V5KGF0dHJz\nLmdldFZhbHVlKCJuYW1lIikpOwogICAgICAgIF9way5way5zZXRMb2dpY2Fs\nKCJ0cnVlIi5lcXVhbHMoYXR0cnMuZ2V0VmFsdWUoImxvZ2ljYWwiKSkpOwoK\nICAgICAgICBTdHJpbmcgdmFsID0gYXR0cnMuZ2V0VmFsdWUoImNvbHVtbiIp\nOwogICAgICAgIGlmICh2YWwgIT0gbnVsbCkKICAgICAgICAgICAgX3BrLmNv\nbHMuYWRkKHZhbCk7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIGVuZFByaW1h\ncnlLZXkoKSB7CiAgICAgICAgX3BrSW5mb3MuYWRkKF9wayk7CiAgICAgICAg\nX3BrID0gbnVsbDsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgc3RhcnRJbmRl\neChBdHRyaWJ1dGVzIGF0dHJzKSB7CiAgICAgICAgX2luZGV4ID0gbmV3IElu\nZGV4SW5mbygpOwogICAgICAgIF9pbmRleC5pbmRleCA9IF90YWJsZS5hZGRJ\nbmRleChhdHRycy5nZXRWYWx1ZSgibmFtZSIpKTsKICAgICAgICBfaW5kZXgu\naW5kZXguc2V0VW5pcXVlKCJ0cnVlIi5lcXVhbHMoYXR0cnMuZ2V0VmFsdWUo\nInVuaXF1ZSIpKSk7CgogICAgICAgIFN0cmluZyB2YWwgPSBhdHRycy5nZXRW\nYWx1ZSgiY29sdW1uIik7CiAgICAgICAgaWYgKHZhbCAhPSBudWxsKQogICAg\nICAgICAgICBfaW5kZXguY29scy5hZGQodmFsKTsKICAgIH0KCiAgICBwcml2\nYXRlIHZvaWQgZW5kSW5kZXgoKSB7CiAgICAgICAgX2luZGV4SW5mb3MuYWRk\nKF9pbmRleCk7CiAgICAgICAgX2luZGV4ID0gbnVsbDsKICAgIH0KCiAgICBw\ncml2YXRlIHZvaWQgc3RhcnRVbmlxdWUoQXR0cmlidXRlcyBhdHRycykgewog\nICAgICAgIF91bnEgPSBuZXcgVW5pcXVlSW5mbygpOwogICAgICAgIF91bnEu\ndW5xID0gX3RhYmxlLmFkZFVuaXF1ZShhdHRycy5nZXRWYWx1ZSgibmFtZSIp\nKTsKICAgICAgICBfdW5xLnVucS5zZXREZWZlcnJlZCgidHJ1ZSIuZXF1YWxz\nKGF0dHJzLmdldFZhbHVlKCJkZWZlcnJlZCIpKSk7CgogICAgICAgIFN0cmlu\nZyB2YWwgPSBhdHRycy5nZXRWYWx1ZSgiY29sdW1uIik7CiAgICAgICAgaWYg\nKHZhbCAhPSBudWxsKQogICAgICAgICAgICBfdW5xLmNvbHMuYWRkKHZhbCk7\nCiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIGVuZFVuaXF1ZSgpIHsKICAgICAg\nICBfdW5xSW5mb3MuYWRkKF91bnEpOwogICAgICAgIF91bnEgPSBudWxsOwog\nICAgfQoKICAgIHByaXZhdGUgdm9pZCBzdGFydEZvcmVpZ25LZXkoQXR0cmli\ndXRlcyBhdHRycykgewogICAgICAgIF9mayA9IG5ldyBGb3JlaWduS2V5SW5m\nbygpOwogICAgICAgIF9may5mayA9IF90YWJsZS5hZGRGb3JlaWduS2V5KGF0\ndHJzLmdldFZhbHVlKCJuYW1lIikpOwoKICAgICAgICBpZiAoInRydWUiLmVx\ndWFscyhhdHRycy5nZXRWYWx1ZSgiZGVmZXJyZWQiKSkpCiAgICAgICAgICAg\nIF9may5may5zZXREZWZlcnJlZCh0cnVlKTsKCiAgICAgICAgLy8gc2V0IHVw\nZGF0ZSBhY3Rpb24gYmVmb3JlIGRlbGV0ZSBhY3Rpb24gaW4gY2FzZSB1c2Vy\nIGluY29ycmVjdGx5CiAgICAgICAgLy8gc2V0cyB1cGRhdGUtYWN0aW9uIHRv\nICJub25lIiB3aGVuIHRoZXJlIGlzIGEgZGVsZXRlLWFjdGlvbjsgb3RoZXJ3\naXNlCiAgICAgICAgLy8gc2V0dGluZyB0aGUgdXBkYXRlLWFjdGlvbiB0byAi\nbm9uZSIgd2lsbCBhbHNvIGF1dG9tYXRpY2FsbHkgc2V0IHRoZQogICAgICAg\nIC8vIGRlbGV0ZS1hY3Rpb24gdG8gIm5vbmUiLCBzaW5jZSBGS3MgY2Fubm90\nIGhhdmUgb25lIGFjdGlvIGJlIG5vbmUgYW5kCiAgICAgICAgLy8gdGhlIG90\naGVyIGJlIG5vbi1ub25lCiAgICAgICAgU3RyaW5nIGFjdGlvbiA9IGF0dHJz\nLmdldFZhbHVlKCJ1cGRhdGUtYWN0aW9uIik7CiAgICAgICAgaWYgKGFjdGlv\nbiAhPSBudWxsKQogICAgICAgICAgICBfZmsuZmsuc2V0VXBkYXRlQWN0aW9u\nKEZvcmVpZ25LZXkuZ2V0QWN0aW9uKGFjdGlvbikpOwogICAgICAgIGFjdGlv\nbiA9IGF0dHJzLmdldFZhbHVlKCJkZWxldGUtYWN0aW9uIik7CiAgICAgICAg\naWYgKGFjdGlvbiAhPSBudWxsKQogICAgICAgICAgICBfZmsuZmsuc2V0RGVs\nZXRlQWN0aW9uKEZvcmVpZ25LZXkuZ2V0QWN0aW9uKGFjdGlvbikpOwoKICAg\nICAgICBfZmsudG9UYWJsZSA9IGF0dHJzLmdldFZhbHVlKCJ0by10YWJsZSIp\nOwogICAgICAgIFN0cmluZyB2YWwgPSBhdHRycy5nZXRWYWx1ZSgiY29sdW1u\nIik7CiAgICAgICAgaWYgKHZhbCAhPSBudWxsKQogICAgICAgICAgICBfZmsu\nY29scy5hZGQodmFsKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgZW5kRm9y\nZWlnbktleSgpIHsKICAgICAgICBfZmtJbmZvcy5hZGQoX2ZrKTsKICAgICAg\nICBfZmsgPSBudWxsOwogICAgfQoKICAgIHByaXZhdGUgdm9pZCBzdGFydE9u\nKEF0dHJpYnV0ZXMgYXR0cnMpIHsKICAgICAgICBTdHJpbmcgY29sID0gYXR0\ncnMuZ2V0VmFsdWUoImNvbHVtbiIpOwogICAgICAgIGlmIChfcGsgIT0gbnVs\nbCkKICAgICAgICAgICAgX3BrLmNvbHMuYWRkKGNvbCk7CiAgICAgICAgZWxz\nZSBpZiAoX2luZGV4ICE9IG51bGwpCiAgICAgICAgICAgIF9pbmRleC5jb2xz\nLmFkZChjb2wpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgX3VucS5jb2xz\nLmFkZChjb2wpOwogICAgfQoKICAgIHByaXZhdGUgdm9pZCBzdGFydEpvaW4o\nQXR0cmlidXRlcyBhdHRycykgewogICAgICAgIFN0cmluZyBjb2wgPSBhdHRy\ncy5nZXRWYWx1ZSgiY29sdW1uIik7CiAgICAgICAgU3RyaW5nIHRvQ29sID0g\nYXR0cnMuZ2V0VmFsdWUoInRvLWNvbHVtbiIpOwogICAgICAgIFN0cmluZyB2\nYWwgPSBhdHRycy5nZXRWYWx1ZSgidmFsdWUiKTsKICAgICAgICBpZiAodmFs\nID09IG51bGwpIHsKICAgICAgICAgICAgX2ZrLmNvbHMuYWRkKGNvbCk7CiAg\nICAgICAgICAgIF9may5wa3MuYWRkKHRvQ29sKTsKICAgICAgICB9IGVsc2Ug\naWYgKGNvbCA9PSBudWxsKSB7CiAgICAgICAgICAgIF9may5jb25zdHNQSy5h\nZGQoY29udmVydENvbnN0YW50KHZhbCkpOwogICAgICAgICAgICBfZmsuY29u\nc3RDb2xzUEsuYWRkKHRvQ29sKTsKICAgICAgICB9IGVsc2UgewogICAgICAg\nICAgICBfZmsuY29uc3RzLmFkZChjb252ZXJ0Q29uc3RhbnQodmFsKSk7CiAg\nICAgICAgICAgIF9may5jb25zdENvbHMuYWRkKGNvbCk7CiAgICAgICAgfQog\nICAgfQoKICAgIHByaXZhdGUgc3RhdGljIE9iamVjdCBjb252ZXJ0Q29uc3Rh\nbnQoU3RyaW5nIHZhbCkgewogICAgICAgIGlmICgibnVsbCIuZXF1YWxzKHZh\nbCkpCiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIGlmICh2YWwu\nc3RhcnRzV2l0aCgiJyIpKQogICAgICAgICAgICByZXR1cm4gdmFsLnN1YnN0\ncmluZygxLCB2YWwubGVuZ3RoKCkgLSAxKTsKICAgICAgICBpZiAodmFsLmlu\nZGV4T2YoJy4nKSA9PSAtMSkKICAgICAgICAgICAgcmV0dXJuIG5ldyBMb25n\nKHZhbCk7CiAgICAgICAgcmV0dXJuIG5ldyBEb3VibGUodmFsKTsKICAgIH0K\nCiAgICBwcml2YXRlIHZvaWQgdGhyb3dVc2VyRXhjZXB0aW9uKE1lc3NhZ2Ug\nbXNnKSB7CiAgICAgICAgdGhyb3cgbmV3IFVzZXJFeGNlcHRpb24oZ2V0U291\ncmNlTmFtZSgpICsgIjogIiArIG1zZy5nZXRNZXNzYWdlKCkpOwogICAgfQoK\nICAgIC8qKgogICAgICogVXNlZCB0byBob2xkIHByaW1hcnkga2V5IGluZm8g\nYmVmb3JlIGl0IGlzIHJlc29sdmVkLgogICAgICovCiAgICBwcml2YXRlIHN0\nYXRpYyBjbGFzcyBQcmltYXJ5S2V5SW5mbyB7CgogICAgICAgIHB1YmxpYyBQ\ncmltYXJ5S2V5IHBrID0gbnVsbDsKICAgICAgICBwdWJsaWMgQ29sbGVjdGlv\nbiBjb2xzID0gbmV3IExpbmtlZExpc3QoKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIFVzZWQgdG8gaG9sZCBpbmRleCBpbmZvIGJlZm9yZSBpdCBpcyByZXNv\nbHZlZC4KICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgY2xhc3MgSW5kZXhJ\nbmZvIHsKCiAgICAgICAgcHVibGljIEluZGV4IGluZGV4ID0gbnVsbDsKICAg\nICAgICBwdWJsaWMgQ29sbGVjdGlvbiBjb2xzID0gbmV3IExpbmtlZExpc3Qo\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIFVzZWQgdG8gaG9sZCB1bmlxdWUg\nY29uc3RyYWludCBpbmZvIGJlZm9yZSBpdCBpcyByZXNvbHZlZC4KICAgICAq\nLwogICAgcHVibGljIHN0YXRpYyBjbGFzcyBVbmlxdWVJbmZvIHsKCiAgICAg\nICAgcHVibGljIFVuaXF1ZSB1bnEgPSBudWxsOwogICAgICAgIHB1YmxpYyBD\nb2xsZWN0aW9uIGNvbHMgPSBuZXcgTGlua2VkTGlzdCgpOwogICAgfQoKICAg\nIC8qKgogICAgICogVXNlZCB0byBob2xkIGZvcmVpZ24ga2V5IGluZm8gYmVm\nb3JlIGl0IGlzIHJlc29sdmVkLgogICAgICovCiAgICBwcml2YXRlIHN0YXRp\nYyBjbGFzcyBGb3JlaWduS2V5SW5mbyB7CgogICAgICAgIHB1YmxpYyBGb3Jl\naWduS2V5IGZrID0gbnVsbDsKICAgICAgICBwdWJsaWMgU3RyaW5nIHRvVGFi\nbGUgPSBudWxsOwogICAgICAgIHB1YmxpYyBDb2xsZWN0aW9uIGNvbHMgPSBu\nZXcgTGlua2VkTGlzdCgpOwogICAgICAgIHB1YmxpYyBDb2xsZWN0aW9uIHBr\ncyA9IG5ldyBMaW5rZWRMaXN0KCk7CiAgICAgICAgcHVibGljIENvbGxlY3Rp\nb24gY29uc3RzID0gbmV3IExpbmtlZExpc3QoKTsKICAgICAgICBwdWJsaWMg\nQ29sbGVjdGlvbiBjb25zdENvbHMgPSBuZXcgTGlua2VkTGlzdCgpOwogICAg\nICAgIHB1YmxpYyBDb2xsZWN0aW9uIGNvbnN0c1BLID0gbmV3IExpbmtlZExp\nc3QoKTsKICAgICAgICBwdWJsaWMgQ29sbGVjdGlvbiBjb25zdENvbHNQSyA9\nIG5ldyBMaW5rZWRMaXN0KCk7CiAgICB9Cn0K\n","encoding":"base64"}

