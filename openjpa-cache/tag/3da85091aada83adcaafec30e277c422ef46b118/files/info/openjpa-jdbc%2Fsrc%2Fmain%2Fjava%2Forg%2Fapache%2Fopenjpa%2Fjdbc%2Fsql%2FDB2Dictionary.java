{"sha":"1fad66c2b831f23a11958b7066a759cdf3acdd79","node_id":"MDQ6QmxvYjIwNjM2NDoxZmFkNjZjMmI4MzFmMjNhMTE5NThiNzA2NmE3NTljZGYzYWNkZDc5","size":17722,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/1fad66c2b831f23a11958b7066a759cdf3acdd79","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5zcWw7DQoNCmltcG9ydCBqYXZhLmxhbmcucmVmbGVjdC5NZXRob2Q7\nDQppbXBvcnQgamF2YS5zcWwuQ29ubmVjdGlvbjsNCmltcG9ydCBqYXZhLnNx\nbC5EYXRhYmFzZU1ldGFEYXRhOw0KaW1wb3J0IGphdmEuc3FsLlNRTEV4Y2Vw\ndGlvbjsNCmltcG9ydCBqYXZhLnV0aWwuQXJyYXlzOw0KaW1wb3J0IGphdmEu\ndXRpbC5TdHJpbmdUb2tlbml6ZXI7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmpkYmMua2VybmVsLkpEQkNGZXRjaENvbmZpZ3VyYXRpb247DQppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLlNlcXVlbmNlOw0K\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLk9wZW5KUEFFeGNlcHRp\nb247DQoNCi8qKg0KICogRGljdGlvbmFyeSBmb3IgSUJNIERCMiBkYXRhYmFz\nZS4NCiAqLw0KcHVibGljIGNsYXNzIERCMkRpY3Rpb25hcnkNCiAgICBleHRl\nbmRzIEFic3RyYWN0REIyRGljdGlvbmFyeSB7DQoNCiAgICBwdWJsaWMgU3Ry\naW5nIG9wdGltaXplQ2xhdXNlID0gIm9wdGltaXplIGZvciI7DQogICAgcHVi\nbGljIFN0cmluZyByb3dDbGF1c2UgPSAicm93IjsNCiAgICBwcml2YXRlIGlu\ndCBkYjJTZXJ2ZXJUeXBlID0gMDsNCiAgICBwcml2YXRlIHN0YXRpYyBmaW5h\nbCBpbnQgZGIySVNlcmllc1Y1UjNBbmRFYXJsaWVyID0gMTsNCiAgICBwcml2\nYXRlIHN0YXRpYyBmaW5hbCBpbnQgZGIyVURCVjgxT3JFYXJsaWVyID0gMjsN\nCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBpbnQgZGIyWk9TVjh4T3JMYXRl\nciA9IDM7DQogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgaW50IGRiMlVEQlY4\nMkFuZExhdGVyID0gNDsNCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBpbnQg\nZGIySVNlcmllc1Y1UjRBbmRMYXRlciA9IDU7DQoJcHJpdmF0ZSBzdGF0aWMg\nZmluYWwgU3RyaW5nIGZvclVwZGF0ZU9mQ2xhdXNlID0gIkZPUiBVUERBVEUg\nT0YiOw0KICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyB3aXRoUlND\nbGF1c2UgPSAiV0lUSCBSUyI7DQogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwg\nU3RyaW5nIHdpdGhSUkNsYXVzZSA9ICJXSVRIIFJSIjsNCiAgICBwcml2YXRl\nIHN0YXRpYyBmaW5hbCBTdHJpbmcgdXNlS2VlcFVwZGF0ZUxvY2tDbGF1c2UN\nCiAgICAgICAgPSAiVVNFIEFORCBLRUVQIFVQREFURSBMT0NLUyI7DQogICAg\ncHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIHVzZUtlZXBFeGNsdXNpdmVM\nb2NrQ2xhdXNlDQogICAgICAgID0gIlVTRSBBTkQgS0VFUCBFWENMVVNJVkUg\nTE9DS1MiOw0KICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBmb3JS\nZWFkT25seUNsYXVzZSA9ICJGT1IgUkVBRCBPTkxZIjsNCg0KICAgIHB1Ymxp\nYyBEQjJEaWN0aW9uYXJ5KCkgew0KICAgICAgICBwbGF0Zm9ybSA9ICJEQjIi\nOw0KICAgICAgICB2YWxpZGF0aW9uU1FMID0gIlNFTEVDVCBESVNUSU5DVChD\nVVJSRU5UIFRJTUVTVEFNUCkgRlJPTSAiDQogICAgICAgICAgICArICJTWVNJ\nQk0uU1lTVEFCTEVTIjsNCiAgICAgICAgc3VwcG9ydHNTZWxlY3RFbmRJbmRl\neCA9IHRydWU7DQoNCiAgICAgICAgbmV4dFNlcXVlbmNlUXVlcnkgPSAiVkFM\nVUVTIE5FWFRWQUwgRk9SIHswfSI7DQoNCiAgICAgICAgc2VxdWVuY2VTUUwg\nPSAiU0VMRUNUIFNFUVNDSEVNQSBBUyBTRVFVRU5DRV9TQ0hFTUEsICINCiAg\nICAgICAgICAgICsgIlNFUU5BTUUgQVMgU0VRVUVOQ0VfTkFNRSBGUk9NIFNZ\nU0NBVC5TRVFVRU5DRVMiOw0KICAgICAgICBzZXF1ZW5jZVNjaGVtYVNRTCA9\nICJTRVFTQ0hFTUEgPSA/IjsNCiAgICAgICAgc2VxdWVuY2VOYW1lU1FMID0g\nIlNFUU5BTUUgPSA/IjsNCiAgICAgICAgY2hhcmFjdGVyQ29sdW1uU2l6ZSA9\nIDI1NDsNCg0KICAgICAgICBiaW5hcnlUeXBlTmFtZSA9ICJCTE9CKDFNKSI7\nDQogICAgICAgIGxvbmdWYXJiaW5hcnlUeXBlTmFtZSA9ICJCTE9CKDFNKSI7\nDQogICAgICAgIHZhcmJpbmFyeVR5cGVOYW1lID0gIkJMT0IoMU0pIjsNCiAg\nICAgICAgY2xvYlR5cGVOYW1lID0gIkNMT0IoMU0pIjsNCiAgICAgICAgbG9u\nZ1ZhcmNoYXJUeXBlTmFtZSA9ICJMT05HIFZBUkNIQVIiOw0KDQogICAgICAg\nIGZpeGVkU2l6ZVR5cGVOYW1lU2V0LmFkZEFsbChBcnJheXMuYXNMaXN0KG5l\ndyBTdHJpbmdbXXsNCiAgICAgICAgICAgICJMT05HIFZBUkNIQVIgRk9SIEJJ\nVCBEQVRBIiwgIkxPTkcgVkFSQ0hBUiIsICJMT05HIFZBUkdSQVBISUMiLA0K\nICAgICAgICB9KSk7DQoNCiAgICAgICAgbWF4Q29uc3RyYWludE5hbWVMZW5n\ndGggPSAxODsNCiAgICAgICAgbWF4SW5kZXhOYW1lTGVuZ3RoID0gMTg7DQog\nICAgICAgIG1heENvbHVtbk5hbWVMZW5ndGggPSAzMDsNCiAgICAgICAgc3Vw\ncG9ydHNEZWZlcnJlZENvbnN0cmFpbnRzID0gZmFsc2U7DQogICAgICAgIHN1\ncHBvcnRzRGVmYXVsdERlbGV0ZUFjdGlvbiA9IGZhbHNlOw0KICAgICAgICBz\ndXBwb3J0c0FsdGVyVGFibGVXaXRoRHJvcENvbHVtbiA9IGZhbHNlOw0KDQog\nICAgICAgIHN1cHBvcnRzTnVsbFRhYmxlRm9yR2V0Q29sdW1ucyA9IGZhbHNl\nOw0KICAgICAgICByZXF1aXJlc0Nhc3RGb3JNYXRoRnVuY3Rpb25zID0gdHJ1\nZTsNCiAgICAgICAgcmVxdWlyZXNDYXN0Rm9yQ29tcGFyaXNvbnMgPSB0cnVl\nOw0KDQogICAgICAgIHJlc2VydmVkV29yZFNldC5hZGRBbGwoQXJyYXlzLmFz\nTGlzdChuZXcgU3RyaW5nW117DQogICAgICAgICAgICAiQUZURVIiLCAiQUxJ\nQVMiLCAiQUxMT1ciLCAiQVBQTElDQVRJT04iLCAiQVNTT0NJQVRFIiwgIkFT\nVVRJTUUiLA0KICAgICAgICAgICAgIkFVRElUIiwgIkFVWCIsICJBVVhJTElB\nUlkiLCAiQkVGT1JFIiwgIkJJTkFSWSIsICJCVUZGRVJQT09MIiwNCiAgICAg\nICAgICAgICJDQUNIRSIsICJDQUxMIiwgIkNBTExFRCIsICJDQVBUVVJFIiwg\nIkNBUkRJTkFMSVRZIiwgIkNDU0lEIiwNCiAgICAgICAgICAgICJDTFVTVEVS\nIiwgIkNPTExFQ1RJT04iLCAiQ09MTElEIiwgIkNPTU1FTlQiLCAiQ09OQ0FU\nIiwNCiAgICAgICAgICAgICJDT05ESVRJT04iLCAiQ09OVEFJTlMiLCAiQ09V\nTlRfQklHIiwgIkNVUlJFTlRfTENfQ1RZUEUiLA0KICAgICAgICAgICAgIkNV\nUlJFTlRfUEFUSCIsICJDVVJSRU5UX1NFUlZFUiIsICJDVVJSRU5UX1RJTUVa\nT05FIiwgIkNZQ0xFIiwNCiAgICAgICAgICAgICJEQVRBIiwgIkRBVEFCQVNF\nIiwgIkRBWVMiLCAiREIyR0VORVJBTCIsICJEQjJHRU5STCIsICJEQjJTUUwi\nLA0KICAgICAgICAgICAgIkRCSU5GTyIsICJERUZBVUxUUyIsICJERUZJTklU\nSU9OIiwgIkRFVEVSTUlOSVNUSUMiLCAiRElTQUxMT1ciLA0KICAgICAgICAg\nICAgIkRPIiwgIkRTTkhBVFRSIiwgIkRTU0laRSIsICJEWU5BTUlDIiwgIkVB\nQ0giLCAiRURJVFBST0MiLCAiRUxTRUlGIiwNCiAgICAgICAgICAgICJFTkNP\nRElORyIsICJFTkQtRVhFQzEiLCAiRVJBU0UiLCAiRVhDTFVESU5HIiwgIkVY\nSVQiLCAiRkVOQ0VEIiwNCiAgICAgICAgICAgICJGSUVMRFBST0MiLCAiRklM\nRSIsICJGSU5BTCIsICJGUkVFIiwgIkZVTkNUSU9OIiwgIkdFTkVSQUwiLA0K\nICAgICAgICAgICAgIkdFTkVSQVRFRCIsICJHUkFQSElDIiwgIkhBTkRMRVIi\nLCAiSE9MRCIsICJIT1VSUyIsICJJRiIsDQogICAgICAgICAgICAiSU5DTFVE\nSU5HIiwgIklOQ1JFTUVOVCIsICJJTkRFWCIsICJJTkhFUklUIiwgIklOT1VU\nIiwgIklOVEVHUklUWSIsDQogICAgICAgICAgICAiSVNPQklEIiwgIklURVJB\nVEUiLCAiSkFSIiwgIkpBVkEiLCAiTEFCRUwiLCAiTENfQ1RZUEUiLCAiTEVB\nVkUiLA0KICAgICAgICAgICAgIkxJTktUWVBFIiwgIkxPQ0FMRSIsICJMT0NB\nVE9SIiwgIkxPQ0FUT1JTIiwgIkxPQ0siLCAiTE9DS01BWCIsDQogICAgICAg\nICAgICAiTE9DS1NJWkUiLCAiTE9ORyIsICJMT09QIiwgIk1BWFZBTFVFIiwg\nIk1JQ1JPU0VDT05EIiwNCiAgICAgICAgICAgICJNSUNST1NFQ09ORFMiLCAi\nTUlOVVRFUyIsICJNSU5WQUxVRSIsICJNT0RFIiwgIk1PRElGSUVTIiwgIk1P\nTlRIUyIsDQogICAgICAgICAgICAiTkVXIiwgIk5FV19UQUJMRSIsICJOT0NB\nQ0hFIiwgIk5PQ1lDTEUiLCAiTk9ERU5BTUUiLCAiTk9ERU5VTUJFUiIsDQog\nICAgICAgICAgICAiTk9NQVhWQUxVRSIsICJOT01JTlZBTFVFIiwgIk5PT1JE\nRVIiLCAiTlVMTFMiLCAiTlVNUEFSVFMiLCAiT0JJRCIsDQogICAgICAgICAg\nICAiT0xEIiwgIk9MRF9UQUJMRSIsICJPUFRJTUlaQVRJT04iLCAiT1BUSU1J\nWkUiLCAiT1VUIiwgIk9WRVJSSURJTkciLA0KICAgICAgICAgICAgIlBBQ0tB\nR0UiLCAiUEFSQU1FVEVSIiwgIlBBUlQiLCAiUEFSVElUSU9OIiwgIlBBVEgi\nLCAiUElFQ0VTSVpFIiwNCiAgICAgICAgICAgICJQTEFOIiwgIlBSSVFUWSIs\nICJQUk9HUkFNIiwgIlBTSUQiLCAiUVVFUllOTyIsICJSRUFEUyIsICJSRUNP\nVkVSWSIsDQogICAgICAgICAgICAiUkVGRVJFTkNJTkciLCAiUkVMRUFTRSIs\nICJSRU5BTUUiLCAiUkVQRUFUIiwgIlJFU0VUIiwgIlJFU0lHTkFMIiwNCiAg\nICAgICAgICAgICJSRVNUQVJUIiwgIlJFU1VMVCIsICJSRVNVTFRfU0VUX0xP\nQ0FUT1IiLCAiUkVUVVJOIiwgIlJFVFVSTlMiLA0KICAgICAgICAgICAgIlJP\nVVRJTkUiLCAiUk9XIiwgIlJSTiIsICJSVU4iLCAiU0FWRVBPSU5UIiwgIlND\nUkFUQ0hQQUQiLA0KICAgICAgICAgICAgIlNFQ09ORFMiLCAiU0VDUVRZIiwg\nIlNFQ1VSSVRZIiwgIlNFTlNJVElWRSIsICJTSUdOQUwiLCAiU0lNUExFIiwN\nCiAgICAgICAgICAgICJTT1VSQ0UiLCAiU1BFQ0lGSUMiLCAiU1FMSUQiLCAi\nU1RBTkRBUkQiLCAiU1RBUlQiLCAiU1RBVElDIiwNCiAgICAgICAgICAgICJT\nVEFZIiwgIlNUT0dST1VQIiwgIlNUT1JFUyIsICJTVFlMRSIsICJTVUJQQUdF\nUyIsICJTWU5PTllNIiwNCiAgICAgICAgICAgICJTWVNGVU4iLCAiU1lTSUJN\nIiwgIlNZU1BST0MiLCAiU1lTVEVNIiwgIlRBQkxFU1BBQ0UiLCAiVFJJR0dF\nUiIsDQogICAgICAgICAgICAiVFlQRSIsICJVTkRPIiwgIlVOVElMIiwgIlZB\nTElEUFJPQyIsICJWQVJJQUJMRSIsICJWQVJJQU5UIiwgIlZDQVQiLA0KICAg\nICAgICAgICAgIlZPTFVNRVMiLCAiV0hJTEUiLCAiV0xNIiwgIllFQVJTIiwN\nCiAgICAgICAgfSkpOw0KICAgIH0NCg0KICAgIHB1YmxpYyBib29sZWFuIHN1\ncHBvcnRzUmFuZG9tQWNjZXNzUmVzdWx0U2V0KFNlbGVjdCBzZWwsDQogICAg\nICAgIGJvb2xlYW4gZm9yVXBkYXRlKSB7DQogICAgICAgIHJldHVybiAhZm9y\nVXBkYXRlDQogICAgICAgICAgICAmJiBzdXBlci5zdXBwb3J0c1JhbmRvbUFj\nY2Vzc1Jlc3VsdFNldChzZWwsIGZvclVwZGF0ZSk7DQogICAgfQ0KDQogICAg\ncHJvdGVjdGVkIHZvaWQgYXBwZW5kU2VsZWN0UmFuZ2UoU1FMQnVmZmVyIGJ1\nZiwgbG9uZyBzdGFydCwgbG9uZyBlbmQpIHsNCiAgICAgICAgLy8gYXBwZW5k\ncyB0aGUgbGl0ZXJhbCByYW5nZSBzdHJpbmcsIHNpbmNlIERCMiBpcyB1bmFi\nbGUgdG8gaGFuZGxlDQogICAgICAgIC8vIGEgYm91bmQgcGFyYW1ldGVyIGZv\nciBpdA0KICAgICAgICBidWYuYXBwZW5kKCIgRkVUQ0ggRklSU1QgIikuYXBw\nZW5kKExvbmcudG9TdHJpbmcoZW5kKSkuDQogICAgICAgICAgICBhcHBlbmQo\nIiBST1dTIE9OTFkiKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgU3RyaW5nW10g\nZ2V0Q3JlYXRlU2VxdWVuY2VTUUwoU2VxdWVuY2Ugc2VxKSB7DQogICAgICAg\nIFN0cmluZ1tdIHNxbCA9IHN1cGVyLmdldENyZWF0ZVNlcXVlbmNlU1FMKHNl\ncSk7DQogICAgICAgIGlmIChzZXEuZ2V0QWxsb2NhdGUoKSA+IDEpDQogICAg\nICAgICAgICBzcWxbMF0gKz0gIiBDQUNIRSAiICsgc2VxLmdldEFsbG9jYXRl\nKCk7DQogICAgICAgIHJldHVybiBzcWw7DQogICAgfQ0KDQogICAgcHJvdGVj\ndGVkIFN0cmluZyBnZXRTZXF1ZW5jZXNTUUwoU3RyaW5nIHNjaGVtYU5hbWUs\nIFN0cmluZyBzZXF1ZW5jZU5hbWUpIHsNCiAgICAgICAgU3RyaW5nQnVmZmVy\nIGJ1ZiA9IG5ldyBTdHJpbmdCdWZmZXIoKTsNCiAgICAgICAgYnVmLmFwcGVu\nZChzZXF1ZW5jZVNRTCk7DQogICAgICAgIGlmIChzY2hlbWFOYW1lICE9IG51\nbGwgfHwgc2VxdWVuY2VOYW1lICE9IG51bGwpDQogICAgICAgICAgICBidWYu\nYXBwZW5kKCIgV0hFUkUgIik7DQogICAgICAgIGlmIChzY2hlbWFOYW1lICE9\nIG51bGwpIHsNCiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoc2VxdWVuY2VTY2hl\nbWFTUUwpOw0KICAgICAgICAgICAgaWYgKHNlcXVlbmNlTmFtZSAhPSBudWxs\nKQ0KICAgICAgICAgICAgICAgIGJ1Zi5hcHBlbmQoIiBBTkQgIik7DQogICAg\nICAgIH0NCiAgICAgICAgaWYgKHNlcXVlbmNlTmFtZSAhPSBudWxsKQ0KICAg\nICAgICAgICAgYnVmLmFwcGVuZChzZXF1ZW5jZU5hbWVTUUwpOw0KICAgICAg\nICByZXR1cm4gYnVmLnRvU3RyaW5nKCk7DQogICAgfQ0KDQogICAgcHVibGlj\nIENvbm5lY3Rpb24gZGVjb3JhdGUoQ29ubmVjdGlvbiBjb25uKQ0KICAgICAg\nICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsNCiAgICAgICAgLy8gc29tZSB2ZXJz\naW9ucyBvZiB0aGUgREIyIGRyaXZlciBzZWVtIHRvIGRlZmF1bHQgdG8NCiAg\nICAgICAgLy8gUkVBRF9VTkNPTU1JVFRFRCwgd2hpY2ggd2lsbCBwcmV2ZW50\nIGxvY2tpbmcgZnJvbSB3b3JraW5nDQogICAgICAgIC8vIChtdWx0aXBsZSBT\nRUxFQ1QgLi4uIEZPUiBVUERBVEUgc3RhdGVtZW50cyBhcmUgYWxsb3dlZCBv\nbg0KICAgICAgICAvLyB0aGUgc2FtZSBpbnN0YW5jZSk7IGlmIHdlIGhhdmUg\nbm90IG92ZXJyaWRkZW4gdGhlDQogICAgICAgIC8vIHRyYW5zYWN0aW9uIGlz\nb2xhdGlvbiBpbiB0aGUgY29uZmlndXJhdGlvbiwgZGVmYXVsdCB0bw0KICAg\nICAgICAvLyBUUkFOU0FDVElPTl9SRUFEX0NPTU1JVFRFRA0KICAgICAgICBj\nb25uID0gc3VwZXIuZGVjb3JhdGUoY29ubik7DQoNCiAgICAgICAgaWYgKGNv\nbmYuZ2V0VHJhbnNhY3Rpb25Jc29sYXRpb25Db25zdGFudCgpID09IC0xDQog\nICAgICAgICAgICAmJiBjb25uLmdldFRyYW5zYWN0aW9uSXNvbGF0aW9uKCkg\nPCBjb25uLlRSQU5TQUNUSU9OX1JFQURfQ09NTUlUVEVEKQ0KICAgICAgICAg\nICAgY29ubi5zZXRUcmFuc2FjdGlvbklzb2xhdGlvbihjb25uLlRSQU5TQUNU\nSU9OX1JFQURfQ09NTUlUVEVEKTsNCg0KICAgICAgICByZXR1cm4gY29ubjsN\nCiAgICB9DQoNCiAgICBwcml2YXRlIGJvb2xlYW4gaXNKREJDMyhEYXRhYmFz\nZU1ldGFEYXRhIG1ldGEpIHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAg\nIC8vIEpEQkMzLW9ubHkgbWV0aG9kLCBzbyBpdCBtaWdodCB0aHJvdyBhIEFi\nc3RyYWN0TWV0aG9kRXJyb3INCiAgICAgICAgICAgIHJldHVybiBtZXRhLmdl\ndEpEQkNNYWpvclZlcnNpb24oKSA+PSAzOw0KICAgICAgICB9IGNhdGNoIChU\naHJvd2FibGUgdCkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAg\nICAgICB9DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgY29ubmVjdGVkQ29u\nZmlndXJhdGlvbihDb25uZWN0aW9uIGNvbm4pIHRocm93cyBTUUxFeGNlcHRp\nb24gew0KICAgIAlzdXBlci5jb25uZWN0ZWRDb25maWd1cmF0aW9uKGNvbm4p\nOw0KDQogICAgCURhdGFiYXNlTWV0YURhdGEgbWV0YURhdGEgPSBjb25uLmdl\ndE1ldGFEYXRhKCk7DQogICAgCWlmIChpc0pEQkMzKG1ldGFEYXRhKSkgew0K\nCQkJaW50IG1haiA9IG1ldGFEYXRhLmdldERhdGFiYXNlTWFqb3JWZXJzaW9u\nKCk7DQoJICAgIAlpbnQgbWluID0gbWV0YURhdGEuZ2V0RGF0YWJhc2VNaW5v\nclZlcnNpb24oKTsNCg0KCSAgICAJLy8gRGV0ZXJtaW5lIHRoZSB0eXBlIG9m\nIERCMiBkYXRhYmFzZQ0KCSAgICAJaWYgKGlzREIySVNlcmllc1Y1UjNBbmRF\nYXJsaWVyKG1ldGFEYXRhKSkNCgkgICAgCSAgICBkYjJTZXJ2ZXJUeXBlID0g\nZGIySVNlcmllc1Y1UjNBbmRFYXJsaWVyOw0KCSAgICAJZWxzZSBpZiAoaXNE\nQjJVREJWODFPckVhcmxpZXIobWV0YURhdGEsbWFqLG1pbikpDQoJICAgIAkg\nICAgZGIyU2VydmVyVHlwZSA9IGRiMlVEQlY4MU9yRWFybGllcjsNCgkgICAg\nCWVsc2UgaWYgKGlzREIyWk9TVjh4T3JMYXRlcihtZXRhRGF0YSxtYWopKQ0K\nCSAgICAJICAgIGRiMlNlcnZlclR5cGUgPSBkYjJaT1NWOHhPckxhdGVyOw0K\nCSAgICAJZWxzZSBpZiAoaXNEQjJVREJWODJBbmRMYXRlcihtZXRhRGF0YSxt\nYWosbWluKSkNCgkgICAgCSAgICBkYjJTZXJ2ZXJUeXBlID0gZGIyVURCVjgy\nQW5kTGF0ZXI7DQoJICAgIAllbHNlIGlmIChpc0RCMklTZXJpZXNWNVI0QW5k\nTGF0ZXIobWV0YURhdGEpKQ0KCSAgICAJICAgIGRiMlNlcnZlclR5cGUgPSBk\nYjJJU2VyaWVzVjVSNEFuZExhdGVyOw0KDQoJICAgIAlpZiAobWFqID49IDkg\nfHwgKG1haiA9PSA4ICYmIG1pbiA+PSAyKSkgew0KCSAgICAJCXN1cHBvcnRz\nTG9ja2luZ1dpdGhNdWx0aXBsZVRhYmxlcyA9IHRydWU7DQoJICAgIAkJc3Vw\ncG9ydHNMb2NraW5nV2l0aElubmVySm9pbiA9IHRydWU7DQoJICAgIAkJc3Vw\ncG9ydHNMb2NraW5nV2l0aE91dGVySm9pbiA9IHRydWU7DQoJICAgIAkJZm9y\nVXBkYXRlQ2xhdXNlID0gIldJVEggUlIgVVNFIEFORCBLRUVQIFVQREFURSBM\nT0NLUyI7DQoJICAgIAl9DQoNCiAgICAgICAgICAgIGlmIChtZXRhRGF0YS5n\nZXREYXRhYmFzZVByb2R1Y3RWZXJzaW9uKCkuaW5kZXhPZigiRFNOIikgIT0g\nLTEpIHsNCiAgICAgICAgICAgICAgICAvLyBEQjIgWi9PUw0KICAgICAgICAg\nICAgICAgIGNoYXJhY3RlckNvbHVtblNpemUgPSAyNTU7DQogICAgICAgICAg\nICAgICAgbGFzdEdlbmVyYXRlZEtleVF1ZXJ5ID0gIlNFTEVDVCBJREVOVElU\nWV9WQUxfTE9DQUwoKSBGUk9NICINCiAgICAgICAgICAgICAgICAgICAgKyAi\nU1lTSUJNLlNZU0RVTU1ZMSI7DQogICAgICAgICAgICAgICAgbmV4dFNlcXVl\nbmNlUXVlcnkgPSAiU0VMRUNUIE5FWFRWQUwgRk9SIHswfSBGUk9NICINCiAg\nICAgICAgICAgICAgICAgICAgKyAiU1lTSUJNLlNZU0RVTU1ZMSI7DQogICAg\nICAgICAgICAgICAgc2VxdWVuY2VTUUwgPSAiU0VMRUNUIFNDSEVNQSBBUyBT\nRVFVRU5DRV9TQ0hFTUEsICINCiAgICAgICAgICAgICAgICAgICAgKyAiTkFN\nRSBBUyBTRVFVRU5DRV9OQU1FIEZST00gU1lTSUJNLlNZU1NFUVVFTkNFUyI7\nDQogICAgICAgICAgICAgICAgc2VxdWVuY2VTY2hlbWFTUUwgPSAiU0NIRU1B\nID0gPyI7DQogICAgICAgICAgICAgICAgc2VxdWVuY2VOYW1lU1FMID0gIk5B\nTUUgPSA/IjsNCiAgICAgICAgICAgICAgICBpZiAobWFqID09IDgpIHsNCiAg\nICAgICAgICAgICAgICAgICAgLy8gREIyIFovT1MgVmVyc2lvbiA4OiBubyBi\naWdpbnQgc3VwcG9ydCwgaGVuY2UgbWFwIEphdmENCiAgICAgICAgICAgICAg\nICAgICAgLy8gbG9uZyB0byBkZWNpbWFsDQogICAgICAgICAgICAgICAgICAg\nIGJpZ2ludFR5cGVOYW1lID0gIkRFQ0lNQUwoMzEsMCkiOw0KICAgICAgICAg\nICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0K\nICAgIC8qKg0KICAgICAqIEdldCB0aGUgdXBkYXRlIGNsYXVzZSBmb3IgdGhl\nIHF1ZXJ5IGJhc2VkIG9uIHRoZQ0KICAgICAqIHVwZGF0ZUNsYXVzZSBhbmQg\naXNvbGF0aW9uTGV2ZWwgaGludHMNCiAgICAgKi8NCiAgICBwcm90ZWN0ZWQg\nU3RyaW5nIGdldEZvclVwZGF0ZUNsYXVzZShKREJDRmV0Y2hDb25maWd1cmF0\naW9uIGZldGNoLA0KICAgICAgICBib29sZWFuIGZvclVwZGF0ZSkgew0KICAg\nICAgICBpbnQgaXNvbGF0aW9uTGV2ZWw7DQogICAgICAgIFN0cmluZ0J1ZmZl\nciBmb3JVcGRhdGVTdHJpbmcgPSBuZXcgU3RyaW5nQnVmZmVyKCk7DQogICAg\nICAgIHRyeSB7DQogICAgICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIGlzb2xh\ndGlvbkxldmVsOyB0aGUgZmV0Y2gNCiAgICAgICAgICAgIC8vIGNvbmZpZ3Vy\nYXRpb24gZGF0YSBvdmVycmlkZXMgdGhlIHBlcnNpc3RlbmNlLnhtbCB2YWx1\nZQ0KICAgICAgICAgICAgaWYgKGZldGNoICE9IG51bGwgJiYgZmV0Y2guZ2V0\nSXNvbGF0aW9uKCkgIT0gLTEpDQogICAgICAgICAgICAgICAgaXNvbGF0aW9u\nTGV2ZWwgPSBmZXRjaC5nZXRJc29sYXRpb24oKTsNCiAgICAgICAgICAgIGVs\nc2UNCiAgICAgICAgICAgICAgICBpc29sYXRpb25MZXZlbCA9IGNvbmYuZ2V0\nVHJhbnNhY3Rpb25Jc29sYXRpb25Db25zdGFudCgpOw0KDQogICAgICAgICAg\nICBpZiAoZm9yVXBkYXRlKSB7DQogICAgICAgICAgICAgICAgc3dpdGNoKGRi\nMlNlcnZlclR5cGUpIHsNCiAgICAgICAgICAgICAgICBjYXNlIGRiMklTZXJp\nZXNWNVIzQW5kRWFybGllcjoNCiAgICAgICAgICAgICAgICBjYXNlIGRiMlVE\nQlY4MU9yRWFybGllcjoNCiAgICAgICAgICAgICAgICAgICAgaWYgKGlzb2xh\ndGlvbkxldmVsID09DQogICAgICAgICAgICAgICAgICAgICAgICBDb25uZWN0\naW9uLlRSQU5TQUNUSU9OX1JFQURfVU5DT01NSVRURUQpIHsNCiAgICAgICAg\nICAgICAgICAgICAgICAgIGZvclVwZGF0ZVN0cmluZy5hcHBlbmQoIiAiKS5h\ncHBlbmQod2l0aFJTQ2xhdXNlKQ0KICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIC5hcHBlbmQoIiAiKS5hcHBlbmQoZm9yVXBkYXRlT2ZDbGF1c2UpOw0K\nICAgICAgICAgICAgICAgICAgICB9IGVsc2UNCiAgICAgICAgICAgICAgICAg\nICAgICAgIGZvclVwZGF0ZVN0cmluZy5hcHBlbmQoIiAiKS5hcHBlbmQoZm9y\nVXBkYXRlT2ZDbGF1c2UpOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsN\nCiAgICAgICAgICAgICAgICBjYXNlIGRiMlpPU1Y4eE9yTGF0ZXI6DQogICAg\nICAgICAgICAgICAgY2FzZSBkYjJVREJWODJBbmRMYXRlcjoNCiAgICAgICAg\nICAgICAgICAgICAgaWYgKGlzb2xhdGlvbkxldmVsID09IENvbm5lY3Rpb24u\nVFJBTlNBQ1RJT05fU0VSSUFMSVpBQkxFKSB7DQogICAgICAgICAgICAgICAg\nICAgICAgICBmb3JVcGRhdGVTdHJpbmcuYXBwZW5kKCIgIikuYXBwZW5kKGZv\nclJlYWRPbmx5Q2xhdXNlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIC5hcHBlbmQoIiAiKS5hcHBlbmQod2l0aFJSQ2xhdXNlKQ0KICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoIiAiKS5hcHBlbmQodXNlS2Vl\ncFVwZGF0ZUxvY2tDbGF1c2UpOyAgIA0KICAgICAgICAgICAgICAgICAgICB9\nIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yVXBkYXRlU3Ry\naW5nLmFwcGVuZCgiICIpLmFwcGVuZChmb3JSZWFkT25seUNsYXVzZSkNCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCIgIikuYXBwZW5k\nKHdpdGhSU0NsYXVzZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAu\nYXBwZW5kKCIgIikuYXBwZW5kKHVzZUtlZXBVcGRhdGVMb2NrQ2xhdXNlKTsg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAg\nICAgIH0NCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAg\nICAgICAgY2FzZSBkYjJJU2VyaWVzVjVSNEFuZExhdGVyOg0KICAgICAgICAg\nICAgICAgICAgICBpZiAoaXNvbGF0aW9uTGV2ZWwgPT0gQ29ubmVjdGlvbi5U\nUkFOU0FDVElPTl9TRVJJQUxJWkFCTEUpIHsNCiAgICAgICAgICAgICAgICAg\nICAgICAgIGZvclVwZGF0ZVN0cmluZy5hcHBlbmQoIiAiKS5hcHBlbmQoZm9y\nUmVhZE9ubHlDbGF1c2UpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAg\nLmFwcGVuZCgiICIpLmFwcGVuZCh3aXRoUlJDbGF1c2UpDQogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgLmFwcGVuZCgiICIpLmFwcGVuZCh1c2VLZWVw\nRXhjbHVzaXZlTG9ja0NsYXVzZSk7ICAgICAgIA0KICAgICAgICAgICAgICAg\nICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yVXBk\nYXRlU3RyaW5nLmFwcGVuZCgiICIpLmFwcGVuZChmb3JSZWFkT25seUNsYXVz\nZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCIgIiku\nYXBwZW5kKHdpdGhSU0NsYXVzZSkNCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAuYXBwZW5kKCIgIikuYXBwZW5kKHVzZUtlZXBFeGNsdXNpdmVMb2Nr\nQ2xhdXNlKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAg\nICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAg\nICB9DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7\nDQogICAgICAgICAgICBpZiAobG9nLmlzVHJhY2VFbmFibGVkKCkpDQogICAg\nICAgICAgICAgICAgbG9nLmVycm9yKGUudG9TdHJpbmcoKSxlKTsNCiAgICAg\nICAgfQ0KICAgICAgICByZXR1cm4gZm9yVXBkYXRlU3RyaW5nLnRvU3RyaW5n\nKCk7DQogICAgfQ0KDQogICAgcHVibGljIGJvb2xlYW4gaXNEQjJVREJWODJB\nbmRMYXRlcihEYXRhYmFzZU1ldGFEYXRhIG1ldGFkYXRhLCBpbnQgbWFqLA0K\nICAgICAgICBpbnQgbWluKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsNCiAgICAg\nICAgYm9vbGVhbiBtYXRjaCA9IGZhbHNlOw0KICAgICAgICBpZiAobWV0YWRh\ndGEuZ2V0RGF0YWJhc2VQcm9kdWN0VmVyc2lvbigpLmluZGV4T2YoIlNRTCIp\nICE9IC0xDQogICAgICAgICAgICAmJiAoKG1haiA9PSA4ICYmIG1pbiA+PSAy\nKSB8fChtYWogPj0gOCkpKQ0KICAgICAgICAgICAgbWF0Y2ggPSB0cnVlOw0K\nICAgICAgICByZXR1cm4gbWF0Y2g7DQogICAgfQ0KDQogICAgcHVibGljIGJv\nb2xlYW4gaXNEQjJaT1NWOHhPckxhdGVyKERhdGFiYXNlTWV0YURhdGEgbWV0\nYWRhdGEsIGludCBtYWopDQogICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7\nDQogICAgICAgYm9vbGVhbiBtYXRjaCA9IGZhbHNlOw0KICAgICAgIGlmICht\nZXRhZGF0YS5nZXREYXRhYmFzZVByb2R1Y3RWZXJzaW9uKCkuaW5kZXhPZigi\nRFNOIikgIT0gLTENCiAgICAgICAgICAgJiYgbWFqID49IDgpDQogICAgICAg\nICAgIG1hdGNoID0gdHJ1ZTsNCiAgICAgICAgcmV0dXJuIG1hdGNoOw0KICAg\nIH0NCg0KICAgIHB1YmxpYyBib29sZWFuIGlzREIySVNlcmllc1Y1UjNBbmRF\nYXJsaWVyKERhdGFiYXNlTWV0YURhdGEgbWV0YWRhdGEpDQogICAgICAgdGhy\nb3dzIFNRTEV4Y2VwdGlvbiB7DQogICAgICAgYm9vbGVhbiBtYXRjaCA9IGZh\nbHNlOw0KICAgICAgIGlmIChtZXRhZGF0YS5nZXREYXRhYmFzZVByb2R1Y3RW\nZXJzaW9uKCkuaW5kZXhPZigiQVMiKSAhPSAtMQ0KICAgICAgICAgICAmJiBn\nZW5lcmF0ZVZlcnNpb25OdW1iZXIobWV0YWRhdGEuZ2V0RGF0YWJhc2VQcm9k\ndWN0VmVyc2lvbigpKQ0KICAgICAgICAgICA8PSA1MzApDQogICAgICAgICAg\nIG1hdGNoID0gdHJ1ZTsNCiAgICAgICByZXR1cm4gbWF0Y2g7DQogICAgfQ0K\nDQogICAgcHVibGljIGJvb2xlYW4gaXNEQjJJU2VyaWVzVjVSNEFuZExhdGVy\nKERhdGFiYXNlTWV0YURhdGEgbWV0YWRhdGEpDQogICAgICAgdGhyb3dzIFNR\nTEV4Y2VwdGlvbiB7DQogICAgICAgYm9vbGVhbiBtYXRjaCA9IGZhbHNlOw0K\nICAgICAgIGlmIChtZXRhZGF0YS5nZXREYXRhYmFzZVByb2R1Y3RWZXJzaW9u\nKCkuaW5kZXhPZigiQVMiKSAhPSAtMQ0KICAgICAgICAgICAmJiBnZW5lcmF0\nZVZlcnNpb25OdW1iZXIobWV0YWRhdGEuZ2V0RGF0YWJhc2VQcm9kdWN0VmVy\nc2lvbigpKQ0KICAgICAgICAgICA+PSA1NDApDQogICAgICAgICAgIG1hdGNo\nID0gdHJ1ZTsNCiAgICAgIHJldHVybiBtYXRjaDsNCiAgICB9DQoNCiAgICBw\ndWJsaWMgYm9vbGVhbiBpc0RCMlVEQlY4MU9yRWFybGllcihEYXRhYmFzZU1l\ndGFEYXRhIG1ldGFkYXRhLCBpbnQgbWFqLA0KICAgICAgICBpbnQgbWluKSB0\naHJvd3MgU1FMRXhjZXB0aW9uIHsNCiAgICAgICAgYm9vbGVhbiBtYXRjaCA9\nIGZhbHNlOw0KICAgICAgICBpZiAobWV0YWRhdGEuZ2V0RGF0YWJhc2VQcm9k\ndWN0VmVyc2lvbigpLmluZGV4T2YoIlNRTCIpICE9IC0xICYmDQogICAgICAg\nICAgICgobWFqID09IDggJiYgbWluIDw9IDEpfHwgbWFqIDwgOCkpDQogICAg\nICAgICAgICBtYXRjaCA9IHRydWU7DQogICAgICAgIHJldHVybiBtYXRjaDsN\nCiAgICB9DQoNCiAgICAvKiogR2V0IHRoZSB2ZXJzaW9uIG51bWJlciBmb3Ig\ndGhlIElTZXJpZXMNCiAgICAgKi8NCiAgICBwcm90ZWN0ZWQgIGludCBnZW5l\ncmF0ZVZlcnNpb25OdW1iZXIoU3RyaW5nIHZlcnNpb25TdHJpbmcpIHsNCiAg\nICAgICAgU3RyaW5nIHMgPSB2ZXJzaW9uU3RyaW5nLnN1YnN0cmluZyh2ZXJz\naW9uU3RyaW5nLmluZGV4T2YoJ1YnKSk7DQogICAgICAgIHMgPSBzLnRvVXBw\nZXJDYXNlKCk7DQogICAgICAgIGludCBpID0gLTE7DQogICAgICAgIFN0cmlu\nZ1Rva2VuaXplciBzdHJpbmd0b2tlbml6ZXIgPSBuZXcgU3RyaW5nVG9rZW5p\nemVyKHMsICJWUk0iLCBmYWxzZSk7DQogICAgICAgIGlmIChzdHJpbmd0b2tl\nbml6ZXIuY291bnRUb2tlbnMoKSA9PSAzKQ0KICAgICAgICB7DQogICAgICAg\nICAgICBTdHJpbmcgczEgPSBzdHJpbmd0b2tlbml6ZXIubmV4dFRva2VuKCk7\nDQogICAgICAgICAgICBzMSA9IHMxICsgc3RyaW5ndG9rZW5pemVyLm5leHRU\nb2tlbigpOw0KICAgICAgICAgICAgczEgPSBzMSArIHN0cmluZ3Rva2VuaXpl\nci5uZXh0VG9rZW4oKTsNCiAgICAgICAgICAgIGkgPSBJbnRlZ2VyLnBhcnNl\nSW50KHMxKTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gaTsNCiAgICB9\nDQoNCiAgICBwdWJsaWMgU1FMQnVmZmVyIHRvU2VsZWN0KFNlbGVjdCBzZWws\nIGJvb2xlYW4gZm9yVXBkYXRlLA0KICAgICAgICBKREJDRmV0Y2hDb25maWd1\ncmF0aW9uIGZldGNoKSB7DQogICAgICAgIFNRTEJ1ZmZlciBidWYgPSBzdXBl\nci50b1NlbGVjdChzZWwsIGZvclVwZGF0ZSwgZmV0Y2gpOw0KDQogICAgICAg\nIGlmIChzZWwuZ2V0RXhwZWN0ZWRSZXN1bHRDb3VudCgpID4gMCkgew0KICAg\nICAgICAgICAgYnVmLmFwcGVuZCgiICIpLmFwcGVuZChvcHRpbWl6ZUNsYXVz\nZSkuYXBwZW5kKCIgIikNCiAgICAgICAgICAgICAgICAuYXBwZW5kKFN0cmlu\nZy52YWx1ZU9mKHNlbC5nZXRFeHBlY3RlZFJlc3VsdENvdW50KCkpKQ0KICAg\nICAgICAgICAgICAgIC5hcHBlbmQoIiAiKS5hcHBlbmQocm93Q2xhdXNlKTsN\nCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiBidWY7DQogICAgfQ0KDQog\nICAgcHVibGljIE9wZW5KUEFFeGNlcHRpb24gbmV3U3RvcmVFeGNlcHRpb24o\nU3RyaW5nIG1zZywgU1FMRXhjZXB0aW9uW10gY2F1c2VzLA0KICAgICAgICBP\nYmplY3QgZmFpbGVkKSB7DQogICAgICAgIGlmIChjYXVzZXMgIT0gbnVsbCAm\nJiBjYXVzZXMubGVuZ3RoID4gMCkNCiAgICAgICAgICAgIG1zZyA9IGFwcGVu\nZEV4dGVuZGVkRXhjZXB0aW9uTXNnKG1zZywgY2F1c2VzWzBdKTsNCiAgICAg\nICAgcmV0dXJuIHN1cGVyLm5ld1N0b3JlRXhjZXB0aW9uKG1zZywgY2F1c2Vz\nLCBmYWlsZWQpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqICBBcHBlbmQg\nZXhjZXB0aW9uIGluZm9ybWF0aW9uIGZyb20gU1FMQ0EgdG8gdGhlIGV4c2lz\ndGluZw0KICAgICAqICBleGNlcHRpb24gbWVhc3NhZ2UNCiAgICAgKi8NCiAg\nICBwcml2YXRlIFN0cmluZyBhcHBlbmRFeHRlbmRlZEV4Y2VwdGlvbk1zZyhT\ndHJpbmcgbXNnLCBTUUxFeGNlcHRpb24gc3FsZSl7DQogICAgICAgZmluYWwg\nU3RyaW5nIEdFVFNRTENBID0iZ2V0U3FsY2EiOw0KICAgICAgIFN0cmluZyBl\neGNlcHRpb25Nc2cgPSBuZXcgU3RyaW5nKCk7DQogICAgICAgdHJ5IHsNCiAg\nICAgICAgICAgIE1ldGhvZCBzcWxjYU0yID0gc3FsZS5nZXROZXh0RXhjZXB0\naW9uKCkuZ2V0Q2xhc3MoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAuZ2V0TWV0aG9kKEdFVFNRTENBLG51bGwpOw0KICAgICAgICAgICAgT2Jq\nZWN0IHNxbGNhID0gc3FsY2FNMi5pbnZva2Uoc3FsZS5nZXROZXh0RXhjZXB0\naW9uKCksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICBuZXcgT2JqZWN0W10ge30pOw0KICAgICAgICAgICAgTWV0aG9kICBn\nZXRTcWxFcnJwTWV0aGQgPSBzcWxjYS5nZXRDbGFzcygpLg0KICAgICAgICAg\nICAgZ2V0TWV0aG9kKCJnZXRTcWxFcnJwIiwgbnVsbCk7DQogICAgICAgICAg\nICBNZXRob2QgIGdldFNxbFdhcm5NZXRoZCA9IHNxbGNhLmdldENsYXNzKCku\nDQogICAgICAgICAgICBnZXRNZXRob2QoImdldFNxbFdhcm4iLCBudWxsKTsN\nCiAgICAgICAgICAgIE1ldGhvZCAgZ2V0U3FsRXJyZE1ldGhkID0gc3FsY2Eu\nZ2V0Q2xhc3MoKS4NCiAgICAgICAgICAgIGdldE1ldGhvZCgiZ2V0U3FsRXJy\nZCIsIG51bGwpOw0KICAgICAgICAgICAgZXhjZXB0aW9uTXNnID0gZXhjZXB0\naW9uTXNnLmNvbmNhdCggIlNRTENBIE9VVFBVVCIgKw0KICAgICAgICAgICAg\nICAgICAgICAiW0VycnA9IiArZ2V0U3FsRXJycE1ldGhkLmludm9rZShzcWxj\nYSxuZXcgT2JqZWN0W117fSkNCiAgICAgICAgICAgICAgICAgICAgKyAiLCBF\ncnJkPSIgKyBBcnJheXMudG9TdHJpbmcoKGludFtdKQ0KICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIChnZXRTcWxFcnJkTWV0aGQuaW52b2tlKHNxbGNh\nLCBuZXcgT2JqZWN0W117fSkpKSk7DQogICAgICAgICAgICBTdHJpbmcgV2Fy\nbiA9IG5ldyBTdHJpbmcoKGNoYXJbXSlnZXRTcWxXYXJuTWV0aGQuDQogICAg\nICAgICAgICAgICAgICAgIGludm9rZShzcWxjYSwgbmV3IE9iamVjdFtde30p\nKTsNCiAgICAgICAgICAgIGlmKFdhcm4udHJpbSgpLmxlbmd0aCgpICE9IDAp\nDQogICAgICAgICAgICAgICAgZXhjZXB0aW9uTXNnID0gZXhjZXB0aW9uTXNn\nLmNvbmNhdCgiLCBXYXJuPSIgK1dhcm4gKyAiXSIgKTsNCiAgICAgICAgICAg\nIGVsc2UNCiAgICAgICAgICAgICAgICBleGNlcHRpb25Nc2cgPSBleGNlcHRp\nb25Nc2cuY29uY2F0KCAiXSIgKTsNCiAgICAgICAgICAgIG1zZyA9IG1zZy5j\nb25jYXQoZXhjZXB0aW9uTXNnKTsNCiAgICAgICAgICAgIHJldHVybiBtc2c7\nDQogICAgICAgIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7DQogICAgICAgICAg\nICByZXR1cm4gc3FsZS5nZXRNZXNzYWdlKCk7DQogICAgICAgIH0NCiAgICB9\nDQoNCiAgICBwdWJsaWMgaW50IGdldERiMlNlcnZlclR5cGUoKSB7DQogICAg\nICAgIHJldHVybiBkYjJTZXJ2ZXJUeXBlOw0KICAgIH0NCn0NCg==\n","encoding":"base64"}

