{"sha":"161fb59183540c112d5647c625fc75d80d55ed10","node_id":"MDQ6QmxvYjIwNjM2NDoxNjFmYjU5MTgzNTQwYzExMmQ1NjQ3YzYyNWZjNzVkODBkNTVlZDEw","size":24898,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/161fb59183540c112d5647c625fc75d80d55ed10","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuZGF0YWNhY2hlOwoKaW1wb3J0\nIGphdmEudXRpbC5BcnJheUxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuQml0U2V0\nOwppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247CmltcG9ydCBqYXZhLnV0\naWwuQ29sbGVjdGlvbnM7CmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsKaW1w\nb3J0IGphdmEudXRpbC5IYXNoU2V0OwppbXBvcnQgamF2YS51dGlsLkl0ZXJh\ndG9yOwppbXBvcnQgamF2YS51dGlsLkxpc3Q7CmltcG9ydCBqYXZhLnV0aWwu\nTGlzdEl0ZXJhdG9yOwppbXBvcnQgamF2YS51dGlsLk1hcDsKCmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuZW5oYW5jZS5QQ0RhdGFHZW5lcmF0b3I7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkRlbGVnYXRpbmdTdG9y\nZU1hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkZl\ndGNoQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5r\nZXJuZWwuTG9ja0xldmVsczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5r\nZXJuZWwuT3BlbkpQQVN0YXRlTWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5rZXJuZWwuUENTdGF0ZTsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5rZXJuZWwuUXVlcnlMYW5ndWFnZXM7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEua2VybmVsLlN0b3JlQ29udGV4dDsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5rZXJuZWwuU3RvcmVNYW5hZ2VyOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmtlcm5lbC5TdG9yZVF1ZXJ5OwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLm1ldGEuQ2xhc3NNZXRhRGF0YTsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5tZXRhLk1ldGFEYXRhUmVwb3NpdG9yeTsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLk9wdGltaXN0aWNFeGNlcHRpb247\nCgovKioKICogU3RvcmVNYW5hZ2VyIHByb3h5IHRoYXQgZGVsZWdhdGVzIHRv\nIGEgZGF0YSBjYWNoZSB3aGVuIHBvc3NpYmxlLgogKgogKiBAYXV0aG9yIFBh\ndHJpY2sgTGluc2tleQogKiBAbm9qYXZhZG9jCiAqLwpwdWJsaWMgY2xhc3Mg\nRGF0YUNhY2hlU3RvcmVNYW5hZ2VyCiAgICBleHRlbmRzIERlbGVnYXRpbmdT\ndG9yZU1hbmFnZXIgewoKICAgIC8vIGFsbCB0aGUgc3RhdGUgbWFuYWdlcnMg\nY2hhbmdlZCBpbiB0aGlzIHRyYW5zYWN0aW9uCiAgICBwcml2YXRlIENvbGxl\nY3Rpb24gX2luc2VydHMgPSBudWxsOyAvLyBzdGF0ZW1hbmFnZXJzCiAgICBw\ncml2YXRlIE1hcCBfdXBkYXRlcyA9IG51bGw7IC8vIHN0YXRlbWFuYWdlciAt\nPiBmbWQgc2V0CiAgICBwcml2YXRlIENvbGxlY3Rpb24gX2RlbGV0ZXMgPSBu\ndWxsOyAvLyBzdGF0ZW1hbmFnZXJzCgogICAgLy8gdGhlIG93bmluZyBjb250\nZXh0CiAgICBwcml2YXRlIFN0b3JlQ29udGV4dCBfY3R4ID0gbnVsbDsKCiAg\nICAvLyBwYyBkYXRhIGdlbmVyYXRvcgogICAgcHJpdmF0ZSBQQ0RhdGFHZW5l\ncmF0b3IgX2dlbiA9IG51bGw7CgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3Rv\nci4KICAgICAqCiAgICAgKiBAcGFyYW0gc20gdGhlIHN0b3JlIG1hbmFnZXIg\ndG8gZGVsZWdhdGUgdG8KICAgICAqLwogICAgcHVibGljIERhdGFDYWNoZVN0\nb3JlTWFuYWdlcihTdG9yZU1hbmFnZXIgc20pIHsKICAgICAgICBzdXBlcihz\nbSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0Q29udGV4dChTdG9yZUNv\nbnRleHQgY3R4KSB7CiAgICAgICAgX2N0eCA9IGN0eDsKICAgICAgICBfZ2Vu\nID0gY3R4LmdldENvbmZpZ3VyYXRpb24oKS5nZXREYXRhQ2FjaGVNYW5hZ2Vy\nSW5zdGFuY2UoKS4KICAgICAgICAgICAgZ2V0UENEYXRhR2VuZXJhdG9yKCk7\nCiAgICAgICAgc3VwZXIuc2V0Q29udGV4dChjdHgpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIGJlZ2luKCkgewogICAgICAgIHN1cGVyLmJlZ2luKCk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgY29tbWl0KCkgewogICAgICAgIHRyeSB7\nCiAgICAgICAgICAgIHN1cGVyLmNvbW1pdCgpOwogICAgICAgICAgICB1cGRh\ndGVDYWNoZXMoKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBf\naW5zZXJ0cyA9IG51bGw7CiAgICAgICAgICAgIF91cGRhdGVzID0gbnVsbDsK\nICAgICAgICAgICAgX2RlbGV0ZXMgPSBudWxsOwogICAgICAgIH0KICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCByb2xsYmFjaygpIHsKICAgICAgICB0cnkgewog\nICAgICAgICAgICBzdXBlci5yb2xsYmFjaygpOwogICAgICAgIH0gZmluYWxs\neSB7CiAgICAgICAgICAgIF9pbnNlcnRzID0gbnVsbDsKICAgICAgICAgICAg\nX3VwZGF0ZXMgPSBudWxsOwogICAgICAgICAgICBfZGVsZXRlcyA9IG51bGw7\nCiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogRXZpY3QgYWxsIG1l\nbWJlcnMgb2YgdGhlIGdpdmVuIGNsYXNzZXMuCiAgICAgKi8KICAgIHByaXZh\ndGUgdm9pZCBldmljdFR5cGVzKENvbGxlY3Rpb24gY2xhc3NlcykgewogICAg\nICAgIGlmIChjbGFzc2VzLmlzRW1wdHkoKSkKICAgICAgICAgICAgcmV0dXJu\nOwoKICAgICAgICBNZXRhRGF0YVJlcG9zaXRvcnkgbWRyID0gX2N0eC5nZXRD\nb25maWd1cmF0aW9uKCkuCiAgICAgICAgICAgIGdldE1ldGFEYXRhUmVwb3Np\ndG9yeUluc3RhbmNlKCk7CiAgICAgICAgQ2xhc3NMb2FkZXIgbG9hZGVyID0g\nX2N0eC5nZXRDbGFzc0xvYWRlcigpOwoKICAgICAgICBDbGFzcyBjbHM7CiAg\nICAgICAgRGF0YUNhY2hlIGNhY2hlOwogICAgICAgIGZvciAoSXRlcmF0b3Ig\naXRyID0gY2xhc3Nlcy5pdGVyYXRvcigpOyBpdHIuaGFzTmV4dCgpOykgewog\nICAgICAgICAgICBjbHMgPSAoQ2xhc3MpIGl0ci5uZXh0KCk7CiAgICAgICAg\nICAgIGNhY2hlID0gbWRyLmdldE1ldGFEYXRhKGNscywgbG9hZGVyLCBmYWxz\nZSkuZ2V0RGF0YUNhY2hlKCk7CiAgICAgICAgICAgIGlmIChjYWNoZSAhPSBu\ndWxsKQogICAgICAgICAgICAgICAgY2FjaGUucmVtb3ZlQWxsKGNscywgZmFs\nc2UpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFVwZGF0ZSBh\nbGwgY2FjaGVzIHdpdGggdGhlIGNvbW1pdHRlZCBpbnNlcnRzLCB1cGRhdGVz\nLCBhbmQgZGVsZXRlcy4KICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIHVwZGF0\nZUNhY2hlcygpIHsKICAgICAgICAvLyBtYXAgZWFjaCBkYXRhIGNhY2hlIHRv\nIHRoZSBtb2RpZmljYXRpb25zIHdlIG5lZWQgdG8gcGVyZm9ybQogICAgICAg\nIE1hcCBtb2RNYXAgPSBudWxsOwogICAgICAgIE1vZGlmaWNhdGlvbnMgbW9k\nczsKICAgICAgICBPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtOwogICAgICAgIERh\ndGFDYWNoZVBDRGF0YSBkYXRhOwogICAgICAgIERhdGFDYWNoZSBjYWNoZTsK\nCiAgICAgICAgLy8gY3JlYXRlIHBjIGRhdGFzIGZvciBpbnNlcnRzCiAgICAg\nICAgaWYgKF9jdHguZ2V0UG9wdWxhdGVEYXRhQ2FjaGUoKSAmJiBfaW5zZXJ0\ncyAhPSBudWxsKSB7CiAgICAgICAgICAgIGZvciAoSXRlcmF0b3IgaXRyID0g\nX2luc2VydHMuaXRlcmF0b3IoKTsgaXRyLmhhc05leHQoKTspIHsKICAgICAg\nICAgICAgICAgIHNtID0gKE9wZW5KUEFTdGF0ZU1hbmFnZXIpIGl0ci5uZXh0\nKCk7CiAgICAgICAgICAgICAgICBjYWNoZSA9IHNtLmdldE1ldGFEYXRhKCku\nZ2V0RGF0YUNhY2hlKCk7CiAgICAgICAgICAgICAgICBpZiAoY2FjaGUgPT0g\nbnVsbCkKICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKCiAgICAgICAg\nICAgICAgICBpZiAobW9kTWFwID09IG51bGwpCiAgICAgICAgICAgICAgICAg\nICAgbW9kTWFwID0gbmV3IEhhc2hNYXAoKTsKICAgICAgICAgICAgICAgIG1v\nZHMgPSBnZXRNb2RpZmljYXRpb25zKG1vZE1hcCwgY2FjaGUpOwogICAgICAg\nICAgICAgICAgZGF0YSA9IG5ld1BDRGF0YShzbSk7CiAgICAgICAgICAgICAg\nICBkYXRhLnN0b3JlKHNtKTsKICAgICAgICAgICAgICAgIG1vZHMuYWRkaXRp\nb25zLmFkZChuZXcgUENEYXRhSG9sZGVyKGRhdGEsIHNtKSk7CiAgICAgICAg\nICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIHVwZGF0ZSBwY2RhdGFzIGZv\nciB1cGRhdGVzCiAgICAgICAgTWFwLkVudHJ5IGVudHJ5OwogICAgICAgIGlm\nIChfdXBkYXRlcyAhPSBudWxsKSB7CiAgICAgICAgICAgIEJpdFNldCBmaWVs\nZHM7CiAgICAgICAgICAgIGZvciAoSXRlcmF0b3IgaXRyID0gX3VwZGF0ZXMu\nZW50cnlTZXQoKS5pdGVyYXRvcigpOwogICAgICAgICAgICAgICAgaXRyLmhh\nc05leHQoKTspIHsKICAgICAgICAgICAgICAgIGVudHJ5ID0gKE1hcC5FbnRy\neSkgaXRyLm5leHQoKTsKICAgICAgICAgICAgICAgIHNtID0gKE9wZW5KUEFT\ndGF0ZU1hbmFnZXIpIGVudHJ5LmdldEtleSgpOwogICAgICAgICAgICAgICAg\nZmllbGRzID0gKEJpdFNldCkgZW50cnkuZ2V0VmFsdWUoKTsKCiAgICAgICAg\nICAgICAgICBjYWNoZSA9IHNtLmdldE1ldGFEYXRhKCkuZ2V0RGF0YUNhY2hl\nKCk7CiAgICAgICAgICAgICAgICBpZiAoY2FjaGUgPT0gbnVsbCkKICAgICAg\nICAgICAgICAgICAgICBjb250aW51ZTsKCiAgICAgICAgICAgICAgICAvLyBp\ndCdzIG9rIG5vdCB0byBjbG9uZSB0aGUgb2JqZWN0IHRoYXQgd2UgZ2V0IGZy\nb20gdGhlIGNhY2hlLAogICAgICAgICAgICAgICAgLy8gc2luY2Ugd2UncmUg\naW5zaWRlIHRoZSBjb21taXQoKSBtZXRob2QsIHNvIGFueSBtb2RpZmljYXRp\nb25zCiAgICAgICAgICAgICAgICAvLyB0byB0aGUgdW5kZXJseWluZyBjYWNo\nZSBhcmUgdmFsaWQuIElmIHRoZSBjb21taXQgaGFkIG5vdAogICAgICAgICAg\nICAgICAgLy8gYWxyZWFkeSBzdWNjZWVkZWQsIHRoZW4gd2UnZCB3YW50IHRv\nIGNsb25lIHRoZSByZXRyaWV2ZWQKICAgICAgICAgICAgICAgIC8vIG9iamVj\ndC4KICAgICAgICAgICAgICAgIGlmIChtb2RNYXAgPT0gbnVsbCkKICAgICAg\nICAgICAgICAgICAgICBtb2RNYXAgPSBuZXcgSGFzaE1hcCgpOwogICAgICAg\nICAgICAgICAgZGF0YSA9IGNhY2hlLmdldChzbS5nZXRPYmplY3RJZCgpKTsK\nICAgICAgICAgICAgICAgIG1vZHMgPSBnZXRNb2RpZmljYXRpb25zKG1vZE1h\ncCwgY2FjaGUpOwoKICAgICAgICAgICAgICAgIC8vIGRhdGEgc2hvdWxkIGFs\nd2F5cyBiZSBub24tbnVsbCwgc2luY2UgdGhlIG9iamVjdCBpcwogICAgICAg\nICAgICAgICAgLy8gZGlydHksIGJ1dCBtYXliZSBpdCBnb3QgZHJvcHBlZCBm\ncm9tIHRoZSBjYWNoZSBpbiB0aGUKICAgICAgICAgICAgICAgIC8vIGludGVy\naW0KICAgICAgICAgICAgICAgIGlmIChkYXRhID09IG51bGwpIHsKICAgICAg\nICAgICAgICAgICAgICBkYXRhID0gbmV3UENEYXRhKHNtKTsKICAgICAgICAg\nICAgICAgICAgICBkYXRhLnN0b3JlKHNtKTsKICAgICAgICAgICAgICAgICAg\nICBtb2RzLm5ld1VwZGF0ZXMuYWRkKG5ldyBQQ0RhdGFIb2xkZXIoZGF0YSwg\nc20pKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAg\nICAgICAgZGF0YS5zdG9yZShzbSwgZmllbGRzKTsKICAgICAgICAgICAgICAg\nICAgICBtb2RzLmV4aXN0aW5nVXBkYXRlcy5hZGQobmV3IFBDRGF0YUhvbGRl\ncihkYXRhLCBzbSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9\nCiAgICAgICAgfQoKICAgICAgICAvLyByZW1vdmUgcGNkYXRhcyBmb3IgZGVs\nZXRlcwogICAgICAgIGlmIChfZGVsZXRlcyAhPSBudWxsKSB7CiAgICAgICAg\nICAgIGZvciAoSXRlcmF0b3IgaXRyID0gX2RlbGV0ZXMuaXRlcmF0b3IoKTsg\naXRyLmhhc05leHQoKTspIHsKICAgICAgICAgICAgICAgIHNtID0gKE9wZW5K\nUEFTdGF0ZU1hbmFnZXIpIGl0ci5uZXh0KCk7CiAgICAgICAgICAgICAgICBj\nYWNoZSA9IHNtLmdldE1ldGFEYXRhKCkuZ2V0RGF0YUNhY2hlKCk7CiAgICAg\nICAgICAgICAgICBpZiAoY2FjaGUgPT0gbnVsbCkKICAgICAgICAgICAgICAg\nICAgICBjb250aW51ZTsKCiAgICAgICAgICAgICAgICBpZiAobW9kTWFwID09\nIG51bGwpCiAgICAgICAgICAgICAgICAgICAgbW9kTWFwID0gbmV3IEhhc2hN\nYXAoKTsKICAgICAgICAgICAgICAgIG1vZHMgPSBnZXRNb2RpZmljYXRpb25z\nKG1vZE1hcCwgY2FjaGUpOwogICAgICAgICAgICAgICAgbW9kcy5kZWxldGVz\nLmFkZChzbS5nZXRPYmplY3RJZCgpKTsKICAgICAgICAgICAgfQogICAgICAg\nIH0KCiAgICAgICAgLy8gbm90aWZ5IHRoZSBjYWNoZXMgb2YgdGhlIGNoYW5n\nZXMKICAgICAgICBpZiAobW9kTWFwICE9IG51bGwpIHsKICAgICAgICAgICAg\nZm9yIChJdGVyYXRvciBpdHIgPSBtb2RNYXAuZW50cnlTZXQoKS5pdGVyYXRv\ncigpOyBpdHIuaGFzTmV4dCgpOykgewogICAgICAgICAgICAgICAgZW50cnkg\nPSAoTWFwLkVudHJ5KSBpdHIubmV4dCgpOwogICAgICAgICAgICAgICAgY2Fj\naGUgPSAoRGF0YUNhY2hlKSBlbnRyeS5nZXRLZXkoKTsKICAgICAgICAgICAg\nICAgIG1vZHMgPSAoTW9kaWZpY2F0aW9ucykgZW50cnkuZ2V0VmFsdWUoKTsK\nCiAgICAgICAgICAgICAgICAvLyBtYWtlIHN1cmUgd2UncmUgbm90IGNhY2hp\nbmcgb2xkIHZlcnNpb25zCiAgICAgICAgICAgICAgICBjYWNoZS53cml0ZUxv\nY2soKTsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAg\nICAgdHJhbnNmb3JtVG9WZXJzaW9uU2FmZVBDRGF0YXMoY2FjaGUsIG1vZHMu\nYWRkaXRpb25zKTsKICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1Ub1Zl\ncnNpb25TYWZlUENEYXRhcyhjYWNoZSwgbW9kcy5uZXdVcGRhdGVzKTsKICAg\nICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1Ub1ZlcnNpb25TYWZlUENEYXRh\ncyhjYWNoZSwgbW9kcy5leGlzdGluZ1VwZGF0ZXMpOwogICAgICAgICAgICAg\nICAgICAgIGNhY2hlLmNvbW1pdChtb2RzLmFkZGl0aW9ucywgbW9kcy5uZXdV\ncGRhdGVzLAogICAgICAgICAgICAgICAgICAgICAgICBtb2RzLmV4aXN0aW5n\nVXBkYXRlcywgbW9kcy5kZWxldGVzKTsKICAgICAgICAgICAgICAgIH0gZmlu\nYWxseSB7CiAgICAgICAgICAgICAgICAgICAgY2FjaGUud3JpdGVVbmxvY2so\nKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0K\nCiAgICAgICAgLy8gaWYgd2Ugd2VyZSBpbiBsYXJnZVRyYW5zYWN0aW9uIG1v\nZGUsIHRoZW4gd2UgaGF2ZSByZWNvcmRlZAogICAgICAgIC8vIHRoZSBjbGFz\nc2VzIG9mIHVwZGF0ZWQvZGVsZXRlZCBvYmplY3RzIGFuZCB0aGVzZSBub3cg\nbmVlZCB0byBiZQogICAgICAgIC8vIGV2aWN0ZWQKICAgICAgICBpZiAoX2N0\neC5pc0xhcmdlVHJhbnNhY3Rpb24oKSkgewogICAgICAgICAgICBldmljdFR5\ncGVzKF9jdHguZ2V0RGVsZXRlZFR5cGVzKCkpOwogICAgICAgICAgICBldmlj\ndFR5cGVzKF9jdHguZ2V0VXBkYXRlZFR5cGVzKCkpOwogICAgICAgIH0KCiAg\nICAgICAgLy8gYW5kIG5vdGlmeSB0aGUgcXVlcnkgY2FjaGUuICBub3RpZnkg\naW4gb25lIGJhdGNoIHRvIHJlZHVjZSBzeW5jaAogICAgICAgIFF1ZXJ5Q2Fj\naGUgcXVlcnlDYWNoZSA9IF9jdHguZ2V0Q29uZmlndXJhdGlvbigpLgogICAg\nICAgICAgICBnZXREYXRhQ2FjaGVNYW5hZ2VySW5zdGFuY2UoKS5nZXRTeXN0\nZW1RdWVyeUNhY2hlKCk7CiAgICAgICAgaWYgKHF1ZXJ5Q2FjaGUgIT0gbnVs\nbCkgewogICAgICAgICAgICBDb2xsZWN0aW9uIHBlcnMgPSBfY3R4LmdldFBl\ncnNpc3RlZFR5cGVzKCk7CiAgICAgICAgICAgIENvbGxlY3Rpb24gZGVsID0g\nX2N0eC5nZXREZWxldGVkVHlwZXMoKTsKICAgICAgICAgICAgQ29sbGVjdGlv\nbiB1cCA9IF9jdHguZ2V0VXBkYXRlZFR5cGVzKCk7CiAgICAgICAgICAgIGlu\ndCBzaXplID0gcGVycy5zaXplKCkgKyBkZWwuc2l6ZSgpICsgdXAuc2l6ZSgp\nOwogICAgICAgICAgICBpZiAoc2l6ZSA+IDApIHsKICAgICAgICAgICAgICAg\nIENvbGxlY3Rpb24gdHlwZXMgPSBuZXcgQXJyYXlMaXN0KHNpemUpOwogICAg\nICAgICAgICAgICAgdHlwZXMuYWRkQWxsKHBlcnMpOwogICAgICAgICAgICAg\nICAgdHlwZXMuYWRkQWxsKGRlbCk7CiAgICAgICAgICAgICAgICB0eXBlcy5h\nZGRBbGwodXApOwogICAgICAgICAgICAgICAgcXVlcnlDYWNoZS5vblR5cGVz\nQ2hhbmdlZChuZXcgVHlwZXNDaGFuZ2VkRXZlbnQodGhpcywgdHlwZXMpKTsK\nICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAq\nIFRyYW5zZm9ybXMgYSBjb2xsZWN0aW9uIG9mIHtAbGluayBQQ0RhdGFIb2xk\nZXJ9cyB0aGF0IG1pZ2h0IGNvbnRhaW4KICAgICAqIHN0YWxlIGluc3RhbmNl\ncyBpbnRvIGEgY29sbGVjdGlvbiBvZiB1cC10by1kYXRlIHtAbGluayBEYXRh\nQ2FjaGVQQ0RhdGF9cy4KICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIHRyYW5z\nZm9ybVRvVmVyc2lvblNhZmVQQ0RhdGFzKERhdGFDYWNoZSBjYWNoZSwKICAg\nICAgICBMaXN0IGhvbGRlcnMpIHsKICAgICAgICBQQ0RhdGFIb2xkZXIgaG9s\nZGVyOwogICAgICAgIERhdGFDYWNoZVBDRGF0YSBvbGRwYzsKICAgICAgICBm\nb3IgKExpc3RJdGVyYXRvciBpdGVyID0gaG9sZGVycy5saXN0SXRlcmF0b3Io\nKTsgaXRlci5oYXNOZXh0KCk7KSB7CiAgICAgICAgICAgIGhvbGRlciA9IChQ\nQ0RhdGFIb2xkZXIpIGl0ZXIubmV4dCgpOwogICAgICAgICAgICBvbGRwYyA9\nIGNhY2hlLmdldChob2xkZXIuc20uZ2V0T2JqZWN0SWQoKSk7CiAgICAgICAg\nICAgIGlmIChvbGRwYyAhPSBudWxsICYmIGNvbXBhcmVWZXJzaW9uKGhvbGRl\nci5zbSwKICAgICAgICAgICAgICAgIGhvbGRlci5zbS5nZXRWZXJzaW9uKCks\nIG9sZHBjLmdldFZlcnNpb24oKSkgPT0gVkVSU0lPTl9FQVJMSUVSKQogICAg\nICAgICAgICAgICAgaXRlci5yZW1vdmUoKTsKICAgICAgICAgICAgZWxzZQog\nICAgICAgICAgICAgICAgaXRlci5zZXQoaG9sZGVyLnBjZGF0YSk7CiAgICAg\nICAgfQogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIGEge0BsaW5rIE1v\nZGlmaWNhdGlvbnN9IGluc3RhbmNlIHRvIHRyYWNrIG1vZGlmaWNhdGlvbnMK\nICAgICAqIHRvIHRoZSBnaXZlbiBjYWNoZSwgY3JlYXRpbmcgYW5kIGNhY2hp\nbmcgdGhlIGluc3RhbmNlIGlmIGl0IGRvZXMKICAgICAqIG5vdCBhbHJlYWR5\nIGV4aXN0IGluIHRoZSBnaXZlbiBtYXAuCiAgICAgKi8KICAgIHByaXZhdGUg\nc3RhdGljIE1vZGlmaWNhdGlvbnMgZ2V0TW9kaWZpY2F0aW9ucyhNYXAgbW9k\nTWFwLCBEYXRhQ2FjaGUgY2FjaGUpIHsKICAgICAgICBNb2RpZmljYXRpb25z\nIG1vZHMgPSAoTW9kaWZpY2F0aW9ucykgbW9kTWFwLmdldChjYWNoZSk7CiAg\nICAgICAgaWYgKG1vZHMgPT0gbnVsbCkgewogICAgICAgICAgICBtb2RzID0g\nbmV3IE1vZGlmaWNhdGlvbnMoKTsKICAgICAgICAgICAgbW9kTWFwLnB1dChj\nYWNoZSwgbW9kcyk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBtb2RzOwog\nICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGV4aXN0cyhPcGVuSlBBU3RhdGVN\nYW5hZ2VyIHNtLCBPYmplY3QgZWRhdGEpIHsKICAgICAgICBEYXRhQ2FjaGUg\nY2FjaGUgPSBzbS5nZXRNZXRhRGF0YSgpLmdldERhdGFDYWNoZSgpOwogICAg\nICAgIGlmIChjYWNoZSAhPSBudWxsICYmICFpc0xvY2tpbmcobnVsbCkKICAg\nICAgICAgICAgJiYgY2FjaGUuY29udGFpbnMoc20uZ2V0T2JqZWN0SWQoKSkp\nCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIHJldHVybiBzdXBl\nci5leGlzdHMoc20sIGVkYXRhKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVh\nbiBzeW5jVmVyc2lvbihPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBPYmplY3Qg\nZWRhdGEpIHsKICAgICAgICBEYXRhQ2FjaGUgY2FjaGUgPSBzbS5nZXRNZXRh\nRGF0YSgpLmdldERhdGFDYWNoZSgpOwogICAgICAgIGlmIChjYWNoZSA9PSBu\ndWxsIHx8IHNtLmlzRW1iZWRkZWQoKSkKICAgICAgICAgICAgcmV0dXJuIHN1\ncGVyLnN5bmNWZXJzaW9uKHNtLCBlZGF0YSk7CgogICAgICAgIERhdGFDYWNo\nZVBDRGF0YSBkYXRhOwogICAgICAgIE9iamVjdCB2ZXJzaW9uID0gbnVsbDsK\nICAgICAgICBkYXRhID0gY2FjaGUuZ2V0KHNtLmdldE9iamVjdElkKCkpOwog\nICAgICAgIGlmICghaXNMb2NraW5nKG51bGwpICYmIGRhdGEgIT0gbnVsbCkK\nICAgICAgICAgICAgdmVyc2lvbiA9IGRhdGEuZ2V0VmVyc2lvbigpOwoKICAg\nICAgICAvLyBpZiB3ZSBoYXZlIGEgY2FjaGVkIHZlcnNpb24gdXBkYXRlIGZy\nb20gdGhlcmUKICAgICAgICBpZiAodmVyc2lvbiAhPSBudWxsKSB7CiAgICAg\nICAgICAgIGlmICghdmVyc2lvbi5lcXVhbHMoc20uZ2V0VmVyc2lvbigpKSkg\newogICAgICAgICAgICAgICAgc20uc2V0VmVyc2lvbih2ZXJzaW9uKTsKICAg\nICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAg\nICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIC8vIHVz\nZSBkYXRhIHN0b3JlIHZlcnNpb24KICAgICAgICByZXR1cm4gc3VwZXIuc3lu\nY1ZlcnNpb24oc20sIGVkYXRhKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVh\nbiBpbml0aWFsaXplKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIFBDU3RhdGUg\nc3RhdGUsCiAgICAgICAgRmV0Y2hDb25maWd1cmF0aW9uIGZldGNoLCBPYmpl\nY3QgZWRhdGEpIHsKICAgICAgICBEYXRhQ2FjaGUgY2FjaGUgPSBzbS5nZXRN\nZXRhRGF0YSgpLmdldERhdGFDYWNoZSgpOwogICAgICAgIGlmIChjYWNoZSA9\nPSBudWxsIHx8IHNtLmlzRW1iZWRkZWQoKSkKICAgICAgICAgICAgcmV0dXJu\nIHN1cGVyLmluaXRpYWxpemUoc20sIHN0YXRlLCBmZXRjaCwgZWRhdGEpOwoK\nICAgICAgICBEYXRhQ2FjaGVQQ0RhdGEgZGF0YSA9IGNhY2hlLmdldChzbS5n\nZXRPYmplY3RJZCgpKTsKICAgICAgICBpZiAoZGF0YSAhPSBudWxsICYmICFp\nc0xvY2tpbmcoZmV0Y2gpKSB7CiAgICAgICAgICAgIC8vIyMjIHRoZSAnZGF0\nYS50eXBlJyBhY2Nlc3MgaGVyZSBwcm9iYWJseSBuZWVkcyB0byBiZQogICAg\nICAgICAgICAvLyMjIyBhZGRyZXNzZWQgZm9yIGJ1ZyA1MTEKICAgICAgICAg\nICAgc20uaW5pdGlhbGl6ZShkYXRhLmdldFR5cGUoKSwgc3RhdGUpOwogICAg\nICAgICAgICBkYXRhLmxvYWQoc20sIGZldGNoLCBlZGF0YSk7CiAgICAgICAg\nICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgLy8gaW5pdGlh\nbGl6ZSBmcm9tIHN0b3JlIG1hbmFnZXIKICAgICAgICBpZiAoIXN1cGVyLmlu\naXRpYWxpemUoc20sIHN0YXRlLCBmZXRjaCwgZWRhdGEpKQogICAgICAgICAg\nICByZXR1cm4gZmFsc2U7CiAgICAgICAgaWYgKCFfY3R4LmdldFBvcHVsYXRl\nRGF0YUNhY2hlKCkpCiAgICAgICAgICAgIHJldHVybiB0cnVlOwoKICAgICAg\nICAvLyBtYWtlIHN1cmUgdGhhdCB3ZSdyZSBub3QgdHJ5aW5nIHRvIGNhY2hl\nIGFuIG9sZCB2ZXJzaW9uCiAgICAgICAgY2FjaGUud3JpdGVMb2NrKCk7CiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgZGF0YSA9IGNhY2hlLmdldChzbS5n\nZXRPYmplY3RJZCgpKTsKICAgICAgICAgICAgaWYgKGRhdGEgIT0gbnVsbCAm\nJiBjb21wYXJlVmVyc2lvbihzbSwgc20uZ2V0VmVyc2lvbigpLAogICAgICAg\nICAgICAgICAgZGF0YS5nZXRWZXJzaW9uKCkpID09IFZFUlNJT05fRUFSTElF\nUikKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwoKICAgICAgICAgICAg\nLy8gY2FjaGUgbmV3bHkgbG9hZGVkIGluZm8uIEl0IGlzIHNhZmUgdG8gY2Fj\naGUgZGF0YSBmcm9ybQogICAgICAgICAgICAvLyBpbml0aWFsaXplKCkgYmVj\nYXVzZSB0aGlzIG1ldGhvZCBpcyBvbmx5IGNhbGxlZCB1cG9uCiAgICAgICAg\nICAgIC8vIGluaXRpYWwgbG9hZCBvZiB0aGUgZGF0YS4KICAgICAgICAgICAg\naWYgKGRhdGEgPT0gbnVsbCkKICAgICAgICAgICAgICAgIGRhdGEgPSBuZXdQ\nQ0RhdGEoc20pOwogICAgICAgICAgICBkYXRhLnN0b3JlKHNtKTsKICAgICAg\nICAgICAgY2FjaGUucHV0KGRhdGEpOwogICAgICAgIH0gZmluYWxseSB7CiAg\nICAgICAgICAgIGNhY2hlLndyaXRlVW5sb2NrKCk7CiAgICAgICAgfQogICAg\nICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGxv\nYWQoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgQml0U2V0IGZpZWxkcywKICAg\nICAgICBGZXRjaENvbmZpZ3VyYXRpb24gZmV0Y2gsIGludCBsb2NrTGV2ZWws\nIE9iamVjdCBlZGF0YSkgewogICAgICAgIERhdGFDYWNoZSBjYWNoZSA9IHNt\nLmdldE1ldGFEYXRhKCkuZ2V0RGF0YUNhY2hlKCk7CiAgICAgICAgaWYgKGNh\nY2hlID09IG51bGwgfHwgc20uaXNFbWJlZGRlZCgpKQogICAgICAgICAgICBy\nZXR1cm4gc3VwZXIubG9hZChzbSwgZmllbGRzLCBmZXRjaCwgbG9ja0xldmVs\nLCBlZGF0YSk7CgogICAgICAgIERhdGFDYWNoZVBDRGF0YSBkYXRhID0gY2Fj\naGUuZ2V0KHNtLmdldE9iamVjdElkKCkpOwogICAgICAgIGlmIChsb2NrTGV2\nZWwgPT0gTG9ja0xldmVscy5MT0NLX05PTkUgJiYgIWlzTG9ja2luZyhmZXRj\naCkKICAgICAgICAgICAgJiYgZGF0YSAhPSBudWxsKQogICAgICAgICAgICBk\nYXRhLmxvYWQoc20sIGZpZWxkcywgZmV0Y2gsIGVkYXRhKTsKICAgICAgICBp\nZiAoZmllbGRzLmxlbmd0aCgpID09IDApCiAgICAgICAgICAgIHJldHVybiB0\ncnVlOwoKICAgICAgICAvLyBsb2FkIGZyb20gc3RvcmUgbWFuYWdlcjsgY2xv\nbmUgdGhlIHNldCBvZiBzdGlsbC11bmxvYWRlZCBmaWVsZHMKICAgICAgICAv\nLyBzbyB0aGF0IGlmIHRoZSBzdG9yZSBtYW5hZ2VyIGRlY2lkZXMgdG8gbW9k\naWZ5IGl0IGl0IHdvbid0IGFmZmVjdCB1cwogICAgICAgIGlmICghc3VwZXIu\nbG9hZChzbSwgKEJpdFNldCkgZmllbGRzLmNsb25lKCksIGZldGNoLCBsb2Nr\nTGV2ZWwsIGVkYXRhKSkKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAg\nICAgIGlmICghX2N0eC5nZXRQb3B1bGF0ZURhdGFDYWNoZSgpKQogICAgICAg\nICAgICByZXR1cm4gdHJ1ZTsKCiAgICAgICAgLy8gbWFrZSBzdXJlIHRoYXQg\nd2UncmUgbm90IHRyeWluZyB0byBjYWNoZSBhbiBvbGQgdmVyc2lvbgogICAg\nICAgIGNhY2hlLndyaXRlTG9jaygpOwogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIGRhdGEgPSBjYWNoZS5nZXQoc20uZ2V0T2JqZWN0SWQoKSk7CiAgICAg\nICAgICAgIGlmIChkYXRhICE9IG51bGwgJiYgY29tcGFyZVZlcnNpb24oc20s\nIHNtLmdldFZlcnNpb24oKSwKICAgICAgICAgICAgICAgIGRhdGEuZ2V0VmVy\nc2lvbigpKSA9PSBWRVJTSU9OX0VBUkxJRVIpCiAgICAgICAgICAgICAgICBy\nZXR1cm4gdHJ1ZTsKCiAgICAgICAgICAgIC8vIGNhY2hlIG5ld2x5IGxvYWRl\nZCBpbmZvCiAgICAgICAgICAgIGJvb2xlYW4gaXNOZXcgPSBkYXRhID09IG51\nbGw7CiAgICAgICAgICAgIGlmIChpc05ldykKICAgICAgICAgICAgICAgIGRh\ndGEgPSBuZXdQQ0RhdGEoc20pOwogICAgICAgICAgICBkYXRhLnN0b3JlKHNt\nLCBmaWVsZHMpOwogICAgICAgICAgICBpZiAoaXNOZXcpCiAgICAgICAgICAg\nICAgICBjYWNoZS5wdXQoZGF0YSk7CiAgICAgICAgICAgIGVsc2UKICAgICAg\nICAgICAgICAgIGNhY2hlLnVwZGF0ZShkYXRhKTsKICAgICAgICB9IGZpbmFs\nbHkgewogICAgICAgICAgICBjYWNoZS53cml0ZVVubG9jaygpOwogICAgICAg\nIH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBwdWJsaWMgQ29s\nbGVjdGlvbiBsb2FkQWxsKENvbGxlY3Rpb24gc21zLCBQQ1N0YXRlIHN0YXRl\nLCBpbnQgbG9hZCwKICAgIAkJRmV0Y2hDb25maWd1cmF0aW9uIGZldGNoLCBP\nYmplY3QgZWRhdGEpIHsKICAgICAgICBpZiAoaXNMb2NraW5nKGZldGNoKSkK\nICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmxvYWRBbGwoc21zLCBzdGF0ZSwg\nbG9hZCwgZmV0Y2gsIGVkYXRhKTsKCiAgICAgICAgTWFwIHVubG9hZGVkID0g\nbnVsbDsKICAgICAgICBPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtOwogICAgICAg\nIERhdGFDYWNoZSBjYWNoZTsKICAgICAgICBEYXRhQ2FjaGVQQ0RhdGEgZGF0\nYTsKICAgICAgICBCaXRTZXQgZmllbGRzOwoKICAgICAgICBmb3IgKEl0ZXJh\ndG9yIGl0ciA9IHNtcy5pdGVyYXRvcigpOyBpdHIuaGFzTmV4dCgpOykgewog\nICAgICAgICAgICBzbSA9IChPcGVuSlBBU3RhdGVNYW5hZ2VyKSBpdHIubmV4\ndCgpOwogICAgICAgICAgICBjYWNoZSA9IHNtLmdldE1ldGFEYXRhKCkuZ2V0\nRGF0YUNhY2hlKCk7CiAgICAgICAgICAgIGlmIChjYWNoZSA9PSBudWxsIHx8\nIHNtLmlzRW1iZWRkZWQoKSkgewogICAgICAgICAgICAgICAgdW5sb2FkZWQg\nPSBhZGRVbmxvYWRlZChzbSwgbnVsbCwgdW5sb2FkZWQpOwogICAgICAgICAg\nICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlm\nIChzbS5nZXRNYW5hZ2VkSW5zdGFuY2UoKSA9PSBudWxsKSB7CiAgICAgICAg\nICAgICAgICBkYXRhID0gY2FjaGUuZ2V0KHNtLmdldE9iamVjdElkKCkpOwog\nICAgICAgICAgICAgICAgaWYgKGRhdGEgIT0gbnVsbCkgewogICAgICAgICAg\nICAgICAgICAgIC8vIyMjIHRoZSAnZGF0YS50eXBlJyBhY2Nlc3MgaGVyZSBw\ncm9iYWJseSBuZWVkcwogICAgICAgICAgICAgICAgICAgIC8vIyMjIHRvIGJl\nIGFkZHJlc3NlZCBmb3IgYnVnIDUxMQogICAgICAgICAgICAgICAgICAgIHNt\nLmluaXRpYWxpemUoZGF0YS5nZXRUeXBlKCksIHN0YXRlKTsKICAgICAgICAg\nICAgICAgICAgICBkYXRhLmxvYWQoc20sIGZldGNoLCBlZGF0YSk7CiAgICAg\nICAgICAgICAgICB9IGVsc2UKICAgICAgICAgICAgICAgICAgICB1bmxvYWRl\nZCA9IGFkZFVubG9hZGVkKHNtLCBudWxsLCB1bmxvYWRlZCk7CiAgICAgICAg\nICAgIH0gZWxzZSBpZiAobG9hZCAhPSBGT1JDRV9MT0FEX05PTkUKICAgICAg\nICAgICAgICAgIHx8IHNtLmdldFBDU3RhdGUoKSA9PSBQQ1N0YXRlLkhPTExP\nVykgewogICAgICAgICAgICAgICAgZGF0YSA9IGNhY2hlLmdldChzbS5nZXRP\nYmplY3RJZCgpKTsKICAgICAgICAgICAgICAgIGlmIChkYXRhICE9IG51bGwp\nIHsKICAgICAgICAgICAgICAgICAgICAvLyBsb2FkIHVubG9hZGVkIGZpZWxk\ncwogICAgICAgICAgICAgICAgICAgIGZpZWxkcyA9IHNtLmdldFVubG9hZGVk\nKGZldGNoKTsKICAgICAgICAgICAgICAgICAgICBkYXRhLmxvYWQoc20sIGZp\nZWxkcywgZmV0Y2gsIGVkYXRhKTsKICAgICAgICAgICAgICAgICAgICBpZiAo\nZmllbGRzLmxlbmd0aCgpID4gMCkKICAgICAgICAgICAgICAgICAgICAgICAg\ndW5sb2FkZWQgPSBhZGRVbmxvYWRlZChzbSwgZmllbGRzLCB1bmxvYWRlZCk7\nCiAgICAgICAgICAgICAgICB9IGVsc2UKICAgICAgICAgICAgICAgICAgICB1\nbmxvYWRlZCA9IGFkZFVubG9hZGVkKHNtLCBudWxsLCB1bmxvYWRlZCk7CiAg\nICAgICAgICAgIH0gZWxzZSBpZiAoIWNhY2hlLmNvbnRhaW5zKHNtLmdldE9i\namVjdElkKCkpKQogICAgICAgICAgICAgICAgdW5sb2FkZWQgPSBhZGRVbmxv\nYWRlZChzbSwgbnVsbCwgdW5sb2FkZWQpOwogICAgICAgIH0KCiAgICAgICAg\naWYgKHVubG9hZGVkID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBDb2xs\nZWN0aW9ucy5FTVBUWV9MSVNUOwoKICAgICAgICAvLyBsb2FkIHdpdGggZGVs\nZWdhdGUKICAgICAgICBDb2xsZWN0aW9uIGZhaWxlZCA9IHN1cGVyLmxvYWRB\nbGwodW5sb2FkZWQua2V5U2V0KCksIHN0YXRlLCBsb2FkLAogICAgICAgICAg\nICBmZXRjaCwgZWRhdGEpOwogICAgICAgIGlmICghX2N0eC5nZXRQb3B1bGF0\nZURhdGFDYWNoZSgpKQogICAgICAgICAgICByZXR1cm4gZmFpbGVkOwoKICAg\nICAgICAvLyBmb3IgZWFjaCBsb2FkZWQgaW5zdGFuY2UsIG1lcmdlIGxvYWRl\nZCBzdGF0ZSBpbnRvIGNhY2hlZCBkYXRhCiAgICAgICAgTWFwLkVudHJ5IGVu\ndHJ5OwogICAgICAgIGJvb2xlYW4gaXNOZXc7CiAgICAgICAgZm9yIChJdGVy\nYXRvciBpdHIgPSB1bmxvYWRlZC5lbnRyeVNldCgpLml0ZXJhdG9yKCk7IGl0\nci5oYXNOZXh0KCk7KSB7CiAgICAgICAgICAgIGVudHJ5ID0gKE1hcC5FbnRy\neSkgaXRyLm5leHQoKTsKICAgICAgICAgICAgc20gPSAoT3BlbkpQQVN0YXRl\nTWFuYWdlcikgZW50cnkuZ2V0S2V5KCk7CiAgICAgICAgICAgIGZpZWxkcyA9\nIChCaXRTZXQpIGVudHJ5LmdldFZhbHVlKCk7CgogICAgICAgICAgICBjYWNo\nZSA9IHNtLmdldE1ldGFEYXRhKCkuZ2V0RGF0YUNhY2hlKCk7CiAgICAgICAg\nICAgIGlmIChjYWNoZSA9PSBudWxsIHx8IHNtLmlzRW1iZWRkZWQoKSB8fCAo\nZmFpbGVkICE9IG51bGwKICAgICAgICAgICAgICAgICYmIGZhaWxlZC5jb250\nYWlucyhzbS5nZXRJZCgpKSkpCiAgICAgICAgICAgICAgICBjb250aW51ZTsK\nCiAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSB0aGF0IHdlJ3JlIG5vdCB0cnlp\nbmcgdG8gY2FjaGUgYW4gb2xkIHZlcnNpb24KICAgICAgICAgICAgY2FjaGUu\nd3JpdGVMb2NrKCk7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAg\nICBkYXRhID0gY2FjaGUuZ2V0KHNtLmdldE9iamVjdElkKCkpOwogICAgICAg\nICAgICAgICAgaWYgKGRhdGEgIT0gbnVsbCAmJiBjb21wYXJlVmVyc2lvbihz\nbSwgc20uZ2V0VmVyc2lvbigpLAogICAgICAgICAgICAgICAgICAgIGRhdGEu\nZ2V0VmVyc2lvbigpKSA9PSBWRVJTSU9OX0VBUkxJRVIpCiAgICAgICAgICAg\nICAgICAgICAgY29udGludWU7CgogICAgICAgICAgICAgICAgaXNOZXcgPSBk\nYXRhID09IG51bGw7CiAgICAgICAgICAgICAgICBpZiAoaXNOZXcpCiAgICAg\nICAgICAgICAgICAgICAgZGF0YSA9IG5ld1BDRGF0YShzbSk7CiAgICAgICAg\nICAgICAgICBpZiAoZmllbGRzID09IG51bGwpCiAgICAgICAgICAgICAgICAg\nICAgZGF0YS5zdG9yZShzbSk7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAg\nICAgICAgICAgICAgICAgZGF0YS5zdG9yZShzbSwgZmllbGRzKTsKICAgICAg\nICAgICAgICAgIGlmIChpc05ldykKICAgICAgICAgICAgICAgICAgICBjYWNo\nZS5wdXQoZGF0YSk7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAg\nICAgICAgICAgY2FjaGUudXBkYXRlKGRhdGEpOwogICAgICAgICAgICB9IGZp\nbmFsbHkgewogICAgICAgICAgICAgICAgY2FjaGUud3JpdGVVbmxvY2soKTsK\nICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFpbGVk\nOwogICAgfQoKICAgIC8qKgogICAgICogSGVscGVyIG1ldGhvZCB0byBhZGQg\nYW4gdW5sb2FkZWQgaW5zdGFuY2UgdG8gdGhlIGdpdmVuIG1hcC4KICAgICAq\nLwogICAgcHJpdmF0ZSBzdGF0aWMgTWFwIGFkZFVubG9hZGVkKE9wZW5KUEFT\ndGF0ZU1hbmFnZXIgc20sIEJpdFNldCBmaWVsZHMsCiAgICAgICAgTWFwIHVu\nbG9hZGVkKSB7CiAgICAgICAgaWYgKHVubG9hZGVkID09IG51bGwpCiAgICAg\nICAgICAgIHVubG9hZGVkID0gbmV3IEhhc2hNYXAoKTsKICAgICAgICB1bmxv\nYWRlZC5wdXQoc20sIGZpZWxkcyk7CiAgICAgICAgcmV0dXJuIHVubG9hZGVk\nOwogICAgfQoKICAgIHB1YmxpYyBDb2xsZWN0aW9uIGZsdXNoKENvbGxlY3Rp\nb24gc3RhdGVzKSB7CiAgICAgICAgQ29sbGVjdGlvbiBleGNlcHMgPSBzdXBl\nci5mbHVzaChzdGF0ZXMpOwoKICAgICAgICAvLyBpZiB0aGVyZSB3ZXJlIGVy\ncm9ycyBldmljdCBiYWQgaW5zdGFuY2VzIGFuZCBkb24ndCByZWNvcmQgY2hh\nbmdlcwogICAgICAgIGlmICghZXhjZXBzLmlzRW1wdHkoKSkgewogICAgICAg\nICAgICBmb3IgKEl0ZXJhdG9yIGl0ZXIgPSBleGNlcHMuaXRlcmF0b3IoKTsg\naXRlci5oYXNOZXh0KCk7ICkgewogICAgICAgICAgICAgICAgRXhjZXB0aW9u\nIGUgPSAoRXhjZXB0aW9uKSBpdGVyLm5leHQoKTsKICAgICAgICAgICAgICAg\nIGlmIChlIGluc3RhbmNlb2YgT3B0aW1pc3RpY0V4Y2VwdGlvbikKICAgICAg\nICAgICAgICAgICAgICBldmljdE9wdGltaXN0aWNMb2NrRmFpbHVyZSgoT3B0\naW1pc3RpY0V4Y2VwdGlvbikgZSk7CiAgICAgICAgICAgIH0KICAgICAgICAg\nICAgcmV0dXJuIGV4Y2VwczsKICAgICAgICB9CgogICAgICAgIC8vIGlmIGxh\ncmdlIHRyYW5zYWN0aW9uIG1vZGUgZG9uJ3QgcmVjb3JkIGluZGl2aWR1YWwg\nY2hhbmdlcwogICAgICAgIGlmIChfY3R4LmlzTGFyZ2VUcmFuc2FjdGlvbigp\nKQogICAgICAgICAgICByZXR1cm4gZXhjZXBzOwoKICAgICAgICBPcGVuSlBB\nU3RhdGVNYW5hZ2VyIHNtOwogICAgICAgIGZvciAoSXRlcmF0b3IgaXRyID0g\nc3RhdGVzLml0ZXJhdG9yKCk7IGl0ci5oYXNOZXh0KCk7KSB7CiAgICAgICAg\nICAgIHNtID0gKE9wZW5KUEFTdGF0ZU1hbmFnZXIpIGl0ci5uZXh0KCk7Cgog\nICAgICAgICAgICBpZiAoc20uZ2V0UENTdGF0ZSgpID09IFBDU3RhdGUuUE5F\nVyAmJiAhc20uaXNGbHVzaGVkKCkpIHsKICAgICAgICAgICAgICAgIGlmIChf\naW5zZXJ0cyA9PSBudWxsKQogICAgICAgICAgICAgICAgICAgIF9pbnNlcnRz\nID0gbmV3IEFycmF5TGlzdCgpOwogICAgICAgICAgICAgICAgX2luc2VydHMu\nYWRkKHNtKTsKCiAgICAgICAgICAgICAgICAvLyBtYXkgaGF2ZSBiZWVuIHJl\nLXBlcnNpc3RlZAogICAgICAgICAgICAgICAgaWYgKF9kZWxldGVzICE9IG51\nbGwpCiAgICAgICAgICAgICAgICAgICAgX2RlbGV0ZXMucmVtb3ZlKHNtKTsK\nICAgICAgICAgICAgfSBlbHNlIGlmIChfaW5zZXJ0cyAhPSBudWxsIAogICAg\nICAgICAgICAgICAgJiYgKHNtLmdldFBDU3RhdGUoKSA9PSBQQ1N0YXRlLlBO\nRVdERUxFVEVEIAogICAgICAgICAgICAgICAgfHwgc20uZ2V0UENTdGF0ZSgp\nID09IFBDU3RhdGUuUE5FV0ZMVVNIRURERUxFVEVEKSkKICAgICAgICAgICAg\nICAgIF9pbnNlcnRzLnJlbW92ZShzbSk7CiAgICAgICAgICAgIGVsc2UgaWYg\nKHNtLmdldFBDU3RhdGUoKSA9PSBQQ1N0YXRlLlBESVJUWSkgewogICAgICAg\nICAgICAgICAgaWYgKF91cGRhdGVzID09IG51bGwpCiAgICAgICAgICAgICAg\nICAgICAgX3VwZGF0ZXMgPSBuZXcgSGFzaE1hcCgpOwogICAgICAgICAgICAg\nICAgX3VwZGF0ZXMucHV0KHNtLCBzbS5nZXREaXJ0eSgpKTsKICAgICAgICAg\nICAgfSBlbHNlIGlmIChzbS5nZXRQQ1N0YXRlKCkgPT0gUENTdGF0ZS5QREVM\nRVRFRCkgewogICAgICAgICAgICAgICAgaWYgKF9kZWxldGVzID09IG51bGwp\nCiAgICAgICAgICAgICAgICAgICAgX2RlbGV0ZXMgPSBuZXcgSGFzaFNldCgp\nOwogICAgICAgICAgICAgICAgX2RlbGV0ZXMuYWRkKHNtKTsKICAgICAgICAg\nICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gQ29sbGVjdGlvbnMuRU1Q\nVFlfTElTVDsKICAgIH0KCiAgICAvKioKICAgICAqIEV2aWN0IGZyb20gdGhl\nIGNhY2hlIHRoZSBPSUQgKGlmIGF2YWlsYWJsZSkgdGhhdCByZXN1bHRlZCBp\nbiBhbgogICAgICogb3B0aW1pc3RpYyBsb2NrIGV4Y2VwdGlvbiBpZmYgdGhl\nIHZlcnNpb24gaW5mb3JtYXRpb24gaW4gdGhlIGNhY2hlIAogICAgICogbWF0\nY2hlcyB0aGUgdmVyc2lvbiBpbmZvcm1hdGlvbiBpbiB0aGUgc3RhdGUgbWFu\nYWdlciBmb3IgdGhlIGZhaWxlZAogICAgICogaW5zdGFuY2UuIFRoaXMgbWVh\nbnMgdGhhdCB3ZSB3aWxsIGV2aWN0IGRhdGEgZnJvbSB0aGUgY2FjaGUgZm9y\nIHJlY29yZHMgCiAgICAgKiB0aGF0IHNob3VsZCBoYXZlIHN1Y2Nlc3NmdWxs\neSBjb21taXR0ZWQgYWNjb3JkaW5nIHRvIHRoZSBkYXRhIGNhY2hlIGJ1dCAK\nICAgICAqIGRpZCBub3QuIFRoZSBvbmx5IHByZWRpY3RhYmxlIHJlYXNvbiB0\naGF0IGNvdWxkIGNhdXNlIHRoaXMgYmVoYXZpb3IKICAgICAqIGlzIGEgY29u\nY3VycmVudCBvdXQtb2YtYmFuZCBtb2RpZmljYXRpb24gdG8gdGhlIGRhdGFi\nYXNlIHRoYXQgd2FzIG5vdCAKICAgICAqIGNvbW11bmljYXRlZCB0byB0aGUg\nY2FjaGUuIFRoaXMgbG9naWMgbWFrZXMgT3BlbkpQQSdzIGRhdGEgY2FjaGUg\nCiAgICAgKiBzb21ld2hhdCB0b2xlcmFudCBvZiBzdWNoIGJlaGF2aW9yLCBp\nbiB0aGF0IHRoZSBjYWNoZSB3aWxsIGJlIGNsZWFuZWQgCiAgICAgKiB1cCBh\ncyBmYWlsdXJlcyBvY2N1ci4KICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIGV2\naWN0T3B0aW1pc3RpY0xvY2tGYWlsdXJlKE9wdGltaXN0aWNFeGNlcHRpb24g\nZSkgewogICAgICAgIE9iamVjdCBvID0gKChPcHRpbWlzdGljRXhjZXB0aW9u\nKSBlKS5nZXRGYWlsZWRPYmplY3QoKTsKICAgICAgICBPcGVuSlBBU3RhdGVN\nYW5hZ2VyIHNtID0gX2N0eC5nZXRTdGF0ZU1hbmFnZXIobyk7CiAgICAgICAg\naWYgKHNtID09IG51bGwpCiAgICAgICAgICAgIHJldHVybjsKCiAgICAgICAg\nLy8gdGhpcyBsb2dpYyBjb3VsZCBiZSBtb3JlIGVmZmljaWVudCAtLSB3ZSBj\nb3VsZCBhZ2dyZWdhdGUKICAgICAgICAvLyBhbGwgdGhlIGNhY2hlLT5vaWQg\nY2hhbmdlcywgYW5kIHRoZW4gdXNlIERhdGFDYWNoZS5yZW1vdmVBbGwoKSAK\nICAgICAgICAvLyBhbmQgbGVzcyB3cml0ZSBsb2NrcyB0byBkbyB0aGUgbXV0\nYXRpb24uCiAgICAgICAgQ2xhc3NNZXRhRGF0YSBtZXRhID0gc20uZ2V0TWV0\nYURhdGEoKTsKICAgICAgICBEYXRhQ2FjaGUgY2FjaGUgPSBtZXRhLmdldERh\ndGFDYWNoZSgpOwogICAgICAgIGlmIChjYWNoZSA9PSBudWxsKQogICAgICAg\nICAgICByZXR1cm47CgogICAgICAgIGNhY2hlLndyaXRlTG9jaygpOwogICAg\nICAgIHRyeSB7CiAgICAgICAgICAgIERhdGFDYWNoZVBDRGF0YSBkYXRhID0g\nY2FjaGUuZ2V0KHNtLmdldElkKCkpOwogICAgICAgICAgICBpZiAoZGF0YSA9\nPSBudWxsKQogICAgICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICAgICAg\nYm9vbGVhbiByZW1vdmU7CiAgICAgICAgICAgIHN3aXRjaCAoY29tcGFyZVZl\ncnNpb24oc20sIHNtLmdldFZlcnNpb24oKSwgZGF0YS5nZXRWZXJzaW9uKCkp\nKSB7CiAgICAgICAgICAgICAgICBjYXNlIFN0b3JlTWFuYWdlci5WRVJTSU9O\nX0xBVEVSOgogICAgICAgICAgICAgICAgY2FzZSBTdG9yZU1hbmFnZXIuVkVS\nU0lPTl9TQU1FOgogICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgdHgncyBj\ndXJyZW50IHZlcnNpb24gaXMgbGF0ZXIgdGhhbiBvciB0aGUgc2FtZSBhcyAK\nICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZGF0YSBjYWNoZSB2ZXJzaW9u\nLiBJbiB0aGlzIGNhc2UsIHRoZSBjb21taXQgc2hvdWxkIAogICAgICAgICAg\nICAgICAgICAgIC8vIGhhdmUgc3VjY2VlZGVkIGZyb20gdGhlIHN0YW5kcG9p\nbnQgb2YgdGhlIGNhY2hlLiBSZW1vdmUgCiAgICAgICAgICAgICAgICAgICAg\nLy8gdGhlIGluc3RhbmNlIGZyb20gY2FjaGUgaW4gdGhlIGhvcGVzIHRoYXQg\ndGhlIGNhY2hlIGlzIAogICAgICAgICAgICAgICAgICAgIC8vIG91dCBvZiBz\neW5jLgogICAgICAgICAgICAgICAgICAgIHJlbW92ZSA9IHRydWU7CiAgICAg\nICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIFN0\nb3JlTWFuYWdlci5WRVJTSU9OX0VBUkxJRVI6CiAgICAgICAgICAgICAgICAg\nICAgLy8gVGhpcyB0eCdzIGN1cnJlbnQgdmVyc2lvbiBpcyBlYXJsaWVyIHRo\nYW4gdGhlIGRhdGEgCiAgICAgICAgICAgICAgICAgICAgLy8gY2FjaGUgdmVy\nc2lvbi4gVGhpcyBpcyBhIG5vcm1hbCBvcHRpbWlzdGljIGxvY2sgZmFpbHVy\nZS4gCiAgICAgICAgICAgICAgICAgICAgLy8gRG8gbm90IGNsZWFuIHVwIHRo\nZSBjYWNoZTsgaXQgcHJvYmFibHkgYWxyZWFkeSBoYXMgdGhlIAogICAgICAg\nICAgICAgICAgICAgIC8vIHJpZ2h0IHZhbHVlcywgYW5kIGlmIG5vdCwgaXQn\nbGwgZ2V0IGNsZWFuZWQgdXAgYnkgYSB0eAogICAgICAgICAgICAgICAgICAg\nIC8vIHRoYXQgZmFpbHMgaW4gb25lIG9mIHRoZSBvdGhlciBjYXNlIHN0YXRl\nbWVudHMuCiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlID0gZmFsc2U7CiAg\nICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNl\nIFN0b3JlTWFuYWdlci5WRVJTSU9OX0RJRkZFUkVOVDoKICAgICAgICAgICAg\nICAgICAgICAvLyBUaGUgdmVyc2lvbiBzdHJhdGVneSBmb3IgdGhlIGZhaWxl\nZCBvYmplY3QgZG9lcyBub3QKICAgICAgICAgICAgICAgICAgICAvLyBzdG9y\nZSBlbm91Z2ggaW5mb3JtYXRpb24gdG8gb3B0aW1pemUgZm9yIGV4cGVjdGVk\nCiAgICAgICAgICAgICAgICAgICAgLy8gZmFpbHVyZXMuIENsZWFuIHVwIHRo\nZSBjYWNoZS4KICAgICAgICAgICAgICAgICAgICByZW1vdmUgPSB0cnVlOwog\nICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgZGVm\nYXVsdDoKICAgICAgICAgICAgICAgICAgICAvLyBVbmV4cGVjdGVkIHJldHVy\nbiB2YWx1ZS4gUmVtb3ZlIHRvIGJlIGZ1dHVyZS1wcm9vZi4KICAgICAgICAg\nICAgICAgICAgICByZW1vdmUgPSB0cnVlOwogICAgICAgICAgICAgICAgICAg\nIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChyZW1vdmUp\nCiAgICAgICAgICAgICAgICBjYWNoZS5yZW1vdmUoc20uZ2V0SWQoKSk7CiAg\nICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgY2FjaGUud3JpdGVVbmxv\nY2soKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIFN0b3JlUXVlcnkg\nbmV3UXVlcnkoU3RyaW5nIGxhbmd1YWdlKSB7CiAgICAgICAgU3RvcmVRdWVy\neSBxID0gc3VwZXIubmV3UXVlcnkobGFuZ3VhZ2UpOwoKICAgICAgICAvLyBp\nZiB0aGUgcXVlcnkgY2FuJ3QgYmUgcGFyc2VkIG9yIGl0J3MgdXNpbmcgYSBu\nb24tcGFyc2VkIGxhbmd1YWdlCiAgICAgICAgLy8gKG9uZSBmb3Igd2hpY2gg\ndGhlcmUgaXMgbm8gRXhwcmVzc2lvblBhcnNlciksIHdlIGNhbid0IGNhY2hl\nIGl0LgogICAgICAgIGlmIChxID09IG51bGwgfHwgUXVlcnlMYW5ndWFnZXMu\ncGFyc2VyRm9yTGFuZ3VhZ2UobGFuZ3VhZ2UpID09IG51bGwpCiAgICAgICAg\nICAgIHJldHVybiBxOwoKICAgICAgICBRdWVyeUNhY2hlIHF1ZXJ5Q2FjaGUg\nPSBfY3R4LmdldENvbmZpZ3VyYXRpb24oKS4KICAgICAgICAgICAgZ2V0RGF0\nYUNhY2hlTWFuYWdlckluc3RhbmNlKCkuZ2V0U3lzdGVtUXVlcnlDYWNoZSgp\nOwogICAgICAgIGlmIChxdWVyeUNhY2hlID09IG51bGwpCiAgICAgICAgICAg\nIHJldHVybiBxOwoKICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5Q2FjaGVTdG9y\nZVF1ZXJ5KHEsIHF1ZXJ5Q2FjaGUpOwogICAgfQoKICAgIC8qKgogICAgICog\nQ3JlYXRlIGEgbmV3IGNhY2hlYWJsZSBpbnN0YW5jZSBmb3IgdGhlIGdpdmVu\nIHN0YXRlIG1hbmFnZXIuCiAgICAgKi8KICAgIHByaXZhdGUgRGF0YUNhY2hl\nUENEYXRhIG5ld1BDRGF0YShPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtKSB7CiAg\nICAgICAgQ2xhc3NNZXRhRGF0YSBtZXRhID0gc20uZ2V0TWV0YURhdGEoKTsK\nICAgICAgICBpZiAoX2dlbiAhPSBudWxsKQogICAgICAgICAgICByZXR1cm4g\nKERhdGFDYWNoZVBDRGF0YSkgX2dlbi5nZW5lcmF0ZVBDRGF0YQogICAgICAg\nICAgICAgICAgKHNtLmdldE9iamVjdElkKCksIG1ldGEpOwogICAgICAgIHJl\ndHVybiBuZXcgRGF0YUNhY2hlUENEYXRhSW1wbChzbS5mZXRjaE9iamVjdElk\nKCksIG1ldGEpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHdoZXRo\nZXIgdGhlIGNvbnRleHQgaXMgbG9ja2luZyBsb2FkZWQgZGF0YS4KICAgICAq\nLwogICAgcHJpdmF0ZSBib29sZWFuIGlzTG9ja2luZyhGZXRjaENvbmZpZ3Vy\nYXRpb24gZmV0Y2gpIHsKICAgICAgICBpZiAoZmV0Y2ggPT0gbnVsbCkKICAg\nICAgICAgICAgZmV0Y2ggPSBfY3R4LmdldEZldGNoQ29uZmlndXJhdGlvbigp\nOwogICAgICAgIHJldHVybiBmZXRjaC5nZXRSZWFkTG9ja0xldmVsKCkgPiBM\nb2NrTGV2ZWxzLkxPQ0tfTk9ORTsKICAgIH0KCiAgICAvKioKICAgICAqIFN0\ncnVjdHVyZSB1c2VkIGR1cmluZyB0aGUgY29tbWl0IHByb2Nlc3MgdG8gdHJh\nY2sgY2FjaGUgbW9kaWZpY2F0aW9ucy4KICAgICAqLwogICAgcHJpdmF0ZSBz\ndGF0aWMgY2xhc3MgTW9kaWZpY2F0aW9ucyB7CgogICAgICAgIHB1YmxpYyBm\naW5hbCBMaXN0IGFkZGl0aW9ucyA9IG5ldyBBcnJheUxpc3QoKTsKICAgICAg\nICBwdWJsaWMgZmluYWwgTGlzdCBuZXdVcGRhdGVzID0gbmV3IEFycmF5TGlz\ndCgpOwogICAgICAgIHB1YmxpYyBmaW5hbCBMaXN0IGV4aXN0aW5nVXBkYXRl\ncyA9IG5ldyBBcnJheUxpc3QoKTsKICAgICAgICBwdWJsaWMgZmluYWwgTGlz\ndCBkZWxldGVzID0gbmV3IEFycmF5TGlzdCgpOwogICAgfQoKICAgIHByaXZh\ndGUgc3RhdGljIGNsYXNzIFBDRGF0YUhvbGRlciB7CgogICAgICAgIHB1Ymxp\nYyBmaW5hbCBEYXRhQ2FjaGVQQ0RhdGEgcGNkYXRhOwogICAgICAgIHB1Ymxp\nYyBmaW5hbCBPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtOwoKICAgICAgICBwdWJs\naWMgUENEYXRhSG9sZGVyKERhdGFDYWNoZVBDRGF0YSBwY2RhdGEsCiAgICAg\nICAgICAgIE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20pIHsKICAgICAgICAgICAg\ndGhpcy5wY2RhdGEgPSBwY2RhdGE7CiAgICAgICAgICAgIHRoaXMuc20gPSBz\nbTsKCQl9Cgl9Cn0KCg==\n","encoding":"base64"}

