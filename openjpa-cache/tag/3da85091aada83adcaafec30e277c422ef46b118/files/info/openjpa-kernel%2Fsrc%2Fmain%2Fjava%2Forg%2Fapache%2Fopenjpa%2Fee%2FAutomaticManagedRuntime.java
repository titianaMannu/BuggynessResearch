{"sha":"8c480547439aad79c297bb9e9c95931cf0cb1429","node_id":"MDQ6QmxvYjIwNjM2NDo4YzQ4MDU0NzQzOWFhZDc5YzI5N2JiOWU5Yzk1OTMxY2YwY2IxNDI5","size":6940,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/8c480547439aad79c297bb9e9c95931cf0cb1429","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\nZWU7DQoNCmltcG9ydCBqYXZhLnV0aWwuTGlua2VkTGlzdDsNCmltcG9ydCBq\nYXZhLnV0aWwuTGlzdDsNCmltcG9ydCBqYXZheC50cmFuc2FjdGlvbi5UcmFu\nc2FjdGlvbk1hbmFnZXI7DQoNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nbGliLmNvbmYuQ29uZmlndXJhYmxlOw0KaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5saWIuY29uZi5Db25maWd1cmF0aW9uOw0KaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6ZXI7DQppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnV0aWwuSW52YWxpZFN0YXRlRXhjZXB0aW9uOw0KDQov\nKioNCiAqIEltcGxlbWVudGF0aW9uIG9mIHRoZSB7QGxpbmsgTWFuYWdlZFJ1\nbnRpbWV9IGludGVyZmFjZSB0aGF0IHNlYXJjaGVzDQogKiB0aHJvdWdoIGEg\nc2V0IG9mIGtub3duIEpOREkgbG9jYXRpb25zIGFuZCBtZXRob2QgaW52b2Nh\ndGlvbnMgdG8gbG9jYXRlIHRoZQ0KICogYXBwcm9wcmlhdGUgbWVjaGFuaXNt\nIGZvciBvYnRhaW5pbmcgYSBUcmFuc2FjdGlvbk1hbmFnZXIuDQogKiAgQnVp\nbHQgaW4gc3VwcG9ydCBpcyBwcm92aWRlZCBmb3IgdGhlIGZvbGxvd2luZyBB\ncHBsaWNhdGlvbiBTZXJ2ZXJzOg0KICogPHVsPg0KICogPGxpPkJsdWVzdG9u\nZTwvbGk+DQogKiA8bGk+SFAgQXBwbGljYXRpb24gU2VydmVyPC9saT4NCiAq\nIDxsaT5KQm9zczwvbGk+DQogKiA8bGk+SlJ1bjwvbGk+DQogKiA8bGk+T3Bl\nbkVKQjwvbGk+DQogKiA8bGk+T3JhY2xlIEFwcGxpY2F0aW9uIFNlcnZlcjwv\nbGk+DQogKiA8bGk+T3Jpb248L2xpPg0KICogPGxpPlN1bk9ORTwvbGk+DQog\nKiA8bGk+V2VibG9naWM8L2xpPg0KICogPGxpPldlYnNwaGVyZTwvbGk+DQog\nKiA8L3VsPg0KICoNCiAqIEBhdXRob3IgTWFyYyBQcnVkJ2hvbW1lYXV4DQog\nKi8NCnB1YmxpYyBjbGFzcyBBdXRvbWF0aWNNYW5hZ2VkUnVudGltZQ0KICAg\nIGltcGxlbWVudHMgTWFuYWdlZFJ1bnRpbWUsIENvbmZpZ3VyYWJsZSB7DQoN\nCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgW10gSk5ESV9MT0NT\nID0gbmV3IFN0cmluZyBbXXsNCiAgICAgICAgImphdmF4LnRyYW5zYWN0aW9u\nLlRyYW5zYWN0aW9uTWFuYWdlciIsIC8vIHdlYmxvZ2ljDQogICAgICAgICJq\nYXZhOi9UcmFuc2FjdGlvbk1hbmFnZXIiLCAvLyBqYm9zcyAmIGpydW4NCiAg\nICAgICAgImphdmE6L0RlZmF1bHREb21haW4vVHJhbnNhY3Rpb25NYW5hZ2Vy\nIiwgLy8ganJ1biB0b28NCiAgICAgICAgImphdmE6Y29tcC9wbS9UcmFuc2Fj\ndGlvbk1hbmFnZXIiLCAvLyBvcmlvbiAmIG9yYWNsZQ0KICAgICAgICAiamF2\nYTpjb21wL1RyYW5zYWN0aW9uTWFuYWdlciIsIC8vIGdlbmVyaWMNCiAgICAg\nICAgImphdmE6cG0vVHJhbnNhY3Rpb25NYW5hZ2VyIiwgLy8gYm9ybGFuZA0K\nICAgIH07DQogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIFtdIE1F\nVEhPRFMgPSBuZXcgU3RyaW5nW117DQogICAgICAgICJjb20uYXJqdW5hLmp0\nYS5KVEFfVHJhbnNhY3Rpb25NYW5hZ2VyLnRyYW5zYWN0aW9uTWFuYWdlciIs\nIC8vIGhwDQogICAgICAgICJjb20uYmx1ZXN0b25lLmp0YS5TYVRyYW5zYWN0\naW9uTWFuYWdlckZhY3RvcnkuU2FHZXRUcmFuc2FjdGlvbk1hbmFnZXIiLA0K\nICAgICAgICAib3JnLm9wZW5lamIuT3BlbkVKQi5nZXRUcmFuc2FjdGlvbk1h\nbmFnZXIiLA0KICAgICAgICAiY29tLnN1bi5qdHMuanRhLlRyYW5zYWN0aW9u\nTWFuYWdlckltcGwuZ2V0VHJhbnNhY3Rpb25NYW5hZ2VySW1wbCIsDQogICAg\nICAgICJjb20uaW5wcmlzZS52aXNpdHJhbnNhY3QuanRhLlRyYW5zYWN0aW9u\nTWFuYWdlckltcGwuIg0KICAgICAgICAgICAgKyAiZ2V0VHJhbnNhY3Rpb25N\nYW5hZ2VySW1wbCIsIC8vIGJvcmxhbmQNCiAgICB9Ow0KICAgIHByaXZhdGUg\nc3RhdGljIGZpbmFsIFdMU01hbmFnZWRSdW50aW1lIFdMUzsNCiAgICBwcml2\nYXRlIHN0YXRpYyBmaW5hbCBTdW5PbmVNYW5hZ2VkUnVudGltZSBTVU5PTkU7\nDQogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgV0FTTWFuYWdlZFJ1bnRpbWUg\nV0FTOw0KDQogICAgcHJpdmF0ZSBzdGF0aWMgTG9jYWxpemVyIF9sb2MgPSBM\nb2NhbGl6ZXIuZm9yUGFja2FnZQ0KICAgICAgICAoQXV0b21hdGljTWFuYWdl\nZFJ1bnRpbWUuY2xhc3MpOw0KDQogICAgc3RhdGljIHsNCiAgICAgICAgTWFu\nYWdlZFJ1bnRpbWUgbXIgPSBudWxsOw0KICAgICAgICB0cnkgew0KICAgICAg\nICAgICAgbXIgPSBuZXcgV0xTTWFuYWdlZFJ1bnRpbWUoKTsNCiAgICAgICAg\nfSBjYXRjaCAoVGhyb3dhYmxlIHQpIHsNCiAgICAgICAgfQ0KICAgICAgICBX\nTFMgPSAoV0xTTWFuYWdlZFJ1bnRpbWUpIG1yOw0KDQogICAgICAgIG1yID0g\nbnVsbDsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIG1yID0gbmV3IFN1\nbk9uZU1hbmFnZWRSdW50aW1lKCk7DQogICAgICAgIH0gY2F0Y2ggKFRocm93\nYWJsZSB0KSB7DQogICAgICAgIH0NCiAgICAgICAgU1VOT05FID0gKFN1bk9u\nZU1hbmFnZWRSdW50aW1lKSBtcjsNCg0KICAgICAgICBtciA9IG51bGw7DQog\nICAgICAgIHRyeSB7DQogICAgICAgICAgICBtciA9IG5ldyBXQVNNYW5hZ2Vk\nUnVudGltZSgpOw0KICAgICAgICB9DQogICAgICAgIGNhdGNoKFRocm93YWJs\nZSB0KSB7DQogICAgICAgIH0NCiAgICAgICAgV0FTPSAoV0FTTWFuYWdlZFJ1\nbnRpbWUpIG1yOw0KICAgIH0NCg0KICAgIHByaXZhdGUgQ29uZmlndXJhdGlv\nbiBfY29uZiA9IG51bGw7DQogICAgcHJpdmF0ZSBNYW5hZ2VkUnVudGltZSBf\ncnVudGltZSA9IG51bGw7DQoNCiAgICBwdWJsaWMgVHJhbnNhY3Rpb25NYW5h\nZ2VyIGdldFRyYW5zYWN0aW9uTWFuYWdlcigpDQogICAgICAgIHRocm93cyBF\neGNlcHRpb24gew0KICAgICAgICBpZiAoX3J1bnRpbWUgIT0gbnVsbCkNCiAg\nICAgICAgICAgIHJldHVybiBfcnVudGltZS5nZXRUcmFuc2FjdGlvbk1hbmFn\nZXIoKTsNCg0KICAgICAgICBMaXN0IGVycm9ycyA9IG5ldyBMaW5rZWRMaXN0\nKCk7DQogICAgICAgIFRyYW5zYWN0aW9uTWFuYWdlciB0bSA9IG51bGw7DQoN\nCiAgICAgICAgaWYgKFdMUyAhPSBudWxsKSB7DQogICAgICAgICAgICB0cnkg\new0KICAgICAgICAgICAgICAgIHRtID0gV0xTLmdldFRyYW5zYWN0aW9uTWFu\nYWdlcigpOw0KICAgICAgICAgICAgfSBjYXRjaCAoVGhyb3dhYmxlIHQpIHsN\nCiAgICAgICAgICAgICAgICBlcnJvcnMuYWRkKHQpOw0KICAgICAgICAgICAg\nfQ0KICAgICAgICAgICAgaWYgKHRtICE9IG51bGwpIHsNCiAgICAgICAgICAg\nICAgICBfcnVudGltZSA9IFdMUzsNCiAgICAgICAgICAgICAgICByZXR1cm4g\ndG07DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBpZiAo\nV0FTICE9IG51bGwpIHsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAg\nICAgICAgV0FTLnNldENvbmZpZ3VyYXRpb24oX2NvbmYpOw0KICAgICAgICAg\nICAgICAgIFdBUy5zdGFydENvbmZpZ3VyYXRpb24oKTsNCiAgICAgICAgICAg\nICAgICBXQVMuZW5kQ29uZmlndXJhdGlvbigpOw0KICAgICAgICAgICAgICAg\nIHRtID0gV0FTLmdldFRyYW5zYWN0aW9uTWFuYWdlcigpOw0KICAgICAgICAg\nICAgfSBjYXRjaCAoVGhyb3dhYmxlIHQpIHsNCiAgICAgICAgICAgICAgICBl\ncnJvcnMuYWRkKHQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYg\nKHRtICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICBfcnVudGltZSA9IFdB\nUzsNCiAgICAgICAgICAgICAgICByZXR1cm4gdG07DQogICAgICAgICAgICB9\nDQogICAgICAgIH0NCg0KICAgICAgICAvLyB0cnkgdG8gZmluZCBhIGpuZGkg\ncnVudGltZQ0KICAgICAgICBKTkRJTWFuYWdlZFJ1bnRpbWUgam1yID0gbmV3\nIEpORElNYW5hZ2VkUnVudGltZSgpOw0KICAgICAgICBmb3IgKGludCBpID0g\nMDsgaSA8IEpORElfTE9DUy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAg\nam1yLnNldFRyYW5zYWN0aW9uTWFuYWdlck5hbWUoSk5ESV9MT0NTW2ldKTsN\nCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgdG0gPSBqbXIu\nZ2V0VHJhbnNhY3Rpb25NYW5hZ2VyKCk7DQogICAgICAgICAgICB9IGNhdGNo\nIChUaHJvd2FibGUgdCkgew0KICAgICAgICAgICAgICAgIGVycm9ycy5hZGQo\ndCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAodG0gIT0gbnVs\nbCkgew0KICAgICAgICAgICAgICAgIF9ydW50aW1lID0gam1yOw0KICAgICAg\nICAgICAgICAgIHJldHVybiB0bTsNCiAgICAgICAgICAgIH0NCiAgICAgICAg\nfQ0KDQogICAgICAgIC8vIGxvb2sgZm9yIGEgbWV0aG9kIHJ1bnRpbWUNCiAg\nICAgICAgSW52b2NhdGlvbk1hbmFnZWRSdW50aW1lIGltciA9IG5ldyBJbnZv\nY2F0aW9uTWFuYWdlZFJ1bnRpbWUoKTsNCiAgICAgICAgZm9yIChpbnQgaSA9\nIDA7IGkgPCBNRVRIT0RTLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICBp\nbXIuc2V0Q29uZmlndXJhdGlvbihfY29uZik7DQogICAgICAgICAgICBpbXIu\nc2V0VHJhbnNhY3Rpb25NYW5hZ2VyTWV0aG9kKE1FVEhPRFNbaV0pOw0KICAg\nICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICB0bSA9IGltci5nZXRU\ncmFuc2FjdGlvbk1hbmFnZXIoKTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKFRo\ncm93YWJsZSB0KSB7DQogICAgICAgICAgICAgICAgZXJyb3JzLmFkZCh0KTsN\nCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICh0bSAhPSBudWxsKSB7\nDQogICAgICAgICAgICAgICAgX3J1bnRpbWUgPSBpbXI7DQogICAgICAgICAg\nICAgICAgcmV0dXJuIHRtOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoN\nCiAgICAgICAgaWYgKFNVTk9ORSAhPSBudWxsKSB7DQogICAgICAgICAgICB0\ncnkgew0KICAgICAgICAgICAgICAgIHRtID0gU1VOT05FLmdldFRyYW5zYWN0\naW9uTWFuYWdlcigpOw0KICAgICAgICAgICAgfSBjYXRjaCAoVGhyb3dhYmxl\nIHQpIHsNCiAgICAgICAgICAgICAgICBlcnJvcnMuYWRkKHQpOw0KICAgICAg\nICAgICAgfQ0KICAgICAgICAgICAgaWYgKHRtICE9IG51bGwpIHsNCiAgICAg\nICAgICAgICAgICBfcnVudGltZSA9IFNVTk9ORTsNCiAgICAgICAgICAgICAg\nICByZXR1cm4gdG07DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAg\nICAgICBUaHJvd2FibGVbXSB0ID0gKFRocm93YWJsZSBbXSkgZXJyb3JzLnRv\nQXJyYXkoDQogICAgICAgICAgICBuZXcgVGhyb3dhYmxlIFtlcnJvcnMuc2l6\nZSgpXSk7DQogICAgICAgIHRocm93IG5ldyBJbnZhbGlkU3RhdGVFeGNlcHRp\nb24oX2xvYy5nZXQoInRtLW5vdC1mb3VuZCIpKS4NCiAgICAgICAgICAgIHNl\ndEZhdGFsKHRydWUpLnNldE5lc3RlZFRocm93YWJsZXModCk7DQogICAgfQ0K\nDQogICAgcHVibGljIHZvaWQgc2V0Q29uZmlndXJhdGlvbihDb25maWd1cmF0\naW9uIGNvbmYpIHsNCiAgICAgICAgX2NvbmYgPSBjb25mOw0KICAgIH0NCg0K\nICAgIHB1YmxpYyB2b2lkIHN0YXJ0Q29uZmlndXJhdGlvbigpIHsNCiAgICB9\nDQoNCiAgICBwdWJsaWMgdm9pZCBlbmRDb25maWd1cmF0aW9uKCkgew0KICAg\nIH0NCg0KICAgIHB1YmxpYyB2b2lkIHNldFJvbGxiYWNrT25seShUaHJvd2Fi\nbGUgY2F1c2UpDQogICAgICAgIHRocm93cyBFeGNlcHRpb24gew0KICAgICAg\nICAvLyBjaGVjayB0byBzZWUgaWYgdGhlIHJ1bnRpbWUgaXMgY2FjaGVkDQog\nICAgICAgIGlmIChfcnVudGltZSA9PSBudWxsKQ0KICAgICAgICAgICAgZ2V0\nVHJhbnNhY3Rpb25NYW5hZ2VyKCk7DQoNCiAgICAgICAgaWYgKF9ydW50aW1l\nICE9IG51bGwpDQogICAgICAgICAgICBfcnVudGltZS5zZXRSb2xsYmFja09u\nbHkoY2F1c2UpOw0KICAgIH0NCg0KICAgIHB1YmxpYyBUaHJvd2FibGUgZ2V0\nUm9sbGJhY2tDYXVzZSgpDQogICAgICAgIHRocm93cyBFeGNlcHRpb24gew0K\nICAgICAgICAvLyBjaGVjayB0byBzZWUgaWYgdGhlIHJ1bnRpbWUgaXMgY2Fj\naGVkDQogICAgICAgIGlmIChfcnVudGltZSA9PSBudWxsKQ0KICAgICAgICAg\nICAgZ2V0VHJhbnNhY3Rpb25NYW5hZ2VyKCk7DQoNCiAgICAgICAgaWYgKF9y\ndW50aW1lICE9IG51bGwpDQogICAgICAgICAgICByZXR1cm4gX3J1bnRpbWUu\nZ2V0Um9sbGJhY2tDYXVzZSgpOw0KDQogICAgICAgIHJldHVybiBudWxsOw0K\nICAgIH0NCn0NCg==\n","encoding":"base64"}

