{"sha":"6d1a3ce79ca007c54697a2e562c8946d72043b44","node_id":"MDQ6QmxvYjIwNjM2NDo2ZDFhM2NlNzljYTAwN2M1NDY5N2EyZTU2MmM4OTQ2ZDcyMDQzYjQ0","size":14362,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/6d1a3ce79ca007c54697a2e562c8946d72043b44","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuZWU7CgppbXBvcnQgamF2YS5p\nby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEuaW8uSW5wdXRTdHJlYW07Cmlt\ncG9ydCBqYXZhLmxhbmcucmVmbGVjdC5NZXRob2Q7CgppbXBvcnQgamF2YXgu\nbmFtaW5nLkNvbnRleHQ7CmltcG9ydCBqYXZheC5uYW1pbmcuSW5pdGlhbENv\nbnRleHQ7CmltcG9ydCBqYXZheC50cmFuc2FjdGlvbi5IZXVyaXN0aWNNaXhl\nZEV4Y2VwdGlvbjsKaW1wb3J0IGphdmF4LnRyYW5zYWN0aW9uLkhldXJpc3Rp\nY1JvbGxiYWNrRXhjZXB0aW9uOwppbXBvcnQgamF2YXgudHJhbnNhY3Rpb24u\nSW52YWxpZFRyYW5zYWN0aW9uRXhjZXB0aW9uOwppbXBvcnQgamF2YXgudHJh\nbnNhY3Rpb24uTm90U3VwcG9ydGVkRXhjZXB0aW9uOwppbXBvcnQgamF2YXgu\ndHJhbnNhY3Rpb24uUm9sbGJhY2tFeGNlcHRpb247CmltcG9ydCBqYXZheC50\ncmFuc2FjdGlvbi5TdGF0dXM7CmltcG9ydCBqYXZheC50cmFuc2FjdGlvbi5T\neW5jaHJvbml6YXRpb247CmltcG9ydCBqYXZheC50cmFuc2FjdGlvbi5TeXN0\nZW1FeGNlcHRpb247CmltcG9ydCBqYXZheC50cmFuc2FjdGlvbi5UcmFuc2Fj\ndGlvbjsKaW1wb3J0IGphdmF4LnRyYW5zYWN0aW9uLnhhLlhBUmVzb3VyY2U7\nCgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmNvbmYuT3BlbkpQQUNvbmZp\nZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmNvbmYu\nQ29uZmlndXJhYmxlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5j\nb25mLkNvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nbGliLmxvZy5Mb2c7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0\naWwuTG9jYWxpemVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwu\nSW52YWxpZFN0YXRlRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLnV0aWwuTm9UcmFuc2FjdGlvbkV4Y2VwdGlvbjsKCmltcG9ydCBzZXJw\nLmJ5dGVjb2RlLkJDQ2xhc3M7CmltcG9ydCBzZXJwLmJ5dGVjb2RlLlByb2pl\nY3Q7CgovKioKICoge0BsaW5rIE1hbmFnZWRSdW50aW1lfSBpbXBsZW1lbnRh\ndGlvbiB0aGF0IGFsbG93cyBzeW5jaHJvbml6YXRpb24gd2l0aCBhCiAqIFdl\nYlNwaGVyZSBtYW5hZ2VkIHRyYW5zYWN0aW9uLgogKgogKiA8UD4KICogV2Vi\nU3BoZXJlIEFwcGxpY2F0aW9uIFNlcnZlciBkb2VzIG5vdCBleHBvc2UgdGhl\nIFRyYW5zYWN0aW9uTWFuYWdlciB0byBhbgogKiBhcHBsaWNhdGlvbi4gSW5z\ndGVhZCBpdCBwcm92aWRlcyBhIHByb3ByaWV0YXJ5IGludGVyZmFjZSB0byBy\nZWdpc3RlciBmb3IKICogc3luY2hyb25pemF0aW9uIGFuZCBvYnRhaW4gdHJh\nbnNhY3Rpb24gaWRzLgogKgogKiA8UD4KICogV0FTTWFuYWdlZFJ1bnRpbWUg\ncHJvdmlkZXMgdGhlIHdyYXBwZXIgY2xhc3NlcyBuZWVkZWQgdG8gaW50ZXJh\nY3Qgd2l0aCB0aGUKICogV0FTIHByb3ByaWV0YXJ5IGludGVyZmFjZSBhbmQg\ndGhlIE9wZW5KUEEga2VybmVsLgogKgogKiBAYXV0aG9yIE1pY2hhZWwgRGlj\naywgS2V2aW4gU3V0dGVyCiAqLwpwdWJsaWMgY2xhc3MgV0FTTWFuYWdlZFJ1\nbnRpbWUgaW1wbGVtZW50cyBNYW5hZ2VkUnVudGltZSwgQ29uZmlndXJhYmxl\nIHsKCiAgICBwcml2YXRlIHN0YXRpYyBMb2NhbGl6ZXIgX2xvYyA9CiAgICAg\nICAgTG9jYWxpemVyLmZvclBhY2thZ2UoV0FTTWFuYWdlZFJ1bnRpbWUuY2xh\nc3MpOwoKICAgIHByaXZhdGUgT2JqZWN0IF9leHRlbmRlZFRyYW5zYWN0aW9u\nID0gbnVsbDsKICAgIHByaXZhdGUgTWV0aG9kIF9nZXRHbG9iYWxJZCA9IG51\nbGw7CiAgICBwcml2YXRlIE1ldGhvZCBfcmVnaXN0ZXJTeW5jID0gbnVsbDsK\nICAgIHByaXZhdGUgT3BlbkpQQUNvbmZpZ3VyYXRpb24gX2NvbmYgPSBudWxs\nOwogICAgcHJpdmF0ZSBMb2cgX2xvZyA9IG51bGw7CgogICAgLyoqCiAgICAg\nKiBHZXRzIGFuIGV4dGVuZGVkSlRBVHJhbnNhY3Rpb24gZnJvbSBKTkRJIGFu\nZCBjcmVhdGVzIGEgdHJhbnNhY3Rpb24KICAgICAqIHdyYXBwZXIKICAgICAq\nLwogICAgcHVibGljIGphdmF4LnRyYW5zYWN0aW9uLlRyYW5zYWN0aW9uTWFu\nYWdlciBnZXRUcmFuc2FjdGlvbk1hbmFnZXIoKQogICAgICAgIHRocm93cyBF\neGNlcHRpb24gewogICAgICAgIHJldHVybiBuZXcgV0FTVHJhbnNhY3Rpb24o\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRyYW5zYWN0aW9uIHdyYXBwZXIg\nZm9yIFdlYlNwaGVyZS4gV2ViU3BoZXJlIGV4cG9zZXMgYSBzdWJzZXQgb2Yg\ndGhlCiAgICAgKiBUcmFuc2FjdGlvbiBhbmQgVHJhbnNhY3Rpb25NYW5hZ2Vy\nIGludGVyZmFjZXMgdG8gdGhlIGN1c3RvbWVyLiBBbnkKICAgICAqIG1ldGhv\nZHMgd2hpY2ggYXJlIG5vdCBleHBvc2VkIGJ5IFdlYlNwaGVyZSB3aWxsIHRo\ncm93IGFuCiAgICAgKiBJbGxlZ2FsU3RhdGVFeGNlcHRpb24gdG8gdGhlIGNh\nbGxlci4KICAgICAqCiAgICAgKiA8UD4KICAgICAqIE1ldGhvZHMgc3VwcG9y\ndGVkIGJ5IFdBUyBhcmUKICAgICAqIDxVTD4KICAgICAqIDxMST5SZWdpc3Rl\nclN5bmNocm9uaXphdGlvbiA8L0xJPgogICAgICogPExJPkdldFN0YXR1czwv\nTEk+CiAgICAgKiA8L1VMPgogICAgICovCiAgICBjbGFzcyBXQVNUcmFuc2Fj\ndGlvbiBpbXBsZW1lbnRzIGphdmF4LnRyYW5zYWN0aW9uLlRyYW5zYWN0aW9u\nTWFuYWdlciwKICAgICAgICBqYXZheC50cmFuc2FjdGlvbi5UcmFuc2FjdGlv\nbiB7CgogICAgICAgIHB1YmxpYyBpbnQgZ2V0U3RhdHVzKCkgdGhyb3dzIFN5\nc3RlbUV4Y2VwdGlvbiB7CiAgICAgICAgICAgIGludCBydmFsID0gU3RhdHVz\nLlNUQVRVU19VTktOT1dOOwogICAgICAgICAgICB0cnkgewogICAgICAgICAg\nICAgICAgaWYgKGdldEdsb2JhbElkKCkgIT0gbnVsbCkgewogICAgICAgICAg\nICAgICAgICAgIHJ2YWwgPSBTdGF0dXMuU1RBVFVTX0FDVElWRTsKICAgICAg\nICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcnZhbCA9\nIFN0YXR1cy5TVEFUVVNfTk9fVFJBTlNBQ1RJT047CiAgICAgICAgICAgICAg\nICB9CiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAg\nICAgICAgICAgICB0aHJvdyBuZXcgTm9UcmFuc2FjdGlvbkV4Y2VwdGlvbihf\nbG9jCiAgICAgICAgICAgICAgICAgICAgICAgIC5nZXQoIndhcy10cmFuc2Fj\ndGlvbi1pZC1leGNlcHRpb24iKSkuc2V0Q2F1c2UoZSk7CiAgICAgICAgICAg\nIH0KICAgICAgICAgICAgcmV0dXJuIHJ2YWw7CiAgICAgICAgfQoKICAgICAg\nICAvKioKICAgICAgICAgKiBQcm92aWRlcyBhIFRyYW5zYWN0aW9uIHdyYXBw\nZXIuIFRoZSB0cmFuc2FjdGlvbiB3cmFwcGVyIG1heWIgb25seSBiZQogICAg\nICAgICAqIHVzZWQgdG8gZGV0ZXJtaW5lIHRoZSBzdGF0dXMgb2YgdGhlIGN1\ncnJlbnQgdHJhbnNhY3Rpb24uIFdlYlNwaGVyZQogICAgICAgICAqIGRvZXMg\nbm90IGFsbG93IGRpcmVjdCBjb250cm9sIG9mIGNvbnRhaW5lciB0cmFuc2Fj\ndGlvbnMuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIEEgV2ViU3Bo\nZXJlIHRyYW5zYWN0aW9uIHdyYXBwZXIuCiAgICAgICAgICovCiAgICAgICAg\ncHVibGljIFRyYW5zYWN0aW9uIGdldFRyYW5zYWN0aW9uKCkgdGhyb3dzIFN5\nc3RlbUV4Y2VwdGlvbiB7CiAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAg\nICAgIH0KCiAgICAgICAgLyoqCiAgICAgICAgICogUmVnaXN0ZXIgZm9yIHN5\nbmNocm9uaXphdGlvbiB3aXRoIGEgV2ViU3BoZXJlIG1hbmFnZWQgdHJhbnNh\nY3Rpb24gdmlhCiAgICAgICAgICogdGhlIGV4dGVuZGVkSlRBVHJhbnNhY3Rp\nb24gaW50ZXJmYWNlLgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyB2b2lk\nIHJlZ2lzdGVyU3luY2hyb25pemF0aW9uKFN5bmNocm9uaXphdGlvbiBhcmcw\nKQogICAgICAgICAgICB0aHJvd3MgSWxsZWdhbFN0YXRlRXhjZXB0aW9uLCBS\nb2xsYmFja0V4Y2VwdGlvbiwgU3lzdGVtRXhjZXB0aW9uIHsKICAgICAgICAg\nICAgaWYgKF9leHRlbmRlZFRyYW5zYWN0aW9uICE9IG51bGwpIHsKICAgICAg\nICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgX3JlZ2lzdGVy\nU3luYy5pbnZva2UoX2V4dGVuZGVkVHJhbnNhY3Rpb24sCiAgICAgICAgICAg\nICAgICAgICAgICAgIG5ldyBPYmplY3RbXSB7IG5ldyBXQVNTeW5jaHJvbml6\nYXRpb24oYXJnMCkgfSk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNl\ncHRpb24gZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZh\nbGlkU3RhdGVFeGNlcHRpb24oX2xvYwogICAgICAgICAgICAgICAgICAgICAg\nICAuZ2V0KCJ3YXMtcmVmbGVjdGlvbi1leGNlcHRpb24iKSkuc2V0Q2F1c2Uo\nZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAg\nICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZFN0YXRlRXhjZXB0aW9u\nKF9sb2MuZ2V0KCJ3YXMtbG9va3VwLWVycm9yIikpOwogICAgICAgICAgICB9\nCiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiBHZXRzIHRoZSBH\nbG9iYWxUcmFuc2FjdGlvbiBJRCBvZiB0aGUgV2ViU3BoZXJlIG1hbmFnZWQg\ndHJhbnNhY3Rpb24uCiAgICAgICAgICogSWYgbm8gR2xvYmFsIFRyYW5zYWN0\naW9uIGlzIGFjdGl2ZSBudWxsIHdpbGwgYmUgcmV0dXJuZWQuCiAgICAgICAg\nICoKICAgICAgICAgKiBAcmV0dXJuIE51bGwgaWYgYSBnbG9iYWwgdHJhbnNh\nY3Rpb24gaXMgbm90IGFjdGl2ZSBvciBpZiBhbiBlcnJvcgogICAgICAgICAq\nICAgICAgICAgb2NjdXJzLiBieXRlW10gaWQgaWYgYSBnbG9iYWwgdHJhbnNh\nY3Rpb24gaXMgYWN0aXZlLgogICAgICAgICAqLwogICAgICAgIHByaXZhdGUg\nYnl0ZVtdIGdldEdsb2JhbElkKCkgewogICAgICAgICAgICBieXRlW10gcnZh\nbCA9IG51bGw7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBy\ndmFsID0gKGJ5dGVbXSkgX2dldEdsb2JhbElkLmludm9rZShfZXh0ZW5kZWRU\ncmFuc2FjdGlvbiwgbnVsbCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2Vw\ndGlvbiBlKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZFN0\nYXRlRXhjZXB0aW9uKF9sb2MKICAgICAgICAgICAgICAgICAgICAuZ2V0KCJ3\nYXMtcmVmbGVjdGlvbi1leGNlcHRpb24iKSkuc2V0Q2F1c2UoZSk7CiAgICAg\nICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHJ2YWw7CiAgICAgICAgfQoK\nICAgICAgICAvKioKICAgICAgICAgKiBVbmltcGxlbWVudGVkLCBXQVMgZG9l\ncyBub3QgcHJvdmlkZSB0aGlzIGxldmVsIG9mIGNvbnRyb2wuIFRocm93cyBh\nbgogICAgICAgICAqIElsbGVnYWxTdGF0ZUV4Y2VwdGlvbgogICAgICAgICAq\nLwogICAgICAgIHB1YmxpYyB2b2lkIGJlZ2luKCkgdGhyb3dzIE5vdFN1cHBv\ncnRlZEV4Y2VwdGlvbiwgU3lzdGVtRXhjZXB0aW9uIHsKICAgICAgICAgICAg\ndGhyb3cgbmV3IEludmFsaWRTdGF0ZUV4Y2VwdGlvbihfbG9jLmdldCgid2Fz\nLXVuc3VwcG9ydGVkLW9wIiwKICAgICAgICAgICAgICAgICJiZWdpbiIpKTsK\nICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIFVuaW1wbGVtZW50\nZWQsIFdBUyBkb2VzIG5vdCBwcm92aWRlIHRoaXMgbGV2ZWwgb2YgY29udHJv\nbC4gVGhyb3dzIGFuCiAgICAgICAgICogSWxsZWdhbFN0YXRlRXhjZXB0aW9u\nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIHZvaWQgY29tbWl0KCkgdGhy\nb3dzIEhldXJpc3RpY01peGVkRXhjZXB0aW9uLAogICAgICAgICAgICBIZXVy\naXN0aWNSb2xsYmFja0V4Y2VwdGlvbiwgSWxsZWdhbFN0YXRlRXhjZXB0aW9u\nLAogICAgICAgICAgICBSb2xsYmFja0V4Y2VwdGlvbiwgU2VjdXJpdHlFeGNl\ncHRpb24sIFN5c3RlbUV4Y2VwdGlvbiB7CiAgICAgICAgICAgIHRocm93IG5l\ndyBJbnZhbGlkU3RhdGVFeGNlcHRpb24oX2xvYy5nZXQoIndhcy11bnN1cHBv\ncnRlZC1vcCIsCiAgICAgICAgICAgICAgICAiY29tbWl0IikpOwogICAgICAg\nIH0KCiAgICAgICAgLyoqCiAgICAgICAgICogVW5pbXBsZW1lbnRlZCwgV0FT\nIGRvZXMgbm90IHByb3ZpZGUgdGhpcyBsZXZlbCBvZiBjb250cm9sLiBUaHJv\nd3MgYW4KICAgICAgICAgKiBJbGxlZ2FsU3RhdGVFeGNlcHRpb24KICAgICAg\nICAgKi8KICAgICAgICBwdWJsaWMgdm9pZCByZXN1bWUoVHJhbnNhY3Rpb24g\nYXJnMCkgdGhyb3dzIElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiwKICAgICAgICAg\nICAgSW52YWxpZFRyYW5zYWN0aW9uRXhjZXB0aW9uLCBTeXN0ZW1FeGNlcHRp\nb24gewogICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZFN0YXRlRXhjZXB0\naW9uKF9sb2MuZ2V0KCJ3YXMtdW5zdXBwb3J0ZWQtb3AiLAogICAgICAgICAg\nICAgICAgInJlc3VtZSIpKTsKICAgICAgICB9CgogICAgICAgIC8qKgogICAg\nICAgICAqIFVuaW1wbGVtZW50ZWQsIFdBUyBkb2VzIG5vdCBwcm92aWRlIHRo\naXMgbGV2ZWwgb2YgY29udHJvbC4gTG9nIGEKICAgICAgICAgKiB0cmFjZSBp\nbnN0ZWFkIG9mIHRocm93aW5nIGFuIGV4Y2VwdGlvbi4gUm9sbGJhY2sgbWF5\nIGJlIHVzZWQgaW4KICAgICAgICAgKiBzb21lIGVycm9yIHBhdGhzLCB0aHJv\nd2luZyBhbm90aGVyIGV4Y2VwdGlvbiBtYXkgcmVzdWx0IGluIHRoZQogICAg\nICAgICAqIG9yaWdpbmFsIGV4Y2VwdGlvbiBiZWluZyBsb3N0LgogICAgICAg\nICAqLwogICAgICAgIHB1YmxpYyB2b2lkIHJvbGxiYWNrKCkgdGhyb3dzIEls\nbGVnYWxTdGF0ZUV4Y2VwdGlvbiwgU2VjdXJpdHlFeGNlcHRpb24sCiAgICAg\nICAgICAgIFN5c3RlbUV4Y2VwdGlvbiB7CiAgICAgICAgICAgIGlmIChfbG9n\nLmlzVHJhY2VFbmFibGVkKCkpIHsKICAgICAgICAgICAgICAgIF9sb2cudHJh\nY2UoX2xvYy5nZXQoIndhcy11bnN1cHBvcnRlZC1vcCIsICJyb2xsYmFjayIp\nKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLyoqCiAgICAg\nICAgICogVW5pbXBsZW1lbnRlZCwgV0FTIGRvZXMgbm90IHByb3ZpZGUgdGhp\ncyBsZXZlbCBvZiBjb250cm9sLiBMb2cgYQogICAgICAgICAqIHRyYWNlIGlu\nc3RlYWQgb2YgdGhyb3dpbmcgYW4gZXhjZXB0aW9uLiBTZXRSb2xsYmFja09u\nbHkgbWF5IGJlIHVzZWQKICAgICAgICAgKiBpbiBzb21lIGVycm9yIHBhdGhz\nLCB0aHJvd2luZyBhbm90aGVyIGV4Y2VwdGlvbiBtYXkgcmVzdWx0IGluIHRo\nZQogICAgICAgICAqIG9yaWdpbmFsIGV4Y2VwdGlvbiBiZWluZyBsb3N0Lgog\nICAgICAgICAqLwogICAgICAgIHB1YmxpYyB2b2lkIHNldFJvbGxiYWNrT25s\neSgpIHRocm93cyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24sCiAgICAgICAgICAg\nIFN5c3RlbUV4Y2VwdGlvbiB7CiAgICAgICAgICAgIGlmIChfbG9nLmlzVHJh\nY2VFbmFibGVkKCkpIHsKICAgICAgICAgICAgICAgIF9sb2cudHJhY2UoX2xv\nYy5nZXQoIndhcy11bnN1cHBvcnRlZC1vcCIsICJzZXRSb2xsYmFja09ubHki\nKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8qKgogICAg\nICAgICAqIFVuaW1wbGVtZW50ZWQsIFdBUyBkb2VzIG5vdCBwcm92aWRlIHRo\naXMgbGV2ZWwgb2YgY29udHJvbC4gVGhyb3dzIGFuCiAgICAgICAgICogSWxs\nZWdhbFN0YXRlRXhjZXB0aW9uCiAgICAgICAgICovCiAgICAgICAgcHVibGlj\nIHZvaWQgc2V0VHJhbnNhY3Rpb25UaW1lb3V0KGludCBhcmcwKSB0aHJvd3Mg\nU3lzdGVtRXhjZXB0aW9uIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludmFs\naWRTdGF0ZUV4Y2VwdGlvbihfbG9jLmdldCgid2FzLXVuc3VwcG9ydGVkLW9w\nIiwKICAgICAgICAgICAgICAgICJzZXRUcmFuc2FjdGlvblRpbWVvdXQiKSk7\nCiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiBVbmltcGxlbWVu\ndGVkLCBXQVMgZG9lcyBub3QgcHJvdmlkZSB0aGlzIGxldmVsIG9mIGNvbnRy\nb2wuIFRocm93cyBhbgogICAgICAgICAqIElsbGVnYWxTdGF0ZUV4Y2VwdGlv\nbgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBUcmFuc2FjdGlvbiBzdXNw\nZW5kKCkgdGhyb3dzIFN5c3RlbUV4Y2VwdGlvbiB7CiAgICAgICAgICAgIHRo\ncm93IG5ldyBJbnZhbGlkU3RhdGVFeGNlcHRpb24oX2xvYy5nZXQoIndhcy11\nbnN1cHBvcnRlZC1vcCIsCiAgICAgICAgICAgICAgICAic3VzcGVuZCIpKTsK\nICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIFVuaW1wbGVtZW50\nZWQsIFdBUyBkb2VzIG5vdCBwcm92aWRlIHRoaXMgbGV2ZWwgb2YgY29udHJv\nbC4gVGhyb3dzIGFuCiAgICAgICAgICogSWxsZWdhbFN0YXRlRXhjZXB0aW9u\nCiAgICAgICAgICovCiAgICAgICAgcHVibGljIGJvb2xlYW4gZGVsaXN0UmVz\nb3VyY2UoWEFSZXNvdXJjZSBhcmcwLCBpbnQgYXJnMSkKICAgICAgICAgICAg\ndGhyb3dzIElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiwgU3lzdGVtRXhjZXB0aW9u\nIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRTdGF0ZUV4Y2VwdGlv\nbihfbG9jLmdldCgid2FzLXVuc3VwcG9ydGVkLW9wIiwKICAgICAgICAgICAg\nICAgICJkZWxpc3RSZXNvdXJjZSIpKTsKICAgICAgICB9CgogICAgICAgIC8q\nKgogICAgICAgICAqIFVuaW1wbGVtZW50ZWQsIFdBUyBkb2VzIG5vdCBwcm92\naWRlIHRoaXMgbGV2ZWwgb2YgY29udHJvbC4gVGhyb3dzIGFuCiAgICAgICAg\nICogSWxsZWdhbFN0YXRlRXhjZXB0aW9uCiAgICAgICAgICovCiAgICAgICAg\ncHVibGljIGJvb2xlYW4gZW5saXN0UmVzb3VyY2UoWEFSZXNvdXJjZSBhcmcw\nKQogICAgICAgICAgICB0aHJvd3MgSWxsZWdhbFN0YXRlRXhjZXB0aW9uLCBS\nb2xsYmFja0V4Y2VwdGlvbiwgU3lzdGVtRXhjZXB0aW9uIHsKICAgICAgICAg\nICAgdGhyb3cgbmV3IEludmFsaWRTdGF0ZUV4Y2VwdGlvbihfbG9jLmdldCgi\nd2FzLXVuc3VwcG9ydGVkLW9wIiwKICAgICAgICAgICAgICAgICJlbmxpc3RS\nZXNvdXJjZSIpKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBX\nQVNTeW5jaHJvbml6YXRpb24gd3JhcHBlci4gVGhpcyBjbGFzcyB0cmFuc2xh\ndGVzIHRoZSBXQVMgcHJvcHJpZXRhcnkKICAgICAqIHN5bmNocm9uaXphdGlv\nbiBjYWxsYmFjayBtZXRob2RzIHRvIGphdmF4LnRyYW5zYWN0aW9uLlN5bmNo\ncm9uaXphdGlvbgogICAgICogbWV0aG9kcy4KICAgICAqCiAgICAgKiA8UD4K\nICAgICAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyB0aGUKICAgICAqIGNvbS5p\nYm0ud2Vic3BoZXJlLmp0YWV4dGVuc2lvbnMuU3luY2hyb25pemF0aW9uQ2Fs\nbGJhY2sgaW50ZXJmYWNlLiBTaW5jZQogICAgICogU3luY2hyb25pemF0aW9u\nQ2FsbGJhY2sgaXMgbm90IGF2YWlsYWJsZSBhdCBjb21waWxlIHRpbWUgd2Ug\ndXNlIFNlcnAgdG8KICAgICAqIGFkZCB0aGUgaW50ZXJmYWNlIHRvIHRoZSBj\nbGFzcyBhZnRlciBhbGwgY2xhc3NlcyBoYXZlIGJlZW4gY29tcGlsZWQuCiAg\nICAgKgogICAgICogPFA+CiAgICAgKiBTeW5jaHJvbml6YXRpb25DYWxsYmFj\nayBpcyBleHBlY3RlZCB0byBiZSBhdmFpbGFibGUgd2hlbmV2ZXIgdGhpcyBj\nbGFzcwogICAgICogaXMgaW5zdGFudGlhdGVkLCB0aGVyZWZvcmUgdGhpcyBj\nbGFzcyBzaG91bGQgb25seSBiZSB1c2VkIHdoZW4gcnVubmluZyBpbgogICAg\nICogV2ViU3BoZXJlLgogICAgICoKICAgICAqIEBzZWUgb3JnLmFwYWNoZS5v\ncGVuanBhLnV0aWwuV0FTVHJhbnNmb3JtZXIKICAgICAqLwogICAgc3RhdGlj\nIGNsYXNzIFdBU1N5bmNocm9uaXphdGlvbiB7CgogICAgICAgIFN5bmNocm9u\naXphdGlvbiBfc3luYyA9IG51bGw7CgogICAgICAgIFdBU1N5bmNocm9uaXph\ndGlvbihTeW5jaHJvbml6YXRpb24gc3luYykgewogICAgICAgICAgICBfc3lu\nYyA9IHN5bmM7CiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiBB\nZnRlckNvbXBsZXRpb24gd3JhcHBlci4gVHJhbnNsYXRlcyB0aGUgV0FTIHBy\nb3ByaWV0YXJ5IGNhbGwgdG8gYQogICAgICAgICAqIGphdmF4LnRyYW5zYWN0\naW9uLlN5bmNocm9uaXphdGlvbiBjYWxsLgogICAgICAgICAqLwogICAgICAg\nIHB1YmxpYyB2b2lkIGFmdGVyQ29tcGxldGlvbihpbnQgbG9jYWxUcmFuc2Fj\ndGlvbklkLAogICAgICAgICAgICBieXRlW10gZ2xvYmFsVHJhbnNhY3Rpb25J\nZCwgYm9vbGVhbiBjb21taXR0ZWQpIHsKICAgICAgICAgICAgaWYgKF9zeW5j\nICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIGlmIChjb21taXR0ZWQpIHsK\nICAgICAgICAgICAgICAgICAgICBfc3luYy5hZnRlckNvbXBsZXRpb24oU3Rh\ndHVzLlNUQVRVU19DT01NSVRURUQpOwogICAgICAgICAgICAgICAgfSBlbHNl\nIHsKICAgICAgICAgICAgICAgICAgICBfc3luYy5hZnRlckNvbXBsZXRpb24o\nU3RhdHVzLlNUQVRVU19VTktOT1dOKTsKICAgICAgICAgICAgICAgIH0KICAg\nICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLyoqCiAgICAgICAgICog\nQmVmb3JlQ29tcGxldGlvbiB3cmFwcGVyLiBUcmFuc2xhdGVzIFdBUyBwcm9w\ncmlldGFyeSBjYWxsIHRvIGEKICAgICAgICAgKiBqYXZheC50cmFuc2FjdGlv\nbi5TeW5jaHJvbml6YXRpb24gY2FsbC4KICAgICAgICAgKi8KICAgICAgICBw\ndWJsaWMgdm9pZCBiZWZvcmVDb21wbGV0aW9uKGludCBhcmcwLCBieXRlW10g\nYXJnMSkgewogICAgICAgICAgICBpZiAoX3N5bmMgIT0gbnVsbCkgewogICAg\nICAgICAgICAgICAgX3N5bmMuYmVmb3JlQ29tcGxldGlvbigpOwogICAgICAg\nICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogQ2FjaGVz\nIGEgY29weSBvZiB0aGUgY29uZmlndXJhdGlvbi4gVGhlIGNvbmZpZ3VyYXRp\nb24gaXMgdXNlZCB0byBvYnRhaW4KICAgICAqIHRoZSBsb2dnZXIgYW5kIGNs\nYXNzbG9hZGVyLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRDb25maWd1\ncmF0aW9uKENvbmZpZ3VyYXRpb24gY29uZikgewogICAgICAgIF9jb25mID0g\nKE9wZW5KUEFDb25maWd1cmF0aW9uKSBjb25mOwogICAgICAgIF9sb2cgPSBf\nY29uZi5nZXRMb2coT3BlbkpQQUNvbmZpZ3VyYXRpb24uTE9HX1JVTlRJTUUp\nOwogICAgfQoKICAgIC8qKgogICAgICogRW5kQ29uZmlndXJhdGlvbiBzdHVi\nLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBlbmRDb25maWd1cmF0aW9uKCkg\newogICAgICAgIHRyeSB7CiAgICAgICAgICAgIENvbnRleHQgY3R4ID0gbmV3\nIEluaXRpYWxDb250ZXh0KCk7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAg\nICAgICAgICBfZXh0ZW5kZWRUcmFuc2FjdGlvbiA9CiAgICAgICAgICAgICAg\nICAgICAgY3R4Lmxvb2t1cCgiamF2YTpjb21wL3dlYnNwaGVyZS9FeHRlbmRl\nZEpUQVRyYW5zYWN0aW9uIik7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAg\nICAgICAgICAgICAgICBjdHguY2xvc2UoKTsKICAgICAgICAgICAgfQoKICAg\nICAgICAgICAgQ2xhc3NMb2FkZXIgbG9hZGVyID0gX2NvbmYuZ2V0Q2xhc3NS\nZXNvbHZlckluc3RhbmNlKCkKICAgICAgICAgICAgICAgIC5nZXRDbGFzc0xv\nYWRlcihnZXRDbGFzcygpLCBudWxsKTsKCiAgICAgICAgICAgIENsYXNzIGV4\ndGVuZGVkSlRBVHJhbnNhY3Rpb24gPSBDbGFzcy5mb3JOYW1lKAogICAgICAg\nICAgICAgICAgImNvbS5pYm0ud2Vic3BoZXJlLmp0YWV4dGVuc2lvbnMuRXh0\nZW5kZWRKVEFUcmFuc2FjdGlvbiIsIHRydWUsCiAgICAgICAgICAgICAgICBs\nb2FkZXIpOwoKICAgICAgICAgICAgX3JlZ2lzdGVyU3luYyA9IGV4dGVuZGVk\nSlRBVHJhbnNhY3Rpb24uZ2V0TWV0aG9kKAogICAgICAgICAgICAgICAgInJl\nZ2lzdGVyU3luY2hyb25pemF0aW9uQ2FsbGJhY2tGb3JDdXJyZW50VHJhbiIs\nCiAgICAgICAgICAgICAgICBuZXcgQ2xhc3NbXSB7IENsYXNzLmZvck5hbWUo\nCiAgICAgICAgICAgICAgICAgICAgImNvbS5pYm0ud2Vic3BoZXJlLmp0YWV4\ndGVuc2lvbnMuU3luY2hyb25pemF0aW9uQ2FsbGJhY2siLAogICAgICAgICAg\nICAgICAgICAgIHRydWUsIGxvYWRlcikgfSk7CiAgICAgICAgICAgIF9nZXRH\nbG9iYWxJZCA9IGV4dGVuZGVkSlRBVHJhbnNhY3Rpb24uCiAgICAgICAgICAg\nICAgICBnZXRNZXRob2QoImdldEdsb2JhbElkIiwgbnVsbCk7CiAgICAgICAg\nfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgdGhyb3cgbmV3\nIEludmFsaWRTdGF0ZUV4Y2VwdGlvbihfbG9jCiAgICAgICAgICAgICAgICAu\nZ2V0KCJ3YXMtcmVmbGVjdGlvbi1leGNlcHRpb24iKSwgZSkuc2V0RmF0YWwo\ndHJ1ZSk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogU3RhcnRD\nb25maWd1cmF0aW9uIHN0dWIuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHN0\nYXJ0Q29uZmlndXJhdGlvbigpIHsKICAgICAgICAvLyBOb3RoaW5nIHRvIGRv\nCiAgICB9CgogICAgLyoqCiAgICAgKiBDbGFzcyB0aGF0IHdpbGwgYmUgbW9k\naWZpZWQKICAgICAqLwogICAgc3RhdGljIGZpbmFsIFN0cmluZyBDTEFTUyA9\nCiAgICAgICAgIm9yZy5hcGFjaGUub3BlbmpwYS5lZS5XQVNNYW5hZ2VkUnVu\ndGltZSRXQVNTeW5jaHJvbml6YXRpb24iOwoKICAgIC8qKgogICAgICogSW50\nZXJmYWNlIHdoaWNoIHdpbGwgYmUgYWRkZWQKICAgICAqLwogICAgc3RhdGlj\nIGZpbmFsIFN0cmluZyBJTlRFUkZBQ0UgPQogICAgICAgICJjb20uaWJtLndl\nYnNwaGVyZS5qdGFleHRlbnNpb25zLlN5bmNocm9uaXphdGlvbkNhbGxiYWNr\nIjsKCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdz\nKQogICAgICAgIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgUHJvamVj\ndCBwcm9qZWN0ID0gbmV3IFByb2plY3QoKTsKICAgICAgICAKICAgICAgICBJ\nbnB1dFN0cmVhbSBpbiA9IFdBU01hbmFnZWRSdW50aW1lLmNsYXNzLmdldENs\nYXNzTG9hZGVyKCkKICAgICAgICAgICAgLmdldFJlc291cmNlQXNTdHJlYW0o\nQ0xBU1MucmVwbGFjZSgnLicsICcvJykgKyAiLmNsYXNzIik7CiAgICAgICAg\nQkNDbGFzcyBiY0NsYXNzID0gcHJvamVjdC5sb2FkQ2xhc3MoaW4pOwogICAg\nICAgIAogICAgICAgIFN0cmluZyBbXSBpbnRlcmZhY2VzID0gYmNDbGFzcy5n\nZXRJbnRlcmZhY2VOYW1lcygpOwogICAgICAgIAogICAgICAgIGlmKGludGVy\nZmFjZXMgIT0gbnVsbCkgewogICAgICAgIAlmb3IoaW50IGkgPSAwOyBpIDwg\naW50ZXJmYWNlcy5sZW5ndGg7IGkrKykgeyAKICAgICAgICAJCWlmKGludGVy\nZmFjZXNbaV0uZXF1YWxzKElOVEVSRkFDRSkpIHsKICAgICAgICAJCQlyZXR1\ncm47IAogICAgICAgIAkJfQogICAgICAgIAl9CiAgICAgICAgfQogICAgICAg\nIGJjQ2xhc3MuZGVjbGFyZUludGVyZmFjZShJTlRFUkZBQ0UpOwogICAgICAg\nIGJjQ2xhc3Mud3JpdGUoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRS\nb2xsYmFja09ubHkoVGhyb3dhYmxlIGNhdXNlKQogICAgICAgIHRocm93cyBF\neGNlcHRpb24gewogICAgICAgIC8vIHRoZXJlIGlzIG5vIGdlbmVyaWMgc3Vw\ncG9ydCBmb3Igc2V0dGluZyB0aGUgcm9sbGJhY2sgY2F1c2UKICAgICAgICBn\nZXRUcmFuc2FjdGlvbk1hbmFnZXIoKS5nZXRUcmFuc2FjdGlvbigpLnNldFJv\nbGxiYWNrT25seSgpOwogICAgfQoKICAgIHB1YmxpYyBUaHJvd2FibGUgZ2V0\nUm9sbGJhY2tDYXVzZSgpCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAg\nICAgICAgLy8gdGhlcmUgaXMgbm8gZ2VuZXJpYyBzdXBwb3J0IGZvciBzZXR0\naW5nIHRoZSByb2xsYmFjayBjYXVzZQogICAgICAgIHJldHVybiBudWxsOwog\nICAgfQp9Cg==\n","encoding":"base64"}

