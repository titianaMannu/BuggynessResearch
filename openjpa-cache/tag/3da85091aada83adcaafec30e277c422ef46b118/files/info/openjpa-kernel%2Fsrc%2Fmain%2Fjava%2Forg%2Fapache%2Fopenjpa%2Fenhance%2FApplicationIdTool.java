{"sha":"ff742753e27c95a1b53e3e5d9deb7fdab75a62e4","node_id":"MDQ6QmxvYjIwNjM2NDpmZjc0Mjc1M2UyN2M5NWExYjUzZTNlNWQ5ZGViN2ZkYWI3NWE2MmU0","size":57115,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/ff742753e27c95a1b53e3e5d9deb7fdab75a62e4","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuZW5oYW5jZTsKCmltcG9ydCBq\nYXZhLmlvLkZpbGU7CmltcG9ydCBqYXZhLmlvLkZpbGVXcml0ZXI7CmltcG9y\ndCBqYXZhLmlvLklPRXhjZXB0aW9uOwppbXBvcnQgamF2YS5pby5QcmludFdy\naXRlcjsKaW1wb3J0IGphdmEuaW8uV3JpdGVyOwppbXBvcnQgamF2YS5sYW5n\nLnJlZmxlY3QuTW9kaWZpZXI7CmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0\nOwppbXBvcnQgamF2YS51dGlsLkFycmF5czsKaW1wb3J0IGphdmEudXRpbC5D\nb2xsZWN0aW9uOwppbXBvcnQgamF2YS51dGlsLkRhdGU7CmltcG9ydCBqYXZh\nLnV0aWwuSGFzaFNldDsKaW1wb3J0IGphdmEudXRpbC5JdGVyYXRvcjsKaW1w\nb3J0IGphdmEudXRpbC5MaXN0OwppbXBvcnQgamF2YS51dGlsLk1hcDsKaW1w\nb3J0IGphdmEudXRpbC5TZXQ7CmltcG9ydCBqYXZhLnV0aWwuVHJlZVNldDsK\nCmltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMubGFuZy5TdHJpbmdVdGlsczsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5jb25mLk9wZW5KUEFDb25maWd1\ncmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmNvbmYuT3BlbkpQ\nQUNvbmZpZ3VyYXRpb25JbXBsOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmxpYi5jb25mLkNvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEubGliLmNvbmYuQ29uZmlndXJhdGlvbnM7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEubGliLmxvZy5Mb2c7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEubGliLm1ldGEuQ2xhc3NBcmdQYXJzZXI7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEubGliLnV0aWwuQ29kZUZvcm1hdDsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5saWIudXRpbC5GaWxlczsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5saWIudXRpbC5KYXZhVmVyc2lvbnM7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLk9wdGlvbnM7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEubWV0YS5DbGFzc01ldGFEYXRhOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLm1ldGEuRGVsZWdhdGluZ01ldGFEYXRhRmFjdG9y\neTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkZpZWxkTWV0YURh\ndGE7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5KYXZhVHlwZXM7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5NZXRhRGF0YUZhY3Rv\ncnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5NZXRhRGF0YVJl\ncG9zaXRvcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5JbnZh\nbGlkU3RhdGVFeGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\ndXRpbC5Vc2VyRXhjZXB0aW9uOwppbXBvcnQgc2VycC5ieXRlY29kZS5CQ0Ns\nYXNzOwppbXBvcnQgc2VycC5ieXRlY29kZS5CQ0NsYXNzTG9hZGVyOwppbXBv\ncnQgc2VycC5ieXRlY29kZS5Qcm9qZWN0OwppbXBvcnQgc2VycC51dGlsLlN0\ncmluZ3M7CgovKioKICogR2VuZXJhdGVzIGEgY2xhc3MgYXBwcm9wcmlhdGUg\nZm9yIHVzZSBhcyBhbiBhcHBsaWNhdGlvbiBpZGVudGl0eSBjbGFzcy4KICoK\nICogQGF1dGhvciBQYXRyaWNrIExpbnNrZXkKICogQGF1dGhvciBBYmUgV2hp\ndGUKICovCnB1YmxpYyBjbGFzcyBBcHBsaWNhdGlvbklkVG9vbCB7CgogICAg\ncHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgVE9LRU5fREVGQVVMVCA9ICI6\nOiI7CgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIFRPS0VOSVpF\nUl9DVVNUT00gPSAiVG9rZW5pemVyIjsKICAgIHByaXZhdGUgc3RhdGljIGZp\nbmFsIFN0cmluZyBUT0tFTklaRVJfU1REID0gIlN0cmluZ1Rva2VuaXplciI7\nCgogICAgcHJpdmF0ZSBzdGF0aWMgTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6\nZXIuZm9yUGFja2FnZQogICAgICAgIChBcHBsaWNhdGlvbklkVG9vbC5jbGFz\ncyk7CgogICAgcHJpdmF0ZSBmaW5hbCBMb2cgX2xvZzsKICAgIHByaXZhdGUg\nZmluYWwgQ2xhc3MgX3R5cGU7CiAgICBwcml2YXRlIGZpbmFsIENsYXNzTWV0\nYURhdGEgX21ldGE7CiAgICBwcml2YXRlIGJvb2xlYW4gX2Fic3RyYWN0ID0g\nZmFsc2U7CiAgICBwcml2YXRlIEZpZWxkTWV0YURhdGFbXSBfZmllbGRzID0g\nbnVsbDsKICAgIHByaXZhdGUgYm9vbGVhbiBfaWdub3JlID0gdHJ1ZTsKICAg\nIHByaXZhdGUgRmlsZSBfZGlyID0gbnVsbDsKICAgIHByaXZhdGUgV3JpdGVy\nIF93cml0ZXIgPSBudWxsOwogICAgcHJpdmF0ZSBTdHJpbmcgX2NvZGUgPSBu\ndWxsOwogICAgcHJpdmF0ZSBTdHJpbmcgX3Rva2VuID0gVE9LRU5fREVGQVVM\nVDsKICAgIHByaXZhdGUgQ29kZUZvcm1hdCBfZm9ybWF0ID0gbnVsbDsKCiAg\nICAvKioKICAgICAqIENvbnN0cnVjdHMgYSBuZXcgQXBwbGljYXRpb25JZFRv\nb2wgY2FwYWJsZSBvZiBnZW5lcmF0aW5nIGFuCiAgICAgKiBvYmplY3QgaWQg\nY2xhc3MgZm9yIDxjb2RlPnR5cGU8L2NvZGU+LgogICAgICovCiAgICBwdWJs\naWMgQXBwbGljYXRpb25JZFRvb2woT3BlbkpQQUNvbmZpZ3VyYXRpb24gY29u\nZiwgQ2xhc3MgdHlwZSkgewogICAgICAgIF9sb2cgPSBjb25mLmdldExvZyhP\ncGVuSlBBQ29uZmlndXJhdGlvbi5MT0dfRU5IQU5DRSk7CiAgICAgICAgX3R5\ncGUgPSB0eXBlOwoKICAgICAgICBNZXRhRGF0YVJlcG9zaXRvcnkgcmVwb3Mg\nPSBjb25mLm5ld01ldGFEYXRhUmVwb3NpdG9yeUluc3RhbmNlKCk7CiAgICAg\nICAgcmVwb3Muc2V0VmFsaWRhdGUocmVwb3MuVkFMSURBVEVfTk9ORSk7CiAg\nICAgICAgcmVwb3Muc2V0U291cmNlTW9kZShyZXBvcy5NT0RFX01BUFBJTkcs\nIGZhbHNlKTsKICAgICAgICBsb2FkT2JqZWN0SWRzKHJlcG9zLCB0cnVlKTsK\nICAgICAgICBfbWV0YSA9IHJlcG9zLmdldE1ldGFEYXRhKHR5cGUsIG51bGws\nIGZhbHNlKTsKICAgICAgICBpZiAoX21ldGEgIT0gbnVsbCkgewogICAgICAg\nICAgICBfYWJzdHJhY3QgPSBNb2RpZmllci5pc0Fic3RyYWN0KF9tZXRhLmdl\ndERlc2NyaWJlZFR5cGUoKS4KICAgICAgICAgICAgICAgIGdldE1vZGlmaWVy\ncygpKTsKICAgICAgICAgICAgX2ZpZWxkcyA9IGdldERlY2xhcmVkUHJpbWFy\neUtleUZpZWxkcyhfbWV0YSk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgog\nICAgICogQ29uc3RydWN0cyBhIG5ldyB0b29sIGluc3RhbmNlIGNhcGFibGUg\nb2YgZ2VuZXJhdGluZyBhbgogICAgICogb2JqZWN0IGlkIGNsYXNzIGZvciA8\nY29kZT5tZXRhPC9jb2RlPi4KICAgICAqLwogICAgcHVibGljIEFwcGxpY2F0\naW9uSWRUb29sKE9wZW5KUEFDb25maWd1cmF0aW9uIGNvbmYsIENsYXNzIHR5\ncGUsCiAgICAgICAgQ2xhc3NNZXRhRGF0YSBtZXRhKSB7CiAgICAgICAgX2xv\nZyA9IGNvbmYuZ2V0TG9nKE9wZW5KUEFDb25maWd1cmF0aW9uLkxPR19FTkhB\nTkNFKTsKCiAgICAgICAgX3R5cGUgPSB0eXBlOwogICAgICAgIF9tZXRhID0g\nbWV0YTsKICAgICAgICBpZiAoX21ldGEgIT0gbnVsbCkgewogICAgICAgICAg\nICBfYWJzdHJhY3QgPSBNb2RpZmllci5pc0Fic3RyYWN0KF9tZXRhLmdldERl\nc2NyaWJlZFR5cGUoKS4KICAgICAgICAgICAgICAgIGdldE1vZGlmaWVycygp\nKTsKICAgICAgICAgICAgX2ZpZWxkcyA9IGdldERlY2xhcmVkUHJpbWFyeUtl\neUZpZWxkcyhfbWV0YSk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAg\nICogUmV0dXJuIG1ldGFkYXRhIGZvciBwcmltYXJ5IGtleSBmaWVsZHMgZGVj\nbGFyZWQgaW4gdGhlIGdpdmVuIGNsYXNzLgogICAgICovCiAgICBwcml2YXRl\nIHN0YXRpYyBGaWVsZE1ldGFEYXRhW10gZ2V0RGVjbGFyZWRQcmltYXJ5S2V5\nRmllbGRzCiAgICAgICAgKENsYXNzTWV0YURhdGEgbWV0YSkgewogICAgICAg\nIGlmIChtZXRhLmdldFBDU3VwZXJjbGFzcygpID09IG51bGwpCiAgICAgICAg\nICAgIHJldHVybiBtZXRhLmdldFByaW1hcnlLZXlGaWVsZHMoKTsKCiAgICAg\nICAgLy8gcmVtb3ZlIHRoZSBwcmltYXJ5IGtleSBmaWVsZHMgdGhhdCBhcmUg\nbm90IGRlY2xhcmVkCiAgICAgICAgLy8gaW4gdGhlIGN1cnJlbnQgY2xhc3MK\nICAgICAgICBGaWVsZE1ldGFEYXRhW10gZmllbGRzID0gbWV0YS5nZXRQcmlt\nYXJ5S2V5RmllbGRzKCk7CiAgICAgICAgTGlzdCBkZWNzID0gbmV3IEFycmF5\nTGlzdChmaWVsZHMubGVuZ3RoKTsKICAgICAgICBmb3IgKGludCBpID0gMDsg\naSA8IGZpZWxkcy5sZW5ndGg7IGkrKykKICAgICAgICAgICAgaWYgKGZpZWxk\nc1tpXS5nZXREZWNsYXJpbmdUeXBlKCkgPT0gbWV0YS5nZXREZXNjcmliZWRU\neXBlKCkpCiAgICAgICAgICAgICAgICBkZWNzLmFkZChmaWVsZHNbaV0pOwog\nICAgICAgIHJldHVybiAoRmllbGRNZXRhRGF0YVtdKSBkZWNzLnRvQXJyYXko\nbmV3IEZpZWxkTWV0YURhdGFbZGVjcy5zaXplKCldKTsKICAgIH0KCiAgICAv\nKioKICAgICAqIFJldHVybiBmYWxzZSBpZiB0aGlzIHRvb2wgaXMgY29uZmln\ndXJlZCB0byB0aHJvdyBhbiBleGNlcHRpb24gb24KICAgICAqIGFuIGF0dGVt\ncHQgdG8gZ2VuZXJhdGUgYW4gaWQgY2xhc3MgZm9yIGEgdHlwZSB0aGF0IGRv\nZXMgbm90IHVzZQogICAgICogYXBwbGljYXRpb24gaWRlbnRpdHkuCiAgICAg\nKi8KICAgIHB1YmxpYyBib29sZWFuIGdldElnbm9yZUVycm9ycygpIHsKICAg\nICAgICByZXR1cm4gX2lnbm9yZTsKICAgIH0KCiAgICAvKioKICAgICAqIFNl\ndCB0byBmYWxzZSBpZiB0aGlzIHRvb2wgc2hvdWxkIHRocm93IGFuIGV4Y2Vw\ndGlvbiBvbgogICAgICogYW4gYXR0ZW1wdCB0byBnZW5lcmF0ZSBhbiBpZCBj\nbGFzcyBmb3IgYSB0eXBlIHRoYXQgZG9lcyBub3QgdXNlCiAgICAgKiBhcHBs\naWNhdGlvbiBpZGVudGl0eS4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0\nSWdub3JlRXJyb3JzKGJvb2xlYW4gaWdub3JlKSB7CiAgICAgICAgX2lnbm9y\nZSA9IGlnbm9yZTsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBjb2RlIGZv\ncm1hdHRlciBmb3IgdGhlIGdlbmVyYXRlZCBKYXZhIGNvZGUuCiAgICAgKi8K\nICAgIHB1YmxpYyBDb2RlRm9ybWF0IGdldENvZGVGb3JtYXQoKSB7CiAgICAg\nICAgcmV0dXJuIF9mb3JtYXQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQg\ndGhlIGNvZGUgZm9ybWF0dGVyIGZvciB0aGUgZ2VuZXJhdGVkIEphdmEgY29k\nZS4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0Q29kZUZvcm1hdChDb2Rl\nRm9ybWF0IGZvcm1hdCkgewogICAgICAgIF9mb3JtYXQgPSBmb3JtYXQ7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBUaGUgZGlyZWN0b3J5IHRvIHdyaXRlIHNv\ndXJjZSB0by4gRGVmYXVsdHMgdG8gdGhlIGRpcmVjdG9yeQogICAgICogb2Yg\ndGhlIEphdmEgZmlsZSBmb3IgdGhlIHNldCB0eXBlLiBJZiB0aGUgZ2l2ZW4g\nZGlyZWN0b3J5IGRvZXMgbm90CiAgICAgKiBtYXRjaCB0aGUgcGFja2FnZSBv\nZiB0aGUgb2JqZWN0IGlkLCB0aGUgcGFja2FnZSBzdHJ1Y3R1cmUgd2lsbCBi\nZQogICAgICogY3JlYXRlZCBiZWxvdyB0aGUgZGlyZWN0b3J5LgogICAgICov\nCiAgICBwdWJsaWMgRmlsZSBnZXREaXJlY3RvcnkoKSB7CiAgICAgICAgcmV0\ndXJuIF9kaXI7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgZGlyZWN0b3J5\nIHRvIHdyaXRlIHNvdXJjZSB0by4gRGVmYXVsdHMgdG8gdGhlIGRpcmVjdG9y\neQogICAgICogb2YgdGhlIEphdmEgZmlsZSBmb3IgdGhlIHNldCB0eXBlLiBJ\nZiB0aGUgZ2l2ZW4gZGlyZWN0b3J5IGRvZXMgbm90CiAgICAgKiBtYXRjaCB0\naGUgcGFja2FnZSBvZiB0aGUgb2JqZWN0IGlkLCB0aGUgcGFja2FnZSBzdHJ1\nY3R1cmUgd2lsbCBiZQogICAgICogY3JlYXRlZCBiZWxvdyB0aGUgZGlyZWN0\nb3J5LgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXREaXJlY3RvcnkoRmls\nZSBkaXIpIHsKICAgICAgICBfZGlyID0gZGlyOwogICAgfQoKICAgIC8qKgog\nICAgICogVGhlIHRva2VuIHRvIHVzZSB0byBzZXBhcmF0ZSBzdHJpbmdpZmll\nZCBwcmltYXJ5IGtleSBmaWVsZCB2YWx1ZXMuCiAgICAgKi8KICAgIHB1Ymxp\nYyBTdHJpbmcgZ2V0VG9rZW4oKSB7CiAgICAgICAgcmV0dXJuIF90b2tlbjsK\nICAgIH0KCiAgICAvKioKICAgICAqIFRoZSB0b2tlbiB0byB1c2UgdG8gc2Vw\nYXJhdGUgc3RyaW5naWZpZWQgcHJpbWFyeSBrZXkgZmllbGQgdmFsdWVzLgog\nICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRUb2tlbihTdHJpbmcgdG9rZW4p\nIHsKICAgICAgICBfdG9rZW4gPSB0b2tlbjsKICAgIH0KCiAgICAvKioKICAg\nICAqIFRoZSB3cml0ZXIgdG8gd3JpdGUgc291cmNlIHRvLCBvciBudWxsIHRv\nIHdyaXRlIHRvIGRlZmF1bHQgZmlsZS4KICAgICAqLwogICAgcHVibGljIFdy\naXRlciBnZXRXcml0ZXIoKSB7CiAgICAgICAgcmV0dXJuIF93cml0ZXI7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBUaGUgd3JpdGVyIHRvIHdyaXRlIHNvdXJj\nZSB0bywgb3IgbnVsbCB0byB3cml0ZSB0byBkZWZhdWx0IGZpbGUuCiAgICAg\nKi8KICAgIHB1YmxpYyB2b2lkIHNldFdyaXRlcihXcml0ZXIgd3JpdGVyKSB7\nCiAgICAgICAgX3dyaXRlciA9IHdyaXRlcjsKICAgIH0KCiAgICAvKioKICAg\nICAqIFJldHVybiB0aGUgdHlwZSB3ZSBhcmUgZ2VuZXJhdGluZyBhbiBhcHBs\naWNhdGlvbiBpZCBmb3IuCiAgICAgKi8KICAgIHB1YmxpYyBDbGFzcyBnZXRU\neXBlKCkgewogICAgICAgIHJldHVybiBfdHlwZTsKICAgIH0KCiAgICAvKioK\nICAgICAqIFJldHVybiBtZXRhZGF0YSBmb3IgdGhlIHR5cGUgd2UgYXJlIGdl\nbmVyYXRpbmcgYW4gYXBwbGljYXRpb24gaWQgZm9yLgogICAgICovCiAgICBw\ndWJsaWMgQ2xhc3NNZXRhRGF0YSBnZXRNZXRhRGF0YSgpIHsKICAgICAgICBy\nZXR1cm4gX21ldGE7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhl\nIGNvZGUgZ2VuZXJhdGVkIGZvciB0aGUgYXBwbGljYXRpb24gaWQsIG9yIG51\nbGwKICAgICAqIGlmIGludmFsaWQgY2xhc3Mgb3IgdGhlIHtAbGluayAjcnVu\nfSBtZXRob2QgaGFzIG5vdCBiZWVuIGNhbGxlZC4KICAgICAqLwogICAgcHVi\nbGljIFN0cmluZyBnZXRDb2RlKCkgewogICAgICAgIHJldHVybiBfY29kZTsK\nICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgYXBw\nbGljYXRpb24gaWRlbnRpdHkgY2xhc3Mgc2hvdWxkIGJlIGFuIGlubmVyIGNs\nYXNzLgogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBpc0lubmVyQ2xhc3Mo\nKSB7CiAgICAgICAgQ2xhc3Mgb2lkQ2xhc3MgPSBfbWV0YS5nZXRPYmplY3RJ\nZFR5cGUoKTsKICAgICAgICByZXR1cm4gb2lkQ2xhc3MuZ2V0TmFtZSgpLmlu\nZGV4T2YoJyQnKSAhPSAtMTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVy\nbnMgdGhlIHNob3J0IGNsYXNzIG5hbWUgZm9yIHRoZSBvYmplY3QgaWQgY2xh\nc3MuCiAgICAgKi8KICAgIHByaXZhdGUgU3RyaW5nIGdldENsYXNzTmFtZSgp\nIHsKICAgICAgICBpZiAoX21ldGEuaXNPcGVuSlBBSWRlbnRpdHkoKSkKICAg\nICAgICAgICAgcmV0dXJuIG51bGw7CgogICAgICAgIC8vIGNvbnZlcnQgZnJv\nbSBTb21lQ2xhc3MkSUQgdG8gSUQKICAgICAgICBTdHJpbmcgY2xhc3NOYW1l\nID0gU3RyaW5ncy5nZXRDbGFzc05hbWUoX21ldGEuZ2V0T2JqZWN0SWRUeXBl\nKCkpOwogICAgICAgIGlmIChpc0lubmVyQ2xhc3MoKSkKICAgICAgICAgICAg\nY2xhc3NOYW1lID0gY2xhc3NOYW1lLnN1YnN0cmluZyhjbGFzc05hbWUubGFz\ndEluZGV4T2YoJyQnKSArIDEpOwogICAgICAgIHJldHVybiBjbGFzc05hbWU7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBHZW5lcmF0ZXMgdGhlIHNvdXJjZWNv\nZGUgZm9yIHRoZSBhcHBsaWNhdGlvbiBpZCBjbGFzczsgcmV0dXJucwogICAg\nICogZmFsc2UgaWYgdGhlIGNsYXNzIGlzIGludmFsaWQuCiAgICAgKi8KICAg\nIHB1YmxpYyBib29sZWFuIHJ1bigpIHsKICAgICAgICBpZiAoX2xvZy5pc0lu\nZm9FbmFibGVkKCkpCiAgICAgICAgICAgIF9sb2cuaW5mbyhfbG9jLmdldCgi\nYXBwaWQtc3RhcnQiLCBfdHlwZSkpOwoKICAgICAgICAvLyBlbnN1cmUgdGhh\ndCB0aGlzIHR5cGUgaXMgYSBjYW5kaWRhdGUgZm9yIGFwcGxpY2F0aW9uIGlk\nZW50aXR5CiAgICAgICAgaWYgKF9tZXRhID09IG51bGwKICAgICAgICAgICAg\nfHwgX21ldGEuZ2V0SWRlbnRpdHlUeXBlKCkgIT0gQ2xhc3NNZXRhRGF0YS5J\nRF9BUFBMSUNBVElPTgogICAgICAgICAgICB8fCBfbWV0YS5pc09wZW5KUEFJ\nZGVudGl0eSgpKSB7CiAgICAgICAgICAgIGlmICghX2lnbm9yZSkKICAgICAg\nICAgICAgICAgIHRocm93IG5ldyBVc2VyRXhjZXB0aW9uKF9sb2MuZ2V0KCJh\ncHBpZC1pbnZhbGlkIiwgX3R5cGUpKTsKCiAgICAgICAgICAgIC8vIGVsc2Ug\nanVzdCB3YXJuCiAgICAgICAgICAgIGlmIChfbG9nLmlzV2FybkVuYWJsZWQo\nKSkKICAgICAgICAgICAgICAgIF9sb2cud2FybihfbG9jLmdldCgiYXBwaWQt\nd2FybiIsIF90eXBlKSk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAg\nICAgICB9CgogICAgICAgIENsYXNzIG9pZENsYXNzID0gX21ldGEuZ2V0T2Jq\nZWN0SWRUeXBlKCk7CiAgICAgICAgQ2xhc3Mgc3VwZXJPaWRDbGFzcyA9IG51\nbGw7CgogICAgICAgIC8vIGFsbG93IGRpZmYgb2lkIGNsYXNzIGluIHN1YmNs\nYXNzIChob3Jpem9udGFsKQogICAgICAgIGlmIChfbWV0YS5nZXRQQ1N1cGVy\nY2xhc3MoKSAhPSBudWxsKSB7CiAgICAgICAgICAgIHN1cGVyT2lkQ2xhc3Mg\nPSBfbWV0YS5nZXRQQ1N1cGVyY2xhc3NNZXRhRGF0YSgpLmdldE9iamVjdElk\nVHlwZSgpOwogICAgICAgICAgICBpZiAob2lkQ2xhc3MgPT0gbnVsbCB8fCBv\naWRDbGFzcy5lcXVhbHMoc3VwZXJPaWRDbGFzcykpIHsKICAgICAgICAgICAg\nICAgIC8vIGp1c3Qgd2FybgogICAgICAgICAgICAgICAgaWYgKF9sb2cuaXNX\nYXJuRW5hYmxlZCgpKQogICAgICAgICAgICAgICAgICAgIF9sb2cud2Fybihf\nbG9jLmdldCgiYXBwaWQtd2FybiIsIF90eXBlKSk7CiAgICAgICAgICAgICAg\nICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAg\nICAgIC8vIGVuc3VyZSB0aGF0IGFuIGlkIGNsYXNzIGlzIGRlY2xhcmVkCiAg\nICAgICAgaWYgKG9pZENsYXNzID09IG51bGwpCiAgICAgICAgICAgIHRocm93\nIG5ldyBVc2VyRXhjZXB0aW9uKF9sb2MuZ2V0KCJuby1pZC1jbGFzcyIsIF90\neXBlKSkuCiAgICAgICAgICAgICAgICBzZXRGYXRhbCh0cnVlKTsKCiAgICAg\nICAgLy8gZW5zdXJlIHRoZXJlIGlzIGF0IGxlYXN0IG9uZSBwayBmaWVsZCBp\nZiB3ZSBhcmUKICAgICAgICAvLyBub24tYWJzcmFjdCwgYW5kIHNlZSBpZiB3\nZSBoYXZlIGFueSBieXRlW10KICAgICAgICBib29sZWFuIGJ5dGVzID0gZmFs\nc2U7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7ICFieXRlcyAmJiBpIDwgX2Zp\nZWxkcy5sZW5ndGg7IGkrKykKICAgICAgICAgICAgYnl0ZXMgPSBfZmllbGRz\nW2ldLmdldERlY2xhcmVkVHlwZSgpID09IGJ5dGVbXS5jbGFzczsKCiAgICAg\nICAgLy8gY29sbGVjdCBpbmZvIG9uIGlkIHR5cGUKICAgICAgICBTdHJpbmcg\nY2xhc3NOYW1lID0gZ2V0Q2xhc3NOYW1lKCk7CiAgICAgICAgU3RyaW5nIHBh\nY2thZ2VOYW1lID0gU3RyaW5ncy5nZXRQYWNrYWdlTmFtZShvaWRDbGFzcyk7\nCiAgICAgICAgU3RyaW5nIHBhY2thZ2VEZWMgPSAiIjsKICAgICAgICBpZiAo\ncGFja2FnZU5hbWUubGVuZ3RoKCkgPiAwKQogICAgICAgICAgICBwYWNrYWdl\nRGVjID0gInBhY2thZ2UgIiArIHBhY2thZ2VOYW1lICsgIjsiOwoKICAgICAg\nICBTdHJpbmcgaW1wb3J0cyA9IGdldEltcG9ydHMoKTsKICAgICAgICBTdHJp\nbmcgZmllbGREZWNzID0gZ2V0RmllbGREZWNsYXJhdGlvbnMoKTsKICAgICAg\nICBTdHJpbmcgY29uc3RydWN0b3IgPSBnZXRDb25zdHJ1Y3RvcihzdXBlck9p\nZENsYXNzICE9IG51bGwpOwogICAgICAgIFN0cmluZyBwcm9wZXJ0aWVzID0g\nZ2V0UHJvcGVydGllcygpOwogICAgICAgIFN0cmluZyBmcm9tU3RyaW5nQ29k\nZSA9IGdldEZyb21TdHJpbmdDb2RlKHN1cGVyT2lkQ2xhc3MgIT0gbnVsbCk7\nCiAgICAgICAgU3RyaW5nIHRvU3RyaW5nQ29kZSA9IGdldFRvU3RyaW5nQ29k\nZShzdXBlck9pZENsYXNzICE9IG51bGwpOwogICAgICAgIFN0cmluZyBlcXVh\nbHNDb2RlID0gZ2V0RXF1YWxzQ29kZShzdXBlck9pZENsYXNzICE9IG51bGwp\nOwogICAgICAgIFN0cmluZyBoYXNoQ29kZUNvZGUgPSBnZXRIYXNoQ29kZUNv\nZGUoc3VwZXJPaWRDbGFzcyAhPSBudWxsKTsKCiAgICAgICAgLy8gYnVpbGQg\ndGhlIGphdmEgY29kZQogICAgICAgIENvZGVGb3JtYXQgY29kZSA9IG5ld0Nv\nZGVGb3JtYXQoKTsKICAgICAgICBpZiAoIWlzSW5uZXJDbGFzcygpICYmIHBh\nY2thZ2VEZWMubGVuZ3RoKCkgPiAwKQogICAgICAgICAgICBjb2RlLmFwcGVu\nZChwYWNrYWdlRGVjKS5hZnRlclNlY3Rpb24oKTsKCiAgICAgICAgaWYgKCFp\nc0lubmVyQ2xhc3MoKSAmJiBpbXBvcnRzLmxlbmd0aCgpID4gMCkKICAgICAg\nICAgICAgY29kZS5hcHBlbmQoaW1wb3J0cykuYWZ0ZXJTZWN0aW9uKCk7Cgog\nICAgICAgIGNvZGUuYXBwZW5kKCIvKioiKS5lbmRsKCkuCiAgICAgICAgICAg\nIGFwcGVuZCgiICogIikuCiAgICAgICAgICAgIGFwcGVuZChfbG9jLmdldCgi\nYXBwaWQtY29tbWVudC1mb3IiLCBfdHlwZS5nZXROYW1lKCkpKS4KICAgICAg\nICAgICAgZW5kbCgpLgogICAgICAgICAgICBhcHBlbmQoIiAqIikuZW5kbCgp\nLgogICAgICAgICAgICBhcHBlbmQoIiAqICIpLmFwcGVuZChfbG9jLmdldCgi\nYXBwaWQtY29tbWVudC1nZW4iKSkuZW5kbCgpLgogICAgICAgICAgICBhcHBl\nbmQoIiAqICIpLmFwcGVuZChnZXRDbGFzcygpLmdldE5hbWUoKSkuZW5kbCgp\nLgogICAgICAgICAgICBhcHBlbmQoIiAqLyIpLmVuZGwoKTsKICAgICAgICBj\nb2RlLmFwcGVuZCgicHVibGljICIpOwogICAgICAgIGlmIChpc0lubmVyQ2xh\nc3MoKSkKICAgICAgICAgICAgY29kZS5hcHBlbmQoInN0YXRpYyAiKTsKICAg\nICAgICBjb2RlLmFwcGVuZCgiY2xhc3MgIikuYXBwZW5kKGNsYXNzTmFtZSk7\nCiAgICAgICAgaWYgKGNvZGUuZ2V0QnJhY2VPblNhbWVMaW5lKCkpCiAgICAg\nICAgICAgIGNvZGUuYXBwZW5kKCIgIik7CiAgICAgICAgZWxzZQogICAgICAg\nICAgICBjb2RlLmVuZGwoKS50YWIoKTsKCiAgICAgICAgaWYgKHN1cGVyT2lk\nQ2xhc3MgIT0gbnVsbCkgewogICAgICAgICAgICBjb2RlLmFwcGVuZCgiZXh0\nZW5kcyAiICsgU3RyaW5ncy5nZXRDbGFzc05hbWUoc3VwZXJPaWRDbGFzcykp\nOwogICAgICAgICAgICBpZiAoY29kZS5nZXRCcmFjZU9uU2FtZUxpbmUoKSkK\nICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5kKCIgIik7CiAgICAgICAgICAg\nIGVsc2UKICAgICAgICAgICAgICAgIGNvZGUuZW5kbCgpLnRhYigpOwogICAg\nICAgIH0KICAgICAgICBjb2RlLmFwcGVuZCgiaW1wbGVtZW50cyBTZXJpYWxp\nemFibGUiKS5vcGVuQnJhY2UoMSkuZW5kbCgpOwoKICAgICAgICAvLyBpZiB3\nZSB1c2UgYSBieXRlIGFycmF5IHdlIG5lZWQgYSBzdGF0aWMgYXJyYXkgZm9y\nIGVuY29kaW5nIHRvIHN0cmluZwogICAgICAgIGlmIChieXRlcykgewogICAg\nICAgICAgICBjb2RlLnRhYigpLmFwcGVuZCgicHJpdmF0ZSBzdGF0aWMgZmlu\nYWwgY2hhcltdIEhFWCA9ICIpLgogICAgICAgICAgICAgICAgYXBwZW5kKCJu\nZXcgY2hhcltdIHsiKS5lbmRsKCk7CiAgICAgICAgICAgIGNvZGUudGFiKDIp\nLmFwcGVuZCgiJzAnLCAnMScsICcyJywgJzMnLCAnNCcsICc1JywgJzYnLCAn\nNycsIikuCiAgICAgICAgICAgICAgICBlbmRsKCk7CiAgICAgICAgICAgIGNv\nZGUudGFiKDIpLmFwcGVuZCgiJzgnLCAnOScsICdBJywgJ0InLCAnQycsICdE\nJywgJ0UnLCAnRiciKS4KICAgICAgICAgICAgICAgIGVuZGwoKTsKICAgICAg\nICAgICAgY29kZS50YWIoKS5hcHBlbmQoIn07IikuZW5kbCgyKTsKICAgICAg\nICB9CgogICAgICAgIC8vIHN0YXRpYyBibG9jayB0byByZWdpc3RlciBjbGFz\ncwogICAgICAgIGNvZGUudGFiKCkuYXBwZW5kKCJzdGF0aWMiKS5vcGVuQnJh\nY2UoMikuZW5kbCgpOwogICAgICAgIGNvZGUudGFiKDIpLmFwcGVuZCgiLy8g\ncmVnaXN0ZXIgcGVyc2lzdGVudCBjbGFzcyBpbiBKVk0iKS5lbmRsKCk7CiAg\nICAgICAgaWYgKEphdmFWZXJzaW9ucy5WRVJTSU9OID49IDUpIHsKICAgICAg\nICAgICAgY29kZS50YWIoMikuYXBwZW5kKCJ0cnkgeyBDbGFzcy5mb3JOYW1l\nIikub3BlblBhcmVuKHRydWUpLgogICAgICAgICAgICAgICAgYXBwZW5kKCJc\nIiIpLmFwcGVuZChfdHlwZS5nZXROYW1lKCkpLmFwcGVuZCgiXCIiKS4KICAg\nICAgICAgICAgICAgIGNsb3NlUGFyZW4oKS5hcHBlbmQoIjsiKS5hcHBlbmQo\nIiB9IikuZW5kbCgpOwogICAgICAgICAgICBjb2RlLnRhYigyKS5hcHBlbmQo\nImNhdGNoIikub3BlblBhcmVuKHRydWUpLgogICAgICAgICAgICAgICAgYXBw\nZW5kKCJFeGNlcHRpb24gZSIpLmNsb3NlUGFyZW4oKS5hcHBlbmQoIiB7fSIp\nLmVuZGwoKTsKICAgICAgICB9IGVsc2UKICAgICAgICAgICAgY29kZS50YWIo\nMikuYXBwZW5kKCJDbGFzcyBjID0gIikuYXBwZW5kKF90eXBlLmdldE5hbWUo\nKSkuCiAgICAgICAgICAgICAgICBhcHBlbmQoIi5jbGFzczsiKS5lbmRsKCk7\nCiAgICAgICAgY29kZS5jbG9zZUJyYWNlKDIpOwoKICAgICAgICAvLyBmaWVs\nZCBkZWNsYXJhdGlvbnMKICAgICAgICBpZiAoZmllbGREZWNzLmxlbmd0aCgp\nID4gMCkKICAgICAgICAgICAgY29kZS5lbmRsKDIpLmFwcGVuZChmaWVsZERl\nY3MpOwoKICAgICAgICAvLyBkZWZhdWx0IGNvbnN0cnVjdG9yCiAgICAgICAg\nY29kZS5hZnRlclNlY3Rpb24oKS50YWIoKS5hcHBlbmQoInB1YmxpYyAiKS5h\ncHBlbmQoY2xhc3NOYW1lKS4KICAgICAgICAgICAgcGFyZW5zKCkub3BlbkJy\nYWNlKDIpLmVuZGwoKTsKICAgICAgICBjb2RlLmNsb3NlQnJhY2UoMik7Cgog\nICAgICAgIC8vIHN0cmluZyBjb25zdHJ1Y3RvcgogICAgICAgIGNvZGUuYWZ0\nZXJTZWN0aW9uKCkuYXBwZW5kKGNvbnN0cnVjdG9yKTsKCiAgICAgICAgLy8g\ncHJvcGVydGllcwogICAgICAgIGlmIChwcm9wZXJ0aWVzLmxlbmd0aCgpID4g\nMCkKICAgICAgICAgICAgY29kZS5hZnRlclNlY3Rpb24oKS5hcHBlbmQocHJv\ncGVydGllcyk7CgogICAgICAgIC8vIHRvU3RyaW5nLCBlcXVhbHMsIGhhc2hD\nb2RlIG1ldGhvZHMKICAgICAgICBpZiAodG9TdHJpbmdDb2RlLmxlbmd0aCgp\nID4gMCkKICAgICAgICAgICAgY29kZS5hZnRlclNlY3Rpb24oKS5hcHBlbmQo\ndG9TdHJpbmdDb2RlKTsKICAgICAgICBpZiAoaGFzaENvZGVDb2RlLmxlbmd0\naCgpID4gMCkKICAgICAgICAgICAgY29kZS5hZnRlclNlY3Rpb24oKS5hcHBl\nbmQoaGFzaENvZGVDb2RlKTsKICAgICAgICBpZiAoZXF1YWxzQ29kZS5sZW5n\ndGgoKSA+IDApCiAgICAgICAgICAgIGNvZGUuYWZ0ZXJTZWN0aW9uKCkuYXBw\nZW5kKGVxdWFsc0NvZGUpOwogICAgICAgIGlmIChmcm9tU3RyaW5nQ29kZS5s\nZW5ndGgoKSA+IDApCiAgICAgICAgICAgIGNvZGUuYWZ0ZXJTZWN0aW9uKCku\nYXBwZW5kKGZyb21TdHJpbmdDb2RlKTsKCiAgICAgICAgLy8gaWYgd2UgaGF2\nZSBhbnkgYnl0ZSBhcnJheSBmaWVsZHMsIHdlIGhhdmUgdG8gYWRkIHRoZSBl\neHRyYQogICAgICAgIC8vIG1ldGhvZHMgZm9yIGhhbmRsaW5nIGJ5dGUgYXJy\nYXlzCiAgICAgICAgaWYgKGJ5dGVzKSB7CiAgICAgICAgICAgIGNvZGUuYWZ0\nZXJTZWN0aW9uKCkuYXBwZW5kKGdldFRvQnl0ZXNCeXRlQXJyYXlDb2RlKCkp\nOwogICAgICAgICAgICBjb2RlLmFmdGVyU2VjdGlvbigpLmFwcGVuZChnZXRU\nb1N0cmluZ0J5dGVBcnJheUNvZGUoKSk7CiAgICAgICAgICAgIGNvZGUuYWZ0\nZXJTZWN0aW9uKCkuYXBwZW5kKGdldEVxdWFsc0J5dGVBcnJheUNvZGUoKSk7\nCiAgICAgICAgICAgIGNvZGUuYWZ0ZXJTZWN0aW9uKCkuYXBwZW5kKGdldEhh\nc2hDb2RlQnl0ZUFycmF5Q29kZSgpKTsKICAgICAgICB9CgogICAgICAgIC8v\nIGJhc2UgY2xhc3NlcyBtaWdodCBuZWVkIHRvIGRlZmluZSBhIGN1c3RvbSB0\nb2tlbml6ZXIKICAgICAgICBpZiAoc3VwZXJPaWRDbGFzcyA9PSBudWxsICYm\nIGdldFRva2VuaXplcihmYWxzZSkgPT0gVE9LRU5JWkVSX0NVU1RPTSkKICAg\nICAgICAgICAgY29kZS5hZnRlclNlY3Rpb24oKS5hcHBlbmQoZ2V0Q3VzdG9t\nVG9rZW5pemVyQ2xhc3MoKSk7CgogICAgICAgIGNvZGUuZW5kbCgpOwogICAg\nICAgIGNvZGUuY2xvc2VCcmFjZSgxKTsKCiAgICAgICAgX2NvZGUgPSBjb2Rl\nLnRvU3RyaW5nKCk7CgogICAgICAgIC8vIGlmIHRoaXMgaXMgYW4gaW5uZXIg\nY2xhc3MsIHRoZW4gaW5kZW50IHRoZSBlbnRpcmUKICAgICAgICAvLyBjb2Rl\nIHVuaXQgb25lIHRhYiBsZXZlbAogICAgICAgIGlmIChpc0lubmVyQ2xhc3Mo\nKSkgewogICAgICAgICAgICAvLyBpbmRlbnQgdGhlIGVudGlyZSBjb2RlIGJs\nb2NrIG9uZSBsZXZlbCB0byBtYWtlIGl0CiAgICAgICAgICAgIC8vIGEgcHJv\ncGVydGx5IGluZGVudGVkIGlubmRlciBjbGFzcwogICAgICAgICAgICBfY29k\nZSA9IGNvZGUuZ2V0VGFiKCkgKyBTdHJpbmdzLnJlcGxhY2UoX2NvZGUsCiAg\nICAgICAgICAgICAgICBTeXN0ZW0uZ2V0UHJvcGVydHkoImxpbmUuc2VwYXJh\ndG9yIiksCiAgICAgICAgICAgICAgICBTeXN0ZW0uZ2V0UHJvcGVydHkoImxp\nbmUuc2VwYXJhdG9yIikgKyBjb2RlLmdldFRhYigpKTsKICAgICAgICB9Cgog\nICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogV3Jp\ndGVzIHRoZSBnZW5lcmF0ZWQgY29kZSB0byB0aGUgcHJvcGVyIGZpbGUuCiAg\nICAgKi8KICAgIHB1YmxpYyB2b2lkIHJlY29yZCgpCiAgICAgICAgdGhyb3dz\nIElPRXhjZXB0aW9uIHsKICAgICAgICBpZiAoX2NvZGUgPT0gbnVsbCkKICAg\nICAgICAgICAgcmV0dXJuOwoKICAgICAgICBXcml0ZXIgd3JpdGVyID0gX3dy\naXRlcjsKICAgICAgICBpZiAod3JpdGVyID09IG51bGwpIHsKICAgICAgICAg\nICAgRmlsZSBmaWxlID0gZ2V0RmlsZSgpOwogICAgICAgICAgICBGaWxlcy5i\nYWNrdXAoZmlsZSwgZmFsc2UpOwogICAgICAgICAgICB3cml0ZXIgPSBuZXcg\nRmlsZVdyaXRlcihmaWxlKTsKICAgICAgICB9CgogICAgICAgIFByaW50V3Jp\ndGVyIHByaW50ZXIgPSBuZXcgUHJpbnRXcml0ZXIod3JpdGVyKTsKICAgICAg\nICBwcmludGVyLnByaW50KF9jb2RlKTsKICAgICAgICBwcmludGVyLmZsdXNo\nKCk7CgogICAgICAgIGlmIChfd3JpdGVyID09IG51bGwpCiAgICAgICAgICAg\nIHdyaXRlci5jbG9zZSgpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJu\nIHRoZSBuZWNlc3NhcnkgaW1wb3J0cyBmb3IgdGhlIGNsYXNzLgogICAgICov\nCiAgICBwcml2YXRlIFN0cmluZyBnZXRJbXBvcnRzKCkgewogICAgICAgIFNl\ndCBwa2dzID0gZ2V0SW1wb3J0UGFja2FnZXMoKTsKCiAgICAgICAgQ29kZUZv\ncm1hdCBpbXBvcnRzID0gbmV3Q29kZUZvcm1hdCgpOwogICAgICAgIFN0cmlu\nZyBiYXNlID0gU3RyaW5ncy5nZXRQYWNrYWdlTmFtZShfbWV0YS5nZXRPYmpl\nY3RJZFR5cGUoKSk7CiAgICAgICAgU3RyaW5nIHBrZzsKICAgICAgICBmb3Ig\nKEl0ZXJhdG9yIGl0ciA9IHBrZ3MuaXRlcmF0b3IoKTsgaXRyLmhhc05leHQo\nKTspIHsKICAgICAgICAgICAgcGtnID0gKFN0cmluZykgaXRyLm5leHQoKTsK\nICAgICAgICAgICAgaWYgKHBrZy5sZW5ndGgoKSA+IDAgJiYgISJqYXZhLmxh\nbmciLmVxdWFscyhwa2cpCiAgICAgICAgICAgICAgICAmJiAhYmFzZS5lcXVh\nbHMocGtnKSkgewogICAgICAgICAgICAgICAgaWYgKGltcG9ydHMubGVuZ3Ro\nKCkgPiAwKQogICAgICAgICAgICAgICAgICAgIGltcG9ydHMuZW5kbCgpOwog\nICAgICAgICAgICAgICAgaW1wb3J0cy5hcHBlbmQoImltcG9ydCAiKS5hcHBl\nbmQocGtnKS5hcHBlbmQoIi4qOyIpOwogICAgICAgICAgICB9CiAgICAgICAg\nfQogICAgICAgIHJldHVybiBpbXBvcnRzLnRvU3RyaW5nKCk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBjb2xsZWN0aW9uIG9mIHBhY2th\nZ2VzIHRoYXQgbmVlZCB0byBiZSBpbXBvcnRlZC4KICAgICAqLwogICAgcHVi\nbGljIFNldCBnZXRJbXBvcnRQYWNrYWdlcygpIHsKICAgICAgICBTZXQgcGtn\ncyA9IG5ldyBUcmVlU2V0KCk7CiAgICAgICAgcGtncy5hZGQoU3RyaW5ncy5n\nZXRQYWNrYWdlTmFtZShfdHlwZSkpOwoKICAgICAgICBDbGFzcyBzdXBlck9p\nZENsYXNzID0gbnVsbDsKICAgICAgICBpZiAoX21ldGEgIT0gbnVsbCAmJiBf\nbWV0YS5nZXRQQ1N1cGVyY2xhc3NNZXRhRGF0YSgpICE9IG51bGwpCiAgICAg\nICAgICAgIHN1cGVyT2lkQ2xhc3MgPSBfbWV0YS5nZXRQQ1N1cGVyY2xhc3NN\nZXRhRGF0YSgpLmdldE9iamVjdElkVHlwZSgpOwogICAgICAgIGlmIChzdXBl\nck9pZENsYXNzICE9IG51bGwpCiAgICAgICAgICAgIHBrZ3MuYWRkKFN0cmlu\nZ3MuZ2V0UGFja2FnZU5hbWUoc3VwZXJPaWRDbGFzcykpOwoKICAgICAgICBw\na2dzLmFkZCgiamF2YS5pbyIpOwogICAgICAgIHBrZ3MuYWRkKCJqYXZhLnV0\naWwiKTsKICAgICAgICBDbGFzcyB0eXBlOwogICAgICAgIGZvciAoaW50IGkg\nPSAwOyBpIDwgX2ZpZWxkcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB0\neXBlID0gX2ZpZWxkc1tpXS5nZXRPYmplY3RJZEZpZWxkVHlwZSgpOwogICAg\nICAgICAgICBpZiAodHlwZSAhPSBieXRlW10uY2xhc3MgJiYgdHlwZSAhPSBj\naGFyW10uY2xhc3MKICAgICAgICAgICAgICAgICYmICF0eXBlLmdldE5hbWUo\nKS5zdGFydHNXaXRoKCJqYXZhLnNxbC4iKSkgewogICAgICAgICAgICAgICAg\ncGtncy5hZGQoU3RyaW5ncy5nZXRQYWNrYWdlTmFtZSh0eXBlKSk7CiAgICAg\nICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHBrZ3M7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGNvZGUgdG8gZGVjbGFyZSBh\nbGwgcHJpbWFyeSBrZXkgZmllbGRzLgogICAgICovCiAgICBwcml2YXRlIFN0\ncmluZyBnZXRGaWVsZERlY2xhcmF0aW9ucygpIHsKICAgICAgICBDb2RlRm9y\nbWF0IGNvZGUgPSBuZXdDb2RlRm9ybWF0KCk7CiAgICAgICAgZm9yIChpbnQg\naSA9IDA7IGkgPCBfZmllbGRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAg\nIGlmIChpID4gMCkKICAgICAgICAgICAgICAgIGNvZGUuZW5kbCgpOwogICAg\nICAgICAgICBjb2RlLnRhYigpLmFwcGVuZCgicHVibGljICIpLmFwcGVuZChn\nZXRUeXBlTmFtZShfZmllbGRzW2ldKSkuCiAgICAgICAgICAgICAgICBhcHBl\nbmQoIiAiKS5hcHBlbmQoX2ZpZWxkc1tpXS5nZXROYW1lKCkpLmFwcGVuZCgi\nOyIpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gY29kZS50b1N0cmluZygp\nOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSB0eXBlIG5hbWUg\ndG8gZGVjbGFyZSB0aGUgZ2l2ZW4gZmllbGQgYXMuCiAgICAgKi8KICAgIHBy\naXZhdGUgU3RyaW5nIGdldFR5cGVOYW1lKEZpZWxkTWV0YURhdGEgZm1kKSB7\nCiAgICAgICAgQ2xhc3MgdHlwZSA9IGZtZC5nZXRPYmplY3RJZEZpZWxkVHlw\nZSgpOwogICAgICAgIGlmICh0eXBlID09IGJ5dGVbXS5jbGFzcykKICAgICAg\nICAgICAgcmV0dXJuICJieXRlW10iOwogICAgICAgIGlmICh0eXBlID09IGNo\nYXJbXS5jbGFzcykKICAgICAgICAgICAgcmV0dXJuICJjaGFyW10iOwogICAg\nICAgIGlmICh0eXBlLmdldE5hbWUoKS5zdGFydHNXaXRoKCJqYXZhLnNxbC4i\nKSkKICAgICAgICAgICAgcmV0dXJuIHR5cGUuZ2V0TmFtZSgpOwogICAgICAg\nIHJldHVybiBTdHJpbmdzLmdldENsYXNzTmFtZSh0eXBlKTsKICAgIH0KCiAg\nICAvKioKICAgICAqIFJldHVybiB0aGUgZ2V0dGVycyBhbmQgc2V0dGVycyBm\nb3IgYWxsIHByaW1hcnkga2V5IGZpZWxkcy4KICAgICAqLwogICAgcHJpdmF0\nZSBTdHJpbmcgZ2V0UHJvcGVydGllcygpIHsKICAgICAgICBpZiAoX21ldGEu\nZ2V0QWNjZXNzVHlwZSgpID09IENsYXNzTWV0YURhdGEuQUNDRVNTX0ZJRUxE\nKQogICAgICAgICAgICByZXR1cm4gIiI7CgogICAgICAgIENvZGVGb3JtYXQg\nY29kZSA9IG5ld0NvZGVGb3JtYXQoKTsKICAgICAgICBTdHJpbmcgcHJvcE5h\nbWU7CiAgICAgICAgU3RyaW5nIHR5cGVOYW1lOwogICAgICAgIGZvciAoaW50\nIGkgPSAwOyBpIDwgX2ZpZWxkcy5sZW5ndGg7IGkrKykgewogICAgICAgICAg\nICBpZiAoaSA+IDApCiAgICAgICAgICAgICAgICBjb2RlLmFmdGVyU2VjdGlv\nbigpOwogICAgICAgICAgICB0eXBlTmFtZSA9IGdldFR5cGVOYW1lKF9maWVs\nZHNbaV0pOwogICAgICAgICAgICBwcm9wTmFtZSA9IFN0cmluZ1V0aWxzLmNh\ncGl0YWxpemUoX2ZpZWxkc1tpXS5nZXROYW1lKCkpOwoKICAgICAgICAgICAg\nY29kZS50YWIoKS5hcHBlbmQoInB1YmxpYyAiKS5hcHBlbmQodHlwZU5hbWUp\nLmFwcGVuZCgiICIpOwogICAgICAgICAgICBpZiAoX2ZpZWxkc1tpXS5nZXRE\nZWNsYXJlZFR5cGVDb2RlKCkgPT0gSmF2YVR5cGVzLkJPT0xFQU4KICAgICAg\nICAgICAgICAgIHx8IF9maWVsZHNbaV0uZ2V0RGVjbGFyZWRUeXBlQ29kZSgp\nID09IEphdmFUeXBlcy5CT09MRUFOX09CSikKICAgICAgICAgICAgICAgIGNv\nZGUuYXBwZW5kKCJpcyIpOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAg\nICAgICBjb2RlLmFwcGVuZCgiZ2V0Iik7CiAgICAgICAgICAgIGNvZGUuYXBw\nZW5kKHByb3BOYW1lKS5wYXJlbnMoKS5vcGVuQnJhY2UoMikuZW5kbCgpOwog\nICAgICAgICAgICBjb2RlLnRhYigyKS5hcHBlbmQoInJldHVybiAiKS5hcHBl\nbmQoX2ZpZWxkc1tpXS5nZXROYW1lKCkpLgogICAgICAgICAgICAgICAgYXBw\nZW5kKCI7IikuZW5kbCgpOwogICAgICAgICAgICBjb2RlLmNsb3NlQnJhY2Uo\nMik7CiAgICAgICAgICAgIGNvZGUuYWZ0ZXJTZWN0aW9uKCk7CgogICAgICAg\nICAgICBjb2RlLnRhYigpLmFwcGVuZCgicHVibGljIHZvaWQgc2V0IikuYXBw\nZW5kKHByb3BOYW1lKTsKICAgICAgICAgICAgY29kZS5vcGVuUGFyZW4odHJ1\nZSkuYXBwZW5kKHR5cGVOYW1lKS5hcHBlbmQoIiAiKS4KICAgICAgICAgICAg\nICAgIGFwcGVuZChfZmllbGRzW2ldLmdldE5hbWUoKSkuY2xvc2VQYXJlbigp\nOwogICAgICAgICAgICBjb2RlLm9wZW5CcmFjZSgyKS5lbmRsKCk7CiAgICAg\nICAgICAgIGNvZGUudGFiKDIpLmFwcGVuZCgidGhpcy4iKS5hcHBlbmQoX2Zp\nZWxkc1tpXS5nZXROYW1lKCkpLgogICAgICAgICAgICAgICAgYXBwZW5kKCIg\nPSAiKS5hcHBlbmQoX2ZpZWxkc1tpXS5nZXROYW1lKCkpLmFwcGVuZCgiOyIp\nLgogICAgICAgICAgICAgICAgZW5kbCgpOwogICAgICAgICAgICBjb2RlLmNs\nb3NlQnJhY2UoMik7CiAgICAgICAgfQogICAgICAgIHJldHVybiBjb2RlLnRv\nU3RyaW5nKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIHN0\ncmluZyBjb25zdHJ1Y3RvciBjb2RlLgogICAgICovCiAgICBwcml2YXRlIFN0\ncmluZyBnZXRDb25zdHJ1Y3Rvcihib29sZWFuIGhhc1N1cGVyY2xhc3MpIHsK\nICAgICAgICBDb2RlRm9ybWF0IGNvZGUgPSBuZXdDb2RlRm9ybWF0KCk7CiAg\nICAgICAgY29kZS50YWIoKS5hcHBlbmQoInB1YmxpYyAiKTsKICAgICAgICBj\nb2RlLmFwcGVuZChnZXRDbGFzc05hbWUoKSk7CiAgICAgICAgY29kZS5vcGVu\nUGFyZW4odHJ1ZSkuYXBwZW5kKCJTdHJpbmcgc3RyIikuY2xvc2VQYXJlbigp\nOwogICAgICAgIGNvZGUub3BlbkJyYWNlKDIpLmVuZGwoKTsKCiAgICAgICAg\naWYgKF9maWVsZHMubGVuZ3RoICE9IDAgfHwgKGhhc1N1cGVyY2xhc3MKICAg\nICAgICAgICAgJiYgX21ldGEuZ2V0UHJpbWFyeUtleUZpZWxkcygpLmxlbmd0\naCA+IDApKSB7CiAgICAgICAgICAgIGNvZGUudGFiKDIpLmFwcGVuZCgiZnJv\nbVN0cmluZyIpLm9wZW5QYXJlbih0cnVlKS4KICAgICAgICAgICAgICAgIGFw\ncGVuZCgic3RyIikuY2xvc2VQYXJlbigpLmFwcGVuZCgiOyIpLmVuZGwoKTsK\nICAgICAgICB9CgogICAgICAgIGNvZGUuY2xvc2VCcmFjZSgyKTsKICAgICAg\nICByZXR1cm4gY29kZS50b1N0cmluZygpOwogICAgfQoKICAgIC8qKgogICAg\nICogQ3JlYXRlIHRoZSBmcm9tU3RyaW5nIG1ldGhvZCB0aGF0IHBhcnNlcyB0\naGUgcmVzdWx0IG9mIG91ciB0b1N0cmluZwogICAgICogbWV0aG9kLiBJZiB3\nZSBoYXZlIHN1cGVyY2xhc3NlcyB3aXRoIGlkIGZpZWxkcywgdGhpcyB3aWxs\nIGNhbGwKICAgICAqIHN1cGVyLmZyb21TdHJpbmcoKSBzbyB0aGF0IHRoZSBw\nYXJlbnQgY2xhc3MgY2FuIHBhcnNlIGl0cyBvd24gZmllbGRzLgogICAgICov\nCiAgICBwcml2YXRlIFN0cmluZyBnZXRGcm9tU3RyaW5nQ29kZShib29sZWFu\nIGhhc1N1cGVyY2xhc3MpIHsKICAgICAgICAvLyBpZiB3ZSBhcmUgYmVsb3cg\nYSBjb25jcmV0ZSBjbGFzcyB0aGVuIHdlIGNhbm5vdCBkZWNsYXJlIGFueQog\nICAgICAgIC8vIG1vcmUgcHJpbWFyeSBrZXkgZmllbGRzOyB0aHVzLCBqdXN0\nIHVzZSB0aGUgcGFyZW50IGludm9jYXRpb24KICAgICAgICBpZiAoaGFzQ29u\nY3JldGVTdXBlcmNsYXNzKCkpCiAgICAgICAgICAgIHJldHVybiAiIjsKICAg\nICAgICBpZiAoX2ZpZWxkcy5sZW5ndGggPT0gMCkKICAgICAgICAgICAgcmV0\ndXJuICIiOwogICAgICAgIGhhc1N1cGVyY2xhc3MgPSBoYXNTdXBlcmNsYXNz\nICYmIGdldERlY2xhcmVkUHJpbWFyeUtleUZpZWxkcwogICAgICAgICAgICAo\nX21ldGEuZ2V0UENTdXBlcmNsYXNzTWV0YURhdGEoKSkubGVuZ3RoID4gMDsK\nCiAgICAgICAgU3RyaW5nIHRva2UgPSBnZXRUb2tlbml6ZXIoaGFzU3VwZXJj\nbGFzcyk7CiAgICAgICAgQ29kZUZvcm1hdCBjb2RlID0gbmV3Q29kZUZvcm1h\ndCgpOwogICAgICAgIGlmIChfYWJzdHJhY3QgfHwgaGFzU3VwZXJjbGFzcykK\nICAgICAgICAgICAgY29kZS50YWIoKS5hcHBlbmQoInByb3RlY3RlZCAiKS5h\ncHBlbmQodG9rZSkuCiAgICAgICAgICAgICAgICBhcHBlbmQoIiBmcm9tU3Ry\naW5nIik7CiAgICAgICAgZWxzZQogICAgICAgICAgICBjb2RlLnRhYigpLmFw\ncGVuZCgicHJpdmF0ZSB2b2lkIGZyb21TdHJpbmciKTsKICAgICAgICBjb2Rl\nLm9wZW5QYXJlbih0cnVlKS5hcHBlbmQoIlN0cmluZyBzdHIiKS5jbG9zZVBh\ncmVuKCk7CiAgICAgICAgY29kZS5vcGVuQnJhY2UoMikuZW5kbCgpOwoKICAg\nICAgICAvLyBpZiB3ZSBoYXZlIGFueSBPYmplY3QtdHlwZSBmaWVsZHMsIGRp\nZSBpbW1lZGlhdGVseSAKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9m\naWVsZHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKF9maWVsZHNb\naV0uZ2V0T2JqZWN0SWRGaWVsZFR5cGUoKSAhPSBPYmplY3QuY2xhc3MpCiAg\nICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgY29kZS50YWIo\nMikuYXBwZW5kKCJ0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNl\ncHRpb24iKS4KICAgICAgICAgICAgICAgIHBhcmVucygpLmFwcGVuZCgiOyIp\nLmVuZGwoKTsKICAgICAgICAgICAgY29kZS5jbG9zZUJyYWNlKDIpOyAKICAg\nICAgICAgICAgcmV0dXJuIGNvZGUudG9TdHJpbmcoKTsKICAgICAgICB9IAoK\nICAgICAgICBpZiAodG9rZSAhPSBudWxsKSB7CiAgICAgICAgICAgIGNvZGUu\ndGFiKDIpLmFwcGVuZCh0b2tlKS5hcHBlbmQoIiB0b2tlID0gIik7CiAgICAg\nICAgICAgIGlmIChoYXNTdXBlcmNsYXNzKSB7CiAgICAgICAgICAgICAgICAv\nLyBjYWxsIHN1cGVyLmZyb21TdHJpbmcoc3RyKSB0byBnZXQgdGhlIHRva2Vu\naXplciB0aGF0IHdhcwogICAgICAgICAgICAgICAgLy8gdXNlZCB0byBwYXJz\nZSB0aGUgc3VwZXJjbGFzcwogICAgICAgICAgICAgICAgY29kZS5hcHBlbmQo\nInN1cGVyLmZyb21TdHJpbmciKS5vcGVuUGFyZW4odHJ1ZSkuCiAgICAgICAg\nICAgICAgICAgICAgYXBwZW5kKCJzdHIiKS5jbG9zZVBhcmVuKCk7CiAgICAg\nICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBvdGhlcndpc2Ug\nY29uc3RydWN0IGEgbmV3IHRva2VuaXplciB3aXRoIHRoZSBzdHJpbmcKICAg\nICAgICAgICAgICAgIGNvZGUuYXBwZW5kKCJuZXcgIikuYXBwZW5kKHRva2Up\nLm9wZW5QYXJlbih0cnVlKS4KICAgICAgICAgICAgICAgICAgICBhcHBlbmQo\nInN0ciIpOwogICAgICAgICAgICAgICAgaWYgKHRva2UgPT0gVE9LRU5JWkVS\nX1NURCkKICAgICAgICAgICAgICAgICAgICBjb2RlLmFwcGVuZCgiLCBcIiIp\nLmFwcGVuZChfdG9rZW4pLmFwcGVuZCgiXCIiKTsKICAgICAgICAgICAgICAg\nIGNvZGUuY2xvc2VQYXJlbigpOwogICAgICAgICAgICB9CiAgICAgICAgICAg\nIGNvZGUuYXBwZW5kKCI7IikuZW5kbCgpOwogICAgICAgIH0KCiAgICAgICAg\nZm9yIChpbnQgaSA9IDA7IGkgPCBfZmllbGRzLmxlbmd0aDsgaSsrKSB7CiAg\nICAgICAgICAgIGlmICh0b2tlICE9IG51bGwpIHsKICAgICAgICAgICAgICAg\nIGNvZGUudGFiKDIpLmFwcGVuZCgic3RyID0gdG9rZS5uZXh0VG9rZW4iKS5w\nYXJlbnMoKS4KICAgICAgICAgICAgICAgICAgICBhcHBlbmQoIjsiKS5lbmRs\nKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29kZS50YWIoMikuYXBw\nZW5kKGdldENvbnZlcnNpb25Db2RlKF9maWVsZHNbaV0sICJzdHIiKSkuZW5k\nbCgpOwogICAgICAgIH0KICAgICAgICBpZiAoX2Fic3RyYWN0IHx8IGhhc1N1\ncGVyY2xhc3MpCiAgICAgICAgICAgIGNvZGUudGFiKDIpLmFwcGVuZCgicmV0\ndXJuIHRva2U7IikuZW5kbCgpOwogICAgICAgIGNvZGUuY2xvc2VCcmFjZSgy\nKTsKICAgICAgICByZXR1cm4gY29kZS50b1N0cmluZygpOwogICAgfQoKICAg\nIC8qKgogICAgICogUmV0dXJucyB0aGUgdHlwZSBvZiB0b2tlbml6ZXIgdG8g\ndXNlLCBvciBudWxsIGlmIG5vbmUuCiAgICAgKi8KICAgIHByaXZhdGUgU3Ry\naW5nIGdldFRva2VuaXplcihib29sZWFuIGhhc1N1cGVyY2xhc3MpIHsKICAg\nICAgICBpZiAoIV9hYnN0cmFjdCAmJiAhaGFzU3VwZXJjbGFzcyAmJiBfZmll\nbGRzLmxlbmd0aCA9PSAxKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAg\nICAgICBpZiAoX3Rva2VuLmxlbmd0aCgpID09IDEpCiAgICAgICAgICAgIHJl\ndHVybiBUT0tFTklaRVJfU1REOwogICAgICAgIHJldHVybiBUT0tFTklaRVJf\nQ1VTVE9NOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IHBhcnNpbmcgY29k\nZSBmb3IgdGhlIGdpdmVuIGZpZWxkLgogICAgICovCiAgICBwcml2YXRlIFN0\ncmluZyBnZXRDb252ZXJzaW9uQ29kZShGaWVsZE1ldGFEYXRhIGZpZWxkLCBT\ndHJpbmcgdmFyKSB7CiAgICAgICAgQ29kZUZvcm1hdCBwYXJzZSA9IG5ld0Nv\nZGVGb3JtYXQoKTsKICAgICAgICBpZiAoZmllbGQuZ2V0TmFtZSgpLmVxdWFs\ncyh2YXIpKQogICAgICAgICAgICBwYXJzZS5hcHBlbmQoInRoaXMuIik7CiAg\nICAgICAgcGFyc2UuYXBwZW5kKGZpZWxkLmdldE5hbWUoKSkuYXBwZW5kKCIg\nPSAiKTsKCiAgICAgICAgQ2xhc3MgdHlwZSA9IGZpZWxkLmdldE9iamVjdElk\nRmllbGRUeXBlKCk7CiAgICAgICAgaWYgKHR5cGUgPT0gRGF0ZS5jbGFzcykg\newogICAgICAgICAgICBwYXJzZS5hcHBlbmQoIm5ldyBEYXRlIikub3BlblBh\ncmVuKHRydWUpLgogICAgICAgICAgICAgICAgYXBwZW5kKCJMb25nLnBhcnNl\nTG9uZyIpLm9wZW5QYXJlbih0cnVlKS4KICAgICAgICAgICAgICAgIGFwcGVu\nZCh2YXIpLmNsb3NlUGFyZW4oKS5jbG9zZVBhcmVuKCk7CiAgICAgICAgfSBl\nbHNlIGlmICh0eXBlID09IGphdmEuc3FsLkRhdGUuY2xhc3MKICAgICAgICAg\nICAgfHwgdHlwZSA9PSBqYXZhLnNxbC5UaW1lc3RhbXAuY2xhc3MKICAgICAg\nICAgICAgfHwgdHlwZSA9PSBqYXZhLnNxbC5UaW1lLmNsYXNzKSB7CiAgICAg\nICAgICAgIHBhcnNlLmFwcGVuZCh0eXBlLmdldE5hbWUoKSkuYXBwZW5kKCIu\ndmFsdWVPZiIpLm9wZW5QYXJlbih0cnVlKS4KICAgICAgICAgICAgICAgIGFw\ncGVuZCh2YXIpLmNsb3NlUGFyZW4oKTsKICAgICAgICB9IGVsc2UgaWYgKHR5\ncGUgPT0gU3RyaW5nLmNsYXNzKQogICAgICAgICAgICBwYXJzZS5hcHBlbmQo\ndmFyKTsKICAgICAgICBlbHNlIGlmICh0eXBlID09IENoYXJhY3Rlci5jbGFz\ncykgewogICAgICAgICAgICBwYXJzZS5hcHBlbmQoIm5ldyBDaGFyYWN0ZXIi\nKS5vcGVuUGFyZW4odHJ1ZSkuYXBwZW5kKHZhcikuCiAgICAgICAgICAgICAg\nICBhcHBlbmQoIi5jaGFyQXQiKS5vcGVuUGFyZW4odHJ1ZSkuYXBwZW5kKDAp\nLgogICAgICAgICAgICAgICAgY2xvc2VQYXJlbigpLmNsb3NlUGFyZW4oKTsK\nICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gYnl0ZVtdLmNsYXNzKQogICAg\nICAgICAgICBwYXJzZS5hcHBlbmQoInRvQnl0ZXMiKS5vcGVuUGFyZW4odHJ1\nZSkuYXBwZW5kKHZhcikuY2xvc2VQYXJlbigpOwogICAgICAgIGVsc2UgaWYg\nKHR5cGUgPT0gY2hhcltdLmNsYXNzKQogICAgICAgICAgICBwYXJzZS5hcHBl\nbmQodmFyKS5hcHBlbmQoIi50b0NoYXJBcnJheSIpLnBhcmVucygpOwogICAg\nICAgIGVsc2UgaWYgKCF0eXBlLmlzUHJpbWl0aXZlKCkpIHsKICAgICAgICAg\nICAgcGFyc2UuYXBwZW5kKCJuZXcgIikuYXBwZW5kKFN0cmluZ3MuZ2V0Q2xh\nc3NOYW1lKHR5cGUpKS4KICAgICAgICAgICAgICAgIG9wZW5QYXJlbih0cnVl\nKS5hcHBlbmQodmFyKS5jbG9zZVBhcmVuKCk7CiAgICAgICAgfSBlbHNlIC8v\nIHByaW1pdGl2ZQogICAgICAgIHsKICAgICAgICAgICAgc3dpdGNoICh0eXBl\nLmdldE5hbWUoKS5jaGFyQXQoMCkpIHsKICAgICAgICAgICAgICAgIGNhc2Ug\nJ2InOgogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09IGJvb2xlYW4u\nY2xhc3MpCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlLmFwcGVuZCgi\nXCJ0cnVlXCIuZXF1YWxzIikub3BlblBhcmVuKHRydWUpLgogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgYXBwZW5kKHZhcikuY2xvc2VQYXJlbigpOwog\nICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAg\nICAgcGFyc2UuYXBwZW5kKCJCeXRlLnBhcnNlQnl0ZSIpLm9wZW5QYXJlbih0\ncnVlKS4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVuZCh2YXIp\nLmNsb3NlUGFyZW4oKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAg\nICAgICAgICAgICAgIGNhc2UgJ2MnOgogICAgICAgICAgICAgICAgICAgIHBh\ncnNlLmFwcGVuZCh2YXIpLmFwcGVuZCgiLmNoYXJBdCIpLm9wZW5QYXJlbih0\ncnVlKS4KICAgICAgICAgICAgICAgICAgICAgICAgYXBwZW5kKDApLmNsb3Nl\nUGFyZW4oKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAg\nICAgICAgIGNhc2UgJ2QnOgogICAgICAgICAgICAgICAgICAgIHBhcnNlLmFw\ncGVuZCgiRG91YmxlLnBhcnNlRG91YmxlIikub3BlblBhcmVuKHRydWUpLgog\nICAgICAgICAgICAgICAgICAgICAgICBhcHBlbmQodmFyKS5jbG9zZVBhcmVu\nKCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAg\nICBjYXNlICdmJzoKICAgICAgICAgICAgICAgICAgICBwYXJzZS5hcHBlbmQo\nIkZsb2F0LnBhcnNlRmxvYXQiKS5vcGVuUGFyZW4odHJ1ZSkuCiAgICAgICAg\nICAgICAgICAgICAgICAgIGFwcGVuZCh2YXIpLmNsb3NlUGFyZW4oKTsKICAg\nICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2Ug\nJ2knOgogICAgICAgICAgICAgICAgICAgIHBhcnNlLmFwcGVuZCgiSW50ZWdl\nci5wYXJzZUludCIpLm9wZW5QYXJlbih0cnVlKS4KICAgICAgICAgICAgICAg\nICAgICAgICAgYXBwZW5kKHZhcikuY2xvc2VQYXJlbigpOwogICAgICAgICAg\nICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAnbCc6CiAg\nICAgICAgICAgICAgICAgICAgcGFyc2UuYXBwZW5kKCJMb25nLnBhcnNlTG9u\nZyIpLm9wZW5QYXJlbih0cnVlKS4KICAgICAgICAgICAgICAgICAgICAgICAg\nYXBwZW5kKHZhcikuY2xvc2VQYXJlbigpOwogICAgICAgICAgICAgICAgICAg\nIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAncyc6CiAgICAgICAgICAg\nICAgICAgICAgcGFyc2UuYXBwZW5kKCJTaG9ydC5wYXJzZVNob3J0Iikub3Bl\nblBhcmVuKHRydWUpLgogICAgICAgICAgICAgICAgICAgICAgICBhcHBlbmQo\ndmFyKS5jbG9zZVBhcmVuKCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7\nCiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICghdHlwZS5p\nc1ByaW1pdGl2ZSgpICYmIHR5cGUgIT0gYnl0ZVtdLmNsYXNzKSB7CiAgICAg\nICAgICAgIENvZGVGb3JtYXQgaXNOdWxsID0gbmV3Q29kZUZvcm1hdCgpOwog\nICAgICAgICAgICBpc051bGwuYXBwZW5kKCJpZiIpLm9wZW5QYXJlbih0cnVl\nKS5hcHBlbmQoIlwibnVsbFwiLmVxdWFscyIpLgogICAgICAgICAgICAgICAg\nb3BlblBhcmVuKHRydWUpLmFwcGVuZCh2YXIpLmNsb3NlUGFyZW4oKS5jbG9z\nZVBhcmVuKCkuCiAgICAgICAgICAgICAgICBlbmRsKCkudGFiKDMpOwogICAg\nICAgICAgICBpZiAoZmllbGQuZ2V0TmFtZSgpLmVxdWFscyh2YXIpKQogICAg\nICAgICAgICAgICAgaXNOdWxsLmFwcGVuZCgidGhpcy4iKTsKICAgICAgICAg\nICAgaXNOdWxsLmFwcGVuZChmaWVsZC5nZXROYW1lKCkpLmFwcGVuZCgiID0g\nbnVsbDsiKS5lbmRsKCk7CiAgICAgICAgICAgIGlzTnVsbC50YWIoMikuYXBw\nZW5kKCJlbHNlIikuZW5kbCgpOwogICAgICAgICAgICBpc051bGwudGFiKDMp\nLmFwcGVuZChwYXJzZSk7CiAgICAgICAgICAgIHBhcnNlID0gaXNOdWxsOwog\nICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHBhcnNlLmFwcGVuZCgiOyIpLnRv\nU3RyaW5nKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gYW4gZXF1\nYWxpdHkgbWV0aG9kIHRoYXQgY29tcGFyZXMgYWxsIHBrIHZhcmlhYmxlcy4K\nICAgICAqIE11c3QgZGVhbCBjb3JyZWN0bHkgd2l0aCBib3RoIHByaW1pdGl2\nZXMgYW5kIG9iamVjdHMuCiAgICAgKi8KICAgIHByaXZhdGUgU3RyaW5nIGdl\ndEVxdWFsc0NvZGUoYm9vbGVhbiBoYXNTdXBlcmNsYXNzKSB7CiAgICAgICAg\nLy8gaWYgd2UgYXJlIGJlbG93IGEgY29uY3JldGUgY2xhc3MgdGhlbiB3ZSBj\nYW5ub3QgZGVjbGFyZSBhbnkKICAgICAgICAvLyBtb3JlIHByaW1hcnkga2V5\nIGZpZWxkczsgdGh1cywganVzdCB1c2UgdGhlIHBhcmVudCBpbnZvY2F0aW9u\nCiAgICAgICAgaWYgKGhhc0NvbmNyZXRlU3VwZXJjbGFzcygpIHx8IChoYXNT\ndXBlcmNsYXNzICYmIF9maWVsZHMubGVuZ3RoID09IDApKQogICAgICAgICAg\nICByZXR1cm4gIiI7CgogICAgICAgIENvZGVGb3JtYXQgY29kZSA9IG5ld0Nv\nZGVGb3JtYXQoKTsKICAgICAgICBjb2RlLnRhYigpLmFwcGVuZCgicHVibGlj\nIGJvb2xlYW4gZXF1YWxzIikub3BlblBhcmVuKHRydWUpLgogICAgICAgICAg\nICBhcHBlbmQoIk9iamVjdCBvYmoiKS5jbG9zZVBhcmVuKCkub3BlbkJyYWNl\nKDIpLmVuZGwoKTsKCiAgICAgICAgY29kZS50YWIoMikuYXBwZW5kKCJpZiIp\nLm9wZW5QYXJlbih0cnVlKS4KICAgICAgICAgICAgYXBwZW5kKCJ0aGlzID09\nIG9iaiIpLmNsb3NlUGFyZW4oKS5lbmRsKCk7CiAgICAgICAgY29kZS50YWIo\nMykuYXBwZW5kKCJyZXR1cm4gdHJ1ZTsiKS5lbmRsKCk7CgogICAgICAgIC8v\nIGNhbGwgc3VwZXIuZXF1YWxzKCkgaWYgd2UgaGF2ZSBhIHN1cGVyY2xhc3MK\nICAgICAgICBTdHJpbmcgY2xhc3NOYW1lID0gZ2V0Q2xhc3NOYW1lKCk7CiAg\nICAgICAgaWYgKGhhc1N1cGVyY2xhc3MpIHsKICAgICAgICAgICAgY29kZS50\nYWIoMikuYXBwZW5kKCJpZiIpLm9wZW5QYXJlbih0cnVlKS4KICAgICAgICAg\nICAgICAgIGFwcGVuZCgiIXN1cGVyLmVxdWFscyIpLm9wZW5QYXJlbih0cnVl\nKS4KICAgICAgICAgICAgICAgIGFwcGVuZCgib2JqIikuY2xvc2VQYXJlbigp\nLmNsb3NlUGFyZW4oKS5lbmRsKCk7CiAgICAgICAgICAgIGNvZGUudGFiKDMp\nLmFwcGVuZCgicmV0dXJuIGZhbHNlOyIpLmVuZGwoKTsKICAgICAgICB9IGVs\nc2UgewogICAgICAgICAgICBjb2RlLnRhYigyKS5hcHBlbmQoImlmIikub3Bl\nblBhcmVuKHRydWUpLgogICAgICAgICAgICAgICAgYXBwZW5kKCJvYmogPT0g\nbnVsbCB8fCBvYmouZ2V0Q2xhc3MiKS5wYXJlbnMoKS4KICAgICAgICAgICAg\nICAgIGFwcGVuZCgiICE9ICIpLmFwcGVuZCgiZ2V0Q2xhc3MiKS5wYXJlbnMo\nKS4KICAgICAgICAgICAgICAgIGNsb3NlUGFyZW4oKS5lbmRsKCk7CiAgICAg\nICAgICAgIGNvZGUudGFiKDMpLmFwcGVuZCgicmV0dXJuIGZhbHNlOyIpLmVu\nZGwoKTsKICAgICAgICB9CgogICAgICAgIFN0cmluZyBuYW1lOwogICAgICAg\nIENsYXNzIHR5cGU7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfZmll\nbGRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChpID09IDApIHsK\nICAgICAgICAgICAgICAgIGNvZGUuZW5kbCgpLnRhYigyKS5hcHBlbmQoY2xh\nc3NOYW1lKS5hcHBlbmQoIiBvdGhlciA9ICIpLgogICAgICAgICAgICAgICAg\nICAgIG9wZW5QYXJlbihmYWxzZSkuYXBwZW5kKGNsYXNzTmFtZSkuY2xvc2VQ\nYXJlbigpLgogICAgICAgICAgICAgICAgICAgIGFwcGVuZCgiIG9iajsiKS5l\nbmRsKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIGlmIHRoaXMg\naXMgbm90IHRoZSBmaXJzdCBmaWVsZCwgYWRkIGFuICYmCiAgICAgICAgICAg\nIGlmIChpID09IDApCiAgICAgICAgICAgICAgICBjb2RlLnRhYigyKS5hcHBl\nbmQoInJldHVybiAiKTsKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAg\nICAgY29kZS5lbmRsKCkudGFiKDMpLmFwcGVuZCgiJiYgIik7CgogICAgICAg\nICAgICBuYW1lID0gX2ZpZWxkc1tpXS5nZXROYW1lKCk7CiAgICAgICAgICAg\nIHR5cGUgPSBfZmllbGRzW2ldLmdldE9iamVjdElkRmllbGRUeXBlKCk7CiAg\nICAgICAgICAgIGlmICh0eXBlLmlzUHJpbWl0aXZlKCkpIHsKICAgICAgICAg\nICAgICAgIGNvZGUub3BlblBhcmVuKGZhbHNlKS5hcHBlbmQobmFtZSkuYXBw\nZW5kKCIgPT0gIikuCiAgICAgICAgICAgICAgICAgICAgYXBwZW5kKCJvdGhl\nci4iKS5hcHBlbmQobmFtZSkuY2xvc2VQYXJlbigpOwogICAgICAgICAgICB9\nIGVsc2UgaWYgKHR5cGUgPT0gYnl0ZVtdLmNsYXNzKSB7CiAgICAgICAgICAg\nICAgICBjb2RlLm9wZW5QYXJlbihmYWxzZSkuYXBwZW5kKCJlcXVhbHMiKS5v\ncGVuUGFyZW4odHJ1ZSkuCiAgICAgICAgICAgICAgICAgICAgYXBwZW5kKG5h\nbWUpLmFwcGVuZCgiLCAiKS5hcHBlbmQoIm90aGVyLiIpLgogICAgICAgICAg\nICAgICAgICAgIGFwcGVuZChuYW1lKS5jbG9zZVBhcmVuKCkuY2xvc2VQYXJl\nbigpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gY2hhcltdLmNs\nYXNzKSB7CiAgICAgICAgICAgICAgICAvLyAoKG5hbWUgPT0gbnVsbCAmJiBv\ndGhlci5uYW1lID09IG51bGwpCiAgICAgICAgICAgICAgICAvLwl8fCAobmFt\nZSAhPSBudWxsICYmIFN0cmluZy52YWx1ZU9mIChuYW1lKS4KICAgICAgICAg\nICAgICAgIC8vCWVxdWFscyAoU3RyaW5nLnZhbHVlT2YgKG90aGVyLm5hbWUp\nKSkpCiAgICAgICAgICAgICAgICBjb2RlLmFwcGVuZCgiKCIpLm9wZW5QYXJl\nbihmYWxzZSkuYXBwZW5kKG5hbWUpLgogICAgICAgICAgICAgICAgICAgIGFw\ncGVuZCgiID09IG51bGwgJiYgb3RoZXIuIikuYXBwZW5kKG5hbWUpLgogICAg\nICAgICAgICAgICAgICAgIGFwcGVuZCgiID09IG51bGwiKS5jbG9zZVBhcmVu\nKCkuZW5kbCgpOwogICAgICAgICAgICAgICAgY29kZS50YWIoMykuYXBwZW5k\nKCJ8fCAiKTsKICAgICAgICAgICAgICAgIGNvZGUub3BlblBhcmVuKGZhbHNl\nKS5hcHBlbmQobmFtZSkuYXBwZW5kKCIgIT0gbnVsbCAiKS4KICAgICAgICAg\nICAgICAgICAgICBhcHBlbmQoIiYmIFN0cmluZy52YWx1ZU9mIikub3BlblBh\ncmVuKHRydWUpLmFwcGVuZChuYW1lKS4KICAgICAgICAgICAgICAgICAgICBj\nbG9zZVBhcmVuKCkuYXBwZW5kKCIuIikuZW5kbCgpOwogICAgICAgICAgICAg\nICAgY29kZS50YWIoMykuYXBwZW5kKCJlcXVhbHMiKS5vcGVuUGFyZW4odHJ1\nZSkuCiAgICAgICAgICAgICAgICAgICAgYXBwZW5kKCJTdHJpbmcudmFsdWVP\nZiIpLm9wZW5QYXJlbih0cnVlKS4KICAgICAgICAgICAgICAgICAgICBhcHBl\nbmQoIm90aGVyLiIpLmFwcGVuZChuYW1lKS5jbG9zZVBhcmVuKCkuY2xvc2VQ\nYXJlbigpLgogICAgICAgICAgICAgICAgICAgIGNsb3NlUGFyZW4oKS5hcHBl\nbmQoIikiKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAg\nIC8vICgobmFtZSA9PSBudWxsICYmIG90aGVyLm5hbWUgPT0gbnVsbCkKICAg\nICAgICAgICAgICAgIC8vCXx8IChuYW1lICE9IG51bGwgJiYgbmFtZS5lcXVh\nbHMgKG90aGVyLm5hbWUpKSkKICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5k\nKCIoIikub3BlblBhcmVuKGZhbHNlKS5hcHBlbmQobmFtZSkuCiAgICAgICAg\nICAgICAgICAgICAgYXBwZW5kKCIgPT0gbnVsbCAmJiBvdGhlci4iKS5hcHBl\nbmQobmFtZSkuCiAgICAgICAgICAgICAgICAgICAgYXBwZW5kKCIgPT0gbnVs\nbCIpLmNsb3NlUGFyZW4oKS5lbmRsKCk7CiAgICAgICAgICAgICAgICBjb2Rl\nLnRhYigzKS5hcHBlbmQoInx8ICIpOwogICAgICAgICAgICAgICAgY29kZS5v\ncGVuUGFyZW4oZmFsc2UpLmFwcGVuZChuYW1lKS5hcHBlbmQoIiAhPSBudWxs\nICIpLgogICAgICAgICAgICAgICAgICAgIGFwcGVuZCgiJiYgIikuYXBwZW5k\nKG5hbWUpLmFwcGVuZCgiLmVxdWFscyIpLgogICAgICAgICAgICAgICAgICAg\nIG9wZW5QYXJlbih0cnVlKS5hcHBlbmQoIm90aGVyLiIpLmFwcGVuZChuYW1l\nKS4KICAgICAgICAgICAgICAgICAgICBjbG9zZVBhcmVuKCkuY2xvc2VQYXJl\nbigpLmFwcGVuZCgiKSIpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAg\nICAgICAvLyBubyBfZmllbGRzOiBqdXN0IHJldHVybiB0cnVlIGFmdGVyIGNo\nZWNraW5nIGluc3RhbmNlb2YKICAgICAgICBpZiAoX2ZpZWxkcy5sZW5ndGgg\nPT0gMCkKICAgICAgICAgICAgY29kZS50YWIoMikuYXBwZW5kKCJyZXR1cm4g\ndHJ1ZTsiKS5lbmRsKCk7CiAgICAgICAgZWxzZQogICAgICAgICAgICBjb2Rl\nLmFwcGVuZCgiOyIpLmVuZGwoKTsKCiAgICAgICAgY29kZS5jbG9zZUJyYWNl\nKDIpOwogICAgICAgIHJldHVybiBjb2RlLnRvU3RyaW5nKCk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBSZXR1cm4gYSBoYXNoQ29kZSBtZXRob2QgdGhhdCB0\nYWtlcyBpbnRvIGFjY291bnQgYWxsCiAgICAgKiBwcmltYXJ5IGtleSB2YWx1\nZXMuIE11c3QgZGVhbCBjb3JyZWN0bHkgd2l0aCBib3RoIHByaW1pdGl2ZXMg\nYW5kIG9iamVjdHMuCiAgICAgKi8KICAgIHByaXZhdGUgU3RyaW5nIGdldEhh\nc2hDb2RlQ29kZShib29sZWFuIGhhc1N1cGVyY2xhc3MpIHsKICAgICAgICAv\nLyBpZiB3ZSBhcmUgYmVsb3cgYSBjb25jcmV0ZSBjbGFzcyB0aGVuIHdlIGNh\nbm5vdCBkZWNsYXJlIGFueQogICAgICAgIC8vIG1vcmUgcHJpbWFyeSBrZXkg\nZmllbGRzOyB0aHVzLCBqdXN0IHVzZSB0aGUgcGFyZW50IGludm9jYXRpb24K\nICAgICAgICBpZiAoaGFzQ29uY3JldGVTdXBlcmNsYXNzKCkgfHwgKGhhc1N1\ncGVyY2xhc3MgJiYgX2ZpZWxkcy5sZW5ndGggPT0gMCkpCiAgICAgICAgICAg\nIHJldHVybiAiIjsKCiAgICAgICAgQ29kZUZvcm1hdCBjb2RlID0gbmV3Q29k\nZUZvcm1hdCgpOwogICAgICAgIGNvZGUudGFiKCkuYXBwZW5kKCJwdWJsaWMg\naW50IGhhc2hDb2RlIikucGFyZW5zKCkuCiAgICAgICAgICAgIG9wZW5CcmFj\nZSgyKS5lbmRsKCk7CgogICAgICAgIGlmIChfZmllbGRzLmxlbmd0aCA9PSAw\nKQogICAgICAgICAgICBjb2RlLnRhYigyKS5hcHBlbmQoInJldHVybiAxNzsi\nKS5lbmRsKCk7CiAgICAgICAgZWxzZSBpZiAoX2ZpZWxkcy5sZW5ndGggPT0g\nMSAmJiAhaGFzU3VwZXJjbGFzcykgewogICAgICAgICAgICBjb2RlLnRhYigy\nKS5hcHBlbmQoInJldHVybiAiKTsKICAgICAgICAgICAgYXBwZW5kSGFzaENv\nZGVDb2RlKF9maWVsZHNbMF0sIGNvZGUpOwogICAgICAgICAgICBjb2RlLmFw\ncGVuZCgiOyIpLmVuZGwoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAg\nICBjb2RlLnRhYigyKS5hcHBlbmQoImludCBycyA9ICIpOwogICAgICAgICAg\nICBpZiAoaGFzU3VwZXJjbGFzcykgewogICAgICAgICAgICAgICAgLy8gY2Fs\nbCBzdXBlci5oYXNoQ29kZSgpIGlmIHdlIGhhdmUgYSBzdXBlcmNsYXNzCiAg\nICAgICAgICAgICAgICBjb2RlLmFwcGVuZCgic3VwZXIuaGFzaENvZGUiKS5v\ncGVuUGFyZW4odHJ1ZSkuCiAgICAgICAgICAgICAgICAgICAgY2xvc2VQYXJl\nbigpLmFwcGVuZCgiOyIpOwogICAgICAgICAgICB9IGVsc2UKICAgICAgICAg\nICAgICAgIGNvZGUuYXBwZW5kKCIxNzsiKTsKICAgICAgICAgICAgY29kZS5l\nbmRsKCk7CgogICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9maWVs\nZHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIGNvZGUudGFiKDIp\nLmFwcGVuZCgicnMgPSBycyAqIDM3ICsgIik7CiAgICAgICAgICAgICAgICBh\ncHBlbmRIYXNoQ29kZUNvZGUoX2ZpZWxkc1tpXSwgY29kZSk7CiAgICAgICAg\nICAgICAgICBjb2RlLmFwcGVuZCgiOyIpLmVuZGwoKTsKICAgICAgICAgICAg\nfQogICAgICAgICAgICBjb2RlLnRhYigyKS5hcHBlbmQoInJldHVybiByczsi\nKS5lbmRsKCk7CiAgICAgICAgfQogICAgICAgIGNvZGUuY2xvc2VCcmFjZSgy\nKTsKICAgICAgICByZXR1cm4gY29kZS50b1N0cmluZygpOwogICAgfQoKICAg\nIC8qKgogICAgICogUmV0dXJuIHRydWUgaWYgdGhpcyBjbGFzcyBoYXMgYSBj\nb25jcmV0ZSBzdXBlcmNsYXNzLgogICAgICovCiAgICBwcml2YXRlIGJvb2xl\nYW4gaGFzQ29uY3JldGVTdXBlcmNsYXNzKCkgewogICAgICAgIGZvciAoQ2xh\nc3NNZXRhRGF0YSBzdXAgPSBfbWV0YS5nZXRQQ1N1cGVyY2xhc3NNZXRhRGF0\nYSgpOwogICAgICAgICAgICBzdXAgIT0gbnVsbDsgc3VwID0gc3VwLmdldFBD\nU3VwZXJjbGFzc01ldGFEYXRhKCkpIHsKICAgICAgICAgICAgaWYgKCFNb2Rp\nZmllci5pc0Fic3RyYWN0KHN1cC5nZXREZXNjcmliZWRUeXBlKCkuZ2V0TW9k\naWZpZXJzKCkpKQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAg\nICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAvKioKICAg\nICAqIEFwcGVuZCBjb2RlIGNhbGN1bGF0aW5nIHRoZSBoYXNoY29kZSBmb3Ig\ndGhlIGdpdmVuIGZpZWxkLgogICAgICovCiAgICBwcml2YXRlIHZvaWQgYXBw\nZW5kSGFzaENvZGVDb2RlKEZpZWxkTWV0YURhdGEgZmllbGQsIENvZGVGb3Jt\nYXQgY29kZSkgewogICAgICAgIFN0cmluZyBuYW1lID0gZmllbGQuZ2V0TmFt\nZSgpOwogICAgICAgIGlmICgicnMiLmVxdWFscyhuYW1lKSkKICAgICAgICAg\nICAgbmFtZSA9ICJ0aGlzLiIgKyBuYW1lOwogICAgICAgIENsYXNzIHR5cGUg\nPSBmaWVsZC5nZXRPYmplY3RJZEZpZWxkVHlwZSgpOwogICAgICAgIGlmICh0\neXBlLmlzUHJpbWl0aXZlKCkpIHsKICAgICAgICAgICAgaWYgKHR5cGUgPT0g\nYm9vbGVhbi5jbGFzcykgewogICAgICAgICAgICAgICAgLy8gKChuYW1lKSA/\nIDEgOiAwKQogICAgICAgICAgICAgICAgY29kZS5hcHBlbmQoIigiKS5vcGVu\nUGFyZW4oZmFsc2UpLmFwcGVuZChuYW1lKS5jbG9zZVBhcmVuKCkuCiAgICAg\nICAgICAgICAgICAgICAgYXBwZW5kKCIgPyAxIDogMCIpLmFwcGVuZCgiKSIp\nOwogICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gbG9uZy5jbGFzcykg\newogICAgICAgICAgICAgICAgLy8gKGludCkgKG5hbWUgXiAobmFtZSA+Pj4g\nMzIpKQogICAgICAgICAgICAgICAgY29kZS5vcGVuUGFyZW4oZmFsc2UpLmFw\ncGVuZCgiaW50IikuY2xvc2VQYXJlbigpLgogICAgICAgICAgICAgICAgICAg\nIGFwcGVuZCgiICIpLm9wZW5QYXJlbihmYWxzZSkuYXBwZW5kKG5hbWUpLgog\nICAgICAgICAgICAgICAgICAgIGFwcGVuZCgiIF4gIikub3BlblBhcmVuKGZh\nbHNlKS5hcHBlbmQobmFtZSkuCiAgICAgICAgICAgICAgICAgICAgYXBwZW5k\nKCIgPj4+IDMyIikuY2xvc2VQYXJlbigpLmNsb3NlUGFyZW4oKTsKICAgICAg\nICAgICAgfSBlbHNlIGlmICh0eXBlID09IGRvdWJsZS5jbGFzcykgewogICAg\nICAgICAgICAgICAgLy8gKGludCkgKERvdWJsZS5kb3VibGVUb0xvbmdCaXRz\nIChuYW1lKQogICAgICAgICAgICAgICAgLy8gICAgIF4gKERvdWJsZS5kb3Vi\nbGVUb0xvbmdCaXRzIChuYW1lKSA+Pj4gMzIpKQogICAgICAgICAgICAgICAg\nY29kZS5vcGVuUGFyZW4oZmFsc2UpLmFwcGVuZCgiaW50IikuY2xvc2VQYXJl\nbigpLgogICAgICAgICAgICAgICAgICAgIGFwcGVuZCgiICIpLm9wZW5QYXJl\nbihmYWxzZSkuCiAgICAgICAgICAgICAgICAgICAgYXBwZW5kKCJEb3VibGUu\nZG91YmxlVG9Mb25nQml0cyIpLm9wZW5QYXJlbih0cnVlKS4KICAgICAgICAg\nICAgICAgICAgICBhcHBlbmQobmFtZSkuY2xvc2VQYXJlbigpLmVuZGwoKTsK\nICAgICAgICAgICAgICAgIGNvZGUudGFiKDMpLmFwcGVuZCgiXiAiKS5vcGVu\nUGFyZW4oZmFsc2UpLgogICAgICAgICAgICAgICAgICAgIGFwcGVuZCgiRG91\nYmxlLmRvdWJsZVRvTG9uZ0JpdHMiKS5vcGVuUGFyZW4odHJ1ZSkuCiAgICAg\nICAgICAgICAgICAgICAgYXBwZW5kKG5hbWUpLmNsb3NlUGFyZW4oKS5hcHBl\nbmQoIiA+Pj4gMzIiKS4KICAgICAgICAgICAgICAgICAgICBjbG9zZVBhcmVu\nKCkuY2xvc2VQYXJlbigpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUg\nPT0gZmxvYXQuY2xhc3MpIHsKICAgICAgICAgICAgICAgIC8vIEZsb2F0LmZs\nb2F0VG9JbnRCaXRzIChuYW1lKQogICAgICAgICAgICAgICAgY29kZS5hcHBl\nbmQoIkZsb2F0LmZsb2F0VG9JbnRCaXRzIikub3BlblBhcmVuKHRydWUpLgog\nICAgICAgICAgICAgICAgICAgIGFwcGVuZChuYW1lKS5jbG9zZVBhcmVuKCk7\nCiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSBpbnQuY2xhc3MpCiAg\nICAgICAgICAgICAgICBjb2RlLmFwcGVuZChuYW1lKTsKICAgICAgICAgICAg\nZWxzZSB7CiAgICAgICAgICAgICAgICAvLyAoaW50KSBuYW1lCiAgICAgICAg\nICAgICAgICBjb2RlLm9wZW5QYXJlbihmYWxzZSkuYXBwZW5kKCJpbnQiKS5j\nbG9zZVBhcmVuKCkuCiAgICAgICAgICAgICAgICAgICAgYXBwZW5kKCIgIiku\nYXBwZW5kKG5hbWUpOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlm\nICh0eXBlID09IGJ5dGVbXS5jbGFzcykgewogICAgICAgICAgICAvLyBoYXNo\nQ29kZSAobmFtZSk7CiAgICAgICAgICAgIGNvZGUuYXBwZW5kKCJoYXNoQ29k\nZSIpLm9wZW5QYXJlbih0cnVlKS5hcHBlbmQobmFtZSkuCiAgICAgICAgICAg\nICAgICBjbG9zZVBhcmVuKCk7CiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09\nIGNoYXJbXS5jbGFzcykgewogICAgICAgICAgICAvLyAoKG5hbWUgPT0gbnVs\nbCkgPyAwIDogU3RyaW5nLnZhbHVlT2YgKG5hbWUpLmhhc2hDb2RlICgpKQog\nICAgICAgICAgICBjb2RlLmFwcGVuZCgiKCIpLm9wZW5QYXJlbihmYWxzZSku\nYXBwZW5kKG5hbWUpLgogICAgICAgICAgICAgICAgYXBwZW5kKCIgPT0gbnVs\nbCIpLmNsb3NlUGFyZW4oKS5hcHBlbmQoIiA/IDAgOiAiKS4KICAgICAgICAg\nICAgICAgIGFwcGVuZCgiU3RyaW5nLnZhbHVlT2YiKS5vcGVuUGFyZW4odHJ1\nZSkuYXBwZW5kKG5hbWUpLgogICAgICAgICAgICAgICAgY2xvc2VQYXJlbigp\nLmFwcGVuZCgiLmhhc2hDb2RlIikucGFyZW5zKCkuYXBwZW5kKCIpIik7CiAg\nICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gKChuYW1lID09IG51bGwp\nID8gMCA6IG5hbWUuaGFzaENvZGUgKCkpCiAgICAgICAgICAgIGNvZGUuYXBw\nZW5kKCIoIikub3BlblBhcmVuKGZhbHNlKS5hcHBlbmQobmFtZSkuCiAgICAg\nICAgICAgICAgICBhcHBlbmQoIiA9PSBudWxsIikuY2xvc2VQYXJlbigpLmFw\ncGVuZCgiID8gMCA6ICIpLgogICAgICAgICAgICAgICAgYXBwZW5kKG5hbWUp\nLmFwcGVuZCgiLmhhc2hDb2RlIikucGFyZW5zKCkuYXBwZW5kKCIpIik7CiAg\nICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIGEgbWV0aG9k\nIHRvIGNyZWF0ZSBhIHN0cmluZyBjb250YWluaW5nIHRoZSBwcmltYXJ5IGtl\neQogICAgICogdmFsdWVzIHRoYXQgZGVmaW5lIHRoZSBhcHBsaWNhdGlvbiBp\nZCBvYmplY3QuCiAgICAgKi8KICAgIHByaXZhdGUgU3RyaW5nIGdldFRvU3Ry\naW5nQ29kZShib29sZWFuIGhhc1N1cGVyY2xhc3MpIHsKICAgICAgICAvLyBp\nZiB3ZSBhcmUgYmVsb3cgYSBjb25jcmV0ZSBjbGFzcyB0aGVuIHdlIGNhbm5v\ndCBkZWNsYXJlIGFueQogICAgICAgIC8vIG1vcmUgcHJpbWFyeSBrZXkgZmll\nbGRzOyB0aHVzLCBqdXN0IHVzZSB0aGUgcGFyZW50IGludm9jYXRpb24KICAg\nICAgICBpZiAoaGFzQ29uY3JldGVTdXBlcmNsYXNzKCkgfHwgKGhhc1N1cGVy\nY2xhc3MgJiYgX2ZpZWxkcy5sZW5ndGggPT0gMCkpCiAgICAgICAgICAgIHJl\ndHVybiAiIjsKCiAgICAgICAgQ29kZUZvcm1hdCBjb2RlID0gbmV3Q29kZUZv\ncm1hdCgpOwogICAgICAgIGNvZGUudGFiKCkuYXBwZW5kKCJwdWJsaWMgU3Ry\naW5nIHRvU3RyaW5nIikucGFyZW5zKCkuCiAgICAgICAgICAgIG9wZW5CcmFj\nZSgyKS5lbmRsKCk7CgogICAgICAgIFN0cmluZyBuYW1lOwogICAgICAgIENs\nYXNzIHR5cGU7CiAgICAgICAgU3RyaW5nIGFwcGVuZERlbGltaXRlciA9ICIr\nIFwiIiArIF90b2tlbiArICJcIiArICI7CiAgICAgICAgZm9yIChpbnQgaSA9\nIDA7IGkgPCBfZmllbGRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIC8v\nIGlmIHRoaXMgaXMgbm90IHRoZSBmaXJzdCBmaWVsZCwgYWRkIGEgKwogICAg\nICAgICAgICBpZiAoaSA9PSAwKSB7CiAgICAgICAgICAgICAgICBjb2RlLnRh\nYigyKS5hcHBlbmQoInJldHVybiAiKTsKCiAgICAgICAgICAgICAgICAvLyBh\nZGQgaW4gdGhlIHN1cGVyLnRvU3RyaW5nKCkgaWYgd2UgaGF2ZSBhIHBhcmVu\ndAogICAgICAgICAgICAgICAgaWYgKGhhc1N1cGVyY2xhc3MgJiYgZ2V0RGVj\nbGFyZWRQcmltYXJ5S2V5RmllbGRzCiAgICAgICAgICAgICAgICAgICAgKF9t\nZXRhLmdldFBDU3VwZXJjbGFzc01ldGFEYXRhKCkpLmxlbmd0aCA+IDApIHsK\nICAgICAgICAgICAgICAgICAgICBjb2RlLmFwcGVuZCgic3VwZXIudG9TdHJp\nbmciKS5wYXJlbnMoKTsKICAgICAgICAgICAgICAgICAgICBjb2RlLmVuZGwo\nKS50YWIoMykuYXBwZW5kKGFwcGVuZERlbGltaXRlcik7CiAgICAgICAgICAg\nICAgICB9CiAgICAgICAgICAgIH0gZWxzZQogICAgICAgICAgICAgICAgY29k\nZS5lbmRsKCkudGFiKDMpLmFwcGVuZChhcHBlbmREZWxpbWl0ZXIpOwoKICAg\nICAgICAgICAgbmFtZSA9IF9maWVsZHNbaV0uZ2V0TmFtZSgpOwogICAgICAg\nICAgICB0eXBlID0gX2ZpZWxkc1tpXS5nZXRPYmplY3RJZEZpZWxkVHlwZSgp\nOwogICAgICAgICAgICBpZiAodHlwZSA9PSBTdHJpbmcuY2xhc3MpCiAgICAg\nICAgICAgICAgICBjb2RlLmFwcGVuZChuYW1lKTsKICAgICAgICAgICAgZWxz\nZSBpZiAodHlwZSA9PSBieXRlW10uY2xhc3MpCiAgICAgICAgICAgICAgICBj\nb2RlLmFwcGVuZCgidG9TdHJpbmciKS5vcGVuUGFyZW4odHJ1ZSkuCiAgICAg\nICAgICAgICAgICAgICAgYXBwZW5kKG5hbWUpLmNsb3NlUGFyZW4oKTsKICAg\nICAgICAgICAgZWxzZSBpZiAodHlwZSA9PSBjaGFyW10uY2xhc3MpCiAgICAg\nICAgICAgICAgICBjb2RlLm9wZW5QYXJlbih0cnVlKS5vcGVuUGFyZW4odHJ1\nZSkuYXBwZW5kKG5hbWUpLgogICAgICAgICAgICAgICAgICAgIGFwcGVuZCgi\nID09IG51bGwiKS5jbG9zZVBhcmVuKCkuYXBwZW5kKCIgPyBcIm51bGxcIiIp\nLgogICAgICAgICAgICAgICAgICAgIGFwcGVuZCgiOiBTdHJpbmcudmFsdWVP\nZiIpLm9wZW5QYXJlbih0cnVlKS4KICAgICAgICAgICAgICAgICAgICBhcHBl\nbmQobmFtZSkuY2xvc2VQYXJlbigpLmNsb3NlUGFyZW4oKTsKICAgICAgICAg\nICAgZWxzZSBpZiAodHlwZSA9PSBEYXRlLmNsYXNzKQogICAgICAgICAgICAg\nICAgY29kZS5vcGVuUGFyZW4odHJ1ZSkub3BlblBhcmVuKHRydWUpLmFwcGVu\nZChuYW1lKS4KICAgICAgICAgICAgICAgICAgICBhcHBlbmQoIiA9PSBudWxs\nIikuY2xvc2VQYXJlbigpLmFwcGVuZCgiID8gXCJudWxsXCIiKS4KICAgICAg\nICAgICAgICAgICAgICBlbmRsKCkudGFiKDQpLmFwcGVuZCgiOiBTdHJpbmcu\ndmFsdWVPZiIpLgogICAgICAgICAgICAgICAgICAgIG9wZW5QYXJlbih0cnVl\nKS5hcHBlbmQobmFtZSkuYXBwZW5kKCIuZ2V0VGltZSIpLgogICAgICAgICAg\nICAgICAgICAgIHBhcmVucygpLmNsb3NlUGFyZW4oKS5jbG9zZVBhcmVuKCk7\nCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGNvZGUuYXBwZW5k\nKCJTdHJpbmcudmFsdWVPZiIpLm9wZW5QYXJlbih0cnVlKS4KICAgICAgICAg\nICAgICAgICAgICBhcHBlbmQobmFtZSkuY2xvc2VQYXJlbigpOwogICAgICAg\nIH0KCiAgICAgICAgLy8gbm8gZmllbGRzOyBqdXN0IHVzZSAiIgogICAgICAg\nIGlmIChfZmllbGRzLmxlbmd0aCA9PSAwKQogICAgICAgICAgICBjb2RlLnRh\nYigyKS5hcHBlbmQoInJldHVybiBcIlwiIik7CiAgICAgICAgY29kZS5hcHBl\nbmQoIjsiKS5lbmRsKCk7CiAgICAgICAgY29kZS5jbG9zZUJyYWNlKDIpOwog\nICAgICAgIHJldHVybiBjb2RlLnRvU3RyaW5nKCk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBDb2RlIHRvIGNvbnZlcnQgYSBzdHJpbmcgdG8gYSBieXRlIGFy\ncmF5LgogICAgICoKICAgICAqIEBzZWUgb3JnLmFwYWNoZS5vcGVuanBhLmxp\nYi51dGlsLkJhc2UxNkVuY29kZXIjZGVjb2RlCiAgICAgKi8KICAgIHByaXZh\ndGUgU3RyaW5nIGdldFRvQnl0ZXNCeXRlQXJyYXlDb2RlKCkgewogICAgICAg\nIENvZGVGb3JtYXQgY29kZSA9IG5ld0NvZGVGb3JtYXQoKTsKICAgICAgICBj\nb2RlLnRhYigpLmFwcGVuZCgicHJpdmF0ZSBzdGF0aWMgYnl0ZVtdIHRvQnl0\nZXMiKS5vcGVuUGFyZW4odHJ1ZSkuCiAgICAgICAgICAgIGFwcGVuZCgiU3Ry\naW5nIHMiKS5jbG9zZVBhcmVuKCkub3BlbkJyYWNlKDIpLmVuZGwoKTsKCiAg\nICAgICAgY29kZS50YWIoMikuYXBwZW5kKCJpZiIpLm9wZW5QYXJlbih0cnVl\nKS5hcHBlbmQoIlwibnVsbFwiLmVxdWFscyIpLgogICAgICAgICAgICBvcGVu\nUGFyZW4odHJ1ZSkuYXBwZW5kKCJzIikuY2xvc2VQYXJlbigpLmNsb3NlUGFy\nZW4oKS5lbmRsKCk7CiAgICAgICAgY29kZS50YWIoMykuYXBwZW5kKCJyZXR1\ncm4gbnVsbDsiKS5lbmRsKDIpOwoKICAgICAgICBjb2RlLnRhYigyKS5hcHBl\nbmQoImludCBsZW4gPSBzLmxlbmd0aCIpLnBhcmVucygpLgogICAgICAgICAg\nICBhcHBlbmQoIjsiKS5lbmRsKCk7CiAgICAgICAgY29kZS50YWIoMikuYXBw\nZW5kKCJieXRlW10gciA9IG5ldyBieXRlW2xlbiAvIDJdOyIpLmVuZGwoKTsK\nICAgICAgICBjb2RlLnRhYigyKS5hcHBlbmQoImZvciIpLm9wZW5QYXJlbih0\ncnVlKS4KICAgICAgICAgICAgYXBwZW5kKCJpbnQgaSA9IDA7IGkgPCByLmxl\nbmd0aDsgaSsrIikuY2xvc2VQYXJlbigpLgogICAgICAgICAgICBvcGVuQnJh\nY2UoMykuZW5kbCgpOwogICAgICAgIGNvZGUudGFiKDMpLmFwcGVuZCgiaW50\nIGRpZ2l0MSA9IHMuY2hhckF0Iikub3BlblBhcmVuKHRydWUpLgogICAgICAg\nICAgICBhcHBlbmQoImkgKiAyIikuY2xvc2VQYXJlbigpLmFwcGVuZCgiLCAi\nKS4KICAgICAgICAgICAgYXBwZW5kKCJkaWdpdDIgPSBzLmNoYXJBdCIpLm9w\nZW5QYXJlbih0cnVlKS4KICAgICAgICAgICAgYXBwZW5kKCJpICogMiArIDEi\nKS5jbG9zZVBhcmVuKCkuYXBwZW5kKCI7IikuZW5kbCgpOwogICAgICAgIGNv\nZGUudGFiKDMpLmFwcGVuZCgiaWYiKS5vcGVuUGFyZW4odHJ1ZSkuCiAgICAg\nICAgICAgIGFwcGVuZCgiZGlnaXQxID49ICcwJyAmJiBkaWdpdDEgPD0gJzkn\nIikuY2xvc2VQYXJlbigpLmVuZGwoKTsKICAgICAgICBjb2RlLnRhYig0KS5h\ncHBlbmQoImRpZ2l0MSAtPSAnMCc7IikuZW5kbCgpOwogICAgICAgIGNvZGUu\ndGFiKDMpLmFwcGVuZCgiZWxzZSBpZiIpLm9wZW5QYXJlbih0cnVlKS4KICAg\nICAgICAgICAgYXBwZW5kKCJkaWdpdDEgPj0gJ0EnICYmIGRpZ2l0MSA8PSAn\nRiciKS5jbG9zZVBhcmVuKCkuZW5kbCgpOwogICAgICAgIGNvZGUudGFiKDQp\nLmFwcGVuZCgiZGlnaXQxIC09ICdBJyAtIDEwOyIpLmVuZGwoKTsKICAgICAg\nICBjb2RlLnRhYigzKS5hcHBlbmQoImlmIikub3BlblBhcmVuKHRydWUpLgog\nICAgICAgICAgICBhcHBlbmQoImRpZ2l0MiA+PSAnMCcgJiYgZGlnaXQyIDw9\nICc5JyIpLmNsb3NlUGFyZW4oKS5lbmRsKCk7CiAgICAgICAgY29kZS50YWIo\nNCkuYXBwZW5kKCJkaWdpdDIgLT0gJzAnOyIpLmVuZGwoKTsKICAgICAgICBj\nb2RlLnRhYigzKS5hcHBlbmQoImVsc2UgaWYiKS5vcGVuUGFyZW4odHJ1ZSku\nCiAgICAgICAgICAgIGFwcGVuZCgiZGlnaXQyID49ICdBJyAmJiBkaWdpdDIg\nPD0gJ0YnIikuY2xvc2VQYXJlbigpLmVuZGwoKTsKICAgICAgICBjb2RlLnRh\nYig0KS5hcHBlbmQoImRpZ2l0MiAtPSAnQScgLSAxMDsiKS5lbmRsKDIpOwog\nICAgICAgIGNvZGUudGFiKDMpLmFwcGVuZCgicltpXSA9IChieXRlKSAiKS5v\ncGVuUGFyZW4oZmFsc2UpLgogICAgICAgICAgICBvcGVuUGFyZW4oZmFsc2Up\nLmFwcGVuZCgiZGlnaXQxIDw8IDQiKS5jbG9zZVBhcmVuKCkuCiAgICAgICAg\nICAgIGFwcGVuZCgiICsgZGlnaXQyIikuY2xvc2VQYXJlbigpLmFwcGVuZCgi\nOyIpLmVuZGwoKTsKICAgICAgICBjb2RlLmNsb3NlQnJhY2UoMykuZW5kbCgp\nOwogICAgICAgIGNvZGUudGFiKDIpLmFwcGVuZCgicmV0dXJuIHI7IikuZW5k\nbCgpOwoKICAgICAgICBjb2RlLmNsb3NlQnJhY2UoMik7CiAgICAgICAgcmV0\ndXJuIGNvZGUudG9TdHJpbmcoKTsKICAgIH0KCiAgICAvKioKICAgICAqIENv\nZGUgdG8gY29udmVydCBhIGJ5dGUgYXJyYXkgdG8gYSBzdHJpbmcuCiAgICAg\nKgogICAgICogQHNlZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuQmFz\nZTE2RW5jb2RlciNlbmNvZGUKICAgICAqLwogICAgcHJpdmF0ZSBTdHJpbmcg\nZ2V0VG9TdHJpbmdCeXRlQXJyYXlDb2RlKCkgewogICAgICAgIENvZGVGb3Jt\nYXQgY29kZSA9IG5ld0NvZGVGb3JtYXQoKTsKICAgICAgICBjb2RlLnRhYigp\nLmFwcGVuZCgicHJpdmF0ZSBzdGF0aWMgU3RyaW5nIHRvU3RyaW5nIikub3Bl\nblBhcmVuKHRydWUpLgogICAgICAgICAgICBhcHBlbmQoImJ5dGVbXSBiIiku\nY2xvc2VQYXJlbigpLm9wZW5CcmFjZSgyKS5lbmRsKCk7CgogICAgICAgIGNv\nZGUudGFiKDIpLmFwcGVuZCgiaWYiKS5vcGVuUGFyZW4odHJ1ZSkuCiAgICAg\nICAgICAgIGFwcGVuZCgiYiA9PSBudWxsIikuY2xvc2VQYXJlbigpLmVuZGwo\nKTsKICAgICAgICBjb2RlLnRhYigzKS5hcHBlbmQoInJldHVybiBcIm51bGxc\nIjsiKS5lbmRsKDIpOwoKICAgICAgICBjb2RlLnRhYigyKS5hcHBlbmQoIlN0\ncmluZ0J1ZmZlciByID0gbmV3IFN0cmluZ0J1ZmZlciIpLgogICAgICAgICAg\nICBvcGVuUGFyZW4odHJ1ZSkuYXBwZW5kKCJiLmxlbmd0aCAqIDIiKS5jbG9z\nZVBhcmVuKCkuCiAgICAgICAgICAgIGFwcGVuZCgiOyIpLmVuZGwoKTsKICAg\nICAgICBjb2RlLnRhYigyKS5hcHBlbmQoImZvciIpLm9wZW5QYXJlbih0cnVl\nKS4KICAgICAgICAgICAgYXBwZW5kKCJpbnQgaSA9IDA7IGkgPCBiLmxlbmd0\naDsgaSsrIikuY2xvc2VQYXJlbigpLmVuZGwoKTsKICAgICAgICBjb2RlLnRh\nYigzKS5hcHBlbmQoImZvciIpLm9wZW5QYXJlbih0cnVlKS4KICAgICAgICAg\nICAgYXBwZW5kKCJpbnQgaiA9IDE7IGogPj0gMDsgai0tIikuY2xvc2VQYXJl\nbigpLmVuZGwoKTsKICAgICAgICBjb2RlLnRhYig0KS5hcHBlbmQoInIuYXBw\nZW5kIikub3BlblBhcmVuKHRydWUpLgogICAgICAgICAgICBhcHBlbmQoIkhF\nWFsiKS5vcGVuUGFyZW4oZmFsc2UpLmFwcGVuZCgiYltpXSA+PiAiKS4KICAg\nICAgICAgICAgb3BlblBhcmVuKGZhbHNlKS5hcHBlbmQoImogKiA0IikuY2xv\nc2VQYXJlbigpLmNsb3NlUGFyZW4oKS4KICAgICAgICAgICAgYXBwZW5kKCIg\nJiAweEZdIikuY2xvc2VQYXJlbigpLmFwcGVuZCgiOyIpLmVuZGwoKTsKICAg\nICAgICBjb2RlLnRhYigyKS5hcHBlbmQoInJldHVybiByLnRvU3RyaW5nIiku\ncGFyZW5zKCkuCiAgICAgICAgICAgIGFwcGVuZCgiOyIpLmVuZGwoKTsKCiAg\nICAgICAgY29kZS5jbG9zZUJyYWNlKDIpOwogICAgICAgIHJldHVybiBjb2Rl\nLnRvU3RyaW5nKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDb2RlIHRvIHRl\nc3QgaWYgdHdvIGJ5dGUgYXJyYXlzIGFyZSBlcXVhbC4KICAgICAqLwogICAg\ncHJpdmF0ZSBTdHJpbmcgZ2V0RXF1YWxzQnl0ZUFycmF5Q29kZSgpIHsKICAg\nICAgICBDb2RlRm9ybWF0IGNvZGUgPSBuZXdDb2RlRm9ybWF0KCk7CiAgICAg\nICAgY29kZS50YWIoKS5hcHBlbmQoInByaXZhdGUgc3RhdGljIGJvb2xlYW4g\nZXF1YWxzIikub3BlblBhcmVuKHRydWUpLgogICAgICAgICAgICBhcHBlbmQo\nImJ5dGVbXSBiMSwgYnl0ZVtdIGIyIikuY2xvc2VQYXJlbigpLm9wZW5CcmFj\nZSgyKS5lbmRsKCk7CgogICAgICAgIGNvZGUudGFiKDIpLmFwcGVuZCgiaWYi\nKS5vcGVuUGFyZW4odHJ1ZSkuCiAgICAgICAgICAgIGFwcGVuZCgiYjEgPT0g\nbnVsbCAmJiBiMiA9PSBudWxsIikuY2xvc2VQYXJlbigpLmVuZGwoKTsKICAg\nICAgICBjb2RlLnRhYigzKS5hcHBlbmQoInJldHVybiB0cnVlOyIpLmVuZGwo\nKTsKICAgICAgICBjb2RlLnRhYigyKS5hcHBlbmQoImlmIikub3BlblBhcmVu\nKHRydWUpLgogICAgICAgICAgICBhcHBlbmQoImIxID09IG51bGwgfHwgYjIg\nPT0gbnVsbCIpLmNsb3NlUGFyZW4oKS5lbmRsKCk7CiAgICAgICAgY29kZS50\nYWIoMykuYXBwZW5kKCJyZXR1cm4gZmFsc2U7IikuZW5kbCgpOwogICAgICAg\nIGNvZGUudGFiKDIpLmFwcGVuZCgiaWYiKS5vcGVuUGFyZW4odHJ1ZSkuCiAg\nICAgICAgICAgIGFwcGVuZCgiYjEubGVuZ3RoICE9IGIyLmxlbmd0aCIpLmNs\nb3NlUGFyZW4oKS5lbmRsKCk7CiAgICAgICAgY29kZS50YWIoMykuYXBwZW5k\nKCJyZXR1cm4gZmFsc2U7IikuZW5kbCgpOwogICAgICAgIGNvZGUudGFiKDIp\nLmFwcGVuZCgiZm9yIikub3BlblBhcmVuKHRydWUpLgogICAgICAgICAgICBh\ncHBlbmQoImludCBpID0gMDsgaSA8IGIxLmxlbmd0aDsgaSsrIikuY2xvc2VQ\nYXJlbigpLmVuZGwoKTsKICAgICAgICBjb2RlLnRhYigzKS5hcHBlbmQoImlm\nIikub3BlblBhcmVuKHRydWUpLgogICAgICAgICAgICBhcHBlbmQoImIxW2ld\nICE9IGIyW2ldIikuY2xvc2VQYXJlbigpLmVuZGwoKTsKICAgICAgICBjb2Rl\nLnRhYig0KS5hcHBlbmQoInJldHVybiBmYWxzZTsiKS5lbmRsKCk7CiAgICAg\nICAgY29kZS50YWIoMikuYXBwZW5kKCJyZXR1cm4gdHJ1ZTsiKS5lbmRsKCk7\nCgogICAgICAgIGNvZGUuY2xvc2VCcmFjZSgyKTsKICAgICAgICByZXR1cm4g\nY29kZS50b1N0cmluZygpOwogICAgfQoKICAgIHByaXZhdGUgU3RyaW5nIGdl\ndEhhc2hDb2RlQnl0ZUFycmF5Q29kZSgpIHsKICAgICAgICBDb2RlRm9ybWF0\nIGNvZGUgPSBuZXdDb2RlRm9ybWF0KCk7CiAgICAgICAgY29kZS50YWIoKS5h\ncHBlbmQoInByaXZhdGUgc3RhdGljIGludCBoYXNoQ29kZSIpLm9wZW5QYXJl\nbih0cnVlKS4KICAgICAgICAgICAgYXBwZW5kKCJieXRlW10gYiIpLmNsb3Nl\nUGFyZW4oKS5vcGVuQnJhY2UoMikuZW5kbCgpOwoKICAgICAgICBjb2RlLnRh\nYigyKS5hcHBlbmQoImlmIikub3BlblBhcmVuKHRydWUpLmFwcGVuZCgiYiA9\nPSBudWxsIikuCiAgICAgICAgICAgIGNsb3NlUGFyZW4oKS5lbmRsKCk7CiAg\nICAgICAgY29kZS50YWIoMykuYXBwZW5kKCJyZXR1cm4gMDsiKS5lbmRsKCk7\nCiAgICAgICAgY29kZS50YWIoMikuYXBwZW5kKCJpbnQgc3VtID0gMDsiKS5l\nbmRsKCk7CiAgICAgICAgY29kZS50YWIoMikuYXBwZW5kKCJmb3IiKS5vcGVu\nUGFyZW4odHJ1ZSkuCiAgICAgICAgICAgIGFwcGVuZCgiaW50IGkgPSAwOyBp\nIDwgYi5sZW5ndGg7IGkrKyIpLmNsb3NlUGFyZW4oKS5lbmRsKCk7CiAgICAg\nICAgY29kZS50YWIoMykuYXBwZW5kKCJzdW0gKz0gYltpXTsiKS5lbmRsKCk7\nCiAgICAgICAgY29kZS50YWIoMikuYXBwZW5kKCJyZXR1cm4gc3VtOyIpLmVu\nZGwoKTsKCiAgICAgICAgY29kZS5jbG9zZUJyYWNlKDIpOwogICAgICAgIHJl\ndHVybiBjb2RlLnRvU3RyaW5nKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBD\nb2RlIGRlZmluaW5nIGEgdG9rZW5pemVyIGNsYXNzLgogICAgICovCiAgICBw\ncml2YXRlIFN0cmluZyBnZXRDdXN0b21Ub2tlbml6ZXJDbGFzcygpIHsKICAg\nICAgICBDb2RlRm9ybWF0IGNvZGUgPSBuZXdDb2RlRm9ybWF0KCk7CiAgICAg\nICAgY29kZS50YWIoKS5hcHBlbmQoInByb3RlY3RlZCBzdGF0aWMgY2xhc3Mg\nIikuCiAgICAgICAgICAgIGFwcGVuZChUT0tFTklaRVJfQ1VTVE9NKS5vcGVu\nQnJhY2UoMikuZW5kbCgpOwoKICAgICAgICBjb2RlLnRhYigyKS5hcHBlbmQo\nInByaXZhdGUgZmluYWwgU3RyaW5nIHN0cjsiKS5lbmRsKCk7CiAgICAgICAg\nY29kZS50YWIoMikuYXBwZW5kKCJwcml2YXRlIGludCBsYXN0OyIpLmFmdGVy\nU2VjdGlvbigpOwoKICAgICAgICBjb2RlLnRhYigyKS5hcHBlbmQoInB1Ymxp\nYyBUb2tlbml6ZXIgKFN0cmluZyBzdHIpIikuCiAgICAgICAgICAgIG9wZW5C\ncmFjZSgzKS5lbmRsKCk7CiAgICAgICAgY29kZS50YWIoMykuYXBwZW5kKCJ0\naGlzLnN0ciA9IHN0cjsiKS5lbmRsKCk7CiAgICAgICAgY29kZS5jbG9zZUJy\nYWNlKDMpLmFmdGVyU2VjdGlvbigpOwoKICAgICAgICBjb2RlLnRhYigyKS5h\ncHBlbmQoInB1YmxpYyBTdHJpbmcgbmV4dFRva2VuICgpIikuCiAgICAgICAg\nICAgIG9wZW5CcmFjZSgzKS5lbmRsKCk7CiAgICAgICAgY29kZS50YWIoMyku\nYXBwZW5kKCJpbnQgbmV4dCA9IHN0ci5pbmRleE9mIikub3BlblBhcmVuKHRy\ndWUpLgogICAgICAgICAgICBhcHBlbmQoIlwiIikuYXBwZW5kKF90b2tlbiku\nYXBwZW5kKCJcIiwgbGFzdCIpLmNsb3NlUGFyZW4oKS4KICAgICAgICAgICAg\nYXBwZW5kKCI7IikuZW5kbCgpOwogICAgICAgIGNvZGUudGFiKDMpLmFwcGVu\nZCgiU3RyaW5nIHBhcnQ7IikuZW5kbCgpOwogICAgICAgIGNvZGUudGFiKDMp\nLmFwcGVuZCgiaWYiKS5vcGVuUGFyZW4odHJ1ZSkuYXBwZW5kKCJuZXh0ID09\nIC0xIikuCiAgICAgICAgICAgIGNsb3NlUGFyZW4oKS5vcGVuQnJhY2UoNCku\nZW5kbCgpOwogICAgICAgIGNvZGUudGFiKDQpLmFwcGVuZCgicGFydCA9IHN0\nci5zdWJzdHJpbmciKS5vcGVuUGFyZW4odHJ1ZSkuCiAgICAgICAgICAgIGFw\ncGVuZCgibGFzdCIpLmNsb3NlUGFyZW4oKS5hcHBlbmQoIjsiKS5lbmRsKCk7\nCiAgICAgICAgY29kZS50YWIoNCkuYXBwZW5kKCJsYXN0ID0gc3RyLmxlbmd0\naCIpLnBhcmVucygpLmFwcGVuZCgiOyIpLgogICAgICAgICAgICBlbmRsKCku\nY2xvc2VCcmFjZSg0KTsKICAgICAgICBpZiAoIWNvZGUuZ2V0QnJhY2VPblNh\nbWVMaW5lKCkpCiAgICAgICAgICAgIGNvZGUuZW5kbCgpLnRhYigzKTsKICAg\nICAgICBlbHNlCiAgICAgICAgICAgIGNvZGUuYXBwZW5kKCIgIik7CiAgICAg\nICAgY29kZS5hcHBlbmQoImVsc2UiKS5vcGVuQnJhY2UoNCkuZW5kbCgpOwog\nICAgICAgIGNvZGUudGFiKDQpLmFwcGVuZCgicGFydCA9IHN0ci5zdWJzdHJp\nbmciKS5vcGVuUGFyZW4odHJ1ZSkuCiAgICAgICAgICAgIGFwcGVuZCgibGFz\ndCwgbmV4dCIpLmNsb3NlUGFyZW4oKS5hcHBlbmQoIjsiKS5lbmRsKCk7CiAg\nICAgICAgY29kZS50YWIoNCkuYXBwZW5kKCJsYXN0ID0gbmV4dCArICIpLmFw\ncGVuZChfdG9rZW4ubGVuZ3RoKCkpLgogICAgICAgICAgICBhcHBlbmQoIjsi\nKS5lbmRsKCkuY2xvc2VCcmFjZSg0KS5lbmRsKCk7CgogICAgICAgIGNvZGUu\ndGFiKDMpLmFwcGVuZCgicmV0dXJuIHBhcnQ7IikuZW5kbCgpOwogICAgICAg\nIGNvZGUuY2xvc2VCcmFjZSgzKTsKICAgICAgICBjb2RlLmVuZGwoKS5jbG9z\nZUJyYWNlKDIpOwogICAgICAgIHJldHVybiBjb2RlLnRvU3RyaW5nKCk7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGZpbGUgdGhhdCB0aGlz\nIHRvb2wgc2hvdWxkIG91dHB1dCB0by4KICAgICAqLwogICAgcHJpdmF0ZSBG\naWxlIGdldEZpbGUoKSB7CiAgICAgICAgaWYgKF9tZXRhID09IG51bGwpCiAg\nICAgICAgICAgIHJldHVybiBudWxsOwoKICAgICAgICBTdHJpbmcgcGFja2Fn\nZU5hbWUgPSBTdHJpbmdzLmdldFBhY2thZ2VOYW1lKF9tZXRhLmdldE9iamVj\ndElkVHlwZSgpKTsKICAgICAgICBTdHJpbmcgZmlsZU5hbWUgPSBTdHJpbmdz\nLmdldENsYXNzTmFtZShfbWV0YS5nZXRPYmplY3RJZFR5cGUoKSkKICAgICAg\nICAgICAgKyAiLmphdmEiOwoKICAgICAgICAvLyBpZiBwYyBjbGFzcyBpbiBz\nYW1lIHBhY2thZ2UgYXMgb2lkIGNsYXNzLCB0cnkgdG8gZmluZCBwYyAuamF2\nYSBmaWxlCiAgICAgICAgRmlsZSBkaXIgPSBudWxsOwogICAgICAgIGlmIChf\nZGlyID09IG51bGwgJiYgU3RyaW5ncy5nZXRQYWNrYWdlTmFtZShfdHlwZSku\nZXF1YWxzKHBhY2thZ2VOYW1lKSkgewogICAgICAgICAgICBkaXIgPSBGaWxl\ncy5nZXRTb3VyY2VGaWxlKF90eXBlKTsKICAgICAgICAgICAgaWYgKGRpciAh\nPSBudWxsKQogICAgICAgICAgICAgICAgZGlyID0gZGlyLmdldFBhcmVudEZp\nbGUoKTsKICAgICAgICB9CiAgICAgICAgaWYgKGRpciA9PSBudWxsKQogICAg\nICAgICAgICBkaXIgPSBGaWxlcy5nZXRQYWNrYWdlRmlsZShfZGlyLCBwYWNr\nYWdlTmFtZSwgdHJ1ZSk7CiAgICAgICAgcmV0dXJuIG5ldyBGaWxlKGRpciwg\nZmlsZU5hbWUpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIGEgY29w\neSBvZiB0aGUgY29ycmVjdCBjb2RlIGZvcm1hdC4KICAgICAqLwogICAgcHJp\ndmF0ZSBDb2RlRm9ybWF0IG5ld0NvZGVGb3JtYXQoKSB7CiAgICAgICAgcmV0\ndXJuIChfZm9ybWF0ID09IG51bGwpID8gbmV3IENvZGVGb3JtYXQoKQogICAg\nICAgICAgICA6IChDb2RlRm9ybWF0KSBfZm9ybWF0LmNsb25lKCk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBVc2FnZTogamF2YSBvcmcuYXBhY2hlLm9wZW5q\ncGEuZW5oYW5jZS5BcHBsaWNhdGlvbklkVG9vbCBbb3B0aW9uXSoKICAgICAq\nICZsdDtjbGFzcyBuYW1lIHwgLmphdmEgZmlsZSB8IC5jbGFzcyBmaWxlIHwg\nLmpkbyBmaWxlJmd0OysKICAgICAqICBXaGVyZSB0aGUgZm9sbG93aW5nIG9w\ndGlvbnMgYXJlIHJlY29nbml6ZWQuCiAgICAgKiA8dWw+CiAgICAgKiA8bGk+\nPGk+LXByb3BlcnRpZXMvLXAgJmx0O3Byb3BlcnRpZXMgZmlsZSZndDs8L2k+\nOiBUaGUgcGF0aCB0byBhIE9wZW5KUEEKICAgICAqIHByb3BlcnRpZXMgZmls\nZSBjb250YWluaW5nIGluZm9ybWF0aW9uIGFzIG91dGxpbmVkIGluCiAgICAg\nKiB7QGxpbmsgQ29uZmlndXJhdGlvbn07IG9wdGlvbmFsLjwvbGk+CiAgICAg\nKiA8bGk+PGk+LSZsdDtwcm9wZXJ0eSBuYW1lJmd0OyAmbHQ7cHJvcGVydHkg\ndmFsdWUmZ3Q7PC9pPjogQWxsIGJlYW4KICAgICAqIHByb3BlcnRpZXMgb2Yg\ndGhlIHN0YW5kYXJkIE9wZW5KUEEge0BsaW5rIE9wZW5KUEFDb25maWd1cmF0\naW9ufSBjYW4gYmUKICAgICAqIHNldCBieSB1c2luZyB0aGVpciBuYW1lcyBh\nbmQgc3VwcGx5aW5nIGEgdmFsdWUuPC9saT4KICAgICAqIDxsaT48aT4tZGly\nZWN0b3J5Ly1kICZsdDtvdXRwdXQgZGlyZWN0b3J5Jmd0OzwvaT46IFBhdGgg\ndG8gdGhlIGJhc2UKICAgICAqIHNvdXJjZSBkaXJlY3RvcnkuIFRoZSBwYWNr\nYWdlIHN0cnVjdHVyZSB3aWxsIGJlIGNyZWF0ZWQgYmVuZWF0aAogICAgICog\ndGhpcyBkaXJlY3RvcnkgaWYgbmVjZXNzYXJ5LiBJZiBub3Qgc3BlY2lmaWVk\nLCB0aGUgdG9vbCB3aWxsIHRyeQogICAgICogdG8gbG9jYXRlIHRoZSAuamF2\nYSBmaWxlIGluIHRoZSBDTEFTU1BBVEggYW5kIG91dHB1dCB0byB0aGUgc2Ft\nZQogICAgICogZGlyZWN0b3J5OyBmYWlsaW5nIHRoYXQsIGl0IHdpbGwgdXNl\nIHRoZSBjdXJyZW50IGRpcmVjdG9yeSBhcwogICAgICogdGhlIGJhc2UgZGly\nZWN0b3J5LgogICAgICogPGxpPjxpPi1pZ25vcmVFcnJvcnMvLWkgJmx0O3Ry\ndWUvdCB8IGZhbHNlL2YmZ3Q7PC9pPjogSWYgZmFsc2UsIGFuCiAgICAgKiBl\neGNlcHRpb24gd2lsbCBiZSB0aHJvd24gaWYgdGhlIHRvb2wgZW5jb3VudGVy\ncyBhbnkgY2xhc3MgdGhhdAogICAgICogZG9lcyBub3QgdXNlIGFwcGxpY2F0\naW9uIGlkZW50aXR5IG9yIHVzZXMgdGhlIGlkZW50aXR5IGNsYXNzIG9mCiAg\nICAgKiBpdHMgc3VwZXJjbGFzczsgZGVmYXVsdHMgdG8gdHJ1ZS48L2xpPgog\nICAgICogPGxpPjxpPi10b2tlbi8tdCAmbHQ7dG9rZW4mZ3Q7PC9pPjogVGhl\nIHRva2VuIHRvIHVzZSB0byBzZXBhcmF0ZQogICAgICogc3RpbmdpZmllZCBw\ncmltYXJ5IGtleSBmaWVsZCB2YWx1ZXMgaW4gdGhlIHN0cmluZ2lmaWVkIG9p\nZC48L2xpPgogICAgICogPGxpPjxpPi1uYW1lLy1uICZsdDtpZCBjbGFzcyBu\nYW1lJmd0OzwvaT46IFRoZSBuYW1lIG9mIHRoZSBpZGVudGl0eQogICAgICog\nY2xhc3MgdG8gZ2VuZXJhdGUuIElmIHRoaXMgb3B0aW9uIGlzIHNwZWNpZmll\nZCwgeW91IG11c3Qgb25seQogICAgICogZ2l2ZSBhIHNpbmdsZSBjbGFzcyBh\ncmd1bWVudC4gSWYgdGhlIGNsYXNzIG1ldGFkYXRhIG5hbWVzIGFuIG9iamVj\ndAogICAgICogaWQgY2xhc3MsIHRoaXMgYXJndW1lbnQgaXMgaWdub3JlZC48\nL2xpPgogICAgICogPGxpPjxpPi1zdWZmaXgvLXMgJmx0O2lkIGNsYXNzIHN1\nZmZpeCZndDs8L2k+OiBBIHN0cmluZyB0byBzdWZmaXggZWFjaAogICAgICog\ncGVyc2lzdGVudCBjbGFzcyB3aXRoIHRvIGNyZWF0ZSB0aGUgaWRlbnRpdHkg\nY2xhc3MgbmFtZS4gVGhpcyBpcwogICAgICogb3ZlcnJpZGRlbiBieSA8Y29k\nZT4tbmFtZTwvY29kZT4gb3IgYnkgYW55IGlkZW50aXR5IGNsYXNzIG5hbWUK\nICAgICAqIHNwZWNpZmllZCBpbiBtZXRhZGF0YS48L2xpPgogICAgICogPGxp\nPjxpPi1jb2RlRm9ybWF0Ly1jZi4mbHQ7cHJvcGVydHkgbmFtZSZndDsgJmx0\nOyBwcm9wZXJ0eSB2YWx1ZSZndDs8L2k+CiAgICAgKiA6IEFyZ3VtZW50cyBs\naWtlIHRoaXMgd2lsbCBiZSB1c2VkIHRvIGNvbmZpZ3VyZSB0aGUgYmVhbgog\nICAgICogcHJvcGVydGllcyBvZiB0aGUgaW50ZXJuYWwge0BsaW5rIENvZGVG\nb3JtYXR9LjwvbGk+CiAgICAgKiA8L3VsPgogICAgICogIEVhY2ggYWRkaXRp\nb25hbCBhcmd1bWVudCBjYW4gYmUgZWl0aGVyIHRoZSBmdWxsIGNsYXNzIG5h\nbWUgb2YgdGhlCiAgICAgKiB0eXBlIHRvIGNyZWF0ZSBhbiBpZCBjbGFzcyBm\nb3IsIHRoZSBwYXRoIHRvIHRoZSAuamF2YSBmaWxlIGZvciB0aGUgdHlwZSwK\nICAgICAqIHRoZSBwYXRoIHRvIHRoZSAuY2xhc3MgZmlsZSBmb3IgdGhlIHR5\ncGUsIG9yIHRoZSBwYXRoIHRvIGEgLmpkbyBmaWxlCiAgICAgKiBsaXN0aW5n\nIG9uZSBvciBtb3JlIHR5cGVzLiBJZiBhIC5qYXZhIGZpbGUgYWxyZWFkeSBl\neGlzdHMgZm9yIGFuCiAgICAgKiBhcHBsaWNhdGlvbiBpZCwgaXQgd2lsbCBi\nZSBiYWNrZWQgdXAgdG8gYSBmaWxlIG5hbWVkCiAgICAgKiAmbHQ7b3JpZyBm\naWxlIG5hbWUmZ3Q7fi4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyB2b2lk\nIG1haW4oU3RyaW5nW10gYXJncykKICAgICAgICB0aHJvd3MgSU9FeGNlcHRp\nb24sIENsYXNzTm90Rm91bmRFeGNlcHRpb24gewogICAgICAgIE9wdGlvbnMg\nb3B0cyA9IG5ldyBPcHRpb25zKCk7CiAgICAgICAgYXJncyA9IG9wdHMuc2V0\nRnJvbUNtZExpbmUoYXJncyk7CiAgICAgICAgT3BlbkpQQUNvbmZpZ3VyYXRp\nb24gY29uZiA9IG5ldyBPcGVuSlBBQ29uZmlndXJhdGlvbkltcGwoKTsKICAg\nICAgICB0cnkgewogICAgICAgICAgICBpZiAoIXJ1bihjb25mLCBhcmdzLCBv\ncHRzKSkKICAgICAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihfbG9j\nLmdldCgiYXBwaWQtdXNhZ2UiKSk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAg\nICAgICAgICAgY29uZi5jbG9zZSgpOwogICAgICAgIH0KICAgIH0KCiAgICAv\nKioKICAgICAqIFJ1biB0aGUgYXBwbGljYXRpb24gaWQgdG9vbCB3aXRoIHRo\nZSBnaXZlbiBjb21tYW5kLWxpbmUgYW5kCiAgICAgKiBnaXZlbiBjb25maWd1\ncmF0aW9uLiBSZXR1cm5zIGZhbHNlIGlmIGludmFsaWQgb3B0aW9ucyB3ZXJl\nIGdpdmVuLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGJvb2xlYW4gcnVu\nKE9wZW5KUEFDb25maWd1cmF0aW9uIGNvbmYsIFN0cmluZ1tdIGFyZ3MsCiAg\nICAgICAgT3B0aW9ucyBvcHRzKQogICAgICAgIHRocm93cyBJT0V4Y2VwdGlv\nbiwgQ2xhc3NOb3RGb3VuZEV4Y2VwdGlvbiB7CiAgICAgICAgaWYgKG9wdHMu\nY29udGFpbnNLZXkoImhlbHAiKSB8fCBvcHRzLmNvbnRhaW5zS2V5KCItaGVs\ncCIpKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CgogICAgICAgIEZsYWdz\nIGZsYWdzID0gbmV3IEZsYWdzKCk7CiAgICAgICAgZmxhZ3MuaWdub3JlRXJy\nb3JzID0gb3B0cy5yZW1vdmVCb29sZWFuUHJvcGVydHkKICAgICAgICAgICAg\nKCJpZ25vcmVFcnJvcnMiLCAiaSIsIGZsYWdzLmlnbm9yZUVycm9ycyk7CiAg\nICAgICAgZmxhZ3MuZGlyZWN0b3J5ID0gRmlsZXMuZ2V0RmlsZShvcHRzLnJl\nbW92ZVByb3BlcnR5KCJkaXJlY3RvcnkiLCAiZCIsCiAgICAgICAgICAgIG51\nbGwpLCBudWxsKTsKICAgICAgICBmbGFncy50b2tlbiA9IG9wdHMucmVtb3Zl\nUHJvcGVydHkoInRva2VuIiwgInQiLCBmbGFncy50b2tlbik7CiAgICAgICAg\nZmxhZ3MubmFtZSA9IG9wdHMucmVtb3ZlUHJvcGVydHkoIm5hbWUiLCAibiIs\nIGZsYWdzLm5hbWUpOwogICAgICAgIGZsYWdzLnN1ZmZpeCA9IG9wdHMucmVt\nb3ZlUHJvcGVydHkoInN1ZmZpeCIsICJzIiwgZmxhZ3Muc3VmZml4KTsKCiAg\nICAgICAgLy8gc2VwYXJhdGUgdGhlIHByb3BlcnRpZXMgZm9yIHRoZSBjdXN0\nb21pemVyIGFuZCBjb2RlIGZvcm1hdAogICAgICAgIE9wdGlvbnMgZm9ybWF0\nT3B0cyA9IG5ldyBPcHRpb25zKCk7CiAgICAgICAgTWFwLkVudHJ5IGVudHJ5\nOwogICAgICAgIFN0cmluZyBrZXk7CiAgICAgICAgZm9yIChJdGVyYXRvciBp\ndHIgPSBvcHRzLmVudHJ5U2V0KCkuaXRlcmF0b3IoKTsgaXRyLmhhc05leHQo\nKTspIHsKICAgICAgICAgICAgZW50cnkgPSAoTWFwLkVudHJ5KSBpdHIubmV4\ndCgpOwogICAgICAgICAgICBrZXkgPSAoU3RyaW5nKSBlbnRyeS5nZXRLZXko\nKTsKICAgICAgICAgICAgaWYgKGtleS5zdGFydHNXaXRoKCJjb2RlRm9ybWF0\nLiIpKSB7CiAgICAgICAgICAgICAgICBmb3JtYXRPcHRzLnB1dChrZXkuc3Vi\nc3RyaW5nKDExKSwgZW50cnkuZ2V0VmFsdWUoKSk7CiAgICAgICAgICAgICAg\nICBpdHIucmVtb3ZlKCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoa2V5LnN0\nYXJ0c1dpdGgoImNmLiIpKSB7CiAgICAgICAgICAgICAgICBmb3JtYXRPcHRz\nLnB1dChrZXkuc3Vic3RyaW5nKDMpLCBlbnRyeS5nZXRWYWx1ZSgpKTsKICAg\nICAgICAgICAgICAgIGl0ci5yZW1vdmUoKTsKICAgICAgICAgICAgfQogICAg\nICAgIH0KICAgICAgICBpZiAoIWZvcm1hdE9wdHMuaXNFbXB0eSgpKSB7CiAg\nICAgICAgICAgIGZsYWdzLmZvcm1hdCA9IG5ldyBDb2RlRm9ybWF0KCk7CiAg\nICAgICAgICAgIGZvcm1hdE9wdHMuc2V0SW50byhmbGFncy5mb3JtYXQpOwog\nICAgICAgIH0KCiAgICAgICAgQ29uZmlndXJhdGlvbnMucG9wdWxhdGVDb25m\naWd1cmF0aW9uKGNvbmYsIG9wdHMpOwogICAgICAgIENsYXNzTG9hZGVyIGxv\nYWRlciA9IGNvbmYuZ2V0Q2xhc3NSZXNvbHZlckluc3RhbmNlKCkuCiAgICAg\nICAgICAgIGdldENsYXNzTG9hZGVyKEFwcGxpY2F0aW9uSWRUb29sLmNsYXNz\nLCBudWxsKTsKICAgICAgICByZXR1cm4gcnVuKGNvbmYsIGFyZ3MsIGZsYWdz\nLCBsb2FkZXIpOwogICAgfQoKICAgIC8qKgogICAgICogUnVuIHRoZSB0b29s\nLiBSZXR1cm5zIGZhbHNlIGlmIGludmFsaWQgb3B0aW9ucyB3ZXJlIGdpdmVu\nLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGJvb2xlYW4gcnVuKE9wZW5K\nUEFDb25maWd1cmF0aW9uIGNvbmYsIFN0cmluZ1tdIGFyZ3MsCiAgICAgICAg\nRmxhZ3MgZmxhZ3MsIENsYXNzTG9hZGVyIGxvYWRlcikKICAgICAgICB0aHJv\nd3MgSU9FeGNlcHRpb24sIENsYXNzTm90Rm91bmRFeGNlcHRpb24gewogICAg\nICAgIE1ldGFEYXRhUmVwb3NpdG9yeSByZXBvcyA9IGNvbmYubmV3TWV0YURh\ndGFSZXBvc2l0b3J5SW5zdGFuY2UoKTsKICAgICAgICByZXBvcy5zZXRWYWxp\nZGF0ZShyZXBvcy5WQUxJREFURV9OT05FLCB0cnVlKTsKICAgICAgICBsb2Fk\nT2JqZWN0SWRzKHJlcG9zLCBmbGFncy5uYW1lID09IG51bGwgJiYgZmxhZ3Mu\nc3VmZml4ID09IG51bGwpOwoKICAgICAgICBMb2cgbG9nID0gY29uZi5nZXRM\nb2coT3BlbkpQQUNvbmZpZ3VyYXRpb24uTE9HX1RPT0wpOwogICAgICAgIENv\nbGxlY3Rpb24gY2xhc3NlczsKICAgICAgICBpZiAoYXJncy5sZW5ndGggPT0g\nMCkgewogICAgICAgICAgICBsb2cuaW5mbyhfbG9jLmdldCgicnVubmluZy1h\nbGwtY2xhc3NlcyIpKTsKICAgICAgICAgICAgY2xhc3NlcyA9IHJlcG9zLmxv\nYWRQZXJzaXN0ZW50VHlwZXModHJ1ZSwgbG9hZGVyKTsKICAgICAgICB9IGVs\nc2UgewogICAgICAgICAgICBDbGFzc0FyZ1BhcnNlciBjYXAgPSBjb25mLmdl\ndE1ldGFEYXRhUmVwb3NpdG9yeUluc3RhbmNlKCkuCiAgICAgICAgICAgICAg\nICBnZXRNZXRhRGF0YUZhY3RvcnkoKS5uZXdDbGFzc0FyZ1BhcnNlcigpOwog\nICAgICAgICAgICBjYXAuc2V0Q2xhc3NMb2FkZXIobG9hZGVyKTsKICAgICAg\nICAgICAgY2xhc3NlcyA9IG5ldyBIYXNoU2V0KCk7CiAgICAgICAgICAgIGZv\nciAoaW50IGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykKICAgICAgICAg\nICAgICAgIGNsYXNzZXMuYWRkQWxsKEFycmF5cy5hc0xpc3QoY2FwLnBhcnNl\nVHlwZXMoYXJnc1tpXSkpKTsKICAgICAgICB9CiAgICAgICAgaWYgKGZsYWdz\nLm5hbWUgIT0gbnVsbCAmJiBjbGFzc2VzLnNpemUoKSA+IDEpCiAgICAgICAg\nICAgIHRocm93IG5ldyBVc2VyRXhjZXB0aW9uKF9sb2MuZ2V0KCJuYW1lLW11\nbHQtYXJncyIsIGNsYXNzZXMpKTsKCiAgICAgICAgQXBwbGljYXRpb25JZFRv\nb2wgdG9vbDsKICAgICAgICBDbGFzcyBjbHM7CiAgICAgICAgQ2xhc3NNZXRh\nRGF0YSBtZXRhOwogICAgICAgIEJDQ2xhc3NMb2FkZXIgYmMgPSBuZXcgQkND\nbGFzc0xvYWRlcihuZXcgUHJvamVjdCgpKTsKICAgICAgICBmb3IgKEl0ZXJh\ndG9yIGl0ciA9IGNsYXNzZXMuaXRlcmF0b3IoKTsgaXRyLmhhc05leHQoKTsp\nIHsKICAgICAgICAgICAgY2xzID0gKENsYXNzKSBpdHIubmV4dCgpOwogICAg\nICAgICAgICBsb2cuaW5mbyhfbG9jLmdldCgiYXBwaWQtcnVubmluZyIsIGNs\ncykpOwoKICAgICAgICAgICAgbWV0YSA9IHJlcG9zLmdldE1ldGFEYXRhKGNs\ncywgbnVsbCwgZmFsc2UpOwogICAgICAgICAgICBzZXRPYmplY3RJZFR5cGUo\nbWV0YSwgZmxhZ3MsIGJjKTsKCiAgICAgICAgICAgIHRvb2wgPSBuZXcgQXBw\nbGljYXRpb25JZFRvb2woY29uZiwgY2xzLCBtZXRhKTsKICAgICAgICAgICAg\ndG9vbC5zZXREaXJlY3RvcnkoZmxhZ3MuZGlyZWN0b3J5KTsKICAgICAgICAg\nICAgdG9vbC5zZXRJZ25vcmVFcnJvcnMoZmxhZ3MuaWdub3JlRXJyb3JzKTsK\nICAgICAgICAgICAgdG9vbC5zZXRUb2tlbihmbGFncy50b2tlbik7CiAgICAg\nICAgICAgIHRvb2wuc2V0Q29kZUZvcm1hdChmbGFncy5mb3JtYXQpOwogICAg\nICAgICAgICBpZiAodG9vbC5ydW4oKSkgewogICAgICAgICAgICAgICAgbG9n\nLmluZm8oX2xvYy5nZXQoImFwcGlkLW91dHB1dCIsIHRvb2wuZ2V0RmlsZSgp\nKSk7CiAgICAgICAgICAgICAgICB0b29sLnJlY29yZCgpOwogICAgICAgICAg\nICB9IGVsc2UKICAgICAgICAgICAgICAgIGxvZy5pbmZvKF9sb2MuZ2V0KCJh\ncHBpZC1ub3J1biIpKTsKICAgICAgICB9CiAgICAgICAgYmMuZ2V0UHJvamVj\ndCgpLmNsZWFyKCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBTZXQgdGhlIG9iamVjdCBpZCB0eXBlIG9mIHRoZSBnaXZl\nbiBtZXRhZGF0YS4KICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCBz\nZXRPYmplY3RJZFR5cGUoQ2xhc3NNZXRhRGF0YSBtZXRhLCBGbGFncyBmbGFn\ncywKICAgICAgICBCQ0NsYXNzTG9hZGVyIGJjKQogICAgICAgIHRocm93cyBD\nbGFzc05vdEZvdW5kRXhjZXB0aW9uIHsKICAgICAgICBpZiAobWV0YSA9PSBu\ndWxsIHx8IChtZXRhLmdldE9iamVjdElkVHlwZSgpICE9IG51bGwKICAgICAg\nICAgICAgJiYgKCFtZXRhLmlzT3BlbkpQQUlkZW50aXR5KCkgfHwgZmxhZ3Mu\nbmFtZSA9PSBudWxsKSkKICAgICAgICAgICAgfHwgZ2V0RGVjbGFyZWRQcmlt\nYXJ5S2V5RmllbGRzKG1ldGEpLmxlbmd0aCA9PSAwKQogICAgICAgICAgICBy\nZXR1cm47CgogICAgICAgIENsYXNzIGRlc2MgPSBtZXRhLmdldERlc2NyaWJl\nZFR5cGUoKTsKICAgICAgICBDbGFzcyBjbHMgPSBudWxsOwogICAgICAgIGlm\nIChmbGFncy5uYW1lICE9IG51bGwpCiAgICAgICAgICAgIGNscyA9IGxvYWRD\nbGFzcyhkZXNjLCBmbGFncy5uYW1lLCBiYyk7CiAgICAgICAgZWxzZSBpZiAo\nZmxhZ3Muc3VmZml4ICE9IG51bGwpCiAgICAgICAgICAgIGNscyA9IGxvYWRD\nbGFzcyhkZXNjLCBkZXNjLmdldE5hbWUoKSArIGZsYWdzLnN1ZmZpeCwgYmMp\nOwogICAgICAgIG1ldGEuc2V0T2JqZWN0SWRUeXBlKGNscywgZmFsc2UpOwog\nICAgfQoKICAgIC8qKgogICAgICogTG9hZCB0aGUgZ2l2ZW4gY2xhc3MgbmFt\nZSBldmVuIGlmIGl0IGRvZXMgbm90IGV4aXN0LgogICAgICovCiAgICBwcml2\nYXRlIHN0YXRpYyBDbGFzcyBsb2FkQ2xhc3MoQ2xhc3MgY29udGV4dCwgU3Ry\naW5nIG5hbWUsCiAgICAgICAgQkNDbGFzc0xvYWRlciBiYykKICAgICAgICB0\naHJvd3MgQ2xhc3NOb3RGb3VuZEV4Y2VwdGlvbiB7CiAgICAgICAgaWYgKG5h\nbWUuaW5kZXhPZignLicpID09IC0xICYmIGNvbnRleHQuZ2V0TmFtZSgpLmlu\nZGV4T2YoJy4nKSAhPSAtMSkKICAgICAgICAgICAgbmFtZSA9IFN0cmluZ3Mu\nZ2V0UGFja2FnZU5hbWUoY29udGV4dCkgKyAiLiIgKyBuYW1lOwoKICAgICAg\nICAvLyBmaXJzdCB0cnkgd2l0aCByZWd1bGFyIGNsYXNzIGxvYWRlcgogICAg\nICAgIENsYXNzTG9hZGVyIGxvYWRlciA9IGNvbnRleHQuZ2V0Q2xhc3NMb2Fk\nZXIoKTsKICAgICAgICBpZiAobG9hZGVyID09IG51bGwpCiAgICAgICAgICAg\nIGxvYWRlciA9IFRocmVhZC5jdXJyZW50VGhyZWFkKCkuZ2V0Q29udGV4dENs\nYXNzTG9hZGVyKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJu\nIENsYXNzLmZvck5hbWUobmFtZSwgZmFsc2UsIGxvYWRlcik7CiAgICAgICAg\nfSBjYXRjaCAoVGhyb3dhYmxlIHQpIHsKICAgICAgICB9CgogICAgICAgIC8v\nIGNyZWF0ZSBjbGFzcwogICAgICAgIEJDQ2xhc3Mgb2lkID0gYmMuZ2V0UHJv\namVjdCgpLmxvYWRDbGFzcyhuYW1lLCBudWxsKTsKICAgICAgICBvaWQuYWRk\nRGVmYXVsdENvbnN0cnVjdG9yKCk7CiAgICAgICAgcmV0dXJuIENsYXNzLmZv\nck5hbWUobmFtZSwgZmFsc2UsIGJjKTsKICAgIH0KCiAgICAvKioKICAgICAq\nIFRlbGwgdGhlIG1ldGFkYXRhIGZhY3RvcnkgdG8gbG9hZCBvYmplY3QgaWQg\nY2xhc3NlcyBldmVuIGlmIHRoZXkgZG9uJ3QKICAgICAqIGV4aXN0LgogICAg\nICovCiAgICBwcml2YXRlIHN0YXRpYyB2b2lkIGxvYWRPYmplY3RJZHMoTWV0\nYURhdGFSZXBvc2l0b3J5IHJlcG9zLCBib29sZWFuIGZhdGFsKSB7CiAgICAg\nICAgTWV0YURhdGFGYWN0b3J5IG1kZiA9IHJlcG9zLmdldE1ldGFEYXRhRmFj\ndG9yeSgpOwogICAgICAgIGlmIChtZGYgaW5zdGFuY2VvZiBEZWxlZ2F0aW5n\nTWV0YURhdGFGYWN0b3J5KQogICAgICAgICAgICBtZGYgPSAoKERlbGVnYXRp\nbmdNZXRhRGF0YUZhY3RvcnkpIG1kZikuZ2V0SW5uZXJtb3N0RGVsZWdhdGUo\nKTsKICAgICAgICBpZiAobWRmIGluc3RhbmNlb2YgT2JqZWN0SWRMb2FkZXIp\nCiAgICAgICAgICAgICgoT2JqZWN0SWRMb2FkZXIpIG1kZikuc2V0TG9hZE9i\namVjdElkcygpOwogICAgICAgIGVsc2UgaWYgKGZhdGFsKQogICAgICAgICAg\nICB0aHJvdyBuZXcgSW52YWxpZFN0YXRlRXhjZXB0aW9uKF9sb2MuZ2V0KCJm\nYWN0b3J5LW5vdC1vaWRsb2FkZXIiKSkuCiAgICAgICAgICAgICAgICBzZXRG\nYXRhbCh0cnVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJ1biBmbGFncy4K\nICAgICAqLwogICAgcHVibGljIHN0YXRpYyBjbGFzcyBGbGFncyB7CgogICAg\nICAgIHB1YmxpYyBGaWxlIGRpcmVjdG9yeSA9IG51bGw7CiAgICAgICAgcHVi\nbGljIGJvb2xlYW4gaWdub3JlRXJyb3JzID0gdHJ1ZTsKICAgICAgICBwdWJs\naWMgU3RyaW5nIHRva2VuID0gVE9LRU5fREVGQVVMVDsKICAgICAgICBwdWJs\naWMgQ29kZUZvcm1hdCBmb3JtYXQgPSBudWxsOwogICAgICAgIHB1YmxpYyBT\ndHJpbmcgbmFtZSA9IG51bGw7CiAgICAgICAgcHVibGljIFN0cmluZyBzdWZm\naXggPSBudWxsOwogICAgfQoKICAgIC8qKgogICAgICogSW50ZXJmYWNlIGlt\ncGxlbWVudGVkIGJ5IG1ldGFkYXRhIGZhY3RvcmllcyB0aGF0IGNhbiBsb2Fk\nIG5vbi1leGlzdGFudAogICAgICogb2JqZWN0IGlkIGNsYXNzZXMuCiAgICAg\nKi8KICAgIHB1YmxpYyBzdGF0aWMgaW50ZXJmYWNlIE9iamVjdElkTG9hZGVy\nCgl7CgkJLyoqCgkJICogVHVybiBvbiB0aGUgbG9hZGluZyBvZiBhbGwgaWRl\nbnRpdHkgY2xhc3NlcywgZXZlbiBpZiB0aGV5IGRvbid0IAogICAgICAgICAq\nIGV4aXN0LgoJIAkgKi8KCQlwdWJsaWMgdm9pZCBzZXRMb2FkT2JqZWN0SWRz\nICgpOwoJfQp9Cg==\n","encoding":"base64"}

