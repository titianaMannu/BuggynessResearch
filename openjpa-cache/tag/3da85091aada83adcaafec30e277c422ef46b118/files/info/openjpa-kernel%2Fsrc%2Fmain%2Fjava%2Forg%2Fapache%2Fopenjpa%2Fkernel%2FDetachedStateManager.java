{"sha":"1840aa740fc388c6c52977e6279823c935629c3b","node_id":"MDQ6QmxvYjIwNjM2NDoxODQwYWE3NDBmYzM4OGM2YzUyOTc3ZTYyNzk4MjNjOTM1NjI5YzNi","size":28549,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/1840aa740fc388c6c52977e6279823c935629c3b","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsOwoKaW1wb3J0IGph\ndmEuaW8uSU9FeGNlcHRpb247CmltcG9ydCBqYXZhLmlvLk9iamVjdE91dHB1\ndDsKaW1wb3J0IGphdmEuaW8uU2VyaWFsaXphYmxlOwppbXBvcnQgamF2YS51\ndGlsLkJpdFNldDsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOwppbXBv\ncnQgamF2YS51dGlsLk1hcDsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nZW5oYW5jZS5QZXJzaXN0ZW5jZUNhcGFibGU7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEuZW5oYW5jZS5TdGF0ZU1hbmFnZXI7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmxpYi51dGlsLmNvbmN1cnJlbnQuUmVlbnRyYW50TG9j\nazsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkNsYXNzTWV0YURh\ndGE7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5GaWVsZE1ldGFE\nYXRhOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuSmF2YVR5cGVz\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuVmFsdWVNZXRhRGF0\nYTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLkV4Y2VwdGlvbnM7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5Qcm94eTsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLlVuc3VwcG9ydGVkRXhjZXB0aW9u\nOwoKLyoqCiAqIEludGVybmFsIHN0YXRlIG1hbmFnZXIgZm9yIGRldGFjaGVk\nIGluc3RhbmNlcy4gRG9lcyBub3QgZnVsbHkKICogaW1wbGVtZW50IHtAbGlu\nayBPcGVuSlBBU3RhdGVNYW5hZ2VyfSBjb250cmFjdCB0byBhbGxvdyBmb3Ig\nc2VyaWFsaXphdGlvbi4KICoKICogQGF1dGhvciBTdGV2ZSBLaW0KICogQG5v\namF2YWRvYwogKi8KcHVibGljIGNsYXNzIERldGFjaGVkU3RhdGVNYW5hZ2Vy\nCiAgICBleHRlbmRzIEF0dGFjaFN0cmF0ZWd5CiAgICBpbXBsZW1lbnRzIE9w\nZW5KUEFTdGF0ZU1hbmFnZXIsIFNlcmlhbGl6YWJsZSB7CgogICAgcHJpdmF0\nZSBzdGF0aWMgZmluYWwgTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6ZXIuZm9y\nUGFja2FnZQogICAgICAgIChEZXRhY2hlZFN0YXRlTWFuYWdlci5jbGFzcyk7\nCgogICAgcHJpdmF0ZSBmaW5hbCBQZXJzaXN0ZW5jZUNhcGFibGUgX3BjOwog\nICAgcHJpdmF0ZSBmaW5hbCBib29sZWFuIF9lbWJlZGRlZDsKICAgIHByaXZh\ndGUgZmluYWwgYm9vbGVhbiBfYWNjZXNzOwogICAgcHJpdmF0ZSBmaW5hbCBC\naXRTZXQgX2xvYWRlZDsKICAgIHByaXZhdGUgZmluYWwgQml0U2V0IF9kaXJ0\neTsKICAgIHByaXZhdGUgZmluYWwgT2JqZWN0IF9vaWQ7CiAgICBwcml2YXRl\nIGZpbmFsIE9iamVjdCBfdmVyc2lvbjsKICAgIHByaXZhdGUgZmluYWwgUmVl\nbnRyYW50TG9jayBfbG9jazsKCiAgICAvKioKICAgICAqIENvbnN0cnVjdG9y\nLgogICAgICoKICAgICAqIEBwYXJhbSBwYyB0aGUgbWFuYWdlZCBpbnN0YW5j\nZQogICAgICogQHBhcmFtIHNtIHRoZSBpbnN0YW5jZSdzIHN0YXRlIG1hbmFn\nZXIKICAgICAqIEBwYXJhbSBsb2FkIHRoZSBzZXQgb2YgZGV0YWNoZWQgZmll\nbGQgaW5kZXhlcwogICAgICogQHBhcmFtIGFjY2VzcyB3aGV0aGVyIHRvIGFs\nbG93IGFjY2VzcyB0byB1bmxvYWRlZCBmaWVsZHMKICAgICAqIEBwYXJhbSBt\ndWx0aXRocmVhZGVkIHdoZXRoZXIgdGhlIGluc3RhbmNlIHdpbGwgYmUgdXNl\nZCBjb25jdXJyZW50bHkKICAgICAqIGJ5IG11bHRpcGxlIHRocmVhZHMKICAg\nICAqLwogICAgcHVibGljIERldGFjaGVkU3RhdGVNYW5hZ2VyKFBlcnNpc3Rl\nbmNlQ2FwYWJsZSBwYywgT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwKICAgICAg\nICBCaXRTZXQgbG9hZCwgYm9vbGVhbiBhY2Nlc3MsIGJvb2xlYW4gbXVsdGl0\naHJlYWRlZCkgewogICAgICAgIF9wYyA9IHBjOwogICAgICAgIF9lbWJlZGRl\nZCA9IHNtLmlzRW1iZWRkZWQoKTsKICAgICAgICBfbG9hZGVkID0gbG9hZDsK\nICAgICAgICBfYWNjZXNzID0gYWNjZXNzOwogICAgICAgIF9kaXJ0eSA9IG5l\ndyBCaXRTZXQoX2xvYWRlZC5sZW5ndGgoKSk7CiAgICAgICAgX29pZCA9IHNt\nLmZldGNoT2JqZWN0SWQoKTsKICAgICAgICBfdmVyc2lvbiA9IHNtLmdldFZl\ncnNpb24oKTsKICAgICAgICBpZiAobXVsdGl0aHJlYWRlZCkKICAgICAgICAg\nICAgX2xvY2sgPSBuZXcgUmVlbnRyYW50TG9jaygpOwogICAgICAgIGVsc2UK\nICAgICAgICAgICAgX2xvY2sgPSBudWxsOwogICAgfQoKICAgIC8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgLy8gQXR0YWNoU3RyYXRl\nZ3kgaW1wbGVtZW50YXRpb24KICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLwoKICAgIHB1YmxpYyBPYmplY3QgYXR0YWNoKEF0dGFjaE1h\nbmFnZXIgbWFuYWdlciwgT2JqZWN0IHRvQXR0YWNoLAogICAgICAgIENsYXNz\nTWV0YURhdGEgbWV0YSwgUGVyc2lzdGVuY2VDYXBhYmxlIGludG8sIE9wZW5K\nUEFTdGF0ZU1hbmFnZXIgb3duZXIsCiAgICAgICAgVmFsdWVNZXRhRGF0YSBv\nd25lck1ldGEsIGJvb2xlYW4gZXhwbGljaXQpIHsKICAgICAgICBCcm9rZXJJ\nbXBsIGJyb2tlciA9IG1hbmFnZXIuZ2V0QnJva2VyKCk7CiAgICAgICAgU3Rh\ndGVNYW5hZ2VySW1wbCBzbSA9IG51bGw7CiAgICAgICAgaWYgKF9lbWJlZGRl\nZCkgewogICAgICAgICAgICBpZiAoX2RpcnR5Lmxlbmd0aCAoKSA+IDApCiAg\nICAgICAgICAgICAgICBvd25lci5kaXJ0eShvd25lck1ldGEuZ2V0RmllbGRN\nZXRhRGF0YSgpLmdldEluZGV4KCkpOwogICAgICAgICAgICBzbSA9IChTdGF0\nZU1hbmFnZXJJbXBsKSBicm9rZXIuZW1iZWQoX3BjLCBfb2lkLCBvd25lciwg\nb3duZXJNZXRhKTsKICAgICAgICAgICAgKChQZXJzaXN0ZW5jZUNhcGFibGUp\nIHRvQXR0YWNoKS5wY1JlcGxhY2VTdGF0ZU1hbmFnZXIodGhpcyk7CiAgICAg\nICAgfSBlbHNlIHsKICAgICAgICAgICAgUENTdGF0ZSBzdGF0ZSA9IChfZGly\ndHkubGVuZ3RoKCkgPiAwKSA/IFBDU3RhdGUuUERJUlRZCiAgICAgICAgICAg\nICAgICA6IFBDU3RhdGUuUENMRUFOOwogICAgICAgICAgICBzbSA9IChTdGF0\nZU1hbmFnZXJJbXBsKSBicm9rZXIuY29weSh0aGlzLCBzdGF0ZSk7CiAgICAg\nICAgfQogICAgICAgIFBlcnNpc3RlbmNlQ2FwYWJsZSBwYyA9IHNtLmdldFBl\ncnNpc3RlbmNlQ2FwYWJsZSgpOwogICAgICAgIG1hbmFnZXIuc2V0QXR0YWNo\nZWRDb3B5KHRvQXR0YWNoLCBwYyk7CgogICAgICAgIG1hbmFnZXIuZmlyZUJl\nZm9yZUF0dGFjaCh0b0F0dGFjaCwgbWV0YSk7CgogICAgICAgIC8vIHByZS1s\nb2FkIGZvciBlZmZpY2llbmN5OiBjdXJyZW50IGZpZWxkIHZhbHVlcyBmb3Ig\ncmVzdG9yZSwgZGVwZW5kZW50CiAgICAgICAgLy8gZm9yIGRlbGV0ZQogICAg\nICAgIEZpZWxkTWV0YURhdGFbXSBmaWVsZHMgPSBtZXRhLmdldEZpZWxkcygp\nOwogICAgICAgIGludCByZXN0b3JlID0gYnJva2VyLmdldFJlc3RvcmVTdGF0\nZSgpOwogICAgICAgIGlmIChfZGlydHkubGVuZ3RoKCkgPiAwKSB7CiAgICAg\nICAgICAgIEJpdFNldCBsb2FkID0gbmV3IEJpdFNldChmaWVsZHMubGVuZ3Ro\nKTsKICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBmaWVsZHMubGVu\nZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIGlmICghX2RpcnR5LmdldChp\nKSkKICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKCiAgICAgICAgICAg\nICAgICBzd2l0Y2ggKGZpZWxkc1tpXS5nZXREZWNsYXJlZFR5cGVDb2RlKCkp\nIHsKICAgICAgICAgICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5BUlJBWToK\nICAgICAgICAgICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5DT0xMRUNUSU9O\nOgogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdG9yZSA9PSBSZXN0\nb3JlU3RhdGUuUkVTVE9SRV9BTEwKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIHx8IGZpZWxkc1tpXS5nZXRFbGVtZW50KCkuZ2V0Q2FzY2FkZURlbGV0\nZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA9PSBWYWx1ZU1ldGFE\nYXRhLkNBU0NBREVfQVVUTykKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIGxvYWQuc2V0KGkpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsK\nICAgICAgICAgICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5NQVA6CiAgICAg\nICAgICAgICAgICAgICAgICAgIGlmIChyZXN0b3JlID09IFJlc3RvcmVTdGF0\nZS5SRVNUT1JFX0FMTAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwg\nZmllbGRzW2ldLmdldEVsZW1lbnQoKS5nZXRDYXNjYWRlRGVsZXRlKCkKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgID09IFZhbHVlTWV0YURhdGEuQ0FT\nQ0FERV9BVVRPCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCBmaWVs\nZHNbaV0uZ2V0S2V5KCkuZ2V0Q2FzY2FkZURlbGV0ZSgpCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICA9PSBWYWx1ZU1ldGFEYXRhLkNBU0NBREVfQVVU\nTykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWQuc2V0KGkpOwog\nICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAg\nICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVz\ndG9yZSAhPSBSZXN0b3JlU3RhdGUuUkVTVE9SRV9OT05FCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICB8fCBmaWVsZHNbaV0uZ2V0Q2FzY2FkZURlbGV0\nZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA9PSBWYWx1ZU1ldGFE\nYXRhLkNBU0NBREVfQVVUTykKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIGxvYWQuc2V0KGkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9\nCiAgICAgICAgICAgIEZldGNoQ29uZmlndXJhdGlvbiBmYyA9IGJyb2tlci5n\nZXRGZXRjaENvbmZpZ3VyYXRpb24oKTsKICAgICAgICAgICAgc20ubG9hZEZp\nZWxkcyhsb2FkLCBmYywgZmMuZ2V0V3JpdGVMb2NrTGV2ZWwoKSwgbnVsbCwg\ndHJ1ZSk7CiAgICAgICAgfSAgICAgICAgCiAgICAgICAgT2JqZWN0IG9yaWdW\nZXJzaW9uID0gc20uZ2V0VmVyc2lvbigpOwogICAgICAgIHNtLnNldFZlcnNp\nb24oX3ZlcnNpb24pOwoKICAgICAgICBCaXRTZXQgbG9hZGVkID0gc20uZ2V0\nTG9hZGVkKCk7CiAgICAgICAgaW50IHNldCA9IFN0YXRlTWFuYWdlci5TRVRf\nQVRUQUNIOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZmllbGRzLmxl\nbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmICghX2xvYWRlZC5nZXQoaSkp\nCiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgLy8gZG9u\nJ3QgcmVsb2FkIGFscmVhZHkgbG9hZGVkIG5vbi1tdXRhYmxlIG9iamVjdHMK\nICAgICAgICAgICAgaWYgKCFfZGlydHkuZ2V0KGkpICYmIGxvYWRlZC5nZXQo\naSkgJiYgaWdub3JlTG9hZGVkKGZpZWxkc1tpXSkpCiAgICAgICAgICAgICAg\nICBjb250aW51ZTsKCiAgICAgICAgICAgIHByb3ZpZGVGaWVsZChpKTsKICAg\nICAgICAgICAgc3dpdGNoIChmaWVsZHNbaV0uZ2V0RGVjbGFyZWRUeXBlQ29k\nZSgpKSB7CiAgICAgICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5CT09MRUFO\nOgogICAgICAgICAgICAgICAgICAgIGlmIChfZGlydHkuZ2V0KGkpKQogICAg\nICAgICAgICAgICAgICAgICAgICBzbS5zZXR0aW5nQm9vbGVhbkZpZWxkKHBj\nLCBpLCAoIWxvYWRlZC5nZXQoaSkpID8gZmFsc2UKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgIDogc20uZmV0Y2hCb29sZWFuRmllbGQoaSksIGxvbmd2\nYWwgPT0gMSwgc2V0KTsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAg\nICAgICAgICAgICAgICAgICAgIHNtLnN0b3JlQm9vbGVhbkZpZWxkKGksIGxv\nbmd2YWwgPT0gMSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAg\nICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5CWVRFOgogICAgICAgICAgICAg\nICAgICAgIGlmIChfZGlydHkuZ2V0KGkpKQogICAgICAgICAgICAgICAgICAg\nICAgICBzbS5zZXR0aW5nQnl0ZUZpZWxkKHBjLCBpLCAoIWxvYWRlZC5nZXQo\naSkpID8gKGJ5dGUpIDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDog\nc20uZmV0Y2hCeXRlRmllbGQoaSksIChieXRlKSBsb25ndmFsLCBzZXQpOwog\nICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAg\nICAgc20uc3RvcmVCeXRlRmllbGQoaSwgKGJ5dGUpIGxvbmd2YWwpOwogICAg\nICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSBK\nYXZhVHlwZXMuQ0hBUjoKICAgICAgICAgICAgICAgICAgICBpZiAoX2RpcnR5\nLmdldChpKSkKICAgICAgICAgICAgICAgICAgICAgICAgc20uc2V0dGluZ0No\nYXJGaWVsZChwYywgaSwgKCFsb2FkZWQuZ2V0KGkpKSA/IChjaGFyKSAwCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICA6IHNtLmZldGNoQ2hhckZpZWxk\nKGkpLCAoY2hhcikgbG9uZ3ZhbCwgc2V0KTsKICAgICAgICAgICAgICAgICAg\nICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHNtLnN0b3JlQ2hhckZp\nZWxkKGksIChjaGFyKSBsb25ndmFsKTsKICAgICAgICAgICAgICAgICAgICBi\ncmVhazsKICAgICAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLklOVDoKICAg\nICAgICAgICAgICAgICAgICBpZiAoX2RpcnR5LmdldChpKSkKICAgICAgICAg\nICAgICAgICAgICAgICAgc20uc2V0dGluZ0ludEZpZWxkKHBjLCBpLCAoIWxv\nYWRlZC5nZXQoaSkpID8gMAogICAgICAgICAgICAgICAgICAgICAgICAgICAg\nOiBzbS5mZXRjaEludEZpZWxkKGkpLCAoaW50KSBsb25ndmFsLCBzZXQpOwog\nICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAg\nICAgc20uc3RvcmVJbnRGaWVsZChpLCAoaW50KSBsb25ndmFsKTsKICAgICAg\nICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgSmF2\nYVR5cGVzLkxPTkc6CiAgICAgICAgICAgICAgICAgICAgaWYgKF9kaXJ0eS5n\nZXQoaSkpCiAgICAgICAgICAgICAgICAgICAgICAgIHNtLnNldHRpbmdMb25n\nRmllbGQocGMsIGksICghbG9hZGVkLmdldChpKSkgPyAwTAogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgOiBzbS5mZXRjaExvbmdGaWVsZChpKSwgbG9u\nZ3ZhbCwgc2V0KTsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAg\nICAgICAgICAgICAgICAgIHNtLnN0b3JlTG9uZ0ZpZWxkKGksIGxvbmd2YWwp\nOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAg\nY2FzZSBKYXZhVHlwZXMuU0hPUlQ6CiAgICAgICAgICAgICAgICAgICAgaWYg\nKF9kaXJ0eS5nZXQoaSkpCiAgICAgICAgICAgICAgICAgICAgICAgIHNtLnNl\ndHRpbmdTaG9ydEZpZWxkKHBjLCBpLCAoIWxvYWRlZC5nZXQoaSkpID8gKHNo\nb3J0KSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHNtLmZldGNo\nU2hvcnRGaWVsZChpKSwgKHNob3J0KSBsb25ndmFsLCBzZXQpOwogICAgICAg\nICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgc20u\nc3RvcmVTaG9ydEZpZWxkKGksIChzaG9ydCkgbG9uZ3ZhbCk7CiAgICAgICAg\nICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIEphdmFU\neXBlcy5GTE9BVDoKICAgICAgICAgICAgICAgICAgICBpZiAoX2RpcnR5Lmdl\ndChpKSkKICAgICAgICAgICAgICAgICAgICAgICAgc20uc2V0dGluZ0Zsb2F0\nRmllbGQocGMsIGksICghbG9hZGVkLmdldChpKSkgPyAwRgogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgOiBzbS5mZXRjaEZsb2F0RmllbGQoaSksIChm\nbG9hdCkgZGJsdmFsLCBzZXQpOwogICAgICAgICAgICAgICAgICAgIGVsc2UK\nICAgICAgICAgICAgICAgICAgICAgICAgc20uc3RvcmVGbG9hdEZpZWxkKGks\nIChmbG9hdCkgZGJsdmFsKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsK\nICAgICAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkRPVUJMRToKICAgICAg\nICAgICAgICAgICAgICBpZiAoX2RpcnR5LmdldChpKSkKICAgICAgICAgICAg\nICAgICAgICAgICAgc20uc2V0dGluZ0RvdWJsZUZpZWxkKHBjLCBpLCAoIWxv\nYWRlZC5nZXQoaSkpID8gMEQKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIDogc20uZmV0Y2hEb3VibGVGaWVsZChpKSwgZGJsdmFsLCBzZXQpOwogICAg\nICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAg\nc20uc3RvcmVEb3VibGVGaWVsZChpLCBkYmx2YWwpOwogICAgICAgICAgICAg\nICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMu\nU1RSSU5HOgogICAgICAgICAgICAgICAgICAgIGlmIChfZGlydHkuZ2V0KGkp\nKQogICAgICAgICAgICAgICAgICAgICAgICBzbS5zZXR0aW5nU3RyaW5nRmll\nbGQocGMsIGksICghbG9hZGVkLmdldChpKSkgPyBudWxsCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICA6IHNtLmZldGNoU3RyaW5nRmllbGQoaSksIChT\ndHJpbmcpIG9ianZhbCwgc2V0KTsKICAgICAgICAgICAgICAgICAgICBlbHNl\nCiAgICAgICAgICAgICAgICAgICAgICAgIHNtLnN0b3JlU3RyaW5nRmllbGQo\naSwgKFN0cmluZykgb2JqdmFsKTsKICAgICAgICAgICAgICAgICAgICBvYmp2\nYWwgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAg\nICAgICAgICAgY2FzZSBKYXZhVHlwZXMuUEM6CiAgICAgICAgICAgICAgICBj\nYXNlIEphdmFUeXBlcy5QQ19VTlRZUEVEOgogICAgICAgICAgICAgICAgICAg\nIGlmIChmaWVsZHNbaV0uZ2V0Q2FzY2FkZUF0dGFjaCgpID09IFZhbHVlTWV0\nYURhdGEKICAgICAgICAgICAgICAgICAgICAgICAgLkNBU0NBREVfTk9ORSkK\nICAgICAgICAgICAgICAgICAgICAgICAgb2JqdmFsID0gZ2V0UmVmZXJlbmNl\nKG1hbmFnZXIsIG9ianZhbCwgc20sIGZpZWxkc1tpXSk7CiAgICAgICAgICAg\nICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFBlcnNp\nc3RlbmNlQ2FwYWJsZSB0b1BDID0gbnVsbDsKICAgICAgICAgICAgICAgICAg\nICAgICAgaWYgKG9ianZhbCAhPSBudWxsICYmIGZpZWxkc1tpXS5pc0VtYmVk\nZGVkUEMoKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvUEMgPSAo\nUGVyc2lzdGVuY2VDYXBhYmxlKSBvYmp2YWw7CiAgICAgICAgICAgICAgICAg\nICAgICAgIG9ianZhbCA9IG1hbmFnZXIuYXR0YWNoKG9ianZhbCwgdG9QQywg\nc20sIGZpZWxkc1tpXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZh\nbHNlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAg\nICAgaWYgKF9kaXJ0eS5nZXQoaSkpCiAgICAgICAgICAgICAgICAgICAgICAg\nIHNtLnNldHRpbmdPYmplY3RGaWVsZChwYywgaSwgKCFsb2FkZWQuZ2V0KGkp\nKSA/IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogc20uZmV0\nY2hPYmplY3RGaWVsZChpKSwgb2JqdmFsLCBzZXQpOwogICAgICAgICAgICAg\nICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgc20uc3RvcmVP\nYmplY3RGaWVsZChpLCBvYmp2YWwpOwogICAgICAgICAgICAgICAgICAgIG9i\nanZhbCA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAg\nICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5DT0xMRUNUSU9OOgogICAgICAg\nICAgICAgICAgICAgIENvbGxlY3Rpb24gY29sbCA9IChDb2xsZWN0aW9uKSBv\nYmp2YWw7CiAgICAgICAgICAgICAgICAgICAgb2JqdmFsID0gbnVsbDsKICAg\nICAgICAgICAgICAgICAgICBpZiAoY29sbCAhPSBudWxsKQogICAgICAgICAg\nICAgICAgICAgICAgICBjb2xsID0gYXR0YWNoQ29sbGVjdGlvbihtYW5hZ2Vy\nLCBjb2xsLCBzbSwgZmllbGRzW2ldKTsKICAgICAgICAgICAgICAgICAgICBp\nZiAoX2RpcnR5LmdldChpKSkKICAgICAgICAgICAgICAgICAgICAgICAgc20u\nc2V0dGluZ09iamVjdEZpZWxkKHBjLCBpLCAoIWxvYWRlZC5nZXQoaSkpID8g\nbnVsbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBzbS5mZXRjaE9i\namVjdEZpZWxkKGkpLCBjb2xsLCBzZXQpOwogICAgICAgICAgICAgICAgICAg\nIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgc20uc3RvcmVPYmplY3RG\naWVsZChpLCBjb2xsKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAg\nICAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLk1BUDoKICAgICAgICAgICAg\nICAgICAgICBNYXAgbWFwID0gKE1hcCkgb2JqdmFsOwogICAgICAgICAgICAg\nICAgICAgIG9ianZhbCA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgaWYg\nKG1hcCAhPSBudWxsKQogICAgICAgICAgICAgICAgICAgICAgICBtYXAgPSBh\ndHRhY2hNYXAobWFuYWdlciwgbWFwLCBzbSwgZmllbGRzW2ldKTsKICAgICAg\nICAgICAgICAgICAgICBpZiAoX2RpcnR5LmdldChpKSkKICAgICAgICAgICAg\nICAgICAgICAgICAgc20uc2V0dGluZ09iamVjdEZpZWxkKHBjLCBpLCAoIWxv\nYWRlZC5nZXQoaSkpID8gbnVsbAogICAgICAgICAgICAgICAgICAgICAgICAg\nICAgOiBzbS5mZXRjaE9iamVjdEZpZWxkKGkpLCBtYXAsIHNldCk7CiAgICAg\nICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBz\nbS5zdG9yZU9iamVjdEZpZWxkKGksIG1hcCk7CiAgICAgICAgICAgICAgICAg\nICAgYnJlYWs7CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAg\nICAgICAgICAgIGlmIChfZGlydHkuZ2V0KGkpKQogICAgICAgICAgICAgICAg\nICAgICAgICBzbS5zZXR0aW5nT2JqZWN0RmllbGQocGMsIGksICghbG9hZGVk\nLmdldChpKSkgPyBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6\nIHNtLmZldGNoT2JqZWN0RmllbGQoaSksIG9ianZhbCwgc2V0KTsKICAgICAg\nICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHNt\nLnN0b3JlT2JqZWN0RmllbGQoaSwgb2JqdmFsKTsKICAgICAgICAgICAgICAg\nICAgICBvYmp2YWwgPSBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgfQog\nICAgICAgIHBjLnBjUmVwbGFjZVN0YXRlTWFuYWdlcihzbSk7CgogICAgICAg\nIC8vIGlmIHdlIHdlcmUgY2xlYW4gYXQgbGVhc3QgbWFrZSBzdXJlIGEgdmVy\nc2lvbiBjaGVjayBpcyBkb25lIHRvCiAgICAgICAgLy8gcHJldmVudCB1c2lu\nZyBvbGQgc3RhdGUKICAgICAgICBpZiAoIXNtLmlzVmVyc2lvbkNoZWNrUmVx\ndWlyZWQoKSAmJiBicm9rZXIuaXNBY3RpdmUoKQogICAgICAgICAgICAmJiBf\ndmVyc2lvbiAhPSBvcmlnVmVyc2lvbiAmJiAob3JpZ1ZlcnNpb24gPT0gbnVs\nbCAKICAgICAgICAgICAgfHwgYnJva2VyLmdldFN0b3JlTWFuYWdlcigpLmNv\nbXBhcmVWZXJzaW9uKHNtLCBfdmVyc2lvbiwgCiAgICAgICAgICAgIG9yaWdW\nZXJzaW9uKSAhPSBTdG9yZU1hbmFnZXIuVkVSU0lPTl9TQU1FKSkgewogICAg\nICAgICAgICBicm9rZXIudHJhbnNhY3Rpb25hbChzbS5nZXRNYW5hZ2VkSW5z\ndGFuY2UoKSwgZmFsc2UsIAogICAgICAgICAgICAgICAgbWFuYWdlci5nZXRC\nZWhhdmlvcigpKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBzbS5nZXRN\nYW5hZ2VkSW5zdGFuY2UoKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgT2JqZWN0\nIGdldERldGFjaGVkT2JqZWN0SWQoQXR0YWNoTWFuYWdlciBtYW5hZ2VyLAog\nICAgICAgIE9iamVjdCB0b0F0dGFjaCkgewogICAgICAgIHJldHVybiBfb2lk\nOwogICAgfQoKICAgIHZvaWQgcHJvdmlkZUZpZWxkKGludCBmaWVsZCkgewog\nICAgICAgIF9wYy5wY1Byb3ZpZGVGaWVsZChmaWVsZCk7CiAgICB9CgogICAg\ncHJvdGVjdGVkIHZvaWQgcHJvdmlkZUZpZWxkKE9iamVjdCB0b0F0dGFjaCwg\nU3RhdGVNYW5hZ2VySW1wbCBzbSwKICAgICAgICBpbnQgZmllbGQpIHsKICAg\nICAgICBwcm92aWRlRmllbGQoZmllbGQpOwogICAgfQoKICAgIC8qKgogICAg\nICogSWdub3JlIGlmIHRoZSBmaWVsZCBpcyBub3QgZGlydHkgYnV0IGxvYWRl\nZAogICAgICovCiAgICBwcm90ZWN0ZWQgc3RhdGljIGJvb2xlYW4gaWdub3Jl\nTG9hZGVkKEZpZWxkTWV0YURhdGEgZm1kKSB7CiAgICAgICAgc3dpdGNoIChm\nbWQuZ2V0VHlwZUNvZGUoKSkgewogICAgICAgICAgICBjYXNlIEphdmFUeXBl\ncy5CT09MRUFOOgogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5CT09MRUFO\nX09CSjoKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuQllURToKICAgICAg\nICAgICAgY2FzZSBKYXZhVHlwZXMuQllURV9PQko6CiAgICAgICAgICAgIGNh\nc2UgSmF2YVR5cGVzLklOVDoKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMu\nSU5UX09CSjoKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuTE9ORzoKICAg\nICAgICAgICAgY2FzZSBKYXZhVHlwZXMuTE9OR19PQko6CiAgICAgICAgICAg\nIGNhc2UgSmF2YVR5cGVzLlNIT1JUOgogICAgICAgICAgICBjYXNlIEphdmFU\neXBlcy5TSE9SVF9PQko6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkRP\nVUJMRToKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuRE9VQkxFX09CSjoK\nICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuRkxPQVQ6CiAgICAgICAgICAg\nIGNhc2UgSmF2YVR5cGVzLkZMT0FUX09CSjoKICAgICAgICAgICAgY2FzZSBK\nYXZhVHlwZXMuQ0hBUjoKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuQ0hB\nUl9PQko6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLlNUUklORzoKICAg\nICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICBy\nZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLwogICAgLy8gU3RhdGVNYW5hZ2VyIGltcGxlbWVudGF0aW9u\nCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgogICAgcHVi\nbGljIE9iamVjdCBnZXRHZW5lcmljQ29udGV4dCgpIHsKICAgICAgICByZXR1\ncm4gbnVsbDsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IGdldFBDUHJpbWFy\neUtleShPYmplY3Qgb2lkLCBpbnQgZmllbGQpIHsKICAgICAgICB0aHJvdyBu\nZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsKICAgIH0KCiAg\nICBwdWJsaWMgU3RhdGVNYW5hZ2VyIHJlcGxhY2VTdGF0ZU1hbmFnZXIoU3Rh\ndGVNYW5hZ2VyIHNtKSB7CiAgICAgICAgcmV0dXJuIHNtOwogICAgfQoKICAg\nIHB1YmxpYyBPYmplY3QgZ2V0VmVyc2lvbigpIHsKICAgICAgICByZXR1cm4g\nX3ZlcnNpb247CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0VmVyc2lvbihP\nYmplY3QgdmVyc2lvbikgewogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRl\nZEV4Y2VwdGlvbigpOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGlzRGly\ndHkoKSB7CiAgICAgICAgcmV0dXJuIF9kaXJ0eS5sZW5ndGgoKSAhPSAwOwog\nICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGlzVHJhbnNhY3Rpb25hbCgpIHsK\nICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgcHVibGljIGJvb2xl\nYW4gaXNQZXJzaXN0ZW50KCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAg\nIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBpc05ldygpIHsKICAgICAgICByZXR1\ncm4gZmFsc2U7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gaXNEZWxldGVk\nKCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBwdWJsaWMg\nYm9vbGVhbiBpc0RldGFjaGVkKCkgewogICAgICAgIHJldHVybiB0cnVlOwog\nICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGlzVmVyc2lvblVwZGF0ZVJlcXVp\ncmVkKCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBwdWJs\naWMgYm9vbGVhbiBpc1ZlcnNpb25DaGVja1JlcXVpcmVkKCkgewogICAgICAg\nIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBkaXJ0eShT\ndHJpbmcgZmllbGQpIHsKICAgICAgICAvLyBzaG91bGQgd2Ugc3RvcmUgQ2xh\nc3NNZXRhRGF0YT8KICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRFeGNl\ncHRpb24oKTsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IGZldGNoT2JqZWN0\nSWQoKSB7CiAgICAgICAgcmV0dXJuIF9vaWQ7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgYWNjZXNzaW5nRmllbGQoaW50IGlkeCkgewogICAgICAgIGlmICgh\nX2FjY2VzcyAmJiAhX2xvYWRlZC5nZXQoaWR4KSkKICAgICAgICAJLy8gZG8g\nbm90IGFjY2VzcyB0aGUgcGMgZmllbGRzIGJ5IGltcGxpY3RseSBpbnZva2lu\nZyBfcGMudG9TdHJpbmcoKQogICAgICAgIAkvLyBtYXkgY2F1c2UgaW5maW5p\ndGUgbG9vcCBpZiBhZ2FpbiB0cmllcyB0byBhY2Nlc3MgdW5sb2FkZWQgZmll\nbGQgCiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRp\nb24oX2xvYy5nZXQoInVubG9hZGVkLWRldGFjaGVkIiwKICAgICAgICAgICAg\nICAgRXhjZXB0aW9ucy50b1N0cmluZyhfcGMpKS5nZXRNZXNzYWdlKCkpOwog\nICAgfQoKICAgIHB1YmxpYyBib29sZWFuIHNlcmlhbGl6aW5nKCkgewogICAg\nICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiB3\ncml0ZURldGFjaGVkKE9iamVjdE91dHB1dCBvdXQpCiAgICAgICAgdGhyb3dz\nIElPRXhjZXB0aW9uIHsKICAgICAgICBvdXQud3JpdGVPYmplY3QoX3BjLnBj\nR2V0RGV0YWNoZWRTdGF0ZSgpKTsKICAgICAgICBvdXQud3JpdGVPYmplY3Qo\ndGhpcyk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHByb3h5RGV0YWNoZWREZXNlcmlhbGl6ZWQoaW50IGlkeCkgewog\nICAgICAgIGxvY2soKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBfcGMu\ncGNQcm92aWRlRmllbGQoaWR4KTsKICAgICAgICAgICAgaWYgKG9ianZhbCBp\nbnN0YW5jZW9mIFByb3h5KQogICAgICAgICAgICAgICAgKChQcm94eSkgb2Jq\ndmFsKS5zZXRPd25lcih0aGlzLCBpZHgpOwogICAgICAgICAgICBvYmp2YWwg\nPSBudWxsOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIHVubG9j\naygpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXR0aW5n\nQm9vbGVhbkZpZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywgaW50IGlkeCwK\nICAgICAgICBib29sZWFuIGN1ciwgYm9vbGVhbiBuZXh0LCBpbnQgc2V0KSB7\nCiAgICAgICAgYWNjZXNzaW5nRmllbGQoaWR4KTsKICAgICAgICBpZiAoY3Vy\nID09IG5leHQgfHwgIV9sb2FkZWQuZ2V0KGlkeCkpCiAgICAgICAgICAgIHJl\ndHVybjsKICAgICAgICBsb2NrKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgX2RpcnR5LnNldChpZHgpOwogICAgICAgICAgICBsb25ndmFsID0gbmV4\ndCA/IDEgOiAwOwogICAgICAgICAgICBwYy5wY1JlcGxhY2VGaWVsZChpZHgp\nOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIHVubG9jaygpOwog\nICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXR0aW5nQ2hhckZp\nZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywgaW50IGlkeCwgY2hhciBjdXIs\nCiAgICAgICAgY2hhciBuZXh0LCBpbnQgc2V0KSB7CiAgICAgICAgYWNjZXNz\naW5nRmllbGQoaWR4KTsKICAgICAgICBpZiAoY3VyID09IG5leHQgfHwgIV9s\nb2FkZWQuZ2V0KGlkeCkpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBs\nb2NrKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgX2RpcnR5LnNldChp\nZHgpOwogICAgICAgICAgICBsb25ndmFsID0gbmV4dDsKICAgICAgICAgICAg\ncGMucGNSZXBsYWNlRmllbGQoaWR4KTsKICAgICAgICB9IGZpbmFsbHkgewog\nICAgICAgICAgICB1bmxvY2soKTsKICAgICAgICB9CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgc2V0dGluZ0J5dGVGaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUg\ncGMsIGludCBpZHgsIGJ5dGUgY3VyLAogICAgICAgIGJ5dGUgbmV4dCwgaW50\nIHNldCkgewogICAgICAgIGFjY2Vzc2luZ0ZpZWxkKGlkeCk7CiAgICAgICAg\naWYgKGN1ciA9PSBuZXh0IHx8ICFfbG9hZGVkLmdldChpZHgpKQogICAgICAg\nICAgICByZXR1cm47CiAgICAgICAgbG9jaygpOwogICAgICAgIHRyeSB7CiAg\nICAgICAgICAgIF9kaXJ0eS5zZXQoaWR4KTsKICAgICAgICAgICAgbG9uZ3Zh\nbCA9IG5leHQ7CiAgICAgICAgICAgIHBjLnBjUmVwbGFjZUZpZWxkKGlkeCk7\nCiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgdW5sb2NrKCk7CiAg\nICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldHRpbmdTaG9ydEZp\nZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywgaW50IGlkeCwgc2hvcnQgY3Vy\nLAogICAgICAgIHNob3J0IG5leHQsIGludCBzZXQpIHsKICAgICAgICBhY2Nl\nc3NpbmdGaWVsZChpZHgpOwogICAgICAgIGlmIChjdXIgPT0gbmV4dCB8fCAh\nX2xvYWRlZC5nZXQoaWR4KSkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAg\nIGxvY2soKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBfZGlydHkuc2V0\nKGlkeCk7CiAgICAgICAgICAgIGxvbmd2YWwgPSBuZXh0OwogICAgICAgICAg\nICBwYy5wY1JlcGxhY2VGaWVsZChpZHgpOwogICAgICAgIH0gZmluYWxseSB7\nCiAgICAgICAgICAgIHVubG9jaygpOwogICAgICAgIH0KICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBzZXR0aW5nSW50RmllbGQoUGVyc2lzdGVuY2VDYXBhYmxl\nIHBjLCBpbnQgaWR4LCBpbnQgY3VyLAogICAgICAgIGludCBuZXh0LCBpbnQg\nc2V0KSB7CiAgICAgICAgYWNjZXNzaW5nRmllbGQoaWR4KTsKICAgICAgICBp\nZiAoY3VyID09IG5leHQgfHwgIV9sb2FkZWQuZ2V0KGlkeCkpCiAgICAgICAg\nICAgIHJldHVybjsKICAgICAgICBsb2NrKCk7CiAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgX2RpcnR5LnNldChpZHgpOwogICAgICAgICAgICBsb25ndmFs\nID0gbmV4dDsKICAgICAgICAgICAgcGMucGNSZXBsYWNlRmllbGQoaWR4KTsK\nICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICB1bmxvY2soKTsKICAg\nICAgICB9CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0dGluZ0xvbmdGaWVs\nZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGludCBpZHgsIGxvbmcgY3VyLAog\nICAgICAgIGxvbmcgbmV4dCwgaW50IHNldCkgewogICAgICAgIGFjY2Vzc2lu\nZ0ZpZWxkKGlkeCk7CiAgICAgICAgaWYgKGN1ciA9PSBuZXh0IHx8ICFfbG9h\nZGVkLmdldChpZHgpKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgbG9j\naygpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIF9kaXJ0eS5zZXQoaWR4\nKTsKICAgICAgICAgICAgbG9uZ3ZhbCA9IG5leHQ7CiAgICAgICAgICAgIHBj\nLnBjUmVwbGFjZUZpZWxkKGlkeCk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAg\nICAgICAgICAgdW5sb2NrKCk7CiAgICAgICAgfQogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHNldHRpbmdGbG9hdEZpZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBw\nYywgaW50IGlkeCwgZmxvYXQgY3VyLAogICAgICAgIGZsb2F0IG5leHQsIGlu\ndCBzZXQpIHsKICAgICAgICBhY2Nlc3NpbmdGaWVsZChpZHgpOwogICAgICAg\nIGlmIChjdXIgPT0gbmV4dCB8fCAhX2xvYWRlZC5nZXQoaWR4KSkKICAgICAg\nICAgICAgcmV0dXJuOwogICAgICAgIGxvY2soKTsKICAgICAgICB0cnkgewog\nICAgICAgICAgICBfZGlydHkuc2V0KGlkeCk7CiAgICAgICAgICAgIGRibHZh\nbCA9IG5leHQ7CiAgICAgICAgICAgIHBjLnBjUmVwbGFjZUZpZWxkKGlkeCk7\nCiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgdW5sb2NrKCk7CiAg\nICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldHRpbmdEb3VibGVG\naWVsZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGludCBpZHgsIGRvdWJsZSBj\ndXIsCiAgICAgICAgZG91YmxlIG5leHQsIGludCBzZXQpIHsKICAgICAgICBh\nY2Nlc3NpbmdGaWVsZChpZHgpOwogICAgICAgIGlmIChjdXIgPT0gbmV4dCB8\nfCAhX2xvYWRlZC5nZXQoaWR4KSkKICAgICAgICAgICAgcmV0dXJuOwogICAg\nICAgIGxvY2soKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBfZGlydHku\nc2V0KGlkeCk7CiAgICAgICAgICAgIGRibHZhbCA9IG5leHQ7CiAgICAgICAg\nICAgIHBjLnBjUmVwbGFjZUZpZWxkKGlkeCk7CiAgICAgICAgfSBmaW5hbGx5\nIHsKICAgICAgICAgICAgdW5sb2NrKCk7CiAgICAgICAgfQogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHNldHRpbmdTdHJpbmdGaWVsZChQZXJzaXN0ZW5jZUNh\ncGFibGUgcGMsIGludCBpZHgsIFN0cmluZyBjdXIsCiAgICAgICAgU3RyaW5n\nIG5leHQsIGludCBzZXQpIHsKICAgICAgICBhY2Nlc3NpbmdGaWVsZChpZHgp\nOwogICAgICAgIGlmIChjdXIgPT0gbmV4dCB8fCAhX2xvYWRlZC5nZXQoaWR4\nKSkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGxvY2soKTsKICAgICAg\nICB0cnkgewogICAgICAgICAgICBfZGlydHkuc2V0KGlkeCk7CiAgICAgICAg\nICAgIG9ianZhbCA9IG5leHQ7CiAgICAgICAgICAgIHBjLnBjUmVwbGFjZUZp\nZWxkKGlkeCk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgdW5s\nb2NrKCk7CiAgICAgICAgICAgIG9ianZhbCA9IG51bGw7CiAgICAgICAgfQog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldHRpbmdPYmplY3RGaWVsZChQZXJz\naXN0ZW5jZUNhcGFibGUgcGMsIGludCBpZHgsIE9iamVjdCBjdXIsCiAgICAg\nICAgT2JqZWN0IG5leHQsIGludCBzZXQpIHsKICAgICAgICBhY2Nlc3NpbmdG\naWVsZChpZHgpOwogICAgICAgIGlmIChjdXIgPT0gbmV4dCB8fCAhX2xvYWRl\nZC5nZXQoaWR4KSkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGxvY2so\nKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBfZGlydHkuc2V0KGlkeCk7\nCiAgICAgICAgICAgIG9ianZhbCA9IG5leHQ7CiAgICAgICAgICAgIHBjLnBj\nUmVwbGFjZUZpZWxkKGlkeCk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAg\nICAgICAgdW5sb2NrKCk7CiAgICAgICAgICAgIG9ianZhbCA9IG51bGw7CiAg\nICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIHByb3ZpZGVkQm9vbGVh\nbkZpZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywgaW50IGlkeCwKICAgICAg\nICBib29sZWFuIGN1cikgewogICAgICAgIGxvbmd2YWwgPSBjdXIgPyAxIDog\nMDsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBwcm92aWRlZENoYXJGaWVsZChQ\nZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGludCBpZHgsIGNoYXIgY3VyKSB7CiAg\nICAgICAgbG9uZ3ZhbCA9IGN1cjsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBw\ncm92aWRlZEJ5dGVGaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGludCBp\nZHgsIGJ5dGUgY3VyKSB7CiAgICAgICAgbG9uZ3ZhbCA9IGN1cjsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBwcm92aWRlZFNob3J0RmllbGQoUGVyc2lzdGVu\nY2VDYXBhYmxlIHBjLCBpbnQgaWR4LCBzaG9ydCBjdXIpIHsKICAgICAgICBs\nb25ndmFsID0gY3VyOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHByb3ZpZGVk\nSW50RmllbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgaWR4LCBpbnQg\nY3VyKSB7CiAgICAgICAgbG9uZ3ZhbCA9IGN1cjsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBwcm92aWRlZExvbmdGaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUg\ncGMsIGludCBpZHgsIGxvbmcgY3VyKSB7CiAgICAgICAgbG9uZ3ZhbCA9IGN1\ncjsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBwcm92aWRlZEZsb2F0RmllbGQo\nUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgaWR4LCBmbG9hdCBjdXIpIHsK\nICAgICAgICBkYmx2YWwgPSBjdXI7CiAgICB9CgogICAgcHVibGljIHZvaWQg\ncHJvdmlkZWREb3VibGVGaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGlu\ndCBpZHgsCiAgICAgICAgZG91YmxlIGN1cikgewogICAgICAgIGRibHZhbCA9\nIGN1cjsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBwcm92aWRlZFN0cmluZ0Zp\nZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywgaW50IGlkeCwKICAgICAgICBT\ndHJpbmcgY3VyKSB7CiAgICAgICAgb2JqdmFsID0gY3VyOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHByb3ZpZGVkT2JqZWN0RmllbGQoUGVyc2lzdGVuY2VD\nYXBhYmxlIHBjLCBpbnQgaWR4LAogICAgICAgIE9iamVjdCBjdXIpIHsKICAg\nICAgICBvYmp2YWwgPSBjdXI7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4g\ncmVwbGFjZUJvb2xlYW5GaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGlu\ndCBpZHgpIHsKICAgICAgICByZXR1cm4gbG9uZ3ZhbCA9PSAxOwogICAgfQoK\nICAgIHB1YmxpYyBjaGFyIHJlcGxhY2VDaGFyRmllbGQoUGVyc2lzdGVuY2VD\nYXBhYmxlIHBjLCBpbnQgaWR4KSB7CiAgICAgICAgcmV0dXJuIChjaGFyKSBs\nb25ndmFsOwogICAgfQoKICAgIHB1YmxpYyBieXRlIHJlcGxhY2VCeXRlRmll\nbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgaWR4KSB7CiAgICAgICAg\ncmV0dXJuIChieXRlKSBsb25ndmFsOwogICAgfQoKICAgIHB1YmxpYyBzaG9y\ndCByZXBsYWNlU2hvcnRGaWVsZChQZXJzaXN0ZW5jZUNhcGFibGUgcGMsIGlu\ndCBpZHgpIHsKICAgICAgICByZXR1cm4gKHNob3J0KSBsb25ndmFsOwogICAg\nfQoKICAgIHB1YmxpYyBpbnQgcmVwbGFjZUludEZpZWxkKFBlcnNpc3RlbmNl\nQ2FwYWJsZSBwYywgaW50IGlkeCkgewogICAgICAgIHJldHVybiAoaW50KSBs\nb25ndmFsOwogICAgfQoKICAgIHB1YmxpYyBsb25nIHJlcGxhY2VMb25nRmll\nbGQoUGVyc2lzdGVuY2VDYXBhYmxlIHBjLCBpbnQgaWR4KSB7CiAgICAgICAg\ncmV0dXJuIGxvbmd2YWw7CiAgICB9CgogICAgcHVibGljIGZsb2F0IHJlcGxh\nY2VGbG9hdEZpZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywgaW50IGlkeCkg\newogICAgICAgIHJldHVybiAoZmxvYXQpIGRibHZhbDsKICAgIH0KCiAgICBw\ndWJsaWMgZG91YmxlIHJlcGxhY2VEb3VibGVGaWVsZChQZXJzaXN0ZW5jZUNh\ncGFibGUgcGMsIGludCBpZHgpIHsKICAgICAgICByZXR1cm4gZGJsdmFsOwog\nICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgcmVwbGFjZVN0cmluZ0ZpZWxkKFBl\ncnNpc3RlbmNlQ2FwYWJsZSBwYywgaW50IGlkeCkgewogICAgICAgIFN0cmlu\nZyBzdHIgPSAoU3RyaW5nKSBvYmp2YWw7CiAgICAgICAgb2JqdmFsID0gbnVs\nbDsKICAgICAgICByZXR1cm4gc3RyOwogICAgfQoKICAgIHB1YmxpYyBPYmpl\nY3QgcmVwbGFjZU9iamVjdEZpZWxkKFBlcnNpc3RlbmNlQ2FwYWJsZSBwYywg\naW50IGlkeCkgewogICAgICAgIE9iamVjdCByZXQgPSBvYmp2YWw7CiAgICAg\nICAgb2JqdmFsID0gbnVsbDsKICAgICAgICByZXR1cm4gcmV0OwogICAgfQoK\nICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAg\nICAvLyBPcGVuSlBBU3RhdGVNYW5hZ2VyIGltcGxlbWVudGF0aW9uCiAgICAv\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKICAgIHB1\nYmxpYyB2b2lkIGluaXRpYWxpemUoQ2xhc3MgZm9yVHlwZSwgUENTdGF0ZSBz\ndGF0ZSkgewogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlv\nbkV4Y2VwdGlvbigpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGxvYWQoRmV0\nY2hDb25maWd1cmF0aW9uIGZldGNoKSB7CiAgICAgICAgdGhyb3cgbmV3IFVu\nc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9CgogICAgcHVi\nbGljIE9iamVjdCBnZXRNYW5hZ2VkSW5zdGFuY2UoKSB7CiAgICAgICAgcmV0\ndXJuIF9wYzsKICAgIH0KCiAgICBwdWJsaWMgUGVyc2lzdGVuY2VDYXBhYmxl\nIGdldFBlcnNpc3RlbmNlQ2FwYWJsZSgpIHsKICAgICAgICByZXR1cm4gX3Bj\nOwogICAgfQoKICAgIHB1YmxpYyBDbGFzc01ldGFEYXRhIGdldE1ldGFEYXRh\nKCkgewogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4\nY2VwdGlvbigpOwogICAgfQoKICAgIHB1YmxpYyBPcGVuSlBBU3RhdGVNYW5h\nZ2VyIGdldE93bmVyKCkgewogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRl\nZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwogICAgfQoKICAgIHB1YmxpYyBWYWx1\nZU1ldGFEYXRhIGdldE93bmVyTWV0YURhdGEoKSB7CiAgICAgICAgdGhyb3cg\nbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9Cgog\nICAgcHVibGljIGJvb2xlYW4gaXNFbWJlZGRlZCgpIHsKICAgICAgICByZXR1\ncm4gX2VtYmVkZGVkOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGlzRmx1\nc2hlZCgpIHsKICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRp\nb25FeGNlcHRpb24oKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBpc0Zs\ndXNoZWREaXJ0eSgpIHsKICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRP\ncGVyYXRpb25FeGNlcHRpb24oKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVh\nbiBpc1Byb3Zpc2lvbmFsKCkgewogICAgICAgIHRocm93IG5ldyBVbnN1cHBv\ncnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwogICAgfQoKICAgIHB1YmxpYyBC\naXRTZXQgZ2V0TG9hZGVkKCkgewogICAgICAgIHJldHVybiBfbG9hZGVkOwog\nICAgfQoKICAgIHB1YmxpYyBCaXRTZXQgZ2V0RGlydHkoKSB7CiAgICAgICAg\ncmV0dXJuIF9kaXJ0eTsKICAgIH0KCiAgICBwdWJsaWMgQml0U2V0IGdldEZs\ndXNoZWQoKSB7CiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0\naW9uRXhjZXB0aW9uKCk7CiAgICB9CgogICAgcHVibGljIEJpdFNldCBnZXRV\nbmxvYWRlZChGZXRjaENvbmZpZ3VyYXRpb24gZmV0Y2gpIHsKICAgICAgICB0\naHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsKICAg\nIH0KCiAgICBwdWJsaWMgT2JqZWN0IG5ld1Byb3h5KGludCBmaWVsZCkgewog\nICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlv\nbigpOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgbmV3RmllbGRQcm94eShp\nbnQgZmllbGQpIHsKICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVy\nYXRpb25FeGNlcHRpb24oKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBp\nc0RlZmF1bHRWYWx1ZShpbnQgZmllbGQpIHsKICAgICAgICB0aHJvdyBuZXcg\nVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsKICAgIH0KCiAgICBw\ndWJsaWMgU3RvcmVDb250ZXh0IGdldENvbnRleHQoKSB7CiAgICAgICAgcmV0\ndXJuIG51bGw7CiAgICB9CgogICAgcHVibGljIFBDU3RhdGUgZ2V0UENTdGF0\nZSgpIHsKICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25F\neGNlcHRpb24oKTsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IGdldE9iamVj\ndElkKCkgewogICAgICAgIHJldHVybiBfb2lkOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHNldE9iamVjdElkKE9iamVjdCBvaWQpIHsKICAgICAgICB0aHJv\ndyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsKICAgIH0K\nCiAgICBwdWJsaWMgYm9vbGVhbiBhc3NpZ25PYmplY3RJZChib29sZWFuIGZs\ndXNoKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgcHVibGlj\nIE9iamVjdCBnZXRJZCgpIHsKICAgICAgICByZXR1cm4gZ2V0T2JqZWN0SWQo\nKTsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IGdldExvY2soKSB7CiAgICAg\nICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0TG9jayhPYmplY3QgbG9jaykg\newogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2Vw\ndGlvbigpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldE5leHRWZXJzaW9u\nKE9iamVjdCB2ZXJzaW9uKSB7CiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9y\ndGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9CgogICAgcHVibGljIE9i\namVjdCBnZXRJbXBsRGF0YSgpIHsKICAgICAgICB0aHJvdyBuZXcgVW5zdXBw\nb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsKICAgIH0KCiAgICBwdWJsaWMg\nT2JqZWN0IHNldEltcGxEYXRhKE9iamVjdCBkYXRhLCBib29sZWFuIGNhY2hl\nYWJsZSkgewogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlv\nbkV4Y2VwdGlvbigpOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGlzSW1w\nbERhdGFDYWNoZWFibGUoKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAg\nfQoKICAgIHB1YmxpYyBPYmplY3QgZ2V0SW1wbERhdGEoaW50IGZpZWxkKSB7\nCiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0\naW9uKCk7CiAgICB9CgogICAgcHVibGljIE9iamVjdCBzZXRJbXBsRGF0YShp\nbnQgZmllbGQsIE9iamVjdCBkYXRhKSB7CiAgICAgICAgdGhyb3cgbmV3IFVu\nc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9CgogICAgcHVi\nbGljIGJvb2xlYW4gaXNJbXBsRGF0YUNhY2hlYWJsZShpbnQgZmllbGQpIHsK\nICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRp\nb24oKTsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IGdldEludGVybWVkaWF0\nZShpbnQgZmllbGQpIHsKICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRP\ncGVyYXRpb25FeGNlcHRpb24oKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBz\nZXRJbnRlcm1lZGlhdGUoaW50IGZpZWxkLCBPYmplY3QgZGF0YSkgewogICAg\nICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHJlbW92ZWQoaW50IGZpZWxkLCBP\nYmplY3QgcmVtb3ZlZCwgYm9vbGVhbiBrZXkpIHsKICAgICAgICBkaXJ0eShm\naWVsZCk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gYmVmb3JlUmVmcmVz\naChib29sZWFuIGFsbCkgewogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRl\nZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIGRpcnR5KGludCBmaWVsZCkgewogICAgICAgIGxvY2soKTsKICAgICAgICB0\ncnkgewogICAgICAgICAgICBfZGlydHkuc2V0KGZpZWxkKTsKICAgICAgICB9\nIGZpbmFsbHkgewogICAgICAgICAgICB1bmxvY2soKTsKICAgICAgICB9CiAg\nICB9CgogICAgcHVibGljIHZvaWQgc3RvcmVCb29sZWFuKGludCBmaWVsZCwg\nYm9vbGVhbiBleHRWYWwpIHsKICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0\nZWRPcGVyYXRpb25FeGNlcHRpb24oKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBzdG9yZUJ5dGUoaW50IGZpZWxkLCBieXRlIGV4dFZhbCkgewogICAgICAg\nIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHN0b3JlQ2hhcihpbnQgZmllbGQsIGNo\nYXIgZXh0VmFsKSB7CiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3Bl\ncmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc3Rv\ncmVJbnQoaW50IGZpZWxkLCBpbnQgZXh0VmFsKSB7CiAgICAgICAgdGhyb3cg\nbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgc3RvcmVTaG9ydChpbnQgZmllbGQsIHNob3J0IGV4\ndFZhbCkgewogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlv\nbkV4Y2VwdGlvbigpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHN0b3JlTG9u\nZyhpbnQgZmllbGQsIGxvbmcgZXh0VmFsKSB7CiAgICAgICAgdGhyb3cgbmV3\nIFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgc3RvcmVGbG9hdChpbnQgZmllbGQsIGZsb2F0IGV4dFZh\nbCkgewogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4\nY2VwdGlvbigpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHN0b3JlRG91Ymxl\nKGludCBmaWVsZCwgZG91YmxlIGV4dFZhbCkgewogICAgICAgIHRocm93IG5l\ndyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHN0b3JlU3RyaW5nKGludCBmaWVsZCwgU3RyaW5nIGV4\ndFZhbCkgewogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlv\nbkV4Y2VwdGlvbigpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHN0b3JlT2Jq\nZWN0KGludCBmaWVsZCwgT2JqZWN0IGV4dFZhbCkgewogICAgICAgIHRocm93\nIG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHN0b3JlKGludCBmaWVsZCwgT2JqZWN0IGV4dFZh\nbCkgewogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4\nY2VwdGlvbigpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHN0b3JlRmllbGQo\naW50IGZpZWxkLCBPYmplY3QgdmFsdWUpIHsKICAgICAgICB0aHJvdyBuZXcg\nVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsKICAgIH0KCiAgICBw\ndWJsaWMgYm9vbGVhbiBmZXRjaEJvb2xlYW4oaW50IGZpZWxkKSB7CiAgICAg\nICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7\nCiAgICB9CgogICAgcHVibGljIGJ5dGUgZmV0Y2hCeXRlKGludCBmaWVsZCkg\newogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2Vw\ndGlvbigpOwogICAgfQoKICAgIHB1YmxpYyBjaGFyIGZldGNoQ2hhcihpbnQg\nZmllbGQpIHsKICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRp\nb25FeGNlcHRpb24oKTsKICAgIH0KCiAgICBwdWJsaWMgc2hvcnQgZmV0Y2hT\naG9ydChpbnQgZmllbGQpIHsKICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0\nZWRPcGVyYXRpb25FeGNlcHRpb24oKTsKICAgIH0KCiAgICBwdWJsaWMgaW50\nIGZldGNoSW50KGludCBmaWVsZCkgewogICAgICAgIHRocm93IG5ldyBVbnN1\ncHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwogICAgfQoKICAgIHB1Ymxp\nYyBsb25nIGZldGNoTG9uZyhpbnQgZmllbGQpIHsKICAgICAgICB0aHJvdyBu\nZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsKICAgIH0KCiAg\nICBwdWJsaWMgZmxvYXQgZmV0Y2hGbG9hdChpbnQgZmllbGQpIHsKICAgICAg\nICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsK\nICAgIH0KCiAgICBwdWJsaWMgZG91YmxlIGZldGNoRG91YmxlKGludCBmaWVs\nZCkgewogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4\nY2VwdGlvbigpOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgZmV0Y2hTdHJp\nbmcoaW50IGZpZWxkKSB7CiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVk\nT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9CgogICAgcHVibGljIE9iamVj\ndCBmZXRjaE9iamVjdChpbnQgZmllbGQpIHsKICAgICAgICB0aHJvdyBuZXcg\nVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsKICAgIH0KCiAgICBw\ndWJsaWMgT2JqZWN0IGZldGNoKGludCBmaWVsZCkgewogICAgICAgIHRocm93\nIG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwogICAgfQoK\nICAgIHB1YmxpYyBPYmplY3QgZmV0Y2hGaWVsZChpbnQgZmllbGQsIGJvb2xl\nYW4gdHJhbnNpdGlvbnMpIHsKICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0\nZWRPcGVyYXRpb25FeGNlcHRpb24oKTsKICAgIH0KCiAgICBwdWJsaWMgT2Jq\nZWN0IGZldGNoSW5pdGlhbEZpZWxkKGludCBmaWVsZCkgewogICAgICAgIHRo\ncm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHNldFJlbW90ZShpbnQgZmllbGQsIE9iamVj\ndCB2YWx1ZSkgewogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJh\ndGlvbkV4Y2VwdGlvbigpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGxvY2so\nKSB7CiAgICAgICAgaWYgKF9sb2NrICE9IG51bGwpCiAgICAgICAgICAgIF9s\nb2NrLmxvY2soKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB1bmxvY2soKSB7\nCiAgICAgICAgaWYgKF9sb2NrICE9IG51bGwpCiAgICAgICAgICAgIF9sb2Nr\nLnVubG9jaygpOwogICAgfQp9Cg==\n","encoding":"base64"}

