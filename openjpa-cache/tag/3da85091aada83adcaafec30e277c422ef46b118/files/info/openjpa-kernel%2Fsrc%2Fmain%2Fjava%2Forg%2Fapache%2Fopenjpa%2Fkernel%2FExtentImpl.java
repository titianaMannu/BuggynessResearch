{"sha":"3f7b4f9561226ffb0edb2310b67dc387016e7bdf","node_id":"MDQ6QmxvYjIwNjM2NDozZjdiNGY5NTYxMjI2ZmZiMGVkYjIzMTBiNjdkYzM4NzAxNmU3YmRm","size":10341,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/3f7b4f9561226ffb0edb2310b67dc387016e7bdf","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsOwoKaW1wb3J0IGph\ndmEudXRpbC5BcnJheUxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuSXRlcmF0b3I7\nCmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGphdmEudXRpbC5Ob1N1\nY2hFbGVtZW50RXhjZXB0aW9uOwoKaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9u\ncy5jb2xsZWN0aW9ucy5QcmVkaWNhdGU7CmltcG9ydCBvcmcuYXBhY2hlLmNv\nbW1vbnMuY29sbGVjdGlvbnMuaXRlcmF0b3JzLkZpbHRlckl0ZXJhdG9yOwpp\nbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmNvbGxlY3Rpb25zLml0ZXJhdG9y\ncy5JdGVyYXRvckNoYWluOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxp\nYi5yb3AuUmVzdWx0T2JqZWN0UHJvdmlkZXI7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEubGliLnJvcC5SZXN1bHRPYmplY3RQcm92aWRlckl0ZXJhdG9y\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkNsb3NlYWJs\nZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5SZWZlcmVu\nY2VIYXNoU2V0OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGls\nLmNvbmN1cnJlbnQuUmVlbnRyYW50TG9jazsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5tZXRhLkNsYXNzTWV0YURhdGE7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEubWV0YS5NZXRhRGF0YVJlcG9zaXRvcnk7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEudXRpbC5HZW5lcmFsRXhjZXB0aW9uOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuSW1wbEhlbHBlcjsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS51dGlsLk9wZW5KUEFFeGNlcHRpb247CgovKioK\nICogUmVwcmVzZW50YXRpb24gb2YgYWxsIG1lbWJlcnMgb2YgYSBwZXJzaXN0\nZW50IGNsYXNzLgogKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKiBAYXV0aG9y\nIFBhdHJpY2sgTGluc2tleQogKiBAbm9qYXZhZG9jCiAqLwpwdWJsaWMgY2xh\nc3MgRXh0ZW50SW1wbAogICAgaW1wbGVtZW50cyBFeHRlbnQgewoKICAgIHBy\naXZhdGUgc3RhdGljIGZpbmFsIENsYXNzTWV0YURhdGFbXSBFTVBUWV9NRVRB\nUyA9IG5ldyBDbGFzc01ldGFEYXRhWzBdOwoKICAgIHByaXZhdGUgZmluYWwg\nQnJva2VyIF9icm9rZXI7CiAgICBwcml2YXRlIGZpbmFsIENsYXNzIF90eXBl\nOwogICAgcHJpdmF0ZSBmaW5hbCBib29sZWFuIF9zdWJzOwogICAgcHJpdmF0\nZSBmaW5hbCBGZXRjaENvbmZpZ3VyYXRpb24gX2ZjOwogICAgcHJpdmF0ZSBm\naW5hbCBSZWVudHJhbnRMb2NrIF9sb2NrOwogICAgcHJpdmF0ZSBib29sZWFu\nIF9pZ25vcmUgPSBmYWxzZTsKCiAgICAvLyBzZXQgb2Ygb3BlbiBpdGVyYXRv\ncnMKICAgIHByaXZhdGUgUmVmZXJlbmNlSGFzaFNldCBfb3Blbkl0cnMgPSBu\ndWxsOwoKICAgIC8qKgogICAgICogQ29uc3RydWN0b3IuCiAgICAgKgogICAg\nICogQHBhcmFtIGJyb2tlciB0aGUgb3duaW5nIGJyb2tlcgogICAgICogQHBh\ncmFtIHR5cGUgdGhlIGNhbmRpZGF0ZSBjbGFzcwogICAgICogQHBhcmFtIHN1\nYnMgd2hldGhlciBzdWJjbGFzc2VzIGFyZSBpbmNsdWRlZCBpbiB0aGUgZXh0\nZW50CiAgICAgKi8KICAgIEV4dGVudEltcGwoQnJva2VyIGJyb2tlciwgQ2xh\nc3MgdHlwZSwgYm9vbGVhbiBzdWJzLAogICAgICAgIEZldGNoQ29uZmlndXJh\ndGlvbiBmZXRjaCkgewogICAgICAgIF9icm9rZXIgPSBicm9rZXI7CiAgICAg\nICAgX3R5cGUgPSB0eXBlOwogICAgICAgIF9zdWJzID0gc3ViczsKICAgICAg\nICBpZiAoZmV0Y2ggIT0gbnVsbCkKICAgICAgICAgICAgX2ZjID0gZmV0Y2g7\nCiAgICAgICAgZWxzZQogICAgICAgICAgICBfZmMgPSAoRmV0Y2hDb25maWd1\ncmF0aW9uKSBicm9rZXIuZ2V0RmV0Y2hDb25maWd1cmF0aW9uKCkuY2xvbmUo\nKTsKICAgICAgICBfaWdub3JlID0gYnJva2VyLmdldElnbm9yZUNoYW5nZXMo\nKTsKICAgICAgICBpZiAoYnJva2VyLmdldE11bHRpdGhyZWFkZWQoKSkKICAg\nICAgICAgICAgX2xvY2sgPSBuZXcgUmVlbnRyYW50TG9jaygpOwogICAgICAg\nIGVsc2UKICAgICAgICAgICAgX2xvY2sgPSBudWxsOwogICAgfQoKICAgIHB1\nYmxpYyBGZXRjaENvbmZpZ3VyYXRpb24gZ2V0RmV0Y2hDb25maWd1cmF0aW9u\nKCkgewogICAgICAgIHJldHVybiBfZmM7CiAgICB9CgogICAgcHVibGljIGJv\nb2xlYW4gZ2V0SWdub3JlQ2hhbmdlcygpIHsKICAgICAgICByZXR1cm4gX2ln\nbm9yZTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRJZ25vcmVDaGFuZ2Vz\nKGJvb2xlYW4gaWdub3JlQ2hhbmdlcykgewogICAgICAgIF9icm9rZXIuYXNz\nZXJ0T3BlbigpOwogICAgICAgIF9pZ25vcmUgPSBpZ25vcmVDaGFuZ2VzOwog\nICAgfQoKICAgIHB1YmxpYyBMaXN0IGxpc3QoKSB7CiAgICAgICAgTGlzdCBs\naXN0ID0gbmV3IEFycmF5TGlzdCgpOwogICAgICAgIEl0ZXJhdG9yIGl0ciA9\nIGl0ZXJhdG9yKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgd2hpbGUg\nKGl0ci5oYXNOZXh0KCkpCiAgICAgICAgICAgICAgICBsaXN0LmFkZChpdHIu\nbmV4dCgpKTsKICAgICAgICAgICAgcmV0dXJuIGxpc3Q7CiAgICAgICAgfSBm\naW5hbGx5IHsKICAgICAgICAgICAgSW1wbEhlbHBlci5jbG9zZShpdHIpOwog\nICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgSXRlcmF0b3IgaXRlcmF0b3Io\nKSB7CiAgICAgICAgX2Jyb2tlci5hc3NlcnROb250cmFuc2FjdGlvbmFsUmVh\nZCgpOwogICAgICAgIENsb3NlYWJsZUl0ZXJhdG9yIGNpdHIgPSBudWxsOwog\nICAgICAgIHRyeSB7CiAgICAgICAgICAgIC8vIGNyZWF0ZSBhbiBpdGVyYXRv\nciBjaGFpbjsgYWRkIHBuZXcgb2JqZWN0cyBpZiB0cmFuc2FjdGlvbmFsCiAg\nICAgICAgICAgIENsb3NlYWJsZUl0ZXJhdG9yQ2hhaW4gY2hhaW4gPSBuZXcg\nQ2xvc2VhYmxlSXRlcmF0b3JDaGFpbigpOwogICAgICAgICAgICBib29sZWFu\nIHRyYW5zID0gIV9pZ25vcmUgJiYgX2Jyb2tlci5pc0FjdGl2ZSgpOwogICAg\nICAgICAgICBpZiAodHJhbnMpCiAgICAgICAgICAgICAgICBjaGFpbi5hZGRJ\ndGVyYXRvcihuZXcgRmlsdGVyTmV3SXRlcmF0b3IoKSk7CgogICAgICAgICAg\nICAvLyBhZGQgZGF0YWJhc2UgaXRlcmF0b3JzIGZvciBlYWNoIGltcGxlbWVu\ndGluZyBjbGFzcwogICAgICAgICAgICBNZXRhRGF0YVJlcG9zaXRvcnkgcmVw\nb3MgPSBfYnJva2VyLmdldENvbmZpZ3VyYXRpb24oKS4KICAgICAgICAgICAg\nICAgIGdldE1ldGFEYXRhUmVwb3NpdG9yeUluc3RhbmNlKCk7CiAgICAgICAg\nICAgIENsYXNzTWV0YURhdGEgbWV0YSA9IHJlcG9zLmdldE1ldGFEYXRhKF90\neXBlLAogICAgICAgICAgICAgICAgX2Jyb2tlci5nZXRDbGFzc0xvYWRlcigp\nLCBmYWxzZSk7CgogICAgICAgICAgICBDbGFzc01ldGFEYXRhW10gbWV0YXM7\nCiAgICAgICAgICAgIGlmIChtZXRhICE9IG51bGwgJiYgKCFfc3VicyB8fCAh\nbWV0YS5pc01hbmFnZWRJbnRlcmZhY2UoKSkKICAgICAgICAgICAgICAgICYm\nIChtZXRhLmlzTWFwcGVkKCkgfHwgKF9zdWJzCiAgICAgICAgICAgICAgICAm\nJiBtZXRhLmdldE1hcHBlZFBDU3ViY2xhc3NNZXRhRGF0YXMoKS5sZW5ndGgg\nPiAwKSkpCiAgICAgICAgICAgICAgICBtZXRhcyA9IG5ldyBDbGFzc01ldGFE\nYXRhW117IG1ldGEgfTsKICAgICAgICAgICAgZWxzZSBpZiAoX3N1YnMgJiYg\nKG1ldGEgPT0gbnVsbCB8fCBtZXRhLmlzTWFuYWdlZEludGVyZmFjZSgpKSkK\nICAgICAgICAgICAgICAgIG1ldGFzID0gcmVwb3MuZ2V0SW1wbGVtZW50b3JN\nZXRhRGF0YXMoX3R5cGUsCiAgICAgICAgICAgICAgICAgICAgX2Jyb2tlci5n\nZXRDbGFzc0xvYWRlcigpLCBmYWxzZSk7CiAgICAgICAgICAgIGVsc2UKICAg\nICAgICAgICAgICAgIG1ldGFzID0gRU1QVFlfTUVUQVM7CgogICAgICAgICAg\nICBSZXN1bHRPYmplY3RQcm92aWRlciByb3A7CiAgICAgICAgICAgIGZvciAo\naW50IGkgPSAwOyBpIDwgbWV0YXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAg\nICAgICAgIHJvcCA9IF9icm9rZXIuZ2V0U3RvcmVNYW5hZ2VyKCkuZXhlY3V0\nZUV4dGVudChtZXRhc1tpXSwKICAgICAgICAgICAgICAgICAgICBfc3Vicywg\nX2ZjKTsKICAgICAgICAgICAgICAgIGlmIChyb3AgIT0gbnVsbCkKICAgICAg\nICAgICAgICAgICAgICBjaGFpbi5hZGRJdGVyYXRvcihuZXcgUmVzdWx0T2Jq\nZWN0UHJvdmlkZXJJdGVyYXRvcihyb3ApKTsKICAgICAgICAgICAgfQoKICAg\nICAgICAgICAgLy8gZmlsdGVyIGRlbGV0ZWQgb2JqZWN0cyBpZiB0cmFuc2Fj\ndGlvbmFsCiAgICAgICAgICAgIGlmICh0cmFucykKICAgICAgICAgICAgICAg\nIGNpdHIgPSBuZXcgRmlsdGVyRGVsZXRlZEl0ZXJhdG9yKGNoYWluKTsKICAg\nICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgY2l0ciA9IGNoYWluOwog\nICAgICAgICAgICBjaXRyLnNldFJlbW92ZU9uQ2xvc2UodGhpcyk7CiAgICAg\nICAgfSBjYXRjaCAoT3BlbkpQQUV4Y2VwdGlvbiBrZSkgewogICAgICAgICAg\nICB0aHJvdyBrZTsKICAgICAgICB9IGNhdGNoIChSdW50aW1lRXhjZXB0aW9u\nIHJlKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBHZW5lcmFsRXhjZXB0aW9u\nKHJlKTsKICAgICAgICB9CgogICAgICAgIGxvY2soKTsKICAgICAgICB0cnkg\newogICAgICAgICAgICBpZiAoX29wZW5JdHJzID09IG51bGwpCiAgICAgICAg\nICAgICAgICBfb3Blbkl0cnMgPSBuZXcgUmVmZXJlbmNlSGFzaFNldChSZWZl\ncmVuY2VIYXNoU2V0LldFQUspOwogICAgICAgICAgICBfb3Blbkl0cnMuYWRk\nKGNpdHIpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIHVubG9j\naygpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gY2l0cjsKICAgIH0KCiAg\nICBwdWJsaWMgQnJva2VyIGdldEJyb2tlcigpIHsKICAgICAgICByZXR1cm4g\nX2Jyb2tlcjsKICAgIH0KCiAgICBwdWJsaWMgQ2xhc3MgZ2V0RWxlbWVudFR5\ncGUoKSB7CiAgICAgICAgcmV0dXJuIF90eXBlOwogICAgfQoKICAgIHB1Ymxp\nYyBib29sZWFuIGhhc1N1YmNsYXNzZXMoKSB7CiAgICAgICAgcmV0dXJuIF9z\ndWJzOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGNsb3NlQWxsKCkgewogICAg\nICAgIGlmIChfb3Blbkl0cnMgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJu\nOwoKICAgICAgICBsb2NrKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\nQ2xvc2VhYmxlSXRlcmF0b3IgY2l0cjsKICAgICAgICAgICAgZm9yIChJdGVy\nYXRvciBpdHIgPSBfb3Blbkl0cnMuaXRlcmF0b3IoKTsgaXRyLmhhc05leHQo\nKTspIHsKICAgICAgICAgICAgICAgIGNpdHIgPSAoQ2xvc2VhYmxlSXRlcmF0\nb3IpIGl0ci5uZXh0KCk7CiAgICAgICAgICAgICAgICBjaXRyLnNldFJlbW92\nZU9uQ2xvc2UobnVsbCk7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAg\nICAgICAgICAgICAgIGNpdHIuY2xvc2UoKTsKICAgICAgICAgICAgICAgIH0g\nY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAgICB9CiAgICAg\nICAgICAgIH0KICAgICAgICAgICAgX29wZW5JdHJzLmNsZWFyKCk7CiAgICAg\nICAgfSBjYXRjaCAoT3BlbkpQQUV4Y2VwdGlvbiBrZSkgewogICAgICAgICAg\nICB0aHJvdyBrZTsKICAgICAgICB9IGNhdGNoIChSdW50aW1lRXhjZXB0aW9u\nIHJlKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBHZW5lcmFsRXhjZXB0aW9u\nKHJlKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICB1bmxvY2so\nKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZvaWQgbG9jaygpIHsK\nICAgICAgICBpZiAoX2xvY2sgIT0gbnVsbCkKICAgICAgICAgICAgX2xvY2su\nbG9jaygpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHVubG9jaygpIHsKICAg\nICAgICBpZiAoX2xvY2sgIT0gbnVsbCkKICAgICAgICAgICAgX2xvY2sudW5s\nb2NrKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDbG9zZWFibGUgaXRlcmF0\nb3IuCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGljIGludGVyZmFjZSBDbG9z\nZWFibGVJdGVyYXRvcgogICAgICAgIGV4dGVuZHMgQ2xvc2VhYmxlLCBJdGVy\nYXRvciB7CgogICAgICAgIC8qKgogICAgICAgICAqIFNldCB0aGUgZXh0ZW50\nIHRvIHJlbW92ZSBzZWxmIGZyb20gb24gY2xvc2UuCiAgICAgICAgICovCiAg\nICAgICAgcHVibGljIHZvaWQgc2V0UmVtb3ZlT25DbG9zZShFeHRlbnRJbXBs\nIGV4dGVudCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDbG9zZWFibGUge0Bs\naW5rIEl0ZXJhdG9yQ2hhaW59LgogICAgICovCiAgICBwcml2YXRlIHN0YXRp\nYyBjbGFzcyBDbG9zZWFibGVJdGVyYXRvckNoYWluCiAgICAgICAgZXh0ZW5k\ncyBJdGVyYXRvckNoYWluCiAgICAgICAgaW1wbGVtZW50cyBDbG9zZWFibGVJ\ndGVyYXRvciB7CgogICAgICAgIHByaXZhdGUgRXh0ZW50SW1wbCBfZXh0ZW50\nID0gbnVsbDsKICAgICAgICBwcml2YXRlIGJvb2xlYW4gX2Nsb3NlZCA9IGZh\nbHNlOwoKICAgICAgICBwdWJsaWMgYm9vbGVhbiBoYXNOZXh0KCkgewogICAg\nICAgICAgICByZXR1cm4gKF9jbG9zZWQpID8gZmFsc2UgOiBzdXBlci5oYXNO\nZXh0KCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgT2JqZWN0IG5leHQo\nKSB7CiAgICAgICAgICAgIGlmIChfY2xvc2VkKQogICAgICAgICAgICAgICAg\ndGhyb3cgbmV3IE5vU3VjaEVsZW1lbnRFeGNlcHRpb24oKTsKICAgICAgICAg\nICAgcmV0dXJuIHN1cGVyLm5leHQoKTsKICAgICAgICB9CgogICAgICAgIHB1\nYmxpYyB2b2lkIHJlbW92ZSgpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFVu\nc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICAgICAgfQoKICAg\nICAgICBwdWJsaWMgdm9pZCBzZXRSZW1vdmVPbkNsb3NlKEV4dGVudEltcGwg\nZXh0ZW50KSB7CiAgICAgICAgICAgIF9leHRlbnQgPSBleHRlbnQ7CiAgICAg\nICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBjbG9zZSgpCiAgICAgICAgICAg\nIHRocm93cyBFeGNlcHRpb24gewogICAgICAgICAgICBpZiAoX2V4dGVudCAh\nPSBudWxsICYmIF9leHRlbnQuX29wZW5JdHJzICE9IG51bGwpIHsKICAgICAg\nICAgICAgICAgIF9leHRlbnQubG9jaygpOwogICAgICAgICAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgICAgICAgICBfZXh0ZW50Ll9vcGVuSXRycy5yZW1v\ndmUodGhpcyk7CiAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAg\nICAgICAgICAgICAgIF9leHRlbnQudW5sb2NrKCk7CiAgICAgICAgICAgICAg\nICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jbG9zZWQgPSB0cnVl\nOwogICAgICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9IGdldEl0ZXJhdG9y\ncygpLml0ZXJhdG9yKCk7IGl0ci5oYXNOZXh0KCk7KQogICAgICAgICAgICAg\nICAgKChDbG9zZWFibGUpIGl0ci5uZXh0KCkpLmNsb3NlKCk7CiAgICAgICAg\nfQogICAgfQoKICAgIC8qKgogICAgICoge0BsaW5rIEZpbHRlckl0ZXJhdG9y\nfSB0aGF0IHNraXBzIGRlbGV0ZWQgb2JqZWN0cy4KICAgICAqLwogICAgcHJp\ndmF0ZSBzdGF0aWMgY2xhc3MgRmlsdGVyRGVsZXRlZEl0ZXJhdG9yCiAgICAg\nICAgZXh0ZW5kcyBGaWx0ZXJJdGVyYXRvcgogICAgICAgIGltcGxlbWVudHMg\nQ2xvc2VhYmxlSXRlcmF0b3IsIFByZWRpY2F0ZSB7CgogICAgICAgIHByaXZh\ndGUgRXh0ZW50SW1wbCBfZXh0ZW50ID0gbnVsbDsKICAgICAgICBwcml2YXRl\nIGJvb2xlYW4gX2Nsb3NlZCA9IGZhbHNlOwoKICAgICAgICBwdWJsaWMgRmls\ndGVyRGVsZXRlZEl0ZXJhdG9yKEl0ZXJhdG9yIGl0cikgewogICAgICAgICAg\nICBzdXBlcihpdHIpOwogICAgICAgICAgICBzZXRQcmVkaWNhdGUodGhpcyk7\nCiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgYm9vbGVhbiBoYXNOZXh0KCkg\newogICAgICAgICAgICByZXR1cm4gKF9jbG9zZWQpID8gZmFsc2UgOiBzdXBl\nci5oYXNOZXh0KCk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgT2JqZWN0\nIG5leHQoKSB7CiAgICAgICAgICAgIGlmIChfY2xvc2VkKQogICAgICAgICAg\nICAgICAgdGhyb3cgbmV3IE5vU3VjaEVsZW1lbnRFeGNlcHRpb24oKTsKICAg\nICAgICAgICAgcmV0dXJuIHN1cGVyLm5leHQoKTsKICAgICAgICB9CgogICAg\nICAgIHB1YmxpYyB2b2lkIHJlbW92ZSgpIHsKICAgICAgICAgICAgdGhyb3cg\nbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICAgICAg\nfQoKICAgICAgICBwdWJsaWMgdm9pZCBzZXRSZW1vdmVPbkNsb3NlKEV4dGVu\ndEltcGwgZXh0ZW50KSB7CiAgICAgICAgICAgIF9leHRlbnQgPSBleHRlbnQ7\nCiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBjbG9zZSgpCiAgICAg\nICAgICAgIHRocm93cyBFeGNlcHRpb24gewogICAgICAgICAgICBpZiAoX2V4\ndGVudCAhPSBudWxsICYmIF9leHRlbnQuX29wZW5JdHJzICE9IG51bGwpIHsK\nICAgICAgICAgICAgICAgIF9leHRlbnQubG9jaygpOwogICAgICAgICAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBfZXh0ZW50Ll9vcGVuSXRy\ncy5yZW1vdmUodGhpcyk7CiAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewog\nICAgICAgICAgICAgICAgICAgIF9leHRlbnQudW5sb2NrKCk7CiAgICAgICAg\nICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jbG9zZWQg\nPSB0cnVlOwogICAgICAgICAgICAoKENsb3NlYWJsZSkgZ2V0SXRlcmF0b3Io\nKSkuY2xvc2UoKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBib29sZWFu\nIGV2YWx1YXRlKE9iamVjdCBvKSB7CiAgICAgICAgICAgIHJldHVybiAhX2V4\ndGVudC5fYnJva2VyLmlzRGVsZXRlZChvKTsKICAgICAgICB9CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBJdGVyYXRvciBvdmVyIGFsbCBuZXcgb2JqZWN0cyBp\nbiB0aGlzIGV4dGVudC4gVGhpcyBpdGVyYXRvciBpcyBhbHdheXMKICAgICAq\nIHdyYXBwZWQsIHNvIGl0IGRvZXNuJ3QgbmVlZCB0byBrZWVwIHRyYWNrIG9m\nIHdoZXRoZXIgaXQncyBjbG9zZWQuCiAgICAgKi8KICAgIHByaXZhdGUgY2xh\nc3MgRmlsdGVyTmV3SXRlcmF0b3IKICAgICAgICBleHRlbmRzIEZpbHRlckl0\nZXJhdG9yCiAgICAgICAgaW1wbGVtZW50cyBDbG9zZWFibGUsIFByZWRpY2F0\nZSB7CgogICAgICAgIHB1YmxpYyBGaWx0ZXJOZXdJdGVyYXRvcigpIHsKICAg\nICAgICAgICAgc3VwZXIoX2Jyb2tlci5nZXRUcmFuc2FjdGlvbmFsT2JqZWN0\ncygpLml0ZXJhdG9yKCkpOwogICAgICAgICAgICBzZXRQcmVkaWNhdGUodGhp\ncyk7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBjbG9zZSgpIHsK\nICAgICAgICB9CgogICAgICAgIHB1YmxpYyBib29sZWFuIGV2YWx1YXRlKE9i\namVjdCBvKSB7CiAgICAgICAgICAgIGlmICghX2Jyb2tlci5pc05ldyhvKSkK\nICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCiAgICAgICAgICAgIENs\nYXNzIHR5cGUgPSBvLmdldENsYXNzKCk7CiAgICAgICAgICAgIGlmICghX3N1\nYnMgJiYgdHlwZSAhPSBfdHlwZSkKICAgICAgICAgICAgICAgIHJldHVybiBm\nYWxzZTsKICAgICAgICAgICAgaWYgKF9zdWJzICYmICFfdHlwZS5pc0Fzc2ln\nbmFibGVGcm9tKHR5cGUpKQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNl\nOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKCQl9Cgl9Cn0K\n","encoding":"base64"}

