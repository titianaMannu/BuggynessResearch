{"sha":"eb9065afdf3d0c0f4e030f35124141b1825c3207","node_id":"MDQ6QmxvYjIwNjM2NDplYjkwNjVhZmRmM2QwYzBmNGUwMzBmMzUxMjQxNDFiMTgyNWMzMjA3","size":6605,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/eb9065afdf3d0c0f4e030f35124141b1825c3207","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsOwoKaW1wb3J0IGph\ndmF4LnRyYW5zYWN0aW9uLk5vdFN1cHBvcnRlZEV4Y2VwdGlvbjsKaW1wb3J0\nIGphdmF4LnRyYW5zYWN0aW9uLlN0YXR1czsKaW1wb3J0IGphdmF4LnRyYW5z\nYWN0aW9uLlN5bmNocm9uaXphdGlvbjsKaW1wb3J0IGphdmF4LnRyYW5zYWN0\naW9uLlN5c3RlbUV4Y2VwdGlvbjsKaW1wb3J0IGphdmF4LnRyYW5zYWN0aW9u\nLlRyYW5zYWN0aW9uOwppbXBvcnQgamF2YXgudHJhbnNhY3Rpb24uVHJhbnNh\nY3Rpb25NYW5hZ2VyOwppbXBvcnQgamF2YXgudHJhbnNhY3Rpb24ueGEuWEFS\nZXNvdXJjZTsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuZWUuTWFuYWdl\nZFJ1bnRpbWU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwu\nTG9jYWxpemVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuSW50\nZXJuYWxFeGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRp\nbC5JbnZhbGlkU3RhdGVFeGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEudXRpbC5TdG9yZUV4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS51dGlsLlVzZXJFeGNlcHRpb247CgovKioKICogVXNlcyBhIGxv\nY2FsIGltcGxlbWVudGF0aW9uIG9mIHRoZSB7QGxpbmsgVHJhbnNhY3Rpb25N\nYW5hZ2VyfSBpbnRlcmZhY2UuCiAqIFRoaXMgbWFuYWdlciBpcyB2YWxpZCBv\nbmx5IGZvciBhIHNpbmdsZSB7QGxpbmsgQnJva2VyfS4KICogSXQgZHVwbGlj\nYXRlcyBub24tbWFuYWdlZCB0cmFuc2FjdGlvbiBjb250cm9sLgogKgogKiBA\nYXV0aG9yIEFiZSBXaGl0ZQogKi8KY2xhc3MgTG9jYWxNYW5hZ2VkUnVudGlt\nZQogICAgaW1wbGVtZW50cyBNYW5hZ2VkUnVudGltZSwgVHJhbnNhY3Rpb25N\nYW5hZ2VyLCBUcmFuc2FjdGlvbiB7CgogICAgcHJpdmF0ZSBzdGF0aWMgZmlu\nYWwgTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6ZXIuZm9yUGFja2FnZQogICAg\nICAgIChMb2NhbE1hbmFnZWRSdW50aW1lLmNsYXNzKTsKCiAgICBwcml2YXRl\nIFN5bmNocm9uaXphdGlvbiBfYnJva2VyID0gbnVsbDsKICAgIHByaXZhdGUg\nU3luY2hyb25pemF0aW9uIF9mYWN0b3J5U3luYyA9IG51bGw7CiAgICBwcml2\nYXRlIGJvb2xlYW4gX2FjdGl2ZSA9IGZhbHNlOwogICAgcHJpdmF0ZSBUaHJv\nd2FibGUgX3JvbGxiYWNrT25seSA9IG51bGw7CgogICAgLyoqCiAgICAgKiBD\nb25zdHJ1Y3Rvci4gUHJvdmlkZSBicm9rZXIgdGhhdCB3aWxsIGJlIHJlcXVl\nc3RpbmcgbWFuYWdlZAogICAgICogdHJhbnNhY3Rpb24gaW5mby4KICAgICAq\nLwogICAgcHVibGljIExvY2FsTWFuYWdlZFJ1bnRpbWUoQnJva2VyIGJyb2tl\ncikgewogICAgICAgIF9icm9rZXIgPSBicm9rZXI7CiAgICB9CgogICAgcHVi\nbGljIFRyYW5zYWN0aW9uTWFuYWdlciBnZXRUcmFuc2FjdGlvbk1hbmFnZXIo\nKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgcHVibGljIHN5\nbmNocm9uaXplZCB2b2lkIGJlZ2luKCkgewogICAgICAgIGlmIChfYWN0aXZl\nKQogICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZFN0YXRlRXhjZXB0aW9u\nKF9sb2MuZ2V0KCJhY3RpdmUiKSk7CiAgICAgICAgX2FjdGl2ZSA9IHRydWU7\nCiAgICB9CgogICAgcHVibGljIHN5bmNocm9uaXplZCB2b2lkIGNvbW1pdCgp\nIHsKICAgICAgICBpZiAoIV9hY3RpdmUpCiAgICAgICAgICAgIHRocm93IG5l\ndyBJbnZhbGlkU3RhdGVFeGNlcHRpb24oX2xvYy5nZXQoIm5vdC1hY3RpdmUi\nKSk7CgogICAgICAgIC8vIHRyeSB0byBpbnZva2UgYmVmb3JlIGNvbXBsZXRp\nb24gaW4gcHJlcGFyYXRpb24gZm9yIGNvbW1pdAogICAgICAgIFJ1bnRpbWVF\neGNlcHRpb24gZXJyID0gbnVsbDsKICAgICAgICBpZiAoX3JvbGxiYWNrT25s\neSA9PSBudWxsKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAg\nICBfYnJva2VyLmJlZm9yZUNvbXBsZXRpb24oKTsKICAgICAgICAgICAgICAg\nIGlmIChfZmFjdG9yeVN5bmMgIT0gbnVsbCkKICAgICAgICAgICAgICAgICAg\nICBfZmFjdG9yeVN5bmMuYmVmb3JlQ29tcGxldGlvbigpOwogICAgICAgICAg\nICB9IGNhdGNoIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAgICAg\nICAgICBfcm9sbGJhY2tPbmx5ID0gcmU7CiAgICAgICAgICAgICAgICBlcnIg\nPSByZTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSAvLyBwcmV2aW91\nc2x5IG1hcmtlZCByb2xsYmFjayBvbmx5CiAgICAgICAgICAgIGVyciA9IG5l\ndyBTdG9yZUV4Y2VwdGlvbihfbG9jLmdldCgibWFya2VkLXJvbGxiYWNrIikp\nLgogICAgICAgICAgICAgICAgc2V0Q2F1c2UoX3JvbGxiYWNrT25seSkuc2V0\nRmF0YWwodHJ1ZSk7CgogICAgICAgIGlmIChfcm9sbGJhY2tPbmx5ID09IG51\nbGwpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIF9icm9r\nZXIuYWZ0ZXJDb21wbGV0aW9uKFN0YXR1cy5TVEFUVVNfQ09NTUlUVEVEKTsK\nICAgICAgICAgICAgICAgIG5vdGlmeUFmdGVyQ29tcGxldGlvbihTdGF0dXMu\nU1RBVFVTX0NPTU1JVFRFRCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKFJ1bnRp\nbWVFeGNlcHRpb24gcmUpIHsKICAgICAgICAgICAgICAgIGlmIChlcnIgPT0g\nbnVsbCkKICAgICAgICAgICAgICAgICAgICBlcnIgPSByZTsKICAgICAgICAg\nICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gaWYgd2UgaGF2ZW4ndCBtYW5h\nZ2VkIHRvIGNvbW1pdCwgcm9sbGJhY2sKICAgICAgICBpZiAoX2FjdGl2ZSkg\newogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcm9sbGJhY2so\nKTsKICAgICAgICAgICAgfSBjYXRjaCAoUnVudGltZUV4Y2VwdGlvbiByZSkg\newogICAgICAgICAgICAgICAgaWYgKGVyciA9PSBudWxsKQogICAgICAgICAg\nICAgICAgICAgIGVyciA9IHJlOwogICAgICAgICAgICB9CiAgICAgICAgfQoK\nICAgICAgICAvLyB0aHJvdyB0aGUgZmlyc3QgZXhjZXB0aW9uIHdlIGVuY291\nbnRlcmVkLCBpZiBhbnkKICAgICAgICBpZiAoZXJyICE9IG51bGwpCiAgICAg\nICAgICAgIHRocm93IGVycjsKICAgIH0KCiAgICBwdWJsaWMgc3luY2hyb25p\nemVkIHZvaWQgcm9sbGJhY2soKSB7CiAgICAgICAgaWYgKCFfYWN0aXZlKQog\nICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZFN0YXRlRXhjZXB0aW9uKF9s\nb2MuZ2V0KCJub3QtYWN0aXZlIikpOwoKICAgICAgICAvLyByb2xsYmFjayBi\ncm9rZXIKICAgICAgICBSdW50aW1lRXhjZXB0aW9uIGVyciA9IG51bGw7CiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgX2Jyb2tlci5hZnRlckNvbXBsZXRp\nb24oU3RhdHVzLlNUQVRVU19ST0xMRURCQUNLKTsKICAgICAgICB9IGNhdGNo\nIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAgICAgIGVyciA9IHJl\nOwogICAgICAgIH0KCiAgICAgICAgLy8gcm9sbGJhY2sgc3luY2gsIGV2ZW4g\naWYgYnJva2VyIHRocm93cyBleGNlcHRpb24KICAgICAgICB0cnkgewogICAg\nICAgICAgICBub3RpZnlBZnRlckNvbXBsZXRpb24oU3RhdHVzLlNUQVRVU19S\nT0xMRURCQUNLKTsKICAgICAgICB9IGNhdGNoIChSdW50aW1lRXhjZXB0aW9u\nIHJlKSB7CiAgICAgICAgICAgIGlmIChlcnIgPT0gbnVsbCkKICAgICAgICAg\nICAgICAgIGVyciA9IHJlOwogICAgICAgIH0KCiAgICAgICAgaWYgKGVyciAh\nPSBudWxsKQogICAgICAgICAgICB0aHJvdyBlcnI7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBOb3RpZmllcyB0aGUgZmFjdG9yeSBzeW5jIHRoYXQgdGhlIHRy\nYW5zYWN0aW9uIGhhcyBlbmRlZCB3aXRoCiAgICAgKiB0aGUgZ2l2ZW4gc3Rh\ndHVzLiBDbGVhcnMgYWxsIHRyYW5zYWN0aW9uIHN0YXRlIHJlZ2FyZGxlc3MK\nICAgICAqIG9mIGFueSBleGNlcHRpb25zIGR1cmluZyB0aGUgY2FsbGJhY2su\nCiAgICAgKi8KICAgIHByaXZhdGUgdm9pZCBub3RpZnlBZnRlckNvbXBsZXRp\nb24oaW50IHN0YXR1cykgewogICAgICAgIF9hY3RpdmUgPSBmYWxzZTsKCiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKF9mYWN0b3J5U3luYyAhPSBu\ndWxsKQogICAgICAgICAgICAgICAgX2ZhY3RvcnlTeW5jLmFmdGVyQ29tcGxl\ndGlvbihzdGF0dXMpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAg\nIF9yb2xsYmFja09ubHkgPSBudWxsOwogICAgICAgICAgICBfZmFjdG9yeVN5\nbmMgPSBudWxsOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgc3luY2hy\nb25pemVkIHZvaWQgc2V0Um9sbGJhY2tPbmx5KCkgewogICAgICAgIHNldFJv\nbGxiYWNrT25seShuZXcgVXNlckV4Y2VwdGlvbigpKTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBzZXRSb2xsYmFja09ubHkoVGhyb3dhYmxlIGNhdXNlKSB7\nCiAgICAgICAgX3JvbGxiYWNrT25seSA9IGNhdXNlOwogICAgfQoKICAgIHB1\nYmxpYyBUaHJvd2FibGUgZ2V0Um9sbGJhY2tDYXVzZSgpIHsKICAgICAgICBy\nZXR1cm4gX3JvbGxiYWNrT25seTsKICAgIH0KCiAgICBwdWJsaWMgc3luY2hy\nb25pemVkIGludCBnZXRTdGF0dXMoKSB7CiAgICAgICAgaWYgKF9yb2xsYmFj\na09ubHkgIT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIFN0YXR1cy5TVEFU\nVVNfTUFSS0VEX1JPTExCQUNLOwogICAgICAgIGlmIChfYWN0aXZlKQogICAg\nICAgICAgICByZXR1cm4gU3RhdHVzLlNUQVRVU19BQ1RJVkU7CiAgICAgICAg\ncmV0dXJuIFN0YXR1cy5TVEFUVVNfTk9fVFJBTlNBQ1RJT047CiAgICB9Cgog\nICAgcHVibGljIFRyYW5zYWN0aW9uIGdldFRyYW5zYWN0aW9uKCkgewogICAg\nICAgIHJldHVybiB0aGlzOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHJlc3Vt\nZShUcmFuc2FjdGlvbiB0b2JqKQogICAgICAgIHRocm93cyBTeXN0ZW1FeGNl\ncHRpb24gewogICAgICAgIHRocm93IG5ldyBTeXN0ZW1FeGNlcHRpb24oTm90\nU3VwcG9ydGVkRXhjZXB0aW9uLmNsYXNzLmdldE5hbWUoKSk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgc2V0VHJhbnNhY3Rpb25UaW1lb3V0KGludCBzZWMp\nCiAgICAgICAgdGhyb3dzIFN5c3RlbUV4Y2VwdGlvbiB7CiAgICAgICAgdGhy\nb3cgbmV3IFN5c3RlbUV4Y2VwdGlvbihOb3RTdXBwb3J0ZWRFeGNlcHRpb24u\nY2xhc3MuZ2V0TmFtZSgpKTsKICAgIH0KCiAgICBwdWJsaWMgVHJhbnNhY3Rp\nb24gc3VzcGVuZCgpCiAgICAgICAgdGhyb3dzIFN5c3RlbUV4Y2VwdGlvbiB7\nCiAgICAgICAgdGhyb3cgbmV3IFN5c3RlbUV4Y2VwdGlvbihOb3RTdXBwb3J0\nZWRFeGNlcHRpb24uY2xhc3MuZ2V0TmFtZSgpKTsKICAgIH0KCiAgICBwdWJs\naWMgYm9vbGVhbiBkZWxpc3RSZXNvdXJjZShYQVJlc291cmNlIHhhUmVzLCBp\nbnQgZmxhZykKICAgICAgICB0aHJvd3MgU3lzdGVtRXhjZXB0aW9uIHsKICAg\nICAgICB0aHJvdyBuZXcgU3lzdGVtRXhjZXB0aW9uKE5vdFN1cHBvcnRlZEV4\nY2VwdGlvbi5jbGFzcy5nZXROYW1lKCkpOwogICAgfQoKICAgIHB1YmxpYyBi\nb29sZWFuIGVubGlzdFJlc291cmNlKFhBUmVzb3VyY2UgeGFSZXMpCiAgICAg\nICAgdGhyb3dzIFN5c3RlbUV4Y2VwdGlvbiB7CiAgICAgICAgdGhyb3cgbmV3\nIFN5c3RlbUV4Y2VwdGlvbihOb3RTdXBwb3J0ZWRFeGNlcHRpb24uY2xhc3Mu\nZ2V0TmFtZSgpKTsKICAgIH0KCiAgICBwdWJsaWMgc3luY2hyb25pemVkIHZv\naWQgcmVnaXN0ZXJTeW5jaHJvbml6YXRpb24oU3luY2hyb25pemF0aW9uIHN5\nbmMpIHsKICAgICAgICBpZiAoc3luYyA9PSBfYnJva2VyKQogICAgICAgICAg\nICByZXR1cm47CiAgICAgICAgaWYgKF9mYWN0b3J5U3luYyAhPSBudWxsKQog\nICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAg\nICAgICBfZmFjdG9yeVN5bmMgPSBzeW5jOwogICAgfQp9Cgo=\n","encoding":"base64"}

