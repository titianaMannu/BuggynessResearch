{"sha":"1d5d15cdebc923ee41a64e58934704d8f1964615","node_id":"MDQ6QmxvYjIwNjM2NDoxZDVkMTVjZGViYzkyM2VlNDFhNjRlNTg5MzQ3MDRkOGYxOTY0NjE1","size":5009,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/1d5d15cdebc923ee41a64e58934704d8f1964615","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsOwoKaW1wb3J0IHNl\ncnAudXRpbC5OdW1iZXJzOwoKLyoqCiAqIHtAbGluayBMb2NrTWFuYWdlcn0g\naW1wbGVtZW50YXRpb24gdGhhdCBwcm92aWRlcyBzdXBwb3J0CiAqIGZvciB2\nZXJzaW9uIGNoZWNraW5nIGFuZCB2ZXJzaW9uIHVwZGF0aW5nIHdoZW4gbG9j\na3MgYXJlIGFjcXVpcmVkLgogKiBUaGlzIGxvY2sgbWFuYWdlciBtYXkgYmUg\ndXNlZCBzdGFuZGFsb25lIG9yIGV4dGVuZGVkIGZvciBhZGRpdGlvbmFsIGxv\nY2tpbmcuCiAqCiAqIEBhdXRob3IgTWFyYyBQcnVkJ2hvbW1lYXV4CiAqLwpw\ndWJsaWMgY2xhc3MgVmVyc2lvbkxvY2tNYW5hZ2VyCiAgICBleHRlbmRzIEFi\nc3RyYWN0TG9ja01hbmFnZXIgewoKICAgIHByaXZhdGUgYm9vbGVhbiBfdmVy\nc2lvbkNoZWNrT25SZWFkTG9jayA9IHRydWU7CiAgICBwcml2YXRlIGJvb2xl\nYW4gX3ZlcnNpb25VcGRhdGVPbldyaXRlTG9jayA9IHRydWU7CgogICAgLyoq\nCiAgICAgKiBSZXR1cm5zIHRoZSBnaXZlbiBpbnN0YW5jZSdzIGxvY2sgbGV2\nZWwsIGFzc3VtaW5nIHRoYXQgdGhlIHN0YXRlJ3MKICAgICAqIGxvY2sgb2Jq\nZWN0IGlzIGEgbnVtYmVyLiBJZiB0aGUgZ2l2ZW4gaW5zdGFuY2UgaXMgZW1i\nZWRkZWQsIHRyYXZlcnNlcwogICAgICogdG8gaXRzIG93bmVyLiBPdmVycmlk\nZSBpZiBsb2NrIGlzIG5vdCBzdG9yZWQgYXMgYSBudW1iZXIuCiAgICAgKi8K\nICAgIHB1YmxpYyBpbnQgZ2V0TG9ja0xldmVsKE9wZW5KUEFTdGF0ZU1hbmFn\nZXIgc20pIHsKICAgICAgICB3aGlsZSAoc20uZ2V0T3duZXIoKSAhPSBudWxs\nKQogICAgICAgICAgICBzbSA9IHNtLmdldE93bmVyKCk7CiAgICAgICAgTnVt\nYmVyIGxldmVsID0gKE51bWJlcikgc20uZ2V0TG9jaygpOwogICAgICAgIHJl\ndHVybiAobGV2ZWwgPT0gbnVsbCkgPyBMT0NLX05PTkUgOiBsZXZlbC5pbnRW\nYWx1ZSgpOwogICAgfQoKICAgIC8qKgogICAgICogU2V0cyB0aGUgZ2l2ZW4g\naW5zdGFuY2UncyBsb2NrIGxldmVsIHRvIHRoZSBnaXZlbiBudW1iZXIuIE92\nZXJyaWRlCiAgICAgKiB0byBzdG9yZSBzb21ldGhpbmcgZWxzZSBhcyB0aGUg\nbG9jay4KICAgICAqLwogICAgcHJvdGVjdGVkIHZvaWQgc2V0TG9ja0xldmVs\nKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIGludCBsZXZlbCkgewogICAgICAg\nIHNtLnNldExvY2soTnVtYmVycy52YWx1ZU9mKGxldmVsKSk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBOdWxscyBnaXZlbiBpbnN0YW5jZSdzIGxvY2sgb2Jq\nZWN0LgogICAgICovCiAgICBwdWJsaWMgdm9pZCByZWxlYXNlKE9wZW5KUEFT\ndGF0ZU1hbmFnZXIgc20pIHsKICAgICAgICBzbS5zZXRMb2NrKG51bGwpOwog\nICAgfQoKICAgIC8qKgogICAgICogRGVsZWdhdGVzIHRvIHtAbGluayAjbG9j\na0ludGVybmFsfSBhZnRlciB0cmF2ZXJzaW5nIHRvIG93bmluZwogICAgICog\naW5zdGFuY2UgKGlmIGVtYmVkZGVkKSBhbmQgYXNzdXJpbmcgdGhhdCB0aGUg\naW5zdGFuY2UgaXMgcGVyc2lzdGVudCwKICAgICAqIGlzIG5vdCBuZXcsIGFu\nZCBpcyBub3QgYWxyZWFkeSBsb2NrZWQgYXQgYSBoaWdoZXIgbGV2ZWwuIEFm\ndGVyCiAgICAgKiBsb2NraW5nLCBjYWxscyB7QGxpbmsgI3NldExvY2tMZXZl\nbH0gd2l0aCB0aGUgZ2l2ZW4gbGV2ZWwuCiAgICAgKi8KICAgIHB1YmxpYyB2\nb2lkIGxvY2soT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgaW50IGxldmVsLCBp\nbnQgdGltZW91dCwKICAgICAgICBPYmplY3Qgc2RhdGEpIHsKICAgICAgICBp\nZiAobGV2ZWwgPT0gTE9DS19OT05FKQogICAgICAgICAgICByZXR1cm47CiAg\nICAgICAgd2hpbGUgKHNtLmdldE93bmVyKCkgIT0gbnVsbCkKICAgICAgICAg\nICAgc20gPSBzbS5nZXRPd25lcigpOwogICAgICAgIGludCBvbGRMZXZlbCA9\nIGdldExvY2tMZXZlbChzbSk7CiAgICAgICAgaWYgKCFzbS5pc1BlcnNpc3Rl\nbnQoKSB8fCBzbS5pc05ldygpIHx8IGxldmVsIDw9IG9sZExldmVsKQogICAg\nICAgICAgICByZXR1cm47CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGxv\nY2tJbnRlcm5hbChzbSwgbGV2ZWwsIHRpbWVvdXQsIHNkYXRhKTsKICAgICAg\nICB9IGNhdGNoIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAgICAg\nIC8vIHJldmVydCBsb2NrCiAgICAgICAgICAgIHNldExvY2tMZXZlbChzbSwg\nb2xkTGV2ZWwpOwogICAgICAgICAgICB0aHJvdyByZTsKICAgICAgICB9CiAg\nICB9CgogICAgLyoqCiAgICAgKiBNYXJrcyB0aGUgaW5zdGFuY2UncyB0cmFu\nc2FjdGlvbmFsIHN0YXR1cyBpbiBhY2NvcmRhbmNlIHdpdGgKICAgICAqIHRo\nZSBzZXR0aW5ncyBvZiB7QGxpbmsgI2dldFZlcnNpb25DaGVja09uUmVhZExv\nY2t9CiAgICAgKiBhbmQge0BsaW5rICNnZXRWZXJzaW9uVXBkYXRlT25Xcml0\nZUxvY2t9LiBPdmVycmlkZSB0byBwZXJmb3JtCiAgICAgKiBhZGRpdGlvbmFs\nIGxvY2tpbmcuCiAgICAgKgogICAgICogQHNlZSBTdG9yZUNvbnRleHQjdHJh\nbnNhY3Rpb25hbAogICAgICovCiAgICBwcm90ZWN0ZWQgdm9pZCBsb2NrSW50\nZXJuYWwoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgaW50IGxldmVsLCBpbnQg\ndGltZW91dCwKICAgICAgICBPYmplY3Qgc2RhdGEpIHsKICAgICAgICAvLyBT\nZXQgbG9jayBsZXZlbCBmaXJzdCB0byBwcmV2ZW50IGluZmluaXRlIHJlY3Vy\nc2lvbiB3aXRoCiAgICAgICAgLy8gdHJhbnNhY3Rpb25hbCguLikgY2FsbAog\nICAgICAgIHNldExvY2tMZXZlbChzbSwgbGV2ZWwpOwogICAgICAgIGlmIChs\nZXZlbCA+PSBMb2NrTGV2ZWxzLkxPQ0tfV1JJVEUgJiYgX3ZlcnNpb25VcGRh\ndGVPbldyaXRlTG9jaykKICAgICAgICAgICAgZ2V0Q29udGV4dCgpLnRyYW5z\nYWN0aW9uYWwoc20uZ2V0TWFuYWdlZEluc3RhbmNlKCksIHRydWUsIG51bGwp\nOwogICAgICAgIGVsc2UgaWYgKGxldmVsID49IExvY2tMZXZlbHMuTE9DS19S\nRUFEICYmIF92ZXJzaW9uQ2hlY2tPblJlYWRMb2NrKQogICAgICAgICAgICBn\nZXRDb250ZXh0KCkudHJhbnNhY3Rpb25hbChzbS5nZXRNYW5hZ2VkSW5zdGFu\nY2UoKSwgZmFsc2UsIG51bGwpOwogICAgfQoKICAgIC8qKgogICAgICogV2hl\ndGhlciBvciBub3Qgd2Ugc2hvdWxkIGZvcmNlIGEgdmVyc2lvbiBjaGVjayBh\ndCBjb21taXQKICAgICAqIHRpbWUgd2hlbiBhIHJlYWQgbG9jayBpcyByZXF1\nZXN0ZWQgaW4gb3JkZXIgdG8gdmVyaWZ5IHJlYWQKICAgICAqIGNvbnNpc3Rl\nbmN5LiBEZWZhdWx0cyB0byB0cnVlLgogICAgICovCiAgICBwdWJsaWMgdm9p\nZCBzZXRWZXJzaW9uQ2hlY2tPblJlYWRMb2NrKGJvb2xlYW4gdmVyc2lvbkNo\nZWNrT25SZWFkTG9jaykgewogICAgICAgIF92ZXJzaW9uQ2hlY2tPblJlYWRM\nb2NrID0gdmVyc2lvbkNoZWNrT25SZWFkTG9jazsKICAgIH0KCiAgICAvKioK\nICAgICAqIFdoZXRoZXIgb3Igbm90IHdlIHNob3VsZCBmb3JjZSBhIHZlcnNp\nb24gY2hlY2sgYXQgY29tbWl0CiAgICAgKiB0aW1lIHdoZW4gYSByZWFkIGxv\nY2sgaXMgcmVxdWVzdGVkIGluIG9yZGVyIHRvIHZlcmlmeSByZWFkCiAgICAg\nKiBjb25zaXN0ZW5jeS4gRGVmYXVsdHMgdG8gdHJ1ZS4KICAgICAqLwogICAg\ncHVibGljIGJvb2xlYW4gZ2V0VmVyc2lvbkNoZWNrT25SZWFkTG9jaygpIHsK\nICAgICAgICByZXR1cm4gX3ZlcnNpb25DaGVja09uUmVhZExvY2s7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBXaGV0aGVyIG9yIG5vdCB3ZSBzaG91bGQgZm9y\nY2UgYW4gdXBkYXRlIHRvIHRoZSB2ZXJzaW9uIGF0IGNvbW1pdAogICAgICog\ndGltZSB3aGVuIGEgd3JpdGUgbG9jayBpcyByZXF1ZXN0ZWQuIERlZmF1bHRz\nIHRvIHRydWUuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFZlcnNpb25V\ncGRhdGVPbldyaXRlTG9jayhib29sZWFuIHZlcnNpb25VcGRhdGVPbldyaXRl\nTG9jaykgewogICAgICAgIF92ZXJzaW9uVXBkYXRlT25Xcml0ZUxvY2sgPSB2\nZXJzaW9uVXBkYXRlT25Xcml0ZUxvY2s7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBXaGV0aGVyIG9yIG5vdCB3ZSBzaG91bGQgZm9yY2UgYW4gdXBkYXRlIHRv\nIHRoZSB2ZXJzaW9uIGF0IGNvbW1pdAogICAgICogdGltZSB3aGVuIGEgd3Jp\ndGUgbG9jayBpcyByZXF1ZXN0ZWQuIERlZmF1bHRzIHRvIHRydWUuCiAgICAg\nKi8KICAgIHB1YmxpYyBib29sZWFuIGdldFZlcnNpb25VcGRhdGVPbldyaXRl\nTG9jaygpIHsKICAgICAgICByZXR1cm4gX3ZlcnNpb25VcGRhdGVPbldyaXRl\nTG9jazsKICAgIH0KfQo=\n","encoding":"base64"}

