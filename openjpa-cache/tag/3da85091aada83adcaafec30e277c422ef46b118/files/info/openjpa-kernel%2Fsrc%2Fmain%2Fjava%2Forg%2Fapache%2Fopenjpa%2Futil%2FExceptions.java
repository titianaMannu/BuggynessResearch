{"sha":"c212e2ad4571317adc0074cf6b272cd3d81a329c","node_id":"MDQ6QmxvYjIwNjM2NDpjMjEyZTJhZDQ1NzEzMTdhZGMwMDc0Y2Y2YjI3MmNkM2Q4MWEzMjlj","size":9122,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/c212e2ad4571317adc0074cf6b272cd3d81a329c","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbDsKCmltcG9ydCBqYXZh\nLmlvLk9iamVjdE91dHB1dFN0cmVhbTsKaW1wb3J0IGphdmEuaW8uT3V0cHV0\nU3RyZWFtOwppbXBvcnQgamF2YS5pby5QcmludFN0cmVhbTsKaW1wb3J0IGph\ndmEuaW8uUHJpbnRXcml0ZXI7CmltcG9ydCBqYXZhLmlvLlNlcmlhbGl6YWJs\nZTsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOwppbXBvcnQgamF2YS51\ndGlsLkl0ZXJhdG9yOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5jb25m\nLk9wZW5KUEFWZXJzaW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmVu\naGFuY2UuUGVyc2lzdGVuY2VDYXBhYmxlOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmxpYi51dGlsLkphdmFWZXJzaW9uczsKCi8qKgogKiBVdGlsaXR5\nIG1ldGhvZHMgZm9yIGV4dGVybmFsaXppbmcgYW5kIGhhbmRsaW5nIGV4Y2Vw\ndGlvbnMuCiAqCiAqIEBhdXRob3IgTWFyYyBQcnVkJ2hvbW1lYXV4CiAqIEBz\naW5jZSAwLjIuNQogKiBAbm9qYXZhZG9jCiAqLwpwdWJsaWMgY2xhc3MgRXhj\nZXB0aW9ucyB7CgogICAgcHVibGljIHN0YXRpYyBmaW5hbCBUaHJvd2FibGVb\nXSBFTVBUWV9USFJPV0FCTEVTID0gbmV3IFRocm93YWJsZVswXTsKCiAgICBz\ndGF0aWMgZmluYWwgU3RyaW5nIFNFUCA9IFN5c3RlbS5nZXRQcm9wZXJ0eSgi\nbGluZS5zZXBhcmF0b3IiKTsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBP\ndXRwdXRTdHJlYW0gREVWX05VTEwgPSBuZXcgT3V0cHV0U3RyZWFtKCkgewog\nICAgICAgIHB1YmxpYyB2b2lkIHdyaXRlKGludCBiKSB7CiAgICAgICAgfQog\nICAgfTsKCiAgICAvKioKICAgICAqIFRlc3QgdG8gc2VlIGlmIHRoZSBzcGVj\naWZpZWQgb2JqZWN0IHdpbGwgYmUgYWJsZSB0byBiZSBzZXJpYWxpemVkLiBU\naGlzCiAgICAgKiB3aWxsIGNoZWNrIGlmIHRoZSBvYmplY3QgaW1wbGVtZW50\ncyB7QGxpbmsgU2VyaWFsaXphYmxlfSwgYW5kIGlmIHNvLAogICAgICogd2ls\nbCB0cnkgdG8gcGVyZm9ybSBhbiBhY3R1YWwgc2VyaWFsaXphdGlvbi4gVGhp\ncyBpcyBpbiBjYXNlIHRoZSBvYmplY3QKICAgICAqIGhhcyBmaWVsZHMgd2hp\nY2gsIGluIHR1cm4sIGFyZSBub3Qgc2VyaWFsaXphYmxlLgogICAgICoKICAg\nICAqIEBwYXJhbSBvYiB0aGUgb2JqZWN0IHRvIHRlc3QKICAgICAqIEByZXR1\ncm4gdHJ1ZSBpZiB0aGUgb2JqZWN0IHdpbGwgYmUgYWJsZSB0byBiZSBzZXJp\nYWxpemVkCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGljIGJvb2xlYW4gaXNT\nZXJpYWxpemFibGUoT2JqZWN0IG9iKSB7CiAgICAgICAgaWYgKCEob2IgaW5z\ndGFuY2VvZiBTZXJpYWxpemFibGUpKQogICAgICAgICAgICByZXR1cm4gZmFs\nc2U7CgogICAgICAgIC8vIGRvbid0IHNlcmlhbGl6ZSBwZXJzaXN0ZW50IG9i\namVjdHMgZXhjZXB0aW9ucyB0byBwcmV2ZW50CiAgICAgICAgLy8gcmVhZGlu\nZyBpbiBhbGwgdGhlIHN0YXRlCiAgICAgICAgaWYgKCFJbXBsSGVscGVyLmlz\nTWFuYWdlZFR5cGUob2IuZ2V0Q2xhc3MoKSkpCiAgICAgICAgICAgIHJldHVy\nbiBmYWxzZTsKCiAgICAgICAgLy8gbm93IGRvIGFuIGFjdHVhbCB0ZXN0IHRv\nIHNlZSBpZiB3ZSB3aWxsIGJlCiAgICAgICAgLy8gYWJsZSB0byBwZXJmb3Jt\nIHRoZSBzZXJpYWxpemF0aW9uCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\nbmV3IE9iamVjdE91dHB1dFN0cmVhbShERVZfTlVMTCkud3JpdGVPYmplY3Qo\nb2IpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGNhdGNo\nIChUaHJvd2FibGUgdCkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAg\nICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogU2FmZWx5IHN0cmluZ2lm\neSB0aGUgZ2l2ZW4gb2JqZWN0LgogICAgICovCiAgICBwdWJsaWMgc3RhdGlj\nIFN0cmluZyB0b1N0cmluZyhPYmplY3Qgb2IpIHsKICAgICAgICBpZiAob2Ig\nPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuICJudWxsIjsKCiAgICAgICAg\nLy8gZG9uJ3QgdGFrZSBvaWQgb2YgbmV3IG9iamVjdHMgc2luY2UgaXQgY2Fu\nIGNhdXNlIGEgZmx1c2ggaWYgYXV0by1pbmMKICAgICAgICAvLyBhbmQgdGhl\nIGlkIGlzIG1lYW5pbmdsZXNzIGFueXdheQogICAgICAgIE9iamVjdCBvaWQg\nPSBnZXRPYmplY3RJZChvYik7CgogICAgICAgIGlmIChvaWQgIT0gbnVsbCkg\newogICAgICAgICAgICBpZiAob2lkIGluc3RhbmNlb2YgSWQpCiAgICAgICAg\nICAgICAgICByZXR1cm4gb2lkLnRvU3RyaW5nKCk7CiAgICAgICAgICAgIHJl\ndHVybiBvYi5nZXRDbGFzcygpLmdldE5hbWUoKSArICItIiArIG9pZC50b1N0\ncmluZygpOwogICAgICAgIH0KCiAgICAgICAgaWYgKEltcGxIZWxwZXIuaXNN\nYW5hZ2VkVHlwZShvYi5nZXRDbGFzcygpKSkgewogICAgICAgICAgICAvLyBu\nZXZlciBjYWxsIHRvU3RyaW5nKCkgb24gYSBQZXJzaXN0ZW5jZUNhcGFibGUs\nIHNpbmNlCiAgICAgICAgICAgIC8vIGl0IG1heSBhY2Nlc3MgcGVyc2lzdGVu\ndCBmaWVsZHM7IGZhbGwtYmFjayB0byB1c2luZwogICAgICAgICAgICAvLyB0\naGUgc3RhbmRhcmQgb2JqZWN0IHN0cmluZ2lmaWNhdGlvbiBtZWNoYW5pc20u\nIE5ldwogICAgICAgICAgICAvLyBpbnN0YW5jZXMgdGhhdCB1c2UgcHJveHlp\nbmcgKHByb3BlcnR5LWFjY2VzcyBpbnN0YW5jZXMsCiAgICAgICAgICAgIC8v\nIGZvciBleGFtcGxlKSB0aGF0IHdlcmUgY3JlYXRlZCB3aXRoIHRoZSAnbmV3\nJyBrZXl3b3JkCiAgICAgICAgICAgIC8vIHdpbGwgbm90IGVuZCB1cCBpbiB0\naGlzIGNvZGUsIHdoaWNoIGlzIG9rIHNpbmNlIHRoZXkKICAgICAgICAgICAg\nLy8gZG9uJ3QgZG8gbGF6eSBsb2FkaW5nIGFueXdheXMsIHNvIHRoZXkgd2ls\nbCBzdHJpbmdpZnkKICAgICAgICAgICAgLy8gc2FmZWx5LgogICAgICAgICAg\nICByZXR1cm4gb2IuZ2V0Q2xhc3MoKS5nZXROYW1lKCkgKyAiQCIKICAgICAg\nICAgICAgICAgICsgSW50ZWdlci50b0hleFN0cmluZyhTeXN0ZW0uaWRlbnRp\ndHlIYXNoQ29kZShvYikpOwogICAgICAgIH0KCiAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgU3RyaW5nIHMgPSBvYi50b1N0cmluZygpOwogICAgICAgICAg\nICBpZiAocy5pbmRleE9mKG9iLmdldENsYXNzKCkuZ2V0TmFtZSgpKSA9PSAt\nMSkKICAgICAgICAgICAgICAgIHMgKz0gIiBbIiArIG9iLmdldENsYXNzKCku\nZ2V0TmFtZSgpICsgIl0iOwogICAgICAgICAgICByZXR1cm4gczsKICAgICAg\nICB9IGNhdGNoIChUaHJvd2FibGUgdCkgewogICAgICAgICAgICByZXR1cm4g\nb2IuZ2V0Q2xhc3MoKS5nZXROYW1lKCk7CiAgICAgICAgfQogICAgfQoKICAg\nIC8qKgogICAgICogU2FmZWx5IHN0cmluZ2lmeSB0aGUgZ2l2ZW4gb2JqZWN0\ncy4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBTdHJpbmcgdG9TdHJpbmco\nQ29sbGVjdGlvbiBmYWlsZWQpIHsKICAgICAgICBTdHJpbmdCdWZmZXIgYnVm\nID0gbmV3IFN0cmluZ0J1ZmZlcigpOwogICAgICAgIGJ1Zi5hcHBlbmQoIlsi\nKTsKICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9IGZhaWxlZC5pdGVyYXRv\ncigpOyBpdHIuaGFzTmV4dCgpOykgewogICAgICAgICAgICBidWYuYXBwZW5k\nKEV4Y2VwdGlvbnMudG9TdHJpbmcoaXRyLm5leHQoKSkpOwogICAgICAgICAg\nICBpZiAoaXRyLmhhc05leHQoKSkKICAgICAgICAgICAgICAgIGJ1Zi5hcHBl\nbmQoIiwgIik7CiAgICAgICAgfQogICAgICAgIGJ1Zi5hcHBlbmQoIl0iKTsK\nICAgICAgICByZXR1cm4gYnVmLnRvU3RyaW5nKCk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBTdHJpbmdpZnkgdGhlIGdpdmVuIGV4Y2VwdGlvbi4KICAgICAq\nLwogICAgcHVibGljIHN0YXRpYyBTdHJpbmcgdG9TdHJpbmcoRXhjZXB0aW9u\nSW5mbyBlKSB7CiAgICAgICAgaW50IHR5cGUgPSBlLmdldFR5cGUoKTsKICAg\nICAgICBTdHJpbmdCdWZmZXIgYnVmID0gbmV3IFN0cmluZ0J1ZmZlcigpOwog\nICAgICAgIGJ1Zi5hcHBlbmQoIjwiKS4KICAgICAgICAgICAgYXBwZW5kKE9w\nZW5KUEFWZXJzaW9uLlZFUlNJT05fTlVNQkVSKS5hcHBlbmQoJyAnKS4KICAg\nICAgICAgICAgYXBwZW5kKGUuaXNGYXRhbCgpID8gImZhdGFsICIgOiAibm9u\nZmF0YWwgIikuCiAgICAgICAgICAgIGFwcGVuZCAodHlwZSA9PSBFeGNlcHRp\nb25JbmZvLkdFTkVSQUwgPyAiZ2VuZXJhbCBlcnJvciIgOgogICAgICAgICAg\nICAgICAgdHlwZSA9PSBFeGNlcHRpb25JbmZvLklOVEVSTkFMID8gImludGVy\nbmFsIGVycm9yIiA6CiAgICAgICAgICAgICAgICB0eXBlID09IEV4Y2VwdGlv\nbkluZm8uU1RPUkUgPyAic3RvcmUgZXJyb3IiIDoKICAgICAgICAgICAgICAg\nIHR5cGUgPT0gRXhjZXB0aW9uSW5mby5VTlNVUFBPUlRFRCA/ICJ1bnN1cHBv\ncnRlZCBlcnJvciIgOgogICAgICAgICAgICAgICAgdHlwZSA9PSBFeGNlcHRp\nb25JbmZvLlVTRVIgPyAidXNlciBlcnJvciIgOgogICAgICAgICAgICAgICAg\nKHR5cGUgKyAiIGVycm9yIikpLgogICAgICAgICAgICBhcHBlbmQoIj4gIik7\nCiAgICAgICAgYnVmLmFwcGVuZChlLmdldENsYXNzKCkuZ2V0TmFtZSgpKS5h\ncHBlbmQoIjogIikuCiAgICAgICAgICAgIGFwcGVuZChlLmdldE1lc3NhZ2Uo\nKSk7CiAgICAgICAgT2JqZWN0IGZhaWxlZCA9IGUuZ2V0RmFpbGVkT2JqZWN0\nKCk7CiAgICAgICAgaWYgKGZhaWxlZCAhPSBudWxsKQogICAgICAgICAgICBi\ndWYuYXBwZW5kKFNFUCkuYXBwZW5kKCJGYWlsZWRPYmplY3Q6ICIpLgogICAg\nICAgICAgICAgICAgYXBwZW5kKHRvU3RyaW5nKGZhaWxlZCkpOwogICAgICAg\nIHJldHVybiBidWYudG9TdHJpbmcoKTsKICAgIH0KCiAgICAvKioKICAgICAq\nIFByaW50IHRoZSBzdGFjayB0cmFjZSBvZiB0aGUgZXhjZXB0aW9uJ3MgbmVz\ndGVkIHRocm93YWJsZXMuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgdm9p\nZCBwcmludE5lc3RlZFRocm93YWJsZXMoRXhjZXB0aW9uSW5mbyBlLCBQcmlu\ndFN0cmVhbSBvdXQpIHsKICAgICAgICAvLyBpZiB0aGlzIGlzIEphdmEgMS40\nIGFuZCB0aGVyZSBpcyBleGFjdGx5IGEgc2luZ2xlCiAgICAgICAgLy8gZXhj\nZXB0aW9uLCB0aGVuIGRlZmVyIHRvIDEuNCdzIGJlaGF2aW9yIG9mIHByaW50\naW5nCiAgICAgICAgLy8gb3V0IHRoZSByZXN1bHQgb2YgZ2V0Q2F1c2UoKS4g\nVGhpcyBkZWZlcnJhbCBoYXBwZW5zIGluCiAgICAgICAgLy8gdGhlIGNhbGxp\nbmcgY29kZS4KICAgICAgICBUaHJvd2FibGVbXSBuZXN0ZWQgPSBlLmdldE5l\nc3RlZFRocm93YWJsZXMoKTsKICAgICAgICBpbnQgaSA9IChKYXZhVmVyc2lv\nbnMuVkVSU0lPTiA+PSA0KSA/IDEgOiAwOwogICAgICAgIGlmIChpIDwgbmVz\ndGVkLmxlbmd0aCkgewogICAgICAgICAgICBvdXQucHJpbnRsbigiTmVzdGVk\nVGhyb3dhYmxlczoiKTsKICAgICAgICAgICAgZm9yICg7IGkgPCBuZXN0ZWQu\nbGVuZ3RoOyBpKyspCiAgICAgICAgICAgICAgICBuZXN0ZWRbaV0ucHJpbnRT\ndGFja1RyYWNlKG91dCk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAg\nICogUHJpbnQgdGhlIHN0YWNrIHRyYWNlIG9mIHRoZSBleGNlcHRpb24ncyBu\nZXN0ZWQgdGhyb3dhYmxlcy4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyB2\nb2lkIHByaW50TmVzdGVkVGhyb3dhYmxlcyhFeGNlcHRpb25JbmZvIGUsIFBy\naW50V3JpdGVyIG91dCkgewogICAgICAgIC8vIGlmIHRoaXMgaXMgSmF2YSAx\nLjQgYW5kIHRoZXJlIGlzIGV4YWN0bHkgYSBzaW5nbGUKICAgICAgICAvLyBl\neGNlcHRpb24sIHRoZW4gZGVmZXIgdG8gMS40J3MgYmVoYXZpb3Igb2YgcHJp\nbnRpbmcKICAgICAgICAvLyBvdXQgdGhlIHJlc3VsdCBvZiBnZXRDYXVzZSgp\nLiBUaGlzIGRlZmVycmFsIGhhcHBlbnMgaW4KICAgICAgICAvLyB0aGUgY2Fs\nbGluZyBjb2RlLgogICAgICAgIFRocm93YWJsZVtdIG5lc3RlZCA9IGUuZ2V0\nTmVzdGVkVGhyb3dhYmxlcygpOwogICAgICAgIGludCBpID0gKEphdmFWZXJz\naW9ucy5WRVJTSU9OID49IDQpID8gMSA6IDA7CiAgICAgICAgaWYgKGkgPCBu\nZXN0ZWQubGVuZ3RoKSB7CiAgICAgICAgICAgIG91dC5wcmludGxuKCJOZXN0\nZWRUaHJvd2FibGVzOiIpOwogICAgICAgICAgICBmb3IgKDsgaSA8IG5lc3Rl\nZC5sZW5ndGg7IGkrKykKICAgICAgICAgICAgICAgIG5lc3RlZFtpXS5wcmlu\ndFN0YWNrVHJhY2Uob3V0KTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAg\nICAgKiBDb252ZXJ0IHRoZSBzcGVjaWZpZWQgZmFpbGVkIG9iamVjdCBpbnRv\nIGEgc2VyaWFsaXphYmxlCiAgICAgKiBvYmplY3QgZm9yIHdoZW4gd2UgYXJl\nIHNlcmlhbGl6aW5nIGFuIEV4Y2VwdGlvbi4gSXQgd2lsbAogICAgICogdHJ5\nIHRoZSBmb2xsb3dpbmc6CiAgICAgKiA8dWw+CiAgICAgKiA8bGk+aWYgdGhl\nIG9iamVjdCBjYW4gYmUgc2VyaWFsaXplZCwgcmV0dXJuIHRoZSBvYmplY3Qg\naXRzZWxmPC9saT4KICAgICAqIDxsaT5pZiB0aGUgb2JqZWN0IGhhcyBhIHNl\ncmlhbGl6YWJsZSBvaWQsIHJldHVybiB0aGUgb2lkPC9saT4KICAgICAqIDxs\naT5pZiB0aGUgb2JqZWN0IGhhcyBhIG5vbi1zZXJpYWxpemFibGUgb2lkLCBy\nZXR1cm4gdGhlIG9pZCdzCiAgICAgKiB0b1N0cmluZyBhbmQgdGhlIG9iamVj\ndCBjbGFzczwvbGk+CiAgICAgKiA8bGk+cmV0dXJuIHRoZSBvYmplY3QncyB0\nb1N0cmluZzwvbGk+CiAgICAgKiA8L3VsPgogICAgICoKICAgICAqIEBwYXJh\nbSBvYiB0aGUgb2JqZWN0IHRvIGNvbnZlcnQKICAgICAqIEByZXR1cm4gc29t\nZSBzZXJpYWxpemVkIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBvYmplY3QKICAg\nICAqLwogICAgcHVibGljIHN0YXRpYyBPYmplY3QgcmVwbGFjZUZhaWxlZE9i\namVjdChPYmplY3Qgb2IpIHsKICAgICAgICBpZiAob2IgPT0gbnVsbCkKICAg\nICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKGlzU2VyaWFsaXph\nYmxlKG9iKSkKICAgICAgICAgICAgcmV0dXJuIG9iOwoKICAgICAgICAvLyBk\nb24ndCB0YWtlIG9pZCBvZiBuZXcgb2JqZWN0cyBzaW5jZSBpdCBjYW4gY2F1\nc2UgYSBmbHVzaCBpZiBhdXRvLWluYwogICAgICAgIC8vIGFuZCB0aGUgaWQg\naXMgbWVhbmluZ2xlc3MgYW55d2F5CiAgICAgICAgT2JqZWN0IG9pZCA9IGdl\ndE9iamVjdElkKG9iKTsKICAgICAgICBpZiAob2lkICE9IG51bGwgJiYgaXNT\nZXJpYWxpemFibGUob2lkKSkKICAgICAgICAgICAgcmV0dXJuIG9pZDsKCiAg\nICAgICAgLy8gbGFzdCBkaXRjaDogc3RyaW5naWZ5IHRoZSBvYmplY3QKICAg\nICAgICByZXR1cm4gdG9TdHJpbmcob2IpOwogICAgfQoKICAgIC8qKgogICAg\nICogQ29udmVydCB0aGUgc3BlY2lmaWVkIHRocm93YWJsZXMgaW50byBhIHNl\ncmlhbHphYmxlIGFycmF5LiBJZgogICAgICogYW55IG9mIHRoZSBuZXN0ZWQg\ndGhyb3dhYmxlcyBjYW5ub3QgYmUgc2VyaWFsaXplZCwgdGhleSB3aWxsCiAg\nICAgKiBiZSBjb252ZXJ0ZWQgaW50byBhIEV4Y2VwdGlvbiB3aXRoIHRoZSBv\ncmlnaW5hbCBtZXNzYWdlLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIFRo\ncm93YWJsZVtdIHJlcGxhY2VOZXN0ZWRUaHJvd2FibGVzKFRocm93YWJsZVtd\nIG5lc3RlZCkgewogICAgICAgIGlmIChuZXN0ZWQgPT0gbnVsbCB8fCBuZXN0\nZWQubGVuZ3RoID09IDApCiAgICAgICAgICAgIHJldHVybiBuZXN0ZWQ7CiAg\nICAgICAgaWYgKGlzU2VyaWFsaXphYmxlKG5lc3RlZCkpCiAgICAgICAgICAg\nIHJldHVybiBuZXN0ZWQ7CgogICAgICAgIFRocm93YWJsZVtdIG5ld05lc3Rl\nZCA9IG5ldyBUaHJvd2FibGVbbmVzdGVkLmxlbmd0aF07CiAgICAgICAgZm9y\nIChpbnQgaSA9IDA7IGkgPCBuZXN0ZWQubGVuZ3RoOyBpKyspIHsKICAgICAg\nICAgICAgaWYgKGlzU2VyaWFsaXphYmxlKG5lc3RlZFtpXSkpCiAgICAgICAg\nICAgICAgICBuZXdOZXN0ZWRbaV0gPSBuZXN0ZWRbaV07CiAgICAgICAgICAg\nIGVsc2UKICAgICAgICAgICAgICAgIG5ld05lc3RlZFtpXSA9IG5ldyBFeGNl\ncHRpb24obmVzdGVkW2ldLnRvU3RyaW5nKCkpOwogICAgICAgIH0KICAgICAg\nICByZXR1cm4gbmV3TmVzdGVkOwogICAgfQoKICAgIC8qKgogICAgICogUmV0\ndXJuIHRoZSBvYmplY3QgaWQgZm9yIDxjb2RlPm9iPC9jb2RlPiBpZiBpdCBo\nYXMgb25lLCBvcgogICAgICogPGNvZGU+bnVsbDwvY29kZT4gb3RoZXJ3aXNl\nLgogICAgICovCiAgICBwcml2YXRlIHN0YXRpYyBPYmplY3QgZ2V0T2JqZWN0\nSWQoT2JqZWN0IG9iKSB7CiAgICAgICAgaWYgKG9iIGluc3RhbmNlb2YgUGVy\nc2lzdGVuY2VDYXBhYmxlCiAgICAgICAgICAgICYmICEoKFBlcnNpc3RlbmNl\nQ2FwYWJsZSkgb2IpLnBjSXNOZXcoKSkKICAgICAgICAgICAgcmV0dXJuICgo\nUGVyc2lzdGVuY2VDYXBhYmxlKSBvYikucGNGZXRjaE9iamVjdElkKCk7CiAg\nICAgICAgZWxzZQoJCQlyZXR1cm4gbnVsbDsKCX0KfQo=\n","encoding":"base64"}

