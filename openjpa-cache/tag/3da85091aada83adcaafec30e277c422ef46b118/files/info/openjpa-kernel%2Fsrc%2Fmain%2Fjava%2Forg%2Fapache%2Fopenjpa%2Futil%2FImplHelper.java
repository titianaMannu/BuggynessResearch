{"sha":"44befe5113d91253196b6bffbc5d6e25409c6ebf","node_id":"MDQ6QmxvYjIwNjM2NDo0NGJlZmU1MTEzZDkxMjUzMTk2YjZiZmZiYzVkNmUyNTQwOWM2ZWJm","size":8581,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/44befe5113d91253196b6bffbc5d6e25409c6ebf","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbDsKCmltcG9ydCBqYXZh\nLnV0aWwuQXJyYXlMaXN0OwppbXBvcnQgamF2YS51dGlsLkJpdFNldDsKaW1w\nb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOwppbXBvcnQgamF2YS51dGlsLkNv\nbGxlY3Rpb25zOwppbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9yOwppbXBvcnQg\namF2YS51dGlsLk1hcDsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuZW5o\nYW5jZS5QZXJzaXN0ZW5jZUNhcGFibGU7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEua2VybmVsLkZldGNoQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5rZXJuZWwuTG9ja01hbmFnZXI7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEua2VybmVsLk9wZW5KUEFTdGF0ZU1hbmFnZXI7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlBDU3RhdGU7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlN0b3JlQ29udGV4dDsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuU3RvcmVNYW5hZ2VyOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkNsb3NlYWJsZTsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5SZWZlcmVuY2VN\nYXA7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuVVVJREdl\nbmVyYXRvcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5j\nb25jdXJyZW50LkNvbmN1cnJlbnRIYXNoTWFwOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmxpYi51dGlsLmNvbmN1cnJlbnQuQ29uY3VycmVudFJlZmVy\nZW5jZUhhc2hNYXA7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5D\nbGFzc01ldGFEYXRhOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEu\nRmllbGRNZXRhRGF0YTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRh\nLkphdmFUeXBlczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLlNl\ncXVlbmNlTWV0YURhdGE7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0\nYS5WYWx1ZVN0cmF0ZWdpZXM7CgovKioKICogSGVscGVyIGZvciBPcGVuSlBB\nIGJhY2stZW5kcy4KICoKICogQHNpbmNlIDAuMy4wCiAqIEBhdXRob3IgQWJl\nIFdoaXRlCiAqIEBub2phdmFkb2MKICovCnB1YmxpYyBjbGFzcyBJbXBsSGVs\ncGVyIHsKCiAgICAvLyBDYWNoZSBmb3IgZnJvbS90byB0eXBlIGFzc2lnbm1l\nbnRzCiAgICBwcml2YXRlIHN0YXRpYyBDb25jdXJyZW50UmVmZXJlbmNlSGFz\naE1hcCBfYXNzaWduYWJsZVR5cGVzID0KICAgICAgICBuZXcgQ29uY3VycmVu\ndFJlZmVyZW5jZUhhc2hNYXAoUmVmZXJlbmNlTWFwLldFQUssIFJlZmVyZW5j\nZU1hcC5IQVJEKTsKCiAgICAvKioKICAgICAqIEhlbHBlciBmb3Igc3RvcmUg\nbWFuYWdlciBpbXBsZW1lbnRhdGlvbnMuIFRoaXMgbWV0aG9kIHNpbXBseSBk\nZWxlZ2F0ZXMKICAgICAqIHRvIHRoZSBwcm9wZXIgc2luZ3VsYXIgbWV0aG9k\nIGZvciBlYWNoIHN0YXRlIG1hbmFnZXIuCiAgICAgKgogICAgICogQHNlZSBT\ndG9yZU1hbmFnZXIjbG9hZEFsbAogICAgICogQHNpbmNlIDAuNC4wCiAgICAg\nKi8KICAgIHB1YmxpYyBzdGF0aWMgQ29sbGVjdGlvbiBsb2FkQWxsKENvbGxl\nY3Rpb24gc21zLCBTdG9yZU1hbmFnZXIgc3RvcmUsCiAgICAgICAgUENTdGF0\nZSBzdGF0ZSwgaW50IGxvYWQsIEZldGNoQ29uZmlndXJhdGlvbiBmZXRjaCwg\nT2JqZWN0IGNvbnRleHQpIHsKICAgICAgICBDb2xsZWN0aW9uIGZhaWxlZCA9\nIG51bGw7CiAgICAgICAgT3BlbkpQQVN0YXRlTWFuYWdlciBzbTsKICAgICAg\nICBMb2NrTWFuYWdlciBsbTsKICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9\nIHNtcy5pdGVyYXRvcigpOyBpdHIuaGFzTmV4dCgpOykgewogICAgICAgICAg\nICBzbSA9IChPcGVuSlBBU3RhdGVNYW5hZ2VyKSBpdHIubmV4dCgpOwogICAg\nICAgICAgICBpZiAoc20uZ2V0TWFuYWdlZEluc3RhbmNlKCkgPT0gbnVsbCkg\newogICAgICAgICAgICAgICAgaWYgKCFzdG9yZS5pbml0aWFsaXplKHNtLCBz\ndGF0ZSwgZmV0Y2gsIGNvbnRleHQpKQogICAgICAgICAgICAgICAgICAgIGZh\naWxlZCA9IGFkZEZhaWxlZElkKHNtLCBmYWlsZWQpOwogICAgICAgICAgICB9\nIGVsc2UgaWYgKGxvYWQgIT0gU3RvcmVNYW5hZ2VyLkZPUkNFX0xPQURfTk9O\nRQogICAgICAgICAgICAgICAgfHwgc20uZ2V0UENTdGF0ZSgpID09IFBDU3Rh\ndGUuSE9MTE9XKSB7CiAgICAgICAgICAgICAgICBsbSA9IHNtLmdldENvbnRl\neHQoKS5nZXRMb2NrTWFuYWdlcigpOwogICAgICAgICAgICAgICAgaWYgKCFz\ndG9yZS5sb2FkKHNtLCBzbS5nZXRVbmxvYWRlZChmZXRjaCksIGZldGNoLCAK\nICAgICAgICAgICAgICAgICAgICBsbS5nZXRMb2NrTGV2ZWwoc20pLCBjb250\nZXh0KSkKICAgICAgICAgICAgICAgICAgICBmYWlsZWQgPSBhZGRGYWlsZWRJ\nZChzbSwgZmFpbGVkKTsKICAgICAgICAgICAgfSBlbHNlIGlmICghc3RvcmUu\nZXhpc3RzKHNtLCBjb250ZXh0KSkKICAgICAgICAgICAgICAgIGZhaWxlZCA9\nIGFkZEZhaWxlZElkKHNtLCBmYWlsZWQpOwogICAgICAgIH0KICAgICAgICBy\nZXR1cm4gKGZhaWxlZCA9PSBudWxsKSA/IENvbGxlY3Rpb25zLkVNUFRZX0xJ\nU1QgOiBmYWlsZWQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBBZGQgaWRlbnRp\ndHkgb2YgZ2l2ZW4gaW5zdGFuY2UgdG8gY29sbGVjdGlvbi4KICAgICAqLwog\nICAgcHJpdmF0ZSBzdGF0aWMgQ29sbGVjdGlvbiBhZGRGYWlsZWRJZChPcGVu\nSlBBU3RhdGVNYW5hZ2VyIHNtLAogICAgICAgIENvbGxlY3Rpb24gZmFpbGVk\nKSB7CiAgICAgICAgaWYgKGZhaWxlZCA9PSBudWxsKQogICAgICAgICAgICBm\nYWlsZWQgPSBuZXcgQXJyYXlMaXN0KCk7CiAgICAgICAgZmFpbGVkLmFkZChz\nbS5nZXRJZCgpKTsKICAgICAgICByZXR1cm4gZmFpbGVkOwogICAgfQoKICAg\nIC8qKgogICAgICogR2VuZXJhdGUgYSB2YWx1ZSBmb3IgdGhlIGdpdmVuIG1l\ndGFkYXRhLCBvciByZXR1cm4gbnVsbC4gR2VuZXJhdGVzCiAgICAgKiB2YWx1\nZXMgZm9yIGh0ZSBmb2xsb3dpbmcgc3RyYXRlZ2llczoge0BsaW5rIFZhbHVl\nU3RyYXRlZ2llcyNTRVFVRU5DRX0sCiAgICAgKiB7QGxpbmsgVmFsdWVTdHJh\ndGVnaWVzI1VVSURfU1RSSU5HfSwge0BsaW5rIFZhbHVlU3RyYXRlZ2llcyNV\nVUlEX0hFWH0KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBPYmplY3QgZ2Vu\nZXJhdGVJZGVudGl0eVZhbHVlKFN0b3JlQ29udGV4dCBjdHgsCiAgICAgICAg\nQ2xhc3NNZXRhRGF0YSBtZXRhLCBpbnQgdHlwZUNvZGUpIHsKICAgICAgICBy\nZXR1cm4gZ2VuZXJhdGVWYWx1ZShjdHgsIG1ldGEsIG51bGwsIHR5cGVDb2Rl\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIEdlbmVyYXRlIGEgdmFsdWUgZm9y\nIHRoZSBnaXZlbiBtZXRhZGF0YSwgb3IgcmV0dXJuIG51bGwuIEdlbmVyYXRl\ncwogICAgICogdmFsdWVzIGZvciBodGUgZm9sbG93aW5nIHN0cmF0ZWdpZXM6\nIHtAbGluayBWYWx1ZVN0cmF0ZWdpZXMjU0VRVUVOQ0V9LAogICAgICoge0Bs\naW5rIFZhbHVlU3RyYXRlZ2llcyNVVUlEX1NUUklOR30sIHtAbGluayBWYWx1\nZVN0cmF0ZWdpZXMjVVVJRF9IRVh9CiAgICAgKi8KICAgIHB1YmxpYyBzdGF0\naWMgT2JqZWN0IGdlbmVyYXRlRmllbGRWYWx1ZShTdG9yZUNvbnRleHQgY3R4\nLAogICAgICAgIEZpZWxkTWV0YURhdGEgZm1kKSB7CiAgICAgICAgcmV0dXJu\nIGdlbmVyYXRlVmFsdWUoY3R4LCBmbWQuZ2V0RGVmaW5pbmdNZXRhRGF0YSgp\nLCBmbWQsIAogICAgICAgICAgICBmbWQuZ2V0RGVjbGFyZWRUeXBlQ29kZSgp\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIEdlbmVyYXRlIGEgdmFsdWUgZm9y\nIHRoZSBnaXZlbiBtZXRhZGFhLgogICAgICovCiAgICBwcml2YXRlIHN0YXRp\nYyBPYmplY3QgZ2VuZXJhdGVWYWx1ZShTdG9yZUNvbnRleHQgY3R4LAogICAg\nICAgIENsYXNzTWV0YURhdGEgbWV0YSwgRmllbGRNZXRhRGF0YSBmbWQsIGlu\ndCB0eXBlQ29kZSkgewogICAgICAgIGludCBzdHJhdGVneSA9IChmbWQgPT0g\nbnVsbCkgPyBtZXRhLmdldElkZW50aXR5U3RyYXRlZ3koKQogICAgICAgICAg\nICA6IGZtZC5nZXRWYWx1ZVN0cmF0ZWd5KCk7CiAgICAgICAgc3dpdGNoIChz\ndHJhdGVneSkgewogICAgICAgICAgICBjYXNlIFZhbHVlU3RyYXRlZ2llcy5T\nRVFVRU5DRToKICAgICAgICAgICAgICAgIFNlcXVlbmNlTWV0YURhdGEgc21k\nID0gKGZtZCA9PSBudWxsKQogICAgICAgICAgICAgICAgICAgID8gbWV0YS5n\nZXRJZGVudGl0eVNlcXVlbmNlTWV0YURhdGEoKQogICAgICAgICAgICAgICAg\nICAgIDogZm1kLmdldFZhbHVlU2VxdWVuY2VNZXRhRGF0YSgpOwogICAgICAg\nICAgICAgICAgcmV0dXJuIEphdmFUeXBlcy5jb252ZXJ0KHNtZC5nZXRJbnN0\nYW5jZShjdHguZ2V0Q2xhc3NMb2FkZXIoKSkuCiAgICAgICAgICAgICAgICAg\nICAgbmV4dChjdHgsIG1ldGEpLCB0eXBlQ29kZSk7CiAgICAgICAgICAgIGNh\nc2UgVmFsdWVTdHJhdGVnaWVzLlVVSURfU1RSSU5HOgogICAgICAgICAgICAg\nICAgcmV0dXJuIFVVSURHZW5lcmF0b3IubmV4dFN0cmluZygpOwogICAgICAg\nICAgICBjYXNlIFZhbHVlU3RyYXRlZ2llcy5VVUlEX0hFWDoKICAgICAgICAg\nICAgICAgIHJldHVybiBVVUlER2VuZXJhdG9yLm5leHRIZXgoKTsKICAgICAg\nICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwog\nICAgICAgIH0KICAgIH0KCiAgICAvKiogCiAgICAgKiBSZXR1cm5zIHRoZSBm\naWVsZHMgb2YgdGhlIHN0YXRlIHRoYXQgcmVxdWlyZSBhbiB1cGRhdGUuIAog\nICAgICogIAogICAgICogQHBhcmFtICBzbSAgdGhlIHN0YXRlIHRvIGNoZWNr\nCiAgICAgKiBAcmV0dXJuIHRoZSBCaXRTZXQgb2YgZmllbGRzIHRoYXQgbmVl\nZCB1cGRhdGUsIG9yIG51bGwgaWYgbm9uZQogICAgICovCiAgICBwdWJsaWMg\nc3RhdGljIEJpdFNldCBnZXRVcGRhdGVGaWVsZHMoT3BlbkpQQVN0YXRlTWFu\nYWdlciBzbSkgewogICAgICAgIGlmICgoc20uZ2V0UENTdGF0ZSgpID09IFBD\nU3RhdGUuUERJUlRZCiAgICAgICAgICAgICYmICghc20uaXNGbHVzaGVkKCkg\nfHwgc20uaXNGbHVzaGVkRGlydHkoKSkpCiAgICAgICAgICAgIHx8IChzbS5n\nZXRQQ1N0YXRlKCkgPT0gUENTdGF0ZS5QTkVXICYmIHNtLmlzRmx1c2hlZERp\ncnR5KCkpKSB7CiAgICAgICAgICAgIEJpdFNldCBkaXJ0eSA9IHNtLmdldERp\ncnR5KCk7CiAgICAgICAgICAgIGlmIChzbS5pc0ZsdXNoZWQoKSkgewogICAg\nICAgICAgICAgICAgZGlydHkgPSAoQml0U2V0KSBkaXJ0eS5jbG9uZSgpOwog\nICAgICAgICAgICAgICAgZGlydHkuYW5kTm90KHNtLmdldEZsdXNoZWQoKSk7\nCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGRpcnR5Lmxlbmd0aCgp\nID4gMCkKICAgICAgICAgICAgICAgIHJldHVybiBkaXJ0eTsKICAgICAgICB9\nCiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBD\nbG9zZSB0aGUgZ2l2ZW4gcmVzb3VyY2UuIFRoZSByZXNvdXJjZSBjYW4gYmUg\nYW4gZXh0ZW50IGl0ZXJhdG9yLAogICAgICogcXVlcnkgcmVzdWx0LCBsYXJn\nZSByZXN1bHQgc2V0IHJlbGF0aW9uLCBvciBhbnkgY2xvc2VhYmxlIE9wZW5K\nUEEKICAgICAqIGNvbXBvbmVudC4KICAgICAqLwogICAgcHVibGljIHN0YXRp\nYyB2b2lkIGNsb3NlKE9iamVjdCBvKSB7CiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgaWYgKG8gaW5zdGFuY2VvZiBDbG9zZWFibGUpCiAgICAgICAgICAg\nICAgICAoKENsb3NlYWJsZSkgbykuY2xvc2UoKTsKICAgICAgICB9IGNhdGNo\nIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAgICAgIHRocm93IHJl\nOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAg\nIHRocm93IG5ldyBHZW5lcmFsRXhjZXB0aW9uKGUpOwogICAgICAgIH0KICAg\nIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgc3BlY2lm\naWVkIGNsYXNzIGlzIGEgdHlwZSB0aGF0IGNhbiBiZSBtYW5hZ2VkIGJ5CiAg\nICAgKiBPcGVuSlBBLgogICAgICoKICAgICAqIEBwYXJhbSB0eXBlIHRoZSBj\nbGFzcyB0byB0ZXN0CiAgICAgKiBAcmV0dXJuIHRydWUgaWYgdGhlIGNsYXNz\nIGlzIG1hbmFnZWFibGUuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgYm9v\nbGVhbiBpc01hbmFnZWRUeXBlKENsYXNzIHR5cGUpIHsKICAgICAgICByZXR1\ncm4gUGVyc2lzdGVuY2VDYXBhYmxlLmNsYXNzLmlzQXNzaWduYWJsZUZyb20o\ndHlwZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRydWUgaWYg\ndGhlIHNwZWNpZmllZCBpbnN0YW5jZSBpcyBtYW5hZ2VhYmxlLgogICAgICoK\nICAgICAqIEBwYXJhbSBpbnN0YW5jZSB0aGUgb2JqZWN0IHRvIGNoZWNrCiAg\nICAgKiBAcmV0dXJuIHRydWUgaWYgdGhlIGluc3RhbmNlIGlzIGEgcGVyc2lz\ndGVudCB0eXBlLCBmYWxzZSBvdGhlcndpc2UKICAgICAqLwogICAgcHVibGlj\nIHN0YXRpYyBib29sZWFuIGlzTWFuYWdlYWJsZShPYmplY3QgaW5zdGFuY2Up\nIHsKICAgICAgICByZXR1cm4gaW5zdGFuY2UgaW5zdGFuY2VvZiBQZXJzaXN0\nZW5jZUNhcGFibGU7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRy\ndWUgaWYgdGhlIHJlZmVyZW5jZWQgInRvIiBjbGFzcyBpcyBhc3NpZ25hYmxl\nIHRvIHRoZSAiZnJvbSIKICAgICAqIGNsYXNzLiAgVGhpcyBoZWxwZXIgbWV0\naG9kIHV0aWxpemVzIGEgY2FjaGUgdG8gaGVscCBhdm9pZCB0aGUgb3Zlcmhl\nYWQKICAgICAqIG9mIHRoZSBDbGFzcy5pc0Fzc2lnbmFibGVGcm9tKCkgbWV0\naG9kLgogICAgICoKICAgICAqIEBwYXJhbSBmcm9tIHRhcmdldCBjbGFzcyBp\nbnN0YW5jZSB0byBiZSBjaGVja2VkIGZvciBhc3NpZ25hYmlsaXR5CiAgICAg\nKiBAcGFyYW0gdG8gc2Vjb25kIGNsYXNzIGluc3RhbmNlIHRvIGJlIGNoZWNr\nZWQgZm9yIGFzc2lnbmFiaWxpdHkKICAgICAqIEByZXR1cm4gdHJ1ZSBpZiB0\naGUgInRvIiBjbGFzcyBpcyBhc3NpZ25hYmxlIHRvIHRoZSAiZnJvbSIgY2xh\nc3MKICAgICAqLwogICAgcHVibGljIHN0YXRpYyBib29sZWFuIGlzQXNzaWdu\nYWJsZShDbGFzcyBmcm9tLCBDbGFzcyB0bykgewogICAgICAgIGlmIChmcm9t\nID09IG51bGwgfHwgdG8gPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIGZh\nbHNlOwoKICAgICAgICBCb29sZWFuIGlzQXNzaWduYWJsZSA9IG51bGw7CiAg\nICAgICAgTWFwIGFzc2lnbmFibGVUbyA9IChNYXApIF9hc3NpZ25hYmxlVHlw\nZXMuZ2V0KGZyb20pOwogICAgICAgIGlmIChhc3NpZ25hYmxlVG8gPT0gbnVs\nbCkgeyAvLyAidG8iIGNhY2hlIGRvZXNuJ3QgZXhpc3QsIHNvIGNyZWF0ZSBp\ndC4uLgogICAgICAgICAgICBhc3NpZ25hYmxlVG8gPSBuZXcgQ29uY3VycmVu\ndEhhc2hNYXAoKTsKICAgICAgICAgICAgX2Fzc2lnbmFibGVUeXBlcy5wdXQo\nZnJvbSwgYXNzaWduYWJsZVRvKTsKICAgICAgICB9IGVsc2UgeyAvLyAidG8i\nIGNhY2hlIGV4aXN0cy4uLgogICAgICAgICAgICBpc0Fzc2lnbmFibGUgPSAo\nQm9vbGVhbikgYXNzaWduYWJsZVRvLmdldCh0byk7CiAgICAgICAgfQoKICAg\nICAgICBpZiAoaXNBc3NpZ25hYmxlID09IG51bGwpIHsvLyB3ZSBkb24ndCBo\nYXZlIGEgcmVjb3JkIG9mIHRoaXMgcGFpci4uLgogICAgICAgICAgICBpc0Fz\nc2lnbmFibGUgPSBCb29sZWFuLnZhbHVlT2YoZnJvbS5pc0Fzc2lnbmFibGVG\ncm9tKHRvKSk7CiAgICAgICAgICAgIGFzc2lnbmFibGVUby5wdXQodG8sIGlz\nQXNzaWduYWJsZSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gaXNBc3Np\nZ25hYmxlLmJvb2xlYW5WYWx1ZSgpOwogICAgfQp9Cg==\n","encoding":"base64"}

