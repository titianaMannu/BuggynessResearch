{"sha":"9e03476595c2cdd27c4a11dd0eea6b6d2fd557bd","node_id":"MDQ6QmxvYjIwNjM2NDo5ZTAzNDc2NTk1YzJjZGQyN2M0YTExZGQwZWVhNmI2ZDJmZDU1N2Jk","size":4176,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/9e03476595c2cdd27c4a11dd0eea6b6d2fd557bd","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbDsKCmltcG9ydCBqYXZh\nLmlvLlNlcmlhbGl6YWJsZTsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nbGliLnV0aWwuUmVmZXJlbmNlTWFwOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmxpYi51dGlsLmNvbmN1cnJlbnQuQ29uY3VycmVudFJlZmVyZW5jZUhh\nc2hNYXA7CgovKioKICogSWRlbnRpdHkgY2xhc3MgZXh0ZW5kZWQgYnkgYnVp\nbHRpbiBPcGVuSlBBIGlkZW50aXR5IG9iamVjdHMuCiAqCiAqIEBhdXRob3Ig\nU3RldmUgS2ltCiAqLwpwdWJsaWMgYWJzdHJhY3QgY2xhc3MgT3BlbkpQQUlk\nCiAgICBpbXBsZW1lbnRzIENvbXBhcmFibGUsIFNlcmlhbGl6YWJsZSB7Cgog\nICAgLy8gY2FjaGUgdGhlIHR5cGVzJyBnZW5lcmF0ZWQgaGFzaGNvZGVzCiAg\nICBwcml2YXRlIHN0YXRpYyBDb25jdXJyZW50UmVmZXJlbmNlSGFzaE1hcCBf\ndHlwZUNhY2hlID0KICAgICAgICBuZXcgQ29uY3VycmVudFJlZmVyZW5jZUhh\nc2hNYXAoUmVmZXJlbmNlTWFwLldFQUssIFJlZmVyZW5jZU1hcC5IQVJEKTsK\nCiAgICBwcm90ZWN0ZWQgQ2xhc3MgdHlwZTsKICAgIHByb3RlY3RlZCBib29s\nZWFuIHN1YnMgPSB0cnVlOwoKICAgIC8vIHR5cGUgaGFzIGhpcyBiYXNlZCBv\nbiB0aGUgbGVhc3QtZGVyaXZlZCBub24tb2JqZWN0IGNsYXNzIHNvIHRoYXQK\nICAgIC8vIHVzZXItZ2l2ZW4gaWRzIHdpdGggbm9uLWV4YWN0IHR5cGVzIG1h\ndGNoIGlkcyB3aXRoIGV4YWN0IHR5cGVzCiAgICBwcml2YXRlIHRyYW5zaWVu\ndCBpbnQgX3R5cGVIYXNoID0gMDsKCiAgICBwcm90ZWN0ZWQgT3BlbkpQQUlk\nKCkgewogICAgfQoKICAgIHByb3RlY3RlZCBPcGVuSlBBSWQoQ2xhc3MgdHlw\nZSkgewogICAgICAgIHRoaXMudHlwZSA9IHR5cGU7CiAgICB9CgogICAgcHJv\ndGVjdGVkIE9wZW5KUEFJZChDbGFzcyB0eXBlLCBib29sZWFuIHN1YnMpIHsK\nICAgICAgICB0aGlzLnR5cGUgPSB0eXBlOwogICAgICAgIHRoaXMuc3VicyA9\nIHN1YnM7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIHBlcnNp\ndGVudCBjbGFzcyB3aGljaCB0aGlzIGlkIGluc3RhbmNlIHJlcHJlc2VudHMu\nCiAgICAgKi8KICAgIHB1YmxpYyBDbGFzcyBnZXRUeXBlKCkgewogICAgICAg\nIHJldHVybiB0eXBlOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciB0\naGlzIG9pZCBtaWdodCBiZSBmb3IgYSBzdWJjbGFzcyBvZiB0aGUgZ2l2ZW4g\ndHlwZS4KICAgICAqIERlZmF1bHRzIHRvIHRydWUuCiAgICAgKi8KICAgIHB1\nYmxpYyBib29sZWFuIGhhc1N1YmNsYXNzZXMoKSB7CiAgICAgICAgcmV0dXJu\nIHN1YnM7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQgdGhlIGV4YWN0IHR5\ncGUgb2YgdGhlIGRlc2NyaWJlZCBpbnN0YW5jZSBvbmNlIGl0IGlzIGtub3du\nLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRNYW5hZ2VkSW5zdGFuY2VU\neXBlKENsYXNzIHR5cGUpIHsKICAgICAgICB0aGlzLnR5cGUgPSB0eXBlOwog\nICAgICAgIHRoaXMuc3VicyA9IGZhbHNlOwogICAgfQoKICAgIC8qKgogICAg\nICogUmV0dXJuIHRoZSBpZGVudGl0eSB2YWx1ZSBhcyBhbiBvYmplY3QuCiAg\nICAgKi8KICAgIHB1YmxpYyBhYnN0cmFjdCBPYmplY3QgZ2V0SWRPYmplY3Qo\nKTsKCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgaWQncyBoYXNoIGNvZGUu\nCiAgICAgKi8KICAgIHByb3RlY3RlZCBhYnN0cmFjdCBpbnQgaWRIYXNoKCk7\nCgogICAgLyoqCiAgICAgKiBDb21wYXJlIHRoZSBpZCB0byB0aGUgaWQgb2Yg\ndGhlIGdpdmVuIGluc3RhbmNlLgogICAgICovCiAgICBwcm90ZWN0ZWQgYWJz\ndHJhY3QgYm9vbGVhbiBpZEVxdWFscyhPcGVuSlBBSWQgb3RoZXIpOwoKICAg\nIC8qKgogICAgICogR2VuZXJhdGUgdGhlIGhhc2hjb2RlIGZvciB0aGlzIElk\nLiAgQ2FjaGUgdGhlIHR5cGUncyBnZW5lcmF0ZWQgaGFzaGNvZGUKICAgICAq\nIHNvIHRoYXQgaXQgZG9lc24ndCBoYXZlIHRvIGJlIGdlbmVyYXRlZCBlYWNo\nIHRpbWUuCiAgICAgKi8KICAgIHB1YmxpYyBpbnQgaGFzaENvZGUoKSB7CiAg\nICAgICAgaWYgKF90eXBlSGFzaCA9PSAwKSB7CiAgICAgICAgICAgIEludGVn\nZXIgdHlwZUhhc2hJbnQgPSAoSW50ZWdlcikgX3R5cGVDYWNoZS5nZXQodHlw\nZSk7CiAgICAgICAgICAgIGlmICh0eXBlSGFzaEludCA9PSBudWxsKSB7CiAg\nICAgICAgICAgICAgICBDbGFzcyBiYXNlID0gdHlwZTsKICAgICAgICAgICAg\nICAgIENsYXNzIHN1cGVyY2xhc3MgPSBiYXNlLmdldFN1cGVyY2xhc3MoKTsK\nICAgICAgICAgICAgICAgIHdoaWxlIChzdXBlcmNsYXNzICE9IG51bGwgJiYg\nc3VwZXJjbGFzcyAhPSBPYmplY3QuY2xhc3MpIHsKICAgICAgICAgICAgICAg\nICAgICBiYXNlID0gYmFzZS5nZXRTdXBlcmNsYXNzKCk7CiAgICAgICAgICAg\nICAgICAgICAgc3VwZXJjbGFzcyA9IGJhc2UuZ2V0U3VwZXJjbGFzcygpOwog\nICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgX3R5cGVIYXNoID0g\nYmFzZS5oYXNoQ29kZSgpOwogICAgICAgICAgICAgICAgX3R5cGVDYWNoZS5w\ndXQodHlwZSwgbmV3IEludGVnZXIoX3R5cGVIYXNoKSk7CiAgICAgICAgICAg\nIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBfdHlwZUhhc2ggPSB0eXBlSGFz\naEludC5pbnRWYWx1ZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAg\nICAgIHJldHVybiBfdHlwZUhhc2ggXiBpZEhhc2goKTsKICAgIH0KCiAgICBw\ndWJsaWMgYm9vbGVhbiBlcXVhbHMoT2JqZWN0IG8pIHsKICAgICAgICBpZiAo\nbyA9PSB0aGlzKQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICBp\nZiAobyA9PSBudWxsIHx8IGdldENsYXNzKCkgIT0gby5nZXRDbGFzcygpKQog\nICAgICAgICAgICByZXR1cm4gZmFsc2U7CgogICAgICAgIE9wZW5KUEFJZCBp\nZCA9IChPcGVuSlBBSWQpIG87CiAgICAgICAgcmV0dXJuIGlkRXF1YWxzKGlk\nKSAmJiAoaWQudHlwZS5pc0Fzc2lnbmFibGVGcm9tKHR5cGUpCiAgICAgICAg\nICAgIHx8IChzdWJzICYmIHR5cGUuaXNBc3NpZ25hYmxlRnJvbShpZC50eXBl\nKSkpOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgdG9TdHJpbmcoKSB7CiAg\nICAgICAgcmV0dXJuIHR5cGUuZ2V0TmFtZSgpICsgIi0iICsgZ2V0SWRPYmpl\nY3QoKTsKICAgIH0KCiAgICBwdWJsaWMgaW50IGNvbXBhcmVUbyhPYmplY3Qg\nb3RoZXIpIHsKICAgICAgICBpZiAob3RoZXIgPT0gdGhpcykKICAgICAgICAg\nICAgcmV0dXJuIDA7CiAgICAgICAgaWYgKG90aGVyID09IG51bGwpCiAgICAg\nICAgICAgIHJldHVybiAxOwogICAgICAgIHJldHVybiAoKENvbXBhcmFibGUp\nIGdldElkT2JqZWN0KCkpLmNvbXBhcmVUbygoKE9wZW5KUEFJZCkgb3RoZXIp\nLgogICAgICAgICAgICBnZXRJZE9iamVjdCAoKSk7Cgl9Cn0K\n","encoding":"base64"}

