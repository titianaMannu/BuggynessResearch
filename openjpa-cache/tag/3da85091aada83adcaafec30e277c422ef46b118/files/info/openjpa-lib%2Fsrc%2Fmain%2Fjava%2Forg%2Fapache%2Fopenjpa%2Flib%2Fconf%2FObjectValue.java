{"sha":"284d293c40319508e90d14e25e67f1a55fafacdc","node_id":"MDQ6QmxvYjIwNjM2NDoyODRkMjkzYzQwMzE5NTA4ZTkwZDE0ZTI1ZTY3ZjFhNTVmYWZhY2Rj","size":3855,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/284d293c40319508e90d14e25e67f1a55fafacdc","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmNvbmY7CgppbXBvcnQg\nb3JnLmFwYWNoZS5jb21tb25zLmxhbmcuT2JqZWN0VXRpbHM7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLlJlZmVyZW5jZU1hcDsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5jb25jdXJyZW50LkNv\nbmN1cnJlbnRSZWZlcmVuY2VIYXNoTWFwOwoKLyoqCiAqIEFuIG9iamVjdCB7\nQGxpbmsgVmFsdWV9LgogKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKi8KcHVi\nbGljIGNsYXNzIE9iamVjdFZhbHVlIGV4dGVuZHMgVmFsdWUgewoKICAgIHBy\naXZhdGUgc3RhdGljIGZpbmFsIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVy\nLmZvclBhY2thZ2UKICAgICAgICAoT2JqZWN0VmFsdWUuY2xhc3MpOwoKICAg\nIC8vIGNhY2hlIHRoZSB0eXBlcycgY2xhc3Nsb2FkZXIKICAgIHByaXZhdGUg\nc3RhdGljIENvbmN1cnJlbnRSZWZlcmVuY2VIYXNoTWFwIF9jbGFzc2xvYWRl\nckNhY2hlID0KICAgICAgICBuZXcgQ29uY3VycmVudFJlZmVyZW5jZUhhc2hN\nYXAoUmVmZXJlbmNlTWFwLkhBUkQsIFJlZmVyZW5jZU1hcC5XRUFLKTsKCiAg\nICBwcml2YXRlIE9iamVjdCBfdmFsdWUgPSBudWxsOwoKICAgIHB1YmxpYyBP\nYmplY3RWYWx1ZShTdHJpbmcgcHJvcCkgewogICAgICAgIHN1cGVyKHByb3Ap\nOwogICAgfQoKICAgIC8qKgogICAgICogVGhlIGludGVybmFsIHZhbHVlLgog\nICAgICovCiAgICBwdWJsaWMgT2JqZWN0IGdldCgpIHsKICAgICAgICByZXR1\ncm4gX3ZhbHVlOwogICAgfQoKICAgIC8qKgogICAgICogVGhlIGludGVybmFs\nIHZhbHVlLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXQoT2JqZWN0IG9i\naikgewogICAgICAgIHNldChvYmosIGZhbHNlKTsKICAgIH0KCiAgICAvKioK\nICAgICAqIFRoZSBpbnRlcm5hbCB2YWx1ZS4KICAgICAqCiAgICAgKiBAcGFy\nYW0gZGVyaXZlZCBpZiB0cnVlLCB0aGlzIHZhbHVlIHdhcyBkZXJpdmVkIGZy\nb20gb3RoZXIgcHJvcGVydGllcwogICAgICovCiAgICBwdWJsaWMgdm9pZCBz\nZXQoT2JqZWN0IG9iaiwgYm9vbGVhbiBkZXJpdmVkKSB7CiAgICAgICAgT2Jq\nZWN0IG9sZFZhbHVlID0gX3ZhbHVlOwogICAgICAgIF92YWx1ZSA9IG9iajsK\nICAgICAgICBpZiAoIWRlcml2ZWQgJiYgIU9iamVjdFV0aWxzLmVxdWFscyhv\nYmosIG9sZFZhbHVlKSkgewogICAgICAgICAgICBvYmplY3RDaGFuZ2VkKCk7\nCiAgICAgICAgICAgIHZhbHVlQ2hhbmdlZCgpOwogICAgICAgIH0KICAgIH0K\nCiAgICAvKioKICAgICAqIEluc3RhbnRpYXRlIHRoZSBvYmplY3QgYXMgYW4g\naW5zdGFuY2Ugb2YgdGhlIGdpdmVuIGNsYXNzLiBFcXVpdmFsZW50CiAgICAg\nKiB0byA8Y29kZT5pbnN0YW50aWF0ZSh0eXBlLCBjb25mLCB0cnVlKTwvY29k\nZT4uCiAgICAgKi8KICAgIHB1YmxpYyBPYmplY3QgaW5zdGFudGlhdGUoQ2xh\nc3MgdHlwZSwgQ29uZmlndXJhdGlvbiBjb25mKSB7CiAgICAgICAgcmV0dXJu\nIGluc3RhbnRpYXRlKHR5cGUsIGNvbmYsIHRydWUpOwogICAgfQoKICAgIC8q\nKgogICAgICogSW5zdGFudGlhdGUgdGhlIG9iamVjdCBhcyBhbiBpbnN0YW5j\nZSBvZiB0aGUgZ2l2ZW4gY2xhc3MuCiAgICAgKi8KICAgIHB1YmxpYyBPYmpl\nY3QgaW5zdGFudGlhdGUoQ2xhc3MgdHlwZSwgQ29uZmlndXJhdGlvbiBjb25m\nLCBib29sZWFuIGZhdGFsKSB7CiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9y\ndGVkT3BlcmF0aW9uRXhjZXB0aW9uKCk7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBBbGxvdyBzdWJjbGFzc2VzIHRvIGluc3RhbnRpYXRlIGFkZGl0aW9uYWwg\ncGx1Z2lucy4gVGhpcyBtZXRob2QgZG9lcwogICAgICogbm90IHBlcmZvcm0g\nY29uZmlndXJhdGlvbi4KICAgICAqLwogICAgcHVibGljIE9iamVjdCBuZXdJ\nbnN0YW5jZShTdHJpbmcgY2xzTmFtZSwgQ2xhc3MgdHlwZSwgQ29uZmlndXJh\ndGlvbiBjb25mLAogICAgICAgICAgICBib29sZWFuIGZhdGFsKSB7CiAgICAg\nICAgQ2xhc3NMb2FkZXIgY2wgPSAoQ2xhc3NMb2FkZXIpIF9jbGFzc2xvYWRl\nckNhY2hlLmdldCh0eXBlKTsKICAgICAgICBpZiAoY2wgPT0gbnVsbCkgewog\nICAgICAgICAgICBjbCA9IHR5cGUuZ2V0Q2xhc3NMb2FkZXIoKTsKICAgICAg\nICAgICAgaWYgKGNsID09IG51bGwpIHsgIC8vIFN5c3RlbSBjbGFzc2xvYWRl\nciBpcyByZXR1cm5lZCBhcyBudWxsCiAgICAgICAgICAgICAgICBjbCA9IENs\nYXNzTG9hZGVyLmdldFN5c3RlbUNsYXNzTG9hZGVyKCk7CiAgICAgICAgICAg\nIH0KICAgICAgICAgICAgX2NsYXNzbG9hZGVyQ2FjaGUucHV0KHR5cGUsIGNs\nKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIENvbmZpZ3VyYXRpb25zLm5l\nd0luc3RhbmNlKGNsc05hbWUsIHRoaXMsIGNvbmYsIGNsLCBmYXRhbCk7CiAg\nICB9CgogICAgcHVibGljIENsYXNzIGdldFZhbHVlVHlwZSgpIHsKICAgICAg\nICByZXR1cm4gT2JqZWN0LmNsYXNzOwogICAgfQoKICAgIC8qKgogICAgICog\nSW1wbGVtZW50IHRoaXMgbWV0aG9kIHRvIHN5bmNocm9uaXplIGludGVybmFs\nIGRhdGEgd2l0aCB0aGUgbmV3CiAgICAgKiBvYmplY3QgdmFsdWUuCiAgICAg\nKi8KICAgIHByb3RlY3RlZCB2b2lkIG9iamVjdENoYW5nZWQoKSB7CiAgICB9\nCgogICAgcHJvdGVjdGVkIFN0cmluZyBnZXRJbnRlcm5hbFN0cmluZygpIHsK\nICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9p\nZCBzZXRJbnRlcm5hbFN0cmluZyhTdHJpbmcgc3RyKSB7CiAgICAgICAgaWYg\nKHN0ciA9PSBudWxsKQogICAgICAgICAgICBzZXQobnVsbCk7CiAgICAgICAg\nZWxzZQogICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhj\nZXB0aW9uKF9sb2MuZ2V0KCJjYW50LXNldC1zdHJpbmciLAogICAgICAgICAg\nICAgICAgZ2V0UHJvcGVydHkoKSkuZ2V0TWVzc2FnZSgpKTsKICAgIH0KCiAg\nICBwcm90ZWN0ZWQgdm9pZCBzZXRJbnRlcm5hbE9iamVjdChPYmplY3Qgb2Jq\nKSB7CiAgICAgICAgc2V0KG9iaik7CiAgICB9Cn0K\n","encoding":"base64"}

