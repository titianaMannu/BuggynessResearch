{"sha":"ab9ec4d7a922ea8aa10aacbe54432fe178390a35","node_id":"MDQ6QmxvYjIwNjM2NDphYjllYzRkN2E5MjJlYThhYTEwYWFjYmU1NDQzMmZlMTc4MzkwYTM1","size":7781,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/ab9ec4d7a922ea8aa10aacbe54432fe178390a35","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmpkYmM7CgppbXBvcnQg\namF2YS5zcWwuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmEuc3FsLlJlc3VsdFNl\ndDsKaW1wb3J0IGphdmEuc3FsLlNRTEV4Y2VwdGlvbjsKaW1wb3J0IGphdmEu\nc3FsLlNRTFdhcm5pbmc7CmltcG9ydCBqYXZhLnNxbC5TdGF0ZW1lbnQ7Cgpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkNsb3NlYWJsZTsK\nCi8qKgogKiBXcmFwcGVyIGFyb3VuZCBhbiBleGlzdGluZyBzdGF0ZW1lbnQu\nIFN1YmNsYXNzZXMgY2FuIG92ZXJyaWRlIHRoZQogKiBtZXRob2RzIHdob3Nl\nIGJlaGF2aW9yIHRoZXkgbWVhbiB0byBjaGFuZ2UuIFRoZSA8Y29kZT5lcXVh\nbHM8L2NvZGU+IGFuZAogKiA8Y29kZT5oYXNoQ29kZTwvY29kZT4gbWV0aG9k\ncyBwYXNzIHRocm91Z2ggdG8gdGhlIGJhc2UgdW5kZXJseWluZyBkYXRhCiAq\nIHN0b3JlIHN0YXRlbWVudC4KICoKICogQGF1dGhvciBBYmUgV2hpdGUKICov\nCnB1YmxpYyBjbGFzcyBEZWxlZ2F0aW5nU3RhdGVtZW50IGltcGxlbWVudHMg\nU3RhdGVtZW50LCBDbG9zZWFibGUgewoKICAgIHByaXZhdGUgZmluYWwgU3Rh\ndGVtZW50IF9zdG1udDsKICAgIHByaXZhdGUgZmluYWwgRGVsZWdhdGluZ1N0\nYXRlbWVudCBfZGVsOwogICAgcHJpdmF0ZSBmaW5hbCBDb25uZWN0aW9uIF9j\nb25uOwoKICAgIHB1YmxpYyBEZWxlZ2F0aW5nU3RhdGVtZW50KFN0YXRlbWVu\ndCBzdG1udCwgQ29ubmVjdGlvbiBjb25uKSB7CiAgICAgICAgX2Nvbm4gPSBj\nb25uOwogICAgICAgIF9zdG1udCA9IHN0bW50OwogICAgICAgIGlmIChzdG1u\ndCBpbnN0YW5jZW9mIERlbGVnYXRpbmdTdGF0ZW1lbnQpCiAgICAgICAgICAg\nIF9kZWwgPSAoRGVsZWdhdGluZ1N0YXRlbWVudCkgc3RtbnQ7CiAgICAgICAg\nZWxzZQogICAgICAgICAgICBfZGVsID0gbnVsbDsKICAgIH0KCiAgICBwcm90\nZWN0ZWQgUmVzdWx0U2V0IHdyYXBSZXN1bHQoUmVzdWx0U2V0IHJzLCBib29s\nZWFuIHdyYXApIHsKICAgICAgICBpZiAoIXdyYXAgfHwgcnMgPT0gbnVsbCkK\nICAgICAgICAgICAgcmV0dXJuIHJzOwogICAgICAgIHJldHVybiBuZXcgRGVs\nZWdhdGluZ1Jlc3VsdFNldChycywgdGhpcyk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBSZXR1cm4gdGhlIHdyYXBwZWQgc3RhdGVtZW50LgogICAgICovCiAg\nICBwdWJsaWMgU3RhdGVtZW50IGdldERlbGVnYXRlKCkgewogICAgICAgIHJl\ndHVybiBfc3RtbnQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhl\nIGJhc2UgdW5kZXJseWluZyBkYXRhIHN0b3JlIHN0YXRlbWVudC4KICAgICAq\nLwogICAgcHVibGljIFN0YXRlbWVudCBnZXRJbm5lcm1vc3REZWxlZ2F0ZSgp\nIHsKICAgICAgICByZXR1cm4gKF9kZWwgPT0gbnVsbCkgPyBfc3RtbnQgOiBf\nZGVsLmdldElubmVybW9zdERlbGVnYXRlKCk7CiAgICB9CgogICAgcHVibGlj\nIGludCBoYXNoQ29kZSgpIHsKICAgICAgICByZXR1cm4gZ2V0SW5uZXJtb3N0\nRGVsZWdhdGUoKS5oYXNoQ29kZSgpOwogICAgfQoKICAgIHB1YmxpYyBib29s\nZWFuIGVxdWFscyhPYmplY3Qgb3RoZXIpIHsKICAgICAgICBpZiAob3RoZXIg\nPT0gdGhpcykKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgaWYg\nKG90aGVyIGluc3RhbmNlb2YgRGVsZWdhdGluZ1N0YXRlbWVudCkKICAgICAg\nICAgICAgb3RoZXIgPSAoKERlbGVnYXRpbmdTdGF0ZW1lbnQpIG90aGVyKS5n\nZXRJbm5lcm1vc3REZWxlZ2F0ZSgpOwogICAgICAgIHJldHVybiBnZXRJbm5l\ncm1vc3REZWxlZ2F0ZSgpLmVxdWFscyhvdGhlcik7CiAgICB9CgogICAgcHVi\nbGljIFN0cmluZyB0b1N0cmluZygpIHsKICAgICAgICBTdHJpbmdCdWZmZXIg\nYnVmID0gbmV3IFN0cmluZ0J1ZmZlcigic3RtbnQgIikuYXBwZW5kKGhhc2hD\nb2RlKCkpOwogICAgICAgIGFwcGVuZEluZm8oYnVmKTsKICAgICAgICByZXR1\ncm4gYnVmLnRvU3RyaW5nKCk7CiAgICB9CgogICAgcHJvdGVjdGVkIHZvaWQg\nYXBwZW5kSW5mbyhTdHJpbmdCdWZmZXIgYnVmKSB7CiAgICAgICAgaWYgKF9k\nZWwgIT0gbnVsbCkKICAgICAgICAgICAgX2RlbC5hcHBlbmRJbmZvKGJ1Zik7\nCiAgICB9CgogICAgcHVibGljIFJlc3VsdFNldCBleGVjdXRlUXVlcnkoU3Ry\naW5nIHN0cikgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJu\nIGV4ZWN1dGVRdWVyeShzdHIsIHRydWUpOwogICAgfQoKICAgIC8qKgogICAg\nICogRXhlY3V0ZSB0aGUgcXVlcnksIHdpdGggdGhlIG9wdGlvbiBvZiBub3Qg\nd3JhcHBpbmcgaXQgaW4gYQogICAgICoge0BsaW5rIERlbGVnYXRpbmdSZXN1\nbHRTZXR9LCB3aGljaCBpcyB0aGUgZGVmYXVsdC4KICAgICAqLwogICAgcHJv\ndGVjdGVkIFJlc3VsdFNldCBleGVjdXRlUXVlcnkoU3RyaW5nIHNxbCwgYm9v\nbGVhbiB3cmFwKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAg\nICAgIFJlc3VsdFNldCByczsKICAgICAgICBpZiAoX2RlbCAhPSBudWxsKQog\nICAgICAgICAgICBycyA9IF9kZWwuZXhlY3V0ZVF1ZXJ5KHNxbCwgZmFsc2Up\nOwogICAgICAgIGVsc2UKICAgICAgICAgICAgcnMgPSBfc3RtbnQuZXhlY3V0\nZVF1ZXJ5KHNxbCk7CiAgICAgICAgcmV0dXJuIHdyYXBSZXN1bHQocnMsIHdy\nYXApOwogICAgfQoKICAgIHB1YmxpYyBpbnQgZXhlY3V0ZVVwZGF0ZShTdHJp\nbmcgc3RyKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4g\nX3N0bW50LmV4ZWN1dGVVcGRhdGUoc3RyKTsKICAgIH0KCiAgICBwdWJsaWMg\nYm9vbGVhbiBleGVjdXRlKFN0cmluZyBzdHIpIHRocm93cyBTUUxFeGNlcHRp\nb24gewogICAgICAgIHJldHVybiBfc3RtbnQuZXhlY3V0ZShzdHIpOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIGNsb3NlKCkgdGhyb3dzIFNRTEV4Y2VwdGlv\nbiB7CiAgICAgICAgX3N0bW50LmNsb3NlKCk7CiAgICB9CgogICAgcHVibGlj\nIGludCBnZXRNYXhGaWVsZFNpemUoKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsK\nICAgICAgICByZXR1cm4gX3N0bW50LmdldE1heEZpZWxkU2l6ZSgpOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHNldE1heEZpZWxkU2l6ZShpbnQgaSkgdGhy\nb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgX3N0bW50LnNldE1heEZpZWxk\nU2l6ZShpKTsKICAgIH0KCiAgICBwdWJsaWMgaW50IGdldE1heFJvd3MoKSB0\naHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gX3N0bW50Lmdl\ndE1heFJvd3MoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRNYXhSb3dz\nKGludCBpKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBfc3RtbnQu\nc2V0TWF4Um93cyhpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRFc2Nh\ncGVQcm9jZXNzaW5nKGJvb2xlYW4gYm9vbCkgdGhyb3dzIFNRTEV4Y2VwdGlv\nbiB7CiAgICAgICAgX3N0bW50LnNldEVzY2FwZVByb2Nlc3NpbmcoYm9vbCk7\nCiAgICB9CgogICAgcHVibGljIGludCBnZXRRdWVyeVRpbWVvdXQoKSB0aHJv\nd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gX3N0bW50LmdldFF1\nZXJ5VGltZW91dCgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldFF1ZXJ5\nVGltZW91dChpbnQgaSkgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAg\nX3N0bW50LnNldFF1ZXJ5VGltZW91dChpKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBjYW5jZWwoKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBf\nc3RtbnQuY2FuY2VsKCk7CiAgICB9CgogICAgcHVibGljIFNRTFdhcm5pbmcg\nZ2V0V2FybmluZ3MoKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBy\nZXR1cm4gX3N0bW50LmdldFdhcm5pbmdzKCk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgY2xlYXJXYXJuaW5ncygpIHRocm93cyBTUUxFeGNlcHRpb24gewog\nICAgICAgIF9zdG1udC5jbGVhcldhcm5pbmdzKCk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgc2V0Q3Vyc29yTmFtZShTdHJpbmcgc3RyKSB0aHJvd3MgU1FM\nRXhjZXB0aW9uIHsKICAgICAgICBfc3RtbnQuc2V0Q3Vyc29yTmFtZShzdHIp\nOwogICAgfQoKICAgIHB1YmxpYyBSZXN1bHRTZXQgZ2V0UmVzdWx0U2V0KCkg\ndGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGdldFJlc3Vs\ndFNldCh0cnVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgbGFz\ndCByZXN1bHQgc2V0LCB3aXRoIHRoZSBvcHRpb24gb2Ygbm90IHdyYXBwaW5n\nIGl0IGluIGEKICAgICAqIHtAbGluayBEZWxlZ2F0aW5nUmVzdWx0U2V0fSwg\nd2hpY2ggaXMgdGhlIGRlZmF1bHQuCiAgICAgKi8KICAgIHByb3RlY3RlZCBS\nZXN1bHRTZXQgZ2V0UmVzdWx0U2V0KGJvb2xlYW4gd3JhcCkgdGhyb3dzIFNR\nTEV4Y2VwdGlvbiB7CiAgICAgICAgUmVzdWx0U2V0IHJzOwogICAgICAgIGlm\nIChfZGVsICE9IG51bGwpCiAgICAgICAgICAgIHJzID0gX2RlbC5nZXRSZXN1\nbHRTZXQoZmFsc2UpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgcnMgPSBf\nc3RtbnQuZ2V0UmVzdWx0U2V0KCk7CiAgICAgICAgcmV0dXJuIHdyYXBSZXN1\nbHQocnMsIHdyYXApOwogICAgfQoKICAgIHB1YmxpYyBpbnQgZ2V0VXBkYXRl\nQ291bnQoKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4g\nX3N0bW50LmdldFVwZGF0ZUNvdW50KCk7CiAgICB9CgogICAgcHVibGljIGJv\nb2xlYW4gZ2V0TW9yZVJlc3VsdHMoKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsK\nICAgICAgICByZXR1cm4gX3N0bW50LmdldE1vcmVSZXN1bHRzKCk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgc2V0RmV0Y2hEaXJlY3Rpb24oaW50IGkpIHRo\ncm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIF9zdG1udC5zZXRGZXRjaERp\ncmVjdGlvbihpKTsKICAgIH0KCiAgICBwdWJsaWMgaW50IGdldEZldGNoRGly\nZWN0aW9uKCkgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJu\nIF9zdG1udC5nZXRGZXRjaERpcmVjdGlvbigpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHNldEZldGNoU2l6ZShpbnQgaSkgdGhyb3dzIFNRTEV4Y2VwdGlv\nbiB7CiAgICAgICAgX3N0bW50LnNldEZldGNoU2l6ZShpKTsKICAgIH0KCiAg\nICBwdWJsaWMgaW50IGdldEZldGNoU2l6ZSgpIHRocm93cyBTUUxFeGNlcHRp\nb24gewogICAgICAgIHJldHVybiBfc3RtbnQuZ2V0RmV0Y2hTaXplKCk7CiAg\nICB9CgogICAgcHVibGljIGludCBnZXRSZXN1bHRTZXRDb25jdXJyZW5jeSgp\nIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBfc3RtbnQu\nZ2V0UmVzdWx0U2V0Q29uY3VycmVuY3koKTsKICAgIH0KCiAgICBwdWJsaWMg\naW50IGdldFJlc3VsdFNldFR5cGUoKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsK\nICAgICAgICByZXR1cm4gX3N0bW50LmdldFJlc3VsdFNldFR5cGUoKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBhZGRCYXRjaChTdHJpbmcgc3RyKSB0aHJv\nd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBfc3RtbnQuYWRkQmF0Y2goc3Ry\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjbGVhckJhdGNoKCkgdGhyb3dz\nIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgX3N0bW50LmNsZWFyQmF0Y2goKTsK\nICAgIH0KCiAgICBwdWJsaWMgaW50W10gZXhlY3V0ZUJhdGNoKCkgdGhyb3dz\nIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIF9zdG1udC5leGVjdXRl\nQmF0Y2goKTsKICAgIH0KCiAgICBwdWJsaWMgQ29ubmVjdGlvbiBnZXRDb25u\nZWN0aW9uKCkgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJu\nIF9jb25uOwogICAgfQoKICAgIC8vIEpEQkMgMy4wICh1bnN1cHBvcnRlZCkg\nbWV0aG9kIGZvbGxvdzsgdGhlc2UgYXJlIHJlcXVpcmVkIHRvIGJlIGFibGUK\nICAgIC8vIHRvIGNvbXBpbGUgYWdhaW5zdCBKREsgMS40CgogICAgcHVibGlj\nIGJvb2xlYW4gZ2V0TW9yZVJlc3VsdHMoaW50IGkpIHRocm93cyBTUUxFeGNl\ncHRpb24gewogICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlv\nbkV4Y2VwdGlvbigpOwogICAgfQoKICAgIHB1YmxpYyBSZXN1bHRTZXQgZ2V0\nR2VuZXJhdGVkS2V5cygpIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAg\nIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwog\nICAgfQoKICAgIHB1YmxpYyBpbnQgZXhlY3V0ZVVwZGF0ZShTdHJpbmcgcywg\naW50IGkpIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHRocm93IG5l\ndyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwogICAgfQoKICAg\nIHB1YmxpYyBpbnQgZXhlY3V0ZVVwZGF0ZShTdHJpbmcgcywgaW50W10gaWEp\nIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHRocm93IG5ldyBVbnN1\ncHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwogICAgfQoKICAgIHB1Ymxp\nYyBpbnQgZXhlY3V0ZVVwZGF0ZShTdHJpbmcgcywgU3RyaW5nW10gc2EpIHRo\ncm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHRocm93IG5ldyBVbnN1cHBv\ncnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpOwogICAgfQoKICAgIHB1YmxpYyBi\nb29sZWFuIGV4ZWN1dGUoU3RyaW5nIHMsIGludCBpKSB0aHJvd3MgU1FMRXhj\nZXB0aW9uIHsKICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRp\nb25FeGNlcHRpb24oKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBleGVj\ndXRlKFN0cmluZyBzLCBpbnRbXSBpYSkgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7\nCiAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0\naW9uKCk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gZXhlY3V0ZShTdHJp\nbmcgcywgU3RyaW5nW10gc2EpIHRocm93cyBTUUxFeGNlcHRpb24gewogICAg\nICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigp\nOwogICAgfQoKICAgIHB1YmxpYyBpbnQgZ2V0UmVzdWx0U2V0SG9sZGFiaWxp\ndHkoKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICB0aHJvdyBuZXcg\nVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24oKTsKICAgIH0KfQo=\n","encoding":"base64"}

