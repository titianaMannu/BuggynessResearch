{"sha":"bf41f9487175f66bf79daeaf74b01939004e1b48","node_id":"MDQ6QmxvYjIwNjM2NDpiZjQxZjk0ODcxNzVmNjZiZjc5ZGFlYWY3NGIwMTkzOTAwNGUxYjQ4","size":20330,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/bf41f9487175f66bf79daeaf74b01939004e1b48","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLm1ldGE7CgppbXBvcnQg\namF2YS5pby5GaWxlOwppbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKaW1w\nb3J0IGphdmEuaW8uSW5wdXRTdHJlYW1SZWFkZXI7CmltcG9ydCBqYXZhLmlv\nLlJlYWRlcjsKaW1wb3J0IGphdmEubmV0LlVSTDsKaW1wb3J0IGphdmEudXRp\nbC5BcnJheUxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbjsKaW1w\nb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsKaW1wb3J0IGphdmEudXRpbC5I\nYXNoTWFwOwppbXBvcnQgamF2YS51dGlsLkhhc2hTZXQ7CmltcG9ydCBqYXZh\nLnV0aWwuTGlua2VkTGlzdDsKaW1wb3J0IGphdmEudXRpbC5MaXN0OwppbXBv\ncnQgamF2YS51dGlsLk1hcDsKaW1wb3J0IGphdmEudXRpbC5TZXQ7CmltcG9y\ndCBqYXZheC54bWwucGFyc2Vycy5TQVhQYXJzZXI7CgppbXBvcnQgb3JnLnht\nbC5zYXguQXR0cmlidXRlczsKaW1wb3J0IG9yZy54bWwuc2F4LklucHV0U291\ncmNlOwppbXBvcnQgb3JnLnhtbC5zYXguTG9jYXRvcjsKaW1wb3J0IG9yZy54\nbWwuc2F4LlNBWEV4Y2VwdGlvbjsKaW1wb3J0IG9yZy54bWwuc2F4LlNBWFBh\ncnNlRXhjZXB0aW9uOwppbXBvcnQgb3JnLnhtbC5zYXguZXh0LkxleGljYWxI\nYW5kbGVyOwppbXBvcnQgb3JnLnhtbC5zYXguaGVscGVycy5EZWZhdWx0SGFu\nZGxlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIubG9nLkxvZzsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5KYXZhVmVyc2lv\nbnM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxp\nemVyLk1lc3NhZ2U7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0\naWwuTG9jYWxpemVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi54\nbWwuQ29tbWVudGFibGU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGli\nLnhtbC5Eb2NUeXBlUmVhZGVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmxpYi54bWwuTG9jYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nbGliLnhtbC5YTUxGYWN0b3J5OwoKLyoqCiAqIEN1c3RvbSBTQVggcGFyc2Vy\nIHVzZWQgYnkgdGhlIHN5c3RlbSB0byBxdWlja2x5IHBhcnNlIG1ldGFkYXRh\nIGZpbGVzLgogKiBTdWJjbGFzc2VzIHNob3VsZCBoYW5kbGUgdGhlIHByb2Nl\nc3Npbmcgb2YgdGhlIGNvbnRlbnQuCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRl\nCiAqIEBub2phdmFkb2MKICovCnB1YmxpYyBhYnN0cmFjdCBjbGFzcyBYTUxN\nZXRhRGF0YVBhcnNlciBleHRlbmRzIERlZmF1bHRIYW5kbGVyCiAgICBpbXBs\nZW1lbnRzIExleGljYWxIYW5kbGVyLCBNZXRhRGF0YVBhcnNlciB7CgogICAg\ncHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6\nZXIuZm9yUGFja2FnZQogICAgICAgIChYTUxNZXRhRGF0YVBhcnNlci5jbGFz\ncyk7CiAgICBwcml2YXRlIHN0YXRpYyBib29sZWFuIF9zY2hlbWFCdWc7Cgog\nICAgc3RhdGljIHsKICAgICAgICB0cnkgewogICAgICAgICAgICAvLyBjaGVj\nayBmb3IgWGVyY2VzIHZlcnNpb24gMi4wLjIgdG8gc2VlIGlmIHdlIG5lZWQg\ndG8gZGlzYWJsZQogICAgICAgICAgICAvLyBzY2hlbWEgdmFsaWRhdGlvbiwg\nd2hpY2ggd29ya3MgYXJvdW5kIHRoZSBidWcgcmVwb3J0ZWQgYXQ6CiAgICAg\nICAgICAgIC8vIGh0dHA6Ly9idWdzLnN1bi5jb20vYnVnZGF0YWJhc2Uvdmll\nd19idWcuZG8/YnVnX2lkPTQ3MDg4NTkKICAgICAgICAgICAgX3NjaGVtYUJ1\nZyA9ICJYZXJjZXMtSiAyLjAuMiIuZXF1YWxzKENsYXNzLmZvck5hbWUKICAg\nICAgICAgICAgICAgICgib3JnLmFwYWNoZS54ZXJjZXMuaW1wbC5WZXJzaW9u\nIikuZ2V0RmllbGQoImZWZXJzaW9uIikuCiAgICAgICAgICAgICAgICBnZXQo\nbnVsbCkpOwogICAgICAgIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7CiAgICAg\nICAgICAgIC8vIFhlcmNlcyBtaWdodCBub3QgYmUgYXZhaWxhYmxlCiAgICAg\nICAgICAgIF9zY2hlbWFCdWcgPSBmYWxzZTsKICAgICAgICB9CiAgICB9Cgog\nICAgLy8gbWFwIG9mIGNsYXNzbG9hZGVycyB0byBzZXRzIG9mIHBhcnNlZCBs\nb2NhdGlvbnMsIHNvIHRoYXQgd2UgZG9uJ3QgcGFyc2UKICAgIC8vIHRoZSBz\nYW1lIHJlc291cmNlIG11bHRpcGxlIHRpbWVzIGZvciB0aGUgc2FtZSBjbGFz\ncwogICAgcHJpdmF0ZSBNYXAgX3BhcnNlZCA9IG51bGw7CgogICAgcHJpdmF0\nZSBMb2cgX2xvZyA9IG51bGw7CiAgICBwcml2YXRlIGJvb2xlYW4gX3ZhbGlk\nYXRpbmcgPSB0cnVlOwogICAgcHJpdmF0ZSBib29sZWFuIF9zeXN0ZW1JZCA9\nIHRydWU7CiAgICBwcml2YXRlIGJvb2xlYW4gX2NhY2hpbmcgPSB0cnVlOwog\nICAgcHJpdmF0ZSBib29sZWFuIF9wYXJzZVRleHQgPSB0cnVlOwogICAgcHJp\ndmF0ZSBib29sZWFuIF9wYXJzZUNvbW1lbnRzID0gdHJ1ZTsKICAgIHByaXZh\ndGUgU3RyaW5nIF9zdWZmaXggPSBudWxsOwogICAgcHJpdmF0ZSBDbGFzc0xv\nYWRlciBfbG9hZGVyID0gbnVsbDsKICAgIHByaXZhdGUgQ2xhc3NMb2FkZXIg\nX2N1ckxvYWRlciA9IG51bGw7CgogICAgLy8gc3RhdGUgZm9yIGN1cnJlbnQg\ncGFyc2UKICAgIHByaXZhdGUgZmluYWwgQ29sbGVjdGlvbiBfY3VyUmVzdWx0\ncyA9IG5ldyBMaW5rZWRMaXN0KCk7CiAgICBwcml2YXRlIExpc3QgX3Jlc3Vs\ndHMgPSBudWxsOwogICAgcHJpdmF0ZSBTdHJpbmcgX3NvdXJjZU5hbWUgPSBu\ndWxsOwogICAgcHJpdmF0ZSBGaWxlIF9zb3VyY2VGaWxlID0gbnVsbDsKICAg\nIHByaXZhdGUgU3RyaW5nQnVmZmVyIF90ZXh0ID0gbnVsbDsKICAgIHByaXZh\ndGUgTGlzdCBfY29tbWVudHMgPSBudWxsOwogICAgcHJpdmF0ZSBMb2NhdGlv\nbiBfbG9jYXRpb24gPSBuZXcgTG9jYXRpb24oKTsKICAgIHByaXZhdGUgTGV4\naWNhbEhhbmRsZXIgX2xoID0gbnVsbDsKICAgIHByaXZhdGUgaW50IF9kZXB0\naCA9IC0xOwogICAgcHJpdmF0ZSBpbnQgX2lnbm9yZSA9IEludGVnZXIuTUFY\nX1ZBTFVFOwoKICAgIC8qKgogICAgICogV2hldGhlciB0byBwYXJzZSBlbGVt\nZW50IHRleHQuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGdldFBhcnNl\nVGV4dCgpIHsKICAgICAgICByZXR1cm4gX3BhcnNlVGV4dDsKICAgIH0KCiAg\nICAvKioKICAgICAqIFdoZXRoZXIgdG8gcGFyc2UgZWxlbWVudCB0ZXh0Lgog\nICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRQYXJzZVRleHQoYm9vbGVhbiB0\nZXh0KSB7CiAgICAgICAgX3BhcnNlVGV4dCA9IHRleHQ7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBXaGV0aGVyIHRvIHBhcnNlIGVsZW1lbnQgY29tbWVudHMu\nCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGdldFBhcnNlQ29tbWVudHMo\nKSB7CiAgICAgICAgcmV0dXJuIF9wYXJzZUNvbW1lbnRzOwogICAgfQoKICAg\nIC8qKgogICAgICogV2hldGhlciB0byBwYXJzZSBlbGVtZW50IGNvbW1lbnRz\nLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRQYXJzZUNvbW1lbnRzKGJv\nb2xlYW4gY29tbWVudHMpIHsKICAgICAgICBfcGFyc2VDb21tZW50cyA9IGNv\nbW1lbnRzOwogICAgfQoKICAgIC8qKgogICAgICogVGhlIFhNTCBkb2N1bWVu\ndCBsb2NhdGlvbi4KICAgICAqLwogICAgcHVibGljIExvY2F0aW9uIGdldExv\nY2F0aW9uKCkgewogICAgICAgIHJldHVybiBfbG9jYXRpb247CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBUaGUgbGV4aWNhbCBoYW5kbGVyIHRoYXQgc2hvdWxk\nIGJlIHJlZ2lzdGVyZWQgd2l0aCB0aGUgU0FYIHBhcnNlciB1c2VkCiAgICAg\nKiBieSB0aGlzIGNsYXNzLiBTaW5jZSB0aGUgPGNvZGU+b3JnLnhtbC5zYXgu\nZXh0PC9jb2RlPiBwYWNrYWdlIGlzIG5vdAogICAgICogYSByZXF1aXJlZCBw\nYXJ0IG9mIFNBWDIsIHRoaXMgaGFuZGxlciBtaWdodCBub3QgYmUgdXNlZCBi\neSB0aGUgcGFyc2VyLgogICAgICovCiAgICBwdWJsaWMgTGV4aWNhbEhhbmRs\nZXIgZ2V0TGV4aWNhbEhhbmRsZXIoKSB7CiAgICAgICAgcmV0dXJuIF9saDsK\nICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBsZXhpY2FsIGhhbmRsZXIgdGhh\ndCBzaG91bGQgYmUgcmVnaXN0ZXJlZCB3aXRoIHRoZSBTQVggcGFyc2VyIHVz\nZWQKICAgICAqIGJ5IHRoaXMgY2xhc3MuIFNpbmNlIHRoZSA8Y29kZT5vcmcu\neG1sLnNheC5leHQ8L2NvZGU+IHBhY2thZ2UgaXMgbm90CiAgICAgKiBhIHJl\ncXVpcmVkIHBhcnQgb2YgU0FYMiwgdGhpcyBoYW5kbGVyIG1pZ2h0IG5vdCBi\nZSB1c2VkIGJ5IHRoZSBwYXJzZXIuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lk\nIHNldExleGljYWxIYW5kbGVyKExleGljYWxIYW5kbGVyIGxoKSB7CiAgICAg\nICAgX2xoID0gbGg7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgWE1MIGRv\nY3VtZW50IGxvY2F0aW9uLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRM\nb2NhdGlvbihMb2NhdGlvbiBsb2NhdGlvbikgewogICAgICAgIF9sb2NhdGlv\nbiA9IGxvY2F0aW9uOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciB0\nbyB1c2UgdGhlIHNvdXJjZSBuYW1lIGFzIHRoZSBYTUwgc3lzdGVtIGlkLgog\nICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBnZXRTb3VyY2VJc1N5c3RlbUlk\nKCkgewogICAgICAgIHJldHVybiBfc3lzdGVtSWQ7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBXaGV0aGVyIHRvIHVzZSB0aGUgc291cmNlIG5hbWUgYXMgdGhl\nIFhNTCBzeXN0ZW0gaWQuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFNv\ndXJjZUlzU3lzdGVtSWQoYm9vbGVhbiBzeXN0ZW1JZCkgewogICAgICAgIF9z\neXN0ZW1JZCA9IHN5c3RlbUlkOwogICAgfQoKICAgIC8qKgogICAgICogV2hl\ndGhlciB0aGlzIGlzIGEgdmFsaWRhdGluZyBwYXJzZXIuCiAgICAgKi8KICAg\nIHB1YmxpYyBib29sZWFuIGlzVmFsaWRhdGluZygpIHsKICAgICAgICByZXR1\ncm4gX3ZhbGlkYXRpbmc7CiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVy\nIHRoaXMgaXMgYSB2YWxpZGF0aW5nIHBhcnNlci4KICAgICAqLwogICAgcHVi\nbGljIHZvaWQgc2V0VmFsaWRhdGluZyhib29sZWFuIHZhbGlkYXRpbmcpIHsK\nICAgICAgICBfdmFsaWRhdGluZyA9IHZhbGlkYXRpbmc7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBFeHBlY3RlZCBzdWZmaXggZm9yIG1ldGFkYXRhIHJlc291\ncmNlcywgb3IgbnVsbCBpZiB1bmtub3duLgogICAgICovCiAgICBwdWJsaWMg\nU3RyaW5nIGdldFN1ZmZpeCgpIHsKICAgICAgICByZXR1cm4gX3N1ZmZpeDsK\nICAgIH0KCiAgICAvKioKICAgICAqIEV4cGVjdGVkIHN1ZmZpeCBmb3IgbWV0\nYWRhdGEgcmVzb3VyY2VzLCBvciBudWxsIGlmIHVua25vd24uCiAgICAgKi8K\nICAgIHB1YmxpYyB2b2lkIHNldFN1ZmZpeChTdHJpbmcgc3VmZml4KSB7CiAg\nICAgICAgX3N1ZmZpeCA9IHN1ZmZpeDsKICAgIH0KCiAgICAvKioKICAgICAq\nIFdoZXRoZXIgcGFyc2VkIHJlc291cmNlIG5hbWVzIGFyZSBjYWNoZWQgdG8g\nYXZvaWQgZHVwbGljYXRlIHBhcnNpbmcuCiAgICAgKi8KICAgIHB1YmxpYyBi\nb29sZWFuIGlzQ2FjaGluZygpIHsKICAgICAgICByZXR1cm4gX2NhY2hpbmc7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHBhcnNlZCByZXNvdXJj\nZSBuYW1lcyBhcmUgY2FjaGVkIHRvIGF2b2lkIGR1cGxpY2F0ZSBwYXJzaW5n\nLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRDYWNoaW5nKGJvb2xlYW4g\nY2FjaGluZykgewogICAgICAgIF9jYWNoaW5nID0gY2FjaGluZzsKICAgICAg\nICBpZiAoIWNhY2hpbmcpCiAgICAgICAgICAgIGNsZWFyKCk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBUaGUgbG9nIHRvIHdyaXRlIHRvLgogICAgICovCiAg\nICBwdWJsaWMgTG9nIGdldExvZygpIHsKICAgICAgICByZXR1cm4gX2xvZzsK\nICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBsb2cgdG8gd3JpdGUgdG8uCiAg\nICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldExvZyhMb2cgbG9nKSB7CiAgICAg\nICAgX2xvZyA9IGxvZzsKICAgIH0KCiAgICAvKioKICAgICAqIENsYXNzbG9h\nZGVyIHRvIHVzZSBmb3IgY2xhc3MgbmFtZSByZXNvbHV0aW9uLgogICAgICov\nCiAgICBwdWJsaWMgQ2xhc3NMb2FkZXIgZ2V0Q2xhc3NMb2FkZXIoKSB7CiAg\nICAgICAgcmV0dXJuIF9sb2FkZXI7CiAgICB9CgogICAgLyoqCiAgICAgKiBD\nbGFzc2xvYWRlciB0byB1c2UgZm9yIGNsYXNzIG5hbWUgcmVzb2x1dGlvbi4K\nICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0Q2xhc3NMb2FkZXIoQ2xhc3NM\nb2FkZXIgbG9hZGVyKSB7CiAgICAgICAgX2xvYWRlciA9IGxvYWRlcjsKICAg\nIH0KCiAgICBwdWJsaWMgTGlzdCBnZXRSZXN1bHRzKCkgewogICAgICAgIGlm\nIChfcmVzdWx0cyA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gQ29sbGVj\ndGlvbnMuRU1QVFlfTElTVDsKICAgICAgICByZXR1cm4gX3Jlc3VsdHM7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgcGFyc2UoU3RyaW5nIHJzcmMpIHRocm93\ncyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgaWYgKHJzcmMgIT0gbnVsbCkKICAg\nICAgICAgICAgcGFyc2UobmV3IFJlc291cmNlTWV0YURhdGFJdGVyYXRvcihy\nc3JjLCBfbG9hZGVyKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgcGFyc2Uo\nVVJMIHVybCkgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICBpZiAodXJs\nICE9IG51bGwpCiAgICAgICAgICAgIHBhcnNlKG5ldyBVUkxNZXRhRGF0YUl0\nZXJhdG9yKHVybCkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHBhcnNlKEZp\nbGUgZmlsZSkgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICBpZiAoZmls\nZSA9PSBudWxsKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgaWYgKCFm\naWxlLmlzRGlyZWN0b3J5KCkpCiAgICAgICAgICAgIHBhcnNlKG5ldyBGaWxl\nTWV0YURhdGFJdGVyYXRvcihmaWxlKSk7CiAgICAgICAgZWxzZSB7CiAgICAg\nICAgICAgIFN0cmluZyBzdWZmID0gKF9zdWZmaXggPT0gbnVsbCkgPyAiIiA6\nIF9zdWZmaXg7CiAgICAgICAgICAgIHBhcnNlKG5ldyBGaWxlTWV0YURhdGFJ\ndGVyYXRvcihmaWxlLAogICAgICAgICAgICAgICAgbmV3IFN1ZmZpeE1ldGFE\nYXRhRmlsdGVyKHN1ZmYpKSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHBhcnNlKENsYXNzIGNscywgYm9vbGVhbiB0b3BEb3duKSB0aHJv\nd3MgSU9FeGNlcHRpb24gewogICAgICAgIFN0cmluZyBzdWZmID0gKF9zdWZm\naXggPT0gbnVsbCkgPyAiIiA6IF9zdWZmaXg7CiAgICAgICAgcGFyc2UobmV3\nIENsYXNzTWV0YURhdGFJdGVyYXRvcihjbHMsIHN1ZmYsIHRvcERvd24pLCAh\ndG9wRG93bik7CiAgICB9CgogICAgcHVibGljIHZvaWQgcGFyc2UoUmVhZGVy\nIHhtbCwgU3RyaW5nIHNvdXJjZU5hbWUpIHRocm93cyBJT0V4Y2VwdGlvbiB7\nCiAgICAgICAgaWYgKHhtbCAhPSBudWxsICYmIChzb3VyY2VOYW1lID09IG51\nbGwgfHwgIXBhcnNlZChzb3VyY2VOYW1lKSkpCiAgICAgICAgICAgIHBhcnNl\nTmV3UmVzb3VyY2UoeG1sLCBzb3VyY2VOYW1lKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBwYXJzZShNZXRhRGF0YUl0ZXJhdG9yIGl0cikgdGhyb3dzIElP\nRXhjZXB0aW9uIHsKICAgICAgICBwYXJzZShpdHIsIGZhbHNlKTsKICAgIH0K\nCiAgICAvKioKICAgICAqIFBhcnNlIHRoZSByZXNvdXJjZXMgcmV0dXJuZWQg\nYnkgdGhlIGdpdmVuIGl0ZXJhdG9yLCBvcHRpb25hbGx5IHN0b3BwaW5nCiAg\nICAgKiB3aGVuIHRoZSBmaXJzdCB2YWxpZCByZXNvdXJjZSBpcyBmb3VuZC4K\nICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIHBhcnNlKE1ldGFEYXRhSXRlcmF0\nb3IgaXRyLCBib29sZWFuIHN0b3BGaXJzdCkKICAgICAgICB0aHJvd3MgSU9F\neGNlcHRpb24gewogICAgICAgIGlmIChpdHIgPT0gbnVsbCkKICAgICAgICAg\nICAgcmV0dXJuOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIFN0cmluZyBz\nb3VyY2VOYW1lOwogICAgICAgICAgICB3aGlsZSAoaXRyLmhhc05leHQoKSkg\newogICAgICAgICAgICAgICAgc291cmNlTmFtZSA9IGl0ci5uZXh0KCkudG9T\ndHJpbmcoKTsKICAgICAgICAgICAgICAgIGlmIChwYXJzZWQoc291cmNlTmFt\nZSkpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoc3RvcEZpcnN0KQogICAg\nICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAg\nICBjb250aW51ZTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAg\nICAvLyBpbmRpdmlkdWFsIGZpbGVzIG9mIHRoZSByZXNvdXJjZSBtaWdodCBh\nbHJlYWR5IGJlIHBhcnNlZAogICAgICAgICAgICAgICAgX3NvdXJjZUZpbGUg\nPSBpdHIuZ2V0RmlsZSgpOwogICAgICAgICAgICAgICAgcGFyc2VOZXdSZXNv\ndXJjZShuZXcgSW5wdXRTdHJlYW1SZWFkZXIoaXRyLmdldElucHV0U3RyZWFt\nKCkpLAogICAgICAgICAgICAgICAgICAgIHNvdXJjZU5hbWUpOwogICAgICAg\nICAgICAgICAgaWYgKHN0b3BGaXJzdCkKICAgICAgICAgICAgICAgICAgICBi\ncmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBmaW5hbGx5\nIHsKICAgICAgICAgICAgaXRyLmNsb3NlKCk7CiAgICAgICAgfQogICAgfQoK\nICAgIC8qKgogICAgICogUGFyc2UgYSBwcmV2aW91c2x5LXVuc2VlbiBzb3Vy\nY2UuIEFsbCBwYXJzaW5nIG1ldGhvZHMgZGVsZWdhdGUKICAgICAqIHRvIHRo\naXMgb25lLgogICAgICovCiAgICBwcm90ZWN0ZWQgdm9pZCBwYXJzZU5ld1Jl\nc291cmNlKFJlYWRlciB4bWwsIFN0cmluZyBzb3VyY2VOYW1lKQogICAgICAg\nIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgaWYgKF9sb2cgIT0gbnVs\nbCAmJiBfbG9nLmlzVHJhY2VFbmFibGVkKCkpCiAgICAgICAgICAgIF9sb2cu\ndHJhY2UoX2xvYy5nZXQoInN0YXJ0LXBhcnNlIiwgc291cmNlTmFtZSkpOwoK\nICAgICAgICAvLyBldmVuIGlmIHdlIHdhbnQgdG8gdmFsaWRhdGUsIHNwZWNp\nZnkgdGhhdCBpdCB3b24ndCBoYXBwZW4KICAgICAgICAvLyBpZiB3ZSBoYXZl\nIG5laXRoZXIgYSBEb2NUeXBlIG5vdCBhIFNjaGVtYQogICAgICAgIE9iamVj\ndCBzY2hlbWFTb3VyY2UgPSBnZXRTY2hlbWFTb3VyY2UoKTsKICAgICAgICBp\nZiAoc2NoZW1hU291cmNlICE9IG51bGwgJiYgX3NjaGVtYUJ1ZykgewogICAg\nICAgICAgICBpZiAoX2xvZyAhPSBudWxsICYmIF9sb2cuaXNUcmFjZUVuYWJs\nZWQoKSkKICAgICAgICAgICAgICAgIF9sb2cudHJhY2UoX2xvYy5nZXQoInBh\ncnNlci1zY2hlbWEtYnVnIikpOwogICAgICAgICAgICBzY2hlbWFTb3VyY2Ug\nPSBudWxsOwogICAgICAgIH0KICAgICAgICBib29sZWFuIHZhbGlkYXRpbmcg\nPSBfdmFsaWRhdGluZyAmJiAoZ2V0RG9jVHlwZSgpICE9IG51bGwgCiAgICAg\nICAgICAgIHx8IHNjaGVtYVNvdXJjZSAhPSBudWxsKTsKCiAgICAgICAgLy8g\ncGFyc2UgdGhlIG1ldGFkYXRhIHdpdGggYSBTQVggcGFyc2VyCiAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgX3NvdXJjZU5hbWUgPSBzb3VyY2VOYW1lOwog\nICAgICAgICAgICBTQVhQYXJzZXIgcGFyc2VyID0gWE1MRmFjdG9yeS5nZXRT\nQVhQYXJzZXIodmFsaWRhdGluZywgdHJ1ZSk7CiAgICAgICAgICAgIE9iamVj\ndCBzY2hlbWEgPSBudWxsOwogICAgICAgICAgICBpZiAodmFsaWRhdGluZykg\newogICAgICAgICAgICAgICAgc2NoZW1hID0gc2NoZW1hU291cmNlOwogICAg\nICAgICAgICAgICAgaWYgKHNjaGVtYSA9PSBudWxsICYmIGdldERvY1R5cGUo\nKSAhPSBudWxsKQogICAgICAgICAgICAgICAgICAgIHhtbCA9IG5ldyBEb2NU\neXBlUmVhZGVyKHhtbCwgZ2V0RG9jVHlwZSgpKTsKICAgICAgICAgICAgfQoK\nICAgICAgICAgICAgaWYgKF9wYXJzZUNvbW1lbnRzIHx8IF9saCAhPSBudWxs\nKQogICAgICAgICAgICAgICAgcGFyc2VyLnNldFByb3BlcnR5CiAgICAgICAg\nICAgICAgICAgICAgKCJodHRwOi8veG1sLm9yZy9zYXgvcHJvcGVydGllcy9s\nZXhpY2FsLWhhbmRsZXIiLCB0aGlzKTsKCiAgICAgICAgICAgIGlmIChzY2hl\nbWEgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgcGFyc2VyLnNldFByb3Bl\ncnR5CiAgICAgICAgICAgICAgICAgICAgKCJodHRwOi8vamF2YS5zdW4uY29t\nL3htbC9qYXhwL3Byb3BlcnRpZXMvc2NoZW1hTGFuZ3VhZ2UiLAogICAgICAg\nICAgICAgICAgICAgICAgICAiaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxT\nY2hlbWEiKTsKICAgICAgICAgICAgICAgIHBhcnNlci5zZXRQcm9wZXJ0eQog\nICAgICAgICAgICAgICAgICAgICgiaHR0cDovL2phdmEuc3VuLmNvbS94bWwv\namF4cC9wcm9wZXJ0aWVzL3NjaGVtYVNvdXJjZSIsCiAgICAgICAgICAgICAg\nICAgICAgICAgIHNjaGVtYSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAg\nIElucHV0U291cmNlIGlzID0gbmV3IElucHV0U291cmNlKHhtbCk7CiAgICAg\nICAgICAgIGlmIChfc3lzdGVtSWQgJiYgc291cmNlTmFtZSAhPSBudWxsKQog\nICAgICAgICAgICAgICAgaXMuc2V0U3lzdGVtSWQoc291cmNlTmFtZSk7CiAg\nICAgICAgICAgIHBhcnNlci5wYXJzZShpcywgdGhpcyk7CiAgICAgICAgICAg\nIGZpbmlzaCgpOwogICAgICAgIH0gY2F0Y2ggKFNBWEV4Y2VwdGlvbiBzZSkg\newogICAgICAgICAgICBJT0V4Y2VwdGlvbiBpb2UgPSBuZXcgSU9FeGNlcHRp\nb24oc2UudG9TdHJpbmcoKSk7CiAgICAgICAgICAgIEphdmFWZXJzaW9ucy5p\nbml0Q2F1c2UoaW9lLCBzZSk7CiAgICAgICAgICAgIHRocm93IGlvZTsKICAg\nICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICByZXNldCgpOwogICAgICAg\nIH0KICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0cnVlIGlmIHRoZSBn\naXZlbiBzb3VyY2UgaXMgcGFyc2VkLiBPdGhlcndpc2UsIHJlY29yZCB0aGF0\nCiAgICAgKiBpdCB3aWxsIGJlIHBhcnNlZC4KICAgICAqLwogICAgcHJvdGVj\ndGVkIGJvb2xlYW4gcGFyc2VkKFN0cmluZyBzcmMpIHsKICAgICAgICBpZiAo\nIV9jYWNoaW5nKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAg\naWYgKF9wYXJzZWQgPT0gbnVsbCkKICAgICAgICAgICAgX3BhcnNlZCA9IG5l\ndyBIYXNoTWFwKCk7CgogICAgICAgIENsYXNzTG9hZGVyIGxvYWRlciA9IGN1\ncnJlbnRDbGFzc0xvYWRlcigpOwogICAgICAgIFNldCBzZXQgPSAoU2V0KSBf\ncGFyc2VkLmdldChsb2FkZXIpOwogICAgICAgIGlmIChzZXQgPT0gbnVsbCkg\newogICAgICAgICAgICBzZXQgPSBuZXcgSGFzaFNldCgpOwogICAgICAgICAg\nICBfcGFyc2VkLnB1dChsb2FkZXIsIHNldCk7CiAgICAgICAgfQogICAgICAg\nIGJvb2xlYW4gYWRkZWQgPSBzZXQuYWRkKHNyYyk7CiAgICAgICAgaWYgKCFh\nZGRlZCAmJiBfbG9nICE9IG51bGwgJiYgX2xvZy5pc1RyYWNlRW5hYmxlZCgp\nKQogICAgICAgICAgICBfbG9nLnRyYWNlKF9sb2MuZ2V0KCJhbHJlYWR5LXBh\ncnNlZCIsIHNyYykpOwogICAgICAgIHJldHVybiAhYWRkZWQ7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgY2xlYXIoKSB7CiAgICAgICAgaWYgKF9sb2cgIT0g\nbnVsbCAmJiBfbG9nLmlzVHJhY2VFbmFibGVkKCkpCiAgICAgICAgICAgIF9s\nb2cudHJhY2UoX2xvYy5nZXQoImNsZWFyLXBhcnNlciIsIHRoaXMpKTsKICAg\nICAgICBpZiAoX3BhcnNlZCAhPSBudWxsKQogICAgICAgICAgICBfcGFyc2Vk\nLmNsZWFyKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgZXJyb3IoU0FYUGFy\nc2VFeGNlcHRpb24gc2UpIHRocm93cyBTQVhFeGNlcHRpb24gewogICAgICAg\nIHRocm93IGdldEV4Y2VwdGlvbihzZS50b1N0cmluZygpKTsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCBmYXRhbEVycm9yKFNBWFBhcnNlRXhjZXB0aW9uIHNl\nKSB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgICAgICB0aHJvdyBnZXRFeGNl\ncHRpb24oc2UudG9TdHJpbmcoKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nc2V0RG9jdW1lbnRMb2NhdG9yKExvY2F0b3IgbG9jYXRvcikgewogICAgICAg\nIF9sb2NhdGlvbi5zZXRMb2NhdG9yKGxvY2F0b3IpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHN0YXJ0RWxlbWVudChTdHJpbmcgdXJpLCBTdHJpbmcgbmFt\nZSwgU3RyaW5nIHFOYW1lLAogICAgICAgIEF0dHJpYnV0ZXMgYXR0cnMpIHRo\ncm93cyBTQVhFeGNlcHRpb24gewogICAgICAgIF9kZXB0aCsrOwogICAgICAg\nIGlmIChfZGVwdGggPD0gX2lnbm9yZSkKICAgICAgICAgICAgaWYgKCFzdGFy\ndEVsZW1lbnQocU5hbWUsIGF0dHJzKSkKICAgICAgICAgICAgICAgIGlnbm9y\nZUNvbnRlbnQodHJ1ZSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgZW5kRWxl\nbWVudChTdHJpbmcgdXJpLCBTdHJpbmcgbmFtZSwgU3RyaW5nIHFOYW1lKQog\nICAgICAgIHRocm93cyBTQVhFeGNlcHRpb24gewogICAgICAgIGlmIChfZGVw\ndGggPCBfaWdub3JlKQogICAgICAgICAgICBlbmRFbGVtZW50KHFOYW1lKTsK\nICAgICAgICBfdGV4dCA9IG51bGw7CiAgICAgICAgaWYgKF9jb21tZW50cyAh\nPSBudWxsKQogICAgICAgICAgICBfY29tbWVudHMuY2xlYXIoKTsKICAgICAg\nICBpZiAoX2RlcHRoID09IF9pZ25vcmUpCiAgICAgICAgICAgIF9pZ25vcmUg\nPSBJbnRlZ2VyLk1BWF9WQUxVRTsKICAgICAgICBfZGVwdGgtLTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBjaGFyYWN0ZXJzKGNoYXJbXSBjaCwgaW50IHN0\nYXJ0LCBpbnQgbGVuZ3RoKSB7CiAgICAgICAgaWYgKF9wYXJzZVRleHQgJiYg\nX2RlcHRoIDw9IF9pZ25vcmUpIHsKICAgICAgICAgICAgaWYgKF90ZXh0ID09\nIG51bGwpCiAgICAgICAgICAgICAgICBfdGV4dCA9IG5ldyBTdHJpbmdCdWZm\nZXIoKTsKICAgICAgICAgICAgX3RleHQuYXBwZW5kKGNoLCBzdGFydCwgbGVu\nZ3RoKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZvaWQgY29tbWVu\ndChjaGFyW10gY2gsIGludCBzdGFydCwgaW50IGxlbmd0aCkgdGhyb3dzIFNB\nWEV4Y2VwdGlvbiB7CiAgICAgICAgaWYgKF9wYXJzZUNvbW1lbnRzICYmIF9k\nZXB0aCA8PSBfaWdub3JlKSB7CiAgICAgICAgICAgIGlmIChfY29tbWVudHMg\nPT0gbnVsbCkKICAgICAgICAgICAgICAgIF9jb21tZW50cyA9IG5ldyBBcnJh\neUxpc3QoMyk7CiAgICAgICAgICAgIF9jb21tZW50cy5hZGQoU3RyaW5nLnZh\nbHVlT2YoY2gsIHN0YXJ0LCBsZW5ndGgpKTsKICAgICAgICB9CiAgICAgICAg\naWYgKF9saCAhPSBudWxsKQogICAgICAgICAgICBfbGguY29tbWVudChjaCwg\nc3RhcnQsIGxlbmd0aCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc3RhcnRD\nREFUQSgpIHRocm93cyBTQVhFeGNlcHRpb24gewogICAgICAgIGlmIChfbGgg\nIT0gbnVsbCkKICAgICAgICAgICAgX2xoLnN0YXJ0Q0RBVEEoKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBlbmRDREFUQSgpIHRocm93cyBTQVhFeGNlcHRp\nb24gewogICAgICAgIGlmIChfbGggIT0gbnVsbCkKICAgICAgICAgICAgX2xo\nLmVuZENEQVRBKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc3RhcnREVEQo\nU3RyaW5nIG5hbWUsIFN0cmluZyBwdWJsaWNJZCwgU3RyaW5nIHN5c3RlbUlk\nKQogICAgICAgIHRocm93cyBTQVhFeGNlcHRpb24gewogICAgICAgIGlmIChf\nbGggIT0gbnVsbCkKICAgICAgICAgICAgX2xoLnN0YXJ0RFREKG5hbWUsIHB1\nYmxpY0lkLCBzeXN0ZW1JZCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgZW5k\nRFREKCkgdGhyb3dzIFNBWEV4Y2VwdGlvbiB7CiAgICAgICAgaWYgKF9saCAh\nPSBudWxsKQogICAgICAgICAgICBfbGguZW5kRFREKCk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgc3RhcnRFbnRpdHkoU3RyaW5nIG5hbWUpIHRocm93cyBT\nQVhFeGNlcHRpb24gewogICAgICAgIGlmIChfbGggIT0gbnVsbCkKICAgICAg\nICAgICAgX2xoLnN0YXJ0RW50aXR5KG5hbWUpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIGVuZEVudGl0eShTdHJpbmcgbmFtZSkgdGhyb3dzIFNBWEV4Y2Vw\ndGlvbiB7CiAgICAgICAgaWYgKF9saCAhPSBudWxsKQogICAgICAgICAgICBf\nbGguZW5kRW50aXR5KG5hbWUpOwogICAgfQoKICAgIC8qKgogICAgICogT3Zl\ncnJpZGUgdGhpcyBtZXRob2QgbWFya2luZyB0aGUgc3RhcnQgb2Ygc29tZSBl\nbGVtZW50LiBJZiB0aGlzIG1ldGhvZAogICAgICogcmV0dXJucyBmYWxzZSwg\ndGhlIGNvbnRlbnQgb2YgdGhlIGVsZW1lbnQgYW5kIHRoZSBlbmQgZWxlbWVu\ndCBldmVudCB3aWxsCiAgICAgKiBiZSBpZ25vcmVkLgogICAgICovCiAgICBw\ncm90ZWN0ZWQgYWJzdHJhY3QgYm9vbGVhbiBzdGFydEVsZW1lbnQoU3RyaW5n\nIG5hbWUsIEF0dHJpYnV0ZXMgYXR0cnMpCiAgICAgICAgdGhyb3dzIFNBWEV4\nY2VwdGlvbjsKCiAgICAvKioKICAgICAqIE92ZXJyaWRlIHRoaXMgbWV0aG9k\nIG1hcmtpbmcgdGhlIGVuZCBvZiBzb21lIGVsZW1lbnQuCiAgICAgKi8KICAg\nIHByb3RlY3RlZCBhYnN0cmFjdCB2b2lkIGVuZEVsZW1lbnQoU3RyaW5nIG5h\nbWUpIHRocm93cyBTQVhFeGNlcHRpb247CgogICAgLyoqCiAgICAgKiBBZGQg\nYSByZXN1bHQgdG8gYmUgcmV0dXJuZWQgZnJvbSB0aGUgY3VycmVudCBwYXJz\nZS4KICAgICAqLwogICAgcHJvdGVjdGVkIHZvaWQgYWRkUmVzdWx0KE9iamVj\ndCByZXN1bHQpIHsKICAgICAgICBpZiAoX2xvZyAhPSBudWxsICYmIF9sb2cu\naXNUcmFjZUVuYWJsZWQoKSkKICAgICAgICAgICAgX2xvZy50cmFjZShfbG9j\nLmdldCgiYWRkLXJlc3VsdCIsIHJlc3VsdCkpOwogICAgICAgIF9jdXJSZXN1\nbHRzLmFkZChyZXN1bHQpOwogICAgfQoKICAgIC8qKgogICAgICogT3ZlcnJp\nZGUgdGhpcyBtZXRob2QgdG8gZmluaXNoIHVwIGFmdGVyIGEgcGFyc2U7IHRo\naXMgaXMgb25seQogICAgICogY2FsbGVkIGlmIG5vIGVycm9ycyBhcmUgZW5j\nb3VudGVyZWQgZHVyaW5nIHBhcnNpbmcuIFN1YmNsYXNzZXMgc2hvdWxkCiAg\nICAgKiBjYWxsIDxjb2RlPnN1cGVyLmZpbmlzaCgpPC9jb2RlPiB0byByZXNv\nbHZlIHN1cGVyY2xhc3Mgc3RhdGUuCiAgICAgKi8KICAgIHByb3RlY3RlZCB2\nb2lkIGZpbmlzaCgpIHsKICAgICAgICBpZiAoX2xvZyAhPSBudWxsICYmIF9s\nb2cuaXNUcmFjZUVuYWJsZWQoKSkKICAgICAgICAgICAgX2xvZy50cmFjZShf\nbG9jLmdldCgiZW5kLXBhcnNlIiwgZ2V0U291cmNlTmFtZSgpKSk7CiAgICAg\nICAgX3Jlc3VsdHMgPSBuZXcgQXJyYXlMaXN0KF9jdXJSZXN1bHRzKTsKICAg\nIH0KCiAgICAvKioKICAgICAqIE92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvIGNs\nZWFyIGFueSBzdGF0ZSBhbmQgcmVhZHkgdGhlIHBhcnNlciBmb3IKICAgICAq\nIGEgbmV3IGRvY3VtZW50LiBTdWJjbGFzc2VzIHNob3VsZCBjYWxsCiAgICAg\nKiA8Y29kZT5zdXBlci5yZXNldCgpPC9jb2RlPiB0byBjbGVhciBzdXBlcmNs\nYXNzIHN0YXRlLgogICAgICovCiAgICBwcm90ZWN0ZWQgdm9pZCByZXNldCgp\nIHsKICAgICAgICBfY3VyUmVzdWx0cy5jbGVhcigpOwogICAgICAgIF9jdXJM\nb2FkZXIgPSBudWxsOwogICAgICAgIF9zb3VyY2VOYW1lID0gbnVsbDsKICAg\nICAgICBfc291cmNlRmlsZSA9IG51bGw7CiAgICAgICAgX2RlcHRoID0gLTE7\nCiAgICAgICAgX2lnbm9yZSA9IEludGVnZXIuTUFYX1ZBTFVFOwogICAgICAg\nIGlmIChfY29tbWVudHMgIT0gbnVsbCkKICAgICAgICAgICAgX2NvbW1lbnRz\nLmNsZWFyKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBJbXBsZW1lbnQgdG8g\ncmV0dXJuIHRoZSBYTUwgc2NoZW1hIHNvdXJjZSBmb3IgdGhlIGRvY3VtZW50\nLiBSZXR1cm5zCiAgICAgKiBudWxsIGJ5IGRlZmF1bHQuIE1heSByZXR1cm46\nCiAgICAgKiA8dWw+CiAgICAgKiA8bGk+PGNvZGU+U3RyaW5nPC9jb2RlPiBw\nb2ludGluZyB0byBzY2hlbWEgVVJJLjwvbGk+CiAgICAgKiA8bGk+PGNvZGU+\nSW5wdXRTdHJlYW08L2NvZGU+IGNvbnRhaW5pbmcgc2NoZW1hIGNvbnRlbnRz\nLjwvbGk+CiAgICAgKiA8bGk+PGNvZGU+SW5wdXRTb3VyY2U8L2NvZGU+IGNv\nbnRhaW5pbmcgc2NoZW1hIGNvbnRlbnRzLjwvbGk+CiAgICAgKiA8bGk+PGNv\nZGU+RmlsZTwvY29kZT4gY29udGFpbmluZyBzY2hlbWEgY29udGVudHMuPC9s\naT4KICAgICAqIDxsaT5BcnJheSBvZiBhbnkgb2YgdGhlIGFib3ZlIGVsZW1l\nbnRzLjwvbGk+CiAgICAgKiA8L3VsPgogICAgICovCiAgICBwcm90ZWN0ZWQg\nT2JqZWN0IGdldFNjaGVtYVNvdXJjZSgpIHRocm93cyBJT0V4Y2VwdGlvbiB7\nCiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBP\ndmVycmlkZSB0aGlzIG1ldGhvZCB0byByZXR1cm4gYW55IDxjb2RlPkRPQ1RZ\nUEU8L2NvZGU+IGRlY2xhcmF0aW9uCiAgICAgKiB0aGF0IHNob3VsZCBiZSBk\neW5hbWljYWxseSBpbmNsdWRlZCBpbiB4bWwgZG9jdW1lbnRzIHRoYXQgd2ls\nbCBiZQogICAgICogdmFsaWRhdGVkLiBSZXR1cm5zIG51bGwgYnkgZGVmYXVs\ndC4KICAgICAqLwogICAgcHJvdGVjdGVkIFJlYWRlciBnZXREb2NUeXBlKCkg\ndGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAg\nIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgbmFtZSBvZiB0aGUgc291\ncmNlIGZpbGUgYmVpbmcgcGFyc2VkLgogICAgICovCiAgICBwcm90ZWN0ZWQg\nU3RyaW5nIGdldFNvdXJjZU5hbWUoKSB7CiAgICAgICAgcmV0dXJuIF9zb3Vy\nY2VOYW1lOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBmaWxl\nIG9mIHRoZSBzb3VyY2UgYmVpbmcgcGFyc2VkLgogICAgICovCiAgICBwcm90\nZWN0ZWQgRmlsZSBnZXRTb3VyY2VGaWxlKCkgewogICAgICAgIHJldHVybiBf\nc291cmNlRmlsZTsKICAgIH0KCiAgICAvKioKICAgICAqIEFkZCBjdXJyZW50\nIGNvbW1lbnRzIHRvIHRoZSBnaXZlbiBlbnRpdHkuIEJ5IGRlZmF1bHQsIGFz\nc3VtZXMgZW50aXR5CiAgICAgKiBpcyB7QGxpbmsgQ29tbWVudGFibGV9Lgog\nICAgICovCiAgICBwcm90ZWN0ZWQgdm9pZCBhZGRDb21tZW50cyhPYmplY3Qg\nb2JqKSB7CiAgICAgICAgU3RyaW5nW10gY29tbWVudHMgPSBjdXJyZW50Q29t\nbWVudHMoKTsKICAgICAgICBpZiAoY29tbWVudHMubGVuZ3RoID4gMCAmJiBv\nYmogaW5zdGFuY2VvZiBDb21tZW50YWJsZSkKICAgICAgICAgICAgKChDb21t\nZW50YWJsZSkgb2JqKS5zZXRDb21tZW50cyhjb21tZW50cyk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBBcnJheSBvZiBjb21tZW50cyBmb3IgdGhlIGN1cnJl\nbnQgbm9kZSwgb3IgZW1wdHkgYXJyYXkgaWYgbm9uZS4KICAgICAqLwogICAg\ncHJvdGVjdGVkIFN0cmluZ1tdIGN1cnJlbnRDb21tZW50cygpIHsKICAgICAg\nICBpZiAoX2NvbW1lbnRzID09IG51bGwgfHwgX2NvbW1lbnRzLmlzRW1wdHko\nKSkKICAgICAgICAgICAgcmV0dXJuIENvbW1lbnRhYmxlLkVNUFRZX0NPTU1F\nTlRTOwogICAgICAgIHJldHVybiAoU3RyaW5nW10pIF9jb21tZW50cy50b0Fy\ncmF5KG5ldyBTdHJpbmdbX2NvbW1lbnRzLnNpemUoKV0pOwogICAgfQoKICAg\nIC8qKgogICAgICogUmV0dXJuIHRoZSB0ZXh0IHZhbHVlIHdpdGhpbiB0aGUg\nY3VycmVudCBub2RlLgogICAgICovCiAgICBwcm90ZWN0ZWQgU3RyaW5nIGN1\ncnJlbnRUZXh0KCkgewogICAgICAgIGlmIChfdGV4dCA9PSBudWxsKQogICAg\nICAgICAgICByZXR1cm4gIiI7CiAgICAgICAgcmV0dXJuIF90ZXh0LnRvU3Ry\naW5nKCkudHJpbSgpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRo\nZSBjdXJyZW50IGxvY2F0aW9uIHdpdGhpbiB0aGUgc291cmNlIGZpbGUuCiAg\nICAgKi8KICAgIHByb3RlY3RlZCBTdHJpbmcgY3VycmVudExvY2F0aW9uKCkg\newogICAgICAgIHJldHVybiAiIFsiICsgX2xvYy5nZXQoImxvYy1wcmVmaXgi\nKSArIF9sb2NhdGlvbi5nZXRMb2NhdGlvbigpICsgIl0iOwogICAgfQoKICAg\nIC8qKgogICAgICogUmV0dXJuIHRoZSBwYXJzZSBkZXB0aC4gV2l0aGluIHRo\nZSByb290IGVsZW1lbnQsIHRoZSBkZXB0aCBpcyAwLAogICAgICogd2l0aGlu\nIHRoZSBmaXJzdCBuZXN0ZWQgZWxlbWVudCwgaXQgaXMgMSwgYW5kIHNvIGZv\ncnRoLgogICAgICovCiAgICBwcm90ZWN0ZWQgaW50IGN1cnJlbnREZXB0aCgp\nIHsKICAgICAgICByZXR1cm4gX2RlcHRoOwogICAgfQoKICAgIC8qKgogICAg\nICogUmV0dXJuIHRoZSBjbGFzcyBsb2FkZXIgdG8gdXNlIHdoZW4gcmVzb2x2\naW5nIHJlc291cmNlcyBhbmQgbG9hZGluZwogICAgICogY2xhc3Nlcy4KICAg\nICAqLwogICAgcHJvdGVjdGVkIENsYXNzTG9hZGVyIGN1cnJlbnRDbGFzc0xv\nYWRlcigpIHsKICAgICAgICBpZiAoX2xvYWRlciAhPSBudWxsKQogICAgICAg\nICAgICByZXR1cm4gX2xvYWRlcjsKICAgICAgICBpZiAoX2N1ckxvYWRlciA9\nPSBudWxsKQogICAgICAgICAgICBfY3VyTG9hZGVyID0gVGhyZWFkLmN1cnJl\nbnRUaHJlYWQoKS5nZXRDb250ZXh0Q2xhc3NMb2FkZXIoKTsKICAgICAgICBy\nZXR1cm4gX2N1ckxvYWRlcjsKICAgIH0KCiAgICAvKioKICAgICAqIElnbm9y\nZSBhbGwgY29udGVudCBiZWxvdyB0aGUgY3VycmVudCBlbGVtZW50LgogICAg\nICoKICAgICAqIEBwYXJhbSBpZ25vcmVFbmQgd2hldGhlciB0byBpZ25vcmUg\ndGhlIGVuZCBlbGVtZW50IGV2ZW50CiAgICAgKi8KICAgIHByb3RlY3RlZCB2\nb2lkIGlnbm9yZUNvbnRlbnQoYm9vbGVhbiBpZ25vcmVFbmQpIHsKICAgICAg\nICBfaWdub3JlID0gX2RlcHRoOwogICAgICAgIGlmICghaWdub3JlRW5kKQog\nICAgICAgICAgICBfaWdub3JlKys7CiAgICB9CgogICAgLyoqCiAgICAgKiBS\nZXR1cm5zIGEgU0FYRXhjZXB0aW9uIHdpdGggdGhlIHNvdXJjZSBmaWxlIG5h\nbWUgYW5kIHRoZSBnaXZlbiBlcnJvcgogICAgICogbWVzc2FnZS4KICAgICAq\nLwogICAgcHJvdGVjdGVkIFNBWEV4Y2VwdGlvbiBnZXRFeGNlcHRpb24oU3Ry\naW5nIG1zZykgewogICAgICAgIHJldHVybiBuZXcgU0FYRXhjZXB0aW9uKGdl\ndFNvdXJjZU5hbWUoKSArIGN1cnJlbnRMb2NhdGlvbigpICsKICAgICAgICAg\nICAgIjogIiArIG1zZyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5z\nIGEgU0FYRXhjZXB0aW9uIHdpdGggdGhlIHNvdXJjZSBmaWxlIG5hbWUgYW5k\nIHRoZSBnaXZlbiBlcnJvcgogICAgICogbWVzc2FnZS4KICAgICAqLwogICAg\ncHJvdGVjdGVkIFNBWEV4Y2VwdGlvbiBnZXRFeGNlcHRpb24oTWVzc2FnZSBt\nc2cpIHsKICAgICAgICByZXR1cm4gbmV3IFNBWEV4Y2VwdGlvbihnZXRTb3Vy\nY2VOYW1lKCkgKyBjdXJyZW50TG9jYXRpb24oKSArCiAgICAgICAgICAgICI6\nICIgKyBtc2cuZ2V0TWVzc2FnZSgpKTsKICAgIH0KCiAgICAvKioKICAgICAq\nIFJldHVybnMgYSBTQVhFeGNlcHRpb24gd2l0aCB0aGUgc291cmNlIGZpbGUg\nbmFtZSBhbmQgdGhlIGdpdmVuIGVycm9yCiAgICAgKiBtZXNzYWdlLgogICAg\nICovCiAgICBwcm90ZWN0ZWQgU0FYRXhjZXB0aW9uIGdldEV4Y2VwdGlvbihN\nZXNzYWdlIG1zZywgVGhyb3dhYmxlIGNhdXNlKSB7CiAgICAgICAgaWYgKGNh\ndXNlICE9IG51bGwgJiYgX2xvZyAhPSBudWxsICYmIF9sb2cuaXNUcmFjZUVu\nYWJsZWQoKSkKICAgICAgICAgICAgX2xvZy50cmFjZShfbG9jLmdldCgic2F4\nLWV4Y2VwdGlvbiIsCiAgICAgICAgICAgICAgICBnZXRTb3VyY2VOYW1lKCks\nIF9sb2NhdGlvbi5nZXRMb2NhdGlvbigpKSwgY2F1c2UpOwogICAgICAgIFNB\nWEV4Y2VwdGlvbiBlID0gbmV3IFNBWEV4Y2VwdGlvbihnZXRTb3VyY2VOYW1l\nKCkgKyBjdXJyZW50TG9jYXRpb24oKSArCiAgICAgICAgICAgICI6ICIgKyBt\nc2cgKyAiIFsiICsgY2F1c2UgKyAiXSIpOwogICAgICAgIGUuaW5pdENhdXNl\nKGNhdXNlKTsKICAgICAgICByZXR1cm4gZTsKICAgIH0KfQo=\n","encoding":"base64"}

