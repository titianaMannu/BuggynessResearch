{"sha":"db073f1ae73f18dd6c4b120a571c50d920ee1fe6","node_id":"MDQ6QmxvYjIwNjM2NDpkYjA3M2YxYWU3M2YxOGRkNmM0YjEyMGE1NzFjNTBkOTIwZWUxZmU2","size":4886,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/db073f1ae73f18dd6c4b120a571c50d920ee1fe6","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWw7CgppbXBvcnQg\namF2YS51dGlsLkNvbGxlY3Rpb247CmltcG9ydCBqYXZhLnV0aWwuQ29sbGVj\ndGlvbnM7CmltcG9ydCBqYXZhLnV0aWwuSXRlcmF0b3I7CmltcG9ydCBqYXZh\nLnV0aWwuTGlua2VkTGlzdDsKaW1wb3J0IGphdmEudXRpbC5MaXN0OwoKLyoq\nCiAqIEJhc2UgZXZlbnQgbWFuYWdlciB0aGF0IGhhbmRsZXMgYWRkaW5nL3Jl\nbW92aW5nIGxpc3RlbmVycwogKiBhbmQgZmlyaW5nIGV2ZW50cy4gVGhpcyBj\nbGFzcyBpcyByZWVudHJhbnQtc2FmZTsgbGlzdGVuZXJzIGNhbiBiZSBhZGRl\nZAogKiBhbmQgcmVtb3ZlZCBieSBvdGhlciBsaXN0ZW5lcnMgd2hlbiB0aGV5\nIHJlY2VpdmUgZXZlbnRzLiBUaGUgY2hhbmdlcyB3aWxsCiAqIG5vdCBiZSB2\naXNpYmxlIHVudGlsIHRoZSBldmVudCBmaXJlIHRoYXQgaW5pdGlhdGVkIHRo\nZSByZWN1cnNpdmUgc2VxdWVuY2UKICogb2YgY2FsbHMgY29tcGxldGVzLCBo\nb3dldmVyLgogKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKi8KcHVibGljIGFi\nc3RyYWN0IGNsYXNzIEFic3RyYWN0RXZlbnRNYW5hZ2VyIGltcGxlbWVudHMg\nRXZlbnRNYW5hZ2VyIHsKCiAgICBwcml2YXRlIHN0YXRpYyBFeGNlcHRpb25b\nXSBFTVBUWV9FWENFUFRJT05TID0gbmV3IEV4Y2VwdGlvblswXTsKCiAgICBw\ncml2YXRlIGJvb2xlYW4gX2ZpcmluZyA9IGZhbHNlOwogICAgcHJpdmF0ZSBD\nb2xsZWN0aW9uIF9saXN0ZW5lcnMgPSBudWxsOwogICAgcHJpdmF0ZSBDb2xs\nZWN0aW9uIF9uZXdMaXN0ZW5lcnMgPSBudWxsOwoKICAgIC8qKgogICAgICog\nUmVnaXN0ZXIgYW4gZXZlbnQgbGlzdGVuZXIuCiAgICAgKi8KICAgIHB1Ymxp\nYyBzeW5jaHJvbml6ZWQgdm9pZCBhZGRMaXN0ZW5lcihPYmplY3QgbGlzdGVu\nZXIpIHsKICAgICAgICBpZiAobGlzdGVuZXIgPT0gbnVsbCkKICAgICAgICAg\nICAgcmV0dXJuOwogICAgICAgIGlmIChfZmlyaW5nKSB7CiAgICAgICAgICAg\nIGlmIChfbmV3TGlzdGVuZXJzID09IG51bGwpIHsKICAgICAgICAgICAgICAg\nIF9uZXdMaXN0ZW5lcnMgPSBuZXdMaXN0ZW5lckNvbGxlY3Rpb24oKTsKICAg\nICAgICAgICAgICAgIF9uZXdMaXN0ZW5lcnMuYWRkQWxsKF9saXN0ZW5lcnMp\nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIF9uZXdMaXN0ZW5lcnMuYWRk\nKGxpc3RlbmVyKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAo\nX2xpc3RlbmVycyA9PSBudWxsKQogICAgICAgICAgICAgICAgX2xpc3RlbmVy\ncyA9IG5ld0xpc3RlbmVyQ29sbGVjdGlvbigpOwogICAgICAgICAgICBfbGlz\ndGVuZXJzLmFkZChsaXN0ZW5lcik7CiAgICAgICAgfQogICAgfQoKICAgIC8q\nKgogICAgICogUmVtb3ZlIGFuIGV2ZW50IGxpc3RlbmVyLgogICAgICovCiAg\nICBwdWJsaWMgc3luY2hyb25pemVkIGJvb2xlYW4gcmVtb3ZlTGlzdGVuZXIo\nT2JqZWN0IGxpc3RlbmVyKSB7CiAgICAgICAgaWYgKGxpc3RlbmVyID09IG51\nbGwpCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICBpZiAoX2Zp\ncmluZyAmJiBfbGlzdGVuZXJzLmNvbnRhaW5zKGxpc3RlbmVyKSkgewogICAg\nICAgICAgICBpZiAoX25ld0xpc3RlbmVycyA9PSBudWxsKSB7CiAgICAgICAg\nICAgICAgICBfbmV3TGlzdGVuZXJzID0gbmV3TGlzdGVuZXJDb2xsZWN0aW9u\nKCk7CiAgICAgICAgICAgICAgICBfbmV3TGlzdGVuZXJzLmFkZEFsbChfbGlz\ndGVuZXJzKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gX25l\nd0xpc3RlbmVycy5yZW1vdmUobGlzdGVuZXIpOwogICAgICAgIH0KICAgICAg\nICByZXR1cm4gX2xpc3RlbmVycyAhPSBudWxsICYmIF9saXN0ZW5lcnMucmVt\nb3ZlKGxpc3RlbmVyKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB3\naGV0aGVyIHRoZSBnaXZlbiBpbnN0YW5jZSBpcyBpbiB0aGUgbGlzdCBvZiBs\naXN0ZW5lcnMuCiAgICAgKi8KICAgIHB1YmxpYyBzeW5jaHJvbml6ZWQgYm9v\nbGVhbiBoYXNMaXN0ZW5lcihPYmplY3QgbGlzdGVuZXIpIHsKICAgICAgICBy\nZXR1cm4gX2xpc3RlbmVycyAhPSBudWxsICYmIF9saXN0ZW5lcnMuY29udGFp\nbnMobGlzdGVuZXIpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRy\ndWUgaWYgdGhlcmUgYXJlIGFueSByZWdpc3RlcmVkIGxpc3RlbmVycy4KICAg\nICAqLwogICAgcHVibGljIHN5bmNocm9uaXplZCBib29sZWFuIGhhc0xpc3Rl\nbmVycygpIHsKICAgICAgICByZXR1cm4gX2xpc3RlbmVycyAhPSBudWxsICYm\nICFfbGlzdGVuZXJzLmlzRW1wdHkoKTsKICAgIH0KCiAgICAvKioKICAgICAq\nIFJldHVybiBhIHJlYWQtb25seSBsaXN0IG9mIGxpc3RlbmVycy4KICAgICAq\nLwogICAgcHVibGljIHN5bmNocm9uaXplZCBDb2xsZWN0aW9uIGdldExpc3Rl\nbmVycygpIHsKICAgICAgICByZXR1cm4gKF9saXN0ZW5lcnMgPT0gbnVsbCkg\nPyBDb2xsZWN0aW9ucy5FTVBUWV9MSVNUCiAgICAgICAgICAgIDogQ29sbGVj\ndGlvbnMudW5tb2RpZmlhYmxlQ29sbGVjdGlvbihfbGlzdGVuZXJzKTsKICAg\nIH0KCiAgICAvKioKICAgICAqIEZpcmUgdGhlIGdpdmVuIGV2ZW50IHRvIGFs\nbCBsaXN0ZW5lcnMuCiAgICAgKi8KICAgIHB1YmxpYyBzeW5jaHJvbml6ZWQg\nRXhjZXB0aW9uW10gZmlyZUV2ZW50KE9iamVjdCBldmVudCkgewogICAgICAg\nIGlmIChfbGlzdGVuZXJzID09IG51bGwgfHwgX2xpc3RlbmVycy5pc0VtcHR5\nKCkpCiAgICAgICAgICAgIHJldHVybiBFTVBUWV9FWENFUFRJT05TOwoKICAg\nICAgICBib29sZWFuIHJlZW50cmFudCA9IF9maXJpbmc7CiAgICAgICAgX2Zp\ncmluZyA9IHRydWU7CiAgICAgICAgTGlzdCBleGNlcHRpb25zID0gbnVsbDsK\nICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9IF9saXN0ZW5lcnMuaXRlcmF0\nb3IoKTsgaXRyLmhhc05leHQoKTspIHsKICAgICAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgICAgIGZpcmVFdmVudChldmVudCwgaXRyLm5leHQoKSk7CiAg\nICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAg\nICAgICBpZiAoZXhjZXB0aW9ucyA9PSBudWxsKQogICAgICAgICAgICAgICAg\nICAgIGV4Y2VwdGlvbnMgPSBuZXcgTGlua2VkTGlzdCgpOwogICAgICAgICAg\nICAgICAgZXhjZXB0aW9ucy5hZGQoZSk7CiAgICAgICAgICAgIH0KICAgICAg\nICB9CgogICAgICAgIC8vIGlmIHRoaXMgd2Fzbid0IGEgcmVlbnRyYW50IGNh\nbGwsIHJlY29yZCB0aGF0IHdlJ3JlIG5vIGxvbmdlcgogICAgICAgIC8vIGlu\nIHRoZSBwcm9jZXNzIG9mIGZpcmluZyBldmVudHMgYW5kIHJlcGxhY2Ugb3Vy\nIGluaXRpYWwgbGlzdGVuZXIKICAgICAgICAvLyBsaXN0IHdpdGggdGhlIHNl\ndCBvZiBuZXcgbGlzdGVuZXJzCiAgICAgICAgaWYgKCFyZWVudHJhbnQpIHsK\nICAgICAgICAgICAgX2ZpcmluZyA9IGZhbHNlOwogICAgICAgICAgICBpZiAo\nX25ld0xpc3RlbmVycyAhPSBudWxsKQogICAgICAgICAgICAgICAgX2xpc3Rl\nbmVycyA9IF9uZXdMaXN0ZW5lcnM7CiAgICAgICAgICAgIF9uZXdMaXN0ZW5l\ncnMgPSBudWxsOwogICAgICAgIH0KCiAgICAgICAgaWYgKGV4Y2VwdGlvbnMg\nPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIEVNUFRZX0VYQ0VQVElPTlM7\nCiAgICAgICAgcmV0dXJuIChFeGNlcHRpb25bXSkgZXhjZXB0aW9ucy50b0Fy\ncmF5CiAgICAgICAgICAgIChuZXcgRXhjZXB0aW9uW2V4Y2VwdGlvbnMuc2l6\nZSgpXSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBJbXBsZW1lbnQgdGhpcyBt\nZXRob2QgdG8gZmlyZSB0aGUgZ2l2ZW4gZXZlbnQgdG8gdGhlIGdpdmVuIGxp\nc3RlbmVyLgogICAgICovCiAgICBwcm90ZWN0ZWQgYWJzdHJhY3Qgdm9pZCBm\naXJlRXZlbnQoT2JqZWN0IGV2ZW50LCBPYmplY3QgbGlzdGVuZXIpCiAgICAg\nICAgdGhyb3dzIEV4Y2VwdGlvbjsKCiAgICAvKioKICAgICAqIFJldHVybiBh\nIG5ldyBjb250YWluZXIgZm9yIGxpc3RlbmVycy4gVXNlcyBhIGxpbmtlZCBs\naXN0IGJ5IGRlZmF1bHQuCiAgICAgKi8KICAgIHByb3RlY3RlZCBDb2xsZWN0\naW9uIG5ld0xpc3RlbmVyQ29sbGVjdGlvbigpIHsKICAgICAgICByZXR1cm4g\nbmV3IExpbmtlZExpc3QoKTsKICAgIH0KfQo=\n","encoding":"base64"}

