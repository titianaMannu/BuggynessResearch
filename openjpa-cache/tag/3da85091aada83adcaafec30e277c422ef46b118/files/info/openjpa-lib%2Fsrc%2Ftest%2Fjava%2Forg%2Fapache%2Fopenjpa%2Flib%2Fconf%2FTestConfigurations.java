{"sha":"3c53293e243185ba87bae1d63957ad3c9435b1ce","node_id":"MDQ6QmxvYjIwNjM2NDozYzUzMjkzZTI0MzE4NWJhODdiYWUxZDYzOTU3YWQzYzk0MzViMWNl","size":6080,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/3c53293e243185ba87bae1d63957ad3c9435b1ce","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmNvbmY7CgppbXBvcnQg\namF2YS51dGlsLkhhc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuTWFwOwoKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudGVzdC5BYnN0cmFjdFRlc3RD\nYXNlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLk9wdGlv\nbnM7CgovKioKICogVGVzdHMgdGhlIHtAbGluayBDb25maWd1cmF0aW9uc30g\nY2xhc3MuCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqLwpwdWJsaWMgY2xh\nc3MgVGVzdENvbmZpZ3VyYXRpb25zIGV4dGVuZHMgQWJzdHJhY3RUZXN0Q2Fz\nZSB7CgogICAgcHVibGljIFRlc3RDb25maWd1cmF0aW9ucyhTdHJpbmcgdGVz\ndCkgewogICAgICAgIHN1cGVyKHRlc3QpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHRlc3RQYXJzZVBsdWdpbigpIHsKICAgICAgICBTdHJpbmcgc3RyID0g\nbnVsbDsKICAgICAgICBhc3NlcnROdWxsKENvbmZpZ3VyYXRpb25zLmdldENs\nYXNzTmFtZShzdHIpKTsKICAgICAgICBhc3NlcnROdWxsKENvbmZpZ3VyYXRp\nb25zLmdldFByb3BlcnRpZXMoc3RyKSk7CiAgICAgICAgc3RyID0gImZvbyI7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKCJmb28iLCBDb25maWd1cmF0aW9ucy5n\nZXRDbGFzc05hbWUoc3RyKSk7CiAgICAgICAgYXNzZXJ0TnVsbChDb25maWd1\ncmF0aW9ucy5nZXRQcm9wZXJ0aWVzKHN0cikpOwogICAgICAgIHN0ciA9ICJh\nPWIiOwogICAgICAgIGFzc2VydE51bGwoQ29uZmlndXJhdGlvbnMuZ2V0Q2xh\nc3NOYW1lKHN0cikpOwogICAgICAgIGFzc2VydEVxdWFscygiYT1iIiwgQ29u\nZmlndXJhdGlvbnMuZ2V0UHJvcGVydGllcyhzdHIpKTsKICAgICAgICBzdHIg\nPSAiYT1iLCBjPWQiOwogICAgICAgIGFzc2VydE51bGwoQ29uZmlndXJhdGlv\nbnMuZ2V0Q2xhc3NOYW1lKHN0cikpOwogICAgICAgIGFzc2VydEVxdWFscygi\nYT1iLCBjPWQiLCBDb25maWd1cmF0aW9ucy5nZXRQcm9wZXJ0aWVzKHN0cikp\nOwogICAgICAgIHN0ciA9ICJmb28oYT1iLCBjPWQpIjsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoImZvbyIsIENvbmZpZ3VyYXRpb25zLmdldENsYXNzTmFtZShz\ndHIpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoImE9YiwgYz1kIiwgQ29uZmln\ndXJhdGlvbnMuZ2V0UHJvcGVydGllcyhzdHIpKTsKICAgICAgICBzdHIgPSAi\nIGZvbyggYT1cImIsYyBkXCIsIGM9XCJkXCIgKSAiOwogICAgICAgIGFzc2Vy\ndEVxdWFscygiZm9vIiwgQ29uZmlndXJhdGlvbnMuZ2V0Q2xhc3NOYW1lKHN0\ncikpOwogICAgICAgIGFzc2VydEVxdWFscygiYT1cImIsYyBkXCIsIGM9XCJk\nXCIiLCBDb25maWd1cmF0aW9ucy5nZXRQcm9wZXJ0aWVzKHN0cikpOwogICAg\nICAgIHN0ciA9ICIgZm9vKCBhPSdiLGMgZCcsIGM9J2QnICkgIjsKICAgICAg\nICBhc3NlcnRFcXVhbHMoImZvbyIsIENvbmZpZ3VyYXRpb25zLmdldENsYXNz\nTmFtZShzdHIpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoImE9J2IsYyBkJywg\nYz0nZCciLCBDb25maWd1cmF0aW9ucy5nZXRQcm9wZXJ0aWVzKHN0cikpOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RQYXJzZVByb3BlcnRpZXMoKSB7\nCiAgICAgICAgT3B0aW9ucyBvcHRzID0gQ29uZmlndXJhdGlvbnMucGFyc2VQ\ncm9wZXJ0aWVzKG51bGwpOwogICAgICAgIGFzc2VydEVxdWFscygwLCBvcHRz\nLnNpemUoKSk7CgogICAgICAgIG9wdHMgPSBDb25maWd1cmF0aW9ucy5wYXJz\nZVByb3BlcnRpZXMoIiBmb289YmFyLCBiaXo9YmF6ICIpOwogICAgICAgIGFz\nc2VydEVxdWFscygyLCBvcHRzLnNpemUoKSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKCJiYXIiLCBvcHRzLmdldFByb3BlcnR5KCJmb28iKSk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKCJiYXoiLCBvcHRzLmdldFByb3BlcnR5KCJiaXoiKSk7\nCgogICAgICAgIG9wdHMgPSBDb25maWd1cmF0aW9ucy5wYXJzZVByb3BlcnRp\nZXMoImZvbz1iYXIsYml6PVwiYmF6LD0sYmF6XCIseD15Iik7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKDMsIG9wdHMuc2l6ZSgpKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoImJhciIsIG9wdHMuZ2V0UHJvcGVydHkoImZvbyIpKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoImJheiw9LGJheiIsIG9wdHMuZ2V0UHJvcGVydHko\nImJpeiIpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoInkiLCBvcHRzLmdldFBy\nb3BlcnR5KCJ4IikpOwoKICAgICAgICBvcHRzID0gQ29uZmlndXJhdGlvbnMu\ncGFyc2VQcm9wZXJ0aWVzCiAgICAgICAgICAgICgiZm9vPVwiYmFyIGJhciwx\nMFwiLGJpej1cImJheiBiYXpcIiIpOwogICAgICAgIGFzc2VydEVxdWFscygy\nLCBvcHRzLnNpemUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJiYXIgYmFy\nLDEwIiwgb3B0cy5nZXRQcm9wZXJ0eSgiZm9vIikpOwogICAgICAgIGFzc2Vy\ndEVxdWFscygiYmF6IGJheiIsIG9wdHMuZ2V0UHJvcGVydHkoImJpeiIpKTsK\nICAgICAgICBvcHRzID0gQ29uZmlndXJhdGlvbnMucGFyc2VQcm9wZXJ0aWVz\nCiAgICAgICAgICAgICgiZm9vPSdiYXIgYmFyLDEwJyxiaXo9J2JheiBiYXon\nIik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDIsIG9wdHMuc2l6ZSgpKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoImJhciBiYXIsMTAiLCBvcHRzLmdldFByb3Bl\ncnR5KCJmb28iKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJiYXogYmF6Iiwg\nb3B0cy5nZXRQcm9wZXJ0eSgiYml6IikpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHRlc3RDb21iaW5lUGx1Z2lucygpIHsKICAgICAgICBhc3NlcnRQbHVn\naW5zQ29tYmluZWQoImpwYSIsIG51bGwsIAogICAgICAgICAgICBudWxsLCBu\ndWxsLAogICAgICAgICAgICAianBhIiwgbnVsbCk7CiAgICAgICAgYXNzZXJ0\nUGx1Z2luc0NvbWJpbmVkKCJqcGEiLCBudWxsLAogICAgICAgICAgICAianBh\nIiwgbnVsbCwKICAgICAgICAgICAgImpwYSIsIG51bGwpOwogICAgICAgIGFz\nc2VydFBsdWdpbnNDb21iaW5lZCgiamRvIiwgbnVsbCwKICAgICAgICAgICAg\nImpwYSIsIG51bGwsCiAgICAgICAgICAgICJqcGEiLCBudWxsKTsKICAgICAg\nICBhc3NlcnRQbHVnaW5zQ29tYmluZWQoImpkbyIsIG5ldyBTdHJpbmdbXSB7\nICJmb28iLCAiYmFyIiB9LAogICAgICAgICAgICAianBhIiwgbnVsbCwKICAg\nICAgICAgICAgImpwYSIsIG51bGwpOwogICAgICAgIGFzc2VydFBsdWdpbnND\nb21iaW5lZCgiamRvIiwgbmV3IFN0cmluZ1tdIHsgImZvbyIsICJiYXIiIH0s\nCiAgICAgICAgICAgICJqcGEiLCBuZXcgU3RyaW5nW10geyAiYml6IiwgImJh\neiIgfSwKICAgICAgICAgICAgImpwYSIsIG5ldyBTdHJpbmdbXSB7ICJiaXoi\nLCAiYmF6IiB9KTsgCiAgICAgICAgYXNzZXJ0UGx1Z2luc0NvbWJpbmVkKCJq\nZG8iLCBuZXcgU3RyaW5nW10geyAiZm9vIiwgImJhciIgfSwKICAgICAgICAg\nICAgbnVsbCwgbmV3IFN0cmluZ1tdIHsgImJpeiIsICJiYXoiIH0sCiAgICAg\nICAgICAgICJqZG8iLCBuZXcgU3RyaW5nW10geyAiZm9vIiwgImJhciIsICJi\naXoiLCAiYmF6IiB9KTsgCiAgICAgICAgYXNzZXJ0UGx1Z2luc0NvbWJpbmVk\nKG51bGwsIG5ldyBTdHJpbmdbXSB7ICJmb28iLCAiYmFyIiB9LAogICAgICAg\nICAgICBudWxsLCBuZXcgU3RyaW5nW10geyAiYml6IiwgImJheiIgfSwKICAg\nICAgICAgICAgbnVsbCwgbmV3IFN0cmluZ1tdIHsgImZvbyIsICJiYXIiLCAi\nYml6IiwgImJheiIgfSk7IAogICAgICAgIGFzc2VydFBsdWdpbnNDb21iaW5l\nZChudWxsLCBuZXcgU3RyaW5nW10geyAiZm9vIiwgImJhciIgfSwKICAgICAg\nICAgICAgImpwYSIsIG5ldyBTdHJpbmdbXSB7ICJiaXoiLCAiYmF6IiB9LAog\nICAgICAgICAgICAianBhIiwgbmV3IFN0cmluZ1tdIHsgImZvbyIsICJiYXIi\nLCAiYml6IiwgImJheiIgfSk7IAogICAgICAgIGFzc2VydFBsdWdpbnNDb21i\naW5lZCgianBhIiwgbmV3IFN0cmluZ1tdIHsgImZvbyIsICJiYXIiIH0sCiAg\nICAgICAgICAgICJqcGEiLCBuZXcgU3RyaW5nW10geyAiYml6IiwgImJheiIg\nfSwKICAgICAgICAgICAgImpwYSIsIG5ldyBTdHJpbmdbXSB7ICJmb28iLCAi\nYmFyIiwgImJpeiIsICJiYXoiIH0pOyAKICAgICAgICBhc3NlcnRQbHVnaW5z\nQ29tYmluZWQoImpwYSIsIG5ldyBTdHJpbmdbXSB7ICJmb28iLCAiYmFyIiB9\nLAogICAgICAgICAgICAianBhIiwgbmV3IFN0cmluZ1tdIHsgImZvbyIsICJi\nYXoiIH0sCiAgICAgICAgICAgICJqcGEiLCBuZXcgU3RyaW5nW10geyAiZm9v\nIiwgImJheiIgfSk7IAogICAgfQoKICAgIHByaXZhdGUgdm9pZCBhc3NlcnRQ\nbHVnaW5zQ29tYmluZWQoU3RyaW5nIGNsczEsIFN0cmluZ1tdIHByb3BzMSwK\nICAgICAgICBTdHJpbmcgY2xzMiwgU3RyaW5nW10gcHJvcHMyLCBTdHJpbmcg\nZXhwQ2xzLCBTdHJpbmdbXSBleHBQcm9wcykgewogICAgICAgIFN0cmluZyBw\nbHVnaW4xID0gQ29uZmlndXJhdGlvbnMuZ2V0UGx1Z2luKGNsczEsIAogICAg\nICAgICAgICBDb25maWd1cmF0aW9ucy5zZXJpYWxpemVQcm9wZXJ0aWVzKHRv\nUHJvcGVydGllcyhwcm9wczEpKSk7CiAgICAgICAgU3RyaW5nIHBsdWdpbjIg\nPSBDb25maWd1cmF0aW9ucy5nZXRQbHVnaW4oY2xzMiwgCiAgICAgICAgICAg\nIENvbmZpZ3VyYXRpb25zLnNlcmlhbGl6ZVByb3BlcnRpZXModG9Qcm9wZXJ0\naWVzKHByb3BzMikpKTsKCiAgICAgICAgU3RyaW5nIHJlcyA9IENvbmZpZ3Vy\nYXRpb25zLmNvbWJpbmVQbHVnaW5zKHBsdWdpbjEsIHBsdWdpbjIpOwogICAg\nICAgIFN0cmluZyByZXNDbHMgPSBDb25maWd1cmF0aW9ucy5nZXRDbGFzc05h\nbWUocmVzKTsKICAgICAgICBNYXAgcmVzUHJvcHMgPSBDb25maWd1cmF0aW9u\ncy5wYXJzZVByb3BlcnRpZXMoQ29uZmlndXJhdGlvbnMuCiAgICAgICAgICAg\nIGdldFByb3BlcnRpZXMocmVzKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGV4\ncENscywgcmVzQ2xzKTsKICAgICAgICBhc3NlcnRFcXVhbHModG9Qcm9wZXJ0\naWVzKGV4cFByb3BzKSwgcmVzUHJvcHMpOwogICAgfQoKICAgIHByaXZhdGUg\nc3RhdGljIE1hcCB0b1Byb3BlcnRpZXMoU3RyaW5nW10gcHJvcHMpIHsKICAg\nICAgICBNYXAgbWFwID0gbmV3IEhhc2hNYXAoKTsKICAgICAgICBpZiAocHJv\ncHMgIT0gbnVsbCkKICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBw\ncm9wcy5sZW5ndGg7IGkrKykKICAgICAgICAgICAgICAgIG1hcC5wdXQocHJv\ncHNbaV0sIHByb3BzWysraV0pOwogICAgICAgIHJldHVybiBtYXA7CiAgICB9\nCgogICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykg\newogICAgICAgIG1haW4oVGVzdENvbmZpZ3VyYXRpb25zLmNsYXNzKTsKICAg\nIH0KfQo=\n","encoding":"base64"}

