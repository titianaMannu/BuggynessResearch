{"sha":"252fd24d7c7025e197013335b4a0a9a2fda4ee2a","node_id":"MDQ6QmxvYjIwNjM2NDoyNTJmZDI0ZDdjNzAyNWUxOTcwMTMzMzViNGEwYTlhMmZkYTRlZTJh","size":35126,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/252fd24d7c7025e197013335b4a0a9a2fda4ee2a","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2U7DQoNCmltcG9ydCBqYXZhLmxhbmcucmVmbGVjdC5BcnJh\neTsNCmltcG9ydCBqYXZhLnV0aWwuQXJyYXlzOw0KaW1wb3J0IGphdmEudXRp\nbC5Db2xsZWN0aW9uOw0KaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0\neU1hbmFnZXI7DQppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5VHJh\nbnNhY3Rpb247DQppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRmx1c2hNb2Rl\nVHlwZTsNCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5Mb2NrTW9kZVR5cGU7\nDQppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuUXVlcnk7DQppbXBvcnQgamF2\nYXgucmVzb3VyY2UuUmVzb3VyY2VFeGNlcHRpb247DQppbXBvcnQgamF2YXgu\ncmVzb3VyY2UuY2NpLkNvbm5lY3Rpb25NZXRhRGF0YTsNCmltcG9ydCBqYXZh\neC5yZXNvdXJjZS5jY2kuSW50ZXJhY3Rpb247DQppbXBvcnQgamF2YXgucmVz\nb3VyY2UuY2NpLkxvY2FsVHJhbnNhY3Rpb247DQppbXBvcnQgamF2YXgucmVz\nb3VyY2UuY2NpLlJlc3VsdFNldEluZm87DQoNCmltcG9ydCBvcmcuYXBhY2hl\nLmNvbW1vbnMubGFuZy5TdHJpbmdVdGlsczsNCmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEuY29uZi5PcGVuSlBBQ29uZmlndXJhdGlvbjsNCmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuZWUuTWFuYWdlZFJ1bnRpbWU7DQppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5Ccm9rZXI7DQppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5EZWxlZ2F0aW5nQnJva2VyOw0KaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuRmluZENhbGxiYWNrczsN\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkxvY2tMZXZlbHM7\nDQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5PcENhbGxiYWNr\nczsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLk9wZW5KUEFT\ndGF0ZU1hbmFnZXI7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5l\nbC5RdWVyeUZsdXNoTW9kZXM7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmtlcm5lbC5RdWVyeUxhbmd1YWdlczsNCmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEua2VybmVsLlNlcTsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\na2VybmVsLmpwcWwuSlBRTFBhcnNlcjsNCmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOw0KaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5tZXRhLkNsYXNzTWV0YURhdGE7DQppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLm1ldGEuRmllbGRNZXRhRGF0YTsNCmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEubWV0YS5RdWVyeU1ldGFEYXRhOw0KaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5tZXRhLlNlcXVlbmNlTWV0YURhdGE7DQppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuRXhjZXB0aW9uczsNCmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEudXRpbC5JbXBsSGVscGVyOw0KaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS51dGlsLlJ1bnRpbWVFeGNlcHRpb25UcmFuc2xh\ndG9yOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLlVzZXJFeGNl\ncHRpb247DQoNCi8qKg0KICogSW1wbGVtZW50YXRpb24gb2Yge0BsaW5rIEVu\ndGl0eU1hbmFnZXJ9IGludGVyZmFjZS4NCiAqDQogKiBAYXV0aG9yIFBhdHJp\nY2sgTGluc2tleQ0KICogQGF1dGhvciBBYmUgV2hpdGUNCiAqIEBub2phdmFk\nb2MNCiAqLw0KcHVibGljIGNsYXNzIEVudGl0eU1hbmFnZXJJbXBsDQogICAg\naW1wbGVtZW50cyBPcGVuSlBBRW50aXR5TWFuYWdlciwgRmluZENhbGxiYWNr\ncywgT3BDYWxsYmFja3Mgew0KDQogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwg\nTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6ZXIuZm9yUGFja2FnZQ0KICAgICAg\nICAoRW50aXR5TWFuYWdlckltcGwuY2xhc3MpOw0KDQogICAgcHJpdmF0ZSBm\naW5hbCBEZWxlZ2F0aW5nQnJva2VyIF9icm9rZXI7DQogICAgcHJpdmF0ZSBm\naW5hbCBFbnRpdHlNYW5hZ2VyRmFjdG9yeUltcGwgX2VtZjsNCiAgICBwcml2\nYXRlIEZldGNoUGxhbiBfZmV0Y2ggPSBudWxsOw0KDQogICAgLyoqDQogICAg\nICogQ29uc3RydWN0b3I7IHN1cHBseSBmYWN0b3J5IGFuZCBkZWxlZ2F0ZS4N\nCiAgICAgKi8NCiAgICBwdWJsaWMgRW50aXR5TWFuYWdlckltcGwoRW50aXR5\nTWFuYWdlckZhY3RvcnlJbXBsIGZhY3RvcnksDQogICAgICAgIEJyb2tlciBi\ncm9rZXIpIHsNCiAgICAgICAgX2VtZiA9IGZhY3Rvcnk7DQogICAgICAgIFJ1\nbnRpbWVFeGNlcHRpb25UcmFuc2xhdG9yIHRyYW5zbGF0b3IgPQ0KICAgICAg\nICAgICAgUGVyc2lzdGVuY2VFeGNlcHRpb25zLmdldFJvbGxiYWNrVHJhbnNs\nYXRvcih0aGlzKTsNCiAgICAgICAgX2Jyb2tlciA9IG5ldyBEZWxlZ2F0aW5n\nQnJva2VyKGJyb2tlciwgdHJhbnNsYXRvcik7DQogICAgICAgIF9icm9rZXIu\nc2V0SW1wbGljaXRCZWhhdmlvcih0aGlzLCB0cmFuc2xhdG9yKTsNCiAgICB9\nDQoNCiAgICAvKioNCiAgICAgKiBCcm9rZXIgZGVsZWdhdGUuDQogICAgICov\nDQogICAgcHVibGljIEJyb2tlciBnZXRCcm9rZXIoKSB7DQogICAgICAgIHJl\ndHVybiBfYnJva2VyLmdldERlbGVnYXRlKCk7DQogICAgfQ0KDQogICAgcHVi\nbGljIENvbm5lY3Rpb25NZXRhRGF0YSBnZXRNZXRhRGF0YSgpDQogICAgICAg\nIHRocm93cyBSZXNvdXJjZUV4Y2VwdGlvbiB7DQogICAgICAgIHJldHVybiBf\nYnJva2VyLmdldE1ldGFEYXRhKCk7DQogICAgfQ0KDQogICAgcHVibGljIElu\ndGVyYWN0aW9uIGNyZWF0ZUludGVyYWN0aW9uKCkNCiAgICAgICAgdGhyb3dz\nIFJlc291cmNlRXhjZXB0aW9uIHsNCiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJ\nbnZva2VkKCk7DQogICAgICAgIHJldHVybiBfYnJva2VyLmNyZWF0ZUludGVy\nYWN0aW9uKCk7DQogICAgfQ0KDQogICAgcHVibGljIExvY2FsVHJhbnNhY3Rp\nb24gZ2V0TG9jYWxUcmFuc2FjdGlvbigpDQogICAgICAgIHRocm93cyBSZXNv\ndXJjZUV4Y2VwdGlvbiB7DQogICAgICAgIHJldHVybiB0aGlzOw0KICAgIH0N\nCg0KICAgIHB1YmxpYyBSZXN1bHRTZXRJbmZvIGdldFJlc3VsdFNldEluZm8o\nKQ0KICAgICAgICB0aHJvd3MgUmVzb3VyY2VFeGNlcHRpb24gew0KICAgICAg\nICByZXR1cm4gX2Jyb2tlci5nZXRSZXN1bHRTZXRJbmZvKCk7DQogICAgfQ0K\nDQogICAgcHVibGljIE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeSBnZXRF\nbnRpdHlNYW5hZ2VyRmFjdG9yeSgpIHsNCiAgICAgICAgcmV0dXJuIF9lbWY7\nDQogICAgfQ0KDQogICAgcHVibGljIE9wZW5KUEFDb25maWd1cmF0aW9uIGdl\ndENvbmZpZ3VyYXRpb24oKSB7DQogICAgICAgIHJldHVybiBfYnJva2VyLmdl\ndENvbmZpZ3VyYXRpb24oKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgRmV0Y2hQ\nbGFuIGdldEZldGNoUGxhbigpIHsNCiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJ\nbnZva2VkKCk7DQogICAgICAgIF9icm9rZXIubG9jaygpOw0KICAgICAgICB0\ncnkgew0KICAgICAgICAgICAgaWYgKF9mZXRjaCA9PSBudWxsKQ0KICAgICAg\nICAgICAgICAgIF9mZXRjaCA9IF9lbWYudG9GZXRjaFBsYW4oX2Jyb2tlciwN\nCiAgICAgICAgICAgICAgICAgICAgX2Jyb2tlci5nZXRGZXRjaENvbmZpZ3Vy\nYXRpb24oKSk7DQogICAgICAgICAgICByZXR1cm4gX2ZldGNoOw0KICAgICAg\nICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgX2Jyb2tlci51bmxvY2soKTsN\nCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHB1YmxpYyBpbnQgZ2V0Q29ubmVj\ndGlvblJldGFpbk1vZGUoKSB7DQogICAgICAgIHJldHVybiBfYnJva2VyLmdl\ndENvbm5lY3Rpb25SZXRhaW5Nb2RlKCk7DQogICAgfQ0KDQogICAgcHVibGlj\nIGJvb2xlYW4gaXNNYW5hZ2VkKCkgew0KICAgICAgICByZXR1cm4gX2Jyb2tl\nci5pc01hbmFnZWQoKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgTWFuYWdlZFJ1\nbnRpbWUgZ2V0TWFuYWdlZFJ1bnRpbWUoKSB7DQogICAgICAgIHJldHVybiBf\nYnJva2VyLmdldE1hbmFnZWRSdW50aW1lKCk7DQogICAgfQ0KDQogICAgcHVi\nbGljIGJvb2xlYW4gZ2V0U3luY1dpdGhNYW5hZ2VkVHJhbnNhY3Rpb25zKCkg\new0KICAgICAgICByZXR1cm4gX2Jyb2tlci5nZXRTeW5jV2l0aE1hbmFnZWRU\ncmFuc2FjdGlvbnMoKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCBzZXRT\neW5jV2l0aE1hbmFnZWRUcmFuc2FjdGlvbnMoYm9vbGVhbiBzeW5jKSB7DQog\nICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOw0KICAgICAgICBfYnJv\na2VyLnNldFN5bmNXaXRoTWFuYWdlZFRyYW5zYWN0aW9ucyhzeW5jKTsNCiAg\nICB9DQoNCiAgICBwdWJsaWMgQ2xhc3NMb2FkZXIgZ2V0Q2xhc3NMb2FkZXIo\nKSB7DQogICAgICAgIHJldHVybiBfYnJva2VyLmdldENsYXNzTG9hZGVyKCk7\nDQogICAgfQ0KDQogICAgcHVibGljIFN0cmluZyBnZXRDb25uZWN0aW9uVXNl\nck5hbWUoKSB7DQogICAgICAgIHJldHVybiBfYnJva2VyLmdldENvbm5lY3Rp\nb25Vc2VyTmFtZSgpOw0KICAgIH0NCg0KICAgIHB1YmxpYyBTdHJpbmcgZ2V0\nQ29ubmVjdGlvblBhc3N3b3JkKCkgew0KICAgICAgICByZXR1cm4gX2Jyb2tl\nci5nZXRDb25uZWN0aW9uUGFzc3dvcmQoKTsNCiAgICB9DQoNCiAgICBwdWJs\naWMgYm9vbGVhbiBnZXRNdWx0aXRocmVhZGVkKCkgew0KICAgICAgICByZXR1\ncm4gX2Jyb2tlci5nZXRNdWx0aXRocmVhZGVkKCk7DQogICAgfQ0KDQogICAg\ncHVibGljIHZvaWQgc2V0TXVsdGl0aHJlYWRlZChib29sZWFuIG11bHRpdGhy\nZWFkZWQpIHsNCiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7DQog\nICAgICAgIF9icm9rZXIuc2V0TXVsdGl0aHJlYWRlZChtdWx0aXRocmVhZGVk\nKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgYm9vbGVhbiBnZXRJZ25vcmVDaGFu\nZ2VzKCkgew0KICAgICAgICByZXR1cm4gX2Jyb2tlci5nZXRJZ25vcmVDaGFu\nZ2VzKCk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgc2V0SWdub3JlQ2hh\nbmdlcyhib29sZWFuIHZhbCkgew0KICAgICAgICBhc3NlcnROb3RDbG9zZUlu\ndm9rZWQoKTsNCiAgICAgICAgX2Jyb2tlci5zZXRJZ25vcmVDaGFuZ2VzKHZh\nbCk7DQogICAgfQ0KDQogICAgcHVibGljIGJvb2xlYW4gZ2V0Tm9udHJhbnNh\nY3Rpb25hbFJlYWQoKSB7DQogICAgICAgIHJldHVybiBfYnJva2VyLmdldE5v\nbnRyYW5zYWN0aW9uYWxSZWFkKCk7DQogICAgfQ0KDQogICAgcHVibGljIHZv\naWQgc2V0Tm9udHJhbnNhY3Rpb25hbFJlYWQoYm9vbGVhbiB2YWwpIHsNCiAg\nICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7DQogICAgICAgIF9icm9r\nZXIuc2V0Tm9udHJhbnNhY3Rpb25hbFJlYWQodmFsKTsNCiAgICB9DQoNCiAg\nICBwdWJsaWMgYm9vbGVhbiBnZXROb250cmFuc2FjdGlvbmFsV3JpdGUoKSB7\nDQogICAgICAgIHJldHVybiBfYnJva2VyLmdldE5vbnRyYW5zYWN0aW9uYWxX\ncml0ZSgpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHNldE5vbnRyYW5z\nYWN0aW9uYWxXcml0ZShib29sZWFuIHZhbCkgew0KICAgICAgICBhc3NlcnRO\nb3RDbG9zZUludm9rZWQoKTsNCiAgICAgICAgX2Jyb2tlci5zZXROb250cmFu\nc2FjdGlvbmFsV3JpdGUodmFsKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgYm9v\nbGVhbiBnZXRPcHRpbWlzdGljKCkgew0KICAgICAgICByZXR1cm4gX2Jyb2tl\nci5nZXRPcHRpbWlzdGljKCk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQg\nc2V0T3B0aW1pc3RpYyhib29sZWFuIHZhbCkgew0KICAgICAgICBhc3NlcnRO\nb3RDbG9zZUludm9rZWQoKTsNCiAgICAgICAgX2Jyb2tlci5zZXRPcHRpbWlz\ndGljKHZhbCk7DQogICAgfQ0KDQogICAgcHVibGljIGludCBnZXRSZXN0b3Jl\nU3RhdGUoKSB7DQogICAgICAgIHJldHVybiBfYnJva2VyLmdldFJlc3RvcmVT\ndGF0ZSgpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHNldFJlc3RvcmVT\ndGF0ZShpbnQgdmFsKSB7DQogICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tl\nZCgpOw0KICAgICAgICBfYnJva2VyLnNldFJlc3RvcmVTdGF0ZSh2YWwpOw0K\nICAgIH0NCg0KICAgIHB1YmxpYyBib29sZWFuIGdldFJldGFpblN0YXRlKCkg\new0KICAgICAgICByZXR1cm4gX2Jyb2tlci5nZXRSZXRhaW5TdGF0ZSgpOw0K\nICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHNldFJldGFpblN0YXRlKGJvb2xl\nYW4gdmFsKSB7DQogICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOw0K\nICAgICAgICBfYnJva2VyLnNldFJldGFpblN0YXRlKHZhbCk7DQogICAgfQ0K\nDQogICAgcHVibGljIGludCBnZXRBdXRvQ2xlYXIoKSB7DQogICAgICAgIHJl\ndHVybiBfYnJva2VyLmdldEF1dG9DbGVhcigpOw0KICAgIH0NCg0KICAgIHB1\nYmxpYyB2b2lkIHNldEF1dG9DbGVhcihpbnQgdmFsKSB7DQogICAgICAgIGFz\nc2VydE5vdENsb3NlSW52b2tlZCgpOw0KICAgICAgICBfYnJva2VyLnNldEF1\ndG9DbGVhcih2YWwpOw0KICAgIH0NCg0KICAgIHB1YmxpYyBpbnQgZ2V0RGV0\nYWNoU3RhdGUoKSB7DQogICAgICAgIHJldHVybiBfYnJva2VyLmdldERldGFj\naFN0YXRlKCk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgc2V0RGV0YWNo\nU3RhdGUoaW50IG1vZGUpIHsNCiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZv\na2VkKCk7DQogICAgICAgIF9icm9rZXIuc2V0RGV0YWNoU3RhdGUobW9kZSk7\nDQogICAgfQ0KDQogICAgcHVibGljIGludCBnZXRBdXRvRGV0YWNoKCkgew0K\nICAgICAgICByZXR1cm4gX2Jyb2tlci5nZXRBdXRvRGV0YWNoKCk7DQogICAg\nfQ0KDQogICAgcHVibGljIHZvaWQgc2V0QXV0b0RldGFjaChpbnQgZmxhZ3Mp\nIHsNCiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7DQogICAgICAg\nIF9icm9rZXIuc2V0QXV0b0RldGFjaChmbGFncyk7DQogICAgfQ0KDQogICAg\ncHVibGljIHZvaWQgc2V0QXV0b0RldGFjaChpbnQgZmxhZywgYm9vbGVhbiBv\nbikgew0KICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsNCiAgICAg\nICAgX2Jyb2tlci5zZXRBdXRvRGV0YWNoKGZsYWcsIG9uKTsNCiAgICB9DQoN\nCiAgICBwdWJsaWMgYm9vbGVhbiBnZXRFdmljdEZyb21TdG9yZUNhY2hlKCkg\new0KICAgICAgICByZXR1cm4gX2Jyb2tlci5nZXRFdmljdEZyb21EYXRhQ2Fj\naGUoKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCBzZXRFdmljdEZyb21T\ndG9yZUNhY2hlKGJvb2xlYW4gZXZpY3QpIHsNCiAgICAgICAgYXNzZXJ0Tm90\nQ2xvc2VJbnZva2VkKCk7DQogICAgICAgIF9icm9rZXIuc2V0RXZpY3RGcm9t\nRGF0YUNhY2hlKGV2aWN0KTsNCiAgICB9DQoNCiAgICBwdWJsaWMgYm9vbGVh\nbiBnZXRQb3B1bGF0ZVN0b3JlQ2FjaGUoKSB7DQogICAgICAgIHJldHVybiBf\nYnJva2VyLmdldFBvcHVsYXRlRGF0YUNhY2hlKCk7DQogICAgfQ0KDQogICAg\ncHVibGljIHZvaWQgc2V0UG9wdWxhdGVTdG9yZUNhY2hlKGJvb2xlYW4gY2Fj\naGUpIHsNCiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7DQogICAg\nICAgIF9icm9rZXIuc2V0UG9wdWxhdGVEYXRhQ2FjaGUoY2FjaGUpOw0KICAg\nIH0NCg0KICAgIHB1YmxpYyBib29sZWFuIGlzTGFyZ2VUcmFuc2FjdGlvbigp\nIHsNCiAgICAgICAgcmV0dXJuIF9icm9rZXIuaXNMYXJnZVRyYW5zYWN0aW9u\nKCk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgc2V0TGFyZ2VUcmFuc2Fj\ndGlvbihib29sZWFuIGxhcmdlVHJhbnNhY3Rpb24pIHsNCiAgICAgICAgYXNz\nZXJ0Tm90Q2xvc2VJbnZva2VkKCk7DQogICAgICAgIF9icm9rZXIuc2V0TGFy\nZ2VUcmFuc2FjdGlvbihsYXJnZVRyYW5zYWN0aW9uKTsNCiAgICB9DQoNCiAg\nICBwdWJsaWMgT2JqZWN0IGdldFVzZXJPYmplY3QoT2JqZWN0IGtleSkgew0K\nICAgICAgICByZXR1cm4gX2Jyb2tlci5nZXRVc2VyT2JqZWN0KGtleSk7DQog\nICAgfQ0KDQogICAgcHVibGljIE9iamVjdCBwdXRVc2VyT2JqZWN0KE9iamVj\ndCBrZXksIE9iamVjdCB2YWwpIHsNCiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJ\nbnZva2VkKCk7DQogICAgICAgIHJldHVybiBfYnJva2VyLnB1dFVzZXJPYmpl\nY3Qoa2V5LCB2YWwpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIGFkZFRy\nYW5zYWN0aW9uTGlzdGVuZXIoT2JqZWN0IGxpc3RlbmVyKSB7DQogICAgICAg\nIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOw0KICAgICAgICBfYnJva2VyLmFk\nZFRyYW5zYWN0aW9uTGlzdGVuZXIobGlzdGVuZXIpOw0KICAgIH0NCg0KICAg\nIHB1YmxpYyB2b2lkIHJlbW92ZVRyYW5zYWN0aW9uTGlzdGVuZXIoT2JqZWN0\nIGxpc3RlbmVyKSB7DQogICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgp\nOw0KICAgICAgICBfYnJva2VyLnJlbW92ZVRyYW5zYWN0aW9uTGlzdGVuZXIo\nbGlzdGVuZXIpOw0KICAgIH0NCg0KICAgIHB1YmxpYyBpbnQgZ2V0VHJhbnNh\nY3Rpb25MaXN0ZW5lckNhbGxiYWNrTW9kZSgpIHsNCiAgICAgICAgcmV0dXJu\nIF9icm9rZXIuZ2V0VHJhbnNhY3Rpb25MaXN0ZW5lckNhbGxiYWNrTW9kZSgp\nOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHNldFRyYW5zYWN0aW9uTGlz\ndGVuZXJDYWxsYmFja01vZGUoaW50IG1vZGUpIHsNCiAgICAgICAgYXNzZXJ0\nTm90Q2xvc2VJbnZva2VkKCk7DQogICAgICAgIF9icm9rZXIuc2V0VHJhbnNh\nY3Rpb25MaXN0ZW5lckNhbGxiYWNrTW9kZShtb2RlKTsNCiAgICB9DQoNCiAg\nICBwdWJsaWMgdm9pZCBhZGRMaWZlY3ljbGVMaXN0ZW5lcihPYmplY3QgbGlz\ndGVuZXIsIENsYXNzLi4uIGNsYXNzZXMpIHsNCiAgICAgICAgYXNzZXJ0Tm90\nQ2xvc2VJbnZva2VkKCk7DQogICAgICAgIF9icm9rZXIuYWRkTGlmZWN5Y2xl\nTGlzdGVuZXIobGlzdGVuZXIsIGNsYXNzZXMpOw0KICAgIH0NCg0KICAgIHB1\nYmxpYyB2b2lkIHJlbW92ZUxpZmVjeWNsZUxpc3RlbmVyKE9iamVjdCBsaXN0\nZW5lcikgew0KICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsNCiAg\nICAgICAgX2Jyb2tlci5yZW1vdmVMaWZlY3ljbGVMaXN0ZW5lcihsaXN0ZW5l\ncik7DQogICAgfQ0KDQogICAgcHVibGljIGludCBnZXRMaWZlY3ljbGVMaXN0\nZW5lckNhbGxiYWNrTW9kZSgpIHsNCiAgICAgICAgcmV0dXJuIF9icm9rZXIu\nZ2V0TGlmZWN5Y2xlTGlzdGVuZXJDYWxsYmFja01vZGUoKTsNCiAgICB9DQoN\nCiAgICBwdWJsaWMgdm9pZCBzZXRMaWZlY3ljbGVMaXN0ZW5lckNhbGxiYWNr\nTW9kZShpbnQgbW9kZSkgew0KICAgICAgICBhc3NlcnROb3RDbG9zZUludm9r\nZWQoKTsNCiAgICAgICAgX2Jyb2tlci5zZXRMaWZlY3ljbGVMaXN0ZW5lckNh\nbGxiYWNrTW9kZShtb2RlKTsNCiAgICB9DQoNCiAgICBAU3VwcHJlc3NXYXJu\naW5ncygidW5jaGVja2VkIikNCiAgICBwdWJsaWMgPFQ+IFQgZ2V0UmVmZXJl\nbmNlKENsYXNzPFQ+IGNscywgT2JqZWN0IG9pZCkgew0KICAgICAgICBhc3Nl\ncnROb3RDbG9zZUludm9rZWQoKTsNCiAgICAgICAgb2lkID0gX2Jyb2tlci5u\nZXdPYmplY3RJZChjbHMsIG9pZCk7DQogICAgICAgIHJldHVybiAoVCkgX2Jy\nb2tlci5maW5kKG9pZCwgZmFsc2UsIHRoaXMpOw0KICAgIH0NCg0KICAgIEBT\ndXBwcmVzc1dhcm5pbmdzKCJ1bmNoZWNrZWQiKQ0KICAgIHB1YmxpYyA8VD4g\nVCBmaW5kKENsYXNzPFQ+IGNscywgT2JqZWN0IG9pZCkgew0KICAgICAgICBh\nc3NlcnROb3RDbG9zZUludm9rZWQoKTsNCiAgICAgICAgb2lkID0gX2Jyb2tl\nci5uZXdPYmplY3RJZChjbHMsIG9pZCk7DQogICAgICAgIHJldHVybiAoVCkg\nX2Jyb2tlci5maW5kKG9pZCwgdHJ1ZSwgdGhpcyk7DQogICAgfQ0KDQogICAg\nQFN1cHByZXNzV2FybmluZ3MoInVuY2hlY2tlZCIpDQogICAgcHVibGljIDxU\nPiBUW10gZmluZEFsbChDbGFzczxUPiBjbHMsIE9iamVjdC4uLiBvaWRzKSB7\nDQogICAgICAgIGlmIChvaWRzLmxlbmd0aCA9PSAwKQ0KICAgICAgICAgICAg\ncmV0dXJuIChUW10pIEFycmF5Lm5ld0luc3RhbmNlKGNscywgMCk7DQogICAg\nICAgIENvbGxlY3Rpb248VD4gcmV0ID0gZmluZEFsbChjbHMsIEFycmF5cy5h\nc0xpc3Qob2lkcykpOw0KICAgICAgICByZXR1cm4gcmV0LnRvQXJyYXkoKFRb\nXSkgQXJyYXkubmV3SW5zdGFuY2UoY2xzLCByZXQuc2l6ZSgpKSk7DQogICAg\nfQ0KDQogICAgQFN1cHByZXNzV2FybmluZ3MoInVuY2hlY2tlZCIpDQogICAg\ncHVibGljIDxUPiBDb2xsZWN0aW9uPFQ+IGZpbmRBbGwoZmluYWwgQ2xhc3M8\nVD4gY2xzLCBDb2xsZWN0aW9uIG9pZHMpIHsNCiAgICAgICAgYXNzZXJ0Tm90\nQ2xvc2VJbnZva2VkKCk7DQogICAgICAgIE9iamVjdFtdIG9ianMgPSBfYnJv\na2VyLmZpbmRBbGwob2lkcywgdHJ1ZSwgbmV3IEZpbmRDYWxsYmFja3MoKSB7\nDQogICAgICAgICAgICBwdWJsaWMgT2JqZWN0IHByb2Nlc3NBcmd1bWVudChP\nYmplY3Qgb2lkKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIF9icm9rZXIu\nbmV3T2JqZWN0SWQoY2xzLCBvaWQpOw0KICAgICAgICAgICAgfQ0KDQogICAg\nICAgICAgICBwdWJsaWMgT2JqZWN0IHByb2Nlc3NSZXR1cm4oT2JqZWN0IG9p\nZCwgT3BlbkpQQVN0YXRlTWFuYWdlciBzbSkgew0KICAgICAgICAgICAgICAg\nIHJldHVybiBFbnRpdHlNYW5hZ2VySW1wbC50aGlzLnByb2Nlc3NSZXR1cm4o\nb2lkLCBzbSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgICAg\nICByZXR1cm4gKENvbGxlY3Rpb248VD4pIEFycmF5cy5hc0xpc3Qob2Jqcyk7\nDQogICAgfQ0KDQogICAgQFN1cHByZXNzV2FybmluZ3MoInVuY2hlY2tlZCIp\nDQogICAgcHVibGljIDxUPiBUIGZpbmRDYWNoZWQoQ2xhc3M8VD4gY2xzLCBP\nYmplY3Qgb2lkKSB7DQogICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgp\nOw0KICAgICAgICByZXR1cm4gKFQpIF9icm9rZXIuZmluZENhY2hlZChfYnJv\na2VyLm5ld09iamVjdElkKGNscywgb2lkKSwgdGhpcyk7DQogICAgfQ0KDQog\nICAgcHVibGljIENsYXNzIGdldE9iamVjdElkQ2xhc3MoQ2xhc3MgY2xzKSB7\nDQogICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOw0KICAgICAgICBp\nZiAoY2xzID09IG51bGwpDQogICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAg\nICAgICAgcmV0dXJuIE9wZW5KUEFQZXJzaXN0ZW5jZS5mcm9tT3BlbkpQQU9i\namVjdElkQ2xhc3MNCiAgICAgICAgICAgICAgICAoX2Jyb2tlci5nZXRPYmpl\nY3RJZFR5cGUoY2xzKSk7DQogICAgfQ0KDQogICAgcHVibGljIEVudGl0eVRy\nYW5zYWN0aW9uIGdldFRyYW5zYWN0aW9uKCkgew0KICAgICAgICBpZiAoX2Jy\nb2tlci5pc01hbmFnZWQoKSkNCiAgICAgICAgICAgIHRocm93IG5ldyBJbnZh\nbGlkU3RhdGVFeGNlcHRpb24oX2xvYy5nZXQoImdldC1tYW5hZ2VkLXRyYW5z\nIiksDQogICAgICAgICAgICAgICAgbnVsbCwgbnVsbCwgZmFsc2UpOw0KICAg\nICAgICByZXR1cm4gdGhpczsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCBq\nb2luVHJhbnNhY3Rpb24oKSB7DQogICAgICAgIGFzc2VydE5vdENsb3NlSW52\nb2tlZCgpOw0KICAgICAgICBpZiAoIV9icm9rZXIuc3luY1dpdGhNYW5hZ2Vk\nVHJhbnNhY3Rpb24oKSkNCiAgICAgICAgICAgIHRocm93IG5ldyBUcmFuc2Fj\ndGlvblJlcXVpcmVkRXhjZXB0aW9uKF9sb2MuZ2V0DQogICAgICAgICAgICAg\nICAgKCJuby1tYW5hZ2VkLXRyYW5zIiksIG51bGwsIG51bGwsIGZhbHNlKTsN\nCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCBiZWdpbigpIHsNCiAgICAgICAg\nX2Jyb2tlci5iZWdpbigpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIGNv\nbW1pdCgpIHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIF9icm9rZXIu\nY29tbWl0KCk7DQogICAgICAgIH0gY2F0Y2ggKFJvbGxiYWNrRXhjZXB0aW9u\nIGUpIHsNCiAgICAgICAgICAgIHRocm93IGU7DQogICAgICAgIH0gY2F0Y2gg\nKElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiBlKSB7DQogICAgICAgICAgICB0aHJv\ndyBlOw0KICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgew0KICAgICAg\nICAgICAgLy8gUm9sbGJhY2tFeGNlcHRpb25zIGFyZSBzcGVjaWFsIGFuZCBh\ncmVuJ3QgaGFuZGxlZCBieSB0aGUNCiAgICAgICAgICAgIC8vIG5vcm1hbCBl\neGNlcHRpb24gdHJhbnNsYXRvciwgc2luY2UgdGhlIHNwZWMgc2F5cyB0aGV5\nDQogICAgICAgICAgICAvLyBzaG91bGQgYmUgdGhyb3duIHdoZW5ldmVyIHRo\nZSBjb21taXQgZmFpbHMgZm9yIGFueSByZWFzb24gYXQNCiAgICAgICAgICAg\nIC8vIGFsbCwgd2hlcmFzIHRoZSBleGNlcHRpb24gdHJhbnNsYXRvciBoYW5k\nbGVzIGV4Y2VwdGlvbnMgdGhhdA0KICAgICAgICAgICAgLy8gYXJlIGNhdXNl\nZCBmb3Igc3BlY2lmaWMgcmVhc29ucw0KICAgICAgICAgICAgdGhyb3cgbmV3\nIFJvbGxiYWNrRXhjZXB0aW9uKGUpOw0KICAgICAgICB9DQogICAgfQ0KDQog\nICAgcHVibGljIHZvaWQgcm9sbGJhY2soKSB7DQogICAgICAgIF9icm9rZXIu\ncm9sbGJhY2soKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCBjb21taXRB\nbmRSZXN1bWUoKSB7DQogICAgICAgIF9icm9rZXIuY29tbWl0QW5kUmVzdW1l\nKCk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgcm9sbGJhY2tBbmRSZXN1\nbWUoKSB7DQogICAgICAgIF9icm9rZXIucm9sbGJhY2tBbmRSZXN1bWUoKTsN\nCiAgICB9DQoNCiAgICBwdWJsaWMgVGhyb3dhYmxlIGdldFJvbGxiYWNrQ2F1\nc2UoKSB7DQogICAgICAgIGlmICghaXNBY3RpdmUoKSkNCiAgICAgICAgICAg\nIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oX2xvYy5nZXQoIm5v\nLXRyYW5zYWN0aW9uIikNCiAgICAgICAgICAgICAgICAuZ2V0TWVzc2FnZSgp\nKTsNCg0KICAgICAgICByZXR1cm4gX2Jyb2tlci5nZXRSb2xsYmFja0NhdXNl\nKCk7DQogICAgfQ0KDQogICAgcHVibGljIGJvb2xlYW4gZ2V0Um9sbGJhY2tP\nbmx5KCkgew0KICAgICAgICBpZiAoIWlzQWN0aXZlKCkpDQogICAgICAgICAg\nICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKF9sb2MuZ2V0KCJu\nby10cmFuc2FjdGlvbiIpDQogICAgICAgICAgICAgICAgLmdldE1lc3NhZ2Uo\nKSk7DQoNCiAgICAgICAgcmV0dXJuIF9icm9rZXIuZ2V0Um9sbGJhY2tPbmx5\nKCk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgc2V0Um9sbGJhY2tPbmx5\nKCkgew0KICAgICAgICBfYnJva2VyLnNldFJvbGxiYWNrT25seSgpOw0KICAg\nIH0NCg0KICAgIHB1YmxpYyB2b2lkIHNldFJvbGxiYWNrT25seShUaHJvd2Fi\nbGUgY2F1c2UpIHsNCiAgICAgICAgX2Jyb2tlci5zZXRSb2xsYmFja09ubHko\nY2F1c2UpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHNldFNhdmVwb2lu\ndChTdHJpbmcgbmFtZSkgew0KICAgICAgICBhc3NlcnROb3RDbG9zZUludm9r\nZWQoKTsNCiAgICAgICAgX2Jyb2tlci5zZXRTYXZlcG9pbnQobmFtZSk7DQog\nICAgfQ0KDQogICAgcHVibGljIHZvaWQgcm9sbGJhY2tUb1NhdmVwb2ludCgp\nIHsNCiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7DQogICAgICAg\nIF9icm9rZXIucm9sbGJhY2tUb1NhdmVwb2ludCgpOw0KICAgIH0NCg0KICAg\nIHB1YmxpYyB2b2lkIHJvbGxiYWNrVG9TYXZlcG9pbnQoU3RyaW5nIG5hbWUp\nIHsNCiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7DQogICAgICAg\nIF9icm9rZXIucm9sbGJhY2tUb1NhdmVwb2ludChuYW1lKTsNCiAgICB9DQoN\nCiAgICBwdWJsaWMgdm9pZCByZWxlYXNlU2F2ZXBvaW50KCkgew0KICAgICAg\nICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsNCiAgICAgICAgX2Jyb2tlci5y\nZWxlYXNlU2F2ZXBvaW50KCk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQg\ncmVsZWFzZVNhdmVwb2ludChTdHJpbmcgbmFtZSkgew0KICAgICAgICBhc3Nl\ncnROb3RDbG9zZUludm9rZWQoKTsNCiAgICAgICAgX2Jyb2tlci5yZWxlYXNl\nU2F2ZXBvaW50KG5hbWUpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIGZs\ndXNoKCkgew0KICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsNCiAg\nICAgICAgX2Jyb2tlci5hc3NlcnRPcGVuKCk7DQogICAgICAgIF9icm9rZXIu\nYXNzZXJ0QWN0aXZlVHJhbnNhY3Rpb24oKTsNCiAgICAgICAgX2Jyb2tlci5m\nbHVzaCgpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHByZUZsdXNoKCkg\new0KICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsNCiAgICAgICAg\nX2Jyb2tlci5wcmVGbHVzaCgpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lk\nIHZhbGlkYXRlQ2hhbmdlcygpIHsNCiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJ\nbnZva2VkKCk7DQogICAgICAgIF9icm9rZXIudmFsaWRhdGVDaGFuZ2VzKCk7\nDQogICAgfQ0KDQogICAgcHVibGljIGJvb2xlYW4gaXNBY3RpdmUoKSB7DQog\nICAgICAgIHJldHVybiBpc09wZW4oKSAmJiBfYnJva2VyLmlzQWN0aXZlKCk7\nDQogICAgfQ0KDQogICAgcHVibGljIGJvb2xlYW4gaXNTdG9yZUFjdGl2ZSgp\nIHsNCiAgICAgICAgcmV0dXJuIF9icm9rZXIuaXNTdG9yZUFjdGl2ZSgpOw0K\nICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIGJlZ2luU3RvcmUoKSB7DQogICAg\nICAgIF9icm9rZXIuYmVnaW5TdG9yZSgpOw0KICAgIH0NCg0KICAgIHB1Ymxp\nYyBib29sZWFuIGNvbnRhaW5zKE9iamVjdCBlbnRpdHkpIHsNCiAgICAgICAg\nYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7DQogICAgICAgIGlmIChlbnRpdHkg\nPT0gbnVsbCkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAg\nT3BlbkpQQVN0YXRlTWFuYWdlciBzbSA9IF9icm9rZXIuZ2V0U3RhdGVNYW5h\nZ2VyKGVudGl0eSk7DQogICAgICAgIGlmIChzbSA9PSBudWxsICYmICFJbXBs\nSGVscGVyLmlzTWFuYWdlZFR5cGUoZW50aXR5LmdldENsYXNzKCkpKQ0KICAg\nICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKF9sb2MuZ2V0\nKCJub3QtZW50aXR5IiwNCiAgICAgICAgICAgICAgICBlbnRpdHkuZ2V0Q2xh\nc3MoKSksIG51bGwsIG51bGwsIHRydWUpOw0KICAgICAgICByZXR1cm4gc20g\nIT0gbnVsbCAmJiAhc20uaXNEZWxldGVkKCk7DQogICAgfQ0KDQogICAgcHVi\nbGljIGJvb2xlYW4gY29udGFpbnNBbGwoT2JqZWN0Li4uIGVudGl0aWVzKSB7\nDQogICAgICAgIGZvciAoT2JqZWN0IGVudGl0eSA6IGVudGl0aWVzKQ0KICAg\nICAgICAgICAgaWYgKCFjb250YWlucyhlbnRpdHkpKQ0KICAgICAgICAgICAg\nICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAg\nfQ0KDQogICAgcHVibGljIGJvb2xlYW4gY29udGFpbnNBbGwoQ29sbGVjdGlv\nbiBlbnRpdGllcykgew0KICAgICAgICBmb3IgKE9iamVjdCBlbnRpdHkgOiBl\nbnRpdGllcykNCiAgICAgICAgICAgIGlmICghY29udGFpbnMoZW50aXR5KSkN\nCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIHJldHVy\nbiB0cnVlOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHBlcnNpc3QoT2Jq\nZWN0IGVudGl0eSkgew0KICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQo\nKTsNCiAgICAgICAgX2Jyb2tlci5wZXJzaXN0KGVudGl0eSwgdGhpcyk7DQog\nICAgfQ0KDQogICAgcHVibGljIHZvaWQgcGVyc2lzdEFsbChPYmplY3QuLi4g\nZW50aXRpZXMpIHsNCiAgICAgICAgcGVyc2lzdEFsbChBcnJheXMuYXNMaXN0\nKGVudGl0aWVzKSk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgcGVyc2lz\ndEFsbChDb2xsZWN0aW9uIGVudGl0aWVzKSB7DQogICAgICAgIGFzc2VydE5v\ndENsb3NlSW52b2tlZCgpOw0KICAgICAgICBfYnJva2VyLnBlcnNpc3RBbGwo\nZW50aXRpZXMsIHRoaXMpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHJl\nbW92ZShPYmplY3QgZW50aXR5KSB7DQogICAgICAgIGFzc2VydE5vdENsb3Nl\nSW52b2tlZCgpOw0KICAgICAgICBfYnJva2VyLmRlbGV0ZShlbnRpdHksIHRo\naXMpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHJlbW92ZUFsbChPYmpl\nY3QuLi4gZW50aXRpZXMpIHsNCiAgICAgICAgcmVtb3ZlQWxsKEFycmF5cy5h\nc0xpc3QoZW50aXRpZXMpKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCBy\nZW1vdmVBbGwoQ29sbGVjdGlvbiBlbnRpdGllcykgew0KICAgICAgICBhc3Nl\ncnROb3RDbG9zZUludm9rZWQoKTsNCiAgICAgICAgX2Jyb2tlci5kZWxldGVB\nbGwoZW50aXRpZXMsIHRoaXMpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lk\nIHJlbGVhc2UoT2JqZWN0IGVudGl0eSkgew0KICAgICAgICBhc3NlcnROb3RD\nbG9zZUludm9rZWQoKTsNCiAgICAgICAgX2Jyb2tlci5yZWxlYXNlKGVudGl0\neSwgdGhpcyk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgcmVsZWFzZUFs\nbChDb2xsZWN0aW9uIGVudGl0aWVzKSB7DQogICAgICAgIGFzc2VydE5vdENs\nb3NlSW52b2tlZCgpOw0KICAgICAgICBfYnJva2VyLnJlbGVhc2VBbGwoZW50\naXRpZXMsIHRoaXMpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHJlbGVh\nc2VBbGwoT2JqZWN0Li4uIGVudGl0aWVzKSB7DQogICAgICAgIHJlbGVhc2VB\nbGwoQXJyYXlzLmFzTGlzdChlbnRpdGllcykpOw0KICAgIH0NCg0KICAgIHB1\nYmxpYyB2b2lkIHJlZnJlc2goT2JqZWN0IGVudGl0eSkgew0KICAgICAgICBh\nc3NlcnROb3RDbG9zZUludm9rZWQoKTsNCiAgICAgICAgX2Jyb2tlci5hc3Nl\ncnRXcml0ZU9wZXJhdGlvbigpOw0KICAgICAgICBfYnJva2VyLnJlZnJlc2go\nZW50aXR5LCB0aGlzKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCByZWZy\nZXNoQWxsKCkgew0KICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsN\nCiAgICAgICAgX2Jyb2tlci5hc3NlcnRXcml0ZU9wZXJhdGlvbigpOw0KICAg\nICAgICBfYnJva2VyLnJlZnJlc2hBbGwoX2Jyb2tlci5nZXRUcmFuc2FjdGlv\nbmFsT2JqZWN0cygpLCB0aGlzKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9p\nZCByZWZyZXNoQWxsKENvbGxlY3Rpb24gZW50aXRpZXMpIHsNCiAgICAgICAg\nYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7DQogICAgICAgIF9icm9rZXIuYXNz\nZXJ0V3JpdGVPcGVyYXRpb24oKTsNCiAgICAgICAgX2Jyb2tlci5yZWZyZXNo\nQWxsKGVudGl0aWVzLCB0aGlzKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9p\nZCByZWZyZXNoQWxsKE9iamVjdC4uLiBlbnRpdGllcykgew0KICAgICAgICBy\nZWZyZXNoQWxsKEFycmF5cy5hc0xpc3QoZW50aXRpZXMpKTsNCiAgICB9DQoN\nCiAgICBwdWJsaWMgdm9pZCByZXRyaWV2ZShPYmplY3QgZW50aXR5KSB7DQog\nICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOw0KICAgICAgICBfYnJv\na2VyLnJldHJpZXZlKGVudGl0eSwgdHJ1ZSwgdGhpcyk7DQogICAgfQ0KDQog\nICAgcHVibGljIHZvaWQgcmV0cmlldmVBbGwoQ29sbGVjdGlvbiBlbnRpdGll\ncykgew0KICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsNCiAgICAg\nICAgX2Jyb2tlci5yZXRyaWV2ZUFsbChlbnRpdGllcywgdHJ1ZSwgdGhpcyk7\nDQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgcmV0cmlldmVBbGwoT2JqZWN0\nLi4uIGVudGl0aWVzKSB7DQogICAgICAgIHJldHJpZXZlQWxsKEFycmF5cy5h\nc0xpc3QoZW50aXRpZXMpKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCBl\ndmljdChPYmplY3QgZW50aXR5KSB7DQogICAgICAgIGFzc2VydE5vdENsb3Nl\nSW52b2tlZCgpOw0KICAgICAgICBfYnJva2VyLmV2aWN0KGVudGl0eSwgdGhp\ncyk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgZXZpY3RBbGwoQ29sbGVj\ndGlvbiBlbnRpdGllcykgew0KICAgICAgICBhc3NlcnROb3RDbG9zZUludm9r\nZWQoKTsNCiAgICAgICAgX2Jyb2tlci5ldmljdEFsbChlbnRpdGllcywgdGhp\ncyk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgZXZpY3RBbGwoT2JqZWN0\nLi4uIGVudGl0aWVzKSB7DQogICAgICAgIGV2aWN0QWxsKEFycmF5cy5hc0xp\nc3QoZW50aXRpZXMpKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCBldmlj\ndEFsbCgpIHsNCiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7DQog\nICAgICAgIF9icm9rZXIuZXZpY3RBbGwodGhpcyk7DQogICAgfQ0KDQogICAg\ncHVibGljIHZvaWQgZXZpY3RBbGwoQ2xhc3MgY2xzKSB7DQogICAgICAgIGFz\nc2VydE5vdENsb3NlSW52b2tlZCgpOw0KICAgICAgICBfYnJva2VyLmV2aWN0\nQWxsKF9icm9rZXIubmV3RXh0ZW50KGNscywgdHJ1ZSksIHRoaXMpOw0KICAg\nIH0NCg0KICAgIHB1YmxpYyB2b2lkIGV2aWN0QWxsKEV4dGVudCBleHRlbnQp\nIHsNCiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7DQogICAgICAg\nIF9icm9rZXIuZXZpY3RBbGwoZXh0ZW50LmdldERlbGVnYXRlKCksIHRoaXMp\nOw0KICAgIH0NCg0KICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJ1bmNoZWNrZWQi\nKQ0KICAgIHB1YmxpYyA8VD4gVCBkZXRhY2goVCBlbnRpdHkpIHsNCiAgICAg\nICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7DQogICAgICAgIHJldHVybiAo\nVCkgX2Jyb2tlci5kZXRhY2goZW50aXR5LCB0aGlzKTsNCiAgICB9DQoNCiAg\nICBwdWJsaWMgT2JqZWN0W10gZGV0YWNoQWxsKE9iamVjdC4uLiBlbnRpdGll\ncykgew0KICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsNCiAgICAg\nICAgcmV0dXJuIF9icm9rZXIuZGV0YWNoQWxsKEFycmF5cy5hc0xpc3QoZW50\naXRpZXMpLCB0aGlzKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgQ29sbGVjdGlv\nbiBkZXRhY2hBbGwoQ29sbGVjdGlvbiBlbnRpdGllcykgew0KICAgICAgICBh\nc3NlcnROb3RDbG9zZUludm9rZWQoKTsNCiAgICAgICAgcmV0dXJuIEFycmF5\ncy5hc0xpc3QoX2Jyb2tlci5kZXRhY2hBbGwoZW50aXRpZXMsIHRoaXMpKTsN\nCiAgICB9DQoNCiAgICBAU3VwcHJlc3NXYXJuaW5ncygidW5jaGVja2VkIikN\nCiAgICBwdWJsaWMgPFQ+IFQgbWVyZ2UoVCBlbnRpdHkpIHsNCiAgICAgICAg\nYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7DQogICAgICAgIHJldHVybiAoVCkg\nX2Jyb2tlci5hdHRhY2goZW50aXR5LCB0cnVlLCB0aGlzKTsNCiAgICB9DQoN\nCiAgICBwdWJsaWMgT2JqZWN0W10gbWVyZ2VBbGwoT2JqZWN0Li4uIGVudGl0\naWVzKSB7DQogICAgICAgIGlmIChlbnRpdGllcy5sZW5ndGggPT0gMCkNCiAg\nICAgICAgICAgIHJldHVybiBuZXcgT2JqZWN0WzBdOw0KICAgICAgICByZXR1\ncm4gbWVyZ2VBbGwoQXJyYXlzLmFzTGlzdChlbnRpdGllcykpLnRvQXJyYXko\nKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgQ29sbGVjdGlvbiBtZXJnZUFsbChD\nb2xsZWN0aW9uIGVudGl0aWVzKSB7DQogICAgICAgIGFzc2VydE5vdENsb3Nl\nSW52b2tlZCgpOw0KICAgICAgICByZXR1cm4gQXJyYXlzLmFzTGlzdChfYnJv\na2VyLmF0dGFjaEFsbChlbnRpdGllcywgdHJ1ZSwgdGhpcykpOw0KICAgIH0N\nCg0KICAgIHB1YmxpYyB2b2lkIHRyYW5zYWN0aW9uYWwoT2JqZWN0IGVudGl0\neSwgYm9vbGVhbiB1cGRhdGVWZXJzaW9uKSB7DQogICAgICAgIGFzc2VydE5v\ndENsb3NlSW52b2tlZCgpOw0KICAgICAgICBfYnJva2VyLnRyYW5zYWN0aW9u\nYWwoZW50aXR5LCB1cGRhdGVWZXJzaW9uLCB0aGlzKTsNCiAgICB9DQoNCiAg\nICBwdWJsaWMgdm9pZCB0cmFuc2FjdGlvbmFsQWxsKENvbGxlY3Rpb24gb2Jq\ncywgYm9vbGVhbiB1cGRhdGVWZXJzaW9uKSB7DQogICAgICAgIGFzc2VydE5v\ndENsb3NlSW52b2tlZCgpOw0KICAgICAgICBfYnJva2VyLnRyYW5zYWN0aW9u\nYWxBbGwob2JqcywgdXBkYXRlVmVyc2lvbiwgdGhpcyk7DQogICAgfQ0KDQog\nICAgcHVibGljIHZvaWQgdHJhbnNhY3Rpb25hbEFsbChPYmplY3RbXSBvYmpz\nLCBib29sZWFuIHVwZGF0ZVZlcnNpb24pIHsNCiAgICAgICAgYXNzZXJ0Tm90\nQ2xvc2VJbnZva2VkKCk7DQogICAgICAgIF9icm9rZXIudHJhbnNhY3Rpb25h\nbEFsbChBcnJheXMuYXNMaXN0KG9ianMpLCB1cGRhdGVWZXJzaW9uLCB0aGlz\nKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCBub250cmFuc2FjdGlvbmFs\nKE9iamVjdCBlbnRpdHkpIHsNCiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZv\na2VkKCk7DQogICAgICAgIF9icm9rZXIubm9udHJhbnNhY3Rpb25hbChlbnRp\ndHksIHRoaXMpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIG5vbnRyYW5z\nYWN0aW9uYWxBbGwoQ29sbGVjdGlvbiBvYmpzKSB7DQogICAgICAgIGFzc2Vy\ndE5vdENsb3NlSW52b2tlZCgpOw0KICAgICAgICBfYnJva2VyLm5vbnRyYW5z\nYWN0aW9uYWxBbGwob2JqcywgdGhpcyk7DQogICAgfQ0KDQogICAgcHVibGlj\nIHZvaWQgbm9udHJhbnNhY3Rpb25hbEFsbChPYmplY3RbXSBvYmpzKSB7DQog\nICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOw0KICAgICAgICBfYnJv\na2VyLm5vbnRyYW5zYWN0aW9uYWxBbGwoQXJyYXlzLmFzTGlzdChvYmpzKSwg\ndGhpcyk7DQogICAgfQ0KDQogICAgcHVibGljIEdlbmVyYXRvciBnZXROYW1l\nZEdlbmVyYXRvcihTdHJpbmcgbmFtZSkgew0KICAgICAgICBhc3NlcnROb3RD\nbG9zZUludm9rZWQoKTsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIFNl\ncXVlbmNlTWV0YURhdGEgbWV0YSA9IF9icm9rZXIuZ2V0Q29uZmlndXJhdGlv\nbigpLg0KICAgICAgICAgICAgICAgIGdldE1ldGFEYXRhUmVwb3NpdG9yeUlu\nc3RhbmNlKCkuZ2V0U2VxdWVuY2VNZXRhRGF0YShuYW1lLA0KICAgICAgICAg\nICAgICAgIF9icm9rZXIuZ2V0Q2xhc3NMb2FkZXIoKSwgdHJ1ZSk7DQogICAg\nICAgICAgICBTZXEgc2VxID0gbWV0YS5nZXRJbnN0YW5jZShfYnJva2VyLmdl\ndENsYXNzTG9hZGVyKCkpOw0KICAgICAgICAgICAgcmV0dXJuIG5ldyBHZW5l\ncmF0b3JJbXBsKHNlcSwgbmFtZSwgX2Jyb2tlciwgbnVsbCk7DQogICAgICAg\nIH0gY2F0Y2ggKFJ1bnRpbWVFeGNlcHRpb24gcmUpIHsNCiAgICAgICAgICAg\nIHRocm93IFBlcnNpc3RlbmNlRXhjZXB0aW9ucy50b1BlcnNpc3RlbmNlRXhj\nZXB0aW9uKHJlKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHB1YmxpYyBH\nZW5lcmF0b3IgZ2V0SWRHZW5lcmF0b3IoQ2xhc3MgZm9yQ2xhc3MpIHsNCiAg\nICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7DQogICAgICAgIHRyeSB7\nDQogICAgICAgICAgICBDbGFzc01ldGFEYXRhIG1ldGEgPSBfYnJva2VyLmdl\ndENvbmZpZ3VyYXRpb24oKS4NCiAgICAgICAgICAgICAgICBnZXRNZXRhRGF0\nYVJlcG9zaXRvcnlJbnN0YW5jZSgpLmdldE1ldGFEYXRhKGZvckNsYXNzLA0K\nICAgICAgICAgICAgICAgIF9icm9rZXIuZ2V0Q2xhc3NMb2FkZXIoKSwgdHJ1\nZSk7DQogICAgICAgICAgICBTZXEgc2VxID0gX2Jyb2tlci5nZXRJZGVudGl0\neVNlcXVlbmNlKG1ldGEpOw0KICAgICAgICAgICAgcmV0dXJuIChzZXEgPT0g\nbnVsbCkgPyBudWxsIDogbmV3IEdlbmVyYXRvckltcGwoc2VxLCBudWxsLCBf\nYnJva2VyLA0KICAgICAgICAgICAgICAgIG1ldGEpOw0KICAgICAgICB9IGNh\ndGNoIChFeGNlcHRpb24gZSkgew0KICAgICAgICAgICAgdGhyb3cgUGVyc2lz\ndGVuY2VFeGNlcHRpb25zLnRvUGVyc2lzdGVuY2VFeGNlcHRpb24oZSk7DQog\nICAgICAgIH0NCiAgICB9DQoNCiAgICBwdWJsaWMgR2VuZXJhdG9yIGdldEZp\nZWxkR2VuZXJhdG9yKENsYXNzIGZvckNsYXNzLCBTdHJpbmcgZmllbGROYW1l\nKSB7DQogICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOw0KICAgICAg\nICB0cnkgew0KICAgICAgICAgICAgQ2xhc3NNZXRhRGF0YSBtZXRhID0gX2Jy\nb2tlci5nZXRDb25maWd1cmF0aW9uKCkuDQogICAgICAgICAgICAgICAgZ2V0\nTWV0YURhdGFSZXBvc2l0b3J5SW5zdGFuY2UoKS5nZXRNZXRhRGF0YShmb3JD\nbGFzcywNCiAgICAgICAgICAgICAgICBfYnJva2VyLmdldENsYXNzTG9hZGVy\nKCksIHRydWUpOw0KICAgICAgICAgICAgRmllbGRNZXRhRGF0YSBmbWQgPSBt\nZXRhLmdldEZpZWxkKGZpZWxkTmFtZSk7DQogICAgICAgICAgICBpZiAoZm1k\nID09IG51bGwpDQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFyZ3VtZW50\nRXhjZXB0aW9uKF9sb2MuZ2V0KCJuby1uYW1lZC1maWVsZCIsDQogICAgICAg\nICAgICAgICAgICAgIGZvckNsYXNzLCBmaWVsZE5hbWUpLCBudWxsLCBudWxs\nLCBmYWxzZSk7DQoNCiAgICAgICAgICAgIFNlcSBzZXEgPSBfYnJva2VyLmdl\ndFZhbHVlU2VxdWVuY2UoZm1kKTsNCiAgICAgICAgICAgIHJldHVybiAoc2Vx\nID09IG51bGwpID8gbnVsbCA6IG5ldyBHZW5lcmF0b3JJbXBsKHNlcSwgbnVs\nbCwgX2Jyb2tlciwNCiAgICAgICAgICAgICAgICBtZXRhKTsNCiAgICAgICAg\nfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsNCiAgICAgICAgICAgIHRocm93IFBl\ncnNpc3RlbmNlRXhjZXB0aW9ucy50b1BlcnNpc3RlbmNlRXhjZXB0aW9uKGUp\nOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcHVibGljIDxUPiBFeHRlbnQ8\nVD4gY3JlYXRlRXh0ZW50KENsYXNzPFQ+IGNscywgYm9vbGVhbiBzdWJjbGFz\nc2VzKSB7DQogICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOw0KICAg\nICAgICByZXR1cm4gbmV3IEV4dGVudEltcGw8VD4odGhpcywgX2Jyb2tlci5u\nZXdFeHRlbnQoY2xzLCBzdWJjbGFzc2VzKSk7DQogICAgfQ0KDQogICAgcHVi\nbGljIE9wZW5KUEFRdWVyeSBjcmVhdGVRdWVyeShTdHJpbmcgcXVlcnkpIHsN\nCiAgICAgICAgcmV0dXJuIGNyZWF0ZVF1ZXJ5KEpQUUxQYXJzZXIuTEFOR19K\nUFFMLCBxdWVyeSk7DQogICAgfQ0KDQogICAgcHVibGljIE9wZW5KUEFRdWVy\neSBjcmVhdGVRdWVyeShTdHJpbmcgbGFuZ3VhZ2UsIFN0cmluZyBxdWVyeSkg\new0KICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsNCiAgICAgICAg\ncmV0dXJuIG5ldyBRdWVyeUltcGwodGhpcywgX2Jyb2tlci5uZXdRdWVyeShs\nYW5ndWFnZSwgcXVlcnkpKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgT3BlbkpQ\nQVF1ZXJ5IGNyZWF0ZVF1ZXJ5KFF1ZXJ5IHF1ZXJ5KSB7DQogICAgICAgIGlm\nIChxdWVyeSA9PSBudWxsKQ0KICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVF1\nZXJ5KChTdHJpbmcpIG51bGwpOw0KICAgICAgICBhc3NlcnROb3RDbG9zZUlu\ndm9rZWQoKTsNCiAgICAgICAgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5R\ndWVyeSBxID0gKChRdWVyeUltcGwpIHF1ZXJ5KS5nZXREZWxlZ2F0ZSgpOw0K\nICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5SW1wbCh0aGlzLCBfYnJva2VyLm5l\nd1F1ZXJ5KHEuZ2V0TGFuZ3VhZ2UoKSwNCiAgICAgICAgICAgIHEpKTsNCiAg\nICB9DQoNCiAgICBwdWJsaWMgT3BlbkpQQVF1ZXJ5IGNyZWF0ZU5hbWVkUXVl\ncnkoU3RyaW5nIG5hbWUpIHsNCiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZv\na2VkKCk7DQogICAgICAgIF9icm9rZXIuYXNzZXJ0T3BlbigpOw0KICAgICAg\nICB0cnkgew0KICAgICAgICAgICAgUXVlcnlNZXRhRGF0YSBtZXRhID0gX2Jy\nb2tlci5nZXRDb25maWd1cmF0aW9uKCkuDQogICAgICAgICAgICAgICAgZ2V0\nTWV0YURhdGFSZXBvc2l0b3J5SW5zdGFuY2UoKS5nZXRRdWVyeU1ldGFEYXRh\nKG51bGwsIG5hbWUsDQogICAgICAgICAgICAgICAgX2Jyb2tlci5nZXRDbGFz\nc0xvYWRlcigpLCB0cnVlKTsNCiAgICAgICAgICAgIG9yZy5hcGFjaGUub3Bl\nbmpwYS5rZXJuZWwuUXVlcnkgZGVsID0NCiAgICAgICAgICAgICAgICBfYnJv\na2VyLm5ld1F1ZXJ5KG1ldGEuZ2V0TGFuZ3VhZ2UoKSwgbnVsbCk7DQogICAg\nICAgICAgICBtZXRhLnNldEludG8oZGVsKTsNCiAgICAgICAgICAgIGRlbC5j\nb21waWxlKCk7DQoNCiAgICAgICAgICAgIE9wZW5KUEFRdWVyeSBxID0gbmV3\nIFF1ZXJ5SW1wbCh0aGlzLCBkZWwpOw0KICAgICAgICAgICAgU3RyaW5nW10g\naGludHMgPSBtZXRhLmdldEhpbnRLZXlzKCk7DQogICAgICAgICAgICBPYmpl\nY3RbXSB2YWx1ZXMgPSBtZXRhLmdldEhpbnRWYWx1ZXMoKTsNCiAgICAgICAg\nICAgIGZvciAoaW50IGkgPSAwOyBpIDwgaGludHMubGVuZ3RoOyBpKyspDQog\nICAgICAgICAgICAgICAgcS5zZXRIaW50KGhpbnRzW2ldLCB2YWx1ZXNbaV0p\nOw0KICAgICAgICAgICAgcmV0dXJuIHE7DQogICAgICAgIH0gY2F0Y2ggKFJ1\nbnRpbWVFeGNlcHRpb24gcmUpIHsNCiAgICAgICAgICAgIHRocm93IFBlcnNp\nc3RlbmNlRXhjZXB0aW9ucy50b1BlcnNpc3RlbmNlRXhjZXB0aW9uKHJlKTsN\nCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHB1YmxpYyBPcGVuSlBBUXVlcnkg\nY3JlYXRlTmF0aXZlUXVlcnkoU3RyaW5nIHF1ZXJ5KSB7DQogICAgICAgIHZh\nbGlkYXRlU1FMKHF1ZXJ5KTsNCiAgICAgICAgcmV0dXJuIGNyZWF0ZVF1ZXJ5\nKFF1ZXJ5TGFuZ3VhZ2VzLkxBTkdfU1FMLCBxdWVyeSk7DQogICAgfQ0KDQog\nICAgcHVibGljIE9wZW5KUEFRdWVyeSBjcmVhdGVOYXRpdmVRdWVyeShTdHJp\nbmcgcXVlcnksIENsYXNzIGNscykgew0KICAgICAgICByZXR1cm4gY3JlYXRl\nTmF0aXZlUXVlcnkocXVlcnkpLnNldFJlc3VsdENsYXNzKGNscyk7DQogICAg\nfQ0KDQogICAgcHVibGljIE9wZW5KUEFRdWVyeSBjcmVhdGVOYXRpdmVRdWVy\neShTdHJpbmcgcXVlcnksIFN0cmluZyBtYXBwaW5nTmFtZSkgew0KICAgICAg\nICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsNCiAgICAgICAgdmFsaWRhdGVT\nUUwocXVlcnkpOw0KICAgICAgICBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVs\nLlF1ZXJ5IGtlcm5lbFF1ZXJ5ID0gX2Jyb2tlci5uZXdRdWVyeSgNCiAgICAg\nICAgICAgIFF1ZXJ5TGFuZ3VhZ2VzLkxBTkdfU1FMLCBxdWVyeSk7DQogICAg\nICAgIGtlcm5lbFF1ZXJ5LnNldFJlc3VsdE1hcHBpbmcobnVsbCwgbWFwcGlu\nZ05hbWUpOw0KICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5SW1wbCh0aGlzLCBr\nZXJuZWxRdWVyeSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogVmFsaWRh\ndGUgdGhhdCB0aGUgdXNlciBwcm92aWRlZCBTUUwuDQogICAgICovDQogICAg\ncHJpdmF0ZSBzdGF0aWMgdm9pZCB2YWxpZGF0ZVNRTChTdHJpbmcgcXVlcnkp\nIHsNCiAgICAgICAgaWYgKFN0cmluZ1V0aWxzLnRyaW1Ub051bGwocXVlcnkp\nID09IG51bGwpDQogICAgICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRFeGNl\ncHRpb24oX2xvYy5nZXQoIm5vLXNxbCIpLCBudWxsLCBudWxsLCBmYWxzZSk7\nDQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgc2V0Rmx1c2hNb2RlKEZsdXNo\nTW9kZVR5cGUgZmx1c2hNb2RlKSB7DQogICAgICAgIGFzc2VydE5vdENsb3Nl\nSW52b2tlZCgpOw0KICAgICAgICBfYnJva2VyLmFzc2VydE9wZW4oKTsNCiAg\nICAgICAgX2Jyb2tlci5nZXRGZXRjaENvbmZpZ3VyYXRpb24oKS5zZXRGbHVz\naEJlZm9yZVF1ZXJpZXMNCiAgICAgICAgICAgICh0b0ZsdXNoQmVmb3JlUXVl\ncmllcyhmbHVzaE1vZGUpKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgRmx1c2hN\nb2RlVHlwZSBnZXRGbHVzaE1vZGUoKSB7DQogICAgICAgIGFzc2VydE5vdENs\nb3NlSW52b2tlZCgpOw0KICAgICAgICBfYnJva2VyLmFzc2VydE9wZW4oKTsN\nCiAgICAgICAgcmV0dXJuIGZyb21GbHVzaEJlZm9yZVF1ZXJpZXMoX2Jyb2tl\nci5nZXRGZXRjaENvbmZpZ3VyYXRpb24oKS4NCiAgICAgICAgICAgIGdldEZs\ndXNoQmVmb3JlUXVlcmllcygpKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAg\nKiBUcmFuc2xhdGUgb3VyIGludGVybmFsIGZsdXNoIGNvbnN0YW50IHRvIGEg\nZmx1c2ggbW9kZSBlbnVtIHZhbHVlLg0KICAgICAqLw0KICAgIHN0YXRpYyBG\nbHVzaE1vZGVUeXBlIGZyb21GbHVzaEJlZm9yZVF1ZXJpZXMoaW50IGZsdXNo\nKSB7DQogICAgICAgIHN3aXRjaCAoZmx1c2gpIHsNCiAgICAgICAgICAgIGNh\nc2UgUXVlcnlGbHVzaE1vZGVzLkZMVVNIX1RSVUU6DQogICAgICAgICAgICAg\nICAgcmV0dXJuIEZsdXNoTW9kZVR5cGUuQVVUTzsNCiAgICAgICAgICAgIGNh\nc2UgUXVlcnlGbHVzaE1vZGVzLkZMVVNIX0ZBTFNFOg0KICAgICAgICAgICAg\nICAgIHJldHVybiBGbHVzaE1vZGVUeXBlLkNPTU1JVDsNCiAgICAgICAgICAg\nIGRlZmF1bHQ6DQogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7DQogICAg\nICAgIH0NCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBUcmFuc2xhdGUgYSBm\nbHVzaCBtb2RlIGVudW0gdmFsdWUgdG8gb3VyIGludGVybmFsIGZsdXNoIGNv\nbnN0YW50Lg0KICAgICAqLw0KICAgIHN0YXRpYyBpbnQgdG9GbHVzaEJlZm9y\nZVF1ZXJpZXMoRmx1c2hNb2RlVHlwZSBmbHVzaE1vZGUpIHsNCiAgICAgICAg\nLy8gY2hvb3NlIGRlZmF1bHQgZm9yIG51bGwNCiAgICAgICAgaWYgKGZsdXNo\nTW9kZSA9PSBudWxsKQ0KICAgICAgICAgICAgcmV0dXJuIFF1ZXJ5Rmx1c2hN\nb2Rlcy5GTFVTSF9XSVRIX0NPTk5FQ1RJT047DQogICAgICAgIGlmIChmbHVz\naE1vZGUgPT0gRmx1c2hNb2RlVHlwZS5BVVRPKQ0KICAgICAgICAgICAgcmV0\ndXJuIFF1ZXJ5Rmx1c2hNb2Rlcy5GTFVTSF9UUlVFOw0KICAgICAgICBpZiAo\nZmx1c2hNb2RlID09IEZsdXNoTW9kZVR5cGUuQ09NTUlUKQ0KICAgICAgICAg\nICAgcmV0dXJuIFF1ZXJ5Rmx1c2hNb2Rlcy5GTFVTSF9GQUxTRTsNCiAgICAg\nICAgdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uKGZsdXNoTW9kZS50b1N0\ncmluZygpLCBudWxsLCBudWxsLCBmYWxzZSk7DQogICAgfQ0KDQogICAgcHVi\nbGljIHZvaWQgY2xlYXIoKSB7DQogICAgICAgIGFzc2VydE5vdENsb3NlSW52\nb2tlZCgpOw0KICAgICAgICBfYnJva2VyLmRldGFjaEFsbCh0aGlzLCBmYWxz\nZSk7DQogICAgfQ0KDQogICAgcHVibGljIE9iamVjdCBnZXREZWxlZ2F0ZSgp\nIHsNCiAgICAgICAgX2Jyb2tlci5hc3NlcnRPcGVuKCk7DQogICAgICAgIGFz\nc2VydE5vdENsb3NlSW52b2tlZCgpOw0KICAgICAgICByZXR1cm4gdGhpczsN\nCiAgICB9DQoNCiAgICBwdWJsaWMgTG9ja01vZGVUeXBlIGdldExvY2tNb2Rl\nKE9iamVjdCBlbnRpdHkpIHsNCiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZv\na2VkKCk7DQogICAgICAgIHJldHVybiBmcm9tTG9ja0xldmVsKF9icm9rZXIu\nZ2V0TG9ja0xldmVsKGVudGl0eSkpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2\nb2lkIGxvY2soT2JqZWN0IGVudGl0eSwgTG9ja01vZGVUeXBlIG1vZGUpIHsN\nCiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7DQogICAgICAgIF9i\ncm9rZXIubG9jayhlbnRpdHksIHRvTG9ja0xldmVsKG1vZGUpLCAtMSwgdGhp\ncyk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgbG9jayhPYmplY3QgZW50\naXR5KSB7DQogICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOw0KICAg\nICAgICBfYnJva2VyLmxvY2soZW50aXR5LCB0aGlzKTsNCiAgICB9DQoNCiAg\nICBwdWJsaWMgdm9pZCBsb2NrKE9iamVjdCBlbnRpdHksIExvY2tNb2RlVHlw\nZSBtb2RlLCBpbnQgdGltZW91dCkgew0KICAgICAgICBhc3NlcnROb3RDbG9z\nZUludm9rZWQoKTsNCiAgICAgICAgX2Jyb2tlci5sb2NrKGVudGl0eSwgdG9M\nb2NrTGV2ZWwobW9kZSksIHRpbWVvdXQsIHRoaXMpOw0KICAgIH0NCg0KICAg\nIHB1YmxpYyB2b2lkIGxvY2tBbGwoQ29sbGVjdGlvbiBlbnRpdGllcykgew0K\nICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsNCiAgICAgICAgX2Jy\nb2tlci5sb2NrQWxsKGVudGl0aWVzLCB0aGlzKTsNCiAgICB9DQoNCiAgICBw\ndWJsaWMgdm9pZCBsb2NrQWxsKENvbGxlY3Rpb24gZW50aXRpZXMsIExvY2tN\nb2RlVHlwZSBtb2RlLCBpbnQgdGltZW91dCkgew0KICAgICAgICBhc3NlcnRO\nb3RDbG9zZUludm9rZWQoKTsNCiAgICAgICAgX2Jyb2tlci5sb2NrQWxsKGVu\ndGl0aWVzLCB0b0xvY2tMZXZlbChtb2RlKSwgdGltZW91dCwgdGhpcyk7DQog\nICAgfQ0KDQogICAgcHVibGljIHZvaWQgbG9ja0FsbChPYmplY3QuLi4gZW50\naXRpZXMpIHsNCiAgICAgICAgbG9ja0FsbChBcnJheXMuYXNMaXN0KGVudGl0\naWVzKSk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgbG9ja0FsbChPYmpl\nY3RbXSBlbnRpdGllcywgTG9ja01vZGVUeXBlIG1vZGUsIGludCB0aW1lb3V0\nKSB7DQogICAgICAgIGxvY2tBbGwoQXJyYXlzLmFzTGlzdChlbnRpdGllcyks\nIG1vZGUsIHRpbWVvdXQpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFRy\nYW5zbGF0ZSBvdXIgaW50ZXJuYWwgbG9jayBsZXZlbCB0byBhIGphdmF4LnBl\ncnNpc3RlbmNlIGVudW0gdmFsdWUuDQogICAgICovDQogICAgc3RhdGljIExv\nY2tNb2RlVHlwZSBmcm9tTG9ja0xldmVsKGludCBsZXZlbCkgew0KICAgICAg\nICBpZiAobGV2ZWwgPCBMb2NrTGV2ZWxzLkxPQ0tfUkVBRCkNCiAgICAgICAg\nICAgIHJldHVybiBudWxsOw0KICAgICAgICBpZiAobGV2ZWwgPCBMb2NrTGV2\nZWxzLkxPQ0tfV1JJVEUpDQogICAgICAgICAgICByZXR1cm4gTG9ja01vZGVU\neXBlLlJFQUQ7DQogICAgICAgIHJldHVybiBMb2NrTW9kZVR5cGUuV1JJVEU7\nDQogICAgfQ0KDQogICAgLyoqDQogICAgICogVHJhbnNsYXRlIHRoZSBqYXZh\neC5wZXJzaXN0ZW5jZSBlbnVtIHZhbHVlIHRvIG91ciBpbnRlcm5hbCBsb2Nr\nIGxldmVsLg0KICAgICAqLw0KICAgIHN0YXRpYyBpbnQgdG9Mb2NrTGV2ZWwo\nTG9ja01vZGVUeXBlIG1vZGUpIHsNCiAgICAgICAgaWYgKG1vZGUgPT0gbnVs\nbCkNCiAgICAgICAgICAgIHJldHVybiBMb2NrTGV2ZWxzLkxPQ0tfTk9ORTsN\nCiAgICAgICAgaWYgKG1vZGUgPT0gTG9ja01vZGVUeXBlLlJFQUQpDQogICAg\nICAgICAgICByZXR1cm4gTG9ja0xldmVscy5MT0NLX1JFQUQ7DQogICAgICAg\nIGlmIChtb2RlID09IExvY2tNb2RlVHlwZS5XUklURSkNCiAgICAgICAgICAg\nIHJldHVybiBMb2NrTGV2ZWxzLkxPQ0tfV1JJVEU7DQogICAgICAgIHRocm93\nIG5ldyBBcmd1bWVudEV4Y2VwdGlvbihtb2RlLnRvU3RyaW5nKCksIG51bGws\nIG51bGwsIHRydWUpOw0KICAgIH0NCg0KICAgIHB1YmxpYyBib29sZWFuIGNh\nbmNlbEFsbCgpIHsNCiAgICAgICAgcmV0dXJuIF9icm9rZXIuY2FuY2VsQWxs\nKCk7DQogICAgfQ0KDQogICAgcHVibGljIE9iamVjdCBnZXRDb25uZWN0aW9u\nKCkgew0KICAgICAgICByZXR1cm4gX2Jyb2tlci5nZXRDb25uZWN0aW9uKCk7\nDQogICAgfQ0KDQogICAgcHVibGljIENvbGxlY3Rpb24gZ2V0TWFuYWdlZE9i\namVjdHMoKSB7DQogICAgICAgIHJldHVybiBfYnJva2VyLmdldE1hbmFnZWRP\nYmplY3RzKCk7DQogICAgfQ0KDQogICAgcHVibGljIENvbGxlY3Rpb24gZ2V0\nVHJhbnNhY3Rpb25hbE9iamVjdHMoKSB7DQogICAgICAgIHJldHVybiBfYnJv\na2VyLmdldFRyYW5zYWN0aW9uYWxPYmplY3RzKCk7DQogICAgfQ0KDQogICAg\ncHVibGljIENvbGxlY3Rpb24gZ2V0UGVuZGluZ1RyYW5zYWN0aW9uYWxPYmpl\nY3RzKCkgew0KICAgICAgICByZXR1cm4gX2Jyb2tlci5nZXRQZW5kaW5nVHJh\nbnNhY3Rpb25hbE9iamVjdHMoKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgQ29s\nbGVjdGlvbiBnZXREaXJ0eU9iamVjdHMoKSB7DQogICAgICAgIHJldHVybiBf\nYnJva2VyLmdldERpcnR5T2JqZWN0cygpOw0KICAgIH0NCg0KICAgIHB1Ymxp\nYyBib29sZWFuIGdldE9yZGVyRGlydHlPYmplY3RzKCkgew0KICAgICAgICBy\nZXR1cm4gX2Jyb2tlci5nZXRPcmRlckRpcnR5T2JqZWN0cygpOw0KICAgIH0N\nCg0KICAgIHB1YmxpYyB2b2lkIHNldE9yZGVyRGlydHlPYmplY3RzKGJvb2xl\nYW4gb3JkZXIpIHsNCiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7\nDQogICAgICAgIF9icm9rZXIuc2V0T3JkZXJEaXJ0eU9iamVjdHMob3JkZXIp\nOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIGRpcnR5Q2xhc3MoQ2xhc3Mg\nY2xzKSB7DQogICAgICAgIGFzc2VydE5vdENsb3NlSW52b2tlZCgpOw0KICAg\nICAgICBfYnJva2VyLmRpcnR5VHlwZShjbHMpOw0KICAgIH0NCg0KICAgIEBT\ndXBwcmVzc1dhcm5pbmdzKCJ1bmNoZWNrZWQiKQ0KICAgIHB1YmxpYyBDb2xs\nZWN0aW9uPENsYXNzPiBnZXRQZXJzaXN0ZWRDbGFzc2VzKCkgew0KICAgICAg\nICByZXR1cm4gKENvbGxlY3Rpb248Q2xhc3M+KSBfYnJva2VyLmdldFBlcnNp\nc3RlZFR5cGVzKCk7DQogICAgfQ0KDQogICAgQFN1cHByZXNzV2FybmluZ3Mo\nInVuY2hlY2tlZCIpDQogICAgcHVibGljIENvbGxlY3Rpb248Q2xhc3M+IGdl\ndFVwZGF0ZWRDbGFzc2VzKCkgew0KICAgICAgICByZXR1cm4gKENvbGxlY3Rp\nb248Q2xhc3M+KSBfYnJva2VyLmdldFVwZGF0ZWRUeXBlcygpOw0KICAgIH0N\nCg0KICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJ1bmNoZWNrZWQiKQ0KICAgIHB1\nYmxpYyBDb2xsZWN0aW9uPENsYXNzPiBnZXRSZW1vdmVkQ2xhc3NlcygpIHsN\nCiAgICAgICAgcmV0dXJuIChDb2xsZWN0aW9uPENsYXNzPikgX2Jyb2tlci5n\nZXREZWxldGVkVHlwZXMoKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgPFQ+IFQg\nY3JlYXRlSW5zdGFuY2UoQ2xhc3M8VD4gY2xzKSB7DQogICAgICAgIGFzc2Vy\ndE5vdENsb3NlSW52b2tlZCgpOw0KICAgICAgICByZXR1cm4gKFQpIF9icm9r\nZXIubmV3SW5zdGFuY2UoY2xzKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9p\nZCBjbG9zZSgpIHsNCiAgICAgICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7\nDQogICAgICAgIF9icm9rZXIuY2xvc2UoKTsNCiAgICB9DQoNCiAgICBwdWJs\naWMgYm9vbGVhbiBpc09wZW4oKSB7DQogICAgICAgIHJldHVybiAhX2Jyb2tl\nci5pc0Nsb3NlSW52b2tlZCgpOw0KICAgIH0NCg0KICAgIHB1YmxpYyB2b2lk\nIGRpcnR5KE9iamVjdCBvLCBTdHJpbmcgZmllbGQpIHsNCiAgICAgICAgYXNz\nZXJ0Tm90Q2xvc2VJbnZva2VkKCk7DQogICAgICAgIE9wZW5KUEFTdGF0ZU1h\nbmFnZXIgc20gPSBfYnJva2VyLmdldFN0YXRlTWFuYWdlcihvKTsNCiAgICAg\nICAgdHJ5IHsNCiAgICAgICAgICAgIGlmIChzbSAhPSBudWxsKQ0KICAgICAg\nICAgICAgICAgIHNtLmRpcnR5KGZpZWxkKTsNCiAgICAgICAgfSBjYXRjaCAo\nRXhjZXB0aW9uIGUpIHsNCiAgICAgICAgICAgIHRocm93IFBlcnNpc3RlbmNl\nRXhjZXB0aW9ucy50b1BlcnNpc3RlbmNlRXhjZXB0aW9uKGUpOw0KICAgICAg\nICB9DQogICAgfQ0KDQogICAgcHVibGljIE9iamVjdCBnZXRPYmplY3RJZChP\nYmplY3Qgbykgew0KICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsN\nCiAgICAgICAgcmV0dXJuIE9wZW5KUEFQZXJzaXN0ZW5jZS5mcm9tT3BlbkpQ\nQU9iamVjdElkKF9icm9rZXIuZ2V0T2JqZWN0SWQobykpOw0KICAgIH0NCg0K\nICAgIHB1YmxpYyBib29sZWFuIGlzRGlydHkoT2JqZWN0IG8pIHsNCiAgICAg\nICAgYXNzZXJ0Tm90Q2xvc2VJbnZva2VkKCk7DQogICAgICAgIHJldHVybiBf\nYnJva2VyLmlzRGlydHkobyk7DQogICAgfQ0KDQogICAgcHVibGljIGJvb2xl\nYW4gaXNUcmFuc2FjdGlvbmFsKE9iamVjdCBvKSB7DQogICAgICAgIGFzc2Vy\ndE5vdENsb3NlSW52b2tlZCgpOw0KICAgICAgICByZXR1cm4gX2Jyb2tlci5p\nc1RyYW5zYWN0aW9uYWwobyk7DQogICAgfQ0KDQogICAgcHVibGljIGJvb2xl\nYW4gaXNQZXJzaXN0ZW50KE9iamVjdCBvKSB7DQogICAgICAgIGFzc2VydE5v\ndENsb3NlSW52b2tlZCgpOw0KICAgICAgICByZXR1cm4gX2Jyb2tlci5pc1Bl\ncnNpc3RlbnQobyk7DQogICAgfQ0KDQogICAgcHVibGljIGJvb2xlYW4gaXNO\nZXdseVBlcnNpc3RlbnQoT2JqZWN0IG8pIHsNCiAgICAgICAgYXNzZXJ0Tm90\nQ2xvc2VJbnZva2VkKCk7DQogICAgICAgIHJldHVybiBfYnJva2VyLmlzTmV3\nKG8pOw0KICAgIH0NCg0KICAgIHB1YmxpYyBib29sZWFuIGlzUmVtb3ZlZChP\nYmplY3Qgbykgew0KICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsN\nCiAgICAgICAgcmV0dXJuIF9icm9rZXIuaXNEZWxldGVkKG8pOw0KICAgIH0N\nCg0KICAgIHB1YmxpYyBib29sZWFuIGlzRGV0YWNoZWQoT2JqZWN0IGVudGl0\neSkgew0KICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsNCiAgICAg\nICAgcmV0dXJuIF9icm9rZXIuaXNEZXRhY2hlZChlbnRpdHkpOw0KICAgIH0N\nCg0KICAgIHB1YmxpYyBPYmplY3QgZ2V0VmVyc2lvbihPYmplY3Qgbykgew0K\nICAgICAgICBhc3NlcnROb3RDbG9zZUludm9rZWQoKTsNCiAgICAgICAgcmV0\ndXJuIF9icm9rZXIuZ2V0VmVyc2lvbihvKTsNCiAgICB9DQoNCiAgICAvKioN\nCiAgICAgKiBUaHJvdyBhcHByb3ByaWF0ZSBleGNlcHRpb24gaWYgY2xvc2Ug\naGFzIGJlZW4gaW52b2tlZCBidXQgdGhlIGJyb2tlcg0KICAgICAqIGlzIHN0\naWxsIG9wZW4uICBXZSB0ZXN0IG9ubHkgZm9yIHRoaXMgYmVjYXVzZSBpZiB0\naGUgYnJva2VyIGlzIGFscmVhZHkNCiAgICAgKiBjbG9zZWQsIGl0IHdpbGwg\ndGhyb3cgaXRzIG93biBtb3JlIGluZm9ybWF0aXZlIGV4Y2VwdGlvbiB3aGVu\nIHdlIA0KICAgICAqIGRlbGVnYXRlIHRoZSBwZW5kaW5nIG9wZXJhdGlvbiB0\nbyBpdC4NCiAgICAgKi8NCiAgICB2b2lkIGFzc2VydE5vdENsb3NlSW52b2tl\nZCgpIHsNCiAgICAgICAgaWYgKCFfYnJva2VyLmlzQ2xvc2VkKCkgJiYgX2Jy\nb2tlci5pc0Nsb3NlSW52b2tlZCgpKQ0KICAgICAgICAgICAgdGhyb3cgbmV3\nIEludmFsaWRTdGF0ZUV4Y2VwdGlvbihfbG9jLmdldCgiY2xvc2UtaW52b2tl\nZCIpLCBudWxsLA0KICAgICAgICAgICAgICAgIG51bGwsIHRydWUpOw0KICAg\nIH0NCg0KICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vDQog\nICAgLy8gRmluZENhbGxiYWNrcyBpbXBsZW1lbnRhdGlvbg0KICAgIC8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vDQoNCiAgICBwdWJsaWMgT2Jq\nZWN0IHByb2Nlc3NBcmd1bWVudChPYmplY3QgYXJnKSB7DQogICAgICAgIHJl\ndHVybiBhcmc7DQogICAgfQ0KDQogICAgcHVibGljIE9iamVjdCBwcm9jZXNz\nUmV0dXJuKE9iamVjdCBvaWQsIE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20pIHsN\nCiAgICAgICAgcmV0dXJuIChzbSA9PSBudWxsIHx8IHNtLmlzRGVsZXRlZCgp\nKSA/IG51bGwgOiBzbS5nZXRNYW5hZ2VkSW5zdGFuY2UoKTsNCiAgICB9DQoN\nCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8NCiAgICAvLyBP\ncENhbGxiYWNrcyBpbXBsZW1lbnRhdGlvbg0KICAgIC8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLw0KDQogICAgcHVibGljIGludCBwcm9jZXNzQXJn\ndW1lbnQoaW50IG9wLCBPYmplY3Qgb2JqLCBPcGVuSlBBU3RhdGVNYW5hZ2Vy\nIHNtKSB7DQogICAgICAgIHN3aXRjaCAob3ApIHsNCiAgICAgICAgICAgIGNh\nc2UgT1BfREVMRVRFOg0KICAgICAgICAgICAgICAgIC8vIGNhc2NhZGUgdGhy\nb3VnaCBub24tcGVyc2lzdGVudCBub24tZGV0YWNoZWQgaW5zdGFuY2VzDQog\nICAgICAgICAgICAgICAgaWYgKHNtID09IG51bGwgJiYgIV9icm9rZXIuaXNE\nZXRhY2hlZChvYmopKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gQUNU\nX0NBU0NBREU7DQogICAgICAgICAgICAgICAgaWYgKHNtICE9IG51bGwgJiYg\nIXNtLmlzRGV0YWNoZWQoKSAmJiAhc20uaXNQZXJzaXN0ZW50KCkpDQogICAg\nICAgICAgICAgICAgICAgIHJldHVybiBBQ1RfQ0FTQ0FERTsNCiAgICAgICAg\nICAgICAgICAvLyBpZ25vcmUgZGVsZXRlZCBpbnN0YW5jZXMNCiAgICAgICAg\nICAgICAgICBpZiAoc20gIT0gbnVsbCAmJiBzbS5pc0RlbGV0ZWQoKSkNCiAg\nICAgICAgICAgICAgICAgICAgcmV0dXJuIEFDVF9OT05FOw0KICAgICAgICAg\nICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgY2FzZSBPUF9BVFRBQ0g6DQog\nICAgICAgICAgICAgICAgLy8gZGllIG9uIHJlbW92ZWQNCiAgICAgICAgICAg\nICAgICBpZiAoc20gIT0gbnVsbCAmJiBzbS5pc0RlbGV0ZWQoKSkNCiAgICAg\nICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFeGNlcHRpb24oX2xvYy5n\nZXQoInJlbW92ZWQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgRXhjZXB0\naW9ucy50b1N0cmluZyhvYmopKSkuc2V0RmFpbGVkT2JqZWN0KG9iaik7DQog\nICAgICAgICAgICAgICAgLy8gY2FzY2FkZSB0aHJvdWdoIG1hbmFnZWQgaW5z\ndGFuY2VzDQogICAgICAgICAgICAgICAgaWYgKHNtICE9IG51bGwgJiYgIXNt\nLmlzRGV0YWNoZWQoKSkNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFD\nVF9DQVNDQURFOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAg\nICAgY2FzZSBPUF9SRUZSRVNIOg0KICAgICAgICAgICAgICAgIC8vIGRpZSBv\nbiB1bm1hbmFnZWQgaW5zdGFuY2VzDQogICAgICAgICAgICAgICAgaWYgKHNt\nID09IG51bGwpDQogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBVc2Vy\nRXhjZXB0aW9uKF9sb2MuZ2V0KCJub3QtbWFuYWdlZCIsDQogICAgICAgICAg\nICAgICAgICAgICAgICBFeGNlcHRpb25zLnRvU3RyaW5nKG9iaikpKS5zZXRG\nYWlsZWRPYmplY3Qob2JqKTsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAg\nICAgICAgfQ0KICAgICAgICByZXR1cm4gQUNUX1JVTiB8IEFDVF9DQVNDQURF\nOw0KICAgIH0NCg0KICAgIHB1YmxpYyBpbnQgaGFzaENvZGUoKSB7DQogICAg\nICAgIHJldHVybiBfYnJva2VyLmhhc2hDb2RlKCk7DQogICAgfQ0KDQogICAg\ncHVibGljIGJvb2xlYW4gZXF1YWxzKE9iamVjdCBvdGhlcikgew0KICAgICAg\nICBpZiAob3RoZXIgPT0gdGhpcykNCiAgICAgICAgICAgIHJldHVybiB0cnVl\nOw0KICAgICAgICBpZiAoIShvdGhlciBpbnN0YW5jZW9mIEVudGl0eU1hbmFn\nZXJJbXBsKSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAg\ncmV0dXJuIF9icm9rZXIuZXF1YWxzKCgoRW50aXR5TWFuYWdlckltcGwpIG90\naGVyKS5fYnJva2VyKTsNCiAgICB9DQp9DQo=\n","encoding":"base64"}

