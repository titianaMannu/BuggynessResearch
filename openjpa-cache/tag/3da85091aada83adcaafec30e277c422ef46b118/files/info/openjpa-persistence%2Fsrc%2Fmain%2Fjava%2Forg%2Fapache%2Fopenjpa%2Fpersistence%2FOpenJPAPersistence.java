{"sha":"06ddc31369ae7b3e5773f74237891c944b95cd7e","node_id":"MDQ6QmxvYjIwNjM2NDowNmRkYzMxMzY5YWU3YjNlNTc3M2Y3NDIzNzg5MWM5NDRiOTVjZDdl","size":17246,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/06ddc31369ae7b3e5773f74237891c944b95cd7e","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2U7CgppbXBv\ncnQgamF2YS51dGlsLkFycmF5TGlzdDsKaW1wb3J0IGphdmEudXRpbC5Db2xs\nZWN0aW9uOwppbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9yOwppbXBvcnQgamF2\nYS51dGlsLk1hcDsKaW1wb3J0IGphdmF4Lm5hbWluZy5Db250ZXh0OwppbXBv\ncnQgamF2YXgubmFtaW5nLkluaXRpYWxDb250ZXh0OwppbXBvcnQgamF2YXgu\nbmFtaW5nLk5hbWluZ0V4Y2VwdGlvbjsKaW1wb3J0IGphdmF4LnBlcnNpc3Rl\nbmNlLkVudGl0eU1hbmFnZXI7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5F\nbnRpdHlNYW5hZ2VyRmFjdG9yeTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNl\nLlBlcnNpc3RlbmNlOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuUXVlcnk7\nCmltcG9ydCBqYXZheC5ybWkuUG9ydGFibGVSZW1vdGVPYmplY3Q7CgppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmVuaGFuY2UuUGVyc2lzdGVuY2VDYXBh\nYmxlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5Cb290c3Ry\nYXA7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkJyb2tlcjsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuQnJva2VyRmFjdG9y\neTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5Db25maWd1\ncmF0aW9uUHJvdmlkZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGli\nLnV0aWwuTG9jYWxpemVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1l\ndGEuQ2xhc3NNZXRhRGF0YTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51\ndGlsLkJ5dGVJZDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLkNo\nYXJJZDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLkRvdWJsZUlk\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuRmxvYXRJZDsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLklkOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnV0aWwuSW1wbEhlbHBlcjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS51dGlsLkludElkOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLnV0aWwuTG9uZ0lkOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0\naWwuT2JqZWN0SWQ7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5P\ncGVuSlBBSWQ7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5TaG9y\ndElkOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuU3RyaW5nSWQ7\nCgovKioKICogU3RhdGljIGhlbHBlciBtZXRob2QgZm9yIEpQQSB1c2Vycywg\naW5jbHVkaW5nIHN3aXRjaGluZwogKiBiZXR3ZWVuIE9wZW5KUEEgbmF0aXZl\nIGFuZCBKYXZhIFBlcnNpc3RlbmNlIEFQSXMuCiAqCiAqIEBhdXRob3IgQWJl\nIFdoaXRlCiAqIEBwdWJsaXNoZWQKICogQHNpbmNlIDAuNC4wCiAqLwpwdWJs\naWMgY2xhc3MgT3BlbkpQQVBlcnNpc3RlbmNlCiAgICBleHRlbmRzIFBlcnNp\nc3RlbmNlIHsKCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBFTV9L\nRVkgPQogICAgICAgICJvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uu\nRW50aXR5TWFuYWdlciI7CiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmlu\nZyBFTUZfS0VZID0KICAgICAgICAib3JnLmFwYWNoZS5vcGVuanBhLnBlcnNp\nc3RlbmNlLkVudGl0eU1hbmFnZXJGYWN0b3J5IjsKCiAgICBwcml2YXRlIHN0\nYXRpYyBMb2NhbGl6ZXIgX2xvYyA9CiAgICAgICAgTG9jYWxpemVyLmZvclBh\nY2thZ2UoT3BlbkpQQVBlcnNpc3RlbmNlLmNsYXNzKTsKCiAgICAKICAgIHB1\nYmxpYyBzdGF0aWMgT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5IHRvRW50\naXR5TWFuYWdlckZhY3RvcnkKICAgICAgIChCcm9rZXJGYWN0b3J5IGZhY3Rv\ncnkpIHsKICAgICAgICBpZiAoZmFjdG9yeSA9PSBudWxsKQogICAgICAgICAg\nICByZXR1cm4gbnVsbDsKCiAgICAgICAgZmFjdG9yeS5sb2NrKCk7CiAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0\nb3J5IGVtZiA9IChPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnkpCiAgICAg\nICAgICAgICAgICBmYWN0b3J5LmdldFVzZXJPYmplY3QoRU1GX0tFWSk7CiAg\nICAgICAgICAgIGlmIChlbWYgPT0gbnVsbCkgewogICAgICAgICAgICAgICAg\nZW1mID0gRW50aXR5TWFuYWdlckZhY3RvcnlWYWx1ZS5uZXdGYWN0b3J5KGZh\nY3RvcnkpOwogICAgICAgICAgICAgICAgZmFjdG9yeS5wdXRVc2VyT2JqZWN0\nKEVNRl9LRVksIGVtZik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0\ndXJuIGVtZjsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAg\nICAgICAgICB0aHJvdyBQZXJzaXN0ZW5jZUV4Y2VwdGlvbnMudG9QZXJzaXN0\nZW5jZUV4Y2VwdGlvbihlKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAg\nICAgICBmYWN0b3J5LnVubG9jaygpOwogICAgICAgIH0KICAgIH0KICAgIAog\nICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIHVuZGVybHlpbmcgYnJva2VyIGZh\nY3RvcnkgZm9yIHRoZSBnaXZlbiBwZXJzaXN0ZW5jZSBtYW5hZ2VyCiAgICAg\nKiBmYWN0b3J5IGZhY2FkZS4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBC\ncm9rZXJGYWN0b3J5IHRvQnJva2VyRmFjdG9yeShFbnRpdHlNYW5hZ2VyRmFj\ndG9yeSBlbWYpIHsKICAgICAgICBpZiAoZW1mID09IG51bGwpCiAgICAgICAg\nICAgIHJldHVybiBudWxsOwogICAgICAgIGlmICghKGVtZiBpbnN0YW5jZW9m\nIEVudGl0eU1hbmFnZXJGYWN0b3J5SW1wbCkpIHsKICAgICAgICAgICAgQ2xh\nc3MgYyA9IGVtZi5nZXRDbGFzcygpOwogICAgICAgICAgICB0cnkgewogICAg\nICAgICAgICAgICAgLy8gZWl0aGVyIGNhc3QgaGVyZSBtYXkgZmFpbAogICAg\nICAgICAgICAgICAgZW1mID0gKEVudGl0eU1hbmFnZXJGYWN0b3J5SW1wbCkg\nKChPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnkpCiAgICAgICAgICAgICAg\nICAgICAgZW1mKS5nZXRVc2VyT2JqZWN0KEVNRl9LRVkpOwogICAgICAgICAg\nICB9IGNhdGNoIChDbGFzc0Nhc3RFeGNlcHRpb24gY2NlKSB7CiAgICAgICAg\nICAgICAgICB0aHJvdyBuZXcgQXJndW1lbnRFeGNlcHRpb24oX2xvYy5nZXQK\nICAgICAgICAgICAgICAgICAgICAoImNhbnQtY29udmVydC1icm9rZXJmYWN0\nb3J5IiwgYyksIG51bGwsIG51bGwsIGZhbHNlKTsKICAgICAgICAgICAgfQog\nICAgICAgIH0KICAgICAgICByZXR1cm4gKChFbnRpdHlNYW5hZ2VyRmFjdG9y\neUltcGwpIGVtZikuZ2V0QnJva2VyRmFjdG9yeSgpOwogICAgfQoKICAgIC8q\nKgogICAgICogUmV0dXJuIGEgcGVyc2lzdGVuY2UgbWFuYWdlciBmYWNhZGUg\ndG8gdGhlIGdpdmVuIGJyb2tlciByZXRhaW5pbmcKICAgICAqIHByZXZpb3Vz\nbHkgYXNzb2NpYXRlZCBwZXJzaXN0ZW5jZSBjb250ZXh0IHR5cGUuCiAgICAg\nKi8KICAgIHB1YmxpYyBzdGF0aWMgT3BlbkpQQUVudGl0eU1hbmFnZXIgdG9F\nbnRpdHlNYW5hZ2VyKEJyb2tlciBicm9rZXIpIHsKICAgICAgICBpZiAoYnJv\na2VyID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBudWxsOwoKICAgICAg\nICBicm9rZXIubG9jaygpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyIGVtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2Vy\nKQogICAgICAgICAgICAgICAgYnJva2VyLmdldFVzZXJPYmplY3QoRU1fS0VZ\nKTsKICAgICAgICAgICAgaWYgKGVtID09IG51bGwpIHsKICAgICAgICAgICAg\nICAgIEVudGl0eU1hbmFnZXJGYWN0b3J5SW1wbCBlbWYgPSAoRW50aXR5TWFu\nYWdlckZhY3RvcnlJbXBsKQogICAgICAgICAgICAgICAgICAgIHRvRW50aXR5\nTWFuYWdlckZhY3RvcnkoYnJva2VyLmdldEJyb2tlckZhY3RvcnkoKSk7CiAg\nICAgICAgICAgICAgICBlbSA9IGVtZi5uZXdFbnRpdHlNYW5hZ2VySW1wbChi\ncm9rZXIpOwogICAgICAgICAgICAgICAgYnJva2VyLnB1dFVzZXJPYmplY3Qo\nRU1fS0VZLCBlbSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJu\nIGVtOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAg\nICAgIHRocm93IFBlcnNpc3RlbmNlRXhjZXB0aW9ucy50b1BlcnNpc3RlbmNl\nRXhjZXB0aW9uKGUpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAg\nIGJyb2tlci51bmxvY2soKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAg\nICAgKiBSZXR1cm4gdGhlIHVuZGVybHlpbmcgYnJva2VyIGZvciB0aGUgZ2l2\nZW4gZW50aXR5IG1hbmFnZXIgZmFjYWRlLgogICAgICovCiAgICBwdWJsaWMg\nc3RhdGljIEJyb2tlciB0b0Jyb2tlcihFbnRpdHlNYW5hZ2VyIGVtKSB7CiAg\nICAgICAgaWYgKGVtID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBudWxs\nOwogICAgICAgIGlmICghKGVtIGluc3RhbmNlb2YgRW50aXR5TWFuYWdlcklt\ncGwpKSB7CiAgICAgICAgICAgIENsYXNzIGMgPSBlbS5nZXRDbGFzcygpOwog\nICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgLy8gZWl0aGVyIGNh\nc3QgaGVyZSBtYXkgZmFpbAogICAgICAgICAgICAgICAgZW0gPSAoRW50aXR5\nTWFuYWdlckltcGwpICgoT3BlbkpQQUVudGl0eU1hbmFnZXIpIGVtKS4KICAg\nICAgICAgICAgICAgICAgICBnZXRVc2VyT2JqZWN0KEVNX0tFWSk7CiAgICAg\nICAgICAgIH0gY2F0Y2ggKENsYXNzQ2FzdEV4Y2VwdGlvbiBjY2UpIHsKICAg\nICAgICAgICAgICAgIHRocm93IG5ldyBBcmd1bWVudEV4Y2VwdGlvbihfbG9j\nLmdldCgiY2FudC1jb252ZXJ0LWJyb2tlciIsIGMpLAogICAgICAgICAgICAg\nICAgICAgIG51bGwsIG51bGwsIGZhbHNlKTsKICAgICAgICAgICAgfQogICAg\nICAgIH0KICAgICAgICByZXR1cm4gKChFbnRpdHlNYW5hZ2VySW1wbCkgZW0p\nLmdldEJyb2tlcigpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRo\nZSBPcGVuSlBBIGZhY2FkZSB0byB0aGUgZ2l2ZW4gZW50aXR5IG1hbmFnZXIg\nZmFjdG9yeS4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBPcGVuSlBBRW50\naXR5TWFuYWdlckZhY3RvcnkgY2FzdChFbnRpdHlNYW5hZ2VyRmFjdG9yeSBl\nbWYpIHsKICAgICAgICByZXR1cm4gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFj\ndG9yeSkgZW1mOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBP\ncGVuSlBBIGZhY2FkZSB0byB0aGUgZ2l2ZW4gZW50aXR5IG1hbmFnZXIuCiAg\nICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgT3BlbkpQQUVudGl0eU1hbmFnZXIg\nY2FzdChFbnRpdHlNYW5hZ2VyIGVtKSB7CiAgICAgICAgaWYgKGVtIGluc3Rh\nbmNlb2YgT3BlbkpQQUVudGl0eU1hbmFnZXIpCiAgICAgICAgICAgIHJldHVy\nbiAoT3BlbkpQQUVudGl0eU1hbmFnZXIpIGVtOwogICAgICAgIHJldHVybiAo\nT3BlbkpQQUVudGl0eU1hbmFnZXIpIGVtLmdldERlbGVnYXRlKCk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIE9wZW5KUEEgZmFjYWRlIHRv\nIHRoZSBnaXZlbiBxdWVyeS4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBP\ncGVuSlBBUXVlcnkgY2FzdChRdWVyeSBxKSB7CiAgICAgICAgcmV0dXJuIChP\ncGVuSlBBUXVlcnkpIHE7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5z\nIHRoZSB7QGxpbmsgT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5fSBzcGVj\naWZpZWQgYnkKICAgICAqIHlvdXIgT3BlbkpQQSBkZWZhdWx0cy4gVGhpcyBt\nZXRob2Qgd2lsbCByZXR1cm4gdGhlIHNhbWUgbG9naWNhbCBmYWN0b3J5CiAg\nICAgKiBmb3IgZWFjaCBpbnZvY2F0aW9uLgogICAgICovCiAgICBwdWJsaWMg\nc3RhdGljIE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeSBnZXRFbnRpdHlN\nYW5hZ2VyRmFjdG9yeSgpIHsKICAgICAgICByZXR1cm4gZ2V0RW50aXR5TWFu\nYWdlckZhY3RvcnkobnVsbCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1\ncm5zIHRoZSB7QGxpbmsgT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5fSBz\ncGVjaWZpZWQgYnkKICAgICAqIHlvdXIgT3BlbkpQQSBkZWZhdWx0cywgdXNp\nbmcgPGNvZGU+bWFwPC9jb2RlPiBhcyBvdmVycmlkZXMuIFRoaXMgbWV0aG9k\nCiAgICAgKiB3aWxsIHJldHVybiB0aGUgc2FtZSBsb2dpY2FsIGZhY3Rvcnkg\nZm9yIGludm9jYXRpb25zIHdpdGggdGhlIHNhbWUKICAgICAqIG92ZXJyaWRl\ncy4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBPcGVuSlBBRW50aXR5TWFu\nYWdlckZhY3RvcnkgZ2V0RW50aXR5TWFuYWdlckZhY3RvcnkoTWFwIG1hcCkg\newogICAgICAgIENvbmZpZ3VyYXRpb25Qcm92aWRlciBjcCA9IG5ldyBQZXJz\naXN0ZW5jZVByb2R1Y3REZXJpdmF0aW9uLgogICAgICAgICAgICBDb25maWd1\ncmF0aW9uUHJvdmlkZXJJbXBsKG1hcCk7CiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgcmV0dXJuIHRvRW50aXR5TWFuYWdlckZhY3RvcnkoQm9vdHN0cmFw\nLmdldEJyb2tlckZhY3RvcnkoY3AsIG51bGwpKTsKICAgICAgICB9IGNhdGNo\nIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICB0aHJvdyBQZXJzaXN0ZW5j\nZUV4Y2VwdGlvbnMudG9QZXJzaXN0ZW5jZUV4Y2VwdGlvbihlKTsKICAgICAg\nICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGEgbmV3IHtAbGlu\nayBPcGVuSlBBRW50aXR5TWFuYWdlckZhY3Rvcnl9IHNwZWNpZmllZCBieQog\nICAgICogPGNvZGU+bmFtZTwvY29kZT4gaW4gYW4gWE1MIGNvbmZpZ3VyYXRp\nb24gZmlsZSBhdCB0aGUgcmVzb3VyY2UgbG9jYXRpb24KICAgICAqIDxjb2Rl\nPnJlc291cmNlPC9jb2RlPi4gSWYgPGNvZGU+bmFtZTwvY29kZT4gaXMgPGNv\nZGU+bnVsbDwvY29kZT4sIHVzZXMKICAgICAqIHRoZSBmaXJzdCByZXNvdXJj\nZSBmb3VuZCBpbiB0aGUgc3BlY2lmaWVkIGxvY2F0aW9uLCByZWdhcmRsZXNz\nIG9mIHRoZQogICAgICogbmFtZSBzcGVjaWZpZWQgaW4gdGhlIFhNTCByZXNv\ndXJjZSBvciB0aGUgbmFtZSBvZiB0aGUgamFyIHRoYXQgdGhlCiAgICAgKiBy\nZXNvdXJjZSBpcyBjb250YWluZWQgaW4uIElmIDxjb2RlPnJlc291cmNlPC9j\nb2RlPiBpcyA8Y29kZT5udWxsPC9jb2RlPiwKICAgICAqIHVzZXMgdGhlIHNw\nZWMtZGVmaW5lZCA8Y29kZT5NRVRBLUlORi9wZXJzaXN0ZW5jZS54bWw8L2Nv\nZGU+IHJlc291cmNlLgogICAgICogIFRoaXMgbWV0aG9kIG9ubHkgcmVzb2x2\nZXMge0BsaW5rIE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeX0gaW5zdGFu\nY2VzLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIE9wZW5KUEFFbnRpdHlN\nYW5hZ2VyRmFjdG9yeSBjcmVhdGVFbnRpdHlNYW5hZ2VyRmFjdG9yeQogICAg\nICAgIChTdHJpbmcgbmFtZSwgU3RyaW5nIHJlc291cmNlKSB7CiAgICAgICAg\ncmV0dXJuIGNyZWF0ZUVudGl0eU1hbmFnZXJGYWN0b3J5KG5hbWUsIHJlc291\ncmNlLCBudWxsKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYSBu\nZXcge0BsaW5rIE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeX0gc3BlY2lm\naWVkIGJ5CiAgICAgKiA8Y29kZT5uYW1lPC9jb2RlPiBpbiBhbiBYTUwgY29u\nZmlndXJhdGlvbiBmaWxlIGF0IHRoZSByZXNvdXJjZSBsb2NhdGlvbgogICAg\nICogPGNvZGU+cmVzb3VyY2U8L2NvZGU+LCBhcHBseWluZyB0aGUgcHJvcGVy\ndGllcyBzcGVjaWZpZWQgaW4KICAgICAqIDxjb2RlPm1hcDwvY29kZT4gYXMg\nb3ZlcnJpZGVzLiBJZiA8Y29kZT5uYW1lPC9jb2RlPiBpcwogICAgICogPGNv\nZGU+bnVsbDwvY29kZT4sIHVzZXMgdGhlIGZpcnN0IHJlc291cmNlIGZvdW5k\nIGluIHRoZSBzcGVjaWZpZWQKICAgICAqIGxvY2F0aW9uLCByZWdhcmRsZXNz\nIG9mIHRoZSBuYW1lIHNwZWNpZmllZCBpbiB0aGUgWE1MIHJlc291cmNlIG9y\nIHRoZQogICAgICogbmFtZSBvZiB0aGUgamFyIHRoYXQgdGhlIHJlc291cmNl\nIGlzIGNvbnRhaW5lZCBpbi4KICAgICAqIElmIDxjb2RlPnJlc291cmNlPC9j\nb2RlPiBpcyA8Y29kZT5udWxsPC9jb2RlPiwgdXNlcyB0aGUgc3BlYy1kZWZp\nbmVkCiAgICAgKiA8Y29kZT5NRVRBLUlORi9wZXJzaXN0ZW5jZS54bWw8L2Nv\nZGU+IHJlc291cmNlLgogICAgICogIFRoaXMgbWV0aG9kIG9ubHkgcmVzb2x2\nZXMge0BsaW5rIE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeX0gaW5zdGFu\nY2VzLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIE9wZW5KUEFFbnRpdHlN\nYW5hZ2VyRmFjdG9yeSBjcmVhdGVFbnRpdHlNYW5hZ2VyRmFjdG9yeQogICAg\nICAgIChTdHJpbmcgbmFtZSwgU3RyaW5nIHJlc291cmNlLCBNYXAgbWFwKSB7\nCiAgICAgICAgcmV0dXJuIChPcGVuSlBBRW50aXR5TWFuYWdlckZhY3Rvcnkp\nIG5ldyBQZXJzaXN0ZW5jZVByb3ZpZGVySW1wbCgpLgogICAgICAgICAgICBj\ncmVhdGVFbnRpdHlNYW5hZ2VyRmFjdG9yeShuYW1lLCByZXNvdXJjZSwgbWFw\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIHtAbGluayBF\nbnRpdHlNYW5hZ2VyRmFjdG9yeX0gYXQgdGhlIEpOREkgbG9jYXRpb24gc3Bl\nY2lmaWVkCiAgICAgKiBieSA8Y29kZT5qbmRpTG9jYXRpb248L2NvZGU+IGlu\nIHRoZSBjb250ZXh0IDxjb2RlPmNvbnRleHQ8L2NvZGU+LiBJZgogICAgICog\nPGNvZGU+Y29udGV4dDwvY29kZT4gaXMgPGNvZGU+bnVsbDwvY29kZT4sCiAg\nICAgKiA8Y29kZT5uZXcgSW5pdGlhbENvbnRleHQoKTwvY29kZT4gd2lsbCBi\nZSB1c2VkLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyRmFjdG9yeSBjcmVhdGVFbnRpdHlNYW5hZ2VyRmFjdG9yeQog\nICAgICAgIChTdHJpbmcgam5kaUxvY2F0aW9uLCBDb250ZXh0IGNvbnRleHQp\nIHsKICAgICAgICBpZiAoam5kaUxvY2F0aW9uID09IG51bGwpCiAgICAgICAg\nICAgIHRocm93IG5ldyBOdWxsUG9pbnRlckV4Y2VwdGlvbigiam5kaUxvY2F0\naW9uID09IG51bGwiKTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYg\nKGNvbnRleHQgPT0gbnVsbCkKICAgICAgICAgICAgICAgIGNvbnRleHQgPSBu\nZXcgSW5pdGlhbENvbnRleHQoKTsKCiAgICAgICAgICAgIE9iamVjdCBvID0g\nY29udGV4dC5sb29rdXAoam5kaUxvY2F0aW9uKTsKICAgICAgICAgICAgcmV0\ndXJuIChPcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnkpIFBvcnRhYmxlUmVt\nb3RlT2JqZWN0Lm5hcnJvdyhvLAogICAgICAgICAgICAgICAgT3BlbkpQQUVu\ndGl0eU1hbmFnZXJGYWN0b3J5LmNsYXNzKTsKICAgICAgICB9IGNhdGNoIChO\nYW1pbmdFeGNlcHRpb24gbmUpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEFy\nZ3VtZW50RXhjZXB0aW9uKF9sb2MuZ2V0KCJuYW1pbmctZXhjZXB0aW9uIiwK\nICAgICAgICAgICAgICAgIGpuZGlMb2NhdGlvbiksIG5ldyBUaHJvd2FibGVb\nXXsgbmUgfSwgbnVsbCwgdHJ1ZSk7CiAgICAgICAgfQogICAgfQoKICAgIC8q\nKgogICAgICogUmV0dXJuIHRoZSBlbnRpdHkgbWFuYWdlciBmb3IgdGhlIGdp\ndmVuIG9iamVjdCwgaWYgb25lIGNhbiBiZSBkZXRlcm1pbmVkCiAgICAgKiBm\ncm9tIGp1c3QgdGhlIG9iamVjdCBhbG9uZS4gVGhpcyBtZXRob2Qgd2lsbCBz\ndWNjZWVkIGZvciBpbnN0YW5jZXMgdGhhdAogICAgICogYXJlIGVuaGFuY2Vk\nLCB0aGF0IHdlcmUgbG9hZGVkIGZyb20gdGhlIGRhdGFiYXNlIChyYXRoZXIg\ndGhhbgogICAgICogYmVpbmcgY29uc3RydWN0ZWQgd2l0aCA8Y29kZT5uZXc8\nL2NvZGU+KSwgb3IgdGhhdCB3ZXJlIGNyZWF0ZWQgdGhyb3VnaAogICAgICog\ne0BsaW5rIE9wZW5KUEFFbnRpdHlNYW5hZ2VyI2NyZWF0ZUluc3RhbmNlfS4K\nICAgICAqLwogICAgcHVibGljIHN0YXRpYyBPcGVuSlBBRW50aXR5TWFuYWdl\nciBnZXRFbnRpdHlNYW5hZ2VyKE9iamVjdCBvKSB7CiAgICAgICAgdHJ5IHsK\nICAgICAgICAgICAgaWYgKG8gaW5zdGFuY2VvZiBQZXJzaXN0ZW5jZUNhcGFi\nbGUpCiAgICAgICAgICAgICAgICByZXR1cm4gdG9FbnRpdHlNYW5hZ2VyKChC\ncm9rZXIpICgoUGVyc2lzdGVuY2VDYXBhYmxlKSBvKS4KICAgICAgICAgICAg\nICAgICAgICBwY0dldEdlbmVyaWNDb250ZXh0KCkpOwogICAgICAgICAgICBy\nZXR1cm4gbnVsbDsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewog\nICAgICAgICAgICB0aHJvdyBQZXJzaXN0ZW5jZUV4Y2VwdGlvbnMudG9QZXJz\naXN0ZW5jZUV4Y2VwdGlvbihlKTsKICAgICAgICB9CiAgICB9CgogICAgLyoq\nCiAgICAgKiBSZXR1cm5zIHRoZSB7QGxpbmsgQ2xhc3NNZXRhRGF0YX0gYXNz\nb2NpYXRlZCB3aXRoIHRoZQogICAgICogcGVyc2lzdGVudCBvYmplY3QgPGNv\nZGU+bzwvY29kZT4uCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgQ2xhc3NN\nZXRhRGF0YSBnZXRNZXRhRGF0YShPYmplY3QgbykgewogICAgICAgIGlmIChv\nID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIEVu\ndGl0eU1hbmFnZXIgZW0gPSBnZXRFbnRpdHlNYW5hZ2VyKG8pOwogICAgICAg\nIHJldHVybiAoZW0gPT0gbnVsbCkgPyBudWxsIDogZ2V0TWV0YURhdGEoZW0s\nIG8uZ2V0Q2xhc3MoKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5z\nIHRoZSB7QGxpbmsgQ2xhc3NNZXRhRGF0YX0gYXNzb2NpYXRlZCB3aXRoIHRo\nZQogICAgICogcGVyc2lzdGVudCB0eXBlIDxjb2RlPmNsczwvY29kZT4uCiAg\nICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgQ2xhc3NNZXRhRGF0YSBnZXRNZXRh\nRGF0YShFbnRpdHlNYW5hZ2VyIGVtLCBDbGFzcyBjbHMpIHsKICAgICAgICBp\nZiAoZW0gPT0gbnVsbCkKICAgICAgICAgICAgdGhyb3cgbmV3IE51bGxQb2lu\ndGVyRXhjZXB0aW9uKCJlbSA9PSBudWxsIik7CgogICAgICAgIE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyIGtlbSA9IGNhc3QoZW0pOwogICAgICAgIHRyeSB7CiAg\nICAgICAgICAgIHJldHVybiBrZW0uZ2V0Q29uZmlndXJhdGlvbigpLmdldE1l\ndGFEYXRhUmVwb3NpdG9yeUluc3RhbmNlKCkuCiAgICAgICAgICAgICAgICBn\nZXRNZXRhRGF0YShjbHMsIGtlbS5nZXRDbGFzc0xvYWRlcigpLCBmYWxzZSk7\nCiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAg\ndGhyb3cgUGVyc2lzdGVuY2VFeGNlcHRpb25zLnRvUGVyc2lzdGVuY2VFeGNl\ncHRpb24oZSk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogUmV0\ndXJucyB0aGUge0BsaW5rIENsYXNzTWV0YURhdGF9IGFzc29jaWF0ZWQgd2l0\naCB0aGUKICAgICAqIHBlcnNpc3RlbnQgdHlwZSA8Y29kZT5jbHM8L2NvZGU+\nLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIENsYXNzTWV0YURhdGEgZ2V0\nTWV0YURhdGEoRW50aXR5TWFuYWdlckZhY3RvcnkgZW1mLAogICAgICAgIENs\nYXNzIGNscykgewogICAgICAgIGlmIChlbWYgPT0gbnVsbCkKICAgICAgICAg\nICAgdGhyb3cgbmV3IE51bGxQb2ludGVyRXhjZXB0aW9uKCJlbWYgPT0gbnVs\nbCIpOwoKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlckZhY3Rvcnkga2Vt\nZiA9IGNhc3QoZW1mKTsKICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1\ncm4ga2VtZi5nZXRDb25maWd1cmF0aW9uKCkuZ2V0TWV0YURhdGFSZXBvc2l0\nb3J5SW5zdGFuY2UoKS4KICAgICAgICAgICAgICAgIGdldE1ldGFEYXRhKGNs\ncywgbnVsbCwgZmFsc2UpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBl\nKSB7CiAgICAgICAgICAgIHRocm93IFBlcnNpc3RlbmNlRXhjZXB0aW9ucy50\nb1BlcnNpc3RlbmNlRXhjZXB0aW9uKGUpOwogICAgICAgIH0KICAgIH0KCiAg\nICAvKioKICAgICAqIENsb3NlIHRoZSBnaXZlbiByZXNvdXJjZS4gVGhlIHJl\nc291cmNlIGNhbiBiZSBhbiBleHRlbnQgaXRlcmF0b3IsCiAgICAgKiBxdWVy\neSByZXN1bHQsIGxhcmdlIHJlc3VsdCBzZXQgcmVsYXRpb24sIG9yIGFueSBj\nbG9zZWFibGUgT3BlbkpQQQogICAgICogY29tcG9uZW50LgogICAgICovCiAg\nICBwdWJsaWMgc3RhdGljIHZvaWQgY2xvc2UoT2JqZWN0IG8pIHsKICAgICAg\nICB0cnkgewogICAgICAgICAgICBJbXBsSGVscGVyLmNsb3NlKG8pOwogICAg\nICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIHRocm93\nIFBlcnNpc3RlbmNlRXhjZXB0aW9ucy50b1BlcnNpc3RlbmNlRXhjZXB0aW9u\nKGUpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMg\ndHJ1ZSBpZiB0aGUgc3BlY2lmaWVkIGNsYXNzIGlzIGFuIGVudGl0eSBvciBl\nbWJlZGRhYmxlIHR5cGUuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgYm9v\nbGVhbiBpc01hbmFnZWRUeXBlKEVudGl0eU1hbmFnZXIgZW0sIENsYXNzIGNs\ncykgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBJbXBsSGVs\ncGVyLmlzTWFuYWdlZFR5cGUoY2xzKTsKICAgICAgICB9IGNhdGNoIChFeGNl\ncHRpb24gZSkgewogICAgICAgICAgICB0aHJvdyBQZXJzaXN0ZW5jZUV4Y2Vw\ndGlvbnMudG9QZXJzaXN0ZW5jZUV4Y2VwdGlvbihlKTsKICAgICAgICB9CiAg\nICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHNwZWNp\nZmllZCBjbGFzcyBpcyBhbiBlbnRpdHkgb3IgZW1iZWRkYWJsZSB0eXBlLgog\nICAgICovCiAgICBwdWJsaWMgc3RhdGljIGJvb2xlYW4gaXNNYW5hZ2VkVHlw\nZShFbnRpdHlNYW5hZ2VyRmFjdG9yeSBlbWYsIENsYXNzIGNscykgewogICAg\nICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBJbXBsSGVscGVyLmlzTWFu\nYWdlZFR5cGUoY2xzKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkg\newogICAgICAgICAgICB0aHJvdyBQZXJzaXN0ZW5jZUV4Y2VwdGlvbnMudG9Q\nZXJzaXN0ZW5jZUV4Y2VwdGlvbihlKTsKICAgICAgICB9CiAgICB9CgogICAg\nLyoqCiAgICAgKiBUcmFuc2xhdGUgZnJvbSBhIE9wZW5KUEEgaWRlbnRpdHkg\nb2JqZWN0IHRvIGEgUGVyc2lzdGVuY2Ugb25lLgogICAgICovCiAgICBwdWJs\naWMgc3RhdGljIE9iamVjdCBmcm9tT3BlbkpQQU9iamVjdElkKE9iamVjdCBv\naWQpIHsKICAgICAgICBpZiAob2lkIGluc3RhbmNlb2YgT3BlbkpQQUlkKQog\nICAgICAgICAgICByZXR1cm4gKChPcGVuSlBBSWQpIG9pZCkuZ2V0SWRPYmpl\nY3QoKTsKICAgICAgICByZXR1cm4gb2lkOwogICAgfQoKICAgIC8qKgogICAg\nICogVHJhbnNsYXRlIGZyb20gYSBQZXJzaXN0ZW5jZSBpZGVudGl0eSBvYmpl\nY3QgdG8gYSBPcGVuSlBBIG9uZS4KICAgICAqLwogICAgcHVibGljIHN0YXRp\nYyBPYmplY3QgdG9PcGVuSlBBT2JqZWN0SWQoQ2xhc3NNZXRhRGF0YSBtZXRh\nLCBPYmplY3Qgb2lkKSB7CiAgICAgICAgaWYgKG9pZCA9PSBudWxsIHx8IG1l\ndGEgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CgogICAgICAg\nIENsYXNzIGNscyA9IG1ldGEuZ2V0RGVzY3JpYmVkVHlwZSgpOwogICAgICAg\nIGlmIChtZXRhLmdldElkZW50aXR5VHlwZSgpID09IENsYXNzTWV0YURhdGEu\nSURfREFUQVNUT1JFKQogICAgICAgICAgICByZXR1cm4gbmV3IElkKGNscywg\nKChOdW1iZXIpIG9pZCkubG9uZ1ZhbHVlKCkpOwoKICAgICAgICBpZiAob2lk\nIGluc3RhbmNlb2YgQnl0ZSkKICAgICAgICAgICAgcmV0dXJuIG5ldyBCeXRl\nSWQoY2xzLCAoQnl0ZSkgb2lkKTsKICAgICAgICBpZiAob2lkIGluc3RhbmNl\nb2YgQ2hhcmFjdGVyKQogICAgICAgICAgICByZXR1cm4gbmV3IENoYXJJZChj\nbHMsIChDaGFyYWN0ZXIpIG9pZCk7CiAgICAgICAgaWYgKG9pZCBpbnN0YW5j\nZW9mIERvdWJsZSkKICAgICAgICAgICAgcmV0dXJuIG5ldyBEb3VibGVJZChj\nbHMsIChEb3VibGUpIG9pZCk7CiAgICAgICAgaWYgKG9pZCBpbnN0YW5jZW9m\nIEZsb2F0KQogICAgICAgICAgICByZXR1cm4gbmV3IEZsb2F0SWQoY2xzLCAo\nRmxvYXQpIG9pZCk7CiAgICAgICAgaWYgKG9pZCBpbnN0YW5jZW9mIEludGVn\nZXIpCiAgICAgICAgICAgIHJldHVybiBuZXcgSW50SWQoY2xzLCAoSW50ZWdl\ncikgb2lkKTsKICAgICAgICBpZiAob2lkIGluc3RhbmNlb2YgTG9uZykKICAg\nICAgICAgICAgcmV0dXJuIG5ldyBMb25nSWQoY2xzLCAoTG9uZykgb2lkKTsK\nICAgICAgICBpZiAob2lkIGluc3RhbmNlb2YgU2hvcnQpCiAgICAgICAgICAg\nIHJldHVybiBuZXcgU2hvcnRJZChjbHMsIChTaG9ydCkgb2lkKTsKICAgICAg\nICBpZiAob2lkIGluc3RhbmNlb2YgU3RyaW5nKQogICAgICAgICAgICByZXR1\ncm4gbmV3IFN0cmluZ0lkKGNscywgKFN0cmluZykgb2lkKTsKICAgICAgICBy\nZXR1cm4gbmV3IE9iamVjdElkKGNscywgb2lkKTsKICAgIH0KCiAgICAvKioK\nICAgICAqIFJldHVybiBhbiBhcnJheSBvZiBPcGVuSlBBIG9pZHMgZm9yIHRo\nZSBnaXZlbiBuYXRpdmUgb2lkIGFycmF5LgogICAgICovCiAgICBwdWJsaWMg\nc3RhdGljIE9iamVjdFtdIHRvT3BlbkpQQU9iamVjdElkcyhDbGFzc01ldGFE\nYXRhIG1ldGEsCiAgICAgICAgT2JqZWN0Li4uIG9pZHMpIHsKICAgICAgICBp\nZiAob2lkcyA9PSBudWxsIHx8IG9pZHMubGVuZ3RoID09IDApCiAgICAgICAg\nICAgIHJldHVybiBvaWRzOwoKICAgICAgICAvLyBzaW5jZSB0aGUgY2xhc3Mg\naWYgZml4ZWQgZm9yIGFsbCBvaWRzLCB3ZSBjYW4gdGVsbCBpZiB3ZSBoYXZl\nIHRvCiAgICAgICAgLy8gdHJhbnNsYXRlIHRoZSBhcnJheSBiYXNlZCBvbiB3\naGV0aGVyIHRoZSBmaXJzdCBvaWQgbmVlZHMgdHJhbnNsYXRpbmcKICAgICAg\nICBPYmplY3Qgb2lkID0gdG9PcGVuSlBBT2JqZWN0SWQobWV0YSwgb2lkc1sw\nXSk7CiAgICAgICAgaWYgKG9pZCA9PSBvaWRzWzBdKQogICAgICAgICAgICBy\nZXR1cm4gb2lkczsKCiAgICAgICAgT2JqZWN0W10gY29weSA9IG5ldyBPYmpl\nY3Rbb2lkcy5sZW5ndGhdOwogICAgICAgIGNvcHlbMF0gPSBvaWQ7CiAgICAg\nICAgZm9yIChpbnQgaSA9IDE7IGkgPCBvaWRzLmxlbmd0aDsgaSsrKQogICAg\nICAgICAgICBjb3B5W2ldID0gdG9PcGVuSlBBT2JqZWN0SWQobWV0YSwgb2lk\nc1tpXSk7CiAgICAgICAgcmV0dXJuIGNvcHk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBSZXR1cm4gYSBjb2xsZWN0aW9uIG9mIE9wZW5KUEEgb2lkcyBmb3Ig\ndGhlIGdpdmVuIG5hdGl2ZSBvaWQgY29sbGVjdGlvbi4KICAgICAqLwogICAg\ncHVibGljIHN0YXRpYyBDb2xsZWN0aW9uIHRvT3BlbkpQQU9iamVjdElkcyhD\nbGFzc01ldGFEYXRhIG1ldGEsCiAgICAgICAgQ29sbGVjdGlvbiBvaWRzKSB7\nCiAgICAgICAgaWYgKG9pZHMgPT0gbnVsbCB8fCBvaWRzLmlzRW1wdHkoKSkK\nICAgICAgICAgICAgcmV0dXJuIG9pZHM7CgogICAgICAgIC8vIHNpbmNlIHRo\nZSBjbGFzcyBpZiBmaXhlZCBmb3IgYWxsIG9pZHMsIHdlIGNhbiB0ZWxsIGlm\nIHdlIGhhdmUgdG8KICAgICAgICAvLyB0cmFuc2xhdGUgdGhlIGFycmF5IGJh\nc2VkIG9uIHdoZXRoZXIgdGhlIGZpcnN0IG9pZCBuZWVkcyB0cmFuc2xhdGlu\nZwogICAgICAgIEl0ZXJhdG9yIGl0ciA9IG9pZHMuaXRlcmF0b3IoKTsKICAg\nICAgICBPYmplY3Qgb3JpZyA9IGl0ci5uZXh0KCk7CiAgICAgICAgT2JqZWN0\nIG9pZCA9IHRvT3BlbkpQQU9iamVjdElkKG1ldGEsIG9yaWcpOwogICAgICAg\nIGlmIChvaWQgPT0gb3JpZykKICAgICAgICAgICAgcmV0dXJuIG9pZHM7Cgog\nICAgICAgIENvbGxlY3Rpb24gY29weSA9IG5ldyBBcnJheUxpc3Qob2lkcy5z\naXplKCkpOwogICAgICAgIGNvcHkuYWRkKG9pZCk7CiAgICAgICAgd2hpbGUg\nKGl0ci5oYXNOZXh0KCkpCiAgICAgICAgICAgIGNvcHkuYWRkKHRvT3BlbkpQ\nQU9iamVjdElkKG1ldGEsIGl0ci5uZXh0KCkpKTsKICAgICAgICByZXR1cm4g\nY29weTsKICAgIH0KCiAgICAvKioKICAgICAqIFRyYW5zbGF0ZSBmcm9tIGEg\nT3BlbkpQQSBpZGVudGl0eSBjbGFzcyB0byBhIG5hdGl2ZSBvbmUuCiAgICAg\nKi8KICAgIHB1YmxpYyBzdGF0aWMgQ2xhc3MgZnJvbU9wZW5KUEFPYmplY3RJ\nZENsYXNzKENsYXNzIG9pZENsYXNzKSB7CiAgICAgICAgaWYgKG9pZENsYXNz\nID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIGlm\nIChvaWRDbGFzcyA9PSBJZC5jbGFzcykKICAgICAgICAgICAgcmV0dXJuIExv\nbmcuY2xhc3M7CiAgICAgICAgaWYgKG9pZENsYXNzID09IEJ5dGVJZC5jbGFz\ncykKICAgICAgICAgICAgcmV0dXJuIEJ5dGUuY2xhc3M7CiAgICAgICAgaWYg\nKG9pZENsYXNzID09IENoYXJJZC5jbGFzcykKICAgICAgICAgICAgcmV0dXJu\nIENoYXJhY3Rlci5jbGFzczsKICAgICAgICBpZiAob2lkQ2xhc3MgPT0gRG91\nYmxlSWQuY2xhc3MpCiAgICAgICAgICAgIHJldHVybiBEb3VibGUuY2xhc3M7\nCiAgICAgICAgaWYgKG9pZENsYXNzID09IEZsb2F0SWQuY2xhc3MpCiAgICAg\nICAgICAgIHJldHVybiBGbG9hdC5jbGFzczsKICAgICAgICBpZiAob2lkQ2xh\nc3MgPT0gSW50SWQuY2xhc3MpCiAgICAgICAgICAgIHJldHVybiBJbnRlZ2Vy\nLmNsYXNzOwogICAgICAgIGlmIChvaWRDbGFzcyA9PSBMb25nSWQuY2xhc3Mp\nCiAgICAgICAgICAgIHJldHVybiBMb25nLmNsYXNzOwogICAgICAgIGlmIChv\naWRDbGFzcyA9PSBTaG9ydElkLmNsYXNzKQogICAgICAgICAgICByZXR1cm4g\nU2hvcnQuY2xhc3M7CiAgICAgICAgaWYgKG9pZENsYXNzID09IFN0cmluZ0lk\nLmNsYXNzKQoJCQlyZXR1cm4gU3RyaW5nLmNsYXNzOwoJCXJldHVybiBvaWRD\nbGFzczsKCX0KfQo=\n","encoding":"base64"}

