{"sha":"7364338c32c9c3f5b53726e31320593dfffe39a5","node_id":"MDQ6QmxvYjIwNjM2NDo3MzY0MzM4YzMyYzljM2Y1YjUzNzI2ZTMxMzIwNTkzZGZmZmUzOWE1","size":9677,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/7364338c32c9c3f5b53726e31320593dfffe39a5","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2U7CgppbXBv\ncnQgamF2YS5sYW5nLnJlZmxlY3QuSW52b2NhdGlvblRhcmdldEV4Y2VwdGlv\nbjsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkJyb2tlcjsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLkV4Y2VwdGlvbnM7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5PcGVuSlBBRXhjZXB0aW9u\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuUnVudGltZUV4Y2Vw\ndGlvblRyYW5zbGF0b3I7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRp\nbC5TdG9yZUV4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51\ndGlsLlVzZXJFeGNlcHRpb247CgovKioKICogQ29udmVydHMgZnJvbSBPcGVu\nSlBBIHRvIHBlcnNpc3RlbmNlIGV4Y2VwdGlvbiB0eXBlcy4KICoKICogQGF1\ndGhvciBBYmUgV2hpdGUKICogQGF1dGhvciBNYXJjIFBydWQnaG9tbWVhdXgK\nICogQG5vamF2YWRvYwogKi8KcHVibGljIGNsYXNzIFBlcnNpc3RlbmNlRXhj\nZXB0aW9ucwogICAgZXh0ZW5kcyBFeGNlcHRpb25zIHsKCiAgICBwdWJsaWMg\nc3RhdGljIGZpbmFsIFJ1bnRpbWVFeGNlcHRpb25UcmFuc2xhdG9yIFRSQU5T\nTEFUT1IgPQogICAgICAgIG5ldyBSdW50aW1lRXhjZXB0aW9uVHJhbnNsYXRv\ncigpIHsKICAgICAgICAgICAgcHVibGljIFJ1bnRpbWVFeGNlcHRpb24gdHJh\nbnNsYXRlKFJ1bnRpbWVFeGNlcHRpb24gcmUpIHsKICAgICAgICAgICAgICAg\nIHJldHVybiBQZXJzaXN0ZW5jZUV4Y2VwdGlvbnMudG9QZXJzaXN0ZW5jZUV4\nY2VwdGlvbihyZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgIC8q\nKgogICAgICogUmV0dXJucyBhIHtAbGluayBSdW50aW1lRXhjZXB0aW9uVHJh\nbnNsYXRvcn0gdGhhdCB3aWxsIHBlcmZvcm0KICAgICAqIHRoZSBjb3JyZWN0\nIGV4Y2VwdGlvbiB0cmFuc2xhdGlvbiBhcyB3ZWxsIGFzIHJvbGwgYmFjayB0\naGUKICAgICAqIGN1cnJlbnQgdHJhbnNhY3Rpb24gd2hlbiBmb3IgYWxsIGJ1\ndCB7QGxpbmsgTm9SZXN1bHRFeGNlcHRpb259CiAgICAgKiBhbmQge0BsaW5r\nIE5vblVuaXF1ZVJlc3VsdEV4Y2VwdGlvbn0gaW4gYWNjb3JkYW5jZSB3aXRo\nCiAgICAgKiBzZWN0aW9uIDMuNyBvZiB0aGUgRUpCIDMuMCBzcGVjaWZpY2F0\naW9uLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIFJ1bnRpbWVFeGNlcHRp\nb25UcmFuc2xhdG9yIGdldFJvbGxiYWNrVHJhbnNsYXRvcgogICAgICAgIChm\naW5hbCBPcGVuSlBBRW50aXR5TWFuYWdlciBlbSkgewogICAgICAgIHJldHVy\nbiBuZXcgUnVudGltZUV4Y2VwdGlvblRyYW5zbGF0b3IoKSB7CiAgICAgICAg\nICAgIHByaXZhdGUgYm9vbGVhbiB0aHJvd2luZyA9IGZhbHNlOwoKICAgICAg\nICAgICAgcHVibGljIFJ1bnRpbWVFeGNlcHRpb24gdHJhbnNsYXRlKFJ1bnRp\nbWVFeGNlcHRpb24gcmUpIHsKICAgICAgICAgICAgICAgIFJ1bnRpbWVFeGNl\ncHRpb24gZXggPSB0b1BlcnNpc3RlbmNlRXhjZXB0aW9uKHJlKTsKICAgICAg\nICAgICAgICAgIGlmICghKGV4IGluc3RhbmNlb2YgTm9uVW5pcXVlUmVzdWx0\nRXhjZXB0aW9uKQogICAgICAgICAgICAgICAgICAgICYmICEoZXggaW5zdGFu\nY2VvZiBOb1Jlc3VsdEV4Y2VwdGlvbikKICAgICAgICAgICAgICAgICAgICAm\nJiAhdGhyb3dpbmcpIHsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAg\nICAgICAgICAgICAgICAgICAgICB0aHJvd2luZyA9IHRydWU7CiAgICAgICAg\nICAgICAgICAgICAgICAgIGlmIChlbS5pc09wZW4oKSAmJiBlbS5pc0FjdGl2\nZSgpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW0uc2V0Um9sbGJh\nY2tPbmx5KHJlKTsKICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewog\nICAgICAgICAgICAgICAgICAgICAgICAvLyBoYW5kbGUgcmUtZW50cmFuY3kK\nICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3dpbmcgPSBmYWxzZTsKICAg\nICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAg\nICAgICAgICAgcmV0dXJuIGV4OwogICAgICAgICAgICB9CiAgICAgICAgfTsK\nICAgIH0KCiAgICAvKioKICAgICAqIENvbnZlcnQgdGhlIGdpdmVuIHRocm93\nYWJsZSB0byB0aGUgcHJvcGVyIHBlcnNpc3RlbmNlIGV4Y2VwdGlvbi4KICAg\nICAqLwogICAgcHVibGljIHN0YXRpYyBSdW50aW1lRXhjZXB0aW9uIHRvUGVy\nc2lzdGVuY2VFeGNlcHRpb24oVGhyb3dhYmxlIHQpIHsKICAgICAgICByZXR1\ncm4gKFJ1bnRpbWVFeGNlcHRpb24pIHRyYW5zbGF0ZUV4Y2VwdGlvbih0LCB0\ncnVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRyYW5zbGF0ZSB0aGUgZ2l2\nZW4gZXhjZXB0aW9uLgogICAgICoKICAgICAqIEBwYXJhbSBjaGVja2VkIHdo\nZXRoZXIgdG8gdHJhbnNsYXRlIGNoZWNrZWQgZXhjZXB0aW9ucwogICAgICov\nCiAgICBwcml2YXRlIHN0YXRpYyBUaHJvd2FibGUgdHJhbnNsYXRlRXhjZXB0\naW9uKFRocm93YWJsZSB0LCBib29sZWFuIGNoZWNrZWQpIHsKICAgICAgICBp\nZiAoaXNQZXJzaXN0ZW5jZUV4Y2VwdGlvbih0KSkKICAgICAgICAgICAgcmV0\ndXJuIHQ7CgogICAgICAgIC8vIGltbWVkaWF0ZWx5IHRocm93IGVycm9ycwog\nICAgICAgIGlmICh0IGluc3RhbmNlb2YgRXJyb3IpCiAgICAgICAgICAgIHRo\ncm93IChFcnJvcikgdDsKCiAgICAgICAgT3BlbkpQQUV4Y2VwdGlvbiBrZTsK\nICAgICAgICBpZiAoISh0IGluc3RhbmNlb2YgT3BlbkpQQUV4Y2VwdGlvbikp\nIHsKICAgICAgICAgICAgaWYgKCFjaGVja2VkIHx8IHQgaW5zdGFuY2VvZiBS\ndW50aW1lRXhjZXB0aW9uKQogICAgICAgICAgICAgICAgcmV0dXJuIHQ7CiAg\nICAgICAgICAgIGtlID0gbmV3IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLkdl\nbmVyYWxFeGNlcHRpb24odC5nZXRNZXNzYWdlKCkpOwogICAgICAgICAgICBr\nZS5zZXRTdGFja1RyYWNlKHQuZ2V0U3RhY2tUcmFjZSgpKTsKICAgICAgICAg\nICAgcmV0dXJuIGtlOwogICAgICAgIH0KCiAgICAgICAgLy8gaWYgb25seSBu\nZXN0ZWQgZXhjZXB0aW9uIGlzIGEgcGVyc2lzdGVuY2Ugb25lLCByZXR1cm4g\naXQgZGlyZWN0bHkKICAgICAgICBrZSA9IChPcGVuSlBBRXhjZXB0aW9uKSB0\nOwogICAgICAgIGlmIChrZS5nZXROZXN0ZWRUaHJvd2FibGVzKCkubGVuZ3Ro\nID09IDEKICAgICAgICAgICAgJiYgaXNQZXJzaXN0ZW5jZUV4Y2VwdGlvbihr\nZS5nZXRDYXVzZSgpKSkKICAgICAgICAgICAgcmV0dXJuIGtlLmdldENhdXNl\nKCk7CgogICAgICAgIC8vIFJ1bnRpbWVFeGNlcHRpb25zIHRocm93biBmcm9t\nIGNhbGxiYWNrcyBzaG91bGQgYmUgdGhyb3duIGRpcmVjdGx5CiAgICAgICAg\naWYgKGtlLmdldFR5cGUoKSA9PSBPcGVuSlBBRXhjZXB0aW9uLlVTRVIKICAg\nICAgICAgICAgJiYga2UuZ2V0U3VidHlwZSgpID09IFVzZXJFeGNlcHRpb24u\nQ0FMTEJBQ0sKICAgICAgICAgICAgJiYga2UuZ2V0TmVzdGVkVGhyb3dhYmxl\ncygpLmxlbmd0aCA9PSAxKSB7CiAgICAgICAgICAgIFRocm93YWJsZSBlID0g\na2UuZ2V0Q2F1c2UoKTsKICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBJ\nbnZvY2F0aW9uVGFyZ2V0RXhjZXB0aW9uKQogICAgICAgICAgICAgICAgZSA9\nIGUuZ2V0Q2F1c2UoKTsKCiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2Yg\nUnVudGltZUV4Y2VwdGlvbikKICAgICAgICAgICAgICAgIHJldHVybiBlOwog\nICAgICAgIH0KCiAgICAgICAgLy8gcGVyZm9ybSBpbnRlbGxpZ2VudCB0cmFu\nc2xhdGlvbiBvZiBvcGVuanBhIGV4Y2VwdGlvbnMKICAgICAgICBzd2l0Y2gg\nKGtlLmdldFR5cGUoKSkgewogICAgICAgICAgICBjYXNlIE9wZW5KUEFFeGNl\ncHRpb24uU1RPUkU6CiAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNsYXRl\nU3RvcmVFeGNlcHRpb24oa2UpOwogICAgICAgICAgICBjYXNlIE9wZW5KUEFF\neGNlcHRpb24uVVNFUjoKICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2xh\ndGVVc2VyRXhjZXB0aW9uKGtlKTsKICAgICAgICAgICAgZGVmYXVsdDoKICAg\nICAgICAgICAgICAgIHJldHVybiB0cmFuc2xhdGVHZW5lcmFsRXhjZXB0aW9u\nKGtlKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBUcmFuc2xh\ndGUgdGhlIGdpdmVuIHN0b3JlIGV4Y2VwdGlvbi4KICAgICAqLwogICAgcHJp\ndmF0ZSBzdGF0aWMgVGhyb3dhYmxlIHRyYW5zbGF0ZVN0b3JlRXhjZXB0aW9u\nKE9wZW5KUEFFeGNlcHRpb24ga2UpIHsKICAgICAgICBFeGNlcHRpb24gZTsK\nICAgICAgICBzd2l0Y2ggKGtlLmdldFN1YnR5cGUoKSkgewogICAgICAgICAg\nICBjYXNlIFN0b3JlRXhjZXB0aW9uLk9CSkVDVF9OT1RfRk9VTkQ6CiAgICAg\nICAgICAgICAgICBlID0gbmV3IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0\nZW5jZS5FbnRpdHlOb3RGb3VuZEV4Y2VwdGlvbgogICAgICAgICAgICAgICAg\nICAgIChrZS5nZXRNZXNzYWdlKCksIGdldE5lc3RlZFRocm93YWJsZXMoa2Up\nLAogICAgICAgICAgICAgICAgICAgICAgICBnZXRGYWlsZWRPYmplY3Qoa2Up\nLCBrZS5pc0ZhdGFsKCkpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAg\nICAgICAgIGNhc2UgU3RvcmVFeGNlcHRpb24uT1BUSU1JU1RJQzoKICAgICAg\nICAgICAgICAgIGUgPSBuZXcgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3Rl\nbmNlLk9wdGltaXN0aWNMb2NrRXhjZXB0aW9uCiAgICAgICAgICAgICAgICAg\nICAgKGtlLmdldE1lc3NhZ2UoKSwgZ2V0TmVzdGVkVGhyb3dhYmxlcyhrZSks\nCiAgICAgICAgICAgICAgICAgICAgICAgIGdldEZhaWxlZE9iamVjdChrZSks\nIGtlLmlzRmF0YWwoKSk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAg\nICAgICAgY2FzZSBTdG9yZUV4Y2VwdGlvbi5PQkpFQ1RfRVhJU1RTOgogICAg\nICAgICAgICAgICAgZSA9IG5ldyBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lz\ndGVuY2UuRW50aXR5RXhpc3RzRXhjZXB0aW9uCiAgICAgICAgICAgICAgICAg\nICAgKGtlLmdldE1lc3NhZ2UoKSwgZ2V0TmVzdGVkVGhyb3dhYmxlcyhrZSks\nCiAgICAgICAgICAgICAgICAgICAgICAgIGdldEZhaWxlZE9iamVjdChrZSks\nIGtlLmlzRmF0YWwoKSk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAg\nICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIGUgPSBuZXcgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLlBlcnNpc3RlbmNlRXhjZXB0aW9u\nCiAgICAgICAgICAgICAgICAgICAgKGtlLmdldE1lc3NhZ2UoKSwgZ2V0TmVz\ndGVkVGhyb3dhYmxlcyhrZSksCiAgICAgICAgICAgICAgICAgICAgICAgIGdl\ndEZhaWxlZE9iamVjdChrZSksIGtlLmlzRmF0YWwoKSk7CiAgICAgICAgfQog\nICAgICAgIGUuc2V0U3RhY2tUcmFjZShrZS5nZXRTdGFja1RyYWNlKCkpOwog\nICAgICAgIHJldHVybiBlOwogICAgfQoKICAgIC8qKgogICAgICogVHJhbnNs\nYXRlIHRoZSBnaXZlbiB1c2VyIGV4Y2VwdGlvbi4KICAgICAqLwogICAgcHJp\ndmF0ZSBzdGF0aWMgRXhjZXB0aW9uIHRyYW5zbGF0ZVVzZXJFeGNlcHRpb24o\nT3BlbkpQQUV4Y2VwdGlvbiBrZSkgewogICAgICAgIEV4Y2VwdGlvbiBlOwog\nICAgICAgIHN3aXRjaCAoa2UuZ2V0U3VidHlwZSgpKSB7CiAgICAgICAgICAg\nIGNhc2UgVXNlckV4Y2VwdGlvbi5OT19UUkFOU0FDVElPTjoKICAgICAgICAg\nICAgICAgIGUgPSBuZXcgCiAgICAgICAgICAgICAgICAgICAgb3JnLmFwYWNo\nZS5vcGVuanBhLnBlcnNpc3RlbmNlLlRyYW5zYWN0aW9uUmVxdWlyZWRFeGNl\ncHRpb24KICAgICAgICAgICAgICAgICAgICAgICAgKGtlLmdldE1lc3NhZ2Uo\nKSwgZ2V0TmVzdGVkVGhyb3dhYmxlcyhrZSksCiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICBnZXRGYWlsZWRPYmplY3Qoa2UpLCBrZS5pc0ZhdGFsKCkp\nOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgVXNl\nckV4Y2VwdGlvbi5OT19SRVNVTFQ6CiAgICAgICAgICAgICAgICBlID0gbmV3\nIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5Ob1Jlc3VsdEV4Y2Vw\ndGlvbgogICAgICAgICAgICAgICAgICAgIChrZS5nZXRNZXNzYWdlKCksIGdl\ndE5lc3RlZFRocm93YWJsZXMoa2UpLAogICAgICAgICAgICAgICAgICAgICAg\nICBnZXRGYWlsZWRPYmplY3Qoa2UpLCBrZS5pc0ZhdGFsKCkpOwogICAgICAg\nICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgVXNlckV4Y2VwdGlv\nbi5OT05fVU5JUVVFX1JFU1VMVDoKICAgICAgICAgICAgICAgIGUgPSBuZXcg\nb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk5vblVuaXF1ZVJlc3Vs\ndEV4Y2VwdGlvbgogICAgICAgICAgICAgICAgICAgIChrZS5nZXRNZXNzYWdl\nKCksIGdldE5lc3RlZFRocm93YWJsZXMoa2UpLAogICAgICAgICAgICAgICAg\nICAgICAgICBnZXRGYWlsZWRPYmplY3Qoa2UpLCBrZS5pc0ZhdGFsKCkpOwog\nICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgVXNlckV4\nY2VwdGlvbi5JTlZBTElEX1NUQVRFOgogICAgICAgICAgICAgICAgZSA9IG5l\ndyBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuSW52YWxpZFN0YXRl\nRXhjZXB0aW9uCiAgICAgICAgICAgICAgICAgICAgKGtlLmdldE1lc3NhZ2Uo\nKSwgZ2V0TmVzdGVkVGhyb3dhYmxlcyhrZSksCiAgICAgICAgICAgICAgICAg\nICAgICAgIGdldEZhaWxlZE9iamVjdChrZSksIGtlLmlzRmF0YWwoKSk7CiAg\nICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgZGVmYXVsdDoKICAg\nICAgICAgICAgICAgIGUgPSBuZXcgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNp\nc3RlbmNlLkFyZ3VtZW50RXhjZXB0aW9uCiAgICAgICAgICAgICAgICAgICAg\nKGtlLmdldE1lc3NhZ2UoKSwgZ2V0TmVzdGVkVGhyb3dhYmxlcyhrZSksCiAg\nICAgICAgICAgICAgICAgICAgICAgIGdldEZhaWxlZE9iamVjdChrZSksIGtl\nLmlzRmF0YWwoKSk7CiAgICAgICAgfQogICAgICAgIGUuc2V0U3RhY2tUcmFj\nZShrZS5nZXRTdGFja1RyYWNlKCkpOwogICAgICAgIHJldHVybiBlOwogICAg\nfQoKICAgIC8qKgogICAgICogVHJhbnNsYXRlIHRoZSBnaXZlbiBnZW5lcmFs\nIGV4Y2VwdGlvbi4KICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgVGhyb3dh\nYmxlIHRyYW5zbGF0ZUdlbmVyYWxFeGNlcHRpb24oT3BlbkpQQUV4Y2VwdGlv\nbiBrZSkgewogICAgICAgIEV4Y2VwdGlvbiBlID0gbmV3IG9yZy5hcGFjaGUu\nb3BlbmpwYS5wZXJzaXN0ZW5jZS5QZXJzaXN0ZW5jZUV4Y2VwdGlvbgogICAg\nICAgICAgICAoa2UuZ2V0TWVzc2FnZSgpLCBnZXROZXN0ZWRUaHJvd2FibGVz\nKGtlKSwKICAgICAgICAgICAgICAgIGdldEZhaWxlZE9iamVjdChrZSksIGtl\nLmlzRmF0YWwoKSk7CiAgICAgICAgZS5zZXRTdGFja1RyYWNlKGtlLmdldFN0\nYWNrVHJhY2UoKSk7CiAgICAgICAgcmV0dXJuIGU7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBSZXR1cm4gdHJ1ZSBpZiB0aGUgZ2l2ZW4gZXhjZXB0aW9uIGlz\nIGEgcGVyc2lzdGVuY2UgZXhjZXB0aW9uLgogICAgICovCiAgICBwcml2YXRl\nIHN0YXRpYyBib29sZWFuIGlzUGVyc2lzdGVuY2VFeGNlcHRpb24oVGhyb3dh\nYmxlIHQpIHsKICAgICAgICByZXR1cm4gdC5nZXRDbGFzcygpLmdldE5hbWUo\nKQogICAgICAgICAgICAuc3RhcnRzV2l0aCgib3JnLmFwYWNoZS5vcGVuanBh\nLnBlcnNpc3RlbmNlLiIpOwogICAgfQoKICAgIC8qKgogICAgICogVHJhbnNs\nYXRlIHRoZSBuZXN0ZWQgdGhyb3dhYmxlcyBvZiB0aGUgZ2l2ZW4gb3Blbmpw\nYSBleGNlcHRpb24gaW50bwogICAgICogbmVzdGVkIHRocm93YWJsZXMgZm9y\nIGEgcGVyc2lzdGVuY2UgZXhjZXB0aW9uLgogICAgICovCiAgICBwcml2YXRl\nIHN0YXRpYyBUaHJvd2FibGVbXSBnZXROZXN0ZWRUaHJvd2FibGVzKE9wZW5K\nUEFFeGNlcHRpb24ga2UpIHsKICAgICAgICBUaHJvd2FibGVbXSBuZXN0ZWQg\nPSBrZS5nZXROZXN0ZWRUaHJvd2FibGVzKCk7CiAgICAgICAgaWYgKG5lc3Rl\nZC5sZW5ndGggPT0gMCkKICAgICAgICAgICAgcmV0dXJuIG5lc3RlZDsKCiAg\nICAgICAgVGhyb3dhYmxlW10gdHJhbnMgPSBuZXcgVGhyb3dhYmxlW25lc3Rl\nZC5sZW5ndGhdOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbmVzdGVk\nLmxlbmd0aDsgaSsrKQogICAgICAgICAgICB0cmFuc1tpXSA9IHRyYW5zbGF0\nZUV4Y2VwdGlvbihuZXN0ZWRbaV0sIGZhbHNlKTsKICAgICAgICByZXR1cm4g\ndHJhbnM7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGZhaWxl\nZCBvYmplY3QgZm9yIHRoZSBnaXZlbiBleGNlcHRpb24sIHBlcmZvcm1pbmcg\nYW55CiAgICAgKiBuZWNlc3NhcnkgY29udmVyc2lvbnMuCiAgICAgKi8KICAg\nIHByaXZhdGUgc3RhdGljIE9iamVjdCBnZXRGYWlsZWRPYmplY3QoT3BlbkpQ\nQUV4Y2VwdGlvbiBrZSkgewogICAgICAgIE9iamVjdCBvID0ga2UuZ2V0RmFp\nbGVkT2JqZWN0KCk7CiAgICAgICAgaWYgKG8gPT0gbnVsbCkKICAgICAgICAg\nICAgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKG8gaW5zdGFuY2VvZiBCcm9r\nZXIpCiAgICAgICAgICAgIHJldHVybiBPcGVuSlBBUGVyc2lzdGVuY2UudG9F\nbnRpdHlNYW5hZ2VyKChCcm9rZXIpIG8pOwogICAgICAgIHJldHVybiBPcGVu\nSlBBUGVyc2lzdGVuY2UuZnJvbU9wZW5KUEFPYmplY3RJZChvKTsKICAgIH0K\nCiAgICAvKioKICAgICAqIEhlbHBlciBtZXRob2QgdG8gZXh0cmFjdCBhIG5l\nc3RlZCBleGNlcHRpb24gZnJvbSBhbiBpbnRlcm5hbCBuZXN0ZWQKICAgICAq\nIGFycmF5IGluIGEgc2FmZSB3YXkuCiAgICAgKi8KICAgIHN0YXRpYyBUaHJv\nd2FibGUgZ2V0Q2F1c2UoVGhyb3dhYmxlW10gbmVzdGVkKSB7CiAgICAgICAg\naWYgKG5lc3RlZCA9PSBudWxsIHx8IG5lc3RlZC5sZW5ndGggPT0gMCkKICAg\nICAgICAgICAgcmV0dXJuIG51bGw7CgkJcmV0dXJuIG5lc3RlZFswXTsKCX0K\nfQo=\n","encoding":"base64"}

