{"sha":"6c362f105248099c5f336c4203719c7a6e42a8dc","node_id":"MDQ6QmxvYjIwNjM2NDo2YzM2MmYxMDUyNDgwOTljNWYzMzZjNDIwMzcxOWM3YTZlNDJhOGRj","size":6438,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/6c362f105248099c5f336c4203719c7a6e42a8dc","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2U7CgppbXBv\ncnQgamF2YS5sYW5nLmluc3RydW1lbnQuQ2xhc3NGaWxlVHJhbnNmb3JtZXI7\nCmltcG9ydCBqYXZhLmxhbmcuaW5zdHJ1bWVudC5JbGxlZ2FsQ2xhc3NGb3Jt\nYXRFeGNlcHRpb247CmltcG9ydCBqYXZhLnNlY3VyaXR5LlByb3RlY3Rpb25E\nb21haW47CmltcG9ydCBqYXZhLnV0aWwuTWFwOwppbXBvcnQgamF2YXgucGVy\nc2lzdGVuY2UuRW50aXR5TWFuYWdlcjsKaW1wb3J0IGphdmF4LnBlcnNpc3Rl\nbmNlLkVudGl0eU1hbmFnZXJGYWN0b3J5OwppbXBvcnQgamF2YXgucGVyc2lz\ndGVuY2UuUGVyc2lzdGVuY2U7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5z\ncGkuQ2xhc3NUcmFuc2Zvcm1lcjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNl\nLnNwaS5QZXJzaXN0ZW5jZVByb3ZpZGVyOwppbXBvcnQgamF2YXgucGVyc2lz\ndGVuY2Uuc3BpLlBlcnNpc3RlbmNlVW5pdEluZm87CgppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmNvbmYuT3BlbkpQQUNvbmZpZ3VyYXRpb247CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEuY29uZi5PcGVuSlBBQ29uZmlndXJhdGlv\nbkltcGw7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuY29uZi5Ccm9rZXJW\nYWx1ZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5lbmhhbmNlLlBDQ2xh\nc3NGaWxlVHJhbnNmb3JtZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\na2VybmVsLkJvb3RzdHJhcDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5r\nZXJuZWwuQnJva2VyRmFjdG9yeTsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5saWIuY29uZi5Db25maWd1cmF0aW9uUHJvdmlkZXI7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEubGliLmNvbmYuQ29uZmlndXJhdGlvbnM7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5NZXRhRGF0YU1vZGVzOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuTWV0YURhdGFSZXBvc2l0b3J5\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuQ2xhc3NSZXNvbHZl\ncjsKCgovKioKICogQm9vdHN0cmFwcGluZyBjbGFzcyB0aGF0IGFsbG93cyB0\naGUgY3JlYXRpb24gb2YgYSBzdGFuZC1hbG9uZQogKiB7QGxpbmsgRW50aXR5\nTWFuYWdlcn0uCiAqCiAqIEBzZWUgUGVyc2lzdGVuY2UjY3JlYXRlRW50aXR5\nTWFuYWdlckZhY3RvcnkoU3RyaW5nLE1hcCkKICovCnB1YmxpYyBjbGFzcyBQ\nZXJzaXN0ZW5jZVByb3ZpZGVySW1wbAogICAgaW1wbGVtZW50cyBQZXJzaXN0\nZW5jZVByb3ZpZGVyIHsKCiAgICBzdGF0aWMgZmluYWwgU3RyaW5nIENMQVNT\nX1RSQU5TRk9STUVSX09QVElPTlMgPSAiQ2xhc3NUcmFuc2Zvcm1lck9wdGlv\nbnMiOwoKICAgIC8qKgogICAgICogTG9hZHMgdGhlIGVudGl0eSBtYW5hZ2Vy\nIHNwZWNpZmllZCBieSA8Y29kZT5uYW1lPC9jb2RlPiwgYXBwbHlpbmcKICAg\nICAqIHRoZSBwcm9wZXJ0aWVzIGluIDxjb2RlPm08L2NvZGU+IGFzIG92ZXJy\naWRlcyB0byB0aGUgcHJvcGVydGllcyBkZWZpbmVkCiAgICAgKiBpbiB0aGUg\nWE1MIGNvbmZpZ3VyYXRpb24gZmlsZSBmb3IgPGNvZGU+bmFtZTwvY29kZT4u\nIElmIDxjb2RlPm5hbWU8L2NvZGU+CiAgICAgKiBpcyA8Y29kZT5udWxsPC9j\nb2RlPiwgdGhpcyBtZXRob2QgbG9hZHMgdGhlIFhNTCBpbiB0aGUgcmVzb3Vy\nY2UKICAgICAqIGlkZW50aWZpZWQgYnkgPGNvZGU+cmVzb3VyY2U8L2NvZGU+\nLCBhbmQgdXNlcyB0aGUgZmlyc3QgcmVzb3VyY2UgZm91bmQKICAgICAqIHdo\nZW4gZG9pbmcgdGhpcyBsb29rdXAsIHJlZ2FyZGxlc3Mgb2YgdGhlIG5hbWUg\nc3BlY2lmaWVkIGluIHRoZSBYTUwKICAgICAqIHJlc291cmNlIG9yIHRoZSBu\nYW1lIG9mIHRoZSBqYXIgdGhhdCB0aGUgcmVzb3VyY2UgaXMgY29udGFpbmVk\nIGluLgogICAgICogVGhpcyBkb2VzIG5vIHBvb2xpbmcgb2YgRW50aXR5TWFu\nYWdlcnNGYWN0b3JpZXMuCiAgICAgKi8KICAgIHB1YmxpYyBFbnRpdHlNYW5h\nZ2VyRmFjdG9yeSBjcmVhdGVFbnRpdHlNYW5hZ2VyRmFjdG9yeShTdHJpbmcg\nbmFtZSwKICAgICAgICBTdHJpbmcgcmVzb3VyY2UsIE1hcCBtKSB7CiAgICAg\nICAgUGVyc2lzdGVuY2VQcm9kdWN0RGVyaXZhdGlvbiBwZCA9IG5ldyBQZXJz\naXN0ZW5jZVByb2R1Y3REZXJpdmF0aW9uKCk7CiAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgQ29uZmlndXJhdGlvblByb3ZpZGVyIGNwID0gcGQubG9hZChy\nZXNvdXJjZSwgbmFtZSwgbSk7CiAgICAgICAgICAgIGlmIChjcCA9PSBudWxs\nKQogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CgogICAgICAgICAgICBC\ncm9rZXJGYWN0b3J5IGZhY3RvcnkgPSBCb290c3RyYXAubmV3QnJva2VyRmFj\ndG9yeShjcCwgbnVsbCk7CiAgICAgICAgICAgIHJldHVybiBPcGVuSlBBUGVy\nc2lzdGVuY2UudG9FbnRpdHlNYW5hZ2VyRmFjdG9yeShmYWN0b3J5KTsKICAg\nICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICB0aHJv\ndyBQZXJzaXN0ZW5jZUV4Y2VwdGlvbnMudG9QZXJzaXN0ZW5jZUV4Y2VwdGlv\nbihlKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIEVudGl0eU1hbmFn\nZXJGYWN0b3J5IGNyZWF0ZUVudGl0eU1hbmFnZXJGYWN0b3J5KFN0cmluZyBu\nYW1lLCBNYXAgbSkgewogICAgICAgIHJldHVybiBjcmVhdGVFbnRpdHlNYW5h\nZ2VyRmFjdG9yeShuYW1lLCBudWxsLCBtKTsKICAgIH0KCiAgICBwdWJsaWMg\nRW50aXR5TWFuYWdlckZhY3RvcnkgY3JlYXRlQ29udGFpbmVyRW50aXR5TWFu\nYWdlckZhY3RvcnkoCiAgICAgICAgUGVyc2lzdGVuY2VVbml0SW5mbyBwdWks\nIE1hcCBtKSB7CiAgICAgICAgUGVyc2lzdGVuY2VQcm9kdWN0RGVyaXZhdGlv\nbiBwZCA9IG5ldyBQZXJzaXN0ZW5jZVByb2R1Y3REZXJpdmF0aW9uKCk7CiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgQ29uZmlndXJhdGlvblByb3ZpZGVy\nIGNwID0gcGQubG9hZChwdWksIG0pOwogICAgICAgICAgICBpZiAoY3AgPT0g\nbnVsbCkKICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwoKICAgICAgICAg\nICAgLy8gYWRkIGVuaGFuY2VyCiAgICAgICAgICAgIFN0cmluZyBjdE9wdHMg\nPSAoU3RyaW5nKSBDb25maWd1cmF0aW9ucy5nZXRQcm9wZXJ0eQogICAgICAg\nICAgICAgICAgKENMQVNTX1RSQU5TRk9STUVSX09QVElPTlMsIHB1aS5nZXRQ\ncm9wZXJ0aWVzKCkpOwogICAgICAgICAgICBwdWkuYWRkVHJhbnNmb3JtZXIo\nbmV3IENsYXNzVHJhbnNmb3JtZXJJbXBsKGNwLCBjdE9wdHMsIAogICAgICAg\nICAgICAgICAgcHVpLmdldE5ld1RlbXBDbGFzc0xvYWRlcigpKSk7CgogICAg\nICAgICAgICAvLyBpZiB0aGUgQnJva2VySW1wbCBoYXNuJ3QgYmVlbiBzcGVj\naWZpZWQsIHN3aXRjaCB0byB0aGUKICAgICAgICAgICAgLy8gbm9uLWZpbmFs\naXppbmcgb25lLCBzaW5jZSBhbnl0aGluZyBjbGFpbWluZyB0byBiZSBhIGNv\nbnRhaW5lcgogICAgICAgICAgICAvLyBzaG91bGQgYmUgZG9pbmcgcHJvcGVy\nIHJlc291cmNlIG1hbmFnZW1lbnQuCiAgICAgICAgICAgIGlmICghQ29uZmln\ndXJhdGlvbnMuY29udGFpbnNQcm9wZXJ0eShCcm9rZXJWYWx1ZS5LRVksCiAg\nICAgICAgICAgICAgICBjcC5nZXRQcm9wZXJ0aWVzKCkpKSB7CiAgICAgICAg\nICAgICAgICBjcC5hZGRQcm9wZXJ0eSgib3BlbmpwYS4iICsgQnJva2VyVmFs\ndWUuS0VZLCAKICAgICAgICAgICAgICAgICAgICBCcm9rZXJWYWx1ZS5OT05f\nRklOQUxJWklOR19BTElBUyk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAg\nIEJyb2tlckZhY3RvcnkgZmFjdG9yeSA9IEJvb3RzdHJhcC5uZXdCcm9rZXJG\nYWN0b3J5KGNwLCAKICAgICAgICAgICAgICAgIHB1aS5nZXRDbGFzc0xvYWRl\ncigpKTsKICAgICAgICAgICAgcmV0dXJuIE9wZW5KUEFQZXJzaXN0ZW5jZS50\nb0VudGl0eU1hbmFnZXJGYWN0b3J5KGZhY3RvcnkpOwogICAgICAgIH0gY2F0\nY2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIHRocm93IFBlcnNpc3Rl\nbmNlRXhjZXB0aW9ucy50b1BlcnNpc3RlbmNlRXhjZXB0aW9uKGUpOwogICAg\nICAgIH0KICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBKYXZhIEVFIDUgY2xh\nc3MgdHJhbnNmb3JtZXIuCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGljIGNs\nYXNzIENsYXNzVHJhbnNmb3JtZXJJbXBsCiAgICAgICAgaW1wbGVtZW50cyBD\nbGFzc1RyYW5zZm9ybWVyIHsKCiAgICAgICAgcHJpdmF0ZSBmaW5hbCBDbGFz\nc0ZpbGVUcmFuc2Zvcm1lciBfdHJhbnM7CgogICAgICAgIHByaXZhdGUgQ2xh\nc3NUcmFuc2Zvcm1lckltcGwoQ29uZmlndXJhdGlvblByb3ZpZGVyIGNwLCBT\ndHJpbmcgcHJvcHMsIAogICAgICAgICAgICBmaW5hbCBDbGFzc0xvYWRlciB0\nbXBMb2FkZXIpIHsKICAgICAgICAgICAgLy8gY3JlYXRlIGFuIGluZGVwZW5k\nZW50IGNvbmYgZm9yIGVuaGFuY2VtZW50CiAgICAgICAgICAgIE9wZW5KUEFD\nb25maWd1cmF0aW9uIGNvbmYgPSBuZXcgT3BlbkpQQUNvbmZpZ3VyYXRpb25J\nbXBsKCk7CiAgICAgICAgICAgIGNwLnNldEludG8oY29uZik7CiAgICAgICAg\nICAgIC8vIGRvbid0IGFsbG93IGNvbm5lY3Rpb25zCiAgICAgICAgICAgIGNv\nbmYuc2V0Q29ubmVjdGlvblVzZXJOYW1lKG51bGwpOwogICAgICAgICAgICBj\nb25mLnNldENvbm5lY3Rpb25QYXNzd29yZChudWxsKTsKICAgICAgICAgICAg\nY29uZi5zZXRDb25uZWN0aW9uVVJMKG51bGwpOwogICAgICAgICAgICBjb25m\nLnNldENvbm5lY3Rpb25Ecml2ZXJOYW1lKG51bGwpOwogICAgICAgICAgICBj\nb25mLnNldENvbm5lY3Rpb25GYWN0b3J5TmFtZShudWxsKTsKICAgICAgICAg\nICAgLy8gdXNlIHRoZSB0bXAgbG9hZGVyIGZvciBldmVyeXRoaW5nCiAgICAg\nICAgICAgIGNvbmYuc2V0Q2xhc3NSZXNvbHZlcihuZXcgQ2xhc3NSZXNvbHZl\ncigpIHsKICAgICAgICAgICAgICAgIHB1YmxpYyBDbGFzc0xvYWRlciBnZXRD\nbGFzc0xvYWRlcihDbGFzcyBjb250ZXh0LCAKICAgICAgICAgICAgICAgICAg\nICBDbGFzc0xvYWRlciBlbnYpIHsKICAgICAgICAgICAgICAgICAgICByZXR1\ncm4gdG1wTG9hZGVyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9\nKTsKICAgICAgICAgICAgY29uZi5zZXRSZWFkT25seSh0cnVlKTsKCiAgICAg\nICAgICAgIE1ldGFEYXRhUmVwb3NpdG9yeSByZXBvcyA9IGNvbmYuZ2V0TWV0\nYURhdGFSZXBvc2l0b3J5SW5zdGFuY2UoKTsKICAgICAgICAgICAgcmVwb3Mu\nc2V0UmVzb2x2ZShNZXRhRGF0YU1vZGVzLk1PREVfTUFQUElORywgZmFsc2Up\nOwogICAgICAgICAgICBfdHJhbnMgPSBuZXcgUENDbGFzc0ZpbGVUcmFuc2Zv\ncm1lcihyZXBvcywKICAgICAgICAgICAgICAgIENvbmZpZ3VyYXRpb25zLnBh\ncnNlUHJvcGVydGllcyhwcm9wcyksIHRtcExvYWRlcik7CiAgICAgICAgfQoK\nICAgICAgICBwdWJsaWMgYnl0ZVtdIHRyYW5zZm9ybShDbGFzc0xvYWRlciBj\nbCwgU3RyaW5nIG5hbWUsCiAgICAgICAgICAgIENsYXNzPD8+IHByZXZpb3Vz\nVmVyc2lvbiwgUHJvdGVjdGlvbkRvbWFpbiBwZCwgYnl0ZVtdIGJ5dGVzKQog\nICAgICAgICAgICB0aHJvd3MgSWxsZWdhbENsYXNzRm9ybWF0RXhjZXB0aW9u\nIHsKICAgICAgICAgICAgcmV0dXJuIF90cmFucy50cmFuc2Zvcm0oY2wsIG5h\nbWUsIHByZXZpb3VzVmVyc2lvbiwgcGQsIGJ5dGVzKTsKICAgICAgICB9Cgl9\nCn0K\n","encoding":"base64"}

