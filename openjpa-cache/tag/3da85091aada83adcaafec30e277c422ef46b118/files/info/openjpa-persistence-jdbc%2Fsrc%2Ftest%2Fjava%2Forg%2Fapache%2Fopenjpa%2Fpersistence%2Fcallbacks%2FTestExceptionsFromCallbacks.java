{"sha":"878edbd6360f907d619696caf85882b0a9312060","node_id":"MDQ6QmxvYjIwNjM2NDo4NzhlZGJkNjM2MGY5MDdkNjE5Njk2Y2FmODU4ODJiMGE5MzEyMDYw","size":4987,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/878edbd6360f907d619696caf85882b0a9312060","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY2FsbGJh\nY2tzOwoKaW1wb3J0IGphdmEudXRpbC5IYXNoTWFwOwppbXBvcnQgamF2YS51\ndGlsLk1hcDsKCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5h\nZ2VyOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuUGVyc2lzdGVuY2U7Cmlt\ncG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5Sb2xsYmFja0V4Y2VwdGlvbjsKCmlt\ncG9ydCBqdW5pdC5mcmFtZXdvcmsuVGVzdENhc2U7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXJG\nYWN0b3J5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNl\nLk9wZW5KUEFQZXJzaXN0ZW5jZTsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5wZXJzaXN0ZW5jZS5jYWxsYmFja3MuRXhjZXB0aW9uc0Zyb21DYWxsYmFj\na3NFbnRpdHkuQ2FsbGJhY2tUZXN0RXhjZXB0aW9uOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnRlc3QuU2luZ2xlRU1GVGVzdENh\nc2U7CgovKioKICogVGVzdHMgYWdhaW5zdCBKUEEgc2VjdGlvbiAzLjUncyBk\nZXNjcmlwdGlvbiBvZiBjYWxsYmFjayBleGNlcHRpb24gaGFuZGxpbmcuCiAq\nLwpwdWJsaWMgY2xhc3MgVGVzdEV4Y2VwdGlvbnNGcm9tQ2FsbGJhY2tzCiAg\nICBleHRlbmRzIFNpbmdsZUVNRlRlc3RDYXNlIHsKCiAgICBwdWJsaWMgdm9p\nZCBzZXRVcCgpIHsKICAgICAgICBzZXRVcChFeGNlcHRpb25zRnJvbUNhbGxi\nYWNrc0VudGl0eS5jbGFzcyk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVz\ndFByZVBlcnNpc3RFeGNlcHRpb24oKSB7CiAgICAgICAgRW50aXR5TWFuYWdl\nciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIEV4Y2VwdGlvbnNG\ncm9tQ2FsbGJhY2tzRW50aXR5IG8gPSBuZXcgRXhjZXB0aW9uc0Zyb21DYWxs\nYmFja3NFbnRpdHkoKTsKICAgICAgICBvLnNldFRocm93T25QcmVQZXJzaXN0\nKHRydWUpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGVtLnBlcnNpc3Qo\nbyk7CiAgICAgICAgICAgIGZhaWwoInBlcnNpc3Qgc2hvdWxkIGhhdmUgZmFp\nbGVkIik7CiAgICAgICAgfSBjYXRjaCAoQ2FsbGJhY2tUZXN0RXhjZXB0aW9u\nIGN0ZSkgewogICAgICAgICAgICAvLyB0cmFuc2FjdGlvbiBzaG91bGQgYmUg\nc3RpbGwgYWN0aXZlLCBidXQgbWFya2VkIGZvciByb2xsYmFjawogICAgICAg\nICAgICBhc3NlcnRUcnVlKGVtLmdldFRyYW5zYWN0aW9uKCkuaXNBY3RpdmUo\nKSk7CiAgICAgICAgICAgIGFzc2VydFRydWUoZW0uZ2V0VHJhbnNhY3Rpb24o\nKS5nZXRSb2xsYmFja09ubHkoKSk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAg\nICAgICAgICAgaWYgKGVtLmdldFRyYW5zYWN0aW9uKCkuaXNBY3RpdmUoKSkK\nICAgICAgICAgICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkucm9sbGJhY2so\nKTsKICAgICAgICAgICAgZW0uY2xvc2UoKTsKICAgICAgICB9CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgdGVzdFByZVVwZGF0ZUV4Y2VwdGlvbkR1cmluZ0Zs\ndXNoKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCku\nYmVnaW4oKTsKICAgICAgICBFeGNlcHRpb25zRnJvbUNhbGxiYWNrc0VudGl0\neSBvID0gbmV3IEV4Y2VwdGlvbnNGcm9tQ2FsbGJhY2tzRW50aXR5KCk7CiAg\nICAgICAgby5zZXRUaHJvd09uUHJlVXBkYXRlKHRydWUpOwogICAgICAgIGVt\nLnBlcnNpc3Qobyk7CiAgICAgICAgby5zZXRTdHJpbmdGaWVsZCgiZm9vIik7\nCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZW0uZmx1c2goKTsKICAgICAg\nICAgICAgZmFpbCgiZmx1c2ggc2hvdWxkIGhhdmUgZmFpbGVkIik7CiAgICAg\nICAgfSBjYXRjaCAoQ2FsbGJhY2tUZXN0RXhjZXB0aW9uIGN0ZSkgewogICAg\nICAgICAgICAvLyB0cmFuc2FjdGlvbiBzaG91bGQgYmUgc3RpbGwgYWN0aXZl\nLCBidXQgbWFya2VkIGZvciByb2xsYmFjawogICAgICAgICAgICBhc3NlcnRU\ncnVlKGVtLmdldFRyYW5zYWN0aW9uKCkuaXNBY3RpdmUoKSk7CiAgICAgICAg\nICAgIGFzc2VydFRydWUoZW0uZ2V0VHJhbnNhY3Rpb24oKS5nZXRSb2xsYmFj\na09ubHkoKSk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgaWYg\nKGVtLmdldFRyYW5zYWN0aW9uKCkuaXNBY3RpdmUoKSkKICAgICAgICAgICAg\nICAgIGVtLmdldFRyYW5zYWN0aW9uKCkucm9sbGJhY2soKTsKICAgICAgICAg\nICAgZW0uY2xvc2UoKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZv\naWQgdGVzdFByZVVwZGF0ZUV4Y2VwdGlvbkR1cmluZ0NvbW1pdCgpIHsKICAg\nICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAg\nICAgICAgRXhjZXB0aW9uc0Zyb21DYWxsYmFja3NFbnRpdHkgbyA9IG5ldyBF\neGNlcHRpb25zRnJvbUNhbGxiYWNrc0VudGl0eSgpOwogICAgICAgIG8uc2V0\nVGhyb3dPblByZVVwZGF0ZSh0cnVlKTsKICAgICAgICBlbS5wZXJzaXN0KG8p\nOwogICAgICAgIG8uc2V0U3RyaW5nRmllbGQoImZvbyIpOwogICAgICAgIHRy\neSB7CiAgICAgICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7\nCiAgICAgICAgICAgIGZhaWwoImNvbW1pdCBzaG91bGQgaGF2ZSBmYWlsZWQi\nKTsKICAgICAgICB9IGNhdGNoIChSb2xsYmFja0V4Y2VwdGlvbiByZSkgewog\nICAgICAgICAgICBhc3NlcnRFcXVhbHMoQ2FsbGJhY2tUZXN0RXhjZXB0aW9u\nLmNsYXNzLAogICAgICAgICAgICAgICAgcmUuZ2V0Q2F1c2UoKS5nZXRDbGFz\ncygpKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIHRyYW5zYWN0aW9u\nIHNob3VsZCBiZSByb2xsZWQgYmFjayBhdCB0aGlzIHBvaW50CiAgICAgICAg\nICAgIGFzc2VydEZhbHNlKGVtLmdldFRyYW5zYWN0aW9uKCkuaXNBY3RpdmUo\nKSk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgaWYgKGVtLmdl\ndFRyYW5zYWN0aW9uKCkuaXNBY3RpdmUoKSkKICAgICAgICAgICAgICAgIGVt\nLmdldFRyYW5zYWN0aW9uKCkucm9sbGJhY2soKTsKICAgICAgICAgICAgZW0u\nY2xvc2UoKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIHB1YmxpYyB2b2lk\nIHRlc3RQb3N0TG9hZEV4Y2VwdGlvbigpIHsKICAgICAgICBFbnRpdHlNYW5h\nZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBl\nbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgRXhjZXB0aW9u\nc0Zyb21DYWxsYmFja3NFbnRpdHkgbyA9IG5ldyBFeGNlcHRpb25zRnJvbUNh\nbGxiYWNrc0VudGl0eSgpOwogICAgICAgIG8uc2V0VGhyb3dPblBvc3RMb2Fk\nKHRydWUpOwogICAgICAgIGVtLnBlcnNpc3Qobyk7CiAgICAgICAgZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBPYmplY3Qgb2lkID0g\nT3BlbkpQQVBlcnNpc3RlbmNlLmNhc3QoZW0pLmdldE9iamVjdElkKG8pOwog\nICAgICAgIGVtLmNsb3NlKCk7CiAgICAgICAgCiAgICAgICAgZW0gPSBlbWYu\nY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0\naW9uKCkuYmVnaW4oKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBvID0g\nZW0uZmluZChFeGNlcHRpb25zRnJvbUNhbGxiYWNrc0VudGl0eS5jbGFzcywg\nb2lkKTsKICAgICAgICAgICAgZmFpbCgiZmluZCBzaG91bGQgaGF2ZSBmYWls\nZWQiKTsKICAgICAgICB9IGNhdGNoIChDYWxsYmFja1Rlc3RFeGNlcHRpb24g\nY3RlKSB7CiAgICAgICAgICAgIC8vIHRyYW5zYWN0aW9uIHNob3VsZCBiZSBh\nY3RpdmUgYnV0IG1hcmtlZCBmb3Igcm9sbGJhY2sKICAgICAgICAgICAgYXNz\nZXJ0VHJ1ZShlbS5nZXRUcmFuc2FjdGlvbigpLmlzQWN0aXZlKCkpOwogICAg\nICAgICAgICBhc3NlcnRUcnVlKGVtLmdldFRyYW5zYWN0aW9uKCkuZ2V0Um9s\nbGJhY2tPbmx5KCkpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAg\nIGlmIChlbS5nZXRUcmFuc2FjdGlvbigpLmlzQWN0aXZlKCkpCiAgICAgICAg\nICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLnJvbGxiYWNrKCk7CiAgICAg\nICAgICAgIGVtLmNsb3NlKCk7CiAgICAgICAgfQogICAgfQp9Cg==\n","encoding":"base64"}

