{"sha":"d5c0ee86b4b14962173f84c3a2c352ee700f0379","node_id":"MDQ6QmxvYjIwNjM2NDpkNWMwZWU4NmI0YjE0OTYyMTczZjg0YzNhMmMzNTJlZTcwMGYwMzc5","size":4771,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/d5c0ee86b4b14962173f84c3a2c352ee700f0379","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZGV0YWNo\nbWVudDsKCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2Vy\nOwoKaW1wb3J0IGp1bml0LnRleHR1aS5UZXN0UnVubmVyOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5BdXRvRGV0YWNoOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFQZXJzaXN0ZW5j\nZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS50ZXN0\nLlNpbmdsZUVNRlRlc3RDYXNlOwoKLyoqCiAqIFRlc3RzIGRldGFjaG1lbnQg\nZm9yIGJpZGlyZWN0aW9uYWwgb25lLW1hbnkgcmVsYXRpb25zaGlwCiAqCiAq\nIEBhdXRob3IgRGF2aWQgRXp6aW8KICovCnB1YmxpYyBjbGFzcyBUZXN0RGV0\nYWNobWVudE9uZU1hbnkKICAgIGV4dGVuZHMgU2luZ2xlRU1GVGVzdENhc2Ug\newoKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgewogICAgICAgIHNldFVwKERl\ndGFjaG1lbnRPbmVNYW55UGFyZW50LmNsYXNzLCBEZXRhY2htZW50T25lTWFu\neUNoaWxkLmNsYXNzKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0RGV0\nYWNobWVudCgpIHsKICAgICAgICBsb25nIGlkID0gY3JlYXRlUGFyZW50QW5k\nQ2hpbGRyZW4oKTsKICAgIAogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBl\nbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIE9wZW5KUEFQZXJz\naXN0ZW5jZS5jYXN0KGVtKS5zZXRBdXRvRGV0YWNoKEF1dG9EZXRhY2guREVU\nQUNIX05PTlRYUkVBRCk7CiAgICAgICAgRGV0YWNobWVudE9uZU1hbnlQYXJl\nbnQgcGFyZW50ID0gZW0uZmluZChEZXRhY2htZW50T25lTWFueVBhcmVudC5j\nbGFzcywKICAgICAgICAgICAgaWQpOwogICAgICAgIGFzc2VydE5vdE51bGwo\ncGFyZW50KTsKICAgICAgICBhc3NlcnRGYWxzZSgiVGhlIHBhcmVudCB3YXMg\nbm90IGRldGFjaGVkIiwgZW0uY29udGFpbnMocGFyZW50KSk7CiAgICAgICAg\nZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0RmV0Y2hX\naXRoRGV0YWNoKCkgewogICAgICAgIGxvbmcgaWQgPSBjcmVhdGVQYXJlbnRB\nbmRDaGlsZHJlbigpOwogICAgIAogICAgICAgIEVudGl0eU1hbmFnZXIgZW0g\nPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIE9wZW5KUEFQ\nZXJzaXN0ZW5jZS5jYXN0KGVtKS5zZXRBdXRvRGV0YWNoKEF1dG9EZXRhY2gu\nREVUQUNIX05PTlRYUkVBRCk7CiAgICAgICAgRGV0YWNobWVudE9uZU1hbnlQ\nYXJlbnQgcGFyZW50ID0gZW0uZmluZChEZXRhY2htZW50T25lTWFueVBhcmVu\ndC5jbGFzcywKICAgICAgICAgICAgaWQpOwogICAgICAgIGFzc2VydE5vdE51\nbGwocGFyZW50KTsKICAgICAgICBhc3NlcnRFcXVhbHMoInBhcmVudCIsIHBh\ncmVudC5nZXROYW1lKCkpOwogICAgICAgIGFzc2VydEVxdWFscygyLCBwYXJl\nbnQuZ2V0Q2hpbGRyZW4oKS5zaXplKCkpOwogICAgICAgIERldGFjaG1lbnRP\nbmVNYW55Q2hpbGQgY2hpbGQwID0gcGFyZW50LmdldENoaWxkcmVuKCkuZ2V0\nKDApOwogICAgICAgIERldGFjaG1lbnRPbmVNYW55Q2hpbGQgY2hpbGQxID0g\ncGFyZW50LmdldENoaWxkcmVuKCkuZ2V0KDEpOwogICAgICAgIGFzc2VydE5v\ndE51bGwoIkRpZCBub3QgZmluZCBleHBlY3RlZCBmaXJzdCBjaGlsZCIsIGNo\naWxkMCk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbCgiRGlkIG5vdCBmaW5kIGV4\ncGVjdGVkIHNlY29uZCBjaGlsZCIsIGNoaWxkMSk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKCJjaGlsZDAiLCBjaGlsZDAuZ2V0TmFtZSgpKTsKICAgICAgICBh\nc3NlcnRGYWxzZSgiVGhlIGZpcnN0IGNoaWxkIHdhcyBub3QgZGV0YWNoZWQi\nLCBlbS5jb250YWlucyhjaGlsZDApKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nImNoaWxkMSIsIGNoaWxkMS5nZXROYW1lKCkpOwogICAgICAgIGFzc2VydEZh\nbHNlKCJUaGUgc2Vjb25kIGNoaWxkIHdhcyBub3QgZGV0YWNoZWQiLCBlbS5j\nb250YWlucyhjaGlsZDEpKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQog\nICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0RmV0Y2hXaXRoRGV0YWNoRm9yVG9P\nbmVSZWxhdGlvbnNoaXAoKSB7CiAgICAgICAgbG9uZyBpZCA9IGNyZWF0ZVBh\ncmVudEFuZENoaWxkcmVuKCk7CiAgICAgICAgCiAgICAgICAgRW50aXR5TWFu\nYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAg\nT3BlbkpQQVBlcnNpc3RlbmNlLmNhc3QoZW0pLnNldEF1dG9EZXRhY2goQXV0\nb0RldGFjaC5ERVRBQ0hfTk9OVFhSRUFEKTsKICAgICAgICBEZXRhY2htZW50\nT25lTWFueVBhcmVudCBwYXJlbnQgPSBlbS5maW5kKERldGFjaG1lbnRPbmVN\nYW55UGFyZW50LmNsYXNzLAogICAgICAgICAgICBpZCk7CiAgICAgICAgYXNz\nZXJ0Tm90TnVsbChwYXJlbnQpOwogICAgICAgIGFzc2VydEVxdWFscygyLCBw\nYXJlbnQuZ2V0Q2hpbGRyZW4oKS5zaXplKCkpOwogICAgICAgIGFzc2VydEVx\ndWFscygiVG9PbmUgcmVsYXRpb25zaGlwIHdhcyBub3QgZWFnZXJseSBmZXRj\naGVkIiwgCiAgICAgICAgICAgICAgcGFyZW50LCBwYXJlbnQuZ2V0Q2hpbGRy\nZW4oKS5nZXQoMCkuZ2V0UGFyZW50KCkpOwogICAgICAgIGVtLmNsb3NlKCk7\nCiAgICB9CiAgICAKICAgIHByaXZhdGUgbG9uZyBjcmVhdGVQYXJlbnRBbmRD\naGlsZHJlbigpIHsKICAgICAgICBEZXRhY2htZW50T25lTWFueVBhcmVudCBw\nYXJlbnQgPSBuZXcgRGV0YWNobWVudE9uZU1hbnlQYXJlbnQoKTsKICAgICAg\nICBwYXJlbnQuc2V0TmFtZSgicGFyZW50Iik7CiAgICAgICAgZm9yIChpbnQg\naSA9IDA7IGkgPCAyOyBpKyspIHsKICAgICAgICAgICAgRGV0YWNobWVudE9u\nZU1hbnlDaGlsZCBjaGlsZCA9IG5ldyBEZXRhY2htZW50T25lTWFueUNoaWxk\nKCk7CiAgICAgICAgICAgIGNoaWxkLnNldE5hbWUoImNoaWxkIiArIGkpOwog\nICAgICAgICAgICBwYXJlbnQuYWRkQ2hpbGQoY2hpbGQpOwogICAgICAgIH0K\nICAgICAgCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVF\nbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5i\nZWdpbigpOwogICAgICAgIGVtLnBlcnNpc3QocGFyZW50KTsKICAgICAgICBl\nbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIGxvbmcgaWQg\nPSBwYXJlbnQuZ2V0SWQoKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHBhcmVu\ndC5nZXRDaGlsZHJlbigpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMiwgcGFy\nZW50LmdldENoaWxkcmVuKCkuc2l6ZSgpKTsKICAgICAgICBhc3NlcnRUcnVl\nKCJUaGUgcGFyZW50IGlzIG5vdCBtYW5hZ2VkIiwgZW0uY29udGFpbnMocGFy\nZW50KSk7CiAgICAgICAgRGV0YWNobWVudE9uZU1hbnlDaGlsZCBjaGlsZDAg\nPSBwYXJlbnQuZ2V0Q2hpbGRyZW4oKS5nZXQoMCk7CiAgICAgICAgRGV0YWNo\nbWVudE9uZU1hbnlDaGlsZCBjaGlsZDEgPSBwYXJlbnQuZ2V0Q2hpbGRyZW4o\nKS5nZXQoMSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJjaGlsZDAiLCBjaGls\nZDAuZ2V0TmFtZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoImNoaWxkMSIs\nIGNoaWxkMS5nZXROYW1lKCkpOwogICAgICAgIGFzc2VydEVxdWFscygiVGhl\nIGZpcnN0IGNoaWxkIGhhcyBubyByZWxhdGlvbnNoaXAgdG8gdGhlIHBhcmVu\ndCIsIAogICAgICAgICAgICBwYXJlbnQsIGNoaWxkMC5nZXRQYXJlbnQoKSk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKCJUaGUgc2Vjb25kIGNoaWxkIGhhcyBu\nbyByZWxhdGlvbnNoaXAgdG8gdGhlIHBhcmVudCIsIAogICAgICAgICAgICBw\nYXJlbnQsIGNoaWxkMS5nZXRQYXJlbnQoKSk7CiAgICAgICAgZW0uY2xvc2Uo\nKTsKICAgICAgICByZXR1cm4gaWQ7CiAgICB9CgogICAgcHVibGljIHN0YXRp\nYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykgewogICAgICAgIFRlc3RSdW5u\nZXIucnVuKFRlc3REZXRhY2htZW50T25lTWFueS5jbGFzcyk7CiAgICB9Cn0K\nCg==\n","encoding":"base64"}

