{"sha":"b73c61dd2057647caed4aceb27304f9ef7bdb83d","node_id":"MDQ6QmxvYjIwNjM2NDpiNzNjNjFkZDIwNTc2NDdjYWVkNGFjZWIyNzMwNGY5ZWY3YmRiODNk","size":4687,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/b73c61dd2057647caed4aceb27304f9ef7bdb83d","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuamRiYzsK\nCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyOwppbXBv\ncnQgamF2YXgucGVyc2lzdGVuY2UuTG9ja01vZGVUeXBlOwoKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS50ZXN0LlNRTExpc3RlbmVy\nVGVzdENhc2U7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVu\nY2Uuc2ltcGxlLkFsbEZpZWxkVHlwZXM7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQVBlcnNpc3RlbmNlOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLkZldGNoUGxhbjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBRW50\naXR5TWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNx\nbC5EQjJEaWN0aW9uYXJ5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpk\nYmMuc3FsLkRCRGljdGlvbmFyeTsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5qZGJjLnNxbC5IU1FMRGljdGlvbmFyeTsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLmNvbmYuSkRCQ0NvbmZpZ3VyYXRpb247CgpwdWJsaWMg\nY2xhc3MgVGVzdFNlbGVjdEZvclVwZGF0ZU92ZXJyaWRlCiAgICBleHRlbmRz\nIFNRTExpc3RlbmVyVGVzdENhc2UgewoKICAgIHB1YmxpYyB2b2lkIHNldFVw\nKCkgewogICAgICAgIHNldFVwKEFsbEZpZWxkVHlwZXMuY2xhc3MsCiAgICAg\nICAgICAgICJvcGVuanBhLk9wdGltaXN0aWMiLCAiZmFsc2UiLAogICAgICAg\nICAgICAib3BlbmpwYS5Mb2NrTWFuYWdlciIsICJwZXNzaW1pc3RpYyIsCiAg\nICAgICAgICAgICJvcGVuanBhLlJlYWRMb2NrTGV2ZWwiLCAibm9uZSIpOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RTZWxlY3RGb3JVcGRhdGVPdmVy\ncmlkZSgpIHsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBlbSA9CiAg\nICAgICAgICAgIE9wZW5KUEFQZXJzaXN0ZW5jZS5jYXN0KGVtZi5jcmVhdGVF\nbnRpdHlNYW5hZ2VyKCkpOwogICAgICAgIERCRGljdGlvbmFyeSBkaWN0ID0g\nKChKREJDQ29uZmlndXJhdGlvbikgZW0uZ2V0Q29uZmlndXJhdGlvbigpKQog\nICAgICAgICAgICAuZ2V0REJEaWN0aW9uYXJ5SW5zdGFuY2UoKTsKCiAgICAg\nICAgLy8gaHNxbCBkb2Vzbid0IHN1cHBvcnQgbG9ja2luZzsgY2lyY3VtdmVu\ndCB0aGUgdGVzdAogICAgICAgIGlmIChkaWN0IGluc3RhbmNlb2YgSFNRTERp\nY3Rpb25hcnkpCiAgICAgICAgICAgIHJldHVybjsKCiAgICAgICAgc3FsLmNs\nZWFyKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5iZWdpbigpOwogICAgICAgICAgICBPcGVuSlBBUGVyc2lzdGVu\nY2UuY2FzdChlbSkuZ2V0RmV0Y2hQbGFuKCkKICAgICAgICAgICAgICAgIC5z\nZXRSZWFkTG9ja01vZGUoTG9ja01vZGVUeXBlLldSSVRFKTsKICAgICAgICAg\nICAgZW0uZmluZChBbGxGaWVsZFR5cGVzLmNsYXNzLCAwKTsKCiAgICAgICAg\nICAgIGFzc2VydEVxdWFscygxLCBzcWwuc2l6ZSgpKTsKICAgICAgICAgICAg\naWYgKGRpY3QgaW5zdGFuY2VvZiBEQjJEaWN0aW9uYXJ5ICYmKCgoKERCMkRp\nY3Rpb25hcnkpZGljdCkuCiAgICAgICAgICAgICAgICBnZXREYjJTZXJ2ZXJU\neXBlKCkgPT0gMSkgfHwgKChEQjJEaWN0aW9uYXJ5KWRpY3QpCiAgICAgICAg\nICAgICAgICAgICAgLmdldERiMlNlcnZlclR5cGUoKT09IDIpKSB7CiAgICAg\nICAgICAgICAgICBhc3NlcnRFcXVhbHMoMSwgc3FsLnNpemUoKSk7CiAgICAg\nICAgICAgICAgICBhc3NlcnRTUUwoIlNFTEVDVCB0MC5ib29sZWFuRmllbGQs\nIHQwLmJ5dGVGaWVsZCwgIgogICAgICAgICAgICAgICAgICAgICsgInQwLmNo\nYXJGaWVsZCwgdDAuZGF0ZUZpZWxkLCB0MC5kb3VibGVGaWVsZCwiCiAgICAg\nICAgICAgICAgICAgICAgKyAiIHQwLmZsb2F0RmllbGQsIHQwLmludEZpZWxk\nLCB0MC5sb25nRmllbGQsIgogICAgICAgICAgICAgICAgICAgICsgIiB0MC5z\naG9ydEZpZWxkLCB0MC5zdHJpbmdGaWVsZCBGUk9NICIKICAgICAgICAgICAg\nICAgICAgICArICJBbGxGaWVsZFR5cGVzIHQwIFdIRVJFIHQwLmlkID0gXFw/\nICIKICAgICAgICAgICAgICAgICAgICArICIgRk9SIFVQREFURSBPRiBvcHRp\nbWl6ZSBmb3IgMSByb3ciKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAv\nLyBpdCBpcyBEQjIgdjgyIG9yIGxhdGVyCiAgICAgICAgICAgIGVsc2UgaWYg\nKGRpY3QgaW5zdGFuY2VvZiBEQjJEaWN0aW9uYXJ5ICYmKCgoKERCMkRpY3Rp\nb25hcnkpZGljdCkuCiAgICAgICAgICAgICAgICBnZXREYjJTZXJ2ZXJUeXBl\nKCkgPT0gMykgfHwgKChEQjJEaWN0aW9uYXJ5KWRpY3QpCiAgICAgICAgICAg\nICAgICAgICAgLmdldERiMlNlcnZlclR5cGUoKSA9PSA0KSkgewogICAgICAg\nICAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIHNxbC5zaXplKCkpOwogICAgICAg\nICAgICAgICAgYXNzZXJ0U1FMKCJTRUxFQ1QgdDAuYm9vbGVhbkZpZWxkLCB0\nMC5ieXRlRmllbGQsICIKICAgICAgICAgICAgICAgICAgICArICJ0MC5jaGFy\nRmllbGQsIHQwLmRhdGVGaWVsZCwgdDAuZG91YmxlRmllbGQsIgogICAgICAg\nICAgICAgICAgICAgICsgIiB0MC5mbG9hdEZpZWxkLCB0MC5pbnRGaWVsZCwg\ndDAubG9uZ0ZpZWxkLCIKICAgICAgICAgICAgICAgICAgICArICIgdDAuc2hv\ncnRGaWVsZCwgdDAuc3RyaW5nRmllbGQgRlJPTSAiCiAgICAgICAgICAgICAg\nICAgICAgKyAiQWxsRmllbGRUeXBlcyB0MCBXSEVSRSB0MC5pZCA9IFxcPyAi\nCiAgICAgICAgICAgICAgICAgICAgKyAiIEZPUiBSRUFEIE9OTFkgV0lUSCBS\nUyBVU0UgQU5EIEtFRVAgVVBEQVRFIExPQ0tTIiAKICAgICAgICAgICAgICAg\nICAgICArICIgb3B0aW1pemUgZm9yIDEgcm93Iik7CiAgICAgICAgICAgIH0K\nICAgICAgICAgICAgZWxzZSBpZiAoZGljdCBpbnN0YW5jZW9mIERCMkRpY3Rp\nb25hcnkgJiYgKChEQjJEaWN0aW9uYXJ5KWRpY3QpLgogICAgICAgICAgICAg\nICAgZ2V0RGIyU2VydmVyVHlwZSgpID09IDUpIHsKICAgICAgICAgICAgICAg\nIGFzc2VydEVxdWFscygxLCBzcWwuc2l6ZSgpKTsKICAgICAgICAgICAgICAg\nIGFzc2VydFNRTCgiU0VMRUNUIHQwLmJvb2xlYW5GaWVsZCwgdDAuYnl0ZUZp\nZWxkLCAiCiAgICAgICAgICAgICAgICAgICAgKyAidDAuY2hhckZpZWxkLCB0\nMC5kYXRlRmllbGQsIHQwLmRvdWJsZUZpZWxkLCIKICAgICAgICAgICAgICAg\nICAgICArICIgdDAuZmxvYXRGaWVsZCwgdDAuaW50RmllbGQsIHQwLmxvbmdG\naWVsZCwiCiAgICAgICAgICAgICAgICAgICAgKyAiIHQwLnNob3J0RmllbGQs\nIHQwLnN0cmluZ0ZpZWxkIEZST00gIgogICAgICAgICAgICAgICAgICAgICsg\nIkFsbEZpZWxkVHlwZXMgdDAgV0hFUkUgdDAuaWQgPSBcXD8gIgogICAgICAg\nICAgICAgICAgICAgICsgIiBGT1IgUkVBRCBPTkxZIFdJVEggUlMgVVNFIEFO\nRCBLRUVQIEVYQ0xVU0lWRSBMT0NLUyIKICAgICAgICAgICAgICAgICAgICAr\nICIgb3B0aW1pemUgZm9yIDEgcm93Iik7CiAgICAgICAgICAgIH0gICAgCiAg\nICAgICAgICAgIGVsc2UgaWYgKGRpY3QgaW5zdGFuY2VvZiBEQjJEaWN0aW9u\nYXJ5KSB7CiAgICAgICAgICAgICAgICBmYWlsKCJPcGVuSlBBIGN1cnJlbnRs\neSBvbmx5IHN1cHBvcnRzIHBlci1xdWVyeSBpc29sYXRpb24gIiArCiAgICAg\nICAgICAgICAgICAibGV2ZWwgY29uZmlndXJhdGlvbiBvbiB0aGUgZm9sbG93\naW5nIGRhdGFiYXNlczogREIyIik7CiAgICAgICAgICAgIH0KICAgICAgICB9\nIGZpbmFsbHkgewogICAgICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLnJv\nbGxiYWNrKCk7CiAgICAgICAgICAgIGVtLmNsb3NlKCk7CiAgICAgICAgfQog\nICAgfQp9Cg==\n","encoding":"base64"}

