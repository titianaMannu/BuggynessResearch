{"sha":"1a14045865dc4baad50c2982810b1b06dff1a7b9","node_id":"MDQ6QmxvYjIwNjM2NDoxYTE0MDQ1ODY1ZGM0YmFhZDUwYzI5ODI4MTBiMWIwNmRmZjFhN2I5","size":5405,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/1a14045865dc4baad50c2982810b1b06dff1a7b9","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UucmVsYXRp\nb25zOwoKaW1wb3J0IGphdmEudXRpbC5MaXN0OwppbXBvcnQgamF2YXgucGVy\nc2lzdGVuY2UuRW50aXR5TWFuYWdlcjsKCmltcG9ydCBqdW5pdC50ZXh0dWku\nVGVzdFJ1bm5lcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmNv\nbmYuSkRCQ0NvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXI7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UudGVzdC5TaW5nbGVFTUZU\nZXN0Q2FzZTsKCi8qKgogKiBUZXN0cyBhIGNhc2NhZGluZyBvbmUtbWFueSBi\nYWNrZWQgYnkgYSBmb3JlaWduIGtleS4KICoKICogQGF1dGhvciBBYmUgV2hp\ndGUKICovCnB1YmxpYyBjbGFzcyBUZXN0Q2FzY2FkaW5nT25lTWFueVdpdGhG\nb3JlaWduS2V5CiAgICBleHRlbmRzIFNpbmdsZUVNRlRlc3RDYXNlIHsKCiAg\nICBwdWJsaWMgdm9pZCBzZXRVcCgpIHsKICAgICAgICBzZXRVcChDYXNjYWRp\nbmdPbmVNYW55UGFyZW50LmNsYXNzLCBDYXNjYWRpbmdPbmVNYW55Q2hpbGQu\nY2xhc3MpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RQZXJzaXN0KCkg\newogICAgICAgIENhc2NhZGluZ09uZU1hbnlQYXJlbnQgcGFyZW50ID0gbmV3\nIENhc2NhZGluZ09uZU1hbnlQYXJlbnQoKTsKICAgICAgICBwYXJlbnQuc2V0\nTmFtZSgicGFyZW50Iik7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCAy\nOyBpKyspIHsKICAgICAgICAgICAgQ2FzY2FkaW5nT25lTWFueUNoaWxkIGNo\naWxkID0gbmV3IENhc2NhZGluZ09uZU1hbnlDaGlsZCgpOwogICAgICAgICAg\nICBjaGlsZC5zZXROYW1lKCJjaGlsZCIgKyBpKTsKICAgICAgICAgICAgcGFy\nZW50LmFkZENoaWxkKGNoaWxkKTsKICAgICAgICB9CgogICAgICAgIEVudGl0\neU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAg\nICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBlbS5w\nZXJzaXN0KHBhcmVudCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5j\nb21taXQoKTsKICAgICAgICBsb25nIGlkID0gcGFyZW50LmdldElkKCk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKDIsIHBhcmVudC5nZXRDaGlsZHJlbigpLnNp\nemUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJjaGlsZDAiLCBwYXJlbnQu\nZ2V0Q2hpbGRyZW4oKS5nZXQoMCkuZ2V0TmFtZSgpKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoImNoaWxkMSIsIHBhcmVudC5nZXRDaGlsZHJlbigpLmdldCgx\nKS5nZXROYW1lKCkpOwogICAgICAgIGVtLmNsb3NlKCk7CgogICAgICAgIGVt\nID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBwYXJlbnQg\nPSBlbS5maW5kKENhc2NhZGluZ09uZU1hbnlQYXJlbnQuY2xhc3MsIGlkKTsK\nICAgICAgICBhc3NlcnROb3ROdWxsKHBhcmVudCk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKCJwYXJlbnQiLCBwYXJlbnQuZ2V0TmFtZSgpKTsKICAgICAgICBh\nc3NlcnRFcXVhbHMoMiwgcGFyZW50LmdldENoaWxkcmVuKCkuc2l6ZSgpKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoImNoaWxkMCIsIHBhcmVudC5nZXRDaGls\nZHJlbigpLmdldCgwKS5nZXROYW1lKCkpOwogICAgICAgIGFzc2VydEVxdWFs\ncygiY2hpbGQxIiwgcGFyZW50LmdldENoaWxkcmVuKCkuZ2V0KDEpLmdldE5h\nbWUoKSk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCB0ZXN0RGVsZXRlKCkgewogICAgICAgIENhc2NhZGluZ09uZU1hbnlQ\nYXJlbnQgcGFyZW50ID0gbmV3IENhc2NhZGluZ09uZU1hbnlQYXJlbnQoKTsK\nICAgICAgICBwYXJlbnQuc2V0TmFtZSgicGFyZW50Iik7CiAgICAgICAgZm9y\nIChpbnQgaSA9IDA7IGkgPCAyOyBpKyspIHsKICAgICAgICAgICAgQ2FzY2Fk\naW5nT25lTWFueUNoaWxkIGNoaWxkID0gbmV3IENhc2NhZGluZ09uZU1hbnlD\naGlsZCgpOwogICAgICAgICAgICBjaGlsZC5zZXROYW1lKCJjaGlsZCIgKyBp\nKTsKICAgICAgICAgICAgcGFyZW50LmFkZENoaWxkKGNoaWxkKTsKICAgICAg\nICB9CgogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50\naXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVn\naW4oKTsKICAgICAgICBlbS5wZXJzaXN0KHBhcmVudCk7CiAgICAgICAgZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBsb25nIGlkID0g\ncGFyZW50LmdldElkKCk7CiAgICAgICAgZW0uY2xvc2UoKTsKCiAgICAgICAg\nZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIHBhcmVu\ndCA9IGVtLmZpbmQoQ2FzY2FkaW5nT25lTWFueVBhcmVudC5jbGFzcywgaWQp\nOwogICAgICAgIGFzc2VydE5vdE51bGwocGFyZW50KTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoMiwgcGFyZW50LmdldENoaWxkcmVuKCkuc2l6ZSgpKTsKICAg\nICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgZW0u\ncmVtb3ZlKHBhcmVudCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5j\nb21taXQoKTsKICAgICAgICBhc3NlcnRSZW1vdmVkKGVtLCBpZCk7CiAgICAg\nICAgZW0uY2xvc2UoKTsKCiAgICAgICAgZW0gPSBlbWYuY3JlYXRlRW50aXR5\nTWFuYWdlcigpOwogICAgICAgIGFzc2VydFJlbW92ZWQoZW0sIGlkKTsKICAg\nICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHByaXZhdGUgdm9pZCBhc3Nl\ncnRSZW1vdmVkKEVudGl0eU1hbmFnZXIgZW0sIGxvbmcgaWQpIHsKICAgICAg\nICBhc3NlcnROdWxsKGVtLmZpbmQoQ2FzY2FkaW5nT25lTWFueVBhcmVudC5j\nbGFzcywgaWQpKTsKICAgICAgICBMaXN0IHJlcyA9IGVtLmNyZWF0ZVF1ZXJ5\nKCJzZWxlY3QgYyBmcm9tIENhc2NhZGluZ09uZU1hbnlDaGlsZCBjIikuCiAg\nICAgICAgICAgIGdldFJlc3VsdExpc3QoKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoMCwgcmVzLnNpemUoKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVz\ndEZvcmVpZ25LZXkoKSB7CiAgICAgICAgSkRCQ0NvbmZpZ3VyYXRpb24gY29u\nZiA9IChKREJDQ29uZmlndXJhdGlvbikgZW1mLmdldENvbmZpZ3VyYXRpb24o\nKTsKICAgICAgICBpZiAoIWNvbmYuZ2V0REJEaWN0aW9uYXJ5SW5zdGFuY2Uo\nKS5zdXBwb3J0c0ZvcmVpZ25LZXlzKQogICAgICAgICAgICByZXR1cm47Cgog\nICAgICAgIENhc2NhZGluZ09uZU1hbnlQYXJlbnQgcGFyZW50ID0gbmV3IENh\nc2NhZGluZ09uZU1hbnlQYXJlbnQoKTsKICAgICAgICBwYXJlbnQuc2V0TmFt\nZSgicGFyZW50Iik7CiAgICAgICAgQ2FzY2FkaW5nT25lTWFueUNoaWxkIGNo\naWxkOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgMjsgaSsrKSB7CiAg\nICAgICAgICAgIGNoaWxkID0gbmV3IENhc2NhZGluZ09uZU1hbnlDaGlsZCgp\nOwogICAgICAgICAgICBjaGlsZC5zZXROYW1lKCJjaGlsZCIgKyBpKTsKICAg\nICAgICAgICAgcGFyZW50LmFkZENoaWxkKGNoaWxkKTsKICAgICAgICB9Cgog\nICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFu\nYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsK\nICAgICAgICBlbS5wZXJzaXN0KHBhcmVudCk7CiAgICAgICAgZW0uZ2V0VHJh\nbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBsb25nIGlkID0gcGFyZW50\nLmdldElkKCk7CiAgICAgICAgZW0uY2xvc2UoKTsKCiAgICAgICAgT3BlbkpQ\nQUVudGl0eU1hbmFnZXIgb2VtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBl\nbWYuCiAgICAgICAgICAgIGNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAg\nICBwYXJlbnQgPSBvZW0uZmluZChDYXNjYWRpbmdPbmVNYW55UGFyZW50LmNs\nYXNzLCBpZCk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChwYXJlbnQpOwogICAg\nICAgIGFzc2VydEVxdWFscygyLCBwYXJlbnQuZ2V0Q2hpbGRyZW4oKS5zaXpl\nKCkpOwogICAgICAgIGNoaWxkID0gcGFyZW50LmdldENoaWxkcmVuKCkuZ2V0\nKDApOyAKICAgICAgICBvZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwog\nICAgICAgIG9lbS5yZW1vdmUocGFyZW50KTsKICAgICAgICAvLyB1bmRlbGV0\nZSBvbmUgY2hpbGQKICAgICAgICBhc3NlcnRUcnVlKG9lbS5pc1JlbW92ZWQo\nY2hpbGQpKTsKICAgICAgICBvZW0ucGVyc2lzdChjaGlsZCk7CiAgICAgICAg\nYXNzZXJ0RmFsc2Uob2VtLmlzUmVtb3ZlZChjaGlsZCkpOwogICAgICAgIGFz\nc2VydEVxdWFscyhwYXJlbnQsIGNoaWxkLmdldFBhcmVudCgpKTsKICAgICAg\nICB0cnkgewogICAgICAgICAgICBvZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21t\naXQoKTsKICAgICAgICAgICAgZmFpbCgiQ29tbWl0IHNob3VsZCBoYXZlIGZh\naWxlZCBkdWUgdG8gRksgY29uc3RyYWludCB2aW9sYXRpb24uIik7CiAgICAg\nICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICB9CiAgICAgICAg\nb2VtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIHN0YXRpYyB2b2lkIG1h\naW4oU3RyaW5nW10gYXJncykgewogICAgICAgIFRlc3RSdW5uZXIucnVuKFRl\nc3RDYXNjYWRpbmdPbmVNYW55V2l0aEZvcmVpZ25LZXkuY2xhc3MpOwogICAg\nfQp9Cgo=\n","encoding":"base64"}

