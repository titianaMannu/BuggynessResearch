{"sha":"bdee6bf99d055af2f895740c965e29b5beb0d90c","node_id":"MDQ6QmxvYjIwNjM2NDpiZGVlNmJmOTlkMDU1YWYyZjg5NTc0MGM5NjVlMjliNWJlYjBkOTBj","size":7634,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/bdee6bf99d055af2f895740c965e29b5beb0d90c","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UucmVsYXRp\nb25zOwoKaW1wb3J0IGphdmEudXRpbC5MaXN0OwppbXBvcnQgamF2YXgucGVy\nc2lzdGVuY2UuRW50aXR5TWFuYWdlcjsKCmltcG9ydCBqdW5pdC50ZXh0dWku\nVGVzdFJ1bm5lcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0\nZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBUXVlcnk7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UudGVzdC5TUUxMaXN0ZW5lclRl\nc3RDYXNlOwoKLyoqCiAqIFRlc3QgdGhhdCB3aGVuIGJvdGggc2lkZXMgb2Yg\nYSBtYXBwZWQtYnkgcmVsYXRpb24gYXJlIGVhZ2VyIGZldGNoZWQsIAogKiB0\ncmF2ZXJzaW5nIGZyb20gdGhlIG1hcHBlZC1ieSBzaWRlIHRvIHRoZSBtYXBw\naW5nIHNpZGUgY3V0cyBvZmYgLS0gdGhhdAogKiB3ZSBkb24ndCB0cmF2ZXJz\nZSBpbiBhIGxvb3AgYmFjayB0byB0aGUgbWFwcGVkLWJ5IHNpZGUgaW4gdGhl\nIGdlbmVyYXRlZAogKiBTUUwuCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAq\nLwpwdWJsaWMgY2xhc3MgVGVzdEVhZ2VyQmlkaVNRTAogICAgZXh0ZW5kcyBT\nUUxMaXN0ZW5lclRlc3RDYXNlIHsKCiAgICBwcml2YXRlIGxvbmcgaWQxOwog\nICAgcHJpdmF0ZSBsb25nIGlkMjsKCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgp\nIHsKICAgICAgICBzZXRVcChCaWRpUGFyZW50LmNsYXNzLCBCaWRpQ2hpbGQu\nY2xhc3MpOwogICAgICAgIAogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBl\nbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5z\nYWN0aW9uKCkuYmVnaW4oKTsKCiAgICAgICAgZm9yIChpbnQgaSA9IDE7IGkg\nPD0gMjsgaSsrKSB7CiAgICAgICAgICAgIEJpZGlQYXJlbnQgcGFyZW50ID0g\nbmV3IEJpZGlQYXJlbnQoKTsKICAgICAgICAgICAgcGFyZW50LnNldE5hbWUo\nInBhcmVudCIgKyBpKTsKICAgICAgICAgICAgZW0ucGVyc2lzdChwYXJlbnQp\nOwoKICAgICAgICAgICAgQmlkaUNoaWxkIG9uZU9uZUNoaWxkID0gbmV3IEJp\nZGlDaGlsZCgpOwogICAgICAgICAgICBvbmVPbmVDaGlsZC5zZXROYW1lKCJv\nbmVUb09uZUNoaWxkIiArIGkpOwogICAgICAgICAgICBvbmVPbmVDaGlsZC5z\nZXRPbmVUb09uZVBhcmVudChwYXJlbnQpOwogICAgICAgICAgICBwYXJlbnQu\nc2V0T25lVG9PbmVDaGlsZChvbmVPbmVDaGlsZCk7CiAgICAgICAgICAgIGVt\nLnBlcnNpc3Qob25lT25lQ2hpbGQpOwoKICAgICAgICAgICAgZm9yIChpbnQg\naiA9IDE7IGogPD0gMzsgaisrKSB7CiAgICAgICAgICAgICAgICBCaWRpQ2hp\nbGQgb25lTWFueUNoaWxkID0gbmV3IEJpZGlDaGlsZCgpOwogICAgICAgICAg\nICAgICAgb25lTWFueUNoaWxkLnNldE5hbWUoIm9uZVRvTWFueUNoaWxkIiAr\nIGkgKyAiOjoiICsgaik7CiAgICAgICAgICAgICAgICBvbmVNYW55Q2hpbGQu\nc2V0T25lVG9NYW55UGFyZW50KHBhcmVudCk7CiAgICAgICAgICAgICAgICBw\nYXJlbnQuZ2V0T25lVG9NYW55Q2hpbGRyZW4oKS5hZGQob25lTWFueUNoaWxk\nKTsKICAgICAgICAgICAgICAgIGVtLnBlcnNpc3Qob25lTWFueUNoaWxkKTsK\nICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGkgPT0gMSkKICAgICAg\nICAgICAgICAgIGlkMSA9IHBhcmVudC5nZXRJZCgpOwogICAgICAgICAgICBl\nbHNlCiAgICAgICAgICAgICAgICBpZDIgPSBwYXJlbnQuZ2V0SWQoKTsKICAg\nICAgICB9CgogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7\nCiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0\nZXN0RWFnZXJPd25lck9uZVRvTWFueUZpbmQoKSB7CiAgICAgICAgc3FsLmNs\nZWFyKCk7CgogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIGVtID0gZW1m\nLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRGZXRjaFBs\nYW4oKS5hZGRGaWVsZChCaWRpUGFyZW50LmNsYXNzLCAib25lVG9NYW55Q2hp\nbGRyZW4iKTsKICAgICAgICBlbS5nZXRGZXRjaFBsYW4oKS5hZGRGaWVsZChC\naWRpQ2hpbGQuY2xhc3MsICJvbmVUb01hbnlQYXJlbnQiKTsKICAgICAgICBC\naWRpUGFyZW50IHBhcmVudCA9IGVtLmZpbmQoQmlkaVBhcmVudC5jbGFzcywg\naWQxKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgc3FsLnNpemUoKSk7CiAg\nICAgICAgYXNzZXJ0Tm90U1FMKCIuKiBMRUZUIE9VVEVSIEpPSU4gQmlkaVBh\ncmVudCAuKiIpOwogICAgICAgIGFzc2VydEVxdWFscygicGFyZW50MSIsIHBh\ncmVudC5nZXROYW1lKCkpOwogICAgICAgIGFzc2VydEVxdWFscygzLCBwYXJl\nbnQuZ2V0T25lVG9NYW55Q2hpbGRyZW4oKS5zaXplKCkpOwogICAgICAgIGZv\nciAoaW50IGkgPSAwOyBpIDwgMzsgaSsrKSB7CiAgICAgICAgICAgIGFzc2Vy\ndEVxdWFscygib25lVG9NYW55Q2hpbGQxOjoiICsgKGkgKyAxKSwgCiAgICAg\nICAgICAgICAgICBwYXJlbnQuZ2V0T25lVG9NYW55Q2hpbGRyZW4oKS5nZXQo\naSkuZ2V0TmFtZSgpKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKHBhcmVu\ndCwKICAgICAgICAgICAgICAgIHBhcmVudC5nZXRPbmVUb01hbnlDaGlsZHJl\nbigpLmdldChpKS5nZXRPbmVUb01hbnlQYXJlbnQoKSk7CiAgICAgICAgfQog\nICAgICAgIGFzc2VydEVxdWFscygxLCBzcWwuc2l6ZSgpKTsKICAgICAgICBl\nbS5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RFYWdlck93\nbmVyT25lVG9PbmVGaW5kKCkgewogICAgICAgIHNxbC5jbGVhcigpOwoKICAg\nICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRp\ndHlNYW5hZ2VyKCk7CiAgICAgICAgZW0uZ2V0RmV0Y2hQbGFuKCkuYWRkRmll\nbGQoQmlkaVBhcmVudC5jbGFzcywgIm9uZVRvT25lQ2hpbGQiKTsKICAgICAg\nICBlbS5nZXRGZXRjaFBsYW4oKS5hZGRGaWVsZChCaWRpQ2hpbGQuY2xhc3Ms\nICJvbmVUb09uZVBhcmVudCIpOwogICAgICAgIEJpZGlQYXJlbnQgcGFyZW50\nID0gZW0uZmluZChCaWRpUGFyZW50LmNsYXNzLCBpZDEpOwogICAgICAgIGFz\nc2VydEVxdWFscygxLCBzcWwuc2l6ZSgpKTsKICAgICAgICBhc3NlcnROb3RT\nUUwoIi4qIExFRlQgT1VURVIgSk9JTiBCaWRpUGFyZW50IC4qIik7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKCJwYXJlbnQxIiwgcGFyZW50LmdldE5hbWUoKSk7\nCiAgICAgICAgYXNzZXJ0Tm90TnVsbChwYXJlbnQuZ2V0T25lVG9PbmVDaGls\nZCgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIm9uZVRvT25lQ2hpbGQxIiwg\ncGFyZW50LmdldE9uZVRvT25lQ2hpbGQoKS5nZXROYW1lKCkpOwogICAgICAg\nIGFzc2VydEVxdWFscyhwYXJlbnQsIHBhcmVudC5nZXRPbmVUb09uZUNoaWxk\nKCkuZ2V0T25lVG9PbmVQYXJlbnQoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKDEsIHNxbC5zaXplKCkpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgdGVzdEVhZ2VyT3duZXJPbmVUb01hbnlRdWVyeSgp\nIHsKICAgICAgICBzcWwuY2xlYXIoKTsKCiAgICAgICAgT3BlbkpQQUVudGl0\neU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAg\nICAgIE9wZW5KUEFRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnkoIlNFTEVDVCBv\nIEZST00gQmlkaVBhcmVudCBvICIKICAgICAgICAgICAgKyAiT1JERVIgQlkg\nby5uYW1lIEFTQyIpOwogICAgICAgIHEuZ2V0RmV0Y2hQbGFuKCkuYWRkRmll\nbGQoQmlkaVBhcmVudC5jbGFzcywgIm9uZVRvTWFueUNoaWxkcmVuIik7CiAg\nICAgICAgcS5nZXRGZXRjaFBsYW4oKS5hZGRGaWVsZChCaWRpQ2hpbGQuY2xh\nc3MsICJvbmVUb01hbnlQYXJlbnQiKTsKICAgICAgICBMaXN0PEJpZGlQYXJl\nbnQ+IHJlcyA9IChMaXN0PEJpZGlQYXJlbnQ+KSBxLmdldFJlc3VsdExpc3Qo\nKTsgCgogICAgICAgIGFzc2VydEVxdWFscygyLCByZXMuc2l6ZSgpKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoc3FsLnRvU3RyaW5nKCksIDIsIHNxbC5zaXpl\nKCkpOwogICAgICAgIGFzc2VydE5vdFNRTCgiLiogTEVGVCBPVVRFUiBKT0lO\nIEJpZGlQYXJlbnQgLioiKTsKCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkg\nPCByZXMuc2l6ZSgpOyBpKyspIHsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxz\nKCJwYXJlbnQiICsgKGkgKyAxKSwgcmVzLmdldChpKS5nZXROYW1lKCkpOwog\nICAgICAgICAgICBhc3NlcnRFcXVhbHMoMywgcmVzLmdldChpKS5nZXRPbmVU\nb01hbnlDaGlsZHJlbigpLnNpemUoKSk7CiAgICAgICAgICAgIGZvciAoaW50\nIGogPSAwOyBqIDwgMzsgaisrKSB7CiAgICAgICAgICAgICAgICBhc3NlcnRF\ncXVhbHMoIm9uZVRvTWFueUNoaWxkIiArIChpICsgMSkgKyAiOjoiICsgKGog\nKyAxKSwgCiAgICAgICAgICAgICAgICAgICAgcmVzLmdldChpKS5nZXRPbmVU\nb01hbnlDaGlsZHJlbigpLmdldChqKS5nZXROYW1lKCkpOwogICAgICAgICAg\nICAgICAgYXNzZXJ0RXF1YWxzKHJlcy5nZXQoaSksIHJlcy5nZXQoaSkuZ2V0\nT25lVG9NYW55Q2hpbGRyZW4oKS4KICAgICAgICAgICAgICAgICAgICBnZXQo\naikuZ2V0T25lVG9NYW55UGFyZW50KCkpOwogICAgICAgICAgICB9CiAgICAg\nICAgfQogICAgICAgIGFzc2VydEVxdWFscygyLCBzcWwuc2l6ZSgpKTsKICAg\nICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RF\nYWdlck93bmVyT25lVG9PbmVRdWVyeSgpIHsKICAgICAgICBzcWwuY2xlYXIo\nKTsKCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3Jl\nYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIE9wZW5KUEFRdWVyeSBxID0g\nZW0uY3JlYXRlUXVlcnkoIlNFTEVDVCBvIEZST00gQmlkaVBhcmVudCBvICIK\nICAgICAgICAgICAgKyAiT1JERVIgQlkgby5uYW1lIEFTQyIpOwogICAgICAg\nIHEuZ2V0RmV0Y2hQbGFuKCkuYWRkRmllbGQoQmlkaVBhcmVudC5jbGFzcywg\nIm9uZVRvT25lQ2hpbGQiKTsKICAgICAgICBxLmdldEZldGNoUGxhbigpLmFk\nZEZpZWxkKEJpZGlDaGlsZC5jbGFzcywgIm9uZVRvT25lUGFyZW50Iik7CiAg\nICAgICAgTGlzdDxCaWRpUGFyZW50PiByZXMgPSAoTGlzdDxCaWRpUGFyZW50\nPikgcS5nZXRSZXN1bHRMaXN0KCk7IAoKICAgICAgICBhc3NlcnRFcXVhbHMo\nMiwgcmVzLnNpemUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIHNxbC5z\naXplKCkpOwogICAgICAgIGFzc2VydE5vdFNRTCgiLiogTEVGVCBPVVRFUiBK\nT0lOIEJpZGlQYXJlbnQgLioiKTsKCiAgICAgICAgZm9yIChpbnQgaSA9IDA7\nIGkgPCByZXMuc2l6ZSgpOyBpKyspIHsKICAgICAgICAgICAgYXNzZXJ0RXF1\nYWxzKCJwYXJlbnQiICsgKGkgKyAxKSwgcmVzLmdldChpKS5nZXROYW1lKCkp\nOwogICAgICAgICAgICBhc3NlcnROb3ROdWxsKHJlcy5nZXQoaSkuZ2V0T25l\nVG9PbmVDaGlsZCgpKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKCJvbmVU\nb09uZUNoaWxkIiArIChpICsgMSksCiAgICAgICAgICAgICAgICByZXMuZ2V0\nKGkpLmdldE9uZVRvT25lQ2hpbGQoKS5nZXROYW1lKCkpOwogICAgICAgICAg\nICBhc3NlcnRFcXVhbHMocmVzLmdldChpKSwgCiAgICAgICAgICAgICAgICBy\nZXMuZ2V0KGkpLmdldE9uZVRvT25lQ2hpbGQoKS5nZXRPbmVUb09uZVBhcmVu\ndCgpKTsKICAgICAgICB9CiAgICAgICAgYXNzZXJ0RXF1YWxzKDEsIHNxbC5z\naXplKCkpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgdGVzdEVhZ2VyTm9uT3duZXJPbmVUb09uZVF1ZXJ5KCkgewogICAg\nICAgIHNxbC5jbGVhcigpOwoKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdl\nciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgT3Bl\nbkpQQVF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeSgiU0VMRUNUIG8gRlJPTSBC\naWRpUGFyZW50IG8gIgogICAgICAgICAgICArICJPUkRFUiBCWSBvLm5hbWUg\nQVNDIik7CiAgICAgICAgcS5nZXRGZXRjaFBsYW4oKS5hZGRGaWVsZChCaWRp\nUGFyZW50LmNsYXNzLCAib25lVG9PbmVDaGlsZCIpOwogICAgICAgIHEuZ2V0\nRmV0Y2hQbGFuKCkuYWRkRmllbGQoQmlkaUNoaWxkLmNsYXNzLCAib25lVG9N\nYW55UGFyZW50Iik7CiAgICAgICAgTGlzdDxCaWRpUGFyZW50PiByZXMgPSAo\nTGlzdDxCaWRpUGFyZW50PikgcS5nZXRSZXN1bHRMaXN0KCk7IAoKICAgICAg\nICBhc3NlcnRFcXVhbHMoMiwgcmVzLnNpemUoKSk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKDEsIHNxbC5zaXplKCkpOwogICAgICAgIGFzc2VydFNRTCgiLiog\nTEVGVCBPVVRFUiBKT0lOIEJpZGlQYXJlbnQgLioiKTsKCiAgICAgICAgZm9y\nIChpbnQgaSA9IDA7IGkgPCByZXMuc2l6ZSgpOyBpKyspIHsKICAgICAgICAg\nICAgYXNzZXJ0RXF1YWxzKCJwYXJlbnQiICsgKGkgKyAxKSwgcmVzLmdldChp\nKS5nZXROYW1lKCkpOwogICAgICAgICAgICBhc3NlcnROb3ROdWxsKHJlcy5n\nZXQoaSkuZ2V0T25lVG9PbmVDaGlsZCgpKTsKICAgICAgICAgICAgYXNzZXJ0\nRXF1YWxzKCJvbmVUb09uZUNoaWxkIiArIChpICsgMSksCiAgICAgICAgICAg\nICAgICByZXMuZ2V0KGkpLmdldE9uZVRvT25lQ2hpbGQoKS5nZXROYW1lKCkp\nOwogICAgICAgICAgICBhc3NlcnROdWxsKHJlcy5nZXQoaSkuZ2V0T25lVG9P\nbmVDaGlsZCgpLmdldE9uZVRvTWFueVBhcmVudCgpKTsKICAgICAgICB9CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKDEsIHNxbC5zaXplKCkpOwogICAgICAgIGVt\nLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4o\nU3RyaW5nW10gYXJncykgewogICAgICAgIFRlc3RSdW5uZXIucnVuKFRlc3RF\nYWdlckJpZGlTUUwuY2xhc3MpOwogICAgfQp9Cgo=\n","encoding":"base64"}

