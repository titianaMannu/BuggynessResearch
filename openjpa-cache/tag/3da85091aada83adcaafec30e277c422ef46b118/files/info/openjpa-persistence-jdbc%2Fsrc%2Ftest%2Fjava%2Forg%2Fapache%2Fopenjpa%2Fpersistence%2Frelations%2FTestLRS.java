{"sha":"3d5185a06b7db0994cce23da785b029307ac5bd4","node_id":"MDQ6QmxvYjIwNjM2NDozZDUxODVhMDZiN2RiMDk5NGNjZTIzZGE3ODViMDI5MzA3YWM1YmQ0","size":3679,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/3d5185a06b7db0994cce23da785b029307ac5bd4","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UucmVsYXRp\nb25zOwoKaW1wb3J0IGphdmEudXRpbC5JdGVyYXRvcjsKaW1wb3J0IGphdmF4\nLnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXI7CgppbXBvcnQganVuaXQudGV4\ndHVpLlRlc3RSdW5uZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVy\nc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXI7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQVBlcnNpc3RlbmNlOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnRlc3QuU2lu\nZ2xlRU1GVGVzdENhc2U7CgovKioKICogVGVzdCBMUlMgcmVsYXRpb25zLgog\nKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKi8KcHVibGljIGNsYXNzIFRlc3RM\nUlMKICAgIGV4dGVuZHMgU2luZ2xlRU1GVGVzdENhc2UgewoKICAgIHByaXZh\ndGUgbG9uZyBpZDsKCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpIHsKICAgICAg\nICBzZXRVcChMUlNFbnRpdHkuY2xhc3MsIEJhc2ljRW50aXR5LmNsYXNzKTsK\nICAgICAgICAKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0\nZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigp\nLmJlZ2luKCk7CgogICAgICAgIExSU0VudGl0eSBscnMgPSBuZXcgTFJTRW50\naXR5KCk7CiAgICAgICAgbHJzLnNldE5hbWUoImxycyIpOyAKICAgICAgICBm\nb3IgKGludCBpID0gMTsgaSA8PSAzOyBpKyspIHsKICAgICAgICAgICAgQmFz\naWNFbnRpdHkgYmFzaWMgPSBuZXcgQmFzaWNFbnRpdHkoKTsKICAgICAgICAg\nICAgYmFzaWMuc2V0TmFtZSgiYmFzaWMiICsgaSk7CiAgICAgICAgICAgIGVt\nLnBlcnNpc3QoYmFzaWMpOwogICAgICAgICAgICBscnMuZ2V0TFJTTGlzdCgp\nLmFkZChiYXNpYyk7CiAgICAgICAgfQogICAgICAgIGVtLnBlcnNpc3QobHJz\nKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAg\nICAgIGlkID0gbHJzLmdldElkKCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0RU1DbGVhcigpIHsKICAgICAgICBF\nbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsK\nICAgICAgICBMUlNFbnRpdHkgbHJzID0gZW0uZmluZChMUlNFbnRpdHkuY2xh\nc3MsIGlkKTsKICAgICAgICBhc3NlcnRMUlMobHJzLCAibHJzIik7CiAgICAg\nICAgZW0uY2xlYXIoKTsKICAgICAgICBhc3NlcnROdWxsKGxycy5nZXRMUlNM\naXN0KCkpOwogICAgICAgIGFzc2VydE1lcmdlKGxycyk7CiAgICAgICAgZW0u\nY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0RU1DbG9zZSgp\nIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0\neU1hbmFnZXIoKTsKICAgICAgICBMUlNFbnRpdHkgbHJzID0gZW0uZmluZChM\nUlNFbnRpdHkuY2xhc3MsIGlkKTsKICAgICAgICBhc3NlcnRMUlMobHJzLCAi\nbHJzIik7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgICAgICBhc3NlcnROdWxs\nKGxycy5nZXRMUlNMaXN0KCkpOwogICAgICAgIGFzc2VydE1lcmdlKGxycyk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdERldGFjaENvcHkoKSB7CiAg\nICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50\naXR5TWFuYWdlcigpOwogICAgICAgIExSU0VudGl0eSBscnMgPSBlbS5maW5k\nKExSU0VudGl0eS5jbGFzcywgaWQpOwogICAgICAgIGFzc2VydExSUyhscnMs\nICJscnMiKTsKICAgICAgICBscnMgPSBlbS5kZXRhY2gobHJzKTsgCiAgICAg\nICAgYXNzZXJ0RXF1YWxzKCJscnMiLCBscnMuZ2V0TmFtZSgpKTsKICAgICAg\nICBhc3NlcnROdWxsKGxycy5nZXRMUlNMaXN0KCkpOwogICAgICAgIGVtLmNs\nb3NlKCk7CiAgICAgICAgYXNzZXJ0TWVyZ2UobHJzKTsKICAgIH0KCiAgICBw\ncml2YXRlIHZvaWQgYXNzZXJ0TFJTKExSU0VudGl0eSBscnMsIFN0cmluZyBu\nYW1lKSB7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChscnMpOwogICAgICAgIGFz\nc2VydEVxdWFscyhuYW1lLCBscnMuZ2V0TmFtZSgpKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoMywgbHJzLmdldExSU0xpc3QoKS5zaXplKCkpOwogICAgICAg\nIEl0ZXJhdG9yIGl0ciA9IGxycy5nZXRMUlNMaXN0KCkuaXRlcmF0b3IoKTsK\nICAgICAgICBmb3IgKGludCBpID0gMTsgaXRyLmhhc05leHQoKTsgaSsrKSB7\nCiAgICAgICAgICAgIEJhc2ljRW50aXR5IGJhc2ljID0gKEJhc2ljRW50aXR5\nKSBpdHIubmV4dCgpOwogICAgICAgICAgICBhc3NlcnRFcXVhbHMoImJhc2lj\nIiArIGksIGJhc2ljLmdldE5hbWUoKSk7CiAgICAgICAgfQogICAgICAgIE9w\nZW5KUEFQZXJzaXN0ZW5jZS5jbG9zZShpdHIpOwogICAgfQoKICAgIHByaXZh\ndGUgdm9pZCBhc3NlcnRNZXJnZShMUlNFbnRpdHkgbHJzKSB7CiAgICAgICAg\nbHJzLnNldE5hbWUoImNoYW5nZWQiKTsKICAgICAgICBFbnRpdHlNYW5hZ2Vy\nIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBlbS5n\nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgYXNzZXJ0TFJTKGVt\nLm1lcmdlKGxycyksICJjaGFuZ2VkIik7CiAgICAgICAgZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwoKICAgICAg\nICBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgYXNz\nZXJ0TFJTKGVtLmZpbmQoTFJTRW50aXR5LmNsYXNzLCBpZCksICJjaGFuZ2Vk\nIik7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgc3Rh\ndGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7CiAgICAgICAgVGVzdFJ1\nbm5lci5ydW4oVGVzdExSUy5jbGFzcyk7CiAgICB9Cn0KCg==\n","encoding":"base64"}

