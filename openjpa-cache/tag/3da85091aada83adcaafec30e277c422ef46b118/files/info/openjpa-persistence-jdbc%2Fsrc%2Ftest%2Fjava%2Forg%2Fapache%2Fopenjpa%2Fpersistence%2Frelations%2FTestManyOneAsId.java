{"sha":"cbe35df84309638be059fe35e1c5c281001ab687","node_id":"MDQ6QmxvYjIwNjM2NDpjYmUzNWRmODQzMDk2MzhiZTA1OWZlMzVlMWM1YzI4MTAwMWFiNjg3","size":13753,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/cbe35df84309638be059fe35e1c5c281001ab687","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UucmVsYXRp\nb25zOwoKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXI7\nCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5RdWVyeTsKCmltcG9ydCBqdW5p\ndC50ZXh0dWkuVGVzdFJ1bm5lcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5wZXJzaXN0ZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdlcjsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS50ZXN0LlNpbmdsZUVNRlRl\nc3RDYXNlOwoKLyoqCiAqIFBlcmZvcm0gYmFzaWMgb3BlcmF0aW9ucyBvbiBh\nbiBlbnRpdHkgd2l0aCBhIG1hbnktb25lIHJlbGF0aW9uIGFzIGl0cyBpZAog\nKiBmaWVsZC4KICoKICogQGF1dGhvciBBYmUgV2hpdGUKICovCnB1YmxpYyBj\nbGFzcyBUZXN0TWFueU9uZUFzSWQKICAgIGV4dGVuZHMgU2luZ2xlRU1GVGVz\ndENhc2UgewoKICAgIHByaXZhdGUgbG9uZyBpZDsKICAgIHByaXZhdGUgbG9u\nZyBkc2lkOwogICAgcHJpdmF0ZSBsb25nIGNpZDsKCiAgICBwdWJsaWMgdm9p\nZCBzZXRVcCgpIHsKICAgICAgICBzZXRVcChCYXNpY0VudGl0eS5jbGFzcywg\nRGF0YVN0b3JlQmFzaWNFbnRpdHkuY2xhc3MsCiAgICAgICAgICAgIE1hbnlP\nbmVJZE93bmVyLmNsYXNzLCBEYXRhU3RvcmVNYW55T25lSWRPd25lci5jbGFz\ncywKICAgICAgICAgICAgTWFueU9uZUNvbXBvdW5kSWRPd25lci5jbGFzcyk7\nCgogICAgICAgIEJhc2ljRW50aXR5IGlkMSA9IG5ldyBCYXNpY0VudGl0eSgp\nOwogICAgICAgIGlkMS5zZXROYW1lKCJpZDEiKTsKICAgICAgICBCYXNpY0Vu\ndGl0eSBpZDIgPSBuZXcgQmFzaWNFbnRpdHkoKTsKICAgICAgICBpZDIuc2V0\nTmFtZSgiaWQyIik7CiAgICAgICAgaWQxLnNldFJlbChpZDIpOwogICAgICAg\nIGlkMi5zZXRSZWwoaWQxKTsKICAgICAgICBEYXRhU3RvcmVCYXNpY0VudGl0\neSBkc2lkMSA9IG5ldyBEYXRhU3RvcmVCYXNpY0VudGl0eSgpOwogICAgICAg\nIGRzaWQxLnNldE5hbWUoImRzaWQxIik7CiAgICAgICAgZHNpZDEuc2V0UmVs\nKGlkMSk7CiAgICAgICAgRGF0YVN0b3JlQmFzaWNFbnRpdHkgZHNpZDIgPSBu\nZXcgRGF0YVN0b3JlQmFzaWNFbnRpdHkoKTsKICAgICAgICBkc2lkMi5zZXRO\nYW1lKCJkc2lkMiIpOwogICAgICAgIGRzaWQyLnNldFJlbChpZDIpOwoKICAg\nICAgICBNYW55T25lSWRPd25lciBwYXJlbnQgPSBuZXcgTWFueU9uZUlkT3du\nZXIoKTsKICAgICAgICBwYXJlbnQuc2V0SWQoaWQxKTsKICAgICAgICBwYXJl\nbnQuc2V0TmFtZSgicGFyZW50Iik7CiAgICAgICAgTWFueU9uZUlkT3duZXIg\nY2hpbGQgPSBuZXcgTWFueU9uZUlkT3duZXIoKTsKICAgICAgICBjaGlsZC5z\nZXRJZChpZDIpOwogICAgICAgIGNoaWxkLnNldE5hbWUoImNoaWxkIik7CiAg\nICAgICAgcGFyZW50LnNldFNlbGZSZWwoY2hpbGQpOwogICAgICAgIERhdGFT\ndG9yZU1hbnlPbmVJZE93bmVyIGRzcGFyZW50ID0gbmV3IERhdGFTdG9yZU1h\nbnlPbmVJZE93bmVyKCk7CiAgICAgICAgZHNwYXJlbnQuc2V0SWQoZHNpZDEp\nOwogICAgICAgIGRzcGFyZW50LnNldE5hbWUoImRzcGFyZW50Iik7CiAgICAg\nICAgRGF0YVN0b3JlTWFueU9uZUlkT3duZXIgZHNjaGlsZCA9IG5ldyBEYXRh\nU3RvcmVNYW55T25lSWRPd25lcigpOwogICAgICAgIGRzY2hpbGQuc2V0SWQo\nZHNpZDIpOwogICAgICAgIGRzY2hpbGQuc2V0TmFtZSgiZHNjaGlsZCIpOwog\nICAgICAgIGRzcGFyZW50LnNldFNlbGZSZWwoZHNjaGlsZCk7CiAgICAgICAg\nTWFueU9uZUNvbXBvdW5kSWRPd25lciBjcGFyZW50ID0gbmV3IE1hbnlPbmVD\nb21wb3VuZElkT3duZXIoKTsKICAgICAgICBjcGFyZW50LnNldEVudGl0eUlk\nKGlkMSk7CiAgICAgICAgY3BhcmVudC5zZXROYW1lKCJjcGFyZW50Iik7CiAg\nICAgICAgTWFueU9uZUNvbXBvdW5kSWRPd25lciBjY2hpbGQgPSBuZXcgTWFu\neU9uZUNvbXBvdW5kSWRPd25lcigpOwogICAgICAgIGNjaGlsZC5zZXRFbnRp\ndHlJZChpZDIpOwogICAgICAgIGNjaGlsZC5zZXROYW1lKCJjY2hpbGQiKTsK\nICAgICAgICBjcGFyZW50LnNldFNlbGZSZWwoY2NoaWxkKTsKCiAgICAgICAg\nRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7\nCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAg\nIGVtLnBlcnNpc3QoaWQxKTsKICAgICAgICBlbS5wZXJzaXN0KGlkMik7CiAg\nICAgICAgZW0ucGVyc2lzdChkc2lkMSk7CiAgICAgICAgZW0ucGVyc2lzdChk\nc2lkMik7CiAgICAgICAgZW0ucGVyc2lzdChwYXJlbnQpOwogICAgICAgIGVt\nLnBlcnNpc3QoY2hpbGQpOwogICAgICAgIGVtLnBlcnNpc3QoZHNwYXJlbnQp\nOwogICAgICAgIGVtLnBlcnNpc3QoZHNjaGlsZCk7CiAgICAgICAgZW0ucGVy\nc2lzdChjcGFyZW50KTsKICAgICAgICBlbS5wZXJzaXN0KGNjaGlsZCk7CiAg\nICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBp\nZCA9IGlkMS5nZXRJZCgpOwogICAgICAgIGFzc2VydFJlbGF0aW9ucyhlbSwg\ncGFyZW50KTsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBvZW0gPSAo\nT3BlbkpQQUVudGl0eU1hbmFnZXIpIGVtOwogICAgICAgIGRzaWQgPSAoTG9u\nZykgb2VtLmdldE9iamVjdElkKGRzaWQxKTsKICAgICAgICBhc3NlcnREYXRh\nU3RvcmVSZWxhdGlvbnMob2VtLCBkc3BhcmVudCk7CiAgICAgICAgY2lkID0g\nY3BhcmVudC5nZXRMb25nSWQoKTsKICAgICAgICBhc3NlcnRDb21wb3VuZFJl\nbGF0aW9ucyhvZW0sIGNwYXJlbnQpOwogICAgICAgIGVtLmNsb3NlKCk7CiAg\nICB9CgogICAgcHJpdmF0ZSB2b2lkIGFzc2VydFJlbGF0aW9ucyhFbnRpdHlN\nYW5hZ2VyIGVtLCBNYW55T25lSWRPd25lciBwYXJlbnQpIHsKICAgICAgICBh\nc3NlcnRFcXVhbHMoInBhcmVudCIsIHBhcmVudC5nZXROYW1lKCkpOwogICAg\nICAgIEJhc2ljRW50aXR5IGlkMSA9IHBhcmVudC5nZXRJZCgpOwogICAgICAg\nIGFzc2VydE5vdE51bGwoaWQxKTsKICAgICAgICBhc3NlcnRFcXVhbHMoaWQs\nIGlkMS5nZXRJZCgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoImlkMSIsIGlk\nMS5nZXROYW1lKCkpOwogICAgICAgIGFzc2VydFRydWUoaWQxID09IGVtLmZp\nbmQoQmFzaWNFbnRpdHkuY2xhc3MsIGlkKSk7CiAgICAgICAgTWFueU9uZUlk\nT3duZXIgY2hpbGQgPSBwYXJlbnQuZ2V0U2VsZlJlbCgpOwogICAgICAgIGFz\nc2VydE5vdE51bGwoY2hpbGQpOwogICAgICAgIGFzc2VydEVxdWFscygiY2hp\nbGQiLCBjaGlsZC5nZXROYW1lKCkpOwogICAgICAgIEJhc2ljRW50aXR5IGlk\nMiA9IGNoaWxkLmdldElkKCk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChpZDIp\nOwogICAgICAgIGFzc2VydEVxdWFscygiaWQyIiwgaWQyLmdldE5hbWUoKSk7\nCiAgICAgICAgYXNzZXJ0VHJ1ZShpZDIgPT0gZW0uZmluZChCYXNpY0VudGl0\neS5jbGFzcywgaWQyLmdldElkKCkpKTsKICAgICAgICBhc3NlcnRUcnVlKGlk\nMiA9PSBpZDEuZ2V0UmVsKCkpOwogICAgICAgIGFzc2VydFRydWUoaWQxID09\nIGlkMi5nZXRSZWwoKSk7CiAgICAgICAgYXNzZXJ0TnVsbChjaGlsZC5nZXRT\nZWxmUmVsKCkpOwogICAgfQoKICAgIHByaXZhdGUgdm9pZCBhc3NlcnREYXRh\nU3RvcmVSZWxhdGlvbnMoT3BlbkpQQUVudGl0eU1hbmFnZXIgZW0sIAogICAg\nICAgIERhdGFTdG9yZU1hbnlPbmVJZE93bmVyIGRzcGFyZW50KSB7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKCJkc3BhcmVudCIsIGRzcGFyZW50LmdldE5hbWUo\nKSk7CiAgICAgICAgRGF0YVN0b3JlQmFzaWNFbnRpdHkgZHNpZDEgPSBkc3Bh\ncmVudC5nZXRJZCgpOwogICAgICAgIGFzc2VydE5vdE51bGwoZHNpZDEpOwog\nICAgICAgIGFzc2VydEVxdWFscyhkc2lkLCAoKExvbmcpIGVtLmdldE9iamVj\ndElkKGRzaWQxKSkubG9uZ1ZhbHVlKCkpOwogICAgICAgIGFzc2VydEVxdWFs\ncygiZHNpZDEiLCBkc2lkMS5nZXROYW1lKCkpOwogICAgICAgIGFzc2VydFRy\ndWUoZHNpZDEgPT0gZW0uZmluZChEYXRhU3RvcmVCYXNpY0VudGl0eS5jbGFz\ncywgZHNpZCkpOwogICAgICAgIERhdGFTdG9yZU1hbnlPbmVJZE93bmVyIGRz\nY2hpbGQgPSBkc3BhcmVudC5nZXRTZWxmUmVsKCk7CiAgICAgICAgYXNzZXJ0\nTm90TnVsbChkc2NoaWxkKTsKICAgICAgICBhc3NlcnRFcXVhbHMoImRzY2hp\nbGQiLCBkc2NoaWxkLmdldE5hbWUoKSk7CiAgICAgICAgRGF0YVN0b3JlQmFz\naWNFbnRpdHkgZHNpZDIgPSBkc2NoaWxkLmdldElkKCk7CiAgICAgICAgYXNz\nZXJ0Tm90TnVsbChkc2lkMik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJkc2lk\nMiIsIGRzaWQyLmdldE5hbWUoKSk7CiAgICAgICAgYXNzZXJ0VHJ1ZShkc2lk\nMiA9PSBlbS5maW5kKERhdGFTdG9yZUJhc2ljRW50aXR5LmNsYXNzLCAKICAg\nICAgICAgICAgZW0uZ2V0T2JqZWN0SWQoZHNpZDIpKSk7CiAgICAgICAgYXNz\nZXJ0TnVsbChkc2NoaWxkLmdldFNlbGZSZWwoKSk7CiAgICB9CgogICAgcHJp\ndmF0ZSB2b2lkIGFzc2VydENvbXBvdW5kUmVsYXRpb25zKE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyIGVtLCAKICAgICAgICBNYW55T25lQ29tcG91bmRJZE93bmVy\nIGNwYXJlbnQpIHsKICAgICAgICBhc3NlcnRFcXVhbHMoImNwYXJlbnQiLCBj\ncGFyZW50LmdldE5hbWUoKSk7CiAgICAgICAgQmFzaWNFbnRpdHkgaWQxID0g\nY3BhcmVudC5nZXRFbnRpdHlJZCgpOwogICAgICAgIGFzc2VydE5vdE51bGwo\naWQxKTsKICAgICAgICBhc3NlcnRFcXVhbHMoaWQsIGlkMS5nZXRJZCgpKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoImlkMSIsIGlkMS5nZXROYW1lKCkpOwog\nICAgICAgIGFzc2VydFRydWUoaWQxID09IGVtLmZpbmQoQmFzaWNFbnRpdHku\nY2xhc3MsIGlkKSk7CiAgICAgICAgTWFueU9uZUNvbXBvdW5kSWRPd25lciBj\nY2hpbGQgPSBjcGFyZW50LmdldFNlbGZSZWwoKTsKICAgICAgICBhc3NlcnRO\nb3ROdWxsKGNjaGlsZCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJjY2hpbGQi\nLCBjY2hpbGQuZ2V0TmFtZSgpKTsKICAgICAgICBCYXNpY0VudGl0eSBpZDIg\nPSBjY2hpbGQuZ2V0RW50aXR5SWQoKTsKICAgICAgICBhc3NlcnROb3ROdWxs\nKGlkMik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJpZDIiLCBpZDIuZ2V0TmFt\nZSgpKTsKICAgICAgICBhc3NlcnRUcnVlKGlkMiA9PSBlbS5maW5kKEJhc2lj\nRW50aXR5LmNsYXNzLCBpZDIuZ2V0SWQoKSkpOwogICAgICAgIGFzc2VydE51\nbGwoY2NoaWxkLmdldFNlbGZSZWwoKSk7CiAgICAgICAgTWFueU9uZUNvbXBv\ndW5kSWRPd25lcklkIG9pZCA9IChNYW55T25lQ29tcG91bmRJZE93bmVySWQp\nIAogICAgICAgICAgICBlbS5nZXRPYmplY3RJZChjcGFyZW50KTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoaWQsIG9pZC5lbnRpdHlJZCk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgdGVzdFJldHJpZXZlV2l0aE1hbnlPbmVJZCgpIHsKICAg\nICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsKICAgICAgICBNYW55T25lSWRPd25lciBwYXJlbnQgPSBlbS5maW5k\nKE1hbnlPbmVJZE93bmVyLmNsYXNzLCBpZCk7CiAgICAgICAgYXNzZXJ0Tm90\nTnVsbChwYXJlbnQpOwogICAgICAgIGFzc2VydFJlbGF0aW9ucyhlbSwgcGFy\nZW50KTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHRlc3RSZXRyaWV2ZVdpdGhEYXRhU3RvcmVNYW55T25lSWQoKSB7CiAg\nICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgRGF0YVN0b3JlTWFueU9uZUlkT3duZXIgZHNwYXJl\nbnQgPSAKICAgICAgICAgICAgZW0uZmluZChEYXRhU3RvcmVNYW55T25lSWRP\nd25lci5jbGFzcywgZHNpZCk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChkc3Bh\ncmVudCk7CiAgICAgICAgYXNzZXJ0RGF0YVN0b3JlUmVsYXRpb25zKChPcGVu\nSlBBRW50aXR5TWFuYWdlcikgZW0sIGRzcGFyZW50KTsKICAgICAgICBlbS5j\nbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RSZXRyaWV2ZVdp\ndGhDb21wb3VuZE1hbnlPbmVJZCgpIHsKICAgICAgICBFbnRpdHlNYW5hZ2Vy\nIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBNYW55\nT25lQ29tcG91bmRJZE93bmVySWQgb2lkID0gbmV3IE1hbnlPbmVDb21wb3Vu\nZElkT3duZXJJZCgpOwogICAgICAgIG9pZC5lbnRpdHlJZCA9IGlkOwogICAg\nICAgIG9pZC5sb25nSWQgPSBjaWQ7CiAgICAgICAgTWFueU9uZUNvbXBvdW5k\nSWRPd25lciBjcGFyZW50ID0gCiAgICAgICAgICAgIGVtLmZpbmQoTWFueU9u\nZUNvbXBvdW5kSWRPd25lci5jbGFzcywgb2lkKTsKICAgICAgICBhc3NlcnRO\nb3ROdWxsKGNwYXJlbnQpOwogICAgICAgIGFzc2VydENvbXBvdW5kUmVsYXRp\nb25zKChPcGVuSlBBRW50aXR5TWFuYWdlcikgZW0sIGNwYXJlbnQpOwogICAg\nICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdEF0\ndGVtcHRUb0NoYW5nZU1hbnlPbmUoKSB7CiAgICAgICAgRW50aXR5TWFuYWdl\nciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgTWFu\neU9uZUlkT3duZXIgcGFyZW50ID0gZW0uZmluZChNYW55T25lSWRPd25lci5j\nbGFzcywgaWQpOwogICAgICAgIGFzc2VydE5vdE51bGwocGFyZW50KTsKICAg\nICAgICBhc3NlcnROb3ROdWxsKHBhcmVudC5nZXRTZWxmUmVsKCkpOwogICAg\nICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICB0cnkg\newogICAgICAgICAgICBwYXJlbnQuc2V0SWQocGFyZW50LmdldFNlbGZSZWwo\nKS5nZXRJZCgpKTsgCiAgICAgICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCku\nY29tbWl0KCk7CiAgICAgICAgICAgIGZhaWwoIlN1Y2Nlc3NmdWxseSBjaGFu\nZ2VkIGlkIHJlbGF0aW9uLiIpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlv\nbiBlKSB7CiAgICAgICAgICAgIC8vIGV4cGVjdGVkCiAgICAgICAgICAgIGlm\nIChlbS5nZXRUcmFuc2FjdGlvbigpLmlzQWN0aXZlKCkpCiAgICAgICAgICAg\nICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLnJvbGxiYWNrKCk7CiAgICAgICAg\nfQogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\ndGVzdENoYW5nZVJlbGF0aW9uVG9NYW55T25lT3duZXIoKSB7CiAgICAgICAg\nQmFzaWNFbnRpdHkgaWQzID0gbmV3IEJhc2ljRW50aXR5KCk7CiAgICAgICAg\naWQzLnNldE5hbWUoImlkMyIpOwogICAgICAgIE1hbnlPbmVJZE93bmVyIGNo\naWxkMiA9IG5ldyBNYW55T25lSWRPd25lcigpOwogICAgICAgIGNoaWxkMi5z\nZXROYW1lKCJjaGlsZDIiKTsKICAgICAgICBjaGlsZDIuc2V0SWQoaWQzKTsK\nICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1h\nbmFnZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7\nCiAgICAgICAgZW0ucGVyc2lzdChpZDMpOwogICAgICAgIGVtLnBlcnNpc3Qo\nY2hpbGQyKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgp\nOwogICAgICAgIGVtLmNsb3NlKCk7CgogICAgICAgIGVtID0gZW1mLmNyZWF0\nZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBNYW55T25lSWRPd25lciBwYXJl\nbnQgPSBlbS5maW5kKE1hbnlPbmVJZE93bmVyLmNsYXNzLCBpZCk7CiAgICAg\nICAgYXNzZXJ0Tm90TnVsbChwYXJlbnQpOwogICAgICAgIGVtLmdldFRyYW5z\nYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBwYXJlbnQuc2V0U2VsZlJlbChj\naGlsZDIpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7\nCiAgICAgICAgZW0uY2xvc2UoKTsKCiAgICAgICAgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIHBhcmVudCA9IGVtLmZpbmQoTWFu\neU9uZUlkT3duZXIuY2xhc3MsIGlkKTsKICAgICAgICBjaGlsZDIgPSBwYXJl\nbnQuZ2V0U2VsZlJlbCgpOwogICAgICAgIGFzc2VydEVxdWFscygiY2hpbGQy\nIiwgY2hpbGQyLmdldE5hbWUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGlk\nMy5nZXRJZCgpLCBjaGlsZDIuZ2V0SWQoKS5nZXRJZCgpKTsKICAgICAgICBl\nbS5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RDaGFuZ2VS\nZWxhdGlvblRvRGF0YVN0b3JlTWFueU9uZU93bmVyKCkgewogICAgICAgIERh\ndGFTdG9yZUJhc2ljRW50aXR5IGRzaWQzID0gbmV3IERhdGFTdG9yZUJhc2lj\nRW50aXR5KCk7CiAgICAgICAgZHNpZDMuc2V0TmFtZSgiZHNpZDMiKTsKICAg\nICAgICBEYXRhU3RvcmVNYW55T25lSWRPd25lciBkc2NoaWxkMiA9IG5ldyBE\nYXRhU3RvcmVNYW55T25lSWRPd25lcigpOwogICAgICAgIGRzY2hpbGQyLnNl\ndE5hbWUoImRzY2hpbGQyIik7CiAgICAgICAgZHNjaGlsZDIuc2V0SWQoZHNp\nZDMpOwogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50\naXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVn\naW4oKTsKICAgICAgICBlbS5wZXJzaXN0KGRzaWQzKTsKICAgICAgICBlbS5w\nZXJzaXN0KGRzY2hpbGQyKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigp\nLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CgogICAgICAgIGVtID0g\nZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBEYXRhU3RvcmVN\nYW55T25lSWRPd25lciBkc3BhcmVudCA9IAogICAgICAgICAgICBlbS5maW5k\nKERhdGFTdG9yZU1hbnlPbmVJZE93bmVyLmNsYXNzLCBkc2lkKTsKICAgICAg\nICBhc3NlcnROb3ROdWxsKGRzcGFyZW50KTsKICAgICAgICBlbS5nZXRUcmFu\nc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgZHNwYXJlbnQuc2V0U2VsZlJl\nbChkc2NoaWxkMik7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21t\naXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwoKICAgICAgICBlbSA9IGVtZi5j\ncmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZHNwYXJlbnQgPSBlbS5m\naW5kKERhdGFTdG9yZU1hbnlPbmVJZE93bmVyLmNsYXNzLCBkc2lkKTsKICAg\nICAgICBkc2NoaWxkMiA9IGRzcGFyZW50LmdldFNlbGZSZWwoKTsKICAgICAg\nICBhc3NlcnRFcXVhbHMoImRzY2hpbGQyIiwgZHNjaGlsZDIuZ2V0TmFtZSgp\nKTsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBvZW0gPSAoT3BlbkpQ\nQUVudGl0eU1hbmFnZXIpIGVtOwogICAgICAgIGFzc2VydEVxdWFscyhvZW0u\nZ2V0T2JqZWN0SWQoZHNpZDMpLCBvZW0uZ2V0T2JqZWN0SWQoZHNjaGlsZDIu\nZ2V0SWQoKSkpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgdGVzdENoYW5nZVJlbGF0aW9uVG9Db21wb3VuZE1hbnlPbmVP\nd25lcigpIHsKICAgICAgICBCYXNpY0VudGl0eSBpZDMgPSBuZXcgQmFzaWNF\nbnRpdHkoKTsKICAgICAgICBpZDMuc2V0TmFtZSgiaWQzIik7CiAgICAgICAg\nTWFueU9uZUNvbXBvdW5kSWRPd25lciBjY2hpbGQyID0gbmV3IE1hbnlPbmVD\nb21wb3VuZElkT3duZXIoKTsKICAgICAgICBjY2hpbGQyLnNldE5hbWUoImNj\naGlsZDIiKTsKICAgICAgICBjY2hpbGQyLnNldEVudGl0eUlkKGlkMyk7CiAg\nICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwog\nICAgICAgIGVtLnBlcnNpc3QoaWQzKTsKICAgICAgICBlbS5wZXJzaXN0KGNj\naGlsZDIpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7\nCiAgICAgICAgZW0uY2xvc2UoKTsKCiAgICAgICAgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIE1hbnlPbmVDb21wb3VuZElkT3du\nZXJJZCBvaWQgPSBuZXcgTWFueU9uZUNvbXBvdW5kSWRPd25lcklkKCk7CiAg\nICAgICAgb2lkLmVudGl0eUlkID0gaWQ7CiAgICAgICAgb2lkLmxvbmdJZCA9\nIGNpZDsgCiAgICAgICAgTWFueU9uZUNvbXBvdW5kSWRPd25lciBjcGFyZW50\nID0gZW0uZmluZChNYW55T25lQ29tcG91bmRJZE93bmVyLmNsYXNzLCAKICAg\nICAgICAgICAgb2lkKTsKICAgICAgICBhc3NlcnROb3ROdWxsKGNwYXJlbnQp\nOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAg\nICBjcGFyZW50LnNldFNlbGZSZWwoY2NoaWxkMik7CiAgICAgICAgZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwoK\nICAgICAgICBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAg\nICAgY3BhcmVudCA9IGVtLmZpbmQoTWFueU9uZUNvbXBvdW5kSWRPd25lci5j\nbGFzcywgb2lkKTsKICAgICAgICBjY2hpbGQyID0gY3BhcmVudC5nZXRTZWxm\nUmVsKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJjY2hpbGQyIiwgY2NoaWxk\nMi5nZXROYW1lKCkpOwogICAgICAgIGFzc2VydEVxdWFscyhpZDMuZ2V0SWQo\nKSwgY2NoaWxkMi5nZXRFbnRpdHlJZCgpLmdldElkKCkpOwogICAgICAgIGVt\nLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFF1ZXJ5KCkg\newogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5\nTWFuYWdlcigpOwogICAgICAgIFF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeSgi\nc2VsZWN0IGUgZnJvbSBNYW55T25lSWRPd25lciBlICIKICAgICAgICAgICAg\nKyAid2hlcmUgZS5pZC5pZCA9IDppZCIpOwogICAgICAgIHEuc2V0UGFyYW1l\ndGVyKCJpZCIsIGlkKTsKICAgICAgICBNYW55T25lSWRPd25lciBwYyA9IChN\nYW55T25lSWRPd25lcikgcS5nZXRTaW5nbGVSZXN1bHQoKTsKICAgICAgICBh\nc3NlcnROb3ROdWxsKHBjKTsKICAgICAgICBhc3NlcnRFcXVhbHMoInBhcmVu\ndCIsIHBjLmdldE5hbWUoKSk7CiAgICAgICAgZW0uY2xvc2UoKTsKCiAgICAg\nICAgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIEJh\nc2ljRW50aXR5IGlkMSA9IGVtLmZpbmQoQmFzaWNFbnRpdHkuY2xhc3MsIGlk\nKTsKICAgICAgICBhc3NlcnROb3ROdWxsKGlkMSk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKCJpZDEiLCBpZDEuZ2V0TmFtZSgpKTsKICAgICAgICBxID0gZW0u\nY3JlYXRlUXVlcnkoInNlbGVjdCBlIGZyb20gTWFueU9uZUlkT3duZXIgZSB3\naGVyZSBlLmlkID0gOmlkIik7CiAgICAgICAgcS5zZXRQYXJhbWV0ZXIoImlk\nIiwgaWQxKTsKICAgICAgICBwYyA9IChNYW55T25lSWRPd25lcikgcS5nZXRT\naW5nbGVSZXN1bHQoKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHBjKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoInBhcmVudCIsIHBjLmdldE5hbWUoKSk7CiAg\nICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nRGF0YVN0b3JlUXVlcnkoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9\nIGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgRGF0YVN0b3Jl\nQmFzaWNFbnRpdHkgZHNpZDEgPSBlbS5maW5kKERhdGFTdG9yZUJhc2ljRW50\naXR5LmNsYXNzLCBkc2lkKTsKICAgICAgICBhc3NlcnROb3ROdWxsKGRzaWQx\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoImRzaWQxIiwgZHNpZDEuZ2V0TmFt\nZSgpKTsKICAgICAgICBRdWVyeSBxID0gZW0uY3JlYXRlUXVlcnkoInNlbGVj\ndCBlIGZyb20gRGF0YVN0b3JlTWFueU9uZUlkT3duZXIgZSAiCiAgICAgICAg\nICAgICsgIndoZXJlIGUuaWQgPSA6aWQiKTsKICAgICAgICBxLnNldFBhcmFt\nZXRlcigiaWQiLCBkc2lkMSk7CiAgICAgICAgRGF0YVN0b3JlTWFueU9uZUlk\nT3duZXIgZHNwYyA9IChEYXRhU3RvcmVNYW55T25lSWRPd25lcikgCiAgICAg\nICAgICAgIHEuZ2V0U2luZ2xlUmVzdWx0KCk7CiAgICAgICAgYXNzZXJ0Tm90\nTnVsbChkc3BjKTsKICAgICAgICBhc3NlcnRFcXVhbHMoImRzcGFyZW50Iiwg\nZHNwYy5nZXROYW1lKCkpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgdGVzdENvbXBvdW5kUXVlcnkoKSB7CiAgICAgICAg\nRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7\nCiAgICAgICAgUXVlcnkgcSA9IGVtLmNyZWF0ZVF1ZXJ5KCJzZWxlY3QgZSBm\ncm9tIE1hbnlPbmVDb21wb3VuZElkT3duZXIgZSAiCiAgICAgICAgICAgICsg\nIndoZXJlIGUubG9uZ0lkID0gOmNpZCBhbmQgZS5lbnRpdHlJZC5pZCA9IDpp\nZCIpOwogICAgICAgIHEuc2V0UGFyYW1ldGVyKCJjaWQiLCBjaWQpOwogICAg\nICAgIHEuc2V0UGFyYW1ldGVyKCJpZCIsIGlkKTsKICAgICAgICBNYW55T25l\nQ29tcG91bmRJZE93bmVyIHBjID0gKE1hbnlPbmVDb21wb3VuZElkT3duZXIp\ncS5nZXRTaW5nbGVSZXN1bHQoKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHBj\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoImNwYXJlbnQiLCBwYy5nZXROYW1l\nKCkpOwogICAgICAgIGVtLmNsb3NlKCk7CgogICAgICAgIGVtID0gZW1mLmNy\nZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBCYXNpY0VudGl0eSBpZDEg\nPSBlbS5maW5kKEJhc2ljRW50aXR5LmNsYXNzLCBpZCk7CiAgICAgICAgYXNz\nZXJ0Tm90TnVsbChpZDEpOwogICAgICAgIGFzc2VydEVxdWFscygiaWQxIiwg\naWQxLmdldE5hbWUoKSk7CiAgICAgICAgcSA9IGVtLmNyZWF0ZVF1ZXJ5KCJz\nZWxlY3QgZSBmcm9tIE1hbnlPbmVDb21wb3VuZElkT3duZXIgZSAiCiAgICAg\nICAgICAgICsgIndoZXJlIGUubG9uZ0lkID0gOmNpZCBhbmQgZS5lbnRpdHlJ\nZCA9IDppZCIpOwogICAgICAgIHEuc2V0UGFyYW1ldGVyKCJjaWQiLCBjaWQp\nOwogICAgICAgIHEuc2V0UGFyYW1ldGVyKCJpZCIsIGlkMSk7CiAgICAgICAg\ncGMgPSAoTWFueU9uZUNvbXBvdW5kSWRPd25lcikgcS5nZXRTaW5nbGVSZXN1\nbHQoKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHBjKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoImNwYXJlbnQiLCBwYy5nZXROYW1lKCkpOwogICAgICAgIGVt\nLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4o\nU3RyaW5nW10gYXJncykgewogICAgICAgIFRlc3RSdW5uZXIucnVuKFRlc3RN\nYW55T25lQXNJZC5jbGFzcyk7CiAgICB9Cn0KCg==\n","encoding":"base64"}

