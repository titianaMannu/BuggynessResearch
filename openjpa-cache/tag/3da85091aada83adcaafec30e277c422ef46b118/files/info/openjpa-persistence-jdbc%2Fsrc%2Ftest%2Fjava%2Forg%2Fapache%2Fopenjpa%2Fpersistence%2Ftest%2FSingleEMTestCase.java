{"sha":"a4416f2e26b6ab56cfda49d0317118263602f2da","node_id":"MDQ6QmxvYjIwNjM2NDphNDQxNmYyZTI2YjZhYjU2Y2ZkYTQ5ZDAzMTcxMTgyNjM2MDJmMmRh","size":5305,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/a4416f2e26b6ab56cfda49d0317118263602f2da","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UudGVzdDsK\nCmltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbnM7CmltcG9ydCBqYXZhLnV0\naWwuTGlzdDsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eVRyYW5z\nYWN0aW9uOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5j\nZS5PcGVuSlBBRW50aXR5TWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBUXVlcnk7CgovKioKICogQSBiYXNl\nIHRlc3QgY2FzZSB0aGF0IGNhbiBiZSB1c2VkIHRvIGVhc2lseSB0ZXN0IHNj\nZW5hcmlvcyB3aGVyZSB0aGVyZQogKiBpcyBvbmx5IGEgc2luZ2xlIEVudGl0\neU1hbmFnZXIgYXQgYW55IGdpdmVuIHRpbWUuCiAqCiAqIEBhdXRob3IgTWFy\nYyBQcnVkJ2hvbW1lYXV4CiAqLwpwdWJsaWMgYWJzdHJhY3QgY2xhc3MgU2lu\nZ2xlRU1UZXN0Q2FzZSAKICAgIGV4dGVuZHMgU2luZ2xlRU1GVGVzdENhc2Ug\newoKICAgIHByb3RlY3RlZCBPcGVuSlBBRW50aXR5TWFuYWdlciBlbTsKCiAg\nICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIHNldFVwKE9iamVjdC4uLiBw\ncm9wcykgewogICAgICAgIHN1cGVyLnNldFVwKHByb3BzKTsKICAgICAgICBl\nbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7IAogICAgfQoKICAgIEBP\ndmVycmlkZQogICAgcHVibGljIHZvaWQgdGVhckRvd24oKSB7CiAgICAgICAg\ncm9sbGJhY2soKTsKICAgICAgICBjbG9zZSgpOwogICAgICAgIHN1cGVyLnRl\nYXJEb3duKCk7CiAgICB9CgogICAgLyoqIAogICAgICogU3RhcnQgYSBuZXcg\ndHJhbnNhY3Rpb24gaWYgdGhlcmUgaXNuJ3QgY3VycmVudGx5IG9uZSBhY3Rp\ndmUuIAogICAgICogQHJldHVybiAgdHJ1ZSBpZiBhIHRyYW5zYWN0aW9uIHdh\ncyBzdGFydGVkLCBmYWxzZSBpZiBvbmUgYWxyZWFkeSBleGlzdGVkCiAgICAg\nKi8KICAgIHByb3RlY3RlZCBib29sZWFuIGJlZ2luKCkgewogICAgICAgIEVu\ndGl0eVRyYW5zYWN0aW9uIHR4ID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsKICAg\nICAgICBpZiAodHguaXNBY3RpdmUoKSkKICAgICAgICAgICAgcmV0dXJuIGZh\nbHNlOwoKICAgICAgICB0eC5iZWdpbigpOwogICAgICAgIHJldHVybiB0cnVl\nOwogICAgfQoKICAgIC8qKiAKICAgICAqIENvbW1pdCB0aGUgY3VycmVudCB0\ncmFuc2FjdGlvbiwgaWYgaXQgaXMgYWN0aXZlLiAKICAgICAqIEByZXR1cm4g\ndHJ1ZSBpZiB0aGUgdHJhbnNhY3Rpb24gd2FzIGNvbW1pdHRlZAogICAgICov\nCiAgICBwcm90ZWN0ZWQgYm9vbGVhbiBjb21taXQoKSB7CiAgICAgICAgRW50\naXR5VHJhbnNhY3Rpb24gdHggPSBlbS5nZXRUcmFuc2FjdGlvbigpOwogICAg\nICAgIGlmICghdHguaXNBY3RpdmUoKSkKICAgICAgICAgICAgcmV0dXJuIGZh\nbHNlOwoKICAgICAgICB0eC5jb21taXQoKTsKICAgICAgICByZXR1cm4gdHJ1\nZTsKICAgIH0KCiAgICAvKiogCiAgICAgKiBSb2xsYmFjayB0aGUgY3VycmVu\ndCB0cmFuc2FjdGlvbiwgaWYgaXQgaXMgYWN0aXZlLiAKICAgICAqIEByZXR1\ncm4gdHJ1ZSBpZiB0aGUgdHJhbnNhY3Rpb24gd2FzIHJvbGxlZCBiYWNrCiAg\nICAgKi8KICAgIHByb3RlY3RlZCBib29sZWFuIHJvbGxiYWNrKCkgewogICAg\nICAgIEVudGl0eVRyYW5zYWN0aW9uIHR4ID0gZW0uZ2V0VHJhbnNhY3Rpb24o\nKTsKICAgICAgICBpZiAoIXR4LmlzQWN0aXZlKCkpCiAgICAgICAgICAgIHJl\ndHVybiBmYWxzZTsKCiAgICAgICAgdHguY29tbWl0KCk7CiAgICAgICAgcmV0\ndXJuIHRydWU7CiAgICB9CgogICAgLyoqIAogICAgICogQ2xvc2VzIHRoZSBj\ndXJyZW50IEVudGl0eU1hbmFnZXIgaWYgaXQgaXMgb3Blbi4gCiAgICAgKiBA\ncmV0dXJuIGZhbHNlIGlmIHRoZSBFbnRpdHlNYW5hZ2VyIHdhcyBhbHJlYWR5\nIGNsb3NlZC4KICAgICAqLwogICAgcHJvdGVjdGVkIGJvb2xlYW4gY2xvc2Uo\nKSB7CiAgICAgICAgaWYgKGVtID09IG51bGwpCiAgICAgICAgICAgIHJldHVy\nbiBmYWxzZTsKCiAgICAgICAgcm9sbGJhY2soKTsKCiAgICAgICAgaWYgKCFl\nbS5pc09wZW4oKSkKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoKICAgICAg\nICBlbS5jbG9zZSgpOwogICAgICAgIHJldHVybiAhZW0uaXNPcGVuKCk7CiAg\nICB9CgogICAgLyoqIAogICAgICogRGVsZXRlIGFsbCBvZiB0aGUgaW5zdGFu\nY2VzLgogICAgICoKICAgICAqIElmIG5vIHRyYW5zYWN0aW9uIGlzIHJ1bm5p\nbmcsIHRoZW4gb25lIHdpbGwgYmUgc3RhcnRlZCBhbmQgY29tbWl0dGVkLgog\nICAgICogT3RoZXJ3aXNlLCB0aGUgb3BlcmF0aW9uIHdpbGwgdGFrZSBwbGFj\nZSBpbiB0aGUgY3VycmVudCB0cmFuc2FjdGlvbi4KICAgICAqLwogICAgcHJv\ndGVjdGVkIHZvaWQgcmVtb3ZlKE9iamVjdC4uLiBvYnMpIHsKICAgICAgICBi\nb29sZWFuIHR4ID0gYmVnaW4oKTsKICAgICAgICBmb3IgKE9iamVjdCBvYiA6\nIG9icykKICAgICAgICAgICAgZW0ucmVtb3ZlKG9iKTsKICAgICAgICBpZiAo\ndHgpIAogICAgICAgICAgICBjb21taXQoKTsKICAgIH0KCiAgICAvKiogCiAg\nICAgKiBQZXJzaXN0IGFsbCBvZiB0aGUgaW5zdGFuY2VzLgogICAgICoKICAg\nICAqIElmIG5vIHRyYW5zYWN0aW9uIGlzIHJ1bm5pbmcsIHRoZW4gb25lIHdp\nbGwgYmUgc3RhcnRlZCBhbmQgY29tbWl0dGVkLgogICAgICogT3RoZXJ3aXNl\nLCB0aGUgb3BlcmF0aW9uIHdpbGwgdGFrZSBwbGFjZSBpbiB0aGUgY3VycmVu\ndCB0cmFuc2FjdGlvbi4KICAgICAqLwogICAgcHJvdGVjdGVkIHZvaWQgcGVy\nc2lzdChPYmplY3QuLi4gb2JzKSB7CiAgICAgICAgYm9vbGVhbiB0eCA9IGJl\nZ2luKCk7CiAgICAgICAgZm9yIChPYmplY3Qgb2IgOiBvYnMpCiAgICAgICAg\nICAgIGVtLnBlcnNpc3Qob2IpOwogICAgICAgIGlmICh0eCkgCiAgICAgICAg\nICAgIGNvbW1pdCgpOwogICAgfQoKICAgIC8qKiAKICAgICAqIENyZWF0ZXMg\nYSBxdWVyeSBpbiB0aGUgY3VycmVudCBFbnRpdHlNYW5hZ2VyIHdpdGggdGhl\nIHNwZWNpZmllZCBzdHJpbmcuIAogICAgICovCiAgICBwcm90ZWN0ZWQgT3Bl\nbkpQQVF1ZXJ5IHF1ZXJ5KFN0cmluZyBzdHIpIHsKICAgICAgICByZXR1cm4g\nZW0uY3JlYXRlUXVlcnkoc3RyKTsKICAgIH0KCiAgICAvKiogCiAgICAgKiBD\ncmVhdGUgYSBxdWVyeSBhZ2FpbnN0IHRoZSBzcGVjaWZpZWQgY2xhc3MsIHdo\naWNoIHdpbGwgYmUgYWxpYXNlZAogICAgICogYXMgIngiLiBGb3IgZXhhbXBs\nZSwgcXVlcnkoUGVyc29uLmNsYXNzLCAid2hlcmUgeC5hZ2UgPSAyMSIpIHdp\nbGwKICAgICAqIGNyZWF0ZSB0aGUgcXVlcnkgInNlbGVjdCB4IGZyb20gUGVy\nc29uIHggd2hlcmUgeC5hZ2UgPSAyMSIuCiAgICAgKiAgCiAgICAgKiBAcGFy\nYW0gIGMgIHRoZSBjbGFzcyB0byBxdWVyeSBhZ2FpbnN0CiAgICAgKiBAcGFy\nYW0gIHN0ciAgdGhlIHF1ZXJ5IHN1ZmZpeAogICAgICogQHBhcmFtICBwYXJh\nbXMgIHRoZSBwYXJhbWV0ZXJzLCBpZiBhbnkKICAgICAqIEByZXR1cm4gdGhl\nIFF1ZXJ5IG9iamVjdAogICAgICovCiAgICBwcm90ZWN0ZWQgT3BlbkpQQVF1\nZXJ5IHF1ZXJ5KENsYXNzIGMsIFN0cmluZyBzdHIsIE9iamVjdC4uLiBwYXJh\nbXMpIHsKICAgICAgICBTdHJpbmcgcXVlcnkgPSAic2VsZWN0IHggZnJvbSAi\nICsgZW50aXR5TmFtZShlbWYsIGMpICsgIiB4ICIKICAgICAgICAgICAgKyAo\nc3RyID09IG51bGwgPyAiIiA6IHN0cik7CiAgICAgICAgT3BlbkpQQVF1ZXJ5\nIHEgPSBlbS5jcmVhdGVRdWVyeShxdWVyeSk7CiAgICAgICAgZm9yIChpbnQg\naSA9IDA7IHBhcmFtcyAhPSBudWxsICYmIGkgPCBwYXJhbXMubGVuZ3RoOyBp\nKyspCiAgICAgICAgICAgIHEuc2V0UGFyYW1ldGVyKGkgKyAxLCBwYXJhbXNb\naV0pOwogICAgICAgIHJldHVybiBxOwogICAgfQoKICAgIC8qKiAKICAgICAq\nIFJldHVybnMgYSBsaXN0IG9mIGFsbCBpbnN0YW5jZXMgb2YgdGhlIHNwZWNp\nZmljIGNsYXNzIGluIHRoZSBkYXRhYmFzZS4gCiAgICAgKgogICAgICogQHBh\ncmFtIGMgdGhlIGNsYXNzIHRvIGZpbmQKICAgICAqIEBwYXJhbSBxIHRoZSBx\ndWVyeSBzdHJpbmcgc3VmZml4IHRvIHVzZQogICAgICogQHBhcmFtIHBhcmFt\ncyB0aGUgcG9zaXRpb25hbCBwYXJhbWV0ZXIgbGlzdCB2YWx1ZQogICAgICoK\nICAgICAqIEBzZWUgI3F1ZXJ5KGphdmEubGFuZy5DbGFzcyxqYXZhLmxhbmcu\nU3RyaW5nKQogICAgICovCiAgICBwcm90ZWN0ZWQgPEU+IExpc3Q8RT4gZmlu\nZChDbGFzczxFPiBjLCBTdHJpbmcgcSwgT2JqZWN0Li4uIHBhcmFtcykgewog\nICAgICAgIHJldHVybiBDb2xsZWN0aW9ucy5jaGVja2VkTGlzdChxdWVyeShj\nLCBxLCBwYXJhbXMpLmdldFJlc3VsdExpc3QoKSwgYyk7CiAgICB9CgogICAg\nLyoqIAogICAgICogUmV0dXJucyBhIGxpc3Qgb2YgYWxsIGluc3RhbmNlcyBv\nZiB0aGUgc3BlY2lmaWMgY2xhc3MgaW4gdGhlIGRhdGFiYXNlLiAKICAgICAq\nLwogICAgcHJvdGVjdGVkIDxFPiBMaXN0PEU+IGZpbmQoQ2xhc3M8RT4gYykg\newogICAgICAgIHJldHVybiBmaW5kKGMsIG51bGwpOwogICAgfQp9Cg==\n","encoding":"base64"}

