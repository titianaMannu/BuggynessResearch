{"sha":"a01899ea30c207740dfcec25303716ed18953c6c","node_id":"MDQ6QmxvYjIwNjM2NDphMDE4OTllYTMwYzIwNzc0MGRmY2VjMjUzMDM3MTZlZDE4OTUzYzZj","size":4592,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/a01899ea30c207740dfcec25303716ed18953c6c","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWw7CgppbXBv\ncnQgamF2YS5zcWwuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmEuc3FsLlByZXBh\ncmVkU3RhdGVtZW50OwppbXBvcnQgamF2YS5zcWwuU1FMRXhjZXB0aW9uOwpp\nbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247CmltcG9ydCBqYXZhLnV0aWwu\nTGlua2VkTGlzdDsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5t\nZXRhLkNsYXNzTWFwcGluZzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5q\nZGJjLnNjaGVtYS5Db2x1bW47CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5zcWwuREJEaWN0aW9uYXJ5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmpkYmMuc3FsLlJvdzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5q\nZGJjLnNxbC5Sb3dJbXBsOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpk\nYmMuc3FsLlNRTEV4Y2VwdGlvbnM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEua2VybmVsLk9wZW5KUEFTdGF0ZU1hbmFnZXI7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnV0aWwuQXBwbGljYXRpb25JZHM7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEudXRpbC5PcGVuSlBBRXhjZXB0aW9uOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuT3B0aW1pc3RpY0V4Y2VwdGlvbjsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkNsYXNzTWV0YURhdGE7\nCgovKioKICogQmFzaWMgcHJlcGFyZWQgc3RhdGVtZW50IG1hbmFnZXIgaW1w\nbGVtZW50YXRpb24uCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqLwpwdWJs\naWMgY2xhc3MgUHJlcGFyZWRTdGF0ZW1lbnRNYW5hZ2VySW1wbCAKICAgIGlt\ncGxlbWVudHMgUHJlcGFyZWRTdGF0ZW1lbnRNYW5hZ2VyIHsKCiAgICBwcml2\nYXRlIGZpbmFsIHN0YXRpYyBMb2NhbGl6ZXIgX2xvYyA9IExvY2FsaXplcgog\nICAgICAgIC5mb3JQYWNrYWdlKFByZXBhcmVkU3RhdGVtZW50TWFuYWdlcklt\ncGwuY2xhc3MpOwoKICAgIHByb3RlY3RlZCBmaW5hbCBKREJDU3RvcmUgX3N0\nb3JlOwogICAgcHJvdGVjdGVkIGZpbmFsIENvbm5lY3Rpb24gX2Nvbm47CiAg\nICBwcm90ZWN0ZWQgZmluYWwgREJEaWN0aW9uYXJ5IF9kaWN0OwoKICAgIC8v\nIHRyYWNrIGV4Y2VwdGlvbnMKICAgIHByb3RlY3RlZCBmaW5hbCBDb2xsZWN0\naW9uIF9leGNlcHRpb25zID0gbmV3IExpbmtlZExpc3QoKTsKCiAgICAvKioK\nICAgICAqIENvbnN0cnVjdG9yLiBTdXBwbHkgY29ubmVjdGlvbi4KICAgICAq\nLwogICAgcHVibGljIFByZXBhcmVkU3RhdGVtZW50TWFuYWdlckltcGwoSkRC\nQ1N0b3JlIHN0b3JlLCBDb25uZWN0aW9uIGNvbm4pIHsKICAgICAgICBfc3Rv\ncmUgPSBzdG9yZTsKICAgICAgICBfZGljdCA9IHN0b3JlLmdldERCRGljdGlv\nbmFyeSgpOwogICAgICAgIF9jb25uID0gY29ubjsKICAgIH0KCiAgICBwdWJs\naWMgQ29sbGVjdGlvbiBnZXRFeGNlcHRpb25zKCkgewogICAgICAgIHJldHVy\nbiBfZXhjZXB0aW9uczsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBmbHVzaChS\nb3dJbXBsIHJvdykgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZsdXNo\nSW50ZXJuYWwocm93KTsKICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24g\nc2UpIHsKICAgICAgICAgICAgX2V4Y2VwdGlvbnMuYWRkKFNRTEV4Y2VwdGlv\nbnMuZ2V0U3RvcmUoc2UsIF9kaWN0KSk7CiAgICAgICAgfSBjYXRjaCAoT3Bl\nbkpQQUV4Y2VwdGlvbiBrZSkgewogICAgICAgICAgICBfZXhjZXB0aW9ucy5h\nZGQoa2UpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEZsdXNo\nIHRoZSBnaXZlbiByb3cuCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIGZs\ndXNoSW50ZXJuYWwoUm93SW1wbCByb3cpIHRocm93cyBTUUxFeGNlcHRpb24g\newogICAgICAgIC8vIGNhbid0IGJhdGNoIHJvd3Mgd2l0aCBhdXRvLWluYyBj\nb2x1bW5zCiAgICAgICAgQ29sdW1uW10gYXV0b0Fzc2lnbiA9IG51bGw7CiAg\nICAgICAgaWYgKHJvdy5nZXRBY3Rpb24oKSA9PSBSb3cuQUNUSU9OX0lOU0VS\nVCkKICAgICAgICAgICAgYXV0b0Fzc2lnbiA9IHJvdy5nZXRUYWJsZSgpLmdl\ndEF1dG9Bc3NpZ25lZENvbHVtbnMoKTsKCiAgICAgICAgLy8gcHJlcGFyZSBz\ndGF0ZW1lbnQKICAgICAgICBTdHJpbmcgc3FsID0gcm93LmdldFNRTChfZGlj\ndCk7CiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgc3RtbnQgPSBfY29ubi5w\ncmVwYXJlU3RhdGVtZW50KHNxbCk7CgogICAgICAgIC8vIHNldHVwIHBhcmFt\nZXRlcnMgYW5kIGV4ZWN1dGUgc3RhdGVtZW50CiAgICAgICAgcm93LmZsdXNo\nKHN0bW50LCBfZGljdCwgX3N0b3JlKTsKICAgICAgICB0cnkgewogICAgICAg\nICAgICBpbnQgY291bnQgPSBzdG1udC5leGVjdXRlVXBkYXRlKCk7CiAgICAg\nICAgICAgIGlmIChjb3VudCAhPSAxKSB7CiAgICAgICAgICAgICAgICBPYmpl\nY3QgZmFpbGVkID0gcm93LmdldEZhaWxlZE9iamVjdCgpOwogICAgICAgICAg\nICAgICAgaWYgKGZhaWxlZCAhPSBudWxsKQogICAgICAgICAgICAgICAgICAg\nIF9leGNlcHRpb25zLmFkZChuZXcgT3B0aW1pc3RpY0V4Y2VwdGlvbihmYWls\nZWQpKTsKICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJvdy5nZXRBY3Rpb24o\nKSA9PSBSb3cuQUNUSU9OX0lOU0VSVCkKICAgICAgICAgICAgICAgICAgICB0\naHJvdyBuZXcgU1FMRXhjZXB0aW9uKF9sb2MuZ2V0KAogICAgICAgICAgICAg\nICAgICAgICAgICAidXBkYXRlLWZhaWxlZC1uby1mYWlsZWQtb2JqIiwgU3Ry\naW5nLnZhbHVlT2YoY291bnQpLAogICAgICAgICAgICAgICAgICAgICAgICBz\ncWwpLmdldE1lc3NhZ2UoKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGNh\ndGNoIChTUUxFeGNlcHRpb24gc2UpIHsKICAgICAgICAgICAgdGhyb3cgU1FM\nRXhjZXB0aW9ucy5nZXRTdG9yZShzZSwgcm93LmdldEZhaWxlZE9iamVjdCgp\nLCBfZGljdCk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgdHJ5\nIHsgc3RtbnQuY2xvc2UoKTsgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIHNlKSB7\nfQogICAgICAgIH0KCiAgICAgICAgLy8gc2V0IGF1dG8gYXNzaWduIHZhbHVl\ncwogICAgICAgIGlmIChhdXRvQXNzaWduICE9IG51bGwgJiYgYXV0b0Fzc2ln\nbi5sZW5ndGggPiAwCiAgICAgICAgICAgICYmIHJvdy5nZXRQcmltYXJ5S2V5\nKCkgIT0gbnVsbCkgewogICAgICAgICAgICBPcGVuSlBBU3RhdGVNYW5hZ2Vy\nIHNtID0gcm93LmdldFByaW1hcnlLZXkoKTsKICAgICAgICAgICAgQ2xhc3NN\nYXBwaW5nIG1hcHBpbmcgPSAoQ2xhc3NNYXBwaW5nKSBzbS5nZXRNZXRhRGF0\nYSgpOwogICAgICAgICAgICBPYmplY3QgdmFsOwogICAgICAgICAgICBmb3Ig\nKGludCBpID0gMDsgaSA8IGF1dG9Bc3NpZ24ubGVuZ3RoOyBpKyspIHsKICAg\nICAgICAgICAgICAgIHZhbCA9IF9kaWN0LmdldEdlbmVyYXRlZEtleShhdXRv\nQXNzaWduW2ldLCBfY29ubik7CiAgICAgICAgICAgICAgICBtYXBwaW5nLmFz\nc2VydEpvaW5hYmxlKGF1dG9Bc3NpZ25baV0pLnNldEF1dG9Bc3NpZ25lZFZh\nbHVlKHNtLAogICAgICAgICAgICAgICAgICAgIF9zdG9yZSwgYXV0b0Fzc2ln\nbltpXSwgdmFsKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBzbS5zZXRP\nYmplY3RJZCgKICAgICAgICAgICAgICAgIEFwcGxpY2F0aW9uSWRzLmNyZWF0\nZShzbS5nZXRQZXJzaXN0ZW5jZUNhcGFibGUoKSwgbWFwcGluZykpOwogICAg\nICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCBmbHVzaCgpIHsKICAgIH0K\nfQo=\n","encoding":"base64"}

