{"sha":"28b8d2152d27dab1b4b93399a045a462daefe79e","node_id":"MDQ6QmxvYjIwNjM2NDoyOGI4ZDIxNTJkMjdkYWIxYjRiOTMzOTlhMDQ1YTQ2MmRhZWZlNzll","size":3723,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/28b8d2152d27dab1b4b93399a045a462daefe79e","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuZXhwczsK\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuU1FMQnVmZmVy\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNlbGVjdDsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLkltcGxIZWxwZXI7Cgov\nKioKICogT2J0YWluaW5nIHRoZSBvYmplY3QgaWQgb2YgYSBjb25zdGFudC4K\nICoKICogQGF1dGhvciBBYmUgV2hpdGUKICovCmNsYXNzIENvbnN0R2V0T2Jq\nZWN0SWQKICAgIGV4dGVuZHMgQ29uc3QgewoKICAgIHByaXZhdGUgZmluYWwg\nQ29uc3QgX2NvbnN0YW50OwoKICAgIC8qKgogICAgICogQ29uc3RydWN0b3Iu\nIFN1cHBseSBjb25zdGFudCB0byB0cmF2ZXJzZS4KICAgICAqLwogICAgcHVi\nbGljIENvbnN0R2V0T2JqZWN0SWQoQ29uc3QgY29uc3RhbnQpIHsKICAgICAg\nICBfY29uc3RhbnQgPSBjb25zdGFudDsKICAgIH0KCiAgICBwdWJsaWMgQ2xh\nc3MgZ2V0VHlwZSgpIHsKICAgICAgICByZXR1cm4gT2JqZWN0LmNsYXNzOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldEltcGxpY2l0VHlwZShDbGFzcyB0\neXBlKSB7CiAgICB9CgogICAgcHVibGljIE9iamVjdCBnZXRWYWx1ZShPYmpl\nY3RbXSBwYXJhbXMpIHsKICAgICAgICBPYmplY3QgbyA9IF9jb25zdGFudC5n\nZXRWYWx1ZShwYXJhbXMpOwogICAgICAgIGlmICghKEltcGxIZWxwZXIuaXNN\nYW5hZ2VhYmxlKG8pKSkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAg\nICAgcmV0dXJuIChJbXBsSGVscGVyLnRvUGVyc2lzdGVuY2VDYXBhYmxlKG8s\nCiAgICAgICAgICAgIHRoaXMuZ2V0TWV0YURhdGEoKS5nZXRSZXBvc2l0b3J5\nKCkuZ2V0Q29uZmlndXJhdGlvbigpKSkKICAgICAgICAgICAgLnBjRmV0Y2hP\nYmplY3RJZCgpOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgZ2V0VmFsdWUo\nRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlKSB7CiAgICAgICAgcmV0\ndXJuIGN0eC5zdG9yZS5nZXRDb250ZXh0KCkuZ2V0T2JqZWN0SWQoX2NvbnN0\nYW50LmdldFZhbHVlKGN0eCwgCiAgICAgICAgICAgICgoQ29uc3RHZXRPYmpl\nY3RJZEV4cFN0YXRlKSBzdGF0ZSkuY29uc3RhbnRTdGF0ZSkpOwogICAgfQoK\nICAgIHB1YmxpYyBFeHBTdGF0ZSBpbml0aWFsaXplKFNlbGVjdCBzZWwsIEV4\ncENvbnRleHQgY3R4LCBpbnQgZmxhZ3MpIHsKICAgICAgICByZXR1cm4gbmV3\nIENvbnN0R2V0T2JqZWN0SWRFeHBTdGF0ZShfY29uc3RhbnQuaW5pdGlhbGl6\nZShzZWwsIGN0eCwgMCkpOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgZ2V0\nU1FMVmFsdWUoU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRl\nIHN0YXRlKSB7CiAgICAgICAgcmV0dXJuICgoQ29uc3RHZXRPYmplY3RJZEV4\ncFN0YXRlKSBzdGF0ZSkuc3FsVmFsdWU7CiAgICB9CgogICAgcHVibGljIHZv\naWQgY2FsY3VsYXRlVmFsdWUoU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgs\nIEV4cFN0YXRlIHN0YXRlLCAKICAgICAgICBWYWwgb3RoZXIsIEV4cFN0YXRl\nIG90aGVyU3RhdGUpIHsKICAgICAgICBzdXBlci5jYWxjdWxhdGVWYWx1ZShz\nZWwsIGN0eCwgc3RhdGUsIG90aGVyLCBvdGhlclN0YXRlKTsKICAgICAgICBD\nb25zdEdldE9iamVjdElkRXhwU3RhdGUgY3N0YXRlID0gKENvbnN0R2V0T2Jq\nZWN0SWRFeHBTdGF0ZSkgc3RhdGU7CiAgICAgICAgX2NvbnN0YW50LmNhbGN1\nbGF0ZVZhbHVlKHNlbCwgY3R4LCBjc3RhdGUuY29uc3RhbnRTdGF0ZSwgbnVs\nbCwgbnVsbCk7CiAgICAgICAgT2JqZWN0IG9pZCA9IGN0eC5zdG9yZS5nZXRD\nb250ZXh0KCkuZ2V0T2JqZWN0SWQoX2NvbnN0YW50LmdldFZhbHVlKGN0eCwg\nCiAgICAgICAgICAgIGNzdGF0ZS5jb25zdGFudFN0YXRlKSk7CiAgICAgICAg\naWYgKG90aGVyICE9IG51bGwpIHsKICAgICAgICAgICAgY3N0YXRlLnNxbFZh\nbHVlID0gb3RoZXIudG9EYXRhU3RvcmVWYWx1ZShzZWwsIGN0eCwgb3RoZXJT\ndGF0ZSwgb2lkKTsKICAgICAgICAgICAgY3N0YXRlLm90aGVyTGVuZ3RoID0g\nb3RoZXIubGVuZ3RoKHNlbCwgY3R4LCBvdGhlclN0YXRlKTsKICAgICAgICB9\nIGVsc2UKICAgICAgICAgICAgY3N0YXRlLnNxbFZhbHVlID0gb2lkOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIGFwcGVuZFRvKFNlbGVjdCBzZWwsIEV4cENv\nbnRleHQgY3R4LCBFeHBTdGF0ZSBzdGF0ZSwgCiAgICAgICAgU1FMQnVmZmVy\nIHNxbCwgaW50IGluZGV4KSB7CiAgICAgICAgQ29uc3RHZXRPYmplY3RJZEV4\ncFN0YXRlIGNzdGF0ZSA9IChDb25zdEdldE9iamVjdElkRXhwU3RhdGUpIHN0\nYXRlOwogICAgICAgIGlmIChjc3RhdGUub3RoZXJMZW5ndGggPiAxKQogICAg\nICAgICAgICBzcWwuYXBwZW5kVmFsdWUoKChPYmplY3RbXSkgY3N0YXRlLnNx\nbFZhbHVlKVtpbmRleF0sIAogICAgICAgICAgICAgICAgY3N0YXRlLmdldENv\nbHVtbihpbmRleCkpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgc3FsLmFw\ncGVuZFZhbHVlKGNzdGF0ZS5zcWxWYWx1ZSwgY3N0YXRlLmdldENvbHVtbihp\nbmRleCkpOwogICAgfQoKICAgIC8qKgogICAgICogRXhwcmVzc2lvbiBzdGF0\nZS4KICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgY2xhc3MgQ29uc3RHZXRP\nYmplY3RJZEV4cFN0YXRlIAogICAgICAgIGV4dGVuZHMgQ29uc3RFeHBTdGF0\nZSB7CgogICAgICAgIHB1YmxpYyBmaW5hbCBFeHBTdGF0ZSBjb25zdGFudFN0\nYXRlOwogICAgICAgIHB1YmxpYyBPYmplY3Qgc3FsVmFsdWUgPSBudWxsOwog\nICAgICAgIHB1YmxpYyBpbnQgb3RoZXJMZW5ndGggPSAwOwoKICAgICAgICBw\ndWJsaWMgQ29uc3RHZXRPYmplY3RJZEV4cFN0YXRlKEV4cFN0YXRlIGNvbnN0\nYW50U3RhdGUpIHsKICAgICAgICAgICAgdGhpcy5jb25zdGFudFN0YXRlID0g\nY29uc3RhbnRTdGF0ZTsKICAgICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

