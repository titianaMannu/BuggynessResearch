{"sha":"5a41b30ff44c39a00e4523d4e4d89bab657b03db","node_id":"MDQ6QmxvYjIwNjM2NDo1YTQxYjMwZmY0NGMzOWEwMGU0NTIzZDRlNGQ4OWJhYjY1N2IwM2Ri","size":12618,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/5a41b30ff44c39a00e4523d4e4d89bab657b03db","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhOwoKaW1wb3J0\nIGphdmEuc3FsLlNRTEV4Y2VwdGlvbjsKCmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5rZXJuZWwuSkRCQ1N0b3JlOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmpkYmMuc2NoZW1hLkNvbHVtbjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLnNjaGVtYS5Db2x1bW5JTzsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5JbmRleDsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5TY2hlbWFzOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLkpvaW5zOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMuc3FsLlJlc3VsdDsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLnNxbC5Sb3dNYW5hZ2VyOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNRTEJ1ZmZlcjsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5qZGJjLnNxbC5TZWxlY3Q7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEua2VybmVsLk9wZW5KUEFTdGF0ZU1hbmFnZXI7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmxvZy5Mb2c7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLm1ldGEuSmF2YVR5cGVzOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLm1ldGEuTWV0YURhdGFDb250ZXh0OwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLm1ldGEuTWV0YURhdGFNb2RlczsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5tZXRhLk1ldGFEYXRhUmVwb3NpdG9yeTsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLkludGVybmFsRXhjZXB0aW9u\nOwoKLyoqCiAqIEhhbmRsZXMgZGV0ZXJtaW5pbmcgdGhlIG9iamVjdCBjbGFz\ncyBvZiBkYXRhYmFzZSByZWNvcmRzLgogKgogKiBAYXV0aG9yIEFiZSBXaGl0\nZQogKi8KcHVibGljIGNsYXNzIERpc2NyaW1pbmF0b3IKICAgIGltcGxlbWVu\ndHMgRGlzY3JpbWluYXRvclN0cmF0ZWd5LCBNZXRhRGF0YUNvbnRleHQsIE1l\ndGFEYXRhTW9kZXMgewoKICAgIC8qKgogICAgICogTnVsbCBkaXNjcmltaW5h\ndG9yIHZhbHVlIG1hcmtlci4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBm\naW5hbCBPYmplY3QgTlVMTCA9IG5ldyBPYmplY3QoKTsKCiAgICBwcml2YXRl\nIHN0YXRpYyBmaW5hbCBMb2NhbGl6ZXIgX2xvYyA9IExvY2FsaXplci5mb3JQ\nYWNrYWdlCiAgICAgICAgKERpc2NyaW1pbmF0b3IuY2xhc3MpOwoKICAgIHBy\naXZhdGUgZmluYWwgQ2xhc3NNYXBwaW5nIF9tYXBwaW5nOwogICAgcHJpdmF0\nZSBmaW5hbCBEaXNjcmltaW5hdG9yTWFwcGluZ0luZm8gX2luZm87CiAgICBw\ncml2YXRlIERpc2NyaW1pbmF0b3JTdHJhdGVneSBfc3RyYXRlZ3kgPSBudWxs\nOwogICAgcHJpdmF0ZSBpbnQgX3Jlc01vZGUgPSBNT0RFX05PTkU7CgogICAg\ncHJpdmF0ZSBDb2x1bW5bXSBfY29scyA9IFNjaGVtYXMuRU1QVFlfQ09MVU1O\nUzsKICAgIHByaXZhdGUgQ29sdW1uSU8gX2lvID0gbnVsbDsKICAgIHByaXZh\ndGUgSW5kZXggX2lkeCA9IG51bGw7CiAgICBwcml2YXRlIGJvb2xlYW4gX3N1\nYnNMb2FkZWQgPSBmYWxzZTsKICAgIHByaXZhdGUgT2JqZWN0IF92YWx1ZSA9\nIG51bGw7CiAgICAKICAgIHByaXZhdGUgaW50IF9qYXZhVHlwZSA9IC0xOyAK\nCiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yLiBTdXBwbHkgb3duaW5nIG1h\ncHBpbmcuCiAgICAgKi8KICAgIHB1YmxpYyBEaXNjcmltaW5hdG9yKENsYXNz\nTWFwcGluZyBtYXBwaW5nKSB7CiAgICAgICAgX21hcHBpbmcgPSBtYXBwaW5n\nOwogICAgICAgIF9pbmZvID0gZ2V0TWFwcGluZ1JlcG9zaXRvcnkoKS5uZXdN\nYXBwaW5nSW5mbyh0aGlzKTsKICAgIH0KCiAgICBwdWJsaWMgTWV0YURhdGFS\nZXBvc2l0b3J5IGdldFJlcG9zaXRvcnkoKSB7CiAgICAgICAgcmV0dXJuIF9t\nYXBwaW5nLmdldFJlcG9zaXRvcnkoKTsKICAgIH0KCiAgICBwdWJsaWMgTWFw\ncGluZ1JlcG9zaXRvcnkgZ2V0TWFwcGluZ1JlcG9zaXRvcnkoKSB7CiAgICAg\nICAgcmV0dXJuIF9tYXBwaW5nLmdldE1hcHBpbmdSZXBvc2l0b3J5KCk7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIG93bmluZyBtYXBwaW5n\nLgogICAgICovCiAgICBwdWJsaWMgQ2xhc3NNYXBwaW5nIGdldENsYXNzTWFw\ncGluZygpIHsKICAgICAgICByZXR1cm4gX21hcHBpbmc7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBUaGUgc3RyYXRlZ3kgdXNlZCBmb3IgY2xhc3MgZGlzY3Jp\nbWluYXRpb24uCiAgICAgKi8KICAgIHB1YmxpYyBEaXNjcmltaW5hdG9yU3Ry\nYXRlZ3kgZ2V0U3RyYXRlZ3koKSB7CiAgICAgICAgcmV0dXJuIF9zdHJhdGVn\neTsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBzdHJhdGVneSB1c2VkIGZv\nciBjbGFzcyBkaXNjcmltaW5hdGlvbi4gVGhlIDxjb2RlPmFkYXB0PC9jb2Rl\nPgogICAgICogcGFyYW1ldGVyIGRldGVybWluZXMgd2hldGhlciB0byBhZGFw\ndCB3aGVuIG1hcHBpbmcgdGhlIHN0cmF0ZWd5OwogICAgICogdXNlIG51bGwg\naWYgdGhlIHN0cmF0ZWd5IHNob3VsZCBub3QgYmUgbWFwcGVkLgogICAgICov\nCiAgICBwdWJsaWMgdm9pZCBzZXRTdHJhdGVneShEaXNjcmltaW5hdG9yU3Ry\nYXRlZ3kgc3RyYXRlZ3ksIEJvb2xlYW4gYWRhcHQpIHsKICAgICAgICAvLyBz\nZXQgc3RyYXRlZ3kgZmlyc3Qgc28gd2UgY2FuIGFjY2VzcyBpdCBkdXJpbmcg\nbWFwcGluZwogICAgICAgIERpc2NyaW1pbmF0b3JTdHJhdGVneSBvcmlnID0g\nX3N0cmF0ZWd5OwogICAgICAgIF9zdHJhdGVneSA9IHN0cmF0ZWd5OwogICAg\nICAgIGlmIChzdHJhdGVneSAhPSBudWxsKSB7CiAgICAgICAgICAgIHRyeSB7\nCiAgICAgICAgICAgICAgICBzdHJhdGVneS5zZXREaXNjcmltaW5hdG9yKHRo\naXMpOwogICAgICAgICAgICAgICAgaWYgKGFkYXB0ICE9IG51bGwpCiAgICAg\nICAgICAgICAgICAgICAgc3RyYXRlZ3kubWFwKGFkYXB0LmJvb2xlYW5WYWx1\nZSgpKTsKICAgICAgICAgICAgfSBjYXRjaCAoUnVudGltZUV4Y2VwdGlvbiBy\nZSkgewogICAgICAgICAgICAgICAgLy8gcmVzZXQgc3RyYXRlZ3kKICAgICAg\nICAgICAgICAgIF9zdHJhdGVneSA9IG9yaWc7CiAgICAgICAgICAgICAgICB0\naHJvdyByZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAv\nKioKICAgICAqIFRoZSBkaXNjcmltaW5hdG9yIHZhbHVlLgogICAgICovCiAg\nICBwdWJsaWMgT2JqZWN0IGdldFZhbHVlKCkgewogICAgICAgIHJldHVybiBf\ndmFsdWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgZGlzY3JpbWluYXRv\nciB2YWx1ZS4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0VmFsdWUoT2Jq\nZWN0IHZhbHVlKSB7CiAgICAgICAgX3ZhbHVlID0gdmFsdWU7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBSYXcgbWFwcGluZyBkYXRhLgogICAgICovCiAgICBw\ndWJsaWMgRGlzY3JpbWluYXRvck1hcHBpbmdJbmZvIGdldE1hcHBpbmdJbmZv\nKCkgewogICAgICAgIHJldHVybiBfaW5mbzsKICAgIH0KCiAgICAvKioKICAg\nICAqIENvbHVtbnMgdXNlZCBieSB0aGlzIERpc2NyaW1pbmF0b3IuCiAgICAg\nKi8KICAgIHB1YmxpYyBDb2x1bW5bXSBnZXRDb2x1bW5zKCkgewogICAgICAg\nIHJldHVybiBfY29sczsKICAgIH0KCiAgICAvKioKICAgICAqIENvbHVtbnMg\ndXNlZCBieSB0aGlzIERpc2NyaW1pbmF0b3IuCiAgICAgKi8KICAgIHB1Ymxp\nYyB2b2lkIHNldENvbHVtbnMoQ29sdW1uW10gY29scykgewogICAgICAgIGlm\nIChjb2xzID09IG51bGwpCiAgICAgICAgICAgIGNvbHMgPSBTY2hlbWFzLkVN\nUFRZX0NPTFVNTlM7CiAgICAgICAgX2NvbHMgPSBjb2xzOwogICAgfQoKICAg\nIC8qKgogICAgICogSS9PIGluZm9ybWF0aW9uIG9uIHRoZSBkaXNjcmltaW5h\ndG9yIGNvbHVtbnMuCiAgICAgKi8KICAgIHB1YmxpYyBDb2x1bW5JTyBnZXRD\nb2x1bW5JTygpIHsKICAgICAgICByZXR1cm4gKF9pbyA9PSBudWxsKSA/IENv\nbHVtbklPLlVOUkVTVFJJQ1RFRCA6IF9pbzsKICAgIH0KCiAgICAvKioKICAg\nICAqIEkvTyBpbmZvcm1hdGlvbiBvbiB0aGUgZGlzY3JpbWluYXRvciBjb2x1\nbW5zLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRDb2x1bW5JTyhDb2x1\nbW5JTyBpbykgewogICAgICAgIF9pbyA9IGlvOwogICAgfQoKICAgIC8qKgog\nICAgICogSW5kZXggb24gdGhlIERpc2NyaW1pbmF0b3IgY29sdW1ucywgb3Ig\nbnVsbCBpZiBub25lLgogICAgICovCiAgICBwdWJsaWMgSW5kZXggZ2V0SW5k\nZXgoKSB7CiAgICAgICAgcmV0dXJuIF9pZHg7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBJbmRleCBvbiB0aGUgRGlzY3JpbWluYXRvciBjb2x1bW5zLCBvciBu\ndWxsIGlmIG5vbmUuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldEluZGV4\nKEluZGV4IGlkeCkgewogICAgICAgIF9pZHggPSBpZHg7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBJbmNyZW1lbnQgdGhlIHJlZmVyZW5jZSBjb3VudCBvZiB1\nc2VkIHNjaGVtYSBjb21wb25lbnRzLgogICAgICovCiAgICBwdWJsaWMgdm9p\nZCByZWZTY2hlbWFDb21wb25lbnRzKCkgewogICAgICAgIGZvciAoaW50IGkg\nPSAwOyBpIDwgX2NvbHMubGVuZ3RoOyBpKyspCiAgICAgICAgICAgIF9jb2xz\nW2ldLnJlZigpOwogICAgfQoKICAgIC8qKgogICAgICogQ2xlYXIgbWFwcGlu\nZyBpbmZvcm1hdGlvbiwgaW5jbHVkaW5nIHN0cmF0ZWd5LgogICAgICovCiAg\nICBwdWJsaWMgdm9pZCBjbGVhck1hcHBpbmcoKSB7CiAgICAgICAgX3N0cmF0\nZWd5ID0gbnVsbDsKICAgICAgICBfY29scyA9IFNjaGVtYXMuRU1QVFlfQ09M\nVU1OUzsKICAgICAgICBfaWR4ID0gbnVsbDsKICAgICAgICBfdmFsdWUgPSBu\ndWxsOwogICAgICAgIF9pbmZvLmNsZWFyKCk7CiAgICAgICAgc2V0UmVzb2x2\nZShNT0RFX01BUFBJTkcgfCBNT0RFX01BUFBJTkdfSU5JVCwgZmFsc2UpOwog\nICAgfQoKICAgIC8qKgogICAgICogVXBkYXRlIHtAbGluayBNYXBwaW5nSW5m\nb30gd2l0aCBvdXIgY3VycmVudCBtYXBwaW5nIGluZm9ybWF0aW9uLgogICAg\nICovCiAgICBwdWJsaWMgdm9pZCBzeW5jTWFwcGluZ0luZm8oKSB7CiAgICAg\nICAgX2luZm8uc3luY1dpdGgodGhpcyk7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBSZXNvbHZlIG1vZGUuCiAgICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0UmVz\nb2x2ZSgpIHsKICAgICAgICByZXR1cm4gX3Jlc01vZGU7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBSZXNvbHZlIG1vZGUuCiAgICAgKi8KICAgIHB1YmxpYyB2\nb2lkIHNldFJlc29sdmUoaW50IG1vZGUpIHsKICAgICAgICBfcmVzTW9kZSA9\nIG1vZGU7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXNvbHZlIG1vZGUuCiAg\nICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFJlc29sdmUoaW50IG1vZGUsIGJv\nb2xlYW4gb24pIHsKICAgICAgICBpZiAobW9kZSA9PSBNT0RFX05PTkUpCiAg\nICAgICAgICAgIF9yZXNNb2RlID0gbW9kZTsKICAgICAgICBlbHNlIGlmIChv\nbikKICAgICAgICAgICAgX3Jlc01vZGUgfD0gbW9kZTsKICAgICAgICBlbHNl\nCiAgICAgICAgICAgIF9yZXNNb2RlICY9IH5tb2RlOwogICAgfQoKICAgIC8q\nKgogICAgICogUmVzb2x2ZSBtYXBwaW5nIGluZm9ybWF0aW9uLgogICAgICov\nCiAgICBwdWJsaWMgYm9vbGVhbiByZXNvbHZlKGludCBtb2RlKSB7CiAgICAg\nICAgaWYgKChfcmVzTW9kZSAmIG1vZGUpID09IG1vZGUpCiAgICAgICAgICAg\nIHJldHVybiB0cnVlOwogICAgICAgIGludCBjdXIgPSBfcmVzTW9kZTsKICAg\nICAgICBfcmVzTW9kZSB8PSBtb2RlOwogICAgICAgIGlmICgobW9kZSAmIE1P\nREVfTUFQUElORykgIT0gMCAmJiAoY3VyICYgTU9ERV9NQVBQSU5HKSA9PSAw\nKQogICAgICAgICAgICByZXNvbHZlTWFwcGluZygpOwogICAgICAgIGlmICgo\nbW9kZSAmIE1PREVfTUFQUElOR19JTklUKSAhPSAwICYmIChjdXIgJiBNT0RF\nX01BUFBJTkdfSU5JVCkgPT0gMCkKICAgICAgICAgICAgX3N0cmF0ZWd5Lmlu\naXRpYWxpemUoKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBTZXR1cCBtYXBwaW5nLgogICAgICovCiAgICBwcml2YXRl\nIHZvaWQgcmVzb2x2ZU1hcHBpbmcoKSB7CiAgICAgICAgLy8gbWFwIHN0cmF0\nZWd5CiAgICAgICAgTWFwcGluZ1JlcG9zaXRvcnkgcmVwb3MgPSBnZXRNYXBw\naW5nUmVwb3NpdG9yeSgpOwogICAgICAgIGlmIChfc3RyYXRlZ3kgPT0gbnVs\nbCkKICAgICAgICAgICAgcmVwb3MuZ2V0U3RyYXRlZ3lJbnN0YWxsZXIoKS5p\nbnN0YWxsU3RyYXRlZ3kodGhpcyk7CiAgICAgICAgTG9nIGxvZyA9IHJlcG9z\nLmdldExvZygpOwogICAgICAgIGlmIChsb2cuaXNUcmFjZUVuYWJsZWQoKSkK\nICAgICAgICAgICAgbG9nLnRyYWNlKF9sb2MuZ2V0KCJzdHJhdGVneSIsIHRo\naXMsIF9zdHJhdGVneS5nZXRBbGlhcygpKSk7CgogICAgICAgIC8vIG1hcmsg\nY29sdW1ucyBhcyBtYXBwZWQKICAgICAgICBDb2x1bW5bXSBjb2xzID0gZ2V0\nQ29sdW1ucygpOwogICAgICAgIENvbHVtbklPIGlvID0gZ2V0Q29sdW1uSU8o\nKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNvbHMubGVuZ3RoOyBp\nKyspIHsKICAgICAgICAgICAgaWYgKGlvLmlzSW5zZXJ0YWJsZShpLCBmYWxz\nZSkpCiAgICAgICAgICAgICAgICBjb2xzW2ldLnNldEZsYWcoQ29sdW1uLkZM\nQUdfRElSRUNUX0lOU0VSVCwgdHJ1ZSk7CiAgICAgICAgICAgIGlmIChpby5p\nc1VwZGF0YWJsZShpLCBmYWxzZSkpCiAgICAgICAgICAgICAgICBjb2xzW2ld\nLnNldEZsYWcoQ29sdW1uLkZMQUdfRElSRUNUX1VQREFURSwgdHJ1ZSk7CiAg\nICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciB0aGlzIERp\nc2NyaW1pbmF0b3IgaGFzIGxvYWRlZCBzdWJjbGFzc2VzIHlldC4KICAgICAq\nLwogICAgcHVibGljIGJvb2xlYW4gZ2V0U3ViY2xhc3Nlc0xvYWRlZCgpIHsK\nICAgICAgICBpZiAoIV9zdWJzTG9hZGVkKSB7CiAgICAgICAgICAgIENsYXNz\nTWFwcGluZyBzdXAgPSBfbWFwcGluZy5nZXRQQ1N1cGVyY2xhc3NNYXBwaW5n\nKCk7CiAgICAgICAgICAgIGlmIChzdXAgIT0gbnVsbCAmJiBzdXAuZ2V0RGlz\nY3JpbWluYXRvcigpLmdldFN1YmNsYXNzZXNMb2FkZWQoKSkKICAgICAgICAg\nICAgICAgIF9zdWJzTG9hZGVkID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAg\ncmV0dXJuIF9zdWJzTG9hZGVkOwogICAgfQoKICAgIC8qKgogICAgICogV2hl\ndGhlciB0aGlzIERpc2NyaW1pbmF0b3IgaGFzIGxvYWRlZCBzdWJjbGFzc2Vz\nIHlldC4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0U3ViY2xhc3Nlc0xv\nYWRlZChib29sZWFuIGxvYWRlZCkgewogICAgICAgIF9zdWJzTG9hZGVkID0g\nbG9hZGVkOwogICAgfQoKICAgIC8qKgogICAgICogQWRkIFdIRVJFIGNvbmRp\ndGlvbnMgdG8gdGhlIGdpdmVuIHNlbGVjdCBsaW1pdGluZyB0aGUgcmV0dXJu\nZWQgcmVzdWx0cwogICAgICogdG8gb3VyIG1hcHBpbmcgdHlwZSwgcG9zc2li\nbHkgaW5jbHVkaW5nIHN1YmNsYXNzZXMuCiAgICAgKi8KICAgIHB1YmxpYyBi\nb29sZWFuIGFkZENsYXNzQ29uZGl0aW9ucyhTZWxlY3Qgc2VsLCBib29sZWFu\nIHN1YnMsIEpvaW5zIGpvaW5zKSB7CiAgICAgICAgaWYgKF9tYXBwaW5nLmdl\ndEpvaW5hYmxlUENTdXBlcmNsYXNzTWFwcGluZygpID09IG51bGwKICAgICAg\nICAgICAgJiYgX21hcHBpbmcuZ2V0Sm9pbmFibGVQQ1N1YmNsYXNzTWFwcGlu\nZ3MoKS5sZW5ndGggPT0gMCkKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwog\nICAgICAgIGlmICghaGFzQ2xhc3NDb25kaXRpb25zKF9tYXBwaW5nLCBzdWJz\nKSkKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoKICAgICAgICAvLyBqb2lu\nIGRvd24gdG8gYmFzZSBjbGFzcyB3aGVyZSBjb25kaXRpb25zIHdpbGwgYmUg\nYWRkZWQKICAgICAgICBDbGFzc01hcHBpbmcgZnJvbSA9IF9tYXBwaW5nOwog\nICAgICAgIENsYXNzTWFwcGluZyBzdXAgPSBfbWFwcGluZy5nZXRKb2luYWJs\nZVBDU3VwZXJjbGFzc01hcHBpbmcoKTsKICAgICAgICBmb3IgKDsgc3VwICE9\nIG51bGw7IGZyb20gPSBzdXAsIHN1cCA9IGZyb20KICAgICAgICAgICAgLmdl\ndEpvaW5hYmxlUENTdXBlcmNsYXNzTWFwcGluZygpKSB7CiAgICAgICAgICAg\nIGlmIChmcm9tLmdldFRhYmxlKCkgIT0gc3VwLmdldFRhYmxlKCkpIHsKICAg\nICAgICAgICAgICAgIGlmIChqb2lucyA9PSBudWxsKQogICAgICAgICAgICAg\nICAgICAgIGpvaW5zID0gc2VsLm5ld0pvaW5zKCk7CiAgICAgICAgICAgICAg\nICBqb2lucyA9IGZyb20uam9pblN1cGVyY2xhc3Moam9pbnMsIGZhbHNlKTsK\nICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgc2VsLndoZXJlKGdl\ndENsYXNzQ29uZGl0aW9ucyhzZWwsIGpvaW5zLCBfbWFwcGluZywgc3Vicyks\nIGpvaW5zKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAvLyBE\naXNjcmltaW5hdG9yU3RyYXRlZ3kgaW1wbGVtZW50YXRpb24KICAgIC8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICBwdWJs\naWMgU3RyaW5nIGdldEFsaWFzKCkgewogICAgICAgIHJldHVybiBhc3NlcnRT\ndHJhdGVneSgpLmdldEFsaWFzKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nbWFwKGJvb2xlYW4gYWRhcHQpIHsKICAgICAgICBhc3NlcnRTdHJhdGVneSgp\nLm1hcChhZGFwdCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgaW5pdGlhbGl6\nZSgpIHsKICAgICAgICBhc3NlcnRTdHJhdGVneSgpLmluaXRpYWxpemUoKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCBpbnNlcnQoT3BlbkpQQVN0YXRlTWFu\nYWdlciBzbSwgSkRCQ1N0b3JlIHN0b3JlLCBSb3dNYW5hZ2VyIHJtKQogICAg\nICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIGFzc2VydFN0cmF0\nZWd5KCkuaW5zZXJ0KHNtLCBzdG9yZSwgcm0pOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHVwZGF0ZShPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBKREJDU3Rv\ncmUgc3RvcmUsIFJvd01hbmFnZXIgcm0pCiAgICAgICAgdGhyb3dzIFNRTEV4\nY2VwdGlvbiB7CiAgICAgICAgYXNzZXJ0U3RyYXRlZ3koKS51cGRhdGUoc20s\nIHN0b3JlLCBybSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgZGVsZXRlKE9w\nZW5KUEFTdGF0ZU1hbmFnZXIgc20sIEpEQkNTdG9yZSBzdG9yZSwgUm93TWFu\nYWdlciBybSkKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAg\nICBhc3NlcnRTdHJhdGVneSgpLmRlbGV0ZShzbSwgc3RvcmUsIHJtKTsKICAg\nIH0KCiAgICBwdWJsaWMgQm9vbGVhbiBpc0N1c3RvbUluc2VydChPcGVuSlBB\nU3RhdGVNYW5hZ2VyIHNtLCBKREJDU3RvcmUgc3RvcmUpIHsKICAgICAgICBy\nZXR1cm4gYXNzZXJ0U3RyYXRlZ3koKS5pc0N1c3RvbUluc2VydChzbSwgc3Rv\ncmUpOwogICAgfQoKICAgIHB1YmxpYyBCb29sZWFuIGlzQ3VzdG9tVXBkYXRl\nKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIEpEQkNTdG9yZSBzdG9yZSkgewog\nICAgICAgIHJldHVybiBhc3NlcnRTdHJhdGVneSgpLmlzQ3VzdG9tVXBkYXRl\nKHNtLCBzdG9yZSk7CiAgICB9CgogICAgcHVibGljIEJvb2xlYW4gaXNDdXN0\nb21EZWxldGUoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgSkRCQ1N0b3JlIHN0\nb3JlKSB7CiAgICAgICAgcmV0dXJuIGFzc2VydFN0cmF0ZWd5KCkuaXNDdXN0\nb21EZWxldGUoc20sIHN0b3JlKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBj\ndXN0b21JbnNlcnQoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgSkRCQ1N0b3Jl\nIHN0b3JlKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAg\nIGFzc2VydFN0cmF0ZWd5KCkuY3VzdG9tSW5zZXJ0KHNtLCBzdG9yZSk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgY3VzdG9tVXBkYXRlKE9wZW5KUEFTdGF0\nZU1hbmFnZXIgc20sIEpEQkNTdG9yZSBzdG9yZSkKICAgICAgICB0aHJvd3Mg\nU1FMRXhjZXB0aW9uIHsKICAgICAgICBhc3NlcnRTdHJhdGVneSgpLmN1c3Rv\nbVVwZGF0ZShzbSwgc3RvcmUpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGN1\nc3RvbURlbGV0ZShPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBKREJDU3RvcmUg\nc3RvcmUpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAg\nYXNzZXJ0U3RyYXRlZ3koKS5jdXN0b21EZWxldGUoc20sIHN0b3JlKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBzZXREaXNjcmltaW5hdG9yKERpc2NyaW1p\nbmF0b3Igb3duZXIpIHsKICAgICAgICBhc3NlcnRTdHJhdGVneSgpLnNldERp\nc2NyaW1pbmF0b3Iob3duZXIpOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFu\nIHNlbGVjdChTZWxlY3Qgc2VsLCBDbGFzc01hcHBpbmcgbWFwcGluZykgewog\nICAgICAgIHJldHVybiBhc3NlcnRTdHJhdGVneSgpLnNlbGVjdChzZWwsIG1h\ncHBpbmcpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGxvYWRTdWJjbGFzc2Vz\nKEpEQkNTdG9yZSBzdG9yZSkKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9u\nLCBDbGFzc05vdEZvdW5kRXhjZXB0aW9uIHsKICAgICAgICBhc3NlcnRTdHJh\ndGVneSgpLmxvYWRTdWJjbGFzc2VzKHN0b3JlKTsKICAgIH0KCiAgICBwdWJs\naWMgQ2xhc3MgZ2V0Q2xhc3MoSkRCQ1N0b3JlIHN0b3JlLCBDbGFzc01hcHBp\nbmcgYmFzZSwgUmVzdWx0IHJlc3VsdCkKICAgICAgICB0aHJvd3MgU1FMRXhj\nZXB0aW9uLCBDbGFzc05vdEZvdW5kRXhjZXB0aW9uIHsKICAgICAgICByZXR1\ncm4gYXNzZXJ0U3RyYXRlZ3koKS5nZXRDbGFzcyhzdG9yZSwgYmFzZSwgcmVz\ndWx0KTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBoYXNDbGFzc0NvbmRp\ndGlvbnMoQ2xhc3NNYXBwaW5nIGJhc2UsIGJvb2xlYW4gc3VicykgewogICAg\nICAgIHJldHVybiBhc3NlcnRTdHJhdGVneSgpLmhhc0NsYXNzQ29uZGl0aW9u\ncyhiYXNlLCBzdWJzKTsKICAgIH0KCiAgICBwdWJsaWMgU1FMQnVmZmVyIGdl\ndENsYXNzQ29uZGl0aW9ucyhTZWxlY3Qgc2VsLCBKb2lucyBqb2lucywgCiAg\nICAgICAgQ2xhc3NNYXBwaW5nIGJhc2UsIGJvb2xlYW4gc3VicykgewogICAg\nICAgIHJldHVybiBhc3NlcnRTdHJhdGVneSgpLmdldENsYXNzQ29uZGl0aW9u\ncyhzZWwsIGpvaW5zLCBiYXNlLCBzdWJzKTsKICAgIH0KCiAgICBwcml2YXRl\nIERpc2NyaW1pbmF0b3JTdHJhdGVneSBhc3NlcnRTdHJhdGVneSgpIHsKICAg\nICAgICBpZiAoX3N0cmF0ZWd5ID09IG51bGwpCiAgICAgICAgICAgIHRocm93\nIG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigpOwogICAgICAgIHJldHVybiBfc3Ry\nYXRlZ3k7CiAgICB9CgogICAgcHVibGljIFN0cmluZyB0b1N0cmluZygpIHsK\nICAgICAgICByZXR1cm4gX21hcHBpbmcgKyAiPGRpc2NyaW1pbmF0b3I+IjsK\nICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgc2V0SmF2YVR5cGUoaW50IGph\ndmFUeXBlKSB7CiAgICAgICAgX2phdmFUeXBlID0gamF2YVR5cGU7CiAgICB9\nCiAgICAKICAgIHB1YmxpYyBpbnQgZ2V0SmF2YVR5cGUoKSB7CiAgICAgICAg\naWYgKF9qYXZhVHlwZSA9PSAtMSkgewogICAgICAgICAgICBDbGFzc01hcHBp\nbmcgc3VwZXJNYXBwaW5nID0gX21hcHBpbmcuZ2V0UENTdXBlcmNsYXNzTWFw\ncGluZygpOwoKICAgICAgICAgICAgaWYgKHN1cGVyTWFwcGluZyAhPSBudWxs\nICYmIAogICAgICAgICAgICAgICAgc3VwZXJNYXBwaW5nLmdldERpc2NyaW1p\nbmF0b3IoKSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBfamF2YVR5cGUg\nPSBzdXBlck1hcHBpbmcuZ2V0RGlzY3JpbWluYXRvcigpLmdldEphdmFUeXBl\nKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiBf\namF2YVR5cGU7CiAgICB9Cn0K\n","encoding":"base64"}

