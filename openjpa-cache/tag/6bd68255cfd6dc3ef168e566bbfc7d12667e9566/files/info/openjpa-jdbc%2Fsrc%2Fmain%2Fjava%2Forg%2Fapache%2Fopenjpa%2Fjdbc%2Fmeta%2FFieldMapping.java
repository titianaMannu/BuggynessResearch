{"sha":"07c4c3ed570e556d799b9f935910152621ac3a59","node_id":"MDQ6QmxvYjIwNjM2NDowN2M0YzNlZDU3MGU1NTZkNzk5YjlmOTM1OTEwMTUyNjIxYWMzYTU5","size":32259,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/07c4c3ed570e556d799b9f935910152621ac3a59","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhOwoKaW1wb3J0\nIGphdmEuc3FsLlNRTEV4Y2VwdGlvbjsKCmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5rZXJuZWwuSkRCQ0ZldGNoQ29uZmlndXJhdGlvbjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmtlcm5lbC5KREJDU3RvcmU7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLnN0cmF0cy5O\nb25lRmllbGRTdHJhdGVneTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5q\nZGJjLnNjaGVtYS5Db2x1bW47CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5zY2hlbWEuQ29sdW1uSU87CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5zY2hlbWEuRm9yZWlnbktleTsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNjaGVtYS5JbmRleDsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNjaGVtYS5UYWJsZTsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNjaGVtYS5VbmlxdWU7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEuamRiYy5zcWwuSm9pbnM7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5zcWwuUmVzdWx0OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmpkYmMuc3FsLlJvdzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5q\nZGJjLnNxbC5Sb3dNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMuc3FsLlNRTEJ1ZmZlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5qZGJjLnNxbC5TZWxlY3Q7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5zcWwuU2VsZWN0RXhlY3V0b3I7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEua2VybmVsLkZldGNoQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5rZXJuZWwuT3BlbkpQQVN0YXRlTWFuYWdlcjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIubG9nLkxvZzsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6ZXI7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEubWV0YS5GaWVsZE1ldGFEYXRhOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuSmF2YVR5cGVzOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLnV0aWwuSW50ZXJuYWxFeGNlcHRpb247CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5NZXRhRGF0YUV4Y2VwdGlvbjsK\nCi8qKgogKiBTcGVjaWFsaXphdGlvbiBvZiBtZXRhZGF0YSBmb3IgcmVsYXRp\nb25hbCBkYXRhYmFzZXMuCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqLwpw\ndWJsaWMgY2xhc3MgRmllbGRNYXBwaW5nCiAgICBleHRlbmRzIEZpZWxkTWV0\nYURhdGEKICAgIGltcGxlbWVudHMgVmFsdWVNYXBwaW5nLCBGaWVsZFN0cmF0\nZWd5IHsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6ZXIgX2xv\nYyA9IExvY2FsaXplci5mb3JQYWNrYWdlCiAgICAgICAgKEZpZWxkTWFwcGlu\nZy5jbGFzcyk7CgogICAgcHJpdmF0ZSBmaW5hbCBWYWx1ZU1hcHBpbmcgX3Zh\nbDsKICAgIHByaXZhdGUgZmluYWwgVmFsdWVNYXBwaW5nIF9rZXk7CiAgICBw\ncml2YXRlIGZpbmFsIFZhbHVlTWFwcGluZyBfZWxlbTsKICAgIHByaXZhdGUg\nZmluYWwgRmllbGRNYXBwaW5nSW5mbyBfaW5mbzsKICAgIHByaXZhdGUgZmlu\nYWwgSkRCQ0NvbHVtbk9yZGVyIF9vcmRlckNvbCA9IG5ldyBKREJDQ29sdW1u\nT3JkZXIoKTsKICAgIHByaXZhdGUgRmllbGRTdHJhdGVneSBfc3RyYXRlZ3kg\nPSBudWxsOwoKICAgIHByaXZhdGUgRm9yZWlnbktleSBfZmsgPSBudWxsOwog\nICAgcHJpdmF0ZSBDb2x1bW5JTyBfaW8gPSBudWxsOwogICAgcHJpdmF0ZSBV\nbmlxdWUgX3VucSA9IG51bGw7CiAgICBwcml2YXRlIEluZGV4IF9pZHggPSBu\ndWxsOwogICAgcHJpdmF0ZSBib29sZWFuIF9vdXRlciA9IGZhbHNlOwogICAg\ncHJpdmF0ZSBpbnQgX2ZldGNoTW9kZSA9IEludGVnZXIuTUFYX1ZBTFVFOwoK\nICAgIC8qKgogICAgICogQ29uc3RydWN0b3IuCiAgICAgKi8KICAgIHB1Ymxp\nYyBGaWVsZE1hcHBpbmcoU3RyaW5nIG5hbWUsIENsYXNzIHR5cGUsIENsYXNz\nTWFwcGluZyBvd25lcikgewogICAgICAgIHN1cGVyKG5hbWUsIHR5cGUsIG93\nbmVyKTsKICAgICAgICBfaW5mbyA9IG93bmVyLmdldE1hcHBpbmdSZXBvc2l0\nb3J5KCkubmV3TWFwcGluZ0luZm8odGhpcyk7CiAgICAgICAgX3ZhbCA9IChW\nYWx1ZU1hcHBpbmcpIGdldFZhbHVlKCk7CiAgICAgICAgX2tleSA9IChWYWx1\nZU1hcHBpbmcpIGdldEtleSgpOwogICAgICAgIF9lbGVtID0gKFZhbHVlTWFw\ncGluZykgZ2V0RWxlbWVudCgpOwoKICAgICAgICBzZXRVc2VzSW50ZXJtZWRp\nYXRlKGZhbHNlKTsKICAgICAgICBzZXRVc2VzSW1wbERhdGEoQm9vbGVhbi5G\nQUxTRSk7CiAgICB9CgogICAgLy8vLy8vLwogICAgLy8gT1JNCiAgICAvLy8v\nLy8vCgogICAgLyoqCiAgICAgKiBSYXcgbWFwcGluZyBkYXRhIGFib3V0IGZp\nZWxkJ3Mgam9pbiB0byBwYXJlbnQgdGFibGUsIGFzIHdlbGwgYXMKICAgICAq\nIG1pc2NlbGxhbmVvdXMgc3BlY2lhbGl6ZWQgY29sdW1ucyBsaWtlIG9yZGVy\nIGNvbHVtbi4KICAgICAqLwogICAgcHVibGljIEZpZWxkTWFwcGluZ0luZm8g\nZ2V0TWFwcGluZ0luZm8oKSB7CiAgICAgICAgcmV0dXJuIF9pbmZvOwogICAg\nfQoKICAgIC8qKgogICAgICogVGhlIHN0cmF0ZWd5IHVzZWQgdG8gbWFwIHRo\naXMgbWFwcGluZy4KICAgICAqLwogICAgcHVibGljIEZpZWxkU3RyYXRlZ3kg\nZ2V0U3RyYXRlZ3koKSB7CiAgICAgICAgcmV0dXJuIF9zdHJhdGVneTsKICAg\nIH0KCiAgICAvKioKICAgICAqIFRoZSBzdHJhdGVneSB1c2VkIHRvIG1hcCB0\naGlzIG1hcHBpbmcuIFRoZSA8Y29kZT5hZGFwdDwvY29kZT4KICAgICAqIHBh\ncmFtZXRlciBkZXRlcm1pbmVzIHdoZXRoZXIgdG8gYWRhcHQgd2hlbiBtYXBw\naW5nIHRoZSBzdHJhdGVneTsKICAgICAqIHVzZSBudWxsIGlmIHRoZSBzdHJh\ndGVneSBzaG91bGQgbm90IGJlIG1hcHBlZC4KICAgICAqLwogICAgcHVibGlj\nIHZvaWQgc2V0U3RyYXRlZ3koRmllbGRTdHJhdGVneSBzdHJhdGVneSwgQm9v\nbGVhbiBhZGFwdCkgewogICAgICAgIC8vIHNldCBzdHJhdGVneSBmaXJzdCBz\nbyB3ZSBjYW4gYWNjZXNzIGl0IGR1cmluZyBtYXBwaW5nCiAgICAgICAgRmll\nbGRTdHJhdGVneSBvcmlnID0gX3N0cmF0ZWd5OwogICAgICAgIF9zdHJhdGVn\neSA9IHN0cmF0ZWd5OwogICAgICAgIGlmIChzdHJhdGVneSAhPSBudWxsKSB7\nCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBzdHJhdGVneS5z\nZXRGaWVsZE1hcHBpbmcodGhpcyk7CiAgICAgICAgICAgICAgICBpZiAoYWRh\ncHQgIT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICBzdHJhdGVneS5tYXAo\nYWRhcHQuYm9vbGVhblZhbHVlKCkpOwogICAgICAgICAgICB9IGNhdGNoIChS\ndW50aW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAgICAgICAgICAvLyByZXNl\ndCBzdHJhdGVneQogICAgICAgICAgICAgICAgX3N0cmF0ZWd5ID0gb3JpZzsK\nICAgICAgICAgICAgICAgIHRocm93IHJlOwogICAgICAgICAgICB9CgogICAg\nICAgICAgICAvLyBpZiBzZXQgdG8gdW5tYXBwZWQsIGNsZWFyIGRlZmluZWQg\nZmllbGQgY2FjaGUgaW4gcGFyZW50CiAgICAgICAgICAgIGlmICghaXNNYXBw\nZWQoKSkKICAgICAgICAgICAgICAgIGdldERlZmluaW5nTWFwcGluZygpLmNs\nZWFyRGVmaW5lZEZpZWxkQ2FjaGUoKTsKICAgICAgICB9CiAgICB9CgogICAg\nLyoqCiAgICAgKiBUaGUgbWFwcGluZydzIHByaW1hcnkgdGFibGUuCiAgICAg\nKi8KICAgIHB1YmxpYyBUYWJsZSBnZXRUYWJsZSgpIHsKICAgICAgICBpZiAo\nX2ZrICE9IG51bGwpCiAgICAgICAgICAgIHJldHVybiBfZmsuZ2V0VGFibGUo\nKTsKICAgICAgICBpZiAoX3ZhbC5nZXRGb3JlaWduS2V5KCkgIT0gbnVsbCkK\nICAgICAgICAgICAgcmV0dXJuIF92YWwuZ2V0Rm9yZWlnbktleSgpLmdldFRh\nYmxlKCk7CiAgICAgICAgcmV0dXJuIGdldERlZmluaW5nTWFwcGluZygpLmdl\ndFRhYmxlKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBJL08gaW5mb3JtYXRp\nb24gb24gdGhlIGpvaW4gY29sdW1ucy4KICAgICAqLwogICAgcHVibGljIENv\nbHVtbklPIGdldEpvaW5Db2x1bW5JTygpIHsKICAgICAgICByZXR1cm4gKF9p\nbyA9PSBudWxsKSA/IENvbHVtbklPLlVOUkVTVFJJQ1RFRCA6IF9pbzsKICAg\nIH0KCiAgICAvKioKICAgICAqIEkvTyBpbmZvcm1hdGlvbiBvbiB0aGUgam9p\nbiBjb2x1bW5zLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRKb2luQ29s\ndW1uSU8oQ29sdW1uSU8gaW8pIHsKICAgICAgICBfaW8gPSBpbzsKICAgIH0K\nCiAgICAvKioKICAgICAqIEZvcmVpZ24ga2V5IGxpbmtpbmcgdGhlIGZpZWxk\nIHRhYmxlIHRvIHRoZSBjbGFzcycgcHJpbWFyeSB0YWJsZS4KICAgICAqLwog\nICAgcHVibGljIEZvcmVpZ25LZXkgZ2V0Sm9pbkZvcmVpZ25LZXkoKSB7CiAg\nICAgICAgcmV0dXJuIF9mazsKICAgIH0KCiAgICAvKioKICAgICAqIEZvcmVp\nZ24ga2V5IGxpbmtpbmcgdGhlIGZpZWxkIHRhYmxlIHRvIHRoZSBjbGFzcycg\ncHJpbWFyeSB0YWJsZS4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0Sm9p\nbkZvcmVpZ25LZXkoRm9yZWlnbktleSBmaykgewogICAgICAgIF9mayA9IGZr\nOwogICAgfQoKICAgIC8qKgogICAgICogVW5pcXVlIGNvbnN0cmFpbnQgb24g\nam9pbiBmb3JlaWduIGtleSBjb2x1bW5zLgogICAgICovCiAgICBwdWJsaWMg\nVW5pcXVlIGdldEpvaW5VbmlxdWUoKSB7CiAgICAgICAgcmV0dXJuIF91bnE7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBVbmlxdWUgY29uc3RyYWludCBvbiBq\nb2luIGZvcmVpZ24ga2V5IGNvbHVtbnMuCiAgICAgKi8KICAgIHB1YmxpYyB2\nb2lkIHNldEpvaW5VbmlxdWUoVW5pcXVlIHVucSkgewogICAgICAgIF91bnEg\nPSB1bnE7CiAgICB9CgogICAgLyoqCiAgICAgKiBJbmRleCBvbiBqb2luIGZv\ncmVpZ24ga2V5IGNvbHVtbnMuCiAgICAgKi8KICAgIHB1YmxpYyBJbmRleCBn\nZXRKb2luSW5kZXgoKSB7CiAgICAgICAgcmV0dXJuIF9pZHg7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBJbmRleCBvbiBqb2luIGZvcmVpZ24ga2V5IGNvbHVt\nbnMuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldEpvaW5JbmRleChJbmRl\neCBpZHgpIHsKICAgICAgICBfaWR4ID0gaWR4OwogICAgfQoKICAgIC8qKgog\nICAgICogV2hldGhlciB0byB1c2UgYW4gb3V0ZXIgam9pbiBmcm9tIHRoZSBj\nbGFzcycgcHJpbWFyeSB0YWJsZS4KICAgICAqLwogICAgcHVibGljIGJvb2xl\nYW4gaXNKb2luT3V0ZXIoKSB7CiAgICAgICAgcmV0dXJuIF9vdXRlcjsKICAg\nIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8gdXNlIGFuIG91dGVyIGpv\naW4gZnJvbSB0aGUgY2xhc3MnIHByaW1hcnkgdGFibGUuCiAgICAgKi8KICAg\nIHB1YmxpYyB2b2lkIHNldEpvaW5PdXRlcihib29sZWFuIG91dGVyKSB7CiAg\nICAgICAgX291dGVyID0gb3V0ZXI7CiAgICB9CgogICAgLyoqCiAgICAgKiBG\naWVsZCBvcmRlciBjb2x1bW4sIGlmIGFueS4KICAgICAqLwogICAgcHVibGlj\nIENvbHVtbiBnZXRPcmRlckNvbHVtbigpIHsKICAgICAgICByZXR1cm4gX29y\nZGVyQ29sLmdldENvbHVtbigpOwogICAgfQoKICAgIC8qKgogICAgICogRmll\nbGQgb3JkZXIgY29sdW1uLCBpZiBhbnkuCiAgICAgKi8KICAgIHB1YmxpYyB2\nb2lkIHNldE9yZGVyQ29sdW1uKENvbHVtbiBvcmRlcikgewogICAgICAgIF9v\ncmRlckNvbC5zZXRDb2x1bW4ob3JkZXIpOwogICAgfQoKICAgIC8qKgogICAg\nICogSS9PIGluZm9ybWF0aW9uIGZvciBvcmRlciBjb2x1bW4uCiAgICAgKi8K\nICAgIHB1YmxpYyBDb2x1bW5JTyBnZXRPcmRlckNvbHVtbklPKCkgewogICAg\nICAgIHJldHVybiBfb3JkZXJDb2wuZ2V0Q29sdW1uSU8oKTsKICAgIH0KCiAg\nICAvKioKICAgICAqIEkvTyBpbmZvcm1hdGlvbiBmb3Igb3JkZXIgY29sdW1u\nLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRPcmRlckNvbHVtbklPKENv\nbHVtbklPIGlvKSB7CiAgICAgICAgX29yZGVyQ29sLnNldENvbHVtbklPKGlv\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIEluY3JlbWVudCB0aGUgcmVmZXJl\nbmNlIGNvdW50IG9mIHVzZWQgc2NoZW1hIGNvbXBvbmVudHMuCiAgICAgKi8K\nICAgIHB1YmxpYyB2b2lkIHJlZlNjaGVtYUNvbXBvbmVudHMoKSB7CiAgICAg\nICAgaWYgKF9mayAhPSBudWxsKSB7CiAgICAgICAgICAgIF9may5yZWYoKTsK\nICAgICAgICAgICAgX2ZrLnJlZkNvbHVtbnMoKTsKICAgICAgICB9CiAgICAg\nICAgaWYgKF9vcmRlckNvbC5nZXRDb2x1bW4oKSAhPSBudWxsKQogICAgICAg\nICAgICBfb3JkZXJDb2wuZ2V0Q29sdW1uKCkucmVmKCk7CiAgICAgICAgX3Zh\nbC5yZWZTY2hlbWFDb21wb25lbnRzKCk7CiAgICAgICAgX2tleS5yZWZTY2hl\nbWFDb21wb25lbnRzKCk7CiAgICAgICAgX2VsZW0ucmVmU2NoZW1hQ29tcG9u\nZW50cygpOwogICAgfQoKICAgIC8qKgogICAgICogQ2xlYXIgbWFwcGluZyBp\nbmZvcm1hdGlvbiwgaW5jbHVkaW5nIHN0cmF0ZWd5LgogICAgICovCiAgICBw\ndWJsaWMgdm9pZCBjbGVhck1hcHBpbmcoKSB7CiAgICAgICAgX3N0cmF0ZWd5\nID0gbnVsbDsKICAgICAgICBfZmsgPSBudWxsOwogICAgICAgIF91bnEgPSBu\ndWxsOwogICAgICAgIF9pZHggPSBudWxsOwogICAgICAgIF9vdXRlciA9IGZh\nbHNlOwogICAgICAgIF9vcmRlckNvbC5zZXRDb2x1bW4obnVsbCk7CiAgICAg\nICAgX3ZhbC5jbGVhck1hcHBpbmcoKTsKICAgICAgICBfa2V5LmNsZWFyTWFw\ncGluZygpOwogICAgICAgIF9lbGVtLmNsZWFyTWFwcGluZygpOwogICAgICAg\nIF9pbmZvLmNsZWFyKCk7CiAgICAgICAgc2V0UmVzb2x2ZShNT0RFX01BUFBJ\nTkcsIGZhbHNlKTsKICAgIH0KCiAgICAvKioKICAgICAqIFVwZGF0ZSB7QGxp\nbmsgTWFwcGluZ0luZm99IHdpdGggb3VyIGN1cnJlbnQgbWFwcGluZyBpbmZv\ncm1hdGlvbi4KICAgICAqLwogICAgcHVibGljIHZvaWQgc3luY01hcHBpbmdJ\nbmZvKCkgewogICAgICAgIGlmIChpc1ZlcnNpb24oKSkgewogICAgICAgICAg\nICAvLyB3ZSByZWx5IG9uIHRoZSBmYWN0IHRoYXQgdGhlIHZlcnNpb24gd2ls\nbCBzZXR1cCBvdXIgbWFwcGluZwogICAgICAgICAgICAvLyBpbmZvIGNvcnJl\nY3RseSB3aGVuIGl0IGlzIHN5bmNlZAogICAgICAgIH0gZWxzZSBpZiAoZ2V0\nTWFwcGVkQnlNYXBwaW5nKCkgIT0gbnVsbCkgewogICAgICAgICAgICBfaW5m\nby5jbGVhcigpOwogICAgICAgICAgICBfdmFsLmdldFZhbHVlSW5mbygpLmNs\nZWFyKCk7CiAgICAgICAgICAgIF9rZXkuZ2V0VmFsdWVJbmZvKCkuY2xlYXIo\nKTsKICAgICAgICAgICAgX2VsZW0uZ2V0VmFsdWVJbmZvKCkuY2xlYXIoKTsK\nCiAgICAgICAgICAgIEZpZWxkTWFwcGluZyBtYXBwZWQgPSBnZXRNYXBwZWRC\neU1hcHBpbmcoKTsKICAgICAgICAgICAgX2luZm8uc3luY1N0cmF0ZWd5KHRo\naXMpOwogICAgICAgICAgICBpZiAoX29yZGVyQ29sLmdldENvbHVtbigpICE9\nIG51bGwKICAgICAgICAgICAgICAgICYmIG1hcHBlZC5nZXRPcmRlckNvbHVt\nbigpID09IG51bGwpCiAgICAgICAgICAgICAgICBfaW5mby5zeW5jT3JkZXJD\nb2x1bW4odGhpcyk7CiAgICAgICAgICAgIF92YWwuZ2V0VmFsdWVJbmZvKCku\nc2V0VXNlQ2xhc3NDcml0ZXJpYQogICAgICAgICAgICAgICAgKF92YWwuZ2V0\nVXNlQ2xhc3NDcml0ZXJpYSgpKTsKICAgICAgICAgICAgX2tleS5nZXRWYWx1\nZUluZm8oKS5zZXRVc2VDbGFzc0NyaXRlcmlhCiAgICAgICAgICAgICAgICAo\nX2tleS5nZXRVc2VDbGFzc0NyaXRlcmlhKCkpOwogICAgICAgICAgICBfZWxl\nbS5nZXRWYWx1ZUluZm8oKS5zZXRVc2VDbGFzc0NyaXRlcmlhCiAgICAgICAg\nICAgICAgICAoX2VsZW0uZ2V0VXNlQ2xhc3NDcml0ZXJpYSgpKTsKICAgICAg\nICB9IGVsc2UgewogICAgICAgICAgICBfaW5mby5zeW5jV2l0aCh0aGlzKTsK\nICAgICAgICAgICAgX3ZhbC5zeW5jTWFwcGluZ0luZm8oKTsKICAgICAgICAg\nICAgX2tleS5zeW5jTWFwcGluZ0luZm8oKTsKICAgICAgICAgICAgX2VsZW0u\nc3luY01hcHBpbmdJbmZvKCk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgog\nICAgICogUmV0dXJucyB0cnVlIGlmIGZpZWxkIGNsYXNzIGRvZXMgbm90IHVz\nZSB0aGUgIm5vbmUiIHN0cmF0ZWd5IChpbmNsdWRpbmcKICAgICAqIGlmIGl0\nIGhhcyBhIG51bGwgc3RyYXRlZ3ksIGFuZCB0aGVyZWZvcmUgaXMgcHJvYmFi\nbHkgaW4gdGhlIHByb2Nlc3Mgb2YKICAgICAqIGJlaW5nIG1hcHBlZCkuCiAg\nICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlzTWFwcGVkKCkgewogICAgICAg\nIHJldHVybiBfc3RyYXRlZ3kgIT0gTm9uZUZpZWxkU3RyYXRlZ3kuZ2V0SW5z\ndGFuY2UoKTsKICAgIH0KCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAg\nICAvLyBNZXRhRGF0YSBpbnRlcmZhY2UKICAgIC8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8KCiAgICAvKioKICAgICAqIFRoZSBlYWdlciBmZXRjaCBtb2RlLCBh\ncyBvbmUgb2YgdGhlIGVhZ2VyIGNvbnN0YW50cyBpbgogICAgICoge0BsaW5r\nIEpEQkNGZXRjaENvbmZpZ3VyYXRpb259LgogICAgICovCiAgICBwdWJsaWMg\naW50IGdldEVhZ2VyRmV0Y2hNb2RlKCkgewogICAgICAgIGlmIChfZmV0Y2hN\nb2RlID09IEludGVnZXIuTUFYX1ZBTFVFKQogICAgICAgICAgICBfZmV0Y2hN\nb2RlID0gRmV0Y2hDb25maWd1cmF0aW9uLkRFRkFVTFQ7CiAgICAgICAgcmV0\ndXJuIF9mZXRjaE1vZGU7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgZWFn\nZXIgZmV0Y2ggbW9kZSwgYXMgb25lIG9mIHRoZSBlYWdlciBjb25zdGFudHMg\naW4KICAgICAqIHtAbGluayBKREJDRmV0Y2hDb25maWd1cmF0aW9ufS4KICAg\nICAqLwogICAgcHVibGljIHZvaWQgc2V0RWFnZXJGZXRjaE1vZGUoaW50IG1v\nZGUpIHsKICAgICAgICBfZmV0Y2hNb2RlID0gbW9kZTsKICAgIH0KCiAgICAv\nKioKICAgICAqIENvbnZlbmllbmNlIG1ldGhvZCB0byBwZXJmb3JtIGNhc3Qg\nZnJvbQogICAgICoge0BsaW5rIEZpZWxkTWV0YURhdGEjZ2V0UmVwb3NpdG9y\neX0KICAgICAqLwogICAgcHVibGljIE1hcHBpbmdSZXBvc2l0b3J5IGdldE1h\ncHBpbmdSZXBvc2l0b3J5KCkgewogICAgICAgIHJldHVybiAoTWFwcGluZ1Jl\ncG9zaXRvcnkpIGdldFJlcG9zaXRvcnkoKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIENvbnZlbmllbmNlIG1ldGhvZCB0byBwZXJmb3JtIGNhc3QgZnJvbQog\nICAgICoge0BsaW5rIEZpZWxkTWV0YURhdGEjZ2V0RGVmaW5pbmdNZXRhRGF0\nYX0KICAgICAqLwogICAgcHVibGljIENsYXNzTWFwcGluZyBnZXREZWZpbmlu\nZ01hcHBpbmcoKSB7CiAgICAgICAgcmV0dXJuIChDbGFzc01hcHBpbmcpIGdl\ndERlZmluaW5nTWV0YURhdGEoKTsKICAgIH0KCiAgICAvKioKICAgICAqIENv\nbnZlbmllbmNlIG1ldGhvZCB0byBwZXJmb3JtIGNhc3QgZnJvbQogICAgICog\ne0BsaW5rIEZpZWxkTWV0YURhdGEjZ2V0RGVjbGFyaW5nTWV0YURhdGF9CiAg\nICAgKi8KICAgIHB1YmxpYyBDbGFzc01hcHBpbmcgZ2V0RGVjbGFyaW5nTWFw\ncGluZygpIHsKICAgICAgICByZXR1cm4gKENsYXNzTWFwcGluZykgZ2V0RGVj\nbGFyaW5nTWV0YURhdGEoKTsKICAgIH0KCiAgICAvKioKICAgICAqIENvbnZl\nbmllbmNlIG1ldGhvZCB0byBwZXJmb3JtIGNhc3QgZnJvbSB7QGxpbmsgRmll\nbGRNZXRhRGF0YSNnZXRLZXl9CiAgICAgKi8KICAgIHB1YmxpYyBWYWx1ZU1h\ncHBpbmcgZ2V0S2V5TWFwcGluZygpIHsKICAgICAgICByZXR1cm4gX2tleTsK\nICAgIH0KCiAgICAvKioKICAgICAqIENvbnZlbmllbmNlIG1ldGhvZCB0byBw\nZXJmb3JtIGNhc3QgZnJvbSB7QGxpbmsgRmllbGRNZXRhRGF0YSNnZXRFbGVt\nZW50fQogICAgICovCiAgICBwdWJsaWMgVmFsdWVNYXBwaW5nIGdldEVsZW1l\nbnRNYXBwaW5nKCkgewogICAgICAgIHJldHVybiBfZWxlbTsKICAgIH0KCiAg\nICAvKioKICAgICAqIENvbnZlbmllbmNlIG1ldGhvZCB0byBwZXJmb3JtIGNh\nc3QgZnJvbSB7QGxpbmsgRmllbGRNZXRhRGF0YSNnZXRWYWx1ZX0KICAgICAq\nLwogICAgcHVibGljIFZhbHVlTWFwcGluZyBnZXRWYWx1ZU1hcHBpbmcoKSB7\nCiAgICAgICAgcmV0dXJuIChWYWx1ZU1hcHBpbmcpIGdldFZhbHVlKCk7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBDb252ZW5pZW5jZSBtZXRob2QgdG8gcGVy\nZm9ybSBjYXN0IGZyb20KICAgICAqIHtAbGluayBGaWVsZE1ldGFEYXRhI2dl\ndE1hcHBlZEJ5TWV0YURhdGF9CiAgICAgKi8KICAgIHB1YmxpYyBGaWVsZE1h\ncHBpbmcgZ2V0TWFwcGVkQnlNYXBwaW5nKCkgewogICAgICAgIHJldHVybiAo\nRmllbGRNYXBwaW5nKSBnZXRNYXBwZWRCeU1ldGFEYXRhKCk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBDb252ZW5pZW5jZSBtZXRob2QgdG8gcGVyZm9ybSBj\nYXN0IGZyb20KICAgICAqIHtAbGluayBGaWVsZE1ldGFEYXRhI2dldEludmVy\nc2VNZXRhRGF0YXN9CiAgICAgKi8KICAgIHB1YmxpYyBGaWVsZE1hcHBpbmdb\nXSBnZXRJbnZlcnNlTWFwcGluZ3MoKSB7CiAgICAgICAgcmV0dXJuIChGaWVs\nZE1hcHBpbmdbXSkgZ2V0SW52ZXJzZU1ldGFEYXRhcygpOwogICAgfQoKICAg\nIHB1YmxpYyBib29sZWFuIHJlc29sdmUoaW50IG1vZGUpIHsKICAgICAgICBp\nbnQgY3VyID0gZ2V0UmVzb2x2ZSgpOwogICAgICAgIGlmIChzdXBlci5yZXNv\nbHZlKG1vZGUpKQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICBp\nZiAoKG1vZGUgJiBNT0RFX01BUFBJTkcpICE9IDAgJiYgKGN1ciAmIE1PREVf\nTUFQUElORykgPT0gMCkKICAgICAgICAgICAgcmVzb2x2ZU1hcHBpbmcoKTsK\nICAgICAgICBpZiAoKG1vZGUgJiBNT0RFX01BUFBJTkdfSU5JVCkgIT0gMCAm\nJiAoY3VyICYgTU9ERV9NQVBQSU5HX0lOSVQpID09IDApCiAgICAgICAgICAg\nIGluaXRpYWxpemVNYXBwaW5nKCk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwog\nICAgfQoKICAgIC8qKgogICAgICogUmVzb2x2ZSB0aGUgbWFwcGluZyBpbmZv\ncm1hdGlvbiBmb3IgdGhpcyBmaWVsZC4KICAgICAqLwogICAgcHJpdmF0ZSB2\nb2lkIHJlc29sdmVNYXBwaW5nKCkgewogICAgICAgIE1hcHBpbmdSZXBvc2l0\nb3J5IHJlcG9zID0gZ2V0TWFwcGluZ1JlcG9zaXRvcnkoKTsKICAgICAgICBp\nZiAocmVwb3MuZ2V0TWFwcGluZ0RlZmF1bHRzKCkuZGVmYXVsdE1pc3NpbmdJ\nbmZvKCkpIHsKICAgICAgICAgICAgLy8gY29weSBlbWJlZGRlZCB0ZW1wbGF0\nZSBtYXBwaW5nIGluZm8KICAgICAgICAgICAgQ2xhc3NNYXBwaW5nIGNscyA9\nIGdldERlZmluaW5nTWFwcGluZygpOwogICAgICAgICAgICBpZiAoY2xzLmdl\ndEVtYmVkZGluZ01hcHBpbmcoKSAhPSBudWxsKSB7CiAgICAgICAgICAgICAg\nICBDbGFzc01hcHBpbmcgb3JpZyA9IHJlcG9zLmdldE1hcHBpbmcoY2xzLmdl\ndERlc2NyaWJlZFR5cGUoKSwKICAgICAgICAgICAgICAgICAgICBjbHMuZ2V0\nRW52Q2xhc3NMb2FkZXIoKSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICBGaWVs\nZE1hcHBpbmcgdG1wbGF0ZSA9IG9yaWcuZ2V0RmllbGRNYXBwaW5nKGdldE5h\nbWUoKSk7CiAgICAgICAgICAgICAgICBpZiAodG1wbGF0ZSAhPSBudWxsKQog\nICAgICAgICAgICAgICAgICAgIGNvcHlNYXBwaW5nSW5mbyh0bXBsYXRlKTsK\nICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBjb3B5IHN1cGVyY2xhc3Mg\nZmllbGQgaW5mbwogICAgICAgICAgICBlbHNlIGlmIChjbHMuaXNNYXBwZWQo\nKSAmJiBjbHMuZ2V0UENTdXBlcmNsYXNzKCkgIT0gbnVsbAogICAgICAgICAg\nICAgICAgJiYgY2xzLmdldERlc2NyaWJlZFR5cGUoKSAhPSBnZXREZWNsYXJp\nbmdUeXBlKCkpIHsKICAgICAgICAgICAgICAgIEZpZWxkTWFwcGluZyBzdXAg\nPSBjbHMuZ2V0UENTdXBlcmNsYXNzTWFwcGluZygpLgogICAgICAgICAgICAg\nICAgICAgIGdldEZpZWxkTWFwcGluZyhnZXROYW1lKCkpOwogICAgICAgICAg\nICAgICAgaWYgKHN1cCAhPSBudWxsKQogICAgICAgICAgICAgICAgICAgIGNv\ncHlNYXBwaW5nSW5mbyhzdXApOwogICAgICAgICAgICB9CiAgICAgICAgfQoK\nICAgICAgICBpZiAoX3N0cmF0ZWd5ID09IG51bGwpIHsKICAgICAgICAgICAg\naWYgKGlzVmVyc2lvbigpKQogICAgICAgICAgICAgICAgX3N0cmF0ZWd5ID0g\nTm9uZUZpZWxkU3RyYXRlZ3kuZ2V0SW5zdGFuY2UoKTsKICAgICAgICAgICAg\nZWxzZQogICAgICAgICAgICAgICAgcmVwb3MuZ2V0U3RyYXRlZ3lJbnN0YWxs\nZXIoKS5pbnN0YWxsU3RyYXRlZ3kodGhpcyk7CiAgICAgICAgfQogICAgICAg\nIExvZyBsb2cgPSBnZXRSZXBvc2l0b3J5KCkuZ2V0TG9nKCk7CiAgICAgICAg\naWYgKGxvZy5pc1RyYWNlRW5hYmxlZCgpKQogICAgICAgICAgICBsb2cudHJh\nY2UoX2xvYy5nZXQoImZpZWxkLXN0cmF0ZWd5IiwgZ2V0TmFtZSgpLAogICAg\nICAgICAgICAgICAgX3N0cmF0ZWd5LmdldEFsaWFzKCkpKTsKCiAgICAgICAg\nLy8gbWFyayBtYXBwZWQgY29sdW1ucwogICAgICAgIGlmIChfb3JkZXJDb2wu\nZ2V0Q29sdW1uKCkgIT0gbnVsbCkgewogICAgICAgICAgICBpZiAoZ2V0T3Jk\nZXJDb2x1bW5JTygpLmlzSW5zZXJ0YWJsZSgwLCBmYWxzZSkpCiAgICAgICAg\nICAgICAgICBfb3JkZXJDb2wuZ2V0Q29sdW1uKCkuc2V0RmxhZyhDb2x1bW4u\nRkxBR19ESVJFQ1RfSU5TRVJULCB0cnVlKTsKICAgICAgICAgICAgaWYgKGdl\ndE9yZGVyQ29sdW1uSU8oKS5pc1VwZGF0YWJsZSgwLCBmYWxzZSkpCiAgICAg\nICAgICAgICAgICBfb3JkZXJDb2wuZ2V0Q29sdW1uKCkuc2V0RmxhZyhDb2x1\nbW4uRkxBR19ESVJFQ1RfVVBEQVRFLCB0cnVlKTsKICAgICAgICB9CiAgICAg\nICAgaWYgKF9mayAhPSBudWxsKSB7CiAgICAgICAgICAgIENvbHVtbltdIGNv\nbHMgPSBfZmsuZ2V0Q29sdW1ucygpOwogICAgICAgICAgICBDb2x1bW5JTyBp\nbyA9IGdldEpvaW5Db2x1bW5JTygpOwogICAgICAgICAgICBmb3IgKGludCBp\nID0gMDsgaSA8IGNvbHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAg\nIGlmIChpby5pc0luc2VydGFibGUoaSwgZmFsc2UpKQogICAgICAgICAgICAg\nICAgICAgIGNvbHNbaV0uc2V0RmxhZyhDb2x1bW4uRkxBR19GS19JTlNFUlQs\nIHRydWUpOwogICAgICAgICAgICAgICAgaWYgKGlvLmlzVXBkYXRhYmxlKGks\nIGZhbHNlKSkKICAgICAgICAgICAgICAgICAgICBjb2xzW2ldLnNldEZsYWco\nQ29sdW1uLkZMQUdfRktfVVBEQVRFLCB0cnVlKTsKICAgICAgICAgICAgfQog\nICAgICAgIH0KCiAgICAgICAgX3ZhbC5yZXNvbHZlKE1PREVfTUFQUElORyk7\nCiAgICAgICAgX2tleS5yZXNvbHZlKE1PREVfTUFQUElORyk7CiAgICAgICAg\nX2VsZW0ucmVzb2x2ZShNT0RFX01BUFBJTkcpOwogICAgfQoKICAgIC8qKgog\nICAgICogQ29weSBtYXBwaW5nIGluZm8gZnJvbSB0aGUgZ2l2ZW4gaW5zdGFu\nY2UgdG8gdGhpcyBvbmUuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIGNvcHlN\nYXBwaW5nSW5mbyhGaWVsZE1hcHBpbmcgZm0pIHsKICAgICAgICBzZXRNYXBw\nZWRCeShmbS5nZXRNYXBwZWRCeSgpKTsKICAgICAgICBfaW5mby5jb3B5KGZt\nLmdldE1hcHBpbmdJbmZvKCkpOwogICAgICAgIF92YWwuY29weU1hcHBpbmdJ\nbmZvKGZtLmdldFZhbHVlTWFwcGluZygpKTsKICAgICAgICBfa2V5LmNvcHlN\nYXBwaW5nSW5mbyhmbS5nZXRLZXlNYXBwaW5nKCkpOwogICAgICAgIF9lbGVt\nLmNvcHlNYXBwaW5nSW5mbyhmbS5nZXRFbGVtZW50TWFwcGluZygpKTsKICAg\nIH0KCiAgICAvKioKICAgICAqIFByZXBhcmUgbWFwcGluZyBmb3IgcnVudGlt\nZSB1c2UuCiAgICAgKi8KICAgIHByaXZhdGUgdm9pZCBpbml0aWFsaXplTWFw\ncGluZygpIHsKICAgICAgICBfdmFsLnJlc29sdmUoTU9ERV9NQVBQSU5HX0lO\nSVQpOwogICAgICAgIF9rZXkucmVzb2x2ZShNT0RFX01BUFBJTkdfSU5JVCk7\nCiAgICAgICAgX3ZhbC5yZXNvbHZlKE1PREVfTUFQUElOR19JTklUKTsKICAg\nICAgICBpZiAoX3N0cmF0ZWd5ICE9IG51bGwpCiAgICAgICAgICAgIF9zdHJh\ndGVneS5pbml0aWFsaXplKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgY29w\neShGaWVsZE1ldGFEYXRhIGZtZCkgewogICAgICAgIHN1cGVyLmNvcHkoZm1k\nKTsKICAgICAgICBpZiAoX2ZldGNoTW9kZSA9PSBJbnRlZ2VyLk1BWF9WQUxV\nRSkKICAgICAgICAgICAgX2ZldGNoTW9kZSA9ICgoRmllbGRNYXBwaW5nKSBm\nbWQpLmdldEVhZ2VyRmV0Y2hNb2RlKCk7CiAgICB9CgogICAgcHJvdGVjdGVk\nIGJvb2xlYW4gdmFsaWRhdGVEYXRhU3RvcmVFeHRlbnNpb25QcmVmaXgoU3Ry\naW5nIHByZWZpeCkgewogICAgICAgIHJldHVybiAiamRiYy0iLmVxdWFscyhw\ncmVmaXgpOwogICAgfQoKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vCiAgICAvLyBGaWVsZFN0cmF0ZWd5IGltcGxlbWVudGF0aW9uCiAg\nICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKICAgIHB1Ymxp\nYyBTdHJpbmcgZ2V0QWxpYXMoKSB7CiAgICAgICAgcmV0dXJuIGFzc2VydFN0\ncmF0ZWd5KCkuZ2V0QWxpYXMoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBt\nYXAoYm9vbGVhbiBhZGFwdCkgewogICAgICAgIGFzc2VydFN0cmF0ZWd5KCku\nbWFwKGFkYXB0KTsKICAgIH0KCiAgICAvKioKICAgICAqIE1hcCB0aGlzIGZp\nZWxkIHRvIGl0cyB0YWJsZSwgb3B0aW9uYWxseSByZXF1aXJpbmcgdGhhdCBp\ndCBiZQogICAgICogaW4gYW5vdGhlciB0YWJsZS4gVXRpbGl0eSBtZXRob2Qg\nZm9yIHVzZSBieSBtYXBwaW5nIHN0cmF0ZWdpZXMuCiAgICAgKi8KICAgIHB1\nYmxpYyB2b2lkIG1hcEpvaW4oYm9vbGVhbiBhZGFwdCwgYm9vbGVhbiBqb2lu\nUmVxdWlyZWQpIHsKICAgICAgICBUYWJsZSB0YWJsZSA9IF9pbmZvLmdldFRh\nYmxlKHRoaXMsIGpvaW5SZXF1aXJlZCwgYWRhcHQpOwogICAgICAgIEZvcmVp\nZ25LZXkgam9pbiA9IG51bGw7CiAgICAgICAgaWYgKHRhYmxlICE9IG51bGwp\nCiAgICAgICAgICAgIGpvaW4gPSBfaW5mby5nZXRKb2luKHRoaXMsIHRhYmxl\nLCBhZGFwdCk7CiAgICAgICAgaWYgKGpvaW4gPT0gbnVsbCAmJiBqb2luUmVx\ndWlyZWQpCiAgICAgICAgICAgIHRocm93IG5ldyBNZXRhRGF0YUV4Y2VwdGlv\nbihfbG9jLmdldCgiam9pbi1yZXF1aXJlZCIsIHRoaXMpKTsKCiAgICAgICAg\naWYgKGpvaW4gPT0gbnVsbCkgewogICAgICAgICAgICBfaW5mby5hc3NlcnRO\nb0pvaW4odGhpcywgdHJ1ZSk7CiAgICAgICAgICAgIF9pbmZvLmFzc2VydE5v\nRm9yZWlnbktleSh0aGlzLCAhYWRhcHQpOwogICAgICAgICAgICBfaW5mby5h\nc3NlcnROb1VuaXF1ZSh0aGlzLCAhYWRhcHQpOwogICAgICAgICAgICBfaW5m\nby5hc3NlcnROb0luZGV4KHRoaXMsICFhZGFwdCk7CiAgICAgICAgfSBlbHNl\nIHsKICAgICAgICAgICAgX2ZrID0gam9pbjsKICAgICAgICAgICAgX2lvID0g\nX2luZm8uZ2V0Q29sdW1uSU8oKTsKICAgICAgICAgICAgX291dGVyID0gX2lu\nZm8uaXNKb2luT3V0ZXIoKTsKICAgICAgICAgICAgX3VucSA9IF9pbmZvLmdl\ndEpvaW5VbmlxdWUodGhpcywgZmFsc2UsIGFkYXB0KTsKICAgICAgICAgICAg\nX2lkeCA9IF9pbmZvLmdldEpvaW5JbmRleCh0aGlzLCBhZGFwdCk7CiAgICAg\nICAgfQogICAgfQoKICAgIC8qKgogICAgICogTWFwcyB0aGUgcHJpbWFyeSBr\nZXkgb24gdGhlIHNlY29uZGFyeSB0YWJsZSBmb3IgdGhpcyBmaWVsZCwgaWYg\ndGhlCiAgICAgKiB1c2VyJ3MgZGVmYXVsdHMgY3JlYXRlIG9uZS4gVGhpcyBt\ndXN0IGJlIGNhbGxlZCBhZnRlcgogICAgICogdGhpcyBmaWVsZCBpcyBtYXBw\nZWQgc28gdGhhdCBpdCdzIHRhYmxlIGhhcyBpdHMgY29sdW1ucyBzZXQuCiAg\nICAgKi8KICAgIHB1YmxpYyB2b2lkIG1hcFByaW1hcnlLZXkoYm9vbGVhbiBh\nZGFwdCkgewogICAgICAgIGlmIChhZGFwdCAmJiBfZmsgIT0gbnVsbCAmJiBf\nZmsuZ2V0VGFibGUoKS5nZXRQcmltYXJ5S2V5KCkgPT0gbnVsbCkKICAgICAg\nICAgICAgZ2V0TWFwcGluZ1JlcG9zaXRvcnkoKS5nZXRNYXBwaW5nRGVmYXVs\ndHMoKS4KICAgICAgICAgICAgICAgIGluc3RhbGxQcmltYXJ5S2V5KHRoaXMs\nIF9may5nZXRUYWJsZSgpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBpbml0\naWFsaXplKCkgewogICAgICAgIGFzc2VydFN0cmF0ZWd5KCkuaW5pdGlhbGl6\nZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGluc2VydChPcGVuSlBBU3Rh\ndGVNYW5hZ2VyIHNtLCBKREJDU3RvcmUgc3RvcmUsIFJvd01hbmFnZXIgcm0p\nCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgYXNzZXJ0\nU3RyYXRlZ3koKS5pbnNlcnQoc20sIHN0b3JlLCBybSk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgdXBkYXRlKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIEpE\nQkNTdG9yZSBzdG9yZSwgUm93TWFuYWdlciBybSkKICAgICAgICB0aHJvd3Mg\nU1FMRXhjZXB0aW9uIHsKICAgICAgICBhc3NlcnRTdHJhdGVneSgpLnVwZGF0\nZShzbSwgc3RvcmUsIHJtKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBkZWxl\ndGUoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgSkRCQ1N0b3JlIHN0b3JlLCBS\nb3dNYW5hZ2VyIHJtKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewog\nICAgICAgIGFzc2VydFN0cmF0ZWd5KCkuZGVsZXRlKHNtLCBzdG9yZSwgcm0p\nOwogICAgfQoKICAgIC8qKgogICAgICogRGVsZXRlIHRoZSByb3cgZm9yIHRo\naXMgb2JqZWN0IGlmIHRoZSByZWZlcmVuY2UgZm9yZWlnbiBrZXkgZXhpc3Rz\nLgogICAgICogVXRpbGl0eSBtZXRob2QgZm9yIHVzZSBieSBtYXBwaW5nIHN0\ncmF0ZWdpZXMuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIGRlbGV0ZVJvdyhP\ncGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBKREJDU3RvcmUgc3RvcmUsCiAgICAg\nICAgUm93TWFuYWdlciBybSkKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9u\nIHsKICAgICAgICBpZiAoX2ZrICE9IG51bGwpIHsKICAgICAgICAgICAgUm93\nIHJvdyA9IHJtLmdldFJvdyhnZXRUYWJsZSgpLCBSb3cuQUNUSU9OX0RFTEVU\nRSwgc20sIHRydWUpOwogICAgICAgICAgICByb3cud2hlcmVGb3JlaWduS2V5\nKF9maywgc20pOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFJl\ndHVybiB0aGUgcm93IHRvIHVzZSBmb3IgdGhpcyBmaWVsZC4gVGhpcyBtZXRo\nb2QgaXMgbWVhbnQgb25seSBmb3IKICAgICAqIHNpbmdsZS12YWx1ZSBmaWVs\nZHMgdGhhdCBtaWdodCByZXNpZGUgaW4gYSB0YWJsZSB0aGF0IGlzIGpvaW5l\nZCB0bwogICAgICogdGhlIHByaW1hcnkgdGFibGUgdGhyb3VnaCB0aGUgam9p\nbiBmb3JlaWduIGtleS4gSXQgaXMgbm90CiAgICAgKiBtZWFudCBmb3IgbXVs\ndGktdmFsdWVkIGZpZWxkcyBsaWtlIGNvbGxlY3Rpb25zIGFuZCBtYXBzLiBU\naGUgbWV0aG9kCiAgICAgKiBjaGVja3Mgd2hldGhlciB3ZSdyZSB1c2luZyBh\nbiBvdXRlciBqb2luIGFuZCBpZiBzbyBpdCBkZWxldGVzIHRoZQogICAgICog\nZmllbGQncyBwcmV2aW91cyB2YWx1ZSwgdGhlbiBpZiB0aGUgZmllbGQgaXMg\nbm9uLW51bGwgcmV0dXJucyBhbiBpbnNlcnQKICAgICAqIHJvdyBmb3IgdGhl\nIG5ldyB2YWx1ZS4gVGhlIGpvaW4gZm9yZWlnbiBrZXkgd2lsbCBhbHJlYWR5\nIGJlIHNldCBvbgogICAgICogdGhlIHJldHVybmVkIHJvdzsgbWFwcGluZyBz\ndHJhdGVnaWVzIGp1c3QgbmVlZCB0byBzZXQgdGhlaXIgb3duIHZhbHVlcy4K\nICAgICAqIFV0aWxpdHkgbWV0aG9kIGZvciB1c2UgYnkgbWFwcGluZyBzdHJh\ndGVnaWVzLgogICAgICovCiAgICBwdWJsaWMgUm93IGdldFJvdyhPcGVuSlBB\nU3RhdGVNYW5hZ2VyIHNtLCBKREJDU3RvcmUgc3RvcmUsIFJvd01hbmFnZXIg\ncm0sCiAgICAgICAgaW50IGFjdGlvbikKICAgICAgICB0aHJvd3MgU1FMRXhj\nZXB0aW9uIHsKICAgICAgICBSb3cgcm93ID0gbnVsbDsKICAgICAgICBib29s\nZWFuIG5ld091dGVyUm93ID0gZmFsc2U7CiAgICAgICAgaWYgKF9mayAhPSBu\ndWxsICYmIF9vdXRlciAmJiBhY3Rpb24gIT0gUm93LkFDVElPTl9ERUxFVEUp\nIHsKICAgICAgICAgICAgLy8gaWYgdXBkYXRpbmcgd2l0aCBvdXRlciBqb2lu\nLCBkZWxldGUgb2xkIHZhbHVlIGZpcnN0LCB0aGVuIGluc2VydDsKICAgICAg\nICAgICAgLy8gd2UgY2FuJ3QganVzdCB1cGRhdGUgYi9jIHRoZSByb3cgbWln\naHQgbm90IGV4aXN0CiAgICAgICAgICAgIGlmIChhY3Rpb24gPT0gUm93LkFD\nVElPTl9VUERBVEUpIHsKICAgICAgICAgICAgICAgIC8vIG1heWJlIHNvbWUg\nb3RoZXIgZmllbGQgYWxyZWFkeSBpcyB1cGRhdGluZz8KICAgICAgICAgICAg\nICAgIHJvdyA9IHJtLmdldFJvdyhnZXRUYWJsZSgpLCBSb3cuQUNUSU9OX1VQ\nREFURSwgc20sIGZhbHNlKTsKICAgICAgICAgICAgICAgIGlmIChyb3cgPT0g\nbnVsbCkgewogICAgICAgICAgICAgICAgICAgIFJvdyBkZWwgPSBybS5nZXRS\nb3coZ2V0VGFibGUoKSwgUm93LkFDVElPTl9ERUxFVEUsIHNtLAogICAgICAg\nICAgICAgICAgICAgICAgICB0cnVlKTsKICAgICAgICAgICAgICAgICAgICBk\nZWwud2hlcmVGb3JlaWduS2V5KF9maywgc20pOwogICAgICAgICAgICAgICAg\nfQogICAgICAgICAgICB9IGVsc2UKICAgICAgICAgICAgICAgIHJvdyA9IHJt\nLmdldFJvdyhnZXRUYWJsZSgpLCBSb3cuQUNUSU9OX0lOU0VSVCwgc20sIGZh\nbHNlKTsKCiAgICAgICAgICAgIC8vIG9ubHkgdXBkYXRlL2luc2VydCBpZiB0\naGUgcm93IGV4aXN0cyBhbHJlYWR5IG9yIHRoZSB2YWx1ZSBpcwogICAgICAg\nICAgICAvLyBub3QgbnVsbC9kZWZhdWx0CiAgICAgICAgICAgIGlmIChyb3cg\nPT0gbnVsbCAmJiAhaXNOdWxsVmFsdWUoc20pKSB7CiAgICAgICAgICAgICAg\nICByb3cgPSBybS5nZXRSb3coZ2V0VGFibGUoKSwgUm93LkFDVElPTl9JTlNF\nUlQsIHNtLCB0cnVlKTsKICAgICAgICAgICAgICAgIG5ld091dGVyUm93ID0g\ndHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZQogICAgICAgICAg\nICByb3cgPSBybS5nZXRSb3coZ2V0VGFibGUoKSwgYWN0aW9uLCBzbSwgdHJ1\nZSk7CgogICAgICAgIC8vIHNldHVwIGZrCiAgICAgICAgaWYgKHJvdyAhPSBu\ndWxsICYmIF9mayAhPSBudWxsKSB7CiAgICAgICAgICAgIGlmIChyb3cuZ2V0\nQWN0aW9uKCkgPT0gUm93LkFDVElPTl9JTlNFUlQpCiAgICAgICAgICAgICAg\nICByb3cuc2V0Rm9yZWlnbktleShfZmssIF9pbywgc20pOwogICAgICAgICAg\nICBlbHNlCiAgICAgICAgICAgICAgICByb3cud2hlcmVGb3JlaWduS2V5KF9m\naywgc20pOwoKICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyBhIG5ldyBvdXRl\nciBqb2luZWQgcm93LCBtYXJrIGl0IGludmFsaWQgdW50aWwKICAgICAgICAg\nICAgLy8gc29tZSBtYXBwaW5nIGFjdHVhbGx5IHNldHMgaW5mb3JtYXRpb24g\nb24gaXQKICAgICAgICAgICAgaWYgKG5ld091dGVyUm93KQogICAgICAgICAg\nICAgICAgcm93LnNldFZhbGlkKGZhbHNlKTsKICAgICAgICB9CiAgICAgICAg\ncmV0dXJuIHJvdzsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0cnVl\nIGlmIHRoaXMgZmllbGQgaXMgbnVsbC9kZWZhdWx0IGluIHRoZSBnaXZlbiBp\nbnN0YW5jZS4KICAgICAqLwogICAgcHJpdmF0ZSBib29sZWFuIGlzTnVsbFZh\nbHVlKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20pIHsKICAgICAgICBzd2l0Y2gg\nKGdldFR5cGVDb2RlKCkpIHsKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMu\nQk9PTEVBTjoKICAgICAgICAgICAgICAgIHJldHVybiAhc20uZmV0Y2hCb29s\nZWFuKGdldEluZGV4KCkpOwogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5C\nWVRFOgogICAgICAgICAgICAgICAgcmV0dXJuIHNtLmZldGNoQnl0ZShnZXRJ\nbmRleCgpKSA9PSAwOwogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5DSEFS\nOgogICAgICAgICAgICAgICAgcmV0dXJuIHNtLmZldGNoQ2hhcihnZXRJbmRl\neCgpKSA9PSAwOwogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5ET1VCTEU6\nCiAgICAgICAgICAgICAgICByZXR1cm4gc20uZmV0Y2hEb3VibGUoZ2V0SW5k\nZXgoKSkgPT0gMDsKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuRkxPQVQ6\nCiAgICAgICAgICAgICAgICByZXR1cm4gc20uZmV0Y2hGbG9hdChnZXRJbmRl\neCgpKSA9PSAwOwogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5JTlQ6CiAg\nICAgICAgICAgICAgICByZXR1cm4gc20uZmV0Y2hJbnQoZ2V0SW5kZXgoKSkg\nPT0gMDsKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuTE9ORzoKICAgICAg\nICAgICAgICAgIHJldHVybiBzbS5mZXRjaExvbmcoZ2V0SW5kZXgoKSkgPT0g\nMDsKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuU0hPUlQ6CiAgICAgICAg\nICAgICAgICByZXR1cm4gc20uZmV0Y2hTaG9ydChnZXRJbmRleCgpKSA9PSAw\nOwogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5TVFJJTkc6CiAgICAgICAg\nICAgICAgICByZXR1cm4gc20uZmV0Y2hTdHJpbmcoZ2V0SW5kZXgoKSkgPT0g\nbnVsbDsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIHJl\ndHVybiBzbS5mZXRjaE9iamVjdChnZXRJbmRleCgpKSA9PSBudWxsOwogICAg\nICAgIH0KICAgIH0KCiAgICBwdWJsaWMgQm9vbGVhbiBpc0N1c3RvbUluc2Vy\ndChPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBKREJDU3RvcmUgc3RvcmUpIHsK\nICAgICAgICByZXR1cm4gYXNzZXJ0U3RyYXRlZ3koKS5pc0N1c3RvbUluc2Vy\ndChzbSwgc3RvcmUpOwogICAgfQoKICAgIHB1YmxpYyBCb29sZWFuIGlzQ3Vz\ndG9tVXBkYXRlKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIEpEQkNTdG9yZSBz\ndG9yZSkgewogICAgICAgIHJldHVybiBhc3NlcnRTdHJhdGVneSgpLmlzQ3Vz\ndG9tVXBkYXRlKHNtLCBzdG9yZSk7CiAgICB9CgogICAgcHVibGljIEJvb2xl\nYW4gaXNDdXN0b21EZWxldGUoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgSkRC\nQ1N0b3JlIHN0b3JlKSB7CiAgICAgICAgcmV0dXJuIGFzc2VydFN0cmF0ZWd5\nKCkuaXNDdXN0b21EZWxldGUoc20sIHN0b3JlKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBjdXN0b21JbnNlcnQoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwg\nSkRCQ1N0b3JlIHN0b3JlKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24g\newogICAgICAgIGFzc2VydFN0cmF0ZWd5KCkuY3VzdG9tSW5zZXJ0KHNtLCBz\ndG9yZSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgY3VzdG9tVXBkYXRlKE9w\nZW5KUEFTdGF0ZU1hbmFnZXIgc20sIEpEQkNTdG9yZSBzdG9yZSkKICAgICAg\nICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBhc3NlcnRTdHJhdGVn\neSgpLmN1c3RvbVVwZGF0ZShzbSwgc3RvcmUpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIGN1c3RvbURlbGV0ZShPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBK\nREJDU3RvcmUgc3RvcmUpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7\nCiAgICAgICAgYXNzZXJ0U3RyYXRlZ3koKS5jdXN0b21EZWxldGUoc20sIHN0\nb3JlKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRGaWVsZE1hcHBpbmco\nRmllbGRNYXBwaW5nIG93bmVyKSB7CiAgICAgICAgYXNzZXJ0U3RyYXRlZ3ko\nKS5zZXRGaWVsZE1hcHBpbmcob3duZXIpOwogICAgfQoKICAgIHB1YmxpYyBp\nbnQgc3VwcG9ydHNTZWxlY3QoU2VsZWN0IHNlbCwgaW50IHR5cGUsIE9wZW5K\nUEFTdGF0ZU1hbmFnZXIgc20sCiAgICAgICAgSkRCQ1N0b3JlIHN0b3JlLCBK\nREJDRmV0Y2hDb25maWd1cmF0aW9uIGZldGNoKSB7CiAgICAgICAgcmV0dXJu\nIGFzc2VydFN0cmF0ZWd5KCkuc3VwcG9ydHNTZWxlY3Qoc2VsLCB0eXBlLCBz\nbSwgc3RvcmUsIGZldGNoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZWxl\nY3RFYWdlclBhcmFsbGVsKFNlbGVjdEV4ZWN1dG9yIHNlbCwgT3BlbkpQQVN0\nYXRlTWFuYWdlciBzbSwKICAgICAgICBKREJDU3RvcmUgc3RvcmUsIEpEQkNG\nZXRjaENvbmZpZ3VyYXRpb24gZmV0Y2gsIGludCBlYWdlck1vZGUpIHsKICAg\nICAgICBhc3NlcnRTdHJhdGVneSgpLnNlbGVjdEVhZ2VyUGFyYWxsZWwoc2Vs\nLCBzbSwgc3RvcmUsIGZldGNoLCBlYWdlck1vZGUpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHNlbGVjdEVhZ2VySm9pbihTZWxlY3Qgc2VsLCBPcGVuSlBB\nU3RhdGVNYW5hZ2VyIHNtLAogICAgICAgIEpEQkNTdG9yZSBzdG9yZSwgSkRC\nQ0ZldGNoQ29uZmlndXJhdGlvbiBmZXRjaCwgaW50IGVhZ2VyTW9kZSkgewog\nICAgICAgIGFzc2VydFN0cmF0ZWd5KCkuc2VsZWN0RWFnZXJKb2luKHNlbCwg\nc20sIHN0b3JlLCBmZXRjaCwgZWFnZXJNb2RlKTsKICAgIH0KCiAgICBwdWJs\naWMgYm9vbGVhbiBpc0VhZ2VyU2VsZWN0VG9NYW55KCkgewogICAgICAgIHJl\ndHVybiBhc3NlcnRTdHJhdGVneSgpLmlzRWFnZXJTZWxlY3RUb01hbnkoKTsK\nICAgIH0KCiAgICBwdWJsaWMgaW50IHNlbGVjdChTZWxlY3Qgc2VsLCBPcGVu\nSlBBU3RhdGVNYW5hZ2VyIHNtLCBKREJDU3RvcmUgc3RvcmUsCiAgICAgICAg\nSkRCQ0ZldGNoQ29uZmlndXJhdGlvbiBmZXRjaCwgaW50IGVhZ2VyTW9kZSkg\newogICAgICAgIHJldHVybiBhc3NlcnRTdHJhdGVneSgpLnNlbGVjdChzZWws\nIHNtLCBzdG9yZSwgZmV0Y2gsIGVhZ2VyTW9kZSk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBSZXR1cm4gYW55IGpvaW5zIG5lZWRlZCB0byBnZXQgZnJvbSB0\naGUgcHJpbWFyeSB0YWJsZSB0byB0aGlzIHRhYmxlLgogICAgICovCiAgICBw\ndWJsaWMgSm9pbnMgam9pbihTZWxlY3Qgc2VsKSB7CiAgICAgICAgaWYgKF9m\nayA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKCiAgICAgICAg\nSm9pbnMgam9pbnMgPSBzZWwubmV3Sm9pbnMoKTsKICAgICAgICBpZiAoX291\ndGVyKQogICAgICAgICAgICByZXR1cm4gam9pbnMub3V0ZXJKb2luKF9maywg\ndHJ1ZSwgZmFsc2UpOwogICAgICAgIHJldHVybiBqb2lucy5qb2luKF9maywg\ndHJ1ZSwgZmFsc2UpOwogICAgfQoKICAgIC8qKgogICAgICogQWRkIGEgPGNv\nZGU+d2hlcmVQcmltYXJ5S2V5PC9jb2RlPiBvciA8Y29kZT53aGVyZUZvcmVp\nZ25LZXk8L2NvZGU+CiAgICAgKiBjb25kaXRpb24gdG8gdGhlIGdpdmVuIHNl\nbGVjdCwgZGVwZW5kaW5nIG9uIHdoZXRoZXIgd2UgaGF2ZSBhIGpvaW4KICAg\nICAqIGZvcmVpZ24ga2V5LgogICAgICovCiAgICBwdWJsaWMgdm9pZCB3aGVy\nZVByaW1hcnlLZXkoU2VsZWN0IHNlbCwgT3BlbkpQQVN0YXRlTWFuYWdlciBz\nbSwKICAgICAgICBKREJDU3RvcmUgc3RvcmUpIHsKICAgICAgICBpZiAoX2Zr\nICE9IG51bGwpCiAgICAgICAgICAgIHNlbC53aGVyZUZvcmVpZ25LZXkoX2Zr\nLCBzbS5nZXRPYmplY3RJZCgpLCBnZXREZWZpbmluZ01hcHBpbmcoKSwKICAg\nICAgICAgICAgICAgIHN0b3JlKTsKICAgICAgICBlbHNlCiAgICAgICAgICAg\nIHNlbC53aGVyZVByaW1hcnlLZXkoc20uZ2V0T2JqZWN0SWQoKSwgZ2V0RGVm\naW5pbmdNYXBwaW5nKCksCiAgICAgICAgICAgICAgICBzdG9yZSk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBBZGQgb3JkZXJpbmcgdG8gdGhlIGdpdmVuIHNl\nbGVjdCBmb3IgYWxsIG5vbi1yZWxhdGlvbiBvcmRlciB2YWx1ZXMsCiAgICAg\nKiBpbmNsdWRpbmcgdGhlIHN5bnRoZXRpYyBvcmRlciBjb2x1bW4sIGlmIGFu\neS4KICAgICAqCiAgICAgKiBAcGFyYW0gZWxlbSB0aGUgcmVsYXRlZCB0eXBl\nIHdlJ3JlIGZldGNoaW5nLCBvciBudWxsCiAgICAgKiBAcGFyYW0gam9pbnMg\ndGhlIGpvaW5zIHRvIHRoaXMgZmllbGQncyB0YWJsZQogICAgICovCiAgICBw\ndWJsaWMgdm9pZCBvcmRlckxvY2FsKFNlbGVjdCBzZWwsIENsYXNzTWFwcGlu\nZyBlbGVtLCBKb2lucyBqb2lucykgewogICAgICAgIF9vcmRlckNvbC5vcmRl\ncihzZWwsIGVsZW0sIGpvaW5zKTsKICAgICAgICBKREJDT3JkZXJbXSBvcmRl\ncnMgPSAoSkRCQ09yZGVyW10pIGdldE9yZGVycygpOwogICAgICAgIGZvciAo\naW50IGkgPSAwOyBpIDwgb3JkZXJzLmxlbmd0aDsgaSsrKQogICAgICAgICAg\nICBpZiAoIW9yZGVyc1tpXS5pc0luUmVsYXRpb24oKSkKICAgICAgICAgICAg\nICAgIG9yZGVyc1tpXS5vcmRlcihzZWwsIGVsZW0sIGpvaW5zKTsKICAgIH0K\nCiAgICAvKioKICAgICAqIEFkZCBvcmRlcmluZyB0byB0aGUgZ2l2ZW4gc2Vs\nZWN0IGZvciBhbGwgcmVsYXRpb24tYmFzZWQgdmFsdWVzLgogICAgICoKICAg\nICAqIEBwYXJhbSBlbGVtIHRoZSByZWxhdGVkIHR5cGUgd2UncmUgZmV0Y2hp\nbmcKICAgICAqIEBwYXJhbSBqb2lucyB0aGUgam9pbnMgYWNyb3NzIHRoZSBy\nZWxhdGlvbgogICAgICovCiAgICBwdWJsaWMgdm9pZCBvcmRlclJlbGF0aW9u\nKFNlbGVjdCBzZWwsIENsYXNzTWFwcGluZyBlbGVtLCBKb2lucyBqb2lucykg\newogICAgICAgIEpEQkNPcmRlcltdIG9yZGVycyA9IChKREJDT3JkZXJbXSkg\nZ2V0T3JkZXJzKCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBvcmRl\ncnMubGVuZ3RoOyBpKyspCiAgICAgICAgICAgIGlmIChvcmRlcnNbaV0uaXNJ\nblJlbGF0aW9uKCkpCiAgICAgICAgICAgICAgICBvcmRlcnNbaV0ub3JkZXIo\nc2VsLCBlbGVtLCBqb2lucyk7CiAgICB9CgogICAgcHVibGljIE9iamVjdCBs\nb2FkRWFnZXJQYXJhbGxlbChPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBKREJD\nU3RvcmUgc3RvcmUsCiAgICAgICAgSkRCQ0ZldGNoQ29uZmlndXJhdGlvbiBm\nZXRjaCwgT2JqZWN0IHJlcykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9u\nIHsKICAgICAgICByZXR1cm4gYXNzZXJ0U3RyYXRlZ3koKS5sb2FkRWFnZXJQ\nYXJhbGxlbChzbSwgc3RvcmUsIGZldGNoLCByZXMpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIGxvYWRFYWdlckpvaW4oT3BlbkpQQVN0YXRlTWFuYWdlciBz\nbSwgSkRCQ1N0b3JlIHN0b3JlLAogICAgICAgIEpEQkNGZXRjaENvbmZpZ3Vy\nYXRpb24gZmV0Y2gsIFJlc3VsdCByZXMpCiAgICAgICAgdGhyb3dzIFNRTEV4\nY2VwdGlvbiB7CiAgICAgICAgYXNzZXJ0U3RyYXRlZ3koKS5sb2FkRWFnZXJK\nb2luKHNtLCBzdG9yZSwgZmV0Y2gsIHJlcyk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgbG9hZChPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBKREJDU3RvcmUg\nc3RvcmUsCiAgICAgICAgSkRCQ0ZldGNoQ29uZmlndXJhdGlvbiBmZXRjaCwg\nUmVzdWx0IHJlcykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAg\nICAgICBhc3NlcnRTdHJhdGVneSgpLmxvYWQoc20sIHN0b3JlLCBmZXRjaCwg\ncmVzKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBsb2FkKE9wZW5KUEFTdGF0\nZU1hbmFnZXIgc20sIEpEQkNTdG9yZSBzdG9yZSwKICAgICAgICBKREJDRmV0\nY2hDb25maWd1cmF0aW9uIGZldGNoKQogICAgICAgIHRocm93cyBTUUxFeGNl\ncHRpb24gewogICAgICAgIGFzc2VydFN0cmF0ZWd5KCkubG9hZChzbSwgc3Rv\ncmUsIGZldGNoKTsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IHRvRGF0YVN0\nb3JlVmFsdWUoT2JqZWN0IHZhbCwgSkRCQ1N0b3JlIHN0b3JlKSB7CiAgICAg\nICAgcmV0dXJuIGFzc2VydFN0cmF0ZWd5KCkudG9EYXRhU3RvcmVWYWx1ZSh2\nYWwsIHN0b3JlKTsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IHRvS2V5RGF0\nYVN0b3JlVmFsdWUoT2JqZWN0IHZhbCwgSkRCQ1N0b3JlIHN0b3JlKSB7CiAg\nICAgICAgcmV0dXJuIGFzc2VydFN0cmF0ZWd5KCkudG9LZXlEYXRhU3RvcmVW\nYWx1ZSh2YWwsIHN0b3JlKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBhcHBl\nbmRJc0VtcHR5KFNRTEJ1ZmZlciBzcWwsIFNlbGVjdCBzZWwsIEpvaW5zIGpv\naW5zKSB7CiAgICAgICAgYXNzZXJ0U3RyYXRlZ3koKS5hcHBlbmRJc0VtcHR5\nKHNxbCwgc2VsLCBqb2lucyk7CiAgICB9CgogICAgcHVibGljIHZvaWQgYXBw\nZW5kSXNOb3RFbXB0eShTUUxCdWZmZXIgc3FsLCBTZWxlY3Qgc2VsLCBKb2lu\ncyBqb2lucykgewogICAgICAgIGFzc2VydFN0cmF0ZWd5KCkuYXBwZW5kSXNO\nb3RFbXB0eShzcWwsIHNlbCwgam9pbnMpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIGFwcGVuZElzTnVsbChTUUxCdWZmZXIgc3FsLCBTZWxlY3Qgc2VsLCBK\nb2lucyBqb2lucykgewogICAgICAgIGFzc2VydFN0cmF0ZWd5KCkuYXBwZW5k\nSXNOdWxsKHNxbCwgc2VsLCBqb2lucyk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgYXBwZW5kSXNOb3ROdWxsKFNRTEJ1ZmZlciBzcWwsIFNlbGVjdCBzZWws\nIEpvaW5zIGpvaW5zKSB7CiAgICAgICAgYXNzZXJ0U3RyYXRlZ3koKS5hcHBl\nbmRJc05vdE51bGwoc3FsLCBzZWwsIGpvaW5zKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBhcHBlbmRTaXplKFNRTEJ1ZmZlciBzcWwsIFNlbGVjdCBzZWws\nIEpvaW5zIGpvaW5zKSB7CiAgICAgICAgYXNzZXJ0U3RyYXRlZ3koKS5hcHBl\nbmRTaXplKHNxbCwgc2VsLCBqb2lucyk7CiAgICB9CgogICAgcHVibGljIEpv\naW5zIGpvaW4oSm9pbnMgam9pbnMsIGJvb2xlYW4gZm9yY2VPdXRlcikgewog\nICAgICAgIHJldHVybiBhc3NlcnRTdHJhdGVneSgpLmpvaW4oam9pbnMsIGZv\ncmNlT3V0ZXIpOwogICAgfQoKICAgIHB1YmxpYyBKb2lucyBqb2luS2V5KEpv\naW5zIGpvaW5zLCBib29sZWFuIGZvcmNlT3V0ZXIpIHsKICAgICAgICByZXR1\ncm4gYXNzZXJ0U3RyYXRlZ3koKS5qb2luS2V5KGpvaW5zLCBmb3JjZU91dGVy\nKTsKICAgIH0KCiAgICBwdWJsaWMgSm9pbnMgam9pblJlbGF0aW9uKEpvaW5z\nIGpvaW5zLCBib29sZWFuIGZvcmNlT3V0ZXIsCiAgICAgICAgYm9vbGVhbiB0\ncmF2ZXJzZSkgewogICAgICAgIHJldHVybiBhc3NlcnRTdHJhdGVneSgpLmpv\naW5SZWxhdGlvbihqb2lucywgZm9yY2VPdXRlciwgdHJhdmVyc2UpOwogICAg\nfQoKICAgIHB1YmxpYyBKb2lucyBqb2luS2V5UmVsYXRpb24oSm9pbnMgam9p\nbnMsIGJvb2xlYW4gZm9yY2VPdXRlciwKICAgICAgICBib29sZWFuIHRyYXZl\ncnNlKSB7CiAgICAgICAgcmV0dXJuIGFzc2VydFN0cmF0ZWd5KCkuam9pbktl\neVJlbGF0aW9uKGpvaW5zLCBmb3JjZU91dGVyLCB0cmF2ZXJzZSk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBKb2lucyBmcm9tIHRoZSBvd25pbmcgY2xhc3Mn\nIHRhYmxlIHRvIHRoZSB0YWJsZSB3aGVyZSB0aGlzIGZpZWxkIGxpZXMKICAg\nICAqIHVzaW5nIHRoZSBqb2luIGZvcmVpZ24ga2V5LiBVdGlsaXR5IG1ldGhv\nZCBmb3IgdXNlIGJ5IG1hcHBpbmcgc3RyYXRlZ2llcy4KICAgICAqLwogICAg\ncHVibGljIEpvaW5zIGpvaW4oSm9pbnMgam9pbnMsIGJvb2xlYW4gZm9yY2VP\ndXRlciwgYm9vbGVhbiB0b01hbnkpIHsKICAgICAgICBpZiAoX2ZrID09IG51\nbGwpCiAgICAgICAgICAgIHJldHVybiBqb2luczsKICAgICAgICBpZiAoX291\ndGVyIHx8IGZvcmNlT3V0ZXIpCiAgICAgICAgICAgIHJldHVybiBqb2lucy5v\ndXRlckpvaW4oX2ZrLCB0cnVlLCB0b01hbnkpOwogICAgICAgIHJldHVybiBq\nb2lucy5qb2luKF9maywgdHJ1ZSwgdG9NYW55KTsKICAgIH0KCiAgICBwdWJs\naWMgT2JqZWN0IGxvYWRQcm9qZWN0aW9uKEpEQkNTdG9yZSBzdG9yZSwgSkRC\nQ0ZldGNoQ29uZmlndXJhdGlvbiBmZXRjaCwKICAgICAgICBSZXN1bHQgcmVz\nLCBKb2lucyBqb2lucykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsK\nICAgICAgICByZXR1cm4gYXNzZXJ0U3RyYXRlZ3koKS5sb2FkUHJvamVjdGlv\nbihzdG9yZSwgZmV0Y2gsIHJlcywgam9pbnMpOwogICAgfQoKICAgIHB1Ymxp\nYyBPYmplY3QgbG9hZEtleVByb2plY3Rpb24oSkRCQ1N0b3JlIHN0b3JlLAog\nICAgICAgIEpEQkNGZXRjaENvbmZpZ3VyYXRpb24gZmV0Y2gsIFJlc3VsdCBy\nZXMsIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24g\newogICAgICAgIHJldHVybiBhc3NlcnRTdHJhdGVneSgpCiAgICAgICAgICAg\nIC5sb2FkS2V5UHJvamVjdGlvbihzdG9yZSwgZmV0Y2gsIHJlcywgam9pbnMp\nOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGlzVmVyc2lvbmFibGUoKSB7\nCiAgICAgICAgcmV0dXJuIGFzc2VydFN0cmF0ZWd5KCkuaXNWZXJzaW9uYWJs\nZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHdoZXJlKE9wZW5KUEFTdGF0\nZU1hbmFnZXIgc20sIEpEQkNTdG9yZSBzdG9yZSwgUm93TWFuYWdlciBybSwK\nICAgICAgICBPYmplY3QgcHJldlZhbHVlKQogICAgICAgIHRocm93cyBTUUxF\neGNlcHRpb24gewogICAgICAgIGFzc2VydFN0cmF0ZWd5KCkud2hlcmUoc20s\nIHN0b3JlLCBybSwgcHJldlZhbHVlKTsKICAgIH0KCiAgICBwcml2YXRlIEZp\nZWxkU3RyYXRlZ3kgYXNzZXJ0U3RyYXRlZ3koKSB7CiAgICAgICAgaWYgKF9z\ndHJhdGVneSA9PSBudWxsKQogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJu\nYWxFeGNlcHRpb24oKTsKICAgICAgICByZXR1cm4gX3N0cmF0ZWd5OwogICAg\nfQoKICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIC8v\nIFZhbHVlTWFwcGluZyBpbXBsZW1lbnRhdGlvbgogICAgLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLwoKICAgIHB1YmxpYyBWYWx1ZU1hcHBpbmdJ\nbmZvIGdldFZhbHVlSW5mbygpIHsKICAgICAgICByZXR1cm4gX3ZhbC5nZXRW\nYWx1ZUluZm8oKTsKICAgIH0KCiAgICBwdWJsaWMgVmFsdWVIYW5kbGVyIGdl\ndEhhbmRsZXIoKSB7CiAgICAgICAgcmV0dXJuIF92YWwuZ2V0SGFuZGxlcigp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldEhhbmRsZXIoVmFsdWVIYW5k\nbGVyIGhhbmRsZXIpIHsKICAgICAgICBfdmFsLnNldEhhbmRsZXIoaGFuZGxl\ncik7CiAgICB9CgogICAgcHVibGljIEZpZWxkTWFwcGluZyBnZXRGaWVsZE1h\ncHBpbmcoKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgcHVi\nbGljIENsYXNzTWFwcGluZyBnZXRUeXBlTWFwcGluZygpIHsKICAgICAgICBy\nZXR1cm4gX3ZhbC5nZXRUeXBlTWFwcGluZygpOwogICAgfQoKICAgIHB1Ymxp\nYyBDbGFzc01hcHBpbmcgZ2V0RGVjbGFyZWRUeXBlTWFwcGluZygpIHsKICAg\nICAgICByZXR1cm4gX3ZhbC5nZXREZWNsYXJlZFR5cGVNYXBwaW5nKCk7CiAg\nICB9CgogICAgcHVibGljIENsYXNzTWFwcGluZyBnZXRFbWJlZGRlZE1hcHBp\nbmcoKSB7CiAgICAgICAgcmV0dXJuIF92YWwuZ2V0RW1iZWRkZWRNYXBwaW5n\nKCk7CiAgICB9CgogICAgcHVibGljIEZpZWxkTWFwcGluZyBnZXRWYWx1ZU1h\ncHBlZEJ5TWFwcGluZygpIHsKICAgICAgICByZXR1cm4gX3ZhbC5nZXRWYWx1\nZU1hcHBlZEJ5TWFwcGluZygpOwogICAgfQoKICAgIHB1YmxpYyBDb2x1bW5b\nXSBnZXRDb2x1bW5zKCkgewogICAgICAgIC8vIHBjbDogNiBKdWx5IDIwMDc6\nIHRoaXMgc2VlbXMgYSBiaXQgaGFja3ksIGJ1dCBpZiB0aGUgbWFwcGluZyBp\ncyBhCiAgICAgICAgLy8gdmVyc2lvbiwgaXQgd2lsbCBoYXZlIGEgTm9uZUZp\nZWxkTWFwcGluZyAoc2luY2UgdGhlIHZlcnNpb24gc3RyYXRlZ3kKICAgICAg\nICAvLyBmb3IgdGhlIGNsYXNzIHRha2VzIGNhcmUgb2YgaXQncyBtYXBwaW5n\nKSwgYW5kIE5vbmVGaWVsZFN0cmF0ZWdpZXMKICAgICAgICAvLyBkbyBub3Qg\naGF2ZSBjb2x1bW5zLgogICAgICAgIGlmIChpc1ZlcnNpb24oKSkKICAgICAg\nICAgICAgcmV0dXJuIGdldERlY2xhcmluZ01hcHBpbmcoKS5nZXRWZXJzaW9u\nKCkuZ2V0Q29sdW1ucygpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgcmV0\ndXJuIF92YWwuZ2V0Q29sdW1ucygpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHNldENvbHVtbnMoQ29sdW1uW10gY29scykgewogICAgICAgIF92YWwuc2V0\nQ29sdW1ucyhjb2xzKTsKICAgIH0KCiAgICBwdWJsaWMgQ29sdW1uSU8gZ2V0\nQ29sdW1uSU8oKSB7CiAgICAgICAgcmV0dXJuIF92YWwuZ2V0Q29sdW1uSU8o\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRDb2x1bW5JTyhDb2x1bW5J\nTyBpbykgewogICAgICAgIF92YWwuc2V0Q29sdW1uSU8oaW8pOwogICAgfQoK\nICAgIHB1YmxpYyBGb3JlaWduS2V5IGdldEZvcmVpZ25LZXkoKSB7CiAgICAg\nICAgcmV0dXJuIF92YWwuZ2V0Rm9yZWlnbktleSgpOwogICAgfQoKICAgIHB1\nYmxpYyBGb3JlaWduS2V5IGdldEZvcmVpZ25LZXkoQ2xhc3NNYXBwaW5nIHRh\ncmdldCkgewogICAgICAgIHJldHVybiBfdmFsLmdldEZvcmVpZ25LZXkodGFy\nZ2V0KTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRGb3JlaWduS2V5KEZv\ncmVpZ25LZXkgZmspIHsKICAgICAgICBfdmFsLnNldEZvcmVpZ25LZXkoZmsp\nOwogICAgfQoKICAgIHB1YmxpYyBpbnQgZ2V0Sm9pbkRpcmVjdGlvbigpIHsK\nICAgICAgICByZXR1cm4gX3ZhbC5nZXRKb2luRGlyZWN0aW9uKCk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgc2V0Sm9pbkRpcmVjdGlvbihpbnQgZGlyZWN0\naW9uKSB7CiAgICAgICAgX3ZhbC5zZXRKb2luRGlyZWN0aW9uKGRpcmVjdGlv\nbik7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0Rm9yZWlnbktleShSb3cg\ncm93LCBPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtKQogICAgICAgIHRocm93cyBT\nUUxFeGNlcHRpb24gewogICAgICAgIF92YWwuc2V0Rm9yZWlnbktleShyb3cs\nIHNtKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB3aGVyZUZvcmVpZ25LZXko\nUm93IHJvdywgT3BlbkpQQVN0YXRlTWFuYWdlciBzbSkKICAgICAgICB0aHJv\nd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBfdmFsLndoZXJlRm9yZWlnbktl\neShyb3csIHNtKTsKICAgIH0KCiAgICBwdWJsaWMgQ2xhc3NNYXBwaW5nW10g\nZ2V0SW5kZXBlbmRlbnRUeXBlTWFwcGluZ3MoKSB7CiAgICAgICAgcmV0dXJu\nIF92YWwuZ2V0SW5kZXBlbmRlbnRUeXBlTWFwcGluZ3MoKTsKICAgIH0KCiAg\nICBwdWJsaWMgaW50IGdldFNlbGVjdFN1YmNsYXNzZXMoKSB7CiAgICAgICAg\ncmV0dXJuIF92YWwuZ2V0U2VsZWN0U3ViY2xhc3NlcygpOwogICAgfQoKICAg\nIHB1YmxpYyBVbmlxdWUgZ2V0VmFsdWVVbmlxdWUoKSB7CiAgICAgICAgcmV0\ndXJuIF92YWwuZ2V0VmFsdWVVbmlxdWUoKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBzZXRWYWx1ZVVuaXF1ZShVbmlxdWUgdW5xKSB7CiAgICAgICAgX3Zh\nbC5zZXRWYWx1ZVVuaXF1ZSh1bnEpOwogICAgfQoKICAgIHB1YmxpYyBJbmRl\neCBnZXRWYWx1ZUluZGV4KCkgewogICAgICAgIHJldHVybiBfdmFsLmdldFZh\nbHVlSW5kZXgoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRWYWx1ZUlu\nZGV4KEluZGV4IGlkeCkgewogICAgICAgIF92YWwuc2V0VmFsdWVJbmRleChp\nZHgpOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGdldFVzZUNsYXNzQ3Jp\ndGVyaWEoKSB7CiAgICAgICAgcmV0dXJuIF92YWwuZ2V0VXNlQ2xhc3NDcml0\nZXJpYSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldFVzZUNsYXNzQ3Jp\ndGVyaWEoYm9vbGVhbiBjcml0ZXJpYSkgewogICAgICAgIF92YWwuc2V0VXNl\nQ2xhc3NDcml0ZXJpYShjcml0ZXJpYSk7CiAgICB9CgogICAgcHVibGljIGlu\ndCBnZXRQb2x5bW9ycGhpYygpIHsKICAgICAgICByZXR1cm4gX3ZhbC5nZXRQ\nb2x5bW9ycGhpYygpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldFBvbHlt\nb3JwaGljKGludCBwb2x5KSB7CiAgICAgICAgX3ZhbC5zZXRQb2x5bW9ycGhp\nYyhwb2x5KTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBtYXBDb25zdHJhaW50\ncyhTdHJpbmcgbmFtZSwgYm9vbGVhbiBhZGFwdCkgewogICAgICAgIF92YWwu\nbWFwQ29uc3RyYWludHMobmFtZSwgYWRhcHQpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIGNvcHlNYXBwaW5nSW5mbyhWYWx1ZU1hcHBpbmcgdm0pIHsKICAg\nICAgICBfdmFsLmNvcHlNYXBwaW5nSW5mbyh2bSk7CiAgICB9Cn0K\n","encoding":"base64"}

