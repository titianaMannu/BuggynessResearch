{"sha":"77f0133bac87892821e2fe6dc4e40602a2f0a06f","node_id":"MDQ6QmxvYjIwNjM2NDo3N2YwMTMzYmFjODc4OTI4MjFlMmZlNmRjNGU0MDYwMmEyZjBhMDZm","size":21550,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/77f0133bac87892821e2fe6dc4e40602a2f0a06f","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWE7CgppbXBv\ncnQgamF2YS5tYXRoLkJpZ0RlY2ltYWw7CmltcG9ydCBqYXZhLm1hdGguQmln\nSW50ZWdlcjsKaW1wb3J0IGphdmEuc3FsLkRhdGFiYXNlTWV0YURhdGE7Cmlt\ncG9ydCBqYXZhLnNxbC5EYXRlOwppbXBvcnQgamF2YS5zcWwuVGltZTsKaW1w\nb3J0IGphdmEuc3FsLlRpbWVzdGFtcDsKaW1wb3J0IGphdmEuc3FsLlR5cGVz\nOwoKaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5sYW5nLlN0cmluZ1V0aWxz\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5KYXZhU1FM\nVHlwZXM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLlZl\ncnNpb25TdHJhdGVneTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRh\nLkphdmFUeXBlczsKaW1wb3J0IHNlcnAudXRpbC5OdW1iZXJzOwoKLyoqCiAq\nIFJlcHJlc2VudHMgYSBkYXRhYmFzZSBjb2x1bW4uIENsb3NlbHkgYWxpZ25l\nZCB3aXRoIHRoZSBjb2x1bW4KICogaW5mb3JtYXRpb24gYXZhaWxhYmxlIGZy\nb20ge0BsaW5rIERhdGFiYXNlTWV0YURhdGF9LgogKgogKiBAYXV0aG9yIEFi\nZSBXaGl0ZQogKiBAYXV0aG9yIFN0ZXBoZW4gS2ltCiAqLwpwdWJsaWMgY2xh\nc3MgQ29sdW1uCiAgICBleHRlbmRzIFJlZmVyZW5jZUNvdW50ZXIgewoKICAg\nIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IEZMQUdfVU5JTlNFUlRBQkxFID0g\nMiA8PCAwOwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgRkxBR19VTlVQ\nREFUQUJMRSA9IDIgPDwgMTsKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50\nIEZMQUdfRElSRUNUX0lOU0VSVCA9IDIgPDwgMjsKICAgIHB1YmxpYyBzdGF0\naWMgZmluYWwgaW50IEZMQUdfRElSRUNUX1VQREFURSA9IDIgPDwgMzsKICAg\nIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IEZMQUdfRktfSU5TRVJUID0gMiA8\nPCA0OwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgRkxBR19GS19VUERB\nVEUgPSAyIDw8IDU7CiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBGTEFH\nX1BLX0pPSU4gPSAyIDw8IDY7CgogICAgcHJpdmF0ZSBTdHJpbmcgX25hbWUg\nPSBudWxsOwogICAgcHJpdmF0ZSBTdHJpbmcgX2Z1bGxOYW1lID0gbnVsbDsK\nICAgIHByaXZhdGUgVGFibGUgX3RhYmxlID0gbnVsbDsKICAgIHByaXZhdGUg\nU3RyaW5nIF90YWJsZU5hbWUgPSBudWxsOwogICAgcHJpdmF0ZSBTdHJpbmcg\nX3NjaGVtYU5hbWUgPSBudWxsOwogICAgcHJpdmF0ZSBpbnQgX3R5cGUgPSBU\neXBlcy5PVEhFUjsKICAgIHByaXZhdGUgU3RyaW5nIF90eXBlTmFtZSA9IG51\nbGw7CiAgICBwcml2YXRlIGludCBfamF2YVR5cGUgPSBKYXZhVHlwZXMuT0JK\nRUNUOwogICAgcHJpdmF0ZSBpbnQgX3NpemUgPSAwOwogICAgcHJpdmF0ZSBp\nbnQgX2RlY2ltYWxzID0gMDsKICAgIHByaXZhdGUgU3RyaW5nIF9kZWZhdWx0\nU3RyID0gbnVsbDsKICAgIHByaXZhdGUgT2JqZWN0IF9kZWZhdWx0ID0gbnVs\nbDsKICAgIHByaXZhdGUgQm9vbGVhbiBfbm90TnVsbCA9IG51bGw7CiAgICBw\ncml2YXRlIGJvb2xlYW4gX2F1dG9Bc3NpZ24gPSBmYWxzZTsKICAgIHByaXZh\ndGUgYm9vbGVhbiBfcmVsID0gZmFsc2U7CiAgICBwcml2YXRlIFN0cmluZyBf\ndGFyZ2V0ID0gbnVsbDsKICAgIHByaXZhdGUgU3RyaW5nIF90YXJnZXRGaWVs\nZCA9IG51bGw7CiAgICBwcml2YXRlIGludCBfZmxhZ3MgPSAwOwoKICAgIHBy\naXZhdGUgaW50IF9pbmRleCA9IDA7CiAgICBwcml2YXRlIGJvb2xlYW4gX3Br\nID0gZmFsc2U7CiAgICBwcml2YXRlIFZlcnNpb25TdHJhdGVneSBfdmVyc2lv\nblN0cmF0ZWd5ID0gbnVsbDsKICAgIAogICAgLyoqCiAgICAgKiBEZWZhdWx0\nIGNvbnN0cnVjdG9yLgogICAgICovCiAgICBwdWJsaWMgQ29sdW1uKCkgewog\nICAgfQoKICAgIC8qKgogICAgICogQ29uc3RydWN0b3IuCiAgICAgKgogICAg\nICogQHBhcmFtIG5hbWUgdGhlIG5hbWUgb2YgdGhlIGNvbHVtbgogICAgICog\nQHBhcmFtIHRhYmxlIHRoZSBjb2x1bW4ncyB0YWJsZQogICAgICovCiAgICBw\ndWJsaWMgQ29sdW1uKFN0cmluZyBuYW1lLCBUYWJsZSB0YWJsZSkgewogICAg\nICAgIHNldE5hbWUobmFtZSk7CiAgICAgICAgaWYgKHRhYmxlICE9IG51bGwp\nIHsKICAgICAgICAgICAgc2V0VGFibGVOYW1lKHRhYmxlLmdldE5hbWUoKSk7\nCiAgICAgICAgICAgIHNldFNjaGVtYU5hbWUodGFibGUuZ2V0U2NoZW1hTmFt\nZSgpKTsKICAgICAgICB9CiAgICAgICAgX3RhYmxlID0gdGFibGU7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBDYWxsZWQgd2hlbiB0aGUgY29sdW1uIGlzIHJl\nbW92ZWQgZnJvbSBpdHMgdGFibGUuIFJlbW92ZXMgdGhlIGNvbHVtbgogICAg\nICogZnJvbSBhbGwgdGFibGUgY29uc3RyYWludHMgYW5kIGluZGV4ZXMsIHRo\nZW4gaW52YWxpZGF0ZXMgaXQuCiAgICAgKi8KICAgIHZvaWQgcmVtb3ZlKCkg\newogICAgICAgIFRhYmxlIHRhYmxlID0gZ2V0VGFibGUoKTsKICAgICAgICBp\nZiAodGFibGUgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuOwoKICAgICAg\nICBTY2hlbWEgc2NoZW1hID0gdGFibGUuZ2V0U2NoZW1hKCk7CiAgICAgICAg\naWYgKHNjaGVtYSAhPSBudWxsICYmIHNjaGVtYS5nZXRTY2hlbWFHcm91cCgp\nICE9IG51bGwpIHsKICAgICAgICAgICAgU2NoZW1hW10gc2NoZW1hcyA9IHNj\naGVtYS5nZXRTY2hlbWFHcm91cCgpLmdldFNjaGVtYXMoKTsKICAgICAgICAg\nICAgVGFibGVbXSB0YWJzOwogICAgICAgICAgICBGb3JlaWduS2V5W10gZmtz\nOwogICAgICAgICAgICBDb2x1bW5bXSBjb2xzOwogICAgICAgICAgICBDb2x1\nbW5bXSBwa3M7CiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc2No\nZW1hcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgdGFicyA9IHNj\naGVtYXNbaV0uZ2V0VGFibGVzKCk7CiAgICAgICAgICAgICAgICBmb3IgKGlu\ndCBqID0gMDsgaiA8IHRhYnMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAg\nICAgICAgICBma3MgPSB0YWJzW2pdLmdldEZvcmVpZ25LZXlzKCk7CiAgICAg\nICAgICAgICAgICAgICAgZm9yIChpbnQgayA9IDA7IGsgPCBma3MubGVuZ3Ro\nOyBrKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29scyA9IGZrc1tr\nXS5nZXRDb2x1bW5zKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHBrcyA9\nIGZrc1trXS5nZXRQcmltYXJ5S2V5Q29sdW1ucygpOwogICAgICAgICAgICAg\nICAgICAgICAgICBmb3IgKGludCBsID0gMDsgbCA8IGNvbHMubGVuZ3RoOyBs\nKyspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5lcXVh\nbHMoY29sc1tsXSkgfHwgdGhpcy5lcXVhbHMocGtzW2xdKSkKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICBma3Nba10ucmVtb3ZlSm9pbihjb2xz\nW2xdKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbHMgPSBma3Nba10u\nZ2V0Q29uc3RhbnRDb2x1bW5zKCk7CiAgICAgICAgICAgICAgICAgICAgICAg\nIGZvciAoaW50IGwgPSAwOyBsIDwgY29scy5sZW5ndGg7IGwrKykKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVxdWFscyhjb2xzW2xd\nKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBma3Nba10ucmVt\nb3ZlSm9pbihjb2xzW2xdKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHBr\ncyA9IGZrc1trXS5nZXRDb25zdGFudFByaW1hcnlLZXlDb2x1bW5zKCk7CiAg\nICAgICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGwgPSAwOyBsIDwgcGtz\nLmxlbmd0aDsgbCsrKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYg\nKHRoaXMuZXF1YWxzKHBrc1tsXSkpCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgZmtzW2tdLnJlbW92ZUpvaW4ocGtzW2xdKTsKCiAgICAgICAg\nICAgICAgICAgICAgICAgIGlmIChma3Nba10uZ2V0Q29sdW1ucygpLmxlbmd0\naCA9PSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBma3Nba10u\nZ2V0Q29uc3RhbnRDb2x1bW5zKCkubGVuZ3RoID09IDApCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICB0YWJzW2pdLnJlbW92ZUZvcmVpZ25LZXkoZmtz\nW2tdKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9\nCiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIEluZGV4W10gaWR4\ncyA9IHRhYmxlLmdldEluZGV4ZXMoKTsKICAgICAgICBmb3IgKGludCBpID0g\nMDsgaSA8IGlkeHMubGVuZ3RoOyBpKyspCiAgICAgICAgICAgIGlmIChpZHhz\nW2ldLnJlbW92ZUNvbHVtbih0aGlzKSAmJiBpZHhzW2ldLmdldENvbHVtbnMo\nKS5sZW5ndGggPT0gMCkKICAgICAgICAgICAgICAgIHRhYmxlLnJlbW92ZUlu\nZGV4KGlkeHNbaV0pOwoKICAgICAgICBVbmlxdWVbXSB1bnFzID0gdGFibGUu\nZ2V0VW5pcXVlcygpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgdW5x\ncy5sZW5ndGg7IGkrKykKICAgICAgICAgICAgaWYgKHVucXNbaV0ucmVtb3Zl\nQ29sdW1uKHRoaXMpICYmIHVucXNbaV0uZ2V0Q29sdW1ucygpLmxlbmd0aCA9\nPSAwKQogICAgICAgICAgICAgICAgdGFibGUucmVtb3ZlVW5pcXVlKHVucXNb\naV0pOwoKICAgICAgICBQcmltYXJ5S2V5IHBrID0gdGFibGUuZ2V0UHJpbWFy\neUtleSgpOwogICAgICAgIGlmIChwayAhPSBudWxsICYmIHBrLnJlbW92ZUNv\nbHVtbih0aGlzKSAmJiBway5nZXRDb2x1bW5zKCkubGVuZ3RoID09IDApCiAg\nICAgICAgICAgIHRhYmxlLnJlbW92ZVByaW1hcnlLZXkoKTsKCiAgICAgICAg\nX3RhYmxlID0gbnVsbDsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0\naGUgdGFibGUgZm9yIHRoZSBjb2x1bW4uCiAgICAgKi8KICAgIHB1YmxpYyBU\nYWJsZSBnZXRUYWJsZSgpIHsKICAgICAgICByZXR1cm4gX3RhYmxlOwogICAg\nfQoKICAgIC8qKgogICAgICogVGhlIGNvbHVtbidzIHRhYmxlIG5hbWUuCiAg\nICAgKi8KICAgIHB1YmxpYyBTdHJpbmcgZ2V0VGFibGVOYW1lKCkgewogICAg\nICAgIHJldHVybiBfdGFibGVOYW1lOwogICAgfQoKICAgIC8qKgogICAgICog\nVGhlIGNvbHVtbidzIHRhYmxlIG5hbWUuIFlvdSBjYW4gb25seSBjYWxsIHRo\naXMgbWV0aG9kIG9uIGNvbHVtbnMKICAgICAqIHdob3NlIHRhYmxlIG9iamVj\ndCBpcyBub3Qgc2V0LgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRUYWJs\nZU5hbWUoU3RyaW5nIG5hbWUpIHsKICAgICAgICBpZiAoZ2V0VGFibGUoKSAh\nPSBudWxsKQogICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhj\nZXB0aW9uKCk7CiAgICAgICAgX3RhYmxlTmFtZSA9IG5hbWU7CiAgICAgICAg\nX2Z1bGxOYW1lID0gbnVsbDsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBj\nb2x1bW4ncyBzY2hlbWEgbmFtZS4KICAgICAqLwogICAgcHVibGljIFN0cmlu\nZyBnZXRTY2hlbWFOYW1lKCkgewogICAgICAgIHJldHVybiBfc2NoZW1hTmFt\nZTsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBjb2x1bW4ncyBzY2hlbWEg\nbmFtZS4gWW91IGNhbiBvbmx5IGNhbGwgdGhpcyBtZXRob2Qgb24gY29sdW1u\ncwogICAgICogd2hvc2UgdGFibGUgb2JqZWN0IGlzIG5vdCBzZXQuCiAgICAg\nKi8KICAgIHB1YmxpYyB2b2lkIHNldFNjaGVtYU5hbWUoU3RyaW5nIG5hbWUp\nIHsKICAgICAgICBpZiAoZ2V0VGFibGUoKSAhPSBudWxsKQogICAgICAgICAg\nICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKCk7CiAgICAgICAg\nX3NjaGVtYU5hbWUgPSBuYW1lOwogICAgfQoKICAgIC8qKgogICAgICogUmV0\ndXJuIHRoZSBjb2x1bW4ncyBuYW1lLgogICAgICovCiAgICBwdWJsaWMgU3Ry\naW5nIGdldE5hbWUoKSB7CiAgICAgICAgcmV0dXJuIF9uYW1lOwogICAgfQoK\nICAgIC8qKgogICAgICogU2V0IHRoZSBjb2x1bW4ncyBuYW1lLiBZb3UgY2Fu\nIG9ubHkgY2FsbCB0aGlzIG1ldGhvZCBvbiBjb2x1bW5zCiAgICAgKiB3aG9z\nZSB0YWJsZSBvYmplY3QgaXMgbm90IHNldC4KICAgICAqLwogICAgcHVibGlj\nIHZvaWQgc2V0TmFtZShTdHJpbmcgbmFtZSkgewogICAgICAgIGlmIChnZXRU\nYWJsZSgpICE9IG51bGwpCiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2Fs\nU3RhdGVFeGNlcHRpb24oKTsKICAgICAgICBfbmFtZSA9IG5hbWU7CiAgICAg\nICAgX2Z1bGxOYW1lID0gbnVsbDsKICAgIH0KCiAgICAvKioKICAgICAqIFJl\ndHVybiB0aGUgY29sdW1uJ3MgZnVsbCBuYW1lLCBpbiB0aGUgZm9ybSAmbHQ7\ndGFibGUmZ3Q7LiZsdDtuYW1lJmd0Oy4KICAgICAqLwogICAgcHVibGljIFN0\ncmluZyBnZXRGdWxsTmFtZSgpIHsKICAgICAgICBpZiAoX2Z1bGxOYW1lID09\nIG51bGwpIHsKICAgICAgICAgICAgU3RyaW5nIG5hbWUgPSBnZXROYW1lKCk7\nCiAgICAgICAgICAgIGlmIChuYW1lID09IG51bGwpCiAgICAgICAgICAgICAg\nICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgU3RyaW5nIHRuYW1lID0gZ2V0\nVGFibGVOYW1lKCk7CiAgICAgICAgICAgIGlmICh0bmFtZSA9PSBudWxsKQog\nICAgICAgICAgICAgICAgcmV0dXJuIG5hbWU7CiAgICAgICAgICAgIF9mdWxs\nTmFtZSA9IHRuYW1lICsgIi4iICsgbmFtZTsKICAgICAgICB9CiAgICAgICAg\ncmV0dXJuIF9mdWxsTmFtZTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVy\nbiB0aGUgY29sdW1uJ3MgU1FMIHR5cGUuIFRoaXMgd2lsbCBiZSBvbmUgb2Yg\ndGhlIHR5cGUgY29uc3RhbnRzCiAgICAgKiBkZWZpbmVkIGluIHtAbGluayBU\neXBlc30uCiAgICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0VHlwZSgpIHsKICAg\nICAgICByZXR1cm4gX3R5cGU7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQg\ndGhlIGNvbHVtbidzIFNRTCB0eXBlLiBUaGlzIHNob3VsZCBiZSBvbmUgb2Yg\ndGhlIHR5cGUgY29uc3RhbnRzCiAgICAgKiBkZWZpbmVkIGluIHtAbGluayBU\neXBlc30uCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFR5cGUoaW50IHNx\nbFR5cGUpIHsKICAgICAgICBfdHlwZSA9IHNxbFR5cGU7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBUaGUgZGF0YWJhc2Utc3BlY2lmaWMgU1FMIHR5cGUgb2Yg\ndGhpcyBjb2x1bW4uCiAgICAgKi8KICAgIHB1YmxpYyBTdHJpbmcgZ2V0VHlw\nZU5hbWUoKSB7CiAgICAgICAgcmV0dXJuIF90eXBlTmFtZTsKICAgIH0KCiAg\nICAvKioKICAgICAqIFRoZSBkYXRhYmFzZS1zcGVjaWZpYyBTUUwgdHlwZSBv\nZiB0aGlzIGNvbHVtbi4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0VHlw\nZU5hbWUoU3RyaW5nIHR5cGVOYW1lKSB7CiAgICAgICAgX3R5cGVOYW1lID0g\ndHlwZU5hbWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgSmF2YSB0eXBl\nIHRoZSBkYXRhIGluIHRoaXMgY29sdW1uIGlzIHRyZWF0ZWQgYXMsIGZyb20K\nICAgICAqIHtAbGluayBKYXZhVHlwZXN9IG9yIHtAbGluayBKYXZhU1FMVHlw\nZXN9LgogICAgICovCiAgICBwdWJsaWMgaW50IGdldEphdmFUeXBlKCkgewog\nICAgICAgIHJldHVybiBfamF2YVR5cGU7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBUaGUgSmF2YSB0eXBlIHRoZSBkYXRhIGluIHRoaXMgY29sdW1uIGlzIHRy\nZWF0ZWQgYXMsIGZyb20KICAgICAqIHtAbGluayBKYXZhVHlwZXN9IG9yIHtA\nbGluayBKYXZhU1FMVHlwZXN9LgogICAgICovCiAgICBwdWJsaWMgdm9pZCBz\nZXRKYXZhVHlwZShpbnQgdHlwZSkgewogICAgICAgIF9qYXZhVHlwZSA9IHR5\ncGU7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGNvbHVtbidz\nIHNpemUuCiAgICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0U2l6ZSgpIHsKICAg\nICAgICByZXR1cm4gX3NpemU7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQg\ndGhlIGNvbHVtbidzIHNpemUuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNl\ndFNpemUoaW50IHNpemUpIHsKICAgICAgICBfc2l6ZSA9IHNpemU7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIG51bWJlciBvZiBkZWNpbWFs\nIGRpZ2l0cyBmb3IgdGhlIGNvbHVtbiwgaWYgYXBwbGljYWJsZS4KICAgICAq\nLwogICAgcHVibGljIGludCBnZXREZWNpbWFsRGlnaXRzKCkgewogICAgICAg\nIHJldHVybiBfZGVjaW1hbHM7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQg\ndGhlIG51bWJlciBvZiBkZWNpbWFsIGRpZ2l0cyBmb3IgdGhlIGNvbHVtbi4K\nICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0RGVjaW1hbERpZ2l0cyhpbnQg\nZGlnaXRzKSB7CiAgICAgICAgX2RlY2ltYWxzID0gZGlnaXRzOwogICAgfQoK\nICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBkZWZhdWx0IHZhbHVlIHNldCBm\nb3IgdGhlIGNvbHVtbiwgaWYgYW55LgogICAgICovCiAgICBwdWJsaWMgU3Ry\naW5nIGdldERlZmF1bHRTdHJpbmcoKSB7CiAgICAgICAgcmV0dXJuIF9kZWZh\ndWx0U3RyOwogICAgfQoKICAgIC8qKgogICAgICogU2V0IHRoZSBkZWZhdWx0\nIHZhbHVlIGZvciB0aGUgY29sdW1uLgogICAgICovCiAgICBwdWJsaWMgdm9p\nZCBzZXREZWZhdWx0U3RyaW5nKFN0cmluZyBkZWYpIHsKICAgICAgICBfZGVm\nYXVsdFN0ciA9IGRlZjsKICAgICAgICBfZGVmYXVsdCA9IG51bGw7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGRlZmF1bHQgdmFsdWUgc2V0\nIGZvciB0aGlzIGNvbHVtbiwgaWYgYW55LiBJZiBvbmx5IGEgZGVmYXVsdAog\nICAgICogc3RyaW5nIGhhcyBiZWVuIHNldCwgYXR0ZW1wdHMgdG8gY29udmVy\ndCBpdCB0byB0aGUgcmlnaHQgdHlwZSBiYXNlZAogICAgICogb24gdGhlIEph\ndmEgdHlwZSBzZXQgZm9yIHRoaXMgY29sdW1uLgogICAgICovCiAgICBwdWJs\naWMgT2JqZWN0IGdldERlZmF1bHQoKSB7CiAgICAgICAgaWYgKF9kZWZhdWx0\nICE9IG51bGwpCiAgICAgICAgICAgIHJldHVybiBfZGVmYXVsdDsKICAgICAg\nICBpZiAoX2RlZmF1bHRTdHIgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJu\nIG51bGw7CgogICAgICAgIHN3aXRjaCAoX2phdmFUeXBlKSB7CiAgICAgICAg\nICAgIGNhc2UgSmF2YVR5cGVzLkJPT0xFQU46CiAgICAgICAgICAgIGNhc2Ug\nSmF2YVR5cGVzLkJPT0xFQU5fT0JKOgogICAgICAgICAgICAgICAgX2RlZmF1\nbHQgPSAoInRydWUiLmVxdWFscyhfZGVmYXVsdFN0cikpID8gQm9vbGVhbi5U\nUlVFCiAgICAgICAgICAgICAgICAgICAgOiBCb29sZWFuLkZBTFNFOwogICAg\nICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVz\nLkJZVEU6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkJZVEVfT0JKOgog\nICAgICAgICAgICAgICAgX2RlZmF1bHQgPSBuZXcgQnl0ZShfZGVmYXVsdFN0\ncik7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBK\nYXZhVHlwZXMuQ0hBUjoKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuQ0hB\nUl9PQko6CiAgICAgICAgICAgICAgICBfZGVmYXVsdCA9IG5ldyBDaGFyYWN0\nZXIoX2RlZmF1bHRTdHIuY2hhckF0KDApKTsKICAgICAgICAgICAgICAgIGJy\nZWFrOwogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5ET1VCTEU6CiAgICAg\nICAgICAgIGNhc2UgSmF2YVR5cGVzLkRPVUJMRV9PQko6CiAgICAgICAgICAg\nICAgICBfZGVmYXVsdCA9IG5ldyBEb3VibGUoX2RlZmF1bHRTdHIpOwogICAg\nICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVz\nLkZMT0FUOgogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5GTE9BVF9PQko6\nCiAgICAgICAgICAgICAgICBfZGVmYXVsdCA9IG5ldyBGbG9hdChfZGVmYXVs\ndFN0cik7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2Fz\nZSBKYXZhVHlwZXMuSU5UOgogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5J\nTlRfT0JKOgogICAgICAgICAgICAgICAgX2RlZmF1bHQgPSBOdW1iZXJzLnZh\nbHVlT2YoSW50ZWdlci5wYXJzZUludChfZGVmYXVsdFN0cikpOwogICAgICAg\nICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkxP\nTkc6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkxPTkdfT0JKOgogICAg\nICAgICAgICAgICAgX2RlZmF1bHQgPSBOdW1iZXJzLnZhbHVlT2YoTG9uZy5w\nYXJzZUxvbmcoX2RlZmF1bHRTdHIpKTsKICAgICAgICAgICAgICAgIGJyZWFr\nOwogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5OVU1CRVI6CiAgICAgICAg\nICAgIGNhc2UgSmF2YVR5cGVzLkJJR0RFQ0lNQUw6CiAgICAgICAgICAgICAg\nICBfZGVmYXVsdCA9IG5ldyBCaWdEZWNpbWFsKF9kZWZhdWx0U3RyKTsKICAg\nICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIEphdmFUeXBl\ncy5TSE9SVDoKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuU0hPUlRfT0JK\nOgogICAgICAgICAgICAgICAgX2RlZmF1bHQgPSBuZXcgU2hvcnQoX2RlZmF1\nbHRTdHIpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNh\nc2UgSmF2YVR5cGVzLkRBVEU6CiAgICAgICAgICAgICAgICBfZGVmYXVsdCA9\nIG5ldyBqYXZhLnV0aWwuRGF0ZShfZGVmYXVsdFN0cik7CiAgICAgICAgICAg\nICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuQklHSU5U\nRUdFUjoKICAgICAgICAgICAgICAgIF9kZWZhdWx0ID0gbmV3IEJpZ0ludGVn\nZXIoX2RlZmF1bHRTdHIpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAg\nICAgICAgIGNhc2UgSmF2YVNRTFR5cGVzLlNRTF9EQVRFOgogICAgICAgICAg\nICAgICAgX2RlZmF1bHQgPSBEYXRlLnZhbHVlT2YoX2RlZmF1bHRTdHIpOwog\nICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgSmF2YVNR\nTFR5cGVzLlRJTUVTVEFNUDoKICAgICAgICAgICAgICAgIF9kZWZhdWx0ID0g\nVGltZXN0YW1wLnZhbHVlT2YoX2RlZmF1bHRTdHIpOwogICAgICAgICAgICAg\nICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgSmF2YVNRTFR5cGVzLlRJTUU6\nCiAgICAgICAgICAgICAgICBfZGVmYXVsdCA9IFRpbWUudmFsdWVPZihfZGVm\nYXVsdFN0cik7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAg\nZGVmYXVsdDoKICAgICAgICAgICAgICAgIF9kZWZhdWx0ID0gX2RlZmF1bHRT\ndHI7CiAgICAgICAgfQogICAgICAgIHJldHVybiBfZGVmYXVsdDsKICAgIH0K\nCiAgICAvKioKICAgICAqIFNldCB0aGUgZGVmYXVsdCB2YWx1ZSBmb3IgdGhl\nIGNvbHVtbi4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0RGVmYXVsdChP\nYmplY3QgZGVmKSB7CiAgICAgICAgX2RlZmF1bHQgPSBkZWY7CiAgICAgICAg\nX2RlZmF1bHRTdHIgPSAoZGVmID09IG51bGwpID8gbnVsbCA6IGRlZi50b1N0\ncmluZygpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRydWUgaWYg\ndGhpcyBpcyBhIE5PVCBOVUxMIGNvbHVtbi4KICAgICAqLwogICAgcHVibGlj\nIGJvb2xlYW4gaXNOb3ROdWxsKCkgewogICAgICAgIHJldHVybiBfbm90TnVs\nbCA9PSBCb29sZWFuLlRSVUU7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQg\nd2hldGhlciB0aGlzIGlzIGEgTk9UIE5VTEwgY29sdW1uLgogICAgICovCiAg\nICBwdWJsaWMgdm9pZCBzZXROb3ROdWxsKGJvb2xlYW4gbm90TnVsbCkgewog\nICAgICAgIF9ub3ROdWxsID0gKG5vdE51bGwpID8gQm9vbGVhbi5UUlVFIDog\nQm9vbGVhbi5GQUxTRTsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIg\ndGhlIG5vdC1udWxsIHByb3BlcnR5IGhhcyBiZWVuIHNldC4KICAgICAqLwog\nICAgcHVibGljIGJvb2xlYW4gaXNOb3ROdWxsRXhwbGljaXQoKSB7CiAgICAg\nICAgcmV0dXJuIF9ub3ROdWxsICE9IG51bGw7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBXaGV0aGVyIHRoaXMgY29sdW1uIGlzIGF1dG8tYXNzaWduZWQgYSB2\nYWx1ZSBvbiBpbnNlcnQuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlz\nQXV0b0Fzc2lnbmVkKCkgewogICAgICAgIHJldHVybiBfYXV0b0Fzc2lnbjsK\nICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdGhpcyBjb2x1bW4gaXMg\nYXV0by1pbmNyZW1lbnRpbmcuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNl\ndEF1dG9Bc3NpZ25lZChib29sZWFuIGF1dG9Bc3NpZ24pIHsKICAgICAgICBp\nZiAoYXV0b0Fzc2lnbiAhPSBfYXV0b0Fzc2lnbiAmJiBnZXRUYWJsZSgpICE9\nIG51bGwpCiAgICAgICAgICAgIGdldFRhYmxlKCkuY2hhbmdlQXV0b0Fzc2ln\nbmVkKHRoaXMpOwogICAgICAgIF9hdXRvQXNzaWduID0gYXV0b0Fzc2lnbjsK\nICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdGhpcyBjb2x1bW4gc3Rv\ncmVzIHNvbWUgZm9ybSBvZiBzZXJpYWxpemVkIGlkZW50aXR5IHZhbHVlIGZv\ncgogICAgICogYSByZWxhdGVkIHJlY29yZC4gVGhpcyBtYWtlcyB0aGUgY29s\ndW1uIGRlcGVuZGVudCBvbiB0aGUga25vd2luZyB0aGUKICAgICAqIGZpbmFs\nIGlkZW50aXR5IG9mIHRoZSByZWxhdGlvbiBiZWZvcmUgdGhlIGNvbHVtbiB2\nYWx1ZSBpcyBzZXQuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlzUmVs\nYXRpb25JZCgpIHsKICAgICAgICByZXR1cm4gX3JlbDsKICAgIH0KCiAgICAv\nKioKICAgICAqIFdoZXRoZXIgdGhpcyBjb2x1bW4gc3RvcmVzIHNvbWUgZm9y\nbSBvZiBzZXJpYWxpemVkIGlkZW50aXR5IHZhbHVlIGZvcgogICAgICogYSBy\nZWxhdGVkIHJlY29yZC4gVGhpcyBtYWtlcyB0aGUgY29sdW1uIGRlcGVuZGVu\ndCBvbiB0aGUga25vd2luZyB0aGUKICAgICAqIGZpbmFsIGlkZW50aXR5IG9m\nIHRoZSByZWxhdGlvbiBiZWZvcmUgdGhlIGNvbHVtbiB2YWx1ZSBpcyBzZXQu\nCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFJlbGF0aW9uSWQoYm9vbGVh\nbiByZWwpIHsKICAgICAgICBpZiAocmVsICE9IF9yZWwgJiYgZ2V0VGFibGUo\nKSAhPSBudWxsKQogICAgICAgICAgICBnZXRUYWJsZSgpLmNoYW5nZVJlbGF0\naW9uSWQodGhpcyk7CiAgICAgICAgX3JlbCA9IHJlbDsKICAgIH0KCiAgICAv\nKioKICAgICAqIFRoZSBuYW1lIG9mIHRoZSBjb2x1bW4gdGhpcyBjb2x1bW4g\nam9pbnMgdG8sIGlmIGFueS4gVXNlZCBmb3IgbWFwcGluZy4KICAgICAqLwog\nICAgcHVibGljIFN0cmluZyBnZXRUYXJnZXQoKSB7CiAgICAgICAgcmV0dXJu\nIF90YXJnZXQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgbmFtZSBvZiB0\naGUgY29sdW1uIHRoaXMgY29sdW1uIGpvaW5zIHRvLCBpZiBhbnkuIFVzZWQg\nZm9yIG1hcHBpbmcuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFRhcmdl\ndChTdHJpbmcgdGFyZ2V0KSB7CiAgICAgICAgX3RhcmdldCA9IFN0cmluZ1V0\naWxzLnRyaW1Ub051bGwodGFyZ2V0KTsKICAgIH0KCiAgICAvKioKICAgICAq\nIFRoZSBuYW1lIG9mIHRoZSBmaWVsZCB0aGlzIGNvbHVtbiBqb2lucyB0bywg\naWYgYW55LiBVc2VkIGZvciBtYXBwaW5nLgogICAgICovCiAgICBwdWJsaWMg\nU3RyaW5nIGdldFRhcmdldEZpZWxkKCkgewogICAgICAgIHJldHVybiBfdGFy\nZ2V0RmllbGQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgbmFtZSBvZiB0\naGUgZmllbGQgdGhpcyBjb2x1bW4gam9pbnMgdG8sIGlmIGFueS4gVXNlZCBm\nb3IgbWFwcGluZy4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0VGFyZ2V0\nRmllbGQoU3RyaW5nIHRhcmdldCkgewogICAgICAgIGlmICh0YXJnZXQgIT0g\nbnVsbCAmJiB0YXJnZXQubGVuZ3RoKCkgPT0gMCkKICAgICAgICAgICAgdGFy\nZ2V0ID0gbnVsbDsKICAgICAgICBfdGFyZ2V0RmllbGQgPSB0YXJnZXQ7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBGbGFncyBhcmUgdXNlZCBmb3IgYm9va2tl\nZXBpbmcgaW5mb3JtYXRpb24uIFRoZXkgYXJlIGlnbm9yZWQgYXQgcnVudGlt\nZS4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gZ2V0RmxhZyhpbnQgZmxh\nZykgewogICAgICAgIHJldHVybiAoX2ZsYWdzICYgZmxhZykgIT0gMDsKICAg\nIH0KCiAgICAvKioKICAgICAqIEZsYWdzIGFyZSB1c2VkIGZvciBib29ra2Vl\ncGluZyBpbmZvcm1hdGlvbi4gVGhleSBhcmUgaWdub3JlZCBhdCBydW50aW1l\nLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRGbGFnKGludCBmbGFnLCBi\nb29sZWFuIG9uKSB7CiAgICAgICAgaWYgKG9uKQogICAgICAgICAgICBfZmxh\nZ3MgfD0gZmxhZzsKICAgICAgICBlbHNlCiAgICAgICAgICAgIF9mbGFncyAm\nPSB+ZmxhZzsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0cnVlIGlm\nIHRoaXMgY29sdW1uIGJlbG9uZ3MgdG8gdGhlIHRhYmxlJ3MgcHJpbWFyeSBr\nZXkuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlzUHJpbWFyeUtleSgp\nIHsKICAgICAgICByZXR1cm4gX3BrOwogICAgfQoKICAgIC8qKgogICAgICog\nU2V0IHdoZXRoZXIgdGhpcyBjb2x1bW4gYmVsb25ncyB0byB0aGUgdGFibGUn\ncyBwcmltYXJ5IGtleS4KICAgICAqLwogICAgdm9pZCBzZXRQcmltYXJ5S2V5\nKGJvb2xlYW4gcGspIHsKICAgICAgICBfcGsgPSBwazsKICAgIH0KCiAgICAv\nKioKICAgICAqIFJldHVybiB0aGUgY29sdW1uJ3MgMC1iYXNlZCBpbmRleCBp\nbiB0aGUgb3duaW5nIHRhYmxlLgogICAgICovCiAgICBwdWJsaWMgaW50IGdl\ndEluZGV4KCkgewogICAgICAgIGlmIChnZXRUYWJsZSgpICE9IG51bGwpCiAg\nICAgICAgICAgIGdldFRhYmxlKCkuaW5kZXhDb2x1bW5zKCk7CiAgICAgICAg\ncmV0dXJuIF9pbmRleDsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCB0aGUg\nY29sdW1uJ3MgMC1iYXNlZCBpbmRleCBpbiB0aGUgb3duaW5nIHRhYmxlLgog\nICAgICovCiAgICB2b2lkIHNldEluZGV4KGludCBpbmRleCkgewogICAgICAg\nIF9pbmRleCA9IGluZGV4OwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhl\nciB0aGlzIGNvbHVtbiBpcyBhIExPQi4KICAgICAqLwogICAgcHVibGljIGJv\nb2xlYW4gaXNMb2IoKSB7CiAgICAgICAgc3dpdGNoIChfdHlwZSkgewogICAg\nICAgICAgICBjYXNlIFR5cGVzLkJJTkFSWToKICAgICAgICAgICAgY2FzZSBU\neXBlcy5CTE9COgogICAgICAgICAgICBjYXNlIFR5cGVzLkxPTkdWQVJCSU5B\nUlk6CiAgICAgICAgICAgIGNhc2UgVHlwZXMuVkFSQklOQVJZOgogICAgICAg\nICAgICBjYXNlIFR5cGVzLkNMT0I6CiAgICAgICAgICAgICAgICByZXR1cm4g\ndHJ1ZTsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIHJl\ndHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBS\nZXR1cm4gdHJ1ZSBpZiB0aGlzIGNvbHVtbiBpcyBjb21wYXRpYmxlIHdpdGgg\ndGhlIGdpdmVuIEpEQkMgdHlwZQogICAgICogZnJvbSB7QGxpbmsgVHlwZXN9\nIGFuZCBzaXplLgogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBpc0NvbXBh\ndGlibGUoaW50IHR5cGUsIFN0cmluZyB0eXBlTmFtZSwgaW50IHNpemUsIAog\nICAgICAgIGludCBkZWNpbWFscykgewogICAgICAgIGlmICh0eXBlID09IFR5\ncGVzLk9USEVSIHx8IGdldFR5cGUoKSA9PSBUeXBlcy5PVEhFUikKICAgICAg\nICAgICAgcmV0dXJuIHRydWU7CgogICAgICAgIC8vIG5vdGUgdGhhdCB0aGUg\nZ2l2ZW4gc2l6ZSBpcyBjdXJyZW50bHkgaWdub3JlZCwgYnV0IG1heSBiZSB1\nc2VmdWwKICAgICAgICAvLyB0byBkeW5hbWljYWxseS1wb3B1bGF0aW5nIHN1\nYmNsYXNzZXMKICAgICAgICBzd2l0Y2ggKGdldFR5cGUoKSkgewogICAgICAg\nICAgICBjYXNlIFR5cGVzLkJJVDoKICAgICAgICAgICAgY2FzZSBUeXBlcy5U\nSU5ZSU5UOgogICAgICAgICAgICBjYXNlIFR5cGVzLkJJR0lOVDoKICAgICAg\nICAgICAgY2FzZSBUeXBlcy5JTlRFR0VSOgogICAgICAgICAgICBjYXNlIFR5\ncGVzLk5VTUVSSUM6CiAgICAgICAgICAgIGNhc2UgVHlwZXMuU01BTExJTlQ6\nCiAgICAgICAgICAgIGNhc2UgVHlwZXMuREVDSU1BTDoKICAgICAgICAgICAg\nY2FzZSBUeXBlcy5ET1VCTEU6CiAgICAgICAgICAgIGNhc2UgVHlwZXMuRkxP\nQVQ6CiAgICAgICAgICAgIGNhc2UgVHlwZXMuUkVBTDoKICAgICAgICAgICAg\nICAgIHN3aXRjaCAodHlwZSkgewogICAgICAgICAgICAgICAgICAgIGNhc2Ug\nVHlwZXMuQklUOgogICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZXMuVElO\nWUlOVDoKICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGVzLkJJR0lOVDoK\nICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGVzLklOVEVHRVI6CiAgICAg\nICAgICAgICAgICAgICAgY2FzZSBUeXBlcy5OVU1FUklDOgogICAgICAgICAg\nICAgICAgICAgIGNhc2UgVHlwZXMuU01BTExJTlQ6CiAgICAgICAgICAgICAg\nICAgICAgY2FzZSBUeXBlcy5ERUNJTUFMOgogICAgICAgICAgICAgICAgICAg\nIGNhc2UgVHlwZXMuRE9VQkxFOgogICAgICAgICAgICAgICAgICAgIGNhc2Ug\nVHlwZXMuRkxPQVQ6CiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlcy5S\nRUFMOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAg\nICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAg\nICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAg\nICAgIGNhc2UgVHlwZXMuQklOQVJZOgogICAgICAgICAgICBjYXNlIFR5cGVz\nLkJMT0I6CiAgICAgICAgICAgIGNhc2UgVHlwZXMuTE9OR1ZBUkJJTkFSWToK\nICAgICAgICAgICAgY2FzZSBUeXBlcy5WQVJCSU5BUlk6CiAgICAgICAgICAg\nIGNhc2UgVHlwZXMuT1RIRVI6CiAgICAgICAgICAgICAgICBzd2l0Y2ggKHR5\ncGUpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGVzLkJJTkFSWToK\nICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGVzLkJMT0I6CiAgICAgICAg\nICAgICAgICAgICAgY2FzZSBUeXBlcy5MT05HVkFSQklOQVJZOgogICAgICAg\nICAgICAgICAgICAgIGNhc2UgVHlwZXMuVkFSQklOQVJZOgogICAgICAgICAg\nICAgICAgICAgIGNhc2UgVHlwZXMuT1RIRVI6CiAgICAgICAgICAgICAgICAg\nICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgIGRlZmF1\nbHQ6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAg\nICAgICAgICAgICAgIH0KICAgICAgICAgICAgY2FzZSBUeXBlcy5DTE9COgog\nICAgICAgICAgICBjYXNlIFR5cGVzLkNIQVI6CiAgICAgICAgICAgIGNhc2Ug\nVHlwZXMuTE9OR1ZBUkNIQVI6CiAgICAgICAgICAgIGNhc2UgVHlwZXMuVkFS\nQ0hBUjoKICAgICAgICAgICAgICAgIHN3aXRjaCAodHlwZSkgewogICAgICAg\nICAgICAgICAgICAgIGNhc2UgVHlwZXMuQ0xPQjoKICAgICAgICAgICAgICAg\nICAgICBjYXNlIFR5cGVzLkNIQVI6CiAgICAgICAgICAgICAgICAgICAgY2Fz\nZSBUeXBlcy5MT05HVkFSQ0hBUjoKICAgICAgICAgICAgICAgICAgICBjYXNl\nIFR5cGVzLlZBUkNIQVI6CiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBl\ncy5EQVRFOgogICAgICAgICAgICAgICAgICAgIGNhc2UgVHlwZXMuVElNRToK\nICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGVzLlRJTUVTVEFNUDoKICAg\nICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAg\nICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0\ndXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICBjYXNl\nIFR5cGVzLkRBVEU6CiAgICAgICAgICAgIGNhc2UgVHlwZXMuVElNRToKICAg\nICAgICAgICAgY2FzZSBUeXBlcy5USU1FU1RBTVA6CiAgICAgICAgICAgICAg\nICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlIFR5\ncGVzLkxPTkdWQVJDSEFSOgogICAgICAgICAgICAgICAgICAgIGNhc2UgVHlw\nZXMuQ0xPQjoKICAgICAgICAgICAgICAgICAgICBjYXNlIFR5cGVzLlZBUkNI\nQVI6CiAgICAgICAgICAgICAgICAgICAgY2FzZSBUeXBlcy5EQVRFOgogICAg\nICAgICAgICAgICAgICAgIGNhc2UgVHlwZXMuVElNRToKICAgICAgICAgICAg\nICAgICAgICBjYXNlIFR5cGVzLlRJTUVTVEFNUDoKICAgICAgICAgICAgICAg\nICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICAgICAgZGVm\nYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwog\nICAgICAgICAgICAgICAgfQogICAgICAgICAgICBkZWZhdWx0OgogICAgICAg\nICAgICAgICAgcmV0dXJuIHR5cGUgPT0gZ2V0VHlwZSgpOwogICAgICAgIH0K\nICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGNvbHVtbiBuYW1l\nLgogICAgICovCiAgICBwdWJsaWMgU3RyaW5nIHRvU3RyaW5nKCkgewogICAg\nICAgIHJldHVybiBnZXROYW1lKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBV\nc2VmdWwgZm9yIGRlYnVnZ2luZy4KICAgICAqLwogICAgcHVibGljIFN0cmlu\nZyBnZXREZXNjcmlwdGlvbigpIHsKICAgICAgICBTdHJpbmdCdWZmZXIgYnVm\nID0gbmV3IFN0cmluZ0J1ZmZlcigpOwogICAgICAgIGJ1Zi5hcHBlbmQoIkZ1\nbGwgTmFtZTogIikuYXBwZW5kKGdldEZ1bGxOYW1lKCkpLmFwcGVuZCgiXG4i\nKTsKICAgICAgICBidWYuYXBwZW5kKCJUeXBlOiAiKS5hcHBlbmQoU2NoZW1h\ncy5nZXRKREJDTmFtZShnZXRUeXBlKCkpKS4KICAgICAgICAgICAgYXBwZW5k\nKCJcbiIpOwogICAgICAgIGJ1Zi5hcHBlbmQoIlNpemU6ICIpLmFwcGVuZChn\nZXRTaXplKCkpLmFwcGVuZCgiXG4iKTsKICAgICAgICBidWYuYXBwZW5kKCJE\nZWZhdWx0OiAiKS5hcHBlbmQoZ2V0RGVmYXVsdFN0cmluZygpKS5hcHBlbmQo\nIlxuIik7CiAgICAgICAgYnVmLmFwcGVuZCgiTm90IE51bGw6ICIpLmFwcGVu\nZChpc05vdE51bGwoKSkuYXBwZW5kKCJcbiIpOwogICAgICAgIHJldHVybiBi\ndWYudG9TdHJpbmcoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRlc3RzIGNv\nbXBhdGliaWxpdHkuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGVxdWFs\nc0NvbHVtbihDb2x1bW4gY29sKSB7CiAgICAgICAgaWYgKGNvbCA9PSB0aGlz\nKQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICBpZiAoY29sID09\nIG51bGwpCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCiAgICAgICAgaWYg\nKCFnZXRGdWxsTmFtZSgpLmVxdWFsc0lnbm9yZUNhc2UoY29sLmdldEZ1bGxO\nYW1lKCkpKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgaWYg\nKCFpc0NvbXBhdGlibGUoY29sLmdldFR5cGUoKSwgY29sLmdldFR5cGVOYW1l\nKCksIGNvbC5nZXRTaXplKCksCiAgICAgICAgICAgIGNvbC5nZXREZWNpbWFs\nRGlnaXRzKCkpKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAg\naWYgKGdldFR5cGUoKSA9PSBUeXBlcy5WQVJDSEFSICYmIGdldFNpemUoKSA+\nIDAgJiYgY29sLmdldFNpemUoKSA+IDAKICAgICAgICAgICAgJiYgZ2V0U2l6\nZSgpICE9IGNvbC5nZXRTaXplKCkpCiAgICAgICAgICAgIHJldHVybiBmYWxz\nZTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAq\nIENvcHkgaW5mb3JtYXRpb24gZnJvbSB0aGUgZ2l2ZW4gY29sdW1uIHRvIHRo\naXMgb25lLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBjb3B5KENvbHVtbiBm\ncm9tKSB7CiAgICAgICAgaWYgKGZyb20gPT0gbnVsbCkKICAgICAgICAgICAg\ncmV0dXJuOwogICAgICAgIGlmIChnZXROYW1lKCkgPT0gbnVsbCkKICAgICAg\nICAgICAgc2V0TmFtZShmcm9tLmdldE5hbWUoKSk7CiAgICAgICAgaWYgKGdl\ndFR5cGUoKSA9PSBUeXBlcy5PVEhFUikKICAgICAgICAgICAgc2V0VHlwZShm\ncm9tLmdldFR5cGUoKSk7CiAgICAgICAgaWYgKGdldFR5cGVOYW1lKCkgPT0g\nbnVsbCkKICAgICAgICAgICAgc2V0VHlwZU5hbWUoZnJvbS5nZXRUeXBlTmFt\nZSgpKTsKICAgICAgICBpZiAoZ2V0SmF2YVR5cGUoKSA9PSBKYXZhVHlwZXMu\nT0JKRUNUKQogICAgICAgICAgICBzZXRKYXZhVHlwZShmcm9tLmdldEphdmFU\neXBlKCkpOwogICAgICAgIGlmIChnZXRTaXplKCkgPT0gMCkKICAgICAgICAg\nICAgc2V0U2l6ZShmcm9tLmdldFNpemUoKSk7CiAgICAgICAgaWYgKGdldERl\nY2ltYWxEaWdpdHMoKSA9PSAwKQogICAgICAgICAgICBzZXREZWNpbWFsRGln\naXRzKGZyb20uZ2V0RGVjaW1hbERpZ2l0cygpKTsKICAgICAgICBpZiAoZ2V0\nRGVmYXVsdFN0cmluZygpID09IG51bGwpCiAgICAgICAgICAgIHNldERlZmF1\nbHRTdHJpbmcoZnJvbS5nZXREZWZhdWx0U3RyaW5nKCkpOwogICAgICAgIGlm\nICghaXNOb3ROdWxsRXhwbGljaXQoKSAmJiBmcm9tLmlzTm90TnVsbEV4cGxp\nY2l0KCkpCiAgICAgICAgICAgIHNldE5vdE51bGwoZnJvbS5pc05vdE51bGwo\nKSk7CiAgICAgICAgaWYgKCFpc0F1dG9Bc3NpZ25lZCgpKQogICAgICAgICAg\nICBzZXRBdXRvQXNzaWduZWQoZnJvbS5pc0F1dG9Bc3NpZ25lZCgpKTsKICAg\nICAgICBpZiAoIWlzUmVsYXRpb25JZCgpKQogICAgICAgICAgICBzZXRSZWxh\ndGlvbklkKGZyb20uaXNSZWxhdGlvbklkKCkpOwogICAgICAgIGlmIChnZXRU\nYXJnZXQoKSA9PSBudWxsKQogICAgICAgICAgICBzZXRUYXJnZXQoZnJvbS5n\nZXRUYXJnZXQoKSk7CiAgICAgICAgaWYgKGdldFRhcmdldEZpZWxkKCkgPT0g\nbnVsbCkKICAgICAgICAgICAgc2V0VGFyZ2V0RmllbGQoZnJvbS5nZXRUYXJn\nZXRGaWVsZCgpKTsKICAgICAgICBpZiAoX2ZsYWdzID09IDApCiAgICAgICAg\nICAgIF9mbGFncyA9IGZyb20uX2ZsYWdzOwogICAgfQogICAgCiAgICAvKioK\nICAgICAqIFdoZXRoZXIgdGhpcyBjb2x1bW4gaXMgYW4gWE1MIHR5cGUuCiAg\nICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlzWE1MKCkgewogICAgICAgIHJl\ndHVybiBfdHlwZU5hbWUgIT0gbnVsbCAmJiBfdHlwZU5hbWUuc3RhcnRzV2l0\naCgiWE1MIik7CiAgICB9CgogICAgcHVibGljIFZlcnNpb25TdHJhdGVneSBn\nZXRWZXJzaW9uU3RyYXRlZ3koKSB7CiAgICAgICAgcmV0dXJuIF92ZXJzaW9u\nU3RyYXRlZ3k7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0VmVyc2lvblN0\ncmF0ZWd5KFZlcnNpb25TdHJhdGVneSBzdHJhdGVneSkgewogICAgICAgIHRo\naXMuX3ZlcnNpb25TdHJhdGVneSA9IHN0cmF0ZWd5OwogICAgfQp9Cg==\n","encoding":"base64"}

