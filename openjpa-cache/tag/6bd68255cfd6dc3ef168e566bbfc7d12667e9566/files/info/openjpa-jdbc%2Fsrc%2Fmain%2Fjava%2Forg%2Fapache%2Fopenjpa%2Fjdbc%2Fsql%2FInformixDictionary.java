{"sha":"b7b56c51cf23321bb06382f9c6330a6864d32061","node_id":"MDQ6QmxvYjIwNjM2NDpiN2I1NmM1MWNmMjMzMjFiYjA2MzgyZjljNjMzMGE2ODY0ZDMyMDYx","size":9376,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/b7b56c51cf23321bb06382f9c6330a6864d32061","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWw7CgppbXBvcnQg\namF2YS5zcWwuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmEuc3FsLkRhdGFiYXNl\nTWV0YURhdGE7CmltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDsK\naW1wb3J0IGphdmEuc3FsLlJlc3VsdFNldDsKaW1wb3J0IGphdmEuc3FsLlNR\nTEV4Y2VwdGlvbjsKaW1wb3J0IGphdmEuc3FsLlN0YXRlbWVudDsKaW1wb3J0\nIGphdmEuc3FsLlR5cGVzOwppbXBvcnQgamF2YS51dGlsLkFycmF5czsKaW1w\nb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOwoKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNjaGVtYS5Db2x1bW47CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEuamRiYy5zY2hlbWEuRm9yZWlnbktleTsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5JbmRleDsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5QcmltYXJ5S2V5OwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLlRhYmxlOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLlJlZmVyZW5jZUhhc2hTZXQ7\nCgovKioKICogRGljdGlvbmFyeSBmb3IgSW5mb3JtaXggZGF0YWJhc2UuIE5v\ndGFibGUgZmVhdHVyZXM6CiAqIDx1bD4KICogPGxpPkluZm9ybWl4IGRvZXMg\nbm90IGFsbG93IHBlc3NpbWlzdGljIGxvY2tpbmcgb24gc2Nyb2xsYWJsZSBy\nZXN1bHQKICogc2V0cy48L2xpPgogKiA8bGk+U0VUIExPQ0sgTU9ERSBUTyBX\nQUlUIE4gc3RhdGVtZW50cyBhcmUgaXNzdWVkIHRvIHdhaXQgb24gbG9ja3Mu\nIFNlZQogKiB7QGxpbmsgI2xvY2tXYWl0U2Vjb25kc30gYW5kIHtAbGluayAj\nbG9ja01vZGVFbmFibGVkfS48L2xpPgogKiA8bGk+TE9DSyBNT0RFIFJPVyBp\ncyB1c2VkIGJ5IGRlZmF1bHQgZm9yIHRhYmxlIGNyZWF0aW9uIHRvIGFsbG93\nIHRoZQogKiBtYXhpbXVtIGNvbmN1cnJlbmN5LjwvbGk+CiAqIDwvdWw+CiAq\nLwpwdWJsaWMgY2xhc3MgSW5mb3JtaXhEaWN0aW9uYXJ5CiAgICBleHRlbmRz\nIERCRGljdGlvbmFyeSB7CgogICAgLyoqCiAgICAgKiBJZiB0cnVlLCB0aGVu\nIHdlIHdpbGwgaXNzdWUgYSAiU0VUIExPQ0sgTU9ERSBUTyBXQUlUIE4iCiAg\nICAgKiBzdGF0ZW1lbnQgd2hlbmV2ZXIgd2UgY3JlYXRlIGEge0BsaW5rIENv\nbm5lY3Rpb259LCBpbiBvcmRlcgogICAgICogYWxsb3cgd2FpdGluZyBvbiBs\nb2Nrcy4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gbG9ja01vZGVFbmFi\nbGVkID0gZmFsc2U7CgogICAgLyoqCiAgICAgKiBJZiB7QGxpbmsgI2xvY2tN\nb2RlRW5hYmxlZH0gaXMgPGNvZGU+dHJ1ZTwvY29kZT4sIHRoZW4gdGhpcwog\nICAgICogcGFyYW1ldGVyIHNwZWNpZmllcyB0aGUgbnVtYmVyIG9mIHNlY29u\nZHMgd2Ugd2lsbCB3YWl0IHRvCiAgICAgKiBvYnRhaW4gYSBsb2NrIGZvciBp\nbnNlcnRzIGFuZCBwZXNzaW1pc3RpYyBsb2NraW5nLgogICAgICovCiAgICBw\ndWJsaWMgaW50IGxvY2tXYWl0U2Vjb25kcyA9IDMwOwoKICAgIC8qKgogICAg\nICogSW5mb3JtaXggSkRCQyBtZXRhZGF0YSBmb3IgYWxsIGtub3duIGRyaXZl\ncnMgcmV0dXJucyB3aXRoIHRoZQogICAgICogdGFibGUgY2F0YWxvZyBhbmQg\ndGhlIHRhYmxlIHNjaGVtYSBuYW1lIHN3YXBwZWQuIEEgPGNvZGU+dHJ1ZTwv\nY29kZT4KICAgICAqIHZhbHVlIGZvciB0aGlzIHByb3BlcnR5IGluZGljYXRl\ncyB0aGF0IHRoZXkgc2hvdWxkIGJlIHJldmVyc2VkLgogICAgICovCiAgICBw\ndWJsaWMgYm9vbGVhbiBzd2FwU2NoZW1hQW5kQ2F0YWxvZyA9IHRydWU7Cgog\nICAgLy8gd2VhayBzZXQgb2YgY29ubmVjdGlvbnMgd2UndmUgYWxyZWFkeSBl\neGVjdXRlZCBsb2NrIG1vZGUgc3FsIG9uCiAgICBwcml2YXRlIGZpbmFsIENv\nbGxlY3Rpb24gX3NlZW5Db25uZWN0aW9ucyA9IG5ldyBSZWZlcmVuY2VIYXNo\nU2V0CiAgICAgICAgKFJlZmVyZW5jZUhhc2hTZXQuV0VBSyk7CgogICAgcHVi\nbGljIEluZm9ybWl4RGljdGlvbmFyeSgpIHsKICAgICAgICBwbGF0Zm9ybSA9\nICJJbmZvcm1peCI7CiAgICAgICAgdmFsaWRhdGlvblNRTCA9ICJTRUxFQ1Qg\nRklSU1QgMSBDVVJSRU5UIFRJTUVTVEFNUCAiCiAgICAgICAgICAgICsgIkZS\nT00gaW5mb3JtaXguc3lzdGFibGVzIjsKCiAgICAgICAgc3VwcG9ydHNBdXRv\nQXNzaWduID0gdHJ1ZTsKICAgICAgICBhdXRvQXNzaWduVHlwZU5hbWUgPSAi\nc2VyaWFsIjsKICAgICAgICBsYXN0R2VuZXJhdGVkS2V5UXVlcnkgPSAiU0VM\nRUNUIEZJUlNUIDEgREJJTkZPKCdzcWxjYS5zcWxlcnJkMScpICIKICAgICAg\nICAgICAgKyAiRlJPTSBpbmZvcm1peC5zeXN0YWJsZXMiOwoKICAgICAgICAv\nLyBpbmZvcm1peCBhY3R1YWxseSBkb2VzIHN1cHBvcnQgZGVmZXJyZWQgY29u\nc3RyYWludHMsIGJ1dCBub3QKICAgICAgICAvLyBpbiB0aGUgdGFibGUgZGVm\naW5pdGlvbjsgZGVmZXJyZWQgY29uc3RyYWludHMgY2FuIGJlIGFjdGl2YXRl\nZCBieQogICAgICAgIC8vIGludm9raW5nICJzZXQgY29uc3RyYWludHMgYWxs\nIGRlZmVycmVkIiBvbiB0aGUgY29ubmVjdGlvbiwgd2hpY2gKICAgICAgICAv\nLyB3ZSBkb24ndCBkbyB5ZXQKICAgICAgICBzdXBwb3J0c0RlZmVycmVkQ29u\nc3RyYWludHMgPSBmYWxzZTsKICAgICAgICBjb25zdHJhaW50TmFtZU1vZGUg\nPSBDT05TX05BTUVfQUZURVI7CgogICAgICAgIG1heFRhYmxlTmFtZUxlbmd0\naCA9IDE4OwogICAgICAgIG1heENvbHVtbk5hbWVMZW5ndGggPSAxODsKICAg\nICAgICBtYXhJbmRleE5hbWVMZW5ndGggPSAxODsKICAgICAgICBtYXhDb25z\ndHJhaW50TmFtZUxlbmd0aCA9IDE4OwoKICAgICAgICAvLyBJbmZvcm1peCB1\nc2VzIGEgbm9uLXN0YW5kYXJkICI6IiB0byBzZXBhcmF0ZSBzY2hlbWEgYW5k\nIHRhYmxlIG5hbWVzCiAgICAgICAgY2F0YWxvZ1NlcGFyYXRvciA9ICI6IjsK\nCiAgICAgICAgLy8gaW5mb3JtaXggc3VwcG9ydHMgIkNMT0IiIHR5cGUsIGJ1\ndCBhbnkgYXR0ZW1wdCB0byBpbnNlcnQKICAgICAgICAvLyBpbnRvIHRoZW0g\ncmFpc2VzOiAiamF2YS5zcWwuU1FMRXhjZXB0aW9uOiBDYW4ndCBjb252ZXJ0\nIGZyb21udWxsIgogICAgICAgIHVzZUdldFN0cmluZ0ZvckNsb2JzID0gdHJ1\nZTsKICAgICAgICBsb25nVmFyY2hhclR5cGVOYW1lID0gIlRFWFQiOwogICAg\nICAgIGNsb2JUeXBlTmFtZSA9ICJURVhUIjsKICAgICAgICBzbWFsbGludFR5\ncGVOYW1lID0gIklOVDgiOwogICAgICAgIHRpbnlpbnRUeXBlTmFtZSA9ICJJ\nTlQ4IjsKICAgICAgICBmbG9hdFR5cGVOYW1lID0gIkZMT0FUIjsKICAgICAg\nICBiaXRUeXBlTmFtZSA9ICJCT09MRUFOIjsKICAgICAgICBibG9iVHlwZU5h\nbWUgPSAiQllURSI7CiAgICAgICAgZG91YmxlVHlwZU5hbWUgPSAiTlVNRVJJ\nQygzMiwyMCkiOwogICAgICAgIGRhdGVUeXBlTmFtZSA9ICJEQVRFIjsKICAg\nICAgICB0aW1lc3RhbXBUeXBlTmFtZSA9ICJEQVRFIjsKICAgICAgICBkb3Vi\nbGVUeXBlTmFtZSA9ICJOVU1FUklDKDMyLDIwKSI7CiAgICAgICAgZmxvYXRU\neXBlTmFtZSA9ICJSRUFMIjsKICAgICAgICBiaWdpbnRUeXBlTmFtZSA9ICJO\nVU1FUklDKDMyLDApIjsKICAgICAgICBkb3VibGVUeXBlTmFtZSA9ICJET1VC\nTEUgUFJFQ0lTSU9OIjsKICAgICAgICBmaXhlZFNpemVUeXBlTmFtZVNldC5h\nZGRBbGwoQXJyYXlzLmFzTGlzdChuZXcgU3RyaW5nW117CiAgICAgICAgICAg\nICJCWVRFIiwgIkRPVUJMRSBQUkVDSVNJT04iLCAiSU5URVJWQUwiLCAiU01B\nTExGTE9BVCIsICJURVhUIiwKICAgICAgICAgICAgIklOVDgiLAogICAgICAg\nIH0pKTsKCiAgICAgICAgc3VwcG9ydHNRdWVyeVRpbWVvdXQgPSBmYWxzZTsK\nICAgICAgICBzdXBwb3J0c011bHRpcGxlTm9udHJhbnNhY3Rpb25hbFJlc3Vs\ndFNldHMgPSBmYWxzZTsKICAgICAgICBzdXBwb3J0c0xvY2tpbmdXaXRoRGlz\ndGluY3RDbGF1c2UgPSBmYWxzZTsKICAgICAgICBzdXBwb3J0c0xvY2tpbmdX\naXRoTXVsdGlwbGVUYWJsZXMgPSBmYWxzZTsKICAgICAgICBzdXBwb3J0c0xv\nY2tpbmdXaXRoT3JkZXJDbGF1c2UgPSBmYWxzZTsKCiAgICAgICAgLy8gdGhl\nIGluZm9ybWl4IEpEQkMgZHJpdmVycyBoYXZlIHByb2JsZW1zIHdpdGggdXNp\nbmcgdGhlCiAgICAgICAgLy8gc2NoZW1hIG5hbWUgaW4gcmVmbGVjdGlvbiBv\nbiBjb2x1bW5zIGFuZCB0YWJsZXMKICAgICAgICBzdXBwb3J0c1NjaGVtYUZv\nckdldENvbHVtbnMgPSBmYWxzZTsKICAgICAgICBzdXBwb3J0c1NjaGVtYUZv\nckdldFRhYmxlcyA9IGZhbHNlOwoKICAgICAgICAvLyBJbmZvcm1peCBkb2Vz\nbid0IHN1cHBvcnQgYWxpYXNlcyBpbiBkZWxldGVzIGlmIHRoZSB0YWJsZSBo\nYXMgYW4gaW5kZXgKICAgICAgICBhbGxvd3NBbGlhc0luQnVsa0NsYXVzZSA9\nIGZhbHNlOwogICAgICAgIAogICAgICAgIHN1cHBvcnRzU3Vic2VsZWN0ID0g\nZmFsc2U7CiAgICB9CgogICAgcHVibGljIHZvaWQgY29ubmVjdGVkQ29uZmln\ndXJhdGlvbihDb25uZWN0aW9uIGNvbm4pCiAgICAgICAgdGhyb3dzIFNRTEV4\nY2VwdGlvbiB7CiAgICAgICAgc3VwZXIuY29ubmVjdGVkQ29uZmlndXJhdGlv\nbihjb25uKTsKICAgICAgICBpZiAoZHJpdmVyVmVuZG9yID09IG51bGwpIHsK\nICAgICAgICAgICAgRGF0YWJhc2VNZXRhRGF0YSBtZXRhID0gY29ubi5nZXRN\nZXRhRGF0YSgpOwogICAgICAgICAgICBpZiAoIkluZm9ybWl4Ii5lcXVhbHNJ\nZ25vcmVDYXNlKG1ldGEuZ2V0RHJpdmVyTmFtZSgpKSkKICAgICAgICAgICAg\nICAgIGRyaXZlclZlbmRvciA9IFZFTkRPUl9EQVRBRElSRUNUOwogICAgICAg\nICAgICBlbHNlCiAgICAgICAgICAgICAgICBkcml2ZXJWZW5kb3IgPSBWRU5E\nT1JfT1RIRVI7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBDb2x1bW5b\nXSBnZXRDb2x1bW5zKERhdGFiYXNlTWV0YURhdGEgbWV0YSwgU3RyaW5nIGNh\ndGFsb2csCiAgICAgICAgU3RyaW5nIHNjaGVtYU5hbWUsIFN0cmluZyB0YWJs\nZU5hbWUsIFN0cmluZyBjb2x1bW5OYW1lLCBDb25uZWN0aW9uIGNvbm4pCiAg\nICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgQ29sdW1uW10g\nY29scyA9IHN1cGVyLmdldENvbHVtbnMobWV0YSwgY2F0YWxvZywgc2NoZW1h\nTmFtZSwgdGFibGVOYW1lLAogICAgICAgICAgICBjb2x1bW5OYW1lLCBjb25u\nKTsKCiAgICAgICAgLy8gdHJlYXQgbG9ndmFyY2hhciBhcyBjbG9iCiAgICAg\nICAgZm9yIChpbnQgaSA9IDA7IGNvbHMgIT0gbnVsbCAmJiBpIDwgY29scy5s\nZW5ndGg7IGkrKykKICAgICAgICAgICAgaWYgKGNvbHNbaV0uZ2V0VHlwZSgp\nID09IFR5cGVzLkxPTkdWQVJDSEFSKQogICAgICAgICAgICAgICAgY29sc1tp\nXS5zZXRUeXBlKFR5cGVzLkNMT0IpOwogICAgICAgIHJldHVybiBjb2xzOwog\nICAgfQoKICAgIHB1YmxpYyBDb2x1bW4gbmV3Q29sdW1uKFJlc3VsdFNldCBj\nb2xNZXRhKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAg\nIENvbHVtbiBjb2wgPSBzdXBlci5uZXdDb2x1bW4oY29sTWV0YSk7CiAgICAg\nICAgaWYgKHN3YXBTY2hlbWFBbmRDYXRhbG9nKQogICAgICAgICAgICBjb2wu\nc2V0U2NoZW1hTmFtZShjb2xNZXRhLmdldFN0cmluZygiVEFCTEVfQ0FUIikp\nOwogICAgICAgIHJldHVybiBjb2w7CiAgICB9CgogICAgcHVibGljIFByaW1h\ncnlLZXkgbmV3UHJpbWFyeUtleShSZXN1bHRTZXQgcGtNZXRhKQogICAgICAg\nIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIFByaW1hcnlLZXkgcGsg\nPSBzdXBlci5uZXdQcmltYXJ5S2V5KHBrTWV0YSk7CiAgICAgICAgaWYgKHN3\nYXBTY2hlbWFBbmRDYXRhbG9nKQogICAgICAgICAgICBway5zZXRTY2hlbWFO\nYW1lKHBrTWV0YS5nZXRTdHJpbmcoIlRBQkxFX0NBVCIpKTsKICAgICAgICBy\nZXR1cm4gcGs7CiAgICB9CgogICAgcHVibGljIEluZGV4IG5ld0luZGV4KFJl\nc3VsdFNldCBpZHhNZXRhKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24g\newogICAgICAgIEluZGV4IGlkeCA9IHN1cGVyLm5ld0luZGV4KGlkeE1ldGEp\nOwogICAgICAgIGlmIChzd2FwU2NoZW1hQW5kQ2F0YWxvZykKICAgICAgICAg\nICAgaWR4LnNldFNjaGVtYU5hbWUoaWR4TWV0YS5nZXRTdHJpbmcoIlRBQkxF\nX0NBVCIpKTsKICAgICAgICByZXR1cm4gaWR4OwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHNldEJvb2xlYW4oUHJlcGFyZWRTdGF0ZW1lbnQgc3RtbnQsIGlu\ndCBpZHgsIGJvb2xlYW4gdmFsLAogICAgICAgIENvbHVtbiBjb2wpCiAgICAg\nICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgLy8gaW5mb3JtaXgg\nYWN0dWFsbHkgcmVxdWlyZXMgdGhhdCBhIGJvb2xlYW4gYmUgc2V0OiBpdCBj\nYW5ub3QKICAgICAgICAvLyBoYW5kbGUgYSBudW1lcmljIGFyZ3VtZW50CiAg\nICAgICAgc3RtbnQuc2V0Qm9vbGVhbihpZHgsIHZhbCk7CiAgICB9CgogICAg\ncHVibGljIFN0cmluZ1tdIGdldENyZWF0ZVRhYmxlU1FMKFRhYmxlIHRhYmxl\nKSB7CiAgICAgICAgU3RyaW5nW10gY3JlYXRlID0gc3VwZXIuZ2V0Q3JlYXRl\nVGFibGVTUUwodGFibGUpOwogICAgICAgIGNyZWF0ZVswXSA9IGNyZWF0ZVsw\nXSArICIgTE9DSyBNT0RFIFJPVyI7CiAgICAgICAgcmV0dXJuIGNyZWF0ZTsK\nICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nW10gZ2V0QWRkUHJpbWFyeUtleVNR\nTChQcmltYXJ5S2V5IHBrKSB7CiAgICAgICAgU3RyaW5nIHBrc3FsID0gZ2V0\nUHJpbWFyeUtleUNvbnN0cmFpbnRTUUwocGspOwogICAgICAgIGlmIChwa3Nx\nbCA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gbmV3IFN0cmluZ1swXTsK\nICAgICAgICByZXR1cm4gbmV3IFN0cmluZ1tdeyAiQUxURVIgVEFCTEUgIgog\nICAgICAgICAgICArIGdldEZ1bGxOYW1lKHBrLmdldFRhYmxlKCksIGZhbHNl\nKSArICIgQUREIENPTlNUUkFJTlQgIiArIHBrc3FsIH07CiAgICB9CgogICAg\ncHVibGljIFN0cmluZ1tdIGdldEFkZEZvcmVpZ25LZXlTUUwoRm9yZWlnbktl\neSBmaykgewogICAgICAgIFN0cmluZyBma3NxbCA9IGdldEZvcmVpZ25LZXlD\nb25zdHJhaW50U1FMKGZrKTsKICAgICAgICBpZiAoZmtzcWwgPT0gbnVsbCkK\nICAgICAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmdbMF07CiAgICAgICAgcmV0\ndXJuIG5ldyBTdHJpbmdbXXsgIkFMVEVSIFRBQkxFICIKICAgICAgICAgICAg\nKyBnZXRGdWxsTmFtZShmay5nZXRUYWJsZSgpLCBmYWxzZSkgKyAiIEFERCBD\nT05TVFJBSU5UICIgKyBma3NxbCB9OwogICAgfQoKICAgIHB1YmxpYyBib29s\nZWFuIHN1cHBvcnRzUmFuZG9tQWNjZXNzUmVzdWx0U2V0KFNlbGVjdCBzZWws\nCiAgICAgICAgYm9vbGVhbiBmb3JVcGRhdGUpIHsKICAgICAgICByZXR1cm4g\nIWZvclVwZGF0ZSAmJiAhc2VsLmlzTG9iKCkKICAgICAgICAgICAgJiYgc3Vw\nZXIuc3VwcG9ydHNSYW5kb21BY2Nlc3NSZXN1bHRTZXQoc2VsLCBmb3JVcGRh\ndGUpOwogICAgfQoKICAgIHB1YmxpYyBDb25uZWN0aW9uIGRlY29yYXRlKENv\nbm5lY3Rpb24gY29ubikKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsK\nICAgICAgICBjb25uID0gc3VwZXIuZGVjb3JhdGUoY29ubik7CgogICAgICAg\nIC8vIGlmIHdlIGhhdmVuJ3QgYWxyZWFkeSBkb25lIHNvLCBpbml0aWFsaXpl\nIHRoZSBsb2NrIG1vZGUgb2YgdGhlCiAgICAgICAgLy8gY29ubmVjdGlvbgog\nICAgICAgIGlmIChsb2NrTW9kZUVuYWJsZWQgJiYgX3NlZW5Db25uZWN0aW9u\ncy5hZGQoY29ubikpIHsKICAgICAgICAgICAgU3RyaW5nIHNxbCA9ICJTRVQg\nTE9DSyBNT0RFIFRPIFdBSVQiOwogICAgICAgICAgICBpZiAobG9ja1dhaXRT\nZWNvbmRzID4gMCkKICAgICAgICAgICAgICAgIHNxbCA9IHNxbCArICIgIiAr\nIGxvY2tXYWl0U2Vjb25kczsKCiAgICAgICAgICAgIFN0YXRlbWVudCBzdG1u\ndCA9IG51bGw7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBz\ndG1udCA9IGNvbm4uY3JlYXRlU3RhdGVtZW50KCk7CiAgICAgICAgICAgICAg\nICBzdG1udC5leGVjdXRlVXBkYXRlKHNxbCk7CiAgICAgICAgICAgIH0gY2F0\nY2ggKFNRTEV4Y2VwdGlvbiBzZSkgewogICAgICAgICAgICAgICAgdGhyb3cg\nU1FMRXhjZXB0aW9ucy5nZXRTdG9yZShzZSwgdGhpcyk7CiAgICAgICAgICAg\nIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICBpZiAoc3RtbnQgIT0gbnVs\nbCkKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAg\nICAgICAgICBzdG1udC5jbG9zZSgpOwogICAgICAgICAgICAgICAgICAgIH0g\nY2F0Y2ggKFNRTEV4Y2VwdGlvbiBzZSkgewogICAgICAgICAgICAgICAgICAg\nIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gdGhlIGRh\ndGFkaXJlY3QgZHJpdmVyIHJlcXVpcmVzIHRoYXQgd2UgaXNzdWUgYSByb2xs\nYmFjayBiZWZvcmUgdXNpbmcKICAgICAgICAvLyBlYWNoIGNvbm5lY3Rpb24K\nICAgICAgICBpZiAoVkVORE9SX0RBVEFESVJFQ1QuZXF1YWxzSWdub3JlQ2Fz\nZShkcml2ZXJWZW5kb3IpKQogICAgICAgICAgICB0cnkgewogICAgICAgICAg\nICAgICAgY29ubi5yb2xsYmFjaygpOwogICAgICAgICAgICB9IGNhdGNoIChT\nUUxFeGNlcHRpb24gc2UpIHsKICAgICAgICAgICAgfQogICAgICAgIHJldHVy\nbiBjb25uOwogICAgfQp9Cg==\n","encoding":"base64"}

