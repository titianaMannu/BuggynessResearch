{"sha":"2db1537f4e5fb90558e0d3e421ab5bc327f92bfc","node_id":"MDQ6QmxvYjIwNjM2NDoyZGIxNTM3ZjRlNWZiOTA1NThlMGQzZTQyMWFiNWJjMzI3ZjkyYmZj","size":15660,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/2db1537f4e5fb90558e0d3e421ab5bc327f92bfc","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWw7CgppbXBvcnQg\namF2YS5pby5JbnB1dFN0cmVhbTsKaW1wb3J0IGphdmEuaW8uUmVhZGVyOwpp\nbXBvcnQgamF2YS5tYXRoLkJpZ0RlY2ltYWw7CmltcG9ydCBqYXZhLm1hdGgu\nQmlnSW50ZWdlcjsKaW1wb3J0IGphdmEuc3FsLkFycmF5OwppbXBvcnQgamF2\nYS5zcWwuQmxvYjsKaW1wb3J0IGphdmEuc3FsLkNsb2I7CmltcG9ydCBqYXZh\nLnNxbC5Db25uZWN0aW9uOwppbXBvcnQgamF2YS5zcWwuUmVmOwppbXBvcnQg\namF2YS5zcWwuUmVzdWx0U2V0OwppbXBvcnQgamF2YS5zcWwuU1FMRXhjZXB0\naW9uOwppbXBvcnQgamF2YS5zcWwuU3RhdGVtZW50OwppbXBvcnQgamF2YS5z\ncWwuVGltZTsKaW1wb3J0IGphdmEuc3FsLlRpbWVzdGFtcDsKaW1wb3J0IGph\ndmEuc3FsLlR5cGVzOwppbXBvcnQgamF2YS51dGlsLkNhbGVuZGFyOwppbXBv\ncnQgamF2YS51dGlsLkRhdGU7CmltcG9ydCBqYXZhLnV0aWwuTG9jYWxlOwpp\nbXBvcnQgamF2YS51dGlsLk1hcDsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5rZXJuZWwuSkRCQ1N0b3JlOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmpkYmMubWV0YS5KYXZhU1FMVHlwZXM7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuQ29sdW1uOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLm1ldGEuSmF2YVR5cGVzOwppbXBvcnQgc2VycC51dGls\nLk51bWJlcnM7CgovKioKICogQmFzZSB7QGxpbmsgUmVzdWx0fSBpbXBsZW1l\nbnRhdGlvbiB3cmFwcGVkIGFyb3VuZCBhIHJlc3VsdCBzZXQuCiAqIENvbHVt\nbiBvYmplY3RzLCBjb2x1bW4gbmFtZXMsIG9yIGNvbHVtbiBpbmRleGVzIChh\ncyA8Y29kZT5OdW1iZXI8L2NvZGU+CiAqIGluc3RhbmNlcykgY2FuIGJlIHVz\nZWQgdG8gcmV0cmlldmUgcmVzdWx0IHNldCBkYXRhLgogKgogKiBAYXV0aG9y\nIEFiZSBXaGl0ZQogKi8KcHVibGljIGNsYXNzIFJlc3VsdFNldFJlc3VsdAog\nICAgZXh0ZW5kcyBBYnN0cmFjdFJlc3VsdCB7CgogICAgcHJpdmF0ZSBmaW5h\nbCBDb25uZWN0aW9uIF9jb25uOwogICAgcHJpdmF0ZSBmaW5hbCBTdGF0ZW1l\nbnQgX3N0bW50OwogICAgcHJpdmF0ZSBmaW5hbCBSZXN1bHRTZXQgX3JzOwog\nICAgcHJpdmF0ZSBmaW5hbCBEQkRpY3Rpb25hcnkgX2RpY3Q7CiAgICBwcml2\nYXRlIGJvb2xlYW4gX2Nsb3NlQ29ubiA9IHRydWU7CiAgICBwcml2YXRlIGlu\ndCBfcm93ID0gLTE7CiAgICBwcml2YXRlIGludCBfc2l6ZSA9IC0xOwoKICAg\nIC8vIG9wdGlvbmFsOyB1c2VkIHRvIGRlc2VyaWFsaXplIGJsb2JzIGNvbnRh\naW5pbmcgcmVmcyB0byBwZXJzaXN0ZW50IG9ianMKICAgIHByaXZhdGUgSkRC\nQ1N0b3JlIF9zdG9yZSA9IG51bGw7CgogICAgLyoqCiAgICAgKiBDb25zdHJ1\nY3Rvci4KICAgICAqLwogICAgcHVibGljIFJlc3VsdFNldFJlc3VsdChDb25u\nZWN0aW9uIGNvbm4sIFN0YXRlbWVudCBzdG1udCwKICAgICAgICBSZXN1bHRT\nZXQgcnMsIERCRGljdGlvbmFyeSBkaWN0KSB7CiAgICAgICAgaWYgKHN0bW50\nID09IG51bGwpCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBz\ndG1udCA9IHJzLmdldFN0YXRlbWVudCgpOwogICAgICAgICAgICB9IGNhdGNo\nIChUaHJvd2FibGUgdCkgewogICAgICAgICAgICB9CgogICAgICAgIF9jb25u\nID0gY29ubjsKICAgICAgICBfc3RtbnQgPSBzdG1udDsKICAgICAgICBfcnMg\nPSByczsKICAgICAgICBfZGljdCA9IGRpY3Q7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBDb25zdHJ1Y3Rvci4KICAgICAqLwogICAgcHVibGljIFJlc3VsdFNl\ndFJlc3VsdChDb25uZWN0aW9uIGNvbm4sIFN0YXRlbWVudCBzdG1udCwKICAg\nICAgICBSZXN1bHRTZXQgcnMsIEpEQkNTdG9yZSBzdG9yZSkgewogICAgICAg\nIHRoaXMoY29ubiwgc3RtbnQsIHJzLCBzdG9yZS5nZXREQkRpY3Rpb25hcnko\nKSk7CiAgICAgICAgc2V0U3RvcmUoc3RvcmUpOwogICAgfQoKICAgIC8qKgog\nICAgICogSkRCQyAyIGNvbnN0cnVjdG9yLiBSZWxpZXMgb24gYmVpbmcgYWJs\nZSB0byByZXRyaWV2ZSB0aGUgc3RhdGVtZW50CiAgICAgKiBmcm9tIHRoZSBy\nZXN1bHQgc2V0LCBhbmQgdGhlIGNvbm5lY3Rpb24gZnJvbSB0aGUgc3RhdGVt\nZW50LgogICAgICovCiAgICBwdWJsaWMgUmVzdWx0U2V0UmVzdWx0KFJlc3Vs\ndFNldCBycywgREJEaWN0aW9uYXJ5IGRpY3QpCiAgICAgICAgdGhyb3dzIFNR\nTEV4Y2VwdGlvbiB7CiAgICAgICAgX3N0bW50ID0gcnMuZ2V0U3RhdGVtZW50\nKCk7CiAgICAgICAgX2Nvbm4gPSBfc3RtbnQuZ2V0Q29ubmVjdGlvbigpOwog\nICAgICAgIF9ycyA9IHJzOwogICAgICAgIF9kaWN0ID0gZGljdDsKICAgIH0K\nCiAgICAvKioKICAgICAqIEpEQkMgMiBjb25zdHJ1Y3Rvci4gUmVsaWVzIG9u\nIGJlaW5nIGFibGUgdG8gcmV0cmlldmUgdGhlIHN0YXRlbWVudAogICAgICog\nZnJvbSB0aGUgcmVzdWx0IHNldCwgYW5kIHRoZSBjb25uZWN0aW9uIGZyb20g\ndGhlIHN0YXRlbWVudC4KICAgICAqLwogICAgcHVibGljIFJlc3VsdFNldFJl\nc3VsdChSZXN1bHRTZXQgcnMsIEpEQkNTdG9yZSBzdG9yZSkKICAgICAgICB0\naHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICB0aGlzKHJzLCBzdG9yZS5n\nZXREQkRpY3Rpb25hcnkoKSk7CiAgICAgICAgc2V0U3RvcmUoc3RvcmUpOwog\nICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBzdGF0ZW1lbnQgdGhh\ndCBwcm9kdWNlZCB0aGlzIHJlc3VsdC4KICAgICAqLwogICAgcHVibGljIFN0\nYXRlbWVudCBnZXRTdGF0ZW1lbnQoKSB7CiAgICAgICAgcmV0dXJuIF9zdG1u\ndDsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgYmFja2luZyBy\nZXN1bHQgc2V0LgogICAgICovCiAgICBwdWJsaWMgUmVzdWx0U2V0IGdldFJl\nc3VsdFNldCgpIHsKICAgICAgICByZXR1cm4gX3JzOwogICAgfQoKICAgIC8q\nKgogICAgICogUmV0dXJuIHRoZSBkaWN0aW9uYXJ5IGluIHVzZS4KICAgICAq\nLwogICAgcHVibGljIERCRGljdGlvbmFyeSBnZXREQkRpY3Rpb25hcnkoKSB7\nCiAgICAgICAgcmV0dXJuIF9kaWN0OwogICAgfQoKICAgIC8qKgogICAgICog\nT3B0aW9uYWwgc3RvcmUgbWFuYWdlciB1c2VkIHRvIGRlc2VyaWFsaXplIGJs\nb2JzIGNvbnRhaW5pbmcKICAgICAqIHJlZmVyZW5jZXMgdG8gcGVyc2lzdGVu\ndCBvYmplY3RzLgogICAgICovCiAgICBwdWJsaWMgSkRCQ1N0b3JlIGdldFN0\nb3JlKCkgewogICAgICAgIHJldHVybiBfc3RvcmU7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBPcHRpb25hbCBzdG9yZSBtYW5hZ2VyIHVzZWQgdG8gZGVzZXJp\nYWxpemUgYmxvYnMgY29udGFpbmluZwogICAgICogcmVmZXJlbmNlcyB0byBw\nZXJzaXN0ZW50IG9iamVjdHMuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNl\ndFN0b3JlKEpEQkNTdG9yZSBzdG9yZSkgewogICAgICAgIF9zdG9yZSA9IHN0\nb3JlOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciB0byBjbG9zZSB0\naGUgYmFja2luZyBjb25uZWN0aW9uIHdoZW4gdGhpcyByZXN1bHQgaXMgY2xv\nc2VkLgogICAgICogRGVmYXVsdHMgdG8gdHJ1ZS4KICAgICAqLwogICAgcHVi\nbGljIGJvb2xlYW4gZ2V0Q2xvc2VDb25uZWN0aW9uKCkgewogICAgICAgIHJl\ndHVybiBfY2xvc2VDb25uOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhl\nciB0byBjbG9zZSB0aGUgYmFja2luZyBjb25uZWN0aW9uIHdoZW4gdGhpcyBy\nZXN1bHQgaXMgY2xvc2VkLgogICAgICogRGVmYXVsdHMgdG8gdHJ1ZS4KICAg\nICAqLwogICAgcHVibGljIHZvaWQgc2V0Q2xvc2VDb25uZWN0aW9uKGJvb2xl\nYW4gY2xvc2VDb25uKSB7CiAgICAgICAgX2Nsb3NlQ29ubiA9IGNsb3NlQ29u\nbjsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjbG9zZSgpIHsKICAgICAgICBz\ndXBlci5jbG9zZSgpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIF9ycy5j\nbG9zZSgpOwogICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBzZSkgewog\nICAgICAgIH0KICAgICAgICBpZiAoX3N0bW50ICE9IG51bGwpCiAgICAgICAg\nICAgIHRyeSB7CiAgICAgICAgICAgICAgICBfc3RtbnQuY2xvc2UoKTsKICAg\nICAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIHNlKSB7CiAgICAgICAg\nICAgIH0KICAgICAgICBpZiAoX2Nsb3NlQ29ubikKICAgICAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgICAgIF9jb25uLmNsb3NlKCk7CiAgICAgICAgICAg\nIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBzZSkgewogICAgICAgICAgICB9CiAg\nICB9CgogICAgcHVibGljIGJvb2xlYW4gc3VwcG9ydHNSYW5kb21BY2Nlc3Mo\nKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVy\nbiBfcnMuZ2V0VHlwZSgpICE9IFJlc3VsdFNldC5UWVBFX0ZPUldBUkRfT05M\nWTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgYm9vbGVhbiBhYnNvbHV0ZUludGVy\nbmFsKGludCByb3cpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAg\nICAgICAgaWYgKHJvdyA9PSArK19yb3cpCiAgICAgICAgICAgIHJldHVybiBf\ncnMubmV4dCgpOwoKICAgICAgICAvLyByYW5kb20gYWNjZXNzCiAgICAgICAg\nX3JzLmFic29sdXRlKHJvdyArIDEpOwogICAgICAgIGlmIChfcnMuZ2V0Um93\nKCkgPT0gMCkgewogICAgICAgICAgICBfcm93ID0gLTE7CiAgICAgICAgICAg\nIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgX3JvdyA9IHJvdzsK\nICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgYm9v\nbGVhbiBuZXh0SW50ZXJuYWwoKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRp\nb24gewogICAgICAgIF9yb3crKzsKICAgICAgICByZXR1cm4gX3JzLm5leHQo\nKTsKICAgIH0KCiAgICBwdWJsaWMgaW50IHNpemUoKQogICAgICAgIHRocm93\ncyBTUUxFeGNlcHRpb24gewogICAgICAgIGlmIChfc2l6ZSA9PSAtMSkgewog\nICAgICAgICAgICBfcnMubGFzdCgpOwogICAgICAgICAgICBfc2l6ZSA9IF9y\ncy5nZXRSb3coKTsKICAgICAgICAgICAgaWYgKF9yb3cgPT0gLTEpCiAgICAg\nICAgICAgICAgICBfcnMuYmVmb3JlRmlyc3QoKTsKICAgICAgICAgICAgZWxz\nZQogICAgICAgICAgICAgICAgX3JzLmFic29sdXRlKF9yb3cgKyAxKTsKICAg\nICAgICB9CiAgICAgICAgcmV0dXJuIF9zaXplOwogICAgfQoKICAgIHByb3Rl\nY3RlZCBib29sZWFuIGNvbnRhaW5zSW50ZXJuYWwoT2JqZWN0IG9iaiwgSm9p\nbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAg\nICAgcmV0dXJuICgoTnVtYmVyKSB0cmFuc2xhdGUob2JqLCBqb2lucykpLmlu\ndFZhbHVlKCkgPiAwOwogICAgfQoKICAgIHByb3RlY3RlZCBBcnJheSBnZXRB\ncnJheUludGVybmFsKE9iamVjdCBvYmosIEpvaW5zIGpvaW5zKQogICAgICAg\nIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBfZGljdC5n\nZXRBcnJheShfcnMsICgoTnVtYmVyKSBvYmopLmludFZhbHVlKCkpOwogICAg\nfQoKICAgIHByb3RlY3RlZCBJbnB1dFN0cmVhbSBnZXRBc2NpaVN0cmVhbUlu\ndGVybmFsKE9iamVjdCBvYmosIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93\ncyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBfZGljdC5nZXRBc2Np\naVN0cmVhbShfcnMsICgoTnVtYmVyKSBvYmopLmludFZhbHVlKCkpOwogICAg\nfQoKICAgIHByb3RlY3RlZCBCaWdEZWNpbWFsIGdldEJpZ0RlY2ltYWxJbnRl\ncm5hbChPYmplY3Qgb2JqLCBKb2lucyBqb2lucykKICAgICAgICB0aHJvd3Mg\nU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gX2RpY3QuZ2V0QmlnRGVj\naW1hbChfcnMsICgoTnVtYmVyKSBvYmopLmludFZhbHVlKCkpOwogICAgfQoK\nICAgIHByb3RlY3RlZCBOdW1iZXIgZ2V0TnVtYmVySW50ZXJuYWwoT2JqZWN0\nIG9iaiwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlv\nbiB7CiAgICAgICAgcmV0dXJuIF9kaWN0LmdldE51bWJlcihfcnMsICgoTnVt\nYmVyKSBvYmopLmludFZhbHVlKCkpOwogICAgfQoKICAgIHByb3RlY3RlZCBC\naWdJbnRlZ2VyIGdldEJpZ0ludGVnZXJJbnRlcm5hbChPYmplY3Qgb2JqLCBK\nb2lucyBqb2lucykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAg\nICAgICByZXR1cm4gX2RpY3QuZ2V0QmlnSW50ZWdlcihfcnMsICgoTnVtYmVy\nKSBvYmopLmludFZhbHVlKCkpOwogICAgfQoKICAgIHByb3RlY3RlZCBJbnB1\ndFN0cmVhbSBnZXRCaW5hcnlTdHJlYW1JbnRlcm5hbChPYmplY3Qgb2JqLCBK\nb2lucyBqb2lucykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAg\nICAgICByZXR1cm4gX2RpY3QuZ2V0QmluYXJ5U3RyZWFtKF9ycywgKChOdW1i\nZXIpIG9iaikuaW50VmFsdWUoKSk7CiAgICB9CgogICAgcHJvdGVjdGVkIEJs\nb2IgZ2V0QmxvYkludGVybmFsKE9iamVjdCBvYmosIEpvaW5zIGpvaW5zKQog\nICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBf\nZGljdC5nZXRCbG9iKF9ycywgKChOdW1iZXIpIG9iaikuaW50VmFsdWUoKSk7\nCiAgICB9CgogICAgcHJvdGVjdGVkIGJvb2xlYW4gZ2V0Qm9vbGVhbkludGVy\nbmFsKE9iamVjdCBvYmosIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93cyBT\nUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBfZGljdC5nZXRCb29sZWFu\nKF9ycywgKChOdW1iZXIpIG9iaikuaW50VmFsdWUoKSk7CiAgICB9CgogICAg\ncHJvdGVjdGVkIGJ5dGUgZ2V0Qnl0ZUludGVybmFsKE9iamVjdCBvYmosIEpv\naW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAg\nICAgIHJldHVybiBfZGljdC5nZXRCeXRlKF9ycywgKChOdW1iZXIpIG9iaiku\naW50VmFsdWUoKSk7CiAgICB9CgogICAgcHJvdGVjdGVkIGJ5dGVbXSBnZXRC\neXRlc0ludGVybmFsKE9iamVjdCBvYmosIEpvaW5zIGpvaW5zKQogICAgICAg\nIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBfZGljdC5n\nZXRCeXRlcyhfcnMsICgoTnVtYmVyKSBvYmopLmludFZhbHVlKCkpOwogICAg\nfQoKICAgIHByb3RlY3RlZCBDYWxlbmRhciBnZXRDYWxlbmRhckludGVybmFs\nKE9iamVjdCBvYmosIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxF\neGNlcHRpb24gewogICAgICAgIHJldHVybiBfZGljdC5nZXRDYWxlbmRhcihf\ncnMsICgoTnVtYmVyKSBvYmopLmludFZhbHVlKCkpOwogICAgfQoKICAgIHBy\nb3RlY3RlZCBjaGFyIGdldENoYXJJbnRlcm5hbChPYmplY3Qgb2JqLCBKb2lu\ncyBqb2lucykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAg\nICByZXR1cm4gX2RpY3QuZ2V0Q2hhcihfcnMsICgoTnVtYmVyKSBvYmopLmlu\ndFZhbHVlKCkpOwogICAgfQoKICAgIHByb3RlY3RlZCBSZWFkZXIgZ2V0Q2hh\ncmFjdGVyU3RyZWFtSW50ZXJuYWwoT2JqZWN0IG9iaiwgSm9pbnMgam9pbnMp\nCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJu\nIF9kaWN0LmdldENoYXJhY3RlclN0cmVhbShfcnMsICgoTnVtYmVyKSBvYmop\nLmludFZhbHVlKCkpOwogICAgfQoKICAgIHByb3RlY3RlZCBDbG9iIGdldENs\nb2JJbnRlcm5hbChPYmplY3Qgb2JqLCBKb2lucyBqb2lucykKICAgICAgICB0\naHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gX2RpY3QuZ2V0\nQ2xvYihfcnMsICgoTnVtYmVyKSBvYmopLmludFZhbHVlKCkpOwogICAgfQoK\nICAgIHByb3RlY3RlZCBEYXRlIGdldERhdGVJbnRlcm5hbChPYmplY3Qgb2Jq\nLCBKb2lucyBqb2lucykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsK\nICAgICAgICByZXR1cm4gX2RpY3QuZ2V0RGF0ZShfcnMsICgoTnVtYmVyKSBv\nYmopLmludFZhbHVlKCkpOwogICAgfQoKICAgIHByb3RlY3RlZCBqYXZhLnNx\nbC5EYXRlIGdldERhdGVJbnRlcm5hbChPYmplY3Qgb2JqLCBDYWxlbmRhciBj\nYWwsCiAgICAgICAgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4\nY2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIF9kaWN0LmdldERhdGUoX3JzLCAo\nKE51bWJlcikgb2JqKS5pbnRWYWx1ZSgpLCBjYWwpOwogICAgfQoKICAgIHBy\nb3RlY3RlZCBkb3VibGUgZ2V0RG91YmxlSW50ZXJuYWwoT2JqZWN0IG9iaiwg\nSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAg\nICAgICAgcmV0dXJuIF9kaWN0LmdldERvdWJsZShfcnMsICgoTnVtYmVyKSBv\nYmopLmludFZhbHVlKCkpOwogICAgfQoKICAgIHByb3RlY3RlZCBmbG9hdCBn\nZXRGbG9hdEludGVybmFsKE9iamVjdCBvYmosIEpvaW5zIGpvaW5zKQogICAg\nICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBfZGlj\ndC5nZXRGbG9hdChfcnMsICgoTnVtYmVyKSBvYmopLmludFZhbHVlKCkpOwog\nICAgfQoKICAgIHByb3RlY3RlZCBpbnQgZ2V0SW50SW50ZXJuYWwoT2JqZWN0\nIG9iaiwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlv\nbiB7CiAgICAgICAgcmV0dXJuIF9kaWN0LmdldEludChfcnMsICgoTnVtYmVy\nKSBvYmopLmludFZhbHVlKCkpOwogICAgfQoKICAgIHByb3RlY3RlZCBMb2Nh\nbGUgZ2V0TG9jYWxlSW50ZXJuYWwoT2JqZWN0IG9iaiwgSm9pbnMgam9pbnMp\nCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJu\nIF9kaWN0LmdldExvY2FsZShfcnMsICgoTnVtYmVyKSBvYmopLmludFZhbHVl\nKCkpOwogICAgfQoKICAgIHByb3RlY3RlZCBsb25nIGdldExvbmdJbnRlcm5h\nbChPYmplY3Qgb2JqLCBKb2lucyBqb2lucykKICAgICAgICB0aHJvd3MgU1FM\nRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gX2RpY3QuZ2V0TG9uZyhfcnMs\nICgoTnVtYmVyKSBvYmopLmludFZhbHVlKCkpOwogICAgfQoKICAgIHByb3Rl\nY3RlZCBPYmplY3QgZ2V0T2JqZWN0SW50ZXJuYWwoT2JqZWN0IG9iaiwgaW50\nIG1ldGFUeXBlQ29kZSwKICAgICAgICBPYmplY3QgYXJnLCBKb2lucyBqb2lu\ncykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBpZiAo\nbWV0YVR5cGVDb2RlID09IC0xICYmIG9iaiBpbnN0YW5jZW9mIENvbHVtbikK\nICAgICAgICAgICAgbWV0YVR5cGVDb2RlID0gKChDb2x1bW4pIG9iaikuZ2V0\nSmF2YVR5cGUoKTsKCiAgICAgICAgT2JqZWN0IHZhbCA9IG51bGw7CiAgICAg\nICAgc3dpdGNoIChtZXRhVHlwZUNvZGUpIHsKICAgICAgICAgICAgY2FzZSBK\nYXZhVHlwZXMuQk9PTEVBTjoKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMu\nQk9PTEVBTl9PQko6CiAgICAgICAgICAgICAgICB2YWwgPSAoZ2V0Qm9vbGVh\nbkludGVybmFsKG9iaiwgam9pbnMpKSA/IEJvb2xlYW4uVFJVRQogICAgICAg\nICAgICAgICAgICAgIDogQm9vbGVhbi5GQUxTRTsKICAgICAgICAgICAgICAg\nIGJyZWFrOwogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5CWVRFOgogICAg\nICAgICAgICBjYXNlIEphdmFUeXBlcy5CWVRFX09CSjoKICAgICAgICAgICAg\nICAgIHZhbCA9IG5ldyBCeXRlKGdldEJ5dGVJbnRlcm5hbChvYmosIGpvaW5z\nKSk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBK\nYXZhVHlwZXMuQ0hBUjoKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuQ0hB\nUl9PQko6CiAgICAgICAgICAgICAgICB2YWwgPSBuZXcgQ2hhcmFjdGVyKGdl\ndENoYXJJbnRlcm5hbChvYmosIGpvaW5zKSk7CiAgICAgICAgICAgICAgICBi\ncmVhazsKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuRE9VQkxFOgogICAg\nICAgICAgICBjYXNlIEphdmFUeXBlcy5ET1VCTEVfT0JKOgogICAgICAgICAg\nICAgICAgdmFsID0gbmV3IERvdWJsZShnZXREb3VibGVJbnRlcm5hbChvYmos\nIGpvaW5zKSk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAg\nY2FzZSBKYXZhVHlwZXMuRkxPQVQ6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5\ncGVzLkZMT0FUX09CSjoKICAgICAgICAgICAgICAgIHZhbCA9IG5ldyBGbG9h\ndChnZXRGbG9hdEludGVybmFsKG9iaiwgam9pbnMpKTsKICAgICAgICAgICAg\nICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5JTlQ6CiAg\nICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLklOVF9PQko6CiAgICAgICAgICAg\nICAgICB2YWwgPSBOdW1iZXJzLnZhbHVlT2YoZ2V0SW50SW50ZXJuYWwob2Jq\nLCBqb2lucykpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAg\nIGNhc2UgSmF2YVR5cGVzLkxPTkc6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5\ncGVzLkxPTkdfT0JKOgogICAgICAgICAgICAgICAgdmFsID0gTnVtYmVycy52\nYWx1ZU9mKGdldExvbmdJbnRlcm5hbChvYmosIGpvaW5zKSk7CiAgICAgICAg\nICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuU0hP\nUlQ6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLlNIT1JUX09CSjoKICAg\nICAgICAgICAgICAgIHZhbCA9IG5ldyBTaG9ydChnZXRTaG9ydEludGVybmFs\nKG9iaiwgam9pbnMpKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAg\nICAgICBjYXNlIEphdmFUeXBlcy5TVFJJTkc6CiAgICAgICAgICAgICAgICBy\nZXR1cm4gZ2V0U3RyaW5nSW50ZXJuYWwob2JqLCBqb2lucyk7CiAgICAgICAg\nICAgIGNhc2UgSmF2YVR5cGVzLk9CSkVDVDoKICAgICAgICAgICAgICAgIHJl\ndHVybiBfZGljdAogICAgICAgICAgICAgICAgICAgIC5nZXRCbG9iT2JqZWN0\nKF9ycywgKChOdW1iZXIpIG9iaikuaW50VmFsdWUoKSwgX3N0b3JlKTsKICAg\nICAgICAgICAgY2FzZSBKYXZhVHlwZXMuREFURToKICAgICAgICAgICAgICAg\nIHJldHVybiBnZXREYXRlSW50ZXJuYWwob2JqLCBqb2lucyk7CiAgICAgICAg\nICAgIGNhc2UgSmF2YVR5cGVzLkNBTEVOREFSOgogICAgICAgICAgICAgICAg\ncmV0dXJuIGdldENhbGVuZGFySW50ZXJuYWwob2JqLCBqb2lucyk7CiAgICAg\nICAgICAgIGNhc2UgSmF2YVR5cGVzLkJJR0RFQ0lNQUw6CiAgICAgICAgICAg\nICAgICByZXR1cm4gZ2V0QmlnRGVjaW1hbEludGVybmFsKG9iaiwgam9pbnMp\nOwogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5OVU1CRVI6CiAgICAgICAg\nICAgICAgICByZXR1cm4gZ2V0TnVtYmVySW50ZXJuYWwob2JqLCBqb2lucyk7\nCiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkJJR0lOVEVHRVI6CiAgICAg\nICAgICAgICAgICByZXR1cm4gZ2V0QmlnSW50ZWdlckludGVybmFsKG9iaiwg\nam9pbnMpOwogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5MT0NBTEU6CiAg\nICAgICAgICAgICAgICByZXR1cm4gZ2V0TG9jYWxlSW50ZXJuYWwob2JqLCBq\nb2lucyk7CiAgICAgICAgICAgIGNhc2UgSmF2YVNRTFR5cGVzLlNRTF9BUlJB\nWToKICAgICAgICAgICAgICAgIHJldHVybiBnZXRBcnJheUludGVybmFsKG9i\naiwgam9pbnMpOwogICAgICAgICAgICBjYXNlIEphdmFTUUxUeXBlcy5BU0NJ\nSV9TVFJFQU06CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0QXNjaWlTdHJl\nYW1JbnRlcm5hbChvYmosIGpvaW5zKTsKICAgICAgICAgICAgY2FzZSBKYXZh\nU1FMVHlwZXMuQklOQVJZX1NUUkVBTToKICAgICAgICAgICAgICAgIHJldHVy\nbiBnZXRCaW5hcnlTdHJlYW1JbnRlcm5hbChvYmosIGpvaW5zKTsKICAgICAg\nICAgICAgY2FzZSBKYXZhU1FMVHlwZXMuQkxPQjoKICAgICAgICAgICAgICAg\nIHJldHVybiBnZXRCbG9iSW50ZXJuYWwob2JqLCBqb2lucyk7CiAgICAgICAg\nICAgIGNhc2UgSmF2YVNRTFR5cGVzLkJZVEVTOgogICAgICAgICAgICAgICAg\ncmV0dXJuIGdldEJ5dGVzSW50ZXJuYWwob2JqLCBqb2lucyk7CiAgICAgICAg\nICAgIGNhc2UgSmF2YVNRTFR5cGVzLkNIQVJfU1RSRUFNOgogICAgICAgICAg\nICAgICAgcmV0dXJuIGdldENoYXJhY3RlclN0cmVhbUludGVybmFsKG9iaiwg\nam9pbnMpOwogICAgICAgICAgICBjYXNlIEphdmFTUUxUeXBlcy5DTE9COgog\nICAgICAgICAgICAgICAgcmV0dXJuIGdldENsb2JJbnRlcm5hbChvYmosIGpv\naW5zKTsKICAgICAgICAgICAgY2FzZSBKYXZhU1FMVHlwZXMuU1FMX0RBVEU6\nCiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0RGF0ZUludGVybmFsKG9iaiwg\nKENhbGVuZGFyKSBhcmcsIGpvaW5zKTsKICAgICAgICAgICAgY2FzZSBKYXZh\nU1FMVHlwZXMuU1FMX09CSkVDVDoKICAgICAgICAgICAgICAgIHJldHVybiBn\nZXRTUUxPYmplY3RJbnRlcm5hbChvYmosIChNYXApIGFyZywgam9pbnMpOwog\nICAgICAgICAgICBjYXNlIEphdmFTUUxUeXBlcy5SRUY6CiAgICAgICAgICAg\nICAgICByZXR1cm4gZ2V0UmVmSW50ZXJuYWwob2JqLCAoTWFwKSBhcmcsIGpv\naW5zKTsKICAgICAgICAgICAgY2FzZSBKYXZhU1FMVHlwZXMuVElNRToKICAg\nICAgICAgICAgICAgIHJldHVybiBnZXRUaW1lSW50ZXJuYWwob2JqLCAoQ2Fs\nZW5kYXIpIGFyZywgam9pbnMpOwogICAgICAgICAgICBjYXNlIEphdmFTUUxU\neXBlcy5USU1FU1RBTVA6CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0VGlt\nZXN0YW1wSW50ZXJuYWwob2JqLCAoQ2FsZW5kYXIpIGFyZywgam9pbnMpOwog\nICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgaWYgKG9iaiBp\nbnN0YW5jZW9mIENvbHVtbikgewogICAgICAgICAgICAgICAgICAgIENvbHVt\nbiBjb2wgPSAoQ29sdW1uKSBvYmo7CiAgICAgICAgICAgICAgICAgICAgaWYg\nKGNvbC5nZXRUeXBlKCkgPT0gVHlwZXMuQkxPQgogICAgICAgICAgICAgICAg\nICAgICAgICB8fCBjb2wuZ2V0VHlwZSgpID09IFR5cGVzLlZBUkJJTkFSWSkg\newogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2RpY3QKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIC5nZXRCbG9iT2JqZWN0KF9ycywgY29s\nLmdldEluZGV4KCksIF9zdG9yZSk7CiAgICAgICAgICAgICAgICAgICAgfQog\nICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIF9kaWN0\nLmdldE9iamVjdChfcnMsICgoTnVtYmVyKSBvYmopLmludFZhbHVlKCksIG51\nbGwpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gKF9ycy53YXNOdWxsKCkp\nID8gbnVsbCA6IHZhbDsKICAgIH0KCiAgICBwcm90ZWN0ZWQgT2JqZWN0IGdl\ndFNRTE9iamVjdEludGVybmFsKE9iamVjdCBvYmosIE1hcCBtYXAsIEpvaW5z\nIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAg\nIHJldHVybiBfZGljdC5nZXRPYmplY3QoX3JzLCAoKE51bWJlcikgb2JqKS5p\nbnRWYWx1ZSgpLCBtYXApOwogICAgfQoKICAgIHByb3RlY3RlZCBSZWYgZ2V0\nUmVmSW50ZXJuYWwoT2JqZWN0IG9iaiwgTWFwIG1hcCwgSm9pbnMgam9pbnMp\nCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJu\nIF9kaWN0LmdldFJlZihfcnMsICgoTnVtYmVyKSBvYmopLmludFZhbHVlKCks\nIG1hcCk7CiAgICB9CgogICAgcHJvdGVjdGVkIHNob3J0IGdldFNob3J0SW50\nZXJuYWwoT2JqZWN0IG9iaiwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dz\nIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIF9kaWN0LmdldFNob3J0\nKF9ycywgKChOdW1iZXIpIG9iaikuaW50VmFsdWUoKSk7CiAgICB9CgogICAg\ncHJvdGVjdGVkIFN0cmluZyBnZXRTdHJpbmdJbnRlcm5hbChPYmplY3Qgb2Jq\nLCBKb2lucyBqb2lucykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsK\nICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgQ29sdW1uICYmICgoQ29sdW1u\nKSBvYmopLmdldFR5cGUoKSA9PSBUeXBlcy5DTE9CKQogICAgICAgICAgICBy\nZXR1cm4gX2RpY3QuZ2V0Q2xvYlN0cmluZyhfcnMsICgoQ29sdW1uKSBvYmop\nLmdldEluZGV4KCkpOwogICAgICAgIHJldHVybiBfZGljdC5nZXRTdHJpbmco\nX3JzLCAoKE51bWJlcikgb2JqKS5pbnRWYWx1ZSgpKTsKICAgIH0KCiAgICBw\ncm90ZWN0ZWQgVGltZSBnZXRUaW1lSW50ZXJuYWwoT2JqZWN0IG9iaiwgQ2Fs\nZW5kYXIgY2FsLCBKb2lucyBqb2lucykKICAgICAgICB0aHJvd3MgU1FMRXhj\nZXB0aW9uIHsKICAgICAgICByZXR1cm4gX2RpY3QuZ2V0VGltZShfcnMsICgo\nTnVtYmVyKSBvYmopLmludFZhbHVlKCksIGNhbCk7CiAgICB9CgogICAgcHJv\ndGVjdGVkIFRpbWVzdGFtcCBnZXRUaW1lc3RhbXBJbnRlcm5hbChPYmplY3Qg\nb2JqLCBDYWxlbmRhciBjYWwsCiAgICAgICAgSm9pbnMgam9pbnMpCiAgICAg\nICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIF9kaWN0\nLmdldFRpbWVzdGFtcChfcnMsICgoTnVtYmVyKSBvYmopLmludFZhbHVlKCks\nIGNhbCk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gd2FzTnVsbCgpCiAg\nICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIF9y\ncy53YXNOdWxsKCk7CiAgICB9CgogICAgcHJvdGVjdGVkIE9iamVjdCB0cmFu\nc2xhdGUoT2JqZWN0IG9iaiwgSm9pbnMgam9pbnMpCiAgICAgICAgdGhyb3dz\nIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIE51\nbWJlcikKICAgICAgICAgICAgcmV0dXJuIG9iajsKICAgICAgICByZXR1cm4g\nTnVtYmVycy52YWx1ZU9mKGZpbmRPYmplY3Qob2JqLCBqb2lucykpOwogICAg\nfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSAxLWJhc2VkIHJlc3VsdCBz\nZXQgaW5kZXggZm9yIHRoZSBnaXZlbiBjb2x1bW4gb3IgaWQsIG9yIGEKICAg\nICAqIG5vbi1wb3NpdGl2ZSBudW1iZXIgaWYgdGhlIGNvbHVtbiBpcyBub3Qg\nY29udGFpbmVkIGluIHRoaXMgcmVzdWx0LgogICAgICovCiAgICBwcm90ZWN0\nZWQgaW50IGZpbmRPYmplY3QoT2JqZWN0IG9iaiwgSm9pbnMgam9pbnMpCiAg\nICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgcmV0dXJuIGdldFJlc3VsdFNldCgpLmZpbmRDb2x1bW4ob2Jq\nLnRvU3RyaW5nKCkpOwogICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBz\nZSkgewogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

