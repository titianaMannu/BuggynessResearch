{"sha":"13aee36350b301ce32bc565d0918bab25467a9c8","node_id":"MDQ6QmxvYjIwNjM2NDoxM2FlZTM2MzUwYjMwMWNlMzJiYzU2NWQwOTE4YmFiMjU0NjdhOWM4","size":5847,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/13aee36350b301ce32bc565d0918bab25467a9c8","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuYWJzdHJhY3RzdG9yZTsKCmlt\ncG9ydCBqYXZhLnNlY3VyaXR5LkFjY2Vzc0NvbnRyb2xsZXI7CmltcG9ydCBq\nYXZhLnV0aWwuTWFwOwppbXBvcnQgamF2YS51dGlsLlByb3BlcnRpZXM7Cgpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmNvbmYuT3BlbkpQQUNvbmZpZ3Vy\nYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkFic3Ry\nYWN0QnJva2VyRmFjdG9yeTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5r\nZXJuZWwuQm9vdHN0cmFwOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtl\ncm5lbC5Ccm9rZXJGYWN0b3J5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmtlcm5lbC5TdG9yZU1hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEubGliLmNvbmYuQ29uZmlndXJhdGlvblByb3ZpZGVyOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmxpYi5jb25mLkNvbmZpZ3VyYXRpb25zOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5jb25mLlByb2R1Y3REZXJpdmF0\naW9uczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5KMkRv\nUHJpdkhlbHBlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRp\nbC5Mb2NhbGl6ZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5V\nc2VyRXhjZXB0aW9uOwoKLyoqCiAqIHtAbGluayBCcm9rZXJGYWN0b3J5fSBp\nbXBsZW1lbnRhdGlvbiBmb3IgdXNlIHdpdGggdGhlCiAqIHtAbGluayBBYnN0\ncmFjdFN0b3JlTWFuYWdlcn0uIFRoaXMgcHJvdmlkZXMgaW50ZWdyYXRpb24g\naW50byB0aGUKICoge0BsaW5rIEJvb3RzdHJhcCNnZXRCcm9rZXJGYWN0b3J5\nKCl9IGJvb3RzdHJhcHBpbmcgbWVjaGFuaXNtLCB0byBmYWNpbGl0YXRlCiAq\nIHRoZSBwcm9jZXNzIG9mIGNyZWF0aW5nIGEgc3ViY2xhc3Mgb2Yge0BsaW5r\nIEFic3RyYWN0U3RvcmVNYW5hZ2VyfS4gTmV3CiAqIHN0b3JlIG1hbmFnZXIg\naW1wbGVtZW50YXRpb25zIG5lZWQgbm90IGV4dGVuZCB0aGlzIGNsYXNzLiBJ\nbnN0ZWFkLCBzZXQgdGhlCiAqIDxjb2RlPm9yZy5hcGFjaGUub3BlbmpwYS5C\ncm9rZXJGYWN0b3J5PC9jb2RlPiBjb25maWd1cmF0aW9uIHByb3BlcnR5IHRv\nCiAqIDxjb2RlPmFic3RyYWN0c3RvcmU8L2NvZGU+LAogKiBhbmQgc2V0IHRo\nZSA8Y29kZT5vcmcuYXBhY2hlLm9wZW5qcGEuYWJzdHJhY3RzdG9yZS5BYnN0\ncmFjdFN0b3JlTWFuYWdlcjwvY29kZT4KICogY29uZmlndXJhdGlvbiBwcm9w\nZXJ0eSB0byB0aGUgZnVsbCBjbGFzcyBuYW1lIG9mIHlvdXIgaW1wbGVtZW50\nYXRpb24uCiAqICBBZGRpdGlvbmFsbHksIHlvdSBjYW4gb3B0aW9uYWxseSBj\ncmVhdGUgeW91ciBvd24KICogPGNvZGU+QnJva2VyRmFjdG9yeTwvY29kZT4g\naW1wbGVtZW50YXRpb24uIEhvd2V2ZXIsIHdlIHJlY29tbWVuZCB0aGF0IHlv\ndQogKiB1c2UgdGhlIDxjb2RlPkFic3RyYWN0U3RvcmVCcm9rZXJGYWN0b3J5\nPC9jb2RlPiwgYXMgaXQgZGVhbHMgd2l0aCBwb29saW5nCiAqIGFuZCBib290\nc3RyYXBwaW5nIGZyb20gYSB7QGxpbmsgTWFwfSBvYmplY3QgKHRoZSBzdHJh\ndGVneSB1c2VkIGJ5CiAqIHtAbGluayBCb290c3RyYXB9IHRvIGNyZWF0ZSBh\nIGZhY3RvcnkgaW4gYSB2ZW5kb3ItbmV1dHJhbCBtYW5uZXIpLgogKi8KcHVi\nbGljIGNsYXNzIEFic3RyYWN0U3RvcmVCcm9rZXJGYWN0b3J5CiAgICBleHRl\nbmRzIEFic3RyYWN0QnJva2VyRmFjdG9yeSB7CgogICAgLyoqCiAgICAgKiBU\naGUgcHJvcGVydHkgbmFtZSB1bmRlciB3aGljaCB0byBuYW1lIHRoZSBjb25j\ncmV0ZSBzdG9yZSBtYW5hZ2VyCiAgICAgKiBjbGFzcyBmb3IgdGhpcyBydW50\naW1lLgogICAgICovCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcg\nUFJPUF9BQlNUUkFDVF9TVE9SRSA9CiAgICAgICAgImFic3RyYWN0c3RvcmUu\nQWJzdHJhY3RTdG9yZU1hbmFnZXIiOwoKICAgIHByaXZhdGUgc3RhdGljIGZp\nbmFsIExvY2FsaXplciBzX2xvYyA9IExvY2FsaXplci5mb3JQYWNrYWdlCiAg\nICAgICAgKEFic3RyYWN0U3RvcmVCcm9rZXJGYWN0b3J5LmNsYXNzKTsKCiAg\nICBwcml2YXRlIFN0cmluZyBfc3RvcmVDbHMgPSBudWxsOwogICAgcHJpdmF0\nZSBTdHJpbmcgX3N0b3JlUHJvcHMgPSBudWxsOwogICAgcHJpdmF0ZSBTdHJp\nbmcgX3BsYXRmb3JtID0gbnVsbDsKCiAgICAvKioKICAgICAqIEZhY3Rvcnkg\nbWV0aG9kIGZvciBvYnRhaW5pbmcgYSBwb3NzaWJseS1wb29sZWQge0BsaW5r\nIEJyb2tlckZhY3Rvcnl9CiAgICAgKiBmcm9tIHByb3BlcnRpZXMuIEludm9r\nZWQgZnJvbSB7QGxpbmsgQm9vdHN0cmFwI2dldEJyb2tlckZhY3RvcnkoKX0u\nCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgQWJzdHJhY3RTdG9yZUJyb2tl\nckZhY3RvcnkgZ2V0SW5zdGFuY2UKICAgICAgICAoQ29uZmlndXJhdGlvblBy\nb3ZpZGVyIGNwKSB7CiAgICAgICAgQWJzdHJhY3RTdG9yZUJyb2tlckZhY3Rv\ncnkgZmFjdG9yeSA9IChBYnN0cmFjdFN0b3JlQnJva2VyRmFjdG9yeSkKICAg\nICAgICAgICAgZ2V0UG9vbGVkRmFjdG9yeShjcC5nZXRQcm9wZXJ0aWVzKCkp\nOwogICAgICAgIGlmIChmYWN0b3J5ICE9IG51bGwpCiAgICAgICAgICAgIHJl\ndHVybiBmYWN0b3J5OwoKICAgICAgICBmYWN0b3J5ID0gbmV3SW5zdGFuY2Uo\nY3ApOwogICAgICAgIGZhY3RvcnkucG9vbCgpOwogICAgICAgIHJldHVybiBm\nYWN0b3J5OwogICAgfQoKICAgIC8qKgogICAgICogRmFjdG9yeSBtZXRob2Qg\nZm9yIGNvbnN0cnVjdGluZyBhIHtAbGluayBCcm9rZXJGYWN0b3J5fQogICAg\nICogZnJvbSBwcm9wZXJ0aWVzLiBJbnZva2VkIGZyb20ge0BsaW5rIEJvb3Rz\ndHJhcCNuZXdCcm9rZXJGYWN0b3J5KCl9LgogICAgICovCiAgICBwdWJsaWMg\nc3RhdGljIEFic3RyYWN0U3RvcmVCcm9rZXJGYWN0b3J5IG5ld0luc3RhbmNl\nCiAgICAgICAgKENvbmZpZ3VyYXRpb25Qcm92aWRlciBjcCkgewogICAgICAg\nIC8vIHVzZSBhIHRtcCBzdG9yZSBtYW5hZ2VyIHRvIGdldCBtZXRhZGF0YSBh\nYm91dCB0aGUgY2FwYWJpbGl0aWVzIG9mCiAgICAgICAgLy8gdGhpcyBydW50\naW1lCiAgICAgICAgTWFwIG1hcCA9IGNwLmdldFByb3BlcnRpZXMoKTsKICAg\nICAgICBTdHJpbmcgc3RvcmVQbHVnaW4gPSAoU3RyaW5nKSBtYXAuZ2V0KFBy\nb2R1Y3REZXJpdmF0aW9ucwogICAgICAgICAgICAuZ2V0Q29uZmlndXJhdGlv\nbktleShQUk9QX0FCU1RSQUNUX1NUT1JFLCBtYXApKTsKICAgICAgICBTdHJp\nbmcgc3RvcmVDbHMgPSBDb25maWd1cmF0aW9ucy5nZXRDbGFzc05hbWUoc3Rv\ncmVQbHVnaW4pOwogICAgICAgIFN0cmluZyBzdG9yZVByb3BzID0gQ29uZmln\ndXJhdGlvbnMuZ2V0UHJvcGVydGllcyhzdG9yZVBsdWdpbik7CiAgICAgICAg\nQWJzdHJhY3RTdG9yZU1hbmFnZXIgc3RvcmUgPSBjcmVhdGVTdG9yZU1hbmFn\nZXIoc3RvcmVDbHMsCiAgICAgICAgICAgIHN0b3JlUHJvcHMpOwoKICAgICAg\nICAvLyBwb3B1bGF0ZSBjb25maWd1cmF0aW9uCiAgICAgICAgT3BlbkpQQUNv\nbmZpZ3VyYXRpb24gY29uZiA9IHN0b3JlLm5ld0NvbmZpZ3VyYXRpb24oKTsK\nICAgICAgICBjcC5zZXRJbnRvKGNvbmYpOwogICAgICAgIGNvbmYuc3VwcG9y\ndGVkT3B0aW9ucygpLnJlbW92ZUFsbChzdG9yZS5nZXRVbnN1cHBvcnRlZE9w\ndGlvbnMoKSk7CgogICAgICAgIC8vIGNyZWF0ZSBhbmQgcG9vbCBhIG5ldyBm\nYWN0b3J5CiAgICAgICAgcmV0dXJuIG5ldyBBYnN0cmFjdFN0b3JlQnJva2Vy\nRmFjdG9yeShjb25mLCBzdG9yZUNscywgc3RvcmVQcm9wcywKICAgICAgICAg\nICAgc3RvcmUuZ2V0UGxhdGZvcm0oKSk7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBDb25zdHJ1Y3QgdGhlIGZhY3Rvcnkgd2l0aCB0aGUgZ2l2ZW4gc2V0dGlu\nZ3MuCiAgICAgKi8KICAgIHByb3RlY3RlZCBBYnN0cmFjdFN0b3JlQnJva2Vy\nRmFjdG9yeShPcGVuSlBBQ29uZmlndXJhdGlvbiBjb25mLAogICAgICAgIFN0\ncmluZyBzdG9yZUNscywgU3RyaW5nIHN0b3JlUHJvcHMsIFN0cmluZyBwbGF0\nZm9ybSkgewogICAgICAgIHN1cGVyKGNvbmYpOwogICAgICAgIF9zdG9yZUNs\ncyA9IHN0b3JlQ2xzOwogICAgICAgIF9zdG9yZVByb3BzID0gc3RvcmVQcm9w\nczsKICAgICAgICBfcGxhdGZvcm0gPSBwbGF0Zm9ybTsKICAgIH0KCiAgICBw\ndWJsaWMgUHJvcGVydGllcyBnZXRQcm9wZXJ0aWVzKCkgewogICAgICAgIFBy\nb3BlcnRpZXMgcHJvcHMgPSBzdXBlci5nZXRQcm9wZXJ0aWVzKCk7CiAgICAg\nICAgcHJvcHMuc2V0UHJvcGVydHkoIlBsYXRmb3JtIiwgX3BsYXRmb3JtKTsK\nICAgICAgICByZXR1cm4gcHJvcHM7CiAgICB9CgogICAgcHJvdGVjdGVkIFN0\nb3JlTWFuYWdlciBuZXdTdG9yZU1hbmFnZXIoKSB7CiAgICAgICAgcmV0dXJu\nIGNyZWF0ZVN0b3JlTWFuYWdlcihfc3RvcmVDbHMsIF9zdG9yZVByb3BzKTsK\nICAgIH0KCiAgICBwcml2YXRlIHN0YXRpYyBBYnN0cmFjdFN0b3JlTWFuYWdl\nciBjcmVhdGVTdG9yZU1hbmFnZXIoU3RyaW5nIGNscywKICAgICAgICBTdHJp\nbmcgcHJvcHMpIHsKICAgICAgICBBYnN0cmFjdFN0b3JlTWFuYWdlciBzdG9y\nZSA9IChBYnN0cmFjdFN0b3JlTWFuYWdlcikgQ29uZmlndXJhdGlvbnMuCiAg\nICAgICAgICAgIG5ld0luc3RhbmNlKGNscywgKENsYXNzTG9hZGVyKSBBY2Nl\nc3NDb250cm9sbGVyLmRvUHJpdmlsZWdlZCgKICAgICAgICAgICAgICAgIEoy\nRG9Qcml2SGVscGVyLmdldENsYXNzTG9hZGVyQWN0aW9uKAogICAgICAgICAg\nICAgICAgICAgIEFic3RyYWN0U3RvcmVNYW5hZ2VyLmNsYXNzKSkpOyAKICAg\nICAgICBDb25maWd1cmF0aW9ucy5jb25maWd1cmVJbnN0YW5jZShzdG9yZSwg\nbnVsbCwgcHJvcHMsCiAgICAgICAgICAgIFBST1BfQUJTVFJBQ1RfU1RPUkUp\nOwogICAgICAgIGlmIChzdG9yZSA9PSBudWxsKQogICAgICAgICAgICB0aHJv\ndyBuZXcgVXNlckV4Y2VwdGlvbihzX2xvYy5nZXQoIm5vLXN0b3JlLW1hbmFn\nZXIiLAogICAgICAgICAgICAgICAgUFJPUF9BQlNUUkFDVF9TVE9SRSkpLnNl\ndEZhdGFsKHRydWUpOwoKICAgICAgICByZXR1cm4gc3RvcmU7Cgl9Cn0K\n","encoding":"base64"}

