{"sha":"43f962ebaf33b09171be6fc083da7b4e5d32df49","node_id":"MDQ6QmxvYjIwNjM2NDo0M2Y5NjJlYmFmMzNiMDkxNzFiZTZmYzA4M2RhN2I0ZTVkMzJkZjQ5","size":17581,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/43f962ebaf33b09171be6fc083da7b4e5d32df49","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuZGF0YWNhY2hlOwoKaW1wb3J0\nIGphdmEuaW8uRXh0ZXJuYWxpemFibGU7CmltcG9ydCBqYXZhLmlvLklPRXhj\nZXB0aW9uOwppbXBvcnQgamF2YS5pby5PYmplY3RJbnB1dDsKaW1wb3J0IGph\ndmEuaW8uT2JqZWN0T3V0cHV0OwppbXBvcnQgamF2YS51dGlsLkFycmF5TGlz\ndDsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uOwppbXBvcnQgamF2YS51\ndGlsLkNvbGxlY3Rpb25zOwppbXBvcnQgamF2YS51dGlsLkRhdGU7CmltcG9y\ndCBqYXZhLnV0aWwuSGFzaE1hcDsKaW1wb3J0IGphdmEudXRpbC5IYXNoU2V0\nOwppbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9yOwppbXBvcnQgamF2YS51dGls\nLkxpbmtlZExpc3Q7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGph\ndmEudXRpbC5NYXA7CmltcG9ydCBqYXZhLnV0aWwuU2V0OwppbXBvcnQgamF2\nYS51dGlsLlNvcnRlZFNldDsKaW1wb3J0IGphdmEudXRpbC5UcmVlU2V0OwoK\naW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5sYW5nLk9iamVjdFV0aWxzOwpp\nbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmxhbmcuU3RyaW5nVXRpbHM7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuZW5oYW5jZS5QQ1JlZ2lzdHJ5Owpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5RdWVyeTsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuUXVlcnlDb250ZXh0OwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5TdG9yZUNvbnRleHQ7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5DbGFzc01ldGFEYXRhOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuSmF2YVR5cGVzOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuTWV0YURhdGFSZXBvc2l0b3J5\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuSW1wbEhlbHBlcjsK\nCi8qKgogKiBUaGlzIGNsYXNzIHN0b3JlcyBpbmZvcm1hdGlvbiBhYm91dCBh\nIHBhcnRpY3VsYXIgaW52b2NhdGlvbiBvZgogKiBhIHF1ZXJ5LiBJdCBjb250\nYWlucyBhIHJlZmVyZW5jZSB0byB0aGUgZXh0ZXJuYWwgcHJvcGVydGllcyBv\nZiB0aGUKICogcXVlcnkgdGhhdCB3YXMgZXhlY3V0ZWQsIGFzIHdlbGwgYXMg\nYW55IHBhcmFtZXRlcnMgdXNlZCB0byBleGVjdXRlCiAqIHRoYXQgcXVlcnks\nIHdpdGggb25lIGV4Y2VwdGlvbjogZmlyc3QtY2xhc3Mgb2JqZWN0cyB1c2Vk\nIGFzCiAqIHBhcmFtZXRlciB2YWx1ZXMgYXJlIGNvbnZlcnRlZCB0byBPSURz\nLgogKgogKiBAYXV0aG9yIFBhdHJpY2sgTGluc2tleQogKi8KcHVibGljIGNs\nYXNzIFF1ZXJ5S2V5CiAgICBpbXBsZW1lbnRzIEV4dGVybmFsaXphYmxlIHsK\nCiAgICAvLyBpbml0aWFsaXplIHRoZSBzZXQgb2YgdW5tb2RpZmlhYmxlIGNs\nYXNzZXMuIFRoaXMgYWxsb3dzIHVzCiAgICAvLyB0byBhdm9pZCBjbG9uaW5n\nIGNvbGxlY3Rpb25zIHRoYXQgYXJlIG5vdCBtb2RpZmlhYmxlLAogICAgLy8g\ncHJvdmlkZWQgdGhhdCB0aGV5IGRvIG5vdCBjb250YWluIG11dGFibGUgb2Jq\nZWN0cy4KICAgIHByaXZhdGUgc3RhdGljIENvbGxlY3Rpb24gc191bm1vZCA9\nIG5ldyBIYXNoU2V0KCk7CgogICAgc3RhdGljIHsKICAgICAgICAvLyBoYW5k\nbGUgdGhlIHNldCB0eXBlczsgamRrIHVzZXMgZGlmZmVyZW50IGNsYXNzZXMg\nZm9yIGNvbGxlY3Rpb24sCiAgICAgICAgLy8gc2V0LCBhbmQgc29ydGVkIHNl\ndAogICAgICAgIFRyZWVTZXQgcyA9IG5ldyBUcmVlU2V0KCk7CiAgICAgICAg\nc191bm1vZC5hZGQoQ29sbGVjdGlvbnMudW5tb2RpZmlhYmxlQ29sbGVjdGlv\nbihzKS5nZXRDbGFzcygpKTsKICAgICAgICBzX3VubW9kLmFkZChDb2xsZWN0\naW9ucy51bm1vZGlmaWFibGVTZXQocykuZ2V0Q2xhc3MoKSk7CiAgICAgICAg\nc191bm1vZC5hZGQoQ29sbGVjdGlvbnMudW5tb2RpZmlhYmxlU29ydGVkU2V0\nKHMpLmdldENsYXNzKCkpOwoKICAgICAgICAvLyBoYW5kbGUgdGhlIGxpc3Qg\ndHlwZXM7IGpkayB1c2VzIGRpZmZlcmVudCBjbGFzc2VzIGZvciBzdGFuZGFy\nZAogICAgICAgIC8vIGFuZCByYW5kb20gYWNjZXNzIGxpc3RzCiAgICAgICAg\nTGlzdCBsID0gbmV3IExpbmtlZExpc3QoKTsKICAgICAgICBzX3VubW9kLmFk\nZChDb2xsZWN0aW9ucy51bm1vZGlmaWFibGVMaXN0KGwpLmdldENsYXNzKCkp\nOwogICAgICAgIGwgPSBuZXcgQXJyYXlMaXN0KDApOwogICAgICAgIHNfdW5t\nb2QuYWRkKENvbGxlY3Rpb25zLnVubW9kaWZpYWJsZUxpc3QobCkuZ2V0Q2xh\nc3MoKSk7CgogICAgICAgIC8vIGhhbmRsZSB0aGUgY29uc3RhbnQgdHlwZXMK\nICAgICAgICBzX3VubW9kLmFkZChDb2xsZWN0aW9ucy5FTVBUWV9TRVQuZ2V0\nQ2xhc3MoKSk7CiAgICAgICAgc191bm1vZC5hZGQoQ29sbGVjdGlvbnMuRU1Q\nVFlfTElTVC5nZXRDbGFzcygpKTsKICAgIH0KCiAgICAvLyBjYWNoaW5nIHN0\nYXRlOyBubyBuZWVkIHRvIGluY2x1ZGUgcGFyYW1ldGVyIGFuZCB2YXJpYWJs\nZSBkZWNsYXJhdGlvbnMKICAgIC8vIGJlY2F1c2UgdGhleSBhcmUgaW1wbGlj\naXQgaW4gdGhlIGZpbHRlcgogICAgcHJpdmF0ZSBTdHJpbmcgX2NhbmRpZGF0\nZUNsYXNzTmFtZTsKICAgIHByaXZhdGUgYm9vbGVhbiBfc3ViY2xhc3NlczsK\nICAgIHByaXZhdGUgU2V0IF9hY2Nlc3NQYXRoQ2xhc3NOYW1lczsKICAgIHBy\naXZhdGUgU3RyaW5nIF9xdWVyeTsKICAgIHByaXZhdGUgYm9vbGVhbiBfaWdu\nb3JlQ2hhbmdlczsKICAgIHByaXZhdGUgTWFwIF9wYXJhbXM7CiAgICBwcml2\nYXRlIGxvbmcgX3JhbmdlU3RhcnQ7CiAgICBwcml2YXRlIGxvbmcgX3Jhbmdl\nRW5kOwoKICAgIC8vICMjIyBwY2w6IDIgTWF5IDIwMDM6IHNob3VsZCB0aGlz\nIHRpbWVvdXQgdGFrZSBpbnRvIGFjY291bnQgdGhlCiAgICAvLyAjIyMgdGlt\nZW91dHMgZm9yIGNsYXNzZXMgaW4gdGhlIGFjY2VzcyBwYXRoIG9mIHRoZSBx\ndWVyeT8KICAgIC8vICMjIyBDdXJyZW50bHksIGl0IG9ubHkgY29uc2lkZXJz\nIHRoZSBjYW5kaWRhdGUgY2xhc3MgYW5kIGl0cwogICAgLy8gIyMjIHN1YmNs\nYXNzZXMuIE5vdGUgdGhhdCB0aGlzIHZhbHVlIGlzIHVzZWQgdG8gZGVjaWRl\nIHdoZXRoZXIKICAgIC8vICMjIyBvciBub3QgT0lEcyBzaG91bGQgYmUgcmVn\naXN0ZXJlZCBmb3IgZXhwaXJhdGlvbiBjYWxsYmFja3MKICAgIHByaXZhdGUg\naW50IF90aW1lb3V0ID0gLTE7CgogICAgLyoqCiAgICAgKiBSZXR1cm4gYSBr\nZXkgZm9yIHRoZSBnaXZlbiBxdWVyeSwgb3IgbnVsbCBpZiBpdCBpcyBub3Qg\nY2FjaGVhYmxlLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIFF1ZXJ5S2V5\nIG5ld0luc3RhbmNlKFF1ZXJ5IHEpIHsKICAgICAgICByZXR1cm4gbmV3SW5z\ndGFuY2UocSwgKE9iamVjdFtdKSBudWxsKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIFJldHVybiBhIGtleSBmb3IgdGhlIGdpdmVuIHF1ZXJ5LCBvciBudWxs\nIGlmIGl0IGlzIG5vdCBjYWNoZWFibGUuCiAgICAgKi8KICAgIHB1YmxpYyBz\ndGF0aWMgUXVlcnlLZXkgbmV3SW5zdGFuY2UoUXVlcnkgcSwgT2JqZWN0W10g\nYXJncykgewogICAgICAgIC8vIGNvbXBpbGUgdG8gbWFrZSBzdXJlIGluZm8g\nZW5jb2RlZCBpbiBxdWVyeSBzdHJpbmcgaXMgYXZhaWxhYmxlCiAgICAgICAg\nLy8gdmlhIEFQSSBjYWxscyAoY2FuZGlkYXRlIGNsYXNzLCByZXN1bHQgY2xh\nc3MsIGV0YykKICAgICAgICBxLmNvbXBpbGUoKTsKICAgICAgICByZXR1cm4g\nbmV3SW5zdGFuY2UocSwgZmFsc2UsIGFyZ3MsIHEuZ2V0Q2FuZGlkYXRlVHlw\nZSgpLAogICAgICAgICAgICBxLmhhc1N1YmNsYXNzZXMoKSwgcS5nZXRTdGFy\ndFJhbmdlKCksIHEuZ2V0RW5kUmFuZ2UoKSk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBSZXR1cm4gYSBrZXkgZm9yIHRoZSBnaXZlbiBxdWVyeSwgb3IgbnVs\nbCBpZiBpdCBpcyBub3QgY2FjaGVhYmxlLgogICAgICovCiAgICBwdWJsaWMg\nc3RhdGljIFF1ZXJ5S2V5IG5ld0luc3RhbmNlKFF1ZXJ5IHEsIE1hcCBhcmdz\nKSB7CiAgICAgICAgLy8gY29tcGlsZSB0byBtYWtlIHN1cmUgaW5mbyBlbmNv\nZGVkIGluIHF1ZXJ5IHN0cmluZyBpcyBhdmFpbGFibGUKICAgICAgICAvLyB2\naWEgQVBJIGNhbGxzIChjYW5kaWRhdGUgY2xhc3MsIHJlc3VsdCBjbGFzcywg\nZXRjKQogICAgICAgIHEuY29tcGlsZSgpOwogICAgICAgIHJldHVybiBuZXdJ\nbnN0YW5jZShxLCBmYWxzZSwgYXJncywgcS5nZXRDYW5kaWRhdGVUeXBlKCks\nCiAgICAgICAgICAgIHEuaGFzU3ViY2xhc3NlcygpLCBxLmdldFN0YXJ0UmFu\nZ2UoKSwgcS5nZXRFbmRSYW5nZSgpKTsKICAgIH0KCiAgICAvKioKICAgICAq\nIFJldHVybiBhIGtleSBmb3IgdGhlIGdpdmVuIHF1ZXJ5LCBvciBudWxsIGlm\nIGl0IGlzIG5vdCBjYWNoZWFibGUuCiAgICAgKi8KICAgIHN0YXRpYyBRdWVy\neUtleSBuZXdJbnN0YW5jZShRdWVyeUNvbnRleHQgcSwgYm9vbGVhbiBwYWNr\nZWQsIE9iamVjdFtdIGFyZ3MsCiAgICAgICAgQ2xhc3MgY2FuZGlkYXRlLCBi\nb29sZWFuIHN1YnMsIGxvbmcgc3RhcnRJZHgsIGxvbmcgZW5kSWR4KSB7CiAg\nICAgICAgUXVlcnlLZXkga2V5ID0gY3JlYXRlS2V5KHEsIHBhY2tlZCwgY2Fu\nZGlkYXRlLCBzdWJzLCBzdGFydElkeCwgZW5kSWR4KTsKICAgICAgICBpZiAo\na2V5ICE9IG51bGwgJiYgc2V0UGFyYW1zKGtleSwgcSwgYXJncykpCiAgICAg\nICAgICAgIHJldHVybiBrZXk7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBSZXR1cm4gYSBrZXkgZm9yIHRoZSBnaXZlbiBx\ndWVyeSwgb3IgbnVsbCBpZiBpdCBpcyBub3QgY2FjaGVhYmxlLgogICAgICov\nCiAgICBzdGF0aWMgUXVlcnlLZXkgbmV3SW5zdGFuY2UoUXVlcnlDb250ZXh0\nIHEsIGJvb2xlYW4gcGFja2VkLCBNYXAgYXJncywKICAgICAgICBDbGFzcyBj\nYW5kaWRhdGUsIGJvb2xlYW4gc3VicywgbG9uZyBzdGFydElkeCwgbG9uZyBl\nbmRJZHgpIHsKICAgICAgICBRdWVyeUtleSBrZXkgPSBjcmVhdGVLZXkocSwg\ncGFja2VkLCBjYW5kaWRhdGUsIHN1YnMsIHN0YXJ0SWR4LCBlbmRJZHgpOwog\nICAgICAgIGlmIChrZXkgIT0gbnVsbCAmJiAoYXJncyA9PSBudWxsIHx8IGFy\nZ3MuaXNFbXB0eSgpIHx8CiAgICAgICAgICAgIHNldFBhcmFtcyhrZXksIHEu\nZ2V0U3RvcmVDb250ZXh0KCksIG5ldyBIYXNoTWFwKGFyZ3MpKSkpCiAgICAg\nICAgICAgIHJldHVybiBrZXk7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBFeHRyYWN0IHRoZSByZWxldmFudCBpZGVudGlm\neWluZyBpbmZvcm1hdGlvbiBmcm9tCiAgICAgKiA8Y29kZT5xPC9jb2RlPi4g\nVGhpcyBpbmNsdWRlcyBpbmZvcm1hdGlvbiBzdWNoIGFzIGNhbmRpZGF0ZQog\nICAgICogY2xhc3MsIHF1ZXJ5IGZpbHRlciwgZXRjLgogICAgICovCiAgICBw\ncml2YXRlIHN0YXRpYyBRdWVyeUtleSBjcmVhdGVLZXkoUXVlcnlDb250ZXh0\nIHEsIGJvb2xlYW4gcGFja2VkLAogICAgICAgIENsYXNzIGNhbmRpZGF0ZUNs\nYXNzLCBib29sZWFuIHN1YmNsYXNzZXMsIGxvbmcgc3RhcnRJZHgsIGxvbmcg\nZW5kSWR4KSB7CiAgICAgICAgaWYgKGNhbmRpZGF0ZUNsYXNzID09IG51bGwp\nCiAgICAgICAgICAgIHJldHVybiBudWxsOwoKICAgICAgICAvLyBjYW4gb25s\neSBjYWNoZSBkYXRhc3RvcmUgcXVlcmllcwogICAgICAgIGlmIChxLmdldENh\nbmRpZGF0ZUNvbGxlY3Rpb24oKSAhPSBudWxsKQogICAgICAgICAgICByZXR1\ncm4gbnVsbDsKCiAgICAgICAgLy8gbm8gc3VwcG9ydCBhbHJlYWR5LXBhY2tl\nZCByZXN1bHRzCiAgICAgICAgaWYgKHEuZ2V0UmVzdWx0VHlwZSgpICE9IG51\nbGwgJiYgcGFja2VkKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKCiAgICAg\nICAgLy8gY2FuJ3QgY2FjaGUgbm9uLXNlcmlhbGl6YWJsZSBub24tbWFuYWdl\nZCBjb21wbGV4IHR5cGVzCiAgICAgICAgQ2xhc3NbXSB0eXBlcyA9IHEuZ2V0\nUHJvamVjdGlvblR5cGVzKCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkg\nPCB0eXBlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBzd2l0Y2ggKEph\ndmFUeXBlcy5nZXRUeXBlQ29kZSh0eXBlc1tpXSkpIHsKICAgICAgICAgICAg\nICAgIGNhc2UgSmF2YVR5cGVzLkFSUkFZOgogICAgICAgICAgICAgICAgICAg\nIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMu\nQ09MTEVDVElPTjoKICAgICAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLk1B\nUDoKICAgICAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLk9CSkVDVDoKICAg\nICAgICAgICAgICAgICAgICBpZiAoIUltcGxIZWxwZXIuaXNNYW5hZ2VkVHlw\nZSgKICAgICAgICAgICAgICAgICAgICAgICAgcS5nZXRTdG9yZUNvbnRleHQo\nKS5nZXRDb25maWd1cmF0aW9uKCksIHR5cGVzW2ldKSkKICAgICAgICAgICAg\nICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICAgICAg\nYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIHdl\nIGNhbid0IGNhY2hlIHRoZSBxdWVyeSBpZiB3ZSBkb24ndCBrbm93IHdoaWNo\nIGNsYXNzZXMgYXJlIGluIHRoZQogICAgICAgIC8vIGFjY2VzcyBwYXRoCiAg\nICAgICAgQ2xhc3NNZXRhRGF0YVtdIG1ldGFzID0gcS5nZXRBY2Nlc3NQYXRo\nTWV0YURhdGFzKCk7CiAgICAgICAgaWYgKG1ldGFzLmxlbmd0aCA9PSAwKQog\nICAgICAgICAgICByZXR1cm4gbnVsbDsKCiAgICAgICAgU2V0IGFjY2Vzc1Bh\ndGhDbGFzc05hbWVzID0gbmV3IEhhc2hTZXQoKGludCkgKG1ldGFzLmxlbmd0\naCAqIDEuMzMgKyAxKSk7CiAgICAgICAgQ2xhc3NNZXRhRGF0YSBtZXRhOwog\nICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbWV0YXMubGVuZ3RoOyBpKysp\nIHsKICAgICAgICAgICAgLy8gc2luY2UgdGhlIGNsYXNzIGNoYW5nZSBmcmFt\nZXdvcmsgZGVhbHMgd2l0aCBsZWFzdC1kZXJpdmVkIHR5cGVzLAogICAgICAg\nICAgICAvLyByZWNvcmQgdGhlIGxlYXN0LWRlcml2ZWQgYWNjZXNzIHBhdGgg\ndHlwZXMKICAgICAgICAgICAgbWV0YSA9IG1ldGFzW2ldOwogICAgICAgICAg\nICB3aGlsZSAobWV0YS5nZXRQQ1N1cGVyY2xhc3MoKSAhPSBudWxsKQogICAg\nICAgICAgICAgICAgbWV0YSA9IG1ldGEuZ2V0UENTdXBlcmNsYXNzTWV0YURh\ndGEoKTsKCiAgICAgICAgICAgIC8vIGVuc3VyZSB0aGF0IHRoaXMgbWV0YWRh\ndGEgaXMgY2FjaGVhYmxlCiAgICAgICAgICAgIGlmIChtZXRhLmdldERhdGFD\nYWNoZSgpID09IG51bGwpCiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsK\nICAgICAgICAgICAgYWNjZXNzUGF0aENsYXNzTmFtZXMuYWRkKG1ldGEuZ2V0\nRGVzY3JpYmVkVHlwZSgpLmdldE5hbWUoKSk7CiAgICAgICAgfQoKICAgICAg\nICAvLyBpZiBhbnkgb2YgdGhlIHR5cGVzIGFyZSBjdXJyZW50bHkgZGlydHks\nIHdlIGNhbid0IGNhY2hlIHRoaXMgcXVlcnkKICAgICAgICBTdG9yZUNvbnRl\neHQgY3R4ID0gcS5nZXRTdG9yZUNvbnRleHQoKTsKICAgICAgICBpZiAoaW50\nZXJzZWN0cyhhY2Nlc3NQYXRoQ2xhc3NOYW1lcywgY3R4LmdldFBlcnNpc3Rl\nZFR5cGVzKCkpCiAgICAgICAgICAgIHx8IGludGVyc2VjdHMoYWNjZXNzUGF0\naENsYXNzTmFtZXMsIGN0eC5nZXRVcGRhdGVkVHlwZXMoKSkKICAgICAgICAg\nICAgfHwgaW50ZXJzZWN0cyhhY2Nlc3NQYXRoQ2xhc3NOYW1lcywgY3R4Lmdl\ndERlbGV0ZWRUeXBlcygpKSkKICAgICAgICAgICAgcmV0dXJuIG51bGw7Cgog\nICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgdGltZW91dCBmb3IgdGhlIGtleQog\nICAgICAgIE1ldGFEYXRhUmVwb3NpdG9yeSByZXBvcyA9IGN0eC5nZXRDb25m\naWd1cmF0aW9uKCkuCiAgICAgICAgICAgIGdldE1ldGFEYXRhUmVwb3NpdG9y\neUluc3RhbmNlKCk7CgogICAgICAgIC8vIHdvbid0IGZpbmQgbWV0YWRhdGEg\nZm9yIGludGVyZmFjZXMuCiAgICAgICAgaWYgKGNhbmRpZGF0ZUNsYXNzLmlz\nSW50ZXJmYWNlKCkpCiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAg\nIG1ldGEgPSByZXBvcy5nZXRNZXRhRGF0YShjYW5kaWRhdGVDbGFzcywgY3R4\nLmdldENsYXNzTG9hZGVyKCksIHRydWUpOwogICAgICAgIGludCB0aW1lb3V0\nID0gbWV0YS5nZXREYXRhQ2FjaGVUaW1lb3V0KCk7CiAgICAgICAgaWYgKHN1\nYmNsYXNzZXMpIHsKICAgICAgICAgICAgbWV0YXMgPSBtZXRhLmdldFBDU3Vi\nY2xhc3NNZXRhRGF0YXMoKTsKICAgICAgICAgICAgaW50IHN1YlRpbWVvdXQ7\nCiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbWV0YXMubGVuZ3Ro\nOyBpKyspIHsKICAgICAgICAgICAgICAgIGlmIChtZXRhc1tpXS5nZXREYXRh\nQ2FjaGUoKSA9PSBudWxsKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBu\ndWxsOwoKICAgICAgICAgICAgICAgIHN1YlRpbWVvdXQgPSBtZXRhc1tpXS5n\nZXREYXRhQ2FjaGVUaW1lb3V0KCk7CiAgICAgICAgICAgICAgICBpZiAoc3Vi\nVGltZW91dCAhPSAtMSAmJiBzdWJUaW1lb3V0IDwgdGltZW91dCkKICAgICAg\nICAgICAgICAgICAgICB0aW1lb3V0ID0gc3ViVGltZW91dDsKICAgICAgICAg\nICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gdGVzdHMgYWxsIHBhc3NlZDsg\nY2FjaGVhYmxlCiAgICAgICAgUXVlcnlLZXkga2V5ID0gbmV3IFF1ZXJ5S2V5\nKCk7CiAgICAgICAga2V5Ll9jYW5kaWRhdGVDbGFzc05hbWUgPSBjYW5kaWRh\ndGVDbGFzcy5nZXROYW1lKCk7CiAgICAgICAga2V5Ll9zdWJjbGFzc2VzID0g\nc3ViY2xhc3NlczsKICAgICAgICBrZXkuX2FjY2Vzc1BhdGhDbGFzc05hbWVz\nID0gYWNjZXNzUGF0aENsYXNzTmFtZXM7CiAgICAgICAga2V5Ll90aW1lb3V0\nID0gdGltZW91dDsKICAgICAgICBrZXkuX3F1ZXJ5ID0gcS5nZXRRdWVyeVN0\ncmluZygpOwogICAgICAgIGtleS5faWdub3JlQ2hhbmdlcyA9IHEuZ2V0SWdu\nb3JlQ2hhbmdlcygpOwogICAgICAgIGtleS5fcmFuZ2VTdGFydCA9IHN0YXJ0\nSWR4OwogICAgICAgIGtleS5fcmFuZ2VFbmQgPSBlbmRJZHg7CiAgICAgICAg\ncmV0dXJuIGtleTsKICAgIH0KCiAgICAvKioKICAgICAqIENvbnZlcnQgYW4g\nYXJyYXkgb2YgYXJndW1lbnRzIGludG8gdGhlIGNvcnJlc3BvbmRpbmcgcGFy\nYW1ldGVyCiAgICAgKiBtYXAsIGFuZCBkbyBhbnkgUEMgdG8gT0lEIGNvbnZl\ncnNpb24gbmVjZXNzYXJ5LgogICAgICovCiAgICBwcml2YXRlIHN0YXRpYyBi\nb29sZWFuIHNldFBhcmFtcyhRdWVyeUtleSBrZXksIFF1ZXJ5Q29udGV4dCBx\nLAogICAgICAgIE9iamVjdFtdIGFyZ3MpIHsKICAgICAgICBpZiAoYXJncyA9\nPSBudWxsIHx8IGFyZ3MubGVuZ3RoID09IDApCiAgICAgICAgICAgIHJldHVy\nbiB0cnVlOwoKICAgICAgICAvLyBDcmVhdGUgYSBtYXAgZm9yIHRoZSBnaXZl\nbiBwYXJhbWV0ZXJzLCBhbmQgY29udmVydCB0aGUKICAgICAgICAvLyBwYXJh\nbWV0ZXIgbGlzdCBpbnRvIGEgbWFwLCB1c2luZyB0aGUgcXVlcnkncyBwYXJh\nbWV0ZXIKICAgICAgICAvLyBkZWNsYXJhdGlvbiB0byBkZXRlcm1pbmUgb3Jk\nZXJpbmcgZXRjLgogICAgICAgIE1hcCB0eXBlcyA9IHEuZ2V0UGFyYW1ldGVy\nVHlwZXMoKTsKICAgICAgICBNYXAgbWFwID0gbmV3IEhhc2hNYXAoKGludCkg\nKHR5cGVzLnNpemUoKSAqIDEuMzMgKyAxKSk7CiAgICAgICAgaW50IGlkeCA9\nIDA7CiAgICAgICAgZm9yIChJdGVyYXRvciBpdGVyID0gdHlwZXMua2V5U2V0\nKCkuaXRlcmF0b3IoKTsgaXRlci5oYXNOZXh0KCk7IGlkeCsrKQogICAgICAg\nICAgICBtYXAucHV0KGl0ZXIubmV4dCgpLCBhcmdzW2lkeF0pOwogICAgICAg\nIHJldHVybiBzZXRQYXJhbXMoa2V5LCBxLmdldFN0b3JlQ29udGV4dCgpLCBt\nYXApOwogICAgfQoKICAgIC8qKgogICAgICogQ29udmVydCBwYXJhbWV0ZXJz\nIHRvIGEgZm9ybSB0aGF0IGlzIGNhY2hlYWJsZS4gTXV0YWJsZSBwYXJhbXMK\nICAgICAqIHdpbGwgYmUgY2xvbmVkLgogICAgICovCiAgICBwcml2YXRlIHN0\nYXRpYyBib29sZWFuIHNldFBhcmFtcyhRdWVyeUtleSBrZXksIFN0b3JlQ29u\ndGV4dCBjdHgsCiAgICAgICAgTWFwIHBhcmFtcykgewogICAgICAgIGlmIChw\nYXJhbXMgPT0gbnVsbCB8fCBwYXJhbXMuaXNFbXB0eSgpKQogICAgICAgICAg\nICByZXR1cm4gdHJ1ZTsKCiAgICAgICAgTWFwLkVudHJ5IGU7CiAgICAgICAg\nT2JqZWN0IHY7CiAgICAgICAgZm9yIChJdGVyYXRvciBpdGVyID0gcGFyYW1z\nLmVudHJ5U2V0KCkuaXRlcmF0b3IoKTsgaXRlci5oYXNOZXh0KCk7KSB7CiAg\nICAgICAgICAgIGUgPSAoTWFwLkVudHJ5KSBpdGVyLm5leHQoKTsKICAgICAg\nICAgICAgdiA9IGUuZ2V0VmFsdWUoKTsKICAgICAgICAgICAgaWYgKEltcGxI\nZWxwZXIuaXNNYW5hZ2VhYmxlKHYpKSB7CiAgICAgICAgICAgICAgICBpZiAo\nIWN0eC5pc1BlcnNpc3RlbnQodikgfHwgY3R4LmlzTmV3KHYpIHx8IGN0eC5p\nc0RlbGV0ZWQodikpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNl\nOwogICAgICAgICAgICAgICAgZS5zZXRWYWx1ZShjdHguZ2V0T2JqZWN0SWQo\ndikpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAodiBpbnN0YW5j\nZW9mIENvbGxlY3Rpb24pIHsKICAgICAgICAgICAgICAgIENvbGxlY3Rpb24g\nYyA9IChDb2xsZWN0aW9uKSB2OwogICAgICAgICAgICAgICAgYm9vbGVhbiBj\nb250ZW50c0FyZURhdGVzID0gZmFsc2U7CiAgICAgICAgICAgICAgICBpZiAo\nYy5pdGVyYXRvcigpLmhhc05leHQoKSkgewogICAgICAgICAgICAgICAgICAg\nIC8vIHRoaXMgYXNzdW1lcyB0aGF0IHRoZSBjb2xsZWN0aW9uIGlzIGhvbW9n\nZW5lb3VzCiAgICAgICAgICAgICAgICAgICAgT2JqZWN0IG8gPSBjLml0ZXJh\ndG9yKCkubmV4dCgpOwogICAgICAgICAgICAgICAgICAgIGlmIChJbXBsSGVs\ncGVyLmlzTWFuYWdlYWJsZShvKSkKICAgICAgICAgICAgICAgICAgICAgICAg\ncmV0dXJuIGZhbHNlOwoKICAgICAgICAgICAgICAgICAgICAvLyBwY2w6IDI3\nIEp1biAyMDA0OiBpZiB3ZSBncm93IHRoaXMgbG9naWMgdG8KICAgICAgICAg\nICAgICAgICAgICAvLyBoYW5kbGUgb3RoZXIgbXV0YWJsZSB0eXBlcyB0aGF0\nIGFyZSBub3QKICAgICAgICAgICAgICAgICAgICAvLyBrbm93biB0byBiZSBj\nbG9uZWFibGUsIHdlIHdpbGwgaGF2ZSB0byBhZGQKICAgICAgICAgICAgICAg\nICAgICAvLyBsb2dpYyB0byBoYW5kbGUgdGhlbS4gVGhpcyBpcyBiZWNhdXNl\nIHdlCiAgICAgICAgICAgICAgICAgICAgLy8gY2FuJ3QganVzdCBjYXN0IHRv\nIENsb25lYWJsZSBhbmQgaW52b2tlCiAgICAgICAgICAgICAgICAgICAgLy8g\nY2xvbmUoKSwgYXMgY2xvbmUoKSBpcyBhIHByb3RlY3RlZCBtZXRob2QKICAg\nICAgICAgICAgICAgICAgICAvLyBpbiBPYmplY3QuCiAgICAgICAgICAgICAg\nICAgICAgaWYgKG8gaW5zdGFuY2VvZiBEYXRlKQogICAgICAgICAgICAgICAg\nICAgICAgICBjb250ZW50c0FyZURhdGVzID0gdHJ1ZTsKCiAgICAgICAgICAg\nICAgICAgICAgLy8gaWYgdGhlIGNvbGxlY3Rpb24gaXMgbm90IGEga25vd24g\naW1tdXRhYmxlCiAgICAgICAgICAgICAgICAgICAgLy8gdHlwZSwgb3IgaWYg\naXQgY29udGFpbnMgbXV0YWJsZSBpbnN0YW5jZXMsCiAgICAgICAgICAgICAg\nICAgICAgLy8gY2xvbmUgaXQgZm9yIGdvb2QgbWVhc3VyZS4KICAgICAgICAg\nICAgICAgICAgICBpZiAoY29udGVudHNBcmVEYXRlcyB8fCAhc191bm1vZC5j\nb250YWlucyhjLmdldENsYXNzKCkpKSB7CiAgICAgICAgICAgICAgICAgICAg\nICAgIC8vIGNvcHkgdGhlIGNvbGxlY3Rpb24KICAgICAgICAgICAgICAgICAg\nICAgICAgQ29sbGVjdGlvbiBjb3B5OwogICAgICAgICAgICAgICAgICAgICAg\nICBpZiAoYyBpbnN0YW5jZW9mIFNvcnRlZFNldCkKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgIGNvcHkgPSBuZXcgVHJlZVNldCgpOwogICAgICAgICAg\nICAgICAgICAgICAgICBlbHNlIGlmIChjIGluc3RhbmNlb2YgU2V0KQogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgY29weSA9IG5ldyBIYXNoU2V0KCk7\nCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgIGNvcHkgPSBuZXcgQXJyYXlMaXN0KGMuc2l6ZSgpKTsK\nCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50c0FyZURhdGVz\nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtdXN0IGdvIHRo\ncm91Z2ggYnkgaGFuZCBhbmQgZG8gdGhlCiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAvLyBjb3B5LCBzaW5jZSBEYXRlIGlzIG11dGFibGUuCiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0cjIgPSBj\nLml0ZXJhdG9yKCk7IGl0cjIuaGFzTmV4dCgpOykKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICBjb3B5LmFkZCgoKERhdGUpIGl0cjIubmV4dCgp\nKS5jbG9uZSgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICBjb3B5LmFkZEFsbChjKTsKCiAg\nICAgICAgICAgICAgICAgICAgICAgIGUuc2V0VmFsdWUoY29weSk7CiAgICAg\nICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAg\nICB9IGVsc2UgaWYgKHYgaW5zdGFuY2VvZiBEYXRlKQogICAgICAgICAgICAg\nICAgZS5zZXRWYWx1ZSgoKERhdGUpIHYpLmNsb25lKCkpOwogICAgICAgIH0K\nCiAgICAgICAga2V5Ll9wYXJhbXMgPSBwYXJhbXM7CiAgICAgICAgcmV0dXJu\nIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBQdWJsaWMgY29uc3RydWN0\nb3IgZm9yIGV4dGVybmFsaXphdGlvbiBvbmx5LgogICAgICovCiAgICBwdWJs\naWMgUXVlcnlLZXkoKSB7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5z\nIHRoZSBjYW5kaWRhdGUgY2xhc3MgbmFtZSBmb3IgdGhpcyBxdWVyeS4KICAg\nICAqLwogICAgcHVibGljIFN0cmluZyBnZXRDYW5kaWRhdGVUeXBlTmFtZSgp\nIHsKICAgICAgICByZXR1cm4gX2NhbmRpZGF0ZUNsYXNzTmFtZTsKICAgIH0K\nCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgYW1vdW50IG9mIHRpbWUgdGhp\ncyBrZXkgaXMgZ29vZCBmb3IuCiAgICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0\nVGltZW91dCgpIHsKICAgICAgICByZXR1cm4gX3RpbWVvdXQ7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBSZXR1cm5zIDxjb2RlPnRydWU8L2NvZGU+IGlmIG1v\nZGlmaWNhdGlvbnMgdG8gYW55IG9mIHRoZQogICAgICogY2xhc3NlcyBpbiA8\nY29kZT5jaGFuZ2VkPC9jb2RlPiByZXN1bHRzIGluIGEgcG9zc2libGUKICAg\nICAqIGludmFsaWRhdGlvbiBvZiB0aGlzIHF1ZXJ5OyBvdGhlcndpc2UgcmV0\ndXJucwogICAgICogPGNvZGU+ZmFsc2U8L2NvZGU+LiBJbnZhbGlkYXRpb24g\naXMgcG9zc2libGUgaWYgb25lIG9yIG1vcmUgb2YKICAgICAqIHRoZSBjbGFz\nc2VzIGluIHRoaXMgcXVlcnkga2V5J3MgYWNjZXNzIHBhdGggaGFzIGJlZW4g\nY2hhbmdlZC4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gY2hhbmdlSW52\nYWxpZGF0ZXNRdWVyeShDb2xsZWN0aW9uIGNoYW5nZWQpIHsKICAgICAgICBy\nZXR1cm4gaW50ZXJzZWN0cyhfYWNjZXNzUGF0aENsYXNzTmFtZXMsIGNoYW5n\nZWQpOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciB0aGUgZ2l2ZW4g\nc2V0IG9mIGxlYXN0LWRlcml2ZWQgY2xhc3MgbmFtZXMgaW50ZXJzZWN0cyB3\naXRoCiAgICAgKiB0aGUgZ2l2ZW4gc2V0IG9mIGNoYW5nZWQgY2xhc3Nlcy4K\nICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgYm9vbGVhbiBpbnRlcnNlY3Rz\nKENvbGxlY3Rpb24gbmFtZXMsIENvbGxlY3Rpb24gY2hhbmdlZCkgewogICAg\nICAgIENsYXNzIGNsczsKICAgICAgICBDbGFzcyBzdXA7CiAgICAgICAgZm9y\nIChJdGVyYXRvciBpdGVyID0gY2hhbmdlZC5pdGVyYXRvcigpOyBpdGVyLmhh\nc05leHQoKTspIHsKICAgICAgICAgICAgY2xzID0gKENsYXNzKSBpdGVyLm5l\neHQoKTsKICAgICAgICAgICAgd2hpbGUgKChzdXAgPSBQQ1JlZ2lzdHJ5Lmdl\ndFBlcnNpc3RlbnRTdXBlcmNsYXNzKGNscykpICE9IG51bGwpCiAgICAgICAg\nICAgICAgICBjbHMgPSBzdXA7CiAgICAgICAgICAgIGlmIChuYW1lcy5jb250\nYWlucyhjbHMuZ2V0TmFtZSgpKSkKICAgICAgICAgICAgICAgIHJldHVybiB0\ncnVlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBEZXRlcm1pbmUgZXF1YWxpdHkgYmFzZWQgb24gaWRl\nbnRpZnlpbmcgaW5mb3JtYXRpb24uIEtleXMKICAgICAqIGNyZWF0ZWQgZm9y\nIHF1ZXJpZXMgdGhhdCBzcGVjaWZ5IGEgY2FuZGlkYXRlIGNvbGxlY3Rpb24g\nYXJlCiAgICAgKiBhbHdheXMgbm90IGVxdWFsLgogICAgICovCiAgICBwdWJs\naWMgYm9vbGVhbiBlcXVhbHMoT2JqZWN0IG9iKSB7CiAgICAgICAgaWYgKHRo\naXMgPT0gb2IpCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIGlm\nIChvYiA9PSBudWxsIHx8IGdldENsYXNzKCkgIT0gb2IuZ2V0Q2xhc3MoKSkK\nICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoKICAgICAgICBRdWVyeUtleSBv\ndGhlciA9IChRdWVyeUtleSkgb2I7CiAgICAgICAgcmV0dXJuIFN0cmluZ1V0\naWxzLmVxdWFscyhfY2FuZGlkYXRlQ2xhc3NOYW1lLAogICAgICAgICAgICBv\ndGhlci5fY2FuZGlkYXRlQ2xhc3NOYW1lKQogICAgICAgICAgICAmJiBfc3Vi\nY2xhc3NlcyA9PSBvdGhlci5fc3ViY2xhc3NlcwogICAgICAgICAgICAmJiBf\naWdub3JlQ2hhbmdlcyA9PSBvdGhlci5faWdub3JlQ2hhbmdlcwogICAgICAg\nICAgICAmJiBfcmFuZ2VTdGFydCA9PSBvdGhlci5fcmFuZ2VTdGFydAogICAg\nICAgICAgICAmJiBfcmFuZ2VFbmQgPT0gb3RoZXIuX3JhbmdlRW5kCiAgICAg\nICAgICAgICYmIFN0cmluZ1V0aWxzLmVxdWFscyhfcXVlcnksIG90aGVyLl9x\ndWVyeSkKICAgICAgICAgICAgJiYgT2JqZWN0VXRpbHMuZXF1YWxzKF9wYXJh\nbXMsIG90aGVyLl9wYXJhbXMpOwogICAgfQoKICAgIC8qKgogICAgICogRGVm\naW5lIGEgaGFzaGluZyBhbGdvcml0aG0gY29ycmVzcG9uZGluZyB0byB0aGUg\ne0BsaW5rICNlcXVhbHN9CiAgICAgKiBtZXRob2QgZGVmaW5lZCBhYm92ZS4K\nICAgICAqLwogICAgcHVibGljIGludCBoYXNoQ29kZSgpIHsKICAgICAgICBp\nbnQgY29kZSA9IDM3ICogMTcgKyBfY2FuZGlkYXRlQ2xhc3NOYW1lLmhhc2hD\nb2RlKCk7CiAgICAgICAgaWYgKF9xdWVyeSAhPSBudWxsKQogICAgICAgICAg\nICBjb2RlID0gMzcgKiBjb2RlICsgX3F1ZXJ5Lmhhc2hDb2RlKCk7CiAgICAg\nICAgaWYgKF9wYXJhbXMgIT0gbnVsbCkKICAgICAgICAgICAgY29kZSA9IDM3\nICogY29kZSArIF9wYXJhbXMuaGFzaENvZGUoKTsKICAgICAgICByZXR1cm4g\nY29kZTsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nIHRvU3RyaW5nKCkgewog\nICAgICAgIFN0cmluZ0J1ZmZlciBidWYgPSBuZXcgU3RyaW5nQnVmZmVyKDI1\nNSk7CiAgICAgICAgYnVmLmFwcGVuZChzdXBlci50b1N0cmluZygpKS4KICAg\nICAgICAgICAgYXBwZW5kKCJbcXVlcnk6WyIpLmFwcGVuZChfcXVlcnkpLmFw\ncGVuZCgiXSIpLgogICAgICAgICAgICBhcHBlbmQoIixhY2Nlc3MgcGF0aDoi\nKS5hcHBlbmQoX2FjY2Vzc1BhdGhDbGFzc05hbWVzKS4KICAgICAgICAgICAg\nYXBwZW5kKCIsc3ViczoiKS5hcHBlbmQoX3N1YmNsYXNzZXMpLgogICAgICAg\nICAgICBhcHBlbmQoIixpZ25vcmVDaGFuZ2VzOiIpLmFwcGVuZChfaWdub3Jl\nQ2hhbmdlcykuCiAgICAgICAgICAgIGFwcGVuZCgiLHN0YXJ0UmFuZ2U6Iiku\nYXBwZW5kKF9yYW5nZVN0YXJ0KS4KICAgICAgICAgICAgYXBwZW5kKCIsZW5k\nUmFuZ2U6IikuYXBwZW5kKF9yYW5nZUVuZCkuCiAgICAgICAgICAgIGFwcGVu\nZCgiLHRpbWVvdXQ6IikuYXBwZW5kKF90aW1lb3V0KS4KICAgICAgICAgICAg\nYXBwZW5kKCJdIik7CiAgICAgICAgcmV0dXJuIGJ1Zi50b1N0cmluZygpOwog\nICAgfQoKICAgIC8vIC0tLS0tLS0tLS0gRXh0ZXJuYWxpemFibGUgaW1wbGVt\nZW50YXRpb24gLS0tLS0tLS0tLQoKICAgIHB1YmxpYyB2b2lkIHdyaXRlRXh0\nZXJuYWwoT2JqZWN0T3V0cHV0IG91dCkKICAgICAgICB0aHJvd3MgSU9FeGNl\ncHRpb24gewogICAgICAgIG91dC53cml0ZU9iamVjdChfY2FuZGlkYXRlQ2xh\nc3NOYW1lKTsKICAgICAgICBvdXQud3JpdGVCb29sZWFuKF9zdWJjbGFzc2Vz\nKTsKICAgICAgICBvdXQud3JpdGVPYmplY3QoX2FjY2Vzc1BhdGhDbGFzc05h\nbWVzKTsKICAgICAgICBvdXQud3JpdGVPYmplY3QoX3F1ZXJ5KTsKICAgICAg\nICBvdXQud3JpdGVCb29sZWFuKF9pZ25vcmVDaGFuZ2VzKTsKICAgICAgICBv\ndXQud3JpdGVPYmplY3QoX3BhcmFtcyk7CiAgICAgICAgb3V0LndyaXRlTG9u\nZyhfcmFuZ2VTdGFydCk7CiAgICAgICAgb3V0LndyaXRlTG9uZyhfcmFuZ2VF\nbmQpOwogICAgICAgIG91dC53cml0ZUludChfdGltZW91dCk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgcmVhZEV4dGVybmFsKE9iamVjdElucHV0IGluKQog\nICAgICAgIHRocm93cyBJT0V4Y2VwdGlvbiwgQ2xhc3NOb3RGb3VuZEV4Y2Vw\ndGlvbiB7CiAgICAgICAgX2NhbmRpZGF0ZUNsYXNzTmFtZSA9IChTdHJpbmcp\nIGluLnJlYWRPYmplY3QoKTsKICAgICAgICBfc3ViY2xhc3NlcyA9IGluLnJl\nYWRCb29sZWFuKCk7CiAgICAgICAgX2FjY2Vzc1BhdGhDbGFzc05hbWVzID0g\nKFNldCkgaW4ucmVhZE9iamVjdCgpOwogICAgICAgIF9xdWVyeSA9IChTdHJp\nbmcpIGluLnJlYWRPYmplY3QoKTsKICAgICAgICBfaWdub3JlQ2hhbmdlcyA9\nIGluLnJlYWRCb29sZWFuKCk7CiAgICAgICAgX3BhcmFtcyA9IChNYXApIGlu\nLnJlYWRPYmplY3QoKTsKICAgICAgICBfcmFuZ2VTdGFydCA9IGluLnJlYWRM\nb25nKCk7CiAgICAgICAgX3JhbmdlRW5kID0gaW4ucmVhZExvbmcgKCk7CgkJ\nX3RpbWVvdXQgPSBpbi5yZWFkSW50ICgpOwoJfQp9Cg==\n","encoding":"base64"}

