{"sha":"a7a7a573abd258df4cf7791cdb2ffd6fa432fff1","node_id":"MDQ6QmxvYjIwNjM2NDphN2E3YTU3M2FiZDI1OGRmNGNmNzc5MWNkYjJmZmQ2ZmE0MzJmZmYx","size":18099,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/a7a7a573abd258df4cf7791cdb2ffd6fa432fff1","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuZW5oYW5jZTsKCmltcG9ydCBq\nYXZhLmxhbmcucmVmbGVjdC5Db25zdHJ1Y3RvcjsKaW1wb3J0IGphdmEuc2Vj\ndXJpdHkuQWNjZXNzQ29udHJvbGxlcjsKCmltcG9ydCBvcmcuYXBhY2hlLmNv\nbW1vbnMubGFuZy5TdHJpbmdVdGlsczsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5saWIudXRpbC5KMkRvUHJpdkhlbHBlcjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5tZXRhLkphdmFUeXBlczsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS51dGlsLkludGVybmFsRXhjZXB0aW9uOwppbXBvcnQgc2VycC5i\neXRlY29kZS5CQ0NsYXNzOwppbXBvcnQgc2VycC5ieXRlY29kZS5CQ0NsYXNz\nTG9hZGVyOwppbXBvcnQgc2VycC5ieXRlY29kZS5CQ0ZpZWxkOwppbXBvcnQg\nc2VycC5ieXRlY29kZS5CQ01ldGhvZDsKaW1wb3J0IHNlcnAuYnl0ZWNvZGUu\nQ29kZTsKaW1wb3J0IHNlcnAuYnl0ZWNvZGUuQ29uc3RhbnRzOwppbXBvcnQg\nc2VycC5ieXRlY29kZS5JbnN0cnVjdGlvbjsKaW1wb3J0IHNlcnAuYnl0ZWNv\nZGUuSnVtcEluc3RydWN0aW9uOwppbXBvcnQgc2VycC5ieXRlY29kZS5Mb2Fk\nSW5zdHJ1Y3Rpb247CmltcG9ydCBzZXJwLmJ5dGVjb2RlLlByb2plY3Q7Cmlt\ncG9ydCBzZXJwLmJ5dGVjb2RlLlRhYmxlU3dpdGNoSW5zdHJ1Y3Rpb247Cgov\nKioKICogRmFjdG9yeSBmb3IgY3JlYXRpbmcgbmV3IHtAbGluayBEeW5hbWlj\nU3RvcmFnZX0gY2xhc3Nlcy4gQ2FuIGJlCiAqIGV4dGVuZGVkIHRvIGRlY29y\nYXRlL21vZGlmeSB0aGUgZ2VuZXJhdGVkIGluc3RhbmNlcyBiZWhhdmlvci4K\nICoKICogQGF1dGhvciBTdGV2ZSBLaW0KICogQG5vamF2YWRvYwogKiBAc2lu\nY2UgMC4zLjIuMAogKi8KcHVibGljIGNsYXNzIER5bmFtaWNTdG9yYWdlR2Vu\nZXJhdG9yIHsKCiAgICAvLyBwcmVmaXggZm9yIGdlbmVyaWMgZ2VuZXJhdGVk\nIGNsYXNzZXMuCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgUFJF\nRklYID0gIm9wZW5qcGFzdG9yYWdlJCI7CgogICAgLyoqCiAgICAgKiBDb25z\ndGFudCB0byB0aHJvdyBhbiBleGNlcHRpb24gb24gaW52YWxpZCBpbmRleCBw\nYXNzZWQgdG8gdHlwZSBzZXQvZ2V0CiAgICAgKiBtZXRob2RzCiAgICAgKi8K\nICAgIHByb3RlY3RlZCBzdGF0aWMgZmluYWwgaW50IFBPTElDWV9FWENFUFRJ\nT04gPSAwOwoKICAgIC8qKgogICAgICogQ29uc3RhbnQgdG8gbm90IGdlbmVy\nYXRlIHR5cGUgc2V0L2dldCBtZXRob2RzLgogICAgICovCiAgICBwcm90ZWN0\nZWQgc3RhdGljIGZpbmFsIGludCBQT0xJQ1lfRU1QVFkgPSAxOwoKICAgIC8q\nKgogICAgICogQ29uc3RhbnQgdG8gYmUgYXMgc2lsZW50IGFzIHBvc3NpYmxl\nIGR1cmluZyBpbnZhbGlkIGluZGV4IHBhc3NlZAogICAgICogdG8gc2V0L2dl\ndCB0eXBlIG1ldGhvZHMuIE9uIGdldHRpbmcgYW4gT2JqZWN0LCBmb3IgZXhh\nbXBsZSwKICAgICAqIG51bGwgd2lsbCBiZSByZXR1cm5lZC4KICAgICAqIEhv\nd2V2ZXIsIG9uIHByaW1pdGl2ZSBnZXRzLCBhbiBleGNlcHRpb24gd2lsbCBi\nZSB0aHJvd24uCiAgICAgKi8KICAgIHByb3RlY3RlZCBzdGF0aWMgZmluYWwg\naW50IFBPTElDWV9TSUxFTlQgPSAyOwoKICAgIC8vIHdyYXBwZXJzIGZvciBw\ncmltaXRpdmUgdHlwZXMKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIENsYXNz\nW11bXSBXUkFQUEVSUyA9IG5ldyBDbGFzc1tdW117CiAgICAgICAgeyBib29s\nZWFuLmNsYXNzLCBCb29sZWFuLmNsYXNzIH0sCiAgICAgICAgeyBieXRlLmNs\nYXNzLCBCeXRlLmNsYXNzIH0sCiAgICAgICAgeyBjaGFyLmNsYXNzLCBDaGFy\nYWN0ZXIuY2xhc3MgfSwKICAgICAgICB7IGludC5jbGFzcywgSW50ZWdlci5j\nbGFzcyB9LAogICAgICAgIHsgc2hvcnQuY2xhc3MsIFNob3J0LmNsYXNzIH0s\nCiAgICAgICAgeyBsb25nLmNsYXNzLCBMb25nLmNsYXNzIH0sCiAgICAgICAg\neyBmbG9hdC5jbGFzcywgRmxvYXQuY2xhc3MgfSwKICAgICAgICB7IGRvdWJs\nZS5jbGFzcywgRG91YmxlLmNsYXNzIH0sCiAgICB9OwoKICAgIC8vIHByaW1p\ndGl2ZSB0eXBlcwogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgaW50W10gVFlQ\nRVMgPSBuZXcgaW50W117CiAgICAgICAgSmF2YVR5cGVzLkJPT0xFQU4sCiAg\nICAgICAgSmF2YVR5cGVzLkJZVEUsCiAgICAgICAgSmF2YVR5cGVzLkNIQVIs\nCiAgICAgICAgSmF2YVR5cGVzLklOVCwKICAgICAgICBKYXZhVHlwZXMuU0hP\nUlQsCiAgICAgICAgSmF2YVR5cGVzLkxPTkcsCiAgICAgICAgSmF2YVR5cGVz\nLkZMT0FULAogICAgICAgIEphdmFUeXBlcy5ET1VCTEUsCiAgICAgICAgSmF2\nYVR5cGVzLk9CSkVDVAogICAgfTsKCiAgICAvLyB0aGUgcHJvamVjdC9jbGFz\nc2xvYWRlciBmb3IgdGhlIGNsYXNzZXMuCiAgICBwcml2YXRlIGZpbmFsIFBy\nb2plY3QgX3Byb2plY3QgPSBuZXcgUHJvamVjdCgpOwogICAgcHJpdmF0ZSBm\naW5hbCBCQ0NsYXNzTG9hZGVyIF9sb2FkZXIgPSAoQkNDbGFzc0xvYWRlcikg\nQWNjZXNzQ29udHJvbGxlcgogICAgICAgIC5kb1ByaXZpbGVnZWQoSjJEb1By\naXZIZWxwZXIubmV3QkNDbGFzc0xvYWRlckFjdGlvbihfcHJvamVjdCwKICAg\nICAgICAgICAgKENsYXNzTG9hZGVyKSBBY2Nlc3NDb250cm9sbGVyLmRvUHJp\ndmlsZWdlZChKMkRvUHJpdkhlbHBlcgogICAgICAgICAgICAgICAgLmdldENs\nYXNzTG9hZGVyQWN0aW9uKER5bmFtaWNTdG9yYWdlLmNsYXNzKSkpKTsKCiAg\nICAvKioKICAgICAqIEdlbmVyYXRlIGEgZ2VuZXJpYyB7QGxpbmsgRHluYW1p\nY1N0b3JhZ2V9IGluc3RhbmNlIHdpdGggdGhlIGdpdmVuCiAgICAgKiBhcnJh\neSBvZiB7QGxpbmsgSmF2YVR5cGVzfSBjb25zdGFudHMgYW5kIHRoZSBnaXZl\nbiBvYmplY3QgYXMKICAgICAqIHRoZSB1c2VyIGtleSBmb3IgZ2VuZXJhdGlv\nbi4KICAgICAqLwogICAgcHVibGljIER5bmFtaWNTdG9yYWdlIGdlbmVyYXRl\nU3RvcmFnZShpbnRbXSB0eXBlcywgT2JqZWN0IG9iaikgewogICAgICAgIGlm\nIChvYmogPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CgogICAg\nICAgIFN0cmluZyBuYW1lID0gZ2V0Q2xhc3NOYW1lKG9iaik7CiAgICAgICAg\nQkNDbGFzcyBiYyA9IF9wcm9qZWN0LmxvYWRDbGFzcyhuYW1lKTsKICAgICAg\nICBkZWNsYXJlQ2xhc3NlcyhiYyk7CiAgICAgICAgYmMuYWRkRGVmYXVsdENv\nbnN0cnVjdG9yKCkubWFrZVB1YmxpYygpOwoKICAgICAgICBpbnQgb2JqZWN0\nQ291bnQgPSBkZWNsYXJlRmllbGRzKHR5cGVzLCBiYyk7CiAgICAgICAgYWRk\nRmFjdG9yeU1ldGhvZChiYyk7CiAgICAgICAgYWRkRmllbGRDb3VudChiYywg\ndHlwZXMsIG9iamVjdENvdW50KTsKICAgICAgICBhZGRTZXRNZXRob2RzKGJj\nLCB0eXBlcywgb2JqZWN0Q291bnQpOwogICAgICAgIGFkZEdldE1ldGhvZHMo\nYmMsIHR5cGVzKTsKICAgICAgICBhZGRJbml0aWFsaXplKGJjLCBvYmplY3RD\nb3VudCk7CiAgICAgICAgZGVjb3JhdGUob2JqLCBiYywgdHlwZXMpOwogICAg\nICAgIHJldHVybiBjcmVhdGVGYWN0b3J5KGJjKTsKICAgIH0KCiAgICAvKioK\nICAgICAqIFJldHVybiBhIGNsYXNzIG5hbWUgdG8gdXNlIGZvciB0aGUgZ2l2\nZW4gdXNlciBrZXkuIEJ5IGRlZmF1bHQsCiAgICAgKiByZXR1cm5zIHRoZSBz\ndHJpbmdpZmllZCBrZXkgcHJlZml4ZWQgYnkgUFJFRklYLgogICAgICovCiAg\nICBwcm90ZWN0ZWQgU3RyaW5nIGdldENsYXNzTmFtZShPYmplY3Qgb2JqKSB7\nCiAgICAgICAgcmV0dXJuIFBSRUZJWCArIG9iai50b1N0cmluZygpOwogICAg\nfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBkZWZhdWx0IGZpZWxkIEFD\nQ0VTUyBjb25zdGFudCBmb3IgZ2VuZXJhdGVkIGZpZWxkcyBmcm9tCiAgICAg\nKiB7QGxpbmsgQ29uc3RhbnRzfS4KICAgICAqLwogICAgcHJvdGVjdGVkIGlu\ndCBnZXRGaWVsZEFjY2VzcygpIHsKICAgICAgICByZXR1cm4gQ29uc3RhbnRz\nLkFDQ0VTU19QUklWQVRFOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJu\nIHRoZSBuYW1lIGZvciB0aGUgZ2VuZXJhdGVkIGZpZWxkIGF0IHRoZSBnaXZl\nbiBpbmRleC4gUmV0dXJucwogICAgICogPGNvZGU+ImZpZWxkIiArIGk8L2Nv\nZGU+IGJ5IGRlZmF1bHQuCiAgICAgKi8KICAgIHByb3RlY3RlZCBTdHJpbmcg\nZ2V0RmllbGROYW1lKGludCBpbmRleCkgewogICAgICAgIHJldHVybiAiZmll\nbGQiICsgaW5kZXg7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhl\nIHBvbGljeSBjb25zdGFudCBmb3IgaG93IHRvIGNyZWF0ZSB0eXBlIG1ldGhv\nZHMuCiAgICAgKi8KICAgIHByb3RlY3RlZCBpbnQgZ2V0Q3JlYXRlRmllbGRN\nZXRob2RzKGludCB0eXBlKSB7CiAgICAgICAgcmV0dXJuIFBPTElDWV9FWENF\nUFRJT047CiAgICB9CgogICAgLyoqCiAgICAgKiBEZWNvcmF0ZSB0aGUgZ2Vu\nZXJhdGVkIGNsYXNzLgogICAgICovCiAgICBwcm90ZWN0ZWQgdm9pZCBkZWNv\ncmF0ZShPYmplY3Qgb2JqLCBCQ0NsYXNzIGNscywgaW50W10gdHlwZXMpIHsK\nICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhIHN0dWIgZmFjdG9yeSBp\nbnN0YW5jZSBmb3IgdGhlIGdpdmVuIGNsYXNzLgogICAgICovCiAgICBwcm90\nZWN0ZWQgRHluYW1pY1N0b3JhZ2UgY3JlYXRlRmFjdG9yeShCQ0NsYXNzIGJj\nKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgQ2xhc3MgY2xzID0gQ2xh\nc3MuZm9yTmFtZShiYy5nZXROYW1lKCksIGZhbHNlLCBfbG9hZGVyKTsKICAg\nICAgICAgICAgQ29uc3RydWN0b3IgY29ucyA9IGNscy5nZXRDb25zdHJ1Y3Rv\ncigoQ2xhc3NbXSkgbnVsbCk7CiAgICAgICAgICAgIER5bmFtaWNTdG9yYWdl\nIGRhdGEgPSAoRHluYW1pY1N0b3JhZ2UpIGNvbnMubmV3SW5zdGFuY2UKICAg\nICAgICAgICAgICAgICgoT2JqZWN0W10pIG51bGwpOwogICAgICAgICAgICBf\ncHJvamVjdC5jbGVhcigpOyAvLyByZW1vdmUgb2xkIHJlZnMKICAgICAgICAg\nICAgcmV0dXJuIGRhdGE7CiAgICAgICAgfSBjYXRjaCAoVGhyb3dhYmxlIHQp\nIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9uKCJj\nb25zLWFjY2VzcyIsIHQpLnNldEZhdGFsKHRydWUpOwogICAgICAgIH0KICAg\nIH0KCiAgICAvKioKICAgICAqIEFkZCBpbnRlcmZhY2Ugb3Igc3VwZXJjbGFz\ncyBkZWNsYXJhdGlvbnMgdG8gdGhlIGdlbmVyYXRlZCBjbGFzcy4KICAgICAq\nLwogICAgcHJvdGVjdGVkIHZvaWQgZGVjbGFyZUNsYXNzZXMoQkNDbGFzcyBi\nYykgewogICAgICAgIGJjLmRlY2xhcmVJbnRlcmZhY2UoRHluYW1pY1N0b3Jh\nZ2UuY2xhc3MpOwogICAgfQoKICAgIC8qKgogICAgICogSW1wbGVtZW50IHRo\nZSBuZXdJbnN0YW5jZSBtZXRob2QuCiAgICAgKi8KICAgIHByaXZhdGUgdm9p\nZCBhZGRGYWN0b3J5TWV0aG9kKEJDQ2xhc3MgYmMpIHsKICAgICAgICBCQ01l\ndGhvZCBtZXRob2QgPSBiYy5kZWNsYXJlTWV0aG9kKCJuZXdJbnN0YW5jZSIs\nCiAgICAgICAgICAgIER5bmFtaWNTdG9yYWdlLmNsYXNzLCBudWxsKTsKICAg\nICAgICBDb2RlIGNvZGUgPSBtZXRob2QuZ2V0Q29kZSh0cnVlKTsKICAgICAg\nICBjb2RlLmFuZXcoKS5zZXRUeXBlKGJjKTsKICAgICAgICBjb2RlLmR1cCgp\nOwogICAgICAgIGNvZGUuaW52b2tlc3BlY2lhbCgpLnNldE1ldGhvZChiYy5n\nZXROYW1lKCksICI8aW5pdD4iLCAidm9pZCIsIG51bGwpOwogICAgICAgIGNv\nZGUuYXJldHVybigpOwogICAgICAgIGNvZGUuY2FsY3VsYXRlTWF4TG9jYWxz\nKCk7CiAgICAgICAgY29kZS5jYWxjdWxhdGVNYXhTdGFjaygpOwogICAgfQoK\nICAgIC8qKgogICAgICogSW1wbGVtZW50IGdldEZpZWxkQ291bnQvZ2V0T2Jq\nZWN0Q291bnQuCiAgICAgKi8KICAgIHByaXZhdGUgdm9pZCBhZGRGaWVsZENv\ndW50KEJDQ2xhc3MgYmMsIGludFtdIHR5cGVzLCBpbnQgb2JqZWN0Q291bnQp\nIHsKICAgICAgICBCQ01ldGhvZCBtZXRob2QgPSBiYy5kZWNsYXJlTWV0aG9k\nKCJnZXRGaWVsZENvdW50IiwgaW50LmNsYXNzLCBudWxsKTsKICAgICAgICBD\nb2RlIGNvZGUgPSBtZXRob2QuZ2V0Q29kZSh0cnVlKTsKICAgICAgICBjb2Rl\nLmNvbnN0YW50KCkuc2V0VmFsdWUodHlwZXMubGVuZ3RoKTsKICAgICAgICBj\nb2RlLmlyZXR1cm4oKTsKICAgICAgICBjb2RlLmNhbGN1bGF0ZU1heExvY2Fs\ncygpOwogICAgICAgIGNvZGUuY2FsY3VsYXRlTWF4U3RhY2soKTsKCiAgICAg\nICAgbWV0aG9kID0gYmMuZGVjbGFyZU1ldGhvZCgiZ2V0T2JqZWN0Q291bnQi\nLCBpbnQuY2xhc3MsIG51bGwpOwogICAgICAgIGNvZGUgPSBtZXRob2QuZ2V0\nQ29kZSh0cnVlKTsKICAgICAgICBjb2RlLmNvbnN0YW50KCkuc2V0VmFsdWUo\nb2JqZWN0Q291bnQpOwogICAgICAgIGNvZGUuaXJldHVybigpOwogICAgICAg\nIGNvZGUuY2FsY3VsYXRlTWF4TG9jYWxzKCk7CiAgICAgICAgY29kZS5jYWxj\ndWxhdGVNYXhTdGFjaygpOwogICAgfQoKICAgIC8qKgogICAgICogSW1wbGVt\nZW50IGluaXRpYWxpemUuCiAgICAgKi8KICAgIHByaXZhdGUgdm9pZCBhZGRJ\nbml0aWFsaXplKEJDQ2xhc3MgYmMsIGludCBvYmplY3RDb3VudCkgewogICAg\nICAgIEJDTWV0aG9kIG1ldGggPSBiYy5kZWNsYXJlTWV0aG9kKCJpbml0aWFs\naXplIiwgdm9pZC5jbGFzcywgbnVsbCk7CiAgICAgICAgQ29kZSBjb2RlID0g\nbWV0aC5nZXRDb2RlKHRydWUpOwogICAgICAgIEp1bXBJbnN0cnVjdGlvbiBp\nZmlucyA9IG51bGw7CiAgICAgICAgaWYgKG9iamVjdENvdW50ID4gMCkgewog\nICAgICAgICAgICAvLyBpZiAob2JqZWN0cyA9PSBudWxsKQogICAgICAgICAg\nICAvLyAJCW9iamVjdHMgPSBuZXcgT2JqZWN0W29iamVjdENvdW50XTsKICAg\nICAgICAgICAgY29kZS5hbG9hZCgpLnNldFRoaXMoKTsKICAgICAgICAgICAg\nY29kZS5nZXRmaWVsZCgpLnNldEZpZWxkKCJvYmplY3RzIiwgT2JqZWN0W10u\nY2xhc3MpOwogICAgICAgICAgICBpZmlucyA9IGNvZGUuaWZub25udWxsKCk7\nCiAgICAgICAgICAgIGNvZGUuYWxvYWQoKS5zZXRUaGlzKCk7CiAgICAgICAg\nICAgIGNvZGUuY29uc3RhbnQoKS5zZXRWYWx1ZShvYmplY3RDb3VudCk7CiAg\nICAgICAgICAgIGNvZGUuYW5ld2FycmF5KCkuc2V0VHlwZShPYmplY3QuY2xh\nc3MpOwogICAgICAgICAgICBjb2RlLnB1dGZpZWxkKCkuc2V0RmllbGQoIm9i\namVjdHMiLCBPYmplY3RbXS5jbGFzcyk7CiAgICAgICAgfQogICAgICAgIElu\nc3RydWN0aW9uIGlucyA9IGNvZGUudnJldHVybigpOwogICAgICAgIGlmIChp\nZmlucyAhPSBudWxsKQogICAgICAgICAgICBpZmlucy5zZXRUYXJnZXQoaW5z\nKTsKICAgICAgICBjb2RlLmNhbGN1bGF0ZU1heExvY2FscygpOwogICAgICAg\nIGNvZGUuY2FsY3VsYXRlTWF4U3RhY2soKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIERlY2xhcmUgdGhlIHByaW1pdGl2ZSBmaWVsZHMgYW5kIHRoZSBvYmpl\nY3QgZmllbGQuCiAgICAgKi8KICAgIHByaXZhdGUgaW50IGRlY2xhcmVGaWVs\nZHMoaW50W10gdHlwZXMsIEJDQ2xhc3MgYmMpIHsKICAgICAgICBiYy5kZWNs\nYXJlRmllbGQoIm9iamVjdHMiLCBPYmplY3RbXS5jbGFzcykubWFrZVByaXZh\ndGUoKTsKCiAgICAgICAgaW50IG9iamVjdENvdW50ID0gMDsKICAgICAgICBD\nbGFzcyB0eXBlOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgdHlwZXMu\nbGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdHlwZSA9IGZvclR5cGUodHlw\nZXNbaV0pOwogICAgICAgICAgICBpZiAodHlwZSA9PSBPYmplY3QuY2xhc3Mp\nCiAgICAgICAgICAgICAgICBvYmplY3RDb3VudCsrOwogICAgICAgICAgICBl\nbHNlIHsKICAgICAgICAgICAgICAgIEJDRmllbGQgZmllbGQgPSBiYy5kZWNs\nYXJlRmllbGQoZ2V0RmllbGROYW1lKGkpLCB0eXBlKTsKICAgICAgICAgICAg\nICAgIGZpZWxkLnNldEFjY2Vzc0ZsYWdzKGdldEZpZWxkQWNjZXNzKCkpOwog\nICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBvYmplY3RD\nb3VudDsKICAgIH0KCiAgICAvKioKICAgICAqIEFkZCBhbGwgdGhlIHR5cGVk\nIHNldCBieSBpbmRleCBtZXRob2QuCiAgICAgKi8KICAgIHByaXZhdGUgdm9p\nZCBhZGRTZXRNZXRob2RzKEJDQ2xhc3MgYmMsIGludFtdIHR5cGVzLCBpbnQg\ndG90YWxPYmplY3RzKSB7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBU\nWVBFUy5sZW5ndGg7IGkrKykKICAgICAgICAgICAgYWRkU2V0TWV0aG9kKFRZ\nUEVTW2ldLCBiYywgdHlwZXMsIHRvdGFsT2JqZWN0cyk7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBBZGQgdGhlIHR5cGVkIHNldCBieSBpbmRleCBtZXRob2Qu\nCiAgICAgKi8KICAgIHByaXZhdGUgdm9pZCBhZGRTZXRNZXRob2QoaW50IHR5\ncGVDb2RlLCBCQ0NsYXNzIGJjLCBpbnRbXSB0eXBlcywKICAgICAgICBpbnQg\ndG90YWxPYmplY3RzKSB7CiAgICAgICAgaW50IGhhbmRsZSA9IGdldENyZWF0\nZUZpZWxkTWV0aG9kcyh0eXBlQ29kZSk7CiAgICAgICAgaWYgKGhhbmRsZSA9\nPSBQT0xJQ1lfRU1QVFkpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBD\nbGFzcyB0eXBlID0gZm9yVHlwZSh0eXBlQ29kZSk7CiAgICAgICAgLy8gcHVi\nbGljIHZvaWQgc2V0PFR5cGU+IChpbnQgZmllbGQsIDx0eXBlPiB2YWwpCiAg\nICAgICAgU3RyaW5nIG5hbWUgPSBPYmplY3QuY2xhc3MuZXF1YWxzKHR5cGUp\nID8gIk9iamVjdCIgOgogICAgICAgICAgICBTdHJpbmdVdGlscy5jYXBpdGFs\naXplKHR5cGUuZ2V0TmFtZSgpKTsKICAgICAgICBuYW1lID0gInNldCIgKyBu\nYW1lOwogICAgICAgIEJDTWV0aG9kIG1ldGhvZCA9IGJjLmRlY2xhcmVNZXRo\nb2QobmFtZSwgdm9pZC5jbGFzcywKICAgICAgICAgICAgbmV3IENsYXNzW117\nIGludC5jbGFzcywgdHlwZSB9KTsKICAgICAgICBtZXRob2QubWFrZVB1Ymxp\nYygpOwogICAgICAgIENvZGUgY29kZSA9IG1ldGhvZC5nZXRDb2RlKHRydWUp\nOwogICAgICAgIC8vIHN3aXRjaCAoZmllbGQpCiAgICAgICAgY29kZS5hbG9h\nZCgpLnNldFBhcmFtKDApOwogICAgICAgIFRhYmxlU3dpdGNoSW5zdHJ1Y3Rp\nb24gdGFiaW5zID0gY29kZS50YWJsZXN3aXRjaCgpOwogICAgICAgIHRhYmlu\ncy5zZXRMb3coMCk7CiAgICAgICAgdGFiaW5zLnNldEhpZ2godHlwZXMubGVu\nZ3RoIC0gMSk7CiAgICAgICAgSW5zdHJ1Y3Rpb24gZGVmYXVsdEluczsKICAg\nICAgICBpZiAoaGFuZGxlID09IFBPTElDWV9TSUxFTlQpCiAgICAgICAgICAg\nIGRlZmF1bHRJbnMgPSBjb2RlLnZyZXR1cm4oKTsKICAgICAgICBlbHNlCiAg\nICAgICAgICAgIGRlZmF1bHRJbnMgPSB0aHJvd0V4Y2VwdGlvbgogICAgICAg\nICAgICAgICAgKGNvZGUsIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5jbGFz\ncyk7CiAgICAgICAgdGFiaW5zLnNldERlZmF1bHRUYXJnZXQoZGVmYXVsdElu\ncyk7CiAgICAgICAgaW50IG9iamVjdENvdW50ID0gMDsKICAgICAgICBmb3Ig\nKGludCBpID0gMDsgaSA8IHR5cGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAg\nICAgIC8vIGRlZmF1bHQ6IHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNl\ncHRpb24KICAgICAgICAgICAgaWYgKCFpc0NvbXBhdGlibGUodHlwZXNbaV0s\nIHR5cGVDb2RlKSkgewogICAgICAgICAgICAgICAgdGFiaW5zLmFkZFRhcmdl\ndCh0YWJpbnMuZ2V0RGVmYXVsdFRhcmdldCgpKTsKICAgICAgICAgICAgICAg\nIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0YWJpbnMu\nYWRkVGFyZ2V0KGNvZGUuYWxvYWQoKS5zZXRUaGlzKCkpOwogICAgICAgICAg\nICBpZiAodHlwZUNvZGUgPj0gSmF2YVR5cGVzLk9CSkVDVCkgewogICAgICAg\nICAgICAgICAgLy8gaWYgKG9iamVjdHMgPT0gbnVsbCkKICAgICAgICAgICAg\nICAgIC8vIAkJb2JqZWN0cyA9IG5ldyBPYmplY3RbdG90YWxPYmplY3RzXTsK\nICAgICAgICAgICAgICAgIGNvZGUuYWxvYWQoKS5zZXRUaGlzKCk7CiAgICAg\nICAgICAgICAgICBjb2RlLmdldGZpZWxkKCkuc2V0RmllbGQoIm9iamVjdHMi\nLCBPYmplY3RbXS5jbGFzcyk7CiAgICAgICAgICAgICAgICBKdW1wSW5zdHJ1\nY3Rpb24gaWZpbnMgPSBjb2RlLmlmbm9ubnVsbCgpOwogICAgICAgICAgICAg\nICAgY29kZS5hbG9hZCgpLnNldFRoaXMoKTsKICAgICAgICAgICAgICAgIGNv\nZGUuY29uc3RhbnQoKS5zZXRWYWx1ZSh0b3RhbE9iamVjdHMpOwogICAgICAg\nICAgICAgICAgY29kZS5hbmV3YXJyYXkoKS5zZXRUeXBlKE9iamVjdC5jbGFz\ncyk7CiAgICAgICAgICAgICAgICBjb2RlLnB1dGZpZWxkKCkuc2V0RmllbGQo\nIm9iamVjdHMiLCBPYmplY3RbXS5jbGFzcyk7CgogICAgICAgICAgICAgICAg\nLy8gb2JqZWN0c1tvYmplY3RDb3VudF0gPSB2YWw7CiAgICAgICAgICAgICAg\nICBpZmlucy5zZXRUYXJnZXQoY29kZS5hbG9hZCgpLnNldFRoaXMoKSk7CiAg\nICAgICAgICAgICAgICBjb2RlLmdldGZpZWxkKCkuc2V0RmllbGQoIm9iamVj\ndHMiLCBPYmplY3RbXS5jbGFzcyk7CiAgICAgICAgICAgICAgICBjb2RlLmNv\nbnN0YW50KCkuc2V0VmFsdWUob2JqZWN0Q291bnQpOwogICAgICAgICAgICAg\nICAgY29kZS5hbG9hZCgpLnNldFBhcmFtKDEpOwogICAgICAgICAgICAgICAg\nY29kZS5hYXN0b3JlKCk7CiAgICAgICAgICAgICAgICBvYmplY3RDb3VudCsr\nOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gY2Fz\nZSBpOiBmaWVsZGkgPSB2YWw7CiAgICAgICAgICAgICAgICBMb2FkSW5zdHJ1\nY3Rpb24gbG9hZCA9IGNvZGUueGxvYWQoKTsKICAgICAgICAgICAgICAgIGxv\nYWQuc2V0VHlwZSh0eXBlKTsKICAgICAgICAgICAgICAgIGxvYWQuc2V0UGFy\nYW0oMSk7CiAgICAgICAgICAgICAgICBjb2RlLnB1dGZpZWxkKCkuc2V0Rmll\nbGQoImZpZWxkIiArIGksIHR5cGUpOwogICAgICAgICAgICB9CiAgICAgICAg\nICAgIC8vIHJldHVybgogICAgICAgICAgICBjb2RlLnZyZXR1cm4oKTsKICAg\nICAgICB9CiAgICAgICAgY29kZS5jYWxjdWxhdGVNYXhMb2NhbHMoKTsKICAg\nICAgICBjb2RlLmNhbGN1bGF0ZU1heFN0YWNrKCk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBBZGQgYWxsIHR5cGVkIGdldCBieSBpbmRleCBtZXRob2QgZm9y\nIHRoZSBnaXZlbiBmaWVsZHMuCiAgICAgKi8KICAgIHByaXZhdGUgdm9pZCBh\nZGRHZXRNZXRob2RzKEJDQ2xhc3MgYmMsIGludFtdIHR5cGVzKSB7CiAgICAg\nICAgZm9yIChpbnQgaSA9IDA7IGkgPCBUWVBFUy5sZW5ndGg7IGkrKykKICAg\nICAgICAgICAgYWRkR2V0TWV0aG9kKFRZUEVTW2ldLCBiYywgdHlwZXMpOwog\nICAgfQoKICAgIC8qKgogICAgICogQWRkIHR5cGVkIGdldCBieSBpbmRleCBt\nZXRob2QuCiAgICAgKi8KICAgIHByaXZhdGUgdm9pZCBhZGRHZXRNZXRob2Qo\naW50IHR5cGVDb2RlLCBCQ0NsYXNzIGJjLCBpbnRbXSB0eXBlcykgewogICAg\nICAgIGludCBoYW5kbGUgPSBnZXRDcmVhdGVGaWVsZE1ldGhvZHModHlwZUNv\nZGUpOwogICAgICAgIGlmIChoYW5kbGUgPT0gUE9MSUNZX0VNUFRZKQogICAg\nICAgICAgICByZXR1cm47CiAgICAgICAgQ2xhc3MgdHlwZSA9IGZvclR5cGUo\ndHlwZUNvZGUpOwogICAgICAgIC8vIHB1YmxpYyA8dHlwZT4gZ2V0PFR5cGU+\nRmllbGQgKGludCBmaWVsZCkKICAgICAgICBTdHJpbmcgbmFtZSA9IE9iamVj\ndC5jbGFzcy5lcXVhbHModHlwZSkgPyAiT2JqZWN0IiA6CiAgICAgICAgICAg\nIFN0cmluZ1V0aWxzLmNhcGl0YWxpemUodHlwZS5nZXROYW1lKCkpOwogICAg\nICAgIG5hbWUgPSAiZ2V0IiArIG5hbWU7CiAgICAgICAgQkNNZXRob2QgbWV0\naG9kID0gYmMuZGVjbGFyZU1ldGhvZChuYW1lLCB0eXBlLAogICAgICAgICAg\nICBuZXcgQ2xhc3NbXXsgaW50LmNsYXNzIH0pOwogICAgICAgIG1ldGhvZC5t\nYWtlUHVibGljKCk7CiAgICAgICAgQ29kZSBjb2RlID0gbWV0aG9kLmdldENv\nZGUodHJ1ZSk7CiAgICAgICAgLy8gc3dpdGNoIChmaWVsZCkKICAgICAgICBj\nb2RlLmFsb2FkKCkuc2V0UGFyYW0oMCk7CiAgICAgICAgVGFibGVTd2l0Y2hJ\nbnN0cnVjdGlvbiB0YWJpbnMgPSBjb2RlLnRhYmxlc3dpdGNoKCk7CiAgICAg\nICAgdGFiaW5zLnNldExvdygwKTsKICAgICAgICB0YWJpbnMuc2V0SGlnaCh0\neXBlcy5sZW5ndGggLSAxKTsKICAgICAgICBJbnN0cnVjdGlvbiBkZWZhdWx0\nSW5zID0gbnVsbDsKICAgICAgICBpZiAodHlwZUNvZGUgPT0gSmF2YVR5cGVz\nLk9CSkVDVCAmJiBoYW5kbGUgPT0gUE9MSUNZX1NJTEVOVCkgewogICAgICAg\nICAgICBkZWZhdWx0SW5zID0gY29kZS5jb25zdGFudCgpLnNldE51bGwoKTsK\nICAgICAgICAgICAgY29kZS5hcmV0dXJuKCk7CiAgICAgICAgfSBlbHNlCiAg\nICAgICAgICAgIGRlZmF1bHRJbnMgPSB0aHJvd0V4Y2VwdGlvbgogICAgICAg\nICAgICAgICAgKGNvZGUsIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5jbGFz\ncyk7CiAgICAgICAgdGFiaW5zLnNldERlZmF1bHRUYXJnZXQoZGVmYXVsdElu\ncyk7CiAgICAgICAgaW50IG9iamVjdENvdW50ID0gMDsKICAgICAgICBmb3Ig\nKGludCBpID0gMDsgaSA8IHR5cGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAg\nICAgIC8vIGRlZmF1bHQ6IHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNl\ncHRpb24KICAgICAgICAgICAgaWYgKCFpc0NvbXBhdGlibGUodHlwZXNbaV0s\nIHR5cGVDb2RlKSkgewogICAgICAgICAgICAgICAgdGFiaW5zLmFkZFRhcmdl\ndCh0YWJpbnMuZ2V0RGVmYXVsdFRhcmdldCgpKTsKICAgICAgICAgICAgICAg\nIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0YWJpbnMu\nYWRkVGFyZ2V0KGNvZGUuYWxvYWQoKS5zZXRUaGlzKCkpOwogICAgICAgICAg\nICBpZiAodHlwZUNvZGUgPj0gSmF2YVR5cGVzLk9CSkVDVCkgewogICAgICAg\nICAgICAgICAgLy8gaWYgKG9iamVjdHMgPT0gbnVsbCkKICAgICAgICAgICAg\nICAgIC8vIAkJcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICAvLyByZXR1\ncm4gb2JqZWN0c1tvYmplY3RDb3VudF07CiAgICAgICAgICAgICAgICBjb2Rl\nLmFsb2FkKCkuc2V0VGhpcygpOwogICAgICAgICAgICAgICAgY29kZS5nZXRm\naWVsZCgpLnNldEZpZWxkKCJvYmplY3RzIiwgT2JqZWN0W10uY2xhc3MpOwog\nICAgICAgICAgICAgICAgSnVtcEluc3RydWN0aW9uIGlmaW5zID0gY29kZS5p\nZm5vbm51bGwoKTsKICAgICAgICAgICAgICAgIGNvZGUuY29uc3RhbnQoKS5z\nZXROdWxsKCk7CiAgICAgICAgICAgICAgICBjb2RlLmFyZXR1cm4oKTsKICAg\nICAgICAgICAgICAgIGlmaW5zLnNldFRhcmdldChjb2RlLmFsb2FkKCkuc2V0\nVGhpcygpKTsKICAgICAgICAgICAgICAgIGNvZGUuZ2V0ZmllbGQoKS5zZXRG\naWVsZCgib2JqZWN0cyIsIE9iamVjdFtdLmNsYXNzKTsKICAgICAgICAgICAg\nICAgIGNvZGUuY29uc3RhbnQoKS5zZXRWYWx1ZShvYmplY3RDb3VudCk7CiAg\nICAgICAgICAgICAgICBjb2RlLmFhbG9hZCgpOwogICAgICAgICAgICAgICAg\nY29kZS5hcmV0dXJuKCk7CiAgICAgICAgICAgICAgICBvYmplY3RDb3VudCsr\nOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gY2Fz\nZSBpOiByZXR1cm4gZmllbGRpOwogICAgICAgICAgICAgICAgY29kZS5nZXRm\naWVsZCgpLnNldEZpZWxkKCJmaWVsZCIgKyBpLCB0eXBlKTsKICAgICAgICAg\nICAgICAgIGNvZGUueHJldHVybigpLnNldFR5cGUodHlwZSk7CiAgICAgICAg\nICAgIH0KICAgICAgICB9CiAgICAgICAgY29kZS5jYWxjdWxhdGVNYXhMb2Nh\nbHMoKTsKICAgICAgICBjb2RlLmNhbGN1bGF0ZU1heFN0YWNrKCk7CiAgICB9\nCgogICAgLy8vLy8vLy8vLy8vLwogICAgLy8gVXRpbGl0aWVzCiAgICAvLy8v\nLy8vLy8vLy8vCgogICAgLyoqCiAgICAgKiBDbGVhciBjb2RlIGFzc29jaWF0\nZWQgd2l0aCB0aGUgZ2l2ZW4gbWV0aG9kIHNpZ25hdHVyZSwgYW5kIHJldHVy\nbgogICAgICogdGhlIGVtcHR5IGNvZGUuIFdpbGwgcmV0dXJuIG51bGwgaWYg\ndGhlIG1ldGhvZCBzaG91bGQgYmUgZW1wdHkuCiAgICAgKi8KICAgIHByb3Rl\nY3RlZCBDb2RlIHJlcGxhY2VNZXRob2QoQkNDbGFzcyBiYywgU3RyaW5nIG5h\nbWUsIENsYXNzIHJldFR5cGUsCiAgICAgICAgQ2xhc3NbXSBhcmdzLCBib29s\nZWFuIHJlbW92ZSkgewogICAgICAgIGJjLnJlbW92ZURlY2xhcmVkTWV0aG9k\nKG5hbWUsIGFyZ3MpOwogICAgICAgIEJDTWV0aG9kIG1ldGggPSBiYy5kZWNs\nYXJlTWV0aG9kKG5hbWUsIHJldFR5cGUsIGFyZ3MpOwogICAgICAgIENvZGUg\nY29kZSA9IG1ldGguZ2V0Q29kZSh0cnVlKTsKICAgICAgICBpZiAoIXJlbW92\nZSkKICAgICAgICAgICAgcmV0dXJuIGNvZGU7CiAgICAgICAgY29kZS54cmV0\ndXJuKCkuc2V0VHlwZShyZXRUeXBlKTsKICAgICAgICBjb2RlLmNhbGN1bGF0\nZU1heFN0YWNrKCk7CiAgICAgICAgY29kZS5jYWxjdWxhdGVNYXhMb2NhbHMo\nKTsKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICAvKioKICAgICAq\nIEFkZCBhIGJlYW4gZmllbGQgb2YgdGhlIGdpdmVuIG5hbWUgYW5kIHR5cGUu\nCiAgICAgKi8KICAgIHByb3RlY3RlZCBCQ0ZpZWxkIGFkZEJlYW5GaWVsZChC\nQ0NsYXNzIGJjLCBTdHJpbmcgbmFtZSwgQ2xhc3MgdHlwZSkgewogICAgICAg\nIGlmIChuYW1lID09IG51bGwpCiAgICAgICAgICAgIHRocm93IG5ldyBJbGxl\nZ2FsQXJndW1lbnRFeGNlcHRpb24oIm5hbWUgPT0gbnVsbCIpOwoKICAgICAg\nICAvLyBwcml2YXRlIDx0eXBlPiA8bmFtZT4KICAgICAgICBCQ0ZpZWxkIGZp\nZWxkID0gYmMuZGVjbGFyZUZpZWxkKG5hbWUsIHR5cGUpOwogICAgICAgIGZp\nZWxkLnNldEFjY2Vzc0ZsYWdzKGdldEZpZWxkQWNjZXNzKCkpOwogICAgICAg\nIG5hbWUgPSBTdHJpbmdVdGlscy5jYXBpdGFsaXplKG5hbWUpOwoKICAgICAg\nICAvLyBnZXR0ZXIKICAgICAgICBTdHJpbmcgcHJlZml4ID0gKHR5cGUgPT0g\nYm9vbGVhbi5jbGFzcykgPyAiaXMiIDogImdldCI7CiAgICAgICAgQkNNZXRo\nb2QgbWV0aG9kID0gYmMuZGVjbGFyZU1ldGhvZChwcmVmaXggKyBuYW1lLCB0\neXBlLCBudWxsKTsKICAgICAgICBtZXRob2QubWFrZVB1YmxpYygpOwogICAg\nICAgIENvZGUgY29kZSA9IG1ldGhvZC5nZXRDb2RlKHRydWUpOwogICAgICAg\nIGNvZGUuYWxvYWQoKS5zZXRUaGlzKCk7CiAgICAgICAgY29kZS5nZXRmaWVs\nZCgpLnNldEZpZWxkKGZpZWxkKTsKICAgICAgICBjb2RlLnhyZXR1cm4oKS5z\nZXRUeXBlKHR5cGUpOwogICAgICAgIGNvZGUuY2FsY3VsYXRlTWF4U3RhY2so\nKTsKICAgICAgICBjb2RlLmNhbGN1bGF0ZU1heExvY2FscygpOwoKICAgICAg\nICAvLyBzZXR0ZXIKICAgICAgICBtZXRob2QgPSBiYy5kZWNsYXJlTWV0aG9k\nKCJzZXQiICsgbmFtZSwgdm9pZC5jbGFzcywKICAgICAgICAgICAgbmV3IENs\nYXNzW117IHR5cGUgfSk7CiAgICAgICAgbWV0aG9kLm1ha2VQdWJsaWMoKTsK\nICAgICAgICBjb2RlID0gbWV0aG9kLmdldENvZGUodHJ1ZSk7CiAgICAgICAg\nY29kZS5hbG9hZCgpLnNldFRoaXMoKTsKICAgICAgICBjb2RlLnhsb2FkKCku\nc2V0UGFyYW0oMCkuc2V0VHlwZSh0eXBlKTsKICAgICAgICBjb2RlLnB1dGZp\nZWxkKCkuc2V0RmllbGQoZmllbGQpOwogICAgICAgIGNvZGUudnJldHVybigp\nOwogICAgICAgIGNvZGUuY2FsY3VsYXRlTWF4U3RhY2soKTsKICAgICAgICBj\nb2RlLmNhbGN1bGF0ZU1heExvY2FscygpOwogICAgICAgIHJldHVybiBmaWVs\nZDsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0cnVlIGlmIHRoZSBn\naXZlbiBmaWVsZCB0eXBlIGFuZCBzdG9yYWdlIHR5cGUgYXJlIGNvbXBhdGli\nbGUuCiAgICAgKi8KICAgIHByb3RlY3RlZCBib29sZWFuIGlzQ29tcGF0aWJs\nZShpbnQgZmllbGRUeXBlLCBpbnQgc3RvcmFnZVR5cGUpIHsKICAgICAgICBp\nZiAoc3RvcmFnZVR5cGUgPT0gSmF2YVR5cGVzLk9CSkVDVCkKICAgICAgICAg\nICAgcmV0dXJuIGZpZWxkVHlwZSA+PSBKYXZhVHlwZXMuT0JKRUNUOwogICAg\nICAgIHJldHVybiBmaWVsZFR5cGUgPT0gc3RvcmFnZVR5cGU7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBUaHJvdyBhbiBleGNlcHRpb24gb2YgdGhlIGdpdmVu\nIHR5cGUuCiAgICAgKi8KICAgIHByb3RlY3RlZCBJbnN0cnVjdGlvbiB0aHJv\nd0V4Y2VwdGlvbihDb2RlIGNvZGUsIENsYXNzIHR5cGUpIHsKICAgICAgICBJ\nbnN0cnVjdGlvbiBpbnMgPSBjb2RlLmFuZXcoKS5zZXRUeXBlKHR5cGUpOwog\nICAgICAgIGNvZGUuZHVwKCk7CiAgICAgICAgY29kZS5pbnZva2VzcGVjaWFs\nKCkuc2V0TWV0aG9kKHR5cGUsICI8aW5pdD4iLCB2b2lkLmNsYXNzLCBudWxs\nKTsKICAgICAgICBjb2RlLmF0aHJvdygpOwogICAgICAgIHJldHVybiBpbnM7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIHByb3BlciB0eXBl\nIGZvciB0aGUgZ2l2ZW4ge0BsaW5rIEphdmFUeXBlc30gY29uc3RhbnQuCiAg\nICAgKi8KICAgIHByb3RlY3RlZCBDbGFzcyBmb3JUeXBlKGludCB0eXBlKSB7\nCiAgICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgICAgIGNhc2UgSmF2\nYVR5cGVzLkJPT0xFQU46CiAgICAgICAgICAgICAgICByZXR1cm4gYm9vbGVh\nbi5jbGFzczsKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuQllURToKICAg\nICAgICAgICAgICAgIHJldHVybiBieXRlLmNsYXNzOwogICAgICAgICAgICBj\nYXNlIEphdmFUeXBlcy5DSEFSOgogICAgICAgICAgICAgICAgcmV0dXJuIGNo\nYXIuY2xhc3M7CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLklOVDoKICAg\nICAgICAgICAgICAgIHJldHVybiBpbnQuY2xhc3M7CiAgICAgICAgICAgIGNh\nc2UgSmF2YVR5cGVzLlNIT1JUOgogICAgICAgICAgICAgICAgcmV0dXJuIHNo\nb3J0LmNsYXNzOwogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5MT05HOgog\nICAgICAgICAgICAgICAgcmV0dXJuIGxvbmcuY2xhc3M7CiAgICAgICAgICAg\nIGNhc2UgSmF2YVR5cGVzLkZMT0FUOgogICAgICAgICAgICAgICAgcmV0dXJu\nIGZsb2F0LmNsYXNzOwogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5ET1VC\nTEU6CiAgICAgICAgICAgICAgICByZXR1cm4gZG91YmxlLmNsYXNzOwogICAg\nICAgIH0KICAgICAgICByZXR1cm4gT2JqZWN0LmNsYXNzOwogICAgfQoKICAg\nIC8qKgogICAgICogZ2V0IHRoZSB3cmFwcGVyIGZvciB0aGUgZ2l2ZW4ge0Bs\naW5rIEphdmFUeXBlc30gY29uc3RhbnQuCiAgICAgKi8KICAgIHByb3RlY3Rl\nZCBDbGFzcyBnZXRXcmFwcGVyKGludCB0eXBlKSB7CiAgICAgICAgcmV0dXJu\nIGdldFdyYXBwZXIoZm9yVHlwZSh0eXBlKSk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBHZXQgdGhlIHdyYXBwZXIgZm9yIHRoZSBnaXZlbiB0eXBlLgogICAg\nICovCiAgICBwcm90ZWN0ZWQgQ2xhc3MgZ2V0V3JhcHBlcihDbGFzcyBjKSB7\nCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBXUkFQUEVSUy5sZW5ndGg7\nIGkrKykgewogICAgICAgICAgICBpZiAoV1JBUFBFUlNbaV1bMF0uZXF1YWxz\nIChjKSkKCQkJCXJldHVybiBXUkFQUEVSU1tpXVsxXTsKCQl9CgkJcmV0dXJu\nIGM7Cgl9Cn0K\n","encoding":"base64"}

