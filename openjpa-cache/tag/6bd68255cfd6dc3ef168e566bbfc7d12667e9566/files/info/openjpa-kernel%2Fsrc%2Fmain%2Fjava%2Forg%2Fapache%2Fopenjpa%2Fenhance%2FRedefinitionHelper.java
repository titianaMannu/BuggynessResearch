{"sha":"ecf91ea3c37b5cc2231b92253488e7cc5726d757","node_id":"MDQ6QmxvYjIwNjM2NDplY2Y5MWVhM2MzN2I1Y2MyMjMxYjkyMjUzNDg4ZTdjYzU3MjZkNzU3","size":6330,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/ecf91ea3c37b5cc2231b92253488e7cc5726d757","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLg0KICovDQpwYWNrYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5lbmhh\nbmNlOw0KDQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5PcGVu\nSlBBU3RhdGVNYW5hZ2VyOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5r\nZXJuZWwuU3RhdGVNYW5hZ2VySW1wbDsNCmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEudXRpbC5JbXBsSGVscGVyOw0KDQovKioNCiAqIEhlbHBlciBtZXRo\nb2RzIGZvciBtYW5hZ2VkIHR5cGVzIHRoYXQgdXNlIG1ldGhvZCByZWRlZmlu\naXRpb24gZm9yIGZpZWxkDQogKiB0cmFja2luZy4NCiAqDQogKiBAc2luY2Ug\nMS4wLjANCiAqLw0KcHVibGljIGNsYXNzIFJlZGVmaW5pdGlvbkhlbHBlciB7\nDQoNCiAgICAvKioNCiAgICAgKiBDYWxsIHtAbGluayBTdGF0ZU1hbmFnZXJJ\nbXBsI2RpcnR5Q2hlY2t9IGlmIHRoZSBhcmd1bWVudCBpcyBhDQogICAgICog\ne0BsaW5rIFN0YXRlTWFuYWdlckltcGx9Lg0KICAgICAqLw0KICAgIHB1Ymxp\nYyBzdGF0aWMgdm9pZCBkaXJ0eUNoZWNrKFN0YXRlTWFuYWdlciBzbSkgew0K\nICAgICAgICBpZiAoc20gaW5zdGFuY2VvZiBTdGF0ZU1hbmFnZXJJbXBsKQ0K\nICAgICAgICAgICAgKChTdGF0ZU1hbmFnZXJJbXBsKSBzbSkuZGlydHlDaGVj\naygpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIE5vdGlmeSB0aGUgc3Rh\ndGUgbWFuYWdlciBmb3IgPGNvZGU+bzwvY29kZT4gKGlmIGFueSkgdGhhdCBh\nIGZpZWxkDQogICAgICogaXMgYWJvdXQgdG8gYmUgYWNjZXNzZWQuDQogICAg\nICovDQogICAgcHVibGljIHN0YXRpYyB2b2lkIGFjY2Vzc2luZ0ZpZWxkKE9i\namVjdCBvLCBpbnQgYWJzb2x1dGVJbmRleCkgew0KICAgICAgICBQZXJzaXN0\nZW5jZUNhcGFibGUgcGMgPSBJbXBsSGVscGVyLnRvUGVyc2lzdGVuY2VDYXBh\nYmxlKG8sIG51bGwpOw0KICAgICAgICBpZiAocGMgPT0gbnVsbCkNCiAgICAg\nICAgICAgIHJldHVybjsNCiAgICAgICAgU3RhdGVNYW5hZ2VyIHNtID0gcGMu\ncGNHZXRTdGF0ZU1hbmFnZXIoKTsNCiAgICAgICAgaWYgKHNtICE9IG51bGwp\nDQogICAgICAgICAgICBzbS5hY2Nlc3NpbmdGaWVsZChhYnNvbHV0ZUluZGV4\nKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBTZXR0aW5nIHN0YXRlIGNh\nbGxiYWNrLg0KICAgICAqLw0KICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBzZXR0\naW5nRmllbGQoT2JqZWN0IG8sIGludCBpZHgsIGJvb2xlYW4gY3VyLA0KICAg\nICAgICBib29sZWFuIG5leHQpIHsNCiAgICAgICAgUGVyc2lzdGVuY2VDYXBh\nYmxlIHBjID0gSW1wbEhlbHBlci50b1BlcnNpc3RlbmNlQ2FwYWJsZShvLCBu\ndWxsKTsNCiAgICAgICAgaWYgKHBjID09IG51bGwpDQogICAgICAgICAgICBy\nZXR1cm47DQogICAgICAgIFN0YXRlTWFuYWdlciBzbSA9IHBjLnBjR2V0U3Rh\ndGVNYW5hZ2VyKCk7DQogICAgICAgIGlmIChzbSAhPSBudWxsKQ0KICAgICAg\nICAgICAgc20uc2V0dGluZ0Jvb2xlYW5GaWVsZChwYywgaWR4LCBjdXIsIG5l\neHQsDQogICAgICAgICAgICAgICAgT3BlbkpQQVN0YXRlTWFuYWdlci5TRVRf\nVVNFUik7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogU2V0dGluZyBzdGF0\nZSBjYWxsYmFjay4NCiAgICAgKi8NCiAgICBwdWJsaWMgc3RhdGljIHZvaWQg\nc2V0dGluZ0ZpZWxkKE9iamVjdCBvLCBpbnQgaWR4LCBjaGFyIGN1ciwgY2hh\nciBuZXh0KSB7DQogICAgICAgIFBlcnNpc3RlbmNlQ2FwYWJsZSBwYyA9IElt\ncGxIZWxwZXIudG9QZXJzaXN0ZW5jZUNhcGFibGUobywgbnVsbCk7DQogICAg\nICAgIGlmIChwYyA9PSBudWxsKQ0KICAgICAgICAgICAgcmV0dXJuOw0KICAg\nICAgICBTdGF0ZU1hbmFnZXIgc20gPSBwYy5wY0dldFN0YXRlTWFuYWdlcigp\nOw0KICAgICAgICBpZiAoc20gIT0gbnVsbCkNCiAgICAgICAgICAgIHNtLnNl\ndHRpbmdDaGFyRmllbGQocGMsIGlkeCwgY3VyLCBuZXh0LA0KICAgICAgICAg\nICAgICAgIE9wZW5KUEFTdGF0ZU1hbmFnZXIuU0VUX1VTRVIpOw0KICAgIH0N\nCg0KICAgIC8qKg0KICAgICAqIFNldHRpbmcgc3RhdGUgY2FsbGJhY2suDQog\nICAgICovDQogICAgcHVibGljIHN0YXRpYyB2b2lkIHNldHRpbmdGaWVsZChP\nYmplY3QgbywgaW50IGlkeCwgYnl0ZSBjdXIsIGJ5dGUgbmV4dCkgew0KICAg\nICAgICBQZXJzaXN0ZW5jZUNhcGFibGUgcGMgPSBJbXBsSGVscGVyLnRvUGVy\nc2lzdGVuY2VDYXBhYmxlKG8sIG51bGwpOw0KICAgICAgICBpZiAocGMgPT0g\nbnVsbCkNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgU3RhdGVNYW5h\nZ2VyIHNtID0gcGMucGNHZXRTdGF0ZU1hbmFnZXIoKTsNCiAgICAgICAgaWYg\nKHNtICE9IG51bGwpDQogICAgICAgICAgICBzbS5zZXR0aW5nQnl0ZUZpZWxk\nKHBjLCBpZHgsIGN1ciwgbmV4dCwNCiAgICAgICAgICAgICAgICBPcGVuSlBB\nU3RhdGVNYW5hZ2VyLlNFVF9VU0VSKTsNCiAgICB9DQoNCiAgICAvKioNCiAg\nICAgKiBTZXR0aW5nIHN0YXRlIGNhbGxiYWNrLg0KICAgICAqLw0KICAgIHB1\nYmxpYyBzdGF0aWMgdm9pZCBzZXR0aW5nRmllbGQoT2JqZWN0IG8sIGludCBp\nZHgsIHNob3J0IGN1ciwgc2hvcnQgbmV4dCkgew0KICAgICAgICBQZXJzaXN0\nZW5jZUNhcGFibGUgcGMgPSBJbXBsSGVscGVyLnRvUGVyc2lzdGVuY2VDYXBh\nYmxlKG8sIG51bGwpOw0KICAgICAgICBpZiAocGMgPT0gbnVsbCkNCiAgICAg\nICAgICAgIHJldHVybjsNCiAgICAgICAgU3RhdGVNYW5hZ2VyIHNtID0gcGMu\ncGNHZXRTdGF0ZU1hbmFnZXIoKTsNCiAgICAgICAgaWYgKHNtICE9IG51bGwp\nDQogICAgICAgICAgICBzbS5zZXR0aW5nU2hvcnRGaWVsZChwYywgaWR4LCBj\ndXIsIG5leHQsDQogICAgICAgICAgICAgICAgT3BlbkpQQVN0YXRlTWFuYWdl\nci5TRVRfVVNFUik7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogU2V0dGlu\nZyBzdGF0ZSBjYWxsYmFjay4NCiAgICAgKi8NCiAgICBwdWJsaWMgc3RhdGlj\nIHZvaWQgc2V0dGluZ0ZpZWxkKE9iamVjdCBvLCBpbnQgaWR4LCBpbnQgY3Vy\nLCBpbnQgbmV4dCkgew0KICAgICAgICBQZXJzaXN0ZW5jZUNhcGFibGUgcGMg\nPSBJbXBsSGVscGVyLnRvUGVyc2lzdGVuY2VDYXBhYmxlKG8sIG51bGwpOw0K\nICAgICAgICBpZiAocGMgPT0gbnVsbCkNCiAgICAgICAgICAgIHJldHVybjsN\nCiAgICAgICAgU3RhdGVNYW5hZ2VyIHNtID0gcGMucGNHZXRTdGF0ZU1hbmFn\nZXIoKTsNCiAgICAgICAgaWYgKHNtICE9IG51bGwpDQogICAgICAgICAgICBz\nbS5zZXR0aW5nSW50RmllbGQocGMsIGlkeCwgY3VyLCBuZXh0LA0KICAgICAg\nICAgICAgICAgIE9wZW5KUEFTdGF0ZU1hbmFnZXIuU0VUX1VTRVIpOw0KICAg\nIH0NCg0KICAgIC8qKg0KICAgICAqIFNldHRpbmcgc3RhdGUgY2FsbGJhY2su\nDQogICAgICovDQogICAgcHVibGljIHN0YXRpYyB2b2lkIHNldHRpbmdGaWVs\nZChPYmplY3QgbywgaW50IGlkeCwgbG9uZyBjdXIsIGxvbmcgbmV4dCkgew0K\nICAgICAgICBQZXJzaXN0ZW5jZUNhcGFibGUgcGMgPSBJbXBsSGVscGVyLnRv\nUGVyc2lzdGVuY2VDYXBhYmxlKG8sIG51bGwpOw0KICAgICAgICBpZiAocGMg\nPT0gbnVsbCkNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgU3RhdGVN\nYW5hZ2VyIHNtID0gcGMucGNHZXRTdGF0ZU1hbmFnZXIoKTsNCiAgICAgICAg\naWYgKHNtICE9IG51bGwpDQogICAgICAgICAgICBzbS5zZXR0aW5nTG9uZ0Zp\nZWxkKHBjLCBpZHgsIGN1ciwgbmV4dCwNCiAgICAgICAgICAgICAgICBPcGVu\nSlBBU3RhdGVNYW5hZ2VyLlNFVF9VU0VSKTsNCiAgICB9DQoNCiAgICAvKioN\nCiAgICAgKiBTZXR0aW5nIHN0YXRlIGNhbGxiYWNrLg0KICAgICAqLw0KICAg\nIHB1YmxpYyBzdGF0aWMgdm9pZCBzZXR0aW5nRmllbGQoT2JqZWN0IG8sIGlu\ndCBpZHgsIGZsb2F0IGN1ciwgZmxvYXQgbmV4dCkgew0KICAgICAgICBQZXJz\naXN0ZW5jZUNhcGFibGUgcGMgPSBJbXBsSGVscGVyLnRvUGVyc2lzdGVuY2VD\nYXBhYmxlKG8sIG51bGwpOw0KICAgICAgICBpZiAocGMgPT0gbnVsbCkNCiAg\nICAgICAgICAgIHJldHVybjsNCiAgICAgICAgU3RhdGVNYW5hZ2VyIHNtID0g\ncGMucGNHZXRTdGF0ZU1hbmFnZXIoKTsNCiAgICAgICAgaWYgKHNtICE9IG51\nbGwpDQogICAgICAgICAgICBzbS5zZXR0aW5nRmxvYXRGaWVsZChwYywgaWR4\nLCBjdXIsIG5leHQsDQogICAgICAgICAgICAgICAgT3BlbkpQQVN0YXRlTWFu\nYWdlci5TRVRfVVNFUik7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogU2V0\ndGluZyBzdGF0ZSBjYWxsYmFjay4NCiAgICAgKi8NCiAgICBwdWJsaWMgc3Rh\ndGljIHZvaWQgc2V0dGluZ0ZpZWxkKE9iamVjdCBvLCBpbnQgaWR4LCBkb3Vi\nbGUgY3VyLA0KICAgICAgICBkb3VibGUgbmV4dCkgew0KICAgICAgICBQZXJz\naXN0ZW5jZUNhcGFibGUgcGMgPSBJbXBsSGVscGVyLnRvUGVyc2lzdGVuY2VD\nYXBhYmxlKG8sIG51bGwpOw0KICAgICAgICBpZiAocGMgPT0gbnVsbCkNCiAg\nICAgICAgICAgIHJldHVybjsNCiAgICAgICAgU3RhdGVNYW5hZ2VyIHNtID0g\ncGMucGNHZXRTdGF0ZU1hbmFnZXIoKTsNCiAgICAgICAgaWYgKHNtICE9IG51\nbGwpDQogICAgICAgICAgICBzbS5zZXR0aW5nRG91YmxlRmllbGQocGMsIGlk\neCwgY3VyLCBuZXh0LA0KICAgICAgICAgICAgICAgIE9wZW5KUEFTdGF0ZU1h\nbmFnZXIuU0VUX1VTRVIpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFNl\ndHRpbmcgc3RhdGUgY2FsbGJhY2suDQogICAgICovDQogICAgcHVibGljIHN0\nYXRpYyB2b2lkIHNldHRpbmdGaWVsZChPYmplY3QgbywgaW50IGlkeCwgU3Ry\naW5nIGN1ciwNCiAgICAgICAgU3RyaW5nIG5leHQpIHsNCiAgICAgICAgUGVy\nc2lzdGVuY2VDYXBhYmxlIHBjID0gSW1wbEhlbHBlci50b1BlcnNpc3RlbmNl\nQ2FwYWJsZShvLCBudWxsKTsNCiAgICAgICAgaWYgKHBjID09IG51bGwpDQog\nICAgICAgICAgICByZXR1cm47DQogICAgICAgIFN0YXRlTWFuYWdlciBzbSA9\nIHBjLnBjR2V0U3RhdGVNYW5hZ2VyKCk7DQogICAgICAgIGlmIChzbSAhPSBu\ndWxsKQ0KICAgICAgICAgICAgc20uc2V0dGluZ1N0cmluZ0ZpZWxkKHBjLCBp\nZHgsIGN1ciwgbmV4dCwNCiAgICAgICAgICAgICAgICBPcGVuSlBBU3RhdGVN\nYW5hZ2VyLlNFVF9VU0VSKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBT\nZXR0aW5nIHN0YXRlIGNhbGxiYWNrLg0KICAgICAqLw0KICAgIHB1YmxpYyBz\ndGF0aWMgdm9pZCBzZXR0aW5nRmllbGQoT2JqZWN0IG8sIGludCBpZHgsIE9i\namVjdCBjdXIsDQogICAgICAgIE9iamVjdCBuZXh0KSB7DQogICAgICAgIFBl\ncnNpc3RlbmNlQ2FwYWJsZSBwYyA9IEltcGxIZWxwZXIudG9QZXJzaXN0ZW5j\nZUNhcGFibGUobywgbnVsbCk7DQogICAgICAgIGlmIChwYyA9PSBudWxsKQ0K\nICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICBTdGF0ZU1hbmFnZXIgc20g\nPSBwYy5wY0dldFN0YXRlTWFuYWdlcigpOw0KICAgICAgICBpZiAoc20gIT0g\nbnVsbCkNCiAgICAgICAgICAgIHNtLnNldHRpbmdPYmplY3RGaWVsZChwYywg\naWR4LCBjdXIsIG5leHQsDQogICAgICAgICAgICAgICAgT3BlbkpQQVN0YXRl\nTWFuYWdlci5TRVRfVVNFUik7DQogICAgfQ0KfQ0K\n","encoding":"base64"}

