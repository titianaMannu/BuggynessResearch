{"sha":"7393bd1ce5a49a7ffe8d2253d8cf5c667dbfa422","node_id":"MDQ6QmxvYjIwNjM2NDo3MzkzYmQxY2U1YTQ5YTdmZmU4ZDIyNTNkOGNmNWM2NjdkYmZhNDIy","size":22336,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/7393bd1ce5a49a7ffe8d2253d8cf5c667dbfa422","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuZW5oYW5jZTsKCmltcG9ydCBq\nYXZhLmxhbmcucmVmbGVjdC5BY2Nlc3NpYmxlT2JqZWN0OwppbXBvcnQgamF2\nYS5sYW5nLnJlZmxlY3QuRmllbGQ7CmltcG9ydCBqYXZhLmxhbmcucmVmbGVj\ndC5JbnZvY2F0aW9uVGFyZ2V0RXhjZXB0aW9uOwppbXBvcnQgamF2YS5sYW5n\nLnJlZmxlY3QuTWV0aG9kOwppbXBvcnQgamF2YS5sYW5nLnJlZmxlY3QuTW9k\naWZpZXI7CmltcG9ydCBqYXZhLnNlY3VyaXR5LkFjY2Vzc0NvbnRyb2xsZXI7\nCgppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmxhbmcuU3RyaW5nVXRpbHM7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuSjJEb1ByaXZI\nZWxwZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9j\nYWxpemVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuR2VuZXJh\nbEV4Y2VwdGlvbjsgCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5V\nc2VyRXhjZXB0aW9uOyAKCi8qKgogKiBSZWZsZWN0aW9uIHV0aWxpdGllcyB1\nc2VkIHRvIHN1cHBvcnQgYW5kIGF1Z21lbnQgZW5oYW5jZW1lbnQuICBVc2Vk\nIGJvdGgKICogYXQgZW5oYW5jZW1lbnQgdGltZSBhbmQgYXQgcnVudGltZS4K\nICoKICogQGF1dGhvciBBYmUgV2hpdGUKICovCnB1YmxpYyBjbGFzcyBSZWZs\nZWN0aW9uIHsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6ZXIg\nX2xvYyA9IExvY2FsaXplci5mb3JQYWNrYWdlCiAgICAgICAgKFJlZmxlY3Rp\nb24uY2xhc3MpOwoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBnZXR0ZXIg\nbWV0aG9kIG1hdGNoaW5nIHRoZSBnaXZlbiBwcm9wZXJ0eSBuYW1lLCBvcHRp\nb25hbGx5CiAgICAgKiB0aHJvd2luZyBhbiBleGNlcHRpb24gaWYgbm9uZS4K\nICAgICAqLwogICAgcHVibGljIHN0YXRpYyBNZXRob2QgZmluZEdldHRlcihD\nbGFzcyBjbHMsIFN0cmluZyBwcm9wLCBib29sZWFuIG11c3RFeGlzdCkgewog\nICAgICAgIHByb3AgPSBTdHJpbmdVdGlscy5jYXBpdGFsaXplKHByb3ApOwog\nICAgICAgIFN0cmluZyBuYW1lID0gImdldCIgKyBwcm9wOwogICAgICAgIE1l\ndGhvZCBtOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIC8vIHRoaXMgYWxn\nb3JpdGhtIHNlYXJjaGVzIGZvciBhIGdldDxwcm9wPiBvciBpczxwcm9wPiBt\nZXRob2QgaW4KICAgICAgICAgICAgLy8gYSBicmVhZHRoLWZpcnN0IG1hbm5l\nci4KICAgICAgICAgICAgZm9yIChDbGFzcyBjID0gY2xzOyBjICE9IG51bGwg\nJiYgYyAhPSBPYmplY3QuY2xhc3M7CiAgICAgICAgICAgICAgICBjID0gYy5n\nZXRTdXBlcmNsYXNzKCkpIHsKICAgICAgICAgICAgICAgIG0gPSBnZXREZWNs\nYXJlZE1ldGhvZChjLCBuYW1lLCBudWxsKTsKICAgICAgICAgICAgICAgIGlm\nIChtICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbTsK\nICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAg\nbSA9IGdldERlY2xhcmVkTWV0aG9kKGMsICJpcyIgKyBwcm9wLCBudWxsKTsK\nICAgICAgICAgICAgICAgICAgICBpZiAobSAhPSBudWxsICYmIChtLmdldFJl\ndHVyblR5cGUoKSA9PSBib29sZWFuLmNsYXNzCiAgICAgICAgICAgICAgICAg\nICAgICAgIHx8IG0uZ2V0UmV0dXJuVHlwZSgpID09IEJvb2xlYW4uY2xhc3Mp\nKQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbTsKICAgICAgICAg\nICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKEV4Y2Vw\ndGlvbiBlKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBHZW5lcmFsRXhjZXB0\naW9uKGUpOwogICAgICAgIH0KCiAgICAgICAgaWYgKG11c3RFeGlzdCkKICAg\nICAgICAgICAgdGhyb3cgbmV3IFVzZXJFeGNlcHRpb24oX2xvYy5nZXQoImJh\nZC1nZXR0ZXIiLCBjbHMsIHByb3ApKTsKICAgICAgICByZXR1cm4gbnVsbDsK\nICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgc2V0dGVyIG1ldGhv\nZCBtYXRjaGluZyB0aGUgZ2l2ZW4gcHJvcGVydHkgbmFtZSwgb3B0aW9uYWxs\neQogICAgICogdGhyb3dpbmcgYW4gZXhjZXB0aW9uIGlmIG5vbmUuICBUaGUg\ncHJvcGVydHkgbXVzdCBhbHNvIGhhdmUgYSBnZXR0ZXIuCiAgICAgKi8KICAg\nIHB1YmxpYyBzdGF0aWMgTWV0aG9kIGZpbmRTZXR0ZXIoQ2xhc3MgY2xzLCBT\ndHJpbmcgcHJvcCwgYm9vbGVhbiBtdXN0RXhpc3QpIHsKICAgICAgICBNZXRo\nb2QgZ2V0dGVyID0gZmluZEdldHRlcihjbHMsIHByb3AsIG11c3RFeGlzdCk7\nCiAgICAgICAgcmV0dXJuIChnZXR0ZXIgPT0gbnVsbCkgPyBudWxsIAogICAg\nICAgICAgICA6IGZpbmRTZXR0ZXIoY2xzLCBwcm9wLCBnZXR0ZXIuZ2V0UmV0\ndXJuVHlwZSgpLCBtdXN0RXhpc3QpOwogICAgfQoKICAgIC8qKgogICAgICog\nUmV0dXJuIHRoZSBzZXR0ZXIgbWV0aG9kIG1hdGNoaW5nIHRoZSBnaXZlbiBw\ncm9wZXJ0eSBuYW1lLCBvcHRpb25hbGx5CiAgICAgKiB0aHJvd2luZyBhbiBl\neGNlcHRpb24gaWYgbm9uZS4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBN\nZXRob2QgZmluZFNldHRlcihDbGFzcyBjbHMsIFN0cmluZyBwcm9wLCBDbGFz\ncyBwYXJhbSwKICAgICAgICBib29sZWFuIG11c3RFeGlzdCkgewogICAgICAg\nIFN0cmluZyBuYW1lID0gInNldCIgKyBTdHJpbmdVdGlscy5jYXBpdGFsaXpl\nKHByb3ApOwogICAgICAgIE1ldGhvZCBtOwogICAgICAgIHRyeSB7CiAgICAg\nICAgICAgIGZvciAoQ2xhc3MgYyA9IGNsczsgYyAhPSBudWxsICYmIGMgIT0g\nT2JqZWN0LmNsYXNzOwogICAgICAgICAgICAgICAgYyA9IGMuZ2V0U3VwZXJj\nbGFzcygpKSB7CiAgICAgICAgICAgICAgICBtID0gZ2V0RGVjbGFyZWRNZXRo\nb2QoYywgbmFtZSwgcGFyYW0pOwogICAgICAgICAgICAgICAgaWYgKG0gIT0g\nbnVsbCkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbTsKICAgICAgICAg\nICAgfQogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAg\nICAgIHRocm93IG5ldyBHZW5lcmFsRXhjZXB0aW9uKGUpOwogICAgICAgIH0K\nCiAgICAgICAgaWYgKG11c3RFeGlzdCkKICAgICAgICAgICAgdGhyb3cgbmV3\nIFVzZXJFeGNlcHRpb24oX2xvYy5nZXQoImJhZC1zZXR0ZXIiLCBjbHMsIHBy\nb3ApKTsKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICAvKioKICAg\nICAqIEludm9rZXMgPGNvZGU+Y2xzLmdldERlY2xhcmVkTWV0aG9kcygpPC9j\nb2RlPiwgYW5kIHJldHVybnMgdGhlIG1ldGhvZAogICAgICogdGhhdCBtYXRj\naGVzIHRoZSA8Y29kZT5uYW1lPC9jb2RlPiBhbmQgPGNvZGU+cGFyYW08L2Nv\nZGU+IGFyZ3VtZW50cy4KICAgICAqIEF2b2lkcyB0aGUgZXhjZXB0aW9uIHRo\ncm93biBieSA8Y29kZT5DbGFzcy5nZXREZWNsYXJlZE1ldGhvZCgpPC9jb2Rl\nPgogICAgICogZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMuIDxjb2RlPnBhcmFt\nPC9jb2RlPiBtYXkgYmUgbnVsbC4KICAgICAqCiAgICAgKiBAc2luY2UgMC45\nLjgKICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgTWV0aG9kIGdldERlY2xh\ncmVkTWV0aG9kKENsYXNzIGNscywgU3RyaW5nIG5hbWUsCiAgICAgICAgQ2xh\nc3MgcGFyYW0pIHsKICAgICAgICBNZXRob2RbXSBtZXRob2RzID0gKE1ldGhv\nZFtdKSBBY2Nlc3NDb250cm9sbGVyLmRvUHJpdmlsZWdlZCgKICAgICAgICAg\nICAgSjJEb1ByaXZIZWxwZXIuZ2V0RGVjbGFyZWRNZXRob2RzQWN0aW9uKGNs\ncykpOwogICAgICAgIGZvciAoaW50IGkgPSAwIDsgaSA8IG1ldGhvZHMubGVu\nZ3RoOyBpKyspIHsKICAgIAkgICAgaWYgKG5hbWUuZXF1YWxzKG1ldGhvZHNb\naV0uZ2V0TmFtZSgpKSkgewogICAgICAgICAgICAgICAgQ2xhc3NbXSBtZXRo\nb2RQYXJhbXMgPSBtZXRob2RzW2ldLmdldFBhcmFtZXRlclR5cGVzKCk7CiAg\nICAgICAgICAgICAgICBpZiAocGFyYW0gPT0gbnVsbCAmJiBtZXRob2RQYXJh\nbXMubGVuZ3RoID09IDApCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1l\ndGhvZHNbaV07CiAgICAgICAgICAgICAgICBpZiAocGFyYW0gIT0gbnVsbCAm\nJiBtZXRob2RQYXJhbXMubGVuZ3RoID09IDEKICAgICAgICAgICAgICAgICAg\nICAmJiBwYXJhbS5lcXVhbHMobWV0aG9kUGFyYW1zWzBdKSkKICAgICAgICAg\nICAgICAgICAgICByZXR1cm4gbWV0aG9kc1tpXTsKICAgICAgICAgICAgfQog\nICAgICAgIH0KICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KICAgIAogICAg\nLyoqCiAgICAgKiBSZXR1cm4gdGhlIGZpZWxkIHdpdGggdGhlIGdpdmVuIG5h\nbWUsIG9wdGlvbmFsbHkgdGhyb3dpbmcgYW4gZXhjZXB0aW9uCiAgICAgKiBp\nZiBub25lLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIEZpZWxkIGZpbmRG\naWVsZChDbGFzcyBjbHMsIFN0cmluZyBuYW1lLCBib29sZWFuIG11c3RFeGlz\ndCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIEZpZWxkIGY7CiAgICAg\nICAgICAgIGZvciAoQ2xhc3MgYyA9IGNsczsgYyAhPSBudWxsICYmIGMgIT0g\nT2JqZWN0LmNsYXNzOwogICAgICAgICAgICAgICAgYyA9IGMuZ2V0U3VwZXJj\nbGFzcygpKSB7CiAgICAgICAgICAgICAgICBmID0gZ2V0RGVjbGFyZWRGaWVs\nZChjLCBuYW1lKTsKICAgICAgICAgICAgICAgIGlmIChmICE9IG51bGwpCiAg\nICAgICAgICAgICAgICAgICAgcmV0dXJuIGY7CiAgICAgICAgICAgIH0KICAg\nICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICB0aHJv\ndyBuZXcgR2VuZXJhbEV4Y2VwdGlvbihlKTsKICAgICAgICB9CgogICAgICAg\nIGlmIChtdXN0RXhpc3QpCiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXhj\nZXB0aW9uKF9sb2MuZ2V0KCJiYWQtZmllbGQiLCBjbHMsIG5hbWUpKTsKICAg\nICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICAvKioKICAgICAqIEludm9r\nZXMgPGNvZGU+Y2xzLmdldERlY2xhcmVkRmllbGRzKCk8L2NvZGU+LCBhbmQg\ncmV0dXJucyB0aGUgZmllbGQKICAgICAqIHRoYXQgbWF0Y2hlcyB0aGUgPGNv\nZGU+bmFtZTwvY29kZT4gYXJndW1lbnQuICBBdm9pZHMgdGhlIGV4Y2VwdGlv\nbgogICAgICogdGhyb3duIGJ5IDxjb2RlPkNsYXNzLmdldERlY2xhcmVkRmll\nbGQoKTwvY29kZT4gZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMuCiAgICAgKgog\nICAgICogQHNpbmNlIDAuOS44CiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGlj\nIEZpZWxkIGdldERlY2xhcmVkRmllbGQoQ2xhc3MgY2xzLCBTdHJpbmcgbmFt\nZSkgewogICAgICAgIEZpZWxkW10gZmllbGRzID0gKEZpZWxkW10pIEFjY2Vz\nc0NvbnRyb2xsZXIuZG9Qcml2aWxlZ2VkKAogICAgICAgICAgICBKMkRvUHJp\ndkhlbHBlci5nZXREZWNsYXJlZEZpZWxkc0FjdGlvbihjbHMpKTsKICAgICAg\nICBmb3IgKGludCBpID0gMCA7IGkgPCBmaWVsZHMubGVuZ3RoOyBpKyspIHsK\nICAgIAkgICAgaWYgKG5hbWUuZXF1YWxzKGZpZWxkc1tpXS5nZXROYW1lKCkp\nKQoJCSAgICAgICAgcmV0dXJuIGZpZWxkc1tpXTsKICAgICAgICB9CiAgICAg\nICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4g\ndGhlIHZhbHVlIG9mIHRoZSBnaXZlbiBmaWVsZCBpbiB0aGUgZ2l2ZW4gb2Jq\nZWN0LgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIE9iamVjdCBnZXQoT2Jq\nZWN0IHRhcmdldCwgRmllbGQgZmllbGQpIHsKICAgICAgICBpZiAodGFyZ2V0\nID09IG51bGwgfHwgZmllbGQgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJu\nIG51bGw7CiAgICAgICAgbWFrZUFjY2Vzc2libGUoZmllbGQsIGZpZWxkLmdl\ndE1vZGlmaWVycygpKTsKICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1\ncm4gZmllbGQuZ2V0KHRhcmdldCk7CiAgICAgICAgfSBjYXRjaCAoVGhyb3dh\nYmxlIHQpIHsKICAgICAgICAgICAgdGhyb3cgd3JhcFJlZmxlY3Rpb25FeGNl\ncHRpb24odCk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogTWFr\nZSB0aGUgZ2l2ZW4gbWVtYmVyIGFjY2Vzc2libGUgaWYgaXQgaXNuJ3QgYWxy\nZWFkeS4KICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCBtYWtlQWNj\nZXNzaWJsZShBY2Nlc3NpYmxlT2JqZWN0IGFvLCBpbnQgbW9kcykgewogICAg\nICAgIHRyeSB7CiAgICAgICAgICAgIGlmICghTW9kaWZpZXIuaXNQdWJsaWMo\nbW9kcykgJiYgIWFvLmlzQWNjZXNzaWJsZSgpKQogICAgICAgICAgICAgICAg\nQWNjZXNzQ29udHJvbGxlci5kb1ByaXZpbGVnZWQoSjJEb1ByaXZIZWxwZXIK\nICAgICAgICAgICAgICAgICAgICAuc2V0QWNjZXNzaWJsZUFjdGlvbihhbywg\ndHJ1ZSkpOwogICAgICAgIH0gY2F0Y2ggKFNlY3VyaXR5RXhjZXB0aW9uIHNl\nKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXhjZXB0aW9uKF9sb2Mu\nZ2V0KCJyZWZsZWN0LXNlY3VyaXR5IiwgYW8pKS4KICAgICAgICAgICAgICAg\nIHNldEZhdGFsKHRydWUpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAg\nICAqIFdyYXAgdGhlIGdpdmVuIHJlZmxlY3Rpb24gZXhjZXB0aW9uIGFzIGEg\ncnVudGltZSBleGNlcHRpb24uCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGlj\nIFJ1bnRpbWVFeGNlcHRpb24gd3JhcFJlZmxlY3Rpb25FeGNlcHRpb24oVGhy\nb3dhYmxlIHQpIHsKICAgICAgICBpZiAodCBpbnN0YW5jZW9mIEludm9jYXRp\nb25UYXJnZXRFeGNlcHRpb24pCiAgICAgICAgICAgIHQgPSAoKEludm9jYXRp\nb25UYXJnZXRFeGNlcHRpb24pIHQpLmdldFRhcmdldEV4Y2VwdGlvbigpOyAg\nICAKICAgICAgICBpZiAodCBpbnN0YW5jZW9mIFJ1bnRpbWVFeGNlcHRpb24p\nCiAgICAgICAgICAgIHJldHVybiAoUnVudGltZUV4Y2VwdGlvbikgdDsKICAg\nICAgICByZXR1cm4gbmV3IEdlbmVyYWxFeGNlcHRpb24odCk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIHZhbHVlIG9mIHRoZSBnaXZlbiBm\naWVsZCBpbiB0aGUgZ2l2ZW4gb2JqZWN0LgogICAgICovCiAgICBwdWJsaWMg\nc3RhdGljIGJvb2xlYW4gZ2V0Qm9vbGVhbihPYmplY3QgdGFyZ2V0LCBGaWVs\nZCBmaWVsZCkgewogICAgICAgIGlmICh0YXJnZXQgPT0gbnVsbCB8fCBmaWVs\nZCA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAg\nbWFrZUFjY2Vzc2libGUoZmllbGQsIGZpZWxkLmdldE1vZGlmaWVycygpKTsK\nICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4gZmllbGQuZ2V0Qm9v\nbGVhbih0YXJnZXQpOwogICAgICAgIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7\nCiAgICAgICAgICAgIHRocm93IHdyYXBSZWZsZWN0aW9uRXhjZXB0aW9uKHQp\nOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUg\ndmFsdWUgb2YgdGhlIGdpdmVuIGZpZWxkIGluIHRoZSBnaXZlbiBvYmplY3Qu\nCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgYnl0ZSBnZXRCeXRlKE9iamVj\ndCB0YXJnZXQsIEZpZWxkIGZpZWxkKSB7CiAgICAgICAgaWYgKHRhcmdldCA9\nPSBudWxsIHx8IGZpZWxkID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiAo\nYnl0ZSkgMDsKICAgICAgICBtYWtlQWNjZXNzaWJsZShmaWVsZCwgZmllbGQu\nZ2V0TW9kaWZpZXJzKCkpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJl\ndHVybiBmaWVsZC5nZXRCeXRlKHRhcmdldCk7CiAgICAgICAgfSBjYXRjaCAo\nVGhyb3dhYmxlIHQpIHsKICAgICAgICAgICAgdGhyb3cgd3JhcFJlZmxlY3Rp\nb25FeGNlcHRpb24odCk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAg\nICogUmV0dXJuIHRoZSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZmllbGQgaW4gdGhl\nIGdpdmVuIG9iamVjdC4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBjaGFy\nIGdldENoYXIoT2JqZWN0IHRhcmdldCwgRmllbGQgZmllbGQpIHsKICAgICAg\nICBpZiAodGFyZ2V0ID09IG51bGwgfHwgZmllbGQgPT0gbnVsbCkKICAgICAg\nICAgICAgcmV0dXJuIChjaGFyKSAwOwogICAgICAgIG1ha2VBY2Nlc3NpYmxl\nKGZpZWxkLCBmaWVsZC5nZXRNb2RpZmllcnMoKSk7CiAgICAgICAgdHJ5IHsK\nICAgICAgICAgICAgcmV0dXJuIGZpZWxkLmdldENoYXIodGFyZ2V0KTsKICAg\nICAgICB9IGNhdGNoIChUaHJvd2FibGUgdCkgewogICAgICAgICAgICB0aHJv\ndyB3cmFwUmVmbGVjdGlvbkV4Y2VwdGlvbih0KTsKICAgICAgICB9CiAgICB9\nCgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIHZhbHVlIG9mIHRoZSBnaXZl\nbiBmaWVsZCBpbiB0aGUgZ2l2ZW4gb2JqZWN0LgogICAgICovCiAgICBwdWJs\naWMgc3RhdGljIGRvdWJsZSBnZXREb3VibGUoT2JqZWN0IHRhcmdldCwgRmll\nbGQgZmllbGQpIHsKICAgICAgICBpZiAodGFyZ2V0ID09IG51bGwgfHwgZmll\nbGQgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIDBEOwogICAgICAgIG1h\na2VBY2Nlc3NpYmxlKGZpZWxkLCBmaWVsZC5nZXRNb2RpZmllcnMoKSk7CiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIGZpZWxkLmdldERvdWJs\nZSh0YXJnZXQpOwogICAgICAgIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7CiAg\nICAgICAgICAgIHRocm93IHdyYXBSZWZsZWN0aW9uRXhjZXB0aW9uKHQpOwog\nICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgdmFs\ndWUgb2YgdGhlIGdpdmVuIGZpZWxkIGluIHRoZSBnaXZlbiBvYmplY3QuCiAg\nICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZmxvYXQgZ2V0RmxvYXQoT2JqZWN0\nIHRhcmdldCwgRmllbGQgZmllbGQpIHsKICAgICAgICBpZiAodGFyZ2V0ID09\nIG51bGwgfHwgZmllbGQgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIDBG\nOwogICAgICAgIG1ha2VBY2Nlc3NpYmxlKGZpZWxkLCBmaWVsZC5nZXRNb2Rp\nZmllcnMoKSk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIGZp\nZWxkLmdldEZsb2F0KHRhcmdldCk7CiAgICAgICAgfSBjYXRjaCAoVGhyb3dh\nYmxlIHQpIHsKICAgICAgICAgICAgdGhyb3cgd3JhcFJlZmxlY3Rpb25FeGNl\ncHRpb24odCk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogUmV0\ndXJuIHRoZSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZmllbGQgaW4gdGhlIGdpdmVu\nIG9iamVjdC4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBpbnQgZ2V0SW50\nKE9iamVjdCB0YXJnZXQsIEZpZWxkIGZpZWxkKSB7CiAgICAgICAgaWYgKHRh\ncmdldCA9PSBudWxsIHx8IGZpZWxkID09IG51bGwpCiAgICAgICAgICAgIHJl\ndHVybiAwOwogICAgICAgIG1ha2VBY2Nlc3NpYmxlKGZpZWxkLCBmaWVsZC5n\nZXRNb2RpZmllcnMoKSk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0\ndXJuIGZpZWxkLmdldEludCh0YXJnZXQpOwogICAgICAgIH0gY2F0Y2ggKFRo\ncm93YWJsZSB0KSB7CiAgICAgICAgICAgIHRocm93IHdyYXBSZWZsZWN0aW9u\nRXhjZXB0aW9uKHQpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAq\nIFJldHVybiB0aGUgdmFsdWUgb2YgdGhlIGdpdmVuIGZpZWxkIGluIHRoZSBn\naXZlbiBvYmplY3QuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgbG9uZyBn\nZXRMb25nKE9iamVjdCB0YXJnZXQsIEZpZWxkIGZpZWxkKSB7CiAgICAgICAg\naWYgKHRhcmdldCA9PSBudWxsIHx8IGZpZWxkID09IG51bGwpCiAgICAgICAg\nICAgIHJldHVybiAwTDsKICAgICAgICBtYWtlQWNjZXNzaWJsZShmaWVsZCwg\nZmllbGQuZ2V0TW9kaWZpZXJzKCkpOwogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIHJldHVybiBmaWVsZC5nZXRMb25nKHRhcmdldCk7CiAgICAgICAgfSBj\nYXRjaCAoVGhyb3dhYmxlIHQpIHsKICAgICAgICAgICAgdGhyb3cgd3JhcFJl\nZmxlY3Rpb25FeGNlcHRpb24odCk7CiAgICAgICAgfQogICAgfQoKICAgIC8q\nKgogICAgICogUmV0dXJuIHRoZSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZmllbGQg\naW4gdGhlIGdpdmVuIG9iamVjdC4KICAgICAqLwogICAgcHVibGljIHN0YXRp\nYyBzaG9ydCBnZXRTaG9ydChPYmplY3QgdGFyZ2V0LCBGaWVsZCBmaWVsZCkg\newogICAgICAgIGlmICh0YXJnZXQgPT0gbnVsbCB8fCBmaWVsZCA9PSBudWxs\nKQogICAgICAgICAgICByZXR1cm4gKHNob3J0KSAwOwogICAgICAgIG1ha2VB\nY2Nlc3NpYmxlKGZpZWxkLCBmaWVsZC5nZXRNb2RpZmllcnMoKSk7CiAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIGZpZWxkLmdldFNob3J0KHRh\ncmdldCk7CiAgICAgICAgfSBjYXRjaCAoVGhyb3dhYmxlIHQpIHsKICAgICAg\nICAgICAgdGhyb3cgd3JhcFJlZmxlY3Rpb25FeGNlcHRpb24odCk7CiAgICAg\nICAgfQogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSByZXR1cm4g\ndmFsdWUgb2YgdGhlIGdpdmVuIGdldHRlciBpbiB0aGUgZ2l2ZW4gb2JqZWN0\nLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIE9iamVjdCBnZXQoT2JqZWN0\nIHRhcmdldCwgTWV0aG9kIGdldHRlcikgewogICAgICAgIGlmICh0YXJnZXQg\nPT0gbnVsbCB8fCBnZXR0ZXIgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJu\nIG51bGw7CiAgICAgICAgbWFrZUFjY2Vzc2libGUoZ2V0dGVyLCBnZXR0ZXIu\nZ2V0TW9kaWZpZXJzKCkpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJl\ndHVybiBnZXR0ZXIuaW52b2tlKHRhcmdldCwgKE9iamVjdFtdKSBudWxsKTsK\nICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUgdCkgewogICAgICAgICAgICB0\naHJvdyB3cmFwUmVmbGVjdGlvbkV4Y2VwdGlvbih0KTsKICAgICAgICB9CiAg\nICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIHJldHVybiB2YWx1ZSBv\nZiB0aGUgZ2l2ZW4gZ2V0dGVyIGluIHRoZSBnaXZlbiBvYmplY3QuCiAgICAg\nKi8KICAgIHB1YmxpYyBzdGF0aWMgYm9vbGVhbiBnZXRCb29sZWFuKE9iamVj\ndCB0YXJnZXQsIE1ldGhvZCBnZXR0ZXIpIHsKICAgICAgICBPYmplY3QgbyA9\nIGdldCh0YXJnZXQsIGdldHRlcik7CiAgICAgICAgcmV0dXJuIChvID09IG51\nbGwpID8gZmFsc2UgOiAoKEJvb2xlYW4pIG8pLmJvb2xlYW5WYWx1ZSgpOwog\nICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSByZXR1cm4gdmFsdWUg\nb2YgdGhlIGdpdmVuIGdldHRlciBpbiB0aGUgZ2l2ZW4gb2JqZWN0LgogICAg\nICovCiAgICBwdWJsaWMgc3RhdGljIGJ5dGUgZ2V0Qnl0ZShPYmplY3QgdGFy\nZ2V0LCBNZXRob2QgZ2V0dGVyKSB7CiAgICAgICAgT2JqZWN0IG8gPSBnZXQo\ndGFyZ2V0LCBnZXR0ZXIpOwogICAgICAgIHJldHVybiAobyA9PSBudWxsKSA/\nIChieXRlKSAwIDogKChOdW1iZXIpIG8pLmJ5dGVWYWx1ZSgpOwogICAgfQoK\nICAgIC8qKgogICAgICogUmV0dXJuIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhl\nIGdpdmVuIGdldHRlciBpbiB0aGUgZ2l2ZW4gb2JqZWN0LgogICAgICovCiAg\nICBwdWJsaWMgc3RhdGljIGNoYXIgZ2V0Q2hhcihPYmplY3QgdGFyZ2V0LCBN\nZXRob2QgZ2V0dGVyKSB7CiAgICAgICAgT2JqZWN0IG8gPSBnZXQodGFyZ2V0\nLCBnZXR0ZXIpOwogICAgICAgIHJldHVybiAobyA9PSBudWxsKSA/IChjaGFy\nKSAwIDogKChDaGFyYWN0ZXIpIG8pLmNoYXJWYWx1ZSgpOwogICAgfQoKICAg\nIC8qKgogICAgICogUmV0dXJuIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGdp\ndmVuIGdldHRlciBpbiB0aGUgZ2l2ZW4gb2JqZWN0LgogICAgICovCiAgICBw\ndWJsaWMgc3RhdGljIGRvdWJsZSBnZXREb3VibGUoT2JqZWN0IHRhcmdldCwg\nTWV0aG9kIGdldHRlcikgewogICAgICAgIE9iamVjdCBvID0gZ2V0KHRhcmdl\ndCwgZ2V0dGVyKTsKICAgICAgICByZXR1cm4gKG8gPT0gbnVsbCkgPyAwRCA6\nICgoTnVtYmVyKSBvKS5kb3VibGVWYWx1ZSgpOwogICAgfQoKICAgIC8qKgog\nICAgICogUmV0dXJuIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGdpdmVuIGdl\ndHRlciBpbiB0aGUgZ2l2ZW4gb2JqZWN0LgogICAgICovCiAgICBwdWJsaWMg\nc3RhdGljIGZsb2F0IGdldEZsb2F0KE9iamVjdCB0YXJnZXQsIE1ldGhvZCBn\nZXR0ZXIpIHsKICAgICAgICBPYmplY3QgbyA9IGdldCh0YXJnZXQsIGdldHRl\ncik7CiAgICAgICAgcmV0dXJuIChvID09IG51bGwpID8gMEYgOiAoKE51bWJl\ncikgbykuZmxvYXRWYWx1ZSgpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0\ndXJuIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGdpdmVuIGdldHRlciBpbiB0\naGUgZ2l2ZW4gb2JqZWN0LgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGlu\ndCBnZXRJbnQoT2JqZWN0IHRhcmdldCwgTWV0aG9kIGdldHRlcikgewogICAg\nICAgIE9iamVjdCBvID0gZ2V0KHRhcmdldCwgZ2V0dGVyKTsKICAgICAgICBy\nZXR1cm4gKG8gPT0gbnVsbCkgPyAwIDogKChOdW1iZXIpIG8pLmludFZhbHVl\nKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIHJldHVybiB2\nYWx1ZSBvZiB0aGUgZ2l2ZW4gZ2V0dGVyIGluIHRoZSBnaXZlbiBvYmplY3Qu\nCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgbG9uZyBnZXRMb25nKE9iamVj\ndCB0YXJnZXQsIE1ldGhvZCBnZXR0ZXIpIHsKICAgICAgICBPYmplY3QgbyA9\nIGdldCh0YXJnZXQsIGdldHRlcik7CiAgICAgICAgcmV0dXJuIChvID09IG51\nbGwpID8gMEwgOiAoKE51bWJlcikgbykubG9uZ1ZhbHVlKCk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUg\nZ2l2ZW4gZ2V0dGVyIGluIHRoZSBnaXZlbiBvYmplY3QuCiAgICAgKi8KICAg\nIHB1YmxpYyBzdGF0aWMgc2hvcnQgZ2V0U2hvcnQoT2JqZWN0IHRhcmdldCwg\nTWV0aG9kIGdldHRlcikgewogICAgICAgIE9iamVjdCBvID0gZ2V0KHRhcmdl\ndCwgZ2V0dGVyKTsKICAgICAgICByZXR1cm4gKG8gPT0gbnVsbCkgPyAoc2hv\ncnQpIDAgOiAoKE51bWJlcikgbykuc2hvcnRWYWx1ZSgpOwogICAgfQoKICAg\nIC8qKgogICAgICogU2V0IHRoZSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZmllbGQg\naW4gdGhlIGdpdmVuIG9iamVjdC4KICAgICAqLwogICAgcHVibGljIHN0YXRp\nYyB2b2lkIHNldChPYmplY3QgdGFyZ2V0LCBGaWVsZCBmaWVsZCwgT2JqZWN0\nIHZhbHVlKSB7CiAgICAgICAgaWYgKHRhcmdldCA9PSBudWxsIHx8IGZpZWxk\nID09IG51bGwpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBtYWtlQWNj\nZXNzaWJsZShmaWVsZCwgZmllbGQuZ2V0TW9kaWZpZXJzKCkpOwogICAgICAg\nIHRyeSB7CiAgICAgICAgICAgIGZpZWxkLnNldCh0YXJnZXQsIHZhbHVlKTsK\nICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUgdCkgewogICAgICAgICAgICB0\naHJvdyB3cmFwUmVmbGVjdGlvbkV4Y2VwdGlvbih0KTsKICAgICAgICB9CiAg\nICB9CgogICAgLyoqCiAgICAgKiBTZXQgdGhlIHZhbHVlIG9mIHRoZSBnaXZl\nbiBmaWVsZCBpbiB0aGUgZ2l2ZW4gb2JqZWN0LgogICAgICovCiAgICBwdWJs\naWMgc3RhdGljIHZvaWQgc2V0KE9iamVjdCB0YXJnZXQsIEZpZWxkIGZpZWxk\nLCBib29sZWFuIHZhbHVlKSB7CiAgICAgICAgaWYgKHRhcmdldCA9PSBudWxs\nIHx8IGZpZWxkID09IG51bGwpCiAgICAgICAgICAgIHJldHVybjsKICAgICAg\nICBtYWtlQWNjZXNzaWJsZShmaWVsZCwgZmllbGQuZ2V0TW9kaWZpZXJzKCkp\nOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZpZWxkLnNldEJvb2xlYW4o\ndGFyZ2V0LCB2YWx1ZSk7CiAgICAgICAgfSBjYXRjaCAoVGhyb3dhYmxlIHQp\nIHsKICAgICAgICAgICAgdGhyb3cgd3JhcFJlZmxlY3Rpb25FeGNlcHRpb24o\ndCk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogU2V0IHRoZSB2\nYWx1ZSBvZiB0aGUgZ2l2ZW4gZmllbGQgaW4gdGhlIGdpdmVuIG9iamVjdC4K\nICAgICAqLwogICAgcHVibGljIHN0YXRpYyB2b2lkIHNldChPYmplY3QgdGFy\nZ2V0LCBGaWVsZCBmaWVsZCwgYnl0ZSB2YWx1ZSkgewogICAgICAgIGlmICh0\nYXJnZXQgPT0gbnVsbCB8fCBmaWVsZCA9PSBudWxsKQogICAgICAgICAgICBy\nZXR1cm47CiAgICAgICAgbWFrZUFjY2Vzc2libGUoZmllbGQsIGZpZWxkLmdl\ndE1vZGlmaWVycygpKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBmaWVs\nZC5zZXRCeXRlKHRhcmdldCwgdmFsdWUpOwogICAgICAgIH0gY2F0Y2ggKFRo\ncm93YWJsZSB0KSB7CiAgICAgICAgICAgIHRocm93IHdyYXBSZWZsZWN0aW9u\nRXhjZXB0aW9uKHQpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAq\nIFNldCB0aGUgdmFsdWUgb2YgdGhlIGdpdmVuIGZpZWxkIGluIHRoZSBnaXZl\nbiBvYmplY3QuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBzZXQo\nT2JqZWN0IHRhcmdldCwgRmllbGQgZmllbGQsIGNoYXIgdmFsdWUpIHsKICAg\nICAgICBpZiAodGFyZ2V0ID09IG51bGwgfHwgZmllbGQgPT0gbnVsbCkKICAg\nICAgICAgICAgcmV0dXJuOwogICAgICAgIG1ha2VBY2Nlc3NpYmxlKGZpZWxk\nLCBmaWVsZC5nZXRNb2RpZmllcnMoKSk7CiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgZmllbGQuc2V0Q2hhcih0YXJnZXQsIHZhbHVlKTsKICAgICAgICB9\nIGNhdGNoIChUaHJvd2FibGUgdCkgewogICAgICAgICAgICB0aHJvdyB3cmFw\nUmVmbGVjdGlvbkV4Y2VwdGlvbih0KTsKICAgICAgICB9CiAgICB9CgogICAg\nLyoqCiAgICAgKiBTZXQgdGhlIHZhbHVlIG9mIHRoZSBnaXZlbiBmaWVsZCBp\nbiB0aGUgZ2l2ZW4gb2JqZWN0LgogICAgICovCiAgICBwdWJsaWMgc3RhdGlj\nIHZvaWQgc2V0KE9iamVjdCB0YXJnZXQsIEZpZWxkIGZpZWxkLCBkb3VibGUg\ndmFsdWUpIHsKICAgICAgICBpZiAodGFyZ2V0ID09IG51bGwgfHwgZmllbGQg\nPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIG1ha2VBY2Nl\nc3NpYmxlKGZpZWxkLCBmaWVsZC5nZXRNb2RpZmllcnMoKSk7CiAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgZmllbGQuc2V0RG91YmxlKHRhcmdldCwgdmFs\ndWUpOwogICAgICAgIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7CiAgICAgICAg\nICAgIHRocm93IHdyYXBSZWZsZWN0aW9uRXhjZXB0aW9uKHQpOwogICAgICAg\nIH0KICAgIH0KCiAgICAvKioKICAgICAqIFNldCB0aGUgdmFsdWUgb2YgdGhl\nIGdpdmVuIGZpZWxkIGluIHRoZSBnaXZlbiBvYmplY3QuCiAgICAgKi8KICAg\nIHB1YmxpYyBzdGF0aWMgdm9pZCBzZXQoT2JqZWN0IHRhcmdldCwgRmllbGQg\nZmllbGQsIGZsb2F0IHZhbHVlKSB7CiAgICAgICAgaWYgKHRhcmdldCA9PSBu\ndWxsIHx8IGZpZWxkID09IG51bGwpCiAgICAgICAgICAgIHJldHVybjsKICAg\nICAgICBtYWtlQWNjZXNzaWJsZShmaWVsZCwgZmllbGQuZ2V0TW9kaWZpZXJz\nKCkpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZpZWxkLnNldEZsb2F0\nKHRhcmdldCwgdmFsdWUpOwogICAgICAgIH0gY2F0Y2ggKFRocm93YWJsZSB0\nKSB7CiAgICAgICAgICAgIHRocm93IHdyYXBSZWZsZWN0aW9uRXhjZXB0aW9u\nKHQpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFNldCB0aGUg\ndmFsdWUgb2YgdGhlIGdpdmVuIGZpZWxkIGluIHRoZSBnaXZlbiBvYmplY3Qu\nCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBzZXQoT2JqZWN0IHRh\ncmdldCwgRmllbGQgZmllbGQsIGludCB2YWx1ZSkgewogICAgICAgIGlmICh0\nYXJnZXQgPT0gbnVsbCB8fCBmaWVsZCA9PSBudWxsKQogICAgICAgICAgICBy\nZXR1cm47CiAgICAgICAgbWFrZUFjY2Vzc2libGUoZmllbGQsIGZpZWxkLmdl\ndE1vZGlmaWVycygpKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBmaWVs\nZC5zZXRJbnQodGFyZ2V0LCB2YWx1ZSk7CiAgICAgICAgfSBjYXRjaCAoVGhy\nb3dhYmxlIHQpIHsKICAgICAgICAgICAgdGhyb3cgd3JhcFJlZmxlY3Rpb25F\neGNlcHRpb24odCk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICog\nU2V0IHRoZSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZmllbGQgaW4gdGhlIGdpdmVu\nIG9iamVjdC4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyB2b2lkIHNldChP\nYmplY3QgdGFyZ2V0LCBGaWVsZCBmaWVsZCwgbG9uZyB2YWx1ZSkgewogICAg\nICAgIGlmICh0YXJnZXQgPT0gbnVsbCB8fCBmaWVsZCA9PSBudWxsKQogICAg\nICAgICAgICByZXR1cm47CiAgICAgICAgbWFrZUFjY2Vzc2libGUoZmllbGQs\nIGZpZWxkLmdldE1vZGlmaWVycygpKTsKICAgICAgICB0cnkgewogICAgICAg\nICAgICBmaWVsZC5zZXRMb25nKHRhcmdldCwgdmFsdWUpOwogICAgICAgIH0g\nY2F0Y2ggKFRocm93YWJsZSB0KSB7CiAgICAgICAgICAgIHRocm93IHdyYXBS\nZWZsZWN0aW9uRXhjZXB0aW9uKHQpOwogICAgICAgIH0KICAgIH0KCiAgICAv\nKioKICAgICAqIFNldCB0aGUgdmFsdWUgb2YgdGhlIGdpdmVuIGZpZWxkIGlu\nIHRoZSBnaXZlbiBvYmplY3QuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMg\ndm9pZCBzZXQoT2JqZWN0IHRhcmdldCwgRmllbGQgZmllbGQsIHNob3J0IHZh\nbHVlKSB7CiAgICAgICAgaWYgKHRhcmdldCA9PSBudWxsIHx8IGZpZWxkID09\nIG51bGwpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBtYWtlQWNjZXNz\naWJsZShmaWVsZCwgZmllbGQuZ2V0TW9kaWZpZXJzKCkpOwogICAgICAgIHRy\neSB7CiAgICAgICAgICAgIGZpZWxkLnNldFNob3J0KHRhcmdldCwgdmFsdWUp\nOwogICAgICAgIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7CiAgICAgICAgICAg\nIHRocm93IHdyYXBSZWZsZWN0aW9uRXhjZXB0aW9uKHQpOwogICAgICAgIH0K\nICAgIH0KCiAgICAvKioKICAgICAqIFNldCB0aGUgdmFsdWUgb2YgdGhlIGdp\ndmVuIGZpZWxkIGluIHRoZSBnaXZlbiBvYmplY3QuCiAgICAgKiBTYW1lIGJl\naGF2aW9yIGFzIGFib3ZlIG1ldGhvZHMsIGJ1dCBwYXJhbWV0ZXIgb3JkZXJp\nbmcgaXMgcmVhcnJhbmdlZAogICAgICogdG8gc2ltcGxpZnkgdXNhZ2UgZnJv\nbSBnZW5lcmF0ZWQgYnl0ZWNvZGVzLgogICAgICoKICAgICAqIEBzaW5jZSAx\nLjAuMAogICAgICovCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgc2V0KE9iamVj\ndCB0YXJnZXQsIE9iamVjdCB2YWx1ZSwgRmllbGQgZmllbGQpIHsKICAgICAg\nICBzZXQodGFyZ2V0LCBmaWVsZCwgdmFsdWUpOwogICAgfQoKICAgIC8qKgog\nICAgICogU2V0IHRoZSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZmllbGQgaW4gdGhl\nIGdpdmVuIG9iamVjdC4KICAgICAqIFNhbWUgYmVoYXZpb3IgYXMgYWJvdmUg\nbWV0aG9kcywgYnV0IHBhcmFtZXRlciBvcmRlcmluZyBpcyByZWFycmFuZ2Vk\nCiAgICAgKiB0byBzaW1wbGlmeSB1c2FnZSBmcm9tIGdlbmVyYXRlZCBieXRl\nY29kZXMuCiAgICAgKgogICAgICogQHNpbmNlIDEuMC4wCiAgICAgKi8KICAg\nIHB1YmxpYyBzdGF0aWMgdm9pZCBzZXQoT2JqZWN0IHRhcmdldCwgYm9vbGVh\nbiB2YWx1ZSwgRmllbGQgZmllbGQpIHsKICAgICAgICBzZXQodGFyZ2V0LCBm\naWVsZCwgdmFsdWUpOwogICAgfQoKICAgIC8qKgogICAgICogU2V0IHRoZSB2\nYWx1ZSBvZiB0aGUgZ2l2ZW4gZmllbGQgaW4gdGhlIGdpdmVuIG9iamVjdC4K\nICAgICAqIFNhbWUgYmVoYXZpb3IgYXMgYWJvdmUgbWV0aG9kcywgYnV0IHBh\ncmFtZXRlciBvcmRlcmluZyBpcyByZWFycmFuZ2VkCiAgICAgKiB0byBzaW1w\nbGlmeSB1c2FnZSBmcm9tIGdlbmVyYXRlZCBieXRlY29kZXMuCiAgICAgKgog\nICAgICogQHNpbmNlIDEuMC4wCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMg\ndm9pZCBzZXQoT2JqZWN0IHRhcmdldCwgYnl0ZSB2YWx1ZSwgRmllbGQgZmll\nbGQpIHsKICAgICAgICBzZXQodGFyZ2V0LCBmaWVsZCwgdmFsdWUpOwogICAg\nfQoKICAgIC8qKgogICAgICogU2V0IHRoZSB2YWx1ZSBvZiB0aGUgZ2l2ZW4g\nZmllbGQgaW4gdGhlIGdpdmVuIG9iamVjdC4KICAgICAqIFNhbWUgYmVoYXZp\nb3IgYXMgYWJvdmUgbWV0aG9kcywgYnV0IHBhcmFtZXRlciBvcmRlcmluZyBp\ncyByZWFycmFuZ2VkCiAgICAgKiB0byBzaW1wbGlmeSB1c2FnZSBmcm9tIGdl\nbmVyYXRlZCBieXRlY29kZXMuCiAgICAgKgogICAgICogQHNpbmNlIDEuMC4w\nCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBzZXQoT2JqZWN0IHRh\ncmdldCwgY2hhciB2YWx1ZSwgRmllbGQgZmllbGQpIHsKICAgICAgICBzZXQo\ndGFyZ2V0LCBmaWVsZCwgdmFsdWUpOwogICAgfQoKICAgIC8qKgogICAgICog\nU2V0IHRoZSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZmllbGQgaW4gdGhlIGdpdmVu\nIG9iamVjdC4KICAgICAqIFNhbWUgYmVoYXZpb3IgYXMgYWJvdmUgbWV0aG9k\ncywgYnV0IHBhcmFtZXRlciBvcmRlcmluZyBpcyByZWFycmFuZ2VkCiAgICAg\nKiB0byBzaW1wbGlmeSB1c2FnZSBmcm9tIGdlbmVyYXRlZCBieXRlY29kZXMu\nCiAgICAgKgogICAgICogQHNpbmNlIDEuMC4wCiAgICAgKi8KICAgIHB1Ymxp\nYyBzdGF0aWMgdm9pZCBzZXQoT2JqZWN0IHRhcmdldCwgZG91YmxlIHZhbHVl\nLCBGaWVsZCBmaWVsZCkgewogICAgICAgIHNldCh0YXJnZXQsIGZpZWxkLCB2\nYWx1ZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQgdGhlIHZhbHVlIG9m\nIHRoZSBnaXZlbiBmaWVsZCBpbiB0aGUgZ2l2ZW4gb2JqZWN0LgogICAgICog\nU2FtZSBiZWhhdmlvciBhcyBhYm92ZSBtZXRob2RzLCBidXQgcGFyYW1ldGVy\nIG9yZGVyaW5nIGlzIHJlYXJyYW5nZWQKICAgICAqIHRvIHNpbXBsaWZ5IHVz\nYWdlIGZyb20gZ2VuZXJhdGVkIGJ5dGVjb2Rlcy4KICAgICAqCiAgICAgKiBA\nc2luY2UgMS4wLjAKICAgICAqLwogICAgcHVibGljIHN0YXRpYyB2b2lkIHNl\ndChPYmplY3QgdGFyZ2V0LCBmbG9hdCB2YWx1ZSwgRmllbGQgZmllbGQpIHsK\nICAgICAgICBzZXQodGFyZ2V0LCBmaWVsZCwgdmFsdWUpOwogICAgfQoKICAg\nIC8qKgogICAgICogU2V0IHRoZSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gZmllbGQg\naW4gdGhlIGdpdmVuIG9iamVjdC4KICAgICAqIFNhbWUgYmVoYXZpb3IgYXMg\nYWJvdmUgbWV0aG9kcywgYnV0IHBhcmFtZXRlciBvcmRlcmluZyBpcyByZWFy\ncmFuZ2VkCiAgICAgKiB0byBzaW1wbGlmeSB1c2FnZSBmcm9tIGdlbmVyYXRl\nZCBieXRlY29kZXMuCiAgICAgKgogICAgICogQHNpbmNlIDEuMC4wCiAgICAg\nKi8KICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBzZXQoT2JqZWN0IHRhcmdldCwg\naW50IHZhbHVlLCBGaWVsZCBmaWVsZCkgewogICAgICAgIHNldCh0YXJnZXQs\nIGZpZWxkLCB2YWx1ZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQgdGhl\nIHZhbHVlIG9mIHRoZSBnaXZlbiBmaWVsZCBpbiB0aGUgZ2l2ZW4gb2JqZWN0\nLgogICAgICogU2FtZSBiZWhhdmlvciBhcyBhYm92ZSBtZXRob2RzLCBidXQg\ncGFyYW1ldGVyIG9yZGVyaW5nIGlzIHJlYXJyYW5nZWQKICAgICAqIHRvIHNp\nbXBsaWZ5IHVzYWdlIGZyb20gZ2VuZXJhdGVkIGJ5dGVjb2Rlcy4KICAgICAq\nCiAgICAgKiBAc2luY2UgMS4wLjAKICAgICAqLwogICAgcHVibGljIHN0YXRp\nYyB2b2lkIHNldChPYmplY3QgdGFyZ2V0LCBsb25nIHZhbHVlLCBGaWVsZCBm\naWVsZCkgewogICAgICAgIHNldCh0YXJnZXQsIGZpZWxkLCB2YWx1ZSk7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBTZXQgdGhlIHZhbHVlIG9mIHRoZSBnaXZl\nbiBmaWVsZCBpbiB0aGUgZ2l2ZW4gb2JqZWN0LgogICAgICogU2FtZSBiZWhh\ndmlvciBhcyBhYm92ZSBtZXRob2RzLCBidXQgcGFyYW1ldGVyIG9yZGVyaW5n\nIGlzIHJlYXJyYW5nZWQKICAgICAqIHRvIHNpbXBsaWZ5IHVzYWdlIGZyb20g\nZ2VuZXJhdGVkIGJ5dGVjb2Rlcy4KICAgICAqCiAgICAgKiBAc2luY2UgMS4w\nLjAKICAgICAqLwogICAgcHVibGljIHN0YXRpYyB2b2lkIHNldChPYmplY3Qg\ndGFyZ2V0LCBzaG9ydCB2YWx1ZSwgRmllbGQgZmllbGQpIHsKICAgICAgICBz\nZXQodGFyZ2V0LCBmaWVsZCwgdmFsdWUpOwogICAgfQoKICAgIC8qKgogICAg\nICogSW52b2tlIHRoZSBnaXZlbiBzZXR0ZXIgb24gdGhlIGdpdmVuIG9iamVj\ndC4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyB2b2lkIHNldChPYmplY3Qg\ndGFyZ2V0LCBNZXRob2Qgc2V0dGVyLCBPYmplY3QgdmFsdWUpIHsKICAgICAg\nICBpZiAodGFyZ2V0ID09IG51bGwgfHwgc2V0dGVyID09IG51bGwpCiAgICAg\nICAgICAgIHJldHVybjsKICAgICAgICBtYWtlQWNjZXNzaWJsZShzZXR0ZXIs\nIHNldHRlci5nZXRNb2RpZmllcnMoKSk7CiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgc2V0dGVyLmludm9rZSh0YXJnZXQsIG5ldyBPYmplY3RbXSB7IHZh\nbHVlIH0pOwogICAgICAgIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7CiAgICAg\nICAgICAgIHRocm93IHdyYXBSZWZsZWN0aW9uRXhjZXB0aW9uKHQpOwogICAg\nICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEludm9rZSB0aGUgZ2l2ZW4g\nc2V0dGVyIG9uIHRoZSBnaXZlbiBvYmplY3QuCiAgICAgKi8KICAgIHB1Ymxp\nYyBzdGF0aWMgdm9pZCBzZXQoT2JqZWN0IHRhcmdldCwgTWV0aG9kIHNldHRl\nciwgYm9vbGVhbiB2YWx1ZSkgewogICAgICAgIHNldCh0YXJnZXQsIHNldHRl\nciwgKHZhbHVlKSA/IEJvb2xlYW4uVFJVRSA6IEJvb2xlYW4uRkFMU0UpOwog\nICAgfQoKICAgIC8qKgogICAgICogSW52b2tlIHRoZSBnaXZlbiBzZXR0ZXIg\nb24gdGhlIGdpdmVuIG9iamVjdC4KICAgICAqLwogICAgcHVibGljIHN0YXRp\nYyB2b2lkIHNldChPYmplY3QgdGFyZ2V0LCBNZXRob2Qgc2V0dGVyLCBieXRl\nIHZhbHVlKSB7CiAgICAgICAgc2V0KHRhcmdldCwgc2V0dGVyLCBuZXcgQnl0\nZSh2YWx1ZSkpOwogICAgfQoKICAgIC8qKgogICAgICogSW52b2tlIHRoZSBn\naXZlbiBzZXR0ZXIgb24gdGhlIGdpdmVuIG9iamVjdC4KICAgICAqLwogICAg\ncHVibGljIHN0YXRpYyB2b2lkIHNldChPYmplY3QgdGFyZ2V0LCBNZXRob2Qg\nc2V0dGVyLCBjaGFyIHZhbHVlKSB7CiAgICAgICAgc2V0KHRhcmdldCwgc2V0\ndGVyLCBuZXcgQ2hhcmFjdGVyKHZhbHVlKSk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBJbnZva2UgdGhlIGdpdmVuIHNldHRlciBvbiB0aGUgZ2l2ZW4gb2Jq\nZWN0LgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgc2V0KE9iamVj\ndCB0YXJnZXQsIE1ldGhvZCBzZXR0ZXIsIGRvdWJsZSB2YWx1ZSkgewogICAg\nICAgIHNldCh0YXJnZXQsIHNldHRlciwgbmV3IERvdWJsZSh2YWx1ZSkpOwog\nICAgfQoKICAgIC8qKgogICAgICogSW52b2tlIHRoZSBnaXZlbiBzZXR0ZXIg\nb24gdGhlIGdpdmVuIG9iamVjdC4KICAgICAqLwogICAgcHVibGljIHN0YXRp\nYyB2b2lkIHNldChPYmplY3QgdGFyZ2V0LCBNZXRob2Qgc2V0dGVyLCBmbG9h\ndCB2YWx1ZSkgewogICAgICAgIHNldCh0YXJnZXQsIHNldHRlciwgbmV3IEZs\nb2F0KHZhbHVlKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBJbnZva2UgdGhl\nIGdpdmVuIHNldHRlciBvbiB0aGUgZ2l2ZW4gb2JqZWN0LgogICAgICovCiAg\nICBwdWJsaWMgc3RhdGljIHZvaWQgc2V0KE9iamVjdCB0YXJnZXQsIE1ldGhv\nZCBzZXR0ZXIsIGludCB2YWx1ZSkgewogICAgICAgIHNldCh0YXJnZXQsIHNl\ndHRlciwgbmV3IEludGVnZXIodmFsdWUpKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIEludm9rZSB0aGUgZ2l2ZW4gc2V0dGVyIG9uIHRoZSBnaXZlbiBvYmpl\nY3QuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBzZXQoT2JqZWN0\nIHRhcmdldCwgTWV0aG9kIHNldHRlciwgbG9uZyB2YWx1ZSkgewogICAgICAg\nIHNldCh0YXJnZXQsIHNldHRlciwgbmV3IExvbmcodmFsdWUpKTsKICAgIH0K\nCiAgICAvKioKICAgICAqIEludm9rZSB0aGUgZ2l2ZW4gc2V0dGVyIG9uIHRo\nZSBnaXZlbiBvYmplY3QuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgdm9p\nZCBzZXQoT2JqZWN0IHRhcmdldCwgTWV0aG9kIHNldHRlciwgc2hvcnQgdmFs\ndWUpIHsKICAgICAgICBzZXQodGFyZ2V0LCBzZXR0ZXIsIG5ldyBTaG9ydCh2\nYWx1ZSkpOwogICAgfQp9Cg==\n","encoding":"base64"}

