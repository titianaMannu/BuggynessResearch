{"sha":"77be27c91d97d60f8bded7c1d1599f846e10050b","node_id":"MDQ6QmxvYjIwNjM2NDo3N2JlMjdjOTFkOTdkNjBmOGJkZWQ3YzFkMTU5OWY4NDZlMTAwNTBi","size":5101,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/77be27c91d97d60f8bded7c1d1599f846e10050b","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuZXZlbnQ7CgppbXBvcnQgamF2\nYS5pby5FeHRlcm5hbGl6YWJsZTsKaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRp\nb247CmltcG9ydCBqYXZhLmlvLk9iamVjdElucHV0OwppbXBvcnQgamF2YS5p\nby5PYmplY3RPdXRwdXQ7CmltcG9ydCBqYXZhLmxhbmcucmVmbGVjdC5NZXRo\nb2Q7CmltcG9ydCBqYXZhLnNlY3VyaXR5LkFjY2Vzc0NvbnRyb2xsZXI7Cmlt\ncG9ydCBqYXZhLnV0aWwuQXJyYXlzOwoKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5saWIudXRpbC5KMkRvUHJpdkhlbHBlcjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6ZXI7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEudXRpbC5Vc2VyRXhjZXB0aW9uOwoKLyoqCiAqIENhbGxi\nYWNrIGFkYXB0ZXIgdGhhdCBpbnZva2VzIGEgY2FsbGJhY2sgbWV0aG9kIHZp\nYSByZWZsZWN0aW9uLgogKgogKiBAYXV0aG9yIFN0ZXZlIEtpbQogKi8KcHVi\nbGljIGNsYXNzIE1ldGhvZExpZmVjeWNsZUNhbGxiYWNrcwogICAgaW1wbGVt\nZW50cyBMaWZlY3ljbGVDYWxsYmFja3MsIEV4dGVybmFsaXphYmxlIHsKCiAg\nICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6ZXIgX2xvYyA9IExvY2Fs\naXplci5mb3JQYWNrYWdlCiAgICAgICAgKE1ldGhvZExpZmVjeWNsZUNhbGxi\nYWNrcy5jbGFzcyk7CgogICAgcHJpdmF0ZSB0cmFuc2llbnQgTWV0aG9kIF9j\nYWxsYmFjazsKICAgIHByaXZhdGUgYm9vbGVhbiBfYXJnOwoKICAgIC8qKgog\nICAgICogQ29uc3RydWN0b3IuIFN1cHBseSBjYWxsYmFjayBjbGFzcyBhbmQg\naXRzIGNhbGxiYWNrIG1ldGhvZCBuYW1lLgogICAgICoKICAgICAqIEBhcmcg\nV2hldGhlciB3ZSBleHBlY3QgYSBmdXJ0aGVyIGFyZ3VtZW50IHN1Y2ggYXMg\naW4gQWZ0ZXJEZXRhY2gKICAgICAqLwogICAgcHVibGljIE1ldGhvZExpZmVj\neWNsZUNhbGxiYWNrcyhDbGFzcyBjbHMsIFN0cmluZyBtZXRob2QsIGJvb2xl\nYW4gYXJnKSB7CiAgICAgICAgQ2xhc3NbXSBhcmdzID0gYXJnID8gbmV3IENs\nYXNzW117IE9iamVjdC5jbGFzcyB9IDogbnVsbDsKICAgICAgICBfY2FsbGJh\nY2sgPSBnZXRNZXRob2QoY2xzLCBtZXRob2QsIGFyZ3MpOwogICAgICAgIF9h\ncmcgPSBhcmc7CiAgICB9CgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3Rvci4g\nU3VwcGx5IGNhbGxiYWNrIG1ldGhvZC4KICAgICAqLwogICAgcHVibGljIE1l\ndGhvZExpZmVjeWNsZUNhbGxiYWNrcyhNZXRob2QgbWV0aG9kLCBib29sZWFu\nIGFyZykgewogICAgICAgIF9jYWxsYmFjayA9IG1ldGhvZDsKICAgICAgICBf\nYXJnID0gYXJnOwogICAgfQoKICAgIC8qKgogICAgICogVGhlIGNhbGxiYWNr\nIG1ldGhvZC4KICAgICAqLwogICAgcHVibGljIE1ldGhvZCBnZXRDYWxsYmFj\na01ldGhvZCgpIHsKICAgICAgICByZXR1cm4gX2NhbGxiYWNrOwogICAgfQoK\nICAgIC8qKgogICAgICogUmV0dXJucyBpZiB0aGlzIGNhbGxiYWNrIGV4cGVj\ndHMgYW5vdGhlciBhcmd1bWVudAogICAgICovCiAgICBwdWJsaWMgYm9vbGVh\nbiByZXF1aXJlc0FyZ3VtZW50KCkgewogICAgICAgIHJldHVybiBfYXJnOwog\nICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGhhc0NhbGxiYWNrKE9iamVjdCBv\nYmosIGludCBldmVudFR5cGUpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBtYWtlQ2FsbGJhY2soT2JqZWN0IG9iaiwg\nT2JqZWN0IGFyZywgaW50IGV2ZW50VHlwZSkKICAgICAgICB0aHJvd3MgRXhj\nZXB0aW9uIHsKICAgICAgICBpZiAoIV9jYWxsYmFjay5pc0FjY2Vzc2libGUo\nKSkKICAgICAgICAgICAgQWNjZXNzQ29udHJvbGxlci5kb1ByaXZpbGVnZWQo\nSjJEb1ByaXZIZWxwZXIuc2V0QWNjZXNzaWJsZUFjdGlvbigKICAgICAgICAg\nICAgICAgIF9jYWxsYmFjaywgdHJ1ZSkpOwoKICAgICAgICBpZiAoX2FyZykK\nICAgICAgICAgICAgX2NhbGxiYWNrLmludm9rZShvYmosIG5ldyBPYmplY3Rb\nXXsgYXJnIH0pOwogICAgICAgIGVsc2UKICAgICAgICAgICAgX2NhbGxiYWNr\nLmludm9rZShvYmosIChPYmplY3RbXSkgbnVsbCk7CiAgICB9CgogICAgcHVi\nbGljIFN0cmluZyB0b1N0cmluZygpIHsKICAgICAgICByZXR1cm4gZ2V0Q2xh\nc3MoKS5nZXROYW1lKCkgKyAiOiIgKyBfY2FsbGJhY2s7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBIZWxwZXIgbWV0aG9kIHRvIHJldHVybiB0aGUgbmFtZWQg\nbWV0aG9kIG9mIHRoZSBnaXZlbiBjbGFzcywgdGhyb3dpbmcKICAgICAqIHRo\nZSBwcm9wZXIgZXhjZXB0aW9uIG9uIGVycm9yLgogICAgICovCiAgICBwcm90\nZWN0ZWQgc3RhdGljIE1ldGhvZCBnZXRNZXRob2QoQ2xhc3MgY2xzLCBTdHJp\nbmcgbWV0aG9kLCBDbGFzc1tdIGFyZ3MpIHsKICAgICAgICBDbGFzcyBjdXJy\nZW50Q2xhc3MgPSBjbHM7CiAgICAgICAgZG8gewogICAgICAgICAgICBNZXRo\nb2RbXSBtZXRob2RzID0gKE1ldGhvZFtdKSBBY2Nlc3NDb250cm9sbGVyLmRv\nUHJpdmlsZWdlZCgKICAgICAgICAgICAgICAgIEoyRG9Qcml2SGVscGVyLmdl\ndERlY2xhcmVkTWV0aG9kc0FjdGlvbihjdXJyZW50Q2xhc3MpKTsgCiAgICAg\nICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbWV0aG9kcy5sZW5ndGg7IGkr\nKykgewogICAgICAgICAgICAgICAgaWYgKCFtZXRob2QuZXF1YWxzKG1ldGhv\nZHNbaV0uZ2V0TmFtZSgpKSkKICAgICAgICAgICAgICAgICAgICBjb250aW51\nZTsKCiAgICAgICAgICAgICAgICBpZiAoaXNBc3NpZ25hYmxlKG1ldGhvZHNb\naV0uZ2V0UGFyYW1ldGVyVHlwZXMoKSwgYXJncykpCiAgICAgICAgICAgICAg\nICAgICAgcmV0dXJuIG1ldGhvZHNbaV07CiAgICAgICAgICAgIH0KICAgICAg\nICB9IHdoaWxlICgoY3VycmVudENsYXNzID0gY3VycmVudENsYXNzLmdldFN1\ncGVyY2xhc3MoKSkgIT0gbnVsbCk7CgogICAgICAgIC8vIGlmIHdlIGdldCBo\nZXJlLCBubyBzdWl0YWJsZSBtZXRob2Qgd2FzIGZvdW5kCiAgICAgICAgdGhy\nb3cgbmV3IFVzZXJFeGNlcHRpb24oX2xvYy5nZXQoIm1ldGhvZC1ub3Rmb3Vu\nZCIsIGNscy5nZXROYW1lKCksCiAgICAgICAgICAgICAgICBtZXRob2QsIGFy\nZ3MgPT0gbnVsbCA/IG51bGwgOiBBcnJheXMuYXNMaXN0KGFyZ3MpKSk7Cgl9\nCgogICAgLyoqIAogICAgICogUmV0dXJucyB0cnVlIGlmIGFsbCBwYXJhbWV0\nZXJzIGluIHRoZSBmcm9tIGFycmF5IGFyZSBhc3NpZ25hYmxlCiAgICAgKiBm\ncm9tIHRoZSBjb3JyZXNwb25kaW5nIHBhcmFtZXRlcnMgb2YgdGhlIHRvIGFy\ncmF5LiAKICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgYm9vbGVhbiBpc0Fz\nc2lnbmFibGUoQ2xhc3NbXSBmcm9tLCBDbGFzc1tdIHRvKSB7CiAgICAgICAg\naWYgKGZyb20gPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIHRvID09IG51\nbGwgfHwgdG8ubGVuZ3RoID09IDA7CiAgICAgICAgaWYgKHRvID09IG51bGwp\nCiAgICAgICAgICAgIHJldHVybiBmcm9tID09IG51bGwgfHwgZnJvbS5sZW5n\ndGggPT0gMDsKCiAgICAgICAgaWYgKGZyb20ubGVuZ3RoICE9IHRvLmxlbmd0\naCkKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoKICAgICAgICBmb3IgKGlu\ndCBpID0gMDsgaSA8IGZyb20ubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAg\naWYgKGZyb21baV0gIT0gbnVsbCAmJiAhZnJvbVtpXS5pc0Fzc2lnbmFibGVG\ncm9tKHRvW2ldKSkKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAg\nICAgICB9CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHJlYWRFeHRlcm5hbChPYmplY3RJbnB1dCBpbikKICAgICAgICB0\naHJvd3MgSU9FeGNlcHRpb24sIENsYXNzTm90Rm91bmRFeGNlcHRpb24gewog\nICAgICAgIENsYXNzIGNscyA9IChDbGFzcykgaW4ucmVhZE9iamVjdCgpOwog\nICAgICAgIFN0cmluZyBtZXRoTmFtZSA9IChTdHJpbmcpIGluLnJlYWRPYmpl\nY3QoKTsKICAgICAgICBfYXJnID0gaW4ucmVhZEJvb2xlYW4oKTsKCiAgICAg\nICAgQ2xhc3NbXSBhcmdzID0gX2FyZyA/IG5ldyBDbGFzc1tdeyBPYmplY3Qu\nY2xhc3MgfSA6IG51bGw7CiAgICAgICAgX2NhbGxiYWNrID0gZ2V0TWV0aG9k\nKGNscywgbWV0aE5hbWUsIGFyZ3MpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHdyaXRlRXh0ZXJuYWwoT2JqZWN0T3V0cHV0IG91dCkKICAgICAgICB0aHJv\nd3MgSU9FeGNlcHRpb24gewogICAgICAgIG91dC53cml0ZU9iamVjdChfY2Fs\nbGJhY2suZ2V0Q2xhc3MoKSk7CiAgICAgICAgb3V0LndyaXRlT2JqZWN0KF9j\nYWxsYmFjay5nZXROYW1lKCkpOwogICAgICAgIG91dC53cml0ZUJvb2xlYW4o\nX2FyZyk7CiAgICB9IAp9Cg==\n","encoding":"base64"}

