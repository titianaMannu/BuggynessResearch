{"sha":"5036e44f836f259ed629e10402443c4ca90586dd","node_id":"MDQ6QmxvYjIwNjM2NDo1MDM2ZTQ0ZjgzNmYyNTllZDYyOWUxMDQwMjQ0M2M0Y2E5MDU4NmRk","size":6922,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/5036e44f836f259ed629e10402443c4ca90586dd","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuZXZlbnQ7CgppbXBvcnQgamF2\nYS5pby5FeHRlcm5hbGl6YWJsZTsKaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRp\nb247CmltcG9ydCBqYXZhLmlvLk9iamVjdElucHV0OwppbXBvcnQgamF2YS5p\nby5PYmplY3RPdXRwdXQ7CmltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbjsK\naW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsKCmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnV0aWwuVXNlckV4Y2VwdGlvbjsKCi8qKgogKiBFdmVu\ndCB0eXBlIHRvIGhvbGQgdGhlIElEcyBvZiBhZGRpdGlvbnMsIHVwZGF0ZXMs\nIGFuZAogKiBkZWxldGVzLiBUaGlzIGV2ZW50IHR5cGUgaXMgYWxzbyBmdWxs\neSBzZXJpYWxpemFibGUgZm9yIHJlbW90ZSBjb21tdW5pY2F0aW9uLgogKgog\nKiBAc2luY2UgMC4zLjAKICogQGF1dGhvciBQYXRyaWNrIExpbnNrZXkKICog\nQGF1dGhvciBBYmUgV2hpdGUKICovCnB1YmxpYyBjbGFzcyBSZW1vdGVDb21t\naXRFdmVudAogICAgaW1wbGVtZW50cyBFeHRlcm5hbGl6YWJsZSB7CgogICAg\nLyoqCiAgICAgKiBOYW1lcyBvZiBhZGRlZCBjbGFzc2VzLCB1cGRhdGVkIGFu\nZCBkZWxldGVkIE9iamVjdCBJRHMuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0\naWMgZmluYWwgaW50IFBBWUxPQURfT0lEUyA9IDA7CgogICAgLyoqCiAgICAg\nKiBOYW1lcyBvZiBhZGRlZCBjbGFzc2VzLCBhZGRlZCwgdXBkYXRlZCBhbmQg\nZGVsZXRlZCBPYmplY3QgSURzLgogICAgICovCiAgICBwdWJsaWMgc3RhdGlj\nIGZpbmFsIGludCBQQVlMT0FEX09JRFNfV0lUSF9BRERTID0gMTsKCiAgICAv\nKioKICAgICAqIE5hbWVzIG9mIGFkZGVkLCB1cGRhdGVkLCBhbmQgZGVsZXRl\nZCBjbGFzc2VzIG9ubHkuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZmlu\nYWwgaW50IFBBWUxPQURfRVhURU5UUyA9IDI7CgogICAgLyoqCiAgICAgKiBU\naGUgbG9jYWwge0BsaW5rIEJyb2tlckZhY3Rvcnl9IGRldGVjdGVkIHRoYXQg\nbG9jYWwgZGF0YSBpcyBvdXQgb2YgZGF0ZQogICAgICogd2l0aCB0aGUgZGF0\nYSBzdG9yZS4gU3RhbGUgb2JqZWN0IElEcyB3aWxsIGJlIGluIHQgaGUgdXBk\nYXRlZCBzZXQsCiAgICAgKiBhbHRob3VnaCBpdCBpcyBwb3NzaWJsZSB0aGF0\nIHJlY29yZHMgd2VyZSBhY3R1YWxseSBkZWxldGVkLCByYXRoZXIgdGhhbgog\nICAgICogdXBkYXRlZC4KICAgICAqCiAgICAgKiBAc2luY2UgMS4wLjAKICAg\nICAqLwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgUEFZTE9BRF9MT0NB\nTF9TVEFMRV9ERVRFQ1RJT04gPSAzOwoKICAgIHByaXZhdGUgc3RhdGljIGZp\nbmFsIExvY2FsaXplciBzX2xvYyA9IExvY2FsaXplci5mb3JQYWNrYWdlCiAg\nICAgICAgKFJlbW90ZUNvbW1pdEV2ZW50LmNsYXNzKTsKCiAgICBwcml2YXRl\nIGludCBfcGF5bG9hZCA9IFBBWUxPQURfT0lEUzsKICAgIHByaXZhdGUgQ29s\nbGVjdGlvbiBfYWRkSWRzID0gbnVsbDsKICAgIHByaXZhdGUgQ29sbGVjdGlv\nbiBfYWRkQ2xhc3NlcyA9IG51bGw7CiAgICBwcml2YXRlIENvbGxlY3Rpb24g\nX3VwZGF0ZXMgPSBudWxsOwogICAgcHJpdmF0ZSBDb2xsZWN0aW9uIF9kZWxl\ndGVzID0gbnVsbDsKCiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yIHVzZWQg\nZHVyaW5nIGV4dGVybmFsaXphdGlvbi4KICAgICAqLwogICAgcHVibGljIFJl\nbW90ZUNvbW1pdEV2ZW50KCkgewogICAgfQoKICAgIC8qKgogICAgICogQ29u\nc3RydWN0b3IuIEFsbCBjb2xsZWN0aW9ucyB3aWxsIGJlIHByb3hpZWQgd2l0\naCB1bm1vZGlmaWFibGUgdmlld3MuCiAgICAgKgogICAgICogQHBhcmFtIHBh\neWxvYWRUeXBlIFBBWUxPQUQgY29uc3RhbnQgZm9yIHR5cGUgb2YgZGF0YSBp\nbiB0aGlzIGV2ZW50CiAgICAgKiBAcGFyYW0gYWRkSWRzIHNldCBvZiBvYmpl\nY3QgSURzIGZvciBhZGRlZCBpbnN0YW5jZXMsIG9yIG51bGwKICAgICAqIEBw\nYXJhbSBhZGRDbGFzc2VzIHNldCBvZiBjbGFzcyBuYW1lcyBmb3IgYWRkZWQg\naW5zdGFuY2VzCiAgICAgKiBAcGFyYW0gdXBkYXRlcyBzZXQgb2YgY2xhc3Mg\nbmFtZXMgb3Igb2JqZWN0IElEcyBmb3IgdXBkYXRlZCBpbnN0YW5jZXMKICAg\nICAqIEBwYXJhbSBkZWxldGVzIHNldCBvZiBjbGFzcyBuYW1lcyBvciBvYmpl\nY3QgSURzIGZvciBkZWxldGVkIGluc3RhbmNlcwogICAgICovCiAgICBwdWJs\naWMgUmVtb3RlQ29tbWl0RXZlbnQoaW50IHBheWxvYWRUeXBlLCBDb2xsZWN0\naW9uIGFkZElkcywKICAgICAgICBDb2xsZWN0aW9uIGFkZENsYXNzZXMsIENv\nbGxlY3Rpb24gdXBkYXRlcywgQ29sbGVjdGlvbiBkZWxldGVzKSB7CiAgICAg\nICAgX3BheWxvYWQgPSBwYXlsb2FkVHlwZTsKICAgICAgICBpZiAoYWRkSWRz\nICE9IG51bGwpCiAgICAgICAgICAgIF9hZGRJZHMgPSBDb2xsZWN0aW9ucy51\nbm1vZGlmaWFibGVDb2xsZWN0aW9uKGFkZElkcyk7CiAgICAgICAgaWYgKGFk\nZENsYXNzZXMgIT0gbnVsbCkKICAgICAgICAgICAgX2FkZENsYXNzZXMgPSBD\nb2xsZWN0aW9ucy51bm1vZGlmaWFibGVDb2xsZWN0aW9uKGFkZENsYXNzZXMp\nOwogICAgICAgIGlmICh1cGRhdGVzICE9IG51bGwpCiAgICAgICAgICAgIF91\ncGRhdGVzID0gQ29sbGVjdGlvbnMudW5tb2RpZmlhYmxlQ29sbGVjdGlvbih1\ncGRhdGVzKTsKICAgICAgICBpZiAoZGVsZXRlcyAhPSBudWxsKQogICAgICAg\nICAgICBfZGVsZXRlcyA9IENvbGxlY3Rpb25zLnVubW9kaWZpYWJsZUNvbGxl\nY3Rpb24oZGVsZXRlcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgZXZl\nbnQgUEFZTE9BRCBjb25zdGFudC4KICAgICAqLwogICAgcHVibGljIGludCBn\nZXRQYXlsb2FkVHlwZSgpIHsKICAgICAgICByZXR1cm4gX3BheWxvYWQ7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBXaGVuIHRoZSBldmVudCB0eXBlIGlzIFBB\nWUxPQURfT0lEU19XSVRIX0FERFMsIHJldHVybiB0aGUgc2V0IG9mCiAgICAg\nKiBvYmplY3QgSURzIGZvciBhZGRlZCBvYmplY3RzLiBUaGlzIHdpbGwgb25s\neSBiZSBjYWxsYWJsZSB3aGVuIHRoZQogICAgICogYmFja3dhcmQgY29tcGF0\nYWJpbGl0eSBwcm9wZXJ0eSB0cmFuc21pdEFkZE9iamVjdElkcyBpcyB0cnVl\nLgogICAgICovCiAgICBwdWJsaWMgQ29sbGVjdGlvbiBnZXRQZXJzaXN0ZWRP\nYmplY3RJZHMoKSB7CiAgICAgICAgaWYgKF9wYXlsb2FkICE9IFBBWUxPQURf\nT0lEU19XSVRIX0FERFMpIHsKICAgICAgICAgICAgaWYgKF9wYXlsb2FkID09\nIFBBWUxPQURfT0lEUykKICAgICAgICAgICAgICAgIHRocm93IG5ldyBVc2Vy\nRXhjZXB0aW9uKHNfbG9jLmdldCgibm8tYWRkZWQtb2lkcyIpKTsKICAgICAg\nICAgICAgdGhyb3cgbmV3IFVzZXJFeGNlcHRpb24oc19sb2MuZ2V0KCJleHRl\nbnQtb25seS1ldmVudCIpKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIChf\nYWRkSWRzID09IG51bGwpID8gQ29sbGVjdGlvbnMuRU1QVFlfTElTVCA6IF9h\nZGRJZHM7CiAgICB9CgogICAgLyoqCiAgICAgKiBXaGVuIHRoZSBldmVudCB0\neXBlIGlzIG5vdCBQQVlMT0FEX0VYVEVOVFMsIHJldHVybiB0aGUgc2V0IG9m\nCiAgICAgKiBvYmplY3QgSURzIGZvciB1cGRhdGVkIG9iamVjdHMuIFdoZW4g\ndGhlIGV2ZW50IHR5cGUgaXMKICAgICAqIFBBWUxPQURfTE9DQUxfU1RBTEVf\nREVURUNUSU9OLCBpdGVtcyBpbiB0aGlzIGxpc3QgbWF5IGFjdHVhbGx5IGhh\ndmUKICAgICAqIGJlZW4gZGVsZXRlZCBmcm9tIHRoZSBkYXRhYmFzZS4KICAg\nICAqLwogICAgcHVibGljIENvbGxlY3Rpb24gZ2V0VXBkYXRlZE9iamVjdElk\ncygpIHsKICAgICAgICBpZiAoX3BheWxvYWQgPT0gUEFZTE9BRF9FWFRFTlRT\nKQogICAgICAgICAgICB0aHJvdyBuZXcgVXNlckV4Y2VwdGlvbihzX2xvYy5n\nZXQoImV4dGVudC1vbmx5LWV2ZW50IikpOwogICAgICAgIHJldHVybiAoX3Vw\nZGF0ZXMgPT0gbnVsbCkgPyBDb2xsZWN0aW9ucy5FTVBUWV9MSVNUIDogX3Vw\nZGF0ZXM7CiAgICB9CgogICAgLyoqCiAgICAgKiBXaGVuIHRoZSBldmVudCB0\neXBlIGlzIG5vdCBQQVlMT0FEX0VYVEVOVFMsIHJldHVybiB0aGUgc2V0IG9m\nCiAgICAgKiBvYmplY3QgSURzIGZvciBkZWxldGVkIG9iamVjdHMuCiAgICAg\nKi8KICAgIHB1YmxpYyBDb2xsZWN0aW9uIGdldERlbGV0ZWRPYmplY3RJZHMo\nKSB7CiAgICAgICAgaWYgKF9wYXlsb2FkID09IFBBWUxPQURfRVhURU5UUykK\nICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFeGNlcHRpb24oc19sb2MuZ2V0\nKCJleHRlbnQtb25seS1ldmVudCIpKTsKICAgICAgICByZXR1cm4gKF9kZWxl\ndGVzID09IG51bGwpID8gQ29sbGVjdGlvbnMuRU1QVFlfTElTVCA6IF9kZWxl\ndGVzOwogICAgfQoKICAgIC8qKgogICAgICogRm9yIGFsbCBldmVudCB0eXBl\ncywgcmV0dXJuIHRoZSBzZXQgb2YgY2xhc3MgbmFtZXMgZm9yCiAgICAgKiB0\naGUgY2xhc3NlcyBvZiBpbnNlcnRlZCBvYmplY3RzLgogICAgICovCiAgICBw\ndWJsaWMgQ29sbGVjdGlvbiBnZXRQZXJzaXN0ZWRUeXBlTmFtZXMoKSB7CiAg\nICAgICAgcmV0dXJuIChfYWRkQ2xhc3NlcyA9PSBudWxsKSA/IENvbGxlY3Rp\nb25zLkVNUFRZX0xJU1QgOiBfYWRkQ2xhc3NlczsKICAgIH0KCiAgICAvKioK\nICAgICAqIFdoZW4gdGhlIGV2ZW50IHR5cGUgaXMgUEFZTE9BRF9FWFRFTlRT\nLCByZXR1cm4gdGhlIHNldCBvZiBjbGFzcwogICAgICogbmFtZXMgZm9yIHRo\nZSBjbGFzc2VzIG9mIHVwZGF0ZWQgb2JqZWN0cy4KICAgICAqLwogICAgcHVi\nbGljIENvbGxlY3Rpb24gZ2V0VXBkYXRlZFR5cGVOYW1lcygpIHsKICAgICAg\nICBpZiAoX3BheWxvYWQgIT0gUEFZTE9BRF9FWFRFTlRTKQogICAgICAgICAg\nICB0aHJvdyBuZXcgVXNlckV4Y2VwdGlvbihzX2xvYy5nZXQoIm5vbmV4dGVu\ndC1ldmVudCIpKTsKICAgICAgICByZXR1cm4gKF91cGRhdGVzID09IG51bGwp\nID8gQ29sbGVjdGlvbnMuRU1QVFlfTElTVCA6IF91cGRhdGVzOwogICAgfQoK\nICAgIC8qKgogICAgICogV2hlbiB0aGUgZXZlbnQgdHlwZSBpcyBQQVlMT0FE\nX0VYVEVOVFMsIHJldHVybiB0aGUgc2V0IG9mIGNsYXNzCiAgICAgKiBuYW1l\ncyBmb3IgdGhlIGNsYXNzZXMgb2YgZGVsZXRlZCBvYmplY3RzLgogICAgICov\nCiAgICBwdWJsaWMgQ29sbGVjdGlvbiBnZXREZWxldGVkVHlwZU5hbWVzKCkg\newogICAgICAgIGlmIChfcGF5bG9hZCAhPSBQQVlMT0FEX0VYVEVOVFMpCiAg\nICAgICAgICAgIHRocm93IG5ldyBVc2VyRXhjZXB0aW9uKHNfbG9jLmdldCgi\nbm9uZXh0ZW50LWV2ZW50IikpOwogICAgICAgIHJldHVybiAoX2RlbGV0ZXMg\nPT0gbnVsbCkgPyBDb2xsZWN0aW9ucy5FTVBUWV9MSVNUIDogX2RlbGV0ZXM7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgd3JpdGVFeHRlcm5hbChPYmplY3RP\ndXRwdXQgb3V0KQogICAgICAgIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAg\nICAgb3V0LndyaXRlSW50KF9wYXlsb2FkKTsKICAgICAgICBvdXQud3JpdGVP\nYmplY3QoX2FkZENsYXNzZXMpOwogICAgICAgIGlmIChfcGF5bG9hZCA9PSBQ\nQVlMT0FEX09JRFNfV0lUSF9BRERTKQogICAgICAgICAgICBvdXQud3JpdGVP\nYmplY3QoX2FkZElkcyk7CiAgICAgICAgb3V0LndyaXRlT2JqZWN0KF91cGRh\ndGVzKTsKICAgICAgICBvdXQud3JpdGVPYmplY3QoX2RlbGV0ZXMpOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHJlYWRFeHRlcm5hbChPYmplY3RJbnB1dCBp\nbikKICAgICAgICB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgIHRyeSB7\nCiAgICAgICAgICAgIF9wYXlsb2FkID0gaW4ucmVhZEludCgpOwogICAgICAg\nICAgICBfYWRkQ2xhc3NlcyA9IChDb2xsZWN0aW9uKSBpbi5yZWFkT2JqZWN0\nKCk7CiAgICAgICAgICAgIGlmIChfcGF5bG9hZCA9PSBQQVlMT0FEX09JRFNf\nV0lUSF9BRERTKQogICAgICAgICAgICAgICAgX2FkZElkcyA9IChDb2xsZWN0\naW9uKSBpbi5yZWFkT2JqZWN0KCk7CiAgICAgICAgICAgIF91cGRhdGVzID0g\nKENvbGxlY3Rpb24pIGluLnJlYWRPYmplY3QoKTsKICAgICAgICAgICAgX2Rl\nbGV0ZXMgPSAoQ29sbGVjdGlvbikgaW4ucmVhZE9iamVjdCgpOwogICAgICAg\nIH0gY2F0Y2ggKENsYXNzTm90Rm91bmRFeGNlcHRpb24gY25mZSkgewogICAg\nICAgICAgICAvLyAjIyMgZG8gc29tZXRoaW5nCgkJfQoJfQp9Cg==\n","encoding":"base64"}

