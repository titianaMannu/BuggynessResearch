{"sha":"25cf716b9aba4100bf149f4159dae32da25535a6","node_id":"MDQ6QmxvYjIwNjM2NDoyNWNmNzE2YjlhYmE0MTAwYmYxNDlmNDE1OWRhZTMyZGEyNTUzNWE2","size":34587,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/25cf716b9aba4100bf149f4159dae32da25535a6","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuZXZlbnQ7CgppbXBvcnQgamF2\nYS5pby5CdWZmZXJlZElucHV0U3RyZWFtOwppbXBvcnQgamF2YS5pby5CeXRl\nQXJyYXlPdXRwdXRTdHJlYW07CmltcG9ydCBqYXZhLmlvLkVPRkV4Y2VwdGlv\nbjsKaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247CmltcG9ydCBqYXZhLmlv\nLklucHV0U3RyZWFtOwppbXBvcnQgamF2YS5pby5PYmplY3RJbnB1dFN0cmVh\nbTsKaW1wb3J0IGphdmEuaW8uT2JqZWN0T3V0cHV0U3RyZWFtOwppbXBvcnQg\namF2YS5pby5PdXRwdXRTdHJlYW07CmltcG9ydCBqYXZhLm5ldC5JbmV0QWRk\ncmVzczsKaW1wb3J0IGphdmEubmV0LlNlcnZlclNvY2tldDsKaW1wb3J0IGph\ndmEubmV0LlNvY2tldDsKaW1wb3J0IGphdmEubmV0LlNvY2tldEV4Y2VwdGlv\nbjsKaW1wb3J0IGphdmEubmV0LlVua25vd25Ib3N0RXhjZXB0aW9uOwppbXBv\ncnQgamF2YS5zZWN1cml0eS5BY2Nlc3NDb250cm9sbGVyOwppbXBvcnQgamF2\nYS5zZWN1cml0eS5Qcml2aWxlZ2VkQWN0aW9uRXhjZXB0aW9uOwppbXBvcnQg\namF2YS51dGlsLkFycmF5TGlzdDsKaW1wb3J0IGphdmEudXRpbC5BcnJheXM7\nCmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsKaW1wb3J0IGphdmEudXRpbC5I\nYXNoU2V0OwppbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9yOwppbXBvcnQgamF2\nYS51dGlsLkxpbmtlZExpc3Q7CmltcG9ydCBqYXZhLnV0aWwuTWFwOwppbXBv\ncnQgamF2YS51dGlsLlNldDsKaW1wb3J0IGphdmEudXRpbC5MaXN0OwppbXBv\ncnQgamF2YS51dGlsLkNvbGxlY3Rpb25zOwoKaW1wb3J0IG9yZy5hcGFjaGUu\nY29tbW9ucy5wb29sLlBvb2xhYmxlT2JqZWN0RmFjdG9yeTsKaW1wb3J0IG9y\nZy5hcGFjaGUuY29tbW9ucy5wb29sLmltcGwuR2VuZXJpY09iamVjdFBvb2w7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmNvbmYuQ29uZmlndXJh\nYmxlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5sb2cuTG9nOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkoyRG9Qcml2SGVs\ncGVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkxvY2Fs\naXplcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLkdlbmVyYWxF\neGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5JbnRl\ncm5hbEV4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGls\nLlNlcmlhbGl6YXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGli\nLnV0aWwuY29uY3VycmVudC5SZWVudHJhbnRMb2NrOwoKaW1wb3J0IHNlcnAu\ndXRpbC5TdHJpbmdzOwoKLyoqCiAqIFRDUC1iYXNlZCBpbXBsZW1lbnRhdGlv\nbiBvZiB7QGxpbmsgUmVtb3RlQ29tbWl0UHJvdmlkZXJ9IHRoYXQKICogbGlz\ndGVucyBmb3Igb2JqZWN0IG1vZGlmaWNhdGlvbnMgYW5kIHByb3BhZ2F0ZXMg\ndGhvc2UgY2hhbmdlcyB0bwogKiBvdGhlciBSZW1vdGVDb21taXRQcm92aWRl\ncnMgb3ZlciBUQ1Agc29ja2V0cy4KICoKICogQGF1dGhvciBCcmlhbiBMZWFp\ncgogKiBAYXV0aG9yIFBhdHJpY2sgTGluc2tleQogKiBAc2luY2UgMC4yLjUu\nMAogKi8KcHVibGljIGNsYXNzIFRDUFJlbW90ZUNvbW1pdFByb3ZpZGVyCiAg\nICBleHRlbmRzIEFic3RyYWN0UmVtb3RlQ29tbWl0UHJvdmlkZXIKICAgIGlt\ncGxlbWVudHMgQ29uZmlndXJhYmxlIHsKCiAgICBwcml2YXRlIHN0YXRpYyBm\naW5hbCBpbnQgREVGQVVMVF9QT1JUID0gNTYzNjsKCiAgICBwcml2YXRlIHN0\nYXRpYyBmaW5hbCBMb2NhbGl6ZXIgc19sb2MgPSBMb2NhbGl6ZXIuZm9yUGFj\na2FnZQogICAgICAgIChUQ1BSZW1vdGVDb21taXRQcm92aWRlci5jbGFzcyk7\nCiAgICBwcml2YXRlIHN0YXRpYyBsb25nIHNfaWRTZXF1ZW5jZSA9IFN5c3Rl\nbS5jdXJyZW50VGltZU1pbGxpcygpOwoKICAgIC8vCUEgbWFwIG9mIGxpc3Rl\nbiBwb3J0cyB0byBsaXN0ZW5lcnMgaW4gdGhpcyBKVk0uIFdlIG1pZ2h0CiAg\nICAvLwl3YW50IHRvIGxvb2sgaW50byBhbGxvd2luZyBzYW1lIHBvcnQsIGRp\nZmZlcmVudCBpbnRlcmZhY2UgLS0KICAgIC8vCXRoYXQgaXMgbm90IGN1cnJl\nbnRseSBwb3NzaWJsZSBpbiBhIHNpbmdsZSBKVk0uCiAgICBwcml2YXRlIHN0\nYXRpYyBmaW5hbCBNYXAgc19wb3J0TGlzdGVuZXJNYXAgPSBuZXcgSGFzaE1h\ncCgpOwoKICAgIHByaXZhdGUgbG9uZyBfaWQ7CiAgICBwcml2YXRlIGJ5dGVb\nXSBfbG9jYWxob3N0OwogICAgcHJpdmF0ZSBpbnQgX3BvcnQgPSBERUZBVUxU\nX1BPUlQ7CiAgICBwcml2YXRlIGludCBfbWF4QWN0aXZlID0gMjsKICAgIHBy\naXZhdGUgaW50IF9tYXhJZGxlID0gMjsKICAgIHByaXZhdGUgaW50IF9yZWNv\ndmVyeVRpbWVNaWxsaXMgPSAxNTAwMDsKICAgIHByaXZhdGUgVENQUG9ydExp\nc3RlbmVyIF9saXN0ZW5lcjsKICAgIHByaXZhdGUgQnJvYWRjYXN0UXVldWUg\nX2Jyb2FkY2FzdFF1ZXVlID0gbmV3IEJyb2FkY2FzdFF1ZXVlKCk7CiAgICBw\ncml2YXRlIGZpbmFsIExpc3QgX2Jyb2FkY2FzdFRocmVhZHMgPSBDb2xsZWN0\naW9ucy5zeW5jaHJvbml6ZWRMaXN0KAogICAgICAgIG5ldyBMaW5rZWRMaXN0\nKCkpOwoKICAgIHByaXZhdGUgQXJyYXlMaXN0IF9hZGRyZXNzZXMgPSBuZXcg\nQXJyYXlMaXN0KCk7CiAgICBwcml2YXRlIFJlZW50cmFudExvY2sgX2FkZHJl\nc3Nlc0xvY2s7CgogICAgcHVibGljIFRDUFJlbW90ZUNvbW1pdFByb3ZpZGVy\nKCkKICAgICAgICB0aHJvd3MgVW5rbm93bkhvc3RFeGNlcHRpb24gewogICAg\nICAgIC8vIG9idGFpbiBhIHVuaXF1ZSBJRC4KICAgICAgICBzeW5jaHJvbml6\nZWQgKFRDUFJlbW90ZUNvbW1pdFByb3ZpZGVyLmNsYXNzKSB7CiAgICAgICAg\nICAgIF9pZCA9IHNfaWRTZXF1ZW5jZSsrOwogICAgICAgIH0KCiAgICAgICAg\nLy8gY2FjaGUgdGhlIGxvY2FsIElQIGFkZHJlc3MuCiAgICAgICAgX2xvY2Fs\naG9zdCA9IEluZXRBZGRyZXNzLmdldExvY2FsSG9zdCgpLmdldEFkZHJlc3Mo\nKTsKICAgICAgICBfYWRkcmVzc2VzTG9jayA9IG5ldyBSZWVudHJhbnRMb2Nr\nKCk7CiAgICAgICAgc2V0TnVtQnJvYWRjYXN0VGhyZWFkcygyKTsKICAgIH0K\nCiAgICAvKioKICAgICAqIFRoZSBwb3J0IHRoYXQgdGhpcyBwcm92aWRlciBz\naG91bGQgbGlzdGVuIG9uLgogICAgICovCiAgICBwdWJsaWMgaW50IGdldFBv\ncnQoKSB7CiAgICAgICAgcmV0dXJuIF9wb3J0OwogICAgfQoKICAgIC8qKgog\nICAgICogVGhlIHBvcnQgdGhhdCB0aGlzIHByb3ZpZGVyIHNob3VsZCBsaXN0\nZW4gb24uIFNldCBvbmNlIG9ubHkuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lk\nIHNldFBvcnQoaW50IHBvcnQpIHsKICAgICAgICBfcG9ydCA9IHBvcnQ7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25k\ncyB0byB3YWl0IGJlZm9yZSByZXRyeWluZwogICAgICogdG8gcmVjb25uZWN0\nIHRvIGEgcGVlciBhZnRlciBpdCBiZWNvbWVzIHVucmVhY2hhYmxlLgogICAg\nICovCiAgICBwdWJsaWMgdm9pZCBzZXRSZWNvdmVyeVRpbWVNaWxsaXMoaW50\nIHJlY292ZXJ5dGltZSkgewogICAgICAgIF9yZWNvdmVyeVRpbWVNaWxsaXMg\nPSByZWNvdmVyeXRpbWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgbnVt\nYmVyIG9mIG1pbGxpc2Vjb25kcyB0byB3YWl0IGJlZm9yZSByZXRyeWluZwog\nICAgICogdG8gcmVjb25uZWN0IHRvIGEgcGVlciBhZnRlciBpdCBiZWNvbWVz\nIHVucmVhY2hhYmxlLgogICAgICovCiAgICBwdWJsaWMgaW50IGdldFJlY292\nZXJ5VGltZU1pbGxpcygpIHsKICAgICAgICByZXR1cm4gX3JlY292ZXJ5VGlt\nZU1pbGxpczsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBtYXhpbXVtIG51\nbWJlciBvZiBzb2NrZXRzIHRoYXQgdGhpcyBwcm92aWRlciBjYW4KICAgICAq\nIHNpbWV0YW5lb3VzbHkgb3BlbiB0byBlYWNoIHBlZXIgaW4gdGhlIGNsdXN0\nZXIuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldE1heEFjdGl2ZShpbnQg\nbWF4QWN0aXZlKSB7CiAgICAgICAgX21heEFjdGl2ZSA9IG1heEFjdGl2ZTsK\nICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiBz\nb2NrZXRzIHRoYXQgdGhpcyBwcm92aWRlciBjYW4KICAgICAqIHNpbWV0YW5l\nb3VzbHkgb3BlbiB0byBlYWNoIHBlZXIgaW4gdGhlIGNsdXN0ZXIuCiAgICAg\nKi8KICAgIHB1YmxpYyBpbnQgZ2V0TWF4QWN0aXZlKCkgewogICAgICAgIHJl\ndHVybiBfbWF4QWN0aXZlOwogICAgfQoKICAgIC8qKgogICAgICogVGhlIG51\nbWJlciBvZiBpZGxlIHNvY2tldHMgdGhhdCB0aGlzIHByb3ZpZGVyIGNhbiBr\nZWVwIG9wZW4KICAgICAqIHRvIGVhY2ggcGVlciBpbiB0aGUgY2x1c3Rlci4K\nICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0TWF4SWRsZShpbnQgbWF4SWRs\nZSkgewogICAgICAgIF9tYXhJZGxlID0gbWF4SWRsZTsKICAgIH0KCiAgICAv\nKioKICAgICAqIFRoZSBudW1iZXIgb2YgaWRsZSBzb2NrZXRzIHRoYXQgdGhp\ncyBwcm92aWRlciBjYW4ga2VlcCBvcGVuCiAgICAgKiB0byBlYWNoIHBlZXIg\naW4gdGhlIGNsdXN0ZXIuCiAgICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0TWF4\nSWRsZSgpIHsKICAgICAgICByZXR1cm4gX21heElkbGU7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBUaGUgbnVtYmVyIG9mIHdvcmtlciB0aHJlYWRzIHRoYXQg\nYXJlIHVzZWQgZm9yCiAgICAgKiB0cmFuc21pdHRpbmcgcGFja2V0cyB0byBw\nZWVycyBpbiB0aGUgY2x1c3Rlci4KICAgICAqLwogICAgcHVibGljIHZvaWQg\nc2V0TnVtQnJvYWRjYXN0VGhyZWFkcyhpbnQgbnVtQnJvYWRjYXN0VGhyZWFk\ncykgewogICAgICAgIHN5bmNocm9uaXplZCAoX2Jyb2FkY2FzdFRocmVhZHMp\nIHsKICAgICAgICAgICAgaW50IGN1ciA9IF9icm9hZGNhc3RUaHJlYWRzLnNp\nemUoKTsKICAgICAgICAgICAgaWYgKGN1ciA+IG51bUJyb2FkY2FzdFRocmVh\nZHMpIHsKICAgICAgICAgICAgICAgIC8vIE5vdGlmeSB0aGUgZXh0cmEgd29y\na2VyIHRocmVhZHMgc28gdGhleSBzdG9wIHRoZW1zZWx2ZXMKICAgICAgICAg\nICAgICAgIC8vIFRocmVhZHMgd2lsbCBub3QgZW5kIHVudGlsIHRoZXkgc2Vu\nZCBhbm90aGVyIHBrLgogICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IG51\nbUJyb2FkY2FzdFRocmVhZHM7IGkgPCBjdXI7IGkrKykgewogICAgICAgICAg\nICAgICAgICAgIEJyb2FkY2FzdFdvcmtlclRocmVhZCB3b3JrZXIgPSAoQnJv\nYWRjYXN0V29ya2VyVGhyZWFkKQogICAgICAgICAgICAgICAgICAgICAgICBf\nYnJvYWRjYXN0VGhyZWFkcy5yZW1vdmUoMCk7CiAgICAgICAgICAgICAgICAg\nICAgd29ya2VyLnNldFJ1bm5pbmcoZmFsc2UpOwogICAgICAgICAgICAgICAg\nfQogICAgICAgICAgICB9IGVsc2UgaWYgKGN1ciA8IG51bUJyb2FkY2FzdFRo\ncmVhZHMpIHsKICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhZGRpdGlvbmFs\nIHdvcmtlciB0aHJlYWRzCiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0g\nY3VyOyBpIDwgbnVtQnJvYWRjYXN0VGhyZWFkczsgaSsrKSB7CiAgICAgICAg\nICAgICAgICAgICAgQnJvYWRjYXN0V29ya2VyVGhyZWFkIHd0ID0gbmV3IEJy\nb2FkY2FzdFdvcmtlclRocmVhZCgpOwogICAgICAgICAgICAgICAgICAgIHd0\nLnNldERhZW1vbih0cnVlKTsKICAgICAgICAgICAgICAgICAgICB3dC5zdGFy\ndCgpOwogICAgICAgICAgICAgICAgICAgIF9icm9hZGNhc3RUaHJlYWRzLmFk\nZCh3dCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAg\nICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgbnVtYmVyIG9mIHdvcmtl\nciB0aHJlYWRzIHRoYXQgYXJlIHVzZWQgZm9yCiAgICAgKiB0cmFuc21pdHRp\nbmcgcGFja2V0cyB0byBwZWVycyBpbiB0aGUgY2x1c3Rlci4KICAgICAqLwog\nICAgcHVibGljIGludCBnZXROdW1Ccm9hZGNhc3RUaHJlYWRzKCkgewogICAg\nICAgIHJldHVybiBfYnJvYWRjYXN0VGhyZWFkcy5zaXplKCk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBTZXRzIHRoZSBsaXN0IG9mIGFkZHJlc3NlcyBvZiBw\nZWVycyB0byB3aGljaCB0aGlzIHByb3ZpZGVyIHdpbGwKICAgICAqIHNlbmQg\nZXZlbnRzIHRvLiBUaGUgcGVlcnMgYXJlIHNlbWljb2xvbi1zZXBhcmF0ZWQg\nPGNvZGU+bmFtZXM8L2NvZGU+CiAgICAgKiBsaXN0IGluIHRoZSBmb3JtIG9m\nICJteWhvc3QxOnBvcnRBO215aG9zdDI6cG9ydEIiLgogICAgICovCiAgICBw\ndWJsaWMgdm9pZCBzZXRBZGRyZXNzZXMoU3RyaW5nIG5hbWVzKQogICAgICAg\nIHRocm93cyBVbmtub3duSG9zdEV4Y2VwdGlvbiB7CiAgICAgICAgLy8gTllJ\nLiBDb3VsZCBsb29rIGZvciBlcXVpdmFsZW5jZSBvZiBhZGRyZXNzZXMgYW5k\nIGF2b2lkCiAgICAgICAgLy8gY2hhbmdpbmcgdGhvc2UgdGhhdCBkaWRuJ3Qg\nY2hhbmdlLgoKICAgICAgICBfYWRkcmVzc2VzTG9jay5sb2NrKCk7CiAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgZm9yIChJdGVyYXRvciBpdGVyID0gX2Fk\nZHJlc3Nlcy5pdGVyYXRvcigpOyBpdGVyLmhhc05leHQoKTspIHsKICAgICAg\nICAgICAgICAgICgoSG9zdEFkZHJlc3MpIGl0ZXIubmV4dCgpKS5jbG9zZSgp\nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIFN0cmluZ1tdIHRva3MgPSBT\ndHJpbmdzLnNwbGl0KG5hbWVzLCAiOyIsIDApOwogICAgICAgICAgICBfYWRk\ncmVzc2VzID0gbmV3IEFycmF5TGlzdCh0b2tzLmxlbmd0aCk7CgogICAgICAg\nICAgICBJbmV0QWRkcmVzcyBsb2NhbGhvc3QgPSBJbmV0QWRkcmVzcy5nZXRM\nb2NhbEhvc3QoKTsKICAgICAgICAgICAgU3RyaW5nIGxvY2FsaG9zdE5hbWUg\nPSBsb2NhbGhvc3QuZ2V0SG9zdE5hbWUoKTsKCiAgICAgICAgICAgIGZvciAo\naW50IGkgPSAwOyBpIDwgdG9rcy5sZW5ndGg7IGkrKykgewogICAgICAgICAg\nICAgICAgU3RyaW5nIGhvc3QgPSB0b2tzW2ldOwogICAgICAgICAgICAgICAg\nU3RyaW5nIGhvc3RuYW1lOwogICAgICAgICAgICAgICAgaW50IHRtcFBvcnQ7\nCiAgICAgICAgICAgICAgICBpbnQgY29sb24gPSBob3N0LmluZGV4T2YoJzon\nKTsKICAgICAgICAgICAgICAgIGlmIChjb2xvbiAhPSAtMSkgewogICAgICAg\nICAgICAgICAgICAgIGhvc3RuYW1lID0gaG9zdC5zdWJzdHJpbmcoMCwgY29s\nb24pOwogICAgICAgICAgICAgICAgICAgIHRtcFBvcnQgPSBJbnRlZ2VyLnBh\ncnNlSW50KGhvc3Quc3Vic3RyaW5nKGNvbG9uICsgMSkpOwogICAgICAgICAg\nICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBob3N0bmFtZSA9\nIGhvc3Q7CiAgICAgICAgICAgICAgICAgICAgdG1wUG9ydCA9IERFRkFVTFRf\nUE9SVDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIEluZXRB\nZGRyZXNzIHRtcEFkZHJlc3MgPSAoSW5ldEFkZHJlc3MpIEFjY2Vzc0NvbnRy\nb2xsZXIKICAgICAgICAgICAgICAgICAgICAuZG9Qcml2aWxlZ2VkKEoyRG9Q\ncml2SGVscGVyLmdldEJ5TmFtZUFjdGlvbihob3N0bmFtZSkpOyAKCiAgICAg\nICAgICAgICAgICAvLyBibGVhaXI6IEZvciBlYWNoIGFkZHJlc3Mgd2Ugd291\nbGQgcmF0aGVyIG1ha2UgdXNlIG9mCiAgICAgICAgICAgICAgICAvLyB0aGUg\namRrMS40IGlzTGlua0xvY2FsQWRkcmVzcyAoKSB8fCBpc0xvb3BiYWNrQWRk\ncmVzcyAoKS4KICAgICAgICAgICAgICAgIC8vIChUaG91Z2ggaW4gcHJhY3Rp\nY2Ugb24gd2luMzIgdGhleSBkb24ndCB3b3JrIGFueXdheXMhKQogICAgICAg\nICAgICAgICAgLy8gSW5zdGVhZCB3ZSB3aWxsIGNoZWNrIGhvc3RuYW1lLiBO\nb3QgcGVyZmVjdCwgYnV0CiAgICAgICAgICAgICAgICAvLyBpdCB3aWxsIG1h\ndGNoIG9mdGVuIGVub3VnaCAocGVvcGxlIHdpbGwgdHlwaWNhbGx5CiAgICAg\nICAgICAgICAgICAvLyB1c2UgdGhlIEROUyBtYWNoaW5lIG5hbWVzIGFuZCBi\nZSBjdXR0aW5nL3Bhc3RpbmcuKQogICAgICAgICAgICAgICAgaWYgKGxvY2Fs\naG9zdE5hbWUuZXF1YWxzKGhvc3RuYW1lKSkgewogICAgICAgICAgICAgICAg\nICAgIC8vIFRoaXMgc3RyaW5nIG1hdGNoZXMgdGhlIGhvc3RuYW1lIGZvciBm\nb3Igb3Vyc2VsdmVzLCB3ZQogICAgICAgICAgICAgICAgICAgIC8vIGRvbid0\nIGFjdHVhbGx5IG5lZWQgdG8gc2VuZCBvdXJzZWx2ZXMgbWVzc2FnZXMuCiAg\nICAgICAgICAgICAgICAgICAgaWYgKGxvZy5pc1RyYWNlRW5hYmxlZCgpKSB7\nCiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy50cmFjZShzX2xvYy5nZXQo\nInRjcC1hZGRyZXNzLWFzc2VsZiIsCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICB0bXBBZGRyZXNzLmdldEhvc3ROYW1lKCkgKyAiOiIgKyB0bXBQb3J0\nKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBl\nbHNlIHsKICAgICAgICAgICAgICAgICAgICBIb3N0QWRkcmVzcyBuZXdBZGRy\nZXNzID0gbmV3IEhvc3RBZGRyZXNzKGhvc3QpOwogICAgICAgICAgICAgICAg\nICAgIF9hZGRyZXNzZXMuYWRkKG5ld0FkZHJlc3MpOwogICAgICAgICAgICAg\nICAgICAgIGlmIChsb2cuaXNUcmFjZUVuYWJsZWQoKSkgewogICAgICAgICAg\nICAgICAgICAgICAgICBsb2cudHJhY2Uoc19sb2MuZ2V0KCJ0Y3AtYWRkcmVz\ncy1zZXQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3QWRkcmVz\ncy5fYWRkcmVzcy5nZXRIb3N0TmFtZSgpICsgIjoiCiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgKyBuZXdBZGRyZXNzLl9wb3J0KSk7CiAgICAg\nICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAg\nICB9CiAgICAgICAgfSBjYXRjaCAoUHJpdmlsZWdlZEFjdGlvbkV4Y2VwdGlv\nbiBwYWUpIHsKICAgICAgICAgICAgdGhyb3cgKFVua25vd25Ib3N0RXhjZXB0\naW9uKSBwYWUuZ2V0RXhjZXB0aW9uKCk7CiAgICAgICAgfSBmaW5hbGx5IHsK\nICAgICAgICAgICAgX2FkZHJlc3Nlc0xvY2sudW5sb2NrKCk7CiAgICAgICAg\nfQogICAgfQoKICAgIC8vIC0tLS0tLS0tLS0gQ29uZmlndXJhYmxlIGltcGxl\nbWVudGF0aW9uIC0tLS0tLS0tLS0KCiAgICAvKioKICAgICAqIFN1YmNsYXNz\nZXMgdGhhdCBuZWVkIHRvIHBlcmZvcm0gYWN0aW9ucyBpbgogICAgICoge0Bs\naW5rIENvbmZpZ3VyYWJsZSNlbmRDb25maWd1cmF0aW9ufSBtdXN0IGludm9r\nZSB0aGlzIG1ldGhvZC4KICAgICAqLwogICAgcHVibGljIHZvaWQgZW5kQ29u\nZmlndXJhdGlvbigpIHsKICAgICAgICBzdXBlci5lbmRDb25maWd1cmF0aW9u\nKCk7CiAgICAgICAgc3luY2hyb25pemVkIChzX3BvcnRMaXN0ZW5lck1hcCkg\newogICAgICAgICAgICAvLyBzZWUgaWYgYSBsaXN0ZW5lciBleGlzdHMgZm9y\nIHRoaXMgcG9ydC4KICAgICAgICAgICAgX2xpc3RlbmVyID0gKFRDUFBvcnRM\naXN0ZW5lcikgc19wb3J0TGlzdGVuZXJNYXAuZ2V0CiAgICAgICAgICAgICAg\nICAoU3RyaW5nLnZhbHVlT2YoX3BvcnQpKTsKCiAgICAgICAgICAgIGlmIChf\nbGlzdGVuZXIgPT0gbnVsbCB8fAogICAgICAgICAgICAgICAgKCFfbGlzdGVu\nZXIuaXNSdW5uaW5nKCkgJiYgX2xpc3RlbmVyLl9wb3J0ID09IF9wb3J0KSkg\newogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBf\nbGlzdGVuZXIgPSBuZXcgVENQUG9ydExpc3RlbmVyKF9wb3J0LCBsb2cpOwog\nICAgICAgICAgICAgICAgICAgIF9saXN0ZW5lci5saXN0ZW4oKTsKICAgICAg\nICAgICAgICAgICAgICBzX3BvcnRMaXN0ZW5lck1hcC5wdXQoU3RyaW5nLnZh\nbHVlT2YoX3BvcnQpLCBfbGlzdGVuZXIpOwogICAgICAgICAgICAgICAgfSBj\nYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgICAgICB0aHJv\ndyBuZXcgR2VuZXJhbEV4Y2VwdGlvbihzX2xvYy5nZXQoInRjcC1pbml0LWV4\nY2VwdGlvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZy52YWx1\nZU9mKF9wb3J0KSksIGUpLnNldEZhdGFsKHRydWUpOwogICAgICAgICAgICAg\nICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKF9saXN0ZW5lci5pc1J1bm5p\nbmcoKSkgewogICAgICAgICAgICAgICAgaWYgKF9saXN0ZW5lci5fcG9ydCAh\nPSBfcG9ydCkgewogICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgcmVhbGx5\nIHNob3VsZG4ndCBiZSBhYmxlIHRvIGhhcHBlbi4KICAgICAgICAgICAgICAg\nICAgICB0aHJvdyBuZXcgR2VuZXJhbEV4Y2VwdGlvbihzX2xvYy5nZXQKICAg\nICAgICAgICAgICAgICAgICAgICAgKCJ0Y3Atbm90LWVxdWFsIiwgU3RyaW5n\nLnZhbHVlT2YoX3BvcnQpKSkuCiAgICAgICAgICAgICAgICAgICAgICAgIHNl\ndEZhdGFsKHRydWUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9\nIGVsc2UKICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2Vw\ndGlvbihzX2xvYy5nZXQoInRjcC1saXN0ZW5lci1icm9rZW4iKSk7CiAgICAg\nICAgICAgIF9saXN0ZW5lci5hZGRQcm92aWRlcih0aGlzKTsKICAgICAgICB9\nCgogICAgICAgIF9hZGRyZXNzZXNMb2NrLmxvY2soKTsKICAgICAgICB0cnkg\newogICAgICAgICAgICBIb3N0QWRkcmVzcyBjdXJBZGRyZXNzOwogICAgICAg\nICAgICBmb3IgKEl0ZXJhdG9yIGl0ZXIgPSBfYWRkcmVzc2VzLml0ZXJhdG9y\nKCk7CiAgICAgICAgICAgICAgICBpdGVyLmhhc05leHQoKTspIHsKICAgICAg\nICAgICAgICAgIGN1ckFkZHJlc3MgPSAoSG9zdEFkZHJlc3MpIGl0ZXIubmV4\ndCgpOwogICAgICAgICAgICAgICAgY3VyQWRkcmVzcy5zZXRNYXhBY3RpdmUo\nX21heEFjdGl2ZSk7CiAgICAgICAgICAgICAgICBjdXJBZGRyZXNzLnNldE1h\neElkbGUoX21heElkbGUpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAg\nICAgIGZpbmFsbHkgewogICAgICAgICAgICBfYWRkcmVzc2VzTG9jay51bmxv\nY2soKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gLS0tLS0tLS0tLSBSZW1v\ndGVDb21taXRQcm92aWRlciBpbXBsZW1lbnRhdGlvbiAtLS0tLS0tLS0tCgog\nICAgLy8gcHJlIDMuMy40CT0gPG5vIHZlcnNpb24gbnVtYmVyIHRyYW5zbWl0\ndGVkPgogICAgLy8gMy4zIFByZXZpZXcgCT0gMHgxNDI4YWNmZDsKICAgIC8v\nIDMuNCAJCQk9IDB4MTQyOGFjZmY7CiAgICBwcml2YXRlIHN0YXRpYyBmaW5h\nbCBsb25nIFBST1RPQ09MX1ZFUlNJT04gPSAweDE0MjhhY2ZmOwoKICAgIHB1\nYmxpYyB2b2lkIGJyb2FkY2FzdChSZW1vdGVDb21taXRFdmVudCBldmVudCkg\newogICAgICAgIHRyeSB7CiAgICAgICAgICAgIC8vIGJ1aWxkIGEgcGFja2V0\nIG5vdGlmeWluZyBvdGhlciBKVk1zIG9mIG9iamVjdCBjaGFuZ2VzLgogICAg\nICAgICAgICBCeXRlQXJyYXlPdXRwdXRTdHJlYW0gYmFvcyA9IG5ldyBCeXRl\nQXJyYXlPdXRwdXRTdHJlYW0oKTsKICAgICAgICAgICAgT2JqZWN0T3V0cHV0\nU3RyZWFtIG9vcyA9IG5ldyBPYmplY3RPdXRwdXRTdHJlYW0oYmFvcyk7Cgog\nICAgICAgICAgICBvb3Mud3JpdGVMb25nKFBST1RPQ09MX1ZFUlNJT04pOwog\nICAgICAgICAgICBvb3Mud3JpdGVMb25nKF9pZCk7CiAgICAgICAgICAgIG9v\ncy53cml0ZUludChfcG9ydCk7CiAgICAgICAgICAgIG9vcy53cml0ZU9iamVj\ndChfbG9jYWxob3N0KTsKICAgICAgICAgICAgb29zLndyaXRlT2JqZWN0KGV2\nZW50KTsKICAgICAgICAgICAgb29zLmZsdXNoKCk7CgogICAgICAgICAgICBi\neXRlW10gYnl0ZXMgPSBiYW9zLnRvQnl0ZUFycmF5KCk7CiAgICAgICAgICAg\nIGJhb3MuY2xvc2UoKTsKICAgICAgICAgICAgaWYgKF9icm9hZGNhc3RUaHJl\nYWRzLmlzRW1wdHkoKSkKICAgICAgICAgICAgICAgIHNlbmRVcGRhdGVQYWNr\nZXQoYnl0ZXMpOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBf\nYnJvYWRjYXN0UXVldWUuYWRkUGFja2V0KGJ5dGVzKTsKICAgICAgICB9IGNh\ndGNoIChJT0V4Y2VwdGlvbiBpb2UpIHsKICAgICAgICAgICAgaWYgKGxvZy5p\nc1dhcm5FbmFibGVkKCkpCiAgICAgICAgICAgICAgICBsb2cud2FybihzX2xv\nYy5nZXQoInRjcC1wYXlsb2FkLWNyZWF0ZS1lcnJvciIpLCBpb2UpOwogICAg\nICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFNlbmRzIGEgY2hhbmdlIG5v\ndGlmaWNhdGlvbiBwYWNrZXQgdG8gb3RoZXIgbWFjaGluZXMgaW4gdGhpcwog\nICAgICogcHJvdmlkZXIgY2x1c3Rlci4KICAgICAqLwogICAgcHJpdmF0ZSB2\nb2lkIHNlbmRVcGRhdGVQYWNrZXQoYnl0ZVtdIGJ5dGVzKSB7CiAgICAgICAg\nX2FkZHJlc3Nlc0xvY2subG9jaygpOwogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIGZvciAoSXRlcmF0b3IgaXRlciA9IF9hZGRyZXNzZXMuaXRlcmF0b3Io\nKTsgaXRlci5oYXNOZXh0KCk7KQogICAgICAgICAgICAgICAgKChIb3N0QWRk\ncmVzcykgaXRlci5uZXh0KCkpLnNlbmRVcGRhdGVQYWNrZXQoYnl0ZXMpOwog\nICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIF9hZGRyZXNzZXNMb2Nr\nLnVubG9jaygpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCBj\nbG9zZSgpIHsKICAgICAgICBpZiAoX2xpc3RlbmVyICE9IG51bGwpCiAgICAg\nICAgICAgIF9saXN0ZW5lci5yZW1vdmVQcm92aWRlcih0aGlzKTsKCiAgICAg\nICAgLy8gUmVtb3ZlIEJyb2FkY2FzdCBUaHJlYWRzIHRoZW4gY2xvc2Ugc29j\na2V0cy4KICAgICAgICBfYnJvYWRjYXN0UXVldWUuY2xvc2UoKTsKCiAgICAg\nICAgLy8gV2FpdCBmb3IgX2Jyb2FkY2FzdFRocmVhZHMgdG8gZ2V0IGNsZWFu\nZWQgdXAuCiAgICAgICAgd2hpbGUoIV9icm9hZGNhc3RUaHJlYWRzLmlzRW1w\ndHkoKSkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgVGhy\nZWFkLnNsZWVwKDUwMCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKEludGVycnVw\ndGVkRXhjZXB0aW9uIGllKSB7CiAgICAgICAgICAgICAgICAvLyBJZ25vcmUu\nCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgX2Fk\nZHJlc3Nlc0xvY2subG9jaygpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAg\nIGZvciAoSXRlcmF0b3IgaXRlciA9IF9hZGRyZXNzZXMuaXRlcmF0b3IoKTsg\naXRlci5oYXNOZXh0KCk7KQogICAgICAgICAgICAgICAgKChIb3N0QWRkcmVz\ncykgaXRlci5uZXh0KCkpLmNsb3NlKCk7CiAgICAgICAgfSBmaW5hbGx5IHsK\nICAgICAgICAgICAgX2FkZHJlc3Nlc0xvY2sudW5sb2NrKCk7CiAgICAgICAg\nfQogICAgfQoKICAgIC8qKgogICAgICogVXRpbGl0eSBjbGFzcyB0byBob2xk\nIG1lc3NhZ2VzIHRvIGJlIHNlbnQuIFRoaXMKICAgICAqIGFsbG93cyBjYWxs\ncyB0byBicm9hZGNhc3QgKCkgdG8gcmV0dXJuIHdpdGhvdXQKICAgICAqIHdh\naXRpbmcgZm9yIHRoZSBzZW5kIHRvIGNvbXBsZXRlLgogICAgICovCiAgICBw\ncml2YXRlIHN0YXRpYyBjbGFzcyBCcm9hZGNhc3RRdWV1ZSB7CgogICAgICAg\nIHByaXZhdGUgTGlua2VkTGlzdCBfcGFja2V0UXVldWUgPSBuZXcgTGlua2Vk\nTGlzdCgpOwogICAgICAgIHByaXZhdGUgYm9vbGVhbiBfY2xvc2VkID0gZmFs\nc2U7CgogICAgICAgIHB1YmxpYyBzeW5jaHJvbml6ZWQgdm9pZCBjbG9zZSgp\nIHsKICAgICAgICAgICAgX2Nsb3NlZCA9IHRydWU7CiAgICAgICAgICAgIG5v\ndGlmeUFsbCgpOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHN5bmNocm9u\naXplZCBib29sZWFuIGlzQ2xvc2VkKCkgewogICAgICAgICAgICByZXR1cm4g\nX2Nsb3NlZDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBzeW5jaHJvbml6\nZWQgdm9pZCBhZGRQYWNrZXQoYnl0ZVtdIGJ5dGVzKSB7CiAgICAgICAgICAg\nIF9wYWNrZXRRdWV1ZS5hZGRMYXN0KGJ5dGVzKTsKICAgICAgICAgICAgbm90\naWZ5KCk7CiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiBAcmV0\ndXJuIHRoZSBieXRlcyBkZWZpbmluZyB0aGUgcGFja2V0IHRvIHByb2Nlc3Ms\nIG9yCiAgICAgICAgICogPGNvZGU+bnVsbDwvY29kZT4gaWYgdGhlIHF1ZXVl\nIGlzIGVtcHR5LgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBzeW5jaHJv\nbml6ZWQgYnl0ZVtdIHJlbW92ZVBhY2tldCgpCiAgICAgICAgICAgIHRocm93\ncyBJbnRlcnJ1cHRlZEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIC8vIG9ubHkg\nd2FpdCBpZiB0aGUgcXVldWUgaXMgc3RpbGwgb3Blbi4gVGhpcyBhbGxvd3Mg\ncHJvY2Vzc2luZwogICAgICAgICAgICAvLyBvZiBldmVudHMgaW4gdGhlIHF1\nZXVlIHRvIGNvbnRpbnVlLCB3aGlsZSBhdm9pZGluZyBzbGVlcGluZwogICAg\nICAgICAgICAvLyBkdXJpbmcgc2h1dGRvd24uCiAgICAgICAgICAgIHdoaWxl\nICghX2Nsb3NlZCAmJiBfcGFja2V0UXVldWUuaXNFbXB0eSgpKQogICAgICAg\nICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICBpZiAoX3BhY2tldFF1ZXVl\nLmlzRW1wdHkoKSkKICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAg\nICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICByZXR1cm4gKGJ5dGVbXSkg\nX3BhY2tldFF1ZXVlLnJlbW92ZUZpcnN0KCk7CiAgICAgICAgfQogICAgfQoK\nICAgIC8qKgogICAgICogVGhyZWFkcyB0byBicm9hZGNhc3QgcGFja2V0cyBw\nbGFjZWQgaW4gdGhlIHtAbGluayBCcm9hZGNhc3RRdWV1ZX0uCiAgICAgKi8K\nICAgIHByaXZhdGUgY2xhc3MgQnJvYWRjYXN0V29ya2VyVGhyZWFkCiAgICAg\nICAgZXh0ZW5kcyBUaHJlYWQgewoKICAgICAgICBwcml2YXRlIGJvb2xlYW4g\nX2tlZXBSdW5uaW5nID0gdHJ1ZTsKCiAgICAgICAgcHVibGljIHZvaWQgcnVu\nKCkgewogICAgICAgICAgICB3aGlsZSAoX2tlZXBSdW5uaW5nKSB7CiAgICAg\nICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIC8vIFRoaXMg\nd2lsbCBibG9jayB1bnRpbCB0aGVyZSBpcyBhIHBhY2tldCB0byBzZW5kLCBv\ncgogICAgICAgICAgICAgICAgICAgIC8vIHVudGlsIHRoZSBxdWV1ZSBpcyBj\nbG9zZWQuCiAgICAgICAgICAgICAgICAgICAgYnl0ZVtdIGJ5dGVzID0gX2Jy\nb2FkY2FzdFF1ZXVlLnJlbW92ZVBhY2tldCgpOwogICAgICAgICAgICAgICAg\nICAgIGlmIChieXRlcyAhPSBudWxsKQogICAgICAgICAgICAgICAgICAgICAg\nICBzZW5kVXBkYXRlUGFja2V0KGJ5dGVzKTsKICAgICAgICAgICAgICAgICAg\nICBlbHNlIGlmIChfYnJvYWRjYXN0UXVldWUuaXNDbG9zZWQoKSkKICAgICAg\nICAgICAgICAgICAgICAgICAgX2tlZXBSdW5uaW5nID0gZmFsc2U7CiAgICAg\nICAgICAgICAgICB9IGNhdGNoIChJbnRlcnJ1cHRlZEV4Y2VwdGlvbiBlKSB7\nCiAgICAgICAgICAgICAgICAgICAgLy8gRW5kIHRoZSB0aHJlYWQuCiAgICAg\nICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAg\nICAgICAgIH0KICAgICAgICAgICAgcmVtb3ZlKCk7CiAgICAgICAgfQoKICAg\nICAgICBwdWJsaWMgdm9pZCBzZXRSdW5uaW5nKGJvb2xlYW4ga2VlcFJ1bm5p\nbmcpIHsKICAgICAgICAgICAgX2tlZXBSdW5uaW5nID0ga2VlcFJ1bm5pbmc7\nCiAgICAgICAgfQogICAgICAgIAogICAgICAgIHByaXZhdGUgdm9pZCByZW1v\ndmUoKSB7CiAgICAgICAgICAgIF9icm9hZGNhc3RUaHJlYWRzLnJlbW92ZSh0\naGlzKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXNwb25z\naWJsZSBmb3IgbGlzdGVuaW5nIGZvciBpbmNvbWluZyBwYWNrZXRzIGFuZCBw\ncm9jZXNzaW5nIHRoZW0uCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGljIGNs\nYXNzIFRDUFBvcnRMaXN0ZW5lcgogICAgICAgIGltcGxlbWVudHMgUnVubmFi\nbGUgewoKICAgICAgICBwcml2YXRlIGZpbmFsIExvZyBfbG9nOwogICAgICAg\nIHByaXZhdGUgU2VydmVyU29ja2V0IF9yZWNlaXZlU29ja2V0OwogICAgICAg\nIHByaXZhdGUgVGhyZWFkIF9hY2NlcHRUaHJlYWQ7CiAgICAgICAgcHJpdmF0\nZSBTZXQgX3JlY2VpdmVyVGhyZWFkcyA9IG5ldyBIYXNoU2V0KCk7CiAgICAg\nICAgcHJpdmF0ZSBmaW5hbCBTZXQgX3Byb3ZpZGVycyA9IG5ldyBIYXNoU2V0\nKCk7CgogICAgICAgIC8qKgogICAgICAgICAqIENhY2hlIHRoZSBsb2NhbCBJ\nUCBhZGRyZXNzCiAgICAgICAgICovCiAgICAgICAgcHJpdmF0ZSBieXRlW10g\nX2xvY2FsaG9zdDsKCiAgICAgICAgLyoqCiAgICAgICAgICogVGhlIHBvcnQg\ndGhhdCB0aGlzIGxpc3RlbmVyIHNob3VsZCBsaXN0ZW4gb24uIENvbmZpZ3Vy\nZWQKICAgICAgICAgKiBieSBUQ1BSZW1vdGVDb21taXRQcm92aWRlci4KICAg\nICAgICAgKi8KICAgICAgICBwcml2YXRlIGludCBfcG9ydDsKCiAgICAgICAg\nLyoqCiAgICAgICAgICogU2hvdWxkIGJlIHNldCB0byA8Y29kZT50cnVlPC9j\nb2RlPiBvbmNlIHRoZSBsaXN0ZW5lciBpcyBsaXN0ZW5pbmcuCiAgICAgICAg\nICovCiAgICAgICAgcHJpdmF0ZSBib29sZWFuIF9pc1J1bm5pbmcgPSBmYWxz\nZTsKCiAgICAgICAgLyoqCiAgICAgICAgICogQ29uc3RydWN0IGEgbmV3IFRD\nUFBvcnRMaXN0ZW5lciBjb25maWd1cmVkIHRvIHVzZSB0aGUgc3BlY2lmaWVk\nIHBvcnQuCiAgICAgICAgICovCiAgICAgICAgcHJpdmF0ZSBUQ1BQb3J0TGlz\ndGVuZXIoaW50IHBvcnQsIExvZyBsb2cpCiAgICAgICAgICAgIHRocm93cyBJ\nT0V4Y2VwdGlvbiB7CiAgICAgICAgICAgIF9wb3J0ID0gcG9ydDsKICAgICAg\nICAgICAgX2xvZyA9IGxvZzsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgICAgIF9yZWNlaXZlU29ja2V0ID0gKFNlcnZlclNvY2tldCkgQWNjZXNz\nQ29udHJvbGxlcgogICAgICAgICAgICAgICAgICAgIC5kb1ByaXZpbGVnZWQo\nSjJEb1ByaXZIZWxwZXIubmV3U2VydmVyU29ja2V0QWN0aW9uKF9wb3J0KSk7\nCiAgICAgICAgICAgIH0gY2F0Y2ggKFByaXZpbGVnZWRBY3Rpb25FeGNlcHRp\nb24gcGFlKSB7CiAgICAgICAgICAgICAgICB0aHJvdyAoSU9FeGNlcHRpb24p\nIHBhZS5nZXRFeGNlcHRpb24oKTsKICAgICAgICAgICAgfQogICAgICAgICAg\nICBfbG9jYWxob3N0ID0gSW5ldEFkZHJlc3MuZ2V0TG9jYWxIb3N0KCkuZ2V0\nQWRkcmVzcygpOwoKICAgICAgICAgICAgaWYgKF9sb2cuaXNUcmFjZUVuYWJs\nZWQoKSkKICAgICAgICAgICAgICAgIF9sb2cuaW5mbyhzX2xvYy5nZXQoInRj\ncC1zdGFydC1saXN0ZW5lciIsCiAgICAgICAgICAgICAgICAgICAgU3RyaW5n\nLnZhbHVlT2YoX3BvcnQpKSk7CiAgICAgICAgfQoKICAgICAgICBwcml2YXRl\nIHZvaWQgbGlzdGVuKCkgewogICAgICAgICAgICBfYWNjZXB0VGhyZWFkID0g\nbmV3IFRocmVhZCh0aGlzKTsKICAgICAgICAgICAgX2FjY2VwdFRocmVhZC5z\nZXREYWVtb24odHJ1ZSk7CiAgICAgICAgICAgIF9hY2NlcHRUaHJlYWQuc3Rh\ncnQoKTsKICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIEFsbCBw\ncm92aWRlcnMgYWRkZWQgaGVyZSB3aWxsIGJlIG5vdGlmaWVkIG9mIGFueSBp\nbmNvbWluZwogICAgICAgICAqIHByb3ZpZGVyIG1lc3NhZ2VzLiBUaGVyZSB3\naWxsIGJlIG9uZSBvZiB0aGVzZSBwZXIKICAgICAgICAgKiBCcm9rZXJGYWN0\nb3J5IGluIGEgZ2l2ZW4gSlZNLgogICAgICAgICAqIHtAbGluayBUQ1BSZW1v\ndGVDb21taXRQcm92aWRlciNlbmRDb25maWd1cmF0aW9ufSBpbnZva2VzCiAg\nICAgICAgICogPGNvZGU+YWRkUHJvdmlkZXI8L2NvZGU+IHdpdGggPGNvZGU+\ndGhpczwvY29kZT4gdXBvbgogICAgICAgICAqIGNvbXBsZXRpb24gb2YgY29u\nZmlndXJhdGlvbi4KICAgICAgICAgKi8KICAgICAgICBwcml2YXRlIHZvaWQg\nYWRkUHJvdmlkZXIoVENQUmVtb3RlQ29tbWl0UHJvdmlkZXIgcHJvdmlkZXIp\nIHsKICAgICAgICAgICAgc3luY2hyb25pemVkIChfcHJvdmlkZXJzKSB7CiAg\nICAgICAgICAgICAgICBfcHJvdmlkZXJzLmFkZChwcm92aWRlcik7CiAgICAg\nICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIFJl\nbW92ZSBhIHByb3ZpZGVyIGZyb20gdGhlIGxpc3Qgb2YgcHJvdmlkZXJzIHRv\nIG5vdGlmeSBvZgogICAgICAgICAqIGNvbW1pdCBldmVudHMuCiAgICAgICAg\nICovCiAgICAgICAgcHJpdmF0ZSBzeW5jaHJvbml6ZWQgdm9pZCByZW1vdmVQ\ncm92aWRlcgogICAgICAgICAgICAoVENQUmVtb3RlQ29tbWl0UHJvdmlkZXIg\ncHJvdmlkZXIpIHsKICAgICAgICAgICAgc3luY2hyb25pemVkIChfcHJvdmlk\nZXJzKSB7CiAgICAgICAgICAgICAgICBfcHJvdmlkZXJzLnJlbW92ZShwcm92\naWRlcik7CgogICAgICAgICAgICAgICAgLy8gaWYgdGhlIHByb3ZpZGVyIGxp\nc3QgaXMgZW1wdHksIHNodXQgZG93biB0aGUgdGhyZWFkLgogICAgICAgICAg\nICAgICAgaWYgKF9wcm92aWRlcnMuc2l6ZSgpID09IDApIHsKICAgICAgICAg\nICAgICAgICAgICBfaXNSdW5uaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgX3JlY2VpdmVT\nb2NrZXQuY2xvc2UoKTsKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChJ\nT0V4Y2VwdGlvbiBpb2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYg\nKF9sb2cuaXNXYXJuRW5hYmxlZCgpKQogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgX2xvZy53YXJuKHNfbG9jLmdldCgidGNwLWNsb3NlLWVycm9yIiks\nIGlvZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAg\nICAgIF9hY2NlcHRUaHJlYWQuaW50ZXJydXB0KCk7CiAgICAgICAgICAgICAg\nICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHByaXZhdGUg\nYm9vbGVhbiBpc1J1bm5pbmcoKSB7CiAgICAgICAgICAgIHN5bmNocm9uaXpl\nZCAoX3Byb3ZpZGVycykgewogICAgICAgICAgICAgICAgcmV0dXJuIF9pc1J1\nbm5pbmc7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHB1Ymxp\nYyB2b2lkIHJ1bigpIHsKICAgICAgICAgICAgc3luY2hyb25pemVkIChfcHJv\ndmlkZXJzKSB7CiAgICAgICAgICAgICAgICBfaXNSdW5uaW5nID0gdHJ1ZTsK\nICAgICAgICAgICAgfQoKICAgICAgICAgICAgU29ja2V0IHMgPSBudWxsOwog\nICAgICAgICAgICB3aGlsZSAoX2lzUnVubmluZykgewogICAgICAgICAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBzID0gbnVsbDsKICAgICAg\nICAgICAgICAgICAgICAvLyBCbG9jaywgd2FpdGluZyB0byBhY2NlcHQgbmV3\nIGNvbm5lY3Rpb24gZnJvbSBhIHBlZXIKICAgICAgICAgICAgICAgICAgICBz\nID0gKFNvY2tldCkgQWNjZXNzQ29udHJvbGxlci5kb1ByaXZpbGVnZWQoSjJE\nb1ByaXZIZWxwZXIKICAgICAgICAgICAgICAgICAgICAgICAgLmFjY2VwdEFj\ndGlvbihfcmVjZWl2ZVNvY2tldCkpOwogICAgICAgICAgICAgICAgICAgIGlm\nIChfbG9nLmlzVHJhY2VFbmFibGVkKCkpIHsKICAgICAgICAgICAgICAgICAg\nICAgICAgX2xvZy50cmFjZShzX2xvYy5nZXQoInRjcC1yZWNlaXZlZC1jb25u\nZWN0aW9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMuZ2V0SW5l\ndEFkZHJlc3MoKS5nZXRIb3N0QWRkcmVzcygpCiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgKyAiOiIgKyBzLmdldFBvcnQoKSkpOwogICAgICAg\nICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBSZWNlaXZlU29j\na2V0SGFuZGxlciBzaCA9IG5ldyBSZWNlaXZlU29ja2V0SGFuZGxlcihzKTsK\nICAgICAgICAgICAgICAgICAgICBUaHJlYWQgcmVjZWl2ZXJUaHJlYWQgPSBu\nZXcgVGhyZWFkKHNoKTsKICAgICAgICAgICAgICAgICAgICByZWNlaXZlclRo\ncmVhZC5zZXREYWVtb24odHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgcmVj\nZWl2ZXJUaHJlYWQuc3RhcnQoKTsKICAgICAgICAgICAgICAgICAgICBfcmVj\nZWl2ZXJUaHJlYWRzLmFkZChyZWNlaXZlclRocmVhZCk7CiAgICAgICAgICAg\nICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICAgICAg\nICAgIGlmIChlIGluc3RhbmNlb2YgUHJpdmlsZWdlZEFjdGlvbkV4Y2VwdGlv\nbikKICAgICAgICAgICAgICAgICAgICAgICAgZSA9ICgoUHJpdmlsZWdlZEFj\ndGlvbkV4Y2VwdGlvbikgZSkuZ2V0RXhjZXB0aW9uKCk7CiAgICAgICAgICAg\nICAgICAgICAgaWYgKCEoZSBpbnN0YW5jZW9mIFNvY2tldEV4Y2VwdGlvbikg\nfHwgX2lzUnVubmluZykKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9s\nb2cuaXNXYXJuRW5hYmxlZCgpKQogICAgICAgICAgICAgICAgICAgICAgICAg\nICAgX2xvZy53YXJuKHNfbG9jLmdldCgidGNwLWFjY2VwdC1lcnJvciIpLCBl\nKTsKCiAgICAgICAgICAgICAgICAgICAgLy8gTm9taW5hbCBjYXNlIChJbnRl\ncnJ1cHRlZEV4Y2VwdGlvbikgYmVjYXVzZSBjbG9zZSAoKQogICAgICAgICAg\nICAgICAgICAgIC8vIGNhbGxzIF9hY2NlcHRUaHJlYWQuaW50ZXJydXB0ICgp\nOwogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAg\nICAgICAgIGlmIChzICE9IG51bGwpCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICBzLmNsb3NlKCk7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAo\nRXhjZXB0aW9uIGVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChf\nbG9nLmlzV2FybkVuYWJsZWQoKSkKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIF9sb2cud2FybihzX2xvYy5nZXQoInRjcC1jbG9zZS1lcnJvciIpLCBl\nKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAg\nICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIFdlIGFyZSBkb25lIGxpc3Rl\nbmluZy4gSW50ZXJydXB0IGFueSB3b3JrZXIgdGhyZWFkcy4KICAgICAgICAg\nICAgVGhyZWFkIHdvcmtlcjsKICAgICAgICAgICAgZm9yIChJdGVyYXRvciBp\ndGVyID0gX3JlY2VpdmVyVGhyZWFkcy5pdGVyYXRvcigpOwogICAgICAgICAg\nICAgICAgaXRlci5oYXNOZXh0KCk7KSB7CiAgICAgICAgICAgICAgICB3b3Jr\nZXIgPSAoVGhyZWFkKSBpdGVyLm5leHQoKTsKICAgICAgICAgICAgICAgIC8v\nIEZZSSwgdGhlIHdvcmtlciB0aHJlYWRzIGFyZSBibG9ja2VkCiAgICAgICAg\nICAgICAgICAvLyByZWFkaW5nIGZyb20gdGhlIHNvY2tldCdzIElucHV0U3Ry\nZWFtLiBJbnB1dFN0cmVhbXMKICAgICAgICAgICAgICAgIC8vIGFyZW4ndCBp\nbnRlcnJ1cHRhYmxlLCBzbyB0aGlzIGludGVycnVwdCBpc24ndAogICAgICAg\nICAgICAgICAgLy8gcmVhbGx5IGdvaW5nIHRvIGJlIGRlbGl2ZXJlZCB1bnRp\nbCBzb21ldGhpbmcgYnJlYWtzCiAgICAgICAgICAgICAgICAvLyB0aGUgSW5w\ndXRTdHJlYW0uCiAgICAgICAgICAgICAgICB3b3JrZXIuaW50ZXJydXB0KCk7\nCiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3luY2hyb25pemVkIChfcHJv\ndmlkZXJzKSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAg\nICAgICAgIGlmIChfaXNSdW5uaW5nKQogICAgICAgICAgICAgICAgICAgICAg\nICBfcmVjZWl2ZVNvY2tldC5jbG9zZSgpOwogICAgICAgICAgICAgICAgfSBj\nYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAo\nX2xvZy5pc1dhcm5FbmFibGVkKCkpCiAgICAgICAgICAgICAgICAgICAgICAg\nIF9sb2cud2FybihzX2xvYy5nZXQoInRjcC1jbG9zZS1lcnJvciIpLCBlKTsK\nICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF9pc1J1bm5pbmcg\nPSBmYWxzZTsKICAgICAgICAgICAgICAgIGlmIChfbG9nLmlzVHJhY2VFbmFi\nbGVkKCkpCiAgICAgICAgICAgICAgICAgICAgX2xvZy50cmFjZShzX2xvYy5n\nZXQoInRjcC1jbG9zZS1saXN0ZW5lciIsCiAgICAgICAgICAgICAgICAgICAg\nICAgIF9wb3J0ICsgIiIpKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAg\nICAgICAgLyoqCiAgICAgICAgICogVXRpbGl0eSBjbGFzcyB0aGF0IGFjdHMg\nYXMgYSB3b3JrZXIgdGhyZWFkIHRvIHJlY2VpdmUgRXZlbnRzCiAgICAgICAg\nICogZnJvbSBicm9hZGNhc3RlcnMuCiAgICAgICAgICovCiAgICAgICAgcHJp\ndmF0ZSBjbGFzcyBSZWNlaXZlU29ja2V0SGFuZGxlcgogICAgICAgICAgICBp\nbXBsZW1lbnRzIFJ1bm5hYmxlIHsKCiAgICAgICAgICAgIHByaXZhdGUgSW5w\ndXRTdHJlYW0gX2luOwogICAgICAgICAgICBwcml2YXRlIFNvY2tldCBfczsK\nCiAgICAgICAgICAgIHByaXZhdGUgUmVjZWl2ZVNvY2tldEhhbmRsZXIoU29j\na2V0IHMpIHsKICAgICAgICAgICAgICAgIC8vIFdlIGFyZSB0aGUgcmVjZWl2\naW5nIGVuZCBhbmQgd2UgZG9uJ3Qgc2VuZCBhbnkgbWVzc2FnZXMKICAgICAg\nICAgICAgICAgIC8vIGJhY2sgdG8gdGhlIGJyb2FkY2FzdGVyLiBUdXJuIG9m\nZiBOYWdsZSdzIHNvIHRoYXQKICAgICAgICAgICAgICAgIC8vIHdlIHdpbGwg\nc2VuZCBhY2sgcGFja2V0cyB3aXRob3V0IHdhaXRpbmcuCiAgICAgICAgICAg\nICAgICBfcyA9IHM7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAg\nICAgICAgICAgIF9zLnNldFRjcE5vRGVsYXkodHJ1ZSk7CiAgICAgICAgICAg\nICAgICAgICAgX2luID0gbmV3IEJ1ZmZlcmVkSW5wdXRTdHJlYW0ocy5nZXRJ\nbnB1dFN0cmVhbSgpKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKElPRXhj\nZXB0aW9uIGlvZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChfbG9nLmlz\nSW5mb0VuYWJsZWQoKSkKICAgICAgICAgICAgICAgICAgICAgICAgX2xvZy5p\nbmZvKHNfbG9jLmdldCgidGNwLXNvY2tldC1vcHRpb24tZXJyb3IiKSwgaW9l\nKTsKICAgICAgICAgICAgICAgICAgICBfcyA9IG51bGw7CiAgICAgICAgICAg\nICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICAgICAg\nICAgIGlmIChfbG9nLmlzV2FybkVuYWJsZWQoKSkKICAgICAgICAgICAgICAg\nICAgICAgICAgX2xvZy53YXJuKHNfbG9jLmdldCgidGNwLXJlY2VpdmUtZXJy\nb3IiKSwgZSk7CiAgICAgICAgICAgICAgICAgICAgX3MgPSBudWxsOwogICAg\nICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBwdWJs\naWMgdm9pZCBydW4oKSB7CiAgICAgICAgICAgICAgICBpZiAoX3MgPT0gbnVs\nbCkKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAg\nICB3aGlsZSAoX2lzUnVubmluZyAmJiBfcyAhPSBudWxsKSB7CiAgICAgICAg\nICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8g\nVGhpcyB3aWxsIGJsb2NrIG91ciB0aHJlYWQsIHdhaXRpbmcgdG8gcmVhZAog\nICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbmV4dCBFdmVudC1vYmpl\nY3QtbWVzc2FnZS4KICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlKF9p\nbik7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoRU9GRXhjZXB0aW9u\nIGVvZikgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBFT0ZFeGNlcHRp\nb24gcmFpc2VkIHdoZW4gcGVlciBpcyBwcm9wZXJseQogICAgICAgICAgICAg\nICAgICAgICAgICAvLyBjbG9zaW5nIGl0cyBlbmQuCiAgICAgICAgICAgICAg\nICAgICAgICAgIGlmIChfbG9nLmlzVHJhY2VFbmFibGVkKCkpIHsKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIF9sb2cudHJhY2Uoc19sb2MuZ2V0KCJ0\nY3AtY2xvc2Utc29ja2V0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICBfcy5nZXRJbmV0QWRkcmVzcygpLmdldEhvc3RBZGRyZXNzKCkKICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAiOiIgKyBfcy5n\nZXRQb3J0KCkpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAg\nICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9\nIGNhdGNoIChUaHJvd2FibGUgZSkgewogICAgICAgICAgICAgICAgICAgICAg\nICBpZiAoX2xvZy5pc1dhcm5FbmFibGVkKCkpCiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICBfbG9nLndhcm4oc19sb2MuZ2V0KCJ0Y3AtcmVjZWl2ZS1l\ncnJvciIpLCBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAg\nICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAg\nICAgICAgICAgLy8gV2UgYXJlIGRvbmUgcmVjZWl2aW5nIG9uIHRoaXMgc29j\na2V0IGFuZCB0aGlzIHdvcmtlcgogICAgICAgICAgICAgICAgLy8gdGhyZWFk\nIGlzIHRlcm1pbmF0aW5nLgogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgICAgICAgICBfaW4uY2xvc2UoKTsKICAgICAgICAgICAgICAgICAg\nICBpZiAoX3MgIT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICAgICAgX3Mu\nY2xvc2UoKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9u\nIGUpIHsKICAgICAgICAgICAgICAgICAgICBfbG9nLndhcm4oc19sb2MuZ2V0\nKCJ0Y3AtY2xvc2Utc29ja2V0LWVycm9yIiwKICAgICAgICAgICAgICAgICAg\nICAgICAgX3MuZ2V0SW5ldEFkZHJlc3MoKS5nZXRIb3N0QWRkcmVzcygpICsg\nIjoiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIF9zLmdldFBvcnQo\nKSksIGUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAg\nICAgICAgICAvKioKICAgICAgICAgICAgICogUHJvY2VzcyBhbiB7QGxpbmsg\nSW5wdXRTdHJlYW19IGNvbnRhaW5pbmcgb2JqZWN0cyB3cml0dGVuCiAgICAg\nICAgICAgICAqIGJ5IHtAbGluayBUQ1BSZW1vdGVDb21taXRQcm92aWRlciNi\ncm9hZGNhc3QoUmVtb3RlQ29tbWl0RXZlbnQpfS4KICAgICAgICAgICAgICov\nCiAgICAgICAgICAgIHByaXZhdGUgdm9pZCBoYW5kbGUoSW5wdXRTdHJlYW0g\naW4pCiAgICAgICAgICAgICAgICB0aHJvd3MgSU9FeGNlcHRpb24sIENsYXNz\nTm90Rm91bmRFeGNlcHRpb24gewogICAgICAgICAgICAgICAgLy8gVGhpcyB3\naWxsIGJsb2NrIHdhaXRpbmcgZm9yIHRoZSBuZXh0CiAgICAgICAgICAgICAg\nICBPYmplY3RJbnB1dFN0cmVhbSBvaXMgPSAKICAgICAgICAgICAgICAgICAg\nICBuZXcgU2VyaWFsaXphdGlvbi5DbGFzc1Jlc29sdmluZ09iamVjdElucHV0\nU3RyZWFtKGluKTsKCiAgICAgICAgICAgICAgICBsb25nIHByb3RvY29sVmVy\nc2lvbiA9IG9pcy5yZWFkTG9uZygpOwogICAgICAgICAgICAgICAgaWYgKHBy\nb3RvY29sVmVyc2lvbiAhPSBQUk9UT0NPTF9WRVJTSU9OKSB7CiAgICAgICAg\nICAgICAgICAgICAgaWYgKF9sb2cuaXNXYXJuRW5hYmxlZCgpKSB7CiAgICAg\nICAgICAgICAgICAgICAgICAgIF9sb2cud2FybihzX2xvYy5nZXQoInRjcC13\ncm9uZy12ZXJzaW9uLWVycm9yIiwKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIF9zLmdldEluZXRBZGRyZXNzKCkuZ2V0SG9zdEFkZHJlc3MoKSArICI6\nIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgX3MuZ2V0UG9y\ndCgpKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAg\nICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAg\nICAgICAgbG9uZyBzZW5kZXJJZCA9IG9pcy5yZWFkTG9uZygpOwogICAgICAg\nICAgICAgICAgaW50IHNlbmRlclBvcnQgPSBvaXMucmVhZEludCgpOwogICAg\nICAgICAgICAgICAgYnl0ZVtdIHNlbmRlckFkZHJlc3MgPSAoYnl0ZVtdKSBv\naXMucmVhZE9iamVjdCgpOwogICAgICAgICAgICAgICAgUmVtb3RlQ29tbWl0\nRXZlbnQgcmNlID0gKFJlbW90ZUNvbW1pdEV2ZW50KSBvaXMucmVhZE9iamVj\ndCgpOwogICAgICAgICAgICAgICAgaWYgKF9sb2cuaXNUcmFjZUVuYWJsZWQo\nKSkgewogICAgICAgICAgICAgICAgICAgIF9sb2cudHJhY2Uoc19sb2MuZ2V0\nKCJ0Y3AtcmVjZWl2ZWQtZXZlbnQiLAogICAgICAgICAgICAgICAgICAgICAg\nICBfcy5nZXRJbmV0QWRkcmVzcygpLmdldEhvc3RBZGRyZXNzKCkgKyAiOiIK\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgX3MuZ2V0UG9ydCgpKSk7\nCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgYm9vbGVhbiBm\ncm9tU2VsZiA9IHNlbmRlclBvcnQgPT0gX3BvcnQgJiYKICAgICAgICAgICAg\nICAgICAgICBBcnJheXMuZXF1YWxzKHNlbmRlckFkZHJlc3MsIF9sb2NhbGhv\nc3QpOwogICAgICAgICAgICAgICAgVENQUmVtb3RlQ29tbWl0UHJvdmlkZXIg\ncHJvdmlkZXI7CiAgICAgICAgICAgICAgICBzeW5jaHJvbml6ZWQgKF9wcm92\naWRlcnMpIHsKICAgICAgICAgICAgICAgICAgICAvLyBibGVhaXI6IFdlJ3Jl\nIGl0ZXJhdGluZywgYnV0IGN1cnJlbmx0eSB0aGVyZSBjYW4gcmVhbGx5CiAg\nICAgICAgICAgICAgICAgICAgLy8gb25seSBiZSBhIHNpbmdsZSBwcm92aWRl\nci4KICAgICAgICAgICAgICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ZXIgPSBf\ncHJvdmlkZXJzLml0ZXJhdG9yKCk7CiAgICAgICAgICAgICAgICAgICAgICAg\nIGl0ZXIuaGFzTmV4dCgpOykgewogICAgICAgICAgICAgICAgICAgICAgICBw\ncm92aWRlciA9IChUQ1BSZW1vdGVDb21taXRQcm92aWRlcikgaXRlci5uZXh0\nKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZW5kZXJJZCAhPSBw\ncm92aWRlci5faWQgfHwgIWZyb21TZWxmKQogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgcHJvdmlkZXIuZXZlbnRNYW5hZ2VyLmZpcmVFdmVudChyY2Up\nOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAg\nICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFV0\naWxpdHkgY2xhc3MgdG8gc3RvcmUgYW4gSW5ldEFkZHJlc3MgYW5kIGFuIGlu\ndC4gTm90IHVzaW5nCiAgICAgKiBJbmV0U29ja2V0QWRkcmVzcyBiZWNhdXNl\nIGl0J3MgYSBKREsxLjQgQVBJLiBUaGlzIGFsc28KICAgICAqIHByb3ZpZGVz\nIGEgd3JhcHBlciBhcm91bmQgdGhlIHNvY2tldChzKSBhc3NvY2lhdGVkIHdp\ndGggdGhpcyBhZGRyZXNzLgogICAgICovCiAgICBwcml2YXRlIGNsYXNzIEhv\nc3RBZGRyZXNzIHsKCiAgICAgICAgcHJpdmF0ZSBJbmV0QWRkcmVzcyBfYWRk\ncmVzczsKICAgICAgICBwcml2YXRlIGludCBfcG9ydDsKICAgICAgICBwcml2\nYXRlIGxvbmcgX3RpbWVMYXN0RXJyb3I7IC8vIG1pbGxpcwogICAgICAgIHBy\naXZhdGUgYm9vbGVhbiBfaXNBdmFpbGFibGU7IC8vIGlzIHBlZXIgdGhvdWdo\ndCB0byBiZSB1cAogICAgICAgIHByaXZhdGUgaW50IF9pbmZvc0lzc3VlZCA9\nIDA7IC8vIGxpbWl0IGxvZyBlbnRyaWVzCgogICAgICAgIHByaXZhdGUgR2Vu\nZXJpY09iamVjdFBvb2wgX3NvY2tldFBvb2w7IC8vIHJldXNhYmxlIG9wZW4g\nc29ja2V0cwoKICAgICAgICAvKioKICAgICAgICAgKiBDb25zdHJ1Y3QgYSBu\nZXcgaG9zdCBhZGRyZXNzIGZyb20gYSBzdHJpbmcgb2YgdGhlIGZvcm0KICAg\nICAgICAgKiAiaG9zdDpwb3J0IiBvciBvZiB0aGUgZm9ybSAiaG9zdCIuCiAg\nICAgICAgICovCiAgICAgICAgcHJpdmF0ZSBIb3N0QWRkcmVzcyhTdHJpbmcg\naG9zdCkKICAgICAgICAgICAgdGhyb3dzIFVua25vd25Ib3N0RXhjZXB0aW9u\nIHsKICAgICAgICAgICAgaW50IGNvbG9uID0gaG9zdC5pbmRleE9mKCc6Jyk7\nCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBpZiAoY29sb24g\nIT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICBfYWRkcmVzcyA9IChJbmV0\nQWRkcmVzcykgQWNjZXNzQ29udHJvbGxlcgogICAgICAgICAgICAgICAgICAg\nICAgICAuZG9Qcml2aWxlZ2VkKEoyRG9Qcml2SGVscGVyLmdldEJ5TmFtZUFj\ndGlvbihob3N0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3Vic3Ry\naW5nKDAsIGNvbG9uKSkpOwogICAgICAgICAgICAgICAgICAgIF9wb3J0ID0g\nSW50ZWdlci5wYXJzZUludChob3N0LnN1YnN0cmluZyhjb2xvbiArIDEpKTsK\nICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAg\nX2FkZHJlc3MgPSAoSW5ldEFkZHJlc3MpIEFjY2Vzc0NvbnRyb2xsZXIKICAg\nICAgICAgICAgICAgICAgICAgICAgLmRvUHJpdmlsZWdlZChKMkRvUHJpdkhl\nbHBlci5nZXRCeU5hbWVBY3Rpb24oaG9zdCkpOwogICAgICAgICAgICAgICAg\nICAgIF9wb3J0ID0gREVGQVVMVF9QT1JUOwogICAgICAgICAgICAgICAgfQog\nICAgICAgICAgICB9IGNhdGNoIChQcml2aWxlZ2VkQWN0aW9uRXhjZXB0aW9u\nIHBhZSkgewogICAgICAgICAgICAgICAgdGhyb3cgKFVua25vd25Ib3N0RXhj\nZXB0aW9uKSBwYWUuZ2V0RXhjZXB0aW9uKCk7CiAgICAgICAgICAgIH0KICAg\nICAgICAgICAgLy8gLTEgbWF4IHdhaXQgPT0gYXMgbG9uZyBhcyBpdCB0YWtl\ncwogICAgICAgICAgICBfc29ja2V0UG9vbCA9IG5ldyBHZW5lcmljT2JqZWN0\nUG9vbAogICAgICAgICAgICAgICAgKG5ldyBTb2NrZXRQb29sYWJsZU9iamVj\ndEZhY3RvcnkoKSwgX21heEFjdGl2ZSwKICAgICAgICAgICAgICAgICAgICBH\nZW5lcmljT2JqZWN0UG9vbC5XSEVOX0VYSEFVU1RFRF9CTE9DSywgLTEpOwog\nICAgICAgICAgICBfaXNBdmFpbGFibGUgPSB0cnVlOwogICAgICAgIH0KCiAg\nICAgICAgcHJpdmF0ZSB2b2lkIHNldE1heEFjdGl2ZShpbnQgbWF4QWN0aXZl\nKSB7CiAgICAgICAgICAgIF9zb2NrZXRQb29sLnNldE1heEFjdGl2ZShtYXhB\nY3RpdmUpOwogICAgICAgIH0KCiAgICAgICAgcHJpdmF0ZSB2b2lkIHNldE1h\neElkbGUoaW50IG1heElkbGUpIHsKICAgICAgICAgICAgX3NvY2tldFBvb2wu\nc2V0TWF4SWRsZShtYXhJZGxlKTsKICAgICAgICB9CgogICAgICAgIHB1Ymxp\nYyB2b2lkIGNsb3NlKCkgewogICAgICAgICAgICAvLyBDbG9zZSB0aGUgcG9v\nbCBvZiBzb2NrZXRzIHRvIHRoaXMgcGVlci4gVGhpcwogICAgICAgICAgICAv\nLyB3aWxsIGNsb3NlIGFsbCBzb2NrZXRzIGluIHRoZSBwb29sLgogICAgICAg\nICAgICB0cnkgewogICAgICAgICAgICAgICAgX3NvY2tldFBvb2wuY2xvc2Uo\nKTsKICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAg\nICAgICAgICAgIGlmIChsb2cuaXNXYXJuRW5hYmxlZCgpKSB7CiAgICAgICAg\nICAgICAgICAgICAgbG9nLndhcm4oc19sb2MuZ2V0KCJ0Y3AtY2xvc2UtcG9v\nbC1lcnJvciIpLCBlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAg\nfQogICAgICAgIH0KCiAgICAgICAgcHJpdmF0ZSB2b2lkIHNlbmRVcGRhdGVQ\nYWNrZXQoYnl0ZVtdIGJ5dGVzKSB7CiAgICAgICAgICAgIGlmICghX2lzQXZh\naWxhYmxlKSB7CiAgICAgICAgICAgICAgICBsb25nIG5vdyA9IFN5c3RlbS5j\ndXJyZW50VGltZU1pbGxpcygpOwogICAgICAgICAgICAgICAgaWYgKG5vdyAt\nIF90aW1lTGFzdEVycm9yIDwgX3JlY292ZXJ5VGltZU1pbGxpcykKICAgICAg\nICAgICAgICAgICAgICAvLyBOb3QgZW5vdWdoIHRpbWUgaGFzIHBhc3NlZCBz\naW5jZSB0aGUgbGFzdCBlcnJvcgogICAgICAgICAgICAgICAgICAgIHJldHVy\nbjsKICAgICAgICAgICAgfQogICAgICAgICAgICBTb2NrZXQgcyA9IG51bGw7\nCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBzID0gZ2V0U29j\na2V0KCk7CiAgICAgICAgICAgICAgICBPdXRwdXRTdHJlYW0gb3MgPSBzLmdl\ndE91dHB1dFN0cmVhbSgpOwogICAgICAgICAgICAgICAgb3Mud3JpdGUoYnl0\nZXMpOwogICAgICAgICAgICAgICAgb3MuZmx1c2goKTsKCiAgICAgICAgICAg\nICAgICBpZiAobG9nLmlzVHJhY2VFbmFibGVkKCkpIHsKICAgICAgICAgICAg\nICAgICAgICBsb2cudHJhY2Uoc19sb2MuZ2V0KCJ0Y3Atc2VudC11cGRhdGUi\nLAogICAgICAgICAgICAgICAgICAgICAgICBfYWRkcmVzcy5nZXRIb3N0QWRk\ncmVzcygpICsgIjoiICsgX3BvcnQsCiAgICAgICAgICAgICAgICAgICAgICAg\nIFN0cmluZy52YWx1ZU9mKHMuZ2V0TG9jYWxQb3J0KCkpKSk7CiAgICAgICAg\nICAgICAgICB9CiAgICAgICAgICAgICAgICBfaXNBdmFpbGFibGUgPSB0cnVl\nOwogICAgICAgICAgICAgICAgX2luZm9zSXNzdWVkID0gMDsKICAgICAgICAg\nICAgICAgIC8vIFJldHVybiB0aGUgc29ja2V0IHRvIHRoZSBwb29sOyB0aGUg\nc29ja2V0IGlzCiAgICAgICAgICAgICAgICAvLyBzdGlsbCBnb29kLgogICAg\nICAgICAgICAgICAgcmV0dXJuU29ja2V0KHMpOwogICAgICAgICAgICB9IGNh\ndGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICAgICAgLy8gVGhlcmUg\naGFzIGJlZW4gYSBwcm9ibGVtIHNlbmRpbmcgdG8gdGhlIHBlZXIuCiAgICAg\nICAgICAgICAgICAvLyBUaGUgT1Mgc29ja2V0IHRoYXQgd2FzIGJlaW5nIHVz\nZWQgaXMgY2FuIG5vIGxvbmdlcgogICAgICAgICAgICAgICAgLy8gYmUgdXNl\nZC4KICAgICAgICAgICAgICAgIGlmIChzICE9IG51bGwpCiAgICAgICAgICAg\nICAgICAgICAgdGhpcy5jbG9zZVNvY2tldChzKTsKICAgICAgICAgICAgICAg\nIHRoaXMuY2xlYXJBbGxTb2NrZXRzKCk7CgogICAgICAgICAgICAgICAgaWYg\nKF9pc0F2YWlsYWJsZSkgewogICAgICAgICAgICAgICAgICAgIC8vIExvZyBh\nIHdhcm5pbmcsIHRoZSBwZWVyIHdhcyB1cCBhbmQgaGFzIG5vdyBnb25lIGRv\nd24KICAgICAgICAgICAgICAgICAgICBpZiAobG9nLmlzV2FybkVuYWJsZWQo\nKSkgewogICAgICAgICAgICAgICAgICAgICAgICBsb2cud2FybihzX2xvYy5n\nZXQoInRjcC1zZW5kLWVycm9yIiwKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIF9hZGRyZXNzLmdldEhvc3RBZGRyZXNzKCkgKyAiOiIgKyBfcG9ydCks\nIGUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAg\nICBfaXNBdmFpbGFibGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAv\nLyBPbmNlIGVub3VnaCB0aW1lIGhhcyBwYXNzZWQgd2Ugd2lsbCBsb2cgYW5v\ndGhlciB3YXJuaW5nCiAgICAgICAgICAgICAgICAgICAgX3RpbWVMYXN0RXJy\nb3IgPSBTeXN0ZW0uY3VycmVudFRpbWVNaWxsaXMoKTsKICAgICAgICAgICAg\nICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbG9uZyBub3cgPSBT\neXN0ZW0uY3VycmVudFRpbWVNaWxsaXMoKTsKICAgICAgICAgICAgICAgICAg\nICBpZiAobm93IC0gX3RpbWVMYXN0RXJyb3IgPiBfcmVjb3ZlcnlUaW1lTWls\nbGlzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfaW5mb3NJc3N1\nZWQgPCA1KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFbm91\nZ2ggdGltZSBoYXMgcGFzc2VkLCBhbmQgcGVlciBpcyBzdGlsbCBkb3duCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICBfdGltZUxhc3RFcnJvciA9IFN5\nc3RlbS5jdXJyZW50VGltZU1pbGxpcygpOwogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgLy8gV2Ugd2VyZSB0cnlpbmcgdG8gcmVlc3RhYmxpc2ggdGhl\nIGNvbm5lY3Rpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBi\ndXQgd2UgZmFpbGVkIGFnYWluLiBMb2cgYSBtZXNzYWdlLCBidXQKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIC8vIGxvd2VyIHNldmVyaXR5LiBUaGlz\nIGxvZyB3aWxsIG9jY3VyIHBlcmlvZGljYWxseQogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgLy8gZm9yIDUgdGltZXMgdW50aWwgdGhlIHBlZXIgY29t\nZXMgYmFjay4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsb2cu\naXNJbmZvRW5hYmxlZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgbG9nLmluZm8oc19sb2MuZ2V0KCJ0Y3Atc2VuZC1zdGlsbC1lcnJv\nciIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hZGRy\nZXNzLmdldEhvc3RBZGRyZXNzKCkgKyAiOiIKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICsgX3BvcnQpLCBlKTsKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIF9pbmZvc0lzc3VlZCsrOwogICAgICAgICAgICAgICAgICAgICAgICB9\nCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAg\nICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBwcml2YXRlIFNvY2tldCBn\nZXRTb2NrZXQoKQogICAgICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsKICAg\nICAgICAgICAgcmV0dXJuIChTb2NrZXQpIF9zb2NrZXRQb29sLmJvcnJvd09i\namVjdCgpOwogICAgICAgIH0KCiAgICAgICAgcHJpdmF0ZSB2b2lkIHJldHVy\nblNvY2tldChTb2NrZXQgcykKICAgICAgICAgICAgdGhyb3dzIEV4Y2VwdGlv\nbiB7CiAgICAgICAgICAgIF9zb2NrZXRQb29sLnJldHVybk9iamVjdChzKTsK\nICAgICAgICB9CgogICAgICAgIHByaXZhdGUgdm9pZCBjbGVhckFsbFNvY2tl\ndHMoKSB7CiAgICAgICAgICAgIF9zb2NrZXRQb29sLmNsZWFyKCk7CiAgICAg\nICAgfQoKICAgICAgICBwcml2YXRlIHZvaWQgY2xvc2VTb2NrZXQoU29ja2V0\nIHMpIHsKICAgICAgICAgICAgLy8gQWxsIHNvY2tldHMgY29tZSBmcm9tIHRo\nZSBwb29sLgogICAgICAgICAgICAvLyBUaGlzIHNvY2tldCBpcyBubyBsb25n\nZXIgdXNhYmxlLCBzbyBkZWxldGUgaXQgZnJvbSB0aGUKICAgICAgICAgICAg\nLy8gcG9vbC4KICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIF9z\nb2NrZXRQb29sLmludmFsaWRhdGVPYmplY3Qocyk7CiAgICAgICAgICAgIH0g\nY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIH0KICAgICAgICB9\nCgogICAgICAgIC8qKgogICAgICAgICAqIEZhY3RvcnkgZm9yIHBvb2xlZCBz\nb2NrZXRzLgogICAgICAgICAqLwogICAgICAgIHByaXZhdGUgY2xhc3MgU29j\na2V0UG9vbGFibGVPYmplY3RGYWN0b3J5CiAgICAgICAgICAgIGltcGxlbWVu\ndHMgUG9vbGFibGVPYmplY3RGYWN0b3J5IHsKCiAgICAgICAgICAgIHB1Ymxp\nYyBPYmplY3QgbWFrZU9iamVjdCgpCiAgICAgICAgICAgICAgICB0aHJvd3Mg\nSU9FeGNlcHRpb24gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgICAgICAgICBTb2NrZXQgcyA9IChTb2NrZXQpIEFjY2Vzc0NvbnRyb2xs\nZXIKICAgICAgICAgICAgICAgICAgICAgICAgLmRvUHJpdmlsZWdlZChKMkRv\nUHJpdkhlbHBlci5uZXdTb2NrZXRBY3Rpb24oX2FkZHJlc3MsCiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICBfcG9ydCkpOwogICAgICAgICAgICAgICAg\nICAgIGlmIChsb2cuaXNUcmFjZUVuYWJsZWQoKSkgewogICAgICAgICAgICAg\nICAgICAgICAgICBsb2cudHJhY2Uoc19sb2MuZ2V0KCJ0Y3Atb3Blbi1jb25u\nZWN0aW9uIiwgX2FkZHJlc3MKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICsgIjoiICsgX3BvcnQsICIiICsgcy5nZXRMb2NhbFBvcnQoKSkpOwogICAg\nICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4g\nczsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKFByaXZpbGVnZWRBY3Rpb25F\neGNlcHRpb24gcGFlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgKElP\nRXhjZXB0aW9uKSBwYWUuZ2V0RXhjZXB0aW9uKCk7CiAgICAgICAgICAgICAg\nICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIGRl\nc3Ryb3lPYmplY3QoT2JqZWN0IG9iaikgewogICAgICAgICAgICAgICAgLy8g\nc2lsZW50Q2xvc2UgKCkuCiAgICAgICAgICAgICAgICB0cnkgewogICAgICAg\nICAgICAgICAgICAgIFNvY2tldCBzID0gKFNvY2tldCkgb2JqOwogICAgICAg\nICAgICAgICAgICAgIGlmIChsb2cuaXNUcmFjZUVuYWJsZWQoKSkKICAgICAg\nICAgICAgICAgICAgICAgICAgbG9nLnRyYWNlKHNfbG9jLmdldCgidGNwLWNs\nb3NlLXNlbmRpbmctc29ja2V0IiwKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIF9hZGRyZXNzICsgIjoiICsgX3BvcnQsICIiICsgcy5nZXRMb2NhbFBv\ncnQoKSkpOwogICAgICAgICAgICAgICAgICAgIHMuY2xvc2UoKTsKICAgICAg\nICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAg\nICAgICAgICAgbG9nLndhcm4oc19sb2MuZ2V0KCJ0Y3AtY2xvc2Utc29ja2V0\nLWVycm9yIiwKICAgICAgICAgICAgICAgICAgICAgICAgX2FkZHJlc3MuZ2V0\nSG9zdEFkZHJlc3MoKSArICI6IiArIF9wb3J0KSwgZSk7CiAgICAgICAgICAg\nICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHB1YmxpYyBib29s\nZWFuIHZhbGlkYXRlT2JqZWN0KE9iamVjdCBvYmopIHsKICAgICAgICAgICAg\nICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBw\ndWJsaWMgdm9pZCBhY3RpdmF0ZU9iamVjdCAoT2JqZWN0IHZhbHVlKQoJCQl7\nCgkJCX0KCgkJCXB1YmxpYyB2b2lkIHBhc3NpdmF0ZU9iamVjdCAoT2JqZWN0\nIHZhbHVlKQoJCQl7CgkJCX0KCQl9Cgl9Cn0K\n","encoding":"base64"}

