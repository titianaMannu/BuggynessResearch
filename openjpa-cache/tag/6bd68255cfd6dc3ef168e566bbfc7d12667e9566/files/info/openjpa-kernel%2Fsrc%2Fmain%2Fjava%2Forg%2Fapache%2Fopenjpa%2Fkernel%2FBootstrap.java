{"sha":"4af5d2a8c8c9e874a7ef8f3d29e892f8c26bec9a","node_id":"MDQ6QmxvYjIwNjM2NDo0YWY1ZDJhOGM4YzllODc0YTdlZjhmM2QyOWU4OTJmOGMyNmJlYzlh","size":6275,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/4af5d2a8c8c9e874a7ef8f3d29e892f8c26bec9a","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsOwoKaW1wb3J0IGph\ndmEubGFuZy5yZWZsZWN0Lkludm9jYXRpb25UYXJnZXRFeGNlcHRpb247Cmlt\ncG9ydCBqYXZhLmxhbmcucmVmbGVjdC5NZXRob2Q7CmltcG9ydCBqYXZhLnNl\nY3VyaXR5LkFjY2Vzc0NvbnRyb2xsZXI7CgppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmNvbmYuQnJva2VyRmFjdG9yeVZhbHVlOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmxpYi5jb25mLkNvbmZpZ3VyYXRpb25Qcm92aWRlcjsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5NYXBDb25maWd1\ncmF0aW9uUHJvdmlkZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGli\nLmNvbmYuUHJvZHVjdERlcml2YXRpb25zOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmxpYi51dGlsLkoyRG9Qcml2SGVscGVyOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmxpYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS51dGlsLkludGVybmFsRXhjZXB0aW9uOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuT3BlbkpQQUV4Y2VwdGlvbjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLlVzZXJFeGNlcHRpb247Cgov\nKioKICogSGVscGVyIG1ldGhvZHMgZm9yIGFjcXVpcmluZyB7QGxpbmsgQnJv\na2VyRmFjdG9yeX0gb2JqZWN0cwogKgogKiBAc2luY2UgMC40LjAuMAogKi8K\ncHVibGljIGNsYXNzIEJvb3RzdHJhcCB7CgogICAgcHJpdmF0ZSBzdGF0aWMg\nZmluYWwgQ2xhc3NbXSBGQUNUT1JZX0FSR1MgPQogICAgICAgIG5ldyBDbGFz\nc1tdeyBDb25maWd1cmF0aW9uUHJvdmlkZXIuY2xhc3MgfTsKCiAgICBwcml2\nYXRlIHN0YXRpYyBMb2NhbGl6ZXIgc19sb2MgPSBMb2NhbGl6ZXIuZm9yUGFj\na2FnZShCb290c3RyYXAuY2xhc3MpOwoKICAgIC8qKgogICAgICogUmV0dXJu\nIGEgbmV3IGZhY3RvcnkgZm9yIHRoZSBkZWZhdWx0IGNvbmZpZ3VyYXRpb24u\nCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgQnJva2VyRmFjdG9yeSBuZXdC\ncm9rZXJGYWN0b3J5KCkgewogICAgICAgIHJldHVybiBCb290c3RyYXAubmV3\nQnJva2VyRmFjdG9yeShudWxsLCBudWxsKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIFJldHVybiBhIG5ldyBmYWN0b3J5IGZvciB0aGUgZ2l2ZW4gY29uZmln\ndXJhdGlvbi4gVGhlIGNsYXNzbG9hZGVyCiAgICAgKiB3aWxsIGJlIHVzZWQg\ndG8gbG9hZCB0aGUgZmFjdG9yeSBjbGFzcy4gSWYgbm8gY2xhc3Nsb2FkZXIg\naXMgZ2l2ZW4sCiAgICAgKiB0aGUgdGhyZWFkJ3MgY29udGV4dCBjbGFzc2xv\nYWRlciBpcyB1c2VkLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIEJyb2tl\nckZhY3RvcnkgbmV3QnJva2VyRmFjdG9yeShDb25maWd1cmF0aW9uUHJvdmlk\nZXIgY29uZiwKICAgICAgICBDbGFzc0xvYWRlciBsb2FkZXIpIHsKICAgICAg\nICB0cnkgewogICAgICAgICAgICByZXR1cm4gaW52b2tlRmFjdG9yeShjb25m\nLCBsb2FkZXIsICJuZXdJbnN0YW5jZSIpOwogICAgICAgIH0gY2F0Y2ggKElu\ndm9jYXRpb25UYXJnZXRFeGNlcHRpb24gaXRlKSB7CiAgICAgICAgICAgIFRo\ncm93YWJsZSBjYXVzZSA9IGl0ZS5nZXRUYXJnZXRFeGNlcHRpb24oKTsKICAg\nICAgICAgICAgaWYgKGNhdXNlIGluc3RhbmNlb2YgT3BlbkpQQUV4Y2VwdGlv\nbikKICAgICAgICAgICAgICAgIHRocm93IChPcGVuSlBBRXhjZXB0aW9uKSBj\nYXVzZTsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0aW9u\nKHNfbG9jLmdldCgibmV3LWJyb2tlcmZhY3RvcnktZXhjZXAiLAogICAgICAg\nICAgICAgICAgZ2V0RmFjdG9yeUNsYXNzTmFtZShjb25mLCBsb2FkZXIpKSwg\nY2F1c2UpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAg\nICAgICAgIHRocm93IG5ldyBVc2VyRXhjZXB0aW9uKHNfbG9jLmdldCgiYmFk\nLW5ldy1icm9rZXJmYWN0b3J5IiwKICAgICAgICAgICAgICAgIGdldEZhY3Rv\ncnlDbGFzc05hbWUoY29uZiwgbG9hZGVyKSksIGUpLnNldEZhdGFsKHRydWUp\nOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiBhIHBv\nb2xlZCBmYWN0b3J5IGZvciB0aGUgZGVmYXVsdCBjb25maWd1cmF0aW9uLgog\nICAgICovCiAgICBwdWJsaWMgc3RhdGljIEJyb2tlckZhY3RvcnkgZ2V0QnJv\na2VyRmFjdG9yeSgpIHsKICAgICAgICByZXR1cm4gQm9vdHN0cmFwLmdldEJy\nb2tlckZhY3RvcnkobnVsbCwgbnVsbCk7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBSZXR1cm4gYSBwb29sZWQgZmFjdG9yeSBmb3IgdGhlIGdpdmVuIGNvbmZp\nZ3VyYXRpb24uIFRoZSBjbGFzc2xvYWRlcgogICAgICogd2lsbCBiZSB1c2Vk\nIHRvIGxvYWQgdGhlIGZhY3RvcnkgY2xhc3MuIElmIG5vIGNsYXNzbG9hZGVy\nIGlzIGdpdmVuLAogICAgICogdGhlIHRocmVhZCdzIGNvbnRleHQgY2xhc3Ns\nb2FkZXIgaXMgdXNlZC4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBCcm9r\nZXJGYWN0b3J5IGdldEJyb2tlckZhY3RvcnkoQ29uZmlndXJhdGlvblByb3Zp\nZGVyIGNvbmYsCiAgICAgICAgQ2xhc3NMb2FkZXIgbG9hZGVyKSB7CiAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIGludm9rZUZhY3RvcnkoY29u\nZiwgbG9hZGVyLCAiZ2V0SW5zdGFuY2UiKTsKICAgICAgICB9IGNhdGNoIChJ\nbnZvY2F0aW9uVGFyZ2V0RXhjZXB0aW9uIGl0ZSkgewogICAgICAgICAgICBU\naHJvd2FibGUgY2F1c2UgPSBpdGUuZ2V0VGFyZ2V0RXhjZXB0aW9uKCk7CiAg\nICAgICAgICAgIGlmIChjYXVzZSBpbnN0YW5jZW9mIE9wZW5KUEFFeGNlcHRp\nb24pCiAgICAgICAgICAgICAgICB0aHJvdyAoT3BlbkpQQUV4Y2VwdGlvbikg\nY2F1c2U7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5hbEV4Y2VwdGlv\nbihzX2xvYy5nZXQoImJyb2tlcmZhY3RvcnktZXhjZXAiLAogICAgICAgICAg\nICAgICAgZ2V0RmFjdG9yeUNsYXNzTmFtZShjb25mLCBsb2FkZXIpKSwgY2F1\nc2UpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAg\nICAgIHRocm93IG5ldyBVc2VyRXhjZXB0aW9uKHNfbG9jLmdldCgiYmFkLWJy\nb2tlcmZhY3RvcnkiLAogICAgICAgICAgICAgICAgZ2V0RmFjdG9yeUNsYXNz\nTmFtZShjb25mLCBsb2FkZXIpKSwgZSkuc2V0RmF0YWwodHJ1ZSk7CiAgICAg\nICAgfQogICAgfQoKICAgIHByaXZhdGUgc3RhdGljIEJyb2tlckZhY3Rvcnkg\naW52b2tlRmFjdG9yeShDb25maWd1cmF0aW9uUHJvdmlkZXIgY29uZiwKICAg\nICAgICBDbGFzc0xvYWRlciBsb2FkZXIsIFN0cmluZyBtZXRob2ROYW1lKQog\nICAgICAgIHRocm93cyBJbnZvY2F0aW9uVGFyZ2V0RXhjZXB0aW9uLCBOb1N1\nY2hNZXRob2RFeGNlcHRpb24sCiAgICAgICAgICAgIElsbGVnYWxBY2Nlc3NF\neGNlcHRpb24gewogICAgICAgIGlmIChjb25mID09IG51bGwpCiAgICAgICAg\nICAgIGNvbmYgPSBuZXcgTWFwQ29uZmlndXJhdGlvblByb3ZpZGVyKCk7CiAg\nICAgICAgUHJvZHVjdERlcml2YXRpb25zLmJlZm9yZUNvbmZpZ3VyYXRpb25D\nb25zdHJ1Y3QoY29uZik7CgogICAgICAgIENsYXNzIGNscyA9IGdldEZhY3Rv\ncnlDbGFzcyhjb25mLCBsb2FkZXIpOwogICAgICAgIE1ldGhvZCBtZXRoOwog\nICAgICAgIHRyeSB7CiAgICAgICAgICAgIG1ldGggPSBjbHMuZ2V0TWV0aG9k\nKG1ldGhvZE5hbWUsIEZBQ1RPUllfQVJHUyk7IAogICAgICAgIH0gY2F0Y2gg\nKE5vU3VjaE1ldGhvZEV4Y2VwdGlvbiBuc21lKSB7CiAgICAgICAgICAgIC8v\nIGhhbmRsZSBjYXNlcyB3aGVyZSB0aGVyZSBpcyBhIG1pc21hdGNoIGJldHdl\nZW4gbG9hZGVycyBieSBmYWxsaW5nCiAgICAgICAgICAgIC8vIGJhY2sgdG8g\ndGhlIGNvbmZpZ3VyYXRpb24ncyBjbGFzcyBsb2FkZXIgZm9yIGJyb2tlciBy\nZXNvbHV0aW9uCiAgICAgICAgICAgIGNscyA9IGdldEZhY3RvcnlDbGFzcyhj\nb25mLAogICAgICAgICAgICAgICAgKENsYXNzTG9hZGVyKSBBY2Nlc3NDb250\ncm9sbGVyLmRvUHJpdmlsZWdlZCgKICAgICAgICAgICAgICAgICAgICBKMkRv\nUHJpdkhlbHBlci5nZXRDbGFzc0xvYWRlckFjdGlvbihjb25mLmdldENsYXNz\nKCkpKSk7IAogICAgICAgICAgICBtZXRoID0gY2xzLmdldE1ldGhvZChtZXRo\nb2ROYW1lLCBGQUNUT1JZX0FSR1MpOyAKICAgICAgICB9CgogICAgICAgIHJl\ndHVybiAoQnJva2VyRmFjdG9yeSkgbWV0aC5pbnZva2UobnVsbCwgbmV3IE9i\namVjdFtdeyBjb25mIH0pOwogICAgfQoKICAgIHByaXZhdGUgc3RhdGljIFN0\ncmluZyBnZXRGYWN0b3J5Q2xhc3NOYW1lKENvbmZpZ3VyYXRpb25Qcm92aWRl\nciBjb25mLAogICAgICAgIENsYXNzTG9hZGVyIGxvYWRlcikgewogICAgICAg\nIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBnZXRGYWN0b3J5Q2xhc3MoY29u\nZiwgbG9hZGVyKS5nZXROYW1lKCk7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0\naW9uIGUpIHsKICAgICAgICAgICAgcmV0dXJuICI8IiArIGUudG9TdHJpbmco\nKSArICI+IjsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBJbnN0\nYW50aWF0ZSB0aGUgZmFjdG9yeSBjbGFzcyBkZXNpZ25hdGVkIGluIHByb3Bl\ncnRpZXMuCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGljIENsYXNzIGdldEZh\nY3RvcnlDbGFzcyhDb25maWd1cmF0aW9uUHJvdmlkZXIgY29uZiwKICAgICAg\nICBDbGFzc0xvYWRlciBsb2FkZXIpIHsKICAgICAgICBpZiAobG9hZGVyID09\nIG51bGwpCiAgICAgICAgICAgIGxvYWRlciA9IChDbGFzc0xvYWRlcikgQWNj\nZXNzQ29udHJvbGxlci5kb1ByaXZpbGVnZWQoCiAgICAgICAgICAgICAgICBK\nMkRvUHJpdkhlbHBlci5nZXRDb250ZXh0Q2xhc3NMb2FkZXJBY3Rpb24oKSk7\nIAoKICAgICAgICBPYmplY3QgY2xzID0gQnJva2VyRmFjdG9yeVZhbHVlLmdl\ndChjb25mKTsKICAgICAgICBpZiAoY2xzIGluc3RhbmNlb2YgQ2xhc3MpCiAg\nICAgICAgICAgIHJldHVybiAoQ2xhc3MpIGNsczsKCiAgICAgICAgQnJva2Vy\nRmFjdG9yeVZhbHVlIHZhbHVlID0gbmV3IEJyb2tlckZhY3RvcnlWYWx1ZSgp\nOwogICAgICAgIHZhbHVlLnNldFN0cmluZygoU3RyaW5nKSBjbHMpOwogICAg\nICAgIFN0cmluZyBjbHNOYW1lID0gdmFsdWUuZ2V0Q2xhc3NOYW1lKCk7CiAg\nICAgICAgaWYgKGNsc05hbWUgPT0gbnVsbCkKICAgICAgICAgICAgdGhyb3cg\nbmV3IFVzZXJFeGNlcHRpb24oc19sb2MuZ2V0KCJuby1icm9rZXJmYWN0b3J5\nIiwgCiAgICAgICAgICAgICAgICBjb25mLmdldFByb3BlcnRpZXMoKSkpLnNl\ndEZhdGFsKHRydWUpOwoKICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1\ncm4gQ2xhc3MuZm9yTmFtZShjbHNOYW1lLCB0cnVlLCBsb2FkZXIpOwogICAg\nICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIHRocm93\nIG5ldyBVc2VyRXhjZXB0aW9uKHNfbG9jLmdldCgiYmFkLWJyb2tlcmZhY3Rv\ncnktY2xhc3MiLAogICAgICAgICAgICAgICAgY2xzTmFtZSksIGUpLnNldEZh\ndGFsKHRydWUpOwoJCX0KCX0KfQo=\n","encoding":"base64"}

