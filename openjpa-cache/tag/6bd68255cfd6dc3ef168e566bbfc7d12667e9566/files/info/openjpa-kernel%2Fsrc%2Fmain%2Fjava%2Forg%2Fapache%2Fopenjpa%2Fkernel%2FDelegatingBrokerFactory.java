{"sha":"bcf88c7338ebaa10cf132e5a1c2a0eaf67dbd710","node_id":"MDQ6QmxvYjIwNjM2NDpiY2Y4OGM3MzM4ZWJhYTEwY2YxMzJlNWExYzJhMGVhZjY3ZGJkNzEw","size":5839,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/bcf88c7338ebaa10cf132e5a1c2a0eaf67dbd710","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsOwoKaW1wb3J0IGph\ndmEudXRpbC5Qcm9wZXJ0aWVzOwoKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5jb25mLk9wZW5KUEFDb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLnV0aWwuUnVudGltZUV4Y2VwdGlvblRyYW5zbGF0b3I7Cgov\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8KLy8gTk9URTogd2hlbiBhZGRpbmcgYSBwdWJs\naWMgQVBJIG1ldGhvZCwgYmUgc3VyZSB0byBhZGQgaXQgdG8gCi8vIEpETyBh\nbmQgSlBBIGZhY2FkZXMhCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKLyoqCiAqIERl\nbGVnYXRpbmcgYnJva2VyIGZhY3RvcnkgdGhhdCBjYW4gYWxzbyBwZXJmb3Jt\nIGV4Y2VwdGlvbiB0cmFuc2xhdGlvbgogKiBmb3IgdXNlIGluIGZhY2FkZXMu\nCiAqCiAqIEBzaW5jZSAwLjQuMAogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKiBA\nbm9qYXZhZG9jCiAqLwpwdWJsaWMgY2xhc3MgRGVsZWdhdGluZ0Jyb2tlckZh\nY3RvcnkKICAgIGltcGxlbWVudHMgQnJva2VyRmFjdG9yeSB7CgogICAgcHJp\ndmF0ZSBmaW5hbCBCcm9rZXJGYWN0b3J5IF9mYWN0b3J5OwogICAgcHJpdmF0\nZSBmaW5hbCBEZWxlZ2F0aW5nQnJva2VyRmFjdG9yeSBfZGVsOwogICAgcHJp\ndmF0ZSBmaW5hbCBSdW50aW1lRXhjZXB0aW9uVHJhbnNsYXRvciBfdHJhbnM7\nCgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3Rvcjsgc3VwcGx5IGRlbGVnYXRl\nLgogICAgICovCiAgICBwdWJsaWMgRGVsZWdhdGluZ0Jyb2tlckZhY3Rvcnko\nQnJva2VyRmFjdG9yeSBmYWN0b3J5KSB7CiAgICAgICAgdGhpcyhmYWN0b3J5\nLCBudWxsKTsKICAgIH0KCiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yOyBz\ndXBwbHkgZGVsZWdhdGUgYW5kIGV4Y2VwdGlvbiB0cmFuc2xhdG9yLgogICAg\nICovCiAgICBwdWJsaWMgRGVsZWdhdGluZ0Jyb2tlckZhY3RvcnkoQnJva2Vy\nRmFjdG9yeSBmYWN0b3J5LAogICAgICAgIFJ1bnRpbWVFeGNlcHRpb25UcmFu\nc2xhdG9yIHRyYW5zKSB7CiAgICAgICAgX2ZhY3RvcnkgPSBmYWN0b3J5Owog\nICAgICAgIGlmIChmYWN0b3J5IGluc3RhbmNlb2YgRGVsZWdhdGluZ0Jyb2tl\nckZhY3RvcnkpCiAgICAgICAgICAgIF9kZWwgPSAoRGVsZWdhdGluZ0Jyb2tl\nckZhY3RvcnkpIGZhY3Rvcnk7CiAgICAgICAgZWxzZQogICAgICAgICAgICBf\nZGVsID0gbnVsbDsKICAgICAgICBfdHJhbnMgPSB0cmFuczsKICAgIH0KCiAg\nICAvKioKICAgICAqIFJldHVybiB0aGUgZGlyZWN0IGRlbGVnYXRlLgogICAg\nICovCiAgICBwdWJsaWMgQnJva2VyRmFjdG9yeSBnZXREZWxlZ2F0ZSgpIHsK\nICAgICAgICByZXR1cm4gX2ZhY3Rvcnk7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBSZXR1cm4gdGhlIG5hdGl2ZSBkZWxlZ2F0ZS4KICAgICAqLwogICAgcHVi\nbGljIEJyb2tlckZhY3RvcnkgZ2V0SW5uZXJtb3N0RGVsZWdhdGUoKSB7CiAg\nICAgICAgcmV0dXJuIChfZGVsID09IG51bGwpID8gX2ZhY3RvcnkgOiBfZGVs\nLmdldElubmVybW9zdERlbGVnYXRlKCk7CiAgICB9CgogICAgcHVibGljIGlu\ndCBoYXNoQ29kZSgpIHsKICAgICAgICByZXR1cm4gZ2V0SW5uZXJtb3N0RGVs\nZWdhdGUoKS5oYXNoQ29kZSgpOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFu\nIGVxdWFscyhPYmplY3Qgb3RoZXIpIHsKICAgICAgICBpZiAob3RoZXIgPT0g\ndGhpcykKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgaWYgKG90\naGVyIGluc3RhbmNlb2YgRGVsZWdhdGluZ0Jyb2tlckZhY3RvcnkpCiAgICAg\nICAgICAgIG90aGVyID0gKChEZWxlZ2F0aW5nQnJva2VyRmFjdG9yeSkgb3Ro\nZXIpLmdldElubmVybW9zdERlbGVnYXRlKCk7CiAgICAgICAgcmV0dXJuIGdl\ndElubmVybW9zdERlbGVnYXRlKCkuZXF1YWxzKG90aGVyKTsKICAgIH0KCiAg\nICAvKioKICAgICAqIFRyYW5zbGF0ZSB0aGUgT3BlbkpQQSBleGNlcHRpb24u\nCiAgICAgKi8KICAgIHByb3RlY3RlZCBSdW50aW1lRXhjZXB0aW9uIHRyYW5z\nbGF0ZShSdW50aW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAgcmV0dXJuIChf\ndHJhbnMgPT0gbnVsbCkgPyByZSA6IF90cmFucy50cmFuc2xhdGUocmUpOwog\nICAgfQoKICAgIHB1YmxpYyBPcGVuSlBBQ29uZmlndXJhdGlvbiBnZXRDb25m\naWd1cmF0aW9uKCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVy\nbiBfZmFjdG9yeS5nZXRDb25maWd1cmF0aW9uKCk7CiAgICAgICAgfSBjYXRj\naCAoUnVudGltZUV4Y2VwdGlvbiByZSkgewogICAgICAgICAgICB0aHJvdyB0\ncmFuc2xhdGUocmUpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgUHJv\ncGVydGllcyBnZXRQcm9wZXJ0aWVzKCkgewogICAgICAgIHRyeSB7CiAgICAg\nICAgICAgIHJldHVybiBfZmFjdG9yeS5nZXRQcm9wZXJ0aWVzKCk7CiAgICAg\nICAgfSBjYXRjaCAoUnVudGltZUV4Y2VwdGlvbiByZSkgewogICAgICAgICAg\nICB0aHJvdyB0cmFuc2xhdGUocmUpOwogICAgICAgIH0KICAgIH0KCiAgICBw\ndWJsaWMgT2JqZWN0IHB1dFVzZXJPYmplY3QoT2JqZWN0IGtleSwgT2JqZWN0\nIHZhbCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBfZmFj\ndG9yeS5wdXRVc2VyT2JqZWN0KGtleSwgdmFsKTsKICAgICAgICB9IGNhdGNo\nIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAgICAgIHRocm93IHRy\nYW5zbGF0ZShyZSk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBPYmpl\nY3QgZ2V0VXNlck9iamVjdChPYmplY3Qga2V5KSB7CiAgICAgICAgdHJ5IHsK\nICAgICAgICAgICAgcmV0dXJuIF9mYWN0b3J5LmdldFVzZXJPYmplY3Qoa2V5\nKTsKICAgICAgICB9IGNhdGNoIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7CiAg\nICAgICAgICAgIHRocm93IHRyYW5zbGF0ZShyZSk7CiAgICAgICAgfQogICAg\nfQoKICAgIHB1YmxpYyBCcm9rZXIgbmV3QnJva2VyKCkgewogICAgICAgIHRy\neSB7CiAgICAgICAgICAgIHJldHVybiBfZmFjdG9yeS5uZXdCcm9rZXIoKTsK\nICAgICAgICB9IGNhdGNoIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7CiAgICAg\nICAgICAgIHRocm93IHRyYW5zbGF0ZShyZSk7CiAgICAgICAgfQogICAgfQoK\nICAgIHB1YmxpYyBCcm9rZXIgbmV3QnJva2VyKFN0cmluZyB1c2VyLCBTdHJp\nbmcgcGFzcywgYm9vbGVhbiBtYW5hZ2VkLAogICAgICAgIGludCBjb25uUmV0\nYWluTW9kZSwgYm9vbGVhbiBmaW5kRXhpc3RpbmcpIHsKICAgICAgICB0cnkg\newogICAgICAgICAgICByZXR1cm4gX2ZhY3RvcnkubmV3QnJva2VyKHVzZXIs\nIHBhc3MsIG1hbmFnZWQsIGNvbm5SZXRhaW5Nb2RlLAogICAgICAgICAgICAg\nICAgZmluZEV4aXN0aW5nKTsKICAgICAgICB9IGNhdGNoIChSdW50aW1lRXhj\nZXB0aW9uIHJlKSB7CiAgICAgICAgICAgIHRocm93IHRyYW5zbGF0ZShyZSk7\nCiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIGFkZExpZmVjeWNs\nZUxpc3RlbmVyKE9iamVjdCBsaXN0ZW5lciwgQ2xhc3NbXSBjbGFzc2VzKSB7\nCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgX2ZhY3RvcnkuYWRkTGlmZWN5\nY2xlTGlzdGVuZXIobGlzdGVuZXIsIGNsYXNzZXMpOwogICAgICAgIH0gY2F0\nY2ggKFJ1bnRpbWVFeGNlcHRpb24gcmUpIHsKICAgICAgICAgICAgdGhyb3cg\ndHJhbnNsYXRlKHJlKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZv\naWQgcmVtb3ZlTGlmZWN5Y2xlTGlzdGVuZXIoT2JqZWN0IGxpc3RlbmVyKSB7\nCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgX2ZhY3RvcnkucmVtb3ZlTGlm\nZWN5Y2xlTGlzdGVuZXIobGlzdGVuZXIpOwogICAgICAgIH0gY2F0Y2ggKFJ1\nbnRpbWVFeGNlcHRpb24gcmUpIHsKICAgICAgICAgICAgdGhyb3cgdHJhbnNs\nYXRlKHJlKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZvaWQgYWRk\nVHJhbnNhY3Rpb25MaXN0ZW5lcihPYmplY3QgbGlzdGVuZXIpIHsKICAgICAg\nICB0cnkgewogICAgICAgICAgICBfZmFjdG9yeS5hZGRUcmFuc2FjdGlvbkxp\nc3RlbmVyKGxpc3RlbmVyKTsKICAgICAgICB9IGNhdGNoIChSdW50aW1lRXhj\nZXB0aW9uIHJlKSB7CiAgICAgICAgICAgIHRocm93IHRyYW5zbGF0ZShyZSk7\nCiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIHJlbW92ZVRyYW5z\nYWN0aW9uTGlzdGVuZXIoT2JqZWN0IGxpc3RlbmVyKSB7CiAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgX2ZhY3RvcnkucmVtb3ZlVHJhbnNhY3Rpb25MaXN0\nZW5lcihsaXN0ZW5lcik7CiAgICAgICAgfSBjYXRjaCAoUnVudGltZUV4Y2Vw\ndGlvbiByZSkgewogICAgICAgICAgICB0aHJvdyB0cmFuc2xhdGUocmUpOwog\nICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjbG9zZSgpIHsKICAg\nICAgICB0cnkgewogICAgICAgICAgICBfZmFjdG9yeS5jbG9zZSgpOwogICAg\nICAgIH0gY2F0Y2ggKFJ1bnRpbWVFeGNlcHRpb24gcmUpIHsKICAgICAgICAg\nICAgdGhyb3cgdHJhbnNsYXRlKHJlKTsKICAgICAgICB9CiAgICB9CgogICAg\ncHVibGljIGJvb2xlYW4gaXNDbG9zZWQoKSB7CiAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgcmV0dXJuIF9mYWN0b3J5LmlzQ2xvc2VkKCk7CiAgICAgICAg\nfSBjYXRjaCAoUnVudGltZUV4Y2VwdGlvbiByZSkgewogICAgICAgICAgICB0\naHJvdyB0cmFuc2xhdGUocmUpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBsb2NrKCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIF9m\nYWN0b3J5LmxvY2soKTsKICAgICAgICB9IGNhdGNoIChSdW50aW1lRXhjZXB0\naW9uIHJlKSB7CiAgICAgICAgICAgIHRocm93IHRyYW5zbGF0ZShyZSk7CiAg\nICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIHVubG9jaygpIHsKICAg\nICAgICB0cnkgewogICAgICAgICAgICBfZmFjdG9yeS51bmxvY2soKTsKICAg\nICAgICB9IGNhdGNoIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAg\nICAgIHRocm93IHRyYW5zbGF0ZShyZSk7CgkJfQoJfQp9Cg==\n","encoding":"base64"}

