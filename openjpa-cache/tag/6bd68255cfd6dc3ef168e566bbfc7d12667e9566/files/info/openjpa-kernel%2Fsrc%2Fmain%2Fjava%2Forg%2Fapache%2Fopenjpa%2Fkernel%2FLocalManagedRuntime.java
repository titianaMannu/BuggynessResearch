{"sha":"ab422de8849817747a624bb20b7c57026b461268","node_id":"MDQ6QmxvYjIwNjM2NDphYjQyMmRlODg0OTgxNzc0N2E2MjRiYjIwYjdjNTcwMjZiNDYxMjY4","size":6689,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/ab422de8849817747a624bb20b7c57026b461268","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsOwoKaW1wb3J0IGph\ndmF4LnRyYW5zYWN0aW9uLk5vdFN1cHBvcnRlZEV4Y2VwdGlvbjsKaW1wb3J0\nIGphdmF4LnRyYW5zYWN0aW9uLlN0YXR1czsKaW1wb3J0IGphdmF4LnRyYW5z\nYWN0aW9uLlN5bmNocm9uaXphdGlvbjsKaW1wb3J0IGphdmF4LnRyYW5zYWN0\naW9uLlN5c3RlbUV4Y2VwdGlvbjsKaW1wb3J0IGphdmF4LnRyYW5zYWN0aW9u\nLlRyYW5zYWN0aW9uOwppbXBvcnQgamF2YXgudHJhbnNhY3Rpb24uVHJhbnNh\nY3Rpb25NYW5hZ2VyOwppbXBvcnQgamF2YXgudHJhbnNhY3Rpb24ueGEuWEFS\nZXNvdXJjZTsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuZWUuQWJzdHJh\nY3RNYW5hZ2VkUnVudGltZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5l\nZS5NYW5hZ2VkUnVudGltZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5s\naWIudXRpbC5Mb2NhbGl6ZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\ndXRpbC5JbnRlcm5hbEV4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS51dGlsLkludmFsaWRTdGF0ZUV4Y2VwdGlvbjsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS51dGlsLlN0b3JlRXhjZXB0aW9uOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLnV0aWwuVXNlckV4Y2VwdGlvbjsKCi8qKgogKiBV\nc2VzIGEgbG9jYWwgaW1wbGVtZW50YXRpb24gb2YgdGhlIHtAbGluayBUcmFu\nc2FjdGlvbk1hbmFnZXJ9IGludGVyZmFjZS4KICogVGhpcyBtYW5hZ2VyIGlz\nIHZhbGlkIG9ubHkgZm9yIGEgc2luZ2xlIHtAbGluayBCcm9rZXJ9LgogKiBJ\ndCBkdXBsaWNhdGVzIG5vbi1tYW5hZ2VkIHRyYW5zYWN0aW9uIGNvbnRyb2wu\nCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqLwpjbGFzcyBMb2NhbE1hbmFn\nZWRSdW50aW1lIGV4dGVuZHMgQWJzdHJhY3RNYW5hZ2VkUnVudGltZQogICAg\naW1wbGVtZW50cyBNYW5hZ2VkUnVudGltZSwgVHJhbnNhY3Rpb25NYW5hZ2Vy\nLCBUcmFuc2FjdGlvbiB7CgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9j\nYWxpemVyIF9sb2MgPSBMb2NhbGl6ZXIuZm9yUGFja2FnZQogICAgICAgIChM\nb2NhbE1hbmFnZWRSdW50aW1lLmNsYXNzKTsKCiAgICBwcml2YXRlIFN5bmNo\ncm9uaXphdGlvbiBfYnJva2VyID0gbnVsbDsKICAgIHByaXZhdGUgU3luY2hy\nb25pemF0aW9uIF9mYWN0b3J5U3luYyA9IG51bGw7CiAgICBwcml2YXRlIGJv\nb2xlYW4gX2FjdGl2ZSA9IGZhbHNlOwogICAgcHJpdmF0ZSBUaHJvd2FibGUg\nX3JvbGxiYWNrT25seSA9IG51bGw7CgogICAgLyoqCiAgICAgKiBDb25zdHJ1\nY3Rvci4gUHJvdmlkZSBicm9rZXIgdGhhdCB3aWxsIGJlIHJlcXVlc3Rpbmcg\nbWFuYWdlZAogICAgICogdHJhbnNhY3Rpb24gaW5mby4KICAgICAqLwogICAg\ncHVibGljIExvY2FsTWFuYWdlZFJ1bnRpbWUoQnJva2VyIGJyb2tlcikgewog\nICAgICAgIF9icm9rZXIgPSBicm9rZXI7CiAgICB9CgogICAgcHVibGljIFRy\nYW5zYWN0aW9uTWFuYWdlciBnZXRUcmFuc2FjdGlvbk1hbmFnZXIoKSB7CiAg\nICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgcHVibGljIHN5bmNocm9u\naXplZCB2b2lkIGJlZ2luKCkgewogICAgICAgIGlmIChfYWN0aXZlKQogICAg\nICAgICAgICB0aHJvdyBuZXcgSW52YWxpZFN0YXRlRXhjZXB0aW9uKF9sb2Mu\nZ2V0KCJhY3RpdmUiKSk7CiAgICAgICAgX2FjdGl2ZSA9IHRydWU7CiAgICB9\nCgogICAgcHVibGljIHN5bmNocm9uaXplZCB2b2lkIGNvbW1pdCgpIHsKICAg\nICAgICBpZiAoIV9hY3RpdmUpCiAgICAgICAgICAgIHRocm93IG5ldyBJbnZh\nbGlkU3RhdGVFeGNlcHRpb24oX2xvYy5nZXQoIm5vdC1hY3RpdmUiKSk7Cgog\nICAgICAgIC8vIHRyeSB0byBpbnZva2UgYmVmb3JlIGNvbXBsZXRpb24gaW4g\ncHJlcGFyYXRpb24gZm9yIGNvbW1pdAogICAgICAgIFJ1bnRpbWVFeGNlcHRp\nb24gZXJyID0gbnVsbDsKICAgICAgICBpZiAoX3JvbGxiYWNrT25seSA9PSBu\ndWxsKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBfYnJv\na2VyLmJlZm9yZUNvbXBsZXRpb24oKTsKICAgICAgICAgICAgICAgIGlmIChf\nZmFjdG9yeVN5bmMgIT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICBfZmFj\ndG9yeVN5bmMuYmVmb3JlQ29tcGxldGlvbigpOwogICAgICAgICAgICB9IGNh\ndGNoIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAgICAgICAgICBf\ncm9sbGJhY2tPbmx5ID0gcmU7CiAgICAgICAgICAgICAgICBlcnIgPSByZTsK\nICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSAvLyBwcmV2aW91c2x5IG1h\ncmtlZCByb2xsYmFjayBvbmx5CiAgICAgICAgICAgIGVyciA9IG5ldyBTdG9y\nZUV4Y2VwdGlvbihfbG9jLmdldCgibWFya2VkLXJvbGxiYWNrIikpLgogICAg\nICAgICAgICAgICAgc2V0Q2F1c2UoX3JvbGxiYWNrT25seSkuc2V0RmF0YWwo\ndHJ1ZSk7CgogICAgICAgIGlmIChfcm9sbGJhY2tPbmx5ID09IG51bGwpIHsK\nICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIF9icm9rZXIuYWZ0\nZXJDb21wbGV0aW9uKFN0YXR1cy5TVEFUVVNfQ09NTUlUVEVEKTsKICAgICAg\nICAgICAgICAgIG5vdGlmeUFmdGVyQ29tcGxldGlvbihTdGF0dXMuU1RBVFVT\nX0NPTU1JVFRFRCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKFJ1bnRpbWVFeGNl\ncHRpb24gcmUpIHsKICAgICAgICAgICAgICAgIGlmIChlcnIgPT0gbnVsbCkK\nICAgICAgICAgICAgICAgICAgICBlcnIgPSByZTsKICAgICAgICAgICAgfQog\nICAgICAgIH0KCiAgICAgICAgLy8gaWYgd2UgaGF2ZW4ndCBtYW5hZ2VkIHRv\nIGNvbW1pdCwgcm9sbGJhY2sKICAgICAgICBpZiAoX2FjdGl2ZSkgewogICAg\nICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcm9sbGJhY2soKTsKICAg\nICAgICAgICAgfSBjYXRjaCAoUnVudGltZUV4Y2VwdGlvbiByZSkgewogICAg\nICAgICAgICAgICAgaWYgKGVyciA9PSBudWxsKQogICAgICAgICAgICAgICAg\nICAgIGVyciA9IHJlOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAg\nICAvLyB0aHJvdyB0aGUgZmlyc3QgZXhjZXB0aW9uIHdlIGVuY291bnRlcmVk\nLCBpZiBhbnkKICAgICAgICBpZiAoZXJyICE9IG51bGwpCiAgICAgICAgICAg\nIHRocm93IGVycjsKICAgIH0KCiAgICBwdWJsaWMgc3luY2hyb25pemVkIHZv\naWQgcm9sbGJhY2soKSB7CiAgICAgICAgaWYgKCFfYWN0aXZlKQogICAgICAg\nICAgICB0aHJvdyBuZXcgSW52YWxpZFN0YXRlRXhjZXB0aW9uKF9sb2MuZ2V0\nKCJub3QtYWN0aXZlIikpOwoKICAgICAgICAvLyByb2xsYmFjayBicm9rZXIK\nICAgICAgICBSdW50aW1lRXhjZXB0aW9uIGVyciA9IG51bGw7CiAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgX2Jyb2tlci5hZnRlckNvbXBsZXRpb24oU3Rh\ndHVzLlNUQVRVU19ST0xMRURCQUNLKTsKICAgICAgICB9IGNhdGNoIChSdW50\naW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAgICAgIGVyciA9IHJlOwogICAg\nICAgIH0KCiAgICAgICAgLy8gcm9sbGJhY2sgc3luY2gsIGV2ZW4gaWYgYnJv\na2VyIHRocm93cyBleGNlcHRpb24KICAgICAgICB0cnkgewogICAgICAgICAg\nICBub3RpZnlBZnRlckNvbXBsZXRpb24oU3RhdHVzLlNUQVRVU19ST0xMRURC\nQUNLKTsKICAgICAgICB9IGNhdGNoIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7\nCiAgICAgICAgICAgIGlmIChlcnIgPT0gbnVsbCkKICAgICAgICAgICAgICAg\nIGVyciA9IHJlOwogICAgICAgIH0KCiAgICAgICAgaWYgKGVyciAhPSBudWxs\nKQogICAgICAgICAgICB0aHJvdyBlcnI7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBOb3RpZmllcyB0aGUgZmFjdG9yeSBzeW5jIHRoYXQgdGhlIHRyYW5zYWN0\naW9uIGhhcyBlbmRlZCB3aXRoCiAgICAgKiB0aGUgZ2l2ZW4gc3RhdHVzLiBD\nbGVhcnMgYWxsIHRyYW5zYWN0aW9uIHN0YXRlIHJlZ2FyZGxlc3MKICAgICAq\nIG9mIGFueSBleGNlcHRpb25zIGR1cmluZyB0aGUgY2FsbGJhY2suCiAgICAg\nKi8KICAgIHByaXZhdGUgdm9pZCBub3RpZnlBZnRlckNvbXBsZXRpb24oaW50\nIHN0YXR1cykgewogICAgICAgIF9hY3RpdmUgPSBmYWxzZTsKCiAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgaWYgKF9mYWN0b3J5U3luYyAhPSBudWxsKQog\nICAgICAgICAgICAgICAgX2ZhY3RvcnlTeW5jLmFmdGVyQ29tcGxldGlvbihz\ndGF0dXMpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIF9yb2xs\nYmFja09ubHkgPSBudWxsOwogICAgICAgICAgICBfZmFjdG9yeVN5bmMgPSBu\ndWxsOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgc3luY2hyb25pemVk\nIHZvaWQgc2V0Um9sbGJhY2tPbmx5KCkgewogICAgICAgIHNldFJvbGxiYWNr\nT25seShuZXcgVXNlckV4Y2VwdGlvbigpKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBzZXRSb2xsYmFja09ubHkoVGhyb3dhYmxlIGNhdXNlKSB7CiAgICAg\nICAgX3JvbGxiYWNrT25seSA9IGNhdXNlOwogICAgfQoKICAgIHB1YmxpYyBU\naHJvd2FibGUgZ2V0Um9sbGJhY2tDYXVzZSgpIHsKICAgICAgICByZXR1cm4g\nX3JvbGxiYWNrT25seTsKICAgIH0KCiAgICBwdWJsaWMgc3luY2hyb25pemVk\nIGludCBnZXRTdGF0dXMoKSB7CiAgICAgICAgaWYgKF9yb2xsYmFja09ubHkg\nIT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIFN0YXR1cy5TVEFUVVNfTUFS\nS0VEX1JPTExCQUNLOwogICAgICAgIGlmIChfYWN0aXZlKQogICAgICAgICAg\nICByZXR1cm4gU3RhdHVzLlNUQVRVU19BQ1RJVkU7CiAgICAgICAgcmV0dXJu\nIFN0YXR1cy5TVEFUVVNfTk9fVFJBTlNBQ1RJT047CiAgICB9CgogICAgcHVi\nbGljIFRyYW5zYWN0aW9uIGdldFRyYW5zYWN0aW9uKCkgewogICAgICAgIHJl\ndHVybiB0aGlzOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHJlc3VtZShUcmFu\nc2FjdGlvbiB0b2JqKQogICAgICAgIHRocm93cyBTeXN0ZW1FeGNlcHRpb24g\newogICAgICAgIHRocm93IG5ldyBTeXN0ZW1FeGNlcHRpb24oTm90U3VwcG9y\ndGVkRXhjZXB0aW9uLmNsYXNzLmdldE5hbWUoKSk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgc2V0VHJhbnNhY3Rpb25UaW1lb3V0KGludCBzZWMpCiAgICAg\nICAgdGhyb3dzIFN5c3RlbUV4Y2VwdGlvbiB7CiAgICAgICAgdGhyb3cgbmV3\nIFN5c3RlbUV4Y2VwdGlvbihOb3RTdXBwb3J0ZWRFeGNlcHRpb24uY2xhc3Mu\nZ2V0TmFtZSgpKTsKICAgIH0KCiAgICBwdWJsaWMgVHJhbnNhY3Rpb24gc3Vz\ncGVuZCgpCiAgICAgICAgdGhyb3dzIFN5c3RlbUV4Y2VwdGlvbiB7CiAgICAg\nICAgdGhyb3cgbmV3IFN5c3RlbUV4Y2VwdGlvbihOb3RTdXBwb3J0ZWRFeGNl\ncHRpb24uY2xhc3MuZ2V0TmFtZSgpKTsKICAgIH0KCiAgICBwdWJsaWMgYm9v\nbGVhbiBkZWxpc3RSZXNvdXJjZShYQVJlc291cmNlIHhhUmVzLCBpbnQgZmxh\nZykKICAgICAgICB0aHJvd3MgU3lzdGVtRXhjZXB0aW9uIHsKICAgICAgICB0\naHJvdyBuZXcgU3lzdGVtRXhjZXB0aW9uKE5vdFN1cHBvcnRlZEV4Y2VwdGlv\nbi5jbGFzcy5nZXROYW1lKCkpOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFu\nIGVubGlzdFJlc291cmNlKFhBUmVzb3VyY2UgeGFSZXMpCiAgICAgICAgdGhy\nb3dzIFN5c3RlbUV4Y2VwdGlvbiB7CiAgICAgICAgdGhyb3cgbmV3IFN5c3Rl\nbUV4Y2VwdGlvbihOb3RTdXBwb3J0ZWRFeGNlcHRpb24uY2xhc3MuZ2V0TmFt\nZSgpKTsKICAgIH0KCiAgICBwdWJsaWMgc3luY2hyb25pemVkIHZvaWQgcmVn\naXN0ZXJTeW5jaHJvbml6YXRpb24oU3luY2hyb25pemF0aW9uIHN5bmMpIHsK\nICAgICAgICBpZiAoc3luYyA9PSBfYnJva2VyKQogICAgICAgICAgICByZXR1\ncm47CiAgICAgICAgaWYgKF9mYWN0b3J5U3luYyAhPSBudWxsKQogICAgICAg\nICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24oKTsKICAgICAgICBf\nZmFjdG9yeVN5bmMgPSBzeW5jOwogICAgfQp9Cgo=\n","encoding":"base64"}

