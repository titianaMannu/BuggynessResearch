{"sha":"141ac7850f6333b284f7ee67e34c17004b37a7ba","node_id":"MDQ6QmxvYjIwNjM2NDoxNDFhYzc4NTBmNjMzM2IyODRmN2VlNjdlMzRjMTcwMDRiMzdhN2Jh","size":9365,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/141ac7850f6333b284f7ee67e34c17004b37a7ba","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsOwoKaW1wb3J0IGph\ndmEubGFuZy5yZWZsZWN0Lk1ldGhvZDsKaW1wb3J0IGphdmEubGFuZy5yZWZs\nZWN0Lk1vZGlmaWVyOwppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsKaW1w\nb3J0IGphdmEudXRpbC5BcnJheXM7CmltcG9ydCBqYXZhLnV0aWwuQ29sbGVj\ndGlvbjsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsKaW1wb3J0IGph\ndmEudXRpbC5IYXNoTWFwOwppbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9yOwpp\nbXBvcnQgamF2YS51dGlsLkxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuTWFwOwoK\naW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5jb2xsZWN0aW9ucy5tYXAuTGlu\na2VkTWFwOwppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmxhbmcuU3RyaW5n\nVXRpbHM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnJvcC5MaXN0\nUmVzdWx0T2JqZWN0UHJvdmlkZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEubGliLnJvcC5SYW5nZVJlc3VsdE9iamVjdFByb3ZpZGVyOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5yb3AuUmVzdWx0T2JqZWN0UHJvdmlk\nZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxp\nemVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuQ2xhc3NNZXRh\nRGF0YTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLkV4Y2VwdGlv\nbnM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5JbXBsSGVscGVy\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuT3BlbkpQQUV4Y2Vw\ndGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLlVzZXJFeGNl\ncHRpb247CgovKioKICogQSBxdWVyeSB0aGF0IGlzIGV4ZWN1dGVkIGJ5IGEg\ndXNlci1kZWZpbmVkIG1ldGhvZC4KICoKICogQGF1dGhvciBBYmUgV2hpdGUK\nICogQG5vamF2YWRvYwogKi8KcHVibGljIGNsYXNzIE1ldGhvZFN0b3JlUXVl\ncnkKICAgIGV4dGVuZHMgQWJzdHJhY3RTdG9yZVF1ZXJ5IHsKCiAgICBwdWJs\naWMgc3RhdGljIGZpbmFsIFN0cmluZyBMQU5HVUFHRSA9IFF1ZXJ5TGFuZ3Vh\nZ2VzLkxBTkdfTUVUSE9EUUw7CgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwg\nQ2xhc3NbXSBBUkdTX0RBVEFTVE9SRSA9IG5ldyBDbGFzc1tdewogICAgICAg\nIFN0b3JlQ29udGV4dC5jbGFzcywgQ2xhc3NNZXRhRGF0YS5jbGFzcywgYm9v\nbGVhbi5jbGFzcywgTWFwLmNsYXNzLAogICAgICAgIEZldGNoQ29uZmlndXJh\ndGlvbi5jbGFzcwogICAgfTsKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIENs\nYXNzW10gQVJHU19JTk1FTSA9IG5ldyBDbGFzc1tdewogICAgICAgIFN0b3Jl\nQ29udGV4dC5jbGFzcywgQ2xhc3NNZXRhRGF0YS5jbGFzcywgYm9vbGVhbi5j\nbGFzcywKICAgICAgICBPYmplY3QuY2xhc3MsIE1hcC5jbGFzcywgRmV0Y2hD\nb25maWd1cmF0aW9uLmNsYXNzCiAgICB9OwogICAgcHJpdmF0ZSBzdGF0aWMg\nZmluYWwgaW50IE9CSl9JTkRFWCA9IDM7CgogICAgcHJpdmF0ZSBzdGF0aWMg\nZmluYWwgTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6ZXIuZm9yUGFja2FnZQog\nICAgICAgIChNZXRob2RTdG9yZVF1ZXJ5LmNsYXNzKTsKCiAgICBwcml2YXRl\nIExpbmtlZE1hcCBfcGFyYW1zID0gbnVsbDsKCiAgICBwdWJsaWMgdm9pZCBp\nbnZhbGlkYXRlQ29tcGlsYXRpb24oKSB7CiAgICAgICAgaWYgKF9wYXJhbXMg\nIT0gbnVsbCkKICAgICAgICAgICAgX3BhcmFtcy5jbGVhcigpOwogICAgfQoK\nICAgIHB1YmxpYyBFeGVjdXRvciBuZXdJbk1lbW9yeUV4ZWN1dG9yKENsYXNz\nTWV0YURhdGEgbWV0YSwgYm9vbGVhbiBzdWJzKSB7CiAgICAgICAgcmV0dXJu\nIG5ldyBNZXRob2RFeGVjdXRvcih0aGlzLCBtZXRhLCBzdWJzLCB0cnVlKTsK\nICAgIH0KCiAgICBwdWJsaWMgRXhlY3V0b3IgbmV3RGF0YVN0b3JlRXhlY3V0\nb3IoQ2xhc3NNZXRhRGF0YSBtZXRhLCBib29sZWFuIHN1YnMpIHsKICAgICAg\nICByZXR1cm4gbmV3IE1ldGhvZEV4ZWN1dG9yKHRoaXMsIG1ldGEsIHN1YnMs\nIGZhbHNlKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBzdXBwb3J0c0lu\nTWVtb3J5RXhlY3V0aW9uKCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAg\nfQoKICAgIHB1YmxpYyBib29sZWFuIHN1cHBvcnRzRGF0YVN0b3JlRXhlY3V0\naW9uKCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgog\nICAgICogUGFyc2UgdGhlIHBhcmFtZXRlciBkZWNsYXJhdGlvbnMuCiAgICAg\nKi8KICAgIHByaXZhdGUgTGlua2VkTWFwIGJpbmRQYXJhbWV0ZXJUeXBlcygp\nIHsKICAgICAgICBjdHgubG9jaygpOwogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIGlmIChfcGFyYW1zICE9IG51bGwpCiAgICAgICAgICAgICAgICByZXR1\ncm4gX3BhcmFtczsKICAgICAgICAgICAgU3RyaW5nIHBhcmFtcyA9IGN0eC5n\nZXRQYXJhbWV0ZXJEZWNsYXJhdGlvbigpOwogICAgICAgICAgICBpZiAocGFy\nYW1zID09IG51bGwpCiAgICAgICAgICAgICAgICByZXR1cm4gRU1QVFlfUEFS\nQU1TOwoKICAgICAgICAgICAgTGlzdCBkZWNzID0gRmlsdGVycy5wYXJzZURl\nY2xhcmF0aW9uKHBhcmFtcywgJywnLCAicGFyYW1ldGVycyIpOwogICAgICAg\nICAgICBpZiAoX3BhcmFtcyA9PSBudWxsKQogICAgICAgICAgICAgICAgX3Bh\ncmFtcyA9IG5ldyBMaW5rZWRNYXAoKGludCkgKGRlY3Muc2l6ZSgpIC8gMiAq\nIDEuMzMgKyAxKSk7CiAgICAgICAgICAgIFN0cmluZyBuYW1lOwogICAgICAg\nICAgICBDbGFzcyBjbHM7CiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBp\nIDwgZGVjcy5zaXplKCk7IGkgKz0gMikgewogICAgICAgICAgICAgICAgbmFt\nZSA9IChTdHJpbmcpIGRlY3MuZ2V0KGkpOwogICAgICAgICAgICAgICAgY2xz\nID0gY3R4LmNsYXNzRm9yTmFtZShuYW1lLCBudWxsKTsKICAgICAgICAgICAg\nICAgIGlmIChjbHMgPT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICB0aHJv\ndyBuZXcgVXNlckV4Y2VwdGlvbihfbG9jLmdldCgiYmFkLXBhcmFtLXR5cGUi\nLCBuYW1lKSk7CiAgICAgICAgICAgICAgICBfcGFyYW1zLnB1dChkZWNzLmdl\ndChpICsgMSksIGNscyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0\ndXJuIF9wYXJhbXM7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAg\nY3R4LnVubG9jaygpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAq\nIFVzZXMgYSB1c2VyLWRlZmluZWQgbWV0aG9kIG5hbWVkIGJ5IHRoZSBmaWx0\nZXIgc3RyaW5nIHRvIGV4ZWN1dGUgdGhlCiAgICAgKiBxdWVyeS4KICAgICAq\nLwogICAgcHJpdmF0ZSBzdGF0aWMgY2xhc3MgTWV0aG9kRXhlY3V0b3IKICAg\nICAgICBleHRlbmRzIEFic3RyYWN0RXhlY3V0b3IKICAgICAgICBpbXBsZW1l\nbnRzIEV4ZWN1dG9yIHsKCiAgICAgICAgcHJpdmF0ZSBmaW5hbCBDbGFzc01l\ndGFEYXRhIF9tZXRhOwogICAgICAgIHByaXZhdGUgZmluYWwgYm9vbGVhbiBf\nc3ViczsKICAgICAgICBwcml2YXRlIGZpbmFsIGJvb2xlYW4gX2luTWVtOwog\nICAgICAgIHByaXZhdGUgTWV0aG9kIF9tZXRoID0gbnVsbDsKCiAgICAgICAg\ncHVibGljIE1ldGhvZEV4ZWN1dG9yKE1ldGhvZFN0b3JlUXVlcnkgcSwgQ2xh\nc3NNZXRhRGF0YSBjYW5kaWRhdGUsCiAgICAgICAgICAgIGJvb2xlYW4gc3Vi\nY2xhc3NlcywgYm9vbGVhbiBpbk1lbSkgewogICAgICAgICAgICBfbWV0YSA9\nIGNhbmRpZGF0ZTsKICAgICAgICAgICAgX3N1YnMgPSBzdWJjbGFzc2VzOwog\nICAgICAgICAgICBfaW5NZW0gPSBpbk1lbTsKICAgICAgICB9CgogICAgICAg\nIHB1YmxpYyBSZXN1bHRPYmplY3RQcm92aWRlciBleGVjdXRlUXVlcnkoU3Rv\ncmVRdWVyeSBxLAogICAgICAgICAgICBPYmplY3RbXSBwYXJhbXMsIFJhbmdl\nIHJhbmdlKSB7CiAgICAgICAgICAgIC8vIGNvbnZlcnQgdGhlIHBhcmFtZXRl\ncnMgaW50byBhIG1hcAogICAgICAgICAgICBNYXAgcGFyYW1NYXA7CiAgICAg\nICAgICAgIGlmIChwYXJhbXMubGVuZ3RoID09IDApCiAgICAgICAgICAgICAg\nICBwYXJhbU1hcCA9IENvbGxlY3Rpb25zLkVNUFRZX01BUDsKICAgICAgICAg\nICAgZWxzZSB7CiAgICAgICAgICAgICAgICBNYXAgcGFyYW1UeXBlcyA9IHEu\nZ2V0Q29udGV4dCgpLmdldFBhcmFtZXRlclR5cGVzKCk7CiAgICAgICAgICAg\nICAgICBwYXJhbU1hcCA9IG5ldyBIYXNoTWFwKChpbnQpIChwYXJhbXMubGVu\nZ3RoICogMS4zMyArIDEpKTsKICAgICAgICAgICAgICAgIGludCBpZHggPSAw\nOwogICAgICAgICAgICAgICAgZm9yIChJdGVyYXRvciBpdHIgPSBwYXJhbVR5\ncGVzLmtleVNldCgpLml0ZXJhdG9yKCk7CiAgICAgICAgICAgICAgICAgICAg\naXRyLmhhc05leHQoKTsgaWR4KyspCiAgICAgICAgICAgICAgICAgICAgcGFy\nYW1NYXAucHV0KGl0ci5uZXh0KCksIHBhcmFtc1tpZHhdKTsKICAgICAgICAg\nICAgfQoKICAgICAgICAgICAgRmV0Y2hDb25maWd1cmF0aW9uIGZldGNoID0g\ncS5nZXRDb250ZXh0KCkuZ2V0RmV0Y2hDb25maWd1cmF0aW9uKCk7CiAgICAg\nICAgICAgIFN0b3JlQ29udGV4dCBzY3R4ID0gcS5nZXRDb250ZXh0KCkuZ2V0\nU3RvcmVDb250ZXh0KCk7CiAgICAgICAgICAgIFJlc3VsdE9iamVjdFByb3Zp\nZGVyIHJvcDsKICAgICAgICAgICAgT2JqZWN0W10gYXJnczsKICAgICAgICAg\nICAgaWYgKF9pbk1lbSkgewogICAgICAgICAgICAgICAgYXJncyA9IG5ldyBP\nYmplY3RbXXsgc2N0eCwgX21ldGEsIChfc3VicykgPyBCb29sZWFuLlRSVUUK\nICAgICAgICAgICAgICAgICAgICA6IEJvb2xlYW4uRkFMU0UsIG51bGwsIHBh\ncmFtTWFwLCBmZXRjaCB9OwoKICAgICAgICAgICAgICAgIEl0ZXJhdG9yIGl0\nciA9IG51bGw7CiAgICAgICAgICAgICAgICBDb2xsZWN0aW9uIGNvbGwgPSBx\nLmdldENvbnRleHQoKS5nZXRDYW5kaWRhdGVDb2xsZWN0aW9uKCk7CiAgICAg\nICAgICAgICAgICBpZiAoY29sbCA9PSBudWxsKSB7CiAgICAgICAgICAgICAg\nICAgICAgRXh0ZW50IGV4dCA9IHEuZ2V0Q29udGV4dCgpLmdldFF1ZXJ5KCku\nCiAgICAgICAgICAgICAgICAgICAgICAgIGdldENhbmRpZGF0ZUV4dGVudCgp\nOwogICAgICAgICAgICAgICAgICAgIGl0ciA9IGV4dC5pdGVyYXRvcigpOwog\nICAgICAgICAgICAgICAgfSBlbHNlCiAgICAgICAgICAgICAgICAgICAgaXRy\nID0gY29sbC5pdGVyYXRvcigpOwoKICAgICAgICAgICAgICAgIExpc3QgcmVz\ndWx0cyA9IG5ldyBBcnJheUxpc3QoKTsKICAgICAgICAgICAgICAgIHRyeSB7\nCiAgICAgICAgICAgICAgICAgICAgT2JqZWN0IG9iajsKICAgICAgICAgICAg\nICAgICAgICB3aGlsZSAoaXRyLmhhc05leHQoKSkgewogICAgICAgICAgICAg\nICAgICAgICAgICBvYmogPSBpdHIubmV4dCgpOwogICAgICAgICAgICAgICAg\nICAgICAgICBpZiAob2JqID09IG51bGwKICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIHx8ICFfbWV0YS5nZXREZXNjcmliZWRUeXBlKCkuaXNJbnN0YW5j\nZShvYmopKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7\nCgogICAgICAgICAgICAgICAgICAgICAgICBhcmdzW09CSl9JTkRFWF0gPSBv\nYmo7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoKEJvb2xlYW4pIGlu\ndm9rZShxLCBhcmdzKSkuYm9vbGVhblZhbHVlKCkpCiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICByZXN1bHRzLmFkZChvYmopOwogICAgICAgICAgICAg\nICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZp\nbmFsbHkgewogICAgICAgICAgICAgICAgICAgIEltcGxIZWxwZXIuY2xvc2Uo\naXRyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJvcCA9\nIG5ldyBMaXN0UmVzdWx0T2JqZWN0UHJvdmlkZXIocmVzdWx0cyk7CiAgICAg\nICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBkYXRhc3RvcmUK\nICAgICAgICAgICAgICAgIGFyZ3MgPSBuZXcgT2JqZWN0W117IHNjdHgsIF9t\nZXRhLCAoX3N1YnMpID8gQm9vbGVhbi5UUlVFCiAgICAgICAgICAgICAgICAg\nICAgOiBCb29sZWFuLkZBTFNFLCBwYXJhbU1hcCwgZmV0Y2ggfTsKICAgICAg\nICAgICAgICAgIHJvcCA9IChSZXN1bHRPYmplY3RQcm92aWRlcikgaW52b2tl\nKHEsIGFyZ3MpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAocmFu\nZ2Uuc3RhcnQgIT0gMCB8fCByYW5nZS5lbmQgIT0gTG9uZy5NQVhfVkFMVUUp\nCiAgICAgICAgICAgICAgICByb3AgPSBuZXcgUmFuZ2VSZXN1bHRPYmplY3RQ\ncm92aWRlcihyb3AsIHJhbmdlLnN0YXJ0LHJhbmdlLmVuZCk7CiAgICAgICAg\nICAgIHJldHVybiByb3A7CiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAg\nICAgKiBJbnZva2UgdGhlIGludGVybmFsIG1ldGhvZCB3aXRoIHRoZSBnaXZl\nbiBhcmd1bWVudHMsIHJldHVybmluZyB0aGUKICAgICAgICAgKiByZXN1bHQu\nCiAgICAgICAgICovCiAgICAgICAgcHJpdmF0ZSBPYmplY3QgaW52b2tlKFN0\nb3JlUXVlcnkgcSwgT2JqZWN0W10gYXJncykgewogICAgICAgICAgICB2YWxp\nZGF0ZShxKTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHJl\ndHVybiBfbWV0aC5pbnZva2UobnVsbCwgYXJncyk7CiAgICAgICAgICAgIH0g\nY2F0Y2ggKE9wZW5KUEFFeGNlcHRpb24ga2UpIHsKICAgICAgICAgICAgICAg\nIHRocm93IGtlOwogICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkg\newogICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFeGNlcHRpb24oX2xv\nYy5nZXQoIm1ldGhvZC1lcnJvciIsIF9tZXRoLAogICAgICAgICAgICAgICAg\nICAgIEV4Y2VwdGlvbnMudG9TdHJpbmcoQXJyYXlzLmFzTGlzdChhcmdzKSkp\nLCBlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIHZvaWQgdmFsaWRhdGUoU3RvcmVRdWVyeSBxKSB7CiAgICAgICAgICAgIGlm\nIChfbWV0aCAhPSBudWxsKQogICAgICAgICAgICAgICAgcmV0dXJuOwoKICAg\nICAgICAgICAgU3RyaW5nIG1ldGhOYW1lID0gcS5nZXRDb250ZXh0KCkuZ2V0\nUXVlcnlTdHJpbmcoKTsKICAgICAgICAgICAgaWYgKFN0cmluZ1V0aWxzLmlz\nRW1wdHkobWV0aE5hbWUpKQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVz\nZXJFeGNlcHRpb24oX2xvYy5nZXQoIm5vLW1ldGhvZCIpKTsKCiAgICAgICAg\nICAgIGludCBkb3RJZHggPSBtZXRoTmFtZS5sYXN0SW5kZXhPZignLicpOwog\nICAgICAgICAgICBDbGFzcyBjbHM7CiAgICAgICAgICAgIGlmIChkb3RJZHgg\nPT0gLTEpCiAgICAgICAgICAgICAgICBjbHMgPSBfbWV0YS5nZXREZXNjcmli\nZWRUeXBlKCk7CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAg\nY2xzID0gcS5nZXRDb250ZXh0KCkuY2xhc3NGb3JOYW1lKG1ldGhOYW1lLnN1\nYnN0cmluZygwLCBkb3RJZHgpLAogICAgICAgICAgICAgICAgICAgIG51bGwp\nOwogICAgICAgICAgICAgICAgaWYgKGNscyA9PSBudWxsKQogICAgICAgICAg\nICAgICAgICAgIHRocm93IG5ldyBVc2VyRXhjZXB0aW9uKF9sb2MuZ2V0KCJi\nYWQtbWV0aG9kLWNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAgICAgbWV0\naE5hbWUuc3Vic3RyaW5nKDAsIGRvdElkeCksIG1ldGhOYW1lKSk7CiAgICAg\nICAgICAgICAgICBtZXRoTmFtZSA9IG1ldGhOYW1lLnN1YnN0cmluZyhkb3RJ\nZHggKyAxKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgTWV0aG9kIG1l\ndGg7CiAgICAgICAgICAgIENsYXNzW10gdHlwZXMgPSAoX2luTWVtKSA/IEFS\nR1NfSU5NRU0gOiBBUkdTX0RBVEFTVE9SRTsKICAgICAgICAgICAgdHJ5IHsK\nICAgICAgICAgICAgICAgIG1ldGggPSBjbHMuZ2V0TWV0aG9kKG1ldGhOYW1l\nLCB0eXBlcyk7CiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7\nCiAgICAgICAgICAgICAgICBTdHJpbmcgbXNnID0gKF9pbk1lbSkgPyAiYmFk\nLWlubWVtLW1ldGhvZCIKICAgICAgICAgICAgICAgICAgICA6ICJiYWQtZGF0\nYXN0b3JlLW1ldGhvZCI7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXNl\nckV4Y2VwdGlvbihfbG9jLmdldChtc2csIG1ldGhOYW1lLCBjbHMpKTsKICAg\nICAgICAgICAgfQogICAgICAgICAgICBpZiAoIU1vZGlmaWVyLmlzU3RhdGlj\nKG1ldGguZ2V0TW9kaWZpZXJzKCkpKQogICAgICAgICAgICAgICAgdGhyb3cg\nbmV3IFVzZXJFeGNlcHRpb24oX2xvYy5nZXQoIm1ldGhvZC1ub3Qtc3RhdGlj\nIiwgbWV0aCkpOwogICAgICAgICAgICBpZiAoIVJlc3VsdE9iamVjdFByb3Zp\nZGVyLmNsYXNzLmlzQXNzaWduYWJsZUZyb20oCiAgICAgICAgICAgICAgICBt\nZXRoLmdldFJldHVyblR5cGUoKSkpCiAgICAgICAgICAgICAgICB0aHJvdyBu\nZXcgVXNlckV4Y2VwdGlvbihfbG9jLmdldCgibWV0aG9kLXJldHVybi10eXBl\nLWludmFsaWQiLAogICAgICAgICAgICAgICAgICAgIG1ldGgsIG1ldGguZ2V0\nUmV0dXJuVHlwZSgpKSk7CiAgICAgICAgICAgIF9tZXRoID0gbWV0aDsKICAg\nICAgICB9CgogICAgICAgIHB1YmxpYyBMaW5rZWRNYXAgZ2V0UGFyYW1ldGVy\nVHlwZXMoU3RvcmVRdWVyeSBxKSB7CiAgICAgICAgICAgIHJldHVybiAoKE1l\ndGhvZFN0b3JlUXVlcnkpIHEpLmJpbmRQYXJhbWV0ZXJUeXBlcygpOwoJCX0K\nCX0KfQo=\n","encoding":"base64"}

