{"sha":"22396bde158e640f6b68c41bf8ddfb35db16a0fb","node_id":"MDQ6QmxvYjIwNjM2NDoyMjM5NmJkZTE1OGU2NDBmNmI2OGM0MWJmOGRkZmIzNWRiMTZhMGZi","size":12074,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/22396bde158e640f6b68c41bf8ddfb35db16a0fb","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YTsKCmltcG9ydCBqYXZh\nLmxhbmcucmVmbGVjdC5GaWVsZDsKaW1wb3J0IGphdmEubGFuZy5yZWZsZWN0\nLk1lbWJlcjsKaW1wb3J0IGphdmEubGFuZy5yZWZsZWN0Lk1ldGhvZDsKaW1w\nb3J0IGphdmEubGFuZy5yZWZsZWN0Lk1vZGlmaWVyOwppbXBvcnQgamF2YS5z\nZWN1cml0eS5BY2Nlc3NDb250cm9sbGVyOwppbXBvcnQgamF2YS5zZWN1cml0\neS5Qcml2aWxlZ2VkQWN0aW9uRXhjZXB0aW9uOwoKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5lbmhhbmNlLlBDUmVnaXN0cnk7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEuZW5oYW5jZS5SZWZsZWN0aW9uOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmxpYi5sb2cuTG9nOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmxpYi51dGlsLkoyRG9Qcml2SGVscGVyOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmxpYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS51dGlsLkludGVybmFsRXhjZXB0aW9uOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuT3BlbkpQQUV4Y2VwdGlvbjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLlVzZXJFeGNlcHRpb247Cgov\nKioKICogQWJzdHJhY3QgbWV0YWRhdGEgZGVmYXVsdHMuCiAqCiAqIEBhdXRo\nb3IgQWJlIFdoaXRlCiAqLwpwdWJsaWMgYWJzdHJhY3QgY2xhc3MgQWJzdHJh\nY3RNZXRhRGF0YURlZmF1bHRzCiAgICBpbXBsZW1lbnRzIE1ldGFEYXRhRGVm\nYXVsdHMgewoKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvY2FsaXplciBf\nbG9jID0gTG9jYWxpemVyLmZvclBhY2thZ2UKICAgICAgICAoQWJzdHJhY3RN\nZXRhRGF0YURlZmF1bHRzLmNsYXNzKTsKCiAgICBwcml2YXRlIGludCBfYWNj\nZXNzID0gQ2xhc3NNZXRhRGF0YS5BQ0NFU1NfRklFTEQ7CiAgICBwcml2YXRl\nIGludCBfaWRlbnRpdHkgPSBDbGFzc01ldGFEYXRhLklEX1VOS05PV047CiAg\nICBwcml2YXRlIGJvb2xlYW4gX2lnbm9yZSA9IHRydWU7CiAgICBwcml2YXRl\nIGJvb2xlYW4gX2ludGVyZmFjZSA9IHRydWU7CiAgICBwcml2YXRlIGJvb2xl\nYW4gX3BjUmVnaXN0cnkgPSB0cnVlOwogICAgcHJpdmF0ZSBpbnQgX2NhbGxi\nYWNrID0gQ0FMTEJBQ0tfUkVUSFJPVzsKICAgIHByaXZhdGUgYm9vbGVhbiBf\ndW53cmFwcGVkID0gZmFsc2U7CgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRv\nIGF0dGVtcHQgdG8gdXNlIHRoZSBpbmZvcm1hdGlvbiBmcm9tIHJlZ2lzdGVy\nZWQgY2xhc3NlcwogICAgICogdG8gcG9wdWxhdGUgbWV0YWRhdGEgZGVmYXVs\ndHMuIERlZmF1bHRzIHRvIHRydWUuCiAgICAgKi8KICAgIHB1YmxpYyBib29s\nZWFuIGdldFVzZVBDUmVnaXN0cnkoKSB7CiAgICAgICAgcmV0dXJuIF9wY1Jl\nZ2lzdHJ5OwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciB0byBhdHRl\nbXB0IHRvIHVzZSB0aGUgaW5mb3JtYXRpb24gZnJvbSByZWdpc3RlcmVkIGNs\nYXNzZXMKICAgICAqIHRvIHBvcHVsYXRlIG1ldGFkYXRhIGRlZmF1bHRzLiBE\nZWZhdWx0cyB0byB0cnVlLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRV\nc2VQQ1JlZ2lzdHJ5KGJvb2xlYW4gcGNSZWdpc3RyeSkgewogICAgICAgIF9w\nY1JlZ2lzdHJ5ID0gcGNSZWdpc3RyeTsKICAgIH0KCiAgICAvKioKICAgICAq\nIFRoZSBkZWZhdWx0IGFjY2VzcyB0eXBlIGZvciBiYXNlIGNsYXNzZXMgd2l0\naCBBQ0NFU1NfVU5LTk9XTi4KICAgICAqIEFDQ0VTU19GSUVMRCBieSBkZWZh\ndWx0LgogICAgICovCiAgICBwdWJsaWMgaW50IGdldERlZmF1bHRBY2Nlc3NU\neXBlKCkgewogICAgICAgIHJldHVybiBfYWNjZXNzOwogICAgfQoKICAgIC8q\nKgogICAgICogVGhlIGRlZmF1bHQgYWNjZXNzIHR5cGUgZm9yIGJhc2UgY2xh\nc3NlcyB3aXRoIEFDQ0VTU19VTktOT1dOLgogICAgICogQUNDRVNTX0ZJRUxE\nIGJ5IGRlZmF1bHQuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldERlZmF1\nbHRBY2Nlc3NUeXBlKGludCBhY2Nlc3MpIHsKICAgICAgICBfYWNjZXNzID0g\nYWNjZXNzOwogICAgfQoKICAgIC8qKgogICAgICogVGhlIGRlZmF1bHQgaWRl\nbnRpdHkgdHlwZSBmb3IgdW5tYXBwZWQgY2xhc3NlcyB3aXRob3V0IHByaW1h\ncnkgCiAgICAgKiBrZXkgZmllbGRzLiBJRF9VTktOT1dOIGJ5IGRlZmF1bHQu\nCiAgICAgKi8KICAgIHB1YmxpYyBpbnQgZ2V0RGVmYXVsdElkZW50aXR5VHlw\nZSgpIHsKICAgICAgICByZXR1cm4gX2lkZW50aXR5OwogICAgfQoKICAgIC8q\nKgogICAgICogVGhlIGRlZmF1bHQgaWRlbnRpdHkgdHlwZSBmb3IgdW5tYXBw\nZWQgY2xhc3NlcyB3aXRob3V0IHByaW1hcnkgCiAgICAgKiBrZXkgZmllbGRz\nLiBJRF9VTktOT1dOIGJ5IGRlZmF1bHQuCiAgICAgKi8KICAgIHB1YmxpYyB2\nb2lkIHNldERlZmF1bHRJZGVudGl0eVR5cGUoaW50IGlkZW50aXR5KSB7CiAg\nICAgICAgX2lkZW50aXR5ID0gaWRlbnRpdHk7CiAgICB9CgogICAgcHVibGlj\nIGludCBnZXRDYWxsYmFja01vZGUoKSB7CiAgICAgICAgcmV0dXJuIF9jYWxs\nYmFjazsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRDYWxsYmFja01vZGUo\naW50IG1vZGUpIHsKICAgICAgICBfY2FsbGJhY2sgPSBtb2RlOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHNldENhbGxiYWNrTW9kZShpbnQgbW9kZSwgYm9v\nbGVhbiBvbikgewogICAgICAgIGlmIChvbikKICAgICAgICAgICAgX2NhbGxi\nYWNrIHw9IG1vZGU7CiAgICAgICAgZWxzZQogICAgICAgICAgICBfY2FsbGJh\nY2sgJj0gfm1vZGU7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gZ2V0Q2Fs\nbGJhY2tzQmVmb3JlTGlzdGVuZXJzKGludCB0eXBlKSB7CiAgICAgICAgcmV0\ndXJuIGZhbHNlOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGlzRGVjbGFy\nZWRJbnRlcmZhY2VQZXJzaXN0ZW50KCkgewogICAgICAgIHJldHVybiBfaW50\nZXJmYWNlOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldERlY2xhcmVkSW50\nZXJmYWNlUGVyc2lzdGVudChib29sZWFuIHBlcnMpIHsKICAgICAgICBfaW50\nZXJmYWNlID0gcGVyczsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBpc0Rh\ndGFTdG9yZU9iamVjdElkRmllbGRVbndyYXBwZWQoKSB7CiAgICAgICAgcmV0\ndXJuIF91bndyYXBwZWQ7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0RGF0\nYVN0b3JlT2JqZWN0SWRGaWVsZFVud3JhcHBlZChib29sZWFuIHVud3JhcHBl\nZCkgewogICAgICAgIF91bndyYXBwZWQgPSB1bndyYXBwZWQ7CiAgICB9Cgog\nICAgcHVibGljIGJvb2xlYW4gZ2V0SWdub3JlTm9uUGVyc2lzdGVudCgpIHsK\nICAgICAgICByZXR1cm4gX2lnbm9yZTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBzZXRJZ25vcmVOb25QZXJzaXN0ZW50KGJvb2xlYW4gaWdub3JlKSB7CiAg\nICAgICAgX2lnbm9yZSA9IGlnbm9yZTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBwb3B1bGF0ZShDbGFzc01ldGFEYXRhIG1ldGEsIGludCBhY2Nlc3MpIHsK\nICAgICAgICBpZiAobWV0YS5nZXREZXNjcmliZWRUeXBlKCkgPT0gT2JqZWN0\nLmNsYXNzKQogICAgICAgICAgICByZXR1cm47CgogICAgICAgIGlmIChhY2Nl\nc3MgPT0gQ2xhc3NNZXRhRGF0YS5BQ0NFU1NfVU5LTk9XTikgewogICAgICAg\nICAgICAvLyB3ZSBkbyBub3QgYWxsb3cgdXNpbmcgYm90aCBmaWVsZCBhbmQg\nbWV0aG9kIGFjY2VzcyBhdAogICAgICAgICAgICAvLyB0aGUgc2FtZSB0aW1l\nCiAgICAgICAgICAgIGFjY2VzcyA9IGdldEFjY2Vzc1R5cGUobWV0YSk7CiAg\nICAgICAgICAgIGlmICgoYWNjZXNzICYgQ2xhc3NNZXRhRGF0YS5BQ0NFU1Nf\nRklFTEQpICE9IDAKICAgICAgICAgICAgICAgICYmIChhY2Nlc3MgJiBDbGFz\nc01ldGFEYXRhLkFDQ0VTU19QUk9QRVJUWSkgIT0gMCkKICAgICAgICAgICAg\nICAgIHRocm93IG5ldyBVc2VyRXhjZXB0aW9uKF9sb2MuZ2V0KCJhY2Nlc3Mt\nZmllbGQtYW5kLXByb3AiLAogICAgICAgICAgICAgICAgICAgIG1ldGEuZ2V0\nRGVzY3JpYmVkVHlwZSgpLmdldE5hbWUoKSkpOwogICAgICAgIH0KICAgICAg\nICBtZXRhLnNldEFjY2Vzc1R5cGUoYWNjZXNzKTsKCiAgICAgICAgTG9nIGxv\nZyA9IG1ldGEuZ2V0UmVwb3NpdG9yeSgpLmdldExvZygpOwogICAgICAgIGlm\nIChsb2cuaXNUcmFjZUVuYWJsZWQoKSkKICAgICAgICAgICAgbG9nLnRyYWNl\nKF9sb2MuZ2V0KCJnZW4tbWV0YSIsIG1ldGEpKTsKICAgICAgICBpZiAoIV9w\nY1JlZ2lzdHJ5IHx8ICFwb3B1bGF0ZUZyb21QQ1JlZ2lzdHJ5KG1ldGEpKSB7\nCiAgICAgICAgICAgIGlmIChsb2cuaXNUcmFjZUVuYWJsZWQoKSkKICAgICAg\nICAgICAgICAgIGxvZy50cmFjZShfbG9jLmdldCgibWV0YS1yZWZsZWN0Iikp\nOwogICAgICAgICAgICBwb3B1bGF0ZUZyb21SZWZsZWN0aW9uKG1ldGEpOwog\nICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFBvcHVsYXRlIGluaXRp\nYWwgZmllbGQgZGF0YS4gRG9lcyBub3RoaW5nIGJ5IGRlZmF1bHQuCiAgICAg\nKi8KICAgIHByb3RlY3RlZCB2b2lkIHBvcHVsYXRlKEZpZWxkTWV0YURhdGEg\nZm1kKSB7CiAgICB9CgogICAgLyoqCiAgICAgKiBQb3B1bGF0ZSB0aGUgZ2l2\nZW4gbWV0YWRhdGEgdXNpbmcgdGhlIHtAbGluayBQQ1JlZ2lzdHJ5fS4KICAg\nICAqLwogICAgcHJpdmF0ZSBib29sZWFuIHBvcHVsYXRlRnJvbVBDUmVnaXN0\ncnkoQ2xhc3NNZXRhRGF0YSBtZXRhKSB7CiAgICAgICAgQ2xhc3MgY2xzID0g\nbWV0YS5nZXREZXNjcmliZWRUeXBlKCk7CiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgU3RyaW5nW10gZmllbGROYW1lcyA9IFBDUmVnaXN0cnkuZ2V0Rmll\nbGROYW1lcyhjbHMpOwogICAgICAgICAgICBDbGFzc1tdIGZpZWxkVHlwZXMg\nPSBQQ1JlZ2lzdHJ5LmdldEZpZWxkVHlwZXMoY2xzKTsKICAgICAgICAgICAg\nTWVtYmVyIG1lbWJlcjsKICAgICAgICAgICAgRmllbGRNZXRhRGF0YSBmbWQ7\nCiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZmllbGROYW1lcy5s\nZW5ndGg7IGkgKyspIHsKICAgICAgICAgICAgICAgIGlmIChtZXRhLmdldEFj\nY2Vzc1R5cGUoKSA9PSBDbGFzc01ldGFEYXRhLkFDQ0VTU19GSUVMRCkKICAg\nICAgICAgICAgICAgICAgICBtZW1iZXIgPSAoRmllbGQpIEFjY2Vzc0NvbnRy\nb2xsZXIuZG9Qcml2aWxlZ2VkKAogICAgICAgICAgICAgICAgICAgICAgICBK\nMkRvUHJpdkhlbHBlci5nZXREZWNsYXJlZEZpZWxkQWN0aW9uKAogICAgICAg\nICAgICAgICAgICAgICAgICAgICAgY2xzLGZpZWxkTmFtZXNbaV0pKTsgCiAg\nICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgbWVtYmVy\nID0gUmVmbGVjdGlvbi5maW5kR2V0dGVyKG1ldGEuZ2V0RGVzY3JpYmVkVHlw\nZSgpLAogICAgICAgICAgICAgICAgICAgICAgICBmaWVsZE5hbWVzW2ldLCB0\ncnVlKTsKICAgICAgICAgICAgICAgIGZtZCA9IG1ldGEuYWRkRGVjbGFyZWRG\naWVsZChmaWVsZE5hbWVzW2ldLCBmaWVsZFR5cGVzW2ldKTsKICAgICAgICAg\nICAgICAgIGZtZC5iYWNraW5nTWVtYmVyKG1lbWJlcik7CiAgICAgICAgICAg\nICAgICBwb3B1bGF0ZShmbWQpOwogICAgICAgICAgICB9CiAgICAgICAgICAg\nIHJldHVybiB0cnVlOwogICAgICAgIH0gY2F0Y2ggKElsbGVnYWxTdGF0ZUV4\nY2VwdGlvbiBpYWUpIHsKICAgICAgICAgICAgLy8gdGhyb3duIGJ5IHJlZ2lz\ndHJ5IHdoZW4gbm8gbWV0YWRhdGEgYXZhaWxhYmxlCiAgICAgICAgICAgIHJl\ndHVybiBmYWxzZTsKICAgICAgICB9IGNhdGNoIChPcGVuSlBBRXhjZXB0aW9u\nIGtlKSB7CiAgICAgICAgICAgIHRocm93IGtlOwogICAgICAgIH0gY2F0Y2gg\nKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2Yg\nUHJpdmlsZWdlZEFjdGlvbkV4Y2VwdGlvbikKICAgICAgICAgICAgICAgIGUg\nPSAoKFByaXZpbGVnZWRBY3Rpb25FeGNlcHRpb24pIGUpLmdldEV4Y2VwdGlv\nbigpOwogICAgICAgICAgICB0aHJvdyBuZXcgVXNlckV4Y2VwdGlvbihlKTsK\nICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBHZW5lcmF0ZSB0aGUg\nZ2l2ZW4gbWV0YWRhdGEgdXNpbmcgcmVmbGVjdGlvbi4KICAgICAqLwogICAg\ncHJpdmF0ZSB2b2lkIHBvcHVsYXRlRnJvbVJlZmxlY3Rpb24oQ2xhc3NNZXRh\nRGF0YSBtZXRhKSB7CiAgICAgICAgTWVtYmVyW10gbWVtYmVyczsKICAgICAg\nICBib29sZWFuIGlmYWNlID0gbWV0YS5nZXREZXNjcmliZWRUeXBlKCkuaXNJ\nbnRlcmZhY2UoKTsKICAgICAgICBpZiAobWV0YS5nZXRBY2Nlc3NUeXBlKCkg\nPT0gQ2xhc3NNZXRhRGF0YS5BQ0NFU1NfRklFTEQgJiYgIWlmYWNlKQogICAg\nICAgICAgICBtZW1iZXJzID0gKEZpZWxkW10pIEFjY2Vzc0NvbnRyb2xsZXIu\nZG9Qcml2aWxlZ2VkKAogICAgICAgICAgICAgICAgSjJEb1ByaXZIZWxwZXIu\nZ2V0RGVjbGFyZWRGaWVsZHNBY3Rpb24oCiAgICAgICAgICAgICAgICAgICAg\nbWV0YS5nZXREZXNjcmliZWRUeXBlKCkpKTsgCiAgICAgICAgZWxzZQogICAg\nICAgICAgICBtZW1iZXJzID0gKE1ldGhvZFtdKSBBY2Nlc3NDb250cm9sbGVy\nLmRvUHJpdmlsZWdlZCgKICAgICAgICAgICAgICAgIEoyRG9Qcml2SGVscGVy\nLmdldERlY2xhcmVkTWV0aG9kc0FjdGlvbigKICAgICAgICAgICAgICAgICAg\nICBtZXRhLmdldERlc2NyaWJlZFR5cGUoKSkpOyAKCiAgICAgICAgaW50IG1v\nZHM7CiAgICAgICAgU3RyaW5nIG5hbWU7CiAgICAgICAgYm9vbGVhbiBkZWY7\nCiAgICAgICAgRmllbGRNZXRhRGF0YSBmbWQ7CiAgICAgICAgZm9yIChpbnQg\naSA9IDA7IGkgPCBtZW1iZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAg\nIG1vZHMgPSBtZW1iZXJzW2ldLmdldE1vZGlmaWVycygpOwogICAgICAgICAg\nICBpZiAoTW9kaWZpZXIuaXNTdGF0aWMobW9kcykgfHwgTW9kaWZpZXIuaXNG\naW5hbChtb2RzKSkKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwoKICAgICAg\nICAgICAgbmFtZSA9IGdldEZpZWxkTmFtZShtZW1iZXJzW2ldKTsKICAgICAg\nICAgICAgaWYgKG5hbWUgPT0gbnVsbCB8fCBpc1Jlc2VydmVkRmllbGROYW1l\nKG5hbWUpKQogICAgICAgICAgICAgICAgY29udGludWU7CgogICAgICAgICAg\nICBkZWYgPSBpc0RlZmF1bHRQZXJzaXN0ZW50KG1ldGEsIG1lbWJlcnNbaV0s\nIG5hbWUpOwogICAgICAgICAgICBpZiAoIWRlZiAmJiBfaWdub3JlKQogICAg\nICAgICAgICAgICAgY29udGludWU7CgogICAgICAgICAgICAvLyBwYXNzZWQg\ndGhlIHRlc3RzOyBwZXJzaXN0ZW50IHR5cGUgLS0gd2UgY29uc3RydWN0IHdp\ndGgKICAgICAgICAgICAgLy8gT2JqZWN0LmNsYXNzIGJlY2F1c2Ugc2V0dGlu\nZyBiYWNraW5nIG1lbWJlciB3aWxsIHNldCBwcm9wZXIKICAgICAgICAgICAg\nLy8gdHlwZSBhbnl3YXkKICAgICAgICAgICAgZm1kID0gbWV0YS5hZGREZWNs\nYXJlZEZpZWxkKG5hbWUsIE9iamVjdC5jbGFzcyk7CiAgICAgICAgICAgIGZt\nZC5iYWNraW5nTWVtYmVyKG1lbWJlcnNbaV0pOwogICAgICAgICAgICBpZiAo\nIWRlZikgewogICAgICAgICAgICAgICAgZm1kLnNldEV4cGxpY2l0KHRydWUp\nOwogICAgICAgICAgICAgICAgZm1kLnNldE1hbmFnZW1lbnQoRmllbGRNZXRh\nRGF0YS5NQU5BR0VfTk9ORSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAg\ncG9wdWxhdGUoZm1kKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAg\nKiBSZXR1cm4gdGhlIGFjY2VzcyB0eXBlIG9mIHRoZSBnaXZlbiBtZXRhZGF0\nYS4gTWF5IGJlIGEgYml0d2lzZQogICAgICogY29tYmluYXRpb24gb2YgZmll\nbGQgYW5kIHByb3BlcnR5IGFjY2VzcyBjb25zdGFudHMsIG9yIEFDQ0VTU19V\nTktOT1dOLgogICAgICogUmV0dXJucyBBQ0NFU1NfRklFTEQgYnkgZGVmYXVs\ndC4KICAgICAqLwogICAgcHJvdGVjdGVkIGludCBnZXRBY2Nlc3NUeXBlKENs\nYXNzTWV0YURhdGEgbWV0YSkgewogICAgICAgIHJldHVybiBDbGFzc01ldGFE\nYXRhLkFDQ0VTU19GSUVMRDsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVy\nbiB0aGUgZmllbGQgbmFtZSBmb3IgdGhlIGdpdmVuIG1lbWJlci4gVGhpcyB3\naWxsIG9ubHkgYmUgaW52b2tlZAogICAgICogb24gbWVtYmVycyBvZiB0aGUg\ncmlnaHQgdHlwZSAoZmllbGQgdnMuIG1ldGhvZCkuIFJldHVybiBudWxsIGlm\nIHRoZQogICAgICogbWVtYmVyIGNhbm5vdCBiZSBtYW5hZ2VkLiBEZWZhdWx0\nIGJlaGF2aW9yOiBGb3IgZmllbGRzLCByZXR1cm5zIHRoZQogICAgICogZmll\nbGQgbmFtZS4gRm9yIGdldHRlciBtZXRob2RzLCByZXR1cm5zIHRoZSBtaW51\ncyAiZ2V0IiBvciAiaXMiIHdpdGgKICAgICAqIHRoZSBuZXh0IGxldHRlciBs\nb3dlci1jYXNlZC4gRm9yIG90aGVyIG1ldGhvZHMsIHJldHVybnMgbnVsbC4K\nICAgICAqLwogICAgcHJvdGVjdGVkIFN0cmluZyBnZXRGaWVsZE5hbWUoTWVt\nYmVyIG1lbWJlcikgewogICAgICAgIGlmIChtZW1iZXIgaW5zdGFuY2VvZiBG\naWVsZCkKICAgICAgICAgICAgcmV0dXJuIG1lbWJlci5nZXROYW1lKCk7Cgog\nICAgICAgIE1ldGhvZCBtZXRoID0gKE1ldGhvZCkgbWVtYmVyOwogICAgICAg\nIGlmIChtZXRoLmdldFJldHVyblR5cGUoKSA9PSB2b2lkLmNsYXNzCiAgICAg\nICAgICAgIHx8IG1ldGguZ2V0UGFyYW1ldGVyVHlwZXMoKS5sZW5ndGggIT0g\nMCkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CgogICAgICAgIFN0cmluZyBu\nYW1lID0gbWV0aC5nZXROYW1lKCk7CiAgICAgICAgaWYgKG5hbWUuc3RhcnRz\nV2l0aCgiZ2V0IikgJiYgbmFtZS5sZW5ndGgoKSA+IDMpCiAgICAgICAgICAg\nIG5hbWUgPSBuYW1lLnN1YnN0cmluZygzKTsKICAgICAgICBlbHNlIGlmICgo\nbWV0aC5nZXRSZXR1cm5UeXBlKCkgPT0gYm9vbGVhbi5jbGFzcwogICAgICAg\nICAgICB8fCBtZXRoLmdldFJldHVyblR5cGUoKSA9PSBCb29sZWFuLmNsYXNz\nKQogICAgICAgICAgICAmJiBuYW1lLnN0YXJ0c1dpdGgoImlzIikgJiYgbmFt\nZS5sZW5ndGgoKSA+IDIpCiAgICAgICAgICAgIG5hbWUgPSBuYW1lLnN1YnN0\ncmluZygyKTsKICAgICAgICBlbHNlCiAgICAgICAgICAgIHJldHVybiBudWxs\nOwoKICAgICAgICBpZiAobmFtZS5sZW5ndGgoKSA9PSAxKQogICAgICAgICAg\nICByZXR1cm4gbmFtZS50b0xvd2VyQ2FzZSgpOwogICAgICAgIHJldHVybiBD\naGFyYWN0ZXIudG9Mb3dlckNhc2UobmFtZS5jaGFyQXQoMCkpICsgbmFtZS5z\ndWJzdHJpbmcoMSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRy\ndWUgaWYgdGhlIGdpdmVuIGZpZWxkIG5hbWUgaXMgcmVzZXJ2ZWQgZm9yIHVu\nbWFuYWdlZCBmaWVsZHMuCiAgICAgKi8KICAgIHByb3RlY3RlZCBib29sZWFu\nIGlzUmVzZXJ2ZWRGaWVsZE5hbWUoU3RyaW5nIG5hbWUpIHsKICAgICAgICAv\nLyBuYW1lcyB1c2VkIGJ5IGVuaGFuY2VycwogICAgICAgIHJldHVybiBuYW1l\nLnN0YXJ0c1dpdGgoIm9wZW5qcGEiKSB8fCBuYW1lLnN0YXJ0c1dpdGgoImpk\nbyIpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRydWUgaWYgdGhl\nIGdpdmVuIG1lbWJlciBpcyBwZXJzaXN0ZW50IGJ5IGRlZmF1bHQuIFRoaXMg\nd2lsbAogICAgICogb25seSBiZSBpbnZva2VkIG9uIG1lbWJlcnMgb2YgdGhl\nIHJpZ2h0IHR5cGUgKGZpZWxkIHZzLiBtZXRob2QpLgogICAgICogUmV0dXJu\ncyBmYWxzZSBpZiBtZW1iZXIgaXMgc3RhdGljIG9yIGZpbmFsIGJ5IGRlZmF1\nbHQuCiAgICAgKgogICAgICogQHBhcmFtIG5hbWUgdGhlIGZpZWxkIG5hbWUg\nZnJvbSB7QGxpbmsgI2dldEZpZWxkTmFtZX0KICAgICAqLwogICAgcHJvdGVj\ndGVkIGFic3RyYWN0IGJvb2xlYW4gaXNEZWZhdWx0UGVyc2lzdGVudChDbGFz\nc01ldGFEYXRhIG1ldGEsCiAgICAgICAgTWVtYmVyIG1lbWJlciwgU3RyaW5n\nIG5hbWUpOwoKICAgIHB1YmxpYyBNZW1iZXIgZ2V0QmFja2luZ01lbWJlcihG\naWVsZE1ldGFEYXRhIGZtZCkgewogICAgICAgIGlmIChmbWQgPT0gbnVsbCkK\nICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgLy8jIyMgbm90ZSB0aGF0IHdlIG1pZ2h0IG5vdCBoYXZlIGFjY2Vz\ncyB0byBkZWNsYXJpbmcgbWV0YWRhdGEgeWV0CiAgICAgICAgICAgIC8vIyMj\nICh0aGlzIGNvdWxkIGJlIHVzZWQgZHVyaW5nIHBhcnNlKSwgc28gd2UgaGF2\nZSB0byBzZXR0bGUgZm9yCiAgICAgICAgICAgIC8vIyMjIGRlZmluaW5nLiAg\nY291bGQgY2F1c2UgcHJvYmxlbXMgaWYgbWFwcyBhIHN1cGVyY2xhc3MgZmll\nbGQKICAgICAgICAgICAgLy8jIyMgd2hlcmUgdGhlIHN1cGVyY2xhc3MgdXNl\ncyBhIGRpZmZlcmVudCBhY2Nlc3MgdHlwZQogICAgICAgICAgICBpZiAoZm1k\nLmdldERlZmluaW5nTWV0YURhdGEoKS5nZXRBY2Nlc3NUeXBlKCkgPT0KICAg\nICAgICAgICAgICAgIENsYXNzTWV0YURhdGEuQUNDRVNTX0ZJRUxEKQogICAg\nICAgICAgICAgICAgcmV0dXJuIChGaWVsZCkgQWNjZXNzQ29udHJvbGxlci5k\nb1ByaXZpbGVnZWQoCiAgICAgICAgICAgICAgICAgICAgSjJEb1ByaXZIZWxw\nZXIuZ2V0RGVjbGFyZWRGaWVsZEFjdGlvbigKICAgICAgICAgICAgICAgICAg\nICAgICAgZm1kLmdldERlY2xhcmluZ1R5cGUoKSwgZm1kLmdldE5hbWUoKSkp\nOyAKICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3Rpb24uZmluZEdldHRlcihm\nbWQuZ2V0RGVjbGFyaW5nVHlwZSgpLCBmbWQuZ2V0TmFtZSgpLAogICAgICAg\nICAgICAgICAgdHJ1ZSk7CiAgICAgICAgfSBjYXRjaCAoT3BlbkpQQUV4Y2Vw\ndGlvbiBrZSkgewogICAgICAgICAgICB0aHJvdyBrZTsKICAgICAgICB9IGNh\ndGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBpZiAoZSBpbnN0YW5j\nZW9mIFByaXZpbGVnZWRBY3Rpb25FeGNlcHRpb24pCiAgICAgICAgICAgICAg\nICBlID0gKChQcml2aWxlZ2VkQWN0aW9uRXhjZXB0aW9uKSBlKS5nZXRFeGNl\ncHRpb24oKTsKICAgICAgICAgICAgdGhyb3cgbmV3IEludGVybmFsRXhjZXB0\naW9uKGUpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgQ2xhc3MgZ2V0\nVW5pbXBsZW1lbnRlZEV4Y2VwdGlvblR5cGUoKSB7CiAgICAgICAgcmV0dXJu\nIFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uLmNsYXNzOwogICAgfQoK\nICAgIC8qKgogICAgICogSGVscGVyIG1ldGhvZDsgcmV0dXJucyB0cnVlIGlm\nIHRoZSBnaXZlbiBjbGFzcyBhcHBlYXJzIHRvIGJlCiAgICAgKiB1c2VyLWRl\nZmluZWQuCiAgICAgKi8KICAgIHByb3RlY3RlZCBzdGF0aWMgYm9vbGVhbiBp\nc1VzZXJEZWZpbmVkKENsYXNzIGNscykgewogICAgICAgIHJldHVybiBjbHMg\nIT0gbnVsbCAmJiAhY2xzLmdldE5hbWUoKS5zdGFydHNXaXRoKCJqYXZhLiIp\nCiAgICAgICAgICAgICYmICFjbHMuZ2V0TmFtZSgpLnN0YXJ0c1dpdGggKCJq\nYXZheC4iKTsKCX0KfQo=\n","encoding":"base64"}

