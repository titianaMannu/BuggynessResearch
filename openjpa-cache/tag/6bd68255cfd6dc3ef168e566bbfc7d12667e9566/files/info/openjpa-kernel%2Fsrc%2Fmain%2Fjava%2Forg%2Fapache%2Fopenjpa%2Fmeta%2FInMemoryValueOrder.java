{"sha":"a06e5a9acc3387401e722419ed1dc0c3a1201945","node_id":"MDQ6QmxvYjIwNjM2NDphMDZlNWE5YWNjMzM4NzQwMWU3MjI0MTllZDFkYzBjM2ExMjAxOTQ1","size":3839,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/a06e5a9acc3387401e722419ed1dc0c3a1201945","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YTsKCmltcG9ydCBqYXZh\nLnV0aWwuQ29tcGFyYXRvcjsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nZW5oYW5jZS5QZXJzaXN0ZW5jZUNhcGFibGU7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEua2VybmVsLk9wZW5KUEFTdGF0ZU1hbmFnZXI7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEudXRpbC5BcHBsaWNhdGlvbklkczsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLkltcGxIZWxwZXI7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuY29uZi5PcGVuSlBBQ29uZmlndXJhdGlvbjsK\nCi8qKgogKiBPcmRlciBieSB0aGUgZmllbGQgdmFsdWUgaW4gbWVtb3J5LiBJ\nZiB0aGUgZmllbGQgY29udGFpbnMKICoge0BsaW5rIFBlcnNpc3RlbmNlQ2Fw\nYWJsZX0gb2JqZWN0cywgb3JkZXIgb24gdGhlaXIgcHJpbWFyeSBrZXkgdmFs\ndWVzLgogKiBSZWxpZXMgb24gcHJpbWFyeSBrZXkgdmFsdWVzLCBpbmNsdWRp\nbmcgZGF0YXN0b3JlIG9pZCBvYmplY3RzLCBiZWluZwogKiB7QGxpbmsgQ29t\ncGFyYWJsZX0uCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqLwpjbGFzcyBJ\nbk1lbW9yeVZhbHVlT3JkZXIKICAgIGltcGxlbWVudHMgT3JkZXIsIENvbXBh\ncmF0b3IgewoKICAgIHByaXZhdGUgZmluYWwgYm9vbGVhbiBfYXNjOwogICAg\ncHJpdmF0ZSBmaW5hbCBPcGVuSlBBQ29uZmlndXJhdGlvbiBfY29uZjsKCiAg\nICBwdWJsaWMgSW5NZW1vcnlWYWx1ZU9yZGVyKGJvb2xlYW4gYXNjLCBPcGVu\nSlBBQ29uZmlndXJhdGlvbiBjb25mKSB7CiAgICAgICAgX2FzYyA9IGFzYzsK\nICAgICAgICBfY29uZiA9IGNvbmY7CiAgICB9CgogICAgcHVibGljIFN0cmlu\nZyBnZXROYW1lKCkgewogICAgICAgIHJldHVybiBPcmRlci5FTEVNRU5UOwog\nICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGlzQXNjZW5kaW5nKCkgewogICAg\nICAgIHJldHVybiBfYXNjOwogICAgfQoKICAgIHB1YmxpYyBDb21wYXJhdG9y\nIGdldENvbXBhcmF0b3IoKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9\nCgogICAgcHVibGljIGludCBjb21wYXJlKE9iamVjdCBvMSwgT2JqZWN0IG8y\nKSB7CiAgICAgICAgaWYgKG8xID09IG8yKQogICAgICAgICAgICByZXR1cm4g\nMDsKICAgICAgICBpZiAobzEgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJu\nIChfYXNjKSA/IC0xIDogMTsKICAgICAgICBpZiAobzIgPT0gbnVsbCkKICAg\nICAgICAgICAgcmV0dXJuIChfYXNjKSA/IDEgOiAtMTsKCiAgICAgICAgLy8g\nbm9uLXBjIHZhbHVlcyBtdXN0IGJlIGNvbXBhcmFibGUKICAgICAgICBpbnQg\nY21wOwogICAgICAgIGlmICghKEltcGxIZWxwZXIuaXNNYW5hZ2VhYmxlKG8x\nKSkKICAgICAgICAgICAgfHwgIShJbXBsSGVscGVyLmlzTWFuYWdlYWJsZShv\nMikpKSB7CiAgICAgICAgICAgIGNtcCA9ICgoQ29tcGFyYWJsZSkgbzEpLmNv\nbXBhcmVUbyhvMik7CiAgICAgICAgICAgIHJldHVybiAoX2FzYykgPyBjbXAg\nOiAtY21wOwogICAgICAgIH0KCiAgICAgICAgLy8gb3JkZXIgb24gcHJpbWFy\neSBrZXkgdmFsdWVzCiAgICAgICAgUGVyc2lzdGVuY2VDYXBhYmxlIHBjMSA9\nIEltcGxIZWxwZXIudG9QZXJzaXN0ZW5jZUNhcGFibGUobzEsIF9jb25mKTsK\nICAgICAgICBQZXJzaXN0ZW5jZUNhcGFibGUgcGMyID0gSW1wbEhlbHBlci50\nb1BlcnNpc3RlbmNlQ2FwYWJsZShvMiwgX2NvbmYpOwogICAgICAgIE9wZW5K\nUEFTdGF0ZU1hbmFnZXIgc20xID0gKE9wZW5KUEFTdGF0ZU1hbmFnZXIpIHBj\nMS5wY0dldFN0YXRlTWFuYWdlcigpOwogICAgICAgIE9wZW5KUEFTdGF0ZU1h\nbmFnZXIgc20yID0gKE9wZW5KUEFTdGF0ZU1hbmFnZXIpIHBjMi5wY0dldFN0\nYXRlTWFuYWdlcigpOwogICAgICAgIGlmIChzbTEgPT0gbnVsbCB8fCBzbTIg\nPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIDA7CgogICAgICAgIE9iamVj\ndFtdIHBrMSA9IHRvUEtWYWx1ZXMoc20xKTsKICAgICAgICBPYmplY3RbXSBw\nazIgPSB0b1BLVmFsdWVzKHNtMik7CiAgICAgICAgaW50IGxlbiA9IE1hdGgu\nbWluKHBrMS5sZW5ndGgsIHBrMi5sZW5ndGgpOwogICAgICAgIGZvciAoaW50\nIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgICAgaWYgKHBrMVtp\nXSA9PSBwazJbaV0pCiAgICAgICAgICAgICAgICByZXR1cm4gMDsKICAgICAg\nICAgICAgaWYgKHBrMVtpXSA9PSBudWxsKQogICAgICAgICAgICAgICAgcmV0\ndXJuIChfYXNjKSA/IC0xIDogMTsKICAgICAgICAgICAgaWYgKHBrMltpXSA9\nPSBudWxsKQogICAgICAgICAgICAgICAgcmV0dXJuIChfYXNjKSA/IDEgOiAt\nMTsKICAgICAgICAgICAgY21wID0gKChDb21wYXJhYmxlKSBwazFbaV0pLmNv\nbXBhcmVUbyhwazJbaV0pOwogICAgICAgICAgICBpZiAoY21wICE9IDApCiAg\nICAgICAgICAgICAgICByZXR1cm4gKF9hc2MpID8gY21wIDogLWNtcDsKICAg\nICAgICB9CgogICAgICAgIGNtcCA9IHBrMS5sZW5ndGggLSBwazIubGVuZ3Ro\nOwogICAgICAgIHJldHVybiAoX2FzYykgPyBjbXAgOiAtY21wOwogICAgfQoK\nICAgIC8qKgogICAgICogQ29udmVydCB0aGUgZ2l2ZW4gc3RhdGUgbWFuYWdl\ncidzIG9pZCB0byBhbiBhcnJheSBvZiAocG9zc2libHkgbnVsbCkKICAgICAq\nIHByaW1hcnkga2V5IHZhbHVlcy4KICAgICAqLwogICAgcHJpdmF0ZSBzdGF0\naWMgT2JqZWN0W10gdG9QS1ZhbHVlcyhPcGVuSlBBU3RhdGVNYW5hZ2VyIHNt\nKSB7CiAgICAgICAgaWYgKHNtLmdldE1ldGFEYXRhKCkuZ2V0SWRlbnRpdHlU\neXBlKCkgIT0gQ2xhc3NNZXRhRGF0YS5JRF9BUFBMSUNBVElPTikKICAgICAg\nICAgICAgcmV0dXJuIG5ldyBPYmplY3RbXXsgc20uZ2V0T2JqZWN0SWQoKSB9\nOwoKICAgICAgICBPYmplY3RbXSBwa3MgPSBBcHBsaWNhdGlvbklkcy50b1BL\nVmFsdWVzKHNtLmdldE9iamVjdElkKCksCiAgICAgICAgICAgIHNtLmdldE1l\ndGFEYXRhKCkpOwogICAgICAgIGlmIChwa3MgPT0gbnVsbCkKICAgICAgICAg\nICAgcGtzID0gbmV3IE9iamVjdFtdeyBudWxsIH07CiAgICAgICAgcmV0dXJu\nIHBrczsKICAgIH0KfQo=\n","encoding":"base64"}

