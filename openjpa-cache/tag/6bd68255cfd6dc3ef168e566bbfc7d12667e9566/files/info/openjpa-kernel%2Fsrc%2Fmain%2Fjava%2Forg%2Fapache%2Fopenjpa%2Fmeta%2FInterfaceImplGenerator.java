{"sha":"e67ef031b62931e5aa9bb6e1ea410772e91eca8e","node_id":"MDQ6QmxvYjIwNjM2NDplNjdlZjAzMWI2MjkzMWU1YWE5YmI2ZTFlYTQxMDc3MmU5MWVjYThl","size":8796,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/e67ef031b62931e5aa9bb6e1ea410772e91eca8e","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YTsKCmltcG9ydCBqYXZh\nLmxhbmcucmVmbGVjdC5NZXRob2Q7CmltcG9ydCBqYXZhLmlvLkJ5dGVBcnJh\neUlucHV0U3RyZWFtOwppbXBvcnQgamF2YS5zZWN1cml0eS5BY2Nlc3NDb250\ncm9sbGVyOwppbXBvcnQgamF2YS5zZWN1cml0eS5Qcml2aWxlZ2VkQWN0aW9u\nRXhjZXB0aW9uOwppbXBvcnQgamF2YS51dGlsLlNldDsKaW1wb3J0IGphdmEu\ndXRpbC5IYXNoU2V0OwppbXBvcnQgamF2YS51dGlsLk1hcDsKaW1wb3J0IGph\ndmEudXRpbC5XZWFrSGFzaE1hcDsKCmltcG9ydCBvcmcuYXBhY2hlLmNvbW1v\nbnMubGFuZy5TdHJpbmdVdGlsczsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5lbmhhbmNlLlBDRW5oYW5jZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEudXRpbC5JbnRlcm5hbEV4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIudXRpbC5KMkRvUHJpdkhlbHBlcjsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6ZXI7CmltcG9ydCBzZXJw\nLmJ5dGVjb2RlLkJDQ2xhc3M7CmltcG9ydCBzZXJwLmJ5dGVjb2RlLkJDQ2xh\nc3NMb2FkZXI7CmltcG9ydCBzZXJwLmJ5dGVjb2RlLkJDRmllbGQ7CmltcG9y\ndCBzZXJwLmJ5dGVjb2RlLkJDTWV0aG9kOwppbXBvcnQgc2VycC5ieXRlY29k\nZS5Db2RlOwppbXBvcnQgc2VycC5ieXRlY29kZS5Db25zdGFudHM7CmltcG9y\ndCBzZXJwLmJ5dGVjb2RlLlByb2plY3Q7CgovKioKICogQ3JlYXRlcyBpbXBs\nZW1lbnRhdGlvbnMgb2YgbWFuYWdlZCBpbnRlcmZhY2VzLiAgV2lsbCB0aHJv\ndyBleGNlcHRpb25zCiAqIG9uIHVua25vd24gcHJvcGVydGllcy4KICoKICog\nQGF1dGhvciBTdGV2ZSBLaW0KICovCmNsYXNzIEludGVyZmFjZUltcGxHZW5l\ncmF0b3IgewogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9jYWxpemVyIF9s\nb2MgPSBMb2NhbGl6ZXIuZm9yUGFja2FnZQogICAgICAgIChJbnRlcmZhY2VJ\nbXBsR2VuZXJhdG9yLmNsYXNzKTsKICAgIHByaXZhdGUgc3RhdGljIGZpbmFs\nIFN0cmluZyBQT1NURklYID0gIm9wZW5qcGFpbXBsIjsKCiAgICBwcml2YXRl\nIGZpbmFsIE1ldGFEYXRhUmVwb3NpdG9yeSBfcmVwb3M7CiAgICBwcml2YXRl\nIGZpbmFsIE1hcCBfaW1wbHMgPSBuZXcgV2Vha0hhc2hNYXAoKTsKICAgIHBy\naXZhdGUgZmluYWwgUHJvamVjdCBfcHJvamVjdCA9IG5ldyBQcm9qZWN0KCk7\nCiAKICAgIC8vIGRpc3RpbmN0IHByb2plY3QgLyBsb2FkZXIgZm9yIGVuaGFu\nY2VkIHZlcnNpb24gb2YgY2xhc3MKICAgIHByaXZhdGUgZmluYWwgUHJvamVj\ndCBfZW5oUHJvamVjdCA9IG5ldyBQcm9qZWN0KCk7CgogICAgLyoqCiAgICAg\nKiBDb25zdHJ1Y3Rvci4gIFN1cHBseSByZXBvc2l0b3J5LgogICAgICovCiAg\nICBwdWJsaWMgSW50ZXJmYWNlSW1wbEdlbmVyYXRvcihNZXRhRGF0YVJlcG9z\naXRvcnkgcmVwb3MpIHsKICAgICAgICBfcmVwb3MgPSByZXBvczsKICAgIH0K\nCiAgICAvKioKICAgICAqIENyZWF0ZSBhIGNvbmNyZXRlIGltcGxlbWVudGF0\naW9uIG9mIHRoZSBnaXZlbiB0eXBlLCBwb3NzaWJseQogICAgICogcmV0dXJu\naW5nIGEgY2FjaGVkIHZlcnNpb24gb2YgdGhlIGNsYXNzLgogICAgICovCiAg\nICBwdWJsaWMgc3luY2hyb25pemVkIENsYXNzIGNyZWF0ZUltcGwoQ2xhc3NN\nZXRhRGF0YSBtZXRhKSB7CiAgICAgICAgQ2xhc3MgaWZhY2UgPSBtZXRhLmdl\ndERlc2NyaWJlZFR5cGUoKTsKCiAgICAgICAgLy8gY2hlY2sgY2FjaGUuCiAg\nICAgICAgQ2xhc3MgaW1wbCA9IChDbGFzcykgX2ltcGxzLmdldChpZmFjZSk7\nCiAgICAgICAgaWYgKGltcGwgIT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJu\nIGltcGw7CgogICAgICAgIENsYXNzTG9hZGVyIHBhcmVudExvYWRlciA9IChD\nbGFzc0xvYWRlcikgQWNjZXNzQ29udHJvbGxlci5kb1ByaXZpbGVnZWQoCiAg\nICAgICAgICAgIEoyRG9Qcml2SGVscGVyLmdldENsYXNzTG9hZGVyQWN0aW9u\nKGlmYWNlKSk7IAogICAgICAgIEJDQ2xhc3NMb2FkZXIgbG9hZGVyID0gKEJD\nQ2xhc3NMb2FkZXIpIEFjY2Vzc0NvbnRyb2xsZXIKICAgICAgICAgICAgLmRv\nUHJpdmlsZWdlZChKMkRvUHJpdkhlbHBlci5uZXdCQ0NsYXNzTG9hZGVyQWN0\naW9uKF9wcm9qZWN0LAogICAgICAgICAgICAgICAgcGFyZW50TG9hZGVyKSk7\nCiAgICAgICAgQkNDbGFzc0xvYWRlciBlbmhMb2FkZXIgPSAoQkNDbGFzc0xv\nYWRlcikgQWNjZXNzQ29udHJvbGxlcgogICAgICAgICAgICAuZG9Qcml2aWxl\nZ2VkKEoyRG9Qcml2SGVscGVyLm5ld0JDQ2xhc3NMb2FkZXJBY3Rpb24oX2Vu\naFByb2plY3QsCiAgICAgICAgICAgICAgICBwYXJlbnRMb2FkZXIpKTsKICAg\nICAgICBCQ0NsYXNzIGJjID0gX3Byb2plY3QubG9hZENsYXNzKGdldENsYXNz\nTmFtZShtZXRhKSk7CiAgICAgICAgYmMuZGVjbGFyZUludGVyZmFjZShpZmFj\nZSk7CiAgICAgICAgQ2xhc3NNZXRhRGF0YSBzdXAgPSBtZXRhLmdldFBDU3Vw\nZXJjbGFzc01ldGFEYXRhKCk7CiAgICAgICAgaWYgKHN1cCAhPSBudWxsKSB7\nCiAgICAgICAgICAgIGJjLnNldFN1cGVyY2xhc3Moc3VwLmdldEludGVyZmFj\nZUltcGwoKSk7CiAgICAgICAgICAgIGVuaExvYWRlciA9IChCQ0NsYXNzTG9h\nZGVyKSBBY2Nlc3NDb250cm9sbGVyCiAgICAgICAgICAgICAgICAuZG9Qcml2\naWxlZ2VkKEoyRG9Qcml2SGVscGVyLm5ld0JDQ2xhc3NMb2FkZXJBY3Rpb24o\nCiAgICAgICAgICAgICAgICAgICAgX2VuaFByb2plY3QsIChDbGFzc0xvYWRl\ncikgQWNjZXNzQ29udHJvbGxlcgogICAgICAgICAgICAgICAgICAgICAgICAu\nZG9Qcml2aWxlZ2VkKEoyRG9Qcml2SGVscGVyLmdldENsYXNzTG9hZGVyQWN0\naW9uKHN1cAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmdldEludGVy\nZmFjZUltcGwoKSkpKSk7CiAgICAgICAgfQoKICAgICAgICBGaWVsZE1ldGFE\nYXRhW10gZmllbGRzID0gbWV0YS5nZXREZWNsYXJlZEZpZWxkcygpOwogICAg\nICAgIFNldCBtZXRob2RzID0gbmV3IEhhc2hTZXQoKTsKICAgICAgICBmb3Ig\nKGludCBpID0gMDsgaSA8IGZpZWxkcy5sZW5ndGg7IGkrKykgCiAgICAgICAg\nICAgIGFkZEZpZWxkKGJjLCBpZmFjZSwgZmllbGRzW2ldLCBtZXRob2RzKTsK\nICAgICAgICBpbnZhbGlkYXRlTm9uQmVhbk1ldGhvZHMoYmMsIGlmYWNlLCBt\nZXRob2RzKTsKCiAgICAgICAgLy8gZmlyc3QgbG9hZCB0aGUgYmFzZSBjbGFz\ncyBhcyB0aGUgZW5oYW5jZXIgcmVxdWlyZXMgdGhlIGNsYXNzCiAgICAgICAg\nLy8gdG8gYmUgYXZhaWxhYmxlCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\nbWV0YS5zZXRJbnRlcmZhY2VJbXBsKENsYXNzLmZvck5hbWUoYmMuZ2V0TmFt\nZSgpLCB0cnVlLCBsb2FkZXIpKTsKICAgICAgICB9IGNhdGNoIChUaHJvd2Fi\nbGUgdCkgewogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRp\nb24oX2xvYy5nZXQoImludGVyZmFjZS1sb2FkIiwgaWZhY2UsIAogICAgICAg\nICAgICAgICAgbG9hZGVyKSwgdCkuc2V0RmF0YWwodHJ1ZSk7CiAgICAgICAg\nfQogICAgICAgIC8vIGNvcHkgdGhlIEJDQ2xhc3MgaW50byB0aGUgZW5oYW5j\nZXIgcHJvamVjdC4KICAgICAgICBiYyA9IF9lbmhQcm9qZWN0LmxvYWRDbGFz\ncyhuZXcgQnl0ZUFycmF5SW5wdXRTdHJlYW0oYmMudG9CeXRlQXJyYXkoKSks\nIAogICAgICAgICAgICBsb2FkZXIpOwogICAgICAgIFBDRW5oYW5jZXIgZW5o\nYW5jZXIgPSBuZXcgUENFbmhhbmNlcihfcmVwb3MuZ2V0Q29uZmlndXJhdGlv\nbigpLCBiYywgCiAgICAgICAgICAgIG1ldGEpOwoKICAgICAgICBpbnQgcmVz\ndWx0ID0gZW5oYW5jZXIucnVuKCk7CiAgICAgICAgaWYgKHJlc3VsdCAhPSBQ\nQ0VuaGFuY2VyLkVOSEFOQ0VfUEMpCiAgICAgICAgICAgIHRocm93IG5ldyBJ\nbnRlcm5hbEV4Y2VwdGlvbihfbG9jLmdldCgiaW50ZXJmYWNlLWJhZGVuaGFu\nY2UiLCAKICAgICAgICAgICAgICAgIGlmYWNlKSkuc2V0RmF0YWwodHJ1ZSk7\nCiAgICAgICAgdHJ5ewogICAgICAgICAgICAvLyBsb2FkIHRoZSBjbGFzcyBm\nb3IgcmVhbC4KICAgICAgICAgICAgaW1wbCA9IENsYXNzLmZvck5hbWUoYmMu\nZ2V0TmFtZSgpLCB0cnVlLCBlbmhMb2FkZXIpOwogICAgICAgIH0gY2F0Y2gg\nKFRocm93YWJsZSB0KSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbnRlcm5h\nbEV4Y2VwdGlvbihfbG9jLmdldCgiaW50ZXJmYWNlLWxvYWQyIiwgaWZhY2Us\nIAogICAgICAgICAgICAgICAgZW5oTG9hZGVyKSwgdCkuc2V0RmF0YWwodHJ1\nZSk7CiAgICAgICAgfQogICAgICAgIC8vIGNhY2hlIHRoZSBnZW5lcmF0ZWQg\naW1wbC4KICAgICAgICBfaW1wbHMucHV0KGlmYWNlLCBpbXBsKTsKICAgICAg\nICByZXR1cm4gaW1wbDsKICAgIH0KCiAgICAvKioKICAgICAqIEFkZCBiZWFu\nIGdldHRlcnMgYW5kIHNldHRlcnMsIGFsc28gcmVjb3JkaW5nIHNlZW4gbWV0\naG9kcwogICAgICogaW50byB0aGUgZ2l2ZW4gc2V0LgogICAgICovCiAgICBw\ncml2YXRlIHZvaWQgYWRkRmllbGQgKEJDQ2xhc3MgYmMsIENsYXNzIGlmYWNl\nLCBGaWVsZE1ldGFEYXRhIGZtZCwgCiAgICAgICAgU2V0IG1ldGhvZHMpIHsK\nICAgICAgICBTdHJpbmcgbmFtZSA9IGZtZC5nZXROYW1lKCk7CiAgICAgICAg\nQ2xhc3MgdHlwZSA9IGZtZC5nZXREZWNsYXJlZFR5cGUoKTsKICAgICAgICBC\nQ0ZpZWxkIGZpZWxkID0gYmMuZGVjbGFyZUZpZWxkKG5hbWUsIHR5cGUpOwog\nICAgICAgIGZpZWxkLnNldEFjY2Vzc0ZsYWdzKENvbnN0YW50cy5BQ0NFU1Nf\nUFJJVkFURSk7CgogICAgICAgIC8vIGdldHRlcgogICAgICAgIG5hbWUgPSBT\ndHJpbmdVdGlscy5jYXBpdGFsaXplKG5hbWUpOwogICAgICAgIFN0cmluZyBw\ncmVmaXggPSBpc0dldHRlcihpZmFjZSwgZm1kKSA/ICJnZXQiIDogImlzIjsK\nICAgICAgICBCQ01ldGhvZCBtZXRoID0gYmMuZGVjbGFyZU1ldGhvZChwcmVm\naXggKyBuYW1lLCB0eXBlLCBudWxsKTsKICAgICAgICBtZXRoLm1ha2VQdWJs\naWMoKTsKICAgICAgICBDb2RlIGNvZGUgPSBtZXRoLmdldENvZGUodHJ1ZSk7\nCiAgICAgICAgY29kZS5hbG9hZCgpLnNldFRoaXMoKTsKICAgICAgICBjb2Rl\nLmdldGZpZWxkKCkuc2V0RmllbGQoZmllbGQpOwogICAgICAgIGNvZGUueHJl\ndHVybigpLnNldFR5cGUodHlwZSk7CiAgICAgICAgY29kZS5jYWxjdWxhdGVN\nYXhTdGFjaygpOwogICAgICAgIGNvZGUuY2FsY3VsYXRlTWF4TG9jYWxzKCk7\nCiAgICAgICAgbWV0aG9kcy5hZGQoZ2V0TWV0aG9kU2FmZShpZmFjZSwgbWV0\naC5nZXROYW1lKCksIG51bGwpKTsKCiAgICAgICAgLy8gc2V0dGVyCiAgICAg\nICAgbWV0aCA9IGJjLmRlY2xhcmVNZXRob2QoInNldCIgKyBuYW1lLCB2b2lk\nLmNsYXNzLCBuZXcgQ2xhc3NbXXt0eXBlfSk7CiAgICAgICAgbWV0aC5tYWtl\nUHVibGljKCk7CiAgICAgICAgY29kZSA9IG1ldGguZ2V0Q29kZSh0cnVlKTsK\nICAgICAgICBjb2RlLmFsb2FkKCkuc2V0VGhpcygpOwogICAgICAgIGNvZGUu\neGxvYWQoKS5zZXRQYXJhbSgwKS5zZXRUeXBlKHR5cGUpOwogICAgICAgIGNv\nZGUucHV0ZmllbGQoKS5zZXRGaWVsZChmaWVsZCk7CiAgICAgICAgY29kZS52\ncmV0dXJuKCk7CiAgICAgICAgY29kZS5jYWxjdWxhdGVNYXhTdGFjaygpOwog\nICAgICAgIGNvZGUuY2FsY3VsYXRlTWF4TG9jYWxzKCk7CiAgICAgICAgbWV0\naG9kcy5hZGQoZ2V0TWV0aG9kU2FmZShpZmFjZSwgbWV0aC5nZXROYW1lKCks\nIHR5cGUpKTsKICAgIH0KCiAgICAvKioKICAgICAqIEludmFsaWRhdGUgbWV0\naG9kcyBvbiB0aGUgaW50ZXJmYWNlIHdoaWNoIGFyZSBub3QgbWFuYWdlZC4K\nICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIGludmFsaWRhdGVOb25CZWFuTWV0\naG9kcyhCQ0NsYXNzIGJjLCBDbGFzcyBpZmFjZSwgCiAgICAgICAgU2V0IG1l\ndGhvZHMpIHsKICAgICAgICBNZXRob2RbXSBtZXRocyA9IChNZXRob2RbXSkg\nQWNjZXNzQ29udHJvbGxlci5kb1ByaXZpbGVnZWQoCiAgICAgICAgICAgIEoy\nRG9Qcml2SGVscGVyLmdldERlY2xhcmVkTWV0aG9kc0FjdGlvbihpZmFjZSkp\nOyAKICAgICAgICBCQ01ldGhvZCBtZXRoOwogICAgICAgIENvZGUgY29kZTsK\nICAgICAgICBDbGFzcyB0eXBlID0gX3JlcG9zLmdldE1ldGFEYXRhRmFjdG9y\neSgpLmdldERlZmF1bHRzKCkuCiAgICAgICAgICAgIGdldFVuaW1wbGVtZW50\nZWRFeGNlcHRpb25UeXBlKCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkg\nPCBtZXRocy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAobWV0aG9k\ncy5jb250YWlucyhtZXRoc1tpXSkpCiAgICAgICAgICAgICAgICBjb250aW51\nZTsKICAgICAgICAgICAgbWV0aCA9IGJjLmRlY2xhcmVNZXRob2QobWV0aHNb\naV0uZ2V0TmFtZSgpLCAKICAgICAgICAgICAgICAgIG1ldGhzW2ldLmdldFJl\ndHVyblR5cGUoKSwgbWV0aHNbaV0uZ2V0UGFyYW1ldGVyVHlwZXMoKSk7CiAg\nICAgICAgICAgIG1ldGgubWFrZVB1YmxpYygpOwogICAgICAgICAgICBjb2Rl\nID0gbWV0aC5nZXRDb2RlKHRydWUpOwogICAgICAgICAgICBjb2RlLmFuZXco\nKS5zZXRUeXBlKHR5cGUpOwogICAgICAgICAgICBjb2RlLmR1cCgpOwogICAg\nICAgICAgICBjb2RlLmludm9rZXNwZWNpYWwoKS5zZXRNZXRob2QodHlwZSwg\nIjxpbml0PiIsIHZvaWQuY2xhc3MsIG51bGwpOwogICAgICAgICAgICBjb2Rl\nLmF0aHJvdygpOwogICAgICAgICAgICBjb2RlLmNhbGN1bGF0ZU1heExvY2Fs\ncygpOwogICAgICAgICAgICBjb2RlLmNhbGN1bGF0ZU1heFN0YWNrKCk7CiAg\nICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIGEgdW5pcXVl\nIGNsYXNzIG5hbWUuCiAgICAgKi8KICAgIHByb3RlY3RlZCBmaW5hbCBTdHJp\nbmcgZ2V0Q2xhc3NOYW1lKENsYXNzTWV0YURhdGEgbWV0YSkgewogICAgICAg\nIENsYXNzIGlmYWNlID0gbWV0YS5nZXREZXNjcmliZWRUeXBlKCk7CiAgICAg\nICAgcmV0dXJuIGlmYWNlLmdldE5hbWUoKSArICIkIiArIFN5c3RlbS5pZGVu\ndGl0eUhhc2hDb2RlKGlmYWNlKSArIFBPU1RGSVg7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBDb252ZW5pZW5jZSBtZXRob2QgdG8gcmV0dXJuIHRoZSBnaXZl\nbiBtZXRob2QgLyBhcmcuCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGljIE1l\ndGhvZCBnZXRNZXRob2RTYWZlKENsYXNzIGlmYWNlLCBTdHJpbmcgbmFtZSwg\nQ2xhc3MgYXJnKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJu\nIChNZXRob2QpIEFjY2Vzc0NvbnRyb2xsZXIuZG9Qcml2aWxlZ2VkKAogICAg\nICAgICAgICAgICAgSjJEb1ByaXZIZWxwZXIuZ2V0RGVjbGFyZWRNZXRob2RB\nY3Rpb24oCiAgICAgICAgICAgICAgICAgICAgaWZhY2UsIG5hbWUsIGFyZyA9\nPSBudWxsID8gbnVsbCA6IG5ldyBDbGFzc1tde2FyZ30pKTsKICAgICAgICB9\nIGNhdGNoIChQcml2aWxlZ2VkQWN0aW9uRXhjZXB0aW9uIHBhZSkgewogICAg\nICAgICAgICB0aHJvdyBuZXcgSW50ZXJuYWxFeGNlcHRpb24gKF9sb2MuZ2V0\nICgiaW50ZXJmYWNlLW1pc21hdGNoIiwgbmFtZSkpOwogICAgICAgIH0KICAg\nIH0KCiAgICBwcml2YXRlIHN0YXRpYyBib29sZWFuIGlzR2V0dGVyKENsYXNz\nIGlmYWNlLCBGaWVsZE1ldGFEYXRhIGZtZCkgewogICAgICAgIGlmIChmbWQu\nZ2V0VHlwZSgpICE9IGJvb2xlYW4uY2xhc3MgJiYgZm1kLmdldFR5cGUoKSAh\nPSBCb29sZWFuLmNsYXNzKQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAg\nICAgICB0cnkgewogICAgICAgICAgICBNZXRob2QgbWV0aCA9IChNZXRob2Qp\nIEFjY2Vzc0NvbnRyb2xsZXIuZG9Qcml2aWxlZ2VkKAogICAgICAgICAgICAg\nICAgSjJEb1ByaXZIZWxwZXIuZ2V0RGVjbGFyZWRNZXRob2RBY3Rpb24oaWZh\nY2UsICJpcyIgKwogICAgICAgICAgICAgICAgICAgIFN0cmluZ1V0aWxzLmNh\ncGl0YWxpemUoZm1kLmdldE5hbWUoKSksIChDbGFzc1tdKSBudWxsKSk7CiAg\nICAgICAgICAgIHJldHVybiBtZXRoID09IG51bGw7CiAgICAgICAgfSBjYXRj\naCAoUHJpdmlsZWdlZEFjdGlvbkV4Y2VwdGlvbiBwYWUpIHt9CiAgICAgICAg\ncmV0dXJuIHRydWU7CiAgICB9Cn0K\n","encoding":"base64"}

