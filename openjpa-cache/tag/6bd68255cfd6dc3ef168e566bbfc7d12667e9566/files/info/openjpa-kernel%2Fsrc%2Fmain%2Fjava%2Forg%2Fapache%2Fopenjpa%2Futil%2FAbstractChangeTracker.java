{"sha":"d7ec2d10fc3e2f8d5dddf66dd260936046c72ff8","node_id":"MDQ6QmxvYjIwNjM2NDpkN2VjMmQxMGZjM2UyZjhkNWRkZGY2NmRkMjYwOTM2MDQ2YzcyZmY4","size":6190,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/d7ec2d10fc3e2f8d5dddf66dd260936046c72ff8","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbDsKCmltcG9ydCBqYXZh\nLnV0aWwuQ29sbGVjdGlvbjsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9u\nczsKaW1wb3J0IGphdmEudXRpbC5IYXNoU2V0OwppbXBvcnQgamF2YS51dGls\nLklkZW50aXR5SGFzaE1hcDsKaW1wb3J0IGphdmEudXRpbC5TZXQ7CgppbXBv\ncnQgb3JnLmFwYWNoZS5jb21tb25zLmNvbGxlY3Rpb25zLnNldC5NYXBCYWNr\nZWRTZXQ7CgovKioKICogQmFzZSBjbGFzcyB0aGF0IHByb3ZpZGVzIHV0aWxp\ndGllcyB0byBjaGFuZ2UgdHJhY2tlcnMuCiAqCiAqIEBhdXRob3IgQWJlIFdo\naXRlCiAqIEBub2phdmFkb2MKICovCnB1YmxpYyBhYnN0cmFjdCBjbGFzcyBB\nYnN0cmFjdENoYW5nZVRyYWNrZXIKICAgIGltcGxlbWVudHMgQ2hhbmdlVHJh\nY2tlciB7CgogICAgLyoqCiAgICAgKiBDb2xsZWN0aW9uIG9mIGFkZGVkIGl0\nZW1zLiBNYXkgYmUgbnVsbC4KICAgICAqLwogICAgcHJvdGVjdGVkIENvbGxl\nY3Rpb24gYWRkID0gbnVsbDsKCiAgICAvKioKICAgICAqIENvbGxlY3Rpb24g\nb2YgcmVtb3ZlZCBpdGVtcy4gTWF5IGJlIG51bGwuCiAgICAgKi8KICAgIHBy\nb3RlY3RlZCBDb2xsZWN0aW9uIHJlbSA9IG51bGw7CgogICAgLyoqCiAgICAg\nKiBDb2xsZWN0aW9uIG9mIGNoYW5nZWQgaXRlbXMuIE1heSBiZSBudWxsLgog\nICAgICovCiAgICBwcm90ZWN0ZWQgQ29sbGVjdGlvbiBjaGFuZ2UgPSBudWxs\nOwoKICAgIHByaXZhdGUgYm9vbGVhbiBfYXV0b09mZiA9IHRydWU7CiAgICBw\ncml2YXRlIGJvb2xlYW4gX3RyYWNrID0gZmFsc2U7CiAgICBwcml2YXRlIEJv\nb2xlYW4gX2lkZW50aXR5ID0gbnVsbDsKICAgIHByaXZhdGUgaW50IF9zZXEg\nPSAtMTsKCiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yOyBzdXBwbHkgY29u\nZmlndXJhdGlvbi4KICAgICAqLwogICAgcHVibGljIEFic3RyYWN0Q2hhbmdl\nVHJhY2tlcigpIHsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8g\nYXV0b21hdGljYWxseSBzdG9wIHRyYWNraW5nIHdoZW4gdGhlIG51bWJlciBv\nZiBjaGFuZ2VzCiAgICAgKiBleGNlZWRzIHRoZSBjb250YWluZXIgc2l6ZS4g\nRGVmYXVsdHMgdG8gdHJ1ZS4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4g\nZ2V0QXV0b09mZigpIHsKICAgICAgICByZXR1cm4gX2F1dG9PZmY7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRvIGF1dG9tYXRpY2FsbHkgc3Rv\ncCB0cmFja2luZyB3aGVuIHRoZSBudW1iZXIgb2YgY2hhbmdlcwogICAgICog\nZXhjZWVkcyB0aGUgY29udGFpbmVyIHNpemUuIERlZmF1bHRzIHRvIHRydWUu\nCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldEF1dG9PZmYoYm9vbGVhbiBh\ndXRvT2ZmKSB7CiAgICAgICAgX2F1dG9PZmYgPSBhdXRvT2ZmOwogICAgfQoK\nICAgIHB1YmxpYyBib29sZWFuIGlzVHJhY2tpbmcoKSB7CiAgICAgICAgcmV0\ndXJuIF90cmFjazsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzdGFydFRyYWNr\naW5nKCkgewogICAgICAgIF90cmFjayA9IHRydWU7CiAgICAgICAgaWYgKF9z\nZXEgPT0gLTEpCiAgICAgICAgICAgIF9zZXEgPSBpbml0aWFsU2VxdWVuY2Uo\nKTsKICAgICAgICByZXNldCgpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0\ndXJuIHRoZSBpbml0aWFsIHNlcXVlbmNlIHZhbHVlIGZvciB0aGlzIHByb3h5\nLiBUeXBpY2FsbHkgdGhpcyBpcwogICAgICogdGhlIGNvbnRhaW5lciBzaXpl\nLiBBc3N1bWVzIGFuIHVub3JkZXJlZCBjb2xsZWN0aW9uIGJ5IGRlZmF1bHQs\nCiAgICAgKiByZXR1cm5pbmcgMC4KICAgICAqLwogICAgcHJvdGVjdGVkIGlu\ndCBpbml0aWFsU2VxdWVuY2UoKSB7CiAgICAgICAgcmV0dXJuIDA7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgc3RvcFRyYWNraW5nKCkgewogICAgICAgIF90\ncmFjayA9IGZhbHNlOwogICAgICAgIF9zZXEgPSAtMTsKICAgICAgICByZXNl\ndCgpOwogICAgfQoKICAgIC8qKgogICAgICogUmVzZXQgdGhlIHN0YXRlIG9m\nIHRoZSB0cmFja2VyLgogICAgICovCiAgICBwcm90ZWN0ZWQgdm9pZCByZXNl\ndCgpIHsKICAgICAgICBpZiAoYWRkICE9IG51bGwpCiAgICAgICAgICAgIGFk\nZC5jbGVhcigpOwogICAgICAgIGlmIChyZW0gIT0gbnVsbCkKICAgICAgICAg\nICAgcmVtLmNsZWFyKCk7CiAgICAgICAgaWYgKGNoYW5nZSAhPSBudWxsKQog\nICAgICAgICAgICBjaGFuZ2UuY2xlYXIoKTsKICAgICAgICBfaWRlbnRpdHkg\nPSBudWxsOwogICAgfQoKICAgIHB1YmxpYyBDb2xsZWN0aW9uIGdldEFkZGVk\nKCkgewogICAgICAgIHJldHVybiAoYWRkID09IG51bGwpID8gQ29sbGVjdGlv\nbnMuRU1QVFlfTElTVCA6IGFkZDsKICAgIH0KCiAgICBwdWJsaWMgQ29sbGVj\ndGlvbiBnZXRSZW1vdmVkKCkgewogICAgICAgIHJldHVybiAocmVtID09IG51\nbGwpID8gQ29sbGVjdGlvbnMuRU1QVFlfTElTVCA6IHJlbTsKICAgIH0KCiAg\nICBwdWJsaWMgQ29sbGVjdGlvbiBnZXRDaGFuZ2VkKCkgewogICAgICAgIHJl\ndHVybiAoY2hhbmdlID09IG51bGwpID8gQ29sbGVjdGlvbnMuRU1QVFlfTElT\nVCA6IGNoYW5nZTsKICAgIH0KCiAgICAvKioKICAgICAqIE5vdGlmeSB0aGUg\ndHJhY2tlciB0aGF0IHRoZSBnaXZlbiBvYmplY3Qgd2FzIGFkZGVkLgogICAg\nICovCiAgICBwcm90ZWN0ZWQgdm9pZCBhZGRlZChPYmplY3QgdmFsKSB7CiAg\nICAgICAgaWYgKCFfdHJhY2spCiAgICAgICAgICAgIHJldHVybjsKICAgICAg\nICBzZXRJZGVudGl0eSh2YWwpOwogICAgICAgIGFkZCh2YWwpOwogICAgfQoK\nICAgIC8qKgogICAgICogTWFyayB0aGUgZ2l2ZW4gdmFsdWUgYXMgYWRkZWQu\nCiAgICAgKi8KICAgIHByb3RlY3RlZCBhYnN0cmFjdCB2b2lkIGFkZChPYmpl\nY3QgdmFsKTsKCiAgICAvKioKICAgICAqIE5vdGlmeSB0aGUgdHJhY2tlciB0\naGF0IHRoZSBnaXZlbiBvYmplY3Qgd2FzIHJlbW92ZWQuCiAgICAgKi8KICAg\nIHByb3RlY3RlZCB2b2lkIHJlbW92ZWQoT2JqZWN0IHZhbCkgewogICAgICAg\nIGlmICghX3RyYWNrKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgc2V0\nSWRlbnRpdHkodmFsKTsKICAgICAgICByZW1vdmUodmFsKTsKICAgIH0KCiAg\nICAvKioKICAgICAqIE1hcmsgdGhlIGdpdmVuIHZhbHVlIGFzIHJlbW92ZWQu\nCiAgICAgKi8KICAgIHByb3RlY3RlZCBhYnN0cmFjdCB2b2lkIHJlbW92ZShP\nYmplY3QgdmFsKTsKCiAgICAvKioKICAgICAqIE5vdGlmeSB0aGUgdHJhY2tl\nciB0aGF0IHRoZSBnaXZlbiBvYmplY3Qgd2FzIGNoYW5nZWQuCiAgICAgKi8K\nICAgIHByb3RlY3RlZCB2b2lkIGNoYW5nZWQoT2JqZWN0IHZhbCkgewogICAg\nICAgIGlmICghX3RyYWNrKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAg\nc2V0SWRlbnRpdHkodmFsKTsKICAgICAgICBjaGFuZ2UodmFsKTsKICAgIH0K\nCiAgICAvKioKICAgICAqIE1hcmsgdGhlIGdpdmVuIHZhbHVlIGFzIGNoYW5n\nZWQuCiAgICAgKi8KICAgIHByb3RlY3RlZCBhYnN0cmFjdCB2b2lkIGNoYW5n\nZShPYmplY3QgdmFsKTsKCiAgICBwdWJsaWMgaW50IGdldE5leHRTZXF1ZW5j\nZSgpIHsKICAgICAgICByZXR1cm4gX3NlcTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBzZXROZXh0U2VxdWVuY2UoaW50IHNlcSkgewogICAgICAgIF9zZXEg\nPSBzZXE7CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYSBuZXcgc2V0\nIGZvciBzdG9yaW5nIGFkZHMvcmVtb3Zlcy9jaGFuZ2VzLiBUYWtlcyBpbnRv\nIGFjY291bnQKICAgICAqIHdoZXRoZXIgd2UgbmVlZCB0byB1c2UgYW4gaWRl\nbnRpdHkgc2V0IG9yIHN0YW5kYXJkIHNldC4KICAgICAqLwogICAgcHJvdGVj\ndGVkIFNldCBuZXdTZXQoKSB7CiAgICAgICAgaWYgKF9pZGVudGl0eSA9PSBC\nb29sZWFuLlRSVUUpCiAgICAgICAgICAgIHJldHVybiBNYXBCYWNrZWRTZXQu\nZGVjb3JhdGUobmV3IElkZW50aXR5SGFzaE1hcCgpKTsKICAgICAgICByZXR1\ncm4gbmV3IEhhc2hTZXQoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCB3\naGV0aGVyIHRvIHVzZSBpZGVudGl0eS1iYXNlZCBkYXRhc3RydWN0dXJlcywg\nYW5kIHN3aXRjaCBvdXIgY3VycmVudAogICAgICogZGF0YXN0cnVjdHVyZXMg\nYXBwcm9wcmlhdGVseSBpZiBuZWVkZWQuIFdlIHVzZSBpZGVudGl0eSBzdHJ1\nY3R1cmVzIGZvcgogICAgICogUEMgdHlwZXMgaW4gY2FzZSB0aGUgdXNlciBo\nYXMgY29kZWQgdGhlbSBzdWNoIHRoYXQgdHdvIG9iamVjdHMgd2l0aAogICAg\nICogZGlmZmVyZW50IGlkZW50aXRpZXMgY2FuIGNvbXBhcmUgZXF1YWxzKCku\nCiAgICAgKi8KICAgIHByaXZhdGUgdm9pZCBzZXRJZGVudGl0eShPYmplY3Qg\ndmFsKSB7CiAgICAgICAgaWYgKHZhbCA9PSBudWxsIHx8IF9pZGVudGl0eSAh\nPSBudWxsKQogICAgICAgICAgICByZXR1cm47CgogICAgICAgIGlmIChJbXBs\nSGVscGVyLmlzTWFuYWdlZFR5cGUobnVsbCwgdmFsLmdldENsYXNzKCkpKQog\nICAgICAgICAgICBfaWRlbnRpdHkgPSBCb29sZWFuLlRSVUU7CiAgICAgICAg\nZWxzZQogICAgICAgICAgICBfaWRlbnRpdHkgPSBCb29sZWFuLkZBTFNFOwoK\nICAgICAgICBhZGQgPSBzd2l0Y2hTdHJ1Y3R1cmUoYWRkLCBfaWRlbnRpdHku\nYm9vbGVhblZhbHVlKCkpOwogICAgICAgIHJlbSA9IHN3aXRjaFN0cnVjdHVy\nZShyZW0sIF9pZGVudGl0eS5ib29sZWFuVmFsdWUoKSk7CiAgICAgICAgY2hh\nbmdlID0gc3dpdGNoU3RydWN0dXJlKGNoYW5nZSwgX2lkZW50aXR5LmJvb2xl\nYW5WYWx1ZSgpKTsKICAgIH0KCiAgICAvKioKICAgICAqIFN3aXRjaCBmcm9t\nIGFuIGlkZW50aXR5IHN0cnVjdHVyZSB0byBhIHN0YW5kYXJkIG9uZSwgb3Ig\ndmljZSB2ZXJzYS4KICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgQ29sbGVj\ndGlvbiBzd2l0Y2hTdHJ1Y3R1cmUoQ29sbGVjdGlvbiBjdXIsCiAgICAgICAg\nYm9vbGVhbiBpZGVudGl0eSkgewogICAgICAgIGlmIChjdXIgPT0gbnVsbCkK\nICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKGlkZW50aXR5\nICYmIGN1ciBpbnN0YW5jZW9mIEhhc2hTZXQpIHsKICAgICAgICAgICAgaWYg\nKGN1ci5pc0VtcHR5KCkpCiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsK\nICAgICAgICAgICAgU2V0IHJlcGxhY2UgPSBNYXBCYWNrZWRTZXQuZGVjb3Jh\ndGUobmV3IElkZW50aXR5SGFzaE1hcCgpKTsKICAgICAgICAgICAgcmVwbGFj\nZS5hZGRBbGwoY3VyKTsKICAgICAgICAgICAgcmV0dXJuIHJlcGxhY2U7CiAg\nICAgICAgfQogICAgICAgIGlmICghaWRlbnRpdHkgJiYgIShjdXIgaW5zdGFu\nY2VvZiBIYXNoU2V0KSAmJiBjdXIgaW5zdGFuY2VvZiBTZXQpIHsKICAgICAg\nICAgICAgaWYgKGN1ci5pc0VtcHR5KCkpCiAgICAgICAgICAgICAgICByZXR1\ncm4gbnVsbDsKICAgICAgICAgICAgcmV0dXJuIG5ldyBIYXNoU2V0KGN1cik7\nCgkJfQoJCXJldHVybiBjdXI7Cgl9Cn0KCg==\n","encoding":"base64"}

