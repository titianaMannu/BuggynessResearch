{"sha":"2b64a4e35f7b1ea20e71bbd98c1edd4c5750e9d5","node_id":"MDQ6QmxvYjIwNjM2NDoyYjY0YTRlMzVmN2IxZWEyMGU3MWJiZDk4YzFlZGQ0YzU3NTBlOWQ1","size":4388,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/2b64a4e35f7b1ea20e71bbd98c1edd4c5750e9d5","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbDsKCmltcG9ydCBqYXZh\nLmlvLlNlcmlhbGl6YWJsZTsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nbGliLnV0aWwuUmVmZXJlbmNlTWFwOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmxpYi51dGlsLmNvbmN1cnJlbnQuQ29uY3VycmVudFJlZmVyZW5jZUhh\nc2hNYXA7CgovKioKICogSWRlbnRpdHkgY2xhc3MgZXh0ZW5kZWQgYnkgYnVp\nbHRpbiBPcGVuSlBBIGlkZW50aXR5IG9iamVjdHMuCiAqCiAqIEBhdXRob3Ig\nU3RldmUgS2ltCiAqLwpwdWJsaWMgYWJzdHJhY3QgY2xhc3MgT3BlbkpQQUlk\nCiAgICBpbXBsZW1lbnRzIENvbXBhcmFibGUsIFNlcmlhbGl6YWJsZSB7Cgog\nICAgLy8gY2FjaGUgdGhlIHR5cGVzJyBnZW5lcmF0ZWQgaGFzaGNvZGVzCiAg\nICBwcml2YXRlIHN0YXRpYyBDb25jdXJyZW50UmVmZXJlbmNlSGFzaE1hcCBf\ndHlwZUNhY2hlID0KICAgICAgICBuZXcgQ29uY3VycmVudFJlZmVyZW5jZUhh\nc2hNYXAoUmVmZXJlbmNlTWFwLldFQUssIFJlZmVyZW5jZU1hcC5IQVJEKTsK\nCiAgICBwcm90ZWN0ZWQgQ2xhc3MgdHlwZTsKICAgIHByb3RlY3RlZCBib29s\nZWFuIHN1YnMgPSB0cnVlOwoKICAgIC8vIHR5cGUgaGFzIGhpcyBiYXNlZCBv\nbiB0aGUgbGVhc3QtZGVyaXZlZCBub24tb2JqZWN0IGNsYXNzIHNvIHRoYXQK\nICAgIC8vIHVzZXItZ2l2ZW4gaWRzIHdpdGggbm9uLWV4YWN0IHR5cGVzIG1h\ndGNoIGlkcyB3aXRoIGV4YWN0IHR5cGVzCiAgICBwcml2YXRlIHRyYW5zaWVu\ndCBpbnQgX3R5cGVIYXNoID0gMDsKCiAgICBwcm90ZWN0ZWQgT3BlbkpQQUlk\nKCkgewogICAgfQoKICAgIHByb3RlY3RlZCBPcGVuSlBBSWQoQ2xhc3MgdHlw\nZSkgewogICAgICAgIHRoaXMudHlwZSA9IHR5cGU7CiAgICB9CgogICAgcHJv\ndGVjdGVkIE9wZW5KUEFJZChDbGFzcyB0eXBlLCBib29sZWFuIHN1YnMpIHsK\nICAgICAgICB0aGlzLnR5cGUgPSB0eXBlOwogICAgICAgIHRoaXMuc3VicyA9\nIHN1YnM7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIHBlcnNp\ndGVudCBjbGFzcyB3aGljaCB0aGlzIGlkIGluc3RhbmNlIHJlcHJlc2VudHMu\nCiAgICAgKi8KICAgIHB1YmxpYyBDbGFzcyBnZXRUeXBlKCkgewogICAgICAg\nIHJldHVybiB0eXBlOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciB0\naGlzIG9pZCBtaWdodCBiZSBmb3IgYSBzdWJjbGFzcyBvZiB0aGUgZ2l2ZW4g\ndHlwZS4KICAgICAqIERlZmF1bHRzIHRvIHRydWUuCiAgICAgKi8KICAgIHB1\nYmxpYyBib29sZWFuIGhhc1N1YmNsYXNzZXMoKSB7CiAgICAgICAgcmV0dXJu\nIHN1YnM7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQgdGhlIGV4YWN0IHR5\ncGUgb2YgdGhlIGRlc2NyaWJlZCBpbnN0YW5jZSBvbmNlIGl0IGlzIGtub3du\nLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRNYW5hZ2VkSW5zdGFuY2VU\neXBlKENsYXNzIHR5cGUpIHsKICAgICAgICB0aGlzLnR5cGUgPSB0eXBlOwog\nICAgICAgIHRoaXMuc3VicyA9IGZhbHNlOwogICAgfQoKICAgIC8qKgogICAg\nICogU2V0IHRoZSBleGFjdCB0eXBlIG9mIHRoZSBkZXNjcmliZWQgaW5zdGFu\nY2Ugb25jZSBpdCBpcyBrbm93bi4KICAgICAqLwogICAgcHVibGljIHZvaWQg\nc2V0TWFuYWdlZEluc3RhbmNlVHlwZShDbGFzcyB0eXBlLCBib29sZWFuIHN1\nYnMpIHsKICAgICAgICB0aGlzLnR5cGUgPSB0eXBlOwogICAgICAgIHRoaXMu\nc3VicyA9IHN1YnM7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhl\nIGlkZW50aXR5IHZhbHVlIGFzIGFuIG9iamVjdC4KICAgICAqLwogICAgcHVi\nbGljIGFic3RyYWN0IE9iamVjdCBnZXRJZE9iamVjdCgpOwoKICAgIC8qKgog\nICAgICogUmV0dXJuIHRoZSBpZCdzIGhhc2ggY29kZS4KICAgICAqLwogICAg\ncHJvdGVjdGVkIGFic3RyYWN0IGludCBpZEhhc2goKTsKCiAgICAvKioKICAg\nICAqIENvbXBhcmUgdGhlIGlkIHRvIHRoZSBpZCBvZiB0aGUgZ2l2ZW4gaW5z\ndGFuY2UuCiAgICAgKi8KICAgIHByb3RlY3RlZCBhYnN0cmFjdCBib29sZWFu\nIGlkRXF1YWxzKE9wZW5KUEFJZCBvdGhlcik7CgogICAgLyoqCiAgICAgKiBH\nZW5lcmF0ZSB0aGUgaGFzaGNvZGUgZm9yIHRoaXMgSWQuICBDYWNoZSB0aGUg\ndHlwZSdzIGdlbmVyYXRlZCBoYXNoY29kZQogICAgICogc28gdGhhdCBpdCBk\nb2Vzbid0IGhhdmUgdG8gYmUgZ2VuZXJhdGVkIGVhY2ggdGltZS4KICAgICAq\nLwogICAgcHVibGljIGludCBoYXNoQ29kZSgpIHsKICAgICAgICBpZiAoX3R5\ncGVIYXNoID09IDApIHsKICAgICAgICAgICAgSW50ZWdlciB0eXBlSGFzaElu\ndCA9IChJbnRlZ2VyKSBfdHlwZUNhY2hlLmdldCh0eXBlKTsKICAgICAgICAg\nICAgaWYgKHR5cGVIYXNoSW50ID09IG51bGwpIHsKICAgICAgICAgICAgICAg\nIENsYXNzIGJhc2UgPSB0eXBlOwogICAgICAgICAgICAgICAgQ2xhc3Mgc3Vw\nZXJjbGFzcyA9IGJhc2UuZ2V0U3VwZXJjbGFzcygpOwogICAgICAgICAgICAg\nICAgd2hpbGUgKHN1cGVyY2xhc3MgIT0gbnVsbCAmJiBzdXBlcmNsYXNzICE9\nIE9iamVjdC5jbGFzcykgewogICAgICAgICAgICAgICAgICAgIGJhc2UgPSBi\nYXNlLmdldFN1cGVyY2xhc3MoKTsKICAgICAgICAgICAgICAgICAgICBzdXBl\ncmNsYXNzID0gYmFzZS5nZXRTdXBlcmNsYXNzKCk7CiAgICAgICAgICAgICAg\nICB9CiAgICAgICAgICAgICAgICBfdHlwZUhhc2ggPSBiYXNlLmhhc2hDb2Rl\nKCk7CiAgICAgICAgICAgICAgICBfdHlwZUNhY2hlLnB1dCh0eXBlLCBuZXcg\nSW50ZWdlcihfdHlwZUhhc2gpKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAg\nICAgICAgICAgICAgIF90eXBlSGFzaCA9IHR5cGVIYXNoSW50LmludFZhbHVl\nKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIF90\neXBlSGFzaCBeIGlkSGFzaCgpOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFu\nIGVxdWFscyhPYmplY3QgbykgewogICAgICAgIGlmIChvID09IHRoaXMpCiAg\nICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIGlmIChvID09IG51bGwg\nfHwgZ2V0Q2xhc3MoKSAhPSBvLmdldENsYXNzKCkpCiAgICAgICAgICAgIHJl\ndHVybiBmYWxzZTsKCiAgICAgICAgT3BlbkpQQUlkIGlkID0gKE9wZW5KUEFJ\nZCkgbzsKICAgICAgICByZXR1cm4gaWRFcXVhbHMoaWQpICYmIChpZC50eXBl\nLmlzQXNzaWduYWJsZUZyb20odHlwZSkKICAgICAgICAgICAgfHwgKHN1YnMg\nJiYgdHlwZS5pc0Fzc2lnbmFibGVGcm9tKGlkLnR5cGUpKSk7CiAgICB9Cgog\nICAgcHVibGljIFN0cmluZyB0b1N0cmluZygpIHsKICAgICAgICByZXR1cm4g\ndHlwZS5nZXROYW1lKCkgKyAiLSIgKyBnZXRJZE9iamVjdCgpOwogICAgfQoK\nICAgIHB1YmxpYyBpbnQgY29tcGFyZVRvKE9iamVjdCBvdGhlcikgewogICAg\nICAgIGlmIChvdGhlciA9PSB0aGlzKQogICAgICAgICAgICByZXR1cm4gMDsK\nICAgICAgICBpZiAob3RoZXIgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJu\nIDE7CiAgICAgICAgcmV0dXJuICgoQ29tcGFyYWJsZSkgZ2V0SWRPYmplY3Qo\nKSkuY29tcGFyZVRvKCgoT3BlbkpQQUlkKSBvdGhlcikuCiAgICAgICAgICAg\nIGdldElkT2JqZWN0ICgpKTsKCX0KfQo=\n","encoding":"base64"}

