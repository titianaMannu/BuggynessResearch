{"sha":"b5f54cb251ee37b598e57d4f2c6118dff2655df7","node_id":"MDQ6QmxvYjIwNjM2NDpiNWY1NGNiMjUxZWUzN2I1OThlNTdkNGYyYzYxMThkZmYyNjU1ZGY3","size":14195,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/b5f54cb251ee37b598e57d4f2c6118dff2655df7","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbDsKCmltcG9ydCBqYXZh\nLnV0aWwuQ29sbGVjdGlvbjsKaW1wb3J0IGphdmEudXRpbC5Db21wYXJhdG9y\nOwppbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9yOwppbXBvcnQgamF2YS51dGls\nLkxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuTGlzdEl0ZXJhdG9yOwoKLyoqCiAq\nIFV0aWxpdHkgbWV0aG9kcyB1c2VkIGJ5IGNvbGxlY3Rpb24gcHJveGllcy4K\nICoKICogQGF1dGhvciBBYmUgV2hpdGUKICogQG5vamF2YWRvYwogKi8KcHVi\nbGljIGNsYXNzIFByb3h5Q29sbGVjdGlvbnMgCiAgICBleHRlbmRzIFByb3hp\nZXMgewoKICAgIC8qKgogICAgICogQ2FsbCBiZWZvcmUgaW52b2tpbmcge0Bs\naW5rIExpc3QjYWRkKGludCxPYmplY3QpfSBvbiBzdXBlci4KICAgICAqLwog\nICAgcHVibGljIHN0YXRpYyB2b2lkIGJlZm9yZUFkZChQcm94eUNvbGxlY3Rp\nb24gY29sbCwgaW50IGluZGV4LCBPYmplY3QgdmFsdWUpewogICAgICAgIGFz\nc2VydEFsbG93ZWRUeXBlKHZhbHVlLCBjb2xsLmdldEVsZW1lbnRUeXBlKCkp\nOwogICAgICAgIGRpcnR5KGNvbGwsIHRydWUpOwogICAgfQoKICAgIC8qKgog\nICAgICogQ2FsbCBiZWZvcmUgaW52b2tpbmcge0BsaW5rIFZlY3RvciNpbnNl\ncnRFbGVtZW50QXQoT2JqZWN0LGludCl9IG9uIHN1cGVyLgogICAgICovCiAg\nICBwdWJsaWMgc3RhdGljIHZvaWQgYmVmb3JlSW5zZXJ0RWxlbWVudEF0KFBy\nb3h5Q29sbGVjdGlvbiBjb2xsLCBPYmplY3QgdmFsdWUsCiAgICAgICAgaW50\nIGluZGV4KSB7CiAgICAgICAgYmVmb3JlQWRkKGNvbGwsIGluZGV4LCB2YWx1\nZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDYWxsIGJlZm9yZSBpbnZva2lu\nZyB7QGxpbmsgQ29sbGVjdGlvbiNhZGQoT2JqZWN0KX0gb24gc3VwZXIuCiAg\nICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBiZWZvcmVBZGQoUHJveHlD\nb2xsZWN0aW9uIGNvbGwsIE9iamVjdCB2YWx1ZSkgewogICAgICAgIGFzc2Vy\ndEFsbG93ZWRUeXBlKHZhbHVlLCBjb2xsLmdldEVsZW1lbnRUeXBlKCkpOwog\nICAgICAgIGRpcnR5KGNvbGwsIGZhbHNlKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIENhbGwgYWZ0ZXIgaW52b2tpbmcge0BsaW5rIENvbGxlY3Rpb24jYWRk\nKE9iamVjdCl9IG9uIHN1cGVyLgogICAgICoKICAgICAqIEBwYXJhbSBhZGRl\nZCB3aGV0aGVyIHRoZSBvYmplY3Qgd2FzIGFkZGVkCiAgICAgKiBAcmV0dXJu\nIDxjb2RlPmFkZGVkPC9jb2RlPiwgZm9yIGNvbnZlbmllbmNlCiAgICAgKi8K\nICAgIHB1YmxpYyBzdGF0aWMgYm9vbGVhbiBhZnRlckFkZChQcm94eUNvbGxl\nY3Rpb24gY29sbCwgT2JqZWN0IHZhbHVlLCAKICAgICAgICBib29sZWFuIGFk\nZGVkKSB7CiAgICAgICAgaWYgKGFkZGVkICYmIGNvbGwuZ2V0Q2hhbmdlVHJh\nY2tlcigpICE9IG51bGwpCiAgICAgICAgICAgICgoQ29sbGVjdGlvbkNoYW5n\nZVRyYWNrZXIpIGNvbGwuZ2V0Q2hhbmdlVHJhY2tlcigpKS5hZGRlZCh2YWx1\nZSk7CiAgICAgICAgcmV0dXJuIGFkZGVkOwogICAgfQoKICAgIC8qKgogICAg\nICogQ2FsbCBiZWZvcmUgaW52b2tpbmcge0BsaW5rIFZlY3RvciNhZGRFbGVt\nZW50KE9iamVjdCl9IG9uIHN1cGVyLgogICAgICovCiAgICBwdWJsaWMgc3Rh\ndGljIHZvaWQgYmVmb3JlQWRkRWxlbWVudChQcm94eUNvbGxlY3Rpb24gY29s\nbCwgT2JqZWN0IHZhbHVlKSB7CiAgICAgICAgYmVmb3JlQWRkKGNvbGwsIHZh\nbHVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIENhbGwgYWZ0ZXIgaW52b2tp\nbmcge0BsaW5rIFZlY3RvciNhZGRFbGVtZW50KE9iamVjdCl9IG9uIHN1cGVy\nLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgYWZ0ZXJBZGRFbGVt\nZW50KFByb3h5Q29sbGVjdGlvbiBjb2xsLCBPYmplY3QgdmFsdWUpIHsKICAg\nICAgICBhZnRlckFkZChjb2xsLCB2YWx1ZSwgdHJ1ZSk7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBDYWxsIGJlZm9yZSBpbnZva2luZyB7QGxpbmsgTGlua2Vk\nTGlzdCNhZGRGaXJzdChPYmplY3QpfSBvbiBzdXBlci4KICAgICAqLwogICAg\ncHVibGljIHN0YXRpYyB2b2lkIGJlZm9yZUFkZEZpcnN0KFByb3h5Q29sbGVj\ndGlvbiBjb2xsLCBPYmplY3QgdmFsdWUpIHsKICAgICAgICBiZWZvcmVBZGQo\nY29sbCwgMCwgdmFsdWUpOwogICAgfQoKICAgIC8qKgogICAgICogQ2FsbCBi\nZWZvcmUgaW52b2tpbmcge0BsaW5rIExpbmtlZExpc3QjYWRkTGFzdChPYmpl\nY3QpfSBvbiBzdXBlci4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyB2b2lk\nIGJlZm9yZUFkZExhc3QoUHJveHlDb2xsZWN0aW9uIGNvbGwsIE9iamVjdCB2\nYWx1ZSkgewogICAgICAgIGJlZm9yZUFkZChjb2xsLCB2YWx1ZSk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBDYWxsIGFmdGVyIGludm9raW5nIHtAbGluayBM\naW5rZWRMaXN0I2FkZExhc3QoT2JqZWN0KX0gb24gc3VwZXIuCiAgICAgKi8K\nICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBhZnRlckFkZExhc3QoUHJveHlDb2xs\nZWN0aW9uIGNvbGwsIE9iamVjdCB2YWx1ZSkgewogICAgICAgIGFmdGVyQWRk\nKGNvbGwsIHZhbHVlLCB0cnVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIENh\nbGwgYmVmb3JlIGludm9raW5nIHtAbGluayBRdWV1ZSNvZmZlcihPYmplY3Qp\nfSBvbiBzdXBlci4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyB2b2lkIGJl\nZm9yZU9mZmVyKFByb3h5Q29sbGVjdGlvbiBjb2xsLCBPYmplY3QgdmFsdWUp\nIHsKICAgICAgICBiZWZvcmVBZGQoY29sbCwgdmFsdWUpOwogICAgfQoKICAg\nIC8qKgogICAgICogQ2FsbCBhZnRlciBpbnZva2luZyB7QGxpbmsgUXVldWUj\nb2ZmZXIoT2JqZWN0KX0gb24gc3VwZXIuCiAgICAgKgogICAgICogQHBhcmFt\nIGFkZGVkIHdoZXRoZXIgdGhlIG9iamVjdCB3YXMgYWRkZWQKICAgICAqIEBy\nZXR1cm4gPGNvZGU+YWRkZWQ8L2NvZGU+LCBmb3IgY29udmVuaWVuY2UKICAg\nICAqLwogICAgcHVibGljIHN0YXRpYyBib29sZWFuIGFmdGVyT2ZmZXIoUHJv\neHlDb2xsZWN0aW9uIGNvbGwsIE9iamVjdCB2YWx1ZSwgCiAgICAgICAgYm9v\nbGVhbiBhZGRlZCkgewogICAgICAgIHJldHVybiBhZnRlckFkZChjb2xsLCB2\nYWx1ZSwgYWRkZWQpOwogICAgfQoKICAgIC8qKgogICAgICogT3ZlcnJpZGUg\nZm9yIHtAbGluayBMaXN0I2FkZEFsbChpbnQsIENvbGxlY3Rpb24pfS4KICAg\nICAqLwogICAgcHVibGljIHN0YXRpYyBib29sZWFuIGFkZEFsbChQcm94eUNv\nbGxlY3Rpb24gY29sbCwgaW50IGluZGV4LCAKICAgICAgICBDb2xsZWN0aW9u\nIHZhbHVlcykgewogICAgICAgIExpc3QgbGlzdCA9IChMaXN0KSBjb2xsOwog\nICAgICAgIGZvciAoSXRlcmF0b3IgaXRyID0gdmFsdWVzLml0ZXJhdG9yKCk7\nIGl0ci5oYXNOZXh0KCk7IGluZGV4KyspCiAgICAgICAgICAgIGxpc3QuYWRk\nKGluZGV4LCBpdHIubmV4dCgpKTsKICAgICAgICByZXR1cm4gdmFsdWVzLnNp\nemUoKSA+IDA7CiAgICB9CgogICAgLyoqCiAgICAgKiBPdmVycmlkZSBmb3Ig\ne0BsaW5rIENvbGxlY3Rpb24jYWRkQWxsfS4KICAgICAqLwogICAgcHVibGlj\nIHN0YXRpYyBib29sZWFuIGFkZEFsbChQcm94eUNvbGxlY3Rpb24gY29sbCwg\nQ29sbGVjdGlvbiB2YWx1ZXMpIHsKICAgICAgICBib29sZWFuIGFkZGVkID0g\nZmFsc2U7CiAgICAgICAgZm9yIChJdGVyYXRvciBpdHIgPSB2YWx1ZXMuaXRl\ncmF0b3IoKTsgaXRyLmhhc05leHQoKTspCiAgICAgICAgICAgIGFkZGVkIHw9\nIGNvbGwuYWRkKGl0ci5uZXh0KCkpOwogICAgICAgIHJldHVybiBhZGRlZDsK\nICAgIH0KCiAgICAvKioKICAgICAqIENhbGwgYmVmb3JlIGNsZWFyaW5nIGNv\nbGxlY3Rpb24uCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBiZWZv\ncmVDbGVhcihQcm94eUNvbGxlY3Rpb24gY29sbCkgewogICAgICAgIGRpcnR5\nKGNvbGwsIHRydWUpOwogICAgICAgIGZvciAoSXRlcmF0b3IgaXRyID0gY29s\nbC5pdGVyYXRvcigpOyBpdHIuaGFzTmV4dCgpOykKICAgICAgICAgICAgcmVt\nb3ZlZChjb2xsLCBpdHIubmV4dCgpLCBmYWxzZSk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBDYWxsIGJlZm9yZSBjbGVhcmluZyB2ZWN0b3IuCiAgICAgKi8K\nICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBiZWZvcmVSZW1vdmVBbGxFbGVtZW50\ncyhQcm94eUNvbGxlY3Rpb24gY29sbCkgewogICAgICAgIGJlZm9yZUNsZWFy\nKGNvbGwpOwogICAgfQoKICAgIC8qKgogICAgICogV3JhcCBnaXZlbiBpdGVy\nYXRvciBpbiBhIHByb3h5LgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIEl0\nZXJhdG9yIGFmdGVySXRlcmF0b3IoZmluYWwgUHJveHlDb2xsZWN0aW9uIGNv\nbGwsIAogICAgICAgIGZpbmFsIEl0ZXJhdG9yIGl0cikgewogICAgICAgIC8v\nIGNoZWNrIGZvciBwcm94aWVkOyBzb21lIGNvbGwgaW1wbHMgZGVsZWdhdGUg\naXRlcmF0b3IgbWV0aG9kcwogICAgICAgIGlmIChpdHIgaW5zdGFuY2VvZiBQ\ncm94eUl0ZXJhdG9yKQogICAgICAgICAgICByZXR1cm4gaXRyOwogICAgICAg\nIHJldHVybiBuZXcgUHJveHlJdGVyYXRvcigpIHsKICAgICAgICAgICAgcHJp\ndmF0ZSBPYmplY3QgX2xhc3QgPSBudWxsOwoKICAgICAgICAgICAgcHVibGlj\nIGJvb2xlYW4gaGFzTmV4dCgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBp\ndHIuaGFzTmV4dCgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBwdWJs\naWMgT2JqZWN0IG5leHQoKSB7CiAgICAgICAgICAgICAgICBfbGFzdCA9IGl0\nci5uZXh0KCk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2xhc3Q7CiAgICAg\nICAgICAgIH0KCiAgICAgICAgICAgIHB1YmxpYyB2b2lkIHJlbW92ZSgpIHsK\nICAgICAgICAgICAgICAgIGRpcnR5KGNvbGwsIGZhbHNlKTsKICAgICAgICAg\nICAgICAgIGl0ci5yZW1vdmUoKTsKICAgICAgICAgICAgICAgIGlmIChjb2xs\nLmdldENoYW5nZVRyYWNrZXIoKSAhPSBudWxsKQogICAgICAgICAgICAgICAg\nICAgICgoQ29sbGVjdGlvbkNoYW5nZVRyYWNrZXIpIGNvbGwuZ2V0Q2hhbmdl\nVHJhY2tlcigpKS4KICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlZChf\nbGFzdCk7CiAgICAgICAgICAgICAgICBQcm94aWVzLnJlbW92ZWQoY29sbCwg\nX2xhc3QsIGZhbHNlKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICB9\nCgogICAgLyoqCiAgICAgKiBXcmFwIGdpdmVuIGl0ZXJhdG9yIGluIGEgcHJv\neHkuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgTGlzdEl0ZXJhdG9yIGFm\ndGVyTGlzdEl0ZXJhdG9yKGZpbmFsIFByb3h5Q29sbGVjdGlvbiBjb2xsLCAK\nICAgICAgICBpbnQgaWR4LCBmaW5hbCBMaXN0SXRlcmF0b3IgaXRyKSB7CiAg\nICAgICAgcmV0dXJuIGFmdGVyTGlzdEl0ZXJhdG9yKGNvbGwsIGl0cik7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBXcmFwIGdpdmVuIGl0ZXJhdG9yIGluIGEg\ncHJveHkuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgTGlzdEl0ZXJhdG9y\nIGFmdGVyTGlzdEl0ZXJhdG9yKGZpbmFsIFByb3h5Q29sbGVjdGlvbiBjb2xs\nLCAKICAgICAgICBmaW5hbCBMaXN0SXRlcmF0b3IgaXRyKSB7CiAgICAgICAg\nLy8gY2hlY2sgZm9yIHByb3hpZWQ7IHNvbWUgY29sbCBpbXBscyBkZWxlZ2F0\nZSBpdGVyYXRvciBtZXRob2RzCiAgICAgICAgaWYgKGl0ciBpbnN0YW5jZW9m\nIFByb3h5TGlzdEl0ZXJhdG9yKQogICAgICAgICAgICByZXR1cm4gaXRyOwog\nICAgICAgIHJldHVybiBuZXcgUHJveHlMaXN0SXRlcmF0b3IoKSB7CiAgICAg\nICAgICAgIHByaXZhdGUgT2JqZWN0IF9sYXN0ID0gbnVsbDsKCiAgICAgICAg\nICAgIHB1YmxpYyBib29sZWFuIGhhc05leHQoKSB7CiAgICAgICAgICAgICAg\nICByZXR1cm4gaXRyLmhhc05leHQoKTsKICAgICAgICAgICAgfQoKICAgICAg\nICAgICAgcHVibGljIGludCBuZXh0SW5kZXgoKSB7CiAgICAgICAgICAgICAg\nICByZXR1cm4gaXRyLm5leHRJbmRleCgpOwogICAgICAgICAgICB9CgogICAg\nICAgICAgICBwdWJsaWMgT2JqZWN0IG5leHQoKSB7CiAgICAgICAgICAgICAg\nICBfbGFzdCA9IGl0ci5uZXh0KCk7CiAgICAgICAgICAgICAgICByZXR1cm4g\nX2xhc3Q7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHB1YmxpYyBib29s\nZWFuIGhhc1ByZXZpb3VzKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGl0\nci5oYXNQcmV2aW91cygpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBw\ndWJsaWMgaW50IHByZXZpb3VzSW5kZXgoKSB7CiAgICAgICAgICAgICAgICBy\nZXR1cm4gaXRyLnByZXZpb3VzSW5kZXgoKTsKICAgICAgICAgICAgfQoKICAg\nICAgICAgICAgcHVibGljIE9iamVjdCBwcmV2aW91cygpIHsKICAgICAgICAg\nICAgICAgIF9sYXN0ID0gaXRyLnByZXZpb3VzKCk7CiAgICAgICAgICAgICAg\nICByZXR1cm4gX2xhc3Q7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHB1\nYmxpYyB2b2lkIHNldChPYmplY3QgbykgewogICAgICAgICAgICAgICAgYXNz\nZXJ0QWxsb3dlZFR5cGUobywgY29sbC5nZXRFbGVtZW50VHlwZSgpKTsKICAg\nICAgICAgICAgICAgIGRpcnR5KGNvbGwsIGZhbHNlKTsKICAgICAgICAgICAg\nICAgIGl0ci5zZXQobyk7CiAgICAgICAgICAgICAgICBpZiAoY29sbC5nZXRD\naGFuZ2VUcmFja2VyKCkgIT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICBj\nb2xsLmdldENoYW5nZVRyYWNrZXIoKS5zdG9wVHJhY2tpbmcoKTsKICAgICAg\nICAgICAgICAgIFByb3hpZXMucmVtb3ZlZChjb2xsLCBfbGFzdCwgZmFsc2Up\nOwogICAgICAgICAgICAgICAgX2xhc3QgPSBvOwogICAgICAgICAgICB9Cgog\nICAgICAgICAgICBwdWJsaWMgdm9pZCBhZGQoT2JqZWN0IG8pIHsKICAgICAg\nICAgICAgICAgIGFzc2VydEFsbG93ZWRUeXBlKG8sIGNvbGwuZ2V0RWxlbWVu\ndFR5cGUoKSk7CiAgICAgICAgICAgICAgICBkaXJ0eShjb2xsLCBmYWxzZSk7\nCiAgICAgICAgICAgICAgICBpdHIuYWRkKG8pOwogICAgICAgICAgICAgICAg\naWYgKGNvbGwuZ2V0Q2hhbmdlVHJhY2tlcigpICE9IG51bGwpIHsKICAgICAg\nICAgICAgICAgICAgICBpZiAoaGFzTmV4dCgpKQogICAgICAgICAgICAgICAg\nICAgICAgICBjb2xsLmdldENoYW5nZVRyYWNrZXIoKS5zdG9wVHJhY2tpbmco\nKTsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAg\nICAgICAgICgoQ29sbGVjdGlvbkNoYW5nZVRyYWNrZXIpIGNvbGwuZ2V0Q2hh\nbmdlVHJhY2tlcigpKS4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFk\nZGVkKG8pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgX2xh\nc3QgPSBvOwogICAgICAgICAgICB9CgogICAgICAgICAgICBwdWJsaWMgdm9p\nZCByZW1vdmUoKSB7CiAgICAgICAgICAgICAgICBkaXJ0eShjb2xsLCBmYWxz\nZSk7CiAgICAgICAgICAgICAgICBpdHIucmVtb3ZlKCk7CiAgICAgICAgICAg\nICAgICBpZiAoY29sbC5nZXRDaGFuZ2VUcmFja2VyKCkgIT0gbnVsbCkKICAg\nICAgICAgICAgICAgICAgICAoKENvbGxlY3Rpb25DaGFuZ2VUcmFja2VyKSBj\nb2xsLmdldENoYW5nZVRyYWNrZXIoKSkuCiAgICAgICAgICAgICAgICAgICAg\nICAgIHJlbW92ZWQoX2xhc3QpOwogICAgICAgICAgICAgICAgUHJveGllcy5y\nZW1vdmVkKGNvbGwsIF9sYXN0LCBmYWxzZSk7CiAgICAgICAgICAgIH0KICAg\nICAgICB9OwogICAgfQoKICAgIC8qKgogICAgICogQ2FsbCBiZWZvcmUgaW52\nb2tpbmcge0BsaW5rIExpc3QjcmVtb3ZlKGludCl9IG9uIHN1cGVyLgogICAg\nICovIAogICAgcHVibGljIHN0YXRpYyB2b2lkIGJlZm9yZVJlbW92ZShQcm94\neUNvbGxlY3Rpb24gY29sbCwgaW50IGluZGV4KSB7CiAgICAgICAgZGlydHko\nY29sbCwgZmFsc2UpOwogICAgfQoKICAgIC8qKgogICAgICogQ2FsbCBhZnRl\nciBpbnZva2luZyB7QGxpbmsgTGlzdCNyZW1vdmUoaW50KX0gb24gc3VwZXIu\nCiAgICAgKgogICAgICogQHBhcmFtIHJlbW92ZWQgdGhlIHJlbW92ZWQgb2Jq\nZWN0CiAgICAgKiBAcmV0dXJuIHRoZSByZW1vdmVkIG9iamVjdCwgZm9yIGNv\nbnZlbmllbmNlCiAgICAgKi8gCiAgICBwdWJsaWMgc3RhdGljIE9iamVjdCBh\nZnRlclJlbW92ZShQcm94eUNvbGxlY3Rpb24gY29sbCwgaW50IGluZGV4LCAK\nICAgICAgICBPYmplY3QgcmVtb3ZlZCkgewogICAgICAgIGlmIChjb2xsLmdl\ndENoYW5nZVRyYWNrZXIoKSAhPSBudWxsKQogICAgICAgICAgICAoKENvbGxl\nY3Rpb25DaGFuZ2VUcmFja2VyKSBjb2xsLmdldENoYW5nZVRyYWNrZXIoKSku\ncmVtb3ZlZChyZW1vdmVkKTsKICAgICAgICByZW1vdmVkKGNvbGwsIHJlbW92\nZWQsIGZhbHNlKTsKICAgICAgICByZXR1cm4gcmVtb3ZlZDsKICAgIH0KCiAg\nICAvKioKICAgICAqIENhbGwgYmVmb3JlIGludm9raW5nIHtAbGluayBWZWN0\nb3IjcmVtb3ZlRWxlbWVudEF0KGludCl9IG9uIHN1cGVyLgogICAgICovIAog\nICAgcHVibGljIHN0YXRpYyB2b2lkIGJlZm9yZVJlbW92ZUVsZW1lbnRBdChQ\ncm94eUNvbGxlY3Rpb24gY29sbCwgaW50IGluZGV4KSB7CiAgICAgICAgYmVm\nb3JlUmVtb3ZlKGNvbGwsIGluZGV4KTsKICAgIH0KCiAgICAvKioKICAgICAq\nIENhbGwgYmVmb3JlIGludm9raW5nIHtAbGluayBDb2xsZWN0aW9uI3JlbW92\nZX0gb24gc3VwZXIuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBi\nZWZvcmVSZW1vdmUoUHJveHlDb2xsZWN0aW9uIGNvbGwsIE9iamVjdCBvKSB7\nCiAgICAgICAgZGlydHkoY29sbCwgZmFsc2UpOwogICAgfQoKICAgIC8qKgog\nICAgICogQ2FsbCBhZnRlciBpbnZva2luZyB7QGxpbmsgQ29sbGVjdGlvbiNy\nZW1vdmV9IG9uIHN1cGVyLgogICAgICoKICAgICAqIEBwYXJhbSByZW1vdmVk\nIHdoZXRoZXIgdGhlIG9iamVjdCB3YXMgcmVtb3ZlZAogICAgICogQHJldHVy\nbiB3aGV0aGVyIHRoZSBvYmplY3Qgd2FzIHJlbW92ZWQsIGZvciBjb252ZW5p\nZW5jZQogICAgICovIAogICAgcHVibGljIHN0YXRpYyBib29sZWFuIGFmdGVy\nUmVtb3ZlKFByb3h5Q29sbGVjdGlvbiBjb2xsLCBPYmplY3QgbywgCiAgICAg\nICAgYm9vbGVhbiByZW1vdmVkKXsKICAgICAgICBpZiAoIXJlbW92ZWQpCiAg\nICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICBpZiAoY29sbC5nZXRD\naGFuZ2VUcmFja2VyKCkgIT0gbnVsbCkKICAgICAgICAgICAgKChDb2xsZWN0\naW9uQ2hhbmdlVHJhY2tlcikgY29sbC5nZXRDaGFuZ2VUcmFja2VyKCkpLnJl\nbW92ZWQobyk7CiAgICAgICAgcmVtb3ZlZChjb2xsLCBvLCBmYWxzZSk7CiAg\nICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBDYWxs\nIGJlZm9yZSBpbnZva2luZyB7QGxpbmsgVmVjdG9yI3JlbW92ZUVsZW1lbnR9\nIG9uIHN1cGVyLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgYmVm\nb3JlUmVtb3ZlRWxlbWVudChQcm94eUNvbGxlY3Rpb24gY29sbCwgT2JqZWN0\nIG8pIHsKICAgICAgICBiZWZvcmVSZW1vdmUoY29sbCwgbyk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBDYWxsIGFmdGVyIGludm9raW5nIHtAbGluayBWZWN0\nb3IjcmVtb3ZlRWxlbWVudH0gb24gc3VwZXIuCiAgICAgKi8gCiAgICBwdWJs\naWMgc3RhdGljIGJvb2xlYW4gYWZ0ZXJSZW1vdmVFbGVtZW50KFByb3h5Q29s\nbGVjdGlvbiBjb2xsLCBPYmplY3QgbywgCiAgICAgICAgYm9vbGVhbiByZW1v\ndmVkKSB7CiAgICAgICAgcmV0dXJuIGFmdGVyUmVtb3ZlKGNvbGwsIG8sIHJl\nbW92ZWQpOwogICAgfQoKICAgIC8qKgogICAgICogQ2FsbCBiZWZvcmUgaW52\nb2tpbmcge0BsaW5rIExpbmtlZExpc3QjcmVtb3ZlRmlyc3R9IG9uIHN1cGVy\nLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgYmVmb3JlUmVtb3Zl\nRmlyc3QoUHJveHlDb2xsZWN0aW9uIGNvbGwpIHsKICAgICAgICBiZWZvcmVS\nZW1vdmUoY29sbCwgMCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDYWxsIGFm\ndGVyIGludm9raW5nIHtAbGluayBMaW5rZWRMaXN0I3JlbW92ZUZpcnN0fSBv\nbiBzdXBlci4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBPYmplY3QgYWZ0\nZXJSZW1vdmVGaXJzdChQcm94eUNvbGxlY3Rpb24gY29sbCwgT2JqZWN0IHJl\nbW92ZWQpewogICAgICAgIHJldHVybiBhZnRlclJlbW92ZShjb2xsLCAwLCBy\nZW1vdmVkKTsKICAgIH0KCiAgICAvKioKICAgICAqIENhbGwgYWZ0ZXIgaW52\nb2tpbmcge0BsaW5rIExpbmtlZExpc3QjcmVtb3ZlTGFzdH0gb24gc3VwZXIu\nCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBiZWZvcmVSZW1vdmVM\nYXN0KFByb3h5Q29sbGVjdGlvbiBjb2xsKSB7CiAgICAgICAgYmVmb3JlUmVt\nb3ZlKGNvbGwsIGNvbGwuc2l6ZSgpIC0gMSk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBDYWxsIGFmdGVyIGludm9raW5nIHtAbGluayBMaW5rZWRMaXN0I3Jl\nbW92ZUxhc3R9IG9uIHN1cGVyLgogICAgICovCiAgICBwdWJsaWMgc3RhdGlj\nIE9iamVjdCBhZnRlclJlbW92ZUxhc3QoUHJveHlDb2xsZWN0aW9uIGNvbGws\nIE9iamVjdCByZW1vdmVkKSB7CiAgICAgICAgcmV0dXJuIGFmdGVyUmVtb3Zl\nKGNvbGwsIGNvbGwuc2l6ZSgpLCByZW1vdmVkKTsKICAgIH0KCiAgICAvKioK\nICAgICAqIENhbGwgYmVmb3JlIGludm9raW5nIHtAbGluayBRdWV1ZSNyZW1v\ndmV9IG9uIHN1cGVyLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIHZvaWQg\nYmVmb3JlUmVtb3ZlKFByb3h5Q29sbGVjdGlvbiBjb2xsKSB7CiAgICAgICAg\nYmVmb3JlUmVtb3ZlKGNvbGwsIDApOwogICAgfQoKICAgIC8qKgogICAgICog\nQ2FsbCBhZnRlciBpbnZva2luZyB7QGxpbmsgUXVldWUjcmVtb3ZlfSBvbiBz\ndXBlci4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBPYmplY3QgYWZ0ZXJS\nZW1vdmUoUHJveHlDb2xsZWN0aW9uIGNvbGwsIE9iamVjdCByZW1vdmVkKXsK\nICAgICAgICByZXR1cm4gYWZ0ZXJSZW1vdmUoY29sbCwgMCwgcmVtb3ZlZCk7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBDYWxsIGJlZm9yZSBpbnZva2luZyB7\nQGxpbmsgUXVldWUjcG9sbH0gb24gc3VwZXIuCiAgICAgKi8KICAgIHB1Ymxp\nYyBzdGF0aWMgdm9pZCBiZWZvcmVQb2xsKFByb3h5Q29sbGVjdGlvbiBjb2xs\nKSB7CiAgICAgICAgaWYgKCFjb2xsLmlzRW1wdHkoKSkKICAgICAgICAgICAg\nYmVmb3JlUmVtb3ZlKGNvbGwsIDApOwogICAgfQoKICAgIC8qKgogICAgICog\nQ2FsbCBhZnRlciBpbnZva2luZyB7QGxpbmsgUXVldWUjcG9sbH0gb24gc3Vw\nZXIuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgT2JqZWN0IGFmdGVyUG9s\nbChQcm94eUNvbGxlY3Rpb24gY29sbCwgT2JqZWN0IHJlbW92ZWQpIHsKICAg\nICAgICBpZiAocmVtb3ZlZCAhPSBudWxsKQogICAgICAgICAgICBhZnRlclJl\nbW92ZShjb2xsLCAwLCByZW1vdmVkKTsKICAgICAgICByZXR1cm4gcmVtb3Zl\nZDsKICAgIH0KCiAgICAvKioKICAgICAqIE92ZXJyaWRlIGZvciB7QGxpbmsg\nQ29sbGVjdGlvbiNyZW1vdmVBbGx9LgogICAgICovCiAgICBwdWJsaWMgc3Rh\ndGljIGJvb2xlYW4gcmVtb3ZlQWxsKFByb3h5Q29sbGVjdGlvbiBjb2xsLCBD\nb2xsZWN0aW9uIHZhbHMpIHsKICAgICAgICBib29sZWFuIHJlbW92ZWQgPSBm\nYWxzZTsKICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9IHZhbHMuaXRlcmF0\nb3IoKTsgaXRyLmhhc05leHQoKTspCiAgICAgICAgICAgIHJlbW92ZWQgfD0g\nY29sbC5yZW1vdmUoaXRyLm5leHQoKSk7CiAgICAgICAgcmV0dXJuIHJlbW92\nZWQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBPdmVycmlkZSBmb3Ige0BsaW5r\nIENvbGxlY3Rpb24jcmV0YWluQWxsfS4KICAgICAqLwogICAgcHVibGljIHN0\nYXRpYyBib29sZWFuIHJldGFpbkFsbChQcm94eUNvbGxlY3Rpb24gY29sbCwg\nQ29sbGVjdGlvbiB2YWxzKSB7CiAgICAgICAgaW50IHNpemUgPSBjb2xsLnNp\nemUoKTsKICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9IGNvbGwuaXRlcmF0\nb3IoKTsgaXRyLmhhc05leHQoKTspCiAgICAgICAgICAgIGlmICghdmFscy5j\nb250YWlucyhpdHIubmV4dCgpKSkKICAgICAgICAgICAgICAgIGl0ci5yZW1v\ndmUoKTsKICAgICAgICByZXR1cm4gY29sbC5zaXplKCkgPCBzaXplOwogICAg\nfQoKICAgIC8qKgogICAgICogQ2FsbCBiZWZvcmUgaW52b2tpbmcge0BsaW5r\nIExpc3Qjc2V0fSBvbiBzdXBlci4KICAgICAqLwogICAgcHVibGljIHN0YXRp\nYyB2b2lkIGJlZm9yZVNldChQcm94eUNvbGxlY3Rpb24gY29sbCwgaW50IGlu\nZGV4LCAKICAgICAgICBPYmplY3QgZWxlbWVudCkgewogICAgICAgIGFzc2Vy\ndEFsbG93ZWRUeXBlKGVsZW1lbnQsIGNvbGwuZ2V0RWxlbWVudFR5cGUoKSk7\nCiAgICAgICAgZGlydHkoY29sbCwgdHJ1ZSk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBDYWxsIGFmdGVyIGludm9raW5nIHtAbGluayBMaXN0I3NldH0gb24g\nc3VwZXIuCiAgICAgKgogICAgICogQHBhcmFtIHJlcGxhY2VkIHRoZSByZXBs\nYWNlZCBvYmplY3QKICAgICAqIEByZXR1cm4gdGhlIHJlcGxhY2VkIG9iamVj\ndCwgZm9yIGNvbnZlbmllbmNlCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMg\nT2JqZWN0IGFmdGVyU2V0KFByb3h5Q29sbGVjdGlvbiBjb2xsLCBpbnQgaW5k\nZXgsIAogICAgICAgIE9iamVjdCBlbGVtZW50LCBPYmplY3QgcmVwbGFjZWQp\nIHsKICAgICAgICBpZiAocmVwbGFjZWQgIT0gZWxlbWVudCkKICAgICAgICAg\nICAgcmVtb3ZlZChjb2xsLCByZXBsYWNlZCwgZmFsc2UpOwogICAgICAgIHJl\ndHVybiByZXBsYWNlZDsKICAgIH0KCiAgICAvKioKICAgICAqIENhbGwgYmVm\nb3JlIGludm9raW5nIHtAbGluayBWZWN0b3Ijc2V0RWxlbWVudEF0fSBvbiBz\ndXBlci4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyB2b2lkIGJlZm9yZVNl\ndEVsZW1lbnRBdChQcm94eUNvbGxlY3Rpb24gY29sbCwgT2JqZWN0IGVsZW1l\nbnQsCiAgICAgICAgaW50IGluZGV4KSB7CiAgICAgICAgYmVmb3JlU2V0KGNv\nbGwsIGluZGV4LCBlbGVtZW50KTsKICAgIH0KCiAgICAvKioKICAgICAqIENh\nbGwgYWZ0ZXIgaW52b2tpbmcge0BsaW5rIFZlY3RvciNzZXRFbGVtZW50QXR9\nIG9uIHN1cGVyLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIE9iamVjdCBh\nZnRlclNldEVsZW1lbnRBdChQcm94eUNvbGxlY3Rpb24gY29sbCwgT2JqZWN0\nIGVsZW1lbnQsCiAgICAgICAgaW50IGluZGV4LCBPYmplY3QgcmVwbGFjZWQp\nIHsKICAgICAgICByZXR1cm4gYWZ0ZXJTZXQoY29sbCwgaW5kZXgsIGVsZW1l\nbnQsIHJlcGxhY2VkKTsKICAgIH0KCiAgICAvKioKICAgICAqIE1hcmtlciBp\nbnRlcmZhY2UgZm9yIGEgcHJveGllZCBpdGVyYXRvci4gCiAgICAgKi8KICAg\nIHB1YmxpYyBzdGF0aWMgaW50ZXJmYWNlIFByb3h5SXRlcmF0b3IgCiAgICAg\nICAgZXh0ZW5kcyBJdGVyYXRvciB7CiAgICB9CgogICAgLyoqCiAgICAgKiBN\nYXJrZXIgaW50ZXJmYWNlIGZvciBhIHByb3hpZWQgbGlzdCBpdGVyYXRvci4g\nCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgaW50ZXJmYWNlIFByb3h5TGlz\ndEl0ZXJhdG9yIAogICAgICAgIGV4dGVuZHMgUHJveHlJdGVyYXRvciwgTGlz\ndEl0ZXJhdG9yIHsKICAgIH0KfQo=\n","encoding":"base64"}

