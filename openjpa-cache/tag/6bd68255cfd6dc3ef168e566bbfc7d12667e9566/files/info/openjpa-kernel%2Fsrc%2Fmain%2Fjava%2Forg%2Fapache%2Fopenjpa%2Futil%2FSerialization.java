{"sha":"b39db70677d92db1af1bdf3d0de4c45902f6a7ed","node_id":"MDQ6QmxvYjIwNjM2NDpiMzlkYjcwNjc3ZDkyZGIxYWYxYmRmM2QwZGU0YzQ1OTAyZjZhN2Vk","size":6905,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/b39db70677d92db1af1bdf3d0de4c45902f6a7ed","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbDsKCmltcG9ydCBqYXZh\nLmlvLkJ5dGVBcnJheUlucHV0U3RyZWFtOwppbXBvcnQgamF2YS5pby5CeXRl\nQXJyYXlPdXRwdXRTdHJlYW07CmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9u\nOwppbXBvcnQgamF2YS5pby5JbnB1dFN0cmVhbTsKaW1wb3J0IGphdmEuaW8u\nT2JqZWN0SW5wdXRTdHJlYW07CmltcG9ydCBqYXZhLmlvLk9iamVjdE91dHB1\ndFN0cmVhbTsKaW1wb3J0IGphdmEuaW8uT2JqZWN0U3RyZWFtQ2xhc3M7Cmlt\ncG9ydCBqYXZhLmlvLk91dHB1dFN0cmVhbTsKaW1wb3J0IGphdmEuaW8uU2Vy\naWFsaXphYmxlOwppbXBvcnQgamF2YS5zZWN1cml0eS5BY2Nlc3NDb250cm9s\nbGVyOwppbXBvcnQgamF2YS5zZWN1cml0eS5Qcml2aWxlZ2VkQWN0aW9uOwoK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5jb25mLk9wZW5KUEFDb25maWd1\ncmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5TdG9y\nZUNvbnRleHQ7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmxvZy5M\nb2c7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuSjJEb1By\naXZIZWxwZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwu\nTG9jYWxpemVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGls\nLk11bHRpQ2xhc3NMb2FkZXI7CgovKioKICogSGVscGVyIGNsYXNzIHRvIHNl\ncmlhbGl6ZSBhbmQgZGVzZXJpYWxpemUgcGVyc2lzdGVudCBvYmplY3RzLAog\nKiBzdWJ0aXR1dGluZyBvaWRzIGludG8gdGhlIHNlcmlhbGl6ZWQgc3RyZWFt\nIGFuZCBzdWJ0aXR1dGluZyB0aGUgcGVyc2lzdGVudAogKiBvYmplY3RzIGJh\nY2sgZHVyaW5nIGRlc2VyaWFsaXphdGlvbi4KICoKICogQGF1dGhvciBBYmUg\nV2hpdGUKICogQHNpbmNlIDAuMy4zCiAqIEBub2phdmFkb2MKICovCnB1Ymxp\nYyBjbGFzcyBTZXJpYWxpemF0aW9uIHsKCiAgICBwcml2YXRlIHN0YXRpYyBm\naW5hbCBMb2NhbGl6ZXIgX2xvYyA9IExvY2FsaXplci5mb3JQYWNrYWdlCiAg\nICAgICAgKFNlcmlhbGl6YXRpb24uY2xhc3MpOwoKICAgIC8qKgogICAgICog\nU2VyaWFsaXplIGEgdmFsdWUgdGhhdCBtaWdodCBjb250YWluIHBlcnNpc3Rl\nbnQgb2JqZWN0cy4gUmVwbGFjZXMKICAgICAqIHBlcnNpc3RlbnQgb2JqZWN0\ncyB3aXRoIHRoZWlyIG9pZHMuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMg\nYnl0ZVtdIHNlcmlhbGl6ZShPYmplY3QgdmFsLCBTdG9yZUNvbnRleHQgY3R4\nKSB7CiAgICAgICAgQnl0ZUFycmF5T3V0cHV0U3RyZWFtIGJ5dGVzID0gbmV3\nIEJ5dGVBcnJheU91dHB1dFN0cmVhbSgpOwogICAgICAgIHRyeSB7CiAgICAg\nICAgICAgIE9iamVjdE91dHB1dFN0cmVhbSBvYmpzID0gbmV3IFBlcnNpc3Rl\nbnRPYmplY3RPdXRwdXRTdHJlYW0oYnl0ZXMsCiAgICAgICAgICAgICAgICBj\ndHgpOwogICAgICAgICAgICBvYmpzLndyaXRlT2JqZWN0KHZhbCk7CiAgICAg\nICAgICAgIG9ianMuZmx1c2goKTsKICAgICAgICAgICAgcmV0dXJuIGJ5dGVz\nLnRvQnl0ZUFycmF5KCk7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUp\nIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFN0b3JlRXhjZXB0aW9uKGUpOwog\nICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIERlc2VyaWFsaXplIGFu\nIG9iamVjdCB2YWx1ZSBmcm9tIHRoZSBnaXZlbiBieXRlcy4KICAgICAqLwog\nICAgcHVibGljIHN0YXRpYyBPYmplY3QgZGVzZXJpYWxpemUoYnl0ZVtdIGJ5\ndGVzLCBTdG9yZUNvbnRleHQgY3R4KSB7CiAgICAgICAgQnl0ZUFycmF5SW5w\ndXRTdHJlYW0gaW4gPSBuZXcgQnl0ZUFycmF5SW5wdXRTdHJlYW0oYnl0ZXMp\nOwogICAgICAgIHJldHVybiBkZXNlcmlhbGl6ZShpbiwgY3R4KTsKICAgIH0K\nCiAgICAvKioKICAgICAqIERlc2VyaWFsaXplIGFuIG9iamVjdCB2YWx1ZSBm\ncm9tIHRoZSBnaXZlbiBzdHJlYW0uCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0\naWMgT2JqZWN0IGRlc2VyaWFsaXplKElucHV0U3RyZWFtIGluLCBTdG9yZUNv\nbnRleHQgY3R4KSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKGN0\neCA9PSBudWxsKQogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDbGFzc1Jl\nc29sdmluZ09iamVjdElucHV0U3RyZWFtKGluKS5yZWFkT2JqZWN0KCk7CiAg\nICAgICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVudE9iamVjdElucHV0U3Ry\nZWFtKGluLCBjdHgpLnJlYWRPYmplY3QoKTsKICAgICAgICB9IGNhdGNoIChF\neGNlcHRpb24gZSkgewogICAgICAgICAgICB0aHJvdyBuZXcgU3RvcmVFeGNl\ncHRpb24oZSk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogT2Jq\nZWN0IG91dHB1dCBzdHJlYW0gdGhhdCByZXBsYWNlcyBwZXJzaXN0ZW50IG9i\namVjdHMgd2l0aCB0aGVpciBvaWRzLgogICAgICovCiAgICBwdWJsaWMgc3Rh\ndGljIGNsYXNzIFBlcnNpc3RlbnRPYmplY3RPdXRwdXRTdHJlYW0KICAgICAg\nICBleHRlbmRzIE9iamVjdE91dHB1dFN0cmVhbSB7CgogICAgICAgIHByaXZh\ndGUgU3RvcmVDb250ZXh0IF9jdHg7CgogICAgICAgIC8qKgogICAgICAgICAq\nIENvbnN0cnVjdG9yOyBzdXBwbHkgdW5kZXJseWluZyBzdHJlYW0uCiAgICAg\nICAgICovCiAgICAgICAgcHVibGljIFBlcnNpc3RlbnRPYmplY3RPdXRwdXRT\ndHJlYW0oT3V0cHV0U3RyZWFtIGRlbGVnYXRlLAogICAgICAgICAgICBTdG9y\nZUNvbnRleHQgY3R4KQogICAgICAgICAgICB0aHJvd3MgSU9FeGNlcHRpb24g\newogICAgICAgICAgICBzdXBlcihkZWxlZ2F0ZSk7CiAgICAgICAgICAgIF9j\ndHggPSBjdHg7CiAgICAgICAgICAgIEFjY2Vzc0NvbnRyb2xsZXIuZG9Qcml2\naWxlZ2VkKG5ldyBQcml2aWxlZ2VkQWN0aW9uKCkgewogICAgICAgICAgICAg\nICAgcHVibGljIE9iamVjdCBydW4oKSB7CiAgICAgICAgICAgICAgICAgICAg\nZW5hYmxlUmVwbGFjZU9iamVjdCh0cnVlKTsKICAgICAgICAgICAgICAgICAg\nICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAg\nfSk7CiAgICAgICAgfQoKICAgICAgICBwcm90ZWN0ZWQgT2JqZWN0IHJlcGxh\nY2VPYmplY3QoT2JqZWN0IG9iaikgewogICAgICAgICAgICBPYmplY3Qgb2lk\nID0gX2N0eC5nZXRPYmplY3RJZChvYmopOwogICAgICAgICAgICByZXR1cm4g\nKG9pZCA9PSBudWxsKSA/IG9iaiA6IG5ldyBPYmplY3RJZE1hcmtlcihvaWQp\nOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIENs\nYXNzUmVzb2x2aW5nT2JqZWN0SW5wdXRTdHJlYW0KICAgICAgICBleHRlbmRz\nIE9iamVjdElucHV0U3RyZWFtIHsKCiAgICAgICAgcHVibGljIENsYXNzUmVz\nb2x2aW5nT2JqZWN0SW5wdXRTdHJlYW0oSW5wdXRTdHJlYW0gZGVsZWdhdGUp\nCiAgICAgICAgICAgIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgICAg\nIHN1cGVyKGRlbGVnYXRlKTsKICAgICAgICB9CgogICAgICAgIHByb3RlY3Rl\nZCBDbGFzcyByZXNvbHZlQ2xhc3MoT2JqZWN0U3RyZWFtQ2xhc3MgZGVzYykg\nCiAgICAgICAgICAgIHRocm93cyBJT0V4Y2VwdGlvbiwgQ2xhc3NOb3RGb3Vu\nZEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIE11bHRpQ2xhc3NMb2FkZXIgbG9h\nZGVyID0gKE11bHRpQ2xhc3NMb2FkZXIpIEFjY2Vzc0NvbnRyb2xsZXIKICAg\nICAgICAgICAgICAgIC5kb1ByaXZpbGVnZWQoSjJEb1ByaXZIZWxwZXIubmV3\nTXVsdGlDbGFzc0xvYWRlckFjdGlvbigpKTsKICAgICAgICAgICAgYWRkQ29u\ndGV4dENsYXNzTG9hZGVycyhsb2FkZXIpOwogICAgICAgICAgICBsb2FkZXIu\nYWRkQ2xhc3NMb2FkZXIoZ2V0Q2xhc3MoKS5nZXRDbGFzc0xvYWRlcigpKTsK\nICAgICAgICAgICAgbG9hZGVyLmFkZENsYXNzTG9hZGVyKE11bHRpQ2xhc3NM\nb2FkZXIuU1lTVEVNX0xPQURFUik7CiAgICAgICAgICAgIHJldHVybiBDbGFz\ncy5mb3JOYW1lKGRlc2MuZ2V0TmFtZSgpLCB0cnVlLCBsb2FkZXIpOwogICAg\nICAgIH0KCiAgICAgICAgcHJvdGVjdGVkIHZvaWQgYWRkQ29udGV4dENsYXNz\nTG9hZGVycyhNdWx0aUNsYXNzTG9hZGVyIGxvYWRlcikgewogICAgICAgICAg\nICBsb2FkZXIuYWRkQ2xhc3NMb2FkZXIoKENsYXNzTG9hZGVyKSBBY2Nlc3ND\nb250cm9sbGVyLmRvUHJpdmlsZWdlZCgKICAgICAgICAgICAgICAgIEoyRG9Q\ncml2SGVscGVyLmdldENvbnRleHRDbGFzc0xvYWRlckFjdGlvbigpKSk7CiAg\nICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogT2JqZWN0IGlucHV0IHN0\ncmVhbSB0aGF0IHJlcGxhY2VzIG9pZHMgd2l0aCB0aGVpciBvYmplY3RzLgog\nICAgICovCiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIFBlcnNpc3RlbnRPYmpl\nY3RJbnB1dFN0cmVhbQogICAgICAgIGV4dGVuZHMgQ2xhc3NSZXNvbHZpbmdP\nYmplY3RJbnB1dFN0cmVhbSB7CgogICAgICAgIHByaXZhdGUgZmluYWwgU3Rv\ncmVDb250ZXh0IF9jdHg7CgogICAgICAgIC8qKgogICAgICAgICAqIENvbnN0\ncnVjdG9yOyBzdXBwbHkgc291cmNlIHN0cmVhbSBhbmQgYnJva2VyIHRvCiAg\nICAgICAgICogdXNlIGZvciBwZXJzaXN0ZW50IG9iamVjdCBsb29rdXBzLgog\nICAgICAgICAqLwogICAgICAgIHB1YmxpYyBQZXJzaXN0ZW50T2JqZWN0SW5w\ndXRTdHJlYW0oSW5wdXRTdHJlYW0gZGVsZWdhdGUsCiAgICAgICAgICAgIFN0\nb3JlQ29udGV4dCBjdHgpCiAgICAgICAgICAgIHRocm93cyBJT0V4Y2VwdGlv\nbiB7CiAgICAgICAgICAgIHN1cGVyKGRlbGVnYXRlKTsKICAgICAgICAgICAg\nX2N0eCA9IGN0eDsKICAgICAgICAgICAgQWNjZXNzQ29udHJvbGxlci5kb1By\naXZpbGVnZWQobmV3IFByaXZpbGVnZWRBY3Rpb24oKSB7CiAgICAgICAgICAg\nICAgICBwdWJsaWMgT2JqZWN0IHJ1bigpIHsKICAgICAgICAgICAgICAgICAg\nICBlbmFibGVSZXNvbHZlT2JqZWN0KHRydWUpOwogICAgICAgICAgICAgICAg\nICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgfQogICAgICAgICAg\nICB9KTsKICAgICAgICB9CgogICAgICAgIHByb3RlY3RlZCB2b2lkIGFkZENv\nbnRleHRDbGFzc0xvYWRlcnMoTXVsdGlDbGFzc0xvYWRlciBsb2FkZXIpIHsK\nICAgICAgICAgICAgc3VwZXIuYWRkQ29udGV4dENsYXNzTG9hZGVycyhsb2Fk\nZXIpOwogICAgICAgICAgICBsb2FkZXIuYWRkQ2xhc3NMb2FkZXIoX2N0eC5n\nZXRDbGFzc0xvYWRlcigpKTsKICAgICAgICB9CgogICAgICAgIHByb3RlY3Rl\nZCBPYmplY3QgcmVzb2x2ZU9iamVjdChPYmplY3Qgb2JqKSB7CiAgICAgICAg\nICAgIGlmICghKG9iaiBpbnN0YW5jZW9mIE9iamVjdElkTWFya2VyKSkKICAg\nICAgICAgICAgICAgIHJldHVybiBvYmo7CgogICAgICAgICAgICBPYmplY3Qg\nb2lkID0gKChPYmplY3RJZE1hcmtlcikgb2JqKS5vaWQ7CiAgICAgICAgICAg\nIGlmIChvaWQgPT0gbnVsbCkKICAgICAgICAgICAgICAgIHJldHVybiBudWxs\nOwoKICAgICAgICAgICAgT2JqZWN0IHBjID0gX2N0eC5maW5kKG9pZCwgbnVs\nbCwgbnVsbCwgbnVsbCwgMCk7CiAgICAgICAgICAgIGlmIChwYyA9PSBudWxs\nKSB7CiAgICAgICAgICAgICAgICBMb2cgbG9nID0gX2N0eC5nZXRDb25maWd1\ncmF0aW9uKCkuZ2V0TG9nCiAgICAgICAgICAgICAgICAgICAgKE9wZW5KUEFD\nb25maWd1cmF0aW9uLkxPR19SVU5USU1FKTsKICAgICAgICAgICAgICAgIGlm\nIChsb2cuaXNXYXJuRW5hYmxlZCgpKQogICAgICAgICAgICAgICAgICAgIGxv\nZy53YXJuKF9sb2MuZ2V0KCJiYWQtc2VyLW9pZCIsIG9pZCkpOwogICAgICAg\nICAgICAgICAgaWYgKGxvZy5pc1RyYWNlRW5hYmxlZCgpKQogICAgICAgICAg\nICAgICAgICAgIGxvZy50cmFjZShuZXcgT2JqZWN0Tm90Rm91bmRFeGNlcHRp\nb24ob2lkKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHBj\nOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIE1hcmtlciBmb3Ig\nb2lkcy4KICAgICAqLwogICAgcHJpdmF0ZSBzdGF0aWMgY2xhc3MgT2JqZWN0\nSWRNYXJrZXIKICAgICAgICBpbXBsZW1lbnRzIFNlcmlhbGl6YWJsZSB7Cgog\nICAgICAgIHB1YmxpYyBPYmplY3Qgb2lkOwoKICAgICAgICBwdWJsaWMgT2Jq\nZWN0SWRNYXJrZXIoT2JqZWN0IG9pZCkgewogICAgICAgICAgICB0aGlzLm9p\nZCA9IG9pZDsKCQl9Cgl9IAp9Cgo=\n","encoding":"base64"}

