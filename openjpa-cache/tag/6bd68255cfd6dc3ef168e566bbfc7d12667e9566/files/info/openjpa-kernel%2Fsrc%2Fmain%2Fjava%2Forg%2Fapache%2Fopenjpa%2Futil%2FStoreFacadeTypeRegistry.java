{"sha":"62e6959db271f50163182383dd092fb205e46bbd","node_id":"MDQ6QmxvYjIwNjM2NDo2MmU2OTU5ZGIyNzFmNTAxNjMxODIzODNkZDA5MmZiMjA1ZTQ2YmJk","size":4272,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/62e6959db271f50163182383dd092fb205e46bbd","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\ndXRpbDsNCg0KaW1wb3J0IGphdmEudXRpbC5NYXA7DQoNCmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEua2VybmVsLlN0b3JlTWFuYWdlcjsNCmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuY29uY3VycmVudC5Db25jdXJy\nZW50SGFzaE1hcDsNCg0KLyoqDQogKiBSZXBvc2l0b3J5IG9mIHN0b3JlLXNw\nZWNpZmljIGZhY2FkZSBjbGFzc2VzLiBUaGlzIGlzIHVzZWQgYnkgZmFjYWRl\nIA0KICogaW1wbGVtZW50YXRpb25zIHRvIHdyYXAgc3RvcmUtc3BlY2lmaWMg\nY29tcG9uZW50cyB3aXRob3V0IGtub3dpbmcgDQogKiBhYm91dCBhbGwgcG9z\nc2libGUgYmFjay1lbmRzLg0KICovDQpwdWJsaWMgY2xhc3MgU3RvcmVGYWNh\nZGVUeXBlUmVnaXN0cnkgew0KDQogICAgcHJpdmF0ZSBNYXAgX2ltcGxzID0g\nbmV3IENvbmN1cnJlbnRIYXNoTWFwKCk7DQoNCiAgICAvKioNCiAgICAgKiBS\nZWdpc3RlciBhIGZhY2FkZSBpbXBsZW1lbnRhdGlvbi4NCiAgICAgKg0KICAg\nICAqIEBwYXJhbSBmYWNhZGVUeXBlIHRoZSBmYWNhZGUgaW50ZXJmYWNlDQog\nICAgICogQHBhcmFtIHN0b3JlVHlwZSB0aGUgc3RvcmUncyANCiAgICAgKiB7\nQGxpbmsgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5TdG9yZU1hbmFnZXJ9\nIHR5cGUsIG9yIG51bGwgZm9yIGdlbmVyaWMNCiAgICAgKiBAcGFyYW0gaW1w\nbFR5cGUgdGhlIGNsYXNzIGltcGxlbWVudGluZyB0aGUgZmFjYWRlDQogICAg\nICovDQogICAgcHVibGljIHZvaWQgcmVnaXN0ZXJJbXBsZW1lbnRhdGlvbihD\nbGFzcyBmYWNhZGVUeXBlLCBDbGFzcyBzdG9yZVR5cGUsIA0KICAgICAgICBD\nbGFzcyBpbXBsVHlwZSkgew0KICAgICAgICBPYmplY3Qga2V5ID0gKHN0b3Jl\nVHlwZSA9PSBudWxsKSA/IChPYmplY3QpIGZhY2FkZVR5cGUgDQogICAgICAg\nICAgICA6IG5ldyBLZXkoZmFjYWRlVHlwZSwgc3RvcmVUeXBlKTsNCiAgICAg\nICAgX2ltcGxzLnB1dChrZXksIGltcGxUeXBlKTsNCiAgICB9DQogICAgDQog\nICAgLyoqDQogICAgICogUmV0dXJuIHRoZSBpbXBsZW1lbnRhdGlvbiBmb3Ig\ndGhlIGdpdmVuIGZhY2FkZSBhbmQgc3RvcmUuDQogICAgICoNCiAgICAgKiBA\ncGFyYW0gZmFjYWRlVHlwZSB0aGUgZmFjYWRlIGludGVyZmFjZQ0KICAgICAq\nIEBwYXJhbSBzdG9yZVR5cGUgdGhlIHN0b3JlJ3MgDQogICAgICoge0BsaW5r\nIG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuU3RvcmVNYW5hZ2VyfSB0eXBl\nLCBvciBudWxsIGZvciBnZW5lcmljDQogICAgICogQHBhcmFtIGltcGxUeXBl\nIHRoZSByZWdpc3RlcmVkIGltcGxlbWVudG9yDQogICAgICovDQogICAgcHVi\nbGljIENsYXNzIGdldEltcGxlbWVudGF0aW9uKENsYXNzIGZhY2FkZVR5cGUs\nIENsYXNzIHN0b3JlVHlwZSkgew0KICAgICAgICAvLyB0cmF2ZXJzZSBzdG9y\nZSB0eXBlIGhpZXJhcmNoeSB0byBzdG9yZSBtYW5hZ2VyIHRvIGZpbmQgbW9z\ndCBzcGVjaWZpYw0KICAgICAgICAvLyBzdG9yZSBhdmFpYWxibGUNCiAgICAg\nICAgQ2xhc3MgaW1wbDsNCiAgICAgICAgZm9yICg7IHN0b3JlVHlwZSAhPSBu\ndWxsICYmIHN0b3JlVHlwZSAhPSBTdG9yZU1hbmFnZXIuY2xhc3M7IA0KICAg\nICAgICAgICAgc3RvcmVUeXBlID0gc3RvcmVUeXBlLmdldFN1cGVyY2xhc3Mo\nKSkgew0KICAgICAgICAgICAgaW1wbCA9IChDbGFzcykgX2ltcGxzLmdldChu\nZXcgS2V5KGZhY2FkZVR5cGUsIHN0b3JlVHlwZSkpOw0KICAgICAgICAgICAg\naWYgKGltcGwgIT0gbnVsbCkNCiAgICAgICAgICAgICAgICByZXR1cm4gaW1w\nbDsgDQogICAgICAgIH0gICAgDQogICAgICAgIHJldHVybiAoQ2xhc3MpIF9p\nbXBscy5nZXQoZmFjYWRlVHlwZSk7DQogICAgfQ0KICAgIA0KICAgIC8qKg0K\nICAgICAqIFJldHVybiB0aGUgaW1wbGVtZW50YXRpb24gZm9yIHRoZSBnaXZl\nbiBmYWNhZGUgYW5kIHN0b3JlLiBJZiBubyANCiAgICAgKiByZWdpc3RlcmVk\nIGltcGxlbWVudGF0aW9uIGlzIGZvdW5kIHRoZW4gcmV0dXJucyB0aGUgZ2l2\nZW4gZGVmYXVsdCB0eXBlDQogICAgICogcHJvdmlkZWQgaXQgdGhlIGZhY2Fk\nZSB0eXBlIGlzIGFzc2lnbmFibGUgZnJvbSB0aGUgZGVhZnVsdCB0eXBlLg0K\nICAgICAqDQogICAgICogQHBhcmFtIGZhY2FkZVR5cGUgdGhlIGZhY2FkZSBp\nbnRlcmZhY2UNCiAgICAgKiBAcGFyYW0gc3RvcmVUeXBlIHRoZSBzdG9yZSdz\nIA0KICAgICAqIHtAbGluayBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlN0\nb3JlTWFuYWdlcn0gdHlwZSwgb3IgbnVsbCBmb3IgZ2VuZXJpYw0KICAgICAq\nIEBwYXJhbSBpbXBsVHlwZSB0aGUgcmVnaXN0ZXJlZCBpbXBsZW1lbnRvcg0K\nICAgICAqIEBwYXJhbSBkZWZhdWx0VHlwZSBjbGFzcyBpZiBubyByZWdpc3Rl\ncmVkIGltcGxlbWVudGF0aW9uIGlzIGF2YWlsYWJsZS4NCiAgICAgKi8NCiAg\nICBwdWJsaWMgQ2xhc3MgZ2V0SW1wbGVtZW50YXRpb24oQ2xhc3MgZmFjYWRl\nVHlwZSwgQ2xhc3Mgc3RvcmVUeXBlLCANCiAgICAJQ2xhc3MgZGVmYXVsdFR5\ncGUpIHsNCiAgICAJQ2xhc3MgcmVzdWx0ID0gZ2V0SW1wbGVtZW50YXRpb24o\nZmFjYWRlVHlwZSwgc3RvcmVUeXBlKTsNCiAgICAJaWYgKHJlc3VsdCA9PSBu\ndWxsKQ0KICAgIAkJcmVzdWx0ID0gZGVmYXVsdFR5cGU7DQogICAgCWlmIChm\nYWNhZGVUeXBlID09IG51bGwgfHwgIWZhY2FkZVR5cGUuaXNBc3NpZ25hYmxl\nRnJvbShyZXN1bHQpKQ0KICAgIAkJdGhyb3cgbmV3IEludGVybmFsRXhjZXB0\naW9uKCk7DQogICAgCXJldHVybiByZXN1bHQ7DQogICAgfQ0KDQogICAgLyoq\nDQogICAgICogTG9va3VwIGtleSBmb3IgZmFjYWRlK3N0b3JlIGhhc2guDQog\nICAgICovDQogICAgcHJpdmF0ZSBzdGF0aWMgY2xhc3MgS2V5IHsNCiAgICAg\nICAgcHVibGljIGZpbmFsIENsYXNzIF9mYWNhZGVUeXBlOw0KICAgICAgICBw\ndWJsaWMgZmluYWwgQ2xhc3MgX3N0b3JlVHlwZTsNCg0KICAgICAgICBwdWJs\naWMgS2V5KENsYXNzIGZhY2FkZVR5cGUsIENsYXNzIHN0b3JlVHlwZSkgew0K\nICAgICAgICAgICAgX2ZhY2FkZVR5cGUgPSBmYWNhZGVUeXBlOw0KICAgICAg\nICAgICAgX3N0b3JlVHlwZSA9IHN0b3JlVHlwZTsNCiAgICAgICAgfQ0KDQog\nICAgICAgIHB1YmxpYyBpbnQgaGFzaENvZGUoKSB7DQogICAgICAgICAgICBy\nZXR1cm4gX2ZhY2FkZVR5cGUuaGFzaENvZGUoKSBeIF9zdG9yZVR5cGUuaGFz\naENvZGUoKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHB1YmxpYyBib29sZWFu\nIGVxdWFscyhPYmplY3Qgb3RoZXIpIHsNCiAgICAgICAgICAgIGlmIChvdGhl\nciA9PSB0aGlzKQ0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAg\nICAgICAgICAgS2V5IGsgPSAoS2V5KSBvdGhlcjsNCiAgICAgICAgICAgIHJl\ndHVybiBfZmFjYWRlVHlwZSA9PSBrLl9mYWNhZGVUeXBlICYmIF9zdG9yZVR5\ncGUgPT0gay5fc3RvcmVUeXBlOw0KICAgICAgICB9DQogICAgfQ0KfQ0K\n","encoding":"base64"}

