{"sha":"ac6d782dc52a6a212e455ebe613a47424c406adc","node_id":"MDQ6QmxvYjIwNjM2NDphYzZkNzgyZGM1MmE2YTIxMmU0NTVlYmU2MTNhNDc0MjRjNDA2YWRj","size":6476,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/ac6d782dc52a6a212e455ebe613a47424c406adc","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLg0KICovDQpwYWNrYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5lbmhh\nbmNlOw0KDQppbXBvcnQgamF2YS5sYW5nLmluc3RydW1lbnQuSW5zdHJ1bWVu\ndGF0aW9uOw0KaW1wb3J0IGphdmEubGFuZy5pbnN0cnVtZW50LkNsYXNzRmls\nZVRyYW5zZm9ybWVyOw0KaW1wb3J0IGphdmEubGFuZy5pbnN0cnVtZW50LkNs\nYXNzRGVmaW5pdGlvbjsNCmltcG9ydCBqYXZhLmxhbmcuaW5zdHJ1bWVudC5V\nbm1vZGlmaWFibGVDbGFzc0V4Y2VwdGlvbjsNCmltcG9ydCBqYXZhLmxhbmcu\ncmVmbGVjdC5JbnZvY2F0aW9uVGFyZ2V0RXhjZXB0aW9uOw0KaW1wb3J0IGph\ndmEubGFuZy5yZWZsZWN0Lk1ldGhvZDsNCmltcG9ydCBqYXZhLnNlY3VyaXR5\nLlByb3RlY3Rpb25Eb21haW47DQppbXBvcnQgamF2YS51dGlsLk1hcDsNCmlt\ncG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbjsNCmltcG9ydCBqYXZhLnV0aWwu\nQ29sbGVjdGlvbnM7DQppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsNCmlt\ncG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uOw0KDQppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmNvbmYuT3BlbkpQQUNvbmZpZ3VyYXRpb247DQppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkphdmFWZXJzaW9uczsNCmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOw0K\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIubG9nLkxvZzsNCmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5JbnRlcm5hbEV4Y2VwdGlvbjsN\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5Vc2VyRXhjZXB0aW9u\nOw0KDQovKioNCiAqIFJlZGVmaW5lcyB0aGUgbWV0aG9kIGJvZGllcyBvZiBl\neGlzdGluZyBjbGFzc2VzLiBTdXBwb3J0cyBKYXZhIDUgVk1zIHRoYXQNCiAq\nIGhhdmUgYSBqYXZhYWdlbnQgaW5zdGFsbGVkIG9uIHRoZSBjb21tYW5kIGxp\nbmUgYXMgd2VsbCBhcyBuZXdlciBWTXMgd2l0aG91dA0KICogYW55IGphdmFh\nZ2VudCBmbGFnLg0KICoNCiAqIEBzaW5jZSAxLjAuMA0KICovDQpwdWJsaWMg\nY2xhc3MgQ2xhc3NSZWRlZmluZXIgew0KDQogICAgcHJpdmF0ZSBzdGF0aWMg\nZmluYWwgTG9jYWxpemVyIF9sb2MgPSANCiAgICAgICAgTG9jYWxpemVyLmZv\nclBhY2thZ2UoQ2xhc3NSZWRlZmluZXIuY2xhc3MpOw0KDQogICAgcHJpdmF0\nZSBzdGF0aWMgQm9vbGVhbiBfY2FuUmVkZWZpbmUgPSBudWxsOw0KDQogICAg\nLyoqDQogICAgICogRm9yIGVhY2ggZWxlbWVudCBpbiA8Y29kZT5jbGFzc2Vz\nPC9jb2RlPiwgdGhpcyBtZXRob2Qgd2lsbCByZWRlZmluZQ0KICAgICAqIGFs\nbCB0aGUgZWxlbWVudCdzIG1ldGhvZHMgc3VjaCB0aGF0IGZpZWxkIGFjY2Vz\nc2VzIGFyZSBpbnRlcmNlcHRlZA0KICAgICAqIGluLWxpbmUuDQogICAgICov\nDQogICAgcHVibGljIHN0YXRpYyB2b2lkIHJlZGVmaW5lQ2xhc3NlcyhPcGVu\nSlBBQ29uZmlndXJhdGlvbiBjb25mLA0KICAgICAgICBmaW5hbCBNYXA8Q2xh\nc3MsYnl0ZVtdPiBjbGFzc2VzKSB7DQogICAgICAgIExvZyBsb2cgPSBjb25m\nLmdldExvZyhPcGVuSlBBQ29uZmlndXJhdGlvbi5MT0dfRU5IQU5DRSk7DQog\nICAgICAgIGlmIChjbGFzc2VzID09IG51bGwgfHwgY2xhc3Nlcy5zaXplKCkg\nPT0gMCkNCiAgICAgICAgICAgIHJldHVybjsNCg0KICAgICAgICBJbnN0cnVt\nZW50YXRpb24gaW5zdCA9IG51bGw7DQogICAgICAgIENsYXNzRmlsZVRyYW5z\nZm9ybWVyIHQgPSBudWxsOw0KICAgICAgICB0cnkgew0KICAgICAgICAgICAg\naW5zdCA9IEluc3RydW1lbnRhdGlvbkZhY3RvcnkuZ2V0SW5zdHJ1bWVudGF0\naW9uKCk7DQoNCiAgICAgICAgICAgIENsYXNzW10gYXJyYXkgPSBjbGFzc2Vz\nLmtleVNldCgpLnRvQXJyYXkobmV3IENsYXNzW2NsYXNzZXMuc2l6ZSgpXSk7\nDQogICAgICAgICAgICBpZiAoSmF2YVZlcnNpb25zLlZFUlNJT04gPj0gNikg\new0KICAgICAgICAgICAgICAgIGxvZy50cmFjZShfbG9jLmdldCgicmV0cmFu\nc2Zvcm0tdHlwZXMiLCBjbGFzc2VzLmtleVNldCgpKSk7DQoNCiAgICAgICAg\nICAgICAgICB0ID0gbmV3IENsYXNzRmlsZVRyYW5zZm9ybWVyKCkgew0KICAg\nICAgICAgICAgICAgICAgICBwdWJsaWMgYnl0ZVtdIHRyYW5zZm9ybShDbGFz\nc0xvYWRlciBsb2FkZXIsIFN0cmluZyBjbHNOYW1lLA0KICAgICAgICAgICAg\nICAgICAgICAgICAgQ2xhc3M8Pz4gY2xhc3NCZWluZ1JlZGVmaW5lZCwgUHJv\ndGVjdGlvbkRvbWFpbiBwZCwNCiAgICAgICAgICAgICAgICAgICAgICAgIGJ5\ndGVbXSBjbGFzc2ZpbGVCdWZmZXIpIHsNCiAgICAgICAgICAgICAgICAgICAg\nICAgIHJldHVybiBjbGFzc2VzLmdldChjbGFzc0JlaW5nUmVkZWZpbmVkKTsN\nCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH07DQog\nICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgLy8gdGhlc2UgYXJl\nIEphdmEgNiBtZXRob2RzLCBhbmQgd2UgZG9uJ3QgaGF2ZSBhIEphdmEgNiBi\ndWlsZA0KICAgICAgICAgICAgICAgIC8vIG1vZHVsZSB5ZXQuIFRoZSBjb3N0\nIG9mIHJlZmxlY3Rpb24gaGVyZSBpcyBuZWdsaWdpYmxlDQogICAgICAgICAg\nICAgICAgLy8gY29tcGFyZWQgdG8gdGhlIHJlZGVmaW5pdGlvbiAvIGVuaGFu\nY2VtZW50IGNvc3RzIGluIHRvdGFsLA0KICAgICAgICAgICAgICAgIC8vIHNv\nIHRoaXMgc2hvdWxkIG5vdCBiZSBhIGJpZyBwcm9ibGVtLg0KICAgICAgICAg\nICAgICAgIE1ldGhvZCBtZXRoID0gaW5zdC5nZXRDbGFzcygpLmdldE1ldGhv\nZCgiYWRkVHJhbnNmb3JtZXIiLA0KICAgICAgICAgICAgICAgICAgICBuZXcg\nQ2xhc3NbXSB7IENsYXNzRmlsZVRyYW5zZm9ybWVyLmNsYXNzLCBib29sZWFu\nLmNsYXNzIH0pOw0KICAgICAgICAgICAgICAgIG1ldGguaW52b2tlKGluc3Qs\nIG5ldyBPYmplY3RbXSB7IHQsIHRydWUgfSk7DQogICAgICAgICAgICAgICAg\nbWV0aCA9IGluc3QuZ2V0Q2xhc3MoKS5nZXRNZXRob2QoInJldHJhbnNmb3Jt\nQ2xhc3NlcyIsDQogICAgICAgICAgICAgICAgICAgIG5ldyBDbGFzc1tdIHsg\nYXJyYXkuZ2V0Q2xhc3MoKSB9KTsNCiAgICAgICAgICAgICAgICBtZXRoLmlu\ndm9rZShpbnN0LCBuZXcgT2JqZWN0W10geyBhcnJheSB9KTsNCiAgICAgICAg\nICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgbG9nLnRyYWNlKF9sb2Mu\nZ2V0KCJyZWRlZmluZS10eXBlcyIsIGNsYXNzZXMua2V5U2V0KCkpKTsNCiAg\nICAgICAgICAgICAgICAvLyBpbiBhIEphdmEgNSBjb250ZXh0LCB3ZSBjYW4g\ndXNlIGNsYXNzIHJlZGVmaW5pdGlvbiBpbnN0ZWFkDQogICAgICAgICAgICAg\nICAgQ2xhc3NEZWZpbml0aW9uW10gZGVmcyA9IG5ldyBDbGFzc0RlZmluaXRp\nb25bYXJyYXkubGVuZ3RoXTsNCiAgICAgICAgICAgICAgICBmb3IgKGludCBp\nID0gMDsgaSA8IGRlZnMubGVuZ3RoOyBpKyspDQogICAgICAgICAgICAgICAg\nICAgIGRlZnNbaV0gPSBuZXcgQ2xhc3NEZWZpbml0aW9uKGFycmF5W2ldLA0K\nICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3Nlcy5nZXQoYXJyYXlbaV0p\nKTsNCiAgICAgICAgICAgICAgICBpbnN0LnJlZGVmaW5lQ2xhc3NlcyhkZWZz\nKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSBjYXRjaCAoTm9TdWNoTWV0\naG9kRXhjZXB0aW9uIGUpIHsNCiAgICAgICAgICAgIHRocm93IG5ldyBJbnRl\ncm5hbEV4Y2VwdGlvbihlKTsNCiAgICAgICAgfSBjYXRjaCAoSWxsZWdhbEFj\nY2Vzc0V4Y2VwdGlvbiBlKSB7DQogICAgICAgICAgICB0aHJvdyBuZXcgSW50\nZXJuYWxFeGNlcHRpb24oZSk7DQogICAgICAgIH0gY2F0Y2ggKEludm9jYXRp\nb25UYXJnZXRFeGNlcHRpb24gZSkgew0KICAgICAgICAgICAgdGhyb3cgbmV3\nIFVzZXJFeGNlcHRpb24oZS5nZXRDYXVzZSgpKTsNCiAgICAgICAgfSBjYXRj\naCAoSU9FeGNlcHRpb24gZSkgew0KICAgICAgICAgICAgdGhyb3cgbmV3IElu\ndGVybmFsRXhjZXB0aW9uKGUpOw0KICAgICAgICB9IGNhdGNoIChDbGFzc05v\ndEZvdW5kRXhjZXB0aW9uIGUpIHsNCiAgICAgICAgICAgIHRocm93IG5ldyBJ\nbnRlcm5hbEV4Y2VwdGlvbihlKTsNCiAgICAgICAgfSBjYXRjaCAoVW5tb2Rp\nZmlhYmxlQ2xhc3NFeGNlcHRpb24gZSkgew0KICAgICAgICAgICAgdGhyb3cg\nbmV3IEludGVybmFsRXhjZXB0aW9uKGUpOw0KICAgICAgICB9IGZpbmFsbHkg\new0KICAgICAgICAgICAgaWYgKGluc3QgIT0gbnVsbCAmJiB0ICE9IG51bGwp\nDQogICAgICAgICAgICAgICAgaW5zdC5yZW1vdmVUcmFuc2Zvcm1lcih0KTsN\nCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEByZXR1cm4g\nd2hldGhlciBvciBub3QgdGhpcyBWTSBoYXMgYW4gaW5zdHJ1bWVudGF0aW9u\nIGluc3RhbGxlZCB0aGF0DQogICAgICogcGVybWl0cyByZWRlZmluaXRpb24g\nb2YgY2xhc3Nlcy4gVGhpcyBhc3N1bWVzIHRoYXQgYWxsIHRoZSBhcmd1bWVu\ndHMNCiAgICAgKiB3aWxsIGJlIG1vZGlmaWFibGUgY2xhc3NlcyBhY2NvcmRp\nbmcgdG8NCiAgICAgKiB7QGxpbmsgamF2YS5sYW5nLmluc3RydW1lbnQuSW5z\ndHJ1bWVudGF0aW9uI2lzTW9kaWZpYWJsZUNsYXNzfSwgYW5kDQogICAgICog\nb25seSBjaGVja3Mgd2hldGhlciBvciBub3QgYW4gaW5zdHJ1bWVudGF0aW9u\nIGlzIGF2YWlsYWJsZSBhbmQNCiAgICAgKiBpZiByZXRyYW5zZm9ybWF0aW9u\nIGlzIHBvc3NpYmxlLg0KICAgICAqLw0KICAgIHB1YmxpYyBzdGF0aWMgYm9v\nbGVhbiBjYW5SZWRlZmluZUNsYXNzZXMoKSB7DQogICAgICAgIGlmIChfY2Fu\nUmVkZWZpbmUgPT0gbnVsbCkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAg\nICAgICAgICAgICBJbnN0cnVtZW50YXRpb24gaW5zdCA9IEluc3RydW1lbnRh\ndGlvbkZhY3RvcnkNCiAgICAgICAgICAgICAgICAgICAgLmdldEluc3RydW1l\nbnRhdGlvbigpOw0KICAgICAgICAgICAgICAgIGlmIChpbnN0ID09IG51bGwp\nIHsNCiAgICAgICAgICAgICAgICAgICAgX2NhblJlZGVmaW5lID0gQm9vbGVh\nbi5GQUxTRTsNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKEphdmFWZXJz\naW9ucy5WRVJTSU9OID09IDUpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8g\naWYgaW5zdCBpcyBub24tbnVsbCBhbmQgd2UncmUgdXNpbmcgSmF2YSA1LA0K\nICAgICAgICAgICAgICAgICAgICAvLyBpc1JldHJhbnNmb3JtQ2xhc3Nlc1N1\ncHBvcnRlZCBpc24ndCBhdmFpbGFibGUsDQogICAgICAgICAgICAgICAgICAg\nIC8vIHNvIHdlIHVzZSB0aGUgbW9yZSBiYXNpYyBjbGFzcyByZWRlZmluaXRp\nb24NCiAgICAgICAgICAgICAgICAgICAgLy8gaW5zdGVhZC4NCiAgICAgICAg\nICAgICAgICAgICAgX2NhblJlZGVmaW5lID0gQm9vbGVhbi5UUlVFOw0KICAg\nICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIF9j\nYW5SZWRlZmluZSA9IChCb29sZWFuKSBJbnN0cnVtZW50YXRpb24uY2xhc3Mu\nZ2V0TWV0aG9kKA0KICAgICAgICAgICAgICAgICAgICAgICAgImlzUmV0cmFu\nc2Zvcm1DbGFzc2VzU3VwcG9ydGVkIikuaW52b2tlKGluc3QpOw0KICAgICAg\nICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBl\nKSB7DQogICAgICAgICAgICAgICAgX2NhblJlZGVmaW5lID0gQm9vbGVhbi5G\nQUxTRTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1\ncm4gX2NhblJlZGVmaW5lLmJvb2xlYW5WYWx1ZSgpOw0KICAgIH0NCn0=\n","encoding":"base64"}

