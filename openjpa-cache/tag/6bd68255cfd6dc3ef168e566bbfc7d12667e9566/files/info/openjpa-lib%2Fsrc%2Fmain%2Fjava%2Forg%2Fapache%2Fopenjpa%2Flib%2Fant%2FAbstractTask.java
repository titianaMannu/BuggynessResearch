{"sha":"0fb9221eefdb3dc2b00a3c9f543a50b515f87771","node_id":"MDQ6QmxvYjIwNjM2NDowZmI5MjIxZWVmZGIzZGMyYjAwYTNjOWY1NDNhNTBiNTE1Zjg3Nzcx","size":6465,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/0fb9221eefdb3dc2b00a3c9f543a50b515f87771","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5saWIuYW50OwoKaW1wb3J0IGphdmEu\naW8uRmlsZTsKaW1wb3J0IGphdmEuc2VjdXJpdHkuQWNjZXNzQ29udHJvbGxl\ncjsKaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7CmltcG9ydCBqYXZhLnV0\naWwuSXRlcmF0b3I7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKCmltcG9ydCBv\ncmcuYXBhY2hlLnRvb2xzLmFudC5BbnRDbGFzc0xvYWRlcjsKaW1wb3J0IG9y\nZy5hcGFjaGUudG9vbHMuYW50LkJ1aWxkRXhjZXB0aW9uOwppbXBvcnQgb3Jn\nLmFwYWNoZS50b29scy5hbnQuRGlyZWN0b3J5U2Nhbm5lcjsKaW1wb3J0IG9y\nZy5hcGFjaGUudG9vbHMuYW50LnRhc2tkZWZzLk1hdGNoaW5nVGFzazsKaW1w\nb3J0IG9yZy5hcGFjaGUudG9vbHMuYW50LnR5cGVzLkZpbGVTZXQ7CmltcG9y\ndCBvcmcuYXBhY2hlLnRvb2xzLmFudC50eXBlcy5QYXRoOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmxpYi5jb25mLkNvbmZpZ3VyYXRpb247CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmNvbmYuQ29uZmlndXJhdGlvbklt\ncGw7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmNvbmYuQ29uZmln\ndXJhdGlvblByb3ZpZGVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxp\nYi5jb25mLlByb2R1Y3REZXJpdmF0aW9uczsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIudXRpbC5KMkRvUHJpdkhlbHBlcjsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6ZXI7CgovKioKICogQW50\nIHRhc2tzIGFsbCBoYXZlIGEgbmVzdGVkIDxjb2RlPiZsdDtjb25maWcmcnQ7\nPC9jb2RlPiB0YWcsIHdoaWNoIHVzZXMKICogdGhlIGNvbmZpZ3VyYXRpb24g\nYXMgYSBiZWFuLWxpa2UgdGFzay4gRS5nLiwgeW91IGNhbiBkbzoKICoKICog\nPGNvZGU+CiAqICZsdDtteXRhc2smcnQ7PGJyIC8+CiAqICZuYnNwOyZuYnNw\nOyZsdDtjb25maWcgY29ubmVjdGlvblVzZXJOYW1lPSJmb28iLyZydDs8YnIg\nLz4KICogJmx0Oy9teXRhc2smcnQ7CiAqIDwvY29kZT4KICoKICogVGhlIGRl\nZmF1bHQgY29uZmlndXJhdGlvbiBmb3IgdGhlIHN5c3RlbSB3aWxsIGJlIHVz\nZWQgaWYgdGhlCiAqIDxjb2RlPiZsdDtjb25maWcmcnQ7PC9jb2RlPiBzdWJ0\nYXNrIGlzIGV4Y2x1ZGVkLgogKgogKiBAbm9qYXZhZG9jCiAqLwpwdWJsaWMg\nYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RUYXNrIGV4dGVuZHMgTWF0Y2hpbmdU\nYXNrIHsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6ZXIgX2xv\nYyA9IExvY2FsaXplci5mb3JQYWNrYWdlCiAgICAgICAgKEFic3RyYWN0VGFz\nay5jbGFzcyk7CgogICAgcHJvdGVjdGVkIGZpbmFsIExpc3QgZmlsZVNldHMg\nPSBuZXcgQXJyYXlMaXN0KCk7CiAgICBwcm90ZWN0ZWQgYm9vbGVhbiBoYWx0\nT25FcnJvciA9IHRydWU7CiAgICBwcm90ZWN0ZWQgUGF0aCBjbGFzc3BhdGgg\nPSBudWxsOwogICAgcHJvdGVjdGVkIGJvb2xlYW4gdXNlUGFyZW50ID0gZmFs\nc2U7CiAgICBwcm90ZWN0ZWQgYm9vbGVhbiBpc29sYXRlID0gZmFsc2U7Cgog\nICAgcHJpdmF0ZSBDb25maWd1cmF0aW9uSW1wbCBfY29uZiA9IG51bGw7CiAg\nICBwcml2YXRlIEFudENsYXNzTG9hZGVyIF9jbCA9IG51bGw7CgogICAgLyoq\nCiAgICAgKiBTZXQgd2hldGhlciB3ZSB3YW50IHRoZSB0YXNrIHRvIGlnbm9y\nZSBhbGwgZXJyb3JzLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRIYWx0\nT25FcnJvcihib29sZWFuIGhhbHRPbkVycm9yKSB7CiAgICAgICAgdGhpcy5o\nYWx0T25FcnJvciA9IGhhbHRPbkVycm9yOwogICAgfQoKICAgIC8qKgogICAg\nICogV2hldGhlciB3ZSB3YW50IHRoZSBDbGFzc0xvYWRlciB0byBiZSBpc29s\nYXRlZCBmcm9tCiAgICAgKiBhbGwgb3RoZXIgQ2xhc3NMb2FkZXJzCiAgICAg\nKi8KICAgIHB1YmxpYyB2b2lkIHNldElzb2xhdGUoYm9vbGVhbiBpc29sYXRl\nKSB7CiAgICAgICAgdGhpcy5pc29sYXRlID0gaXNvbGF0ZTsKICAgIH0KCiAg\nICAvKioKICAgICAqIFdoZXRoZXIgd2Ugd2FudCB0byBkZWxlZ2F0ZSB0byB0\naGUgcGFyZW50IENsYXNzTG9hZGVyCiAgICAgKiBmb3IgcmVzb2x2ZWluZyBj\nbGFzc2VzLiBUaGlzIG1heSAidGFpbnQiIGNsYXNzZXMuCiAgICAgKi8KICAg\nIHB1YmxpYyB2b2lkIHNldFVzZVBhcmVudENsYXNzbG9hZGVyKGJvb2xlYW4g\ndXNlUGFyZW50KSB7CiAgICAgICAgdGhpcy51c2VQYXJlbnQgPSB1c2VQYXJl\nbnQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgdGFzayBjb25maWd1cmF0\naW9uLgogICAgICovCiAgICBwdWJsaWMgQ29uZmlndXJhdGlvbiBnZXRDb25m\naWd1cmF0aW9uKCkgewogICAgICAgIGlmIChfY29uZiA9PSBudWxsKQogICAg\nICAgICAgICBfY29uZiA9IG5ld0NvbmZpZ3VyYXRpb24oKTsKICAgICAgICBy\nZXR1cm4gX2NvbmY7CiAgICB9CgogICAgLyoqCiAgICAgKiBJbXBsZW1lbnQg\ndGhpcyBtZXRob2QgdG8gcmV0dXJuIGEgY29uZmlndXJhdGlvbiBvYmplY3Qg\nZm9yIHRoZQogICAgICogcHJvZHVjdCBpbiB1c2UuCiAgICAgKi8KICAgIHBy\nb3RlY3RlZCBhYnN0cmFjdCBDb25maWd1cmF0aW9uSW1wbCBuZXdDb25maWd1\ncmF0aW9uKCk7CgogICAgLyoqCiAgICAgKiBQZXJmb3JtIHRoZSB0YXNrIGFj\ndGlvbiBvbiB0aGUgZ2l2ZW4gZmlsZXMuCiAgICAgKi8KICAgIHByb3RlY3Rl\nZCBhYnN0cmFjdCB2b2lkIGV4ZWN1dGVPbihTdHJpbmdbXSBmaWxlcykgdGhy\nb3dzIEV4Y2VwdGlvbjsKCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgY2xh\nc3Nsb2FkZXIgdG8gdXNlLgogICAgICovCiAgICBwcm90ZWN0ZWQgQ2xhc3NM\nb2FkZXIgZ2V0Q2xhc3NMb2FkZXIoKSB7CiAgICAgICAgaWYgKF9jbCAhPSBu\ndWxsKQogICAgICAgICAgICByZXR1cm4gX2NsOwoKICAgICAgICBpZiAoY2xh\nc3NwYXRoICE9IG51bGwpCiAgICAgICAgICAgIF9jbCA9IG5ldyBBbnRDbGFz\nc0xvYWRlcihwcm9qZWN0LCBjbGFzc3BhdGgsIHVzZVBhcmVudCk7CiAgICAg\nICAgZWxzZQogICAgICAgICAgICBfY2wgPSBuZXcgQW50Q2xhc3NMb2FkZXIo\ncHJvamVjdC5nZXRDb3JlTG9hZGVyKCksIHByb2plY3QsCiAgICAgICAgICAg\nICAgICBuZXcgUGF0aChwcm9qZWN0KSwgdXNlUGFyZW50KTsKICAgICAgICBf\nY2wuc2V0SXNvbGF0ZWQoaXNvbGF0ZSk7CgogICAgICAgIHJldHVybiBfY2w7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBIZWxwZXIgbWV0aG9kIHRvIHRocm93\nIGEgc3RhbmRhcmQgZXhjZXB0aW9uIGlmIHRoZSB0YXNrIGlzIG5vdCBnaXZl\nbgogICAgICogYW55IGZpbGVzIHRvIGV4ZWN1dGUgb24uIEltcGxlbWVudGF0\naW9ucyBtaWdodCBjYWxsIHRoaXMgbWV0aG9kIGFzCiAgICAgKiB0aGUgZmly\nc3Qgc3RlcCBpbiB7QGxpbmsgI2V4ZWN1dGVPbn0gdG8gdmFsaWRhdGUgdGhh\ndCB0aGV5IGFyZSBnaXZlbgogICAgICogZmlsZXMgdG8gd29yayBvbi4KICAg\nICAqLwogICAgcHJvdGVjdGVkIHZvaWQgYXNzZXJ0RmlsZXMoU3RyaW5nW10g\nZmlsZXMpIHsKICAgICAgICBpZiAoZmlsZXMubGVuZ3RoID09IDApCiAgICAg\nICAgICAgIHRocm93IG5ldyBCdWlsZEV4Y2VwdGlvbihfbG9jLmdldCgibm8t\nZmlsZXNldHMiKS5nZXRNZXNzYWdlKCkpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHNldENsYXNzcGF0aChQYXRoIGNsYXNzUGF0aCkgewogICAgICAgIGNy\nZWF0ZUNsYXNzcGF0aCgpLmFwcGVuZChjbGFzc1BhdGgpOwogICAgfQoKICAg\nIHB1YmxpYyBQYXRoIGNyZWF0ZUNsYXNzcGF0aCgpIHsKICAgICAgICBpZiAo\nY2xhc3NwYXRoID09IG51bGwpCiAgICAgICAgICAgIGNsYXNzcGF0aCA9IG5l\ndyBQYXRoKHByb2plY3QpOwogICAgICAgIHJldHVybiBjbGFzc3BhdGguY3Jl\nYXRlUGF0aCgpOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgY3JlYXRlQ29u\nZmlnKCkgewogICAgICAgIHJldHVybiBnZXRDb25maWd1cmF0aW9uKCk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgYWRkRmlsZXNldChGaWxlU2V0IHNldCkg\newogICAgICAgIGZpbGVTZXRzLmFkZChzZXQpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIGV4ZWN1dGUoKSB0aHJvd3MgQnVpbGRFeGNlcHRpb24gewogICAg\nICAgIC8vIGlmIHRoZSB1c2VyIGRpZG4ndCBzdXBwbHkgYSBjb25mIGZpbGUs\nIGxvYWQgdGhlIGRlZmF1bHQKICAgICAgICBpZiAoX2NvbmYgPT0gbnVsbCkK\nICAgICAgICAgICAgX2NvbmYgPSBuZXdDb25maWd1cmF0aW9uKCk7CiAgICAg\nICAgaWYgKF9jb25mLmdldFByb3BlcnRpZXNSZXNvdXJjZSgpID09IG51bGwp\nIHsKICAgICAgICAgICAgQ29uZmlndXJhdGlvblByb3ZpZGVyIGNwID0gUHJv\nZHVjdERlcml2YXRpb25zLmxvYWREZWZhdWx0cwogICAgICAgICAgICAgICAg\nKChDbGFzc0xvYWRlcikgQWNjZXNzQ29udHJvbGxlci5kb1ByaXZpbGVnZWQo\nCiAgICAgICAgICAgICAgICAgICAgSjJEb1ByaXZIZWxwZXIuZ2V0Q2xhc3NM\nb2FkZXJBY3Rpb24oX2NvbmYuZ2V0Q2xhc3MoKSkpKTsKICAgICAgICAgICAg\naWYgKGNwICE9IG51bGwpCiAgICAgICAgICAgICAgICBjcC5zZXRJbnRvKF9j\nb25mKTsKICAgICAgICB9CgogICAgICAgIFN0cmluZ1tdIGZpbGVzID0gZ2V0\nRmlsZXMoKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBleGVjdXRlT24o\nZmlsZXMpOwogICAgICAgIH0gY2F0Y2ggKFRocm93YWJsZSBlKSB7CiAgICAg\nICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7CiAgICAgICAgICAgIGlmICho\nYWx0T25FcnJvcikKICAgICAgICAgICAgICAgIHRocm93IG5ldyBCdWlsZEV4\nY2VwdGlvbihlKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBf\nY29uZi5jbG9zZSgpOwogICAgICAgICAgICBfY29uZiA9IG51bGw7CiAgICAg\nICAgfQogICAgfQoKICAgIHByaXZhdGUgU3RyaW5nW10gZ2V0RmlsZXMoKSB7\nCiAgICAgICAgTGlzdCBmaWxlcyA9IG5ldyBBcnJheUxpc3QoKTsKICAgICAg\nICBmb3IgKEl0ZXJhdG9yIGkgPSBmaWxlU2V0cy5pdGVyYXRvcigpOyBpLmhh\nc05leHQoKTspIHsKICAgICAgICAgICAgRmlsZVNldCBmcyA9IChGaWxlU2V0\nKSBpLm5leHQoKTsKICAgICAgICAgICAgRGlyZWN0b3J5U2Nhbm5lciBkcyA9\nIGZzLmdldERpcmVjdG9yeVNjYW5uZXIocHJvamVjdCk7CgogICAgICAgICAg\nICBTdHJpbmdbXSBkc0ZpbGVzID0gZHMuZ2V0SW5jbHVkZWRGaWxlcygpOwog\nICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IGRzRmlsZXMubGVuZ3Ro\nOyBqKyspIHsKICAgICAgICAgICAgICAgIEZpbGUgZiA9IG5ldyBGaWxlKGRz\nRmlsZXNbal0pOwogICAgICAgICAgICAgICAgaWYgKCEoKEJvb2xlYW4pIEFj\nY2Vzc0NvbnRyb2xsZXIuZG9Qcml2aWxlZ2VkKEoyRG9Qcml2SGVscGVyCiAg\nICAgICAgICAgICAgICAgICAgLmlzRmlsZUFjdGlvbihmKSkpLmJvb2xlYW5W\nYWx1ZSgpKQogICAgICAgICAgICAgICAgICAgIGYgPSBuZXcgRmlsZShkcy5n\nZXRCYXNlZGlyKCksIGRzRmlsZXNbal0pOwogICAgICAgICAgICAgICAgZmls\nZXMuYWRkKChTdHJpbmcpIEFjY2Vzc0NvbnRyb2xsZXIuZG9Qcml2aWxlZ2Vk\nKAogICAgICAgICAgICAgICAgICAgIEoyRG9Qcml2SGVscGVyLmdldEFic29s\ndXRlUGF0aEFjdGlvbihmKSkpOwogICAgICAgICAgICB9CiAgICAgICAgfQog\nICAgICAgIHJldHVybiAoU3RyaW5nW10pIGZpbGVzLnRvQXJyYXkobmV3IFN0\ncmluZ1tmaWxlcy5zaXplKCldKTsKICAgIH0KfQoK\n","encoding":"base64"}

