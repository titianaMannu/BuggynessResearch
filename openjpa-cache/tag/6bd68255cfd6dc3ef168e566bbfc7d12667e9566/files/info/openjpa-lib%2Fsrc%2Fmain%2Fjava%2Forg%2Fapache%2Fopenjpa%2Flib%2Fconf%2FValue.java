{"sha":"f78dd98624499adc052789ed1002fdcaa8985abd","node_id":"MDQ6QmxvYjIwNjM2NDpmNzhkZDk4NjI0NDk5YWRjMDUyNzg5ZWQxMDAyZmRjYWE4OTg1YWJk","size":10976,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/f78dd98624499adc052789ed1002fdcaa8985abd","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmNvbmY7CgppbXBvcnQg\namF2YS51dGlsLkFycmF5czsKaW1wb3J0IGphdmEudXRpbC5NYXA7CgppbXBv\ncnQgb3JnLmFwYWNoZS5jb21tb25zLmxhbmcuU3RyaW5nVXRpbHM7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLlBhcnNlRXhjZXB0aW9u\nOwoKLyoqCiAqIEEgY29uZmlndXJhdGlvbiB2YWx1ZS4KICoKICogQGF1dGhv\nciBNYXJjIFBydWQnaG9tbWVhdXgKICovCnB1YmxpYyBhYnN0cmFjdCBjbGFz\ncyBWYWx1ZSBpbXBsZW1lbnRzIENsb25lYWJsZSB7CgogICAgcHJpdmF0ZSBz\ndGF0aWMgZmluYWwgU3RyaW5nW10gRU1QVFlfQUxJQVNFUyA9IG5ldyBTdHJp\nbmdbMF07CiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6ZXIgc19s\nb2MgPSBMb2NhbGl6ZXIuZm9yUGFja2FnZShWYWx1ZS5jbGFzcyk7CgogICAg\ncHJpdmF0ZSBTdHJpbmcgcHJvcCA9IG51bGw7CiAgICBwcml2YXRlIFN0cmlu\nZyBsb2FkS2V5ID0gbnVsbDsKICAgIHByaXZhdGUgU3RyaW5nIGRlZiA9IG51\nbGw7CiAgICBwcml2YXRlIFN0cmluZ1tdIGFsaWFzZXMgPSBudWxsOwogICAg\ncHJpdmF0ZSBTdHJpbmcgZ2V0dGVyID0gbnVsbDsKICAgIHByaXZhdGUgVmFs\ndWVMaXN0ZW5lciBsaXN0ZW4gPSBudWxsOwogICAgcHJpdmF0ZSBib29sZWFu\nIGFsaWFzTGlzdENvbXByZWhlbnNpdmUgPSBmYWxzZTsKICAgIHByaXZhdGUg\nQ2xhc3Mgc2NvcGUgPSBudWxsOwoKICAgIC8qKgogICAgICogRGVmYXVsdCBj\nb25zdHJ1Y3Rvci4KICAgICAqLwogICAgcHVibGljIFZhbHVlKCkgewogICAg\nfQoKICAgIC8qKgogICAgICogQ29uc3RydWN0b3IuIFN1cHBseSB0aGUgcHJv\ncGVydHkgbmFtZS4KICAgICAqCiAgICAgKiBAc2VlICNzZXRQcm9wZXJ0eQog\nICAgICovCiAgICBwdWJsaWMgVmFsdWUoU3RyaW5nIHByb3ApIHsKICAgICAg\nICBzZXRQcm9wZXJ0eShwcm9wKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRo\nZSBwcm9wZXJ0eSBuYW1lIHRoYXQgd2lsbCBiZSB1c2VkIHdoZW4gc2V0dGlu\nZyBvcgogICAgICogZ2V0dGluZyB0aGlzIHZhbHVlIGluIGEge0BsaW5rIE1h\ncH0uCiAgICAgKi8KICAgIHB1YmxpYyBTdHJpbmcgZ2V0UHJvcGVydHkoKSB7\nCiAgICAgICAgcmV0dXJuIHByb3A7CiAgICB9CgogICAgLyoqCiAgICAgKiBU\naGUgcHJvcGVydHkgbmFtZSB0aGF0IHdpbGwgYmUgdXNlZCB3aGVuIHNldHRp\nbmcgb3IKICAgICAqIGdldHRpbmcgdGhpcyB2YWx1ZSBpbiBhIHtAbGluayBN\nYXB9LgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRQcm9wZXJ0eShTdHJp\nbmcgcHJvcCkgewogICAgICAgIHRoaXMucHJvcCA9IHByb3A7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBUaGUga2V5IHVuZGVyIHdoaWNoIHRoaXMgdmFsdWUg\nd2FzIGxvYWRlZCwgb3IgbnVsbC4KICAgICAqLwogICAgcHVibGljIFN0cmlu\nZyBnZXRMb2FkS2V5KCkgewogICAgICAgIHJldHVybiBsb2FkS2V5OwogICAg\nfQoKICAgIC8qKgogICAgICogVGhlIGtleSB1bmRlciB3aGljaCB0aGlzIHZh\nbHVlIHdhcyBsb2FkZWQsIG9yIG51bGwuCiAgICAgKi8KICAgIHB1YmxpYyB2\nb2lkIHNldExvYWRLZXkoU3RyaW5nIGxvYWRLZXkpIHsKICAgICAgICB0aGlz\nLmxvYWRLZXkgPSBsb2FkS2V5OwogICAgfQoKICAgIC8qKgogICAgICogQWxp\nYXNlcyBmb3IgdGhlIHZhbHVlIGluIHRoZSBmb3JtIGtleTEsIHZhbHVlMSwg\na2V5MiwgdmFsdWUyLCAuLi4KICAgICAqIEFsbCBhbGlhcyB2YWx1ZXMgbXVz\ndCBiZSBpbiBzdHJpbmcgZm9ybS4KICAgICAqLwogICAgcHVibGljIFN0cmlu\nZ1tdIGdldEFsaWFzZXMoKSB7CiAgICAgICAgcmV0dXJuIChhbGlhc2VzID09\nIG51bGwpID8gRU1QVFlfQUxJQVNFUyA6IGFsaWFzZXM7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBBbGlhc2VzIGZvciB0aGUgdmFsdWUgaW4gdGhlIGZvcm0g\na2V5MSwgdmFsdWUxLCBrZXkyLCB2YWx1ZTIsIC4uLgogICAgICogQWxsIGFs\naWFzIHZhbHVlcyBtdXN0IGJlIGluIHN0cmluZyBmb3JtLgogICAgICogPHA+\nCiAgICAgKiBUbyBhdm9pZCBwb3RlbnRpYWwgc2lkZS1lZmZlY3RzLCB0aGlz\nIG1ldGhvZCBjb3BpZXMgdGhlIGFycmF5IHBhc3NlZCBpbi4KICAgICAqLwog\nICAgcHVibGljIHZvaWQgc2V0QWxpYXNlcyhTdHJpbmdbXSBhbGlhc2VzKSB7\nCiAgICAgICAgU3RyaW5nIFtdIGFTdHJpbmdzID0gbmV3IFN0cmluZ1thbGlh\nc2VzLmxlbmd0aF07CiAgICAgICAgU3lzdGVtLmFycmF5Y29weShhbGlhc2Vz\nLCAwLCBhU3RyaW5ncywgMCwgYVN0cmluZ3MubGVuZ3RoKTsKICAgICAgICB0\naGlzLmFsaWFzZXMgPSBhU3RyaW5nczsKICAgIH0KCiAgICAvKioKICAgICAq\nIFJlcGxhY2VzIGFuIGV4aXN0aW5nIGFsaWFzLCBvciBhZGRzIHRoZSBnaXZl\nbiBhbGlhcyB0byB0aGUgZnJvbnQgb2YgdGhlCiAgICAgKiBhbGlhcyBsaXN0\nIGlmIGl0IGRvZXMgbm90IGFscmVhZHkgZXhpc3QuIEFsbCBhbGlhcyB2YWx1\nZXMgbXVzdCBiZSBpbgogICAgICogc3RyaW5nIGZvcm0uCiAgICAgKi8KICAg\nIHB1YmxpYyB2b2lkIHNldEFsaWFzKFN0cmluZyBrZXksIFN0cmluZyB2YWx1\nZSkgewogICAgICAgIGFsaWFzZXMgPSBzZXRBbGlhcyhrZXksIHZhbHVlLCBh\nbGlhc2VzKTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCBhbiBhbGlhcyBp\nbnRvIGEgY3VycmVudCBhbGlhcyBsaXN0LCByZXR1cm5pbmcgdGhlIG5ldyBs\naXN0LgogICAgICovCiAgICBwcm90ZWN0ZWQgU3RyaW5nW10gc2V0QWxpYXMo\nU3RyaW5nIGtleSwgU3RyaW5nIHZhbHVlLCBTdHJpbmdbXSBhbGlhc2VzKSB7\nCiAgICAgICAgaWYgKGFsaWFzZXMgPT0gbnVsbCkKICAgICAgICAgICAgYWxp\nYXNlcyA9IEVNUFRZX0FMSUFTRVM7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7\nIGkgPCBhbGlhc2VzLmxlbmd0aDsgaSArPSAyKSB7CiAgICAgICAgICAgIGlm\nIChrZXkuZXF1YWxzKGFsaWFzZXNbaV0pKSB7CiAgICAgICAgICAgICAgICBh\nbGlhc2VzW2kgKyAxXSA9IHZhbHVlOwogICAgICAgICAgICAgICAgcmV0dXJu\nIGFsaWFzZXM7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8v\nIGFkZCBhcyBuZXcgYWxpYXMKICAgICAgICBTdHJpbmdbXSBuZXdBbGlhc2Vz\nID0gbmV3IFN0cmluZ1thbGlhc2VzLmxlbmd0aCArIDJdOwogICAgICAgIFN5\nc3RlbS5hcnJheWNvcHkoYWxpYXNlcywgMCwgbmV3QWxpYXNlcywgMiwgYWxp\nYXNlcy5sZW5ndGgpOwogICAgICAgIG5ld0FsaWFzZXNbMF0gPSBrZXk7CiAg\nICAgICAgbmV3QWxpYXNlc1sxXSA9IHZhbHVlOwogICAgICAgIHJldHVybiBu\nZXdBbGlhc2VzOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciBvciBu\nb3QgdGhlIGFsaWFzIGxpc3QgZGVmaW5lcyBhbGwgcG9zc2libGUgc2V0dGlu\nZ3MgZm9yIHRoaXMKICAgICAqIHZhbHVlLiBJZiBzbywgYW4gZXJyb3Igd2ls\nbCBiZSBnZW5lcmF0ZWQgd2hlbiBhdHRlbXB0aW5nIHRvIGludm9rZQogICAg\nICogYW55IG1ldGhvZCBvbiB0aGlzIHZhbHVlIHdpdGggYW4gdW5rbm93biBv\ncHRpb24uCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlzQWxpYXNMaXN0\nQ29tcHJlaGVuc2l2ZSgpIHsKICAgICAgICByZXR1cm4gYWxpYXNMaXN0Q29t\ncHJlaGVuc2l2ZTsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIgb3Ig\nbm90IHRoZSBhbGlhcyBsaXN0IGRlZmluZXMgYWxsIHBvc3NpYmxlIHNldHRp\nbmdzIGZvciB0aGlzCiAgICAgKiB2YWx1ZS4gSWYgc28sIGFuIGVycm9yIHdp\nbGwgYmUgZ2VuZXJhdGVkIHdoZW4gYXR0ZW1wdGluZyB0byBpbnZva2UKICAg\nICAqIGFueSBtZXRob2Qgb24gdGhpcyB2YWx1ZSB3aXRoIGFuIHVua25vd24g\nb3B0aW9uLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRBbGlhc0xpc3RD\nb21wcmVoZW5zaXZlKGJvb2xlYW4gYWxpYXNMaXN0SXNDb21wcmVoZW5zaXZl\nKSB7CiAgICAgICAgdGhpcy5hbGlhc0xpc3RDb21wcmVoZW5zaXZlID0gYWxp\nYXNMaXN0SXNDb21wcmVoZW5zaXZlOwogICAgfQoKICAgIC8qKgogICAgICog\nQWxpYXMgdGhlIGdpdmVuIHNldHRpbmcuCiAgICAgKi8KICAgIHB1YmxpYyBT\ndHJpbmcgYWxpYXMoU3RyaW5nIHN0cikgewogICAgICAgIHJldHVybiBhbGlh\ncyhzdHIsIGFsaWFzZXMsIGZhbHNlKTsKICAgIH0KCiAgICAvKioKICAgICAq\nIEFsaWFzIHRoZSBnaXZlbiBzZXR0aW5nLgogICAgICovCiAgICBwcm90ZWN0\nZWQgU3RyaW5nIGFsaWFzKFN0cmluZyBzdHIsIFN0cmluZ1tdIGFsaWFzZXMs\nIGJvb2xlYW4gbnVsbE5vdEZvdW5kKSB7CiAgICAgICAgaWYgKHN0ciAhPSBu\ndWxsKQogICAgICAgICAgICBzdHIgPSBzdHIudHJpbSgpOwogICAgICAgIGlm\nIChhbGlhc2VzID09IG51bGwgfHwgYWxpYXNlcy5sZW5ndGggPT0gMCkKICAg\nICAgICAgICAgcmV0dXJuIChudWxsTm90Rm91bmQpID8gbnVsbCA6IHN0cjsK\nCiAgICAgICAgYm9vbGVhbiBlbXB0eSA9IHN0ciAhPSBudWxsICYmIHN0ci5s\nZW5ndGgoKSA9PSAwOwogICAgICAgIGZvciAoaW50IGkgPSAxOyBpIDwgYWxp\nYXNlcy5sZW5ndGg7IGkgKz0gMikKICAgICAgICAgICAgaWYgKFN0cmluZ1V0\naWxzLmVxdWFscyhzdHIsIGFsaWFzZXNbaV0pCiAgICAgICAgICAgICAgICB8\nfCAoZW1wdHkgJiYgYWxpYXNlc1tpXSA9PSBudWxsKSkKICAgICAgICAgICAg\nICAgIHJldHVybiBhbGlhc2VzW2kgLSAxXTsKICAgICAgICByZXR1cm4gKG51\nbGxOb3RGb3VuZCkgPyBudWxsIDogc3RyOwogICAgfQoKICAgIC8qKgogICAg\nICogVW5hbGlhcyB0aGUgZ2l2ZW4gc2V0dGluZy4KICAgICAqLwogICAgcHVi\nbGljIFN0cmluZyB1bmFsaWFzKFN0cmluZyBzdHIpIHsKICAgICAgICByZXR1\ncm4gdW5hbGlhcyhzdHIsIGFsaWFzZXMsIGZhbHNlKTsKICAgIH0KCiAgICAv\nKioKICAgICAqIFVuYWxpYXMgdGhlIGdpdmVuIHNldHRpbmcuCiAgICAgKi8K\nICAgIHByb3RlY3RlZCBTdHJpbmcgdW5hbGlhcyhTdHJpbmcgc3RyLCBTdHJp\nbmdbXSBhbGlhc2VzLAogICAgICAgIGJvb2xlYW4gbnVsbE5vdEZvdW5kKSB7\nCiAgICAgICAgaWYgKHN0ciAhPSBudWxsKQogICAgICAgICAgICBzdHIgPSBz\ndHIudHJpbSgpOwoKICAgICAgICBib29sZWFuIGVtcHR5ID0gc3RyICE9IG51\nbGwgJiYgc3RyLmxlbmd0aCgpID09IDA7CiAgICAgICAgaWYgKHN0ciA9PSBu\ndWxsIHx8IChlbXB0eSAmJiBkZWYgIT0gbnVsbCkpCiAgICAgICAgICAgIHN0\nciA9IGRlZjsKICAgICAgICBpZiAoYWxpYXNlcyAhPSBudWxsKQogICAgICAg\nICAgICBmb3IgKGludCBpID0gMDsgaSA8IGFsaWFzZXMubGVuZ3RoOyBpICs9\nIDIpCiAgICAgICAgICAgICAgICBpZiAoU3RyaW5nVXRpbHMuZXF1YWxzKHN0\nciwgYWxpYXNlc1tpXSkKICAgICAgICAgICAgICAgICAgICB8fCBTdHJpbmdV\ndGlscy5lcXVhbHMoc3RyLCBhbGlhc2VzW2kgKyAxXSkKICAgICAgICAgICAg\nICAgICAgICB8fCAoZW1wdHkgJiYgYWxpYXNlc1tpXSA9PSBudWxsKSkKICAg\nICAgICAgICAgICAgICAgICByZXR1cm4gYWxpYXNlc1tpICsgMV07CgogICAg\nICAgIGlmIChpc0FsaWFzTGlzdENvbXByZWhlbnNpdmUoKSAmJiBhbGlhc2Vz\nICE9IG51bGwpCiAgICAgICAgICAgIHRocm93IG5ldyBQYXJzZUV4Y2VwdGlv\nbihzX2xvYy5nZXQoImludmFsaWQtZW51bWVyYXRlZC1jb25maWciLAogICAg\nICAgICAgICAgICAgZ2V0UHJvcGVydHkoKSwgc3RyLCBBcnJheXMuYXNMaXN0\nKGFsaWFzZXMpKSk7CgogICAgICAgIHJldHVybiAobnVsbE5vdEZvdW5kKSA/\nIG51bGwgOiBzdHI7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgZGVmYXVs\ndCB2YWx1ZSBmb3IgdGhlIHByb3BlcnR5IGFzIGEgc3RyaW5nLgogICAgICov\nCiAgICBwdWJsaWMgU3RyaW5nIGdldERlZmF1bHQoKSB7CiAgICAgICAgcmV0\ndXJuIGRlZjsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBkZWZhdWx0IHZh\nbHVlIGZvciB0aGUgcHJvcGVydCBhcyBhIHN0cmluZy4KICAgICAqLwogICAg\ncHVibGljIHZvaWQgc2V0RGVmYXVsdChTdHJpbmcgZGVmKSB7CiAgICAgICAg\ndGhpcy5kZWYgPSBkZWY7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgbmFt\nZSBvZiB0aGUgZ2V0dGVyIG1ldGhvZCBmb3IgdGhlIGluc3RhbnRpYXRlZCB2\nYWx1ZSBvZiB0aGlzCiAgICAgKiBwcm9wZXJ0eShhcyBvcHBvc2VkIHRvIHRo\nZSBzdHJpbmcgdmFsdWUpCiAgICAgKi8KICAgIHB1YmxpYyBTdHJpbmcgZ2V0\nSW5zdGFudGlhdGluZ0dldHRlcigpIHsKICAgICAgICByZXR1cm4gZ2V0dGVy\nOwogICAgfQoKICAgIC8qKgogICAgICogVGhlIG5hbWUgb2YgdGhlIGdldHRl\nciBtZXRob2QgZm9yIHRoZSBpbnN0YW50aWF0ZWQgdmFsdWUgb2YgdGhpcwog\nICAgICogcHJvcGVydHkoYXMgb3Bwb3NlZCB0byB0aGUgc3RyaW5nIHZhbHVl\nKS4gSWYgdGhlIHN0cmluZyBzdGFydHMgd2l0aAogICAgICogPGNvZGU+dGhp\ncy48L2NvZGU+LCB0aGVuIHRoZSBnZXR0ZXIgd2lsbCBiZSBsb29rZWQgdXAg\nb24gdGhlIHZhbHVlCiAgICAgKiBpbnN0YW5jZSBpdHNlbGYuIE90aGVyd2lz\nZSwgdGhlIGdldHRlciB3aWxsIGJlIGxvb2tlZCB1cCBvbiB0aGUKICAgICAq\nIGNvbmZpZ3VyYXRpb24gaW5zdGFuY2UuCiAgICAgKi8KICAgIHB1YmxpYyB2\nb2lkIHNldEluc3RhbnRpYXRpbmdHZXR0ZXIoU3RyaW5nIGdldHRlcikgewog\nICAgICAgIHRoaXMuZ2V0dGVyID0gZ2V0dGVyOwogICAgfQoKICAgIC8qKgog\nICAgICogQSBjbGFzcyBkZWZpbmluZyB0aGUgc2NvcGUgaW4gd2hpY2ggdGhp\ncyB2YWx1ZSBpcyBkZWZpbmVkLiBUaGlzIHdpbGwKICAgICAqIGJlIHVzZWQg\nYnkgdGhlIGNvbmZpZ3VyYXRpb24gZnJhbWV3b3JrIHRvIGxvb2sgdXAgbWV0\nYWRhdGEgYWJvdXQKICAgICAqIHRoZSB2YWx1ZS4KICAgICAqLwogICAgcHVi\nbGljIENsYXNzIGdldFNjb3BlKCkgewogICAgICAgIHJldHVybiBzY29wZTsK\nICAgIH0KCiAgICAvKioKICAgICAqIEEgY2xhc3MgZGVmaW5pbmcgdGhlIHNj\nb3BlIGluIHdoaWNoIHRoaXMgdmFsdWUgaXMgZGVmaW5lZC4gVGhpcyB3aWxs\nCiAgICAgKiBiZSB1c2VkIGJ5IHRoZSBjb25maWd1cmF0aW9uIGZyYW1ld29y\nayB0byBsb29rIHVwIG1ldGFkYXRhIGFib3V0CiAgICAgKiB0aGUgdmFsdWUu\nCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFNjb3BlKENsYXNzIGNscykg\newogICAgICAgIHNjb3BlID0gY2xzOwogICAgfQoKICAgIC8qKgogICAgICog\nUmV0dXJuIGEgc3RyaW5naWZpZWQgdmVyc2lvbiBvZiB0aGlzIHZhbHVlLiBJ\nZiB0aGUgY3VycmVudCB2YWx1ZSBoYXMKICAgICAqIGEgc2hvcnQgYWxpYXMg\na2V5LCB0aGUgYWxpYXMga2V5IGlzIHJldHVybmVkLgogICAgICovCiAgICBw\ndWJsaWMgU3RyaW5nIGdldFN0cmluZygpIHsKICAgICAgICByZXR1cm4gYWxp\nYXMoZ2V0SW50ZXJuYWxTdHJpbmcoKSk7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBTZXQgdGhpcyB2YWx1ZSBmcm9tIHRoZSBnaXZlbiBzdHJpbmcuIElmIHRo\nZSBnaXZlbiBzdHJpbmcgaXMgbnVsbCBvcgogICAgICogZW1wdHkgYW5kIGEg\nZGVmYXVsdCBpcyBkZWZpbmVkLCB0aGUgZGVmYXVsdCBpcyB1c2VkLiBJZiB0\naGUgZ2l2ZW4KICAgICAqIHN0cmluZyhvciBkZWZhdWx0KSBpcyBhbiBhbGlh\ncyBrZXksIGl0IHdpbGwgYmUgY29udmVydGVkIHRvIHRoZQogICAgICogY29y\ncmVzcG9uZGluZyB2YWx1ZSBpbnRlcm5hbGx5LgogICAgICovCiAgICBwdWJs\naWMgdm9pZCBzZXRTdHJpbmcoU3RyaW5nIHZhbCkgewogICAgICAgIFN0cmlu\nZyBzdHIgPSB1bmFsaWFzKHZhbCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgc2V0SW50ZXJuYWxTdHJpbmcoc3RyKTsKICAgICAgICB9IGNhdGNoIChQ\nYXJzZUV4Y2VwdGlvbiBwZSkgewogICAgICAgICAgICB0aHJvdyBwZTsKICAg\nICAgICB9IGNhdGNoIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAg\nICAgIHRocm93IG5ldyBQYXJzZUV4Y2VwdGlvbihwcm9wICsgIjogIiArIHZh\nbCwgcmUpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFNldCB0\naGlzIHZhbHVlIGFzIGFuIG9iamVjdC4KICAgICAqLwogICAgcHVibGljIHZv\naWQgc2V0T2JqZWN0KE9iamVjdCBvYmopIHsKICAgICAgICAvLyBpZiBzZXR0\naW5nIHRvIG51bGwgc2V0IGFzIHN0cmluZyB0byBnZXQgZGVmYXVsdHMgaW50\nbyBwbGF5CiAgICAgICAgaWYgKG9iaiA9PSBudWxsICYmIGRlZiAhPSBudWxs\nKQogICAgICAgICAgICBzZXRTdHJpbmcobnVsbCk7CiAgICAgICAgZWxzZSB7\nCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBzZXRJbnRlcm5h\nbE9iamVjdChvYmopOwogICAgICAgICAgICB9IGNhdGNoIChQYXJzZUV4Y2Vw\ndGlvbiBwZSkgewogICAgICAgICAgICAgICAgdGhyb3cgcGU7CiAgICAgICAg\nICAgIH0gY2F0Y2ggKFJ1bnRpbWVFeGNlcHRpb24gcmUpIHsKICAgICAgICAg\nICAgICAgIHRocm93IG5ldyBQYXJzZUV4Y2VwdGlvbihwcm9wICsgIjogIiAr\nIG9iaiwgcmUpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAg\nIC8qKgogICAgICogUmV0dXJucyB0aGUgdHlwZSBvZiB0aGUgcHJvcGVydHkg\ndGhhdCB0aGlzIFZhbHVlIHJlcHJlc2VudHMuCiAgICAgKi8KICAgIHB1Ymxp\nYyBhYnN0cmFjdCBDbGFzcyBnZXRWYWx1ZVR5cGUoKTsKCiAgICAvKioKICAg\nICAqIFJldHVybiB0aGUgaW50ZXJuYWwgc3RyaW5nIGZvcm0gb2YgdGhpcyB2\nYWx1ZS4KICAgICAqLwogICAgcHJvdGVjdGVkIGFic3RyYWN0IFN0cmluZyBn\nZXRJbnRlcm5hbFN0cmluZygpOwoKICAgIC8qKgogICAgICogU2V0IHRoaXMg\ndmFsdWUgZnJvbSB0aGUgZ2l2ZW4gc3RyaW5nLgogICAgICovCiAgICBwcm90\nZWN0ZWQgYWJzdHJhY3Qgdm9pZCBzZXRJbnRlcm5hbFN0cmluZyhTdHJpbmcg\nc3RyKTsKCiAgICAvKioKICAgICAqIFNldCB0aGlzIHZhbHVlIGZyb20gYW4g\nb2JqZWN0LgogICAgICovCiAgICBwcm90ZWN0ZWQgYWJzdHJhY3Qgdm9pZCBz\nZXRJbnRlcm5hbE9iamVjdChPYmplY3Qgb2JqKTsKCiAgICAvKioKICAgICAq\nIExpc3RlbmVyIGZvciB2YWx1ZSBjaGFuZ2VzLgogICAgICovCiAgICBwdWJs\naWMgVmFsdWVMaXN0ZW5lciBnZXRMaXN0ZW5lcigpIHsKICAgICAgICByZXR1\ncm4gdGhpcy5saXN0ZW47CiAgICB9CgogICAgLyoqCiAgICAgKiBMaXN0ZW5l\nciBmb3IgdmFsdWUgY2hhbmdlcy4KICAgICAqLwogICAgcHVibGljIHZvaWQg\nc2V0TGlzdGVuZXIoVmFsdWVMaXN0ZW5lciBsaXN0ZW4pIHsKICAgICAgICB0\naGlzLmxpc3RlbiA9IGxpc3RlbjsKICAgIH0KCiAgICAvKioKICAgICAqIFN1\nYmNsYXNzZXMgc2hvdWxkIGNhbGwgdGhpcyBtZXRob2Qgd2hlbiB0aGVpciBp\nbmVybmFsIHZhbHVlIGNoYW5nZXMuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lk\nIHZhbHVlQ2hhbmdlZCgpIHsKICAgICAgICBpZiAobGlzdGVuICE9IG51bGwp\nCiAgICAgICAgICAgIGxpc3Rlbi52YWx1ZUNoYW5nZWQodGhpcyk7CiAgICB9\nCgogICAgcHVibGljIGludCBoYXNoQ29kZSgpIHsKICAgICAgICBTdHJpbmcg\nc3RyID0gZ2V0U3RyaW5nKCk7CiAgICAgICAgaW50IHN0ckhhc2ggPSAoc3Ry\nID09IG51bGwpID8gMCA6IHN0ci5oYXNoQ29kZSgpOwogICAgICAgIGludCBw\ncm9wSGFzaCA9IChwcm9wID09IG51bGwpID8gMCA6IHByb3AuaGFzaENvZGUo\nKTsKICAgICAgICByZXR1cm4gc3RySGFzaCBeIHByb3BIYXNoOwogICAgfQoK\nICAgIHB1YmxpYyBib29sZWFuIGVxdWFscyhPYmplY3Qgb3RoZXIpIHsKICAg\nICAgICBpZiAob3RoZXIgPT0gdGhpcykKICAgICAgICAgICAgcmV0dXJuIHRy\ndWU7CiAgICAgICAgaWYgKCEob3RoZXIgaW5zdGFuY2VvZiBWYWx1ZSkpCiAg\nICAgICAgICAgIHJldHVybiBmYWxzZTsKCiAgICAgICAgVmFsdWUgbyA9IChW\nYWx1ZSkgb3RoZXI7CiAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWxzLmVxdWFs\ncyhwcm9wLCBvLmdldFByb3BlcnR5KCkpCiAgICAgICAgICAgICYmIFN0cmlu\nZ1V0aWxzLmVxdWFscyhnZXRTdHJpbmcoKSwgby5nZXRTdHJpbmcoKSk7CiAg\nICB9CgogICAgcHVibGljIE9iamVjdCBjbG9uZSgpIHsKICAgICAgICB0cnkg\newogICAgICAgICAgICByZXR1cm4gc3VwZXIuY2xvbmUoKTsKICAgICAgICB9\nIGNhdGNoIChDbG9uZU5vdFN1cHBvcnRlZEV4Y2VwdGlvbiBjbnNlKSB7CiAg\nICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgIH0KfQo=\n","encoding":"base64"}

