{"sha":"6077e6d0b29b7f41f723f9850d2db5de53b251e1","node_id":"MDQ6QmxvYjIwNjM2NDo2MDc3ZTZkMGIyOWI3ZjQxZjcyM2Y5ODUwZDJkYjVkZTUzYjI1MWUx","size":6220,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/6077e6d0b29b7f41f723f9850d2db5de53b251e1","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLg0KICovDQpwYWNrYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5saWIu\nZ3JhcGg7DQoNCmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0Ow0KaW1wb3J0\nIGphdmEudXRpbC5Db2xsZWN0aW9uOw0KaW1wb3J0IGphdmEudXRpbC5Db2xs\nZWN0aW9uczsNCmltcG9ydCBqYXZhLnV0aWwuSGFzaFNldDsNCmltcG9ydCBq\nYXZhLnV0aWwuSXRlcmF0b3I7DQppbXBvcnQgamF2YS51dGlsLkxpbmtlZEhh\nc2hNYXA7DQppbXBvcnQgamF2YS51dGlsLk1hcDsNCg0KLyoqDQogKiA8cD5H\ncmFwaCByZXByZXNlbnRhdGlvbiB1c2luZyB0aGUgYWRqYWNlbmN5IGxpc3Qg\nZm9ybS4gIFNlZSB0aGUgYm9vaw0KICogJ0ludHJvZHVjdGlvbiB0byBBbGdv\ncml0aG1zJyBieSBDb3JtZW4sIExlaXNlcnNvbiwgYW5kIFJpdmVzdC48L3A+\nDQogKg0KICogQGF1dGhvciBBYmUgV2hpdGUNCiAqIEBzaW5jZSAxLjAuMA0K\nICogQG5vamF2YWRvYw0KICovDQpwdWJsaWMgY2xhc3MgR3JhcGggew0KDQog\nICAgLyoqDQogICAgICogTWFwIGVhY2ggbm9kZSB0byBsaXN0IG9mIGVkZ2Vz\nIGZyb20gdGhhdCBub2RlLg0KICAgICAqIFVzaW5nIGEgTGlua2VkSGFzaE1h\ncCB0byBlbnN1cmUgb3JkZXIgb2YgaXRlcmF0b3IgcHJvY2Vzc2luZy4NCiAg\nICAgKi8gDQogICAgcHJpdmF0ZSBmaW5hbCBNYXAgX25vZGVzID0gbmV3IExp\nbmtlZEhhc2hNYXAoKTsNCg0KICAgIC8qKg0KICAgICAqIENsZWFyIHRoZSBn\ncmFwaC4NCiAgICAgKi8NCiAgICBwdWJsaWMgdm9pZCBjbGVhcigpIHsNCiAg\nICAgICAgX25vZGVzLmNsZWFyKCk7DQogICAgfQ0KDQogICAgLyoqDQogICAg\nICogUmV0dXJuIHRydWUgaWYgdGhlIGdyYXBoIGNvbnRhaW5zIHRoZSBnaXZl\nbiBub2RlLg0KICAgICAqLw0KICAgIHB1YmxpYyBib29sZWFuIGNvbnRhaW5z\nTm9kZShPYmplY3Qgbm9kZSkgew0KICAgICAgICByZXR1cm4gX25vZGVzLmNv\nbnRhaW5zS2V5KG5vZGUpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFJl\ndHVybiBhIHZpZXcgb2YgYWxsIG5vZGVzIGluIHRoZSBncmFwaC4NCiAgICAg\nKi8NCiAgICBwdWJsaWMgQ29sbGVjdGlvbiBnZXROb2RlcygpIHsNCiAgICAg\nICAgcmV0dXJuIF9ub2Rlcy5rZXlTZXQoKTsNCiAgICB9DQoNCiAgICAvKioN\nCiAgICAgKiBBZGQgYSBub2RlIHRvIHRoZSBncmFwaC4gIEFkZGluZyBhIG5v\nZGUgYSBzZWNvbmQgdGltZSBoYXMgbm8gZWZmZWN0Lg0KICAgICAqLw0KICAg\nIHB1YmxpYyB2b2lkIGFkZE5vZGUoT2JqZWN0IG5vZGUpIHsNCiAgICAgICAg\naWYgKG5vZGUgPT0gbnVsbCkNCiAgICAgICAgICAgIHRocm93IG5ldyBOdWxs\nUG9pbnRlckV4Y2VwdGlvbigibm9kZSA9IG51bGwiKTsNCiAgICAgICAgaWYg\nKCFjb250YWluc05vZGUobm9kZSkpDQogICAgICAgICAgICBfbm9kZXMucHV0\nKG5vZGUsIG51bGwpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFJlbW92\nZSBhIG5vZGUgZnJvbSB0aGUgZ3JhcGguICBBbGwgZWRnZXMgdG8gYW5kIGZy\nb20gdGhlIG5vZGUNCiAgICAgKiB3aWxsIGJlIGNsZWFyZWQuDQogICAgICoN\nCiAgICAgKiBAcmV0dXJuIHRydWUgaWYgdGhlIG5vZGUgd2FzIHJlbW92ZWQs\nIGZhbHNlIG90aGVyd2lzZQ0KICAgICAqLw0KICAgIHB1YmxpYyBib29sZWFu\nIHJlbW92ZU5vZGUoT2JqZWN0IG5vZGUpIHsNCiAgICAgICAgYm9vbGVhbiBy\nZW0gPSBjb250YWluc05vZGUobm9kZSk7DQogICAgICAgIGlmIChyZW0pIHsN\nCiAgICAgICAgICAgIENvbGxlY3Rpb24gZWRnZXMgPSBnZXRFZGdlc1RvKG5v\nZGUpOw0KICAgICAgICAgICAgZm9yIChJdGVyYXRvciBpdHIgPSBlZGdlcy5p\ndGVyYXRvcigpOyBpdHIuaGFzTmV4dCgpOykNCiAgICAgICAgICAgICAgICBy\nZW1vdmVFZGdlKChFZGdlKSBpdHIubmV4dCgpKTsNCiAgICAgICAgICAgIF9u\nb2Rlcy5yZW1vdmUobm9kZSk7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJu\nIHJlbTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBSZXR1cm4gYWxsIGVk\nZ2VzIGluIHRoZSBncmFwaC4NCiAgICAgKi8NCiAgICBwdWJsaWMgQ29sbGVj\ndGlvbiBnZXRFZGdlcygpIHsNCiAgICAgICAgQ29sbGVjdGlvbiBhbGwgPSBu\nZXcgSGFzaFNldCgpOw0KICAgICAgICBDb2xsZWN0aW9uIGVkZ2VzOw0KICAg\nICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9IF9ub2Rlcy52YWx1ZXMoKS5pdGVy\nYXRvcigpOyBpdHIuaGFzTmV4dCgpOykgew0KICAgICAgICAgICAgZWRnZXMg\nPSAoQ29sbGVjdGlvbikgaXRyLm5leHQoKTsNCiAgICAgICAgICAgIGlmIChl\nZGdlcyAhPSBudWxsKQ0KICAgICAgICAgICAgICAgIGFsbC5hZGRBbGwoZWRn\nZXMpOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBhbGw7DQogICAgfQ0K\nDQogICAgLyoqDQogICAgICogUmV0dXJuIGFsbCB0aGUgZWRnZXMgZnJvbSBh\nIHBhcnRpY3VsYXIgbm9kZS4NCiAgICAgKi8NCiAgICBwdWJsaWMgQ29sbGVj\ndGlvbiBnZXRFZGdlc0Zyb20oT2JqZWN0IG5vZGUpIHsNCiAgICAgICAgQ29s\nbGVjdGlvbiBlZGdlcyA9IChDb2xsZWN0aW9uKSBfbm9kZXMuZ2V0KG5vZGUp\nOw0KICAgICAgICByZXR1cm4gKGVkZ2VzID09IG51bGwpID8gQ29sbGVjdGlv\nbnMuRU1QVFlfTElTVCA6IGVkZ2VzOw0KICAgIH0NCg0KICAgIC8qKg0KICAg\nICAqIFJldHVybiBhbGwgdGhlIGVkZ2VzIHRvIGEgcGFydGljdWxhciBub2Rl\nLg0KICAgICAqLw0KICAgIHB1YmxpYyBDb2xsZWN0aW9uIGdldEVkZ2VzVG8o\nT2JqZWN0IG5vZGUpIHsNCiAgICAgICAgQ29sbGVjdGlvbiBlZGdlcyA9IGdl\ndEVkZ2VzKCk7DQogICAgICAgIENvbGxlY3Rpb24gdG8gPSBuZXcgQXJyYXlM\naXN0KCk7DQogICAgICAgIEVkZ2UgZWRnZTsNCiAgICAgICAgZm9yIChJdGVy\nYXRvciBpdHIgPSBlZGdlcy5pdGVyYXRvcigpOyBpdHIuaGFzTmV4dCgpOykg\new0KICAgICAgICAgICAgZWRnZSA9IChFZGdlKSBpdHIubmV4dCgpOw0KICAg\nICAgICAgICAgaWYgKGVkZ2UuaXNUbyhub2RlKSkNCiAgICAgICAgICAgICAg\nICB0by5hZGQoZWRnZSk7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHRv\nOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFJldHVybiBhbGwgdGhlIGVk\nZ2VzIGZyb20gb25lIG5vZGUgdG8gYW5vdGhlci4NCiAgICAgKi8NCiAgICBw\ndWJsaWMgQ29sbGVjdGlvbiBnZXRFZGdlcyhPYmplY3QgZnJvbSwgT2JqZWN0\nIHRvKSB7DQogICAgICAgIENvbGxlY3Rpb24gZWRnZXMgPSBnZXRFZGdlc0Zy\nb20oZnJvbSk7DQogICAgICAgIENvbGxlY3Rpb24gbWF0Y2hlcyA9IG5ldyBB\ncnJheUxpc3QoZWRnZXMuc2l6ZSgpKTsNCiAgICAgICAgRWRnZSBlZGdlOw0K\nICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9IGVkZ2VzLml0ZXJhdG9yKCk7\nIGl0ci5oYXNOZXh0KCk7KSB7DQogICAgICAgICAgICBlZGdlID0gKEVkZ2Up\nIGl0ci5uZXh0KCk7DQogICAgICAgICAgICBpZiAoZWRnZS5pc1RvKHRvKSkN\nCiAgICAgICAgICAgICAgICBtYXRjaGVzLmFkZChlZGdlKTsNCiAgICAgICAg\nfQ0KICAgICAgICByZXR1cm4gbWF0Y2hlczsNCiAgICB9DQoNCiAgICAvKioN\nCiAgICAgKiBBZGQgYW4gZWRnZSB0byB0aGUgZ3JhcGguDQogICAgICovDQog\nICAgcHVibGljIHZvaWQgYWRkRWRnZShFZGdlIGVkZ2UpIHsNCiAgICAgICAg\naWYgKCFjb250YWluc05vZGUoZWRnZS5nZXRUbygpKSkNCiAgICAgICAgICAg\nIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oZWRnZS5nZXRU\nbygpLnRvU3RyaW5nKCkpOw0KICAgICAgICBpZiAoIWNvbnRhaW5zTm9kZShl\nZGdlLmdldEZyb20oKSkpDQogICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdh\nbEFyZ3VtZW50RXhjZXB0aW9uKGVkZ2UuZ2V0RnJvbSgpLnRvU3RyaW5nKCkp\nOw0KDQogICAgICAgIENvbGxlY3Rpb24gZnJvbSA9IChDb2xsZWN0aW9uKSBf\nbm9kZXMuZ2V0KGVkZ2UuZ2V0RnJvbSgpKTsNCiAgICAgICAgaWYgKGZyb20g\nPT0gbnVsbCkgew0KICAgICAgICAgICAgZnJvbSA9IG5ldyBBcnJheUxpc3Qo\nMyk7DQogICAgICAgICAgICBfbm9kZXMucHV0KGVkZ2UuZ2V0RnJvbSgpLCBm\ncm9tKTsNCiAgICAgICAgfQ0KICAgICAgICBmcm9tLmFkZChlZGdlKTsNCg0K\nICAgICAgICBpZiAoIWVkZ2UuaXNEaXJlY3RlZCgpICYmICFlZGdlLmdldEZy\nb20oKS5lcXVhbHMoZWRnZS5nZXRUbygpKSkgew0KICAgICAgICAgICAgQ29s\nbGVjdGlvbiB0byA9IChDb2xsZWN0aW9uKSBfbm9kZXMuZ2V0KGVkZ2UuZ2V0\nVG8oKSk7DQogICAgICAgICAgICBpZiAodG8gPT0gbnVsbCkgew0KICAgICAg\nICAgICAgICAgIHRvID0gbmV3IEFycmF5TGlzdCgzKTsNCiAgICAgICAgICAg\nICAgICBfbm9kZXMucHV0KGVkZ2UuZ2V0VG8oKSwgdG8pOw0KICAgICAgICAg\nICAgfQ0KICAgICAgICAgICAgdG8uYWRkKGVkZ2UpOw0KICAgICAgICB9DQog\nICAgfQ0KDQogICAgLyoqDQogICAgICogUmVtb3ZlIGFuIGVkZ2UgZnJvbSB0\naGUgZ3JhcGguDQogICAgICoNCiAgICAgKiBAcmV0dXJuIHRydWUgaWYgdGhl\nIGVkZ2Ugd2FzIHJlbW92ZWQsIGZhbHNlIGlmIG5vdCBpbiB0aGUgZ3JhcGgN\nCiAgICAgKi8NCiAgICBwdWJsaWMgYm9vbGVhbiByZW1vdmVFZGdlKEVkZ2Ug\nZWRnZSkgew0KICAgICAgICBDb2xsZWN0aW9uIGVkZ2VzID0gKENvbGxlY3Rp\nb24pIF9ub2Rlcy5nZXQoZWRnZS5nZXRGcm9tKCkpOw0KICAgICAgICBpZiAo\nZWRnZXMgPT0gbnVsbCkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAg\nICAgICAgYm9vbGVhbiByZW0gPSBlZGdlcy5yZW1vdmUoZWRnZSk7DQogICAg\nICAgIGlmIChyZW0gJiYgIWVkZ2UuaXNEaXJlY3RlZCgpKSB7DQogICAgICAg\nICAgICBlZGdlcyA9IChDb2xsZWN0aW9uKSBfbm9kZXMuZ2V0KGVkZ2UuZ2V0\nVG8oKSk7DQogICAgICAgICAgICBpZiAoZWRnZXMgIT0gbnVsbCkNCiAgICAg\nICAgICAgICAgICBlZGdlcy5yZW1vdmUoZWRnZSk7DQogICAgICAgIH0NCiAg\nICAgICAgcmV0dXJuIHJlbTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKglD\nbGVhciBhbGwgbm9kZXMgYW5kIGVkZ2VzIG9mIHRoZSBib29ra2VlcGluZyBp\nbmZvcm1hdGlvbiBmcm9tIHRoZWlyDQogICAgICoJbGFzdCB0cmF2ZXJzYWwu\nDQogICAgICovDQogICAgcHVibGljIHZvaWQgY2xlYXJUcmF2ZXJzYWwoKSB7\nDQogICAgICAgIENvbGxlY3Rpb24gZWRnZXM7DQogICAgICAgIGZvciAoSXRl\ncmF0b3IgdmFscyA9IF9ub2Rlcy52YWx1ZXMoKS5pdGVyYXRvcigpOyB2YWxz\nLmhhc05leHQoKTspIHsNCiAgICAgICAgICAgIGVkZ2VzID0gKENvbGxlY3Rp\nb24pIHZhbHMubmV4dCgpOw0KICAgICAgICAgICAgaWYgKGVkZ2VzICE9IG51\nbGwpDQogICAgICAgICAgICAgICAgZm9yIChJdGVyYXRvciBlZCA9IGVkZ2Vz\nLml0ZXJhdG9yKCk7IGVkLmhhc05leHQoKTspDQogICAgICAgICAgICAgICAg\nICAgICgoRWRnZSkgZWQubmV4dCgpKS5jbGVhclRyYXZlcnNhbCAoKTsNCgkJ\nfQ0KCX0NCn0NCg==\n","encoding":"base64"}

