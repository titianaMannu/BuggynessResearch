{"sha":"bd0a2a4d0c8e849016bf07b71dabc07c9d415db3","node_id":"MDQ6QmxvYjIwNjM2NDpiZDBhMmE0ZDBjOGU4NDkwMTZiZjA3YjcxZGFiYzA3YzlkNDE1ZGIz","size":11694,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/bd0a2a4d0c8e849016bf07b71dabc07c9d415db3","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmxvZzsKCmltcG9ydCBq\nYXZhLmlvLkZpbGU7CmltcG9ydCBqYXZhLmlvLkZpbGVPdXRwdXRTdHJlYW07\nCmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uOwppbXBvcnQgamF2YS5pby5Q\ncmludFN0cmVhbTsKaW1wb3J0IGphdmEuaW8uUHJpbnRXcml0ZXI7CmltcG9y\ndCBqYXZhLmlvLlN0cmluZ1dyaXRlcjsKaW1wb3J0IGphdmEuc2VjdXJpdHku\nQWNjZXNzQ29udHJvbGxlcjsKaW1wb3J0IGphdmEuc2VjdXJpdHkuUHJpdmls\nZWdlZEFjdGlvbkV4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5IYXNoTWFw\nOwppbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9yOwppbXBvcnQgamF2YS51dGls\nLk1hcDsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmNvbmYuQ29u\nZmlndXJhYmxlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5jb25m\nLkNvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGli\nLmNvbmYuR2VuZXJpY0NvbmZpZ3VyYWJsZTsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIudXRpbC5GaWxlczsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5saWIudXRpbC5KMkRvUHJpdkhlbHBlcjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6ZXI7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEubGliLnV0aWwuT3B0aW9uczsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5saWIudXRpbC5jb25jdXJyZW50LkNvbmN1cnJlbnRIYXNo\nTWFwOwoKLyoqCiAqIERlZmF1bHQge0BsaW5rIExvZ0ZhY3Rvcnl9IGltcGxl\nbWVudGF0aW9uLiBGb3IgZWFzZSBvZiBhdXRvbWF0aWMKICogY29uZmlndXJh\ndGlvbiwgdGhpcyBpbXBsZW1lbnRhdGlvbiBrZXlzIG9uIG9ubHkgdGhlIGxh\nc3QgZG90LXNlcGFyYXRlZAogKiB0b2tlbiBvZiB0aGUgbG9nIGNoYW5uZWwg\nbmFtZS4KICoKICogQGF1dGhvciBQYXRyaWNrIExpbnNrZXkKICovCnB1Ymxp\nYyBjbGFzcyBMb2dGYWN0b3J5SW1wbCAKICAgIGltcGxlbWVudHMgTG9nRmFj\ndG9yeSwgR2VuZXJpY0NvbmZpZ3VyYWJsZSwgQ29uZmlndXJhYmxlIHsKCiAg\nICBwcml2YXRlIHN0YXRpYyBMb2NhbGl6ZXIgX2xvYyA9IExvY2FsaXplci5m\nb3JQYWNrYWdlKExvZ0ZhY3RvcnlJbXBsLmNsYXNzKTsKCiAgICBwdWJsaWMg\nc3RhdGljIGZpbmFsIFN0cmluZyBUUkFDRV9TVFIgPSBfbG9jLmdldCgibG9n\nLXRyYWNlIikuZ2V0TWVzc2FnZSgpOwogICAgcHVibGljIHN0YXRpYyBmaW5h\nbCBTdHJpbmcgSU5GT19TVFIgPSBfbG9jLmdldCgibG9nLWluZm8iKS5nZXRN\nZXNzYWdlKCk7CiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBXQVJO\nX1NUUiA9IF9sb2MuZ2V0KCJsb2ctd2FybiIpLmdldE1lc3NhZ2UoKTsKICAg\nIHB1YmxpYyBzdGF0aWMgZmluYWwgU3RyaW5nIEVSUk9SX1NUUiA9IF9sb2Mu\nZ2V0KCJsb2ctZXJyb3IiKS5nZXRNZXNzYWdlKCk7CiAgICBwdWJsaWMgc3Rh\ndGljIGZpbmFsIFN0cmluZyBGQVRBTF9TVFIgPSBfbG9jLmdldCgibG9nLWZh\ndGFsIikuZ2V0TWVzc2FnZSgpOwoKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwg\nU3RyaW5nIFNURE9VVCA9ICJzdGRvdXQiOwogICAgcHVibGljIHN0YXRpYyBm\naW5hbCBTdHJpbmcgU1RERVJSID0gInN0ZGVyciI7CgogICAgcHJpdmF0ZSBz\ndGF0aWMgZmluYWwgU3RyaW5nIE5FV0xJTkUgPSBKMkRvUHJpdkhlbHBlci5n\nZXRMaW5lU2VwYXJhdG9yKCk7CgogICAgLyoqCiAgICAgKiBUaGUgdGltZSBh\ndCB3aGljaCB0aGlzIGZhY3Rvcnkgd2FzIGluaXRpYWxpemVkLgogICAgICov\nCiAgICBwcm90ZWN0ZWQgZmluYWwgbG9uZyBpbml0aWFsaXphdGlvbk1pbGxp\nczsKCiAgICAvKioKICAgICAqIFRoZSB7QGxpbmsgTG9nfXMgdGhhdCB0aGlz\nIGZhY3RvcnkgbWFuYWdlcywga2V5ZWQgYnkgbG9nIGNoYW5uZWwgbmFtZS4K\nICAgICAqLwogICAgcHJpdmF0ZSBNYXAgX2xvZ3MgPSBuZXcgQ29uY3VycmVu\ndEhhc2hNYXAoKTsgLy8gPFN0cmluZyxMb2c+CgogICAgLyoqCiAgICAgKiBU\naGUgZGVmYXVsdCBsb2dnaW5nIGxldmVsLgogICAgICovCiAgICBwcml2YXRl\nIHNob3J0IF9kZWZhdWx0TG9nTGV2ZWwgPSBMb2cuSU5GTzsKCiAgICAvKioK\nICAgICAqIFN0b3JhZ2UgZm9yIGxvZ2dpbmcgbGV2ZWwgY29uZmlndXJhdGlv\nbiBzcGVjaWZpZWQgYXQgY29uZmlndXJhdGlvbiB0aW1lLgogICAgICovCiAg\nICBwcml2YXRlIE1hcCBfY29uZmlndXJlZExldmVscyA9IG5ldyBIYXNoTWFw\nKCk7IC8vIDxTdHJpbmcsSW50ZWdlcj4KCiAgICAvKioKICAgICAqIFRoZSBz\ndHJlYW0gdG8gd3JpdGUgdG8uIERlZmF1bHRzIHRvIFN5c3RlbS5lcnIuCiAg\nICAgKi8KICAgIHByaXZhdGUgUHJpbnRTdHJlYW0gX291dCA9IFN5c3RlbS5l\ncnI7CgogICAgLyoqCiAgICAgKiBBIHRva2VuIHRvIGFkZCB0byBhbGwgbG9n\nIG1lc3NhZ2VzLiBJZiA8Y29kZT5udWxsPC9jb2RlPiwgdGhlIAogICAgICog\nY29uZmlndXJhdGlvbidzIGlkIHdpbGwgYmUgdXNlZC4KICAgICAqLwogICAg\ncHJpdmF0ZSBTdHJpbmcgX2RpYWdDb250ZXh0ID0gbnVsbDsKICAgIHByaXZh\ndGUgYm9vbGVhbiBfZGlhZ0NvbnRleHRDb21wdXRlZCA9IGZhbHNlOwogICAg\nCiAgICBwcml2YXRlIENvbmZpZ3VyYXRpb24gX2NvbmY7CgoKICAgIHB1Ymxp\nYyBMb2dGYWN0b3J5SW1wbCgpIHsKICAgICAgICBpbml0aWFsaXphdGlvbk1p\nbGxpcyA9IFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpOwogICAgfQoKICAg\nIHB1YmxpYyBMb2cgZ2V0TG9nKFN0cmluZyBjaGFubmVsKSB7CiAgICAgICAg\nLy8gbm8gbG9ja2luZzsgb2sgaWYgc2FtZSBsb2cgY3JlYXRlZCBtdWx0aXBs\nZSB0aW1lcwogICAgICAgIExvZ0ltcGwgbCA9IChMb2dJbXBsKSBfbG9ncy5n\nZXQoY2hhbm5lbCk7CiAgICAgICAgaWYgKGwgPT0gbnVsbCkgewogICAgICAg\nICAgICBsID0gbmV3TG9nSW1wbCgpOwogICAgICAgICAgICBsLnNldENoYW5u\nZWwoY2hhbm5lbCk7CiAgICAgICAgICAgIFNob3J0IGx2bCA9IChTaG9ydCkg\nX2NvbmZpZ3VyZWRMZXZlbHMuZ2V0KHNob3J0ZW4oY2hhbm5lbCkpOwogICAg\nICAgICAgICBsLnNldExldmVsKGx2bCA9PSBudWxsID8gX2RlZmF1bHRMb2dM\nZXZlbCA6IGx2bC5zaG9ydFZhbHVlKCkpOwogICAgICAgICAgICBfbG9ncy5w\ndXQoY2hhbm5lbCwgbCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBsOwog\nICAgfQoKICAgIC8qKgogICAgICogQ3JlYXRlIGEgbmV3IGxvZy4gVGhlIGxv\nZyB3aWxsIGJlIGNhY2hlZC4KICAgICAqLwogICAgcHJvdGVjdGVkIExvZ0lt\ncGwgbmV3TG9nSW1wbCgpIHsKICAgICAgICByZXR1cm4gbmV3IExvZ0ltcGwo\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBzdHJpbmcgbmFtZSBvZiB0\naGUgZGVmYXVsdCBsZXZlbCBmb3IgdW5jb25maWd1cmVkIGxvZyBjaGFubmVs\nczsKICAgICAqIHVzZWQgZm9yIGF1dG9tYXRpYyBjb25maWd1cmF0aW9uLgog\nICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXREZWZhdWx0TGV2ZWwoU3RyaW5n\nIGxldmVsKSB7CiAgICAgICAgX2RlZmF1bHRMb2dMZXZlbCA9IGdldExldmVs\nKGxldmVsKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBkZWZhdWx0IGxl\ndmVsIGZvciB1bmNvbmZpZ3VyZWQgbG9nIGNoYW5uZWxzLgogICAgICovCiAg\nICBwdWJsaWMgc2hvcnQgZ2V0RGVmYXVsdExldmVsKCkgewogICAgICAgIHJl\ndHVybiBfZGVmYXVsdExvZ0xldmVsOwogICAgfQoKICAgIC8qKgogICAgICog\nVGhlIGRlZmF1bHQgbGV2ZWwgZm9yIHVuY29uZmlndXJlZCBsb2cgY2hhbm5l\nbHMuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldERlZmF1bHRMZXZlbChz\naG9ydCBsZXZlbCkgewogICAgICAgIF9kZWZhdWx0TG9nTGV2ZWwgPSBsZXZl\nbDsKICAgIH0KCiAgICAvKioKICAgICAqIEEgc3RyaW5nIHRvIHByZWZpeCBh\nbGwgbG9nIG1lc3NhZ2VzIHdpdGguIFNldCB0bwogICAgICogPGNvZGU+bnVs\nbDwvY29kZT4gdG8gdXNlIHRoZSBjb25maWd1cmF0aW9uJ3MgSWQgcHJvcGVy\ndHkgc2V0dGluZy4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0RGlhZ25v\nc3RpY0NvbnRleHQoU3RyaW5nIHZhbCkgewogICAgICAgIF9kaWFnQ29udGV4\ndCA9IHZhbDsKICAgIH0KCiAgICAvKioKICAgICAqIEEgc3RyaW5nIHRvIHBy\nZWZpeCBhbGwgbG9nIG1lc3NhZ2VzIHdpdGguIFNldCB0bwogICAgICogPGNv\nZGU+bnVsbDwvY29kZT4gdG8gdXNlIHRoZSBjb25maWd1cmF0aW9uJ3MgSWQg\ncHJvcGVydHkgc2V0dGluZy4KICAgICAqLwogICAgcHVibGljIFN0cmluZyBn\nZXREaWFnbm9zdGljQ29udGV4dCgpIHsKICAgICAgICBpZiAoIV9kaWFnQ29u\ndGV4dENvbXB1dGVkKSB7CiAgICAgICAgICAgIC8vIHRoaXMgaW5pdGlhbGl6\nYXRpb24gaGFzIHRvIGhhcHBlbiBsYXppbHkgYmVjYXVzZSB0aGVyZSBpcyBu\nbwogICAgICAgICAgICAvLyBndWFyYW50ZWUgdGhhdCBjb25mLmdldElkKCkg\nd2lsbCBiZSBwb3B1bGF0ZWQgYnkgdGhlIHRpbWUgdGhhdAogICAgICAgICAg\nICAvLyBlbmRDb25maWd1cmF0aW9uKCkgaXMgY2FsbGVkLgogICAgICAgICAg\nICBpZiAoX2RpYWdDb250ZXh0ID09IG51bGwgJiYgX2NvbmYgIT0gbnVsbCkg\newogICAgICAgICAgICAgICAgX2RpYWdDb250ZXh0ID0gX2NvbmYuZ2V0SWQo\nKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIiIuZXF1YWxzKF9k\naWFnQ29udGV4dCkpCiAgICAgICAgICAgICAgICBfZGlhZ0NvbnRleHQgPSBu\ndWxsOwogICAgICAgICAgICBfZGlhZ0NvbnRleHRDb21wdXRlZCA9IHRydWU7\nCiAgICAgICAgfQogICAgICAgIHJldHVybiBfZGlhZ0NvbnRleHQ7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBUaGUgc3RyZWFtIHRvIHdyaXRlIHRvLiBSZWNv\nZ25pemVkIHZhbHVlcyBhcmU6IDxjb2RlPnN0ZG91dDwvY29kZT4KICAgICAq\nIGFuZCA8Y29kZT5zdGRlcnI8L2NvZGU+LiBBbnkgb3RoZXIgdmFsdWUgd2ls\nbCBiZSBjb25zaWRlcmVkIGEgZmlsZSBuYW1lLgogICAgICovCiAgICBwdWJs\naWMgdm9pZCBzZXRGaWxlKFN0cmluZyBmaWxlKSB7CiAgICAgICAgaWYgKFNU\nRE9VVC5lcXVhbHMoZmlsZSkpCiAgICAgICAgICAgIF9vdXQgPSBTeXN0ZW0u\nb3V0OwogICAgICAgIGVsc2UgaWYgKFNUREVSUi5lcXVhbHMoZmlsZSkpCiAg\nICAgICAgICAgIF9vdXQgPSBTeXN0ZW0uZXJyOwogICAgICAgIGVsc2Ugewog\nICAgICAgICAgICBGaWxlIGYgPSBGaWxlcy5nZXRGaWxlKGZpbGUsIG51bGwp\nOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgX291dCA9IG5l\ndyBQcmludFN0cmVhbSgoRmlsZU91dHB1dFN0cmVhbSkKICAgICAgICAgICAg\nICAgICAgICBBY2Nlc3NDb250cm9sbGVyLmRvUHJpdmlsZWdlZCgKICAgICAg\nICAgICAgICAgICAgICAgICAgSjJEb1ByaXZIZWxwZXIubmV3RmlsZU91dHB1\ndFN0cmVhbUFjdGlvbigKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChT\ndHJpbmcpIEFjY2Vzc0NvbnRyb2xsZXIuZG9Qcml2aWxlZ2VkKAogICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgIEoyRG9Qcml2SGVscGVyLmdldENh\nbm9uaWNhbFBhdGhBY3Rpb24oZikpLAogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgdHJ1ZSkpKTsKICAgICAgICAgICAgfSBjYXRjaCAoUHJpdmlsZWdl\nZEFjdGlvbkV4Y2VwdGlvbiBwYWUpIHsKICAgICAgICAgICAgICAgIHRocm93\nIG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oX2xvYy5nZXQoImxvZy1i\nYWQtZmlsZSIsCiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUpICsgIiAi\nICsgcGFlLmdldEV4Y2VwdGlvbigpKTsKICAgICAgICAgICAgfSBjYXRjaCAo\nSU9FeGNlcHRpb24gaW9lKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcg\nSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKF9sb2MuZ2V0KCJsb2ctYmFkLWZp\nbGUiLAogICAgICAgICAgICAgICAgICAgIGZpbGUpICsgIiAiICsgaW9lLnRv\nU3RyaW5nKCkpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAg\nIC8qKgogICAgICogVGhlIHN0cmVhbSB0byB3cml0ZSB0by4KICAgICAqLwog\nICAgcHVibGljIFByaW50U3RyZWFtIGdldFN0cmVhbSgpIHsKICAgICAgICBy\nZXR1cm4gX291dDsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBzdHJlYW0g\ndG8gd3JpdGUgdG8uCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFN0cmVh\nbShQcmludFN0cmVhbSBzdHJlYW0pIHsKICAgICAgICBpZiAoc3RyZWFtID09\nIG51bGwpCiAgICAgICAgICAgIHRocm93IG5ldyBOdWxsUG9pbnRlckV4Y2Vw\ndGlvbigic3RyZWFtID09IG51bGwiKTsKICAgICAgICBfb3V0ID0gc3RyZWFt\nOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBhIHN0cmluZyByZXBy\nZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGxvZyBsZXZlbCBjb25zdGFu\ndC4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBTdHJpbmcgZ2V0TGV2ZWxO\nYW1lKHNob3J0IGxldmVsKSB7CiAgICAgICAgc3dpdGNoIChsZXZlbCkgewog\nICAgICAgICAgICBjYXNlIExvZy5UUkFDRToKICAgICAgICAgICAgICAgIHJl\ndHVybiBUUkFDRV9TVFI7CiAgICAgICAgICAgIGNhc2UgTG9nLklORk86CiAg\nICAgICAgICAgICAgICByZXR1cm4gSU5GT19TVFI7CiAgICAgICAgICAgIGNh\nc2UgTG9nLldBUk46CiAgICAgICAgICAgICAgICByZXR1cm4gV0FSTl9TVFI7\nCiAgICAgICAgICAgIGNhc2UgTG9nLkVSUk9SOgogICAgICAgICAgICAgICAg\ncmV0dXJuIEVSUk9SX1NUUjsKICAgICAgICAgICAgY2FzZSBMb2cuRkFUQUw6\nCiAgICAgICAgICAgICAgICByZXR1cm4gRkFUQUxfU1RSOwogICAgICAgICAg\nICBkZWZhdWx0OgogICAgICAgICAgICAgICAgcmV0dXJuIF9sb2MuZ2V0KCJs\nb2ctdW5rbm93biIpLmdldE1lc3NhZ2UoKTsKICAgICAgICB9CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBSZXR1cm5zIGEgc3ltYm9saWMgY29uc3RhbnQgZm9y\nIHRoZSBzcGVjaWZpZWQgc3RyaW5nIGxldmVsLgogICAgICovCiAgICBwdWJs\naWMgc3RhdGljIHNob3J0IGdldExldmVsKFN0cmluZyBzdHIpIHsKICAgICAg\nICBzdHIgPSBzdHIudG9VcHBlckNhc2UoKS50cmltKCk7CiAgICAgICAgc2hv\ncnQgdmFsID0gVFJBQ0VfU1RSLmVxdWFscyhzdHIpID8gTG9nLlRSQUNFIDoK\nICAgICAgICAgICAgSU5GT19TVFIuZXF1YWxzKHN0cikgPyBMb2cuSU5GTyA6\nCiAgICAgICAgICAgICAgICBXQVJOX1NUUi5lcXVhbHMoc3RyKSA/IExvZy5X\nQVJOIDoKICAgICAgICAgICAgICAgICAgICBFUlJPUl9TVFIuZXF1YWxzKHN0\ncikgPyBMb2cuRVJST1IgOgogICAgICAgICAgICAgICAgICAgICAgICBGQVRB\nTF9TVFIuZXF1YWxzKHN0cikgPyBMb2cuRkFUQUwgOiAtMTsKCiAgICAgICAg\naWYgKHZhbCA9PSAtMSkKICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxB\ncmd1bWVudEV4Y2VwdGlvbgogICAgICAgICAgICAgICAgKF9sb2MuZ2V0KCJs\nb2ctYmFkLWNvbnN0YW50Iiwgc3RyKS5nZXRNZXNzYWdlKCkpOwoKICAgICAg\nICByZXR1cm4gdmFsOwogICAgfQoKICAgIC8vIC0tLS0tLS0tLS0gQ29uZmln\ndXJhYmxlIGltcGxlbWVudGF0aW9uIC0tLS0tLS0tLS0KICAgIAogICAgcHVi\nbGljIHZvaWQgc2V0Q29uZmlndXJhdGlvbihDb25maWd1cmF0aW9uIGNvbmYp\nIHsKICAgICAgICBfY29uZiA9IGNvbmY7CiAgICB9CiAgICAKICAgIHB1Ymxp\nYyB2b2lkIHN0YXJ0Q29uZmlndXJhdGlvbigpIHsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBlbmRDb25maWd1cmF0aW9uKCkgewogICAgfQoKICAgIC8vIC0t\nLS0tLS0tLS0gR2VuZXJpY0NvbmZpZ3VyYWJsZSBpbXBsZW1lbnRhdGlvbiAt\nLS0tLS0tLS0tCgogICAgcHVibGljIHZvaWQgc2V0SW50byhPcHRpb25zIG9w\ndHMpIHsKICAgICAgICBpZiAoIW9wdHMuaXNFbXB0eSgpKSB7CiAgICAgICAg\nICAgIE1hcC5FbnRyeSBlOwogICAgICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0\nZXIgPSBvcHRzLmVudHJ5U2V0KCkuaXRlcmF0b3IoKTsgaXRlci5oYXNOZXh0\nKCk7KSB7CiAgICAgICAgICAgICAgICBlID0gKE1hcC5FbnRyeSkgaXRlci5u\nZXh0KCk7CiAgICAgICAgICAgICAgICBfY29uZmlndXJlZExldmVscy5wdXQo\nc2hvcnRlbigoU3RyaW5nKSBlLmdldEtleSgpKSwKICAgICAgICAgICAgICAg\nICAgICBuZXcgU2hvcnQoZ2V0TGV2ZWwoKFN0cmluZykgZS5nZXRWYWx1ZSgp\nKSkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG9wdHMuY2xlYXIoKTsK\nICAgICAgICB9CiAgICB9CgogICAgcHJpdmF0ZSBzdGF0aWMgU3RyaW5nIHNo\nb3J0ZW4oU3RyaW5nIGNoYW5uZWwpIHsKICAgICAgICByZXR1cm4gY2hhbm5l\nbC5zdWJzdHJpbmcoY2hhbm5lbC5sYXN0SW5kZXhPZignLicpICsgMSk7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBBIHNpbXBsZSBpbXBsZW1lbnRhdGlvbiBv\nZiB0aGUge0BsaW5rIExvZ30gaW50ZXJmYWNlLiBXcml0ZXMKICAgICAqIG91\ndHB1dCB0byBzdGRlcnIuCiAgICAgKi8KICAgIHB1YmxpYyBjbGFzcyBMb2dJ\nbXBsIGV4dGVuZHMgQWJzdHJhY3RMb2cgewoKICAgICAgICBwcml2YXRlIHNo\nb3J0IF9sZXZlbCA9IElORk87CiAgICAgICAgcHJpdmF0ZSBTdHJpbmcgX2No\nYW5uZWw7CgogICAgICAgIHByb3RlY3RlZCBib29sZWFuIGlzRW5hYmxlZChz\naG9ydCBsZXZlbCkgewogICAgICAgICAgICByZXR1cm4gbGV2ZWwgPj0gX2xl\ndmVsOwogICAgICAgIH0KCiAgICAgICAgcHJvdGVjdGVkIHZvaWQgbG9nKHNo\nb3J0IGxldmVsLCBTdHJpbmcgbWVzc2FnZSwgVGhyb3dhYmxlIHQpIHsKICAg\nICAgICAgICAgU3RyaW5nIG1zZyA9IGZvcm1hdE1lc3NhZ2UobGV2ZWwsIG1l\nc3NhZ2UsIHQpOwogICAgICAgICAgICBzeW5jaHJvbml6ZWQgKF9vdXQpIHsK\nICAgICAgICAgICAgICAgIF9vdXQucHJpbnQobXNnKTsKICAgICAgICAgICAg\nfQogICAgICAgIH0KCiAgICAgICAgLyoqCiAgICAgICAgICogQ29udmVydCA8\nY29kZT5tZXNzYWdlPC9jb2RlPiBpbnRvIGEgc3RyaW5nIHJlYWR5IHRvIGJl\nIHdyaXR0ZW4gdG8KICAgICAgICAgKiB0aGUgbG9nLiBUaGUgc3RyaW5nIHNo\nb3VsZCBpbmNsdWRlIHRoZSB0ZXJtaW5hdGluZyBuZXdsaW5lLgogICAgICAg\nICAqCiAgICAgICAgICogQHBhcmFtIHQgbWF5IGJlIG51bGwKICAgICAgICAg\nKi8KICAgICAgICBwcm90ZWN0ZWQgU3RyaW5nIGZvcm1hdE1lc3NhZ2Uoc2hv\ncnQgbGV2ZWwsIFN0cmluZyBtZXNzYWdlLAogICAgICAgICAgICBUaHJvd2Fi\nbGUgdCkgewogICAgICAgICAgICAvLyB3ZSB3cml0ZSB0byBhIFN0cmluZ0J1\nZmZlciBhbmQgdGhlbiBmbHVzaCBpdCBhbGwgYXQKICAgICAgICAgICAgLy8g\nb25jZSBhcyBhIHNpbmdsZSBsaW5lLCBzaW5jZSBzb21lIGVudmlyb25tZW50\ncyhlLmcuLCBKQm9zcykKICAgICAgICAgICAgLy8gb3ZlcnJpZGUgdGhlIFN5\nc3RlbSBvdXRwdXQgc3RyZWFtIHRvIGZsdXNoIGFueSBjYWxscwogICAgICAg\nICAgICAvLyB0byB3cml0ZSB3aXRob3V0IHJlZ2FyZCB0byBsaW5lIGJyZWFr\ncywgbWFraW5nIHRoZQogICAgICAgICAgICAvLyBvdXRwdXQgaW5jb21wcmVo\nZW5zaWJlLgogICAgICAgICAgICBTdHJpbmdCdWZmZXIgYnVmID0gbmV3IFN0\ncmluZ0J1ZmZlcigpOwoKICAgICAgICAgICAgYnVmLmFwcGVuZChnZXRPZmZz\nZXQoKSk7CiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoIiAgIik7CiAgICAgICAg\nICAgIGlmIChnZXREaWFnbm9zdGljQ29udGV4dCgpICE9IG51bGwpCiAgICAg\nICAgICAgICAgICBidWYuYXBwZW5kKGdldERpYWdub3N0aWNDb250ZXh0KCkp\nLmFwcGVuZCgiICAiKTsKICAgICAgICAgICAgYnVmLmFwcGVuZChnZXRMZXZl\nbE5hbWUobGV2ZWwpKTsKICAgICAgICAgICAgaWYgKGxldmVsID09IElORk8g\nfHwgbGV2ZWwgPT0gV0FSTikKICAgICAgICAgICAgICAgIGJ1Zi5hcHBlbmQo\nIiAiKTsKICAgICAgICAgICAgYnVmLmFwcGVuZCgiICBbIik7CiAgICAgICAg\nICAgIGJ1Zi5hcHBlbmQoVGhyZWFkLmN1cnJlbnRUaHJlYWQoKS5nZXROYW1l\nKCkpOwogICAgICAgICAgICBidWYuYXBwZW5kKCJdICIpOwogICAgICAgICAg\nICBidWYuYXBwZW5kKF9jaGFubmVsKTsKICAgICAgICAgICAgYnVmLmFwcGVu\nZCgiIC0gIik7CiAgICAgICAgICAgIGJ1Zi5hcHBlbmQobWVzc2FnZSk7CiAg\nICAgICAgICAgIGJ1Zi5hcHBlbmQoTkVXTElORSk7CgogICAgICAgICAgICBp\nZiAodCAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBTdHJpbmdXcml0ZXIg\nc3dyaXRlciA9IG5ldyBTdHJpbmdXcml0ZXIoKTsKICAgICAgICAgICAgICAg\nIFByaW50V3JpdGVyIHB3cml0ZXIgPSBuZXcgUHJpbnRXcml0ZXIoc3dyaXRl\ncik7CiAgICAgICAgICAgICAgICB0LnByaW50U3RhY2tUcmFjZShwd3JpdGVy\nKTsKICAgICAgICAgICAgICAgIHB3cml0ZXIuZmx1c2goKTsKICAgICAgICAg\nICAgICAgIGJ1Zi5hcHBlbmQoc3dyaXRlci50b1N0cmluZygpKTsKICAgICAg\nICAgICAgfQogICAgICAgICAgICByZXR1cm4gYnVmLnRvU3RyaW5nKCk7CiAg\nICAgICAgfQoKICAgICAgICBwcml2YXRlIGxvbmcgZ2V0T2Zmc2V0KCkgewog\nICAgICAgICAgICByZXR1cm4gU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCkg\nLSBpbml0aWFsaXphdGlvbk1pbGxpczsKICAgICAgICB9CgogICAgICAgIHB1\nYmxpYyB2b2lkIHNldENoYW5uZWwoU3RyaW5nIHZhbCkgewogICAgICAgICAg\nICBfY2hhbm5lbCA9IHZhbDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBT\ndHJpbmcgZ2V0Q2hhbm5lbCgpIHsKICAgICAgICAgICAgcmV0dXJuIF9jaGFu\nbmVsOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHZvaWQgc2V0TGV2ZWwo\nc2hvcnQgdmFsKSB7CiAgICAgICAgICAgIF9sZXZlbCA9IHZhbDsKICAgICAg\nICB9CgogICAgICAgIHB1YmxpYyBzaG9ydCBnZXRMZXZlbCgpIHsKICAgICAg\nICAgICAgcmV0dXJuIF9sZXZlbDsKICAgICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

