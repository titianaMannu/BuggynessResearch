{"sha":"a0a3f8e297c2b3e2b70be8f26642416f88709615","node_id":"MDQ6QmxvYjIwNjM2NDphMGEzZjhlMjk3YzJiM2UyYjcwYmU4ZjI2NjQyNDE2Zjg4NzA5NjE1","size":10384,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/a0a3f8e297c2b3e2b70be8f26642416f88709615","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLm1ldGE7CgppbXBvcnQg\namF2YS5zZWN1cml0eS5BY2Nlc3NDb250cm9sbGVyOwoKaW1wb3J0IG9yZy5h\ncGFjaGUuY29tbW9ucy5sYW5nLlN0cmluZ1V0aWxzOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmxpYi51dGlsLkoyRG9Qcml2SGVscGVyOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0\nIG9yZy54bWwuc2F4LkF0dHJpYnV0ZXM7CmltcG9ydCBvcmcueG1sLnNheC5T\nQVhFeGNlcHRpb247CmltcG9ydCBzZXJwLnV0aWwuU3RyaW5nczsKCi8qKgog\nKiBDdXN0b20gU0FYIHBhcnNlciB1c2VkIGJ5IHRoZSBzeXN0ZW0gdG8gcXVp\nY2tseSBwYXJzZSBtZXRhZGF0YSBmaWxlcwogKiBmb3IgY2xhc3Nlcy4KICoK\nICogQGF1dGhvciBBYmUgV2hpdGUKICogQG5vamF2YWRvYwogKi8KcHVibGlj\nIGNsYXNzIENGTWV0YURhdGFQYXJzZXIgZXh0ZW5kcyBYTUxNZXRhRGF0YVBh\ncnNlciB7CgogICAgc3RhdGljIGZpbmFsIFN0cmluZ1tdIFBBQ0tBR0VTID0g\nbmV3IFN0cmluZ1tdewogICAgICAgICJqYXZhLmxhbmcuIiwgImphdmEudXRp\nbC4iLCAiamF2YS5tYXRoLiIgfTsKICAgIHByaXZhdGUgc3RhdGljIGZpbmFs\nIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVyLmZvclBhY2thZ2UKICAgICAg\nICAoQ0ZNZXRhRGF0YVBhcnNlci5jbGFzcyk7CgogICAgLy8gdGhlIGN1cnJl\nbnQgcGFja2FnZSBhbmQgY2xhc3MgYmVpbmcgcGFyc2VkCiAgICBwcml2YXRl\nIFN0cmluZyBfcGFja2FnZSA9IG51bGw7CiAgICBwcml2YXRlIFN0cmluZyBf\nY2xhc3MgPSBudWxsOwoKICAgIHB1YmxpYyBDRk1ldGFEYXRhUGFyc2VyKCkg\newogICAgICAgIHNldFBhcnNlVGV4dChmYWxzZSk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgcGFja2FnZSBlbGVtZW50LiBEZWZh\ndWx0cyB0byAicGFja2FnZSIuCiAgICAgKi8KICAgIHByb3RlY3RlZCBib29s\nZWFuIGlzUGFja2FnZUVsZW1lbnROYW1lKFN0cmluZyBuYW1lKSB7CiAgICAg\nICAgcmV0dXJuICJwYWNrYWdlIi5lcXVhbHMobmFtZSk7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBUaGUgYXR0cmlidXRlIG9mIHRoZSBwYWNrYWdlIGVsZW1l\nbnQgdGhhdCBob2xkcyB0aGUgbmFtZSwgb3IgbnVsbCB0bwogICAgICogdXNl\nIHRoZSBlbGVtZW50IHRleHQuIERlZmF1bHRzIHRvICJuYW1lIi4KICAgICAq\nLwogICAgcHJvdGVjdGVkIFN0cmluZyBnZXRQYWNrYWdlQXR0cmlidXRlTmFt\nZSgpIHsKICAgICAgICByZXR1cm4gIm5hbWUiOwogICAgfQoKICAgIC8qKgog\nICAgICogVGhlIGRlcHRoIG9mIHRoZSBwYWNrYWdlIGVsZW1lbnQuIERlZmF1\nbHRzIHRvIDEuCiAgICAgKi8KICAgIHByb3RlY3RlZCBpbnQgZ2V0UGFja2Fn\nZUVsZW1lbnREZXB0aCgpIHsKICAgICAgICByZXR1cm4gMTsKICAgIH0KCiAg\nICAvKioKICAgICAqIFRoZSBuYW1lIG9mIHRoZSBjbGFzcyBlbGVtZW50LiBE\nZWZhdWx0cyB0byAiY2xhc3MiLgogICAgICovCiAgICBwcm90ZWN0ZWQgYm9v\nbGVhbiBpc0NsYXNzRWxlbWVudE5hbWUoU3RyaW5nIG5hbWUpIHsKICAgICAg\nICByZXR1cm4gImNsYXNzIi5lcXVhbHMobmFtZSk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBUaGUgYXR0cmlidXRlIG9mIHRoZSBjbGFzcyBlbGVtZW50IHRo\nYXQgaG9sZHMgdGhlIG5hbWUsIG9yIG51bGwgdG8KICAgICAqIHVzZSB0aGUg\nZWxlbWVudCB0ZXh0LiBEZWZhdWx0cyB0byAibmFtZSIuCiAgICAgKi8KICAg\nIHByb3RlY3RlZCBTdHJpbmcgZ2V0Q2xhc3NBdHRyaWJ1dGVOYW1lKCkgewog\nICAgICAgIHJldHVybiAibmFtZSI7CiAgICB9CgogICAgLyoqCiAgICAgKiBU\naGUgZGVwdGggb2YgdGhlIGNsYXNzIGVsZW1lbnQuIERlZmF1bHRzIHRvIDIu\nCiAgICAgKi8KICAgIHByb3RlY3RlZCBpbnQgZ2V0Q2xhc3NFbGVtZW50RGVw\ndGgoKSB7CiAgICAgICAgcmV0dXJuIDI7CiAgICB9CgogICAgcHJvdGVjdGVk\nIGJvb2xlYW4gc3RhcnRFbGVtZW50KFN0cmluZyBuYW1lLCBBdHRyaWJ1dGVz\nIGF0dHJzKQogICAgICAgIHRocm93cyBTQVhFeGNlcHRpb24gewogICAgICAg\nIC8vIHNraXAgcm9vdCBlbGVtZW50CiAgICAgICAgaW50IGRlcHRoID0gY3Vy\ncmVudERlcHRoKCk7CiAgICAgICAgaWYgKGRlcHRoID09IDApCiAgICAgICAg\nICAgIHJldHVybiB0cnVlOwoKICAgICAgICB0cnkgewogICAgICAgICAgICBp\nZiAoZGVwdGggPT0gZ2V0UGFja2FnZUVsZW1lbnREZXB0aCgpCiAgICAgICAg\nICAgICAgICAmJiBpc1BhY2thZ2VFbGVtZW50TmFtZShuYW1lKSkKICAgICAg\nICAgICAgICAgIHJldHVybiBzdGFydFBhY2thZ2UobmFtZSwgYXR0cnMpOwog\nICAgICAgICAgICBpZiAoZGVwdGggPT0gZ2V0Q2xhc3NFbGVtZW50RGVwdGgo\nKSAmJiBpc0NsYXNzRWxlbWVudE5hbWUobmFtZSkpCiAgICAgICAgICAgICAg\nICByZXR1cm4gc3RhcnRDbGFzcyhuYW1lLCBhdHRycyk7CiAgICAgICAgICAg\nIGlmIChkZXB0aCA+IGdldENsYXNzRWxlbWVudERlcHRoKCkgJiYgX2NsYXNz\nICE9IG51bGwKICAgICAgICAgICAgICAgICYmIGdldENsYXNzQXR0cmlidXRl\nTmFtZSgpICE9IG51bGwpCiAgICAgICAgICAgICAgICByZXR1cm4gc3RhcnRD\nbGFzc0VsZW1lbnQobmFtZSwgYXR0cnMpOwogICAgICAgICAgICBpZiAoZGVw\ndGggPiBnZXRQYWNrYWdlRWxlbWVudERlcHRoKCkgJiYgX3BhY2thZ2UgIT0g\nbnVsbAogICAgICAgICAgICAgICAgJiYgZ2V0UGFja2FnZUF0dHJpYnV0ZU5h\nbWUoKSAhPSBudWxsKQogICAgICAgICAgICAgICAgcmV0dXJuIHN0YXJ0UGFj\na2FnZUVsZW1lbnQobmFtZSwgYXR0cnMpOwogICAgICAgICAgICByZXR1cm4g\nc3RhcnRTeXN0ZW1FbGVtZW50KG5hbWUsIGF0dHJzKTsKICAgICAgICB9IGNh\ndGNoIChTQVhFeGNlcHRpb24gc2UpIHsKICAgICAgICAgICAgdGhyb3cgc2U7\nCiAgICAgICAgfSBjYXRjaCAoTnVsbFBvaW50ZXJFeGNlcHRpb24gbnBlKSB7\nCiAgICAgICAgICAgIHRocm93IGdldEV4Y2VwdGlvbihfbG9jLmdldCgicGFy\nc2UtZXJyb3IiLCBuYW1lKSwgbnBlKTsKICAgICAgICB9CiAgICB9CgogICAg\ncHJvdGVjdGVkIHZvaWQgZW5kRWxlbWVudChTdHJpbmcgbmFtZSkgdGhyb3dz\nIFNBWEV4Y2VwdGlvbiB7CiAgICAgICAgLy8gc2tpcCByb290IGVsZW1lbnQK\nICAgICAgICBpbnQgZGVwdGggPSBjdXJyZW50RGVwdGgoKTsKICAgICAgICBp\nZiAoZGVwdGggPT0gMCkKICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICB0\ncnkgewogICAgICAgICAgICBpZiAoZGVwdGggPT0gZ2V0UGFja2FnZUVsZW1l\nbnREZXB0aCgpCiAgICAgICAgICAgICAgICAmJiBpc1BhY2thZ2VFbGVtZW50\nTmFtZShuYW1lKSkKICAgICAgICAgICAgICAgIGVuZFBhY2thZ2UobmFtZSk7\nCiAgICAgICAgICAgIGVsc2UgaWYgKGRlcHRoID09IGdldENsYXNzRWxlbWVu\ndERlcHRoKCkKICAgICAgICAgICAgICAgICYmIGlzQ2xhc3NFbGVtZW50TmFt\nZShuYW1lKSkKICAgICAgICAgICAgICAgIGVuZENsYXNzKG5hbWUpOwogICAg\nICAgICAgICBlbHNlIGlmIChkZXB0aCA+IGdldENsYXNzRWxlbWVudERlcHRo\nKCkgJiYgX2NsYXNzICE9IG51bGwKICAgICAgICAgICAgICAgICYmIGdldENs\nYXNzQXR0cmlidXRlTmFtZSgpICE9IG51bGwpCiAgICAgICAgICAgICAgICBl\nbmRDbGFzc0VsZW1lbnQobmFtZSk7CiAgICAgICAgICAgIGVsc2UgaWYgKGRl\ncHRoID4gZ2V0UGFja2FnZUVsZW1lbnREZXB0aCgpICYmIF9wYWNrYWdlICE9\nIG51bGwKICAgICAgICAgICAgICAgICYmIGdldFBhY2thZ2VBdHRyaWJ1dGVO\nYW1lKCkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIGVuZFBhY2thZ2VFbGVt\nZW50KG5hbWUpOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBl\nbmRTeXN0ZW1FbGVtZW50KG5hbWUpOwogICAgICAgIH0gY2F0Y2ggKFNBWEV4\nY2VwdGlvbiBzZSkgewogICAgICAgICAgICB0aHJvdyBzZTsKICAgICAgICB9\nIGNhdGNoIChOdWxsUG9pbnRlckV4Y2VwdGlvbiBucGUpIHsKICAgICAgICAg\nICAgdGhyb3cgZ2V0RXhjZXB0aW9uKF9sb2MuZ2V0KCJwYXJzZS1lcnJvciIs\nIG5hbWUpLCBucGUpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAq\nIFN0YXJ0IGEgcGFja2FnZS4gUGFyc2VzIG91dCBwYWNrYWdlIGF0dHJpYnV0\nZSBieSBkZWZhdWx0LgogICAgICogUmV0dXJuIGZhbHNlIHRvIHNraXAgcGFj\na2FnZSBlbGVtZW50IGFuZCBpdHMgY29udGVudHMuCiAgICAgKi8KICAgIHBy\nb3RlY3RlZCBib29sZWFuIHN0YXJ0UGFja2FnZShTdHJpbmcgZWxlbSwgQXR0\ncmlidXRlcyBhdHRycykKICAgICAgICB0aHJvd3MgU0FYRXhjZXB0aW9uIHsK\nICAgICAgICBpZiAoZ2V0UGFja2FnZUF0dHJpYnV0ZU5hbWUoKSAhPSBudWxs\nKSB7CiAgICAgICAgICAgIF9wYWNrYWdlID0gYXR0cnMuZ2V0VmFsdWUoZ2V0\nUGFja2FnZUF0dHJpYnV0ZU5hbWUoKSk7CiAgICAgICAgICAgIGlmIChfcGFj\na2FnZSA9PSBudWxsKQogICAgICAgICAgICAgICAgX3BhY2thZ2UgPSAiIjsK\nICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBFbmQgYSBwYWNrYWdlLiBQYXJzZXMgY29udGFpbmVkIHRleHQg\nYnkgZGVmYXVsdC4KICAgICAqLwogICAgcHJvdGVjdGVkIHZvaWQgZW5kUGFj\na2FnZShTdHJpbmcgZWxlbSkgewogICAgICAgIGlmIChnZXRQYWNrYWdlQXR0\ncmlidXRlTmFtZSgpICE9IG51bGwpCiAgICAgICAgICAgIF9wYWNrYWdlID0g\nbnVsbDsKICAgICAgICBlbHNlCiAgICAgICAgICAgIF9wYWNrYWdlID0gY3Vy\ncmVudFRleHQoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFN0YXJ0IGEgY2xh\nc3MuIFBhcnNlcyBvdXQgY2xhc3MgbmFtZSBieSBkZWZhdWx0LiBSZXR1cm4K\nICAgICAqIGZhbHNlIHRvIHNraXAgY2xhc3MgZWxlbWVudCBhbmQgaXRzIGNv\nbnRlbnRzLgogICAgICovCiAgICBwcm90ZWN0ZWQgYm9vbGVhbiBzdGFydENs\nYXNzKFN0cmluZyBlbGVtLCBBdHRyaWJ1dGVzIGF0dHJzKQogICAgICAgIHRo\ncm93cyBTQVhFeGNlcHRpb24gewogICAgICAgIGlmIChnZXRDbGFzc0F0dHJp\nYnV0ZU5hbWUoKSAhPSBudWxsKSB7CiAgICAgICAgICAgIF9jbGFzcyA9IGF0\ndHJzLmdldFZhbHVlKGdldENsYXNzQXR0cmlidXRlTmFtZSgpKTsKICAgICAg\nICAgICAgaWYgKCFTdHJpbmdVdGlscy5pc0VtcHR5KF9wYWNrYWdlKSAmJiBf\nY2xhc3MuaW5kZXhPZignLicpID09IC0xKQogICAgICAgICAgICAgICAgX2Ns\nYXNzID0gX3BhY2thZ2UgKyAiLiIgKyBfY2xhc3M7CiAgICAgICAgfQogICAg\nICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogRW5kIGEg\nY2xhc3MuIFBhcnNlcyBjb250YWluZWQgdGV4dCBieSBkZWZhdWx0LgogICAg\nICovCiAgICBwcm90ZWN0ZWQgdm9pZCBlbmRDbGFzcyhTdHJpbmcgZWxlbSkg\ndGhyb3dzIFNBWEV4Y2VwdGlvbiB7CiAgICAgICAgaWYgKGdldENsYXNzQXR0\ncmlidXRlTmFtZSgpICE9IG51bGwpCiAgICAgICAgICAgIF9jbGFzcyA9IG51\nbGw7CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIF9jbGFzcyA9IGN1cnJl\nbnRUZXh0KCk7CiAgICAgICAgICAgIGlmICghU3RyaW5nVXRpbHMuaXNFbXB0\neShfcGFja2FnZSkgJiYgX2NsYXNzLmluZGV4T2YoJy4nKSA9PSAtMSkKICAg\nICAgICAgICAgICAgIF9jbGFzcyA9IF9wYWNrYWdlICsgIi4iICsgX2NsYXNz\nOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIE92ZXJyaWRlIHRo\naXMgbWV0aG9kIG1hcmtpbmcgdGhlIHN0YXJ0IG9mIGFuIGVsZW1lbnQgb3V0\nc2lkZSBvZiBhbnkKICAgICAqIHBhY2thZ2Ugb3IgY2xhc3MuCiAgICAgKi8K\nICAgIHByb3RlY3RlZCBib29sZWFuIHN0YXJ0U3lzdGVtRWxlbWVudChTdHJp\nbmcgbmFtZSwgQXR0cmlidXRlcyBhdHRycykKICAgICAgICB0aHJvd3MgU0FY\nRXhjZXB0aW9uIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBPdmVycmlkZSB0aGlzIG1ldGhvZCBtYXJraW5nIHRoZSBl\nbmQgb2YgYW4gZWxlbWVudCBvdXRzaWRlIG9mIGFueQogICAgICogcGFja2Fn\nZSBvciBjbGFzcy4KICAgICAqLwogICAgcHJvdGVjdGVkIHZvaWQgZW5kU3lz\ndGVtRWxlbWVudChTdHJpbmcgbmFtZSkgdGhyb3dzIFNBWEV4Y2VwdGlvbiB7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBPdmVycmlkZSB0aGlzIG1ldGhvZCBt\nYXJraW5nIHRoZSBzdGFydCBvZiBhbiBlbGVtZW50IHdpdGhpbiBhIGRlY2xh\ncmVkCiAgICAgKiBwYWNrYWdlLgogICAgICovCiAgICBwcm90ZWN0ZWQgYm9v\nbGVhbiBzdGFydFBhY2thZ2VFbGVtZW50KFN0cmluZyBuYW1lLCBBdHRyaWJ1\ndGVzIGF0dHJzKQogICAgICAgIHRocm93cyBTQVhFeGNlcHRpb24gewogICAg\nICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAvKioKICAgICAqIE92ZXJy\naWRlIHRoaXMgbWV0aG9kIG1hcmtpbmcgdGhlIGVuZCBvZiBhbiBlbGVtZW50\nIHdpdGhpbiBhIGRlY2xhcmVkCiAgICAgKiBwYWNrYWdlLgogICAgICovCiAg\nICBwcm90ZWN0ZWQgdm9pZCBlbmRQYWNrYWdlRWxlbWVudChTdHJpbmcgbmFt\nZSkgdGhyb3dzIFNBWEV4Y2VwdGlvbiB7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBPdmVycmlkZSB0aGlzIG1ldGhvZCBtYXJraW5nIHRoZSBzdGFydCBvZiBh\nbiBlbGVtZW50IHdpdGhpbiBhIGRlY2xhcmVkCiAgICAgKiBjbGFzcy4KICAg\nICAqLwogICAgcHJvdGVjdGVkIGJvb2xlYW4gc3RhcnRDbGFzc0VsZW1lbnQo\nU3RyaW5nIG5hbWUsIEF0dHJpYnV0ZXMgYXR0cnMpCiAgICAgICAgdGhyb3dz\nIFNBWEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoK\nICAgIC8qKgogICAgICogT3ZlcnJpZGUgdGhpcyBtZXRob2QgbWFya2luZyB0\naGUgZW5kIG9mIGFuIGVsZW1lbnQgd2l0aGluIGEgZGVjbGFyZWQKICAgICAq\nIGNsYXNzLgogICAgICovCiAgICBwcm90ZWN0ZWQgdm9pZCBlbmRDbGFzc0Vs\nZW1lbnQoU3RyaW5nIG5hbWUpIHRocm93cyBTQVhFeGNlcHRpb24gewogICAg\nfQoKICAgIC8qKgogICAgICogT3ZlcnJpZGUgdGhpcyBtZXRob2QgdG8gY2xl\nYXIgYW55IHN0YXRlIGFuZCByZWFkeSB0aGUgcGFyc2VyIGZvcgogICAgICog\nYSBuZXcgZG9jdW1lbnQuIFN1YmNsYXNzZXMgc2hvdWxkIGNhbGwKICAgICAq\nIDxjb2RlPnN1cGVyLnJlc2V0KCk8L2NvZGU+IHRvIGNsZWFyIHN1cGVyY2xh\nc3Mgc3RhdGUuCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIHJlc2V0KCkg\newogICAgICAgIHN1cGVyLnJlc2V0KCk7CiAgICAgICAgX3BhY2thZ2UgPSBu\ndWxsOwogICAgICAgIF9jbGFzcyA9IG51bGw7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBSZXR1cm4gdGhlIGN1cnJlbnQgY2xhc3MgYmVpbmcgcGFyc2VkOyB0\naGUgcmV0dXJuZWQgbmFtZSB3aWxsCiAgICAgKiBiZSBmdWxseSBxdWFsaWZp\nZWQuCiAgICAgKi8KICAgIHByb3RlY3RlZCBTdHJpbmcgY3VycmVudENsYXNz\nTmFtZSgpIHsKICAgICAgICByZXR1cm4gX2NsYXNzOwogICAgfQoKICAgIC8q\nKgogICAgICogUmV0dXJuIHRoZSBjdXJyZW50IHBhY2thZ2UgYmVpbmcgcGFy\nc2VkLgogICAgICovCiAgICBwcm90ZWN0ZWQgU3RyaW5nIGN1cnJlbnRQYWNr\nYWdlKCkgewogICAgICAgIHJldHVybiBfcGFja2FnZTsKICAgIH0KCiAgICAv\nKioKICAgICAqIEhlbHBlciBtZXRob2QgdG8gY3JlYXRlIHRoZSB7QGxpbmsg\nQ2xhc3N9IGZvciB0aGUgZ2l2ZW4gbmFtZSwKICAgICAqIHRha2luZyBpbnRv\nIGFjY291bnQgdGhlIHBhY2thZ2UgY3VycmVudGx5IGJlaW5nIHBhcnNlZCBm\nb3IgcmVsYXRpdmUKICAgICAqIGNsYXNzIG5hbWVzLgogICAgICovCiAgICBw\ncm90ZWN0ZWQgQ2xhc3MgY2xhc3NGb3JOYW1lKFN0cmluZyBuYW1lLCBib29s\nZWFuIHJlc29sdmUpCiAgICAgICAgdGhyb3dzIFNBWEV4Y2VwdGlvbiB7CiAg\nICAgICAgaWYgKG5hbWUgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIG51\nbGw7CiAgICAgICAgQ2xhc3MgY2xzID0gY2xhc3NGb3JOYW1lKG5hbWUsIF9w\nYWNrYWdlLCByZXNvbHZlLCBjdXJyZW50Q2xhc3NMb2FkZXIoKSk7CiAgICAg\nICAgaWYgKGNscyA9PSBudWxsKQogICAgICAgICAgICB0aHJvdyBnZXRFeGNl\ncHRpb24oX2xvYy5nZXQoImludmFsaWQtY2xhc3MiLCBuYW1lKS5nZXRNZXNz\nYWdlKCkpOwogICAgICAgIHJldHVybiBjbHM7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBMb2FkIHRoZSBnaXZlbiBjbGFzcyBuYW1lIGFnYWluc3QgdGhlIGdp\ndmVuIHBhY2thZ2UgYW5kIHRoZSBzZXQKICAgICAqIG9mIGFjY2VwdGVkIHN0\nYW5kYXJkIHBhY2thZ2VzLiBSZXR1cm4gbnVsbCBpZiB0aGUgY2xhc3MgY2Fu\nbm90IGJlIGxvYWRlZC4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBDbGFz\ncyBjbGFzc0Zvck5hbWUoU3RyaW5nIG5hbWUsIFN0cmluZyBwa2csCiAgICAg\nICAgYm9vbGVhbiByZXNvbHZlLCBDbGFzc0xvYWRlciBsb2FkZXIpIHsKICAg\nICAgICBpZiAoU3RyaW5nVXRpbHMuaXNFbXB0eShuYW1lKSkKICAgICAgICAg\nICAgcmV0dXJuIG51bGw7CgogICAgICAgIGlmIChsb2FkZXIgPT0gbnVsbCkK\nICAgICAgICAgICAgbG9hZGVyID0gKENsYXNzTG9hZGVyKSBBY2Nlc3NDb250\ncm9sbGVyLmRvUHJpdmlsZWdlZCgKICAgICAgICAgICAgICAgIEoyRG9Qcml2\nSGVscGVyLmdldENvbnRleHRDbGFzc0xvYWRlckFjdGlvbigpKTsKICAgICAg\nICBib29sZWFuIGZ1bGxOYW1lID0gbmFtZS5pbmRleE9mKCcuJykgIT0gLTE7\nCiAgICAgICAgYm9vbGVhbiBub1BhY2thZ2UgPSBTdHJpbmdVdGlscy5pc0Vt\ncHR5KHBrZyk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKGZ1bGxO\nYW1lIHx8IG5vUGFja2FnZSkKICAgICAgICAgICAgICAgIHJldHVybiBTdHJp\nbmdzLnRvQ2xhc3MobmFtZSwgcmVzb2x2ZSwgbG9hZGVyKTsKICAgICAgICAg\nICAgcmV0dXJuIFN0cmluZ3MudG9DbGFzcyhwa2cgKyAiLiIgKyBuYW1lLCBy\nZXNvbHZlLCBsb2FkZXIpOwogICAgICAgIH0gY2F0Y2ggKFJ1bnRpbWVFeGNl\ncHRpb24gcmUpIHsKICAgICAgICB9CgogICAgICAgIC8vIGlmIG5vdCBhIGZ1\nbGwgbmFtZSwgbm93IHRyeSB0aGUgbmFtZSB3aXRob3V0IGEgcGFja2FnZQog\nICAgICAgIGlmICghZnVsbE5hbWUgJiYgIW5vUGFja2FnZSkgewogICAgICAg\nICAgICB0cnkgewogICAgICAgICAgICAgICAgcmV0dXJuIFN0cmluZ3MudG9D\nbGFzcyhuYW1lLCByZXNvbHZlLCBsb2FkZXIpOwogICAgICAgICAgICB9IGNh\ndGNoIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAgICAgIH0KICAg\nICAgICB9CgogICAgICAgIC8vIHRyeSB3aXRoIHN0YW5kYXJkIHBhY2thZ2Vz\nCiAgICAgICAgaWYgKCFmdWxsTmFtZSkgewogICAgICAgICAgICBmb3IgKGlu\ndCBpID0gMDsgaSA8IFBBQ0tBR0VTLmxlbmd0aDsgaSsrKSB7CiAgICAgICAg\nICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBTdHJp\nbmdzLnRvQ2xhc3MoUEFDS0FHRVNbaV0gKyBuYW1lLCByZXNvbHZlLCBsb2Fk\nZXIpOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoUnVudGltZUV4Y2VwdGlv\nbiByZSkgewogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAg\nICAgfQogICAgICAgIHJldHVybiBudWxsOwogICAgfQp9Cg==\n","encoding":"base64"}

