{"sha":"f787488ca974a7e2b1e7bcdc56dbe1a60c928faa","node_id":"MDQ6QmxvYjIwNjM2NDpmNzg3NDg4Y2E5NzRhN2UyYjFlN2JjZGM1NmRiZTFhNjBjOTI4ZmFh","size":3362,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/f787488ca974a7e2b1e7bcdc56dbe1a60c928faa","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLm1ldGE7CgppbXBvcnQg\namF2YS5pby5GaWxlOwppbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKaW1w\nb3J0IGphdmEuc2VjdXJpdHkuQWNjZXNzQ29udHJvbGxlcjsKaW1wb3J0IGph\ndmEuc2VjdXJpdHkuUHJpdmlsZWdlZEFjdGlvbkV4Y2VwdGlvbjsKaW1wb3J0\nIGphdmEudXRpbC5Qcm9wZXJ0aWVzOwppbXBvcnQgamF2YS51dGlsLnppcC5a\naXBGaWxlOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5K\nMkRvUHJpdkhlbHBlcjsKCmltcG9ydCBzZXJwLnV0aWwuU3RyaW5nczsKCi8q\nKgogKiBJdGVyYXRvciBvdmVyIGRpcmVjdG9yaWVzIGluIHRoZSBjbGFzc3Bh\ndGguCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqIEBub2phdmFkb2MKICov\nCnB1YmxpYyBjbGFzcyBDbGFzc3BhdGhNZXRhRGF0YUl0ZXJhdG9yIGV4dGVu\nZHMgTWV0YURhdGFJdGVyYXRvckNoYWluIHsKCiAgICAvKioKICAgICAqIERl\nZmF1bHQgY29uc3RydWN0b3I7IGl0ZXJhdGVzIG92ZXIgYWxsIGNsYXNzcGF0\naCBlbGVtZW50cy4KICAgICAqLwogICAgcHVibGljIENsYXNzcGF0aE1ldGFE\nYXRhSXRlcmF0b3IoKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgIHRo\naXMobnVsbCwgbnVsbCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDb25zdHJ1\nY3Rvcjsgc3VwcGx5IHRoZSBjbGFzc3BhdGggZGlyZWN0b3JpZXMgdG8gc2Nh\nbiBhbmQgYW4gb3B0aW9uYWwKICAgICAqIHJlc291cmNlIGZpbHRlci4gVGhl\nIGdpdmVuIGRpcmVjdG9yaWVzIG1heSBiZSBudWxsIHRvIHNjYW4gYWxsCiAg\nICAgKiBjbGFzc3BhdGggZGlyZWN0b3JpZXMuCiAgICAgKi8KICAgIHB1Ymxp\nYyBDbGFzc3BhdGhNZXRhRGF0YUl0ZXJhdG9yKFN0cmluZ1tdIGRpcnMsIE1l\ndGFEYXRhRmlsdGVyIGZpbHRlcikKICAgICAgICB0aHJvd3MgSU9FeGNlcHRp\nb24gewogICAgICAgIFByb3BlcnRpZXMgcHJvcHMgPSAoUHJvcGVydGllcykg\nQWNjZXNzQ29udHJvbGxlci5kb1ByaXZpbGVnZWQoCiAgICAgICAgICAgIEoy\nRG9Qcml2SGVscGVyLmdldFByb3BlcnRpZXNBY3Rpb24oKSk7IAogICAgICAg\nIFN0cmluZyBwYXRoID0gcHJvcHMuZ2V0UHJvcGVydHkoImphdmEuY2xhc3Mu\ncGF0aCIpOwogICAgICAgIFN0cmluZ1tdIHRva2VucyA9IFN0cmluZ3Muc3Bs\naXQocGF0aCwKICAgICAgICAgICAgcHJvcHMuZ2V0UHJvcGVydHkoInBhdGgu\nc2VwYXJhdG9yIiksIDApOwoKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8\nIHRva2Vucy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAoZGlycyAh\nPSBudWxsICYmIGRpcnMubGVuZ3RoICE9IDAgJiYgIWVuZHNXaXRoKHRva2Vu\nc1tpXSwgZGlycykpCiAgICAgICAgICAgICAgICBjb250aW51ZTsKCiAgICAg\nICAgICAgIEZpbGUgZmlsZSA9IG5ldyBGaWxlKHRva2Vuc1tpXSk7CiAgICAg\nICAgICAgIGlmICghKChCb29sZWFuKSBBY2Nlc3NDb250cm9sbGVyLmRvUHJp\ndmlsZWdlZCgKICAgICAgICAgICAgICAgIEoyRG9Qcml2SGVscGVyLmV4aXN0\nc0FjdGlvbihmaWxlKSkpLmJvb2xlYW5WYWx1ZSgpKQogICAgICAgICAgICAg\nICAgY29udGludWU7CiAgICAgICAgICAgIGlmICgoKEJvb2xlYW4pIEFjY2Vz\nc0NvbnRyb2xsZXIuZG9Qcml2aWxlZ2VkKEoyRG9Qcml2SGVscGVyCiAgICAg\nICAgICAgICAgICAuaXNEaXJlY3RvcnlBY3Rpb24oZmlsZSkpKS5ib29sZWFu\nVmFsdWUoKSkKICAgICAgICAgICAgICAgIGFkZEl0ZXJhdG9yKG5ldyBGaWxl\nTWV0YURhdGFJdGVyYXRvcihmaWxlLCBmaWx0ZXIpKTsKICAgICAgICAgICAg\nZWxzZSBpZiAodG9rZW5zW2ldLmVuZHNXaXRoKCIuamFyIikpIHsKICAgICAg\nICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgWmlwRmlsZSB6\nRmlsZSA9IChaaXBGaWxlKSBBY2Nlc3NDb250cm9sbGVyCiAgICAgICAgICAg\nICAgICAgICAgICAgIC5kb1ByaXZpbGVnZWQoSjJEb1ByaXZIZWxwZXIubmV3\nWmlwRmlsZUFjdGlvbihmaWxlKSk7CiAgICAgICAgICAgICAgICAgICAgYWRk\nSXRlcmF0b3IobmV3IFppcEZpbGVNZXRhRGF0YUl0ZXJhdG9yKHpGaWxlLCBm\naWx0ZXIpKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKFByaXZpbGVnZWRB\nY3Rpb25FeGNlcHRpb24gcGFlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhy\nb3cgKElPRXhjZXB0aW9uKSBwYWUuZ2V0RXhjZXB0aW9uKCk7CiAgICAgICAg\nICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAg\nLyoqCiAgICAgKiBSZXR1cm4gdHJ1ZSBpZiB0aGUgZ2l2ZW4gdG9rZW4gZW5k\ncyB3aXRoIGFueSBvZiB0aGUgZ2l2ZW4gc3RyaW5ncy4KICAgICAqLwogICAg\ncHJpdmF0ZSBzdGF0aWMgYm9vbGVhbiBlbmRzV2l0aChTdHJpbmcgdG9rZW4s\nIFN0cmluZ1tdIHN1ZmZzKSB7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkg\nPCBzdWZmcy5sZW5ndGg7IGkrKykKICAgICAgICAgICAgaWYgKHRva2VuLmVu\nZHNXaXRoKHN1ZmZzW2ldKSkKICAgICAgICAgICAgICAgIHJldHVybiB0cnVl\nOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KfQo=\n","encoding":"base64"}

