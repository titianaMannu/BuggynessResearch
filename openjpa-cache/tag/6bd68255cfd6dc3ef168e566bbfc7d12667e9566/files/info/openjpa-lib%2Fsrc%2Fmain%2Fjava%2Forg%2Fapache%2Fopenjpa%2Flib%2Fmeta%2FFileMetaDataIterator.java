{"sha":"a2d69da6eefc2aa068b42e54f00542c006464b16","node_id":"MDQ6QmxvYjIwNjM2NDphMmQ2OWRhNmVlZmMyYWEwNjhiNDJlNTRmMDA1NDJjMDA2NDY0YjE2","size":6082,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/a2d69da6eefc2aa068b42e54f00542c006464b16","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLm1ldGE7CgppbXBvcnQg\namF2YS5pby5CeXRlQXJyYXlPdXRwdXRTdHJlYW07CmltcG9ydCBqYXZhLmlv\nLkZpbGU7CmltcG9ydCBqYXZhLmlvLkZpbGVJbnB1dFN0cmVhbTsKaW1wb3J0\nIGphdmEuaW8uRmlsZU5vdEZvdW5kRXhjZXB0aW9uOwppbXBvcnQgamF2YS5p\nby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEuaW8uSW5wdXRTdHJlYW07Cmlt\ncG9ydCBqYXZhLnNlY3VyaXR5LkFjY2Vzc0NvbnRyb2xsZXI7CmltcG9ydCBq\nYXZhLnNlY3VyaXR5LlByaXZpbGVnZWRBY3Rpb25FeGNlcHRpb247CmltcG9y\ndCBqYXZhLnV0aWwuQXJyYXlMaXN0OwppbXBvcnQgamF2YS51dGlsLkNvbGxl\nY3Rpb247CmltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbnM7CmltcG9ydCBq\nYXZhLnV0aWwuSXRlcmF0b3I7CmltcG9ydCBqYXZhLnV0aWwuTm9TdWNoRWxl\nbWVudEV4Y2VwdGlvbjsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGli\nLnV0aWwuSjJEb1ByaXZIZWxwZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEubGliLnV0aWwuTG9jYWxpemVyOwoKLyoqCiAqIEl0ZXJhdG9yIG92ZXIg\nYSBmaWxlLCBvciBvdmVyIGFsbCBtZXRhZGF0YSByZXNvdXJjZXMgYmVsb3cg\nYSBnaXZlbiBkaXJlY3RvcnkuCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAq\nIEBub2phdmFkb2MKICovCnB1YmxpYyBjbGFzcyBGaWxlTWV0YURhdGFJdGVy\nYXRvciBpbXBsZW1lbnRzIE1ldGFEYXRhSXRlcmF0b3IgewoKICAgIHByaXZh\ndGUgc3RhdGljIGZpbmFsIGxvbmcgU0NBTl9MSU1JVCA9IDEwMDAwMDsKCiAg\nICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6ZXIgX2xvYyA9IExvY2Fs\naXplci5mb3JQYWNrYWdlCiAgICAgICAgKEZpbGVNZXRhRGF0YUl0ZXJhdG9y\nLmNsYXNzKTsKCiAgICBwcml2YXRlIGZpbmFsIEl0ZXJhdG9yIF9pdHI7CiAg\nICBwcml2YXRlIEZpbGUgX2ZpbGUgPSBudWxsOwoKICAgIC8qKgogICAgICog\nQ29uc3RydWN0b3I7IHN1cHBseSBtZXRhZGF0YSBmaWxlLgogICAgICovCiAg\nICBwdWJsaWMgRmlsZU1ldGFEYXRhSXRlcmF0b3IoRmlsZSBmaWxlKSB7CiAg\nICAgICAgX2l0ciA9IENvbGxlY3Rpb25zLnNpbmdsZXRvbihmaWxlKS5pdGVy\nYXRvcigpOwogICAgfQoKICAgIC8qKgogICAgICogQ29uc3RydWN0b3I7IHN1\ncHBseSByb290IG9mIGRpcmVjdG9yeSB0cmVlIHRvIHNlYXJjaCBhbmQgb3B0\naW9uYWwKICAgICAqIGZpbGUgZmlsdGVyLgogICAgICovCiAgICBwdWJsaWMg\nRmlsZU1ldGFEYXRhSXRlcmF0b3IoRmlsZSBkaXIsIE1ldGFEYXRhRmlsdGVy\nIGZpbHRlcikKICAgICAgICB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAg\nIGlmIChkaXIgPT0gbnVsbCkKICAgICAgICAgICAgX2l0ciA9IG51bGw7CiAg\nICAgICAgZWxzZSB7CiAgICAgICAgICAgIENvbGxlY3Rpb24gbWV0YXMgPSBu\nZXcgQXJyYXlMaXN0KCk7CiAgICAgICAgICAgIEZpbGVSZXNvdXJjZSByc3Jj\nID0gKGZpbHRlciA9PSBudWxsKSA/IG51bGwgOiBuZXcgRmlsZVJlc291cmNl\nKCk7CiAgICAgICAgICAgIHNjYW4oZGlyLCBmaWx0ZXIsIHJzcmMsIG1ldGFz\nLCAwKTsKICAgICAgICAgICAgX2l0ciA9IG1ldGFzLml0ZXJhdG9yKCk7CiAg\nICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogU2NhbiBhbGwgZmlsZXMg\nYmVsb3cgdGhlIGdpdmVuIG9uZSBmb3IgbWV0YWRhdGEgZmlsZXMsIGFkZGlu\nZyB0aGVtCiAgICAgKiB0byB0aGUgZ2l2ZW4gY29sbGVjdGlvbi4KICAgICAq\nLwogICAgcHJpdmF0ZSBpbnQgc2NhbihGaWxlIGZpbGUsIE1ldGFEYXRhRmls\ndGVyIGZpbHRlciwgRmlsZVJlc291cmNlIHJzcmMsCiAgICAgICAgQ29sbGVj\ndGlvbiBtZXRhcywgaW50IHNjYW5uZWQpIHRocm93cyBJT0V4Y2VwdGlvbiB7\nCiAgICAgICAgaWYgKHNjYW5uZWQgPiBTQ0FOX0xJTUlUKQogICAgICAgICAg\nICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKF9sb2MuZ2V0KCJ0\nb28tbWFueS1maWxlcyIsCiAgICAgICAgICAgICAgICBTdHJpbmcudmFsdWVP\nZihTQ0FOX0xJTUlUKSkuZ2V0TWVzc2FnZSgpKTsKICAgICAgICBzY2FubmVk\nKys7CgogICAgICAgIGlmIChmaWx0ZXIgPT0gbnVsbCkKICAgICAgICAgICAg\nbWV0YXMuYWRkKGZpbGUpOwogICAgICAgIGVsc2UgewogICAgICAgICAgICBy\nc3JjLnNldEZpbGUoZmlsZSk7CiAgICAgICAgICAgIGlmIChmaWx0ZXIubWF0\nY2hlcyhyc3JjKSkKICAgICAgICAgICAgICAgIG1ldGFzLmFkZChmaWxlKTsK\nICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBGaWxlW10gZmls\nZXMgPSAoRmlsZVtdKSBBY2Nlc3NDb250cm9sbGVyCiAgICAgICAgICAgICAg\nICAgICAgLmRvUHJpdmlsZWdlZChKMkRvUHJpdkhlbHBlci5saXN0RmlsZXNB\nY3Rpb24oZmlsZSkpOyAKICAgICAgICAgICAgICAgIGlmIChmaWxlcyAhPSBu\ndWxsKQogICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwg\nZmlsZXMubGVuZ3RoOyBpKyspCiAgICAgICAgICAgICAgICAgICAgICAgIHNj\nYW5uZWQgPSBzY2FuKGZpbGVzW2ldLCBmaWx0ZXIsIHJzcmMsIG1ldGFzLCBz\nY2FubmVkKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1\ncm4gc2Nhbm5lZDsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBoYXNOZXh0\nKCkgewogICAgICAgIHJldHVybiBfaXRyICE9IG51bGwgJiYgX2l0ci5oYXNO\nZXh0KCk7CiAgICB9CgogICAgcHVibGljIE9iamVjdCBuZXh0KCkgdGhyb3dz\nIElPRXhjZXB0aW9uIHsKICAgICAgICBpZiAoX2l0ciA9PSBudWxsKQogICAg\nICAgICAgICB0aHJvdyBuZXcgTm9TdWNoRWxlbWVudEV4Y2VwdGlvbigpOwoK\nICAgICAgICBfZmlsZSA9IChGaWxlKSBfaXRyLm5leHQoKTsKICAgICAgICBy\nZXR1cm4gKChGaWxlKSBBY2Nlc3NDb250cm9sbGVyLmRvUHJpdmlsZWdlZChK\nMkRvUHJpdkhlbHBlcgogICAgICAgICAgICAuZ2V0QWJzb2x1dGVGaWxlQWN0\naW9uKF9maWxlKSkpLnRvVVJMKCk7CiAgICB9CgogICAgcHVibGljIElucHV0\nU3RyZWFtIGdldElucHV0U3RyZWFtKCkgdGhyb3dzIElPRXhjZXB0aW9uIHsK\nICAgICAgICBpZiAoX2ZpbGUgPT0gbnVsbCkKICAgICAgICAgICAgdGhyb3cg\nbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbigpOwogICAgICAgIEZpbGVJbnB1\ndFN0cmVhbSBmaXMgPSBudWxsOwogICAgICAgIHRyeSB7CiAgICAgICAgICAg\nIGZpcyA9IChGaWxlSW5wdXRTdHJlYW0pIEFjY2Vzc0NvbnRyb2xsZXIuZG9Q\ncml2aWxlZ2VkKAogICAgICAgICAgICAgICAgSjJEb1ByaXZIZWxwZXIubmV3\nRmlsZUlucHV0U3RyZWFtQWN0aW9uKF9maWxlKSk7CiAgICAgICAgICAgIHJl\ndHVybiBmaXM7CiAgICAgICAgfSBjYXRjaCAoUHJpdmlsZWdlZEFjdGlvbkV4\nY2VwdGlvbiBwYWUpIHsKICAgICAgICAgICAgdGhyb3cgKEZpbGVOb3RGb3Vu\nZEV4Y2VwdGlvbikgcGFlLmdldEV4Y2VwdGlvbigpOwogICAgICAgIH0KICAg\nIH0KCiAgICBwdWJsaWMgRmlsZSBnZXRGaWxlKCkgewogICAgICAgIGlmIChf\nZmlsZSA9PSBudWxsKQogICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0\nYXRlRXhjZXB0aW9uKCk7CiAgICAgICAgcmV0dXJuIF9maWxlOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIGNsb3NlKCkgewogICAgfQoKICAgIHByaXZhdGUg\nc3RhdGljIGNsYXNzIEZpbGVSZXNvdXJjZSBpbXBsZW1lbnRzIE1ldGFEYXRh\nRmlsdGVyLlJlc291cmNlIHsKCiAgICAgICAgcHJpdmF0ZSBGaWxlIF9maWxl\nID0gbnVsbDsKCiAgICAgICAgcHVibGljIHZvaWQgc2V0RmlsZShGaWxlIGZp\nbGUpIHsKICAgICAgICAgICAgX2ZpbGUgPSBmaWxlOwogICAgICAgIH0KCiAg\nICAgICAgcHVibGljIFN0cmluZyBnZXROYW1lKCkgewogICAgICAgICAgICBy\nZXR1cm4gX2ZpbGUuZ2V0TmFtZSgpOwogICAgICAgIH0KCiAgICAgICAgcHVi\nbGljIGJ5dGVbXSBnZXRDb250ZW50KCkgdGhyb3dzIElPRXhjZXB0aW9uIHsK\nICAgICAgICAgICAgbG9uZyBsZW4gPSAoKExvbmcpIEFjY2Vzc0NvbnRyb2xs\nZXIuZG9Qcml2aWxlZ2VkKAogICAgICAgICAgICAgICAgSjJEb1ByaXZIZWxw\nZXIubGVuZ3RoQWN0aW9uKF9maWxlKSkpLmxvbmdWYWx1ZSgpOwogICAgICAg\nICAgICBGaWxlSW5wdXRTdHJlYW0gZmluID0gbnVsbDsKICAgICAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgICAgIGZpbiA9IChGaWxlSW5wdXRTdHJlYW0p\nIEFjY2Vzc0NvbnRyb2xsZXIuZG9Qcml2aWxlZ2VkKAogICAgICAgICAgICAg\nICAgICAgIEoyRG9Qcml2SGVscGVyLm5ld0ZpbGVJbnB1dFN0cmVhbUFjdGlv\nbihfZmlsZSkpOwogICAgICAgICAgICB9IGNhdGNoIChQcml2aWxlZ2VkQWN0\naW9uRXhjZXB0aW9uIHBhZSkgewogICAgICAgICAgICAgICAgIHRocm93IChG\naWxlTm90Rm91bmRFeGNlcHRpb24pIHBhZS5nZXRFeGNlcHRpb24oKTsKICAg\nICAgICAgICAgfQogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAg\nYnl0ZVtdIGNvbnRlbnQ7CiAgICAgICAgICAgICAgICBpZiAobGVuIDw9IDAg\nfHwgbGVuID4gSW50ZWdlci5NQVhfVkFMVUUpIHsKICAgICAgICAgICAgICAg\nICAgICAvLyBzb21lIEpWTXMgZG9uJ3QgcmV0dXJuIGEgcHJvcGVyIGxlbmd0\naAogICAgICAgICAgICAgICAgICAgIEJ5dGVBcnJheU91dHB1dFN0cmVhbSBi\nb3V0ID0gbmV3IEJ5dGVBcnJheU91dHB1dFN0cmVhbSgpOwogICAgICAgICAg\nICAgICAgICAgIGJ5dGVbXSBidWYgPSBuZXcgYnl0ZVsxMDI0XTsgCiAgICAg\nICAgICAgICAgICAgICAgZm9yIChpbnQgcjsgKHIgPSBmaW4ucmVhZChidWYp\nKSAhPSAtMTspCiAgICAgICAgICAgICAgICAgICAgICAgIGJvdXQud3JpdGUo\nYnVmLCAwLCByKTsKICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gYm91\ndC50b0J5dGVBcnJheSgpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAg\nICAgICAgICAgICAgICAgICBjb250ZW50ID0gbmV3IGJ5dGVbKGludCkgbGVu\nXTsKICAgICAgICAgICAgICAgICAgICBmb3IgKGludCByLCBvID0gMDsgbyA8\nIGNvbnRlbnQubGVuZ3RoICYmIChyID0gZmluLgogICAgICAgICAgICAgICAg\nICAgICAgICByZWFkKGNvbnRlbnQsIG8sIGNvbnRlbnQubGVuZ3RoIC0gbykp\nICE9IC0xOyBvICs9IHIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAg\nICAgICAgcmV0dXJuIGNvbnRlbnQ7CiAgICAgICAgICAgIH0gZmluYWxseSB7\nCiAgICAgICAgICAgICAgICB0cnkgeyBmaW4uY2xvc2UoKTsgfSBjYXRjaCAo\nSU9FeGNlcHRpb24gaW9lKSB7fQogICAgICAgICAgICB9CiAgICAgICAgfQog\nICAgfQp9Cg==\n","encoding":"base64"}

