{"sha":"af8d01f827f119e1e71916e89821ae78c61640d2","node_id":"MDQ6QmxvYjIwNjM2NDphZjhkMDFmODI3ZjExOWUxZTcxOTE2ZTg5ODIxYWU3OGM2MTY0MGQy","size":3761,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/af8d01f827f119e1e71916e89821ae78c61640d2","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLm1ldGE7CgppbXBvcnQg\namF2YS5pby5GaWxlOwppbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKaW1w\nb3J0IGphdmEuaW8uSW5wdXRTdHJlYW07CmltcG9ydCBqYXZhLm5ldC5VUkw7\nCmltcG9ydCBqYXZhLm5ldC5VUkxEZWNvZGVyOwppbXBvcnQgamF2YS5zZWN1\ncml0eS5BY2Nlc3NDb250cm9sbGVyOwppbXBvcnQgamF2YS5zZWN1cml0eS5Q\ncml2aWxlZ2VkQWN0aW9uRXhjZXB0aW9uOwppbXBvcnQgamF2YS51dGlsLkFy\ncmF5TGlzdDsKaW1wb3J0IGphdmEudXRpbC5FbnVtZXJhdGlvbjsKaW1wb3J0\nIGphdmEudXRpbC5MaXN0OwppbXBvcnQgamF2YS51dGlsLk5vU3VjaEVsZW1l\nbnRFeGNlcHRpb247CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51\ndGlsLkoyRG9Qcml2SGVscGVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmxpYi51dGlsLk11bHRpQ2xhc3NMb2FkZXI7CgovKioKICogSXRlcmF0b3Ig\nb3ZlciBhIGdpdmVuIG1ldGFkYXRhIHJlc291cmNlLgogKgogKiBAYXV0aG9y\nIEFiZSBXaGl0ZQogKiBAbm9qYXZhZG9jCiAqLwpwdWJsaWMgY2xhc3MgUmVz\nb3VyY2VNZXRhRGF0YUl0ZXJhdG9yIGltcGxlbWVudHMgTWV0YURhdGFJdGVy\nYXRvciB7CgogICAgcHJpdmF0ZSBMaXN0IF91cmxzID0gbnVsbDsKICAgIHBy\naXZhdGUgaW50IF91cmwgPSAtMTsKCiAgICAvKioKICAgICAqIENvbnN0cnVj\ndG9yOyBzdXBwbHkgdGhlIHJlc291cmNlIHRvIHBhcnNlLgogICAgICovCiAg\nICBwdWJsaWMgUmVzb3VyY2VNZXRhRGF0YUl0ZXJhdG9yKFN0cmluZyByc3Jj\nKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgIHRoaXMocnNyYywgbnVs\nbCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3Rvcjsgc3VwcGx5\nIHRoZSByZXNvdXJjZSB0byBwYXJzZS4KICAgICAqLwogICAgcHVibGljIFJl\nc291cmNlTWV0YURhdGFJdGVyYXRvcihTdHJpbmcgcnNyYywgQ2xhc3NMb2Fk\nZXIgbG9hZGVyKQogICAgICAgIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAg\nICAgaWYgKGxvYWRlciA9PSBudWxsKSB7CiAgICAgICAgICAgIE11bHRpQ2xh\nc3NMb2FkZXIgbXVsdGkgPSAoTXVsdGlDbGFzc0xvYWRlcikgQWNjZXNzQ29u\ndHJvbGxlcgogICAgICAgICAgICAgICAgLmRvUHJpdmlsZWdlZChKMkRvUHJp\ndkhlbHBlci5uZXdNdWx0aUNsYXNzTG9hZGVyQWN0aW9uKCkpOwogICAgICAg\nICAgICBtdWx0aS5hZGRDbGFzc0xvYWRlcihtdWx0aS5TWVNURU1fTE9BREVS\nKTsKICAgICAgICAgICAgbXVsdGkuYWRkQ2xhc3NMb2FkZXIobXVsdGkuVEhS\nRUFEX0xPQURFUik7CiAgICAgICAgICAgIG11bHRpLmFkZENsYXNzTG9hZGVy\nKGdldENsYXNzKCkuZ2V0Q2xhc3NMb2FkZXIoKSk7CiAgICAgICAgICAgIGxv\nYWRlciA9IG11bHRpOwogICAgICAgIH0KCiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgRW51bWVyYXRpb24gZSA9IChFbnVtZXJhdGlvbikgQWNjZXNzQ29u\ndHJvbGxlci5kb1ByaXZpbGVnZWQoCiAgICAgICAgICAgICAgICBKMkRvUHJp\ndkhlbHBlci5nZXRSZXNvdXJjZXNBY3Rpb24obG9hZGVyLCByc3JjKSk7CiAg\nICAgICAgICAgIHdoaWxlIChlLmhhc01vcmVFbGVtZW50cygpKSB7CiAgICAg\nICAgICAgICAgICBpZiAoX3VybHMgPT0gbnVsbCkKICAgICAgICAgICAgICAg\nICAgICBfdXJscyA9IG5ldyBBcnJheUxpc3QoMyk7CiAgICAgICAgICAgICAg\nICBfdXJscy5hZGQoZS5uZXh0RWxlbWVudCgpKTsKICAgICAgICAgICAgfQog\nICAgICAgIH0gY2F0Y2ggKFByaXZpbGVnZWRBY3Rpb25FeGNlcHRpb24gcGFl\nKSB7CiAgICAgICAgICAgIHRocm93IChJT0V4Y2VwdGlvbikgcGFlLmdldEV4\nY2VwdGlvbigpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgYm9vbGVh\nbiBoYXNOZXh0KCkgewogICAgICAgIHJldHVybiBfdXJscyAhPSBudWxsICYm\nIF91cmwgKyAxIDwgX3VybHMuc2l6ZSgpOwogICAgfQoKICAgIHB1YmxpYyBP\nYmplY3QgbmV4dCgpIHsKICAgICAgICBpZiAoIWhhc05leHQoKSkKICAgICAg\nICAgICAgdGhyb3cgbmV3IE5vU3VjaEVsZW1lbnRFeGNlcHRpb24oKTsKICAg\nICAgICByZXR1cm4gX3VybHMuZ2V0KCsrX3VybCk7CiAgICB9CgogICAgcHVi\nbGljIElucHV0U3RyZWFtIGdldElucHV0U3RyZWFtKCkgdGhyb3dzIElPRXhj\nZXB0aW9uIHsKICAgICAgICBpZiAoX3VybCA9PSAtMSB8fCBfdXJsID49IF91\ncmxzLnNpemUoKSkKICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxTdGF0\nZUV4Y2VwdGlvbigpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVy\nbiAoSW5wdXRTdHJlYW0pIEFjY2Vzc0NvbnRyb2xsZXIuZG9Qcml2aWxlZ2Vk\nKAogICAgICAgICAgICAgICAgSjJEb1ByaXZIZWxwZXIub3BlblN0cmVhbUFj\ndGlvbigoVVJMKSBfdXJscy5nZXQoX3VybCkpKTsKICAgICAgICB9IGNhdGNo\nIChQcml2aWxlZ2VkQWN0aW9uRXhjZXB0aW9uIHBhZSkgewogICAgICAgICAg\nICB0aHJvdyAoSU9FeGNlcHRpb24pIHBhZS5nZXRFeGNlcHRpb24oKTsKICAg\nICAgICB9CiAgICB9CgogICAgcHVibGljIEZpbGUgZ2V0RmlsZSgpIHRocm93\ncyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgaWYgKF91cmwgPT0gLTEgfHwgX3Vy\nbCA+PSBfdXJscy5zaXplKCkpCiAgICAgICAgICAgIHRocm93IG5ldyBJbGxl\nZ2FsU3RhdGVFeGNlcHRpb24oKTsKICAgICAgICBGaWxlIGZpbGUgPSBuZXcg\nRmlsZShVUkxEZWNvZGVyLmRlY29kZSgoKFVSTCkgX3VybHMuZ2V0KF91cmwp\nKS4KICAgICAgICAgICAgZ2V0RmlsZSgpKSk7CiAgICAgICAgcmV0dXJuICgo\nKEJvb2xlYW4pIEFjY2Vzc0NvbnRyb2xsZXIuZG9Qcml2aWxlZ2VkKAogICAg\nICAgICAgICBKMkRvUHJpdkhlbHBlci5leGlzdHNBY3Rpb24oZmlsZSkpKS5i\nb29sZWFuVmFsdWUoKSkgPyBmaWxlIDpudWxsOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIGNsb3NlKCkgewogICAgfQp9Cgo=\n","encoding":"base64"}

