{"sha":"131dce98fb9ee5113075147c0a4658a3901af484","node_id":"MDQ6QmxvYjIwNjM2NDoxMzFkY2U5OGZiOWVlNTExMzA3NTE0N2MwYTQ2NThhMzkwMWFmNDg0","size":20571,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/131dce98fb9ee5113075147c0a4658a3901af484","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLm1ldGE7CgppbXBvcnQg\namF2YS5pby5GaWxlOwppbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKaW1w\nb3J0IGphdmEuaW8uSW5wdXRTdHJlYW1SZWFkZXI7CmltcG9ydCBqYXZhLmlv\nLlJlYWRlcjsKaW1wb3J0IGphdmEubmV0LlVSTDsKaW1wb3J0IGphdmEuc2Vj\ndXJpdHkuQWNjZXNzQ29udHJvbGxlcjsKaW1wb3J0IGphdmEudXRpbC5BcnJh\neUxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbjsKaW1wb3J0IGph\ndmEudXRpbC5Db2xsZWN0aW9uczsKaW1wb3J0IGphdmEudXRpbC5IYXNoTWFw\nOwppbXBvcnQgamF2YS51dGlsLkhhc2hTZXQ7CmltcG9ydCBqYXZhLnV0aWwu\nTGlua2VkTGlzdDsKaW1wb3J0IGphdmEudXRpbC5MaXN0OwppbXBvcnQgamF2\nYS51dGlsLk1hcDsKaW1wb3J0IGphdmEudXRpbC5TZXQ7CmltcG9ydCBqYXZh\neC54bWwucGFyc2Vycy5TQVhQYXJzZXI7CgppbXBvcnQgb3JnLnhtbC5zYXgu\nQXR0cmlidXRlczsKaW1wb3J0IG9yZy54bWwuc2F4LklucHV0U291cmNlOwpp\nbXBvcnQgb3JnLnhtbC5zYXguTG9jYXRvcjsKaW1wb3J0IG9yZy54bWwuc2F4\nLlNBWEV4Y2VwdGlvbjsKaW1wb3J0IG9yZy54bWwuc2F4LlNBWFBhcnNlRXhj\nZXB0aW9uOwppbXBvcnQgb3JnLnhtbC5zYXguZXh0LkxleGljYWxIYW5kbGVy\nOwppbXBvcnQgb3JnLnhtbC5zYXguaGVscGVycy5EZWZhdWx0SGFuZGxlcjsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIubG9nLkxvZzsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5KMkRvUHJpdkhlbHBlcjsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5KYXZhVmVyc2lv\nbnM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxp\nemVyLk1lc3NhZ2U7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0\naWwuTG9jYWxpemVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi54\nbWwuQ29tbWVudGFibGU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGli\nLnhtbC5Eb2NUeXBlUmVhZGVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmxpYi54bWwuTG9jYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nbGliLnhtbC5YTUxGYWN0b3J5OwoKLyoqCiAqIEN1c3RvbSBTQVggcGFyc2Vy\nIHVzZWQgYnkgdGhlIHN5c3RlbSB0byBxdWlja2x5IHBhcnNlIG1ldGFkYXRh\nIGZpbGVzLgogKiBTdWJjbGFzc2VzIHNob3VsZCBoYW5kbGUgdGhlIHByb2Nl\nc3Npbmcgb2YgdGhlIGNvbnRlbnQuCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRl\nCiAqIEBub2phdmFkb2MKICovCnB1YmxpYyBhYnN0cmFjdCBjbGFzcyBYTUxN\nZXRhRGF0YVBhcnNlciBleHRlbmRzIERlZmF1bHRIYW5kbGVyCiAgICBpbXBs\nZW1lbnRzIExleGljYWxIYW5kbGVyLCBNZXRhRGF0YVBhcnNlciB7CgogICAg\ncHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6\nZXIuZm9yUGFja2FnZQogICAgICAgIChYTUxNZXRhRGF0YVBhcnNlci5jbGFz\ncyk7CiAgICBwcml2YXRlIHN0YXRpYyBib29sZWFuIF9zY2hlbWFCdWc7Cgog\nICAgc3RhdGljIHsKICAgICAgICB0cnkgewogICAgICAgICAgICAvLyBjaGVj\nayBmb3IgWGVyY2VzIHZlcnNpb24gMi4wLjIgdG8gc2VlIGlmIHdlIG5lZWQg\ndG8gZGlzYWJsZQogICAgICAgICAgICAvLyBzY2hlbWEgdmFsaWRhdGlvbiwg\nd2hpY2ggd29ya3MgYXJvdW5kIHRoZSBidWcgcmVwb3J0ZWQgYXQ6CiAgICAg\nICAgICAgIC8vIGh0dHA6Ly9idWdzLnN1bi5jb20vYnVnZGF0YWJhc2Uvdmll\nd19idWcuZG8/YnVnX2lkPTQ3MDg4NTkKICAgICAgICAgICAgX3NjaGVtYUJ1\nZyA9ICJYZXJjZXMtSiAyLjAuMiIuZXF1YWxzKENsYXNzLmZvck5hbWUKICAg\nICAgICAgICAgICAgICgib3JnLmFwYWNoZS54ZXJjZXMuaW1wbC5WZXJzaW9u\nIikuZ2V0RmllbGQoImZWZXJzaW9uIikuCiAgICAgICAgICAgICAgICBnZXQo\nbnVsbCkpOwogICAgICAgIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7CiAgICAg\nICAgICAgIC8vIFhlcmNlcyBtaWdodCBub3QgYmUgYXZhaWxhYmxlCiAgICAg\nICAgICAgIF9zY2hlbWFCdWcgPSBmYWxzZTsKICAgICAgICB9CiAgICB9Cgog\nICAgLy8gbWFwIG9mIGNsYXNzbG9hZGVycyB0byBzZXRzIG9mIHBhcnNlZCBs\nb2NhdGlvbnMsIHNvIHRoYXQgd2UgZG9uJ3QgcGFyc2UKICAgIC8vIHRoZSBz\nYW1lIHJlc291cmNlIG11bHRpcGxlIHRpbWVzIGZvciB0aGUgc2FtZSBjbGFz\ncwogICAgcHJpdmF0ZSBNYXAgX3BhcnNlZCA9IG51bGw7CgogICAgcHJpdmF0\nZSBMb2cgX2xvZyA9IG51bGw7CiAgICBwcml2YXRlIGJvb2xlYW4gX3ZhbGlk\nYXRpbmcgPSB0cnVlOwogICAgcHJpdmF0ZSBib29sZWFuIF9zeXN0ZW1JZCA9\nIHRydWU7CiAgICBwcml2YXRlIGJvb2xlYW4gX2NhY2hpbmcgPSB0cnVlOwog\nICAgcHJpdmF0ZSBib29sZWFuIF9wYXJzZVRleHQgPSB0cnVlOwogICAgcHJp\ndmF0ZSBib29sZWFuIF9wYXJzZUNvbW1lbnRzID0gdHJ1ZTsKICAgIHByaXZh\ndGUgU3RyaW5nIF9zdWZmaXggPSBudWxsOwogICAgcHJpdmF0ZSBDbGFzc0xv\nYWRlciBfbG9hZGVyID0gbnVsbDsKICAgIHByaXZhdGUgQ2xhc3NMb2FkZXIg\nX2N1ckxvYWRlciA9IG51bGw7CgogICAgLy8gc3RhdGUgZm9yIGN1cnJlbnQg\ncGFyc2UKICAgIHByaXZhdGUgZmluYWwgQ29sbGVjdGlvbiBfY3VyUmVzdWx0\ncyA9IG5ldyBMaW5rZWRMaXN0KCk7CiAgICBwcml2YXRlIExpc3QgX3Jlc3Vs\ndHMgPSBudWxsOwogICAgcHJpdmF0ZSBTdHJpbmcgX3NvdXJjZU5hbWUgPSBu\ndWxsOwogICAgcHJpdmF0ZSBGaWxlIF9zb3VyY2VGaWxlID0gbnVsbDsKICAg\nIHByaXZhdGUgU3RyaW5nQnVmZmVyIF90ZXh0ID0gbnVsbDsKICAgIHByaXZh\ndGUgTGlzdCBfY29tbWVudHMgPSBudWxsOwogICAgcHJpdmF0ZSBMb2NhdGlv\nbiBfbG9jYXRpb24gPSBuZXcgTG9jYXRpb24oKTsKICAgIHByaXZhdGUgTGV4\naWNhbEhhbmRsZXIgX2xoID0gbnVsbDsKICAgIHByaXZhdGUgaW50IF9kZXB0\naCA9IC0xOwogICAgcHJpdmF0ZSBpbnQgX2lnbm9yZSA9IEludGVnZXIuTUFY\nX1ZBTFVFOwoKICAgIC8qKgogICAgICogV2hldGhlciB0byBwYXJzZSBlbGVt\nZW50IHRleHQuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGdldFBhcnNl\nVGV4dCgpIHsKICAgICAgICByZXR1cm4gX3BhcnNlVGV4dDsKICAgIH0KCiAg\nICAvKioKICAgICAqIFdoZXRoZXIgdG8gcGFyc2UgZWxlbWVudCB0ZXh0Lgog\nICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRQYXJzZVRleHQoYm9vbGVhbiB0\nZXh0KSB7CiAgICAgICAgX3BhcnNlVGV4dCA9IHRleHQ7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBXaGV0aGVyIHRvIHBhcnNlIGVsZW1lbnQgY29tbWVudHMu\nCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGdldFBhcnNlQ29tbWVudHMo\nKSB7CiAgICAgICAgcmV0dXJuIF9wYXJzZUNvbW1lbnRzOwogICAgfQoKICAg\nIC8qKgogICAgICogV2hldGhlciB0byBwYXJzZSBlbGVtZW50IGNvbW1lbnRz\nLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRQYXJzZUNvbW1lbnRzKGJv\nb2xlYW4gY29tbWVudHMpIHsKICAgICAgICBfcGFyc2VDb21tZW50cyA9IGNv\nbW1lbnRzOwogICAgfQoKICAgIC8qKgogICAgICogVGhlIFhNTCBkb2N1bWVu\ndCBsb2NhdGlvbi4KICAgICAqLwogICAgcHVibGljIExvY2F0aW9uIGdldExv\nY2F0aW9uKCkgewogICAgICAgIHJldHVybiBfbG9jYXRpb247CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBUaGUgbGV4aWNhbCBoYW5kbGVyIHRoYXQgc2hvdWxk\nIGJlIHJlZ2lzdGVyZWQgd2l0aCB0aGUgU0FYIHBhcnNlciB1c2VkCiAgICAg\nKiBieSB0aGlzIGNsYXNzLiBTaW5jZSB0aGUgPGNvZGU+b3JnLnhtbC5zYXgu\nZXh0PC9jb2RlPiBwYWNrYWdlIGlzIG5vdAogICAgICogYSByZXF1aXJlZCBw\nYXJ0IG9mIFNBWDIsIHRoaXMgaGFuZGxlciBtaWdodCBub3QgYmUgdXNlZCBi\neSB0aGUgcGFyc2VyLgogICAgICovCiAgICBwdWJsaWMgTGV4aWNhbEhhbmRs\nZXIgZ2V0TGV4aWNhbEhhbmRsZXIoKSB7CiAgICAgICAgcmV0dXJuIF9saDsK\nICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBsZXhpY2FsIGhhbmRsZXIgdGhh\ndCBzaG91bGQgYmUgcmVnaXN0ZXJlZCB3aXRoIHRoZSBTQVggcGFyc2VyIHVz\nZWQKICAgICAqIGJ5IHRoaXMgY2xhc3MuIFNpbmNlIHRoZSA8Y29kZT5vcmcu\neG1sLnNheC5leHQ8L2NvZGU+IHBhY2thZ2UgaXMgbm90CiAgICAgKiBhIHJl\ncXVpcmVkIHBhcnQgb2YgU0FYMiwgdGhpcyBoYW5kbGVyIG1pZ2h0IG5vdCBi\nZSB1c2VkIGJ5IHRoZSBwYXJzZXIuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lk\nIHNldExleGljYWxIYW5kbGVyKExleGljYWxIYW5kbGVyIGxoKSB7CiAgICAg\nICAgX2xoID0gbGg7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgWE1MIGRv\nY3VtZW50IGxvY2F0aW9uLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRM\nb2NhdGlvbihMb2NhdGlvbiBsb2NhdGlvbikgewogICAgICAgIF9sb2NhdGlv\nbiA9IGxvY2F0aW9uOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciB0\nbyB1c2UgdGhlIHNvdXJjZSBuYW1lIGFzIHRoZSBYTUwgc3lzdGVtIGlkLgog\nICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBnZXRTb3VyY2VJc1N5c3RlbUlk\nKCkgewogICAgICAgIHJldHVybiBfc3lzdGVtSWQ7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBXaGV0aGVyIHRvIHVzZSB0aGUgc291cmNlIG5hbWUgYXMgdGhl\nIFhNTCBzeXN0ZW0gaWQuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFNv\ndXJjZUlzU3lzdGVtSWQoYm9vbGVhbiBzeXN0ZW1JZCkgewogICAgICAgIF9z\neXN0ZW1JZCA9IHN5c3RlbUlkOwogICAgfQoKICAgIC8qKgogICAgICogV2hl\ndGhlciB0aGlzIGlzIGEgdmFsaWRhdGluZyBwYXJzZXIuCiAgICAgKi8KICAg\nIHB1YmxpYyBib29sZWFuIGlzVmFsaWRhdGluZygpIHsKICAgICAgICByZXR1\ncm4gX3ZhbGlkYXRpbmc7CiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVy\nIHRoaXMgaXMgYSB2YWxpZGF0aW5nIHBhcnNlci4KICAgICAqLwogICAgcHVi\nbGljIHZvaWQgc2V0VmFsaWRhdGluZyhib29sZWFuIHZhbGlkYXRpbmcpIHsK\nICAgICAgICBfdmFsaWRhdGluZyA9IHZhbGlkYXRpbmc7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBFeHBlY3RlZCBzdWZmaXggZm9yIG1ldGFkYXRhIHJlc291\ncmNlcywgb3IgbnVsbCBpZiB1bmtub3duLgogICAgICovCiAgICBwdWJsaWMg\nU3RyaW5nIGdldFN1ZmZpeCgpIHsKICAgICAgICByZXR1cm4gX3N1ZmZpeDsK\nICAgIH0KCiAgICAvKioKICAgICAqIEV4cGVjdGVkIHN1ZmZpeCBmb3IgbWV0\nYWRhdGEgcmVzb3VyY2VzLCBvciBudWxsIGlmIHVua25vd24uCiAgICAgKi8K\nICAgIHB1YmxpYyB2b2lkIHNldFN1ZmZpeChTdHJpbmcgc3VmZml4KSB7CiAg\nICAgICAgX3N1ZmZpeCA9IHN1ZmZpeDsKICAgIH0KCiAgICAvKioKICAgICAq\nIFdoZXRoZXIgcGFyc2VkIHJlc291cmNlIG5hbWVzIGFyZSBjYWNoZWQgdG8g\nYXZvaWQgZHVwbGljYXRlIHBhcnNpbmcuCiAgICAgKi8KICAgIHB1YmxpYyBi\nb29sZWFuIGlzQ2FjaGluZygpIHsKICAgICAgICByZXR1cm4gX2NhY2hpbmc7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHBhcnNlZCByZXNvdXJj\nZSBuYW1lcyBhcmUgY2FjaGVkIHRvIGF2b2lkIGR1cGxpY2F0ZSBwYXJzaW5n\nLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRDYWNoaW5nKGJvb2xlYW4g\nY2FjaGluZykgewogICAgICAgIF9jYWNoaW5nID0gY2FjaGluZzsKICAgICAg\nICBpZiAoIWNhY2hpbmcpCiAgICAgICAgICAgIGNsZWFyKCk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBUaGUgbG9nIHRvIHdyaXRlIHRvLgogICAgICovCiAg\nICBwdWJsaWMgTG9nIGdldExvZygpIHsKICAgICAgICByZXR1cm4gX2xvZzsK\nICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBsb2cgdG8gd3JpdGUgdG8uCiAg\nICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldExvZyhMb2cgbG9nKSB7CiAgICAg\nICAgX2xvZyA9IGxvZzsKICAgIH0KCiAgICAvKioKICAgICAqIENsYXNzbG9h\nZGVyIHRvIHVzZSBmb3IgY2xhc3MgbmFtZSByZXNvbHV0aW9uLgogICAgICov\nCiAgICBwdWJsaWMgQ2xhc3NMb2FkZXIgZ2V0Q2xhc3NMb2FkZXIoKSB7CiAg\nICAgICAgcmV0dXJuIF9sb2FkZXI7CiAgICB9CgogICAgLyoqCiAgICAgKiBD\nbGFzc2xvYWRlciB0byB1c2UgZm9yIGNsYXNzIG5hbWUgcmVzb2x1dGlvbi4K\nICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0Q2xhc3NMb2FkZXIoQ2xhc3NM\nb2FkZXIgbG9hZGVyKSB7CiAgICAgICAgX2xvYWRlciA9IGxvYWRlcjsKICAg\nIH0KCiAgICBwdWJsaWMgTGlzdCBnZXRSZXN1bHRzKCkgewogICAgICAgIGlm\nIChfcmVzdWx0cyA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gQ29sbGVj\ndGlvbnMuRU1QVFlfTElTVDsKICAgICAgICByZXR1cm4gX3Jlc3VsdHM7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgcGFyc2UoU3RyaW5nIHJzcmMpIHRocm93\ncyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgaWYgKHJzcmMgIT0gbnVsbCkKICAg\nICAgICAgICAgcGFyc2UobmV3IFJlc291cmNlTWV0YURhdGFJdGVyYXRvcihy\nc3JjLCBfbG9hZGVyKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgcGFyc2Uo\nVVJMIHVybCkgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICBpZiAodXJs\nICE9IG51bGwpCiAgICAgICAgICAgIHBhcnNlKG5ldyBVUkxNZXRhRGF0YUl0\nZXJhdG9yKHVybCkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHBhcnNlKEZp\nbGUgZmlsZSkgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICBpZiAoZmls\nZSA9PSBudWxsKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgaWYgKCEo\nKEJvb2xlYW4pIEFjY2Vzc0NvbnRyb2xsZXIuZG9Qcml2aWxlZ2VkKEoyRG9Q\ncml2SGVscGVyCiAgICAgICAgICAgIC5pc0RpcmVjdG9yeUFjdGlvbihmaWxl\nKSkpLmJvb2xlYW5WYWx1ZSgpKQogICAgICAgICAgICBwYXJzZShuZXcgRmls\nZU1ldGFEYXRhSXRlcmF0b3IoZmlsZSkpOwogICAgICAgIGVsc2UgewogICAg\nICAgICAgICBTdHJpbmcgc3VmZiA9IChfc3VmZml4ID09IG51bGwpID8gIiIg\nOiBfc3VmZml4OwogICAgICAgICAgICBwYXJzZShuZXcgRmlsZU1ldGFEYXRh\nSXRlcmF0b3IoZmlsZSwKICAgICAgICAgICAgICAgIG5ldyBTdWZmaXhNZXRh\nRGF0YUZpbHRlcihzdWZmKSkpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBwYXJzZShDbGFzcyBjbHMsIGJvb2xlYW4gdG9wRG93bikgdGhy\nb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICBTdHJpbmcgc3VmZiA9IChfc3Vm\nZml4ID09IG51bGwpID8gIiIgOiBfc3VmZml4OwogICAgICAgIHBhcnNlKG5l\ndyBDbGFzc01ldGFEYXRhSXRlcmF0b3IoY2xzLCBzdWZmLCB0b3BEb3duKSwg\nIXRvcERvd24pOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHBhcnNlKFJlYWRl\nciB4bWwsIFN0cmluZyBzb3VyY2VOYW1lKSB0aHJvd3MgSU9FeGNlcHRpb24g\newogICAgICAgIGlmICh4bWwgIT0gbnVsbCAmJiAoc291cmNlTmFtZSA9PSBu\ndWxsIHx8ICFwYXJzZWQoc291cmNlTmFtZSkpKQogICAgICAgICAgICBwYXJz\nZU5ld1Jlc291cmNlKHhtbCwgc291cmNlTmFtZSk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgcGFyc2UoTWV0YURhdGFJdGVyYXRvciBpdHIpIHRocm93cyBJ\nT0V4Y2VwdGlvbiB7CiAgICAgICAgcGFyc2UoaXRyLCBmYWxzZSk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBQYXJzZSB0aGUgcmVzb3VyY2VzIHJldHVybmVk\nIGJ5IHRoZSBnaXZlbiBpdGVyYXRvciwgb3B0aW9uYWxseSBzdG9wcGluZwog\nICAgICogd2hlbiB0aGUgZmlyc3QgdmFsaWQgcmVzb3VyY2UgaXMgZm91bmQu\nCiAgICAgKi8KICAgIHByaXZhdGUgdm9pZCBwYXJzZShNZXRhRGF0YUl0ZXJh\ndG9yIGl0ciwgYm9vbGVhbiBzdG9wRmlyc3QpCiAgICAgICAgdGhyb3dzIElP\nRXhjZXB0aW9uIHsKICAgICAgICBpZiAoaXRyID09IG51bGwpCiAgICAgICAg\nICAgIHJldHVybjsKICAgICAgICB0cnkgewogICAgICAgICAgICBTdHJpbmcg\nc291cmNlTmFtZTsKICAgICAgICAgICAgd2hpbGUgKGl0ci5oYXNOZXh0KCkp\nIHsKICAgICAgICAgICAgICAgIHNvdXJjZU5hbWUgPSBpdHIubmV4dCgpLnRv\nU3RyaW5nKCk7CiAgICAgICAgICAgICAgICBpZiAocGFyc2VkKHNvdXJjZU5h\nbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3BGaXJzdCkKICAg\nICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAg\nICAgY29udGludWU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAg\nICAgLy8gaW5kaXZpZHVhbCBmaWxlcyBvZiB0aGUgcmVzb3VyY2UgbWlnaHQg\nYWxyZWFkeSBiZSBwYXJzZWQKICAgICAgICAgICAgICAgIF9zb3VyY2VGaWxl\nID0gaXRyLmdldEZpbGUoKTsKICAgICAgICAgICAgICAgIHBhcnNlTmV3UmVz\nb3VyY2UobmV3IElucHV0U3RyZWFtUmVhZGVyKGl0ci5nZXRJbnB1dFN0cmVh\nbSgpKSwKICAgICAgICAgICAgICAgICAgICBzb3VyY2VOYW1lKTsKICAgICAg\nICAgICAgICAgIGlmIChzdG9wRmlyc3QpCiAgICAgICAgICAgICAgICAgICAg\nYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZmluYWxs\neSB7CiAgICAgICAgICAgIGl0ci5jbG9zZSgpOwogICAgICAgIH0KICAgIH0K\nCiAgICAvKioKICAgICAqIFBhcnNlIGEgcHJldmlvdXNseS11bnNlZW4gc291\ncmNlLiBBbGwgcGFyc2luZyBtZXRob2RzIGRlbGVnYXRlCiAgICAgKiB0byB0\naGlzIG9uZS4KICAgICAqLwogICAgcHJvdGVjdGVkIHZvaWQgcGFyc2VOZXdS\nZXNvdXJjZShSZWFkZXIgeG1sLCBTdHJpbmcgc291cmNlTmFtZSkKICAgICAg\nICB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgIGlmIChfbG9nICE9IG51\nbGwgJiYgX2xvZy5pc1RyYWNlRW5hYmxlZCgpKQogICAgICAgICAgICBfbG9n\nLnRyYWNlKF9sb2MuZ2V0KCJzdGFydC1wYXJzZSIsIHNvdXJjZU5hbWUpKTsK\nCiAgICAgICAgLy8gZXZlbiBpZiB3ZSB3YW50IHRvIHZhbGlkYXRlLCBzcGVj\naWZ5IHRoYXQgaXQgd29uJ3QgaGFwcGVuCiAgICAgICAgLy8gaWYgd2UgaGF2\nZSBuZWl0aGVyIGEgRG9jVHlwZSBub3QgYSBTY2hlbWEKICAgICAgICBPYmpl\nY3Qgc2NoZW1hU291cmNlID0gZ2V0U2NoZW1hU291cmNlKCk7CiAgICAgICAg\naWYgKHNjaGVtYVNvdXJjZSAhPSBudWxsICYmIF9zY2hlbWFCdWcpIHsKICAg\nICAgICAgICAgaWYgKF9sb2cgIT0gbnVsbCAmJiBfbG9nLmlzVHJhY2VFbmFi\nbGVkKCkpCiAgICAgICAgICAgICAgICBfbG9nLnRyYWNlKF9sb2MuZ2V0KCJw\nYXJzZXItc2NoZW1hLWJ1ZyIpKTsKICAgICAgICAgICAgc2NoZW1hU291cmNl\nID0gbnVsbDsKICAgICAgICB9CiAgICAgICAgYm9vbGVhbiB2YWxpZGF0aW5n\nID0gX3ZhbGlkYXRpbmcgJiYgKGdldERvY1R5cGUoKSAhPSBudWxsIAogICAg\nICAgICAgICB8fCBzY2hlbWFTb3VyY2UgIT0gbnVsbCk7CgogICAgICAgIC8v\nIHBhcnNlIHRoZSBtZXRhZGF0YSB3aXRoIGEgU0FYIHBhcnNlcgogICAgICAg\nIHRyeSB7CiAgICAgICAgICAgIF9zb3VyY2VOYW1lID0gc291cmNlTmFtZTsK\nICAgICAgICAgICAgU0FYUGFyc2VyIHBhcnNlciA9IFhNTEZhY3RvcnkuZ2V0\nU0FYUGFyc2VyKHZhbGlkYXRpbmcsIHRydWUpOwogICAgICAgICAgICBPYmpl\nY3Qgc2NoZW1hID0gbnVsbDsKICAgICAgICAgICAgaWYgKHZhbGlkYXRpbmcp\nIHsKICAgICAgICAgICAgICAgIHNjaGVtYSA9IHNjaGVtYVNvdXJjZTsKICAg\nICAgICAgICAgICAgIGlmIChzY2hlbWEgPT0gbnVsbCAmJiBnZXREb2NUeXBl\nKCkgIT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICB4bWwgPSBuZXcgRG9j\nVHlwZVJlYWRlcih4bWwsIGdldERvY1R5cGUoKSk7CiAgICAgICAgICAgIH0K\nCiAgICAgICAgICAgIGlmIChfcGFyc2VDb21tZW50cyB8fCBfbGggIT0gbnVs\nbCkKICAgICAgICAgICAgICAgIHBhcnNlci5zZXRQcm9wZXJ0eQogICAgICAg\nICAgICAgICAgICAgICgiaHR0cDovL3htbC5vcmcvc2F4L3Byb3BlcnRpZXMv\nbGV4aWNhbC1oYW5kbGVyIiwgdGhpcyk7CgogICAgICAgICAgICBpZiAoc2No\nZW1hICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIHBhcnNlci5zZXRQcm9w\nZXJ0eQogICAgICAgICAgICAgICAgICAgICgiaHR0cDovL2phdmEuc3VuLmNv\nbS94bWwvamF4cC9wcm9wZXJ0aWVzL3NjaGVtYUxhbmd1YWdlIiwKICAgICAg\nICAgICAgICAgICAgICAgICAgImh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1M\nU2NoZW1hIik7CiAgICAgICAgICAgICAgICBwYXJzZXIuc2V0UHJvcGVydHkK\nICAgICAgICAgICAgICAgICAgICAoImh0dHA6Ly9qYXZhLnN1bi5jb20veG1s\nL2pheHAvcHJvcGVydGllcy9zY2hlbWFTb3VyY2UiLAogICAgICAgICAgICAg\nICAgICAgICAgICBzY2hlbWEpOwogICAgICAgICAgICB9CgogICAgICAgICAg\nICBJbnB1dFNvdXJjZSBpcyA9IG5ldyBJbnB1dFNvdXJjZSh4bWwpOwogICAg\nICAgICAgICBpZiAoX3N5c3RlbUlkICYmIHNvdXJjZU5hbWUgIT0gbnVsbCkK\nICAgICAgICAgICAgICAgIGlzLnNldFN5c3RlbUlkKHNvdXJjZU5hbWUpOwog\nICAgICAgICAgICBwYXJzZXIucGFyc2UoaXMsIHRoaXMpOwogICAgICAgICAg\nICBmaW5pc2goKTsKICAgICAgICB9IGNhdGNoIChTQVhFeGNlcHRpb24gc2Up\nIHsKICAgICAgICAgICAgSU9FeGNlcHRpb24gaW9lID0gbmV3IElPRXhjZXB0\naW9uKHNlLnRvU3RyaW5nKCkpOwogICAgICAgICAgICBKYXZhVmVyc2lvbnMu\naW5pdENhdXNlKGlvZSwgc2UpOwogICAgICAgICAgICB0aHJvdyBpb2U7CiAg\nICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgcmVzZXQoKTsKICAgICAg\nICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdHJ1ZSBpZiB0aGUg\nZ2l2ZW4gc291cmNlIGlzIHBhcnNlZC4gT3RoZXJ3aXNlLCByZWNvcmQgdGhh\ndAogICAgICogaXQgd2lsbCBiZSBwYXJzZWQuCiAgICAgKi8KICAgIHByb3Rl\nY3RlZCBib29sZWFuIHBhcnNlZChTdHJpbmcgc3JjKSB7CiAgICAgICAgaWYg\nKCFfY2FjaGluZykKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAg\nIGlmIChfcGFyc2VkID09IG51bGwpCiAgICAgICAgICAgIF9wYXJzZWQgPSBu\nZXcgSGFzaE1hcCgpOwoKICAgICAgICBDbGFzc0xvYWRlciBsb2FkZXIgPSBj\ndXJyZW50Q2xhc3NMb2FkZXIoKTsKICAgICAgICBTZXQgc2V0ID0gKFNldCkg\nX3BhcnNlZC5nZXQobG9hZGVyKTsKICAgICAgICBpZiAoc2V0ID09IG51bGwp\nIHsKICAgICAgICAgICAgc2V0ID0gbmV3IEhhc2hTZXQoKTsKICAgICAgICAg\nICAgX3BhcnNlZC5wdXQobG9hZGVyLCBzZXQpOwogICAgICAgIH0KICAgICAg\nICBib29sZWFuIGFkZGVkID0gc2V0LmFkZChzcmMpOwogICAgICAgIGlmICgh\nYWRkZWQgJiYgX2xvZyAhPSBudWxsICYmIF9sb2cuaXNUcmFjZUVuYWJsZWQo\nKSkKICAgICAgICAgICAgX2xvZy50cmFjZShfbG9jLmdldCgiYWxyZWFkeS1w\nYXJzZWQiLCBzcmMpKTsKICAgICAgICByZXR1cm4gIWFkZGVkOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIGNsZWFyKCkgewogICAgICAgIGlmIChfbG9nICE9\nIG51bGwgJiYgX2xvZy5pc1RyYWNlRW5hYmxlZCgpKQogICAgICAgICAgICBf\nbG9nLnRyYWNlKF9sb2MuZ2V0KCJjbGVhci1wYXJzZXIiLCB0aGlzKSk7CiAg\nICAgICAgaWYgKF9wYXJzZWQgIT0gbnVsbCkKICAgICAgICAgICAgX3BhcnNl\nZC5jbGVhcigpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGVycm9yKFNBWFBh\ncnNlRXhjZXB0aW9uIHNlKSB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgICAg\nICB0aHJvdyBnZXRFeGNlcHRpb24oc2UudG9TdHJpbmcoKSk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgZmF0YWxFcnJvcihTQVhQYXJzZUV4Y2VwdGlvbiBz\nZSkgdGhyb3dzIFNBWEV4Y2VwdGlvbiB7CiAgICAgICAgdGhyb3cgZ2V0RXhj\nZXB0aW9uKHNlLnRvU3RyaW5nKCkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHNldERvY3VtZW50TG9jYXRvcihMb2NhdG9yIGxvY2F0b3IpIHsKICAgICAg\nICBfbG9jYXRpb24uc2V0TG9jYXRvcihsb2NhdG9yKTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBzdGFydEVsZW1lbnQoU3RyaW5nIHVyaSwgU3RyaW5nIG5h\nbWUsIFN0cmluZyBxTmFtZSwKICAgICAgICBBdHRyaWJ1dGVzIGF0dHJzKSB0\naHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgICAgICBfZGVwdGgrKzsKICAgICAg\nICBpZiAoX2RlcHRoIDw9IF9pZ25vcmUpCiAgICAgICAgICAgIGlmICghc3Rh\ncnRFbGVtZW50KHFOYW1lLCBhdHRycykpCiAgICAgICAgICAgICAgICBpZ25v\ncmVDb250ZW50KHRydWUpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGVuZEVs\nZW1lbnQoU3RyaW5nIHVyaSwgU3RyaW5nIG5hbWUsIFN0cmluZyBxTmFtZSkK\nICAgICAgICB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgICAgICBpZiAoX2Rl\ncHRoIDwgX2lnbm9yZSkKICAgICAgICAgICAgZW5kRWxlbWVudChxTmFtZSk7\nCiAgICAgICAgX3RleHQgPSBudWxsOwogICAgICAgIGlmIChfY29tbWVudHMg\nIT0gbnVsbCkKICAgICAgICAgICAgX2NvbW1lbnRzLmNsZWFyKCk7CiAgICAg\nICAgaWYgKF9kZXB0aCA9PSBfaWdub3JlKQogICAgICAgICAgICBfaWdub3Jl\nID0gSW50ZWdlci5NQVhfVkFMVUU7CiAgICAgICAgX2RlcHRoLS07CiAgICB9\nCgogICAgcHVibGljIHZvaWQgY2hhcmFjdGVycyhjaGFyW10gY2gsIGludCBz\ndGFydCwgaW50IGxlbmd0aCkgewogICAgICAgIGlmIChfcGFyc2VUZXh0ICYm\nIF9kZXB0aCA8PSBfaWdub3JlKSB7CiAgICAgICAgICAgIGlmIChfdGV4dCA9\nPSBudWxsKQogICAgICAgICAgICAgICAgX3RleHQgPSBuZXcgU3RyaW5nQnVm\nZmVyKCk7CiAgICAgICAgICAgIF90ZXh0LmFwcGVuZChjaCwgc3RhcnQsIGxl\nbmd0aCk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIGNvbW1l\nbnQoY2hhcltdIGNoLCBpbnQgc3RhcnQsIGludCBsZW5ndGgpIHRocm93cyBT\nQVhFeGNlcHRpb24gewogICAgICAgIGlmIChfcGFyc2VDb21tZW50cyAmJiBf\nZGVwdGggPD0gX2lnbm9yZSkgewogICAgICAgICAgICBpZiAoX2NvbW1lbnRz\nID09IG51bGwpCiAgICAgICAgICAgICAgICBfY29tbWVudHMgPSBuZXcgQXJy\nYXlMaXN0KDMpOwogICAgICAgICAgICBfY29tbWVudHMuYWRkKFN0cmluZy52\nYWx1ZU9mKGNoLCBzdGFydCwgbGVuZ3RoKSk7CiAgICAgICAgfQogICAgICAg\nIGlmIChfbGggIT0gbnVsbCkKICAgICAgICAgICAgX2xoLmNvbW1lbnQoY2gs\nIHN0YXJ0LCBsZW5ndGgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHN0YXJ0\nQ0RBVEEoKSB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgICAgICBpZiAoX2xo\nICE9IG51bGwpCiAgICAgICAgICAgIF9saC5zdGFydENEQVRBKCk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgZW5kQ0RBVEEoKSB0aHJvd3MgU0FYRXhjZXB0\naW9uIHsKICAgICAgICBpZiAoX2xoICE9IG51bGwpCiAgICAgICAgICAgIF9s\naC5lbmRDREFUQSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHN0YXJ0RFRE\nKFN0cmluZyBuYW1lLCBTdHJpbmcgcHVibGljSWQsIFN0cmluZyBzeXN0ZW1J\nZCkKICAgICAgICB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAgICAgICBpZiAo\nX2xoICE9IG51bGwpCiAgICAgICAgICAgIF9saC5zdGFydERURChuYW1lLCBw\ndWJsaWNJZCwgc3lzdGVtSWQpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGVu\nZERURCgpIHRocm93cyBTQVhFeGNlcHRpb24gewogICAgICAgIGlmIChfbGgg\nIT0gbnVsbCkKICAgICAgICAgICAgX2xoLmVuZERURCgpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHN0YXJ0RW50aXR5KFN0cmluZyBuYW1lKSB0aHJvd3Mg\nU0FYRXhjZXB0aW9uIHsKICAgICAgICBpZiAoX2xoICE9IG51bGwpCiAgICAg\nICAgICAgIF9saC5zdGFydEVudGl0eShuYW1lKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBlbmRFbnRpdHkoU3RyaW5nIG5hbWUpIHRocm93cyBTQVhFeGNl\ncHRpb24gewogICAgICAgIGlmIChfbGggIT0gbnVsbCkKICAgICAgICAgICAg\nX2xoLmVuZEVudGl0eShuYW1lKTsKICAgIH0KCiAgICAvKioKICAgICAqIE92\nZXJyaWRlIHRoaXMgbWV0aG9kIG1hcmtpbmcgdGhlIHN0YXJ0IG9mIHNvbWUg\nZWxlbWVudC4gSWYgdGhpcyBtZXRob2QKICAgICAqIHJldHVybnMgZmFsc2Us\nIHRoZSBjb250ZW50IG9mIHRoZSBlbGVtZW50IGFuZCB0aGUgZW5kIGVsZW1l\nbnQgZXZlbnQgd2lsbAogICAgICogYmUgaWdub3JlZC4KICAgICAqLwogICAg\ncHJvdGVjdGVkIGFic3RyYWN0IGJvb2xlYW4gc3RhcnRFbGVtZW50KFN0cmlu\nZyBuYW1lLCBBdHRyaWJ1dGVzIGF0dHJzKQogICAgICAgIHRocm93cyBTQVhF\neGNlcHRpb247CgogICAgLyoqCiAgICAgKiBPdmVycmlkZSB0aGlzIG1ldGhv\nZCBtYXJraW5nIHRoZSBlbmQgb2Ygc29tZSBlbGVtZW50LgogICAgICovCiAg\nICBwcm90ZWN0ZWQgYWJzdHJhY3Qgdm9pZCBlbmRFbGVtZW50KFN0cmluZyBu\nYW1lKSB0aHJvd3MgU0FYRXhjZXB0aW9uOwoKICAgIC8qKgogICAgICogQWRk\nIGEgcmVzdWx0IHRvIGJlIHJldHVybmVkIGZyb20gdGhlIGN1cnJlbnQgcGFy\nc2UuCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIGFkZFJlc3VsdChPYmpl\nY3QgcmVzdWx0KSB7CiAgICAgICAgaWYgKF9sb2cgIT0gbnVsbCAmJiBfbG9n\nLmlzVHJhY2VFbmFibGVkKCkpCiAgICAgICAgICAgIF9sb2cudHJhY2UoX2xv\nYy5nZXQoImFkZC1yZXN1bHQiLCByZXN1bHQpKTsKICAgICAgICBfY3VyUmVz\ndWx0cy5hZGQocmVzdWx0KTsKICAgIH0KCiAgICAvKioKICAgICAqIE92ZXJy\naWRlIHRoaXMgbWV0aG9kIHRvIGZpbmlzaCB1cCBhZnRlciBhIHBhcnNlOyB0\naGlzIGlzIG9ubHkKICAgICAqIGNhbGxlZCBpZiBubyBlcnJvcnMgYXJlIGVu\nY291bnRlcmVkIGR1cmluZyBwYXJzaW5nLiBTdWJjbGFzc2VzIHNob3VsZAog\nICAgICogY2FsbCA8Y29kZT5zdXBlci5maW5pc2goKTwvY29kZT4gdG8gcmVz\nb2x2ZSBzdXBlcmNsYXNzIHN0YXRlLgogICAgICovCiAgICBwcm90ZWN0ZWQg\ndm9pZCBmaW5pc2goKSB7CiAgICAgICAgaWYgKF9sb2cgIT0gbnVsbCAmJiBf\nbG9nLmlzVHJhY2VFbmFibGVkKCkpCiAgICAgICAgICAgIF9sb2cudHJhY2Uo\nX2xvYy5nZXQoImVuZC1wYXJzZSIsIGdldFNvdXJjZU5hbWUoKSkpOwogICAg\nICAgIF9yZXN1bHRzID0gbmV3IEFycmF5TGlzdChfY3VyUmVzdWx0cyk7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBPdmVycmlkZSB0aGlzIG1ldGhvZCB0byBj\nbGVhciBhbnkgc3RhdGUgYW5kIHJlYWR5IHRoZSBwYXJzZXIgZm9yCiAgICAg\nKiBhIG5ldyBkb2N1bWVudC4gU3ViY2xhc3NlcyBzaG91bGQgY2FsbAogICAg\nICogPGNvZGU+c3VwZXIucmVzZXQoKTwvY29kZT4gdG8gY2xlYXIgc3VwZXJj\nbGFzcyBzdGF0ZS4KICAgICAqLwogICAgcHJvdGVjdGVkIHZvaWQgcmVzZXQo\nKSB7CiAgICAgICAgX2N1clJlc3VsdHMuY2xlYXIoKTsKICAgICAgICBfY3Vy\nTG9hZGVyID0gbnVsbDsKICAgICAgICBfc291cmNlTmFtZSA9IG51bGw7CiAg\nICAgICAgX3NvdXJjZUZpbGUgPSBudWxsOwogICAgICAgIF9kZXB0aCA9IC0x\nOwogICAgICAgIF9pZ25vcmUgPSBJbnRlZ2VyLk1BWF9WQUxVRTsKICAgICAg\nICBpZiAoX2NvbW1lbnRzICE9IG51bGwpCiAgICAgICAgICAgIF9jb21tZW50\ncy5jbGVhcigpOwogICAgfQoKICAgIC8qKgogICAgICogSW1wbGVtZW50IHRv\nIHJldHVybiB0aGUgWE1MIHNjaGVtYSBzb3VyY2UgZm9yIHRoZSBkb2N1bWVu\ndC4gUmV0dXJucwogICAgICogbnVsbCBieSBkZWZhdWx0LiBNYXkgcmV0dXJu\nOgogICAgICogPHVsPgogICAgICogPGxpPjxjb2RlPlN0cmluZzwvY29kZT4g\ncG9pbnRpbmcgdG8gc2NoZW1hIFVSSS48L2xpPgogICAgICogPGxpPjxjb2Rl\nPklucHV0U3RyZWFtPC9jb2RlPiBjb250YWluaW5nIHNjaGVtYSBjb250ZW50\ncy48L2xpPgogICAgICogPGxpPjxjb2RlPklucHV0U291cmNlPC9jb2RlPiBj\nb250YWluaW5nIHNjaGVtYSBjb250ZW50cy48L2xpPgogICAgICogPGxpPjxj\nb2RlPkZpbGU8L2NvZGU+IGNvbnRhaW5pbmcgc2NoZW1hIGNvbnRlbnRzLjwv\nbGk+CiAgICAgKiA8bGk+QXJyYXkgb2YgYW55IG9mIHRoZSBhYm92ZSBlbGVt\nZW50cy48L2xpPgogICAgICogPC91bD4KICAgICAqLwogICAgcHJvdGVjdGVk\nIE9iamVjdCBnZXRTY2hlbWFTb3VyY2UoKSB0aHJvd3MgSU9FeGNlcHRpb24g\newogICAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIC8qKgogICAgICog\nT3ZlcnJpZGUgdGhpcyBtZXRob2QgdG8gcmV0dXJuIGFueSA8Y29kZT5ET0NU\nWVBFPC9jb2RlPiBkZWNsYXJhdGlvbgogICAgICogdGhhdCBzaG91bGQgYmUg\nZHluYW1pY2FsbHkgaW5jbHVkZWQgaW4geG1sIGRvY3VtZW50cyB0aGF0IHdp\nbGwgYmUKICAgICAqIHZhbGlkYXRlZC4gUmV0dXJucyBudWxsIGJ5IGRlZmF1\nbHQuCiAgICAgKi8KICAgIHByb3RlY3RlZCBSZWFkZXIgZ2V0RG9jVHlwZSgp\nIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIG5hbWUgb2YgdGhlIHNv\ndXJjZSBmaWxlIGJlaW5nIHBhcnNlZC4KICAgICAqLwogICAgcHJvdGVjdGVk\nIFN0cmluZyBnZXRTb3VyY2VOYW1lKCkgewogICAgICAgIHJldHVybiBfc291\ncmNlTmFtZTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgZmls\nZSBvZiB0aGUgc291cmNlIGJlaW5nIHBhcnNlZC4KICAgICAqLwogICAgcHJv\ndGVjdGVkIEZpbGUgZ2V0U291cmNlRmlsZSgpIHsKICAgICAgICByZXR1cm4g\nX3NvdXJjZUZpbGU7CiAgICB9CgogICAgLyoqCiAgICAgKiBBZGQgY3VycmVu\ndCBjb21tZW50cyB0byB0aGUgZ2l2ZW4gZW50aXR5LiBCeSBkZWZhdWx0LCBh\nc3N1bWVzIGVudGl0eQogICAgICogaXMge0BsaW5rIENvbW1lbnRhYmxlfS4K\nICAgICAqLwogICAgcHJvdGVjdGVkIHZvaWQgYWRkQ29tbWVudHMoT2JqZWN0\nIG9iaikgewogICAgICAgIFN0cmluZ1tdIGNvbW1lbnRzID0gY3VycmVudENv\nbW1lbnRzKCk7CiAgICAgICAgaWYgKGNvbW1lbnRzLmxlbmd0aCA+IDAgJiYg\nb2JqIGluc3RhbmNlb2YgQ29tbWVudGFibGUpCiAgICAgICAgICAgICgoQ29t\nbWVudGFibGUpIG9iaikuc2V0Q29tbWVudHMoY29tbWVudHMpOwogICAgfQoK\nICAgIC8qKgogICAgICogQXJyYXkgb2YgY29tbWVudHMgZm9yIHRoZSBjdXJy\nZW50IG5vZGUsIG9yIGVtcHR5IGFycmF5IGlmIG5vbmUuCiAgICAgKi8KICAg\nIHByb3RlY3RlZCBTdHJpbmdbXSBjdXJyZW50Q29tbWVudHMoKSB7CiAgICAg\nICAgaWYgKF9jb21tZW50cyA9PSBudWxsIHx8IF9jb21tZW50cy5pc0VtcHR5\nKCkpCiAgICAgICAgICAgIHJldHVybiBDb21tZW50YWJsZS5FTVBUWV9DT01N\nRU5UUzsKICAgICAgICByZXR1cm4gKFN0cmluZ1tdKSBfY29tbWVudHMudG9B\ncnJheShuZXcgU3RyaW5nW19jb21tZW50cy5zaXplKCldKTsKICAgIH0KCiAg\nICAvKioKICAgICAqIFJldHVybiB0aGUgdGV4dCB2YWx1ZSB3aXRoaW4gdGhl\nIGN1cnJlbnQgbm9kZS4KICAgICAqLwogICAgcHJvdGVjdGVkIFN0cmluZyBj\ndXJyZW50VGV4dCgpIHsKICAgICAgICBpZiAoX3RleHQgPT0gbnVsbCkKICAg\nICAgICAgICAgcmV0dXJuICIiOwogICAgICAgIHJldHVybiBfdGV4dC50b1N0\ncmluZygpLnRyaW0oKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0\naGUgY3VycmVudCBsb2NhdGlvbiB3aXRoaW4gdGhlIHNvdXJjZSBmaWxlLgog\nICAgICovCiAgICBwcm90ZWN0ZWQgU3RyaW5nIGN1cnJlbnRMb2NhdGlvbigp\nIHsKICAgICAgICByZXR1cm4gIiBbIiArIF9sb2MuZ2V0KCJsb2MtcHJlZml4\nIikgKyBfbG9jYXRpb24uZ2V0TG9jYXRpb24oKSArICJdIjsKICAgIH0KCiAg\nICAvKioKICAgICAqIFJldHVybiB0aGUgcGFyc2UgZGVwdGguIFdpdGhpbiB0\naGUgcm9vdCBlbGVtZW50LCB0aGUgZGVwdGggaXMgMCwKICAgICAqIHdpdGhp\nbiB0aGUgZmlyc3QgbmVzdGVkIGVsZW1lbnQsIGl0IGlzIDEsIGFuZCBzbyBm\nb3J0aC4KICAgICAqLwogICAgcHJvdGVjdGVkIGludCBjdXJyZW50RGVwdGgo\nKSB7CiAgICAgICAgcmV0dXJuIF9kZXB0aDsKICAgIH0KCiAgICAvKioKICAg\nICAqIFJldHVybiB0aGUgY2xhc3MgbG9hZGVyIHRvIHVzZSB3aGVuIHJlc29s\ndmluZyByZXNvdXJjZXMgYW5kIGxvYWRpbmcKICAgICAqIGNsYXNzZXMuCiAg\nICAgKi8KICAgIHByb3RlY3RlZCBDbGFzc0xvYWRlciBjdXJyZW50Q2xhc3NM\nb2FkZXIoKSB7CiAgICAgICAgaWYgKF9sb2FkZXIgIT0gbnVsbCkKICAgICAg\nICAgICAgcmV0dXJuIF9sb2FkZXI7CiAgICAgICAgaWYgKF9jdXJMb2FkZXIg\nPT0gbnVsbCkKICAgICAgICAgICAgX2N1ckxvYWRlciA9IChDbGFzc0xvYWRl\ncikgQWNjZXNzQ29udHJvbGxlci5kb1ByaXZpbGVnZWQoCiAgICAgICAgICAg\nICAgICBKMkRvUHJpdkhlbHBlci5nZXRDb250ZXh0Q2xhc3NMb2FkZXJBY3Rp\nb24oKSk7CiAgICAgICAgcmV0dXJuIF9jdXJMb2FkZXI7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBJZ25vcmUgYWxsIGNvbnRlbnQgYmVsb3cgdGhlIGN1cnJl\nbnQgZWxlbWVudC4KICAgICAqCiAgICAgKiBAcGFyYW0gaWdub3JlRW5kIHdo\nZXRoZXIgdG8gaWdub3JlIHRoZSBlbmQgZWxlbWVudCBldmVudAogICAgICov\nCiAgICBwcm90ZWN0ZWQgdm9pZCBpZ25vcmVDb250ZW50KGJvb2xlYW4gaWdu\nb3JlRW5kKSB7CiAgICAgICAgX2lnbm9yZSA9IF9kZXB0aDsKICAgICAgICBp\nZiAoIWlnbm9yZUVuZCkKICAgICAgICAgICAgX2lnbm9yZSsrOwogICAgfQoK\nICAgIC8qKgogICAgICogUmV0dXJucyBhIFNBWEV4Y2VwdGlvbiB3aXRoIHRo\nZSBzb3VyY2UgZmlsZSBuYW1lIGFuZCB0aGUgZ2l2ZW4gZXJyb3IKICAgICAq\nIG1lc3NhZ2UuCiAgICAgKi8KICAgIHByb3RlY3RlZCBTQVhFeGNlcHRpb24g\nZ2V0RXhjZXB0aW9uKFN0cmluZyBtc2cpIHsKICAgICAgICByZXR1cm4gbmV3\nIFNBWEV4Y2VwdGlvbihnZXRTb3VyY2VOYW1lKCkgKyBjdXJyZW50TG9jYXRp\nb24oKSArCiAgICAgICAgICAgICI6ICIgKyBtc2cpOwogICAgfQoKICAgIC8q\nKgogICAgICogUmV0dXJucyBhIFNBWEV4Y2VwdGlvbiB3aXRoIHRoZSBzb3Vy\nY2UgZmlsZSBuYW1lIGFuZCB0aGUgZ2l2ZW4gZXJyb3IKICAgICAqIG1lc3Nh\nZ2UuCiAgICAgKi8KICAgIHByb3RlY3RlZCBTQVhFeGNlcHRpb24gZ2V0RXhj\nZXB0aW9uKE1lc3NhZ2UgbXNnKSB7CiAgICAgICAgcmV0dXJuIG5ldyBTQVhF\neGNlcHRpb24oZ2V0U291cmNlTmFtZSgpICsgY3VycmVudExvY2F0aW9uKCkg\nKwogICAgICAgICAgICAiOiAiICsgbXNnLmdldE1lc3NhZ2UoKSk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGEgU0FYRXhjZXB0aW9uIHdpdGgg\ndGhlIHNvdXJjZSBmaWxlIG5hbWUgYW5kIHRoZSBnaXZlbiBlcnJvcgogICAg\nICogbWVzc2FnZS4KICAgICAqLwogICAgcHJvdGVjdGVkIFNBWEV4Y2VwdGlv\nbiBnZXRFeGNlcHRpb24oTWVzc2FnZSBtc2csIFRocm93YWJsZSBjYXVzZSkg\newogICAgICAgIGlmIChjYXVzZSAhPSBudWxsICYmIF9sb2cgIT0gbnVsbCAm\nJiBfbG9nLmlzVHJhY2VFbmFibGVkKCkpCiAgICAgICAgICAgIF9sb2cudHJh\nY2UoX2xvYy5nZXQoInNheC1leGNlcHRpb24iLAogICAgICAgICAgICAgICAg\nZ2V0U291cmNlTmFtZSgpLCBfbG9jYXRpb24uZ2V0TG9jYXRpb24oKSksIGNh\ndXNlKTsKICAgICAgICBTQVhFeGNlcHRpb24gZSA9IG5ldyBTQVhFeGNlcHRp\nb24oZ2V0U291cmNlTmFtZSgpICsgY3VycmVudExvY2F0aW9uKCkgKwogICAg\nICAgICAgICAiOiAiICsgbXNnICsgIiBbIiArIGNhdXNlICsgIl0iKTsKICAg\nICAgICBlLmluaXRDYXVzZShjYXVzZSk7CiAgICAgICAgcmV0dXJuIGU7CiAg\nICB9Cn0K\n","encoding":"base64"}

