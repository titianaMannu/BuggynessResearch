{"sha":"92376405ae591922a8c14916213aaa4258b7700e","node_id":"MDQ6QmxvYjIwNjM2NDo5MjM3NjQwNWFlNTkxOTIyYThjMTQ5MTYyMTNhYWE0MjU4Yjc3MDBl","size":11249,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/92376405ae591922a8c14916213aaa4258b7700e","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLm1ldGE7CgppbXBvcnQg\namF2YS5pby5GaWxlOwppbXBvcnQgamF2YS5pby5GaWxlV3JpdGVyOwppbXBv\ncnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEuaW8uU3RyaW5n\nV3JpdGVyOwppbXBvcnQgamF2YS5pby5Xcml0ZXI7CmltcG9ydCBqYXZhLnNl\nY3VyaXR5LkFjY2Vzc0NvbnRyb2xsZXI7CmltcG9ydCBqYXZhLnNlY3VyaXR5\nLlByaXZpbGVnZWRBY3Rpb25FeGNlcHRpb247CmltcG9ydCBqYXZhLnV0aWwu\nQ29sbGVjdGlvbjsKaW1wb3J0IGphdmEudXRpbC5IYXNoTWFwOwppbXBvcnQg\namF2YS51dGlsLkl0ZXJhdG9yOwppbXBvcnQgamF2YS51dGlsLkxpbmtlZExp\nc3Q7CmltcG9ydCBqYXZhLnV0aWwuTWFwOwppbXBvcnQgamF2YXgueG1sLnRy\nYW5zZm9ybS5SZXN1bHQ7CmltcG9ydCBqYXZheC54bWwudHJhbnNmb3JtLlRy\nYW5zZm9ybWVyQ29uZmlndXJhdGlvbkV4Y2VwdGlvbjsKaW1wb3J0IGphdmF4\nLnhtbC50cmFuc2Zvcm0uVHJhbnNmb3JtZXJGYWN0b3J5OwppbXBvcnQgamF2\nYXgueG1sLnRyYW5zZm9ybS5zYXguU0FYVHJhbnNmb3JtZXJGYWN0b3J5Owpp\nbXBvcnQgamF2YXgueG1sLnRyYW5zZm9ybS5zYXguVHJhbnNmb3JtZXJIYW5k\nbGVyOwppbXBvcnQgamF2YXgueG1sLnRyYW5zZm9ybS5zdHJlYW0uU3RyZWFt\nUmVzdWx0OwoKaW1wb3J0IG9yZy54bWwuc2F4LkF0dHJpYnV0ZXM7CmltcG9y\ndCBvcmcueG1sLnNheC5Db250ZW50SGFuZGxlcjsKaW1wb3J0IG9yZy54bWwu\nc2F4LlNBWEV4Y2VwdGlvbjsKaW1wb3J0IG9yZy54bWwuc2F4LmV4dC5MZXhp\nY2FsSGFuZGxlcjsKaW1wb3J0IG9yZy54bWwuc2F4LmhlbHBlcnMuQXR0cmli\ndXRlc0ltcGw7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmxvZy5M\nb2c7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuRmlsZXM7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuSjJEb1ByaXZI\nZWxwZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9j\nYWxpemVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi54bWwuQ29t\nbWVudGFibGU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnhtbC5Y\nTUxXcml0ZXI7CgovKioKICogQWJzdHJhY3QgYmFzZSB0eXBlIGZvciBzZXJs\naWFsaXplcnMgdGhhdCB0cmFuc2ZlciBncm91cHMgb2Ygb2JqZWN0cwogKiB0\nbyBYTUwuIEluY2x1ZGVzIGEgd2F5IG9mIHNlcmlhbGl6aW5nIG9iamVjdHMg\nYmFjayB0byB0aGUgWE1MIGZpbGVzCiAqIHRoZXkgd2VyZSBwYXJzZWQgZnJv\nbS4gU2VyaWFsaXplcnMgYXJlIG5vdCB0aHJlYWQgc2FmZS4KICoKICogQGF1\ndGhvciBBYmUgV2hpdGUKICogQG5vamF2YWRvYwogKi8KcHVibGljIGFic3Ry\nYWN0IGNsYXNzIFhNTE1ldGFEYXRhU2VyaWFsaXplciBpbXBsZW1lbnRzIE1l\ndGFEYXRhU2VyaWFsaXplciB7CgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwg\nTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6ZXIuZm9yUGFja2FnZQogICAgICAg\nIChYTUxNZXRhRGF0YVNlcmlhbGl6ZXIuY2xhc3MpOwogICAgcHJpdmF0ZSBz\ndGF0aWMgZmluYWwgU0FYVHJhbnNmb3JtZXJGYWN0b3J5IF9mYWN0b3J5ID0K\nICAgICAgICAoU0FYVHJhbnNmb3JtZXJGYWN0b3J5KSBUcmFuc2Zvcm1lckZh\nY3RvcnkubmV3SW5zdGFuY2UoKTsKCiAgICBwcml2YXRlIExvZyBfbG9nID0g\nbnVsbDsKCiAgICAvLyBjdXJyZW50IHNlcmlhbGl6YXRpb24gc3RhdGUKICAg\nIHByaXZhdGUgZmluYWwgQXR0cmlidXRlc0ltcGwgX2F0dHJzID0gbmV3IEF0\ndHJpYnV0ZXNJbXBsKCk7CiAgICBwcml2YXRlIENvbnRlbnRIYW5kbGVyIF9o\nYW5kbGVyID0gbnVsbDsKICAgIHByaXZhdGUgaW50IF9mbGFncyA9IDA7CiAg\nICBwcml2YXRlIEZpbGUgX2JhY2t1cCA9IG51bGw7CgogICAgLyoqCiAgICAg\nKiBUaGUgbG9nIHRvIHdyaXRlIHRvLgogICAgICovCiAgICBwdWJsaWMgTG9n\nIGdldExvZygpIHsKICAgICAgICByZXR1cm4gX2xvZzsKICAgIH0KCiAgICAv\nKioKICAgICAqIFRoZSBsb2cgdG8gd3JpdGUgdG8uCiAgICAgKi8KICAgIHB1\nYmxpYyB2b2lkIHNldExvZyhMb2cgbG9nKSB7CiAgICAgICAgX2xvZyA9IGxv\nZzsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXJpYWxpemUoaW50IGZsYWdz\nKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgIHNlcmlhbGl6ZSgoTWFw\nKSBudWxsLCBmbGFncyk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2VyaWFs\naXplKE1hcCBvdXRwdXQsIGludCBmbGFncykgdGhyb3dzIElPRXhjZXB0aW9u\nIHsKICAgICAgICBNYXAgZmlsZXMgPSBnZXRGaWxlTWFwKCk7CiAgICAgICAg\naWYgKGZpbGVzID09IG51bGwpCiAgICAgICAgICAgIHJldHVybjsKCiAgICAg\nICAgLy8gZm9yIGVhY2ggZmlsZSwgc2VyaWFsaXplIG9iamVjdHMKICAgICAg\nICBNYXAuRW50cnkgZW50cnk7CiAgICAgICAgZm9yIChJdGVyYXRvciBpdHIg\nPSBmaWxlcy5lbnRyeVNldCgpLml0ZXJhdG9yKCk7IGl0ci5oYXNOZXh0KCk7\nKSB7CiAgICAgICAgICAgIGVudHJ5ID0gKE1hcC5FbnRyeSkgaXRyLm5leHQo\nKTsKICAgICAgICAgICAgRmlsZSBmaWxlID0gKEZpbGUpIGVudHJ5LmdldEtl\neSgpOwogICAgICAgICAgICBDb2xsZWN0aW9uIGZpbGVPYmpzID0gKENvbGxl\nY3Rpb24pIGVudHJ5LmdldFZhbHVlKCk7CgogICAgICAgICAgICBpZiAoX2xv\nZyAhPSBudWxsICYmIF9sb2cuaXNJbmZvRW5hYmxlZCgpKQogICAgICAgICAg\nICAgICAgX2xvZy5pbmZvKF9sb2MuZ2V0KCJzZXItZmlsZSIsIGZpbGUpKTsK\nCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBUcmFuc2Zvcm1l\nckhhbmRsZXIgdHJhbnMgPSBfZmFjdG9yeS5uZXdUcmFuc2Zvcm1lckhhbmRs\nZXIoKTsKICAgICAgICAgICAgICAgIFdyaXRlciB3cml0ZXI7CiAgICAgICAg\nICAgICAgICBpZiAob3V0cHV0ID09IG51bGwpIHsKICAgICAgICAgICAgICAg\nICAgICBfYmFja3VwID0gcHJlcGFyZVdyaXRlKGZpbGUpOwogICAgICAgICAg\nICAgICAgICAgIHdyaXRlciA9IG5ldyBGaWxlV3JpdGVyKGZpbGUpOwogICAg\nICAgICAgICAgICAgfSBlbHNlCiAgICAgICAgICAgICAgICAgICAgd3JpdGVy\nID0gbmV3IFN0cmluZ1dyaXRlcigpOwoKICAgICAgICAgICAgICAgIFdyaXRl\nciB4bWwgPSB3cml0ZXI7CiAgICAgICAgICAgICAgICBpZiAoKGZsYWdzICYg\nUFJFVFRZKSA+IDApCiAgICAgICAgICAgICAgICAgICAgeG1sID0gbmV3IFhN\nTFdyaXRlcih3cml0ZXIpOwogICAgICAgICAgICAgICAgdHJhbnMuc2V0UmVz\ndWx0KG5ldyBTdHJlYW1SZXN1bHQoeG1sKSk7CiAgICAgICAgICAgICAgICBz\nZXJpYWxpemUoZmlsZU9ianMsIHRyYW5zLCBmbGFncyk7CgogICAgICAgICAg\nICAgICAgaWYgKG91dHB1dCAhPSBudWxsKQogICAgICAgICAgICAgICAgICAg\nIG91dHB1dC5wdXQoZmlsZSwgKChTdHJpbmdXcml0ZXIpIHdyaXRlcikudG9T\ndHJpbmcoKSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKFNBWEV4Y2VwdGlvbiBz\nZSkgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IElPRXhjZXB0aW9uKHNl\nLnRvU3RyaW5nKCkpOwogICAgICAgICAgICB9IGNhdGNoIChUcmFuc2Zvcm1l\nckNvbmZpZ3VyYXRpb25FeGNlcHRpb24gdGNlKSB7CiAgICAgICAgICAgICAg\nICB0aHJvdyBuZXcgSU9FeGNlcHRpb24odGNlLnRvU3RyaW5nKCkpOwogICAg\nICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogUHJl\ncGFyZSB0byB3cml0ZSB0byB0aGUgZ2l2ZW4gZmlsZS4gQmFjayB1cCB0aGUg\nZmlsZSBhbmQgbWFrZSBzdXJlIHRoZQogICAgICogcGF0aCB0byBpdCBpcyBj\ncmVhdGVkLgogICAgICovCiAgICBwcm90ZWN0ZWQgRmlsZSBwcmVwYXJlV3Jp\ndGUoRmlsZSBmaWxlKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgIEZp\nbGUgYmFja3VwID0gRmlsZXMuYmFja3VwKGZpbGUsIGZhbHNlKTsKICAgICAg\nICBpZiAoYmFja3VwID09IG51bGwpIHsKICAgICAgICAgICAgRmlsZSBwYXJl\nbnQgPSBmaWxlLmdldFBhcmVudEZpbGUoKTsKICAgICAgICAgICAgaWYgKHBh\ncmVudCAhPSBudWxsICYmICEoKEJvb2xlYW4pIEFjY2Vzc0NvbnRyb2xsZXIu\nZG9Qcml2aWxlZ2VkKAogICAgICAgICAgICAgICAgSjJEb1ByaXZIZWxwZXIu\nZXhpc3RzQWN0aW9uKHBhcmVudCkpKS5ib29sZWFuVmFsdWUoKSkKICAgICAg\nICAgICAgICAgIEFjY2Vzc0NvbnRyb2xsZXIuZG9Qcml2aWxlZ2VkKAogICAg\nICAgICAgICAgICAgICAgIEoyRG9Qcml2SGVscGVyLm1rZGlyc0FjdGlvbihw\nYXJlbnQpKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJhY2t1cDsKICAg\nIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYSB7QGxpbmsgTWFwfSB3aXRo\nIGtleXMgb2YgdGhlIHtAbGluayBGaWxlfSB0byBiZQogICAgICogd3JpdHRl\nbiB0bywgYW5kIHZhbHVlcyBvZiBhIHtAbGluayBDb2xsZWN0aW9ufSBvZgog\nICAgICoge0BsaW5rIFNvdXJjZVRyYWNrZXJ9IGluc3RhbmNlcy4KICAgICAq\nLwogICAgcHJvdGVjdGVkIE1hcCBnZXRGaWxlTWFwKCkgewogICAgICAgIENv\nbGxlY3Rpb24gb2JqcyA9IGdldE9iamVjdHMoKTsKICAgICAgICBpZiAob2Jq\ncyA9PSBudWxsIHx8IG9ianMuaXNFbXB0eSgpKQogICAgICAgICAgICByZXR1\ncm4gbnVsbDsKCiAgICAgICAgLy8gY3JlYXRlIGEgbWFwIG9mIGZpbGVzIHRv\nIGxpc3RzIG9mIG9iamVjdHMKICAgICAgICBNYXAgZmlsZXMgPSBuZXcgSGFz\naE1hcCgpOwogICAgICAgIEZpbGUgZmlsZTsKICAgICAgICBDb2xsZWN0aW9u\nIGZpbGVPYmpzOwogICAgICAgIE9iamVjdCBvYmo7CiAgICAgICAgZm9yIChJ\ndGVyYXRvciBpdHIgPSBvYmpzLml0ZXJhdG9yKCk7IGl0ci5oYXNOZXh0KCk7\nKSB7CiAgICAgICAgICAgIG9iaiA9IGl0ci5uZXh0KCk7CiAgICAgICAgICAg\nIGZpbGUgPSBnZXRTb3VyY2VGaWxlKG9iaik7CiAgICAgICAgICAgIGlmIChm\naWxlID09IG51bGwpIHsKICAgICAgICAgICAgICAgIGlmIChfbG9nICE9IG51\nbGwgJiYgX2xvZy5pc1RyYWNlRW5hYmxlZCgpKQogICAgICAgICAgICAgICAg\nICAgIF9sb2cudHJhY2UoX2xvYy5nZXQoIm5vLWZpbGUiLCBvYmopKTsKICAg\nICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAg\nICAgICBmaWxlT2JqcyA9IChDb2xsZWN0aW9uKSBmaWxlcy5nZXQoZmlsZSk7\nCiAgICAgICAgICAgIGlmIChmaWxlT2JqcyA9PSBudWxsKSB7CiAgICAgICAg\nICAgICAgICBmaWxlT2JqcyA9IG5ldyBMaW5rZWRMaXN0KCk7CiAgICAgICAg\nICAgICAgICBmaWxlcy5wdXQoZmlsZSwgZmlsZU9ianMpOwogICAgICAgICAg\nICB9CiAgICAgICAgICAgIGZpbGVPYmpzLmFkZChvYmopOwogICAgICAgIH0K\nCiAgICAgICAgcmV0dXJuIGZpbGVzOwogICAgfQoKICAgIC8qKgogICAgICog\nUmV0dXJuIHRoZSBzb3VyY2UgZmlsZSBmb3IgdGhlIGdpdmVuIGluc3RhbmNl\nLiBCeSBkZWZhdWx0LCBjaGVja3MKICAgICAqIHRvIHNlZSBpZiB0aGUgaW5z\ndGFuY2UgaW1wbGVtZW50cyB7QGxpbmsgU291cmNlVHJhY2tlcn0uCiAgICAg\nKi8KICAgIHByb3RlY3RlZCBGaWxlIGdldFNvdXJjZUZpbGUoT2JqZWN0IG9i\naikgewogICAgICAgIGlmIChvYmogaW5zdGFuY2VvZiBTb3VyY2VUcmFja2Vy\nKQogICAgICAgICAgICByZXR1cm4gKChTb3VyY2VUcmFja2VyKSBvYmopLmdl\ndFNvdXJjZUZpbGUoKTsKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCBzZXJpYWxpemUoRmlsZSBmaWxlLCBpbnQgZmxhZ3Mp\nIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgaWYgKF9sb2cgIT0gbnVs\nbCkKICAgICAgICAgICAgX2xvZy5pbmZvKF9sb2MuZ2V0KCJzZXItZmlsZSIs\nIGZpbGUpKTsKCiAgICAgICAgX2JhY2t1cCA9IHByZXBhcmVXcml0ZShmaWxl\nKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBGaWxlV3JpdGVyIG91dCA9\nIG5ldyBGaWxlV3JpdGVyKAogICAgICAgICAgICAgICAgKFN0cmluZykgQWNj\nZXNzQ29udHJvbGxlci5kb1ByaXZpbGVnZWQoCiAgICAgICAgICAgICAgICAg\nICAgSjJEb1ByaXZIZWxwZXIuZ2V0Q2Fub25pY2FsUGF0aEFjdGlvbihmaWxl\nKSksCiAgICAgICAgICAgICAgICAoZmxhZ3MgJiBBUFBFTkQpID4gMCk7CiAg\nICAgICAgICAgIHNlcmlhbGl6ZShvdXQsIGZsYWdzKTsKICAgICAgICAgICAg\nb3V0LmNsb3NlKCk7CiAgICAgICAgfSBjYXRjaCAoUHJpdmlsZWdlZEFjdGlv\nbkV4Y2VwdGlvbiBwYWUpIHsKICAgICAgICAgICAgdGhyb3cgKElPRXhjZXB0\naW9uKSBwYWUuZ2V0RXhjZXB0aW9uKCk7CiAgICAgICAgfQogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHNlcmlhbGl6ZShXcml0ZXIgb3V0LCBpbnQgZmxhZ3Mp\nIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgaWYgKChmbGFncyAmIFBSRVRUWSkgPiAwKQogICAgICAgICAgICAgICAg\nc2VyaWFsaXplKG5ldyBTdHJlYW1SZXN1bHQobmV3IFhNTFdyaXRlcihvdXQp\nKSwgZmxhZ3MpOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBz\nZXJpYWxpemUobmV3IFN0cmVhbVJlc3VsdChvdXQpLCBmbGFncyk7CiAgICAg\nICAgfSBjYXRjaCAoU0FYRXhjZXB0aW9uIHNlKSB7CiAgICAgICAgICAgIHRo\ncm93IG5ldyBJT0V4Y2VwdGlvbihzZS50b1N0cmluZygpKTsKICAgICAgICB9\nCiAgICB9CgogICAgLyoqCiAgICAgKiBTZXJpYWxpemUgdGhlIGN1cnJlbnQg\nc2V0IG9mIG9iamVjdHMgdG8gdGhlIGdpdmVuIHJlc3VsdC4KICAgICAqLwog\nICAgcHVibGljIHZvaWQgc2VyaWFsaXplKFJlc3VsdCByZXN1bHQsIGludCBm\nbGFncykgdGhyb3dzIFNBWEV4Y2VwdGlvbiB7CiAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgVHJhbnNmb3JtZXJIYW5kbGVyIHRyYW5zID0gX2ZhY3Rvcnku\nbmV3VHJhbnNmb3JtZXJIYW5kbGVyKCk7CiAgICAgICAgICAgIHRyYW5zLnNl\ndFJlc3VsdChyZXN1bHQpOwogICAgICAgICAgICBzZXJpYWxpemUodHJhbnMs\nIGZsYWdzKTsKICAgICAgICB9IGNhdGNoIChUcmFuc2Zvcm1lckNvbmZpZ3Vy\nYXRpb25FeGNlcHRpb24gdGNlKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBT\nQVhFeGNlcHRpb24odGNlKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAg\nICAgKiBTZXJpbGl6ZSB0aGUgY3VycmVudCBzZXQgb2Ygb2JqZWN0cyB0byBh\nIHNlcmllcyBvZiBTQVggZXZlbnRzIG9uIHRoZQogICAgICogZ2l2ZW4gaGFu\nZGxlci4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2VyaWFsaXplKENvbnRl\nbnRIYW5kbGVyIGhhbmRsZXIsIGludCBmbGFncykKICAgICAgICB0aHJvd3Mg\nU0FYRXhjZXB0aW9uIHsKICAgICAgICBzZXJpYWxpemUoZ2V0T2JqZWN0cygp\nLCBoYW5kbGVyLCBmbGFncyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXJp\nYWxpemUgdGhlIGdpdmVuIGNvbGxlY3Rpb24gb2Ygb2JqZWN0cyB0byB0aGUg\nZ2l2ZW4gaGFuZGxlci4KICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIHNlcmlh\nbGl6ZShDb2xsZWN0aW9uIG9ianMsIENvbnRlbnRIYW5kbGVyIGhhbmRsZXIs\nIGludCBmbGFncykKICAgICAgICB0aHJvd3MgU0FYRXhjZXB0aW9uIHsKICAg\nICAgICBpZiAoX2xvZyAhPSBudWxsICYmIF9sb2cuaXNUcmFjZUVuYWJsZWQo\nKSkKICAgICAgICAgICAgX2xvZy50cmFjZShfbG9jLmdldCgic2VyLW9ianMi\nLCBvYmpzKSk7CgogICAgICAgIF9oYW5kbGVyID0gaGFuZGxlcjsKICAgICAg\nICBfZmxhZ3MgPSBmbGFnczsKICAgICAgICB0cnkgewogICAgICAgICAgICBp\nZiAoIW9ianMuaXNFbXB0eSgpKSB7CiAgICAgICAgICAgICAgICBoYW5kbGVy\nLnN0YXJ0RG9jdW1lbnQoKTsKICAgICAgICAgICAgICAgIHNlcmlhbGl6ZShv\nYmpzKTsKICAgICAgICAgICAgICAgIGhhbmRsZXIuZW5kRG9jdW1lbnQoKTsK\nICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBmaW5hbGx5IHsKICAg\nICAgICAgICAgcmVzZXQoKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAg\nICAgKiBXaGV0aGVyIHRoaXMgc2VyaWFsaXphdGlvbiBpcyBpbiB2ZXJib3Nl\nIG1vZGUuCiAgICAgKi8KICAgIHByb3RlY3RlZCBib29sZWFuIGlzVmVyYm9z\nZSgpIHsKICAgICAgICByZXR1cm4gKF9mbGFncyAmIFZFUkJPU0UpID4gMDsK\nICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBiYWNrdXAgZmlsZSBtYWRlIGZv\nciB0aGUgY3VycmVudCBmaWxlIGJlaW5nIHBhcnNlZC4KICAgICAqLwogICAg\ncHJvdGVjdGVkIEZpbGUgY3VycmVudEJhY2t1cEZpbGUoKSB7CiAgICAgICAg\ncmV0dXJuIF9iYWNrdXA7CiAgICB9CgogICAgLyoqCiAgICAgKiBTdGFydCBh\nbiBlbGVtZW50IHdpdGggdGhlIGN1cnJlbnQgYXR0cmlidXRlIHNldHRpbmdz\nLiBDbGVhcnMgdGhlCiAgICAgKiBhdHRyaWJ1dGVzIGFzIHdlbGwuCiAgICAg\nKi8KICAgIHByb3RlY3RlZCB2b2lkIHN0YXJ0RWxlbWVudChTdHJpbmcgbmFt\nZSkgdGhyb3dzIFNBWEV4Y2VwdGlvbiB7CiAgICAgICAgX2hhbmRsZXIuc3Rh\ncnRFbGVtZW50KCIiLCBuYW1lLCBuYW1lLCBfYXR0cnMpOwogICAgICAgIF9h\ndHRycy5jbGVhcigpOwogICAgfQoKICAgIC8qKgogICAgICogRW5kIHRoZSBj\ndXJyZW50IGVsZW1lbnQuCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIGVu\nZEVsZW1lbnQoU3RyaW5nIG5hbWUpIHRocm93cyBTQVhFeGNlcHRpb24gewog\nICAgICAgIF9oYW5kbGVyLmVuZEVsZW1lbnQoIiIsIG5hbWUsIG5hbWUpOwog\nICAgfQoKICAgIC8qKgogICAgICogQWRkIHRleHQgdG8gdGhlIGN1cnJlbnQg\nZWxlbWVudC4KICAgICAqLwogICAgcHJvdGVjdGVkIHZvaWQgYWRkVGV4dChT\ndHJpbmcgdGV4dCkgdGhyb3dzIFNBWEV4Y2VwdGlvbiB7CiAgICAgICAgX2hh\nbmRsZXIuY2hhcmFjdGVycyh0ZXh0LnRvQ2hhckFycmF5KCksIDAsIHRleHQu\nbGVuZ3RoKCkpOwogICAgfQoKICAgIC8qKgogICAgICogQWRkIGFuIGF0dHJp\nYnV0ZSB0byB0aGUgY3VycmVudCBncm91cC4KICAgICAqLwogICAgcHJvdGVj\ndGVkIHZvaWQgYWRkQXR0cmlidXRlKFN0cmluZyBuYW1lLCBTdHJpbmcgdmFs\ndWUpIHsKICAgICAgICBfYXR0cnMuYWRkQXR0cmlidXRlKCIiLCBuYW1lLCBu\nYW1lLCAiQ0RBVEEiLCB2YWx1ZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBU\naGUgY3VycmVudCBhdHRyaWJ1dGVzLgogICAgICovCiAgICBwcm90ZWN0ZWQg\nQXR0cmlidXRlcyBnZXRBdHRyaWJ1dGVzKCkgewogICAgICAgIHJldHVybiBf\nYXR0cnM7CiAgICB9CgogICAgLyoqCiAgICAgKiBBZGQgYSBjb21tZW50IHRv\nIHRoZSBzdHJlYW0uCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIGFkZENv\nbW1lbnRzKFN0cmluZ1tdIGNvbW1lbnRzKSB0aHJvd3MgU0FYRXhjZXB0aW9u\nIHsKICAgICAgICBpZiAoY29tbWVudHMgPT0gbnVsbCB8fCBjb21tZW50cy5s\nZW5ndGggPT0gMAogICAgICAgICAgICB8fCAhKF9oYW5kbGVyIGluc3RhbmNl\nb2YgTGV4aWNhbEhhbmRsZXIpKQogICAgICAgICAgICByZXR1cm47CgogICAg\nICAgIExleGljYWxIYW5kbGVyIGxoID0gKExleGljYWxIYW5kbGVyKSBfaGFu\nZGxlcjsKICAgICAgICBjaGFyW10gY2hhcnM7CiAgICAgICAgZm9yIChpbnQg\naSA9IDA7IGkgPCBjb21tZW50cy5sZW5ndGg7IGkrKykgewogICAgICAgICAg\nICBjaGFycyA9IGNvbW1lbnRzW2ldLnRvQ2hhckFycmF5KCk7CiAgICAgICAg\nICAgIGxoLmNvbW1lbnQoY2hhcnMsIDAsIGNoYXJzLmxlbmd0aCk7CiAgICAg\nICAgfQogICAgfQoKICAgIC8qKgogICAgICogV3JpdGUgdGhlIGdpdmVuIGVu\ndGl0eSdzIGNvbW1lbnRzLiBCeSBkZWZhdWx0LCB0ZXN0cyBpZiBlbnRpdHkg\naXMKICAgICAqIHtAbGluayBDb21tZW50YWJsZX0uCiAgICAgKi8KICAgIHBy\nb3RlY3RlZCB2b2lkIGFkZENvbW1lbnRzKE9iamVjdCBvYmopIHRocm93cyBT\nQVhFeGNlcHRpb24gewogICAgICAgIGlmIChvYmogaW5zdGFuY2VvZiBDb21t\nZW50YWJsZSkKICAgICAgICAgICAgYWRkQ29tbWVudHMoKChDb21tZW50YWJs\nZSkgb2JqKS5nZXRDb21tZW50cygpKTsKICAgIH0KCiAgICAvKioKICAgICAq\nIFJlc2V0IHNlcmlhbGl6YXRpb24gc3RhdGUgZm9yIHRoZSBuZXh0IGRvY3Vt\nZW50LgogICAgICovCiAgICBwcm90ZWN0ZWQgdm9pZCByZXNldCgpIHsKICAg\nICAgICBfYXR0cnMuY2xlYXIoKTsKICAgICAgICBfaGFuZGxlciA9IG51bGw7\nCiAgICAgICAgX2ZsYWdzID0gMDsKICAgICAgICBfYmFja3VwID0gbnVsbDsK\nICAgIH0KCiAgICAvKioKICAgICAqIFNlcmlhbGl6ZSB0aGUgZ2l2ZW4gc2V0\nIG9mIG9iamVjdHMuCiAgICAgKi8KICAgIHByb3RlY3RlZCBhYnN0cmFjdCB2\nb2lkIHNlcmlhbGl6ZShDb2xsZWN0aW9uIG9ianMpIHRocm93cyBTQVhFeGNl\ncHRpb247CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGN1cnJlbnQgc2V0\nIG9mIG9iamVjdHMgZm9yIHNlcmlhbGl6YXRpb24uCiAgICAgKi8KICAgIHBy\nb3RlY3RlZCBhYnN0cmFjdCBDb2xsZWN0aW9uIGdldE9iamVjdHMoKTsKfQo=\n","encoding":"base64"}

