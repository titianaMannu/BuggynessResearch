{"sha":"acc4d737685fe730777026bf5430315071120570","node_id":"MDQ6QmxvYjIwNjM2NDphY2M0ZDczNzY4NWZlNzMwNzc3MDI2YmY1NDMwMzE1MDcxMTIwNTcw","size":4607,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/acc4d737685fe730777026bf5430315071120570","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLm1ldGE7CgppbXBvcnQg\namF2YS5pby5CeXRlQXJyYXlPdXRwdXRTdHJlYW07CmltcG9ydCBqYXZhLmlv\nLkZpbGU7CmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uOwppbXBvcnQgamF2\nYS5pby5JbnB1dFN0cmVhbTsKaW1wb3J0IGphdmEubmV0LlVSTDsKaW1wb3J0\nIGphdmEubmV0LlVSTENvbm5lY3Rpb247CmltcG9ydCBqYXZhLnNlY3VyaXR5\nLkFjY2Vzc0NvbnRyb2xsZXI7CmltcG9ydCBqYXZhLnNlY3VyaXR5LlByaXZp\nbGVnZWRBY3Rpb25FeGNlcHRpb247CmltcG9ydCBqYXZhLnV0aWwuRW51bWVy\nYXRpb247CmltcG9ydCBqYXZhLnV0aWwuTm9TdWNoRWxlbWVudEV4Y2VwdGlv\nbjsKaW1wb3J0IGphdmEudXRpbC56aXAuWmlwRW50cnk7CmltcG9ydCBqYXZh\nLnV0aWwuemlwLlppcEZpbGU7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmxpYi51dGlsLkoyRG9Qcml2SGVscGVyOwoKLyoqCiAqIEl0ZXJhdG9yIG92\nZXIgYWxsIG1ldGFkYXRhIHJlc291cmNlcyBpbiBhIGdpdmVuIHppcCBmaWxl\nLgogKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKiBAbm9qYXZhZG9jCiAqLwpw\ndWJsaWMgY2xhc3MgWmlwRmlsZU1ldGFEYXRhSXRlcmF0b3IKICAgIGltcGxl\nbWVudHMgTWV0YURhdGFJdGVyYXRvciwgTWV0YURhdGFGaWx0ZXIuUmVzb3Vy\nY2UgewoKICAgIHByaXZhdGUgZmluYWwgWmlwRmlsZSBfZmlsZTsKICAgIHBy\naXZhdGUgZmluYWwgTWV0YURhdGFGaWx0ZXIgX2ZpbHRlcjsKICAgIHByaXZh\ndGUgZmluYWwgRW51bWVyYXRpb24gX2VudHJpZXM7CiAgICBwcml2YXRlIFpp\ncEVudHJ5IF9lbnRyeSA9IG51bGw7CiAgICBwcml2YXRlIFppcEVudHJ5IF9s\nYXN0ID0gbnVsbDsKCiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yOyBzdXBw\nbHkgemlwL2phciBVUkwgYW5kIG9wdGlvbmFsIGZpbGUgZmlsdGVyLgogICAg\nICovCiAgICBwdWJsaWMgWmlwRmlsZU1ldGFEYXRhSXRlcmF0b3IoVVJMIHVy\nbCwgTWV0YURhdGFGaWx0ZXIgZmlsdGVyKQogICAgICAgIHRocm93cyBJT0V4\nY2VwdGlvbiB7CiAgICAgICAgaWYgKHVybCA9PSBudWxsKSB7CiAgICAgICAg\nICAgIF9maWxlID0gbnVsbDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAg\nICBVUkxDb25uZWN0aW9uIGNvbiA9IHVybC5vcGVuQ29ubmVjdGlvbigpOwog\nICAgICAgICAgICBjb24uc2V0RGVmYXVsdFVzZUNhY2hlcyhmYWxzZSk7CiAg\nICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBfZmlsZSA9IChaaXBG\naWxlKSBBY2Nlc3NDb250cm9sbGVyLmRvUHJpdmlsZWdlZCgKICAgICAgICAg\nICAgICAgICAgICBKMkRvUHJpdkhlbHBlci5nZXRDb250ZW50QWN0aW9uKGNv\nbikpOwogICAgICAgICAgICB9IGNhdGNoIChQcml2aWxlZ2VkQWN0aW9uRXhj\nZXB0aW9uIHBhZSkgewogICAgICAgICAgICAgICAgIHRocm93IChJT0V4Y2Vw\ndGlvbikgcGFlLmdldEV4Y2VwdGlvbigpOwogICAgICAgICAgICB9CiAgICAg\nICAgfQogICAgICAgIF9maWx0ZXIgPSBmaWx0ZXI7CiAgICAgICAgX2VudHJp\nZXMgPSAoX2ZpbGUgPT0gbnVsbCkgPyBudWxsIDogX2ZpbGUuZW50cmllcygp\nOwogICAgfQoKICAgIC8qKgogICAgICogQ29uc3RydWN0b3I7IHN1cHBseSB6\naXAgZmlsZSBhbmQgb3B0aW9uYWwgZmlsZSBmaWx0ZXIuCiAgICAgKi8KICAg\nIHB1YmxpYyBaaXBGaWxlTWV0YURhdGFJdGVyYXRvcihaaXBGaWxlIGZpbGUs\nIE1ldGFEYXRhRmlsdGVyIGZpbHRlcikgewogICAgICAgIF9maWxlID0gZmls\nZTsKICAgICAgICBfZmlsdGVyID0gZmlsdGVyOwogICAgICAgIF9lbnRyaWVz\nID0gKGZpbGUgPT0gbnVsbCkgPyBudWxsIDogZmlsZS5lbnRyaWVzKCk7CiAg\nICB9CgogICAgcHVibGljIGJvb2xlYW4gaGFzTmV4dCgpIHRocm93cyBJT0V4\nY2VwdGlvbiB7CiAgICAgICAgaWYgKF9lbnRyaWVzID09IG51bGwpCiAgICAg\nICAgICAgIHJldHVybiBmYWxzZTsKCiAgICAgICAgLy8gc2VhcmNoIGZvciBu\nZXh0IG1ldGFkYXRhIGZpbGUKICAgICAgICB3aGlsZSAoX2VudHJ5ID09IG51\nbGwgJiYgX2VudHJpZXMuaGFzTW9yZUVsZW1lbnRzKCkpIHsKICAgICAgICAg\nICAgX2VudHJ5ID0gKFppcEVudHJ5KSBfZW50cmllcy5uZXh0RWxlbWVudCgp\nOwogICAgICAgICAgICBpZiAoX2ZpbHRlciAhPSBudWxsICYmICFfZmlsdGVy\nLm1hdGNoZXModGhpcykpCiAgICAgICAgICAgICAgICBfZW50cnkgPSBudWxs\nOwogICAgICAgIH0KICAgICAgICByZXR1cm4gX2VudHJ5ICE9IG51bGw7CiAg\nICB9CgogICAgcHVibGljIE9iamVjdCBuZXh0KCkgdGhyb3dzIElPRXhjZXB0\naW9uIHsKICAgICAgICBpZiAoIWhhc05leHQoKSkKICAgICAgICAgICAgdGhy\nb3cgbmV3IE5vU3VjaEVsZW1lbnRFeGNlcHRpb24oKTsKICAgICAgICBTdHJp\nbmcgcmV0ID0gX2VudHJ5LmdldE5hbWUoKTsKICAgICAgICBfbGFzdCA9IF9l\nbnRyeTsKICAgICAgICBfZW50cnkgPSBudWxsOwogICAgICAgIHJldHVybiBy\nZXQ7CiAgICB9CgogICAgcHVibGljIElucHV0U3RyZWFtIGdldElucHV0U3Ry\nZWFtKCkgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICBpZiAoX2xhc3Qg\nPT0gbnVsbCkKICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxTdGF0ZUV4\nY2VwdGlvbigpOwogICAgICAgIHJldHVybiBfZmlsZS5nZXRJbnB1dFN0cmVh\nbShfbGFzdCk7CiAgICB9CgogICAgcHVibGljIEZpbGUgZ2V0RmlsZSgpIHsK\nICAgICAgICBpZiAoX2xhc3QgPT0gbnVsbCkKICAgICAgICAgICAgdGhyb3cg\nbmV3IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbigpOwogICAgICAgIHJldHVybiBu\ndWxsOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGNsb3NlKCkgewogICAgICAg\nIHRyeSB7CiAgICAgICAgICAgaWYgKF9maWxlICE9IG51bGwpCiAgICAgICAg\nICAgICAgIF9maWxlLmNsb3NlKCk7CiAgICAgICAgfSBjYXRjaCAoSU9FeGNl\ncHRpb24gaW9lKSB7CiAgICAgICAgfQogICAgfQoKICAgIC8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgLy8gTWV0YURh\ndGFGaWx0ZXIuUmVzb3VyY2UgaW1wbGVtZW50YXRpb24KICAgIC8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKICAgIHB1Ymxp\nYyBTdHJpbmcgZ2V0TmFtZSgpIHsKICAgICAgICByZXR1cm4gX2VudHJ5Lmdl\ndE5hbWUoKTsKICAgIH0KCiAgICBwdWJsaWMgYnl0ZVtdIGdldENvbnRlbnQo\nKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgIGxvbmcgc2l6ZSA9IF9l\nbnRyeS5nZXRTaXplKCk7CiAgICAgICAgaWYgKHNpemUgPT0gMCkKICAgICAg\nICAgICAgcmV0dXJuIG5ldyBieXRlWzBdOwoKICAgICAgICBJbnB1dFN0cmVh\nbSBpbiA9IF9maWxlLmdldElucHV0U3RyZWFtKF9lbnRyeSk7CiAgICAgICAg\nYnl0ZVtdIGNvbnRlbnQ7CiAgICAgICAgaWYgKHNpemUgPCAwKSB7CiAgICAg\nICAgICAgIEJ5dGVBcnJheU91dHB1dFN0cmVhbSBib3V0ID0gbmV3IEJ5dGVB\ncnJheU91dHB1dFN0cmVhbSgpOwogICAgICAgICAgICBieXRlW10gYnVmID0g\nbmV3IGJ5dGVbMTAyNF07CiAgICAgICAgICAgIGZvciAoaW50IHI7IChyID0g\naW4ucmVhZChidWYpKSAhPSAtMTsgYm91dC53cml0ZShidWYsIDAsIHIpKSA7\nCiAgICAgICAgICAgIGNvbnRlbnQgPSBib3V0LnRvQnl0ZUFycmF5KCk7CiAg\nICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29udGVudCA9IG5ldyBieXRl\nWyhpbnQpIHNpemVdOwogICAgICAgICAgICBpbi5yZWFkKGNvbnRlbnQpOwog\nICAgICAgIH0KICAgICAgICBpbi5jbG9zZSgpOwogICAgICAgIHJldHVybiBj\nb250ZW50OwogICAgfQp9Cgo=\n","encoding":"base64"}

