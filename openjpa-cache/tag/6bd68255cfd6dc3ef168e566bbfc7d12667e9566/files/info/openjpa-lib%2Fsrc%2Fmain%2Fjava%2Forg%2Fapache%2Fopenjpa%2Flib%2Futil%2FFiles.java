{"sha":"74c592d78eb160cc765cfae6d2e5142d1a5b87d5","node_id":"MDQ6QmxvYjIwNjM2NDo3NGM1OTJkNzhlYjE2MGNjNzY1Y2ZhZTZkMmU1MTQyZDFhNWI4N2Q1","size":11022,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/74c592d78eb160cc765cfae6d2e5142d1a5b87d5","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWw7CgppbXBvcnQg\namF2YS5pby5CdWZmZXJlZElucHV0U3RyZWFtOwppbXBvcnQgamF2YS5pby5C\ndWZmZXJlZE91dHB1dFN0cmVhbTsKaW1wb3J0IGphdmEuaW8uRmlsZTsKaW1w\nb3J0IGphdmEuaW8uRmlsZUlucHV0U3RyZWFtOwppbXBvcnQgamF2YS5pby5G\naWxlTm90Rm91bmRFeGNlcHRpb247CmltcG9ydCBqYXZhLmlvLkZpbGVPdXRw\ndXRTdHJlYW07CmltcG9ydCBqYXZhLmlvLkZpbGVXcml0ZXI7CmltcG9ydCBq\nYXZhLmlvLklPRXhjZXB0aW9uOwppbXBvcnQgamF2YS5pby5PdXRwdXRTdHJl\nYW07CmltcG9ydCBqYXZhLmlvLlByaW50V3JpdGVyOwppbXBvcnQgamF2YS5p\nby5Xcml0ZXI7CmltcG9ydCBqYXZhLm5ldC5VUkw7CmltcG9ydCBqYXZhLm5l\ndC5VUkxEZWNvZGVyOwppbXBvcnQgamF2YS5zZWN1cml0eS5BY2Nlc3NDb250\ncm9sbGVyOwppbXBvcnQgamF2YS5zZWN1cml0eS5Qcml2aWxlZ2VkQWN0aW9u\nRXhjZXB0aW9uOwoKaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5sYW5nLlN0\ncmluZ1V0aWxzOwppbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmxhbmcuZXhj\nZXB0aW9uLk5lc3RhYmxlUnVudGltZUV4Y2VwdGlvbjsKaW1wb3J0IHNlcnAu\ndXRpbC5TdHJpbmdzOwoKLyoqCiAqIFV0aWxpdHkgb3BlcmF0aW9ucyBvbiBm\naWxlcy4KICoKICogQGF1dGhvciBBYmUgV2hpdGUKICogQG5vamF2YWRvYwog\nKi8KcHVibGljIGNsYXNzIEZpbGVzIHsKCiAgICAvKioKICAgICAqIEJhY2t1\ncCB0aGUgZ2l2ZW4gZmlsZSB0byBhIG5ldyBmaWxlIGNhbGxlZCAmbHQ7Zmls\nZS1uYW1lJmd0O34uIElmCiAgICAgKiB0aGUgZmlsZSBkb2VzIG5vdCBleGlz\ndCBvciBhIGJhY2t1cCBjb3VsZCBub3QgYmUgY3JlYXRlZCwgcmV0dXJucyBu\ndWxsLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIEZpbGUgYmFja3VwKEZp\nbGUgZmlsZSwgYm9vbGVhbiBjb3B5KSB7CiAgICAgICAgaWYgKGZpbGUgPT0g\nbnVsbCB8fCAhKChCb29sZWFuKSBBY2Nlc3NDb250cm9sbGVyLmRvUHJpdmls\nZWdlZCgKICAgICAgICAgICAgSjJEb1ByaXZIZWxwZXIuZXhpc3RzQWN0aW9u\nKGZpbGUpKSkuYm9vbGVhblZhbHVlKCkpCiAgICAgICAgICAgIHJldHVybiBu\ndWxsOwoKICAgICAgICAvLyBjcmVhdGUgbmV3IGZpbGUgb2JqZWN0IGNvcHkg\nc28gd2UgZG9uJ3QgbW9kaWZ5IHRoZSBvcmlnaW5hbAogICAgICAgIFN0cmlu\nZyBhUGF0aCA9IChTdHJpbmcpIEFjY2Vzc0NvbnRyb2xsZXIuZG9Qcml2aWxl\nZ2VkKAogICAgICAgICAgICBKMkRvUHJpdkhlbHBlci5nZXRBYnNvbHV0ZVBh\ndGhBY3Rpb24oZmlsZSkpOwogICAgICAgIEZpbGUgY2xvbmUgPSBuZXcgRmls\nZShhUGF0aCk7CiAgICAgICAgRmlsZSBiayA9IG5ldyBGaWxlKGFQYXRoICsg\nIn4iKTsKICAgICAgICBpZiAoISgoQm9vbGVhbikgQWNjZXNzQ29udHJvbGxl\nci5kb1ByaXZpbGVnZWQoCiAgICAgICAgICAgIEoyRG9Qcml2SGVscGVyLnJl\nbmFtZVRvQWN0aW9uKGNsb25lLCBiaykpKS5ib29sZWFuVmFsdWUoKSkKICAg\nICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKGNvcHkpIHsKICAg\nICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvcHkoYmssIGZpbGUp\nOwogICAgICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBpb2UpIHsKICAg\nICAgICAgICAgICAgIHRocm93IG5ldyBOZXN0YWJsZVJ1bnRpbWVFeGNlcHRp\nb24oaW9lKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1\ncm4gYms7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXZlcnQgdGhlIGdpdmVu\nIGJhY2t1cCBmaWxlIHRvIHRoZSBvcmlnaW5hbCBsb2NhdGlvbi4gSWYgdGhl\nIGdpdmVuCiAgICAgKiBmaWxlJ3MgbmFtZSBkb2VzIG5vdCBlbmQgaW4gJ34n\nLCB0aGUgJ34nIGlzIGFwcGVuZGVkIGJlZm9yZSBwcm9jZWVkaW5nLgogICAg\nICogSWYgdGhlIGJhY2t1cCBmaWxlIGRvZXMgbm90IGV4aXN0IG9yIGNvdWxk\nIG5vdCBiZSByZXZlcnRlZCwgcmV0dXJucyBudWxsLgogICAgICovCiAgICBw\ndWJsaWMgc3RhdGljIEZpbGUgcmV2ZXJ0KEZpbGUgYmFja3VwLCBib29sZWFu\nIGNvcHkpIHsKICAgICAgICBpZiAoYmFja3VwID09IG51bGwpCiAgICAgICAg\nICAgIHJldHVybiBudWxsOwogICAgICAgIGlmICghYmFja3VwLmdldE5hbWUo\nKS5lbmRzV2l0aCgifiIpKQogICAgICAgICAgICBiYWNrdXAgPSBuZXcgRmls\nZShiYWNrdXAuZ2V0UGF0aCgpICsgIn4iKTsKICAgICAgICBpZiAoISgoQm9v\nbGVhbikgQWNjZXNzQ29udHJvbGxlci5kb1ByaXZpbGVnZWQoCiAgICAgICAg\nICAgIEoyRG9Qcml2SGVscGVyLmV4aXN0c0FjdGlvbihiYWNrdXApKSkuYm9v\nbGVhblZhbHVlKCkpCiAgICAgICAgICAgIHJldHVybiBudWxsOwoKICAgICAg\nICAvLyBjcmVhdGUgbmV3IGZpbGUgb2JqZWN0IGNvcHkgc28gd2UgZG9uJ3Qg\nbW9kaWZ5IHRoZSBvcmlnaW5hbAogICAgICAgIFN0cmluZyBwYXRoID0gKFN0\ncmluZykgQWNjZXNzQ29udHJvbGxlci5kb1ByaXZpbGVnZWQoCiAgICAgICAg\nICAgIEoyRG9Qcml2SGVscGVyLmdldEFic29sdXRlUGF0aEFjdGlvbihiYWNr\ndXApKTsgCiAgICAgICAgRmlsZSBjbG9uZSA9IG5ldyBGaWxlKHBhdGgpOwog\nICAgICAgIEZpbGUgb3JpZyA9IG5ldyBGaWxlKHBhdGguc3Vic3RyaW5nKDAs\nIHBhdGgubGVuZ3RoKCkgLSAxKSk7CiAgICAgICAgaWYgKCEoKEJvb2xlYW4p\nIEFjY2Vzc0NvbnRyb2xsZXIuZG9Qcml2aWxlZ2VkKAogICAgICAgICAgICBK\nMkRvUHJpdkhlbHBlci5yZW5hbWVUb0FjdGlvbihjbG9uZSwgb3JpZykpKS5i\nb29sZWFuVmFsdWUoKSkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAg\nICAgaWYgKGNvcHkpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\nICAgIGNvcHkob3JpZywgYmFja3VwKTsKICAgICAgICAgICAgfSBjYXRjaCAo\nSU9FeGNlcHRpb24gaW9lKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcg\nTmVzdGFibGVSdW50aW1lRXhjZXB0aW9uKGlvZSk7CiAgICAgICAgICAgIH0K\nICAgICAgICB9CiAgICAgICAgcmV0dXJuIG9yaWc7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBSZXR1cm4gdGhlIHNvdXJjZSBmaWxlIGZvciB0aGUgZ2l2ZW4g\nY2xhc3MsIG9yIG51bGwgaWYgdGhlCiAgICAgKiBzb3VyY2UgaXMgbm90IGlu\nIHRoZSBDTEFTU1BBVEguCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgRmls\nZSBnZXRTb3VyY2VGaWxlKENsYXNzIGNscykgewogICAgICAgIHJldHVybiBn\nZXRDbGFzc0ZpbGUoY2xzLCAiLmphdmEiKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIFJldHVybiB0aGUgY2xhc3MgZmlsZSBvZiB0aGUgZ2l2ZW4gY2xhc3Ms\nIG9yIG51bGwgaWYgdGhlCiAgICAgKiBjbGFzcyBpcyBpbiBhIGphci4KICAg\nICAqLwogICAgcHVibGljIHN0YXRpYyBGaWxlIGdldENsYXNzRmlsZShDbGFz\ncyBjbHMpIHsKICAgICAgICByZXR1cm4gZ2V0Q2xhc3NGaWxlKGNscywgIi5j\nbGFzcyIpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBmaWxl\nIGZvciB0aGUgY2xhc3MgcmVzb3VyY2Ugd2l0aCB0aGUgZ2l2ZW4gZXh0ZW5z\naW9uLgogICAgICovCiAgICBwcml2YXRlIHN0YXRpYyBGaWxlIGdldENsYXNz\nRmlsZShDbGFzcyBjbHMsIFN0cmluZyBleHQpIHsKICAgICAgICBTdHJpbmcg\nbmFtZSA9IFN0cmluZ3MuZ2V0Q2xhc3NOYW1lKGNscyk7CgogICAgICAgIC8v\nIGlmIGl0J3MgYW4gaW5uZXIgY2xhc3MsIHVzZSB0aGUgcGFyZW50IGNsYXNz\nIG5hbWUKICAgICAgICBpbnQgaW5uZXJJZHggPSBuYW1lLmluZGV4T2YoJyQn\nKTsKICAgICAgICBpZiAoaW5uZXJJZHggIT0gLTEpCiAgICAgICAgICAgIG5h\nbWUgPSBuYW1lLnN1YnN0cmluZygwLCBpbm5lcklkeCk7CgogICAgICAgIFVS\nTCByc3JjID0gKFVSTCkgQWNjZXNzQ29udHJvbGxlci5kb1ByaXZpbGVnZWQo\nCiAgICAgICAgICAgIEoyRG9Qcml2SGVscGVyLmdldFJlc291cmNlQWN0aW9u\nKGNscywgbmFtZSArIGV4dCkpOyAKICAgICAgICBpZiAocnNyYyAhPSBudWxs\nICYmIHJzcmMuZ2V0UHJvdG9jb2woKS5lcXVhbHMoImZpbGUiKSkKICAgICAg\nICAgICAgcmV0dXJuIG5ldyBGaWxlKFVSTERlY29kZXIuZGVjb2RlKHJzcmMu\nZ2V0RmlsZSgpKSk7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBSZXR1cm4gdGhlIGZpbGUgZm9yIHRoZSBnaXZlbiBwYWNr\nYWdlLiBJZiB0aGUgZ2l2ZW4gYmFzZSBkaXJlY3RvcnkKICAgICAqIG1hdGNo\nZXMgdGhlIGdpdmVuIHBhY2thZ2Ugc3RydWN0dXJlLCBpdCB3aWxsIGJlIHVz\nZWQgYXMtaXMuIElmIG5vdCwKICAgICAqIHRoZSBwYWNrYWdlIHN0cnVjdHVy\nZSB3aWxsIGJlIGFkZGVkIGJlbmVhdGggdGhlIGJhc2UgZGlyZWN0b3J5LiBJ\nZgogICAgICogdGhlIGJhc2UgZGlyZWN0b3J5IGlzIG51bGwsIHRoZSBjdXJy\nZW50IHdvcmtpbmcgZGlyZWN0b3J5IHdpbGwgYmUKICAgICAqIHVzZWQgYXMg\ndGhlIGJhc2UuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgRmlsZSBnZXRQ\nYWNrYWdlRmlsZShGaWxlIGJhc2UsIFN0cmluZyBwa2csIGJvb2xlYW4gbWtk\naXJzKSB7CiAgICAgICAgaWYgKGJhc2UgPT0gbnVsbCkKICAgICAgICAgICAg\nYmFzZSA9IG5ldyBGaWxlKChTdHJpbmcpIEFjY2Vzc0NvbnRyb2xsZXIuZG9Q\ncml2aWxlZ2VkKAogICAgICAgICAgICAgICAgSjJEb1ByaXZIZWxwZXIuZ2V0\nUHJvcGVydHlBY3Rpb24oInVzZXIuZGlyIikpKTsKICAgICAgICBpZiAoU3Ry\naW5nVXRpbHMuaXNFbXB0eShwa2cpKSB7CiAgICAgICAgICAgIGlmIChta2Rp\ncnMgJiYgISgoQm9vbGVhbikgQWNjZXNzQ29udHJvbGxlci5kb1ByaXZpbGVn\nZWQoCiAgICAgICAgICAgICAgICBKMkRvUHJpdkhlbHBlci5leGlzdHNBY3Rp\nb24oYmFzZSkpKS5ib29sZWFuVmFsdWUoKSkKICAgICAgICAgICAgICAgIEFj\nY2Vzc0NvbnRyb2xsZXIuZG9Qcml2aWxlZ2VkKAogICAgICAgICAgICAgICAg\nICAgIEoyRG9Qcml2SGVscGVyLm1rZGlyc0FjdGlvbihiYXNlKSk7CiAgICAg\nICAgICAgIHJldHVybiBiYXNlOwogICAgICAgIH0KCiAgICAgICAgcGtnID0g\ncGtnLnJlcGxhY2UoJy4nLCBGaWxlLnNlcGFyYXRvckNoYXIpOwogICAgICAg\nIEZpbGUgZmlsZSA9IG51bGw7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\naWYgKCgoU3RyaW5nKSBBY2Nlc3NDb250cm9sbGVyLmRvUHJpdmlsZWdlZCgK\nICAgICAgICAgICAgICAgIEoyRG9Qcml2SGVscGVyLmdldENhbm9uaWNhbFBh\ndGhBY3Rpb24oYmFzZSkpKS5lbmRzV2l0aChwa2cpKQogICAgICAgICAgICAg\nICAgZmlsZSA9IGJhc2U7CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAg\nICAgIGZpbGUgPSBuZXcgRmlsZShiYXNlLCBwa2cpOwogICAgICAgIH0gY2F0\nY2ggKFByaXZpbGVnZWRBY3Rpb25FeGNlcHRpb24gcGFlKSB7CiAgICAgICAg\nICAgIHRocm93IG5ldyBOZXN0YWJsZVJ1bnRpbWVFeGNlcHRpb24oCiAgICAg\nICAgICAgICAgICAoSU9FeGNlcHRpb24pIHBhZS5nZXRFeGNlcHRpb24oKSk7\nCiAgICAgICAgfSBjYXRjaCAoSU9FeGNlcHRpb24gaW9lKSB7CiAgICAgICAg\nICAgIHRocm93IG5ldyBOZXN0YWJsZVJ1bnRpbWVFeGNlcHRpb24oaW9lKTsK\nICAgICAgICB9CgogICAgICAgIGlmIChta2RpcnMgJiYgISgoQm9vbGVhbikg\nQWNjZXNzQ29udHJvbGxlci5kb1ByaXZpbGVnZWQoCiAgICAgICAgICAgIEoy\nRG9Qcml2SGVscGVyLmV4aXN0c0FjdGlvbihmaWxlKSkpLmJvb2xlYW5WYWx1\nZSgpKQogICAgICAgICAgICBBY2Nlc3NDb250cm9sbGVyLmRvUHJpdmlsZWdl\nZChKMkRvUHJpdkhlbHBlci5ta2RpcnNBY3Rpb24oZmlsZSkpOwogICAgICAg\nIHJldHVybiBmaWxlOwogICAgfQoKICAgIC8qKgogICAgICogQ2hlY2sgdGhl\nIGdpdmVuIHN0cmluZyBmb3IgYSBtYXRjaGluZyBmaWxlLiBUaGUgc3RyaW5n\nIGlzIGZpcnN0CiAgICAgKiB0ZXN0ZWQgdG8gc2VlIGlmIGl0IGlzIGFuIGV4\naXN0aW5nIGZpbGUgcGF0aC4gSWYgaXQgZG9lcyBub3QKICAgICAqIHJlcHJl\nc2VudCBhbiBleGlzdGluZyBmaWxlLCBpdCBpcyBjaGVja2VkIGFzIGEgcmVz\nb3VyY2UgbmFtZSBvZiBhCiAgICAgKiBmaWxlLiBJZiBubyByZXNvdXJjZSBl\neGlzdHMsIHRoZW4gaXQgaXMgaW50ZXJwcmV0ZWQgYXMgYSBwYXRoCiAgICAg\nKiB0byBhIGZpbGUgdGhhdCBkb2VzIG5vdCBleGlzdCB5ZXQuCiAgICAgKgog\nICAgICogQHBhcmFtIG5hbWUgdGhlIGZpbGUgcGF0aCBvciByZXNvdXJjZSBu\nYW1lCiAgICAgKiBAcGFyYW0gbG9hZGVyIGEgY2xhc3MgbG9hZGVyIHRvIHVz\nZSBpbiByZXNvdXJjZSBsb29rdXAsIG9yIG51bGwKICAgICAqIHRvIHVzZSB0\naGUgdGhyZWFkJ3MgY29udGV4dCBsb2FkZXIKICAgICAqLwogICAgcHVibGlj\nIHN0YXRpYyBGaWxlIGdldEZpbGUoU3RyaW5nIG5hbWUsIENsYXNzTG9hZGVy\nIGxvYWRlcikgewogICAgICAgIGlmIChuYW1lID09IG51bGwpCiAgICAgICAg\nICAgIHJldHVybiBudWxsOwoKICAgICAgICBGaWxlIGZpbGUgPSBuZXcgRmls\nZShuYW1lKTsKICAgICAgICBpZiAoKChCb29sZWFuKSBBY2Nlc3NDb250cm9s\nbGVyLmRvUHJpdmlsZWdlZCgKICAgICAgICAgICAgSjJEb1ByaXZIZWxwZXIu\nZXhpc3RzQWN0aW9uKGZpbGUpKSkuYm9vbGVhblZhbHVlKCkpCiAgICAgICAg\nICAgIHJldHVybiBmaWxlOwoKICAgICAgICBpZiAobG9hZGVyID09IG51bGwp\nCiAgICAgICAgICAgIGxvYWRlciA9IChDbGFzc0xvYWRlcikgQWNjZXNzQ29u\ndHJvbGxlci5kb1ByaXZpbGVnZWQoCiAgICAgICAgICAgICAgICBKMkRvUHJp\ndkhlbHBlci5nZXRDb250ZXh0Q2xhc3NMb2FkZXJBY3Rpb24oKSk7CiAgICAg\nICAgVVJMIHVybCA9IChVUkwpIEFjY2Vzc0NvbnRyb2xsZXIuZG9Qcml2aWxl\nZ2VkKAogICAgICAgICAgICBKMkRvUHJpdkhlbHBlci5nZXRSZXNvdXJjZUFj\ndGlvbihsb2FkZXIsIG5hbWUpKTsgCiAgICAgICAgaWYgKHVybCAhPSBudWxs\nKSB7CiAgICAgICAgICAgIFN0cmluZyB1cmxGaWxlID0gdXJsLmdldEZpbGUo\nKTsKICAgICAgICAgICAgaWYgKHVybEZpbGUgIT0gbnVsbCkgewogICAgICAg\nICAgICAgICAgRmlsZSByc3JjID0gbmV3IEZpbGUoVVJMRGVjb2Rlci5kZWNv\nZGUodXJsRmlsZSkpOwogICAgICAgICAgICAgICAgaWYgKCgoQm9vbGVhbikg\nQWNjZXNzQ29udHJvbGxlci5kb1ByaXZpbGVnZWQoCiAgICAgICAgICAgICAg\nICAgICAgSjJEb1ByaXZIZWxwZXIuZXhpc3RzQWN0aW9uKHJzcmMpKSkuYm9v\nbGVhblZhbHVlKCkpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJzcmM7\nCiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIGdvIGJhY2sg\ndG8gb3JpZ2luYWwgbm9uLWV4aXN0YW50IGZpbGUgcGF0aAogICAgICAgIHJl\ndHVybiBmaWxlOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIGEgd3Jp\ndGVyIHRvIHRoZSBzdHJlYW0oc3Rkb3V0IG9yIHN0ZGVycikgb3IgZmlsZSBu\nYW1lZCBieSB0aGUKICAgICAqIGdpdmVuIHN0cmluZy4KICAgICAqCiAgICAg\nKiBAc2VlICNnZXRGaWxlCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgV3Jp\ndGVyIGdldFdyaXRlcihTdHJpbmcgZmlsZSwgQ2xhc3NMb2FkZXIgbG9hZGVy\nKQogICAgICAgIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgaWYgKGZp\nbGUgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAg\naWYgKCJzdGRvdXQiLmVxdWFscyhmaWxlKSkKICAgICAgICAgICAgcmV0dXJu\nIG5ldyBQcmludFdyaXRlcihTeXN0ZW0ub3V0KTsKICAgICAgICBpZiAoInN0\nZGVyciIuZXF1YWxzKGZpbGUpKQogICAgICAgICAgICByZXR1cm4gbmV3IFBy\naW50V3JpdGVyKFN5c3RlbS5lcnIpOwogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIHJldHVybiBuZXcgRmlsZVdyaXRlcihnZXRGaWxlKGZpbGUsIGxvYWRl\ncikpOwogICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGlvZSkgewogICAg\nICAgICAgICB0aHJvdyBuZXcgTmVzdGFibGVSdW50aW1lRXhjZXB0aW9uKGlv\nZSk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIGFu\nIG91dHB1dCBzdHJlYW0gdG8gdGhlIHN0cmVhbShzdGRvdXQgb3Igc3RkZXJy\nKSBvciBmaWxlIG5hbWVkCiAgICAgKiBieSB0aGUgZ2l2ZW4gc3RyaW5nLgog\nICAgICoKICAgICAqIEBzZWUgI2dldEZpbGUKICAgICAqLwogICAgcHVibGlj\nIHN0YXRpYyBPdXRwdXRTdHJlYW0gZ2V0T3V0cHV0U3RyZWFtKFN0cmluZyBm\naWxlLAogICAgICAgIENsYXNzTG9hZGVyIGxvYWRlcikgewogICAgICAgIGlm\nIChmaWxlID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAg\nICAgIGlmICgic3Rkb3V0Ii5lcXVhbHMoZmlsZSkpCiAgICAgICAgICAgIHJl\ndHVybiBTeXN0ZW0ub3V0OwogICAgICAgIGlmICgic3RkZXJyIi5lcXVhbHMo\nZmlsZSkpCiAgICAgICAgICAgIHJldHVybiBTeXN0ZW0uZXJyOwogICAgICAg\nIHRyeSB7CiAgICAgICAgICAgIHJldHVybiAoRmlsZU91dHB1dFN0cmVhbSkg\nQWNjZXNzQ29udHJvbGxlci5kb1ByaXZpbGVnZWQoCiAgICAgICAgICAgICAg\nICBKMkRvUHJpdkhlbHBlci5uZXdGaWxlT3V0cHV0U3RyZWFtQWN0aW9uKAog\nICAgICAgICAgICAgICAgICAgIGdldEZpbGUoZmlsZSwgbG9hZGVyKSkpOwog\nICAgICAgIH0gY2F0Y2ggKFByaXZpbGVnZWRBY3Rpb25FeGNlcHRpb24gcGFl\nKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBOZXN0YWJsZVJ1bnRpbWVFeGNl\ncHRpb24ocGFlLmdldEV4Y2VwdGlvbigpKTsKICAgICAgICB9IGNhdGNoIChJ\nT0V4Y2VwdGlvbiBpb2UpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IE5lc3Rh\nYmxlUnVudGltZUV4Y2VwdGlvbihpb2UpOwogICAgICAgIH0KICAgIH0KCiAg\nICAvKioKICAgICAqIENvcHkgYSBmaWxlLiBSZXR1cm4gZmFsc2UgaWYgPGNv\nZGU+ZnJvbTwvY29kZT4gZG9lcyBub3QgZXhpc3QuCiAgICAgKi8KICAgIHB1\nYmxpYyBzdGF0aWMgYm9vbGVhbiBjb3B5KEZpbGUgZnJvbSwgRmlsZSB0bykg\ndGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICBpZiAoZnJvbSA9PSBudWxs\nIHx8IHRvID09IG51bGwgfHwKICAgICAgICAgICAgISgoQm9vbGVhbikgQWNj\nZXNzQ29udHJvbGxlci5kb1ByaXZpbGVnZWQoCiAgICAgICAgICAgICAgICBK\nMkRvUHJpdkhlbHBlci5leGlzdHNBY3Rpb24oZnJvbSkpKS5ib29sZWFuVmFs\ndWUoKSkKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoKICAgICAgICBGaWxl\nSW5wdXRTdHJlYW0gaW4gPSBudWxsOwogICAgICAgIEZpbGVPdXRwdXRTdHJl\nYW0gb3V0ID0gbnVsbDsKICAgICAgICB0cnkgewogICAgICAgICAgICBpbiA9\nIChGaWxlSW5wdXRTdHJlYW0pIEFjY2Vzc0NvbnRyb2xsZXIuZG9Qcml2aWxl\nZ2VkKAogICAgICAgICAgICAgICAgSjJEb1ByaXZIZWxwZXIubmV3RmlsZUlu\ncHV0U3RyZWFtQWN0aW9uKGZyb20pKTsKICAgICAgICAgICAgQnVmZmVyZWRJ\nbnB1dFN0cmVhbSBpbmJ1ZiA9IG5ldyBCdWZmZXJlZElucHV0U3RyZWFtKGlu\nKTsKICAgICAgICAgICAgb3V0ID0gKEZpbGVPdXRwdXRTdHJlYW0pIEFjY2Vz\nc0NvbnRyb2xsZXIuZG9Qcml2aWxlZ2VkKAogICAgICAgICAgICAgICAgSjJE\nb1ByaXZIZWxwZXIubmV3RmlsZU91dHB1dFN0cmVhbUFjdGlvbih0bykpOyAK\nICAgICAgICAgICAgQnVmZmVyZWRPdXRwdXRTdHJlYW0gb3V0YnVmID0gbmV3\nIEJ1ZmZlcmVkT3V0cHV0U3RyZWFtKG91dCk7CiAgICAgICAgICAgIGZvciAo\naW50IGI7IChiID0gaW5idWYucmVhZCgpKSAhPSAtMTsgb3V0YnVmLndyaXRl\nKGIpKSA7CiAgICAgICAgICAgIG91dGJ1Zi5mbHVzaCgpOwogICAgICAgICAg\nICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGNhdGNoIChQcml2aWxlZ2VkQWN0\naW9uRXhjZXB0aW9uIHBhZSkgewogICAgICAgICAgICB0aHJvdyAoRmlsZU5v\ndEZvdW5kRXhjZXB0aW9uKSBwYWUuZ2V0RXhjZXB0aW9uKCk7CiAgICAgICAg\nfSBmaW5hbGx5IHsKICAgICAgICAgICAgaWYgKGluICE9IG51bGwpCiAgICAg\nICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGluLmNsb3Nl\nKCk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewog\nICAgICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAob3V0ICE9IG51bGwp\nCiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIG91\ndC5jbG9zZSgpOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9u\nIGUpIHsKICAgICAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

