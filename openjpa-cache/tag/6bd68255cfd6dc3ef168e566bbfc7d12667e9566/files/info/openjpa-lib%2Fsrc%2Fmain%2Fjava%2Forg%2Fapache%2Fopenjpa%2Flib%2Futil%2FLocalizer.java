{"sha":"7d8210a54cd26c943f8c2a00d78518b0b2397780","node_id":"MDQ6QmxvYjIwNjM2NDo3ZDgyMTBhNTRjZDI2Yzk0M2Y4YzJhMDBkNzg1MThiMGIyMzk3Nzgw","size":9747,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/7d8210a54cd26c943f8c2a00d78518b0b2397780","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWw7CgppbXBvcnQg\namF2YS5zZWN1cml0eS5BY2Nlc3NDb250cm9sbGVyOwppbXBvcnQgamF2YS50\nZXh0Lk1lc3NhZ2VGb3JtYXQ7CmltcG9ydCBqYXZhLnV0aWwuQXJyYXlzOwpp\nbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247CmltcG9ydCBqYXZhLnV0aWwu\nSXRlcmF0b3I7CmltcG9ydCBqYXZhLnV0aWwuTG9jYWxlOwppbXBvcnQgamF2\nYS51dGlsLk1hcDsKaW1wb3J0IGphdmEudXRpbC5NaXNzaW5nUmVzb3VyY2VF\neGNlcHRpb247CmltcG9ydCBqYXZhLnV0aWwuUHJvcGVydGllczsKaW1wb3J0\nIGphdmEudXRpbC5SZXNvdXJjZUJ1bmRsZTsKCmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEubGliLnV0aWwuY29uY3VycmVudC5Db25jdXJyZW50SGFzaE1h\ncDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5jb25jdXJy\nZW50LkNvcHlPbldyaXRlQXJyYXlTZXQ7CgovKioKICogVGhlIExvY2FsaXpl\nciBwcm92aWRlcyBjb252ZW5pZW50IGFjY2VzcyB0byBsb2NhbGl6ZWQKICog\nc3RyaW5ncy4gSXQgaW5sY3VkZXMgYnVpbHQtaW4gc3VwcG9ydCBmb3IgcGFy\nYW1ldGVyIHN1YnN0aXR1dGlvbiB0aHJvdWdoCiAqIHRoZSB1c2Ugb2YgdGhl\nIHtAbGluayBNZXNzYWdlRm9ybWF0fSB1dGlsaXR5LgogKiBTdHJpbmdzIGFy\nZSBzdG9yZWQgaW4gcGVyLXBhY2thZ2Uge0BsaW5rIFByb3BlcnRpZXN9IGZp\nbGVzLgogKiBUaGUgcHJvcGVydHkgZmlsZSBmb3IgdGhlIGRlZmF1bHQgbG9j\nYWxlIG11c3QgYmUgbmFtZWQKICogPGNvZGU+bG9jYWxpemVyLnByb3BlcnRp\nZXM8L2NvZGU+LiBBZGRpdGlvbmFsIGxvY2FsZXMgY2FuIGJlIHN1cHBvcnRl\nZAogKiB0aHJvdWdoIGFkZGl0aW9uYWwgcHJvcGVydHkgZmlsZXMgdXNpbmcg\ndGhlIG5hbWluZyBjb252ZW50aW9ucyBzcGVjaWZpZWQKICogaW4gdGhlIHtA\nbGluayBSZXNvdXJjZUJ1bmRsZX0gY2xhc3MuIEZvciBleGFtcGxlLCB0aGUg\nZ2VybWFuIGxvY2FsZQogKiBjb3VsZCBiZSBzdXBwb3J0ZWQgdGhyb3VnaCBh\nIDxjb2RlPmxvY2FsaXplcl9kZV9ERS5wcm9wZXJ0aWVzPC9jb2RlPiBmaWxl\nLgogKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKi8KcHVibGljIGNsYXNzIExv\nY2FsaXplciB7CgogICAgLy8gc3RhdGljIGNhY2hlIG9mIHBhY2thZ2UrbG9j\nIG5hbWUgdG8gbG9jYWxpemVyIG1hcHBpbmdzCiAgICBwcml2YXRlIHN0YXRp\nYyBmaW5hbCBNYXAgX2xvY2FsaXplcnMgPSBuZXcgQ29uY3VycmVudEhhc2hN\nYXAoKTsKCiAgICAvLyBsaXN0IG9mIHJlc291cmNlIHByb3ZpZGVycyB0byBk\nZWxlZ2F0ZSB0byB3aGVuIGxvY2F0aW5nIHJlc291cmNlcwogICAgcHJpdmF0\nZSBzdGF0aWMgZmluYWwgQ29sbGVjdGlvbiBfcHJvdmlkZXJzID0gbmV3IENv\ncHlPbldyaXRlQXJyYXlTZXQKICAgICAgICAoQXJyYXlzLmFzTGlzdChuZXcg\nT2JqZWN0W117CiAgICAgICAgICAgIG5ldyBTaW1wbGVSZXNvdXJjZUJ1bmRs\nZVByb3ZpZGVyKCksCiAgICAgICAgICAgIG5ldyBTdHJlYW1SZXNvdXJjZUJ1\nbmRsZVByb3ZpZGVyKCksCiAgICAgICAgICAgIG5ldyBaaXBSZXNvdXJjZUJ1\nbmRsZVByb3ZpZGVyKCksIH0pKTsKCiAgICAvKioKICAgICAqIFJldHVybiBh\nIExvY2FsaXplciBpbnN0YW5jZSB0aGF0IHdpbGwgYWNjZXNzIHRoZSBwcm9w\nZXJ0aWVzIGZpbGUKICAgICAqIGluIHRoZSBwYWNrYWdlIG9mIHRoZSBnaXZl\nbiBjbGFzcyB1c2luZyB0aGUgc3lzdGVtIGRlZmF1bHQgbG9jYWxlLgogICAg\nICoKICAgICAqIEBzZWUgI2ZvclBhY2thZ2UoQ2xhc3MsTG9jYWxlKQogICAg\nICovCiAgICBwdWJsaWMgc3RhdGljIExvY2FsaXplciBmb3JQYWNrYWdlKENs\nYXNzIGNscykgewogICAgICAgIHJldHVybiBmb3JQYWNrYWdlKGNscywgbnVs\nbCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gYSBMb2NhbGl6ZXIg\naW5zdGFuY2UgdGhhdCB3aWxsIGFjY2VzcyB0aGUgcHJvcGVydGllcyBmaWxl\nCiAgICAgKiBpbiB0aGUgcGFja2FnZSBvZiB0aGUgZ2l2ZW4gY2xhc3MgdXNp\nbmcgdGhlIGdpdmVuIGxvY2FsZS4KICAgICAqCiAgICAgKiBAcGFyYW0gY2xz\nIHRoZSBjbGFzcyB3aG9zZSBwYWNrYWdlIHRvIGNoZWNrIGZvciB0aGUgbG9j\nYWxpemVkCiAgICAgKiBwcm9wZXJ0aWVzIGZpbGU7IGlmIG51bGwsIHRoZSBz\neXN0ZW0gd2lsbCBjaGVjayBmb3IKICAgICAqIGEgdG9wLWxldmVsIHByb3Bl\ncnRpZXMgZmlsZQogICAgICogQHBhcmFtIGxvY2FsZSB0aGUgbG9jYWxlIHRv\nIHdoaWNoIHN0cmluZ3Mgc2hvdWxkIGJlIGxvY2FsaXplZDsgaWYKICAgICAq\nIG51bGwsIHRoZSBzeXN0ZW0gZGVmYXVsdCB3aWxsIGJlIGFzc3VtZWQKICAg\nICAqLwogICAgcHVibGljIHN0YXRpYyBMb2NhbGl6ZXIgZm9yUGFja2FnZShD\nbGFzcyBjbHMsIExvY2FsZSBsb2NhbGUpIHsKICAgICAgICBpZiAobG9jYWxl\nID09IG51bGwpCiAgICAgICAgICAgIGxvY2FsZSA9IExvY2FsZS5nZXREZWZh\ndWx0KCk7CgogICAgICAgIGludCBkb3QgPSAoY2xzID09IG51bGwpID8gLTEg\nOiBjbHMuZ2V0TmFtZSgpLmxhc3RJbmRleE9mKCcuJyk7CiAgICAgICAgU3Ry\naW5nIHBrZzsKICAgICAgICBTdHJpbmcgZmlsZTsKICAgICAgICBpZiAoZG90\nID09IC0xKSB7CiAgICAgICAgICAgIHBrZyA9ICIiOwogICAgICAgICAgICBm\naWxlID0gImxvY2FsaXplciI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAg\nICAgcGtnID0gY2xzLmdldE5hbWUoKS5zdWJzdHJpbmcoMCwgZG90KTsKICAg\nICAgICAgICAgZmlsZSA9IHBrZyArICIubG9jYWxpemVyIjsKICAgICAgICB9\nCiAgICAgICAgU3RyaW5nIGtleSA9IGZpbGUgKyBsb2NhbGUudG9TdHJpbmco\nKTsKCiAgICAgICAgLy8gbm8gbG9ja2luZzsgb2sgaWYgYnVuZGxlIGNyZWF0\nZWQgbXVsdGlwbGUgdGltZXMKICAgICAgICAvLyBjaGVjayBmb3IgY2FjaGVk\nIHZlcnNpb24KICAgICAgICBMb2NhbGl6ZXIgbG9jID0gKExvY2FsaXplcikg\nX2xvY2FsaXplcnMuZ2V0KGtleSk7CiAgICAgICAgaWYgKGxvYyAhPSBudWxs\nKQogICAgICAgICAgICByZXR1cm4gbG9jOwogICAgICAgIGVsc2UgewogICAg\nICAgICAgICBsb2MgPSBuZXcgTG9jYWxpemVyKHBrZywgZmlsZSwgbG9jYWxl\nLCAKICAgICAgICAgICAgICAgIGNscyA9PSBudWxsID8gbnVsbDooQ2xhc3NM\nb2FkZXIpIEFjY2Vzc0NvbnRyb2xsZXIuZG9Qcml2aWxlZ2VkKAogICAgICAg\nICAgICAgICAgICAgIEoyRG9Qcml2SGVscGVyLmdldENsYXNzTG9hZGVyQWN0\naW9uKGNscykpKTsgCiAgICAgICAgICAgIF9sb2NhbGl6ZXJzLnB1dChrZXks\nIGxvYyk7CiAgICAgICAgICAgIHJldHVybiBsb2M7CiAgICAgICAgfQogICAg\nfQoKICAgIC8qKgogICAgICogUmVnaXN0ZXIgYSByZXNvdXJjZSBwcm92aWRl\nci4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyB2b2lkIGFkZFByb3ZpZGVy\nKFJlc291cmNlQnVuZGxlUHJvdmlkZXIgcHJvdmlkZXIpIHsKICAgICAgICBf\ncHJvdmlkZXJzLmFkZChwcm92aWRlcik7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBSZW1vdmUgYSByZXNvdXJjZSBwcm92aWRlci4KICAgICAqLwogICAgcHVi\nbGljIHN0YXRpYyBib29sZWFuIHJlbW92ZVByb3ZpZGVyKFJlc291cmNlQnVu\nZGxlUHJvdmlkZXIgcHJvdmlkZXIpIHsKICAgICAgICByZXR1cm4gX3Byb3Zp\nZGVycy5yZW1vdmUocHJvdmlkZXIpOwogICAgfQoKICAgIHByaXZhdGUgU3Ry\naW5nIF9maWxlOwogICAgcHJpdmF0ZSBTdHJpbmcgX3BrZzsKICAgIHByaXZh\ndGUgUmVzb3VyY2VCdW5kbGUgX2J1bmRsZSA9IG51bGw7CiAgICBwcml2YXRl\nIExvY2FsZSBfbG9jYWxlOwogICAgcHJpdmF0ZSBDbGFzc0xvYWRlciBfbG9h\nZGVyOwoKICAgIHByaXZhdGUgTG9jYWxpemVyKFN0cmluZyBwa2csIFN0cmlu\nZyBmLCBMb2NhbGUgbG9jYWxlLCBDbGFzc0xvYWRlciBsb2FkZXIpIHsKICAg\nICAgICBfcGtnID0gcGtnOwogICAgICAgIF9maWxlID0gZjsKICAgICAgICBf\nbG9jYWxlID0gbG9jYWxlOwogICAgICAgIF9sb2FkZXIgPSBsb2FkZXI7CiAg\nICB9CiAgICAKICAgIHByaXZhdGUgUmVzb3VyY2VCdW5kbGUgZ2V0QnVuZGxl\nKCkgewogICAgICAgIC8vIG5vIGxvY2tpbmc7IGl0J3Mgb2sgdG8gY3JlYXRl\nIG11bHRpcGxlIGJ1bmRsZXMKICAgICAgICBpZiAoX2J1bmRsZSA9PSBudWxs\nKSB7CiAgICAgICAgICAgIC8vIGZpbmQgcmVzb3VyY2UgYnVuZGxlCiAgICAg\nICAgICAgIGZvciAoSXRlcmF0b3IgaXRyID0gX3Byb3ZpZGVycy5pdGVyYXRv\ncigpOwogICAgICAgICAgICAgICAgaXRyLmhhc05leHQoKSAmJiBfYnVuZGxl\nID09IG51bGw7ICkgewogICAgICAgICAgICAgICAgX2J1bmRsZSA9ICgoUmVz\nb3VyY2VCdW5kbGVQcm92aWRlcikgaXRyLm5leHQoKSkKICAgICAgICAgICAg\nICAgICAgICAuZmluZFJlc291cmNlKF9maWxlLCBfbG9jYWxlLCBfbG9hZGVy\nKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gX2J1\nbmRsZTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgbG9jYWxp\nemVkIHN0cmluZyBtYXRjaGluZyB0aGUgZ2l2ZW4ga2V5LgogICAgICovCiAg\nICBwdWJsaWMgTWVzc2FnZSBnZXQoU3RyaW5nIGtleSkgewogICAgICAgIHJl\ndHVybiBnZXQoa2V5LCBudWxsKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJl\ndHVybiB0aGUgbG9jYWxpemVkIHN0cmluZyBtYXRjaGluZyB0aGUgZ2l2ZW4g\na2V5LgogICAgICovCiAgICBwdWJsaWMgTWVzc2FnZSBnZXRGYXRhbChTdHJp\nbmcga2V5KSB7CiAgICAgICAgcmV0dXJuIGdldEZhdGFsKGtleSwgbnVsbCk7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGxvY2FsaXplZCBz\ndHJpbmcgbWF0Y2hpbmcgdGhlIGdpdmVuIGtleS4gVGhlIGdpdmVuCiAgICAg\nKiA8Y29kZT5zdWI8L2NvZGU+IG9iamVjdCB3aWxsIGJlIHBhY2tlZCBpbnRv\nIGFuIGFycmF5IGFuZCBzdWJzdGl0dXRlZAogICAgICogaW50byB0aGUgZm91\nbmQgc3RyaW5nIGFjY29yZGluZyB0byB0aGUgcnVsZXMgb2YgdGhlCiAgICAg\nKiB7QGxpbmsgTWVzc2FnZUZvcm1hdH0gY2xhc3MuCiAgICAgKgogICAgICog\nQHNlZSAjZ2V0KFN0cmluZykKICAgICAqLwogICAgcHVibGljIE1lc3NhZ2Ug\nZ2V0KFN0cmluZyBrZXksIE9iamVjdCBzdWIpIHsKICAgICAgICByZXR1cm4g\nZ2V0KGtleSwgbmV3IE9iamVjdFtdeyBzdWIgfSk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBSZXR1cm4gdGhlIGxvY2FsaXplZCBzdHJpbmcgbWF0Y2hpbmcg\ndGhlIGdpdmVuIGtleS4gVGhlIGdpdmVuCiAgICAgKiA8Y29kZT5zdWI8L2Nv\nZGU+IG9iamVjdCB3aWxsIGJlIHBhY2tlZCBpbnRvIGFuIGFycmF5IGFuZCBz\ndWJzdGl0dXRlZAogICAgICogaW50byB0aGUgZm91bmQgc3RyaW5nIGFjY29y\nZGluZyB0byB0aGUgcnVsZXMgb2YgdGhlCiAgICAgKiB7QGxpbmsgTWVzc2Fn\nZUZvcm1hdH0gY2xhc3MuCiAgICAgKgogICAgICogQHNlZSAjZ2V0RmF0YWwo\nU3RyaW5nKQogICAgICovCiAgICBwdWJsaWMgTWVzc2FnZSBnZXRGYXRhbChT\ndHJpbmcga2V5LCBPYmplY3Qgc3ViKSB7CiAgICAgICAgcmV0dXJuIGdldEZh\ndGFsKGtleSwgbmV3IE9iamVjdFtdeyBzdWIgfSk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBSZXR1cm4gdGhlIGxvY2FsaXplZCBzdHJpbmcgZm9yIHRoZSBn\naXZlbiBrZXkuCiAgICAgKgogICAgICogQHNlZSAjZ2V0KFN0cmluZyxPYmpl\nY3QpCiAgICAgKi8KICAgIHB1YmxpYyBNZXNzYWdlIGdldChTdHJpbmcga2V5\nLCBPYmplY3Qgc3ViMSwgT2JqZWN0IHN1YjIpIHsKICAgICAgICByZXR1cm4g\nZ2V0KGtleSwgbmV3IE9iamVjdFtdeyBzdWIxLCBzdWIyIH0pOwogICAgfQoK\nICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBsb2NhbGl6ZWQgc3RyaW5nIGZv\nciB0aGUgZ2l2ZW4ga2V5LgogICAgICoKICAgICAqIEBzZWUgI2dldEZhdGFs\nKFN0cmluZyxPYmplY3QpCiAgICAgKi8KICAgIHB1YmxpYyBNZXNzYWdlIGdl\ndEZhdGFsKFN0cmluZyBrZXksIE9iamVjdCBzdWIxLCBPYmplY3Qgc3ViMikg\newogICAgICAgIHJldHVybiBnZXRGYXRhbChrZXksIG5ldyBPYmplY3RbXXsg\nc3ViMSwgc3ViMiB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0\naGUgbG9jYWxpemVkIHN0cmluZyBmb3IgdGhlIGdpdmVuIGtleS4KICAgICAq\nCiAgICAgKiBAc2VlICNnZXQoU3RyaW5nLE9iamVjdCkKICAgICAqLwogICAg\ncHVibGljIE1lc3NhZ2UgZ2V0KFN0cmluZyBrZXksIE9iamVjdCBzdWIxLCBP\nYmplY3Qgc3ViMiwgT2JqZWN0IHN1YjMpIHsKICAgICAgICByZXR1cm4gZ2V0\nKGtleSwgbmV3IE9iamVjdFtdeyBzdWIxLCBzdWIyLCBzdWIzIH0pOwogICAg\nfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBsb2NhbGl6ZWQgc3RyaW5n\nIG1hdGNoaW5nIHRoZSBnaXZlbiBrZXkuIFRoZSBnaXZlbgogICAgICogPGNv\nZGU+c3ViczwvY29kZT4gb2JqZWN0cyB3aWxsIGJlIHN1YnN0aXR1dGVkCiAg\nICAgKiBpbnRvIHRoZSBmb3VuZCBzdHJpbmcgYWNjb3JkaW5nIHRvIHRoZSBy\ndWxlcyBvZiB0aGUKICAgICAqIHtAbGluayBNZXNzYWdlRm9ybWF0fSBjbGFz\ncy4KICAgICAqCiAgICAgKiBAc2VlICNnZXQoU3RyaW5nKQogICAgICovCiAg\nICBwdWJsaWMgTWVzc2FnZSBnZXQoU3RyaW5nIGtleSwgT2JqZWN0W10gc3Vi\ncykgewogICAgICAgIHJldHVybiBuZXcgTWVzc2FnZShfcGtnLCBnZXRCdW5k\nbGUoKSwga2V5LCBzdWJzLCBmYWxzZSk7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBSZXR1cm4gdGhlIGxvY2FsaXplZCBzdHJpbmcgbWF0Y2hpbmcgdGhlIGdp\ndmVuIGtleS4gVGhlIGdpdmVuCiAgICAgKiA8Y29kZT5zdWJzPC9jb2RlPiBv\nYmplY3RzIHdpbGwgYmUgc3Vic3RpdHV0ZWQKICAgICAqIGludG8gdGhlIGZv\ndW5kIHN0cmluZyBhY2NvcmRpbmcgdG8gdGhlIHJ1bGVzIG9mIHRoZQogICAg\nICoge0BsaW5rIE1lc3NhZ2VGb3JtYXR9IGNsYXNzLgogICAgICoKICAgICAq\nIEBzZWUgI2dldEZhdGFsKFN0cmluZykKICAgICAqLwogICAgcHVibGljIE1l\nc3NhZ2UgZ2V0RmF0YWwoU3RyaW5nIGtleSwgT2JqZWN0W10gc3Vicykgewog\nICAgICAgIHJldHVybiBuZXcgTWVzc2FnZShfcGtnLCBnZXRCdW5kbGUoKSwg\na2V5LCBzdWJzLCB0cnVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIEEgPGNv\nZGU+TWVzc2FnZTwvY29kZT4gY2FuIHByb3ZpZGUgYSBsb2NhbGl6ZWQgbWVz\nc2FnZSB2aWEgdGhlIAogICAgICoge0BsaW5rICNnZXRNZXNzYWdlfSBtZXRo\nb2QgY2FsbCwgYW5kIGNhbiBhbHNvIHByb3ZpZGUgdGhlIG9yaWdpbmFsIGtl\neSwKICAgICAqIHBhY2thZ2UsIGFuZCBzdWJzdGl0dXRpb24gYXJyYXkgdGhh\ndCB3ZXJlIHVzZWQgdG8gYXNzZW1ibGUgdGhlIG1lc3NhZ2UuCiAgICAgKi8K\nICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgTWVzc2FnZSB7CgogICAgICAgIHBy\naXZhdGUgZmluYWwgU3RyaW5nIF9wa2c7CiAgICAgICAgcHJpdmF0ZSBmaW5h\nbCBTdHJpbmcgX2tleTsKICAgICAgICBwcml2YXRlIGZpbmFsIE9iamVjdFtd\nIF9zdWJzOwogICAgICAgIHByaXZhdGUgZmluYWwgU3RyaW5nIF9sb2NhbGl6\nZWRNZXNzYWdlOwoKICAgICAgICBwcml2YXRlIE1lc3NhZ2UoU3RyaW5nIHBh\nY2thZ2VOYW1lLCBSZXNvdXJjZUJ1bmRsZSBidW5kbGUsIFN0cmluZyBrZXks\nIAogICAgICAgICAgICBPYmplY3RbXSBzdWJzLCBib29sZWFuIGZhdGFsKSB7\nCiAgICAgICAgICAgIGlmIChidW5kbGUgPT0gbnVsbCAmJiBmYXRhbCkKICAg\nICAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nUmVzb3VyY2VFeGNlcHRp\nb24oa2V5LCBrZXksIGtleSk7CgogICAgICAgICAgICBfcGtnID0gcGFja2Fn\nZU5hbWU7CiAgICAgICAgICAgIF9rZXkgPSBrZXk7CiAgICAgICAgICAgIF9z\ndWJzID0gc3ViczsKICAgICAgICAgICAgaWYgKGJ1bmRsZSA9PSBudWxsKSB7\nCiAgICAgICAgICAgICAgICBfbG9jYWxpemVkTWVzc2FnZSA9IGtleTsKICAg\nICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIFN0cmluZyBsb2Nh\nbGl6ZWQgPSBudWxsOwogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgICAgICAgICBsb2NhbGl6ZWQgPSBidW5kbGUuZ2V0U3RyaW5nKGtleSk7\nCiAgICAgICAgICAgICAgICB9IGNhdGNoIChNaXNzaW5nUmVzb3VyY2VFeGNl\ncHRpb24gbXJlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGZhdGFsKQog\nICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBtcmU7CiAgICAgICAgICAg\nICAgICB9CiAgICAgICAgICAgICAgICBfbG9jYWxpemVkTWVzc2FnZSA9IChs\nb2NhbGl6ZWQgPT0gbnVsbCkgPyBrZXkgOiBsb2NhbGl6ZWQ7CiAgICAgICAg\nICAgIH0KICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIFRoZSBs\nb2NhbGl6ZWQgbWVzc2FnZS4KICAgICAgICAgKi8KICAgICAgICBwdWJsaWMg\nU3RyaW5nIGdldE1lc3NhZ2UoKSB7CiAgICAgICAgICAgIHJldHVybiBNZXNz\nYWdlRm9ybWF0LmZvcm1hdChfbG9jYWxpemVkTWVzc2FnZSwgX3N1YnMpOwog\nICAgICAgIH0KCiAgICAgICAgLyoqCiAgICAgICAgICogVGhlIHVuaXF1ZSBr\nZXkgZm9yIHRoZSBsb2NhbGl6ZWQgbWVzc2FnZS4KICAgICAgICAgKi8KICAg\nICAgICBwdWJsaWMgU3RyaW5nIGdldEtleSgpIHsKICAgICAgICAgICAgcmV0\ndXJuIF9rZXk7CiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiBT\ndWJzdGl0dXRpb25zIGluc2VydGVkIGludG8gdGhlIG1lc3NhZ2UuCiAgICAg\nICAgICovCiAgICAgICAgcHVibGljIE9iamVjdFtdIGdldFN1YnN0aXR1dGlv\nbnMoKSB7CiAgICAgICAgICAgIHJldHVybiBfc3ViczsKICAgICAgICB9Cgog\nICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0UGFja2FnZU5hbWUoKSB7CiAgICAg\nICAgICAgIHJldHVybiBfcGtnOwogICAgICAgIH0KCiAgICAgICAgcHVibGlj\nIFN0cmluZyB0b1N0cmluZygpIHsKICAgICAgICAgICAgcmV0dXJuIGdldE1l\nc3NhZ2UoKTsKICAgICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

