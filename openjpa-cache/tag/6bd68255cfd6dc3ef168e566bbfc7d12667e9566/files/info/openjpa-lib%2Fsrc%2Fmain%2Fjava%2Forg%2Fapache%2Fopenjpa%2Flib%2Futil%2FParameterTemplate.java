{"sha":"b814cfcf83cb8984209a699a5450ede44b645028","node_id":"MDQ6QmxvYjIwNjM2NDpiODE0Y2ZjZjgzY2I4OTg0MjA5YTY5OWE1NDUwZWRlNDRiNjQ1MDI4","size":7269,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/b814cfcf83cb8984209a699a5450ede44b645028","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWw7CgppbXBvcnQg\namF2YS5pby5CdWZmZXJlZFJlYWRlcjsKaW1wb3J0IGphdmEuaW8uRmlsZTsK\naW1wb3J0IGphdmEuaW8uRmlsZVJlYWRlcjsKaW1wb3J0IGphdmEuaW8uRmls\nZVdyaXRlcjsKaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247CmltcG9ydCBq\nYXZhLmlvLklucHV0U3RyZWFtOwppbXBvcnQgamF2YS5pby5JbnB1dFN0cmVh\nbVJlYWRlcjsKaW1wb3J0IGphdmEuaW8uT3V0cHV0U3RyZWFtOwppbXBvcnQg\namF2YS5pby5PdXRwdXRTdHJlYW1Xcml0ZXI7CmltcG9ydCBqYXZhLmlvLlJl\nYWRlcjsKaW1wb3J0IGphdmEuaW8uV3JpdGVyOwppbXBvcnQgamF2YS5zZWN1\ncml0eS5BY2Nlc3NDb250cm9sbGVyOwppbXBvcnQgamF2YS51dGlsLkhhc2hN\nYXA7CmltcG9ydCBqYXZhLnV0aWwuTWFwOwoKLyoqCiAqIEEgdGVtcGxhdGUg\ndGhhdCBhbGxvd3MgcGFyYW1ldGVyIHN1YnN0aXR1dGlvbnMuIFBhcmFtZXRl\ncnMgc2hvdWxkIGJlCiAqIHBsYWNlZCBpbiB0aGUgdGVtcGxhdGUgaW4gdGhl\nIGZvcm0gJHtwYXJhbS1uYW1lfS4gVXNlIHRoZQogKiB7QGxpbmsgI3NldFBh\ncmFtZXRlcn0gbWV0aG9kIHRvIHNldCB0aGUgcGFyYW1ldGVyIHZhbHVlcywg\nd2hpY2ggd2lsbCBiZQogKiBzdWJzdGl0dXRlZCBpbnRvIHRoZSB0ZW1wbGF0\nZSBvbiBjYWxscyB0byB7QGxpbmsgI3dyaXRlfSBhbmQKICoge0BsaW5rICN0\nb1N0cmluZ30uIElmIGEgcGFyYW1ldGVyIGlzIGVuY291bnRlcmVkIHRoYXQg\naGFzbid0IGJlZW4gc2V0LCB0aGVuCiAqIHRoZSBwYXJhbWV0ZXIga2V5IGlz\nIHVzZWQgdG8gbG9va3VwIHRoZSBjb3JyZXNwb25kaW5nIFN5c3RlbSBwcm9w\nZXJ0eS4KICoKICogQGF1dGhvciBBYmUgV2hpdGUKICogQG5vamF2YWRvYwog\nKi8KcHVibGljIGNsYXNzIFBhcmFtZXRlclRlbXBsYXRlIHsKCiAgICBwcml2\nYXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcgU0VQID0gSjJEb1ByaXZIZWxwZXIu\nZ2V0TGluZVNlcGFyYXRvcigpOwoKICAgIHByaXZhdGUgZmluYWwgU3RyaW5n\nQnVmZmVyIF9idWYgPSBuZXcgU3RyaW5nQnVmZmVyKCk7CiAgICBwcml2YXRl\nIGZpbmFsIE1hcCBfcGFyYW1zID0gbmV3IEhhc2hNYXAoKTsKCiAgICAvKioK\nICAgICAqIEFkZCB0aGUgZ2l2ZW4gdmFsdWUgdG8gdGhlIGludGVybmFsIHRl\nbXBsYXRlLgogICAgICovCiAgICBwdWJsaWMgUGFyYW1ldGVyVGVtcGxhdGUg\nYXBwZW5kKFN0cmluZyB2YWx1ZSkgewogICAgICAgIF9idWYuYXBwZW5kKHZh\nbHVlKTsKICAgICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICAvKioKICAg\nICAqIEFkZCB0aGUgZ2l2ZW4gdmFsdWUgdG8gdGhlIGludGVybmFsIHRlbXBs\nYXRlLgogICAgICovCiAgICBwdWJsaWMgUGFyYW1ldGVyVGVtcGxhdGUgYXBw\nZW5kKGJvb2xlYW4gdmFsdWUpIHsKICAgICAgICBfYnVmLmFwcGVuZCh2YWx1\nZSk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBBZGQgdGhlIGdpdmVuIHZhbHVlIHRvIHRoZSBpbnRlcm5hbCB0ZW1wbGF0\nZS4KICAgICAqLwogICAgcHVibGljIFBhcmFtZXRlclRlbXBsYXRlIGFwcGVu\nZChjaGFyIHZhbHVlKSB7CiAgICAgICAgX2J1Zi5hcHBlbmQodmFsdWUpOwog\nICAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICAgIC8qKgogICAgICogQWRk\nIHRoZSBnaXZlbiB2YWx1ZSB0byB0aGUgaW50ZXJuYWwgdGVtcGxhdGUuCiAg\nICAgKi8KICAgIHB1YmxpYyBQYXJhbWV0ZXJUZW1wbGF0ZSBhcHBlbmQoZG91\nYmxlIHZhbHVlKSB7CiAgICAgICAgX2J1Zi5hcHBlbmQodmFsdWUpOwogICAg\nICAgIHJldHVybiB0aGlzOwogICAgfQoKICAgIC8qKgogICAgICogQWRkIHRo\nZSBnaXZlbiB2YWx1ZSB0byB0aGUgaW50ZXJuYWwgdGVtcGxhdGUuCiAgICAg\nKi8KICAgIHB1YmxpYyBQYXJhbWV0ZXJUZW1wbGF0ZSBhcHBlbmQoZmxvYXQg\ndmFsdWUpIHsKICAgICAgICBfYnVmLmFwcGVuZCh2YWx1ZSk7CiAgICAgICAg\ncmV0dXJuIHRoaXM7CiAgICB9CgogICAgLyoqCiAgICAgKiBBZGQgdGhlIGdp\ndmVuIHZhbHVlIHRvIHRoZSBpbnRlcm5hbCB0ZW1wbGF0ZS4KICAgICAqLwog\nICAgcHVibGljIFBhcmFtZXRlclRlbXBsYXRlIGFwcGVuZChpbnQgdmFsdWUp\nIHsKICAgICAgICBfYnVmLmFwcGVuZCh2YWx1ZSk7CiAgICAgICAgcmV0dXJu\nIHRoaXM7CiAgICB9CgogICAgLyoqCiAgICAgKiBBZGQgdGhlIGdpdmVuIHZh\nbHVlIHRvIHRoZSBpbnRlcm5hbCB0ZW1wbGF0ZS4KICAgICAqLwogICAgcHVi\nbGljIFBhcmFtZXRlclRlbXBsYXRlIGFwcGVuZChsb25nIHZhbHVlKSB7CiAg\nICAgICAgX2J1Zi5hcHBlbmQodmFsdWUpOwogICAgICAgIHJldHVybiB0aGlz\nOwogICAgfQoKICAgIC8qKgogICAgICogQWRkIHRoZSBnaXZlbiB2YWx1ZSB0\nbyB0aGUgaW50ZXJuYWwgdGVtcGxhdGUuCiAgICAgKi8KICAgIHB1YmxpYyBQ\nYXJhbWV0ZXJUZW1wbGF0ZSBhcHBlbmQoc2hvcnQgdmFsdWUpIHsKICAgICAg\nICBfYnVmLmFwcGVuZCh2YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBBZGQgdGhlIGdpdmVuIHZhbHVlIHRvIHRo\nZSBpbnRlcm5hbCB0ZW1wbGF0ZS4KICAgICAqLwogICAgcHVibGljIFBhcmFt\nZXRlclRlbXBsYXRlIGFwcGVuZChPYmplY3QgdmFsdWUpIHsKICAgICAgICBf\nYnVmLmFwcGVuZCh2YWx1ZSk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBBZGQgdGhlIGdpdmVuIHZhbHVlIHRvIHRoZSBp\nbnRlcm5hbCB0ZW1wbGF0ZS4KICAgICAqLwogICAgcHVibGljIFBhcmFtZXRl\nclRlbXBsYXRlIGFwcGVuZChJbnB1dFN0cmVhbSBpbikgdGhyb3dzIElPRXhj\nZXB0aW9uIHsKICAgICAgICByZXR1cm4gYXBwZW5kKG5ldyBJbnB1dFN0cmVh\nbVJlYWRlcihpbikpOwogICAgfQoKICAgIC8qKgogICAgICogQWRkIHRoZSBn\naXZlbiB2YWx1ZSB0byB0aGUgaW50ZXJuYWwgdGVtcGxhdGUuCiAgICAgKi8K\nICAgIHB1YmxpYyBQYXJhbWV0ZXJUZW1wbGF0ZSBhcHBlbmQoUmVhZGVyIHJl\nYWRlcikgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICBCdWZmZXJlZFJl\nYWRlciBidWYgPSBuZXcgQnVmZmVyZWRSZWFkZXIocmVhZGVyKTsKICAgICAg\nICBTdHJpbmcgbGluZTsKICAgICAgICB3aGlsZSAoKGxpbmUgPSBidWYucmVh\nZExpbmUoKSkgIT0gbnVsbCkKICAgICAgICAgICAgX2J1Zi5hcHBlbmQobGlu\nZSkuYXBwZW5kKFNFUCk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBBZGQgdGhlIGdpdmVuIHZhbHVlIHRvIHRoZSBpbnRl\ncm5hbCB0ZW1wbGF0ZS4KICAgICAqLwogICAgcHVibGljIFBhcmFtZXRlclRl\nbXBsYXRlIGFwcGVuZChGaWxlIGZpbGUpIHRocm93cyBJT0V4Y2VwdGlvbiB7\nCiAgICAgICAgRmlsZVJlYWRlciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcihm\naWxlKTsKICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4gYXBwZW5k\nKHJlYWRlcik7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgICAgIHJlYWRlci5jbG9zZSgpOwogICAgICAgICAg\nICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBpb2UpIHsKICAgICAgICAgICAgfQog\nICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0cnVlIGlm\nIHRoZSBnaXZlbiBwYXJhbWV0ZXIgaGFzIGJlZW4gZ2l2ZW4gYSB2YWx1ZS4K\nICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gaGFzUGFyYW1ldGVyKFN0cmlu\nZyBuYW1lKSB7CiAgICAgICAgcmV0dXJuIF9wYXJhbXMuY29udGFpbnNLZXko\nbmFtZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIHZhbHVl\nIHNldCBmb3IgdGhlIGdpdmVuIHBhcmFtZXRlci4KICAgICAqLwogICAgcHVi\nbGljIE9iamVjdCBnZXRQYXJhbWV0ZXIoU3RyaW5nIG5hbWUpIHsKICAgICAg\nICByZXR1cm4gX3BhcmFtcy5nZXQobmFtZSk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBTZXQgdGhlIHZhbHVlIGZvciB0aGUgZ2l2ZW4gcGFyYW1ldGVyLgog\nICAgICovCiAgICBwdWJsaWMgT2JqZWN0IHNldFBhcmFtZXRlcihTdHJpbmcg\nbmFtZSwgT2JqZWN0IHZhbCkgewogICAgICAgIHJldHVybiBfcGFyYW1zLnB1\ndChuYW1lLCB2YWwpOwogICAgfQoKICAgIC8qKgogICAgICogU2V0IHRoZSB2\nYWx1ZXMgZm9yIGFsbCB0aGUgcGFyYW1ldGVycyBpbiB0aGUgZ2l2ZW4gbWFw\nLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRQYXJhbWV0ZXJzKE1hcCBw\nYXJhbXMpIHsKICAgICAgICBfcGFyYW1zLnB1dEFsbChwYXJhbXMpOwogICAg\nfQoKICAgIC8qKgogICAgICogQ2xlYXIgdGhlIHJlY29yZGVkIHBhcmFtZXRl\nciB2YWx1ZXMuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIGNsZWFyUGFyYW1l\ndGVycygpIHsKICAgICAgICBfcGFyYW1zLmNsZWFyKCk7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBSZXR1cm4gYSBjb3B5IG9mIHRoZSBpbnRlcm5hbCB2YWx1\nZSB0ZW1wbGF0ZSB3aXRoIGFsbCBwYXJhbWV0ZXJzCiAgICAgKiBzdWJzdGl0\ndXRlZCB3aXRoIHRoZWlyIGN1cnJlbnQgdmFsdWVzLgogICAgICovCiAgICBw\ndWJsaWMgU3RyaW5nIHRvU3RyaW5nKCkgewogICAgICAgIGlmIChfYnVmLmxl\nbmd0aCgpID09IDAgfHwgX3BhcmFtcy5pc0VtcHR5KCkpCiAgICAgICAgICAg\nIHJldHVybiBfYnVmLnRvU3RyaW5nKCk7CgogICAgICAgIFN0cmluZ0J1ZmZl\nciBjb3B5ID0gbmV3IFN0cmluZ0J1ZmZlcigpOwogICAgICAgIFN0cmluZ0J1\nZmZlciBwYXJhbSA9IG51bGw7CiAgICAgICAgY2hhciBjaCwgbGFzdCA9IDA7\nCiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBfYnVmLmxlbmd0aCgpOyBp\nKyspIHsKICAgICAgICAgICAgY2ggPSBfYnVmLmNoYXJBdChpKTsKICAgICAg\nICAgICAgaWYgKGxhc3QgPT0gJyQnICYmIGNoID09ICd7JykgewogICAgICAg\nICAgICAgICAgY29weS5kZWxldGVDaGFyQXQoY29weS5sZW5ndGgoKSAtIDEp\nOwogICAgICAgICAgICAgICAgcGFyYW0gPSBuZXcgU3RyaW5nQnVmZmVyKCk7\nCiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2ggPT0gJ30nICYmIHBhcmFtICE9\nIG51bGwpIHsKICAgICAgICAgICAgICAgIGlmIChfcGFyYW1zLmNvbnRhaW5z\nS2V5KHBhcmFtLnRvU3RyaW5nKCkpKQogICAgICAgICAgICAgICAgICAgIGNv\ncHkuYXBwZW5kKF9wYXJhbXMuZ2V0KHBhcmFtLnRvU3RyaW5nKCkpKTsKICAg\nICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBjb3B5LmFw\ncGVuZCgoU3RyaW5nKSBBY2Nlc3NDb250cm9sbGVyLmRvUHJpdmlsZWdlZCgK\nICAgICAgICAgICAgICAgICAgICAgICAgSjJEb1ByaXZIZWxwZXIuZ2V0UHJv\ncGVydHlBY3Rpb24ocGFyYW0udG9TdHJpbmcoKSkpKTsKICAgICAgICAgICAg\nICAgIHBhcmFtID0gbnVsbDsKICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJh\nbSAhPSBudWxsKQogICAgICAgICAgICAgICAgcGFyYW0uYXBwZW5kKGNoKTsK\nICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgY29weS5hcHBlbmQo\nY2gpOwoKICAgICAgICAgICAgbGFzdCA9IGNoOwogICAgICAgIH0KICAgICAg\nICByZXR1cm4gY29weS50b1N0cmluZygpOwogICAgfQoKICAgIC8qKgogICAg\nICogV3JpdGUgdGhlIGludGVybmFsIHZhbHVlIHRlbXBsYXRlIHdpdGggYWxs\nIHBhcmFtZXRlcnMKICAgICAqIHN1YnN0aXR1dGVkIHdpdGggdGhlaXIgY3Vy\ncmVudCB2YWx1ZXMuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHdyaXRlKE91\ndHB1dFN0cmVhbSBvdXQpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAg\nd3JpdGUobmV3IE91dHB1dFN0cmVhbVdyaXRlcihvdXQpKTsKICAgIH0KCiAg\nICAvKioKICAgICAqIFdyaXRlIHRoZSBpbnRlcm5hbCB2YWx1ZSB0ZW1wbGF0\nZSB3aXRoIGFsbCBwYXJhbWV0ZXJzCiAgICAgKiBzdWJzdGl0dXRlZCB3aXRo\nIHRoZWlyIGN1cnJlbnQgdmFsdWVzLgogICAgICovCiAgICBwdWJsaWMgdm9p\nZCB3cml0ZShXcml0ZXIgd3JpdGVyKSB0aHJvd3MgSU9FeGNlcHRpb24gewog\nICAgICAgIHdyaXRlci53cml0ZSh0b1N0cmluZygpKTsKICAgICAgICB3cml0\nZXIuZmx1c2goKTsKICAgIH0KCiAgICAvKioKICAgICAqIFdyaXRlIHRoZSBp\nbnRlcm5hbCB2YWx1ZSB0ZW1wbGF0ZSB3aXRoIGFsbCBwYXJhbWV0ZXJzCiAg\nICAgKiBzdWJzdGl0dXRlZCB3aXRoIHRoZWlyIGN1cnJlbnQgdmFsdWVzLgog\nICAgICovCiAgICBwdWJsaWMgdm9pZCB3cml0ZShGaWxlIGZpbGUpIHRocm93\ncyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgRmlsZVdyaXRlciB3cml0ZXIgPSBu\nZXcgRmlsZVdyaXRlcihmaWxlKTsKICAgICAgICB0cnkgewogICAgICAgICAg\nICB3cml0ZSh3cml0ZXIpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAg\nICAgIHRyeSB7CiAgICAgICAgICAgICAgICB3cml0ZXIuY2xvc2UoKTsKICAg\nICAgICAgICAgfSBjYXRjaCAoSU9FeGNlcHRpb24gaW9lKSB7CiAgICAgICAg\nICAgIH0KICAgICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

