{"sha":"7dabf83784262dc41c3b00cb0885904bd1f6f5e0","node_id":"MDQ6QmxvYjIwNjM2NDo3ZGFiZjgzNzg0MjYyZGM0MWMzYjAwY2IwODg1OTA0YmQxZjZmNWUw","size":7579,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/7dabf83784262dc41c3b00cb0885904bd1f6f5e0","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWw7CgppbXBvcnQg\namF2YS5pby5CdWZmZXJlZFJlYWRlcjsKaW1wb3J0IGphdmEuaW8uSU9FeGNl\ncHRpb247CmltcG9ydCBqYXZhLmlvLklucHV0U3RyZWFtOwppbXBvcnQgamF2\nYS5pby5JbnB1dFN0cmVhbVJlYWRlcjsKaW1wb3J0IGphdmEubmV0LlVSTDsK\naW1wb3J0IGphdmEuc2VjdXJpdHkuQWNjZXNzQ29udHJvbGxlcjsKaW1wb3J0\nIGphdmEudXRpbC5BcnJheUxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuRW51bWVy\nYXRpb247CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGphdmEudXRp\nbC5TZXQ7CmltcG9ydCBqYXZhLnV0aWwuU3RyaW5nVG9rZW5pemVyOwppbXBv\ncnQgamF2YS51dGlsLlRyZWVTZXQ7CgovKioKICogVXRpbGl0eSBjbGFzc2Vz\nIHRvIGxvY2F0ZSBzZXJ2aWNlcywgYXMgZGVmaW5lZCBpbiB0aGUgPGEKICog\naHJlZj0iaHR0cDovL2phdmEuc3VuLmNvbS9qMnNlLzEuMy9kb2NzL2d1aWRl\nL2phci9qYXIuaHRtbAogKiAjU2VydmljZSUyMFByb3ZpZGVyIj5KYXIgRmls\nZSBTcGVjaWZpY2F0aW9uPC9hPi4gTW9zdCBvZiB0aGUgbWV0aG9kcyBpbiB0\naGlzCiAqIGNsYXNzIGNhbiBhbHNvIGJlIGZvdW5kIGluIHRoZSA8ZW0+c3Vu\nLm1pc2MuU2VydmljZTwvZW0+IGNsYXNzLCBidXQgc2luY2UKICogaXQgaXMg\ndW5kb2N1bWVudGVkLCB3ZSBjYW5ub3QgcmVseSBvbiBpdHMgQVBJLgogKiBT\nZXJ2aWNlIGxvY2F0aW9uIGZvciBhIHNwZWNpZmllZCBpbnRlcmZhY2UgaXMg\nZG9uZSBieSBzZWFyY2hpbmcgZm9yIHRoZQogKiByZXNvdXJjZSA8ZW0+L01F\nVEEtSU5GL3NlcnZpY2VzLzwvZW0+PGk+c2VydmljZS5jbGFzcy5uYW1lPC9p\nPiwgYW5kCiAqIGxvYWRpbmcgdGhlIHJlc291cmNlLgogKiBNZXRob2RzIGlu\nIHRoaXMgY2xhc3MgdGhhdCBkbyBub3QgZGVjbGFyZSBleGNlcHRpb25zIHdp\nbGwgbmV2ZXIgdGhyb3cKICogUnVudGltZSBleGNlcHRpb25zOiBleGNlcHRp\nb25zIGFyZSBzaWxlbnRseSBzd2FsbG93ZWQgYW5kIGVtcHR5IGFycmF5IHZh\nbHVlcwogKiBhcmUgcmV0dXJuZWQuCiAqCiAqIEBhdXRob3IgTWFyYyBQcnVk\nJ2hvbW1lYXV4CiAqIEBub2phdmFkb2MKICovCnB1YmxpYyBjbGFzcyBTZXJ2\naWNlcyB7CgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIFBSRUZJ\nWCA9ICJNRVRBLUlORi9zZXJ2aWNlcy8iOwoKICAgIC8qKgogICAgICogUmV0\ndXJuIGFuIGFycmF5IG9mIFN0cmluZ3Mgb2YgY2xhc3MgbmFtZXMgb2YgYWxs\nIGtub3duIHNlcnZpY2UKICAgICAqIGltcGxlbWVudG9ycyBvZiB0aGUgc3Bl\nY2lmaWVkIGludGVyZmFjZSBvciBjbGFzcy4KICAgICAqLwogICAgcHVibGlj\nIHN0YXRpYyBTdHJpbmdbXSBnZXRJbXBsZW1lbnRvcnMoQ2xhc3Mgc2Vydmlj\nZUNsYXNzKSB7CiAgICAgICAgcmV0dXJuIGdldEltcGxlbWVudG9ycyhzZXJ2\naWNlQ2xhc3MsIG51bGwpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJu\nIGFuIGFycmF5IG9mIFN0cmluZ3Mgb2YgY2xhc3MgbmFtZXMgb2YgYWxsIGtu\nb3duIHNlcnZpY2UKICAgICAqIGltcGxlbWVudG9ycyBvZiB0aGUgc3BlY2lm\naWVkIGludGVyZmFjZSBvciBjbGFzcy4KICAgICAqLwogICAgcHVibGljIHN0\nYXRpYyBTdHJpbmdbXSBnZXRJbXBsZW1lbnRvcnMoQ2xhc3Mgc2VydmljZUNs\nYXNzLAogICAgICAgIENsYXNzTG9hZGVyIGxvYWRlcikgewogICAgICAgIHJl\ndHVybiBnZXRJbXBsZW1lbnRvcnMoc2VydmljZUNsYXNzLmdldE5hbWUoKSwg\nbG9hZGVyKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiBhbiBhcnJh\neSBvZiBTdHJpbmdzIG9mIGNsYXNzIG5hbWVzIG9mIGFsbCBrbm93biBzZXJ2\naWNlCiAgICAgKiBpbXBsZW1lbnRvcnMgb2YgdGhlIHNwZWNpZmllZCBjbGFz\ncyBuYW1lKGFzIHJlc29sdmVkIGJ5IHRoZSBjdXJyZW50CiAgICAgKiB0aHJl\nYWQncyBjb250ZXh0IGNsYXNzIGxvYWRlcikuCiAgICAgKi8KICAgIHB1Ymxp\nYyBzdGF0aWMgU3RyaW5nW10gZ2V0SW1wbGVtZW50b3JzKFN0cmluZyBzZXJ2\naWNlTmFtZSkgewogICAgICAgIHJldHVybiBnZXRJbXBsZW1lbnRvcnMoc2Vy\ndmljZU5hbWUsIG51bGwpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJu\nIGFuIGFycmF5IG9mIFN0cmluZ3Mgb2YgY2xhc3MgbmFtZXMgb2YgYWxsIGtu\nb3duIHNlcnZpY2UKICAgICAqIGltcGxlbWVudG9ycyBvZiB0aGUgc3BlY2lm\naWVkIGNsYXNzIG5hbWUsIGFzIHJlc29sdmVkIGJ5IHRoZSBzcGVjaWZpZWQK\nICAgICAqIHtAbGluayBDbGFzc0xvYWRlcn0uCiAgICAgKi8KICAgIHB1Ymxp\nYyBzdGF0aWMgU3RyaW5nW10gZ2V0SW1wbGVtZW50b3JzKFN0cmluZyBzZXJ2\naWNlTmFtZSwKICAgICAgICBDbGFzc0xvYWRlciBsb2FkZXIpIHsKICAgICAg\nICBpZiAobG9hZGVyID09IG51bGwpCiAgICAgICAgICAgIGxvYWRlciA9IChD\nbGFzc0xvYWRlcikgQWNjZXNzQ29udHJvbGxlci5kb1ByaXZpbGVnZWQoCiAg\nICAgICAgICAgICAgICBKMkRvUHJpdkhlbHBlci5nZXRDb250ZXh0Q2xhc3NM\nb2FkZXJBY3Rpb24oKSk7CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIFNl\ndCByZXNvdXJjZUxpc3QgPSBuZXcgVHJlZVNldCgpOwogICAgICAgICAgICBF\nbnVtZXJhdGlvbiByZXNvdXJjZXMgPSAoRW51bWVyYXRpb24pIEFjY2Vzc0Nv\nbnRyb2xsZXIuZG9Qcml2aWxlZ2VkKAogICAgICAgICAgICAgICAgSjJEb1By\naXZIZWxwZXIuZ2V0UmVzb3VyY2VzQWN0aW9uKGxvYWRlciwgUFJFRklYICsg\nc2VydmljZU5hbWUpKTsgCiAgICAgICAgICAgIHdoaWxlIChyZXNvdXJjZXMu\naGFzTW9yZUVsZW1lbnRzKCkpCiAgICAgICAgICAgICAgICBhZGRSZXNvdXJj\nZXMoKFVSTCkgcmVzb3VyY2VzLm5leHRFbGVtZW50KCksIHJlc291cmNlTGlz\ndCk7CgogICAgICAgICAgICByZXR1cm4gKFN0cmluZ1tdKSByZXNvdXJjZUxp\nc3QudG9BcnJheShuZXcgU3RyaW5nW3Jlc291cmNlTGlzdAogICAgICAgICAg\nICAgICAgLnNpemUoKV0pOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBl\nKSB7CiAgICAgICAgICAgIC8vIHNpbGVudGx5IHN3YWxsb3cgYWxsIGV4Y2Vw\ndGlvbnMuCiAgICAgICAgICAgIHJldHVybiBuZXcgU3RyaW5nWzBdOwogICAg\nICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFBhcnNlIHRoZSBVUkwgcmVz\nb3VyY2UgYW5kIGFkZCB0aGUgbGlzdGVkIGNsYXNzIG5hbWVzIHRvIHRoZSBz\ncGVjaWZpZWQKICAgICAqIFNldC4gQ2xhc3MgbmFtZXMgYXJlIHNlcGFyYXRl\nZCBieSBsaW5lcy4gTGluZXMgc3RhcnRpbmcgd2l0aCAnIycgYXJlCiAgICAg\nKiBpZ25vcmVkLgogICAgICovCiAgICBwcml2YXRlIHN0YXRpYyB2b2lkIGFk\nZFJlc291cmNlcyhVUkwgdXJsLCBTZXQgc2V0KSB0aHJvd3MgSU9FeGNlcHRp\nb24gewogICAgICAgIElucHV0U3RyZWFtIGluID0gdXJsLm9wZW5Db25uZWN0\naW9uKCkuZ2V0SW5wdXRTdHJlYW0oKTsKCiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgQnVmZmVyZWRSZWFkZXIgcmVhZGVyID0gbmV3IEJ1ZmZlcmVkUmVh\nZGVyKG5ldyBJbnB1dFN0cmVhbVJlYWRlcigKICAgICAgICAgICAgICAgIGlu\nKSk7CiAgICAgICAgICAgIFN0cmluZyBsaW5lOwogICAgICAgICAgICB3aGls\nZSAoKGxpbmUgPSByZWFkZXIucmVhZExpbmUoKSkgIT0gbnVsbCkgewogICAg\nICAgICAgICAgICAgaWYgKGxpbmUudHJpbSgpLnN0YXJ0c1dpdGgoIiMiKQog\nICAgICAgICAgICAgICAgICAgIHx8IGxpbmUudHJpbSgpLmxlbmd0aCgpID09\nIDApCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgogICAgICAgICAg\nICAgICAgU3RyaW5nVG9rZW5pemVyIHRvayA9IG5ldyBTdHJpbmdUb2tlbml6\nZXIobGluZSwgIiMgXHQiKTsKICAgICAgICAgICAgICAgIGlmICh0b2suaGFz\nTW9yZVRva2VucygpKSB7CiAgICAgICAgICAgICAgICAgICAgU3RyaW5nIG5l\neHQgPSB0b2submV4dFRva2VuKCk7CiAgICAgICAgICAgICAgICAgICAgaWYg\nKG5leHQgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICBuZXh0\nID0gbmV4dC50cmltKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChu\nZXh0Lmxlbmd0aCgpID4gMCAmJiAhbmV4dC5zdGFydHNXaXRoKCIjIikpCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICBzZXQuYWRkKG5leHQpOwogICAg\nICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAg\nICAgfQogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIHRyeSB7CiAg\nICAgICAgICAgICAgICBpbi5jbG9zZSgpOwogICAgICAgICAgICB9IGNhdGNo\nIChJT0V4Y2VwdGlvbiBpb2UpIHsKICAgICAgICAgICAgICAgIC8vIHNpbGVu\ndGx5IGNvbnN1bWUgZXhjZXB0aW9uCiAgICAgICAgICAgIH0KICAgICAgICB9\nCiAgICB9CgogICAgcHVibGljIHN0YXRpYyBDbGFzc1tdIGdldEltcGxlbWVu\ndG9yQ2xhc3NlcyhDbGFzcyBzZXJ2aWNlQ2xhc3MpIHsKICAgICAgICByZXR1\ncm4gZ2V0SW1wbGVtZW50b3JDbGFzc2VzKHNlcnZpY2VDbGFzcy5nZXROYW1l\nKCksIG51bGwpOwogICAgfQoKICAgIHB1YmxpYyBzdGF0aWMgQ2xhc3NbXSBn\nZXRJbXBsZW1lbnRvckNsYXNzZXMoQ2xhc3Mgc2VydmljZUNsYXNzLAogICAg\nICAgIENsYXNzTG9hZGVyIGxvYWRlcikgewogICAgICAgIHJldHVybiBnZXRJ\nbXBsZW1lbnRvckNsYXNzZXMoc2VydmljZUNsYXNzLmdldE5hbWUoKSwgbG9h\nZGVyKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiBhbiBhcnJheSBv\nZiBDbGFzcyBvYmplY3RzIG9mIGFsbCBrbm93biBzZXJ2aWNlIGltcGxlbWVu\ndG9ycyBvZiB0aGUKICAgICAqIHNwZWNpZmllZCBjbGFzcyBuYW1lKGFzIHJl\nc29sdmVkIGJ5IHRoZSBjdXJyZW50IHRocmVhZCdzIGNvbnRleHQgY2xhc3MK\nICAgICAqIGxvYWRlcikuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgQ2xh\nc3NbXSBnZXRJbXBsZW1lbnRvckNsYXNzZXMoU3RyaW5nIHNlcnZpY2VOYW1l\nKSB7CiAgICAgICAgcmV0dXJuIGdldEltcGxlbWVudG9yQ2xhc3NlcyhzZXJ2\naWNlTmFtZSwgbnVsbCk7CiAgICB9CgogICAgcHVibGljIHN0YXRpYyBDbGFz\nc1tdIGdldEltcGxlbWVudG9yQ2xhc3NlcyhTdHJpbmcgc2VydmljZU5hbWUs\nCiAgICAgICAgQ2xhc3NMb2FkZXIgbG9hZGVyKSB7CiAgICAgICAgdHJ5IHsK\nICAgICAgICAgICAgcmV0dXJuIGdldEltcGxlbWVudG9yQ2xhc3NlcyhzZXJ2\naWNlTmFtZSwgbG9hZGVyLCB0cnVlKTsKICAgICAgICB9IGNhdGNoIChFeGNl\ncHRpb24gY25mZSkgewogICAgICAgICAgICAvLyB0aGlzIHdpbGwgbmV2ZXIg\naGFwcGVuIHdpdGggc2tpcG1pc3NpbmcKICAgICAgICAgICAgcmV0dXJuIG5l\ndyBDbGFzc1swXTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBS\nZXR1cm4gYW4gYXJyYXkgb2YgQ2xhc3Mgb2JqZWN0cyBvZiBhbGwga25vd24g\nc2VydmljZSBpbXBsZW1lbnRvcnMgb2YgdGhlCiAgICAgKiBzcGVjaWZpZWQg\nY2xhc3MgbmFtZSwgYXMgcmVzb2x2ZWQgYnkgdGhlIHNwZWNpZmllZCB7QGxp\nbmsgQ2xhc3NMb2FkZXJ9LgogICAgICoKICAgICAqIEBwYXJhbSBza2lwTWlz\nc2luZyBpZiB0cnVlLCB0aGVuIGlnbm9yZSBjbGFzc2VzIHRoYXQgY2Fubm90\nIGJlIGxvYWRlZCBieQogICAgICogdGhlIGNsYXNzbG9hZGVyOyBvdGhlcndp\nc2UsIHJlc29sdXRpb24gZmFpbHVyZXMgd2lsbCB0aHJvdyBhCiAgICAgKiB7\nQGxpbmsgQ2xhc3NOb3RGb3VuZEV4Y2VwdGlvbn0uCiAgICAgKi8KICAgIHB1\nYmxpYyBzdGF0aWMgQ2xhc3NbXSBnZXRJbXBsZW1lbnRvckNsYXNzZXMoU3Ry\naW5nIHNlcnZpY2VOYW1lLAogICAgICAgIENsYXNzTG9hZGVyIGxvYWRlciwg\nYm9vbGVhbiBza2lwTWlzc2luZykgdGhyb3dzIENsYXNzTm90Rm91bmRFeGNl\ncHRpb24gewogICAgICAgIGlmIChsb2FkZXIgPT0gbnVsbCkKICAgICAgICAg\nICAgbG9hZGVyID0gKENsYXNzTG9hZGVyKSBBY2Nlc3NDb250cm9sbGVyLmRv\nUHJpdmlsZWdlZCgKICAgICAgICAgICAgICAgIEoyRG9Qcml2SGVscGVyLmdl\ndENvbnRleHRDbGFzc0xvYWRlckFjdGlvbigpKTsKCiAgICAgICAgU3RyaW5n\nW10gbmFtZXMgPSBnZXRJbXBsZW1lbnRvcnMoc2VydmljZU5hbWUsIGxvYWRl\ncik7CiAgICAgICAgaWYgKG5hbWVzID09IG51bGwpCiAgICAgICAgICAgIHJl\ndHVybiBuZXcgQ2xhc3NbMF07CgogICAgICAgIExpc3QgY2xhc3NlcyA9IG5l\ndyBBcnJheUxpc3QobmFtZXMubGVuZ3RoKTsKICAgICAgICBmb3IgKGludCBp\nID0gMDsgaSA8IG5hbWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHRy\neSB7CiAgICAgICAgICAgICAgICBjbGFzc2VzLmFkZChDbGFzcy5mb3JOYW1l\nKG5hbWVzW2ldLCBmYWxzZSwgbG9hZGVyKSk7CiAgICAgICAgICAgIH0gY2F0\nY2ggKENsYXNzTm90Rm91bmRFeGNlcHRpb24gZSkgewogICAgICAgICAgICAg\nICAgaWYgKCFza2lwTWlzc2luZykKICAgICAgICAgICAgICAgICAgICB0aHJv\ndyBlOwogICAgICAgICAgICB9IGNhdGNoIChVbnN1cHBvcnRlZENsYXNzVmVy\nc2lvbkVycm9yIGVjdmUpIHsKICAgICAgICAgICAgICAgIGlmICghc2tpcE1p\nc3NpbmcpCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZWN2ZTsKICAgICAg\nICAgICAgfSBjYXRjaCAoTGlua2FnZUVycm9yIGxlKSB7CiAgICAgICAgICAg\nICAgICBpZiAoIXNraXBNaXNzaW5nKQogICAgICAgICAgICAgICAgICAgIHRo\ncm93IGxlOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVy\nbiAoQ2xhc3NbXSkgY2xhc3Nlcy50b0FycmF5KG5ldyBDbGFzc1tjbGFzc2Vz\nLnNpemUoKV0pOwogICAgfQp9Cg==\n","encoding":"base64"}

