{"sha":"ca469a18e5a09ac80685a23d5ad3908fc72a210d","node_id":"MDQ6QmxvYjIwNjM2NDpjYTQ2OWExOGU1YTA5YWM4MDY4NWEyM2Q1YWQzOTA4ZmM3MmEyMTBk","size":3695,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/ca469a18e5a09ac80685a23d5ad3908fc72a210d","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWw7CgppbXBvcnQg\namF2YS5pby5CeXRlQXJyYXlPdXRwdXRTdHJlYW07CmltcG9ydCBqYXZhLmlv\nLklPRXhjZXB0aW9uOwppbXBvcnQgamF2YS5pby5JbnB1dFN0cmVhbTsKaW1w\nb3J0IGphdmEuc2VjdXJpdHkuQWNjZXNzQ29udHJvbGxlcjsKCmltcG9ydCBz\nZXJwLmJ5dGVjb2RlLmxvd2xldmVsLkNvbnN0YW50UG9vbFRhYmxlOwoKLyoq\nCiAqIENsYXNzTG9hZGVyIGltcGxlbWVudGF0aW9uIHRoYXQgYWxsb3dzIGNs\nYXNzZXMgdG8gYmUgdGVtcG9yYXJpbHkKICogbG9hZGVkIGFuZCB0aGVuIHRo\ncm93biBhd2F5LiBVc2VmdWwgZm9yIHRoZSBlbmhhbmNlciB0byBiZSBhYmxl\nCiAqIHRvIHJ1biBhZ2FpbnN0IGEgY2xhc3Mgd2l0aG91dCBmaXJzdCBsb2Fk\naW5nKGFuZCB0aHVzIHBvbGx1dGluZykKICogdGhlIHBhcmVudCBDbGFzc0xv\nYWRlci4KICoKICogQGF1dGhvciBNYXJjIFBydWQnaG9tbWVhdXgKICogQG5v\namF2YWRvYwogKi8KcHVibGljIGNsYXNzIFRlbXBvcmFyeUNsYXNzTG9hZGVy\nIGV4dGVuZHMgQ2xhc3NMb2FkZXIgewoKICAgIHB1YmxpYyBUZW1wb3JhcnlD\nbGFzc0xvYWRlcihDbGFzc0xvYWRlciBwYXJlbnQpIHsKICAgICAgICBzdXBl\ncihwYXJlbnQpOwogICAgfQoKICAgIHB1YmxpYyBDbGFzcyBsb2FkQ2xhc3Mo\nU3RyaW5nIG5hbWUpIHRocm93cyBDbGFzc05vdEZvdW5kRXhjZXB0aW9uIHsK\nICAgICAgICByZXR1cm4gbG9hZENsYXNzKG5hbWUsIGZhbHNlKTsKICAgIH0K\nCiAgICBwcm90ZWN0ZWQgQ2xhc3MgbG9hZENsYXNzKFN0cmluZyBuYW1lLCBi\nb29sZWFuIHJlc29sdmUpCiAgICAgICAgdGhyb3dzIENsYXNzTm90Rm91bmRF\neGNlcHRpb24gewogICAgICAgIC8vIHNlZSBpZiB3ZSd2ZSBhbHJlYWR5IGxv\nYWRlZCBpdAogICAgICAgIENsYXNzIGMgPSBmaW5kTG9hZGVkQ2xhc3MobmFt\nZSk7CiAgICAgICAgaWYgKGMgIT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJu\nIGM7CgogICAgICAgIC8vIGJ1ZyAjMjgzLiBkZWZlciB0byBzeXN0ZW0gaWYg\ndGhlIG5hbWUgaXMgYSBwcm90ZWN0ZWQgbmFtZS4KICAgICAgICAvLyAic3Vu\nLiIgaXMgcmVxdWlyZWQgZm9yIEpESyAxLjQsIHdoaWNoIGhhcyBhbiBhY2Nl\nc3MgY2hlY2sgZm9yCiAgICAgICAgLy8gc3VuLnJlZmxlY3QuR2VuZXJhdGVk\nU2VyaWFsaXphdGlvbkNvbnN0cnVjdG9yQWNjZXNzb3IxCiAgICAgICAgaWYg\nKG5hbWUuc3RhcnRzV2l0aCgiamF2YS4iKSB8fCBuYW1lLnN0YXJ0c1dpdGgo\nImphdmF4LiIpCiAgICAgICAgICAgIHx8IG5hbWUuc3RhcnRzV2l0aCgic3Vu\nLiIpKQogICAgICAgICAgICByZXR1cm4gQ2xhc3MuZm9yTmFtZShuYW1lLCBy\nZXNvbHZlLCBnZXRDbGFzcygpLmdldENsYXNzTG9hZGVyKCkpOwoKICAgICAg\nICBTdHJpbmcgcmVzb3VyY2VOYW1lID0gbmFtZS5yZXBsYWNlKCcuJywgJy8n\nKSArICIuY2xhc3MiOwogICAgICAgIElucHV0U3RyZWFtIHJlc291cmNlID0g\nZ2V0UmVzb3VyY2VBc1N0cmVhbShyZXNvdXJjZU5hbWUpOwogICAgICAgIGlm\nIChyZXNvdXJjZSA9PSBudWxsKQogICAgICAgICAgICB0aHJvdyBuZXcgQ2xh\nc3NOb3RGb3VuZEV4Y2VwdGlvbihuYW1lKTsKCiAgICAgICAgQnl0ZUFycmF5\nT3V0cHV0U3RyZWFtIGJvdXQgPSBuZXcgQnl0ZUFycmF5T3V0cHV0U3RyZWFt\nKCk7CiAgICAgICAgYnl0ZVtdIGIgPSBuZXcgYnl0ZVsxMDI0XTsKICAgICAg\nICB0cnkgewogICAgICAgICAgICBmb3IgKGludCBuID0gMDsgKG4gPSByZXNv\ndXJjZS5yZWFkKGIsIDAsIGIubGVuZ3RoKSkgIT0gLTE7CiAgICAgICAgICAg\nICAgICBib3V0LndyaXRlKGIsIDAsIG4pKQogICAgICAgICAgICAgICAgOwog\nICAgICAgICAgICBieXRlW10gY2xhc3NCeXRlcyA9IGJvdXQudG9CeXRlQXJy\nYXkoKTsKICAgICAgICAgICAgaWYgKGlzQW5ub3RhdGlvbihjbGFzc0J5dGVz\nKSkKICAgICAgICAgICAgICAgIHJldHVybiBDbGFzcy5mb3JOYW1lKG5hbWUs\nIHJlc29sdmUsIGdldENsYXNzKCkuCiAgICAgICAgICAgICAgICAgICAgZ2V0\nQ2xhc3NMb2FkZXIoKSk7CgogICAgICAgICAgICB0cnkgewogICAgICAgICAg\nICAgICAgcmV0dXJuIGRlZmluZUNsYXNzKG5hbWUsIGNsYXNzQnl0ZXMsIDAs\nIGNsYXNzQnl0ZXMubGVuZ3RoKTsKICAgICAgICAgICAgfSBjYXRjaCAoU2Vj\ndXJpdHlFeGNlcHRpb24gZSkgewogICAgICAgICAgICAgICAgLy8gcG9zc2li\nbGUgcHJvaGliaXRlZCBwYWNrYWdlOiBkZWZlciB0byB0aGUgcGFyZW50CiAg\nICAgICAgICAgICAgICByZXR1cm4gc3VwZXIubG9hZENsYXNzKG5hbWUsIHJl\nc29sdmUpOwogICAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoSU9FeGNl\ncHRpb24gaW9lKSB7CiAgICAgICAgICAgIC8vIGRlZmVyIHRvIHRoZSBwYXJl\nbnQKICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmxvYWRDbGFzcyhuYW1lLCBy\nZXNvbHZlKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBGYXN0\nLXBhcnNlIHRoZSBnaXZlbiBjbGFzcyBieXRlY29kZSB0byBkZXRlcm1pbmUg\naWYgaXQgaXMgYW4KICAgICAqIGFubm90YXRpb24gY2xhc3MuCiAgICAgKi8K\nICAgIHByaXZhdGUgc3RhdGljIGJvb2xlYW4gaXNBbm5vdGF0aW9uKGJ5dGVb\nXSBiKSB7CiAgICAgICAgaWYgKEphdmFWZXJzaW9ucy5WRVJTSU9OIDwgNSkK\nICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIGludCBpZHggPSBD\nb25zdGFudFBvb2xUYWJsZS5nZXRFbmRJbmRleChiKTsKICAgICAgICBpbnQg\nYWNjZXNzID0gQ29uc3RhbnRQb29sVGFibGUucmVhZFVuc2lnbmVkU2hvcnQo\nYiwgaWR4KTsKICAgICAgICByZXR1cm4gKGFjY2VzcyAmIDB4MjAwMCkgIT0g\nMDsgLy8gYWNjZXNzIGNvbnN0YW50IGZvciBhbm5vdGF0aW9uIHR5cGUKICAg\nIH0KfQo=\n","encoding":"base64"}

