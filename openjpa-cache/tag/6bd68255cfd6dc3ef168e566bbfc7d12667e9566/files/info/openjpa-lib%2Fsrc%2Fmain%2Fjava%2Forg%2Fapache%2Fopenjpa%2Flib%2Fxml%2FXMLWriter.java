{"sha":"5f345645b9e87bdefef3067ee5c5d2b3dfd31624","node_id":"MDQ6QmxvYjIwNjM2NDo1ZjM0NTY0NWI5ZTg3YmRlZmVmMzA2N2VlNWM1ZDJiM2RmZDMxNjI0","size":4612,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/5f345645b9e87bdefef3067ee5c5d2b3dfd31624","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnhtbDsKCmltcG9ydCBq\nYXZhLmlvLkZpbHRlcldyaXRlcjsKaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRp\nb247CmltcG9ydCBqYXZhLmlvLldyaXRlcjsKCmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEubGliLnV0aWwuSjJEb1ByaXZIZWxwZXI7CgovKioKICogVGhl\nIFhNTFdyaXRlciBpcyBhIHdyaXRlciB0eXBlIGZvciBwcmV0dHktcHJpbnRp\nbmcgWE1MLgogKiBJdCBhc3N1bWVzIHRoYXQgdGhlIHN0cmVhbWVkIFhNTCB3\naWxsIGJlIGdpdmVuIHdpdGhvdXQgYW55IHdoaXRlc3BhY2UsCiAqIG90aGVy\nIHRoYW4gdGhlIHNwYWNlIHdpdGhpbiB0ZXh0IGJsb2Nrcy4KICoKICogQGF1\ndGhvciBBYmUgV2hpdGUKICogQG5vamF2YWRvYwogKi8KcHVibGljIGNsYXNz\nIFhNTFdyaXRlciBleHRlbmRzIEZpbHRlcldyaXRlciB7CgogICAgcHJpdmF0\nZSBzdGF0aWMgU3RyaW5nIF9lbmRsID0gSjJEb1ByaXZIZWxwZXIuZ2V0TGlu\nZVNlcGFyYXRvcigpOwoKICAgIHByaXZhdGUgaW50IF9sYXN0Q2hhciA9ICcg\nJzsKICAgIHByaXZhdGUgaW50IF9sYXN0Q2hhcjIgPSAnICc7CiAgICBwcml2\nYXRlIGludCBfbGFzdENoYXIzID0gJyAnOwogICAgcHJpdmF0ZSBpbnQgX2Rl\ncHRoID0gMDsKCiAgICAvKioKICAgICAqIENvbnN0cnVjdCBhbiBYTUxXcml0\nZXIgdGhhdCB3aWxsIHdyaXRlIHRvIHRoZSBnaXZlbiBzdHJlYW0uCiAgICAg\nKi8KICAgIHB1YmxpYyBYTUxXcml0ZXIoV3JpdGVyIG91dCkgewogICAgICAg\nIHN1cGVyKG91dCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgd3JpdGUoY2hh\ncltdIGNidWYsIGludCBvZmYsIGludCBsZW4pIHRocm93cyBJT0V4Y2VwdGlv\nbiB7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBsZW47IGkrKykKICAg\nICAgICAgICAgd3JpdGUoY2J1ZltvZmYgKyBpXSk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgd3JpdGUoU3RyaW5nIHN0ciwgaW50IG9mZiwgaW50IGxlbikg\ndGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICBmb3IgKGludCBpID0gMDsg\naSA8IGxlbjsgaSsrKQogICAgICAgICAgICB3cml0ZShzdHIuY2hhckF0KG9m\nZiArIGkpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB3cml0ZShpbnQgYykg\ndGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICAvLyB0aGUgYmFzaWMgaWRl\nYSBvZiB0aGlzIG1ldGhvZCBpcyB0byBtYWtlIHN1cmUgdGhhdCB3aGVuIGEg\ndGFnCiAgICAgICAgLy8gb3IgYSB0ZXh0IGJsb2NrIHN0YXJ0cywgaXQgaXMg\ncGxhY2VkIG9uIGEgc2VwYXJhdGUgbGluZSBhbmQKICAgICAgICAvLyBpbmRl\nbnRlZCBhbiBhbW91bnQgYXBwcm9wcmlhdGUgdG8gdGhlIFhNTCB0cmVlIGRl\ncHRoCgogICAgICAgIGlmIChfbGFzdENoYXIgPT0gJzwnKSB7CiAgICAgICAg\nICAgIC8vIHRhZyBvciBwcm9jZXNzaW5nIGluc3RydWN0aW9uPwogICAgICAg\nICAgICBpZiAoYyAhPSAnPycgJiYgYyAhPSAnIScpIHsKICAgICAgICAgICAg\nICAgIC8vIGVuZCB0YWc7IGRlY3JlYXNlIGRlcHRoIGJlZm9yZSB3cml0aW5n\nIHNwYWNlcwogICAgICAgICAgICAgICAgaWYgKGMgPT0gJy8nKQogICAgICAg\nICAgICAgICAgICAgIF9kZXB0aC0tOwoKICAgICAgICAgICAgICAgIC8vIHRh\nZ3MgYXJlIGFsd2F5cyBvbiBzZXBhcmF0ZSBsaW5lcwogICAgICAgICAgICAg\nICAgb3V0LndyaXRlKF9lbmRsKTsKICAgICAgICAgICAgICAgIHdyaXRlU3Bh\nY2VzKCk7CgogICAgICAgICAgICAgICAgLy8gYmVnaW5uaW5nIHRhZzsgaW5j\ncmVhc2UgZGVwdGggZm9yIHRhZyBib2R5CiAgICAgICAgICAgICAgICBpZiAo\nYyAhPSAnLycpCiAgICAgICAgICAgICAgICAgICAgX2RlcHRoKys7CiAgICAg\nICAgICAgIH0KCiAgICAgICAgICAgIC8vIGlmIHRoaXMgaXMgbm90IGEgcHJv\nY2Vzc2luZyBpbnN0cnVjdGlvbiAvIGNvbW1lbnQsCiAgICAgICAgICAgIC8v\nIHdyaXRlIHRoZSBjaGFycwogICAgICAgICAgICBpZiAoYyAhPSAnIScpIHsK\nICAgICAgICAgICAgICAgIG91dC53cml0ZSgnPCcpOwogICAgICAgICAgICAg\nICAgb3V0LndyaXRlKGMpOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNl\nIGlmIChjID09ICc+JykgewogICAgICAgICAgICAvLyBpZiB1bmFyeSB0YWcg\nZGVjcmVhc2UgZGVwdGggdG8gdW5kbyB0aGUgaW5jcmVhc2UgYXQgdGFnIHN0\nYXJ0CiAgICAgICAgICAgIGlmIChfbGFzdENoYXIgPT0gJy8nKQogICAgICAg\nICAgICAgICAgX2RlcHRoLS07CgogICAgICAgICAgICAvLyBjaGVjayBmb3Ig\ndGhlIGNvbW1lbnQtcHJvY2Vzc2luZyBjb25kaXRpb25zCiAgICAgICAgICAg\nIGlmIChfbGFzdENoYXIyID09ICc8JyAmJiBfbGFzdENoYXIgPT0gJyEnKQog\nICAgICAgICAgICAgICAgb3V0LndyaXRlKCI8ISIpOwogICAgICAgICAgICBl\nbHNlIGlmIChfbGFzdENoYXIzID09ICc8JyAmJiBfbGFzdENoYXIyID09ICch\nJyAmJiBfbGFzdENoYXIgPT0gJy0nKQogICAgICAgICAgICAgICAgb3V0Lndy\naXRlKCI8IS0iKTsKCiAgICAgICAgICAgIG91dC53cml0ZSgnPicpOwogICAg\nICAgIH0gZWxzZSBpZiAoYyAhPSAnPCcpIHsKICAgICAgICAgICAgLy8gaWYg\nd2UncmUgYXQgIjwhLS0iLCBpbmRlbnQgYW5kIHB1dCBpbiB0aGUgYmVnaW5u\naW5nIG9mCiAgICAgICAgICAgIC8vIHRoZSBjb21tZW50LiBpZiBpdCdzICI8\nIS0/IiB3aGVyZSA/IGlzIHNvbWV0aGluZyBvdGhlcgogICAgICAgICAgICAv\nLyB0aGFuIC0sIGR1bXAgd2hhdCB3ZSd2ZSBnb3R0ZW4gc28gZmFyCiAgICAg\nICAgICAgIGlmIChfbGFzdENoYXIzID09ICc8JyAmJiBfbGFzdENoYXIyID09\nICchJyAmJiBfbGFzdENoYXIgPT0gJy0nKSB7CiAgICAgICAgICAgICAgICBp\nZiAoYyA9PSAnLScpIHsKICAgICAgICAgICAgICAgICAgICBvdXQud3JpdGUo\nX2VuZGwpOwogICAgICAgICAgICAgICAgICAgIHdyaXRlU3BhY2VzKCk7CiAg\nICAgICAgICAgICAgICAgICAgb3V0LndyaXRlKCI8IS0tIik7CiAgICAgICAg\nICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIG91dC53cml0\nZSgiPCEtIik7CiAgICAgICAgICAgICAgICAgICAgb3V0LndyaXRlKGMpOwog\nICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIC8v\nIGlmIHdlJ3JlIGF0ICI8IS0iLCBrZWVwIG9uIG5vdCB3cml0aW5nIGRhdGEK\nICAgICAgICAgICAgZWxzZSBpZiAoIShfbGFzdENoYXIyID09ICc8JyAmJiBf\nbGFzdENoYXIgPT0gJyEnICYmIGMgPT0gJy0nKSkgewogICAgICAgICAgICAg\nICAgLy8gaWYganVzdCBlbmRlZCBhIHRhZyBhbmQgYWJvdXQgdG8gcHJpbnQg\ndGV4dCwgcHV0IG9uCiAgICAgICAgICAgICAgICAvLyBzZXBhcmF0ZSBsaW5l\nCiAgICAgICAgICAgICAgICBpZiAoX2xhc3RDaGFyID09ICc+JyAmJiBfbGFz\ndENoYXIyICE9ICc/JyAmJiBfbGFzdENoYXIyICE9ICchJykKICAgICAgICAg\nICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBvdXQud3JpdGUoX2VuZGwp\nOwogICAgICAgICAgICAgICAgICAgIHdyaXRlU3BhY2VzKCk7CiAgICAgICAg\nICAgICAgICB9CiAgICAgICAgICAgICAgICBvdXQud3JpdGUoYyk7CiAgICAg\nICAgICAgIH0KICAgICAgICB9CgogICAgICAgIF9sYXN0Q2hhcjMgPSBfbGFz\ndENoYXIyOwogICAgICAgIF9sYXN0Q2hhcjIgPSBfbGFzdENoYXI7CiAgICAg\nICAgX2xhc3RDaGFyID0gYzsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgd3Jp\ndGVTcGFjZXMoKSB0aHJvd3MgSU9FeGNlcHRpb24gewogICAgICAgIGZvciAo\naW50IGkgPSAwOyBpIDwgX2RlcHRoOyBpKyspCiAgICAgICAgICAgIG91dC53\ncml0ZSgiICAgICIpOwogICAgfQp9Cg==\n","encoding":"base64"}

