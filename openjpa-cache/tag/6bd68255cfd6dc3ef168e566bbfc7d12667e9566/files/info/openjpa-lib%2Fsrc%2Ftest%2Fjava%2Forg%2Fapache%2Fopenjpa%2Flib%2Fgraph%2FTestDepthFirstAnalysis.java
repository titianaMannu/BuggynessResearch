{"sha":"40c663cb1ef0c527685f2bf1af0195368c6496b2","node_id":"MDQ6QmxvYjIwNjM2NDo0MGM2NjNjYjFlZjBjNTI3Njg1ZjJiZjFhZjAxOTUzNjhjNjQ5NmIy","size":5758,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/40c663cb1ef0c527685f2bf1af0195368c6496b2","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLg0KICovDQpwYWNrYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5saWIu\nZ3JhcGg7DQoNCmltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbjsNCmltcG9y\ndCBqYXZhLnV0aWwuSXRlcmF0b3I7DQppbXBvcnQgamF2YS51dGlsLkxpc3Q7\nDQoNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnRlc3QuQWJzdHJh\nY3RUZXN0Q2FzZTsNCg0KLyoqDQogKiA8cD5UZXN0cyB0aGUge0BsaW5rIERl\ncHRoRmlyc3RBbmFseXNpc30gdHlwZS48L3A+DQogKg0KICogQGF1dGhvciBB\nYmUgV2hpdGUNCiAqLw0KcHVibGljIGNsYXNzIFRlc3REZXB0aEZpcnN0QW5h\nbHlzaXMNCiAgICBleHRlbmRzIEFic3RyYWN0VGVzdENhc2Ugew0KDQogICAg\ncHJpdmF0ZSBEZXB0aEZpcnN0QW5hbHlzaXMgX2RmYSA9IG51bGw7DQoNCiAg\nICBwdWJsaWMgdm9pZCBzZXRVcCgpIHsNCiAgICAgICAgc2V0VXBHcmFwaDEo\nKTsgICANCiAgICB9DQogICAgDQogICAgcHVibGljIHZvaWQgc2V0VXBHcmFw\naDEoKSB7DQogICAgICAgIEdyYXBoIGdyYXBoID0gbmV3IEdyYXBoKCk7DQog\nICAgICAgIE9iamVjdCBub2RlMSA9IG5ldyBPYmplY3QoKTsNCiAgICAgICAg\nT2JqZWN0IG5vZGUyID0gbmV3IE9iamVjdCgpOw0KICAgICAgICBPYmplY3Qg\nbm9kZTMgPSBuZXcgT2JqZWN0KCk7DQogICAgICAgIE9iamVjdCBub2RlNCA9\nIG5ldyBPYmplY3QoKTsNCiAgICAgICAgZ3JhcGguYWRkTm9kZShub2RlMSk7\nDQogICAgICAgIGdyYXBoLmFkZE5vZGUobm9kZTIpOw0KICAgICAgICBncmFw\naC5hZGROb2RlKG5vZGUzKTsNCiAgICAgICAgZ3JhcGguYWRkTm9kZShub2Rl\nNCk7DQogICAgICAgIGdyYXBoLmFkZEVkZ2UobmV3IEVkZ2Uobm9kZTEsIG5v\nZGUyLCB0cnVlKSk7DQogICAgICAgIGdyYXBoLmFkZEVkZ2UobmV3IEVkZ2Uo\nbm9kZTIsIG5vZGUzLCB0cnVlKSk7DQogICAgICAgIGdyYXBoLmFkZEVkZ2Uo\nbmV3IEVkZ2Uobm9kZTMsIG5vZGUxLCB0cnVlKSk7DQogICAgICAgIGdyYXBo\nLmFkZEVkZ2UobmV3IEVkZ2Uobm9kZTMsIG5vZGU0LCB0cnVlKSk7DQogICAg\nICAgIGdyYXBoLmFkZEVkZ2UobmV3IEVkZ2Uobm9kZTIsIG5vZGUyLCB0cnVl\nKSk7DQogICAgICAgIF9kZmEgPSBuZXcgRGVwdGhGaXJzdEFuYWx5c2lzKGdy\nYXBoKTsNCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCBzZXRVcEdyYXBoMigp\nIHsNCiAgICAgICAgR3JhcGggZ3JhcGggPSBuZXcgR3JhcGgoKTsNCiAgICAg\nICAgSW50ZWdlciBub2RlMSA9IG5ldyBJbnRlZ2VyKDEpOw0KICAgICAgICBJ\nbnRlZ2VyIG5vZGUyID0gbmV3IEludGVnZXIoMik7DQogICAgICAgIEludGVn\nZXIgbm9kZTMgPSBuZXcgSW50ZWdlcigzKTsNCiAgICAgICAgSW50ZWdlciBu\nb2RlNCA9IG5ldyBJbnRlZ2VyKDQpOw0KICAgICAgICBJbnRlZ2VyIG5vZGU1\nID0gbmV3IEludGVnZXIoNSk7DQogICAgICAgIGdyYXBoLmFkZE5vZGUobm9k\nZTIpOyAgLy8gaGFzIHRvIGJlIGZpcnN0IG5vZGUgZm9yIHRlc3RjYXNlDQog\nICAgICAgIGdyYXBoLmFkZE5vZGUobm9kZTUpOw0KICAgICAgICBncmFwaC5h\nZGROb2RlKG5vZGU0KTsNCiAgICAgICAgZ3JhcGguYWRkTm9kZShub2RlMyk7\nDQogICAgICAgIGdyYXBoLmFkZE5vZGUobm9kZTEpOw0KICAgICAgICBncmFw\naC5hZGRFZGdlKG5ldyBFZGdlKG5vZGU1LCBub2RlNCwgdHJ1ZSkpOw0KICAg\nICAgICBncmFwaC5hZGRFZGdlKG5ldyBFZGdlKG5vZGU0LCBub2RlMywgdHJ1\nZSkpOw0KICAgICAgICBncmFwaC5hZGRFZGdlKG5ldyBFZGdlKG5vZGUzLCBu\nb2RlMywgdHJ1ZSkpOw0KICAgICAgICBncmFwaC5hZGRFZGdlKG5ldyBFZGdl\nKG5vZGUzLCBub2RlMiwgdHJ1ZSkpOw0KICAgICAgICBncmFwaC5hZGRFZGdl\nKG5ldyBFZGdlKG5vZGUyLCBub2RlNSwgdHJ1ZSkpOw0KICAgICAgICBncmFw\naC5hZGRFZGdlKG5ldyBFZGdlKG5vZGUyLCBub2RlNCwgdHJ1ZSkpOw0KICAg\nICAgICBncmFwaC5hZGRFZGdlKG5ldyBFZGdlKG5vZGUxLCBub2RlNCwgdHJ1\nZSkpOw0KICAgICAgICBfZGZhID0gbmV3IERlcHRoRmlyc3RBbmFseXNpcyhn\ncmFwaCk7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgdGVzdE5vZGVTb3J0\naW5nKCkgew0KICAgICAgICBDb2xsZWN0aW9uIG5vZGVzID0gX2RmYS5nZXRT\nb3J0ZWROb2RlcygpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoNCwgbm9kZXMu\nc2l6ZSgpKTsNCg0KICAgICAgICBpbnQgdGltZSA9IDA7DQogICAgICAgIE9i\namVjdCBub2RlOw0KICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9IG5vZGVz\nLml0ZXJhdG9yKCk7IGl0ci5oYXNOZXh0KCk7KSB7DQogICAgICAgICAgICBu\nb2RlID0gaXRyLm5leHQoKTsNCiAgICAgICAgICAgIGFzc2VydFRydWUodGlt\nZSA8PSBfZGZhLmdldEZpbmlzaGVkVGltZShub2RlKSk7DQogICAgICAgICAg\nICB0aW1lID0gX2RmYS5nZXRGaW5pc2hlZFRpbWUobm9kZSk7DQogICAgICAg\nIH0NCiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0RWRnZVR5cGluZygp\nIHsNCiAgICAgICAgQ29sbGVjdGlvbiBlZGdlcyA9IF9kZmEuZ2V0RWRnZXMo\nRWRnZS5UWVBFX0JBQ0spOw0KICAgICAgICBhc3NlcnRFcXVhbHMoMiwgZWRn\nZXMuc2l6ZSgpKTsNCiAgICAgICAgSXRlcmF0b3IgaXRyID0gZWRnZXMuaXRl\ncmF0b3IoKTsNCiAgICAgICAgRWRnZSBlZGdlMCA9IChFZGdlKSBpdHIubmV4\ndCgpOw0KICAgICAgICBFZGdlIGVkZ2UxID0gKEVkZ2UpIGl0ci5uZXh0KCk7\nDQogICAgICAgIGFzc2VydFRydWUoKGVkZ2UwLmdldFRvKCkuZXF1YWxzKGVk\nZ2UwLmdldEZyb20oKSkpDQogICAgICAgICAgICAgICAgfHwgZWRnZTEuZ2V0\nVG8oKS5lcXVhbHMoZWRnZTEuZ2V0RnJvbSgpKSk7DQogICAgfQ0KDQogICAg\ncHVibGljIHZvaWQgdGVzdEJhY2tFZGdlcygpIHsNCiAgICAgICAgc2V0VXBH\ncmFwaDIoKTsNCiAgICAgICAgQ29sbGVjdGlvbiBlZGdlcyA9IF9kZmEuZ2V0\nRWRnZXMoRWRnZS5UWVBFX0JBQ0spOw0KICAgICAgICBhc3NlcnRFcXVhbHMo\nMiwgZWRnZXMuc2l6ZSgpKTsNCiAgICAgICAgSXRlcmF0b3IgaXRyID0gZWRn\nZXMuaXRlcmF0b3IoKTsNCiAgICAgICAgRWRnZSBlZGdlMCA9IChFZGdlKSBp\ndHIubmV4dCgpOw0KICAgICAgICBFZGdlIGVkZ2UxID0gKEVkZ2UpIGl0ci5u\nZXh0KCk7DQogICAgICAgIGlmIChlZGdlMC5nZXRUbygpLmVxdWFscyhlZGdl\nMC5nZXRGcm9tKCkpKSB7DQogICAgICAgICAgICBhc3NlcnRUcnVlKGVkZ2Uw\nLmdldEN5Y2xlKCkgIT0gbnVsbCAmJiBlZGdlMC5nZXRDeWNsZSgpLnNpemUo\nKSA9PSAxKTsNCiAgICAgICAgICAgIExpc3QgY3ljbGUgPSBlZGdlMS5nZXRD\neWNsZSgpOw0KICAgICAgICAgICAgYXNzZXJ0VHJ1ZShjeWNsZSAhPSBudWxs\nICYmIGN5Y2xlLnNpemUoKSA9PSA0KTsNCiAgICAgICAgICAgIGFzc2VydFRy\ndWUoKChFZGdlKWN5Y2xlLmdldCgwKSkuZ2V0RnJvbSgpLmVxdWFscygoKEVk\nZ2UpY3ljbGUuZ2V0KDMpKS5nZXRUbygpKSk7DQogICAgICAgIH0gZWxzZSBp\nZiAoZWRnZTEuZ2V0VG8oKS5lcXVhbHMoZWRnZTEuZ2V0RnJvbSgpKSkgew0K\nICAgICAgICAgICAgYXNzZXJ0VHJ1ZShlZGdlMS5nZXRDeWNsZSgpICE9IG51\nbGwgJiYgZWRnZTEuZ2V0Q3ljbGUoKS5zaXplKCkgPT0gMSk7ICAgICAgICAg\nICAgDQogICAgICAgICAgICBhc3NlcnRUcnVlKGVkZ2UxID09IGVkZ2UxLmdl\ndEN5Y2xlKCkpOw0KICAgICAgICAgICAgTGlzdCBjeWNsZSA9IGVkZ2UwLmdl\ndEN5Y2xlKCk7DQogICAgICAgICAgICBhc3NlcnRUcnVlKGN5Y2xlICE9IG51\nbGwgJiYgY3ljbGUuc2l6ZSgpID09IDQpOw0KICAgICAgICAgICAgYXNzZXJ0\nVHJ1ZSgoKEVkZ2UpY3ljbGUuZ2V0KDApKS5nZXRGcm9tKCkuZXF1YWxzKCgo\nRWRnZSljeWNsZS5nZXQoMykpLmdldFRvKCkpKTsNCiAgICAgICAgfSBlbHNl\nIHsNCiAgICAgICAgICAgIC8vIHNob3VsZCBub3QgaGFwcGVuDQogICAgICAg\nICAgICBhc3NlcnRGYWxzZSh0cnVlKTsNCiAgICAgICAgfQ0KICAgIH0NCiAg\nICANCiAgICBwdWJsaWMgdm9pZCB0ZXN0Rm9yd2FyZEVkZ2VzKCkgew0KICAg\nICAgICBzZXRVcEdyYXBoMigpOw0KICAgICAgICBDb2xsZWN0aW9uIGVkZ2Vz\nID0gX2RmYS5nZXRFZGdlcyhFZGdlLlRZUEVfRk9SV0FSRCk7DQogICAgICAg\nIGFzc2VydEVxdWFscygyLCBlZGdlcy5zaXplKCkpOw0KICAgICAgICBJdGVy\nYXRvciBpdHIgPSBlZGdlcy5pdGVyYXRvcigpOw0KICAgICAgICBFZGdlIGVk\nZ2UwID0gKEVkZ2UpIGl0ci5uZXh0KCk7DQogICAgICAgIEVkZ2UgZWRnZTEg\nPSAoRWRnZSkgaXRyLm5leHQoKTsNCiAgICAgICAgaWYgKGVkZ2UwLmdldEN5\nY2xlKCkgPT0gbnVsbCkgew0KICAgICAgICAgICAgTGlzdCBjeWNsZSA9IGVk\nZ2UxLmdldEN5Y2xlKCk7DQogICAgICAgICAgICBhc3NlcnRUcnVlKGN5Y2xl\nICE9IG51bGwgJiYgY3ljbGUuc2l6ZSgpID09IDMpOw0KICAgICAgICAgICAg\nYXNzZXJ0VHJ1ZSgoKEVkZ2UpY3ljbGUuZ2V0KDApKS5nZXRGcm9tKCkuZXF1\nYWxzKCgoRWRnZSljeWNsZS5nZXQoMikpLmdldFRvKCkpKTsNCiAgICAgICAg\nfSBlbHNlIGlmIChlZGdlMS5nZXRDeWNsZSgpID09IG51bGwpIHsNCiAgICAg\nICAgICAgIExpc3QgY3ljbGUgPSBlZGdlMC5nZXRDeWNsZSgpOw0KICAgICAg\nICAgICAgYXNzZXJ0VHJ1ZShjeWNsZSAhPSBudWxsICYmIGN5Y2xlLnNpemUo\nKSA9PSAzKTsNCiAgICAgICAgICAgIGFzc2VydFRydWUoKChFZGdlKWN5Y2xl\nLmdldCgwKSkuZ2V0RnJvbSgpLmVxdWFscygoKEVkZ2UpY3ljbGUuZ2V0KDIp\nKS5nZXRUbygpKSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAv\nLyBzaG91bGQgbm90IGhhcHBlbg0KICAgICAgICAgICAgYXNzZXJ0RmFsc2Uo\ndHJ1ZSk7DQogICAgICAgIH0NCiAgICB9DQogICAgDQogICAgcHVibGljIHN0\nYXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykgew0KICAgICAgICBtYWlu\nKFRlc3REZXB0aEZpcnN0QW5hbHlzaXMuY2xhc3MpOw0KICAgIH0NCn0NCg==\n","encoding":"base64"}

