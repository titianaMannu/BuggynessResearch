{"sha":"884acfeeb1d3b029e3612a7515bde34305132fb0","node_id":"MDQ6QmxvYjIwNjM2NDo4ODRhY2ZlZWIxZDNiMDI5ZTM2MTJhNzUxNWJkZTM0MzA1MTMyZmIw","size":6158,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/884acfeeb1d3b029e3612a7515bde34305132fb0","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZTsKCmltcG9ydCBz\nZXJwLnV0aWwuU3RyaW5nczsKCmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKaW1w\nb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuSXRl\ncmF0b3I7CmltcG9ydCBqYXZhLnV0aWwuRW51bVNldDsKaW1wb3J0IGphdmEu\nbGFuZy5hbm5vdGF0aW9uLkFubm90YXRpb247CgppbXBvcnQgb3JnLmFwYWNo\nZS5jb21tb25zLmxhbmcuU3RyaW5nVXRpbHM7CgovKioKICogSGVscGVyIGNs\nYXNzIHRvIHN0cmluZ2lmeSBhbm5vdGF0aW9uIGRlY2xhcmF0aW9ucy4KICoK\nICogQGF1dGhvciBHb2toYW4gRXJndWwKICogQHNpbmNlIDEuMC4wCiAqIEBu\nb2phdmFkb2MKICovCnB1YmxpYyBjbGFzcyBBbm5vdGF0aW9uQnVpbGRlciB7\nCgogICAgcHJpdmF0ZSBDbGFzczw/IGV4dGVuZHMgQW5ub3RhdGlvbj4gdHlw\nZTsKICAgIHByaXZhdGUgTGlzdDxBbm5vdGF0aW9uRW50cnk+IGNvbXBvbmVu\ndHMgPQogICAgICAgIG5ldyBBcnJheUxpc3Q8QW5ub3RhdGlvbkVudHJ5Pigp\nOwoKICAgIHByb3RlY3RlZCBBbm5vdGF0aW9uQnVpbGRlcihDbGFzczw/IGV4\ndGVuZHMgQW5ub3RhdGlvbj4gdHlwZSkgewogICAgICAgIHRoaXMudHlwZSA9\nIHR5cGU7CiAgICB9CgogICAgcHVibGljIENsYXNzPD8gZXh0ZW5kcyBBbm5v\ndGF0aW9uPiBnZXRUeXBlKCkgewogICAgICAgIHJldHVybiB0aGlzLnR5cGU7\nCiAgICB9CgogICAgcHVibGljIEFubm90YXRpb25CdWlsZGVyIGFkZChTdHJp\nbmcga2V5LCBTdHJpbmcgdmFsKSB7CiAgICAgICAgcmV0dXJuIGRvQWRkKGtl\neSwgdmFsKTsKICAgIH0KCiAgICBwdWJsaWMgQW5ub3RhdGlvbkJ1aWxkZXIg\nYWRkKFN0cmluZyBrZXksIGJvb2xlYW4gdmFsKSB7CiAgICAgICAgcmV0dXJu\nIGRvQWRkKGtleSwgdmFsKTsKICAgIH0KCiAgICBwdWJsaWMgQW5ub3RhdGlv\nbkJ1aWxkZXIgYWRkKFN0cmluZyBrZXksIGludCB2YWwpIHsKICAgICAgICBy\nZXR1cm4gZG9BZGQoa2V5LCB2YWwpOwogICAgfQoKICAgIHB1YmxpYyBBbm5v\ndGF0aW9uQnVpbGRlciBhZGQoU3RyaW5nIGtleSwgQ2xhc3MgdmFsKSB7CiAg\nICAgICAgcmV0dXJuIGRvQWRkKGtleSwgdmFsKTsKICAgIH0KCiAgICBwdWJs\naWMgQW5ub3RhdGlvbkJ1aWxkZXIgYWRkKFN0cmluZyBrZXksIEVudW1TZXQg\ndmFsKSB7CiAgICAgICAgcmV0dXJuIGRvQWRkKGtleSwgdmFsKTsKICAgIH0K\nCiAgICBwdWJsaWMgQW5ub3RhdGlvbkJ1aWxkZXIgYWRkKFN0cmluZyBrZXks\nIEVudW0gdmFsKSB7CiAgICAgICAgcmV0dXJuIGRvQWRkKGtleSwgdmFsKTsK\nICAgIH0KCiAgICBAU3VwcHJlc3NXYXJuaW5ncygidW5jaGVja2VkIikKICAg\nIHB1YmxpYyBBbm5vdGF0aW9uQnVpbGRlciBhZGQoU3RyaW5nIGtleSwgQW5u\nb3RhdGlvbkJ1aWxkZXIgdmFsKSB7CiAgICAgICAgaWYgKG51bGwgPT0gdmFs\nKQogICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICBBbm5vdGF0aW9u\nRW50cnkgYWUgPSBmaW5kKGtleSk7CiAgICAgICAgaWYgKG51bGwgPT0gYWUp\nIHsKICAgICAgICAgICAgZG9BZGQoa2V5LCB2YWwpOwogICAgICAgIH0gZWxz\nZSB7CiAgICAgICAgICAgIExpc3Q8QW5ub3RhdGlvbkJ1aWxkZXI+IGxpc3Q7\nCiAgICAgICAgICAgIGlmIChhZS52YWx1ZSBpbnN0YW5jZW9mIExpc3QpIHsK\nICAgICAgICAgICAgICAgIGxpc3QgPSAoTGlzdDxBbm5vdGF0aW9uQnVpbGRl\ncj4pIGFlLnZhbHVlOwogICAgICAgICAgICB9IGVsc2UgaWYgKGFlLnZhbHVl\nIGluc3RhbmNlb2YgQW5ub3RhdGlvbkJ1aWxkZXIpIHsKICAgICAgICAgICAg\nICAgIGxpc3QgPSBuZXcgQXJyYXlMaXN0PEFubm90YXRpb25CdWlsZGVyPiAo\nKTsKICAgICAgICAgICAgICAgIGxpc3QuYWRkKChBbm5vdGF0aW9uQnVpbGRl\ncikgYWUudmFsdWUpOwogICAgICAgICAgICAgICAgYWUudmFsdWUgPSBsaXN0\nOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhyb3cg\nbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigKICAgICAgICAgICAgICAg\nICAgICAiVW5leHBlY3RlZCB0eXBlOiAiICsgYWUudmFsdWUpOwogICAgICAg\nICAgICB9CiAgICAgICAgICAgIGxpc3QuYWRkKHZhbCk7CiAgICAgICAgfQog\nICAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFu\nIGhhc0NvbXBvbmVudHMoKSB7CiAgICAgICAgcmV0dXJuIGNvbXBvbmVudHMu\nc2l6ZSgpID4gMDsKICAgIH0KCiAgICBwcml2YXRlIEFubm90YXRpb25CdWls\nZGVyIGRvQWRkIChTdHJpbmcga2V5LCBPYmplY3QgdmFsKSB7CiAgICAgICAg\naWYgKG51bGwgIT0gdmFsKQogICAgICAgICAgICBjb21wb25lbnRzLmFkZChu\nZXcgQW5ub3RhdGlvbkVudHJ5KGtleSwgdmFsKSk7CiAgICAgICAgcmV0dXJu\nIHRoaXM7ICAgICAgICAKICAgIH0KCiAgICBwcml2YXRlIEFubm90YXRpb25F\nbnRyeSBmaW5kKFN0cmluZyBrZXkpIHsKICAgICAgICBmb3IoQW5ub3RhdGlv\nbkVudHJ5IGFlOiBjb21wb25lbnRzKSB7CiAgICAgICAgICAgIC8vIG51bGwg\na2V5IHJlZmVyZW5jZXMgY29uc2lkZXJlZCBlcXVhbAogICAgICAgICAgICBp\nZiAoU3RyaW5nVXRpbHMuZXF1YWxzKGFlLmtleSwga2V5KSkKICAgICAgICAg\nICAgICAgIHJldHVybiBhZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG51\nbGw7CiAgICB9CgogICAgc3RhdGljIFN0cmluZyBlbnVtVG9TdHJpbmcoRW51\nbSBlKSB7CiAgICAgICAgU3RyaW5nQnVpbGRlciBzYiA9IG5ldyBTdHJpbmdC\ndWlsZGVyKCk7CiAgICAgICAgc2IuYXBwZW5kKFN0cmluZ3MuZ2V0Q2xhc3NO\nYW1lKGUuZ2V0Q2xhc3MoKSkpLgogICAgICAgICAgICBhcHBlbmQoIi4iKS5h\ncHBlbmQoZSk7CiAgICAgICAgcmV0dXJuIHNiLnRvU3RyaW5nKCk7CiAgICB9\nCgogICAgc3RhdGljIFN0cmluZyBlbnVtU2V0VG9TdHJpbmcoRW51bVNldCBz\nZXQpIHsKICAgICAgICBTdHJpbmdCdWlsZGVyIHNiID0gbmV3IFN0cmluZ0J1\naWxkZXIoKTsKICAgICAgICBmb3IgKEl0ZXJhdG9yIGkgPSBzZXQuaXRlcmF0\nb3IoKTsgaS5oYXNOZXh0KCk7KSB7CiAgICAgICAgICAgIE9iamVjdCBlID0g\nIGkubmV4dCgpOwogICAgICAgICAgICBzYi5hcHBlbmQoU3RyaW5ncy5nZXRD\nbGFzc05hbWUoZS5nZXRDbGFzcygpKSkuCiAgICAgICAgICAgICAgICBhcHBl\nbmQoIi4iKS5hcHBlbmQoZSk7CiAgICAgICAgICAgIGlmIChpLmhhc05leHQo\nKSkKICAgICAgICAgICAgICAgIHNiLmFwcGVuZCgiLCAiKTsKICAgICAgICB9\nCiAgICAgICAgcmV0dXJuIHNiLnRvU3RyaW5nKCk7CiAgICB9CgogICAgcHJv\ndGVjdGVkIHZvaWQgdG9TdHJpbmcoU3RyaW5nQnVpbGRlciBzYikgewogICAg\nICAgIHNiLmFwcGVuZCgiQCIpLmFwcGVuZChTdHJpbmdzLmdldENsYXNzTmFt\nZSh0eXBlKSk7CiAgICAgICAgaWYgKGNvbXBvbmVudHMuc2l6ZSgpID09IDAp\nCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBzYi5hcHBlbmQoIigiKTsK\nICAgICAgICBmb3IgKEl0ZXJhdG9yPEFubm90YXRpb25FbnRyeT4gaSA9IGNv\nbXBvbmVudHMuaXRlcmF0b3IoKTsgaS5oYXNOZXh0KCk7KSAKICAgICAgICB7\nCiAgICAgICAgICAgIEFubm90YXRpb25FbnRyeSBlID0gaS5uZXh0KCk7CiAg\nICAgICAgICAgIGUudG9TdHJpbmcoc2IpOwogICAgICAgICAgICBpZiAoaS5o\nYXNOZXh0KCkpCiAgICAgICAgICAgICAgICBzYi5hcHBlbmQoIiwgIik7CiAg\nICAgICAgfQogICAgICAgIHNiLmFwcGVuZCgiKSIpOyAgICAgICAgCiAgICB9\nCgogICAgcHVibGljIFN0cmluZyB0b1N0cmluZygpIHsKICAgICAgICBTdHJp\nbmdCdWlsZGVyIHNiID0gbmV3IFN0cmluZ0J1aWxkZXIoKTsKICAgICAgICB0\nb1N0cmluZyhzYik7CiAgICAgICAgcmV0dXJuIHNiLnRvU3RyaW5nKCk7CiAg\nICB9CgogICAgY2xhc3MgQW5ub3RhdGlvbkVudHJ5IHsKCiAgICAgICAgU3Ry\naW5nIGtleTsKICAgICAgICBPYmplY3QgdmFsdWU7CgogICAgICAgIEFubm90\nYXRpb25FbnRyeShTdHJpbmcga2V5LCBPYmplY3QgdmFsdWUpIHsKICAgICAg\nICAgICAgdGhpcy5rZXkgPSBrZXk7CiAgICAgICAgICAgIHRoaXMudmFsdWUg\nPSB2YWx1ZTsKICAgICAgICB9CgogICAgICAgIEBTdXBwcmVzc1dhcm5pbmdz\nKCJ1bmNoZWNrZWQiKQogICAgICAgIHZvaWQgdG9TdHJpbmcoU3RyaW5nQnVp\nbGRlciBzYikgewogICAgICAgICAgICBpZiAobnVsbCAhPSBrZXkpCiAgICAg\nICAgICAgICAgICBzYi5hcHBlbmQoa2V5KS5hcHBlbmQoIj0iKTsKCiAgICAg\nICAgICAgIExpc3QuY2xhc3MuZ2V0VHlwZVBhcmFtZXRlcnMoKTsKICAgICAg\nICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgTGlzdCkgewogICAgICAgICAg\nICAgICAgc2IuYXBwZW5kKCJ7Iik7CiAgICAgICAgICAgICAgICBMaXN0PEFu\nbm90YXRpb25CdWlsZGVyPiBsID0gKExpc3Q8QW5ub3RhdGlvbkJ1aWxkZXI+\nKSB2YWx1ZTsKICAgICAgICAgICAgICAgIGZvciAoSXRlcmF0b3I8QW5ub3Rh\ndGlvbkJ1aWxkZXI+IGkgPSBsLml0ZXJhdG9yKCk7IGkuaGFzTmV4dCgpOykg\newogICAgICAgICAgICAgICAgICAgIEFubm90YXRpb25CdWlsZGVyIGFiID0g\nIGkubmV4dCgpOwogICAgICAgICAgICAgICAgICAgIHNiLmFwcGVuZChhYi50\nb1N0cmluZygpKTsKICAgICAgICAgICAgICAgICAgICBpZiAoaS5oYXNOZXh0\nKCkpCiAgICAgICAgICAgICAgICAgICAgICAgIHNiLmFwcGVuZCgiLCAiKTsK\nICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHNiLmFwcGVuZCgi\nfSIpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2Yg\nQ2xhc3MpIHsKICAgICAgICAgICAgICAgIFN0cmluZyBjbHMgPSAoKENsYXNz\nKSB2YWx1ZSkuZ2V0TmFtZSgpLnJlcGxhY2UoJyQnLCAnLicpOwogICAgICAg\nICAgICAgICAgc2IuYXBwZW5kKGNscykuYXBwZW5kKCIuY2xhc3MiKTsKICAg\nICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFN0cmluZykg\newogICAgICAgICAgICAgICAgc2IuYXBwZW5kKCciJykuYXBwZW5kKHZhbHVl\nKS5hcHBlbmQoJyInKTsKICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSBp\nbnN0YW5jZW9mIEVudW0pIHsKICAgICAgICAgICAgICAgIHNiLmFwcGVuZChB\nbm5vdGF0aW9uQnVpbGRlci5lbnVtVG9TdHJpbmcoKEVudW0pIHZhbHVlKSk7\nCiAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBFbnVt\nU2V0KSB7CiAgICAgICAgICAgICAgICBzYi5hcHBlbmQoQW5ub3RhdGlvbkJ1\naWxkZXIuZW51bVNldFRvU3RyaW5nKChFbnVtU2V0KSB2YWx1ZSkpOwogICAg\nICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgc2IuYXBwZW5kKHZh\nbHVlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICB9Cn0=\n","encoding":"base64"}

