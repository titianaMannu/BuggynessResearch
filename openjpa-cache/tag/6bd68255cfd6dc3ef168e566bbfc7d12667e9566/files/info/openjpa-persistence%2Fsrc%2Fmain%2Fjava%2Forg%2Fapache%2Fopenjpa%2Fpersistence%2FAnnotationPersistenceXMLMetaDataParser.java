{"sha":"9ec4cf29ed8894f688a157862261468093ba0276","node_id":"MDQ6QmxvYjIwNjM2NDo5ZWM0Y2YyOWVkODg5NGY2ODhhMTU3ODYyMjYxNDY4MDkzYmEwMjc2","size":11025,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/9ec4cf29ed8894f688a157862261468093ba0276","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2U7CgppbXBv\ncnQgamF2YS5sYW5nLnJlZmxlY3QuQW5ub3RhdGVkRWxlbWVudDsKaW1wb3J0\nIGphdmEubGFuZy5yZWZsZWN0LkZpZWxkOwppbXBvcnQgamF2YS5sYW5nLnJl\nZmxlY3QuTWVtYmVyOwppbXBvcnQgamF2YS5sYW5nLnJlZmxlY3QuTWV0aG9k\nOwoKaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5sYW5nLlN0cmluZ1V0aWxz\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmNvbmYuT3BlbkpQQUNvbmZp\nZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmxvZy5M\nb2c7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxp\nemVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuRGVsZWdhdGlu\nZ01ldGFEYXRhRmFjdG9yeTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5t\nZXRhLkZpZWxkTWV0YURhdGE7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nbWV0YS5NZXRhRGF0YUZhY3Rvcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEubWV0YS5NZXRhRGF0YVJlcG9zaXRvcnk7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEubWV0YS5YTUxGaWVsZE1ldGFEYXRhOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLm1ldGEuWE1MTWV0YURhdGE7CgovKioKICogSkFYQiB4\nbWwgYW5ub3RhdGlvbiBtZXRhZGF0YSBwYXJzZXIuCiAqCiAqIEBhdXRob3Ig\nQ2F0YWxpbmEgV2VpCiAqIEBzaW5jZSAxLjAuMAogKiBAbm9qYXZhZG9jCiAq\nLwpwdWJsaWMgY2xhc3MgQW5ub3RhdGlvblBlcnNpc3RlbmNlWE1MTWV0YURh\ndGFQYXJzZXIgewoKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvY2FsaXpl\nciBfbG9jID0gTG9jYWxpemVyLmZvclBhY2thZ2UKICAgICAgICAoQW5ub3Rh\ndGlvblBlcnNpc3RlbmNlWE1MTWV0YURhdGFQYXJzZXIuY2xhc3MpOwoKICAg\nIHByaXZhdGUgZmluYWwgT3BlbkpQQUNvbmZpZ3VyYXRpb24gX2NvbmY7CiAg\nICBwcml2YXRlIGZpbmFsIExvZyBfbG9nOwogICAgcHJpdmF0ZSBNZXRhRGF0\nYVJlcG9zaXRvcnkgX3JlcG9zID0gbnVsbDsKCiAgICAvLyB0aGUgY2xhc3Mg\nd2Ugd2VyZSBpbnZva2VkIHRvIHBhcnNlCiAgICBwcml2YXRlIENsYXNzIF9j\nbHMgPSBudWxsOwogICAgcHJpdmF0ZSBGaWVsZE1ldGFEYXRhIF9mbWQgPSBu\ndWxsOwogICAgCiAgICAvLyBjYWNoZSB0aGUgSkFYQiBYbWwuLi4gY2xhc3Nl\ncyBpZiB0aGV5IGFyZSBwcmVzZW50IHNvIHdlIGRvIG5vdAogICAgLy8gaGF2\nZSBhIGhhcmQtd2lyZWQgZGVwZW5kZW5jeSBvbiBKQVhCIGhlcmUKICAgIHBy\naXZhdGUgQ2xhc3MgeG1sVHlwZUNsYXNzID0gbnVsbDsKICAgIHByaXZhdGUg\nQ2xhc3MgeG1sUm9vdEVsZW1lbnRDbGFzcyA9IG51bGw7CiAgICBwcml2YXRl\nIENsYXNzIHhtbEFjY2Vzc29yVHlwZUNsYXNzID0gbnVsbDsKICAgIHByaXZh\ndGUgQ2xhc3MgeG1sQXR0cmlidXRlQ2xhc3MgPSBudWxsOwogICAgcHJpdmF0\nZSBDbGFzcyB4bWxFbGVtZW50Q2xhc3MgPSBudWxsOwogICAgcHJpdmF0ZSBN\nZXRob2QgeG1sVHlwZU5hbWUgPSBudWxsOwogICAgcHJpdmF0ZSBNZXRob2Qg\neG1sVHlwZU5hbWVzcGFjZSA9IG51bGw7CiAgICBwcml2YXRlIE1ldGhvZCB4\nbWxSb290TmFtZSA9IG51bGw7CiAgICBwcml2YXRlIE1ldGhvZCB4bWxSb290\nTmFtZXNwYWNlID0gbnVsbDsKICAgIHByaXZhdGUgTWV0aG9kIHhtbEF0dHJp\nYnV0ZU5hbWUgPSBudWxsOwogICAgcHJpdmF0ZSBNZXRob2QgeG1sQXR0cmli\ndXRlTmFtZXNwYWNlID0gbnVsbDsKICAgIHByaXZhdGUgTWV0aG9kIHhtbEVs\nZW1lbnROYW1lID0gbnVsbDsKICAgIHByaXZhdGUgTWV0aG9kIHhtbEVsZW1l\nbnROYW1lc3BhY2UgPSBudWxsOwogICAgcHJpdmF0ZSBNZXRob2QgeG1sQWNj\nZXNzb3JWYWx1ZSA9IG51bGw7CgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3Rv\ncjsgc3VwcGx5IGNvbmZpZ3VyYXRpb24uCiAgICAgKi8KICAgIHB1YmxpYyBB\nbm5vdGF0aW9uUGVyc2lzdGVuY2VYTUxNZXRhRGF0YVBhcnNlcihPcGVuSlBB\nQ29uZmlndXJhdGlvbiBjb25mKSB7CiAgICAgICAgX2NvbmYgPSBjb25mOwog\nICAgICAgIF9sb2cgPSBjb25mLmdldExvZyhPcGVuSlBBQ29uZmlndXJhdGlv\nbi5MT0dfTUVUQURBVEEpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHht\nbFR5cGVDbGFzcyA9IENsYXNzLmZvck5hbWUoCiAgICAgICAgICAgICAgICAi\namF2YXgueG1sLmJpbmQuYW5ub3RhdGlvbi5YbWxUeXBlIik7CiAgICAgICAg\nICAgIHhtbFR5cGVOYW1lID0geG1sVHlwZUNsYXNzLmdldE1ldGhvZCgibmFt\nZSIsIG51bGwpOwogICAgICAgICAgICB4bWxUeXBlTmFtZXNwYWNlID0geG1s\nVHlwZUNsYXNzLmdldE1ldGhvZCgibmFtZXNwYWNlIiwgbnVsbCk7CiAgICAg\nICAgICAgIHhtbFJvb3RFbGVtZW50Q2xhc3MgPSBDbGFzcy5mb3JOYW1lKAog\nICAgICAgICAgICAgICAgImphdmF4LnhtbC5iaW5kLmFubm90YXRpb24uWG1s\nUm9vdEVsZW1lbnQiKTsKICAgICAgICAgICAgeG1sUm9vdE5hbWUgPSB4bWxS\nb290RWxlbWVudENsYXNzLmdldE1ldGhvZCgibmFtZSIsIG51bGwpOwogICAg\nICAgICAgICB4bWxSb290TmFtZXNwYWNlID0geG1sUm9vdEVsZW1lbnRDbGFz\ncy5nZXRNZXRob2QoIm5hbWVzcGFjZSIsIG51bGwpOwogICAgICAgICAgICB4\nbWxBY2Nlc3NvclR5cGVDbGFzcyA9IENsYXNzLmZvck5hbWUoCiAgICAgICAg\nICAgICAgICAiamF2YXgueG1sLmJpbmQuYW5ub3RhdGlvbi5YbWxBY2Nlc3Nv\nclR5cGUiKTsKICAgICAgICAgICAgeG1sQWNjZXNzb3JWYWx1ZSA9IHhtbEFj\nY2Vzc29yVHlwZUNsYXNzLmdldE1ldGhvZCgidmFsdWUiLCBudWxsKTsKICAg\nICAgICAgICAgeG1sQXR0cmlidXRlQ2xhc3MgPSBDbGFzcy5mb3JOYW1lKAog\nICAgICAgICAgICAgICAgImphdmF4LnhtbC5iaW5kLmFubm90YXRpb24uWG1s\nQXR0cmlidXRlIik7CiAgICAgICAgICAgIHhtbEF0dHJpYnV0ZU5hbWUgPSB4\nbWxBdHRyaWJ1dGVDbGFzcy5nZXRNZXRob2QoIm5hbWUiLCBudWxsKTsKICAg\nICAgICAgICAgeG1sQXR0cmlidXRlTmFtZXNwYWNlID0geG1sQXR0cmlidXRl\nQ2xhc3MuZ2V0TWV0aG9kKCJuYW1lc3BhY2UiCiAgICAgICAgICAgICAgICAs\nIG51bGwpOwogICAgICAgICAgICB4bWxFbGVtZW50Q2xhc3MgPSBDbGFzcy5m\nb3JOYW1lKAogICAgICAgICAgICAgICAgImphdmF4LnhtbC5iaW5kLmFubm90\nYXRpb24uWG1sRWxlbWVudCIpOwogICAgICAgICAgICB4bWxFbGVtZW50TmFt\nZSA9IHhtbEVsZW1lbnRDbGFzcy5nZXRNZXRob2QoIm5hbWUiLCBudWxsKTsK\nICAgICAgICAgICAgeG1sRWxlbWVudE5hbWVzcGFjZSA9IHhtbEVsZW1lbnRD\nbGFzcy5nZXRNZXRob2QoIm5hbWVzcGFjZSIsIG51bGwpOwogICAgICAgIH0g\nY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgfQogICAgfQoKICAgIC8q\nKgogICAgICogQ29uZmlndXJhdGlvbiBzdXBwbGllZCBvbiBjb25zdHJ1Y3Rp\nb24uCiAgICAgKi8KICAgIHB1YmxpYyBPcGVuSlBBQ29uZmlndXJhdGlvbiBn\nZXRDb25maWd1cmF0aW9uKCkgewogICAgICAgIHJldHVybiBfY29uZjsKICAg\nIH0KCiAgICAvKioKICAgICAqIE1ldGFkYXRhIGxvZy4KICAgICAqLwogICAg\ncHVibGljIExvZyBnZXRMb2coKSB7CiAgICAgICAgcmV0dXJuIF9sb2c7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSByZXBvc2l0b3J5IGZv\nciB0aGlzIHBhcnNlci4gSWYgbm9uZSBoYXMgYmVlbiBzZXQsCiAgICAgKiBj\ncmVhdGUgYSBuZXcgcmVwb3NpdG9yeSBhbmQgc2V0cyBpdC4KICAgICAqLwog\nICAgcHVibGljIE1ldGFEYXRhUmVwb3NpdG9yeSBnZXRSZXBvc2l0b3J5KCkg\newogICAgICAgIGlmIChfcmVwb3MgPT0gbnVsbCkgewogICAgICAgICAgICBN\nZXRhRGF0YVJlcG9zaXRvcnkgcmVwb3MgPSBfY29uZi5uZXdNZXRhRGF0YVJl\ncG9zaXRvcnlJbnN0YW5jZSgpOwogICAgICAgICAgICBNZXRhRGF0YUZhY3Rv\ncnkgbWRmID0gcmVwb3MuZ2V0TWV0YURhdGFGYWN0b3J5KCk7CiAgICAgICAg\nICAgIGlmIChtZGYgaW5zdGFuY2VvZiBEZWxlZ2F0aW5nTWV0YURhdGFGYWN0\nb3J5KQogICAgICAgICAgICAgICAgbWRmID0gKChEZWxlZ2F0aW5nTWV0YURh\ndGFGYWN0b3J5KSBtZGYpLmdldElubmVybW9zdERlbGVnYXRlKCk7CiAgICAg\nICAgICAgIGlmIChtZGYgaW5zdGFuY2VvZiBQZXJzaXN0ZW5jZU1ldGFEYXRh\nRmFjdG9yeSkKICAgICAgICAgICAgICAgICgoUGVyc2lzdGVuY2VNZXRhRGF0\nYUZhY3RvcnkpIG1kZikuc2V0WE1MQW5ub3RhdGlvblBhcnNlcih0aGlzKTsK\nICAgICAgICAgICAgX3JlcG9zID0gcmVwb3M7CiAgICAgICAgfQogICAgICAg\nIHJldHVybiBfcmVwb3M7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQgdGhl\nIG1ldGFkYXRhIHJlcG9zaXRvcnkgZm9yIHRoaXMgcGFyc2VyLgogICAgICov\nCiAgICBwdWJsaWMgdm9pZCBzZXRSZXBvc2l0b3J5KE1ldGFEYXRhUmVwb3Np\ndG9yeSByZXBvcykgewogICAgICAgIF9yZXBvcyA9IHJlcG9zOwogICAgfQoK\nICAgIC8qKgogICAgICogQ2xlYXIgY2FjaGVzLgogICAgICovCiAgICBwdWJs\naWMgdm9pZCBjbGVhcigpIHsKICAgICAgICBfY2xzID0gbnVsbDsKICAgICAg\nICBfZm1kID0gbnVsbDsKICAgIH0KCiAgICAvKioKICAgICAqIFBhcnNlIHBl\ncnNpc3RlbmNlIG1ldGFkYXRhIGZvciB0aGUgZ2l2ZW4gZmllbGQgbWV0YWRh\ndGEuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHBhcnNlKEZpZWxkTWV0YURh\ndGEgZm1kKSB7CiAgICAgICAgX2ZtZCA9IGZtZDsKICAgICAgICBfY2xzID0g\nZm1kLmdldERlY2xhcmVkVHlwZSgpOwogICAgICAgIGlmIChfbG9nLmlzVHJh\nY2VFbmFibGVkKCkpCiAgICAgICAgICAgIF9sb2cudHJhY2UoX2xvYy5nZXQo\nInBhcnNlLWNsYXNzIiwgX2Nscy5nZXROYW1lKCkpKTsKCiAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgcGFyc2VYTUxDbGFzc0Fubm90YXRpb25zKCk7CiAg\nICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgX2NscyA9IG51bGw7CiAg\nICAgICAgICAgIF9mbWQgPSBudWxsOwogICAgICAgIH0KICAgIH0KCiAgICAv\nKioKICAgICAqIFJlYWQgYW5ub3RhdGlvbnMgZm9yIHRoZSBjdXJyZW50IHR5\ncGUuCiAgICAgKi8KICAgIHByaXZhdGUgWE1MTWV0YURhdGEgcGFyc2VYTUxD\nbGFzc0Fubm90YXRpb25zKCkgewogICAgICAgIC8vIGNoZWNrIGltbWVkaWF0\nZWx5IHdoZXRoZXIgdGhlIGNsYXNzIGhhcyBKQVhCIFhNTCBhbm5vdGF0aW9u\ncwogICAgICAgIGlmIChfY2xzID09IG51bGwgfHwgeG1sVHlwZUNsYXNzID09\nIG51bGwKICAgICAgICAgICAgfHwgIShfY2xzLmlzQW5ub3RhdGlvblByZXNl\nbnQoeG1sVHlwZUNsYXNzKQogICAgICAgICAgICAgICAgJiYgX2Nscy5pc0Fu\nbm90YXRpb25QcmVzZW50KHhtbFJvb3RFbGVtZW50Q2xhc3MpKSkKICAgICAg\nICAgICAgcmV0dXJuIG51bGw7CgogICAgICAgIC8vIGZpbmQgLyBjcmVhdGUg\nbWV0YWRhdGEKICAgICAgICBYTUxNZXRhRGF0YSBtZXRhID0gZ2V0WE1MTWV0\nYURhdGEoKTsKICAgICAgICAKICAgICAgICByZXR1cm4gbWV0YTsKICAgIH0K\nCiAgICAvKioKICAgICAqIEZpbmQgb3IgY3JlYXRlIHhtbCBtZXRhZGF0YSBm\nb3IgdGhlIGN1cnJlbnQgdHlwZS4gCiAgICAgKi8KICAgIHByaXZhdGUgc3lu\nY2hyb25pemVkIFhNTE1ldGFEYXRhIGdldFhNTE1ldGFEYXRhKCkgewogICAg\nICAgIFhNTE1ldGFEYXRhIG1ldGEgPSBnZXRSZXBvc2l0b3J5KCkuZ2V0Q2Fj\naGVkWE1MTWV0YURhdGEoX2Nscyk7CiAgICAgICAgaWYgKG1ldGEgPT0gbnVs\nbCkgewogICAgICAgICAgICAvLyBpZiBub3QgaW4gY2FjaGUsIGNyZWF0ZSBt\nZXRhZGF0YQogICAgICAgICAgICBtZXRhID0gZ2V0UmVwb3NpdG9yeSgpLmFk\nZFhNTE1ldGFEYXRhKF9jbHMsIF9mbWQuZ2V0TmFtZSgpKTsKICAgICAgICAg\nICAgcGFyc2VYbWxSb290RWxlbWVudChfY2xzLCBtZXRhKTsKICAgICAgICAg\nICAgcG9wdWxhdGVGcm9tUmVmbGVjdGlvbihfY2xzLCBtZXRhKTsKICAgICAg\nICB9CiAgICAgICAgcmV0dXJuIG1ldGE7CiAgICB9CiAgICAKICAgIHByaXZh\ndGUgdm9pZCBwYXJzZVhtbFJvb3RFbGVtZW50KENsYXNzIHR5cGUsIFhNTE1l\ndGFEYXRhIG1ldGEpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBpZiAo\ndHlwZS5nZXRBbm5vdGF0aW9uKHhtbFJvb3RFbGVtZW50Q2xhc3MpICE9IG51\nbGwpIHsKICAgICAgICAgICAgICAgIG1ldGEuc2V0WG1sUm9vdEVsZW1lbnQo\ndHJ1ZSk7CiAgICAgICAgICAgICAgICBtZXRhLnNldFhtbG5hbWUoKFN0cmlu\nZykgeG1sUm9vdE5hbWUuaW52b2tlKHR5cGUuZ2V0QW5ub3RhdGlvbgogICAg\nICAgICAgICAgICAgICAgICh4bWxSb290RWxlbWVudENsYXNzKSwgbmV3IE9i\namVjdFtde30pKTsKICAgICAgICAgICAgICAgIG1ldGEuc2V0WG1sbmFtZXNw\nYWNlKChTdHJpbmcpIHhtbFJvb3ROYW1lc3BhY2UuaW52b2tlKHR5cGUKICAg\nICAgICAgICAgICAgICAgICAuZ2V0QW5ub3RhdGlvbih4bWxSb290RWxlbWVu\ndENsYXNzKSwgbmV3IE9iamVjdFtde30pKTsKICAgICAgICAgICAgfQogICAg\nICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIG1ldGEuc2V0WG1sbmFt\nZSgoU3RyaW5nKSB4bWxUeXBlTmFtZS5pbnZva2UodHlwZS5nZXRBbm5vdGF0\naW9uCiAgICAgICAgICAgICAgICAgICAgKHhtbFR5cGVDbGFzcyksIG5ldyBP\nYmplY3RbXXt9KSk7CiAgICAgICAgICAgICAgICBtZXRhLnNldFhtbG5hbWVz\ncGFjZSgoU3RyaW5nKSB4bWxUeXBlTmFtZXNwYWNlLmludm9rZSh0eXBlCiAg\nICAgICAgICAgICAgICAgICAgLmdldEFubm90YXRpb24oeG1sVHlwZUNsYXNz\nKSwgbmV3IE9iamVjdFtde30pKTsgICAgICAgICAgIAogICAgICAgICAgICB9\nCiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsgICAgICAgICAgICAK\nICAgICAgICB9CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIHBvcHVsYXRlRnJv\nbVJlZmxlY3Rpb24oQ2xhc3MgY2xzLCBYTUxNZXRhRGF0YSBtZXRhKSB7CiAg\nICAgICAgTWVtYmVyW10gbWVtYmVyczsKICAgICAgICAKICAgICAgICBDbGFz\ncyBzdXBlcmNsYXNzID0gY2xzLmdldFN1cGVyY2xhc3MoKTsKCiAgICAgICAg\nLy8gaGFuZGxlIGluaGVyaXRhbmNlIGF0IHN1Yi1lbGVtZW50IGxldmVsCiAg\nICAgICAgaWYgKHN1cGVyY2xhc3MuaXNBbm5vdGF0aW9uUHJlc2VudCh4bWxU\neXBlQ2xhc3MpKQogICAgICAgICAgICBwb3B1bGF0ZUZyb21SZWZsZWN0aW9u\nKHN1cGVyY2xhc3MsIG1ldGEpOwoKICAgICAgICB0cnkgewogICAgICAgICAg\nICBpZiAoU3RyaW5nVXRpbHMuZXF1YWxzKHhtbEFjY2Vzc29yVmFsdWUuaW52\nb2tlKGNscy5nZXRBbm5vdGF0aW9uKAogICAgICAgICAgICAgICAgeG1sQWNj\nZXNzb3JUeXBlQ2xhc3MpLCBuZXcgT2JqZWN0W117fSkudG9TdHJpbmcoKSwg\nIkZJRUxEIikpCiAgICAgICAgICAgICAgICBtZW1iZXJzID0gY2xzLmdldERl\nY2xhcmVkRmllbGRzKCk7CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAg\nICAgIG1lbWJlcnMgPSBjbHMuZ2V0RGVjbGFyZWRNZXRob2RzKCk7CgogICAg\nICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG1lbWJlcnMubGVuZ3RoOyBp\nKyspIHsKICAgICAgICAgICAgICAgIE1lbWJlciBtZW1iZXIgPSBtZW1iZXJz\nW2ldOwogICAgICAgICAgICAgICAgQW5ub3RhdGVkRWxlbWVudCBlbCA9IChB\nbm5vdGF0ZWRFbGVtZW50KSBtZW1iZXI7CiAgICAgICAgICAgICAgICBYTUxN\nZXRhRGF0YSBmaWVsZCA9IG51bGw7CiAgICAgICAgICAgICAgICBpZiAoZWwu\nZ2V0QW5ub3RhdGlvbih4bWxFbGVtZW50Q2xhc3MpICE9IG51bGwpIHsKICAg\nICAgICAgICAgICAgICAgICBTdHJpbmcgeG1sbmFtZSA9IChTdHJpbmcpIHht\nbEVsZW1lbnROYW1lLmludm9rZShlbAogICAgICAgICAgICAgICAgICAgICAg\nICAuZ2V0QW5ub3RhdGlvbih4bWxFbGVtZW50Q2xhc3MpLCBuZXcgT2JqZWN0\nW117fSk7CiAgICAgICAgICAgICAgICAgICAgLy8gYXZvaWQgSkFYQiBYTUwg\nYmluZCBkZWZhdWx0IG5hbWUKICAgICAgICAgICAgICAgICAgICBpZiAoU3Ry\naW5nVXRpbHMuZXF1YWxzKFhNTE1ldGFEYXRhLmRlZmF1bHROYW1lLCB4bWxu\nYW1lKSkKICAgICAgICAgICAgICAgICAgICAgICAgeG1sbmFtZSA9IG1lbWJl\nci5nZXROYW1lKCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKCgoRmllbGQp\nIG1lbWJlcikuZ2V0VHlwZSgpCiAgICAgICAgICAgICAgICAgICAgICAgIC5p\nc0Fubm90YXRpb25QcmVzZW50KHhtbFR5cGVDbGFzcykpIHsKICAgICAgICAg\nICAgICAgICAgICAgICAgZmllbGQgPSBfcmVwb3MuYWRkWE1MTWV0YURhdGEo\nKChGaWVsZCkgbWVtYmVyKS5nZXRUeXBlKCkKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICwgbWVtYmVyLmdldE5hbWUoKSk7CiAgICAgICAgICAgICAg\nICAgICAgICAgIHBhcnNlWG1sUm9vdEVsZW1lbnQoKChGaWVsZCkgbWVtYmVy\nKS5nZXRUeXBlKCksIGZpZWxkKTsKICAgICAgICAgICAgICAgICAgICAgICAg\ncG9wdWxhdGVGcm9tUmVmbGVjdGlvbigoKEZpZWxkKSBtZW1iZXIpLmdldFR5\ncGUoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBmaWVsZCk7CiAg\nICAgICAgICAgICAgICAgICAgICAgIGZpZWxkLnNldFhtbHR5cGUoWE1MTWV0\nYURhdGEuWE1MVFlQRSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxk\nLnNldFhtbG5hbWUoeG1sbmFtZSk7CiAgICAgICAgICAgICAgICAgICAgfQog\nICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAg\nICAgICBmaWVsZCA9IF9yZXBvcy5uZXdYTUxGaWVsZE1ldGFEYXRhKCgoRmll\nbGQpIG1lbWJlcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXRU\neXBlKCksIG1lbWJlci5nZXROYW1lKCkpOwogICAgICAgICAgICAgICAgICAg\nICAgICBmaWVsZC5zZXRYbWx0eXBlKFhNTE1ldGFEYXRhLkVMRU1FTlQpOwog\nICAgICAgICAgICAgICAgICAgICAgICBmaWVsZC5zZXRYbWxuYW1lKHhtbG5h\nbWUpOwogICAgICAgICAgICAgICAgICAgICAgICBmaWVsZC5zZXRYbWxuYW1l\nc3BhY2UoKFN0cmluZykgeG1sRWxlbWVudE5hbWVzcGFjZQogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgLmludm9rZShlbC5nZXRBbm5vdGF0aW9uKHht\nbEVsZW1lbnRDbGFzcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICwg\nbmV3IE9iamVjdFtde30pKTsgICAgICAgICAgICAgICAgICAgIAogICAgICAg\nICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAg\nICAgIGVsc2UgaWYgKGVsLmdldEFubm90YXRpb24oeG1sQXR0cmlidXRlQ2xh\nc3MpICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICBmaWVsZCA9IF9y\nZXBvcy5uZXdYTUxGaWVsZE1ldGFEYXRhKCgoRmllbGQpIG1lbWJlcikKICAg\nICAgICAgICAgICAgICAgICAgICAgLmdldFR5cGUoKSwgbWVtYmVyLmdldE5h\nbWUoKSk7CiAgICAgICAgICAgICAgICAgICAgZmllbGQuc2V0WG1sdHlwZShY\nTUxGaWVsZE1ldGFEYXRhLkFUVFJJQlVURSk7CiAgICAgICAgICAgICAgICAg\nICAgU3RyaW5nIHhtbG5hbWUgPSAoU3RyaW5nKSB4bWxBdHRyaWJ1dGVOYW1l\nLmludm9rZSgKICAgICAgICAgICAgICAgICAgICAgICAgZWwuZ2V0QW5ub3Rh\ndGlvbih4bWxBdHRyaWJ1dGVDbGFzcyksIG5ldyBPYmplY3RbXXt9KTsKICAg\nICAgICAgICAgICAgICAgICAvLyBhdm9pZCBKQVhCIFhNTCBiaW5kIGRlZmF1\nbHQgbmFtZQogICAgICAgICAgICAgICAgICAgIGlmIChTdHJpbmdVdGlscy5l\ncXVhbHMoWE1MTWV0YURhdGEuZGVmYXVsdE5hbWUsIHhtbG5hbWUpKQogICAg\nICAgICAgICAgICAgICAgICAgICB4bWxuYW1lID0gbWVtYmVyLmdldE5hbWUo\nKTsKICAgICAgICAgICAgICAgICAgICBmaWVsZC5zZXRYbWxuYW1lKCJAIit4\nbWxuYW1lKTsKICAgICAgICAgICAgICAgICAgICBmaWVsZC5zZXRYbWxuYW1l\nc3BhY2UoKFN0cmluZykgeG1sQXR0cmlidXRlTmFtZXNwYWNlLmludm9rZSgK\nICAgICAgICAgICAgICAgICAgICAgICAgZWwuZ2V0QW5ub3RhdGlvbih4bWxB\ndHRyaWJ1dGVDbGFzcyksIG5ldyBPYmplY3RbXXt9KSk7ICAgICAgICAgICAg\nICAgCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoZmll\nbGQgIT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICBtZXRhLmFkZEZpZWxk\nKG1lbWJlci5nZXROYW1lKCksIGZpZWxkKTsKICAgICAgICAgICAgfQogICAg\nICAgIH0gY2F0Y2goRXhjZXB0aW9uIGUpIHsKICAgICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

