{"sha":"d63a3820f2c30c7ecae0ba730162a90c32b670b0","node_id":"MDQ6QmxvYjIwNjM2NDpkNjNhMzgyMGYyYzMwYzdlY2FlMGJhNzMwMTYyYTkwYzMyYjY3MGIw","size":4054,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/d63a3820f2c30c7ecae0ba730162a90c32b670b0","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2U7CgppbXBv\ncnQgamF2YS5sYW5nLnJlZmxlY3QuTWV0aG9kOwppbXBvcnQgamF2YS51dGls\nLkNvbGxlY3Rpb247CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmV2ZW50\nLkxpZmVjeWNsZUNhbGxiYWNrczsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5ldmVudC5MaWZlY3ljbGVFdmVudDsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5ldmVudC5NZXRob2RMaWZlY3ljbGVDYWxsYmFja3M7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEubGliLmxvZy5Mb2c7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLm1ldGEuTWV0YURhdGFEZWZhdWx0czsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS51dGlsLlVzZXJFeGNlcHRpb247CgovKioKICog\nQ29tbW9uIHV0aWxpdGllcyBmb3IgcGVyc2lzdGVuY2UgbWV0YWRhdGEgcGFy\nc2Vycy4KICoKICogQGF1dGhvciBBYmUgV2hpdGUKICovCmNsYXNzIE1ldGFE\nYXRhUGFyc2VycyB7CgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9jYWxp\nemVyIF9sb2MgPSBMb2NhbGl6ZXIuZm9yUGFja2FnZQogICAgICAgIChNZXRh\nRGF0YVBhcnNlcnMuY2xhc3MpOwoKICAgIC8qKgogICAgICogUmV0dXJuIHRo\nZSBldmVudCB0eXBlIGNvbnN0YW50cyBmb3IgdGhlIGdpdmVuIHRhZywgb3Ig\nbnVsbCBpZiBub25lLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGludFtd\nIGdldEV2ZW50VHlwZXMoTWV0YURhdGFUYWcgdGFnKSB7CiAgICAgICAgc3dp\ndGNoICh0YWcpIHsKICAgICAgICAgICAgY2FzZSBQUkVfUEVSU0lTVDoKICAg\nICAgICAgICAgICAgIHJldHVybiBuZXcgaW50W117IExpZmVjeWNsZUV2ZW50\nLkJFRk9SRV9QRVJTSVNUIH07CiAgICAgICAgICAgIGNhc2UgUE9TVF9QRVJT\nSVNUOgogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBpbnRbXXsgTGlmZWN5\nY2xlRXZlbnQuQUZURVJfUEVSU0lTVCB9OwogICAgICAgICAgICBjYXNlIFBS\nRV9SRU1PVkU6CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGludFtdeyBM\naWZlY3ljbGVFdmVudC5CRUZPUkVfREVMRVRFIH07CiAgICAgICAgICAgIGNh\nc2UgUE9TVF9SRU1PVkU6CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGlu\ndFtdeyBMaWZlY3ljbGVFdmVudC5BRlRFUl9ERUxFVEUgfTsKICAgICAgICAg\nICAgY2FzZSBQUkVfVVBEQVRFOgogICAgICAgICAgICAgICAgcmV0dXJuIG5l\ndyBpbnRbXXsgTGlmZWN5Y2xlRXZlbnQuQkVGT1JFX1NUT1JFIH07CiAgICAg\nICAgICAgIGNhc2UgUE9TVF9VUERBVEU6CiAgICAgICAgICAgICAgICByZXR1\ncm4gbmV3IGludFtdeyBMaWZlY3ljbGVFdmVudC5BRlRFUl9TVE9SRSB9Owog\nICAgICAgICAgICBjYXNlIFBPU1RfTE9BRDoKICAgICAgICAgICAgICAgIHJl\ndHVybiBuZXcgaW50W117IExpZmVjeWNsZUV2ZW50LkFGVEVSX0xPQUQsCiAg\nICAgICAgICAgICAgICAgICAgTGlmZWN5Y2xlRXZlbnQuQUZURVJfUkVGUkVT\nSCB9OwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgcmV0\ndXJuIG51bGw7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogVmFs\naWRhdGUgdGhhdCB0aGUgZ2l2ZW4gbGlzdGVuZXIgY2xhc3MgZG9lcyBub3Qg\naGF2ZSBtdWx0aXBsZSBtZXRob2RzCiAgICAgKiBsaXN0ZW5pbmcgZm9yIHRo\nZSBzYW1lIGxpZmVjeWNsZSBldmVudCwgd2hpY2ggaXMgZm9yYmlkZGVuIGJ5\nIHRoZSBzcGVjLiAgCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgdm9pZCB2\nYWxpZGF0ZU1ldGhvZHNGb3JTYW1lQ2FsbGJhY2soQ2xhc3MgY2xzLCAKICAg\nICAgICBDb2xsZWN0aW9uPExpZmVjeWNsZUNhbGxiYWNrcz4gY2FsbGJhY2tz\nLCBNZXRob2QgbWV0aG9kLCAKICAgICAgICBNZXRhRGF0YVRhZyB0YWcsIE1l\ndGFEYXRhRGVmYXVsdHMgZGVmLCBMb2cgbG9nKSB7CiAgICAgICAgaWYgKGNh\nbGxiYWNrcyA9PSBudWxsIHx8IGNhbGxiYWNrcy5pc0VtcHR5KCkpCiAgICAg\nICAgICAgIHJldHVybjsKCiAgICAgICAgZm9yIChMaWZlY3ljbGVDYWxsYmFj\na3MgbGM6IGNhbGxiYWNrcykgewogICAgICAgICAgICBpZiAoIShsYyBpbnN0\nYW5jZW9mIE1ldGhvZExpZmVjeWNsZUNhbGxiYWNrcykpCiAgICAgICAgICAg\nICAgICBjb250aW51ZTsKICAgICAgICAgICAgTWV0aG9kIGV4aXN0cyA9ICgo\nTWV0aG9kTGlmZWN5Y2xlQ2FsbGJhY2tzKSBsYykuZ2V0Q2FsbGJhY2tNZXRo\nb2QoKTsKICAgICAgICAgICAgaWYgKCFleGlzdHMuZ2V0RGVjbGFyaW5nQ2xh\nc3MoKS5lcXVhbHMobWV0aG9kLmdldERlY2xhcmluZ0NsYXNzKCkpKQogICAg\nICAgICAgICAgICAgY29udGludWU7CgogICAgICAgICAgICBQZXJzaXN0ZW5j\nZU1ldGFEYXRhRGVmYXVsdHMgZGVmYXVsdHMgPSBnZXRQZXJzaXN0ZW5jZURl\nZmF1bHRzKGRlZik7CiAgICAgICAgICAgIExvY2FsaXplci5NZXNzYWdlIG1z\nZyA9IF9sb2MuZ2V0KCJtdWx0aXBsZS1tZXRob2RzLW9uLWNhbGxiYWNrIiwg\nCiAgICAgICAgICAgICAgICBuZXcgT2JqZWN0W10geyBtZXRob2QuZ2V0RGVj\nbGFyaW5nQ2xhc3MoKS5nZXROYW1lKCksIAogICAgICAgICAgICAgICAgbWV0\naG9kLmdldE5hbWUoKSwgZXhpc3RzLmdldE5hbWUoKSwgdGFnLnRvU3RyaW5n\nKCkgfSk7CiAgICAgICAgICAgIGlmIChkZWZhdWx0cyA9PSBudWxsIAogICAg\nICAgICAgICAgICAgfHwgZGVmYXVsdHMuZ2V0QWxsb3dzTXVsdGlwbGVNZXRo\nb2RzRm9yU2FtZUNhbGxiYWNrKCkpCiAgICAgICAgICAgICAgICBsb2cud2Fy\nbihtc2cpOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB0aHJv\ndyBuZXcgVXNlckV4Y2VwdGlvbihtc2cpOwogICAgICAgIH0KICAgIH0KICAg\nIAogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIHtAbGluayBQZXJzaXN0ZW5j\nZU1ldGFEYXRhRGVmYXVsdHN9IGluIHVzZSwgb3IgbnVsbCBpZiBub3QKICAg\nICAqIHVzaW5nIEpQQSBkZWZhdWx0cy4KICAgICAqLwogICAgcHJpdmF0ZSBz\ndGF0aWMgUGVyc2lzdGVuY2VNZXRhRGF0YURlZmF1bHRzIGdldFBlcnNpc3Rl\nbmNlRGVmYXVsdHMKICAgICAgICAoTWV0YURhdGFEZWZhdWx0cyBkZWYpIHsK\nICAgICAgICBpZiAoZGVmIGluc3RhbmNlb2YgUGVyc2lzdGVuY2VNZXRhRGF0\nYURlZmF1bHRzKQogICAgICAgICAgICByZXR1cm4gKFBlcnNpc3RlbmNlTWV0\nYURhdGFEZWZhdWx0cykgZGVmOwogICAgICAgIHJldHVybiBudWxsOwogICAg\nfQp9Cg==\n","encoding":"base64"}

