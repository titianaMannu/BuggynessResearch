{"sha":"0d9278c949205b7a002c06afc37c3147beae7674","node_id":"MDQ6QmxvYjIwNjM2NDowZDkyNzhjOTQ5MjA1YjdhMDAyYzA2YWZjMzdjMzE0N2JlYWU3Njc0","size":7803,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/0d9278c949205b7a002c06afc37c3147beae7674","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2U7CgppbXBv\ncnQgamF2YS51dGlsLk1hcDsKaW1wb3J0IGphdmF4Lm5hbWluZy5Db250ZXh0\nOwppbXBvcnQgamF2YXgubmFtaW5nLkluaXRpYWxDb250ZXh0OwppbXBvcnQg\namF2YXgubmFtaW5nLk5hbWluZ0V4Y2VwdGlvbjsKaW1wb3J0IGphdmF4LnBl\ncnNpc3RlbmNlLkVudGl0eU1hbmFnZXI7CmltcG9ydCBqYXZheC5wZXJzaXN0\nZW5jZS5FbnRpdHlNYW5hZ2VyRmFjdG9yeTsKaW1wb3J0IGphdmF4LnBlcnNp\nc3RlbmNlLlF1ZXJ5OwppbXBvcnQgamF2YXgucm1pLlBvcnRhYmxlUmVtb3Rl\nT2JqZWN0OwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5lbmhhbmNlLlBl\ncnNpc3RlbmNlQ2FwYWJsZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5r\nZXJuZWwuQm9vdHN0cmFwOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtl\ncm5lbC5Ccm9rZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmNv\nbmYuQ29uZmlndXJhdGlvblByb3ZpZGVyOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmxpYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS51dGlsLkltcGxIZWxwZXI7CgovKioKICogU3RhdGljIGhlbHBl\nciBtZXRob2RzIGZvciBKUEEgdXNlcnMuCiAqCiAqIEBhdXRob3IgQWJlIFdo\naXRlCiAqIEBwdWJsaXNoZWQKICogQHNpbmNlIDAuNC4wCiAqLwpwdWJsaWMg\nY2xhc3MgT3BlbkpQQVBlcnNpc3RlbmNlIHsKCiAgICBwcml2YXRlIHN0YXRp\nYyBmaW5hbCBMb2NhbGl6ZXIgX2xvYyA9CiAgICAgICAgTG9jYWxpemVyLmZv\nclBhY2thZ2UoT3BlbkpQQVBlcnNpc3RlbmNlLmNsYXNzKTsKCiAgICAvKioK\nICAgICAqIFJldHVybiB0aGUgT3BlbkpQQSBmYWNhZGUgdG8gdGhlIGdpdmVu\nIGVudGl0eSBtYW5hZ2VyIGZhY3RvcnkuCiAgICAgKi8KICAgIHB1YmxpYyBz\ndGF0aWMgT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5IGNhc3QoRW50aXR5\nTWFuYWdlckZhY3RvcnkgZW1mKSB7CiAgICAgICAgcmV0dXJuIChPcGVuSlBB\nRW50aXR5TWFuYWdlckZhY3RvcnkpIGVtZjsKICAgIH0KCiAgICAvKioKICAg\nICAqIFJldHVybiB0aGUgT3BlbkpQQSBmYWNhZGUgdG8gdGhlIGdpdmVuIGVu\ndGl0eSBtYW5hZ2VyLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyIGNhc3QoRW50aXR5TWFuYWdlciBlbSkgewogICAg\nICAgIGlmIChlbSBpbnN0YW5jZW9mIE9wZW5KUEFFbnRpdHlNYW5hZ2VyKQog\nICAgICAgICAgICByZXR1cm4gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBlbTsK\nICAgICAgICByZXR1cm4gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBlbS5nZXRE\nZWxlZ2F0ZSgpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBP\ncGVuSlBBIGZhY2FkZSB0byB0aGUgZ2l2ZW4gcXVlcnkuCiAgICAgKi8KICAg\nIHB1YmxpYyBzdGF0aWMgT3BlbkpQQVF1ZXJ5IGNhc3QoUXVlcnkgcSkgewog\nICAgICAgIHJldHVybiAoT3BlbkpQQVF1ZXJ5KSBxOwogICAgfQoKICAgIC8q\nKgogICAgICogUmV0dXJucyB0aGUge0BsaW5rIE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyRmFjdG9yeX0gc3BlY2lmaWVkIGJ5CiAgICAgKiB5b3VyIE9wZW5KUEEg\nZGVmYXVsdHMuIFRoaXMgbWV0aG9kIHdpbGwgcmV0dXJuIHRoZSBzYW1lIGxv\nZ2ljYWwgZmFjdG9yeQogICAgICogZm9yIGVhY2ggaW52b2NhdGlvbi4KICAg\nICAqLwogICAgcHVibGljIHN0YXRpYyBPcGVuSlBBRW50aXR5TWFuYWdlckZh\nY3RvcnkgZ2V0RW50aXR5TWFuYWdlckZhY3RvcnkoKSB7CiAgICAgICAgcmV0\ndXJuIGdldEVudGl0eU1hbmFnZXJGYWN0b3J5KG51bGwpOwogICAgfQoKICAg\nIC8qKgogICAgICogUmV0dXJucyB0aGUge0BsaW5rIE9wZW5KUEFFbnRpdHlN\nYW5hZ2VyRmFjdG9yeX0gc3BlY2lmaWVkIGJ5CiAgICAgKiB5b3VyIE9wZW5K\nUEEgZGVmYXVsdHMsIHVzaW5nIDxjb2RlPm1hcDwvY29kZT4gYXMgb3ZlcnJp\nZGVzLiBUaGlzIG1ldGhvZAogICAgICogd2lsbCByZXR1cm4gdGhlIHNhbWUg\nbG9naWNhbCBmYWN0b3J5IGZvciBpbnZvY2F0aW9ucyB3aXRoIHRoZSBzYW1l\nCiAgICAgKiBvdmVycmlkZXMuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMg\nT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5IGdldEVudGl0eU1hbmFnZXJG\nYWN0b3J5KE1hcCBtYXApIHsKICAgICAgICBDb25maWd1cmF0aW9uUHJvdmlk\nZXIgY3AgPSBuZXcgUGVyc2lzdGVuY2VQcm9kdWN0RGVyaXZhdGlvbi4KICAg\nICAgICAgICAgQ29uZmlndXJhdGlvblByb3ZpZGVySW1wbChtYXApOwogICAg\nICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBKUEFGYWNhZGVIZWxwZXIu\ndG9FbnRpdHlNYW5hZ2VyRmFjdG9yeSgKICAgICAgICAgICAgICAgIEJvb3Rz\ndHJhcC5nZXRCcm9rZXJGYWN0b3J5KGNwLCBudWxsKSk7CiAgICAgICAgfSBj\nYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgdGhyb3cgUGVyc2lz\ndGVuY2VFeGNlcHRpb25zLnRvUGVyc2lzdGVuY2VFeGNlcHRpb24oZSk7CiAg\nICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBhIG5ldyB7\nQGxpbmsgT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5fSBzcGVjaWZpZWQg\nYnkKICAgICAqIDxjb2RlPm5hbWU8L2NvZGU+IGluIGFuIFhNTCBjb25maWd1\ncmF0aW9uIGZpbGUgYXQgdGhlIHJlc291cmNlIGxvY2F0aW9uCiAgICAgKiA8\nY29kZT5yZXNvdXJjZTwvY29kZT4uIElmIDxjb2RlPm5hbWU8L2NvZGU+IGlz\nIDxjb2RlPm51bGw8L2NvZGU+LCB1c2VzCiAgICAgKiB0aGUgZmlyc3QgcmVz\nb3VyY2UgZm91bmQgaW4gdGhlIHNwZWNpZmllZCBsb2NhdGlvbiwgcmVnYXJk\nbGVzcyBvZiB0aGUKICAgICAqIG5hbWUgc3BlY2lmaWVkIGluIHRoZSBYTUwg\ncmVzb3VyY2Ugb3IgdGhlIG5hbWUgb2YgdGhlIGphciB0aGF0IHRoZQogICAg\nICogcmVzb3VyY2UgaXMgY29udGFpbmVkIGluLiBJZiA8Y29kZT5yZXNvdXJj\nZTwvY29kZT4gaXMgPGNvZGU+bnVsbDwvY29kZT4sCiAgICAgKiB1c2VzIHRo\nZSBzcGVjLWRlZmluZWQgPGNvZGU+TUVUQS1JTkYvcGVyc2lzdGVuY2UueG1s\nPC9jb2RlPiByZXNvdXJjZS4KICAgICAqICBUaGlzIG1ldGhvZCBvbmx5IHJl\nc29sdmVzIHtAbGluayBPcGVuSlBBRW50aXR5TWFuYWdlckZhY3Rvcnl9IGlu\nc3RhbmNlcy4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBPcGVuSlBBRW50\naXR5TWFuYWdlckZhY3RvcnkgY3JlYXRlRW50aXR5TWFuYWdlckZhY3RvcnkK\nICAgICAgICAoU3RyaW5nIG5hbWUsIFN0cmluZyByZXNvdXJjZSkgewogICAg\nICAgIHJldHVybiBjcmVhdGVFbnRpdHlNYW5hZ2VyRmFjdG9yeShuYW1lLCBy\nZXNvdXJjZSwgbnVsbCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5z\nIGEgbmV3IHtAbGluayBPcGVuSlBBRW50aXR5TWFuYWdlckZhY3Rvcnl9IHNw\nZWNpZmllZCBieQogICAgICogPGNvZGU+bmFtZTwvY29kZT4gaW4gYW4gWE1M\nIGNvbmZpZ3VyYXRpb24gZmlsZSBhdCB0aGUgcmVzb3VyY2UgbG9jYXRpb24K\nICAgICAqIDxjb2RlPnJlc291cmNlPC9jb2RlPiwgYXBwbHlpbmcgdGhlIHBy\nb3BlcnRpZXMgc3BlY2lmaWVkIGluCiAgICAgKiA8Y29kZT5tYXA8L2NvZGU+\nIGFzIG92ZXJyaWRlcy4gSWYgPGNvZGU+bmFtZTwvY29kZT4gaXMKICAgICAq\nIDxjb2RlPm51bGw8L2NvZGU+LCB1c2VzIHRoZSBmaXJzdCByZXNvdXJjZSBm\nb3VuZCBpbiB0aGUgc3BlY2lmaWVkCiAgICAgKiBsb2NhdGlvbiwgcmVnYXJk\nbGVzcyBvZiB0aGUgbmFtZSBzcGVjaWZpZWQgaW4gdGhlIFhNTCByZXNvdXJj\nZSBvciB0aGUKICAgICAqIG5hbWUgb2YgdGhlIGphciB0aGF0IHRoZSByZXNv\ndXJjZSBpcyBjb250YWluZWQgaW4uCiAgICAgKiBJZiA8Y29kZT5yZXNvdXJj\nZTwvY29kZT4gaXMgPGNvZGU+bnVsbDwvY29kZT4sIHVzZXMgdGhlIHNwZWMt\nZGVmaW5lZAogICAgICogPGNvZGU+TUVUQS1JTkYvcGVyc2lzdGVuY2UueG1s\nPC9jb2RlPiByZXNvdXJjZS4KICAgICAqICBUaGlzIG1ldGhvZCBvbmx5IHJl\nc29sdmVzIHtAbGluayBPcGVuSlBBRW50aXR5TWFuYWdlckZhY3Rvcnl9IGlu\nc3RhbmNlcy4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBPcGVuSlBBRW50\naXR5TWFuYWdlckZhY3RvcnkgY3JlYXRlRW50aXR5TWFuYWdlckZhY3RvcnkK\nICAgICAgICAoU3RyaW5nIG5hbWUsIFN0cmluZyByZXNvdXJjZSwgTWFwIG1h\ncCkgewogICAgICAgIHJldHVybiAoT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0\nb3J5KSBuZXcgUGVyc2lzdGVuY2VQcm92aWRlckltcGwoKS4KICAgICAgICAg\nICAgY3JlYXRlRW50aXR5TWFuYWdlckZhY3RvcnkobmFtZSwgcmVzb3VyY2Us\nIG1hcCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSB7QGxp\nbmsgRW50aXR5TWFuYWdlckZhY3Rvcnl9IGF0IHRoZSBKTkRJIGxvY2F0aW9u\nIHNwZWNpZmllZAogICAgICogYnkgPGNvZGU+am5kaUxvY2F0aW9uPC9jb2Rl\nPiBpbiB0aGUgY29udGV4dCA8Y29kZT5jb250ZXh0PC9jb2RlPi4gSWYKICAg\nICAqIDxjb2RlPmNvbnRleHQ8L2NvZGU+IGlzIDxjb2RlPm51bGw8L2NvZGU+\nLAogICAgICogPGNvZGU+bmV3IEluaXRpYWxDb250ZXh0KCk8L2NvZGU+IHdp\nbGwgYmUgdXNlZC4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBPcGVuSlBB\nRW50aXR5TWFuYWdlckZhY3RvcnkgY3JlYXRlRW50aXR5TWFuYWdlckZhY3Rv\ncnkKICAgICAgICAoU3RyaW5nIGpuZGlMb2NhdGlvbiwgQ29udGV4dCBjb250\nZXh0KSB7CiAgICAgICAgaWYgKGpuZGlMb2NhdGlvbiA9PSBudWxsKQogICAg\nICAgICAgICB0aHJvdyBuZXcgTnVsbFBvaW50ZXJFeGNlcHRpb24oImpuZGlM\nb2NhdGlvbiA9PSBudWxsIik7CgogICAgICAgIHRyeSB7CiAgICAgICAgICAg\nIGlmIChjb250ZXh0ID09IG51bGwpCiAgICAgICAgICAgICAgICBjb250ZXh0\nID0gbmV3IEluaXRpYWxDb250ZXh0KCk7CgogICAgICAgICAgICBPYmplY3Qg\nbyA9IGNvbnRleHQubG9va3VwKGpuZGlMb2NhdGlvbik7CiAgICAgICAgICAg\nIHJldHVybiAoT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5KSBQb3J0YWJs\nZVJlbW90ZU9iamVjdC5uYXJyb3cobywKICAgICAgICAgICAgICAgIE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeS5jbGFzcyk7CiAgICAgICAgfSBjYXRj\naCAoTmFtaW5nRXhjZXB0aW9uIG5lKSB7CiAgICAgICAgICAgIHRocm93IG5l\ndyBBcmd1bWVudEV4Y2VwdGlvbihfbG9jLmdldCgibmFtaW5nLWV4Y2VwdGlv\nbiIsCiAgICAgICAgICAgICAgICBqbmRpTG9jYXRpb24pLCBuZXcgVGhyb3dh\nYmxlW117IG5lIH0sIG51bGwsIHRydWUpOwogICAgICAgIH0KICAgIH0KCiAg\nICAvKioKICAgICAqIFJldHVybiB0aGUgZW50aXR5IG1hbmFnZXIgZm9yIHRo\nZSBnaXZlbiBvYmplY3QsIGlmIG9uZSBjYW4gYmUgZGV0ZXJtaW5lZAogICAg\nICogZnJvbSBqdXN0IHRoZSBvYmplY3QgYWxvbmUuIFRoaXMgbWV0aG9kIHdp\nbGwgc3VjY2VlZCBmb3IgaW5zdGFuY2VzIHRoYXQKICAgICAqIGFyZSBlbmhh\nbmNlZCwgdGhhdCB3ZXJlIGxvYWRlZCBmcm9tIHRoZSBkYXRhYmFzZSAocmF0\naGVyIHRoYW4KICAgICAqIGJlaW5nIGNvbnN0cnVjdGVkIHdpdGggPGNvZGU+\nbmV3PC9jb2RlPiksIG9yIHRoYXQgd2VyZSBjcmVhdGVkIHRocm91Z2gKICAg\nICAqIHtAbGluayBPcGVuSlBBRW50aXR5TWFuYWdlciNjcmVhdGVJbnN0YW5j\nZX0uCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgT3BlbkpQQUVudGl0eU1h\nbmFnZXIgZ2V0RW50aXR5TWFuYWdlcihPYmplY3QgbykgewogICAgICAgIHRy\neSB7CiAgICAgICAgICAgIGlmIChJbXBsSGVscGVyLmlzTWFuYWdlYWJsZShv\nKSkgewogICAgICAgICAgICAgICAgUGVyc2lzdGVuY2VDYXBhYmxlIHBjID0g\nSW1wbEhlbHBlci50b1BlcnNpc3RlbmNlQ2FwYWJsZShvLCBudWxsKTsKICAg\nICAgICAgICAgICAgIGlmIChwYyAhPSBudWxsKQogICAgICAgICAgICAgICAg\nICAgIHJldHVybiBKUEFGYWNhZGVIZWxwZXIudG9FbnRpdHlNYW5hZ2VyKAog\nICAgICAgICAgICAgICAgICAgICAgICAoQnJva2VyKSBwYy5wY0dldEdlbmVy\naWNDb250ZXh0KCkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVy\nbiBudWxsOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAg\nICAgICAgIHRocm93IFBlcnNpc3RlbmNlRXhjZXB0aW9ucy50b1BlcnNpc3Rl\nbmNlRXhjZXB0aW9uKGUpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAg\nICAqIENsb3NlIHRoZSBnaXZlbiByZXNvdXJjZS4gVGhlIHJlc291cmNlIGNh\nbiBiZSBhbiBleHRlbnQgaXRlcmF0b3IsCiAgICAgKiBxdWVyeSByZXN1bHQs\nIGxhcmdlIHJlc3VsdCBzZXQgcmVsYXRpb24sIG9yIGFueSBjbG9zZWFibGUg\nT3BlbkpQQQogICAgICogY29tcG9uZW50LgogICAgICovCiAgICBwdWJsaWMg\nc3RhdGljIHZvaWQgY2xvc2UoT2JqZWN0IG8pIHsKICAgICAgICB0cnkgewog\nICAgICAgICAgICBJbXBsSGVscGVyLmNsb3NlKG8pOwogICAgICAgIH0gY2F0\nY2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIHRocm93IFBlcnNpc3Rl\nbmNlRXhjZXB0aW9ucy50b1BlcnNpc3RlbmNlRXhjZXB0aW9uKGUpOwogICAg\nICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0\naGUgc3BlY2lmaWVkIGNsYXNzIGlzIGFuIGVudGl0eSBvciBlbWJlZGRhYmxl\nIHR5cGUuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgYm9vbGVhbiBpc01h\nbmFnZWRUeXBlKEVudGl0eU1hbmFnZXIgZW0sIENsYXNzIGNscykgewogICAg\nICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBJbXBsSGVscGVyLmlzTWFu\nYWdlZFR5cGUoCiAgICAgICAgICAgICAgICBKUEFGYWNhZGVIZWxwZXIudG9C\ncm9rZXIoZW0pLmdldENvbmZpZ3VyYXRpb24oKSwgY2xzKTsKICAgICAgICB9\nIGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICB0aHJvdyBQZXJz\naXN0ZW5jZUV4Y2VwdGlvbnMudG9QZXJzaXN0ZW5jZUV4Y2VwdGlvbihlKTsK\nICAgICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

