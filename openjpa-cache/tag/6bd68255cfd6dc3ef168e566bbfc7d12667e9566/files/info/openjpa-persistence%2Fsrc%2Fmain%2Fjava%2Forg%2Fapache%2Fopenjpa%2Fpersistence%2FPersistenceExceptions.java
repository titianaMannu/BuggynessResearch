{"sha":"9f895fc838d680930a94cef64514a07eeea3266d","node_id":"MDQ6QmxvYjIwNjM2NDo5Zjg5NWZjODM4ZDY4MDkzMGE5NGNlZjY0NTE0YTA3ZWVlYTMyNjZk","size":9715,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/9f895fc838d680930a94cef64514a07eeea3266d","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2U7CgppbXBv\ncnQgamF2YS5sYW5nLnJlZmxlY3QuSW52b2NhdGlvblRhcmdldEV4Y2VwdGlv\nbjsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkJyb2tlcjsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLkV4Y2VwdGlvbnM7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5PcGVuSlBBRXhjZXB0aW9u\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuUnVudGltZUV4Y2Vw\ndGlvblRyYW5zbGF0b3I7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRp\nbC5TdG9yZUV4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51\ndGlsLlVzZXJFeGNlcHRpb247CgovKioKICogQ29udmVydHMgZnJvbSBPcGVu\nSlBBIHRvIHBlcnNpc3RlbmNlIGV4Y2VwdGlvbiB0eXBlcy4KICoKICogQGF1\ndGhvciBBYmUgV2hpdGUKICogQGF1dGhvciBNYXJjIFBydWQnaG9tbWVhdXgK\nICogQG5vamF2YWRvYwogKi8KcHVibGljIGNsYXNzIFBlcnNpc3RlbmNlRXhj\nZXB0aW9ucwogICAgZXh0ZW5kcyBFeGNlcHRpb25zIHsKCiAgICBwdWJsaWMg\nc3RhdGljIGZpbmFsIFJ1bnRpbWVFeGNlcHRpb25UcmFuc2xhdG9yIFRSQU5T\nTEFUT1IgPQogICAgICAgIG5ldyBSdW50aW1lRXhjZXB0aW9uVHJhbnNsYXRv\ncigpIHsKICAgICAgICAgICAgcHVibGljIFJ1bnRpbWVFeGNlcHRpb24gdHJh\nbnNsYXRlKFJ1bnRpbWVFeGNlcHRpb24gcmUpIHsKICAgICAgICAgICAgICAg\nIHJldHVybiBQZXJzaXN0ZW5jZUV4Y2VwdGlvbnMudG9QZXJzaXN0ZW5jZUV4\nY2VwdGlvbihyZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgIC8q\nKgogICAgICogUmV0dXJucyBhIHtAbGluayBSdW50aW1lRXhjZXB0aW9uVHJh\nbnNsYXRvcn0gdGhhdCB3aWxsIHBlcmZvcm0KICAgICAqIHRoZSBjb3JyZWN0\nIGV4Y2VwdGlvbiB0cmFuc2xhdGlvbiBhcyB3ZWxsIGFzIHJvbGwgYmFjayB0\naGUKICAgICAqIGN1cnJlbnQgdHJhbnNhY3Rpb24gd2hlbiBmb3IgYWxsIGJ1\ndCB7QGxpbmsgTm9SZXN1bHRFeGNlcHRpb259CiAgICAgKiBhbmQge0BsaW5r\nIE5vblVuaXF1ZVJlc3VsdEV4Y2VwdGlvbn0gaW4gYWNjb3JkYW5jZSB3aXRo\nCiAgICAgKiBzZWN0aW9uIDMuNyBvZiB0aGUgRUpCIDMuMCBzcGVjaWZpY2F0\naW9uLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIFJ1bnRpbWVFeGNlcHRp\nb25UcmFuc2xhdG9yIGdldFJvbGxiYWNrVHJhbnNsYXRvcgogICAgICAgIChm\naW5hbCBPcGVuSlBBRW50aXR5TWFuYWdlciBlbSkgewogICAgICAgIHJldHVy\nbiBuZXcgUnVudGltZUV4Y2VwdGlvblRyYW5zbGF0b3IoKSB7CiAgICAgICAg\nICAgIHByaXZhdGUgYm9vbGVhbiB0aHJvd2luZyA9IGZhbHNlOwoKICAgICAg\nICAgICAgcHVibGljIFJ1bnRpbWVFeGNlcHRpb24gdHJhbnNsYXRlKFJ1bnRp\nbWVFeGNlcHRpb24gcmUpIHsKICAgICAgICAgICAgICAgIFJ1bnRpbWVFeGNl\ncHRpb24gZXggPSB0b1BlcnNpc3RlbmNlRXhjZXB0aW9uKHJlKTsKICAgICAg\nICAgICAgICAgIGlmICghKGV4IGluc3RhbmNlb2YgTm9uVW5pcXVlUmVzdWx0\nRXhjZXB0aW9uKQogICAgICAgICAgICAgICAgICAgICYmICEoZXggaW5zdGFu\nY2VvZiBOb1Jlc3VsdEV4Y2VwdGlvbikKICAgICAgICAgICAgICAgICAgICAm\nJiAhdGhyb3dpbmcpIHsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAg\nICAgICAgICAgICAgICAgICAgICB0aHJvd2luZyA9IHRydWU7CiAgICAgICAg\nICAgICAgICAgICAgICAgIGlmIChlbS5pc09wZW4oKSAmJiAoKEVudGl0eU1h\nbmFnZXJJbXBsKSBlbSkuaXNBY3RpdmUoKSkKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICgoRW50aXR5TWFuYWdlckltcGwpIGVtKS5zZXRSb2xsYmFj\na09ubHkocmUpOwogICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7CiAg\nICAgICAgICAgICAgICAgICAgICAgIC8vIGhhbmRsZSByZS1lbnRyYW5jeQog\nICAgICAgICAgICAgICAgICAgICAgICB0aHJvd2luZyA9IGZhbHNlOwogICAg\nICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAg\nICAgICAgICByZXR1cm4gZXg7CiAgICAgICAgICAgIH0KICAgICAgICB9Owog\nICAgfQoKICAgIC8qKgogICAgICogQ29udmVydCB0aGUgZ2l2ZW4gdGhyb3dh\nYmxlIHRvIHRoZSBwcm9wZXIgcGVyc2lzdGVuY2UgZXhjZXB0aW9uLgogICAg\nICovCiAgICBwdWJsaWMgc3RhdGljIFJ1bnRpbWVFeGNlcHRpb24gdG9QZXJz\naXN0ZW5jZUV4Y2VwdGlvbihUaHJvd2FibGUgdCkgewogICAgICAgIHJldHVy\nbiAoUnVudGltZUV4Y2VwdGlvbikgdHJhbnNsYXRlRXhjZXB0aW9uKHQsIHRy\ndWUpOwogICAgfQoKICAgIC8qKgogICAgICogVHJhbnNsYXRlIHRoZSBnaXZl\nbiBleGNlcHRpb24uCiAgICAgKgogICAgICogQHBhcmFtIGNoZWNrZWQgd2hl\ndGhlciB0byB0cmFuc2xhdGUgY2hlY2tlZCBleGNlcHRpb25zCiAgICAgKi8K\nICAgIHByaXZhdGUgc3RhdGljIFRocm93YWJsZSB0cmFuc2xhdGVFeGNlcHRp\nb24oVGhyb3dhYmxlIHQsIGJvb2xlYW4gY2hlY2tlZCkgewogICAgICAgIGlm\nIChpc1BlcnNpc3RlbmNlRXhjZXB0aW9uKHQpKQogICAgICAgICAgICByZXR1\ncm4gdDsKCiAgICAgICAgLy8gaW1tZWRpYXRlbHkgdGhyb3cgZXJyb3JzCiAg\nICAgICAgaWYgKHQgaW5zdGFuY2VvZiBFcnJvcikKICAgICAgICAgICAgdGhy\nb3cgKEVycm9yKSB0OwoKICAgICAgICBPcGVuSlBBRXhjZXB0aW9uIGtlOwog\nICAgICAgIGlmICghKHQgaW5zdGFuY2VvZiBPcGVuSlBBRXhjZXB0aW9uKSkg\newogICAgICAgICAgICBpZiAoIWNoZWNrZWQgfHwgdCBpbnN0YW5jZW9mIFJ1\nbnRpbWVFeGNlcHRpb24pCiAgICAgICAgICAgICAgICByZXR1cm4gdDsKICAg\nICAgICAgICAga2UgPSBuZXcgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuR2Vu\nZXJhbEV4Y2VwdGlvbih0LmdldE1lc3NhZ2UoKSk7CiAgICAgICAgICAgIGtl\nLnNldFN0YWNrVHJhY2UodC5nZXRTdGFja1RyYWNlKCkpOwogICAgICAgICAg\nICByZXR1cm4ga2U7CiAgICAgICAgfQoKICAgICAgICAvLyBpZiBvbmx5IG5l\nc3RlZCBleGNlcHRpb24gaXMgYSBwZXJzaXN0ZW5jZSBvbmUsIHJldHVybiBp\ndCBkaXJlY3RseQogICAgICAgIGtlID0gKE9wZW5KUEFFeGNlcHRpb24pIHQ7\nCiAgICAgICAgaWYgKGtlLmdldE5lc3RlZFRocm93YWJsZXMoKS5sZW5ndGgg\nPT0gMQogICAgICAgICAgICAmJiBpc1BlcnNpc3RlbmNlRXhjZXB0aW9uKGtl\nLmdldENhdXNlKCkpKQogICAgICAgICAgICByZXR1cm4ga2UuZ2V0Q2F1c2Uo\nKTsKCiAgICAgICAgLy8gUnVudGltZUV4Y2VwdGlvbnMgdGhyb3duIGZyb20g\nY2FsbGJhY2tzIHNob3VsZCBiZSB0aHJvd24gZGlyZWN0bHkKICAgICAgICBp\nZiAoa2UuZ2V0VHlwZSgpID09IE9wZW5KUEFFeGNlcHRpb24uVVNFUgogICAg\nICAgICAgICAmJiBrZS5nZXRTdWJ0eXBlKCkgPT0gVXNlckV4Y2VwdGlvbi5D\nQUxMQkFDSwogICAgICAgICAgICAmJiBrZS5nZXROZXN0ZWRUaHJvd2FibGVz\nKCkubGVuZ3RoID09IDEpIHsKICAgICAgICAgICAgVGhyb3dhYmxlIGUgPSBr\nZS5nZXRDYXVzZSgpOwogICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIElu\ndm9jYXRpb25UYXJnZXRFeGNlcHRpb24pCiAgICAgICAgICAgICAgICBlID0g\nZS5nZXRDYXVzZSgpOwoKICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBS\ndW50aW1lRXhjZXB0aW9uKQogICAgICAgICAgICAgICAgcmV0dXJuIGU7CiAg\nICAgICAgfQoKICAgICAgICAvLyBwZXJmb3JtIGludGVsbGlnZW50IHRyYW5z\nbGF0aW9uIG9mIG9wZW5qcGEgZXhjZXB0aW9ucwogICAgICAgIHN3aXRjaCAo\na2UuZ2V0VHlwZSgpKSB7CiAgICAgICAgICAgIGNhc2UgT3BlbkpQQUV4Y2Vw\ndGlvbi5TVE9SRToKICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2xhdGVT\ndG9yZUV4Y2VwdGlvbihrZSk7CiAgICAgICAgICAgIGNhc2UgT3BlbkpQQUV4\nY2VwdGlvbi5VU0VSOgogICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zbGF0\nZVVzZXJFeGNlcHRpb24oa2UpOwogICAgICAgICAgICBkZWZhdWx0OgogICAg\nICAgICAgICAgICAgcmV0dXJuIHRyYW5zbGF0ZUdlbmVyYWxFeGNlcHRpb24o\na2UpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFRyYW5zbGF0\nZSB0aGUgZ2l2ZW4gc3RvcmUgZXhjZXB0aW9uLgogICAgICovCiAgICBwcml2\nYXRlIHN0YXRpYyBUaHJvd2FibGUgdHJhbnNsYXRlU3RvcmVFeGNlcHRpb24o\nT3BlbkpQQUV4Y2VwdGlvbiBrZSkgewogICAgICAgIEV4Y2VwdGlvbiBlOwog\nICAgICAgIHN3aXRjaCAoa2UuZ2V0U3VidHlwZSgpKSB7CiAgICAgICAgICAg\nIGNhc2UgU3RvcmVFeGNlcHRpb24uT0JKRUNUX05PVF9GT1VORDoKICAgICAg\nICAgICAgICAgIGUgPSBuZXcgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3Rl\nbmNlLkVudGl0eU5vdEZvdW5kRXhjZXB0aW9uCiAgICAgICAgICAgICAgICAg\nICAgKGtlLmdldE1lc3NhZ2UoKSwgZ2V0TmVzdGVkVGhyb3dhYmxlcyhrZSks\nCiAgICAgICAgICAgICAgICAgICAgICAgIGdldEZhaWxlZE9iamVjdChrZSks\nIGtlLmlzRmF0YWwoKSk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAg\nICAgICAgY2FzZSBTdG9yZUV4Y2VwdGlvbi5PUFRJTUlTVElDOgogICAgICAg\nICAgICAgICAgZSA9IG5ldyBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVu\nY2UuT3B0aW1pc3RpY0xvY2tFeGNlcHRpb24KICAgICAgICAgICAgICAgICAg\nICAoa2UuZ2V0TWVzc2FnZSgpLCBnZXROZXN0ZWRUaHJvd2FibGVzKGtlKSwK\nICAgICAgICAgICAgICAgICAgICAgICAgZ2V0RmFpbGVkT2JqZWN0KGtlKSwg\na2UuaXNGYXRhbCgpKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAg\nICAgICBjYXNlIFN0b3JlRXhjZXB0aW9uLk9CSkVDVF9FWElTVFM6CiAgICAg\nICAgICAgICAgICBlID0gbmV3IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0\nZW5jZS5FbnRpdHlFeGlzdHNFeGNlcHRpb24KICAgICAgICAgICAgICAgICAg\nICAoa2UuZ2V0TWVzc2FnZSgpLCBnZXROZXN0ZWRUaHJvd2FibGVzKGtlKSwK\nICAgICAgICAgICAgICAgICAgICAgICAgZ2V0RmFpbGVkT2JqZWN0KGtlKSwg\na2UuaXNGYXRhbCgpKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAg\nICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgZSA9IG5ldyBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuUGVyc2lzdGVuY2VFeGNlcHRpb24K\nICAgICAgICAgICAgICAgICAgICAoa2UuZ2V0TWVzc2FnZSgpLCBnZXROZXN0\nZWRUaHJvd2FibGVzKGtlKSwKICAgICAgICAgICAgICAgICAgICAgICAgZ2V0\nRmFpbGVkT2JqZWN0KGtlKSwga2UuaXNGYXRhbCgpKTsKICAgICAgICB9CiAg\nICAgICAgZS5zZXRTdGFja1RyYWNlKGtlLmdldFN0YWNrVHJhY2UoKSk7CiAg\nICAgICAgcmV0dXJuIGU7CiAgICB9CgogICAgLyoqCiAgICAgKiBUcmFuc2xh\ndGUgdGhlIGdpdmVuIHVzZXIgZXhjZXB0aW9uLgogICAgICovCiAgICBwcml2\nYXRlIHN0YXRpYyBFeGNlcHRpb24gdHJhbnNsYXRlVXNlckV4Y2VwdGlvbihP\ncGVuSlBBRXhjZXB0aW9uIGtlKSB7CiAgICAgICAgRXhjZXB0aW9uIGU7CiAg\nICAgICAgc3dpdGNoIChrZS5nZXRTdWJ0eXBlKCkpIHsKICAgICAgICAgICAg\nY2FzZSBVc2VyRXhjZXB0aW9uLk5PX1RSQU5TQUNUSU9OOgogICAgICAgICAg\nICAgICAgZSA9IG5ldyAKICAgICAgICAgICAgICAgICAgICBvcmcuYXBhY2hl\nLm9wZW5qcGEucGVyc2lzdGVuY2UuVHJhbnNhY3Rpb25SZXF1aXJlZEV4Y2Vw\ndGlvbgogICAgICAgICAgICAgICAgICAgICAgICAoa2UuZ2V0TWVzc2FnZSgp\nLCBnZXROZXN0ZWRUaHJvd2FibGVzKGtlKSwKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgIGdldEZhaWxlZE9iamVjdChrZSksIGtlLmlzRmF0YWwoKSk7\nCiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBVc2Vy\nRXhjZXB0aW9uLk5PX1JFU1VMVDoKICAgICAgICAgICAgICAgIGUgPSBuZXcg\nb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk5vUmVzdWx0RXhjZXB0\naW9uCiAgICAgICAgICAgICAgICAgICAgKGtlLmdldE1lc3NhZ2UoKSwgZ2V0\nTmVzdGVkVGhyb3dhYmxlcyhrZSksCiAgICAgICAgICAgICAgICAgICAgICAg\nIGdldEZhaWxlZE9iamVjdChrZSksIGtlLmlzRmF0YWwoKSk7CiAgICAgICAg\nICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBVc2VyRXhjZXB0aW9u\nLk5PTl9VTklRVUVfUkVTVUxUOgogICAgICAgICAgICAgICAgZSA9IG5ldyBv\ncmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuTm9uVW5pcXVlUmVzdWx0\nRXhjZXB0aW9uCiAgICAgICAgICAgICAgICAgICAgKGtlLmdldE1lc3NhZ2Uo\nKSwgZ2V0TmVzdGVkVGhyb3dhYmxlcyhrZSksCiAgICAgICAgICAgICAgICAg\nICAgICAgIGdldEZhaWxlZE9iamVjdChrZSksIGtlLmlzRmF0YWwoKSk7CiAg\nICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBVc2VyRXhj\nZXB0aW9uLklOVkFMSURfU1RBVEU6CiAgICAgICAgICAgICAgICBlID0gbmV3\nIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5JbnZhbGlkU3RhdGVF\neGNlcHRpb24KICAgICAgICAgICAgICAgICAgICAoa2UuZ2V0TWVzc2FnZSgp\nLCBnZXROZXN0ZWRUaHJvd2FibGVzKGtlKSwKICAgICAgICAgICAgICAgICAg\nICAgICAgZ2V0RmFpbGVkT2JqZWN0KGtlKSwga2UuaXNGYXRhbCgpKTsKICAg\nICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBkZWZhdWx0OgogICAg\nICAgICAgICAgICAgZSA9IG5ldyBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lz\ndGVuY2UuQXJndW1lbnRFeGNlcHRpb24KICAgICAgICAgICAgICAgICAgICAo\na2UuZ2V0TWVzc2FnZSgpLCBnZXROZXN0ZWRUaHJvd2FibGVzKGtlKSwKICAg\nICAgICAgICAgICAgICAgICAgICAgZ2V0RmFpbGVkT2JqZWN0KGtlKSwga2Uu\naXNGYXRhbCgpKTsKICAgICAgICB9CiAgICAgICAgZS5zZXRTdGFja1RyYWNl\nKGtlLmdldFN0YWNrVHJhY2UoKSk7CiAgICAgICAgcmV0dXJuIGU7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBUcmFuc2xhdGUgdGhlIGdpdmVuIGdlbmVyYWwg\nZXhjZXB0aW9uLgogICAgICovCiAgICBwcml2YXRlIHN0YXRpYyBUaHJvd2Fi\nbGUgdHJhbnNsYXRlR2VuZXJhbEV4Y2VwdGlvbihPcGVuSlBBRXhjZXB0aW9u\nIGtlKSB7CiAgICAgICAgRXhjZXB0aW9uIGUgPSBuZXcgb3JnLmFwYWNoZS5v\ncGVuanBhLnBlcnNpc3RlbmNlLlBlcnNpc3RlbmNlRXhjZXB0aW9uCiAgICAg\nICAgICAgIChrZS5nZXRNZXNzYWdlKCksIGdldE5lc3RlZFRocm93YWJsZXMo\na2UpLAogICAgICAgICAgICAgICAgZ2V0RmFpbGVkT2JqZWN0KGtlKSwga2Uu\naXNGYXRhbCgpKTsKICAgICAgICBlLnNldFN0YWNrVHJhY2Uoa2UuZ2V0U3Rh\nY2tUcmFjZSgpKTsKICAgICAgICByZXR1cm4gZTsKICAgIH0KCiAgICAvKioK\nICAgICAqIFJldHVybiB0cnVlIGlmIHRoZSBnaXZlbiBleGNlcHRpb24gaXMg\nYSBwZXJzaXN0ZW5jZSBleGNlcHRpb24uCiAgICAgKi8KICAgIHByaXZhdGUg\nc3RhdGljIGJvb2xlYW4gaXNQZXJzaXN0ZW5jZUV4Y2VwdGlvbihUaHJvd2Fi\nbGUgdCkgewogICAgICAgIHJldHVybiB0LmdldENsYXNzKCkuZ2V0TmFtZSgp\nCiAgICAgICAgICAgIC5zdGFydHNXaXRoKCJvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2UuIik7CiAgICB9CgogICAgLyoqCiAgICAgKiBUcmFuc2xh\ndGUgdGhlIG5lc3RlZCB0aHJvd2FibGVzIG9mIHRoZSBnaXZlbiBvcGVuanBh\nIGV4Y2VwdGlvbiBpbnRvCiAgICAgKiBuZXN0ZWQgdGhyb3dhYmxlcyBmb3Ig\nYSBwZXJzaXN0ZW5jZSBleGNlcHRpb24uCiAgICAgKi8KICAgIHByaXZhdGUg\nc3RhdGljIFRocm93YWJsZVtdIGdldE5lc3RlZFRocm93YWJsZXMoT3BlbkpQ\nQUV4Y2VwdGlvbiBrZSkgewogICAgICAgIFRocm93YWJsZVtdIG5lc3RlZCA9\nIGtlLmdldE5lc3RlZFRocm93YWJsZXMoKTsKICAgICAgICBpZiAobmVzdGVk\nLmxlbmd0aCA9PSAwKQogICAgICAgICAgICByZXR1cm4gbmVzdGVkOwoKICAg\nICAgICBUaHJvd2FibGVbXSB0cmFucyA9IG5ldyBUaHJvd2FibGVbbmVzdGVk\nLmxlbmd0aF07CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuZXN0ZWQu\nbGVuZ3RoOyBpKyspCiAgICAgICAgICAgIHRyYW5zW2ldID0gdHJhbnNsYXRl\nRXhjZXB0aW9uKG5lc3RlZFtpXSwgZmFsc2UpOwogICAgICAgIHJldHVybiB0\ncmFuczsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgZmFpbGVk\nIG9iamVjdCBmb3IgdGhlIGdpdmVuIGV4Y2VwdGlvbiwgcGVyZm9ybWluZyBh\nbnkKICAgICAqIG5lY2Vzc2FyeSBjb252ZXJzaW9ucy4KICAgICAqLwogICAg\ncHJpdmF0ZSBzdGF0aWMgT2JqZWN0IGdldEZhaWxlZE9iamVjdChPcGVuSlBB\nRXhjZXB0aW9uIGtlKSB7CiAgICAgICAgT2JqZWN0IG8gPSBrZS5nZXRGYWls\nZWRPYmplY3QoKTsKICAgICAgICBpZiAobyA9PSBudWxsKQogICAgICAgICAg\nICByZXR1cm4gbnVsbDsKICAgICAgICBpZiAobyBpbnN0YW5jZW9mIEJyb2tl\ncikKICAgICAgICAgICAgcmV0dXJuIEpQQUZhY2FkZUhlbHBlci50b0VudGl0\neU1hbmFnZXIoKEJyb2tlcikgbyk7CiAgICAgICAgcmV0dXJuIEpQQUZhY2Fk\nZUhlbHBlci5mcm9tT3BlbkpQQU9iamVjdElkKG8pOwogICAgfQoKICAgIC8q\nKgogICAgICogSGVscGVyIG1ldGhvZCB0byBleHRyYWN0IGEgbmVzdGVkIGV4\nY2VwdGlvbiBmcm9tIGFuIGludGVybmFsIG5lc3RlZAogICAgICogYXJyYXkg\naW4gYSBzYWZlIHdheS4KICAgICAqLwogICAgc3RhdGljIFRocm93YWJsZSBn\nZXRDYXVzZShUaHJvd2FibGVbXSBuZXN0ZWQpIHsKICAgICAgICBpZiAobmVz\ndGVkID09IG51bGwgfHwgbmVzdGVkLmxlbmd0aCA9PSAwKQogICAgICAgICAg\nICByZXR1cm4gbnVsbDsKCQlyZXR1cm4gbmVzdGVkWzBdOwoJfQp9Cg==\n","encoding":"base64"}

