{"sha":"e025b3088614ead777fa689683807e11916ea71d","node_id":"MDQ6QmxvYjIwNjM2NDplMDI1YjMwODg2MTRlYWQ3NzdmYTY4OTY4MzgwN2UxMTkxNmVhNzFk","size":17030,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/e025b3088614ead777fa689683807e11916ea71d","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2U7CgppbXBv\ncnQgamF2YS5pby5GaWxlOwppbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsK\naW1wb3J0IGphdmEubmV0LlVSTDsKaW1wb3J0IGphdmEuc2VjdXJpdHkuQWNj\nZXNzQ29udHJvbGxlcjsKaW1wb3J0IGphdmEudXRpbC5BcnJheXM7CmltcG9y\ndCBqYXZhLnV0aWwuQ29sbGVjdGlvbjsKaW1wb3J0IGphdmEudXRpbC5Db2xs\nZWN0aW9uczsKaW1wb3J0IGphdmEudXRpbC5IYXNoTWFwOwppbXBvcnQgamF2\nYS51dGlsLkhhc2hTZXQ7CmltcG9ydCBqYXZhLnV0aWwuTWFwOwppbXBvcnQg\namF2YS51dGlsLlNldDsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVtYmVk\nZGFibGU7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHk7CmltcG9y\ndCBqYXZheC5wZXJzaXN0ZW5jZS5NYXBwZWRTdXBlcmNsYXNzOwppbXBvcnQg\namF2YXgucGVyc2lzdGVuY2UuTmFtZWRRdWVyaWVzOwppbXBvcnQgamF2YXgu\ncGVyc2lzdGVuY2UuTmFtZWRRdWVyeTsKaW1wb3J0IGphdmF4LnBlcnNpc3Rl\nbmNlLk5hbWVkTmF0aXZlUXVlcmllczsKaW1wb3J0IGphdmF4LnBlcnNpc3Rl\nbmNlLk5hbWVkTmF0aXZlUXVlcnk7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5j\nZS5TcWxSZXN1bHRTZXRNYXBwaW5nOwppbXBvcnQgamF2YXgucGVyc2lzdGVu\nY2UuU3FsUmVzdWx0U2V0TWFwcGluZ3M7CgppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmxpYi5jb25mLkNvbmZpZ3VyYWJsZTsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5saWIuY29uZi5Db25maWd1cmF0aW9uOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmxpYi5jb25mLkdlbmVyaWNDb25maWd1cmFibGU7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLm1ldGEuQ2xhc3NBbm5v\ndGF0aW9uTWV0YURhdGFGaWx0ZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEubGliLm1ldGEuQ2xhc3NBcmdQYXJzZXI7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEubGliLm1ldGEuTWV0YURhdGFGaWx0ZXI7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEubGliLm1ldGEuTWV0YURhdGFQYXJzZXI7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuSjJEb1ByaXZIZWxwZXI7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVy\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLk9wdGlvbnM7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5BYnN0cmFjdENGTWV0\nYURhdGFGYWN0b3J5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEu\nQ2xhc3NNZXRhRGF0YTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRh\nLkZpZWxkTWV0YURhdGE7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0\nYS5NZXRhRGF0YURlZmF1bHRzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLm1ldGEuTWV0YURhdGFGYWN0b3J5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLm1ldGEuUXVlcnlNZXRhRGF0YTsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5tZXRhLlNlcXVlbmNlTWV0YURhdGE7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEudXRpbC5HZW5lcmFsRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnV0aWwuTWV0YURhdGFFeGNlcHRpb247CgovKioKICog\ne0BsaW5rIE1ldGFEYXRhRmFjdG9yeX0gZm9yIEpQQSBtZXRhZGF0YS4KICoK\nICogQGF1dGhvciBTdGV2ZSBLaW0KICogQHNpbmNlIDAuNC4wCiAqIEBub2ph\ndmFkb2MKICovCnB1YmxpYyBjbGFzcyBQZXJzaXN0ZW5jZU1ldGFEYXRhRmFj\ndG9yeQogICAgZXh0ZW5kcyBBYnN0cmFjdENGTWV0YURhdGFGYWN0b3J5CiAg\nICBpbXBsZW1lbnRzIENvbmZpZ3VyYWJsZSwgR2VuZXJpY0NvbmZpZ3VyYWJs\nZSB7CgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9jYWxpemVyIF9sb2Mg\nPSBMb2NhbGl6ZXIuZm9yUGFja2FnZQogICAgICAgIChQZXJzaXN0ZW5jZU1l\ndGFEYXRhRmFjdG9yeS5jbGFzcyk7CgogICAgcHJpdmF0ZSBmaW5hbCBQZXJz\naXN0ZW5jZU1ldGFEYXRhRGVmYXVsdHMgX2RlZiA9IAogICAgICAgIG5ldyBQ\nZXJzaXN0ZW5jZU1ldGFEYXRhRGVmYXVsdHMoKTsKICAgIHByaXZhdGUgQW5u\nb3RhdGlvblBlcnNpc3RlbmNlTWV0YURhdGFQYXJzZXIgX2Fubm9QYXJzZXIg\nPSBudWxsOwogICAgcHJpdmF0ZSBBbm5vdGF0aW9uUGVyc2lzdGVuY2VYTUxN\nZXRhRGF0YVBhcnNlciBfYW5ub1hNTFBhcnNlciA9IG51bGw7CiAgICBwcml2\nYXRlIFhNTFBlcnNpc3RlbmNlTWV0YURhdGFQYXJzZXIgX3htbFBhcnNlciA9\nIG51bGw7CiAgICBwcml2YXRlIE1hcDxVUkwsIFNldD4gX3htbCA9IG51bGw7\nIC8vIHhtbCByc3JjIC0+IGNsYXNzIG5hbWVzCiAgICBwcml2YXRlIFNldDxV\nUkw+IF91bnBhcnNlZCA9IG51bGw7IC8vIHhtbCByc3JjCiAgICBwcml2YXRl\nIGJvb2xlYW4gX2ZpZWxkT3ZlcnJpZGUgPSB0cnVlOwoKICAgIC8qKgogICAg\nICogV2hldGhlciB0byB1c2UgZmllbGQtbGV2ZWwgb3ZlcnJpZGUgb3IgY2xh\nc3MtbGV2ZWwgb3ZlcnJpZGUuCiAgICAgKiBEZWZhdWx0cyB0byB0cnVlLgog\nICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRGaWVsZE92ZXJyaWRlKGJvb2xl\nYW4gZmllbGQpIHsKICAgICAgICBfZmllbGRPdmVycmlkZSA9IGZpZWxkOwog\nICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciB0byB1c2UgZmllbGQtbGV2\nZWwgb3ZlcnJpZGUgb3IgY2xhc3MtbGV2ZWwgb3ZlcnJpZGUuCiAgICAgKiBE\nZWZhdWx0cyB0byB0cnVlLgogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBn\nZXRGaWVsZE92ZXJyaWRlKCkgewogICAgICAgIHJldHVybiBfZmllbGRPdmVy\ncmlkZTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiBtZXRhZGF0YSBw\nYXJzZXIsIGNyZWF0aW5nIGl0IGlmIGl0IGRvZXMgbm90IGFscmVhZHkgZXhp\nc3QuCiAgICAgKi8KICAgIHB1YmxpYyBBbm5vdGF0aW9uUGVyc2lzdGVuY2VN\nZXRhRGF0YVBhcnNlciBnZXRBbm5vdGF0aW9uUGFyc2VyKCkgewogICAgICAg\nIGlmIChfYW5ub1BhcnNlciA9PSBudWxsKSB7CiAgICAgICAgICAgIF9hbm5v\nUGFyc2VyID0gbmV3QW5ub3RhdGlvblBhcnNlcigpOwogICAgICAgICAgICBf\nYW5ub1BhcnNlci5zZXRSZXBvc2l0b3J5KHJlcG9zKTsKICAgICAgICB9CiAg\nICAgICAgcmV0dXJuIF9hbm5vUGFyc2VyOwogICAgfQoKICAgIC8qKgogICAg\nICogU2V0IHRoZSBtZXRhZGF0YSBwYXJzZXIuCiAgICAgKi8KICAgIHB1Ymxp\nYyB2b2lkIHNldEFubm90YXRpb25QYXJzZXIoCiAgICAgICAgQW5ub3RhdGlv\nblBlcnNpc3RlbmNlTWV0YURhdGFQYXJzZXIgcGFyc2VyKSB7CiAgICAgICAg\naWYgKF9hbm5vUGFyc2VyICE9IG51bGwpCiAgICAgICAgICAgIF9hbm5vUGFy\nc2VyLnNldFJlcG9zaXRvcnkobnVsbCk7CiAgICAgICAgaWYgKHBhcnNlciAh\nPSBudWxsKQogICAgICAgICAgICBwYXJzZXIuc2V0UmVwb3NpdG9yeShyZXBv\ncyk7CiAgICAgICAgX2Fubm9QYXJzZXIgPSBwYXJzZXI7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBDcmVhdGUgYSBuZXcgbWV0YWRhdGEgcGFyc2VyLgogICAg\nICovCiAgICBwcm90ZWN0ZWQgQW5ub3RhdGlvblBlcnNpc3RlbmNlTWV0YURh\ndGFQYXJzZXIgbmV3QW5ub3RhdGlvblBhcnNlcigpIHsKICAgICAgICByZXR1\ncm4gbmV3IEFubm90YXRpb25QZXJzaXN0ZW5jZU1ldGFEYXRhUGFyc2VyCiAg\nICAgICAgICAgIChyZXBvcy5nZXRDb25maWd1cmF0aW9uKCkpOwogICAgfQoK\nICAgIC8qKgogICAgICogQ3JlYXRlIGEgbmV3IGFubm90YXRpb24gc2VyaWFs\naXplci4KICAgICAqLwogICAgcHJvdGVjdGVkIEFubm90YXRpb25QZXJzaXN0\nZW5jZU1ldGFEYXRhU2VyaWFsaXplcgogICAgICAgIG5ld0Fubm90YXRpb25T\nZXJpYWxpemVyKCkgewogICAgICAgIHJldHVybiBuZXcgQW5ub3RhdGlvblBl\ncnNpc3RlbmNlTWV0YURhdGFTZXJpYWxpemVyCiAgICAgICAgICAgIChyZXBv\ncy5nZXRDb25maWd1cmF0aW9uKCkpOwogICAgfQoKICAgIC8qKgogICAgICog\nUmV0dXJuIFhNTCBtZXRhZGF0YSBwYXJzZXIsIGNyZWF0aW5nIGl0IGlmIGl0\nIGRvZXMgbm90IGFscmVhZHkgZXhpc3QuCiAgICAgKi8KICAgIHB1YmxpYyBY\nTUxQZXJzaXN0ZW5jZU1ldGFEYXRhUGFyc2VyIGdldFhNTFBhcnNlcigpIHsK\nICAgICAgICBpZiAoX3htbFBhcnNlciA9PSBudWxsKSB7CiAgICAgICAgICAg\nIF94bWxQYXJzZXIgPSBuZXdYTUxQYXJzZXIodHJ1ZSk7CiAgICAgICAgICAg\nIF94bWxQYXJzZXIuc2V0UmVwb3NpdG9yeShyZXBvcyk7CiAgICAgICAgICAg\nIGlmIChfZmllbGRPdmVycmlkZSkKICAgICAgICAgICAgICAgIF94bWxQYXJz\nZXIuc2V0QW5ub3RhdGlvblBhcnNlcihnZXRBbm5vdGF0aW9uUGFyc2VyKCkp\nOwogICAgICAgIH0KICAgICAgICByZXR1cm4gX3htbFBhcnNlcjsKICAgIH0K\nCiAgICAvKioKICAgICAqIFNldCB0aGUgbWV0YWRhdGEgcGFyc2VyLgogICAg\nICovCiAgICBwdWJsaWMgdm9pZCBzZXRYTUxQYXJzZXIoWE1MUGVyc2lzdGVu\nY2VNZXRhRGF0YVBhcnNlciBwYXJzZXIpIHsKICAgICAgICBpZiAoX3htbFBh\ncnNlciAhPSBudWxsKQogICAgICAgICAgICBfeG1sUGFyc2VyLnNldFJlcG9z\naXRvcnkobnVsbCk7CiAgICAgICAgaWYgKHBhcnNlciAhPSBudWxsKQogICAg\nICAgICAgICBwYXJzZXIuc2V0UmVwb3NpdG9yeShyZXBvcyk7CiAgICAgICAg\nX3htbFBhcnNlciA9IHBhcnNlcjsKICAgIH0KCiAgICAvKioKICAgICAqIENy\nZWF0ZSBhIG5ldyBtZXRhZGF0YSBwYXJzZXIuCiAgICAgKi8KICAgIHByb3Rl\nY3RlZCBYTUxQZXJzaXN0ZW5jZU1ldGFEYXRhUGFyc2VyIG5ld1hNTFBhcnNl\ncihib29sZWFuIGxvYWRpbmcpIHsKICAgICAgICByZXR1cm4gbmV3IFhNTFBl\ncnNpc3RlbmNlTWV0YURhdGFQYXJzZXIocmVwb3MuZ2V0Q29uZmlndXJhdGlv\nbigpKTsKICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhIG5ldyBzZXJp\nYWxpemVyCiAgICAgKi8KICAgIHByb3RlY3RlZCBYTUxQZXJzaXN0ZW5jZU1l\ndGFEYXRhU2VyaWFsaXplciBuZXdYTUxTZXJpYWxpemVyKCkgewogICAgICAg\nIHJldHVybiBuZXcgWE1MUGVyc2lzdGVuY2VNZXRhRGF0YVNlcmlhbGl6ZXIo\ncmVwb3MuZ2V0Q29uZmlndXJhdGlvbigpKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBsb2FkKENsYXNzIGNscywgaW50IG1vZGUsIENsYXNzTG9hZGVyIGVu\ndkxvYWRlcikgewogICAgICAgIGlmIChtb2RlID09IE1PREVfTk9ORSkKICAg\nICAgICAgICAgcmV0dXJuOwogICAgICAgIGlmICghc3RyaWN0ICYmIChtb2Rl\nICYgTU9ERV9NRVRBKSAhPSAwKQogICAgICAgICAgICBtb2RlIHw9IE1PREVf\nTUFQUElORzsKCiAgICAgICAgLy8gZ2V0dGluZyB0aGUgbGlzdCBvZiBwZXJz\naXN0ZW50IHR5cGVzIHJ1bnMgY2FsbGJhY2tzIHRvCiAgICAgICAgLy8gbWFw\nUGVyc2lzdGVudFR5cGVOYW1lcyBpZiBpdCBoYXNuJ3QgYmVlbiBjYWxsZWQg\nYWxyZWFkeSwgd2hpY2gKICAgICAgICAvLyBjYWNoZXMgWE1MIHJlc291cmNl\ncwogICAgICAgIGdldFBlcnNpc3RlbnRUeXBlTmFtZXMoZmFsc2UsIGVudkxv\nYWRlcik7CiAgICAgICAgVVJMIHhtbCA9IGZpbmRYTUwoY2xzKTsKCiAgICAg\nICAgLy8gd2UgaGF2ZSB0byBwYXJzZSBtZXRhZGF0YSB1cC1mcm9udCB0byBy\nZWdpc3RlciBwZXJzaXN0ZW5jZSB1bml0CiAgICAgICAgLy8gZGVmYXVsdHMg\nYW5kIHN5c3RlbSBjYWxsYmFja3MKICAgICAgICBDbGFzc01ldGFEYXRhIG1l\ndGE7CiAgICAgICAgYm9vbGVhbiBwYXJzZWRYTUwgPSBmYWxzZTsKICAgICAg\nICBpZiAoX3VucGFyc2VkICE9IG51bGwgJiYgIV91bnBhcnNlZC5pc0VtcHR5\nKCkKICAgICAgICAgICAgJiYgKG1vZGUgJiBNT0RFX01FVEEpICE9IDApIHsK\nICAgICAgICAgICAgZm9yIChVUkwgdXJsIDogX3VucGFyc2VkKQogICAgICAg\nICAgICAgICAgcGFyc2VYTUwodXJsLCBjbHMsIG1vZGUsIGVudkxvYWRlcik7\nCiAgICAgICAgICAgIHBhcnNlZFhNTCA9IF91bnBhcnNlZC5jb250YWlucyh4\nbWwpOwogICAgICAgICAgICBfdW5wYXJzZWQuY2xlYXIoKTsKCiAgICAgICAg\nICAgIC8vIFhNTCBwcm9jZXNzIGNoZWNrCiAgICAgICAgICAgIG1ldGEgPSBy\nZXBvcy5nZXRDYWNoZWRNZXRhRGF0YShjbHMpOwogICAgICAgICAgICBpZiAo\nbWV0YSAhPSBudWxsICYmIChtZXRhLmdldFNvdXJjZU1vZGUoKSAmIG1vZGUp\nID09IG1vZGUpIHsKICAgICAgICAgICAgICAgIHZhbGlkYXRlU3RyYXRlZ2ll\ncyhtZXRhKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAg\nfQogICAgICAgIH0KCiAgICAgICAgLy8gbWlnaHQgaGF2ZSBiZWVuIGxvb2tp\nbmcgZm9yIHN5c3RlbS1sZXZlbCBxdWVyeQogICAgICAgIGlmIChjbHMgPT0g\nbnVsbCkKICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICAvLyB3ZSBtYXkg\nc3RpbGwgbmVlZCB0byBwYXJzZSBYTUwgaWYgdGhpcyBpcyBhIHJlZGVwbG95\nIG9mIGEgY2xhc3MsIG9yCiAgICAgICAgLy8gaWYgd2UncmUgaW4gc3RyaWN0\nIHF1ZXJ5LW9ubHkgbW9kZQogICAgICAgIGlmICghcGFyc2VkWE1MICYmIHht\nbCAhPSBudWxsKSB7CiAgICAgICAgICAgIHBhcnNlWE1MKHhtbCwgY2xzLCBt\nb2RlLCBlbnZMb2FkZXIpOwogICAgICAgICAgICAvLyBYTUwgcHJvY2VzcyBj\naGVjawogICAgICAgICAgICBtZXRhID0gcmVwb3MuZ2V0Q2FjaGVkTWV0YURh\ndGEoY2xzKTsKICAgICAgICAgICAgaWYgKG1ldGEgIT0gbnVsbCAmJiAobWV0\nYS5nZXRTb3VyY2VNb2RlKCkgJiBtb2RlKSA9PSBtb2RlKSB7CiAgICAgICAg\nICAgICAgICB2YWxpZGF0ZVN0cmF0ZWdpZXMobWV0YSk7CiAgICAgICAgICAg\nICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAg\nIEFubm90YXRpb25QZXJzaXN0ZW5jZU1ldGFEYXRhUGFyc2VyIHBhcnNlciA9\nIGdldEFubm90YXRpb25QYXJzZXIoKTsKICAgICAgICBwYXJzZXIuc2V0RW52\nQ2xhc3NMb2FkZXIoZW52TG9hZGVyKTsKICAgICAgICBwYXJzZXIuc2V0TW9k\nZShtb2RlKTsKICAgICAgICBwYXJzZXIucGFyc2UoY2xzKTsKCiAgICAgICAg\nbWV0YSA9IHJlcG9zLmdldENhY2hlZE1ldGFEYXRhKGNscyk7CiAgICAgICAg\naWYgKG1ldGEgIT0gbnVsbCAmJiAobWV0YS5nZXRTb3VyY2VNb2RlKCkgJiBt\nb2RlKSA9PSBtb2RlKQogICAgICAgICAgICB2YWxpZGF0ZVN0cmF0ZWdpZXMo\nbWV0YSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBQYXJzZSB0aGUgZ2l2ZW4g\nWE1MIHJlc291cmNlLgogICAgICovCiAgICBwcml2YXRlIHZvaWQgcGFyc2VY\nTUwoVVJMIHhtbCwgQ2xhc3MgY2xzLCBpbnQgbW9kZSwgQ2xhc3NMb2FkZXIg\nZW52TG9hZGVyKSB7CiAgICAgICAgQ2xhc3NMb2FkZXIgbG9hZGVyID0gcmVw\nb3MuZ2V0Q29uZmlndXJhdGlvbigpLgogICAgICAgICAgICBnZXRDbGFzc1Jl\nc29sdmVySW5zdGFuY2UoKS5nZXRDbGFzc0xvYWRlcihjbHMsIGVudkxvYWRl\ncik7CiAgICAgICAgWE1MUGVyc2lzdGVuY2VNZXRhRGF0YVBhcnNlciB4bWxQ\nYXJzZXIgPSBnZXRYTUxQYXJzZXIoKTsKICAgICAgICB4bWxQYXJzZXIuc2V0\nQ2xhc3NMb2FkZXIoZW52TG9hZGVyICE9IG51bGwgPyBlbnZMb2FkZXIgOiBs\nb2FkZXIpOwogICAgICAgIHhtbFBhcnNlci5zZXRFbnZDbGFzc0xvYWRlcihl\nbnZMb2FkZXIpOwogICAgICAgIHhtbFBhcnNlci5zZXRNb2RlKG1vZGUpOwog\nICAgICAgIHRyeSB7CiAgICAgICAgICAgIHhtbFBhcnNlci5wYXJzZSh4bWwp\nOwogICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGlvZSkgewogICAgICAg\nICAgICB0aHJvdyBuZXcgR2VuZXJhbEV4Y2VwdGlvbihpb2UpOwogICAgICAg\nIH0KICAgIH0KCiAgICAvKioKICAgICAqIExvY2F0ZSB0aGUgWE1MIHJlc291\ncmNlIGZvciB0aGUgZ2l2ZW4gY2xhc3MuCiAgICAgKi8KICAgIHByaXZhdGUg\nVVJMIGZpbmRYTUwoQ2xhc3MgY2xzKSB7CiAgICAgICAgaWYgKF94bWwgIT0g\nbnVsbCAmJiBjbHMgIT0gbnVsbCkKICAgICAgICAgICAgZm9yIChNYXAuRW50\ncnk8VVJMLCBTZXQ+IGVudHJ5IDogX3htbC5lbnRyeVNldCgpKQogICAgICAg\nICAgICAgICAgaWYgKGVudHJ5LmdldFZhbHVlKCkuY29udGFpbnMoY2xzLmdl\ndE5hbWUoKSkpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVudHJ5Lmdl\ndEtleSgpOwogICAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIEBPdmVy\ncmlkZQogICAgcHJvdGVjdGVkIHZvaWQgbWFwUGVyc2lzdGVudFR5cGVOYW1l\ncyhPYmplY3QgcnNyYywgU3RyaW5nW10gbmFtZXMpIHsKICAgICAgICBpZiAo\ncnNyYy50b1N0cmluZygpLmVuZHNXaXRoKCIuY2xhc3MiKSkgewogICAgICAg\nICAgICBpZiAobG9nLmlzVHJhY2VFbmFibGVkKCkpCiAgICAgICAgICAgICAg\nICBsb2cudHJhY2UoCiAgICAgICAgICAgICAgICAgICAgX2xvYy5nZXQoIm1h\ncC1wZXJzaXN0ZW50LXR5cGVzLXNraXBwaW5nLWNsYXNzIiwgcnNyYykpOwog\nICAgICAgICAgICByZXR1cm47CiAgICAgICAgfSBlbHNlIGlmICghKHJzcmMg\naW5zdGFuY2VvZiBVUkwpKSB7CiAgICAgICAgICAgIGlmIChsb2cuaXNUcmFj\nZUVuYWJsZWQoKSkKICAgICAgICAgICAgICAgIGxvZy50cmFjZSgKICAgICAg\nICAgICAgICAgICAgICBfbG9jLmdldCgibWFwLXBlcnNpc3RlbnQtdHlwZXMt\nc2tpcHBpbmctbm9uLXVybCIsIHJzcmMpKTsKICAgICAgICAgICAgcmV0dXJu\nOwogICAgICAgIH0KCiAgICAgICAgaWYgKGxvZy5pc1RyYWNlRW5hYmxlZCgp\nKQogICAgICAgICAgICBsb2cudHJhY2UoX2xvYy5nZXQoCiAgICAgICAgICAg\nICAgICAibWFwLXBlcnNpc3RlbnQtdHlwZS1uYW1lcyIsIHJzcmMsIEFycmF5\ncy5hc0xpc3QobmFtZXMpKSk7CiAgICAgICAgCiAgICAgICAgaWYgKF94bWwg\nPT0gbnVsbCkKICAgICAgICAgICAgX3htbCA9IG5ldyBIYXNoTWFwPFVSTCwg\nU2V0PigpOwogICAgICAgIF94bWwucHV0KChVUkwpIHJzcmMsIG5ldyBIYXNo\nU2V0KEFycmF5cy5hc0xpc3QobmFtZXMpKSk7CiAgICAgICAgaWYgKF91bnBh\ncnNlZCA9PSBudWxsKQogICAgICAgICAgICBfdW5wYXJzZWQgPSBuZXcgSGFz\naFNldDxVUkw+KCk7CiAgICAgICAgX3VucGFyc2VkLmFkZCgoVVJMKSByc3Jj\nKTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBDbGFzcyBnZXRR\ndWVyeVNjb3BlKFN0cmluZyBxdWVyeU5hbWUsIENsYXNzTG9hZGVyIGxvYWRl\ncikgewogICAgICAgIGlmIChxdWVyeU5hbWUgPT0gbnVsbCkKICAgICAgICAg\nICAgcmV0dXJuIG51bGw7CiAgICAgICAgQ29sbGVjdGlvbiBjbGFzc2VzID0g\ncmVwb3MubG9hZFBlcnNpc3RlbnRUeXBlcyhmYWxzZSwgbG9hZGVyKTsKICAg\nICAgICBmb3IgKENsYXNzIGNscyA6IChDb2xsZWN0aW9uPENsYXNzPikgY2xh\nc3NlcykgewogICAgICAgICAgICBpZiAoY2xzLmlzQW5ub3RhdGlvblByZXNl\nbnQoTmFtZWRRdWVyeS5jbGFzcykgJiYgaGFzTmFtZWRRdWVyeQogICAgICAg\nICAgICAgICAgKHF1ZXJ5TmFtZSwgKE5hbWVkUXVlcnkpIGNscy5nZXRBbm5v\ndGF0aW9uKE5hbWVkUXVlcnkuY2xhc3MpKSkKICAgICAgICAgICAgICAgIHJl\ndHVybiBjbHM7CiAgICAgICAgICAgIGlmIChjbHMuaXNBbm5vdGF0aW9uUHJl\nc2VudChOYW1lZFF1ZXJpZXMuY2xhc3MpICYmCiAgICAgICAgICAgICAgICBo\nYXNOYW1lZFF1ZXJ5KHF1ZXJ5TmFtZSwgKChOYW1lZFF1ZXJpZXMpIGNscy4K\nICAgICAgICAgICAgICAgICAgICBnZXRBbm5vdGF0aW9uKE5hbWVkUXVlcmll\ncy5jbGFzcykpLnZhbHVlKCkpKQogICAgICAgICAgICAgICAgcmV0dXJuIGNs\nczsKICAgICAgICAgICAgaWYgKGNscy5pc0Fubm90YXRpb25QcmVzZW50KE5h\nbWVkTmF0aXZlUXVlcnkuY2xhc3MpICYmCiAgICAgICAgICAgICAgICBoYXNO\nYW1lZE5hdGl2ZVF1ZXJ5KHF1ZXJ5TmFtZSwgKE5hbWVkTmF0aXZlUXVlcnkp\nIGNscy4KICAgICAgICAgICAgICAgICAgICBnZXRBbm5vdGF0aW9uKE5hbWVk\nTmF0aXZlUXVlcnkuY2xhc3MpKSkKICAgICAgICAgICAgICAgIHJldHVybiBj\nbHM7CiAgICAgICAgICAgIGlmIChjbHMuaXNBbm5vdGF0aW9uUHJlc2VudChO\nYW1lZE5hdGl2ZVF1ZXJpZXMuY2xhc3MpICYmCiAgICAgICAgICAgICAgICBo\nYXNOYW1lZE5hdGl2ZVF1ZXJ5KHF1ZXJ5TmFtZSwgKChOYW1lZE5hdGl2ZVF1\nZXJpZXMpIGNscy4KICAgICAgICAgICAgICAgICAgICBnZXRBbm5vdGF0aW9u\nKE5hbWVkTmF0aXZlUXVlcmllcy5jbGFzcykpLnZhbHVlKCkpKQogICAgICAg\nICAgICAgICAgcmV0dXJuIGNsczsKICAgICAgICB9CiAgICAgICAgcmV0dXJu\nIG51bGw7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgQ2xhc3Mg\nZ2V0UmVzdWx0U2V0TWFwcGluZ1Njb3BlKFN0cmluZyByc01hcHBpbmdOYW1l\nLAogICAgICAgIENsYXNzTG9hZGVyIGxvYWRlcikgewogICAgICAgIGlmIChy\nc01hcHBpbmdOYW1lID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBudWxs\nOwogICAgICAgIAogICAgICAgIENvbGxlY3Rpb24gY2xhc3NlcyA9IHJlcG9z\nLmxvYWRQZXJzaXN0ZW50VHlwZXMoZmFsc2UsIGxvYWRlcik7CiAgICAgICAg\nZm9yIChDbGFzcyBjbHMgOiAoQ29sbGVjdGlvbjxDbGFzcz4pIGNsYXNzZXMp\nIHsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIChjbHMuaXNBbm5vdGF0\naW9uUHJlc2VudChTcWxSZXN1bHRTZXRNYXBwaW5nLmNsYXNzKSAmJiAKICAg\nICAgICAgICAgICAgIGhhc1JTTWFwcGluZyhyc01hcHBpbmdOYW1lLCAoU3Fs\nUmVzdWx0U2V0TWFwcGluZykgY2xzLgogICAgICAgICAgICAgICAgZ2V0QW5u\nb3RhdGlvbihTcWxSZXN1bHRTZXRNYXBwaW5nLmNsYXNzKSkpCiAgICAgICAg\nICAgICAgICByZXR1cm4gY2xzOwogICAgICAgICAgICAKICAgICAgICAgICAg\naWYgKGNscy5pc0Fubm90YXRpb25QcmVzZW50KFNxbFJlc3VsdFNldE1hcHBp\nbmdzLmNsYXNzKSAmJiAKICAgICAgICAgICAgICAgIGhhc1JTTWFwcGluZyhy\nc01hcHBpbmdOYW1lLCAoKFNxbFJlc3VsdFNldE1hcHBpbmdzKSBjbHMuCiAg\nICAgICAgICAgICAgICBnZXRBbm5vdGF0aW9uKFNxbFJlc3VsdFNldE1hcHBp\nbmdzLmNsYXNzKSkudmFsdWUoKSkpCiAgICAgICAgICAgICAgICByZXR1cm4g\nY2xzOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAg\nICBwcml2YXRlIGJvb2xlYW4gaGFzTmFtZWRRdWVyeShTdHJpbmcgcXVlcnks\nIE5hbWVkUXVlcnkuLi4gcXVlcmllcykgewogICAgICAgIGZvciAoTmFtZWRR\ndWVyeSBxIDogcXVlcmllcykgewogICAgICAgICAgICBpZiAocXVlcnkuZXF1\nYWxzKHEubmFtZSgpKSkKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwog\nICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgcHJp\ndmF0ZSBib29sZWFuIGhhc1JTTWFwcGluZyhTdHJpbmcgcnNNYXBwaW5nLAog\nICAgICAgIFNxbFJlc3VsdFNldE1hcHBpbmcuLi4gbWFwcGluZ3MpIHsKICAg\nICAgICBmb3IgKFNxbFJlc3VsdFNldE1hcHBpbmcgbSA6IG1hcHBpbmdzKSB7\nCiAgICAgICAgICAgIGlmIChyc01hcHBpbmcuZXF1YWxzKG0ubmFtZSgpKSkK\nICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAg\nICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgcHJpdmF0ZSBib29sZWFuIGhh\nc05hbWVkTmF0aXZlUXVlcnkoU3RyaW5nIHF1ZXJ5LAogICAgICAgIE5hbWVk\nTmF0aXZlUXVlcnkuLi4gcXVlcmllcykgewogICAgICAgIGZvciAoTmFtZWRO\nYXRpdmVRdWVyeSBxIDogcXVlcmllcykgewogICAgICAgICAgICBpZiAocXVl\ncnkuZXF1YWxzKHEubmFtZSgpKSkKICAgICAgICAgICAgICAgIHJldHVybiB0\ncnVlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9Cgog\nICAgQE92ZXJyaWRlCiAgICBwcm90ZWN0ZWQgTWV0YURhdGFGaWx0ZXIgbmV3\nTWV0YURhdGFGaWx0ZXIoKSB7CiAgICAgICAgcmV0dXJuIG5ldyBDbGFzc0Fu\nbm90YXRpb25NZXRhRGF0YUZpbHRlcihuZXcgQ2xhc3NbXXsKICAgICAgICAg\nICAgRW50aXR5LmNsYXNzLCBFbWJlZGRhYmxlLmNsYXNzLCBNYXBwZWRTdXBl\ncmNsYXNzLmNsYXNzIH0pOwogICAgfQoKICAgIC8qKgogICAgICogRW5zdXJl\nIGFsbCBmaWVsZHMgaGF2ZSBkZWNsYXJlZCBhIHN0cmF0ZWd5LgogICAgICov\nCiAgICBwcml2YXRlIHZvaWQgdmFsaWRhdGVTdHJhdGVnaWVzKENsYXNzTWV0\nYURhdGEgbWV0YSkgewogICAgICAgIFN0cmluZ0J1ZmZlciBidWYgPSBudWxs\nOwogICAgICAgIGZvciAoRmllbGRNZXRhRGF0YSBmbWQgOiBtZXRhLmdldERl\nY2xhcmVkRmllbGRzKCkpIHsKICAgICAgICAgICAgaWYgKCFmbWQuaXNFeHBs\naWNpdCgpKSB7CiAgICAgICAgICAgICAgICBpZiAoYnVmID09IG51bGwpCiAg\nICAgICAgICAgICAgICAgICAgYnVmID0gbmV3IFN0cmluZ0J1ZmZlcigpOwog\nICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGJ1Zi5h\ncHBlbmQoIiwgIik7CiAgICAgICAgICAgICAgICBidWYuYXBwZW5kKGZtZCk7\nCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGJ1ZiAhPSBu\ndWxsKQogICAgICAgICAgICB0aHJvdyBuZXcgTWV0YURhdGFFeGNlcHRpb24o\nX2xvYy5nZXQoIm5vLXBlcnMtc3RyYXQiLCBidWYpKTsKICAgIH0KCiAgICBw\ndWJsaWMgTWV0YURhdGFEZWZhdWx0cyBnZXREZWZhdWx0cygpIHsKICAgICAg\nICByZXR1cm4gX2RlZjsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1Ymxp\nYyBDbGFzc0FyZ1BhcnNlciBuZXdDbGFzc0FyZ1BhcnNlcigpIHsKICAgICAg\nICBDbGFzc0FyZ1BhcnNlciBwYXJzZXIgPSBuZXcgQ2xhc3NBcmdQYXJzZXIo\nKTsKICAgICAgICBwYXJzZXIuc2V0TWV0YURhdGFTdHJ1Y3R1cmUoInBhY2th\nZ2UiLCBudWxsLCBuZXcgU3RyaW5nW117CiAgICAgICAgICAgICJlbnRpdHki\nLCAiZW1iZWRkYWJsZSIsICJtYXBwZWQtc3VwZXJjbGFzcyIgfSwgImNsYXNz\nIik7CiAgICAgICAgcmV0dXJuIHBhcnNlcjsKICAgIH0KCiAgICBAT3ZlcnJp\nZGUKICAgIHB1YmxpYyB2b2lkIGNsZWFyKCkgewogICAgICAgIHN1cGVyLmNs\nZWFyKCk7CiAgICAgICAgaWYgKF9hbm5vUGFyc2VyICE9IG51bGwpCiAgICAg\nICAgICAgIF9hbm5vUGFyc2VyLmNsZWFyKCk7CiAgICAgICAgaWYgKF94bWxQ\nYXJzZXIgIT0gbnVsbCkKICAgICAgICAgICAgX3htbFBhcnNlci5jbGVhcigp\nOwogICAgICAgIGlmIChfeG1sICE9IG51bGwpCiAgICAgICAgICAgIF94bWwu\nY2xlYXIoKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgUGFyc2VyIG5ld1BhcnNl\ncihib29sZWFuIGxvYWRpbmcpIHsKICAgICAgICByZXR1cm4gbmV3WE1MUGFy\nc2VyKGxvYWRpbmcpOwogICAgfQoKICAgIHByb3RlY3RlZCBTZXJpYWxpemVy\nIG5ld1NlcmlhbGl6ZXIoKSB7CiAgICAgICAgcmV0dXJuIG5ld1hNTFNlcmlh\nbGl6ZXIoKTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHByb3RlY3RlZCB2\nb2lkIHBhcnNlKE1ldGFEYXRhUGFyc2VyIHBhcnNlciwgQ2xhc3NbXSBjbHMp\nIHsKICAgICAgICBwYXJzZShwYXJzZXIsIENvbGxlY3Rpb25zLnNpbmdsZXRv\nbihkZWZhdWx0WE1MRmlsZSgpKSk7CiAgICB9CgogICAgcHJvdGVjdGVkIEZp\nbGUgZGVmYXVsdFNvdXJjZUZpbGUoQ2xhc3NNZXRhRGF0YSBtZXRhKSB7CiAg\nICAgICAgcmV0dXJuIGRlZmF1bHRYTUxGaWxlKCk7CiAgICB9CgogICAgcHJv\ndGVjdGVkIEZpbGUgZGVmYXVsdFNvdXJjZUZpbGUoUXVlcnlNZXRhRGF0YSBx\ndWVyeSwgTWFwIGNsc05hbWVzKSB7CiAgICAgICAgQ2xhc3NNZXRhRGF0YSBt\nZXRhID0gZ2V0RGVmaW5pbmdNZXRhRGF0YShxdWVyeSwgY2xzTmFtZXMpOwog\nICAgICAgIEZpbGUgZmlsZSA9IChtZXRhID09IG51bGwpID8gbnVsbCA6IG1l\ndGEuZ2V0U291cmNlRmlsZSgpOwogICAgICAgIGlmIChmaWxlICE9IG51bGwp\nCiAgICAgICAgICAgIHJldHVybiBmaWxlOwogICAgICAgIHJldHVybiBkZWZh\ndWx0WE1MRmlsZSgpOwogICAgfQoKICAgIHByb3RlY3RlZCBGaWxlIGRlZmF1\nbHRTb3VyY2VGaWxlKFNlcXVlbmNlTWV0YURhdGEgc2VxLCBNYXAgY2xzTmFt\nZXMpIHsKICAgICAgICByZXR1cm4gZGVmYXVsdFhNTEZpbGUoKTsKICAgIH0K\nCiAgICAvKioKICAgICAqIExvb2sgZm9yIE1FVEEtSU5GL29ybS54bWwsIGFu\nZCBpZiBpdCBkb2Vzbid0IGV4aXN0LCBjaG9vc2UgYSBkZWZhdWx0LgogICAg\nICovCiAgICBwcml2YXRlIEZpbGUgZGVmYXVsdFhNTEZpbGUoKSB7CiAgICAg\nICAgQ2xhc3NMb2FkZXIgbG9hZGVyID0gcmVwb3MuZ2V0Q29uZmlndXJhdGlv\nbigpLgogICAgICAgICAgICBnZXRDbGFzc1Jlc29sdmVySW5zdGFuY2UoKS5n\nZXRDbGFzc0xvYWRlcihnZXRDbGFzcygpLCBudWxsKTsKICAgICAgICBVUkwg\ncnNyYyA9IChVUkwpIEFjY2Vzc0NvbnRyb2xsZXIuZG9Qcml2aWxlZ2VkKAog\nICAgICAgICAgICBKMkRvUHJpdkhlbHBlci5nZXRSZXNvdXJjZUFjdGlvbihs\nb2FkZXIsICJNRVRBLUlORi9vcm0ueG1sIikpOwogICAgICAgIGlmIChyc3Jj\nICE9IG51bGwpIHsKICAgICAgICAgICAgRmlsZSBmaWxlID0gbmV3IEZpbGUo\ncnNyYy5nZXRGaWxlKCkpOwogICAgICAgICAgICBpZiAoKChCb29sZWFuKSBB\nY2Nlc3NDb250cm9sbGVyLmRvUHJpdmlsZWdlZCgKICAgICAgICAgICAgICAg\nIEoyRG9Qcml2SGVscGVyLmV4aXN0c0FjdGlvbihmaWxlKSkpLmJvb2xlYW5W\nYWx1ZSgpKQogICAgICAgICAgICAgICAgcmV0dXJuIGZpbGU7CiAgICAgICAg\nfQogICAgICAgIHJldHVybiBuZXcgRmlsZSgib3JtLnhtbCIpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHNldENvbmZpZ3VyYXRpb24oQ29uZmlndXJhdGlv\nbiBjb25mKSB7CiAgICB9CgogICAgcHVibGljIHZvaWQgc3RhcnRDb25maWd1\ncmF0aW9uKCkgewogICAgfQoKICAgIHB1YmxpYyB2b2lkIGVuZENvbmZpZ3Vy\nYXRpb24oKSB7CiAgICAgICAgaWYgKHJzcmNzID09IG51bGwpCiAgICAgICAg\nICAgIHJzcmNzID0gQ29sbGVjdGlvbnMuc2luZ2xldG9uKCJNRVRBLUlORi9v\ncm0ueG1sIik7CiAgICAgICAgZWxzZQoJCQlyc3Jjcy5hZGQoIk1FVEEtSU5G\nL29ybS54bWwiKTsKCX0KCiAgICBwdWJsaWMgdm9pZCBzZXRJbnRvKE9wdGlv\nbnMgb3B0cykgewogICAgICAgIG9wdHMua2V5U2V0KCkucmV0YWluQWxsKG9w\ndHMuc2V0SW50byhfZGVmKS5rZXlTZXQoKSk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBSZXR1cm4gSkFYQiBYTUwgYW5ub3RhdGlvbiBwYXJzZXIsIAogICAg\nICogY3JlYXRpbmcgaXQgaWYgaXQgZG9lcyBub3QgYWxyZWFkeSBleGlzdC4K\nICAgICAqLwogICAgcHVibGljIEFubm90YXRpb25QZXJzaXN0ZW5jZVhNTE1l\ndGFEYXRhUGFyc2VyIGdldFhNTEFubm90YXRpb25QYXJzZXIoKSB7CiAgICAg\nICAgaWYgKF9hbm5vWE1MUGFyc2VyID09IG51bGwpIHsKICAgICAgICAgICAg\nX2Fubm9YTUxQYXJzZXIgPSBuZXdYTUxBbm5vdGF0aW9uUGFyc2VyKCk7CiAg\nICAgICAgICAgIF9hbm5vWE1MUGFyc2VyLnNldFJlcG9zaXRvcnkocmVwb3Mp\nOwogICAgICAgIH0KICAgICAgICByZXR1cm4gX2Fubm9YTUxQYXJzZXI7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBTZXQgdGhlIEpBWEIgWE1MIGFubm90YXRp\nb24gcGFyc2VyLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRYTUxBbm5v\ndGF0aW9uUGFyc2VyKAogICAgICAgIEFubm90YXRpb25QZXJzaXN0ZW5jZVhN\nTE1ldGFEYXRhUGFyc2VyIHBhcnNlcikgewogICAgICAgIGlmIChfYW5ub1hN\nTFBhcnNlciAhPSBudWxsKQogICAgICAgICAgICBfYW5ub1hNTFBhcnNlci5z\nZXRSZXBvc2l0b3J5KG51bGwpOwogICAgICAgIGlmIChwYXJzZXIgIT0gbnVs\nbCkKICAgICAgICAgICAgcGFyc2VyLnNldFJlcG9zaXRvcnkocmVwb3MpOwog\nICAgICAgIF9hbm5vWE1MUGFyc2VyID0gcGFyc2VyOwogICAgfQoKICAgIC8q\nKgogICAgICogQ3JlYXRlIGEgbmV3IEpBWEIgWE1MIGFubm90YXRpb24gcGFy\nc2VyLgogICAgICovCiAgICBwcm90ZWN0ZWQgQW5ub3RhdGlvblBlcnNpc3Rl\nbmNlWE1MTWV0YURhdGFQYXJzZXIgbmV3WE1MQW5ub3RhdGlvblBhcnNlcigp\nIHsKICAgICAgICByZXR1cm4gbmV3IEFubm90YXRpb25QZXJzaXN0ZW5jZVhN\nTE1ldGFEYXRhUGFyc2VyCiAgICAgICAgICAgIChyZXBvcy5nZXRDb25maWd1\ncmF0aW9uKCkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGxvYWRYTUxNZXRh\nRGF0YShGaWVsZE1ldGFEYXRhIGZtZCkgewogICAgICAgIEFubm90YXRpb25Q\nZXJzaXN0ZW5jZVhNTE1ldGFEYXRhUGFyc2VyIHBhcnNlcgogICAgICAgICAg\nICA9IGdldFhNTEFubm90YXRpb25QYXJzZXIoKTsKICAgICAgICBwYXJzZXIu\ncGFyc2UoZm1kKTsKICAgIH0KfQo=\n","encoding":"base64"}

