{"sha":"98fe11a38b21cd6d94cb20b0ca3c572e00f6fd20","node_id":"MDQ6QmxvYjIwNjM2NDo5OGZlMTFhMzhiMjFjZDZkOTRjYjIwYjBjYTNjNTcyZTAwZjZmZDIw","size":7323,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/98fe11a38b21cd6d94cb20b0ca3c572e00f6fd20","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2U7CgppbXBv\ncnQgamF2YS5sYW5nLmluc3RydW1lbnQuQ2xhc3NGaWxlVHJhbnNmb3JtZXI7\nCmltcG9ydCBqYXZhLmxhbmcuaW5zdHJ1bWVudC5JbGxlZ2FsQ2xhc3NGb3Jt\nYXRFeGNlcHRpb247CmltcG9ydCBqYXZhLnNlY3VyaXR5LlByb3RlY3Rpb25E\nb21haW47CmltcG9ydCBqYXZhLnV0aWwuTWFwOwppbXBvcnQgamF2YXgucGVy\nc2lzdGVuY2UuRW50aXR5TWFuYWdlcjsKaW1wb3J0IGphdmF4LnBlcnNpc3Rl\nbmNlLnNwaS5DbGFzc1RyYW5zZm9ybWVyOwppbXBvcnQgamF2YXgucGVyc2lz\ndGVuY2Uuc3BpLlBlcnNpc3RlbmNlUHJvdmlkZXI7CmltcG9ydCBqYXZheC5w\nZXJzaXN0ZW5jZS5zcGkuUGVyc2lzdGVuY2VVbml0SW5mbzsKCmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuY29uZi5Ccm9rZXJWYWx1ZTsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5jb25mLk9wZW5KUEFDb25maWd1cmF0aW9uOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmNvbmYuT3BlbkpQQUNvbmZpZ3Vy\nYXRpb25JbXBsOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmVuaGFuY2Uu\nUENDbGFzc0ZpbGVUcmFuc2Zvcm1lcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5rZXJuZWwuQm9vdHN0cmFwOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmtlcm5lbC5Ccm9rZXJGYWN0b3J5OwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmxpYi5jb25mLkNvbmZpZ3VyYXRpb25Qcm92aWRlcjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5Db25maWd1cmF0aW9uczsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIubG9nLkxvZzsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6ZXI7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5NZXRhRGF0YU1vZGVzOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuTWV0YURhdGFSZXBvc2l0b3J5\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuQ2xhc3NSZXNvbHZl\ncjsKCgovKioKICogQm9vdHN0cmFwcGluZyBjbGFzcyB0aGF0IGFsbG93cyB0\naGUgY3JlYXRpb24gb2YgYSBzdGFuZC1hbG9uZQogKiB7QGxpbmsgRW50aXR5\nTWFuYWdlcn0uCiAqCiAqIEBzZWUgamF2YXgucGVyc2lzdGVuY2UuUGVyc2lz\ndGVuY2UjY3JlYXRlRW50aXR5TWFuYWdlckZhY3RvcnkoU3RyaW5nLE1hcCkK\nICogQHB1Ymxpc2hlZAogKi8KcHVibGljIGNsYXNzIFBlcnNpc3RlbmNlUHJv\ndmlkZXJJbXBsCiAgICBpbXBsZW1lbnRzIFBlcnNpc3RlbmNlUHJvdmlkZXIg\newoKICAgIHN0YXRpYyBmaW5hbCBTdHJpbmcgQ0xBU1NfVFJBTlNGT1JNRVJf\nT1BUSU9OUyA9ICJDbGFzc1RyYW5zZm9ybWVyT3B0aW9ucyI7CgogICAgcHJp\ndmF0ZSBzdGF0aWMgZmluYWwgTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6ZXIu\nZm9yUGFja2FnZSgKICAgICAgICBQZXJzaXN0ZW5jZVByb3ZpZGVySW1wbC5j\nbGFzcyk7CgogICAgLyoqCiAgICAgKiBMb2FkcyB0aGUgZW50aXR5IG1hbmFn\nZXIgc3BlY2lmaWVkIGJ5IDxjb2RlPm5hbWU8L2NvZGU+LCBhcHBseWluZwog\nICAgICogdGhlIHByb3BlcnRpZXMgaW4gPGNvZGU+bTwvY29kZT4gYXMgb3Zl\ncnJpZGVzIHRvIHRoZSBwcm9wZXJ0aWVzIGRlZmluZWQKICAgICAqIGluIHRo\nZSBYTUwgY29uZmlndXJhdGlvbiBmaWxlIGZvciA8Y29kZT5uYW1lPC9jb2Rl\nPi4gSWYgPGNvZGU+bmFtZTwvY29kZT4KICAgICAqIGlzIDxjb2RlPm51bGw8\nL2NvZGU+LCB0aGlzIG1ldGhvZCBsb2FkcyB0aGUgWE1MIGluIHRoZSByZXNv\ndXJjZQogICAgICogaWRlbnRpZmllZCBieSA8Y29kZT5yZXNvdXJjZTwvY29k\nZT4sIGFuZCB1c2VzIHRoZSBmaXJzdCByZXNvdXJjZSBmb3VuZAogICAgICog\nd2hlbiBkb2luZyB0aGlzIGxvb2t1cCwgcmVnYXJkbGVzcyBvZiB0aGUgbmFt\nZSBzcGVjaWZpZWQgaW4gdGhlIFhNTAogICAgICogcmVzb3VyY2Ugb3IgdGhl\nIG5hbWUgb2YgdGhlIGphciB0aGF0IHRoZSByZXNvdXJjZSBpcyBjb250YWlu\nZWQgaW4uCiAgICAgKiBUaGlzIGRvZXMgbm8gcG9vbGluZyBvZiBFbnRpdHlN\nYW5hZ2Vyc0ZhY3Rvcmllcy4KICAgICAqLwogICAgcHVibGljIE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyRmFjdG9yeSBjcmVhdGVFbnRpdHlNYW5hZ2VyRmFjdG9y\neShTdHJpbmcgbmFtZSwKICAgICAgICBTdHJpbmcgcmVzb3VyY2UsIE1hcCBt\nKSB7CiAgICAgICAgUGVyc2lzdGVuY2VQcm9kdWN0RGVyaXZhdGlvbiBwZCA9\nIG5ldyBQZXJzaXN0ZW5jZVByb2R1Y3REZXJpdmF0aW9uKCk7CiAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgQ29uZmlndXJhdGlvblByb3ZpZGVyIGNwID0g\ncGQubG9hZChyZXNvdXJjZSwgbmFtZSwgbSk7CiAgICAgICAgICAgIGlmIChj\ncCA9PSBudWxsKQogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CgogICAg\nICAgICAgICBCcm9rZXJGYWN0b3J5IGZhY3RvcnkgPSBCb290c3RyYXAubmV3\nQnJva2VyRmFjdG9yeShjcCwgbnVsbCk7CiAgICAgICAgICAgIHJldHVybiBK\nUEFGYWNhZGVIZWxwZXIudG9FbnRpdHlNYW5hZ2VyRmFjdG9yeShmYWN0b3J5\nKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAg\nICB0aHJvdyBQZXJzaXN0ZW5jZUV4Y2VwdGlvbnMudG9QZXJzaXN0ZW5jZUV4\nY2VwdGlvbihlKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeSBjcmVhdGVFbnRpdHlNYW5hZ2VyRmFj\ndG9yeShTdHJpbmcgbmFtZSwKICAgICAgICBNYXAgbSkgewogICAgICAgIHJl\ndHVybiBjcmVhdGVFbnRpdHlNYW5hZ2VyRmFjdG9yeShuYW1lLCBudWxsLCBt\nKTsKICAgIH0KCiAgICBwdWJsaWMgT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0\nb3J5IGNyZWF0ZUNvbnRhaW5lckVudGl0eU1hbmFnZXJGYWN0b3J5KAogICAg\nICAgIFBlcnNpc3RlbmNlVW5pdEluZm8gcHVpLCBNYXAgbSkgewogICAgICAg\nIFBlcnNpc3RlbmNlUHJvZHVjdERlcml2YXRpb24gcGQgPSBuZXcgUGVyc2lz\ndGVuY2VQcm9kdWN0RGVyaXZhdGlvbigpOwogICAgICAgIHRyeSB7CiAgICAg\nICAgICAgIENvbmZpZ3VyYXRpb25Qcm92aWRlciBjcCA9IHBkLmxvYWQocHVp\nLCBtKTsKICAgICAgICAgICAgaWYgKGNwID09IG51bGwpCiAgICAgICAgICAg\nICAgICByZXR1cm4gbnVsbDsKCiAgICAgICAgICAgIC8vIGFkZCBlbmhhbmNl\ncgogICAgICAgICAgICBFeGNlcHRpb24gdHJhbnNmb3JtZXJFeGNlcHRpb24g\nPSBudWxsOwogICAgICAgICAgICBTdHJpbmcgY3RPcHRzID0gKFN0cmluZykg\nQ29uZmlndXJhdGlvbnMuZ2V0UHJvcGVydHkKICAgICAgICAgICAgICAgIChD\nTEFTU19UUkFOU0ZPUk1FUl9PUFRJT05TLCBwdWkuZ2V0UHJvcGVydGllcygp\nKTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHB1aS5hZGRU\ncmFuc2Zvcm1lcihuZXcgQ2xhc3NUcmFuc2Zvcm1lckltcGwoY3AsIGN0T3B0\ncywKICAgICAgICAgICAgICAgICAgICBwdWkuZ2V0TmV3VGVtcENsYXNzTG9h\nZGVyKCkpKTsKICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsK\nICAgICAgICAgICAgICAgIC8vIGZhaWwgZ3JhY2VmdWxseQogICAgICAgICAg\nICAgICAgdHJhbnNmb3JtZXJFeGNlcHRpb24gPSBlOwogICAgICAgICAgICB9\nCgogICAgICAgICAgICAvLyBpZiB0aGUgQnJva2VySW1wbCBoYXNuJ3QgYmVl\nbiBzcGVjaWZpZWQsIHN3aXRjaCB0byB0aGUKICAgICAgICAgICAgLy8gbm9u\nLWZpbmFsaXppbmcgb25lLCBzaW5jZSBhbnl0aGluZyBjbGFpbWluZyB0byBi\nZSBhIGNvbnRhaW5lcgogICAgICAgICAgICAvLyBzaG91bGQgYmUgZG9pbmcg\ncHJvcGVyIHJlc291cmNlIG1hbmFnZW1lbnQuCiAgICAgICAgICAgIGlmICgh\nQ29uZmlndXJhdGlvbnMuY29udGFpbnNQcm9wZXJ0eShCcm9rZXJWYWx1ZS5L\nRVksCiAgICAgICAgICAgICAgICBjcC5nZXRQcm9wZXJ0aWVzKCkpKSB7CiAg\nICAgICAgICAgICAgICBjcC5hZGRQcm9wZXJ0eSgib3BlbmpwYS4iICsgQnJv\na2VyVmFsdWUuS0VZLCAKICAgICAgICAgICAgICAgICAgICBCcm9rZXJWYWx1\nZS5OT05fRklOQUxJWklOR19BTElBUyk7CiAgICAgICAgICAgIH0KCiAgICAg\nICAgICAgIEJyb2tlckZhY3RvcnkgZmFjdG9yeSA9IEJvb3RzdHJhcC5uZXdC\ncm9rZXJGYWN0b3J5KGNwLCAKICAgICAgICAgICAgICAgIHB1aS5nZXRDbGFz\nc0xvYWRlcigpKTsKICAgICAgICAgICAgaWYgKHRyYW5zZm9ybWVyRXhjZXB0\naW9uICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIExvZyBsb2cgPSBmYWN0\nb3J5LmdldENvbmZpZ3VyYXRpb24oKS5nZXRMb2coCiAgICAgICAgICAgICAg\nICAgICAgT3BlbkpQQUNvbmZpZ3VyYXRpb24uTE9HX1JVTlRJTUUpOwogICAg\nICAgICAgICAgICAgaWYgKGxvZy5pc1RyYWNlRW5hYmxlZCgpKSB7CiAgICAg\nICAgICAgICAgICAgICAgbG9nLndhcm4oCiAgICAgICAgICAgICAgICAgICAg\nICAgIF9sb2MuZ2V0KCJ0cmFuc2Zvcm1lci1yZWdpc3RyYXRpb24tZXJyb3It\nZXgiLCBwdWkpLAogICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1l\nckV4Y2VwdGlvbik7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAg\nICAgICAgICAgICAgIGxvZy53YXJuKAogICAgICAgICAgICAgICAgICAgICAg\nICBfbG9jLmdldCgidHJhbnNmb3JtZXItcmVnaXN0cmF0aW9uLWVycm9yIiwg\ncHVpKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAg\nICAgICAgcmV0dXJuIEpQQUZhY2FkZUhlbHBlci50b0VudGl0eU1hbmFnZXJG\nYWN0b3J5KGZhY3RvcnkpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBl\nKSB7CiAgICAgICAgICAgIHRocm93IFBlcnNpc3RlbmNlRXhjZXB0aW9ucy50\nb1BlcnNpc3RlbmNlRXhjZXB0aW9uKGUpOwogICAgICAgIH0KICAgIH0KICAg\nIAogICAgLyoqCiAgICAgKiBKYXZhIEVFIDUgY2xhc3MgdHJhbnNmb3JtZXIu\nCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGljIGNsYXNzIENsYXNzVHJhbnNm\nb3JtZXJJbXBsCiAgICAgICAgaW1wbGVtZW50cyBDbGFzc1RyYW5zZm9ybWVy\nIHsKCiAgICAgICAgcHJpdmF0ZSBmaW5hbCBDbGFzc0ZpbGVUcmFuc2Zvcm1l\nciBfdHJhbnM7CgogICAgICAgIHByaXZhdGUgQ2xhc3NUcmFuc2Zvcm1lcklt\ncGwoQ29uZmlndXJhdGlvblByb3ZpZGVyIGNwLCBTdHJpbmcgcHJvcHMsIAog\nICAgICAgICAgICBmaW5hbCBDbGFzc0xvYWRlciB0bXBMb2FkZXIpIHsKICAg\nICAgICAgICAgLy8gY3JlYXRlIGFuIGluZGVwZW5kZW50IGNvbmYgZm9yIGVu\naGFuY2VtZW50CiAgICAgICAgICAgIE9wZW5KUEFDb25maWd1cmF0aW9uIGNv\nbmYgPSBuZXcgT3BlbkpQQUNvbmZpZ3VyYXRpb25JbXBsKCk7CiAgICAgICAg\nICAgIGNwLnNldEludG8oY29uZik7CiAgICAgICAgICAgIC8vIGRvbid0IGFs\nbG93IGNvbm5lY3Rpb25zCiAgICAgICAgICAgIGNvbmYuc2V0Q29ubmVjdGlv\nblVzZXJOYW1lKG51bGwpOwogICAgICAgICAgICBjb25mLnNldENvbm5lY3Rp\nb25QYXNzd29yZChudWxsKTsKICAgICAgICAgICAgY29uZi5zZXRDb25uZWN0\naW9uVVJMKG51bGwpOwogICAgICAgICAgICBjb25mLnNldENvbm5lY3Rpb25E\ncml2ZXJOYW1lKG51bGwpOwogICAgICAgICAgICBjb25mLnNldENvbm5lY3Rp\nb25GYWN0b3J5TmFtZShudWxsKTsKICAgICAgICAgICAgLy8gdXNlIHRoZSB0\nbXAgbG9hZGVyIGZvciBldmVyeXRoaW5nCiAgICAgICAgICAgIGNvbmYuc2V0\nQ2xhc3NSZXNvbHZlcihuZXcgQ2xhc3NSZXNvbHZlcigpIHsKICAgICAgICAg\nICAgICAgIHB1YmxpYyBDbGFzc0xvYWRlciBnZXRDbGFzc0xvYWRlcihDbGFz\ncyBjb250ZXh0LCAKICAgICAgICAgICAgICAgICAgICBDbGFzc0xvYWRlciBl\nbnYpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG1wTG9hZGVyOwog\nICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAg\nY29uZi5zZXRSZWFkT25seSh0cnVlKTsKCiAgICAgICAgICAgIE1ldGFEYXRh\nUmVwb3NpdG9yeSByZXBvcyA9IGNvbmYuZ2V0TWV0YURhdGFSZXBvc2l0b3J5\nSW5zdGFuY2UoKTsKICAgICAgICAgICAgcmVwb3Muc2V0UmVzb2x2ZShNZXRh\nRGF0YU1vZGVzLk1PREVfTUFQUElORywgZmFsc2UpOwogICAgICAgICAgICBf\ndHJhbnMgPSBuZXcgUENDbGFzc0ZpbGVUcmFuc2Zvcm1lcihyZXBvcywKICAg\nICAgICAgICAgICAgIENvbmZpZ3VyYXRpb25zLnBhcnNlUHJvcGVydGllcyhw\ncm9wcyksIHRtcExvYWRlcik7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMg\nYnl0ZVtdIHRyYW5zZm9ybShDbGFzc0xvYWRlciBjbCwgU3RyaW5nIG5hbWUs\nCiAgICAgICAgICAgIENsYXNzPD8+IHByZXZpb3VzVmVyc2lvbiwgUHJvdGVj\ndGlvbkRvbWFpbiBwZCwgYnl0ZVtdIGJ5dGVzKQogICAgICAgICAgICB0aHJv\nd3MgSWxsZWdhbENsYXNzRm9ybWF0RXhjZXB0aW9uIHsKICAgICAgICAgICAg\ncmV0dXJuIF90cmFucy50cmFuc2Zvcm0oY2wsIG5hbWUsIHByZXZpb3VzVmVy\nc2lvbiwgcGQsIGJ5dGVzKTsKICAgICAgICB9Cgl9Cn0K\n","encoding":"base64"}

