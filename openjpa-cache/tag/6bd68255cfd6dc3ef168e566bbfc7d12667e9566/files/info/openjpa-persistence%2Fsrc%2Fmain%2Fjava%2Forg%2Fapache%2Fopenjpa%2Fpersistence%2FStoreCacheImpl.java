{"sha":"31b0f45f49d8aa28c953d6642ed7fc41a6aa3d4a","node_id":"MDQ6QmxvYjIwNjM2NDozMWIwZjQ1ZjQ5ZDhhYTI4Yzk1M2Q2NjQyZWQ3ZmM0MWE2YWEzZDRh","size":4793,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/31b0f45f49d8aa28c953d6642ed7fc41a6aa3d4a","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2U7CgppbXBv\ncnQgamF2YS51dGlsLkFycmF5czsKaW1wb3J0IGphdmEudXRpbC5CaXRTZXQ7\nCmltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbjsKCmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEuZGF0YWNhY2hlLkRhdGFDYWNoZTsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5kYXRhY2FjaGUuRGVsZWdhdGluZ0RhdGFDYWNoZTsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkNsYXNzTWV0YURhdGE7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5NZXRhRGF0YVJlcG9z\naXRvcnk7CgovKioKICogSW1wbGVtZW50cyB0aGUgTDIgY2FjaGUgb3ZlciB0\naGUgZGF0YSBzdG9yZSB2aWEgZGVsZWdhdGlvbiB0byBEYXRhQ2FjaGUuCiAq\nCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqIEBzaW5jZSAwLjQuMQogKiBAbm9q\nYXZhZG9jCiAqLwpwdWJsaWMgY2xhc3MgU3RvcmVDYWNoZUltcGwgCglpbXBs\nZW1lbnRzIFN0b3JlQ2FjaGUgewoKICAgIHByaXZhdGUgZmluYWwgTWV0YURh\ndGFSZXBvc2l0b3J5IF9yZXBvczsKICAgIHByaXZhdGUgZmluYWwgRGVsZWdh\ndGluZ0RhdGFDYWNoZSBfY2FjaGU7CgogICAgCiAgICAvKioKICAgICAqIENv\nbnN0cnVjdG9yOyBzdXBwbHkgZGVsZWdhdGUuCiAgICAgKi8KICAgIHB1Ymxp\nYyBTdG9yZUNhY2hlSW1wbChFbnRpdHlNYW5hZ2VyRmFjdG9yeUltcGwgZW1m\nLCBEYXRhQ2FjaGUgY2FjaGUpIHsKICAgICAgICBfcmVwb3MgPSBlbWYuZ2V0\nQ29uZmlndXJhdGlvbigpLmdldE1ldGFEYXRhUmVwb3NpdG9yeUluc3RhbmNl\nKCk7CiAgICAgICAgX2NhY2hlID0gbmV3IERlbGVnYXRpbmdEYXRhQ2FjaGUo\nY2FjaGUsCiAgICAgICAgICAgIFBlcnNpc3RlbmNlRXhjZXB0aW9ucy5UUkFO\nU0xBVE9SKTsKICAgIH0KCiAgICAvKioKICAgICAqIERlbGVnYXRlLgogICAg\nICovCiAgICBwdWJsaWMgRGF0YUNhY2hlIGdldERlbGVnYXRlKCkgewogICAg\nICAgIHJldHVybiBfY2FjaGUuZ2V0RGVsZWdhdGUoKTsKICAgIH0KCiAgICBw\ndWJsaWMgYm9vbGVhbiBjb250YWlucyhDbGFzcyBjbHMsIE9iamVjdCBvaWQp\nIHsKICAgICAgICByZXR1cm4gX2NhY2hlLmdldERlbGVnYXRlKCkgIT0gbnVs\nbCAmJiBfY2FjaGUuY29udGFpbnMKICAgICAgICAgICAgKEpQQUZhY2FkZUhl\nbHBlci50b09wZW5KUEFPYmplY3RJZChnZXRNZXRhRGF0YShjbHMpLCBvaWQp\nKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBjb250YWluc0FsbChDbGFz\ncyBjbHMsIE9iamVjdC4uLiBvaWRzKSB7CiAgICAgICAgcmV0dXJuIGNvbnRh\naW5zQWxsKGNscywgQXJyYXlzLmFzTGlzdChvaWRzKSk7CiAgICB9CgogICAg\ncHVibGljIGJvb2xlYW4gY29udGFpbnNBbGwoQ2xhc3MgY2xzLCBDb2xsZWN0\naW9uIG9pZHMpIHsKICAgICAgICBpZiAoX2NhY2hlLmdldERlbGVnYXRlKCkg\nPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIG9pZHMuaXNFbXB0eSgpOwoK\nICAgICAgICBCaXRTZXQgc2V0ID0gX2NhY2hlLmNvbnRhaW5zQWxsKEpQQUZh\nY2FkZUhlbHBlci50b09wZW5KUEFPYmplY3RJZHMKICAgICAgICAgICAgKGdl\ndE1ldGFEYXRhKGNscyksIG9pZHMpKTsKICAgICAgICBmb3IgKGludCBpID0g\nMDsgaSA8IG9pZHMuc2l6ZSgpOyBpKyspCiAgICAgICAgICAgIGlmICghc2V0\nLmdldChpKSkKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAg\nICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBwaW4oQ2xh\nc3MgY2xzLCBPYmplY3Qgb2lkKSB7CiAgICAgICAgaWYgKF9jYWNoZS5nZXRE\nZWxlZ2F0ZSgpICE9IG51bGwpCiAgICAgICAgICAgIF9jYWNoZS5waW4oSlBB\nRmFjYWRlSGVscGVyLnRvT3BlbkpQQU9iamVjdElkKGdldE1ldGFEYXRhKGNs\ncyksCiAgICAgICAgICAgICAgICBvaWQpKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBwaW5BbGwoQ2xhc3MgY2xzLCBPYmplY3QuLi4gb2lkcykgewogICAg\nICAgIHBpbkFsbChjbHMsIEFycmF5cy5hc0xpc3Qob2lkcykpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHBpbkFsbChDbGFzcyBjbHMsIENvbGxlY3Rpb24g\nb2lkcykgewogICAgICAgIGlmIChfY2FjaGUuZ2V0RGVsZWdhdGUoKSAhPSBu\ndWxsKQogICAgICAgICAgICBfY2FjaGUucGluQWxsKEpQQUZhY2FkZUhlbHBl\nci50b09wZW5KUEFPYmplY3RJZHMKICAgICAgICAgICAgICAgIChnZXRNZXRh\nRGF0YShjbHMpLCBvaWRzKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdW5w\naW4oQ2xhc3MgY2xzLCBPYmplY3Qgb2lkKSB7CiAgICAgICAgaWYgKF9jYWNo\nZS5nZXREZWxlZ2F0ZSgpICE9IG51bGwpCiAgICAgICAgICAgIF9jYWNoZS51\nbnBpbihKUEFGYWNhZGVIZWxwZXIudG9PcGVuSlBBT2JqZWN0SWQoZ2V0TWV0\nYURhdGEoY2xzKSwKICAgICAgICAgICAgICAgIG9pZCkpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHVucGluQWxsKENsYXNzIGNscywgT2JqZWN0Li4uIG9p\nZHMpIHsKICAgICAgICB1bnBpbkFsbChjbHMsIEFycmF5cy5hc0xpc3Qob2lk\ncykpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHVucGluQWxsKENsYXNzIGNs\ncywgQ29sbGVjdGlvbiBvaWRzKSB7CiAgICAgICAgaWYgKF9jYWNoZS5nZXRE\nZWxlZ2F0ZSgpICE9IG51bGwpCiAgICAgICAgICAgIF9jYWNoZS51bnBpbkFs\nbChKUEFGYWNhZGVIZWxwZXIudG9PcGVuSlBBT2JqZWN0SWRzCiAgICAgICAg\nICAgICAgICAoZ2V0TWV0YURhdGEoY2xzKSwgb2lkcykpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIGV2aWN0KENsYXNzIGNscywgT2JqZWN0IG9pZCkgewog\nICAgICAgIGlmIChfY2FjaGUuZ2V0RGVsZWdhdGUoKSAhPSBudWxsKQogICAg\nICAgICAgICBfY2FjaGUucmVtb3ZlKEpQQUZhY2FkZUhlbHBlci50b09wZW5K\nUEFPYmplY3RJZChnZXRNZXRhRGF0YShjbHMpLAogICAgICAgICAgICAgICAg\nb2lkKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgZXZpY3RBbGwoQ2xhc3Mg\nY2xzLCBPYmplY3QuLi4gb2lkcykgewogICAgICAgIGV2aWN0QWxsKGNscywg\nQXJyYXlzLmFzTGlzdChvaWRzKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nZXZpY3RBbGwoQ2xhc3MgY2xzLCBDb2xsZWN0aW9uIG9pZHMpIHsKICAgICAg\nICBpZiAoX2NhY2hlLmdldERlbGVnYXRlKCkgIT0gbnVsbCkKICAgICAgICAg\nICAgX2NhY2hlLnJlbW92ZUFsbChKUEFGYWNhZGVIZWxwZXIudG9PcGVuSlBB\nT2JqZWN0SWRzCiAgICAgICAgICAgICAgICAoZ2V0TWV0YURhdGEoY2xzKSwg\nb2lkcykpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGV2aWN0QWxsKCkgewog\nICAgICAgIF9jYWNoZS5jbGVhcigpOwogICAgfQoKICAgIC8qKgogICAgICog\nUmV0dXJuIG1ldGFkYXRhIGZvciB0aGUgZ2l2ZW4gY2xhc3MsIHRocm93aW5n\nIHRoZSBwcm9wZXIgZXhjZXB0aW9uCiAgICAgKiBpZiBub3QgcGVyc2lzdGVu\ndC4KICAgICAqLwogICAgcHJpdmF0ZSBDbGFzc01ldGFEYXRhIGdldE1ldGFE\nYXRhKENsYXNzIGNscykgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJl\ndHVybiBfcmVwb3MuZ2V0TWV0YURhdGEoY2xzLCBudWxsLCB0cnVlKTsKICAg\nICAgICB9IGNhdGNoIChSdW50aW1lRXhjZXB0aW9uIHJlKSB7CiAgICAgICAg\nICAgIHRocm93IFBlcnNpc3RlbmNlRXhjZXB0aW9ucy50b1BlcnNpc3RlbmNl\nRXhjZXB0aW9uKHJlKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIGlu\ndCBoYXNoQ29kZSgpIHsKICAgICAgICByZXR1cm4gX2NhY2hlLmhhc2hDb2Rl\nKCk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gZXF1YWxzKE9iamVjdCBv\ndGhlcikgewogICAgICAgIGlmIChvdGhlciA9PSB0aGlzKQogICAgICAgICAg\nICByZXR1cm4gdHJ1ZTsKICAgICAgICBpZiAoIShvdGhlciBpbnN0YW5jZW9m\nIFN0b3JlQ2FjaGVJbXBsKSkKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwog\nICAgICAgIHJldHVybiBfY2FjaGUuZXF1YWxzICgoKFN0b3JlQ2FjaGVJbXBs\nKSBvdGhlcikuX2NhY2hlKTsKCX0KfQo=\n","encoding":"base64"}

