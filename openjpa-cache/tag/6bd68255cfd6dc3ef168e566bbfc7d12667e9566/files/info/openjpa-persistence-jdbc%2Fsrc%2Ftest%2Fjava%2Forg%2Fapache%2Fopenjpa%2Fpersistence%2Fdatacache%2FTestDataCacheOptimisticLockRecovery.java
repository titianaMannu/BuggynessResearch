{"sha":"1d3c842a21b9e92e5974bee677914eba6e52272e","node_id":"MDQ6QmxvYjIwNjM2NDoxZDNjODQyYTIxYjllOTJlNTk3NGJlZTY3NzkxNGViYTZlNTIyNzJl","size":6838,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/1d3c842a21b9e92e5974bee677914eba6e52272e","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2UuZGF0YWNhY2hlOw0KDQppbXBvcnQgamF2YS5zcWwuQ29u\nbmVjdGlvbjsNCmltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDsN\nCmltcG9ydCBqYXZhLnNxbC5TUUxFeGNlcHRpb247DQppbXBvcnQgamF2YXgu\ncGVyc2lzdGVuY2UuRW50aXR5TWFuYWdlcjsNCmltcG9ydCBqYXZheC5wZXJz\naXN0ZW5jZS5Sb2xsYmFja0V4Y2VwdGlvbjsNCmltcG9ydCBqYXZheC5wZXJz\naXN0ZW5jZS5Mb2NrTW9kZVR5cGU7DQppbXBvcnQgamF2YXguc3FsLkRhdGFT\nb3VyY2U7DQoNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVu\nY2UuT3BlbkpQQVBlcnNpc3RlbmNlOw0KaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdlckZhY3RvcnlT\nUEk7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLkpQ\nQUZhY2FkZUhlbHBlcjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVy\nc2lzdGVuY2UudGVzdC5TaW5nbGVFTUZUZXN0Q2FzZTsNCmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuZXZlbnQuUmVtb3RlQ29tbWl0TGlzdGVuZXI7DQpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmV2ZW50LlJlbW90ZUNvbW1pdEV2\nZW50Ow0KDQpwdWJsaWMgY2xhc3MgVGVzdERhdGFDYWNoZU9wdGltaXN0aWNM\nb2NrUmVjb3ZlcnkNCiAgICBleHRlbmRzIFNpbmdsZUVNRlRlc3RDYXNlIHsN\nCg0KICAgIHByaXZhdGUgaW50IHBrOw0KICAgIHByaXZhdGUgaW50IHJlbW90\nZUNvbW1pdEV2ZW50U3RhbGVDb3VudCA9IDA7DQogICAgcHJpdmF0ZSBPYmpl\nY3Qgc3RhbGVPaWQ7DQoNCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpIHsNCiAg\nICAgICAgc2V0VXAoIm9wZW5qcGEuRGF0YUNhY2hlIiwgInRydWUiLA0KICAg\nICAgICAgICAgIm9wZW5qcGEuUmVtb3RlQ29tbWl0UHJvdmlkZXIiLCAic2p2\nbSIsDQogICAgICAgICAgICBPcHRpbWlzdGljTG9ja0luc3RhbmNlLmNsYXNz\nKTsNCg0KICAgICAgICBlbWYuZ2V0Q29uZmlndXJhdGlvbigpLmdldFJlbW90\nZUNvbW1pdEV2ZW50TWFuYWdlcigpLmFkZExpc3RlbmVyKA0KICAgICAgICAg\nICAgbmV3IFJlbW90ZUNvbW1pdExpc3RlbmVyKCkgew0KICAgICAgICAgICAg\nICAgIHB1YmxpYyB2b2lkIGFmdGVyQ29tbWl0KFJlbW90ZUNvbW1pdEV2ZW50\nIGUpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGUuZ2V0UGF5bG9hZFR5\ncGUoKSA9PQ0KICAgICAgICAgICAgICAgICAgICAgICAgUmVtb3RlQ29tbWl0\nRXZlbnQuUEFZTE9BRF9MT0NBTF9TVEFMRV9ERVRFQ1RJT04pIHsNCiAgICAg\nICAgICAgICAgICAgICAgICAgIHJlbW90ZUNvbW1pdEV2ZW50U3RhbGVDb3Vu\ndCsrOw0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhbGVPaWQgPSBlLmdl\ndFVwZGF0ZWRPYmplY3RJZHMoKS5pdGVyYXRvcigpLm5leHQoKTsNCiAgICAg\nICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAg\nICAgICAgICAgIHB1YmxpYyB2b2lkIGNsb3NlKCkgew0KICAgICAgICAgICAg\nICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgKTsNCg0KICAgICAgICBF\nbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsN\nCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOw0KICAgICAg\nICBPcHRpbWlzdGljTG9ja0luc3RhbmNlIG9saSA9IG5ldyBPcHRpbWlzdGlj\nTG9ja0luc3RhbmNlKCJmb28iKTsNCiAgICAgICAgZW0ucGVyc2lzdChvbGkp\nOw0KICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOw0KICAg\nICAgICBwayA9IG9saS5nZXRQSygpOw0KICAgICAgICBlbS5jbG9zZSgpOw0K\nICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIHRlc3RPcHRpbWlzdGljTG9ja1Jl\nY292ZXJ5KCkgDQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gew0KDQog\nICAgICAgIEVudGl0eU1hbmFnZXIgZW07DQogICAgICAgIA0KICAgICAgICAv\nLyAxLiBnZXQgdGhlIG9wbG9jayB2YWx1ZSBmb3IgdGhlIGluc3RhbmNlIGFm\ndGVyIGNvbW1pdCBhbmQNCiAgICAgICAgLy8gZ2V0IGEgcmVhZCBsb2NrIHRv\nIGVuc3VyZSB0aGF0IHdlIGNoZWNrIGZvciB0aGUgb3B0aW1pc3RpYw0KICAg\nICAgICAvLyBsb2NrIGNvbHVtbiBhdCB0eCBjb21taXQuDQogICAgICAgIGVt\nID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsNCiAgICAgICAgZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5iZWdpbigpOw0KICAgICAgICBPcHRpbWlzdGljTG9j\na0luc3RhbmNlIG9saSA9IGVtLmZpbmQoT3B0aW1pc3RpY0xvY2tJbnN0YW5j\nZS5jbGFzcywgcGspOw0KICAgICAgICBPYmplY3Qgb2lkID0gSlBBRmFjYWRl\nSGVscGVyLnRvT3BlbkpQQU9iamVjdElkKA0KICAgICAgICAgICAgSlBBRmFj\nYWRlSGVscGVyLmdldE1ldGFEYXRhKG9saSksDQogICAgICAgICAgICBPcGVu\nSlBBUGVyc2lzdGVuY2UuY2FzdChlbSkuZ2V0T2JqZWN0SWQob2xpKSk7DQog\nICAgICAgIGludCBmaXJzdE9wTG9ja1ZhbHVlID0gb2xpLmdldE9wTG9jaygp\nOw0KICAgICAgICBlbS5sb2NrKG9saSwgTG9ja01vZGVUeXBlLlJFQUQpOw0K\nDQogICAgICAgIC8vIDIuIG1ha2UgYSBjaGFuZ2UgdG8gdGhlIGluc3RhbmNl\nJ3Mgb3B0aW1pc3RpYyBsb2NrIGNvbHVtbg0KICAgICAgICAvLyB2aWEgZGly\nZWN0IFNRTCBpbiBhIHNlcGFyYXRlIHRyYW5zYWN0aW9uDQogICAgICAgIGlu\ndCBzZWNvbmRPcExvY2tWYWx1ZSA9IGZpcnN0T3BMb2NrVmFsdWUgKyAxOw0K\nDQogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyRmFjdG9yeVNQSSBlbWYg\nPSAoT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5U1BJKQ0KICAgICAgICAg\nICAgT3BlbkpQQVBlcnNpc3RlbmNlLmNhc3QoZW0pLmdldEVudGl0eU1hbmFn\nZXJGYWN0b3J5KCk7DQogICAgICAgIERhdGFTb3VyY2UgZHMgPSAoRGF0YVNv\ndXJjZSkgZW1mLmdldENvbmZpZ3VyYXRpb24oKQ0KICAgICAgICAgICAgLmdl\ndENvbm5lY3Rpb25GYWN0b3J5KCk7DQogICAgICAgIENvbm5lY3Rpb24gYyA9\nIGRzLmdldENvbm5lY3Rpb24oKTsNCiAgICAgICAgYy5zZXRBdXRvQ29tbWl0\nKGZhbHNlKTsNCiAgICAgICAgUHJlcGFyZWRTdGF0ZW1lbnQgcHMgPSBjLnBy\nZXBhcmVTdGF0ZW1lbnQoDQogICAgICAgICAgICAiVVBEQVRFIE9QVElNSVNU\nSUNfTE9DS19JTlNUQU5DRSBTRVQgT1BMT0NLID0gPyBXSEVSRSBQSyA9ID8i\nKTsNCiAgICAgICAgcHMuc2V0SW50KDEsIHNlY29uZE9wTG9ja1ZhbHVlKTsN\nCiAgICAgICAgcHMuc2V0SW50KDIsIHBrKTsNCiAgICAgICAgYXNzZXJ0RXF1\nYWxzKDEsIHBzLmV4ZWN1dGVVcGRhdGUoKSk7DQogICAgICAgIGMuY29tbWl0\nKCk7DQogICAgICAgIA0KICAgICAgICAvLyAzLiBjb21taXQgdGhlIHRyYW5z\nYWN0aW9uLCBjYXRjaGluZyB0aGUgZXhwZWN0ZWQgb3Bsb2NrDQogICAgICAg\nIC8vIGV4Y2VwdGlvbg0KICAgICAgICB0cnkgew0KICAgICAgICAgICAgZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsNCiAgICAgICAgICAgIGZhaWwo\nInR4IHNob3VsZCBoYXZlIGZhaWxlZCBkdWUgdG8gb3V0LW9mLWJhbmQgb3Bs\nb2NrIGNoYW5nZSIpOw0KICAgICAgICB9IGNhdGNoIChSb2xsYmFja0V4Y2Vw\ndGlvbiByZSkgew0KICAgICAgICAgICAgLy8gZXhwZWN0ZWQNCiAgICAgICAg\nfSBmaW5hbGx5IHsNCiAgICAgICAgICAgIGlmIChlbS5nZXRUcmFuc2FjdGlv\nbigpLmlzQWN0aXZlKCkpDQogICAgICAgICAgICAgICAgZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5yb2xsYmFjaygpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8g\nNC4gY2hlY2sgdGhhdCB0aGUgY29ycmVzcG9uZGluZyByZW1vdGUgY29tbWl0\nIGV2ZW50IHdhcyBmaXJlZA0KICAgICAgICBhc3NlcnRFcXVhbHMoMSwgcmVt\nb3RlQ29tbWl0RXZlbnRTdGFsZUNvdW50KTsNCiAgICAgICAgYXNzZXJ0RXF1\nYWxzKG9pZCwgc3RhbGVPaWQpOw0KDQogICAgICAgIC8vIDUuIG9idGFpbiB0\naGUgb2JqZWN0IGluIGEgbmV3IHBlcnNpc3RlbmNlIGNvbnRleHQgYW5kDQog\nICAgICAgIC8vIGFzc2VydCB0aGF0IHRoZSBvcGxvY2sgY29sdW1uIGlzIHNl\ndCB0byB0aGUgb25lIHRoYXQNCiAgICAgICAgLy8gaGFwcGVuZWQgaW4gdGhl\nIG91dC1vZi1iYW5kIHRyYW5zYWN0aW9uDQogICAgICAgIGVtLmNsb3NlKCk7\nDQogICAgICAgIGVtID0gdGhpcy5lbWYuY3JlYXRlRW50aXR5TWFuYWdlcigp\nOw0KICAgICAgICBvbGkgPSBlbS5maW5kKE9wdGltaXN0aWNMb2NrSW5zdGFu\nY2UuY2xhc3MsIHBrKTsNCg0KICAgICAgICAvLyBJZiB0aGlzIGZhaWxzLCB0\naGVuIHRoZSBkYXRhIGNhY2hlIGhhcyB0aGUgd3JvbmcgdmFsdWUuDQogICAg\nICAgIC8vIFRoaXMgaXMgd2hhdCB0aGlzIHRlc3QgY2FzZSBpcyBkZXNpZ25l\nZCB0byBleGVyY2lzZS4NCiAgICAgICAgYXNzZXJ0RXF1YWxzKCJkYXRhIGNh\nY2hlIGlzIG5vdCBiZWluZyBjbGVhcmVkIHdoZW4gb3Bsb2NrICINCiAgICAg\nICAgICAgICsgInZpb2xhdGlvbnMgb2NjdXIiLCBzZWNvbmRPcExvY2tWYWx1\nZSwgb2xpLmdldE9wTG9jaygpKTsNCg0KICAgICAgICAvLyA2LiBnZXQgYSBy\nZWFkIGxvY2sgb24gdGhlIGluc3RhbmNlIGFuZCBjb21taXQgdGhlIHR4OyB0\naGlzDQogICAgICAgIC8vIHRpbWUgaXQgc2hvdWxkIGdvIHRocm91Z2gNCiAg\nICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOw0KICAgICAgICBl\nbS5sb2NrKG9saSwgTG9ja01vZGVUeXBlLlJFQUQpOw0KICAgICAgICB0cnkg\new0KICAgICAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsN\nCiAgICAgICAgfSBjYXRjaCAoUm9sbGJhY2tFeGNlcHRpb24gZSkgew0KICAg\nICAgICAgICAgdGhyb3cgZTsNCiAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAg\nICAgICAgIGlmIChlbS5nZXRUcmFuc2FjdGlvbigpLmlzQWN0aXZlKCkpDQog\nICAgICAgICAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5yb2xsYmFjaygp\nOw0KICAgICAgICB9DQogICAgICAgIGVtLmNsb3NlKCk7DQogICAgfQ0KICAg\nIA0KICAgIHB1YmxpYyB2b2lkIHRlc3RFeHBlY3RlZE9wdGltaXN0aWNMb2Nr\nRXhjZXB0aW9uKCkgew0KICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtOw0KICAg\nICAgICANCiAgICAgICAgLy8gMS4gc3RhcnQgYSBuZXcgdHgNCiAgICAgICAg\nZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOw0KICAgICAgICBlbS5n\nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7DQogICAgICAgIGVtLmxvY2soZW0u\nZmluZChPcHRpbWlzdGljTG9ja0luc3RhbmNlLmNsYXNzLCBwayksIExvY2tN\nb2RlVHlwZS5SRUFEKTsNCiAgICAgICAgDQogICAgICAgIC8vIDIuIHN0YXJ0\nIGFub3RoZXIgdHgsIGFuZCBjYXVzZSBhIHZlcnNpb24gaW5jcmVtZW50DQog\nICAgICAgIEVudGl0eU1hbmFnZXIgZW0yID0gZW1mLmNyZWF0ZUVudGl0eU1h\nbmFnZXIoKTsNCiAgICAgICAgZW0yLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4o\nKTsNCiAgICAgICAgZW0yLmxvY2soZW0yLmZpbmQoT3B0aW1pc3RpY0xvY2tJ\nbnN0YW5jZS5jbGFzcywgcGspLCANCiAgICAgICAgICAgIExvY2tNb2RlVHlw\nZS5XUklURSk7DQogICAgICAgIGVtMi5nZXRUcmFuc2FjdGlvbigpLmNvbW1p\ndCgpOw0KICAgICAgICBlbTIuY2xvc2UoKTsNCiAgICAgICAgDQogICAgICAg\nIC8vIDMuIHRyeSB0byBjb21taXQuIHRoaXMgc2hvdWxkIGZhaWwsIGFzIHRo\naXMgaXMgYSByZWd1bGFyIG9wdGltaXN0aWMNCiAgICAgICAgLy8gbG9jayBm\nYWlsdXJlIHNpdHVhdGlvbi4NCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAg\nIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7DQogICAgICAgICAgICBm\nYWlsKCJ3cml0ZSBsb2NrIGluIGVtMiBzaG91bGQgdHJpZ2dlciBhbiBvcHRp\nbWlzdGljIGxvY2sgZmFpbHVyZSIpOw0KICAgICAgICB9IGNhdGNoIChSb2xs\nYmFja0V4Y2VwdGlvbiBwZSkgew0KICAgICAgICAgICAgLy8gZXhwZWN0ZWQN\nCiAgICAgICAgfQ0KICAgICAgICBlbS5jbG9zZSgpOw0KICAgIH0NCn0NCg==\n","encoding":"base64"}

