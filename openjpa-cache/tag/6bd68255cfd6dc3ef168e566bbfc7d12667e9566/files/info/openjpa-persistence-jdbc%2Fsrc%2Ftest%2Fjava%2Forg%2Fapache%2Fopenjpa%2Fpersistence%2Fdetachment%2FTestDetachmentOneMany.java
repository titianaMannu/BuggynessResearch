{"sha":"827c086a3ebc0eda7fbdeedc01b27548485efd85","node_id":"MDQ6QmxvYjIwNjM2NDo4MjdjMDg2YTNlYmMwZWRhN2ZiZGVlZGMwMWIyNzU0ODQ4NWVmZDg1","size":4849,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/827c086a3ebc0eda7fbdeedc01b27548485efd85","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZGV0YWNo\nbWVudDsKCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2Vy\nOwoKaW1wb3J0IGp1bml0LnRleHR1aS5UZXN0UnVubmVyOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFQZXJzaXN0ZW5j\nZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5BdXRv\nRGV0YWNoVHlwZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0\nZW5jZS50ZXN0LlNpbmdsZUVNRlRlc3RDYXNlOwoKLyoqCiAqIFRlc3RzIGRl\ndGFjaG1lbnQgZm9yIGJpZGlyZWN0aW9uYWwgb25lLW1hbnkgcmVsYXRpb25z\naGlwCiAqCiAqIEBhdXRob3IgRGF2aWQgRXp6aW8KICovCnB1YmxpYyBjbGFz\ncyBUZXN0RGV0YWNobWVudE9uZU1hbnkKICAgIGV4dGVuZHMgU2luZ2xlRU1G\nVGVzdENhc2UgewoKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgewogICAgICAg\nIHNldFVwKERldGFjaG1lbnRPbmVNYW55UGFyZW50LmNsYXNzLCBEZXRhY2ht\nZW50T25lTWFueUNoaWxkLmNsYXNzKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0RGV0YWNobWVudCgpIHsKICAgICAgICBsb25nIGlkID0gY3JlYXRl\nUGFyZW50QW5kQ2hpbGRyZW4oKTsKICAgIAogICAgICAgIEVudGl0eU1hbmFn\nZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIE9w\nZW5KUEFQZXJzaXN0ZW5jZS5jYXN0KGVtKS5zZXRBdXRvRGV0YWNoKAogICAg\nICAgICAgICBBdXRvRGV0YWNoVHlwZS5OT05fVFJBTlNBQ1RJT05BTF9SRUFE\nKTsKICAgICAgICBEZXRhY2htZW50T25lTWFueVBhcmVudCBwYXJlbnQgPSBl\nbS5maW5kKERldGFjaG1lbnRPbmVNYW55UGFyZW50LmNsYXNzLAogICAgICAg\nICAgICBpZCk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChwYXJlbnQpOwogICAg\nICAgIGFzc2VydEZhbHNlKCJUaGUgcGFyZW50IHdhcyBub3QgZGV0YWNoZWQi\nLCBlbS5jb250YWlucyhwYXJlbnQpKTsKICAgICAgICBlbS5jbG9zZSgpOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RGZXRjaFdpdGhEZXRhY2goKSB7\nCiAgICAgICAgbG9uZyBpZCA9IGNyZWF0ZVBhcmVudEFuZENoaWxkcmVuKCk7\nCiAgICAgCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVF\nbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgT3BlbkpQQVBlcnNpc3RlbmNlLmNh\nc3QoZW0pLnNldEF1dG9EZXRhY2goCiAgICAgICAgICAgIEF1dG9EZXRhY2hU\neXBlLk5PTl9UUkFOU0FDVElPTkFMX1JFQUQpOwogICAgICAgIERldGFjaG1l\nbnRPbmVNYW55UGFyZW50IHBhcmVudCA9IGVtLmZpbmQoRGV0YWNobWVudE9u\nZU1hbnlQYXJlbnQuY2xhc3MsCiAgICAgICAgICAgIGlkKTsKICAgICAgICBh\nc3NlcnROb3ROdWxsKHBhcmVudCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJw\nYXJlbnQiLCBwYXJlbnQuZ2V0TmFtZSgpKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoMiwgcGFyZW50LmdldENoaWxkcmVuKCkuc2l6ZSgpKTsKICAgICAgICBE\nZXRhY2htZW50T25lTWFueUNoaWxkIGNoaWxkMCA9IHBhcmVudC5nZXRDaGls\nZHJlbigpLmdldCgwKTsKICAgICAgICBEZXRhY2htZW50T25lTWFueUNoaWxk\nIGNoaWxkMSA9IHBhcmVudC5nZXRDaGlsZHJlbigpLmdldCgxKTsKICAgICAg\nICBhc3NlcnROb3ROdWxsKCJEaWQgbm90IGZpbmQgZXhwZWN0ZWQgZmlyc3Qg\nY2hpbGQiLCBjaGlsZDApOwogICAgICAgIGFzc2VydE5vdE51bGwoIkRpZCBu\nb3QgZmluZCBleHBlY3RlZCBzZWNvbmQgY2hpbGQiLCBjaGlsZDEpOwogICAg\nICAgIGFzc2VydEVxdWFscygiY2hpbGQwIiwgY2hpbGQwLmdldE5hbWUoKSk7\nCiAgICAgICAgYXNzZXJ0RmFsc2UoIlRoZSBmaXJzdCBjaGlsZCB3YXMgbm90\nIGRldGFjaGVkIiwgZW0uY29udGFpbnMoY2hpbGQwKSk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKCJjaGlsZDEiLCBjaGlsZDEuZ2V0TmFtZSgpKTsKICAgICAg\nICBhc3NlcnRGYWxzZSgiVGhlIHNlY29uZCBjaGlsZCB3YXMgbm90IGRldGFj\naGVkIiwgZW0uY29udGFpbnMoY2hpbGQxKSk7CiAgICAgICAgZW0uY2xvc2Uo\nKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQgdGVzdEZldGNoV2l0aERl\ndGFjaEZvclRvT25lUmVsYXRpb25zaGlwKCkgewogICAgICAgIGxvbmcgaWQg\nPSBjcmVhdGVQYXJlbnRBbmRDaGlsZHJlbigpOwogICAgICAgIAogICAgICAg\nIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigp\nOwogICAgICAgIE9wZW5KUEFQZXJzaXN0ZW5jZS5jYXN0KGVtKS5zZXRBdXRv\nRGV0YWNoKAogICAgICAgICAgICBBdXRvRGV0YWNoVHlwZS5OT05fVFJBTlNB\nQ1RJT05BTF9SRUFEKTsKICAgICAgICBEZXRhY2htZW50T25lTWFueVBhcmVu\ndCBwYXJlbnQgPSBlbS5maW5kKERldGFjaG1lbnRPbmVNYW55UGFyZW50LmNs\nYXNzLAogICAgICAgICAgICBpZCk7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChw\nYXJlbnQpOwogICAgICAgIGFzc2VydEVxdWFscygyLCBwYXJlbnQuZ2V0Q2hp\nbGRyZW4oKS5zaXplKCkpOwogICAgICAgIGFzc2VydEVxdWFscygiVG9PbmUg\ncmVsYXRpb25zaGlwIHdhcyBub3QgZWFnZXJseSBmZXRjaGVkIiwgCiAgICAg\nICAgICAgICAgcGFyZW50LCBwYXJlbnQuZ2V0Q2hpbGRyZW4oKS5nZXQoMCku\nZ2V0UGFyZW50KCkpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CiAgICAK\nICAgIHByaXZhdGUgbG9uZyBjcmVhdGVQYXJlbnRBbmRDaGlsZHJlbigpIHsK\nICAgICAgICBEZXRhY2htZW50T25lTWFueVBhcmVudCBwYXJlbnQgPSBuZXcg\nRGV0YWNobWVudE9uZU1hbnlQYXJlbnQoKTsKICAgICAgICBwYXJlbnQuc2V0\nTmFtZSgicGFyZW50Iik7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCAy\nOyBpKyspIHsKICAgICAgICAgICAgRGV0YWNobWVudE9uZU1hbnlDaGlsZCBj\naGlsZCA9IG5ldyBEZXRhY2htZW50T25lTWFueUNoaWxkKCk7CiAgICAgICAg\nICAgIGNoaWxkLnNldE5hbWUoImNoaWxkIiArIGkpOwogICAgICAgICAgICBw\nYXJlbnQuYWRkQ2hpbGQoY2hpbGQpOwogICAgICAgIH0KICAgICAgCiAgICAg\nICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2Vy\nKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAg\nICAgIGVtLnBlcnNpc3QocGFyZW50KTsKICAgICAgICBlbS5nZXRUcmFuc2Fj\ndGlvbigpLmNvbW1pdCgpOwogICAgICAgIGxvbmcgaWQgPSBwYXJlbnQuZ2V0\nSWQoKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHBhcmVudC5nZXRDaGlsZHJl\nbigpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMiwgcGFyZW50LmdldENoaWxk\ncmVuKCkuc2l6ZSgpKTsKICAgICAgICBhc3NlcnRUcnVlKCJUaGUgcGFyZW50\nIGlzIG5vdCBtYW5hZ2VkIiwgZW0uY29udGFpbnMocGFyZW50KSk7CiAgICAg\nICAgRGV0YWNobWVudE9uZU1hbnlDaGlsZCBjaGlsZDAgPSBwYXJlbnQuZ2V0\nQ2hpbGRyZW4oKS5nZXQoMCk7CiAgICAgICAgRGV0YWNobWVudE9uZU1hbnlD\naGlsZCBjaGlsZDEgPSBwYXJlbnQuZ2V0Q2hpbGRyZW4oKS5nZXQoMSk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKCJjaGlsZDAiLCBjaGlsZDAuZ2V0TmFtZSgp\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoImNoaWxkMSIsIGNoaWxkMS5nZXRO\nYW1lKCkpOwogICAgICAgIGFzc2VydEVxdWFscygiVGhlIGZpcnN0IGNoaWxk\nIGhhcyBubyByZWxhdGlvbnNoaXAgdG8gdGhlIHBhcmVudCIsIAogICAgICAg\nICAgICBwYXJlbnQsIGNoaWxkMC5nZXRQYXJlbnQoKSk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKCJUaGUgc2Vjb25kIGNoaWxkIGhhcyBubyByZWxhdGlvbnNo\naXAgdG8gdGhlIHBhcmVudCIsIAogICAgICAgICAgICBwYXJlbnQsIGNoaWxk\nMS5nZXRQYXJlbnQoKSk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgICAgICBy\nZXR1cm4gaWQ7CiAgICB9CgogICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4o\nU3RyaW5nW10gYXJncykgewogICAgICAgIFRlc3RSdW5uZXIucnVuKFRlc3RE\nZXRhY2htZW50T25lTWFueS5jbGFzcyk7CiAgICB9Cn0KCg==\n","encoding":"base64"}

