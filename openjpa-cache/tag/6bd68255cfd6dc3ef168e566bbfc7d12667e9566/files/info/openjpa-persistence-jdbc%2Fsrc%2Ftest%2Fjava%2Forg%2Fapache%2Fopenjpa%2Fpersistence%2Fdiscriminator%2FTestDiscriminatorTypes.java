{"sha":"4b07d2abedec15d57cc2f175a14bd6da6687a2a8","node_id":"MDQ6QmxvYjIwNjM2NDo0YjA3ZDJhYmVkZWMxNWQ1N2NjMmYxNzVhMTRiZDZkYTY2ODdhMmE4","size":4097,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/4b07d2abedec15d57cc2f175a14bd6da6687a2a8","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZGlzY3Jp\nbWluYXRvcjsKCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5h\nZ2VyOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1ldGEuQ2xh\nc3NNYXBwaW5nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0\nYS5EaXNjcmltaW5hdG9yOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1l\ndGEuSmF2YVR5cGVzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNp\nc3RlbmNlLnRlc3QuU2luZ2xlRU1GVGVzdENhc2U7CgpwdWJsaWMgY2xhc3Mg\nVGVzdERpc2NyaW1pbmF0b3JUeXBlcyBleHRlbmRzIFNpbmdsZUVNRlRlc3RD\nYXNlIHsKCiAgICBwcm90ZWN0ZWQgdm9pZCBzZXRVcCgpIHsKICAgICAgICBz\ndXBlci5zZXRVcChDaGFyQWJzdHJhY3RFbnRpdHkuY2xhc3MsIENoYXJMZWFm\nRW50aXR5LmNsYXNzLAogICAgICAgICAgICAgICAgQ2hhclJvb3RFbnRpdHku\nY2xhc3MsIEludGVnZXJBYnN0cmFjdEVudGl0eS5jbGFzcywKICAgICAgICAg\nICAgICAgIEludGVnZXJMZWFmRW50aXR5LmNsYXNzLCBJbnRlZ2VyUm9vdEVu\ndGl0eS5jbGFzcywKICAgICAgICAgICAgICAgIFN0cmluZ0Fic3RyYWN0RW50\naXR5LmNsYXNzLCBTdHJpbmdMZWFmRW50aXR5LmNsYXNzLAogICAgICAgICAg\nICAgICAgU3RyaW5nUm9vdEVudGl0eS5jbGFzcyk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgdGVzdENoYXJEaXNjcmltaW5hdG9ycygpIHsKICAgICAgICBF\nbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsg\nLy8gbG9hZCB0eXBlcwoKICAgICAgICBEaXNjcmltaW5hdG9yIGRpc2NyaW0g\nPSBnZXRNYXBwaW5nKCJDaGFyQWJzdHJhY3RFbnRpdHkiKQogICAgICAgICAg\nICAgICAgLmdldERpc2NyaW1pbmF0b3IoKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMobmV3IENoYXJhY3RlcignQycpLCBkaXNjcmltLmdldFZhbHVlKCkpOyAv\nLyBHZW5lcmF0ZWQKICAgICAgICBhc3NlcnRFcXVhbHMoSmF2YVR5cGVzLkNI\nQVIsIGRpc2NyaW0uZ2V0SmF2YVR5cGUoKSk7CgogICAgICAgIGRpc2NyaW0g\nPSBnZXRNYXBwaW5nKCJjaHJMZWFmIikuZ2V0RGlzY3JpbWluYXRvcigpOwog\nICAgICAgIGFzc2VydEVxdWFscyhuZXcgQ2hhcmFjdGVyKCdjJyksIGRpc2Ny\naW0uZ2V0VmFsdWUoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKEphdmFUeXBl\ncy5DSEFSLCBkaXNjcmltLmdldEphdmFUeXBlKCkpOwoKICAgICAgICBkaXNj\ncmltID0gZ2V0TWFwcGluZygiQ2hhclJvb3RFbnRpdHkiKS5nZXREaXNjcmlt\naW5hdG9yKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKG5ldyBDaGFyYWN0ZXIo\nJ1InKSwgZGlzY3JpbS5nZXRWYWx1ZSgpKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoSmF2YVR5cGVzLkNIQVIsIGRpc2NyaW0uZ2V0SmF2YVR5cGUoKSk7Cgog\nICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVz\ndEludERpc2NyaW1pbmF0b3JzKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIg\nZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOyAvLyBsb2FkIHRoZSB0\neXBlcwoKICAgICAgICBEaXNjcmltaW5hdG9yIGRpc2NyaW0gPSBnZXRNYXBw\naW5nKCJJbnRlZ2VyQWJzdHJhY3RFbnRpdHkiKQogICAgICAgICAgICAgICAg\nLmdldERpc2NyaW1pbmF0b3IoKTsKICAgICAgICBhc3NlcnRFcXVhbHMobmV3\nIEludGVnZXIoIkludGVnZXJBYnN0cmFjdEVudGl0eSIuaGFzaENvZGUoKSks\nIGRpc2NyaW0KICAgICAgICAgICAgICAgIC5nZXRWYWx1ZSgpKTsgLy8gR2Vu\nZXJhdGVkIHZhbHVlCiAgICAgICAgYXNzZXJ0RXF1YWxzKEphdmFUeXBlcy5J\nTlQsIGRpc2NyaW0uZ2V0SmF2YVR5cGUoKSk7CgogICAgICAgIGRpc2NyaW0g\nPSBnZXRNYXBwaW5nKCJpbnRMZWFmIikuZ2V0RGlzY3JpbWluYXRvcigpOwog\nICAgICAgIGFzc2VydEVxdWFscyhuZXcgSW50ZWdlcigiaW50TGVhZiIuaGFz\naENvZGUoKSksIGRpc2NyaW0uZ2V0VmFsdWUoKSk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKEphdmFUeXBlcy5JTlQsIGRpc2NyaW0uZ2V0SmF2YVR5cGUoKSk7\nCgogICAgICAgIGRpc2NyaW0gPSBnZXRNYXBwaW5nKCJJbnRlZ2VyUm9vdEVu\ndGl0eSIpLmdldERpc2NyaW1pbmF0b3IoKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMobmV3IEludGVnZXIoMTAxMDEpLCBkaXNjcmltLmdldFZhbHVlKCkpOwog\nICAgICAgIGFzc2VydEVxdWFscyhKYXZhVHlwZXMuSU5ULCBkaXNjcmltLmdl\ndEphdmFUeXBlKCkpOwoKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHRlc3RTdHJpbmdEaXNjcmltaW5hdG9ycygpIHsKICAg\nICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsgLy8gbG9hZCB0aGUgdHlwZXMKICAgICAgICBEaXNjcmltaW5hdG9y\nIGRpc2NyaW0gPSBnZXRNYXBwaW5nKCJTdHJpbmdBYnN0cmFjdEVudGl0eSIp\nCiAgICAgICAgICAgICAgICAuZ2V0RGlzY3JpbWluYXRvcigpOwogICAgICAg\nIGFzc2VydEVxdWFscygiU3RyaW5nQWJzdHJhY3RFbnRpdHkiLCBkaXNjcmlt\nLmdldFZhbHVlKCkpOyAvLyBHZW5lcmF0ZWQKICAgICAgICBhc3NlcnRFcXVh\nbHMoSmF2YVR5cGVzLlNUUklORywgZGlzY3JpbS5nZXRKYXZhVHlwZSgpKTsK\nCiAgICAgICAgZGlzY3JpbSA9IGdldE1hcHBpbmcoInN0ckxlYWYiKS5nZXRE\naXNjcmltaW5hdG9yKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJzdHJMZWFm\nIiwgZGlzY3JpbS5nZXRWYWx1ZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nSmF2YVR5cGVzLlNUUklORywgZGlzY3JpbS5nZXRKYXZhVHlwZSgpKTsKCiAg\nICAgICAgZGlzY3JpbSA9IGdldE1hcHBpbmcoIlN0cmluZ1Jvb3RFbnRpdHki\nKS5nZXREaXNjcmltaW5hdG9yKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJT\ndHJpbmdSb290IiwgZGlzY3JpbS5nZXRWYWx1ZSgpKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHMoSmF2YVR5cGVzLlNUUklORywgZGlzY3JpbS5nZXRKYXZhVHlw\nZSgpKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHByaXZhdGUg\nQ2xhc3NNYXBwaW5nIGdldE1hcHBpbmcoU3RyaW5nIG5hbWUpIHsKICAgICAg\nICByZXR1cm4gKENsYXNzTWFwcGluZykgZW1mLmdldENvbmZpZ3VyYXRpb24o\nKQogICAgICAgICAgICAgICAgLmdldE1ldGFEYXRhUmVwb3NpdG9yeUluc3Rh\nbmNlKCkuZ2V0TWV0YURhdGEobmFtZSwKICAgICAgICAgICAgICAgICAgICAg\nICAgZ2V0Q2xhc3MoKS5nZXRDbGFzc0xvYWRlcigpLCB0cnVlKTsKICAgIH0K\nfQo=\n","encoding":"base64"}

