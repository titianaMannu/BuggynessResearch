{"sha":"7221c995fb67527600d6b182934557c2450bfd19","node_id":"MDQ6QmxvYjIwNjM2NDo3MjIxYzk5NWZiNjc1Mjc2MDBkNmIxODI5MzQ1NTdjMjQ1MGJmZDE5","size":3693,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/7221c995fb67527600d6b182934557c2450bfd19","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UucmVsYXRp\nb25zOwoKaW1wb3J0IGphdmEudXRpbC5JdGVyYXRvcjsKaW1wb3J0IGphdmF4\nLnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXI7CgppbXBvcnQganVuaXQudGV4\ndHVpLlRlc3RSdW5uZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVy\nc2lzdGVuY2UuT3BlbkpQQUVudGl0eU1hbmFnZXI7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQVBlcnNpc3RlbmNlOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnRlc3QuU2lu\nZ2xlRU1GVGVzdENhc2U7CgovKioKICogVGVzdCBMUlMgcmVsYXRpb25zLgog\nKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKi8KcHVibGljIGNsYXNzIFRlc3RM\nUlMKICAgIGV4dGVuZHMgU2luZ2xlRU1GVGVzdENhc2UgewoKICAgIHByaXZh\ndGUgbG9uZyBpZDsKCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpIHsKICAgICAg\nICBzZXRVcChMUlNFbnRpdHkuY2xhc3MsIEJhc2ljRW50aXR5LmNsYXNzLCBD\nTEVBUl9UQUJMRVMpOwogICAgICAgIAogICAgICAgIEVudGl0eU1hbmFnZXIg\nZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdl\ndFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKCiAgICAgICAgTFJTRW50aXR5IGxy\ncyA9IG5ldyBMUlNFbnRpdHkoKTsKICAgICAgICBscnMuc2V0TmFtZSgibHJz\nIik7IAogICAgICAgIGZvciAoaW50IGkgPSAxOyBpIDw9IDM7IGkrKykgewog\nICAgICAgICAgICBCYXNpY0VudGl0eSBiYXNpYyA9IG5ldyBCYXNpY0VudGl0\neSgpOwogICAgICAgICAgICBiYXNpYy5zZXROYW1lKCJiYXNpYyIgKyBpKTsK\nICAgICAgICAgICAgZW0ucGVyc2lzdChiYXNpYyk7CiAgICAgICAgICAgIGxy\ncy5nZXRMUlNMaXN0KCkuYWRkKGJhc2ljKTsKICAgICAgICB9CiAgICAgICAg\nZW0ucGVyc2lzdChscnMpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCku\nY29tbWl0KCk7CiAgICAgICAgaWQgPSBscnMuZ2V0SWQoKTsKICAgICAgICBl\nbS5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RFTUNsZWFy\nKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50\naXR5TWFuYWdlcigpOwogICAgICAgIExSU0VudGl0eSBscnMgPSBlbS5maW5k\nKExSU0VudGl0eS5jbGFzcywgaWQpOwogICAgICAgIGFzc2VydExSUyhscnMs\nICJscnMiKTsKICAgICAgICBlbS5jbGVhcigpOwogICAgICAgIGFzc2VydE51\nbGwobHJzLmdldExSU0xpc3QoKSk7CiAgICAgICAgYXNzZXJ0TWVyZ2UobHJz\nKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lk\nIHRlc3RFTUNsb3NlKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBl\nbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIExSU0VudGl0eSBs\ncnMgPSBlbS5maW5kKExSU0VudGl0eS5jbGFzcywgaWQpOwogICAgICAgIGFz\nc2VydExSUyhscnMsICJscnMiKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAg\nICAgIGFzc2VydE51bGwobHJzLmdldExSU0xpc3QoKSk7CiAgICAgICAgYXNz\nZXJ0TWVyZ2UobHJzKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0RGV0\nYWNoQ29weSgpIHsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBlbSA9\nIGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgTFJTRW50aXR5\nIGxycyA9IGVtLmZpbmQoTFJTRW50aXR5LmNsYXNzLCBpZCk7CiAgICAgICAg\nYXNzZXJ0TFJTKGxycywgImxycyIpOwogICAgICAgIGxycyA9IGVtLmRldGFj\naChscnMpOyAKICAgICAgICBhc3NlcnRFcXVhbHMoImxycyIsIGxycy5nZXRO\nYW1lKCkpOwogICAgICAgIGFzc2VydE51bGwobHJzLmdldExSU0xpc3QoKSk7\nCiAgICAgICAgZW0uY2xvc2UoKTsKICAgICAgICBhc3NlcnRNZXJnZShscnMp\nOwogICAgfQoKICAgIHByaXZhdGUgdm9pZCBhc3NlcnRMUlMoTFJTRW50aXR5\nIGxycywgU3RyaW5nIG5hbWUpIHsKICAgICAgICBhc3NlcnROb3ROdWxsKGxy\ncyk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKG5hbWUsIGxycy5nZXROYW1lKCkp\nOwogICAgICAgIGFzc2VydEVxdWFscygzLCBscnMuZ2V0TFJTTGlzdCgpLnNp\nemUoKSk7CiAgICAgICAgSXRlcmF0b3IgaXRyID0gbHJzLmdldExSU0xpc3Qo\nKS5pdGVyYXRvcigpOwogICAgICAgIGZvciAoaW50IGkgPSAxOyBpdHIuaGFz\nTmV4dCgpOyBpKyspIHsKICAgICAgICAgICAgQmFzaWNFbnRpdHkgYmFzaWMg\nPSAoQmFzaWNFbnRpdHkpIGl0ci5uZXh0KCk7CiAgICAgICAgICAgIGFzc2Vy\ndEVxdWFscygiYmFzaWMiICsgaSwgYmFzaWMuZ2V0TmFtZSgpKTsKICAgICAg\nICB9CiAgICAgICAgT3BlbkpQQVBlcnNpc3RlbmNlLmNsb3NlKGl0cik7CiAg\nICB9CgogICAgcHJpdmF0ZSB2b2lkIGFzc2VydE1lcmdlKExSU0VudGl0eSBs\ncnMpIHsKICAgICAgICBscnMuc2V0TmFtZSgiY2hhbmdlZCIpOwogICAgICAg\nIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigp\nOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAg\nICBhc3NlcnRMUlMoZW0ubWVyZ2UobHJzKSwgImNoYW5nZWQiKTsKICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIGVtLmNs\nb3NlKCk7CgogICAgICAgIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIo\nKTsKICAgICAgICBhc3NlcnRMUlMoZW0uZmluZChMUlNFbnRpdHkuY2xhc3Ms\nIGlkKSwgImNoYW5nZWQiKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoK\nICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHsK\nICAgICAgICBUZXN0UnVubmVyLnJ1bihUZXN0TFJTLmNsYXNzKTsKICAgIH0K\nfQoK\n","encoding":"base64"}

