{"sha":"08cdc9e906885610944c9eb0f9b9aa8709509fb0","node_id":"MDQ6QmxvYjIwNjM2NDowOGNkYzllOTA2ODg1NjEwOTQ0YzllYjBmOWI5YWE4NzA5NTA5ZmIw","size":5401,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/08cdc9e906885610944c9eb0f9b9aa8709509fb0","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UudGVzdDsK\nCmltcG9ydCBqYXZhLnV0aWwuQ29sbGVjdGlvbnM7CmltcG9ydCBqYXZhLnV0\naWwuTGlzdDsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eVRyYW5z\nYWN0aW9uOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5j\nZS5PcGVuSlBBRW50aXR5TWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBUXVlcnk7CgovKioKICogQSBiYXNl\nIHRlc3QgY2FzZSB0aGF0IGNhbiBiZSB1c2VkIHRvIGVhc2lseSB0ZXN0IHNj\nZW5hcmlvcyB3aGVyZSB0aGVyZQogKiBpcyBvbmx5IGEgc2luZ2xlIEVudGl0\neU1hbmFnZXIgYXQgYW55IGdpdmVuIHRpbWUuCiAqCiAqIEBhdXRob3IgTWFy\nYyBQcnVkJ2hvbW1lYXV4CiAqLwpwdWJsaWMgYWJzdHJhY3QgY2xhc3MgU2lu\nZ2xlRU1UZXN0Q2FzZSAKICAgIGV4dGVuZHMgU2luZ2xlRU1GVGVzdENhc2Ug\newoKICAgIHByb3RlY3RlZCBPcGVuSlBBRW50aXR5TWFuYWdlciBlbTsKCiAg\nICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIHNldFVwKCkgewogICAgICAg\nIHNldFVwKG5ldyBPYmplY3RbMF0pOwogICAgfQoKICAgIEBPdmVycmlkZQog\nICAgcHVibGljIHZvaWQgc2V0VXAoT2JqZWN0Li4uIHByb3BzKSB7CiAgICAg\nICAgc3VwZXIuc2V0VXAocHJvcHMpOwogICAgICAgIGVtID0gZW1mLmNyZWF0\nZUVudGl0eU1hbmFnZXIoKTsgCiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBw\ndWJsaWMgdm9pZCB0ZWFyRG93bigpIHRocm93cyBFeGNlcHRpb24gewogICAg\nICAgIHJvbGxiYWNrKCk7CiAgICAgICAgY2xvc2UoKTsKICAgICAgICBzdXBl\nci50ZWFyRG93bigpOwogICAgfQoKICAgIC8qKiAKICAgICAqIFN0YXJ0IGEg\nbmV3IHRyYW5zYWN0aW9uIGlmIHRoZXJlIGlzbid0IGN1cnJlbnRseSBvbmUg\nYWN0aXZlLiAKICAgICAqIEByZXR1cm4gIHRydWUgaWYgYSB0cmFuc2FjdGlv\nbiB3YXMgc3RhcnRlZCwgZmFsc2UgaWYgb25lIGFscmVhZHkgZXhpc3RlZAog\nICAgICovCiAgICBwcm90ZWN0ZWQgYm9vbGVhbiBiZWdpbigpIHsKICAgICAg\nICBFbnRpdHlUcmFuc2FjdGlvbiB0eCA9IGVtLmdldFRyYW5zYWN0aW9uKCk7\nCiAgICAgICAgaWYgKHR4LmlzQWN0aXZlKCkpCiAgICAgICAgICAgIHJldHVy\nbiBmYWxzZTsKCiAgICAgICAgdHguYmVnaW4oKTsKICAgICAgICByZXR1cm4g\ndHJ1ZTsKICAgIH0KCiAgICAvKiogCiAgICAgKiBDb21taXQgdGhlIGN1cnJl\nbnQgdHJhbnNhY3Rpb24sIGlmIGl0IGlzIGFjdGl2ZS4gCiAgICAgKiBAcmV0\ndXJuIHRydWUgaWYgdGhlIHRyYW5zYWN0aW9uIHdhcyBjb21taXR0ZWQKICAg\nICAqLwogICAgcHJvdGVjdGVkIGJvb2xlYW4gY29tbWl0KCkgewogICAgICAg\nIEVudGl0eVRyYW5zYWN0aW9uIHR4ID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsK\nICAgICAgICBpZiAoIXR4LmlzQWN0aXZlKCkpCiAgICAgICAgICAgIHJldHVy\nbiBmYWxzZTsKCiAgICAgICAgdHguY29tbWl0KCk7CiAgICAgICAgcmV0dXJu\nIHRydWU7CiAgICB9CgogICAgLyoqIAogICAgICogUm9sbGJhY2sgdGhlIGN1\ncnJlbnQgdHJhbnNhY3Rpb24sIGlmIGl0IGlzIGFjdGl2ZS4gCiAgICAgKiBA\ncmV0dXJuIHRydWUgaWYgdGhlIHRyYW5zYWN0aW9uIHdhcyByb2xsZWQgYmFj\nawogICAgICovCiAgICBwcm90ZWN0ZWQgYm9vbGVhbiByb2xsYmFjaygpIHsK\nICAgICAgICBFbnRpdHlUcmFuc2FjdGlvbiB0eCA9IGVtLmdldFRyYW5zYWN0\naW9uKCk7CiAgICAgICAgaWYgKCF0eC5pc0FjdGl2ZSgpKQogICAgICAgICAg\nICByZXR1cm4gZmFsc2U7CgogICAgICAgIHR4LnJvbGxiYWNrKCk7CiAgICAg\nICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqIAogICAgICogQ2xvc2Vz\nIHRoZSBjdXJyZW50IEVudGl0eU1hbmFnZXIgaWYgaXQgaXMgb3Blbi4gCiAg\nICAgKiBAcmV0dXJuIGZhbHNlIGlmIHRoZSBFbnRpdHlNYW5hZ2VyIHdhcyBh\nbHJlYWR5IGNsb3NlZC4KICAgICAqLwogICAgcHJvdGVjdGVkIGJvb2xlYW4g\nY2xvc2UoKSB7CiAgICAgICAgaWYgKGVtID09IG51bGwpCiAgICAgICAgICAg\nIHJldHVybiBmYWxzZTsKCiAgICAgICAgcm9sbGJhY2soKTsKCiAgICAgICAg\naWYgKCFlbS5pc09wZW4oKSkKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoK\nICAgICAgICBlbS5jbG9zZSgpOwogICAgICAgIHJldHVybiAhZW0uaXNPcGVu\nKCk7CiAgICB9CgogICAgLyoqIAogICAgICogRGVsZXRlIGFsbCBvZiB0aGUg\naW5zdGFuY2VzLgogICAgICoKICAgICAqIElmIG5vIHRyYW5zYWN0aW9uIGlz\nIHJ1bm5pbmcsIHRoZW4gb25lIHdpbGwgYmUgc3RhcnRlZCBhbmQgY29tbWl0\ndGVkLgogICAgICogT3RoZXJ3aXNlLCB0aGUgb3BlcmF0aW9uIHdpbGwgdGFr\nZSBwbGFjZSBpbiB0aGUgY3VycmVudCB0cmFuc2FjdGlvbi4KICAgICAqLwog\nICAgcHJvdGVjdGVkIHZvaWQgcmVtb3ZlKE9iamVjdC4uLiBvYnMpIHsKICAg\nICAgICBib29sZWFuIHR4ID0gYmVnaW4oKTsKICAgICAgICBmb3IgKE9iamVj\ndCBvYiA6IG9icykKICAgICAgICAgICAgZW0ucmVtb3ZlKG9iKTsKICAgICAg\nICBpZiAodHgpIAogICAgICAgICAgICBjb21taXQoKTsKICAgIH0KCiAgICAv\nKiogCiAgICAgKiBQZXJzaXN0IGFsbCBvZiB0aGUgaW5zdGFuY2VzLgogICAg\nICoKICAgICAqIElmIG5vIHRyYW5zYWN0aW9uIGlzIHJ1bm5pbmcsIHRoZW4g\nb25lIHdpbGwgYmUgc3RhcnRlZCBhbmQgY29tbWl0dGVkLgogICAgICogT3Ro\nZXJ3aXNlLCB0aGUgb3BlcmF0aW9uIHdpbGwgdGFrZSBwbGFjZSBpbiB0aGUg\nY3VycmVudCB0cmFuc2FjdGlvbi4KICAgICAqLwogICAgcHJvdGVjdGVkIHZv\naWQgcGVyc2lzdChPYmplY3QuLi4gb2JzKSB7CiAgICAgICAgYm9vbGVhbiB0\neCA9IGJlZ2luKCk7CiAgICAgICAgZm9yIChPYmplY3Qgb2IgOiBvYnMpCiAg\nICAgICAgICAgIGVtLnBlcnNpc3Qob2IpOwogICAgICAgIGlmICh0eCkgCiAg\nICAgICAgICAgIGNvbW1pdCgpOwogICAgfQoKICAgIC8qKiAKICAgICAqIENy\nZWF0ZXMgYSBxdWVyeSBpbiB0aGUgY3VycmVudCBFbnRpdHlNYW5hZ2VyIHdp\ndGggdGhlIHNwZWNpZmllZCBzdHJpbmcuIAogICAgICovCiAgICBwcm90ZWN0\nZWQgT3BlbkpQQVF1ZXJ5IHF1ZXJ5KFN0cmluZyBzdHIpIHsKICAgICAgICBy\nZXR1cm4gZW0uY3JlYXRlUXVlcnkoc3RyKTsKICAgIH0KCiAgICAvKiogCiAg\nICAgKiBDcmVhdGUgYSBxdWVyeSBhZ2FpbnN0IHRoZSBzcGVjaWZpZWQgY2xh\nc3MsIHdoaWNoIHdpbGwgYmUgYWxpYXNlZAogICAgICogYXMgIngiLiBGb3Ig\nZXhhbXBsZSwgcXVlcnkoUGVyc29uLmNsYXNzLCAid2hlcmUgeC5hZ2UgPSAy\nMSIpIHdpbGwKICAgICAqIGNyZWF0ZSB0aGUgcXVlcnkgInNlbGVjdCB4IGZy\nb20gUGVyc29uIHggd2hlcmUgeC5hZ2UgPSAyMSIuCiAgICAgKiAgCiAgICAg\nKiBAcGFyYW0gIGMgIHRoZSBjbGFzcyB0byBxdWVyeSBhZ2FpbnN0CiAgICAg\nKiBAcGFyYW0gIHN0ciAgdGhlIHF1ZXJ5IHN1ZmZpeAogICAgICogQHBhcmFt\nICBwYXJhbXMgIHRoZSBwYXJhbWV0ZXJzLCBpZiBhbnkKICAgICAqIEByZXR1\ncm4gdGhlIFF1ZXJ5IG9iamVjdAogICAgICovCiAgICBwcm90ZWN0ZWQgT3Bl\nbkpQQVF1ZXJ5IHF1ZXJ5KENsYXNzIGMsIFN0cmluZyBzdHIsIE9iamVjdC4u\nLiBwYXJhbXMpIHsKICAgICAgICBTdHJpbmcgcXVlcnkgPSAic2VsZWN0IHgg\nZnJvbSAiICsgZW50aXR5TmFtZShlbWYsIGMpICsgIiB4ICIKICAgICAgICAg\nICAgKyAoc3RyID09IG51bGwgPyAiIiA6IHN0cik7CiAgICAgICAgT3BlbkpQ\nQVF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeShxdWVyeSk7CiAgICAgICAgZm9y\nIChpbnQgaSA9IDA7IHBhcmFtcyAhPSBudWxsICYmIGkgPCBwYXJhbXMubGVu\nZ3RoOyBpKyspCiAgICAgICAgICAgIHEuc2V0UGFyYW1ldGVyKGkgKyAxLCBw\nYXJhbXNbaV0pOwogICAgICAgIHJldHVybiBxOwogICAgfQoKICAgIC8qKiAK\nICAgICAqIFJldHVybnMgYSBsaXN0IG9mIGFsbCBpbnN0YW5jZXMgb2YgdGhl\nIHNwZWNpZmljIGNsYXNzIGluIHRoZSBkYXRhYmFzZS4gCiAgICAgKgogICAg\nICogQHBhcmFtIGMgdGhlIGNsYXNzIHRvIGZpbmQKICAgICAqIEBwYXJhbSBx\nIHRoZSBxdWVyeSBzdHJpbmcgc3VmZml4IHRvIHVzZQogICAgICogQHBhcmFt\nIHBhcmFtcyB0aGUgcG9zaXRpb25hbCBwYXJhbWV0ZXIgbGlzdCB2YWx1ZQog\nICAgICoKICAgICAqIEBzZWUgI3F1ZXJ5KGphdmEubGFuZy5DbGFzcyxqYXZh\nLmxhbmcuU3RyaW5nKQogICAgICovCiAgICBwcm90ZWN0ZWQgPEU+IExpc3Q8\nRT4gZmluZChDbGFzczxFPiBjLCBTdHJpbmcgcSwgT2JqZWN0Li4uIHBhcmFt\ncykgewogICAgICAgIHJldHVybiBDb2xsZWN0aW9ucy5jaGVja2VkTGlzdChx\ndWVyeShjLCBxLCBwYXJhbXMpLmdldFJlc3VsdExpc3QoKSwgYyk7CiAgICB9\nCgogICAgLyoqIAogICAgICogUmV0dXJucyBhIGxpc3Qgb2YgYWxsIGluc3Rh\nbmNlcyBvZiB0aGUgc3BlY2lmaWMgY2xhc3MgaW4gdGhlIGRhdGFiYXNlLiAK\nICAgICAqLwogICAgcHJvdGVjdGVkIDxFPiBMaXN0PEU+IGZpbmQoQ2xhc3M8\nRT4gYykgewogICAgICAgIHJldHVybiBmaW5kKGMsIG51bGwpOwogICAgfQp9\nCg==\n","encoding":"base64"}

