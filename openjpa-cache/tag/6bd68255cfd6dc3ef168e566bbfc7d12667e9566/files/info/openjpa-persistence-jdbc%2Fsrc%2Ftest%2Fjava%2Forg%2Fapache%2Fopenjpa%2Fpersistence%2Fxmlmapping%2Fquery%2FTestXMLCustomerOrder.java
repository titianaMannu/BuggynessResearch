{"sha":"7d69f1304e403d7533d6f6a336d0d85ff25bb3c6","node_id":"MDQ6QmxvYjIwNjM2NDo3ZDY5ZjEzMDRlNDAzZDc1MzNkNmY2YTMzNmQwZDg1ZmYyNWJiM2M2","size":11090,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/7d69f1304e403d7533d6f6a336d0d85ff25bb3c6","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UueG1sbWFw\ncGluZy5xdWVyeTsKCmltcG9ydCBqYXZhLmlvLkZpbGVXcml0ZXI7CmltcG9y\ndCBqYXZhLnV0aWwuTGlzdDsKCmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5F\nbnRpdHlNYW5hZ2VyOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5\nVHJhbnNhY3Rpb247CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5RdWVyeTsK\nCmltcG9ydCBqdW5pdC50ZXh0dWkuVGVzdFJ1bm5lcjsKCmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuamRiYy5jb25mLkpEQkNDb25maWd1cmF0aW9uOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLkRCMkRpY3Rpb25h\ncnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuREJEaWN0\naW9uYXJ5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLk9y\nYWNsZURpY3Rpb25hcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5zcWwuU1FMU2VydmVyRGljdGlvbmFyeTsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdlcjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5PcGVuSlBBUGVy\nc2lzdGVuY2U7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVu\nY2UuT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5OwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2Vy\nRmFjdG9yeVNQSTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0\nZW5jZS5PcGVuSlBBRW50aXR5TWFuYWdlclNQSTsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5wZXJzaXN0ZW5jZS50ZXN0LlNRTExpc3RlbmVyVGVzdENh\nc2U7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UueG1s\nbWFwcGluZy54bWxiaW5kaW5ncy5teWFkZHJlc3MuKjsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS54bWxtYXBwaW5nLmVudGl0aWVz\nLio7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UueG1s\nbWFwcGluZy5lbnRpdGllcy5DdXN0b21lci5DcmVkaXRSYXRpbmc7CgovKioK\nICogVGVzdCBxdWVyeSB3aXRoIHByZWRpY2F0ZXMgb24gcGVyc2lzdGVudCBm\naWVsZCBtYXBwZWQgdG8gWE1MIGNvbHVtbi4KICogCiAqIEBhdXRob3IgQ2F0\nYWxpbmEgV2VpCiAqIEBzaW5jZSAxLjAuMAogKi8KcHVibGljIGNsYXNzIFRl\nc3RYTUxDdXN0b21lck9yZGVyCiAgICBleHRlbmRzIFNRTExpc3RlbmVyVGVz\ndENhc2UgewoKICAgIHByaXZhdGUgYm9vbGVhbiBlbmFibGVkID0gZmFsc2U7\nCgogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7CiAgICAgICAgT3BlbkpQQUVu\ndGl0eU1hbmFnZXJGYWN0b3J5U1BJIGVtZiA9IGNyZWF0ZUVNRigpOwogICAg\nICAgIERCRGljdGlvbmFyeSBkaWN0ID0gKChKREJDQ29uZmlndXJhdGlvbikg\nZW1mLmdldENvbmZpZ3VyYXRpb24oKSkKICAgICAgICAgICAgLmdldERCRGlj\ndGlvbmFyeUluc3RhbmNlKCk7CgogICAgICAgIC8vIHNraXAgaWYgZGljdGlv\nbmFyeSBoYXMgbm8gc3VwcG9ydCBmb3IgWE1MIGNvbHVtbiB0eXBlCiAgICAg\nICAgaWYgKCFkaWN0LnN1cHBvcnRzWE1MQ29sdW1uKQogICAgICAgICAgICBy\nZXR1cm47CgogICAgICAgIGVuYWJsZWQgPSB0cnVlOwoKICAgICAgICBzZXRV\ncChvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UueG1sbWFwcGluZy5l\nbnRpdGllcy5DdXN0b21lci5jbGFzcwogICAgICAgICAgICAsIG9yZy5hcGFj\naGUub3BlbmpwYS5wZXJzaXN0ZW5jZS54bWxtYXBwaW5nLmVudGl0aWVzLkN1\nc3RvbWVyCiAgICAgICAgICAgICAgICAuQ3VzdG9tZXJLZXkuY2xhc3MKICAg\nICAgICAgICAgLCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UueG1s\nbWFwcGluZy5lbnRpdGllcy5PcmRlci5jbGFzcwogICAgICAgICAgICAsIG9y\nZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS54bWxtYXBwaW5nLmVudGl0\naWVzLkVBZGRyZXNzLmNsYXNzCiAgICAgICAgICAgICk7CiAgICB9CgogICAg\ncHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykgewogICAg\nICAgIFRlc3RSdW5uZXIucnVuKFRlc3RYTUxDdXN0b21lck9yZGVyLmNsYXNz\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0WE1MQ3VzdG9tZXJPcmRl\ncigpIHsJCiAgICAgICAgLy8gc2tpcCBpZiBkaWN0aW9uYXJ5IGhhcyBubyBz\ndXBwb3J0IGZvciBYTUwgY29sdW1uIHR5cGUKICAgICAgICBpZiAoIWVuYWJs\nZWQpCiAgICAgICAgICAgIHJldHVybjsKCiAgICAgICAgT3BlbkpQQUVudGl0\neU1hbmFnZXJTUEkgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwog\nICAgICAgIERCRGljdGlvbmFyeSBkaWN0ID0gKChKREJDQ29uZmlndXJhdGlv\nbikgZW0uZ2V0Q29uZmlndXJhdGlvbigpKQogICAgICAgICAgICAuZ2V0REJE\naWN0aW9uYXJ5SW5zdGFuY2UoKTsKCiAgICAgICAgU3RyaW5nIHNxbGxvZyA9\nIFRlc3RYTUxDdXN0b21lck9yZGVyLmNsYXNzLmdldE5hbWUoKTsKICAgICAg\nICBzcWxsb2cgPSBzcWxsb2cucmVwbGFjZSgnLicsICcvJyk7CiAgICAgICAg\nc3FsbG9nID0gIi4vIiArIHNxbGxvZzsKICAgICAgICBpZiAoZGljdCBpbnN0\nYW5jZW9mIERCMkRpY3Rpb25hcnkpCiAgICAgICAgICAgIHNxbGxvZyArPSAi\nLmRiMiI7CiAgICAgICAgZWxzZSBpZiAoZGljdCBpbnN0YW5jZW9mIE9yYWNs\nZURpY3Rpb25hcnkpCiAgICAgICAgICAgIHNxbGxvZyArPSAiLm9yYWNsZSI7\nCiAgICAgICAgZWxzZSBpZiAoZGljdCBpbnN0YW5jZW9mIFNRTFNlcnZlckRp\nY3Rpb25hcnkpCiAgICAgICAgICAgIHNxbGxvZyArPSAiLnNxbHNlcnZlciI7\nCgogICAgICAgIC8vIEZvciBwbGF0Zm9ybSBzcGVjaWZpYyBleHBlY3RlZCBz\ncWxzIGFyZSB1bmRlciByZXNvdXJjZXMuCiAgICAgICAgLy8gVGhlIGdlbmVy\nYXRlZCBzcWwgb2YgdGhlIHRlc3QgaXMgY2FwdHVyZWQgYW5kIHdyaXR0ZW4g\ndG8gZmlsZToKICAgICAgICAvLyAgICAgLi9UZXN0WE1MQ3VzdG9tZXJPcmRl\nci5sb2cKICAgICAgICAvLyBUaGlzIG91dHB1dCBmaWxlIGNvbnRlbnRzIHNo\nb3VsZCBtYXRjaCB3aXRoIHRoZSBwbGF0Zm9ybSBzcGVjZmljIAogICAgICAg\nIC8vIHNxbHMuICAgICAgICAKICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4o\nIkV4cGVjdGVkIHB1c2hkb3duIFNRTCBsb2cgZmlsZSBpcyBpbjogIiArIHNx\nbGxvZyk7CiAgICAgICAgCiAgICAgICAgc3FsLmNsZWFyKCk7CgogICAgICAg\nIHRyeSB7CiAgICAgICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4o\nKTsKICAgICAgICAgICAgZGVsZXRlQWxsRGF0YShlbSApOwogICAgICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwoKICAgICAgICAgICAg\nZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgICAgICBsb2Fk\nRGF0YShlbSk7CiAgICAgICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29t\nbWl0KCk7CgogICAgICAgICAgICBlbS5jbG9zZSgpOwoKICAgICAgICAgICAg\nLy8gQnkgY2xvc2luZyBhbmQgcmVjcmVhdGluZyB0aGUgRW50aXR5TWFuYWdl\nciwgCiAgICAgICAgICAgIC8vIHRoaXMgZ3VhcmFudGVlcyB0aGF0IGRhdGEg\nd2lsbCBiZSByZXRyaWV2ZWQgZnJvbSAKICAgICAgICAgICAgLy8gdGhlIGRh\ndGFiYXNlIHJhdGhlciB0aGFuIGp1c3QgcmV1c2VkIGZyb20gdGhlIAogICAg\nICAgICAgICAvLyBwZXJzaXN0ZW5jZSBjb250ZXh0IGNyZWF0ZWQgYnkgdGhl\nIGxvYWQgbWV0aG9kcyBhYm92ZS4KCiAgICAgICAgICAgIGVtID0gZW1mLmNy\nZWF0ZUVudGl0eU1hbmFnZXIoKTsKCiAgICAgICAgICAgIFN5c3RlbS5lcnIu\ncHJpbnRsbigiTWFpbiBzdGFydGVkLiIpOwogICAgICAgICAgICBpbnQgdGVz\ndD0xOwogICAgICAgICAgICBMaXN0PEFkZHJlc3M+IGFkZHJzID0gZW0uY3Jl\nYXRlUXVlcnkoCiAgICAgICAgICAgICAgICAic2VsZWN0IG8uc2hpcEFkZHJl\nc3MgZnJvbSBPcmRlciBvIikKICAgICAgICAgICAgICAgIC5nZXRSZXN1bHRM\naXN0KCk7CiAgICAgICAgICAgIGZvciAoQWRkcmVzcyBhZGRyIDogYWRkcnMp\nIHsKICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbigiYWRkcj0g\nIiArIGFkZHIudG9TdHJpbmcoKSk7CiAgICAgICAgICAgIH0KICAgICAgICAg\nICAgU3RyaW5nIHFzdHJpbmdzW10gPSB7CiAgICAgICAgICAgICAgICAic2Vs\nZWN0IG8gZnJvbSBPcmRlciBvIiwKICAgICAgICAgICAgICAgICJzZWxlY3Qg\nbyBmcm9tIE9yZGVyIG8sIE9yZGVyIG8yIHdoZXJlIG8uc2hpcEFkZHJlc3Mu\nY2l0eSAiICsKICAgICAgICAgICAgICAgICAgICAiPSBvMi5zaGlwQWRkcmVz\ncy5jaXR5IiwKICAgICAgICAgICAgICAgICJzZWxlY3QgbyBmcm9tIE9yZGVy\nIG8sIEN1c3RvbWVyIGMgd2hlcmUgby5zaGlwQWRkcmVzcy5jaXR5ICIgKwog\nICAgICAgICAgICAgICAgICAgICI9IGMuYWRkcmVzcy5jaXR5IiwKICAgICAg\nICAgICAgICAgICJzZWxlY3QgbyBmcm9tIE9yZGVyIG8gd2hlcmUgby5zaGlw\nQWRkcmVzcy5jaXR5ID0gJ1NhbiBKb3NlJyIKICAgICAgICAgICAgfTsKICAg\nICAgICAgICAgU3RyaW5nIHFzdHJpbmcgPSBudWxsOwogICAgICAgICAgICBm\nb3IgKGludCBpID0gMDtpIDwgcXN0cmluZ3MubGVuZ3RoOyBpKyspIHsKICAg\nICAgICAgICAgICAgIHFzdHJpbmcgPSBxc3RyaW5nc1tpXTsKICAgICAgICAg\nICAgICAgIExpc3Qgb3JkZXJzID0gZW0uY3JlYXRlUXVlcnkocXN0cmluZyku\nZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgICAgICAgICAgcHJpbnRPcmRlcnMo\nb3JkZXJzLCB0ZXN0KyspOwogICAgICAgICAgICB9CgogICAgICAgICAgICAv\nLyBxdWVyeSBwYXNzaW5nIHBhcmFtZXRlcnMKICAgICAgICAgICAgcXN0cmlu\nZyA9ICJzZWxlY3QgbyBmcm9tIE9yZGVyIG8gd2hlcmUgby5zaGlwQWRkcmVz\ncy5jaXR5ID0gPzEiOwogICAgICAgICAgICBRdWVyeSBxNSA9IGVtLmNyZWF0\nZVF1ZXJ5KHFzdHJpbmcpOwogICAgICAgICAgICBxNS5zZXRQYXJhbWV0ZXIo\nMSwgIlNhbiBKb3NlIik7CiAgICAgICAgICAgIExpc3Qgb3JkZXJzID1xNS5n\nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgICAgIHByaW50T3JkZXJzKG9yZGVy\ncywgdGVzdCsrKTsKCiAgICAgICAgICAgIHFzdHJpbmcgPSAic2VsZWN0IG8g\nZnJvbSBPcmRlciBvIHdoZXJlID8xID0gby5zaGlwQWRkcmVzcy5jaXR5IjsK\nICAgICAgICAgICAgUXVlcnkgcTYgPSBlbS5jcmVhdGVRdWVyeShxc3RyaW5n\nKTsKICAgICAgICAgICAgcTYuc2V0UGFyYW1ldGVyKDEsICJTYW4gSm9zZSIp\nOwogICAgICAgICAgICBvcmRlcnMgPSBxNi5nZXRSZXN1bHRMaXN0KCk7CiAg\nICAgICAgICAgIHByaW50T3JkZXJzKG9yZGVycywgdGVzdCsrKTsKCiAgICAg\nICAgICAgIGVtLmNsb3NlKCk7CgogICAgICAgICAgICAvLyB0ZXN0IHVwZGF0\nZXMKICAgICAgICAgICAgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigp\nOwogICAgICAgICAgICB0ZXN0VXBkYXRlU2hpcGFkZHJlc3MoZW0sIHRlc3Qr\nKyk7CgogICAgICAgICAgICBlbS5jbG9zZSgpOwogICAgICAgICAgICBlbSA9\nIGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CgogICAgICAgICAgICAvLyBx\ndWVyeSBhZnRlciB1cGRhdGVzIAogICAgICAgICAgICBvcmRlcnMgPSBlbS5j\ncmVhdGVRdWVyeSgic2VsZWN0IG8gZnJvbSBPcmRlciBvIikuZ2V0UmVzdWx0\nTGlzdCgpOwogICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIkFmdGVy\nIFVwZGF0ZToiKTsKICAgICAgICAgICAgcHJpbnRPcmRlcnMob3JkZXJzLCB0\nZXN0KyspOwoKICAgICAgICAgICAgLy8gcXVlcmllcyBleHBlY3RpbmcgZXhj\nZXB0aW9ucwogICAgICAgICAgICBTdHJpbmdbXSBiYWRxc3RyaW5ncyA9IHsK\nICAgICAgICAgICAgICAgICJzZWxlY3QgbyBmcm9tIE9yZGVyIG8gd2hlcmUg\nby5zaGlwQWRkcmVzcy5jaXR5ID0gOTUxNDEiLAogICAgICAgICAgICAgICAg\nInNlbGVjdCBvIGZyb20gT3JkZXIgbyB3aGVyZSBvLnNoaXBBZGRyZXNzLnN0\ncmVldCAiICsKICAgICAgICAgICAgICAgICAgICAiPSAnNTU1IEJhaWxleSci\nLAogICAgICAgICAgICAgICAgInNlbGVjdCBvIGZyb20gT3JkZXIgbyB3aGVy\nZSBvLnNoaXBBZGRyZXNzLnppcCA9IDk1MTQxIgogICAgICAgICAgICB9Owog\nICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGJhZHFzdHJpbmdzLmxl\nbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBxc3RyaW5nID0gYmFkcXN0\ncmluZ3NbaV07CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAg\nICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbigiXG4+PiBRdWVyeSAiK3Rlc3Qr\nIjogIitxc3RyaW5nKTsKICAgICAgICAgICAgICAgICAgICB0ZXN0Kys7CiAg\nICAgICAgICAgICAgICAgICAgb3JkZXJzID0gZW0uY3JlYXRlUXVlcnkocXN0\ncmluZykuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgICAgICAgICAgfQogICAg\nICAgICAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBlKXsKICAgICAgICAgICAg\nICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIkV4Y2VwdGlvbjogIitlKTsK\nICAgICAgICAgICAgICAgIH0gIAogICAgICAgICAgICB9CgogICAgICAgICAg\nICBkdW1wU3FsKCk7CiAgICAgICAgICAgIGVtLmNsb3NlKCk7CiAgICAgICAg\nICAgIGVtZi5jbG9zZSgpOwogICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50\nbG4oIk1haW4gZW5kZWQgbm9ybWFsbHkuIik7CiAgICAgICAgfSBjYXRjaCAo\nRXhjZXB0aW9uIGUpewogICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4o\nIkV4Y2VwdGlvbjogIitlKTsKICAgICAgICAgICAgZS5wcmludFN0YWNrVHJh\nY2UoKTsKICAgICAgICB9ICAgICAgIAogICAgfQoKICAgIHByaXZhdGUgdm9p\nZCBkdW1wU3FsKCkgewogICAgICAgIFN0cmluZyBvdXQgPSAiLi9UZXN0WE1M\nQ3VzdG9tZXJPcmRlci5sb2ciOwogICAgICAgIHRyeSB7CiAgICAgICAgICAg\nIEZpbGVXcml0ZXIgZncgPSBuZXcgRmlsZVdyaXRlcihvdXQpOwogICAgICAg\nICAgICBmb3IgKGludCBpID0gMDsgaSA8IHNxbC5zaXplKCk7IGkrKykgewog\nICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKHNxbC5nZXQoaSkp\nOwogICAgICAgICAgICAgICAgZncud3JpdGUoc3FsLmdldChpKSsiXG4iKTsK\nICAgICAgICAgICAgfQogICAgICAgICAgICBmdy5jbG9zZSgpOwogICAgICAg\nIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7ICAgICAgICAgICAgCiAgICAgICAg\nfQogICAgfQoKICAgIHByaXZhdGUgdm9pZCBwcmludE9yZGVycyhMaXN0IG9y\nZGVycywgaW50IHRlc3QpIHsKICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4o\nIlxuPj4gUXVlcnkgIit0ZXN0KTsKICAgICAgICBTeXN0ZW0ub3V0LnByaW50\nbG4oInJlc3VsdCBzaXplID0gIitvcmRlcnMuc2l6ZSgpKTsKICAgICAgICBm\nb3IgKGludCBpID0gMDsgaSA8IG9yZGVycy5zaXplKCk7IGkrKykgewogICAg\nICAgICAgICBwcmludE9yZGVyKChPcmRlcikgb3JkZXJzLmdldChpKSk7CiAg\nICAgICAgfQogICAgfQoKICAgIHByaXZhdGUgdm9pZCBsb2FkRGF0YShFbnRp\ndHlNYW5hZ2VyIGVtKSB7CgogICAgICAgIE9iamVjdEZhY3RvcnkgYWRkcmVz\nc0ZhY3RvcnkgPSBuZXcgT2JqZWN0RmFjdG9yeSgpOwoKICAgICAgICBDdXN0\nb21lciBjMiA9IG5ldyBDdXN0b21lcigpOwogICAgICAgIGMyLnNldENpZCgg\nbmV3IEN1c3RvbWVyLkN1c3RvbWVyS2V5KCJVU0EiLCAyKSApOwogICAgICAg\nIGMyLnNldE5hbWUoIkEmSiBBdXRvIik7CiAgICAgICAgYzIuc2V0UmF0aW5n\nKCBDcmVkaXRSYXRpbmcuR09PRCApOwogICAgICAgIGMyLnNldEFkZHJlc3Mo\nbmV3IEVBZGRyZXNzKCIyNDgwIENhbXBiZWxsIEF2ZSIsICJDYW1wYmVsbCIs\nICJDQSIKICAgICAgICAgICAgICAgICwgIjk1MTIzIikpOwogICAgICAgIGVt\nLnBlcnNpc3QoYzIpOwoKICAgICAgICBDdXN0b21lciBjMSA9IG5ldyBDdXN0\nb21lcigpOwogICAgICAgIGMxLnNldENpZCggbmV3IEN1c3RvbWVyLkN1c3Rv\nbWVyS2V5KCJVU0EiLCAxKSApOwogICAgICAgIGMxLnNldE5hbWUoIkhhcnJ5\nJ3MgQXV0byIpOwogICAgICAgIGMxLnNldFJhdGluZyggQ3JlZGl0UmF0aW5n\nLkdPT0QgKTsKICAgICAgICBjMS5zZXRBZGRyZXNzKCBuZXcgRUFkZHJlc3Mo\nIjEyNTAwIE1vbnRlcmV5IiwgIlNhbiBKb3NlIiwgIkNBIgogICAgICAgICAg\nICAgICAgLCAiOTUxNDEiKSk7CiAgICAgICAgZW0ucGVyc2lzdChjMSk7Cgog\nICAgICAgIE9yZGVyIG8xID0gbmV3IE9yZGVyKDEwLCA4NTAsIGZhbHNlLCBj\nMSk7CiAgICAgICAgVVNBQWRkcmVzcyBhZGRyMSA9IGFkZHJlc3NGYWN0b3J5\nLmNyZWF0ZVVTQUFkZHJlc3MoKTsKICAgICAgICBhZGRyMS5zZXRDaXR5KCJT\nYW4gSm9zZSIpOwogICAgICAgIGFkZHIxLnNldFN0YXRlKCJDQSIpOwogICAg\nICAgIGFkZHIxLnNldFpJUChuZXcgSW50ZWdlcigiOTUxNDEiKSk7CiAgICAg\nICAgYWRkcjEuZ2V0U3RyZWV0KCkuYWRkKCIxMjUwMCBNb250ZXJleSIpOwog\nICAgICAgIGFkZHIxLnNldE5hbWUoIGMxLmdldE5hbWUoKSk7CiAgICAgICAg\nbzEuc2V0U2hpcEFkZHJlc3MoYWRkcjEpOwogICAgICAgIGVtLnBlcnNpc3Qo\nbzEpOwoKICAgICAgICBPcmRlciBvMiA9IG5ldyBPcmRlcigyMCwgMTAwMCwg\nZmFsc2UsIGMxKTsKICAgICAgICBDQU5BZGRyZXNzIGFkZHIyID0gYWRkcmVz\nc0ZhY3RvcnkuY3JlYXRlQ0FOQWRkcmVzcygpOwogICAgICAgIGFkZHIyLnNl\ndE5hbWUoYzIuZ2V0TmFtZSgpKTsKICAgICAgICBhZGRyMi5nZXRTdHJlZXQo\nKS5hZGQoIjEyMyBXYXJkZW4gUm9hZCIpOwogICAgICAgIGFkZHIyLnNldENp\ndHkoIk1hcmtoYW0iKTsKICAgICAgICBhZGRyMi5zZXRQb3N0YWxDb2RlKCJM\nNkcgMUM3Iik7CiAgICAgICAgYWRkcjIuc2V0UHJvdmluY2UoIk9OIik7CiAg\nICAgICAgbzIuc2V0U2hpcEFkZHJlc3MoYWRkcjIpOwogICAgICAgIGVtLnBl\ncnNpc3QobzIpOwogICAgfQoKICAgIHByaXZhdGUgdm9pZCB0ZXN0VXBkYXRl\nU2hpcGFkZHJlc3MoRW50aXR5TWFuYWdlciBlbSwgaW50IHRlc3QpCiAgICAg\nICAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rp\nb24oKS5iZWdpbigpOwogICAgICAgIFN0cmluZyBxdWVyeSA9ICJzZWxlY3Qg\nbyBmcm9tIE9yZGVyIG8gd2hlcmUgby5zaGlwQWRkcmVzcy5jaXR5ICIgKwog\nICAgICAgICI9ICdTYW4gSm9zZSciOwogICAgICAgIExpc3Qgb3JkZXJzID0g\nZW0uY3JlYXRlUXVlcnkocXVlcnkpLmdldFJlc3VsdExpc3QoKTsgCiAgICAg\nICAgU3lzdGVtLm91dC5wcmludGxuKCJCZWZvcmUgVXBkYXRlOiAiKTsKICAg\nICAgICBwcmludE9yZGVycyhvcmRlcnMsIHRlc3QpOwogICAgICAgIGVtLmdl\ndFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CgogICAgICAgIC8vIHVwZGF0ZSBp\nbiBzZXBhcmF0ZSB0cmFuc2FjdGlvbiAgICAgICAgICAgICAgICAgICAgCiAg\nICAgICAgT3JkZXIgbyA9IChPcmRlcikgb3JkZXJzLmdldCgwKTsKICAgICAg\nICBFbnRpdHlUcmFuc2FjdGlvbiBldCA9IGVtLmdldFRyYW5zYWN0aW9uKCk7\nCiAgICAgICAgZXQuYmVnaW4oKTsKICAgICAgICBBZGRyZXNzIGFkZHIgPSBv\nLmdldFNoaXBBZGRyZXNzKCk7CiAgICAgICAgYWRkci5zZXRDaXR5KCJDdXBl\ncnRpbm8iKTsKICAgICAgICBpZiAoYWRkciBpbnN0YW5jZW9mIFVTQUFkZHJl\nc3MpCiAgICAgICAgICAgICgoVVNBQWRkcmVzcykgYWRkcikuc2V0WklQKDk1\nMDE0KTsKCiAgICAgICAgLy8gdXBkYXRlIHNoaXBBZGRyZXNzCiAgICAgICAg\nby5zZXRTaGlwQWRkcmVzcyhhZGRyKTsKICAgICAgICBldC5jb21taXQoKTsK\nICAgIH0KCiAgICBwcml2YXRlIHZvaWQgZGVsZXRlQWxsRGF0YShFbnRpdHlN\nYW5hZ2VyIGVtKSB7CiAgICAgICAgZW0uY3JlYXRlUXVlcnkoImRlbGV0ZSBm\ncm9tIE9yZGVyIG8iKS5leGVjdXRlVXBkYXRlKCk7CiAgICAgICAgZW0uY3Jl\nYXRlUXVlcnkoImRlbGV0ZSBmcm9tIEN1c3RvbWVyIGMiKS5leGVjdXRlVXBk\nYXRlKCk7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIHByaW50T3JkZXIoT3Jk\nZXIgbyl7CiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKCIgQ3VzdG9tZXIg\nSUQ6IitvLmdldEN1c3RvbWVyKCkuZ2V0Q2lkKCkpOwogICAgICAgIFN5c3Rl\nbS5vdXQucHJpbnRsbigiIE9yZGVyIE51bWJlcjoiK28uZ2V0T2lkKCkpOwog\nICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbigiU2hpcCB0bzogIitvLmdldFNo\naXBBZGRyZXNzKCkudG9TdHJpbmcoKSk7CiAgICAgICAgU3lzdGVtLm91dC5w\ncmludGxuKCk7CQkKICAgIH0KfQo=\n","encoding":"base64"}

