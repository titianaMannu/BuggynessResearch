{"sha":"1d88edf4a83e70f989e368c7ab0b8aed616c65b0","node_id":"MDQ6QmxvYjIwNjM2NDoxZDg4ZWRmNGE4M2U3MGY5ODllMzY4YzdhYjBiOGFlZDYxNmM2NWIw","size":5347,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/1d88edf4a83e70f989e368c7ab0b8aed616c65b0","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWw7CgppbXBvcnQg\namF2YS5zcWwuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmEuc3FsLkRhdGFiYXNl\nTWV0YURhdGE7CmltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDsK\naW1wb3J0IGphdmEuc3FsLlNRTEV4Y2VwdGlvbjsKaW1wb3J0IGphdmEuc3Fs\nLlR5cGVzOwppbXBvcnQgamF2YS51dGlsLkFycmF5czsKCmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuZXhwcy5GaWx0ZXJWYWx1ZTsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5Db2x1bW47\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuSW5kZXg7\nCgovKioKICogRGljdGlvbmFyeSBmb3IgdGhlIFNRTCBTZXJ2ZXIgZGF0YWJh\nc2VzIChTeWJhc2UgYW5kIE1TIFNRTCBTZXJ2ZXIpLgogKi8KcHVibGljIGFi\nc3RyYWN0IGNsYXNzIEFic3RyYWN0U1FMU2VydmVyRGljdGlvbmFyeQogICAg\nZXh0ZW5kcyBEQkRpY3Rpb25hcnkgewoKICAgIHB1YmxpYyBBYnN0cmFjdFNR\nTFNlcnZlckRpY3Rpb25hcnkoKSB7CiAgICAgICAgcmVzZXJ2ZWRXb3JkU2V0\nLmFkZEFsbChBcnJheXMuYXNMaXN0KG5ldyBTdHJpbmdbXXsgIkZJTEUiLCAi\nSU5ERVgiIH0pKTsKICAgICAgICBzeXN0ZW1UYWJsZVNldC5hZGQoIkRUUFJP\nUEVSVElFUyIpOwogICAgICAgIHZhbGlkYXRpb25TUUwgPSAiU0VMRUNUIEdF\nVERBVEUoKSI7CiAgICAgICAgcmFuZ2VQb3NpdGlvbiA9IFJBTkdFX1BPU1Rf\nRElTVElOQ1Q7CgogICAgICAgIHN1cHBvcnRzRGVmZXJyZWRDb25zdHJhaW50\ncyA9IGZhbHNlOwogICAgICAgIHN1cHBvcnRzU2VsZWN0RW5kSW5kZXggPSB0\ncnVlOwogICAgICAgIGFsbG93c0FsaWFzSW5CdWxrQ2xhdXNlID0gZmFsc2U7\nCgogICAgICAgIHN1cHBvcnRzQXV0b0Fzc2lnbiA9IHRydWU7CiAgICAgICAg\nYXV0b0Fzc2lnbkNsYXVzZSA9ICJJREVOVElUWSI7CiAgICAgICAgbGFzdEdl\nbmVyYXRlZEtleVF1ZXJ5ID0gIlNFTEVDVCBAQElERU5USVRZIjsKCiAgICAg\nICAgdHJpbUxlYWRpbmdGdW5jdGlvbiA9ICJMVFJJTSh7MH0pIjsKICAgICAg\nICB0cmltVHJhaWxpbmdGdW5jdGlvbiA9ICJSVFJJTSh7MH0pIjsKICAgICAg\nICB0cmltQm90aEZ1bmN0aW9uID0gIkxUUklNKFJUUklNKHswfSkpIjsKICAg\nICAgICBjb25jYXRlbmF0ZUZ1bmN0aW9uID0gIih7MH0rezF9KSI7CiAgICAg\nICAgc3VwcG9ydHNNb2RPcGVyYXRvciA9IHRydWU7CgogICAgICAgIGN1cnJl\nbnREYXRlRnVuY3Rpb24gPSAiR0VUREFURSgpIjsKICAgICAgICBjdXJyZW50\nVGltZUZ1bmN0aW9uID0gIkdFVERBVEUoKSI7CiAgICAgICAgY3VycmVudFRp\nbWVzdGFtcEZ1bmN0aW9uID0gIkdFVERBVEUoKSI7CgogICAgICAgIHVzZUdl\ndFN0cmluZ0ZvckNsb2JzID0gdHJ1ZTsKICAgICAgICB1c2VTZXRTdHJpbmdG\nb3JDbG9icyA9IHRydWU7CiAgICAgICAgdXNlR2V0Qnl0ZXNGb3JCbG9icyA9\nIHRydWU7CiAgICAgICAgdXNlU2V0Qnl0ZXNGb3JCbG9icyA9IHRydWU7CiAg\nICAgICAgYmluYXJ5VHlwZU5hbWUgPSAiQklOQVJZIjsKICAgICAgICBibG9i\nVHlwZU5hbWUgPSAiSU1BR0UiOwogICAgICAgIGxvbmdWYXJiaW5hcnlUeXBl\nTmFtZSA9ICJJTUFHRSI7CiAgICAgICAgY2xvYlR5cGVOYW1lID0gIlRFWFQi\nOwogICAgICAgIGxvbmdWYXJjaGFyVHlwZU5hbWUgPSAiVEVYVCI7CiAgICAg\nICAgZGF0ZVR5cGVOYW1lID0gIkRBVEVUSU1FIjsKICAgICAgICB0aW1lVHlw\nZU5hbWUgPSAiREFURVRJTUUiOwogICAgICAgIHRpbWVzdGFtcFR5cGVOYW1l\nID0gIkRBVEVUSU1FIjsKICAgICAgICBmbG9hdFR5cGVOYW1lID0gIkZMT0FU\nKDE2KSI7CiAgICAgICAgZG91YmxlVHlwZU5hbWUgPSAiRkxPQVQoMzIpIjsK\nICAgICAgICBpbnRlZ2VyVHlwZU5hbWUgPSAiSU5UIjsKICAgICAgICBmaXhl\nZFNpemVUeXBlTmFtZVNldC5hZGRBbGwoQXJyYXlzLmFzTGlzdChuZXcgU3Ry\naW5nW117CiAgICAgICAgICAgICJJTUFHRSIsICJURVhUIiwgIk5URVhUIiwg\nIk1PTkVZIiwgIlNNQUxMTU9ORVkiLCAiSU5UIiwKICAgICAgICAgICAgIkRP\nVUJMRSBQUkVDSVNJT04iLCAiREFURVRJTUUiLCAiU01BTExEQVRFVElNRSIs\nCiAgICAgICAgICAgICJFWFRFTkRFRCBUWVBFIiwgIlNZU05BTUUiLCAiU1FM\nX1ZBUklBTlQiLCAiSU5ERVgiLAogICAgICAgIH0pKTsKICAgIH0KCiAgICBw\ndWJsaWMgQ29sdW1uW10gZ2V0Q29sdW1ucyhEYXRhYmFzZU1ldGFEYXRhIG1l\ndGEsIFN0cmluZyBjYXRhbG9nLAogICAgICAgIFN0cmluZyBzY2hlbWFOYW1l\nLCBTdHJpbmcgdGFibGVOYW1lLCBTdHJpbmcgY29sTmFtZSwgQ29ubmVjdGlv\nbiBjb25uKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAg\nIENvbHVtbltdIGNvbHMgPSBzdXBlci5nZXRDb2x1bW5zKG1ldGEsIGNhdGFs\nb2csIHNjaGVtYU5hbWUsIHRhYmxlTmFtZSwKICAgICAgICAgICAgY29sTmFt\nZSwgY29ubik7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGNvbHMgIT0gbnVs\nbCAmJiBpIDwgY29scy5sZW5ndGg7IGkrKykKICAgICAgICAgICAgaWYgKGNv\nbHNbaV0uZ2V0VHlwZSgpID09IFR5cGVzLkxPTkdWQVJDSEFSKQogICAgICAg\nICAgICAgICAgY29sc1tpXS5zZXRUeXBlKFR5cGVzLkNMT0IpOwogICAgICAg\nIHJldHVybiBjb2xzOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgZ2V0RnVs\nbE5hbWUoSW5kZXggaWR4KSB7CiAgICAgICAgcmV0dXJuIGdldEZ1bGxOYW1l\nKGlkeC5nZXRUYWJsZSgpLCBmYWxzZSkgKyAiLiIgKyBpZHguZ2V0TmFtZSgp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldE51bGwoUHJlcGFyZWRTdGF0\nZW1lbnQgc3RtbnQsIGludCBpZHgsIGludCBjb2xUeXBlLAogICAgICAgIENv\nbHVtbiBjb2wpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAg\nICAgLy8gU1FMU2VydmVyIGhhcyBzb21lIHByb2JsZW1zIHdpdGggc2V0TnVs\nbCBvbiBsb2JzCiAgICAgICAgaWYgKGNvbFR5cGUgPT0gVHlwZXMuQ0xPQikK\nICAgICAgICAgICAgc3RtbnQuc2V0U3RyaW5nKGlkeCwgbnVsbCk7CiAgICAg\nICAgZWxzZSBpZiAoY29sVHlwZSA9PSBUeXBlcy5CTE9CKQogICAgICAgICAg\nICBzdG1udC5zZXRCeXRlcyhpZHgsIG51bGwpOwogICAgICAgIGVsc2UKICAg\nICAgICAgICAgc3VwZXIuc2V0TnVsbChzdG1udCwgaWR4LCBjb2xUeXBlLCBj\nb2wpOwogICAgfQoKICAgIHByb3RlY3RlZCB2b2lkIGFwcGVuZFNlbGVjdFJh\nbmdlKFNRTEJ1ZmZlciBidWYsIGxvbmcgc3RhcnQsIGxvbmcgZW5kLAogICAg\nICAgIGJvb2xlYW4gc3Vic2VsZWN0KSB7CiAgICAgICAgLy8gY2Fubm90IHVz\nZSBhIHZhbHVlIGhlcmUsIHNpbmNlIFNRTFNlcnZlciBkb2VzIG5vdCBzdXBw\nb3J0CiAgICAgICAgLy8gYm91bmQgcGFyYW1ldGVycyBpbiBhICJUT1AiIGNs\nYXVzZQogICAgICAgIGJ1Zi5hcHBlbmQoIiBUT1AgIikuYXBwZW5kKExvbmcu\ndG9TdHJpbmcoZW5kKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc3Vic3Ry\naW5nKFNRTEJ1ZmZlciBidWYsIEZpbHRlclZhbHVlIHN0ciwgRmlsdGVyVmFs\ndWUgc3RhcnQsCiAgICAgICAgRmlsdGVyVmFsdWUgZW5kKSB7CiAgICAgICAg\nYnVmLmFwcGVuZCgiU1VCU1RSSU5HKCIpOwogICAgICAgIHN0ci5hcHBlbmRU\nbyhidWYpOwogICAgICAgIGJ1Zi5hcHBlbmQoIiwgIik7CiAgICAgICAgc3Rh\ncnQuYXBwZW5kVG8oYnVmKTsKICAgICAgICBidWYuYXBwZW5kKCIgKyAxLCAi\nKTsKICAgICAgICBpZiAoZW5kICE9IG51bGwpIHsKICAgICAgICAgICAgYnVm\nLmFwcGVuZCgiKCIpOwogICAgICAgICAgICBlbmQuYXBwZW5kVG8oYnVmKTsK\nICAgICAgICAgICAgYnVmLmFwcGVuZCgiKSIpOwogICAgICAgIH0gZWxzZSB7\nCiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoIkxFTigiKTsKICAgICAgICAgICAg\nc3RyLmFwcGVuZFRvKGJ1Zik7CiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoIiki\nKTsKICAgICAgICB9CiAgICAgICAgYnVmLmFwcGVuZCgiIC0gKCIpOwogICAg\nICAgIHN0YXJ0LmFwcGVuZFRvKGJ1Zik7CiAgICAgICAgYnVmLmFwcGVuZCgi\nKSkiKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBpbmRleE9mKFNRTEJ1ZmZl\nciBidWYsIEZpbHRlclZhbHVlIHN0ciwgRmlsdGVyVmFsdWUgZmluZCwKICAg\nICAgICBGaWx0ZXJWYWx1ZSBzdGFydCkgewogICAgICAgIGJ1Zi5hcHBlbmQo\nIihDSEFSSU5ERVgoIik7CiAgICAgICAgZmluZC5hcHBlbmRUbyhidWYpOwog\nICAgICAgIGJ1Zi5hcHBlbmQoIiwgIik7CiAgICAgICAgaWYgKHN0YXJ0ICE9\nIG51bGwpCiAgICAgICAgICAgIHN1YnN0cmluZyhidWYsIHN0ciwgc3RhcnQs\nIG51bGwpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgc3RyLmFwcGVuZFRv\nKGJ1Zik7CiAgICAgICAgYnVmLmFwcGVuZCgiKSAtIDEiKTsKICAgICAgICBp\nZiAoc3RhcnQgIT0gbnVsbCkgewogICAgICAgICAgICBidWYuYXBwZW5kKCIg\nKyAiKTsKICAgICAgICAgICAgc3RhcnQuYXBwZW5kVG8oYnVmKTsKICAgICAg\nICB9CiAgICAgICAgYnVmLmFwcGVuZCgiKSIpOwogICAgfQp9Cg==\n","encoding":"base64"}

