{"sha":"732f4d06806686050124a0122b9322ec8aa3e052","node_id":"MDQ6QmxvYjIwNjM2NDo3MzJmNGQwNjgwNjY4NjA1MDEyNGEwMTIyYjkzMjJlYzhhYTNlMDUy","size":30807,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/732f4d06806686050124a0122b9322ec8aa3e052","content":"LyoNCiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRh\ndGlvbiAoQVNGKSB1bmRlciBvbmUNCiAqIG9yIG1vcmUgY29udHJpYnV0b3Ig\nbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZQ0KICog\nZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5m\nb3JtYXRpb24NCiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAg\nVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGUNCiAqIHRvIHlvdSB1bmRlciB0\naGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUNCiAqICJMaWNl\nbnNlIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNv\nbXBsaWFuY2UNCiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFp\nbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAqDQogKiBodHRwOi8vd3d3\nLmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAqDQogKiBVbmxl\nc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGlu\nIHdyaXRpbmcsDQogKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUg\nTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbg0KICogIkFTIElTIiBCQVNJ\nUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQog\nKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBM\naWNlbnNlIGZvciB0aGUNCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmlu\nZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMNCiAqIHVuZGVyIHRoZSBM\naWNlbnNlLiAgICANCiAqLw0KcGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5zcWw7DQoNCmltcG9ydCBqYXZhLmxhbmcucmVmbGVjdC5NZXRob2Q7\nDQppbXBvcnQgamF2YS5zcWwuQ29ubmVjdGlvbjsNCmltcG9ydCBqYXZhLnNx\nbC5EYXRhYmFzZU1ldGFEYXRhOw0KaW1wb3J0IGphdmEuc3FsLlNRTEV4Y2Vw\ndGlvbjsNCmltcG9ydCBqYXZhLnNxbC5UeXBlczsNCmltcG9ydCBqYXZhLnV0\naWwuQXJyYXlzOw0KaW1wb3J0IGphdmEudXRpbC5TdHJpbmdUb2tlbml6ZXI7\nDQoNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuSkRC\nQ0ZldGNoQ29uZmlndXJhdGlvbjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5rZXJuZWwuZXhwcy5GaWx0ZXJWYWx1ZTsNCmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuZXhwcy5MaXQ7DQppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMua2VybmVsLmV4cHMuUGFyYW07DQpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMua2VybmVsLmV4cHMuVmFs\nOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5Db2x1\nbW47DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLklu\nZGV4Ow0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5T\nY2hlbWE7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1h\nLlNlcXVlbmNlOw0KaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNj\naGVtYS5UYWJsZTsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVs\nLkZpbHRlcnM7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGls\nLkxvY2FsaXplcjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5K\nYXZhVHlwZXM7DQppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuT3Bl\nbkpQQUV4Y2VwdGlvbjsNCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRp\nbC5VbnN1cHBvcnRlZEV4Y2VwdGlvbjsNCg0KaW1wb3J0IHNlcnAudXRpbC5T\ndHJpbmdzOw0KDQovKioNCiAqIERpY3Rpb25hcnkgZm9yIElCTSBEQjIgZGF0\nYWJhc2UuDQogKi8NCnB1YmxpYyBjbGFzcyBEQjJEaWN0aW9uYXJ5DQogICAg\nZXh0ZW5kcyBBYnN0cmFjdERCMkRpY3Rpb25hcnkgew0KICAgIHByaXZhdGUg\nc3RhdGljIGZpbmFsIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVyLmZvclBh\nY2thZ2UNCiAgICAgICAgKERCMkRpY3Rpb25hcnkuY2xhc3MpOw0KDQogICAg\ncHVibGljIFN0cmluZyBvcHRpbWl6ZUNsYXVzZSA9ICJvcHRpbWl6ZSBmb3Ii\nOw0KICAgIHB1YmxpYyBTdHJpbmcgcm93Q2xhdXNlID0gInJvdyI7DQogICAg\ncHJvdGVjdGVkIGludCBkYjJTZXJ2ZXJUeXBlID0gMDsNCiAgICBwdWJsaWMg\nc3RhdGljIGZpbmFsIGludCBkYjJJU2VyaWVzVjVSM09yRWFybGllciA9IDE7\nDQogICAgcHVibGljIHN0YXRpYyBmaW5hbCBpbnQgZGIyVURCVjgxT3JFYXJs\naWVyID0gMjsNCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBkYjJaT1NW\nOHhPckxhdGVyID0gMzsNCiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBk\nYjJVREJWODJPckxhdGVyID0gNDsNCiAgICBwdWJsaWMgc3RhdGljIGZpbmFs\nIGludCBkYjJJU2VyaWVzVjVSNE9yTGF0ZXIgPSA1Ow0KCXByaXZhdGUgc3Rh\ndGljIGZpbmFsIFN0cmluZyBmb3JVcGRhdGUgPSAiRk9SIFVQREFURSI7DQog\nICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIHdpdGhSU0NsYXVzZSA9\nICJXSVRIIFJTIjsNCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBTdHJpbmcg\nd2l0aFJSQ2xhdXNlID0gIldJVEggUlIiOw0KICAgIHByaXZhdGUgc3RhdGlj\nIGZpbmFsIFN0cmluZyB1c2VLZWVwVXBkYXRlTG9ja0NsYXVzZQ0KICAgICAg\nICA9ICJVU0UgQU5EIEtFRVAgVVBEQVRFIExPQ0tTIjsNCiAgICBwcml2YXRl\nIHN0YXRpYyBmaW5hbCBTdHJpbmcgdXNlS2VlcEV4Y2x1c2l2ZUxvY2tDbGF1\nc2UNCiAgICAgICAgPSAiVVNFIEFORCBLRUVQIEVYQ0xVU0lWRSBMT0NLUyI7\nDQogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIGZvclJlYWRPbmx5\nQ2xhdXNlID0gIkZPUiBSRUFEIE9OTFkiOw0KICAgIHByb3RlY3RlZCBTdHJp\nbmcgZGF0YWJhc2VQcm9kdWN0TmFtZSA9IG51bGw7DQogICAgcHJvdGVjdGVk\nIFN0cmluZyBkYXRhYmFzZVByb2R1Y3RWZXJzaW9uID0gbnVsbDsNCiAgICBw\ncm90ZWN0ZWQgaW50IG1haiA9IDA7DQogICAgcHJvdGVjdGVkIGludCBtaW4g\nPSAwOw0KDQogICAgcHVibGljIERCMkRpY3Rpb25hcnkoKSB7DQogICAgICAg\nIHBsYXRmb3JtID0gIkRCMiI7DQogICAgICAgIHZhbGlkYXRpb25TUUwgPSAi\nU0VMRUNUIERJU1RJTkNUKENVUlJFTlQgVElNRVNUQU1QKSBGUk9NICINCiAg\nICAgICAgICAgICsgIlNZU0lCTS5TWVNUQUJMRVMiOw0KICAgICAgICBzdXBw\nb3J0c1NlbGVjdEVuZEluZGV4ID0gdHJ1ZTsNCg0KICAgICAgICBuZXh0U2Vx\ndWVuY2VRdWVyeSA9ICJWQUxVRVMgTkVYVFZBTCBGT1IgezB9IjsNCg0KICAg\nICAgICBzZXF1ZW5jZVNRTCA9ICJTRUxFQ1QgU0VRU0NIRU1BIEFTIFNFUVVF\nTkNFX1NDSEVNQSwgIg0KICAgICAgICAgICAgKyAiU0VRTkFNRSBBUyBTRVFV\nRU5DRV9OQU1FIEZST00gU1lTQ0FULlNFUVVFTkNFUyI7DQogICAgICAgIHNl\ncXVlbmNlU2NoZW1hU1FMID0gIlNFUVNDSEVNQSA9ID8iOw0KICAgICAgICBz\nZXF1ZW5jZU5hbWVTUUwgPSAiU0VRTkFNRSA9ID8iOw0KICAgICAgICBjaGFy\nYWN0ZXJDb2x1bW5TaXplID0gMjU0Ow0KDQogICAgICAgIGJpbmFyeVR5cGVO\nYW1lID0gIkJMT0IoMU0pIjsNCiAgICAgICAgbG9uZ1ZhcmJpbmFyeVR5cGVO\nYW1lID0gIkJMT0IoMU0pIjsNCiAgICAgICAgdmFyYmluYXJ5VHlwZU5hbWUg\nPSAiQkxPQigxTSkiOw0KICAgICAgICBjbG9iVHlwZU5hbWUgPSAiQ0xPQigx\nTSkiOw0KICAgICAgICBsb25nVmFyY2hhclR5cGVOYW1lID0gIkxPTkcgVkFS\nQ0hBUiI7DQogICAgICAgIGRhdGVQcmVjaXNpb24gPSBNSUNSTzsNCiAgICAg\nICAgc3RvcmVDaGFyc0FzTnVtYmVycyA9IGZhbHNlOw0KDQogICAgICAgIGZp\neGVkU2l6ZVR5cGVOYW1lU2V0LmFkZEFsbChBcnJheXMuYXNMaXN0KG5ldyBT\ndHJpbmdbXXsNCiAgICAgICAgICAgICJMT05HIFZBUkNIQVIgRk9SIEJJVCBE\nQVRBIiwgIkxPTkcgVkFSQ0hBUiIsICJMT05HIFZBUkdSQVBISUMiLA0KICAg\nICAgICB9KSk7DQogICAgICAgIHN5c3RlbVNjaGVtYXMgPSBuZXcgU3RyaW5n\nKA0KICAgICAgICAgICAgICAgICJTWVNDQVQsU1lTSUJNLFNZU1NUQVQsU1lT\nSUJNQURNLFNZU1RPT0xTIik7DQogICAgICAgIG1heENvbnN0cmFpbnROYW1l\nTGVuZ3RoID0gMTg7DQogICAgICAgIG1heEluZGV4TmFtZUxlbmd0aCA9IDE4\nOw0KICAgICAgICBtYXhDb2x1bW5OYW1lTGVuZ3RoID0gMzA7DQogICAgICAg\nIHN1cHBvcnRzRGVmZXJyZWRDb25zdHJhaW50cyA9IGZhbHNlOw0KICAgICAg\nICBzdXBwb3J0c0RlZmF1bHREZWxldGVBY3Rpb24gPSBmYWxzZTsNCiAgICAg\nICAgc3VwcG9ydHNBbHRlclRhYmxlV2l0aERyb3BDb2x1bW4gPSBmYWxzZTsN\nCg0KICAgICAgICBzdXBwb3J0c051bGxUYWJsZUZvckdldENvbHVtbnMgPSBm\nYWxzZTsNCiAgICAgICAgcmVxdWlyZXNDYXN0Rm9yTWF0aEZ1bmN0aW9ucyA9\nIHRydWU7DQogICAgICAgIHJlcXVpcmVzQ2FzdEZvckNvbXBhcmlzb25zID0g\ndHJ1ZTsNCg0KICAgICAgICByZXNlcnZlZFdvcmRTZXQuYWRkQWxsKEFycmF5\ncy5hc0xpc3QobmV3IFN0cmluZ1tdew0KICAgICAgICAgICAgIkFGVEVSIiwg\nIkFMSUFTIiwgIkFMTE9XIiwgIkFQUExJQ0FUSU9OIiwgIkFTU09DSUFURSIs\nICJBU1VUSU1FIiwNCiAgICAgICAgICAgICJBVURJVCIsICJBVVgiLCAiQVVY\nSUxJQVJZIiwgIkJFRk9SRSIsICJCSU5BUlkiLCAiQlVGRkVSUE9PTCIsDQog\nICAgICAgICAgICAiQ0FDSEUiLCAiQ0FMTCIsICJDQUxMRUQiLCAiQ0FQVFVS\nRSIsICJDQVJESU5BTElUWSIsICJDQ1NJRCIsDQogICAgICAgICAgICAiQ0xV\nU1RFUiIsICJDT0xMRUNUSU9OIiwgIkNPTExJRCIsICJDT01NRU5UIiwgIkNP\nTkNBVCIsDQogICAgICAgICAgICAiQ09ORElUSU9OIiwgIkNPTlRBSU5TIiwg\nIkNPVU5UX0JJRyIsICJDVVJSRU5UX0xDX0NUWVBFIiwNCiAgICAgICAgICAg\nICJDVVJSRU5UX1BBVEgiLCAiQ1VSUkVOVF9TRVJWRVIiLCAiQ1VSUkVOVF9U\nSU1FWk9ORSIsICJDWUNMRSIsDQogICAgICAgICAgICAiREFUQSIsICJEQVRB\nQkFTRSIsICJEQVlTIiwgIkRCMkdFTkVSQUwiLCAiREIyR0VOUkwiLCAiREIy\nU1FMIiwNCiAgICAgICAgICAgICJEQklORk8iLCAiREVGQVVMVFMiLCAiREVG\nSU5JVElPTiIsICJERVRFUk1JTklTVElDIiwgIkRJU0FMTE9XIiwNCiAgICAg\nICAgICAgICJETyIsICJEU05IQVRUUiIsICJEU1NJWkUiLCAiRFlOQU1JQyIs\nICJFQUNIIiwgIkVESVRQUk9DIiwgIkVMU0VJRiIsDQogICAgICAgICAgICAi\nRU5DT0RJTkciLCAiRU5ELUVYRUMxIiwgIkVSQVNFIiwgIkVYQ0xVRElORyIs\nICJFWElUIiwgIkZFTkNFRCIsDQogICAgICAgICAgICAiRklFTERQUk9DIiwg\nIkZJTEUiLCAiRklOQUwiLCAiRlJFRSIsICJGVU5DVElPTiIsICJHRU5FUkFM\nIiwNCiAgICAgICAgICAgICJHRU5FUkFURUQiLCAiR1JBUEhJQyIsICJIQU5E\nTEVSIiwgIkhPTEQiLCAiSE9VUlMiLCAiSUYiLA0KICAgICAgICAgICAgIklO\nQ0xVRElORyIsICJJTkNSRU1FTlQiLCAiSU5ERVgiLCAiSU5IRVJJVCIsICJJ\nTk9VVCIsICJJTlRFR1JJVFkiLA0KICAgICAgICAgICAgIklTT0JJRCIsICJJ\nVEVSQVRFIiwgIkpBUiIsICJKQVZBIiwgIkxBQkVMIiwgIkxDX0NUWVBFIiwg\nIkxFQVZFIiwNCiAgICAgICAgICAgICJMSU5LVFlQRSIsICJMT0NBTEUiLCAi\nTE9DQVRPUiIsICJMT0NBVE9SUyIsICJMT0NLIiwgIkxPQ0tNQVgiLA0KICAg\nICAgICAgICAgIkxPQ0tTSVpFIiwgIkxPTkciLCAiTE9PUCIsICJNQVhWQUxV\nRSIsICJNSUNST1NFQ09ORCIsDQogICAgICAgICAgICAiTUlDUk9TRUNPTkRT\nIiwgIk1JTlVURVMiLCAiTUlOVkFMVUUiLCAiTU9ERSIsICJNT0RJRklFUyIs\nICJNT05USFMiLA0KICAgICAgICAgICAgIk5FVyIsICJORVdfVEFCTEUiLCAi\nTk9DQUNIRSIsICJOT0NZQ0xFIiwgIk5PREVOQU1FIiwgIk5PREVOVU1CRVIi\nLA0KICAgICAgICAgICAgIk5PTUFYVkFMVUUiLCAiTk9NSU5WQUxVRSIsICJO\nT09SREVSIiwgIk5VTExTIiwgIk5VTVBBUlRTIiwgIk9CSUQiLA0KICAgICAg\nICAgICAgIk9MRCIsICJPTERfVEFCTEUiLCAiT1BUSU1JWkFUSU9OIiwgIk9Q\nVElNSVpFIiwgIk9VVCIsICJPVkVSUklESU5HIiwNCiAgICAgICAgICAgICJQ\nQUNLQUdFIiwgIlBBUkFNRVRFUiIsICJQQVJUIiwgIlBBUlRJVElPTiIsICJQ\nQVRIIiwgIlBJRUNFU0laRSIsDQogICAgICAgICAgICAiUExBTiIsICJQUklR\nVFkiLCAiUFJPR1JBTSIsICJQU0lEIiwgIlFVRVJZTk8iLCAiUkVBRFMiLCAi\nUkVDT1ZFUlkiLA0KICAgICAgICAgICAgIlJFRkVSRU5DSU5HIiwgIlJFTEVB\nU0UiLCAiUkVOQU1FIiwgIlJFUEVBVCIsICJSRVNFVCIsICJSRVNJR05BTCIs\nDQogICAgICAgICAgICAiUkVTVEFSVCIsICJSRVNVTFQiLCAiUkVTVUxUX1NF\nVF9MT0NBVE9SIiwgIlJFVFVSTiIsICJSRVRVUk5TIiwNCiAgICAgICAgICAg\nICJST1VUSU5FIiwgIlJPVyIsICJSUk4iLCAiUlVOIiwgIlNBVkVQT0lOVCIs\nICJTQ1JBVENIUEFEIiwNCiAgICAgICAgICAgICJTRUNPTkRTIiwgIlNFQ1FU\nWSIsICJTRUNVUklUWSIsICJTRU5TSVRJVkUiLCAiU0lHTkFMIiwgIlNJTVBM\nRSIsDQogICAgICAgICAgICAiU09VUkNFIiwgIlNQRUNJRklDIiwgIlNRTElE\nIiwgIlNUQU5EQVJEIiwgIlNUQVJUIiwgIlNUQVRJQyIsDQogICAgICAgICAg\nICAiU1RBWSIsICJTVE9HUk9VUCIsICJTVE9SRVMiLCAiU1RZTEUiLCAiU1VC\nUEFHRVMiLCAiU1lOT05ZTSIsDQogICAgICAgICAgICAiU1lTRlVOIiwgIlNZ\nU0lCTSIsICJTWVNQUk9DIiwgIlNZU1RFTSIsICJUQUJMRVNQQUNFIiwgIlRS\nSUdHRVIiLA0KICAgICAgICAgICAgIlRZUEUiLCAiVU5ETyIsICJVTlRJTCIs\nICJWQUxJRFBST0MiLCAiVkFSSUFCTEUiLCAiVkFSSUFOVCIsICJWQ0FUIiwN\nCiAgICAgICAgICAgICJWT0xVTUVTIiwgIldISUxFIiwgIldMTSIsICJZRUFS\nUyIsDQogICAgICAgIH0pKTsNCiAgICAgICAgDQogICAgICAgIHNlbGVjdFdv\ncmRTZXQuYWRkKCJXSVRIIik7DQogICAgfQ0KDQogICAgcHVibGljIGJvb2xl\nYW4gc3VwcG9ydHNSYW5kb21BY2Nlc3NSZXN1bHRTZXQoU2VsZWN0IHNlbCwN\nCiAgICAgICAgYm9vbGVhbiBmb3JVcGRhdGUpIHsNCiAgICAgICAgcmV0dXJu\nICFmb3JVcGRhdGUNCiAgICAgICAgICAgICYmIHN1cGVyLnN1cHBvcnRzUmFu\nZG9tQWNjZXNzUmVzdWx0U2V0KHNlbCwgZm9yVXBkYXRlKTsNCiAgICB9DQoN\nCiAgICBwcm90ZWN0ZWQgdm9pZCBhcHBlbmRTZWxlY3RSYW5nZShTUUxCdWZm\nZXIgYnVmLCBsb25nIHN0YXJ0LCBsb25nIGVuZCwNCiAgICAgICAgYm9vbGVh\nbiBzdWJzZWxlY3QpIHsNCiAgICAgICAgLy8gYXBwZW5kcyB0aGUgbGl0ZXJh\nbCByYW5nZSBzdHJpbmcsIHNpbmNlIERCMiBpcyB1bmFibGUgdG8gaGFuZGxl\nDQogICAgICAgIC8vIGEgYm91bmQgcGFyYW1ldGVyIGZvciBpdA0KICAgICAg\nICAvLyBkbyBub3QgZ2VuZXJhdGUgRkVUQ0ggRklSU1QgY2xhdXNlIGZvciBz\ndWJzZWxlY3QNCiAgICAgICAgaWYgKCFzdWJzZWxlY3QpDQogICAgICAgICAg\nICBidWYuYXBwZW5kKCIgRkVUQ0ggRklSU1QgIikuYXBwZW5kKExvbmcudG9T\ndHJpbmcoZW5kKSkuDQogICAgICAgICAgICAgICAgYXBwZW5kKCIgUk9XUyBP\nTkxZIik7DQogICAgfQ0KDQogICAgcHVibGljIFN0cmluZ1tdIGdldENyZWF0\nZVNlcXVlbmNlU1FMKFNlcXVlbmNlIHNlcSkgew0KICAgICAgICBTdHJpbmdb\nXSBzcWwgPSBzdXBlci5nZXRDcmVhdGVTZXF1ZW5jZVNRTChzZXEpOw0KICAg\nICAgICBpZiAoc2VxLmdldEFsbG9jYXRlKCkgPiAxKQ0KICAgICAgICAgICAg\nc3FsWzBdICs9ICIgQ0FDSEUgIiArIHNlcS5nZXRBbGxvY2F0ZSgpOw0KICAg\nICAgICByZXR1cm4gc3FsOw0KICAgIH0NCg0KICAgIHByb3RlY3RlZCBTdHJp\nbmcgZ2V0U2VxdWVuY2VzU1FMKFN0cmluZyBzY2hlbWFOYW1lLCBTdHJpbmcg\nc2VxdWVuY2VOYW1lKSB7DQogICAgICAgIFN0cmluZ0J1ZmZlciBidWYgPSBu\nZXcgU3RyaW5nQnVmZmVyKCk7DQogICAgICAgIGJ1Zi5hcHBlbmQoc2VxdWVu\nY2VTUUwpOw0KICAgICAgICBpZiAoc2NoZW1hTmFtZSAhPSBudWxsIHx8IHNl\ncXVlbmNlTmFtZSAhPSBudWxsKQ0KICAgICAgICAgICAgYnVmLmFwcGVuZCgi\nIFdIRVJFICIpOw0KICAgICAgICBpZiAoc2NoZW1hTmFtZSAhPSBudWxsKSB7\nDQogICAgICAgICAgICBidWYuYXBwZW5kKHNlcXVlbmNlU2NoZW1hU1FMKTsN\nCiAgICAgICAgICAgIGlmIChzZXF1ZW5jZU5hbWUgIT0gbnVsbCkNCiAgICAg\nICAgICAgICAgICBidWYuYXBwZW5kKCIgQU5EICIpOw0KICAgICAgICB9DQog\nICAgICAgIGlmIChzZXF1ZW5jZU5hbWUgIT0gbnVsbCkNCiAgICAgICAgICAg\nIGJ1Zi5hcHBlbmQoc2VxdWVuY2VOYW1lU1FMKTsNCiAgICAgICAgcmV0dXJu\nIGJ1Zi50b1N0cmluZygpOw0KICAgIH0NCg0KICAgIHB1YmxpYyBDb25uZWN0\naW9uIGRlY29yYXRlKENvbm5lY3Rpb24gY29ubikNCiAgICAgICAgdGhyb3dz\nIFNRTEV4Y2VwdGlvbiB7DQogICAgICAgIC8vIHNvbWUgdmVyc2lvbnMgb2Yg\ndGhlIERCMiBkcml2ZXIgc2VlbSB0byBkZWZhdWx0IHRvDQogICAgICAgIC8v\nIFJFQURfVU5DT01NSVRURUQsIHdoaWNoIHdpbGwgcHJldmVudCBsb2NraW5n\nIGZyb20gd29ya2luZw0KICAgICAgICAvLyAobXVsdGlwbGUgU0VMRUNUIC4u\nLiBGT1IgVVBEQVRFIHN0YXRlbWVudHMgYXJlIGFsbG93ZWQgb24NCiAgICAg\nICAgLy8gdGhlIHNhbWUgaW5zdGFuY2UpOyBpZiB3ZSBoYXZlIG5vdCBvdmVy\ncmlkZGVuIHRoZQ0KICAgICAgICAvLyB0cmFuc2FjdGlvbiBpc29sYXRpb24g\naW4gdGhlIGNvbmZpZ3VyYXRpb24sIGRlZmF1bHQgdG8NCiAgICAgICAgLy8g\nVFJBTlNBQ1RJT05fUkVBRF9DT01NSVRURUQNCiAgICAgICAgY29ubiA9IHN1\ncGVyLmRlY29yYXRlKGNvbm4pOw0KDQogICAgICAgIGlmIChjb25mLmdldFRy\nYW5zYWN0aW9uSXNvbGF0aW9uQ29uc3RhbnQoKSA9PSAtMQ0KICAgICAgICAg\nICAgJiYgY29ubi5nZXRUcmFuc2FjdGlvbklzb2xhdGlvbigpIDwgY29ubi5U\nUkFOU0FDVElPTl9SRUFEX0NPTU1JVFRFRCkNCiAgICAgICAgICAgIGNvbm4u\nc2V0VHJhbnNhY3Rpb25Jc29sYXRpb24oY29ubi5UUkFOU0FDVElPTl9SRUFE\nX0NPTU1JVFRFRCk7DQoNCiAgICAgICAgcmV0dXJuIGNvbm47DQogICAgfQ0K\nDQogICAgcHJpdmF0ZSBib29sZWFuIGlzSkRCQzMoRGF0YWJhc2VNZXRhRGF0\nYSBtZXRhKSB7DQogICAgICAgIHRyeSB7DQogICAgICAgICAgICAvLyBKREJD\nMy1vbmx5IG1ldGhvZCwgc28gaXQgbWlnaHQgdGhyb3cgYSBBYnN0cmFjdE1l\ndGhvZEVycm9yDQogICAgICAgICAgICByZXR1cm4gbWV0YS5nZXRKREJDTWFq\nb3JWZXJzaW9uKCkgPj0gMzsNCiAgICAgICAgfSBjYXRjaCAoVGhyb3dhYmxl\nIHQpIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0K\nICAgIH0NCg0KICAgIHB1YmxpYyB2b2lkIGNvbm5lY3RlZENvbmZpZ3VyYXRp\nb24oQ29ubmVjdGlvbiBjb25uKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsNCiAg\nICAJc3VwZXIuY29ubmVjdGVkQ29uZmlndXJhdGlvbihjb25uKTsNCg0KICAg\nIAlEYXRhYmFzZU1ldGFEYXRhIG1ldGFEYXRhID0gY29ubi5nZXRNZXRhRGF0\nYSgpOw0KICAgICAgICBkYXRhYmFzZVByb2R1Y3ROYW1lID0gbWV0YURhdGEu\nZ2V0RGF0YWJhc2VQcm9kdWN0TmFtZSgpOw0KICAgICAgICBkYXRhYmFzZVBy\nb2R1Y3RWZXJzaW9uID0gbWV0YURhdGEuZ2V0RGF0YWJhc2VQcm9kdWN0VmVy\nc2lvbigpOw0KICAgICAgICANCiAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSB0\neXBlIG9mIERCMiBkYXRhYmFzZQ0KICAgICAgICAvLyBGaXJzdCBjaGVjayBm\nb3IgQVMvNDAwDQogICAgICAgIGdldFByb2R1Y3RWZXJzaW9uTWFqb3JNaW5v\nckZvcklTZXJpZXMoKTsNCg0KICAgICAgICBpZiAobWFqID4gMCkgew0KICAg\nICAgICAgICAgaWYgKGlzREIySVNlcmllc1Y1UjNPckVhcmxpZXIoKSkNCiAg\nICAgICAgICAgICAgICBkYjJTZXJ2ZXJUeXBlID0gZGIySVNlcmllc1Y1UjNP\nckVhcmxpZXI7DQogICAgICAgICAgICBlbHNlIGlmIChpc0RCMklTZXJpZXNW\nNVI0T3JMYXRlcigpKQ0KICAgICAgICAgICAgICAgIGRiMlNlcnZlclR5cGUg\nPSBkYjJJU2VyaWVzVjVSNE9yTGF0ZXI7DQogICAgICAgIH0NCiAgICAgICAg\nDQogICAgCWlmIChkYjJTZXJ2ZXJUeXBlID09IDApIHsNCiAgICAJICAgIGlm\nIChpc0pEQkMzKG1ldGFEYXRhKSkgew0KICAgIAkgICAgICAgIG1haiA9IG1l\ndGFEYXRhLmdldERhdGFiYXNlTWFqb3JWZXJzaW9uKCk7DQogICAgCSAgICAg\nICAgbWluID0gbWV0YURhdGEuZ2V0RGF0YWJhc2VNaW5vclZlcnNpb24oKTsN\nCiAgICAJICAgIH0NCiAgICAJICAgIGVsc2UNCiAgICAJICAgICAgICBnZXRQ\ncm9kdWN0VmVyc2lvbk1ham9yTWlub3IoKTsNCg0KICAgIAkgICAgLy8gRGV0\nZXJtaW5lIHRoZSB0eXBlIG9mIERCMiBkYXRhYmFzZSBmb3IgWk9TICYgVURC\nDQogICAgCSAgICBpZiAoaXNEQjJVREJWODFPckVhcmxpZXIoKSkNCiAgICAJ\nICAgICAgICBkYjJTZXJ2ZXJUeXBlID0gZGIyVURCVjgxT3JFYXJsaWVyOw0K\nICAgIAkgICAgZWxzZSBpZiAoaXNEQjJaT1NWOHhPckxhdGVyKCkpDQogICAg\nCSAgICAgICAgZGIyU2VydmVyVHlwZSA9IGRiMlpPU1Y4eE9yTGF0ZXI7DQog\nICAgCSAgICBlbHNlIGlmIChpc0RCMlVEQlY4Mk9yTGF0ZXIoKSkNCiAgICAJ\nICAgICAgICBkYjJTZXJ2ZXJUeXBlID0gZGIyVURCVjgyT3JMYXRlcjsNCiAg\nICAgICAgfQ0KDQogICAgICAgIC8vIHZlcmlmeSB0aGF0IGRhdGFiYWUgcHJv\nZHVjdCBpcyBzdXBwb3J0ZWQNCiAgICAgICAgaWYgKGRiMlNlcnZlclR5cGUg\nPT0gMCB8fCBtYWogPT0gMCkNCiAgICAgICAgICAgIHRocm93IG5ldyBVbnN1\ncHBvcnRlZEV4Y2VwdGlvbihfbG9jLmdldCgiZGItbm90LXN1cHBvcnRlZCIs\nDQogICAgICAgICAgICAgICAgbmV3IE9iamVjdFtdIHtkYXRhYmFzZVByb2R1\nY3ROYW1lLCBkYXRhYmFzZVByb2R1Y3RWZXJzaW9uIH0pKTsgICAgICAgICAg\nICAgICAgICAgIA0KDQogICAgCWlmIChtYWogPj0gOSB8fCAobWFqID09IDgg\nJiYgbWluID49IDIpKSB7DQogICAgCSAgICBzdXBwb3J0c0xvY2tpbmdXaXRo\nTXVsdGlwbGVUYWJsZXMgPSB0cnVlOw0KICAgIAkgICAgc3VwcG9ydHNMb2Nr\naW5nV2l0aElubmVySm9pbiA9IHRydWU7DQogICAgCSAgICBzdXBwb3J0c0xv\nY2tpbmdXaXRoT3V0ZXJKb2luID0gdHJ1ZTsNCiAgICAJICAgIGZvclVwZGF0\nZUNsYXVzZSA9ICJXSVRIIFJSIFVTRSBBTkQgS0VFUCBVUERBVEUgTE9DS1Mi\nOw0KICAgIAkgICAgaWYgKG1haiA+PTkpDQogICAgCSAgICAgICAgc3VwcG9y\ndHNYTUxDb2x1bW4gPSB0cnVlOw0KICAgIAl9DQoNCiAgICAgICAgLy8gcGxh\ndGZvcm0gc3BlY2lmaWMgc2V0dGluZ3MNCiAgICAgICAgc3dpdGNoIChkYjJT\nZXJ2ZXJUeXBlKSB7DQogICAgICAgIGNhc2UgIGRiMlpPU1Y4eE9yTGF0ZXI6\nDQogICAgICAgICAgICAvLyBEQjIgWi9PUyANCiAgICAgICAgICAgIGNoYXJh\nY3RlckNvbHVtblNpemUgPSAyNTU7DQogICAgICAgICAgICBsYXN0R2VuZXJh\ndGVkS2V5UXVlcnkgPSAiU0VMRUNUIElERU5USVRZX1ZBTF9MT0NBTCgpIEZS\nT00gIg0KICAgICAgICAgICAgICAgICsgIlNZU0lCTS5TWVNEVU1NWTEiOw0K\nICAgICAgICAgICAgbmV4dFNlcXVlbmNlUXVlcnkgPSAiU0VMRUNUIE5FWFRW\nQUwgRk9SIHswfSBGUk9NICINCiAgICAgICAgICAgICAgICArICJTWVNJQk0u\nU1lTRFVNTVkxIjsNCiAgICAgICAgICAgIHNlcXVlbmNlU1FMID0gIlNFTEVD\nVCBTQ0hFTUEgQVMgU0VRVUVOQ0VfU0NIRU1BLCAiDQogICAgICAgICAgICAg\nICAgKyAiTkFNRSBBUyBTRVFVRU5DRV9OQU1FIEZST00gU1lTSUJNLlNZU1NF\nUVVFTkNFUyI7DQogICAgICAgICAgICBzZXF1ZW5jZVNjaGVtYVNRTCA9ICJT\nQ0hFTUEgPSA/IjsNCiAgICAgICAgICAgIHNlcXVlbmNlTmFtZVNRTCA9ICJO\nQU1FID0gPyI7DQogICAgICAgICAgICBpZiAobWFqID09IDgpDQogICAgICAg\nICAgICAgICAgLy8gREIyIFovT1MgVmVyc2lvbiA4OiBubyBiaWdpbnQgc3Vw\ncG9ydCwgaGVuY2UgbWFwIEphdmENCiAgICAgICAgICAgICAgICAvLyBsb25n\nIHRvIGRlY2ltYWwNCiAgICAgICAgICAgICAgICBiaWdpbnRUeXBlTmFtZSA9\nICJERUNJTUFMKDMxLDApIjsNCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAg\nICBjYXNlIGRiMklTZXJpZXNWNVIzT3JFYXJsaWVyOg0KICAgICAgICBjYXNl\nIGRiMklTZXJpZXNWNVI0T3JMYXRlcjoNCiAgICAgICAgICAgIGxhc3RHZW5l\ncmF0ZWRLZXlRdWVyeSA9ICJTRUxFQ1QgSURFTlRJVFlfVkFMX0xPQ0FMKCkg\nRlJPTSAiDQogICAgICAgICAgICAgICAgKyAiU1lTSUJNLlNZU0RVTU1ZMSI7\nDQogICAgICAgICAgICBuZXh0U2VxdWVuY2VRdWVyeSA9ICJTRUxFQ1QgTkVY\nVFZBTCBGT1IgezB9IEZST00gIg0KICAgICAgICAgICAgICAgICsgIlNZU0lC\nTS5TWVNEVU1NWTEiOw0KICAgICAgICAgICAgdmFsaWRhdGlvblNRTCA9ICJT\nRUxFQ1QgRElTVElOQ1QoQ1VSUkVOVCBUSU1FU1RBTVApIEZST00gIg0KICAg\nICAgICAgICAgICAgICsgIlFTWVMyLlNZU1RBQkxFUyI7DQogICAgICAgICAg\nICBzZXF1ZW5jZVNRTCA9ICJTRUxFQ1QgU0VRVUVOQ0VfU0NIRU1BLCAiDQog\nICAgICAgICAgICAgICAgKyAiU0VRVUVOQ0VfTkFNRSBGUk9NIFFTWVMyLlNZ\nU1NFUVVFTkNFUyI7DQogICAgICAgICAgICBzZXF1ZW5jZVNjaGVtYVNRTCA9\nICJTRVFVRU5DRV9TQ0hFTUEgPSA/IjsNCiAgICAgICAgICAgIHNlcXVlbmNl\nTmFtZVNRTCA9ICJTRVFVRU5DRV9OQU1FID0gPyI7DQogICAgICAgICAgICBi\ncmVhazsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEdl\ndCB0aGUgdXBkYXRlIGNsYXVzZSBmb3IgdGhlIHF1ZXJ5IGJhc2VkIG9uIHRo\nZQ0KICAgICAqIHVwZGF0ZUNsYXVzZSBhbmQgaXNvbGF0aW9uTGV2ZWwgaGlu\ndHMNCiAgICAgKi8NCiAgICBwcm90ZWN0ZWQgU3RyaW5nIGdldEZvclVwZGF0\nZUNsYXVzZShKREJDRmV0Y2hDb25maWd1cmF0aW9uIGZldGNoLA0KICAgICAg\nICBib29sZWFuIGlzRm9yVXBkYXRlLCBTZWxlY3Qgc2VsKSB7DQogICAgICAg\nIGludCBpc29sYXRpb25MZXZlbDsNCiAgICAgICAgLy8gRm9yIGRiMlVEQlY4\nMU9yRWFybGllciBhbmQgZGIySVNlcmllc1Y1UjNPckVhcmxpZXI6DQogICAg\nICAgIC8vICJvcHRpbWl6ZSBmb3IiIGNsYXVzZSBhcHBlYXJzIGJlZm9yZSAi\nZm9yIHVwZGF0ZSIgY2xhdXNlLg0KICAgICAgICBTdHJpbmdCdWZmZXIgZm9y\nVXBkYXRlU3RyaW5nID0gbmV3IFN0cmluZ0J1ZmZlcigNCiAgICAgICAgICAg\nIGdldE9wdGltaXplQ2xhdXNlKHNlbCkpOw0KICAgICAgICB0cnkgew0KICAg\nICAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBpc29sYXRpb25MZXZlbDsgdGhl\nIGZldGNoDQogICAgICAgICAgICAvLyBjb25maWd1cmF0aW9uIGRhdGEgb3Zl\ncnJpZGVzIHRoZSBwZXJzaXN0ZW5jZS54bWwgdmFsdWUNCiAgICAgICAgICAg\nIGlmIChmZXRjaCAhPSBudWxsICYmIGZldGNoLmdldElzb2xhdGlvbigpICE9\nIC0xKQ0KICAgICAgICAgICAgICAgIGlzb2xhdGlvbkxldmVsID0gZmV0Y2gu\nZ2V0SXNvbGF0aW9uKCk7DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAg\nICAgICAgaXNvbGF0aW9uTGV2ZWwgPSBjb25mLmdldFRyYW5zYWN0aW9uSXNv\nbGF0aW9uQ29uc3RhbnQoKTsNCg0KICAgICAgICAgICAgaWYgKGlzRm9yVXBk\nYXRlKSB7DQogICAgICAgICAgICAgICAgc3dpdGNoKGRiMlNlcnZlclR5cGUp\nIHsNCiAgICAgICAgICAgICAgICBjYXNlIGRiMklTZXJpZXNWNVIzT3JFYXJs\naWVyOg0KICAgICAgICAgICAgICAgIGNhc2UgZGIyVURCVjgxT3JFYXJsaWVy\nOg0KICAgICAgICAgICAgICAgICAgICBpZiAoaXNvbGF0aW9uTGV2ZWwgPT0g\nQ29ubmVjdGlvbi5UUkFOU0FDVElPTl9TRVJJQUxJWkFCTEUpDQogICAgICAg\nICAgICAgICAgICAgICAgICBmb3JVcGRhdGVTdHJpbmcuYXBwZW5kKCIgIiku\nYXBwZW5kKGZvclVwZGF0ZUNsYXVzZSk7DQogICAgICAgICAgICAgICAgICAg\nIGVsc2UgDQogICAgICAgICAgICAgICAgICAgICAgICBmb3JVcGRhdGVTdHJp\nbmcuYXBwZW5kKCIgIikuYXBwZW5kKGZvclVwZGF0ZSkNCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAuYXBwZW5kKCIgIikuYXBwZW5kKHdpdGhSU0Ns\nYXVzZSk7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAg\nICAgICAgIGNhc2UgZGIyWk9TVjh4T3JMYXRlcjoNCiAgICAgICAgICAgICAg\nICBjYXNlIGRiMlVEQlY4Mk9yTGF0ZXI6DQogICAgICAgICAgICAgICAgICAg\nIGlmIChpc29sYXRpb25MZXZlbCA9PSBDb25uZWN0aW9uLlRSQU5TQUNUSU9O\nX1NFUklBTElaQUJMRSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZm9y\nVXBkYXRlU3RyaW5nLmFwcGVuZCgiICIpLmFwcGVuZChmb3JSZWFkT25seUNs\nYXVzZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCIg\nIikuYXBwZW5kKHdpdGhSUkNsYXVzZSkNCiAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAuYXBwZW5kKCIgIikuYXBwZW5kKHVzZUtlZXBVcGRhdGVMb2Nr\nQ2xhdXNlKTsgICANCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAg\nICAgICAgICAgICAgICAgICAgICAgIGZvclVwZGF0ZVN0cmluZy5hcHBlbmQo\nIiAiKS5hcHBlbmQoZm9yUmVhZE9ubHlDbGF1c2UpDQogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgLmFwcGVuZCgiICIpLmFwcGVuZCh3aXRoUlNDbGF1\nc2UpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgiICIp\nLmFwcGVuZCh1c2VLZWVwVXBkYXRlTG9ja0NsYXVzZSk7ICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICB9DQogICAg\nICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2Ug\nZGIySVNlcmllc1Y1UjRPckxhdGVyOg0KICAgICAgICAgICAgICAgICAgICBp\nZiAoaXNvbGF0aW9uTGV2ZWwgPT0gQ29ubmVjdGlvbi5UUkFOU0FDVElPTl9T\nRVJJQUxJWkFCTEUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvclVw\nZGF0ZVN0cmluZy5hcHBlbmQoIiAiKS5hcHBlbmQoZm9yUmVhZE9ubHlDbGF1\nc2UpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgiICIp\nLmFwcGVuZCh3aXRoUlJDbGF1c2UpDQogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgLmFwcGVuZCgiICIpLmFwcGVuZCh1c2VLZWVwRXhjbHVzaXZlTG9j\na0NsYXVzZSk7ICAgICAgIA0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ug\new0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yVXBkYXRlU3RyaW5nLmFw\ncGVuZCgiICIpLmFwcGVuZChmb3JSZWFkT25seUNsYXVzZSkNCiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCIgIikuYXBwZW5kKHdpdGhS\nU0NsYXVzZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5k\nKCIgIikuYXBwZW5kKHVzZUtlZXBFeGNsdXNpdmVMb2NrQ2xhdXNlKTsNCiAg\nICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBicmVh\nazsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAg\nIH0NCiAgICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7DQogICAgICAgICAg\nICBpZiAobG9nLmlzVHJhY2VFbmFibGVkKCkpDQogICAgICAgICAgICAgICAg\nbG9nLmVycm9yKGUudG9TdHJpbmcoKSxlKTsNCiAgICAgICAgfQ0KICAgICAg\nICByZXR1cm4gZm9yVXBkYXRlU3RyaW5nLnRvU3RyaW5nKCk7DQogICAgfQ0K\nDQogICAgcHVibGljIGJvb2xlYW4gaXNEQjJVREJWODJPckxhdGVyKCkgew0K\nICAgICAgICBib29sZWFuIG1hdGNoID0gZmFsc2U7DQogICAgICAgIGlmICgo\nZGF0YWJhc2VQcm9kdWN0VmVyc2lvbi5pbmRleE9mKCJTUUwiKSAhPSAtMQ0K\nICAgICAgICAgICAgfHwgZGF0YWJhc2VQcm9kdWN0TmFtZS5pbmRleE9mKCJE\nQjIvIikgIT0gLTEpDQogICAgICAgICAgICAmJiAoKG1haiA9PSA4ICYmIG1p\nbiA+PSAyKSB8fCAobWFqID49IDkpKSkNCiAgICAgICAgICAgIG1hdGNoID0g\ndHJ1ZTsNCiAgICAgICAgcmV0dXJuIG1hdGNoOw0KICAgIH0NCg0KICAgIHB1\nYmxpYyBib29sZWFuIGlzREIyWk9TVjh4T3JMYXRlcigpIHsNCiAgICAgICBi\nb29sZWFuIG1hdGNoID0gZmFsc2U7DQogICAgICAgaWYgKChkYXRhYmFzZVBy\nb2R1Y3RWZXJzaW9uLmluZGV4T2YoIkRTTiIpICE9IC0xDQogICAgICAgICAg\nIHx8IGRhdGFiYXNlUHJvZHVjdE5hbWUuaW5kZXhPZigiREIyLyIpID09IC0x\nKQ0KICAgICAgICAgICAmJiBtYWogPj0gOCkNCiAgICAgICAgICAgbWF0Y2gg\nPSB0cnVlOw0KICAgICAgICByZXR1cm4gbWF0Y2g7DQogICAgfQ0KDQogICAg\ncHVibGljIGJvb2xlYW4gaXNEQjJJU2VyaWVzVjVSM09yRWFybGllcigpIHsN\nCiAgICAgICBib29sZWFuIG1hdGNoID0gZmFsc2U7DQogICAgICAgaWYgKGRh\ndGFiYXNlUHJvZHVjdE5hbWUuaW5kZXhPZigiQVMiKSAhPSAtMQ0KICAgICAg\nICAgICAmJiAoKG1haiA9PSA1ICYmIG1pbiA8PTMpIHx8IG1haiA8IDUpKQ0K\nICAgICAgICAgICBtYXRjaCA9IHRydWU7DQogICAgICAgcmV0dXJuIG1hdGNo\nOw0KICAgIH0NCg0KICAgIHB1YmxpYyBib29sZWFuIGlzREIySVNlcmllc1Y1\nUjRPckxhdGVyKCkgew0KICAgICAgIGJvb2xlYW4gbWF0Y2ggPSBmYWxzZTsN\nCiAgICAgICBpZiAoZGF0YWJhc2VQcm9kdWN0TmFtZS5pbmRleE9mKCJBUyIp\nICE9IC0xDQogICAgICAgICAgICYmIChtYWogPj02IHx8IChtYWogPT0gNSAm\nJiBtaW4gPj00KSkpDQogICAgICAgICAgIG1hdGNoID0gdHJ1ZTsNCiAgICAg\nIHJldHVybiBtYXRjaDsNCiAgICB9DQoNCiAgICBwdWJsaWMgYm9vbGVhbiBp\nc0RCMlVEQlY4MU9yRWFybGllcigpIHsNCiAgICAgICAgYm9vbGVhbiBtYXRj\naCA9IGZhbHNlOw0KICAgICAgICBpZiAoKGRhdGFiYXNlUHJvZHVjdFZlcnNp\nb24uaW5kZXhPZigiU1FMIikgIT0gLTEgDQogICAgICAgICAgIHx8IGRhdGFi\nYXNlUHJvZHVjdE5hbWUuaW5kZXhPZigiREIyLyIpICE9IC0xKSAmJg0KICAg\nICAgICAgICAoKG1haiA9PSA4ICYmIG1pbiA8PSAxKSB8fCBtYWogPCA4KSkN\nCiAgICAgICAgICAgIG1hdGNoID0gdHJ1ZTsNCiAgICAgICAgcmV0dXJuIG1h\ndGNoOw0KICAgIH0NCg0KICAgIC8qKiBHZXQgdGhlIHZlcnNpb24gTWFqb3Iv\nTWlub3IgZm9yIHRoZSBJU2VyaWVzDQogICAgICovDQogICAgcHJpdmF0ZSB2\nb2lkIGdldFByb2R1Y3RWZXJzaW9uTWFqb3JNaW5vckZvcklTZXJpZXMoKSB7\nDQogICAgICAgIC8vIElTZXJpZXMgICAgREJQcm9kTmFtZSAgICAgICAgICAg\nICAgICAgREIyIFVEQiBmb3IgQVMvNDAwDQogICAgICAgIC8vICAgKFRvb2xi\nb3gpREJQcm9kVmVyc2lvbiAgICAgICAgICAgICAgMDUuMDQuMDAwMCBWNVI0\nbTANCiAgICAgICAgLy8gSVNlcmllcyAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICBEQjIgVURCIGZvciBBUy80MDANCiAgICAgICAgLy8gICAoTmF0\naXZlKSAgICAgICAgICAgICAgICAgICAgICAgICAgICBWNVI0TTANCiAgICAg\nICAgaWYgKGRhdGFiYXNlUHJvZHVjdE5hbWUuaW5kZXhPZigiQVMiKSAhPSAt\nMSkgew0KICAgICAgICAgICAgU3RyaW5nIHMgPSBkYXRhYmFzZVByb2R1Y3RW\nZXJzaW9uLnN1YnN0cmluZyhkYXRhYmFzZVByb2R1Y3RWZXJzaW9uDQogICAg\nICAgICAgICAgICAgLmluZGV4T2YoJ1YnKSk7DQogICAgICAgICAgICBzID0g\ncy50b1VwcGVyQ2FzZSgpOw0KDQogICAgICAgICAgICBTdHJpbmdUb2tlbml6\nZXIgc3RyaW5ndG9rZW5pemVyID0gbmV3IFN0cmluZ1Rva2VuaXplcihzLCAi\nVlJNIg0KICAgICAgICAgICAgICAgICwgZmFsc2UpOw0KICAgICAgICAgICAg\naWYgKHN0cmluZ3Rva2VuaXplci5jb3VudFRva2VucygpID09IDMpIHsNCiAg\nICAgICAgICAgICAgICBTdHJpbmcgczEgPSBzdHJpbmd0b2tlbml6ZXIubmV4\ndFRva2VuKCk7DQogICAgICAgICAgICAgICAgbWFqID0gSW50ZWdlci5wYXJz\nZUludChzMSk7DQogICAgICAgICAgICAgICAgU3RyaW5nIHMyID0gIHN0cmlu\nZ3Rva2VuaXplci5uZXh0VG9rZW4oKTsNCiAgICAgICAgICAgICAgICBtaW4g\nPSBJbnRlZ2VyLnBhcnNlSW50KHMyKTsNCiAgICAgICAgICAgIH0NCiAgICAg\nICAgfQ0KICAgIH0NCiAgICANCiAgICBwcml2YXRlIHZvaWQgZ2V0UHJvZHVj\ndFZlcnNpb25NYWpvck1pbm9yKCkgew0KICAgICAgICAvLyBJbmNhc2UgSkRC\nQyBkcml2ZXIgdmVyc2lvbiBpcyBsb3dlciB0aGFuIDMNCiAgICAgICAgLy8g\ndXNlIGZvbGxvd2luZyBpbmZvIHRvIGRldGVybWluZSBNYWpvciBhbmQgTWlu\nb3IgDQogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgQ0xJICAg\nIHZzICAgICAgSkNDDQogICAgICAgIC8vIFpEQlY4IERCUHJvZE5hbWUgICAg\nICAgREIyICAgICAgICAgICAgREIyDQogICAgICAgIC8vICAgICAgIERCUHJv\nZFZlcnNpb24gICAgMDguMDEuMDAwNSAgICAgRFNOMDgwMTUNCiAgICAgICAg\nLy8gWkRCVjkgICAgICAgICAgICAgICAgICBEQjIgICAgICAgICAgICBEQjIN\nCiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAwOS4wMS4wMDA1\nICAgICBEU04wOTAxNQ0KICAgICAgICAvLyBXaW5WOSAgICAgICAgICAgICAg\nICAgIERCMi9OVCAgICAgICAgIERCMi9OVA0KICAgICAgICAvLyAgICAgICAg\nICAgICAgICAgICAgICAgIDA5LjAxLjAwMDAgICAgIFNRTDA5MDEwDQogICAg\nICAgIC8vIFNvbGFyaXNWOSAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nREIyL1NVTjY0DQogICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgU1FMMDkwMQ0KICAgICAgICAvLyBMaW51eCAgICAg\nICAgICAgICAgICAgIERCMi9MSU5VWCAgICAgIERCMi9MSU5VWA0KICAgICAg\nICAvLyAgICAgICAgICAgICAgICAgICAgICAgIDA5LjAxLjAwMDAgICAgIFNR\nTDA5MDENCiAgICAgICAgaWYgKGRhdGFiYXNlUHJvZHVjdFZlcnNpb24uaW5k\nZXhPZigiMDkiKSAhPSAtMSkgew0KICAgICAgICAgICAgbWFqID0gOTsNCiAg\nICAgICAgICAgIGlmIChkYXRhYmFzZVByb2R1Y3RWZXJzaW9uLmluZGV4T2Yo\nIjAxIikgIT0gLTEpIHsNCiAgICAgICAgICAgICAgICBtaW4gPSAxOw0KICAg\nICAgICAgICAgfQ0KICAgICAgICB9IGVsc2UgaWYgKGRhdGFiYXNlUHJvZHVj\ndFZlcnNpb24uaW5kZXhPZigiMDgiKSAhPSAtMSkgew0KICAgICAgICAgICAg\nbWFqID0gODsNCiAgICAgICAgICAgIG1pbiA9IDI7DQogICAgICAgICAgICBp\nZiAoZGF0YWJhc2VQcm9kdWN0VmVyc2lvbi5pbmRleE9mKCIwMSIpICE9IC0x\nKSB7DQogICAgICAgICAgICAgICAgbWluID0gMTsNCiAgICAgICAgICAgIH0N\nCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHByb3RlY3RlZCBTdHJpbmcgZ2V0\nT3B0aW1pemVDbGF1c2UoU2VsZWN0IHNlbCkgew0KICAgICAgICBpZiAoc2Vs\nICE9IG51bGwgJiYgc2VsLmdldEV4cGVjdGVkUmVzdWx0Q291bnQoKSA+IDAp\nIHsNCiAgICAgICAgICAgIFN0cmluZ0J1ZmZlciBidWYgPSBuZXcgU3RyaW5n\nQnVmZmVyKCk7DQogICAgICAgICAgICBidWYuYXBwZW5kKCIgIikuYXBwZW5k\nKG9wdGltaXplQ2xhdXNlKS5hcHBlbmQoIiAiKQ0KICAgICAgICAgICAgICAg\nIC5hcHBlbmQoU3RyaW5nLnZhbHVlT2Yoc2VsLmdldEV4cGVjdGVkUmVzdWx0\nQ291bnQoKSkpDQogICAgICAgICAgICAgICAgLmFwcGVuZCgiICIpLmFwcGVu\nZChyb3dDbGF1c2UpOw0KICAgICAgICAgICAgcmV0dXJuIGJ1Zi50b1N0cmlu\nZygpOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuICIiOw0KICAgIH0N\nCg0KICAgIHB1YmxpYyBPcGVuSlBBRXhjZXB0aW9uIG5ld1N0b3JlRXhjZXB0\naW9uKFN0cmluZyBtc2csIFNRTEV4Y2VwdGlvbltdIGNhdXNlcywNCiAgICAg\nICAgT2JqZWN0IGZhaWxlZCkgew0KICAgICAgICBpZiAoY2F1c2VzICE9IG51\nbGwgJiYgY2F1c2VzLmxlbmd0aCA+IDApDQogICAgICAgICAgICBtc2cgPSBh\ncHBlbmRFeHRlbmRlZEV4Y2VwdGlvbk1zZyhtc2csIGNhdXNlc1swXSk7DQog\nICAgICAgIHJldHVybiBzdXBlci5uZXdTdG9yZUV4Y2VwdGlvbihtc2csIGNh\ndXNlcywgZmFpbGVkKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiAgQXBw\nZW5kIGV4Y2VwdGlvbiBpbmZvcm1hdGlvbiBmcm9tIFNRTENBIHRvIHRoZSBl\neHNpc3RpbmcNCiAgICAgKiAgZXhjZXB0aW9uIG1lYXNzYWdlDQogICAgICov\nDQogICAgcHJpdmF0ZSBTdHJpbmcgYXBwZW5kRXh0ZW5kZWRFeGNlcHRpb25N\nc2coU3RyaW5nIG1zZywgU1FMRXhjZXB0aW9uIHNxbGUpew0KICAgICAgIGZp\nbmFsIFN0cmluZyBHRVRTUUxDQSA9ImdldFNxbGNhIjsNCiAgICAgICBTdHJp\nbmcgZXhjZXB0aW9uTXNnID0gbmV3IFN0cmluZygpOw0KICAgICAgIHRyeSB7\nDQogICAgICAgICAgICBNZXRob2Qgc3FsY2FNMiA9IHNxbGUuZ2V0TmV4dEV4\nY2VwdGlvbigpLmdldENsYXNzKCkNCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgLmdldE1ldGhvZChHRVRTUUxDQSxudWxsKTsNCiAgICAgICAgICAg\nIE9iamVjdCBzcWxjYSA9IHNxbGNhTTIuaW52b2tlKHNxbGUuZ2V0TmV4dEV4\nY2VwdGlvbigpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgbmV3IE9iamVjdFtdIHt9KTsNCiAgICAgICAgICAgIE1ldGhv\nZCAgZ2V0U3FsRXJycE1ldGhkID0gc3FsY2EuZ2V0Q2xhc3MoKS4NCiAgICAg\nICAgICAgIGdldE1ldGhvZCgiZ2V0U3FsRXJycCIsIG51bGwpOw0KICAgICAg\nICAgICAgTWV0aG9kICBnZXRTcWxXYXJuTWV0aGQgPSBzcWxjYS5nZXRDbGFz\ncygpLg0KICAgICAgICAgICAgZ2V0TWV0aG9kKCJnZXRTcWxXYXJuIiwgbnVs\nbCk7DQogICAgICAgICAgICBNZXRob2QgIGdldFNxbEVycmRNZXRoZCA9IHNx\nbGNhLmdldENsYXNzKCkuDQogICAgICAgICAgICBnZXRNZXRob2QoImdldFNx\nbEVycmQiLCBudWxsKTsNCiAgICAgICAgICAgIFN0cmluZ0J1ZmZlciBlcnJk\nU3RyID0gbmV3IFN0cmluZ0J1ZmZlcigpOw0KDQogICAgICAgICAgICBpbnRb\nXSBlcnJkcyA9IChpbnRbXSkgZ2V0U3FsRXJyZE1ldGhkLmludm9rZShzcWxj\nYSwgbmV3IE9iamVjdFtde30pOw0KICAgICAgICAgICAgZm9yIChpbnQgaSA9\nIDA7IGkgPCBlcnJkcy5sZW5ndGg7IGkrKykNCiAgICAgICAgICAgICAgICBl\ncnJkU3RyLmFwcGVuZChlcnJkU3RyLmxlbmd0aCgpID4gMCA/ICIsICIgOiAi\nIikuDQogICAgICAgICAgICAgICAgICAgIGFwcGVuZChlcnJkc1tpXSk7DQog\nICAgICAgICAgICBleGNlcHRpb25Nc2cgPSBleGNlcHRpb25Nc2cuY29uY2F0\nKCAiU1FMQ0EgT1VUUFVUIiArDQogICAgICAgICAgICAgICAgICAgICJbRXJy\ncD0iICsgZ2V0U3FsRXJycE1ldGhkLmludm9rZShzcWxjYSwgbmV3IE9iamVj\ndFtde30pDQogICAgICAgICAgICAgICAgICAgICsgIiwgRXJyZD0iICsgZXJy\nZFN0cik7DQoNCiAgICAgICAgICAgIFN0cmluZyBXYXJuID0gbmV3IFN0cmlu\nZygoY2hhcltdKSBnZXRTcWxXYXJuTWV0aGQuDQogICAgICAgICAgICAgICAg\nICAgIGludm9rZShzcWxjYSwgbmV3IE9iamVjdFtde30pKTsNCiAgICAgICAg\nICAgIGlmKFdhcm4udHJpbSgpLmxlbmd0aCgpICE9IDApDQogICAgICAgICAg\nICAgICAgZXhjZXB0aW9uTXNnID0gZXhjZXB0aW9uTXNnLmNvbmNhdCgiLCBX\nYXJuPSIgK1dhcm4gKyAiXSIgKTsNCiAgICAgICAgICAgIGVsc2UNCiAgICAg\nICAgICAgICAgICBleGNlcHRpb25Nc2cgPSBleGNlcHRpb25Nc2cuY29uY2F0\nKCAiXSIgKTsNCiAgICAgICAgICAgIG1zZyA9IG1zZy5jb25jYXQoZXhjZXB0\naW9uTXNnKTsNCiAgICAgICAgICAgIHJldHVybiBtc2c7DQogICAgICAgIH0g\nY2F0Y2ggKFRocm93YWJsZSB0KSB7DQogICAgICAgICAgICByZXR1cm4gc3Fs\nZS5nZXRNZXNzYWdlKCk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwdWJs\naWMgaW50IGdldERiMlNlcnZlclR5cGUoKSB7DQogICAgICAgIHJldHVybiBk\nYjJTZXJ2ZXJUeXBlOw0KICAgIH0NCiAgICANCiAgICBwcm90ZWN0ZWQgdm9p\nZCBhcHBlbmRMZW5ndGgoU1FMQnVmZmVyIGJ1ZiwgaW50IHR5cGUpIHsNCiAg\nICAgICAgaWYgKHR5cGUgPT0gVHlwZXMuVkFSQ0hBUikNCiAgICAgICAgICAg\nIGJ1Zi5hcHBlbmQoIigiKS5hcHBlbmQoSW50ZWdlci50b1N0cmluZyhjaGFy\nYWN0ZXJDb2x1bW5TaXplKSkuDQogICAgICAgICAgICAgICAgYXBwZW5kKCIp\nIik7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogSWYgdGhpcyBkaWN0aW9u\nYXJ5IHN1cHBvcnRzIFhNTCB0eXBlLA0KICAgICAqIHVzZSB0aGlzIG1ldGhv\nZCB0byBhcHBlbmQgeG1sIHByZWRpY2F0ZS4NCiAgICAgKiANCiAgICAgKiBA\ncGFyYW0gYnVmIHRoZSBTUUwgYnVmZmVyIHRvIHdyaXRlIHRoZSBjb21wYXJp\nc29uDQogICAgICogQHBhcmFtIG9wIHRoZSBjb21wYXJpc29uIG9wZXJhdGlv\nbiB0byBwZXJmb3JtDQogICAgICogQHBhcmFtIGxocyB0aGUgbGVmdCBoYW5k\nIHNpZGUgb2YgdGhlIGNvbXBhcmlzb24NCiAgICAgKiBAcGFyYW0gcmhzIHRo\nZSByaWdodCBoYW5kIHNpZGUgb2YgdGhlIGNvbXBhcmlzb24NCiAgICAgKiBA\ncGFyYW0gbGhzeG1sIGluZGljYXRlcyB3aGV0aGVyIHRoZSBsZWZ0IG9wZXJh\nbmQgbWFwcyB0byB4bWwNCiAgICAgKiBAcGFyYW0gcmhzeG1sIGluZGljYXRl\ncyB3aGV0aGVyIHRoZSByaWdodCBvcGVyYW5kIG1hcHMgdG8geG1sDQogICAg\nICovDQogICAgcHVibGljIHZvaWQgYXBwZW5kWG1sQ29tcGFyaXNvbihTUUxC\ndWZmZXIgYnVmLCBTdHJpbmcgb3AsIEZpbHRlclZhbHVlIGxocywNCiAgICAg\nICAgRmlsdGVyVmFsdWUgcmhzLCBib29sZWFuIGxoc3htbCwgYm9vbGVhbiBy\naHN4bWwpIHsNCiAgICAgICAgc3VwZXIuYXBwZW5kWG1sQ29tcGFyaXNvbihi\ndWYsIG9wLCBsaHMsIHJocywgbGhzeG1sLCByaHN4bWwpOw0KICAgICAgICBp\nZiAobGhzeG1sICYmIHJoc3htbCkNCiAgICAgICAgICAgIGFwcGVuZFhtbENv\nbXBhcmlzb24yKGJ1Ziwgb3AsIGxocywgcmhzKTsNCiAgICAgICAgZWxzZSBp\nZiAobGhzeG1sKQ0KICAgICAgICAgICAgYXBwZW5kWG1sQ29tcGFyaXNvbjEo\nYnVmLCBvcCwgbGhzLCByaHMpOw0KICAgICAgICBlbHNlIA0KICAgICAgICAg\nICAgYXBwZW5kWG1sQ29tcGFyaXNvbjEoYnVmLCBvcCwgcmhzLCBsaHMpOw0K\nICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEFwcGVuZCBhbiB4bWwgY29tcGFy\naXNvbiBwcmVkaWNhdGUuDQogICAgICoNCiAgICAgKiBAcGFyYW0gYnVmIHRo\nZSBTUUwgYnVmZmVyIHRvIHdyaXRlIHRoZSBjb21wYXJpc29uDQogICAgICog\nQHBhcmFtIG9wIHRoZSBjb21wYXJpc29uIG9wZXJhdGlvbiB0byBwZXJmb3Jt\nDQogICAgICogQHBhcmFtIGxocyB0aGUgbGVmdCBoYW5kIHNpZGUgb2YgdGhl\nIGNvbXBhcmlzb24gKG1hcHMgdG8geG1sIGNvbHVtbikNCiAgICAgKiBAcGFy\nYW0gcmhzIHRoZSByaWdodCBoYW5kIHNpZGUgb2YgdGhlIGNvbXBhcmlzb24N\nCiAgICAgKi8NCiAgICBwcml2YXRlIHZvaWQgYXBwZW5kWG1sQ29tcGFyaXNv\nbjEoU1FMQnVmZmVyIGJ1ZiwgU3RyaW5nIG9wLCANCiAgICAgICAgICAgIEZp\nbHRlclZhbHVlIGxocywgRmlsdGVyVmFsdWUgcmhzKSB7DQogICAgICAgIGJv\nb2xlYW4gY2FzdHJocyA9IGZhbHNlOw0KICAgICAgICBDbGFzcyByYyA9IEZp\nbHRlcnMud3JhcChyaHMuZ2V0VHlwZSgpKTsNCiAgICAgICAgaW50IHR5cGUg\nPSAwOw0KICAgICAgICBpZiAocmhzLmlzQ29uc3RhbnQoKSkgew0KICAgICAg\nICAgICAgdHlwZSA9IGdldEpEQkNUeXBlKEphdmFUeXBlcy5nZXRUeXBlQ29k\nZShyYyksIGZhbHNlKTsNCiAgICAgICAgICAgIGNhc3RyaHMgPSB0cnVlOw0K\nICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBhcHBlbmRYbWxFeGlzdHMo\nYnVmLCBsaHMpOw0KDQogICAgICAgIGJ1Zi5hcHBlbmQoIiAiKS5hcHBlbmQo\nb3ApLmFwcGVuZCgiICIpOw0KICAgICAgICANCiAgICAgICAgYnVmLmFwcGVu\nZCgiJCIpOw0KICAgICAgICBpZiAoY2FzdHJocykNCiAgICAgICAgICAgIGJ1\nZi5hcHBlbmQoIlBhcm0iKTsNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAg\ncmhzLmFwcGVuZFRvKGJ1Zik7DQogICAgICAgIA0KICAgICAgICBidWYuYXBw\nZW5kKCJdJyBQQVNTSU5HICIpOw0KICAgICAgICBhcHBlbmRYbWxWYXIoYnVm\nLCBsaHMpOw0KICAgICAgICBidWYuYXBwZW5kKCIsICIpOw0KICAgICAgICAN\nCiAgICAgICAgaWYgKGNhc3RyaHMpDQogICAgICAgICAgICBhcHBlbmRDYXN0\nKGJ1ZiwgcmhzLCB0eXBlKTsNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAg\ncmhzLmFwcGVuZFRvKGJ1Zik7DQogICAgICAgIA0KICAgICAgICBidWYuYXBw\nZW5kKCIgQVMgXCIiKTsNCiAgICAgICAgaWYgKGNhc3RyaHMpDQogICAgICAg\nICAgICBidWYuYXBwZW5kKCJQYXJtIik7DQogICAgICAgIGVsc2UNCiAgICAg\nICAgICAgIHJocy5hcHBlbmRUbyhidWYpOw0KICAgICAgICBidWYuYXBwZW5k\nKCJcIikiKTsNCiAgICB9DQogICAgDQogICAgLyoqDQogICAgICogQXBwZW5k\nIGFuIHhtbCBjb21wYXJpc29uIHByZWRpY2F0ZS4gKGJvdGggb3BlcmFuZHMg\nbWFwIHRvIHhtbCBjb2x1bW4pDQogICAgICoNCiAgICAgKiBAcGFyYW0gYnVm\nIHRoZSBTUUwgYnVmZmVyIHRvIHdyaXRlIHRoZSBjb21wYXJpc29uDQogICAg\nICogQHBhcmFtIG9wIHRoZSBjb21wYXJpc29uIG9wZXJhdGlvbiB0byBwZXJm\nb3JtDQogICAgICogQHBhcmFtIGxocyB0aGUgbGVmdCBoYW5kIHNpZGUgb2Yg\ndGhlIGNvbXBhcmlzb24gKG1hcHMgdG8geG1sIGNvbHVtbikNCiAgICAgKiBA\ncGFyYW0gcmhzIHRoZSByaWdodCBoYW5kIHNpZGUgb2YgdGhlIGNvbXBhcmlz\nb24gKG1hcHMgdG8geG1sIGNvbHVtbikNCiAgICAgKi8NCiAgICBwcml2YXRl\nIHZvaWQgYXBwZW5kWG1sQ29tcGFyaXNvbjIoU1FMQnVmZmVyIGJ1ZiwgU3Ry\naW5nIG9wLCANCiAgICAgICAgICAgIEZpbHRlclZhbHVlIGxocywgRmlsdGVy\nVmFsdWUgcmhzKSB7DQogICAgICAgIGFwcGVuZFhtbEV4aXN0cyhidWYsIGxo\ncyk7DQogICAgICAgIA0KICAgICAgICBidWYuYXBwZW5kKCIgIikuYXBwZW5k\nKG9wKS5hcHBlbmQoIiAiKTsNCiAgICAgICAgDQogICAgICAgIGJ1Zi5hcHBl\nbmQoIiQiKS5hcHBlbmQocmhzLmdldENvbHVtbkFsaWFzKA0KICAgICAgICAg\nICAgcmhzLmdldEZpZWxkTWFwcGluZygpLmdldENvbHVtbnMoKVswXSkpLg0K\nICAgICAgICAgICAgYXBwZW5kKCIvKi8iKTsNCiAgICAgICAgcmhzLmFwcGVu\nZFRvKGJ1Zik7DQogICAgICAgIA0KICAgICAgICBidWYuYXBwZW5kKCJdJyBQ\nQVNTSU5HICIpOw0KICAgICAgICBhcHBlbmRYbWxWYXIoYnVmLCBsaHMpOw0K\nICAgICAgICBidWYuYXBwZW5kKCIsICIpOw0KICAgICAgICBhcHBlbmRYbWxW\nYXIoYnVmLCByaHMpOw0KICAgICAgICBidWYuYXBwZW5kKCIpIik7DQogICAg\nfQ0KICAgIA0KICAgIHByaXZhdGUgdm9pZCBhcHBlbmRYbWxWYXIoU1FMQnVm\nZmVyIGJ1ZiwgRmlsdGVyVmFsdWUgdmFsKSB7DQogICAgICAgIGJ1Zi5hcHBl\nbmQodmFsLmdldENvbHVtbkFsaWFzKA0KICAgICAgICAgICAgdmFsLmdldEZp\nZWxkTWFwcGluZygpLmdldENvbHVtbnMoKVswXSkpLg0KICAgICAgICAgICAg\nYXBwZW5kKCIgQVMgIikuDQogICAgICAgICAgICBhcHBlbmQoIlwiIikuYXBw\nZW5kKHZhbC5nZXRDb2x1bW5BbGlhcygNCiAgICAgICAgICAgIHZhbC5nZXRG\naWVsZE1hcHBpbmcoKS5nZXRDb2x1bW5zKClbMF0pKS4NCiAgICAgICAgICAg\nIGFwcGVuZCgiXCIiKTsgICAgICAgIA0KICAgIH0NCiAgICANCiAgICBwcml2\nYXRlIHZvaWQgYXBwZW5kWG1sRXhpc3RzKFNRTEJ1ZmZlciBidWYsIEZpbHRl\nclZhbHVlIHZhbCkgew0KICAgICAgICBidWYuYXBwZW5kKCJYTUxFWElTVFMo\nJyIpOw0KICAgICAgICBidWYuYXBwZW5kKCIkIikuYXBwZW5kKHZhbC5nZXRD\nb2x1bW5BbGlhcygNCiAgICAgICAgICAgIHZhbC5nZXRGaWVsZE1hcHBpbmco\nKS5nZXRDb2x1bW5zKClbMF0pKS4NCiAgICAgICAgICAgIGFwcGVuZCgiLypb\nIik7DQogICAgICAgIHZhbC5hcHBlbmRUbyhidWYpOyAgICAgICAgDQogICAg\nfQ0KICAgIA0KICAgIC8qKg0KICAgICAqIGFkZCBDQVNUIGZvciBhIHNjYWxh\nciBmdW5jdGlvbiB3aGVyZSBvcGVyYW5kIGlzIGEgcGFyYW0NCiAgICAgKiAN\nCiAgICAgKiBAcGFyYW0gZnVuYyBvcmlnaW5hbCBzdHJpbmcNCiAgICAgKiBA\ncGFyYW0gdGFyZ2V0IHN1YnN0cmluZyB0byBsb29rIGZvcg0KICAgICAqIEBw\nYXJhbSBhc1N0cmluZyANCiAgICAgKiBAcmV0dXJuIHVwZGF0ZWQgc3RyaW5n\nIChmdW5jKQ0KICAgICAqLw0KICAgIHByaXZhdGUgU3RyaW5nIGFkZENhc3RB\nc1N0cmluZyhTdHJpbmcgZnVuYywgU3RyaW5nIHRhcmdldCwgDQogICAgICAg\nICAgICBTdHJpbmcgYXNTdHJpbmcpIHsNCiAgICAgICAgU3RyaW5nIGZzdHJp\nbmcgPSBmdW5jOw0KICAgICAgICBpZiAoZnVuYy5pbmRleE9mKHRhcmdldCkg\nIT0gLTEpDQogICAgICAgICAgICBmc3RyaW5nID0gU3RyaW5ncy5yZXBsYWNl\nKA0KICAgICAgICAgICAgICAgIGZ1bmMsIHRhcmdldCwgIkNBU1QoIiArIHRh\ncmdldCArIGFzU3RyaW5nICsgIikiKTsNCiAgICAgICAgcmV0dXJuIGZzdHJp\nbmc7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogYWRkIENBU1QgZm9yIGEg\nZnVuY3Rpb24gb3BlcmF0b3Igd2hlcmUgb3BlcmFuZCBpcyBhIHBhcmFtDQog\nICAgICogDQogICAgICogQHBhcmFtIGZ1bmMgZnVuY3Rpb24gbmFtZQ0KICAg\nICAqIEBwYXJhbSB2YWwgdHlwZQ0KICAgICAqIEByZXR1cm4gdXBkYXRlZCBz\ndHJpbmcgKGZ1bmMpDQogICAgICovDQogICAgcHVibGljIFN0cmluZyBhZGRD\nYXN0QXNUeXBlKFN0cmluZyBmdW5jLCBWYWwgdmFsKSB7DQogICAgICAgIFN0\ncmluZyBmc3RyaW5nID0gbnVsbDsNCiAgICAgICAgU3RyaW5nIHR5cGUgPSBn\nZXRUeXBlTmFtZShnZXRKREJDVHlwZShKYXZhVHlwZXMuZ2V0VHlwZUNvZGUo\ndmFsDQogICAgICAgICAgICAuZ2V0VHlwZSgpKSwgZmFsc2UpKTsNCiAgICAg\nICAgZnN0cmluZyA9ICJDQVNUKD8gQVMgIiArIHR5cGUgKyAiKSI7DQogICAg\nICAgIHJldHVybiBmc3RyaW5nOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAq\nIFJldHVybiB0aGUgY29ycmVjdCBDQVNUIGZ1bmN0aW9uIHN5bnRheA0KICAg\nICAqIA0KICAgICAqIEBwYXJhbSB2YWwgb3BlcmFuZCBvZiBjYXN0DQogICAg\nICogQHBhcmFtIGZ1bmMgb3JpZ2luYWwgc3RyaW5nDQogICAgICogQHJldHVy\nbiBhIFN0cmluZyB3aXRoIHRoZSBjb3JyZWN0IENBU1QgZnVuY3Rpb24gc3lu\ndGF4DQogICAgICovDQogICAgcHVibGljIFN0cmluZyBnZXRDYXN0RnVuY3Rp\nb24oVmFsIHZhbCwgU3RyaW5nIGZ1bmMpIHsNCiAgICAgICAgaWYgKHZhbCBp\nbnN0YW5jZW9mIExpdCB8fCB2YWwgaW5zdGFuY2VvZiBQYXJhbSkNCiAgICAg\nICAgICAgIGlmIChmdW5jLmluZGV4T2YoIlZBUkNIQVIiKSA9PSAtMSkNCiAg\nICAgICAgICAgICAgICBmdW5jID0gYWRkQ2FzdEFzU3RyaW5nKGZ1bmMsICJ7\nMH0iLCAiIEFTIFZBUkNIQVIoMTAwMCkiKTsNCiAgICAgICAgcmV0dXJuIGZ1\nbmM7DQogICAgfQ0KDQogICAgcHVibGljIHZvaWQgaW5kZXhPZihTUUxCdWZm\nZXIgYnVmLCBGaWx0ZXJWYWx1ZSBzdHIsIEZpbHRlclZhbHVlIGZpbmQsDQog\nICAgICAgICAgICBGaWx0ZXJWYWx1ZSBzdGFydCkgew0KICAgICAgICBpZiAo\nZmluZC5nZXRWYWx1ZSgpICE9IG51bGwpIHsgLy8gbm9uIGNvbnN0YW50cw0K\nICAgICAgICAgICAgYnVmLmFwcGVuZCgiKExPQ0FURShDQVNUKCgiKTsNCiAg\nICAgICAgICAgIGZpbmQuYXBwZW5kVG8oYnVmKTsNCiAgICAgICAgICAgIGJ1\nZi5hcHBlbmQoIikgQVMgVkFSQ0hBUigxMDAwKSksICIpOw0KICAgICAgICB9\nIGVsc2Ugew0KICAgICAgICAgICAgLy8gdGhpcyBpcyBhIGNvbnN0YW50DQog\nICAgICAgICAgICBidWYuYXBwZW5kKCIoTE9DQVRFKCIpOw0KICAgICAgICAg\nICAgZmluZC5hcHBlbmRUbyhidWYpOw0KICAgICAgICAgICAgYnVmLmFwcGVu\nZCgiLCAiKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoc3RyLmdldFZhbHVl\nKCkgIT0gbnVsbCkgew0KICAgICAgICAgICAgYnVmLmFwcGVuZCgiQ0FTVCgo\nIik7DQogICAgICAgICAgICBzdHIuYXBwZW5kVG8oYnVmKTsNCiAgICAgICAg\nICAgIGJ1Zi5hcHBlbmQoIikgQVMgVkFSQ0hBUigxMDAwKSkiKTsNCiAgICAg\nICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHN0ci5hcHBlbmRUbyhidWYpOw0K\nICAgICAgICB9DQogICAgICAgIGlmIChzdGFydCAhPSBudWxsKSB7DQogICAg\nICAgICAgICBpZiAoc3RhcnQuZ2V0VmFsdWUoKSA9PSBudWxsKSB7DQogICAg\nICAgICAgICAgICAgYnVmLmFwcGVuZCgiLCBDQVNUKCgiKTsNCiAgICAgICAg\nICAgICAgICBzdGFydC5hcHBlbmRUbyhidWYpOw0KICAgICAgICAgICAgICAg\nIGJ1Zi5hcHBlbmQoIikgQVMgSU5URUdFUikgKyAxIik7DQogICAgICAgICAg\nICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGJ1Zi5hcHBlbmQoIiwgIik7\nDQogICAgICAgICAgICAgICAgc3RhcnQuYXBwZW5kVG8oYnVmKTsNCiAgICAg\nICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBidWYuYXBwZW5kKCIpIC0g\nMSkiKTsNCiAgICB9DQoNCiAgICAvKiogDQogICAgICogQ2FzdCB0aGUgc3Bl\nY2lmaWVkIHZhbHVlIHRvIHRoZSBzcGVjaWZpZWQgdHlwZS4NCiAgICAgKg0K\nICAgICAqIEBwYXJhbSBidWYgdGhlIGJ1ZmZlciB0byBhcHBlbmQgdGhlIGNh\nc3QgdG8NCiAgICAgKiBAcGFyYW0gdmFsIHRoZSB2YWx1ZSB0byBjYXN0DQog\nICAgICogQHBhcmFtIHR5cGUgdGhlIHR5cGUgb2YgdGhlIGNhc2UsIGUuZy4g\ne0BsaW5rIFR5cGVzI05VTUVSSUN9DQogICAgICovDQogICAgcHVibGljIHZv\naWQgYXBwZW5kQ2FzdChTUUxCdWZmZXIgYnVmLCBGaWx0ZXJWYWx1ZSB2YWws\nIGludCB0eXBlKSB7DQoNCiAgICAgICAgLy8gQ29udmVydCB0aGUgY2FzdCBm\ndW5jdGlvbjogIkNBU1QoezB9IEFTIHsxfSkiDQogICAgICAgIGludCBmaXJz\ndFBhcmFtID0gY2FzdEZ1bmN0aW9uLmluZGV4T2YoInswfSIpOw0KICAgICAg\nICBTdHJpbmcgcHJlID0gY2FzdEZ1bmN0aW9uLnN1YnN0cmluZygwLCBmaXJz\ndFBhcmFtKTsgLy8gIkNBU1QoIg0KICAgICAgICBTdHJpbmcgbWlkID0gY2Fz\ndEZ1bmN0aW9uLnN1YnN0cmluZyhmaXJzdFBhcmFtICsgMyk7DQogICAgICAg\nIGludCBzZWNvbmRQYXJhbSA9IG1pZC5pbmRleE9mKCJ7MX0iKTsNCiAgICAg\nICAgU3RyaW5nIHBvc3Q7DQogICAgICAgIGlmIChzZWNvbmRQYXJhbSA+IC0x\nKSB7DQogICAgICAgICAgICBwb3N0ID0gbWlkLnN1YnN0cmluZyhzZWNvbmRQ\nYXJhbSArIDMpOyAvLyAiKSINCiAgICAgICAgICAgIG1pZCA9IG1pZC5zdWJz\ndHJpbmcoMCwgc2Vjb25kUGFyYW0pOyAvLyAiIEFTICINCiAgICAgICAgfSBl\nbHNlDQogICAgICAgICAgICBwb3N0ID0gIiI7DQoNCiAgICAgICAgLy8gTm8g\nbmVlZCB0byBhZGQgQ0FTVCBpZiB0aGUgdmFsdWUgaXMgYSBjb25zdGFudA0K\nICAgICAgICBpZiAodmFsIGluc3RhbmNlb2YgTGl0IHx8IHZhbCBpbnN0YW5j\nZW9mIFBhcmFtKSB7DQogICAgICAgICAgICBidWYuYXBwZW5kKHByZSk7DQog\nICAgICAgICAgICB2YWwuYXBwZW5kVG8oYnVmKTsNCiAgICAgICAgICAgIGJ1\nZi5hcHBlbmQobWlkKTsNCiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoZ2V0VHlw\nZU5hbWUodHlwZSkpOw0KICAgICAgICAgICAgYXBwZW5kTGVuZ3RoKGJ1Ziwg\ndHlwZSk7DQogICAgICAgICAgICBidWYuYXBwZW5kKHBvc3QpOw0KICAgICAg\nICB9IGVsc2Ugew0KICAgICAgICAgICAgdmFsLmFwcGVuZFRvKGJ1Zik7DQog\nICAgICAgICAgICBTdHJpbmcgc3FsU3RyaW5nID0gYnVmLmdldFNRTChmYWxz\nZSk7DQogICAgICAgICAgICBpZiAoc3FsU3RyaW5nLmVuZHNXaXRoKCI/Iikp\nIHsNCiAgICAgICAgICAgICAgICAvLyBjYXNlICIoPyIgLSBjb252ZXJ0IHRv\nICJDQVNUKD8gQVMgdHlwZSINCiAgICAgICAgICAgICAgICBTdHJpbmcgdHlw\nZU5hbWUgPSBnZXRUeXBlTmFtZSh0eXBlKTsNCiAgICAgICAgICAgICAgICBp\nZiAoU3RyaW5nLmNsYXNzLmVxdWFscyh2YWwuZ2V0VHlwZSgpKSkNCiAgICAg\nICAgICAgICAgICAgICAgdHlwZU5hbWUgPSB0eXBlTmFtZSArICIoIiArIGNo\nYXJhY3RlckNvbHVtblNpemUgKyAiKSI7DQogICAgICAgICAgICAgICAgU3Ry\naW5nIHN0ciA9ICJDQVNUKD8gQVMgIiArIHR5cGVOYW1lICsgIikiOw0KICAg\nICAgICAgICAgICAgIGJ1Zi5yZXBsYWNlU3FsU3RyaW5nKHNxbFN0cmluZy5s\nZW5ndGgoKSAtIDEsDQogICAgICAgICAgICAgICAgICAgICAgICBzcWxTdHJp\nbmcubGVuZ3RoKCksIHN0cik7DQogICAgICAgICAgICB9DQogICAgICAgIH0N\nCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBDcmVhdGUgYW4gaW5kZXggaWYg\nbmVjZXNzYXJ5IGZvciBzb21lIGRhdGFiYXNlIHRhYmxlcw0KICAgICAqLw0K\nICAgIHB1YmxpYyB2b2lkIGNyZWF0ZUluZGV4SWZOZWNlc3NhcnkoU2NoZW1h\nIHNjaGVtYSwgU3RyaW5nIHRhYmxlLA0KICAgICAgICAgICAgQ29sdW1uIHBr\nQ29sdW1uKSB7DQogICAgICAgIGlmIChpc0RCMlpPU1Y4eE9yTGF0ZXIoKSkg\new0KICAgICAgICAgICAgLy8gYnVpbGQgdGhlIGluZGV4IGZvciB0aGUgc2Vx\ndWVuY2UgdGFibGVzDQogICAgICAgICAgICAvLyB0aGUgaW5kZXggbmFtZSB3\naWxsIHRoZSBmdWxseSBxdWFsaWZpZWQgdGFibGUgbmFtZSArIF9JRFgNCiAg\nICAgICAgICAgIFRhYmxlIHRhYiA9IHNjaGVtYS5nZXRUYWJsZSh0YWJsZSk7\nDQogICAgICAgICAgICBJbmRleCBpZHggPSB0YWIuYWRkSW5kZXgodGFiLmdl\ndEZ1bGxOYW1lKCkgKyAiX0lEWCIpOw0KICAgICAgICAgICAgaWR4LnNldFVu\naXF1ZSh0cnVlKTsNCiAgICAgICAgICAgIGlkeC5hZGRDb2x1bW4ocGtDb2x1\nbW4pOw0KICAgICAgICB9DQogICAgfQ0KfQ0K\n","encoding":"base64"}

