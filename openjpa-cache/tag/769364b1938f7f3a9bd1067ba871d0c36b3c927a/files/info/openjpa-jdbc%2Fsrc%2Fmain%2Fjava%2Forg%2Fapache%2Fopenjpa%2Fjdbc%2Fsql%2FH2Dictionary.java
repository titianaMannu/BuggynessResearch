{"sha":"6c0b90c18e1a5df9af5149ebf1f6c4e55073ac9b","node_id":"MDQ6QmxvYjIwNjM2NDo2YzBiOTBjMThlMWE1ZGY5YWY1MTQ5ZWJmMWY2YzRlNTUwNzNhYzli","size":7644,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/6c0b90c18e1a5df9af5149ebf1f6c4e55073ac9b","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWw7CgppbXBvcnQg\namF2YS5tYXRoLkJpZ0RlY2ltYWw7CmltcG9ydCBqYXZhLnNxbC5Db25uZWN0\naW9uOwppbXBvcnQgamF2YS5zcWwuRGF0YWJhc2VNZXRhRGF0YTsKaW1wb3J0\nIGphdmEuc3FsLlByZXBhcmVkU3RhdGVtZW50OwppbXBvcnQgamF2YS5zcWwu\nU1FMRXhjZXB0aW9uOwppbXBvcnQgamF2YS5zcWwuVHlwZXM7CmltcG9ydCBq\nYXZhLnV0aWwuQXJyYXlzOwppbXBvcnQgamF2YS51dGlsLkxvY2FsZTsKCmlt\ncG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMubGFuZy5TdHJpbmdVdGlsczsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmtlcm5lbC5leHBzLkZpbHRl\nclZhbHVlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1h\nLkNvbHVtbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVt\nYS5QcmltYXJ5S2V5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMu\nc2NoZW1hLlRhYmxlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMu\nc2NoZW1hLlVuaXF1ZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRh\nLkphdmFUeXBlczsKCi8qKgogKiBTdXBwb3J0IGZvciB0aGUgSDIgZGF0YWJh\nc2UgKHtAbGluayBodHRwOi8vd3d3LmgyZGF0YWJhc2UuY29tfSkuCiAqCiAq\nIEBzaW5jZSAwLjkuNwogKi8KcHVibGljIGNsYXNzIEgyRGljdGlvbmFyeSBl\neHRlbmRzIERCRGljdGlvbmFyeSB7CgogICAgcHVibGljIEgyRGljdGlvbmFy\neSgpIHsKICAgICAgICBwbGF0Zm9ybSA9ICJIMiI7CiAgICAgICAgdmFsaWRh\ndGlvblNRTCA9ICJDQUxMIDEiOwogICAgICAgIGNsb3NlUG9vbFNRTCA9ICJT\nSFVURE9XTiI7CgogICAgICAgIHN1cHBvcnRzQXV0b0Fzc2lnbiA9IHRydWU7\nCiAgICAgICAgbGFzdEdlbmVyYXRlZEtleVF1ZXJ5ID0gIkNBTEwgSURFTlRJ\nVFkoKSI7CiAgICAgICAgYXV0b0Fzc2lnbkNsYXVzZSA9ICJJREVOVElUWSI7\nCiAgICAgICAgYXV0b0Fzc2lnblR5cGVOYW1lID0gIklOVEVHRVIiOwogICAg\nICAgIG5leHRTZXF1ZW5jZVF1ZXJ5ID0gIkNBTEwgTkVYVCBWQUxVRSBGT1Ig\nezB9IjsKCiAgICAgICAgLy8gQ1JPU1MgSk9JTiBpcyBjdXJyZW50bHkgbm90\nIHN1cHBvcnRlZAogICAgICAgIGNyb3NzSm9pbkNsYXVzZSA9ICJKT0lOIjsK\nICAgICAgICByZXF1aXJlc0NvbmRpdGlvbkZvckNyb3NzSm9pbiA9IHRydWU7\nCiAgICAgICAgc3RyaW5nTGVuZ3RoRnVuY3Rpb24gPSAiTEVOR1RIKHswfSki\nOwogICAgICAgIHRyaW1MZWFkaW5nRnVuY3Rpb24gPSAiTFRSSU0oezB9KSI7\nCiAgICAgICAgdHJpbVRyYWlsaW5nRnVuY3Rpb24gPSAiUlRSSU0oezB9KSI7\nCiAgICAgICAgdHJpbUJvdGhGdW5jdGlvbiA9ICJUUklNKHswfSkiOwoKICAg\nICAgICB1c2VTY2hlbWFOYW1lID0gdHJ1ZTsKICAgICAgICBzdXBwb3J0c1Nl\nbGVjdEZvclVwZGF0ZSA9IHRydWU7CiAgICAgICAgc3VwcG9ydHNTZWxlY3RT\ndGFydEluZGV4ID0gdHJ1ZTsKICAgICAgICBzdXBwb3J0c1NlbGVjdEVuZElu\nZGV4ID0gdHJ1ZTsKICAgICAgICByYW5nZVBvc2l0aW9uID0gUkFOR0VfUE9T\nVF9MT0NLOwogICAgICAgIHN1cHBvcnRzRGVmZXJyZWRDb25zdHJhaW50cyA9\nIGZhbHNlOwoKICAgICAgICB1c2VHZXRPYmplY3RGb3JCbG9icyA9IHRydWU7\nCiAgICAgICAgYmxvYlR5cGVOYW1lID0gIkJMT0IiOwogICAgICAgIGRvdWJs\nZVR5cGVOYW1lID0gIkRPVUJMRSI7CgogICAgICAgIHN1cHBvcnRzTnVsbFRh\nYmxlRm9yR2V0UHJpbWFyeUtleXMgPSB0cnVlOwogICAgICAgIHN1cHBvcnRz\nTnVsbFRhYmxlRm9yR2V0SW5kZXhJbmZvID0gdHJ1ZTsKCiAgICAgICAgcmVx\ndWlyZXNDYXN0Rm9yTWF0aEZ1bmN0aW9ucyA9IGZhbHNlOwogICAgICAgIHJl\ncXVpcmVzQ2FzdEZvckNvbXBhcmlzb25zID0gZmFsc2U7CgogICAgICAgIHJl\nc2VydmVkV29yZFNldC5hZGRBbGwoQXJyYXlzLmFzTGlzdChuZXcgU3RyaW5n\nW10gewogICAgICAgICAgICAiQ1VSUkVOVF9USU1FU1RBTVAiLCAiQ1VSUkVO\nVF9USU1FIiwgIkNVUlJFTlRfREFURSIsICJDUk9TUyIsCiAgICAgICAgICAg\nICJESVNUSU5DVCIsICJFWENFUFQiLCAiRVhJU1RTIiwgIkZST00iLCAiRk9S\nIiwgIkZBTFNFIiwgIkZVTEwiLAogICAgICAgICAgICAiR1JPVVAiLCAiSEFW\nSU5HIiwgIklOTkVSIiwgIklOVEVSU0VDVCIsICJJUyIsICJKT0lOIiwgIkxJ\nS0UiLAogICAgICAgICAgICAiTUlOVVMiLCAiTkFUVVJBTCIsICJOT1QiLCAi\nTlVMTCIsICJPTiIsICJPUkRFUiIsICJQUklNQVJZIiwKICAgICAgICAgICAg\nIlJPV05VTSIsICJTRUxFQ1QiLCAiU1lTREFURSIsICJTWVNUSU1FIiwgIlNZ\nU1RJTUVTVEFNUCIsICJUT0RBWSIsCiAgICAgICAgICAgICJUUlVFIiwgIlVO\nSU9OIiwgIldIRVJFIiAKICAgICAgICAgICAgfSkpOwogICAgfQoKICAgIHB1\nYmxpYyBpbnQgZ2V0SkRCQ1R5cGUoaW50IG1ldGFUeXBlQ29kZSwgYm9vbGVh\nbiBsb2IpIHsKICAgICAgICBpbnQgdHlwZSA9IHN1cGVyLmdldEpEQkNUeXBl\nKG1ldGFUeXBlQ29kZSwgbG9iKTsKICAgICAgICBzd2l0Y2ggKHR5cGUpIHsK\nICAgICAgICBjYXNlIFR5cGVzLkJJR0lOVDoKICAgICAgICAgICAgaWYgKG1l\ndGFUeXBlQ29kZSA9PSBKYXZhVHlwZXMuQklHSU5URUdFUikKICAgICAgICAg\nICAgICAgIHJldHVybiBUeXBlcy5OVU1FUklDOwogICAgICAgICAgICBicmVh\nazsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHR5cGU7CiAgICB9CgogICAg\ncHVibGljIGludCBnZXRQcmVmZXJyZWRUeXBlKGludCB0eXBlKSB7CiAgICAg\nICAgcmV0dXJuIHN1cGVyLmdldFByZWZlcnJlZFR5cGUodHlwZSk7CiAgICB9\nCgogICAgcHVibGljIFN0cmluZ1tdIGdldEFkZFByaW1hcnlLZXlTUUwoUHJp\nbWFyeUtleSBwaykgewogICAgICAgIHJldHVybiBuZXcgU3RyaW5nWzBdOwog\nICAgfQoKICAgIHB1YmxpYyBTdHJpbmdbXSBnZXREcm9wUHJpbWFyeUtleVNR\nTChQcmltYXJ5S2V5IHBrKSB7CiAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmdb\nMF07CiAgICB9CgogICAgcHVibGljIFN0cmluZ1tdIGdldEFkZENvbHVtblNR\nTChDb2x1bW4gY29sdW1uKSB7CiAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmdb\nXSB7IAogICAgICAgICAgICAiQUxURVIgVEFCTEUgIiArIGdldEZ1bGxOYW1l\nKGNvbHVtbi5nZXRUYWJsZSgpLCBmYWxzZSkgCiAgICAgICAgICAgICAgICAr\nICIgQUREIENPTFVNTiAiICsgZ2V0RGVjbGFyZUNvbHVtblNRTChjb2x1bW4s\nIHRydWUpIAogICAgICAgIH07CiAgICB9CgogICAgcHVibGljIFN0cmluZ1td\nIGdldENyZWF0ZVRhYmxlU1FMKFRhYmxlIHRhYmxlKSB7CiAgICAgICAgU3Ry\naW5nQnVmZmVyIGJ1ZiA9IG5ldyBTdHJpbmdCdWZmZXIoKTsKICAgICAgICBi\ndWYuYXBwZW5kKCJDUkVBVEUgVEFCTEUgIikuYXBwZW5kKGdldEZ1bGxOYW1l\nKHRhYmxlLCBmYWxzZSkpCiAgICAgICAgICAgIC5hcHBlbmQoIiAoIik7Cgog\nICAgICAgIENvbHVtbltdIGNvbHMgPSB0YWJsZS5nZXRDb2x1bW5zKCk7CiAg\nICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb2xzLmxlbmd0aDsgaSsrKSB7\nCiAgICAgICAgICAgIGlmIChpID4gMCkKICAgICAgICAgICAgICAgIGJ1Zi5h\ncHBlbmQoIiwgIik7CiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoZ2V0RGVjbGFy\nZUNvbHVtblNRTChjb2xzW2ldLCBmYWxzZSkpOwogICAgICAgIH0KCiAgICAg\nICAgUHJpbWFyeUtleSBwayA9IHRhYmxlLmdldFByaW1hcnlLZXkoKTsKICAg\nICAgICBTdHJpbmcgcGtTdHI7CiAgICAgICAgaWYgKHBrICE9IG51bGwpIHsK\nICAgICAgICAgICAgcGtTdHIgPSBnZXRQcmltYXJ5S2V5Q29uc3RyYWludFNR\nTChwayk7CiAgICAgICAgICAgIGlmICghU3RyaW5nVXRpbHMuaXNFbXB0eShw\na1N0cikpCiAgICAgICAgICAgICAgICBidWYuYXBwZW5kKCIsICIpLmFwcGVu\nZChwa1N0cik7CiAgICAgICAgfQoKICAgICAgICBVbmlxdWVbXSB1bnFzID0g\ndGFibGUuZ2V0VW5pcXVlcygpOwogICAgICAgIFN0cmluZyB1bnFTdHI7CiAg\nICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCB1bnFzLmxlbmd0aDsgaSsrKSB7\nCiAgICAgICAgICAgIHVucVN0ciA9IGdldFVuaXF1ZUNvbnN0cmFpbnRTUUwo\ndW5xc1tpXSk7CiAgICAgICAgICAgIGlmICh1bnFTdHIgIT0gbnVsbCkKICAg\nICAgICAgICAgICAgIGJ1Zi5hcHBlbmQoIiwgIikuYXBwZW5kKHVucVN0cik7\nCiAgICAgICAgfQoKICAgICAgICBidWYuYXBwZW5kKCIpIik7CiAgICAgICAg\ncmV0dXJuIG5ldyBTdHJpbmdbXSB7IGJ1Zi50b1N0cmluZygpIH07CiAgICB9\nCgogICAgcHJvdGVjdGVkIFN0cmluZyBnZXRQcmltYXJ5S2V5Q29uc3RyYWlu\ndFNRTChQcmltYXJ5S2V5IHBrKSB7CiAgICAgICAgQ29sdW1uW10gY29scyA9\nIHBrLmdldENvbHVtbnMoKTsKICAgICAgICBpZiAoY29scy5sZW5ndGggPT0g\nMSAmJiBjb2xzWzBdLmlzQXV0b0Fzc2lnbmVkKCkpCiAgICAgICAgICAgIHJl\ndHVybiBudWxsOwogICAgICAgIHJldHVybiBzdXBlci5nZXRQcmltYXJ5S2V5\nQ29uc3RyYWludFNRTChwayk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4g\naXNTeXN0ZW1JbmRleChTdHJpbmcgbmFtZSwgVGFibGUgdGFibGUpIHsKICAg\nICAgICByZXR1cm4gbmFtZS50b1VwcGVyQ2FzZShMb2NhbGUuRU5HTElTSCku\nc3RhcnRzV2l0aCgiU1lTVEVNXyIpOwogICAgfQoKICAgIHByb3RlY3RlZCBT\ndHJpbmcgZ2V0U2VxdWVuY2VzU1FMKFN0cmluZyBzY2hlbWFOYW1lLCBTdHJp\nbmcgc2VxdWVuY2VOYW1lKSB7CiAgICAgICAgU3RyaW5nQnVmZmVyIGJ1ZiA9\nIG5ldyBTdHJpbmdCdWZmZXIoKTsKICAgICAgICBidWYuYXBwZW5kKCJTRUxF\nQ1QgU0VRVUVOQ0VfU0NIRU1BLCBTRVFVRU5DRV9OQU1FIEZST00gIikKICAg\nICAgICAgICAgLmFwcGVuZCgiSU5GT1JNQVRJT05fU0NIRU1BLlNFUVVFTkNF\nUyIpOwogICAgICAgIGlmIChzY2hlbWFOYW1lICE9IG51bGwgfHwgc2VxdWVu\nY2VOYW1lICE9IG51bGwpCiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoIiBXSEVS\nRSAiKTsKICAgICAgICBpZiAoc2NoZW1hTmFtZSAhPSBudWxsKSB7CiAgICAg\nICAgICAgIGJ1Zi5hcHBlbmQoIlNFUVVFTkNFX1NDSEVNQSA9ID8iKTsKICAg\nICAgICAgICAgaWYgKHNlcXVlbmNlTmFtZSAhPSBudWxsKQogICAgICAgICAg\nICAgICAgYnVmLmFwcGVuZCgiIEFORCAiKTsKICAgICAgICB9CiAgICAgICAg\naWYgKHNlcXVlbmNlTmFtZSAhPSBudWxsKQogICAgICAgICAgICBidWYuYXBw\nZW5kKCJTRVFVRU5DRV9OQU1FID0gPyIpOwogICAgICAgIHJldHVybiBidWYu\ndG9TdHJpbmcoKTsKICAgIH0KCiAgICBwdWJsaWMgQ29sdW1uW10gZ2V0Q29s\ndW1ucyhEYXRhYmFzZU1ldGFEYXRhIG1ldGEsIFN0cmluZyBjYXRhbG9nLAog\nICAgICAgIFN0cmluZyBzY2hlbWFOYW1lLCBTdHJpbmcgdGFibGVOYW1lLCBT\ndHJpbmcgY29sdW1uTmFtZSwgQ29ubmVjdGlvbiBjb25uKQogICAgICAgIHRo\ncm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIENvbHVtbltdIGNvbHMgPSBz\ndXBlci5nZXRDb2x1bW5zKG1ldGEsIGNhdGFsb2csIHNjaGVtYU5hbWUsIHRh\nYmxlTmFtZSwgCiAgICAgICAgICAgIGNvbHVtbk5hbWUsIGNvbm4pOwogICAg\nICAgIHJldHVybiBjb2xzOwogICAgfQoKICAgIHByb3RlY3RlZCB2b2lkIGFw\ncGVuZFNlbGVjdFJhbmdlKFNRTEJ1ZmZlciBidWYsIGxvbmcgc3RhcnQsIGxv\nbmcgZW5kLAogICAgICAgIGJvb2xlYW4gc3Vic2VsZWN0KSB7CiAgICAgICAg\naWYgKGVuZCAhPSBMb25nLk1BWF9WQUxVRSkKICAgICAgICAgICAgYnVmLmFw\ncGVuZCgiIExJTUlUICIpLmFwcGVuZFZhbHVlKGVuZCAtIHN0YXJ0KTsKICAg\nICAgICBpZiAoc3RhcnQgIT0gMCkKICAgICAgICAgICAgYnVmLmFwcGVuZCgi\nIE9GRlNFVCAiKS5hcHBlbmRWYWx1ZShzdGFydCk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgc3Vic3RyaW5nKFNRTEJ1ZmZlciBidWYsIEZpbHRlclZhbHVl\nIHN0ciwgRmlsdGVyVmFsdWUgc3RhcnQsCiAgICAgICAgRmlsdGVyVmFsdWUg\nZW5kKSB7CiAgICAgICAgYnVmLmFwcGVuZCgiU1VCU1RSKCIpOwogICAgICAg\nIHN0ci5hcHBlbmRUbyhidWYpOwogICAgICAgIGJ1Zi5hcHBlbmQoIiwgKCIp\nOwogICAgICAgIHN0YXJ0LmFwcGVuZFRvKGJ1Zik7CiAgICAgICAgYnVmLmFw\ncGVuZCgiICsgMSkiKTsKICAgICAgICBpZiAoZW5kICE9IG51bGwpIHsKICAg\nICAgICAgICAgYnVmLmFwcGVuZCgiLCAoIik7CiAgICAgICAgICAgIGVuZC5h\ncHBlbmRUbyhidWYpOwogICAgICAgICAgICBidWYuYXBwZW5kKCIgLSAiKTsK\nICAgICAgICAgICAgc3RhcnQuYXBwZW5kVG8oYnVmKTsKICAgICAgICAgICAg\nYnVmLmFwcGVuZCgiKSIpOwogICAgICAgIH0KICAgICAgICBidWYuYXBwZW5k\nKCIpIik7CiAgICB9CgogICAgcHVibGljIHZvaWQgaW5kZXhPZihTUUxCdWZm\nZXIgYnVmLCBGaWx0ZXJWYWx1ZSBzdHIsIEZpbHRlclZhbHVlIGZpbmQsCiAg\nICAgICAgRmlsdGVyVmFsdWUgc3RhcnQpIHsKICAgICAgICBidWYuYXBwZW5k\nKCIoUE9TSVRJT04oIik7CiAgICAgICAgZmluZC5hcHBlbmRUbyhidWYpOwog\nICAgICAgIGJ1Zi5hcHBlbmQoIiBJTiAiKTsKICAgICAgICBpZiAoc3RhcnQg\nIT0gbnVsbCkKICAgICAgICAgICAgc3Vic3RyaW5nKGJ1Ziwgc3RyLCBzdGFy\ndCwgbnVsbCk7CiAgICAgICAgZWxzZQogICAgICAgICAgICBzdHIuYXBwZW5k\nVG8oYnVmKTsKICAgICAgICBidWYuYXBwZW5kKCIpIC0gMSIpOwogICAgICAg\nIGlmIChzdGFydCAhPSBudWxsKSB7CiAgICAgICAgICAgIGJ1Zi5hcHBlbmQo\nIiArICIpOwogICAgICAgICAgICBzdGFydC5hcHBlbmRUbyhidWYpOwogICAg\nICAgIH0KICAgICAgICBidWYuYXBwZW5kKCIpIik7CiAgICB9Cn0K\n","encoding":"base64"}

