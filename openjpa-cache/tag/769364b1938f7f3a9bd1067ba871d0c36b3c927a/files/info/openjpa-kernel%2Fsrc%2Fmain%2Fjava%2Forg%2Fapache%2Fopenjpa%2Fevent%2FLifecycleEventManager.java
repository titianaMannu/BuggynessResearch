{"sha":"427bc598d6e9f88231e99cefa8a10c4ea3966e2a","node_id":"MDQ6QmxvYjIwNjM2NDo0MjdiYzU5OGQ2ZTlmODgyMzFlOTljZWZhOGExMGM0ZWEzOTY2ZTJh","size":26088,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/427bc598d6e9f88231e99cefa8a10c4ea3966e2a","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuZXZlbnQ7CgppbXBvcnQgamF2\nYS51dGlsLkFycmF5TGlzdDsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9u\nOwppbXBvcnQgamF2YS51dGlsLkhhc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwu\nSXRlcmF0b3I7CmltcG9ydCBqYXZhLnV0aWwuTGlua2VkTGlzdDsKaW1wb3J0\nIGphdmEudXRpbC5MaXN0OwppbXBvcnQgamF2YS51dGlsLk1hcDsKCmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5DbGFzc01ldGFEYXRhOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuTWV0YURhdGFEZWZhdWx0czsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIubG9nLkxvZzsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6ZXI7CgovKioK\nICogTWFuYWdlciB0aGF0IGNhbiBiZSB1c2VkIHRvIHRyYWNrIGFuZCBub3Rp\nZnkgbGlzdGVuZXJzIG9uIGxpZmVjeWNsZSBldmVudHMuCiAqICBUaGlzIGNs\nYXNzIGlzIG9wdGltaXplZCBmb3IgZXZlbnQgZmlyaW5nIHJhdGhlciB0aGFu\nIGZvciBhZGRpbmcgYW5kCiAqIHJlbW92aW5nIGxpc3RlbmVycywgd2hpY2gg\nYXJlIE8obikgb3BlcmF0aW9ucy4gVGhpcyBjbGFzcyBhbHNvIGRvZXMgbm90\nCiAqIG1haW50YWluIHBlcmZlY3Qgc2V0IHNlbWFudGljcyBmb3IgbGlzdGVu\nZXJzOyBpdCBpcyBwb3NzaWJsZSB0byB3aW5kIHVwCiAqIGhhdmluZyB0aGUg\nc2FtZSBsaXN0ZW5lciBpbnZva2VkIG11bHRpcGxlIHRpbWVzIGZvciBhIHNp\nbmdsZSBldmVudCBpZiBpdAogKiBpcyBhZGRlZCB0byB0aGlzIG1hbmFnZXIg\nbXVsdGlwbGUgdGltZXMgd2l0aCBkaWZmZXJlbnQgY2xhc3Nlcywgb3Igd2l0\naAogKiBhIGJhc2UgY2xhc3MgYW5kIGl0cyBzdWJjbGFzcy4KICoKICogQGF1\ndGhvciBTdGV2ZSBLaW0KICogQGF1dGhvciBBYmUgV2hpdGUKICogQHNpbmNl\nIDAuMy4zCiAqIEBub2phdmFkb2MKICovCnB1YmxpYyBjbGFzcyBMaWZlY3lj\nbGVFdmVudE1hbmFnZXIKICAgIGltcGxlbWVudHMgQ2FsbGJhY2tNb2RlcyB7\nCgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgRXhjZXB0aW9uW10gRU1QVFlf\nRVhDRVBUSU9OUyA9IG5ldyBFeGNlcHRpb25bMF07CgogICAgcHJpdmF0ZSBz\ndGF0aWMgZmluYWwgTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6ZXIuZm9yUGFj\na2FnZSgKICAgICAgICBMaWZlY3ljbGVFdmVudE1hbmFnZXIuY2xhc3MpOwoK\nICAgIHByaXZhdGUgTWFwIF9jbGFzc0xpc3RlbmVycyA9IG51bGw7IC8vIGNs\nYXNzIC0+IGxpc3RlbmVyIGxpc3QKICAgIHByaXZhdGUgTGlzdGVuZXJMaXN0\nIF9saXN0ZW5lcnMgPSBudWxsOwogICAgcHJpdmF0ZSBMaXN0IF9hZGRMaXN0\nZW5lcnMgPSBuZXcgTGlua2VkTGlzdCgpOwogICAgcHJpdmF0ZSBMaXN0IF9y\nZW1MaXN0ZW5lcnMgPSBuZXcgTGlua2VkTGlzdCgpOwogICAgcHJpdmF0ZSBM\naXN0IF9leGNlcHMgPSBuZXcgTGlua2VkTGlzdCgpOwogICAgcHJpdmF0ZSBi\nb29sZWFuIF9maXJpbmcgPSBmYWxzZTsKICAgIHByaXZhdGUgYm9vbGVhbiBf\nZmFpbCA9IGZhbHNlOwogICAgcHJpdmF0ZSBib29sZWFuIF9mYWlsRmFzdCA9\nIGZhbHNlOwogICAgcHJpdmF0ZSBmaW5hbCBMb2cgX2xvZzsKCiAgICBwdWJs\naWMgTGlmZWN5Y2xlRXZlbnRNYW5hZ2VyKExvZyBsb2cpIHsKICAgICAgICBf\nbG9nID0gbG9nOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciB0byBm\nYWlsIGFmdGVyIGZpcnN0IGV4Y2VwdGlvbiB3aGVuIGZpcmluZyBldmVudHMg\ndG8gbGlzdGVuZXJzLgogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBpc0Zh\naWxGYXN0KCkgewogICAgICAgIHJldHVybiBfZmFpbEZhc3Q7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBXaGV0aGVyIHRvIGZhaWwgYWZ0ZXIgZmlyc3QgZXhj\nZXB0aW9uIHdoZW4gZmlyaW5nIGV2ZW50cyB0byBsaXN0ZW5lcnMuCiAgICAg\nKi8KICAgIHB1YmxpYyB2b2lkIHNldEZhaWxGYXN0KGJvb2xlYW4gZmFpbEZh\nc3QpIHsKICAgICAgICBfZmFpbEZhc3QgPSBmYWlsRmFzdDsKICAgIH0KCiAg\nICAvKioKICAgICAqIFJlZ2lzdGVyIGEgbGlmZWN5Y2xlIGxpc3RlbmVyIGZv\nciB0aGUgZ2l2ZW4gY2xhc3Nlcy4gSWYgdGhlIGNsYXNzZXMKICAgICAqIGFy\ncmF5IGlzIG51bGwsIHJlZ2lzdGVyIGZvciBhbGwgY2xhc3Nlcy4KICAgICAq\nLwogICAgcHVibGljIHN5bmNocm9uaXplZCB2b2lkIGFkZExpc3RlbmVyKE9i\namVjdCBsaXN0ZW5lciwgQ2xhc3NbXSBjbGFzc2VzKSB7CiAgICAgICAgaWYg\nKGxpc3RlbmVyID09IG51bGwpCiAgICAgICAgICAgIHJldHVybjsKICAgICAg\nICBpZiAoY2xhc3NlcyAhPSBudWxsICYmIGNsYXNzZXMubGVuZ3RoID09IDAp\nCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBpZiAoX2ZpcmluZykgewog\nICAgICAgICAgICBfYWRkTGlzdGVuZXJzLmFkZChsaXN0ZW5lcik7CiAgICAg\nICAgICAgIF9hZGRMaXN0ZW5lcnMuYWRkKGNsYXNzZXMpOwogICAgICAgICAg\nICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAoY2xhc3NlcyA9PSBu\ndWxsKSB7CiAgICAgICAgICAgIGlmIChfbGlzdGVuZXJzID09IG51bGwpCiAg\nICAgICAgICAgICAgICBfbGlzdGVuZXJzID0gbmV3IExpc3RlbmVyTGlzdCg1\nKTsKICAgICAgICAgICAgX2xpc3RlbmVycy5hZGQobGlzdGVuZXIpOwogICAg\nICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAoX2NsYXNz\nTGlzdGVuZXJzID09IG51bGwpCiAgICAgICAgICAgIF9jbGFzc0xpc3RlbmVy\ncyA9IG5ldyBIYXNoTWFwKCk7CiAgICAgICAgTGlzdGVuZXJMaXN0IGxpc3Rl\nbmVyczsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNsYXNzZXMubGVu\nZ3RoOyBpKyspIHsKICAgICAgICAgICAgbGlzdGVuZXJzID0gKExpc3RlbmVy\nTGlzdCkgX2NsYXNzTGlzdGVuZXJzLmdldChjbGFzc2VzW2ldKTsKICAgICAg\nICAgICAgaWYgKGxpc3RlbmVycyA9PSBudWxsKSB7CiAgICAgICAgICAgICAg\nICBsaXN0ZW5lcnMgPSBuZXcgTGlzdGVuZXJMaXN0KDMpOwogICAgICAgICAg\nICAgICAgX2NsYXNzTGlzdGVuZXJzLnB1dChjbGFzc2VzW2ldLCBsaXN0ZW5l\ncnMpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxpc3RlbmVycy5hZGQo\nbGlzdGVuZXIpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFJl\nbW92ZSB0aGUgZ2l2ZW4gbGlzdGVuZXIuCiAgICAgKi8KICAgIHB1YmxpYyBz\neW5jaHJvbml6ZWQgdm9pZCByZW1vdmVMaXN0ZW5lcihPYmplY3QgbGlzdGVu\nZXIpIHsKICAgICAgICBpZiAoX2ZpcmluZykgewogICAgICAgICAgICBfcmVt\nTGlzdGVuZXJzLmFkZChsaXN0ZW5lcik7CiAgICAgICAgICAgIHJldHVybjsK\nICAgICAgICB9CgogICAgICAgIGlmIChfbGlzdGVuZXJzICE9IG51bGwgJiYg\nX2xpc3RlbmVycy5yZW1vdmUobGlzdGVuZXIpKQogICAgICAgICAgICByZXR1\ncm47CiAgICAgICAgaWYgKF9jbGFzc0xpc3RlbmVycyAhPSBudWxsKSB7CiAg\nICAgICAgICAgIExpc3RlbmVyTGlzdCBsaXN0ZW5lcnM7CiAgICAgICAgICAg\nIGZvciAoSXRlcmF0b3IgaXRyID0gX2NsYXNzTGlzdGVuZXJzLnZhbHVlcygp\nLml0ZXJhdG9yKCk7CiAgICAgICAgICAgICAgICBpdHIuaGFzTmV4dCgpOykg\newogICAgICAgICAgICAgICAgbGlzdGVuZXJzID0gKExpc3RlbmVyTGlzdCkg\naXRyLm5leHQoKTsKICAgICAgICAgICAgICAgIGxpc3RlbmVycy5yZW1vdmUo\nbGlzdGVuZXIpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAg\nIC8qKgogICAgICogUmV0dXJuIHdoZXRoZXIgdGhlcmUgYXJlIGxpc3RlbmVy\ncyBvciBjYWxsYmFja3MgZm9yIHRoZSBnaXZlbiBzb3VyY2UuCiAgICAgKi8K\nICAgIHB1YmxpYyBib29sZWFuIGhhc1BlcnNpc3RMaXN0ZW5lcnMoT2JqZWN0\nIHNvdXJjZSwgQ2xhc3NNZXRhRGF0YSBtZXRhKSB7CiAgICAgICAgcmV0dXJu\nIGhhc0hhbmRsZXJzKHNvdXJjZSwgbWV0YSwgTGlmZWN5Y2xlRXZlbnQuQkVG\nT1JFX1BFUlNJU1QpCiAgICAgICAgICAgIHx8IGhhc0hhbmRsZXJzKHNvdXJj\nZSwgbWV0YSwgTGlmZWN5Y2xlRXZlbnQuQUZURVJfUEVSU0lTVCkKICAgICAg\nICAgICAgfHwgaGFzSGFuZGxlcnMoc291cmNlLCBtZXRhLAogICAgICAgICAg\nICAgICAgTGlmZWN5Y2xlRXZlbnQuQUZURVJfUEVSU0lTVF9QRVJGT1JNRUQp\nOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHdoZXRoZXIgdGhlcmUg\nYXJlIGxpc3RlbmVycyBvciBjYWxsYmFja3MgZm9yIHRoZSBnaXZlbiBzb3Vy\nY2UuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGhhc0RlbGV0ZUxpc3Rl\nbmVycyhPYmplY3Qgc291cmNlLCBDbGFzc01ldGFEYXRhIG1ldGEpIHsKICAg\nICAgICByZXR1cm4gaGFzSGFuZGxlcnMoc291cmNlLCBtZXRhLCBMaWZlY3lj\nbGVFdmVudC5CRUZPUkVfREVMRVRFKQogICAgICAgICAgICB8fCBoYXNIYW5k\nbGVycyhzb3VyY2UsIG1ldGEsIExpZmVjeWNsZUV2ZW50LkFGVEVSX0RFTEVU\nRSkKICAgICAgICAgICAgfHwgaGFzSGFuZGxlcnMoc291cmNlLCBtZXRhLCBM\naWZlY3ljbGVFdmVudC5BRlRFUl9ERUxFVEVfUEVSRk9STUVEKTsKICAgIH0K\nCiAgICAvKioKICAgICAqIFJldHVybiB3aGV0aGVyIHRoZXJlIGFyZSBsaXN0\nZW5lcnMgb3IgY2FsbGJhY2tzIGZvciB0aGUgZ2l2ZW4gc291cmNlLgogICAg\nICovCiAgICBwdWJsaWMgYm9vbGVhbiBoYXNDbGVhckxpc3RlbmVycyhPYmpl\nY3Qgc291cmNlLCBDbGFzc01ldGFEYXRhIG1ldGEpIHsKICAgICAgICByZXR1\ncm4gaGFzSGFuZGxlcnMoc291cmNlLCBtZXRhLCBMaWZlY3ljbGVFdmVudC5C\nRUZPUkVfQ0xFQVIpCiAgICAgICAgICAgIHx8IGhhc0hhbmRsZXJzKHNvdXJj\nZSwgbWV0YSwgTGlmZWN5Y2xlRXZlbnQuQUZURVJfQ0xFQVIpOwogICAgfQoK\nICAgIC8qKgogICAgICogUmV0dXJuIHdoZXRoZXIgdGhlcmUgYXJlIGxpc3Rl\nbmVycyBvciBjYWxsYmFja3MgZm9yIHRoZSBnaXZlbiBzb3VyY2UuCiAgICAg\nKi8KICAgIHB1YmxpYyBib29sZWFuIGhhc0xvYWRMaXN0ZW5lcnMoT2JqZWN0\nIHNvdXJjZSwgQ2xhc3NNZXRhRGF0YSBtZXRhKSB7CiAgICAgICAgcmV0dXJu\nIGhhc0hhbmRsZXJzKHNvdXJjZSwgbWV0YSwgTGlmZWN5Y2xlRXZlbnQuQUZU\nRVJfTE9BRCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gd2hldGhl\nciB0aGVyZSBhcmUgbGlzdGVuZXJzIG9yIGNhbGxiYWNrcyBmb3IgdGhlIGdp\ndmVuIHNvdXJjZS4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gaGFzU3Rv\ncmVMaXN0ZW5lcnMoT2JqZWN0IHNvdXJjZSwgQ2xhc3NNZXRhRGF0YSBtZXRh\nKSB7CiAgICAgICAgcmV0dXJuIGhhc0hhbmRsZXJzKHNvdXJjZSwgbWV0YSwg\nTGlmZWN5Y2xlRXZlbnQuQkVGT1JFX1NUT1JFKQogICAgICAgICAgICB8fCBo\nYXNIYW5kbGVycyhzb3VyY2UsIG1ldGEsIExpZmVjeWNsZUV2ZW50LkFGVEVS\nX1NUT1JFKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB3aGV0aGVy\nIHRoZXJlIGFyZSBsaXN0ZW5lcnMgb3IgY2FsbGJhY2tzIGZvciB0aGUgZ2l2\nZW4gc291cmNlLgogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBoYXNVcGRh\ndGVMaXN0ZW5lcnMoT2JqZWN0IHNvdXJjZSwgQ2xhc3NNZXRhRGF0YSBtZXRh\nKSB7CiAgICAgICAgcmV0dXJuIGhhc0hhbmRsZXJzKHNvdXJjZSwgbWV0YSwg\nTGlmZWN5Y2xlRXZlbnQuQkVGT1JFX1VQREFURSkKICAgICAgICAgICAgfHwg\naGFzSGFuZGxlcnMoc291cmNlLCBtZXRhLCBMaWZlY3ljbGVFdmVudC5BRlRF\nUl9VUERBVEVfUEVSRk9STUVEKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJl\ndHVybiB3aGV0aGVyIHRoZXJlIGFyZSBsaXN0ZW5lcnMgb3IgY2FsbGJhY2tz\nIGZvciB0aGUgZ2l2ZW4gc291cmNlLgogICAgICovCiAgICBwdWJsaWMgYm9v\nbGVhbiBoYXNEaXJ0eUxpc3RlbmVycyhPYmplY3Qgc291cmNlLCBDbGFzc01l\ndGFEYXRhIG1ldGEpIHsKICAgICAgICByZXR1cm4gaGFzSGFuZGxlcnMoc291\ncmNlLCBtZXRhLCBMaWZlY3ljbGVFdmVudC5CRUZPUkVfRElSVFkpCiAgICAg\nICAgICAgIHx8IGhhc0hhbmRsZXJzKHNvdXJjZSwgbWV0YSwgTGlmZWN5Y2xl\nRXZlbnQuQUZURVJfRElSVFkpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0\ndXJuIHdoZXRoZXIgdGhlcmUgYXJlIGxpc3RlbmVycyBvciBjYWxsYmFja3Mg\nZm9yIHRoZSBnaXZlbiBzb3VyY2UuCiAgICAgKi8KICAgIHB1YmxpYyBib29s\nZWFuIGhhc0RldGFjaExpc3RlbmVycyhPYmplY3Qgc291cmNlLCBDbGFzc01l\ndGFEYXRhIG1ldGEpIHsKICAgICAgICByZXR1cm4gaGFzSGFuZGxlcnMoc291\ncmNlLCBtZXRhLCBMaWZlY3ljbGVFdmVudC5CRUZPUkVfREVUQUNIKQogICAg\nICAgICAgICB8fCBoYXNIYW5kbGVycyhzb3VyY2UsIG1ldGEsIExpZmVjeWNs\nZUV2ZW50LkFGVEVSX0RFVEFDSCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBS\nZXR1cm4gd2hldGhlciB0aGVyZSBhcmUgbGlzdGVuZXJzIG9yIGNhbGxiYWNr\ncyBmb3IgdGhlIGdpdmVuIHNvdXJjZS4KICAgICAqLwogICAgcHVibGljIGJv\nb2xlYW4gaGFzQXR0YWNoTGlzdGVuZXJzKE9iamVjdCBzb3VyY2UsIENsYXNz\nTWV0YURhdGEgbWV0YSkgewogICAgICAgIHJldHVybiBoYXNIYW5kbGVycyhz\nb3VyY2UsIG1ldGEsIExpZmVjeWNsZUV2ZW50LkJFRk9SRV9BVFRBQ0gpCiAg\nICAgICAgICAgIHx8IGhhc0hhbmRsZXJzKHNvdXJjZSwgbWV0YSwgTGlmZWN5\nY2xlRXZlbnQuQUZURVJfQVRUQUNIKTsKICAgIH0KCiAgICBwcml2YXRlIGJv\nb2xlYW4gaGFzSGFuZGxlcnMoT2JqZWN0IHNvdXJjZSwgQ2xhc3NNZXRhRGF0\nYSBtZXRhLCBpbnQgdHlwZSkgewogICAgICAgIHJldHVybiBoYXNDYWxsYmFj\na3Moc291cmNlLCBtZXRhLCB0eXBlKQogICAgICAgICAgICB8fCBoYXNMaXN0\nZW5lcnMoc291cmNlLCBtZXRhLCB0eXBlKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIFJldHVybiB0cnVlIGlmIGFueSBjYWxsYmFja3MgYXJlIHJlZ2lzdGVy\nZWQgZm9yIHRoZSBnaXZlbiBzb3VyY2UgYW5kCiAgICAgKiBldmVudCB0eXBl\nLgogICAgICovCiAgICBwcml2YXRlIGJvb2xlYW4gaGFzQ2FsbGJhY2tzKE9i\namVjdCBzb3VyY2UsIENsYXNzTWV0YURhdGEgbWV0YSwgaW50IHR5cGUpIHsK\nICAgICAgICBMaWZlY3ljbGVDYWxsYmFja3NbXSBjYWxsYmFja3MgPSBtZXRh\nLmdldExpZmVjeWNsZU1ldGFEYXRhKCkuCiAgICAgICAgICAgIGdldENhbGxi\nYWNrcyh0eXBlKTsKICAgICAgICBpZiAoY2FsbGJhY2tzLmxlbmd0aCA9PSAw\nKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgZm9yIChpbnQg\naSA9IDA7IGkgPCBjYWxsYmFja3MubGVuZ3RoOyBpKyspCiAgICAgICAgICAg\nIGlmIChjYWxsYmFja3NbaV0uaGFzQ2FsbGJhY2soc291cmNlLCB0eXBlKSkK\nICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIHJldHVybiBm\nYWxzZTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0cnVlIGlmIGFu\neSBsaXN0ZW5lcnMgYXJlIHJlZ2lzdGVyZWQgZm9yIHRoZSBnaXZlbiBzb3Vy\nY2UgYW5kCiAgICAgKiBldmVudCB0eXBlLgogICAgICovCiAgICBwcml2YXRl\nIHN5bmNocm9uaXplZCBib29sZWFuIGhhc0xpc3RlbmVycyhPYmplY3Qgc291\ncmNlLAogICAgICAgIENsYXNzTWV0YURhdGEgbWV0YSwgaW50IHR5cGUpIHsK\nICAgICAgICBpZiAobWV0YS5nZXRMaWZlY3ljbGVNZXRhRGF0YSgpLmdldEln\nbm9yZVN5c3RlbUxpc3RlbmVycygpKQogICAgICAgICAgICByZXR1cm4gZmFs\nc2U7CiAgICAgICAgaWYgKGZpcmVFdmVudChudWxsLCBzb3VyY2UsIG51bGws\nIHR5cGUsIF9saXN0ZW5lcnMsIHRydWUsIG51bGwpIAogICAgICAgICAgICA9\nPSBCb29sZWFuLlRSVUUpCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAg\nICAgIExpc3RlbmVyTGlzdCBzeXN0ZW0gPSBtZXRhLmdldFJlcG9zaXRvcnko\nKS5nZXRTeXN0ZW1MaXN0ZW5lcnMoKTsKICAgICAgICBpZiAoIXN5c3RlbS5p\nc0VtcHR5KCkgJiYgZmlyZUV2ZW50KG51bGwsIHNvdXJjZSwgbnVsbCwgdHlw\nZSwgc3lzdGVtLAogICAgICAgICAgICB0cnVlLCBudWxsKSA9PSBCb29sZWFu\nLlRSVUUpCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIGlmIChf\nY2xhc3NMaXN0ZW5lcnMgIT0gbnVsbCkgewogICAgICAgICAgICBDbGFzcyBj\nID0gc291cmNlID09IG51bGwgPyBtZXRhLmdldERlc2NyaWJlZFR5cGUoKSA6\nCiAgICAgICAgICAgICAgICBzb3VyY2UuZ2V0Q2xhc3MoKTsKICAgICAgICAg\nICAgZG8gewogICAgICAgICAgICAgICAgaWYgKGZpcmVFdmVudChudWxsLCBz\nb3VyY2UsIG51bGwsIHR5cGUsIChMaXN0ZW5lckxpc3QpCiAgICAgICAgICAg\nICAgICAgICAgX2NsYXNzTGlzdGVuZXJzLmdldChjKSwgdHJ1ZSwgbnVsbCkg\nPT0gQm9vbGVhbi5UUlVFKQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0\ncnVlOwogICAgICAgICAgICAgICAgYyA9IGMuZ2V0U3VwZXJjbGFzcygpOwog\nICAgICAgICAgICB9IHdoaWxlIChjICE9IG51bGwgJiYgYyAhPSBPYmplY3Qu\nY2xhc3MpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBGaXJlIGxpZmVjeWNsZSBldmVudCB0byBhbGwg\ncmVnaXN0ZXJlZCBsaXN0ZW5lcnMgd2l0aG91dCBhbiBhcmd1bWVudC4KICAg\nICAqLwogICAgcHVibGljIEV4Y2VwdGlvbltdIGZpcmVFdmVudChPYmplY3Qg\nc291cmNlLAogICAgICAgIENsYXNzTWV0YURhdGEgbWV0YSwgaW50IHR5cGUp\nIHsKICAgICAgICByZXR1cm4gZmlyZUV2ZW50KHNvdXJjZSwgbnVsbCwgbWV0\nYSwgdHlwZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBGaXJlIGxpZmVjeWNs\nZSBldmVudCB0byBhbGwgcmVnaXN0ZXJlZCBsaXN0ZW5lcnMuCiAgICAgKi8K\nICAgIHB1YmxpYyBzeW5jaHJvbml6ZWQgRXhjZXB0aW9uW10gZmlyZUV2ZW50\nKE9iamVjdCBzb3VyY2UsIE9iamVjdCByZWxhdGVkLAogICAgICAgIENsYXNz\nTWV0YURhdGEgbWV0YSwgaW50IHR5cGUpIHsKICAgICAgICBib29sZWFuIHJl\nZW50cmFudCA9IF9maXJpbmc7CiAgICAgICAgX2ZpcmluZyA9IHRydWU7CiAg\nICAgICAgTGlzdCBleGNlcHRpb25zID0gKHJlZW50cmFudCkgPyBuZXcgTGlu\na2VkTGlzdCgpIDogX2V4Y2VwczsKICAgICAgICBNZXRhRGF0YURlZmF1bHRz\nIGRlZiA9IG1ldGEuZ2V0UmVwb3NpdG9yeSgpLmdldE1ldGFEYXRhRmFjdG9y\neSgpLgogICAgICAgICAgICBnZXREZWZhdWx0cygpOwoKICAgICAgICBib29s\nZWFuIGNhbGxiYWNrcyA9IGRlZi5nZXRDYWxsYmFja3NCZWZvcmVMaXN0ZW5l\ncnModHlwZSk7CiAgICAgICAgaWYgKGNhbGxiYWNrcykKICAgICAgICAgICAg\nbWFrZUNhbGxiYWNrcyhzb3VyY2UsIHJlbGF0ZWQsIG1ldGEsIHR5cGUsIGV4\nY2VwdGlvbnMpOwoKICAgICAgICBMaWZlY3ljbGVFdmVudCBldiA9IChMaWZl\nY3ljbGVFdmVudCkgZmlyZUV2ZW50KG51bGwsIHNvdXJjZSwgcmVsYXRlZCwK\nICAgICAgICAgICAgdHlwZSwgX2xpc3RlbmVycywgZmFsc2UsIGV4Y2VwdGlv\nbnMpOwoKICAgICAgICBpZiAoX2NsYXNzTGlzdGVuZXJzICE9IG51bGwpIHsK\nICAgICAgICAgICAgQ2xhc3MgYyA9IHNvdXJjZSA9PSBudWxsID8gbWV0YS5n\nZXREZXNjcmliZWRUeXBlKCkgOgogICAgICAgICAgICAgICAgc291cmNlLmdl\ndENsYXNzKCk7CiAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgIGV2\nID0gKExpZmVjeWNsZUV2ZW50KSBmaXJlRXZlbnQoZXYsIHNvdXJjZSwgcmVs\nYXRlZCwgdHlwZSwKICAgICAgICAgICAgICAgICAgICAoTGlzdGVuZXJMaXN0\nKSBfY2xhc3NMaXN0ZW5lcnMuZ2V0KGMpLCBmYWxzZSwgZXhjZXB0aW9ucyk7\nCiAgICAgICAgICAgICAgICBjID0gYy5nZXRTdXBlcmNsYXNzKCk7CiAgICAg\nICAgICAgIH0gd2hpbGUgKGMgIT0gbnVsbCAmJiBjICE9IE9iamVjdC5jbGFz\ncyk7CiAgICAgICAgfQoKICAgICAgICAvLyBtYWtlIHN5c3RlbSBsaXN0ZW5l\ncnMKICAgICAgICBpZiAoIW1ldGEuZ2V0TGlmZWN5Y2xlTWV0YURhdGEoKS5n\nZXRJZ25vcmVTeXN0ZW1MaXN0ZW5lcnMoKSkgewogICAgICAgICAgICBMaXN0\nZW5lckxpc3Qgc3lzdGVtID0gbWV0YS5nZXRSZXBvc2l0b3J5KCkuZ2V0U3lz\ndGVtTGlzdGVuZXJzKCk7CiAgICAgICAgICAgIGZpcmVFdmVudChldiwgc291\ncmNlLCByZWxhdGVkLCB0eXBlLCBzeXN0ZW0sIGZhbHNlLCBleGNlcHRpb25z\nKTsKICAgICAgICB9CgogICAgICAgIGlmICghY2FsbGJhY2tzKQogICAgICAg\nICAgICBtYWtlQ2FsbGJhY2tzKHNvdXJjZSwgcmVsYXRlZCwgbWV0YSwgdHlw\nZSwgZXhjZXB0aW9ucyk7CgogICAgICAgIC8vIGNyZWF0ZSByZXR1cm4gYXJy\nYXkgYmVmb3JlIGNsZWFyaW5nIGV4Y2VwdGlvbnMKICAgICAgICBFeGNlcHRp\nb25bXSByZXQ7CiAgICAgICAgaWYgKGV4Y2VwdGlvbnMuaXNFbXB0eSgpKQog\nICAgICAgICAgICByZXQgPSBFTVBUWV9FWENFUFRJT05TOwogICAgICAgIGVs\nc2UKICAgICAgICAgICAgcmV0ID0gKEV4Y2VwdGlvbltdKSBleGNlcHRpb25z\nLnRvQXJyYXkKICAgICAgICAgICAgICAgIChuZXcgRXhjZXB0aW9uW2V4Y2Vw\ndGlvbnMuc2l6ZSgpXSk7CgogICAgICAgIC8vIGlmIHRoaXMgd2Fzbid0IGEg\ncmVlbnRyYW50IGNhbGwsIGNhdGNoIHVwIHdpdGggY2FsbHMgdG8gYWRkCiAg\nICAgICAgLy8gYW5kIHJlbW92ZSBsaXN0ZW5lcnMgbWFkZSB3aGlsZSBmaXJp\nbmcKICAgICAgICBpZiAoIXJlZW50cmFudCkgewogICAgICAgICAgICBfZmly\naW5nID0gZmFsc2U7CiAgICAgICAgICAgIF9mYWlsID0gZmFsc2U7CiAgICAg\nICAgICAgIGlmICghX2FkZExpc3RlbmVycy5pc0VtcHR5KCkpCiAgICAgICAg\nICAgICAgICBmb3IgKEl0ZXJhdG9yIGl0ciA9IF9hZGRMaXN0ZW5lcnMuaXRl\ncmF0b3IoKTsgaXRyLmhhc05leHQoKTspCiAgICAgICAgICAgICAgICAgICAg\nYWRkTGlzdGVuZXIoaXRyLm5leHQoKSwgKENsYXNzW10pIGl0ci5uZXh0KCkp\nOwogICAgICAgICAgICBpZiAoIV9yZW1MaXN0ZW5lcnMuaXNFbXB0eSgpKQog\nICAgICAgICAgICAgICAgZm9yIChJdGVyYXRvciBpdHIgPSBfcmVtTGlzdGVu\nZXJzLml0ZXJhdG9yKCk7IGl0ci5oYXNOZXh0KCk7KQogICAgICAgICAgICAg\nICAgICAgIHJlbW92ZUxpc3RlbmVyKGl0ci5uZXh0KCkpOwogICAgICAgICAg\nICBfYWRkTGlzdGVuZXJzLmNsZWFyKCk7CiAgICAgICAgICAgIF9yZW1MaXN0\nZW5lcnMuY2xlYXIoKTsKICAgICAgICAgICAgX2V4Y2Vwcy5jbGVhcigpOwog\nICAgICAgIH0KICAgICAgICByZXR1cm4gcmV0OwogICAgfQoKICAgIC8qKgog\nICAgICogTWFrZSBjYWxsYmFja3MsIHJlY29yZGluZyBhbnkgZXhjZXB0aW9u\ncyBpbiB0aGUgZ2l2ZW4gY29sbGVjdGlvbi4KICAgICAqLwogICAgcHJpdmF0\nZSB2b2lkIG1ha2VDYWxsYmFja3MoT2JqZWN0IHNvdXJjZSwgT2JqZWN0IHJl\nbGF0ZWQsCiAgICAgICAgQ2xhc3NNZXRhRGF0YSBtZXRhLCBpbnQgdHlwZSwg\nQ29sbGVjdGlvbiBleGNlcHRpb25zKSB7CiAgICAgICAgLy8gbWFrZSBsaWZl\nY3ljbGUgY2FsbGJhY2tzCiAgICAgICAgTGlmZWN5Y2xlQ2FsbGJhY2tzW10g\nY2FsbGJhY2tzID0gbWV0YS5nZXRMaWZlY3ljbGVNZXRhRGF0YSgpLgogICAg\nICAgICAgICBnZXRDYWxsYmFja3ModHlwZSk7CiAgICAgICAgZm9yIChpbnQg\naSA9IDA7ICFfZmFpbCAmJiBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7\nCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjYWxsYmFja3Nb\naV0ubWFrZUNhbGxiYWNrKHNvdXJjZSwgcmVsYXRlZCwgdHlwZSk7CiAgICAg\nICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAg\nICBleGNlcHRpb25zLmFkZChlKTsKICAgICAgICAgICAgICAgIGlmIChfZmFp\nbEZhc3QpCiAgICAgICAgICAgICAgICAgICAgX2ZhaWwgPSB0cnVlOwogICAg\nICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogRmly\nZSBhbiBldmVudCB3aXRoIHRoZSBnaXZlbiBzb3VyY2UgYW5kIHR5cGUgdG8g\ndGhlIGdpdmVuIGxpc3Qgb2YKICAgICAqIGxpc3RlbmVycy4gVGhlIGV2ZW50\nIG1heSBoYXZlIGFscmVhZHkgYmVlbiBjb25zdHJ1Y3RlZC4KICAgICAqLwog\nICAgcHJpdmF0ZSBPYmplY3QgZmlyZUV2ZW50KExpZmVjeWNsZUV2ZW50IGV2\nLCBPYmplY3Qgc291cmNlLCBPYmplY3QgcmVsLAogICAgICAgIGludCB0eXBl\nLCBMaXN0ZW5lckxpc3QgbGlzdGVuZXJzLCBib29sZWFuIG1vY2ssIExpc3Qg\nZXhjZXB0aW9ucykgewogICAgICAgIGlmIChsaXN0ZW5lcnMgPT0gbnVsbCB8\nfCAhbGlzdGVuZXJzLmhhc0xpc3RlbmVycyh0eXBlKSkKICAgICAgICAgICAg\ncmV0dXJuIG51bGw7CgogICAgICAgIE9iamVjdCBsaXN0ZW5lcjsKICAgICAg\nICBib29sZWFuIHJlc3BvbmRzOwogICAgICAgIGZvciAoaW50IGkgPSAwLCBz\naXplID0gbGlzdGVuZXJzLnNpemUoKTsgIV9mYWlsICYmIGkgPCBzaXplOyBp\nKyspIHsKICAgICAgICAgICAgbGlzdGVuZXIgPSBsaXN0ZW5lcnMuZ2V0KGkp\nOwogICAgICAgICAgICBpZiAoc2l6ZSA9PSAxKQogICAgICAgICAgICAgICAg\ncmVzcG9uZHMgPSB0cnVlOwogICAgICAgICAgICBlbHNlIGlmIChsaXN0ZW5l\nciBpbnN0YW5jZW9mIExpc3RlbmVyQWRhcHRlcikgewogICAgICAgICAgICAg\nICAgcmVzcG9uZHMgPSAoKExpc3RlbmVyQWRhcHRlcikgbGlzdGVuZXIpLnJl\nc3BvbmRzVG8odHlwZSk7CiAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbmRz\nKQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9\nIGVsc2UKICAgICAgICAgICAgICAgIHJlc3BvbmRzID0gZmFsc2U7CgogICAg\nICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7\nCiAgICAgICAgICAgICAgICAgICAgY2FzZSBMaWZlY3ljbGVFdmVudC5CRUZP\nUkVfQ0xFQVI6CiAgICAgICAgICAgICAgICAgICAgY2FzZSBMaWZlY3ljbGVF\ndmVudC5BRlRFUl9DTEVBUjoKICAgICAgICAgICAgICAgICAgICAgICAgaWYg\nKHJlc3BvbmRzIHx8IGxpc3RlbmVyIGluc3RhbmNlb2YgQ2xlYXJMaXN0ZW5l\ncikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vY2spCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEJvb2xlYW4u\nVFJVRTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldiA9PSBu\ndWxsKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ID0gbmV3\nIExpZmVjeWNsZUV2ZW50KHNvdXJjZSwgdHlwZSk7CiAgICAgICAgICAgICAg\nICAgICAgICAgICAgICBpZiAodHlwZSA9PSBMaWZlY3ljbGVFdmVudC5CRUZP\nUkVfQ0xFQVIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChD\nbGVhckxpc3RlbmVyKSBsaXN0ZW5lcikuYmVmb3JlQ2xlYXIoZXYpOwogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICgoQ2xlYXJMaXN0ZW5lcikgbGlzdGVuZXIpLmFm\ndGVyQ2xlYXIoZXYpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAg\nICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAg\nIGNhc2UgTGlmZWN5Y2xlRXZlbnQuQkVGT1JFX1BFUlNJU1Q6CiAgICAgICAg\nICAgICAgICAgICAgY2FzZSBMaWZlY3ljbGVFdmVudC5BRlRFUl9QRVJTSVNU\nOgogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uZHMgfHwgbGlz\ndGVuZXIgaW5zdGFuY2VvZiBQZXJzaXN0TGlzdGVuZXIpIHsKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIGlmIChtb2NrKQogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIHJldHVybiBCb29sZWFuLlRSVUU7CiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICBpZiAoZXYgPT0gbnVsbCkKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICBldiA9IG5ldyBMaWZlY3ljbGVFdmVu\ndChzb3VyY2UsIHR5cGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAg\naWYgKHR5cGUgPT0gTGlmZWN5Y2xlRXZlbnQuQkVGT1JFX1BFUlNJU1QpCiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChQZXJzaXN0TGlzdGVu\nZXIpIGxpc3RlbmVyKS5iZWZvcmVQZXJzaXN0KGV2KTsKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAoKFBlcnNpc3RMaXN0ZW5lcikgbGlzdGVuZXIpLmFmdGVyUGVy\nc2lzdChldik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAg\nICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2Fz\nZSBMaWZlY3ljbGVFdmVudC5CRUZPUkVfREVMRVRFOgogICAgICAgICAgICAg\nICAgICAgIGNhc2UgTGlmZWN5Y2xlRXZlbnQuQUZURVJfREVMRVRFOgogICAg\nICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uZHMgfHwgbGlzdGVuZXIg\naW5zdGFuY2VvZiBEZWxldGVMaXN0ZW5lcikgewogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgaWYgKG1vY2spCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgcmV0dXJuIEJvb2xlYW4uVFJVRTsKICAgICAgICAgICAgICAg\nICAgICAgICAgICAgIGlmIChldiA9PSBudWxsKQogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIGV2ID0gbmV3IExpZmVjeWNsZUV2ZW50KHNvdXJj\nZSwgdHlwZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlw\nZSA9PSBMaWZlY3ljbGVFdmVudC5CRUZPUkVfREVMRVRFKQogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICgoRGVsZXRlTGlzdGVuZXIpIGxpc3Rl\nbmVyKS5iZWZvcmVEZWxldGUoZXYpOwogICAgICAgICAgICAgICAgICAgICAg\nICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgo\nRGVsZXRlTGlzdGVuZXIpIGxpc3RlbmVyKS5hZnRlckRlbGV0ZShldik7CiAg\nICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAg\nICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSBMaWZlY3ljbGVF\ndmVudC5CRUZPUkVfRElSVFk6CiAgICAgICAgICAgICAgICAgICAgY2FzZSBM\naWZlY3ljbGVFdmVudC5BRlRFUl9ESVJUWToKICAgICAgICAgICAgICAgICAg\nICBjYXNlIExpZmVjeWNsZUV2ZW50LkJFRk9SRV9ESVJUWV9GTFVTSEVEOgog\nICAgICAgICAgICAgICAgICAgIGNhc2UgTGlmZWN5Y2xlRXZlbnQuQUZURVJf\nRElSVFlfRkxVU0hFRDoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJl\nc3BvbmRzIHx8IGxpc3RlbmVyIGluc3RhbmNlb2YgRGlydHlMaXN0ZW5lcikg\newogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vY2spCiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEJvb2xlYW4uVFJV\nRTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldiA9PSBudWxs\nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ID0gbmV3IExp\nZmVjeWNsZUV2ZW50KHNvdXJjZSwgdHlwZSk7CiAgICAgICAgICAgICAgICAg\nICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICBjYXNlIExpZmVjeWNsZUV2ZW50LkJFRk9SRV9ESVJU\nWToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChEaXJ0\neUxpc3RlbmVyKSBsaXN0ZW5lcikuYmVmb3JlRGlydHkoZXYpOwogICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICBjYXNlIExpZmVjeWNsZUV2ZW50LkFG\nVEVSX0RJUlRZOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAoKERpcnR5TGlzdGVuZXIpIGxpc3RlbmVyKS5hZnRlckRpcnR5KGV2KTsK\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBMaWZlY3ljbGVF\ndmVudC5CRUZPUkVfRElSVFlfRkxVU0hFRDoKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgKChEaXJ0eUxpc3RlbmVyKSBsaXN0ZW5lcikK\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5iZWZv\ncmVEaXJ0eUZsdXNoZWQoZXYpOwogICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICBjYXNlIExpZmVjeWNsZUV2ZW50LkFGVEVSX0RJUlRZX0ZMVVNIRUQ6\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgoRGlydHlM\naXN0ZW5lcikgbGlzdGVuZXIpCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAuYWZ0ZXJEaXJ0eUZsdXNoZWQoZXYpOwogICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAg\nfQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAg\nICAgICAgICBjYXNlIExpZmVjeWNsZUV2ZW50LkFGVEVSX0xPQUQ6CiAgICAg\nICAgICAgICAgICAgICAgY2FzZSBMaWZlY3ljbGVFdmVudC5BRlRFUl9SRUZS\nRVNIOgogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uZHMgfHwg\nbGlzdGVuZXIgaW5zdGFuY2VvZiBMb2FkTGlzdGVuZXIpIHsKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIGlmIChtb2NrKQogICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIHJldHVybiBCb29sZWFuLlRSVUU7CiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICBpZiAoZXYgPT0gbnVsbCkKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICBldiA9IG5ldyBMaWZlY3ljbGVFdmVu\ndChzb3VyY2UsIHR5cGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAg\naWYgKHR5cGUgPT0gTGlmZWN5Y2xlRXZlbnQuQUZURVJfTE9BRCkKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAoKExvYWRMaXN0ZW5lcikgbGlz\ndGVuZXIpLmFmdGVyTG9hZChldik7CiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChM\nb2FkTGlzdGVuZXIpIGxpc3RlbmVyKS5hZnRlclJlZnJlc2goZXYpOwogICAg\nICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAg\nIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgTGlmZWN5Y2xlRXZl\nbnQuQkVGT1JFX1NUT1JFOgogICAgICAgICAgICAgICAgICAgIGNhc2UgTGlm\nZWN5Y2xlRXZlbnQuQUZURVJfU1RPUkU6CiAgICAgICAgICAgICAgICAgICAg\nICAgIGlmIChyZXNwb25kcyB8fCBsaXN0ZW5lciBpbnN0YW5jZW9mIFN0b3Jl\nTGlzdGVuZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICht\nb2NrKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBC\nb29sZWFuLlRSVUU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAo\nZXYgPT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBl\ndiA9IG5ldyBMaWZlY3ljbGVFdmVudChzb3VyY2UsIHR5cGUpOwogICAgICAg\nICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gTGlmZWN5Y2xlRXZl\nbnQuQkVGT1JFX1NUT1JFKQogICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICgoU3RvcmVMaXN0ZW5lcikgbGlzdGVuZXIpLmJlZm9yZVN0b3JlKGV2\nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAoKFN0b3JlTGlzdGVuZXIpIGxpc3Rl\nbmVyKS5hZnRlclN0b3JlKGV2KTsKICAgICAgICAgICAgICAgICAgICAgICAg\nfQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAg\nICAgICAgICBjYXNlIExpZmVjeWNsZUV2ZW50LkJFRk9SRV9ERVRBQ0g6CiAg\nICAgICAgICAgICAgICAgICAgY2FzZSBMaWZlY3ljbGVFdmVudC5BRlRFUl9E\nRVRBQ0g6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25kcyB8\nfCBsaXN0ZW5lciBpbnN0YW5jZW9mIERldGFjaExpc3RlbmVyKSB7CiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9jaykKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICByZXR1cm4gQm9vbGVhbi5UUlVFOwogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ID09IG51bGwpCiAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgZXYgPSBuZXcgTGlmZWN5Y2xl\nRXZlbnQoc291cmNlLCByZWwsIHR5cGUpOwogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgaWYgKHR5cGUgPT0gTGlmZWN5Y2xlRXZlbnQuQkVGT1JFX0RF\nVEFDSCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKERldGFj\naExpc3RlbmVyKSBsaXN0ZW5lcikuYmVmb3JlRGV0YWNoKGV2KTsKICAgICAg\nICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAoKERldGFjaExpc3RlbmVyKSBsaXN0ZW5lcikuYWZ0\nZXJEZXRhY2goZXYpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAg\nICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAg\nIGNhc2UgTGlmZWN5Y2xlRXZlbnQuQkVGT1JFX0FUVEFDSDoKICAgICAgICAg\nICAgICAgICAgICBjYXNlIExpZmVjeWNsZUV2ZW50LkFGVEVSX0FUVEFDSDoK\nICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbmRzIHx8IGxpc3Rl\nbmVyIGluc3RhbmNlb2YgQXR0YWNoTGlzdGVuZXIpIHsKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIGlmIChtb2NrKQogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAgIHJldHVybiBCb29sZWFuLlRSVUU7CiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICBpZiAoZXYgPT0gbnVsbCkKICAgICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICBldiA9IG5ldyBMaWZlY3ljbGVFdmVudChz\nb3VyY2UsIHJlbCwgdHlwZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICBpZiAodHlwZSA9PSBMaWZlY3ljbGVFdmVudC5CRUZPUkVfQVRUQUNIKQog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgoQXR0YWNoTGlzdGVu\nZXIpIGxpc3RlbmVyKS5iZWZvcmVBdHRhY2goZXYpOwogICAgICAgICAgICAg\nICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICgoQXR0YWNoTGlzdGVuZXIpIGxpc3RlbmVyKS5hZnRlckF0dGFj\naChldik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAg\nICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgIGNhc2Ug\nTGlmZWN5Y2xlRXZlbnQuQUZURVJfUEVSU0lTVF9QRVJGT1JNRUQ6CiAgICAg\nICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25kcyB8fCBsaXN0ZW5lciBp\nbnN0YW5jZW9mIFBvc3RQZXJzaXN0TGlzdGVuZXIpCiAgICAgICAgICAgICAg\nICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICht\nb2NrKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBC\nb29sZWFuLlRSVUU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAo\nZXYgPT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBl\ndiA9IG5ldyBMaWZlY3ljbGVFdmVudChzb3VyY2UsIHJlbCwgdHlwZSk7CiAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAoKFBvc3RQZXJzaXN0TGlzdGVu\nZXIpIGxpc3RlbmVyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nIC5hZnRlclBlcnNpc3RQZXJmb3JtZWQoZXYpOwogICAgICAgICAgICAgICAg\nICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAg\nICAgICAgICAgICAgICAgIGNhc2UgTGlmZWN5Y2xlRXZlbnQuQkVGT1JFX1VQ\nREFURToKICAgICAgICAgICAgICAgICAgICBjYXNlIExpZmVjeWNsZUV2ZW50\nLkFGVEVSX1VQREFURV9QRVJGT1JNRUQ6CiAgICAgICAgICAgICAgICAgICAg\nICAgIGlmIChyZXNwb25kcyB8fCBsaXN0ZW5lciBpbnN0YW5jZW9mIFVwZGF0\nZUxpc3RlbmVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAo\nbW9jaykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4g\nQm9vbGVhbi5UUlVFOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYg\nKGV2ID09IG51bGwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nZXYgPSBuZXcgTGlmZWN5Y2xlRXZlbnQoc291cmNlLCByZWwsIHR5cGUpOwog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gTGlmZWN5\nY2xlRXZlbnQuQkVGT1JFX1VQREFURSkKICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgICAoKFVwZGF0ZUxpc3RlbmVyKSBsaXN0ZW5lcikuYmVmb3Jl\nVXBkYXRlKGV2KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UK\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKFVwZGF0ZUxpc3Rl\nbmVyKSBsaXN0ZW5lcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgLmFmdGVyVXBkYXRlUGVyZm9ybWVkKGV2KTsKICAgICAgICAgICAg\nICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsK\nICAgICAgICAgICAgICAgICAgICBjYXNlIExpZmVjeWNsZUV2ZW50LkFGVEVS\nX0RFTEVURV9QRVJGT1JNRUQ6CiAgICAgICAgICAgICAgICAgICAgICAgIGlm\nIChyZXNwb25kcyB8fCBsaXN0ZW5lciBpbnN0YW5jZW9mIFBvc3REZWxldGVM\naXN0ZW5lcil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9j\naykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQm9v\nbGVhbi5UUlVFOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2\nID09IG51bGwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXYg\nPSBuZXcgTGlmZWN5Y2xlRXZlbnQoc291cmNlLCByZWwsIHR5cGUpOwogICAg\nICAgICAgICAgICAgICAgICAgICAgICAgKChQb3N0RGVsZXRlTGlzdGVuZXIp\nIGxpc3RlbmVyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5h\nZnRlckRlbGV0ZVBlcmZvcm1lZChldik7CiAgICAgICAgICAgICAgICAgICAg\nICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAg\nICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAg\naWYgKF9sb2cuaXNXYXJuRW5hYmxlZCgpKQogICAgICAgICAgICAgICAgICAg\nICAgICAgICAgX2xvZy53YXJuKF9sb2MuZ2V0KCJ1bmtub3duLWxpZmVjeWNs\nZS1ldmVudCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSW50\nZWdlci50b1N0cmluZyh0eXBlKSkpOwogICAgICAgICAgICAgICAgICAgICAg\nICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAg\nICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAg\nIGV4Y2VwdGlvbnMuYWRkKGUpOwogICAgICAgICAgICAgICAgaWYgKF9mYWls\nRmFzdCkKICAgICAgICAgICAgICAgICAgICBfZmFpbCA9IHRydWU7CiAgICAg\nICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGV2OwogICAgfQoK\nICAgIC8qKgogICAgICogSW50ZXJmYWNlIHRoYXQgZmFjYWRlcyB0byBvdGhl\nciBsaWZlY3ljbGUgbGlzdGVuZXIgaW50ZXJmYWNlcyBjYW4KICAgICAqIGlt\ncGxlbWVudCB0byBjaG9vc2Ugd2hpY2ggZXZlbnRzIHRvIHJlc3BvbmQgdG8g\nYmFzZWQgb24gdGhlaXIgZGVsZWdhdGUuCiAgICAgKiBUaGlzIGlzIG1vcmUg\nZWZmaWNpZW50IHRoYW4gcmVnaXN0ZXJpbmcgYXMgYSBsaXN0ZW5lciBmb3Ig\nYWxsIGV2ZW50cwogICAgICogYnV0IG9ubHkgcmVzcG9uZGluZyB0byBzb21l\nLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGludGVyZmFjZSBMaXN0ZW5l\nckFkYXB0ZXIgewoKICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm4gd2hl\ndGhlciB0aGlzIGluc3RhbmNlIHJlc3BvbmRzIHRvIHRoZSBnaXZlbiBldmVu\ndCB0eXBlIGZyb20KICAgICAgICAgKiB7QGxpbmsgTGlmZWN5Y2xlRXZlbnR9\nLgogICAgICAgICAqLwogICAgICAgIHB1YmxpYyBib29sZWFuIHJlc3BvbmRz\nVG8oaW50IGV2ZW50VHlwZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBFeHRl\nbmRlZCBsaXN0IHRoYXQgdHJhY2tzIHdoYXQgZXZlbnQgdHlwZXMgaXRzIGVs\nZW1lbnRzIGNhcmUgYWJvdXQuCiAgICAgKiBNYWludGFpbnMgc2V0IHNlbWFu\ndGljcyBhcyB3ZWxsLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGNsYXNz\nIExpc3RlbmVyTGlzdAogICAgICAgIGV4dGVuZHMgQXJyYXlMaXN0IHsKCiAg\nICAgICAgcHJpdmF0ZSBpbnQgX3R5cGVzID0gMDsKCiAgICAgICAgcHVibGlj\nIExpc3RlbmVyTGlzdChpbnQgc2l6ZSkgewogICAgICAgICAgICBzdXBlcihz\naXplKTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBMaXN0ZW5lckxpc3Qo\nTGlzdGVuZXJMaXN0IGNvcHkpIHsKICAgICAgICAgICAgc3VwZXIoY29weSk7\nCiAgICAgICAgICAgIF90eXBlcyA9IGNvcHkuX3R5cGVzOwogICAgICAgIH0K\nCiAgICAgICAgcHVibGljIGJvb2xlYW4gaGFzTGlzdGVuZXJzKGludCB0eXBl\nKSB7CiAgICAgICAgICAgIHJldHVybiAoX3R5cGVzICYgKDIgPDwgdHlwZSkp\nID4gMDsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBib29sZWFuIGFkZChP\nYmplY3QgbGlzdGVuZXIpIHsKICAgICAgICAgICAgaWYgKGNvbnRhaW5zKGxp\nc3RlbmVyKSkKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAg\nICAgICAgc3VwZXIuYWRkKGxpc3RlbmVyKTsKICAgICAgICAgICAgX3R5cGVz\nIHw9IGdldEV2ZW50VHlwZXMobGlzdGVuZXIpOwogICAgICAgICAgICByZXR1\ncm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIHB1YmxpYyBib29sZWFuIHJl\nbW92ZShPYmplY3QgbGlzdGVuZXIpIHsKICAgICAgICAgICAgaWYgKCFzdXBl\nci5yZW1vdmUobGlzdGVuZXIpKQogICAgICAgICAgICAgICAgcmV0dXJuIGZh\nbHNlOwoKICAgICAgICAgICAgLy8gcmVjb21wdXRlIHR5cGVzIG1hc2sKICAg\nICAgICAgICAgX3R5cGVzID0gMDsKICAgICAgICAgICAgZm9yIChpbnQgaSA9\nIDA7IGkgPCBzaXplKCk7IGkrKykKICAgICAgICAgICAgICAgIF90eXBlcyB8\nPSBnZXRFdmVudFR5cGVzKGdldChpKSk7CiAgICAgICAgICAgIHJldHVybiB0\ncnVlOwogICAgICAgIH0KCiAgICAgICAgLyoqCiAgICAgICAgICogUmV0dXJu\nIGEgbWFzayBvZiB0aGUgZXZlbnQgdHlwZXMgdGhlIGdpdmVuIGxpc3RlbmVy\nIHByb2Nlc3Nlcy4KICAgICAgICAgKi8KICAgICAgICBwcml2YXRlIHN0YXRp\nYyBpbnQgZ2V0RXZlbnRUeXBlcyhPYmplY3QgbGlzdGVuZXIpIHsKICAgICAg\nICAgICAgaW50IHR5cGVzID0gMDsKICAgICAgICAgICAgaWYgKGxpc3RlbmVy\nIGluc3RhbmNlb2YgTGlzdGVuZXJBZGFwdGVyKSB7CiAgICAgICAgICAgICAg\nICBMaXN0ZW5lckFkYXB0ZXIgYWRhcHRlciA9IChMaXN0ZW5lckFkYXB0ZXIp\nIGxpc3RlbmVyOwogICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkg\nPCBMaWZlY3ljbGVFdmVudC5BTExfRVZFTlRTLmxlbmd0aDsgaSsrKQogICAg\nICAgICAgICAgICAgICAgIGlmIChhZGFwdGVyLnJlc3BvbmRzVG8oTGlmZWN5\nY2xlRXZlbnQuQUxMX0VWRU5UU1tpXSkpCiAgICAgICAgICAgICAgICAgICAg\nICAgIHR5cGVzIHw9IDIgPDwgTGlmZWN5Y2xlRXZlbnQuQUxMX0VWRU5UU1tp\nXTsKICAgICAgICAgICAgICAgIHJldHVybiB0eXBlczsKICAgICAgICAgICAg\nfQoKICAgICAgICAgICAgaWYgKGxpc3RlbmVyIGluc3RhbmNlb2YgUGVyc2lz\ndExpc3RlbmVyKSB7CiAgICAgICAgICAgICAgICB0eXBlcyB8PSAyIDw8IExp\nZmVjeWNsZUV2ZW50LkJFRk9SRV9QRVJTSVNUOwogICAgICAgICAgICAgICAg\ndHlwZXMgfD0gMiA8PCBMaWZlY3ljbGVFdmVudC5BRlRFUl9QRVJTSVNUOwog\nICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChsaXN0ZW5lciBpbnN0YW5j\nZW9mIENsZWFyTGlzdGVuZXIpIHsKICAgICAgICAgICAgICAgIHR5cGVzIHw9\nIDIgPDwgTGlmZWN5Y2xlRXZlbnQuQkVGT1JFX0NMRUFSOwogICAgICAgICAg\nICAgICAgdHlwZXMgfD0gMiA8PCBMaWZlY3ljbGVFdmVudC5BRlRFUl9DTEVB\nUjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAobGlzdGVuZXIgaW5z\ndGFuY2VvZiBEZWxldGVMaXN0ZW5lcikgewogICAgICAgICAgICAgICAgdHlw\nZXMgfD0gMiA8PCBMaWZlY3ljbGVFdmVudC5CRUZPUkVfREVMRVRFOwogICAg\nICAgICAgICAgICAgdHlwZXMgfD0gMiA8PCBMaWZlY3ljbGVFdmVudC5BRlRF\nUl9ERUxFVEU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGxpc3Rl\nbmVyIGluc3RhbmNlb2YgRGlydHlMaXN0ZW5lcikgewogICAgICAgICAgICAg\nICAgdHlwZXMgfD0gMiA8PCBMaWZlY3ljbGVFdmVudC5CRUZPUkVfRElSVFk7\nCiAgICAgICAgICAgICAgICB0eXBlcyB8PSAyIDw8IExpZmVjeWNsZUV2ZW50\nLkFGVEVSX0RJUlRZOwogICAgICAgICAgICAgICAgdHlwZXMgfD0gMiA8PCBM\naWZlY3ljbGVFdmVudC5CRUZPUkVfRElSVFlfRkxVU0hFRDsKICAgICAgICAg\nICAgICAgIHR5cGVzIHw9IDIgPDwgTGlmZWN5Y2xlRXZlbnQuQUZURVJfRElS\nVFlfRkxVU0hFRDsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAobGlz\ndGVuZXIgaW5zdGFuY2VvZiBMb2FkTGlzdGVuZXIpCiAgICAgICAgICAgICAg\nICB0eXBlcyB8PSAyIDw8IExpZmVjeWNsZUV2ZW50LkFGVEVSX0xPQUQ7CiAg\nICAgICAgICAgIGlmIChsaXN0ZW5lciBpbnN0YW5jZW9mIFN0b3JlTGlzdGVu\nZXIpIHsKICAgICAgICAgICAgICAgIHR5cGVzIHw9IDIgPDwgTGlmZWN5Y2xl\nRXZlbnQuQkVGT1JFX1NUT1JFOwogICAgICAgICAgICAgICAgdHlwZXMgfD0g\nMiA8PCBMaWZlY3ljbGVFdmVudC5BRlRFUl9TVE9SRTsKICAgICAgICAgICAg\nfQogICAgICAgICAgICBpZiAobGlzdGVuZXIgaW5zdGFuY2VvZiBEZXRhY2hM\naXN0ZW5lcikgewogICAgICAgICAgICAgICAgdHlwZXMgfD0gMiA8PCBMaWZl\nY3ljbGVFdmVudC5CRUZPUkVfREVUQUNIOwogICAgICAgICAgICAgICAgdHlw\nZXMgfD0gMiA8PCBMaWZlY3ljbGVFdmVudC5BRlRFUl9ERVRBQ0g7CiAgICAg\nICAgICAgIH0KICAgICAgICAgICAgaWYgKGxpc3RlbmVyIGluc3RhbmNlb2Yg\nQXR0YWNoTGlzdGVuZXIpIHsKICAgICAgICAgICAgICAgIHR5cGVzIHw9IDIg\nPDwgTGlmZWN5Y2xlRXZlbnQuQkVGT1JFX0FUVEFDSDsKICAgICAgICAgICAg\nICAgIHR5cGVzIHw9IDIgPDwgTGlmZWN5Y2xlRXZlbnQuQUZURVJfQVRUQUNI\nOwoJCQl9CgkJCXJldHVybiB0eXBlczsKCQl9Cgl9Cn0K\n","encoding":"base64"}

