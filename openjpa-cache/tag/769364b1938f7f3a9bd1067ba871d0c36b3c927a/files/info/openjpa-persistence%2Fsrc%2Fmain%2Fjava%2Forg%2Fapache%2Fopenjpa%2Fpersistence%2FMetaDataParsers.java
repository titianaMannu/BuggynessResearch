{"sha":"6eb378d9f75b5c8c1f1cc18e66b5a6953c8feb8f","node_id":"MDQ6QmxvYjIwNjM2NDo2ZWIzNzhkOWY3NWI1YzhjMWYxY2MxOGU2NmI1YTY5NTNjOGZlYjhm","size":4086,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/6eb378d9f75b5c8c1f1cc18e66b5a6953c8feb8f","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2U7CgppbXBv\ncnQgamF2YS5sYW5nLnJlZmxlY3QuTWV0aG9kOwppbXBvcnQgamF2YS51dGls\nLkNvbGxlY3Rpb247CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmV2ZW50\nLkxpZmVjeWNsZUNhbGxiYWNrczsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5ldmVudC5MaWZlY3ljbGVFdmVudDsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5ldmVudC5NZXRob2RMaWZlY3ljbGVDYWxsYmFja3M7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEubGliLmxvZy5Mb2c7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLm1ldGEuTWV0YURhdGFEZWZhdWx0czsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS51dGlsLlVzZXJFeGNlcHRpb247CgovKioKICog\nQ29tbW9uIHV0aWxpdGllcyBmb3IgcGVyc2lzdGVuY2UgbWV0YWRhdGEgcGFy\nc2Vycy4KICoKICogQGF1dGhvciBBYmUgV2hpdGUKICovCmNsYXNzIE1ldGFE\nYXRhUGFyc2VycyB7CgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9jYWxp\nemVyIF9sb2MgPSBMb2NhbGl6ZXIuZm9yUGFja2FnZQogICAgICAgIChNZXRh\nRGF0YVBhcnNlcnMuY2xhc3MpOwoKICAgIC8qKgogICAgICogUmV0dXJuIHRo\nZSBldmVudCB0eXBlIGNvbnN0YW50cyBmb3IgdGhlIGdpdmVuIHRhZywgb3Ig\nbnVsbCBpZiBub25lLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGludFtd\nIGdldEV2ZW50VHlwZXMoTWV0YURhdGFUYWcgdGFnKSB7CiAgICAgICAgc3dp\ndGNoICh0YWcpIHsKICAgICAgICAgICAgY2FzZSBQUkVfUEVSU0lTVDoKICAg\nICAgICAgICAgICAgIHJldHVybiBuZXcgaW50W117IExpZmVjeWNsZUV2ZW50\nLkJFRk9SRV9QRVJTSVNUIH07CiAgICAgICAgICAgIGNhc2UgUE9TVF9QRVJT\nSVNUOgogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBpbnRbXXsgTGlmZWN5\nY2xlRXZlbnQuQUZURVJfUEVSU0lTVF9QRVJGT1JNRUQgfTsKICAgICAgICAg\nICAgY2FzZSBQUkVfUkVNT1ZFOgogICAgICAgICAgICAgICAgcmV0dXJuIG5l\ndyBpbnRbXXsgTGlmZWN5Y2xlRXZlbnQuQkVGT1JFX0RFTEVURSB9OwogICAg\nICAgICAgICBjYXNlIFBPU1RfUkVNT1ZFOgogICAgICAgICAgICAgICAgcmV0\ndXJuIG5ldyBpbnRbXXsgTGlmZWN5Y2xlRXZlbnQuQUZURVJfREVMRVRFX1BF\nUkZPUk1FRCB9OwogICAgICAgICAgICBjYXNlIFBSRV9VUERBVEU6CiAgICAg\nICAgICAgICAgICByZXR1cm4gbmV3IGludFtdeyBMaWZlY3ljbGVFdmVudC5C\nRUZPUkVfVVBEQVRFIH07CiAgICAgICAgICAgIGNhc2UgUE9TVF9VUERBVEU6\nCiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGludFtdeyBMaWZlY3ljbGVF\ndmVudC5BRlRFUl9VUERBVEVfUEVSRk9STUVEIH07CiAgICAgICAgICAgIGNh\nc2UgUE9TVF9MT0FEOgogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBpbnRb\nXXsgTGlmZWN5Y2xlRXZlbnQuQUZURVJfTE9BRCwKICAgICAgICAgICAgICAg\nICAgICBMaWZlY3ljbGVFdmVudC5BRlRFUl9SRUZSRVNIIH07CiAgICAgICAg\nICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAg\nICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBWYWxpZGF0ZSB0aGF0IHRo\nZSBnaXZlbiBsaXN0ZW5lciBjbGFzcyBkb2VzIG5vdCBoYXZlIG11bHRpcGxl\nIG1ldGhvZHMKICAgICAqIGxpc3RlbmluZyBmb3IgdGhlIHNhbWUgbGlmZWN5\nY2xlIGV2ZW50LCB3aGljaCBpcyBmb3JiaWRkZW4gYnkgdGhlIHNwZWMuICAK\nICAgICAqLwogICAgcHVibGljIHN0YXRpYyB2b2lkIHZhbGlkYXRlTWV0aG9k\nc0ZvclNhbWVDYWxsYmFjayhDbGFzcyBjbHMsIAogICAgICAgIENvbGxlY3Rp\nb248TGlmZWN5Y2xlQ2FsbGJhY2tzPiBjYWxsYmFja3MsIE1ldGhvZCBtZXRo\nb2QsIAogICAgICAgIE1ldGFEYXRhVGFnIHRhZywgTWV0YURhdGFEZWZhdWx0\ncyBkZWYsIExvZyBsb2cpIHsKICAgICAgICBpZiAoY2FsbGJhY2tzID09IG51\nbGwgfHwgY2FsbGJhY2tzLmlzRW1wdHkoKSkKICAgICAgICAgICAgcmV0dXJu\nOwoKICAgICAgICBmb3IgKExpZmVjeWNsZUNhbGxiYWNrcyBsYzogY2FsbGJh\nY2tzKSB7CiAgICAgICAgICAgIGlmICghKGxjIGluc3RhbmNlb2YgTWV0aG9k\nTGlmZWN5Y2xlQ2FsbGJhY2tzKSkKICAgICAgICAgICAgICAgIGNvbnRpbnVl\nOwogICAgICAgICAgICBNZXRob2QgZXhpc3RzID0gKChNZXRob2RMaWZlY3lj\nbGVDYWxsYmFja3MpIGxjKS5nZXRDYWxsYmFja01ldGhvZCgpOwogICAgICAg\nICAgICBpZiAoIWV4aXN0cy5nZXREZWNsYXJpbmdDbGFzcygpLmVxdWFscyht\nZXRob2QuZ2V0RGVjbGFyaW5nQ2xhc3MoKSkpCiAgICAgICAgICAgICAgICBj\nb250aW51ZTsKCiAgICAgICAgICAgIFBlcnNpc3RlbmNlTWV0YURhdGFEZWZh\ndWx0cyBkZWZhdWx0cyA9IGdldFBlcnNpc3RlbmNlRGVmYXVsdHMoZGVmKTsK\nICAgICAgICAgICAgTG9jYWxpemVyLk1lc3NhZ2UgbXNnID0gX2xvYy5nZXQo\nIm11bHRpcGxlLW1ldGhvZHMtb24tY2FsbGJhY2siLCAKICAgICAgICAgICAg\nICAgIG5ldyBPYmplY3RbXSB7IG1ldGhvZC5nZXREZWNsYXJpbmdDbGFzcygp\nLmdldE5hbWUoKSwgCiAgICAgICAgICAgICAgICBtZXRob2QuZ2V0TmFtZSgp\nLCBleGlzdHMuZ2V0TmFtZSgpLCB0YWcudG9TdHJpbmcoKSB9KTsKICAgICAg\nICAgICAgaWYgKGRlZmF1bHRzID09IG51bGwgCiAgICAgICAgICAgICAgICB8\nfCBkZWZhdWx0cy5nZXRBbGxvd3NNdWx0aXBsZU1ldGhvZHNGb3JTYW1lQ2Fs\nbGJhY2soKSkKICAgICAgICAgICAgICAgIGxvZy53YXJuKG1zZyk7CiAgICAg\nICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXhj\nZXB0aW9uKG1zZyk7CiAgICAgICAgfQogICAgfQogICAgCiAgICAvKioKICAg\nICAqIFJldHVybiB0aGUge0BsaW5rIFBlcnNpc3RlbmNlTWV0YURhdGFEZWZh\ndWx0c30gaW4gdXNlLCBvciBudWxsIGlmIG5vdAogICAgICogdXNpbmcgSlBB\nIGRlZmF1bHRzLgogICAgICovCiAgICBwcml2YXRlIHN0YXRpYyBQZXJzaXN0\nZW5jZU1ldGFEYXRhRGVmYXVsdHMgZ2V0UGVyc2lzdGVuY2VEZWZhdWx0cwog\nICAgICAgIChNZXRhRGF0YURlZmF1bHRzIGRlZikgewogICAgICAgIGlmIChk\nZWYgaW5zdGFuY2VvZiBQZXJzaXN0ZW5jZU1ldGFEYXRhRGVmYXVsdHMpCiAg\nICAgICAgICAgIHJldHVybiAoUGVyc2lzdGVuY2VNZXRhRGF0YURlZmF1bHRz\nKSBkZWY7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9Cn0K\n","encoding":"base64"}

