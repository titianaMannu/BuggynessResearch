{"sha":"33b40440cf7314d9b7ce5ad106250b58b1c27730","node_id":"MDQ6QmxvYjIwNjM2NDozM2I0MDQ0MGNmNzMxNGQ5YjdjZTVhZDEwNjI1MGI1OGIxYzI3NzMw","size":19434,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/33b40440cf7314d9b7ce5ad106250b58b1c27730","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuY2FsbGJh\nY2tzOwoKaW1wb3J0IGphdmEudXRpbC5TZXQ7CmltcG9ydCBqYXZhLnV0aWwu\nSGFzaFNldDsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFn\nZXI7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5Sb2xsYmFja0V4Y2VwdGlv\nbjsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3Bl\nbkpQQVBlcnNpc3RlbmNlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBl\ncnNpc3RlbmNlLmNhbGxiYWNrcy5FeGNlcHRpb25zRnJvbUNhbGxiYWNrc0Vu\ndGl0eS5DYWxsYmFja1Rlc3RFeGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEucGVyc2lzdGVuY2UudGVzdC5TaW5nbGVFTUZUZXN0Q2FzZTsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5lbmhhbmNlLlBlcnNpc3RlbmNl\nQ2FwYWJsZTsKCi8qKgogKiBUZXN0cyBhZ2FpbnN0IEpQQSBzZWN0aW9uIDMu\nNSdzIGRlc2NyaXB0aW9uIG9mIGNhbGxiYWNrIGV4Y2VwdGlvbiBoYW5kbGlu\nZy4KICovCnB1YmxpYyBjbGFzcyBUZXN0RXhjZXB0aW9uc0Zyb21DYWxsYmFj\na3MKICAgIGV4dGVuZHMgU2luZ2xlRU1GVGVzdENhc2UgewoKICAgIHB1Ymxp\nYyBzdGF0aWMgYm9vbGVhbiB0ZXN0UnVubmluZyA9IGZhbHNlOwoKICAgIEBP\ndmVycmlkZQogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7CiAgICAgICAgU2V0\nIG5lZWRFbmhhbmNlbWVudCA9IG5ldyBIYXNoU2V0KCk7CiAgICAgICAgbmVl\nZEVuaGFuY2VtZW50LmFkZCgKICAgICAgICAgICAgInRlc3RQb3N0VXBkYXRl\nRXhjZXB0aW9uRHVyaW5nRmx1c2hXaXRoTmV3SW5zdGFuY2UiKTsKICAgICAg\nICBuZWVkRW5oYW5jZW1lbnQuYWRkKAogICAgICAgICAgICAidGVzdFByZVVw\nZGF0ZUV4Y2VwdGlvbkR1cmluZ0ZsdXNoV2l0aEV4aXN0aW5nRmx1c2hlZElu\nc3RhbmNlIik7CiAgICAgICAgbmVlZEVuaGFuY2VtZW50LmFkZCgKICAgICAg\nICAgICAgInRlc3RQcmVVcGRhdGVFeGNlcHRpb25EdXJpbmdDb21taXRXaXRo\nRXhpc3RpbmdGbHVzaGVkSW5zdGFuY2UiKTsKICAgICAgICBuZWVkRW5oYW5j\nZW1lbnQuYWRkKAogICAgICAgICAgICAidGVzdFBvc3RVcGRhdGVFeGNlcHRp\nb25EdXJpbmdGbHVzaFdpdGhFeGlzdGluZ0ZsdXNoZWRJbnN0YW5jZSIpOwog\nICAgICAgIG5lZWRFbmhhbmNlbWVudC5hZGQoCiAgICAgICAgICAgICJ0ZXN0\nUG9zdFVwZGF0ZUV4Y2VwdGlvbkR1cmluZ0NvbW1pdFdpdGhFeGlzdGluZ0Zs\ndXNoZWRJbnN0YW5jZSIpOwogICAgICAgIGlmICghUGVyc2lzdGVuY2VDYXBh\nYmxlLmNsYXNzLmlzQXNzaWduYWJsZUZyb20oCiAgICAgICAgICAgIEV4Y2Vw\ndGlvbnNGcm9tQ2FsbGJhY2tzRW50aXR5LmNsYXNzKQogICAgICAgICAgICAm\nJiBuZWVkRW5oYW5jZW1lbnQuY29udGFpbnMoZ2V0TmFtZSgpKSkKICAgICAg\nICAgICAgLy8gYWN0dWFsbHksIHdlIHJlYWxseSBvbmx5IG5lZWQgcmVkZWYK\nICAgICAgICAgICAgZmFpbCgidGhpcyB0ZXN0IG1ldGhvZCBkb2VzIG5vdCB3\nb3JrIHdpdGhvdXQgZW5oYW5jZW1lbnQiKTsKCiAgICAgICAgc2V0VXAoRXhj\nZXB0aW9uc0Zyb21DYWxsYmFja3NFbnRpdHkuY2xhc3MsIENMRUFSX1RBQkxF\nUywgIm9wZW5qcGEuTG9nIiwgIlNRTD1UUkFDRSIpOwogICAgICAgIHRlc3RS\ndW5uaW5nID0gdHJ1ZTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1Ymxp\nYyB2b2lkIHRlYXJEb3duKCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAg\ndGVzdFJ1bm5pbmcgPSBmYWxzZTsKICAgICAgICBzdXBlci50ZWFyRG93bigp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RQcmVQZXJzaXN0RXhjZXB0\naW9uKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCku\nYmVnaW4oKTsKICAgICAgICBFeGNlcHRpb25zRnJvbUNhbGxiYWNrc0VudGl0\neSBvID0gbmV3IEV4Y2VwdGlvbnNGcm9tQ2FsbGJhY2tzRW50aXR5KCk7CiAg\nICAgICAgby5zZXRUaHJvd09uUHJlUGVyc2lzdCh0cnVlKTsKICAgICAgICB0\ncnkgewogICAgICAgICAgICBlbS5wZXJzaXN0KG8pOwogICAgICAgICAgICBm\nYWlsKCJwZXJzaXN0IHNob3VsZCBoYXZlIGZhaWxlZCIpOwogICAgICAgIH0g\nY2F0Y2ggKENhbGxiYWNrVGVzdEV4Y2VwdGlvbiBjdGUpIHsKICAgICAgICAg\nICAgLy8gdHJhbnNhY3Rpb24gc2hvdWxkIGJlIHN0aWxsIGFjdGl2ZSwgYnV0\nIG1hcmtlZCBmb3Igcm9sbGJhY2sKICAgICAgICAgICAgYXNzZXJ0VHJ1ZShl\nbS5nZXRUcmFuc2FjdGlvbigpLmlzQWN0aXZlKCkpOwogICAgICAgICAgICBh\nc3NlcnRUcnVlKGVtLmdldFRyYW5zYWN0aW9uKCkuZ2V0Um9sbGJhY2tPbmx5\nKCkpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIGlmIChlbS5n\nZXRUcmFuc2FjdGlvbigpLmlzQWN0aXZlKCkpCiAgICAgICAgICAgICAgICBl\nbS5nZXRUcmFuc2FjdGlvbigpLnJvbGxiYWNrKCk7CiAgICAgICAgICAgIGVt\nLmNsb3NlKCk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRl\nc3RQcmVQZXJzaXN0RXhjZXB0aW9uT25NZXJnZSgpIHsKICAgICAgICBFbnRp\ndHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAg\nICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgRXhj\nZXB0aW9uc0Zyb21DYWxsYmFja3NFbnRpdHkgbyA9IG5ldyBFeGNlcHRpb25z\nRnJvbUNhbGxiYWNrc0VudGl0eSgpOwogICAgICAgIG8uc2V0VGhyb3dPblBy\nZVBlcnNpc3QodHJ1ZSk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZW0u\nbWVyZ2Uobyk7CiAgICAgICAgICAgIGZhaWwoIm1lcmdlIHNob3VsZCBoYXZl\nIGZhaWxlZCIpOwogICAgICAgIH0gY2F0Y2ggKENhbGxiYWNrVGVzdEV4Y2Vw\ndGlvbiBjdGUpIHsKICAgICAgICAgICAgLy8gdHJhbnNhY3Rpb24gc2hvdWxk\nIGJlIHN0aWxsIGFjdGl2ZSwgYnV0IG1hcmtlZCBmb3Igcm9sbGJhY2sKICAg\nICAgICAgICAgYXNzZXJ0VHJ1ZShlbS5nZXRUcmFuc2FjdGlvbigpLmlzQWN0\naXZlKCkpOwogICAgICAgICAgICBhc3NlcnRUcnVlKGVtLmdldFRyYW5zYWN0\naW9uKCkuZ2V0Um9sbGJhY2tPbmx5KCkpOwogICAgICAgIH0gZmluYWxseSB7\nCiAgICAgICAgICAgIGlmIChlbS5nZXRUcmFuc2FjdGlvbigpLmlzQWN0aXZl\nKCkpCiAgICAgICAgICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLnJvbGxi\nYWNrKCk7CiAgICAgICAgICAgIGVtLmNsb3NlKCk7CiAgICAgICAgfQogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RQb3N0UGVyc2lzdEV4Y2VwdGlvbkR1\ncmluZ0ZsdXNoKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYu\nY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0\naW9uKCkuYmVnaW4oKTsKICAgICAgICBFeGNlcHRpb25zRnJvbUNhbGxiYWNr\nc0VudGl0eSBvID0gbmV3IEV4Y2VwdGlvbnNGcm9tQ2FsbGJhY2tzRW50aXR5\nKCk7CiAgICAgICAgby5zZXRUaHJvd09uUG9zdFBlcnNpc3QodHJ1ZSk7CiAg\nICAgICAgZW0ucGVyc2lzdChvKTsKICAgICAgICBtdXRhdGVBbmRGbHVzaChl\nbSwgbyk7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIG11dGF0ZUFuZEZsdXNo\nKEVudGl0eU1hbmFnZXIgZW0sCiAgICAgICAgRXhjZXB0aW9uc0Zyb21DYWxs\nYmFja3NFbnRpdHkgbykgewogICAgICAgIG8uc2V0U3RyaW5nRmllbGQoImZv\nbyIpOwogICAgICAgIGZsdXNoKGVtKTsKICAgIH0KCiAgICBwcml2YXRlIHZv\naWQgZmx1c2goRW50aXR5TWFuYWdlciBlbSkgewogICAgICAgIHRyeSB7CiAg\nICAgICAgICAgIGVtLmZsdXNoKCk7CiAgICAgICAgICAgIGZhaWwoImZsdXNo\nIHNob3VsZCBoYXZlIGZhaWxlZCIpOwogICAgICAgIH0gY2F0Y2ggKENhbGxi\nYWNrVGVzdEV4Y2VwdGlvbiBjdGUpIHsKICAgICAgICAgICAgLy8gdHJhbnNh\nY3Rpb24gc2hvdWxkIGJlIHN0aWxsIGFjdGl2ZSwgYnV0IG1hcmtlZCBmb3Ig\ncm9sbGJhY2sKICAgICAgICAgICAgYXNzZXJ0VHJ1ZShlbS5nZXRUcmFuc2Fj\ndGlvbigpLmlzQWN0aXZlKCkpOwogICAgICAgICAgICBhc3NlcnRUcnVlKGVt\nLmdldFRyYW5zYWN0aW9uKCkuZ2V0Um9sbGJhY2tPbmx5KCkpOwogICAgICAg\nIH0gZmluYWxseSB7CiAgICAgICAgICAgIGlmIChlbS5nZXRUcmFuc2FjdGlv\nbigpLmlzQWN0aXZlKCkpCiAgICAgICAgICAgICAgICBlbS5nZXRUcmFuc2Fj\ndGlvbigpLnJvbGxiYWNrKCk7CiAgICAgICAgICAgIGVtLmNsb3NlKCk7CiAg\nICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RQb3N0UGVyc2lz\ndEV4Y2VwdGlvbkR1cmluZ0NvbW1pdCgpIHsKICAgICAgICBFbnRpdHlNYW5h\nZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBl\nbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgRXhjZXB0aW9u\nc0Zyb21DYWxsYmFja3NFbnRpdHkgbyA9IG5ldyBFeGNlcHRpb25zRnJvbUNh\nbGxiYWNrc0VudGl0eSgpOwogICAgICAgIG8uc2V0VGhyb3dPblBvc3RQZXJz\naXN0KHRydWUpOwogICAgICAgIGVtLnBlcnNpc3Qobyk7CiAgICAgICAgbXV0\nYXRlQW5kQ29tbWl0KGVtLCBvKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQg\nbXV0YXRlQW5kQ29tbWl0KEVudGl0eU1hbmFnZXIgZW0sCiAgICAgICAgRXhj\nZXB0aW9uc0Zyb21DYWxsYmFja3NFbnRpdHkgbykgewogICAgICAgIG8uc2V0\nU3RyaW5nRmllbGQoImZvbyIpOwogICAgICAgIGNvbW1pdChlbSk7CiAgICB9\nCgogICAgcHJpdmF0ZSB2b2lkIGNvbW1pdChFbnRpdHlNYW5hZ2VyIGVtKSB7\nCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24o\nKS5jb21taXQoKTsKICAgICAgICAgICAgZmFpbCgiY29tbWl0IHNob3VsZCBo\nYXZlIGZhaWxlZCIpOwogICAgICAgIH0gY2F0Y2ggKFJvbGxiYWNrRXhjZXB0\naW9uIHJlKSB7CiAgICAgICAgICAgIGFzc2VydEVxdWFscyhDYWxsYmFja1Rl\nc3RFeGNlcHRpb24uY2xhc3MsCiAgICAgICAgICAgICAgICByZS5nZXRDYXVz\nZSgpLmdldENsYXNzKCkpOwoKICAgICAgICAgICAgLy8gdHJhbnNhY3Rpb24g\nc2hvdWxkIGJlIHJvbGxlZCBiYWNrIGF0IHRoaXMgcG9pbnQKICAgICAgICAg\nICAgYXNzZXJ0RmFsc2UoZW0uZ2V0VHJhbnNhY3Rpb24oKS5pc0FjdGl2ZSgp\nKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBpZiAoZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5pc0FjdGl2ZSgpKQogICAgICAgICAgICAgICAgZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5yb2xsYmFjaygpOwogICAgICAgICAgICBlbS5j\nbG9zZSgpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nUHJlUGVyc2lzdEV4Y2VwdGlvbkR1cmluZ0ZsdXNoV2l0aE5ld0ZsdXNoZWRJ\nbnN0YW5jZSgpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNy\nZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlv\nbigpLmJlZ2luKCk7CiAgICAgICAgRXhjZXB0aW9uc0Zyb21DYWxsYmFja3NF\nbnRpdHkgbyA9IG5ldyBFeGNlcHRpb25zRnJvbUNhbGxiYWNrc0VudGl0eSgp\nOwogICAgICAgIGVtLnBlcnNpc3Qobyk7CiAgICAgICAgZW0uZmx1c2goKTsK\nICAgICAgICBvLnNldFRocm93T25QcmVQZXJzaXN0KHRydWUpOwogICAgICAg\nIC8vIHNob3VsZCBwYXNzOyBwcmUtcGVyc2lzdCBzaG91bGQgbm90IGJlIHRy\naWdnZXJlZAogICAgICAgIG8uc2V0U3RyaW5nRmllbGQoImZvbyIpOwogICAg\nICAgIGVtLmZsdXNoKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5j\nb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHRlc3RQcmVQZXJzaXN0RXhjZXB0aW9uRHVyaW5nQ29tbWl0V2l0\naE5ld0ZsdXNoZWRJbnN0YW5jZSgpIHsKICAgICAgICBFbnRpdHlNYW5hZ2Vy\nIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBlbS5n\nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgRXhjZXB0aW9uc0Zy\nb21DYWxsYmFja3NFbnRpdHkgbyA9IG5ldyBFeGNlcHRpb25zRnJvbUNhbGxi\nYWNrc0VudGl0eSgpOwogICAgICAgIGVtLnBlcnNpc3Qobyk7CiAgICAgICAg\nZW0uZmx1c2goKTsKICAgICAgICBvLnNldFRocm93T25QcmVQZXJzaXN0KHRy\ndWUpOwogICAgICAgIC8vIHNob3VsZCBwYXNzOyBwcmUtcGVyc2lzdCBzaG91\nbGQgbm90IGJlIHRyaWdnZXJlZAogICAgICAgIG8uc2V0U3RyaW5nRmllbGQo\nImZvbyIpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7\nCiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0\nZXN0UG9zdFBlcnNpc3RFeGNlcHRpb25EdXJpbmdGbHVzaFdpdGhOZXdGbHVz\naGVkSW5zdGFuY2UoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVt\nZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5iZWdpbigpOwogICAgICAgIEV4Y2VwdGlvbnNGcm9tQ2FsbGJh\nY2tzRW50aXR5IG8gPSBuZXcgRXhjZXB0aW9uc0Zyb21DYWxsYmFja3NFbnRp\ndHkoKTsKICAgICAgICBlbS5wZXJzaXN0KG8pOwogICAgICAgIGVtLmZsdXNo\nKCk7CiAgICAgICAgby5zZXRUaHJvd09uUG9zdFBlcnNpc3QodHJ1ZSk7CiAg\nICAgICAgLy8gc2hvdWxkIHBhc3M7IHBvc3QtcGVyc2lzdCBzaG91bGQgbm90\nIGJlIHRyaWdnZXJlZAogICAgICAgIG8uc2V0U3RyaW5nRmllbGQoImZvbyIp\nOwogICAgICAgIGVtLmZsdXNoKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rp\nb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHRlc3RQb3N0UGVyc2lzdEV4Y2VwdGlvbkR1cmluZ0Nv\nbW1pdFdpdGhOZXdGbHVzaGVkSW5zdGFuY2UoKSB7CiAgICAgICAgRW50aXR5\nTWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAg\nICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIEV4Y2Vw\ndGlvbnNGcm9tQ2FsbGJhY2tzRW50aXR5IG8gPSBuZXcgRXhjZXB0aW9uc0Zy\nb21DYWxsYmFja3NFbnRpdHkoKTsKICAgICAgICBlbS5wZXJzaXN0KG8pOwog\nICAgICAgIGVtLmZsdXNoKCk7CiAgICAgICAgby5zZXRUaHJvd09uUG9zdFBl\ncnNpc3QodHJ1ZSk7CiAgICAgICAgLy8gc2hvdWxkIHBhc3M7IHBvc3QtcGVy\nc2lzdCBzaG91bGQgbm90IGJlIHRyaWdnZXJlZAogICAgICAgIG8uc2V0U3Ry\naW5nRmllbGQoImZvbyIpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCku\nY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCB0ZXN0UHJlVXBkYXRlRXhjZXB0aW9uV2l0aE5ld0luc3RhbmNl\nKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50\naXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVn\naW4oKTsKICAgICAgICBFeGNlcHRpb25zRnJvbUNhbGxiYWNrc0VudGl0eSBv\nID0gbmV3IEV4Y2VwdGlvbnNGcm9tQ2FsbGJhY2tzRW50aXR5KCk7CiAgICAg\nICAgby5zZXRUaHJvd09uUHJlVXBkYXRlKHRydWUpOwogICAgICAgIGVtLnBl\ncnNpc3Qobyk7CiAgICAgICAgby5zZXRTdHJpbmdGaWVsZCgiZm9vIik7CiAg\nICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBl\nbS5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RQb3N0VXBk\nYXRlRXhjZXB0aW9uRHVyaW5nRmx1c2hXaXRoTmV3SW5zdGFuY2UoKSB7CiAg\nICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwog\nICAgICAgIEV4Y2VwdGlvbnNGcm9tQ2FsbGJhY2tzRW50aXR5IG8gPSBuZXcg\nRXhjZXB0aW9uc0Zyb21DYWxsYmFja3NFbnRpdHkoKTsKICAgICAgICBvLnNl\ndFRocm93T25Qb3N0VXBkYXRlKHRydWUpOwogICAgICAgIGVtLnBlcnNpc3Qo\nbyk7CiAgICAgICAgby5zZXRTdHJpbmdGaWVsZCgiZm9vIik7CiAgICAgICAg\nZW0uZmx1c2goKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1p\ndCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgdGVzdFBvc3RVcGRhdGVFeGNlcHRpb25EdXJpbmdDb21taXRXaXRoTmV3\nSW5zdGFuY2UoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5j\ncmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rp\nb24oKS5iZWdpbigpOwogICAgICAgIEV4Y2VwdGlvbnNGcm9tQ2FsbGJhY2tz\nRW50aXR5IG8gPSBuZXcgRXhjZXB0aW9uc0Zyb21DYWxsYmFja3NFbnRpdHko\nKTsKICAgICAgICBvLnNldFRocm93T25Qb3N0VXBkYXRlKHRydWUpOwogICAg\nICAgIGVtLnBlcnNpc3Qobyk7CiAgICAgICAgby5zZXRTdHJpbmdGaWVsZCgi\nZm9vIik7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsK\nICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRl\nc3RQcmVVcGRhdGVFeGNlcHRpb25EdXJpbmdGbHVzaFdpdGhOZXdGbHVzaGVk\nSW5zdGFuY2UoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5j\ncmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rp\nb24oKS5iZWdpbigpOwogICAgICAgIEV4Y2VwdGlvbnNGcm9tQ2FsbGJhY2tz\nRW50aXR5IG8gPSBuZXcgRXhjZXB0aW9uc0Zyb21DYWxsYmFja3NFbnRpdHko\nKTsKICAgICAgICBlbS5wZXJzaXN0KG8pOwogICAgICAgIGVtLmZsdXNoKCk7\nCiAgICAgICAgby5zZXRUaHJvd09uUHJlVXBkYXRlKHRydWUpOwogICAgICAg\nIG11dGF0ZUFuZEZsdXNoKGVtLCBvKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0UHJlVXBkYXRlRXhjZXB0aW9uRHVyaW5nQ29tbWl0V2l0aE5ld0Zs\ndXNoZWRJbnN0YW5jZSgpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0g\nZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRUcmFu\nc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgRXhjZXB0aW9uc0Zyb21DYWxs\nYmFja3NFbnRpdHkgbyA9IG5ldyBFeGNlcHRpb25zRnJvbUNhbGxiYWNrc0Vu\ndGl0eSgpOwogICAgICAgIGVtLnBlcnNpc3Qobyk7CiAgICAgICAgZW0uZmx1\nc2goKTsKICAgICAgICBvLnNldFRocm93T25QcmVVcGRhdGUodHJ1ZSk7CiAg\nICAgICAgbXV0YXRlQW5kQ29tbWl0KGVtLCBvKTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCB0ZXN0UG9zdFVwZGF0ZUV4Y2VwdGlvbkR1cmluZ0ZsdXNoV2l0\naE5ld0ZsdXNoZWRJbnN0YW5jZSgpIHsKICAgICAgICBFbnRpdHlNYW5hZ2Vy\nIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBlbS5n\nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgRXhjZXB0aW9uc0Zy\nb21DYWxsYmFja3NFbnRpdHkgbyA9IG5ldyBFeGNlcHRpb25zRnJvbUNhbGxi\nYWNrc0VudGl0eSgpOwogICAgICAgIGVtLnBlcnNpc3Qobyk7CiAgICAgICAg\nZW0uZmx1c2goKTsKICAgICAgICBvLnNldFRocm93T25Qb3N0VXBkYXRlKHRy\ndWUpOwogICAgICAgIG11dGF0ZUFuZEZsdXNoKGVtLCBvKTsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0UG9zdFVwZGF0ZUV4Y2VwdGlvbkR1cmluZ0Nv\nbW1pdFdpdGhOZXdGbHVzaGVkSW5zdGFuY2UoKSB7CiAgICAgICAgRW50aXR5\nTWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAg\nICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIEV4Y2Vw\ndGlvbnNGcm9tQ2FsbGJhY2tzRW50aXR5IG8gPSBuZXcgRXhjZXB0aW9uc0Zy\nb21DYWxsYmFja3NFbnRpdHkoKTsKICAgICAgICBlbS5wZXJzaXN0KG8pOwog\nICAgICAgIGVtLmZsdXNoKCk7CiAgICAgICAgby5zZXRUaHJvd09uUG9zdFVw\nZGF0ZSh0cnVlKTsKICAgICAgICBtdXRhdGVBbmRDb21taXQoZW0sIG8pOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RQcmVVcGRhdGVFeGNlcHRpb25E\ndXJpbmdGbHVzaFdpdGhFeGlzdGluZ0luc3RhbmNlKCkgewogICAgICAgIE9i\namVjdCBvaWQgPSBpbnNlcnQoIm5ldyBpbnN0YW5jZSIpOwoKICAgICAgICBF\nbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsK\nICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAg\nRXhjZXB0aW9uc0Zyb21DYWxsYmFja3NFbnRpdHkgbyA9CiAgICAgICAgICAg\nIGVtLmZpbmQoRXhjZXB0aW9uc0Zyb21DYWxsYmFja3NFbnRpdHkuY2xhc3Ms\nIG9pZCk7CiAgICAgICAgby5zZXRUaHJvd09uUHJlVXBkYXRlKHRydWUpOwog\nICAgICAgIG11dGF0ZUFuZEZsdXNoKGVtLCBvKTsKICAgIH0KCiAgICBwcml2\nYXRlIE9iamVjdCBpbnNlcnQoU3RyaW5nIHMpIHsKICAgICAgICBFbnRpdHlN\nYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgRXhjZXB0\naW9uc0Zyb21DYWxsYmFja3NFbnRpdHkgbyA9IG5ldyBFeGNlcHRpb25zRnJv\nbUNhbGxiYWNrc0VudGl0eSgpOwogICAgICAgIG8uc2V0U3RyaW5nRmllbGQo\ncyk7CiAgICAgICAgZW0ucGVyc2lzdChvKTsKICAgICAgICBlbS5nZXRUcmFu\nc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICAg\nICAgcmV0dXJuIG8uZ2V0SWQoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0\nZXN0UHJlVXBkYXRlRXhjZXB0aW9uRHVyaW5nQ29tbWl0V2l0aEV4aXN0aW5n\nSW5zdGFuY2UoKSB7CiAgICAgICAgT2JqZWN0IG9pZCA9IGluc2VydCgibmV3\nIGluc3RhbmNlIik7CgogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYu\nY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0\naW9uKCkuYmVnaW4oKTsKICAgICAgICBFeGNlcHRpb25zRnJvbUNhbGxiYWNr\nc0VudGl0eSBvID0KICAgICAgICAgICAgZW0uZmluZChFeGNlcHRpb25zRnJv\nbUNhbGxiYWNrc0VudGl0eS5jbGFzcywgb2lkKTsKICAgICAgICBvLnNldFRo\ncm93T25QcmVVcGRhdGUodHJ1ZSk7CiAgICAgICAgbXV0YXRlQW5kQ29tbWl0\nKGVtLCBvKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0UG9zdFVwZGF0\nZUV4Y2VwdGlvbkR1cmluZ0ZsdXNoV2l0aEV4aXN0aW5nSW5zdGFuY2UoKSB7\nCiAgICAgICAgT2JqZWN0IG9pZCA9IGluc2VydCgibmV3IGluc3RhbmNlIik7\nCgogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5\nTWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4o\nKTsKICAgICAgICBFeGNlcHRpb25zRnJvbUNhbGxiYWNrc0VudGl0eSBvID0K\nICAgICAgICAgICAgZW0uZmluZChFeGNlcHRpb25zRnJvbUNhbGxiYWNrc0Vu\ndGl0eS5jbGFzcywgb2lkKTsKICAgICAgICBvLnNldFRocm93T25Qb3N0VXBk\nYXRlKHRydWUpOwogICAgICAgIG11dGF0ZUFuZEZsdXNoKGVtLCBvKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0UG9zdFVwZGF0ZUV4Y2VwdGlvbkR1\ncmluZ0NvbW1pdFdpdGhFeGlzdGluZ0luc3RhbmNlKCkgewogICAgICAgIE9i\namVjdCBvaWQgPSBpbnNlcnQoIm5ldyBpbnN0YW5jZSIpOwoKICAgICAgICBF\nbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsK\nICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAg\nRXhjZXB0aW9uc0Zyb21DYWxsYmFja3NFbnRpdHkgbyA9CiAgICAgICAgICAg\nIGVtLmZpbmQoRXhjZXB0aW9uc0Zyb21DYWxsYmFja3NFbnRpdHkuY2xhc3Ms\nIG9pZCk7CiAgICAgICAgby5zZXRUaHJvd09uUG9zdFVwZGF0ZSh0cnVlKTsK\nICAgICAgICBtdXRhdGVBbmRDb21taXQoZW0sIG8pOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHRlc3RQcmVVcGRhdGVFeGNlcHRpb25EdXJpbmdGbHVzaFdp\ndGhFeGlzdGluZ0ZsdXNoZWRJbnN0YW5jZSgpIHsKICAgICAgICBPYmplY3Qg\nb2lkID0gaW5zZXJ0KCJuZXcgaW5zdGFuY2UiKTsKCiAgICAgICAgRW50aXR5\nTWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAg\nICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIEV4Y2Vw\ndGlvbnNGcm9tQ2FsbGJhY2tzRW50aXR5IG8gPQogICAgICAgICAgICBlbS5m\naW5kKEV4Y2VwdGlvbnNGcm9tQ2FsbGJhY2tzRW50aXR5LmNsYXNzLCBvaWQp\nOwogICAgICAgIG8uc2V0U3RyaW5nRmllbGQoImZvbyIpOwogICAgICAgIGVt\nLmZsdXNoKCk7CiAgICAgICAgby5zZXRUaHJvd09uUHJlVXBkYXRlKHRydWUp\nOwogICAgICAgIC8vIHRoZXJlJ3Mgbm8gYWRkaXRpb25hbCBmbHVzaCB3b3Jr\nOyBzaG91bGQgbm90IHJlLWludm9rZSB0aGUgY2FsbGJhY2sKICAgICAgICBl\nbS5mbHVzaCgpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0\nKCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0UHJlVXBkYXRlRXhjZXB0aW9uRHVyaW5nQ29tbWl0V2l0aEV4aXN0\naW5nRmx1c2hlZEluc3RhbmNlKCl7CiAgICAgICAgT2JqZWN0IG9pZCA9IGlu\nc2VydCgibmV3IGluc3RhbmNlIik7CgogICAgICAgIEVudGl0eU1hbmFnZXIg\nZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdl\ndFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBFeGNlcHRpb25zRnJv\nbUNhbGxiYWNrc0VudGl0eSBvID0KICAgICAgICAgICAgZW0uZmluZChFeGNl\ncHRpb25zRnJvbUNhbGxiYWNrc0VudGl0eS5jbGFzcywgb2lkKTsKICAgICAg\nICBvLnNldFN0cmluZ0ZpZWxkKCJmb28iKTsKICAgICAgICBlbS5mbHVzaCgp\nOwogICAgICAgIG8uc2V0VGhyb3dPblByZVVwZGF0ZSh0cnVlKTsKICAgICAg\nICAvLyB0aGVyZSdzIG5vIGFkZGl0aW9uYWwgZmx1c2ggd29yazsgc2hvdWxk\nIG5vdCByZS1pbnZva2UgdGhlIGNhbGxiYWNrCiAgICAgICAgZW0uZ2V0VHJh\nbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RQb3N0VXBkYXRlRXhjZXB0aW9uRHVy\naW5nRmx1c2hXaXRoRXhpc3RpbmdGbHVzaGVkSW5zdGFuY2UoKXsKICAgICAg\nICBPYmplY3Qgb2lkID0gaW5zZXJ0KCJuZXcgaW5zdGFuY2UiKTsKCiAgICAg\nICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2Vy\nKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAg\nICAgIEV4Y2VwdGlvbnNGcm9tQ2FsbGJhY2tzRW50aXR5IG8gPQogICAgICAg\nICAgICBlbS5maW5kKEV4Y2VwdGlvbnNGcm9tQ2FsbGJhY2tzRW50aXR5LmNs\nYXNzLCBvaWQpOwogICAgICAgIG8uc2V0U3RyaW5nRmllbGQoImZvbyIpOwog\nICAgICAgIGVtLmZsdXNoKCk7CiAgICAgICAgby5zZXRUaHJvd09uUG9zdFVw\nZGF0ZSh0cnVlKTsKICAgICAgICAvLyBubyBtdXRhdGlvbnM7IHNob3VsZCBu\nb3QgdHJpZ2dlciBhIFBvc3RVcGRhdGUKICAgICAgICBlbS5mbHVzaCgpOwog\nICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAg\nZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0UG9zdFVw\nZGF0ZUV4Y2VwdGlvbkR1cmluZ0NvbW1pdFdpdGhFeGlzdGluZ0ZsdXNoZWRJ\nbnN0YW5jZSgpCiAgICB7CiAgICAgICAgT2JqZWN0IG9pZCA9IGluc2VydCgi\nbmV3IGluc3RhbmNlIik7CgogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBl\nbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5z\nYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBFeGNlcHRpb25zRnJvbUNhbGxi\nYWNrc0VudGl0eSBvID0KICAgICAgICAgICAgZW0uZmluZChFeGNlcHRpb25z\nRnJvbUNhbGxiYWNrc0VudGl0eS5jbGFzcywgb2lkKTsKICAgICAgICBvLnNl\ndFN0cmluZ0ZpZWxkKCJmb28iKTsKICAgICAgICBlbS5mbHVzaCgpOwogICAg\nICAgIC8vIG5vIG11dGF0aW9uczsgc2hvdWxkIG5vdCB0cmlnZ2VyIGEgUG9z\ndFVwZGF0ZQogICAgICAgIG8uc2V0VGhyb3dPblBvc3RVcGRhdGUodHJ1ZSk7\nCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAg\nICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RQb3N0\nTG9hZEV4Y2VwdGlvbigpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0g\nZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRUcmFu\nc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgRXhjZXB0aW9uc0Zyb21DYWxs\nYmFja3NFbnRpdHkgbyA9IG5ldyBFeGNlcHRpb25zRnJvbUNhbGxiYWNrc0Vu\ndGl0eSgpOwogICAgICAgIG8uc2V0VGhyb3dPblBvc3RMb2FkKHRydWUpOwog\nICAgICAgIGVtLnBlcnNpc3Qobyk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rp\nb24oKS5jb21taXQoKTsKICAgICAgICBPYmplY3Qgb2lkID0gT3BlbkpQQVBl\ncnNpc3RlbmNlLmNhc3QoZW0pLmdldE9iamVjdElkKG8pOwogICAgICAgIGVt\nLmNsb3NlKCk7CiAgICAgICAgCiAgICAgICAgZW0gPSBlbWYuY3JlYXRlRW50\naXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVn\naW4oKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBlbS5maW5kKEV4Y2Vw\ndGlvbnNGcm9tQ2FsbGJhY2tzRW50aXR5LmNsYXNzLCBvaWQpOwogICAgICAg\nICAgICBmYWlsKCJmaW5kIHNob3VsZCBoYXZlIGZhaWxlZCIpOwogICAgICAg\nIH0gY2F0Y2ggKENhbGxiYWNrVGVzdEV4Y2VwdGlvbiBjdGUpIHsKICAgICAg\nICAgICAgLy8gdHJhbnNhY3Rpb24gc2hvdWxkIGJlIGFjdGl2ZSBidXQgbWFy\na2VkIGZvciByb2xsYmFjawogICAgICAgICAgICBhc3NlcnRUcnVlKGVtLmdl\ndFRyYW5zYWN0aW9uKCkuaXNBY3RpdmUoKSk7CiAgICAgICAgICAgIGFzc2Vy\ndFRydWUoZW0uZ2V0VHJhbnNhY3Rpb24oKS5nZXRSb2xsYmFja09ubHkoKSk7\nCiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgaWYgKGVtLmdldFRy\nYW5zYWN0aW9uKCkuaXNBY3RpdmUoKSkKICAgICAgICAgICAgICAgIGVtLmdl\ndFRyYW5zYWN0aW9uKCkucm9sbGJhY2soKTsKICAgICAgICAgICAgZW0uY2xv\nc2UoKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdFBy\nZURlbGV0ZUV4Y2VwdGlvbigpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVt\nID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRU\ncmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgRXhjZXB0aW9uc0Zyb21D\nYWxsYmFja3NFbnRpdHkgbyA9IG5ldyBFeGNlcHRpb25zRnJvbUNhbGxiYWNr\nc0VudGl0eSgpOwogICAgICAgIGVtLnBlcnNpc3Qobyk7CiAgICAgICAgZW0u\nZmx1c2goKTsKICAgICAgICBvLnNldFRocm93T25QcmVSZW1vdmUodHJ1ZSk7\nCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZW0ucmVtb3ZlKG8pOwogICAg\nICAgIH0gY2F0Y2ggKENhbGxiYWNrVGVzdEV4Y2VwdGlvbiBjdGUpIHsKICAg\nICAgICAgICAgLy8gdHJhbnNhY3Rpb24gc2hvdWxkIGJlIGFjdGl2ZSBidXQg\nbWFya2VkIGZvciByb2xsYmFjawogICAgICAgICAgICBhc3NlcnRUcnVlKGVt\nLmdldFRyYW5zYWN0aW9uKCkuaXNBY3RpdmUoKSk7CiAgICAgICAgICAgIGFz\nc2VydFRydWUoZW0uZ2V0VHJhbnNhY3Rpb24oKS5nZXRSb2xsYmFja09ubHko\nKSk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgaWYgKGVtLmdl\ndFRyYW5zYWN0aW9uKCkuaXNBY3RpdmUoKSkKICAgICAgICAgICAgICAgIGVt\nLmdldFRyYW5zYWN0aW9uKCkucm9sbGJhY2soKTsKICAgICAgICAgICAgZW0u\nY2xvc2UoKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVz\ndFBvc3REZWxldGVFeGNlcHRpb25EdXJpbmdGbHVzaCgpIHsKICAgICAgICBF\nbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsK\nICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAg\nRXhjZXB0aW9uc0Zyb21DYWxsYmFja3NFbnRpdHkgbyA9IG5ldyBFeGNlcHRp\nb25zRnJvbUNhbGxiYWNrc0VudGl0eSgpOwogICAgICAgIGVtLnBlcnNpc3Qo\nbyk7CiAgICAgICAgZW0uZmx1c2goKTsKICAgICAgICBvLnNldFRocm93T25Q\nb3N0UmVtb3ZlKHRydWUpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGVt\nLnJlbW92ZShvKTsKICAgICAgICB9IGNhdGNoIChDYWxsYmFja1Rlc3RFeGNl\ncHRpb24gZSkgewogICAgICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLnJv\nbGxiYWNrKCk7CiAgICAgICAgICAgIGVtLmNsb3NlKCk7CiAgICAgICAgICAg\nIGZhaWwoIlBvc3RSZW1vdmUgaXMgYmVpbmcgY2FsbGVkIHRvbyBzb29uIChi\nZWZvcmUgU1FMIGlzIGlzc3VlZCkiKTsKICAgICAgICB9CiAgICAgICAgZmx1\nc2goZW0pOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RQb3N0RGVsZXRl\nRXhjZXB0aW9uRHVyaW5nQ29tbWl0KCkgewogICAgICAgIEVudGl0eU1hbmFn\nZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVt\nLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBFeGNlcHRpb25z\nRnJvbUNhbGxiYWNrc0VudGl0eSBvID0gbmV3IEV4Y2VwdGlvbnNGcm9tQ2Fs\nbGJhY2tzRW50aXR5KCk7CiAgICAgICAgZW0ucGVyc2lzdChvKTsKICAgICAg\nICBlbS5mbHVzaCgpOwogICAgICAgIG8uc2V0VGhyb3dPblBvc3RSZW1vdmUo\ndHJ1ZSk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZW0ucmVtb3ZlKG8p\nOwogICAgICAgIH0gY2F0Y2ggKENhbGxiYWNrVGVzdEV4Y2VwdGlvbiBlKSB7\nCiAgICAgICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkucm9sbGJhY2soKTsK\nICAgICAgICAgICAgZW0uY2xvc2UoKTsKICAgICAgICAgICAgZmFpbCgiUG9z\ndFJlbW92ZSBpcyBiZWluZyBjYWxsZWQgdG9vIHNvb24gKGJlZm9yZSBTUUwg\naXMgaXNzdWVkKSIpOwogICAgICAgIH0KICAgICAgICBjb21taXQoZW0pOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RQcmVEZWxldGVFeGNlcHRpb25E\nb3VibGVEZWxldGUoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVt\nZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5iZWdpbigpOwogICAgICAgIEV4Y2VwdGlvbnNGcm9tQ2FsbGJh\nY2tzRW50aXR5IG8gPSBuZXcgRXhjZXB0aW9uc0Zyb21DYWxsYmFja3NFbnRp\ndHkoKTsKICAgICAgICBlbS5wZXJzaXN0KG8pOwogICAgICAgIGVtLmZsdXNo\nKCk7CiAgICAgICAgLy8gdGhpcyBzaG91bGQgcGFzcwogICAgICAgIGVtLnJl\nbW92ZShvKTsKICAgICAgICBlbS5mbHVzaCgpOwogICAgICAgIG8uc2V0VGhy\nb3dPblByZVJlbW92ZSh0cnVlKTsKICAgICAgICAvLyB0aGlzIHNob3VkIGFs\nc28gcGFzczsgbm8gd29yayB0byBkbyBmb3IgZGVsZXRlCiAgICAgICAgZW0u\ncmVtb3ZlKG8pOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0\nKCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0UG9zdERlbGV0ZUV4Y2VwdGlvbkR1cmluZ0ZsdXNoRG91YmxlRGVs\nZXRlKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCku\nYmVnaW4oKTsKICAgICAgICBFeGNlcHRpb25zRnJvbUNhbGxiYWNrc0VudGl0\neSBvID0gbmV3IEV4Y2VwdGlvbnNGcm9tQ2FsbGJhY2tzRW50aXR5KCk7CiAg\nICAgICAgZW0ucGVyc2lzdChvKTsKICAgICAgICBlbS5mbHVzaCgpOwogICAg\nICAgIC8vIHRoaXMgc2hvdWxkIHBhc3MKICAgICAgICBlbS5yZW1vdmUobyk7\nCiAgICAgICAgZW0uZmx1c2goKTsKICAgICAgICBvLnNldFRocm93T25Qb3N0\nUmVtb3ZlKHRydWUpOwogICAgICAgIC8vIHRoaXMgc2hvdWQgYWxzbyBwYXNz\nOyBubyB3b3JrIHRvIGRvIGZvciBkZWxldGUKICAgICAgICBlbS5yZW1vdmUo\nbyk7CiAgICAgICAgZW0uZmx1c2goKTsKICAgICAgICBlbS5nZXRUcmFuc2Fj\ndGlvbigpLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgdGVzdFBvc3REZWxldGVFeGNlcHRpb25EdXJpbmdD\nb21taXREb3VibGVEZWxldGUoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBl\nbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIEV4Y2VwdGlvbnNGcm9t\nQ2FsbGJhY2tzRW50aXR5IG8gPSBuZXcgRXhjZXB0aW9uc0Zyb21DYWxsYmFj\na3NFbnRpdHkoKTsKICAgICAgICBlbS5wZXJzaXN0KG8pOwogICAgICAgIGVt\nLmZsdXNoKCk7CiAgICAgICAgLy8gdGhpcyBzaG91bGQgcGFzcwogICAgICAg\nIGVtLnJlbW92ZShvKTsKICAgICAgICBlbS5mbHVzaCgpOwogICAgICAgIG8u\nc2V0VGhyb3dPblBvc3RSZW1vdmUodHJ1ZSk7CiAgICAgICAgLy8gdGhpcyBz\naG91ZCBhbHNvIHBhc3M7IG5vIHdvcmsgdG8gZG8gZm9yIGRlbGV0ZQogICAg\nICAgIGVtLnJlbW92ZShvKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigp\nLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9Cn0K\n","encoding":"base64"}

