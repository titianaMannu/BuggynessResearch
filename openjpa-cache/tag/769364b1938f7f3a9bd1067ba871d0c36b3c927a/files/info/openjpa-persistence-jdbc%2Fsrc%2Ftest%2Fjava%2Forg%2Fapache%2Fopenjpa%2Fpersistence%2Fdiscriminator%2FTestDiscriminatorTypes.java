{"sha":"2c19810ac3c8f756476097b36d4c1019b597845e","node_id":"MDQ6QmxvYjIwNjM2NDoyYzE5ODEwYWMzYzhmNzU2NDc2MDk3YjM2ZDRjMTAxOWI1OTc4NDVl","size":6490,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/2c19810ac3c8f756476097b36d4c1019b597845e","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZGlzY3Jp\nbWluYXRvcjsKCmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGphdmF4\nLnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXI7CmltcG9ydCBqYXZheC5wZXJz\naXN0ZW5jZS5RdWVyeTsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5tZXRhLkRpc2NyaW1pbmF0b3I7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEubWV0YS5KYXZhVHlwZXM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\ncGVyc2lzdGVuY2UudGVzdC5TaW5nbGVFTUZUZXN0Q2FzZTsKCnB1YmxpYyBj\nbGFzcyBUZXN0RGlzY3JpbWluYXRvclR5cGVzIGV4dGVuZHMgU2luZ2xlRU1G\nVGVzdENhc2UgewoKICAgIHByb3RlY3RlZCB2b2lkIHNldFVwKCkgewogICAg\nICAgIHN1cGVyLnNldFVwKENoYXJBYnN0cmFjdEVudGl0eS5jbGFzcywgQ2hh\nckxlYWZFbnRpdHkuY2xhc3MsCiAgICAgICAgICAgICAgICBDaGFyUm9vdEVu\ndGl0eS5jbGFzcywgSW50ZWdlckFic3RyYWN0RW50aXR5LmNsYXNzLAogICAg\nICAgICAgICAgICAgSW50ZWdlckxlYWZFbnRpdHkuY2xhc3MsIEludGVnZXJS\nb290RW50aXR5LmNsYXNzLAogICAgICAgICAgICAgICAgU3RyaW5nQWJzdHJh\nY3RFbnRpdHkuY2xhc3MsIFN0cmluZ0xlYWZFbnRpdHkuY2xhc3MsCiAgICAg\nICAgICAgICAgICBTdHJpbmdSb290RW50aXR5LmNsYXNzLCBDTEVBUl9UQUJM\nRVMpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RDaGFyRGlzY3JpbWlu\nYXRvcnMoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVh\ndGVFbnRpdHlNYW5hZ2VyKCk7IC8vIGxvYWQgdHlwZXMKCiAgICAgICAgRGlz\nY3JpbWluYXRvciBkaXNjcmltID0gZ2V0TWFwcGluZygiQ2hhckFic3RyYWN0\nRW50aXR5IikKICAgICAgICAgICAgICAgIC5nZXREaXNjcmltaW5hdG9yKCk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKG5ldyBDaGFyYWN0ZXIoJ0MnKSwgZGlz\nY3JpbS5nZXRWYWx1ZSgpKTsgLy8gR2VuZXJhdGVkCiAgICAgICAgYXNzZXJ0\nRXF1YWxzKEphdmFUeXBlcy5DSEFSLCBkaXNjcmltLmdldEphdmFUeXBlKCkp\nOwoKICAgICAgICBkaXNjcmltID0gZ2V0TWFwcGluZygiY2hyTGVhZiIpLmdl\ndERpc2NyaW1pbmF0b3IoKTsKICAgICAgICBhc3NlcnRFcXVhbHMobmV3IENo\nYXJhY3RlcignYycpLCBkaXNjcmltLmdldFZhbHVlKCkpOwogICAgICAgIGFz\nc2VydEVxdWFscyhKYXZhVHlwZXMuQ0hBUiwgZGlzY3JpbS5nZXRKYXZhVHlw\nZSgpKTsKCiAgICAgICAgZGlzY3JpbSA9IGdldE1hcHBpbmcoIkNoYXJSb290\nRW50aXR5IikuZ2V0RGlzY3JpbWluYXRvcigpOwogICAgICAgIGFzc2VydEVx\ndWFscyhuZXcgQ2hhcmFjdGVyKCdSJyksIGRpc2NyaW0uZ2V0VmFsdWUoKSk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKEphdmFUeXBlcy5DSEFSLCBkaXNjcmlt\nLmdldEphdmFUeXBlKCkpOwogICAgICAgIAogICAgICAgIENoYXJMZWFmRW50\naXR5IGxlYWYgPSBuZXcgQ2hhckxlYWZFbnRpdHkoKTsKICAgICAgICBDaGFy\nUm9vdEVudGl0eSByb290ID0gbmV3IENoYXJSb290RW50aXR5KCk7CiAgICAg\nICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIGVtLnBl\ncnNpc3QobGVhZik7CiAgICAgICAgZW0ucGVyc2lzdChyb290KTsKICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIAogICAg\nICAgIGVtLnJlZnJlc2gobGVhZik7CiAgICAgICAgZW0ucmVmcmVzaChyb290\nKTsKICAgICAgICAKICAgICAgICBlbS5jbGVhcigpOwogICAgICAgIAogICAg\nICAgIENoYXJMZWFmRW50aXR5IGxlYWYyID0gZW0uZmluZChDaGFyTGVhZkVu\ndGl0eS5jbGFzcywgbGVhZi5nZXRJZCgpKTsKICAgICAgICBDaGFyUm9vdEVu\ndGl0eSByb290MiA9IGVtLmZpbmQoQ2hhclJvb3RFbnRpdHkuY2xhc3MsIHJv\nb3QuZ2V0SWQoKSk7CiAgICAgICAgCiAgICAgICAgYXNzZXJ0Tm90TnVsbChs\nZWFmMik7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChyb290Mik7CiAgICAgICAg\nZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0SW50RGlz\nY3JpbWluYXRvcnMoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVt\nZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7IC8vIGxvYWQgdGhlIHR5cGVzCgog\nICAgICAgIERpc2NyaW1pbmF0b3IgZGlzY3JpbSA9IGdldE1hcHBpbmcoIklu\ndGVnZXJBYnN0cmFjdEVudGl0eSIpCiAgICAgICAgICAgICAgICAuZ2V0RGlz\nY3JpbWluYXRvcigpOwogICAgICAgIGFzc2VydEVxdWFscyhuZXcgSW50ZWdl\ncigiSW50ZWdlckFic3RyYWN0RW50aXR5Ii5oYXNoQ29kZSgpKSwgZGlzY3Jp\nbQogICAgICAgICAgICAgICAgLmdldFZhbHVlKCkpOyAvLyBHZW5lcmF0ZWQg\ndmFsdWUKICAgICAgICBhc3NlcnRFcXVhbHMoSmF2YVR5cGVzLklOVCwgZGlz\nY3JpbS5nZXRKYXZhVHlwZSgpKTsKCiAgICAgICAgZGlzY3JpbSA9IGdldE1h\ncHBpbmcoImludExlYWYiKS5nZXREaXNjcmltaW5hdG9yKCk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKG5ldyBJbnRlZ2VyKCJpbnRMZWFmIi5oYXNoQ29kZSgp\nKSwgZGlzY3JpbS5nZXRWYWx1ZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nSmF2YVR5cGVzLklOVCwgZGlzY3JpbS5nZXRKYXZhVHlwZSgpKTsKCiAgICAg\nICAgZGlzY3JpbSA9IGdldE1hcHBpbmcoIkludGVnZXJSb290RW50aXR5Iiku\nZ2V0RGlzY3JpbWluYXRvcigpOwogICAgICAgIGFzc2VydEVxdWFscyhuZXcg\nSW50ZWdlcigxMDEwMSksIGRpc2NyaW0uZ2V0VmFsdWUoKSk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKEphdmFUeXBlcy5JTlQsIGRpc2NyaW0uZ2V0SmF2YVR5\ncGUoKSk7CgogICAgICAgIEludGVnZXJMZWFmRW50aXR5IGxlYWYgPSBuZXcg\nSW50ZWdlckxlYWZFbnRpdHkoKTsKICAgICAgICBJbnRlZ2VyUm9vdEVudGl0\neSByb290ID0gbmV3IEludGVnZXJSb290RW50aXR5KCk7CiAgICAgICAgZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIGVtLnBlcnNpc3Qo\nbGVhZik7CiAgICAgICAgZW0ucGVyc2lzdChyb290KTsKICAgICAgICBlbS5n\nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIAogICAgICAgIGVt\nLnJlZnJlc2gobGVhZik7CiAgICAgICAgZW0ucmVmcmVzaChyb290KTsKICAg\nICAgICAKICAgICAgICBlbS5jbGVhcigpOwoKICAgICAgICBJbnRlZ2VyTGVh\nZkVudGl0eSBsZWFmMiA9CiAgICAgICAgICAgICAgICBlbS5maW5kKEludGVn\nZXJMZWFmRW50aXR5LmNsYXNzLCBsZWFmLmdldElkKCkpOwogICAgICAgIElu\ndGVnZXJSb290RW50aXR5IHJvb3QyID0KICAgICAgICAgICAgICAgIGVtLmZp\nbmQoSW50ZWdlclJvb3RFbnRpdHkuY2xhc3MsIHJvb3QuZ2V0SWQoKSk7CiAg\nICAgICAgCiAgICAgICAgYXNzZXJ0Tm90TnVsbChsZWFmMik7CiAgICAgICAg\nYXNzZXJ0Tm90TnVsbChyb290Mik7CiAgICAgICAgZW0uY2xvc2UoKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0U3RyaW5nRGlzY3JpbWluYXRvcnMo\nKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRp\ndHlNYW5hZ2VyKCk7IC8vIGxvYWQgdGhlIHR5cGVzCiAgICAgICAgRGlzY3Jp\nbWluYXRvciBkaXNjcmltID0gZ2V0TWFwcGluZygiU3RyaW5nQWJzdHJhY3RF\nbnRpdHkiKQogICAgICAgICAgICAgICAgLmdldERpc2NyaW1pbmF0b3IoKTsK\nICAgICAgICBhc3NlcnRFcXVhbHMoIlN0cmluZ0Fic3RyYWN0RW50aXR5Iiwg\nZGlzY3JpbS5nZXRWYWx1ZSgpKTsgLy8gR2VuZXJhdGVkCiAgICAgICAgYXNz\nZXJ0RXF1YWxzKEphdmFUeXBlcy5TVFJJTkcsIGRpc2NyaW0uZ2V0SmF2YVR5\ncGUoKSk7CgogICAgICAgIGRpc2NyaW0gPSBnZXRNYXBwaW5nKCJzdHJMZWFm\nIikuZ2V0RGlzY3JpbWluYXRvcigpOwogICAgICAgIGFzc2VydEVxdWFscygi\nc3RyTGVhZiIsIGRpc2NyaW0uZ2V0VmFsdWUoKSk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKEphdmFUeXBlcy5TVFJJTkcsIGRpc2NyaW0uZ2V0SmF2YVR5cGUo\nKSk7CgogICAgICAgIGRpc2NyaW0gPSBnZXRNYXBwaW5nKCJTdHJpbmdSb290\nRW50aXR5IikuZ2V0RGlzY3JpbWluYXRvcigpOwogICAgICAgIGFzc2VydEVx\ndWFscygiU3RyaW5nUm9vdCIsIGRpc2NyaW0uZ2V0VmFsdWUoKSk7CiAgICAg\nICAgYXNzZXJ0RXF1YWxzKEphdmFUeXBlcy5TVFJJTkcsIGRpc2NyaW0uZ2V0\nSmF2YVR5cGUoKSk7CiAgICAgICAgCiAgICAgICAgU3RyaW5nTGVhZkVudGl0\neSBsZWFmID0gbmV3IFN0cmluZ0xlYWZFbnRpdHkoKTsKICAgICAgICBTdHJp\nbmdSb290RW50aXR5IHJvb3QgPSBuZXcgU3RyaW5nUm9vdEVudGl0eSgpOwog\nICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICBl\nbS5wZXJzaXN0KGxlYWYpOwogICAgICAgIGVtLnBlcnNpc3Qocm9vdCk7CiAg\nICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICAK\nICAgICAgICBlbS5yZWZyZXNoKGxlYWYpOwogICAgICAgIGVtLnJlZnJlc2go\ncm9vdCk7CiAgICAgICAgCiAgICAgICAgZW0uY2xlYXIoKTsKICAgICAgICAK\nICAgICAgICBTdHJpbmdMZWFmRW50aXR5IGxlYWYyID0gZW0uZmluZChTdHJp\nbmdMZWFmRW50aXR5LmNsYXNzLCBsZWFmLmdldElkKCkpOwogICAgICAgIFN0\ncmluZ1Jvb3RFbnRpdHkgcm9vdDIgPSBlbS5maW5kKFN0cmluZ1Jvb3RFbnRp\ndHkuY2xhc3MsIHJvb3QuZ2V0SWQoKSk7CiAgICAgICAgCiAgICAgICAgYXNz\nZXJ0Tm90TnVsbChsZWFmMik7CiAgICAgICAgYXNzZXJ0Tm90TnVsbChyb290\nMik7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0RXhpc3RzUXVlcnkoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBl\nbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5iZWdpbigpOwoKICAgICAgICBTdHJpbmdSb290RW50\naXR5IGUgPSBuZXcgU3RyaW5nUm9vdEVudGl0eSgpOwogICAgICAgIGUuc2V0\nTmFtZSgiZm9vIik7CiAgICAgICAgZW0ucGVyc2lzdChlKTsKCiAgICAgICAg\nZSA9IG5ldyBTdHJpbmdSb290RW50aXR5KCk7CiAgICAgICAgZS5zZXROYW1l\nKCJmb28iKTsKICAgICAgICBlbS5wZXJzaXN0KGUpOwoKICAgICAgICBlID0g\nbmV3IFN0cmluZ1Jvb3RFbnRpdHkoKTsKICAgICAgICBlLnNldE5hbWUoImJh\nciIpOwogICAgICAgIGVtLnBlcnNpc3QoZSk7CgogICAgICAgIGVtLmdldFRy\nYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKCiAg\nICAgICAgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAg\nIFF1ZXJ5IHEgPSBlbS5jcmVhdGVRdWVyeSgic2VsZWN0IG8gZnJvbSBTdHJp\nbmdBYnN0cmFjdEVudGl0eSBvICIgKwogICAgICAgICAgICAid2hlcmUgZXhp\nc3RzIChzZWxlY3QgbzIgZnJvbSBTdHJpbmdMZWFmRW50aXR5IG8yKSIpOwog\nICAgICAgIExpc3Q8U3RyaW5nQWJzdHJhY3RFbnRpdHk+IGxpc3QgPSBxLmdl\ndFJlc3VsdExpc3QoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoMCwgbGlzdC5z\naXplKCkpOwogICAgICAgIGZvciAoU3RyaW5nQWJzdHJhY3RFbnRpdHkgZW50\naXR5IDogbGlzdCkKICAgICAgICAgICAgYXNzZXJ0VHJ1ZShlbnRpdHkgaW5z\ndGFuY2VvZiBTdHJpbmdMZWFmRW50aXR5KTsKICAgICAgICBlbS5jbG9zZSgp\nOwogICAgfQp9Cg==\n","encoding":"base64"}

