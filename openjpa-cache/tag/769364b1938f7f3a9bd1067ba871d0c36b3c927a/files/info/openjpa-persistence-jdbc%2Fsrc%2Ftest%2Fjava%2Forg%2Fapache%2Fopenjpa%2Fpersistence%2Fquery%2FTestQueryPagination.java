{"sha":"654647ced349ed849e389d104769a88cdd37979f","node_id":"MDQ6QmxvYjIwNjM2NDo2NTQ2NDdjZWQzNDllZDg0OWUzODlkMTA0NzY5YTg4Y2RkMzc5Nzlm","size":3547,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/654647ced349ed849e389d104769a88cdd37979f","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UucXVlcnk7\nCgppbXBvcnQgamF2YS51dGlsLkxpc3Q7CmltcG9ydCBqYXZheC5wZXJzaXN0\nZW5jZS5FbnRpdHlNYW5hZ2VyOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2Uu\nUXVlcnk7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuY29uZi5K\nREJDQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5q\nZGJjLnNxbC5EQkRpY3Rpb25hcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5zcWwuRGVyYnlEaWN0aW9uYXJ5OwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLnBlcnNpc3RlbmNlLnRlc3QuU1FMTGlzdGVuZXJUZXN0Q2Fz\nZTsKCi8qKgogKiBUZXN0IHRoYXQgcXVlcnkgcGFnaW5hdGlvbiB3b3JrcyBw\ncm9wZXJseS4KICovCnB1YmxpYyBjbGFzcyBUZXN0UXVlcnlQYWdpbmF0aW9u\nCiAgICBleHRlbmRzIFNRTExpc3RlbmVyVGVzdENhc2UgewoKICAgIHB1Ymxp\nYyB2b2lkIHNldFVwKCkgewogICAgICAgIHNldFVwKFNpbXBsZUVudGl0eS5j\nbGFzcywgQ0xFQVJfVEFCTEVTLCAib3BlbmpwYS5Mb2ciLCAiU1FMPVRSQUNF\nIik7CgogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50\naXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVn\naW4oKTsKICAgICAgICBlbS5wZXJzaXN0KG5ldyBTaW1wbGVFbnRpdHkoImZv\nbyIsICJiYXIiICsgMCkpOwogICAgICAgIGVtLnBlcnNpc3QobmV3IFNpbXBs\nZUVudGl0eSgiZm9vIiwgImJhciIgKyAxKSk7CiAgICAgICAgZW0ucGVyc2lz\ndChuZXcgU2ltcGxlRW50aXR5KCJmb28iLCAiYmFyIiArIDIpKTsKICAgICAg\nICBlbS5wZXJzaXN0KG5ldyBTaW1wbGVFbnRpdHkoImZvbyIsICJiYXIiICsg\nMykpOwogICAgICAgIGVtLnBlcnNpc3QobmV3IFNpbXBsZUVudGl0eSgiZm9v\nIiwgImJhciIgKyA0KSk7CiAgICAgICAgZW0ucGVyc2lzdChuZXcgU2ltcGxl\nRW50aXR5KCJmb28iLCAiYmFyIiArIDUpKTsKICAgICAgICBlbS5nZXRUcmFu\nc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgdGVzdEZpcnN0VGhlbk1heCgpIHsKICAgICAg\nICBoZWxwZXIodHJ1ZSwgMiwgMywgMyk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgdGVzdE1heFRoZW5GaXJzdCgpIHsKICAgICAgICBoZWxwZXIoZmFsc2Us\nIDIsIDMsIDMpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3ROb1Jlc3Vs\ndHNGaXJzdEZpcnN0KCkgewogICAgICAgIGhlbHBlcih0cnVlLCAxMCwgMywg\nMCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdGVzdE5vUmVzdWx0c0ZpcnN0\nTGFzdCgpIHsKICAgICAgICBoZWxwZXIoZmFsc2UsIDEwLCAzLCAwKTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0QWxsUmVzdWx0c0ZpcnN0Rmlyc3Qo\nKSB7CiAgICAgICAgaGVscGVyKHRydWUsIDAsIDEwLCA2KTsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0QWxsUmVzdWx0c0ZpcnN0TGFzdCgpIHsKICAg\nICAgICBoZWxwZXIoZmFsc2UsIDAsIDEwLCA2KTsKICAgIH0KCiAgICBwcml2\nYXRlIHZvaWQgaGVscGVyKGJvb2xlYW4gZmlyc3RGaXJzdCwgaW50IGZpcnN0\nLCBpbnQgbWF4LCBpbnQgZXhwZWN0ZWQpIHsKICAgICAgICBFbnRpdHlNYW5h\nZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBR\ndWVyeSBxID0gZW0uY3JlYXRlUXVlcnkoInNlbGVjdCBlIGZyb20gc2ltcGxl\nIGUgb3JkZXIgYnkgZS52YWx1ZSIpOwogICAgICAgIHNxbC5jbGVhcigpOwog\nICAgICAgIExpc3Q8U2ltcGxlRW50aXR5PiBmdWxsTGlzdCA9IHEuZ2V0UmVz\ndWx0TGlzdCgpOwogICAgICAgIGlmIChmaXJzdEZpcnN0KQogICAgICAgICAg\nICBxLnNldEZpcnN0UmVzdWx0KGZpcnN0KS5zZXRNYXhSZXN1bHRzKG1heCk7\nCiAgICAgICAgZWxzZQogICAgICAgICAgICBxLnNldE1heFJlc3VsdHMobWF4\nKS5zZXRGaXJzdFJlc3VsdChmaXJzdCk7CiAgICAgICAgTGlzdDxTaW1wbGVF\nbnRpdHk+IGxpc3QgPSBxLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBjaGVj\na1NRTCgpOwogICAgICAgIGFzc2VydEVxdWFscyhleHBlY3RlZCwgbGlzdC5z\naXplKCkpOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbGlzdC5zaXpl\nKCk7IGkrKykgewogICAgICAgICAgICBhc3NlcnRFcXVhbHMoImJhciIgKyAo\nZmlyc3QgKyBpKSwgbGlzdC5nZXQoaSkuZ2V0VmFsdWUoKSk7CiAgICAgICAg\nfQogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lk\nIGNoZWNrU1FMKCkgewogICAgICAgIGFzc2VydEVxdWFscygyLCBzcWwuc2l6\nZSgpKTsKICAgICAgICBTdHJpbmcgbm9SYW5nZSA9IHRoaXMuc3FsLmdldCgw\nKTsKICAgICAgICBTdHJpbmcgd2l0aFJhbmdlID0gdGhpcy5zcWwuZ2V0KDEp\nOwogICAgICAgIERCRGljdGlvbmFyeSBkaWN0ID0gKChKREJDQ29uZmlndXJh\ndGlvbikgZW1mLmdldENvbmZpZ3VyYXRpb24oKSkKICAgICAgICAgICAgLmdl\ndERCRGljdGlvbmFyeUluc3RhbmNlKCk7CiAgICAgICAgaWYgKGRpY3Quc3Vw\ncG9ydHNTZWxlY3RTdGFydEluZGV4IHx8IGRpY3Quc3VwcG9ydHNTZWxlY3RF\nbmRJbmRleCkKICAgICAgICAgICAgYXNzZXJ0RmFsc2Uobm9SYW5nZS5lcXVh\nbHMod2l0aFJhbmdlKSk7CiAgICAgICAgZWxzZQogICAgICAgICAgICBhc3Nl\ncnRFcXVhbHMobm9SYW5nZSwgd2l0aFJhbmdlKTsKICAgIH0KfQ==\n","encoding":"base64"}

