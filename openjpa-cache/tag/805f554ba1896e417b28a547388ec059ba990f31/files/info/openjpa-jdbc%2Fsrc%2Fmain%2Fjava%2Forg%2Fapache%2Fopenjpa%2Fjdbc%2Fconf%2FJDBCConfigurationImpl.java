{"sha":"55488212d177309cd7e29c53b59ef0ec7407c127","node_id":"MDQ6QmxvYjIwNjM2NDo1NTQ4ODIxMmQxNzczMDljZDdlMjljNTNiNTllZjBlYzc0MDdjMTI3","size":37564,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/55488212d177309cd7e29c53b59ef0ec7407c127","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5jb25mOwoKaW1wb3J0\nIGphdmEuc3FsLkNvbm5lY3Rpb247CmltcG9ydCBqYXZhLnNxbC5SZXN1bHRT\nZXQ7CmltcG9ydCBqYXZheC5zcWwuRGF0YVNvdXJjZTsKCmltcG9ydCBvcmcu\nYXBhY2hlLmNvbW1vbnMubGFuZy5TdHJpbmdVdGlsczsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5jb25mLk9wZW5KUEFDb25maWd1cmF0aW9uSW1wbDsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmlkZW50aWZpZXIuREJJ\nZGVudGlmaWVyVXRpbDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLmtlcm5lbC5CYXRjaGluZ0NvbnN0cmFpbnRVcGRhdGVNYW5hZ2VyOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMua2VybmVsLkJhdGNoaW5nT3Bl\ncmF0aW9uT3JkZXJVcGRhdGVNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmpkYmMua2VybmVsLkVhZ2VyRmV0Y2hNb2RlczsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5qZGJjLmtlcm5lbC5KREJDQnJva2VyRmFjdG9y\neTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmtlcm5lbC5MUlNT\naXplczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmtlcm5lbC5Q\nZXNzaW1pc3RpY0xvY2tNYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmpkYmMua2VybmVsLlVwZGF0ZU1hbmFnZXI7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEuamRiYy5tZXRhLk1hcHBpbmdEZWZhdWx0czsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1ldGEuTWFwcGluZ1JlcG9zaXRv\ncnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuRGF0\nYVNvdXJjZUZhY3Rvcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5zY2hlbWEuRHJpdmVyRGF0YVNvdXJjZTsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNjaGVtYS5TY2hlbWFGYWN0b3J5OwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLkRCRGljdGlvbmFyeTsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5EQkRpY3Rpb25hcnlGYWN0\nb3J5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNRTEZh\nY3Rvcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkJyb2tl\nckltcGw7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlN0b3Jl\nQ29udGV4dDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5J\nbnRWYWx1ZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5P\nYmplY3RWYWx1ZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29u\nZi5QbHVnaW5WYWx1ZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIu\nY29uZi5Qcm9kdWN0RGVyaXZhdGlvbnM7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEubGliLmNvbmYuU3RyaW5nTGlzdFZhbHVlOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmxpYi5jb25mLlN0cmluZ1ZhbHVlOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmxpYi5pZGVudGlmaWVyLklkZW50aWZpZXJVdGls\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5qZGJjLkNvbm5lY3Rp\nb25EZWNvcmF0b3I7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmpk\nYmMuRGVjb3JhdGluZ0RhdGFTb3VyY2U7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEubGliLmpkYmMuSkRCQ0xpc3RlbmVyOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmxpYi5sb2cuTG9nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmxpYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5tZXRhLk1ldGFEYXRhRmFjdG9yeTsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS51dGlsLlVzZXJFeGNlcHRpb247CgovKioKICogRGVmYXVsdCBp\nbXBsZW1lbnRhdGlvbiBvZiB0aGUge0BsaW5rIEpEQkNDb25maWd1cmF0aW9u\nfSBpbnRlcmZhY2UuCiAqCiAqIEBhdXRob3IgTWFyYyBQcnVkJ2hvbW1lYXV4\nCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqLwpwdWJsaWMgY2xhc3MgSkRCQ0Nv\nbmZpZ3VyYXRpb25JbXBsCiAgICBleHRlbmRzIE9wZW5KUEFDb25maWd1cmF0\naW9uSW1wbAogICAgaW1wbGVtZW50cyBKREJDQ29uZmlndXJhdGlvbiB7Cgog\nICAgcHVibGljIFN0cmluZ1ZhbHVlIHNjaGVtYTsKICAgIHB1YmxpYyBTdHJp\nbmdMaXN0VmFsdWUgc2NoZW1hczsKICAgIHB1YmxpYyBJbnRWYWx1ZSB0cmFu\nc2FjdGlvbklzb2xhdGlvbjsKICAgIHB1YmxpYyBJbnRWYWx1ZSByZXN1bHRT\nZXRUeXBlOwogICAgcHVibGljIEludFZhbHVlIGZldGNoRGlyZWN0aW9uOwog\nICAgcHVibGljIEZldGNoTW9kZVZhbHVlIGVhZ2VyRmV0Y2hNb2RlOwogICAg\ncHVibGljIEZldGNoTW9kZVZhbHVlIHN1YmNsYXNzRmV0Y2hNb2RlOwogICAg\ncHVibGljIEludFZhbHVlIGxyc1NpemU7CiAgICBwdWJsaWMgU3RyaW5nVmFs\ndWUgc3luY2hyb25pemVNYXBwaW5nczsKICAgIHB1YmxpYyBPYmplY3RWYWx1\nZSBqZGJjTGlzdGVuZXJQbHVnaW5zOwogICAgcHVibGljIE9iamVjdFZhbHVl\nIGNvbm5lY3Rpb25EZWNvcmF0b3JQbHVnaW5zOwogICAgcHVibGljIFBsdWdp\nblZhbHVlIGRiZGljdGlvbmFyeVBsdWdpbjsKICAgIHB1YmxpYyBPYmplY3RW\nYWx1ZSB1cGRhdGVNYW5hZ2VyUGx1Z2luOwogICAgcHVibGljIE9iamVjdFZh\nbHVlIHNjaGVtYUZhY3RvcnlQbHVnaW47CiAgICBwdWJsaWMgT2JqZWN0VmFs\ndWUgc3FsRmFjdG9yeVBsdWdpbjsKICAgIHB1YmxpYyBPYmplY3RWYWx1ZSBt\nYXBwaW5nRGVmYXVsdHNQbHVnaW47CiAgICBwdWJsaWMgUGx1Z2luVmFsdWUg\nZHJpdmVyRGF0YVNvdXJjZVBsdWdpbjsKICAgIHB1YmxpYyBNYXBwaW5nRmFj\ndG9yeVZhbHVlIG1hcHBpbmdGYWN0b3J5UGx1Z2luOwogICAgcHVibGljIE9i\namVjdFZhbHVlIGlkZW50aWZpZXJVdGlsUGx1Z2luOwoKICAgIC8vIHVzZWQg\naW50ZXJuYWxseQogICAgcHJpdmF0ZSBTdHJpbmcgZmlyc3RVc2VyID0gbnVs\nbDsKICAgIHByaXZhdGUgU3RyaW5nIGZpcnN0UGFzcyA9IG51bGw7CiAgICBw\ncml2YXRlIERlY29yYXRpbmdEYXRhU291cmNlIGRhdGFTb3VyY2UgPSBudWxs\nOwogICAgcHJpdmF0ZSBEZWNvcmF0aW5nRGF0YVNvdXJjZSBkYXRhU291cmNl\nMiA9IG51bGw7CiAgICAKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvY2Fs\naXplciBfbG9jID0gTG9jYWxpemVyLmZvclBhY2thZ2UoSkRCQ0NvbmZpZ3Vy\nYXRpb25JbXBsLmNsYXNzKTsKCiAgICAvKioKICAgICAqIERlZmF1bHQgY29u\nc3RydWN0b3IuIEF0dGVtcHRzIHRvIGxvYWQgZGVmYXVsdCBwcm9wZXJ0aWVz\nLgogICAgICovCiAgICBwdWJsaWMgSkRCQ0NvbmZpZ3VyYXRpb25JbXBsKCkg\newogICAgICAgIHRoaXModHJ1ZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBD\nb25zdHJ1Y3Rvci4KICAgICAqCiAgICAgKiBAcGFyYW0gbG9hZEdsb2JhbHMg\nd2hldGhlciB0byBhdHRlbXB0IHRvIGxvYWQgdGhlIGdsb2JhbCBwcm9wZXJ0\naWVzCiAgICAgKi8KICAgIHB1YmxpYyBKREJDQ29uZmlndXJhdGlvbkltcGwo\nYm9vbGVhbiBsb2FkR2xvYmFscykgewogICAgICAgIHRoaXModHJ1ZSwgbG9h\nZEdsb2JhbHMpOwogICAgfQoKICAgIC8qKgogICAgICogQ29uc3RydWN0b3Iu\nCiAgICAgKgogICAgICogQHBhcmFtIGRlcml2YXRpb25zIHdoZXRoZXIgdG8g\nYXBwbHkgcHJvZHVjdCBkZXJpdmF0aW9ucwogICAgICogQHBhcmFtIGxvYWRH\nbG9iYWxzIHdoZXRoZXIgdG8gYXR0ZW1wdCB0byBsb2FkIHRoZSBnbG9iYWwg\ncHJvcGVydGllcwogICAgICovCiAgICBwdWJsaWMgSkRCQ0NvbmZpZ3VyYXRp\nb25JbXBsKGJvb2xlYW4gZGVyaXZhdGlvbnMsIGJvb2xlYW4gbG9hZEdsb2Jh\nbHMpIHsKICAgICAgICBzdXBlcihmYWxzZSwgZmFsc2UpOwogICAgICAgIFN0\ncmluZ1tdIGFsaWFzZXM7CgogICAgICAgIHNjaGVtYSA9IGFkZFN0cmluZygi\namRiYy5TY2hlbWEiKTsKICAgICAgICBzY2hlbWFzID0gYWRkU3RyaW5nTGlz\ndCgiamRiYy5TY2hlbWFzIik7CgogICAgICAgIHRyYW5zYWN0aW9uSXNvbGF0\naW9uID0gYWRkSW50KCJqZGJjLlRyYW5zYWN0aW9uSXNvbGF0aW9uIik7CiAg\nICAgICAgYWxpYXNlcyA9IG5ldyBTdHJpbmdbXXsKICAgICAgICAgICAgImRl\nZmF1bHQiLCBTdHJpbmcudmFsdWVPZigtMSksCiAgICAgICAgICAgICJub25l\nIiwgU3RyaW5nLnZhbHVlT2YoQ29ubmVjdGlvbi5UUkFOU0FDVElPTl9OT05F\nKSwKICAgICAgICAgICAgInJlYWQtY29tbWl0dGVkIiwgU3RyaW5nLnZhbHVl\nT2YKICAgICAgICAgICAgKENvbm5lY3Rpb24uVFJBTlNBQ1RJT05fUkVBRF9D\nT01NSVRURUQpLAogICAgICAgICAgICAicmVhZC11bmNvbW1pdHRlZCIsIFN0\ncmluZy52YWx1ZU9mCiAgICAgICAgICAgIChDb25uZWN0aW9uLlRSQU5TQUNU\nSU9OX1JFQURfVU5DT01NSVRURUQpLAogICAgICAgICAgICAicmVwZWF0YWJs\nZS1yZWFkIiwgU3RyaW5nLnZhbHVlT2YKICAgICAgICAgICAgKENvbm5lY3Rp\nb24uVFJBTlNBQ1RJT05fUkVQRUFUQUJMRV9SRUFEKSwKICAgICAgICAgICAg\nInNlcmlhbGl6YWJsZSIsIFN0cmluZy52YWx1ZU9mKENvbm5lY3Rpb24uVFJB\nTlNBQ1RJT05fU0VSSUFMSVpBQkxFKQogICAgICAgIH07CiAgICAgICAgdHJh\nbnNhY3Rpb25Jc29sYXRpb24uc2V0QWxpYXNlcyhhbGlhc2VzKTsKICAgICAg\nICB0cmFuc2FjdGlvbklzb2xhdGlvbi5zZXREZWZhdWx0KGFsaWFzZXNbMF0p\nOwogICAgICAgIHRyYW5zYWN0aW9uSXNvbGF0aW9uLnNldCgtMSk7CiAgICAg\nICAgdHJhbnNhY3Rpb25Jc29sYXRpb24uc2V0QWxpYXNMaXN0Q29tcHJlaGVu\nc2l2ZSh0cnVlKTsKCiAgICAgICAgcmVzdWx0U2V0VHlwZSA9IGFkZEludCgi\namRiYy5SZXN1bHRTZXRUeXBlIik7CiAgICAgICAgYWxpYXNlcyA9IG5ldyBT\ndHJpbmdbXXsKICAgICAgICAgICAgImZvcndhcmQtb25seSIsIFN0cmluZy52\nYWx1ZU9mKFJlc3VsdFNldC5UWVBFX0ZPUldBUkRfT05MWSksCiAgICAgICAg\nICAgICJzY3JvbGwtc2Vuc2l0aXZlIiwgU3RyaW5nLnZhbHVlT2YKICAgICAg\nICAgICAgKFJlc3VsdFNldC5UWVBFX1NDUk9MTF9TRU5TSVRJVkUpLAogICAg\nICAgICAgICAic2Nyb2xsLWluc2Vuc2l0aXZlIiwgU3RyaW5nLnZhbHVlT2YK\nICAgICAgICAgICAgKFJlc3VsdFNldC5UWVBFX1NDUk9MTF9JTlNFTlNJVElW\nRSksCiAgICAgICAgfTsKICAgICAgICByZXN1bHRTZXRUeXBlLnNldEFsaWFz\nZXMoYWxpYXNlcyk7CiAgICAgICAgcmVzdWx0U2V0VHlwZS5zZXREZWZhdWx0\nKGFsaWFzZXNbMF0pOwogICAgICAgIHJlc3VsdFNldFR5cGUuc2V0KFJlc3Vs\ndFNldC5UWVBFX0ZPUldBUkRfT05MWSk7CiAgICAgICAgcmVzdWx0U2V0VHlw\nZS5zZXRBbGlhc0xpc3RDb21wcmVoZW5zaXZlKHRydWUpOwoKICAgICAgICBm\nZXRjaERpcmVjdGlvbiA9IGFkZEludCgiamRiYy5GZXRjaERpcmVjdGlvbiIp\nOwogICAgICAgIGFsaWFzZXMgPSBuZXcgU3RyaW5nW117CiAgICAgICAgICAg\nICJmb3J3YXJkIiwgU3RyaW5nLnZhbHVlT2YoUmVzdWx0U2V0LkZFVENIX0ZP\nUldBUkQpLAogICAgICAgICAgICAicmV2ZXJzZSIsIFN0cmluZy52YWx1ZU9m\nKFJlc3VsdFNldC5GRVRDSF9SRVZFUlNFKSwKICAgICAgICAgICAgInVua25v\nd24iLCBTdHJpbmcudmFsdWVPZihSZXN1bHRTZXQuRkVUQ0hfVU5LTk9XTiks\nCiAgICAgICAgfTsKICAgICAgICBmZXRjaERpcmVjdGlvbi5zZXRBbGlhc2Vz\nKGFsaWFzZXMpOwogICAgICAgIGZldGNoRGlyZWN0aW9uLnNldERlZmF1bHQo\nYWxpYXNlc1swXSk7CiAgICAgICAgZmV0Y2hEaXJlY3Rpb24uc2V0KFJlc3Vs\ndFNldC5GRVRDSF9GT1JXQVJEKTsKICAgICAgICBmZXRjaERpcmVjdGlvbi5z\nZXRBbGlhc0xpc3RDb21wcmVoZW5zaXZlKHRydWUpOwoKICAgICAgICBlYWdl\nckZldGNoTW9kZSA9IG5ldyBGZXRjaE1vZGVWYWx1ZSgiamRiYy5FYWdlckZl\ndGNoTW9kZSIpOwogICAgICAgIGVhZ2VyRmV0Y2hNb2RlLnNldERlZmF1bHQo\nRmV0Y2hNb2RlVmFsdWUuRUFHRVJfUEFSQUxMRUwpOwogICAgICAgIGVhZ2Vy\nRmV0Y2hNb2RlLnNldChFYWdlckZldGNoTW9kZXMuRUFHRVJfUEFSQUxMRUwp\nOwogICAgICAgIGFkZFZhbHVlKGVhZ2VyRmV0Y2hNb2RlKTsKCiAgICAgICAg\nc3ViY2xhc3NGZXRjaE1vZGUgPSBuZXcgRmV0Y2hNb2RlVmFsdWUoImpkYmMu\nU3ViY2xhc3NGZXRjaE1vZGUiKTsKICAgICAgICBzdWJjbGFzc0ZldGNoTW9k\nZS5zZXREZWZhdWx0KEZldGNoTW9kZVZhbHVlLkVBR0VSX0pPSU4pOwogICAg\nICAgIHN1YmNsYXNzRmV0Y2hNb2RlLnNldChFYWdlckZldGNoTW9kZXMuRUFH\nRVJfSk9JTik7CiAgICAgICAgYWRkVmFsdWUoc3ViY2xhc3NGZXRjaE1vZGUp\nOwoKICAgICAgICBscnNTaXplID0gYWRkSW50KCJqZGJjLkxSU1NpemUiKTsK\nICAgICAgICBhbGlhc2VzID0gbmV3IFN0cmluZ1tdewogICAgICAgICAgICAi\ncXVlcnkiLCBTdHJpbmcudmFsdWVPZihMUlNTaXplcy5TSVpFX1FVRVJZKSwK\nICAgICAgICAgICAgInVua25vd24iLCBTdHJpbmcudmFsdWVPZihMUlNTaXpl\ncy5TSVpFX1VOS05PV04pLAogICAgICAgICAgICAibGFzdCIsIFN0cmluZy52\nYWx1ZU9mKExSU1NpemVzLlNJWkVfTEFTVCksCiAgICAgICAgfTsKICAgICAg\nICBscnNTaXplLnNldEFsaWFzZXMoYWxpYXNlcyk7CiAgICAgICAgbHJzU2l6\nZS5zZXREZWZhdWx0KGFsaWFzZXNbMF0pOwogICAgICAgIGxyc1NpemUuc2V0\nKExSU1NpemVzLlNJWkVfUVVFUlkpOwogICAgICAgIGxyc1NpemUuc2V0QWxp\nYXNMaXN0Q29tcHJlaGVuc2l2ZSh0cnVlKTsKCiAgICAgICAgc3luY2hyb25p\nemVNYXBwaW5ncyA9IGFkZFN0cmluZygiamRiYy5TeW5jaHJvbml6ZU1hcHBp\nbmdzIik7CiAgICAgICAgYWxpYXNlcyA9IG5ldyBTdHJpbmdbXXsgImZhbHNl\nIiwgbnVsbCB9OwogICAgICAgIHN5bmNocm9uaXplTWFwcGluZ3Muc2V0QWxp\nYXNlcyhhbGlhc2VzKTsKICAgICAgICBzeW5jaHJvbml6ZU1hcHBpbmdzLnNl\ndERlZmF1bHQoYWxpYXNlc1swXSk7CgogICAgICAgIGpkYmNMaXN0ZW5lclBs\ndWdpbnMgPSBhZGRQbHVnaW5MaXN0KCJqZGJjLkpEQkNMaXN0ZW5lcnMiKTsK\nICAgICAgICBqZGJjTGlzdGVuZXJQbHVnaW5zLnNldEluc3RhbnRpYXRpbmdH\nZXR0ZXIoImdldEpEQkNMaXN0ZW5lckluc3RhbmNlcyIpOwoKICAgICAgICBj\nb25uZWN0aW9uRGVjb3JhdG9yUGx1Z2lucyA9IGFkZFBsdWdpbkxpc3QKICAg\nICAgICAgICAgKCJqZGJjLkNvbm5lY3Rpb25EZWNvcmF0b3JzIik7CiAgICAg\nICAgY29ubmVjdGlvbkRlY29yYXRvclBsdWdpbnMuc2V0SW5zdGFudGlhdGlu\nZ0dldHRlcgogICAgICAgICAgICAoImdldENvbm5lY3Rpb25EZWNvcmF0b3JJ\nbnN0YW5jZXMiKTsKCiAgICAgICAgZGJkaWN0aW9uYXJ5UGx1Z2luID0gYWRk\nUGx1Z2luKCJqZGJjLkRCRGljdGlvbmFyeSIsIHRydWUpOwogICAgICAgIGFs\naWFzZXMgPSBuZXcgU3RyaW5nW117CiAgICAgICAgICAgICJhY2Nlc3MiLCAi\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLkFjY2Vzc0RpY3Rpb25hcnki\nLAogICAgICAgICAgICAiZGIyIiwgIm9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLnNxbC5EQjJEaWN0aW9uYXJ5IiwKICAgICAgICAgICAgImRlcmJ5IiwgIm9y\nZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5EZXJieURpY3Rpb25hcnkiLAog\nICAgICAgICAgICAiZW1wcmVzcyIsICJvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5zcWwuRW1wcmVzc0RpY3Rpb25hcnkiLAogICAgICAgICAgICAiZm94cHJv\nIiwgIm9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5Gb3hQcm9EaWN0aW9u\nYXJ5IiwKICAgICAgICAgICAgImgyIiwgIm9yZy5hcGFjaGUub3BlbmpwYS5q\nZGJjLnNxbC5IMkRpY3Rpb25hcnkiLAogICAgICAgICAgICAiaHNxbCIsICJv\ncmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuSFNRTERpY3Rpb25hcnkiLAog\nICAgICAgICAgICAiaW5mb3JtaXgiLCAib3JnLmFwYWNoZS5vcGVuanBhLmpk\nYmMuc3FsLkluZm9ybWl4RGljdGlvbmFyeSIsCiAgICAgICAgICAgICJpbmdy\nZXMiLCAib3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLkluZ3Jlc0RpY3Rp\nb25hcnkiLAogICAgICAgICAgICAiamRhdGFzdG9yZSIsICJvcmcuYXBhY2hl\nLm9wZW5qcGEuamRiYy5zcWwuSkRhdGFTdG9yZURpY3Rpb25hcnkiLAogICAg\nICAgICAgICAibXlzcWwiLCAib3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3Fs\nLk15U1FMRGljdGlvbmFyeSIsCiAgICAgICAgICAgICJvcmFjbGUiLCAib3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLk9yYWNsZURpY3Rpb25hcnkiLAog\nICAgICAgICAgICAicG9pbnRiYXNlIiwgIm9yZy5hcGFjaGUub3BlbmpwYS5q\nZGJjLnNxbC5Qb2ludGJhc2VEaWN0aW9uYXJ5IiwKICAgICAgICAgICAgInBv\nc3RncmVzIiwgIm9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5Qb3N0Z3Jl\nc0RpY3Rpb25hcnkiLAogICAgICAgICAgICAic3Fsc2VydmVyIiwgIm9yZy5h\ncGFjaGUub3BlbmpwYS5qZGJjLnNxbC5TUUxTZXJ2ZXJEaWN0aW9uYXJ5IiwK\nICAgICAgICAgICAgInN5YmFzZSIsICJvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5zcWwuU3liYXNlRGljdGlvbmFyeSIsCiAgICAgICAgfTsKICAgICAgICBk\nYmRpY3Rpb25hcnlQbHVnaW4uc2V0QWxpYXNlcyhhbGlhc2VzKTsKICAgICAg\nICBkYmRpY3Rpb25hcnlQbHVnaW4uc2V0SW5zdGFudGlhdGluZ0dldHRlcigi\nZ2V0REJEaWN0aW9uYXJ5SW5zdGFuY2UiKTsKCiAgICAgICAgdXBkYXRlTWFu\nYWdlclBsdWdpbiA9IGFkZFBsdWdpbigiamRiYy5VcGRhdGVNYW5hZ2VyIiwg\ndHJ1ZSk7CiAgICAgICAgYWxpYXNlcyA9IG5ldyBTdHJpbmdbXXsKICAgICAg\nICAgICAgImRlZmF1bHQiLAogICAgICAgICAgICBCYXRjaGluZ0NvbnN0cmFp\nbnRVcGRhdGVNYW5hZ2VyLmNsYXNzLmdldE5hbWUoKSwKICAgICAgICAgICAg\nIm9wZXJhdGlvbi1vcmRlciIsCiAgICAgICAgICAgICJvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5rZXJuZWwuT3BlcmF0aW9uT3JkZXJVcGRhdGVNYW5hZ2Vy\nIiwKICAgICAgICAgICAgImNvbnN0cmFpbnQiLAogICAgICAgICAgICAib3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMua2VybmVsLkNvbnN0cmFpbnRVcGRhdGVN\nYW5hZ2VyIiwKICAgICAgICAgICAgImJhdGNoaW5nLWNvbnN0cmFpbnQiLAog\nICAgICAgICAgICBCYXRjaGluZ0NvbnN0cmFpbnRVcGRhdGVNYW5hZ2VyLmNs\nYXNzLmdldE5hbWUoKSwKICAgICAgICAgICAgImJhdGNoaW5nLW9wZXJhdGlv\nbi1vcmRlciIsCiAgICAgICAgICAgIEJhdGNoaW5nT3BlcmF0aW9uT3JkZXJV\ncGRhdGVNYW5hZ2VyLmNsYXNzLmdldE5hbWUoKSwKICAgICAgICB9OwogICAg\nICAgIHVwZGF0ZU1hbmFnZXJQbHVnaW4uc2V0QWxpYXNlcyhhbGlhc2VzKTsK\nICAgICAgICB1cGRhdGVNYW5hZ2VyUGx1Z2luLnNldERlZmF1bHQoYWxpYXNl\nc1swXSk7CiAgICAgICAgdXBkYXRlTWFuYWdlclBsdWdpbi5zZXRTdHJpbmco\nYWxpYXNlc1swXSk7CiAgICAgICAgdXBkYXRlTWFuYWdlclBsdWdpbi5zZXRJ\nbnN0YW50aWF0aW5nR2V0dGVyKCJnZXRVcGRhdGVNYW5hZ2VySW5zdGFuY2Ui\nKTsKCiAgICAgICAgZHJpdmVyRGF0YVNvdXJjZVBsdWdpbiA9IGFkZFBsdWdp\nbigiamRiYy5Ecml2ZXJEYXRhU291cmNlIiwgZmFsc2UpOwogICAgICAgIGFs\naWFzZXMgPSBuZXcgU3RyaW5nW117CiAgICAgICAgICAgICJzaW1wbGUiLCAi\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLlNpbXBsZURyaXZlckRh\ndGFTb3VyY2UiLAogICAgICAgIH07CiAgICAgICAgZHJpdmVyRGF0YVNvdXJj\nZVBsdWdpbi5zZXRBbGlhc2VzKGFsaWFzZXMpOwogICAgICAgIGRyaXZlckRh\ndGFTb3VyY2VQbHVnaW4uc2V0RGVmYXVsdChhbGlhc2VzWzBdKTsKICAgICAg\nICBkcml2ZXJEYXRhU291cmNlUGx1Z2luLnNldFN0cmluZyhhbGlhc2VzWzBd\nKTsKCiAgICAgICAgc2NoZW1hRmFjdG9yeVBsdWdpbiA9IGFkZFBsdWdpbigi\namRiYy5TY2hlbWFGYWN0b3J5IiwgdHJ1ZSk7CiAgICAgICAgYWxpYXNlcyA9\nIG5ldyBTdHJpbmdbXXsKICAgICAgICAgICAgImR5bmFtaWMiLCAib3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLkR5bmFtaWNTY2hlbWFGYWN0b3J5\nIiwKICAgICAgICAgICAgIm5hdGl2ZSIsICJvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5zY2hlbWEuTGF6eVNjaGVtYUZhY3RvcnkiLAogICAgICAgICAgICAi\nZmlsZSIsICJvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuRmlsZVNj\naGVtYUZhY3RvcnkiLAogICAgICAgICAgICAidGFibGUiLCAib3JnLmFwYWNo\nZS5vcGVuanBhLmpkYmMuc2NoZW1hLlRhYmxlU2NoZW1hRmFjdG9yeSIsCiAg\nICAgICAgICAgIC8vIGRlcHJlY2F0ZWQgYWxpYXMKICAgICAgICAgICAgImRi\nIiwgIm9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5UYWJsZVNjaGVt\nYUZhY3RvcnkiLAogICAgICAgIH07CiAgICAgICAgc2NoZW1hRmFjdG9yeVBs\ndWdpbi5zZXRBbGlhc2VzKGFsaWFzZXMpOwogICAgICAgIHNjaGVtYUZhY3Rv\ncnlQbHVnaW4uc2V0RGVmYXVsdChhbGlhc2VzWzBdKTsKICAgICAgICBzY2hl\nbWFGYWN0b3J5UGx1Z2luLnNldFN0cmluZyhhbGlhc2VzWzBdKTsKICAgICAg\nICBzY2hlbWFGYWN0b3J5UGx1Z2luLnNldEluc3RhbnRpYXRpbmdHZXR0ZXIo\nImdldFNjaGVtYUZhY3RvcnlJbnN0YW5jZSIpOwoKICAgICAgICBzcWxGYWN0\nb3J5UGx1Z2luID0gYWRkUGx1Z2luKCJqZGJjLlNRTEZhY3RvcnkiLCB0cnVl\nKTsKICAgICAgICBhbGlhc2VzID0gbmV3IFN0cmluZ1tdewogICAgICAgICAg\nICAiZGVmYXVsdCIsICJvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuU1FM\nRmFjdG9yeUltcGwiLAogICAgICAgIH07CiAgICAgICAgc3FsRmFjdG9yeVBs\ndWdpbi5zZXRBbGlhc2VzKGFsaWFzZXMpOwogICAgICAgIHNxbEZhY3RvcnlQ\nbHVnaW4uc2V0RGVmYXVsdChhbGlhc2VzWzBdKTsKICAgICAgICBzcWxGYWN0\nb3J5UGx1Z2luLnNldFN0cmluZyhhbGlhc2VzWzBdKTsKICAgICAgICBzcWxG\nYWN0b3J5UGx1Z2luLnNldEluc3RhbnRpYXRpbmdHZXR0ZXIoImdldFNRTEZh\nY3RvcnlJbnN0YW5jZSIpOwoKICAgICAgICBtYXBwaW5nRmFjdG9yeVBsdWdp\nbiA9IG5ldyBNYXBwaW5nRmFjdG9yeVZhbHVlKCJqZGJjLk1hcHBpbmdGYWN0\nb3J5Iik7CiAgICAgICAgYWRkVmFsdWUobWFwcGluZ0ZhY3RvcnlQbHVnaW4p\nOwoKICAgICAgICBtYXBwaW5nRGVmYXVsdHNQbHVnaW4gPSBhZGRQbHVnaW4o\nImpkYmMuTWFwcGluZ0RlZmF1bHRzIiwgdHJ1ZSk7CiAgICAgICAgYWxpYXNl\ncyA9IG5ldyBTdHJpbmdbXXsKICAgICAgICAgICAgImRlZmF1bHQiLCAib3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5NYXBwaW5nRGVmYXVsdHNJbXBs\nIiwKICAgICAgICB9OwogICAgICAgIG1hcHBpbmdEZWZhdWx0c1BsdWdpbi5z\nZXRBbGlhc2VzKGFsaWFzZXMpOwogICAgICAgIG1hcHBpbmdEZWZhdWx0c1Bs\ndWdpbi5zZXREZWZhdWx0KGFsaWFzZXNbMF0pOwogICAgICAgIG1hcHBpbmdE\nZWZhdWx0c1BsdWdpbi5zZXRTdHJpbmcoYWxpYXNlc1swXSk7CiAgICAgICAg\nbWFwcGluZ0RlZmF1bHRzUGx1Z2luLnNldEluc3RhbnRpYXRpbmdHZXR0ZXIK\nICAgICAgICAgICAgKCJnZXRNYXBwaW5nRGVmYXVsdHNJbnN0YW5jZSIpOwoK\nICAgICAgICAvLyBzZXQgdXAgYnJva2VyIGZhY3RvcnkgZGVmYXVsdHMKICAg\nICAgICBicm9rZXJGYWN0b3J5UGx1Z2luLnNldEFsaWFzKCJqZGJjIiwgSkRC\nQ0Jyb2tlckZhY3RvcnkuY2xhc3MuZ2V0TmFtZSgpKTsKICAgICAgICBicm9r\nZXJGYWN0b3J5UGx1Z2luLnNldERlZmF1bHQoImpkYmMiKTsKICAgICAgICBi\ncm9rZXJGYWN0b3J5UGx1Z2luLnNldFN0cmluZygiamRiYyIpOwoKICAgICAg\nICAvLyBzZXQgbmV3IGRlZmF1bHQgZm9yIG1hcHBpbmcgcmVwb3MKICAgICAg\nICBtZXRhUmVwb3NpdG9yeVBsdWdpbi5zZXRBbGlhcygiZGVmYXVsdCIsCiAg\nICAgICAgICAgICJvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLk1hcHBp\nbmdSZXBvc2l0b3J5Iik7CiAgICAgICAgbWV0YVJlcG9zaXRvcnlQbHVnaW4u\nc2V0RGVmYXVsdCgiZGVmYXVsdCIpOwogICAgICAgIG1ldGFSZXBvc2l0b3J5\nUGx1Z2luLnNldFN0cmluZygiZGVmYXVsdCIpOwoKICAgICAgICAvLyBzZXQg\nbmV3IGRlZmF1bHQgZm9yIGxvY2sgbWFuYWdlcgogICAgICAgIGxvY2tNYW5h\nZ2VyUGx1Z2luLnNldEFsaWFzKCJwZXNzaW1pc3RpYyIsCiAgICAgICAgICAg\nIFBlc3NpbWlzdGljTG9ja01hbmFnZXIuY2xhc3MuZ2V0TmFtZSgpKTsKICAg\nICAgICBsb2NrTWFuYWdlclBsdWdpbi5zZXREZWZhdWx0KCJwZXNzaW1pc3Rp\nYyIpOwogICAgICAgIGxvY2tNYW5hZ2VyUGx1Z2luLnNldFN0cmluZygicGVz\nc2ltaXN0aWMiKTsKCiAgICAgICAgLy8gbmF0aXZlIHNhdmVwb2ludCBtYW5h\nZ2VyIG9wdGlvbnMKICAgICAgICBzYXZlcG9pbnRNYW5hZ2VyUGx1Z2luLnNl\ndEFsaWFzKCJqZGJjIiwKICAgICAgICAgICAgIm9yZy5hcGFjaGUub3Blbmpw\nYS5qZGJjLmtlcm5lbC5KREJDM1NhdmVwb2ludE1hbmFnZXIiKTsKCiAgICAg\nICAgLy8gc2V0IG5ldyBhbGlhc2VzIGFuZCBkZWZhdWx0cyBmb3Igc2VxdWVu\nY2UKICAgICAgICBzZXFQbHVnaW4uc2V0QWxpYXNlcyhKREJDU2VxVmFsdWUu\nQUxJQVNFUyk7CiAgICAgICAgc2VxUGx1Z2luLnNldERlZmF1bHQoSkRCQ1Nl\ncVZhbHVlLkFMSUFTRVNbMF0pOwogICAgICAgIHNlcVBsdWdpbi5zZXRTdHJp\nbmcoSkRCQ1NlcVZhbHVlLkFMSUFTRVNbMF0pOwogICAgICAgIAogICAgICAg\nIC8vIFRoaXMgcGx1Zy1pbiBpcyBkZWNsYXJlZCBpbiBzdXBlcmNsYXNzIGJ1\ndCBkZWZpbmVkIGhlcmUKICAgICAgICAvLyBiZWNhdXNlIFByZXBhcmVkUXVl\ncnlDYWNoZSBpcyBjdXJyZW50bHkgYXZhaWxhYmxlIGZvciBKREJDCiAgICAg\nICAgLy8gYmFja2VuZCBvbmx5CiAgICAgICAgcHJlcGFyZWRRdWVyeUNhY2hl\nUGx1Z2luID0gYWRkUGx1Z2luKCJqZGJjLlF1ZXJ5U1FMQ2FjaGUiLCB0cnVl\nKTsKICAgICAgICBhbGlhc2VzID0gbmV3IFN0cmluZ1tdIHsKICAgICAgICAg\nICAgInRydWUiLCAib3JnLmFwYWNoZS5vcGVuanBhLmpkYmMua2VybmVsLlBy\nZXBhcmVkUXVlcnlDYWNoZUltcGwiLAogICAgICAgICAgICAiZmFsc2UiLCBu\ndWxsCiAgICAgICAgfTsKICAgICAgICBwcmVwYXJlZFF1ZXJ5Q2FjaGVQbHVn\naW4uc2V0QWxpYXNlcyhhbGlhc2VzKTsKICAgICAgICBwcmVwYXJlZFF1ZXJ5\nQ2FjaGVQbHVnaW4uc2V0QWxpYXNMaXN0Q29tcHJlaGVuc2l2ZSh0cnVlKTsK\nICAgICAgICBwcmVwYXJlZFF1ZXJ5Q2FjaGVQbHVnaW4uc2V0RGVmYXVsdChh\nbGlhc2VzWzBdKTsKICAgICAgICBwcmVwYXJlZFF1ZXJ5Q2FjaGVQbHVnaW4u\nc2V0Q2xhc3NOYW1lKGFsaWFzZXNbMV0pOwogICAgICAgIHByZXBhcmVkUXVl\ncnlDYWNoZVBsdWdpbi5zZXREeW5hbWljKHRydWUpOwogICAgICAgIHByZXBh\ncmVkUXVlcnlDYWNoZVBsdWdpbi5zZXRJbnN0YW50aWF0aW5nR2V0dGVyKAog\nICAgICAgICAgICAgICAgImdldFF1ZXJ5U1FMQ2FjaGVJbnN0YW5jZSIpOwoK\nICAgICAgICBmaW5kZXJDYWNoZVBsdWdpbiA9IGFkZFBsdWdpbigiamRiYy5G\naW5kZXJDYWNoZSIsIHRydWUpOwogICAgICAgIGFsaWFzZXMgPSBuZXcgU3Ry\naW5nW10gewogICAgICAgICAgICAidHJ1ZSIsICJvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5rZXJuZWwuRmluZGVyQ2FjaGVJbXBsIiwKICAgICAgICAgICAg\nImZhbHNlIiwgbnVsbAogICAgICAgIH07CiAgICAgICAgZmluZGVyQ2FjaGVQ\nbHVnaW4uc2V0QWxpYXNlcyhhbGlhc2VzKTsKICAgICAgICBmaW5kZXJDYWNo\nZVBsdWdpbi5zZXRBbGlhc0xpc3RDb21wcmVoZW5zaXZlKHRydWUpOwogICAg\nICAgIGZpbmRlckNhY2hlUGx1Z2luLnNldERlZmF1bHQoYWxpYXNlc1swXSk7\nCiAgICAgICAgZmluZGVyQ2FjaGVQbHVnaW4uc2V0Q2xhc3NOYW1lKGFsaWFz\nZXNbMV0pOwogICAgICAgIGZpbmRlckNhY2hlUGx1Z2luLnNldER5bmFtaWMo\ndHJ1ZSk7CiAgICAgICAgZmluZGVyQ2FjaGVQbHVnaW4uc2V0SW5zdGFudGlh\ndGluZ0dldHRlcigiZ2V0RmluZGVyQ2FjaGVJbnN0YW5jZSIpOwoKICAgICAg\nICBpZGVudGlmaWVyVXRpbFBsdWdpbiA9IGFkZFBsdWdpbigiamRiYy5JZGVu\ndGlmaWVyVXRpbCIsIHRydWUpOwogICAgICAgIGFsaWFzZXMgPSBuZXcgU3Ry\naW5nW10geyAKICAgICAgICAgICAgImRlZmF1bHQiLCAib3JnLmFwYWNoZS5v\ncGVuanBhLmpkYmMuaWRlbnRpZmllci5EQklkZW50aWZpZXJVdGlsSW1wbCIg\nfTsKICAgICAgICBpZGVudGlmaWVyVXRpbFBsdWdpbi5zZXRBbGlhc2VzKGFs\naWFzZXMpOwogICAgICAgIGlkZW50aWZpZXJVdGlsUGx1Z2luLnNldERlZmF1\nbHQoYWxpYXNlc1swXSk7CiAgICAgICAgaWRlbnRpZmllclV0aWxQbHVnaW4u\nc2V0U3RyaW5nKGFsaWFzZXNbMF0pOwogICAgICAgIGlkZW50aWZpZXJVdGls\nUGx1Z2luLnNldEluc3RhbnRpYXRpbmdHZXR0ZXIoImdldElkZW50aWZpZXJV\ndGlsSW5zdGFuY2UiKTsKCiAgICAgICAgCiAgICAgICAgLy8gdGhpcyBzdGF0\naWMgaW5pdGlhbGl6ZXIgaXMgdG8gZ2V0IHBhc3QgYSB3ZWlyZAogICAgICAg\nIC8vIENsYXNzQ2lyY3VsYXJpdHlFcnJvciB0aGF0IGhhcHBlbnMgb25seSB1\nbmRlciBJQk0ncwogICAgICAgIC8vIEpESyAxLjMuMSBvbiBMaW51eCBmcm9t\nIHdpdGhpbiB0aGUgSlJ1biBDbGFzc0xvYWRlcjsKICAgICAgICAvLyB3aGls\nZSBleGFjdCBjYXVzZXMgYXJlIHVua25vd24sIGl0IGlzIGFsbW9zdCBjZXJ0\nYWlubHkKICAgICAgICAvLyBhIGJ1ZyBpbiBKUnVuLCBhbmQgd2UgY2FuIGdl\ndCBhcm91bmQgaXQgYnkgZm9yY2luZwogICAgICAgIC8vIEluc3RydWN0aW9u\nLmNsYXNzIHRvIGJlIGxvYWRlZCBhbmQgaW5pdGlhbGl6ZWQKICAgICAgICAv\nLyBiZWZvcmUgVHlwZWRJbnN0cnVjdGlvbi5jbGFzcwogICAgICAgIHRyeSB7\nIHNlcnAuYnl0ZWNvZGUubG93bGV2ZWwuRW50cnkuY2xhc3MuZ2V0TmFtZSgp\nOyB9IAogICAgICAgIGNhdGNoIChUaHJvd2FibGUgdCkge30KICAgICAgICB0\ncnkgeyBzZXJwLmJ5dGVjb2RlLkluc3RydWN0aW9uLmNsYXNzLmdldE5hbWUo\nKTsgfSAKICAgICAgICBjYXRjaCAoVGhyb3dhYmxlIHQpIHt9CgogICAgICAg\nIHN1cHBvcnRlZE9wdGlvbnMoKS5hZGQoT1BUSU9OX1FVRVJZX1NRTCk7CiAg\nICAgICAgc3VwcG9ydGVkT3B0aW9ucygpLmFkZChPUFRJT05fSkRCQ19DT05O\nRUNUSU9OKTsKICAgICAgICBzdXBwb3J0ZWRPcHRpb25zKCkucmVtb3ZlKE9Q\nVElPTl9WQUxVRV9JTkNSRU1FTlQpOwogICAgICAgIHN1cHBvcnRlZE9wdGlv\nbnMoKS5yZW1vdmUoT1BUSU9OX05VTExfQ09OVEFJTkVSKTsKCiAgICAgICAg\naWYgKGRlcml2YXRpb25zKQogICAgICAgICAgICBQcm9kdWN0RGVyaXZhdGlv\nbnMuYmVmb3JlQ29uZmlndXJhdGlvbkxvYWQodGhpcyk7CiAgICAgICAgaWYg\nKGxvYWRHbG9iYWxzKQogICAgICAgICAgICBsb2FkR2xvYmFscygpOwogICAg\nfQoKICAgIC8qKgogICAgICogQ29weSBjb25zdHJ1Y3RvcgogICAgICovCiAg\nICBwdWJsaWMgSkRCQ0NvbmZpZ3VyYXRpb25JbXBsKEpEQkNDb25maWd1cmF0\naW9uIGNvbmYpIHsKICAgICAgICB0aGlzKHRydWUsIGZhbHNlKTsKICAgICAg\nICBpZiAoY29uZiAhPSBudWxsKQogICAgICAgICAgICBmcm9tUHJvcGVydGll\ncyhjb25mLnRvUHJvcGVydGllcyhmYWxzZSkpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHNldFNjaGVtYShTdHJpbmcgc2NoZW1hKSB7CiAgICAgICAgdGhp\ncy5zY2hlbWEuc2V0U3RyaW5nKHNjaGVtYSk7CiAgICB9CgogICAgcHVibGlj\nIFN0cmluZyBnZXRTY2hlbWEoKSB7CiAgICAgICAgcmV0dXJuIHNjaGVtYS5n\nZXRTdHJpbmcoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRTY2hlbWFz\nKFN0cmluZyBzY2hlbWFzKSB7CiAgICAgICAgdGhpcy5zY2hlbWFzLnNldFN0\ncmluZyhzY2hlbWFzKTsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nIGdldFNj\naGVtYXMoKSB7CiAgICAgICAgcmV0dXJuIHNjaGVtYXMuZ2V0U3RyaW5nKCk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0U2NoZW1hcyhTdHJpbmdbXSBz\nY2hlbWFzKSB7CiAgICAgICAgdGhpcy5zY2hlbWFzLnNldChzY2hlbWFzKTsK\nICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nW10gZ2V0U2NoZW1hc0xpc3QoKSB7\nCiAgICAgICAgcmV0dXJuIHNjaGVtYXMuZ2V0KCk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgc2V0VHJhbnNhY3Rpb25Jc29sYXRpb24oU3RyaW5nIHRyYW5z\nYWN0aW9uSXNvbGF0aW9uKSB7CiAgICAgICAgdGhpcy50cmFuc2FjdGlvbklz\nb2xhdGlvbi5zZXRTdHJpbmcodHJhbnNhY3Rpb25Jc29sYXRpb24pOwogICAg\nfQoKICAgIHB1YmxpYyBTdHJpbmcgZ2V0VHJhbnNhY3Rpb25Jc29sYXRpb24o\nKSB7CiAgICAgICAgcmV0dXJuIHRyYW5zYWN0aW9uSXNvbGF0aW9uLmdldFN0\ncmluZygpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldFRyYW5zYWN0aW9u\nSXNvbGF0aW9uKGludCB0cmFuc2FjdGlvbklzb2xhdGlvbikgewogICAgICAg\nIHRoaXMudHJhbnNhY3Rpb25Jc29sYXRpb24uc2V0KHRyYW5zYWN0aW9uSXNv\nbGF0aW9uKTsKICAgIH0KCiAgICBwdWJsaWMgaW50IGdldFRyYW5zYWN0aW9u\nSXNvbGF0aW9uQ29uc3RhbnQoKSB7CiAgICAgICAgcmV0dXJuIHRyYW5zYWN0\naW9uSXNvbGF0aW9uLmdldCgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNl\ndFJlc3VsdFNldFR5cGUoU3RyaW5nIHJlc3VsdFNldFR5cGUpIHsKICAgICAg\nICB0aGlzLnJlc3VsdFNldFR5cGUuc2V0U3RyaW5nKHJlc3VsdFNldFR5cGUp\nOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgZ2V0UmVzdWx0U2V0VHlwZSgp\nIHsKICAgICAgICByZXR1cm4gcmVzdWx0U2V0VHlwZS5nZXRTdHJpbmcoKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRSZXN1bHRTZXRUeXBlKGludCBy\nZXN1bHRTZXRUeXBlKSB7CiAgICAgICAgdGhpcy5yZXN1bHRTZXRUeXBlLnNl\ndChyZXN1bHRTZXRUeXBlKTsKICAgIH0KCiAgICBwdWJsaWMgaW50IGdldFJl\nc3VsdFNldFR5cGVDb25zdGFudCgpIHsKICAgICAgICByZXR1cm4gcmVzdWx0\nU2V0VHlwZS5nZXQoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRGZXRj\naERpcmVjdGlvbihTdHJpbmcgZmV0Y2hEaXJlY3Rpb24pIHsKICAgICAgICB0\naGlzLmZldGNoRGlyZWN0aW9uLnNldFN0cmluZyhmZXRjaERpcmVjdGlvbik7\nCiAgICB9CgogICAgcHVibGljIFN0cmluZyBnZXRGZXRjaERpcmVjdGlvbigp\nIHsKICAgICAgICByZXR1cm4gZmV0Y2hEaXJlY3Rpb24uZ2V0U3RyaW5nKCk7\nCiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0RmV0Y2hEaXJlY3Rpb24oaW50\nIGZldGNoRGlyZWN0aW9uKSB7CiAgICAgICAgdGhpcy5mZXRjaERpcmVjdGlv\nbi5zZXQoZmV0Y2hEaXJlY3Rpb24pOwogICAgfQoKICAgIHB1YmxpYyBpbnQg\nZ2V0RmV0Y2hEaXJlY3Rpb25Db25zdGFudCgpIHsKICAgICAgICByZXR1cm4g\nZmV0Y2hEaXJlY3Rpb24uZ2V0KCk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nc2V0RWFnZXJGZXRjaE1vZGUoU3RyaW5nIGVhZ2VyRmV0Y2hNb2RlKSB7CiAg\nICAgICAgdGhpcy5lYWdlckZldGNoTW9kZS5zZXRTdHJpbmcoZWFnZXJGZXRj\naE1vZGUpOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgZ2V0RWFnZXJGZXRj\naE1vZGUoKSB7CiAgICAgICAgcmV0dXJuIGVhZ2VyRmV0Y2hNb2RlLmdldFN0\ncmluZygpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldEVhZ2VyRmV0Y2hN\nb2RlKGludCBlYWdlckZldGNoTW9kZSkgewogICAgICAgIHRoaXMuZWFnZXJG\nZXRjaE1vZGUuc2V0KGVhZ2VyRmV0Y2hNb2RlKTsKICAgIH0KCiAgICBwdWJs\naWMgaW50IGdldEVhZ2VyRmV0Y2hNb2RlQ29uc3RhbnQoKSB7CiAgICAgICAg\ncmV0dXJuIGVhZ2VyRmV0Y2hNb2RlLmdldCgpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHNldFN1YmNsYXNzRmV0Y2hNb2RlKFN0cmluZyBzdWJjbGFzc0Zl\ndGNoTW9kZSkgewogICAgICAgIHRoaXMuc3ViY2xhc3NGZXRjaE1vZGUuc2V0\nU3RyaW5nKHN1YmNsYXNzRmV0Y2hNb2RlKTsKICAgIH0KCiAgICBwdWJsaWMg\nU3RyaW5nIGdldFN1YmNsYXNzRmV0Y2hNb2RlKCkgewogICAgICAgIHJldHVy\nbiBzdWJjbGFzc0ZldGNoTW9kZS5nZXRTdHJpbmcoKTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBzZXRTdWJjbGFzc0ZldGNoTW9kZShpbnQgc3ViY2xhc3NG\nZXRjaE1vZGUpIHsKICAgICAgICB0aGlzLnN1YmNsYXNzRmV0Y2hNb2RlLnNl\ndChzdWJjbGFzc0ZldGNoTW9kZSk7CiAgICB9CgogICAgcHVibGljIGludCBn\nZXRTdWJjbGFzc0ZldGNoTW9kZUNvbnN0YW50KCkgewogICAgICAgIHJldHVy\nbiBzdWJjbGFzc0ZldGNoTW9kZS5nZXQoKTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBzZXRMUlNTaXplKFN0cmluZyBscnNTaXplKSB7CiAgICAgICAgdGhp\ncy5scnNTaXplLnNldFN0cmluZyhscnNTaXplKTsKICAgIH0KCiAgICBwdWJs\naWMgU3RyaW5nIGdldExSU1NpemUoKSB7CiAgICAgICAgcmV0dXJuIGxyc1Np\nemUuZ2V0U3RyaW5nKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0TFJT\nU2l6ZShpbnQgbHJzU2l6ZSkgewogICAgICAgIHRoaXMubHJzU2l6ZS5zZXQo\nbHJzU2l6ZSk7CiAgICB9CgogICAgcHVibGljIGludCBnZXRMUlNTaXplQ29u\nc3RhbnQoKSB7CiAgICAgICAgcmV0dXJuIGxyc1NpemUuZ2V0KCk7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgc2V0U3luY2hyb25pemVNYXBwaW5ncyhTdHJp\nbmcgc3luY2hyb25pemVNYXBwaW5ncykgewogICAgICAgIHRoaXMuc3luY2hy\nb25pemVNYXBwaW5ncy5zZXQoc3luY2hyb25pemVNYXBwaW5ncyk7CiAgICB9\nCgogICAgcHVibGljIFN0cmluZyBnZXRTeW5jaHJvbml6ZU1hcHBpbmdzKCkg\newogICAgICAgIHJldHVybiBzeW5jaHJvbml6ZU1hcHBpbmdzLmdldCgpOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldEpEQkNMaXN0ZW5lcnMoU3RyaW5n\nIGpkYmNMaXN0ZW5lcnMpIHsKICAgICAgICBqZGJjTGlzdGVuZXJQbHVnaW5z\nLnNldFN0cmluZyhqZGJjTGlzdGVuZXJzKTsKICAgIH0KCiAgICBwdWJsaWMg\nU3RyaW5nIGdldEpEQkNMaXN0ZW5lcnMoKSB7CiAgICAgICAgcmV0dXJuIGpk\nYmNMaXN0ZW5lclBsdWdpbnMuZ2V0U3RyaW5nKCk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgc2V0SkRCQ0xpc3RlbmVycyhKREJDTGlzdGVuZXJbXSBsaXN0\nZW5lcnMpIHsKICAgICAgICBqZGJjTGlzdGVuZXJQbHVnaW5zLnNldChsaXN0\nZW5lcnMpOwogICAgfQoKICAgIHB1YmxpYyBKREJDTGlzdGVuZXJbXSBnZXRK\nREJDTGlzdGVuZXJJbnN0YW5jZXMoKSB7CiAgICAgICAgaWYgKGpkYmNMaXN0\nZW5lclBsdWdpbnMuZ2V0KCkgPT0gbnVsbCkKICAgICAgICAgICAgamRiY0xp\nc3RlbmVyUGx1Z2lucy5pbnN0YW50aWF0ZShKREJDTGlzdGVuZXIuY2xhc3Ms\nIHRoaXMpOwogICAgICAgIHJldHVybiAoSkRCQ0xpc3RlbmVyW10pIGpkYmNM\naXN0ZW5lclBsdWdpbnMuZ2V0KCk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nc2V0Q29ubmVjdGlvbkRlY29yYXRvcnMoU3RyaW5nIGNvbm5lY3Rpb25EZWNv\ncmF0b3JzKSB7CiAgICAgICAgY29ubmVjdGlvbkRlY29yYXRvclBsdWdpbnMu\nc2V0U3RyaW5nKGNvbm5lY3Rpb25EZWNvcmF0b3JzKTsKICAgIH0KCiAgICBw\ndWJsaWMgU3RyaW5nIGdldENvbm5lY3Rpb25EZWNvcmF0b3JzKCkgewogICAg\nICAgIHJldHVybiBjb25uZWN0aW9uRGVjb3JhdG9yUGx1Z2lucy5nZXRTdHJp\nbmcoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRDb25uZWN0aW9uRGVj\nb3JhdG9ycyhDb25uZWN0aW9uRGVjb3JhdG9yW10gZGVjb3JhdG9ycykgewog\nICAgICAgIGNvbm5lY3Rpb25EZWNvcmF0b3JQbHVnaW5zLnNldChkZWNvcmF0\nb3JzKTsKICAgIH0KCiAgICBwdWJsaWMgQ29ubmVjdGlvbkRlY29yYXRvcltd\nIGdldENvbm5lY3Rpb25EZWNvcmF0b3JJbnN0YW5jZXMoKSB7CiAgICAgICAg\naWYgKGNvbm5lY3Rpb25EZWNvcmF0b3JQbHVnaW5zLmdldCgpID09IG51bGwp\nIHsKICAgICAgICAgICAgY29ubmVjdGlvbkRlY29yYXRvclBsdWdpbnMuaW5z\ndGFudGlhdGUKICAgICAgICAgICAgICAgIChDb25uZWN0aW9uRGVjb3JhdG9y\nLmNsYXNzLCB0aGlzKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIChDb25u\nZWN0aW9uRGVjb3JhdG9yW10pIGNvbm5lY3Rpb25EZWNvcmF0b3JQbHVnaW5z\nLmdldCgpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldERCRGljdGlvbmFy\neShTdHJpbmcgZGJkaWN0aW9uYXJ5KSB7CiAgICAgICAgZGJkaWN0aW9uYXJ5\nUGx1Z2luLnNldFN0cmluZyhkYmRpY3Rpb25hcnkpOwogICAgfQoKICAgIHB1\nYmxpYyBTdHJpbmcgZ2V0REJEaWN0aW9uYXJ5KCkgewogICAgICAgIHJldHVy\nbiBkYmRpY3Rpb25hcnlQbHVnaW4uZ2V0U3RyaW5nKCk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgc2V0REJEaWN0aW9uYXJ5KERCRGljdGlvbmFyeSBkYmRp\nY3Rpb25hcnkpIHsKICAgICAgICAvLyB3ZSBjYW4ndCBhbGxvdyB0aGUgZGlj\ndGlvbmFyeSB0byBiZSBzZXQgYWZ0ZXIgdGhlIGNvbm5lY3Rpb24KICAgICAg\nICAvLyBmYWN0b3J5LCBkdWUgdG8gaW5pdGlhbGl6YXRpb24gaXNzdWVzCiAg\nICAgICAgaWYgKGNvbm5lY3Rpb25GYWN0b3J5LmdldCgpICE9IG51bGwKICAg\nICAgICAgICAgfHwgY29ubmVjdGlvbkZhY3RvcnkyLmdldCgpICE9IG51bGwp\nCiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24o\nKTsKCiAgICAgICAgZGJkaWN0aW9uYXJ5UGx1Z2luLnNldChkYmRpY3Rpb25h\ncnkpOwogICAgfQoKICAgIHB1YmxpYyBEQkRpY3Rpb25hcnkgZ2V0REJEaWN0\naW9uYXJ5SW5zdGFuY2UoKSB7CiAgICAgICAgLy8gbG9jayBvbiBjb25uZWN0\naW9uIGZhY3RvcnkgbmFtZSwgc2luY2UgZ2V0dGluZyB0aGUgY29ubmVjdGlv\nbgogICAgICAgIC8vIGZhY3RvcnkgYW5kIGdldHRpbmcgdGhlIGRpY3Rpb25h\ncnkgaGF2ZSB0byB1c2UgdGhlIHNhbWUgbG9ja3MgdG8KICAgICAgICAvLyBw\ncmV2ZW50IGRlYWRsb2NrIHNpbmNlIHRoZXkgY2FsbCBlYWNoIG90aGVyCiAg\nICAgICAgREJEaWN0aW9uYXJ5IGRiZGljdGlvbmFyeSA9IChEQkRpY3Rpb25h\ncnkpIGRiZGljdGlvbmFyeVBsdWdpbi5nZXQoKTsKICAgICAgICBpZiAoZGJk\naWN0aW9uYXJ5ID09IG51bGwpIHsKICAgICAgICAgICAgU3RyaW5nIGNsc05h\nbWUgPSBkYmRpY3Rpb25hcnlQbHVnaW4uZ2V0Q2xhc3NOYW1lKCk7CiAgICAg\nICAgICAgIFN0cmluZyBwcm9wcyA9IGRiZGljdGlvbmFyeVBsdWdpbi5nZXRQ\ncm9wZXJ0aWVzKCk7CiAgICAgICAgICAgIGlmICghU3RyaW5nVXRpbHMuaXNF\nbXB0eShjbHNOYW1lKSkgewogICAgICAgICAgICAgICAgZGJkaWN0aW9uYXJ5\nID0gREJEaWN0aW9uYXJ5RmFjdG9yeS5uZXdEQkRpY3Rpb25hcnkKICAgICAg\nICAgICAgICAgICAgICAodGhpcywgY2xzTmFtZSwgcHJvcHMpOwogICAgICAg\nICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gaWYgdGhlIGRpY3Rp\nb25hcnkgY2xhc3MgaXNuJ3Qgc2V0LCB0cnkgdG8gZ3Vlc3MgZnJvbQogICAg\nICAgICAgICAgICAgLy8gY29ubmVjdGlvbiBVUkwgYW5kIGRyaXZlciBuYW1l\nCiAgICAgICAgICAgICAgICBkYmRpY3Rpb25hcnkgPSBEQkRpY3Rpb25hcnlG\nYWN0b3J5LmNhbGN1bGF0ZURCRGljdGlvbmFyeQogICAgICAgICAgICAgICAg\nICAgICh0aGlzLCBnZXRDb25uZWN0aW9uVVJMKCksIGdldENvbm5lY3Rpb25E\ncml2ZXJOYW1lKCksCiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzKTsK\nCiAgICAgICAgICAgICAgICAvLyBpZiB0aGUgdXJsIGFuZCBkcml2ZXIgbmFt\nZSBhcmVuJ3QgZW5vdWdoLCBjb25uZWN0IHRvCiAgICAgICAgICAgICAgICAv\nLyB0aGUgREIgYW5kIHVzZSB0aGUgY29ubmVjdGlvbiBtZXRhZGF0YQogICAg\nICAgICAgICAgICAgaWYgKGRiZGljdGlvbmFyeSA9PSBudWxsKSB7CiAgICAg\nICAgICAgICAgICAgICAgTG9nIGxvZyA9IGdldExvZyhMT0dfSkRCQyk7CiAg\nICAgICAgICAgICAgICAgICAgaWYgKGxvZy5pc1RyYWNlRW5hYmxlZCgpKSB7\nCiAgICAgICAgICAgICAgICAgICAgICAgIExvY2FsaXplciBsb2MgPSBMb2Nh\nbGl6ZXIuZm9yUGFja2FnZQogICAgICAgICAgICAgICAgICAgICAgICAgICAg\nKEpEQkNDb25maWd1cmF0aW9uSW1wbC5jbGFzcyk7CiAgICAgICAgICAgICAg\nICAgICAgICAgIGxvZy50cmFjZShsb2MuZ2V0KCJjb25uZWN0aW5nLWZvci1k\naWN0aW9uYXJ5IikpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAg\nICAgICAgICAgICAgLy8gdXNlIHRoZSBiYXNlIGNvbm5lY3Rpb24gZmFjdG9y\neSByYXRoZXIgdGhhbiB0aGUKICAgICAgICAgICAgICAgICAgICAvLyBjb25m\naWd1cmVkIGRhdGEgc291cmNlIGIvYyB0aGUgZGF0YSBzb3VyY2UgcmVsaWVz\nCiAgICAgICAgICAgICAgICAgICAgLy8gb24gcGFzc2luZyB0aGUgY29ubmVj\ndGlvbiB0aHJvdWdoIHRoZSBkaWN0aW9uYXJ5LAogICAgICAgICAgICAgICAg\nICAgIC8vIHJlc3VsdGluZyBpbiBpbmZpbml0ZSBsb29wcwogICAgICAgICAg\nICAgICAgICAgIERhdGFTb3VyY2UgZHMgPSBjcmVhdGVDb25uZWN0aW9uRmFj\ndG9yeSgpOwogICAgICAgICAgICAgICAgICAgIGRiZGljdGlvbmFyeSA9IERC\nRGljdGlvbmFyeUZhY3RvcnkubmV3REJEaWN0aW9uYXJ5CiAgICAgICAgICAg\nICAgICAgICAgICAgICh0aGlzLCBnZXREYXRhU291cmNlKG51bGwsIGRzKSwg\ncHJvcHMpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAg\nICAgICAgIGRiZGljdGlvbmFyeVBsdWdpbi5zZXQoZGJkaWN0aW9uYXJ5LCB0\ncnVlKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGRiZGljdGlvbmFyeTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRVcGRhdGVNYW5hZ2VyKFN0cmlu\nZyB1cGRhdGVNYW5hZ2VyKSB7CiAgICAgICAgdXBkYXRlTWFuYWdlclBsdWdp\nbi5zZXRTdHJpbmcodXBkYXRlTWFuYWdlcik7CiAgICB9CgogICAgcHVibGlj\nIFN0cmluZyBnZXRVcGRhdGVNYW5hZ2VyKCkgewogICAgICAgIHJldHVybiB1\ncGRhdGVNYW5hZ2VyUGx1Z2luLmdldFN0cmluZygpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHNldFVwZGF0ZU1hbmFnZXIoVXBkYXRlTWFuYWdlciB1cGRh\ndGVNYW5hZ2VyKSB7CiAgICAgICAgdXBkYXRlTWFuYWdlclBsdWdpbi5zZXQo\ndXBkYXRlTWFuYWdlcik7CiAgICB9CgogICAgcHVibGljIFVwZGF0ZU1hbmFn\nZXIgZ2V0VXBkYXRlTWFuYWdlckluc3RhbmNlKCkgewogICAgICAgIGlmICh1\ncGRhdGVNYW5hZ2VyUGx1Z2luLmdldCgpID09IG51bGwpCiAgICAgICAgICAg\nIHVwZGF0ZU1hbmFnZXJQbHVnaW4uaW5zdGFudGlhdGUoVXBkYXRlTWFuYWdl\nci5jbGFzcywgdGhpcyk7CiAgICAgICAgcmV0dXJuIChVcGRhdGVNYW5hZ2Vy\nKSB1cGRhdGVNYW5hZ2VyUGx1Z2luLmdldCgpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHNldERyaXZlckRhdGFTb3VyY2UoU3RyaW5nIGRyaXZlckRhdGFT\nb3VyY2UpIHsKICAgICAgICBkcml2ZXJEYXRhU291cmNlUGx1Z2luLnNldFN0\ncmluZyhkcml2ZXJEYXRhU291cmNlKTsKICAgIH0KCiAgICBwdWJsaWMgU3Ry\naW5nIGdldERyaXZlckRhdGFTb3VyY2UoKSB7CiAgICAgICAgcmV0dXJuIGRy\naXZlckRhdGFTb3VyY2VQbHVnaW4uZ2V0U3RyaW5nKCk7CiAgICB9CgogICAg\ncHVibGljIERyaXZlckRhdGFTb3VyY2UgbmV3RHJpdmVyRGF0YVNvdXJjZUlu\nc3RhbmNlKCkgewogICAgICAgIHJldHVybiAoRHJpdmVyRGF0YVNvdXJjZSkg\nZHJpdmVyRGF0YVNvdXJjZVBsdWdpbi4KICAgICAgICAgICAgaW5zdGFudGlh\ndGUoRHJpdmVyRGF0YVNvdXJjZS5jbGFzcywgdGhpcyk7CiAgICB9CgogICAg\ncHVibGljIHZvaWQgc2V0U2NoZW1hRmFjdG9yeShTdHJpbmcgc2NoZW1hRmFj\ndG9yeSkgewogICAgICAgIHNjaGVtYUZhY3RvcnlQbHVnaW4uc2V0U3RyaW5n\nKHNjaGVtYUZhY3RvcnkpOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgZ2V0\nU2NoZW1hRmFjdG9yeSgpIHsKICAgICAgICByZXR1cm4gc2NoZW1hRmFjdG9y\neVBsdWdpbi5nZXRTdHJpbmcoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBz\nZXRTY2hlbWFGYWN0b3J5KFNjaGVtYUZhY3Rvcnkgc2NoZW1hRmFjdG9yeSkg\newogICAgICAgIHNjaGVtYUZhY3RvcnlQbHVnaW4uc2V0KHNjaGVtYUZhY3Rv\ncnkpOwogICAgfQoKICAgIHB1YmxpYyBTY2hlbWFGYWN0b3J5IGdldFNjaGVt\nYUZhY3RvcnlJbnN0YW5jZSgpIHsKICAgICAgICBpZiAoc2NoZW1hRmFjdG9y\neVBsdWdpbi5nZXQoKSA9PSBudWxsKQogICAgICAgICAgICBzY2hlbWFGYWN0\nb3J5UGx1Z2luLmluc3RhbnRpYXRlKFNjaGVtYUZhY3RvcnkuY2xhc3MsIHRo\naXMpOwogICAgICAgIHJldHVybiAoU2NoZW1hRmFjdG9yeSkgc2NoZW1hRmFj\ndG9yeVBsdWdpbi5nZXQoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRT\nUUxGYWN0b3J5KFN0cmluZyBzcWxGYWN0b3J5KSB7CiAgICAgICAgc3FsRmFj\ndG9yeVBsdWdpbi5zZXRTdHJpbmcoc3FsRmFjdG9yeSk7CiAgICB9CgogICAg\ncHVibGljIFN0cmluZyBnZXRTUUxGYWN0b3J5KCkgewogICAgICAgIHJldHVy\nbiBzcWxGYWN0b3J5UGx1Z2luLmdldFN0cmluZygpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHNldFNRTEZhY3RvcnkoU1FMRmFjdG9yeSBzcWxGYWN0b3J5\nKSB7CiAgICAgICAgc3FsRmFjdG9yeVBsdWdpbi5zZXQoc3FsRmFjdG9yeSk7\nCiAgICB9CgogICAgcHVibGljIFNRTEZhY3RvcnkgZ2V0U1FMRmFjdG9yeUlu\nc3RhbmNlKCkgewogICAgICAgIGlmIChzcWxGYWN0b3J5UGx1Z2luLmdldCgp\nID09IG51bGwpCiAgICAgICAgICAgIHNxbEZhY3RvcnlQbHVnaW4uaW5zdGFu\ndGlhdGUoU1FMRmFjdG9yeS5jbGFzcywgdGhpcyk7CiAgICAgICAgcmV0dXJu\nIChTUUxGYWN0b3J5KSBzcWxGYWN0b3J5UGx1Z2luLmdldCgpOwogICAgfQoK\nICAgIHB1YmxpYyBTdHJpbmcgZ2V0TWFwcGluZ0ZhY3RvcnkoKSB7CiAgICAg\nICAgcmV0dXJuIG1hcHBpbmdGYWN0b3J5UGx1Z2luLmdldFN0cmluZygpOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldE1hcHBpbmdGYWN0b3J5KFN0cmlu\nZyBtYXBwaW5nKSB7CiAgICAgICAgbWFwcGluZ0ZhY3RvcnlQbHVnaW4uc2V0\nU3RyaW5nKG1hcHBpbmcpOwogICAgfQoKICAgIHB1YmxpYyBNZXRhRGF0YUZh\nY3RvcnkgbmV3TWV0YURhdGFGYWN0b3J5SW5zdGFuY2UoKSB7CiAgICAgICAg\ncmV0dXJuIG1hcHBpbmdGYWN0b3J5UGx1Z2luLmluc3RhbnRpYXRlTWV0YURh\ndGFGYWN0b3J5KHRoaXMsCiAgICAgICAgICAgIG1ldGFGYWN0b3J5UGx1Z2lu\nLCBnZXRNYXBwaW5nKCkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldE1h\ncHBpbmdEZWZhdWx0cyhTdHJpbmcgbWFwcGluZykgewogICAgICAgIHRoaXMu\nbWFwcGluZ0RlZmF1bHRzUGx1Z2luLnNldFN0cmluZyhtYXBwaW5nKTsKICAg\nIH0KCiAgICBwdWJsaWMgU3RyaW5nIGdldE1hcHBpbmdEZWZhdWx0cygpIHsK\nICAgICAgICByZXR1cm4gbWFwcGluZ0RlZmF1bHRzUGx1Z2luLmdldFN0cmlu\nZygpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldE1hcHBpbmdEZWZhdWx0\ncyhNYXBwaW5nRGVmYXVsdHMgbWFwcGluZykgewogICAgICAgIG1hcHBpbmdE\nZWZhdWx0c1BsdWdpbi5zZXQobWFwcGluZyk7CiAgICB9CgogICAgcHVibGlj\nIE1hcHBpbmdEZWZhdWx0cyBnZXRNYXBwaW5nRGVmYXVsdHNJbnN0YW5jZSgp\nIHsKICAgICAgICBpZiAobWFwcGluZ0RlZmF1bHRzUGx1Z2luLmdldCgpID09\nIG51bGwpCiAgICAgICAgICAgIG1hcHBpbmdEZWZhdWx0c1BsdWdpbi5pbnN0\nYW50aWF0ZShNYXBwaW5nRGVmYXVsdHMuY2xhc3MsIHRoaXMpOwogICAgICAg\nIHJldHVybiAoTWFwcGluZ0RlZmF1bHRzKSBtYXBwaW5nRGVmYXVsdHNQbHVn\naW4uZ2V0KCk7CiAgICB9CgogICAgcHVibGljIE1hcHBpbmdSZXBvc2l0b3J5\nIGdldE1hcHBpbmdSZXBvc2l0b3J5SW5zdGFuY2UoKSB7CiAgICAgICAgcmV0\ndXJuIChNYXBwaW5nUmVwb3NpdG9yeSkgZ2V0TWV0YURhdGFSZXBvc2l0b3J5\nSW5zdGFuY2UoKTsKICAgIH0KCiAgICBwdWJsaWMgTWFwcGluZ1JlcG9zaXRv\ncnkgbmV3TWFwcGluZ1JlcG9zaXRvcnlJbnN0YW5jZSgpIHsKICAgICAgICBy\nZXR1cm4gKE1hcHBpbmdSZXBvc2l0b3J5KSBuZXdNZXRhRGF0YVJlcG9zaXRv\ncnlJbnN0YW5jZSgpOwogICAgfQoKICAgIHB1YmxpYyBCcm9rZXJJbXBsIG5l\nd0Jyb2tlckluc3RhbmNlKFN0cmluZyB1c2VyLCBTdHJpbmcgcGFzcykgewog\nICAgICAgIEJyb2tlckltcGwgYnJva2VyID0gc3VwZXIubmV3QnJva2VySW5z\ndGFuY2UodXNlciwgcGFzcyk7CgogICAgICAgIC8vIHJlY29yZCBmaXJzdCBu\nb24tbnVsbCBicm9rZXIgdXNlciBhbmQgcGFzcyBpbiBjYXNlIG5vIGdsb2Jh\nbCBzZXR0aW5ncwogICAgICAgIGlmIChicm9rZXIgIT0gbnVsbCAmJiB1c2Vy\nICE9IG51bGwgJiYgZmlyc3RVc2VyID09IG51bGwpIHsKICAgICAgICAgICAg\nZmlyc3RVc2VyID0gdXNlcjsKICAgICAgICAgICAgZmlyc3RQYXNzID0gcGFz\nczsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJyb2tlcjsKICAgIH0KCiAg\nICBwdWJsaWMgT2JqZWN0IGdldENvbm5lY3Rpb25GYWN0b3J5KCkgewogICAg\nICAgIC8vIG92ZXJyaWRlIHRvIGNvbmZpZ3VyZSBkYXRhIHNvdXJjZQogICAg\nICAgIGlmIChkYXRhU291cmNlID09IG51bGwpIHsKICAgICAgICAgICAgRGVj\nb3JhdGluZ0RhdGFTb3VyY2UgZHMgPSBjcmVhdGVDb25uZWN0aW9uRmFjdG9y\neSgpOwogICAgICAgICAgICBkYXRhU291cmNlID0gRGF0YVNvdXJjZUZhY3Rv\ncnkuaW5zdGFsbERCRGljdGlvbmFyeQogICAgICAgICAgICAgICAgKGdldERC\nRGljdGlvbmFyeUluc3RhbmNlKCksIGRzLCB0aGlzLCBmYWxzZSk7CiAgICAg\nICAgfQogICAgICAgIHJldHVybiBkYXRhU291cmNlOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIHNldENvbm5lY3Rpb25GYWN0b3J5KE9iamVjdCBmYWN0b3J5\nKSB7CiAgICAgICAgLy8gdGhlcmUncyBhIGxvdCBvZiBvbmUtdGltZSBpbml0\naWFsaXphdGlvbiBpbnZvbHZlZCBmb3IKICAgICAgICAvLyBjb25uZWN0aW9u\nIGZhY3Rvcmllcywgc28gaWdub3JlIHJlc2V0cwogICAgICAgIGlmIChmYWN0\nb3J5ID09IGNvbm5lY3Rpb25GYWN0b3J5LmdldCgpKQogICAgICAgICAgICBy\nZXR1cm47CgogICAgICAgIC8vIG92ZXJyaWRlIHRvIGNvbmZpZ3VyZSBkYXRh\nIHNvdXJjZQogICAgICAgIGlmIChmYWN0b3J5ICE9IG51bGwpIHsKICAgICAg\nICAgICAgLy8gbmVlZCB0byBlbnN1cmUgaXQgaXMgZGVjb3JhdGVkIGJlZm9y\nZSB3ZSBzZXQgdGhlIGRpY3QKICAgICAgICAgICAgRGVjb3JhdGluZ0RhdGFT\nb3VyY2UgZHMgPQogICAgICAgICAgICAgICAgc2V0dXBDb25uZWN0aW9uRmFj\ndG9yeSgoRGF0YVNvdXJjZSkgZmFjdG9yeSwgZmFsc2UpOwogICAgICAgICAg\nICBkYXRhU291cmNlID0gRGF0YVNvdXJjZUZhY3RvcnkuaW5zdGFsbERCRGlj\ndGlvbmFyeQogICAgICAgICAgICAgICAgKGdldERCRGljdGlvbmFyeUluc3Rh\nbmNlKCksIGRzLCB0aGlzLCBmYWxzZSk7CiAgICAgICAgfSBlbHNlCiAgICAg\nICAgICAgIGNvbm5lY3Rpb25GYWN0b3J5LnNldChudWxsKTsKICAgIH0KCiAg\nICAvKioKICAgICAqIEVuc3VyZSB0aGF0IHRoZSBzcGVjaWZpZWQgRGF0YVNv\ndXJjZSBpcyBkZWNvcmF0ZWQgYW5kIHNldCBpbiB0aGUgY2FjaGUuCiAgICAg\nKi8KICAgIHByaXZhdGUgRGVjb3JhdGluZ0RhdGFTb3VyY2Ugc2V0dXBDb25u\nZWN0aW9uRmFjdG9yeShEYXRhU291cmNlIGRzLAogICAgICAgIGJvb2xlYW4g\nZmFjdG9yeTIpIHsKICAgICAgICBpZiAoZHMgPT0gbnVsbCkKICAgICAgICAg\nICAgcmV0dXJuIG51bGw7CgogICAgICAgIERlY29yYXRpbmdEYXRhU291cmNl\nIGRkczsKICAgICAgICBpZiAoZHMgaW5zdGFuY2VvZiBEZWNvcmF0aW5nRGF0\nYVNvdXJjZSkKICAgICAgICAgICAgZGRzID0gKERlY29yYXRpbmdEYXRhU291\ncmNlKSBkczsKICAgICAgICBlbHNlCiAgICAgICAgICAgIGRkcyA9IERhdGFT\nb3VyY2VGYWN0b3J5LmRlY29yYXRlRGF0YVNvdXJjZShkcywgdGhpcywgZmFj\ndG9yeTIpOwoKICAgICAgICBpZiAoIWZhY3RvcnkyICYmIGNvbm5lY3Rpb25G\nYWN0b3J5LmdldCgpICE9IGRzKQogICAgICAgICAgICBjb25uZWN0aW9uRmFj\ndG9yeS5zZXQoZGRzLCB0cnVlKTsKICAgICAgICBlbHNlIGlmIChmYWN0b3J5\nMiAmJiBjb25uZWN0aW9uRmFjdG9yeTIuZ2V0KCkgIT0gZHMpCiAgICAgICAg\nICAgIGNvbm5lY3Rpb25GYWN0b3J5Mi5zZXQoZGRzLCB0cnVlKTsKCiAgICAg\nICAgcmV0dXJuIGRkczsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IGdldENv\nbm5lY3Rpb25GYWN0b3J5MigpIHsKICAgICAgICAvLyBvdmVycmlkZSB0byBj\nb25maWd1cmUgZGF0YSBzb3VyY2UKICAgICAgICBpZiAoZGF0YVNvdXJjZTIg\nPT0gbnVsbCkgewogICAgICAgICAgICAvLyBzdXBlcmNsYXNzIHdpbGwgbG9v\na3VwIGZyb20gSk5ESS4KICAgICAgICAgICAgT2JqZWN0IG9iaiA9IHN1cGVy\nLmdldENvbm5lY3Rpb25GYWN0b3J5MigpOwogICAgICAgICAgICBEYXRhU291\ncmNlIGRzID0gbnVsbDsKICAgICAgICAgICAgaWYgKG9iaiAhPSBudWxsKSB7\nCiAgICAgICAgICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgRGF0YVNvdXJj\nZSkgCiAgICAgICAgICAgICAgICAgICAgZHMgPSAoRGF0YVNvdXJjZSkgb2Jq\nOwogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAg\nTG9nIGxvZyA9IGdldExvZyhMT0dfSkRCQyk7CiAgICAgICAgICAgICAgICAg\nICAgaWYgKGxvZy5pc1RyYWNlRW5hYmxlZCgpKSB7CiAgICAgICAgICAgICAg\nICAgICAgICAgIExvY2FsaXplciBsb2MgPSBMb2NhbGl6ZXIuZm9yUGFja2Fn\nZShKREJDQ29uZmlndXJhdGlvbkltcGwuY2xhc3MpOwogICAgICAgICAgICAg\nICAgICAgICAgICBsb2cudHJhY2UobG9jLmdldCgidW5rbm93bi1kYXRhc291\ncmNlIiwgZ2V0Q29ubmVjdGlvbkZhY3RvcnkyTmFtZSgpLCAKICAgICAgICAg\nICAgICAgICAgICAgICAgICAgIG9iai5nZXRDbGFzcygpLmdldE5hbWUoKSkp\nOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAg\nICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIChk\ncyA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAvLyB0aGUgZHJpdmVyIG5h\nbWUgaXMgYWx3YXlzIHJlcXVpcmVkLCBzbyBpZiBub3Qgc3BlY2lmaWVkLAog\nICAgICAgICAgICAgICAgLy8gdGhlbiBubyBjb25uZWN0aW9uIGZhY3Rvcnkg\nMgogICAgICAgICAgICAgICAgU3RyaW5nIGRyaXZlciA9IGdldENvbm5lY3Rp\nb24yRHJpdmVyTmFtZSgpOwogICAgICAgICAgICAgICAgaWYgKCFTdHJpbmdV\ndGlscy5pc0VtcHR5KGRyaXZlcikpCiAgICAgICAgICAgICAgICAgICAgZHMg\nPSBEYXRhU291cmNlRmFjdG9yeS5uZXdEYXRhU291cmNlKHRoaXMsIHRydWUp\nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChkcyAhPSBudWxsKSB7\nCiAgICAgICAgICAgICAgICBEZWNvcmF0aW5nRGF0YVNvdXJjZSBkZHMgPQog\nICAgICAgICAgICAgICAgICAgIHNldHVwQ29ubmVjdGlvbkZhY3RvcnkoZHMs\nIHRydWUpOyAvLyBiZWZvcmUgZGljdAogICAgICAgICAgICAgICAgZGF0YVNv\ndXJjZTIgPSBEYXRhU291cmNlRmFjdG9yeS5pbnN0YWxsREJEaWN0aW9uYXJ5\nCiAgICAgICAgICAgICAgICAgICAgKGdldERCRGljdGlvbmFyeUluc3RhbmNl\nKCksIGRkcywgdGhpcywgdHJ1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9\nCiAgICAgICAgcmV0dXJuIGRhdGFTb3VyY2UyOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHNldENvbm5lY3Rpb25GYWN0b3J5MihPYmplY3QgZmFjdG9yeSkg\newogICAgICAgIGlmIChmYWN0b3J5ID09IGNvbm5lY3Rpb25GYWN0b3J5Mi5n\nZXQoKSkKICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICAvLyBvdmVycmlk\nZSB0byBjb25maWd1cmUgZGF0YSBzb3VyY2UKICAgICAgICBpZiAoZmFjdG9y\neSAhPSBudWxsKSB7CiAgICAgICAgICAgIC8vIG5lZWQgdG8gZW5zdXJlIGl0\nIGlzIGRlY29yYXRlZCBiZWZvcmUgd2Ugc2V0IHRoZSBkaWN0CiAgICAgICAg\nICAgIERlY29yYXRpbmdEYXRhU291cmNlIGRzID0gc2V0dXBDb25uZWN0aW9u\nRmFjdG9yeSgoRGF0YVNvdXJjZSkKICAgICAgICAgICAgICAgIGZhY3Rvcnks\nIHRydWUpOwogICAgICAgICAgICBkYXRhU291cmNlMiA9IERhdGFTb3VyY2VG\nYWN0b3J5Lmluc3RhbGxEQkRpY3Rpb25hcnkKICAgICAgICAgICAgICAgIChn\nZXREQkRpY3Rpb25hcnlJbnN0YW5jZSgpLCBkcywgdGhpcywgdHJ1ZSk7CiAg\nICAgICAgfSBlbHNlCiAgICAgICAgICAgIGNvbm5lY3Rpb25GYWN0b3J5Mi5z\nZXQobnVsbCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgdGhlIGNv\nbm5lY3Rpb24gZmFjdG9yeSBpZiBuZWNlc3NhcnkuCiAgICAgKi8KICAgIHB1\nYmxpYyBEZWNvcmF0aW5nRGF0YVNvdXJjZSBjcmVhdGVDb25uZWN0aW9uRmFj\ndG9yeSgpIHsKICAgICAgICBEYXRhU291cmNlIGRzID0gKERhdGFTb3VyY2Up\nIGNvbm5lY3Rpb25GYWN0b3J5LmdldCgpOwogICAgICAgIExvZyBsb2cgPSBn\nZXRMb2coTE9HX0pEQkMpOwogICAgICAgIGlmIChkcyAhPSBudWxsKSB7CiAg\nICAgICAgICAgIGlmIChsb2cuaXNUcmFjZUVuYWJsZWQoKSkKICAgICAgICAg\nICAgICAgIGxvZy50cmFjZSgiY3JlYXRlQ29ubmVjdGlvbkZhY3Rvcnk6IERh\ndGFTb3VyY2U6IiArIGRzKTsKCiAgICAgICAgICAgIHJldHVybiBzZXR1cENv\nbm5lY3Rpb25GYWN0b3J5KGRzLCBmYWxzZSk7CiAgICAgICAgfQoKICAgICAg\nICBkcyA9IChEYXRhU291cmNlKSBzdXBlci5nZXRDb25uZWN0aW9uRmFjdG9y\neSgpOyAvLyBKTkRJIGxvb2t1cAogICAgICAgIGlmIChkcyA9PSBudWxsKQog\nICAgICAgICAgICBkcyA9IERhdGFTb3VyY2VGYWN0b3J5Lm5ld0RhdGFTb3Vy\nY2UodGhpcywgZmFsc2UpOwoKICAgICAgICBpZiAobG9nLmlzVHJhY2VFbmFi\nbGVkKCkpCiAgICAgICAgICAgIGxvZy50cmFjZSgiY3JlYXRlQ29ubmVjdGlv\nbkZhY3Rvcnk6IERhdGFTb3VyY2U9Iitkcyk7CgogICAgICAgIHJldHVybiBz\nZXR1cENvbm5lY3Rpb25GYWN0b3J5KGRzLCBmYWxzZSk7CiAgICB9CgogICAg\ncHVibGljIERhdGFTb3VyY2UgZ2V0RGF0YVNvdXJjZShTdG9yZUNvbnRleHQg\nY3R4KSB7ICAgICAgIAogICAgICAgIExvZyBsb2cgPSBnZXRMb2coTE9HX1JV\nTlRJTUUpOwogICAgICAgIERhdGFTb3VyY2UgZHMgPSBudWxsOwogICAgICAg\nIAogICAgICAgIGlmKGN0eCAhPSBudWxsICYmIFN0cmluZ1V0aWxzLmlzTm90\nRW1wdHkoY3R4LmdldENvbm5lY3Rpb25GYWN0b3J5TmFtZSgpKSkgewogICAg\nICAgICAgICBkcyA9ICBnZXREYXRhU291cmNlKGN0eCwgKERhdGFTb3VyY2Up\nIGN0eC5nZXRDb25uZWN0aW9uRmFjdG9yeSgpKTsgCiAgICAgICAgICAgIC8v\nIGZhaWwgZmFzdCBpZiBhIGNmTmFtZSBoYXMgYmVlbiBwcm92aWRlZCwgYnV0\nIHdhcyBub3QgYXZhaWxhYmxlIGluIEpOREkKICAgICAgICAgICAgaWYgKGRz\nID09IG51bGwpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXhj\nZXB0aW9uKF9sb2MuZ2V0KCJpbnZhbGlkLWRhdGFzb3VyY2UiLCBjdHguZ2V0\nQ29ubmVjdGlvbkZhY3RvcnlOYW1lKCkpKS5zZXRGYXRhbCh0cnVlKTsKICAg\nICAgICAgICAgfQogICAgICAgICAgICBpZighIChkcyBpbnN0YW5jZW9mIERl\nY29yYXRpbmdEYXRhU291cmNlKSkgeyAKICAgICAgICAgICAgICAgIGRzID0g\nRGF0YVNvdXJjZUZhY3RvcnkuZGVjb3JhdGVEYXRhU291cmNlKGRzLCB0aGlz\nLCBmYWxzZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGxvZy5p\nc1RyYWNlRW5hYmxlZCgpKSB7CiAgICAgICAgICAgICAgICBsb2cudHJhY2Uo\nIkZvdW5kIGRhdGFzb3VyY2UxOiAiICsgZHMgKyAiIGZyb20gU3RvcmVDb250\nZXh0IHVzaW5nIGpuZGlOYW1lOiAiCiAgICAgICAgICAgICAgICAgICAgKyBj\ndHguZ2V0Q29ubmVjdGlvbkZhY3RvcnkyTmFtZSgpKTsKICAgICAgICAgICAg\nfQogICAgICAgICAgICByZXR1cm4gZHM7IAogICAgICAgIH0KICAgICAgICBl\nbHNlIHsKICAgICAgICAgICAgZHMgPSBnZXREYXRhU291cmNlKGN0eCwgKERh\ndGFTb3VyY2UpIGdldENvbm5lY3Rpb25GYWN0b3J5KCkpOwogICAgICAgICAg\nICBpZiAobG9nLmlzVHJhY2VFbmFibGVkKCkpIHsKICAgICAgICAgICAgICAg\nIGxvZy50cmFjZSgiRm91bmQgZGF0YXNvdXJjZTE6ICIgKyBkcyArICIgZnJv\nbSBjb25maWd1cmF0aW9uLiBTdG9yZUNvbnRleHQ6ICIgKyBjdHggKTsKICAg\nICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZHM7IAogICAgICAgIH0K\nICAgIH0KCiAgICBwdWJsaWMgRGF0YVNvdXJjZSBnZXREYXRhU291cmNlMihT\ndG9yZUNvbnRleHQgY3R4KSB7CiAgICAgICAgTG9nIGxvZyA9IGdldExvZyhM\nT0dfUlVOVElNRSk7CiAgICAgICAgRGF0YVNvdXJjZSBkcyA9IG51bGw7Cgog\nICAgICAgIC8vIFRyeSB0byBvYnRhaW4gZnJvbSB0aGUgU3RvcmVDb250ZXh0\nIGZpcnN0LgogICAgICAgIGlmIChjdHggIT0gbnVsbCAmJiBTdHJpbmdVdGls\ncy5pc05vdEVtcHR5KGN0eC5nZXRDb25uZWN0aW9uRmFjdG9yeTJOYW1lKCkp\nKSB7CiAgICAgICAgICAgIGRzID0gKERhdGFTb3VyY2UpIGN0eC5nZXRDb25u\nZWN0aW9uRmFjdG9yeTIoKTsKICAgICAgICAgICAgaWYgKGRzID09IG51bGwp\nIHsKICAgICAgICAgICAgICAgIC8vIGZhaWwgZmFzdC4gSWYgdGhlIG5vbi1q\ndGEtZGF0YS1zb3VyY2UgaXMgY29uZmlndXJlZCBvbiB0aGUgY29udGV4dCB3\nZSB3YW50IGFuIGltbWVkaWF0ZSBlcnJvci4gCiAgICAgICAgICAgICAgICB0\naHJvdyBuZXcgVXNlckV4Y2VwdGlvbihfbG9jLmdldCgiaW52YWxpZC1kYXRh\nc291cmNlIiwgY3R4LmdldENvbm5lY3Rpb25GYWN0b3J5Mk5hbWUoKSkpLnNl\ndEZhdGFsKHRydWUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKCEg\nKGRzIGluc3RhbmNlb2YgRGVjb3JhdGluZ0RhdGFTb3VyY2UpKSB7IAogICAg\nICAgICAgICAgICAgZHMgPSBEYXRhU291cmNlRmFjdG9yeS5kZWNvcmF0ZURh\ndGFTb3VyY2UoZHMsIHRoaXMsIGZhbHNlKTsKICAgICAgICAgICAgfQogICAg\nICAgICAgICBpZiAobG9nLmlzVHJhY2VFbmFibGVkKCkpIHsKICAgICAgICAg\nICAgICAgIGxvZy50cmFjZSgiRm91bmQgZGF0YXNvdXJjZTI6ICIgKyBkcyAr\nICIgZnJvbSBTdG9yZUNvbnRleHQgdXNpbmcgam5kaU5hbWU6ICIKICAgICAg\nICAgICAgICAgICAgICArIGN0eC5nZXRDb25uZWN0aW9uRmFjdG9yeTJOYW1l\nKCkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBkczsKICAg\nICAgICB9CgogICAgICAgIC8vIElmIG5vdCBzZXQgb24gY29udGV4dCBvciB2\nYWx1ZSBmcm9tIGNvbnRleHQgaXMgbm90IGF2YWlsYWJsZSB0cnkgY2YyIGZy\nb20gY29uZmlnCiAgICAgICAgZWxzZXsgCiAgICAgICAgICAgIGRzID0gKERh\ndGFTb3VyY2UpIGdldENvbm5lY3Rpb25GYWN0b3J5MigpOwogICAgICAgICAg\nICBpZiAobG9nLmlzVHJhY2VFbmFibGVkKCkpIHsKICAgICAgICAgICAgICAg\nIGxvZy50cmFjZSgiRm91bmQgZGF0YXNvdXJjZSAyOiAiKyBkcyArICIgZnJv\nbSBjb25maWcuIFN0b3JlQ29udGV4dDogIiArIGN0eCk7CiAgICAgICAgICAg\nIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8gZmFsbGJhY2sgdG8g\nY2YxIC8gZGF0YXNvdXJjZTEKICAgICAgICBpZiAoZHMgPT0gbnVsbCkgewog\nICAgICAgICAgICBpZihsb2cuaXNUcmFjZUVuYWJsZWQoKSkgeyAKICAgICAg\nICAgICAgICAgIGxvZy50cmFjZSgiVHJ5aW5nIGRhdGFzb3VyY2UxIik7CiAg\nICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGdldERhdGFTb3VyY2Uo\nY3R4KTsKICAgICAgICB9CgogICAgICAgIC8vIHByZWZlciB0aGUgZ2xvYmFs\nIGNvbm5lY3Rpb24gMiBhdXRoIGluZm8gaWYgZ2l2ZW4KICAgICAgICBTdHJp\nbmcgdXNlciA9IGdldENvbm5lY3Rpb24yVXNlck5hbWUoKTsKICAgICAgICBT\ndHJpbmcgcGFzcyA9IGdldENvbm5lY3Rpb24yUGFzc3dvcmQoKTsKICAgICAg\nICBpZiAodXNlciA9PSBudWxsICYmIHBhc3MgPT0gbnVsbCkgewogICAgICAg\nICAgICAvLyBubyBnbG9iYWwgYXV0aCBpbmZvOyB1c2UgdGhlIGNvbnRleHQg\naWYgZ2l2ZW4sIG9yIHRoZSBmaXJzdAogICAgICAgICAgICAvLyBjb250ZXh0\nIGlmIG5vdAogICAgICAgICAgICBpZiAoY3R4ID09IG51bGwpIHsKICAgICAg\nICAgICAgICAgIHVzZXIgPSBmaXJzdFVzZXI7CiAgICAgICAgICAgICAgICBw\nYXNzID0gZmlyc3RQYXNzOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAg\nICAgICAgICAgdXNlciA9IGN0eC5nZXRDb25uZWN0aW9uVXNlck5hbWUoKTsK\nICAgICAgICAgICAgICAgIHBhc3MgPSBjdHguZ2V0Q29ubmVjdGlvblBhc3N3\nb3JkKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJu\nIERhdGFTb3VyY2VGYWN0b3J5LmRlZmF1bHRzRGF0YVNvdXJjZShkcywgdXNl\nciwgcGFzcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGlzIHZlcnNpb24g\nYWxsb3dzIHVzIHRvIHBhc3MgaW4gd2hpY2ggZGF0YSBzb3VyY2UgdG8gd3Jh\ncCBpbnRlcm5hbGx5OwogICAgICogdXNlZnVsIGR1cmluZyBpbml0aWFsaXph\ndGlvbiBiZWZvcmUgdGhlIGNvbm5lY3Rpb24gZmFjdG9yeSBpcwogICAgICog\nY29tcGxldGVseSBjb25maWd1cmVkLgogICAgICovCiAgICBwcml2YXRlIERh\ndGFTb3VyY2UgZ2V0RGF0YVNvdXJjZShTdG9yZUNvbnRleHQgY3R4LCBEYXRh\nU291cmNlIGRzKSB7CiAgICAgICAgU3RyaW5nIHVzZXIsIHBhc3M7CiAgICAg\nICAgaWYgKGN0eCA9PSBudWxsKSB7CiAgICAgICAgICAgIC8vIGlmIG5vIGNv\nbnRleHQsIGRlZmF1bHQgdG8gdGhlIGdsb2JhbCBhdXRoIGluZm8sIG9yIHRo\nZSBhdXRoIGluZm8KICAgICAgICAgICAgLy8gb2YgdGhlIGZpcnN0IGNvbnRl\neHQgaWYgbm9uZQogICAgICAgICAgICB1c2VyID0gZ2V0Q29ubmVjdGlvblVz\nZXJOYW1lKCk7CiAgICAgICAgICAgIGlmICh1c2VyID09IG51bGwpCiAgICAg\nICAgICAgICAgICB1c2VyID0gZmlyc3RVc2VyOwogICAgICAgICAgICBwYXNz\nID0gZ2V0Q29ubmVjdGlvblBhc3N3b3JkKCk7CiAgICAgICAgICAgIGlmIChw\nYXNzID09IG51bGwpCiAgICAgICAgICAgICAgICBwYXNzID0gZmlyc3RQYXNz\nOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIHVzZSB0aGUgY29u\ndGV4dCdzIGF1dGggaW5mbwogICAgICAgICAgICB1c2VyID0gY3R4LmdldENv\nbm5lY3Rpb25Vc2VyTmFtZSgpOwogICAgICAgICAgICBwYXNzID0gY3R4Lmdl\ndENvbm5lY3Rpb25QYXNzd29yZCgpOwogICAgICAgIH0KICAgICAgICByZXR1\ncm4gRGF0YVNvdXJjZUZhY3RvcnkuZGVmYXVsdHNEYXRhU291cmNlKGRzLCB1\nc2VyLCBwYXNzKTsKICAgIH0KCiAgICAvKioKICAgICAqIEZyZWUgdGhlIGRh\ndGEgc291cmNlcy4KICAgICAqLwogICAgcHJvdGVjdGVkIHZvaWQgcHJlQ2xv\nc2UoKSB7CiAgICAgICAgaWYgKGRhdGFTb3VyY2UgIT0gbnVsbCkgewogICAg\nICAgICAgICBnZXREQkRpY3Rpb25hcnlJbnN0YW5jZSgpLmNsb3NlRGF0YVNv\ndXJjZShkYXRhU291cmNlKTsKICAgICAgICAgICAgY29ubmVjdGlvbkZhY3Rv\ncnkuc2V0KG51bGwsIHRydWUpOyAvLyBzbyBzdXBlciBkb2Vzbid0IGNsb3Nl\nIGl0CiAgICAgICAgfQogICAgICAgIGlmIChkYXRhU291cmNlMiAhPSBudWxs\nKSB7CiAgICAgICAgICAgIGdldERCRGljdGlvbmFyeUluc3RhbmNlKCkuY2xv\nc2VEYXRhU291cmNlKGRhdGFTb3VyY2UpOwogICAgICAgICAgICBjb25uZWN0\naW9uRmFjdG9yeTIuc2V0KG51bGwsIHRydWUpOyAvLyBzbyBzdXBlciBkb2Vz\nbid0IGNsb3NlIGl0CiAgICAgICAgfQogICAgICAgIHN1cGVyLnByZUNsb3Nl\nKCk7CiAgICB9CgogICAgcHJvdGVjdGVkIGJvb2xlYW4gaXNJbnZhbGlkUHJv\ncGVydHkoU3RyaW5nIHByb3BOYW1lKSB7CiAgICAgICAgaWYgKHN1cGVyLmlz\nSW52YWxpZFByb3BlcnR5KHByb3BOYW1lKSkKICAgICAgICAgICAgcmV0dXJu\nIHRydWU7CgogICAgICAgIC8vIGhhbmRsZSBvcGVuanBhLmpkYmMuU29tZU1p\nc3NwZWxsZWRQcm9wZXJ0eSwgYnV0IG5vdAogICAgICAgIC8vIG9wZW5qcGEu\nc29tZW90aGVyaW1wbGVtZW50YXRpb24uU29tZVByb3BlcnR5CiAgICAgICAg\nU3RyaW5nW10gcHJlZml4ZXMgPSBQcm9kdWN0RGVyaXZhdGlvbnMuZ2V0Q29u\nZmlndXJhdGlvblByZWZpeGVzKCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7\nIGkgPCBwcmVmaXhlcy5sZW5ndGg7IGkrKykKICAgICAgICAgICAgaWYgKHBy\nb3BOYW1lLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChwcmVmaXhlc1tpXSAr\nICIuamRiYyIpKQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7IAogICAg\nICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIAogICAgcHVibGljIFN0cmlu\nZyBnZXRJZGVudGlmaWVyVXRpbCgpIHsKICAgICAgICByZXR1cm4gaWRlbnRp\nZmllclV0aWxQbHVnaW4uZ2V0U3RyaW5nKCk7CiAgICB9CgogICAgcHVibGlj\nIERCSWRlbnRpZmllclV0aWwgZ2V0SWRlbnRpZmllclV0aWxJbnN0YW5jZSgp\nIHsKICAgICAgICBpZiAoaWRlbnRpZmllclV0aWxQbHVnaW4uZ2V0KCkgPT0g\nbnVsbCkKICAgICAgICAgICAgaWRlbnRpZmllclV0aWxQbHVnaW4uaW5zdGFu\ndGlhdGUoREJJZGVudGlmaWVyVXRpbC5jbGFzcywgdGhpcyk7CiAgICAgICAg\ncmV0dXJuIChEQklkZW50aWZpZXJVdGlsKSBpZGVudGlmaWVyVXRpbFBsdWdp\nbi5nZXQoKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRJZGVudGlmaWVy\nVXRpbChEQklkZW50aWZpZXJVdGlsIHV0aWwpIHsKICAgICAgICBpZGVudGlm\naWVyVXRpbFBsdWdpbi5zZXQodXRpbCk7CiAgICB9Cgp9Cg==\n","encoding":"base64"}

