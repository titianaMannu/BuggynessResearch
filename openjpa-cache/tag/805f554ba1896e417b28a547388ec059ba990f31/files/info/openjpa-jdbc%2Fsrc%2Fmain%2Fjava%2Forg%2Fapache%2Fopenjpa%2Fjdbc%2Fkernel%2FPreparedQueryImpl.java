{"sha":"51ce99f9fb8ed45e3673e60055022c75620f38c9","node_id":"MDQ6QmxvYjIwNjM2NDo1MWNlOTlmOWZiOGVkNDVlMzY3M2U2MDA1NTAyMmM3NTYyMGYzOGM5","size":16741,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/51ce99f9fb8ed45e3673e60055022c75620f38c9","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\nCnBhY2thZ2Ugb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMua2VybmVsOwoKaW1w\nb3J0IGphdmEudXRpbC5BcnJheXM7CmltcG9ydCBqYXZhLnV0aWwuQ29sbGVj\ndGlvbjsKaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsKaW1wb3J0IGph\ndmEudXRpbC5IYXNoTWFwOwppbXBvcnQgamF2YS51dGlsLkxpc3Q7CmltcG9y\ndCBqYXZhLnV0aWwuTWFwOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5q\nZGJjLm1ldGEuQ2xhc3NNYXBwaW5nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmpkYmMubWV0YS5GaWVsZE1hcHBpbmc7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEuamRiYy5tZXRhLk1hcHBpbmdSZXBvc2l0b3J5OwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLkNvbHVtbjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5Mb2dpY2FsVW5pb247Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuU1FMQnVmZmVyOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNlbGVjdEV4ZWN1\ndG9yOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNlbGVj\ndEltcGw7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuVW5p\nb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLkJyb2tlcjsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuUHJlcGFyZWRRdWVy\neTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuUXVlcnk7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlF1ZXJ5SW1wbDsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuUXVlcnlMYW5ndWFnZXM7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlN0b3JlUXVlcnk7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlByZXBhcmVkUXVl\ncnlDYWNoZS5FeGNsdXNpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\na2VybmVsLmV4cHMuUGFyYW1ldGVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmtlcm5lbC5leHBzLlF1ZXJ5RXhwcmVzc2lvbnM7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEubGliLnJvcC5SYW5nZVJlc3VsdE9iamVjdFByb3Zp\nZGVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5yb3AuUmVzdWx0\nTGlzdDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5Mb2Nh\nbGl6ZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5GaWVsZE1l\ndGFEYXRhOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuSW1wbEhl\nbHBlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLkludGVybmFs\nRXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuVXNl\nckV4Y2VwdGlvbjsKCi8qKgogKiBJbXBsZW1lbnRzIHtAbGluayBQcmVwYXJl\nZFF1ZXJ5fSBmb3IgU1FMIHF1ZXJpZXMuCiAqIFByZXBhcmVkUXVlcnkgaG9s\nZHMgdGhlIHBvc3QtY29tcGlsYXRpb24gYW5kIHBvc3QtZXhlY3V0aW9uIHN0\nYXRlIG9mIGEga2VybmVsIFF1ZXJ5LgogKiBUaGUgcG9zdC1leGVjdXRpb24g\naW50ZXJuYWwgc3RhdGUgb2YgYSBxdWVyeSBpcyBhcHBlbmRlZCBhcyBhIDxl\nbT51c2VyIG9iamVjdDwvZW0+CiAqIHRvIHRoZSB1c2VyLXZpc2libGUgcmVz\ndWx0IHRvIG1haW50YWluIHRoZSBBUEkgY29udHJhY3QuIAogKiAKICogQGF1\ndGhvciBQaW5ha2kgUG9kZGFyCiAqCiAqLwpwdWJsaWMgY2xhc3MgUHJlcGFy\nZWRRdWVyeUltcGwgaW1wbGVtZW50cyBQcmVwYXJlZFF1ZXJ5IHsKICAgIHBy\naXZhdGUgc3RhdGljIExvY2FsaXplciBfbG9jID0gCiAgICAgICAgTG9jYWxp\nemVyLmZvclBhY2thZ2UoUHJlcGFyZWRRdWVyeUltcGwuY2xhc3MpOwoKICAg\nIHByaXZhdGUgZmluYWwgU3RyaW5nIF9pZDsKICAgIHByaXZhdGUgU3RyaW5n\nIF9zcWw7CiAgICBwcml2YXRlIGJvb2xlYW4gX2luaXRpYWxpemVkOwogICAg\nCiAgICAvLyBQb3N0LWNvbXBpbGF0aW9uIHN0YXRlIG9mIGFuIGV4ZWN1dGFi\nbGUgcXVlcnksIHBvcHVsYXRlZCBvbiBjb25zdHJ1Y3Rpb24KICAgIHByaXZh\ndGUgQ2xhc3M8Pz4gX2NhbmRpZGF0ZTsKICAgIHByaXZhdGUgYm9vbGVhbiBf\nc3ViY2xhc3NlczsKICAgIAogICAgLy8gcG9zdC1leGVjdXRpb24gc3RhdGUg\nb2YgYSBxdWVyeQogICAgcHJpdmF0ZSBRdWVyeUV4cHJlc3Npb25zW10gX2V4\ncHM7CiAgICBwcml2YXRlIENsYXNzPD8+W10gX3Byb2pUeXBlczsKCiAgICAv\nLyBQb3NpdGlvbiBvZiB0aGUgdXNlciBkZWZpbmVkIHBhcmFtZXRlcnMgaW4g\ndGhlIF9wYXJhbXMgbGlzdAogICAgcHJpdmF0ZSBNYXA8T2JqZWN0LCBpbnRb\nXT4gICAgX3VzZXJQYXJhbVBvc2l0aW9uczsKICAgIHByaXZhdGUgTWFwPElu\ndGVnZXIsIE9iamVjdD4gX3RlbXBsYXRlOwogICAgcHJpdmF0ZSBTZWxlY3RJ\nbXBsIHNlbGVjdDsKCiAgICAvKioKICAgICAqIENvbnN0cnVjdC4KICAgICAq\nIAogICAgICogQHBhcmFtIGlkIGFuIGlkZW50aWZpZXIgZm9yIHRoaXMgcXVl\ncnkgdG8gYmUgdXNlZCBhcyBjYWNoZSBrZXkKICAgICAqIEBwYXJhbSBjb21w\naWxlZCBhIGNvbXBpbGVkIHF1ZXJ5IAogICAgICovCiAgICBwdWJsaWMgUHJl\ncGFyZWRRdWVyeUltcGwoU3RyaW5nIGlkLCBRdWVyeSBjb21waWxlZCkgewog\nICAgICAgIHRoaXMoaWQsIG51bGwsIGNvbXBpbGVkKTsKICAgIH0KICAgIAog\nICAgLyoqCiAgICAgKiBDb25zdHJ1Y3QuCiAgICAgKiAKICAgICAqIEBwYXJh\nbSBpZCBhbiBpZGVudGlmaWVyIGZvciB0aGlzIHF1ZXJ5IHRvIGJlIHVzZWQg\nYXMgY2FjaGUga2V5CiAgICAgKiBAcGFyYW0gY29ycmVzcG9uZGluZyBkYXRh\nIHN0b3JlIGxhbmd1YWdlIHF1ZXJ5IHN0cmluZyAKICAgICAqIEBwYXJhbSBj\nb21waWxlZCBhIGNvbXBpbGVkIHF1ZXJ5IAogICAgICovCiAgICBwdWJsaWMg\nUHJlcGFyZWRRdWVyeUltcGwoU3RyaW5nIGlkLCBTdHJpbmcgc3FsLCBRdWVy\neSBjb21waWxlZCkgewogICAgICAgIHRoaXMuX2lkID0gaWQ7CiAgICAgICAg\ndGhpcy5fc3FsID0gc3FsOwogICAgICAgIGlmIChjb21waWxlZCAhPSBudWxs\nKSB7CiAgICAgICAgICAgIF9jYW5kaWRhdGUgICAgPSBjb21waWxlZC5nZXRD\nYW5kaWRhdGVUeXBlKCk7CiAgICAgICAgICAgIF9zdWJjbGFzc2VzICAgPSBj\nb21waWxlZC5oYXNTdWJjbGFzc2VzKCk7CiAgICAgICAgfQogICAgfQogICAg\nCiAgICBwdWJsaWMgU3RyaW5nIGdldElkZW50aWZpZXIoKSB7CiAgICAgICAg\ncmV0dXJuIF9pZDsKICAgIH0KICAgIAogICAgcHVibGljIFN0cmluZyBnZXRM\nYW5ndWFnZSgpIHsKICAgICAgICByZXR1cm4gUXVlcnlMYW5ndWFnZXMuTEFO\nR19QUkVQQVJFRF9TUUw7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogR2V0\nIHRoZSBvcmlnaW5hbCBxdWVyeSBzdHJpbmcgd2hpY2ggaXMgc2FtZSBhcyB0\naGUgaWRlbnRpZmllciBvZiB0aGlzIAogICAgICogcmVjZWl2ZXIuCiAgICAg\nKi8KICAgIHB1YmxpYyBTdHJpbmcgZ2V0T3JpZ2luYWxRdWVyeSgpIHsKICAg\nICAgICByZXR1cm4gZ2V0SWRlbnRpZmllcigpOwogICAgfQogICAgCiAgICBw\ndWJsaWMgU3RyaW5nIGdldFRhcmdldFF1ZXJ5KCkgewogICAgICAgIHJldHVy\nbiBfc3FsOwogICAgfQogICAgCiAgICB2b2lkIHNldFRhcmdldFF1ZXJ5KFN0\ncmluZyBzcWwpIHsKICAgICAgICBfc3FsID0gc3FsOwogICAgfQogICAgCiAg\nICBwdWJsaWMgYm9vbGVhbiBpc0luaXRpYWxpemVkKCkgewogICAgICAgIHJl\ndHVybiBfaW5pdGlhbGl6ZWQ7CiAgICB9CiAgICAKICAgIHB1YmxpYyBRdWVy\neUV4cHJlc3Npb25zW10gZ2V0UXVlcnlFeHByZXNzaW9ucygpIHsKICAgICAg\nICByZXR1cm4gX2V4cHM7CiAgICB9CiAgICAKICAgIHB1YmxpYyBDbGFzc1td\nIGdldFByb2plY3Rpb25UeXBlcygpIHsKICAgICAgICByZXR1cm4gX3Byb2pU\neXBlczsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBQb3VycyB0aGUgcG9z\ndC1jb21waWxhdGlvbiBzdGF0ZSBoZWxkIGJ5IHRoaXMgcmVjZWl2ZXIgdG8g\ndGhlIGdpdmVuCiAgICAgKiBxdWVyeS4KICAgICAqLwogICAgcHVibGljIHZv\naWQgc2V0SW50byhRdWVyeSBxKSB7CiAgICAJcS5zZXRRdWVyeShfaWQpOwog\nICAgICAgIHEuc2V0Q2FuZGlkYXRlVHlwZShfY2FuZGlkYXRlLCBfc3ViY2xh\nc3Nlcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBJbml0aWFsaXplIHRoaXMg\ncmVjZWl2ZXIgd2l0aCBwb3N0LWV4ZWN1dGlvbiByZXN1bHQuCiAgICAgKiBU\naGUgaW5wdXQgYXJndW1lbnQgaXMgcHJvY2Vzc2VkIG9ubHkgaWYgaXQgaXMg\nYSB7QGxpbmsgUmVzdWx0TGlzdH0gd2l0aAogICAgICogYW4gYXR0YWNoZWQg\ne0BsaW5rIFNlbGVjdFJlc3VsdE9iamVjdFByb3ZpZGVyfSBhcyBpdHMKICAg\nICAqIHtAbGluayBSZXN1bHRMaXN0I2dldFVzZXJPYmplY3QoKSB1c2VyIG9i\namVjdH0uIAogICAgICogCiAgICAgKiBAcmV0dXJuIGFuIGV4Y2x1c2lvbiBp\nZiBjYW4gbm90IGJlIGluaXRpYWxpemVkIGZvciBzb21lIHJlYXNvbi4gCiAg\nICAgKiBudWxsIGlmIGluaXRpYWxpemF0aW9uIGlzIHN1Y2Nlc3NmdWwuIAog\nICAgICovCiAgICBwdWJsaWMgRXhjbHVzaW9uIGluaXRpYWxpemUoT2JqZWN0\nIHJlc3VsdCkgewogICAgICAgIGlmIChpc0luaXRpYWxpemVkKCkpCiAgICAg\nICAgICAgIHJldHVybiBudWxsOwogICAgICAgIE9iamVjdFtdIGV4dHJhY3Qg\nPSBleHRyYWN0U2VsZWN0RXhlY3V0b3IocmVzdWx0KTsKICAgICAgICBTZWxl\nY3RFeGVjdXRvciBzZWxlY3RvciA9IChTZWxlY3RFeGVjdXRvcilleHRyYWN0\nWzBdOwogICAgICAgIGlmIChzZWxlY3RvciA9PSBudWxsKQogICAgICAgICAg\nICByZXR1cm4gbmV3IFByZXBhcmVkUXVlcnlDYWNoZUltcGwuU3Ryb25nRXhj\nbHVzaW9uKF9pZCwgKChMb2NhbGl6ZXIuTWVzc2FnZSlleHRyYWN0WzFdKS5n\nZXRNZXNzYWdlKCkpOwogICAgICAgIGlmIChzZWxlY3RvciA9PSBudWxsIHx8\nIHNlbGVjdG9yLmhhc011bHRpcGxlU2VsZWN0cygpCiAgICAgICAgICAgIHx8\nICgoc2VsZWN0b3IgaW5zdGFuY2VvZiBVbmlvbikgCiAgICAgICAgICAgICYm\nICgoKFVuaW9uKXNlbGVjdG9yKS5nZXRTZWxlY3RzKCkubGVuZ3RoICE9IDEp\nKSkKICAgICAgICAgICAgcmV0dXJuIG5ldyBQcmVwYXJlZFF1ZXJ5Q2FjaGVJ\nbXBsLlN0cm9uZ0V4Y2x1c2lvbihfaWQsIF9sb2MuZ2V0KCJleGNsdWRlLW11\nbHRpLXNlbGVjdCIsIF9pZCkuZ2V0TWVzc2FnZSgpKTsKICAgICAgICBzZWxl\nY3QgPSBleHRyYWN0SW1wbGVtZW50YXRpb24oc2VsZWN0b3IpOwogICAgICAg\nIGlmIChzZWxlY3QgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIG5ldyBQ\ncmVwYXJlZFF1ZXJ5Q2FjaGVJbXBsLlN0cm9uZ0V4Y2x1c2lvbihfaWQsIF9s\nb2MuZ2V0KCJleGNsdWRlLW5vLXNlbGVjdCIsIF9pZCkuZ2V0TWVzc2FnZSgp\nKTsKICAgICAgICBTUUxCdWZmZXIgYnVmZmVyID0gc2VsZWN0b3IuZ2V0U1FM\nKCk7CiAgICAgICAgaWYgKGJ1ZmZlciA9PSBudWxsKQogICAgICAgICAgICBy\nZXR1cm4gbmV3IFByZXBhcmVkUXVlcnlDYWNoZUltcGwuU3Ryb25nRXhjbHVz\naW9uKF9pZCwgX2xvYy5nZXQoImV4Y2x1ZGUtbm8tc3FsIiwgX2lkKS5nZXRN\nZXNzYWdlKCkpOzsKICAgICAgICBpZiAoaXNVc2luZ0ZpZWxkU3RyYXRlZ3ko\nKSkKICAgICAgICAgICAgcmV0dXJuIG5ldyBQcmVwYXJlZFF1ZXJ5Q2FjaGVJ\nbXBsLlN0cm9uZ0V4Y2x1c2lvbihfaWQsIAogICAgICAgICAgICAgICAgX2xv\nYy5nZXQoImV4Y2x1ZGUtdXNlci1zdHJhdGVneSIsIF9pZCkuZ2V0TWVzc2Fn\nZSgpKTs7CiAgICAgICAgICAgICAgICAKICAgICAgICBpZiAoaXNQYWdpbmF0\nZWQoKSkKICAgICAgICAgICAgcmV0dXJuIG5ldyBQcmVwYXJlZFF1ZXJ5Q2Fj\naGVJbXBsLlN0cm9uZ0V4Y2x1c2lvbihfaWQsIAogICAgICAgICAgICAgICAg\nX2xvYy5nZXQoImV4Y2x1ZGUtcGFnaW5hdGlvbiIsIF9pZCkuZ2V0TWVzc2Fn\nZSgpKTs7CgogICAgICAgIHNldFRhcmdldFF1ZXJ5KGJ1ZmZlci5nZXRTUUwo\nKSk7CiAgICAgICAgc2V0UGFyYW1ldGVycyhidWZmZXIuZ2V0UGFyYW1ldGVy\ncygpKTsKICAgICAgICBzZXRVc2VyUGFyYW1ldGVyUG9zaXRpb25zKGJ1ZmZl\nci5nZXRVc2VyUGFyYW1ldGVycygpKTsKICAgICAgICBfaW5pdGlhbGl6ZWQg\nPSB0cnVlOwogICAgICAgIAogICAgICAgIHJldHVybiBudWxsOwogICAgfQog\nICAgCiAgICAvKioKICAgICAqIEV4dHJhY3QgdGhlIHVuZGVybHlpbmcgU2Vs\nZWN0RXhlY3V0b3IgZnJvbSB0aGUgZ2l2ZW4gYXJndW1lbnQsIGlmIHBvc3Np\nYmxlLgogICAgICogCiAgICAgKiBAcmV0dXJuIHR3byBvYmplY3RzIGluIGFu\nIGFycmF5LiBUaGUgZWxlbWVudCBhdCBpbmRleCAwIGlzIFNlbGVjdEV4ZWN1\ndG9yLCAKICAgICAqIGlmIGl0IGNhbiBiZSBleHRyYWN0ZWQuIFRoZSBlbGVt\nZW50IGF0IGluZGV4IDEgaXMgdGhlIHJlYXNvbiB3aHkgaXQgY2FuCiAgICAg\nKiBub3QgYmUgZXh0cmFjdGVkLgogICAgICovCiAgICBwcml2YXRlIE9iamVj\ndFtdIGV4dHJhY3RTZWxlY3RFeGVjdXRvcihPYmplY3QgcmVzdWx0KSB7CiAg\nICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFJlc3VsdExpc3QgPT0gZmFs\nc2UpCiAgICAgICAgICAgIHJldHVybiBuZXcgT2JqZWN0W117bnVsbCwgX2xv\nYy5nZXQoImV4Y2x1ZGUtbm90LXJlc3VsdCIsIF9pZCl9OwogICAgICAgIE9i\namVjdCB1c2VyT2JqZWN0ID0gKChSZXN1bHRMaXN0PD8+KXJlc3VsdCkuZ2V0\nVXNlck9iamVjdCgpOwogICAgICAgIGlmICh1c2VyT2JqZWN0ID09IG51bGwg\nfHwgIXVzZXJPYmplY3QuZ2V0Q2xhc3MoKS5pc0FycmF5KCkgfHwgKChPYmpl\nY3RbXSl1c2VyT2JqZWN0KS5sZW5ndGggIT0gMikKICAgICAgICAgICAgcmV0\ndXJuIG5ldyBPYmplY3RbXXtudWxsLCBfbG9jLmdldCgiZXhjbHVkZS1uby11\nc2VyLW9iamVjdCIsIF9pZCl9OwogICAgICAgIE9iamVjdCBwcm92aWRlciA9\nICgoT2JqZWN0W10pdXNlck9iamVjdClbMF07CiAgICAgICAgT2JqZWN0IGV4\nZWN1dG9yID0gKChPYmplY3RbXSl1c2VyT2JqZWN0KVsxXTsKICAgICAgICBp\nZiAoZXhlY3V0b3IgaW5zdGFuY2VvZiBTdG9yZVF1ZXJ5LkV4ZWN1dG9yID09\nIGZhbHNlKQogICAgICAgICAgICByZXR1cm4gbmV3IE9iamVjdFtde251bGws\nIF9sb2MuZ2V0KCJleGNsdWRlLW5vdC1leGVjdXRvciIsIF9pZCl9OwogICAg\nICAgIF9leHBzID0gKChTdG9yZVF1ZXJ5LkV4ZWN1dG9yKWV4ZWN1dG9yKS5n\nZXRRdWVyeUV4cHJlc3Npb25zKCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7\nIGkgPCBfZXhwcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAoaXNV\nc2luZ0V4dGVybmFsaXplZFBhcmFtZXRlcihfZXhwc1tpXSkpIHsKICAgICAg\nICAgICAgICAgIHJldHVybiBuZXcgT2JqZWN0W117bnVsbCwgX2xvYy5nZXQo\nImV4Y2x1ZGUtZXh0ZXJuYWxpemVkLXBhcmFtIiwgX2lkKX07CiAgICAgICAg\nICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKF9leHBzWzBdLnByb2plY3Rp\nb25zLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgIF9wcm9qVHlwZXMgPSBT\ndG9yZVF1ZXJ5LkVNUFRZX0NMQVNTRVM7CiAgICAgICAgfSBlbHNlIHsKICAg\nICAgICAgICAgX3Byb2pUeXBlcyA9IG5ldyBDbGFzc1tfZXhwc1swXS5wcm9q\nZWN0aW9ucy5sZW5ndGhdOwogICAgICAgICAgICBmb3IgKGludCBpID0gMDsg\naSA8IF9leHBzWzBdLnByb2plY3Rpb25zLmxlbmd0aDsgaSsrKSB7CiAgICAg\nICAgICAgICAgICBfcHJvalR5cGVzW2ldID0gX2V4cHNbMF0ucHJvamVjdGlv\nbnNbaV0uZ2V0VHlwZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAg\nICAgIGlmIChwcm92aWRlciBpbnN0YW5jZW9mIFF1ZXJ5SW1wbC5QYWNraW5n\nUmVzdWx0T2JqZWN0UHJvdmlkZXIpIHsKICAgICAgICAgICAgcHJvdmlkZXIg\nPSAoKFF1ZXJ5SW1wbC5QYWNraW5nUmVzdWx0T2JqZWN0UHJvdmlkZXIpcHJv\ndmlkZXIpLmdldERlbGVnYXRlKCk7CiAgICAgICAgfQogICAgICAgIGlmIChw\ncm92aWRlciBpbnN0YW5jZW9mIFJhbmdlUmVzdWx0T2JqZWN0UHJvdmlkZXIp\nIHsKICAgICAgICAgICAgcHJvdmlkZXIgPSAoKFJhbmdlUmVzdWx0T2JqZWN0\nUHJvdmlkZXIpcHJvdmlkZXIpLmdldERlbGVnYXRlKCk7CiAgICAgICAgfQog\nICAgICAgIGlmIChwcm92aWRlciBpbnN0YW5jZW9mIFNlbGVjdFJlc3VsdE9i\namVjdFByb3ZpZGVyKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgT2JqZWN0\nW117KChTZWxlY3RSZXN1bHRPYmplY3RQcm92aWRlcilwcm92aWRlcikuZ2V0\nU2VsZWN0KCksIG51bGx9OwogICAgICAgIH0gCiAgICAgICAgcmV0dXJuIG5l\ndyBPYmplY3RbXXtudWxsLCBfbG9jLmdldCgiZXhjbHVkZS1ub3Qtc2VsZWN0\nLXJvcCIsIF9pZCwgcHJvdmlkZXIuZ2V0Q2xhc3MoKS5nZXROYW1lKCkpfTsK\nICAgIH0KICAgIAogICAgcHJpdmF0ZSBTZWxlY3RJbXBsIGV4dHJhY3RJbXBs\nZW1lbnRhdGlvbihTZWxlY3RFeGVjdXRvciBzZWxlY3RvcikgewogICAgICAg\nIGlmIChzZWxlY3RvciA9PSBudWxsKQogICAgICAgICAgICByZXR1cm4gbnVs\nbDsKICAgICAgICBpZiAoc2VsZWN0b3IgaW5zdGFuY2VvZiBTZWxlY3RJbXBs\nKSAKICAgICAgICAgICAgcmV0dXJuIChTZWxlY3RJbXBsKXNlbGVjdG9yOwog\nICAgICAgIGlmIChzZWxlY3RvciBpbnN0YW5jZW9mIExvZ2ljYWxVbmlvbi5V\nbmlvblNlbGVjdCkKICAgICAgICAgICAgcmV0dXJuICgoTG9naWNhbFVuaW9u\nLlVuaW9uU2VsZWN0KXNlbGVjdG9yKS5nZXREZWxlZ2F0ZSgpOwogICAgICAg\nIGlmIChzZWxlY3RvciBpbnN0YW5jZW9mIFVuaW9uKSAKICAgICAgICAgICAg\ncmV0dXJuIGV4dHJhY3RJbXBsZW1lbnRhdGlvbigoKFVuaW9uKXNlbGVjdG9y\nKS5nZXRTZWxlY3RzKClbMF0pOwogICAgICAgIAogICAgICAgIHJldHVybiBu\ndWxsOwogICAgfQogICAgCiAgICBwcml2YXRlIGJvb2xlYW4gaXNVc2luZ0V4\ndGVybmFsaXplZFBhcmFtZXRlcihRdWVyeUV4cHJlc3Npb25zIGV4cCkgewog\nICAgICAgIGlmIChleHAgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIGZh\nbHNlOwogICAgICAgIExpc3Q8RmllbGRNZXRhRGF0YT4gZm1kcyA9IGV4cC5n\nZXRQYXJhbWV0ZXJpemVkRmllbGRzKCk7CiAgICAgICAgaWYgKGZtZHMgPT0g\nbnVsbCB8fCBmbWRzLmlzRW1wdHkoKSkKICAgICAgICAgICAgcmV0dXJuIGZh\nbHNlOwogICAgICAgIGZvciAoRmllbGRNZXRhRGF0YSBmbWQgOiBmbWRzKSB7\nCiAgICAgICAgICAgIGlmIChmbWQuaXNFeHRlcm5hbGl6ZWQoKSkKICAgICAg\nICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICByZXR1\ncm4gZmFsc2U7CiAgICB9CiAgICAKICAgIHByaXZhdGUgYm9vbGVhbiBpc1Bh\nZ2luYXRlZCgpIHsKICAgICAgICBpZiAoc2VsZWN0IGluc3RhbmNlb2YgU2Vs\nZWN0SW1wbCkgewogICAgICAgICAgICBpZiAoKChTZWxlY3RJbXBsKXNlbGVj\ndCkuZ2V0U3RhcnRJbmRleCgpICE9IDAgfHwgCiAgICAgICAgICAgICAgICAo\nKFNlbGVjdEltcGwpc2VsZWN0KS5nZXRFbmRJbmRleCgpICE9IExvbmcuTUFY\nX1ZBTFVFKQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAg\nfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0gICAgICAgIAogICAgcHJp\ndmF0ZSBib29sZWFuIGlzVXNpbmdGaWVsZFN0cmF0ZWd5KCkgewogICAgICAg\nIGZvciAoaW50IGkgPSAwOyBpIDwgX2V4cHMubGVuZ3RoOyBpKyspIHsKICAg\nICAgICAgICAgaWYgKGlzVXNpbmdGaWVsZFN0cmF0ZWd5KF9leHBzW2ldKSkg\newogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0K\nICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHBy\naXZhdGUgYm9vbGVhbiBpc1VzaW5nRmllbGRTdHJhdGVneShRdWVyeUV4cHJl\nc3Npb25zIGV4cCkgewogICAgICAgIGlmIChleHAgPT0gbnVsbCkKICAgICAg\nICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIExpc3Q8RmllbGRNZXRhRGF0\nYT4gZm1kcyA9IGV4cC5nZXRQYXJhbWV0ZXJpemVkRmllbGRzKCk7CiAgICAg\nICAgaWYgKGZtZHMgPT0gbnVsbCB8fCBmbWRzLmlzRW1wdHkoKSkKICAgICAg\nICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIGZvciAoRmllbGRNZXRhRGF0\nYSBmbWQgOiBmbWRzKSB7CiAgICAgICAgICAgIGlmICgoKEZpZWxkTWFwcGlu\nZylmbWQpLmdldE1hcHBpbmdJbmZvKCkuZ2V0U3RyYXRlZ3koKSAhPSBudWxs\nKQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAg\nICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBN\nZXJnZSB0aGUgZ2l2ZW4gdXNlciBwYXJhbWV0ZXJzIHdpdGggaXRzIG93biBw\nYXJhbWV0ZXIuIFRoZSBnaXZlbiBtYXAKICAgICAqIG11c3QgYmUgY29tcGF0\naWJsZSB3aXRoIHRoZSB1c2VyIHBhcmFtZXRlcnMgZXh0cmFjdGVkIGR1cmlu\nZyAKICAgICAqIHtAbGluayAjaW5pdGlhbGl6ZShPYmplY3QpIGluaXRpYWxp\nemF0aW9ufS4gCiAgICAgKiAKICAgICAqIEByZXR1cm4gMC1iYXNlZCBwYXJh\nbWV0ZXIgaW5kZXggbWFwcGVkIHRvIGNvcnJlc3BvbmRpbmcgdmFsdWVzLgog\nICAgICogCiAgICAgKi8KICAgIHB1YmxpYyBNYXA8SW50ZWdlciwgT2JqZWN0\nPiByZXBhcmFtZXRyaXplKE1hcCB1c2VyLCBCcm9rZXIgYnJva2VyKSB7CiAg\nICAgICAgaWYgKCFpc0luaXRpYWxpemVkKCkpCiAgICAgICAgICAgIHRocm93\nIG5ldyBJbnRlcm5hbEV4Y2VwdGlvbigicmVwYXJhbWV0ZXJpemUoKSBvbiB1\nbmluaXRpYWxpemVkLiIpOwogICAgICAgIGlmICh1c2VyID09IG51bGwgfHwg\ndXNlci5pc0VtcHR5KCkpIHsKICAgICAgICAgICAgaWYgKCFfdXNlclBhcmFt\nUG9zaXRpb25zLmlzRW1wdHkoKSkgewogICAgICAgICAgICAgICAgdGhyb3cg\nbmV3IFVzZXJFeGNlcHRpb24oX2xvYy5nZXQoInVwYXJhbS1udWxsIiwgCiAg\nICAgICAgICAgICAgICAgICAgX3VzZXJQYXJhbVBvc2l0aW9ucy5rZXlTZXQo\nKSwgdGhpcykpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAg\nICAgcmV0dXJuIF90ZW1wbGF0ZTsKICAgICAgICAgICAgfQogICAgICAgIH0K\nICAgICAgICBpZiAoIV91c2VyUGFyYW1Qb3NpdGlvbnMua2V5U2V0KCkuZXF1\nYWxzKHVzZXIua2V5U2V0KCkpKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBV\nc2VyRXhjZXB0aW9uKF9sb2MuZ2V0KCJ1cGFyYW0tbWlzbWF0Y2giLCAKICAg\nICAgICAgICAgICAgIF91c2VyUGFyYW1Qb3NpdGlvbnMua2V5U2V0KCksIHVz\nZXIua2V5U2V0KCksIHRoaXMpKTsKICAgICAgICB9CiAgICAgICAgTWFwPElu\ndGVnZXIsIE9iamVjdD4gcmVzdWx0ID0gbmV3IEhhc2hNYXA8SW50ZWdlciwg\nT2JqZWN0PihfdGVtcGxhdGUpOwogICAgICAgIAogICAgICAgIGZvciAoT2Jq\nZWN0IGtleSA6IHVzZXIua2V5U2V0KCkpIHsKICAgICAgICAgICAgaW50W10g\naW5kaWNlcyA9IF91c2VyUGFyYW1Qb3NpdGlvbnMuZ2V0KGtleSk7CiAgICAg\nICAgICAgIGlmIChpbmRpY2VzID09IG51bGwgfHwgaW5kaWNlcy5sZW5ndGgg\nPT0gMCkKICAgICAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXhjZXB0aW9u\nKF9sb2MuZ2V0KCJ1cGFyYW0tbm8tcG9zIiwga2V5LCB0aGlzKSk7CiAgICAg\nICAgICAgIE9iamVjdCB2YWwgPSB1c2VyLmdldChrZXkpOwogICAgICAgICAg\nICBpZiAoSW1wbEhlbHBlci5pc01hbmFnZWFibGUodmFsKSkgewogICAgICAg\nICAgICAgICAgc2V0UGVyc2lzdGVuY2VDYXBhYmxlUGFyYW1ldGVyKHJlc3Vs\ndCwgdmFsLCBpbmRpY2VzLCBicm9rZXIpOwogICAgICAgICAgICB9IGVsc2Ug\naWYgKHZhbCBpbnN0YW5jZW9mIENvbGxlY3Rpb24pIHsKICAgICAgICAgICAg\nICAgIHNldENvbGxlY3Rpb25WYWx1ZWRQYXJhbWV0ZXIocmVzdWx0LCAoQ29s\nbGVjdGlvbil2YWwsIGluZGljZXMsIAogICAgICAgICAgICAgICAgICAgIGtl\neSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBmb3Ig\nKGludCBqIDogaW5kaWNlcykgewogICAgICAgICAgICAgICAgICAgIGlmICh2\nYWwgaW5zdGFuY2VvZiBFbnVtKSB7CiAgICAgICAgICAgICAgICAgICAgICAg\nIGlmIChfdGVtcGxhdGUuZ2V0KGopIGluc3RhbmNlb2YgSW50ZWdlcikgewog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsID0gKChFbnVtKXZhbCku\nb3JkaW5hbCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugewog\nICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsID0gKChFbnVtKXZhbCku\nbmFtZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAg\nICAgICAgICAgfSAKICAgICAgICAgICAgICAgICAgICByZXN1bHQucHV0KGos\nIHZhbCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAg\nICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIAogICAgLyoq\nCiAgICAgKiBDYWxjdWxhdGUgcHJpbWFyeSBrZXkgaWRlbnRpdHkgdmFsdWUo\ncykgb2YgdGhlIGdpdmVuIG1hbmFnZWFibGUgaW5zdGFuY2UKICAgICAqIGFu\nZCBmaWxsIGluIHRoZSBnaXZlbiBtYXAuCiAgICAgKiAKICAgICAqIEBwYXJh\nbSB2YWx1ZXMgYSBtYXAgb2YgaW50ZWdlciBwYXJhbWV0ZXIgaW5kZXggdG8g\ncGFyYW1ldGVyIHZhbHVlCiAgICAgKiBAcGFyYW0gcGMgYSBtYW5hZ2VhYmxl\nIGluc3RhbmNlCiAgICAgKiBAcGFyYW0gaW5kaWNlcyB0aGUgaW5kaWNlcyBv\nZiB0aGUgY29sdW1uIHZhbHVlcwogICAgICogQHBhcmFtIGJyb2tlciB1c2Vk\nIHRvIG9idGFpbiB0aGUgcHJpbWFyeSBrZXkgdmFsdWVzCiAgICAgKi8KICAg\nIHByaXZhdGUgdm9pZCBzZXRQZXJzaXN0ZW5jZUNhcGFibGVQYXJhbWV0ZXIo\nTWFwPEludGVnZXIsT2JqZWN0PiByZXN1bHQsIAogICAgICAgIE9iamVjdCBw\nYywgaW50W10gaW5kaWNlcywgQnJva2VyIGJyb2tlcikgewogICAgICAgIEpE\nQkNTdG9yZSBzdG9yZSA9IChKREJDU3RvcmUpYnJva2VyLmdldFN0b3JlTWFu\nYWdlcigpCiAgICAgICAgICAgIC5nZXRJbm5lcm1vc3REZWxlZ2F0ZSgpOwog\nICAgICAgIE1hcHBpbmdSZXBvc2l0b3J5IHJlcG9zID0gc3RvcmUuZ2V0Q29u\nZmlndXJhdGlvbigpCiAgICAgICAgICAgIC5nZXRNYXBwaW5nUmVwb3NpdG9y\neUluc3RhbmNlKCk7CiAgICAgICAgQ2xhc3NNYXBwaW5nIG1hcHBpbmcgPSBy\nZXBvcy5nZXRNYXBwaW5nKHBjLmdldENsYXNzKCksIAogICAgICAgICAgICBi\ncm9rZXIuZ2V0Q2xhc3NMb2FkZXIoKSwgdHJ1ZSk7CiAgICAgICAgQ29sdW1u\nW10gcGtzID0gbWFwcGluZy5nZXRQcmltYXJ5S2V5Q29sdW1ucygpOwogICAg\nICAgIE9iamVjdCBjb2xzID0gbWFwcGluZy50b0RhdGFTdG9yZVZhbHVlKHBj\nLCBwa3MsIHN0b3JlKTsKICAgICAgICBpZiAoY29scyBpbnN0YW5jZW9mIE9i\namVjdFtdKSB7CiAgICAgICAgICAgIE9iamVjdFtdIGFycmF5ID0gKE9iamVj\ndFtdKWNvbHM7CiAgICAgICAgICAgIGludCBuID0gYXJyYXkubGVuZ3RoOwog\nICAgICAgICAgICBpZiAobiA+IGluZGljZXMubGVuZ3RoIHx8IGluZGljZXMu\nbGVuZ3RoJW4gIT0gMCkKICAgICAgICAgICAgICAgIHRocm93IG5ldyBVc2Vy\nRXhjZXB0aW9uKF9sb2MuZ2V0KCJ1cGFyYW0tcGMta2V5IiwgCiAgICAgICAg\nICAgICAgICAgICAgcGMuZ2V0Q2xhc3MoKSwgbiwgQXJyYXlzLnRvU3RyaW5n\nKGluZGljZXMpKSk7CiAgICAgICAgICAgIGludCBrID0gMDsKICAgICAgICAg\nICAgZm9yIChpbnQgaiA6IGluZGljZXMpIHsKICAgICAgICAgICAgICAgIHJl\nc3VsdC5wdXQoaiwgYXJyYXlbayVuXSk7CiAgICAgICAgICAgICAgICBrKys7\nCiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBm\nb3IgKGludCBqIDogaW5kaWNlcykgewogICAgICAgICAgICAgICAgcmVzdWx0\nLnB1dChqLCBjb2xzKTsKICAgICAgICAgICAgfQogICAgICAgIH0gCiAgICB9\nCiAgICAKICAgIHByaXZhdGUgdm9pZCBzZXRDb2xsZWN0aW9uVmFsdWVkUGFy\nYW1ldGVyKE1hcDxJbnRlZ2VyLE9iamVjdD4gcmVzdWx0LCAKICAgICAgICBD\nb2xsZWN0aW9uIHZhbHVlcywgaW50W10gaW5kaWNlcywgT2JqZWN0IHBhcmFt\nKSB7CiAgICAgICAgaW50IG4gPSB2YWx1ZXMuc2l6ZSgpOwogICAgICAgIE9i\namVjdFtdIGFycmF5ID0gdmFsdWVzLnRvQXJyYXkoKTsKICAgICAgICBpZiAo\nbiA+IGluZGljZXMubGVuZ3RoIHx8IGluZGljZXMubGVuZ3RoJW4gIT0gMCkg\newogICAgICAgICAgICB0aHJvdyBuZXcgVXNlckV4Y2VwdGlvbihfbG9jLmdl\ndCgidXBhcmFtLWNvbGwtc2l6ZSIsIHBhcmFtLCB2YWx1ZXMsIAogICAgICAg\nICAgICAgICAgQXJyYXlzLnRvU3RyaW5nKGluZGljZXMpKSk7CiAgICAgICAg\nfQogICAgICAgIGludCBrID0gMDsKICAgICAgICBmb3IgKGludCBqIDogaW5k\naWNlcykgewogICAgICAgICAgICByZXN1bHQucHV0KGosIGFycmF5W2slbl0p\nOwogICAgICAgICAgICBrKys7CiAgICAgICAgfQogICAgICAgIAogICAgfQog\nICAgLyoqCiAgICAgKiBNYXJrcyB0aGUgcG9zaXRpb25zIGFuZCBrZXlzIG9m\nIHVzZXIgcGFyYW1ldGVycy4KICAgICAqIAogICAgICogQHBhcmFtIGxpc3Qg\nZXZlbiBlbGVtZW50cyBhcmUgbnVtYmVycyByZXByZXNlbnRpbmcgdGhlIHBv\nc2l0aW9uIG9mIGEgCiAgICAgKiB1c2VyIHBhcmFtZXRlciBpbiB0aGUgX3Bh\ncmFtIGxpc3QuIE9kZCBlbGVtZW50cyBhcmUgdGhlIHVzZXIgcGFyYW1ldGVy\nCiAgICAgKiBrZXkuIEEgdXNlciBwYXJhbWV0ZXIga2V5IG1heSBhcHBlYXIg\nbW9yZSB0aGFuIG9uY2UuCiAgICAgKi8KICAgIHZvaWQgc2V0VXNlclBhcmFt\nZXRlclBvc2l0aW9ucyhMaXN0IGxpc3QpIHsKICAgICAgICBfdXNlclBhcmFt\nUG9zaXRpb25zID0gbmV3IEhhc2hNYXA8T2JqZWN0LCBpbnRbXT4oKTsKICAg\nICAgICBmb3IgKGludCBpID0gMTsgbGlzdCAhPSBudWxsICYmIGkgPCBsaXN0\nLnNpemUoKTsgaSArPSAyKSB7CiAgICAgICAgICAgIE9iamVjdCBrZXkgPSAo\nKFBhcmFtZXRlcilsaXN0LmdldChpKSkuZ2V0UGFyYW1ldGVyS2V5KCk7CiAg\nICAgICAgICAgIGludCBwID0gKEludGVnZXIpbGlzdC5nZXQoaS0xKTsKICAg\nICAgICAgICAgaW50W10gcG9zaXRpb25zID0gX3VzZXJQYXJhbVBvc2l0aW9u\ncy5nZXQoa2V5KTsKICAgICAgICAgICAgaWYgKHBvc2l0aW9ucyA9PSBudWxs\nKSB7CiAgICAgICAgICAgICAgICBwb3NpdGlvbnMgPSBuZXcgaW50W117cH07\nCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpbnRbXSB0\nZW1wID0gbmV3IGludFtwb3NpdGlvbnMubGVuZ3RoKzFdOwogICAgICAgICAg\nICAgICAgU3lzdGVtLmFycmF5Y29weShwb3NpdGlvbnMsIDAsIHRlbXAsIDAs\nIHBvc2l0aW9ucy5sZW5ndGgpOwogICAgICAgICAgICAgICAgdGVtcFtwb3Np\ndGlvbnMubGVuZ3RoXSA9IHA7CiAgICAgICAgICAgICAgICBwb3NpdGlvbnMg\nPSB0ZW1wOwogICAgICAgICAgICB9CiAgICAgICAgICAgIF91c2VyUGFyYW1Q\nb3NpdGlvbnMucHV0KGtleSwgcG9zaXRpb25zKTsKICAgICAgICB9CiAgICB9\nCiAgICAKICAgIHZvaWQgc2V0UGFyYW1ldGVycyhMaXN0IGxpc3QpIHsKICAg\nICAgICBNYXA8SW50ZWdlciwgT2JqZWN0PiB0bXAgPSBuZXcgSGFzaE1hcDxJ\nbnRlZ2VyLCBPYmplY3Q+KCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGxp\nc3QgIT0gbnVsbCAmJiBpIDwgbGlzdC5zaXplKCk7IGkrKykgewogICAgICAg\nICAgICB0bXAucHV0KGksIGxpc3QuZ2V0KGkpKTsKICAgICAgICB9CiAgICAg\nICAgX3RlbXBsYXRlID0gQ29sbGVjdGlvbnMudW5tb2RpZmlhYmxlTWFwKHRt\ncCk7CiAgICB9CiAgICAKICAgIFNlbGVjdEltcGwgZ2V0U2VsZWN0KCkgewog\nICAgICAgIHJldHVybiBzZWxlY3Q7CiAgICB9CiAgICAKICAgIHB1YmxpYyBT\ndHJpbmcgdG9TdHJpbmcoKSB7CiAgICAgICAgcmV0dXJuICJQcmVwYXJlZFF1\nZXJ5OiBbIiArIGdldE9yaWdpbmFsUXVlcnkoKSArICJdIC0tPiBbIiArIAog\nICAgICAgICAgICAgICBnZXRUYXJnZXRRdWVyeSgpICsgIl0iOwogICAgfQp9\nCg==\n","encoding":"base64"}

