{"sha":"49d7376855265dbfd00c139bfc86664872fac65b","node_id":"MDQ6QmxvYjIwNjM2NDo0OWQ3Mzc2ODU1MjY1ZGJmZDAwYzEzOWJmYzg2NjY0ODcyZmFjNjVi","size":40975,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/49d7376855265dbfd00c139bfc86664872fac65b","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWw7CgppbXBvcnQg\namF2YS5pby5CeXRlQXJyYXlJbnB1dFN0cmVhbTsKaW1wb3J0IGphdmEubGFu\nZy5yZWZsZWN0Lk1ldGhvZDsKaW1wb3J0IGphdmEuc3FsLkJsb2I7CmltcG9y\ndCBqYXZhLnNxbC5Db25uZWN0aW9uOwppbXBvcnQgamF2YS5zcWwuRGF0YWJh\nc2VNZXRhRGF0YTsKaW1wb3J0IGphdmEuc3FsLlByZXBhcmVkU3RhdGVtZW50\nOwppbXBvcnQgamF2YS5zcWwuUmVzdWx0U2V0OwppbXBvcnQgamF2YS5zcWwu\nU1FMRXhjZXB0aW9uOwppbXBvcnQgamF2YS5zcWwuU3RhdGVtZW50OwppbXBv\ncnQgamF2YS5zcWwuVHlwZXM7CmltcG9ydCBqYXZhLnV0aWwuQXJyYXlzOwpp\nbXBvcnQgamF2YS51dGlsLlNldDsKaW1wb3J0IGphdmEudXRpbC5TdHJpbmdU\nb2tlbml6ZXI7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuaWRl\nbnRpZmllci5EQklkZW50aWZpZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5pZGVudGlmaWVyLlF1YWxpZmllZERCSWRlbnRpZmllcjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmtlcm5lbC5KREJDRmV0Y2hD\nb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMu\na2VybmVsLmV4cHMuRmlsdGVyVmFsdWU7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5rZXJuZWwuZXhwcy5MaXQ7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEuamRiYy5rZXJuZWwuZXhwcy5QYXJhbTsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5qZGJjLmtlcm5lbC5leHBzLlZhbDsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5Db2x1bW47CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuSW5kZXg7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuU2NoZW1hOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLlNlcXVlbmNlOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLlRhYmxlOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5GaWx0ZXJzOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5NaXhlZExvY2tMZXZlbHM7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLmV4cHMuTGl0ZXJhbDsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6ZXI7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5KYXZhVHlwZXM7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5PcGVuSlBBRXhjZXB0aW9u\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuU3RvcmVFeGNlcHRp\nb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5VbnN1cHBvcnRl\nZEV4Y2VwdGlvbjsKCmltcG9ydCBzZXJwLnV0aWwuU3RyaW5nczsKCi8qKgog\nKiBEaWN0aW9uYXJ5IGZvciBJQk0gREIyIGRhdGFiYXNlLgogKi8KcHVibGlj\nIGNsYXNzIERCMkRpY3Rpb25hcnkKICAgIGV4dGVuZHMgQWJzdHJhY3REQjJE\naWN0aW9uYXJ5IHsKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvY2FsaXpl\nciBfbG9jID0gTG9jYWxpemVyLmZvclBhY2thZ2UKICAgICAgICAoREIyRGlj\ndGlvbmFyeS5jbGFzcyk7CgogICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJp\nbmcgVkVORE9SX0lCTSA9ICJpYm0iOwogICAgcHVibGljIFN0cmluZyBvcHRp\nbWl6ZUNsYXVzZSA9ICJvcHRpbWl6ZSBmb3IiOwogICAgcHVibGljIFN0cmlu\nZyByb3dDbGF1c2UgPSAicm93IjsKICAgIHByb3RlY3RlZCBpbnQgZGIyU2Vy\ndmVyVHlwZSA9IDA7CiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIGludCBkYjJJ\nU2VyaWVzVjVSM09yRWFybGllciA9IDE7CiAgICBwdWJsaWMgc3RhdGljIGZp\nbmFsIGludCBkYjJVREJWODFPckVhcmxpZXIgPSAyOwogICAgcHVibGljIHN0\nYXRpYyBmaW5hbCBpbnQgZGIyWk9TVjh4T3JMYXRlciA9IDM7CiAgICBwdWJs\naWMgc3RhdGljIGZpbmFsIGludCBkYjJVREJWODJPckxhdGVyID0gNDsKICAg\nIHB1YmxpYyBzdGF0aWMgZmluYWwgaW50IGRiMklTZXJpZXNWNVI0T3JMYXRl\nciA9IDU7CiAgICBwcm90ZWN0ZWQgc3RhdGljIGZpbmFsIFN0cmluZyBmb3JV\ncGRhdGUgPSAiRk9SIFVQREFURSI7CiAgICBwcm90ZWN0ZWQgc3RhdGljIGZp\nbmFsIFN0cmluZyB3aXRoVVJDbGF1c2UgPSAiV0lUSCBVUiI7CiAgICBwcm90\nZWN0ZWQgc3RhdGljIGZpbmFsIFN0cmluZyB3aXRoQ1NDbGF1c2UgPSAiV0lU\nSCBDUyI7CiAgICBwcm90ZWN0ZWQgc3RhdGljIGZpbmFsIFN0cmluZyB3aXRo\nUlNDbGF1c2UgPSAiV0lUSCBSUyI7CiAgICBwcm90ZWN0ZWQgc3RhdGljIGZp\nbmFsIFN0cmluZyB3aXRoUlJDbGF1c2UgPSAiV0lUSCBSUiI7CiAgICBwcm90\nZWN0ZWQgc3RhdGljIGZpbmFsIFN0cmluZyB1c2VLZWVwU2hhcmVMb2NrQ2xh\ndXNlCiAgICAgICAgPSAiVVNFIEFORCBLRUVQIFNIQVJFIExPQ0tTIjsKICAg\nIHByb3RlY3RlZCBzdGF0aWMgZmluYWwgU3RyaW5nIHVzZUtlZXBVcGRhdGVM\nb2NrQ2xhdXNlCiAgICAgICAgPSAiVVNFIEFORCBLRUVQIFVQREFURSBMT0NL\nUyI7CiAgICBwcm90ZWN0ZWQgc3RhdGljIGZpbmFsIFN0cmluZyB1c2VLZWVw\nRXhjbHVzaXZlTG9ja0NsYXVzZQogICAgICAgID0gIlVTRSBBTkQgS0VFUCBF\nWENMVVNJVkUgTE9DS1MiOwogICAgcHJvdGVjdGVkIHN0YXRpYyBmaW5hbCBT\ndHJpbmcgZm9yUmVhZE9ubHlDbGF1c2UgPSAiRk9SIFJFQUQgT05MWSI7CiAg\nICBwcm90ZWN0ZWQgc3RhdGljIGZpbmFsIFN0cmluZyBkZWZhdWx0U2VxdWVu\nY2VTUUwgCiAgICAgICAgPSAiU0VMRUNUIFNFUVNDSEVNQSBBUyBTRVFVRU5D\nRV9TQ0hFTUEsIFNFUU5BTUUgQVMgU0VRVUVOQ0VfTkFNRSBGUk9NIFNZU0NB\nVC5TRVFVRU5DRVMiOwoKICAgIHByb3RlY3RlZCBTdHJpbmcgZGF0YWJhc2VQ\ncm9kdWN0TmFtZSA9ICIiOwogICAgcHJvdGVjdGVkIFN0cmluZyBkYXRhYmFz\nZVByb2R1Y3RWZXJzaW9uID0gIiI7CiAgICBwcm90ZWN0ZWQgaW50IG1haiA9\nIDA7CiAgICBwcm90ZWN0ZWQgaW50IG1pbiA9IDA7CiAgICAKICAgIHByaXZh\ndGUgaW50IGRlZmF1bHRCYXRjaExpbWl0ID0gMTAwOwogICAgCiAgICBwdWJs\naWMgREIyRGljdGlvbmFyeSgpIHsKICAgICAgICBwbGF0Zm9ybSA9ICJEQjIi\nOwogICAgICAgIHZhbGlkYXRpb25TUUwgPSAiU0VMRUNUIERJU1RJTkNUKENV\nUlJFTlQgVElNRVNUQU1QKSBGUk9NICIKICAgICAgICAgICAgKyAiU1lTSUJN\nLlNZU1RBQkxFUyI7CiAgICAgICAgc3VwcG9ydHNTZWxlY3RFbmRJbmRleCA9\nIHRydWU7CgogICAgICAgIG5leHRTZXF1ZW5jZVF1ZXJ5ID0gIlZBTFVFUyBO\nRVhUVkFMIEZPUiB7MH0iOwoKICAgICAgICBzZXF1ZW5jZVNRTCA9IGRlZmF1\nbHRTZXF1ZW5jZVNRTDsKICAgICAgICBzZXF1ZW5jZVNjaGVtYVNRTCA9ICJT\nRVFTQ0hFTUEgPSA/IjsKICAgICAgICBzZXF1ZW5jZU5hbWVTUUwgPSAiU0VR\nTkFNRSA9ID8iOwogICAgICAgIGNoYXJhY3RlckNvbHVtblNpemUgPSAyNTQ7\nCgogICAgICAgIGJpbmFyeVR5cGVOYW1lID0gIkJMT0IoMU0pIjsKICAgICAg\nICBsb25nVmFyYmluYXJ5VHlwZU5hbWUgPSAiQkxPQigxTSkiOwogICAgICAg\nIHZhcmJpbmFyeVR5cGVOYW1lID0gIkJMT0IoMU0pIjsKICAgICAgICBjbG9i\nVHlwZU5hbWUgPSAiQ0xPQigxTSkiOwogICAgICAgIGxvbmdWYXJjaGFyVHlw\nZU5hbWUgPSAiTE9ORyBWQVJDSEFSIjsKICAgICAgICBkYXRlUHJlY2lzaW9u\nID0gTUlDUk87CiAgICAgICAgc3RvcmVDaGFyc0FzTnVtYmVycyA9IGZhbHNl\nOwoKICAgICAgICBmaXhlZFNpemVUeXBlTmFtZVNldC5hZGRBbGwoQXJyYXlz\nLmFzTGlzdChuZXcgU3RyaW5nW117CiAgICAgICAgICAgICJMT05HIFZBUkNI\nQVIgRk9SIEJJVCBEQVRBIiwgIkxPTkcgVkFSQ0hBUiIsICJMT05HIFZBUkdS\nQVBISUMiLAogICAgICAgIH0pKTsKICAgICAgICBzeXN0ZW1TY2hlbWFzID0g\nbmV3IFN0cmluZygKICAgICAgICAgICAgICAgICJTWVNDQVQsU1lTSUJNLFNZ\nU1NUQVQsU1lTSUJNQURNLFNZU1RPT0xTIik7CiAgICAgICAgbWF4Q29uc3Ry\nYWludE5hbWVMZW5ndGggPSAxODsKICAgICAgICBtYXhJbmRleE5hbWVMZW5n\ndGggPSAxODsKICAgICAgICBtYXhDb2x1bW5OYW1lTGVuZ3RoID0gMzA7CiAg\nICAgICAgc3VwcG9ydHNEZWZlcnJlZENvbnN0cmFpbnRzID0gZmFsc2U7CiAg\nICAgICAgc3VwcG9ydHNEZWZhdWx0RGVsZXRlQWN0aW9uID0gZmFsc2U7CiAg\nICAgICAgc3VwcG9ydHNBbHRlclRhYmxlV2l0aERyb3BDb2x1bW4gPSBmYWxz\nZTsKICAgICAgICBzdXBwb3J0c0xvY2tpbmdXaXRoT3JkZXJDbGF1c2UgPSB0\ncnVlOwoKICAgICAgICBzdXBwb3J0c051bGxUYWJsZUZvckdldENvbHVtbnMg\nPSBmYWxzZTsKICAgICAgICByZXF1aXJlc0Nhc3RGb3JNYXRoRnVuY3Rpb25z\nID0gdHJ1ZTsKICAgICAgICByZXF1aXJlc0Nhc3RGb3JDb21wYXJpc29ucyA9\nIHRydWU7CgogICAgICAgIHJlc2VydmVkV29yZFNldC5hZGRBbGwoQXJyYXlz\nLmFzTGlzdChuZXcgU3RyaW5nW117CiAgICAgICAgICAgICJBRlRFUiIsICJB\nTElBUyIsICJBTExPVyIsICJBUFBMSUNBVElPTiIsICJBU1NPQ0lBVEUiLCAi\nQVNVVElNRSIsCiAgICAgICAgICAgICJBVURJVCIsICJBVVgiLCAiQVVYSUxJ\nQVJZIiwgIkJFRk9SRSIsICJCSU5BUlkiLCAiQlVGRkVSUE9PTCIsCiAgICAg\nICAgICAgICJDQUNIRSIsICJDQUxMIiwgIkNBTExFRCIsICJDQVBUVVJFIiwg\nIkNBUkRJTkFMSVRZIiwgIkNDU0lEIiwKICAgICAgICAgICAgIkNMVVNURVIi\nLCAiQ09MTEVDVElPTiIsICJDT0xMSUQiLCAiQ09NTUVOVCIsICJDT05DQVQi\nLAogICAgICAgICAgICAiQ09ORElUSU9OIiwgIkNPTlRBSU5TIiwgIkNPVU5U\nX0JJRyIsICJDVVJSRU5UX0xDX0NUWVBFIiwKICAgICAgICAgICAgIkNVUlJF\nTlRfUEFUSCIsICJDVVJSRU5UX1NFUlZFUiIsICJDVVJSRU5UX1RJTUVaT05F\nIiwgIkNZQ0xFIiwKICAgICAgICAgICAgIkRBVEFCQVNFIiwgIkRBWVMiLCAi\nREIyR0VORVJBTCIsICJEQjJHRU5STCIsICJEQjJTUUwiLAogICAgICAgICAg\nICAiREJJTkZPIiwgIkRFRkFVTFRTIiwgIkRFRklOSVRJT04iLCAiREVURVJN\nSU5JU1RJQyIsICJESVNBTExPVyIsCiAgICAgICAgICAgICJETyIsICJEU05I\nQVRUUiIsICJEU1NJWkUiLCAiRFlOQU1JQyIsICJFQUNIIiwgIkVESVRQUk9D\nIiwgIkVMU0VJRiIsCiAgICAgICAgICAgICJFTkNPRElORyIsICJFTkQtRVhF\nQzEiLCAiRVJBU0UiLCAiRVhDTFVESU5HIiwgIkVYSVQiLCAiRkVOQ0VEIiwK\nICAgICAgICAgICAgIkZJRUxEUFJPQyIsICJGSUxFIiwgIkZJTkFMIiwgIkZS\nRUUiLCAiRlVOQ1RJT04iLCAiR0VORVJBTCIsCiAgICAgICAgICAgICJHRU5F\nUkFURUQiLCAiR1JBUEhJQyIsICJIQU5ETEVSIiwgIkhPTEQiLCAiSE9VUlMi\nLCAiSUYiLAogICAgICAgICAgICAiSU5DTFVESU5HIiwgIklOQ1JFTUVOVCIs\nICJJTkRFWCIsICJJTkhFUklUIiwgIklOT1VUIiwgIklOVEVHUklUWSIsCiAg\nICAgICAgICAgICJJU09CSUQiLCAiSVRFUkFURSIsICJKQVIiLCAiSkFWQSIs\nICJMQUJFTCIsICJMQ19DVFlQRSIsICJMRUFWRSIsCiAgICAgICAgICAgICJM\nSU5LVFlQRSIsICJMT0NBTEUiLCAiTE9DQVRPUiIsICJMT0NBVE9SUyIsICJM\nT0NLIiwgIkxPQ0tNQVgiLAogICAgICAgICAgICAiTE9DS1NJWkUiLCAiTE9O\nRyIsICJMT09QIiwgIk1BWFZBTFVFIiwgIk1JQ1JPU0VDT05EIiwKICAgICAg\nICAgICAgIk1JQ1JPU0VDT05EUyIsICJNSU5VVEVTIiwgIk1JTlZBTFVFIiwg\nIk1PREUiLCAiTU9ESUZJRVMiLCAiTU9OVEhTIiwKICAgICAgICAgICAgIk5F\nVyIsICJORVdfVEFCTEUiLCAiTk9DQUNIRSIsICJOT0NZQ0xFIiwgIk5PREVO\nQU1FIiwgIk5PREVOVU1CRVIiLAogICAgICAgICAgICAiTk9NQVhWQUxVRSIs\nICJOT01JTlZBTFVFIiwgIk5PT1JERVIiLCAiTlVMTFMiLCAiTlVNUEFSVFMi\nLCAiT0JJRCIsCiAgICAgICAgICAgICJPTEQiLCAiT0xEX1RBQkxFIiwgIk9Q\nVElNSVpBVElPTiIsICJPUFRJTUlaRSIsICJPVVQiLCAiT1ZFUlJJRElORyIs\nCiAgICAgICAgICAgICJQQUNLQUdFIiwgIlBBUkFNRVRFUiIsICJQQVJUIiwg\nIlBBUlRJVElPTiIsICJQQVRIIiwgIlBJRUNFU0laRSIsCiAgICAgICAgICAg\nICJQTEFOIiwgIlBSSVFUWSIsICJQUk9HUkFNIiwgIlBTSUQiLCAiUVVFUllO\nTyIsICJSRUFEUyIsICJSRUNPVkVSWSIsCiAgICAgICAgICAgICJSRUZFUkVO\nQ0lORyIsICJSRUxFQVNFIiwgIlJFTkFNRSIsICJSRVBFQVQiLCAiUkVTRVQi\nLCAiUkVTSUdOQUwiLAogICAgICAgICAgICAiUkVTVEFSVCIsICJSRVNVTFQi\nLCAiUkVTVUxUX1NFVF9MT0NBVE9SIiwgIlJFVFVSTiIsICJSRVRVUk5TIiwK\nICAgICAgICAgICAgIlJPVVRJTkUiLCAiUk9XIiwgIlJSTiIsICJSVU4iLCAi\nU0FWRVBPSU5UIiwgIlNDUkFUQ0hQQUQiLAogICAgICAgICAgICAiU0VDT05E\nUyIsICJTRUNRVFkiLCAiU0VDVVJJVFkiLCAiU0VOU0lUSVZFIiwgIlNJR05B\nTCIsICJTSU1QTEUiLAogICAgICAgICAgICAiU09VUkNFIiwgIlNQRUNJRklD\nIiwgIlNRTElEIiwgIlNUQU5EQVJEIiwgIlNUQVJUIiwgIlNUQVRJQyIsCiAg\nICAgICAgICAgICJTVEFZIiwgIlNUT0dST1VQIiwgIlNUT1JFUyIsICJTVFlM\nRSIsICJTVUJQQUdFUyIsICJTWU5PTllNIiwKICAgICAgICAgICAgIlNZU0ZV\nTiIsICJTWVNJQk0iLCAiU1lTUFJPQyIsICJTWVNURU0iLCAiVEFCTEVTUEFD\nRSIsICJUUklHR0VSIiwKICAgICAgICAgICAgIlVORE8iLCAiVU5USUwiLCAi\nVkFMSURQUk9DIiwgIlZBUklBQkxFIiwgIlZBUklBTlQiLCAiVkNBVCIsCiAg\nICAgICAgICAgICJWT0xVTUVTIiwgIldISUxFIiwgIldMTSIsICJZRUFSUyIs\nCiAgICAgICAgfSkpOwogICAgICAgIAogICAgICAgIC8vIHJlc2VydmVkV29y\nZFNldCBzdWJzZXQgdGhhdCBDQU5OT1QgYmUgdXNlZCBhcyB2YWxpZCBjb2x1\nbW4gbmFtZXMKICAgICAgICAvLyAoaS5lLiwgd2l0aG91dCBzdXJyb3VuZGlu\nZyB0aGVtIHdpdGggZG91YmxlLXF1b3RlcykKICAgICAgICBpbnZhbGlkQ29s\ndW1uV29yZFNldC5hZGRBbGwoQXJyYXlzLmFzTGlzdChuZXcgU3RyaW5nW10g\newogICAgICAgICAgICAiQ09OU1RSQUlOVCIsICJFTkQtRVhFQyIsICJFTkQt\nRVhFQzEiLCAKICAgICAgICB9KSk7CgoKICAgICAgICBzdXBlci5zZXRCYXRj\naExpbWl0KGRlZmF1bHRCYXRjaExpbWl0KTsKICAgICAgICAKICAgICAgICBz\nZWxlY3RXb3JkU2V0LmFkZCgiV0lUSCIpOwogICAgfQoKICAgIHB1YmxpYyBi\nb29sZWFuIHN1cHBvcnRzUmFuZG9tQWNjZXNzUmVzdWx0U2V0KFNlbGVjdCBz\nZWwsCiAgICAgICAgYm9vbGVhbiBmb3JVcGRhdGUpIHsKICAgICAgICByZXR1\ncm4gIWZvclVwZGF0ZQogICAgICAgICAgICAmJiBzdXBlci5zdXBwb3J0c1Jh\nbmRvbUFjY2Vzc1Jlc3VsdFNldChzZWwsIGZvclVwZGF0ZSk7CiAgICB9Cgog\nICAgcHJvdGVjdGVkIHZvaWQgYXBwZW5kU2VsZWN0UmFuZ2UoU1FMQnVmZmVy\nIGJ1ZiwgbG9uZyBzdGFydCwgbG9uZyBlbmQsCiAgICAgICAgYm9vbGVhbiBz\ndWJzZWxlY3QpIHsKICAgICAgICAvLyBhcHBlbmRzIHRoZSBsaXRlcmFsIHJh\nbmdlIHN0cmluZywgc2luY2UgREIyIGlzIHVuYWJsZSB0byBoYW5kbGUKICAg\nICAgICAvLyBhIGJvdW5kIHBhcmFtZXRlciBmb3IgaXQKICAgICAgICAvLyBk\nbyBub3QgZ2VuZXJhdGUgRkVUQ0ggRklSU1QgY2xhdXNlIGZvciBzdWJzZWxl\nY3QKICAgICAgICBpZiAoIXN1YnNlbGVjdCkKICAgICAgICAgICAgYnVmLmFw\ncGVuZCgiIEZFVENIIEZJUlNUICIpLmFwcGVuZChMb25nLnRvU3RyaW5nKGVu\nZCkpLgogICAgICAgICAgICAgICAgYXBwZW5kKCIgUk9XUyBPTkxZIik7CiAg\nICB9CgogICAgcHJvdGVjdGVkIHZvaWQgYXBwZW5kU2VsZWN0KFNRTEJ1ZmZl\nciBzZWxlY3RTUUwsIE9iamVjdCBhbGlhcywgU2VsZWN0IHNlbCwKICAgICAg\nICBpbnQgaWR4KSB7CiAgICAgICAgLy8gaWYgdGhpcyBpcyBhIGxpdGVyYWwg\ndmFsdWUsIGFkZCBhIGNhc3QuLi4KICAgICAgICBPYmplY3QgdmFsID0gc2Vs\nLmdldFNlbGVjdHMoKS5nZXQoaWR4KTsKICAgICAgICBib29sZWFuIHRvQ2Fz\ndCA9ICh2YWwgaW5zdGFuY2VvZiBMaXQpICYmIAogICAgICAgICAgICAoKExp\ndCl2YWwpLmdldFBhcnNlVHlwZSgpICE9IExpdGVyYWwuVFlQRV9EQVRFICYm\nIAogICAgICAgICAgICAoKExpdCl2YWwpLmdldFBhcnNlVHlwZSgpICE9IExp\ndGVyYWwuVFlQRV9USU1FICYmCiAgICAgICAgICAgICgoTGl0KXZhbCkuZ2V0\nUGFyc2VUeXBlKCkgIT0gTGl0ZXJhbC5UWVBFX1RJTUVTVEFNUDsKICAgICAg\nICAKICAgICAgICBpZiAodG9DYXN0KSAKICAgICAgICAgICAgc2VsZWN0U1FM\nLmFwcGVuZCgiQ0FTVCgiKTsKCiAgICAgICAgLy8gLi4uIGFuZCBhZGQgdGhl\nIHNlbGVjdCBwZXIgc3VwZXIncyBiZWhhdmlvci4uLgogICAgICAgIHN1cGVy\nLmFwcGVuZFNlbGVjdChzZWxlY3RTUUwsIGFsaWFzLCBzZWwsIGlkeCk7Cgog\nICAgICAgIC8vIC4uLiBhbmQgZmluaXNoIHRoZSBjYXN0CiAgICAgICAgaWYg\nKHRvQ2FzdCkgewogICAgICAgICAgICBDbGFzcyBjID0gKChMaXQpIHZhbCku\nZ2V0VHlwZSgpOwogICAgICAgICAgICBpbnQgamF2YVR5cGVDb2RlID0gSmF2\nYVR5cGVzLmdldFR5cGVDb2RlKGMpOwogICAgICAgICAgICBpbnQgamRiY1R5\ncGVDb2RlID0gZ2V0SkRCQ1R5cGUoamF2YVR5cGVDb2RlLCBmYWxzZSk7CiAg\nICAgICAgICAgIFN0cmluZyB0eXBlTmFtZSA9IGdldFR5cGVOYW1lKGpkYmNU\neXBlQ29kZSk7CiAgICAgICAgICAgIHNlbGVjdFNRTC5hcHBlbmQoIiBBUyAi\nICsgdHlwZU5hbWUpOwoKICAgICAgICAgICAgLy8gaWYgdGhlIGxpdGVyYWwg\naXMgYSBzdHJpbmcsIHVzZSB0aGUgZGVmYXVsdCBjaGFyIGNvbCBzaXplCiAg\nICAgICAgICAgIC8vIGluIHRoZSBjYXN0IHN0YXRlbWVudC4KICAgICAgICAg\nICAgaWYgKFN0cmluZy5jbGFzcy5lcXVhbHMoYykpCiAgICAgICAgICAgICAg\nICBzZWxlY3RTUUwuYXBwZW5kKCIoIiArIGNoYXJhY3RlckNvbHVtblNpemUg\nKyAiKSIpOwoKICAgICAgICAgICAgc2VsZWN0U1FMLmFwcGVuZCgiKSIpOwog\nICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nW10gZ2V0Q3JlYXRl\nU2VxdWVuY2VTUUwoU2VxdWVuY2Ugc2VxKSB7CiAgICAgICAgU3RyaW5nW10g\nc3FsID0gc3VwZXIuZ2V0Q3JlYXRlU2VxdWVuY2VTUUwoc2VxKTsKICAgICAg\nICBpZiAoc2VxLmdldEFsbG9jYXRlKCkgPiAxKQogICAgICAgICAgICBzcWxb\nMF0gKz0gIiBDQUNIRSAiICsgc2VxLmdldEFsbG9jYXRlKCk7CiAgICAgICAg\ncmV0dXJuIHNxbDsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHByb3RlY3Rl\nZCBTdHJpbmcgZ2V0U2VxdWVuY2VzU1FMKFN0cmluZyBzY2hlbWFOYW1lLCBT\ndHJpbmcgc2VxdWVuY2VOYW1lKSB7CiAgICAgICAgcmV0dXJuIGdldFNlcXVl\nbmNlc1NRTChEQklkZW50aWZpZXIubmV3U2NoZW1hKHNjaGVtYU5hbWUpLCAK\nICAgICAgICAgICAgREJJZGVudGlmaWVyLm5ld1NlcXVlbmNlKHNlcXVlbmNl\nTmFtZSkpOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHJvdGVjdGVkIFN0\ncmluZyBnZXRTZXF1ZW5jZXNTUUwoREJJZGVudGlmaWVyIHNjaGVtYU5hbWUs\nIERCSWRlbnRpZmllciBzZXF1ZW5jZU5hbWUpIHsKICAgICAgICBTdHJpbmdC\ndWlsZGVyIGJ1ZiA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7CiAgICAgICAgYnVm\nLmFwcGVuZChzZXF1ZW5jZVNRTCk7CiAgICAgICAgaWYgKCFEQklkZW50aWZp\nZXIuaXNOdWxsKHNjaGVtYU5hbWUpIHx8ICFEQklkZW50aWZpZXIuaXNOdWxs\nKHNlcXVlbmNlTmFtZSkpCiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoIiBXSEVS\nRSAiKTsKICAgICAgICBpZiAoIURCSWRlbnRpZmllci5pc051bGwoc2NoZW1h\nTmFtZSkpIHsKICAgICAgICAgICAgYnVmLmFwcGVuZChzZXF1ZW5jZVNjaGVt\nYVNRTCk7CiAgICAgICAgICAgIGlmICghREJJZGVudGlmaWVyLmlzTnVsbChz\nZXF1ZW5jZU5hbWUpKQogICAgICAgICAgICAgICAgYnVmLmFwcGVuZCgiIEFO\nRCAiKTsKICAgICAgICB9CiAgICAgICAgaWYgKCFEQklkZW50aWZpZXIuaXNO\ndWxsKHNlcXVlbmNlTmFtZSkpCiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoc2Vx\ndWVuY2VOYW1lU1FMKTsKICAgICAgICByZXR1cm4gYnVmLnRvU3RyaW5nKCk7\nCiAgICB9CgogICAgcHVibGljIENvbm5lY3Rpb24gZGVjb3JhdGUoQ29ubmVj\ndGlvbiBjb25uKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAg\nICAgIC8vIHNvbWUgdmVyc2lvbnMgb2YgdGhlIERCMiBkcml2ZXIgc2VlbSB0\nbyBkZWZhdWx0IHRvCiAgICAgICAgLy8gUkVBRF9VTkNPTU1JVFRFRCwgd2hp\nY2ggd2lsbCBwcmV2ZW50IGxvY2tpbmcgZnJvbSB3b3JraW5nCiAgICAgICAg\nLy8gKG11bHRpcGxlIFNFTEVDVCAuLi4gRk9SIFVQREFURSBzdGF0ZW1lbnRz\nIGFyZSBhbGxvd2VkIG9uCiAgICAgICAgLy8gdGhlIHNhbWUgaW5zdGFuY2Up\nOyBpZiB3ZSBoYXZlIG5vdCBvdmVycmlkZGVuIHRoZQogICAgICAgIC8vIHRy\nYW5zYWN0aW9uIGlzb2xhdGlvbiBpbiB0aGUgY29uZmlndXJhdGlvbiwgZGVm\nYXVsdCB0bwogICAgICAgIC8vIFRSQU5TQUNUSU9OX1JFQURfQ09NTUlUVEVE\nCiAgICAgICAgY29ubiA9IHN1cGVyLmRlY29yYXRlKGNvbm4pOwoKICAgICAg\nICBpZiAoY29uZi5nZXRUcmFuc2FjdGlvbklzb2xhdGlvbkNvbnN0YW50KCkg\nPT0gLTEgJiYKICAgICAgICAgICAgICAgIGNvbm4uZ2V0VHJhbnNhY3Rpb25J\nc29sYXRpb24oKSA8CiAgICAgICAgICAgICAgICBDb25uZWN0aW9uLlRSQU5T\nQUNUSU9OX1JFQURfQ09NTUlUVEVEKQogICAgICAgICAgICBjb25uLnNldFRy\nYW5zYWN0aW9uSXNvbGF0aW9uKENvbm5lY3Rpb24uVFJBTlNBQ1RJT05fUkVB\nRF9DT01NSVRURUQpOwoKICAgICAgICByZXR1cm4gY29ubjsKICAgIH0KCiAg\nICBwdWJsaWMgdm9pZCBjb25uZWN0ZWRDb25maWd1cmF0aW9uKENvbm5lY3Rp\nb24gY29ubikgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgc3VwZXIu\nY29ubmVjdGVkQ29uZmlndXJhdGlvbihjb25uKTsKCiAgICAgICAgRGF0YWJh\nc2VNZXRhRGF0YSBtZXRhRGF0YSA9IGNvbm4uZ2V0TWV0YURhdGEoKTsKICAg\nICAgICB0cnkgewogICAgICAgICAgICBTdHJpbmcgc3RyID0gIlNFTEVDVCBD\nVVJSRU5UIFNDSEVNQSBGUk9NIFNZU0lCTS5TWVNEVU1NWTEiOwogICAgICAg\nICAgICBTdGF0ZW1lbnQgc3RtbnQgPSBjb25uLmNyZWF0ZVN0YXRlbWVudCgp\nOwogICAgICAgICAgICBSZXN1bHRTZXQgcnMgPSBzdG1udC5leGVjdXRlUXVl\ncnkoc3RyKTsKICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkgewogICAgICAg\nICAgICAgICAgU3RyaW5nIGN1cnJTY2hlbWEgPSBycy5nZXRTdHJpbmcoMSk7\nCiAgICAgICAgICAgICAgICBpZiAoY3VyclNjaGVtYSAhPSBudWxsKQogICAg\nICAgICAgICAgICAgICAgIHNldERlZmF1bHRTY2hlbWFOYW1lKGN1cnJTY2hl\nbWEudHJpbSgpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBycy5jbG9z\nZSgpOwogICAgICAgICAgICBzdG1udC5jbG9zZSgpOwogICAgICAgIH0gY2F0\nY2ggKFNRTEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGlmIChsb2cuaXNU\ncmFjZUVuYWJsZWQoKSkKICAgICAgICAgICAgICAgIGxvZy50cmFjZShfbG9j\nLmdldCgiY2FuX25vdF9nZXRfY3VycmVudF9zY2hlbWEiLCBlLmdldE1lc3Nh\nZ2UoKSkpOwogICAgICAgIH0KCiAgICAgICAgU3RyaW5nIGRyaXZlck5hbWUg\nPSBtZXRhRGF0YS5nZXREcml2ZXJOYW1lKCk7CiAgICAgICAgaWYgKGRyaXZl\nck5hbWUgIT0gbnVsbCAmJiBkcml2ZXJOYW1lLnN0YXJ0c1dpdGgoIklCTSBE\nQjIiKSkKICAgICAgICAgICAgZHJpdmVyVmVuZG9yID0gVkVORE9SX0lCTTsK\nICAgICAgICBlbHNlCiAgICAgICAgICAgIGRyaXZlclZlbmRvciA9IFZFTkRP\nUl9PVEhFUjsKCiAgICAgICAgZGF0YWJhc2VQcm9kdWN0TmFtZSA9IG51bGxT\nYWZlKG1ldGFEYXRhLmdldERhdGFiYXNlUHJvZHVjdE5hbWUoKSk7CiAgICAg\nICAgZGF0YWJhc2VQcm9kdWN0VmVyc2lvbiA9IG51bGxTYWZlKG1ldGFEYXRh\nLmdldERhdGFiYXNlUHJvZHVjdFZlcnNpb24oKSk7CiAgICAgICAgCiAgICAg\nICAgLy8gRGV0ZXJtaW5lIHRoZSB0eXBlIG9mIERCMiBkYXRhYmFzZQogICAg\nICAgIC8vIEZpcnN0IGNoZWNrIGZvciBBUy80MDAKICAgICAgICBnZXRQcm9k\ndWN0VmVyc2lvbk1ham9yTWlub3JGb3JJU2VyaWVzKCk7CgogICAgICAgIGlm\nIChtYWogPiAwKSB7CiAgICAgICAgICAgIGlmIChpc0RCMklTZXJpZXNWNVIz\nT3JFYXJsaWVyKCkpCiAgICAgICAgICAgICAgICBkYjJTZXJ2ZXJUeXBlID0g\nZGIySVNlcmllc1Y1UjNPckVhcmxpZXI7CiAgICAgICAgICAgIGVsc2UgaWYg\nKGlzREIySVNlcmllc1Y1UjRPckxhdGVyKCkpCiAgICAgICAgICAgICAgICBk\nYjJTZXJ2ZXJUeXBlID0gZGIySVNlcmllc1Y1UjRPckxhdGVyOwogICAgICAg\nIH0KICAgICAgICAKICAgICAgICBpZiAoZGIyU2VydmVyVHlwZSA9PSAwKSB7\nCiAgICAgICAgICAgIGlmIChpc0pEQkMzKSB7CiAgICAgICAgICAgICAgICBt\nYWogPSBtZXRhRGF0YS5nZXREYXRhYmFzZU1ham9yVmVyc2lvbigpOwogICAg\nICAgICAgICAgICAgbWluID0gbWV0YURhdGEuZ2V0RGF0YWJhc2VNaW5vclZl\ncnNpb24oKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAg\nICAgICAgICAgICBnZXRQcm9kdWN0VmVyc2lvbk1ham9yTWlub3IoKTsKCiAg\nICAgICAgICAgIC8vIERldGVybWluZSB0aGUgdHlwZSBvZiBEQjIgZGF0YWJh\nc2UgZm9yIFpPUyAmIFVEQgogICAgICAgICAgICBpZiAoaXNEQjJVREJWODFP\nckVhcmxpZXIoKSkKICAgICAgICAgICAgICAgIGRiMlNlcnZlclR5cGUgPSBk\nYjJVREJWODFPckVhcmxpZXI7CiAgICAgICAgICAgIGVsc2UgaWYgKGlzREIy\nWk9TVjh4T3JMYXRlcigpKQogICAgICAgICAgICAgICAgZGIyU2VydmVyVHlw\nZSA9IGRiMlpPU1Y4eE9yTGF0ZXI7CiAgICAgICAgICAgIGVsc2UgaWYgKGlz\nREIyVURCVjgyT3JMYXRlcigpKQogICAgICAgICAgICAgICAgZGIyU2VydmVy\nVHlwZSA9IGRiMlVEQlY4Mk9yTGF0ZXI7CiAgICAgICAgfQoKICAgICAgICAv\nLyB2ZXJpZnkgdGhhdCBkYXRhYmFzZSBwcm9kdWN0IGlzIHN1cHBvcnRlZAog\nICAgICAgIGlmIChkYjJTZXJ2ZXJUeXBlID09IDAgfHwgbWFqID09IDApCiAg\nICAgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZEV4Y2VwdGlvbihfbG9j\nLmdldCgiZGItbm90LXN1cHBvcnRlZCIsCiAgICAgICAgICAgICAgICBuZXcg\nT2JqZWN0W10ge2RhdGFiYXNlUHJvZHVjdE5hbWUsIGRhdGFiYXNlUHJvZHVj\ndFZlcnNpb24gfSkpOwoKICAgICAgICBpZiAobWFqID49IDkgfHwgKG1haiA9\nPSA4ICYmIG1pbiA+PSAyKSkgewogICAgICAgICAgICBzdXBwb3J0c0xvY2tp\nbmdXaXRoTXVsdGlwbGVUYWJsZXMgPSB0cnVlOwogICAgICAgICAgICBzdXBw\nb3J0c0xvY2tpbmdXaXRoSW5uZXJKb2luID0gdHJ1ZTsKICAgICAgICAgICAg\nc3VwcG9ydHNMb2NraW5nV2l0aE91dGVySm9pbiA9IHRydWU7CiAgICAgICAg\nICAgIGZvclVwZGF0ZUNsYXVzZSA9ICJXSVRIIFJSIFVTRSBBTkQgS0VFUCBV\nUERBVEUgTE9DS1MiOwogICAgICAgICAgICBpZiAobWFqID49OSkKICAgICAg\nICAgICAgICAgIHN1cHBvcnRzWE1MQ29sdW1uID0gdHJ1ZTsKICAgICAgICB9\nCgogICAgICAgIC8vIHBsYXRmb3JtIHNwZWNpZmljIHNldHRpbmdzCiAgICAg\nICAgc3dpdGNoIChkYjJTZXJ2ZXJUeXBlKSB7CiAgICAgICAgY2FzZSBkYjJV\nREJWODJPckxhdGVyOgogICAgICAgICAgICBsYXN0R2VuZXJhdGVkS2V5UXVl\ncnkgPSAiU0VMRUNUIElERU5USVRZX1ZBTF9MT0NBTCgpIEZST00gIgogICAg\nICAgICAgICAgICAgKyAiU1lTSUJNLlNZU0RVTU1ZMSI7CiAgICAgICAgICAg\nIGJyZWFrOwogICAgICAgIGNhc2UgIGRiMlpPU1Y4eE9yTGF0ZXI6CiAgICAg\nICAgICAgIC8vIERCMiBaL09TIAogICAgICAgICAgICBjaGFyYWN0ZXJDb2x1\nbW5TaXplID0gMjU1OwogICAgICAgICAgICBsYXN0R2VuZXJhdGVkS2V5UXVl\ncnkgPSAiU0VMRUNUIElERU5USVRZX1ZBTF9MT0NBTCgpIEZST00gIgogICAg\nICAgICAgICAgICAgKyAiU1lTSUJNLlNZU0RVTU1ZMSI7CiAgICAgICAgICAg\nIG5leHRTZXF1ZW5jZVF1ZXJ5ID0gIlNFTEVDVCBORVhUVkFMIEZPUiB7MH0g\nRlJPTSAiCiAgICAgICAgICAgICAgICArICJTWVNJQk0uU1lTRFVNTVkxIjsK\nICAgICAgICAgICAgLy8gYWxsb3cgdXNlcnMgdG8gc2V0IGEgbm9uIGRlZmF1\nbHQgc2VxdWVuY2VTUUwuIAogICAgICAgICAgICBpZiAoZGVmYXVsdFNlcXVl\nbmNlU1FMLmVxdWFscyhzZXF1ZW5jZVNRTCkpeyAgICAgICAgICAgIAkKCSAg\nICAgICAgICAgIHNlcXVlbmNlU1FMID0gIlNFTEVDVCBTQ0hFTUEgQVMgU0VR\nVUVOQ0VfU0NIRU1BLCAiCgkgICAgICAgICAgICAgICAgKyAiTkFNRSBBUyBT\nRVFVRU5DRV9OQU1FIEZST00gU1lTSUJNLlNZU1NFUVVFTkNFUyI7CgkgICAg\nICAgICAgICAKICAgICAgICAgICAgICAgIGlmIChsb2cuaXNUcmFjZUVuYWJs\nZWQoKSkKICAgICAgICAgICAgICAgICAgICBsb2cudHJhY2UoX2xvYy5nZXQo\nInNlcXVlbmNlc3FsLW92ZXJyaWRlIiwgbmV3IE9iamVjdFtdIHtkZWZhdWx0\nU2VxdWVuY2VTUUwsIHNlcXVlbmNlU1FMfSkpOwogICAgICAgICAgICB9CiAg\nICAgICAgICAgIHNlcXVlbmNlU2NoZW1hU1FMID0gIlNDSEVNQSA9ID8iOwog\nICAgICAgICAgICBzZXF1ZW5jZU5hbWVTUUwgPSAiTkFNRSA9ID8iOwogICAg\nICAgICAgICBpZiAobWFqID09IDgpIHsKICAgICAgICAgICAgICAgIC8vIERC\nMiBaL09TIFZlcnNpb24gODogbm8gYmlnaW50IHN1cHBvcnQsIGhlbmNlIG1h\ncCBKYXZhCiAgICAgICAgICAgICAgICAvLyBsb25nIHRvIGRlY2ltYWwKICAg\nICAgICAgICAgICAgIGJpZ2ludFR5cGVOYW1lID0gIkRFQ0lNQUwoMzEsMCki\nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNh\nc2UgZGIySVNlcmllc1Y1UjNPckVhcmxpZXI6CiAgICAgICAgY2FzZSBkYjJJ\nU2VyaWVzVjVSNE9yTGF0ZXI6CiAgICAgICAgICAgIGxhc3RHZW5lcmF0ZWRL\nZXlRdWVyeSA9ICJTRUxFQ1QgSURFTlRJVFlfVkFMX0xPQ0FMKCkgRlJPTSAi\nCiAgICAgICAgICAgICAgICArICJTWVNJQk0uU1lTRFVNTVkxIjsKICAgICAg\nICAgICAgbmV4dFNlcXVlbmNlUXVlcnkgPSAiU0VMRUNUIE5FWFRWQUwgRk9S\nIHswfSBGUk9NICIKICAgICAgICAgICAgICAgICsgIlNZU0lCTS5TWVNEVU1N\nWTEiOwogICAgICAgICAgICB2YWxpZGF0aW9uU1FMID0gIlNFTEVDVCBESVNU\nSU5DVChDVVJSRU5UIFRJTUVTVEFNUCkgRlJPTSAiCiAgICAgICAgICAgICAg\nICArICJRU1lTMi5TWVNUQUJMRVMiOwogICAgICAgICAgICAvLyBhbGxvdyB1\nc2VycyB0byBzZXQgYSBub24gZGVmYXVsdCBzZXF1ZW5jZVNRTC4KICAgICAg\nICAgICAgaWYgKGRlZmF1bHRTZXF1ZW5jZVNRTC5lcXVhbHMoc2VxdWVuY2VT\nUUwpKXsgICAgICAgICAgICAKCSAgICAgICAgICAgIHNlcXVlbmNlU1FMID0g\nIlNFTEVDVCBTRVFVRU5DRV9TQ0hFTUEsICIKCSAgICAgICAgICAgICAgICAr\nICJTRVFVRU5DRV9OQU1FIEZST00gUVNZUzIuU1lTU0VRVUVOQ0VTIjsKCSAg\nICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgKGxvZy5pc1RyYWNlRW5h\nYmxlZCgpKQogICAgICAgICAgICAgICAgICAgIGxvZy50cmFjZShfbG9jLmdl\ndCgic2VxdWVuY2VzcWwtb3ZlcnJpZGUiLCBuZXcgT2JqZWN0W10ge2RlZmF1\nbHRTZXF1ZW5jZVNRTCwgc2VxdWVuY2VTUUx9KSk7CiAgICAgICAgICAgIH0K\nICAgICAgICAgICAgc2VxdWVuY2VTY2hlbWFTUUwgPSAiU0VRVUVOQ0VfU0NI\nRU1BID0gPyI7CiAgICAgICAgICAgIHNlcXVlbmNlTmFtZVNRTCA9ICJTRVFV\nRU5DRV9OQU1FID0gPyI7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0K\nICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBzdXBwb3J0c0lzb2xhdGlvbkZv\nclVwZGF0ZSgpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAv\nKioKICAgICAqIEdldCB0aGUgdXBkYXRlIGNsYXVzZSBmb3IgdGhlIHF1ZXJ5\nIGJhc2VkIG9uIHRoZQogICAgICogdXBkYXRlQ2xhdXNlIGFuZCBpc29sYXRp\nb25MZXZlbCBoaW50cwogICAgICovCiAgICBwcm90ZWN0ZWQgU3RyaW5nIGdl\ndEZvclVwZGF0ZUNsYXVzZShKREJDRmV0Y2hDb25maWd1cmF0aW9uIGZldGNo\nLAogICAgICAgIGJvb2xlYW4gaXNGb3JVcGRhdGUsIFNlbGVjdCBzZWwpIHsK\nICAgICAgICBpbnQgaXNvbGF0aW9uTGV2ZWw7CiAgICAgICAgLy8gRm9yIGRi\nMlVEQlY4MU9yRWFybGllciBhbmQgZGIySVNlcmllc1Y1UjNPckVhcmxpZXI6\nCiAgICAgICAgLy8gIm9wdGltaXplIGZvciIgY2xhdXNlIGFwcGVhcnMgYmVm\nb3JlICJmb3IgdXBkYXRlIiBjbGF1c2UuCiAgICAgICAgU3RyaW5nQnVmZmVy\nIGZvclVwZGF0ZVN0cmluZyA9IG5ldyBTdHJpbmdCdWZmZXIoZ2V0T3B0aW1p\nemVDbGF1c2Uoc2VsKSk7CiAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBpc29s\nYXRpb25MZXZlbDsgdGhlIGZldGNoCiAgICAgICAgLy8gY29uZmlndXJhdGlv\nbiBkYXRhIG92ZXJyaWRlcyB0aGUgcGVyc2lzdGVuY2UueG1sIHZhbHVlCiAg\nICAgICAgaWYgKGZldGNoICE9IG51bGwgJiYgZmV0Y2guZ2V0SXNvbGF0aW9u\nKCkgIT0gLTEpCiAgICAgICAgICAgIGlzb2xhdGlvbkxldmVsID0gZmV0Y2gu\nZ2V0SXNvbGF0aW9uKCk7CiAgICAgICAgZWxzZQogICAgICAgICAgICBpc29s\nYXRpb25MZXZlbCA9IGNvbmYuZ2V0VHJhbnNhY3Rpb25Jc29sYXRpb25Db25z\ndGFudCgpOwoKICAgICAgICBpZiAoZmV0Y2ggIT0gbnVsbCAmJiBmZXRjaC5n\nZXRSZWFkTG9ja0xldmVsKCkgPj0gCiAgICAgICAgICAgIE1peGVkTG9ja0xl\ndmVscy5MT0NLX1BFU1NJTUlTVElDX1dSSVRFKQogICAgICAgICAgICBpc29s\nYXRpb25MZXZlbCA9IENvbm5lY3Rpb24uVFJBTlNBQ1RJT05fU0VSSUFMSVpB\nQkxFOwoKICAgICAgICBpZiAoaXNGb3JVcGRhdGUpIHsKICAgICAgICAgICAg\nc3dpdGNoIChkYjJTZXJ2ZXJUeXBlKSB7CiAgICAgICAgICAgIGNhc2UgZGIy\nSVNlcmllc1Y1UjNPckVhcmxpZXI6CiAgICAgICAgICAgIGNhc2UgZGIyVURC\nVjgxT3JFYXJsaWVyOgogICAgICAgICAgICAgICAgaWYgKGlzb2xhdGlvbkxl\ndmVsID09IENvbm5lY3Rpb24uVFJBTlNBQ1RJT05fU0VSSUFMSVpBQkxFKQog\nICAgICAgICAgICAgICAgICAgIGZvclVwZGF0ZVN0cmluZy5hcHBlbmQoIiAi\nKS5hcHBlbmQoZm9yVXBkYXRlQ2xhdXNlKTsKICAgICAgICAgICAgICAgIGVs\nc2UKICAgICAgICAgICAgICAgICAgICBmb3JVcGRhdGVTdHJpbmcuYXBwZW5k\nKCIgIikuYXBwZW5kKGZvclVwZGF0ZSkuYXBwZW5kKCIgIikKICAgICAgICAg\nICAgICAgICAgICAgICAgLmFwcGVuZCh3aXRoUlNDbGF1c2UpOwogICAgICAg\nICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgZGIyWk9TVjh4T3JM\nYXRlcjoKICAgICAgICAgICAgY2FzZSBkYjJVREJWODJPckxhdGVyOgogICAg\nICAgICAgICAgICAgaWYgKGlzb2xhdGlvbkxldmVsID09IENvbm5lY3Rpb24u\nVFJBTlNBQ1RJT05fU0VSSUFMSVpBQkxFKSB7CiAgICAgICAgICAgICAgICAg\nICAgZm9yVXBkYXRlU3RyaW5nLmFwcGVuZCgiICIpLmFwcGVuZChmb3JSZWFk\nT25seUNsYXVzZSkKICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgi\nICIpLmFwcGVuZCh3aXRoUlJDbGF1c2UpLmFwcGVuZCgiICIpLmFwcGVuZCgK\nICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZUtlZXBVcGRhdGVMb2Nr\nQ2xhdXNlKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAg\nICAgICAgICAgZm9yVXBkYXRlU3RyaW5nLmFwcGVuZCgiICIpLmFwcGVuZChm\nb3JSZWFkT25seUNsYXVzZSkKICAgICAgICAgICAgICAgICAgICAgICAgLmFw\ncGVuZCgiICIpLmFwcGVuZCh3aXRoUlNDbGF1c2UpLmFwcGVuZCgiICIpLmFw\ncGVuZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZUtlZXBVcGRh\ndGVMb2NrQ2xhdXNlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAg\nICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIGRiMklTZXJpZXNWNVI0T3JM\nYXRlcjoKICAgICAgICAgICAgICAgIGlmIChpc29sYXRpb25MZXZlbCA9PSBD\nb25uZWN0aW9uLlRSQU5TQUNUSU9OX1NFUklBTElaQUJMRSkgewogICAgICAg\nICAgICAgICAgICAgIGZvclVwZGF0ZVN0cmluZy5hcHBlbmQoIiAiKS5hcHBl\nbmQoZm9yUmVhZE9ubHlDbGF1c2UpCiAgICAgICAgICAgICAgICAgICAgICAg\nIC5hcHBlbmQoIiAiKS5hcHBlbmQod2l0aFJSQ2xhdXNlKS5hcHBlbmQoIiAi\nKS5hcHBlbmQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VLZWVw\nRXhjbHVzaXZlTG9ja0NsYXVzZSk7CiAgICAgICAgICAgICAgICB9IGVsc2Ug\newogICAgICAgICAgICAgICAgICAgIGZvclVwZGF0ZVN0cmluZy5hcHBlbmQo\nIiAiKS5hcHBlbmQoZm9yUmVhZE9ubHlDbGF1c2UpCiAgICAgICAgICAgICAg\nICAgICAgICAgIC5hcHBlbmQoIiAiKS5hcHBlbmQod2l0aFJTQ2xhdXNlKS5h\ncHBlbmQoIiAiKS5hcHBlbmQoCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICB1c2VLZWVwRXhjbHVzaXZlTG9ja0NsYXVzZSk7CiAgICAgICAgICAgICAg\nICB9CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAg\nICAgIH0KICAgCiAgICAgICAgcmV0dXJuIGZvclVwZGF0ZVN0cmluZy50b1N0\ncmluZygpOwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGlzREIyVURCVjgy\nT3JMYXRlcigpIHsKICAgICAgICByZXR1cm4gKGRhdGFiYXNlUHJvZHVjdFZl\ncnNpb24uaW5kZXhPZigiU1FMIikgIT0gLTEKICAgICAgICAgICAgIHx8IGRh\ndGFiYXNlUHJvZHVjdE5hbWUuaW5kZXhPZigiREIyLyIpICE9IC0xKQogICAg\nICAgICAgICAgJiYgKChtYWogPT0gOCAmJiBtaW4gPj0gMikgfHwgKG1haiA+\nPSA5KSk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gaXNEQjJaT1NWOHhP\nckxhdGVyKCkgewogICAgICAgcmV0dXJuIChkYXRhYmFzZVByb2R1Y3RWZXJz\naW9uLmluZGV4T2YoIkRTTiIpICE9IC0xCiAgICAgICAgICAgIHx8IGRhdGFi\nYXNlUHJvZHVjdE5hbWUuaW5kZXhPZigiREIyLyIpID09IC0xKQogICAgICAg\nICAgICAmJiBtYWogPj0gODsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBp\nc0RCMklTZXJpZXNWNVIzT3JFYXJsaWVyKCkgewogICAgICAgcmV0dXJuIChk\nYXRhYmFzZVByb2R1Y3ROYW1lLmluZGV4T2YoIkFTIikgIT0gLTEKICAgICAg\nICAgICAmJiAoKG1haiA9PSA1ICYmIG1pbiA8PTMpIHx8IG1haiA8IDUpKTsK\nICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBpc0RCMklTZXJpZXNWNVI0T3JM\nYXRlcigpIHsKICAgICAgIHJldHVybiBkYXRhYmFzZVByb2R1Y3ROYW1lLmlu\nZGV4T2YoIkFTIikgIT0gLTEKICAgICAgICAgICAmJiAobWFqID49NiB8fCAo\nbWFqID09IDUgJiYgbWluID49NCkpOwogICAgfQoKICAgIHB1YmxpYyBib29s\nZWFuIGlzREIyVURCVjgxT3JFYXJsaWVyKCkgewogICAgICAgIHJldHVybiAo\nZGF0YWJhc2VQcm9kdWN0VmVyc2lvbi5pbmRleE9mKCJTUUwiKSAhPSAtMSAK\nICAgICAgICAgICAgfHwgZGF0YWJhc2VQcm9kdWN0TmFtZS5pbmRleE9mKCJE\nQjIvIikgIT0gLTEpIAogICAgICAgICAgICAmJiAoKG1haiA9PSA4ICYmIG1p\nbiA8PSAxKSB8fCBtYWogPCA4KTsKICAgIH0KCiAgICAvKiogR2V0IHRoZSB2\nZXJzaW9uIE1ham9yL01pbm9yIGZvciB0aGUgSVNlcmllcwogICAgICovCiAg\nICBwcml2YXRlIHZvaWQgZ2V0UHJvZHVjdFZlcnNpb25NYWpvck1pbm9yRm9y\nSVNlcmllcygpIHsKICAgICAgICAvLyBJU2VyaWVzICAgIERCUHJvZE5hbWUg\nICAgICAgICAgICAgICAgIERCMiBVREIgZm9yIEFTLzQwMAogICAgICAgIC8v\nICAgKFRvb2xib3gpREJQcm9kVmVyc2lvbiAgICAgICAgICAgICAgMDUuMDQu\nMDAwMCBWNVI0bTAKICAgICAgICAvLyBJU2VyaWVzICAgICAgICAgICAgICAg\nICAgICAgICAgICAgICAgIERCMiBVREIgZm9yIEFTLzQwMAogICAgICAgIC8v\nICAgKE5hdGl2ZSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgVjVSNE0w\nCiAgICAgICAgLy8gbmV3IGpjYyAgICBEQlByb2RWZXJzaW9uICAgICAgICAg\nICAgICBRU1EwNTA0MCBvciBRU1EwNjAxMAogICAgICAgIGlmIChkYXRhYmFz\nZVByb2R1Y3ROYW1lLmluZGV4T2YoIkFTIikgIT0gLTEpIHsKICAgICAgICAg\nICAgLy8gZGVmYXVsdCB0byBWNVI0CiAgICAgICAgICAgIG1haiA9IDU7CiAg\nICAgICAgICAgIG1pbiA9IDQ7CiAgICAgICAgICAgIGludCBpbmRleCA9IGRh\ndGFiYXNlUHJvZHVjdFZlcnNpb24uaW5kZXhPZignVicpOwogICAgICAgICAg\nICBpZiAoaW5kZXggIT0gLTEpIHsKICAgICAgICAgICAgICAgIFN0cmluZyBz\nID0gZGF0YWJhc2VQcm9kdWN0VmVyc2lvbi5zdWJzdHJpbmcoaW5kZXgpOwog\nICAgICAgICAgICAgICAgcyA9IHMudG9VcHBlckNhc2UoKTsKCiAgICAgICAg\nICAgICAgICBTdHJpbmdUb2tlbml6ZXIgc3RyaW5ndG9rZW5pemVyID0gbmV3\nIFN0cmluZ1Rva2VuaXplcihzLCAiVlJNIgogICAgICAgICAgICAgICAgICAg\nICwgZmFsc2UpOwogICAgICAgICAgICAgICAgaWYgKHN0cmluZ3Rva2VuaXpl\nci5jb3VudFRva2VucygpID09IDMpIHsKICAgICAgICAgICAgICAgICAgICBT\ndHJpbmcgczEgPSBzdHJpbmd0b2tlbml6ZXIubmV4dFRva2VuKCk7CiAgICAg\nICAgICAgICAgICAgICAgbWFqID0gSW50ZWdlci5wYXJzZUludChzMSk7CiAg\nICAgICAgICAgICAgICAgICAgU3RyaW5nIHMyID0gIHN0cmluZ3Rva2VuaXpl\nci5uZXh0VG9rZW4oKTsKICAgICAgICAgICAgICAgICAgICBtaW4gPSBJbnRl\nZ2VyLnBhcnNlSW50KHMyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAg\nICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGluZGV4ID0gZGF0YWJhc2VQ\ncm9kdWN0VmVyc2lvbi5pbmRleE9mKCcwJyk7CiAgICAgICAgICAgICAgICBp\nZiAoaW5kZXggIT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICBTdHJpbmcg\ncyA9IGRhdGFiYXNlUHJvZHVjdFZlcnNpb24uc3Vic3RyaW5nKGluZGV4KTsK\nICAgICAgICAgICAgICAgICAgICBzID0gcy50b1VwcGVyQ2FzZSgpOwoKICAg\nICAgICAgICAgICAgICAgICBTdHJpbmdUb2tlbml6ZXIgc3RyaW5ndG9rZW5p\nemVyID0gbmV3IFN0cmluZ1Rva2VuaXplcihzLCAiMCIKICAgICAgICAgICAg\nICAgICAgICAgICAgLCBmYWxzZSk7ICAgICAgICAgICAgICAgICAgICAKICAg\nICAgICAgICAgICAgICAgICBpZiAoc3RyaW5ndG9rZW5pemVyLmNvdW50VG9r\nZW5zKCkgPT0gMikgewogICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcg\nczEgPSBzdHJpbmd0b2tlbml6ZXIubmV4dFRva2VuKCk7CiAgICAgICAgICAg\nICAgICAgICAgICAgIG1haiA9IEludGVnZXIucGFyc2VJbnQoczEpOwogICAg\nICAgICAgICAgICAgICAgICAgICBTdHJpbmcgczIgPSAgc3RyaW5ndG9rZW5p\nemVyLm5leHRUb2tlbigpOwogICAgICAgICAgICAgICAgICAgICAgICBtaW4g\nPSBJbnRlZ2VyLnBhcnNlSW50KHMyKTsKICAgICAgICAgICAgICAgICAgICB9\nCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAg\nICB9CiAgICAKICAgIHByaXZhdGUgdm9pZCBnZXRQcm9kdWN0VmVyc2lvbk1h\nam9yTWlub3IoKSB7CiAgICAgICAgLy8gSW4gY2FzZSBKREJDIGRyaXZlciB2\nZXJzaW9uIGlzIGxvd2VyIHRoYW4gMwogICAgICAgIC8vIHVzZSBmb2xsb3dp\nbmcgaW5mbyB0byBkZXRlcm1pbmUgTWFqb3IgYW5kIE1pbm9yIAogICAgICAg\nIC8vICAgICAgICAgICAgICAgICAgICAgICAgQ0xJICAgIHZzICAgICAgSkND\nCiAgICAgICAgLy8gWkRCVjggREJQcm9kTmFtZSAgICAgICBEQjIgICAgICAg\nICAgICBEQjIKICAgICAgICAvLyAgICAgICBEQlByb2RWZXJzaW9uICAgIDA4\nLjAxLjAwMDUgICAgIERTTjA4MDE1CiAgICAgICAgLy8gWkRCVjkgICAgICAg\nICAgICAgICAgICBEQjIgICAgICAgICAgICBEQjIKICAgICAgICAvLyAgICAg\nICAgICAgICAgICAgICAgICAgIDA5LjAxLjAwMDUgICAgIERTTjA5MDE1CiAg\nICAgICAgLy8gV2luVjkgICAgICAgICAgICAgICAgICBEQjIvTlQgICAgICAg\nICBEQjIvTlQKICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgIDA5\nLjAxLjAwMDAgICAgIFNRTDA5MDEwCiAgICAgICAgLy8gU29sYXJpc1Y5ICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICBEQjIvU1VONjQKICAgICAgICAv\nLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNRTDA5\nMDEKICAgICAgICAvLyBMaW51eCAgICAgICAgICAgICAgICAgIERCMi9MSU5V\nWCAgICAgIERCMi9MSU5VWAogICAgICAgIC8vICAgICAgICAgICAgICAgICAg\nICAgICAgMDkuMDEuMDAwMCAgICAgU1FMMDkwMQogICAgICAgIGlmIChkYXRh\nYmFzZVByb2R1Y3RWZXJzaW9uLmluZGV4T2YoIjA5IikgIT0gLTEpIHsKICAg\nICAgICAgICAgbWFqID0gOTsKICAgICAgICAgICAgaWYgKGRhdGFiYXNlUHJv\nZHVjdFZlcnNpb24uaW5kZXhPZigiMDEiKSAhPSAtMSkgewogICAgICAgICAg\nICAgICAgbWluID0gMTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSBp\nZiAoZGF0YWJhc2VQcm9kdWN0VmVyc2lvbi5pbmRleE9mKCIwOCIpICE9IC0x\nKSB7CiAgICAgICAgICAgIG1haiA9IDg7CiAgICAgICAgICAgIG1pbiA9IDI7\nCiAgICAgICAgICAgIGlmIChkYXRhYmFzZVByb2R1Y3RWZXJzaW9uLmluZGV4\nT2YoIjAxIikgIT0gLTEpIHsKICAgICAgICAgICAgICAgIG1pbiA9IDE7CiAg\nICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgcHJvdGVjdGVkIFN0\ncmluZyBnZXRPcHRpbWl6ZUNsYXVzZShTZWxlY3Qgc2VsKSB7CiAgICAgICAg\naWYgKHNlbCAhPSBudWxsICYmIHNlbC5nZXRFeHBlY3RlZFJlc3VsdENvdW50\nKCkgPiAwKSB7CiAgICAgICAgICAgIFN0cmluZ0J1aWxkZXIgYnVmID0gbmV3\nIFN0cmluZ0J1aWxkZXIoKTsKICAgICAgICAgICAgYnVmLmFwcGVuZCgiICIp\nLmFwcGVuZChvcHRpbWl6ZUNsYXVzZSkuYXBwZW5kKCIgIikKICAgICAgICAg\nICAgICAgIC5hcHBlbmQoU3RyaW5nLnZhbHVlT2Yoc2VsLmdldEV4cGVjdGVk\nUmVzdWx0Q291bnQoKSkpCiAgICAgICAgICAgICAgICAuYXBwZW5kKCIgIiku\nYXBwZW5kKHJvd0NsYXVzZSk7CiAgICAgICAgICAgIHJldHVybiBidWYudG9T\ndHJpbmcoKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAiIjsKICAgIH0K\nCiAgICBwdWJsaWMgT3BlbkpQQUV4Y2VwdGlvbiBuZXdTdG9yZUV4Y2VwdGlv\nbihTdHJpbmcgbXNnLCBTUUxFeGNlcHRpb25bXSBjYXVzZXMsCiAgICAgICAg\nT2JqZWN0IGZhaWxlZCkgewogICAgICAgIGlmIChjYXVzZXMgIT0gbnVsbCAm\nJiBjYXVzZXMubGVuZ3RoID4gMCkKICAgICAgICAgICAgbXNnID0gYXBwZW5k\nRXh0ZW5kZWRFeGNlcHRpb25Nc2cobXNnLCBjYXVzZXNbMF0pOwogICAgICAg\nIHJldHVybiBzdXBlci5uZXdTdG9yZUV4Y2VwdGlvbihtc2csIGNhdXNlcywg\nZmFpbGVkKTsKICAgIH0KCiAgICAvKioKICAgICAqICBBcHBlbmQgZXhjZXB0\naW9uIGluZm9ybWF0aW9uIGZyb20gU1FMQ0EgdG8gdGhlIGV4aXN0aW5nCiAg\nICAgKiAgZXhjZXB0aW9uIG1lc3NhZ2UKICAgICAqLwogICAgcHJpdmF0ZSBT\ndHJpbmcgYXBwZW5kRXh0ZW5kZWRFeGNlcHRpb25Nc2coU3RyaW5nIG1zZywg\nU1FMRXhjZXB0aW9uIHNxbGUpewogICAgICAgZmluYWwgU3RyaW5nIEdFVFNR\nTENBID0iZ2V0U3FsY2EiOwogICAgICAgU3RyaW5nIGV4Y2VwdGlvbk1zZyA9\nIG5ldyBTdHJpbmcoKTsKICAgICAgIHRyeSB7CiAgICAgICAgICAgIE1ldGhv\nZCBzcWxjYU0yID0gc3FsZS5nZXROZXh0RXhjZXB0aW9uKCkuZ2V0Q2xhc3Mo\nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXRNZXRob2QoR0VU\nU1FMQ0EsbnVsbCk7CiAgICAgICAgICAgIE9iamVjdCBzcWxjYSA9IHNxbGNh\nTTIuaW52b2tlKHNxbGUuZ2V0TmV4dEV4Y2VwdGlvbigpLAogICAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgT2JqZWN0W10g\ne30pOwogICAgICAgICAgICBNZXRob2QgIGdldFNxbEVycnBNZXRoZCA9IHNx\nbGNhLmdldENsYXNzKCkuCiAgICAgICAgICAgIGdldE1ldGhvZCgiZ2V0U3Fs\nRXJycCIsIG51bGwpOwogICAgICAgICAgICBNZXRob2QgIGdldFNxbFdhcm5N\nZXRoZCA9IHNxbGNhLmdldENsYXNzKCkuCiAgICAgICAgICAgIGdldE1ldGhv\nZCgiZ2V0U3FsV2FybiIsIG51bGwpOwogICAgICAgICAgICBNZXRob2QgIGdl\ndFNxbEVycmRNZXRoZCA9IHNxbGNhLmdldENsYXNzKCkuCiAgICAgICAgICAg\nIGdldE1ldGhvZCgiZ2V0U3FsRXJyZCIsIG51bGwpOwogICAgICAgICAgICBT\ndHJpbmdCdWlsZGVyIGVycmRTdHIgPSBuZXcgU3RyaW5nQnVpbGRlcigpOwoK\nICAgICAgICAgICAgaW50W10gZXJyZHMgPSAoaW50W10pIGdldFNxbEVycmRN\nZXRoZC5pbnZva2Uoc3FsY2EsIG5ldyBPYmplY3RbXXt9KTsKICAgICAgICAg\nICAgZm9yIChpbnQgaSA9IDA7IGkgPCBlcnJkcy5sZW5ndGg7IGkrKykKICAg\nICAgICAgICAgICAgIGVycmRTdHIuYXBwZW5kKGVycmRTdHIubGVuZ3RoKCkg\nPiAwID8gIiwgIiA6ICIiKS4KICAgICAgICAgICAgICAgICAgICBhcHBlbmQo\nZXJyZHNbaV0pOwogICAgICAgICAgICBleGNlcHRpb25Nc2cgPSBleGNlcHRp\nb25Nc2cuY29uY2F0KCAiU1FMQ0EgT1VUUFVUIiArCiAgICAgICAgICAgICAg\nICAgICAgIltFcnJwPSIgKyBnZXRTcWxFcnJwTWV0aGQuaW52b2tlKHNxbGNh\nLCBuZXcgT2JqZWN0W117fSkKICAgICAgICAgICAgICAgICAgICArICIsIEVy\ncmQ9IiArIGVycmRTdHIpOwoKICAgICAgICAgICAgU3RyaW5nIFdhcm4gPSBu\nZXcgU3RyaW5nKChjaGFyW10pIGdldFNxbFdhcm5NZXRoZC4KICAgICAgICAg\nICAgICAgICAgICBpbnZva2Uoc3FsY2EsIG5ldyBPYmplY3RbXXt9KSk7CiAg\nICAgICAgICAgIGlmIChXYXJuLnRyaW0oKS5sZW5ndGgoKSAhPSAwKQogICAg\nICAgICAgICAgICAgZXhjZXB0aW9uTXNnID0gZXhjZXB0aW9uTXNnLmNvbmNh\ndCgiLCBXYXJuPSIgK1dhcm4gKyAiXSIgKTsKICAgICAgICAgICAgZWxzZQog\nICAgICAgICAgICAgICAgZXhjZXB0aW9uTXNnID0gZXhjZXB0aW9uTXNnLmNv\nbmNhdCggIl0iICk7CiAgICAgICAgICAgIG1zZyA9IG1zZy5jb25jYXQoZXhj\nZXB0aW9uTXNnKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIGZvciBi\nYXRjaGVkIGV4ZWN1dGlvbiBmYWlsdXJlcywgU1FMRXhjZXB0aW9ucyBhcmUg\nbmVzdGVkCiAgICAgICAgICAgIFNRTEV4Y2VwdGlvbiBzcWxlMiA9IHNxbGUu\nZ2V0TmV4dEV4Y2VwdGlvbigpOwogICAgICAgICAgICB3aGlsZSAoc3FsZTIg\nIT0gbnVsbCkgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIG1z\nZyA9IG1zZy5jb25jYXQoIlxuIiArIHNxbGUyLmdldE1lc3NhZ2UoKSk7CiAg\nICAgICAgICAgICAgICBzcWxlMiA9IHNxbGUyLmdldE5leHRFeGNlcHRpb24o\nKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgcmV0\ndXJuIG1zZzsKICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUgdCkgewogICAg\nICAgICAgICByZXR1cm4gc3FsZS5nZXRNZXNzYWdlKCk7CiAgICAgICAgfQog\nICAgfQoKICAgIHB1YmxpYyBpbnQgZ2V0RGIyU2VydmVyVHlwZSgpIHsKICAg\nICAgICByZXR1cm4gZGIyU2VydmVyVHlwZTsKICAgIH0KICAgIAogICAgcHJv\ndGVjdGVkIHZvaWQgYXBwZW5kTGVuZ3RoKFNRTEJ1ZmZlciBidWYsIGludCB0\neXBlKSB7CiAgICAgICAgaWYgKHR5cGUgPT0gVHlwZXMuVkFSQ0hBUikKICAg\nICAgICAgICAgYnVmLmFwcGVuZCgiKCIpLmFwcGVuZChJbnRlZ2VyLnRvU3Ry\naW5nKGNoYXJhY3RlckNvbHVtblNpemUpKS4KICAgICAgICAgICAgICAgIGFw\ncGVuZCgiKSIpOwogICAgfQoKICAgIC8qKgogICAgICogSWYgdGhpcyBkaWN0\naW9uYXJ5IHN1cHBvcnRzIFhNTCB0eXBlLAogICAgICogdXNlIHRoaXMgbWV0\naG9kIHRvIGFwcGVuZCB4bWwgcHJlZGljYXRlLgogICAgICogCiAgICAgKiBA\ncGFyYW0gYnVmIHRoZSBTUUwgYnVmZmVyIHRvIHdyaXRlIHRoZSBjb21wYXJp\nc29uCiAgICAgKiBAcGFyYW0gb3AgdGhlIGNvbXBhcmlzb24gb3BlcmF0aW9u\nIHRvIHBlcmZvcm0KICAgICAqIEBwYXJhbSBsaHMgdGhlIGxlZnQgaGFuZCBz\naWRlIG9mIHRoZSBjb21wYXJpc29uCiAgICAgKiBAcGFyYW0gcmhzIHRoZSBy\naWdodCBoYW5kIHNpZGUgb2YgdGhlIGNvbXBhcmlzb24KICAgICAqIEBwYXJh\nbSBsaHN4bWwgaW5kaWNhdGVzIHdoZXRoZXIgdGhlIGxlZnQgb3BlcmFuZCBt\nYXBzIHRvIHhtbAogICAgICogQHBhcmFtIHJoc3htbCBpbmRpY2F0ZXMgd2hl\ndGhlciB0aGUgcmlnaHQgb3BlcmFuZCBtYXBzIHRvIHhtbAogICAgICovCiAg\nICBwdWJsaWMgdm9pZCBhcHBlbmRYbWxDb21wYXJpc29uKFNRTEJ1ZmZlciBi\ndWYsIFN0cmluZyBvcCwgRmlsdGVyVmFsdWUgbGhzLAogICAgICAgIEZpbHRl\nclZhbHVlIHJocywgYm9vbGVhbiBsaHN4bWwsIGJvb2xlYW4gcmhzeG1sKSB7\nCiAgICAgICAgc3VwZXIuYXBwZW5kWG1sQ29tcGFyaXNvbihidWYsIG9wLCBs\naHMsIHJocywgbGhzeG1sLCByaHN4bWwpOwogICAgICAgIGlmIChsaHN4bWwg\nJiYgcmhzeG1sKQogICAgICAgICAgICBhcHBlbmRYbWxDb21wYXJpc29uMihi\ndWYsIG9wLCBsaHMsIHJocyk7CiAgICAgICAgZWxzZSBpZiAobGhzeG1sKQog\nICAgICAgICAgICBhcHBlbmRYbWxDb21wYXJpc29uMShidWYsIG9wLCBsaHMs\nIHJocyk7CiAgICAgICAgZWxzZSAKICAgICAgICAgICAgYXBwZW5kWG1sQ29t\ncGFyaXNvbjEoYnVmLCBvcCwgcmhzLCBsaHMpOwogICAgfQoKICAgIC8qKgog\nICAgICogQXBwZW5kIGFuIHhtbCBjb21wYXJpc29uIHByZWRpY2F0ZS4KICAg\nICAqCiAgICAgKiBAcGFyYW0gYnVmIHRoZSBTUUwgYnVmZmVyIHRvIHdyaXRl\nIHRoZSBjb21wYXJpc29uCiAgICAgKiBAcGFyYW0gb3AgdGhlIGNvbXBhcmlz\nb24gb3BlcmF0aW9uIHRvIHBlcmZvcm0KICAgICAqIEBwYXJhbSBsaHMgdGhl\nIGxlZnQgaGFuZCBzaWRlIG9mIHRoZSBjb21wYXJpc29uIChtYXBzIHRvIHht\nbCBjb2x1bW4pCiAgICAgKiBAcGFyYW0gcmhzIHRoZSByaWdodCBoYW5kIHNp\nZGUgb2YgdGhlIGNvbXBhcmlzb24KICAgICAqLwogICAgcHJpdmF0ZSB2b2lk\nIGFwcGVuZFhtbENvbXBhcmlzb24xKFNRTEJ1ZmZlciBidWYsIFN0cmluZyBv\ncCwgCiAgICAgICAgICAgIEZpbHRlclZhbHVlIGxocywgRmlsdGVyVmFsdWUg\ncmhzKSB7CiAgICAgICAgYm9vbGVhbiBjYXN0cmhzID0gZmFsc2U7CiAgICAg\nICAgQ2xhc3MgcmMgPSBGaWx0ZXJzLndyYXAocmhzLmdldFR5cGUoKSk7CiAg\nICAgICAgaW50IHR5cGUgPSAwOwogICAgICAgIGlmIChyaHMuaXNDb25zdGFu\ndCgpKSB7CiAgICAgICAgICAgIHR5cGUgPSBnZXRKREJDVHlwZShKYXZhVHlw\nZXMuZ2V0VHlwZUNvZGUocmMpLCBmYWxzZSk7CiAgICAgICAgICAgIGNhc3Ry\naHMgPSB0cnVlOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBhcHBlbmRY\nbWxFeGlzdHMoYnVmLCBsaHMpOwoKICAgICAgICBidWYuYXBwZW5kKCIgIiku\nYXBwZW5kKG9wKS5hcHBlbmQoIiAiKTsKICAgICAgICAKICAgICAgICBidWYu\nYXBwZW5kKCIkIik7CiAgICAgICAgaWYgKGNhc3RyaHMpCiAgICAgICAgICAg\nIGJ1Zi5hcHBlbmQoIlBhcm0iKTsKICAgICAgICBlbHNlCiAgICAgICAgICAg\nIHJocy5hcHBlbmRUbyhidWYpOwogICAgICAgIAogICAgICAgIGJ1Zi5hcHBl\nbmQoIl0nIFBBU1NJTkcgIik7CiAgICAgICAgYXBwZW5kWG1sVmFyKGJ1Ziwg\nbGhzKTsKICAgICAgICBidWYuYXBwZW5kKCIsICIpOwogICAgICAgIAogICAg\nICAgIGlmIChjYXN0cmhzKQogICAgICAgICAgICBhcHBlbmRDYXN0KGJ1Ziwg\ncmhzLCB0eXBlKTsKICAgICAgICBlbHNlCiAgICAgICAgICAgIHJocy5hcHBl\nbmRUbyhidWYpOwogICAgICAgIAogICAgICAgIGJ1Zi5hcHBlbmQoIiBBUyBc\nIiIpOwogICAgICAgIGlmIChjYXN0cmhzKQogICAgICAgICAgICBidWYuYXBw\nZW5kKCJQYXJtIik7CiAgICAgICAgZWxzZQogICAgICAgICAgICByaHMuYXBw\nZW5kVG8oYnVmKTsKICAgICAgICBidWYuYXBwZW5kKCJcIikiKTsKICAgIH0K\nICAgIAogICAgLyoqCiAgICAgKiBBcHBlbmQgYW4geG1sIGNvbXBhcmlzb24g\ncHJlZGljYXRlLiAoYm90aCBvcGVyYW5kcyBtYXAgdG8geG1sIGNvbHVtbikK\nICAgICAqCiAgICAgKiBAcGFyYW0gYnVmIHRoZSBTUUwgYnVmZmVyIHRvIHdy\naXRlIHRoZSBjb21wYXJpc29uCiAgICAgKiBAcGFyYW0gb3AgdGhlIGNvbXBh\ncmlzb24gb3BlcmF0aW9uIHRvIHBlcmZvcm0KICAgICAqIEBwYXJhbSBsaHMg\ndGhlIGxlZnQgaGFuZCBzaWRlIG9mIHRoZSBjb21wYXJpc29uIChtYXBzIHRv\nIHhtbCBjb2x1bW4pCiAgICAgKiBAcGFyYW0gcmhzIHRoZSByaWdodCBoYW5k\nIHNpZGUgb2YgdGhlIGNvbXBhcmlzb24gKG1hcHMgdG8geG1sIGNvbHVtbikK\nICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIGFwcGVuZFhtbENvbXBhcmlzb24y\nKFNRTEJ1ZmZlciBidWYsIFN0cmluZyBvcCwgCiAgICAgICAgICAgIEZpbHRl\nclZhbHVlIGxocywgRmlsdGVyVmFsdWUgcmhzKSB7CiAgICAgICAgYXBwZW5k\nWG1sRXhpc3RzKGJ1ZiwgbGhzKTsKICAgICAgICAKICAgICAgICBidWYuYXBw\nZW5kKCIgIikuYXBwZW5kKG9wKS5hcHBlbmQoIiAiKTsKICAgICAgICAKICAg\nICAgICBidWYuYXBwZW5kKCIkIikuYXBwZW5kKHJocy5nZXRDb2x1bW5BbGlh\ncygKICAgICAgICAgICAgcmhzLmdldEZpZWxkTWFwcGluZygpLmdldENvbHVt\nbnMoKVswXSkpLgogICAgICAgICAgICBhcHBlbmQoIi8qLyIpOwogICAgICAg\nIHJocy5hcHBlbmRUbyhidWYpOwogICAgICAgIAogICAgICAgIGJ1Zi5hcHBl\nbmQoIl0nIFBBU1NJTkcgIik7CiAgICAgICAgYXBwZW5kWG1sVmFyKGJ1Ziwg\nbGhzKTsKICAgICAgICBidWYuYXBwZW5kKCIsICIpOwogICAgICAgIGFwcGVu\nZFhtbFZhcihidWYsIHJocyk7CiAgICAgICAgYnVmLmFwcGVuZCgiKSIpOwog\nICAgfQogICAgCiAgICBwcml2YXRlIHZvaWQgYXBwZW5kWG1sVmFyKFNRTEJ1\nZmZlciBidWYsIEZpbHRlclZhbHVlIHZhbCkgewogICAgICAgIGJ1Zi5hcHBl\nbmQodmFsLmdldENvbHVtbkFsaWFzKAogICAgICAgICAgICB2YWwuZ2V0Rmll\nbGRNYXBwaW5nKCkuZ2V0Q29sdW1ucygpWzBdKSkuCiAgICAgICAgICAgIGFw\ncGVuZCgiIEFTICIpLgogICAgICAgICAgICBhcHBlbmQoIlwiIikuYXBwZW5k\nKHZhbC5nZXRDb2x1bW5BbGlhcygKICAgICAgICAgICAgdmFsLmdldEZpZWxk\nTWFwcGluZygpLmdldENvbHVtbnMoKVswXSkpLgogICAgICAgICAgICBhcHBl\nbmQoIlwiIik7ICAgICAgICAKICAgIH0KICAgIAogICAgcHJpdmF0ZSB2b2lk\nIGFwcGVuZFhtbEV4aXN0cyhTUUxCdWZmZXIgYnVmLCBGaWx0ZXJWYWx1ZSB2\nYWwpIHsKICAgICAgICBidWYuYXBwZW5kKCJYTUxFWElTVFMoJyIpOwogICAg\nICAgIGJ1Zi5hcHBlbmQoIiQiKS5hcHBlbmQodmFsLmdldENvbHVtbkFsaWFz\nKAogICAgICAgICAgICB2YWwuZ2V0RmllbGRNYXBwaW5nKCkuZ2V0Q29sdW1u\ncygpWzBdKSkuCiAgICAgICAgICAgIGFwcGVuZCgiLypbIik7CiAgICAgICAg\ndmFsLmFwcGVuZFRvKGJ1Zik7ICAgICAgICAKICAgIH0KICAgIAogICAgLyoq\nCiAgICAgKiBhZGQgQ0FTVCBmb3IgYSBzY2FsYXIgZnVuY3Rpb24gd2hlcmUg\nb3BlcmFuZCBpcyBhIHBhcmFtCiAgICAgKiAKICAgICAqIEBwYXJhbSBmdW5j\nIG9yaWdpbmFsIHN0cmluZwogICAgICogQHBhcmFtIHRhcmdldCBzdWJzdHJp\nbmcgdG8gbG9vayBmb3IKICAgICAqIEBwYXJhbSBhc1N0cmluZyAKICAgICAq\nIEByZXR1cm4gdXBkYXRlZCBzdHJpbmcgKGZ1bmMpCiAgICAgKi8KICAgIHBy\naXZhdGUgU3RyaW5nIGFkZENhc3RBc1N0cmluZyhTdHJpbmcgZnVuYywgU3Ry\naW5nIHRhcmdldCwgCiAgICAgICAgICAgIFN0cmluZyBhc1N0cmluZykgewog\nICAgICAgIFN0cmluZyBmc3RyaW5nID0gZnVuYzsKICAgICAgICBpZiAoZnVu\nYy5pbmRleE9mKHRhcmdldCkgIT0gLTEpCiAgICAgICAgICAgIGZzdHJpbmcg\nPSBTdHJpbmdzLnJlcGxhY2UoCiAgICAgICAgICAgICAgICBmdW5jLCB0YXJn\nZXQsICJDQVNUKCIgKyB0YXJnZXQgKyBhc1N0cmluZyArICIpIik7CiAgICAg\nICAgcmV0dXJuIGZzdHJpbmc7CiAgICB9CgogICAgLyoqCiAgICAgKiBhZGQg\nQ0FTVCBmb3IgYSBmdW5jdGlvbiBvcGVyYXRvciB3aGVyZSBvcGVyYW5kIGlz\nIGEgcGFyYW0KICAgICAqIAogICAgICogQHBhcmFtIGZ1bmMgZnVuY3Rpb24g\nbmFtZQogICAgICogQHBhcmFtIHZhbCB0eXBlCiAgICAgKiBAcmV0dXJuIHVw\nZGF0ZWQgc3RyaW5nIChmdW5jKQogICAgICovCiAgICBwdWJsaWMgU3RyaW5n\nIGFkZENhc3RBc1R5cGUoU3RyaW5nIGZ1bmMsIFZhbCB2YWwpIHsKICAgICAg\nICBTdHJpbmcgZnN0cmluZyA9IG51bGw7CiAgICAgICAgU3RyaW5nIHR5cGUg\nPSBnZXRUeXBlTmFtZShnZXRKREJDVHlwZShKYXZhVHlwZXMuZ2V0VHlwZUNv\nZGUodmFsCiAgICAgICAgICAgIC5nZXRUeXBlKCkpLCBmYWxzZSkpOwogICAg\nICAgIGlmIChTdHJpbmcuY2xhc3MuZXF1YWxzKHZhbC5nZXRUeXBlKCkpKQog\nICAgICAgICAgICB0eXBlID0gdHlwZSArICIoIiArIGNoYXJhY3RlckNvbHVt\nblNpemUgKyAiKSI7CiAgICAgICAgZnN0cmluZyA9ICJDQVNUKD8gQVMgIiAr\nIHR5cGUgKyAiKSI7CiAgICAgICAgcmV0dXJuIGZzdHJpbmc7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGJhdGNoIGxpbWl0LiBJZiB0aGUg\nYmF0Y2hMaW1pdCBpcyAtMSwgY2hhbmdlIGl0IHRvIDEwMCBmb3IKICAgICAq\nIGJlc3QgcGVyZm9ybWFuY2UKICAgICAqLwogICAgcHVibGljIGludCBnZXRC\nYXRjaExpbWl0KCkgewogICAgICAgIGludCBsaW1pdCA9IHN1cGVyLmdldEJh\ndGNoTGltaXQoKTsKICAgICAgICBpZiAobGltaXQgPT0gVU5MSU1JVEVEKSB7\nCiAgICAgICAgICAgIGxpbWl0ID0gZGVmYXVsdEJhdGNoTGltaXQ7CiAgICAg\nICAgICAgIGlmIChsb2cuaXNUcmFjZUVuYWJsZWQoKSkKICAgICAgICAgICAg\nICAgIGxvZy50cmFjZShfbG9jLmdldCgiYmF0Y2hfdW5saW1pdCIsIFN0cmlu\nZy52YWx1ZU9mKGxpbWl0KSkpOwogICAgICAgIH0KICAgICAgICByZXR1cm4g\nbGltaXQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGNvcnJl\nY3QgQ0FTVCBmdW5jdGlvbiBzeW50YXgKICAgICAqIAogICAgICogQHBhcmFt\nIHZhbCBvcGVyYW5kIG9mIGNhc3QKICAgICAqIEBwYXJhbSBmdW5jIG9yaWdp\nbmFsIHN0cmluZwogICAgICogQHJldHVybiBhIFN0cmluZyB3aXRoIHRoZSBj\nb3JyZWN0IENBU1QgZnVuY3Rpb24gc3ludGF4CiAgICAgKi8KICAgIHB1Ymxp\nYyBTdHJpbmcgZ2V0Q2FzdEZ1bmN0aW9uKFZhbCB2YWwsIFN0cmluZyBmdW5j\nKSB7CiAgICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIExpdCB8fCB2YWwgaW5z\ndGFuY2VvZiBQYXJhbSkgewogICAgICAgICAgICBpZiAoZnVuYy5pbmRleE9m\nKCJWQVJDSEFSIikgPT0gLTEpIHsKICAgICAgICAgICAgICAgIGZ1bmMgPSBh\nZGRDYXN0QXNTdHJpbmcoZnVuYywgInswfSIsICIgQVMgVkFSQ0hBUigiICsg\ndmFyY2hhckNhc3RMZW5ndGggKyAiKSIpOwogICAgICAgICAgICB9CiAgICAg\nICAgfQogICAgICAgIHJldHVybiBmdW5jOwogICAgfQoKICAgIC8qKgogICAg\nICogUmV0dXJuIHRoZSBjb3JyZWN0IENBU1QgZnVuY3Rpb24gc3ludGF4CiAg\nICAgKiAKICAgICAqIEBwYXJhbSB2YWwgb3BlcmFuZCBvZiBjYXN0CiAgICAg\nKiBAcGFyYW0gZnVuYyBvcmlnaW5hbCBzdHJpbmcKICAgICAqIEBwYXJhbSBj\nb2wgZGF0YWJhc2UgY29sdW1uCiAgICAgKiBAcmV0dXJuIGEgU3RyaW5nIHdp\ndGggdGhlIGNvcnJlY3QgQ0FTVCBmdW5jdGlvbiBzeW50YXgKICAgICAqLwog\nICAgcHVibGljIFN0cmluZyBnZXRDYXN0RnVuY3Rpb24oVmFsIHZhbCwgU3Ry\naW5nIGZ1bmMsIENvbHVtbiBjb2wpIHsKICAgICAgICBib29sZWFuIGRvQ2Fz\ndCA9IGZhbHNlOwogICAgICAgIGlmICh2YWwgaW5zdGFuY2VvZiBMaXQgfHwg\ndmFsIGluc3RhbmNlb2YgUGFyYW0pIHsKICAgICAgICAgICAgZG9DYXN0ID0g\ndHJ1ZTsKICAgICAgICB9CiAgICAgICAgLy8gY2FzdCBhbnl0aGluZyBub3Qg\nYWxyZWFkeSBhIFZBUkNIQVIgdG8gVkFSQ0hBUgogICAgICAgIGlmIChjb2wu\nZ2V0VHlwZSgpICE9IFR5cGVzLlZBUkNIQVIpIHsKICAgICAgICAgICAgZG9D\nYXN0ID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgaWYgKGRvQ2FzdCA9PSB0\ncnVlKSB7CiAgICAgICAgICAgIGlmIChmdW5jLmluZGV4T2YoIlZBUkNIQVIi\nKSA9PSAtMSkgewogICAgICAgICAgICAgICAgZnVuYyA9IGFkZENhc3RBc1N0\ncmluZyhmdW5jLCAiezB9IiwgIiBBUyBWQVJDSEFSKCIgKyB2YXJjaGFyQ2Fz\ndExlbmd0aCArICIpIik7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAg\nICAgcmV0dXJuIGZ1bmM7CiAgICB9CgogICAgcHVibGljIHZvaWQgaW5kZXhP\nZihTUUxCdWZmZXIgYnVmLCBGaWx0ZXJWYWx1ZSBzdHIsIEZpbHRlclZhbHVl\nIGZpbmQsCiAgICAgICAgICAgIEZpbHRlclZhbHVlIHN0YXJ0KSB7CiAgICAg\nICAgaWYgKGZpbmQuZ2V0VmFsdWUoKSAhPSBudWxsKSB7IC8vIG5vbiBjb25z\ndGFudHMKICAgICAgICAgICAgYnVmLmFwcGVuZCgiKExPQ0FURShDQVNUKCgi\nKTsKICAgICAgICAgICAgZmluZC5hcHBlbmRUbyhidWYpOwogICAgICAgICAg\nICBidWYuYXBwZW5kKCIpIEFTIFZBUkNIQVIoMTAwMCkpLCAiKTsKICAgICAg\nICB9IGVsc2UgewogICAgICAgICAgICAvLyB0aGlzIGlzIGEgY29uc3RhbnQK\nICAgICAgICAgICAgYnVmLmFwcGVuZCgiKExPQ0FURSgiKTsKICAgICAgICAg\nICAgZmluZC5hcHBlbmRUbyhidWYpOwogICAgICAgICAgICBidWYuYXBwZW5k\nKCIsICIpOwogICAgICAgIH0KICAgICAgICBpZiAoc3RyLmdldFZhbHVlKCkg\nIT0gbnVsbCkgewogICAgICAgICAgICBidWYuYXBwZW5kKCJDQVNUKCgiKTsK\nICAgICAgICAgICAgc3RyLmFwcGVuZFRvKGJ1Zik7CiAgICAgICAgICAgIGJ1\nZi5hcHBlbmQoIikgQVMgVkFSQ0hBUigxMDAwKSkiKTsKICAgICAgICB9IGVs\nc2UgewogICAgICAgICAgICBzdHIuYXBwZW5kVG8oYnVmKTsKICAgICAgICB9\nCiAgICAgICAgaWYgKHN0YXJ0ICE9IG51bGwpIHsKICAgICAgICAgICAgaWYg\nKHN0YXJ0LmdldFZhbHVlKCkgPT0gbnVsbCkgewogICAgICAgICAgICAgICAg\nYnVmLmFwcGVuZCgiLCBDQVNUKCgiKTsKICAgICAgICAgICAgICAgIHN0YXJ0\nLmFwcGVuZFRvKGJ1Zik7CiAgICAgICAgICAgICAgICBidWYuYXBwZW5kKCIp\nIEFTIElOVEVHRVIpICsgMSIpOwogICAgICAgICAgICB9IGVsc2UgewogICAg\nICAgICAgICAgICAgYnVmLmFwcGVuZCgiLCAiKTsKICAgICAgICAgICAgICAg\nIHN0YXJ0LmFwcGVuZFRvKGJ1Zik7CiAgICAgICAgICAgIH0KICAgICAgICB9\nCiAgICAgICAgYnVmLmFwcGVuZCgiKSAtIDEpIik7CiAgICB9CiAgICAKICAg\nIC8qKiAKICAgICAqIENhc3QgdGhlIHNwZWNpZmllZCB2YWx1ZSB0byB0aGUg\nc3BlY2lmaWVkIHR5cGUuCiAgICAgKgogICAgICogQHBhcmFtIGJ1ZiB0aGUg\nYnVmZmVyIHRvIGFwcGVuZCB0aGUgY2FzdCB0bwogICAgICogQHBhcmFtIHZh\nbCB0aGUgdmFsdWUgdG8gY2FzdAogICAgICogQHBhcmFtIHR5cGUgdGhlIHR5\ncGUgb2YgdGhlIGNhc2UsIGUuZy4ge0BsaW5rIFR5cGVzI05VTUVSSUN9CiAg\nICAgKi8KICAgIHB1YmxpYyB2b2lkIGFwcGVuZENhc3QoU1FMQnVmZmVyIGJ1\nZiwgRmlsdGVyVmFsdWUgdmFsLCBpbnQgdHlwZSkgewoKICAgICAgICAvLyBD\nb252ZXJ0IHRoZSBjYXN0IGZ1bmN0aW9uOiAiQ0FTVCh7MH0gQVMgezF9KSIK\nICAgICAgICBpbnQgZmlyc3RQYXJhbSA9IGNhc3RGdW5jdGlvbi5pbmRleE9m\nKCJ7MH0iKTsKICAgICAgICBTdHJpbmcgcHJlID0gY2FzdEZ1bmN0aW9uLnN1\nYnN0cmluZygwLCBmaXJzdFBhcmFtKTsgLy8gIkNBU1QoIgogICAgICAgIFN0\ncmluZyBtaWQgPSBjYXN0RnVuY3Rpb24uc3Vic3RyaW5nKGZpcnN0UGFyYW0g\nKyAzKTsKICAgICAgICBpbnQgc2Vjb25kUGFyYW0gPSBtaWQuaW5kZXhPZigi\nezF9Iik7CiAgICAgICAgU3RyaW5nIHBvc3Q7CiAgICAgICAgaWYgKHNlY29u\nZFBhcmFtID4gLTEpIHsKICAgICAgICAgICAgcG9zdCA9IG1pZC5zdWJzdHJp\nbmcoc2Vjb25kUGFyYW0gKyAzKTsgLy8gIikiCiAgICAgICAgICAgIG1pZCA9\nIG1pZC5zdWJzdHJpbmcoMCwgc2Vjb25kUGFyYW0pOyAvLyAiIEFTICIKICAg\nICAgICB9IGVsc2UKICAgICAgICAgICAgcG9zdCA9ICIiOwoKICAgICAgICAv\nLyBObyBuZWVkIHRvIGFkZCBDQVNUIGlmIHRoZSB2YWx1ZSBpcyBhIGNvbnN0\nYW50CiAgICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIExpdCB8fCB2YWwgaW5z\ndGFuY2VvZiBQYXJhbSkgewogICAgICAgICAgICBidWYuYXBwZW5kKHByZSk7\nCiAgICAgICAgICAgIHZhbC5hcHBlbmRUbyhidWYpOwogICAgICAgICAgICBi\ndWYuYXBwZW5kKG1pZCk7CiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoZ2V0VHlw\nZU5hbWUodHlwZSkpOwogICAgICAgICAgICBhcHBlbmRMZW5ndGgoYnVmLCB0\neXBlKTsKICAgICAgICAgICAgYnVmLmFwcGVuZChwb3N0KTsKICAgICAgICB9\nIGVsc2UgewogICAgICAgICAgICB2YWwuYXBwZW5kVG8oYnVmKTsKICAgICAg\nICAgICAgU3RyaW5nIHNxbFN0cmluZyA9IGJ1Zi5nZXRTUUwoZmFsc2UpOwog\nICAgICAgICAgICBpZiAoc3FsU3RyaW5nLmVuZHNXaXRoKCI/IikpIHsKICAg\nICAgICAgICAgICAgIC8vIGNhc2UgIig/IiAtIGNvbnZlcnQgdG8gIkNBU1Qo\nPyBBUyB0eXBlIgogICAgICAgICAgICAgICAgU3RyaW5nIHR5cGVOYW1lID0g\nZ2V0VHlwZU5hbWUodHlwZSk7CiAgICAgICAgICAgICAgICBpZiAoU3RyaW5n\nLmNsYXNzLmVxdWFscyh2YWwuZ2V0VHlwZSgpKSkKICAgICAgICAgICAgICAg\nICAgICB0eXBlTmFtZSA9IHR5cGVOYW1lICsgIigiICsgY2hhcmFjdGVyQ29s\ndW1uU2l6ZSArICIpIjsKICAgICAgICAgICAgICAgIFN0cmluZyBzdHIgPSAi\nQ0FTVCg/IEFTICIgKyB0eXBlTmFtZSArICIpIjsKICAgICAgICAgICAgICAg\nIGJ1Zi5yZXBsYWNlU3FsU3RyaW5nKHNxbFN0cmluZy5sZW5ndGgoKSAtIDEs\nCiAgICAgICAgICAgICAgICAgICAgICAgIHNxbFN0cmluZy5sZW5ndGgoKSwg\nc3RyKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAvKioK\nICAgICAqIENyZWF0ZSBhbiBpbmRleCBpZiBuZWNlc3NhcnkgZm9yIHNvbWUg\nZGF0YWJhc2UgdGFibGVzCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIGNyZWF0\nZUluZGV4SWZOZWNlc3NhcnkoU2NoZW1hIHNjaGVtYSwgU3RyaW5nIHRhYmxl\nLAogICAgICAgIENvbHVtbiBwa0NvbHVtbikgewogICAgICAgIGNyZWF0ZUlu\nZGV4SWZOZWNlc3Nhcnkoc2NoZW1hLCBEQklkZW50aWZpZXIubmV3VGFibGUo\ndGFibGUpLCAKICAgICAgICAgICAgcGtDb2x1bW4pOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIGNyZWF0ZUluZGV4SWZOZWNlc3NhcnkoU2NoZW1hIHNjaGVt\nYSwgREJJZGVudGlmaWVyIHRhYmxlLAogICAgICAgICAgICBDb2x1bW4gcGtD\nb2x1bW4pIHsKICAgICAgICBpZiAoaXNEQjJaT1NWOHhPckxhdGVyKCkpIHsK\nICAgICAgICAgICAgLy8gYnVpbGQgdGhlIGluZGV4IGZvciB0aGUgc2VxdWVu\nY2UgdGFibGVzCiAgICAgICAgICAgIC8vIHRoZSBpbmRleCBuYW1lIHdpbGwg\nYmUgdGhlIGZ1bGx5IHF1YWxpZmllZCB0YWJsZSBuYW1lICsgX0lEWAogICAg\nICAgICAgICBUYWJsZSB0YWIgPSBzY2hlbWEuZ2V0VGFibGUodGFibGUpOwog\nICAgICAgICAgICBEQklkZW50aWZpZXIgZnVsbElkeElkID0gdGFiLmdldEZ1\nbGxJZGVudGlmaWVyKCkuY2xvbmUoKTsKICAgICAgICAgICAgREJJZGVudGlm\naWVyIHVuUXVhbGlmaWVkTmFtZSA9IERCSWRlbnRpZmllci5hcHBlbmQoZnVs\nbElkeElkLmdldFVucXVhbGlmaWVkTmFtZSgpLCAiSURYIik7CiAgICAgICAg\nICAgIGZ1bGxJZHhJZC5zZXROYW1lKGdldFZhbGlkSW5kZXhOYW1lKHVuUXVh\nbGlmaWVkTmFtZSwgdGFiKSk7CiAgICAgICAgICAgIEluZGV4IGlkeCA9IHRh\nYi5hZGRJbmRleChmdWxsSWR4SWQpOwogICAgICAgICAgICBpZHguc2V0VW5p\ncXVlKHRydWUpOwogICAgICAgICAgICBpZHguYWRkQ29sdW1uKHBrQ29sdW1u\nKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIFN0cmluZyBudWxsU2FmZShT\ndHJpbmcgcykgewogICAgICAgIHJldHVybiBzID09IG51bGwgPyAiIiA6IHM7\nCiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgYm9vbGVhbiBpc0Zh\ndGFsRXhjZXB0aW9uKGludCBzdWJ0eXBlLCBTUUxFeGNlcHRpb24gZXgpIHsK\nICAgICAgICBTdHJpbmcgZXJyb3JTdGF0ZSA9IGV4LmdldFNRTFN0YXRlKCk7\nCiAgICAgICAgaW50IGVycm9yQ29kZSA9IGV4LmdldEVycm9yQ29kZSgpOwog\nICAgICAgIGlmIChlcnJvckNvZGUgPT0gLTk1MiAmJiAiNTcwMTQiLmVxdWFs\ncyhlcnJvclN0YXRlKSkKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAg\nICAgIC8qCiAgICAgICAgICogQ2hlY2sgaWYgdGhpcyBFeGNlcHRpb24gd2Fz\nIGdlbmVyYXRlZCBieSBhIGxvY2sgdGltZW91dCBleHBpcmF0aW9uLgogICAg\nICAgICAqIFRoZSBmb2xsb3dpbmcgY3JpdGVyaWEgYXJlIHVzZWQgdG8gZGV0\nZXJtaW5lIHRoaXM6CiAgICAgICAgICogCiAgICAgICAgICogREIyIExVVyBJ\nbmZvY2VudGVyOiBTUUxTVEFURT01NzAzMyB3aXRoIHJlYXNvbiBjb2RlICI4\nMCIgaW5kaWNhdGVzCiAgICAgICAgICogdGhlIHN0YXRlbWVudCBmYWlsZWQg\nZHVlIHRvIHRpbWVvdXQuIERCMiBmb3Igei9PUyBTdG9yZWQgUHJvY2VkdXJl\nczoKICAgICAgICAgKiBUaHJvdWdoIHRoZSBDQUxMIGFuZCBCZXlvbmQsIHBh\nZ2UgMTg4OiBBbiBFcnJvckNvZGUgb2YgLTkxMyB3aXRoCiAgICAgICAgICog\nU1FMRVJSIDAwQzkwMDhFIG1lYW5zIGEgdGltZW91dCBoYXMgb2NjdXJyZWQu\nCiAgICAgICAgICovCiAgICAgICAgaWYgKHN1YnR5cGUgPT0gU3RvcmVFeGNl\ncHRpb24uTE9DSyAmJiAiNTcwMzMiLmVxdWFscyhlcnJvclN0YXRlKQogICAg\nICAgICAgICAmJiAoKGV4LmdldE1lc3NhZ2UoKS5pbmRleE9mKCI4MCIpICE9\nIC0xKSAKICAgICAgICAgICAgICAgIHx8IChlcnJvckNvZGUgPT0gLTkxMyAm\nJiBleC5nZXRNZXNzYWdlKCkuY29udGFpbnMoIjAwQzkwMDhFIikpKSkgewog\nICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSAKICAgICAgICBp\nZiAoKHN1YnR5cGUgPT0gU3RvcmVFeGNlcHRpb24uUVVFUlkgJiYgIjU3MDE0\nIi5lcXVhbHMoZXJyb3JTdGF0ZSkgJiYKICAgICAgICAgICAgKGVycm9yQ29k\nZSA9PSAtOTUyIHx8IGVycm9yQ29kZSA9PSAtOTA1KSkpIHsKICAgICAgICAg\nICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gc3Vw\nZXIuaXNGYXRhbEV4Y2VwdGlvbihzdWJ0eXBlLCBleCk7CiAgICB9CiAgICAK\nICAgIEBPdmVycmlkZQogICAgcHJvdGVjdGVkIHZvaWQgc2V0RGVsaW1pdGVk\nQ2FzZShEYXRhYmFzZU1ldGFEYXRhIG1ldGFEYXRhKSB7CiAgICAgICAgZGVs\naW1pdGVkQ2FzZSA9IFNDSEVNQV9DQVNFX1BSRVNFUlZFOwogICAgfQogICAg\nCiAgICAvKioKICAgICAqIFRoZSBUeXBlIDIgSkRCQyBEcml2ZXIgbWF5IHRo\ncm93IGFuIFNRTEV4Y2VwdGlvbiB3aGVuIHByb3ZpZGVkIGEgbm9uLQogICAg\nICogemVybyB0aW1lb3V0IGlmIHdlJ3JlIGNvbm5lY3RlZCB0byBaL09TLiBU\naGUgU1FMRXhjZXB0aW9uIHNob3VsZCBiZQogICAgICogbG9nZ2VkIGJ1dCBu\nb3QgdGhyb3duLgogICAgICovCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2\nb2lkIHNldFF1ZXJ5VGltZW91dChQcmVwYXJlZFN0YXRlbWVudCBzdG1udCwg\naW50IHRpbWVvdXQpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAg\nICAgICAgaWYoaXNEQjJaT1NWOHhPckxhdGVyKCkpIHsgCiAgICAgICAgICAg\nIHRyeSB7IAogICAgICAgICAgICAgICAgc3VwZXIuc2V0UXVlcnlUaW1lb3V0\nKHN0bW50LCB0aW1lb3V0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBj\nYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgIGlmIChs\nb2cuaXNUcmFjZUVuYWJsZWQoKSkgewogICAgICAgICAgICAgICAgICAgIGxv\nZy50cmFjZShfbG9jLmdldCgiZXJyb3Itc2V0dGluZy1xdWVyeS10aW1lb3V0\nIiwgdGltZW91dCwKICAgICAgICAgICAgICAgICAgICAgICAgZS5nZXRNZXNz\nYWdlKCkpLCBlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQog\nICAgICAgIH0KICAgICAgICBlbHNlIHsgCiAgICAgICAgICAgIHN1cGVyLnNl\ndFF1ZXJ5VGltZW91dChzdG1udCwgdGltZW91dCk7CiAgICAgICAgfQogICAg\nfQoKICAgIC8qKgogICAgICogU2V0IHRoZSBnaXZlbiB2YWx1ZSBhcyBhIHBh\ncmFtZXRlciB0byB0aGUgc3RhdGVtZW50LgogICAgICovCiAgICBwdWJsaWMg\ndm9pZCBzZXRCeXRlcyhQcmVwYXJlZFN0YXRlbWVudCBzdG1udCwgaW50IGlk\neCwgYnl0ZVtdIHZhbCwKICAgICAgICBDb2x1bW4gY29sKQogICAgICAgIHRo\ncm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIC8vIGZvciBEQjIsIGlmIHRo\nZSBjb2x1bW4gd2FzIGRlZmluZWQgYXMgQ0hBUiBmb3IgQklUIERBVEEsIHRo\nZW4KICAgICAgICAvLyB3ZSB3YW50IHRvIHVzZSB0aGUgc2V0Qnl0ZXMgaW4g\nc3RlYWQgb2YgdGhlIHNldEJpbmFyeVN0cmVhbQogICAgICAgIGlmICh1c2VT\nZXRCeXRlc0ZvckJsb2JzIAogICAgICAgICAgICAgICAgfHwgKCFEQklkZW50\naWZpZXIuaXNOdWxsKGNvbC5nZXRUeXBlSWRlbnRpZmllcigpKSAmJiAKICAg\nICAgICAgICAgICAgIGNvbC5nZXRUeXBlSWRlbnRpZmllcigpLmdldE5hbWUo\nKS5jb250YWlucygiQklUIERBVEEiKSkpIHsKICAgICAgICAgICAgc3RtbnQu\nc2V0Qnl0ZXMoaWR4LCB2YWwpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAg\nICAgIHNldEJpbmFyeVN0cmVhbShzdG1udCwgaWR4LCBuZXcgQnl0ZUFycmF5\nSW5wdXRTdHJlYW0odmFsKSwgdmFsLmxlbmd0aCwgY29sKTsKICAgICAgICB9\nCiAgICB9CgogICAgLyoqCiAgICAgKiBDb252ZXJ0IHRoZSBzcGVjaWZpZWQg\nY29sdW1uIG9mIHRoZSBTUUwgUmVzdWx0U2V0IHRvIHRoZSBwcm9wZXIKICAg\nICAqIGphdmEgdHlwZS4KICAgICAqLwogICAgcHVibGljIGJ5dGVbXSBnZXRC\neXRlcyhSZXN1bHRTZXQgcnMsIGludCBjb2x1bW4pCiAgICAgICAgdGhyb3dz\nIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgaWYgKHVzZUdldEJ5dGVzRm9yQmxv\nYnMpIHsKICAgICAgICAgICAgcmV0dXJuIHJzLmdldEJ5dGVzKGNvbHVtbik7\nCiAgICAgICAgfQogICAgICAgIGlmICh1c2VHZXRPYmplY3RGb3JCbG9icykg\newogICAgICAgICAgICByZXR1cm4gKGJ5dGVbXSkgcnMuZ2V0T2JqZWN0KGNv\nbHVtbik7CiAgICAgICAgfQoKICAgICAgICAvLyBBdCB0aGlzIHBvaW50IHdl\nIGRvbid0IGhhdmUgYW55IGlkZWEgaWYgdGhlIERCMiBjb2x1bW4gd2FzIGRl\nZmluZWQgYXMKICAgICAgICAvLyAgICAgYSBibG9iIG9yIGlmIGl0IHdhcyBk\nZWZpbmVkIGFzIENIQVIgZm9yIEJJVCBEQVRBLgogICAgICAgIC8vIEZpcnN0\nIHRyeSBhcyBhIGJsb2IsIGlmIHRoYXQgZG9lc24ndCB3b3JrLCB0aGVuIHRy\neSBhcyBDSEFSIGZvciBCSVQgREFUQQogICAgICAgIC8vIElmIHRoYXQgZG9l\nc24ndCB3b3JrLCB0aGVuIGdvIGFoZWFkIGFuZCB0aHJvdyB0aGUgZmlyc3Qg\nZXhjZXB0aW9uCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgQmxvYiBibG9i\nID0gZ2V0QmxvYihycywgY29sdW1uKTsKICAgICAgICAgICAgaWYgKGJsb2Ig\nPT0gbnVsbCkgewogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAg\nICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIGludCBsZW5ndGgg\nPSAoaW50KSBibG9iLmxlbmd0aCgpOwogICAgICAgICAgICBpZiAobGVuZ3Ro\nID09IDApIHsKICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAg\nICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICByZXR1cm4gYmxvYi5n\nZXRCeXRlcygxLCBsZW5ndGgpOwogICAgICAgIH0KICAgICAgICBjYXRjaCAo\nU1FMRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgICAgIHJldHVybiBycy5nZXRCeXRlcyhjb2x1bW4pOwogICAgICAgICAg\nICB9CiAgICAgICAgICAgIGNhdGNoIChTUUxFeGNlcHRpb24gZTIpIHsKICAg\nICAgICAgICAgICAgIHRocm93IGU7ICAgICAgICAgICAgICAgIAogICAgICAg\nICAgICB9CiAgICAgICAgfQogICAgfQp9Cg==\n","encoding":"base64"}

