{"sha":"11ed12367b73292c05fc90fab4431602e0a27933","node_id":"MDQ6QmxvYjIwNjM2NDoxMWVkMTIzNjdiNzMyOTJjMDVmYzkwZmFiNDQzMTYwMmUwYTI3OTMz","size":17595,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/11ed12367b73292c05fc90fab4431602e0a27933","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWw7CgppbXBvcnQg\namF2YS5sYW5nLnJlZmxlY3QuQ29uc3RydWN0b3I7CmltcG9ydCBqYXZhLm1h\ndGguQmlnRGVjaW1hbDsKaW1wb3J0IGphdmEubWF0aC5CaWdJbnRlZ2VyOwpp\nbXBvcnQgamF2YS5zcWwuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmEuc3FsLlBy\nZXBhcmVkU3RhdGVtZW50OwppbXBvcnQgamF2YS5zcWwuUmVzdWx0U2V0Owpp\nbXBvcnQgamF2YS5zcWwuU1FMRXhjZXB0aW9uOwppbXBvcnQgamF2YS5zcWwu\nVHlwZXM7CmltcG9ydCBqYXZhLnV0aWwuQXJyYXlzOwoKaW1wb3J0IG9yZy5h\ncGFjaGUuY29tbW9ucy5sYW5nLlN0cmluZ1V0aWxzOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMuaWRlbnRpZmllci5EQklkZW50aWZpZXIuREJJ\nZGVudGlmaWVyVHlwZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLnNjaGVtYS5Db2x1bW47CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5zY2hlbWEuRm9yZWlnbktleTsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5qZGJjLnNjaGVtYS5JbmRleDsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5qZGJjLnNjaGVtYS5QcmltYXJ5S2V5OwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmpkYmMuc2NoZW1hLlRhYmxlOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLmpkYmMuc2NoZW1hLlVuaXF1ZTsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5saWIuamRiYy5EZWxlZ2F0aW5nQ29ubmVjdGlvbjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5Db25jcmV0ZUNsYXNzR2Vu\nZXJhdG9yOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkxv\nY2FsaXplcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkphdmFU\neXBlczsKCi8qKgogKiBEaWN0aW9uYXJ5IGZvciBTeWJhc2UuCiAqICBUaGUg\nbWFpbiBwb2ludCBvZiBpbnRlcmVzdCBpcyB0aGF0IGJ5IGRlZmF1bHQsIGV2\nZXJ5IHRhYmxlCiAqIHRoYXQgaXMgY3JlYXRlZCB3aWxsIGhhdmUgYSB1bmlx\ndWUgY29sdW1uIG5hbWVkICJVTlFfSU5ERVgiIG9mCiAqIHRoZSAiSURFTlRJ\nVFkiIHR5cGUuIE9wZW5KUEEgd2lsbCBub3QgZXZlciB1dGlsaXplIHRoaXMg\nY29sdW1uLiBIb3dldmVyLAogKiBkdWUgdG8gaW50ZXJuYWwgU3liYXNlIHJl\nc3RyaWN0aW9ucywgdGhpcyBjb2x1bW4gaXMgcmVxdWlyZWQKICogaW4gb3Jk\nZXIgdG8gc3VwcG9ydCBwZXNzaW1pc3RpYyAoZGF0YXN0b3JlKSBsb2NraW5n\nLCBzaW5jZSBTeWJhc2UKICogcmVxdWlyZXMgdGhhdCBhbnkgdGFibGVzIGlu\nIGEgIlNFTEVDVCAuLi4gRk9SIFVQREFURSIgY2xhdXNlIGhhdmUKICogYSB1\nbmlxdWUgaW5kZXggdGhhdCBpcyA8c3Ryb25nPm5vdDwvc3Ryb25nPiBpbmNs\ndWRlZCBpbiB0aGUgbGlzdAogKiBvZiBjb2x1bW5zLCBhcyBkZXNjcmliZWQg\naW4gdGhlCiAqIDxhIGhyZWY9Imh0dHA6Ly93d3cuc3liYXNlLmNvbS9kZXRh\naWwvMSw2OTA0LDEwMjMwNzUsMDAuaHRtbCIKICogPlN5YmFzZSBkb2N1bWVu\ndGF0aW9uPC9hPi4gVGhpcyBiZWhhdmlvciBjYW4gYmUgc3VycHJlc3NlZCBi\neSBzZXR0aW5nIHRoZQogKiBkaWN0aW9uYXJ5IHByb3BlcnR5IDxjb2RlPkNy\nZWF0ZUlkZW50aXR5Q29sdW1uPWZhbHNlPC9jb2RlPi4gVGhlCiAqIG5hbWUg\nb2YgdGhlIHVuaXF1ZSBjb2x1bW4gY2FuIGJlIGNoYW5nZWQgYnkgc2V0dGlu\nZyB0aGUgcHJvcGVydHkKICogPGNvZGU+SWRlbnRpdHlDb2x1bW5OYW1lPUNP\nTFVNTl9OQU1FPC9jb2RlPi4KICogIEEgZ29vZCBTeWJhc2UgdHlwZSByZWZl\ncmVuY2UgaXMgY2FuIGJlIGZvdW5kIDxhCiAqIGhyZWY9Imh0dHA6Ly93d3cu\naXNwaXJlci5jb20vZG9jL3NxbHdheXMzNi9zeWJhc2Uvc3liX2R0eXBlcy5o\ndG1sIj5oZXJlPC9hPi4KICovCnB1YmxpYyBjbGFzcyBTeWJhc2VEaWN0aW9u\nYXJ5CiAgICBleHRlbmRzIEFic3RyYWN0U1FMU2VydmVyRGljdGlvbmFyeSB7\nCgogICAgcHJpdmF0ZSBzdGF0aWMgTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6\nZXIuZm9yUGFja2FnZQogICAgICAgIChTeWJhc2VEaWN0aW9uYXJ5LmNsYXNz\nKTsKCiAgICBwcml2YXRlIHN0YXRpYyBDb25zdHJ1Y3RvcjxTeWJhc2VDb25u\nZWN0aW9uPiBzeWJhc2VDb25uZWN0aW9uSW1wbDsKCiAgICBzdGF0aWMgewog\nICAgICAgIHRyeSB7CiAgICAgICAgICAgIHN5YmFzZUNvbm5lY3Rpb25JbXBs\nID0gQ29uY3JldGVDbGFzc0dlbmVyYXRvci5nZXRDb25jcmV0ZUNvbnN0cnVj\ndG9yKFN5YmFzZUNvbm5lY3Rpb24uY2xhc3MsIAogICAgICAgICAgICAgICAg\nICAgIENvbm5lY3Rpb24uY2xhc3MpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2Vw\ndGlvbiBlKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb25Jbklu\naXRpYWxpemVyRXJyb3IoZSk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgog\nICAgICogSWYgdHJ1ZSwgdGhlbiB3aGVuZXZlciB0aGUgPGNvZGU+c2NoZW1h\ndG9vbDwvY29kZT4gY3JlYXRlcyBhCiAgICAgKiB0YWJsZSwgaXQgd2lsbCBh\ncHBlbmQgYW4gYWRkaXRpb25hbCBJREVOVElUWSBjb2x1bW4gdG8gdGhlCiAg\nICAgKiB0YWJsZSdzIGNyZWF0aW9uIFNRTC4gVGhpcyBpcyBzbyBTeWJhc2Ug\nd2lsbCBiZSBhYmxlIHRvCiAgICAgKiBwZXJmb3JtIDxjb2RlPlNFTEVDVC4u\nLkZPUiBVUERBVEU8L2NvZGU+IHN0YXRlbWVudHMuCiAgICAgKi8KICAgIHB1\nYmxpYyBib29sZWFuIGNyZWF0ZUlkZW50aXR5Q29sdW1uID0gdHJ1ZTsKCiAg\nICAvKioKICAgICAqIElmIHtAbGluayAjY3JlYXRlSWRlbnRpdHlDb2x1bW59\nIGlzIHRydWUsIHRoZW4gdGhlCiAgICAgKiA8Y29kZT5pZGVudGl0eUNvbHVt\nbk5hbWU8L2NvZGU+IHdpbGwgYmUgdGhlIG5hbWUgb2YgdGhlCiAgICAgKiBh\nZGRpdGlvbmFsIHVuaXF1ZSBjb2x1bW4gdGhhdCB3aWxsIGJlIGNyZWF0ZWQu\nCiAgICAgKi8KICAgIHB1YmxpYyBTdHJpbmcgaWRlbnRpdHlDb2x1bW5OYW1l\nID0gIlVOUV9JTkRFWCI7CgogICAgLyoqCiAgICAgKiBJZiB0cnVlLCBTeWJh\nc2Ugd2lsbCBpZ25vcmUgbnVtZXJpYyB0cnVuY2F0aW9uIG9uIGluc2VydCBv\ncgogICAgICogdXBkYXRlIG9wZXJhdGlvbnMuICBPdGhlcndpc2UsIHRoZSBv\ncGVyYXRpb24gd2lsbCBmYWlsLiBUaGUgZGVmYXVsdAogICAgICogdmFsdWUs\nIGZhbHNlIGlzIGluIGFjY29yZGFuY2Ugd2l0aCBTUUw5Mi4KICAgICAqLwog\nICAgcHVibGljIGJvb2xlYW4gaWdub3JlTnVtZXJpY1RydW5jYXRpb24gPSBm\nYWxzZTsKICAgIAogICAgcHVibGljIFN5YmFzZURpY3Rpb25hcnkoKSB7CiAg\nICAgICAgcGxhdGZvcm0gPSAiU3liYXNlIjsKICAgICAgICBzY2hlbWFDYXNl\nID0gU0NIRU1BX0NBU0VfUFJFU0VSVkU7CiAgICAgICAgZm9yVXBkYXRlQ2xh\ndXNlID0gIkZPUiBVUERBVEUgQVQgSVNPTEFUSU9OIFNFUklBTElaQUJMRSI7\nCgogICAgICAgIHN1cHBvcnRzTG9ja2luZ1dpdGhEaXN0aW5jdENsYXVzZSA9\nIGZhbHNlOwogICAgICAgIHN1cHBvcnRzTnVsbFRhYmxlRm9yR2V0Q29sdW1u\ncyA9IGZhbHNlOwogICAgICAgIHJlcXVpcmVzQWxpYXNGb3JTdWJzZWxlY3Qg\nPSB0cnVlOwogICAgICAgIHJlcXVpcmVzQXV0b0NvbW1pdEZvck1ldGFEYXRh\nID0gdHJ1ZTsKCiAgICAgICAgbWF4VGFibGVOYW1lTGVuZ3RoID0gMzA7CiAg\nICAgICAgbWF4Q29sdW1uTmFtZUxlbmd0aCA9IDMwOwogICAgICAgIG1heElu\nZGV4TmFtZUxlbmd0aCA9IDMwOwogICAgICAgIG1heENvbnN0cmFpbnROYW1l\nTGVuZ3RoID0gMzA7CgogICAgICAgIGJpZ2ludFR5cGVOYW1lID0gIk5VTUVS\nSUMoMzgpIjsKICAgICAgICBiaXRUeXBlTmFtZSA9ICJUSU5ZSU5UIjsKCiAg\nICAgICAgLy8gU3liYXNlIGRvZXNuJ3QgdW5kZXJzdGFuZCAiWCBDUk9TUyBK\nT0lOIFkiLCBidXQgaXQgZG9lcyB1bmRlcnN0YW5kCiAgICAgICAgLy8gdGhl\nIGVxdWl2YWxlbnQgIlggSk9JTiBZIE9OIDEgPSAxIgogICAgICAgIGNyb3Nz\nSm9pbkNsYXVzZSA9ICJKT0lOIjsKICAgICAgICByZXF1aXJlc0NvbmRpdGlv\nbkZvckNyb3NzSm9pbiA9IHRydWU7CgogICAgICAgIC8vIHRoZXNlIHRhYmxl\ncyBzaG91bGQgbm90IGJlIHJlZmxlY3RlZCBvbgogICAgICAgIHN5c3RlbVRh\nYmxlU2V0LmFkZEFsbChBcnJheXMuYXNMaXN0KG5ldyBTdHJpbmdbXXsKICAg\nICAgICAgICAgIklKREJDX0ZVTkNUSU9OX0VTQ0FQRVMiLCAiSkRCQ19GVU5D\nVElPTl9FU0NBUEVTIiwKICAgICAgICAgICAgIlNQVF9JSkRCQ19DT05WRVJT\nSU9OIiwgIlNQVF9JSkRCQ19NREEiLCAiU1BUX0lKREJDX1RBQkxFX1RZUEVT\nIiwKICAgICAgICAgICAgIlNQVF9KREJDX0NPTlZFUlNJT04iLCAiU1BUX0pE\nQkNfVEFCTEVfVFlQRVMiLCAiU1BUX0pURVhUIiwKICAgICAgICAgICAgIlNQ\nVF9MSU1JVF9UWVBFUyIsICJTUFRfTURBIiwgIlNQVF9NT05JVE9SIiwgIlNQ\nVF9WQUxVRVMiLAogICAgICAgICAgICAiU1lCTElDRU5TRVNMT0ciLAogICAg\nICAgIH0pKTsKCiAgICAgICAgLy8gcmVzZXJ2ZWQgd29yZHMgc3BlY2lmaWVk\nIGF0OgogICAgICAgIC8vIGh0dHA6Ly9tYW51YWxzLnN5YmFzZS5jb20vb25s\naW5lYm9va3MvZ3JvdXAtYXMvYXNnMTI1MGUvCiAgICAgICAgLy8gcmVmbWFu\nL0BHZW5lcmljX19Cb29rVGV4dFZpZXcvMjY2MDMKICAgICAgICByZXNlcnZl\nZFdvcmRTZXQuYWRkQWxsKEFycmF5cy5hc0xpc3QobmV3IFN0cmluZ1tdewog\nICAgICAgICAgICAiQVJJVEhfT1ZFUkZMT1ciLCAiQlJFQUsiLCAiQlJPV1NF\nIiwgIkJVTEsiLCAiQ0hBUl9DT05WRVJUIiwKICAgICAgICAgICAgIkNIRUNL\nUE9JTlQiLCAiQ0xVU1RFUkVEIiwgIkNPTVBVVEUiLCAiQ09ORklSTSIsICJD\nT05UUk9MUk9XIiwKICAgICAgICAgICAgIkRBVEFCQVNFIiwgIkRCQ0MiLCAi\nREVURVJNSU5JU1RJQyIsICJESVNLIERJU1RJTkNUIiwgIkRVTU1ZIiwKICAg\nICAgICAgICAgIkRVTVAiLCAiRU5EVFJBTiIsICJFUlJMVkwiLCAiRVJST1JE\nQVRBIiwgIkVSUk9SRVhJVCIsICJFWENMVVNJVkUiLAogICAgICAgICAgICAi\nRVhJVCIsICJFWFBfUk9XX1NJWkUiLCAiRklMTEZBQ1RPUiIsICJGVU5DIiwg\nIkZVTkNUSU9OIiwKICAgICAgICAgICAgIkhPTERMT0NLIiwgIklERU5USVRZ\nX0dBUCIsICJJREVOVElUWV9JTlNFUlQiLCAiSURFTlRJVFlfU1RBUlQiLAog\nICAgICAgICAgICAiSUYiLCAiSU5ERVgiLCAiSU5PVVQiLCAiSU5TVEFMTCIs\nICJJTlRFUlNFQ1QiLCAiSkFSIiwgIktJTEwiLAogICAgICAgICAgICAiTElO\nRU5PIiwgIkxPQUQiLCAiTE9DSyIsICJNQVhfUk9XU19QRVJfUEFHRSIsICJN\nSVJST1IiLAogICAgICAgICAgICAiTUlSUk9SRVhJVCIsICJNT0RJRlkiLCAi\nTkVXIiwgIk5PSE9MRExPQ0siLCAiTk9OQ0xVU1RFUkVEIiwKICAgICAgICAg\nICAgIk5VTUVSSUNfVFJVTkNBVElPTiIsICJPRkYiLCAiT0ZGU0VUUyIsICJP\nTkNFIiwgIk9OTElORSIsICJPVVQiLAogICAgICAgICAgICAiT1ZFUiIsICJQ\nQVJUSVRJT04iLCAiUEVSTSIsICJQRVJNQU5FTlQiLCAiUExBTiIsICJQUklO\nVCIsICJQUk9DIiwKICAgICAgICAgICAgIlBST0NFU1NFWElUIiwgIlBST1hZ\nX1RBQkxFIiwgIlFVSUVTQ0UiLCAiUkFJU0VSUk9SIiwgIlJFQUQiLAogICAg\nICAgICAgICAiUkVBRFBBU1QiLCAiUkVBRFRFWFQiLCAiUkVDT05GSUdVUkUi\nLCAiUkVGRVJFTkNFUyBSRU1PVkUiLCAiUkVPUkciLAogICAgICAgICAgICAi\nUkVQTEFDRSIsICJSRVBMSUNBVElPTiIsICJSRVNFUlZFUEFHRUdBUCIsICJS\nRVRVUk4iLCAiUkVUVVJOUyIsCiAgICAgICAgICAgICJST0xFIiwgIlJPV0NP\nVU5UIiwgIlJVTEUiLCAiU0FWRSIsICJTRVRVU0VSIiwgIlNIQVJFRCIsCiAg\nICAgICAgICAgICJTSFVURE9XTiIsICJTT01FIiwgIlNUQVRJU1RJQ1MiLCAi\nU1RSSU5HU0laRSIsICJTVFJJUEUiLAogICAgICAgICAgICAiU1lCX0lERU5U\nSVRZIiwgIlNZQl9SRVNUUkVFIiwgIlNZQl9URVJNSU5BVEUiLCAiVEVNUCIs\nICJURVhUU0laRSIsCiAgICAgICAgICAgICJUUkFOIiwgIlRSSUdHRVIiLCAi\nVFJVTkNBVEUiLCAiVFNFUVVBTCIsICJVTlBBUlRJVElPTiIsICJVU0UiLAog\nICAgICAgICAgICAiVVNFUl9PUFRJT04iLCAiV0FJVEZPUiIsICJXSElMRSIs\nICJXUklURVRFWFQiLAogICAgICAgIH0pKTsKCiAgICAgICAgLy8gU3liYXNl\nIGRvZXMgbm90IHN1cHBvcnQgZm9yZWlnbiBrZXkgZGVsZXRlL3VwZGF0ZSBh\nY3Rpb24gTlVMTCwKICAgICAgICAvLyBERUZBVUxULCBDQVNDQURFCiAgICAg\nICAgc3VwcG9ydHNOdWxsRGVsZXRlQWN0aW9uID0gZmFsc2U7CiAgICAgICAg\nc3VwcG9ydHNEZWZhdWx0RGVsZXRlQWN0aW9uID0gZmFsc2U7CiAgICAgICAg\nc3VwcG9ydHNDYXNjYWRlRGVsZXRlQWN0aW9uID0gZmFsc2U7CiAgICAgICAg\nc3VwcG9ydHNOdWxsVXBkYXRlQWN0aW9uID0gZmFsc2U7CiAgICAgICAgc3Vw\ncG9ydHNEZWZhdWx0VXBkYXRlQWN0aW9uID0gZmFsc2U7CiAgICAgICAgc3Vw\ncG9ydHNDYXNjYWRlVXBkYXRlQWN0aW9uID0gZmFsc2U7CiAgICB9CgogICAg\nQE92ZXJyaWRlCiAgICBwdWJsaWMgaW50IGdldEpEQkNUeXBlKGludCBtZXRh\nVHlwZUNvZGUsIGJvb2xlYW4gbG9iKSB7CiAgICAgICAgc3dpdGNoIChtZXRh\nVHlwZUNvZGUpIHsKICAgICAgICAgICAgLy8gdGhlIGRlZmF1bHQgbWFwcGlu\nZyBmb3IgQllURSBpcyBhIFRJTllJTlQsIGJ1dCBTeWJhc2UncyBUSU5ZSU5U\nCiAgICAgICAgICAgIC8vIHR5cGUgY2FuJ3QgaGFuZGxlIHRoZSBjb21wbGV0\nZSByYW5nZSBmb3IgYSBKYXZhIGJ5dGUKICAgICAgICAgICAgY2FzZSBKYXZh\nVHlwZXMuQllURToKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuQllURV9P\nQko6CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0UHJlZmVycmVkVHlwZShU\neXBlcy5TTUFMTElOVCk7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAg\nICAgICAgICByZXR1cm4gc3VwZXIuZ2V0SkRCQ1R5cGUobWV0YVR5cGVDb2Rl\nLCBsb2IpOwogICAgICAgIH0KICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1\nYmxpYyB2b2lkIHNldEJpZ0ludGVnZXIoUHJlcGFyZWRTdGF0ZW1lbnQgc3Rt\nbnQsIGludCBpZHgsIEJpZ0ludGVnZXIgdmFsLAogICAgICAgIENvbHVtbiBj\nb2wpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgLy8g\nc2V0QmlnRGVjaW1hbCBkb2Vzbid0IHdvcmsgaGVyZTogaW4gb25lIGNhc2Us\nIGEgc3RvcmVkIHZhbHVlCiAgICAgICAgLy8gb2YgNzc5OTQzODUxNDkyNDM0\nOTQ0MCB0dXJucyBpbnRvIDc3OTk0Mzg1MTQ5MjQzNDk0MDAKICAgICAgICAv\nLyBzZXRPYmplY3QgZ2V0cyBhcm91bmQgdGhpcyBpbiB0aGUgU3liYXNlIEpE\nQkMgZHJpdmVycwogICAgICAgIHNldE9iamVjdChzdG1udCwgaWR4LCBuZXcg\nQmlnRGVjaW1hbCh2YWwpLCBUeXBlcy5CSUdJTlQsIGNvbCk7CiAgICB9Cgog\nICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgU3RyaW5nW10gZ2V0QWRkRm9yZWln\nbktleVNRTChGb3JlaWduS2V5IGZrKSB7CiAgICAgICAgLy8gU3liYXNlIGhh\ncyBwcm9ibGVtcyB3aXRoIGFkZGluZyBmb3JpZWduIGtleXMgdmlhIEFMVEVS\nIFRBQkxFIGNvbW1hbmQKICAgICAgICByZXR1cm4gbmV3IFN0cmluZ1swXTsK\nICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBTdHJpbmdbXSBnZXRD\ncmVhdGVUYWJsZVNRTChUYWJsZSB0YWJsZSkgewogICAgICAgIGlmICghY3Jl\nYXRlSWRlbnRpdHlDb2x1bW4pCiAgICAgICAgICAgIHJldHVybiBzdXBlci5n\nZXRDcmVhdGVUYWJsZVNRTCh0YWJsZSk7CgogICAgICAgIFN0cmluZ0J1aWxk\nZXIgYnVmID0gbmV3IFN0cmluZ0J1aWxkZXIoKTsKICAgICAgICBidWYuYXBw\nZW5kKCJDUkVBVEUgVEFCTEUgIikuYXBwZW5kKGdldEZ1bGxOYW1lKHRhYmxl\nLCBmYWxzZSkpLgogICAgICAgICAgICBhcHBlbmQoIiAoIik7CgogICAgICAg\nIENvbHVtbltdIGNvbHMgPSB0YWJsZS5nZXRDb2x1bW5zKCk7CiAgICAgICAg\nYm9vbGVhbiBoYXNJZGVudGl0eSA9IGZhbHNlOwoKICAgICAgICBmb3IgKGlu\ndCBpID0gMDsgaSA8IGNvbHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAg\naWYgKGNvbHNbaV0uaXNBdXRvQXNzaWduZWQoKSkKICAgICAgICAgICAgICAg\nIGhhc0lkZW50aXR5ID0gdHJ1ZTsKCiAgICAgICAgICAgIGJ1Zi5hcHBlbmQo\naSA9PSAwID8gIiIgOiAiLCAiKTsKICAgICAgICAgICAgYnVmLmFwcGVuZChn\nZXREZWNsYXJlQ29sdW1uU1FMKGNvbHNbaV0sIGZhbHNlKSk7CiAgICAgICAg\nfQoKICAgICAgICAvLyBhZGQgYW4gaWRlbnRpdHkgY29sdW1uIGlmIHdlIGRv\nIG5vdCBhbHJlYWR5IGhhdmUgb25lCiAgICAgICAgaWYgKCFoYXNJZGVudGl0\neSkKICAgICAgICAgICAgYnVmLmFwcGVuZCgiLCAiKS5hcHBlbmQoaWRlbnRp\ndHlDb2x1bW5OYW1lKS4KICAgICAgICAgICAgICAgIGFwcGVuZCgiIE5VTUVS\nSUMgSURFTlRJVFkgVU5JUVVFIik7CgogICAgICAgIFByaW1hcnlLZXkgcGsg\nPSB0YWJsZS5nZXRQcmltYXJ5S2V5KCk7CiAgICAgICAgaWYgKHBrICE9IG51\nbGwpCiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoIiwgIikuYXBwZW5kKGdldFBy\naW1hcnlLZXlDb25zdHJhaW50U1FMKHBrKSk7CgogICAgICAgIFVuaXF1ZVtd\nIHVucXMgPSB0YWJsZS5nZXRVbmlxdWVzKCk7CiAgICAgICAgU3RyaW5nIHVu\ncVN0cjsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHVucXMubGVuZ3Ro\nOyBpKyspIHsKICAgICAgICAgICAgdW5xU3RyID0gZ2V0VW5pcXVlQ29uc3Ry\nYWludFNRTCh1bnFzW2ldKTsKICAgICAgICAgICAgaWYgKHVucVN0ciAhPSBu\ndWxsKQogICAgICAgICAgICAgICAgYnVmLmFwcGVuZCgiLCAiKS5hcHBlbmQo\ndW5xU3RyKTsKICAgICAgICB9CgogICAgICAgIGJ1Zi5hcHBlbmQoIikiKTsK\nICAgICAgICByZXR1cm4gbmV3IFN0cmluZ1tdeyBidWYudG9TdHJpbmcoKSB9\nOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHJvdGVjdGVkIFN0cmluZyBn\nZXREZWNsYXJlQ29sdW1uU1FMKENvbHVtbiBjb2wsIGJvb2xlYW4gYWx0ZXIp\nIHsKICAgICAgICBTdHJpbmdCdWlsZGVyIGJ1ZiA9IG5ldyBTdHJpbmdCdWls\nZGVyKCk7CiAgICAgICAgYnVmLmFwcGVuZChnZXRDb2x1bW5EQk5hbWUoY29s\nKSkuYXBwZW5kKCIgIik7CiAgICAgICAgYnVmLmFwcGVuZChnZXRUeXBlTmFt\nZShjb2wpKTsKCiAgICAgICAgLy8gY2FuJ3QgYWRkIGNvbnN0cmFpbnRzIHRv\nIGEgY29sdW1uIHdlJ3JlIGFkZGluZyBhZnRlciB0YWJsZQogICAgICAgIC8v\nIGNyZWF0aW9uLCBjYXVzZSBzb21lIGRhdGEgbWlnaHQgYWxyZWFkeSBiZSBp\nbnNlcnRlZAogICAgICAgIGlmICghYWx0ZXIpIHsKICAgICAgICAgICAgaWYg\nKGNvbC5nZXREZWZhdWx0U3RyaW5nKCkgIT0gbnVsbCAmJiAhY29sLmlzQXV0\nb0Fzc2lnbmVkKCkpCiAgICAgICAgICAgICAgICBidWYuYXBwZW5kKCIgREVG\nQVVMVCAiKS5hcHBlbmQoY29sLmdldERlZmF1bHRTdHJpbmcoKSk7CiAgICAg\nICAgICAgIGlmIChjb2wuaXNBdXRvQXNzaWduZWQoKSkKICAgICAgICAgICAg\nICAgIGJ1Zi5hcHBlbmQoIiBJREVOVElUWSIpOwogICAgICAgIH0KCiAgICAg\nICAgaWYgKGNvbC5pc05vdE51bGwoKSkKICAgICAgICAgICAgYnVmLmFwcGVu\nZCgiIE5PVCBOVUxMIik7CiAgICAgICAgZWxzZSBpZiAoIWNvbC5pc1ByaW1h\ncnlLZXkoKSkgewogICAgICAgICAgICAvLyBzeWJhc2UgZm9yY2VzIHlvdSB0\nbyBleHBsaWNpdGx5IHNwZWNpZnkgdGhhdAogICAgICAgICAgICAvLyB5b3Ug\nd2lsbCBhbGxvdyBOVUxMIHZhbHVlcwogICAgICAgICAgICBidWYuYXBwZW5k\nKCIgTlVMTCIpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGJ1Zi50b1N0\ncmluZygpOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIFN0cmlu\nZ1tdIGdldERyb3BDb2x1bW5TUUwoQ29sdW1uIGNvbHVtbikgewogICAgICAg\nIC8vIFN5YmFzZSB1c2VzICJBTFRFUiBUQUJMRSBEUk9QIDxDT0xVTU5fTkFN\nRT4iIHJhdGhlciB0aGFuIHRoZQogICAgICAgIC8vIHVzdWFsICJBTFRFUiBU\nQUJMRSBEUk9QIENPTFVNTiA8Q09MVU1OX05BTUU+IgogICAgICAgIHJldHVy\nbiBuZXcgU3RyaW5nW117ICJBTFRFUiBUQUJMRSAiCiAgICAgICAgICAgICsg\nZ2V0RnVsbE5hbWUoY29sdW1uLmdldFRhYmxlKCksIGZhbHNlKSArICIgRFJP\nUCAiICsgZ2V0Q29sdW1uREJOYW1lKGNvbHVtbikgfTsKICAgIH0KCiAgICBA\nT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIHJlZlNjaGVtYUNvbXBvbmVudHMo\nVGFibGUgdGFibGUpIHsKICAgICAgICAvLyBub3RlIHRoYXQgd2UgdXNlIGdl\ndENvbHVtbnMoKSByYXRoZXIgdGhhbiBnZXR0aW5nIHRoZSBjb2x1bW4gYnkg\nbmFtZQogICAgICAgIC8vIGJlY2F1c2UgdW5kZXIgc29tZSBjaXJjdW1zdGFu\nY2VzIHRoaXMgbWV0aG9kIGlzIGNhbGxlZCB1bmRlciB0aGUKICAgICAgICAv\nLyBkeW5hbWljIHNjaGVtYSBmYWN0b3J5LCB3aGVyZSBnZXR0aW5nIGEgY29s\ndW1uIGJ5IG5hbWUgY3JlYXRlcwogICAgICAgIC8vIHRoYXQgY29sdW1uCiAg\nICAgICAgQ29sdW1uW10gY29scyA9IHRhYmxlLmdldENvbHVtbnMoKTsKICAg\nICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNvbHMubGVuZ3RoOyBpKyspCiAg\nICAgICAgICAgIGlmIChpZGVudGl0eUNvbHVtbk5hbWUuZXF1YWxzSWdub3Jl\nQ2FzZShjb2xzW2ldLmdldElkZW50aWZpZXIoKS5nZXROYW1lKCkpKQogICAg\nICAgICAgICAgICAgY29sc1tpXS5yZWYoKTsKICAgIH0KCiAgICBAT3ZlcnJp\nZGUKICAgIHB1YmxpYyB2b2lkIGVuZENvbmZpZ3VyYXRpb24oKSB7CiAgICAg\nICAgc3VwZXIuZW5kQ29uZmlndXJhdGlvbigpOwoKICAgICAgICAvLyB3YXJu\nIGFib3V0IGpkYmMgY29tcGxpYW50IGZsYWcKICAgICAgICBTdHJpbmcgdXJs\nID0gY29uZi5nZXRDb25uZWN0aW9uVVJMKCk7CiAgICAgICAgaWYgKCFTdHJp\nbmdVdGlscy5pc0VtcHR5KHVybCkKICAgICAgICAgICAgJiYgdXJsLnRvTG93\nZXJDYXNlKCkuaW5kZXhPZigiamRiYzpzeWJhc2U6dGRzIikgIT0gLTEKICAg\nICAgICAgICAgJiYgdXJsLnRvTG93ZXJDYXNlKCkuaW5kZXhPZigiYmVfYXNf\namRiY19jb21wbGlhbnRfYXNfcG9zc2libGU9IikKICAgICAgICAgICAgPT0g\nLTEpIHsKICAgICAgICAgICAgbG9nLndhcm4oX2xvYy5nZXQoInN5YmFzZS1j\nb21wbGlhbmNlIiwgdXJsKSk7CiAgICAgICAgfQogICAgfQoKICAgIEBPdmVy\ncmlkZQogICAgcHVibGljIENvbm5lY3Rpb24gZGVjb3JhdGUoQ29ubmVjdGlv\nbiBjb25uKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAg\nIGNvbm4gPSBzdXBlci5kZWNvcmF0ZShjb25uKTsKICAgICAgICAvLyBJbiBv\ncmRlciBmb3IgU3liYXNlIHRvIHJhaXNlIHRoZSB0cnVuY2F0aW9uIGV4Y2Vw\ndGlvbiB3aGVuIHRoZSAKICAgICAgICAvLyBzdHJpbmcgbGVuZ3RoIGlzIGdy\nZWF0ZXIgdGhhbiB0aGUgY29sdW1uIGxlbmd0aCBmb3IgQ2hhciwgVmFyQ2hh\nciwgCiAgICAgICAgLy8gQmluYXJ5LCBWYXJCaW5hcnksIHRoZSAic2V0IHN0\ncmluZ19ydHJ1bmNhdGlvbiBvbiIgbXVzdCBiZSBleGVjdXRlZC4gCiAgICAg\nICAgLy8gVGhpcyBzZXR0aW5nIGlzIGVmZmVjdGl2ZSBmb3IgdGhlIGR1cmF0\naW9uIG9mIGN1cnJlbnQgY29ubmVjdGlvbi4KICAgICAgICBpZiAoc2V0U3Ry\naW5nUmlnaHRUcnVuY2F0aW9uT24pIHsKICAgICAgICAgICAgU3RyaW5nIHN0\nciA9ICJzZXQgc3RyaW5nX3J0cnVuY2F0aW9uIG9uIjsKICAgICAgICAgICAg\nUHJlcGFyZWRTdGF0ZW1lbnQgc3RtbnQgPSBwcmVwYXJlU3RhdGVtZW50KGNv\nbm4sIHN0cik7ICAgICAgICAKICAgICAgICAgICAgc3RtbnQuZXhlY3V0ZSgp\nOwogICAgICAgICAgICBzdG1udC5jbG9zZSgpOwogICAgICAgIH0KICAgICAg\nICAKICAgICAgICAvLyBCeSBkZWZhdWx0LCBTeWJhc2Ugd2lsbCBmYWlsIHRv\nIGluc2VydCBvciB1cGRhdGUgaWYgYSBudW1lcmljCiAgICAgICAgLy8gdHJ1\nbmNhdGlvbiBvY2N1cnMgYXMgYSByZXN1bHQgb2YsIGZvciBleGFtcGxlLCBs\nb3NzIG9mIGRlY2ltYWwKICAgICAgICAvLyBwcmVjaXNpb24uICBUaGlzIHNl\ndHRpbmcgc3BlY2lmaWVzIHRoYXQgdGhlIG9wZXJhdGlvbiBzaG91bGQgbm90\nIAogICAgICAgIC8vIGZhaWwgaWYgYSBudW1lcmljIHRydW5jYXRpb24gb2Nj\ndXJzLgogICAgICAgIGlmIChpZ25vcmVOdW1lcmljVHJ1bmNhdGlvbikgewog\nICAgICAgICAgICBTdHJpbmcgc3RyID0gInNldCBhcml0aGFib3J0IG51bWVy\naWNfdHJ1bmNhdGlvbiBvZmYiOwogICAgICAgICAgICBQcmVwYXJlZFN0YXRl\nbWVudCBzdG1udCA9IHByZXBhcmVTdGF0ZW1lbnQoY29ubiwgc3RyKTsgICAg\nICAgIAogICAgICAgICAgICBzdG1udC5leGVjdXRlKCk7CiAgICAgICAgICAg\nIHN0bW50LmNsb3NlKCk7ICAgICAgICAgICAgCiAgICAgICAgfSAgICAgICAg\nCiAgICAgICAgCiAgICAgICAgcmV0dXJuIENvbmNyZXRlQ2xhc3NHZW5lcmF0\nb3IubmV3SW5zdGFuY2Uoc3liYXNlQ29ubmVjdGlvbkltcGwsIGNvbm4pOwog\nICAgfQogICAgCiAgICAvKioKICAgICAqIEhlbHBlciBtZXRob2Qgb2J0YWlu\ncyBhIHN0cmluZyB2YWx1ZSBmcm9tIGEgZ2l2ZW4gY29sdW1uIGluIGEgUmVz\ndWx0U2V0LiBTdHJpbmdzIHByb3ZpZGVkIGFyZSBjb2x1bW4gbmFtZXMsCiAg\nICAgKiBqZGJjTmFtZSB3aWxsIGJlIHRyaWVkIGZpcnN0IGlmIGFuIFNRTEV4\nY2VwdGlvbiBvY2N1cnMgd2UnbGwgdHJ5IHRoZSBzeWJhc2UgbmFtZS4KICAg\nICAqLwogICAgcHJvdGVjdGVkIFN0cmluZyBnZXRTdHJpbmdGcm9tUmVzdWx0\nU2V0KFJlc3VsdFNldCBycywgU3RyaW5nIGpkYmNOYW1lLCBTdHJpbmcgc3li\nYXNlTmFtZSkgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgdHJ5IHsg\nCiAgICAgICAgICAgIHJldHVybiBycy5nZXRTdHJpbmcoamRiY05hbWUpOwog\nICAgICAgIH0KICAgICAgICBjYXRjaChTUUxFeGNlcHRpb24gc3FsZSkgeyAK\nICAgICAgICAgICAgLy8gaWYgdGhlIGdlbmVyaWMgSkRCQyBpZGVudGlmaWVy\nIGlzbid0IGZvdW5kIGFuIFNRTEV4Y2VwdGlvbiB3aWxsIGJlIHRocm93bgog\nICAgICAgICAgICAvLyB0cnkgdGhlIFN5YmFzZSBzcGVjaWZpYyBpZAogICAg\nICAgICAgICByZXR1cm4gcnMuZ2V0U3RyaW5nKHN5YmFzZU5hbWUpOwogICAg\nICAgIH0KICAgIH0KICAgIC8qKgogICAgICogSGVscGVyIG1ldGhvZCBvYnRh\naW5zIGEgYm9vbGVhbiB2YWx1ZSBmcm9tIGEgZ2l2ZW4gY29sdW1uIGluIGEg\nUmVzdWx0U2V0LiBTdHJpbmdzIHByb3ZpZGVkIGFyZSBjb2x1bW4gbmFtZXMs\nCiAgICAgKiBqZGJjTmFtZSB3aWxsIGJlIHRyaWVkIGZpcnN0IGlmIGFuIFNR\nTEV4Y2VwdGlvbiBvY2N1cnMgd2UnbGwgdHJ5IHRoZSBzeWJhc2UgbmFtZS4K\nICAgICAqLwogICAgcHJvdGVjdGVkIGJvb2xlYW4gZ2V0Qm9vbGVhbkZyb21S\nZXN1bHRTZXQoUmVzdWx0U2V0IHJzLCBTdHJpbmcgamRiY05hbWUsIFN0cmlu\nZyBzeWJhc2VOYW1lKSB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICB0\ncnkgeyAKICAgICAgICAgICAgcmV0dXJuIHJzLmdldEJvb2xlYW4oamRiY05h\nbWUpOwogICAgICAgIH0KICAgICAgICBjYXRjaChTUUxFeGNlcHRpb24gc3Fs\nZSkgewogICAgICAgICAgICAvLyBpZiB0aGUgZ2VuZXJpYyBKREJDIGlkZW50\naWZpZXIgaXNuJ3QgZm91bmQgYW4gU1FMRXhjZXB0aW9uIHdpbGwgYmUgdGhy\nb3duCiAgICAgICAgICAgIC8vIHRyeSB0aGUgU3liYXNlIHNwZWNpZmljIGlk\nCiAgICAgICAgICAgIHJldHVybiBycy5nZXRCb29sZWFuKHN5YmFzZU5hbWUp\nOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhIG5l\ndyBwcmltYXJ5IGtleSBmcm9tIHRoZSBpbmZvcm1hdGlvbiBpbiB0aGUgc2No\nZW1hIG1ldGFkYXRhLgogICAgICovCiAgICBwcm90ZWN0ZWQgUHJpbWFyeUtl\neSBuZXdQcmltYXJ5S2V5KFJlc3VsdFNldCBwa01ldGEpCiAgICAgICAgdGhy\nb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgUHJpbWFyeUtleSBwayA9IG5l\ndyBQcmltYXJ5S2V5KCk7CiAgICAgICAgcGsuc2V0U2NoZW1hSWRlbnRpZmll\ncihmcm9tREJOYW1lKGdldFN0cmluZ0Zyb21SZXN1bHRTZXQocGtNZXRhLCAi\nVEFCTEVfU0NIRU0iLCAidGFibGVfb3duZXIiKSwKICAgICAgICAgICAgREJJ\nZGVudGlmaWVyVHlwZS5TQ0hFTUEpKTsKICAgICAgICBway5zZXRUYWJsZUlk\nZW50aWZpZXIoZnJvbURCTmFtZShnZXRTdHJpbmdGcm9tUmVzdWx0U2V0KHBr\nTWV0YSwgIlRBQkxFX05BTUUiLCAidGFibGVfbmFtZSIpLAogICAgICAgICAg\nICBEQklkZW50aWZpZXJUeXBlLlRBQkxFKSk7CiAgICAgICAgcGsuc2V0Q29s\ndW1uSWRlbnRpZmllcihmcm9tREJOYW1lKGdldFN0cmluZ0Zyb21SZXN1bHRT\nZXQocGtNZXRhLCAiQ09MVU1OX05BTUUiLCAiY29sdW1uX25hbWUiKSwKICAg\nICAgICAgICAgREJJZGVudGlmaWVyVHlwZS5DT0xVTU4pKTsKICAgICAgICBw\nay5zZXRJZGVudGlmaWVyKGZyb21EQk5hbWUoZ2V0U3RyaW5nRnJvbVJlc3Vs\ndFNldChwa01ldGEsICJQS19OQU1FIiwgImluZGV4X25hbWUiKSwKICAgICAg\nICAgICAgREJJZGVudGlmaWVyVHlwZS5DT05TVFJBSU5UKSk7CiAgICAgICAg\ncmV0dXJuIHBrOwogICAgfQoKICAgIC8qKgogICAgICogQ3JlYXRlIGEgbmV3\nIGluZGV4IGZyb20gdGhlIGluZm9ybWF0aW9uIGluIHRoZSBpbmRleCBtZXRh\nZGF0YS4KICAgICAqLwogICAgcHJvdGVjdGVkIEluZGV4IG5ld0luZGV4KFJl\nc3VsdFNldCBpZHhNZXRhKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24g\newogICAgICAgIEluZGV4IGlkeCA9IG5ldyBJbmRleCgpOwogICAgICAgIGlk\neC5zZXRTY2hlbWFJZGVudGlmaWVyKGZyb21EQk5hbWUoZ2V0U3RyaW5nRnJv\nbVJlc3VsdFNldChpZHhNZXRhLCAiVEFCTEVfU0NIRU0iLCAidGFibGVfb3du\nZXIiKSwKICAgICAgICAgICAgREJJZGVudGlmaWVyVHlwZS5TQ0hFTUEpKTsK\nICAgICAgICBpZHguc2V0VGFibGVJZGVudGlmaWVyKGZyb21EQk5hbWUoZ2V0\nU3RyaW5nRnJvbVJlc3VsdFNldChpZHhNZXRhLCAiVEFCTEVfTkFNRSIsICJ0\nYWJsZV9uYW1lIiksCiAgICAgICAgICAgIERCSWRlbnRpZmllclR5cGUuVEFC\nTEUpKTsKICAgICAgICBpZHguc2V0Q29sdW1uSWRlbnRpZmllcihmcm9tREJO\nYW1lKGdldFN0cmluZ0Zyb21SZXN1bHRTZXQoaWR4TWV0YSwgIkNPTFVNTl9O\nQU1FIiwgImNvbHVtbl9uYW1lIiksCiAgICAgICAgICAgIERCSWRlbnRpZmll\nclR5cGUuQ09MVU1OKSk7CiAgICAgICAgaWR4LnNldElkZW50aWZpZXIoZnJv\nbURCTmFtZShnZXRTdHJpbmdGcm9tUmVzdWx0U2V0KGlkeE1ldGEsICJJTkRF\nWF9OQU1FIiwgImluZGV4X25hbWUiKSwKICAgICAgICAgICAgREJJZGVudGlm\naWVyVHlwZS5JTkRFWCkpOwogICAgICAgIGlkeC5zZXRVbmlxdWUoIWdldEJv\nb2xlYW5Gcm9tUmVzdWx0U2V0KGlkeE1ldGEsICJOT05fVU5JUVVFIiwgIm5v\nbl91bmlxdWUiKSk7CiAgICAgICAgcmV0dXJuIGlkeDsKICAgIH0KCiAgICAv\nKioKICAgICAqIENvbm5lY3Rpb24gd3JhcHBlciB0byBjYWNoZSB0aGUge0Bs\naW5rIENvbm5lY3Rpb24jZ2V0Q2F0YWxvZ30gcmVzdWx0LAogICAgICogd2hp\nY2ggdGFrZXMgYSB2ZXJ5IGxvbmcgdGltZSB3aXRoIHRoZSBTeWJhc2UgQ29u\nbmVjdGlvbiAoYW5kCiAgICAgKiB3aGljaCB3ZSBmcmVxdWVudGx5IGludm9r\nZSkuCiAgICAgKi8KICAgIHByb3RlY3RlZCBhYnN0cmFjdCBzdGF0aWMgY2xh\nc3MgU3liYXNlQ29ubmVjdGlvbgogICAgICAgIGV4dGVuZHMgRGVsZWdhdGlu\nZ0Nvbm5lY3Rpb24gewoKICAgICAgICBwcml2YXRlIFN0cmluZyBfY2F0YWxv\nZyA9IG51bGw7CgogICAgICAgIHB1YmxpYyBTeWJhc2VDb25uZWN0aW9uKENv\nbm5lY3Rpb24gY29ubikgewogICAgICAgICAgICBzdXBlcihjb25uKTsKICAg\nICAgICB9CgogICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0Q2F0YWxvZygpCiAg\nICAgICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgICAgICBp\nZiAoX2NhdGFsb2cgPT0gbnVsbCkKICAgICAgICAgICAgICAgIF9jYXRhbG9n\nID0gc3VwZXIuZ2V0Q2F0YWxvZygpOwogICAgICAgICAgICByZXR1cm4gX2Nh\ndGFsb2c7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgdm9pZCBzZXRBdXRv\nQ29tbWl0KGJvb2xlYW4gYXV0b2NvbW1pdCkKICAgICAgICAgICAgdGhyb3dz\nIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgICAgIC8vIHRoZSBzeWJhc2UgamRi\nYyBkcml2ZXIgZGVtYW5kcyB0aGF0IHRoZSBDb25uZWN0aW9uIGFsd2F5cwog\nICAgICAgICAgICAvLyBiZSByb2xsZWQgYmFjayBiZWZvcmUgYXV0b2NvbW1p\ndCBzdGF0dXMgY2hhbmdlcy4gRmFpbHVyZSB0bwogICAgICAgICAgICAvLyBk\nbyBzbyB3aWxsIHlpZWxkICJTRVQgQ0hBSU5FRCBjb21tYW5kIG5vdCBhbGxv\nd2VkIHdpdGhpbgogICAgICAgICAgICAvLyBtdWx0aS1zdGF0ZW1lbnQgdHJh\nbnNhY3Rpb24uIiBleGNlcHRpb25zCiAgICAgICAgICAgIHRyeSB7CiAgICAg\nICAgICAgICAgICBzdXBlci5zZXRBdXRvQ29tbWl0KGF1dG9jb21taXQpOwog\nICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkgewogICAgICAg\nICAgICAgICAgLy8gZmFpbGVkIGZvciBzb21lIHJlYXNvbjogdHJ5IHJvbGxp\nbmcgYmFjayBhbmQgdGhlbgogICAgICAgICAgICAgICAgLy8gc2V0dGluZyBh\ndXRvY29tbWl0IGFnYWluLgogICAgICAgICAgICAgICAgaWYgKGF1dG9jb21t\naXQpCiAgICAgICAgICAgICAgICAgICAgc3VwZXIuY29tbWl0KCk7CiAgICAg\nICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgc3VwZXIucm9s\nbGJhY2soKTsKICAgICAgICAgICAgICAgIHN1cGVyLnNldEF1dG9Db21taXQo\nYXV0b2NvbW1pdCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0K\n","encoding":"base64"}

