{"sha":"39b19b357c51c66dd8aa098876a9a983da98615f","node_id":"MDQ6QmxvYjIwNjM2NDozOWIxOWIzNTdjNTFjNjZkZDhhYTA5ODg3NmE5YTk4M2RhOTg2MTVm","size":15249,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/39b19b357c51c66dd8aa098876a9a983da98615f","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UubWV0YTsK\nCmltcG9ydCBzdGF0aWMgamF2YXgubGFuZy5tb2RlbC5Tb3VyY2VWZXJzaW9u\nLlJFTEVBU0VfNjsKCmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uOwppbXBv\ncnQgamF2YS5pby5QcmludFdyaXRlcjsKaW1wb3J0IGphdmEubmV0LlVSTDsK\naW1wb3J0IGphdmEudXRpbC5BcnJheXM7CmltcG9ydCBqYXZhLnV0aWwuRGF0\nZTsKaW1wb3J0IGphdmEudXRpbC5MaXN0OwppbXBvcnQgamF2YS51dGlsLk1h\ncDsKaW1wb3J0IGphdmEudXRpbC5TZXQ7CgppbXBvcnQgamF2YXguYW5ub3Rh\ndGlvbi5HZW5lcmF0ZWQ7CmltcG9ydCBqYXZheC5hbm5vdGF0aW9uLnByb2Nl\nc3NpbmcuQWJzdHJhY3RQcm9jZXNzb3I7CmltcG9ydCBqYXZheC5hbm5vdGF0\naW9uLnByb2Nlc3NpbmcuUHJvY2Vzc2luZ0Vudmlyb25tZW50OwppbXBvcnQg\namF2YXguYW5ub3RhdGlvbi5wcm9jZXNzaW5nLlJvdW5kRW52aXJvbm1lbnQ7\nCmltcG9ydCBqYXZheC5hbm5vdGF0aW9uLnByb2Nlc3NpbmcuU3VwcG9ydGVk\nQW5ub3RhdGlvblR5cGVzOwppbXBvcnQgamF2YXguYW5ub3RhdGlvbi5wcm9j\nZXNzaW5nLlN1cHBvcnRlZE9wdGlvbnM7CmltcG9ydCBqYXZheC5hbm5vdGF0\naW9uLnByb2Nlc3NpbmcuU3VwcG9ydGVkU291cmNlVmVyc2lvbjsKaW1wb3J0\nIGphdmF4LmxhbmcubW9kZWwuZWxlbWVudC5FbGVtZW50OwppbXBvcnQgamF2\nYXgubGFuZy5tb2RlbC5lbGVtZW50LlR5cGVFbGVtZW50OwppbXBvcnQgamF2\nYXgubGFuZy5tb2RlbC50eXBlLlR5cGVLaW5kOwppbXBvcnQgamF2YXgubGFu\nZy5tb2RlbC50eXBlLlR5cGVNaXJyb3I7CmltcG9ydCBqYXZheC5sYW5nLm1v\nZGVsLnV0aWwuRWxlbWVudHM7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5t\nZXRhbW9kZWwuU3RhdGljTWV0YW1vZGVsOwppbXBvcnQgamF2YXgudG9vbHMu\nRGlhZ25vc3RpYzsKaW1wb3J0IGphdmF4LnRvb2xzLkphdmFGaWxlT2JqZWN0\nOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6\nZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5NZXRhRGF0YUZh\nY3Rvcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2Uu\nUGVyc2lzdGVuY2VNZXRhRGF0YUZhY3Rvcnk7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEucGVyc2lzdGVuY2UudXRpbC5Tb3VyY2VDb2RlOwoKCi8qKgog\nKiBBbm5vdGF0aW9uIHByb2Nlc3NpbmcgdG9vbCBnZW5lcmF0ZXMgc291cmNl\nIGNvZGUgZm9yIGEgbWV0YS1tb2RlbCBjbGFzcyBnaXZlbiAKICogdGhlIGFu\nbm90YXRlZCBzb3VyY2UgY29kZSBvZiBwZXJzaXN0ZW50IGVudGl0eS4KICog\nPHA+CiAqIFRoaXMgdG9vbCBpcyBpbnZva2VkIGR1cmluZyBjb21waWxhdGlv\nbiBmb3IgSkRLNiBjb21waWxlciBpZiAKICogPFVMPgogKiA8TEk+T3BlbkpQ\nQSBhbmQgSlBBIGxpYnJhcmllcyBhcmUgYXZhaWxhYmxlIGluIHRoZSBjb21w\naWxlciBjbGFzc3BhdGgKICogYW5kIDxMST5Bbm5vdGF0aW9uIFByb2Nlc3Nv\nciBvcHRpb24gPGNvZGU+LUFvcGVuanBhLm1ldGFtb2RlbD10cnVlPC9jb2Rl\nPiBpcyBzcGVjaWZpZWQuCiAqIDwvVUw+CiAqIDxicj4KICogPEI+VXNhZ2U8\nL0I+PGJyPgogKiA8Y29kZT4kIGphdmFjIC1jbGFzc3BhdGggcGF0aC90by9v\ncGVuanBhLWFsbC5qYXIgLUFvcGVuanBhLm1ldGFtb2RlbD10cnVlIG15cGFj\na2FnZS9NeUVudGl0eS5qYXZhPC9jb2RlPjxicj4KICogd2lsbCBnZW5lcmF0\nZSBzb3VyY2UgY29kZSBmb3IgY2Fub25pY2FsIG1ldGEtbW9kZWwgY2xhc3Mg\nPGNvZGU+bXlwYWNrYWdlLk15RW50aXR5Xy5qYXZhPC9jb2RlPi4KICogVGhl\nIHNvdXJjZSBjb2RlIGlzIGdlbmVyYXRlZCByZWxhdGl2ZSB0byB0aGUgZGly\nZWN0b3J5IHNwZWNpZmllZCBpbiA8Y29kZT4tczwvY29kZT4gb3B0aW9uCiAq\nIG9mIDxjb2RlPmphdmFjPC9jb2RlPiBjb21waWxlciBhbmQgZGVmYXVsdGVk\nIHRvIHRoZSBjdXJyZW50IGRpcmVjdG9yeS4KICogPHA+CiAqIFRoZSBBbm5v\ndGF0aW9uIFByb2Nlc3NvciBhbHNvIHJlY29nbml6ZXMgdGhlIGZvbGxvd2lu\nZyBvcHRpb25zIChub25lIG9mIHRoZW0gYXJlIG1hbmRhdG9yeSk6PGJyPgog\nKiA8VEFCTEUgYm9yZGVyPSIxIj4KICogPFRSPjxURD4tQW9wZW5qcGEubG9n\nPXtsb2cgbGV2ZWx9PFREPlRoZSBsb2dnaW5nIGxldmVsLiBEZWZhdWx0IGlz\nIDxjb2RlPldBUk48L2NvZGU+LiBQZXJtaXNzaWJsZSB2YWx1ZXMgYXJlIAog\nKiAgICAgPGNvZGU+VFJBQ0U8L2NvZGU+LCA8Y29kZT5JTkZPPC9jb2RlPiwg\nPGNvZGU+V0FSTjwvY29kZT4gb3IgPGNvZGU+IEVSUk9SPC9jb2RlPi4KICog\nPFRSPjxURD4tQW9wZW5qcGEuc291cmNlPXtufSAgICAgICAgICA8VEQ+SmF2\nYSBzb3VyY2UgdmVyc2lvbiBvZiB0aGUgZ2VuZXJhdGVkIGNvZGUuIERlZmF1\nbHQgaXMgPGNvZGU+NjwvY29kZT4uCiAqIDxUUj48VEQ+LUFvcGVuanBhLm5h\nbWluZz17Y2xhc3MgbmFtZX0gPFREPmZ1bGx5LXF1YWxpZmllZCBuYW1lIG9m\nIGEgY2xhc3MgaW1wbGVtZW50aW5nIAogKiA8Y29kZT5vcmcuYXBhY2hlLm9w\nZW5qcGEubWV0YS5NZXRhRGF0YUZhY3Rvcnk8L2NvZGU+IHRoYXQgZGV0ZXJt\naW5lcwogKiB0aGUgbmFtZSBvZiBhIG1ldGEtY2xhc3MgZ2l2ZW4gdGhlIG5h\nbWUgb2YgdGhlIG9yaWdpbmFsIHBlcnNpc3RlbnQgSmF2YSBlbnRpdHkgY2xh\nc3MuIERlZmF1bHRzIHRvCiAqIDxjb2RlPm9yZy5hcGFjaGUub3BlbmpwYS5w\nZXJzaXN0ZW5jZS5QZXJzaXN0ZW5jZU1ldGFEYXRhRmFjdG9yeTwvY29kZT4g\nd2hpY2ggYXBwZW5kcyBhIHVuZGVyc2NvcmUgY2hhcmFjdGVyCiAqICg8Y29k\nZT5fPC9jb2RlPikgdG8gdGhlIG9yaWdpbmFsIEphdmEgY2xhc3MgbmFtZS4g\nCiAqIDxUUj48VEQ+LUFvcGVuanBhLmhlYWRlcj17dXJsfSAgICAgICAgPFRE\nPgogKiBBIHVybCB3aG9zZSBjb250ZW50IHdpbGwgYXBwZWFyIGFzIGNvbW1l\nbnQgaGVhZGVyIHRvIHRoZSBnZW5lcmF0ZWQgZmlsZShzKS4gUmVjb2duaXpl\ncyBzcGVjaWFsIHZhbHVlCiAqIDxjb2RlPkFTTDwvY29kZT4gZm9yIEFwYWNo\nZSBTb3VyY2UgTGljZW5zZSBoZWFkZXIgYXMgY29tbWVudC4gQnkgZGVmYXVs\ndCBhZGRzIGEgT3BlbkpQQSBwcm9wcmlldGFyeSAgIAogKiB0ZXh0LgogKiA8\nL1RBQkxFPgogKiA8YnI+CiAqCiAqIEBhdXRob3IgUGluYWtpIFBvZGRhcgog\nKiAKICogQHNpbmNlIDIuMC4wCiAqIAogKi8KQFN1cHBvcnRlZEFubm90YXRp\nb25UeXBlcyh7IAogICAgImphdmF4LnBlcnNpc3RlbmNlLkVudGl0eSIsCiAg\nICAiamF2YXgucGVyc2lzdGVuY2UuRW1iZWRkYWJsZSIsIAogICAgImphdmF4\nLnBlcnNpc3RlbmNlLk1hcHBlZFN1cGVyY2xhc3MiIH0pCkBTdXBwb3J0ZWRP\ncHRpb25zKHsgIm9wZW5qcGEubG9nIiwgCiAgICAgICAgICAgICAgICAgICAg\nIm9wZW5qcGEuc291cmNlIiwKICAgICAgICAgICAgICAgICAgICAib3Blbmpw\nYS5uYW1pbmciLAogICAgICAgICAgICAgICAgICAgICJvcGVuanBhLmhlYWRl\nciIsCiAgICAgICAgICAgICAgICAgICAgIm9wZW5qcGEubWV0YW1vZGVsIgog\nICAgICAgICAgICAgICAgICB9KQpAU3VwcG9ydGVkU291cmNlVmVyc2lvbihS\nRUxFQVNFXzYpCgpwdWJsaWMgY2xhc3MgQW5ub3RhdGlvblByb2Nlc3NvcjYg\nZXh0ZW5kcyBBYnN0cmFjdFByb2Nlc3NvciB7CiAgICBwcml2YXRlIFNvdXJj\nZUFubm90YXRpb25IYW5kbGVyIGhhbmRsZXI7CiAgICBwcml2YXRlIE1ldGFE\nYXRhRmFjdG9yeSBmYWN0b3J5OwogICAgcHJpdmF0ZSBpbnQgZ2VuZXJhdGVk\nU291cmNlVmVyc2lvbiA9IDY7CiAgICBwcml2YXRlIENvbXBpbGVUaW1lTG9n\nZ2VyIGxvZ2dlcjsKICAgIHByaXZhdGUgU3RyaW5nIGhlYWRlcjsKICAgIHBy\naXZhdGUgYm9vbGVhbiBhY3RpdmU7CiAgICBwcml2YXRlIHN0YXRpYyBMb2Nh\nbGl6ZXIgX2xvYyA9ICBMb2NhbGl6ZXIuZm9yUGFja2FnZShBbm5vdGF0aW9u\nUHJvY2Vzc29yNi5jbGFzcyk7CgogICAgLyoqCiAgICAgKiBDYXRlZ29yeSBv\nZiBtZW1iZXJzIGFzIHBlciBKUEEgMi4wIHR5cGUgc3lzdGVtLgogICAgICog\nCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGljIGVudW0gVHlwZUNhdGVnb3J5\nIHsKICAgICAgICBBVFRSSUJVVEUoImphdmF4LnBlcnNpc3RlbmNlLm1ldGFt\nb2RlbC5TaW5ndWxhckF0dHJpYnV0ZSIpLCAKICAgICAgICBDT0xMRUNUSU9O\nKCJqYXZheC5wZXJzaXN0ZW5jZS5tZXRhbW9kZWwuQ29sbGVjdGlvbkF0dHJp\nYnV0ZSIpLCAKICAgICAgICBTRVQoImphdmF4LnBlcnNpc3RlbmNlLm1ldGFt\nb2RlbC5TZXRBdHRyaWJ1dGUiKSwgCiAgICAgICAgTElTVCgiamF2YXgucGVy\nc2lzdGVuY2UubWV0YW1vZGVsLkxpc3RBdHRyaWJ1dGUiKSwgCiAgICAgICAg\nTUFQKCJqYXZheC5wZXJzaXN0ZW5jZS5tZXRhbW9kZWwuTWFwQXR0cmlidXRl\nIik7CgogICAgICAgIHByaXZhdGUgU3RyaW5nIHR5cGU7CgogICAgICAgIHBy\naXZhdGUgVHlwZUNhdGVnb3J5KFN0cmluZyB0eXBlKSB7CiAgICAgICAgICAg\nIHRoaXMudHlwZSA9IHR5cGU7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMg\nU3RyaW5nIGdldE1ldGFNb2RlbFR5cGUoKSB7CiAgICAgICAgICAgIHJldHVy\nbiB0eXBlOwogICAgICAgIH0KICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBF\nbnVtZXJhdGVzIGF2YWlsYWJsZSBqYXZhLnV0aWwuKiBjb2xsZWN0aW9uIGNs\nYXNzZXMgdG8gY2F0ZWdvcml6ZSB0aGVtCiAgICAgKiBpbnRvIGNvcnJlc3Bv\nbmRpbmcgSlBBIG1ldGEtbW9kZWwgbWVtYmVyIHR5cGUuCiAgICAgKi8KICAg\nIHByaXZhdGUgc3RhdGljIExpc3Q8U3RyaW5nPiBDTEFTU05BTUVTX0xJU1Qg\nPSBBcnJheXMuYXNMaXN0KAogICAgICAgIG5ldyBTdHJpbmdbXXsKICAgICAg\nICAiamF2YS51dGlsLkxpc3QiLCAiamF2YS51dGlsLkFic3RyYWN0TGlzdCIs\nIAogICAgICAgICJqYXZhLnV0aWwuQWJzdHJhY3RTZXF1ZW50aWFsTGlzdCIs\nICJqYXZhLnV0aWwuQXJyYXlMaXN0IiwgCiAgICAgICAgImphdmEudXRpbC5T\ndGFjayIsICJqYXZhLnV0aWwuVmVjdG9yIn0pOwogICAgcHJpdmF0ZSBzdGF0\naWMgTGlzdDxTdHJpbmc+IENMQVNTTkFNRVNfU0VUID0gQXJyYXlzLmFzTGlz\ndCgKICAgICAgICBuZXcgU3RyaW5nW117CiAgICAgICAgImphdmEudXRpbC5T\nZXQiLCAiamF2YS51dGlsLkFic3RyYWN0U2V0IiwgImphdmEudXRpbC5FbnVt\nU2V0IiwgCiAgICAgICAgImphdmEudXRpbC5IYXNoU2V0IiwgImphdmEudXRp\nbC5MaW5rZWRMaXN0IiwgImphdmEudXRpbC5MaW5rZWRIYXNoU2V0IiwgCiAg\nICAgICAgImphdmEudXRpbC5Tb3J0ZWRTZXQiLCAiamF2YS51dGlsLlRyZWVT\nZXQifSk7CiAgICBwcml2YXRlIHN0YXRpYyBMaXN0PFN0cmluZz4gQ0xBU1NO\nQU1FU19NQVAgPSBBcnJheXMuYXNMaXN0KAogICAgICAgIG5ldyBTdHJpbmdb\nXXsKICAgICAgICAiamF2YS51dGlsLk1hcCIsICJqYXZhLnV0aWwuQWJzdHJh\nY3RNYXAiLCAiamF2YS51dGlsLkVudW1NYXAiLCAKICAgICAgICAiamF2YS51\ndGlsLkhhc2hNYXAiLCAgImphdmEudXRpbC5IYXNodGFibGUiLCAKICAgICAg\nICAiamF2YS51dGlsLklkZW50aXR5SGFzaE1hcCIsICAiamF2YS51dGlsLkxp\nbmtlZEhhc2hNYXAiLCAKICAgICAgICAiamF2YS51dGlsLlByb3BlcnRpZXMi\nLCAiamF2YS51dGlsLlNvcnRlZE1hcCIsIAogICAgICAgICJqYXZhLnV0aWwu\nVHJlZU1hcCJ9KTsKICAgIHByaXZhdGUgc3RhdGljIExpc3Q8U3RyaW5nPiBD\nTEFTU05BTUVTX0NPTExFQ1RJT04gPSBBcnJheXMuYXNMaXN0KAogICAgICAg\nIG5ldyBTdHJpbmdbXXsKICAgICAgICAiamF2YS51dGlsLkNvbGxlY3Rpb24i\nLCAiamF2YS51dGlsLkFic3RyYWN0Q29sbGVjdGlvbiIsIAogICAgICAgICJq\nYXZhLnV0aWwuQWJzdHJhY3RRdWV1ZSIsICJqYXZhLnV0aWwuUXVldWUiLCAK\nICAgICAgICAiamF2YS51dGlsLlByaW9yaXR5UXVldWUifSk7CiAgICAKICAg\nIC8qKgogICAgICogR2V0cyB0aGUgZnVsbHktcXVhbGlmaWVkIG5hbWUgb2Yg\nbWVtYmVyIGNsYXNzIGluIEpQQSAyLjAgdHlwZSBzeXN0ZW0sCiAgICAgKiBn\naXZlbiB0aGUgZnVsbHktcXVhbGlmaWVkIG5hbWUgb2YgYSBKYXZhIGNsYXNz\nLgogICAgICogIAogICAgICovCiAgICBwcml2YXRlIFR5cGVDYXRlZ29yeSB0\nb01ldGFNb2RlbFR5cGVDYXRlZ29yeShUeXBlTWlycm9yIG1pcnJvciwgCiAg\nICAgICAgU3RyaW5nIG5hbWUpIHsKICAgICAgICBpZiAobWlycm9yLmdldEtp\nbmQoKSA9PSBUeXBlS2luZC5BUlJBWSkKICAgICAgICAgICAgcmV0dXJuIFR5\ncGVDYXRlZ29yeS5MSVNUOwogICAgICAgIGlmIChDTEFTU05BTUVTX0NPTExF\nQ1RJT04uY29udGFpbnMobmFtZSkpCiAgICAgICAgICAgIHJldHVybiBUeXBl\nQ2F0ZWdvcnkuQ09MTEVDVElPTjsKICAgICAgICBpZiAoQ0xBU1NOQU1FU19M\nSVNULmNvbnRhaW5zKG5hbWUpKQogICAgICAgICAgICByZXR1cm4gVHlwZUNh\ndGVnb3J5LkxJU1Q7CiAgICAgICAgaWYgKENMQVNTTkFNRVNfU0VULmNvbnRh\naW5zKG5hbWUpKQogICAgICAgICAgICByZXR1cm4gVHlwZUNhdGVnb3J5LlNF\nVDsKICAgICAgICBpZiAoQ0xBU1NOQU1FU19NQVAuY29udGFpbnMobmFtZSkp\nCiAgICAgICAgICAgIHJldHVybiBUeXBlQ2F0ZWdvcnkuTUFQOwogICAgICAg\nIHJldHVybiBUeXBlQ2F0ZWdvcnkuQVRUUklCVVRFOwogICAgfQogICAgCiAg\nICAvKioKICAgICAqIEluaXRpYWxpemF0aW9uLgogICAgICovCiAgICBAT3Zl\ncnJpZGUKICAgIHB1YmxpYyBzeW5jaHJvbml6ZWQgdm9pZCBpbml0KFByb2Nl\nc3NpbmdFbnZpcm9ubWVudCBwcm9jZXNzaW5nRW52KSB7CiAgICAgICAgc3Vw\nZXIuaW5pdChwcm9jZXNzaW5nRW52KTsKICAgICAgICBhY3RpdmUgPSAidHJ1\nZSIuZXF1YWxzSWdub3JlQ2FzZShnZXRPcHRpb25WYWx1ZSgib3BlbmpwYS5t\nZXRhbW9kZWwiKSk7CiAgICAgICAgaWYgKCFhY3RpdmUpCiAgICAgICAgICAg\nIHJldHVybjsKICAgICAgICBwcm9jZXNzaW5nRW52LmdldE1lc3NhZ2VyKCku\ncHJpbnRNZXNzYWdlKERpYWdub3N0aWMuS2luZC5OT1RFLCBfbG9jLmdldCgi\nbW1nLXRvb2wtYmFubmVyIikudG9TdHJpbmcoKSk7CiAgICAgICAgbG9nZ2Vy\nID0gbmV3IENvbXBpbGVUaW1lTG9nZ2VyKHByb2Nlc3NpbmdFbnYsIGdldE9w\ndGlvblZhbHVlKCJvcGVuanBhLmxvZyIpKTsKICAgICAgICBzZXRTb3VyY2VW\nZXJzaW9uKCk7CiAgICAgICAgc2V0TmFtaW5nUG9saWN5KCk7CiAgICAgICAg\nc2V0SGVhZGVyKCk7CiAgICAgICAgaGFuZGxlciA9IG5ldyBTb3VyY2VBbm5v\ndGF0aW9uSGFuZGxlcihwcm9jZXNzaW5nRW52LCBsb2dnZXIpOwogICAgfQog\nICAgCiAgICAvKioKICAgICAqIFRoZSBlbnRyeSBwb2ludCBmb3IgamF2YSBj\nb21waWxlci4KICAgICAqLwogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgYm9v\nbGVhbiBwcm9jZXNzKFNldDw/IGV4dGVuZHMgVHlwZUVsZW1lbnQ+IGFubm9z\nLCBSb3VuZEVudmlyb25tZW50IHJvdW5kRW52KSB7CiAgICAgICAgaWYgKGFj\ndGl2ZSAmJiAhcm91bmRFbnYucHJvY2Vzc2luZ092ZXIoKSkgewogICAgICAg\nICAgICBTZXQ8PyBleHRlbmRzIEVsZW1lbnQ+IGVsZW1lbnRzID0gcm91bmRF\nbnYuZ2V0Um9vdEVsZW1lbnRzKCk7CiAgICAgICAgICAgIGZvciAoRWxlbWVu\ndCBlIDogZWxlbWVudHMpIHsKICAgICAgICAgICAgICAgIHByb2Nlc3MoKFR5\ncGVFbGVtZW50KSBlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAg\nICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIEdlbmVyYXRl\nIG1ldGEtbW9kZWwgc291cmNlIGNvZGUgZm9yIHRoZSBnaXZlbiB0eXBlLgog\nICAgICogCiAgICAgKiBAcmV0dXJuIHRydWUgaWYgY29kZSBpcyBnZW5lcmF0\nZWQgZm9yIHRoZSBnaXZlbiBlbGVtZW50LiBmYWxzZSBvdGhlcndpc2UuCiAg\nICAgKi8KICAgIHByaXZhdGUgYm9vbGVhbiBwcm9jZXNzKFR5cGVFbGVtZW50\nIGUpIHsKICAgIAlpZiAoIWhhbmRsZXIuaXNBbm5vdGF0ZWRBc0VudGl0eShl\nKSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAg\nICAgICBFbGVtZW50cyBlVXRpbHMgPSBwcm9jZXNzaW5nRW52LmdldEVsZW1l\nbnRVdGlscygpOwogICAgICAgIFN0cmluZyBvcmlnaW5hbENsYXNzID0gZVV0\naWxzLmdldEJpbmFyeU5hbWUoKFR5cGVFbGVtZW50KSBlKS50b1N0cmluZygp\nOwogICAgICAgIFN0cmluZyBvcmlnaW5hbFNpbXBsZUNsYXNzID0gZS5nZXRT\naW1wbGVOYW1lKCkudG9TdHJpbmcoKTsKICAgICAgICBTdHJpbmcgbWV0YUNs\nYXNzID0gZmFjdG9yeS5nZXRNZXRhTW9kZWxDbGFzc05hbWUob3JpZ2luYWxD\nbGFzcyk7CgogICAgICAgIFNvdXJjZUNvZGUgc291cmNlID0gbmV3IFNvdXJj\nZUNvZGUobWV0YUNsYXNzKTsKICAgICAgICBjb21tZW50KHNvdXJjZSk7CiAg\nICAgICAgYW5ub3RhdGUoc291cmNlLCBvcmlnaW5hbENsYXNzKTsKICAgICAg\nICBUeXBlRWxlbWVudCBzdXBDbHMgPSBoYW5kbGVyLmdldFBlcnNpc3RlbnRT\ndXBlcnR5cGUoZSk7CiAgICAgICAgaWYgKHN1cENscyAhPSBudWxsKSB7CiAg\nICAgICAgICAgIFN0cmluZyBzdXBlck5hbWUgPSBmYWN0b3J5LmdldE1ldGFN\nb2RlbENsYXNzTmFtZShzdXBDbHMudG9TdHJpbmcoKSk7CiAgICAgICAgICAg\nIHNvdXJjZS5nZXRUb3BMZXZlbENsYXNzKCkuc2V0U3VwZXIoc3VwZXJOYW1l\nKTsKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgUHJpbnRX\ncml0ZXIgd3JpdGVyID0gY3JlYXRlU291cmNlRmlsZShvcmlnaW5hbENsYXNz\nLCBtZXRhQ2xhc3MsIGUpOwogICAgICAgICAgICBTb3VyY2VDb2RlLkNsYXNz\nIG1vZGVsQ2xhc3MgPSBzb3VyY2UuZ2V0VG9wTGV2ZWxDbGFzcygpOwogICAg\nICAgICAgICBTZXQ8PyBleHRlbmRzIEVsZW1lbnQ+IG1lbWJlcnMgPSBoYW5k\nbGVyLmdldFBlcnNpc3RlbnRNZW1iZXJzKGUpOwogICAgICAgICAgICAKICAg\nICAgICAgICAgZm9yIChFbGVtZW50IG0gOiBtZW1iZXJzKSB7CiAgICAgICAg\nICAgICAgICBUeXBlTWlycm9yIGRlY2wgID0gaGFuZGxlci5nZXREZWNsYXJl\nZFR5cGUobSk7CiAgICAgICAgICAgICAgICBTdHJpbmcgZmllbGROYW1lID0g\naGFuZGxlci5nZXRQZXJzaXN0ZW50TWVtYmVyTmFtZShtKTsKICAgICAgICAg\nICAgICAgIFN0cmluZyBmaWVsZFR5cGUgPSBoYW5kbGVyLmdldERlY2xhcmVk\nVHlwZU5hbWUoZGVjbCk7CiAgICAgICAgICAgICAgICBUeXBlQ2F0ZWdvcnkg\ndHlwZUNhdGVnb3J5ID0gdG9NZXRhTW9kZWxUeXBlQ2F0ZWdvcnkoZGVjbCwg\nZmllbGRUeXBlKTsKICAgICAgICAgICAgICAgIFN0cmluZyBtZXRhTW9kZWxU\neXBlID0gdHlwZUNhdGVnb3J5LmdldE1ldGFNb2RlbFR5cGUoKTsKICAgICAg\nICAgICAgICAgIFNvdXJjZUNvZGUuRmllbGQgbW9kZWxGaWVsZCA9IG51bGw7\nCiAgICAgICAgICAgICAgICBzd2l0Y2ggKHR5cGVDYXRlZ29yeSkgewogICAg\nICAgICAgICAgICAgY2FzZSBBVFRSSUJVVEU6CiAgICAgICAgICAgICAgICAg\nICAgbW9kZWxGaWVsZCA9IG1vZGVsQ2xhc3MuYWRkRmllbGQoZmllbGROYW1l\nLCBtZXRhTW9kZWxUeXBlKTsKICAgICAgICAgICAgICAgICAgICBtb2RlbEZp\nZWxkLmFkZFBhcmFtZXRlcihvcmlnaW5hbFNpbXBsZUNsYXNzKQogICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAuYWRkUGFyYW1ldGVyKGZpZWxkVHlw\nZSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAg\nICBjYXNlIENPTExFQ1RJT046CiAgICAgICAgICAgICAgICBjYXNlIExJU1Q6\nCiAgICAgICAgICAgICAgICBjYXNlIFNFVDoKICAgICAgICAgICAgICAgICAg\nICBUeXBlTWlycm9yIHBhcmFtICAgPSBoYW5kbGVyLmdldFR5cGVQYXJhbWV0\nZXIobSwgZGVjbCwgMCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgU3Ry\naW5nIGVsZW1lbnRUeXBlID0gaGFuZGxlci5nZXREZWNsYXJlZFR5cGVOYW1l\nKHBhcmFtKTsKICAgICAgICAgICAgICAgICAgICBtb2RlbEZpZWxkID0gbW9k\nZWxDbGFzcy5hZGRGaWVsZChmaWVsZE5hbWUsIG1ldGFNb2RlbFR5cGUpOwog\nICAgICAgICAgICAgICAgICAgIG1vZGVsRmllbGQuYWRkUGFyYW1ldGVyKG9y\naWdpbmFsU2ltcGxlQ2xhc3MpCiAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgIC5hZGRQYXJhbWV0ZXIoZWxlbWVudFR5cGUpOwogICAgICAgICAgICAg\nICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSBNQVA6CiAgICAg\nICAgICAgICAgICAgICAgVHlwZU1pcnJvciBrZXkgICA9IGhhbmRsZXIuZ2V0\nVHlwZVBhcmFtZXRlcihtLCBkZWNsLCAwLCBmYWxzZSk7CiAgICAgICAgICAg\nICAgICAgICAgVHlwZU1pcnJvciB2YWx1ZSA9IGhhbmRsZXIuZ2V0VHlwZVBh\ncmFtZXRlcihtLCBkZWNsLCAxLCB0cnVlKTsKICAgICAgICAgICAgICAgICAg\nICBTdHJpbmcga2V5VHlwZSA9IGhhbmRsZXIuZ2V0RGVjbGFyZWRUeXBlTmFt\nZShrZXkpOwogICAgICAgICAgICAgICAgICAgIFN0cmluZyB2YWx1ZVR5cGUg\nPSBoYW5kbGVyLmdldERlY2xhcmVkVHlwZU5hbWUodmFsdWUpOwogICAgICAg\nICAgICAgICAgICAgIG1vZGVsRmllbGQgPSBtb2RlbENsYXNzLmFkZEZpZWxk\nKGZpZWxkTmFtZSwgbWV0YU1vZGVsVHlwZSk7CiAgICAgICAgICAgICAgICAg\nICAgbW9kZWxGaWVsZC5hZGRQYXJhbWV0ZXIob3JpZ2luYWxTaW1wbGVDbGFz\ncykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZFBhcmFtZXRl\ncihrZXlUeXBlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRk\nUGFyYW1ldGVyKHZhbHVlVHlwZSk7CiAgICAgICAgICAgICAgICAgICAgYnJl\nYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBtb2RlbEZp\nZWxkLm1ha2VQdWJsaWMoKS5tYWtlU3RhdGljKCkubWFrZVZvbGF0aWxlKCk7\nCiAgICAgICAgICAgIH0KICAgICAgICAgICAgc291cmNlLndyaXRlKHdyaXRl\ncik7CiAgICAgICAgICAgIHdyaXRlci5mbHVzaCgpOwogICAgICAgICAgICB3\ncml0ZXIuY2xvc2UoKTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAg\nICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUxKSB7CiAgICAgICAgICAgIGxvZ2dl\nci5lcnJvcihfbG9jLmdldCgibW1nLXByb2Nlc3MtZXJyb3IiLCBlLmdldFF1\nYWxpZmllZE5hbWUoKSksIGUxKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNl\nOwogICAgICAgIH0gZmluYWxseSB7CgogICAgICAgIH0KICAgIH0KICAgIAog\nICAgcHJpdmF0ZSB2b2lkIGFubm90YXRlKFNvdXJjZUNvZGUgc291cmNlLCBT\ndHJpbmcgb3JpZ2luYWxDbGFzcykgewogICAgICAgIFNvdXJjZUNvZGUuQ2xh\nc3MgY2xzID0gc291cmNlLmdldFRvcExldmVsQ2xhc3MoKTsKICAgICAgICBj\nbHMuYWRkQW5ub3RhdGlvbihTdGF0aWNNZXRhbW9kZWwuY2xhc3MuZ2V0TmFt\nZSgpKQogICAgICAgICAgICAuYWRkQXJndW1lbnQoInZhbHVlIiwgb3JpZ2lu\nYWxDbGFzcyArICIuY2xhc3MiLCBmYWxzZSk7CiAgICAgICAgaWYgKGdlbmVy\nYXRlZFNvdXJjZVZlcnNpb24gPj0gNikgewogICAgICAgICAgICBjbHMuYWRk\nQW5ub3RhdGlvbihHZW5lcmF0ZWQuY2xhc3MuZ2V0TmFtZSgpKQogICAgICAg\nICAgICAuYWRkQXJndW1lbnQoInZhbHVlIiwgdGhpcy5nZXRDbGFzcygpLmdl\ndE5hbWUoKSkKICAgICAgICAgICAgLmFkZEFyZ3VtZW50KCJkYXRlIiwgbmV3\nIERhdGUoKS50b1N0cmluZygpKTsKICAgICAgICB9CiAgICB9CiAgICAKICAg\nIHByaXZhdGUgdm9pZCBjb21tZW50KFNvdXJjZUNvZGUgc291cmNlKSB7CiAg\nICAgICAgaWYgKGhlYWRlciAhPSBudWxsKQogICAgICAgICAgICBzb3VyY2Uu\nYWRkQ29tbWVudChmYWxzZSwgaGVhZGVyKTsKICAgICAgICBTdHJpbmcgZGVm\nYXVsdEhlYWRlciA9IF9sb2MuZ2V0KCJtbWctdG9vbC1zaWduIikuZ2V0TWVz\nc2FnZSgpOwogICAgICAgIHNvdXJjZS5hZGRDb21tZW50KGZhbHNlLCBkZWZh\ndWx0SGVhZGVyKTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBQYXJzZSBh\nbm5vdGF0aW9uIHByb2Nlc3NvciBvcHRpb24gPGNvZGU+LUFvcGVuanBhLnNv\ndXJjZT1uPC9jb2RlPiB0byBkZXRlY3QKICAgICAqIHRoZSBzb3VyY2UgdmVy\nc2lvbiBmb3IgdGhlIGdlbmVyYXRlZCBjbGFzc2VzLiAKICAgICAqIG4gbXVz\ndCBiZSBhIGludGVnZXIuIERlZmF1bHQgb3Igd3Jvbmcgc3BlY2lmaWNhdGlv\nbiByZXR1cm5zIDYuCiAgICAgKi8KICAgIHByaXZhdGUgdm9pZCBzZXRTb3Vy\nY2VWZXJzaW9uKCkgewogICAgICAgIFN0cmluZyB2ZXJzaW9uID0gZ2V0T3B0\naW9uVmFsdWUoIm9wZW5qcGEuc291cmNlIik7CiAgICAgICAgaWYgKHZlcnNp\nb24gIT0gbnVsbCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAg\nICAgZ2VuZXJhdGVkU291cmNlVmVyc2lvbiA9IEludGVnZXIucGFyc2VJbnQo\ndmVyc2lvbik7CiAgICAgICAgICAgIH0gY2F0Y2ggKE51bWJlckZvcm1hdEV4\nY2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAgICBsb2dnZXIud2FybihfbG9j\nLmdldCgibW1nLWJhZC1zb3VyY2UiLCB2ZXJzaW9uLCA2KSk7CiAgICAgICAg\nICAgICAgICBnZW5lcmF0ZWRTb3VyY2VWZXJzaW9uID0gNjsKICAgICAgICAg\nICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGdlbmVyYXRlZFNv\ndXJjZVZlcnNpb24gPSA2OwogICAgICAgIH0KICAgIH0KICAgIAogICAgcHJp\ndmF0ZSB2b2lkIHNldE5hbWluZ1BvbGljeSgpIHsKICAgICAgICBTdHJpbmcg\ncG9saWN5ID0gZ2V0T3B0aW9uVmFsdWUoIm9wZW5qcGEubmFtaW5nIik7CiAg\nICAgICAgaWYgKHBvbGljeSAhPSBudWxsKSB7CiAgICAgICAgICAgIHRyeSB7\nCiAgICAgICAgICAgICAgICBmYWN0b3J5ID0gKE1ldGFEYXRhRmFjdG9yeSlD\nbGFzcy5mb3JOYW1lKHBvbGljeSkubmV3SW5zdGFuY2UoKTsKICAgICAgICAg\nICAgfSBjYXRjaCAoVGhyb3dhYmxlIGUpIHsKICAgICAgICAgICAgICAgIGxv\nZ2dlci53YXJuKF9sb2MuZ2V0KCJtbWctYmFkLW5hbWluZyIsIHBvbGljeSwg\nZSkpOwogICAgICAgICAgICAgICAgZmFjdG9yeSA9IG5ldyBQZXJzaXN0ZW5j\nZU1ldGFEYXRhRmFjdG9yeSgpOwogICAgICAgICAgICB9CiAgICAgICAgfSBl\nbHNlIHsKICAgICAgICAgICAgZmFjdG9yeSA9IG5ldyBQZXJzaXN0ZW5jZU1l\ndGFEYXRhRmFjdG9yeSgpOwogICAgICAgIH0KICAgIH0KICAgIAogICAgcHJp\ndmF0ZSB2b2lkIHNldEhlYWRlcigpIHsKICAgICAgICBTdHJpbmcgaGVhZGVy\nT3B0aW9uID0gZ2V0T3B0aW9uVmFsdWUoIm9wZW5qcGEuaGVhZGVyIik7CiAg\nICAgICAgaWYgKGhlYWRlck9wdGlvbiA9PSBudWxsKSB7CiAgICAgICAgICAg\nIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKCJBU0wiLmVxdWFsc0ln\nbm9yZUNhc2UoaGVhZGVyT3B0aW9uKSkgewogICAgICAgICAgICBoZWFkZXIg\nPSBfbG9jLmdldCgibW1nLWFzbC1oZWFkZXIiKS5nZXRNZXNzYWdlKCk7CiAg\nICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\nICAgIFVSTCB1cmwgPSBuZXcgVVJMKGhlYWRlck9wdGlvbik7CiAgICAgICAg\nICAgICAgICBoZWFkZXIgPSB1cmwuZ2V0Q29udGVudCgpLnRvU3RyaW5nKCk7\nCiAgICAgICAgICAgIH0gY2F0Y2ggKFRocm93YWJsZSB0KSB7CiAgICAgICAg\nICAgICAgICAKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIAog\nICAgLyoqCiAgICAgKiBDcmVhdGVzIGEgZmlsZSB3aGVyZSBzb3VyY2UgY29k\nZSBvZiB0aGUgZ2l2ZW4gbWV0YUNsYXNzIHdpbGwgYmUgd3JpdHRlbi4KICAg\nICAqIAogICAgICovCiAgICBwcml2YXRlIFByaW50V3JpdGVyIGNyZWF0ZVNv\ndXJjZUZpbGUoU3RyaW5nIG9yaWdpbmFsQ2xhc3MsIFN0cmluZyBtZXRhQ2xh\nc3MsIFR5cGVFbGVtZW50IGUpIAogICAgICAgIHRocm93cyBJT0V4Y2VwdGlv\nbiB7CiAgICAgICAgSmF2YUZpbGVPYmplY3QgamF2YUZpbGUgPSBwcm9jZXNz\naW5nRW52LmdldEZpbGVyKCkuY3JlYXRlU291cmNlRmlsZShtZXRhQ2xhc3Ms\nIGUpOwogICAgICAgIGxvZ2dlci5pbmZvKF9sb2MuZ2V0KCJtbWctcHJvY2Vz\ncyIsIGphdmFGaWxlLnRvVXJpKCkubm9ybWFsaXplKCkpKTsKICAgICAgICBy\nZXR1cm4gbmV3IFByaW50V3JpdGVyKGphdmFGaWxlLm9wZW5Xcml0ZXIoKSk7\nCiAgICB9CiAgICAKICAgIC8qKgogICAgICogR2V0IHRoZSB2YWx1ZSBmb3Ig\ndGhlIGdpdmVuIGtleXMsIHdob2V2ZXIgbWF0Y2hlcyBmaXJzdCwgaW4gdGhl\nIGN1cnJlbnQgYXZhaWxhYmxlIG9wdGlvbnMuCiAgICAgKi8KICAgIHByaXZh\ndGUgU3RyaW5nIGdldE9wdGlvblZhbHVlKFN0cmluZy4uLiBrZXlzKSB7CiAg\nICAgICAgTWFwPFN0cmluZyxTdHJpbmc+IG9wdGlvbnMgPSBwcm9jZXNzaW5n\nRW52LmdldE9wdGlvbnMoKTsKICAgICAgICBmb3IgKFN0cmluZyBrZXkgOiBr\nZXlzKSB7CiAgICAgICAgICAgIGlmIChvcHRpb25zLmNvbnRhaW5zS2V5KGtl\neSkpCiAgICAgICAgICAgICAgICByZXR1cm4gb3B0aW9ucy5nZXQoa2V5KTsK\nICAgICAgICB9CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9Cn0K\n","encoding":"base64"}

