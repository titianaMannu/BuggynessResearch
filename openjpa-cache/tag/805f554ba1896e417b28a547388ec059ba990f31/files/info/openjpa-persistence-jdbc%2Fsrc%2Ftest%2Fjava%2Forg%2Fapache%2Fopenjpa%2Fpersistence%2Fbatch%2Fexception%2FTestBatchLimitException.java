{"sha":"b102c9a9e119612a91b5d10bf1b90e41499f6cf1","node_id":"MDQ6QmxvYjIwNjM2NDpiMTAyYzlhOWUxMTk2MTJhOTFiNWQxMGJmMWI5MGU0MTQ5OWY2Y2Yx","size":14600,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/b102c9a9e119612a91b5d10bf1b90e41499f6cf1","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuYmF0Y2gu\nZXhjZXB0aW9uOwoKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1h\nbmFnZXI7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2Vy\nRmFjdG9yeTsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5jb25m\nLkpEQkNDb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMuc3FsLkRCRGljdGlvbmFyeTsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLnNxbC5PcmFjbGVEaWN0aW9uYXJ5OwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2Vy\nRmFjdG9yeVNQSTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0\nZW5jZS50ZXN0LlBlcnNpc3RlbmNlVGVzdENhc2U7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEudXRpbC5FeGNlcHRpb25JbmZvOwoKLy9UaGlzIHRlc3Qg\nd2FzIGNyZWF0ZWQgZm9yIE9QRU5KUEEtMTU1MC4gIEluIHRoaXMgaXNzdWUg\ndGhlIHVzZXIgd2FzCi8vbm90IGFibGUgdG8gZ2V0IHRoZSAnZmFpbGVkIG9i\namVjdCcgKHRoZSBvYmplY3QgY2F1c2luZyB0aGUgZmFpbHVyZSkgd2hlbgov\nL2JhdGNoIGxpbWl0IHdhcyAtMSBvciBhIHZhbHVlIGdyZWF0ZXIgdGhhbiAx\nLiAgQWxzbywgdGhleSBmb3VuZCB0aGF0IHRoZQovLydwYXJhbXMnIGxpc3Rl\nZCBpbiB0aGUgcHJlcGFyZWQgc3RhdGVtZW50IHdlcmUgbWlzc2luZy4gIFRo\naXMgdGVzdCB3aWxsIHNldAovL3ZhcmlvdXMgYmF0Y2ggbGltaXRzIGFuZCB2\nZXJpZnkgdGhhdCB3aXRoIHRoZSBmaXggdG8gMTU1MCwgdGhlIGNvcnJlY3QK\nLy8nZmFpbGVkIG9iamVjdCcgYW5kIHByZXBhcmVkIHN0YXRlbWVudCBpcyBy\nZXR1cm5lZC4gCnB1YmxpYyBjbGFzcyBUZXN0QmF0Y2hMaW1pdEV4Y2VwdGlv\nbiBleHRlbmRzIFBlcnNpc3RlbmNlVGVzdENhc2UgewoKICAgIHN0YXRpYyBF\nbnQxIGV4cGVjdGVkRmFpbGVkT2JqZWN0OwogICAgc3RhdGljIEVudDEgZXhw\nZWN0ZWRGYWlsZWRPYmplY3RPcmFjbGU7CiAgICBzdGF0aWMgYm9vbGVhbiBp\nc09yYWNsZSA9IGZhbHNlOwogICAgZmluYWwgU3RyaW5nIGV4cGVjdGVkRmFp\nbHVyZU1zZyA9CiAgICAgICAgIklOU0VSVCBJTlRPIEVudDEgKHBrLCBuYW1l\nKSBWQUxVRVMgKD8sID8pIFtwYXJhbXM9KGludCkgMjAwLCAoU3RyaW5nKSB0\nd29odW5kcmVkXSI7CiAgICBmaW5hbCBTdHJpbmcgZXhwZWN0ZWRGYWlsdXJl\nTXNnMTggPQogICAgICAgICJJTlNFUlQgSU5UTyBFbnQxIChwaywgbmFtZSkg\nVkFMVUVTICg/LCA/KSBbcGFyYW1zPShpbnQpIDE4LCAoU3RyaW5nKSBuYW1l\nMThdIjsKICAgIFN0cmluZyBleHBlY3RlZEZhaWx1cmVNc2dPcmFjbGUgPSBl\neHBlY3RlZEZhaWx1cmVNc2cxODsKCiAgICBwdWJsaWMgRW50aXR5TWFuYWdl\nckZhY3RvcnkgbmV3RW1mKFN0cmluZyBiYXRjaExpbWl0KSB7CiAgICAgICAg\nT3BlbkpQQUVudGl0eU1hbmFnZXJGYWN0b3J5U1BJIGVtZiA9CiAgICAgICAg\nICAgIGNyZWF0ZUVNRihFbnQxLmNsYXNzLCAKICAgICAgICAgICAgICAgICJv\ncGVuanBhLmpkYmMuU3luY2hyb25pemVNYXBwaW5ncyIsIAogICAgICAgICAg\nICAgICAgImJ1aWxkU2NoZW1hKEZvcmVpZ25LZXlzPXRydWUpIiwKICAgICAg\nICAgICAgICAgICJvcGVuanBhLmpkYmMuREJEaWN0aW9uYXJ5IiwgYmF0Y2hM\naW1pdCwgCiAgICAgICAgICAgICAgICAib3BlbmpwYS5Db25uZWN0aW9uRmFj\ndG9yeVByb3BlcnRpZXMiLCAiUHJpbnRQYXJhbWV0ZXJzPXRydWUiLAogICAg\nICAgICAgICAgICAgQ0xFQVJfVEFCTEVTKTsKCiAgICAgICAgYXNzZXJ0Tm90\nTnVsbCgiVW5hYmxlIHRvIGNyZWF0ZSBFbnRpdHlNYW5hZ2VyRmFjdG9yeSIs\nIGVtZik7CiAgICAgICAgSkRCQ0NvbmZpZ3VyYXRpb24gY29uZiA9IChKREJD\nQ29uZmlndXJhdGlvbikgZW1mLmdldENvbmZpZ3VyYXRpb24oKTsKICAgICAg\nICBEQkRpY3Rpb25hcnkgZGljdCA9IGNvbmYuZ2V0REJEaWN0aW9uYXJ5SW5z\ndGFuY2UoKTsKICAgICAgICBpc09yYWNsZSA9IGRpY3QgaW5zdGFuY2VvZiBP\ncmFjbGVEaWN0aW9uYXJ5OwogICAgICAgIHJldHVybiBlbWY7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgc2V0VXAoKSB7CiAgICAgICAgZXhwZWN0ZWRGYWls\nZWRPYmplY3QgPSBudWxsOwogICAgICAgIGV4cGVjdGVkRmFpbGVkT2JqZWN0\nT3JhY2xlID0gbnVsbDsKICAgIH0KCiAgICAvLyBUZXN0IHRoYXQgd2UgZ2V0\nIHRoZSBjb3JyZWN0ICdmYWlsZWQgb2JqZWN0JyB3aGVuIHdlIGhhdmUgYSBi\nYXRjaExpbXQKICAgIC8vIG9mIFggYW5kIFkgcm93cywgd2hlcmUgWD5ZLiBB\nIGR1cGxpY2F0ZSByb3cgd2lsbCBiZSBpbnNlcnRlZAogICAgLy8gc29tZXRp\nbWUgd2l0aGluIHRoZSBZIHJvd3MuIFRoaXMgd2lsbCB2ZXJpZnkgdGhhdCB3\nZSBnZXQgdGhlIHJpZ2h0CiAgICAvLyAnZmFpbGVkIG9iamVjdCcgYW5kIG1l\nc3NhZ2UuCiAgICBwdWJsaWMgdm9pZCB0ZXN0RXhjZXB0aW9uSW5GaXJzdEJh\ndGNoKCkgdGhyb3dzIFRocm93YWJsZSB7CiAgICAgICAgRW50aXR5TWFuYWdl\nckZhY3RvcnkgZW1mID0gbmV3RW1mKCJiYXRjaExpbWl0PS0xIik7CiAgICAg\nICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2Vy\nKCk7CgogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKICAg\nICAgICBlbS5wZXJzaXN0KG5ldyBFbnQxKDEsICJvbmUiKSk7CiAgICAgICAg\nZXhwZWN0ZWRGYWlsZWRPYmplY3QgPSBuZXcgRW50MSgyMDAsICJ0d29odW5k\ncmVkIik7CiAgICAgICAgZW0ucGVyc2lzdChleHBlY3RlZEZhaWxlZE9iamVj\ndCk7CiAgICAgICAgZW0ucGVyc2lzdChuZXcgRW50MSg1LCAiZml2ZSIpKTsK\nICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgICAg\nIGVtLmNsb3NlKCk7CgogICAgICAgIEVudGl0eU1hbmFnZXIgZW0yID0gZW1m\nLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKCiAgICAgICAgZW0yLmdldFRyYW5z\nYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICAvLyBzcGVjaWFsIGNhc2UsIGR1\nZSB0byBob3cgT3JhY2xlIHJldHVybnMgYWxsIHN0YXRlbWVudHMgaW4gdGhl\nIGJhdGNoCiAgICAgICAgZXhwZWN0ZWRGYWlsZWRPYmplY3RPcmFjbGUgPSBu\nZXcgRW50MSgxOCwgIm5hbWUxOCIpOwogICAgICAgIGV4cGVjdGVkRmFpbHVy\nZU1zZ09yYWNsZSA9IGV4cGVjdGVkRmFpbHVyZU1zZzE4OwogICAgICAgIGVt\nMi5wZXJzaXN0KGV4cGVjdGVkRmFpbGVkT2JqZWN0T3JhY2xlKTsKICAgICAg\nICBlbTIucGVyc2lzdChuZXcgRW50MSgyLCAidHdvIikpOwogICAgICAgIGVt\nMi5wZXJzaXN0KG5ldyBFbnQxKDIwMCwgInR3b2h1bmRyZWQiKSk7CiAgICAg\nICAgZW0yLnBlcnNpc3QobmV3IEVudDEoMywgInRocmVlIikpOwogICAgICAg\nIGVtMi5wZXJzaXN0KG5ldyBFbnQxKDEsICJvbmUiKSk7CiAgICAgICAgZW0y\nLnBlcnNpc3QobmV3IEVudDEoNSwgImZpdmUiKSk7CiAgICAgICAgCiAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgZW0yLmdldFRyYW5zYWN0aW9uKCkuY29t\nbWl0KCk7CiAgICAgICAgfSBjYXRjaCAoVGhyb3dhYmxlIGV4Y3ApIHsKICAg\nICAgICAgICAgdmVyaWZ5RXhEZXRhaWxzKGV4Y3ApOwogICAgICAgIH0KICAg\nICAgICBmaW5hbGx5IHsKICAgICAgICAgICAgaWYgKGVtMi5nZXRUcmFuc2Fj\ndGlvbigpLmlzQWN0aXZlKCkpIHsKICAgICAgICAgICAgICAgIGVtMi5nZXRU\ncmFuc2FjdGlvbigpLnJvbGxiYWNrKCk7CiAgICAgICAgICAgIH0KICAgICAg\nICAgICAgZW0yLmNsb3NlKCk7CiAgICAgICAgICAgIGVtZi5jbG9zZSgpOwog\nICAgICAgIH0KICAgIH0KCiAgICAvLyBUZXN0IHRoYXQgd2UgZ2V0IHRoZSBj\nb3JyZWN0ICdmYWlsZWQgb2JqZWN0JyB3aGVuIHRoZXJlIGlzIG9ubHkgb25l\nCiAgICAvLyByb3cgaW4gdGhlIGJhdGNoLiBUaGUgJ2JhdGNoaW5nJyBsb2dp\nYyBleGVjdXRlcyBhIGRpZmZlcmVudAogICAgLy8gc3RhdGVtZW50IHdoZW4g\nb25seSBvbmUgcm93IGlzIHRvIGJlIHVwZGF0ZWQvaW5zZXJ0ZWQuCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0RXhjZXB0aW9uU2luZ2xlQmF0Y2hlZFJvdygpIHRo\ncm93cyBUaHJvd2FibGUgewogICAgICAgIEVudGl0eU1hbmFnZXJGYWN0b3J5\nIGVtZiA9IG5ld0VtZigiYmF0Y2hMaW1pdD0tMSIpOwogICAgICAgIEVudGl0\neU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwoKICAg\nICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgZXhw\nZWN0ZWRGYWlsZWRPYmplY3QgPSBuZXcgRW50MSgyMDAsICJ0d29odW5kcmVk\nIik7CiAgICAgICAgZXhwZWN0ZWRGYWlsZWRPYmplY3RPcmFjbGUgPSBleHBl\nY3RlZEZhaWxlZE9iamVjdDsKICAgICAgICBleHBlY3RlZEZhaWx1cmVNc2dP\ncmFjbGUgPSBleHBlY3RlZEZhaWx1cmVNc2c7CiAgICAgICAgZW0ucGVyc2lz\ndChleHBlY3RlZEZhaWxlZE9iamVjdCk7CiAgICAgICAgZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwoKICAgICAg\nICBFbnRpdHlNYW5hZ2VyIGVtMiA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2Vy\nKCk7CgogICAgICAgIGVtMi5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAg\nICAgICAgZW0yLnBlcnNpc3QobmV3IEVudDEoMjAwLCAidHdvaHVuZHJlZCIp\nKTsKICAgICAgICAKICAgICAgICB0cnkgewogICAgICAgICAgICBlbTIuZ2V0\nVHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICB9IGNhdGNoIChUaHJv\nd2FibGUgZXhjcCkgewogICAgICAgICAgICB2ZXJpZnlFeERldGFpbHMoZXhj\ncCk7CiAgICAgICAgfQogICAgICAgIGZpbmFsbHkgewogICAgICAgICAgICBp\nZiAoZW0yLmdldFRyYW5zYWN0aW9uKCkuaXNBY3RpdmUoKSkgewogICAgICAg\nICAgICAgICAgZW0yLmdldFRyYW5zYWN0aW9uKCkucm9sbGJhY2soKTsKICAg\nICAgICAgICAgfQogICAgICAgICAgICBlbTIuY2xvc2UoKTsKICAgICAgICAg\nICAgZW1mLmNsb3NlKCk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIFRlc3Qg\ndGhhdCB3ZSBnZXQgdGhlIGNvcnJlY3QgJ2ZhaWxlZCBvYmplY3QnIGFuZCBt\nZXNzYWdlIHdoZW4gd2UKICAgIC8vIGhhdmUgYSBiYXRjaExpbXQgb2YgWCBh\nbmQgWSByb3dzLCB3aGVyZSBZPlguIEluIHRoaXMgY2FzZSwgdGhlCiAgICAv\nLyBiYXRjaCBpcyBleGVjdXRlZCBldmVyeSB0aW1lIHRoZSBiYXRjaExpbXQg\naXMgaGl0LiBBIGR1cGxpY2F0ZQogICAgLy8gcm93IHdpbGwgYmUgaW5zZXJ0\nZWQgc29tZXRpbWUgYWZ0ZXIgWCAoWCsxLCBpLmUgcmlnaHQgYXQgdGhlCiAg\nICAvLyBib3VuZGFyeSBvZiB0aGUgYmF0Y2gpIHRvIHZlcmlmeSB0aGF0IHdl\nIGdldCB0aGUgcmlnaHQKICAgIC8vICdmYWlsZWQgb2JqZWN0JyBhbmQgbXNn\nIG5vIG1hdHRlciB3aGljaCBiYXRjaCBhIGR1cGxpY2F0ZSBpcwogICAgLy8g\nY29udGFpbmVkIGluLiBUaGlzIHRlc3QgaXMgaW1wb3J0YW50IGJlY2F1c2Ug\nYXMgcGFydCBvZiB0aGUKICAgIC8vIGZpeCB0byBPUEVOSlBBLTE1MTAgd2Ug\naGFkIHRvIGFkZCBleHRyYSBsb2dpYyB0byBrZWVwIHRyYWNrCiAgICAvLyBv\nZiB3aGljaCBiYXRjaCB0aGUgJ2ZhaWxlZCBvYmplY3QnIHdhcyBpbiwgYWxv\nbmcgd2l0aCB0aGUKICAgIC8vIGluZGV4IGludG8gdGhhdCBiYXRjaC4KICAg\nIHB1YmxpYyB2b2lkIHRlc3RFeGNlcHRpb25JblNlY29uZEJhdGNoKCkgdGhy\nb3dzIFRocm93YWJsZSB7CiAgICAgICAgRW50aXR5TWFuYWdlckZhY3Rvcnkg\nZW1mID0gbmV3RW1mKCJiYXRjaExpbWl0PTkiKTsKICAgICAgICBFbnRpdHlN\nYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKCiAgICAg\nICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIGV4cGVj\ndGVkRmFpbGVkT2JqZWN0ID0gbmV3IEVudDEoMjAwLCAidHdvaHVuZHJlZCIp\nOwogICAgICAgIGV4cGVjdGVkRmFpbGVkT2JqZWN0T3JhY2xlID0gZXhwZWN0\nZWRGYWlsZWRPYmplY3Q7CiAgICAgICAgZXhwZWN0ZWRGYWlsdXJlTXNnT3Jh\nY2xlID0gZXhwZWN0ZWRGYWlsdXJlTXNnOwogICAgICAgIGVtLnBlcnNpc3Qo\nZXhwZWN0ZWRGYWlsZWRPYmplY3QpOwogICAgICAgIGVtLmdldFRyYW5zYWN0\naW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKCiAgICAgICAg\nRW50aXR5TWFuYWdlciBlbTIgPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigp\nOwoKICAgICAgICBlbTIuZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwoKICAg\nICAgICAvLyBQdXQgOSBvYmplY3RzL3Jvd3MgaW50byB0aGUgYmF0Y2gKICAg\nICAgICBmb3IgKGludCBpID0gMDsgaSA8IDk7IGkrKykgewogICAgICAgICAg\nICBlbTIucGVyc2lzdChuZXcgRW50MShpLCAibmFtZSIgKyBpKSk7CiAgICAg\nICAgfQoKICAgICAgICAvLyBQdXQgdGhlIGR1cGxpY2F0ZSBvYmplY3Qvcm93\nIGFzIHRoZSBmaXJzdCBlbGVtZW50IGluIHRoZSBzZWNvbmQgYmF0Y2guCiAg\nICAgICAgZW0yLnBlcnNpc3QobmV3IEVudDEoMjAwLCAidHdvaHVuZHJlZCIp\nKTsKICAgICAgICAKICAgICAgICB0cnkgewogICAgICAgICAgICBlbTIuZ2V0\nVHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICB9IGNhdGNoIChUaHJv\nd2FibGUgZXhjcCkgewogICAgICAgICAgICB2ZXJpZnlFeERldGFpbHMoZXhj\ncCk7CiAgICAgICAgfQogICAgICAgIGZpbmFsbHkgewogICAgICAgICAgICBp\nZiAoZW0yLmdldFRyYW5zYWN0aW9uKCkuaXNBY3RpdmUoKSkgewogICAgICAg\nICAgICAgICAgZW0yLmdldFRyYW5zYWN0aW9uKCkucm9sbGJhY2soKTsKICAg\nICAgICAgICAgfQogICAgICAgICAgICBlbTIuY2xvc2UoKTsKICAgICAgICAg\nICAgZW1mLmNsb3NlKCk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIFNhbWUg\nYXMgdGVzdFJvd3NHcmVhdGVyVGhhbkJhdGNoTGltaXRfYm91bmRhcnlDYXNl\nLCBidXQgdGhlIG9iamVjdCB0byBjYXVzZSB0aGUgZmFpbHVyZQogICAgLy8g\naXMgaW4gdGhlIG1pZGRsZSBvZiB0aGUgc2Vjb25kIGJhdGNoLiB0ZXN0RXhj\nZXB0aW9uaW5TZWNvbmRCYXRjaCBwdXRzCiAgICAvLyB0aGUgZmFpbGluZyBv\nYmplY3QgYXMgdGhlIGZpcnN0IGVsZW1lbnQgaW4gdGhlIHNlY29uZCBiYXRj\naCwgdGhpcyB0ZXN0IHB1dHMKICAgIC8vIGl0IHNvbWV3aGVyZSBpbiB0aGUg\nbWlkZGxlIG9mIHRoZSB0aGlyZCBiYXRjaC4gQWdhaW4sIHdlIHdhbnQgdG8g\nbWFrZSBzdXJlIG91cgogICAgLy8gaW5kZXhpbmcgaW50byB0aGUgYmF0Y2gg\nY29udGFpbmluZyB0aGUgJ2ZhaWxlZCBvYmplY3QnIGlzIGNvcnJlY3QuCiAg\nICBwdWJsaWMgdm9pZCB0ZXN0RXhjZXB0aW9uSW5UaGlyZEJhdGNoKCkgdGhy\nb3dzIFRocm93YWJsZSB7CiAgICAgICAgZmluYWwgaW50IGJhdGNoTGltaXQ9\nOTsKICAgICAgICBFbnRpdHlNYW5hZ2VyRmFjdG9yeSBlbWYgPSBuZXdFbWYo\nImJhdGNoTGltaXQ9IitiYXRjaExpbWl0KTsKICAgICAgICBFbnRpdHlNYW5h\nZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKCiAgICAgICAg\nZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIGV4cGVjdGVk\nRmFpbGVkT2JqZWN0ID0gbmV3IEVudDEoMjAwLCAidHdvaHVuZHJlZCIpOwog\nICAgICAgIGVtLnBlcnNpc3QoZXhwZWN0ZWRGYWlsZWRPYmplY3QpOwogICAg\nICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICAgICAgZW0u\nY2xvc2UoKTsKCiAgICAgICAgRW50aXR5TWFuYWdlciBlbTIgPSBlbWYuY3Jl\nYXRlRW50aXR5TWFuYWdlcigpOwoKICAgICAgICBlbTIuZ2V0VHJhbnNhY3Rp\nb24oKS5iZWdpbigpOwoKICAgICAgICAvLyBQZXJzaXN0IDIxIG9iamVjdHMv\ncm93cy4uLi5hcyBzdWNoIHdlIHdpbGwgaGF2ZSB0d28gJ2Z1bGwnCiAgICAg\nICAgLy8gYmF0Y2hlcyAoOSoyPTE4KSBhbmQgMyAoMjEtMTg9Mykgb2JqZWN0\ncy9yb3dzIGluIHRoZSAzcmQgYmF0Y2guCiAgICAgICAgaW50IGk9MDsKICAg\nICAgICBmb3IgKDsgaSA8IDIqYmF0Y2hMaW1pdDsgaSsrKSB7CiAgICAgICAg\nICAgIGVtMi5wZXJzaXN0KG5ldyBFbnQxKGksICJuYW1lIiArIGkpKTsKICAg\nICAgICB9CgogICAgICAgIC8vIG1hbnVhbGx5IGNyZWF0ZSB0aGlyZCBiYXRj\naCwgZHVlIHRvIGhvdyBPcmFjbGUgcmV0dXJucyBhbGwgc3RhdGVtZW50cyBp\nbiB0aGUgYmF0Y2gKICAgICAgICBleHBlY3RlZEZhaWxlZE9iamVjdE9yYWNs\nZSA9IG5ldyBFbnQxKGksICJuYW1lIiArIGkrKyk7CiAgICAgICAgZXhwZWN0\nZWRGYWlsdXJlTXNnT3JhY2xlID0gZXhwZWN0ZWRGYWlsdXJlTXNnMTg7CiAg\nICAgICAgZW0yLnBlcnNpc3QoZXhwZWN0ZWRGYWlsZWRPYmplY3RPcmFjbGUp\nOyAgICAvLyAxOAogICAgICAgIGVtMi5wZXJzaXN0KG5ldyBFbnQxKGksICJu\nYW1lIiArIGkrKykpOyAgICAgLy8gMTkKICAgICAgICBlbTIucGVyc2lzdChu\nZXcgRW50MShpLCAibmFtZSIgKyBpKyspKTsgICAgIC8vIDIwCiAgICAgICAg\nZW0yLnBlcnNpc3QobmV3IEVudDEoaSwgIm5hbWUiICsgaSsrKSk7ICAgICAv\nLyAyMSAgICAgICAgCiAgICAgICAgLy8gUHV0IHRoZSBkdXBsaWNhdGUgcm93\nIGluIHRoZSAzcmQgYmF0Y2guCiAgICAgICAgZW0yLnBlcnNpc3QobmV3IEVu\ndDEoMjAwLCAidHdvaHVuZHJlZCIpKTsKICAgICAgICAvLyBQdXQgYSBmZXcg\nbW9yZSBvYmplY3RzIGludG8gdGhlIGJhdGNoLgogICAgICAgIGZvciAoaSA9\nIDIyOyBpIDwgNCpiYXRjaExpbWl0OyBpKyspIHsKICAgICAgICAgICAgZW0y\nLnBlcnNpc3QobmV3IEVudDEoaSwgIm5hbWUiICsgaSkpOwogICAgICAgIH0K\nCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZW0yLmdldFRyYW5zYWN0aW9u\nKCkuY29tbWl0KCk7CiAgICAgICAgfSBjYXRjaCAoVGhyb3dhYmxlIGV4Y3Ap\nIHsKICAgICAgICAgICAgdmVyaWZ5RXhEZXRhaWxzKGV4Y3ApOwogICAgICAg\nIH0KICAgICAgICBmaW5hbGx5IHsKICAgICAgICAgICAgaWYgKGVtMi5nZXRU\ncmFuc2FjdGlvbigpLmlzQWN0aXZlKCkpIHsKICAgICAgICAgICAgICAgIGVt\nMi5nZXRUcmFuc2FjdGlvbigpLnJvbGxiYWNrKCk7CiAgICAgICAgICAgIH0K\nICAgICAgICAgICAgZW0yLmNsb3NlKCk7CiAgICAgICAgICAgIGVtZi5jbG9z\nZSgpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBTaW1pbGFyIHRvIHRoZSBw\ncmV2aW91cyB0d28gdGVzdHMsIGJ1dCBsZXRzIHJ1biB0aGUgdGVzdCB3aXRo\nIGEgbGFyZ2UKICAgIC8vIGJhdGNoIHdpdGggYSBmYWlsdXJlLCBhbmQgdGhl\nbiBjb21taXQsIHRoZW4gcnVuIGxhcmdlIGJhdGNoZXMKICAgIC8vIGFnYWlu\nIHdpdGggZmFpbHVyZXMgYWdhaW4uLi4uLmp1c3Qgd2FudCB0byBtYWtlIHN1\ncmUgdGhpbmdzIGFyZSBub3QgaW4KICAgIC8vIHNvbWUgd2F5ICdyZS11c2Vk\nJyBiZXR3ZWVuIHRoZSB0d28gY29tbWl0cyBhcyBmYXIgYXMgdGhlIGluZGV4\nZXMgZ28uCiAgICBwdWJsaWMgdm9pZCB0ZXN0U2Vjb25kRXhjZXB0aW9uSGFz\nUmlnaHRJbmRleCgpIHRocm93cyBUaHJvd2FibGUgewogICAgICAgIGZpbmFs\nIGludCBiYXRjaExpbWl0PTk7CgogICAgICAgIHRlc3RFeGNlcHRpb25JblRo\naXJkQmF0Y2goKTsKCiAgICAgICAgRW50aXR5TWFuYWdlckZhY3RvcnkgZW1m\nID0gbmV3RW1mKCJiYXRjaExpbWl0PTkiKTsKICAgICAgICBFbnRpdHlNYW5h\nZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKCiAgICAgICAg\nZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwoKICAgICAgICBmb3IgKGlu\ndCBpID0gNCpiYXRjaExpbWl0OyBpIDwgNSpiYXRjaExpbWl0OyBpKyspIHsK\nICAgICAgICAgICAgZW0ucGVyc2lzdChuZXcgRW50MShpLCAibmFtZSIgKyBp\nKSk7CiAgICAgICAgfQoKICAgICAgICAvLyBtYW51YWxseSBjYXB0dXJlIHN0\nYXJ0IG9mIGJhdGNoLCBkdWUgdG8gaG93IE9yYWNsZSByZXR1cm5zIGFsbCBz\ndGF0ZW1lbnRzIGluIHRoZSBiYXRjaAogICAgICAgIGV4cGVjdGVkRmFpbGVk\nT2JqZWN0T3JhY2xlID0gbmV3IEVudDEoMjAwLCAidHdvaHVuZHJlZCIpOwog\nICAgICAgIGV4cGVjdGVkRmFpbHVyZU1zZ09yYWNsZSA9IGV4cGVjdGVkRmFp\nbHVyZU1zZzsKICAgICAgICBlbS5wZXJzaXN0KGV4cGVjdGVkRmFpbGVkT2Jq\nZWN0T3JhY2xlKTsKCiAgICAgICAgZm9yIChpbnQgaSA9IDUqYmF0Y2hMaW1p\ndDsgaSA8IDcqYmF0Y2hMaW1pdDsgaSsrKSB7CiAgICAgICAgICAgIGVtLnBl\ncnNpc3QobmV3IEVudDEoaSwgIm5hbWUiICsgaSkpOwogICAgICAgIH0KCiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5j\nb21taXQoKTsKICAgICAgICB9IGNhdGNoIChUaHJvd2FibGUgZXhjcCkgewog\nICAgICAgICAgICB2ZXJpZnlFeERldGFpbHMoZXhjcCk7CiAgICAgICAgfQog\nICAgICAgIGZpbmFsbHkgewogICAgICAgICAgICBpZiAoZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5pc0FjdGl2ZSgpKSB7CiAgICAgICAgICAgICAgICBlbS5nZXRU\ncmFuc2FjdGlvbigpLnJvbGxiYWNrKCk7CiAgICAgICAgICAgIH0KICAgICAg\nICAgICAgZW0uY2xvc2UoKTsKICAgICAgICAgICAgZW1mLmNsb3NlKCk7CiAg\nICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIHRlc3RFeGNlcHRpb25X\naXRoTXVsdGlwbGVDb21taXRzKCkgdGhyb3dzIFRocm93YWJsZSB7CiAgICAg\nICAgRW50aXR5TWFuYWdlckZhY3RvcnkgZW1mID0gbmV3RW1mKCJiYXRjaExp\nbWl0PS0xIik7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVh\ndGVFbnRpdHlNYW5hZ2VyKCk7CgogICAgICAgIGVtLmdldFRyYW5zYWN0aW9u\nKCkuYmVnaW4oKTsKICAgICAgICBlbS5wZXJzaXN0KG5ldyBFbnQxKDEsICJv\nbmUiKSk7CiAgICAgICAgZXhwZWN0ZWRGYWlsZWRPYmplY3QgPSBuZXcgRW50\nMSgyMDAsICJ0d29odW5kcmVkIik7CiAgICAgICAgZW0ucGVyc2lzdChleHBl\nY3RlZEZhaWxlZE9iamVjdCk7CiAgICAgICAgZW0ucGVyc2lzdChuZXcgRW50\nMSg1LCAiZml2ZSIpKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNv\nbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CgogICAgICAgIEVudGl0eU1h\nbmFnZXIgZW0yID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAg\nICBlbTIuZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIGVtMi5w\nZXJzaXN0KG5ldyBFbnQxKDQsICJmb3VyIikpOwogICAgICAgIGVtMi5wZXJz\naXN0KG5ldyBFbnQxKDAsICJ6ZXJvIikpOwogICAgICAgIGVtMi5wZXJzaXN0\nKG5ldyBFbnQxKDIsICJ0d28iKSk7CiAgICAgICAgZW0yLnBlcnNpc3QobmV3\nIEVudDEoMywgInRocmVlIikpOwogICAgICAgIGVtMi5nZXRUcmFuc2FjdGlv\nbigpLmNvbW1pdCgpOwoKICAgICAgICBlbTIuZ2V0VHJhbnNhY3Rpb24oKS5i\nZWdpbigpOwogICAgICAgIC8vIHNwZWNpYWwgY2FzZSwgZHVlIHRvIGhvdyBP\ncmFjbGUgcmV0dXJucyBhbGwgc3RhdGVtZW50cyBpbiB0aGUgYmF0Y2gKICAg\nICAgICBleHBlY3RlZEZhaWxlZE9iamVjdE9yYWNsZSA9IG5ldyBFbnQxKDE4\nLCAibmFtZTE4Iik7CiAgICAgICAgZXhwZWN0ZWRGYWlsdXJlTXNnT3JhY2xl\nID0gZXhwZWN0ZWRGYWlsdXJlTXNnMTg7CiAgICAgICAgZW0yLnBlcnNpc3Qo\nZXhwZWN0ZWRGYWlsZWRPYmplY3RPcmFjbGUpOwogICAgICAgIGVtMi5wZXJz\naXN0KG5ldyBFbnQxKDYsICJzaXgiKSk7CiAgICAgICAgZW0yLnBlcnNpc3Qo\nbmV3IEVudDEoMjAwLCAidHdvaHVuZHJlZCIpKTsKICAgICAgICBlbTIucGVy\nc2lzdChuZXcgRW50MSg3LCAic2V2ZW4iKSk7CiAgICAgICAgCiAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgZW0yLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0\nKCk7CiAgICAgICAgfSBjYXRjaCAoVGhyb3dhYmxlIGV4Y3ApIHsKICAgICAg\nICAgICAgdmVyaWZ5RXhEZXRhaWxzKGV4Y3ApOwogICAgICAgIH0KICAgICAg\nICBmaW5hbGx5IHsKICAgICAgICAgICAgaWYgKGVtMi5nZXRUcmFuc2FjdGlv\nbigpLmlzQWN0aXZlKCkpIHsKICAgICAgICAgICAgICAgIGVtMi5nZXRUcmFu\nc2FjdGlvbigpLnJvbGxiYWNrKCk7CiAgICAgICAgICAgIH0KICAgICAgICAg\nICAgZW0yLmNsb3NlKCk7CiAgICAgICAgICAgIGVtZi5jbG9zZSgpOwogICAg\nICAgIH0KICAgIH0KCiAgICAvLyBWZXJpZnkgdGhhdCB0aGUgcmVzdWx0YW50\nIGV4Y2VwdGlvbiBjb250YWlucyB0aGUgY29ycmVjdCAnZmFpbGVkIG9iamVj\ndCcKICAgIC8vIGFuZCBleGNlcHRpb24gbWVzc2FnZS4KICAgIHB1YmxpYyB2\nb2lkIHZlcmlmeUV4RGV0YWlscyhUaHJvd2FibGUgZXhjcCkgdGhyb3dzIFRo\ncm93YWJsZSB7CiAgICAgICAgLy8gVGhlIGV4Y2VwdGlvbiBzaG91bGQgY29u\ndGFpbiB0aGUgJ2ZhaWxlZCBvYmplY3QnCiAgICAgICAgdmVyaWZ5RmFpbGVk\nT2JqZWN0KGV4Y3ApOwogICAgICAgIC8vIFRoZSBzZWNvbmQgY2F1c2Ugc2hv\ndWxkIGNvbnRhaW4gdGhlIG1lc3NhZ2Ugd2hpY2ggc2hvd3MgdGhlIGZhaWxp\nbmcgcHJlcGFyZWQgc3RhdGVtZW50LgogICAgICAgIFRocm93YWJsZSBjYXVz\nZSA9IGV4Y3AuZ2V0Q2F1c2UoKS5nZXRDYXVzZSgpOwogICAgICAgIHZlcmlm\neUV4TXNnKGNhdXNlLmdldE1lc3NhZ2UoKSk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgdmVyaWZ5RmFpbGVkT2JqZWN0KFRocm93YWJsZSBleGNwKSB0aHJv\nd3MgVGhyb3dhYmxlIHsKICAgICAgICBpZiAoZXhjcCBpbnN0YW5jZW9mIEV4\nY2VwdGlvbkluZm8pIHsKICAgICAgICAgICAgRXhjZXB0aW9uSW5mbyBlID0g\nKEV4Y2VwdGlvbkluZm8pIGV4Y3A7CgogICAgICAgICAgICBFbnQxIGZhaWxl\nZE9iamVjdCA9IChFbnQxKSBlLmdldEZhaWxlZE9iamVjdCgpOwoKICAgICAg\nICAgICAgYXNzZXJ0Tm90TnVsbCgiRmFpbGVkIG9iamVjdCB3YXMgbnVsbC4i\nLCBmYWlsZWRPYmplY3QpOwogICAgICAgICAgICBpZiAoIWlzT3JhY2xlKSB7\nCiAgICAgICAgICAgICAgICBhc3NlcnRFcXVhbHMoZXhwZWN0ZWRGYWlsZWRP\nYmplY3QsIGZhaWxlZE9iamVjdCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAg\nICAgICAgICAgICAgICAvLyBzcGVjaWFsIGNhc2UsIGFzIE9yYWNsZSByZXR1\ncm5zIGFsbCBzdGF0ZW1lbnRzIGluIHRoZSBiYXRjaAogICAgICAgICAgICAg\nICAgYXNzZXJ0RXF1YWxzKGV4cGVjdGVkRmFpbGVkT2JqZWN0T3JhY2xlLCBm\nYWlsZWRPYmplY3QpOyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgfQog\nICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgdGhyb3cgZXhj\ncDsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZvaWQgdmVyaWZ5RXhN\nc2coU3RyaW5nIG1zZykgewogICAgICAgIGFzc2VydE5vdE51bGwoIkV4Y2Vw\ndGlvbiBtZXNzYWdlIHdhcyBudWxsLiIsIG1zZyk7CiAgICAgICAgaWYgKCFp\nc09yYWNsZSkgewogICAgICAgICAgICBhc3NlcnRUcnVlKCJEaWQgbm90IHNl\nZSBleHBlY3RlZCB0ZXh0IGluIG1lc3NhZ2UuIEV4cGVjdGVkIDwiICsgZXhw\nZWN0ZWRGYWlsdXJlTXNnICsgIj4gYnV0IHdhcyAiICsKICAgICAgICAgICAg\nICAgIG1zZywgbXNnLmNvbnRhaW5zKGV4cGVjdGVkRmFpbHVyZU1zZykpOwog\nICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIHNwZWNpYWwgY2FzZSwg\nYXMgT3JhY2xlIHJldHVybnMgYWxsIHN0YXRlbWVudHMgaW4gdGhlIGJhdGNo\nCiAgICAgICAgICAgIGFzc2VydFRydWUoIkRpZCBub3Qgc2VlIGV4cGVjdGVk\nIHRleHQgaW4gbWVzc2FnZS4gRXhwZWN0ZWQgPCIgKyBleHBlY3RlZEZhaWx1\ncmVNc2dPcmFjbGUgKyAiPiBidXQgd2FzICIgKwogICAgICAgICAgICAgICAg\nbXNnLCBtc2cuY29udGFpbnMoZXhwZWN0ZWRGYWlsdXJlTXNnT3JhY2xlKSk7\nCiAgICAgICAgfQogICAgfQp9Cgo=\n","encoding":"base64"}

