{"sha":"7505594a545e7255105731aa3b3725663b4e1f2c","node_id":"MDQ6QmxvYjIwNjM2NDo3NTA1NTk0YTU0NWU3MjU1MTA1NzMxYWEzYjM3MjU2NjNiNGUxZjJj","size":3844,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/7505594a545e7255105731aa3b3725663b4e1f2c","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuZXhjZXB0\naW9uOwoKaW1wb3J0IGphdmEuaW8uQnVmZmVyZWRSZWFkZXI7CmltcG9ydCBq\nYXZhLmlvLkZpbGU7CmltcG9ydCBqYXZhLmlvLkZpbGVSZWFkZXI7CmltcG9y\ndCBqYXZhLnV0aWwucmVnZXguUGF0dGVybjsKCmltcG9ydCBqYXZheC5wZXJz\naXN0ZW5jZS5FbnRpdHlNYW5hZ2VyOwppbXBvcnQgamF2YXgucGVyc2lzdGVu\nY2UuRW50aXR5TWFuYWdlckZhY3Rvcnk7CmltcG9ydCBqYXZheC5wZXJzaXN0\nZW5jZS5FbnRpdHlUcmFuc2FjdGlvbjsKaW1wb3J0IGphdmF4LnBlcnNpc3Rl\nbmNlLlJvbGxiYWNrRXhjZXB0aW9uOwoKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5wZXJzaXN0ZW5jZS50ZXN0LlBlcnNpc3RlbmNlVGVzdENhc2U7Cgpw\ndWJsaWMgY2xhc3MgVGVzdFBhcmFtZXRlckxvZ2dpbmcgZXh0ZW5kcyBQZXJz\naXN0ZW5jZVRlc3RDYXNlIHsKCiAgICBTdHJpbmcgX3JlZ2V4ID0gIi4qcGFy\nYW1zPS4qMSwuKl0iOwoKICAgIC8qCiAgICAgKiBQZXJzaXN0IHRoZSBzYW1l\nIHJvdyB0d2ljZSBpbiB0aGUgc2FtZSB0cmFuc2FjdGlvbiAtIHdpbGwgdGhy\nb3cgYW4gZXhjZXB0aW9uIHdpdGggdGhlIGZhaWxpbmcgU1FMIHN0YXRlbWVu\ndAogICAgICovCiAgICBwcml2YXRlIFJvbGxiYWNrRXhjZXB0aW9uIGdldFJv\nbGxiYWNrRXhjZXB0aW9uKE9iamVjdC4uLiBwcm9wcykgewogICAgICAgIEVu\ndGl0eU1hbmFnZXJGYWN0b3J5IGVtZiA9IGNyZWF0ZUVNRihwcm9wcyk7CiAg\nICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgRW50aXR5VHJhbnNhY3Rpb24gdHJhbiA9IGVtLmdl\ndFRyYW5zYWN0aW9uKCk7CgogICAgICAgIFBPYmplY3QgcDEsIHAyOwogICAg\nICAgIHAxID0gbmV3IFBPYmplY3QoKTsKICAgICAgICBwMiA9IG5ldyBQT2Jq\nZWN0KCk7CgogICAgICAgIHAxLnNldElkKDEpOwogICAgICAgIHAyLnNldElk\nKDEpOwoKICAgICAgICB0cnkgewogICAgICAgICAgICB0cmFuLmJlZ2luKCk7\nCiAgICAgICAgICAgIGVtLnBlcnNpc3QocDEpOwogICAgICAgICAgICBlbS5w\nZXJzaXN0KHAyKTsKICAgICAgICAgICAgdHJhbi5jb21taXQoKTsKICAgICAg\nICAgICAgZW0uY2xvc2UoKTsKICAgICAgICAgICAgZmFpbCgiRXhwZWN0ZWQg\nYSBSb2xsYmFja0V4Y2VwdGlvbiIpOwogICAgICAgICAgICByZXR1cm4gbnVs\nbDsKICAgICAgICB9IGNhdGNoIChSb2xsYmFja0V4Y2VwdGlvbiByZSkgewog\nICAgICAgICAgICByZXR1cm4gcmU7CiAgICAgICAgfSBmaW5hbGx5IHsKICAg\nICAgICAgICAgaWYgKHRyYW4uaXNBY3RpdmUoKSkgewogICAgICAgICAgICAg\nICAgdHJhbi5yb2xsYmFjaygpOwogICAgICAgICAgICB9CiAgICAgICAgICAg\nIGlmIChlbS5pc09wZW4oKSkgewogICAgICAgICAgICAgICAgZW0uY2xvc2Uo\nKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoZW1mLmlzT3Blbigp\nKSB7CiAgICAgICAgICAgICAgICBlbWYuY2xvc2UoKTsKICAgICAgICAgICAg\nfQogICAgICAgIH0KICAgIH0KCiAgICAvKgogICAgICogRW5zdXJlIHRoYXQg\ncGFyYW1ldGVyIHZhbHVlcyBhcmUgbm90IGluY2x1ZGVkIGluIGV4Y2VwdGlv\nbiB0ZXh0IGJ5IGRlZmF1bHQuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHRl\nc3ROb1BhcmFtc0J5RGVmYXVsdCgpIHsKICAgICAgICBSb2xsYmFja0V4Y2Vw\ndGlvbiBlID0gZ2V0Um9sbGJhY2tFeGNlcHRpb24oUE9iamVjdC5jbGFzcywg\nQ0xFQVJfVEFCTEVTKTsKCiAgICAgICAgYXNzZXJ0RmFsc2UoUGF0dGVybi5t\nYXRjaGVzKF9yZWdleCwgZS50b1N0cmluZygpKSk7CiAgICAgICAgVGhyb3dh\nYmxlIG5lc3RlZCA9IGUuZ2V0Q2F1c2UoKTsKICAgICAgICB3aGlsZSAobmVz\ndGVkICE9IG51bGwpIHsKICAgICAgICAgICAgaWYgKFBhdHRlcm4ubWF0Y2hl\ncygiLipJTlNFUlQuKiIsIG5lc3RlZC50b1N0cmluZygpKSkgewogICAgICAg\nICAgICAgICAgLy8gb25seSBjaGVjayBpZiB0aGUgbWVzc2FnZSBjb250YWlu\ncyB0aGUgaW5zZXJ0IHN0YXRlbWVudC4KICAgICAgICAgICAgICAgIGFzc2Vy\ndEZhbHNlKFBhdHRlcm4ubWF0Y2hlcyhfcmVnZXgsIG5lc3RlZC50b1N0cmlu\nZygpKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbmVzdGVkID0gbmVz\ndGVkLmdldENhdXNlKCk7CiAgICAgICAgfQogICAgfQoKICAgIC8qCiAgICAg\nKiBJZiB0aGUgRU1GIGlzIGNyZWF0ZWQgd2l0aCBQcmludFBhcmFtZXRlcnM9\ndHJ1ZSB0aGUgcGFyYW1ldGVyIHZhbHVlcyB3aWxsIGJlIGxvZ2dlZCBpbiBl\neGNlcHRpb24gdGV4dC4KICAgICAqLwogICAgcHVibGljIHZvaWQgdGVzdFBh\ncmFtc0VuYWJsZWRCeUNvbmZpZygpIHsKICAgICAgICBSb2xsYmFja0V4Y2Vw\ndGlvbiBlID0KICAgICAgICAgICAgZ2V0Um9sbGJhY2tFeGNlcHRpb24oUE9i\namVjdC5jbGFzcywgQ0xFQVJfVEFCTEVTLCAib3BlbmpwYS5Db25uZWN0aW9u\nRmFjdG9yeVByb3BlcnRpZXMiLAogICAgICAgICAgICAgICAgIlByaW50UGFy\nYW1ldGVycz10cnVlIik7CiAgICAgICAgYXNzZXJ0RmFsc2UoUGF0dGVybi5t\nYXRjaGVzKF9yZWdleCwgZS50b1N0cmluZygpKSk7CiAgICAgICAgVGhyb3dh\nYmxlIG5lc3RlZCA9IGUuZ2V0Q2F1c2UoKTsKICAgICAgICBhc3NlcnROb3RO\ndWxsKG5lc3RlZCk7IC8vIGV4cGVjdGluZyBhdCBsZWFzdCBvbmUgbmVzdGVk\nIGV4Y2VwdGlvbi4KICAgICAgICB3aGlsZSAobmVzdGVkICE9IG51bGwpIHsK\nICAgICAgICAgICAgaWYgKFBhdHRlcm4ubWF0Y2hlcygiLipJTlNFUlQuKiIs\nIG5lc3RlZC50b1N0cmluZygpKSkgewogICAgICAgICAgICAgICAgLy8gb25s\neSBjaGVjayBpZiB0aGUgbWVzc2FnZSBjb250YWlucyB0aGUgaW5zZXJ0IHN0\nYXRlbWVudC4KICAgICAgICAgICAgICAgIGFzc2VydFRydWUoUGF0dGVybi5t\nYXRjaGVzKF9yZWdleCwgbmVzdGVkLnRvU3RyaW5nKCkpKTsKICAgICAgICAg\nICAgfQogICAgICAgICAgICBuZXN0ZWQgPSBuZXN0ZWQuZ2V0Q2F1c2UoKTsK\nICAgICAgICB9CiAgICB9Cn0KCg==\n","encoding":"base64"}

