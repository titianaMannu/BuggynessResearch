{"sha":"da16ea344c41c6e55de6f2b1ef0bef386858b920","node_id":"MDQ6QmxvYjIwNjM2NDpkYTE2ZWEzNDRjNDFjNmU1NWRlNmYyYjFlZjBiZWYzODY4NThiOTIw","size":3357,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/da16ea344c41c6e55de6f2b1ef0bef386858b920","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuamRiYy51\ncGRhdGU7CgppbXBvcnQgamF2YS5zcWwuVGltZXN0YW1wOwoKaW1wb3J0IGph\ndmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXI7CgppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnRlc3QuU2luZ2xlRU1GVGVzdENh\nc2U7CgovKioKICogVGVzdHMgZm9yIHVwZGF0ZSBvbiBlbnRpdHkgdGhhdCB1\nc2VzIGEgVGltZXN0YW1wIGFzIHZlcnNpb24uCiAqIAogKiBAc2VlIDxBIEhS\nRUY9Imh0dHBzOi8vaXNzdWVzLmFwYWNoZS5vcmcvamlyYS9icm93c2UvT1BF\nTkpQQS0xNTgzIj5PUEVOSlBBLTE1ODM8L0E+CiAqICAgICAKICogQGF1dGhv\nciBQaW5ha2kgUG9kZGFyCiAqIAogKi8KcHVibGljIGNsYXNzIFRlc3RUaW1l\nc3RhbXBWZXJzaW9uIGV4dGVuZHMgU2luZ2xlRU1GVGVzdENhc2UgewoJcHVi\nbGljIHZvaWQgc2V0VXAoKSB7CgkJc3VwZXIuc2V0VXAoQ0xFQVJfVEFCTEVT\nLCBUaW1lc3RhbXBlZEVudGl0eS5jbGFzcywgTnVtZXJpY1ZlcnNpb25lZEVu\ndGl0eS5jbGFzcyk7Cgl9CgogICAgcHVibGljIHZvaWQgdGVzdEJ1bGtVcGRh\ndGVPblRpbWVzdGFtcGVkVmVyc2lvbigpIHsKICAgICAgICBUaW1lc3RhbXBl\nZEVudGl0eSBwYyA9IG5ldyBUaW1lc3RhbXBlZEVudGl0eSgpOwogICAgICAg\nIHBjLnNldE5hbWUoIk9yaWdpbmFsIik7CiAgICAgICAgRW50aXR5TWFuYWdl\nciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0u\nZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIGVtLnBlcnNpc3Qo\ncGMpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAg\nICAgICAgCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgLy8gZGVsYXkgdG8g\nZW5zdXJlIHRoZSBuZXcgdGltZXN0YW1wIGV4Y2VlZHMgdGhlIHRpbWVyJ3Mg\ncmVzb2x1dGlvbi4KICAgICAgICAgICAgVGhyZWFkLnNsZWVwKDEwMDApOwog\nICAgICAgIH0gY2F0Y2ggKEludGVycnVwdGVkRXhjZXB0aW9uIGUpIHsKICAg\nICAgICB9CgogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsK\nICAgICAgICBUaW1lc3RhbXAgb2xkVmVyc2lvbiA9IHBjLmdldFZlcnNpb24o\nKTsKICAgICAgICBTdHJpbmcganBxbCA9ICJVUERBVEUgVGltZXN0YW1wZWRF\nbnRpdHkgdCBTRVQgdC5uYW1lPTpuZXduYW1lIFdIRVJFIHQubmFtZT06b2xk\nbmFtZSI7CiAgICAgICAgZW0uY3JlYXRlUXVlcnkoanBxbCkKICAgICAgICAg\nIC5zZXRQYXJhbWV0ZXIoIm5ld25hbWUiLCAiVXBkYXRlZCIpCiAgICAgICAg\nICAuc2V0UGFyYW1ldGVyKCJvbGRuYW1lIiwgIk9yaWdpbmFsIikKICAgICAg\nICAgIC5leGVjdXRlVXBkYXRlKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rp\nb24oKS5jb21taXQoKTsKICAgICAgICAKICAgICAgICBlbS5nZXRUcmFuc2Fj\ndGlvbigpLmJlZ2luKCk7CiAgICAgICAgZW0ucmVmcmVzaChwYyk7CiAgICAg\nICAgVGltZXN0YW1wIG5ld1ZlcnNpb24gPSBwYy5nZXRWZXJzaW9uKCk7CiAg\nICAgICAgYXNzZXJ0VHJ1ZSgiRXhwZWN0ZWQgbmV3VmVyc2lvbj0iICsgbmV3\nVmVyc2lvbi50b1N0cmluZygpICsgIiB0byBiZSBhZnRlciBvbGRWZXJzaW9u\nPSIgKyBvbGRWZXJzaW9uLnRvU3RyaW5nKCksCiAgICAgICAgICAgIG5ld1Zl\ncnNpb24uYWZ0ZXIob2xkVmVyc2lvbikpOwogICAgfQogICAgCiAgICBwdWJs\naWMgdm9pZCB0ZXN0QnVsa1VwZGF0ZU9uTnVtZXJpY1ZlcnNpb24oKSB7CiAg\nICAgICAgTnVtZXJpY1ZlcnNpb25lZEVudGl0eSBwYyA9IG5ldyBOdW1lcmlj\nVmVyc2lvbmVkRW50aXR5KCk7CiAgICAgICAgcGMuc2V0TmFtZSgiT3JpZ2lu\nYWwiKTsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVu\ndGl0eU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJl\nZ2luKCk7CiAgICAgICAgZW0ucGVyc2lzdChwYyk7CiAgICAgICAgZW0uZ2V0\nVHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAgICAKICAgICAgICBlbS5n\nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgaW50IG9sZFZlcnNp\nb24gPSBwYy5nZXRWZXJzaW9uKCk7CiAgICAgICAgU3RyaW5nIGpwcWwgPSAi\nVVBEQVRFIE51bWVyaWNWZXJzaW9uZWRFbnRpdHkgdCBTRVQgdC5uYW1lPTpu\nZXduYW1lIFdIRVJFIHQubmFtZT06b2xkbmFtZSI7CiAgICAgICAgZW0uY3Jl\nYXRlUXVlcnkoanBxbCkKICAgICAgICAgIC5zZXRQYXJhbWV0ZXIoIm5ld25h\nbWUiLCAiVXBkYXRlZCIpCiAgICAgICAgICAuc2V0UGFyYW1ldGVyKCJvbGRu\nYW1lIiwgIk9yaWdpbmFsIikKICAgICAgICAgIC5leGVjdXRlVXBkYXRlKCk7\nCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5jb21taXQoKTsKICAgICAg\nICAKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAg\nICAgZW0ucmVmcmVzaChwYyk7CiAgICAgICAgaW50IG5ld1ZlcnNpb24gPSBw\nYy5nZXRWZXJzaW9uKCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKG5ld1ZlcnNp\nb24sIG9sZFZlcnNpb24rMSk7CiAgICB9Cn0K\n","encoding":"base64"}

