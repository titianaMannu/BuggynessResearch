{"sha":"7227f308dbaeb583808cd095269daf43bb5815ec","node_id":"MDQ6QmxvYjIwNjM2NDo3MjI3ZjMwOGRiYWViNTgzODA4Y2QwOTUyNjlkYWY0M2JiNTgxNWVj","size":108150,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/7227f308dbaeb583808cd095269daf43bb5815ec","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5sb2NrbWdyOwoK\naW1wb3J0IGphdmEuc3FsLkNvbm5lY3Rpb247CmltcG9ydCBqYXZhLnNxbC5S\nZXN1bHRTZXQ7CgppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5TWFu\nYWdlcjsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkxvY2tNb2RlVHlwZTsK\naW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLlF1ZXJ5OwoKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5jb25mLk9wZW5KUEFDb25maWd1cmF0aW9uOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuY29uZi5KREJDQ29uZmlndXJh\ndGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmtlcm5lbC5F\nYWdlckZldGNoTW9kZXM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5rZXJuZWwuSkRCQ0ZldGNoQ29uZmlndXJhdGlvbkltcGw7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuTFJTU2l6ZXM7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuSm9pblN5bnRheGVzOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5GZXRjaENvbmZpZ3Vy\nYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLk1peGVk\nTG9ja0xldmVsczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwu\nUXVlcnlGbHVzaE1vZGVzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBl\ncnNpc3RlbmNlLkVudGl0eU1hbmFnZXJJbXBsOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLmpkYmMuRmV0\nY2hEaXJlY3Rpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lz\ndGVuY2UuamRiYy5GZXRjaE1vZGU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEucGVyc2lzdGVuY2UuamRiYy5Jc29sYXRpb25MZXZlbDsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5qZGJjLkpEQkNGZXRjaFBs\nYW47CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuamRi\nYy5Kb2luU3ludGF4OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNp\nc3RlbmNlLmpkYmMuTFJTU2l6ZUFsZ29yaXRobTsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5qZGJjLlJlc3VsdFNldFR5cGU7Cgov\nKioKICogVGVzdCBGZXRjaFBsYW4gYW5kIEZldGNoQ29uZmlndXJhdGlvbiBo\naW50cyBwcm9jZXNzaW5nIGZvciB1c2UgaW4KICogSlBBIDIuMCBlbS5maW5k\nL3JlZnJlc2gvbG9jayguLi4gTWFwKSBhbmQgcXVlcnkuWCguLi4gTWFwKSBt\nZXRob2RzLgogKgogKiBTdXBwb3J0ZWQgaGludHM6CiAqICAgamF2YXgucGVy\nc2lzdGVuY2UubG9jay50aW1lb3V0CiAqICAgamF2YXgucGVyc2lzdGVuY2Uu\ncXVlcnkudGltZW91dAogKiAgIG9wZW5qcGEuRXh0ZW5kZWRQYXRoTG9va3Vw\nICg/KQogKiAgIG9wZW5qcGEuRmV0Y2hCYXRjaFNpemUKICogICBvcGVuanBh\nLkZldGNoUGxhbi5FYWdlckZldGNoTW9kZQogKiAgIG9wZW5qcGEuRmV0Y2hQ\nbGFuLkV4dGVuZGVkUGF0aExvb2t1cCAoPykKICogICBvcGVuanBhLkZldGNo\nUGxhbi5GZXRjaEJhdGNoU2l6ZQogKiAgIG9wZW5qcGEuRmV0Y2hQbGFuLkZl\ndGNoRGlyZWN0aW9uCiAqICAgb3BlbmpwYS5GZXRjaFBsYW4uSXNvbGF0aW9u\nCiAqICAgb3BlbmpwYS5GZXRjaFBsYW4uSm9pblN5bnRheAogKiAgIG9wZW5q\ncGEuRmV0Y2hQbGFuLkxSU1NpemUKICogICBvcGVuanBhLkZldGNoUGxhbi5M\nUlNTaXplQWxnb3JpdGhtCiAqICAgb3BlbmpwYS5GZXRjaFBsYW4uTG9ja1Rp\nbWVvdXQKICogICBvcGVuanBhLkZldGNoUGxhbi5NYXhGZXRjaERlcHRoCiAq\nICAgb3BlbmpwYS5GZXRjaFBsYW4uUXVlcnlUaW1lb3V0CiAqICAgb3Blbmpw\nYS5GZXRjaFBsYW4uUmVhZExvY2tNb2RlCiAqICAgb3BlbmpwYS5GZXRjaFBs\nYW4uUmVzdWx0U2V0VHlwZQogKiAgIG9wZW5qcGEuRmV0Y2hQbGFuLlN1YmNs\nYXNzRmV0Y2hNb2RlCiAqICAgb3BlbmpwYS5GZXRjaFBsYW4uV3JpdGVMb2Nr\nTW9kZQogKiAgIG9wZW5qcGEuRmx1c2hCZWZvcmVRdWVyaWVzCiAqICAgb3Bl\nbmpwYS5Mb2NrVGltZW91dAogKiAgIG9wZW5qcGEuTWF4RmV0Y2hEZXB0aAog\nKiAgIG9wZW5qcGEuUXVlcnlUaW1lb3V0CiAqICAgb3BlbmpwYS5SZWFkTG9j\na0xldmVsCiAqICAgb3BlbmpwYS5Xcml0ZUxvY2tMZXZlbAogKiAgIG9wZW5q\ncGEuamRiYy5FYWdlckZldGNoTW9kZQogKiAgIG9wZW5qcGEuamRiYy5GZXRj\naERpcmVjdGlvbgogKiAgIG9wZW5qcGEuamRiYy5Kb2luU3ludGF4CiAqICAg\nb3BlbmpwYS5qZGJjLkxSU1NpemUKICogICBvcGVuanBhLmpkYmMuUmVzdWx0\nU2V0VHlwZQogKiAgIG9wZW5qcGEuamRiYy5TdWJjbGFzc0ZldGNoTW9kZQog\nKiAgIG9wZW5qcGEuamRiYy5UcmFuc2FjdGlvbklzb2xhdGlvbgogKi8KcHVi\nbGljIGNsYXNzIFRlc3RGZXRjaEhpbnRzIGV4dGVuZHMgU2VxdWVuY2VkQWN0\naW9uc1Rlc3QgewogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7CiAgICAgICAg\nc2V0VXAoTG9ja0VtcGxveWVlLmNsYXNzCiAgICAgICAgICAgICwgIm9wZW5q\ncGEuTG9ja01hbmFnZXIiLCAibWl4ZWQiCiAgICAgICAgICAgICk7CiAgICAg\nICAgY29tbW9uU2V0VXAoKTsKICAgIH0KCiAgICAvKiBHb29kCiAgICAgKiBU\nZXN0ICJvcGVuanBhLkZldGNoQmF0Y2hTaXplIiBoaW50CiAgICAgKi8KICAg\nIHB1YmxpYyB2b2lkIHRlc3RGZXRjaEJhdGNoU2l6ZUhpbnQoKSB7CiAgICAg\nICAgU3RyaW5nIGhpbnROYW1lID0gIm9wZW5qcGEuRmV0Y2hCYXRjaFNpemUi\nOwoKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0\neU1hbmFnZXIoKTsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBvZW0g\nPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpZW0uZ2V0RGVsZWdhdGUoKTsKICAg\nICAgICBKREJDRmV0Y2hQbGFuIGZQbGFuID0gKEpEQkNGZXRjaFBsYW4pIG9l\nbS5nZXRGZXRjaFBsYW4oKTsKICAgICAgICBKREJDRmV0Y2hDb25maWd1cmF0\naW9uSW1wbCBmQ29uZmlnID0gKEpEQkNGZXRjaENvbmZpZ3VyYXRpb25JbXBs\nKQogICAgICAgICAgICAoKEVudGl0eU1hbmFnZXJJbXBsKSBvZW0pLmdldEJy\nb2tlcigpLmdldEZldGNoQ29uZmlndXJhdGlvbigpOwoKICAgICAgICBmZXRj\naEJhdGNoU2l6ZUhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwg\nIi0xIiwgLTEpOwogICAgICAgIGZldGNoQmF0Y2hTaXplSGludFRlc3QoZlBs\nYW4sIGZDb25maWcsIGhpbnROYW1lLCAtMSwgLTEpOwogICAgICAgIGZldGNo\nQmF0Y2hTaXplSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCAi\nMTAwIiwgMTAwKTsKICAgICAgICBmZXRjaEJhdGNoU2l6ZUhpbnRUZXN0KGZQ\nbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgMTAwLCAxMDApOwoKICAgICAgICB0\ncnkgewogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAieHh4\neHgiKTsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwgInh4\neHh4Iik7CiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGluZyBhIElsbGVnYWxB\ncmd1bWVudEV4Y2VwdGlvbi4iKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRp\nb24gZSkgewogICAgICAgICAgICBhc3NlcnRUcnVlKCJDYXVnaHQgZXhwZWN0\nZWQgZXhjZXB0aW9uIiwKICAgICAgICAgICAgICAgIElsbGVnYWxBcmd1bWVu\ndEV4Y2VwdGlvbi5jbGFzcy5pc0Fzc2lnbmFibGVGcm9tKGUuZ2V0Q2xhc3Mo\nKSkpOwogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgICBmUGxh\nbi5zZXRGZXRjaEJhdGNoU2l6ZSg5OTkpOwogICAgICAgICAgICBmUGxhbi5z\nZXRIaW50KGhpbnROYW1lLCBGZXRjaENvbmZpZ3VyYXRpb24uREVGQVVMVCk7\nCiAgICAgICAgICAgIGFzc2VydEVxdWFscyhmUGxhbi5nZXRGZXRjaEJhdGNo\nU2l6ZSgpLCAtMSk7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsK\nICAgICAgICAgICAgZmFpbCgiVW5leHBlY3RlZCAiICsgZS5nZXRDbGFzcygp\nLmdldE5hbWUoKSk7CiAgICAgICAgfQogICAgICAgIGVtLmNsb3NlKCk7CiAg\nICB9CgogICAgLyogR29vZAogICAgICogVGVzdCAib3BlbmpwYS5GZXRjaFBs\nYW4uRmV0Y2hCYXRjaFNpemUiIGhpbnQKICAgICAqLwogICAgcHVibGljIHZv\naWQgdGVzdEZldGNoUGxhbkZldGNoQmF0Y2hTaXplSGludCgpIHsKICAgICAg\nICBTdHJpbmcgaGludE5hbWUgPSAib3BlbmpwYS5GZXRjaFBsYW4uRmV0Y2hC\nYXRjaFNpemUiOwoKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNy\nZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBPcGVuSlBBRW50aXR5TWFu\nYWdlciBvZW0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpZW0uZ2V0RGVsZWdh\ndGUoKTsKICAgICAgICBKREJDRmV0Y2hQbGFuIGZQbGFuID0gKEpEQkNGZXRj\naFBsYW4pIG9lbS5nZXRGZXRjaFBsYW4oKTsKICAgICAgICBKREJDRmV0Y2hD\nb25maWd1cmF0aW9uSW1wbCBmQ29uZmlnID0gKEpEQkNGZXRjaENvbmZpZ3Vy\nYXRpb25JbXBsKQogICAgICAgICAgICAoKEVudGl0eU1hbmFnZXJJbXBsKSBv\nZW0pLmdldEJyb2tlcigpLmdldEZldGNoQ29uZmlndXJhdGlvbigpOwoKICAg\nICAgICBmZXRjaEJhdGNoU2l6ZUhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBo\naW50TmFtZSwgIjAiLCAwKTsKICAgICAgICBmZXRjaEJhdGNoU2l6ZUhpbnRU\nZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgMCwgMCk7CiAgICAgICAg\nZmV0Y2hCYXRjaFNpemVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5h\nbWUsICI1MDAiLCA1MDApOwogICAgICAgIGZldGNoQmF0Y2hTaXplSGludFRl\nc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCA1MDAsIDUwMCk7CgogICAg\nICAgIHRyeSB7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUs\nICJ4eHh4eCIpOwogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1l\nLCAieXl5eXkiKTsKICAgICAgICAgICAgZmFpbCgiRXhwZWN0aW5nIGEgSWxs\nZWdhbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwogICAgICAgIH0gY2F0Y2ggKEV4\nY2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2VydFRydWUoIkNhdWdodCBl\neHBlY3RlZCBleGNlcHRpb24iLAogICAgICAgICAgICAgICAgSWxsZWdhbEFy\nZ3VtZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNzaWduYWJsZUZyb20oZS5nZXRD\nbGFzcygpKSk7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICAg\nIGZQbGFuLnNldEZldGNoQmF0Y2hTaXplKDk5OSk7CiAgICAgICAgICAgIGZQ\nbGFuLnNldEhpbnQoaGludE5hbWUsIEZldGNoQ29uZmlndXJhdGlvbi5ERUZB\nVUxUKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKGZQbGFuLmdldEZldGNo\nQmF0Y2hTaXplKCksIC0xKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24g\nZSkgewogICAgICAgICAgICBmYWlsKCJVbmV4cGVjdGVkICIgKyBlLmdldENs\nYXNzKCkuZ2V0TmFtZSgpKTsKICAgICAgICB9CiAgICAgICAgZW0uY2xvc2Uo\nKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgZmV0Y2hCYXRjaFNpemVIaW50\nVGVzdChKREJDRmV0Y2hQbGFuIGZQbGFuLAogICAgICAgIEpEQkNGZXRjaENv\nbmZpZ3VyYXRpb25JbXBsIGZDb25maWcsIFN0cmluZyBoaW50LCBPYmplY3Qg\ndmFsdWUsCiAgICAgICAgaW50IGV4cGVjdGVkKSB7CiAgICAgICAgZkNvbmZp\nZy5zZXRGZXRjaEJhdGNoU2l6ZSg5OTkpOwogICAgICAgIGZQbGFuLnNldEhp\nbnQoaGludCwgdmFsdWUpOwogICAgICAgIE9iamVjdCBnZXRWYWx1ZSA9IGZQ\nbGFuLmdldEhpbnQoaGludCk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKHZhbHVl\nLmdldENsYXNzKCksIGdldFZhbHVlLmdldENsYXNzKCkpOwogICAgICAgIGFz\nc2VydEVxdWFscyh2YWx1ZSwgZ2V0VmFsdWUpOwogICAgICAgIGFzc2VydEVx\ndWFscyhleHBlY3RlZCwgZlBsYW4uZ2V0RmV0Y2hCYXRjaFNpemUoKSk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKGV4cGVjdGVkLCBmQ29uZmlnLmdldEZldGNo\nQmF0Y2hTaXplKCkpOwogICAgfQoKICAgIC8qIEdvb2QKICAgICAqIFRlc3Qg\nIm9wZW5qcGEuRmV0Y2hQbGFuLkVhZ2VyRmV0Y2hNb2RlIiBoaW50CiAgICAg\nKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RGZXRjaFBsYW5FYWdlckZldGNoTW9k\nZUhpbnQoKSB7CiAgICAgICAgU3RyaW5nIGhpbnROYW1lID0gIm9wZW5qcGEu\nRmV0Y2hQbGFuLkVhZ2VyRmV0Y2hNb2RlIjsKCiAgICAgICAgRW50aXR5TWFu\nYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAg\nT3BlbkpQQUVudGl0eU1hbmFnZXIgb2VtID0gKE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyKSBlbS5nZXREZWxlZ2F0ZSgpOwogICAgICAgIEpEQkNGZXRjaFBsYW4g\nZlBsYW4gPSAoSkRCQ0ZldGNoUGxhbikgb2VtLmdldEZldGNoUGxhbigpOwog\nICAgICAgIEpEQkNGZXRjaENvbmZpZ3VyYXRpb25JbXBsIGZDb25maWcgPSAo\nSkRCQ0ZldGNoQ29uZmlndXJhdGlvbkltcGwpCiAgICAgICAgICAgICgoRW50\naXR5TWFuYWdlckltcGwpIG9lbSkuZ2V0QnJva2VyKCkuZ2V0RmV0Y2hDb25m\naWd1cmF0aW9uKCk7CgogICAgICAgIGVhZ2VyRmV0Y2hNb2RlSGludFRlc3Qo\nZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCAibm9uZSIsCiAgICAgICAgICAg\nIEZldGNoTW9kZS5OT05FLCBFYWdlckZldGNoTW9kZXMuRUFHRVJfTk9ORSk7\nCiAgICAgICAgZWFnZXJGZXRjaE1vZGVIaW50VGVzdChmUGxhbiwgZkNvbmZp\nZywgaGludE5hbWUsIEZldGNoTW9kZS5OT05FLm5hbWUoKSwKICAgICAgICAg\nICAgRmV0Y2hNb2RlLk5PTkUsIEVhZ2VyRmV0Y2hNb2Rlcy5FQUdFUl9OT05F\nKTsKICAgICAgICBlYWdlckZldGNoTW9kZUhpbnRUZXN0KGZQbGFuLCBmQ29u\nZmlnLCBoaW50TmFtZSwgRmV0Y2hNb2RlLk5PTkUsCiAgICAgICAgICAgIEZl\ndGNoTW9kZS5OT05FLCBFYWdlckZldGNoTW9kZXMuRUFHRVJfTk9ORSk7Cgog\nICAgICAgIGVhZ2VyRmV0Y2hNb2RlSGludFRlc3QoZlBsYW4sIGZDb25maWcs\nIGhpbnROYW1lLCAicGFyYWxsZWwiLAogICAgICAgICAgICBGZXRjaE1vZGUu\nUEFSQUxMRUwsIEVhZ2VyRmV0Y2hNb2Rlcy5FQUdFUl9QQVJBTExFTCk7CiAg\nICAgICAgZWFnZXJGZXRjaE1vZGVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywg\naGludE5hbWUsIEZldGNoTW9kZS5QQVJBTExFTAogICAgICAgICAgICAubmFt\nZSgpLCBGZXRjaE1vZGUuUEFSQUxMRUwsIEVhZ2VyRmV0Y2hNb2Rlcy5FQUdF\nUl9QQVJBTExFTCk7CiAgICAgICAgZWFnZXJGZXRjaE1vZGVIaW50VGVzdChm\nUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIEZldGNoTW9kZS5QQVJBTExFTCwK\nICAgICAgICAgICAgRmV0Y2hNb2RlLlBBUkFMTEVMLCBFYWdlckZldGNoTW9k\nZXMuRUFHRVJfUEFSQUxMRUwpOwoKICAgICAgICBlYWdlckZldGNoTW9kZUhp\nbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgImpvaW4iLAogICAg\nICAgICAgICBGZXRjaE1vZGUuSk9JTiwgRWFnZXJGZXRjaE1vZGVzLkVBR0VS\nX0pPSU4pOwogICAgICAgIGVhZ2VyRmV0Y2hNb2RlSGludFRlc3QoZlBsYW4s\nIGZDb25maWcsIGhpbnROYW1lLCBGZXRjaE1vZGUuSk9JTi5uYW1lKCksCiAg\nICAgICAgICAgIEZldGNoTW9kZS5KT0lOLCBFYWdlckZldGNoTW9kZXMuRUFH\nRVJfSk9JTik7CiAgICAgICAgZWFnZXJGZXRjaE1vZGVIaW50VGVzdChmUGxh\nbiwgZkNvbmZpZywgaGludE5hbWUsIEZldGNoTW9kZS5KT0lOLAogICAgICAg\nICAgICBGZXRjaE1vZGUuSk9JTiwgRWFnZXJGZXRjaE1vZGVzLkVBR0VSX0pP\nSU4pOwoKICAgICAgICB0cnkgewogICAgICAgICAgICBmUGxhbi5zZXRIaW50\nKGhpbnROYW1lLCAieHh4eHgiKTsKICAgICAgICAgICAgZlBsYW4uc2V0SGlu\ndChoaW50TmFtZSwgInl5eXl5Iik7CiAgICAgICAgICAgIGZhaWwoIkV4cGVj\ndGluZyBhIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi4iKTsKICAgICAgICB9\nIGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBhc3NlcnRUcnVl\nKCJDYXVnaHQgZXhwZWN0ZWQgZXhjZXB0aW9uIiwKICAgICAgICAgICAgICAg\nIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5jbGFzcy5pc0Fzc2lnbmFibGVG\ncm9tKGUuZ2V0Q2xhc3MoKSkpOwogICAgICAgIH0KICAgICAgICB0cnkgewog\nICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAiMTIzNDUiKTsK\nICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwgIjY3ODkwIik7\nCiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGluZyBhIElsbGVnYWxBcmd1bWVu\ndEV4Y2VwdGlvbi4iKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkg\newogICAgICAgICAgICBhc3NlcnRUcnVlKCJDYXVnaHQgZXhwZWN0ZWQgZXhj\nZXB0aW9uIiwKICAgICAgICAgICAgICAgIElsbGVnYWxBcmd1bWVudEV4Y2Vw\ndGlvbi5jbGFzcy5pc0Fzc2lnbmFibGVGcm9tKGUuZ2V0Q2xhc3MoKSkpOwog\nICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgICBmUGxhbi5zZXRI\naW50KGhpbnROYW1lLCAtMik7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQo\naGludE5hbWUsIC0zKTsKICAgICAgICAgICAgZmFpbCgiRXhwZWN0aW5nIGEg\nSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwogICAgICAgIH0gY2F0Y2gg\nKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2VydFRydWUoIkNhdWdo\ndCBleHBlY3RlZCBleGNlcHRpb24iLAogICAgICAgICAgICAgICAgSWxsZWdh\nbEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNzaWduYWJsZUZyb20oZS5n\nZXRDbGFzcygpKSk7CiAgICAgICAgfQogICAgICAgIGVtLmNsb3NlKCk7CiAg\nICB9CgogICAgLyogR29vZAogICAgICogVGVzdCAib3BlbmpwYS5qZGJjLkVh\nZ2VyRmV0Y2hNb2RlIiBoaW50CiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHRl\nc3RKZGJjRWFnZXJGZXRjaE1vZGVIaW50KCkgewogICAgICAgIFN0cmluZyBo\naW50TmFtZSA9ICJvcGVuanBhLmpkYmMuRWFnZXJGZXRjaE1vZGUiOwoKICAg\nICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFn\nZXIoKTsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBvZW0gPSAoT3Bl\nbkpQQUVudGl0eU1hbmFnZXIpIGVtLmdldERlbGVnYXRlKCk7CiAgICAgICAg\nSkRCQ0ZldGNoUGxhbiBmUGxhbiA9IChKREJDRmV0Y2hQbGFuKSBvZW0uZ2V0\nRmV0Y2hQbGFuKCk7CiAgICAgICAgSkRCQ0ZldGNoQ29uZmlndXJhdGlvbklt\ncGwgZkNvbmZpZyA9IChKREJDRmV0Y2hDb25maWd1cmF0aW9uSW1wbCkKICAg\nICAgICAgICAgKChFbnRpdHlNYW5hZ2VySW1wbCkgb2VtKS5nZXRCcm9rZXIo\nKS5nZXRGZXRjaENvbmZpZ3VyYXRpb24oKTsKCiAgICAgICAgZWFnZXJGZXRj\naE1vZGVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIFN0cmlu\nZwogICAgICAgICAgICAudmFsdWVPZihFYWdlckZldGNoTW9kZXMuRUFHRVJf\nTk9ORSksIEZldGNoTW9kZS5OT05FLAogICAgICAgICAgICBFYWdlckZldGNo\nTW9kZXMuRUFHRVJfTk9ORSk7CiAgICAgICAgZWFnZXJGZXRjaE1vZGVIaW50\nVGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsCiAgICAgICAgICAgIEVh\nZ2VyRmV0Y2hNb2Rlcy5FQUdFUl9OT05FLCBGZXRjaE1vZGUuTk9ORSwKICAg\nICAgICAgICAgRWFnZXJGZXRjaE1vZGVzLkVBR0VSX05PTkUpOwoKICAgICAg\nICBlYWdlckZldGNoTW9kZUhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50\nTmFtZSwKICAgICAgICAgICAgRWFnZXJGZXRjaE1vZGVzLkVBR0VSX1BBUkFM\nTEVMLCBGZXRjaE1vZGUuUEFSQUxMRUwsCiAgICAgICAgICAgIEVhZ2VyRmV0\nY2hNb2Rlcy5FQUdFUl9QQVJBTExFTCk7CiAgICAgICAgZWFnZXJGZXRjaE1v\nZGVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIFN0cmluZwog\nICAgICAgICAgICAudmFsdWVPZihFYWdlckZldGNoTW9kZXMuRUFHRVJfUEFS\nQUxMRUwpLCBGZXRjaE1vZGUuUEFSQUxMRUwsCiAgICAgICAgICAgIEVhZ2Vy\nRmV0Y2hNb2Rlcy5FQUdFUl9QQVJBTExFTCk7CgogICAgICAgIGVhZ2VyRmV0\nY2hNb2RlSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCBTdHJp\nbmcKICAgICAgICAgICAgLnZhbHVlT2YoRWFnZXJGZXRjaE1vZGVzLkVBR0VS\nX0pPSU4pLCBGZXRjaE1vZGUuSk9JTiwKICAgICAgICAgICAgRWFnZXJGZXRj\naE1vZGVzLkVBR0VSX0pPSU4pOwogICAgICAgIGVhZ2VyRmV0Y2hNb2RlSGlu\ndFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLAogICAgICAgICAgICBF\nYWdlckZldGNoTW9kZXMuRUFHRVJfSk9JTiwgRmV0Y2hNb2RlLkpPSU4sCiAg\nICAgICAgICAgIEVhZ2VyRmV0Y2hNb2Rlcy5FQUdFUl9KT0lOKTsKCiAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwg\nInh4eHh4Iik7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUs\nICJ5eXl5eSIpOwogICAgICAgICAgICBmYWlsKCJFeHBlY3RpbmcgYSBJbGxl\nZ2FsQXJndW1lbnRFeGNlcHRpb24uIik7CiAgICAgICAgfSBjYXRjaCAoRXhj\nZXB0aW9uIGUpIHsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4\ncGVjdGVkIGV4Y2VwdGlvbiIsCiAgICAgICAgICAgICAgICBJbGxlZ2FsQXJn\ndW1lbnRFeGNlcHRpb24uY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShlLmdldENs\nYXNzKCkpKTsKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\nZlBsYW4uc2V0SGludChoaW50TmFtZSwgIjEyMzQ1Iik7CiAgICAgICAgICAg\nIGZQbGFuLnNldEhpbnQoaGludE5hbWUsICI2Nzg5MCIpOwogICAgICAgICAg\nICBmYWlsKCJFeHBlY3RpbmcgYSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24u\nIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAg\nICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVjdGVkIGV4Y2VwdGlvbiIsCiAg\nICAgICAgICAgICAgICBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uY2xhc3Mu\naXNBc3NpZ25hYmxlRnJvbShlLmdldENsYXNzKCkpKTsKICAgICAgICB9CiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFt\nZSwgLTEpOwogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAt\nMik7CiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGluZyBhIElsbGVnYWxBcmd1\nbWVudEV4Y2VwdGlvbi4iKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24g\nZSkgewogICAgICAgICAgICBhc3NlcnRUcnVlKCJDYXVnaHQgZXhwZWN0ZWQg\nZXhjZXB0aW9uIiwKICAgICAgICAgICAgICAgIElsbGVnYWxBcmd1bWVudEV4\nY2VwdGlvbi5jbGFzcy5pc0Fzc2lnbmFibGVGcm9tKGUuZ2V0Q2xhc3MoKSkp\nOwogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgICBmUGxhbi5z\nZXRIaW50KGhpbnROYW1lLCBGZXRjaENvbmZpZ3VyYXRpb24uREVGQVVMVCk7\nCiAgICAgICAgICAgIGFzc2VydEVxdWFscyhmUGxhbi5nZXRFYWdlckZldGNo\nTW9kZSgpLCBGZXRjaE1vZGUuUEFSQUxMRUwpOwogICAgICAgIH0gY2F0Y2gg\nKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAgZmFpbCgiVW5leHBlY3Rl\nZCAiICsgZS5nZXRDbGFzcygpLmdldE5hbWUoKSk7CiAgICAgICAgfQoKICAg\nICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHByaXZhdGUgdm9pZCBlYWdl\nckZldGNoTW9kZUhpbnRUZXN0KEpEQkNGZXRjaFBsYW4gZlBsYW4sCiAgICAg\nICAgSkRCQ0ZldGNoQ29uZmlndXJhdGlvbkltcGwgZkNvbmZpZywgU3RyaW5n\nIGhpbnQsIE9iamVjdCB2YWx1ZSwKICAgICAgICBPYmplY3QgZXhwZWN0ZWRW\nYWx1ZSwgaW50IGV4cGVjdGVkKSB7CiAgICAgICAgZlBsYW4uc2V0SGludCho\naW50LCB2YWx1ZSk7CiAgICAgICAgT2JqZWN0IGdldFZhbHVlID0gZlBsYW4u\nZ2V0SGludChoaW50KTsKICAgICAgICBhc3NlcnRFcXVhbHModmFsdWUuZ2V0\nQ2xhc3MoKSwgZ2V0VmFsdWUuZ2V0Q2xhc3MoKSk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKHZhbHVlLCBnZXRWYWx1ZSk7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKGV4cGVjdGVkVmFsdWUsIGZQbGFuLmdldEVhZ2VyRmV0Y2hNb2RlKCkpOwog\nICAgICAgIGFzc2VydEVxdWFscyhleHBlY3RlZCwgZkNvbmZpZy5nZXRFYWdl\nckZldGNoTW9kZSgpKTsKICAgIH0KCiAgICAvKiBHb29kCiAgICAgKiBUZXN0\nICJvcGVuanBhLkZldGNoUGxhbi5Kb2luU3ludGF4IiBoaW50CiAgICAgKi8K\nICAgIHB1YmxpYyB2b2lkIHRlc3RGZXRjaFBsYW5Kb2luU3ludGF4SGludCgp\nIHsKICAgICAgICBTdHJpbmcgaGludE5hbWUgPSAib3BlbmpwYS5GZXRjaFBs\nYW4uSm9pblN5bnRheCI7CgogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBl\nbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyIG9lbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlcillbS5nZXRE\nZWxlZ2F0ZSgpOwogICAgICAgIEpEQkNGZXRjaFBsYW4gZlBsYW4gPSAoSkRC\nQ0ZldGNoUGxhbikgb2VtLmdldEZldGNoUGxhbigpOwogICAgICAgIEpEQkNG\nZXRjaENvbmZpZ3VyYXRpb25JbXBsIGZDb25maWcgPSAoSkRCQ0ZldGNoQ29u\nZmlndXJhdGlvbkltcGwpCiAgICAgICAgICAgICgoRW50aXR5TWFuYWdlcklt\ncGwpIG9lbSkuZ2V0QnJva2VyKCkuZ2V0RmV0Y2hDb25maWd1cmF0aW9uKCk7\nCgogICAgICAgIGpvaW5TeW50YXhIaW50VGVzdChmUGxhbiwgZkNvbmZpZywg\naGludE5hbWUsICJzcWw5MiIsCiAgICAgICAgICAgIEpvaW5TeW50YXguU1FM\nOTIsIEpvaW5TeW50YXhlcy5TWU5UQVhfU1FMOTIpOwogICAgICAgIGpvaW5T\neW50YXhIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIEpvaW5T\neW50YXguU1FMOTIubmFtZSgpLAogICAgICAgICAgICBKb2luU3ludGF4LlNR\nTDkyLCBKb2luU3ludGF4ZXMuU1lOVEFYX1NRTDkyKTsKICAgICAgICBqb2lu\nU3ludGF4SGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCBKb2lu\nU3ludGF4LlNRTDkyLAogICAgICAgICAgICBKb2luU3ludGF4LlNRTDkyLCBK\nb2luU3ludGF4ZXMuU1lOVEFYX1NRTDkyKTsKCiAgICAgICAgam9pblN5bnRh\neEhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgInRyYWRpdGlv\nbmFsIiwKICAgICAgICAgICAgSm9pblN5bnRheC5UUkFESVRJT05BTCwgSm9p\nblN5bnRheGVzLlNZTlRBWF9UUkFESVRJT05BTCk7CiAgICAgICAgam9pblN5\nbnRheEhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgSm9pblN5\nbnRheC5UUkFESVRJT05BTAogICAgICAgICAgICAubmFtZSgpLCBKb2luU3lu\ndGF4LlRSQURJVElPTkFMLCBKb2luU3ludGF4ZXMuU1lOVEFYX1RSQURJVElP\nTkFMKTsKICAgICAgICBqb2luU3ludGF4SGludFRlc3QoZlBsYW4sIGZDb25m\naWcsIGhpbnROYW1lLCBKb2luU3ludGF4LlRSQURJVElPTkFMLAogICAgICAg\nICAgICBKb2luU3ludGF4LlRSQURJVElPTkFMLCBKb2luU3ludGF4ZXMuU1lO\nVEFYX1RSQURJVElPTkFMKTsKCiAgICAgICAgam9pblN5bnRheEhpbnRUZXN0\nKGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgImRhdGFiYXNlIiwKICAgICAg\nICAgICAgSm9pblN5bnRheC5EQVRBQkFTRSwgSm9pblN5bnRheGVzLlNZTlRB\nWF9EQVRBQkFTRSk7CiAgICAgICAgam9pblN5bnRheEhpbnRUZXN0KGZQbGFu\nLCBmQ29uZmlnLCBoaW50TmFtZSwKICAgICAgICAgICAgSm9pblN5bnRheC5E\nQVRBQkFTRS5uYW1lKCksIEpvaW5TeW50YXguREFUQUJBU0UsCiAgICAgICAg\nICAgIEpvaW5TeW50YXhlcy5TWU5UQVhfREFUQUJBU0UpOwogICAgICAgIGpv\naW5TeW50YXhIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIEpv\naW5TeW50YXguREFUQUJBU0UsCiAgICAgICAgICAgIEpvaW5TeW50YXguREFU\nQUJBU0UsIEpvaW5TeW50YXhlcy5TWU5UQVhfREFUQUJBU0UpOwoKICAgICAg\nICB0cnkgewogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAi\neHh4eHgiKTsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwg\nInl5eXl5Iik7CiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGluZyBhIElsbGVn\nYWxBcmd1bWVudEV4Y2VwdGlvbi4iKTsKICAgICAgICB9IGNhdGNoIChFeGNl\ncHRpb24gZSkgewogICAgICAgICAgICBhc3NlcnRUcnVlKCJDYXVnaHQgZXhw\nZWN0ZWQgZXhjZXB0aW9uIiwKICAgICAgICAgICAgICAgIElsbGVnYWxBcmd1\nbWVudEV4Y2VwdGlvbi5jbGFzcy5pc0Fzc2lnbmFibGVGcm9tKGUuZ2V0Q2xh\nc3MoKSkpOwogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgICBm\nUGxhbi5zZXRIaW50KGhpbnROYW1lLCAiMTIzNDUiKTsKICAgICAgICAgICAg\nZlBsYW4uc2V0SGludChoaW50TmFtZSwgIjY3ODkwIik7CiAgICAgICAgICAg\nIGZhaWwoIkV4cGVjdGluZyBhIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi4i\nKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAg\nICBhc3NlcnRUcnVlKCJDYXVnaHQgZXhwZWN0ZWQgZXhjZXB0aW9uIiwKICAg\nICAgICAgICAgICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5jbGFzcy5p\nc0Fzc2lnbmFibGVGcm9tKGUuZ2V0Q2xhc3MoKSkpOwogICAgICAgIH0KICAg\nICAgICB0cnkgewogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1l\nLCAtMSk7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsIC0y\nKTsKICAgICAgICAgICAgZmFpbCgiRXhwZWN0aW5nIGEgSWxsZWdhbEFyZ3Vt\nZW50RXhjZXB0aW9uLiIpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBl\nKSB7CiAgICAgICAgICAgIGFzc2VydFRydWUoIkNhdWdodCBleHBlY3RlZCBl\neGNlcHRpb24iLAogICAgICAgICAgICAgICAgSWxsZWdhbEFyZ3VtZW50RXhj\nZXB0aW9uLmNsYXNzLmlzQXNzaWduYWJsZUZyb20oZS5nZXRDbGFzcygpKSk7\nCiAgICAgICAgfQogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgLyog\nR29vZAogICAgICogVGVzdCAib3BlbmpwYS5qZGJjLkpvaW5TeW50YXgiIGhp\nbnQKICAgICAqLwogICAgcHVibGljIHZvaWQgdGVzdEpkYmNKb2luU3ludGF4\nSGludCgpIHsKICAgICAgICBTdHJpbmcgaGludE5hbWUgPSAib3BlbmpwYS5q\nZGJjLkpvaW5TeW50YXgiOwoKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0g\nZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBPcGVuSlBBRW50\naXR5TWFuYWdlciBvZW0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpIGVtLmdl\ndERlbGVnYXRlKCk7CiAgICAgICAgSkRCQ0ZldGNoUGxhbiBmUGxhbiA9IChK\nREJDRmV0Y2hQbGFuKSBvZW0uZ2V0RmV0Y2hQbGFuKCk7CiAgICAgICAgSkRC\nQ0ZldGNoQ29uZmlndXJhdGlvbkltcGwgZkNvbmZpZyA9IChKREJDRmV0Y2hD\nb25maWd1cmF0aW9uSW1wbCkKICAgICAgICAgICAgKChFbnRpdHlNYW5hZ2Vy\nSW1wbCkgb2VtKS5nZXRCcm9rZXIoKS5nZXRGZXRjaENvbmZpZ3VyYXRpb24o\nKTsKCiAgICAgICAgam9pblN5bnRheEhpbnRUZXN0KGZQbGFuLCBmQ29uZmln\nLCBoaW50TmFtZSwgU3RyaW5nCiAgICAgICAgICAgIC52YWx1ZU9mKEpvaW5T\neW50YXhlcy5TWU5UQVhfU1FMOTIpLCBKb2luU3ludGF4LlNRTDkyLAogICAg\nICAgICAgICBKb2luU3ludGF4ZXMuU1lOVEFYX1NRTDkyKTsKICAgICAgICBq\nb2luU3ludGF4SGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCBK\nb2luU3ludGF4ZXMuU1lOVEFYX1NRTDkyLAogICAgICAgICAgICBKb2luU3lu\ndGF4LlNRTDkyLCBKb2luU3ludGF4ZXMuU1lOVEFYX1NRTDkyKTsKCiAgICAg\nICAgam9pblN5bnRheEhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFt\nZSwgU3RyaW5nCiAgICAgICAgICAgIC52YWx1ZU9mKEpvaW5TeW50YXhlcy5T\nWU5UQVhfVFJBRElUSU9OQUwpLCBKb2luU3ludGF4LlRSQURJVElPTkFMLAog\nICAgICAgICAgICBKb2luU3ludGF4ZXMuU1lOVEFYX1RSQURJVElPTkFMKTsK\nICAgICAgICBqb2luU3ludGF4SGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhp\nbnROYW1lLAogICAgICAgICAgICBKb2luU3ludGF4ZXMuU1lOVEFYX1RSQURJ\nVElPTkFMLCBKb2luU3ludGF4LlRSQURJVElPTkFMLAogICAgICAgICAgICBK\nb2luU3ludGF4ZXMuU1lOVEFYX1RSQURJVElPTkFMKTsKCiAgICAgICAgam9p\nblN5bnRheEhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgU3Ry\naW5nCiAgICAgICAgICAgIC52YWx1ZU9mKEpvaW5TeW50YXhlcy5TWU5UQVhf\nREFUQUJBU0UpLCBKb2luU3ludGF4LkRBVEFCQVNFLAogICAgICAgICAgICBK\nb2luU3ludGF4ZXMuU1lOVEFYX0RBVEFCQVNFKTsKICAgICAgICBqb2luU3lu\ndGF4SGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLAogICAgICAg\nICAgICBKb2luU3ludGF4ZXMuU1lOVEFYX0RBVEFCQVNFLCBKb2luU3ludGF4\nLkRBVEFCQVNFLAogICAgICAgICAgICBKb2luU3ludGF4ZXMuU1lOVEFYX0RB\nVEFCQVNFKTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4uc2V0\nSGludChoaW50TmFtZSwgInh4eHh4Iik7CiAgICAgICAgICAgIGZQbGFuLnNl\ndEhpbnQoaGludE5hbWUsICJ5eXl5eSIpOwogICAgICAgICAgICBmYWlsKCJF\neHBlY3RpbmcgYSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uIik7CiAgICAg\nICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgYXNzZXJ0\nVHJ1ZSgiQ2F1Z2h0IGV4cGVjdGVkIGV4Y2VwdGlvbiIsCiAgICAgICAgICAg\nICAgICBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uY2xhc3MuaXNBc3NpZ25h\nYmxlRnJvbShlLmdldENsYXNzKCkpKTsKICAgICAgICB9CiAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwgIjEyMzQ1\nIik7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsICI2Nzg5\nMCIpOwogICAgICAgICAgICBmYWlsKCJFeHBlY3RpbmcgYSBJbGxlZ2FsQXJn\ndW1lbnRFeGNlcHRpb24uIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9u\nIGUpIHsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVjdGVk\nIGV4Y2VwdGlvbiIsCiAgICAgICAgICAgICAgICBJbGxlZ2FsQXJndW1lbnRF\neGNlcHRpb24uY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShlLmdldENsYXNzKCkp\nKTsKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4u\nc2V0SGludChoaW50TmFtZSwgLTEpOwogICAgICAgICAgICBmUGxhbi5zZXRI\naW50KGhpbnROYW1lLCAtMik7CiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGlu\nZyBhIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi4iKTsKICAgICAgICB9IGNh\ndGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBhc3NlcnRUcnVlKCJD\nYXVnaHQgZXhwZWN0ZWQgZXhjZXB0aW9uIiwKICAgICAgICAgICAgICAgIEls\nbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5jbGFzcy5pc0Fzc2lnbmFibGVGcm9t\nKGUuZ2V0Q2xhc3MoKSkpOwogICAgICAgIH0KICAgICAgICB0cnkgewogICAg\nICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCBGZXRjaENvbmZpZ3Vy\nYXRpb24uREVGQVVMVCk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscyhmQ29u\nZmlnLmdldEpvaW5TeW50YXgoKSwKICAgICAgICAgICAgICAgICgoSkRCQ0Nv\nbmZpZ3VyYXRpb24pIGZDb25maWcuZ2V0Q29udGV4dCgpLmdldENvbmZpZ3Vy\nYXRpb24oKSkKICAgICAgICAgICAgICAgICAgICAuZ2V0REJEaWN0aW9uYXJ5\nSW5zdGFuY2UoKS5qb2luU3ludGF4KTsKICAgICAgICB9IGNhdGNoIChFeGNl\ncHRpb24gZSkgewogICAgICAgICAgICBmYWlsKCJVbmV4cGVjdGVkICIgKyBl\nLmdldENsYXNzKCkuZ2V0TmFtZSgpKTsKICAgICAgICB9CiAgICAgICAgZW0u\nY2xvc2UoKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgam9pblN5bnRheEhp\nbnRUZXN0KEpEQkNGZXRjaFBsYW4gZlBsYW4sCiAgICAgICAgSkRCQ0ZldGNo\nQ29uZmlndXJhdGlvbkltcGwgZkNvbmZpZywgU3RyaW5nIGhpbnQsIE9iamVj\ndCB2YWx1ZSwKICAgICAgICBPYmplY3QgZXhwZWN0ZWRWYWx1ZSwgaW50IGV4\ncGVjdGVkKSB7CiAgICAgICAgZlBsYW4uc2V0SGludChoaW50LCB2YWx1ZSk7\nCiAgICAgICAgT2JqZWN0IGdldFZhbHVlID0gZlBsYW4uZ2V0SGludChoaW50\nKTsKICAgICAgICBhc3NlcnRFcXVhbHModmFsdWUuZ2V0Q2xhc3MoKSwgZ2V0\nVmFsdWUuZ2V0Q2xhc3MoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKHZhbHVl\nLCBnZXRWYWx1ZSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGV4cGVjdGVkVmFs\ndWUsIGZQbGFuLmdldEpvaW5TeW50YXgoKSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKGV4cGVjdGVkLCBmQ29uZmlnLmdldEpvaW5TeW50YXgoKSk7CiAgICB9\nCgogICAgLyogR29vZAogICAgICogVGVzdCAib3BlbmpwYS5GZXRjaFBsYW4u\nRmV0Y2hEaXJlY3Rpb24iIGhpbnQKICAgICAqLwogICAgcHVibGljIHZvaWQg\ndGVzdEZldGNoUGxhbkZldGNoRGlyZWN0aW9uSGludCgpIHsKICAgICAgICBT\ndHJpbmcgaGludE5hbWUgPSAib3BlbmpwYS5GZXRjaFBsYW4uRmV0Y2hEaXJl\nY3Rpb24iOwoKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0\nZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdl\nciBvZW0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpIGVtLmdldERlbGVnYXRl\nKCk7CiAgICAgICAgSkRCQ0ZldGNoUGxhbiBmUGxhbiA9IChKREJDRmV0Y2hQ\nbGFuKSBvZW0uZ2V0RmV0Y2hQbGFuKCk7CiAgICAgICAgSkRCQ0ZldGNoQ29u\nZmlndXJhdGlvbkltcGwgZkNvbmZpZyA9IChKREJDRmV0Y2hDb25maWd1cmF0\naW9uSW1wbCkKICAgICAgICAgICAgKChFbnRpdHlNYW5hZ2VySW1wbCkgb2Vt\nKS5nZXRCcm9rZXIoKS5nZXRGZXRjaENvbmZpZ3VyYXRpb24oKTsKCiAgICAg\nICAgZmV0Y2hEaXJlY3Rpb25IaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGlu\ndE5hbWUsICJmb3J3YXJkIiwKICAgICAgICAgICAgRmV0Y2hEaXJlY3Rpb24u\nRk9SV0FSRCwgUmVzdWx0U2V0LkZFVENIX0ZPUldBUkQpOwogICAgICAgIGZl\ndGNoRGlyZWN0aW9uSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1l\nLCBGZXRjaERpcmVjdGlvbi5GT1JXQVJECiAgICAgICAgICAgIC5uYW1lKCks\nIEZldGNoRGlyZWN0aW9uLkZPUldBUkQsIFJlc3VsdFNldC5GRVRDSF9GT1JX\nQVJEKTsKICAgICAgICBmZXRjaERpcmVjdGlvbkhpbnRUZXN0KGZQbGFuLCBm\nQ29uZmlnLCBoaW50TmFtZSwKICAgICAgICAgICAgRmV0Y2hEaXJlY3Rpb24u\nRk9SV0FSRCwgRmV0Y2hEaXJlY3Rpb24uRk9SV0FSRCwKICAgICAgICAgICAg\nUmVzdWx0U2V0LkZFVENIX0ZPUldBUkQpOwoKICAgICAgICBmZXRjaERpcmVj\ndGlvbkhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgInJldmVy\nc2UiLAogICAgICAgICAgICBGZXRjaERpcmVjdGlvbi5SRVZFUlNFLCBSZXN1\nbHRTZXQuRkVUQ0hfUkVWRVJTRSk7CiAgICAgICAgZmV0Y2hEaXJlY3Rpb25I\naW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIEZldGNoRGlyZWN0\naW9uLlJFVkVSU0UKICAgICAgICAgICAgLm5hbWUoKSwgRmV0Y2hEaXJlY3Rp\nb24uUkVWRVJTRSwgUmVzdWx0U2V0LkZFVENIX1JFVkVSU0UpOwogICAgICAg\nIGZldGNoRGlyZWN0aW9uSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnRO\nYW1lLAogICAgICAgICAgICBGZXRjaERpcmVjdGlvbi5SRVZFUlNFLCBGZXRj\naERpcmVjdGlvbi5SRVZFUlNFLAogICAgICAgICAgICBSZXN1bHRTZXQuRkVU\nQ0hfUkVWRVJTRSk7CgogICAgICAgIGZldGNoRGlyZWN0aW9uSGludFRlc3Qo\nZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCAidW5rbm93biIsCiAgICAgICAg\nICAgIEZldGNoRGlyZWN0aW9uLlVOS05PV04sIFJlc3VsdFNldC5GRVRDSF9V\nTktOT1dOKTsKICAgICAgICBmZXRjaERpcmVjdGlvbkhpbnRUZXN0KGZQbGFu\nLCBmQ29uZmlnLCBoaW50TmFtZSwgRmV0Y2hEaXJlY3Rpb24uVU5LTk9XTgog\nICAgICAgICAgICAubmFtZSgpLCBGZXRjaERpcmVjdGlvbi5VTktOT1dOLCBS\nZXN1bHRTZXQuRkVUQ0hfVU5LTk9XTik7CiAgICAgICAgZmV0Y2hEaXJlY3Rp\nb25IaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsCiAgICAgICAg\nICAgIEZldGNoRGlyZWN0aW9uLlVOS05PV04sIEZldGNoRGlyZWN0aW9uLlVO\nS05PV04sCiAgICAgICAgICAgIFJlc3VsdFNldC5GRVRDSF9VTktOT1dOKTsK\nCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50\nTmFtZSwgInh4eHh4Iik7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGlu\ndE5hbWUsICJ5eXl5eSIpOwogICAgICAgICAgICBmYWlsKCJFeHBlY3Rpbmcg\nYSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uIik7CiAgICAgICAgfSBjYXRj\naCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgiQ2F1\nZ2h0IGV4cGVjdGVkIGV4Y2VwdGlvbiIsCiAgICAgICAgICAgICAgICBJbGxl\nZ2FsQXJndW1lbnRFeGNlcHRpb24uY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShl\nLmdldENsYXNzKCkpKTsKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwgIjEyMzQ1Iik7CiAgICAg\nICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsICI2Nzg5MCIpOwogICAg\nICAgICAgICBmYWlsKCJFeHBlY3RpbmcgYSBJbGxlZ2FsQXJndW1lbnRFeGNl\ncHRpb24uIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAg\nICAgICAgICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVjdGVkIGV4Y2VwdGlv\nbiIsCiAgICAgICAgICAgICAgICBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24u\nY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShlLmdldENsYXNzKCkpKTsKICAgICAg\nICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4uc2V0SGludCho\naW50TmFtZSwgLTEpOwogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnRO\nYW1lLCAtMik7CiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGluZyBhIElsbGVn\nYWxBcmd1bWVudEV4Y2VwdGlvbi4iKTsKICAgICAgICB9IGNhdGNoIChFeGNl\ncHRpb24gZSkgewogICAgICAgICAgICBhc3NlcnRUcnVlKCJDYXVnaHQgZXhw\nZWN0ZWQgZXhjZXB0aW9uIiwKICAgICAgICAgICAgICAgIElsbGVnYWxBcmd1\nbWVudEV4Y2VwdGlvbi5jbGFzcy5pc0Fzc2lnbmFibGVGcm9tKGUuZ2V0Q2xh\nc3MoKSkpOwogICAgICAgIH0KICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoK\nICAgIC8qIEdvb2QKICAgICAqIFRlc3QgIm9wZW5qcGEuamRiYy5GZXRjaERp\ncmVjdGlvbiIgaGludAogICAgICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0SmRi\nY0ZldGNoRGlyZWN0aW9uSGludCgpIHsKICAgICAgICBTdHJpbmcgaGludE5h\nbWUgPSAib3BlbmpwYS5qZGJjLkZldGNoRGlyZWN0aW9uIjsKCiAgICAgICAg\nRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7\nCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgb2VtID0gKE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyKSBlbS5nZXREZWxlZ2F0ZSgpOwogICAgICAgIEpEQkNG\nZXRjaFBsYW4gZlBsYW4gPSAoSkRCQ0ZldGNoUGxhbikgb2VtLmdldEZldGNo\nUGxhbigpOwogICAgICAgIEpEQkNGZXRjaENvbmZpZ3VyYXRpb25JbXBsIGZD\nb25maWcgPSAoSkRCQ0ZldGNoQ29uZmlndXJhdGlvbkltcGwpCiAgICAgICAg\nICAgICgoRW50aXR5TWFuYWdlckltcGwpIG9lbSkuZ2V0QnJva2VyKCkuZ2V0\nRmV0Y2hDb25maWd1cmF0aW9uKCk7CgogICAgICAgIGZldGNoRGlyZWN0aW9u\nSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCBTdHJpbmcKICAg\nICAgICAgICAgLnZhbHVlT2YoUmVzdWx0U2V0LkZFVENIX0ZPUldBUkQpLCBG\nZXRjaERpcmVjdGlvbi5GT1JXQVJELAogICAgICAgICAgICBSZXN1bHRTZXQu\nRkVUQ0hfRk9SV0FSRCk7CiAgICAgICAgZmV0Y2hEaXJlY3Rpb25IaW50VGVz\ndChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsCiAgICAgICAgICAgIFJlc3Vs\ndFNldC5GRVRDSF9GT1JXQVJELCBGZXRjaERpcmVjdGlvbi5GT1JXQVJELAog\nICAgICAgICAgICBSZXN1bHRTZXQuRkVUQ0hfRk9SV0FSRCk7CgogICAgICAg\nIGZldGNoRGlyZWN0aW9uSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnRO\nYW1lLCBTdHJpbmcKICAgICAgICAgICAgLnZhbHVlT2YoUmVzdWx0U2V0LkZF\nVENIX1JFVkVSU0UpLCBGZXRjaERpcmVjdGlvbi5SRVZFUlNFLAogICAgICAg\nICAgICBSZXN1bHRTZXQuRkVUQ0hfUkVWRVJTRSk7CiAgICAgICAgZmV0Y2hE\naXJlY3Rpb25IaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsCiAg\nICAgICAgICAgIFJlc3VsdFNldC5GRVRDSF9SRVZFUlNFLCBGZXRjaERpcmVj\ndGlvbi5SRVZFUlNFLAogICAgICAgICAgICBSZXN1bHRTZXQuRkVUQ0hfUkVW\nRVJTRSk7CgogICAgICAgIGZldGNoRGlyZWN0aW9uSGludFRlc3QoZlBsYW4s\nIGZDb25maWcsIGhpbnROYW1lLCBTdHJpbmcKICAgICAgICAgICAgLnZhbHVl\nT2YoUmVzdWx0U2V0LkZFVENIX1VOS05PV04pLCBGZXRjaERpcmVjdGlvbi5V\nTktOT1dOLAogICAgICAgICAgICBSZXN1bHRTZXQuRkVUQ0hfVU5LTk9XTik7\nCiAgICAgICAgZmV0Y2hEaXJlY3Rpb25IaW50VGVzdChmUGxhbiwgZkNvbmZp\nZywgaGludE5hbWUsCiAgICAgICAgICAgIFJlc3VsdFNldC5GRVRDSF9VTktO\nT1dOLCBGZXRjaERpcmVjdGlvbi5VTktOT1dOLAogICAgICAgICAgICBSZXN1\nbHRTZXQuRkVUQ0hfVU5LTk9XTik7CgogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsICJ4eHh4eCIpOwogICAgICAg\nICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAieXl5eXkiKTsKICAgICAg\nICAgICAgZmFpbCgiRXhwZWN0aW5nIGEgSWxsZWdhbEFyZ3VtZW50RXhjZXB0\naW9uLiIpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAg\nICAgICAgIGFzc2VydFRydWUoIkNhdWdodCBleHBlY3RlZCBleGNlcHRpb24i\nLAogICAgICAgICAgICAgICAgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLmNs\nYXNzLmlzQXNzaWduYWJsZUZyb20oZS5nZXRDbGFzcygpKSk7CiAgICAgICAg\nfQogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGlu\ndE5hbWUsICIxMjM0NSIpOwogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhp\nbnROYW1lLCAiNjc4OTAiKTsKICAgICAgICAgICAgZmFpbCgiRXhwZWN0aW5n\nIGEgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwogICAgICAgIH0gY2F0\nY2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2VydFRydWUoIkNh\ndWdodCBleHBlY3RlZCBleGNlcHRpb24iLAogICAgICAgICAgICAgICAgSWxs\nZWdhbEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNzaWduYWJsZUZyb20o\nZS5nZXRDbGFzcygpKSk7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAg\nICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsIC0xKTsKICAgICAgICAg\nICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwgLTIpOwogICAgICAgICAgICBm\nYWlsKCJFeHBlY3RpbmcgYSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uIik7\nCiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAg\nYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVjdGVkIGV4Y2VwdGlvbiIsCiAgICAg\nICAgICAgICAgICBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uY2xhc3MuaXNB\nc3NpZ25hYmxlRnJvbShlLmdldENsYXNzKCkpKTsKICAgICAgICB9CiAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwg\nRmV0Y2hDb25maWd1cmF0aW9uLkRFRkFVTFQpOwogICAgICAgICAgICBhc3Nl\ncnRFcXVhbHMoZkNvbmZpZy5nZXRGZXRjaERpcmVjdGlvbigpLCBSZXN1bHRT\nZXQuRkVUQ0hfRk9SV0FSRCk7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9u\nIGUpIHsKICAgICAgICAgICAgZmFpbCgiVW5leHBlY3RlZCAiICsgZS5nZXRD\nbGFzcygpLmdldE5hbWUoKSk7CiAgICAgICAgfQogICAgICAgIGVtLmNsb3Nl\nKCk7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIGZldGNoRGlyZWN0aW9uSGlu\ndFRlc3QoSkRCQ0ZldGNoUGxhbiBmUGxhbiwKICAgICAgICBKREJDRmV0Y2hD\nb25maWd1cmF0aW9uSW1wbCBmQ29uZmlnLCBTdHJpbmcgaGludCwgT2JqZWN0\nIHZhbHVlLAogICAgICAgIE9iamVjdCBleHBlY3RlZFZhbHVlLCBpbnQgZXhw\nZWN0ZWQpIHsKICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnQsIHZhbHVlKTsK\nICAgICAgICBPYmplY3QgZ2V0VmFsdWUgPSBmUGxhbi5nZXRIaW50KGhpbnQp\nOwogICAgICAgIGFzc2VydEVxdWFscyh2YWx1ZS5nZXRDbGFzcygpLCBnZXRW\nYWx1ZS5nZXRDbGFzcygpKTsKICAgICAgICBhc3NlcnRFcXVhbHModmFsdWUs\nIGdldFZhbHVlKTsKICAgICAgICBhc3NlcnRFcXVhbHMoZXhwZWN0ZWRWYWx1\nZSwgZlBsYW4uZ2V0RmV0Y2hEaXJlY3Rpb24oKSk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKGV4cGVjdGVkLCBmQ29uZmlnLmdldEZldGNoRGlyZWN0aW9uKCkp\nOwogICAgfQoKICAgIC8qIEdvb2QKICAgICAqIFRlc3QgIm9wZW5qcGEuRmV0\nY2hQbGFuLklzb2xhdGlvbiIgaGludAogICAgICovCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0RmV0Y2hQbGFuSXNvbGF0aW9uSGludCgpIHsKICAgICAgICBTdHJp\nbmcgaGludE5hbWUgPSAib3BlbmpwYS5GZXRjaFBsYW4uSXNvbGF0aW9uIjsK\nCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlN\nYW5hZ2VyKCk7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgb2VtID0g\nKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKSBlbS5nZXREZWxlZ2F0ZSgpOwogICAg\nICAgIEpEQkNGZXRjaFBsYW4gZlBsYW4gPSAoSkRCQ0ZldGNoUGxhbikgb2Vt\nLmdldEZldGNoUGxhbigpOwogICAgICAgIEpEQkNGZXRjaENvbmZpZ3VyYXRp\nb25JbXBsIGZDb25maWcgPSAoSkRCQ0ZldGNoQ29uZmlndXJhdGlvbkltcGwp\nCiAgICAgICAgICAgICgoRW50aXR5TWFuYWdlckltcGwpIG9lbSkuZ2V0QnJv\na2VyKCkuZ2V0RmV0Y2hDb25maWd1cmF0aW9uKCk7CgogICAgICAgIGlzb2xh\ndGlvbkhpbnRUZXN0KG9lbSwgZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCAi\nZGVmYXVsdCIsCiAgICAgICAgICAgIElzb2xhdGlvbkxldmVsLkRFRkFVTFQs\nIC0xKTsKICAgICAgICBpc29sYXRpb25IaW50VGVzdChvZW0sIGZQbGFuLCBm\nQ29uZmlnLCBoaW50TmFtZSwgIkRFRkFVTFQiLAogICAgICAgICAgICBJc29s\nYXRpb25MZXZlbC5ERUZBVUxULCAtMSk7CiAgICAgICAgaXNvbGF0aW9uSGlu\ndFRlc3Qob2VtLCBmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsCiAgICAgICAg\nICAgIElzb2xhdGlvbkxldmVsLkRFRkFVTFQsIElzb2xhdGlvbkxldmVsLkRF\nRkFVTFQsIC0xKTsKCiAgICAgICAgYm9vbGVhbiBzdXBwb3J0SXNvbGF0aW9u\nRm9yVXBkYXRlID0gKChKREJDQ29uZmlndXJhdGlvbikgZkNvbmZpZwogICAg\nICAgICAgICAuZ2V0Q29udGV4dCgpLmdldENvbmZpZ3VyYXRpb24oKSkuZ2V0\nREJEaWN0aW9uYXJ5SW5zdGFuY2UoKQogICAgICAgICAgICAuc3VwcG9ydHNJ\nc29sYXRpb25Gb3JVcGRhdGUoKTsKICAgICAgICBpZiAoc3VwcG9ydElzb2xh\ndGlvbkZvclVwZGF0ZSkgewogICAgICAgICAgICBpc29sYXRpb25IaW50VGVz\ndChvZW0sIGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgIm5vbmUiLAogICAg\nICAgICAgICAgICAgSXNvbGF0aW9uTGV2ZWwuTk9ORSwgQ29ubmVjdGlvbi5U\nUkFOU0FDVElPTl9OT05FKTsKICAgICAgICAgICAgaXNvbGF0aW9uSGludFRl\nc3Qob2VtLCBmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsICJOT05FIiwKICAg\nICAgICAgICAgICAgIElzb2xhdGlvbkxldmVsLk5PTkUsIENvbm5lY3Rpb24u\nVFJBTlNBQ1RJT05fTk9ORSk7CiAgICAgICAgICAgIGlzb2xhdGlvbkhpbnRU\nZXN0KG9lbSwgZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLAogICAgICAgICAg\nICAgICAgSXNvbGF0aW9uTGV2ZWwuTk9ORSwgSXNvbGF0aW9uTGV2ZWwuTk9O\nRSwKICAgICAgICAgICAgICAgIENvbm5lY3Rpb24uVFJBTlNBQ1RJT05fTk9O\nRSk7CgogICAgICAgICAgICBpc29sYXRpb25IaW50VGVzdChvZW0sIGZQbGFu\nLCBmQ29uZmlnLCBoaW50TmFtZSwKICAgICAgICAgICAgICAgICJyZWFkLXVu\nY29tbWl0dGVkIiwgSXNvbGF0aW9uTGV2ZWwuUkVBRF9VTkNPTU1JVFRFRCwK\nICAgICAgICAgICAgICAgIENvbm5lY3Rpb24uVFJBTlNBQ1RJT05fUkVBRF9V\nTkNPTU1JVFRFRCk7CiAgICAgICAgICAgIGlzb2xhdGlvbkhpbnRUZXN0KG9l\nbSwgZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLAogICAgICAgICAgICAgICAg\nIlJFQURfVU5DT01NSVRURUQiLCBJc29sYXRpb25MZXZlbC5SRUFEX1VOQ09N\nTUlUVEVELAogICAgICAgICAgICAgICAgQ29ubmVjdGlvbi5UUkFOU0FDVElP\nTl9SRUFEX1VOQ09NTUlUVEVEKTsKICAgICAgICAgICAgaXNvbGF0aW9uSGlu\ndFRlc3Qob2VtLCBmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsCiAgICAgICAg\nICAgICAgICBJc29sYXRpb25MZXZlbC5SRUFEX1VOQ09NTUlUVEVELAogICAg\nICAgICAgICAgICAgSXNvbGF0aW9uTGV2ZWwuUkVBRF9VTkNPTU1JVFRFRCwK\nICAgICAgICAgICAgICAgIENvbm5lY3Rpb24uVFJBTlNBQ1RJT05fUkVBRF9V\nTkNPTU1JVFRFRCk7CgogICAgICAgICAgICBpc29sYXRpb25IaW50VGVzdChv\nZW0sIGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgInJlYWQtY29tbWl0dGVk\nIiwKICAgICAgICAgICAgICAgIElzb2xhdGlvbkxldmVsLlJFQURfQ09NTUlU\nVEVELAogICAgICAgICAgICAgICAgQ29ubmVjdGlvbi5UUkFOU0FDVElPTl9S\nRUFEX0NPTU1JVFRFRCk7CiAgICAgICAgICAgIGlzb2xhdGlvbkhpbnRUZXN0\nKG9lbSwgZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCAiUkVBRF9DT01NSVRU\nRUQiLAogICAgICAgICAgICAgICAgSXNvbGF0aW9uTGV2ZWwuUkVBRF9DT01N\nSVRURUQsCiAgICAgICAgICAgICAgICBDb25uZWN0aW9uLlRSQU5TQUNUSU9O\nX1JFQURfQ09NTUlUVEVEKTsKICAgICAgICAgICAgaXNvbGF0aW9uSGludFRl\nc3Qob2VtLCBmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsCiAgICAgICAgICAg\nICAgICBJc29sYXRpb25MZXZlbC5SRUFEX0NPTU1JVFRFRCwgSXNvbGF0aW9u\nTGV2ZWwuUkVBRF9DT01NSVRURUQsCiAgICAgICAgICAgICAgICBDb25uZWN0\naW9uLlRSQU5TQUNUSU9OX1JFQURfQ09NTUlUVEVEKTsKCiAgICAgICAgICAg\nIGlzb2xhdGlvbkhpbnRUZXN0KG9lbSwgZlBsYW4sIGZDb25maWcsIGhpbnRO\nYW1lLCAicmVwZWF0YWJsZS1yZWFkIiwKICAgICAgICAgICAgICAgIElzb2xh\ndGlvbkxldmVsLlJFUEVBVEFCTEVfUkVBRCwKICAgICAgICAgICAgICAgIENv\nbm5lY3Rpb24uVFJBTlNBQ1RJT05fUkVQRUFUQUJMRV9SRUFEKTsKICAgICAg\nICAgICAgaXNvbGF0aW9uSGludFRlc3Qob2VtLCBmUGxhbiwgZkNvbmZpZywg\naGludE5hbWUsICJSRVBFQVRBQkxFX1JFQUQiLAogICAgICAgICAgICAgICAg\nSXNvbGF0aW9uTGV2ZWwuUkVQRUFUQUJMRV9SRUFELAogICAgICAgICAgICAg\nICAgQ29ubmVjdGlvbi5UUkFOU0FDVElPTl9SRVBFQVRBQkxFX1JFQUQpOwog\nICAgICAgICAgICBpc29sYXRpb25IaW50VGVzdChvZW0sIGZQbGFuLCBmQ29u\nZmlnLCBoaW50TmFtZSwKICAgICAgICAgICAgICAgIElzb2xhdGlvbkxldmVs\nLlJFUEVBVEFCTEVfUkVBRCwgSXNvbGF0aW9uTGV2ZWwuUkVQRUFUQUJMRV9S\nRUFELAogICAgICAgICAgICAgICAgQ29ubmVjdGlvbi5UUkFOU0FDVElPTl9S\nRVBFQVRBQkxFX1JFQUQpOwoKICAgICAgICAgICAgaXNvbGF0aW9uSGludFRl\nc3Qob2VtLCBmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsICJzZXJpYWxpemFi\nbGUiLAogICAgICAgICAgICAgICAgSXNvbGF0aW9uTGV2ZWwuU0VSSUFMSVpB\nQkxFLAogICAgICAgICAgICAgICAgQ29ubmVjdGlvbi5UUkFOU0FDVElPTl9T\nRVJJQUxJWkFCTEUpOwogICAgICAgICAgICBpc29sYXRpb25IaW50VGVzdChv\nZW0sIGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgIlNFUklBTElaQUJMRSIs\nCiAgICAgICAgICAgICAgICBJc29sYXRpb25MZXZlbC5TRVJJQUxJWkFCTEUs\nCiAgICAgICAgICAgICAgICBDb25uZWN0aW9uLlRSQU5TQUNUSU9OX1NFUklB\nTElaQUJMRSk7CiAgICAgICAgICAgIGlzb2xhdGlvbkhpbnRUZXN0KG9lbSwg\nZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLAogICAgICAgICAgICAgICAgSXNv\nbGF0aW9uTGV2ZWwuU0VSSUFMSVpBQkxFLCBJc29sYXRpb25MZXZlbC5TRVJJ\nQUxJWkFCTEUsCiAgICAgICAgICAgICAgICBDb25uZWN0aW9uLlRSQU5TQUNU\nSU9OX1NFUklBTElaQUJMRSk7CiAgICAgICAgfQoKICAgICAgICB0cnkgewog\nICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAieHh4eHgiKTsK\nICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwgInl5eXl5Iik7\nCiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGluZyBhIElsbGVnYWxBcmd1bWVu\ndEV4Y2VwdGlvbi4iKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkg\newogICAgICAgICAgICBhc3NlcnRUcnVlKCJDYXVnaHQgZXhwZWN0ZWQgZXhj\nZXB0aW9uIiwKICAgICAgICAgICAgICAgIElsbGVnYWxBcmd1bWVudEV4Y2Vw\ndGlvbi5jbGFzcy5pc0Fzc2lnbmFibGVGcm9tKGUuZ2V0Q2xhc3MoKSkpOwog\nICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgICBmUGxhbi5zZXRI\naW50KGhpbnROYW1lLCAiMTIzNDUiKTsKICAgICAgICAgICAgZlBsYW4uc2V0\nSGludChoaW50TmFtZSwgIjY3ODkwIik7CiAgICAgICAgICAgIGZhaWwoIkV4\ncGVjdGluZyBhIGEgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwogICAg\nICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2Vy\ndFRydWUoIkNhdWdodCBleHBlY3RlZCBleGNlcHRpb24iLAogICAgICAgICAg\nICAgICAgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNzaWdu\nYWJsZUZyb20oZS5nZXRDbGFzcygpKSk7CiAgICAgICAgfQogICAgICAgIC8v\nIElzIG5vdCAtMSBpcyB2YWxpZCB2YWx1ZSBmb3IgdHJhbnNhY3Rpb24gaXNv\nbGF0aW9uIGxldmVsPwovLyAgICAgICAgdHJ5IHsKLy8gICAgICAgICAgICBm\nUGxhbi5zZXRIaW50KGhpbnROYW1lLCAtMSk7Ci8vICAgICAgICAgICAgZlBs\nYW4uc2V0SGludChoaW50TmFtZSwgLTEpOwovLyAgICAgICAgICAgIGZhaWwo\nIkV4cGVjdGluZyBhIGEgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwov\nLyAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKLy8gICAgICAgICAg\nICBhc3NlcnRUcnVlKCJDYXVnaHQgZXhwZWN0ZWQgZXhjZXB0aW9uIiwKLy8g\nICAgICAgICAgICAgICAgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNz\nLmlzQXNzaWduYWJsZUZyb20oZS5nZXRDbGFzcygpKSk7Ci8vICAgICAgICB9\nCiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICAvKiBHb29kCiAgICAg\nKiBUZXN0ICJvcGVuanBhLmpkYmMuVHJhbnNhY3Rpb25Jc29sYXRpb24iIGhp\nbnQKICAgICAqLwogICAgcHVibGljIHZvaWQgdGVzdEpkYmNUcmFuc2FjdGlv\nbklzb2xhdGlvbkhpbnQoKSB7CiAgICAgICAgU3RyaW5nIGhpbnROYW1lID0g\nIm9wZW5qcGEuamRiYy5UcmFuc2FjdGlvbklzb2xhdGlvbiI7CgogICAgICAg\nIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigp\nOwogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIG9lbSA9IChPcGVuSlBB\nRW50aXR5TWFuYWdlcikgZW0uZ2V0RGVsZWdhdGUoKTsKICAgICAgICBKREJD\nRmV0Y2hQbGFuIGZQbGFuID0gKEpEQkNGZXRjaFBsYW4pIG9lbS5nZXRGZXRj\naFBsYW4oKTsKICAgICAgICBKREJDRmV0Y2hDb25maWd1cmF0aW9uSW1wbCBm\nQ29uZmlnID0gKEpEQkNGZXRjaENvbmZpZ3VyYXRpb25JbXBsKQogICAgICAg\nICAgICAoKEVudGl0eU1hbmFnZXJJbXBsKSBvZW0pLmdldEJyb2tlcigpLmdl\ndEZldGNoQ29uZmlndXJhdGlvbigpOwoKICAgICAgICBpc29sYXRpb25IaW50\nVGVzdChvZW0sIGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgIi0xIiwKICAg\nICAgICAgICAgSXNvbGF0aW9uTGV2ZWwuREVGQVVMVCwgLTEpOwogICAgICAg\nIGlzb2xhdGlvbkhpbnRUZXN0KG9lbSwgZlBsYW4sIGZDb25maWcsIGhpbnRO\nYW1lLCAtMSwKICAgICAgICAgICAgSXNvbGF0aW9uTGV2ZWwuREVGQVVMVCwg\nLTEpOwoKICAgICAgICBib29sZWFuIHN1cHBvcnRJc29sYXRpb25Gb3JVcGRh\ndGUgPSAoKEpEQkNDb25maWd1cmF0aW9uKSBmQ29uZmlnCiAgICAgICAgICAg\nIC5nZXRDb250ZXh0KCkuZ2V0Q29uZmlndXJhdGlvbigpKS5nZXREQkRpY3Rp\nb25hcnlJbnN0YW5jZSgpCiAgICAgICAgICAgIC5zdXBwb3J0c0lzb2xhdGlv\nbkZvclVwZGF0ZSgpOwogICAgICAgIGlmIChzdXBwb3J0SXNvbGF0aW9uRm9y\nVXBkYXRlKSB7CiAgICAgICAgICAgIGlzb2xhdGlvbkhpbnRUZXN0KG9lbSwg\nZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCBTdHJpbmcKICAgICAgICAgICAg\nICAgIC52YWx1ZU9mKENvbm5lY3Rpb24uVFJBTlNBQ1RJT05fTk9ORSksIElz\nb2xhdGlvbkxldmVsLk5PTkUsCiAgICAgICAgICAgICAgICBDb25uZWN0aW9u\nLlRSQU5TQUNUSU9OX05PTkUpOwogICAgICAgICAgICBpc29sYXRpb25IaW50\nVGVzdChvZW0sIGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwKICAgICAgICAg\nICAgICAgIENvbm5lY3Rpb24uVFJBTlNBQ1RJT05fTk9ORSwgSXNvbGF0aW9u\nTGV2ZWwuTk9ORSwKICAgICAgICAgICAgICAgIENvbm5lY3Rpb24uVFJBTlNB\nQ1RJT05fTk9ORSk7CgogICAgICAgICAgICBpc29sYXRpb25IaW50VGVzdChv\nZW0sIGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgU3RyaW5nCiAgICAgICAg\nICAgICAgICAudmFsdWVPZihDb25uZWN0aW9uLlRSQU5TQUNUSU9OX1JFQURf\nVU5DT01NSVRURUQpLAogICAgICAgICAgICAgICAgSXNvbGF0aW9uTGV2ZWwu\nUkVBRF9VTkNPTU1JVFRFRCwKICAgICAgICAgICAgICAgIENvbm5lY3Rpb24u\nVFJBTlNBQ1RJT05fUkVBRF9VTkNPTU1JVFRFRCk7CiAgICAgICAgICAgIGlz\nb2xhdGlvbkhpbnRUZXN0KG9lbSwgZlBsYW4sIGZDb25maWcsIGhpbnROYW1l\nLAogICAgICAgICAgICAgICAgQ29ubmVjdGlvbi5UUkFOU0FDVElPTl9SRUFE\nX1VOQ09NTUlUVEVELAogICAgICAgICAgICAgICAgSXNvbGF0aW9uTGV2ZWwu\nUkVBRF9VTkNPTU1JVFRFRCwKICAgICAgICAgICAgICAgIENvbm5lY3Rpb24u\nVFJBTlNBQ1RJT05fUkVBRF9VTkNPTU1JVFRFRCk7CgogICAgICAgICAgICBp\nc29sYXRpb25IaW50VGVzdChvZW0sIGZQbGFuLCBmQ29uZmlnLCBoaW50TmFt\nZSwgU3RyaW5nCiAgICAgICAgICAgICAgICAudmFsdWVPZihDb25uZWN0aW9u\nLlRSQU5TQUNUSU9OX1JFQURfQ09NTUlUVEVEKSwKICAgICAgICAgICAgICAg\nIElzb2xhdGlvbkxldmVsLlJFQURfQ09NTUlUVEVELAogICAgICAgICAgICAg\nICAgQ29ubmVjdGlvbi5UUkFOU0FDVElPTl9SRUFEX0NPTU1JVFRFRCk7CiAg\nICAgICAgICAgIGlzb2xhdGlvbkhpbnRUZXN0KG9lbSwgZlBsYW4sIGZDb25m\naWcsIGhpbnROYW1lLAogICAgICAgICAgICAgICAgQ29ubmVjdGlvbi5UUkFO\nU0FDVElPTl9SRUFEX0NPTU1JVFRFRCwKICAgICAgICAgICAgICAgIElzb2xh\ndGlvbkxldmVsLlJFQURfQ09NTUlUVEVELAogICAgICAgICAgICAgICAgQ29u\nbmVjdGlvbi5UUkFOU0FDVElPTl9SRUFEX0NPTU1JVFRFRCk7CgogICAgICAg\nICAgICBpc29sYXRpb25IaW50VGVzdChvZW0sIGZQbGFuLCBmQ29uZmlnLCBo\naW50TmFtZSwgU3RyaW5nCiAgICAgICAgICAgICAgICAudmFsdWVPZihDb25u\nZWN0aW9uLlRSQU5TQUNUSU9OX1JFUEVBVEFCTEVfUkVBRCksCiAgICAgICAg\nICAgICAgICBJc29sYXRpb25MZXZlbC5SRVBFQVRBQkxFX1JFQUQsCiAgICAg\nICAgICAgICAgICBDb25uZWN0aW9uLlRSQU5TQUNUSU9OX1JFUEVBVEFCTEVf\nUkVBRCk7CiAgICAgICAgICAgIGlzb2xhdGlvbkhpbnRUZXN0KG9lbSwgZlBs\nYW4sIGZDb25maWcsIGhpbnROYW1lLAogICAgICAgICAgICAgICAgQ29ubmVj\ndGlvbi5UUkFOU0FDVElPTl9SRVBFQVRBQkxFX1JFQUQsCiAgICAgICAgICAg\nICAgICBJc29sYXRpb25MZXZlbC5SRVBFQVRBQkxFX1JFQUQsCiAgICAgICAg\nICAgICAgICBDb25uZWN0aW9uLlRSQU5TQUNUSU9OX1JFUEVBVEFCTEVfUkVB\nRCk7CgogICAgICAgICAgICBpc29sYXRpb25IaW50VGVzdChvZW0sIGZQbGFu\nLCBmQ29uZmlnLCBoaW50TmFtZSwgU3RyaW5nCiAgICAgICAgICAgICAgICAu\ndmFsdWVPZihDb25uZWN0aW9uLlRSQU5TQUNUSU9OX1NFUklBTElaQUJMRSks\nCiAgICAgICAgICAgICAgICBJc29sYXRpb25MZXZlbC5TRVJJQUxJWkFCTEUs\nCiAgICAgICAgICAgICAgICBDb25uZWN0aW9uLlRSQU5TQUNUSU9OX1NFUklB\nTElaQUJMRSk7CiAgICAgICAgICAgIGlzb2xhdGlvbkhpbnRUZXN0KG9lbSwg\nZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLAogICAgICAgICAgICAgICAgQ29u\nbmVjdGlvbi5UUkFOU0FDVElPTl9TRVJJQUxJWkFCTEUsCiAgICAgICAgICAg\nICAgICBJc29sYXRpb25MZXZlbC5TRVJJQUxJWkFCTEUsCiAgICAgICAgICAg\nICAgICBDb25uZWN0aW9uLlRSQU5TQUNUSU9OX1NFUklBTElaQUJMRSk7CiAg\nICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZQbGFuLnNldEhp\nbnQoaGludE5hbWUsICJ4eHh4eCIpOwogICAgICAgICAgICBmUGxhbi5zZXRI\naW50KGhpbnROYW1lLCAieXl5eXkiKTsKICAgICAgICAgICAgZmFpbCgiRXhw\nZWN0aW5nIGEgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwogICAgICAg\nIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2VydFRy\ndWUoIkNhdWdodCBleHBlY3RlZCBleGNlcHRpb24iLAogICAgICAgICAgICAg\nICAgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNzaWduYWJs\nZUZyb20oZS5nZXRDbGFzcygpKSk7CiAgICAgICAgfQogICAgICAgIHRyeSB7\nCiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsICIxMjM0NSIp\nOwogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAiNjc4OTAi\nKTsKICAgICAgICAgICAgZmFpbCgiRXhwZWN0aW5nIGEgYSBJbGxlZ2FsQXJn\ndW1lbnRFeGNlcHRpb24uIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9u\nIGUpIHsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVjdGVk\nIGV4Y2VwdGlvbiIsCiAgICAgICAgICAgICAgICBJbGxlZ2FsQXJndW1lbnRF\neGNlcHRpb24uY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShlLmdldENsYXNzKCkp\nKTsKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4u\nc2V0SGludChoaW50TmFtZSwgLTIpOwogICAgICAgICAgICBmUGxhbi5zZXRI\naW50KGhpbnROYW1lLCAtMyk7CiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGlu\nZyBhIGEgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwogICAgICAgIH0g\nY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2VydFRydWUo\nIkNhdWdodCBleHBlY3RlZCBleGNlcHRpb24iLAogICAgICAgICAgICAgICAg\nSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNzaWduYWJsZUZy\nb20oZS5nZXRDbGFzcygpKSk7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAg\nICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsIEZldGNoQ29uZmln\ndXJhdGlvbi5ERUZBVUxUKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKElz\nb2xhdGlvbkxldmVsLkRFRkFVTFQsIGZQbGFuLmdldElzb2xhdGlvbigpKTsK\nICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKC0xLCBmQ29uZmlnLmdldElzb2xh\ndGlvbigpKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAg\nICAgICAgICBmYWlsKCJVbmV4cGVjdGVkICIgKyBlLmdldENsYXNzKCkuZ2V0\nTmFtZSgpKTsKICAgICAgICB9CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0K\nCiAgICBAU3VwcHJlc3NXYXJuaW5ncygiZGVwcmVjYXRpb24iKQogICAgcHJp\ndmF0ZSB2b2lkIGlzb2xhdGlvbkhpbnRUZXN0KE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyIG9lbSwKICAgICAgICBKREJDRmV0Y2hQbGFuIGZQbGFuLCBKREJDRmV0\nY2hDb25maWd1cmF0aW9uSW1wbCBmQ29uZmlnLCBTdHJpbmcgaGludCwKICAg\nICAgICBPYmplY3QgdmFsdWUsIE9iamVjdCBleHBlY3RlZFZhbHVlLCBpbnQg\nZXhwZWN0ZWQpIHsKICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnQsIHZhbHVl\nKTsKICAgICAgICBPYmplY3QgZ2V0VmFsdWUgPSBmUGxhbi5nZXRIaW50KGhp\nbnQpOwogICAgICAgIGFzc2VydEVxdWFscyh2YWx1ZS5nZXRDbGFzcygpLCBn\nZXRWYWx1ZS5nZXRDbGFzcygpKTsKICAgICAgICBhc3NlcnRFcXVhbHModmFs\ndWUsIGdldFZhbHVlKTsKICAgICAgICBhc3NlcnRFcXVhbHMoZXhwZWN0ZWRW\nYWx1ZSwgZlBsYW4uZ2V0SXNvbGF0aW9uKCkpOwogICAgICAgIGFzc2VydEVx\ndWFscyhleHBlY3RlZCwgZkNvbmZpZy5nZXRJc29sYXRpb24oKSk7CiAgICB9\nCgogICAgLyogR29vZAogICAgICogVGVzdCAib3BlbmpwYS5GZXRjaFBsYW4u\nTFJTU2l6ZUFsZ29yaXRobSIgaGludAogICAgICovCiAgICBwdWJsaWMgdm9p\nZCB0ZXN0RmV0Y2hQbGFuTFJTU2l6ZUFsZ29yaXRobUhpbnQoKSB7CiAgICAg\nICAgU3RyaW5nIGhpbnROYW1lID0gIm9wZW5qcGEuRmV0Y2hQbGFuLkxSU1Np\nemVBbGdvcml0aG0iOwoKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1m\nLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBPcGVuSlBBRW50aXR5\nTWFuYWdlciBvZW0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpIGVtLmdldERl\nbGVnYXRlKCk7CiAgICAgICAgSkRCQ0ZldGNoUGxhbiBmUGxhbiA9IChKREJD\nRmV0Y2hQbGFuKSBvZW0uZ2V0RmV0Y2hQbGFuKCk7CiAgICAgICAgSkRCQ0Zl\ndGNoQ29uZmlndXJhdGlvbkltcGwgZkNvbmZpZyA9IChKREJDRmV0Y2hDb25m\naWd1cmF0aW9uSW1wbCkKICAgICAgICAgICAgKChFbnRpdHlNYW5hZ2VySW1w\nbCkgb2VtKS5nZXRCcm9rZXIoKS5nZXRGZXRjaENvbmZpZ3VyYXRpb24oKTsK\nCiAgICAgICAgbHJzU2l6ZUhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50\nTmFtZSwgInF1ZXJ5IiwKICAgICAgICAgICAgTFJTU2l6ZUFsZ29yaXRobS5R\nVUVSWSwgTFJTU2l6ZXMuU0laRV9RVUVSWSk7CiAgICAgICAgbHJzU2l6ZUhp\nbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgTFJTU2l6ZUFsZ29y\naXRobS5RVUVSWS5uYW1lKCksCiAgICAgICAgICAgIExSU1NpemVBbGdvcml0\naG0uUVVFUlksIExSU1NpemVzLlNJWkVfUVVFUlkpOwogICAgICAgIGxyc1Np\nemVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIExSU1NpemVB\nbGdvcml0aG0uUVVFUlksCiAgICAgICAgICAgIExSU1NpemVBbGdvcml0aG0u\nUVVFUlksIExSU1NpemVzLlNJWkVfUVVFUlkpOwoKICAgICAgICBscnNTaXpl\nSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCAibGFzdCIsCiAg\nICAgICAgICAgIExSU1NpemVBbGdvcml0aG0uTEFTVCwgTFJTU2l6ZXMuU0la\nRV9MQVNUKTsKICAgICAgICBscnNTaXplSGludFRlc3QoZlBsYW4sIGZDb25m\naWcsIGhpbnROYW1lLCBMUlNTaXplQWxnb3JpdGhtLkxBU1QubmFtZSgpLAog\nICAgICAgICAgICBMUlNTaXplQWxnb3JpdGhtLkxBU1QsIExSU1NpemVzLlNJ\nWkVfTEFTVCk7CiAgICAgICAgbHJzU2l6ZUhpbnRUZXN0KGZQbGFuLCBmQ29u\nZmlnLCBoaW50TmFtZSwgTFJTU2l6ZUFsZ29yaXRobS5MQVNULAogICAgICAg\nICAgICBMUlNTaXplQWxnb3JpdGhtLkxBU1QsIExSU1NpemVzLlNJWkVfTEFT\nVCk7CgogICAgICAgIGxyc1NpemVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywg\naGludE5hbWUsICJ1bmtub3duIiwKICAgICAgICAgICAgTFJTU2l6ZUFsZ29y\naXRobS5VTktOT1dOLCBMUlNTaXplcy5TSVpFX1VOS05PV04pOwogICAgICAg\nIGxyc1NpemVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIExS\nU1NpemVBbGdvcml0aG0uVU5LTk9XTgogICAgICAgICAgICAubmFtZSgpLCBM\nUlNTaXplQWxnb3JpdGhtLlVOS05PV04sIExSU1NpemVzLlNJWkVfVU5LTk9X\nTik7CiAgICAgICAgbHJzU2l6ZUhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBo\naW50TmFtZSwgTFJTU2l6ZUFsZ29yaXRobS5VTktOT1dOLAogICAgICAgICAg\nICBMUlNTaXplQWxnb3JpdGhtLlVOS05PV04sIExSU1NpemVzLlNJWkVfVU5L\nTk9XTik7CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZQbGFuLnNldEhp\nbnQoaGludE5hbWUsICJ4eHh4eCIpOwogICAgICAgICAgICBmUGxhbi5zZXRI\naW50KGhpbnROYW1lLCAieXl5eXkiKTsKICAgICAgICAgICAgZmFpbCgiRXhw\nZWN0aW5nIGEgYSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uIik7CiAgICAg\nICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgYXNzZXJ0\nVHJ1ZSgiQ2F1Z2h0IGV4cGVjdGVkIGV4Y2VwdGlvbiIsCiAgICAgICAgICAg\nICAgICBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uY2xhc3MuaXNBc3NpZ25h\nYmxlRnJvbShlLmdldENsYXNzKCkpKTsKICAgICAgICB9CiAgICAgICAgdHJ5\nIHsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwgIjEyMzQ1\nIik7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsICI2Nzg5\nMCIpOwogICAgICAgICAgICBmYWlsKCJFeHBlY3RpbmcgYSBhIElsbGVnYWxB\ncmd1bWVudEV4Y2VwdGlvbi4iKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRp\nb24gZSkgewogICAgICAgICAgICBhc3NlcnRUcnVlKCJDYXVnaHQgZXhwZWN0\nZWQgZXhjZXB0aW9uIiwKICAgICAgICAgICAgICAgIElsbGVnYWxBcmd1bWVu\ndEV4Y2VwdGlvbi5jbGFzcy5pc0Fzc2lnbmFibGVGcm9tKGUuZ2V0Q2xhc3Mo\nKSkpOwogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgICBmUGxh\nbi5zZXRIaW50KGhpbnROYW1lLCAtMSk7CiAgICAgICAgICAgIGZQbGFuLnNl\ndEhpbnQoaGludE5hbWUsIC0yKTsKICAgICAgICAgICAgZmFpbCgiRXhwZWN0\naW5nIGEgYSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uIik7CiAgICAgICAg\nfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgYXNzZXJ0VHJ1\nZSgiQ2F1Z2h0IHVuZXhwZWN0ZWQgZXhjZXB0aW9uICIgKyBlLAogICAgICAg\nICAgICAgICAgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNz\naWduYWJsZUZyb20oZS5nZXRDbGFzcygpKSk7CiAgICAgICAgfQogICAgICAg\nIGVtLmNsb3NlKCk7CiAgICB9CgogICAgLyogR29vZAogICAgICogVGVzdCAi\nb3BlbmpwYS5GZXRjaFBsYW4uTFJTU2l6ZSIgaGludAogICAgICovCiAgICBA\nU3VwcHJlc3NXYXJuaW5ncygiZGVwcmVjYXRpb24iKQogICAgcHVibGljIHZv\naWQgdGVzdEZldGNoUGxhbkxSU1NpemVIaW50KCkgewogICAgICAgIFN0cmlu\nZyBoaW50TmFtZSA9ICJvcGVuanBhLkZldGNoUGxhbi5MUlNTaXplIjsKCiAg\nICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5h\nZ2VyKCk7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgb2VtID0gKE9w\nZW5KUEFFbnRpdHlNYW5hZ2VyKSBlbS5nZXREZWxlZ2F0ZSgpOwogICAgICAg\nIEpEQkNGZXRjaFBsYW4gZlBsYW4gPSAoSkRCQ0ZldGNoUGxhbikgb2VtLmdl\ndEZldGNoUGxhbigpOwogICAgICAgIEpEQkNGZXRjaENvbmZpZ3VyYXRpb25J\nbXBsIGZDb25maWcgPSAoSkRCQ0ZldGNoQ29uZmlndXJhdGlvbkltcGwpCiAg\nICAgICAgICAgICgoRW50aXR5TWFuYWdlckltcGwpIG9lbSkuZ2V0QnJva2Vy\nKCkuZ2V0RmV0Y2hDb25maWd1cmF0aW9uKCk7CgogICAgICAgIGxyc1NpemVI\naW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIFN0cmluZwogICAg\nICAgICAgICAudmFsdWVPZihMUlNTaXplcy5TSVpFX1FVRVJZKSwgTFJTU2l6\nZUFsZ29yaXRobS5RVUVSWSwKICAgICAgICAgICAgTFJTU2l6ZXMuU0laRV9R\nVUVSWSk7CiAgICAgICAgbHJzU2l6ZUhpbnRUZXN0KGZQbGFuLCBmQ29uZmln\nLCBoaW50TmFtZSwgTFJTU2l6ZXMuU0laRV9RVUVSWSwKICAgICAgICAgICAg\nTFJTU2l6ZUFsZ29yaXRobS5RVUVSWSwgTFJTU2l6ZXMuU0laRV9RVUVSWSk7\nCgogICAgICAgIGxyc1NpemVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGlu\ndE5hbWUsIFN0cmluZwogICAgICAgICAgICAudmFsdWVPZihMUlNTaXplcy5T\nSVpFX0xBU1QpLCBMUlNTaXplQWxnb3JpdGhtLkxBU1QsCiAgICAgICAgICAg\nIExSU1NpemVzLlNJWkVfTEFTVCk7CiAgICAgICAgbHJzU2l6ZUhpbnRUZXN0\nKGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgTFJTU2l6ZXMuU0laRV9MQVNU\nLAogICAgICAgICAgICBMUlNTaXplQWxnb3JpdGhtLkxBU1QsIExSU1NpemVz\nLlNJWkVfTEFTVCk7CgogICAgICAgIGxyc1NpemVIaW50VGVzdChmUGxhbiwg\nZkNvbmZpZywgaGludE5hbWUsIFN0cmluZwogICAgICAgICAgICAudmFsdWVP\nZihMUlNTaXplcy5TSVpFX1VOS05PV04pLCBMUlNTaXplQWxnb3JpdGhtLlVO\nS05PV04sCiAgICAgICAgICAgIExSU1NpemVzLlNJWkVfVU5LTk9XTik7CiAg\nICAgICAgbHJzU2l6ZUhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFt\nZSwgTFJTU2l6ZXMuU0laRV9VTktOT1dOLAogICAgICAgICAgICBMUlNTaXpl\nQWxnb3JpdGhtLlVOS05PV04sIExSU1NpemVzLlNJWkVfVU5LTk9XTik7Cgog\nICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5h\nbWUsICJ4eHh4eCIpOwogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnRO\nYW1lLCAieXl5eXkiKTsKICAgICAgICAgICAgZmFpbCgiRXhwZWN0aW5nIGEg\nYSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uIik7CiAgICAgICAgfSBjYXRj\naCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgiQ2F1\nZ2h0IGV4cGVjdGVkIGV4Y2VwdGlvbiIsCiAgICAgICAgICAgICAgICBJbGxl\nZ2FsQXJndW1lbnRFeGNlcHRpb24uY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShl\nLmdldENsYXNzKCkpKTsKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAg\nICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwgIjEyMzQ1Iik7CiAgICAg\nICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsICI2Nzg5MCIpOwogICAg\nICAgICAgICBmYWlsKCJFeHBlY3RpbmcgYSBhIElsbGVnYWxBcmd1bWVudEV4\nY2VwdGlvbi4iKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewog\nICAgICAgICAgICBhc3NlcnRUcnVlKCJDYXVnaHQgZXhwZWN0ZWQgZXhjZXB0\naW9uIiwKICAgICAgICAgICAgICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlv\nbi5jbGFzcy5pc0Fzc2lnbmFibGVGcm9tKGUuZ2V0Q2xhc3MoKSkpOwogICAg\nICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgICBmUGxhbi5zZXRIaW50\nKGhpbnROYW1lLCAtMSk7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGlu\ndE5hbWUsIC0yKTsKICAgICAgICAgICAgZmFpbCgiRXhwZWN0aW5nIGEgYSBJ\nbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uIik7CiAgICAgICAgfSBjYXRjaCAo\nRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0\nIGV4cGVjdGVkIGV4Y2VwdGlvbiIsCiAgICAgICAgICAgICAgICBJbGxlZ2Fs\nQXJndW1lbnRFeGNlcHRpb24uY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShlLmdl\ndENsYXNzKCkpKTsKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwgRmV0Y2hDb25maWd1cmF0aW9u\nLkRFRkFVTFQpOwogICAgICAgICAgICBhc3NlcnRFcXVhbHMoTFJTU2l6ZUFs\nZ29yaXRobS5RVUVSWSwgZlBsYW4uZ2V0TFJTU2l6ZUFsZ29yaXRobSgpKTsK\nICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKExSU1NpemVzLlNJWkVfUVVFUlks\nIGZQbGFuLmdldExSU1NpemUoKSk7CiAgICAgICAgICAgIGFzc2VydEVxdWFs\ncyhMUlNTaXplcy5TSVpFX1FVRVJZLCBmQ29uZmlnLmdldExSU1NpemUoKSk7\nCiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAg\nZS5wcmludFN0YWNrVHJhY2UoKTsKICAgICAgICAgICAgZmFpbCgiVW5leHBl\nY3RlZCAiICsgZS5nZXRDbGFzcygpLmdldE5hbWUoKSk7CiAgICAgICAgfQog\nICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgLyogR29vZAogICAgICog\nVGVzdCAib3BlbmpwYS5qZGJjLkxSU1NpemUiIGhpbnQKICAgICAqLwogICAg\nQFN1cHByZXNzV2FybmluZ3MoImRlcHJlY2F0aW9uIikKICAgIHB1YmxpYyB2\nb2lkIHRlc3RKZGJjTFJTU2l6ZUhpbnQoKSB7CiAgICAgICAgU3RyaW5nIGhp\nbnROYW1lID0gIm9wZW5qcGEuamRiYy5MUlNTaXplIjsKCiAgICAgICAgRW50\naXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAg\nICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgb2VtID0gKE9wZW5KUEFFbnRp\ndHlNYW5hZ2VyKSBlbS5nZXREZWxlZ2F0ZSgpOwogICAgICAgIEpEQkNGZXRj\naFBsYW4gZlBsYW4gPSAoSkRCQ0ZldGNoUGxhbikgb2VtLmdldEZldGNoUGxh\nbigpOwogICAgICAgIEpEQkNGZXRjaENvbmZpZ3VyYXRpb25JbXBsIGZDb25m\naWcgPSAoSkRCQ0ZldGNoQ29uZmlndXJhdGlvbkltcGwpCiAgICAgICAgICAg\nICgoRW50aXR5TWFuYWdlckltcGwpIG9lbSkuZ2V0QnJva2VyKCkuZ2V0RmV0\nY2hDb25maWd1cmF0aW9uKCk7CgogICAgICAgIGxyc1NpemVIaW50VGVzdChm\nUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIFN0cmluZwogICAgICAgICAgICAu\ndmFsdWVPZihMUlNTaXplcy5TSVpFX1FVRVJZKSwgTFJTU2l6ZUFsZ29yaXRo\nbS5RVUVSWSwKICAgICAgICAgICAgTFJTU2l6ZXMuU0laRV9RVUVSWSk7CiAg\nICAgICAgbHJzU2l6ZUhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFt\nZSwgTFJTU2l6ZXMuU0laRV9RVUVSWSwKICAgICAgICAgICAgTFJTU2l6ZUFs\nZ29yaXRobS5RVUVSWSwgTFJTU2l6ZXMuU0laRV9RVUVSWSk7CgogICAgICAg\nIGxyc1NpemVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIFN0\ncmluZwogICAgICAgICAgICAudmFsdWVPZihMUlNTaXplcy5TSVpFX0xBU1Qp\nLCBMUlNTaXplQWxnb3JpdGhtLkxBU1QsCiAgICAgICAgICAgIExSU1NpemVz\nLlNJWkVfTEFTVCk7CiAgICAgICAgbHJzU2l6ZUhpbnRUZXN0KGZQbGFuLCBm\nQ29uZmlnLCBoaW50TmFtZSwgTFJTU2l6ZXMuU0laRV9MQVNULAogICAgICAg\nICAgICBMUlNTaXplQWxnb3JpdGhtLkxBU1QsIExSU1NpemVzLlNJWkVfTEFT\nVCk7CgogICAgICAgIGxyc1NpemVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywg\naGludE5hbWUsIFN0cmluZwogICAgICAgICAgICAudmFsdWVPZihMUlNTaXpl\ncy5TSVpFX1VOS05PV04pLCBMUlNTaXplQWxnb3JpdGhtLlVOS05PV04sCiAg\nICAgICAgICAgIExSU1NpemVzLlNJWkVfVU5LTk9XTik7CiAgICAgICAgbHJz\nU2l6ZUhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgTFJTU2l6\nZXMuU0laRV9VTktOT1dOLAogICAgICAgICAgICBMUlNTaXplQWxnb3JpdGht\nLlVOS05PV04sIExSU1NpemVzLlNJWkVfVU5LTk9XTik7CgogICAgICAgIHRy\neSB7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsICJ4eHh4\neCIpOwogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAieXl5\neXkiKTsKICAgICAgICAgICAgZmFpbCgiRXhwZWN0aW5nIGEgYSBJbGxlZ2Fs\nQXJndW1lbnRFeGNlcHRpb24uIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0\naW9uIGUpIHsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVj\ndGVkIGV4Y2VwdGlvbiIsCiAgICAgICAgICAgICAgICBJbGxlZ2FsQXJndW1l\nbnRFeGNlcHRpb24uY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShlLmdldENsYXNz\nKCkpKTsKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZlBs\nYW4uc2V0SGludChoaW50TmFtZSwgIjEyMzQ1Iik7CiAgICAgICAgICAgIGZQ\nbGFuLnNldEhpbnQoaGludE5hbWUsICI2Nzg5MCIpOwogICAgICAgICAgICBm\nYWlsKCJFeHBlY3RpbmcgYSBhIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi4i\nKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAg\nICBhc3NlcnRUcnVlKCJDYXVnaHQgZXhwZWN0ZWQgZXhjZXB0aW9uIiwKICAg\nICAgICAgICAgICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5jbGFzcy5p\nc0Fzc2lnbmFibGVGcm9tKGUuZ2V0Q2xhc3MoKSkpOwogICAgICAgIH0KICAg\nICAgICB0cnkgewogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1l\nLCAtMSk7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsIC0y\nKTsKICAgICAgICAgICAgZmFpbCgiRXhwZWN0aW5nIGEgYSBJbGxlZ2FsQXJn\ndW1lbnRFeGNlcHRpb24uIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9u\nIGUpIHsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVjdGVk\nIGV4Y2VwdGlvbiIsCiAgICAgICAgICAgICAgICBJbGxlZ2FsQXJndW1lbnRF\neGNlcHRpb24uY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShlLmdldENsYXNzKCkp\nKTsKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4u\nc2V0SGludChoaW50TmFtZSwgRmV0Y2hDb25maWd1cmF0aW9uLkRFRkFVTFQp\nOwogICAgICAgICAgICBhc3NlcnRFcXVhbHMoTFJTU2l6ZUFsZ29yaXRobS5R\nVUVSWSwgZlBsYW4uZ2V0TFJTU2l6ZUFsZ29yaXRobSgpKTsKICAgICAgICAg\nICAgYXNzZXJ0RXF1YWxzKExSU1NpemVzLlNJWkVfUVVFUlksIGZQbGFuLmdl\ndExSU1NpemUoKSk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscyhMUlNTaXpl\ncy5TSVpFX1FVRVJZLCBmQ29uZmlnLmdldExSU1NpemUoKSk7CiAgICAgICAg\nfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgZS5wcmludFN0\nYWNrVHJhY2UoKTsKICAgICAgICAgICAgZmFpbCgiVW5leHBlY3RlZCAiICsg\nZS5nZXRDbGFzcygpLmdldE5hbWUoKSk7CiAgICAgICAgfQogICAgICAgIGVt\nLmNsb3NlKCk7CiAgICB9CgogICAgQFN1cHByZXNzV2FybmluZ3MoImRlcHJl\nY2F0aW9uIikKICAgIHByaXZhdGUgdm9pZCBscnNTaXplSGludFRlc3QoSkRC\nQ0ZldGNoUGxhbiBmUGxhbiwKICAgICAgICBKREJDRmV0Y2hDb25maWd1cmF0\naW9uSW1wbCBmQ29uZmlnLCBTdHJpbmcgaGludCwgT2JqZWN0IHZhbHVlLAog\nICAgICAgIE9iamVjdCBleHBlY3RlZFZhbHVlLCBpbnQgZXhwZWN0ZWQpIHsK\nICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnQsIHZhbHVlKTsKICAgICAgICBP\nYmplY3QgZ2V0VmFsdWUgPSBmUGxhbi5nZXRIaW50KGhpbnQpOwogICAgICAg\nIGFzc2VydEVxdWFscyh2YWx1ZS5nZXRDbGFzcygpLCBnZXRWYWx1ZS5nZXRD\nbGFzcygpKTsKICAgICAgICBhc3NlcnRFcXVhbHModmFsdWUsIGdldFZhbHVl\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoZXhwZWN0ZWRWYWx1ZSwgZlBsYW4u\nZ2V0TFJTU2l6ZUFsZ29yaXRobSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMo\nZXhwZWN0ZWQsIGZQbGFuLmdldExSU1NpemUoKSk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKGV4cGVjdGVkLCBmQ29uZmlnLmdldExSU1NpemUoKSk7CiAgICB9\nCgogICAgLyogR29vZAogICAgICogVGVzdCAib3BlbmpwYS5GZXRjaFBsYW4u\nTWF4RmV0Y2hEZXB0aCIgaGludAogICAgICovCiAgICBwdWJsaWMgdm9pZCB0\nZXN0RmV0Y2hQbGFuTWF4RmV0Y2hEZXB0aEhpbnQoKSB7CiAgICAgICAgU3Ry\naW5nIGhpbnROYW1lID0gIm9wZW5qcGEuRmV0Y2hQbGFuLk1heEZldGNoRGVw\ndGgiOwoKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVu\ndGl0eU1hbmFnZXIoKTsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBv\nZW0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpZW0uZ2V0RGVsZWdhdGUoKTsK\nICAgICAgICBKREJDRmV0Y2hQbGFuIGZQbGFuID0gKEpEQkNGZXRjaFBsYW4p\nIG9lbS5nZXRGZXRjaFBsYW4oKTsKICAgICAgICBKREJDRmV0Y2hDb25maWd1\ncmF0aW9uSW1wbCBmQ29uZmlnID0gKEpEQkNGZXRjaENvbmZpZ3VyYXRpb25J\nbXBsKQogICAgICAgICAgICAoKEVudGl0eU1hbmFnZXJJbXBsKSBvZW0pLmdl\ndEJyb2tlcigpLmdldEZldGNoQ29uZmlndXJhdGlvbigpOwoKICAgICAgICBt\nYXhGZXRjaERlcHRoSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1l\nLCAiLTEiLCAtMSk7CiAgICAgICAgbWF4RmV0Y2hEZXB0aEhpbnRUZXN0KGZQ\nbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgLTEsIC0xKTsKICAgICAgICBtYXhG\nZXRjaERlcHRoSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCAi\nNTAwIiwgNTAwKTsKICAgICAgICBtYXhGZXRjaERlcHRoSGludFRlc3QoZlBs\nYW4sIGZDb25maWcsIGhpbnROYW1lLCA1MDAsIDUwMCk7CgogICAgICAgIHRy\neSB7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsICJ4eHh4\neCIpOwogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAieXl5\neXkiKTsKICAgICAgICAgICAgZmFpbCgiRXhwZWN0aW5nIGEgYSBJbGxlZ2Fs\nQXJndW1lbnRFeGNlcHRpb24uIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0\naW9uIGUpIHsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVj\ndGVkIGV4Y2VwdGlvbiIsCiAgICAgICAgICAgICAgICBJbGxlZ2FsQXJndW1l\nbnRFeGNlcHRpb24uY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShlLmdldENsYXNz\nKCkpKTsKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZlBs\nYW4uc2V0SGludChoaW50TmFtZSwgRmV0Y2hDb25maWd1cmF0aW9uLkRFRkFV\nTFQpOwogICAgICAgICAgICBhc3NlcnRFcXVhbHMoLTEsIGZQbGFuLmdldE1h\neEZldGNoRGVwdGgoKSk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscygtMSwg\nZkNvbmZpZy5nZXRNYXhGZXRjaERlcHRoKCkpOwogICAgICAgIH0gY2F0Y2gg\nKElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGZh\naWwoIlVuZXhwZWN0ZWQgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwog\nICAgICAgIH0KICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIC8qIEdv\nb2QKICAgICAqIFRlc3QgIm9wZW5qcGEuTWF4RmV0Y2hEZXB0aCIgaGludAog\nICAgICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0TWF4RmV0Y2hEZXB0aEhpbnQo\nKSB7CiAgICAgICAgU3RyaW5nIGhpbnROYW1lID0gIm9wZW5qcGEuTWF4RmV0\nY2hEZXB0aCI7CgogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3Jl\nYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyIG9lbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlcillbS5nZXREZWxlZ2F0\nZSgpOwogICAgICAgIEpEQkNGZXRjaFBsYW4gZlBsYW4gPSAoSkRCQ0ZldGNo\nUGxhbikgb2VtLmdldEZldGNoUGxhbigpOwogICAgICAgIEpEQkNGZXRjaENv\nbmZpZ3VyYXRpb25JbXBsIGZDb25maWcgPSAoSkRCQ0ZldGNoQ29uZmlndXJh\ndGlvbkltcGwpCiAgICAgICAgICAgICgoRW50aXR5TWFuYWdlckltcGwpIG9l\nbSkuZ2V0QnJva2VyKCkuZ2V0RmV0Y2hDb25maWd1cmF0aW9uKCk7CgogICAg\nICAgIG1heEZldGNoRGVwdGhIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGlu\ndE5hbWUsICItMSIsIC0xKTsKICAgICAgICBtYXhGZXRjaERlcHRoSGludFRl\nc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCAtMSwgLTEpOwogICAgICAg\nIG1heEZldGNoRGVwdGhIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5h\nbWUsICIxMDAiLCAxMDApOwogICAgICAgIG1heEZldGNoRGVwdGhIaW50VGVz\ndChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIDEwMCwgMTAwKTsKCiAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwg\nInh4eHh4Iik7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUs\nICJ5eXl5eSIpOwogICAgICAgICAgICBmYWlsKCJFeHBlY3RpbmcgYSBhIEls\nbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi4iKTsKICAgICAgICB9IGNhdGNoIChF\neGNlcHRpb24gZSkgewogICAgICAgICAgICBhc3NlcnRUcnVlKCJDYXVnaHQg\nZXhwZWN0ZWQgZXhjZXB0aW9uIiwKICAgICAgICAgICAgICAgIElsbGVnYWxB\ncmd1bWVudEV4Y2VwdGlvbi5jbGFzcy5pc0Fzc2lnbmFibGVGcm9tKGUuZ2V0\nQ2xhc3MoKSkpOwogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAg\nICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCBGZXRjaENvbmZpZ3VyYXRpb24u\nREVGQVVMVCk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscygtMSwgZlBsYW4u\nZ2V0TWF4RmV0Y2hEZXB0aCgpKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxz\nKC0xLCBmQ29uZmlnLmdldE1heEZldGNoRGVwdGgoKSk7CiAgICAgICAgfSBj\nYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgZmFpbCgiVW5leHBl\nY3RlZCAiICsgZS5nZXRDbGFzcygpLmdldE5hbWUoKSk7CiAgICAgICAgfQog\nICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIG1h\neEZldGNoRGVwdGhIaW50VGVzdChKREJDRmV0Y2hQbGFuIGZQbGFuLAogICAg\nICAgIEpEQkNGZXRjaENvbmZpZ3VyYXRpb25JbXBsIGZDb25maWcsIFN0cmlu\nZyBoaW50LCBPYmplY3QgdmFsdWUsCiAgICAgICAgaW50IGV4cGVjdGVkKSB7\nCiAgICAgICAgZlBsYW4uc2V0SGludChoaW50LCB2YWx1ZSk7CiAgICAgICAg\nT2JqZWN0IGdldFZhbHVlID0gZlBsYW4uZ2V0SGludChoaW50KTsKICAgICAg\nICBhc3NlcnRFcXVhbHModmFsdWUuZ2V0Q2xhc3MoKSwgZ2V0VmFsdWUuZ2V0\nQ2xhc3MoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKHZhbHVlLCBnZXRWYWx1\nZSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGV4cGVjdGVkLCBmUGxhbi5nZXRN\nYXhGZXRjaERlcHRoKCkpOwogICAgICAgIGFzc2VydEVxdWFscyhleHBlY3Rl\nZCwgZkNvbmZpZy5nZXRNYXhGZXRjaERlcHRoKCkpOwogICAgfQoKICAgIC8q\nIEdvb2QKICAgICAqIFRlc3QgIm9wZW5qcGEuTG9ja1RpbWVvdXQiIGhpbnQK\nICAgICAqLwogICAgcHVibGljIHZvaWQgdGVzdExvY2tUaW1lb3V0SGludCgp\nIHsKICAgICAgICBTdHJpbmcgaGludE5hbWUgPSAib3BlbmpwYS5Mb2NrVGlt\nZW91dCI7CgogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2Vy\nIG9lbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlcillbS5nZXREZWxlZ2F0ZSgp\nOwogICAgICAgIEpEQkNGZXRjaFBsYW4gZlBsYW4gPSAoSkRCQ0ZldGNoUGxh\nbikgb2VtLmdldEZldGNoUGxhbigpOwogICAgICAgIEpEQkNGZXRjaENvbmZp\nZ3VyYXRpb25JbXBsIGZDb25maWcgPSAoSkRCQ0ZldGNoQ29uZmlndXJhdGlv\nbkltcGwpCiAgICAgICAgICAgICgoRW50aXR5TWFuYWdlckltcGwpIG9lbSku\nZ2V0QnJva2VyKCkuZ2V0RmV0Y2hDb25maWd1cmF0aW9uKCk7CgogICAgICAg\nIGxvY2tUaW1lb3V0SGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1l\nLCAiLTEiLCAtMSk7CiAgICAgICAgbG9ja1RpbWVvdXRIaW50VGVzdChmUGxh\nbiwgZkNvbmZpZywgaGludE5hbWUsIC0xLCAtMSk7CiAgICAgICAgbG9ja1Rp\nbWVvdXRIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsICIwIiwg\nMCk7CiAgICAgICAgbG9ja1RpbWVvdXRIaW50VGVzdChmUGxhbiwgZkNvbmZp\nZywgaGludE5hbWUsIDAsIDApOwogICAgICAgIGxvY2tUaW1lb3V0SGludFRl\nc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCAiMTAwIiwgMTAwKTsKICAg\nICAgICBsb2NrVGltZW91dEhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50\nTmFtZSwgMTAwLCAxMDApOwoKICAgICAgICB0cnkgewogICAgICAgICAgICBm\nUGxhbi5zZXRIaW50KGhpbnROYW1lLCAieHh4eHgiKTsKICAgICAgICAgICAg\nZlBsYW4uc2V0SGludChoaW50TmFtZSwgInl5eXl5Iik7CiAgICAgICAgICAg\nIGZhaWwoIkV4cGVjdGluZyBhIGEgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9u\nLiIpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAg\nICAgIGFzc2VydFRydWUoIkNhdWdodCBleHBlY3RlZCBleGNlcHRpb24iLAog\nICAgICAgICAgICAgICAgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNz\nLmlzQXNzaWduYWJsZUZyb20oZS5nZXRDbGFzcygpKSk7CiAgICAgICAgfQog\nICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5h\nbWUsIC0yKTsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwg\nLTMpOwogICAgICAgICAgICBmYWlsKCJFeHBlY3RpbmcgYSBhIElsbGVnYWxB\ncmd1bWVudEV4Y2VwdGlvbi4iKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRp\nb24gZSkgewogICAgICAgICAgICBhc3NlcnRUcnVlKCJDYXVnaHQgZXhwZWN0\nZWQgZXhjZXB0aW9uIiwKICAgICAgICAgICAgICAgIElsbGVnYWxBcmd1bWVu\ndEV4Y2VwdGlvbi5jbGFzcy5pc0Fzc2lnbmFibGVGcm9tKGUuZ2V0Q2xhc3Mo\nKSkpOwogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgICBmUGxh\nbi5zZXRIaW50KGhpbnROYW1lLCBGZXRjaENvbmZpZ3VyYXRpb24uREVGQVVM\nVCk7CiAgICAgICAgICAgIGludCBkZWZUaW1lb3V0ID0gZkNvbmZpZy5nZXRD\nb250ZXh0KCkuZ2V0Q29uZmlndXJhdGlvbigpCiAgICAgICAgICAgICAgICAu\nZ2V0TG9ja1RpbWVvdXQoKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKGRl\nZlRpbWVvdXQsIGZQbGFuLmdldExvY2tUaW1lb3V0KCkpOwogICAgICAgICAg\nICBhc3NlcnRFcXVhbHMoZGVmVGltZW91dCwgZkNvbmZpZy5nZXRMb2NrVGlt\nZW91dCgpKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAg\nICAgICAgICBmYWlsKCJVbmV4cGVjdGVkICIgKyBlLmdldENsYXNzKCkuZ2V0\nTmFtZSgpKTsKICAgICAgICB9CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0K\nCiAgICAvKiBHb29kCiAgICAgKiBUZXN0ICJvcGVuanBhLkZldGNoUGxhbi5M\nb2NrVGltZW91dCIgaGludAogICAgICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0\nRmV0Y2hQbGFuTG9ja1RpbWVvdXRIaW50KCkgewogICAgICAgIFN0cmluZyBo\naW50TmFtZSA9ICJvcGVuanBhLkZldGNoUGxhbi5Mb2NrVGltZW91dCI7Cgog\nICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFu\nYWdlcigpOwogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIG9lbSA9IChP\ncGVuSlBBRW50aXR5TWFuYWdlcillbS5nZXREZWxlZ2F0ZSgpOwogICAgICAg\nIEpEQkNGZXRjaFBsYW4gZlBsYW4gPSAoSkRCQ0ZldGNoUGxhbikgb2VtLmdl\ndEZldGNoUGxhbigpOwogICAgICAgIEpEQkNGZXRjaENvbmZpZ3VyYXRpb25J\nbXBsIGZDb25maWcgPSAoSkRCQ0ZldGNoQ29uZmlndXJhdGlvbkltcGwpCiAg\nICAgICAgICAgICgoRW50aXR5TWFuYWdlckltcGwpIG9lbSkuZ2V0QnJva2Vy\nKCkuZ2V0RmV0Y2hDb25maWd1cmF0aW9uKCk7CgogICAgICAgIGxvY2tUaW1l\nb3V0SGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCAiLTEiLCAt\nMSk7CiAgICAgICAgbG9ja1RpbWVvdXRIaW50VGVzdChmUGxhbiwgZkNvbmZp\nZywgaGludE5hbWUsIC0xLCAtMSk7CiAgICAgICAgbG9ja1RpbWVvdXRIaW50\nVGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsICIwIiwgMCk7CiAgICAg\nICAgbG9ja1RpbWVvdXRIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5h\nbWUsIDAsIDApOwogICAgICAgIGxvY2tUaW1lb3V0SGludFRlc3QoZlBsYW4s\nIGZDb25maWcsIGhpbnROYW1lLCAiMTUwMCIsIDE1MDApOwogICAgICAgIGxv\nY2tUaW1lb3V0SGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCAx\nNTAwLCAxNTAwKTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4u\nc2V0SGludChoaW50TmFtZSwgInh4eHh4Iik7CiAgICAgICAgICAgIGZQbGFu\nLnNldEhpbnQoaGludE5hbWUsICJ5eXl5eSIpOwogICAgICAgICAgICBmYWls\nKCJFeHBlY3RpbmcgYSBhIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi4iKTsK\nICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBh\nc3NlcnRUcnVlKCJDYXVnaHQgZXhwZWN0ZWQgZXhjZXB0aW9uIiwKICAgICAg\nICAgICAgICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5jbGFzcy5pc0Fz\nc2lnbmFibGVGcm9tKGUuZ2V0Q2xhc3MoKSkpOwogICAgICAgIH0KICAgICAg\nICB0cnkgewogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAt\nMik7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsIC0zKTsK\nICAgICAgICAgICAgZmFpbCgiRXhwZWN0aW5nIGEgYSBJbGxlZ2FsQXJndW1l\nbnRFeGNlcHRpb24uIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUp\nIHsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVjdGVkIGV4\nY2VwdGlvbiIsCiAgICAgICAgICAgICAgICBJbGxlZ2FsQXJndW1lbnRFeGNl\ncHRpb24uY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShlLmdldENsYXNzKCkpKTsK\nICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4uc2V0\nSGludChoaW50TmFtZSwgRmV0Y2hDb25maWd1cmF0aW9uLkRFRkFVTFQpOwog\nICAgICAgICAgICBpbnQgZGVmVGltZW91dCA9IGZDb25maWcuZ2V0Q29udGV4\ndCgpLmdldENvbmZpZ3VyYXRpb24oKQogICAgICAgICAgICAgICAgLmdldExv\nY2tUaW1lb3V0KCk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscyhkZWZUaW1l\nb3V0LCBmUGxhbi5nZXRMb2NrVGltZW91dCgpKTsKICAgICAgICAgICAgYXNz\nZXJ0RXF1YWxzKGRlZlRpbWVvdXQsIGZDb25maWcuZ2V0TG9ja1RpbWVvdXQo\nKSk7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAg\nICAgZmFpbCgiVW5leHBlY3RlZCAiICsgZS5nZXRDbGFzcygpLmdldE5hbWUo\nKSk7CiAgICAgICAgfQogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAg\nLyogR29vZAogICAgICogVGVzdCAiamF2YXgucGVyc2lzdGVuY2UubG9jay50\naW1lb3V0IiBoaW50CiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RKYXZh\neExvY2tUaW1lb3V0SGludCgpIHsKICAgICAgICBTdHJpbmcgaGludE5hbWUg\nPSAiamF2YXgucGVyc2lzdGVuY2UubG9jay50aW1lb3V0IjsKCiAgICAgICAg\nRW50aXR5TWFuYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7\nCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgb2VtID0gKE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyKWVtLmdldERlbGVnYXRlKCk7CiAgICAgICAgSkRCQ0Zl\ndGNoUGxhbiBmUGxhbiA9IChKREJDRmV0Y2hQbGFuKSBvZW0uZ2V0RmV0Y2hQ\nbGFuKCk7CiAgICAgICAgSkRCQ0ZldGNoQ29uZmlndXJhdGlvbkltcGwgZkNv\nbmZpZyA9IChKREJDRmV0Y2hDb25maWd1cmF0aW9uSW1wbCkKICAgICAgICAg\nICAgKChFbnRpdHlNYW5hZ2VySW1wbCkgb2VtKS5nZXRCcm9rZXIoKS5nZXRG\nZXRjaENvbmZpZ3VyYXRpb24oKTsKCiAgICAgICAgbG9ja1RpbWVvdXRIaW50\nVGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsICItMSIsIC0xKTsKICAg\nICAgICBsb2NrVGltZW91dEhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50\nTmFtZSwgLTEsIC0xKTsKICAgICAgICBsb2NrVGltZW91dEhpbnRUZXN0KGZQ\nbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgIjAiLCAwKTsKICAgICAgICBsb2Nr\nVGltZW91dEhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgMCwg\nMCk7CiAgICAgICAgbG9ja1RpbWVvdXRIaW50VGVzdChmUGxhbiwgZkNvbmZp\nZywgaGludE5hbWUsICIyMDAwIiwgMjAwMCk7CiAgICAgICAgbG9ja1RpbWVv\ndXRIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIDIwMDAsIDIw\nMDApOwoKICAgICAgICB0cnkgewogICAgICAgICAgICBmUGxhbi5zZXRIaW50\nKGhpbnROYW1lLCAieHh4eHgiKTsKICAgICAgICAgICAgZlBsYW4uc2V0SGlu\ndChoaW50TmFtZSwgInl5eXl5Iik7CiAgICAgICAgICAgIGZhaWwoIkV4cGVj\ndGluZyBhIGEgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwogICAgICAg\nIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2VydFRy\ndWUoIkNhdWdodCBleHBlY3RlZCBleGNlcHRpb24iLAogICAgICAgICAgICAg\nICAgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNzaWduYWJs\nZUZyb20oZS5nZXRDbGFzcygpKSk7CiAgICAgICAgfQogICAgICAgIHRyeSB7\nCiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsIC0yKTsKICAg\nICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwgLTMpOwogICAgICAg\nICAgICBmYWlsKCJFeHBlY3RpbmcgYSBhIElsbGVnYWxBcmd1bWVudEV4Y2Vw\ndGlvbi4iKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAg\nICAgICAgICBhc3NlcnRUcnVlKCJDYXVnaHQgZXhwZWN0ZWQgZXhjZXB0aW9u\nIiwKICAgICAgICAgICAgICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5j\nbGFzcy5pc0Fzc2lnbmFibGVGcm9tKGUuZ2V0Q2xhc3MoKSkpOwogICAgICAg\nIH0KICAgICAgICB0cnkgewogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhp\nbnROYW1lLCBGZXRjaENvbmZpZ3VyYXRpb24uREVGQVVMVCk7CiAgICAgICAg\nICAgIGludCBkZWZUaW1lb3V0ID0gZkNvbmZpZy5nZXRDb250ZXh0KCkuZ2V0\nQ29uZmlndXJhdGlvbigpCiAgICAgICAgICAgICAgICAuZ2V0TG9ja1RpbWVv\ndXQoKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKGRlZlRpbWVvdXQsIGZQ\nbGFuLmdldExvY2tUaW1lb3V0KCkpOwogICAgICAgICAgICBhc3NlcnRFcXVh\nbHMoZGVmVGltZW91dCwgZkNvbmZpZy5nZXRMb2NrVGltZW91dCgpKTsKICAg\nICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBmYWls\nKCJVbmV4cGVjdGVkICIgKyBlLmdldENsYXNzKCkuZ2V0TmFtZSgpKTsKICAg\nICAgICB9CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwcml2YXRl\nIHZvaWQgbG9ja1RpbWVvdXRIaW50VGVzdChKREJDRmV0Y2hQbGFuIGZQbGFu\nLAogICAgICAgIEpEQkNGZXRjaENvbmZpZ3VyYXRpb25JbXBsIGZDb25maWcs\nIFN0cmluZyBoaW50LCBPYmplY3QgdmFsdWUsCiAgICAgICAgaW50IGV4cGVj\ndGVkKSB7CiAgICAgICAgZlBsYW4uc2V0SGludChoaW50LCB2YWx1ZSk7CiAg\nICAgICAgT2JqZWN0IGdldFZhbHVlID0gZlBsYW4uZ2V0SGludChoaW50KTsK\nICAgICAgICBhc3NlcnRFcXVhbHModmFsdWUuZ2V0Q2xhc3MoKSwgZ2V0VmFs\ndWUuZ2V0Q2xhc3MoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKHZhbHVlLCBn\nZXRWYWx1ZSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGV4cGVjdGVkLCBmUGxh\nbi5nZXRMb2NrVGltZW91dCgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoZXhw\nZWN0ZWQsIGZDb25maWcuZ2V0TG9ja1RpbWVvdXQoKSk7CiAgICB9CgogICAg\nLyogR29vZAogICAgICogVGVzdCAib3BlbmpwYS5RdWVyeVRpbWVvdXQiIGhp\nbnQKICAgICAqLwogICAgcHVibGljIHZvaWQgdGVzdFF1ZXJ5VGltZW91dEhp\nbnQoKSB7CiAgICAgICAgU3RyaW5nIGhpbnROYW1lID0gIm9wZW5qcGEuUXVl\ncnlUaW1lb3V0IjsKCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5j\ncmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgT3BlbkpQQUVudGl0eU1h\nbmFnZXIgb2VtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWVtLmdldERlbGVn\nYXRlKCk7CiAgICAgICAgSkRCQ0ZldGNoUGxhbiBmUGxhbiA9IChKREJDRmV0\nY2hQbGFuKSBvZW0uZ2V0RmV0Y2hQbGFuKCk7CiAgICAgICAgSkRCQ0ZldGNo\nQ29uZmlndXJhdGlvbkltcGwgZkNvbmZpZyA9IChKREJDRmV0Y2hDb25maWd1\ncmF0aW9uSW1wbCkKICAgICAgICAgICAgKChFbnRpdHlNYW5hZ2VySW1wbCkg\nb2VtKS5nZXRCcm9rZXIoKS5nZXRGZXRjaENvbmZpZ3VyYXRpb24oKTsKCiAg\nICAgICAgcXVlcnlUaW1lb3V0SGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhp\nbnROYW1lLCAiLTEiLCAtMSk7CiAgICAgICAgcXVlcnlUaW1lb3V0SGludFRl\nc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCAtMSwgLTEpOwogICAgICAg\nIHF1ZXJ5VGltZW91dEhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFt\nZSwgIjAiLCAwKTsKICAgICAgICBxdWVyeVRpbWVvdXRIaW50VGVzdChmUGxh\nbiwgZkNvbmZpZywgaGludE5hbWUsIDAsIDApOwogICAgICAgIHF1ZXJ5VGlt\nZW91dEhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgIjEwMCIs\nIDEwMCk7CiAgICAgICAgcXVlcnlUaW1lb3V0SGludFRlc3QoZlBsYW4sIGZD\nb25maWcsIGhpbnROYW1lLCAxMDAsIDEwMCk7CgogICAgICAgIHRyeSB7CiAg\nICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsICJ4eHh4eCIpOwog\nICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAieXl5eXkiKTsK\nICAgICAgICAgICAgZmFpbCgiRXhwZWN0aW5nIGEgYSBJbGxlZ2FsQXJndW1l\nbnRFeGNlcHRpb24uIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUp\nIHsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVjdGVkIGV4\nY2VwdGlvbiIsCiAgICAgICAgICAgICAgICBJbGxlZ2FsQXJndW1lbnRFeGNl\ncHRpb24uY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShlLmdldENsYXNzKCkpKTsK\nICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4uc2V0\nSGludChoaW50TmFtZSwgLTIpOwogICAgICAgICAgICBmUGxhbi5zZXRIaW50\nKGhpbnROYW1lLCAtMyk7CiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGluZyBh\nIGEgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwogICAgICAgIH0gY2F0\nY2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2VydFRydWUoIkNh\ndWdodCBleHBlY3RlZCBleGNlcHRpb24iLAogICAgICAgICAgICAgICAgSWxs\nZWdhbEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNzaWduYWJsZUZyb20o\nZS5nZXRDbGFzcygpKSk7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAg\nICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsIEZldGNoQ29uZmlndXJh\ndGlvbi5ERUZBVUxUKTsKICAgICAgICAgICAgaW50IGRlZlRpbWVvdXQgPSBm\nQ29uZmlnLmdldENvbnRleHQoKS5nZXRDb25maWd1cmF0aW9uKCkKICAgICAg\nICAgICAgICAgIC5nZXRRdWVyeVRpbWVvdXQoKTsKICAgICAgICAgICAgYXNz\nZXJ0RXF1YWxzKGRlZlRpbWVvdXQsIGZQbGFuLmdldFF1ZXJ5VGltZW91dCgp\nKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKGRlZlRpbWVvdXQsIGZDb25m\naWcuZ2V0UXVlcnlUaW1lb3V0KCkpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2Vw\ndGlvbiBlKSB7CiAgICAgICAgICAgIGZhaWwoIlVuZXhwZWN0ZWQgIiArIGUu\nZ2V0Q2xhc3MoKS5nZXROYW1lKCkpOwogICAgICAgIH0KICAgICAgICBlbS5j\nbG9zZSgpOwogICAgfQoKICAgIC8qIEdvb2QKICAgICAqIFRlc3QgIm9wZW5q\ncGEuRmV0Y2hQbGFuLlF1ZXJ5VGltZW91dCIgaGludAogICAgICovCiAgICBw\ndWJsaWMgdm9pZCB0ZXN0RmV0Y2hQbGFuUXVlcnlUaW1lb3V0SGludCgpIHsK\nICAgICAgICBTdHJpbmcgaGludE5hbWUgPSAib3BlbmpwYS5GZXRjaFBsYW4u\nUXVlcnlUaW1lb3V0IjsKCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVt\nZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgT3BlbkpQQUVudGl0\neU1hbmFnZXIgb2VtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWVtLmdldERl\nbGVnYXRlKCk7CiAgICAgICAgSkRCQ0ZldGNoUGxhbiBmUGxhbiA9IChKREJD\nRmV0Y2hQbGFuKSBvZW0uZ2V0RmV0Y2hQbGFuKCk7CiAgICAgICAgSkRCQ0Zl\ndGNoQ29uZmlndXJhdGlvbkltcGwgZkNvbmZpZyA9IChKREJDRmV0Y2hDb25m\naWd1cmF0aW9uSW1wbCkKICAgICAgICAgICAgKChFbnRpdHlNYW5hZ2VySW1w\nbCkgb2VtKS5nZXRCcm9rZXIoKS5nZXRGZXRjaENvbmZpZ3VyYXRpb24oKTsK\nCiAgICAgICAgcXVlcnlUaW1lb3V0SGludFRlc3QoZlBsYW4sIGZDb25maWcs\nIGhpbnROYW1lLCAiLTEiLCAtMSk7CiAgICAgICAgcXVlcnlUaW1lb3V0SGlu\ndFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCAtMSwgLTEpOwogICAg\nICAgIHF1ZXJ5VGltZW91dEhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50\nTmFtZSwgIjAiLCAwKTsKICAgICAgICBxdWVyeVRpbWVvdXRIaW50VGVzdChm\nUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIDAsIDApOwogICAgICAgIHF1ZXJ5\nVGltZW91dEhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgIjE1\nMDAiLCAxNTAwKTsKICAgICAgICBxdWVyeVRpbWVvdXRIaW50VGVzdChmUGxh\nbiwgZkNvbmZpZywgaGludE5hbWUsIDE1MDAsIDE1MDApOwoKICAgICAgICB0\ncnkgewogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAieHh4\neHgiKTsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwgInl5\neXl5Iik7CiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGluZyBhIGEgSWxsZWdh\nbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2Vw\ndGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2VydFRydWUoIkNhdWdodCBleHBl\nY3RlZCBleGNlcHRpb24iLAogICAgICAgICAgICAgICAgSWxsZWdhbEFyZ3Vt\nZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNzaWduYWJsZUZyb20oZS5nZXRDbGFz\ncygpKSk7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZQ\nbGFuLnNldEhpbnQoaGludE5hbWUsIC0yKTsKICAgICAgICAgICAgZlBsYW4u\nc2V0SGludChoaW50TmFtZSwgLTMpOwogICAgICAgICAgICBmYWlsKCJFeHBl\nY3RpbmcgYSBhIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi4iKTsKICAgICAg\nICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBhc3NlcnRU\ncnVlKCJDYXVnaHQgZXhwZWN0ZWQgZXhjZXB0aW9uIiwKICAgICAgICAgICAg\nICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5jbGFzcy5pc0Fzc2lnbmFi\nbGVGcm9tKGUuZ2V0Q2xhc3MoKSkpOwogICAgICAgIH0KICAgICAgICB0cnkg\newogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCBGZXRjaENv\nbmZpZ3VyYXRpb24uREVGQVVMVCk7CiAgICAgICAgICAgIGludCBkZWZUaW1l\nb3V0ID0gZkNvbmZpZy5nZXRDb250ZXh0KCkuZ2V0Q29uZmlndXJhdGlvbigp\nCiAgICAgICAgICAgICAgICAuZ2V0UXVlcnlUaW1lb3V0KCk7CiAgICAgICAg\nICAgIGFzc2VydEVxdWFscyhkZWZUaW1lb3V0LCBmUGxhbi5nZXRRdWVyeVRp\nbWVvdXQoKSk7CiAgICAgICAgICAgIGFzc2VydEVxdWFscyhkZWZUaW1lb3V0\nLCBmQ29uZmlnLmdldFF1ZXJ5VGltZW91dCgpKTsKICAgICAgICB9IGNhdGNo\nIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBmYWlsKCJVbmV4cGVjdGVk\nICIgKyBlLmdldENsYXNzKCkuZ2V0TmFtZSgpKTsKICAgICAgICB9CiAgICAg\nICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICAvKiBHb29kCiAgICAgKiBUZXN0\nICJqYXZheC5wZXJzaXN0ZW5jZS5xdWVyeS50aW1lb3V0IiBoaW50CiAgICAg\nKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RKYXZheFF1ZXJ5VGltZW91dEhpbnQo\nKSB7CiAgICAgICAgU3RyaW5nIGhpbnROYW1lID0gImphdmF4LnBlcnNpc3Rl\nbmNlLnF1ZXJ5LnRpbWVvdXQiOwoKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVt\nID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAgICAgICBPcGVuSlBB\nRW50aXR5TWFuYWdlciBvZW0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpZW0u\nZ2V0RGVsZWdhdGUoKTsKICAgICAgICBKREJDRmV0Y2hQbGFuIGZQbGFuID0g\nKEpEQkNGZXRjaFBsYW4pIG9lbS5nZXRGZXRjaFBsYW4oKTsKICAgICAgICBK\nREJDRmV0Y2hDb25maWd1cmF0aW9uSW1wbCBmQ29uZmlnID0gKEpEQkNGZXRj\naENvbmZpZ3VyYXRpb25JbXBsKQogICAgICAgICAgICAoKEVudGl0eU1hbmFn\nZXJJbXBsKSBvZW0pLmdldEJyb2tlcigpLmdldEZldGNoQ29uZmlndXJhdGlv\nbigpOwoKICAgICAgICBxdWVyeVRpbWVvdXRIaW50VGVzdChmUGxhbiwgZkNv\nbmZpZywgaGludE5hbWUsICItMSIsIC0xKTsKICAgICAgICBxdWVyeVRpbWVv\ndXRIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIC0xLCAtMSk7\nCiAgICAgICAgcXVlcnlUaW1lb3V0SGludFRlc3QoZlBsYW4sIGZDb25maWcs\nIGhpbnROYW1lLCAiMCIsIDApOwogICAgICAgIHF1ZXJ5VGltZW91dEhpbnRU\nZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgMCwgMCk7CiAgICAgICAg\ncXVlcnlUaW1lb3V0SGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1l\nLCAiMjAwMCIsIDIwMDApOwogICAgICAgIHF1ZXJ5VGltZW91dEhpbnRUZXN0\nKGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgMjAwMCwgMjAwMCk7CgogICAg\nICAgIHRyeSB7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUs\nICJ4eHh4eCIpOwogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1l\nLCAieXl5eXkiKTsKICAgICAgICAgICAgZmFpbCgiRXhwZWN0aW5nIGEgYSBJ\nbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uIik7CiAgICAgICAgfSBjYXRjaCAo\nRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0\nIGV4cGVjdGVkIGV4Y2VwdGlvbiIsCiAgICAgICAgICAgICAgICBJbGxlZ2Fs\nQXJndW1lbnRFeGNlcHRpb24uY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShlLmdl\ndENsYXNzKCkpKTsKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwgLTIpOwogICAgICAgICAgICBm\nUGxhbi5zZXRIaW50KGhpbnROYW1lLCAtMyk7CiAgICAgICAgICAgIGZhaWwo\nIkV4cGVjdGluZyBhIGEgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwog\nICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGFz\nc2VydFRydWUoIkNhdWdodCBleHBlY3RlZCBleGNlcHRpb24iLAogICAgICAg\nICAgICAgICAgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNz\naWduYWJsZUZyb20oZS5nZXRDbGFzcygpKSk7CiAgICAgICAgfQogICAgICAg\nIHRyeSB7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsIEZl\ndGNoQ29uZmlndXJhdGlvbi5ERUZBVUxUKTsKICAgICAgICAgICAgaW50IGRl\nZlRpbWVvdXQgPSBmQ29uZmlnLmdldENvbnRleHQoKS5nZXRDb25maWd1cmF0\naW9uKCkKICAgICAgICAgICAgICAgIC5nZXRRdWVyeVRpbWVvdXQoKTsKICAg\nICAgICAgICAgYXNzZXJ0RXF1YWxzKGRlZlRpbWVvdXQsIGZQbGFuLmdldFF1\nZXJ5VGltZW91dCgpKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKGRlZlRp\nbWVvdXQsIGZDb25maWcuZ2V0UXVlcnlUaW1lb3V0KCkpOwogICAgICAgIH0g\nY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGZhaWwoIlVuZXhw\nZWN0ZWQgIiArIGUuZ2V0Q2xhc3MoKS5nZXROYW1lKCkpOwogICAgICAgIH0K\nICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHByaXZhdGUgdm9pZCBx\ndWVyeVRpbWVvdXRIaW50VGVzdChKREJDRmV0Y2hQbGFuIGZQbGFuLAogICAg\nICAgIEpEQkNGZXRjaENvbmZpZ3VyYXRpb25JbXBsIGZDb25maWcsIFN0cmlu\nZyBoaW50LCBPYmplY3QgdmFsdWUsCiAgICAgICAgaW50IGV4cGVjdGVkKSB7\nCiAgICAgICAgZlBsYW4uc2V0SGludChoaW50LCB2YWx1ZSk7CiAgICAgICAg\nT2JqZWN0IGdldFZhbHVlID0gZlBsYW4uZ2V0SGludChoaW50KTsKICAgICAg\nICBhc3NlcnRFcXVhbHModmFsdWUuZ2V0Q2xhc3MoKSwgZ2V0VmFsdWUuZ2V0\nQ2xhc3MoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKHZhbHVlLCBnZXRWYWx1\nZSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGV4cGVjdGVkLCBmUGxhbi5nZXRR\ndWVyeVRpbWVvdXQoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGV4cGVjdGVk\nLCBmQ29uZmlnLmdldFF1ZXJ5VGltZW91dCgpKTsKICAgIH0KCiAgICAvKiBH\nb29kCiAgICAgKiBUZXN0ICJvcGVuanBhLkZldGNoUGxhbi5SZXN1bHRTZXRU\neXBlIiBoaW50CiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHRlc3RGZXRjaFBs\nYW5SZXN1bHRTZXRUeXBlSGludCgpIHsKICAgICAgICBTdHJpbmcgaGludE5h\nbWUgPSAib3BlbmpwYS5GZXRjaFBsYW4uUmVzdWx0U2V0VHlwZSI7CgogICAg\nICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdl\ncigpOwogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIG9lbSA9IChPcGVu\nSlBBRW50aXR5TWFuYWdlcillbS5nZXREZWxlZ2F0ZSgpOwogICAgICAgIEpE\nQkNGZXRjaFBsYW4gZlBsYW4gPSAoSkRCQ0ZldGNoUGxhbikgb2VtLmdldEZl\ndGNoUGxhbigpOwogICAgICAgIEpEQkNGZXRjaENvbmZpZ3VyYXRpb25JbXBs\nIGZDb25maWcgPSAoSkRCQ0ZldGNoQ29uZmlndXJhdGlvbkltcGwpCiAgICAg\nICAgICAgICgoRW50aXR5TWFuYWdlckltcGwpIG9lbSkuZ2V0QnJva2VyKCku\nZ2V0RmV0Y2hDb25maWd1cmF0aW9uKCk7CgogICAgICAgIHJlc3VsdFNldFR5\ncGVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsCiAgICAgICAg\nICAgIFJlc3VsdFNldFR5cGUuRk9SV0FSRF9PTkxZLm5hbWUoKSwgUmVzdWx0\nU2V0VHlwZS5GT1JXQVJEX09OTFksCiAgICAgICAgICAgIFJlc3VsdFNldC5U\nWVBFX0ZPUldBUkRfT05MWSk7CiAgICAgICAgcmVzdWx0U2V0VHlwZUhpbnRU\nZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwKICAgICAgICAgICAgUmVz\ndWx0U2V0VHlwZS5GT1JXQVJEX09OTFksIFJlc3VsdFNldFR5cGUuRk9SV0FS\nRF9PTkxZLAogICAgICAgICAgICBSZXN1bHRTZXQuVFlQRV9GT1JXQVJEX09O\nTFkpOwoKICAgICAgICByZXN1bHRTZXRUeXBlSGludFRlc3QoZlBsYW4sIGZD\nb25maWcsIGhpbnROYW1lLAogICAgICAgICAgICBSZXN1bHRTZXRUeXBlLlND\nUk9MTF9TRU5TSVRJVkUubmFtZSgpLAogICAgICAgICAgICBSZXN1bHRTZXRU\neXBlLlNDUk9MTF9TRU5TSVRJVkUsIFJlc3VsdFNldC5UWVBFX1NDUk9MTF9T\nRU5TSVRJVkUpOwogICAgICAgIHJlc3VsdFNldFR5cGVIaW50VGVzdChmUGxh\nbiwgZkNvbmZpZywgaGludE5hbWUsCiAgICAgICAgICAgIFJlc3VsdFNldFR5\ncGUuU0NST0xMX1NFTlNJVElWRSwgUmVzdWx0U2V0VHlwZS5TQ1JPTExfU0VO\nU0lUSVZFLAogICAgICAgICAgICBSZXN1bHRTZXQuVFlQRV9TQ1JPTExfU0VO\nU0lUSVZFKTsKCiAgICAgICAgcmVzdWx0U2V0VHlwZUhpbnRUZXN0KGZQbGFu\nLCBmQ29uZmlnLCBoaW50TmFtZSwKICAgICAgICAgICAgUmVzdWx0U2V0VHlw\nZS5TQ1JPTExfSU5TRU5TSVRJVkUubmFtZSgpLAogICAgICAgICAgICBSZXN1\nbHRTZXRUeXBlLlNDUk9MTF9JTlNFTlNJVElWRSwKICAgICAgICAgICAgUmVz\ndWx0U2V0LlRZUEVfU0NST0xMX0lOU0VOU0lUSVZFKTsKICAgICAgICByZXN1\nbHRTZXRUeXBlSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLAog\nICAgICAgICAgICBSZXN1bHRTZXRUeXBlLlNDUk9MTF9JTlNFTlNJVElWRSwg\nUmVzdWx0U2V0VHlwZS5TQ1JPTExfSU5TRU5TSVRJVkUsCiAgICAgICAgICAg\nIFJlc3VsdFNldC5UWVBFX1NDUk9MTF9JTlNFTlNJVElWRSk7CgogICAgICAg\nIHRyeSB7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsICJ4\neHh4eCIpOwogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAi\neXl5eXkiKTsKICAgICAgICAgICAgZmFpbCgiRXhwZWN0aW5nIGEgYSBJbGxl\nZ2FsQXJndW1lbnRFeGNlcHRpb24uIik7CiAgICAgICAgfSBjYXRjaCAoRXhj\nZXB0aW9uIGUpIHsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4\ncGVjdGVkIGV4Y2VwdGlvbiIsCiAgICAgICAgICAgICAgICBJbGxlZ2FsQXJn\ndW1lbnRFeGNlcHRpb24uY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShlLmdldENs\nYXNzKCkpKTsKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAg\nZlBsYW4uc2V0SGludChoaW50TmFtZSwgIjEyMzQ1Iik7CiAgICAgICAgICAg\nIGZQbGFuLnNldEhpbnQoaGludE5hbWUsICI2Nzg5MCIpOwogICAgICAgICAg\nICBmYWlsKCJFeHBlY3RpbmcgYSBhIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlv\nbi4iKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAg\nICAgICBhc3NlcnRUcnVlKCJDYXVnaHQgZXhwZWN0ZWQgZXhjZXB0aW9uIiwK\nICAgICAgICAgICAgICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5jbGFz\ncy5pc0Fzc2lnbmFibGVGcm9tKGUuZ2V0Q2xhc3MoKSkpOwogICAgICAgIH0K\nICAgICAgICB0cnkgewogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnRO\nYW1lLCAtMSk7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUs\nIC0yKTsKICAgICAgICAgICAgZmFpbCgiRXhwZWN0aW5nIGEgYSBJbGxlZ2Fs\nQXJndW1lbnRFeGNlcHRpb24uIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0\naW9uIGUpIHsKICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IHVuZXhw\nZWN0ZWQgZXhjZXB0aW9uICIgKyBlLAogICAgICAgICAgICAgICAgSWxsZWdh\nbEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNzaWduYWJsZUZyb20oZS5n\nZXRDbGFzcygpKSk7CiAgICAgICAgfQogICAgICAgIGVtLmNsb3NlKCk7CiAg\nICB9CgogICAgLyogR29vZAogICAgICogVGVzdCAib3BlbmpwYS5qZGJjLlJl\nc3VsdFNldFR5cGUiIGhpbnQKICAgICAqLwogICAgcHVibGljIHZvaWQgdGVz\ndEpkYmNSZXN1bHRTZXRUeXBlSGludCgpIHsKICAgICAgICBTdHJpbmcgaGlu\ndE5hbWUgPSAib3BlbmpwYS5qZGJjLlJlc3VsdFNldFR5cGUiOwoKICAgICAg\nICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIo\nKTsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBvZW0gPSAoT3BlbkpQ\nQUVudGl0eU1hbmFnZXIpIGVtLmdldERlbGVnYXRlKCk7CiAgICAgICAgSkRC\nQ0ZldGNoUGxhbiBmUGxhbiA9IChKREJDRmV0Y2hQbGFuKSBvZW0uZ2V0RmV0\nY2hQbGFuKCk7CiAgICAgICAgSkRCQ0ZldGNoQ29uZmlndXJhdGlvbkltcGwg\nZkNvbmZpZyA9IChKREJDRmV0Y2hDb25maWd1cmF0aW9uSW1wbCkKICAgICAg\nICAgICAgKChFbnRpdHlNYW5hZ2VySW1wbCkgb2VtKS5nZXRCcm9rZXIoKS5n\nZXRGZXRjaENvbmZpZ3VyYXRpb24oKTsKCiAgICAgICAgcmVzdWx0U2V0VHlw\nZUhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgU3RyaW5nCiAg\nICAgICAgICAgIC52YWx1ZU9mKFJlc3VsdFNldC5UWVBFX0ZPUldBUkRfT05M\nWSksIFJlc3VsdFNldFR5cGUuRk9SV0FSRF9PTkxZLAogICAgICAgICAgICBS\nZXN1bHRTZXQuVFlQRV9GT1JXQVJEX09OTFkpOwogICAgICAgIHJlc3VsdFNl\ndFR5cGVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsCiAgICAg\nICAgICAgIFJlc3VsdFNldC5UWVBFX0ZPUldBUkRfT05MWSwgUmVzdWx0U2V0\nVHlwZS5GT1JXQVJEX09OTFksCiAgICAgICAgICAgIFJlc3VsdFNldC5UWVBF\nX0ZPUldBUkRfT05MWSk7CgogICAgICAgIHJlc3VsdFNldFR5cGVIaW50VGVz\ndChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIFN0cmluZwogICAgICAgICAg\nICAudmFsdWVPZihSZXN1bHRTZXQuVFlQRV9TQ1JPTExfU0VOU0lUSVZFKSwK\nICAgICAgICAgICAgUmVzdWx0U2V0VHlwZS5TQ1JPTExfU0VOU0lUSVZFLCBS\nZXN1bHRTZXQuVFlQRV9TQ1JPTExfU0VOU0lUSVZFKTsKICAgICAgICByZXN1\nbHRTZXRUeXBlSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLAog\nICAgICAgICAgICBSZXN1bHRTZXQuVFlQRV9TQ1JPTExfU0VOU0lUSVZFLCBS\nZXN1bHRTZXRUeXBlLlNDUk9MTF9TRU5TSVRJVkUsCiAgICAgICAgICAgIFJl\nc3VsdFNldC5UWVBFX1NDUk9MTF9TRU5TSVRJVkUpOwoKICAgICAgICByZXN1\nbHRTZXRUeXBlSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCBT\ndHJpbmcKICAgICAgICAgICAgLnZhbHVlT2YoUmVzdWx0U2V0LlRZUEVfU0NS\nT0xMX0lOU0VOU0lUSVZFKSwKICAgICAgICAgICAgUmVzdWx0U2V0VHlwZS5T\nQ1JPTExfSU5TRU5TSVRJVkUsCiAgICAgICAgICAgIFJlc3VsdFNldC5UWVBF\nX1NDUk9MTF9JTlNFTlNJVElWRSk7CiAgICAgICAgcmVzdWx0U2V0VHlwZUhp\nbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwKICAgICAgICAgICAg\nUmVzdWx0U2V0LlRZUEVfU0NST0xMX0lOU0VOU0lUSVZFLCBSZXN1bHRTZXRU\neXBlLlNDUk9MTF9JTlNFTlNJVElWRSwKICAgICAgICAgICAgUmVzdWx0U2V0\nLlRZUEVfU0NST0xMX0lOU0VOU0lUSVZFKTsKCiAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwgInh4eHh4Iik7CiAg\nICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsICJ5eXl5eSIpOwog\nICAgICAgICAgICBmYWlsKCJFeHBlY3RpbmcgYSBhIElsbGVnYWxBcmd1bWVu\ndEV4Y2VwdGlvbi4iKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkg\newogICAgICAgICAgICBhc3NlcnRUcnVlKCJDYXVnaHQgZXhwZWN0ZWQgZXhj\nZXB0aW9uIiwKICAgICAgICAgICAgICAgIElsbGVnYWxBcmd1bWVudEV4Y2Vw\ndGlvbi5jbGFzcy5pc0Fzc2lnbmFibGVGcm9tKGUuZ2V0Q2xhc3MoKSkpOwog\nICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgICBmUGxhbi5zZXRI\naW50KGhpbnROYW1lLCAiMTIzNDUiKTsKICAgICAgICAgICAgZlBsYW4uc2V0\nSGludChoaW50TmFtZSwgIjY3ODkwIik7CiAgICAgICAgICAgIGZhaWwoIkV4\ncGVjdGluZyBhIGEgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwogICAg\nICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2Vy\ndFRydWUoIkNhdWdodCBleHBlY3RlZCBleGNlcHRpb24iLAogICAgICAgICAg\nICAgICAgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNzaWdu\nYWJsZUZyb20oZS5nZXRDbGFzcygpKSk7CiAgICAgICAgfQogICAgICAgIHRy\neSB7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsIC0xKTsK\nICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwgLTIpOwogICAg\nICAgICAgICBmYWlsKCJFeHBlY3RpbmcgYSBhIElsbGVnYWxBcmd1bWVudEV4\nY2VwdGlvbi4iKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewog\nICAgICAgICAgICBhc3NlcnRUcnVlKCJDYXVnaHQgZXhwZWN0ZWQgZXhjZXB0\naW9uIiwKICAgICAgICAgICAgICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlv\nbi5jbGFzcy5pc0Fzc2lnbmFibGVGcm9tKGUuZ2V0Q2xhc3MoKSkpOwogICAg\nICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgICBmUGxhbi5zZXRIaW50\nKGhpbnROYW1lLCBGZXRjaENvbmZpZ3VyYXRpb24uREVGQVVMVCk7CiAgICAg\nICAgICAgIGFzc2VydEVxdWFscyhSZXN1bHRTZXQuVFlQRV9GT1JXQVJEX09O\nTFksIGZDb25maWcKICAgICAgICAgICAgICAgIC5nZXRSZXN1bHRTZXRUeXBl\nKCkpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAg\nICAgIGZhaWwoIlVuZXhwZWN0ZWQgIiArIGUuZ2V0Q2xhc3MoKS5nZXROYW1l\nKCkpOwogICAgICAgIH0KICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAg\nIHByaXZhdGUgdm9pZCByZXN1bHRTZXRUeXBlSGludFRlc3QoSkRCQ0ZldGNo\nUGxhbiBmUGxhbiwKICAgICAgICBKREJDRmV0Y2hDb25maWd1cmF0aW9uSW1w\nbCBmQ29uZmlnLCBTdHJpbmcgaGludCwgT2JqZWN0IHZhbHVlLAogICAgICAg\nIE9iamVjdCBleHBlY3RlZFZhbHVlLCBpbnQgZXhwZWN0ZWQpIHsKICAgICAg\nICBmUGxhbi5zZXRIaW50KGhpbnQsIHZhbHVlKTsKICAgICAgICBPYmplY3Qg\nZ2V0VmFsdWUgPSBmUGxhbi5nZXRIaW50KGhpbnQpOwogICAgICAgIGFzc2Vy\ndEVxdWFscyh2YWx1ZS5nZXRDbGFzcygpLCBnZXRWYWx1ZS5nZXRDbGFzcygp\nKTsKICAgICAgICBhc3NlcnRFcXVhbHModmFsdWUsIGdldFZhbHVlKTsKICAg\nICAgICBhc3NlcnRFcXVhbHMoZXhwZWN0ZWRWYWx1ZSwgZlBsYW4uZ2V0UmVz\ndWx0U2V0VHlwZSgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoZXhwZWN0ZWQs\nIGZDb25maWcuZ2V0UmVzdWx0U2V0VHlwZSgpKTsKICAgIH0KCiAgICAvKiBH\nb29kCiAgICAgKiBUZXN0ICJvcGVuanBhLkZldGNoUGxhbi5TdWJjbGFzc0Zl\ndGNoTW9kZSIgaGludAogICAgICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0RmV0\nY2hQbGFuU3ViY2xhc3NGZXRjaE1vZGVIaW50KCkgewogICAgICAgIFN0cmlu\nZyBoaW50TmFtZSA9ICJvcGVuanBhLkZldGNoUGxhbi5TdWJjbGFzc0ZldGNo\nTW9kZSI7CgogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2Vy\nIG9lbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlcillbS5nZXREZWxlZ2F0ZSgp\nOwogICAgICAgIEpEQkNGZXRjaFBsYW4gZlBsYW4gPSAoSkRCQ0ZldGNoUGxh\nbikgb2VtLmdldEZldGNoUGxhbigpOwogICAgICAgIEpEQkNGZXRjaENvbmZp\nZ3VyYXRpb25JbXBsIGZDb25maWcgPSAoSkRCQ0ZldGNoQ29uZmlndXJhdGlv\nbkltcGwpCiAgICAgICAgICAgICgoRW50aXR5TWFuYWdlckltcGwpIG9lbSku\nZ2V0QnJva2VyKCkuZ2V0RmV0Y2hDb25maWd1cmF0aW9uKCk7CgogICAgICAg\nIHN1YmNsYXNzRmV0Y2hNb2RlSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhp\nbnROYW1lLCAibm9uZSIsCiAgICAgICAgICAgIEZldGNoTW9kZS5OT05FLCBF\nYWdlckZldGNoTW9kZXMuRUFHRVJfTk9ORSk7CiAgICAgICAgc3ViY2xhc3NG\nZXRjaE1vZGVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIEZl\ndGNoTW9kZS5OT05FCiAgICAgICAgICAgIC5uYW1lKCksIEZldGNoTW9kZS5O\nT05FLCBFYWdlckZldGNoTW9kZXMuRUFHRVJfTk9ORSk7CiAgICAgICAgc3Vi\nY2xhc3NGZXRjaE1vZGVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5h\nbWUsIEZldGNoTW9kZS5OT05FLAogICAgICAgICAgICBGZXRjaE1vZGUuTk9O\nRSwgRWFnZXJGZXRjaE1vZGVzLkVBR0VSX05PTkUpOwoKICAgICAgICBzdWJj\nbGFzc0ZldGNoTW9kZUhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFt\nZSwgInBhcmFsbGVsIiwKICAgICAgICAgICAgRmV0Y2hNb2RlLlBBUkFMTEVM\nLCBFYWdlckZldGNoTW9kZXMuRUFHRVJfUEFSQUxMRUwpOwogICAgICAgIHN1\nYmNsYXNzRmV0Y2hNb2RlSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnRO\nYW1lLCBGZXRjaE1vZGUuUEFSQUxMRUwKICAgICAgICAgICAgLm5hbWUoKSwg\nRmV0Y2hNb2RlLlBBUkFMTEVMLCBFYWdlckZldGNoTW9kZXMuRUFHRVJfUEFS\nQUxMRUwpOwogICAgICAgIHN1YmNsYXNzRmV0Y2hNb2RlSGludFRlc3QoZlBs\nYW4sIGZDb25maWcsIGhpbnROYW1lLCBGZXRjaE1vZGUuUEFSQUxMRUwsCiAg\nICAgICAgICAgIEZldGNoTW9kZS5QQVJBTExFTCwgRWFnZXJGZXRjaE1vZGVz\nLkVBR0VSX1BBUkFMTEVMKTsKCiAgICAgICAgc3ViY2xhc3NGZXRjaE1vZGVI\naW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsICJqb2luIiwKICAg\nICAgICAgICAgRmV0Y2hNb2RlLkpPSU4sIEVhZ2VyRmV0Y2hNb2Rlcy5FQUdF\nUl9KT0lOKTsKICAgICAgICBzdWJjbGFzc0ZldGNoTW9kZUhpbnRUZXN0KGZQ\nbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgRmV0Y2hNb2RlLkpPSU4KICAgICAg\nICAgICAgLm5hbWUoKSwgRmV0Y2hNb2RlLkpPSU4sIEVhZ2VyRmV0Y2hNb2Rl\ncy5FQUdFUl9KT0lOKTsKICAgICAgICBzdWJjbGFzc0ZldGNoTW9kZUhpbnRU\nZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgRmV0Y2hNb2RlLkpPSU4s\nCiAgICAgICAgICAgIEZldGNoTW9kZS5KT0lOLCBFYWdlckZldGNoTW9kZXMu\nRUFHRVJfSk9JTik7CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZQbGFu\nLnNldEhpbnQoaGludE5hbWUsICJ4eHh4eCIpOwogICAgICAgICAgICBmUGxh\nbi5zZXRIaW50KGhpbnROYW1lLCAieXl5eXkiKTsKICAgICAgICAgICAgZmFp\nbCgiRXhwZWN0aW5nIGEgYSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uIik7\nCiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAg\nYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVjdGVkIGV4Y2VwdGlvbiIsCiAgICAg\nICAgICAgICAgICBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uY2xhc3MuaXNB\nc3NpZ25hYmxlRnJvbShlLmdldENsYXNzKCkpKTsKICAgICAgICB9CiAgICAg\nICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwg\nIjEyMzQ1Iik7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUs\nICI2Nzg5MCIpOwogICAgICAgICAgICBmYWlsKCJFeHBlY3RpbmcgYSBhIEls\nbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi4iKTsKICAgICAgICB9IGNhdGNoIChF\neGNlcHRpb24gZSkgewogICAgICAgICAgICBhc3NlcnRUcnVlKCJDYXVnaHQg\nZXhwZWN0ZWQgZXhjZXB0aW9uIiwKICAgICAgICAgICAgICAgIElsbGVnYWxB\ncmd1bWVudEV4Y2VwdGlvbi5jbGFzcy5pc0Fzc2lnbmFibGVGcm9tKGUuZ2V0\nQ2xhc3MoKSkpOwogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAg\nICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAtMSk7CiAgICAgICAgICAgIGZQ\nbGFuLnNldEhpbnQoaGludE5hbWUsIC0yKTsKICAgICAgICAgICAgZmFpbCgi\nRXhwZWN0aW5nIGEgYSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uIik7CiAg\nICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgYXNz\nZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVjdGVkIGV4Y2VwdGlvbiIsCiAgICAgICAg\nICAgICAgICBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uY2xhc3MuaXNBc3Np\nZ25hYmxlRnJvbShlLmdldENsYXNzKCkpKTsKICAgICAgICB9CiAgICAgICAg\nZW0uY2xvc2UoKTsKICAgIH0KCiAgICAvKiBHb29kCiAgICAgKiBUZXN0ICJv\ncGVuanBhLmpkYmMuU3ViY2xhc3NGZXRjaE1vZGUiIGhpbnQKICAgICAqLwog\nICAgcHVibGljIHZvaWQgdGVzdEpkYmNTdWJjbGFzc0ZldGNoTW9kZUhpbnQo\nKSB7CiAgICAgICAgU3RyaW5nIGhpbnROYW1lID0gIm9wZW5qcGEuamRiYy5T\ndWJjbGFzc0ZldGNoTW9kZSI7CgogICAgICAgIEVudGl0eU1hbmFnZXIgZW0g\nPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIE9wZW5KUEFF\nbnRpdHlNYW5hZ2VyIG9lbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlcikgZW0u\nZ2V0RGVsZWdhdGUoKTsKICAgICAgICBKREJDRmV0Y2hQbGFuIGZQbGFuID0g\nKEpEQkNGZXRjaFBsYW4pIG9lbS5nZXRGZXRjaFBsYW4oKTsKICAgICAgICBK\nREJDRmV0Y2hDb25maWd1cmF0aW9uSW1wbCBmQ29uZmlnID0gKEpEQkNGZXRj\naENvbmZpZ3VyYXRpb25JbXBsKQogICAgICAgICAgICAoKEVudGl0eU1hbmFn\nZXJJbXBsKSBvZW0pLmdldEJyb2tlcigpLmdldEZldGNoQ29uZmlndXJhdGlv\nbigpOwoKICAgICAgICBzdWJjbGFzc0ZldGNoTW9kZUhpbnRUZXN0KGZQbGFu\nLCBmQ29uZmlnLCBoaW50TmFtZSwgU3RyaW5nCiAgICAgICAgICAgIC52YWx1\nZU9mKEVhZ2VyRmV0Y2hNb2Rlcy5FQUdFUl9OT05FKSwgRmV0Y2hNb2RlLk5P\nTkUsCiAgICAgICAgICAgIEVhZ2VyRmV0Y2hNb2Rlcy5FQUdFUl9OT05FKTsK\nICAgICAgICBzdWJjbGFzc0ZldGNoTW9kZUhpbnRUZXN0KGZQbGFuLCBmQ29u\nZmlnLCBoaW50TmFtZSwKICAgICAgICAgICAgRWFnZXJGZXRjaE1vZGVzLkVB\nR0VSX05PTkUsIEZldGNoTW9kZS5OT05FLAogICAgICAgICAgICBFYWdlckZl\ndGNoTW9kZXMuRUFHRVJfTk9ORSk7CgogICAgICAgIHN1YmNsYXNzRmV0Y2hN\nb2RlSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCBTdHJpbmcK\nICAgICAgICAgICAgLnZhbHVlT2YoRWFnZXJGZXRjaE1vZGVzLkVBR0VSX1BB\nUkFMTEVMKSwgRmV0Y2hNb2RlLlBBUkFMTEVMLAogICAgICAgICAgICBFYWdl\nckZldGNoTW9kZXMuRUFHRVJfUEFSQUxMRUwpOwogICAgICAgIHN1YmNsYXNz\nRmV0Y2hNb2RlSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLAog\nICAgICAgICAgICBFYWdlckZldGNoTW9kZXMuRUFHRVJfUEFSQUxMRUwsIEZl\ndGNoTW9kZS5QQVJBTExFTCwKICAgICAgICAgICAgRWFnZXJGZXRjaE1vZGVz\nLkVBR0VSX1BBUkFMTEVMKTsKCiAgICAgICAgc3ViY2xhc3NGZXRjaE1vZGVI\naW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIFN0cmluZwogICAg\nICAgICAgICAudmFsdWVPZihFYWdlckZldGNoTW9kZXMuRUFHRVJfSk9JTiks\nIEZldGNoTW9kZS5KT0lOLAogICAgICAgICAgICBFYWdlckZldGNoTW9kZXMu\nRUFHRVJfSk9JTik7CiAgICAgICAgc3ViY2xhc3NGZXRjaE1vZGVIaW50VGVz\ndChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsCiAgICAgICAgICAgIEVhZ2Vy\nRmV0Y2hNb2Rlcy5FQUdFUl9KT0lOLCBGZXRjaE1vZGUuSk9JTiwKICAgICAg\nICAgICAgRWFnZXJGZXRjaE1vZGVzLkVBR0VSX0pPSU4pOwoKICAgICAgICB0\ncnkgewogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAieHh4\neHgiKTsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwgInl5\neXl5Iik7CiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGluZyBhIGEgSWxsZWdh\nbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2Vw\ndGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2VydFRydWUoIkNhdWdodCBleHBl\nY3RlZCBleGNlcHRpb24iLAogICAgICAgICAgICAgICAgSWxsZWdhbEFyZ3Vt\nZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNzaWduYWJsZUZyb20oZS5nZXRDbGFz\ncygpKSk7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZQ\nbGFuLnNldEhpbnQoaGludE5hbWUsICIxMjM0NSIpOwogICAgICAgICAgICBm\nUGxhbi5zZXRIaW50KGhpbnROYW1lLCAiNjc4OTAiKTsKICAgICAgICAgICAg\nZmFpbCgiRXhwZWN0aW5nIGEgYSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24u\nIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAg\nICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVjdGVkIGV4Y2VwdGlvbiIsCiAg\nICAgICAgICAgICAgICBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uY2xhc3Mu\naXNBc3NpZ25hYmxlRnJvbShlLmdldENsYXNzKCkpKTsKICAgICAgICB9CiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFt\nZSwgLTEpOwogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAt\nMik7CiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGluZyBhIGEgSWxsZWdhbEFy\nZ3VtZW50RXhjZXB0aW9uLiIpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlv\nbiBlKSB7CiAgICAgICAgICAgIGFzc2VydFRydWUoIkNhdWdodCBleHBlY3Rl\nZCBleGNlcHRpb24iLAogICAgICAgICAgICAgICAgSWxsZWdhbEFyZ3VtZW50\nRXhjZXB0aW9uLmNsYXNzLmlzQXNzaWduYWJsZUZyb20oZS5nZXRDbGFzcygp\nKSk7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZQbGFu\nLnNldEhpbnQoaGludE5hbWUsIEZldGNoQ29uZmlndXJhdGlvbi5ERUZBVUxU\nKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKEVhZ2VyRmV0Y2hNb2Rlcy5F\nQUdFUl9KT0lOLCBmQ29uZmlnCiAgICAgICAgICAgICAgICAuZ2V0U3ViY2xh\nc3NGZXRjaE1vZGUoKSk7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUp\nIHsKICAgICAgICAgICAgZmFpbCgiVW5leHBlY3RlZCAiICsgZS5nZXRDbGFz\ncygpLmdldE5hbWUoKSk7CiAgICAgICAgfQogICAgICAgIGVtLmNsb3NlKCk7\nCiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIHN1YmNsYXNzRmV0Y2hNb2RlSGlu\ndFRlc3QoSkRCQ0ZldGNoUGxhbiBmUGxhbiwKICAgICAgICBKREJDRmV0Y2hD\nb25maWd1cmF0aW9uSW1wbCBmQ29uZmlnLCBTdHJpbmcgaGludCwgT2JqZWN0\nIHZhbHVlLAogICAgICAgIE9iamVjdCBleHBlY3RlZFZhbHVlLCBpbnQgZXhw\nZWN0ZWQpIHsKICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnQsIHZhbHVlKTsK\nICAgICAgICBPYmplY3QgZ2V0VmFsdWUgPSBmUGxhbi5nZXRIaW50KGhpbnQp\nOwogICAgICAgIGFzc2VydEVxdWFscyh2YWx1ZS5nZXRDbGFzcygpLCBnZXRW\nYWx1ZS5nZXRDbGFzcygpKTsKICAgICAgICBhc3NlcnRFcXVhbHModmFsdWUs\nIGdldFZhbHVlKTsKICAgICAgICBhc3NlcnRFcXVhbHMoZXhwZWN0ZWRWYWx1\nZSwgZlBsYW4uZ2V0U3ViY2xhc3NGZXRjaE1vZGUoKSk7CiAgICAgICAgYXNz\nZXJ0RXF1YWxzKGV4cGVjdGVkLCBmQ29uZmlnLmdldFN1YmNsYXNzRmV0Y2hN\nb2RlKCkpOwogICAgfQoKICAgIC8qIEdvb2QKICAgICAqIFRlc3QgIm9wZW5q\ncGEuRmx1c2hCZWZvcmVRdWVyaWVzIiBoaW50CiAgICAgKi8KICAgIHB1Ymxp\nYyB2b2lkIHRlc3RGbHVzaEJlZm9yZVF1ZXJpZXNIaW50KCkgewogICAgICAg\nIFN0cmluZyBoaW50TmFtZSA9ICJvcGVuanBhLkZsdXNoQmVmb3JlUXVlcmll\ncyI7CgogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50\naXR5TWFuYWdlcigpOwogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIG9l\nbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlcikgZW0uZ2V0RGVsZWdhdGUoKTsK\nICAgICAgICBKREJDRmV0Y2hQbGFuIGZQbGFuID0gKEpEQkNGZXRjaFBsYW4p\nIG9lbS5nZXRGZXRjaFBsYW4oKTsKICAgICAgICBKREJDRmV0Y2hDb25maWd1\ncmF0aW9uSW1wbCBmQ29uZmlnID0gKEpEQkNGZXRjaENvbmZpZ3VyYXRpb25J\nbXBsKQogICAgICAgICAgICAoKEVudGl0eU1hbmFnZXJJbXBsKSBvZW0pLmdl\ndEJyb2tlcigpLmdldEZldGNoQ29uZmlndXJhdGlvbigpOwoKICAgICAgICBm\nbHVzaEJlZm9yZVF1ZXJpZXNIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGlu\ndE5hbWUsIFN0cmluZwogICAgICAgICAgICAudmFsdWVPZihRdWVyeUZsdXNo\nTW9kZXMuRkxVU0hfVFJVRSksIFF1ZXJ5Rmx1c2hNb2Rlcy5GTFVTSF9UUlVF\nKTsKICAgICAgICBmbHVzaEJlZm9yZVF1ZXJpZXNIaW50VGVzdChmUGxhbiwg\nZkNvbmZpZywgaGludE5hbWUsCiAgICAgICAgICAgIFF1ZXJ5Rmx1c2hNb2Rl\ncy5GTFVTSF9UUlVFLCBRdWVyeUZsdXNoTW9kZXMuRkxVU0hfVFJVRSk7Cgog\nICAgICAgIGZsdXNoQmVmb3JlUXVlcmllc0hpbnRUZXN0KGZQbGFuLCBmQ29u\nZmlnLCBoaW50TmFtZSwgU3RyaW5nCiAgICAgICAgICAgIC52YWx1ZU9mKFF1\nZXJ5Rmx1c2hNb2Rlcy5GTFVTSF9GQUxTRSksIFF1ZXJ5Rmx1c2hNb2Rlcy5G\nTFVTSF9GQUxTRSk7CiAgICAgICAgZmx1c2hCZWZvcmVRdWVyaWVzSGludFRl\nc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLAogICAgICAgICAgICBRdWVy\neUZsdXNoTW9kZXMuRkxVU0hfRkFMU0UsIFF1ZXJ5Rmx1c2hNb2Rlcy5GTFVT\nSF9GQUxTRSk7CgogICAgICAgIGZsdXNoQmVmb3JlUXVlcmllc0hpbnRUZXN0\nKGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgU3RyaW5nCiAgICAgICAgICAg\nIC52YWx1ZU9mKFF1ZXJ5Rmx1c2hNb2Rlcy5GTFVTSF9XSVRIX0NPTk5FQ1RJ\nT04pLAogICAgICAgICAgICBRdWVyeUZsdXNoTW9kZXMuRkxVU0hfV0lUSF9D\nT05ORUNUSU9OKTsKICAgICAgICBmbHVzaEJlZm9yZVF1ZXJpZXNIaW50VGVz\ndChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsCiAgICAgICAgICAgIFF1ZXJ5\nRmx1c2hNb2Rlcy5GTFVTSF9XSVRIX0NPTk5FQ1RJT04sCiAgICAgICAgICAg\nIFF1ZXJ5Rmx1c2hNb2Rlcy5GTFVTSF9XSVRIX0NPTk5FQ1RJT04pOwoKICAg\nICAgICB0cnkgewogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1l\nLCAieHh4eHgiKTsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFt\nZSwgInl5eXl5Iik7CiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGluZyBhIGEg\nSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwogICAgICAgIH0gY2F0Y2gg\nKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2VydFRydWUoIkNhdWdo\ndCBleHBlY3RlZCBleGNlcHRpb24iLAogICAgICAgICAgICAgICAgSWxsZWdh\nbEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNzaWduYWJsZUZyb20oZS5n\nZXRDbGFzcygpKSk7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAg\nICAgIGZQbGFuLnNldEhpbnQoaGludE5hbWUsICIxMjM0NSIpOwogICAgICAg\nICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAiNjc4OTAiKTsKICAgICAg\nICAgICAgZmFpbCgiRXhwZWN0aW5nIGEgYSBJbGxlZ2FsQXJndW1lbnRFeGNl\ncHRpb24uIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAg\nICAgICAgICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVjdGVkIGV4Y2VwdGlv\nbiIsCiAgICAgICAgICAgICAgICBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24u\nY2xhc3MuaXNBc3NpZ25hYmxlRnJvbShlLmdldENsYXNzKCkpKTsKICAgICAg\nICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4uc2V0SGludCho\naW50TmFtZSwgLTEpOwogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnRO\nYW1lLCAtMik7CiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGluZyBhIGEgSWxs\nZWdhbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwogICAgICAgIH0gY2F0Y2ggKEV4\nY2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2VydFRydWUoIkNhdWdodCBl\neHBlY3RlZCBleGNlcHRpb24iLAogICAgICAgICAgICAgICAgSWxsZWdhbEFy\nZ3VtZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNzaWduYWJsZUZyb20oZS5nZXRD\nbGFzcygpKSk7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICAg\nIGZQbGFuLnNldEhpbnQoaGludE5hbWUsIEZldGNoQ29uZmlndXJhdGlvbi5E\nRUZBVUxUKTsKICAgICAgICAgICAgZkNvbmZpZy5nZXRGbHVzaEJlZm9yZVF1\nZXJpZXMoKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKFF1ZXJ5Rmx1c2hN\nb2Rlcy5GTFVTSF9UUlVFLCBmQ29uZmlnCiAgICAgICAgICAgICAgICAuZ2V0\nRmx1c2hCZWZvcmVRdWVyaWVzKCkpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2Vw\ndGlvbiBlKSB7CiAgICAgICAgICAgIGZhaWwoIlVuZXhwZWN0ZWQgIiArIGUu\nZ2V0Q2xhc3MoKS5nZXROYW1lKCkpOwogICAgICAgIH0KICAgICAgICBlbS5j\nbG9zZSgpOwogICAgfQoKICAgIHByaXZhdGUgdm9pZCBmbHVzaEJlZm9yZVF1\nZXJpZXNIaW50VGVzdChKREJDRmV0Y2hQbGFuIGZQbGFuLAogICAgICAgIEpE\nQkNGZXRjaENvbmZpZ3VyYXRpb25JbXBsIGZDb25maWcsIFN0cmluZyBoaW50\nLCBPYmplY3QgdmFsdWUsCiAgICAgICAgaW50IGV4cGVjdGVkKSB7CiAgICAg\nICAgZlBsYW4uc2V0SGludChoaW50LCB2YWx1ZSk7CiAgICAgICAgT2JqZWN0\nIGdldFZhbHVlID0gZlBsYW4uZ2V0SGludChoaW50KTsKICAgICAgICBhc3Nl\ncnRFcXVhbHModmFsdWUuZ2V0Q2xhc3MoKSwgZ2V0VmFsdWUuZ2V0Q2xhc3Mo\nKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKHZhbHVlLCBnZXRWYWx1ZSk7CiAg\nICAgICAgYXNzZXJ0RXF1YWxzKGV4cGVjdGVkLCBmQ29uZmlnLmdldEZsdXNo\nQmVmb3JlUXVlcmllcygpKTsKICAgIH0KCiAgICAvKiBHb29kCiAgICAgKiBU\nZXN0ICJvcGVuanBhLlJlYWRMb2NrTGV2ZWwiIGhpbnQKICAgICAqLwogICAg\ncHVibGljIHZvaWQgdGVzdFJlYWRMb2NrTGV2ZWxIaW50KCkgewogICAgICAg\nIFN0cmluZyBoaW50TmFtZSA9ICJvcGVuanBhLlJlYWRMb2NrTGV2ZWwiOwoK\nICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1h\nbmFnZXIoKTsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBvZW0gPSAo\nT3BlbkpQQUVudGl0eU1hbmFnZXIpZW0uZ2V0RGVsZWdhdGUoKTsKICAgICAg\nICBKREJDRmV0Y2hQbGFuIGZQbGFuID0gKEpEQkNGZXRjaFBsYW4pIG9lbS5n\nZXRGZXRjaFBsYW4oKTsKICAgICAgICBKREJDRmV0Y2hDb25maWd1cmF0aW9u\nSW1wbCBmQ29uZmlnID0gKEpEQkNGZXRjaENvbmZpZ3VyYXRpb25JbXBsKQog\nICAgICAgICAgICAoKEVudGl0eU1hbmFnZXJJbXBsKSBvZW0pLmdldEJyb2tl\ncigpLmdldEZldGNoQ29uZmlndXJhdGlvbigpOwogICAgICAgIGVtLmdldFRy\nYW5zYWN0aW9uKCkuYmVnaW4oKTsKCiAgICAgICAgcmVhZExvY2tMZXZlbEhp\nbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgU3RyaW5nCiAgICAg\nICAgICAgIC52YWx1ZU9mKE1peGVkTG9ja0xldmVscy5MT0NLX05PTkUpLCBM\nb2NrTW9kZVR5cGUuTk9ORSwKICAgICAgICAgICAgTWl4ZWRMb2NrTGV2ZWxz\nLkxPQ0tfTk9ORSk7CiAgICAgICAgcmVhZExvY2tMZXZlbEhpbnRUZXN0KGZQ\nbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwKICAgICAgICAgICAgTWl4ZWRMb2Nr\nTGV2ZWxzLkxPQ0tfTk9ORSwgTG9ja01vZGVUeXBlLk5PTkUsCiAgICAgICAg\nICAgIE1peGVkTG9ja0xldmVscy5MT0NLX05PTkUpOwoKICAgICAgICByZWFk\nTG9ja0xldmVsSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCBT\ndHJpbmcKICAgICAgICAgICAgLnZhbHVlT2YoTWl4ZWRMb2NrTGV2ZWxzLkxP\nQ0tfUkVBRCksIExvY2tNb2RlVHlwZS5SRUFELAogICAgICAgICAgICBNaXhl\nZExvY2tMZXZlbHMuTE9DS19SRUFEKTsKICAgICAgICByZWFkTG9ja0xldmVs\nSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLAogICAgICAgICAg\nICBNaXhlZExvY2tMZXZlbHMuTE9DS19SRUFELCBMb2NrTW9kZVR5cGUuUkVB\nRCwKICAgICAgICAgICAgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfUkVBRCk7Cgog\nICAgICAgIHJlYWRMb2NrTGV2ZWxIaW50VGVzdChmUGxhbiwgZkNvbmZpZywg\naGludE5hbWUsIFN0cmluZwogICAgICAgICAgICAudmFsdWVPZihNaXhlZExv\nY2tMZXZlbHMuTE9DS19XUklURSksIExvY2tNb2RlVHlwZS5XUklURSwKICAg\nICAgICAgICAgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfV1JJVEUpOwogICAgICAg\nIHJlYWRMb2NrTGV2ZWxIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5h\nbWUsCiAgICAgICAgICAgIE1peGVkTG9ja0xldmVscy5MT0NLX1dSSVRFLCBM\nb2NrTW9kZVR5cGUuV1JJVEUsCiAgICAgICAgICAgIE1peGVkTG9ja0xldmVs\ncy5MT0NLX1dSSVRFKTsKCiAgICAgICAgcmVhZExvY2tMZXZlbEhpbnRUZXN0\nKGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgU3RyaW5nCiAgICAgICAgICAg\nIC52YWx1ZU9mKE1peGVkTG9ja0xldmVscy5MT0NLX09QVElNSVNUSUMpLCBM\nb2NrTW9kZVR5cGUuT1BUSU1JU1RJQywKICAgICAgICAgICAgTWl4ZWRMb2Nr\nTGV2ZWxzLkxPQ0tfT1BUSU1JU1RJQyk7CiAgICAgICAgcmVhZExvY2tMZXZl\nbEhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwKICAgICAgICAg\nICAgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfT1BUSU1JU1RJQywgTG9ja01vZGVU\neXBlLk9QVElNSVNUSUMsCiAgICAgICAgICAgIE1peGVkTG9ja0xldmVscy5M\nT0NLX09QVElNSVNUSUMpOwoKICAgICAgICByZWFkTG9ja0xldmVsSGludFRl\nc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCBTdHJpbmcKICAgICAgICAg\nICAgLnZhbHVlT2YoTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfT1BUSU1JU1RJQ19G\nT1JDRV9JTkNSRU1FTlQpLAogICAgICAgICAgICBMb2NrTW9kZVR5cGUuT1BU\nSU1JU1RJQ19GT1JDRV9JTkNSRU1FTlQsCiAgICAgICAgICAgIE1peGVkTG9j\na0xldmVscy5MT0NLX09QVElNSVNUSUNfRk9SQ0VfSU5DUkVNRU5UKTsKICAg\nICAgICByZWFkTG9ja0xldmVsSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhp\nbnROYW1lLAogICAgICAgICAgICBNaXhlZExvY2tMZXZlbHMuTE9DS19PUFRJ\nTUlTVElDX0ZPUkNFX0lOQ1JFTUVOVCwKICAgICAgICAgICAgTG9ja01vZGVU\neXBlLk9QVElNSVNUSUNfRk9SQ0VfSU5DUkVNRU5ULAogICAgICAgICAgICBN\naXhlZExvY2tMZXZlbHMuTE9DS19PUFRJTUlTVElDX0ZPUkNFX0lOQ1JFTUVO\nVCk7CgogICAgICAgIHJlYWRMb2NrTGV2ZWxIaW50VGVzdChmUGxhbiwgZkNv\nbmZpZywgaGludE5hbWUsCiAgICAgICAgICAgIFN0cmluZy52YWx1ZU9mKE1p\neGVkTG9ja0xldmVscy5MT0NLX1BFU1NJTUlTVElDX1JFQUQpLAogICAgICAg\nICAgICBMb2NrTW9kZVR5cGUuUEVTU0lNSVNUSUNfUkVBRCwKICAgICAgICAg\nICAgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfUEVTU0lNSVNUSUNfUkVBRCk7CiAg\nICAgICAgcmVhZExvY2tMZXZlbEhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBo\naW50TmFtZSwKICAgICAgICAgICAgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfUEVT\nU0lNSVNUSUNfUkVBRCwKICAgICAgICAgICAgTG9ja01vZGVUeXBlLlBFU1NJ\nTUlTVElDX1JFQUQsCiAgICAgICAgICAgIE1peGVkTG9ja0xldmVscy5MT0NL\nX1BFU1NJTUlTVElDX1JFQUQpOwoKICAgICAgICByZWFkTG9ja0xldmVsSGlu\ndFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLAogICAgICAgICAgICBT\ndHJpbmcudmFsdWVPZihNaXhlZExvY2tMZXZlbHMuTE9DS19QRVNTSU1JU1RJ\nQ19XUklURSksCiAgICAgICAgICAgIExvY2tNb2RlVHlwZS5QRVNTSU1JU1RJ\nQ19XUklURSwKICAgICAgICAgICAgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfUEVT\nU0lNSVNUSUNfV1JJVEUpOwogICAgICAgIHJlYWRMb2NrTGV2ZWxIaW50VGVz\ndChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsCiAgICAgICAgICAgIE1peGVk\nTG9ja0xldmVscy5MT0NLX1BFU1NJTUlTVElDX1dSSVRFLAogICAgICAgICAg\nICBMb2NrTW9kZVR5cGUuUEVTU0lNSVNUSUNfV1JJVEUsCiAgICAgICAgICAg\nIE1peGVkTG9ja0xldmVscy5MT0NLX1BFU1NJTUlTVElDX1dSSVRFKTsKCiAg\nICAgICAgcmVhZExvY2tMZXZlbEhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBo\naW50TmFtZSwgU3RyaW5nCiAgICAgICAgICAgIC52YWx1ZU9mKE1peGVkTG9j\na0xldmVscy5MT0NLX1BFU1NJTUlTVElDX0ZPUkNFX0lOQ1JFTUVOVCksCiAg\nICAgICAgICAgIExvY2tNb2RlVHlwZS5QRVNTSU1JU1RJQ19GT1JDRV9JTkNS\nRU1FTlQsCiAgICAgICAgICAgIE1peGVkTG9ja0xldmVscy5MT0NLX1BFU1NJ\nTUlTVElDX0ZPUkNFX0lOQ1JFTUVOVCk7CiAgICAgICAgcmVhZExvY2tMZXZl\nbEhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwKICAgICAgICAg\nICAgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfUEVTU0lNSVNUSUNfRk9SQ0VfSU5D\nUkVNRU5ULAogICAgICAgICAgICBMb2NrTW9kZVR5cGUuUEVTU0lNSVNUSUNf\nRk9SQ0VfSU5DUkVNRU5ULAogICAgICAgICAgICBNaXhlZExvY2tMZXZlbHMu\nTE9DS19QRVNTSU1JU1RJQ19GT1JDRV9JTkNSRU1FTlQpOwoKICAgICAgICB0\ncnkgewogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAieHh4\neHgiKTsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwgInl5\neXl5Iik7CiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGluZyBhIGEgSWxsZWdh\nbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2Vw\ndGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2VydFRydWUoIkNhdWdodCBleHBl\nY3RlZCBleGNlcHRpb24iLAogICAgICAgICAgICAgICAgSWxsZWdhbEFyZ3Vt\nZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNzaWduYWJsZUZyb20oZS5nZXRDbGFz\ncygpKSk7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZQ\nbGFuLnNldEhpbnQoaGludE5hbWUsICIxMjM0NSIpOwogICAgICAgICAgICBm\nUGxhbi5zZXRIaW50KGhpbnROYW1lLCAiNjc4OTAiKTsKICAgICAgICAgICAg\nZmFpbCgiRXhwZWN0aW5nIGEgYSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24u\nIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAg\nICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVjdGVkIGV4Y2VwdGlvbiIsCiAg\nICAgICAgICAgICAgICBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uY2xhc3Mu\naXNBc3NpZ25hYmxlRnJvbShlLmdldENsYXNzKCkpKTsKICAgICAgICB9CiAg\nICAgICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFt\nZSwgLTEpOwogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAt\nMik7CiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGluZyBhIGEgSWxsZWdhbEFy\nZ3VtZW50RXhjZXB0aW9uLiIpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlv\nbiBlKSB7CiAgICAgICAgICAgIGFzc2VydFRydWUoIkNhdWdodCBleHBlY3Rl\nZCBleGNlcHRpb24iLAogICAgICAgICAgICAgICAgSWxsZWdhbEFyZ3VtZW50\nRXhjZXB0aW9uLmNsYXNzLmlzQXNzaWduYWJsZUZyb20oZS5nZXRDbGFzcygp\nKSk7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZQbGFu\nLnNldEhpbnQoaGludE5hbWUsIEZldGNoQ29uZmlndXJhdGlvbi5ERUZBVUxU\nKTsKICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKE1peGVkTG9ja0xldmVscy5M\nT0NLX1JFQUQsIGZDb25maWcuZ2V0UmVhZExvY2tMZXZlbCgpKTsKICAgICAg\nICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBmYWlsKCJV\nbmV4cGVjdGVkICIgKyBlLmdldENsYXNzKCkuZ2V0TmFtZSgpKTsKICAgICAg\nICB9CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rpb24oKS5yb2xsYmFjaygpOwog\nICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIHJl\nYWRMb2NrTGV2ZWxIaW50VGVzdChKREJDRmV0Y2hQbGFuIGZQbGFuLAogICAg\nICAgIEpEQkNGZXRjaENvbmZpZ3VyYXRpb25JbXBsIGZDb25maWcsIFN0cmlu\nZyBoaW50LCBPYmplY3QgdmFsdWUsCiAgICAgICAgT2JqZWN0IGV4cGVjdGVk\nTW9kZSwgaW50IGV4cGVjdGVkTGV2ZWwpIHsKICAgICAgICBmUGxhbi5zZXRI\naW50KGhpbnQsIHZhbHVlKTsKICAgICAgICBPYmplY3QgZ2V0VmFsdWUgPSBm\nUGxhbi5nZXRIaW50KGhpbnQpOwogICAgICAgIGFzc2VydEVxdWFscyh2YWx1\nZS5nZXRDbGFzcygpLCBnZXRWYWx1ZS5nZXRDbGFzcygpKTsKICAgICAgICBh\nc3NlcnRFcXVhbHModmFsdWUsIGdldFZhbHVlKTsKICAgICAgICBhc3NlcnRF\ncXVhbHMoZXhwZWN0ZWRNb2RlLCBmUGxhbi5nZXRSZWFkTG9ja01vZGUoKSk7\nCiAgICAgICAgYXNzZXJ0RXF1YWxzKGV4cGVjdGVkTGV2ZWwsIGZDb25maWcu\nZ2V0UmVhZExvY2tMZXZlbCgpKTsKICAgIH0KCiAgICAvKiBHb29kCiAgICAg\nKiBUZXN0ICJvcGVuanBhLldyaXRlTG9ja0xldmVsIiBoaW50CiAgICAgKi8K\nICAgIHB1YmxpYyB2b2lkIHRlc3RXcml0ZUxvY2tMZXZlbEhpbnQoKSB7CiAg\nICAgICAgU3RyaW5nIGhpbnROYW1lID0gIm9wZW5qcGEuV3JpdGVMb2NrTGV2\nZWwiOwoKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVu\ndGl0eU1hbmFnZXIoKTsKICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBv\nZW0gPSAoT3BlbkpQQUVudGl0eU1hbmFnZXIpZW0uZ2V0RGVsZWdhdGUoKTsK\nICAgICAgICBKREJDRmV0Y2hQbGFuIGZQbGFuID0gKEpEQkNGZXRjaFBsYW4p\nIG9lbS5nZXRGZXRjaFBsYW4oKTsKICAgICAgICBKREJDRmV0Y2hDb25maWd1\ncmF0aW9uSW1wbCBmQ29uZmlnID0gKEpEQkNGZXRjaENvbmZpZ3VyYXRpb25J\nbXBsKQogICAgICAgICAgICAoKEVudGl0eU1hbmFnZXJJbXBsKSBvZW0pLmdl\ndEJyb2tlcigpLmdldEZldGNoQ29uZmlndXJhdGlvbigpOwogICAgICAgIGVt\nLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKCiAgICAgICAgd3JpdGVMb2Nr\nTGV2ZWxIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIFN0cmlu\nZwogICAgICAgICAgICAudmFsdWVPZihNaXhlZExvY2tMZXZlbHMuTE9DS19O\nT05FKSwgTG9ja01vZGVUeXBlLk5PTkUsCiAgICAgICAgICAgIE1peGVkTG9j\na0xldmVscy5MT0NLX05PTkUpOwogICAgICAgIHdyaXRlTG9ja0xldmVsSGlu\ndFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLAogICAgICAgICAgICBN\naXhlZExvY2tMZXZlbHMuTE9DS19OT05FLCBMb2NrTW9kZVR5cGUuTk9ORSwK\nICAgICAgICAgICAgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfTk9ORSk7CgogICAg\nICAgIHdyaXRlTG9ja0xldmVsSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhp\nbnROYW1lLCBTdHJpbmcKICAgICAgICAgICAgLnZhbHVlT2YoTWl4ZWRMb2Nr\nTGV2ZWxzLkxPQ0tfUkVBRCksIExvY2tNb2RlVHlwZS5SRUFELAogICAgICAg\nICAgICBNaXhlZExvY2tMZXZlbHMuTE9DS19SRUFEKTsKICAgICAgICB3cml0\nZUxvY2tMZXZlbEhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwK\nICAgICAgICAgICAgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfUkVBRCwgTG9ja01v\nZGVUeXBlLlJFQUQsCiAgICAgICAgICAgIE1peGVkTG9ja0xldmVscy5MT0NL\nX1JFQUQpOwoKICAgICAgICB3cml0ZUxvY2tMZXZlbEhpbnRUZXN0KGZQbGFu\nLCBmQ29uZmlnLCBoaW50TmFtZSwgU3RyaW5nCiAgICAgICAgICAgIC52YWx1\nZU9mKE1peGVkTG9ja0xldmVscy5MT0NLX1dSSVRFKSwgTG9ja01vZGVUeXBl\nLldSSVRFLAogICAgICAgICAgICBNaXhlZExvY2tMZXZlbHMuTE9DS19XUklU\nRSk7CiAgICAgICAgd3JpdGVMb2NrTGV2ZWxIaW50VGVzdChmUGxhbiwgZkNv\nbmZpZywgaGludE5hbWUsCiAgICAgICAgICAgIE1peGVkTG9ja0xldmVscy5M\nT0NLX1dSSVRFLCBMb2NrTW9kZVR5cGUuV1JJVEUsCiAgICAgICAgICAgIE1p\neGVkTG9ja0xldmVscy5MT0NLX1dSSVRFKTsKCiAgICAgICAgd3JpdGVMb2Nr\nTGV2ZWxIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIFN0cmlu\nZwogICAgICAgICAgICAudmFsdWVPZihNaXhlZExvY2tMZXZlbHMuTE9DS19P\nUFRJTUlTVElDKSwgTG9ja01vZGVUeXBlLk9QVElNSVNUSUMsCiAgICAgICAg\nICAgIE1peGVkTG9ja0xldmVscy5MT0NLX09QVElNSVNUSUMpOwogICAgICAg\nIHdyaXRlTG9ja0xldmVsSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnRO\nYW1lLAogICAgICAgICAgICBNaXhlZExvY2tMZXZlbHMuTE9DS19PUFRJTUlT\nVElDLCBMb2NrTW9kZVR5cGUuT1BUSU1JU1RJQywKICAgICAgICAgICAgTWl4\nZWRMb2NrTGV2ZWxzLkxPQ0tfT1BUSU1JU1RJQyk7CgogICAgICAgIHdyaXRl\nTG9ja0xldmVsSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCBT\ndHJpbmcKICAgICAgICAgICAgLnZhbHVlT2YoTWl4ZWRMb2NrTGV2ZWxzLkxP\nQ0tfT1BUSU1JU1RJQ19GT1JDRV9JTkNSRU1FTlQpLAogICAgICAgICAgICBM\nb2NrTW9kZVR5cGUuT1BUSU1JU1RJQ19GT1JDRV9JTkNSRU1FTlQsCiAgICAg\nICAgICAgIE1peGVkTG9ja0xldmVscy5MT0NLX09QVElNSVNUSUNfRk9SQ0Vf\nSU5DUkVNRU5UKTsKICAgICAgICB3cml0ZUxvY2tMZXZlbEhpbnRUZXN0KGZQ\nbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwKICAgICAgICAgICAgTWl4ZWRMb2Nr\nTGV2ZWxzLkxPQ0tfT1BUSU1JU1RJQ19GT1JDRV9JTkNSRU1FTlQsCiAgICAg\nICAgICAgIExvY2tNb2RlVHlwZS5PUFRJTUlTVElDX0ZPUkNFX0lOQ1JFTUVO\nVCwKICAgICAgICAgICAgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfT1BUSU1JU1RJ\nQ19GT1JDRV9JTkNSRU1FTlQpOwoKICAgICAgICB3cml0ZUxvY2tMZXZlbEhp\nbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwKICAgICAgICAgICAg\nU3RyaW5nLnZhbHVlT2YoTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfUEVTU0lNSVNU\nSUNfUkVBRCksCiAgICAgICAgICAgIExvY2tNb2RlVHlwZS5QRVNTSU1JU1RJ\nQ19SRUFELAogICAgICAgICAgICBNaXhlZExvY2tMZXZlbHMuTE9DS19QRVNT\nSU1JU1RJQ19SRUFEKTsKICAgICAgICB3cml0ZUxvY2tMZXZlbEhpbnRUZXN0\nKGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwKICAgICAgICAgICAgTWl4ZWRM\nb2NrTGV2ZWxzLkxPQ0tfUEVTU0lNSVNUSUNfUkVBRCwKICAgICAgICAgICAg\nTG9ja01vZGVUeXBlLlBFU1NJTUlTVElDX1JFQUQsCiAgICAgICAgICAgIE1p\neGVkTG9ja0xldmVscy5MT0NLX1BFU1NJTUlTVElDX1JFQUQpOwoKICAgICAg\nICB3cml0ZUxvY2tMZXZlbEhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50\nTmFtZSwKICAgICAgICAgICAgU3RyaW5nLnZhbHVlT2YoTWl4ZWRMb2NrTGV2\nZWxzLkxPQ0tfUEVTU0lNSVNUSUNfV1JJVEUpLAogICAgICAgICAgICBMb2Nr\nTW9kZVR5cGUuUEVTU0lNSVNUSUNfV1JJVEUsCiAgICAgICAgICAgIE1peGVk\nTG9ja0xldmVscy5MT0NLX1BFU1NJTUlTVElDX1dSSVRFKTsKICAgICAgICB3\ncml0ZUxvY2tMZXZlbEhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFt\nZSwKICAgICAgICAgICAgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfUEVTU0lNSVNU\nSUNfV1JJVEUsCiAgICAgICAgICAgIExvY2tNb2RlVHlwZS5QRVNTSU1JU1RJ\nQ19XUklURSwKICAgICAgICAgICAgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfUEVT\nU0lNSVNUSUNfV1JJVEUpOwoKICAgICAgICB3cml0ZUxvY2tMZXZlbEhpbnRU\nZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgU3RyaW5nCiAgICAgICAg\nICAgIC52YWx1ZU9mKE1peGVkTG9ja0xldmVscy5MT0NLX1BFU1NJTUlTVElD\nX0ZPUkNFX0lOQ1JFTUVOVCksCiAgICAgICAgICAgIExvY2tNb2RlVHlwZS5Q\nRVNTSU1JU1RJQ19GT1JDRV9JTkNSRU1FTlQsCiAgICAgICAgICAgIE1peGVk\nTG9ja0xldmVscy5MT0NLX1BFU1NJTUlTVElDX0ZPUkNFX0lOQ1JFTUVOVCk7\nCiAgICAgICAgd3JpdGVMb2NrTGV2ZWxIaW50VGVzdChmUGxhbiwgZkNvbmZp\nZywgaGludE5hbWUsCiAgICAgICAgICAgIE1peGVkTG9ja0xldmVscy5MT0NL\nX1BFU1NJTUlTVElDX0ZPUkNFX0lOQ1JFTUVOVCwKICAgICAgICAgICAgTG9j\na01vZGVUeXBlLlBFU1NJTUlTVElDX0ZPUkNFX0lOQ1JFTUVOVCwKICAgICAg\nICAgICAgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfUEVTU0lNSVNUSUNfRk9SQ0Vf\nSU5DUkVNRU5UKTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4u\nc2V0SGludChoaW50TmFtZSwgInh4eHh4Iik7CiAgICAgICAgICAgIGZQbGFu\nLnNldEhpbnQoaGludE5hbWUsICJ5eXl5eSIpOwogICAgICAgICAgICBmYWls\nKCJFeHBlY3RpbmcgYSBhIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi4iKTsK\nICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBh\nc3NlcnRUcnVlKCJDYXVnaHQgZXhwZWN0ZWQgZXhjZXB0aW9uIiwKICAgICAg\nICAgICAgICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5jbGFzcy5pc0Fz\nc2lnbmFibGVGcm9tKGUuZ2V0Q2xhc3MoKSkpOwogICAgICAgIH0KICAgICAg\nICB0cnkgewogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAi\nMTIzNDUiKTsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwg\nIjY3ODkwIik7CiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGluZyBhIGEgSWxs\nZWdhbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwogICAgICAgIH0gY2F0Y2ggKEV4\nY2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2VydFRydWUoIkNhdWdodCBl\neHBlY3RlZCBleGNlcHRpb24iLAogICAgICAgICAgICAgICAgSWxsZWdhbEFy\nZ3VtZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNzaWduYWJsZUZyb20oZS5nZXRD\nbGFzcygpKSk7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICAg\nIGZQbGFuLnNldEhpbnQoaGludE5hbWUsIC0xKTsKICAgICAgICAgICAgZlBs\nYW4uc2V0SGludChoaW50TmFtZSwgLTIpOwogICAgICAgICAgICBmYWlsKCJF\neHBlY3RpbmcgYSBhIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi4iKTsKICAg\nICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBhc3Nl\ncnRUcnVlKCJDYXVnaHQgZXhwZWN0ZWQgZXhjZXB0aW9uIiwKICAgICAgICAg\nICAgICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5jbGFzcy5pc0Fzc2ln\nbmFibGVGcm9tKGUuZ2V0Q2xhc3MoKSkpOwogICAgICAgIH0KICAgICAgICB0\ncnkgewogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCBGZXRj\naENvbmZpZ3VyYXRpb24uREVGQVVMVCk7CiAgICAgICAgICAgIGFzc2VydEVx\ndWFscyhNaXhlZExvY2tMZXZlbHMuTE9DS19XUklURSwgZkNvbmZpZwogICAg\nICAgICAgICAgICAgLmdldFdyaXRlTG9ja0xldmVsKCkpOwogICAgICAgIH0g\nY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGZhaWwoIlVuZXhw\nZWN0ZWQgIiArIGUuZ2V0Q2xhc3MoKS5nZXROYW1lKCkpOwogICAgICAgIH0K\nICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLnJvbGxiYWNrKCk7CiAgICAg\nICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgd3JpdGVM\nb2NrTGV2ZWxIaW50VGVzdChKREJDRmV0Y2hQbGFuIGZQbGFuLAogICAgICAg\nIEpEQkNGZXRjaENvbmZpZ3VyYXRpb25JbXBsIGZDb25maWcsIFN0cmluZyBo\naW50LCBPYmplY3QgdmFsdWUsCiAgICAgICAgT2JqZWN0IGV4cGVjdGVkTW9k\nZSwgaW50IGV4cGVjdGVkTGV2ZWwpIHsKICAgICAgICBmUGxhbi5zZXRIaW50\nKGhpbnQsIHZhbHVlKTsKICAgICAgICBPYmplY3QgZ2V0VmFsdWUgPSBmUGxh\nbi5nZXRIaW50KGhpbnQpOwogICAgICAgIGFzc2VydEVxdWFscyh2YWx1ZS5n\nZXRDbGFzcygpLCBnZXRWYWx1ZS5nZXRDbGFzcygpKTsKICAgICAgICBhc3Nl\ncnRFcXVhbHModmFsdWUsIGdldFZhbHVlKTsKICAgICAgICBhc3NlcnRFcXVh\nbHMoZXhwZWN0ZWRNb2RlLCBmUGxhbi5nZXRXcml0ZUxvY2tNb2RlKCkpOwog\nICAgICAgIGFzc2VydEVxdWFscyhleHBlY3RlZExldmVsLCBmQ29uZmlnLmdl\ndFdyaXRlTG9ja0xldmVsKCkpOwogICAgfQoKICAgIC8qIEdvb2QKICAgICAq\nIFRlc3QgIm9wZW5qcGEuRmV0Y2hQbGFuLlJlYWRMb2NrTW9kZSIgaGludAog\nICAgICovCiAgICBwdWJsaWMgdm9pZCB0ZXN0RmV0Y2hQbGFuUmVhZExvY2tN\nb2RlSGludEluVHgoKSB7CiAgICAgICAgZmV0Y2hQbGFuUmVhZExvY2tNb2Rl\nSGludCh0cnVlKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB0ZXN0RmV0Y2hQ\nbGFuUmVhZExvY2tNb2RlSGludE5vdEluVHgoKSB7CiAgICAgICAgZmV0Y2hQ\nbGFuUmVhZExvY2tNb2RlSGludChmYWxzZSk7CiAgICB9CgogICAgcHJpdmF0\nZSB2b2lkIGZldGNoUGxhblJlYWRMb2NrTW9kZUhpbnQoYm9vbGVhbiBpblRy\nYW5zYWN0aW9uKSB7CiAgICAgICAgU3RyaW5nIGhpbnROYW1lID0gIm9wZW5q\ncGEuRmV0Y2hQbGFuLlJlYWRMb2NrTW9kZSI7CgogICAgICAgIEVudGl0eU1h\nbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAg\nIE9wZW5KUEFFbnRpdHlNYW5hZ2VyIG9lbSA9IChPcGVuSlBBRW50aXR5TWFu\nYWdlcikgZW0uZ2V0RGVsZWdhdGUoKTsKICAgICAgICBKREJDRmV0Y2hQbGFu\nIGZQbGFuID0gKEpEQkNGZXRjaFBsYW4pIG9lbS5nZXRGZXRjaFBsYW4oKTsK\nICAgICAgICBKREJDRmV0Y2hDb25maWd1cmF0aW9uSW1wbCBmQ29uZmlnID0g\nKEpEQkNGZXRjaENvbmZpZ3VyYXRpb25JbXBsKQogICAgICAgICAgICAoKEVu\ndGl0eU1hbmFnZXJJbXBsKSBvZW0pLmdldEJyb2tlcigpLmdldEZldGNoQ29u\nZmlndXJhdGlvbigpOwogICAgICAgIGlmKGluVHJhbnNhY3Rpb24pCiAgICAg\nICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsKCiAgICAgICAg\ncmVhZExvY2tNb2RlSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1l\nLCAibm9uZSIsCiAgICAgICAgICAgIExvY2tNb2RlVHlwZS5OT05FLCBNaXhl\nZExvY2tMZXZlbHMuTE9DS19OT05FKTsKICAgICAgICByZWFkTG9ja01vZGVI\naW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIExvY2tNb2RlVHlw\nZS5OT05FLAogICAgICAgICAgICBMb2NrTW9kZVR5cGUuTk9ORSwgTWl4ZWRM\nb2NrTGV2ZWxzLkxPQ0tfTk9ORSk7CiAgICAgICAgcmVhZExvY2tNb2RlSGlu\ndFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLAogICAgICAgICAgICBM\nb2NrTW9kZVR5cGUuTk9ORS5uYW1lKCksIExvY2tNb2RlVHlwZS5OT05FLAog\nICAgICAgICAgICBNaXhlZExvY2tMZXZlbHMuTE9DS19OT05FKTsKCiAgICAg\nICAgcmVhZExvY2tNb2RlSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnRO\nYW1lLCAicmVhZCIsCiAgICAgICAgICAgIExvY2tNb2RlVHlwZS5SRUFELCBN\naXhlZExvY2tMZXZlbHMuTE9DS19SRUFEKTsKICAgICAgICByZWFkTG9ja01v\nZGVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIExvY2tNb2Rl\nVHlwZS5SRUFELAogICAgICAgICAgICBMb2NrTW9kZVR5cGUuUkVBRCwgTWl4\nZWRMb2NrTGV2ZWxzLkxPQ0tfUkVBRCk7CiAgICAgICAgcmVhZExvY2tNb2Rl\nSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLAogICAgICAgICAg\nICBMb2NrTW9kZVR5cGUuUkVBRC5uYW1lKCksIExvY2tNb2RlVHlwZS5SRUFE\nLAogICAgICAgICAgICBNaXhlZExvY2tMZXZlbHMuTE9DS19SRUFEKTsKCiAg\nICAgICAgcmVhZExvY2tNb2RlSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhp\nbnROYW1lLCAid3JpdGUiLAogICAgICAgICAgICBMb2NrTW9kZVR5cGUuV1JJ\nVEUsIE1peGVkTG9ja0xldmVscy5MT0NLX1dSSVRFKTsKICAgICAgICByZWFk\nTG9ja01vZGVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIExv\nY2tNb2RlVHlwZS5XUklURSwKICAgICAgICAgICAgTG9ja01vZGVUeXBlLldS\nSVRFLCBNaXhlZExvY2tMZXZlbHMuTE9DS19XUklURSk7CiAgICAgICAgcmVh\nZExvY2tNb2RlSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCBM\nb2NrTW9kZVR5cGUuV1JJVEUKICAgICAgICAgICAgLm5hbWUoKSwgTG9ja01v\nZGVUeXBlLldSSVRFLCBNaXhlZExvY2tMZXZlbHMuTE9DS19XUklURSk7Cgog\nICAgICAgIHJlYWRMb2NrTW9kZUhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBo\naW50TmFtZSwgIm9wdGltaXN0aWMiLAogICAgICAgICAgICBMb2NrTW9kZVR5\ncGUuT1BUSU1JU1RJQywgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfT1BUSU1JU1RJ\nQyk7CiAgICAgICAgcmVhZExvY2tNb2RlSGludFRlc3QoZlBsYW4sIGZDb25m\naWcsIGhpbnROYW1lLCBMb2NrTW9kZVR5cGUuT1BUSU1JU1RJQywKICAgICAg\nICAgICAgTG9ja01vZGVUeXBlLk9QVElNSVNUSUMsIE1peGVkTG9ja0xldmVs\ncy5MT0NLX09QVElNSVNUSUMpOwogICAgICAgIHJlYWRMb2NrTW9kZUhpbnRU\nZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgTG9ja01vZGVUeXBlLk9Q\nVElNSVNUSUMKICAgICAgICAgICAgLm5hbWUoKSwgTG9ja01vZGVUeXBlLk9Q\nVElNSVNUSUMsIE1peGVkTG9ja0xldmVscy5MT0NLX09QVElNSVNUSUMpOwoK\nICAgICAgICByZWFkTG9ja01vZGVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywg\naGludE5hbWUsCiAgICAgICAgICAgICJvcHRpbWlzdGljLWZvcmNlLWluY3Jl\nbWVudCIsCiAgICAgICAgICAgIExvY2tNb2RlVHlwZS5PUFRJTUlTVElDX0ZP\nUkNFX0lOQ1JFTUVOVCwKICAgICAgICAgICAgTWl4ZWRMb2NrTGV2ZWxzLkxP\nQ0tfT1BUSU1JU1RJQ19GT1JDRV9JTkNSRU1FTlQpOwogICAgICAgIHJlYWRM\nb2NrTW9kZUhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwKICAg\nICAgICAgICAgTG9ja01vZGVUeXBlLk9QVElNSVNUSUNfRk9SQ0VfSU5DUkVN\nRU5ULAogICAgICAgICAgICBMb2NrTW9kZVR5cGUuT1BUSU1JU1RJQ19GT1JD\nRV9JTkNSRU1FTlQsCiAgICAgICAgICAgIE1peGVkTG9ja0xldmVscy5MT0NL\nX09QVElNSVNUSUNfRk9SQ0VfSU5DUkVNRU5UKTsKICAgICAgICByZWFkTG9j\na01vZGVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsCiAgICAg\nICAgICAgIExvY2tNb2RlVHlwZS5PUFRJTUlTVElDX0ZPUkNFX0lOQ1JFTUVO\nVC5uYW1lKCksCiAgICAgICAgICAgIExvY2tNb2RlVHlwZS5PUFRJTUlTVElD\nX0ZPUkNFX0lOQ1JFTUVOVCwKICAgICAgICAgICAgTWl4ZWRMb2NrTGV2ZWxz\nLkxPQ0tfT1BUSU1JU1RJQ19GT1JDRV9JTkNSRU1FTlQpOwoKICAgICAgICBy\nZWFkTG9ja01vZGVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUs\nCiAgICAgICAgICAgICJwZXNzaW1pc3RpYy1yZWFkIiwgTG9ja01vZGVUeXBl\nLlBFU1NJTUlTVElDX1JFQUQsCiAgICAgICAgICAgIE1peGVkTG9ja0xldmVs\ncy5MT0NLX1BFU1NJTUlTVElDX1JFQUQpOwogICAgICAgIHJlYWRMb2NrTW9k\nZUhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwKICAgICAgICAg\nICAgTG9ja01vZGVUeXBlLlBFU1NJTUlTVElDX1JFQUQsIExvY2tNb2RlVHlw\nZS5QRVNTSU1JU1RJQ19SRUFELAogICAgICAgICAgICBNaXhlZExvY2tMZXZl\nbHMuTE9DS19QRVNTSU1JU1RJQ19SRUFEKTsKICAgICAgICByZWFkTG9ja01v\nZGVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsCiAgICAgICAg\nICAgIExvY2tNb2RlVHlwZS5QRVNTSU1JU1RJQ19SRUFELm5hbWUoKSwKICAg\nICAgICAgICAgTG9ja01vZGVUeXBlLlBFU1NJTUlTVElDX1JFQUQsCiAgICAg\nICAgICAgIE1peGVkTG9ja0xldmVscy5MT0NLX1BFU1NJTUlTVElDX1JFQUQp\nOwoKICAgICAgICByZWFkTG9ja01vZGVIaW50VGVzdChmUGxhbiwgZkNvbmZp\nZywgaGludE5hbWUsCiAgICAgICAgICAgICJwZXNzaW1pc3RpYy13cml0ZSIs\nIExvY2tNb2RlVHlwZS5QRVNTSU1JU1RJQ19XUklURSwKICAgICAgICAgICAg\nTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfUEVTU0lNSVNUSUNfV1JJVEUpOwogICAg\nICAgIHJlYWRMb2NrTW9kZUhpbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50\nTmFtZSwKICAgICAgICAgICAgTG9ja01vZGVUeXBlLlBFU1NJTUlTVElDX1dS\nSVRFLCBMb2NrTW9kZVR5cGUuUEVTU0lNSVNUSUNfV1JJVEUsCiAgICAgICAg\nICAgIE1peGVkTG9ja0xldmVscy5MT0NLX1BFU1NJTUlTVElDX1dSSVRFKTsK\nICAgICAgICByZWFkTG9ja01vZGVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywg\naGludE5hbWUsCiAgICAgICAgICAgIExvY2tNb2RlVHlwZS5QRVNTSU1JU1RJ\nQ19XUklURS5uYW1lKCksCiAgICAgICAgICAgIExvY2tNb2RlVHlwZS5QRVNT\nSU1JU1RJQ19XUklURSwKICAgICAgICAgICAgTWl4ZWRMb2NrTGV2ZWxzLkxP\nQ0tfUEVTU0lNSVNUSUNfV1JJVEUpOwoKICAgICAgICByZWFkTG9ja01vZGVI\naW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsCiAgICAgICAgICAg\nICJwZXNzaW1pc3RpYy1mb3JjZS1pbmNyZW1lbnQiLAogICAgICAgICAgICBM\nb2NrTW9kZVR5cGUuUEVTU0lNSVNUSUNfRk9SQ0VfSU5DUkVNRU5ULAogICAg\nICAgICAgICBNaXhlZExvY2tMZXZlbHMuTE9DS19QRVNTSU1JU1RJQ19GT1JD\nRV9JTkNSRU1FTlQpOwogICAgICAgIHJlYWRMb2NrTW9kZUhpbnRUZXN0KGZQ\nbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwKICAgICAgICAgICAgTG9ja01vZGVU\neXBlLlBFU1NJTUlTVElDX0ZPUkNFX0lOQ1JFTUVOVCwKICAgICAgICAgICAg\nTG9ja01vZGVUeXBlLlBFU1NJTUlTVElDX0ZPUkNFX0lOQ1JFTUVOVCwKICAg\nICAgICAgICAgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfUEVTU0lNSVNUSUNfRk9S\nQ0VfSU5DUkVNRU5UKTsKICAgICAgICByZWFkTG9ja01vZGVIaW50VGVzdChm\nUGxhbiwgZkNvbmZpZywgaGludE5hbWUsCiAgICAgICAgICAgIExvY2tNb2Rl\nVHlwZS5QRVNTSU1JU1RJQ19GT1JDRV9JTkNSRU1FTlQubmFtZSgpLAogICAg\nICAgICAgICBMb2NrTW9kZVR5cGUuUEVTU0lNSVNUSUNfRk9SQ0VfSU5DUkVN\nRU5ULAogICAgICAgICAgICBNaXhlZExvY2tMZXZlbHMuTE9DS19QRVNTSU1J\nU1RJQ19GT1JDRV9JTkNSRU1FTlQpOwoKICAgICAgICB0cnkgewogICAgICAg\nICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAieHh4eHgiKTsKICAgICAg\nICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwgInl5eXl5Iik7CiAgICAg\nICAgICAgIGZhaWwoIkV4cGVjdGluZyBhIGEgSWxsZWdhbEFyZ3VtZW50RXhj\nZXB0aW9uLiIpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAg\nICAgICAgICAgIGFzc2VydFRydWUoIkNhdWdodCBleHBlY3RlZCBleGNlcHRp\nb24iLAogICAgICAgICAgICAgICAgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9u\nLmNsYXNzLmlzQXNzaWduYWJsZUZyb20oZS5nZXRDbGFzcygpKSk7CiAgICAg\nICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQo\naGludE5hbWUsICIxMjM0NSIpOwogICAgICAgICAgICBmUGxhbi5zZXRIaW50\nKGhpbnROYW1lLCAiNjc4OTAiKTsKICAgICAgICAgICAgZmFpbCgiRXhwZWN0\naW5nIGEgYSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uIik7CiAgICAgICAg\nfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgYXNzZXJ0VHJ1\nZSgiQ2F1Z2h0IGV4cGVjdGVkIGV4Y2VwdGlvbiIsCiAgICAgICAgICAgICAg\nICBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uY2xhc3MuaXNBc3NpZ25hYmxl\nRnJvbShlLmdldENsYXNzKCkpKTsKICAgICAgICB9CiAgICAgICAgdHJ5IHsK\nICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwgLTEpOwogICAg\nICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAtMik7CiAgICAgICAg\nICAgIGZhaWwoIkV4cGVjdGluZyBhIGEgSWxsZWdhbEFyZ3VtZW50RXhjZXB0\naW9uLiIpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAg\nICAgICAgIGFzc2VydFRydWUoIkNhdWdodCBleHBlY3RlZCBleGNlcHRpb24i\nLAogICAgICAgICAgICAgICAgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLmNs\nYXNzLmlzQXNzaWduYWJsZUZyb20oZS5nZXRDbGFzcygpKSk7CiAgICAgICAg\nfQogICAgICAgIGlmKGluVHJhbnNhY3Rpb24pCiAgICAgICAgICAgIGVtLmdl\ndFRyYW5zYWN0aW9uKCkucm9sbGJhY2soKTsKICAgICAgICBlbS5jbG9zZSgp\nOwogICAgfQoKICAgIHByaXZhdGUgdm9pZCByZWFkTG9ja01vZGVIaW50VGVz\ndChKREJDRmV0Y2hQbGFuIGZQbGFuLAogICAgICAgIEpEQkNGZXRjaENvbmZp\nZ3VyYXRpb25JbXBsIGZDb25maWcsIFN0cmluZyBoaW50LCBPYmplY3QgdmFs\ndWUsCiAgICAgICAgT2JqZWN0IGV4cGVjdGVkTW9kZSwgaW50IGV4cGVjdGVk\nTGV2ZWwpIHsKICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnQsIHZhbHVlKTsK\nICAgICAgICBPYmplY3QgZ2V0VmFsdWUgPSBmUGxhbi5nZXRIaW50KGhpbnQp\nOwogICAgICAgIGFzc2VydEVxdWFscyh2YWx1ZS5nZXRDbGFzcygpLCBnZXRW\nYWx1ZS5nZXRDbGFzcygpKTsKICAgICAgICBhc3NlcnRFcXVhbHModmFsdWUs\nIGdldFZhbHVlKTsKICAgICAgICBhc3NlcnRFcXVhbHMoZXhwZWN0ZWRNb2Rl\nLCBmUGxhbi5nZXRSZWFkTG9ja01vZGUoKSk7CiAgICAgICAgYXNzZXJ0RXF1\nYWxzKGV4cGVjdGVkTGV2ZWwsIGZDb25maWcuZ2V0UmVhZExvY2tMZXZlbCgp\nKTsKICAgIH0KCiAgICAvKiBHb29kCiAgICAgKiBUZXN0ICJvcGVuanBhLkZl\ndGNoUGxhbi5Xcml0ZUxvY2tNb2RlIiBoaW50CiAgICAgKi8KICAgIHB1Ymxp\nYyB2b2lkIHRlc3RGZXRjaFBsYW5Xcml0ZUxvY2tNb2RlSGludEluVHgoKSB7\nCiAgICAgICAgZmV0Y2hQbGFuV3JpdGVMb2NrTW9kZUhpbnQodHJ1ZSk7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgdGVzdEZldGNoUGxhbldyaXRlTG9ja01v\nZGVIaW50Tm90SW5UeCgpIHsKICAgICAgICBmZXRjaFBsYW5Xcml0ZUxvY2tN\nb2RlSGludChmYWxzZSk7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIGZldGNo\nUGxhbldyaXRlTG9ja01vZGVIaW50KGJvb2xlYW4gaW5UcmFuc2FjdGlvbikg\newogICAgICAgIFN0cmluZyBoaW50TmFtZSA9ICJvcGVuanBhLkZldGNoUGxh\nbi5Xcml0ZUxvY2tNb2RlIjsKCiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9\nIGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgT3BlbkpQQUVu\ndGl0eU1hbmFnZXIgb2VtID0gKE9wZW5KUEFFbnRpdHlNYW5hZ2VyKWVtLmdl\ndERlbGVnYXRlKCk7CiAgICAgICAgSkRCQ0ZldGNoUGxhbiBmUGxhbiA9IChK\nREJDRmV0Y2hQbGFuKSBvZW0uZ2V0RmV0Y2hQbGFuKCk7CiAgICAgICAgSkRC\nQ0ZldGNoQ29uZmlndXJhdGlvbkltcGwgZkNvbmZpZyA9IChKREJDRmV0Y2hD\nb25maWd1cmF0aW9uSW1wbCkKICAgICAgICAgICAgKChFbnRpdHlNYW5hZ2Vy\nSW1wbCkgb2VtKS5nZXRCcm9rZXIoKS5nZXRGZXRjaENvbmZpZ3VyYXRpb24o\nKTsKICAgICAgICBpZihpblRyYW5zYWN0aW9uKQogICAgICAgICAgICBlbS5n\nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CgogICAgICAgIHdyaXRlTG9ja01v\nZGVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsICJub25lIiwK\nICAgICAgICAgICAgTG9ja01vZGVUeXBlLk5PTkUsIE1peGVkTG9ja0xldmVs\ncy5MT0NLX05PTkUpOwogICAgICAgIHdyaXRlTG9ja01vZGVIaW50VGVzdChm\nUGxhbiwgZkNvbmZpZywgaGludE5hbWUsIExvY2tNb2RlVHlwZS5OT05FLAog\nICAgICAgICAgICBMb2NrTW9kZVR5cGUuTk9ORSwgTWl4ZWRMb2NrTGV2ZWxz\nLkxPQ0tfTk9ORSk7CiAgICAgICAgd3JpdGVMb2NrTW9kZUhpbnRUZXN0KGZQ\nbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgTG9ja01vZGVUeXBlLk5PTkUKICAg\nICAgICAgICAgLm5hbWUoKSwgTG9ja01vZGVUeXBlLk5PTkUsIE1peGVkTG9j\na0xldmVscy5MT0NLX05PTkUpOwoKICAgICAgICB3cml0ZUxvY2tNb2RlSGlu\ndFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLCAicmVhZCIsCiAgICAg\nICAgICAgIExvY2tNb2RlVHlwZS5SRUFELCBNaXhlZExvY2tMZXZlbHMuTE9D\nS19SRUFEKTsKICAgICAgICB3cml0ZUxvY2tNb2RlSGludFRlc3QoZlBsYW4s\nIGZDb25maWcsIGhpbnROYW1lLCBMb2NrTW9kZVR5cGUuUkVBRCwKICAgICAg\nICAgICAgTG9ja01vZGVUeXBlLlJFQUQsIE1peGVkTG9ja0xldmVscy5MT0NL\nX1JFQUQpOwogICAgICAgIHdyaXRlTG9ja01vZGVIaW50VGVzdChmUGxhbiwg\nZkNvbmZpZywgaGludE5hbWUsIExvY2tNb2RlVHlwZS5SRUFECiAgICAgICAg\nICAgIC5uYW1lKCksIExvY2tNb2RlVHlwZS5SRUFELCBNaXhlZExvY2tMZXZl\nbHMuTE9DS19SRUFEKTsKCiAgICAgICAgd3JpdGVMb2NrTW9kZUhpbnRUZXN0\nKGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgIndyaXRlIiwKICAgICAgICAg\nICAgTG9ja01vZGVUeXBlLldSSVRFLCBNaXhlZExvY2tMZXZlbHMuTE9DS19X\nUklURSk7CiAgICAgICAgd3JpdGVMb2NrTW9kZUhpbnRUZXN0KGZQbGFuLCBm\nQ29uZmlnLCBoaW50TmFtZSwgTG9ja01vZGVUeXBlLldSSVRFLAogICAgICAg\nICAgICBMb2NrTW9kZVR5cGUuV1JJVEUsIE1peGVkTG9ja0xldmVscy5MT0NL\nX1dSSVRFKTsKICAgICAgICB3cml0ZUxvY2tNb2RlSGludFRlc3QoZlBsYW4s\nIGZDb25maWcsIGhpbnROYW1lLCBMb2NrTW9kZVR5cGUuV1JJVEUKICAgICAg\nICAgICAgLm5hbWUoKSwgTG9ja01vZGVUeXBlLldSSVRFLCBNaXhlZExvY2tM\nZXZlbHMuTE9DS19XUklURSk7CgogICAgICAgIHdyaXRlTG9ja01vZGVIaW50\nVGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsCiAgICAgICAgICAgICJv\ncHRpbWlzdGljIiwgTG9ja01vZGVUeXBlLk9QVElNSVNUSUMsCiAgICAgICAg\nICAgIE1peGVkTG9ja0xldmVscy5MT0NLX09QVElNSVNUSUMpOwogICAgICAg\nIHdyaXRlTG9ja01vZGVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5h\nbWUsCiAgICAgICAgICAgIExvY2tNb2RlVHlwZS5PUFRJTUlTVElDLCBMb2Nr\nTW9kZVR5cGUuT1BUSU1JU1RJQywKICAgICAgICAgICAgTWl4ZWRMb2NrTGV2\nZWxzLkxPQ0tfT1BUSU1JU1RJQyk7CiAgICAgICAgd3JpdGVMb2NrTW9kZUhp\nbnRUZXN0KGZQbGFuLCBmQ29uZmlnLCBoaW50TmFtZSwgTG9ja01vZGVUeXBl\nLk9QVElNSVNUSUMKICAgICAgICAgICAgLm5hbWUoKSwgTG9ja01vZGVUeXBl\nLk9QVElNSVNUSUMsIE1peGVkTG9ja0xldmVscy5MT0NLX09QVElNSVNUSUMp\nOwoKICAgICAgICB3cml0ZUxvY2tNb2RlSGludFRlc3QoZlBsYW4sIGZDb25m\naWcsIGhpbnROYW1lLAogICAgICAgICAgICAib3B0aW1pc3RpYy1mb3JjZS1p\nbmNyZW1lbnQiLAogICAgICAgICAgICBMb2NrTW9kZVR5cGUuT1BUSU1JU1RJ\nQ19GT1JDRV9JTkNSRU1FTlQsCiAgICAgICAgICAgIE1peGVkTG9ja0xldmVs\ncy5MT0NLX09QVElNSVNUSUNfRk9SQ0VfSU5DUkVNRU5UKTsKICAgICAgICB3\ncml0ZUxvY2tNb2RlSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1l\nLAogICAgICAgICAgICBMb2NrTW9kZVR5cGUuT1BUSU1JU1RJQ19GT1JDRV9J\nTkNSRU1FTlQsCiAgICAgICAgICAgIExvY2tNb2RlVHlwZS5PUFRJTUlTVElD\nX0ZPUkNFX0lOQ1JFTUVOVCwKICAgICAgICAgICAgTWl4ZWRMb2NrTGV2ZWxz\nLkxPQ0tfT1BUSU1JU1RJQ19GT1JDRV9JTkNSRU1FTlQpOwogICAgICAgIHdy\naXRlTG9ja01vZGVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUs\nCiAgICAgICAgICAgIExvY2tNb2RlVHlwZS5PUFRJTUlTVElDX0ZPUkNFX0lO\nQ1JFTUVOVC5uYW1lKCksCiAgICAgICAgICAgIExvY2tNb2RlVHlwZS5PUFRJ\nTUlTVElDX0ZPUkNFX0lOQ1JFTUVOVCwKICAgICAgICAgICAgTWl4ZWRMb2Nr\nTGV2ZWxzLkxPQ0tfT1BUSU1JU1RJQ19GT1JDRV9JTkNSRU1FTlQpOwoKICAg\nICAgICB3cml0ZUxvY2tNb2RlSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhp\nbnROYW1lLAogICAgICAgICAgICAicGVzc2ltaXN0aWMtcmVhZCIsIExvY2tN\nb2RlVHlwZS5QRVNTSU1JU1RJQ19SRUFELAogICAgICAgICAgICBNaXhlZExv\nY2tMZXZlbHMuTE9DS19QRVNTSU1JU1RJQ19SRUFEKTsKICAgICAgICB3cml0\nZUxvY2tNb2RlSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLAog\nICAgICAgICAgICBMb2NrTW9kZVR5cGUuUEVTU0lNSVNUSUNfUkVBRCwgTG9j\na01vZGVUeXBlLlBFU1NJTUlTVElDX1JFQUQsCiAgICAgICAgICAgIE1peGVk\nTG9ja0xldmVscy5MT0NLX1BFU1NJTUlTVElDX1JFQUQpOwogICAgICAgIHdy\naXRlTG9ja01vZGVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUs\nCiAgICAgICAgICAgIExvY2tNb2RlVHlwZS5QRVNTSU1JU1RJQ19SRUFELm5h\nbWUoKSwKICAgICAgICAgICAgTG9ja01vZGVUeXBlLlBFU1NJTUlTVElDX1JF\nQUQsCiAgICAgICAgICAgIE1peGVkTG9ja0xldmVscy5MT0NLX1BFU1NJTUlT\nVElDX1JFQUQpOwoKICAgICAgICB3cml0ZUxvY2tNb2RlSGludFRlc3QoZlBs\nYW4sIGZDb25maWcsIGhpbnROYW1lLAogICAgICAgICAgICAicGVzc2ltaXN0\naWMtd3JpdGUiLCBMb2NrTW9kZVR5cGUuUEVTU0lNSVNUSUNfV1JJVEUsCiAg\nICAgICAgICAgIE1peGVkTG9ja0xldmVscy5MT0NLX1BFU1NJTUlTVElDX1dS\nSVRFKTsKICAgICAgICB3cml0ZUxvY2tNb2RlSGludFRlc3QoZlBsYW4sIGZD\nb25maWcsIGhpbnROYW1lLAogICAgICAgICAgICBMb2NrTW9kZVR5cGUuUEVT\nU0lNSVNUSUNfV1JJVEUsIExvY2tNb2RlVHlwZS5QRVNTSU1JU1RJQ19XUklU\nRSwKICAgICAgICAgICAgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfUEVTU0lNSVNU\nSUNfV1JJVEUpOwogICAgICAgIHdyaXRlTG9ja01vZGVIaW50VGVzdChmUGxh\nbiwgZkNvbmZpZywgaGludE5hbWUsCiAgICAgICAgICAgIExvY2tNb2RlVHlw\nZS5QRVNTSU1JU1RJQ19XUklURS5uYW1lKCksCiAgICAgICAgICAgIExvY2tN\nb2RlVHlwZS5QRVNTSU1JU1RJQ19XUklURSwKICAgICAgICAgICAgTWl4ZWRM\nb2NrTGV2ZWxzLkxPQ0tfUEVTU0lNSVNUSUNfV1JJVEUpOwoKICAgICAgICB3\ncml0ZUxvY2tNb2RlSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1l\nLAogICAgICAgICAgICAicGVzc2ltaXN0aWMtZm9yY2UtaW5jcmVtZW50IiwK\nICAgICAgICAgICAgTG9ja01vZGVUeXBlLlBFU1NJTUlTVElDX0ZPUkNFX0lO\nQ1JFTUVOVCwKICAgICAgICAgICAgTWl4ZWRMb2NrTGV2ZWxzLkxPQ0tfUEVT\nU0lNSVNUSUNfRk9SQ0VfSU5DUkVNRU5UKTsKICAgICAgICB3cml0ZUxvY2tN\nb2RlSGludFRlc3QoZlBsYW4sIGZDb25maWcsIGhpbnROYW1lLAogICAgICAg\nICAgICBMb2NrTW9kZVR5cGUuUEVTU0lNSVNUSUNfRk9SQ0VfSU5DUkVNRU5U\nLAogICAgICAgICAgICBMb2NrTW9kZVR5cGUuUEVTU0lNSVNUSUNfRk9SQ0Vf\nSU5DUkVNRU5ULAogICAgICAgICAgICBNaXhlZExvY2tMZXZlbHMuTE9DS19Q\nRVNTSU1JU1RJQ19GT1JDRV9JTkNSRU1FTlQpOwogICAgICAgIHdyaXRlTG9j\na01vZGVIaW50VGVzdChmUGxhbiwgZkNvbmZpZywgaGludE5hbWUsCiAgICAg\nICAgICAgIExvY2tNb2RlVHlwZS5QRVNTSU1JU1RJQ19GT1JDRV9JTkNSRU1F\nTlQubmFtZSgpLAogICAgICAgICAgICBMb2NrTW9kZVR5cGUuUEVTU0lNSVNU\nSUNfRk9SQ0VfSU5DUkVNRU5ULAogICAgICAgICAgICBNaXhlZExvY2tMZXZl\nbHMuTE9DS19QRVNTSU1JU1RJQ19GT1JDRV9JTkNSRU1FTlQpOwoKICAgICAg\nICB0cnkgewogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAi\neHh4eHgiKTsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50TmFtZSwg\nInl5eXl5Iik7CiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGluZyBhIGEgSWxs\nZWdhbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwogICAgICAgIH0gY2F0Y2ggKEV4\nY2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2VydFRydWUoIkNhdWdodCBl\neHBlY3RlZCBleGNlcHRpb24iLAogICAgICAgICAgICAgICAgSWxsZWdhbEFy\nZ3VtZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNzaWduYWJsZUZyb20oZS5nZXRD\nbGFzcygpKSk7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICAg\nIGZQbGFuLnNldEhpbnQoaGludE5hbWUsICIxMjM0NSIpOwogICAgICAgICAg\nICBmUGxhbi5zZXRIaW50KGhpbnROYW1lLCAiNjc4OTAiKTsKICAgICAgICAg\nICAgZmFpbCgiRXhwZWN0aW5nIGEgYSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRp\nb24uIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAg\nICAgICAgYXNzZXJ0VHJ1ZSgiQ2F1Z2h0IGV4cGVjdGVkIGV4Y2VwdGlvbiIs\nCiAgICAgICAgICAgICAgICBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24uY2xh\nc3MuaXNBc3NpZ25hYmxlRnJvbShlLmdldENsYXNzKCkpKTsKICAgICAgICB9\nCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZlBsYW4uc2V0SGludChoaW50\nTmFtZSwgLTEpOwogICAgICAgICAgICBmUGxhbi5zZXRIaW50KGhpbnROYW1l\nLCAtMik7CiAgICAgICAgICAgIGZhaWwoIkV4cGVjdGluZyBhIGEgSWxsZWdh\nbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2Vw\ndGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2VydFRydWUoIkNhdWdodCBleHBl\nY3RlZCBleGNlcHRpb24iLAogICAgICAgICAgICAgICAgSWxsZWdhbEFyZ3Vt\nZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNzaWduYWJsZUZyb20oZS5nZXRDbGFz\ncygpKSk7CiAgICAgICAgfQogICAgICAgIGlmKGluVHJhbnNhY3Rpb24pCiAg\nICAgICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkucm9sbGJhY2soKTsKICAg\nICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIHByaXZhdGUgdm9pZCB3cml0\nZUxvY2tNb2RlSGludFRlc3QoSkRCQ0ZldGNoUGxhbiBmUGxhbiwKICAgICAg\nICBKREJDRmV0Y2hDb25maWd1cmF0aW9uSW1wbCBmQ29uZmlnLCBTdHJpbmcg\naGludCwgT2JqZWN0IHZhbHVlLAogICAgICAgIE9iamVjdCBleHBlY3RlZE1v\nZGUsIE9iamVjdCBleHBlY3RlZExldmVsKSB7CiAgICAgICAgZlBsYW4uc2V0\nSGludChoaW50LCB2YWx1ZSk7CiAgICAgICAgT2JqZWN0IGdldFZhbHVlID0g\nZlBsYW4uZ2V0SGludChoaW50KTsKICAgICAgICBhc3NlcnRFcXVhbHModmFs\ndWUuZ2V0Q2xhc3MoKSwgZ2V0VmFsdWUuZ2V0Q2xhc3MoKSk7CiAgICAgICAg\nYXNzZXJ0RXF1YWxzKHZhbHVlLCBnZXRWYWx1ZSk7CiAgICAgICAgYXNzZXJ0\nRXF1YWxzKGV4cGVjdGVkTW9kZSwgZlBsYW4uZ2V0V3JpdGVMb2NrTW9kZSgp\nKTsKICAgICAgICBhc3NlcnRFcXVhbHMoZXhwZWN0ZWRMZXZlbCwgZkNvbmZp\nZy5nZXRXcml0ZUxvY2tMZXZlbCgpKTsKICAgIH0KCiAgICAvKiBHb29kCiAg\nICAgKiBUZXN0IHByZWNlbmRlbmNlIG9yZGVyIG9mIHNpbWlsaWFyL2VxdWl2\nYWxlbnQgTG9ja1RpbWVvdXQgaGludHMuCiAgICAgKi8KICAgIHB1YmxpYyB2\nb2lkIHRlc3RTaW1pbGlhckxvY2tUaW1lb3V0SGludHMoKSB7CiAgICAgICAg\nU3RyaW5nIEphdmF4TG9ja1RpbWVvdXQgPSAiamF2YXgucGVyc2lzdGVuY2Uu\nbG9jay50aW1lb3V0IjsKICAgICAgICBTdHJpbmcgT3BlbkpQQUxvY2tUaW1l\nb3V0ID0gIm9wZW5qcGEuTG9ja1RpbWVvdXQiOwogICAgICAgIFN0cmluZyBG\nZXRjaFBsYW5Mb2NrVGltZW91dCA9ICJvcGVuanBhLkZldGNoUGxhbi5Mb2Nr\nVGltZW91dCI7CgogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3Jl\nYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5h\nZ2VyIG9lbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlcillbS5nZXREZWxlZ2F0\nZSgpOwoKICAgICAgICBzaW1pbGFyTG9ja1RpbWVvdXRIaW50c1Rlc3Qob2Vt\nLCBKYXZheExvY2tUaW1lb3V0LCAzMzMsCiAgICAgICAgICAgIEphdmF4TG9j\na1RpbWVvdXQsIDMzMywKICAgICAgICAgICAgT3BlbkpQQUxvY2tUaW1lb3V0\nLCAxMTEsCiAgICAgICAgICAgIEZldGNoUGxhbkxvY2tUaW1lb3V0LCAyMjIp\nOwogICAgICAgIHNpbWlsYXJMb2NrVGltZW91dEhpbnRzVGVzdChvZW0sIEph\ndmF4TG9ja1RpbWVvdXQsIDMzMywKICAgICAgICAgICAgT3BlbkpQQUxvY2tU\naW1lb3V0LCAxMTEsCiAgICAgICAgICAgIEZldGNoUGxhbkxvY2tUaW1lb3V0\nLCAyMjIsCiAgICAgICAgICAgIEphdmF4TG9ja1RpbWVvdXQsIDMzMyk7CiAg\nICAgICAgc2ltaWxhckxvY2tUaW1lb3V0SGludHNUZXN0KG9lbSwgSmF2YXhM\nb2NrVGltZW91dCwgMzMzLAogICAgICAgICAgICBKYXZheExvY2tUaW1lb3V0\nLCAzMzMsCiAgICAgICAgICAgIEZldGNoUGxhbkxvY2tUaW1lb3V0LCAyMjIs\nCiAgICAgICAgICAgIE9wZW5KUEFMb2NrVGltZW91dCwgMTExKTsKICAgICAg\nICBzaW1pbGFyTG9ja1RpbWVvdXRIaW50c1Rlc3Qob2VtLCBGZXRjaFBsYW5M\nb2NrVGltZW91dCwgMjIyLAogICAgICAgICAgICBPcGVuSlBBTG9ja1RpbWVv\ndXQsIDExMSwKICAgICAgICAgICAgRmV0Y2hQbGFuTG9ja1RpbWVvdXQsIDIy\nMik7CiAgICAgICAgc2ltaWxhckxvY2tUaW1lb3V0SGludHNUZXN0KG9lbSwg\nRmV0Y2hQbGFuTG9ja1RpbWVvdXQsIDIyMiwKICAgICAgICAgICAgRmV0Y2hQ\nbGFuTG9ja1RpbWVvdXQsIDIyMiwKICAgICAgICAgICAgT3BlbkpQQUxvY2tU\naW1lb3V0LCAxMTEpOwogICAgICAgIHNpbWlsYXJMb2NrVGltZW91dEhpbnRz\nVGVzdChvZW0sIE9wZW5KUEFMb2NrVGltZW91dCwgMTExLAogICAgICAgICAg\nICBPcGVuSlBBTG9ja1RpbWVvdXQsIDExMSk7CiAgICAgICAgc2ltaWxhckxv\nY2tUaW1lb3V0SGludHNUZXN0KG9lbSwgRmV0Y2hQbGFuTG9ja1RpbWVvdXQs\nIDIyMiwKICAgICAgICAgICAgRmV0Y2hQbGFuTG9ja1RpbWVvdXQsIDIyMik7\nCiAgICAgICAgc2ltaWxhckxvY2tUaW1lb3V0SGludHNUZXN0KG9lbSwgSmF2\nYXhMb2NrVGltZW91dCwgMzMzLAogICAgICAgICAgICBKYXZheExvY2tUaW1l\nb3V0LCAzMzMpOwoKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQoKICAgIEBT\ndXBwcmVzc1dhcm5pbmdzKCJkZXByZWNhdGlvbiIpCiAgICBwcml2YXRlIHZv\naWQgc2ltaWxhckxvY2tUaW1lb3V0SGludHNUZXN0KE9wZW5KUEFFbnRpdHlN\nYW5hZ2VyIG9lbSwgU3RyaW5nIHdpbm5lciwgCiAgICAgICAgT2JqZWN0IGV4\ncGVjdGVkLCBPYmplY3QuLi4gaGludE52YWx1ZXMpIHsKICAgICAgICBKREJD\nRmV0Y2hQbGFuIGZQbGFuID0gKEpEQkNGZXRjaFBsYW4pIG9lbS5wdXNoRmV0\nY2hQbGFuKCk7CiAgICAgICAgSkRCQ0ZldGNoQ29uZmlndXJhdGlvbkltcGwg\nZkNvbmZpZyA9IChKREJDRmV0Y2hDb25maWd1cmF0aW9uSW1wbCkgZlBsYW4K\nICAgICAgICAgICAgLmdldERlbGVnYXRlKCk7CgogICAgICAgIGZvciggaW50\nIGkgPSAwIDsgaSA8IGhpbnROdmFsdWVzLmxlbmd0aCA7IGkgKz0gMikgewog\nICAgICAgICAgICBmUGxhbi5zZXRIaW50KChTdHJpbmcpaGludE52YWx1ZXNb\naV0sIGhpbnROdmFsdWVzW2krMV0pOwogICAgICAgIH0KICAgICAgICBmb3Io\nIGludCBpID0gMCA7IGkgPCBoaW50TnZhbHVlcy5sZW5ndGggOyBpICs9IDIp\nIHsKICAgICAgICAgICAgU3RyaW5nIGhpbnROYW1lID0gKFN0cmluZyloaW50\nTnZhbHVlc1tpXTsKICAgICAgICAgICAgT2JqZWN0IGV4cGVjdGVkVmFsdWUg\nPSBoaW50TnZhbHVlc1tpKzFdOwogICAgICAgICAgICBPYmplY3QgZ2V0VmFs\ndWUgPSBmUGxhbi5nZXRIaW50KGhpbnROYW1lKTsKICAgICAgICAgICAgaWYg\nKGhpbnROYW1lLmVxdWFscyh3aW5uZXIpKSB7CiAgICAgICAgICAgICAgICBh\nc3NlcnRFcXVhbHMoZXhwZWN0ZWRWYWx1ZS5nZXRDbGFzcygpLCBnZXRWYWx1\nZS5nZXRDbGFzcygpKTsKICAgICAgICAgICAgICAgIGFzc2VydEVxdWFscyhl\neHBlY3RlZFZhbHVlLCBnZXRWYWx1ZSk7CiAgICAgICAgICAgIH0gCiAgICAg\nICAgfQogICAgICAgIGFzc2VydEVxdWFscyhleHBlY3RlZCwgZlBsYW4uZ2V0\nTG9ja1RpbWVvdXQoKSk7CiAgICAgICAgYXNzZXJ0RXF1YWxzKGV4cGVjdGVk\nLCBmQ29uZmlnLmdldExvY2tUaW1lb3V0KCkpOwoKICAgICAgICBvZW0ucG9w\nRmV0Y2hQbGFuKCk7CiAgICB9CgogICAgLyogR29vZAogICAgICogVGVzdCBw\ncmVjZW5kZW5jZSBvcmRlciBvZiBzaW1pbGlhci9lcXVpdmFsZW50IFF1ZXJ5\nVGltZW91dCBoaW50cy4KICAgICAqLwogICAgcHVibGljIHZvaWQgdGVzdFNp\nbWlsaWFyUXVlcnlUaW1lb3V0SGludHMoKSB7CiAgICAgICAgU3RyaW5nIEph\ndmF4UXVlcnlUaW1lb3V0ID0gImphdmF4LnBlcnNpc3RlbmNlLnF1ZXJ5LnRp\nbWVvdXQiOwogICAgICAgIFN0cmluZyBPcGVuSlBBUXVlcnlUaW1lb3V0ID0g\nIm9wZW5qcGEuUXVlcnlUaW1lb3V0IjsKICAgICAgICBTdHJpbmcgRmV0Y2hQ\nbGFuUXVlcnlUaW1lb3V0ID0gIm9wZW5qcGEuRmV0Y2hQbGFuLlF1ZXJ5VGlt\nZW91dCI7CgogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRl\nRW50aXR5TWFuYWdlcigpOwogICAgICAgIE9wZW5KUEFFbnRpdHlNYW5hZ2Vy\nIG9lbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlcillbS5nZXREZWxlZ2F0ZSgp\nOwoKICAgICAgICBzaW1pbGFyUXVlcnlUaW1lb3V0SGludHNUZXN0KG9lbSwg\nSmF2YXhRdWVyeVRpbWVvdXQsIDMzMywgCiAgICAgICAgICAgIEphdmF4UXVl\ncnlUaW1lb3V0LCAzMzMsCiAgICAgICAgICAgIE9wZW5KUEFRdWVyeVRpbWVv\ndXQsIDExMSwKICAgICAgICAgICAgRmV0Y2hQbGFuUXVlcnlUaW1lb3V0LCAy\nMjIpOwogICAgICAgIHNpbWlsYXJRdWVyeVRpbWVvdXRIaW50c1Rlc3Qob2Vt\nLCBKYXZheFF1ZXJ5VGltZW91dCwgMzMzLCAKICAgICAgICAgICAgT3BlbkpQ\nQVF1ZXJ5VGltZW91dCwgMTExLAogICAgICAgICAgICBGZXRjaFBsYW5RdWVy\neVRpbWVvdXQsIDIyMiwKICAgICAgICAgICAgSmF2YXhRdWVyeVRpbWVvdXQs\nIDMzMyk7CiAgICAgICAgc2ltaWxhclF1ZXJ5VGltZW91dEhpbnRzVGVzdChv\nZW0sIEphdmF4UXVlcnlUaW1lb3V0LCAzMzMsIAogICAgICAgICAgICBKYXZh\neFF1ZXJ5VGltZW91dCwgMzMzLAogICAgICAgICAgICBGZXRjaFBsYW5RdWVy\neVRpbWVvdXQsIDIyMiwKICAgICAgICAgICAgT3BlbkpQQVF1ZXJ5VGltZW91\ndCwgMTExKTsKICAgICAgICBzaW1pbGFyUXVlcnlUaW1lb3V0SGludHNUZXN0\nKG9lbSwgRmV0Y2hQbGFuUXVlcnlUaW1lb3V0LCAyMjIsIAogICAgICAgICAg\nICBPcGVuSlBBUXVlcnlUaW1lb3V0LCAxMTEsCiAgICAgICAgICAgIEZldGNo\nUGxhblF1ZXJ5VGltZW91dCwgMjIyKTsKICAgICAgICBzaW1pbGFyUXVlcnlU\naW1lb3V0SGludHNUZXN0KG9lbSwgRmV0Y2hQbGFuUXVlcnlUaW1lb3V0LCAy\nMjIsIAogICAgICAgICAgICBGZXRjaFBsYW5RdWVyeVRpbWVvdXQsIDIyMiwK\nICAgICAgICAgICAgT3BlbkpQQVF1ZXJ5VGltZW91dCwgMTExKTsKICAgICAg\nICBzaW1pbGFyUXVlcnlUaW1lb3V0SGludHNUZXN0KG9lbSwgT3BlbkpQQVF1\nZXJ5VGltZW91dCwgMTExLCAKICAgICAgICAgICAgT3BlbkpQQVF1ZXJ5VGlt\nZW91dCwgMTExKTsKICAgICAgICBzaW1pbGFyUXVlcnlUaW1lb3V0SGludHNU\nZXN0KG9lbSwgRmV0Y2hQbGFuUXVlcnlUaW1lb3V0LCAyMjIsIAogICAgICAg\nICAgICBGZXRjaFBsYW5RdWVyeVRpbWVvdXQsIDIyMik7CiAgICAgICAgc2lt\naWxhclF1ZXJ5VGltZW91dEhpbnRzVGVzdChvZW0sIEphdmF4UXVlcnlUaW1l\nb3V0LCAzMzMsIAogICAgICAgICAgICBKYXZheFF1ZXJ5VGltZW91dCwgMzMz\nKTsKCiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICBAU3VwcHJlc3NX\nYXJuaW5ncygiZGVwcmVjYXRpb24iKQogICAgcHJpdmF0ZSB2b2lkIHNpbWls\nYXJRdWVyeVRpbWVvdXRIaW50c1Rlc3QoT3BlbkpQQUVudGl0eU1hbmFnZXIg\nb2VtLCBTdHJpbmcgd2lubmVyLCAKICAgICAgICBPYmplY3QgZXhwZWN0ZWQs\nIE9iamVjdC4uLiBoaW50TnZhbHVlcykgewogICAgICAgIEpEQkNGZXRjaFBs\nYW4gZlBsYW4gPSAoSkRCQ0ZldGNoUGxhbikgb2VtLnB1c2hGZXRjaFBsYW4o\nKTsKICAgICAgICBKREJDRmV0Y2hDb25maWd1cmF0aW9uSW1wbCBmQ29uZmln\nID0gKEpEQkNGZXRjaENvbmZpZ3VyYXRpb25JbXBsKSBmUGxhbgogICAgICAg\nICAgICAuZ2V0RGVsZWdhdGUoKTsKCiAgICAgICAgZm9yKCBpbnQgaSA9IDAg\nOyBpIDwgaGludE52YWx1ZXMubGVuZ3RoIDsgaSArPSAyKSB7CiAgICAgICAg\nICAgIGZQbGFuLnNldEhpbnQoKFN0cmluZyloaW50TnZhbHVlc1tpXSwgaGlu\ndE52YWx1ZXNbaSsxXSk7CiAgICAgICAgfQogICAgICAgIGZvciggaW50IGkg\nPSAwIDsgaSA8IGhpbnROdmFsdWVzLmxlbmd0aCA7IGkgKz0gMikgewogICAg\nICAgICAgICBTdHJpbmcgaGludE5hbWUgPSAoU3RyaW5nKWhpbnROdmFsdWVz\nW2ldOwogICAgICAgICAgICBPYmplY3QgZXhwZWN0ZWRWYWx1ZSA9IGhpbnRO\ndmFsdWVzW2krMV07CiAgICAgICAgICAgIE9iamVjdCBnZXRWYWx1ZSA9IGZQ\nbGFuLmdldEhpbnQoaGludE5hbWUpOwogICAgICAgICAgICBpZiAoaGludE5h\nbWUuZXF1YWxzKHdpbm5lcikpIHsKICAgICAgICAgICAgICAgIGFzc2VydEVx\ndWFscyhleHBlY3RlZFZhbHVlLmdldENsYXNzKCksIGdldFZhbHVlLmdldENs\nYXNzKCkpOwogICAgICAgICAgICAgICAgYXNzZXJ0RXF1YWxzKGV4cGVjdGVk\nVmFsdWUsIGdldFZhbHVlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAg\nICAgICBhc3NlcnRFcXVhbHMoZXhwZWN0ZWQsIGZQbGFuLmdldFF1ZXJ5VGlt\nZW91dCgpKTsKICAgICAgICBhc3NlcnRFcXVhbHMoZXhwZWN0ZWQsIGZDb25m\naWcuZ2V0UXVlcnlUaW1lb3V0KCkpOwoKICAgICAgICBvZW0ucG9wRmV0Y2hQ\nbGFuKCk7CiAgICB9CgogICAgLyoKICAgICAqIFRlc3QgdmFyaW91cyBmb3Jt\ncyBzZXRIaW50IGFyZ3VtZW50LgogICAgICovCiAgICBAU3VwcHJlc3NXYXJu\naW5ncygiZGVwcmVjYXRpb24iKQogICAgcHVibGljIHZvaWQgdGVzdFNldEhp\nbnRBZGRIaW50c0FyZ3VtZW50KCkgewogICAgICAgIEVudGl0eU1hbmFnZXIg\nZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyIG9lbSA9IChPcGVuSlBBRW50aXR5TWFuYWdlcill\nbS5nZXREZWxlZ2F0ZSgpOwogICAgICAgIEpEQkNGZXRjaFBsYW4gZlBsYW4g\nPSAoSkRCQ0ZldGNoUGxhbikgb2VtLmdldEZldGNoUGxhbigpOwoKICAgICAg\nICBmUGxhbi5zZXRIaW50KCJ1bnJlY29nbml6ZWQucHJvcC5uYW1lIiwgInVu\ncmVjb2duaXplZC5wcm9wLnZhbHVlIik7CiAgICAgICAgYXNzZXJ0RXF1YWxz\nKG51bGwsIGZQbGFuLmdldEhpbnQoInVucmVjb2duaXplZC5wcm9wLm5hbWUi\nKSk7CgoKICAgICAgICBPcGVuSlBBQ29uZmlndXJhdGlvbiBjb25mID0gb2Vt\nLmdldENvbmZpZ3VyYXRpb24oKTsKICAgICAgICBpZiAoY29uZiBpbnN0YW5j\nZW9mIEpEQkNDb25maWd1cmF0aW9uCiAgICAgICAgICAgICYmICgoSkRCQ0Nv\nbmZpZ3VyYXRpb24pIGNvbmYpLmdldERCRGljdGlvbmFyeUluc3RhbmNlKCkK\nICAgICAgICAgICAgICAgIC5zdXBwb3J0c0lzb2xhdGlvbkZvclVwZGF0ZSgp\nKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBmUGxhbi5z\nZXRIaW50KCJvcGVuanBhLmpkYmMuVHJhbnNhY3Rpb25Jc29sYXRpb24iLCA5\nOTk5KTsKICAgICAgICAgICAgICAgIGZhaWwoIkV4cGVjdGluZyBhIGEgSWxs\nZWdhbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwogICAgICAgICAgICB9IGNhdGNo\nIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICAgICAgYXNzZXJ0VHJ1ZSgi\nQ2F1Z2h0IGV4cGVjdGVkIGV4Y2VwdGlvbiIsCiAgICAgICAgICAgICAgICAg\nICAgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNzaWduYWJs\nZUZyb20oZS5nZXRDbGFzcygpKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9\nCgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoIm9w\nZW5qcGEuRmV0Y2hQbGFuLklzb2xhdGlvbiIsIG5ldyBJbnRlZ2VyKDEzKSk7\nCiAgICAgICAgICAgIGZQbGFuLnNldEhpbnQoIm9wZW5qcGEuRmV0Y2hQbGFu\nLklzb2xhdGlvbiIsIG5ldyBJbnRlZ2VyKDE0KSk7CiAgICAgICAgICAgIGZh\naWwoIkV4cGVjdGluZyBhIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi4iKTsK\nICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBh\nc3NlcnRUcnVlKCJDYXVnaHQgZXhwZWN0ZWQgZXhjZXB0aW9uIiwKICAgICAg\nICAgICAgICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5jbGFzcy5pc0Fz\nc2lnbmFibGVGcm9tKGUuZ2V0Q2xhc3MoKSkpOwogICAgICAgIH0KICAgICAg\nICBlbS5jbG9zZSgpOwogICAgfQoKICAgIC8qCiAgICAgKiBUZXN0IGludmFs\naWQgaGludCB2aWEgUXVlcnkgaW50ZXJmYWNlLgogICAgICovCiAgICBwdWJs\naWMgdm9pZCB0ZXN0SW52YWxpZFF1ZXJ5U2V0SGludCgpIHsKICAgICAgICBF\nbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsK\nICAgICAgICBPcGVuSlBBRW50aXR5TWFuYWdlciBvZW0gPSAoT3BlbkpQQUVu\ndGl0eU1hbmFnZXIpZW0uZ2V0RGVsZWdhdGUoKTsKICAgICAgICAgICAgKChF\nbnRpdHlNYW5hZ2VySW1wbCkgb2VtKS5nZXRCcm9rZXIoKS5nZXRGZXRjaENv\nbmZpZ3VyYXRpb24oKTsKCiAgICAgICAgUXVlcnkgcSA9IGVtLmNyZWF0ZVF1\nZXJ5KCJzZWxlY3QgbyBmcm9tIExvY2tFbXBsb3llZSBvIik7CiAgICAgICAg\ndHJ5IHsKICAgICAgICAgICAgcS5zZXRIaW50KCJvcGVuanBhLkZldGNoUGxh\nbi5Jc29sYXRpb24iLCAieXl5eXkiKTsKICAgICAgICAgICAgZmFpbCgiRXhw\nZWN0aW5nIGEgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLiIpOwogICAgICAg\nIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGFzc2VydFRy\ndWUoIkNhdWdodCBleHBlY3RlZCBleGNlcHRpb24iLAogICAgICAgICAgICAg\nICAgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLmNsYXNzLmlzQXNzaWduYWJs\nZUZyb20oZS5nZXRDbGFzcygpKSk7CiAgICAgICAgfQogICAgICAgIGVtLmNs\nb3NlKCk7CiAgICB9Cn0K\n","encoding":"base64"}

