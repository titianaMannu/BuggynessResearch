{"sha":"e67fd6cf0c663342b9349421d0f97784f082f096","node_id":"MDQ6QmxvYjIwNjM2NDplNjdmZDZjZjBjNjYzMzQyYjkzNDk0MjFkMGY5Nzc4NGYwODJmMDk2","size":5205,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/e67fd6cf0c663342b9349421d0f97784f082f096","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5sb2NrbWdyOwoK\naW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXI7CmltcG9y\ndCBqYXZheC5wZXJzaXN0ZW5jZS5Mb2NrTW9kZVR5cGU7CmltcG9ydCBqYXZh\neC5wZXJzaXN0ZW5jZS5RdWVyeTsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEucGVyc2lzdGVuY2UuRmV0Y2hQbGFuOwppbXBvcnQgb3JnLmFwYWNoZS5v\ncGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRpdHlNYW5hZ2VyOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLk9wZW5KUEFFbnRp\ndHlNYW5hZ2VyU1BJOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNp\nc3RlbmNlLk9wZW5KUEFRdWVyeTsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5wZXJzaXN0ZW5jZS5UcmFuc2FjdGlvblJlcXVpcmVkRXhjZXB0aW9uOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnRlc3QuQWxs\nb3dGYWlsdXJlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnBlcnNpc3Rl\nbmNlLnRlc3QuU1FMTGlzdGVuZXJUZXN0Q2FzZTsKCi8qKgogKiBUZXN0cyB0\naGUgbG9jayBtb2RlIG9uIG5hbWVkIHF1ZXJ5IGVtaXRzIGEgRk9SIFVQREFU\nRSBjbGF1c2UgaW4gdGFyZ2V0IFNRTAogKiBxdWVyeS4KICogCiAqIAogKi8K\ncHVibGljIGNsYXNzIFRlc3ROYW1lZFF1ZXJ5TG9ja01vZGUgZXh0ZW5kcyBT\nUUxMaXN0ZW5lclRlc3RDYXNlIHsKICAgIFN0cmluZyBsb2NrQ2xhdXNlID0g\nIkZPUiBVUERBVEUiOwogICAgCiAgICBwdWJsaWMgdm9pZCBzZXRVcCgpIHsK\nICAgICAgICBzdXBlci5zZXRVcChDTEVBUl9UQUJMRVMsIExvY2tFbXBsb3ll\nZS5jbGFzcywgCiAgICAgICAgICAgICJvcGVuanBhLkxvY2tNYW5hZ2VyIiwg\nInBlc3NpbWlzdGljIiwgCiAgICAgICAgICAgICJvcGVuanBhLk9wdGltaXN0\naWMiLCAiZmFsc2UiCiAgICAgICAgICAgICk7CiAgICAgICAgbG9ja0NsYXVz\nZSA9IGdldEZvclVwZGF0ZUNsYXVzZSgpOwogICAgfQoKICAgIHB1YmxpYyB2\nb2lkIHRlc3RGb3JVcGRhdGVDbGF1c2VQcmVzZW50SW5OYW1lZFF1ZXJ5V2l0\naExvY2tNb2RlKCkgewogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYu\nY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0\naW9uKCkuYmVnaW4oKTsKICAgICAgICBhc3NlcnRDbGF1c2VQcmVzZW50SW5T\nUUwobG9ja0NsYXVzZSwgZW0uY3JlYXRlTmFtZWRRdWVyeSgiZmluZEVtcGxv\neWVlQnlJZFdpdGhMb2NrIikuc2V0UGFyYW1ldGVyKCJpZCIsIDApKTsKICAg\nICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLnJvbGxiYWNrKCk7CiAgICAgICAg\nZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIGFzc2VydENs\nYXVzZVByZXNlbnRJblNRTChsb2NrQ2xhdXNlLCBlbS5jcmVhdGVOYW1lZFF1\nZXJ5KCJmaW5kRW1wbG95ZWVCeUlkV2l0aExvY2siKS5zZXRQYXJhbWV0ZXIo\nImlkIiwgMCkpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkucm9sbGJh\nY2soKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAg\nICAgICAgYXNzZXJ0Q2xhdXNlUHJlc2VudEluU1FMKGxvY2tDbGF1c2UsIGVt\nLmNyZWF0ZU5hbWVkUXVlcnkoImZpbmRFbXBsb3llZUJ5SWRXaXRoTG9jayIp\nLnNldFBhcmFtZXRlcigiaWQiLCAwKSk7CiAgICAgICAgZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5yb2xsYmFjaygpOwogICAgfQoKICAgIEBBbGxvd0ZhaWx1cmUK\nICAgIHB1YmxpYyB2b2lkIHRlc3ROYW1lZFF1ZXJ5V2l0aExvY2tNb2RlTXVz\ndEV4ZWN1dGVJblRyYW5zYWN0aW9uKCkgewogICAgICAgIEVudGl0eU1hbmFn\nZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIC8v\nIGV4ZWN1dGUgd2l0aG91dCBhIHRyYW5zYWN0aW9uCiAgICAgICAgIHRyeSB7\nCiAgICAgICAgIGVtLmNyZWF0ZU5hbWVkUXVlcnkoImZpbmRFbXBsb3llZUJ5\nSWRXaXRoTG9jayIpLnNldFBhcmFtZXRlcigiaWQiLCAwKS5nZXRSZXN1bHRM\naXN0KCk7CiAgICAgICAgIGZhaWwoIkV4cGVjdGVkICIgKyBUcmFuc2FjdGlv\nblJlcXVpcmVkRXhjZXB0aW9uLmNsYXNzLmdldE5hbWUoKSk7CiAgICAgICAg\nIH0gY2F0Y2ggKFRyYW5zYWN0aW9uUmVxdWlyZWRFeGNlcHRpb24gZSkgewog\nICAgICAgICAvLyBFeHBlY3RlZAogICAgICAgICB9CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgdGVzdEZvclVwZGF0ZUNsYXVzZVByZXNlbnRJblF1ZXJ5V2l0\naERlZmF1bHQoKSB7CiAgICAgICAgRW50aXR5TWFuYWdlciBlbSA9IGVtZi5j\ncmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rp\nb24oKS5iZWdpbigpOwogICAgICAgIGFzc2VydENsYXVzZVByZXNlbnRJblNR\nTChsb2NrQ2xhdXNlLCBlbS5jcmVhdGVOYW1lZFF1ZXJ5KCJmaW5kRW1wbG95\nZWVCeUlkIikuc2V0UGFyYW1ldGVyKCJpZCIsIDApKTsKICAgICAgICBhc3Nl\ncnRDbGF1c2VQcmVzZW50SW5TUUwobG9ja0NsYXVzZSwgZW0uY3JlYXRlTmFt\nZWRRdWVyeSgiZmluZEVtcGxveWVlQnlJZCIpLnNldFBhcmFtZXRlcigiaWQi\nLCAwKSk7ICAgICAgICAKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNv\nbW1pdCgpOwogICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCB0ZXN0Rm9yVXBk\nYXRlQ2xhdXNlQWJzZW50SW5RdWVyeVdpdGhGZXRjaFBsYW5Ob25lTG9ja01v\nZGUoKSB7CiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXJTUEkgZW0gPSBl\nbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5z\nYWN0aW9uKCkuYmVnaW4oKTsKICAgICAgICAKICAgICAgICBPcGVuSlBBUXVl\ncnk8Pz4gcSA9IGVtLmNyZWF0ZU5hbWVkUXVlcnkoImZpbmRFbXBsb3llZUJ5\nSWQiKS5zZXRQYXJhbWV0ZXIoImlkIiwgMCk7IAogICAgICAgIEZldGNoUGxh\nbiBmcCA9IHEuZ2V0RmV0Y2hQbGFuKCk7CiAgICAgICAgZnAuc2V0UmVhZExv\nY2tNb2RlKExvY2tNb2RlVHlwZS5OT05FKTsKICAgICAgICBhc3NlcnRDbGF1\nc2VBYnNlbnRJblNRTChsb2NrQ2xhdXNlLCBxKTsKICAgICAgICAKICAgICAg\nICBxID0gZW0uY3JlYXRlTmFtZWRRdWVyeSgiZmluZEVtcGxveWVlQnlJZFdp\ndGhOb0xvY2siKS5zZXRQYXJhbWV0ZXIoImlkIiwgMCk7IAogICAgICAgIGZw\nID0gcS5nZXRGZXRjaFBsYW4oKTsKICAgICAgICBmcC5zZXRSZWFkTG9ja01v\nZGUoTG9ja01vZGVUeXBlLk5PTkUpOwogICAgICAgIGFzc2VydENsYXVzZUFi\nc2VudEluU1FMKGxvY2tDbGF1c2UsIHEpOwogICAgICAgIAogICAgICAgIGVt\nLmdldFRyYW5zYWN0aW9uKCkuY29tbWl0KCk7CiAgICB9CgogICAgQEFsbG93\nRmFpbHVyZQogICAgcHVibGljIHZvaWQgdGVzdEZvclVwZGF0ZUNsYXVzZUFi\nc2VudEluUXVlcnlXaXRoRXhwbGljdE5vTG9jaygpIHsKICAgICAgICBFbnRp\ndHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0eU1hbmFnZXIoKTsKICAg\nICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAgICAgICAgYXNz\nZXJ0Q2xhdXNlQWJzZW50SW5TUUwobG9ja0NsYXVzZSwgZW0uY3JlYXRlTmFt\nZWRRdWVyeSgiZmluZEVtcGxveWVlQnlJZFdpdGhOb0xvY2siKS5zZXRQYXJh\nbWV0ZXIoImlkIiwgMCkpOwogICAgICAgIGFzc2VydENsYXVzZUFic2VudElu\nU1FMKGxvY2tDbGF1c2UsIGVtLmNyZWF0ZU5hbWVkUXVlcnkoImZpbmRFbXBs\nb3llZUJ5SWRXaXRoTm9Mb2NrIikuc2V0UGFyYW1ldGVyKCJpZCIsIDApKTsK\nICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmNvbW1pdCgpOwogICAgfQoK\nICAgIFN0cmluZyBnZXRMYXN0U1FMKCkgewogICAgICAgIFN0cmluZyBsYXN0\nID0gc3FsLmdldChnZXRTUUxDb3VudCgpIC0gMSk7CiAgICAgICAgYXNzZXJ0\nTm90TnVsbCgiTm8gbGFzdCBzcWwgZm91bmQiLCBsYXN0KTsKICAgICAgICBy\nZXR1cm4gbGFzdDsKICAgIH0KCiAgICB2b2lkIGFzc2VydENsYXVzZVByZXNl\nbnRJblNRTChTdHJpbmcgY2xhdXNlLCBRdWVyeSBxKSB7CiAgICAgICAgcS5n\nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgU3RyaW5nIGxhc3QgPSBnZXRMYXN0\nU1FMKCk7CiAgICAgICAgYXNzZXJ0VHJ1ZShjbGF1c2UgKyAiIGlzIG5vdCBw\ncmVzZW50IGluICIgKyBsYXN0LCBsYXN0LnRvVXBwZXJDYXNlKCkuaW5kZXhP\nZihjbGF1c2UpICE9IC0xKTsKICAgIH0KCiAgICB2b2lkIGFzc2VydENsYXVz\nZUFic2VudEluU1FMKFN0cmluZyBjbGF1c2UsIFF1ZXJ5IHEpIHsKICAgICAg\nICBxLmdldFJlc3VsdExpc3QoKTsKICAgICAgICBTdHJpbmcgbGFzdCA9IGdl\ndExhc3RTUUwoKTsKICAgICAgICBhc3NlcnRUcnVlKGNsYXVzZSArICIgaXMg\nbm90IGFic2VudCBpbiAiICsgbGFzdCwgbGFzdC50b1VwcGVyQ2FzZSgpLmlu\nZGV4T2YoY2xhdXNlKSA9PSAtMSk7CiAgICB9Cn0K\n","encoding":"base64"}

