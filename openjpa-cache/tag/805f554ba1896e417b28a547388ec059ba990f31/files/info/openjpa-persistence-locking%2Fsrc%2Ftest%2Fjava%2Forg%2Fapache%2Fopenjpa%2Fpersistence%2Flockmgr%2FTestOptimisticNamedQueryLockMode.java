{"sha":"2850dd998bf49b4f8cb663915defc2f479beacfc","node_id":"MDQ6QmxvYjIwNjM2NDoyODUwZGQ5OThiZjQ5YjRmOGNiNjYzOTE1ZGVmYzJmNDc5YmVhY2Zj","size":5423,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/2850dd998bf49b4f8cb663915defc2f479beacfc","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuCiAqLwpwYWNr\nYWdlIG9yZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5sb2NrbWdyOwoK\naW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXI7CmltcG9y\ndCBqYXZheC5wZXJzaXN0ZW5jZS5Mb2NrTW9kZVR5cGU7CmltcG9ydCBqYXZh\neC5wZXJzaXN0ZW5jZS5RdWVyeTsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5jb25mLkpEQkNDb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMuc3FsLkRCRGljdGlvbmFyeTsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5wZXJzaXN0ZW5jZS5GZXRjaFBsYW47CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQUVudGl0\neU1hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEucGVyc2lzdGVu\nY2UuT3BlbkpQQUVudGl0eU1hbmFnZXJTUEk7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEucGVyc2lzdGVuY2UuT3BlbkpQQVF1ZXJ5OwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLnBlcnNpc3RlbmNlLnRlc3QuU1FMTGlzdGVuZXJU\nZXN0Q2FzZTsKCi8qKgogKiBUZXN0cyB3aGV0aGVyIHRoZSBsb2NrIG1vZGUg\nb24gbmFtZWQgcXVlcnkgZW1pdHMgYSBGT1IgVVBEQVRFIGNsYXVzZSBpbiB0\nYXJnZXQgU1FMCiAqIHF1ZXJ5IHdoZW4gT3B0aW1pc3RpYz10cnVlIChkZWZh\ndWx0KSwgd2l0aCBwZXNzaW1pc3RpYyBsb2NrIG1hbmFnZXIuCiAqLwpwdWJs\naWMgY2xhc3MgVGVzdE9wdGltaXN0aWNOYW1lZFF1ZXJ5TG9ja01vZGUgZXh0\nZW5kcyBTUUxMaXN0ZW5lclRlc3RDYXNlIHsKICAgIFN0cmluZyBsb2NrQ2xh\ndXNlID0gIkZPUiBVUERBVEUiOyAKICAgIAogICAgcHVibGljIHZvaWQgc2V0\nVXAoKSB7CiAgICAgICAgc3VwZXIuc2V0VXAoQ0xFQVJfVEFCTEVTLCBMb2Nr\nRW1wbG95ZWUuY2xhc3MsIAogICAgICAgICAgICAib3BlbmpwYS5Mb2NrTWFu\nYWdlciIsICJwZXNzaW1pc3RpYyIKICAgICAgICAgICAgKTsKICAgICAgICAg\nbG9ja0NsYXVzZSA9IGdldEZvclVwZGF0ZUNsYXVzZSgpOwogICAgfQoKICAg\nIC8qCiAgICAgKiBPcHRpbWlzdGljPXRydWUsIGJ1dCBhIGxvY2sgbW9kZSBz\ncGVjaWZpZWQgLSBhc3NlcnQgc3RhdGVtZW50IHdpbGwgbG9jay4KICAgICAq\nLwogICAgcHVibGljIHZvaWQgdGVzdEZvclVwZGF0ZUNsYXVzZVByZXNlbnRJ\nbk5hbWVkUXVlcnlXaXRoTG9ja01vZGUoKSB7CiAgICAgICAgRW50aXR5TWFu\nYWdlciBlbSA9IGVtZi5jcmVhdGVFbnRpdHlNYW5hZ2VyKCk7CiAgICAgICAg\nZW0uZ2V0VHJhbnNhY3Rpb24oKS5iZWdpbigpOwogICAgICAgIGFzc2VydENs\nYXVzZVByZXNlbnRJblNRTChsb2NrQ2xhdXNlLCBlbS5jcmVhdGVOYW1lZFF1\nZXJ5KCJmaW5kRW1wbG95ZWVCeUlkV2l0aExvY2siKS5zZXRQYXJhbWV0ZXIo\nImlkIiwgMCkpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkucm9sbGJh\nY2soKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2luKCk7CiAg\nICAgICAgYXNzZXJ0Q2xhdXNlUHJlc2VudEluU1FMKGxvY2tDbGF1c2UsIGVt\nLmNyZWF0ZU5hbWVkUXVlcnkoImZpbmRFbXBsb3llZUJ5SWRXaXRoTG9jayIp\nLnNldFBhcmFtZXRlcigiaWQiLCAwKSk7CiAgICAgICAgZW0uZ2V0VHJhbnNh\nY3Rpb24oKS5yb2xsYmFjaygpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9u\nKCkuYmVnaW4oKTsKICAgICAgICBhc3NlcnRDbGF1c2VQcmVzZW50SW5TUUwo\nbG9ja0NsYXVzZSwgZW0uY3JlYXRlTmFtZWRRdWVyeSgiZmluZEVtcGxveWVl\nQnlJZFdpdGhMb2NrIikuc2V0UGFyYW1ldGVyKCJpZCIsIDApKTsKICAgICAg\nICBlbS5nZXRUcmFuc2FjdGlvbigpLnJvbGxiYWNrKCk7CiAgICAgICAgZW0u\nY2xvc2UoKTsKICAgIH0KCiAgICAvKgogICAgICogT3B0aW1pc3RpYz10cnVl\nLCBidXQgYSBubyBsb2NrIG1vZGUgc3BlY2lmaWVkIC0gYXNzZXJ0IHN0YXRl\nbWVudCBkb2VzIG5vdCBsb2NrLgogICAgICovCiAgICBwdWJsaWMgdm9pZCB0\nZXN0Rm9yVXBkYXRlQ2xhdXNlUHJlc2VudEluUXVlcnlXaXRoRGVmYXVsdCgp\nIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVudGl0\neU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJlZ2lu\nKCk7CiAgICAgICAgYXNzZXJ0Q2xhdXNlQWJzZW50SW5TUUwobG9ja0NsYXVz\nZSwgZW0uY3JlYXRlTmFtZWRRdWVyeSgiZmluZEVtcGxveWVlQnlJZCIpLnNl\ndFBhcmFtZXRlcigiaWQiLCAwKSk7CiAgICAgICAgYXNzZXJ0Q2xhdXNlQWJz\nZW50SW5TUUwobG9ja0NsYXVzZSwgZW0uY3JlYXRlTmFtZWRRdWVyeSgiZmlu\nZEVtcGxveWVlQnlJZCIpLnNldFBhcmFtZXRlcigiaWQiLCAwKSk7CiAgICAg\nICAgCiAgICAgICAgT3BlbkpQQUVudGl0eU1hbmFnZXIgb2VtID0gKE9wZW5K\nUEFFbnRpdHlNYW5hZ2VyKWVtOwogICAgICAgIE9wZW5KUEFRdWVyeTw/PiBx\nID0gb2VtLmNyZWF0ZU5hbWVkUXVlcnkoImZpbmRFbXBsb3llZUJ5SWQiKS5z\nZXRQYXJhbWV0ZXIoImlkIiwgMCk7IAogICAgICAgIEZldGNoUGxhbiBmcCA9\nIHEuZ2V0RmV0Y2hQbGFuKCk7CiAgICAgICAgZnAuc2V0UmVhZExvY2tNb2Rl\nKExvY2tNb2RlVHlwZS5OT05FKTsKCiAgICAgICAgZW0uZ2V0VHJhbnNhY3Rp\nb24oKS5jb21taXQoKTsKICAgICAgICBlbS5jbG9zZSgpOwogICAgfQogICAg\nCiAgICAvKgogICAgICogT3B0aW1pc3RpYz10cnVlLCBsb2NrIG1vZGUgPSBu\nb25lIHNldCBleHBsaWNpdGx5IG9uIHRoZSBmZXRjaCBwbGFuLgogICAgICov\nCiAgICBwdWJsaWMgdm9pZCB0ZXN0Rm9yVXBkYXRlQ2xhdXNlQWJzZW50SW5R\ndWVyeVdpdGhGZXRjaFBsYW5Ob25lTG9ja01vZGUoKSB7CiAgICAgICAgT3Bl\nbkpQQUVudGl0eU1hbmFnZXJTUEkgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFu\nYWdlcigpOwogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCkuYmVnaW4oKTsK\nICAgICAgICAKICAgICAgICBPcGVuSlBBUXVlcnk8Pz4gcSA9IGVtLmNyZWF0\nZU5hbWVkUXVlcnkoImZpbmRFbXBsb3llZUJ5SWQiKS5zZXRQYXJhbWV0ZXIo\nImlkIiwgMCk7IAogICAgICAgIEZldGNoUGxhbiBmcCA9IHEuZ2V0RmV0Y2hQ\nbGFuKCk7CiAgICAgICAgZnAuc2V0UmVhZExvY2tNb2RlKExvY2tNb2RlVHlw\nZS5OT05FKTsKICAgICAgICBhc3NlcnRDbGF1c2VBYnNlbnRJblNRTChsb2Nr\nQ2xhdXNlLCBxKTsKICAgICAgICAKICAgICAgICBxID0gZW0uY3JlYXRlTmFt\nZWRRdWVyeSgiZmluZEVtcGxveWVlQnlJZFdpdGhOb0xvY2siKS5zZXRQYXJh\nbWV0ZXIoImlkIiwgMCk7IAogICAgICAgIGZwID0gcS5nZXRGZXRjaFBsYW4o\nKTsKICAgICAgICBmcC5zZXRSZWFkTG9ja01vZGUoTG9ja01vZGVUeXBlLk5P\nTkUpOwogICAgICAgIGFzc2VydENsYXVzZUFic2VudEluU1FMKGxvY2tDbGF1\nc2UsIHEpOwogICAgICAgIAogICAgICAgIGVtLmdldFRyYW5zYWN0aW9uKCku\nY29tbWl0KCk7CiAgICAgICAgZW0uY2xvc2UoKTsKICAgIH0KCiAgICAvKgog\nICAgKiBPcHRpbWlzdGljID0gZmFsc2UsIGV4cGxpY2l0IG5vIGxvY2tpbmcg\nb24gdGhlIG5hbWVkIHF1ZXJ5CiAgICAqLwogICAgcHVibGljIHZvaWQgdGVz\ndEZvclVwZGF0ZUNsYXVzZUFic2VudEluUXVlcnlXaXRoRXhwbGljdE5vTG9j\naygpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyIGVtID0gZW1mLmNyZWF0ZUVu\ndGl0eU1hbmFnZXIoKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigpLmJl\nZ2luKCk7CiAgICAgICAgYXNzZXJ0Q2xhdXNlQWJzZW50SW5TUUwobG9ja0Ns\nYXVzZSwgZW0uY3JlYXRlTmFtZWRRdWVyeSgiZmluZEVtcGxveWVlQnlJZFdp\ndGhOb0xvY2siKS5zZXRQYXJhbWV0ZXIoImlkIiwgMCkpOwogICAgICAgIGFz\nc2VydENsYXVzZUFic2VudEluU1FMKGxvY2tDbGF1c2UsIGVtLmNyZWF0ZU5h\nbWVkUXVlcnkoImZpbmRFbXBsb3llZUJ5SWRXaXRoTm9Mb2NrIikuc2V0UGFy\nYW1ldGVyKCJpZCIsIDApKTsKICAgICAgICBlbS5nZXRUcmFuc2FjdGlvbigp\nLmNvbW1pdCgpOwogICAgICAgIGVtLmNsb3NlKCk7CiAgICB9CgogICAgU3Ry\naW5nIGdldExhc3RTUUwoKSB7CiAgICAgICAgU3RyaW5nIGxhc3QgPSBzcWwu\nZ2V0KGdldFNRTENvdW50KCkgLSAxKTsKICAgICAgICBhc3NlcnROb3ROdWxs\nKCJObyBsYXN0IHNxbCBmb3VuZCIsIGxhc3QpOwogICAgICAgIHJldHVybiBs\nYXN0OwogICAgfQoKICAgIHZvaWQgYXNzZXJ0Q2xhdXNlUHJlc2VudEluU1FM\nKFN0cmluZyBjbGF1c2UsIFF1ZXJ5IHEpIHsKICAgICAgICBxLmdldFJlc3Vs\ndExpc3QoKTsKICAgICAgICBTdHJpbmcgbGFzdCA9IGdldExhc3RTUUwoKTsK\nICAgICAgICBhc3NlcnRUcnVlKGNsYXVzZSArICIgaXMgbm90IHByZXNlbnQg\naW4gIiArIGxhc3QsIGxhc3QudG9VcHBlckNhc2UoKS5pbmRleE9mKGNsYXVz\nZSkgIT0gLTEpOwogICAgfQoKICAgIHZvaWQgYXNzZXJ0Q2xhdXNlQWJzZW50\nSW5TUUwoU3RyaW5nIGNsYXVzZSwgUXVlcnkgcSkgewogICAgICAgIHEuZ2V0\nUmVzdWx0TGlzdCgpOwogICAgICAgIFN0cmluZyBsYXN0ID0gZ2V0TGFzdFNR\nTCgpOwogICAgICAgIGFzc2VydFRydWUoY2xhdXNlICsgIiBpcyBub3QgYWJz\nZW50IGluICIgKyBsYXN0LCBsYXN0LnRvVXBwZXJDYXNlKCkuaW5kZXhPZihj\nbGF1c2UpID09IC0xKTsKICAgIH0KfQo=\n","encoding":"base64"}

