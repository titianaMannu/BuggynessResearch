{"sha":"d629d165f0b98e0624beff2a4f39b4ffc9aef923","node_id":"MDQ6QmxvYjIwNjM2NDpkNjI5ZDE2NWYwYjk4ZTA2MjRiZWZmMmE0ZjM5YjRmZmM5YWVmOTIz","size":28433,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/d629d165f0b98e0624beff2a4f39b4ffc9aef923","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5pZGVudGlmaWVyOwoK\naW1wb3J0IGphdmEuaW8uU2VyaWFsaXphYmxlOwoKaW1wb3J0IG9yZy5hcGFj\naGUuY29tbW9ucy5sYW5nLlN0cmluZ1V0aWxzOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmxpYi5pZGVudGlmaWVyLklkZW50aWZpZXI7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEubGliLmlkZW50aWZpZXIuSWRlbnRpZmllcklt\ncGw7CgovKioKICogRW5jYXBzdWxhdGVzIGEgZGF0YWJhc2UgaWRlbnRpZmll\nci4gIFdpdGggYSBmZXcgZXhjZXB0aW9ucywgdGhpcyBjbGFzcyBpcyAKICog\naW50ZW5kZWQgdG8gdHJlYXRlZCBhcyBpbW11dGFibGUuICAKICovCnB1Ymxp\nYyBjbGFzcyBEQklkZW50aWZpZXIgZXh0ZW5kcyBJZGVudGlmaWVySW1wbCBp\nbXBsZW1lbnRzIENsb25lYWJsZSwgSWRlbnRpZmllciwgU2VyaWFsaXphYmxl\nIHsKCiAgICAvKioKICAgICAqIERhdGFiYXNlIGlkZW50aWZpZXIgdHlwZXMu\nCiAgICAgKi8KICAgIHB1YmxpYyBlbnVtIERCSWRlbnRpZmllclR5cGUgewog\nICAgICAgIERFRkFVTFQsCiAgICAgICAgVEFCTEUsCiAgICAgICAgU0NIRU1B\nLAogICAgICAgIENBVEFMT0csCiAgICAgICAgREFUQUJBU0UsCiAgICAgICAg\nQ09MVU1OLAogICAgICAgIENPTFVNTl9ERUZJTklUSU9OLAogICAgICAgIFNF\nUVVFTkNFLAogICAgICAgIENPTlNUUkFJTlQsCiAgICAgICAgSU5ERVgsCiAg\nICAgICAgRk9SRUlHTl9LRVksCiAgICAgICAgQ09OU1RBTlQsCiAgICAgICAg\nTlVMTAogICAgfQogICAgCiAgICAvLyBBcnJheSBmb3IgcXVpY2sgY29tcG91\nbmQgaWRlbnRpZmllciBkZXRlcm1pbmF0aW9uLiAgQ29tcG91bmQgaWRlbnRp\nZmllcnMKICAgIC8vIGNhbiBoYXZlIG11bHRpLXBhcnQgbmFtZXMsIHN1Y2gg\nYXMge3NjaGVtYSwgdGFibGV9IGFuZCBzaG91bGQgYmUgc3RvcmVkCiAgICAv\nLyBhcyBhIFF1YWxpZmllZERCSWRlbnRpZmllci4KICAgIHByaXZhdGUgc3Rh\ndGljIGJvb2xlYW4gX2NvbXBvdW5kSWRlbnRpZmllcltdID0gbmV3IGJvb2xl\nYW5bREJJZGVudGlmaWVyVHlwZS52YWx1ZXMoKS5sZW5ndGhdOwogICAgCiAg\nICBzdGF0aWMgewogICAgICAgIF9jb21wb3VuZElkZW50aWZpZXJbREJJZGVu\ndGlmaWVyVHlwZS5UQUJMRS5vcmRpbmFsKCldID0gdHJ1ZTsKICAgICAgICBf\nY29tcG91bmRJZGVudGlmaWVyW0RCSWRlbnRpZmllclR5cGUuQ09MVU1OLm9y\nZGluYWwoKV0gPSB0cnVlOwogICAgICAgIF9jb21wb3VuZElkZW50aWZpZXJb\nREJJZGVudGlmaWVyVHlwZS5TRVFVRU5DRS5vcmRpbmFsKCldID0gdHJ1ZTsK\nICAgICAgICBfY29tcG91bmRJZGVudGlmaWVyW0RCSWRlbnRpZmllclR5cGUu\nQ09OU1RSQUlOVC5vcmRpbmFsKCldID0gdHJ1ZTsKICAgICAgICBfY29tcG91\nbmRJZGVudGlmaWVyW0RCSWRlbnRpZmllclR5cGUuSU5ERVgub3JkaW5hbCgp\nXSA9IHRydWU7CiAgICB9CiAgICAKICAgIHByaXZhdGUgREJJZGVudGlmaWVy\nVHlwZSBfdHlwZSA9IERCSWRlbnRpZmllclR5cGUuREVGQVVMVDsKICAgIAog\nICAgLyoqCiAgICAgKiBTcGVjaWFsIE5VTEwgaW5kaWNhdG9yIGZvciBkYiBp\nZGVudGlmaWVycy4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBmaW5hbCBE\nQklkZW50aWZpZXIgTlVMTCA9IG5ldyBEQklkZW50aWZpZXIoREJJZGVudGlm\naWVyVHlwZS5OVUxMKTsKICAgIAogICAgLy8gQWxsIGNvbnN0cnVjdG9ycyBh\ncmUgcHJvdGVjdGVkIG9yIHByaXZhdGUuICBTdGF0aWMgZmFjdG9yeSBvcGVy\nYXRpb25zCiAgICAvLyBzaG91bGQgYmUgdXNlZCB0byBjb25zdHJ1Y3QgbmV3\nIGlkZW50aWZpZXJzLgogICAgcHJvdGVjdGVkIERCSWRlbnRpZmllcigpIHsK\nICAgIH0KCiAgICBwcml2YXRlIERCSWRlbnRpZmllcihEQklkZW50aWZpZXJU\neXBlIHR5cGUpIHsKICAgICAgICBzZXRUeXBlKHR5cGUpOwogICAgfQoKICAg\nIHByb3RlY3RlZCBEQklkZW50aWZpZXIoU3RyaW5nIG5hbWUsIERCSWRlbnRp\nZmllclR5cGUgdHlwZSkgewogICAgICAgIHNldFR5cGUodHlwZSk7CiAgICAg\nICAgc2V0TmFtZShuYW1lKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgREJJZGVu\ndGlmaWVyKFN0cmluZyBuYW1lLCBEQklkZW50aWZpZXJUeXBlIHR5cGUsIGJv\nb2xlYW4gZGVsaW1pdCkgewogICAgICAgIHNldFR5cGUodHlwZSk7CiAgICAg\nICAgc2V0TmFtZShuYW1lLCBkZWxpbWl0KTsKICAgIH0KICAgIAogICAgcHJv\ndGVjdGVkIERCSWRlbnRpZmllcihTdHJpbmcgbmFtZSwgYm9vbGVhbiBkZWxp\nbWl0KSB7CiAgICAgICAgc2V0TmFtZShuYW1lLCBkZWxpbWl0KTsKICAgIH0K\nCgogICAgLyoqCiAgICAgKiBTZXQgdGhlIG5hbWUgb2YgdGhlIGlkZW50aWZp\nZXIuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldE5hbWUoU3RyaW5nIG5h\nbWUpIHsKICAgICAgICBzZXROYW1lKG5hbWUsIGZhbHNlKTsKICAgIH0KCiAg\nICAvKioKICAgICAqIFNldCB0aGUgbmFtZSBvZiB0aGlzIGlkZW50aWZpZXIg\nYmFzZWQgdXBvbiBhIGdpdmVuIGlkZW50aWZpZXIuCiAgICAgKi8KICAgIHB1\nYmxpYyB2b2lkIHNldE5hbWUoREJJZGVudGlmaWVyIG5hbWUpIHsKICAgICAg\nICBhc3NlcnROb3ROdWxsKCk7CiAgICAgICAgaWYgKERCSWRlbnRpZmllci5p\nc051bGwobmFtZSkpIHsKICAgICAgICAgICAgc2V0TmFtZUludGVybmFsKG51\nbGwpOwogICAgICAgICAgICBzZXRUeXBlKG5hbWUuZ2V0VHlwZSgpKTsKICAg\nICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBzZXROYW1lSW50\nZXJuYWwobmFtZS5nZXROYW1lSW50ZXJuYWwoKSk7CiAgICAgICAgc2V0VHlw\nZShuYW1lLmdldFR5cGUoKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQg\ndGhlIG5hbWUgb2YgdGhlIGlkZW50aWZpZXIgYW5kIG9wdGlvbmFsbHkgZm9y\nY2UgZGVsaW1pdGluZyBvZiB0aGUgaWRlbnRpZmllci4gCiAgICAgKi8KICAg\nIHB1YmxpYyB2b2lkIHNldE5hbWUoU3RyaW5nIG5hbWUsIGJvb2xlYW4gZGVs\naW1pdCkgewogICAgICAgIGFzc2VydE5vdE51bGwoKTsKICAgICAgICAKICAg\nICAgICAvLyBOb3JtYWxpemUgdGhlIG5hbWUsIGlmIG5lY2Vzc2FyeS4gIERv\nIG5vdCBub3JtYWxpemUgY29uc3RhbnRzIG9yIGNvbHVtbiBkZWZpbml0aW9u\ncy4KICAgICAgICBpZiAoREJJZGVudGlmaWVyVHlwZS5DT05TVEFOVCAhPSBn\nZXRUeXBlKCkgJiYgREJJZGVudGlmaWVyVHlwZS5DT0xVTU5fREVGSU5JVElP\nTiAhPSBnZXRUeXBlKCkpIHsKICAgICAgICAgICAgaWYgKGRlbGltaXQpIHsK\nICAgICAgICAgICAgICAgIG5hbWUgPSBOb3JtYWxpemVyLmRlbGltaXQobmFt\nZSwgdHJ1ZSk7CiAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAg\nICAgIG5hbWUgPSBOb3JtYWxpemVyLm5vcm1hbGl6ZVN0cmluZyhuYW1lKTsK\nICAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc3VwZXIuc2V0TmFt\nZShuYW1lKTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBTZXQgdGhlIHR5\ncGUgb2YgdGhlIGlkZW50aWZpZXIKICAgICAqIEBwYXJhbSB0eXBlCiAgICAg\nKi8KICAgIHByb3RlY3RlZCB2b2lkIHNldFR5cGUoREJJZGVudGlmaWVyVHlw\nZSB0eXBlKSB7CiAgICAgICAgX3R5cGUgPSB0eXBlOwogICAgfQoKICAgIC8q\nKgogICAgICogR2V0IHRoZSBpZGVudGlmaWVyIHR5cGUKICAgICAqIEByZXR1\ncm4gdGhlIGlkZW50aWZpZXIgdHlwZQogICAgICovCiAgICBwdWJsaWMgREJJ\nZGVudGlmaWVyVHlwZSBnZXRUeXBlKCkgewogICAgICAgIHJldHVybiBfdHlw\nZTsKICAgIH0KICAgIAoKICAgIC8qKgogICAgICogU3BsaXRzIGEgc3RyaW5n\nIGRlbGltaXRlZCBieSB0aGUgc3BlY2lmaWVkIGRlbGltaXRlciBvZiBhIGdp\ndmVuIG5hbWUgdHlwZQogICAgICogaW50byBhbiBhcnJheSBvZiBEQklkZW50\naWZpZXIgb2JqZWN0cy4KICAgICAqIEV4YW1wbGU6ICBDT0wxfCJDT0wgMiJ8\nQ09MMyAgZGVsaW09fCAtLT4gREJJZGVudGlmaWVyW117IENPTDEsICJDT0wg\nMiIsIENPTDMgfQogICAgICogQHBhcmFtIG5hbWUKICAgICAqIEBwYXJhbSBp\nZAogICAgICogQHBhcmFtIGRlbGltCiAgICAgKiBAcmV0dXJuCiAgICAgKi8K\nICAgIHB1YmxpYyBzdGF0aWMgREJJZGVudGlmaWVyW10gc3BsaXQoU3RyaW5n\nIG5hbWUsIERCSWRlbnRpZmllclR5cGUgaWQsIFN0cmluZyBkZWxpbSkgewog\nICAgICAgIAogICAgICAgIGlmICghTm9ybWFsaXplci5jYW5TcGxpdChuYW1l\nLCBkZWxpbSkpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBEQklkZW50aWZp\nZXJbXSB7IG5ldyBEQklkZW50aWZpZXIobmFtZSwgaWQpIH07CiAgICAgICAg\nfQogICAgICAgIAogICAgICAgIFN0cmluZ1tdIG5hbWVzID0gTm9ybWFsaXpl\nci5zcGxpdE5hbWUobmFtZSwgZGVsaW0pOwogICAgICAgIGlmIChuYW1lcy5s\nZW5ndGggPT0gMCkgewogICAgICAgICAgICByZXR1cm4gbmV3IERCSWRlbnRp\nZmllcltdIHsgfTsKICAgICAgICB9CiAgICAgICAgREJJZGVudGlmaWVyW10g\nc05hbWVzID0gbmV3IERCSWRlbnRpZmllcltuYW1lcy5sZW5ndGhdOwogICAg\nICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbmFtZXMubGVuZ3RoIDsgaSsrKSB7\nCiAgICAgICAgICAgIHNOYW1lc1tpXSA9IG5ldyBEQklkZW50aWZpZXIobmFt\nZXNbaV0sIGlkKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHNOYW1lczsK\nICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBKb2lucyB0aGUgbGlzdCBvZiBp\nZGVudGlmaWVycyB1c2luZyB0aGUgYXBwcm9wcmlhdGUgZGVsaW1pdGVycyBh\nbmQKICAgICAqIHJldHVybnMgYSBzdHJpbmcgYmFzZWQgaWRlbnRpZmllci4K\nICAgICAqIEBwYXJhbSByZXN1bHRJZAogICAgICogQHBhcmFtIG5hbWVzCiAg\nICAgKiBAcmV0dXJuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgU3RyaW5n\nIGpvaW4oREJJZGVudGlmaWVyLi4ubmFtZXMpIHsKICAgICAgICBpZiAobmFt\nZXMgPT0gbnVsbCB8fCBuYW1lcy5sZW5ndGggPT0gMCkgewogICAgICAgICAg\nICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgICAgU3RyaW5nW10gc3Ry\nTmFtZXMgPSBuZXcgU3RyaW5nW25hbWVzLmxlbmd0aF07CiAgICAgICAgZm9y\nIChpbnQgaSA9IDA7IGkgPCBuYW1lcy5sZW5ndGg7IGkrKykgewogICAgICAg\nICAgICBzdHJOYW1lc1tpXSA9IG5hbWVzW2ldLmdldE5hbWVJbnRlcm5hbCgp\nOwogICAgICAgIH0KICAgICAgICByZXR1cm4gTm9ybWFsaXplci5qb2luTmFt\nZXMoc3RyTmFtZXMpOwogICAgfQogICAgLyoqCiAgICAgKiBTcGxpdHMgYSBn\naXZlbiBEQklkZW50aWZpZXIgaW50byBtdWx0aXBsZSBEQklkZW50aWZpZXJz\nLiAgVXNlcyB0aGUgYmFzZSBuYW1lIAogICAgICogdHlwZSBhbmQgaGV1cmlz\ndGljcyB0byBkZXRlcm1pbmUgdGhlIHR5cGVzIGFuZCBwbGFjZW1lbnQgb2Yg\ndGhlIHJlc3VsdGluZwogICAgICogY29tcG9uZW50cy4KICAgICAqIEBwYXJh\nbSBuYW1lCiAgICAgKiBAcmV0dXJuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0\naWMgREJJZGVudGlmaWVyW10gc3BsaXQoREJJZGVudGlmaWVyVHlwZSByZXN1\nbHRUeXBlLCBTdHJpbmcgbmFtZSkgewogICAgICAgIAogICAgICAgIFN0cmlu\nZ1tdIG5hbWVzID0gTm9ybWFsaXplci5zcGxpdE5hbWUobmFtZSk7CiAgICAg\nICAgc3dpdGNoIChuYW1lcy5sZW5ndGgpIHsKICAgICAgICAgICAgY2FzZSAy\nOgogICAgICAgICAgICAgICAgcmV0dXJuIGdldFR3b1BhcnRJZGVudGlmaWVy\nKG5hbWVzLCByZXN1bHRUeXBlKTsKICAgICAgICAgICAgY2FzZSAzOgogICAg\nICAgICAgICAgICAgcmV0dXJuIGdldFRocmVlUGFydElkZW50aWZpZXIobmFt\nZXMsIHJlc3VsdFR5cGUpOwogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAg\nICAgICAgICByZXR1cm4gZ2V0Rm91clBhcnRJZGVudGlmaWVyKG5hbWVzLCBy\nZXN1bHRUeXBlKTsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAg\nICAgIHJldHVybiBuZXcgREJJZGVudGlmaWVyW10geyBuZXcgREJJZGVudGlm\naWVyKG5hbWUsIHJlc3VsdFR5cGUpIH07CiAgICAgICAgfQogICAgfQoKICAg\nIC8qCiAgICAgKiBSZXR1cm5zIGEgdHdvLXBhcnQgaWRlbnRpZmllciBiYXNl\nZCB1cG9uIHRoZSBiYXNlIGlkZW50aWZpZXIgdHlwZS4KICAgICAqLwogICAg\ncHJpdmF0ZSBzdGF0aWMgREJJZGVudGlmaWVyW10gZ2V0VHdvUGFydElkZW50\naWZpZXIoU3RyaW5nW10gbmFtZXMsIERCSWRlbnRpZmllclR5cGUgYmFzZUlk\nKSB7CiAgICAgICAgREJJZGVudGlmaWVyW10gc05hbWVzID0gbmV3IERCSWRl\nbnRpZmllclsyXTsKICAgICAgICBEQklkZW50aWZpZXJUeXBlIGlkMCA9IERC\nSWRlbnRpZmllclR5cGUuREVGQVVMVDsKICAgICAgICBEQklkZW50aWZpZXJU\neXBlIGlkMSA9IGJhc2VJZDsKICAgICAgICBpZiAoYmFzZUlkICE9IERCSWRl\nbnRpZmllclR5cGUuQ09MVU1OICYmCiAgICAgICAgICAgICAgICBiYXNlSWQg\nIT0gREJJZGVudGlmaWVyVHlwZS5TQ0hFTUEpIHsKICAgICAgICAgICAgaWQw\nID0gREJJZGVudGlmaWVyVHlwZS5TQ0hFTUE7CiAgICAgICAgfQogICAgICAg\nIGVsc2UgaWYgKGJhc2VJZCA9PSBEQklkZW50aWZpZXJUeXBlLkNPTFVNTikg\newogICAgICAgICAgICAvLyBMZW5ndGggMiwgYmFzZSBuYW1lIGNvbHVtbgog\nICAgICAgICAgICBpZDAgPSBEQklkZW50aWZpZXJUeXBlLlRBQkxFOwogICAg\nICAgIH0KICAgICAgICBlbHNlIGlmIChiYXNlSWQgPT0gREJJZGVudGlmaWVy\nVHlwZS5TQ0hFTUEpIHsKICAgICAgICAgICAgaWQwID0gREJJZGVudGlmaWVy\nVHlwZS5EQVRBQkFTRTsKICAgICAgICB9CiAgICAgICAgc05hbWVzWzBdID0g\nbmV3IERCSWRlbnRpZmllcihuYW1lc1swXSwgaWQwKTsKICAgICAgICBzTmFt\nZXNbMV0gPSBuZXcgREJJZGVudGlmaWVyKG5hbWVzWzFdLCBpZDEpOwogICAg\nICAgIHJldHVybiBzTmFtZXM7CiAgICB9CgogICAgLyoKICAgICAqIFJldHVy\nbnMgYSB0aHJlZS1wYXJ0IGlkZW50aWZpZXIgYmFzZWQgdXBvbiB0aGUgYmFz\nZSBpZGVudGlmaWVyIHR5cGUuCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGlj\nIERCSWRlbnRpZmllcltdIGdldFRocmVlUGFydElkZW50aWZpZXIoU3RyaW5n\nW10gbmFtZXMsIERCSWRlbnRpZmllclR5cGUgYmFzZUlkKSB7CiAgICAgICAg\nREJJZGVudGlmaWVyW10gc05hbWVzID0gbmV3IERCSWRlbnRpZmllclszXTsK\nICAgICAgICBEQklkZW50aWZpZXJUeXBlIGlkMCA9IERCSWRlbnRpZmllclR5\ncGUuREVGQVVMVDsKICAgICAgICBEQklkZW50aWZpZXJUeXBlIGlkMSA9IERC\nSWRlbnRpZmllclR5cGUuREVGQVVMVDsKICAgICAgICBEQklkZW50aWZpZXJU\neXBlIGlkMiA9IGJhc2VJZDsKICAgICAgICBpZiAoYmFzZUlkICE9IERCSWRl\nbnRpZmllclR5cGUuU0NIRU1BICYmCiAgICAgICAgICAgIGJhc2VJZCAhPSBE\nQklkZW50aWZpZXJUeXBlLkNPTFVNTikgewogICAgICAgICAgICBpZDAgPSBE\nQklkZW50aWZpZXJUeXBlLkRBVEFCQVNFOwogICAgICAgICAgICBpZDEgPSBE\nQklkZW50aWZpZXJUeXBlLlNDSEVNQTsKICAgICAgICB9CiAgICAgICAgZWxz\nZSBpZiAoYmFzZUlkID09IERCSWRlbnRpZmllclR5cGUuQ09MVU1OKSB7CiAg\nICAgICAgICAgIC8vIExlbmd0aCAyLCBiYXNlIG5hbWUgY29sdW1uCiAgICAg\nICAgICAgIGlkMCA9IERCSWRlbnRpZmllclR5cGUuU0NIRU1BOwogICAgICAg\nICAgICBpZDEgPSBEQklkZW50aWZpZXJUeXBlLlRBQkxFOwogICAgICAgIH0K\nICAgICAgICBzTmFtZXNbMF0gPSBuZXcgREJJZGVudGlmaWVyKG5hbWVzWzBd\nLCBpZDApOwogICAgICAgIHNOYW1lc1sxXSA9IG5ldyBEQklkZW50aWZpZXIo\nbmFtZXNbMV0sIGlkMSk7CiAgICAgICAgc05hbWVzWzJdID0gbmV3IERCSWRl\nbnRpZmllcihuYW1lc1syXSwgaWQyKTsKICAgICAgICByZXR1cm4gc05hbWVz\nOwogICAgfQoKICAgIC8qCiAgICAgKiBSZXR1cm5zIGEgZm91ci1wYXJ0IGlk\nZW50aWZpZXIgYmFzZWQgdXBvbiB0aGUgYmFzZSBpZGVudGlmaWVyIHR5cGUu\nCiAgICAgKi8KICAgIHByaXZhdGUgc3RhdGljIERCSWRlbnRpZmllcltdIGdl\ndEZvdXJQYXJ0SWRlbnRpZmllcihTdHJpbmdbXSBuYW1lcywgREJJZGVudGlm\naWVyVHlwZSBiYXNlSWQpIHsKICAgICAgICBEQklkZW50aWZpZXJbXSBzTmFt\nZXMgPSBuZXcgREJJZGVudGlmaWVyWzRdOwogICAgICAgIERCSWRlbnRpZmll\nclR5cGUgaWQwID0gREJJZGVudGlmaWVyVHlwZS5ERUZBVUxUOwogICAgICAg\nIERCSWRlbnRpZmllclR5cGUgaWQxID0gREJJZGVudGlmaWVyVHlwZS5ERUZB\nVUxUOwogICAgICAgIERCSWRlbnRpZmllclR5cGUgaWQyID0gREJJZGVudGlm\naWVyVHlwZS5ERUZBVUxUOwogICAgICAgIERCSWRlbnRpZmllclR5cGUgaWQz\nID0gYmFzZUlkOwogICAgICAgIGlmIChiYXNlSWQgPT0gREJJZGVudGlmaWVy\nVHlwZS5DT0xVTU4pIHsKICAgICAgICAgICAgaWQwID0gREJJZGVudGlmaWVy\nVHlwZS5EQVRBQkFTRTsKICAgICAgICAgICAgaWQxID0gREJJZGVudGlmaWVy\nVHlwZS5TQ0hFTUE7CiAgICAgICAgICAgIGlkMiA9IERCSWRlbnRpZmllclR5\ncGUuVEFCTEU7CiAgICAgICAgfQogICAgICAgIHNOYW1lc1swXSA9IG5ldyBE\nQklkZW50aWZpZXIobmFtZXNbMF0sIGlkMCk7CiAgICAgICAgc05hbWVzWzFd\nID0gbmV3IERCSWRlbnRpZmllcihuYW1lc1sxXSwgaWQxKTsKICAgICAgICBz\nTmFtZXNbMl0gPSBuZXcgREJJZGVudGlmaWVyKG5hbWVzWzJdLCBpZDIpOwog\nICAgICAgIHNOYW1lc1szXSA9IG5ldyBEQklkZW50aWZpZXIobmFtZXNbM10s\nIGlkMyk7CiAgICAgICAgcmV0dXJuIHNOYW1lczsKICAgIH0KCiAgICAvKioK\nICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgaWRlbnRpZmllciBpcyBudWxs\nIG9yIHRoZSBuYW1lIGlzIG51bGwgb3IgZW1wdHkuCiAgICAgKiBAcGFyYW0g\nbmFtZQogICAgICogQHJldHVybgogICAgICovCiAgICBwdWJsaWMgc3RhdGlj\nIGJvb2xlYW4gaXNFbXB0eShEQklkZW50aWZpZXIgbmFtZSkgewogICAgICAg\nIGlmIChpc051bGwobmFtZSkpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7\nCiAgICAgICAgfQogICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5pc0VtcHR5\nKG5hbWUuZ2V0TmFtZSgpKTsKICAgIH0KCiAgICAKICAgIC8qKgogICAgICog\nUmV0dXJucyB0cnVlIGlmIHRoZSBpZGVudGlmaWVyIGlzIG51bGwuCiAgICAg\nKiBAcGFyYW0gbmFtZQogICAgICogQHJldHVybgogICAgICovCiAgICBwdWJs\naWMgc3RhdGljIGJvb2xlYW4gaXNOdWxsKERCSWRlbnRpZmllciBuYW1lKSB7\nCiAgICAgICAgcmV0dXJuIChuYW1lID09IG51bGwgfHwgbmFtZS5nZXRUeXBl\nKCkgPT0gREJJZGVudGlmaWVyVHlwZS5OVUxMKTsKICAgIH0KCiAgICAvKioK\nICAgICAqIENsb25lcyBhbiBpZGVudGlmaWVyIHVzaW5nIGRlZXAgY29weS4K\nICAgICAqLwogICAgcHVibGljIERCSWRlbnRpZmllciBjbG9uZSgpIHsKICAg\nICAgICBEQklkZW50aWZpZXIgc05hbWUgPSBuZXcgREJJZGVudGlmaWVyKCk7\nCiAgICAgICAgc05hbWUuc2V0TmFtZUludGVybmFsKGdldE5hbWVJbnRlcm5h\nbCgpKTsKICAgICAgICBzTmFtZS5zZXRUeXBlKGdldFR5cGUoKSk7CiAgICAg\nICAgcmV0dXJuIHNOYW1lOwogICAgfQogICAgCiAgICAvKgogICAgICogSW50\nZXJuYWwgbWV0aG9kIHRvIHNldCB0aGUgYmFzZSBuYW1lIGFuZCBhdm9pZCBu\nb3JtYWxpemluZyBhbiBhbHJlYWR5IAogICAgICogbm9ybWFsaXplZCBuYW1l\nLgogICAgICogQHBhcmFtIG5hbWUKICAgICAqLwogICAgcHJpdmF0ZSB2b2lk\nIHNldE5hbWVJbnRlcm5hbChTdHJpbmcgbmFtZSkgewogICAgICAgIHN1cGVy\nLnNldE5hbWUobmFtZSk7CiAgICB9CgogICAgLyoKICAgICAqIEludGVybmFs\nIG1ldGhvZCB0byBnZXQgdGhlIGJhc2UgbmFtZS4gCiAgICAgKiBub3JtYWxp\nemVkIG5hbWUuCiAgICAgKiBAcGFyYW0gbmFtZQogICAgICovCiAgICBwcml2\nYXRlIFN0cmluZyBnZXROYW1lSW50ZXJuYWwoKSB7CiAgICAgICAgcmV0dXJu\nIHN1cGVyLmdldE5hbWUoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVy\nbnMgYSBjb3B5IG9mIGFuIGlkZW50aWZpZXIgd2l0aCBuYW1lIHRyaW1tZWQg\ndG8gbnVsbC4KICAgICAqIEBwYXJhbSBuYW1lCiAgICAgKiBAcmV0dXJuCiAg\nICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgREJJZGVudGlmaWVyIHRyaW1Ub051\nbGwoREJJZGVudGlmaWVyIG5hbWUpIHsKICAgICAgICBpZiAoREJJZGVudGlm\naWVyLmlzTnVsbChuYW1lKSkgewogICAgICAgICAgICByZXR1cm4gbmFtZTsK\nICAgICAgICB9CiAgICAgICAgREJJZGVudGlmaWVyIHNOYW1lID0gbmFtZS5j\nbG9uZSgpOwogICAgICAgIHNOYW1lLnNldE5hbWVJbnRlcm5hbChTdHJpbmdV\ndGlscy50cmltVG9OdWxsKHNOYW1lLmdldE5hbWVJbnRlcm5hbCgpKSk7CiAg\nICAgICAgcmV0dXJuIHNOYW1lOwogICAgfQoKICAgIC8qKgogICAgICogRXF1\nYWxpdHkgb3BlcmF0aW9uIGZvciBpZGVudGlmaWVycy4gIFN1cHBvcnRzIGNv\nbXBhcmlzb24gd2l0aCBzdHJpbmdzCiAgICAgKiBhbmQgb2JqZWN0cyBvZiB0\naGlzIHR5cGUuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGVxdWFscyhP\nYmplY3Qgb2JqKSB7CiAgICAgICAgaWYgKG9iaiA9PSBudWxsKSB7CiAgICAg\nICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgaWYgKG9i\naiA9PSB0aGlzKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAg\nIH0KICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgREJJZGVudGlmaWVyKSB7\nCiAgICAgICAgICAgIERCSWRlbnRpZmllciBzTmFtZSA9IChEQklkZW50aWZp\nZXIpb2JqOwogICAgICAgICAgICByZXR1cm4gdGhpcy5lcXVhbHMoc05hbWUs\nIGZhbHNlKTsKICAgICAgICB9IGVsc2UgaWYgKG9iaiBpbnN0YW5jZW9mIFN0\ncmluZykgewogICAgICAgICAgICByZXR1cm4gb2JqLmVxdWFscyh0aGlzLmdl\ndE5hbWVJbnRlcm5hbCgpKTsKICAgICAgICB9CiAgICAgICAgdGhyb3cgbmV3\nIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiVW5zdXBwb3J0ZWQgdHlwZSBj\nb21wYXJpc29uOiAiICsgb2JqLmdldENsYXNzKCkuZ2V0TmFtZSgpKTsKICAg\nIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIG9iamVj\ndCBpcyBOVUxMIG9yIGhhcyBhIG51bGwgbmFtZSBjb21wb25lbnQuCiAgICAg\nKiBAcmV0dXJuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlzTnVsbCgp\nIHsKICAgICAgICByZXR1cm4gKF90eXBlID09IERCSWRlbnRpZmllclR5cGUu\nTlVMTCB8fCBnZXROYW1lKCkgPT0gbnVsbCk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBDb21wYXJpc29uIG9wZXJhdG9yIGZvciBpZGVudGlmaWVycy4KICAg\nICAqLwogICAgcHVibGljIGludCBjb21wYXJlVG8oSWRlbnRpZmllciBvKSB7\nCiAgICAgICAgaWYgKG8gaW5zdGFuY2VvZiBEQklkZW50aWZpZXIpIHsKICAg\nICAgICAgICAgaWYgKHRoaXMgPT0gREJJZGVudGlmaWVyLk5VTEwgJiYgKG8g\nPT0gbnVsbCB8fCBvID09IERCSWRlbnRpZmllci5OVUxMKSkgewogICAgICAg\nICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAg\naWYgKHRoaXMgPT0gREJJZGVudGlmaWVyLk5VTEwpCiAgICAgICAgICAgICAg\nICByZXR1cm4gMTsKICAgICAgICAgICAgaWYgKG8gPT0gbnVsbCB8fCBvID09\nIERCSWRlbnRpZmllci5OVUxMKQogICAgICAgICAgICAgICAgcmV0dXJuIC0x\nOwogICAgICAgIH0KICAgICAgICByZXR1cm4gc3VwZXIuY29tcGFyZVRvKG8p\nOwogICAgfQogICAgCgogICAgLyoqCiAgICAgKiBDb252ZXJ0cyB0aGUgcHJv\ndmlkZWQgc2V0IG9mIG5hbWVzIHRvIGFuIGFycmF5IG9mIGlkZW50aWZpZXJz\nIG9mIHRoZSAKICAgICAqIHByb3ZpZGVkIHR5cGUKICAgICAqIEBwYXJhbSBj\nb2x1bW5OYW1lcwogICAgICogQHBhcmFtIGlkCiAgICAgKiBAcmV0dXJuCiAg\nICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgREJJZGVudGlmaWVyW10gdG9BcnJh\neShTdHJpbmdbXSBjb2x1bW5OYW1lcywgREJJZGVudGlmaWVyVHlwZSBpZCkg\newogICAgICAgIHJldHVybiB0b0FycmF5KGNvbHVtbk5hbWVzLCBpZCwgZmFs\nc2UpOwogICAgfQoKICAgIC8qKgogICAgICogQ29udmVydHMgdGhlIHByb3Zp\nZGVkIHNldCBvZiBuYW1lcyB0byBhbiBhcnJheSBvZiBpZGVudGlmaWVycyBv\nZiB0aGUgCiAgICAgKiBwcm92aWRlZCB0eXBlLCBvcHRpb25hbGx5IGRlbGlt\naXRpbmcgdGhlIG5hbWVzLgogICAgICogQHBhcmFtIGNvbHVtbk5hbWVzCiAg\nICAgKiBAcGFyYW0gaWQKICAgICAqIEByZXR1cm4KICAgICAqLwogICAgcHVi\nbGljIHN0YXRpYyBEQklkZW50aWZpZXJbXSB0b0FycmF5KFN0cmluZ1tdIG5h\nbWVzLCBEQklkZW50aWZpZXJUeXBlIGlkLCBib29sZWFuIGRlbGltaXQpIHsK\nICAgICAgICBpZiAobmFtZXMgPT0gbnVsbCkgewogICAgICAgICAgICByZXR1\ncm4gbnVsbDsKICAgICAgICB9CiAgICAgICAgREJJZGVudGlmaWVyW10gc05h\nbWVzID0gbmV3IERCSWRlbnRpZmllcltuYW1lcy5sZW5ndGhdOwogICAgICAg\nIGZvciAoaW50IGkgPSAwOyBpIDwgbmFtZXMubGVuZ3RoOyBpKyspIHsKICAg\nICAgICAgICAgc05hbWVzW2ldID0gbmV3IERCSWRlbnRpZmllcihuYW1lc1tp\nXSwgaWQsIGRlbGltaXQpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gc05h\nbWVzOwogICAgfQogICAgCiAgICAvKioKICAgICAqIFJldHVybnMgYSBzdHJp\nbmcgYXJyYXkgb2YgbmFtZXMgYmFzZWQgdXBvbiB0aGUgcHJvdmlkZWQgc2V0\nIG9mIGlkZW50aWZpZXJzLgogICAgICogQHBhcmFtIHNOYW1lcwogICAgICog\nQHJldHVybgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIFN0cmluZ1tdIHRv\nU3RyaW5nQXJyYXkoREJJZGVudGlmaWVyW10gc05hbWVzKSB7CiAgICAgICAg\naWYgKHNOYW1lcyA9PSBudWxsKSB7CiAgICAgICAgICAgIHJldHVybiBudWxs\nOwogICAgICAgIH0KICAgICAgICBTdHJpbmdbXSBuYW1lcyA9IG5ldyBTdHJp\nbmdbc05hbWVzLmxlbmd0aF07CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkg\nPCBzTmFtZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgbmFtZXNbaV0g\nPSBzTmFtZXNbaV0uZ2V0TmFtZSgpOwogICAgICAgIH0KICAgICAgICByZXR1\ncm4gbmFtZXM7CiAgICB9CgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3RzIGEg\nbmV3IGlkZW50aWZpZXIgb2YgdHlwZSBDYXRhbG9nLgogICAgICovCiAgICBw\ndWJsaWMgc3RhdGljIERCSWRlbnRpZmllciBuZXdDYXRhbG9nKFN0cmluZyBu\nYW1lKSB7CiAgICAgICAgcmV0dXJuIG5ld0lkZW50aWZpZXIobmFtZSwgREJJ\nZGVudGlmaWVyVHlwZS5DQVRBTE9HKTsKICAgIH0KCiAgICAvKioKICAgICAq\nIENvbnN0cnVjdHMgYSBuZXcgaWRlbnRpZmllciBvZiB0eXBlIENhdGFsb2cg\nLG9wdGlvbmFsbHkgZGVsaW1pdGluZwogICAgICogdGhlIG5hbWUuCiAgICAg\nKi8KICAgIHB1YmxpYyBzdGF0aWMgREJJZGVudGlmaWVyIG5ld0NhdGFsb2co\nU3RyaW5nIG5hbWUsIGJvb2xlYW4gZGVsaW1pdCkgewogICAgICAgIHJldHVy\nbiBuZXdJZGVudGlmaWVyKG5hbWUsIERCSWRlbnRpZmllclR5cGUuQ0FUQUxP\nRywgZmFsc2UsIGRlbGltaXQpOwogICAgfQogICAgCiAgICAvKioKICAgICAq\nIENvbnN0cnVjdHMgYSBuZXcgaWRlbnRpZmllciBvZiB0eXBlIFRhYmxlLgog\nICAgICovCiAgICBwdWJsaWMgc3RhdGljIERCSWRlbnRpZmllciBuZXdUYWJs\nZShTdHJpbmcgbmFtZSkgewogICAgICAgIHJldHVybiBuZXdJZGVudGlmaWVy\nKG5hbWUsIERCSWRlbnRpZmllclR5cGUuVEFCTEUpOwogICAgfQoKICAgIC8q\nKgogICAgICogQ29uc3RydWN0cyBhIG5ldyBpZGVudGlmaWVyIG9mIHR5cGUg\nVGFibGUsIG9wdGlvbmFsbHkgZGVsaW1pdGluZwogICAgICogdGhlIG5hbWUu\nCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgREJJZGVudGlmaWVyIG5ld1Rh\nYmxlKFN0cmluZyBuYW1lLCBib29sZWFuIGRlbGltaXQpIHsKICAgICAgICBy\nZXR1cm4gbmV3SWRlbnRpZmllcihuYW1lLCBEQklkZW50aWZpZXJUeXBlLlRB\nQkxFLCBmYWxzZSwgZGVsaW1pdCk7CiAgICB9CiAgICAKICAgIC8qKgogICAg\nICogQ29uc3RydWN0cyBhIG5ldyBpZGVudGlmaWVyIG9mIHR5cGUgQ29sdW1u\nLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIERCSWRlbnRpZmllciBuZXdD\nb2x1bW4oU3RyaW5nIG5hbWUpIHsKICAgICAgICByZXR1cm4gbmV3SWRlbnRp\nZmllcihuYW1lLCBEQklkZW50aWZpZXJUeXBlLkNPTFVNTik7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IGlkZW50aWZpZXIgb2Yg\ndHlwZSBDb2x1bW4sb3B0aW9uYWxseSBkZWxpbWl0aW5nCiAgICAgKiB0aGUg\nbmFtZS4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBEQklkZW50aWZpZXIg\nbmV3Q29sdW1uKFN0cmluZyBuYW1lLCBib29sZWFuIGRlbGltaXQpIHsKICAg\nICAgICByZXR1cm4gbmV3SWRlbnRpZmllcihuYW1lLCBEQklkZW50aWZpZXJU\neXBlLkNPTFVNTiwgZmFsc2UsIGRlbGltaXQpOwogICAgfQoKICAgIC8qKgog\nICAgICogQ29uc3RydWN0cyBhIG5ldyBpZGVudGlmaWVyIG9mIHR5cGUgU2No\nZW1hLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIERCSWRlbnRpZmllciBu\nZXdTY2hlbWEoU3RyaW5nIG5hbWUpIHsKICAgICAgICByZXR1cm4gbmV3SWRl\nbnRpZmllcihuYW1lLCBEQklkZW50aWZpZXJUeXBlLlNDSEVNQSk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IGlkZW50aWZpZXIg\nb2YgdHlwZSBTY2hlbWEsIG9wdGlvbmFsbHkgZGVsaW1pdGluZwogICAgICog\ndGhlIG5hbWUuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgREJJZGVudGlm\naWVyIG5ld1NjaGVtYShTdHJpbmcgbmFtZSwgYm9vbGVhbiBkZWxpbWl0KSB7\nCiAgICAgICAgcmV0dXJuIG5ld0lkZW50aWZpZXIobmFtZSwgREJJZGVudGlm\naWVyVHlwZS5TQ0hFTUEsIGZhbHNlLCBkZWxpbWl0KTsKICAgIH0KCiAgICAv\nKioKICAgICAqIENvbnN0cnVjdHMgYSBuZXcgaWRlbnRpZmllciBvZiB0eXBl\nIEluZGV4LgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIERCSWRlbnRpZmll\nciBuZXdJbmRleChTdHJpbmcgbmFtZSkgewogICAgICAgIHJldHVybiBuZXdJ\nZGVudGlmaWVyKG5hbWUsIERCSWRlbnRpZmllclR5cGUuSU5ERVgpOwogICAg\nfQoKICAgIC8qKgogICAgICogQ29uc3RydWN0cyBhIG5ldyBpZGVudGlmaWVy\nIG9mIHR5cGUgSW5kZXgsIG9wdGlvbmFsbHkgZGVsaW1pdGluZwogICAgICog\ndGhlIG5hbWUuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgREJJZGVudGlm\naWVyIG5ld0luZGV4KFN0cmluZyBuYW1lLCBib29sZWFuIGRlbGltaXQpIHsK\nICAgICAgICByZXR1cm4gbmV3SWRlbnRpZmllcihuYW1lLCBEQklkZW50aWZp\nZXJUeXBlLklOREVYLCBmYWxzZSwgZGVsaW1pdCk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IGlkZW50aWZpZXIgb2YgdHlwZSBT\nZXF1ZW5jZS4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBEQklkZW50aWZp\nZXIgbmV3U2VxdWVuY2UoU3RyaW5nIG5hbWUpIHsKICAgICAgICByZXR1cm4g\nbmV3SWRlbnRpZmllcihuYW1lLCBEQklkZW50aWZpZXJUeXBlLlNFUVVFTkNF\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIENvbnN0cnVjdHMgYSBuZXcgaWRl\nbnRpZmllciBvZiB0eXBlIFNlcXVlbmNlLCBvcHRpb25hbGx5IGRlbGltaXRp\nbmcKICAgICAqIHRoZSBuYW1lLgogICAgICovCiAgICBwdWJsaWMgc3RhdGlj\nIERCSWRlbnRpZmllciBuZXdTZXF1ZW5jZShTdHJpbmcgbmFtZSwgYm9vbGVh\nbiBkZWxpbWl0KSB7CiAgICAgICAgcmV0dXJuIG5ld0lkZW50aWZpZXIobmFt\nZSwgREJJZGVudGlmaWVyVHlwZS5TRVFVRU5DRSwgZmFsc2UsIGRlbGltaXQp\nOwogICAgfQoKICAgIC8qKgogICAgICogQ29uc3RydWN0cyBhIG5ldyBpZGVu\ndGlmaWVyIG9mIHR5cGUgRm9yZWlnbktleS4KICAgICAqLwogICAgcHVibGlj\nIHN0YXRpYyBEQklkZW50aWZpZXIgbmV3Rm9yZWlnbktleShTdHJpbmcgbmFt\nZSkgewogICAgICAgIHJldHVybiBuZXdJZGVudGlmaWVyKG5hbWUsIERCSWRl\nbnRpZmllclR5cGUuRk9SRUlHTl9LRVkpOwogICAgfQoKICAgIC8qKgogICAg\nICogQ29uc3RydWN0cyBhIG5ldyBpZGVudGlmaWVyIG9mIHR5cGUgRm9yZWln\nbktleSwgb3B0aW9uYWxseSBkZWxpbWl0aW5nCiAgICAgKiB0aGUgbmFtZS4K\nICAgICAqLwogICAgcHVibGljIHN0YXRpYyBEQklkZW50aWZpZXIgbmV3Rm9y\nZWlnbktleShTdHJpbmcgbmFtZSwgYm9vbGVhbiBkZWxpbWl0KSB7CiAgICAg\nICAgcmV0dXJuIG5ld0lkZW50aWZpZXIobmFtZSwgREJJZGVudGlmaWVyVHlw\nZS5GT1JFSUdOX0tFWSwgZmFsc2UsIGRlbGltaXQpOwogICAgfQoKICAgIC8q\nKgogICAgICogQ29uc3RydWN0cyBhIG5ldyBpZGVudGlmaWVyIG9mIHR5cGUg\nQ29uc3RyYWludC4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBEQklkZW50\naWZpZXIgbmV3Q29uc3RyYWludChTdHJpbmcgbmFtZSkgewogICAgICAgIHJl\ndHVybiBuZXdJZGVudGlmaWVyKG5hbWUsIERCSWRlbnRpZmllclR5cGUuQ09O\nU1RSQUlOVCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3RzIGEg\nbmV3IGlkZW50aWZpZXIgb2YgdHlwZSBDb25zdHJhaW50LCBvcHRpb25hbGx5\nIGRlbGltaXRpbmcKICAgICAqIHRoZSBuYW1lLgogICAgICovCiAgICBwdWJs\naWMgc3RhdGljIERCSWRlbnRpZmllciBuZXdDb25zdHJhaW50KFN0cmluZyBu\nYW1lLCBib29sZWFuIGRlbGltaXQpIHsKICAgICAgICByZXR1cm4gbmV3SWRl\nbnRpZmllcihuYW1lLCBEQklkZW50aWZpZXJUeXBlLkNPTlNUUkFJTlQsIGZh\nbHNlLCBkZWxpbWl0KTsKICAgIH0KCiAgICAvKioKICAgICAqIENvbnN0cnVj\ndHMgYSBuZXcgaWRlbnRpZmllciBvZiB0eXBlIENvbnN0YW50LgogICAgICov\nCiAgICBwdWJsaWMgc3RhdGljIERCSWRlbnRpZmllciBuZXdDb25zdGFudChT\ndHJpbmcgbmFtZSkgewogICAgICAgIHJldHVybiBuZXdJZGVudGlmaWVyKG5h\nbWUsIERCSWRlbnRpZmllclR5cGUuQ09OU1RBTlQpOwogICAgfQoKICAgIC8q\nKgogICAgICogQ29uc3RydWN0cyBhIG5ldyBpZGVudGlmaWVyIG9mIHR5cGUg\nQ29sdW1uIERlZmluaXRpb24uCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMg\nREJJZGVudGlmaWVyIG5ld0NvbHVtbkRlZmluaXRpb24oU3RyaW5nIG5hbWUp\nIHsKICAgICAgICByZXR1cm4gbmV3SWRlbnRpZmllcihuYW1lLCBEQklkZW50\naWZpZXJUeXBlLkNPTFVNTl9ERUZJTklUSU9OKTsKICAgIH0KCiAgICAvKioK\nICAgICAqIENvbnN0cnVjdHMgYSBuZXcgaWRlbnRpZmllciBvZiB0eXBlIERl\nZmF1bHQuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgREJJZGVudGlmaWVy\nIG5ld0RlZmF1bHQoU3RyaW5nIG5hbWUpIHsKICAgICAgICByZXR1cm4gbmV3\nSWRlbnRpZmllcihuYW1lLCBEQklkZW50aWZpZXJUeXBlLkRFRkFVTFQpOwog\nICAgfQoKICAgIC8qKgogICAgICogQ29uc3RydWN0cyBhIG5ldyBpZGVudGlm\naWVyIHdpdGggdGhlIHByb3ZpZGVkIG5hbWUgYW5kIHR5cGUKICAgICAqLwog\nICAgcHJvdGVjdGVkIHN0YXRpYyBEQklkZW50aWZpZXIgbmV3SWRlbnRpZmll\ncihTdHJpbmcgbmFtZSwgREJJZGVudGlmaWVyVHlwZSBpZCkgewogICAgICAg\nIHJldHVybiBuZXdJZGVudGlmaWVyKG5hbWUsIGlkLCBmYWxzZSwgZmFsc2Up\nOwogICAgfQoKICAgIC8qKgogICAgICogQ29uc3RydWN0cyBhIG5ldyBpZGVu\ndGlmaWVyIHdpdGggdGhlIHByb3ZpZGVkIG5hbWUgYW4gdHlwZS4gT3B0aW9u\nYWxseSwKICAgICAqIGNvbnZlcnRpbmcgdGhlIG5hbWUgdG8gdXBwZXIgY2Fz\nZS4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBEQklkZW50aWZpZXIgbmV3\nSWRlbnRpZmllcihTdHJpbmcgbmFtZSwgREJJZGVudGlmaWVyVHlwZSBpZCwg\nYm9vbGVhbiB0b1VwcGVyKSB7CiAgICAgICAgcmV0dXJuIG5ld0lkZW50aWZp\nZXIobmFtZSwgaWQsIHRvVXBwZXIsIGZhbHNlICk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IGlkZW50aWZpZXIgKHBvdGVudGlh\nbGx5IGEgY29tcG91bmQgUXVhbGlmaWVkREJJZGVudGlmaWVyKSB3aXRoIHRo\nZSBwcm92aWRlZCAKICAgICAqIG5hbWUgYW4gdHlwZS4gT3B0aW9uYWxseSwg\nY29udmVydGluZyB0aGUgbmFtZSB0byB1cHBlciBjYXNlIGFuZCBkZWxpbWl0\naW5nIGl0LgogICAgICovCiAgICBwcm90ZWN0ZWQgc3RhdGljIERCSWRlbnRp\nZmllciBuZXdJZGVudGlmaWVyKFN0cmluZyBuYW1lLCBEQklkZW50aWZpZXJU\neXBlIGlkLCBib29sZWFuIHRvVXBwZXIsIGJvb2xlYW4gZGVsaW1pdCkgewog\nICAgICAgIGlmIChuYW1lID09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJu\nIERCSWRlbnRpZmllci5OVUxMOwogICAgICAgIH0KICAgICAgICAKICAgICAg\nICBEQklkZW50aWZpZXIgZGJJZCA9IERCSWRlbnRpZmllci5OVUxMOwogICAg\nICAgIC8vIENyZWF0ZSBhIERCSURlbnRpZmllciBmb3Igc2luZ2xlIGNvbXBv\nbmVudCBuYW1lcy4gIE90aGVyd2lzZSwgY3JlYXRlIGEgUXVhbGlmaWVkREJJ\nZGVudGlmaWVyLgogICAgICAgIGlmICghX2NvbXBvdW5kSWRlbnRpZmllcltp\nZC5vcmRpbmFsKCldIHx8IGRlbGltaXQpIHsKICAgICAgICAgICAgZGJJZCA9\nIG5ldyBEQklkZW50aWZpZXIobmFtZSwgaWQsIGRlbGltaXQpOwogICAgICAg\nICAgICBpZiAodG9VcHBlcikgewogICAgICAgICAgICAgICAgcmV0dXJuIHRv\nVXBwZXIoZGJJZCk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2Ugewog\nICAgICAgICAgICAvLyBOYW1lIGNhbiBiZSBzcGxpdC4gQnJlYWsgaXQgdXAg\naW50byBjb21wb25lbnRzIGFuZCByZXR1cm4gYSBwYXRoCiAgICAgICAgICAg\nIERCSWRlbnRpZmllcltdIHNOYW1lcyA9IERCSWRlbnRpZmllci5zcGxpdChp\nZCwgbmFtZSk7CiAgICAgICAgICAgIGRiSWQgPSBuZXcgUXVhbGlmaWVkREJJ\nZGVudGlmaWVyKHNOYW1lcyk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBk\nYklkOwogICAgfQoKICAgIC8qKgogICAgICogU3RhdGljIGVxdWFsaXR5IG1l\ndGhvZCBmb3IgY29tcGFyaW5nIHR3byBpZGVudGlmaWVycy4KICAgICAqIEBw\nYXJhbSBuYW1lMQogICAgICogQHBhcmFtIG5hbWUyCiAgICAgKiBAcmV0dXJu\nCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgYm9vbGVhbiBlcXVhbChEQklk\nZW50aWZpZXIgbmFtZTEsIERCSWRlbnRpZmllciBuYW1lMikgewogICAgICAg\nIGJvb2xlYW4gbmFtZTFOdWxsID0gREJJZGVudGlmaWVyLmlzTnVsbChuYW1l\nMSk7CiAgICAgICAgaWYgKG5hbWUxTnVsbCAmJiBEQklkZW50aWZpZXIuaXNO\ndWxsKG5hbWUyKSkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAg\nICB9CiAgICAgICAgaWYgKG5hbWUxTnVsbCkgewogICAgICAgICAgICByZXR1\ncm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIHJldHVybiAoKERCSWRlbnRp\nZmllciluYW1lMSkuZXF1YWxzKG5hbWUyLCBmYWxzZSk7CiAgICB9CgogICAg\nCiAgICBwcml2YXRlIHZvaWQgYXNzZXJ0Tm90TnVsbCgpIHsKICAgICAgICBp\nZiAodGhpcyA9PSBEQklkZW50aWZpZXIuTlVMTCB8fCBnZXRUeXBlKCkgPT0g\nREJJZGVudGlmaWVyVHlwZS5OVUxMKSB7CiAgICAgICAgICAgIHRocm93IG5l\ndyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oIkNhbm5vdCBtb2RpZnkgTlVMTCBp\nbnN0YW5jZSIpOwogICAgICAgIH0KICAgIH0KICAgIAogICAgLyoqCiAgICAg\nKiBSZXR1cm5zIGEgbmV3IERCSWRlbnRpZmllciB0cnVuY2F0ZWQgdG8gbGVu\nZ3RoCiAgICAgKiBAcGFyYW0gbmFtZQogICAgICogQHBhcmFtIGxlbmd0aAog\nICAgICogQHJldHVybgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIERCSWRl\nbnRpZmllciB0cnVuY2F0ZShEQklkZW50aWZpZXIgbmFtZSwgaW50IGxlbmd0\naCkgewogICAgICAgIERCSWRlbnRpZmllciBzTmFtZSA9IG5hbWUuY2xvbmUo\nKTsKICAgICAgICBTdHJpbmcgc3RyTmFtZSA9IHNOYW1lLmdldE5hbWVJbnRl\ncm5hbCgpOwogICAgICAgIGlmIChTdHJpbmdVdGlscy5pc0VtcHR5KHN0ck5h\nbWUpKSB7CiAgICAgICAgICAgIHJldHVybiBzTmFtZTsKICAgICAgICB9CiAg\nICAgICAgc3RyTmFtZSA9IE5vcm1hbGl6ZXIudHJ1bmNhdGUoc3RyTmFtZSwg\nbGVuZ3RoKTsKICAgICAgICBzTmFtZS5zZXROYW1lSW50ZXJuYWwoc3RyTmFt\nZSk7CiAgICAgICAgcmV0dXJuIHNOYW1lOwogICAgfQoKICAgIC8qKgogICAg\nICogUmV0dXJucyBhIG5ldyBEQklkZW50aWZpZXIgd2l0aCB0aGUgZ2l2ZW4g\nc3RyaW5nIGFwcGVuZGVkLgogICAgICogQHBhcmFtIG5hbWUKICAgICAqIEBw\nYXJhbSBsZW5ndGgKICAgICAqIEByZXR1cm4KICAgICAqLwogICAgcHVibGlj\nIHN0YXRpYyBEQklkZW50aWZpZXIgYXBwZW5kKERCSWRlbnRpZmllciBuYW1l\nLCBTdHJpbmcgc3RyKSB7CiAgICAgICAgREJJZGVudGlmaWVyIHNOYW1lID0g\nbmFtZS5jbG9uZSgpOwogICAgICAgIFN0cmluZyBzdHJOYW1lID0gc05hbWUu\nZ2V0TmFtZUludGVybmFsKCk7CiAgICAgICAgc3RyTmFtZSA9IE5vcm1hbGl6\nZXIuYXBwZW5kKHN0ck5hbWUsIHN0cik7CiAgICAgICAgc05hbWUuc2V0TmFt\nZUludGVybmFsKHN0ck5hbWUpOwogICAgICAgIHJldHVybiBzTmFtZTsKICAg\nIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYSBuZXcgREJJZGVudGlmaWVy\nIHdpdGggdGhlIGdpdmVuIHN0cmluZyBjb21iaW5lZCB1c2luZyAKICAgICAq\nIGRlbGltaXRpbmcgcnVsZXMgYW5kIGFwcHJvcHJpYXRlIHNlcGFyYXRvcnMu\nCiAgICAgKiBAcGFyYW0gbmFtZQogICAgICogQHBhcmFtIGxlbmd0aAogICAg\nICogQHJldHVybgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIERCSWRlbnRp\nZmllciBjb21iaW5lKERCSWRlbnRpZmllciBuYW1lLCBTdHJpbmcgc3RyKSB7\nCiAgICAgICAgREJJZGVudGlmaWVyIHNOYW1lID0gbmFtZS5jbG9uZSgpOwog\nICAgICAgIFN0cmluZyBzdHJOYW1lID0gc05hbWUuZ2V0TmFtZUludGVybmFs\nKCk7CiAgICAgICAgc3RyTmFtZSA9IE5vcm1hbGl6ZXIuY29tYmluZShzdHJO\nYW1lLCBzdHIpOwogICAgICAgIHNOYW1lLnNldE5hbWVJbnRlcm5hbChzdHJO\nYW1lKTsKICAgICAgICByZXR1cm4gc05hbWU7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBSZXR1cm5zIGEgbmV3IERCSWRlbnRpZmllciBjb252ZXJ0ZWQgdG8g\nbG93ZXIgY2FzZSAtIGlmIG5vdCBkZWxpbWl0ZWQuCiAgICAgKiBAcGFyYW0g\nbmFtZQogICAgICogQHJldHVybgogICAgICovCiAgICBwdWJsaWMgc3RhdGlj\nIERCSWRlbnRpZmllciB0b0xvd2VyKERCSWRlbnRpZmllciBuYW1lKSB7CiAg\nICAgICAgcmV0dXJuIHRvTG93ZXIobmFtZSwgZmFsc2UpOwogICAgfQogICAg\nCiAgICAvKioKICAgICAqIFJldHVybnMgYSBuZXcgREJJZGVudGlmaWVyIGNv\nbnZlcnRlZCB0byBsb3dlciBjYXNlLiAgSWYgZGVsaW1pdGVkLAogICAgICog\nZm9yY2UgdG8gbG93ZXIgY2FzZSB1c2luZyBmb3JjZSBvcHRpb24uCiAgICAg\nKiBAcGFyYW0gbmFtZQogICAgICogQHJldHVybgogICAgICovCiAgICBwdWJs\naWMgc3RhdGljIERCSWRlbnRpZmllciB0b0xvd2VyKERCSWRlbnRpZmllciBu\nYW1lLCBib29sZWFuIGZvcmNlKSB7CiAgICAgICAgaWYgKERCSWRlbnRpZmll\nci5pc051bGwobmFtZSkpIHsKICAgICAgICAgICAgcmV0dXJuIG5hbWU7CiAg\nICAgICAgfQogICAgICAgIERCSWRlbnRpZmllciBzTmFtZSA9IG5hbWUuY2xv\nbmUoKTsKICAgICAgICBpZiAoc05hbWUuZ2V0TmFtZUludGVybmFsKCkgPT0g\nbnVsbCkgewogICAgICAgICAgICByZXR1cm4gc05hbWU7CiAgICAgICAgfQog\nICAgICAgIC8vIERvIG5vdCBjb252ZXJ0IGRlbGltaXRlZCBuYW1lcyB0byBs\nb3dlciBjYXNlLiAgVGhleSBtYXkgaGF2ZQogICAgICAgIC8vIGJlZW4gZGVs\naW1pdGVkIHRvIHByZXNlcnZlIGNhc2UuCiAgICAgICAgaWYgKGZvcmNlIHx8\nICFOb3JtYWxpemVyLmlzRGVsaW1pdGVkKHNOYW1lLmdldE5hbWVJbnRlcm5h\nbCgpKSkgewogICAgICAgICAgICBzTmFtZS5zZXROYW1lSW50ZXJuYWwoc05h\nbWUuZ2V0TmFtZUludGVybmFsKCkudG9Mb3dlckNhc2UoKSk7CiAgICAgICAg\nfQogICAgICAgIHJldHVybiBzTmFtZTsKICAgIH0KCiAgICAvKioKICAgICAq\nIFJldHVybnMgYSBuZXcgREJJZGVudGlmaWVyIGNvbnZlcnRlZCB0byB1cHBl\nciBjYXNlIC0gaWYgbm90IGRlbGltaXRlZC4KICAgICAqIEBwYXJhbSBuYW1l\nCiAgICAgKiBAcmV0dXJuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgREJJ\nZGVudGlmaWVyIHRvVXBwZXIoREJJZGVudGlmaWVyIG5hbWUpIHsKICAgICAg\nICByZXR1cm4gdG9VcHBlcihuYW1lLCBmYWxzZSk7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBSZXR1cm5zIGEgbmV3IERCSWRlbnRpZmllciBjb252ZXJ0ZWQg\ndG8gdXBwZXIgY2FzZS4gIElmIGRlbGltaXRlZCwKICAgICAqIGZvcmNlIHRv\nIHVwcGVyIGNhc2UgdXNpbmcgZm9yY2Ugb3B0aW9uLgogICAgICogQHBhcmFt\nIG5hbWUKICAgICAqIEByZXR1cm4KICAgICAqLwogICAgcHVibGljIHN0YXRp\nYyBEQklkZW50aWZpZXIgdG9VcHBlcihEQklkZW50aWZpZXIgbmFtZSwgYm9v\nbGVhbiBmb3JjZSkgewogICAgICAgIGlmIChEQklkZW50aWZpZXIuaXNOdWxs\nKG5hbWUpKSB7CiAgICAgICAgICAgIHJldHVybiBuYW1lOwogICAgICAgIH0K\nICAgICAgICBEQklkZW50aWZpZXIgc05hbWUgPSBuYW1lLmNsb25lKCk7CiAg\nICAgICAgaWYgKHNOYW1lLmdldE5hbWVJbnRlcm5hbCgpID09IG51bGwpIHsK\nICAgICAgICAgICAgcmV0dXJuIHNOYW1lOwogICAgICAgIH0KICAgICAgICAv\nLyBEbyBub3QgY29udmVydCBkZWxpbWl0ZWQgbmFtZXMgdG8gdXBwZXIgY2Fz\nZS4gIFRoZXkgbWF5IGhhdmUKICAgICAgICAvLyBiZWVuIGRlbGltaXRlZCB0\nbyBwcmVzZXJ2ZSBjYXNlLgogICAgICAgIGlmIChmb3JjZSB8fCAhTm9ybWFs\naXplci5pc0RlbGltaXRlZChzTmFtZS5nZXROYW1lSW50ZXJuYWwoKSkpIHsK\nICAgICAgICAgICAgc05hbWUuc2V0TmFtZUludGVybmFsKHNOYW1lLmdldE5h\nbWVJbnRlcm5hbCgpLnRvVXBwZXJDYXNlKCkpOwogICAgICAgIH0KICAgICAg\nICByZXR1cm4gc05hbWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5z\nIGEgbmV3IERCSWRlbnRpZmllciB3aXRoIHRoZSBzcGVjaWZpZWQgbGVhZGlu\nZyBzdHJpbmcgcmVtb3ZlZC4KICAgICAqIEBwYXJhbSBuYW1lCiAgICAgKiBA\ncmV0dXJuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgREJJZGVudGlmaWVy\nIHJlbW92ZUxlYWRpbmcoREJJZGVudGlmaWVyIG5hbWUsIFN0cmluZyBsZWFk\naW5nU3RyKSB7CiAgICAgICAgREJJZGVudGlmaWVyIHNOYW1lID0gbmFtZS5j\nbG9uZSgpOwogICAgICAgIGlmIChpc0VtcHR5KHNOYW1lKSkgewogICAgICAg\nICAgICByZXR1cm4gc05hbWU7CiAgICAgICAgfQogICAgICAgIFN0cmluZyBz\ndHJOYW1lID0gc05hbWUuZ2V0TmFtZUludGVybmFsKCk7CiAgICAgICAgaW50\nIGxlYWRpbmdMZW4gPSBsZWFkaW5nU3RyLmxlbmd0aCgpOwogICAgICAgIHdo\naWxlIChzdHJOYW1lLnN0YXJ0c1dpdGgobGVhZGluZ1N0cikpIHsKICAgICAg\nICAgICAgc3RyTmFtZSA9IHN0ck5hbWUuc3Vic3RyaW5nKGxlYWRpbmdMZW4p\nOwogICAgICAgIH0KICAgICAgICBzTmFtZS5zZXROYW1lSW50ZXJuYWwoc3Ry\nTmFtZSk7CiAgICAgICAgcmV0dXJuIHNOYW1lOwogICAgfQogICAgCiAgICAv\nKioKICAgICAqIFJldHVybnMgYSBuZXcgREJJZGVudGlmaWVyIHdpdGggSHVu\nZ2FyaWFuIG5vdGF0aW9uIHJlbW92ZWQuCiAgICAgKiBAcGFyYW0gbmFtZQog\nICAgICogQHJldHVybgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIERCSWRl\nbnRpZmllciByZW1vdmVIdW5nYXJpYW5Ob3RhdGlvbihEQklkZW50aWZpZXIg\nbmFtZSkgewogICAgICAgIERCSWRlbnRpZmllciBoTmFtZSA9IG5hbWUuY2xv\nbmUoKTsKICAgICAgICBpZiAoaXNFbXB0eShoTmFtZSkpIHsKICAgICAgICAg\nICAgcmV0dXJuIGhOYW1lOwogICAgICAgIH0KICAgICAgICBTdHJpbmcgc3Ry\nTmFtZSA9IGhOYW1lLmdldE5hbWVJbnRlcm5hbCgpOwogICAgICAgIHN0ck5h\nbWUgPSBOb3JtYWxpemVyLnJlbW92ZUh1bmdhcmlhbk5vdGF0aW9uKHN0ck5h\nbWUpOwogICAgICAgIGhOYW1lLnNldE5hbWVJbnRlcm5hbChzdHJOYW1lKTsK\nICAgICAgICByZXR1cm4gaE5hbWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBF\ncXVhbGl0eSBvcGVyYXRvciB3aGljaCBpZ25vcmVzIGNhc2UuCiAgICAgKiBA\ncGFyYW0gbmFtZQogICAgICogQHJldHVybgogICAgICovCiAgIHB1YmxpYyBi\nb29sZWFuIGVxdWFsc0lnbm9yZUNhc2UoREJJZGVudGlmaWVyIG5hbWUpIHsK\nICAgICAgIHJldHVybiBlcXVhbHMobmFtZSwgdHJ1ZSk7CiAgIH0KCiAgIC8q\nKgogICAgKiBTdGF0aWMgZXF1YWxpdHkgb3BlcmF0b3Igd2hpY2ggaWdub3Jl\ncyBjYXNlLgogICAgKiBAcGFyYW0gbmFtZQogICAgKiBAcmV0dXJuCiAgICAq\nLwogICAgcHVibGljIHN0YXRpYyBib29sZWFuIGVxdWFsc0lnbm9yZUNhc2Uo\nREJJZGVudGlmaWVyIG5hbWUxLCBEQklkZW50aWZpZXIgbmFtZTIpIHsKICAg\nICAgICBib29sZWFuIG5hbWUxTnVsbCA9IERCSWRlbnRpZmllci5pc051bGwo\nbmFtZTEpOwogICAgICAgIGlmIChuYW1lMU51bGwgJiYgREJJZGVudGlmaWVy\nLmlzTnVsbChuYW1lMikpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAg\nICAgICAgfQogICAgICAgIGlmIChuYW1lMU51bGwpIHsKICAgICAgICAgICAg\ncmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbmFtZTEu\nZXF1YWxzKG5hbWUyLCB0cnVlKTsKICAgIH0KCiAgICBwcml2YXRlIGJvb2xl\nYW4gZXF1YWxzKERCSWRlbnRpZmllciBzTmFtZSwgYm9vbGVhbiBpZ25vcmVD\nYXNlKSB7CiAgICAgICAgaWYgKHNOYW1lLmdldE5hbWVJbnRlcm5hbCgpID09\nIG51bGwgJiYgZ2V0TmFtZUludGVybmFsKCkgPT0gbnVsbCkgewogICAgICAg\nICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgaWYgKGdldE5h\nbWVJbnRlcm5hbCgpID09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuIGZh\nbHNlOwogICAgICAgIH0KICAgICAgICBpZiAoaWdub3JlQ2FzZSB8fCAhTm9y\nbWFsaXplci5pc0RlbGltaXRlZChnZXROYW1lSW50ZXJuYWwoKSkpIHsKICAg\nICAgICAgICAgcmV0dXJuIGdldE5hbWVJbnRlcm5hbCgpLmVxdWFsc0lnbm9y\nZUNhc2Uoc05hbWUuZ2V0TmFtZUludGVybmFsKCkpOwogICAgICAgIH0KICAg\nICAgICByZXR1cm4gZ2V0TmFtZUludGVybmFsKCkuZXF1YWxzKHNOYW1lLmdl\ndE5hbWVJbnRlcm5hbCgpKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVy\nbnMgYSBuZXcgaWRlbnRpZmllciB3aXRoIGEgY29tYmluZWQgcHJlZml4IGFu\nZCBuYW1lIHVzaW5nIHRoZSBzdGFuZGFyZCBuYW1lCiAgICAgKiBjb25jYXRl\nbmF0aW9uIGNoYXJhY3RlciAoJ18nKS4KICAgICAqIEBwYXJhbSBwcmVmaXgK\nICAgICAqLwogICAgcHVibGljIHN0YXRpYyBEQklkZW50aWZpZXIgcHJlQ29t\nYmluZShEQklkZW50aWZpZXIgbmFtZSwgU3RyaW5nIHByZWZpeCkgewogICAg\nICAgIGlmIChEQklkZW50aWZpZXIuaXNOdWxsKG5hbWUpKSB7CiAgICAgICAg\nICAgIHJldHVybiBuYW1lOwogICAgICAgIH0KICAgICAgICBEQklkZW50aWZp\nZXIgc05hbWUgPSBuYW1lLmNsb25lKCk7CiAgICAgICAgU3RyaW5nIHN0ck5h\nbWUgPSBzTmFtZS5nZXROYW1lSW50ZXJuYWwoKTsKICAgICAgICBzdHJOYW1l\nID0gTm9ybWFsaXplci5jb21iaW5lKHByZWZpeCwgc3RyTmFtZSk7CiAgICAg\nICAgc05hbWUuc2V0TmFtZUludGVybmFsKHN0ck5hbWUpOwogICAgICAgIHJl\ndHVybiBzTmFtZTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYSBu\nZXcgaWRlbnRpZmllciB3aXRoIGRlbGltaXRlcnMgcmVtb3ZlZC4KICAgICAq\nIEBwYXJhbSBuYW1lCiAgICAgKiBAcmV0dXJuCiAgICAgKi8KICAgIHB1Ymxp\nYyBzdGF0aWMgREJJZGVudGlmaWVyIHJlbW92ZURlbGltaXRlcnMoREJJZGVu\ndGlmaWVyIG5hbWUpIHsKICAgICAgICBpZiAoREJJZGVudGlmaWVyLmlzTnVs\nbChuYW1lKSkgewogICAgICAgICAgICByZXR1cm4gbmFtZTsKICAgICAgICB9\nCiAgICAgICAgREJJZGVudGlmaWVyIHNOYW1lID0gbmFtZS5jbG9uZSgpOwog\nICAgICAgIGlmIChpc0VtcHR5KHNOYW1lKSkgewogICAgICAgICAgICByZXR1\ncm4gc05hbWU7CiAgICAgICAgfQogICAgICAgIFN0cmluZyBzdHJOYW1lID0g\nc05hbWUuZ2V0TmFtZUludGVybmFsKCk7CiAgICAgICAgc3RyTmFtZSA9IE5v\ncm1hbGl6ZXIucmVtb3ZlRGVsaW1pdGVycyhzdHJOYW1lKTsKICAgICAgICBz\nTmFtZS5zZXROYW1lSW50ZXJuYWwoc3RyTmFtZSk7CiAgICAgICAgcmV0dXJu\nIHNOYW1lOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBhIG5ldyBk\nZWxpbWl0ZXIgd2l0aCBsZWFkaW5nIGFuZCB0cmFpbGluZyBzcGFjZXMgcmVt\nb3ZlZC4KICAgICAqIEBwYXJhbSBuYW1lCiAgICAgKiBAcmV0dXJuCiAgICAg\nKi8KICAgIHB1YmxpYyBzdGF0aWMgREJJZGVudGlmaWVyIHRyaW0oREJJZGVu\ndGlmaWVyIG5hbWUpIHsKICAgICAgICBpZiAoREJJZGVudGlmaWVyLmlzTnVs\nbChuYW1lKSkgewogICAgICAgICAgICByZXR1cm4gbmFtZTsKICAgICAgICB9\nCiAgICAgICAgREJJZGVudGlmaWVyIHNOYW1lID0gbmFtZS5jbG9uZSgpOwog\nICAgICAgIGlmIChpc0VtcHR5KHNOYW1lKSkgewogICAgICAgICAgICByZXR1\ncm4gc05hbWU7CiAgICAgICAgfQogICAgICAgIFN0cmluZyBzdHJOYW1lID0g\nc05hbWUuZ2V0TmFtZUludGVybmFsKCk7CiAgICAgICAgc3RyTmFtZSA9IHN0\nck5hbWUudHJpbSgpOwogICAgICAgIHNOYW1lLnNldE5hbWVJbnRlcm5hbChz\ndHJOYW1lKTsKICAgICAgICByZXR1cm4gc05hbWU7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBUaGUgbGVuZ3RoIG9mIHRoZSBuYW1lLCBpbmNsdWRpbmcgZGVs\naW1pdGluZyBjaGFyYWN0ZXJzLgogICAgICovCiAgICBwdWJsaWMgaW50IGxl\nbmd0aCgpIHsKICAgICAgICBpZiAoREJJZGVudGlmaWVyLmlzTnVsbCh0aGlz\nKSkgewogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CiAgICAgICAg\ncmV0dXJuIHN1cGVyLmxlbmd0aCgpOwogICAgfQoKICAgIC8qKgogICAgICog\nUmV0dXJucyB0cnVlIGlmIHRoZSBpZGVudGlmaWVyIGlzIGRlbGltaXRlZC4K\nICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gaXNEZWxpbWl0ZWQoKSB7CiAg\nICAgICAgaWYgKERCSWRlbnRpZmllci5pc0VtcHR5KHRoaXMpKSB7CiAgICAg\nICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJu\nIE5vcm1hbGl6ZXIuaXNEZWxpbWl0ZWQoZ2V0TmFtZUludGVybmFsKCkpOwog\nICAgfQoKICAgIC8qKgogICAgICogQ29tYmluZXMgYW4gYXJyYXkgb2YgbmFt\nZXMgbmFtZXMgdXNpbmcgc3RhbmRhcmQgY29tYmluaW5nIHJ1bGVzIGFuZAog\nICAgICogcmV0dXJucyBhbiBpZGVudGlmaWVyIG9mIHRoZSBzcGVjaWZpZWQg\ndHlwZS4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyBEQklkZW50aWZpZXIg\nY29tYmluZShEQklkZW50aWZpZXJUeXBlIGlkLCBTdHJpbmcuLi5uYW1lcykg\newogICAgICAgIHJldHVybiBuZXdJZGVudGlmaWVyKE5vcm1hbGl6ZXIuY29t\nYmluZShuYW1lcyksIGlkKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVy\nbnMgdGhlIHVucXVhbGlmaWVkIG5hbWUgb2YgdGhpcyBpZGVudGlmaWVyLgog\nICAgICovCiAgICBwdWJsaWMgREJJZGVudGlmaWVyIGdldFVucXVhbGlmaWVk\nTmFtZSgpIHsKICAgICAgICByZXR1cm4gdGhpczsKICAgIH0KfQo=\n","encoding":"base64"}

