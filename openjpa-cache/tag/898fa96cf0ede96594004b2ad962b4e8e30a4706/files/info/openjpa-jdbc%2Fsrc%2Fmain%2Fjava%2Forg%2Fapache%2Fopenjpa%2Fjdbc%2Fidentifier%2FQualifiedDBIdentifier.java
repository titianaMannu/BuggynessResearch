{"sha":"1750e932272360b46ff7d53d83eed7b63949385d","node_id":"MDQ6QmxvYjIwNjM2NDoxNzUwZTkzMjI3MjM2MGI0NmZmN2Q1M2Q4M2VlZDdiNjM5NDkzODVk","size":11318,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/1750e932272360b46ff7d53d83eed7b63949385d","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5pZGVudGlmaWVyOwoK\naW1wb3J0IGphdmEuaW8uU2VyaWFsaXphYmxlOwppbXBvcnQgamF2YS51dGls\nLkFycmF5TGlzdDsKaW1wb3J0IGphdmEudXRpbC5MaXN0OwoKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5saWIuaWRlbnRpZmllci5JZGVudGlmaWVyOwoK\nLyoqCiAqIFRoaXMgY2xhc3MgZXh0ZW5kcyBEQklkZW50aWZpZXIgdG8gcHJv\ndmlkZSBzdXBwb3J0IGZvciBxdWFsaWZpZWQgaWRlbnRpZmllcnMKICogc3Vj\naCBhcyBzY2hlbWEgcXVhbGlmaWVkIHRhYmxlcyBhbmQgdGFibGUgcXVhbGlm\naWVkIGNvbHVtbnMuICBJdCBwcm92aWRlcyBtZXRob2RzCiAqIHRvIGNyZWF0\nZSBxdWFsaWZpZWQgaWRlbnRpZmllcnMgZnJvbSBpbmRpdmlkdWFsIGlkZW50\naWZpZXJzLgogKgogKi8KcHVibGljIGNsYXNzIFF1YWxpZmllZERCSWRlbnRp\nZmllciBleHRlbmRzIERCSWRlbnRpZmllciBpbXBsZW1lbnRzIElkZW50aWZp\nZXIsIENsb25lYWJsZSwgU2VyaWFsaXphYmxlIHsKICAgIAogICAgcHJpdmF0\nZSBEQklkZW50aWZpZXIgX3NjaGVtYU5hbWUgPSBEQklkZW50aWZpZXIuTlVM\nTDsgIC8vIFRoZSBzY2hlbWEgbmFtZQogICAgLy8gVGhlIHRhYmxlIG5hbWUg\naWYgdGhlIG9iamVjdCAoY29sdW1uLCBjb25zdHJhaW50KSBpcyBxdWFsaWZp\nZWQgYnkgYSB0YWJsZSBuYW1lCiAgICBwcml2YXRlIERCSWRlbnRpZmllciBf\nb2JqZWN0VGFibGVOYW1lID0gREJJZGVudGlmaWVyLk5VTEw7IAogICAgCiAg\nICAKICAgIHByb3RlY3RlZCBRdWFsaWZpZWREQklkZW50aWZpZXIoREJJZGVu\ndGlmaWVyLi4uIHNOYW1lcykgewogICAgICAgIHNldFBhdGgoc05hbWVzKTsK\nICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBDcmVhdGVzIGEgcXVhbGlmaWVk\nIGlkZW50aWZpZXIgYmFzZWQgdXBvbiBhbiBhcnJheSBvZiBEQklkZW50aWZp\nZXJzLiAgSWRlbnRpZmllcnMKICAgICAqIG11c3QgYmUgc3BlY2lmaWVkIGlu\nIG9yZGVyLgogICAgICogQHBhcmFtIG5hbWVzCiAgICAgKiBAcmV0dXJuCiAg\nICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgUXVhbGlmaWVkREJJZGVudGlmaWVy\nIG5ld1BhdGgoREJJZGVudGlmaWVyLi4ubmFtZXMpIHsKICAgICAgICByZXR1\ncm4gbmV3IFF1YWxpZmllZERCSWRlbnRpZmllcihuYW1lcyk7CiAgICB9CiAg\nICAKICAgIC8qKgogICAgICogU2V0IHRoZSBpZGVudGlmaWVycyB0aGF0IG1h\na2UgdXAgdGhlIHBhdGguICBJZGVudGlmaWVycyBtdXN0IGJlIHNwZWNpZmll\nZAogICAgICogaW4gcGF0aCBvcmRlci4gIChleC4gWyB0YWJsZSwgY29sdW1u\nIF0gKQogICAgICogQHBhcmFtIHNOYW1lcwogICAgICovCiAgICBwdWJsaWMg\ndm9pZCBzZXRQYXRoKERCSWRlbnRpZmllci4uLnNOYW1lcykgewogICAgICAg\nIHJlc2V0TmFtZXMoKTsKICAgICAgICBpZiAoc05hbWVzID09IG51bGwgfHwg\nc05hbWVzLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgIHJldHVybjsKICAg\nICAgICB9CiAgICAgICAgCiAgICAgICAgaWYgKHNOYW1lcy5sZW5ndGggPT0g\nMSkgewogICAgICAgICAgICBEQklkZW50aWZpZXIgc05hbWUgPSBzTmFtZXNb\nMF07CiAgICAgICAgICAgIGlmIChzTmFtZS5nZXRUeXBlKCkgPT0gREJJZGVu\ndGlmaWVyVHlwZS5TQ0hFTUEpIHsKICAgICAgICAgICAgICAgIHNldFNjaGVt\nYU5hbWUoc05hbWUuY2xvbmUoKSk7CiAgICAgICAgICAgIH0KICAgICAgICAg\nICAgc2V0TmFtZShzTmFtZS5jbG9uZSgpKTsKICAgICAgICAgICAgc2V0VHlw\nZShzTmFtZS5nZXRUeXBlKCkpOwogICAgICAgICAgICByZXR1cm47CiAgICAg\nICAgfQoKICAgICAgICBmb3IgKGludCBpID0gKHNOYW1lcy5sZW5ndGggLSAx\nKTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICAgICAgREJJZGVudGlmaWVyIHNO\nYW1lID0gc05hbWVzW2ldOwogICAgICAgICAgICBpZiAoREJJZGVudGlmaWVy\nLmlzTnVsbChzTmFtZSkpIHsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwog\nICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChpID09IChzTmFtZXMubGVu\nZ3RoIC0gMSkgJiYgc05hbWVzLmxlbmd0aCAhPSAxKSB7CiAgICAgICAgICAg\nICAgICBzZXROYW1lKHNOYW1lLmNsb25lKCkpOwogICAgICAgICAgICB9IGVs\nc2UgewogICAgICAgICAgICAgICAgaWYgKHNOYW1lLmdldFR5cGUoKSA9PSBE\nQklkZW50aWZpZXJUeXBlLlNDSEVNQSkgewogICAgICAgICAgICAgICAgICAg\nIHNldFNjaGVtYU5hbWUoc05hbWUuY2xvbmUoKSk7CiAgICAgICAgICAgICAg\nICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmIChzTmFtZS5nZXRUeXBlKCkg\nPT0gREJJZGVudGlmaWVyVHlwZS5UQUJMRSkgewogICAgICAgICAgICAgICAg\nICAgIHNldE9iamVjdFRhYmxlTmFtZShzTmFtZS5jbG9uZSgpKTsKICAgICAg\nICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0gICAKICAgIH0K\nICAgIAogICAgLy8gUmVzZXQgdGhlIHBhdGggbmFtZXMKICAgIHByaXZhdGUg\ndm9pZCByZXNldE5hbWVzKCkgewogICAgICAgIF9zY2hlbWFOYW1lID0gREJJ\nZGVudGlmaWVyLk5VTEw7CiAgICAgICAgX29iamVjdFRhYmxlTmFtZSA9IERC\nSWRlbnRpZmllci5OVUxMOwogICAgfQoKICAgIC8qKgogICAgICogU3BsaXRz\nIGEgcXVhbGlmaWVkIHBhdGggaW50byBzZXBhcmF0ZSBpZGVudGlmaWVycy4K\nICAgICAqIEBwYXJhbSBzTmFtZQogICAgICogQHJldHVybgogICAgICovCiAg\nICBwdWJsaWMgc3RhdGljIERCSWRlbnRpZmllcltdIHNwbGl0UGF0aChEQklk\nZW50aWZpZXIgc05hbWUpIHsKICAgICAgICBpZiAoc05hbWUgaW5zdGFuY2Vv\nZiBRdWFsaWZpZWREQklkZW50aWZpZXIgJiYgc05hbWUuZ2V0VHlwZSgpICE9\nIERCSWRlbnRpZmllclR5cGUuU0NIRU1BKSB7CiAgICAgICAgICAgIFF1YWxp\nZmllZERCSWRlbnRpZmllciBwYXRoID0gKFF1YWxpZmllZERCSWRlbnRpZmll\ncilzTmFtZTsKICAgICAgICAgICAgTGlzdDxEQklkZW50aWZpZXI+IG5hbWVz\nID0gbmV3IEFycmF5TGlzdDxEQklkZW50aWZpZXI+KCk7CiAgICAgICAgICAg\nIAogICAgICAgICAgICBpZiAoIURCSWRlbnRpZmllci5pc051bGwocGF0aC5n\nZXRTY2hlbWFOYW1lKCkpKSB7CiAgICAgICAgICAgICAgICBuYW1lcy5hZGQo\ncGF0aC5nZXRTY2hlbWFOYW1lKCkuY2xvbmUoKSk7CiAgICAgICAgICAgIH0K\nICAgICAgICAgICAgaWYgKCFEQklkZW50aWZpZXIuaXNOdWxsKHBhdGguZ2V0\nT2JqZWN0VGFibGVOYW1lKCkpKSB7CiAgICAgICAgICAgICAgICBuYW1lcy5h\nZGQocGF0aC5nZXRPYmplY3RUYWJsZU5hbWUoKS5jbG9uZSgpKTsKICAgICAg\nICAgICAgfQogICAgICAgICAgICBpZiAoIURCSWRlbnRpZmllci5pc051bGwo\ncGF0aC5nZXRJZGVudGlmaWVyKCkpKSB7CiAgICAgICAgICAgICAgICBuYW1l\ncy5hZGQoKChEQklkZW50aWZpZXIpcGF0aCkuY2xvbmUoKSk7CiAgICAgICAg\nICAgIH0KICAgICAgICAgICAgcmV0dXJuIG5hbWVzLnRvQXJyYXkobmV3IERC\nSWRlbnRpZmllcltuYW1lcy5zaXplKCldKTsKICAgICAgICB9CiAgICAgICAg\naWYgKHNOYW1lIGluc3RhbmNlb2YgREJJZGVudGlmaWVyKSB7CiAgICAgICAg\nICAgIHJldHVybiBuZXcgREJJZGVudGlmaWVyW10geyBzTmFtZS5jbG9uZSgp\nIH07CiAgICAgICAgfQogICAgICAgIHJldHVybiBuZXcgREJJZGVudGlmaWVy\nW10ge307CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGVzIGEgcXVhbGlm\naWVkIHBhdGggZnJvbSBhbiBpZGVudGlmaWVyLgogICAgICogQHBhcmFtIHNO\nYW1lCiAgICAgKiBAcmV0dXJuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMg\nUXVhbGlmaWVkREJJZGVudGlmaWVyIGdldFBhdGgoREJJZGVudGlmaWVyIHNO\nYW1lKSB7CiAgICAgICAgaWYgKHNOYW1lIGluc3RhbmNlb2YgUXVhbGlmaWVk\nREJJZGVudGlmaWVyKSB7CiAgICAgICAgICAgIHJldHVybiAoUXVhbGlmaWVk\nREJJZGVudGlmaWVyKXNOYW1lLmNsb25lKCk7CiAgICAgICAgfQogICAgICAg\nIHJldHVybiBRdWFsaWZpZWREQklkZW50aWZpZXIubmV3UGF0aChzTmFtZSk7\nCiAgICB9CgogICAgLyoqCiAgICAgKlNldHMgdGhlIHNjaGVtYSBjb21wb25l\nbnQgb2YgdGhlIHBhdGguCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFNj\naGVtYU5hbWUoREJJZGVudGlmaWVyIHNjaGVtYU5hbWUpIHsKICAgICAgICBf\nc2NoZW1hTmFtZSA9IHNjaGVtYU5hbWU7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBHZXRzIHRoZSBzY2hlbWEgY29tcG9uZW50IG9mIHRoZSBwYXRoLgogICAg\nICogQHJldHVybgogICAgICovCiAgICBwdWJsaWMgREJJZGVudGlmaWVyIGdl\ndFNjaGVtYU5hbWUoKSB7CiAgICAgICAgcmV0dXJuIF9zY2hlbWFOYW1lOwog\nICAgfQoKICAgIC8qKgogICAgICogU2V0cyB0aGUgb2JqZWN0IHRhYmxlIG5h\nbWUgY29tcG9uZW50IG9mIHRoZSBwYXRoLCBpZiB0aGUgcGF0aAogICAgICog\naXMgYSB0YWJsZSBxdWFsaWZpZWQgaWRlbnRpZmllciBzdWNoIGFzIGEgY29u\nc3RyYWludCBvciBjb2x1bW4uCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNl\ndE9iamVjdFRhYmxlTmFtZShEQklkZW50aWZpZXIgb2JqZWN0TmFtZSkgewog\nICAgICAgIF9vYmplY3RUYWJsZU5hbWUgPSBvYmplY3ROYW1lOwogICAgfQoK\nICAgIAogICAgLyoqCiAgICAgKiBHZXRzIHRoZSBvYmplY3QgdGFibGUgbmFt\nZSBjb21wb25lbnQgb2YgdGhlIHBhdGgsIGlmIHRoZSBwYXRoCiAgICAgKiBp\ncyBhIHRhYmxlIHF1YWxpZmllZCBpZGVudGlmaWVyIHN1Y2ggYXMgYSBjb25z\ndHJhaW50IG9yIGNvbHVtbi4KICAgICAqLwogICAgcHVibGljIERCSWRlbnRp\nZmllciBnZXRPYmplY3RUYWJsZU5hbWUoKSB7CiAgICAgICAgcmV0dXJuIF9v\nYmplY3RUYWJsZU5hbWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5z\nIHRydWUgaWYgdGhpcyBvYmplY3QgaXMgbm90IHF1YWxpZmllZCBieSBhIHNj\naGVtYSBjb21wb25lbnQuCiAgICAgKiBAcmV0dXJuCiAgICAgKi8KICAgIHB1\nYmxpYyBib29sZWFuIGlzVW5xdWFsaWZpZWRPYmplY3QoKSB7CiAgICAgICAg\ncmV0dXJuIERCSWRlbnRpZmllci5pc051bGwoZ2V0U2NoZW1hTmFtZSgpKTsK\nICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIG9i\namVjdCBpcyBub3QgcXVhbGlmaWVkIGJ5IGEgdGFibGUgb3Igc2NoZW1hIAog\nICAgICogY29tcG9uZW50LgogICAgICogQHJldHVybgogICAgICovCiAgICBw\ndWJsaWMgYm9vbGVhbiBpc1VucXVhbGlmaWVkQ29sdW1uKCkgewogICAgICAg\nIHJldHVybiBEQklkZW50aWZpZXIuaXNOdWxsKGdldE9iamVjdFRhYmxlTmFt\nZSgpKSAmJiBEQklkZW50aWZpZXIuaXNOdWxsKGdldFNjaGVtYU5hbWUoKSk7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBFcXVhbGl0eSBvcGVyYXRvci4KICAg\nICAqLwogICAgcHVibGljIGJvb2xlYW4gZXF1YWxzKE9iamVjdCBvYmopIHsK\nICAgICAgICBpZiAob2JqID09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJu\nIGZhbHNlOwogICAgICAgIH0KICAgICAgICBpZiAob2JqIGluc3RhbmNlb2Yg\nUXVhbGlmaWVkREJJZGVudGlmaWVyKSB7CiAgICAgICAgICAgIFF1YWxpZmll\nZERCSWRlbnRpZmllciBzUGF0aCA9IChRdWFsaWZpZWREQklkZW50aWZpZXIp\nb2JqOwogICAgICAgICAgICByZXR1cm4gREJJZGVudGlmaWVyLmVxdWFsKHNQ\nYXRoLmdldFNjaGVtYU5hbWUoKSwgZ2V0U2NoZW1hTmFtZSgpKSAmJgogICAg\nICAgICAgICAgICAgREJJZGVudGlmaWVyLmVxdWFsKHNQYXRoLmdldE9iamVj\ndFRhYmxlTmFtZSgpLCBnZXRPYmplY3RUYWJsZU5hbWUoKSkgJiYKICAgICAg\nICAgICAgICAgIERCSWRlbnRpZmllci5lcXVhbChzUGF0aCwgdGhpcyk7CiAg\nICAgICAgICAgIAogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChvYmogaW5z\ndGFuY2VvZiBEQklkZW50aWZpZXIpIHsKICAgICAgICAgICAgREJJZGVudGlm\naWVyIHNOYW1lID0gKERCSWRlbnRpZmllcilvYmo7CiAgICAgICAgICAgIHJl\ndHVybiBEQklkZW50aWZpZXIuZXF1YWwoc05hbWUsIHRoaXMpOwogICAgICAg\nIH0gZWxzZSBpZiAob2JqIGluc3RhbmNlb2YgU3RyaW5nKSB7CiAgICAgICAg\nICAgIHJldHVybiBvYmouZXF1YWxzKHRoaXMuZ2V0TmFtZSgpKTsKICAgICAg\nICB9CiAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlv\nbigiQ2Fubm90IGNvbXBhcmUgdG8gdHlwZTogIiArIG9iai5nZXRDbGFzcygp\nLmdldE5hbWUoKSk7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogQ29tcGFy\nZXMgdHdvIHF1YWxpZmllZCBpZGVudGlmaWVycyBmb3IgZXF1YWxpdHkuCiAg\nICAgKiBAcGFyYW0gcGF0aDEKICAgICAqIEBwYXJhbSBwYXRoMgogICAgICog\nQHJldHVybgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGJvb2xlYW4gcGF0\naEVxdWFsKFF1YWxpZmllZERCSWRlbnRpZmllciBwYXRoMSwgUXVhbGlmaWVk\nREJJZGVudGlmaWVyIHBhdGgyKSB7CiAgICAgICAgaWYgKHBhdGgxID09IG51\nbGwgJiYgcGF0aDIgPT0gbnVsbCkgewogICAgICAgICAgICByZXR1cm4gdHJ1\nZTsKICAgICAgICB9CiAgICAgICAgaWYgKHBhdGgxID09IG51bGwpIHsKICAg\nICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBEQklk\nZW50aWZpZXJbXSBuYW1lczEgPSBRdWFsaWZpZWREQklkZW50aWZpZXIuc3Bs\naXRQYXRoKHBhdGgxKTsKICAgICAgICBEQklkZW50aWZpZXJbXSBuYW1lczIg\nPSBRdWFsaWZpZWREQklkZW50aWZpZXIuc3BsaXRQYXRoKHBhdGgyKTsKICAg\nICAgICBpZiAobmFtZXMxLmxlbmd0aCAhPSBuYW1lczIubGVuZ3RoKSB7CiAg\nICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgZm9y\nIChpbnQgaSA9IDA7IGkgPCBuYW1lczEubGVuZ3RoOyBpKyspIHsKICAgICAg\nICAgICAgaWYgKCFEQklkZW50aWZpZXIuZXF1YWwobmFtZXMxW2ldLCBuYW1l\nczJbaV0pKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAg\nICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGEgZnVsbHkgcXVhbGlmaWVkIG5h\nbWUgYXMgYSBzdHJpbmcuCiAgICAgKi8KICAgIHB1YmxpYyBTdHJpbmcgdG9T\ndHJpbmcoKSB7CiAgICAgICAgcmV0dXJuIGdldE5hbWUoKTsKICAgIH0KCiAg\nICAvKioKICAgICAqIFJldHVybnMgdGhlIGZ1bGx5IHF1YWxpZmllZCBuYW1l\nIGFzIGEgc3RyaW5nCiAgICAgKi8KICAgIHB1YmxpYyBTdHJpbmcgZ2V0TmFt\nZSgpIHsKICAgICAgICAvLyBJZiBubyBzY2hlbWEgb3Igb2JqZWN0IG9yIHRh\nYmxlIHF1YWxpZmllciwgcmV0dXJuIHRoZSBiYXNlIG5hbWUKICAgICAgICBp\nZiAoREJJZGVudGlmaWVyLmlzRW1wdHkoX3NjaGVtYU5hbWUpICYmIERCSWRl\nbnRpZmllci5pc0VtcHR5KF9vYmplY3RUYWJsZU5hbWUpKSB7CiAgICAgICAg\nICAgIHJldHVybiBnZXRCYXNlTmFtZSgpOwogICAgICAgIH0KICAgICAgICBE\nQklkZW50aWZpZXJbXSBuYW1lcyA9IFF1YWxpZmllZERCSWRlbnRpZmllci5z\ncGxpdFBhdGgodGhpcyk7CiAgICAgICAgcmV0dXJuIERCSWRlbnRpZmllci5q\nb2luKG5hbWVzKTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBSZXR1cm5z\nIHRoZSBiYXNlIG5hbWUgb2YgdGhpcyBxdWFsaWZpZWQgbmFtZS4gIEZvciBl\neGFtcGxlLCBpZiB0aGUgCiAgICAgKiBxdWFsaWZpZWQgbmFtZSBpcyBhIHNj\naGVtYSBxdWFsaWZpZWQgdGFibGUsIHRoZSB0YWJsZSBuYW1lIGlzIHJldHVy\nbmVkLgogICAgICogQHJldHVybgogICAgICovCiAgICBwdWJsaWMgU3RyaW5n\nIGdldEJhc2VOYW1lKCkgewogICAgICAgIHJldHVybiBzdXBlci5nZXROYW1l\nKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoaXMgb2JqZWN0\nIGFzIGEgREJJZGVudGlmaWVyLgogICAgICogQHJldHVybgogICAgICovCiAg\nICBwdWJsaWMgREJJZGVudGlmaWVyIGdldElkZW50aWZpZXIoKSB7CiAgICAg\nICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogU2V0\nIHRoZSBuYW1lIG9mIHRoaXMgcXVhbGlmaWVkIGlkZW50aWZpZXIuICBTcGxp\ndHMgdGhlIHN0cmluZyBpbnRvCiAgICAgKiBtdWx0aXBsZSBjb21wb25lbnRz\nLiAgVGhpcyBtZXRob2QgYXNzdW1lcyB0aGUgdHlwZSBkb2VzIG5vdCBjaGFu\nZ2UuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldE5hbWUoU3RyaW5nIG5h\nbWUpIHsKICAgICAgICAvLyBTcGxpdCBhcGFydCBuYW1lIGludG8gY29tcG9u\nZW50cwogICAgICAgIERCSWRlbnRpZmllcltdIHNOYW1lcyA9IERCSWRlbnRp\nZmllci5zcGxpdChnZXRUeXBlKCksIG5hbWUpOwogICAgICAgIHNldFBhdGgo\nc05hbWVzKTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCB0aGUgYmFzZSBu\nYW1lIGNvbXBvbmVudCBvZiB0aGlzIGNvbXBvdW5kIGlkZW50aWZpZXIKICAg\nICAqIEBwYXJhbSBuYW1lCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIHNl\ndEJhc2VOYW1lKFN0cmluZyBuYW1lKSB7CiAgICAgICAgc3VwZXIuc2V0TmFt\nZShuYW1lKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGxl\nbmd0aCBvZiB0aGUgcXVhbGlmaWVkIGlkZW50aWZpZXIsIGluY2x1ZGluZyBk\nZWxpbWl0ZXJzCiAgICAgKiBhbmQgbmFtZSBzZXBhcmF0b3JzLgogICAgICov\nCiAgICBwdWJsaWMgaW50IGxlbmd0aCgpIHsKICAgICAgICBTdHJpbmcgbmFt\nZSA9IGdldE5hbWUoKTsKICAgICAgICBpZiAobmFtZSA9PSBudWxsKSB7CiAg\nICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KICAgICAgICByZXR1cm4g\nbmFtZS5sZW5ndGgoKTsKICAgIH0KCiAgICAvKioKICAgICAqIENvbXBhcmVz\nIHRoaXMgaWRlbnRpZmllciB3aXRoIGFub3RoZXIgaWRlbnRpZmllci4KICAg\nICAqLwogICAgcHVibGljIGludCBjb21wYXJlVG8oSWRlbnRpZmllciBvKSB7\nCiAgICAgICAgaWYgKG8gaW5zdGFuY2VvZiBEQklkZW50aWZpZXIpIHsKICAg\nICAgICAgICAgaWYgKG8gPT0gbnVsbCB8fCBvID09IERCSWRlbnRpZmllci5O\nVUxMKQogICAgICAgICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgICAgICBy\nZXR1cm4gc3VwZXIuY29tcGFyZVRvKG8pOwogICAgICAgIH0KICAgICAgICBy\nZXR1cm4gZ2V0TmFtZSgpLmNvbXBhcmVUbyhvLmdldE5hbWUoKSk7CiAgICB9\nCiAgICAKICAgIC8qKgogICAgICogUmV0dXJucyB0cnVlIGlmIGFsbCBpZGVu\ndGlmaWVycyB3aXRoaW4gdGhpcyBjb21wb3VuZCBpZGVudGlmaWVyIGFyZQog\nICAgICogZGVsaW1pdGVkLiBPdGhlcndpc2UsIGZhbHNlLgogICAgICovCiAg\nICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBib29sZWFuIGlzRGVsaW1pdGVkKCkg\newogICAgICAgIGlmIChEQklkZW50aWZpZXIuaXNFbXB0eSh0aGlzKSkgewog\nICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGlm\nICghREJJZGVudGlmaWVyLmlzTnVsbChnZXRPYmplY3RUYWJsZU5hbWUoKSkp\nIHsKICAgICAgICAgICAgaWYgKCFOb3JtYWxpemVyLmlzRGVsaW1pdGVkKGdl\ndE9iamVjdFRhYmxlTmFtZSgpLmdldE5hbWUoKSkpIHsKICAgICAgICAgICAg\nICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAg\nICAgICBpZiAoIURCSWRlbnRpZmllci5pc051bGwoZ2V0U2NoZW1hTmFtZSgp\nKSkgewogICAgICAgICAgICBpZiAoIU5vcm1hbGl6ZXIuaXNEZWxpbWl0ZWQo\nZ2V0U2NoZW1hTmFtZSgpLmdldE5hbWUoKSkpIHsKICAgICAgICAgICAgICAg\nIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAg\nICByZXR1cm4gc3VwZXIuaXNEZWxpbWl0ZWQoKTsKICAgIH0KICAgIAogICAg\nLyoqCiAgICAgKiBSZXR1cm5zIGEgbmV3IHVucXVhbGlmaWVkIG5hbWUgYmFz\nZWQgb24gdGhpcyBpbnN0YW5jZS4KICAgICAqLwogICAgQE92ZXJyaWRlCiAg\nICBwdWJsaWMgREJJZGVudGlmaWVyIGdldFVucXVhbGlmaWVkTmFtZSgpIHsK\nICAgICAgICBRdWFsaWZpZWREQklkZW50aWZpZXIgbmV3TmFtZSA9IChRdWFs\naWZpZWREQklkZW50aWZpZXIpY2xvbmUoKTsKICAgICAgICBuZXdOYW1lLnNl\ndE9iamVjdFRhYmxlTmFtZShEQklkZW50aWZpZXIuTlVMTCk7CiAgICAgICAg\nbmV3TmFtZS5zZXRTY2hlbWFOYW1lKERCSWRlbnRpZmllci5OVUxMKTsKICAg\nICAgICByZXR1cm4gbmV3TmFtZTsKICAgIH0KICAgIAogICAgLyoqCiAgICAg\nKiBDcmVhdGVzIGEgY2xvbmUgb2YgdGhpcyBpZGVudGlmaWVyLgogICAgICov\nCiAgICBwdWJsaWMgUXVhbGlmaWVkREJJZGVudGlmaWVyIGNsb25lKCkgewog\nICAgICAgIFF1YWxpZmllZERCSWRlbnRpZmllciBzUGF0aCA9IG5ldyBRdWFs\naWZpZWREQklkZW50aWZpZXIoKTsKICAgICAgICBzUGF0aC5zZXRPYmplY3RU\nYWJsZU5hbWUoZ2V0T2JqZWN0VGFibGVOYW1lKCkuY2xvbmUoKSk7CiAgICAg\nICAgc1BhdGguc2V0U2NoZW1hTmFtZShnZXRTY2hlbWFOYW1lKCkuY2xvbmUo\nKSk7CiAgICAgICAgc1BhdGguc2V0QmFzZU5hbWUoc3VwZXIuZ2V0TmFtZSgp\nKTsKICAgICAgICBzUGF0aC5zZXRUeXBlKGdldFR5cGUoKSk7CiAgICAgICAg\ncmV0dXJuIHNQYXRoOwogICAgfQoKfQo=\n","encoding":"base64"}

