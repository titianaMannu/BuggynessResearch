{"sha":"8ad2787893ef250bef1fbc56802d05c5608a8b14","node_id":"MDQ6QmxvYjIwNjM2NDo4YWQyNzg3ODkzZWYyNTBiZWYxZmJjNTY4MDJkMDVjNTYwOGE4YjE0","size":9465,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/8ad2787893ef250bef1fbc56802d05c5608a8b14","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWw7CgppbXBv\ncnQgamF2YS5zcWwuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmEuc3FsLlNRTEV4\nY2VwdGlvbjsKaW1wb3J0IGphdmEuc3FsLlR5cGVzOwppbXBvcnQgamF2YS51\ndGlsLkhhc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuTWFwOwoKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5qZGJjLmNvbmYuSkRCQ0NvbmZpZ3VyYXRpb247\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5jb25mLkpEQkNDb25m\naWd1cmF0aW9uSW1wbDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLm1ldGEuQ2xhc3NNYXBwaW5nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMubWV0YS5NYXBwaW5nUmVwb3NpdG9yeTsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLnNjaGVtYS5Db2x1bW47CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuVGFibGU7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEuamRiYy5zcWwuREJEaWN0aW9uYXJ5OwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmxpYi5jb25mLkNvbmZpZ3VyYXRpb25zOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5tZXRhLkNsYXNzQXJnUGFyc2Vy\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkxvY2FsaXpl\ncjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5PcHRpb25z\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuSmF2YVR5cGVzOwoK\nLyoqCiAqIFNwZWNpYWxpemF0aW9uIG9mIHRoZSB7QGxpbmsgVGFibGVKREJD\nU2VxfSB0aGF0IG1haW50YWlucyBhCiAqIHNlcGFyYXRlIHNlcXVlbmNlIGNv\ndW50IHBlci1jbGFzcy4gVGFibGUgbmFtZSBkZWZhdWx0cyB0bwogKiA8Y29k\nZT5PUEVOSlBBX1NFUVVFTkNFU19UQUJMRTwvY29kZT4uCiAqCiAqIEBhdXRo\nb3IgQWJlIFdoaXRlCiAqLwpwdWJsaWMgY2xhc3MgQ2xhc3NUYWJsZUpEQkNT\nZXEgCiAgICBleHRlbmRzIFRhYmxlSkRCQ1NlcSB7CgogICAgcHJpdmF0ZSBz\ndGF0aWMgZmluYWwgTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6ZXIuZm9yUGFj\na2FnZQogICAgICAgIChDbGFzc1RhYmxlSkRCQ1NlcS5jbGFzcyk7CgogICAg\ncHJpdmF0ZSBmaW5hbCBNYXA8U3RyaW5nLCBTdGF0dXM+IF9zdGF0cyA9IG5l\ndyBIYXNoTWFwPFN0cmluZywgU3RhdHVzPigpOwogICAgcHJpdmF0ZSBib29s\nZWFuIF9pZ25vcmUgPSBmYWxzZTsKICAgIHByaXZhdGUgYm9vbGVhbiBfYWxp\nYXNlcyA9IGZhbHNlOwoKICAgIHB1YmxpYyBDbGFzc1RhYmxlSkRCQ1NlcSgp\nIHsKICAgICAgICBzZXRUYWJsZSgiT1BFTkpQQV9TRVFVRU5DRVNfVEFCTEUi\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdW5tYXBwZWQgY2xh\nc3NlcyBzaG91bGQgYmUgaWdub3JlZCBhcyBwb3NzaWJsZSBwcmltYXJ5CiAg\nICAgKiBrZXkgdmFsdWVzIGluIHRoZSB0YWJsZS4gRGVmYXVsdHMgdG8gZmFs\nc2UuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGdldElnbm9yZVVubWFw\ncGVkKCkgewogICAgICAgIHJldHVybiBfaWdub3JlOwogICAgfQoKICAgIC8q\nKgogICAgICogV2hldGhlciB1bm1hcHBlZCBjbGFzc2VzIHNob3VsZCBiZSBp\nZ25vcmVkIGFzIHBvc3NpYmxlIHByaW1hcnkKICAgICAqIGtleSB2YWx1ZXMg\naW4gdGhlIHRhYmxlLiBEZWZhdWx0cyB0byBmYWxzZS4KICAgICAqLwogICAg\ncHVibGljIHZvaWQgc2V0SWdub3JlVW5tYXBwZWQoYm9vbGVhbiBpZ25vcmUp\nIHsKICAgICAgICBfaWdub3JlID0gaWdub3JlOwogICAgfQoKICAgIC8qKgog\nICAgICogQGRlcHJlY2F0ZWQgVXNlIHtAbGluayAjc2V0SWdub3JlVW5tYXBw\nZWR9LiBSZXRhaW5lZCBmb3IKICAgICAqIGJhY2t3YXJkcy1jb21wYXRpYmls\naXR5IGZvciBhdXRvLWNvbmZpZ3VyYXRpb24uCiAgICAgKi8KICAgIHB1Ymxp\nYyB2b2lkIHNldElnbm9yZVZpcnR1YWwoYm9vbGVhbiBpZ25vcmUpIHsKICAg\nICAgICBzZXRJZ25vcmVVbm1hcHBlZChpZ25vcmUpOwogICAgfQoKICAgIC8q\nKgogICAgICogV2hldGhlciB0byB1c2UgdHlwZSBhbGlzZXMgZm9yIHByaW1h\ncnkga2V5IHZhbHVlcyBpbiBwbGFjZSBvZiBjbGFzcwogICAgICogbmFtZXMu\nIERlZmF1bHRzIHRvIGZhbHNlLgogICAgICovCiAgICBwdWJsaWMgYm9vbGVh\nbiBnZXRVc2VBbGlhc2VzKCkgewogICAgICAgIHJldHVybiBfYWxpYXNlczsK\nICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8gdXNlIHR5cGUgYWxp\nc2VzIGZvciBwcmltYXJ5IGtleSB2YWx1ZXMgaW4gcGxhY2Ugb2YgY2xhc3MK\nICAgICAqIG5hbWVzLiBEZWZhdWx0cyB0byBmYWxzZS4KICAgICAqLwogICAg\ncHVibGljIHZvaWQgc2V0VXNlQWxpYXNlcyhib29sZWFuIGFsaWFzZXMpIHsK\nICAgICAgICBfYWxpYXNlcyA9IGFsaWFzZXM7CiAgICB9CgogICAgcHJvdGVj\ndGVkIHN5bmNocm9uaXplZCBTdGF0dXMgZ2V0U3RhdHVzKENsYXNzTWFwcGlu\nZyBtYXBwaW5nKSB7CiAgICAgICAgaWYgKG1hcHBpbmcgPT0gbnVsbCkKICAg\nICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgU3RyaW5nIGtleSA9IGdl\ndEtleShtYXBwaW5nLCBmYWxzZSk7CiAgICAgICAgU3RhdHVzIHN0YXQgPSAo\nU3RhdHVzKSBfc3RhdHMuZ2V0KGtleSk7CiAgICAgICAgaWYgKHN0YXQgPT0g\nbnVsbCkgewogICAgICAgICAgICBzdGF0ID0gbmV3IFN0YXR1cygpOwogICAg\nICAgICAgICBfc3RhdHMucHV0KGtleSwgc3RhdCk7CiAgICAgICAgfQogICAg\nICAgIHJldHVybiBzdGF0OwogICAgfQoKICAgIHByb3RlY3RlZCBDb2x1bW4g\nYWRkUHJpbWFyeUtleUNvbHVtbihUYWJsZSB0YWJsZSkgewogICAgICAgIERC\nRGljdGlvbmFyeSBkaWN0ID0gZ2V0Q29uZmlndXJhdGlvbigpLmdldERCRGlj\ndGlvbmFyeUluc3RhbmNlKCk7CiAgICAgICAgQ29sdW1uIHBrQ29sdW1uID0g\ndGFibGUuYWRkQ29sdW1uKGRpY3QuZ2V0VmFsaWRDb2x1bW5OYW1lKAogICAg\nICAgICAgICBnZXRQcmltYXJ5S2V5Q29sdW1uSWRlbnRpZmllcigpLCB0YWJs\nZSkpOwogICAgICAgIHBrQ29sdW1uLnNldFR5cGUoZGljdC5nZXRQcmVmZXJy\nZWRUeXBlKFR5cGVzLlZBUkNIQVIpKTsKICAgICAgICBwa0NvbHVtbi5zZXRK\nYXZhVHlwZShKYXZhVHlwZXMuU1RSSU5HKTsKICAgICAgICBwa0NvbHVtbi5z\nZXRTaXplKGRpY3QuY2hhcmFjdGVyQ29sdW1uU2l6ZSk7CiAgICAgICAgcmV0\ndXJuIHBrQ29sdW1uOwogICAgfQoKICAgIHByb3RlY3RlZCBPYmplY3QgZ2V0\nUHJpbWFyeUtleShDbGFzc01hcHBpbmcgbWFwcGluZykgewogICAgICAgIGlm\nIChtYXBwaW5nID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBudWxsOwog\nICAgICAgIHJldHVybiBnZXRLZXkobWFwcGluZywgdHJ1ZSk7CiAgICB9Cgog\nICAgcHJpdmF0ZSBTdHJpbmcgZ2V0S2V5KENsYXNzTWFwcGluZyBtYXBwaW5n\nLCBib29sZWFuIGRiKSB7CiAgICAgICAgaWYgKF9pZ25vcmUpIHsKICAgICAg\nICAgICAgd2hpbGUgKG1hcHBpbmcuZ2V0TWFwcGVkUENTdXBlcmNsYXNzTWFw\ncGluZygpICE9IG51bGwpCiAgICAgICAgICAgICAgICBtYXBwaW5nID0gbWFw\ncGluZy5nZXRNYXBwZWRQQ1N1cGVyY2xhc3NNYXBwaW5nKCk7CiAgICAgICAg\nfSBlbHNlIHsKICAgICAgICAgICAgd2hpbGUgKG1hcHBpbmcuZ2V0UENTdXBl\ncmNsYXNzKCkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIG1hcHBpbmcgPSBt\nYXBwaW5nLmdldFBDU3VwZXJjbGFzc01hcHBpbmcoKTsKICAgICAgICB9CiAg\nICAgICAgaWYgKF9hbGlhc2VzKQogICAgICAgICAgICByZXR1cm4gbWFwcGlu\nZy5nZXRUeXBlQWxpYXMoKTsKICAgICAgICByZXR1cm4gbWFwcGluZy5nZXRE\nZXNjcmliZWRUeXBlKCkuZ2V0TmFtZSgpOwogICAgfQoKICAgIC8vLy8vLy8v\nLwogICAgLy8gTWFpbgogICAgLy8vLy8vLy8vCgogICAgLyoqCiAgICAgKiBV\nc2FnZTogamF2YSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuQ2xh\nc3NUYWJsZUpEQkNTZXEgW29wdGlvbl0qCiAgICAgKiAtYWN0aW9uLy1hICZs\ndDthZGQgfCBkcm9wIHwgZ2V0IHwgc2V0Jmd0OwogICAgICogW2NsYXNzIG5h\nbWUgfCAuamF2YSBmaWxlIHwgLmNsYXNzIGZpbGUgfCAuamRvIGZpbGVdIFt2\nYWx1ZV0KICAgICAqICBXaGVyZSB0aGUgZm9sbG93aW5nIG9wdGlvbnMgYXJl\nIHJlY29nbml6ZWQuCiAgICAgKiA8dWw+CiAgICAgKiA8bGk+PGk+LXByb3Bl\ncnRpZXMvLXAgJmx0O3Byb3BlcnRpZXMgZmlsZSBvciByZXNvdXJjZSZndDs8\nL2k+OiBUaGUKICAgICAqIHBhdGggb3IgcmVzb3VyY2UgbmFtZSBvZiBhIE9w\nZW5KUEEgcHJvcGVydGllcyBmaWxlIGNvbnRhaW5pbmcKICAgICAqIGluZm9y\nbWF0aW9uIHN1Y2ggYXMgY29ubmVjdGlvbiBkYXRhIGFzCiAgICAgKiBvdXRs\naW5lZCBpbiB7QGxpbmsgSkRCQ0NvbmZpZ3VyYXRpb259LiBPcHRpb25hbC48\nL2xpPgogICAgICogPGxpPjxpPi0mbHQ7cHJvcGVydHkgbmFtZSZndDsgJmx0\nO3Byb3BlcnR5IHZhbHVlJmd0OzwvaT46IEFsbCBiZWFuCiAgICAgKiBwcm9w\nZXJ0aWVzIG9mIHRoZSBPcGVuSlBBIHtAbGluayBKREJDQ29uZmlndXJhdGlv\nbn0gY2FuIGJlIHNldCBieQogICAgICogdXNpbmcgdGhlaXIJbmFtZXMgYW5k\nIHN1cHBseWluZyBhIHZhbHVlLjwvbGk+CiAgICAgKiA8L3VsPgogICAgICog\nIFRoZSB2YXJpb3VzIGFjdGlvbnMgYXJlIGFzIGZvbGxvd3MuCiAgICAgKiA8\ndWw+CiAgICAgKiA8bGk+PGk+YWRkPC9pPjogQ3JlYXRlIHRoZSBzZXF1ZW5j\nZSB0YWJsZS48L2xpPgogICAgICogPGxpPjxpPmRyb3A8L2k+OiBEcm9wIHRo\nZSBzZXF1ZW5jZSB0YWJsZS48L2xpPgogICAgICogPGxpPjxpPmdldDwvaT46\nIFByaW50IHRoZSBjdXJyZW50IHNlcXVlbmNlIHZhbHVlIGZvciB0aGUgZ2l2\nZW4KICAgICAqIGNsYXNzLjwvbGk+CiAgICAgKiA8bGk+PGk+c2V0PC9pPjog\nU2V0IHRoZSBzZXF1ZW5jZSB2YWx1ZSBmb3IgdGhlIGdpdmVuIGNsYXNzLjwv\nbGk+CiAgICAgKiA8L3VsPgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIHZv\naWQgbWFpbihTdHJpbmdbXSBhcmdzKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAg\nICAgICBPcHRpb25zIG9wdHMgPSBuZXcgT3B0aW9ucygpOwogICAgICAgIGZp\nbmFsIFN0cmluZ1tdIGFyZ3VtZW50cyA9IG9wdHMuc2V0RnJvbUNtZExpbmUo\nYXJncyk7CiAgICAgICAgYm9vbGVhbiByZXQgPSBDb25maWd1cmF0aW9ucy5y\ndW5BZ2FpbnN0QWxsQW5jaG9ycyhvcHRzLAogICAgICAgICAgICBuZXcgQ29u\nZmlndXJhdGlvbnMuUnVubmFibGUoKSB7CiAgICAgICAgICAgIHB1YmxpYyBi\nb29sZWFuIHJ1bihPcHRpb25zIG9wdHMpIHRocm93cyBFeGNlcHRpb24gewog\nICAgICAgICAgICAgICAgSkRCQ0NvbmZpZ3VyYXRpb24gY29uZiA9IG5ldyBK\nREJDQ29uZmlndXJhdGlvbkltcGwoKTsKICAgICAgICAgICAgICAgIHRyeSB7\nCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIENsYXNzVGFibGVKREJDU2Vx\nLnJ1bihjb25mLCBhcmd1bWVudHMsIG9wdHMpOwogICAgICAgICAgICAgICAg\nfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgICAgICBjb25mLmNsb3NlKCk7\nCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9KTsK\nICAgICAgICBpZiAoIXJldCkKICAgICAgICAgICAgU3lzdGVtLm91dC5wcmlu\ndGxuKF9sb2MuZ2V0KCJjbHN0YWJsZS1zZXEtdXNhZ2UiKSk7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBSdW4gdGhlIHRvb2wuIFJldHVybnMgZmFsc2UgaWYg\naW52YWxpZCBvcHRpb25zIHdlcmUgZ2l2ZW4uCiAgICAgKi8KICAgIHB1Ymxp\nYyBzdGF0aWMgYm9vbGVhbiBydW4oSkRCQ0NvbmZpZ3VyYXRpb24gY29uZiwg\nU3RyaW5nW10gYXJncywKICAgICAgICBPcHRpb25zIG9wdHMpIHRocm93cyBF\neGNlcHRpb24gewogICAgICAgIFN0cmluZyBhY3Rpb24gPSBvcHRzLnJlbW92\nZVByb3BlcnR5KCJhY3Rpb24iLCAiYSIsIG51bGwpOwogICAgICAgIENvbmZp\nZ3VyYXRpb25zLnBvcHVsYXRlQ29uZmlndXJhdGlvbihjb25mLCBvcHRzKTsK\nICAgICAgICByZXR1cm4gcnVuKGNvbmYsIGFyZ3MsIGFjdGlvbiwgbnVsbCwg\nbnVsbCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSdW4gdGhlIHRvb2wuIFJl\ndHVybiBmYWxzZSBpZiBhbiBpbnZhbGlkIG9wdGlvbiB3YXMgZ2l2ZW4uCiAg\nICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgYm9vbGVhbiBydW4oSkRCQ0NvbmZp\nZ3VyYXRpb24gY29uZiwgU3RyaW5nW10gYXJncywKICAgICAgICBTdHJpbmcg\nYWN0aW9uLCBNYXBwaW5nUmVwb3NpdG9yeSByZXBvcywgQ2xhc3NMb2FkZXIg\nbG9hZGVyKQogICAgICAgIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIENs\nYXNzVGFibGVKREJDU2VxIHNlcSA9IG5ldyBDbGFzc1RhYmxlSkRCQ1NlcSgp\nOwogICAgICAgIFN0cmluZyBwcm9wcyA9IENvbmZpZ3VyYXRpb25zLmdldFBy\nb3BlcnRpZXMoY29uZi5nZXRTZXF1ZW5jZSgpKTsKICAgICAgICBDb25maWd1\ncmF0aW9ucy5jb25maWd1cmVJbnN0YW5jZShzZXEsIGNvbmYsIHByb3BzKTsK\nCiAgICAgICAgaWYgKEFDVElPTl9EUk9QLmVxdWFscyhhY3Rpb24pKSB7CiAg\nICAgICAgICAgIGlmIChhcmdzLmxlbmd0aCAhPSAwKQogICAgICAgICAgICAg\nICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICBzZXEuZHJvcFRhYmxlKCk7\nCiAgICAgICAgfSBlbHNlIGlmIChBQ1RJT05fQURELmVxdWFscyhhY3Rpb24p\nKSB7CiAgICAgICAgICAgIGlmIChhcmdzLmxlbmd0aCAhPSAwKQogICAgICAg\nICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICBzZXEucmVmcmVz\naFRhYmxlKCk7CiAgICAgICAgfSBlbHNlIGlmIChBQ1RJT05fR0VULmVxdWFs\ncyhhY3Rpb24pIHx8IEFDVElPTl9TRVQuZXF1YWxzKGFjdGlvbikpIHsKICAg\nICAgICAgICAgaWYgKGFyZ3MubGVuZ3RoID09IDApCiAgICAgICAgICAgICAg\nICByZXR1cm4gZmFsc2U7CgogICAgICAgICAgICBpZiAobG9hZGVyID09IG51\nbGwpCiAgICAgICAgICAgICAgICBsb2FkZXIgPSBjb25mLmdldENsYXNzUmVz\nb2x2ZXJJbnN0YW5jZSgpLmdldENsYXNzTG9hZGVyKAogICAgICAgICAgICAg\nICAgICAgIENsYXNzVGFibGVKREJDU2VxLmNsYXNzLCBudWxsKTsKCiAgICAg\nICAgICAgIENsYXNzQXJnUGFyc2VyIGNhcCA9IGNvbmYuZ2V0TWV0YURhdGFS\nZXBvc2l0b3J5SW5zdGFuY2UoKQogICAgICAgICAgICAgICAgLmdldE1ldGFE\nYXRhRmFjdG9yeSgpLm5ld0NsYXNzQXJnUGFyc2VyKCk7CiAgICAgICAgICAg\nIGNhcC5zZXRDbGFzc0xvYWRlcihsb2FkZXIpOwogICAgICAgICAgICBDbGFz\nczw/PiBjbHMgPSBjYXAucGFyc2VUeXBlcyhhcmdzWzBdKVswXTsKCiAgICAg\nICAgICAgIGlmIChyZXBvcyA9PSBudWxsKQogICAgICAgICAgICAgICAgcmVw\nb3MgPSBjb25mLmdldE1hcHBpbmdSZXBvc2l0b3J5SW5zdGFuY2UoKTsKICAg\nICAgICAgICAgQ2xhc3NNYXBwaW5nIG1hcHBpbmcgPSByZXBvcy5nZXRNYXBw\naW5nKGNscywgbnVsbCwgdHJ1ZSk7CgogICAgICAgICAgICBDb25uZWN0aW9u\nIGNvbm4gPSBjb25mLmdldERhdGFTb3VyY2UyKG51bGwpLmdldENvbm5lY3Rp\nb24oKTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGxvbmcg\nY3VyID0gc2VxLmdldFNlcXVlbmNlKG1hcHBpbmcsIGNvbm4pOwogICAgICAg\nICAgICAgICAgaWYgKEFDVElPTl9HRVQuZXF1YWxzKGFjdGlvbikpCiAgICAg\nICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKG1hcHBpbmcgKyAi\nOiAiICsgY3VyKTsKICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAg\nICAgICAgICAgIGxvbmcgc2V0OwogICAgICAgICAgICAgICAgICAgIGlmIChh\ncmdzLmxlbmd0aCA+IDEpCiAgICAgICAgICAgICAgICAgICAgICAgIHNldCA9\nIExvbmcucGFyc2VMb25nKGFyZ3NbMV0pOwogICAgICAgICAgICAgICAgICAg\nIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgc2V0ID0gY3VyICsgc2Vx\nLmdldEFsbG9jYXRlKCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHNldCA8\nIGN1cikKICAgICAgICAgICAgICAgICAgICAgICAgc2V0ID0gY3VyOwogICAg\nICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAg\nICBTdGF0dXMgc3RhdCA9IHNlcS5nZXRTdGF0dXMobWFwcGluZyk7CiAgICAg\nICAgICAgICAgICAgICAgICAgIHNlcS5zZXRTZXF1ZW5jZShudWxsLCBzdGF0\nLCAoaW50KSAoc2V0IC0gY3VyKSwgdHJ1ZSwKICAgICAgICAgICAgICAgICAg\nICAgICAgICAgIGNvbm4pOwogICAgICAgICAgICAgICAgICAgICAgICBzZXQg\nPSBzdGF0LnNlcTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAg\nICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKG1hcHBpbmcgKyAiOiAiICsg\nc2V0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCAo\nTnVtYmVyRm9ybWF0RXhjZXB0aW9uIG5mZSkgewogICAgICAgICAgICAgICAg\ncmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAg\nICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBjb25uLmNsb3Nl\nKCk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gc2Up\nIHsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0g\nZWxzZQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgcmV0dXJu\nIHRydWU7CiAgICB9Cn0K\n","encoding":"base64"}

