{"sha":"f4dae06d2aad9f56c7fd0b308fa7fa23c32c352b","node_id":"MDQ6QmxvYjIwNjM2NDpmNGRhZTA2ZDJhYWQ5ZjU2YzdmZDBiMzA4ZmE3ZmEyM2MzMmMzNTJi","size":13332,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/f4dae06d2aad9f56c7fd0b308fa7fa23c32c352b","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWw7CgppbXBv\ncnQgamF2YS5zcWwuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmEuc3FsLlByZXBh\ncmVkU3RhdGVtZW50OwppbXBvcnQgamF2YS5zcWwuUmVzdWx0U2V0OwppbXBv\ncnQgamF2YS5zcWwuU1FMRXhjZXB0aW9uOwppbXBvcnQgamF2YS50ZXh0Lk1l\nc3NhZ2VGb3JtYXQ7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmNvbmYu\nT3BlbkpQQUNvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEuamRiYy5jb25mLkpEQkNDb25maWd1cmF0aW9uOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMuY29uZi5KREJDQ29uZmlndXJhdGlvbkltcGw7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5pZGVudGlmaWVyLkRC\nSWRlbnRpZmllcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmlk\nZW50aWZpZXIuUXVhbGlmaWVkREJJZGVudGlmaWVyOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMubWV0YS5DbGFzc01hcHBpbmc7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuU2NoZW1hOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLlNjaGVtYUdyb3VwOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLlNjaGVtYVRv\nb2w7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuU2No\nZW1hczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5T\nZXF1ZW5jZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5E\nQkRpY3Rpb25hcnk7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmNv\nbmYuQ29uZmlndXJhYmxlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxp\nYi5jb25mLkNvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEubGliLmNvbmYuQ29uZmlndXJhdGlvbnM7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEubGliLmxvZy5Mb2c7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEubGliLnV0aWwuTG9jYWxpemVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmxpYi51dGlsLk9wdGlvbnM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5q\ncGEudXRpbC5NZXRhRGF0YUV4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS51dGlsLlVzZXJFeGNlcHRpb247CgppbXBvcnQgc2VycC51dGls\nLk51bWJlcnM7CmltcG9ydCBzZXJwLnV0aWwuU3RyaW5nczsKCi8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vCi8vIE5PVEU6IERvIG5vdCBjaGFuZ2UgcHJvcGVydHkgbmFtZXM7\nIHNlZSBTZXF1ZW5jZU1ldGFEYXRhCi8vIGFuZCBTZXF1ZW5jZU1hcHBpbmcg\nZm9yIHN0YW5kYXJkIHByb3BlcnR5IG5hbWVzLgovLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8K\nCi8qKgogKiB7QGxpbmsgSkRCQ1NlcX0gaW1wbGVtZW50YXRpb24gdGhhdCB1\nc2VzIGEgZGF0YWJhc2Ugc2VxdWVuY2VzCiAqIHRvIGdlbmVyYXRlIG51bWJl\ncnMuCiAqCiAqIEBzZWUgSkRCQ1NlcQogKiBAc2VlIEFic3RyYWN0SkRCQ1Nl\ncQogKi8KcHVibGljIGNsYXNzIE5hdGl2ZUpEQkNTZXEKICAgIGV4dGVuZHMg\nQWJzdHJhY3RKREJDU2VxCiAgICBpbXBsZW1lbnRzIENvbmZpZ3VyYWJsZSB7\nCgogICAgcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgQUNUSU9OX0RST1Ag\nPSAiZHJvcCI7CiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmluZyBBQ1RJ\nT05fQUREID0gImFkZCI7CiAgICBwdWJsaWMgc3RhdGljIGZpbmFsIFN0cmlu\nZyBBQ1RJT05fR0VUID0gImdldCI7CgogICAgcHJpdmF0ZSBzdGF0aWMgTG9j\nYWxpemVyIF9sb2MgPSBMb2NhbGl6ZXIuZm9yUGFja2FnZShOYXRpdmVKREJD\nU2VxLmNsYXNzKTsKCiAgICBwcml2YXRlIEpEQkNDb25maWd1cmF0aW9uIF9j\nb25mID0gbnVsbDsKICAgIHByaXZhdGUgREJJZGVudGlmaWVyIF9zZXFOYW1l\nID0gREJJZGVudGlmaWVyLm5ld1NlcXVlbmNlKCJPUEVOSlBBX1NFUVVFTkNF\nIik7CiAgICBwcml2YXRlIGludCBfaW5jcmVtZW50ID0gMTsKICAgIHByaXZh\ndGUgaW50IF9pbml0aWFsID0gMTsKICAgIHByaXZhdGUgaW50IF9hbGxvY2F0\nZSA9IDA7CiAgICBwcml2YXRlIFNlcXVlbmNlIF9zZXEgPSBudWxsOwogICAg\ncHJpdmF0ZSBTdHJpbmcgX3NlbGVjdCA9IG51bGw7CgogICAgLy8gZm9yIGRl\ncHJlY2F0ZWQgYXV0by1jb25maWd1cmF0aW9uIHN1cHBvcnQKICAgIHByaXZh\ndGUgU3RyaW5nIF9mb3JtYXQgPSBudWxsOwogICAgcHJpdmF0ZSBEQklkZW50\naWZpZXIgX3RhYmxlTmFtZSA9IERCSWRlbnRpZmllci5uZXdUYWJsZSgiRFVB\nTCIpOwogICAgcHJpdmF0ZSBib29sZWFuIF9zdWJUYWJsZSA9IGZhbHNlOwoK\nICAgIHByaXZhdGUgREJJZGVudGlmaWVyIF9zY2hlbWEgPSBEQklkZW50aWZp\nZXIuTlVMTDsKICAgICAgICAKICAgIC8qKgogICAgICogVGhlIHNlcXVlbmNl\nIG5hbWUuIERlZmF1bHRzIHRvIDxjb2RlPk9QRU5KUEFfU0VRVUVOQ0U8L2Nv\nZGU+LgogICAgICovCiAgICAvLyBAR0VUVEVSCiAgICBwdWJsaWMgU3RyaW5n\nIGdldFNlcXVlbmNlKCkgewogICAgICAgIHJldHVybiBfc2VxTmFtZS5nZXRO\nYW1lKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgc2VxdWVuY2UgbmFt\nZS4gRGVmYXVsdHMgdG8gPGNvZGU+T1BFTkpQQV9TRVFVRU5DRTwvY29kZT4u\nCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldFNlcXVlbmNlKFN0cmluZyBz\nZXFOYW1lKSB7CiAgICAgICAgX3NlcU5hbWUgPSBEQklkZW50aWZpZXIubmV3\nU2VxdWVuY2Uoc2VxTmFtZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGVw\ncmVjYXRlZCBVc2Uge0BsaW5rICNzZXRTZXF1ZW5jZX0uIFJldGFpbmVkIGZv\ncgogICAgICogYmFja3dhcmRzLWNvbXBhdGliaWxpdHkgZm9yIGF1dG8tY29u\nZmlndXJhdGlvbi4KICAgICAqLwogICAgQERlcHJlY2F0ZWQKICAgIHB1Ymxp\nYyB2b2lkIHNldFNlcXVlbmNlTmFtZShTdHJpbmcgc2VxTmFtZSkgewogICAg\nICAgIHNldFNlcXVlbmNlKHNlcU5hbWUpOwogICAgfQoKICAgIC8qKgogICAg\nICogQHNlZSBTZXF1ZW5jZSNnZXRJbml0aWFsVmFsdWUKICAgICAqLwogICAg\ncHVibGljIGludCBnZXRJbml0aWFsVmFsdWUoKSB7CiAgICAgICAgcmV0dXJu\nIF9pbml0aWFsOwogICAgfQoKICAgIC8qKgogICAgICogQHNlZSBTZXF1ZW5j\nZSNzZXRJbml0aWFsVmFsdWUKICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0\nSW5pdGlhbFZhbHVlKGludCBpbml0aWFsKSB7CiAgICAgICAgX2luaXRpYWwg\nPSBpbml0aWFsOwogICAgfQoKICAgIC8qKgogICAgICogQHNlZSBTZXF1ZW5j\nZSNnZXRBbGxvY2F0ZQogICAgICovCiAgICBwdWJsaWMgaW50IGdldEFsbG9j\nYXRlKCkgewogICAgICAgIHJldHVybiBfYWxsb2NhdGU7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBAc2VlIFNlcXVlbmNlI3NldEFsbG9jYXRlCiAgICAgKi8K\nICAgIHB1YmxpYyB2b2lkIHNldEFsbG9jYXRlKGludCBhbGxvY2F0ZSkgewog\nICAgICAgIF9hbGxvY2F0ZSA9IGFsbG9jYXRlOwogICAgfQoKICAgIC8qKgog\nICAgICogQHNlZSBTZXF1ZW5jZSNnZXRJbmNyZW1lbnQKICAgICAqLwogICAg\ncHVibGljIGludCBnZXRJbmNyZW1lbnQoKSB7CiAgICAgICAgcmV0dXJuIF9p\nbmNyZW1lbnQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBAc2VlIFNlcXVlbmNl\nI3NldEluY3JlbWVudAogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRJbmNy\nZW1lbnQoaW50IGluY3JlbWVudCkgewogICAgICAgIF9pbmNyZW1lbnQgPSBp\nbmNyZW1lbnQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBAZGVwcmVjYXRlZCBS\nZXRhaW5lZCBmb3IgYmFja3dhcmRzLWNvbXBhdGliaWxpdHkgZm9yIGF1dG8t\nY29uZmlndXJhdGlvbi4KICAgICAqLwogICAgQERlcHJlY2F0ZWQKICAgIHB1\nYmxpYyB2b2lkIHNldFRhYmxlTmFtZShTdHJpbmcgdGFibGUpIHsKICAgICAg\nICBfdGFibGVOYW1lID0gREJJZGVudGlmaWVyLm5ld1RhYmxlKHRhYmxlKTsK\nICAgIH0KCiAgICAvKioKICAgICAqIEBkZXByZWNhdGVkIFJldGFpbmVkIGZv\nciBiYWNrd2FyZHMtY29tcGF0aWJpbGl0eSBmb3IgYXV0by1jb25maWd1cmF0\naW9uLgogICAgICovCiAgICBARGVwcmVjYXRlZAogICAgcHVibGljIHZvaWQg\nc2V0Rm9ybWF0KFN0cmluZyBmb3JtYXQpIHsKICAgICAgICBfZm9ybWF0ID0g\nZm9ybWF0OwogICAgICAgIF9zdWJUYWJsZSA9IHRydWU7CiAgICB9CgogICAg\nQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBhZGRTY2hlbWEoQ2xhc3NNYXBw\naW5nIG1hcHBpbmcsIFNjaGVtYUdyb3VwIGdyb3VwKSB7CiAgICAgICAgLy8g\nc2VxdWVuY2UgYWxyZWFkeSBleGlzdHM/CiAgICAgICAgUXVhbGlmaWVkREJJ\nZGVudGlmaWVyIHBhdGggPSBRdWFsaWZpZWREQklkZW50aWZpZXIuZ2V0UGF0\naChfc2VxTmFtZSk7CiAgICAgICAgaWYgKGdyb3VwLmlzS25vd25TZXF1ZW5j\nZShwYXRoKSkKICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICBEQklkZW50\naWZpZXIgc2NoZW1hTmFtZSA9IGdldFNjaGVtYUlkZW50aWZpZXIoKTsKICAg\nICAgICBpZiAoREJJZGVudGlmaWVyLmlzRW1wdHkoc2NoZW1hTmFtZSkpIHsK\nICAgICAgICAgICAgc2NoZW1hTmFtZSA9IHBhdGguZ2V0U2NoZW1hTmFtZSgp\nOwogICAgICAgICAgICBpZiAoREJJZGVudGlmaWVyLmlzRW1wdHkoc2NoZW1h\nTmFtZSkpCiAgICAgICAgICAgICAgICBzY2hlbWFOYW1lID0gU2NoZW1hcy5n\nZXROZXdUYWJsZVNjaGVtYUlkZW50aWZpZXIoX2NvbmYpOwogICAgICAgIH0K\nCiAgICAgICAgLy8gY3JlYXRlIHRhYmxlIGluIHRoaXMgZ3JvdXAKICAgICAg\nICBTY2hlbWEgc2NoZW1hID0gZ3JvdXAuZ2V0U2NoZW1hKHNjaGVtYU5hbWUp\nOwogICAgICAgIGlmIChzY2hlbWEgPT0gbnVsbCkKICAgICAgICAgICAgc2No\nZW1hID0gZ3JvdXAuYWRkU2NoZW1hKHNjaGVtYU5hbWUpOwogICAgICAgIHNj\naGVtYS5pbXBvcnRTZXF1ZW5jZShfc2VxKTsKICAgIH0KCiAgICBAT3ZlcnJp\nZGUKICAgIHB1YmxpYyBKREJDQ29uZmlndXJhdGlvbiBnZXRDb25maWd1cmF0\naW9uKCkgewogICAgICAgIHJldHVybiBfY29uZjsKICAgIH0KICAgIAogICAg\ncHVibGljIHZvaWQgc2V0Q29uZmlndXJhdGlvbihDb25maWd1cmF0aW9uIGNv\nbmYpIHsKICAgICAgICBfY29uZiA9IChKREJDQ29uZmlndXJhdGlvbikgY29u\nZjsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzdGFydENvbmZpZ3VyYXRpb24o\nKSB7CiAgICB9CgogICAgcHVibGljIHZvaWQgZW5kQ29uZmlndXJhdGlvbigp\nIHsKICAgICAgICBidWlsZFNlcXVlbmNlKCk7CgogICAgICAgIERCRGljdGlv\nbmFyeSBkaWN0ID0gX2NvbmYuZ2V0REJEaWN0aW9uYXJ5SW5zdGFuY2UoKTsK\nICAgICAgICBpZiAoX2Zvcm1hdCA9PSBudWxsKSB7CiAgICAgICAgICAgIF9m\nb3JtYXQgPSBkaWN0Lm5leHRTZXF1ZW5jZVF1ZXJ5OwogICAgICAgICAgICBp\nZiAoX2Zvcm1hdCA9PSBudWxsKQogICAgICAgICAgICAgICAgdGhyb3cgbmV3\nIE1ldGFEYXRhRXhjZXB0aW9uKF9sb2MuZ2V0KCJuby1zZXEtc3FsIiwgX3Nl\ncU5hbWUpKTsKICAgICAgICB9CiAgICAgICAgaWYgKERCSWRlbnRpZmllci5p\nc051bGwoX3RhYmxlTmFtZSkpCiAgICAgICAgICAgIF90YWJsZU5hbWUgPSBE\nQklkZW50aWZpZXIubmV3VGFibGUoIkRVQUwiKTsKCiAgICAgICAgU3RyaW5n\nIG5hbWUgPSBkaWN0LmdldEZ1bGxOYW1lKF9zZXEpOwogICAgICAgIE9iamVj\ndFtdIHN1YnMgPSAoX3N1YlRhYmxlKSA/IG5ldyBPYmplY3RbXXsgbmFtZSwg\nX3RhYmxlTmFtZSB9CiAgICAgICAgICAgIDogbmV3IE9iamVjdFtdeyBuYW1l\nIH07CiAgICAgICAgX3NlbGVjdCA9IE1lc3NhZ2VGb3JtYXQuZm9ybWF0KF9m\nb3JtYXQsIHN1YnMpOwogICAgICAgIAogICAgICAgIHR5cGUgPSBkaWN0Lm5h\ndGl2ZVNlcXVlbmNlVHlwZTsKICAgIH0KICAgIAogICAgQE92ZXJyaWRlCiAg\nICBwcm90ZWN0ZWQgT2JqZWN0IG5leHRJbnRlcm5hbChKREJDU3RvcmUgc3Rv\ncmUsIENsYXNzTWFwcGluZyBtYXBwaW5nKQogICAgICAgIHRocm93cyBTUUxF\neGNlcHRpb24gewogICAgICAgIENvbm5lY3Rpb24gY29ubiA9IGdldENvbm5l\nY3Rpb24oc3RvcmUpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVy\nbiBOdW1iZXJzLnZhbHVlT2YoZ2V0U2VxdWVuY2UoY29ubikpOwogICAgICAg\nIH0gZmluYWxseSB7CiAgICAgICAgICAgIGNsb3NlQ29ubmVjdGlvbihjb25u\nKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGVzIHRo\nZSBzZXF1ZW5jZSBvYmplY3QuCiAgICAgKi8KICAgIHByaXZhdGUgdm9pZCBi\ndWlsZFNlcXVlbmNlKCkgewogICAgICAgIFF1YWxpZmllZERCSWRlbnRpZmll\nciBwYXRoID0gUXVhbGlmaWVkREJJZGVudGlmaWVyLmdldFBhdGgoX3NlcU5h\nbWUpOwogICAgICAgIERCSWRlbnRpZmllciBzZXFOYW1lID0gcGF0aC5nZXRJ\nZGVudGlmaWVyKCk7CiAgICAgICAgLy8gSlBBIDIgYWRkZWQgc2NoZW1hIGFz\nIGEgY29uZmlndXJhYmxlIGF0dHJpYnV0ZSBvbiAgCiAgICAgICAgLy8gc2Vx\ndWVuY2UgZ2VuZXJhdG9yLiAgT3BlbkpQQSA8PSAxLnggYWxsb3dlZCB0aGlz\nIHZpYQogICAgICAgIC8vIHNjaGVtYS5zZXF1ZW5jZSBvbiB0aGUgc2VxdWVu\nY2UgbmFtZS4gIFNwZWNpZnlpbmcgYSBzY2hlbWEKICAgICAgICAvLyBuYW1l\nIG9uIHRoZSBhbm5vdGF0aW9uIG9yIGluIHRoZSBvcm0gd2lsbCBvdmVycmlk\nZSB0aGUgb2xkIAogICAgICAgIC8vIGJlaGF2aW9yLgogICAgICAgIERCSWRl\nbnRpZmllciBzY2hlbWFOYW1lID0gX3NjaGVtYTsKICAgICAgICBpZiAoREJJ\nZGVudGlmaWVyLmlzRW1wdHkoc2NoZW1hTmFtZSkpIHsKICAgICAgICAgICAg\nc2NoZW1hTmFtZSA9IHBhdGguZ2V0U2NoZW1hTmFtZSgpOwogICAgICAgICAg\nICBpZiAoREJJZGVudGlmaWVyLmlzRW1wdHkoc2NoZW1hTmFtZSkpCiAgICAg\nICAgICAgICAgICBzY2hlbWFOYW1lID0gU2NoZW1hcy5nZXROZXdUYWJsZVNj\naGVtYUlkZW50aWZpZXIoX2NvbmYpOwogICAgICAgIH0KCiAgICAgICAgLy8g\nYnVpbGQgdGhlIHNlcXVlbmNlIGluIG9uZSBvZiB0aGUgZGVzaWduYXRlZCBz\nY2hlbWFzCiAgICAgICAgU2NoZW1hR3JvdXAgZ3JvdXAgPSBuZXcgU2NoZW1h\nR3JvdXAoKTsKICAgICAgICBTY2hlbWEgc2NoZW1hID0gZ3JvdXAuYWRkU2No\nZW1hKHNjaGVtYU5hbWUpOwoKICAgICAgICBfc2VxID0gc2NoZW1hLmFkZFNl\ncXVlbmNlKHNlcU5hbWUpOwogICAgICAgIF9zZXEuc2V0SW5pdGlhbFZhbHVl\nKF9pbml0aWFsKTsKICAgICAgICBfc2VxLnNldEluY3JlbWVudChfaW5jcmVt\nZW50KTsKICAgICAgICBfc2VxLnNldEFsbG9jYXRlKF9hbGxvY2F0ZSk7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGVzIHRoZSBzZXF1ZW5jZSBpbiB0\naGUgREIuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHJlZnJlc2hTZXF1ZW5j\nZSgpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgTG9n\nIGxvZyA9IF9jb25mLmdldExvZyhPcGVuSlBBQ29uZmlndXJhdGlvbi5MT0df\nUlVOVElNRSk7CiAgICAgICAgaWYgKGxvZy5pc0luZm9FbmFibGVkKCkpCiAg\nICAgICAgICAgIGxvZy5pbmZvKF9sb2MuZ2V0KCJtYWtlLW5hdGl2ZS1zZXEi\nKSk7CgogICAgICAgIC8vIGNyZWF0ZSB0aGUgc2VxdWVuY2UKICAgICAgICBT\nY2hlbWFUb29sIHRvb2wgPSBuZXcgU2NoZW1hVG9vbChfY29uZik7CiAgICAg\nICAgdG9vbC5zZXRJZ25vcmVFcnJvcnModHJ1ZSk7CiAgICAgICAgdG9vbC5j\ncmVhdGVTZXF1ZW5jZShfc2VxKTsKICAgIH0KCiAgICAvKioKICAgICAqIERy\nb3BzIHRoZSBzZXF1ZW5jZSBpbiB0aGUgREIuCiAgICAgKi8KICAgIHB1Ymxp\nYyB2b2lkIGRyb3BTZXF1ZW5jZSgpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2Vw\ndGlvbiB7CiAgICAgICAgTG9nIGxvZyA9IF9jb25mLmdldExvZyhPcGVuSlBB\nQ29uZmlndXJhdGlvbi5MT0dfUlVOVElNRSk7CiAgICAgICAgaWYgKGxvZy5p\nc0luZm9FbmFibGVkKCkpCiAgICAgICAgICAgIGxvZy5pbmZvKF9sb2MuZ2V0\nKCJkcm9wLW5hdGl2ZS1zZXEiKSk7CgogICAgICAgIC8vIGRyb3AgdGhlIHRh\nYmxlCiAgICAgICAgU2NoZW1hVG9vbCB0b29sID0gbmV3IFNjaGVtYVRvb2wo\nX2NvbmYpOwogICAgICAgIHRvb2wuc2V0SWdub3JlRXJyb3JzKHRydWUpOwog\nICAgICAgIHRvb2wuZHJvcFNlcXVlbmNlKF9zZXEpOwogICAgfQoKICAgIC8q\nKgogICAgICogUmV0dXJuIHRoZSBuZXh0IHNlcXVlbmNlIHZhbHVlLgogICAg\nICovCiAgICBwcml2YXRlIGxvbmcgZ2V0U2VxdWVuY2UoQ29ubmVjdGlvbiBj\nb25uKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIERC\nRGljdGlvbmFyeSBkaWN0ID0gX2NvbmYuZ2V0REJEaWN0aW9uYXJ5SW5zdGFu\nY2UoKTsKICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG1udCA9IG51bGw7\nCiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDsKICAgICAgICB0cnkgewog\nICAgICAgICAgICBzdG1udCA9IGNvbm4ucHJlcGFyZVN0YXRlbWVudChfc2Vs\nZWN0KTsKICAgICAgICAgICAgZGljdC5zZXRUaW1lb3V0cyhzdG1udCwgX2Nv\nbmYsIGZhbHNlKTsKICAgICAgICAgICAgc3luY2hyb25pemVkKHRoaXMpIHsK\nICAgICAgICAgICAgICAgIHJzID0gc3RtbnQuZXhlY3V0ZVF1ZXJ5KCk7CiAg\nICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHJzLm5leHQoKSkKICAgICAg\nICAgICAgICAgIHJldHVybiBycy5nZXRMb25nKDEpOwoKICAgICAgICAgICAg\nLy8gbm8gcm93ICE/CiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXhjZXB0\naW9uKF9sb2MuZ2V0KCJpbnZhbGlkLXNlcS1zcWwiLCBfc2VsZWN0KSk7CiAg\nICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgLy8gY2xlYW4gdXAgb3Vy\nIHJlc291cmNlcwogICAgICAgICAgICBpZiAocnMgIT0gbnVsbCkKICAgICAg\nICAgICAgICAgIHRyeSB7IHJzLmNsb3NlKCk7IH0gY2F0Y2ggKFNRTEV4Y2Vw\ndGlvbiBzZSkge30KICAgICAgICAgICAgaWYgKHN0bW50ICE9IG51bGwpCiAg\nICAgICAgICAgICAgICB0cnkgeyBzdG1udC5jbG9zZSgpOyB9IGNhdGNoIChT\nUUxFeGNlcHRpb24gc2UpIHt9CiAgICAgICAgfQogICAgfQoKICAgIC8vLy8v\nLy8vLwogICAgLy8gTWFpbgogICAgLy8vLy8vLy8vCgogICAgLyoqCiAgICAg\nKiBVc2FnZTogamF2YSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEu\nTmF0aXZlSkRCQ1NlcXVlbmNlIFtvcHRpb25dKgogICAgICogLWFjdGlvbi8t\nYSAmbHQ7YWRkIHwgZHJvcCB8IGdldCZndDsKICAgICAqICBXaGVyZSB0aGUg\nZm9sbG93aW5nIG9wdGlvbnMgYXJlIHJlY29nbml6ZWQuCiAgICAgKiA8dWw+\nCiAgICAgKiA8bGk+PGk+LXByb3BlcnRpZXMvLXAgJmx0O3Byb3BlcnRpZXMg\nZmlsZSBvciByZXNvdXJjZSZndDs8L2k+OiBUaGUKICAgICAqIHBhdGggb3Ig\ncmVzb3VyY2UgbmFtZSBvZiBhIE9wZW5KUEEgcHJvcGVydGllcyBmaWxlIGNv\nbnRhaW5pbmcKICAgICAqIGluZm9ybWF0aW9uIHN1Y2ggYXMgdGhlIGxpY2Vu\nc2Uga2V5CWFuZCBjb25uZWN0aW9uIGRhdGEgYXMKICAgICAqIG91dGxpbmVk\nIGluIHtAbGluayBKREJDQ29uZmlndXJhdGlvbn0uIE9wdGlvbmFsLjwvbGk+\nCiAgICAgKiA8bGk+PGk+LSZsdDtwcm9wZXJ0eSBuYW1lJmd0OyAmbHQ7cHJv\ncGVydHkgdmFsdWUmZ3Q7PC9pPjogQWxsIGJlYW4KICAgICAqIHByb3BlcnRp\nZXMgb2YgdGhlIE9wZW5KUEEge0BsaW5rIEpEQkNDb25maWd1cmF0aW9ufSBj\nYW4gYmUgc2V0IGJ5CiAgICAgKiB1c2luZyB0aGVpcgluYW1lcyBhbmQgc3Vw\ncGx5aW5nIGEgdmFsdWUuIEZvciBleGFtcGxlOgogICAgICogPGNvZGU+LWxp\nY2Vuc2VLZXkgYWRzbGZqYTgzcjNsa2FkZjwvY29kZT48L2xpPgogICAgICog\nPC91bD4KICAgICAqICBUaGUgdmFyaW91cyBhY3Rpb25zIGFyZSBhcyBmb2xs\nb3dzLgogICAgICogPHVsPgogICAgICogPGxpPjxpPmFkZDwvaT46IENyZWF0\nZSB0aGUgc2VxdWVuY2UuPC9saT4KICAgICAqIDxsaT48aT5kcm9wPC9pPjog\nRHJvcCB0aGUgc2VxdWVuY2UuPC9saT4KICAgICAqIDxsaT48aT5nZXQ8L2k+\nOiBQcmludCB0aGUgbmV4dCBzZXF1ZW5jZSB2YWx1ZS48L2xpPgogICAgICog\nPC91bD4KICAgICAqLwogICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3Ry\naW5nW10gYXJncykKICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAg\nICBPcHRpb25zIG9wdHMgPSBuZXcgT3B0aW9ucygpOwogICAgICAgIGZpbmFs\nIFN0cmluZ1tdIGFyZ3VtZW50cyA9IG9wdHMuc2V0RnJvbUNtZExpbmUoYXJn\ncyk7CiAgICAgICAgYm9vbGVhbiByZXQgPSBDb25maWd1cmF0aW9ucy5ydW5B\nZ2FpbnN0QWxsQW5jaG9ycyhvcHRzLAogICAgICAgICAgICBuZXcgQ29uZmln\ndXJhdGlvbnMuUnVubmFibGUoKSB7CiAgICAgICAgICAgIHB1YmxpYyBib29s\nZWFuIHJ1bihPcHRpb25zIG9wdHMpIHRocm93cyBFeGNlcHRpb24gewogICAg\nICAgICAgICAgICAgSkRCQ0NvbmZpZ3VyYXRpb24gY29uZiA9IG5ldyBKREJD\nQ29uZmlndXJhdGlvbkltcGwoKTsKICAgICAgICAgICAgICAgIHRyeSB7CiAg\nICAgICAgICAgICAgICAgICAgcmV0dXJuIE5hdGl2ZUpEQkNTZXEucnVuKGNv\nbmYsIGFyZ3VtZW50cywgb3B0cyk7CiAgICAgICAgICAgICAgICB9IGZpbmFs\nbHkgewogICAgICAgICAgICAgICAgICAgIGNvbmYuY2xvc2UoKTsKICAgICAg\nICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAg\nIGlmICghcmV0KQogICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oX2xv\nYy5nZXQoIm5hdGl2ZS1zZXEtdXNhZ2UiKSk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBSdW4gdGhlIHRvb2wuIFJldHVybnMgZmFsc2UgaWYgaW52YWxpZCBv\ncHRpb25zIHdlcmUgZ2l2ZW4uCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMg\nYm9vbGVhbiBydW4oSkRCQ0NvbmZpZ3VyYXRpb24gY29uZiwgU3RyaW5nW10g\nYXJncywKICAgICAgICBPcHRpb25zIG9wdHMpCiAgICAgICAgdGhyb3dzIEV4\nY2VwdGlvbiB7CiAgICAgICAgU3RyaW5nIGFjdGlvbiA9IG9wdHMucmVtb3Zl\nUHJvcGVydHkoImFjdGlvbiIsICJhIiwgbnVsbCk7CiAgICAgICAgQ29uZmln\ndXJhdGlvbnMucG9wdWxhdGVDb25maWd1cmF0aW9uKGNvbmYsIG9wdHMpOwog\nICAgICAgIHJldHVybiBydW4oY29uZiwgYXJncywgYWN0aW9uKTsKICAgIH0K\nCiAgICAvKioKICAgICAqIFJ1biB0aGUgdG9vbC4gUmV0dXJuIGZhbHNlIGlm\nIGFuIGludmFsaWQgb3B0aW9uIHdhcyBnaXZlbi4KICAgICAqLwogICAgcHVi\nbGljIHN0YXRpYyBib29sZWFuIHJ1bihKREJDQ29uZmlndXJhdGlvbiBjb25m\nLCBTdHJpbmdbXSBhcmdzLAogICAgICAgIFN0cmluZyBhY3Rpb24pCiAgICAg\nICAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgaWYgKGFyZ3MubGVuZ3Ro\nICE9IDApCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCiAgICAgICAgTmF0\naXZlSkRCQ1NlcSBzZXEgPSBuZXcgTmF0aXZlSkRCQ1NlcSgpOwogICAgICAg\nIFN0cmluZyBwcm9wcyA9IENvbmZpZ3VyYXRpb25zLmdldFByb3BlcnRpZXMo\nY29uZi5nZXRTZXF1ZW5jZSgpKTsKICAgICAgICBDb25maWd1cmF0aW9ucy5j\nb25maWd1cmVJbnN0YW5jZShzZXEsIGNvbmYsIHByb3BzKTsKCiAgICAgICAg\naWYgKEFDVElPTl9EUk9QLmVxdWFscyhhY3Rpb24pKQogICAgICAgICAgICBz\nZXEuZHJvcFNlcXVlbmNlKCk7CiAgICAgICAgZWxzZSBpZiAoQUNUSU9OX0FE\nRC5lcXVhbHMoYWN0aW9uKSkKICAgICAgICAgICAgc2VxLnJlZnJlc2hTZXF1\nZW5jZSgpOwogICAgICAgIGVsc2UgaWYgKEFDVElPTl9HRVQuZXF1YWxzKGFj\ndGlvbikpIHsKICAgICAgICAgICAgQ29ubmVjdGlvbiBjb25uID0gY29uZi5n\nZXREYXRhU291cmNlMihudWxsKS5nZXRDb25uZWN0aW9uKCk7CiAgICAgICAg\nICAgIHRyeSB7CiAgICAgICAgICAgICAgICBsb25nIGN1ciA9IHNlcS5nZXRT\nZXF1ZW5jZShjb25uKTsKICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJp\nbnRsbihjdXIpOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAg\nICAgICAgdHJ5IHsgY29ubi5jbG9zZSgpOyB9IGNhdGNoIChTUUxFeGNlcHRp\nb24gc2UpIHt9CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UKICAgICAg\nICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIHJldHVybiB0cnVlOwogICAg\nfQoKICAgIC8qKgogICAgICogQGRlcHJlY2F0ZWQKICAgICAqLwogICAgcHVi\nbGljIHZvaWQgc2V0U2NoZW1hKFN0cmluZyBzY2hlbWEpIHsKICAgICAgICBf\nc2NoZW1hID0gREJJZGVudGlmaWVyLm5ld1NjaGVtYShzY2hlbWEpOwogICAg\nfQoKICAgIC8qKgogICAgICogQGRlcHJlY2F0ZWQKICAgICAqLwogICAgcHVi\nbGljIFN0cmluZyBnZXRTY2hlbWEoKSB7CiAgICAgICAgcmV0dXJuIF9zY2hl\nbWEuZ2V0TmFtZSgpOwogICAgfQoKICAgIHB1YmxpYyBEQklkZW50aWZpZXIg\nZ2V0U2NoZW1hSWRlbnRpZmllcigpIHsKICAgICAgICByZXR1cm4gX3NjaGVt\nYTsKICAgIH0KCn0K\n","encoding":"base64"}

