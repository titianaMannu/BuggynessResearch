{"sha":"7dc01a36a6983bb47c6be731136b5cdf34bfd990","node_id":"MDQ6QmxvYjIwNjM2NDo3ZGMwMWEzNmE2OTgzYmI0N2M2YmU3MzExMzZiNWNkZjM0YmZkOTkw","size":4542,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/7dc01a36a6983bb47c6be731136b5cdf34bfd990","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWw7CgppbXBv\ncnQgamF2YS5zcWwuU1FMRXhjZXB0aW9uOwoKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNxbC5SZXN1bHQ7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5zcWwuU1FMRXhjZXB0aW9uczsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLnNxbC5TZWxlY3Q7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEuamRiYy5zcWwuU2VsZWN0RXhlY3V0b3I7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEubGliLnJvcC5SZXN1bHRPYmplY3RQcm92aWRlcjsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLlN0b3JlRXhjZXB0aW9u\nOwoKLyoqCiAqIEFic3RyYWN0IHByb3ZpZGVyIGltcGxlbWVudGF0aW9uIHdy\nYXBwZWQgYXJvdW5kIGEge0BsaW5rIFNlbGVjdH0uCiAqCiAqIEBhdXRob3Ig\nQWJlIFdoaXRlCiAqIEBub2phdmFkb2MKICovCnB1YmxpYyBhYnN0cmFjdCBj\nbGFzcyBTZWxlY3RSZXN1bHRPYmplY3RQcm92aWRlcgogICAgaW1wbGVtZW50\ncyBSZXN1bHRPYmplY3RQcm92aWRlciB7CgogICAgcHJpdmF0ZSBmaW5hbCBT\nZWxlY3RFeGVjdXRvciBfc2VsOwogICAgcHJpdmF0ZSBmaW5hbCBKREJDU3Rv\ncmUgX3N0b3JlOwogICAgcHJpdmF0ZSBmaW5hbCBKREJDRmV0Y2hDb25maWd1\ncmF0aW9uIF9mZXRjaDsKICAgIHByb3RlY3RlZCBSZXN1bHQgX3JlcyA9IG51\nbGw7CiAgICBwcml2YXRlIGludCBfc2l6ZSA9IC0xOwogICAgcHJpdmF0ZSBC\nb29sZWFuIF9yYSA9IG51bGw7CgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3Rv\nci4KICAgICAqCiAgICAgKiBAcGFyYW0gc2VsIHRoZSBzZWxlY3QgdG8gZXhl\nY3V0ZQogICAgICogQHBhcmFtIHN0b3JlIHRoZSBzdG9yZSB0byBkZWxlZ2F0\nZSBsb2FkaW5nIHRvCiAgICAgKiBAcGFyYW0gZmV0Y2ggdGhlIGZldGNoIGNv\nbmZpZ3VyYXRpb24sIG9yIG51bGwgZm9yIHRoZSBkZWZhdWx0CiAgICAgKi8K\nICAgIHB1YmxpYyBTZWxlY3RSZXN1bHRPYmplY3RQcm92aWRlcihTZWxlY3RF\neGVjdXRvciBzZWwsIEpEQkNTdG9yZSBzdG9yZSwKICAgICAgICBKREJDRmV0\nY2hDb25maWd1cmF0aW9uIGZldGNoKSB7CiAgICAgICAgX3NlbCA9IHNlbDsK\nICAgICAgICBfc3RvcmUgPSBzdG9yZTsKICAgICAgICBfZmV0Y2ggPSBmZXRj\naDsKICAgIH0KCiAgICBwdWJsaWMgU2VsZWN0RXhlY3V0b3IgZ2V0U2VsZWN0\nKCkgewogICAgICAgIHJldHVybiBfc2VsOwogICAgfQoKICAgIHB1YmxpYyBK\nREJDU3RvcmUgZ2V0U3RvcmUoKSB7CiAgICAgICAgcmV0dXJuIF9zdG9yZTsK\nICAgIH0KCiAgICBwdWJsaWMgSkRCQ0ZldGNoQ29uZmlndXJhdGlvbiBnZXRG\nZXRjaENvbmZpZ3VyYXRpb24oKSB7CiAgICAgICAgcmV0dXJuIF9mZXRjaDsK\nICAgIH0KCiAgICBwdWJsaWMgUmVzdWx0IGdldFJlc3VsdCgpIHsKICAgICAg\nICByZXR1cm4gX3JlczsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBzdXBw\nb3J0c1JhbmRvbUFjY2VzcygpIHsKICAgICAgICBpZiAoX3JhID09IG51bGwp\nIHsKICAgICAgICAgICAgYm9vbGVhbiByYTsKICAgICAgICAgICAgaWYgKF9y\nZXMgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAg\nICAgICAgICAgICByYSA9IF9yZXMuc3VwcG9ydHNSYW5kb21BY2Nlc3MoKTsK\nICAgICAgICAgICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBzZSkgewog\nICAgICAgICAgICAgICAgICAgIHRocm93IFNRTEV4Y2VwdGlvbnMuZ2V0U3Rv\ncmUoc2UsIF9zdG9yZS5nZXREQkRpY3Rpb25hcnkoKSk7CiAgICAgICAgICAg\nICAgICB9CiAgICAgICAgICAgIH0gZWxzZQogICAgICAgICAgICAgICAgcmEg\nPSBfc2VsLnN1cHBvcnRzUmFuZG9tQWNjZXNzKF9mZXRjaC5nZXRSZWFkTG9j\na0xldmVsKCkgPiAwKTsKICAgICAgICAgICAgX3JhID0gKHJhKSA/IEJvb2xl\nYW4uVFJVRSA6IEJvb2xlYW4uRkFMU0U7CiAgICAgICAgfQogICAgICAgIHJl\ndHVybiBfcmEuYm9vbGVhblZhbHVlKCk7CiAgICB9CgogICAgcHVibGljIHZv\naWQgb3BlbigpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAg\nICAgX3JlcyA9IF9zZWwuZXhlY3V0ZShfc3RvcmUsIF9mZXRjaCk7CiAgICB9\nCgogICAgcHVibGljIGJvb2xlYW4gbmV4dCgpCiAgICAgICAgdGhyb3dzIFNR\nTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIF9yZXMubmV4dCgpOwogICAg\nfQoKICAgIHB1YmxpYyBib29sZWFuIGFic29sdXRlKGludCBwb3MpCiAgICAg\nICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIF9yZXMu\nYWJzb2x1dGUocG9zKTsKICAgIH0KCiAgICBwdWJsaWMgaW50IHNpemUoKQog\nICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIGlmIChfc2l6\nZSA9PSAtMSkgewogICAgICAgICAgICAvLyBpZiByZXMgaXMgbnVsbCwgZG9u\nJ3QgY2FjaGUgc2l6ZQogICAgICAgICAgICBpZiAoX3JlcyA9PSBudWxsKQog\nICAgICAgICAgICAgICAgcmV0dXJuIEludGVnZXIuTUFYX1ZBTFVFOwoKICAg\nICAgICAgICAgc3dpdGNoIChfZmV0Y2guZ2V0TFJTU2l6ZSgpKSB7CiAgICAg\nICAgICAgICAgICBjYXNlIExSU1NpemVzLlNJWkVfVU5LTk9XTjoKICAgICAg\nICAgICAgICAgICAgICBfc2l6ZSA9IEludGVnZXIuTUFYX1ZBTFVFOwogICAg\nICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSBM\nUlNTaXplcy5TSVpFX0xBU1Q6CiAgICAgICAgICAgICAgICAgICAgaWYgKHN1\ncHBvcnRzUmFuZG9tQWNjZXNzKCkpCiAgICAgICAgICAgICAgICAgICAgICAg\nIF9zaXplID0gX3Jlcy5zaXplKCk7CiAgICAgICAgICAgICAgICAgICAgZWxz\nZQogICAgICAgICAgICAgICAgICAgICAgICBfc2l6ZSA9IEludGVnZXIuTUFY\nX1ZBTFVFOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAg\nICAgICAgZGVmYXVsdDogLy8gcXVlcnkKICAgICAgICAgICAgICAgICAgICBf\nc2l6ZSA9IF9zZWwuZ2V0Q291bnQoX3N0b3JlKTsKICAgICAgICAgICAgfQog\nICAgICAgIH0KICAgICAgICByZXR1cm4gX3NpemU7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBBbGxvdyBzdWJjbGFzc2VzIHRoYXQga25vdyB0aGUgc2l6ZSB0\nbyBzZXQgaXQ7IG90aGVyd2lzZSB3ZSBjYWxjdWxhdGUKICAgICAqIGl0IGlu\ndGVybmFsbHkuCiAgICAgKi8KICAgIHByb3RlY3RlZCB2b2lkIHNldFNpemUo\naW50IHNpemUpIHsKICAgICAgICBpZiAoX3NpemUgPT0gLTEpCiAgICAgICAg\nICAgIF9zaXplID0gc2l6ZTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCByZXNl\ndCgpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgY2xv\nc2UoKTsKICAgICAgICBvcGVuKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQg\nY2xvc2UoKSB7CiAgICAgICAgaWYgKF9yZXMgIT0gbnVsbCkgewogICAgICAg\nICAgICBfcmVzLmNsb3NlKCk7CiAgICAgICAgICAgIF9yZXMgPSBudWxsOwog\nICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCBoYW5kbGVDaGVja2Vk\nRXhjZXB0aW9uKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgaWYgKGUgaW5zdGFu\nY2VvZiBTUUxFeGNlcHRpb24pCiAgICAgICAgICAgIHRocm93IFNRTEV4Y2Vw\ndGlvbnMuZ2V0U3RvcmUoKFNRTEV4Y2VwdGlvbikgZSwgX3N0b3JlLmdldERC\nRGljdGlvbmFyeSgpLCBfZmV0Y2guZ2V0UmVhZExvY2tMZXZlbCgpKTsKICAg\nICAgICB0aHJvdyBuZXcgU3RvcmVFeGNlcHRpb24oZSk7CiAgICB9Cn0K\n","encoding":"base64"}

