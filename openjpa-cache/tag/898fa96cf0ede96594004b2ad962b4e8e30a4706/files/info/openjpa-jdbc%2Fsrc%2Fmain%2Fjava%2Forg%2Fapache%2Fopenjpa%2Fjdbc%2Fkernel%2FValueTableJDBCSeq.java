{"sha":"c98c8349eaf05ee395ee687bc3edb4dbe692b127","node_id":"MDQ6QmxvYjIwNjM2NDpjOThjODM0OWVhZjA1ZWUzOTVlZTY4N2JjM2VkYjRkYmU2OTJiMTI3","size":7623,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/c98c8349eaf05ee395ee687bc3edb4dbe692b127","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWw7CgppbXBv\ncnQgamF2YS5zcWwuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmEuc3FsLlNRTEV4\nY2VwdGlvbjsKaW1wb3J0IGphdmEuc3FsLlR5cGVzOwoKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5qZGJjLmNvbmYuSkRCQ0NvbmZpZ3VyYXRpb247Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5jb25mLkpEQkNDb25maWd1\ncmF0aW9uSW1wbDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1l\ndGEuQ2xhc3NNYXBwaW5nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpk\nYmMubWV0YS5NYXBwaW5nUmVwb3NpdG9yeTsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNjaGVtYS5Db2x1bW47CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEuamRiYy5zY2hlbWEuVGFibGU7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEuamRiYy5zcWwuREJEaWN0aW9uYXJ5OwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmxpYi5jb25mLkNvbmZpZ3VyYXRpb25zOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmxpYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5PcHRpb25zOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuSmF2YVR5cGVzOwoKLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vCi8vIE5PVEU6IERvIG5vdCBjaGFuZ2UgcHJvcGVydHkgbmFtZXM7\nIHNlZSBTZXF1ZW5jZU1ldGFEYXRhCi8vIGFuZCBTZXF1ZW5jZU1hcHBpbmcg\nZm9yIHN0YW5kYXJkIHByb3BlcnR5IG5hbWVzLgovLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8K\nCi8qKgogKiBTcGVjaWFsaXphdGlvbiBvZiB0aGUge0BsaW5rIFRhYmxlSkRC\nQ1NlcX0gdGhhdCBtYWludGFpbnMgbXVsdGlwbGUKICogc2VxdWVuY2UgY291\nbnRzLiBFYWNoIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MgcmVwcmVzZW50cyBv\nbmUgcm93IHdpdGgKICogYSBrbm93biBzdHJpbmcgcHJpbWFyeSBrZXkgdmFs\ndWUsIG1vcmUgb3IgbGVzcy4gVGhlIHRhYmxlIG5hbWUgZGVmYXVsdHMKICog\ndG8gPGNvZGU+T1BFTkpQQV9TRVFVRU5DRVNfVEFCTEU8L2NvZGU+LgogKgog\nKiBAYXV0aG9yIEFiZSBXaGl0ZQogKi8KcHVibGljIGNsYXNzIFZhbHVlVGFi\nbGVKREJDU2VxCiAgICBleHRlbmRzIFRhYmxlSkRCQ1NlcSB7CgogICAgcHVi\nbGljIHN0YXRpYyBmaW5hbCBTdHJpbmcgUEtfVkFMVUUgPSAiUHJpbWFyeUtl\neVZhbHVlIjsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6ZXIg\nX2xvYyA9IExvY2FsaXplci5mb3JQYWNrYWdlCiAgICAgICAgKFZhbHVlVGFi\nbGVKREJDU2VxLmNsYXNzKTsKCiAgICBwcml2YXRlIFN0cmluZyBfdmFsdWUg\nPSAiREVGQVVMVCI7CgogICAgcHVibGljIFZhbHVlVGFibGVKREJDU2VxKCkg\newogICAgICAgIHNldFRhYmxlKCJPUEVOSlBBX1NFUVVFTkNFU19UQUJMRSIp\nOwogICAgfQoKICAgIC8qKgogICAgICogVGhlIHByaW1hcnkga2V5IHZhbHVl\nIGZvciB0aGlzIHJvdy4gRGVmYXVsdHMgdG8gPGNvZGU+REVGQVVMVDwvY29k\nZT4uCiAgICAgKi8KICAgIHB1YmxpYyBTdHJpbmcgZ2V0UHJpbWFyeUtleVZh\nbHVlKCkgewogICAgICAgIHJldHVybiBfdmFsdWU7CiAgICB9CgogICAgLyoq\nCiAgICAgKiBUaGUgcHJpbWFyeSBrZXkgdmFsdWUgZm9yIHRoaXMgcm93LiBE\nZWZhdWx0cyB0byA8Y29kZT5ERUZBVUxUPC9jb2RlPi4KICAgICAqLwogICAg\ncHVibGljIHZvaWQgc2V0UHJpbWFyeUtleVZhbHVlKFN0cmluZyB2YWx1ZSkg\newogICAgICAgIF92YWx1ZSA9IHZhbHVlOwogICAgfQoKICAgIHByb3RlY3Rl\nZCBDb2x1bW4gYWRkUHJpbWFyeUtleUNvbHVtbihUYWJsZSB0YWJsZSkgewog\nICAgICAgIERCRGljdGlvbmFyeSBkaWN0ID0gZ2V0Q29uZmlndXJhdGlvbigp\nLmdldERCRGljdGlvbmFyeUluc3RhbmNlKCk7CiAgICAgICAgQ29sdW1uIHBr\nQ29sdW1uID0gdGFibGUuYWRkQ29sdW1uKGRpY3QuZ2V0VmFsaWRDb2x1bW5O\nYW1lCiAgICAgICAgICAgIChnZXRQcmltYXJ5S2V5Q29sdW1uSWRlbnRpZmll\ncigpLCB0YWJsZSkpOwogICAgICAgIHBrQ29sdW1uLnNldFR5cGUoZGljdC5n\nZXRQcmVmZXJyZWRUeXBlKFR5cGVzLlZBUkNIQVIpKTsKICAgICAgICBwa0Nv\nbHVtbi5zZXRKYXZhVHlwZShKYXZhVHlwZXMuU1RSSU5HKTsKICAgICAgICBw\na0NvbHVtbi5zZXRTaXplKGRpY3QuY2hhcmFjdGVyQ29sdW1uU2l6ZSk7CiAg\nICAgICAgcmV0dXJuIHBrQ29sdW1uOwogICAgfQoKICAgIHByb3RlY3RlZCBP\nYmplY3QgZ2V0UHJpbWFyeUtleShDbGFzc01hcHBpbmcgbWFwcGluZykgewog\nICAgICAgIHJldHVybiBfdmFsdWU7CiAgICB9CgogICAgLy8vLy8vLy8vCiAg\nICAvLyBNYWluCiAgICAvLy8vLy8vLy8KCiAgICAvKioKICAgICAqIFVzYWdl\nOiBqYXZhIG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmtlcm5lbC5WYWx1ZVRh\nYmxlSkRCQ1NlcSBbb3B0aW9uXSoKICAgICAqIC1hY3Rpb24vLWEgJmx0O2Fk\nZCB8IGRyb3AgfCBnZXQgfCBzZXQmZ3Q7IFtwcmltYXJ5IGtleSB2YWx1ZV0g\nW3ZhbHVlXQogICAgICogIFdoZXJlIHRoZSBmb2xsb3dpbmcgb3B0aW9ucyBh\ncmUgcmVjb2duaXplZC4KICAgICAqIDx1bD4KICAgICAqIDxsaT48aT4tcHJv\ncGVydGllcy8tcCAmbHQ7cHJvcGVydGllcyBmaWxlIG9yIHJlc291cmNlJmd0\nOzwvaT46IFRoZQogICAgICogcGF0aCBvciByZXNvdXJjZSBuYW1lIG9mIGEg\nT3BlbkpQQSBwcm9wZXJ0aWVzIGZpbGUgY29udGFpbmluZwogICAgICogaW5m\nb3JtYXRpb24gc3VjaCBhcyB0aGUgbGljZW5zZSBrZXkJYW5kIGNvbm5lY3Rp\nb24gZGF0YSBhcwogICAgICogb3V0bGluZWQgaW4ge0BsaW5rIEpEQkNDb25m\naWd1cmF0aW9ufS4gT3B0aW9uYWwuPC9saT4KICAgICAqIDxsaT48aT4tJmx0\nO3Byb3BlcnR5IG5hbWUmZ3Q7ICZsdDtwcm9wZXJ0eSB2YWx1ZSZndDs8L2k+\nOiBBbGwgYmVhbgogICAgICogcHJvcGVydGllcyBvZiB0aGUgT3BlbkpQQSB7\nQGxpbmsgSkRCQ0NvbmZpZ3VyYXRpb259IGNhbiBiZSBzZXQgYnkKICAgICAq\nIHVzaW5nIHRoZWlyCW5hbWVzIGFuZCBzdXBwbHlpbmcgYSB2YWx1ZS4gRm9y\nIGV4YW1wbGU6CiAgICAgKiA8Y29kZT4tbGljZW5zZUtleSBhZHNsZmphODNy\nM2xrYWRmPC9jb2RlPjwvbGk+CiAgICAgKiA8L3VsPgogICAgICogIFRoZSB2\nYXJpb3VzIGFjdGlvbnMgYXJlIGFzIGZvbGxvd3MuCiAgICAgKiA8dWw+CiAg\nICAgKiA8bGk+PGk+YWRkPC9pPjogQ3JlYXRlIHRoZSBzZXF1ZW5jZSB0YWJs\nZS48L2xpPgogICAgICogPGxpPjxpPmRyb3A8L2k+OiBEcm9wIHRoZSBzZXF1\nZW5jZSB0YWJsZS48L2xpPgogICAgICogPGxpPjxpPmdldDwvaT46IFByaW50\nIHRoZSBjdXJyZW50IHNlcXVlbmNlIHZhbHVlIGZvciB0aGUgZ2l2ZW4KICAg\nICAqIHByaW1hcnkga2V5IHZhbHVlLjwvbGk+CiAgICAgKiA8bGk+PGk+c2V0\nPC9pPjogU2V0IHRoZSBzZXF1ZW5jZSB2YWx1ZSBmb3IgdGhlIGdpdmVuIHBy\naW1hcnkga2V5CiAgICAgKiB2YWx1ZS48L2xpPgogICAgICogPC91bD4KICAg\nICAqLwogICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJn\ncykKICAgICAgICB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBPcHRpb25z\nIG9wdHMgPSBuZXcgT3B0aW9ucygpOwogICAgICAgIGZpbmFsIFN0cmluZ1td\nIGFyZ3VtZW50cyA9IG9wdHMuc2V0RnJvbUNtZExpbmUoYXJncyk7CiAgICAg\nICAgYm9vbGVhbiByZXQgPSBDb25maWd1cmF0aW9ucy5ydW5BZ2FpbnN0QWxs\nQW5jaG9ycyhvcHRzLAogICAgICAgICAgICBuZXcgQ29uZmlndXJhdGlvbnMu\nUnVubmFibGUoKSB7CiAgICAgICAgICAgIHB1YmxpYyBib29sZWFuIHJ1bihP\ncHRpb25zIG9wdHMpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgICAgICAg\nICAgSkRCQ0NvbmZpZ3VyYXRpb24gY29uZiA9IG5ldyBKREJDQ29uZmlndXJh\ndGlvbkltcGwoKTsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAg\nICAgICAgICAgcmV0dXJuIFZhbHVlVGFibGVKREJDU2VxLnJ1bihjb25mLCBh\ncmd1bWVudHMsIG9wdHMpOwogICAgICAgICAgICAgICAgfSBmaW5hbGx5IHsK\nICAgICAgICAgICAgICAgICAgICBjb25mLmNsb3NlKCk7CiAgICAgICAgICAg\nICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBpZiAo\nIXJldCkKICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKF9sb2MuZ2V0\nKCJjbHN0YWJsZS1zZXEtdXNhZ2UiKSk7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBSdW4gdGhlIHRvb2wuIFJldHVybnMgZmFsc2UgaWYgaW52YWxpZCBvcHRp\nb25zIHdlcmUgZ2l2ZW4uCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgYm9v\nbGVhbiBydW4oSkRCQ0NvbmZpZ3VyYXRpb24gY29uZiwgU3RyaW5nW10gYXJn\ncywKICAgICAgICBPcHRpb25zIG9wdHMpCiAgICAgICAgdGhyb3dzIEV4Y2Vw\ndGlvbiB7CiAgICAgICAgU3RyaW5nIGFjdGlvbiA9IG9wdHMucmVtb3ZlUHJv\ncGVydHkoImFjdGlvbiIsICJhIiwgbnVsbCk7CiAgICAgICAgQ29uZmlndXJh\ndGlvbnMucG9wdWxhdGVDb25maWd1cmF0aW9uKGNvbmYsIG9wdHMpOwogICAg\nICAgIHJldHVybiBydW4oY29uZiwgYXJncywgYWN0aW9uLCBudWxsLCBudWxs\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJ1biB0aGUgdG9vbC4gUmV0dXJu\nIGZhbHNlIGlmIGFuIGludmFsaWQgb3B0aW9uIHdhcyBnaXZlbi4KICAgICAq\nLwogICAgcHVibGljIHN0YXRpYyBib29sZWFuIHJ1bihKREJDQ29uZmlndXJh\ndGlvbiBjb25mLCBTdHJpbmdbXSBhcmdzLAogICAgICAgIFN0cmluZyBhY3Rp\nb24sIE1hcHBpbmdSZXBvc2l0b3J5IHJlcG9zLCBDbGFzc0xvYWRlciBsb2Fk\nZXIpCiAgICAgICAgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgVmFsdWVU\nYWJsZUpEQkNTZXEgc2VxID0gbmV3IFZhbHVlVGFibGVKREJDU2VxKCk7CiAg\nICAgICAgU3RyaW5nIHByb3BzID0gQ29uZmlndXJhdGlvbnMuZ2V0UHJvcGVy\ndGllcyhjb25mLmdldFNlcXVlbmNlKCkpOwogICAgICAgIENvbmZpZ3VyYXRp\nb25zLmNvbmZpZ3VyZUluc3RhbmNlKHNlcSwgY29uZiwgcHJvcHMpOwoKICAg\nICAgICBpZiAoQUNUSU9OX0RST1AuZXF1YWxzKGFjdGlvbikpIHsKICAgICAg\nICAgICAgaWYgKGFyZ3MubGVuZ3RoICE9IDApCiAgICAgICAgICAgICAgICBy\nZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIHNlcS5kcm9wVGFibGUoKTsKICAg\nICAgICB9IGVsc2UgaWYgKEFDVElPTl9BREQuZXF1YWxzKGFjdGlvbikpIHsK\nICAgICAgICAgICAgaWYgKGFyZ3MubGVuZ3RoICE9IDApCiAgICAgICAgICAg\nICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIHNlcS5yZWZyZXNoVGFi\nbGUoKTsKICAgICAgICB9IGVsc2UgaWYgKEFDVElPTl9HRVQuZXF1YWxzKGFj\ndGlvbikgfHwgQUNUSU9OX1NFVC5lcXVhbHMoYWN0aW9uKSkgewogICAgICAg\nICAgICBpZiAoYXJncy5sZW5ndGggPiAwKQogICAgICAgICAgICAgICAgc2Vx\nLnNldFByaW1hcnlLZXlWYWx1ZShhcmdzWzBdKTsKCiAgICAgICAgICAgIENv\nbm5lY3Rpb24gY29ubiA9IGNvbmYuZ2V0RGF0YVNvdXJjZTIobnVsbCkuZ2V0\nQ29ubmVjdGlvbigpOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAg\nICAgbG9uZyBjdXIgPSBzZXEuZ2V0U2VxdWVuY2UobnVsbCwgY29ubik7CiAg\nICAgICAgICAgICAgICBpZiAoQUNUSU9OX0dFVC5lcXVhbHMoYWN0aW9uKSkK\nICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oc2VxLmdl\ndFByaW1hcnlLZXlWYWx1ZSgpICsgIjogIiArIGN1cik7CiAgICAgICAgICAg\nICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBsb25nIHNldDsKICAg\nICAgICAgICAgICAgICAgICBpZiAoYXJncy5sZW5ndGggPiAxKQogICAgICAg\nICAgICAgICAgICAgICAgICBzZXQgPSBMb25nLnBhcnNlTG9uZyhhcmdzWzFd\nKTsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAg\nICAgICAgIHNldCA9IGN1ciArIHNlcS5nZXRBbGxvY2F0ZSgpOwogICAgICAg\nICAgICAgICAgICAgIGlmIChzZXQgPCBjdXIpCiAgICAgICAgICAgICAgICAg\nICAgICAgIHNldCA9IGN1cjsKICAgICAgICAgICAgICAgICAgICBlbHNlIHsK\nICAgICAgICAgICAgICAgICAgICAgICAgU3RhdHVzIHN0YXQgPSBzZXEuZ2V0\nU3RhdHVzKG51bGwpOwogICAgICAgICAgICAgICAgICAgICAgICBzZXEuc2V0\nU2VxdWVuY2UobnVsbCwgc3RhdCwgKGludCkgKHNldCAtIGN1ciksIHRydWUs\nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uKTsKICAgICAgICAg\nICAgICAgICAgICAgICAgc2V0ID0gc3RhdC5zZXE7CiAgICAgICAgICAgICAg\nICAgICAgfQogICAgICAgICAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRs\nbihzZXEuZ2V0UHJpbWFyeUtleVZhbHVlKCkgKyAiOiAiICsgc2V0KTsKICAg\nICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBjYXRj\naCAoTnVtYmVyRm9ybWF0RXhjZXB0aW9uIG5mZSkgewogICAgICAgICAgICAg\nICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAg\nICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBjb25uLmNs\nb3NlKCk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24g\nc2UpIHsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAg\nIH0gZWxzZQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgcmV0\ndXJuIHRydWU7CiAgICB9Cn0K\n","encoding":"base64"}

