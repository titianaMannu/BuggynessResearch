{"sha":"adb7a3019b30c7a238861e654a57a76538041760","node_id":"MDQ6QmxvYjIwNjM2NDphZGI3YTMwMTliMzBjN2EyMzg4NjFlNjU0YTU3YTc2NTM4MDQxNzYw","size":16573,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/adb7a3019b30c7a238861e654a57a76538041760","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuZXhwczsK\nCmltcG9ydCBqYXZhLmlvLlNlcmlhbGl6YWJsZTsKaW1wb3J0IGphdmEudXRp\nbC5EYXRlOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1ldGEu\nQ2xhc3NNYXBwaW5nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMu\nbWV0YS5KYXZhU1FMVHlwZXM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5zcWwuREJEaWN0aW9uYXJ5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmpkYmMuc3FsLlJhdzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5r\nZXJuZWwuZXhwcy5BZ2dyZWdhdGVMaXN0ZW5lcjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5rZXJuZWwuZXhwcy5Bcmd1bWVudHM7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEua2VybmVsLmV4cHMuRXhwcmVzc2lvbjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuZXhwcy5FeHByZXNzaW9uRmFj\ndG9yeTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuZXhwcy5G\naWx0ZXJMaXN0ZW5lcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJu\nZWwuZXhwcy5MaXRlcmFsOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtl\ncm5lbC5leHBzLlBhcmFtZXRlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5rZXJuZWwuZXhwcy5QYXRoOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmtlcm5lbC5leHBzLlN1YnF1ZXJ5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmtlcm5lbC5leHBzLlZhbHVlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmxpYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5tZXRhLkNsYXNzTWV0YURhdGE7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEudXRpbC5Vc2VyRXhjZXB0aW9uOwoKLyoqCiAqIEV4cHJlc3Npb24g\nZmFjdG9yeSBpbXBsZW1lbnRhdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIGV4\nZWN1dGUgcXVlcmllcwogKiB2aWEgU1FMLgogKgogKiBAYXV0aG9yIEFiZSBX\naGl0ZQogKiBAbm9qYXZhZG9jCiAqLwpwdWJsaWMgY2xhc3MgSkRCQ0V4cHJl\nc3Npb25GYWN0b3J5CiAgICBpbXBsZW1lbnRzIEV4cHJlc3Npb25GYWN0b3J5\nLCBTZXJpYWxpemFibGUgewoKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFZh\nbCBOVUxMID0gbmV3IE51bGwoKTsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5h\nbCBMb2NhbGl6ZXIgX2xvYyA9IExvY2FsaXplci5mb3JQYWNrYWdlKEpEQkNF\neHByZXNzaW9uRmFjdG9yeS5jbGFzcyk7CgogICAgcHJpdmF0ZSBmaW5hbCBD\nbGFzc01hcHBpbmcgX3R5cGU7CiAgICBwcml2YXRlIGZpbmFsIFNlbGVjdENv\nbnN0cnVjdG9yIF9jb25zID0gbmV3IFNlbGVjdENvbnN0cnVjdG9yKCk7CiAg\nICBwcml2YXRlIGludCBfZ2V0TWFwVmFsdWVBbGlhcyA9IDA7CgogICAgLyoq\nCiAgICAgKiBDb25zdHJ1Y3Rvci4gU3VwcGx5IHRoZSB0eXBlIHdlJ3JlIHF1\nZXJ5aW5nIGFnYWluc3QuCiAgICAgKi8KICAgIHB1YmxpYyBKREJDRXhwcmVz\nc2lvbkZhY3RvcnkoQ2xhc3NNYXBwaW5nIHR5cGUpIHsKICAgICAgICBfdHlw\nZSA9IHR5cGU7CiAgICB9CgogICAgLyoqCiAgICAgKiBVc2UgdG8gY3JlYXRl\nIFNRTCBzZWxlY3QuCiAgICAgKi8KICAgIHB1YmxpYyBTZWxlY3RDb25zdHJ1\nY3RvciBnZXRTZWxlY3RDb25zdHJ1Y3RvcigpIHsKICAgICAgICByZXR1cm4g\nX2NvbnM7CiAgICB9CgogICAgcHVibGljIEV4cHJlc3Npb24gZW1wdHlFeHBy\nZXNzaW9uKCkgewogICAgICAgIHJldHVybiBuZXcgRW1wdHlFeHByZXNzaW9u\nKCk7CiAgICB9CgogICAgcHVibGljIEV4cHJlc3Npb24gYXNFeHByZXNzaW9u\nKFZhbHVlIHYpIHsKICAgICAgICByZXR1cm4gZXF1YWwodiwgbmV3TGl0ZXJh\nbChCb29sZWFuLlRSVUUsIExpdGVyYWwuVFlQRV9CT09MRUFOKSk7CiAgICB9\nCgogICAgcHVibGljIEV4cHJlc3Npb24gZXF1YWwoVmFsdWUgdjEsIFZhbHVl\nIHYyKSB7CiAgICAgICAgLy8gaWYgd2UncmUgY29tcGFyaW5nIGFuIHVuYWNj\nZXNzZWQgYm91bmQgdmFyaWFibGUsIGxpa2UgaW46CiAgICAgICAgLy8gY29s\nbC5jb250YWlucyAodmFyKSAmJiB2YXIgPT0geCwgdGhlbiB0cmFuc2xhdGUg\naW50bzoKICAgICAgICAvLyBjb2xsLmNvbnRhaW5zICh4KQogICAgICAgIGlm\nICh2MSBpbnN0YW5jZW9mIFBDUGF0aCAmJiAoKFBDUGF0aCkgdjEpLmlzVW5h\nY2Nlc3NlZFZhcmlhYmxlKCkpCiAgICAgICAgICAgIHJldHVybiBjb250YWlu\ncyh2MSwgdjIpOwogICAgICAgIGlmICh2MiBpbnN0YW5jZW9mIFBDUGF0aCAm\nJiAoKFBDUGF0aCkgdjIpLmlzVW5hY2Nlc3NlZFZhcmlhYmxlKCkpCiAgICAg\nICAgICAgIHJldHVybiBjb250YWlucyh2MiwgdjEpOwogICAgICAgIHJldHVy\nbiBuZXcgRXF1YWxFeHByZXNzaW9uKChWYWwpIHYxLCAoVmFsKSB2Mik7CiAg\nICB9CgogICAgcHVibGljIEV4cHJlc3Npb24gbm90RXF1YWwoVmFsdWUgdjEs\nIFZhbHVlIHYyKSB7CiAgICAgICAgcmV0dXJuIG5ldyBOb3RFcXVhbEV4cHJl\nc3Npb24oKFZhbCkgdjEsIChWYWwpIHYyKTsKICAgIH0KCiAgICBwdWJsaWMg\nRXhwcmVzc2lvbiBsZXNzVGhhbihWYWx1ZSB2MSwgVmFsdWUgdjIpIHsKICAg\nICAgICByZXR1cm4gbmV3IENvbXBhcmVFeHByZXNzaW9uKChWYWwpIHYxLCAo\nVmFsKSB2MiwKICAgICAgICAgICAgQ29tcGFyZUV4cHJlc3Npb24uTEVTUyk7\nCiAgICB9CgogICAgcHVibGljIEV4cHJlc3Npb24gZ3JlYXRlclRoYW4oVmFs\ndWUgdjEsIFZhbHVlIHYyKSB7CiAgICAgICAgcmV0dXJuIG5ldyBDb21wYXJl\nRXhwcmVzc2lvbigoVmFsKSB2MSwgKFZhbCkgdjIsCiAgICAgICAgICAgIENv\nbXBhcmVFeHByZXNzaW9uLkdSRUFURVIpOwogICAgfQoKICAgIHB1YmxpYyBF\neHByZXNzaW9uIGxlc3NUaGFuRXF1YWwoVmFsdWUgdjEsIFZhbHVlIHYyKSB7\nCiAgICAgICAgcmV0dXJuIG5ldyBDb21wYXJlRXhwcmVzc2lvbigoVmFsKSB2\nMSwgKFZhbCkgdjIsCiAgICAgICAgICAgIENvbXBhcmVFeHByZXNzaW9uLkxF\nU1NfRVFVQUwpOwogICAgfQoKICAgIHB1YmxpYyBFeHByZXNzaW9uIGdyZWF0\nZXJUaGFuRXF1YWwoVmFsdWUgdjEsIFZhbHVlIHYyKSB7CiAgICAgICAgcmV0\ndXJuIG5ldyBDb21wYXJlRXhwcmVzc2lvbigoVmFsKSB2MSwgKFZhbCkgdjIs\nCiAgICAgICAgICAgIENvbXBhcmVFeHByZXNzaW9uLkdSRUFURVJfRVFVQUwp\nOwogICAgfQoKICAgIHB1YmxpYyBFeHByZXNzaW9uIGlzRW1wdHkoVmFsdWUg\ndmFsKSB7CiAgICAgICAgcmV0dXJuIG5ldyBJc0VtcHR5RXhwcmVzc2lvbigo\nVmFsKSB2YWwpOwogICAgfQoKICAgIHB1YmxpYyBFeHByZXNzaW9uIGlzTm90\nRW1wdHkoVmFsdWUgdmFsKSB7CiAgICAgICAgcmV0dXJuIG5ldyBJc05vdEVt\ncHR5RXhwcmVzc2lvbigoVmFsKSB2YWwpOwogICAgfQoKICAgIHB1YmxpYyBF\neHByZXNzaW9uIGNvbnRhaW5zKFZhbHVlIG1hcCwgVmFsdWUgYXJnKSB7CiAg\nICAgICAgaWYgKG1hcCBpbnN0YW5jZW9mIENvbnN0KQogICAgICAgICAgICBy\nZXR1cm4gbmV3IEluRXhwcmVzc2lvbigoVmFsKSBhcmcsIChDb25zdCkgbWFw\nKTsKICAgICAgICBpZiAobWFwIGluc3RhbmNlb2YgU3ViUSkKICAgICAgICAg\nICAgcmV0dXJuIG5ldyBJblN1YlFFeHByZXNzaW9uKChWYWwpIGFyZywgKFN1\nYlEpIG1hcCk7CiAgICAgICAgcmV0dXJuIG5ldyBDb250YWluc0V4cHJlc3Np\nb24oKFZhbCkgbWFwLCAoVmFsKSBhcmcpOwogICAgfQoKICAgIHB1YmxpYyBF\neHByZXNzaW9uIGNvbnRhaW5zS2V5KFZhbHVlIG1hcCwgVmFsdWUgYXJnKSB7\nCiAgICAgICAgaWYgKG1hcCBpbnN0YW5jZW9mIENvbnN0KQogICAgICAgICAg\nICByZXR1cm4gbmV3IEluS2V5RXhwcmVzc2lvbigoVmFsKSBhcmcsIChDb25z\ndCkgbWFwKTsKICAgICAgICByZXR1cm4gbmV3IENvbnRhaW5zS2V5RXhwcmVz\nc2lvbigoVmFsKSBtYXAsIChWYWwpIGFyZyk7CiAgICB9CgogICAgcHVibGlj\nIEV4cHJlc3Npb24gY29udGFpbnNWYWx1ZShWYWx1ZSBtYXAsIFZhbHVlIGFy\nZykgewogICAgICAgIGlmIChtYXAgaW5zdGFuY2VvZiBDb25zdCkKICAgICAg\nICAgICAgcmV0dXJuIG5ldyBJblZhbHVlRXhwcmVzc2lvbigoVmFsKSBhcmcs\nIChDb25zdCkgbWFwKTsKICAgICAgICByZXR1cm4gbmV3IENvbnRhaW5zRXhw\ncmVzc2lvbigoVmFsKSBtYXAsIChWYWwpIGFyZyk7CiAgICB9CgogICAgcHVi\nbGljIEV4cHJlc3Npb24gaXNJbnN0YW5jZShWYWx1ZSB2YWwsIENsYXNzIGMp\nIHsKICAgICAgICBpZiAodmFsIGluc3RhbmNlb2YgQ29uc3QpCiAgICAgICAg\nICAgIHJldHVybiBuZXcgQ29uc3RJbnN0YW5jZW9mRXhwcmVzc2lvbigoQ29u\nc3QpIHZhbCwgYyk7CiAgICAgICAgcmV0dXJuIG5ldyBJbnN0YW5jZW9mRXhw\ncmVzc2lvbigoUENQYXRoKSB2YWwsIGMpOwogICAgfQoKICAgIHB1YmxpYyBF\neHByZXNzaW9uIGFuZChFeHByZXNzaW9uIGV4cDEsIEV4cHJlc3Npb24gZXhw\nMikgewogICAgICAgIGlmIChleHAxIGluc3RhbmNlb2YgQmluZFZhcmlhYmxl\nRXhwcmVzc2lvbikKICAgICAgICAgICAgcmV0dXJuIG5ldyBCaW5kVmFyaWFi\nbGVBbmRFeHByZXNzaW9uKChCaW5kVmFyaWFibGVFeHByZXNzaW9uKSBleHAx\nLAogICAgICAgICAgICAgICAgKEV4cCkgZXhwMik7CiAgICAgICAgaWYgKGV4\ncDIgaW5zdGFuY2VvZiBCaW5kVmFyaWFibGVFeHByZXNzaW9uKQogICAgICAg\nICAgICByZXR1cm4gbmV3IEJpbmRWYXJpYWJsZUFuZEV4cHJlc3Npb24oKEJp\nbmRWYXJpYWJsZUV4cHJlc3Npb24pIGV4cDIsCiAgICAgICAgICAgICAgICAo\nRXhwKSBleHAxKTsKICAgICAgICByZXR1cm4gbmV3IEFuZEV4cHJlc3Npb24o\nKEV4cCkgZXhwMSwgKEV4cCkgZXhwMik7CiAgICB9CgogICAgcHVibGljIEV4\ncHJlc3Npb24gb3IoRXhwcmVzc2lvbiBleHAxLCBFeHByZXNzaW9uIGV4cDIp\nIHsKICAgICAgICByZXR1cm4gbmV3IE9yRXhwcmVzc2lvbigoRXhwKSBleHAx\nLCAoRXhwKSBleHAyKTsKICAgIH0KCiAgICBwdWJsaWMgRXhwcmVzc2lvbiBu\nb3QoRXhwcmVzc2lvbiBleHApIHsKICAgICAgICBpZiAoIShleHAgaW5zdGFu\nY2VvZiBJc05vdEVtcHR5RXhwcmVzc2lvbikgJiYKICAgICAgICAgICAgSGFz\nQ29udGFpbnNFeHByZXNzaW9uVmlzaXRvci5oYXNDb250YWlucyhleHApKQog\nICAgICAgICAgICByZXR1cm4gbmV3IE5vdENvbnRhaW5zRXhwcmVzc2lvbigo\nRXhwKSBleHApOwogICAgICAgIHJldHVybiBuZXcgTm90RXhwcmVzc2lvbigo\nRXhwKSBleHApOwogICAgfQoKICAgIHB1YmxpYyBFeHByZXNzaW9uIGJpbmRW\nYXJpYWJsZShWYWx1ZSB2YXIsIFZhbHVlIHZhbCkgewogICAgICAgIC8vIGhh\nbmRsZSB0aGUgc3RyYW5nZSBjYXNlIG9mIHVzaW5nIGEgY29uc3RhbnQgcGF0\naCB0byBiaW5kIGEKICAgICAgICAvLyB2YXJpYWJsZTsgaW4gdGhlc2UgY2Fz\nZXMgdGhlIHZhcmlhYmxlIGFjdHMgbGlrZSBhbiB1bmJvdW5kCiAgICAgICAg\nLy8gdmFyaWFibGUgdGhhdCB3ZSBsaW1pdCBieSB1c2luZyBhbiBJTiBjbGF1\nc2Ugb24gdGhlIGNvbnN0YW50CiAgICAgICAgLy8gdmFsdWUgY29sbGVjdGlv\nbgogICAgICAgIGlmICh2YWwgaW5zdGFuY2VvZiBDb25zdCkgewogICAgICAg\nICAgICBQQ1BhdGggcGF0aCA9IG5ldyBQQ1BhdGgoX3R5cGUsIChWYXJpYWJs\nZSkgdmFyKTsKICAgICAgICAgICAgcGF0aC5zZXRNZXRhRGF0YSh2YXIuZ2V0\nTWV0YURhdGEoKSk7CiAgICAgICAgICAgIHJldHVybiBuZXcgSW5FeHByZXNz\naW9uKHBhdGgsIChDb25zdCkgdmFsKTsKICAgICAgICB9CiAgICAgICAgcmV0\ndXJuIG5ldyBCaW5kVmFyaWFibGVFeHByZXNzaW9uKChWYXJpYWJsZSkgdmFy\nLCAoUENQYXRoKSB2YWwsIGZhbHNlKTsKICAgIH0KCiAgICBwdWJsaWMgRXhw\ncmVzc2lvbiBiaW5kS2V5VmFyaWFibGUoVmFsdWUgdmFyLCBWYWx1ZSB2YWwp\nIHsKICAgICAgICAvLyBoYW5kbGUgdGhlIHN0cmFuZ2UgY2FzZSBvZiB1c2lu\nZyBhIGNvbnN0YW50IHBhdGggdG8gYmluZCBhCiAgICAgICAgLy8gdmFyaWFi\nbGU7IGluIHRoZXNlIGNhc2VzIHRoZSB2YXJpYWJsZSBhY3RzIGxpa2UgYW4g\ndW5ib3VuZAogICAgICAgIC8vIHZhcmlhYmxlIHRoYXQgd2UgbGltaXQgYnkg\ndXNpbmcgYW4gSU4gY2xhdXNlIG9uIHRoZSBjb25zdGFudAogICAgICAgIC8v\nIHZhbHVlIGNvbGxlY3Rpb24KICAgICAgICBpZiAodmFsIGluc3RhbmNlb2Yg\nQ29uc3QpIHsKICAgICAgICAgICAgUENQYXRoIHBhdGggPSBuZXcgUENQYXRo\nKF90eXBlLCAoVmFyaWFibGUpIHZhcik7CiAgICAgICAgICAgIHBhdGguc2V0\nTWV0YURhdGEodmFyLmdldE1ldGFEYXRhKCkpOwogICAgICAgICAgICByZXR1\ncm4gbmV3IEluS2V5RXhwcmVzc2lvbihwYXRoLCAoQ29uc3QpIHZhbCk7CiAg\nICAgICAgfQogICAgICAgIHJldHVybiBuZXcgQmluZFZhcmlhYmxlRXhwcmVz\nc2lvbigoVmFyaWFibGUpIHZhciwgKFBDUGF0aCkgdmFsLCB0cnVlKTsKICAg\nIH0KCiAgICBwdWJsaWMgRXhwcmVzc2lvbiBiaW5kVmFsdWVWYXJpYWJsZShW\nYWx1ZSB2YXIsIFZhbHVlIHZhbCkgewogICAgICAgIHJldHVybiBiaW5kVmFy\naWFibGUodmFyLCB2YWwpOwogICAgfQoKICAgIHB1YmxpYyBFeHByZXNzaW9u\nIHN0YXJ0c1dpdGgoVmFsdWUgdjEsIFZhbHVlIHYyKSB7CiAgICAgICAgcmV0\ndXJuIG5ldyBTdGFydHNXaXRoRXhwcmVzc2lvbigoVmFsKSB2MSwgKFZhbCkg\ndjIpOwogICAgfQoKICAgIHB1YmxpYyBFeHByZXNzaW9uIGVuZHNXaXRoKFZh\nbHVlIHYxLCBWYWx1ZSB2MikgewogICAgICAgIHJldHVybiBuZXcgRW5kc1dp\ndGhFeHByZXNzaW9uKChWYWwpIHYxLCAoVmFsKSB2Mik7CiAgICB9CgogICAg\ncHVibGljIEV4cHJlc3Npb24gbm90TWF0Y2hlcyhWYWx1ZSB2MSwgVmFsdWUg\ndjIsCiAgICAgICAgU3RyaW5nIHNpbmdsZSwgU3RyaW5nIG11bHRpLCBTdHJp\nbmcgZXNjKSB7CiAgICAgICAgcmV0dXJuIG5vdChtYXRjaGVzKHYxLCB2Miwg\nc2luZ2xlLCBtdWx0aSwgZXNjKSk7CiAgICB9CgogICAgcHVibGljIEV4cHJl\nc3Npb24gbWF0Y2hlcyhWYWx1ZSB2MSwgVmFsdWUgdjIsCiAgICAgICAgU3Ry\naW5nIHNpbmdsZSwgU3RyaW5nIG11bHRpLCBTdHJpbmcgZXNjKSB7CiAgICAg\nICAgaWYgKCEodjIgaW5zdGFuY2VvZiBDb25zdCkpCiAgICAgICAgICAgIHRo\ncm93IG5ldyBVc2VyRXhjZXB0aW9uKF9sb2MuZ2V0KCJjb25zdC1vbmx5Iiwg\nIm1hdGNoZXMiKSk7CiAgICAgICAgaWYgKGVzYyA9PSBudWxsICYmIF90eXBl\nLmdldE1hcHBpbmdSZXBvc2l0b3J5KCkuCiAgICAgICAgICAgICAgICBnZXRE\nQkRpY3Rpb25hcnkoKS5yZXF1aXJlc1NlYXJjaFN0cmluZ0VzY2FwZUZvckxp\na2UgPT0gdHJ1ZSkgeyAKICAgICAgICAgICAgZXNjID0gX3R5cGUuZ2V0TWFw\ncGluZ1JlcG9zaXRvcnkoKS4KICAgICAgICAgICAgICAgIGdldERCRGljdGlv\nbmFyeSgpLnNlYXJjaFN0cmluZ0VzY2FwZTsKICAgICAgICB9ICAgICAgICAK\nICAgICAgICByZXR1cm4gbmV3IE1hdGNoZXNFeHByZXNzaW9uKChWYWwpIHYx\nLCAoQ29uc3QpIHYyLCBzaW5nbGUsIG11bHRpLCBlc2MpOwogICAgfQoKICAg\nIHB1YmxpYyBTdWJxdWVyeSBuZXdTdWJxdWVyeShDbGFzc01ldGFEYXRhIGNh\nbmRpZGF0ZSwgYm9vbGVhbiBzdWJzLAogICAgICAgIFN0cmluZyBhbGlhcykg\newogICAgICAgIERCRGljdGlvbmFyeSBkaWN0ID0gX3R5cGUuZ2V0TWFwcGlu\nZ1JlcG9zaXRvcnkoKS5nZXREQkRpY3Rpb25hcnkoKTsKICAgICAgICBkaWN0\nLmFzc2VydFN1cHBvcnQoZGljdC5zdXBwb3J0c1N1YnNlbGVjdCwgIlN1cHBv\ncnRzU3Vic2VsZWN0Iik7CiAgICAgICAgcmV0dXJuIG5ldyBTdWJRKChDbGFz\nc01hcHBpbmcpIGNhbmRpZGF0ZSwgc3VicywgYWxpYXMpOwogICAgfQoKICAg\nIHB1YmxpYyBQYXRoIG5ld1BhdGgoKSB7CiAgICAgICAgcmV0dXJuIG5ldyBQ\nQ1BhdGgoX3R5cGUpOwogICAgfQoKICAgIHB1YmxpYyBQYXRoIG5ld1BhdGgo\nVmFsdWUgdmFsKSB7CiAgICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIENvbnN0\nKQogICAgICAgICAgICByZXR1cm4gbmV3IENvbnN0UGF0aCgoQ29uc3QpIHZh\nbCk7CiAgICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIFN1YlEpCiAgICAgICAg\nICAgIHJldHVybiBuZXcgUENQYXRoKChTdWJRKSB2YWwpOwogICAgICAgIHJl\ndHVybiBuZXcgUENQYXRoKF90eXBlLCAoVmFyaWFibGUpIHZhbCk7CiAgICB9\nCgogICAgcHVibGljIExpdGVyYWwgbmV3TGl0ZXJhbChPYmplY3QgdmFsLCBp\nbnQgcHR5cGUpIHsKICAgICAgICByZXR1cm4gbmV3IExpdCh2YWwsIHB0eXBl\nKTsKICAgIH0KCiAgICBwdWJsaWMgTGl0ZXJhbCBuZXdUeXBlTGl0ZXJhbChP\nYmplY3QgdmFsLCBpbnQgcHR5cGUpIHsKICAgICAgICByZXR1cm4gbmV3IFR5\ncGVMaXQodmFsLCBwdHlwZSk7CiAgICB9CgogICAgcHVibGljIFZhbHVlIGdl\ndFRoaXMoKSB7CiAgICAgICAgcmV0dXJuIG5ldyBQQ1BhdGgoX3R5cGUpOwog\nICAgfQoKICAgIHB1YmxpYyBWYWx1ZSBnZXROdWxsKCkgewogICAgICAgIHJl\ndHVybiBOVUxMOwogICAgfQoKICAgIHB1YmxpYyA8VCBleHRlbmRzIERhdGU+\nIFZhbHVlIGdldEN1cnJlbnREYXRlKENsYXNzPFQ+IGRhdGVUeXBlKSB7CiAg\nICAgICAgcmV0dXJuIG5ldyBDdXJyZW50RGF0ZShkYXRlVHlwZSk7CiAgICB9\nCgogICAgcHVibGljIDxUIGV4dGVuZHMgRGF0ZT4gVmFsdWUgZ2V0Q3VycmVu\ndFRpbWUoQ2xhc3M8VD4gZGF0ZVR5cGUpIHsKICAgICAgICByZXR1cm4gIG5l\ndyBDdXJyZW50RGF0ZShkYXRlVHlwZSk7CiAgICB9CgogICAgcHVibGljIDxU\nIGV4dGVuZHMgRGF0ZT4gVmFsdWUgZ2V0Q3VycmVudFRpbWVzdGFtcChDbGFz\nczxUPiBkYXRlVHlwZSkgewogICAgICAgIHJldHVybiAgbmV3IEN1cnJlbnRE\nYXRlKGRhdGVUeXBlKTsKICAgIH0KCiAgICBwdWJsaWMgUGFyYW1ldGVyIG5l\nd1BhcmFtZXRlcihPYmplY3QgbmFtZSwgQ2xhc3MgdHlwZSkgewogICAgICAg\nIHJldHVybiBuZXcgUGFyYW0obmFtZSwgdHlwZSk7CiAgICB9CgogICAgcHVi\nbGljIFBhcmFtZXRlciBuZXdDb2xsZWN0aW9uVmFsdWVkUGFyYW1ldGVyKE9i\namVjdCBrZXksIENsYXNzIHR5cGUpIHsKICAgICAgICByZXR1cm4gbmV3IENv\nbGxlY3Rpb25QYXJhbShrZXksIHR5cGUpOwogICAgfQoKICAgIHB1YmxpYyBW\nYWx1ZSBuZXdFeHRlbnNpb24oRmlsdGVyTGlzdGVuZXIgbGlzdGVuZXIsIFZh\nbHVlIHRhcmdldCwKICAgICAgICBWYWx1ZSBhcmcpIHsKICAgICAgICByZXR1\ncm4gbmV3IEV4dGVuc2lvbigoSkRCQ0ZpbHRlckxpc3RlbmVyKSBsaXN0ZW5l\nciwKICAgICAgICAgICAgKFZhbCkgdGFyZ2V0LCAoVmFsKSBhcmcsIF90eXBl\nKTsKICAgIH0KCiAgICBwdWJsaWMgVmFsdWUgbmV3QWdncmVnYXRlKEFnZ3Jl\nZ2F0ZUxpc3RlbmVyIGxpc3RlbmVyLCBWYWx1ZSBhcmcpIHsKICAgICAgICBy\nZXR1cm4gbmV3IEFnZ3JlZ2F0ZSgoSkRCQ0FnZ3JlZ2F0ZUxpc3RlbmVyKSBs\naXN0ZW5lciwKICAgICAgICAgICAgKFZhbCkgYXJnLCBfdHlwZSk7CiAgICB9\nCgogICAgcHVibGljIEFyZ3VtZW50cyBuZXdBcmd1bWVudExpc3QoVmFsdWUg\ndjEsIFZhbHVlIHYyKSB7CiAgICAgICAgcmV0dXJuIG5ldyBBcmdzKChWYWwp\nIHYxLCAoVmFsKSB2Mik7CiAgICB9CiAgICAKICAgIHB1YmxpYyBBcmd1bWVu\ndHMgbmV3QXJndW1lbnRMaXN0KFZhbHVlLi4uIHZzKSB7CiAgICAgICAgaWYg\nKHZzID09IG51bGwpCiAgICAgICAgICAgcmV0dXJuIG5ldyBBcmdzKG51bGwp\nOwogICAgICAgIFZhbFtdIHZhbHMgPSBuZXcgVmFsW3ZzLmxlbmd0aF07CiAg\nICAgICAgaW50IGkgPSAwOwogICAgICAgIGZvciAoVmFsdWUgdiA6IHZzKSB7\nCiAgICAgICAgICAgIHZhbHNbaSsrXSA9IChWYWwpdjsKICAgICAgICB9CiAg\nICAgICAgcmV0dXJuIG5ldyBBcmdzKHZhbHMpOwogICAgfQoKICAgIHB1Ymxp\nYyBWYWx1ZSBuZXdVbmJvdW5kVmFyaWFibGUoU3RyaW5nIG5hbWUsIENsYXNz\nIHR5cGUpIHsKICAgICAgICByZXR1cm4gbmV3IFZhcmlhYmxlKG5hbWUsIHR5\ncGUpOwogICAgfQoKICAgIHB1YmxpYyBWYWx1ZSBuZXdCb3VuZFZhcmlhYmxl\nKFN0cmluZyBuYW1lLCBDbGFzcyB0eXBlKSB7CiAgICAgICAgcmV0dXJuIG5l\nd1VuYm91bmRWYXJpYWJsZShuYW1lLCB0eXBlKTsKICAgIH0KCiAgICBwdWJs\naWMgVmFsdWUgY2FzdChWYWx1ZSB2YWwsIENsYXNzIGNscykgewogICAgICAg\nIHZhbC5zZXRJbXBsaWNpdFR5cGUoY2xzKTsKICAgICAgICByZXR1cm4gdmFs\nOwogICAgfQoKICAgIHB1YmxpYyBWYWx1ZSBhZGQoVmFsdWUgdjEsIFZhbHVl\nIHYyKSB7CiAgICAgICAgcmV0dXJuIG5ldyBNYXRoKChWYWwpIHYxLCAoVmFs\nKSB2MiwgTWF0aC5BREQpOwogICAgfQoKICAgIHB1YmxpYyBWYWx1ZSBzdWJ0\ncmFjdChWYWx1ZSB2MSwgVmFsdWUgdjIpIHsKICAgICAgICByZXR1cm4gbmV3\nIE1hdGgoKFZhbCkgdjEsIChWYWwpIHYyLCBNYXRoLlNVQlRSQUNUKTsKICAg\nIH0KCiAgICBwdWJsaWMgVmFsdWUgbXVsdGlwbHkoVmFsdWUgdjEsIFZhbHVl\nIHYyKSB7CiAgICAgICAgcmV0dXJuIG5ldyBNYXRoKChWYWwpIHYxLCAoVmFs\nKSB2MiwgTWF0aC5NVUxUSVBMWSk7CiAgICB9CgogICAgcHVibGljIFZhbHVl\nIGRpdmlkZShWYWx1ZSB2MSwgVmFsdWUgdjIpIHsKICAgICAgICByZXR1cm4g\nbmV3IE1hdGgoKFZhbCkgdjEsIChWYWwpIHYyLCBNYXRoLkRJVklERSk7CiAg\nICB9CgogICAgcHVibGljIFZhbHVlIG1vZChWYWx1ZSB2MSwgVmFsdWUgdjIp\nIHsKICAgICAgICByZXR1cm4gbmV3IE1hdGgoKFZhbCkgdjEsIChWYWwpIHYy\nLCBNYXRoLk1PRCk7CiAgICB9CgogICAgcHVibGljIFZhbHVlIGFicyhWYWx1\nZSB2YWwpIHsKICAgICAgICByZXR1cm4gbmV3IEFicygoVmFsKSB2YWwpOwog\nICAgfQoKICAgIHB1YmxpYyBWYWx1ZSBpbmRleE9mKFZhbHVlIHYxLCBWYWx1\nZSB2MikgewogICAgICAgIHJldHVybiBuZXcgSW5kZXhPZigoVmFsKSB2MSwg\nKFZhbCkgdjIpOwogICAgfQoKICAgIHB1YmxpYyBWYWx1ZSBjb25jYXQoVmFs\ndWUgdjEsIFZhbHVlIHYyKSB7CiAgICAgICAgcmV0dXJuIG5ldyBDb25jYXQo\nKFZhbCkgdjEsIChWYWwpIHYyKTsKICAgIH0KCiAgICBwdWJsaWMgVmFsdWUg\nc3RyaW5nTGVuZ3RoKFZhbHVlIHN0cikgewogICAgICAgIHJldHVybiBuZXcg\nU3RyaW5nTGVuZ3RoKChWYWwpIHN0cik7CiAgICB9CgogICAgcHVibGljIFZh\nbHVlIHRyaW0oVmFsdWUgc3RyLCBWYWx1ZSB0cmltQ2hhciwgQm9vbGVhbiB3\naGVyZSkgewogICAgICAgIHJldHVybiBuZXcgVHJpbSgoVmFsKSBzdHIsIChW\nYWwpIHRyaW1DaGFyLCB3aGVyZSk7CiAgICB9CgogICAgcHVibGljIFZhbHVl\nIHNxcnQoVmFsdWUgdmFsKSB7CiAgICAgICAgcmV0dXJuIG5ldyBTcXJ0KChW\nYWwpIHZhbCk7CiAgICB9CgogICAgcHVibGljIFZhbHVlIHN1YnN0cmluZyhW\nYWx1ZSB2MSwgVmFsdWUgdjIpIHsKICAgICAgICByZXR1cm4gbmV3IFN1YnN0\ncmluZygoVmFsKSB2MSwgKFZhbCkgdjIpOwogICAgfQoKICAgIHB1YmxpYyBW\nYWx1ZSB0b1VwcGVyQ2FzZShWYWx1ZSB2YWwpIHsKICAgICAgICByZXR1cm4g\nbmV3IFRvVXBwZXJDYXNlKChWYWwpIHZhbCk7CiAgICB9CgogICAgcHVibGlj\nIFZhbHVlIHRvTG93ZXJDYXNlKFZhbHVlIHZhbCkgewogICAgICAgIHJldHVy\nbiBuZXcgVG9Mb3dlckNhc2UoKFZhbCkgdmFsKTsKICAgIH0KCiAgICBwdWJs\naWMgVmFsdWUgYXZnKFZhbHVlIHZhbCkgewogICAgICAgIHJldHVybiBuZXcg\nQXZnKChWYWwpIHZhbCk7CiAgICB9CgogICAgcHVibGljIFZhbHVlIGNvdW50\nKFZhbHVlIHZhbCkgewogICAgICAgIHJldHVybiBuZXcgQ291bnQoKFZhbCkg\ndmFsKTsKICAgIH0KCiAgICBwdWJsaWMgVmFsdWUgZGlzdGluY3QoVmFsdWUg\ndmFsKSB7CiAgICAgICAgcmV0dXJuIG5ldyBEaXN0aW5jdCgoVmFsKSB2YWwp\nOwogICAgfQoKICAgIHB1YmxpYyBWYWx1ZSBtYXgoVmFsdWUgdmFsKSB7CiAg\nICAgICAgcmV0dXJuIG5ldyBNYXgoKFZhbCkgdmFsKTsKICAgIH0KCiAgICBw\ndWJsaWMgVmFsdWUgbWluKFZhbHVlIHZhbCkgewogICAgICAgIHJldHVybiBu\nZXcgTWluKChWYWwpIHZhbCk7CiAgICB9CgogICAgcHVibGljIFZhbHVlIHN1\nbShWYWx1ZSB2YWwpIHsKICAgICAgICByZXR1cm4gbmV3IFN1bSgoVmFsKSB2\nYWwpOwogICAgfQoKICAgIHB1YmxpYyBWYWx1ZSBhbnkoVmFsdWUgdmFsKSB7\nCiAgICAgICAgcmV0dXJuIG5ldyBBbnkoKFZhbCkgdmFsKTsKICAgIH0KCiAg\nICBwdWJsaWMgVmFsdWUgYWxsKFZhbHVlIHZhbCkgewogICAgICAgIHJldHVy\nbiBuZXcgQWxsKChWYWwpIHZhbCk7CiAgICB9CgogICAgcHVibGljIFZhbHVl\nIHNpemUoVmFsdWUgdmFsKSB7CiAgICAgICAgcmV0dXJuIG5ldyBTaXplKChW\nYWwpIHZhbCk7CiAgICB9CgogICAgcHVibGljIFZhbHVlIGluZGV4KFZhbHVl\nIHZhbCkgewogICAgICAgICgoUENQYXRoKSB2YWwpLnZlcmlmeUluZGV4ZWRG\naWVsZCgpOwogICAgICAgIHJldHVybiBuZXcgSW5kZXgoKFZhbCkgdmFsKTsK\nICAgIH0KCiAgICBwdWJsaWMgVmFsdWUgdHlwZShWYWx1ZSB2YWwpIHsKICAg\nICAgICByZXR1cm4gbmV3IFR5cGUoKFZhbCkgdmFsKTsKICAgIH0KCiAgICBw\ndWJsaWMgVmFsdWUgbWFwRW50cnkoVmFsdWUga2V5LCBWYWx1ZSB2YWwpIHsK\nICAgICAgICByZXR1cm4gbmV3IE1hcEVudHJ5KChWYWwpIGtleSwgKFZhbCkg\ndmFsKTsKICAgIH0KCiAgICBwdWJsaWMgVmFsdWUgbWFwS2V5KFZhbHVlIGtl\neSwgVmFsdWUgdmFsKSB7CiAgICAgICAgcmV0dXJuIG5ldyBNYXBLZXkoKFZh\nbCkga2V5KTsKICAgIH0KCiAgICBwdWJsaWMgVmFsdWUgZ2V0S2V5KFZhbHVl\nIHZhbCkgewogICAgICAgICgoUENQYXRoKSB2YWwpLmdldEtleSgpOwogICAg\nICAgIHJldHVybiB2YWw7CiAgICB9CgogICAgcHVibGljIFZhbHVlIGdldE9i\namVjdElkKFZhbHVlIHZhbCkgewogICAgICAgIGlmICh2YWwgaW5zdGFuY2Vv\nZiBDb25zdCkKICAgICAgICAgICAgcmV0dXJuIG5ldyBDb25zdEdldE9iamVj\ndElkKChDb25zdCkgdmFsKTsKICAgICAgICByZXR1cm4gbmV3IEdldE9iamVj\ndElkKChQQ1BhdGgpIHZhbCk7CiAgICB9CgogICAgcHVibGljIFZhbHVlIGdl\ndE1hcFZhbHVlKFZhbHVlIG1hcCwgVmFsdWUgYXJnKSB7CiAgICAgICAgcmV0\ndXJuIG5ldyBHZXRNYXBWYWx1ZSgoVmFsKSBtYXAsIChWYWwpIGFyZywgCiAg\nICAgICAgICAgICJnbXYiICsgX2dldE1hcFZhbHVlQWxpYXMrKyk7CiAgICB9\nCgogICAgcHJpdmF0ZSBWYWx1ZSBnZXRMaXRlcmFsUmF3U3RyaW5nKFZhbHVl\nIHZhbCkgewogICAgICAgIGlmICh2YWwgaW5zdGFuY2VvZiBMaXQpIHsKICAg\nICAgICAgICAgTGl0IGxpdCA9IChMaXQpIHZhbDsKICAgICAgICAgICAgU3Ry\naW5nQnVpbGRlciB2YWx1ZSA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7CiAgICAg\nICAgICAgIGludCBwVHlwZSA9IGxpdC5nZXRQYXJzZVR5cGUoKTsgCiAgICAg\nICAgICAgIGlmIChwVHlwZSA9PSBMaXRlcmFsLlRZUEVfU1FfU1RSSU5HIHx8\nCiAgICAgICAgICAgICAgICBwVHlwZSA9PSBMaXRlcmFsLlRZUEVfU1RSSU5H\nKQogICAgICAgICAgICAgICAgdmFsdWUuYXBwZW5kKCInIikuYXBwZW5kKGxp\ndC5nZXRWYWx1ZSgpLnRvU3RyaW5nKCkpLmFwcGVuZCgiJyIpOwogICAgICAg\nICAgICBlbHNlIGlmIChwVHlwZSA9PSBMaXRlcmFsLlRZUEVfQk9PTEVBTikg\newogICAgICAgICAgICAgICAgaWYgKChCb29sZWFuKSBsaXQuZ2V0VmFsdWUo\nKSkKICAgICAgICAgICAgICAgICAgICB2YWx1ZS5hcHBlbmQoIjEiKTsKICAg\nICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB2YWx1ZS5h\ncHBlbmQoIjAiKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChwVHlwZSA9PSBM\naXRlcmFsLlRZUEVfRU5VTSkgewogICAgICAgICAgICAgICAgbGl0LnNldFJh\ndyh0cnVlKTsKICAgICAgICAgICAgICAgIHJldHVybiB2YWw7CiAgICAgICAg\nICAgIH0gZWxzZQogICAgICAgICAgICAgICAgdmFsdWUuYXBwZW5kKGxpdC5n\nZXRWYWx1ZSgpLnRvU3RyaW5nKCkpOwogICAgICAgICAgICBsaXQuc2V0VmFs\ndWUobmV3IFJhdyh2YWx1ZS50b1N0cmluZygpKSk7CiAgICAgICAgICAgIHJl\ndHVybiBsaXQ7CiAgICAgICAgfQogICAgICAgIHJldHVybiB2YWw7CiAgICB9\nCgogICAgcHVibGljIFZhbHVlIHNpbXBsZUNhc2VFeHByZXNzaW9uKFZhbHVl\nIGNhc2VPcGVyYW5kLCBFeHByZXNzaW9uW10gZXhwLAogICAgICAgICAgICBW\nYWx1ZSB2YWwxKSB7CiAgICAgICAgRXhwW10gZXhwcyA9IG5ldyBFeHBbZXhw\nLmxlbmd0aF07CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBleHAubGVu\nZ3RoOyBpKyspCiAgICAgICAgICAgIGV4cHNbaV0gPSAoRXhwKSBleHBbaV07\nCiAgICAgICAgdmFsMSA9IGdldExpdGVyYWxSYXdTdHJpbmcodmFsMSk7CiAg\nICAgICAgcmV0dXJuIG5ldyBTaW1wbGVDYXNlRXhwcmVzc2lvbigoVmFsKSBj\nYXNlT3BlcmFuZCwgZXhwcywKICAgICAgICAgICAgKFZhbCkgdmFsMSk7CiAg\nICB9CgogICAgcHVibGljIFZhbHVlIGdlbmVyYWxDYXNlRXhwcmVzc2lvbihF\neHByZXNzaW9uW10gZXhwLAogICAgICAgICAgICBWYWx1ZSB2YWwpIHsKICAg\nICAgICBFeHBbXSBleHBzID0gbmV3IEV4cFtleHAubGVuZ3RoXTsKICAgICAg\nICBmb3IgKGludCBpID0gMDsgaSA8IGV4cC5sZW5ndGg7IGkrKykKICAgICAg\nICAgICAgZXhwc1tpXSA9IChFeHApIGV4cFtpXTsKICAgICAgICB2YWwgPSBn\nZXRMaXRlcmFsUmF3U3RyaW5nKHZhbCk7CiAgICAgICAgcmV0dXJuIG5ldyBH\nZW5lcmFsQ2FzZUV4cHJlc3Npb24oZXhwcywgKFZhbCkgdmFsKTsKICAgIH0K\nCiAgICBwdWJsaWMgRXhwcmVzc2lvbiB3aGVuQ29uZGl0aW9uKEV4cHJlc3Np\nb24gZXhwLCBWYWx1ZSB2YWwpIHsKICAgICAgICB2YWwgPSBnZXRMaXRlcmFs\nUmF3U3RyaW5nKHZhbCk7CiAgICAgICAgcmV0dXJuIG5ldyBXaGVuQ29uZGl0\naW9uKChFeHApIGV4cCwgKFZhbCkgdmFsKTsKICAgIH0KCiAgICBwdWJsaWMg\nRXhwcmVzc2lvbiB3aGVuU2NhbGFyKFZhbHVlIHZhbDEsIFZhbHVlIHZhbDIp\nIHsKICAgICAgICB2YWwxID0gZ2V0TGl0ZXJhbFJhd1N0cmluZyh2YWwxKTsK\nICAgICAgICB2YWwyID0gZ2V0TGl0ZXJhbFJhd1N0cmluZyh2YWwyKTsKICAg\nICAgICByZXR1cm4gbmV3IFdoZW5TY2FsYXIoKFZhbCkgdmFsMSwgKFZhbCkg\ndmFsMik7CiAgICB9CgogICAgcHVibGljIFZhbHVlIGNvYWxlc2NlRXhwcmVz\nc2lvbihWYWx1ZVtdIHZhbHMpIHs7CiAgICAgICAgT2JqZWN0W10gdmFsdWVz\nID0gbmV3IFZhbFt2YWxzLmxlbmd0aF07CiAgICAgICAgZm9yIChpbnQgaSA9\nIDA7IGkgPCB2YWxzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHZhbHVl\nc1tpXSA9IGdldExpdGVyYWxSYXdTdHJpbmcodmFsc1tpXSk7CiAgICAgICAg\nfQogICAgICAgIHJldHVybiBuZXcgQ29hbGVzY2VFeHByZXNzaW9uKChWYWxb\nXSkgdmFsdWVzKTsKICAgIH0KCiAgICBwdWJsaWMgVmFsdWUgbnVsbElmRXhw\ncmVzc2lvbihWYWx1ZSB2YWwxLCBWYWx1ZSB2YWwyKSB7CiAgICAgICAgdmFs\nMSA9IGdldExpdGVyYWxSYXdTdHJpbmcodmFsMSk7CiAgICAgICAgdmFsMiA9\nIGdldExpdGVyYWxSYXdTdHJpbmcodmFsMik7CiAgICAgICAgcmV0dXJuIG5l\ndyBOdWxsSWZFeHByZXNzaW9uKChWYWwpIHZhbDEsIChWYWwpIHZhbDIpOwog\nICAgfQogICAgCiAgICBwdWJsaWMgVmFsdWUgbmV3RnVuY3Rpb24oU3RyaW5n\nIGZ1bmN0aW9uTmFtZSwgQ2xhc3M8Pz4gcmVzdWx0VHlwZSwgVmFsdWUuLi4g\nYXJncykgewogICAgICAgIHJldHVybiBuZXcgRGF0YXN0b3JlRnVuY3Rpb24o\nZnVuY3Rpb25OYW1lLCByZXN1bHRUeXBlLCBuZXdBcmd1bWVudExpc3QoYXJn\ncykpOwogICAgfQp9Cg==\n","encoding":"base64"}

