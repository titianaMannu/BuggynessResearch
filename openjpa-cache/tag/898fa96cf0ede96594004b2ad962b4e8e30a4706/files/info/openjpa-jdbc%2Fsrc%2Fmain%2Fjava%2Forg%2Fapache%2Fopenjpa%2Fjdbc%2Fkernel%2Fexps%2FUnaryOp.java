{"sha":"b7246ba20d5c9c7008d20e2ac58bdfafb4c9935c","node_id":"MDQ6QmxvYjIwNjM2NDpiNzI0NmJhMjBkNWM5YzcwMDhkMjBlMmFjNThiZGZhZmI0Yzk5MzVj","size":4842,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/b7246ba20d5c9c7008d20e2ac58bdfafb4c9935c","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuZXhwczsK\nCmltcG9ydCBqYXZhLnNxbC5TUUxFeGNlcHRpb247CgppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMubWV0YS5KYXZhU1FMVHlwZXM7CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuUmVzdWx0OwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNRTEJ1ZmZlcjsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5TZWxlY3Q7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEua2VybmVsLkZpbHRlcnM7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEua2VybmVsLmV4cHMuRXhwcmVzc2lvblZpc2l0b3I7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5DbGFzc01ldGFEYXRhOwoK\nLyoqCiAqIFZhbHVlIHByb2R1Y2VkIGJ5IGEgdW5hcnkgb3BlcmF0aW9uIG9u\nIGEgdmFsdWUuCiAqCiAqIEBhdXRob3IgQWJlIFdoaXRlCiAqLwphYnN0cmFj\ndCBjbGFzcyBVbmFyeU9wCiAgICBleHRlbmRzIEFic3RyYWN0VmFsIHsKCiAg\nICBwcml2YXRlIGZpbmFsIFZhbCBfdmFsOwogICAgcHJpdmF0ZSBDbGFzc01l\ndGFEYXRhIF9tZXRhID0gbnVsbDsKICAgIHByaXZhdGUgQ2xhc3MgX2Nhc3Qg\nPSBudWxsOwogICAgcHJpdmF0ZSBib29sZWFuIF9ub1BhcmVuID0gZmFsc2U7\nCgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3Rvci4gUHJvdmlkZSB0aGUgdmFs\ndWUgdG8gb3BlcmF0ZSBvbi4KICAgICAqLwogICAgcHVibGljIFVuYXJ5T3Ao\nVmFsIHZhbCkgewogICAgICAgIF92YWwgPSB2YWw7CiAgICB9CiAgICAKICAg\nIHB1YmxpYyBVbmFyeU9wKFZhbCB2YWwsIGJvb2xlYW4gbm9QYXJlbikgewog\nICAgICAgIF92YWwgPSB2YWw7CiAgICAgICAgX25vUGFyZW4gPSBub1BhcmVu\nOwogICAgfQoKICAgIHB1YmxpYyBWYWwgZ2V0VmFsdWUoKSB7CiAgICAgICAg\ncmV0dXJuIF92YWw7CiAgICB9CgogICAgcHVibGljIENsYXNzTWV0YURhdGEg\nZ2V0TWV0YURhdGEoKSB7CiAgICAgICAgcmV0dXJuIF9tZXRhOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHNldE1ldGFEYXRhKENsYXNzTWV0YURhdGEgbWV0\nYSkgewogICAgICAgIF9tZXRhID0gbWV0YTsKICAgIH0KCiAgICBwdWJsaWMg\nQ2xhc3MgZ2V0VHlwZSgpIHsKICAgICAgICBpZiAoX2Nhc3QgIT0gbnVsbCkK\nICAgICAgICAgICAgcmV0dXJuIF9jYXN0OwogICAgICAgIHJldHVybiBnZXRU\neXBlKF92YWwuZ2V0VHlwZSgpKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBz\nZXRJbXBsaWNpdFR5cGUoQ2xhc3MgdHlwZSkgewogICAgICAgIF9jYXN0ID0g\ndHlwZTsKICAgIH0KCiAgICBwdWJsaWMgRXhwU3RhdGUgaW5pdGlhbGl6ZShT\nZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0eCwgaW50IGZsYWdzKSB7CiAgICAg\nICAgcmV0dXJuIGluaXRpYWxpemVWYWx1ZShzZWwsIGN0eCwgZmxhZ3MpOwog\nICAgfQoKICAgIHByb3RlY3RlZCBFeHBTdGF0ZSBpbml0aWFsaXplVmFsdWUo\nU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIGludCBmbGFncykgewogICAg\nICAgIHJldHVybiBfdmFsLmluaXRpYWxpemUoc2VsLCBjdHgsIGZsYWdzKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZWxlY3QoU2VsZWN0IHNlbCwgRXhw\nQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlLCAKICAgICAgICBib29sZWFu\nIHBrcykgewogICAgICAgIHNlbC5zZWxlY3QobmV3U1FMQnVmZmVyKHNlbCwg\nY3R4LCBzdGF0ZSksIHRoaXMpOwogICAgICAgIGlmIChpc0FnZ3JlZ2F0ZSgp\nKQogICAgICAgICAgICBzZWwuc2V0QWdncmVnYXRlKHRydWUpOwogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIHNlbGVjdENvbHVtbnMoU2VsZWN0IHNlbCwgRXhw\nQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlLCAKICAgICAgICBib29sZWFu\nIHBrcykgewogICAgICAgIF92YWwuc2VsZWN0Q29sdW1ucyhzZWwsIGN0eCwg\nc3RhdGUsIHRydWUpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGdyb3VwQnko\nU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlKSB7\nCiAgICAgICAgc2VsLmdyb3VwQnkobmV3U1FMQnVmZmVyKHNlbCwgY3R4LCBz\ndGF0ZSkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIG9yZGVyQnkoU2VsZWN0\nIHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRlLCAKICAgICAg\nICBib29sZWFuIGFzYykgewogICAgICAgIHNlbC5vcmRlckJ5KG5ld1NRTEJ1\nZmZlcihzZWwsIGN0eCwgc3RhdGUpLCBhc2MsIGZhbHNlLCBnZXRTZWxlY3RB\ncygpKTsKICAgIH0KCiAgICBwcml2YXRlIFNRTEJ1ZmZlciBuZXdTUUxCdWZm\nZXIoU2VsZWN0IHNlbCwgRXhwQ29udGV4dCBjdHgsIEV4cFN0YXRlIHN0YXRl\nKSB7CiAgICAgICAgY2FsY3VsYXRlVmFsdWUoc2VsLCBjdHgsIHN0YXRlLCBu\ndWxsLCBudWxsKTsKICAgICAgICBTUUxCdWZmZXIgYnVmID0gbmV3IFNRTEJ1\nZmZlcihjdHguc3RvcmUuZ2V0REJEaWN0aW9uYXJ5KCkpOwogICAgICAgIGFw\ncGVuZFRvKHNlbCwgY3R4LCBzdGF0ZSwgYnVmLCAwKTsKICAgICAgICByZXR1\ncm4gYnVmOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgbG9hZChFeHBDb250\nZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUsIFJlc3VsdCByZXMpCiAgICAgICAg\ndGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgT2JqZWN0IHZhbHVlID0g\ncmVzLmdldE9iamVjdCh0aGlzLCBKYXZhU1FMVHlwZXMuSkRCQ19ERUZBVUxU\nLCBudWxsKTsKICAgICAgICBDbGFzczw/PiB0eXBlID0gZ2V0VHlwZSgpOwog\nICAgICAgIGlmICh2YWx1ZSA9PSBudWxsICYmICh0eXBlLmlzUHJpbWl0aXZl\nKCkgfHwgTnVtYmVyLmNsYXNzLmlzQXNzaWduYWJsZUZyb20odHlwZSkpKSB7\nCiAgICAgICAgICAgIHZhbHVlID0gRmlsdGVycy5nZXREZWZhdWx0Rm9yTnVs\nbChGaWx0ZXJzLndyYXAodHlwZSkpOwogICAgICAgIH0KICAgICAgICByZXR1\ncm4gRmlsdGVycy5jb252ZXJ0KHZhbHVlLCB0eXBlKTsKICAgIH0KCiAgICBw\ndWJsaWMgdm9pZCBjYWxjdWxhdGVWYWx1ZShTZWxlY3Qgc2VsLCBFeHBDb250\nZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUsIAogICAgICAgIFZhbCBvdGhlciwg\nRXhwU3RhdGUgb3RoZXJTdGF0ZSkgewogICAgICAgIF92YWwuY2FsY3VsYXRl\nVmFsdWUoc2VsLCBjdHgsIHN0YXRlLCBudWxsLCBudWxsKTsKICAgIH0KCiAg\nICBwdWJsaWMgaW50IGxlbmd0aChTZWxlY3Qgc2VsLCBFeHBDb250ZXh0IGN0\neCwgRXhwU3RhdGUgc3RhdGUpIHsKICAgICAgICByZXR1cm4gMTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBhcHBlbmRUbyhTZWxlY3Qgc2VsLCBFeHBDb250\nZXh0IGN0eCwgRXhwU3RhdGUgc3RhdGUsIAogICAgICAgIFNRTEJ1ZmZlciBz\ncWwsIGludCBpbmRleCkgewogICAgICAgIHNxbC5hcHBlbmQoZ2V0T3BlcmF0\nb3IoKSk7CiAgICAgICAgc3FsLmFwcGVuZChfbm9QYXJlbiA/ICIgIiA6ICIo\nIik7CiAgICAgICAgX3ZhbC5hcHBlbmRUbyhzZWwsIGN0eCwgc3RhdGUsIHNx\nbCwgMCk7CiAgICAgICAgc3FsLmFkZENhc3RGb3JQYXJhbShnZXRPcGVyYXRv\ncigpLCBfdmFsKTsKICAgICAgICBpZiAoIV9ub1BhcmVuKQogICAgICAgICAg\nICBzcWwuYXBwZW5kKCIpIik7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1\ncm4gdGhlIHR5cGUgb2YgdGhpcyB2YWx1ZSBiYXNlZCBvbiB0aGUgYXJndW1l\nbnQgdHlwZS4gUmV0dXJucwogICAgICogdGhlIGFyZ3VtZW50IHR5cGUgYnkg\nZGVmYXVsdC4KICAgICAqLwogICAgcHJvdGVjdGVkIENsYXNzIGdldFR5cGUo\nQ2xhc3MgYykgewogICAgICAgIHJldHVybiBjOwogICAgfQoKICAgIC8qKgog\nICAgICogUmV0dXJuIHRoZSBuYW1lIG9mIHRoaXMgb3BlcmF0b3IuCiAgICAg\nKi8KICAgIHByb3RlY3RlZCBhYnN0cmFjdCBTdHJpbmcgZ2V0T3BlcmF0b3Io\nKTsKCiAgICBwdWJsaWMgdm9pZCBhY2NlcHRWaXNpdChFeHByZXNzaW9uVmlz\naXRvciB2aXNpdG9yKSB7CiAgICAgICAgdmlzaXRvci5lbnRlcih0aGlzKTsK\nICAgICAgICBfdmFsLmFjY2VwdFZpc2l0KHZpc2l0b3IpOwogICAgICAgIHZp\nc2l0b3IuZXhpdCh0aGlzKTsKICAgIH0KfQoK\n","encoding":"base64"}

