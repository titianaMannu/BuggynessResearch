{"sha":"03f86aedb46e446745d68157cb4d47ef377b0405","node_id":"MDQ6QmxvYjIwNjM2NDowM2Y4NmFlZGI0NmU0NDY3NDVkNjgxNTdjYjRkNDdlZjM3N2IwNDA1","size":4364,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/03f86aedb46e446745d68157cb4d47ef377b0405","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhOwoKaW1wb3J0\nIGphdmEuc3FsLlNRTEV4Y2VwdGlvbjsKCmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5rZXJuZWwuSkRCQ1N0b3JlOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmpkYmMuc2NoZW1hLkNvbHVtbjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLnNjaGVtYS5Gb3JlaWduS2V5OwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLkpvaW5zOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMuc3FsLlJlc3VsdDsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5rZXJuZWwuT3BlbkpQQVN0YXRlTWFuYWdlcjsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRpbC5Mb2NhbGl6ZXI7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5NZXRhRGF0YUV4Y2VwdGlvbjsK\nCi8qKgogKiBEZWxlZ2F0ZXMgdG8gYW5vdGhlciB7QGxpbmsgSm9pbmFibGV9\nIGFmdGVyIGRvaW5nIGNvbHVtbgogKiB0cmFuc2xhdGlvbi4gVXNlZnVsIGZv\nciBqb2lucyB0aGF0IGFyZSBub3QgbWFuYWdlZCBieSBhbnkgZmllbGRzIG9u\nCiAqIHRoZSBqb2luZWQtZnJvbSBzaWRlLiBGb3IgZXhhbXBsZSwgYSB2ZXJ0\naWNhbCBjbGFzcyBtYXBwaW5nIG1hbmFnZXMKICogZm9yZWlnbiBrZXkgY29s\ndW1ucyBsaW5raW5nIHRvIHRoZSBzdXBlcmNsYXNzIHRhYmxlLiBJdCBuZWVk\ncyB0byB1c2UKICogdGhlIGpvaW5hYmxlcyBvZiB0aGUgc3VwZXJjbGFzcyB0\nbyBhY3R1YWxseSBleHRyYWN0IHRoZSBjb2x1bW4gdmFsdWVzCiAqIGZyb20g\nZmllbGQgdmFsdWVzIGFuZCBzbyBmb3J0aCwgYnV0IGluIG9yZGVyIGZvciBv\ndGhlciBtYXBwaW5ncyB0byBqb2luCiAqIHRvIGl0cyBmb3JlaWduIGtleSBj\nb2x1bW5zIGl0IG5lZWRzIGpvaW5hYmxlcyBvZiBpdHMgb3duLiBTbyBpdCBj\ncmVhdGVzCiAqIGRlbGVnYXRpbmcgam9pbmFibGVzLgogKgogKiBAYXV0aG9y\nIEFiZSBXaGl0ZQogKi8KQFN1cHByZXNzV2FybmluZ3MoInNlcmlhbCIpCnB1\nYmxpYyBjbGFzcyBEZWxlZ2F0aW5nSm9pbmFibGUKICAgIGltcGxlbWVudHMg\nSm9pbmFibGUgewoKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvY2FsaXpl\nciBfbG9jID0gTG9jYWxpemVyLmZvclBhY2thZ2UKICAgICAgICAoRGVsZWdh\ndGluZ0pvaW5hYmxlLmNsYXNzKTsKCiAgICBwcml2YXRlIGZpbmFsIEpvaW5h\nYmxlIF9qb2luOwogICAgcHJpdmF0ZSBmaW5hbCBGb3JlaWduS2V5IF9mazsK\nICAgIHByaXZhdGUgZmluYWwgQ29sdW1uW10gX2NvbHM7CgogICAgLyoqCiAg\nICAgKiBDb25zdHJ1Y3Rvci4KICAgICAqCiAgICAgKiBAcGFyYW0gam9pbiB0\naGUgbWFwcGluZyB0byBkZWxlZ2F0ZSB0bwogICAgICogQHBhcmFtIGZrIHRo\nZSBmb3JlaWduIGtleSB0byB1c2UgdG8gdHJhbnNsYXRlIGFueSBnaXZlbiBj\nb2x1bW5zCiAgICAgKiB0byB0aGUgZ2l2ZW4gZGVsZWdhdGUncyBjb2x1bW5z\nCiAgICAgKi8KICAgIHB1YmxpYyBEZWxlZ2F0aW5nSm9pbmFibGUoSm9pbmFi\nbGUgam9pbiwgRm9yZWlnbktleSBmaykgewogICAgICAgIF9qb2luID0gam9p\nbjsKICAgICAgICBfZmsgPSBmazsKCiAgICAgICAgQ29sdW1uW10gcGtzID0g\nam9pbi5nZXRDb2x1bW5zKCk7CiAgICAgICAgX2NvbHMgPSBuZXcgQ29sdW1u\nW3Brcy5sZW5ndGhdOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcGtz\nLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIF9jb2xzW2ldID0gZmsuZ2V0\nQ29sdW1uKHBrc1tpXSk7CiAgICAgICAgICAgIGlmIChfY29sc1tpXSA9PSBu\ndWxsKQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1ldGFEYXRhRXhjZXB0\naW9uKF9sb2MuZ2V0KCJpbmNvbXBsZXRlLWpvaW4iLAogICAgICAgICAgICAg\nICAgICAgIHBrc1tpXS5nZXRGdWxsREJJZGVudGlmaWVyKCkpKTsKICAgICAg\nICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3Rvci4KICAgICAq\nCiAgICAgKiBAcGFyYW0gam9pbiB0aGUgbWFwcGluZyB0byBkZWxlZ2F0ZSB0\nbwogICAgICogQHBhcmFtIGNvbHMgdHJhbnNsYXRlZCBjb2x1bW5zCiAgICAg\nKi8KICAgIHB1YmxpYyBEZWxlZ2F0aW5nSm9pbmFibGUoSm9pbmFibGUgam9p\nbiwgQ29sdW1uW10gY29scykgewogICAgICAgIF9qb2luID0gam9pbjsKICAg\nICAgICBfZmsgPSBudWxsOwogICAgICAgIF9jb2xzID0gY29sczsKICAgICAg\nICBpZiAoY29scy5sZW5ndGggIT0gam9pbi5nZXRDb2x1bW5zKCkubGVuZ3Ro\nKQogICAgICAgICAgICB0aHJvdyBuZXcgTWV0YURhdGFFeGNlcHRpb24oX2xv\nYy5nZXQoImJhZC1yZW1hcCIsCiAgICAgICAgICAgICAgICBqb2luLmdldENv\nbHVtbnMoKVswXS5nZXRGdWxsREJJZGVudGlmaWVyKCkpKTsKICAgIH0KCiAg\nICBwdWJsaWMgaW50IGdldEZpZWxkSW5kZXgoKSB7CiAgICAgICAgcmV0dXJu\nIF9qb2luLmdldEZpZWxkSW5kZXgoKTsKICAgIH0KCiAgICBwdWJsaWMgT2Jq\nZWN0IGdldFByaW1hcnlLZXlWYWx1ZShSZXN1bHQgcmVzLCBDb2x1bW5bXSBj\nb2xzLCBGb3JlaWduS2V5IGZrLCAKICAgICAgICBKREJDU3RvcmUgc3RvcmUs\nIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewog\nICAgICAgIHJldHVybiBfam9pbi5nZXRQcmltYXJ5S2V5VmFsdWUocmVzLCBj\nb2xzLCBmaywgc3RvcmUsIGpvaW5zKTsKICAgIH0KCiAgICBwdWJsaWMgQ29s\ndW1uW10gZ2V0Q29sdW1ucygpIHsKICAgICAgICByZXR1cm4gX2NvbHM7CiAg\nICB9CgogICAgcHVibGljIE9iamVjdCBnZXRKb2luVmFsdWUoT2JqZWN0IHZh\nbCwgQ29sdW1uIGNvbCwgSkRCQ1N0b3JlIHN0b3JlKSB7CiAgICAgICAgcmV0\ndXJuIF9qb2luLmdldEpvaW5WYWx1ZSh2YWwsIHRyYW5zbGF0ZShjb2wpLCBz\ndG9yZSk7CiAgICB9CgogICAgcHVibGljIE9iamVjdCBnZXRKb2luVmFsdWUo\nT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgQ29sdW1uIGNvbCwKICAgICAgICBK\nREJDU3RvcmUgc3RvcmUpIHsKICAgICAgICByZXR1cm4gX2pvaW4uZ2V0Sm9p\nblZhbHVlKHNtLCB0cmFuc2xhdGUoY29sKSwgc3RvcmUpOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHNldEF1dG9Bc3NpZ25lZFZhbHVlKE9wZW5KUEFTdGF0\nZU1hbmFnZXIgc20sIEpEQkNTdG9yZSBzdG9yZSwKICAgICAgICBDb2x1bW4g\nY29sLCBPYmplY3QgYXV0b2dlbikgewogICAgICAgIF9qb2luLnNldEF1dG9B\nc3NpZ25lZFZhbHVlKHNtLCBzdG9yZSwgdHJhbnNsYXRlKGNvbCksIGF1dG9n\nZW4pOwogICAgfQoKICAgIHByaXZhdGUgQ29sdW1uIHRyYW5zbGF0ZShDb2x1\nbW4gY29sKSB7CiAgICAgICAgaWYgKF9mayAhPSBudWxsKQogICAgICAgICAg\nICByZXR1cm4gX2ZrLmdldFByaW1hcnlLZXlDb2x1bW4oY29sKTsKCiAgICAg\nICAgQ29sdW1uW10gY29scyA9IF9qb2luLmdldENvbHVtbnMoKTsKICAgICAg\nICBmb3IgKGludCBpID0gMDsgaSA8IGNvbHMubGVuZ3RoOyBpKyspCiAgICAg\nICAgICAgIGlmIChjb2wgPT0gY29sc1tpXSkKICAgICAgICAgICAgICAgIHJl\ndHVybiBfY29sc1tpXTsKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KfQo=\n","encoding":"base64"}

