{"sha":"e2776658c7d9aead29fe91e5c5f0b59104390fa0","node_id":"MDQ6QmxvYjIwNjM2NDplMjc3NjY1OGM3ZDlhZWFkMjlmZTkxZTVjNWYwYjU5MTA0MzkwZmEw","size":12607,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/e2776658c7d9aead29fe91e5c5f0b59104390fa0","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhOwoKaW1wb3J0\nIGphdmEuc3FsLlNRTEV4Y2VwdGlvbjsKCmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5rZXJuZWwuSkRCQ1N0b3JlOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmpkYmMuc2NoZW1hLkNvbHVtbjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLnNjaGVtYS5Db2x1bW5JTzsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5JbmRleDsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5TY2hlbWFzOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLkpvaW5zOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMuc3FsLlJlc3VsdDsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLnNxbC5Sb3dNYW5hZ2VyOwppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNRTEJ1ZmZlcjsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5qZGJjLnNxbC5TZWxlY3Q7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEua2VybmVsLk9wZW5KUEFTdGF0ZU1hbmFnZXI7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmxvZy5Mb2c7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9jYWxpemVyOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLm1ldGEuTWV0YURhdGFDb250ZXh0OwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuTWV0YURhdGFNb2RlczsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLk1ldGFEYXRhUmVwb3NpdG9yeTsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGlsLkludGVybmFsRXhjZXB0\naW9uOwoKLyoqCiAqIEhhbmRsZXMgZGV0ZXJtaW5pbmcgdGhlIG9iamVjdCBj\nbGFzcyBvZiBkYXRhYmFzZSByZWNvcmRzLgogKgogKiBAYXV0aG9yIEFiZSBX\naGl0ZQogKi8KQFN1cHByZXNzV2FybmluZ3MoInNlcmlhbCIpCnB1YmxpYyBj\nbGFzcyBEaXNjcmltaW5hdG9yCiAgICBpbXBsZW1lbnRzIERpc2NyaW1pbmF0\nb3JTdHJhdGVneSwgTWV0YURhdGFDb250ZXh0LCBNZXRhRGF0YU1vZGVzIHsK\nCiAgICAvKioKICAgICAqIE51bGwgZGlzY3JpbWluYXRvciB2YWx1ZSBtYXJr\nZXIuCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgT2JqZWN0IE5V\nTEwgPSBuZXcgT2JqZWN0KCk7CgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwg\nTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6ZXIuZm9yUGFja2FnZQogICAgICAg\nIChEaXNjcmltaW5hdG9yLmNsYXNzKTsKCiAgICBwcml2YXRlIGZpbmFsIENs\nYXNzTWFwcGluZyBfbWFwcGluZzsKICAgIHByaXZhdGUgZmluYWwgRGlzY3Jp\nbWluYXRvck1hcHBpbmdJbmZvIF9pbmZvOwogICAgcHJpdmF0ZSBEaXNjcmlt\naW5hdG9yU3RyYXRlZ3kgX3N0cmF0ZWd5ID0gbnVsbDsKICAgIHByaXZhdGUg\naW50IF9yZXNNb2RlID0gTU9ERV9OT05FOwoKICAgIHByaXZhdGUgQ29sdW1u\nW10gX2NvbHMgPSBTY2hlbWFzLkVNUFRZX0NPTFVNTlM7CiAgICBwcml2YXRl\nIENvbHVtbklPIF9pbyA9IG51bGw7CiAgICBwcml2YXRlIEluZGV4IF9pZHgg\nPSBudWxsOwogICAgcHJpdmF0ZSBib29sZWFuIF9zdWJzTG9hZGVkID0gZmFs\nc2U7CiAgICBwcml2YXRlIE9iamVjdCBfdmFsdWUgPSBudWxsOwogICAgCiAg\nICBwcml2YXRlIGludCBfamF2YVR5cGUgPSAtMTsgCgogICAgLyoqCiAgICAg\nKiBDb25zdHJ1Y3Rvci4gU3VwcGx5IG93bmluZyBtYXBwaW5nLgogICAgICov\nCiAgICBwdWJsaWMgRGlzY3JpbWluYXRvcihDbGFzc01hcHBpbmcgbWFwcGlu\nZykgewogICAgICAgIF9tYXBwaW5nID0gbWFwcGluZzsKICAgICAgICBfaW5m\nbyA9IGdldE1hcHBpbmdSZXBvc2l0b3J5KCkubmV3TWFwcGluZ0luZm8odGhp\ncyk7CiAgICB9CgogICAgcHVibGljIE1ldGFEYXRhUmVwb3NpdG9yeSBnZXRS\nZXBvc2l0b3J5KCkgewogICAgICAgIHJldHVybiBfbWFwcGluZy5nZXRSZXBv\nc2l0b3J5KCk7CiAgICB9CgogICAgcHVibGljIE1hcHBpbmdSZXBvc2l0b3J5\nIGdldE1hcHBpbmdSZXBvc2l0b3J5KCkgewogICAgICAgIHJldHVybiBfbWFw\ncGluZy5nZXRNYXBwaW5nUmVwb3NpdG9yeSgpOwogICAgfQoKICAgIC8qKgog\nICAgICogUmV0dXJuIHRoZSBvd25pbmcgbWFwcGluZy4KICAgICAqLwogICAg\ncHVibGljIENsYXNzTWFwcGluZyBnZXRDbGFzc01hcHBpbmcoKSB7CiAgICAg\nICAgcmV0dXJuIF9tYXBwaW5nOwogICAgfQoKICAgIC8qKgogICAgICogVGhl\nIHN0cmF0ZWd5IHVzZWQgZm9yIGNsYXNzIGRpc2NyaW1pbmF0aW9uLgogICAg\nICovCiAgICBwdWJsaWMgRGlzY3JpbWluYXRvclN0cmF0ZWd5IGdldFN0cmF0\nZWd5KCkgewogICAgICAgIHJldHVybiBfc3RyYXRlZ3k7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBUaGUgc3RyYXRlZ3kgdXNlZCBmb3IgY2xhc3MgZGlzY3Jp\nbWluYXRpb24uIFRoZSA8Y29kZT5hZGFwdDwvY29kZT4KICAgICAqIHBhcmFt\nZXRlciBkZXRlcm1pbmVzIHdoZXRoZXIgdG8gYWRhcHQgd2hlbiBtYXBwaW5n\nIHRoZSBzdHJhdGVneTsKICAgICAqIHVzZSBudWxsIGlmIHRoZSBzdHJhdGVn\neSBzaG91bGQgbm90IGJlIG1hcHBlZC4KICAgICAqLwogICAgcHVibGljIHZv\naWQgc2V0U3RyYXRlZ3koRGlzY3JpbWluYXRvclN0cmF0ZWd5IHN0cmF0ZWd5\nLCBCb29sZWFuIGFkYXB0KSB7CiAgICAgICAgLy8gc2V0IHN0cmF0ZWd5IGZp\ncnN0IHNvIHdlIGNhbiBhY2Nlc3MgaXQgZHVyaW5nIG1hcHBpbmcKICAgICAg\nICBEaXNjcmltaW5hdG9yU3RyYXRlZ3kgb3JpZyA9IF9zdHJhdGVneTsKICAg\nICAgICBfc3RyYXRlZ3kgPSBzdHJhdGVneTsKICAgICAgICBpZiAoc3RyYXRl\nZ3kgIT0gbnVsbCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAg\nICAgc3RyYXRlZ3kuc2V0RGlzY3JpbWluYXRvcih0aGlzKTsKICAgICAgICAg\nICAgICAgIGlmIChhZGFwdCAhPSBudWxsKQogICAgICAgICAgICAgICAgICAg\nIHN0cmF0ZWd5Lm1hcChhZGFwdC5ib29sZWFuVmFsdWUoKSk7CiAgICAgICAg\nICAgIH0gY2F0Y2ggKFJ1bnRpbWVFeGNlcHRpb24gcmUpIHsKICAgICAgICAg\nICAgICAgIC8vIHJlc2V0IHN0cmF0ZWd5CiAgICAgICAgICAgICAgICBfc3Ry\nYXRlZ3kgPSBvcmlnOwogICAgICAgICAgICAgICAgdGhyb3cgcmU7CiAgICAg\nICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUg\nZGlzY3JpbWluYXRvciB2YWx1ZS4KICAgICAqLwogICAgcHVibGljIE9iamVj\ndCBnZXRWYWx1ZSgpIHsKICAgICAgICByZXR1cm4gX3ZhbHVlOwogICAgfQoK\nICAgIC8qKgogICAgICogVGhlIGRpc2NyaW1pbmF0b3IgdmFsdWUuCiAgICAg\nKi8KICAgIHB1YmxpYyB2b2lkIHNldFZhbHVlKE9iamVjdCB2YWx1ZSkgewog\nICAgICAgIF92YWx1ZSA9IHZhbHVlOwogICAgfQoKICAgIC8qKgogICAgICog\nUmF3IG1hcHBpbmcgZGF0YS4KICAgICAqLwogICAgcHVibGljIERpc2NyaW1p\nbmF0b3JNYXBwaW5nSW5mbyBnZXRNYXBwaW5nSW5mbygpIHsKICAgICAgICBy\nZXR1cm4gX2luZm87CiAgICB9CgogICAgLyoqCiAgICAgKiBDb2x1bW5zIHVz\nZWQgYnkgdGhpcyBEaXNjcmltaW5hdG9yLgogICAgICovCiAgICBwdWJsaWMg\nQ29sdW1uW10gZ2V0Q29sdW1ucygpIHsKICAgICAgICByZXR1cm4gX2NvbHM7\nCiAgICB9CgogICAgLyoqCiAgICAgKiBDb2x1bW5zIHVzZWQgYnkgdGhpcyBE\naXNjcmltaW5hdG9yLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRDb2x1\nbW5zKENvbHVtbltdIGNvbHMpIHsKICAgICAgICBpZiAoY29scyA9PSBudWxs\nKQogICAgICAgICAgICBjb2xzID0gU2NoZW1hcy5FTVBUWV9DT0xVTU5TOwog\nICAgICAgIF9jb2xzID0gY29sczsKICAgIH0KCiAgICAvKioKICAgICAqIEkv\nTyBpbmZvcm1hdGlvbiBvbiB0aGUgZGlzY3JpbWluYXRvciBjb2x1bW5zLgog\nICAgICovCiAgICBwdWJsaWMgQ29sdW1uSU8gZ2V0Q29sdW1uSU8oKSB7CiAg\nICAgICAgcmV0dXJuIChfaW8gPT0gbnVsbCkgPyBDb2x1bW5JTy5VTlJFU1RS\nSUNURUQgOiBfaW87CiAgICB9CgogICAgLyoqCiAgICAgKiBJL08gaW5mb3Jt\nYXRpb24gb24gdGhlIGRpc2NyaW1pbmF0b3IgY29sdW1ucy4KICAgICAqLwog\nICAgcHVibGljIHZvaWQgc2V0Q29sdW1uSU8oQ29sdW1uSU8gaW8pIHsKICAg\nICAgICBfaW8gPSBpbzsKICAgIH0KCiAgICAvKioKICAgICAqIEluZGV4IG9u\nIHRoZSBEaXNjcmltaW5hdG9yIGNvbHVtbnMsIG9yIG51bGwgaWYgbm9uZS4K\nICAgICAqLwogICAgcHVibGljIEluZGV4IGdldEluZGV4KCkgewogICAgICAg\nIHJldHVybiBfaWR4OwogICAgfQoKICAgIC8qKgogICAgICogSW5kZXggb24g\ndGhlIERpc2NyaW1pbmF0b3IgY29sdW1ucywgb3IgbnVsbCBpZiBub25lLgog\nICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRJbmRleChJbmRleCBpZHgpIHsK\nICAgICAgICBfaWR4ID0gaWR4OwogICAgfQoKICAgIC8qKgogICAgICogSW5j\ncmVtZW50IHRoZSByZWZlcmVuY2UgY291bnQgb2YgdXNlZCBzY2hlbWEgY29t\ncG9uZW50cy4KICAgICAqLwogICAgcHVibGljIHZvaWQgcmVmU2NoZW1hQ29t\ncG9uZW50cygpIHsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IF9jb2xz\nLmxlbmd0aDsgaSsrKQogICAgICAgICAgICBfY29sc1tpXS5yZWYoKTsKICAg\nIH0KCiAgICAvKioKICAgICAqIENsZWFyIG1hcHBpbmcgaW5mb3JtYXRpb24s\nIGluY2x1ZGluZyBzdHJhdGVneS4KICAgICAqLwogICAgcHVibGljIHZvaWQg\nY2xlYXJNYXBwaW5nKCkgewogICAgICAgIF9zdHJhdGVneSA9IG51bGw7CiAg\nICAgICAgX2NvbHMgPSBTY2hlbWFzLkVNUFRZX0NPTFVNTlM7CiAgICAgICAg\nX2lkeCA9IG51bGw7CiAgICAgICAgX3ZhbHVlID0gbnVsbDsKICAgICAgICBf\naW5mby5jbGVhcigpOwogICAgICAgIHNldFJlc29sdmUoTU9ERV9NQVBQSU5H\nIHwgTU9ERV9NQVBQSU5HX0lOSVQsIGZhbHNlKTsKICAgIH0KCiAgICAvKioK\nICAgICAqIFVwZGF0ZSB7QGxpbmsgTWFwcGluZ0luZm99IHdpdGggb3VyIGN1\ncnJlbnQgbWFwcGluZyBpbmZvcm1hdGlvbi4KICAgICAqLwogICAgcHVibGlj\nIHZvaWQgc3luY01hcHBpbmdJbmZvKCkgewogICAgICAgIF9pbmZvLnN5bmNX\naXRoKHRoaXMpOwogICAgfQoKICAgIC8qKgogICAgICogUmVzb2x2ZSBtb2Rl\nLgogICAgICovCiAgICBwdWJsaWMgaW50IGdldFJlc29sdmUoKSB7CiAgICAg\nICAgcmV0dXJuIF9yZXNNb2RlOwogICAgfQoKICAgIC8qKgogICAgICogUmVz\nb2x2ZSBtb2RlLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRSZXNvbHZl\nKGludCBtb2RlKSB7CiAgICAgICAgX3Jlc01vZGUgPSBtb2RlOwogICAgfQoK\nICAgIC8qKgogICAgICogUmVzb2x2ZSBtb2RlLgogICAgICovCiAgICBwdWJs\naWMgdm9pZCBzZXRSZXNvbHZlKGludCBtb2RlLCBib29sZWFuIG9uKSB7CiAg\nICAgICAgaWYgKG1vZGUgPT0gTU9ERV9OT05FKQogICAgICAgICAgICBfcmVz\nTW9kZSA9IG1vZGU7CiAgICAgICAgZWxzZSBpZiAob24pCiAgICAgICAgICAg\nIF9yZXNNb2RlIHw9IG1vZGU7CiAgICAgICAgZWxzZQogICAgICAgICAgICBf\ncmVzTW9kZSAmPSB+bW9kZTsKICAgIH0KCiAgICAvKioKICAgICAqIFJlc29s\ndmUgbWFwcGluZyBpbmZvcm1hdGlvbi4KICAgICAqLwogICAgcHVibGljIGJv\nb2xlYW4gcmVzb2x2ZShpbnQgbW9kZSkgewogICAgICAgIGlmICgoX3Jlc01v\nZGUgJiBtb2RlKSA9PSBtb2RlKQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsK\nICAgICAgICBpbnQgY3VyID0gX3Jlc01vZGU7CiAgICAgICAgX3Jlc01vZGUg\nfD0gbW9kZTsKICAgICAgICBpZiAoKG1vZGUgJiBNT0RFX01BUFBJTkcpICE9\nIDAgJiYgKGN1ciAmIE1PREVfTUFQUElORykgPT0gMCkKICAgICAgICAgICAg\ncmVzb2x2ZU1hcHBpbmcoKTsKICAgICAgICBpZiAoKG1vZGUgJiBNT0RFX01B\nUFBJTkdfSU5JVCkgIT0gMCAmJiAoY3VyICYgTU9ERV9NQVBQSU5HX0lOSVQp\nID09IDApCiAgICAgICAgICAgIF9zdHJhdGVneS5pbml0aWFsaXplKCk7CiAg\nICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8qKgogICAgICogU2V0\ndXAgbWFwcGluZy4KICAgICAqLwogICAgcHJpdmF0ZSB2b2lkIHJlc29sdmVN\nYXBwaW5nKCkgewogICAgICAgIC8vIG1hcCBzdHJhdGVneQogICAgICAgIE1h\ncHBpbmdSZXBvc2l0b3J5IHJlcG9zID0gZ2V0TWFwcGluZ1JlcG9zaXRvcnko\nKTsKICAgICAgICBpZiAoX3N0cmF0ZWd5ID09IG51bGwpCiAgICAgICAgICAg\nIHJlcG9zLmdldFN0cmF0ZWd5SW5zdGFsbGVyKCkuaW5zdGFsbFN0cmF0ZWd5\nKHRoaXMpOwogICAgICAgIExvZyBsb2cgPSByZXBvcy5nZXRMb2coKTsKICAg\nICAgICBpZiAobG9nLmlzVHJhY2VFbmFibGVkKCkpCiAgICAgICAgICAgIGxv\nZy50cmFjZShfbG9jLmdldCgic3RyYXRlZ3kiLCB0aGlzLCBfc3RyYXRlZ3ku\nZ2V0QWxpYXMoKSkpOwoKICAgICAgICAvLyBtYXJrIGNvbHVtbnMgYXMgbWFw\ncGVkCiAgICAgICAgQ29sdW1uW10gY29scyA9IGdldENvbHVtbnMoKTsKICAg\nICAgICBDb2x1bW5JTyBpbyA9IGdldENvbHVtbklPKCk7CiAgICAgICAgZm9y\nIChpbnQgaSA9IDA7IGkgPCBjb2xzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAg\nICAgIGlmIChpby5pc0luc2VydGFibGUoaSwgZmFsc2UpKQogICAgICAgICAg\nICAgICAgY29sc1tpXS5zZXRGbGFnKENvbHVtbi5GTEFHX0RJUkVDVF9JTlNF\nUlQsIHRydWUpOwogICAgICAgICAgICBpZiAoaW8uaXNVcGRhdGFibGUoaSwg\nZmFsc2UpKQogICAgICAgICAgICAgICAgY29sc1tpXS5zZXRGbGFnKENvbHVt\nbi5GTEFHX0RJUkVDVF9VUERBVEUsIHRydWUpOwogICAgICAgIH0KICAgIH0K\nCiAgICAvKioKICAgICAqIFdoZXRoZXIgdGhpcyBEaXNjcmltaW5hdG9yIGhh\ncyBsb2FkZWQgc3ViY2xhc3NlcyB5ZXQuCiAgICAgKi8KICAgIHB1YmxpYyBi\nb29sZWFuIGdldFN1YmNsYXNzZXNMb2FkZWQoKSB7CiAgICAgICAgaWYgKCFf\nc3Vic0xvYWRlZCkgewogICAgICAgICAgICBDbGFzc01hcHBpbmcgc3VwID0g\nX21hcHBpbmcuZ2V0UENTdXBlcmNsYXNzTWFwcGluZygpOwogICAgICAgICAg\nICBpZiAoc3VwICE9IG51bGwgJiYgc3VwLmdldERpc2NyaW1pbmF0b3IoKS5n\nZXRTdWJjbGFzc2VzTG9hZGVkKCkpCiAgICAgICAgICAgICAgICBfc3Vic0xv\nYWRlZCA9IHRydWU7CiAgICAgICAgfQogICAgICAgIHJldHVybiBfc3Vic0xv\nYWRlZDsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdGhpcyBEaXNj\ncmltaW5hdG9yIGhhcyBsb2FkZWQgc3ViY2xhc3NlcyB5ZXQuCiAgICAgKi8K\nICAgIHB1YmxpYyB2b2lkIHNldFN1YmNsYXNzZXNMb2FkZWQoYm9vbGVhbiBs\nb2FkZWQpIHsKICAgICAgICBfc3Vic0xvYWRlZCA9IGxvYWRlZDsKICAgIH0K\nCiAgICAvKioKICAgICAqIEFkZCBXSEVSRSBjb25kaXRpb25zIHRvIHRoZSBn\naXZlbiBzZWxlY3QgbGltaXRpbmcgdGhlIHJldHVybmVkIHJlc3VsdHMKICAg\nICAqIHRvIG91ciBtYXBwaW5nIHR5cGUsIHBvc3NpYmx5IGluY2x1ZGluZyBz\ndWJjbGFzc2VzLgogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBhZGRDbGFz\nc0NvbmRpdGlvbnMoU2VsZWN0IHNlbCwgYm9vbGVhbiBzdWJzLCBKb2lucyBq\nb2lucykgewogICAgICAgIGlmIChfbWFwcGluZy5nZXRKb2luYWJsZVBDU3Vw\nZXJjbGFzc01hcHBpbmcoKSA9PSBudWxsCiAgICAgICAgICAgICYmIF9tYXBw\naW5nLmdldEpvaW5hYmxlUENTdWJjbGFzc01hcHBpbmdzKCkubGVuZ3RoID09\nIDApCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICBpZiAoIWhh\nc0NsYXNzQ29uZGl0aW9ucyhfbWFwcGluZywgc3VicykpCiAgICAgICAgICAg\nIHJldHVybiBmYWxzZTsKCiAgICAgICAgLy8gam9pbiBkb3duIHRvIGJhc2Ug\nY2xhc3Mgd2hlcmUgY29uZGl0aW9ucyB3aWxsIGJlIGFkZGVkCiAgICAgICAg\nQ2xhc3NNYXBwaW5nIGZyb20gPSBfbWFwcGluZzsKICAgICAgICBDbGFzc01h\ncHBpbmcgc3VwID0gX21hcHBpbmcuZ2V0Sm9pbmFibGVQQ1N1cGVyY2xhc3NN\nYXBwaW5nKCk7CiAgICAgICAgZm9yICg7IHN1cCAhPSBudWxsOyBmcm9tID0g\nc3VwLCBzdXAgPSBmcm9tCiAgICAgICAgICAgIC5nZXRKb2luYWJsZVBDU3Vw\nZXJjbGFzc01hcHBpbmcoKSkgewogICAgICAgICAgICBpZiAoZnJvbS5nZXRU\nYWJsZSgpICE9IHN1cC5nZXRUYWJsZSgpKSB7CiAgICAgICAgICAgICAgICBp\nZiAoam9pbnMgPT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICBqb2lucyA9\nIHNlbC5uZXdKb2lucygpOwogICAgICAgICAgICAgICAgam9pbnMgPSBmcm9t\nLmpvaW5TdXBlcmNsYXNzKGpvaW5zLCBmYWxzZSk7CiAgICAgICAgICAgIH0K\nICAgICAgICB9CgogICAgICAgIHNlbC53aGVyZShnZXRDbGFzc0NvbmRpdGlv\nbnMoc2VsLCBqb2lucywgX21hcHBpbmcsIHN1YnMpLCBqb2lucyk7CiAgICAg\nICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgLy8gRGlzY3JpbWluYXRvclN0\ncmF0ZWd5IGltcGxlbWVudGF0aW9uCiAgICAvLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgogICAgcHVibGljIFN0cmluZyBnZXRB\nbGlhcygpIHsKICAgICAgICByZXR1cm4gYXNzZXJ0U3RyYXRlZ3koKS5nZXRB\nbGlhcygpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIG1hcChib29sZWFuIGFk\nYXB0KSB7CiAgICAgICAgYXNzZXJ0U3RyYXRlZ3koKS5tYXAoYWRhcHQpOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIGluaXRpYWxpemUoKSB7CiAgICAgICAg\nYXNzZXJ0U3RyYXRlZ3koKS5pbml0aWFsaXplKCk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgaW5zZXJ0KE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIEpEQkNT\ndG9yZSBzdG9yZSwgUm93TWFuYWdlciBybSkKICAgICAgICB0aHJvd3MgU1FM\nRXhjZXB0aW9uIHsKICAgICAgICBhc3NlcnRTdHJhdGVneSgpLmluc2VydChz\nbSwgc3RvcmUsIHJtKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB1cGRhdGUo\nT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgSkRCQ1N0b3JlIHN0b3JlLCBSb3dN\nYW5hZ2VyIHJtKQogICAgICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAg\nICAgIGFzc2VydFN0cmF0ZWd5KCkudXBkYXRlKHNtLCBzdG9yZSwgcm0pOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIGRlbGV0ZShPcGVuSlBBU3RhdGVNYW5h\nZ2VyIHNtLCBKREJDU3RvcmUgc3RvcmUsIFJvd01hbmFnZXIgcm0pCiAgICAg\nICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgYXNzZXJ0U3RyYXRl\nZ3koKS5kZWxldGUoc20sIHN0b3JlLCBybSk7CiAgICB9CgogICAgcHVibGlj\nIEJvb2xlYW4gaXNDdXN0b21JbnNlcnQoT3BlbkpQQVN0YXRlTWFuYWdlciBz\nbSwgSkRCQ1N0b3JlIHN0b3JlKSB7CiAgICAgICAgcmV0dXJuIGFzc2VydFN0\ncmF0ZWd5KCkuaXNDdXN0b21JbnNlcnQoc20sIHN0b3JlKTsKICAgIH0KCiAg\nICBwdWJsaWMgQm9vbGVhbiBpc0N1c3RvbVVwZGF0ZShPcGVuSlBBU3RhdGVN\nYW5hZ2VyIHNtLCBKREJDU3RvcmUgc3RvcmUpIHsKICAgICAgICByZXR1cm4g\nYXNzZXJ0U3RyYXRlZ3koKS5pc0N1c3RvbVVwZGF0ZShzbSwgc3RvcmUpOwog\nICAgfQoKICAgIHB1YmxpYyBCb29sZWFuIGlzQ3VzdG9tRGVsZXRlKE9wZW5K\nUEFTdGF0ZU1hbmFnZXIgc20sIEpEQkNTdG9yZSBzdG9yZSkgewogICAgICAg\nIHJldHVybiBhc3NlcnRTdHJhdGVneSgpLmlzQ3VzdG9tRGVsZXRlKHNtLCBz\ndG9yZSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgY3VzdG9tSW5zZXJ0KE9w\nZW5KUEFTdGF0ZU1hbmFnZXIgc20sIEpEQkNTdG9yZSBzdG9yZSkKICAgICAg\nICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBhc3NlcnRTdHJhdGVn\neSgpLmN1c3RvbUluc2VydChzbSwgc3RvcmUpOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIGN1c3RvbVVwZGF0ZShPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBK\nREJDU3RvcmUgc3RvcmUpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7\nCiAgICAgICAgYXNzZXJ0U3RyYXRlZ3koKS5jdXN0b21VcGRhdGUoc20sIHN0\nb3JlKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjdXN0b21EZWxldGUoT3Bl\nbkpQQVN0YXRlTWFuYWdlciBzbSwgSkRCQ1N0b3JlIHN0b3JlKQogICAgICAg\nIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIGFzc2VydFN0cmF0ZWd5\nKCkuY3VzdG9tRGVsZXRlKHNtLCBzdG9yZSk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgc2V0RGlzY3JpbWluYXRvcihEaXNjcmltaW5hdG9yIG93bmVyKSB7\nCiAgICAgICAgYXNzZXJ0U3RyYXRlZ3koKS5zZXREaXNjcmltaW5hdG9yKG93\nbmVyKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBzZWxlY3QoU2VsZWN0\nIHNlbCwgQ2xhc3NNYXBwaW5nIG1hcHBpbmcpIHsKICAgICAgICByZXR1cm4g\nYXNzZXJ0U3RyYXRlZ3koKS5zZWxlY3Qoc2VsLCBtYXBwaW5nKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBsb2FkU3ViY2xhc3NlcyhKREJDU3RvcmUgc3Rv\ncmUpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiwgQ2xhc3NOb3RGb3Vu\nZEV4Y2VwdGlvbiB7CiAgICAgICAgYXNzZXJ0U3RyYXRlZ3koKS5sb2FkU3Vi\nY2xhc3NlcyhzdG9yZSk7CiAgICB9CgogICAgcHVibGljIENsYXNzPD8+IGdl\ndENsYXNzKEpEQkNTdG9yZSBzdG9yZSwgQ2xhc3NNYXBwaW5nIGJhc2UsIFJl\nc3VsdCByZXN1bHQpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiwgQ2xh\nc3NOb3RGb3VuZEV4Y2VwdGlvbiB7CiAgICAgICAgcmV0dXJuIGFzc2VydFN0\ncmF0ZWd5KCkuZ2V0Q2xhc3Moc3RvcmUsIGJhc2UsIHJlc3VsdCk7CiAgICB9\nCgogICAgcHVibGljIGJvb2xlYW4gaGFzQ2xhc3NDb25kaXRpb25zKENsYXNz\nTWFwcGluZyBiYXNlLCBib29sZWFuIHN1YnMpIHsKICAgICAgICByZXR1cm4g\nYXNzZXJ0U3RyYXRlZ3koKS5oYXNDbGFzc0NvbmRpdGlvbnMoYmFzZSwgc3Vi\ncyk7CiAgICB9CgogICAgcHVibGljIFNRTEJ1ZmZlciBnZXRDbGFzc0NvbmRp\ndGlvbnMoU2VsZWN0IHNlbCwgSm9pbnMgam9pbnMsIAogICAgICAgIENsYXNz\nTWFwcGluZyBiYXNlLCBib29sZWFuIHN1YnMpIHsKICAgICAgICByZXR1cm4g\nYXNzZXJ0U3RyYXRlZ3koKS5nZXRDbGFzc0NvbmRpdGlvbnMoc2VsLCBqb2lu\ncywgYmFzZSwgc3Vicyk7CiAgICB9CgogICAgcHJpdmF0ZSBEaXNjcmltaW5h\ndG9yU3RyYXRlZ3kgYXNzZXJ0U3RyYXRlZ3koKSB7CiAgICAgICAgaWYgKF9z\ndHJhdGVneSA9PSBudWxsKQogICAgICAgICAgICB0aHJvdyBuZXcgSW50ZXJu\nYWxFeGNlcHRpb24oKTsKICAgICAgICByZXR1cm4gX3N0cmF0ZWd5OwogICAg\nfQoKICAgIHB1YmxpYyBTdHJpbmcgdG9TdHJpbmcoKSB7CiAgICAgICAgcmV0\ndXJuIF9tYXBwaW5nICsgIjxkaXNjcmltaW5hdG9yPiI7CiAgICB9CiAgICAK\nICAgIHB1YmxpYyB2b2lkIHNldEphdmFUeXBlKGludCBqYXZhVHlwZSkgewog\nICAgICAgIF9qYXZhVHlwZSA9IGphdmFUeXBlOwogICAgfQogICAgCiAgICBw\ndWJsaWMgaW50IGdldEphdmFUeXBlKCkgewogICAgICAgIGlmIChfamF2YVR5\ncGUgPT0gLTEpIHsKICAgICAgICAgICAgQ2xhc3NNYXBwaW5nIHN1cGVyTWFw\ncGluZyA9IF9tYXBwaW5nLmdldFBDU3VwZXJjbGFzc01hcHBpbmcoKTsKCiAg\nICAgICAgICAgIGlmIChzdXBlck1hcHBpbmcgIT0gbnVsbCAmJiAKICAgICAg\nICAgICAgICAgIHN1cGVyTWFwcGluZy5nZXREaXNjcmltaW5hdG9yKCkgIT0g\nbnVsbCkgewogICAgICAgICAgICAgICAgX2phdmFUeXBlID0gc3VwZXJNYXBw\naW5nLmdldERpc2NyaW1pbmF0b3IoKS5nZXRKYXZhVHlwZSgpOwogICAgICAg\nICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gX2phdmFUeXBlOwog\nICAgfQp9Cg==\n","encoding":"base64"}

