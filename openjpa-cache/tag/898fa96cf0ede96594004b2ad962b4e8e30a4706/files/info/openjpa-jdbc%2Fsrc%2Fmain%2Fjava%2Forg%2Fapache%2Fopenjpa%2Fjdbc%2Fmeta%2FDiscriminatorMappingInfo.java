{"sha":"7466c3cdeadc5f830031f159e334f4a0ef63d137","node_id":"MDQ6QmxvYjIwNjM2NDo3NDY2YzNjZGVhZGM1ZjgzMDAzMWYxNTllMzM0ZjRhMGVmNjNkMTM3","size":5966,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/7466c3cdeadc5f830031f159e334f4a0ef63d137","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhOwoKaW1wb3J0\nIGphdmEubGFuZy5yZWZsZWN0Lk1vZGlmaWVyOwoKaW1wb3J0IG9yZy5hcGFj\naGUuY29tbW9ucy5sYW5nLlN0cmluZ1V0aWxzOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmpkYmMubWV0YS5zdHJhdHMuTm9uZURpc2NyaW1pbmF0b3JT\ndHJhdGVneTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1ldGEu\nc3RyYXRzLlN1cGVyY2xhc3NEaXNjcmltaW5hdG9yU3RyYXRlZ3k7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLnN0cmF0cy5WYWx1ZU1h\ncERpc2NyaW1pbmF0b3JTdHJhdGVneTsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLnNjaGVtYS5Db2x1bW47CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5zY2hlbWEuSW5kZXg7CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5zY2hlbWEuU2NoZW1hR3JvdXA7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuVGFibGU7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEubWV0YS5KYXZhVHlwZXM7CgovKioKICogSW5mb3JtYXRp\nb24gYWJvdXQgdGhlIG1hcHBpbmcgZnJvbSBhIGRpc2NyaW1pbmF0b3IgdG8g\ndGhlIHNjaGVtYSwgaW4KICogcmF3IGZvcm0uIFRoZSBjb2x1bW5zIGFuZCB0\nYWJsZXMgdXNlZCBpbiBtYXBwaW5nIGluZm8gd2lsbCBub3QgYmUgcGFydCBv\nZgogKiB0aGUge0BsaW5rIFNjaGVtYUdyb3VwfSB1c2VkIGF0IHJ1bnRpbWUu\nIFJhdGhlciwgdGhleSB3aWxsIGJlIHN0cnVjdHMKICogd2l0aCB0aGUgcmVs\nZXZhbnQgcGllY2VzIG9mIGluZm9ybWF0aW9uIGZpbGxlZCBpbi4KICoKICog\nQGF1dGhvciBBYmUgV2hpdGUKICovCkBTdXBwcmVzc1dhcm5pbmdzKCJzZXJp\nYWwiKQpwdWJsaWMgY2xhc3MgRGlzY3JpbWluYXRvck1hcHBpbmdJbmZvCiAg\nICBleHRlbmRzIE1hcHBpbmdJbmZvIHsKCiAgICBwcml2YXRlIFN0cmluZyBf\ndmFsdWUgPSBudWxsOwogICAgCiAgICAvKioKICAgICAqIFJhdyBkaXNjcmlt\naW5hdG9yIHZhbHVlIHN0cmluZy4KICAgICAqLwogICAgcHVibGljIFN0cmlu\nZyBnZXRWYWx1ZSgpIHsKICAgICAgICByZXR1cm4gX3ZhbHVlOwogICAgfQoK\nICAgIC8qKgogICAgICogUmF3IGRpc2NyaW1pbmF0b3IgdmFsdWUgc3RyaW5n\nLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRWYWx1ZShTdHJpbmcgdmFs\ndWUpIHsKICAgICAgICBfdmFsdWUgPSB2YWx1ZTsKICAgIH0KCiAgICAvKioK\nICAgICAqIFJldHVybiB0aGUgZGlzY3JpbWluYXRvciB2YWx1ZSBhcyBhbiBv\nYmplY3Qgb2YgdGhlIHJpZ2h0IHR5cGUuCiAgICAgKi8KICAgIHB1YmxpYyBP\nYmplY3QgZ2V0VmFsdWUoRGlzY3JpbWluYXRvciBkaXNjcmltLCBib29sZWFu\nIGFkYXB0KSB7CiAgICAgICAgaWYgKGRpc2NyaW0uZ2V0VmFsdWUoKSAhPSBu\ndWxsKQogICAgICAgICAgICByZXR1cm4gZGlzY3JpbS5nZXRWYWx1ZSgpOwog\nICAgICAgIGlmIChTdHJpbmdVdGlscy5pc0VtcHR5KF92YWx1ZSkpIHsKICAg\nICAgICAgICAgcmV0dXJuIGRpc2NyaW0uZ2V0TWFwcGluZ1JlcG9zaXRvcnko\nKS5nZXRNYXBwaW5nRGVmYXVsdHMoKS4KICAgICAgICAgICAgICAgIGdldERp\nc2NyaW1pbmF0b3JWYWx1ZShkaXNjcmltLCBhZGFwdCk7CiAgICAgICAgfQog\nICAgICAgIAogICAgICAgIHN3aXRjaChkaXNjcmltLmdldEphdmFUeXBlKCkp\nIHsgCiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLklOVDoKICAgICAgICAg\nICAgICAgIHJldHVybiBJbnRlZ2VyLnZhbHVlT2YoX3ZhbHVlKTsKICAgICAg\nICAgICAgY2FzZSBKYXZhVHlwZXMuQ0hBUjoKICAgICAgICAgICAgICAgcmV0\ndXJuIG5ldyBDaGFyYWN0ZXIoX3ZhbHVlLmNoYXJBdChfdmFsdWUuaW5kZXhP\nZignXCcnKSsxKSk7CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLlNUUklO\nRzoKICAgICAgICAgICAgZGVmYXVsdDogCiAgICAgICAgICAgICAgICByZXR1\ncm4gX3ZhbHVlOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFJl\ndHVybiB0aGUgY29sdW1ucyBzZXQgZm9yIHRoaXMgZGlzY3JpbWluYXRvciwg\nYmFzZWQgb24gdGhlIGdpdmVuCiAgICAgKiB0ZW1wbGF0ZXMuCiAgICAgKi8K\nICAgIHB1YmxpYyBDb2x1bW5bXSBnZXRDb2x1bW5zKERpc2NyaW1pbmF0b3Ig\nZGlzY3JpbSwgQ29sdW1uW10gdG1wbGF0ZXMsCiAgICAgICAgYm9vbGVhbiBh\nZGFwdCkgewogICAgICAgIFRhYmxlIHRhYmxlID0gZGlzY3JpbS5nZXRDbGFz\nc01hcHBpbmcoKS5nZXRUYWJsZSgpOwogICAgICAgIGRpc2NyaW0uZ2V0TWFw\ncGluZ1JlcG9zaXRvcnkoKS5nZXRNYXBwaW5nRGVmYXVsdHMoKS5wb3B1bGF0\nZUNvbHVtbnMKICAgICAgICAgICAgKGRpc2NyaW0sIHRhYmxlLCB0bXBsYXRl\ncyk7CiAgICAgICAgcmV0dXJuIGNyZWF0ZUNvbHVtbnMoZGlzY3JpbSwgbnVs\nbCwgdG1wbGF0ZXMsIHRhYmxlLCBhZGFwdCk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBSZXR1cm4gdGhlIGluZGV4IHRvIHNldCBvbiB0aGUgZGlzY3JpbWlu\nYXRvciBjb2x1bW5zLCBvciBudWxsIGlmIG5vbmUuCiAgICAgKi8KICAgIHB1\nYmxpYyBJbmRleCBnZXRJbmRleChEaXNjcmltaW5hdG9yIGRpc2NyaW0sIENv\nbHVtbltdIGNvbHMsIGJvb2xlYW4gYWRhcHQpIHsKICAgICAgICBJbmRleCBp\nZHggPSBudWxsOwogICAgICAgIGlmIChjb2xzLmxlbmd0aCA+IDApCiAgICAg\nICAgICAgIGlkeCA9IGRpc2NyaW0uZ2V0TWFwcGluZ1JlcG9zaXRvcnkoKS5n\nZXRNYXBwaW5nRGVmYXVsdHMoKS4KICAgICAgICAgICAgICAgIGdldEluZGV4\nKGRpc2NyaW0sIGNvbHNbMF0uZ2V0VGFibGUoKSwgY29scyk7CiAgICAgICAg\ncmV0dXJuIGNyZWF0ZUluZGV4KGRpc2NyaW0sIG51bGwsIGlkeCwgY29scywg\nYWRhcHQpOwogICAgfQoKICAgIC8qKgogICAgICogU3luY2hyb25pemUgaW50\nZXJuYWwgaW5mb3JtYXRpb24gd2l0aCB0aGUgbWFwcGluZyBkYXRhIGZvciB0\naGUgZ2l2ZW4KICAgICAqIGRpc2NyaW1pbmF0b3IuCiAgICAgKi8KICAgIHB1\nYmxpYyB2b2lkIHN5bmNXaXRoKERpc2NyaW1pbmF0b3IgZGlzYykgewogICAg\nICAgIGNsZWFyKGZhbHNlKTsKCiAgICAgICAgLy8gc2V0IGlvIGJlZm9yZSBz\neW5jaW5nIGNvbHMKICAgICAgICBzZXRDb2x1bW5JTyhkaXNjLmdldENvbHVt\nbklPKCkpOwogICAgICAgIHN5bmNDb2x1bW5zKGRpc2MsIGRpc2MuZ2V0Q29s\ndW1ucygpLCBkaXNjLmdldFZhbHVlKCkgIT0gbnVsbAogICAgICAgICAgICAm\nJiAhKGRpc2MuZ2V0VmFsdWUoKSBpbnN0YW5jZW9mIFN0cmluZykpOwogICAg\nICAgIHN5bmNJbmRleChkaXNjLCBkaXNjLmdldEluZGV4KCkpOwogICAgICAg\nIGlmIChkaXNjLmdldFZhbHVlKCkgPT0gRGlzY3JpbWluYXRvci5OVUxMKQog\nICAgICAgICAgICBfdmFsdWUgPSAibnVsbCI7CiAgICAgICAgZWxzZSBpZiAo\nZGlzYy5nZXRWYWx1ZSgpICE9IG51bGwpCiAgICAgICAgICAgIF92YWx1ZSA9\nIGRpc2MuZ2V0VmFsdWUoKS50b1N0cmluZygpOwoKICAgICAgICBpZiAoZGlz\nYy5nZXRTdHJhdGVneSgpID09IG51bGwKICAgICAgICAgICAgfHwgZGlzYy5n\nZXRTdHJhdGVneSgpIGluc3RhbmNlb2YgU3VwZXJjbGFzc0Rpc2NyaW1pbmF0\nb3JTdHJhdGVneSkKICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICAvLyBl\neHBsaWNpdCBkaXNjcmltaW5hdG9yIHN0cmF0ZWd5IGlmOgogICAgICAgIC8v\nIC0gdW5tYXBwZWQgY2xhc3MgYW5kIGRpc2NyaW1pbmF0b3IgaXMgbWFwcGVk\nCiAgICAgICAgLy8gLSBmaW5hbCBiYXNlIGNsYXNzIGFuZCBkaXNjcmltaW5h\ndG9yIGlzIG1hcHBlZAogICAgICAgIC8vIC0gdGFibGUtcGVyLWNsYXNzIHN1\nYmNsYXNzIGFuZCBkaXNjcmltaW5hdG9yIGlzIG1hcHBlZAogICAgICAgIC8v\nIC0gbWFwcGVkIHN1YmNsYXNzIGFuZCBkb2Vzbid0IHJlbHkgb24gc3VwZXJj\nbGFzcyBkaXNjcmltaW5hdG9yCiAgICAgICAgLy8gLSBtYXBwZWQgYmFzZSBj\nbGFzcyBhbmQgZG9lc24ndCB1c2UgdmFsdWUtbWFwIHN0cmF0ZWd5IHdpdGgg\ndmFsdWUKICAgICAgICAvLyAgIGFuZCBpc24ndCBhIGZpbmFsIGNsYXNzIHRo\nYXQgdXNlcyB0aGUgZmluYWwgc3RyYXRlZ3kKICAgICAgICBDbGFzc01hcHBp\nbmcgY2xzID0gZGlzYy5nZXRDbGFzc01hcHBpbmcoKTsKICAgICAgICBTdHJp\nbmcgc3RyYXQgPSBkaXNjLmdldFN0cmF0ZWd5KCkuZ2V0QWxpYXMoKTsKICAg\nICAgICBib29sZWFuIHN5bmMgPSBmYWxzZTsKCiAgICAgICAgaWYgKCFjbHMu\naXNNYXBwZWQoKQogICAgICAgICAgICB8fCAoY2xzLmdldEpvaW5hYmxlUENT\ndXBlcmNsYXNzTWFwcGluZygpICE9IG51bGwKICAgICAgICAgICAgJiYgTW9k\naWZpZXIuaXNGaW5hbChjbHMuZ2V0RGVzY3JpYmVkVHlwZSgpLmdldE1vZGlm\naWVycygpKSkKICAgICAgICAgICAgfHwgKGNscy5nZXRKb2luYWJsZVBDU3Vw\nZXJjbGFzc01hcHBpbmcoKSA9PSBudWxsCiAgICAgICAgICAgICYmIGNscy5n\nZXRNYXBwZWRQQ1N1cGVyY2xhc3NNYXBwaW5nKCkgIT0gbnVsbCkpCiAgICAg\nICAgICAgIHN5bmMgPSAhTm9uZURpc2NyaW1pbmF0b3JTdHJhdGVneS5BTElB\nUy5lcXVhbHMoc3RyYXQpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgc3lu\nYyA9IGNscy5nZXRKb2luYWJsZVBDU3VwZXJjbGFzc01hcHBpbmcoKSAhPSBu\ndWxsCiAgICAgICAgICAgICAgICB8fCBfdmFsdWUgPT0gbnVsbAogICAgICAg\nICAgICAgICAgfHwgIVZhbHVlTWFwRGlzY3JpbWluYXRvclN0cmF0ZWd5LkFM\nSUFTLmVxdWFscyhzdHJhdCk7CgogICAgICAgIGlmIChzeW5jKQogICAgICAg\nICAgICBzZXRTdHJhdGVneShzdHJhdCk7CiAgICB9CgogICAgcHJvdGVjdGVk\nIHZvaWQgY2xlYXIoYm9vbGVhbiBjYW5GbGFncykgewogICAgICAgIHN1cGVy\nLmNsZWFyKGNhbkZsYWdzKTsKICAgICAgICBfdmFsdWUgPSBudWxsOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIGNvcHkoTWFwcGluZ0luZm8gaW5mbykgewog\nICAgICAgIHN1cGVyLmNvcHkoaW5mbyk7CiAgICAgICAgaWYgKCEoaW5mbyBp\nbnN0YW5jZW9mIERpc2NyaW1pbmF0b3JNYXBwaW5nSW5mbykpCiAgICAgICAg\nICAgIHJldHVybjsKCiAgICAgICAgaWYgKF92YWx1ZSA9PSBudWxsKQogICAg\nICAgICAgICBfdmFsdWUgPSAoKERpc2NyaW1pbmF0b3JNYXBwaW5nSW5mbykg\naW5mbykuZ2V0VmFsdWUoKTsKICAgIH0KfQo=\n","encoding":"base64"}

