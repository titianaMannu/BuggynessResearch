{"sha":"ced9c7c0a91c540f60cd15071eec43ba0a716d23","node_id":"MDQ6QmxvYjIwNjM2NDpjZWQ5YzdjMGE5MWM1NDBmNjBjZDE1MDcxZWVjNDNiYTBhNzE2ZDIz","size":16323,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/ced9c7c0a91c540f60cd15071eec43ba0a716d23","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhOwoKaW1wb3J0\nIGphdmEudXRpbC5BcnJheUxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuQ29sbGVj\ndGlvbjsKaW1wb3J0IGphdmEudXRpbC5MaXN0OwoKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLmlkZW50aWZpZXIuREJJZGVudGlmaWVyOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLkNvbHVtbjsKaW1w\nb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5Db2x1bW5JTzsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5Gb3JlaWdu\nS2V5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLklu\nZGV4OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLlNj\naGVtYTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5T\nY2hlbWFHcm91cDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNj\naGVtYS5UYWJsZTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNj\naGVtYS5VbmlxdWU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0\naWwuTG9jYWxpemVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi54\nbWwuQ29tbWVudGFibGU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0\nYS5KYXZhVHlwZXM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5N\nZXRhRGF0YUNvbnRleHQ7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRp\nbC5NZXRhRGF0YUV4Y2VwdGlvbjsKCi8qKgogKiBJbmZvcm1hdGlvbiBhYm91\ndCB0aGUgbWFwcGluZyBmcm9tIGEgZmllbGQgdG8gdGhlIHNjaGVtYSwgaW4g\ncmF3IGZvcm0uCiAqIFRoZSBjb2x1bW5zIGFuZCB0YWJsZXMgdXNlZCBpbiBt\nYXBwaW5nIGluZm8gd2lsbCBub3QgYmUgcGFydCBvZiB0aGUKICoge0BsaW5r\nIFNjaGVtYUdyb3VwfSB1c2VkIGF0IHJ1bnRpbWUuIFJhdGhlciwgdGhleSB3\naWxsIGJlIHN0cnVjdHMKICogd2l0aCB0aGUgcmVsZXZhbnQgcGllY2VzIG9m\nIGluZm9ybWF0aW9uIGZpbGxlZCBpbi4KICoKICogQGF1dGhvciBBYmUgV2hp\ndGUKICogQGF1dGhvciBQaW5ha2kgUG9kZGFyCiAqLwpAU3VwcHJlc3NXYXJu\naW5ncygic2VyaWFsIikKcHVibGljIGNsYXNzIEZpZWxkTWFwcGluZ0luZm8K\nICAgIGV4dGVuZHMgTWFwcGluZ0luZm8KICAgIGltcGxlbWVudHMgQ29tbWVu\ndGFibGUgewoKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvY2FsaXplciBf\nbG9jID0gTG9jYWxpemVyLmZvclBhY2thZ2UKICAgICAgICAoRmllbGRNYXBw\naW5nSW5mby5jbGFzcyk7CgogICAgcHJpdmF0ZSBEQklkZW50aWZpZXIgX3Rh\nYmxlTmFtZSA9IERCSWRlbnRpZmllci5OVUxMOwogICAgcHJpdmF0ZSBib29s\nZWFuIF9vdXRlciA9IGZhbHNlOwogICAgcHJpdmF0ZSBDb2x1bW4gX29yZGVy\nQ29sID0gbnVsbDsKICAgIHByaXZhdGUgYm9vbGVhbiBfY2FuT3JkZXJDb2wg\nPSB0cnVlOwogICAgcHJpdmF0ZSBTdHJpbmdbXSBfY29tbWVudHMgPSBudWxs\nOwogICAgcHJpdmF0ZSBMaXN0PFVuaXF1ZT4gX2pvaW5UYWJsZVVuaXF1ZXM7\nIC8vIFVuaXF1ZSBjb25zdHJhaW50cyBvbiBKb2luVGFibGUKCiAgICAvKioK\nICAgICAqIFRoZSB1c2VyLXN1cHBsaWVkIG5hbWUgb2YgdGhlIHRhYmxlIGZv\nciB0aGlzIGZpZWxkLgogICAgICogQGRlcHJlY2F0ZWQKICAgICAqLwogICAg\ncHVibGljIFN0cmluZyBnZXRUYWJsZU5hbWUoKSB7CiAgICAgICAgcmV0dXJu\nIGdldFRhYmxlSWRlbnRpZmllcigpLmdldE5hbWUoKTsKICAgIH0KCiAgICBw\ndWJsaWMgREJJZGVudGlmaWVyIGdldFRhYmxlSWRlbnRpZmllcigpIHsKICAg\nICAgICByZXR1cm4gX3RhYmxlTmFtZSA9PSBudWxsID8gREJJZGVudGlmaWVy\nLk5VTEwgOiBfdGFibGVOYW1lOwogICAgfQoKICAgIC8qKgogICAgICogVGhl\nIHVzZXItc3VwcGxpZWQgbmFtZSBvZiB0aGUgdGFibGUgZm9yIHRoaXMgZmll\nbGQuCiAgICAgKiBAZGVwcmVjYXRlZAogICAgICovCiAgICBwdWJsaWMgdm9p\nZCBzZXRUYWJsZU5hbWUoU3RyaW5nIHRhYmxlTmFtZSkgewogICAgICAgIHNl\ndFRhYmxlSWRlbnRpZmllcihEQklkZW50aWZpZXIubmV3VGFibGUodGFibGVO\nYW1lKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0VGFibGVJZGVudGlm\naWVyKERCSWRlbnRpZmllciB0YWJsZU5hbWUpIHsKICAgICAgICBfdGFibGVO\nYW1lID0gdGFibGVOYW1lOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhl\nciB0aGUgZmllbGQncyB0YWJsZSBpcyBqb2luZWQgdG8gdGhlIGNsYXNzIHRh\nYmxlIHRocm91Z2ggYW4KICAgICAqIG91dGVyIGpvaW4uCiAgICAgKi8KICAg\nIHB1YmxpYyBib29sZWFuIGlzSm9pbk91dGVyKCkgewogICAgICAgIHJldHVy\nbiBfb3V0ZXI7CiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRoZSBm\naWVsZCdzIHRhYmxlIGlzIGpvaW5lZCB0byB0aGUgY2xhc3MgdGFibGUgdGhy\nb3VnaCBhbgogICAgICogb3V0ZXIgam9pbi4KICAgICAqLwogICAgcHVibGlj\nIHZvaWQgc2V0Sm9pbk91dGVyKGJvb2xlYW4gb3V0ZXIpIHsKICAgICAgICBf\nb3V0ZXIgPSBvdXRlcjsKICAgIH0KCiAgICAvKioKICAgICAqIFJhdyBzeW50\naGV0aWMgb3JkZXJpbmcgY29sdW1uLgogICAgICovCiAgICBwdWJsaWMgQ29s\ndW1uIGdldE9yZGVyQ29sdW1uKCkgewogICAgICAgIHJldHVybiBfb3JkZXJD\nb2w7CiAgICB9CgogICAgLyoqCiAgICAgKiBSYXcgc3ludGhldGljIG9yZGVy\naW5nIGNvbHVtbi4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0T3JkZXJD\nb2x1bW4oQ29sdW1uIG9yZGVyKSB7CiAgICAgICAgX29yZGVyQ29sID0gb3Jk\nZXI7CiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHdlIGNhbiBoYXZl\nIGFuIG9yZGVyaW5nIGNvbHVtbi4KICAgICAqLwogICAgcHVibGljIGJvb2xl\nYW4gY2FuT3JkZXJDb2x1bW4oKSB7CiAgICAgICAgcmV0dXJuIF9jYW5PcmRl\nckNvbDsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIgd2UgY2FuIGhh\ndmUgYW4gb3JkZXJpbmcgY29sdW1uLgogICAgICovCiAgICBwdWJsaWMgdm9p\nZCBzZXRDYW5PcmRlckNvbHVtbihib29sZWFuIGNhbk9yZGVyKSB7CiAgICAg\nICAgX2Nhbk9yZGVyQ29sID0gY2FuT3JkZXI7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBSZXR1cm4gdGhlIHRhYmxlIGZvciB0aGUgZ2l2ZW4gZmllbGQsIG9y\nIG51bGwgaWYgbm8gdGFibGUgZ2l2ZW4uCiAgICAgKi8KICAgIHB1YmxpYyBU\nYWJsZSBnZXRUYWJsZShmaW5hbCBGaWVsZE1hcHBpbmcgZmllbGQsIGJvb2xl\nYW4gY3JlYXRlLAogICAgICAgIGJvb2xlYW4gYWRhcHQpIHsKICAgICAgICBp\nZiAoREJJZGVudGlmaWVyLmlzTnVsbChfdGFibGVOYW1lKSAmJiAhY3JlYXRl\nKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKCiAgICAgICAgVGFibGUgdGFi\nbGUgPSBmaWVsZC5nZXREZWZpbmluZ01hcHBpbmcoKS5nZXRUYWJsZSgpOwog\nICAgICAgIERCSWRlbnRpZmllciBzY2hlbWFOYW1lID0gKHRhYmxlID09IG51\nbGwpID8gREJJZGVudGlmaWVyLk5VTEwgCiAgICAgICAgICAgIDogdGFibGUu\nZ2V0U2NoZW1hKCkuZ2V0SWRlbnRpZmllcigpOwoKICAgICAgICAvLyBpZiB3\nZSBoYXZlIG5vIGpvaW4gY29sdW1ucyBkZWZpbmVkLCB0aGVyZSBtYXkgYmUg\nY2xhc3MtbGV2ZWwgam9pbgogICAgICAgIC8vIGluZm9ybWF0aW9uIHdpdGgg\nYSBtb3JlIGZ1bGx5LXF1YWxpZmllZCBuYW1lIGZvciBvdXIgdGFibGUKICAg\nICAgICBEQklkZW50aWZpZXIgdGFibGVOYW1lID0gX3RhYmxlTmFtZTsKICAg\nICAgICBpZiAoIURCSWRlbnRpZmllci5pc051bGwodGFibGVOYW1lKSAmJiBn\nZXRDb2x1bW5zKCkuaXNFbXB0eSgpKQogICAgICAgICAgICB0YWJsZU5hbWUg\nPSBmaWVsZC5nZXREZWZpbmluZ01hcHBpbmcoKS5nZXRNYXBwaW5nSW5mbygp\nLgogICAgICAgICAgICAgICAgZ2V0U2Vjb25kYXJ5VGFibGVJZGVudGlmaWVy\nKHRhYmxlTmFtZSk7CgogICAgICAgIHJldHVybiBjcmVhdGVUYWJsZShmaWVs\nZCwgbmV3IFRhYmxlRGVmYXVsdHMoKSB7CiAgICAgICAgICAgIHB1YmxpYyBT\ndHJpbmcgZ2V0KFNjaGVtYSBzY2hlbWEpIHsKICAgICAgICAgICAgICAgIC8v\nIGRlbGF5IHRoaXMgc28gdGhhdCB3ZSBkb24ndCBkbyBzY2hlbWEgcmVmbGVj\ndGlvbiBmb3IgdW5pcXVlCiAgICAgICAgICAgICAgICAvLyB0YWJsZSBuYW1l\nIHVubGVzcyBuZWNlc3NhcnkKICAgICAgICAgICAgICAgIHJldHVybiBmaWVs\nZC5nZXRNYXBwaW5nUmVwb3NpdG9yeSgpLmdldE1hcHBpbmdEZWZhdWx0cygp\nLgogICAgICAgICAgICAgICAgICAgIGdldFRhYmxlTmFtZShmaWVsZCwgc2No\nZW1hKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBwdWJsaWMgREJJZGVu\ndGlmaWVyIGdldElkZW50aWZpZXIoU2NoZW1hIHNjaGVtYSkgewogICAgICAg\nICAgICAgICAgLy8gVE9ETyBBdXRvLWdlbmVyYXRlZCBtZXRob2Qgc3R1Ygog\nICAgICAgICAgICAgICAgcmV0dXJuIGZpZWxkLmdldE1hcHBpbmdSZXBvc2l0\nb3J5KCkuZ2V0TWFwcGluZ0RlZmF1bHRzKCkuCiAgICAgICAgICAgICAgICAg\nICAgZ2V0VGFibGVJZGVudGlmaWVyKGZpZWxkLCBzY2hlbWEpOwogICAgICAg\nICAgICB9CiAgICAgICAgfSwgc2NoZW1hTmFtZSwgdGFibGVOYW1lLCBhZGFw\ndCk7CiAgICB9CgogICAgcHVibGljIEZvcmVpZ25LZXkgZ2V0Sm9pbkZvcmVp\nZ25LZXkgKGZpbmFsIEZpZWxkTWFwcGluZyBmaWVsZCwgVGFibGUgdGFibGUs\nCiAgICAgICAgYm9vbGVhbiBhZGFwdCkgewogICAgICAgIGlmIChmaWVsZC5p\nc1VuaTFUb01GSygpKSB7CiAgICAgICAgICAgIExpc3Q8Q29sdW1uPiBjb2xz\nID0gZmllbGQuZ2V0RWxlbWVudE1hcHBpbmcoKS5nZXRWYWx1ZUluZm8oKS5n\nZXRDb2x1bW5zKCk7CiAgICAgICAgICAgIHJldHVybiBnZXRKb2luKGZpZWxk\nLCB0YWJsZSwgYWRhcHQsIGNvbHMpOwogICAgICAgIH0KICAgICAgICByZXR1\ncm4gbnVsbDsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhl\nIGpvaW4gZnJvbSB0aGUgZmllbGQgdGFibGUgdG8gdGhlIG93bmluZyBjbGFz\ncyB0YWJsZS4KICAgICAqLwogICAgcHVibGljIEZvcmVpZ25LZXkgZ2V0Sm9p\nbihmaW5hbCBGaWVsZE1hcHBpbmcgZmllbGQsIFRhYmxlIHRhYmxlLAogICAg\nICAgIGJvb2xlYW4gYWRhcHQpIHsKICAgICAgICAvLyBpZiB3ZSBoYXZlIG5v\nIGpvaW4gY29sdW1ucyBkZWZpbmVkLCBjaGVjayBjbGFzcy1sZXZlbCBqb2lu\nCiAgICAJLy8gaWYgdGhlIGdpdmVuIGZpZWxkIGlzIGVtYmVkZGVkIHRoZW4g\nY29uc2lkZXIgcHJpbWFyeSB0YWJsZSBvZiBvd25lcgogICAgICAgIHJldHVy\nbiBnZXRKb2luKGZpZWxkLCB0YWJsZSwgYWRhcHQsIGdldENvbHVtbnMoKSk7\nCiAgICB9CiAgICAKICAgIHB1YmxpYyBGb3JlaWduS2V5IGdldEpvaW4oZmlu\nYWwgRmllbGRNYXBwaW5nIGZpZWxkLCBUYWJsZSB0YWJsZSwKICAgICAgICAg\nICAgYm9vbGVhbiBhZGFwdCwgTGlzdDxDb2x1bW4+IGNvbHMpIHsKICAgICAg\nICBpZiAoY29scy5pc0VtcHR5KCkpIHsKICAgICAgICAJQ2xhc3NNYXBwaW5n\nIG1hcHBpbmc7CiAgICAgICAgCWlmIChmaWVsZC5pc0VtYmVkZGVkKCkgJiYg\nCiAgICAgICAgICAgICAgICAgICAgZmllbGQuZ2V0RGVjbGFyaW5nTWFwcGlu\nZygpLmdldEVtYmVkZGluZ01hcHBpbmcoKSAhPSBudWxsKSB7CiAgICAgICAg\nICAgICAgICBtYXBwaW5nID0gZmllbGQuZ2V0RGVjbGFyaW5nTWFwcGluZygp\nLmdldEVtYmVkZGluZ01hcHBpbmcoKQogICAgICAgIAkJCS5nZXRGaWVsZE1h\ncHBpbmcoKS5nZXREZWNsYXJpbmdNYXBwaW5nKCk7CiAgICAgICAgCX0gZWxz\nZSB7CiAgICAgICAgCQltYXBwaW5nID0gZmllbGQuZ2V0RGVmaW5pbmdNYXBw\naW5nKCk7CiAgICAgICAgCX0KICAgICAgICAgICAgY29scyA9IG1hcHBpbmcu\nZ2V0TWFwcGluZ0luZm8oKS4KICAgICAgICAgICAgICAgIGdldFNlY29uZGFy\neVRhYmxlSm9pbkNvbHVtbnMoX3RhYmxlTmFtZSk7CiAgICAgICAgfQogICAg\nICAgIEZvcmVpZ25LZXlEZWZhdWx0cyBkZWYgPSBuZXcgRm9yZWlnbktleURl\nZmF1bHRzKCkgewogICAgICAgICAgICBwdWJsaWMgRm9yZWlnbktleSBnZXQo\nVGFibGUgbG9jYWwsIFRhYmxlIGZvcmVpZ24sIGJvb2xlYW4gaW52ZXJzZSkg\newogICAgICAgICAgICAgICAgcmV0dXJuIGZpZWxkLmdldE1hcHBpbmdSZXBv\nc2l0b3J5KCkuZ2V0TWFwcGluZ0RlZmF1bHRzKCkuCiAgICAgICAgICAgICAg\nICAgICAgZ2V0Sm9pbkZvcmVpZ25LZXkoZmllbGQsIGxvY2FsLCBmb3JlaWdu\nKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcHVibGljIHZvaWQgcG9w\ndWxhdGUoVGFibGUgbG9jYWwsIFRhYmxlIGZvcmVpZ24sIENvbHVtbiBjb2ws\nCiAgICAgICAgICAgICAgICBPYmplY3QgdGFyZ2V0LCBib29sZWFuIGludmVy\nc2UsIGludCBwb3MsIGludCBjb2xzKSB7CiAgICAgICAgICAgICAgICBmaWVs\nZC5nZXRNYXBwaW5nUmVwb3NpdG9yeSgpLmdldE1hcHBpbmdEZWZhdWx0cygp\nLgogICAgICAgICAgICAgICAgICAgIHBvcHVsYXRlSm9pbkNvbHVtbihmaWVs\nZCwgbG9jYWwsIGZvcmVpZ24sIGNvbCwgdGFyZ2V0LAogICAgICAgICAgICAg\nICAgICAgICAgICBwb3MsIGNvbHMpOwogICAgICAgICAgICB9CiAgICAgICAg\nfTsKICAgICAgICBDbGFzc01hcHBpbmcgY2xzID0gZ2V0RGVmaW5pbmdNYXBw\naW5nKGZpZWxkKTsKICAgICAgICByZXR1cm4gY3JlYXRlRm9yZWlnbktleShm\naWVsZCwgImpvaW4iLCBjb2xzLCBkZWYsIHRhYmxlLCBjbHMsIGNscywKICAg\nICAgICAgICAgZmFsc2UsIGFkYXB0KTsKICAgIH0KICAgIAogICAgcHJpdmF0\nZSBDbGFzc01hcHBpbmcgZ2V0RGVmaW5pbmdNYXBwaW5nKEZpZWxkTWFwcGlu\nZyBmaWVsZCkgewogICAgICAgIENsYXNzTWFwcGluZyBjbG0gPSBmaWVsZC5n\nZXREZWZpbmluZ01hcHBpbmcoKTsKICAgICAgICBWYWx1ZU1hcHBpbmdJbXBs\nIHZhbHVlID0gKFZhbHVlTWFwcGluZ0ltcGwpY2xtLmdldEVtYmVkZGluZ01l\ndGFEYXRhKCk7CiAgICAgICAgaWYgKHZhbHVlID09IG51bGwpCiAgICAgICAg\nICAgIHJldHVybiBjbG07CiAgICAgICAgRmllbGRNYXBwaW5nIGZpZWxkMSA9\nIHZhbHVlLmdldEZpZWxkTWFwcGluZygpOwogICAgICAgIHJldHVybiBnZXRE\nZWZpbmluZ01hcHBpbmcoZmllbGQxKTsKICAgIH0KICAgIAogICAgLyoqCiAg\nICAgKiBVbmlxdWUgY29uc3RyYWludCBvbiB0aGUgZmllbGQgam9pbi4KICAg\nICAqLwogICAgcHVibGljIFVuaXF1ZSBnZXRKb2luVW5pcXVlKEZpZWxkTWFw\ncGluZyBmaWVsZCwgYm9vbGVhbiBkZWYsCiAgICAgICAgYm9vbGVhbiBhZGFw\ndCkgewogICAgICAgIEZvcmVpZ25LZXkgZmsgPSBmaWVsZC5nZXRKb2luRm9y\nZWlnbktleSgpOwogICAgICAgIGlmIChmayA9PSBudWxsKQogICAgICAgICAg\nICByZXR1cm4gbnVsbDsKCiAgICAgICAgVW5pcXVlIHVucSA9IG51bGw7CiAg\nICAgICAgaWYgKGZrLmdldENvbHVtbnMoKS5sZW5ndGggPiAwKQogICAgICAg\nICAgICB1bnEgPSBmaWVsZC5nZXRNYXBwaW5nUmVwb3NpdG9yeSgpLmdldE1h\ncHBpbmdEZWZhdWx0cygpLgogICAgICAgICAgICAgICAgZ2V0Sm9pblVuaXF1\nZShmaWVsZCwgZmsuZ2V0VGFibGUoKSwgZmsuZ2V0Q29sdW1ucygpKTsKICAg\nICAgICByZXR1cm4gY3JlYXRlVW5pcXVlKGZpZWxkLCAiam9pbiIsIHVucSwg\nZmsuZ2V0Q29sdW1ucygpLCBhZGFwdCk7CiAgICB9CiAgICAKICAgIC8qKgog\nICAgICogQWRkIFVuaXF1ZSBDb25zdHJhaW50IHRvIHRoZSBKb2luIFRhYmxl\nLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBhZGRKb2luVGFibGVVbmlxdWUo\nVW5pcXVlIHUpIHsKICAgIAlpZiAoX2pvaW5UYWJsZVVuaXF1ZXMgPT0gbnVs\nbCkKICAgIAkJX2pvaW5UYWJsZVVuaXF1ZXMgPSBuZXcgQXJyYXlMaXN0PFVu\naXF1ZT4oKTsKICAgIAlfam9pblRhYmxlVW5pcXVlcy5hZGQodSk7CiAgICB9\nCiAgICAKICAgIC8qKgogICAgICogR2V0IHRoZSB1bmlxdWUgY29uc3RyYWlu\ndHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBTZXF1ZW5jZSB0YWJsZS4KICAgICAq\nLwogICAgcHVibGljIFVuaXF1ZVtdIGdldEpvaW5UYWJsZVVuaXF1ZXMoRmll\nbGRNYXBwaW5nIGZpZWxkLCBib29sZWFuIGRlZiwgCiAgICAJCWJvb2xlYW4g\nYWRhcHQpIHsKICAgICAgICByZXR1cm4gZ2V0VW5pcXVlcyhmaWVsZCwgX2pv\naW5UYWJsZVVuaXF1ZXMsIGRlZiwgYWRhcHQpOwogICAgfSAgIAogICAgCiAg\nICBwcml2YXRlIFVuaXF1ZVtdIGdldFVuaXF1ZXMoRmllbGRNYXBwaW5nIGZp\nZWxkLCBMaXN0PFVuaXF1ZT4gdW5pcXVlcywgCiAgICAJCWJvb2xlYW4gZGVm\nLCBib29sZWFuIGFkYXB0KSB7CiAgICAgICAgaWYgKHVuaXF1ZXMgPT0gbnVs\nbCB8fCB1bmlxdWVzLmlzRW1wdHkoKSkKICAgICAgICAgICAgcmV0dXJuIG5l\ndyBVbmlxdWVbMF07CiAgICAgICAgQ29sbGVjdGlvbjxVbmlxdWU+IHJlc3Vs\ndCA9IG5ldyBBcnJheUxpc3Q8VW5pcXVlPigpOwogICAgICAgIGZvciAoVW5p\ncXVlIHRlbXBsYXRlIDogdW5pcXVlcykgewogICAgICAgICAgICBDb2x1bW5b\nXSB0ZW1wbGF0ZUNvbHVtbnMgPSB0ZW1wbGF0ZS5nZXRDb2x1bW5zKCk7CiAg\nICAgICAgICAgIENvbHVtbltdIHVuaXF1ZUNvbHVtbnMgPSBuZXcgQ29sdW1u\nW3RlbXBsYXRlQ29sdW1ucy5sZW5ndGhdOwogICAgICAgICAgICBUYWJsZSB0\nYWJsZSA9IGdldFRhYmxlKGZpZWxkLCB0cnVlLCBhZGFwdCk7CiAgICAgICAg\nICAgIGZvciAoaW50IGk9MDsgaTx1bmlxdWVDb2x1bW5zLmxlbmd0aDsgaSsr\nKSB7CiAgICAgICAgICAgICAgICBEQklkZW50aWZpZXIgY29sdW1uTmFtZSA9\nIHRlbXBsYXRlQ29sdW1uc1tpXS5nZXRJZGVudGlmaWVyKCk7CiAgICAgICAg\nICAgICAgICBDb2x1bW4gdW5pcXVlQ29sdW1uID0gdGFibGUuZ2V0Q29sdW1u\nKGNvbHVtbk5hbWUpOwogICAgICAgICAgICAgICAgdW5pcXVlQ29sdW1uc1tp\nXSA9IHVuaXF1ZUNvbHVtbjsKICAgICAgICAgICAgfQogICAgICAgICAgICBV\nbmlxdWUgdW5pcXVlID0gY3JlYXRlVW5pcXVlKGZpZWxkLCAidW5pcXVlIiwg\ndGVtcGxhdGUsICAKICAgICAgICAgICAgICAgIHVuaXF1ZUNvbHVtbnMsIGFk\nYXB0KTsKICAgICAgICAgICAgaWYgKHVuaXF1ZSAhPSBudWxsKQogICAgICAg\nICAgICAgICAgcmVzdWx0LmFkZCh1bmlxdWUpOwogICAgICAgIH0KICAgICAg\nICByZXR1cm4gcmVzdWx0LnRvQXJyYXkobmV3IFVuaXF1ZVtyZXN1bHQuc2l6\nZSgpXSk7CiAgICB9ICAgCiAgICAKICAgLyoqCiAgICAgKiBJbmRleCBvbiB0\naGUgZmllbGQgam9pbi4KICAgICAqLwogICAgcHVibGljIEluZGV4IGdldEpv\naW5JbmRleChGaWVsZE1hcHBpbmcgZmllbGQsIGJvb2xlYW4gYWRhcHQpIHsK\nICAgICAgICBGb3JlaWduS2V5IGZrID0gZmllbGQuZ2V0Sm9pbkZvcmVpZ25L\nZXkoKTsKICAgICAgICBpZiAoZmsgPT0gbnVsbCkKICAgICAgICAgICAgcmV0\ndXJuIG51bGw7CgogICAgICAgIEluZGV4IGlkeCA9IG51bGw7CiAgICAgICAg\naWYgKGZrLmdldENvbHVtbnMoKS5sZW5ndGggPiAwKQogICAgICAgICAgICBp\nZHggPSBmaWVsZC5nZXRNYXBwaW5nUmVwb3NpdG9yeSgpLmdldE1hcHBpbmdE\nZWZhdWx0cygpLgogICAgICAgICAgICAgICAgZ2V0Sm9pbkluZGV4KGZpZWxk\nLCBmay5nZXRUYWJsZSgpLCBmay5nZXRDb2x1bW5zKCkpOwogICAgICAgIHJl\ndHVybiBjcmVhdGVJbmRleChmaWVsZCwgImpvaW4iLCBpZHgsIGZrLmdldENv\nbHVtbnMoKSwgYWRhcHQpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJu\nIHRoZSBvcmRlcmluZyBjb2x1bW4gZm9yIHRoaXMgZmllbGQsIG9yIG51bGwg\naWYgbm9uZS4KICAgICAqLwogICAgcHVibGljIENvbHVtbiBnZXRPcmRlckNv\nbHVtbihGaWVsZE1hcHBpbmcgZmllbGQsIFRhYmxlIHRhYmxlLAogICAgICAg\nIGJvb2xlYW4gYWRhcHQpIHsKICAgICAgICBpZiAoX29yZGVyQ29sICE9IG51\nbGwgJiYgZmllbGQuZ2V0T3JkZXJEZWNsYXJhdGlvbigpICE9IG51bGwpCiAg\nICAgICAgICAgIHRocm93IG5ldyBNZXRhRGF0YUV4Y2VwdGlvbihfbG9jLmdl\ndCgib3JkZXItY29uZmxpY3QiLCBmaWVsZCkpOwoKICAgICAgICAvLyByZXNl\ndCBJTwogICAgICAgIHNldENvbHVtbklPKG51bGwpOwoKICAgICAgICAvLyBo\nYXMgdXNlciBoYXMgZXhwbGljaXRseSB0dXJuZWQgb3JkZXJpbmcgb2ZmPwog\nICAgICAgIGlmICghX2Nhbk9yZGVyQ29sIHx8IGZpZWxkLmdldE9yZGVyRGVj\nbGFyYXRpb24oKSAhPSBudWxsKQogICAgICAgICAgICByZXR1cm4gbnVsbDsK\nCiAgICAgICAgLy8gaWYgbm8gZGVmYXVsdHMgcmV0dXJuIG51bGwKICAgICAg\nICBNYXBwaW5nRGVmYXVsdHMgZGVmID0gZmllbGQuZ2V0TWFwcGluZ1JlcG9z\naXRvcnkoKS4KICAgICAgICAgICAgZ2V0TWFwcGluZ0RlZmF1bHRzKCk7CiAg\nICAgICAgaWYgKF9vcmRlckNvbCA9PSBudWxsICYmICghYWRhcHQgJiYgIWRl\nZi5kZWZhdWx0TWlzc2luZ0luZm8oKSkpCiAgICAgICAgICAgIHJldHVybiBu\ndWxsOwoKICAgICAgICBDb2x1bW4gdG1wbGF0ZSA9IG5ldyBDb2x1bW4oKTsK\nICAgICAgICAvLyBDb21wYXRpYmlsaXR5IG9wdGlvbiBkZXRlcm1pbmVzIHdo\nYXQgc2hvdWxkIGJlIHVzZWQgZm9yCiAgICAgICAgLy8gdGhlIGRlZmF1bHQg\nb3JkZXIgY29sdW1uIG5hbWUKICAgICAgICBib29sZWFuIGRlbGltaXQgPSBm\naWVsZC5nZXRNYXBwaW5nUmVwb3NpdG9yeSgpLmdldERCRGljdGlvbmFyeSgp\nLmRlbGltaXRBbGwoKTsKICAgICAgICBpZiAoZmllbGQuZ2V0TWFwcGluZ1Jl\ncG9zaXRvcnkoKS5nZXRDb25maWd1cmF0aW9uKCkKICAgICAgICAgICAgLmdl\ndENvbXBhdGliaWxpdHlJbnN0YW5jZSgpLmdldFVzZUpQQTJEZWZhdWx0T3Jk\nZXJDb2x1bW5OYW1lKCkpIHsKICAgICAgICAgICAgLy8gVXNlIHRoZSBzYW1l\nIHN0cmF0ZWd5IGFzIGNvbHVtbiB0byBidWlsZCB0aGUgZmllbGQgbmFtZQog\nICAgICAgICAgICBEQklkZW50aWZpZXIgc05hbWUgPSBEQklkZW50aWZpZXIu\nbmV3Q29sdW1uKGZpZWxkLmdldE5hbWUoKSwgZGVsaW1pdCk7CiAgICAgICAg\nICAgIHNOYW1lID0gREJJZGVudGlmaWVyLmFwcGVuZChzTmFtZSwiX09SREVS\nIik7CiAgICAgICAgICAgIHRtcGxhdGUuc2V0SWRlbnRpZmllcihzTmFtZSk7\nCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdG1wbGF0ZS5zZXRJZGVu\ndGlmaWVyKERCSWRlbnRpZmllci5uZXdDb2x1bW4oIm9yZHIiLCBkZWxpbWl0\nKSk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHRtcGxhdGUuc2V0SmF2\nYVR5cGUoSmF2YVR5cGVzLklOVCk7CiAgICAgICAgaWYgKCFkZWYucG9wdWxh\ndGVPcmRlckNvbHVtbnMoZmllbGQsIHRhYmxlLCBuZXcgQ29sdW1uW117IHRt\ncGxhdGUgfSkKICAgICAgICAgICAgJiYgX29yZGVyQ29sID09IG51bGwpCiAg\nICAgICAgICAgIHJldHVybiBudWxsOwoKICAgICAgICBpZiAoX29yZGVyQ29s\nICE9IG51bGwpIHsKICAgICAgICAgICAgQ29sdW1uSU8gaW8gPSBuZXcgQ29s\ndW1uSU8oKTsKICAgICAgICAgICAgaW8uc2V0TnVsbEluc2VydGFibGUoMCwg\nIV9vcmRlckNvbC5pc05vdE51bGwoKSk7CiAgICAgICAgICAgIGlvLnNldE51\nbGxVcGRhdGFibGUoMCwgIV9vcmRlckNvbC5pc05vdE51bGwoKSk7CiAgICAg\nICAgICAgIGlvLnNldEluc2VydGFibGUoMCwgIV9vcmRlckNvbC5nZXRGbGFn\nKENvbHVtbi5GTEFHX1VOSU5TRVJUQUJMRSkpOwogICAgICAgICAgICBpby5z\nZXRVcGRhdGFibGUoMCwgIV9vcmRlckNvbC5nZXRGbGFnKENvbHVtbi5GTEFH\nX1VOVVBEQVRBQkxFKSk7CiAgICAgICAgICAgIHNldENvbHVtbklPKGlvKTsK\nICAgICAgICB9CgogICAgICAgIHJldHVybiBtZXJnZUNvbHVtbihmaWVsZCwg\nIm9yZGVyIiwgdG1wbGF0ZSwgdHJ1ZSwgX29yZGVyQ29sLCB0YWJsZSwKICAg\nICAgICAgICAgYWRhcHQsIGRlZi5kZWZhdWx0TWlzc2luZ0luZm8oKSk7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBTeW5jaHJvbml6ZSBpbnRlcm5hbCBpbmZv\ncm1hdGlvbiB3aXRoIHRoZSBtYXBwaW5nIGRhdGEgZm9yIHRoZSBnaXZlbgog\nICAgICogZmllbGQuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHN5bmNXaXRo\nKEZpZWxkTWFwcGluZyBmaWVsZCkgewogICAgICAgIGNsZWFyKGZhbHNlKTsK\nCiAgICAgICAgaWYgKGZpZWxkLmdldEpvaW5Gb3JlaWduS2V5KCkgIT0gbnVs\nbCkKICAgICAgICAgICAgX3RhYmxlTmFtZSA9IGZpZWxkLmdldE1hcHBpbmdS\nZXBvc2l0b3J5KCkuZ2V0REJEaWN0aW9uYXJ5KCkuCiAgICAgICAgICAgICAg\nICBnZXRGdWxsSWRlbnRpZmllcihmaWVsZC5nZXRUYWJsZSgpLCB0cnVlKTsK\nCiAgICAgICAgQ2xhc3NNYXBwaW5nIGRlZiA9IGZpZWxkLmdldERlZmluaW5n\nTWFwcGluZygpOwogICAgICAgIHNldENvbHVtbklPKGZpZWxkLmdldEpvaW5D\nb2x1bW5JTygpKTsKICAgICAgICBpZiAoZmllbGQuZ2V0Sm9pbkZvcmVpZ25L\nZXkoKSAhPSBudWxsICYmIGRlZi5nZXRUYWJsZSgpICE9IG51bGwpCiAgICAg\nICAgICAgIHN5bmNGb3JlaWduS2V5KGZpZWxkLCBmaWVsZC5nZXRKb2luRm9y\nZWlnbktleSgpLAogICAgICAgICAgICAgICAgZmllbGQuZ2V0VGFibGUoKSwg\nZGVmLmdldFRhYmxlKCkpOwogICAgICAgIF9vdXRlciA9IGZpZWxkLmlzSm9p\nbk91dGVyKCk7CgogICAgICAgIHN5bmNJbmRleChmaWVsZCwgZmllbGQuZ2V0\nSm9pbkluZGV4KCkpOwogICAgICAgIHN5bmNVbmlxdWUoZmllbGQsIGZpZWxk\nLmdldEpvaW5VbmlxdWUoKSk7CiAgICAgICAgc3luY0pvaW5UYWJsZVVuaXF1\nZXMoZmllbGQsIGZpZWxkLmdldEpvaW5UYWJsZVVuaXF1ZXMoKSk7CiAgICAg\nICAgc3luY09yZGVyQ29sdW1uKGZpZWxkKTsKICAgICAgICBzeW5jU3RyYXRl\nZ3koZmllbGQpOwogICAgfQoKICAgIC8qKgogICAgICogU3luY2hyb25pemUg\naW50ZXJuYWwgbWFwcGluZyBzdHJhdGVneSBpbmZvcm1hdGlvbiB3aXRoIHRo\nZSBnaXZlbiBmaWVsZC4KICAgICAqLwogICAgcHVibGljIHZvaWQgc3luY1N0\ncmF0ZWd5KEZpZWxkTWFwcGluZyBmaWVsZCkgewogICAgICAgIHNldFN0cmF0\nZWd5KG51bGwpOwogICAgICAgIGlmIChmaWVsZC5nZXRIYW5kbGVyKCkgIT0g\nbnVsbCB8fCBmaWVsZC5nZXRTdHJhdGVneSgpID09IG51bGwpCiAgICAgICAg\nICAgIHJldHVybjsKCiAgICAgICAgLy8gZXhwbGljaXQgc3RyYXRlZ3kgaWYg\ndGhlIHN0cmF0ZWd5IGlzbid0IHRoZSBleHBlY3RlZCBkZWZhdWx0CiAgICAg\nICAgU3RyYXRlZ3kgc3RyYXQgPSBmaWVsZC5nZXRNYXBwaW5nUmVwb3NpdG9y\neSgpLmRlZmF1bHRTdHJhdGVneQogICAgICAgICAgICAoZmllbGQsIGZhbHNl\nKTsKICAgICAgICBpZiAoc3RyYXQgPT0gbnVsbCB8fCAhc3RyYXQuZ2V0QWxp\nYXMoKS5lcXVhbHMoZmllbGQuZ2V0QWxpYXMoKSkpCiAgICAgICAgICAgIHNl\ndFN0cmF0ZWd5KGZpZWxkLmdldEFsaWFzKCkpOwogICAgfQoKICAgIC8qKgog\nICAgICogU3luY2hyb25pemUgaW50ZXJuYWwgb3JkZXIgY29sdW1uIGluZm9y\nbWF0aW9uIHdpdGggdGhlIGdpdmVuIGZpZWxkLgogICAgICovCiAgICBwdWJs\naWMgdm9pZCBzeW5jT3JkZXJDb2x1bW4oRmllbGRNYXBwaW5nIGZpZWxkKSB7\nCiAgICAgICAgaWYgKGZpZWxkLmdldE9yZGVyQ29sdW1uKCkgIT0gbnVsbCkK\nICAgICAgICAgICAgX29yZGVyQ29sID0gc3luY0NvbHVtbihmaWVsZCwgZmll\nbGQuZ2V0T3JkZXJDb2x1bW4oKSwgMSwgZmFsc2UsCiAgICAgICAgICAgICAg\nICBmaWVsZC5nZXRUYWJsZSgpLCBudWxsLCBudWxsLCBmYWxzZSk7CiAgICAg\nICAgZWxzZQogICAgICAgICAgICBfb3JkZXJDb2wgPSBudWxsOwogICAgfQog\nICAgCiAgICAvKioKICAgICAqIFNldHMgaW50ZXJuYWwgY29uc3RyYWludCBp\nbmZvcm1hdGlvbiB0byBtYXRjaCBnaXZlbiBtYXBwZWQgY29uc3RyYWludC4K\nICAgICAqLwogICAgcHJvdGVjdGVkIHZvaWQgc3luY0pvaW5UYWJsZVVuaXF1\nZXMoTWV0YURhdGFDb250ZXh0IGNvbnRleHQsIFVuaXF1ZVtdIHVucXMpCiAg\nICB7CiAgICAgICAgaWYgKHVucXMgPT0gbnVsbCkgewogICAgICAgICAgICBf\nam9pblRhYmxlVW5pcXVlcyA9IG51bGw7CiAgICAgICAgICAgIHJldHVybjsK\nICAgICAgICB9CiAgICAgICAgX2pvaW5UYWJsZVVuaXF1ZXMgPSBuZXcgQXJy\nYXlMaXN0PFVuaXF1ZT4oKTsKICAgICAgICBmb3IgKFVuaXF1ZSB1bmlxdWU6\ndW5xcykgewogICAgICAgIAlVbmlxdWUgY29weSA9IG5ldyBVbmlxdWUoKTsK\nICAgICAgICAJY29weS5zZXRJZGVudGlmaWVyKHVuaXF1ZS5nZXRJZGVudGlm\naWVyKCkpOwogICAgICAgIAljb3B5LnNldERlZmVycmVkKHVuaXF1ZS5pc0Rl\nZmVycmVkKCkpOwogICAgICAgIAlfam9pblRhYmxlVW5pcXVlcy5hZGQodW5p\ncXVlKTsKICAgICAgICB9CiAgICB9CgoKICAgIHB1YmxpYyBib29sZWFuIGhh\nc1NjaGVtYUNvbXBvbmVudHMoKSB7CiAgICAgICAgcmV0dXJuIHN1cGVyLmhh\nc1NjaGVtYUNvbXBvbmVudHMoKSB8fCAhREJJZGVudGlmaWVyLmlzTnVsbChf\ndGFibGVOYW1lKQogICAgICAgICAgICB8fCBfb3JkZXJDb2wgIT0gbnVsbDsK\nICAgIH0KCiAgICBwcm90ZWN0ZWQgdm9pZCBjbGVhcihib29sZWFuIGNhbkZs\nYWdzKSB7CiAgICAgICAgc3VwZXIuY2xlYXIoY2FuRmxhZ3MpOwogICAgICAg\nIF90YWJsZU5hbWUgPSBEQklkZW50aWZpZXIuTlVMTDsKICAgICAgICBfb3Jk\nZXJDb2wgPSBudWxsOwogICAgICAgIGlmIChjYW5GbGFncykKICAgICAgICAg\nICAgX2Nhbk9yZGVyQ29sID0gdHJ1ZTsKICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBjb3B5KE1hcHBpbmdJbmZvIGluZm8pIHsKICAgICAgICBzdXBlci5jb3B5\nKGluZm8pOwogICAgICAgIGlmICghKGluZm8gaW5zdGFuY2VvZiBGaWVsZE1h\ncHBpbmdJbmZvKSkKICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICBGaWVs\nZE1hcHBpbmdJbmZvIGZpbmZvID0gKEZpZWxkTWFwcGluZ0luZm8pIGluZm87\nCiAgICAgICAgaWYgKERCSWRlbnRpZmllci5pc051bGwoX3RhYmxlTmFtZSkp\nCiAgICAgICAgICAgIF90YWJsZU5hbWUgPSBmaW5mby5nZXRUYWJsZUlkZW50\naWZpZXIoKTsKICAgICAgICBpZiAoIV9vdXRlcikKICAgICAgICAgICAgX291\ndGVyID0gZmluZm8uaXNKb2luT3V0ZXIoKTsKICAgICAgICBpZiAoX2Nhbk9y\nZGVyQ29sICYmIF9vcmRlckNvbCA9PSBudWxsKQogICAgICAgICAgICBfY2Fu\nT3JkZXJDb2wgPSBmaW5mby5jYW5PcmRlckNvbHVtbigpOwogICAgICAgIGlm\nIChfY2FuT3JkZXJDb2wgJiYgZmluZm8uZ2V0T3JkZXJDb2x1bW4oKSAhPSBu\ndWxsKSB7CiAgICAgICAgICAgIGlmIChfb3JkZXJDb2wgPT0gbnVsbCkKICAg\nICAgICAgICAgICAgIF9vcmRlckNvbCA9IG5ldyBDb2x1bW4oKTsKICAgICAg\nICAgICAgX29yZGVyQ29sLmNvcHkoZmluZm8uZ2V0T3JkZXJDb2x1bW4oKSk7\nCiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBTdHJpbmdbXSBnZXRDb21t\nZW50cygpIHsKICAgICAgICByZXR1cm4gKF9jb21tZW50cyA9PSBudWxsKSA/\nIEVNUFRZX0NPTU1FTlRTIDogX2NvbW1lbnRzOwogICAgfQoKICAgIHB1Ymxp\nYyB2b2lkIHNldENvbW1lbnRzKFN0cmluZ1tdIGNvbW1lbnRzKSB7CiAgICAg\nICAgX2NvbW1lbnRzID0gY29tbWVudHM7CiAgICB9Cn0K\n","encoding":"base64"}

