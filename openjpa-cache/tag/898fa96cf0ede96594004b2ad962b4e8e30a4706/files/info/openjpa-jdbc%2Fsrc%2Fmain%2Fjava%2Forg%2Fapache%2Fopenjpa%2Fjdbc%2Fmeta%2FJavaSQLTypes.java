{"sha":"b4e74d9bef9686b229ad0763f9d504c07d30aa6a","node_id":"MDQ6QmxvYjIwNjM2NDpiNGU3NGQ5YmVmOTY4NmIyMjlhZDA3NjNmOWQ1MDRjMDdkMzBhYTZh","size":5887,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/b4e74d9bef9686b229ad0763f9d504c07d30aa6a","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhOwoKaW1wb3J0\nIGphdmEubWF0aC5CaWdEZWNpbWFsOwppbXBvcnQgamF2YS5tYXRoLkJpZ0lu\ndGVnZXI7CmltcG9ydCBqYXZhLnNxbC5UaW1lOwppbXBvcnQgamF2YS5zcWwu\nVGltZXN0YW1wOwoKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5tZXRhLkph\ndmFUeXBlczsKaW1wb3J0IHNlcnAudXRpbC5OdW1iZXJzOwoKLyoqCiAqIEph\ndmEgU1FMIHR5cGUgY29uc3RhbnRzLgogKgogKiBAYXV0aG9yIEFiZSBXaGl0\nZQogKi8KcHVibGljIGNsYXNzIEphdmFTUUxUeXBlcwogICAgZXh0ZW5kcyBK\nYXZhVHlwZXMgewoKICAgIC8vIGNvbnN0YW50cyBmb3IgdGhlIHNxbCB0eXBl\ncyB0aGF0IGFyZW4ndCBkaXJlY3RseSBzdXBwb3J0ZWQgYnkKICAgIC8vIE9w\nZW5KUEE7IG1ha2Ugc3VyZSB0aGVzZSBkb24ndCBjb25mbGljdCB3aXRoIG91\nciBzdGFuZGFyZCBtZXRhZGF0YSB0eXBlcwogICAgcHVibGljIHN0YXRpYyBm\naW5hbCBpbnQgU1FMX0FSUkFZID0gMTAwMDsKICAgIHB1YmxpYyBzdGF0aWMg\nZmluYWwgaW50IEFTQ0lJX1NUUkVBTSA9IDEwMDE7CiAgICBwdWJsaWMgc3Rh\ndGljIGZpbmFsIGludCBCSU5BUllfU1RSRUFNID0gMTAwMjsKICAgIHB1Ymxp\nYyBzdGF0aWMgZmluYWwgaW50IEJMT0IgPSAxMDAzOwogICAgcHVibGljIHN0\nYXRpYyBmaW5hbCBpbnQgQllURVMgPSAxMDA0OwogICAgcHVibGljIHN0YXRp\nYyBmaW5hbCBpbnQgQ0hBUl9TVFJFQU0gPSAxMDA1OwogICAgcHVibGljIHN0\nYXRpYyBmaW5hbCBpbnQgQ0xPQiA9IDEwMDY7CiAgICBwdWJsaWMgc3RhdGlj\nIGZpbmFsIGludCBTUUxfREFURSA9IDEwMDc7CiAgICBwdWJsaWMgc3RhdGlj\nIGZpbmFsIGludCBTUUxfT0JKRUNUID0gMTAwODsKICAgIHB1YmxpYyBzdGF0\naWMgZmluYWwgaW50IFJFRiA9IDEwMDk7CiAgICBwdWJsaWMgc3RhdGljIGZp\nbmFsIGludCBUSU1FID0gMTAxMDsKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwg\naW50IFRJTUVTVEFNUCA9IDEwMTE7CiAgICBwdWJsaWMgc3RhdGljIGZpbmFs\nIGludCBKREJDX0RFRkFVTFQgPSAxMDEyOwoKICAgIHByaXZhdGUgc3RhdGlj\nIGZpbmFsIEJ5dGUgWkVST19CWVRFID0gbmV3IEJ5dGUoKGJ5dGUpIDApOwog\nICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgQ2hhcmFjdGVyIFpFUk9fQ0hBUiA9\nIG5ldyBDaGFyYWN0ZXIoKGNoYXIpIDApOwogICAgcHJpdmF0ZSBzdGF0aWMg\nZmluYWwgRG91YmxlIFpFUk9fRE9VQkxFID0gbmV3IERvdWJsZSgwZCk7CiAg\nICBwcml2YXRlIHN0YXRpYyBmaW5hbCBGbG9hdCBaRVJPX0ZMT0FUID0gbmV3\nIEZsb2F0KDBmKTsKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFNob3J0IFpF\nUk9fU0hPUlQgPSBuZXcgU2hvcnQoKHNob3J0KSAwKTsKICAgIHByaXZhdGUg\nc3RhdGljIGZpbmFsIEJpZ0RlY2ltYWwgWkVST19CSUdERUNJTUFMID0gbmV3\nIEJpZ0RlY2ltYWwoMGQpOwoKICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIEJ5\ndGUgTk9OWkVST19CWVRFID0gbmV3IEJ5dGUoKGJ5dGUpIDEpOwogICAgcHJp\ndmF0ZSBzdGF0aWMgZmluYWwgQ2hhcmFjdGVyIE5PTlpFUk9fQ0hBUiA9IG5l\ndyBDaGFyYWN0ZXIoKGNoYXIpICdhJyk7CiAgICBwcml2YXRlIHN0YXRpYyBm\naW5hbCBEb3VibGUgTk9OWkVST19ET1VCTEUgPSBuZXcgRG91YmxlKDFkKTsK\nICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIEZsb2F0IE5PTlpFUk9fRkxPQVQg\nPSBuZXcgRmxvYXQoMWYpOwogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU2hv\ncnQgTk9OWkVST19TSE9SVCA9IG5ldyBTaG9ydCgoc2hvcnQpIDEpOwogICAg\ncHJpdmF0ZSBzdGF0aWMgZmluYWwgQmlnSW50ZWdlciBOT05aRVJPX0JJR0lO\nVEVHRVIgPSBuZXcgQmlnSW50ZWdlcigiMSIpOwogICAgcHJpdmF0ZSBzdGF0\naWMgZmluYWwgQmlnRGVjaW1hbCBOT05aRVJPX0JJR0RFQ0lNQUwgPSBuZXcg\nQmlnRGVjaW1hbCgxZCk7CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIHBy\nb3BlciBkYXRlIHR5cGVjb2RlLgogICAgICovCiAgICBwdWJsaWMgc3RhdGlj\nIGludCBnZXREYXRlVHlwZUNvZGUoQ2xhc3M8Pz4gZHR5cGUpIHsKICAgICAg\nICBpZiAoZHR5cGUgPT0gamF2YS51dGlsLkRhdGUuY2xhc3MpCiAgICAgICAg\nICAgIHJldHVybiBEQVRFOwogICAgICAgIGlmIChkdHlwZSA9PSBqYXZhLnNx\nbC5EYXRlLmNsYXNzKQogICAgICAgICAgICByZXR1cm4gU1FMX0RBVEU7CiAg\nICAgICAgaWYgKGR0eXBlID09IFRpbWVzdGFtcC5jbGFzcykKICAgICAgICAg\nICAgcmV0dXJuIFRJTUVTVEFNUDsKICAgICAgICBpZiAoZHR5cGUgPT0gVGlt\nZS5jbGFzcykKICAgICAgICAgICAgcmV0dXJuIFRJTUU7CiAgICAgICAgcmV0\ndXJuIE9CSkVDVDsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiBhbiBl\nbXB0eSB2YWx1ZSBvYmplY3QgZm9yIHRoZSBnaXZlbiB0eXBlIGNvZGUuCiAg\nICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgT2JqZWN0IGdldEVtcHR5VmFsdWUo\naW50IHR5cGUpIHsKICAgICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICAg\nICAgY2FzZSBKYXZhVHlwZXMuU1RSSU5HOgogICAgICAgICAgICAgICAgcmV0\ndXJuICIiOwogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5CT09MRUFOOgog\nICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5CT09MRUFOX09CSjoKICAgICAg\nICAgICAgICAgIHJldHVybiBCb29sZWFuLkZBTFNFOwogICAgICAgICAgICBj\nYXNlIEphdmFUeXBlcy5CWVRFOgogICAgICAgICAgICBjYXNlIEphdmFUeXBl\ncy5CWVRFX09CSjoKICAgICAgICAgICAgICAgIHJldHVybiBaRVJPX0JZVEU7\nCiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkNIQVI6CiAgICAgICAgICAg\nIGNhc2UgSmF2YVR5cGVzLkNIQVJfT0JKOgogICAgICAgICAgICAgICAgcmV0\ndXJuIFpFUk9fQ0hBUjsKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuRE9V\nQkxFOgogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5ET1VCTEVfT0JKOgog\nICAgICAgICAgICAgICAgcmV0dXJuIFpFUk9fRE9VQkxFOwogICAgICAgICAg\nICBjYXNlIEphdmFUeXBlcy5GTE9BVDoKICAgICAgICAgICAgY2FzZSBKYXZh\nVHlwZXMuRkxPQVRfT0JKOgogICAgICAgICAgICAgICAgcmV0dXJuIFpFUk9f\nRkxPQVQ7CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLklOVDoKICAgICAg\nICAgICAgY2FzZSBKYXZhVHlwZXMuSU5UX09CSjoKICAgICAgICAgICAgICAg\nIHJldHVybiBOdW1iZXJzLnZhbHVlT2YoMCk7CiAgICAgICAgICAgIGNhc2Ug\nSmF2YVR5cGVzLkxPTkc6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkxP\nTkdfT0JKOgogICAgICAgICAgICAgICAgcmV0dXJuIE51bWJlcnMudmFsdWVP\nZigwTCk7CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLlNIT1JUOgogICAg\nICAgICAgICBjYXNlIEphdmFUeXBlcy5TSE9SVF9PQko6CiAgICAgICAgICAg\nICAgICByZXR1cm4gWkVST19TSE9SVDsKICAgICAgICAgICAgY2FzZSBKYXZh\nVHlwZXMuQklHSU5URUdFUjoKICAgICAgICAgICAgICAgIHJldHVybiBCaWdJ\nbnRlZ2VyLlpFUk87CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkJJR0RF\nQ0lNQUw6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLk5VTUJFUjoKICAg\nICAgICAgICAgICAgIHJldHVybiBaRVJPX0JJR0RFQ0lNQUw7CiAgICAgICAg\nICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAg\nICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gYSBub24tZW1w\ndHkgdmFsdWUgb2JqZWN0IGZvciB0aGUgZ2l2ZW4gdHlwZSBjb2RlLgogICAg\nICovCiAgICBwdWJsaWMgc3RhdGljIE9iamVjdCBnZXROb25FbXB0eVZhbHVl\nKGludCB0eXBlKSB7CiAgICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAg\nICAgIGNhc2UgSmF2YVR5cGVzLlNUUklORzoKICAgICAgICAgICAgICAgIHJl\ndHVybiAieCI7CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkJPT0xFQU46\nCiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkJPT0xFQU5fT0JKOgogICAg\nICAgICAgICAgICAgcmV0dXJuIEJvb2xlYW4uVFJVRTsKICAgICAgICAgICAg\nY2FzZSBKYXZhVHlwZXMuQllURToKICAgICAgICAgICAgY2FzZSBKYXZhVHlw\nZXMuQllURV9PQko6CiAgICAgICAgICAgICAgICByZXR1cm4gTk9OWkVST19C\nWVRFOwogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5DSEFSOgogICAgICAg\nICAgICBjYXNlIEphdmFUeXBlcy5DSEFSX09CSjoKICAgICAgICAgICAgICAg\nIHJldHVybiBOT05aRVJPX0NIQVI7CiAgICAgICAgICAgIGNhc2UgSmF2YVR5\ncGVzLkRPVUJMRToKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuRE9VQkxF\nX09CSjoKICAgICAgICAgICAgICAgIHJldHVybiBOT05aRVJPX0RPVUJMRTsK\nICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuRkxPQVQ6CiAgICAgICAgICAg\nIGNhc2UgSmF2YVR5cGVzLkZMT0FUX09CSjoKICAgICAgICAgICAgICAgIHJl\ndHVybiBOT05aRVJPX0ZMT0FUOwogICAgICAgICAgICBjYXNlIEphdmFUeXBl\ncy5JTlQ6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLklOVF9PQko6CiAg\nICAgICAgICAgICAgICByZXR1cm4gTnVtYmVycy52YWx1ZU9mKDEpOwogICAg\nICAgICAgICBjYXNlIEphdmFUeXBlcy5MT05HOgogICAgICAgICAgICBjYXNl\nIEphdmFUeXBlcy5MT05HX09CSjoKICAgICAgICAgICAgICAgIHJldHVybiBO\ndW1iZXJzLnZhbHVlT2YoMUwpOwogICAgICAgICAgICBjYXNlIEphdmFUeXBl\ncy5TSE9SVDoKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuU0hPUlRfT0JK\nOgogICAgICAgICAgICAgICAgcmV0dXJuIE5PTlpFUk9fU0hPUlQ7CiAgICAg\nICAgICAgIGNhc2UgSmF2YVR5cGVzLkJJR0lOVEVHRVI6CiAgICAgICAgICAg\nICAgICByZXR1cm4gTk9OWkVST19CSUdJTlRFR0VSOwogICAgICAgICAgICBj\nYXNlIEphdmFUeXBlcy5CSUdERUNJTUFMOgogICAgICAgICAgICBjYXNlIEph\ndmFUeXBlcy5OVU1CRVI6CiAgICAgICAgICAgICAgICByZXR1cm4gTk9OWkVS\nT19CSUdERUNJTUFMOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAg\nICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgfQp9Cg==\n","encoding":"base64"}

