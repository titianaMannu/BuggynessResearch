{"sha":"56f70e4ff2c14d194eee80700153bbced78bd699","node_id":"MDQ6QmxvYjIwNjM2NDo1NmY3MGU0ZmYyYzE0ZDE5NGVlZTgwNzAwMTUzYmJjZWQ3OGJkNjk5","size":28227,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/56f70e4ff2c14d194eee80700153bbced78bd699","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhOwoKaW1wb3J0\nIGphdmEudXRpbC5IYXNoTWFwOwppbXBvcnQgamF2YS51dGlsLkxpc3Q7Cmlt\ncG9ydCBqYXZhLnV0aWwuTWFwOwppbXBvcnQgamF2YS51dGlsLlByb3BlcnRp\nZXM7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuY29uZi5KREJD\nQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLmlkZW50aWZpZXIuTm9ybWFsaXplcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLmlkZW50aWZpZXIuREJJZGVudGlmaWVyOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5zdHJhdHMuVW50eXBlZFBDVmFs\ndWVIYW5kbGVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0\nYS5zdHJhdHMuRW51bVZhbHVlSGFuZGxlcjsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS5qZGJjLnNjaGVtYS5Db2x1bW47CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEuamRiYy5zY2hlbWEuRm9yZWlnbktleTsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5JbmRleDsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5TY2hlbWE7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuVGFibGU7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuVW5pcXVlOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLkRCRGljdGlvbmFyeTsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5Db25maWd1cmFibGU7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmNvbmYuQ29uZmlndXJhdGlv\nbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuY29uZi5Db25maWd1\ncmF0aW9uczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIuaWRlbnRp\nZmllci5JZGVudGlmaWVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxp\nYi5pZGVudGlmaWVyLklkZW50aWZpZXJVdGlsOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLm1ldGEuSmF2YVR5cGVzOwppbXBvcnQgc2VycC51dGlsLlN0\ncmluZ3M7CgovKioKICogRGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBvZiB7QGxp\nbmsgTWFwcGluZ0RlZmF1bHRzfS4KICoKICogQGF1dGhvciBBYmUgV2hpdGUK\nICovCnB1YmxpYyBjbGFzcyBNYXBwaW5nRGVmYXVsdHNJbXBsCiAgICBpbXBs\nZW1lbnRzIE1hcHBpbmdEZWZhdWx0cywgQ29uZmlndXJhYmxlIHsKCiAgICBw\ncm90ZWN0ZWQgdHJhbnNpZW50IERCRGljdGlvbmFyeSBkaWN0ID0gbnVsbDsK\nICAgIHByaXZhdGUgU3RyaW5nIF9iYXNlQ2xhc3NTdHJhdGVneSA9IG51bGw7\nCiAgICBwcml2YXRlIFN0cmluZyBfc3ViY2xhc3NTdHJhdGVneSA9IG51bGw7\nCiAgICBwcml2YXRlIFN0cmluZyBfdmVyc2lvblN0cmF0ZWd5ID0gbnVsbDsK\nICAgIHByaXZhdGUgU3RyaW5nIF9kaXNjU3RyYXRlZ3kgPSBudWxsOwogICAg\ncHJpdmF0ZSBmaW5hbCBNYXAgX2ZpZWxkTWFwID0gbmV3IEhhc2hNYXAoKTsK\nICAgIHByaXZhdGUgYm9vbGVhbiBfZGVmTWlzc2luZyA9IGZhbHNlOwogICAg\ncHJpdmF0ZSBib29sZWFuIF9jbGFzc0NyaXRlcmlhID0gZmFsc2U7CiAgICBw\ncml2YXRlIGludCBfam9pbkZLQWN0aW9uID0gRm9yZWlnbktleS5BQ1RJT05f\nTk9ORTsKICAgIHByaXZhdGUgaW50IF9ma0FjdGlvbiA9IEZvcmVpZ25LZXku\nQUNUSU9OX05PTkU7CiAgICBwcml2YXRlIGJvb2xlYW4gX2RlZmVyID0gZmFs\nc2U7CiAgICBwcml2YXRlIGJvb2xlYW4gX2luZGV4RksgPSB0cnVlOwogICAg\ncHJpdmF0ZSBib29sZWFuIF9pbmRleERpc2MgPSB0cnVlOwogICAgcHJpdmF0\nZSBib29sZWFuIF9pbmRleFZlcnMgPSBmYWxzZTsKICAgIHByaXZhdGUgYm9v\nbGVhbiBfb3JkZXJMaXN0cyA9IHRydWU7CiAgICBwcml2YXRlIGJvb2xlYW4g\nX2FkZE51bGxJbmQgPSBmYWxzZTsKICAgIHByaXZhdGUgYm9vbGVhbiBfb3Jk\naW5hbEVudW0gPSBmYWxzZTsKICAgIHByaXZhdGUgYm9vbGVhbiBfc3RyaW5n\naWZ5VW5tYXBwZWQgPSBmYWxzZTsKICAgIHByaXZhdGUgREJJZGVudGlmaWVy\nIF9kc0lkTmFtZSA9IERCSWRlbnRpZmllci5OVUxMOwogICAgcHJpdmF0ZSBE\nQklkZW50aWZpZXIgX3ZlcnNOYW1lID0gREJJZGVudGlmaWVyLk5VTEw7CiAg\nICBwcml2YXRlIERCSWRlbnRpZmllciBfZGlzY05hbWUgPSBEQklkZW50aWZp\nZXIuTlVMTDsKICAgIHByaXZhdGUgREJJZGVudGlmaWVyIF9vcmRlck5hbWUg\nPSBEQklkZW50aWZpZXIuTlVMTDsKICAgIHByaXZhdGUgREJJZGVudGlmaWVy\nIF9udWxsSW5kTmFtZSA9IERCSWRlbnRpZmllci5OVUxMOwogICAgcHJpdmF0\nZSBib29sZWFuIF9yZW1vdmVIdW5nYXJpYW5Ob3RhdGlvbiA9IGZhbHNlOwoK\nICAgIHB1YmxpYyBib29sZWFuIGlzUmVtb3ZlSHVuZ2FyaWFuTm90YXRpb24o\nKSB7CiAgICAgICAgcmV0dXJuIF9yZW1vdmVIdW5nYXJpYW5Ob3RhdGlvbjsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRSZW1vdmVIdW5nYXJpYW5Ob3Rh\ndGlvbihib29sZWFuIHJlbW92ZUh1bmdhcmlhbk5vdGF0aW9uKSB7CiAgICAg\nICAgdGhpcy5fcmVtb3ZlSHVuZ2FyaWFuTm90YXRpb24gPSByZW1vdmVIdW5n\nYXJpYW5Ob3RhdGlvbjsKICAgIH0KCiAgICAvKioKICAgICAqIERlZmF1bHQg\nYmFzZSBjbGFzcyBzdHJhdGVneSBhbGlhcy4KICAgICAqLwogICAgcHVibGlj\nIFN0cmluZyBnZXRCYXNlQ2xhc3NTdHJhdGVneSgpIHsKICAgICAgICByZXR1\ncm4gX2Jhc2VDbGFzc1N0cmF0ZWd5OwogICAgfQoKICAgIC8qKgogICAgICog\nRGVmYXVsdCBiYXNlIGNsYXNzIHN0cmF0ZWd5IGFsaWFzLgogICAgICovCiAg\nICBwdWJsaWMgdm9pZCBzZXRCYXNlQ2xhc3NTdHJhdGVneShTdHJpbmcgYmFz\nZUNsYXNzU3RyYXRlZ3kpIHsKICAgICAgICBfYmFzZUNsYXNzU3RyYXRlZ3kg\nPSBiYXNlQ2xhc3NTdHJhdGVneTsKICAgIH0KCiAgICAvKioKICAgICAqIERl\nZmF1bHQgc3ViY2xhc3Mgc3RyYXRlZ3kgYWxpYXMuCiAgICAgKi8KICAgIHB1\nYmxpYyBTdHJpbmcgZ2V0U3ViY2xhc3NTdHJhdGVneSgpIHsKICAgICAgICBy\nZXR1cm4gX3N1YmNsYXNzU3RyYXRlZ3k7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBEZWZhdWx0IHN1YmNsYXNzIHN0cmF0ZWd5IGFsaWFzLgogICAgICovCiAg\nICBwdWJsaWMgdm9pZCBzZXRTdWJjbGFzc1N0cmF0ZWd5KFN0cmluZyBzdWJj\nbGFzc1N0cmF0ZWd5KSB7CiAgICAgICAgX3N1YmNsYXNzU3RyYXRlZ3kgPSBz\ndWJjbGFzc1N0cmF0ZWd5OwogICAgfQoKICAgIC8qKgogICAgICogRGVmYXVs\ndCB2ZXJzaW9uIHN0cmF0ZWd5IGFsaWFzLgogICAgICovCiAgICBwdWJsaWMg\nU3RyaW5nIGdldFZlcnNpb25TdHJhdGVneSgpIHsKICAgICAgICByZXR1cm4g\nX3ZlcnNpb25TdHJhdGVneTsKICAgIH0KCiAgICAvKioKICAgICAqIERlZmF1\nbHQgdmVyc2lvbiBzdHJhdGVneSBhbGlhcy4KICAgICAqLwogICAgcHVibGlj\nIHZvaWQgc2V0VmVyc2lvblN0cmF0ZWd5KFN0cmluZyB2ZXJzaW9uU3RyYXRl\nZ3kpIHsKICAgICAgICBfdmVyc2lvblN0cmF0ZWd5ID0gdmVyc2lvblN0cmF0\nZWd5OwogICAgfQoKICAgIC8qKgogICAgICogRGVmYXVsdCBkaXNjcmltaW5h\ndG9yIHN0cmF0ZWd5IGFsaWFzLgogICAgICovCiAgICBwdWJsaWMgU3RyaW5n\nIGdldERpc2NyaW1pbmF0b3JTdHJhdGVneSgpIHsKICAgICAgICByZXR1cm4g\nX2Rpc2NTdHJhdGVneTsKICAgIH0KCiAgICAvKioKICAgICAqIERlZmF1bHQg\nZGlzY3JpbWluYXRvciBzdHJhdGVneSBhbGlhcy4KICAgICAqLwogICAgcHVi\nbGljIHZvaWQgc2V0RGlzY3JpbWluYXRvclN0cmF0ZWd5KFN0cmluZyBkaXNj\nU3RyYXRlZ3kpIHsKICAgICAgICBfZGlzY1N0cmF0ZWd5ID0gZGlzY1N0cmF0\nZWd5OwogICAgfQoKICAgIC8qKgogICAgICogUHJvcGVydHkgc3RyaW5nIG1h\ncHBpbmcgZmllbGQgdHlwZSBuYW1lcyB0byB2YWx1ZSBoYW5kbGVyIG9yIGZp\nZWxkCiAgICAgKiBtYXBwaW5nIGNsYXNzIG5hbWVzLiBGb3IgYXV0by1jb25m\naWd1cmF0aW9uLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRGaWVsZFN0\ncmF0ZWdpZXMoU3RyaW5nIGZpZWxkTWFwU3RyaW5nKSB7CiAgICAgICAgUHJv\ncGVydGllcyBwcm9wcyA9IENvbmZpZ3VyYXRpb25zLnBhcnNlUHJvcGVydGll\ncyhmaWVsZE1hcFN0cmluZyk7CiAgICAgICAgaWYgKHByb3BzICE9IG51bGwp\nCiAgICAgICAgICAgIF9maWVsZE1hcC5wdXRBbGwocHJvcHMpOwogICAgfQoK\nICAgIC8qKgogICAgICogQXNzb2NpYXRpb24gb2YgYSBmaWVsZCB2YWx1ZSB0\neXBlIG5hbWUgd2l0aCB0aGUgaGFuZGxlciBvciBzdHJhdGVneQogICAgICog\nY2xhc3MgbmFtZS4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0RmllbGRT\ndHJhdGVneShTdHJpbmcgdmFsdWVUeXBlLCBTdHJpbmcgaGFuZGxlclR5cGUp\nIHsKICAgICAgICBpZiAoaGFuZGxlclR5cGUgPT0gbnVsbCkKICAgICAgICAg\nICAgX2ZpZWxkTWFwLnJlbW92ZSh2YWx1ZVR5cGUpOwogICAgICAgIGVsc2UK\nICAgICAgICAgICAgX2ZpZWxkTWFwLnB1dCh2YWx1ZVR5cGUsIGhhbmRsZXJU\neXBlKTsKICAgIH0KCiAgICAvKioKICAgICAqIEFzc29jaWF0aW9uIG9mIGEg\nZmllbGQgdmFsdWUgdHlwZSBuYW1lIHdpdGggdGhlIGhhbmRsZXIgb3Igc3Ry\nYXRlZ3kKICAgICAqIGNsYXNzIG5hbWUuCiAgICAgKi8KICAgIHB1YmxpYyBT\ndHJpbmcgZ2V0RmllbGRTdHJhdGVneShTdHJpbmcgdmFsdWVUeXBlKSB7CiAg\nICAgICAgcmV0dXJuIChTdHJpbmcpIF9maWVsZE1hcC5nZXQodmFsdWVUeXBl\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8gc3RvcmUgZW51\nbXMgYXMgdGhlIG9yZGluYWwgdmFsdWUgcmF0aGVyIHRoYW4gdGhlIGVudW0g\nbmFtZS4KICAgICAqIERlZmF1bHRzIHRvIGZhbHNlLgogICAgICovCiAgICBw\ndWJsaWMgYm9vbGVhbiBnZXRTdG9yZUVudW1PcmRpbmFsKCkgewogICAgICAg\nIHJldHVybiBfb3JkaW5hbEVudW07CiAgICB9CgogICAgLyoqCiAgICAgKiBX\naGV0aGVyIHRvIHN0b3JlIGVudW1zIGFzIHRoZSBvcmRpbmFsIHZhbHVlIHJh\ndGhlciB0aGFuIHRoZSBlbnVtIG5hbWUuCiAgICAgKiBEZWZhdWx0cyB0byBm\nYWxzZS4KICAgICAqLwogICAgcHVibGljIHZvaWQgc2V0U3RvcmVFbnVtT3Jk\naW5hbChib29sZWFuIG9yZGluYWwpIHsKICAgICAgICBfb3JkaW5hbEVudW0g\nPSBvcmRpbmFsOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciB0byBz\ndG9yZSBhIHJlbGF0aW9uIHRvIGFuIHVubWFwcGVkIGNsYXNzIGJ5IHN0cmlu\nZ2lmeWluZyB0aGUKICAgICAqIG9pZCBvZiB0aGUgcmVsYXRlZCBvYmplY3Qs\nIHJhdGhlciB0aGFuIHN0b3JpbmcgcHJpbWFyeSBrZXkgdmFsdWVzLgogICAg\nICovCiAgICBwdWJsaWMgYm9vbGVhbiBnZXRTdG9yZVVubWFwcGVkT2JqZWN0\nSWRTdHJpbmcoKSB7CiAgICAgICAgcmV0dXJuIF9zdHJpbmdpZnlVbm1hcHBl\nZDsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8gc3RvcmUgYSBy\nZWxhdGlvbiB0byBhbiB1bm1hcHBlZCBjbGFzcyBieSBzdHJpbmdpZnlpbmcg\ndGhlCiAgICAgKiBvaWQgb2YgdGhlIHJlbGF0ZWQgb2JqZWN0LCByYXRoZXIg\ndGhhbiBzdG9yaW5nIHByaW1hcnkga2V5IHZhbHVlcy4KICAgICAqLwogICAg\ncHVibGljIHZvaWQgc2V0U3RvcmVVbm1hcHBlZE9iamVjdElkU3RyaW5nKGJv\nb2xlYW4gc3RyaW5naWZ5KSB7CiAgICAgICAgX3N0cmluZ2lmeVVubWFwcGVk\nID0gc3RyaW5naWZ5OwogICAgfQoKICAgIC8qKgogICAgICogRGVmYXVsdCBm\nb3JlaWduIGtleSBhY3Rpb24gZm9yIGpvaW4ga2V5cy4gRGVmYXVsdHMgdG8g\nbG9naWNhbCBrZXlzLgogICAgICovCiAgICBwdWJsaWMgaW50IGdldEpvaW5G\nb3JlaWduS2V5RGVsZXRlQWN0aW9uKCkgewogICAgICAgIHJldHVybiBfam9p\nbkZLQWN0aW9uOwogICAgfQoKICAgIC8qKgogICAgICogRGVmYXVsdCBmb3Jl\naWduIGtleSBhY3Rpb24gZm9yIGpvaW4ga2V5cy4gRGVmYXVsdHMgdG8gbG9n\naWNhbCBrZXlzLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRKb2luRm9y\nZWlnbktleURlbGV0ZUFjdGlvbihpbnQgam9pbkZLQWN0aW9uKSB7CiAgICAg\nICAgX2pvaW5GS0FjdGlvbiA9IGpvaW5GS0FjdGlvbjsKICAgIH0KCiAgICAv\nKioKICAgICAqIERlZmF1bHQgZm9yZWlnbiBrZXkgYWN0aW9uIG5hbWUgZm9y\nIGpvaW4ga2V5cy4gVXNlZCBpbiBhdXRvCiAgICAgKiBjb25maWd1cmF0aW9u\nLgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRKb2luRm9yZWlnbktleURl\nbGV0ZUFjdGlvbihTdHJpbmcgam9pbkZLQWN0aW9uKSB7CiAgICAgICAgX2pv\naW5GS0FjdGlvbiA9IEZvcmVpZ25LZXkuZ2V0QWN0aW9uKGpvaW5GS0FjdGlv\nbik7CiAgICB9CgogICAgLyoqCiAgICAgKiBEZWZhdWx0IGZvcmVpZ24ga2V5\nIGFjdGlvbiBmb3IgcmVsYXRpb24ga2V5cy4gRGVmYXVsdHMgdG8gbG9naWNh\nbCBrZXlzLgogICAgICovCiAgICBwdWJsaWMgaW50IGdldEZvcmVpZ25LZXlE\nZWxldGVBY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIF9ma0FjdGlvbjsKICAg\nIH0KCiAgICAvKioKICAgICAqIERlZmF1bHQgZm9yZWlnbiBrZXkgYWN0aW9u\nIGZvciByZWxhdGlvbiBrZXlzLiBEZWZhdWx0cyB0byBsb2dpY2FsIGtleXMu\nCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldEZvcmVpZ25LZXlEZWxldGVB\nY3Rpb24oaW50IGZrQWN0aW9uKSB7CiAgICAgICAgX2ZrQWN0aW9uID0gZmtB\nY3Rpb247CiAgICB9CgogICAgLyoqCiAgICAgKiBEZWZhdWx0IGZvcmVpZ24g\na2V5IGFjdGlvbiBuYW1lIGZvciByZWxhdGlvbiBrZXlzLiBVc2VkIGluIGF1\ndG8KICAgICAqIGNvbmZpZ3VyYXRpb24uCiAgICAgKi8KICAgIHB1YmxpYyB2\nb2lkIHNldEZvcmVpZ25LZXlEZWxldGVBY3Rpb24oU3RyaW5nIGZrQWN0aW9u\nKSB7CiAgICAgICAgX2ZrQWN0aW9uID0gRm9yZWlnbktleS5nZXRBY3Rpb24o\nZmtBY3Rpb24pOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciB0byBp\nbmRleCBsb2dpY2FsIGZvcmVpZ24ga2V5cyBieSBkZWZhdWx0LiBEZWZhdWx0\ncyB0byB0cnVlLgogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBnZXRJbmRl\neExvZ2ljYWxGb3JlaWduS2V5cygpIHsKICAgICAgICByZXR1cm4gX2luZGV4\nRks7CiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRvIGluZGV4IGxv\nZ2ljYWwgZm9yZWlnbiBrZXlzIGJ5IGRlZmF1bHQuIERlZmF1bHRzIHRvIHRy\ndWUuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldEluZGV4TG9naWNhbEZv\ncmVpZ25LZXlzKGJvb2xlYW4gaW5kZXhGSykgewogICAgICAgIF9pbmRleEZL\nID0gaW5kZXhGSzsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8g\naW5kZXggZGlzY3JpbWluYXRvciBjb2x1bW5zIGJ5IGRlZmF1bHQuIERlZmF1\nbHRzIHRvIHRydWUuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGdldElu\nZGV4RGlzY3JpbWluYXRvcigpIHsKICAgICAgICByZXR1cm4gX2luZGV4RGlz\nYzsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8gaW5kZXggZGlz\nY3JpbWluYXRvciBjb2x1bW5zIGJ5IGRlZmF1bHQuIERlZmF1bHRzIHRvIHRy\ndWUuCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldEluZGV4RGlzY3JpbWlu\nYXRvcihib29sZWFuIGluZGV4RGlzYykgewogICAgICAgIF9pbmRleERpc2Mg\nPSBpbmRleERpc2M7CiAgICB9CgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRv\nIGluZGV4IHZlcnNpb24gY29sdW1ucyBieSBkZWZhdWx0LiBEZWZhdWx0cyB0\nbyB0cnVlLgogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBnZXRJbmRleFZl\ncnNpb24oKSB7CiAgICAgICAgcmV0dXJuIF9pbmRleFZlcnM7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBXaGV0aGVyIHRvIGluZGV4IHZlcnNpb24gY29sdW1u\ncyBieSBkZWZhdWx0LiBEZWZhdWx0cyB0byB0cnVlLgogICAgICovCiAgICBw\ndWJsaWMgdm9pZCBzZXRJbmRleFZlcnNpb24oYm9vbGVhbiBpbmRleFZlcnMp\nIHsKICAgICAgICBfaW5kZXhWZXJzID0gaW5kZXhWZXJzOwogICAgfQoKICAg\nIC8qKgogICAgICogV2hldGhlciB0byBvcmRlciBsaXN0cyBhbmQgYXJyYXlz\nIHVzaW5nIGEgZGVkaWNhdGVkIG9yZGVyaW5nIGNvbHVtbgogICAgICogYnkg\nZGVmYXVsdC4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gZ2V0T3JkZXJM\naXN0cygpIHsKICAgICAgICByZXR1cm4gX29yZGVyTGlzdHM7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBXaGV0aGVyIHRvIG9yZGVyIGxpc3RzIGFuZCBhcnJh\neXMgdXNpbmcgYSBkZWRpY2F0ZWQgb3JkZXJpbmcgY29sdW1uCiAgICAgKiBi\neSBkZWZhdWx0LgogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRPcmRlckxp\nc3RzKGJvb2xlYW4gb3JkZXJMaXN0cykgewogICAgICAgIF9vcmRlckxpc3Rz\nID0gb3JkZXJMaXN0czsKICAgIH0KCiAgICAvKioKICAgICAqIFdoZXRoZXIg\ndG8gYWRkIGEgc3ludGhldGljIG51bGwgaW5kaWNhdG9yIGNvbHVtbiB0byBl\nbWJlZGRlZCBtYXBwaW5ncwogICAgICogYnkgZGVmYXVsdC4KICAgICAqLwog\nICAgcHVibGljIGJvb2xlYW4gZ2V0QWRkTnVsbEluZGljYXRvcigpIHsKICAg\nICAgICByZXR1cm4gX2FkZE51bGxJbmQ7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBXaGV0aGVyIHRvIGFkZCBhIHN5bnRoZXRpYyBudWxsIGluZGljYXRvciBj\nb2x1bW4gdG8gZW1iZWRkZWQgbWFwcGluZ3MKICAgICAqIGJ5IGRlZmF1bHQu\nCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldEFkZE51bGxJbmRpY2F0b3Io\nYm9vbGVhbiBhZGROdWxsSW5kKSB7CiAgICAgICAgX2FkZE51bGxJbmQgPSBh\nZGROdWxsSW5kOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciB0byBk\nZWZlciBjb25zdHJhaW50cyBieSBkZWZhdWx0LiBEZWZhdWx0cyB0byBmYWxz\nZS4KICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gZ2V0RGVmZXJDb25zdHJh\naW50cygpIHsKICAgICAgICByZXR1cm4gX2RlZmVyOwogICAgfQoKICAgIC8q\nKgogICAgICogV2hldGhlciB0byBkZWZlciBjb25zdHJhaW50cyBieSBkZWZh\ndWx0LiBEZWZhdWx0cyB0byBmYWxzZS4KICAgICAqLwogICAgcHVibGljIHZv\naWQgc2V0RGVmZXJDb25zdHJhaW50cyhib29sZWFuIGRlZmVyKSB7CiAgICAg\nICAgX2RlZmVyID0gZGVmZXI7CiAgICB9CgogICAgLyoqCiAgICAgKiBEZWZh\ndWx0IGJhc2UgbmFtZSBmb3IgZGF0YXN0b3JlIGlkZW50aXR5IGNvbHVtbnMs\nIG9yIG51bGwgdG8gdGhlCiAgICAgKiBtYXBwaW5nJ3MgYnVpbHQtaW4gbmFt\nZS4KICAgICAqIEBkZXByZWNhdGVkCiAgICAgKi8KICAgIHB1YmxpYyBTdHJp\nbmcgZ2V0RGF0YVN0b3JlSWRDb2x1bW5OYW1lKCkgewogICAgICAgIHJldHVy\nbiBnZXREYXRhU3RvcmVJZENvbHVtbklkZW50aWZpZXIoKS5nZXROYW1lKCk7\nCiAgICB9CgogICAgcHVibGljIERCSWRlbnRpZmllciBnZXREYXRhU3RvcmVJ\nZENvbHVtbklkZW50aWZpZXIoKSB7CiAgICAgICAgcmV0dXJuIF9kc0lkTmFt\nZSA9PSBudWxsID8gREJJZGVudGlmaWVyLk5VTEwgOiBfZHNJZE5hbWU7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBEZWZhdWx0IGJhc2UgbmFtZSBmb3IgZGF0\nYXN0b3JlIGlkZW50aXR5IGNvbHVtbnMsIG9yIG51bGwgdG8gdGhlCiAgICAg\nKiBtYXBwaW5nJ3MgYnVpbHQtaW4gbmFtZS4KICAgICAqIEBkZXByZWNhdGVk\nCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldERhdGFTdG9yZUlkQ29sdW1u\nTmFtZShTdHJpbmcgZHNJZE5hbWUpIHsKICAgICAgICBzZXREYXRhU3RvcmVJ\nZENvbHVtbklkZW50aWZpZXIoREJJZGVudGlmaWVyLm5ld0NvbHVtbihkc0lk\nTmFtZSkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldERhdGFTdG9yZUlk\nQ29sdW1uSWRlbnRpZmllcihEQklkZW50aWZpZXIgZHNJZE5hbWUpIHsKICAg\nICAgICBfZHNJZE5hbWUgPSBkc0lkTmFtZTsKICAgIH0KCiAgICAvKioKICAg\nICAqIERlZmF1bHQgYmFzZSBuYW1lIGZvciB2ZXJzaW9uIGlkZW50aXR5IGNv\nbHVtbnMsIG9yIG51bGwgdG8gdGhlIG1hcHBpbmcncwogICAgICogYnVpbHQt\naW4gbmFtZS4KICAgICAqIEBkZXByZWNhdGVkCiAgICAgKi8KICAgIHB1Ymxp\nYyBTdHJpbmcgZ2V0VmVyc2lvbkNvbHVtbk5hbWUoKSB7CiAgICAgICAgcmV0\ndXJuIGdldFZlcnNpb25Db2x1bW5JZGVudGlmaWVyKCkuZ2V0TmFtZSgpOwog\nICAgfQoKICAgIHB1YmxpYyBEQklkZW50aWZpZXIgZ2V0VmVyc2lvbkNvbHVt\nbklkZW50aWZpZXIoKSB7CiAgICAgICAgcmV0dXJuIF92ZXJzTmFtZSA9PSBu\ndWxsID8gREJJZGVudGlmaWVyLk5VTEwgOiBfdmVyc05hbWU7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBEZWZhdWx0IGJhc2UgbmFtZSBmb3IgdmVyc2lvbiBp\nZGVudGl0eSBjb2x1bW5zLCBvciBudWxsIHRvIHRoZSBtYXBwaW5nJ3MKICAg\nICAqIGJ1aWx0LWluIG5hbWUuCiAgICAgKiBAZGVwcmVjYXRlZAogICAgICov\nCiAgICBwdWJsaWMgdm9pZCBzZXRWZXJzaW9uQ29sdW1uTmFtZShTdHJpbmcg\ndmVyc05hbWUpIHsKICAgICAgICBzZXRWZXJzaW9uQ29sdW1uSWRlbnRpZmll\ncihEQklkZW50aWZpZXIubmV3Q29sdW1uKHZlcnNOYW1lKSk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgc2V0VmVyc2lvbkNvbHVtbklkZW50aWZpZXIoREJJ\nZGVudGlmaWVyIHZlcnNOYW1lKSB7CiAgICAgICAgX3ZlcnNOYW1lID0gdmVy\nc05hbWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBEZWZhdWx0IGJhc2UgbmFt\nZSBmb3IgZGlzY3JpbWluYXRvciBjb2x1bW5zLCBvciBudWxsIHRvIHRoZSBt\nYXBwaW5nJ3MKICAgICAqIGJ1aWx0LWluIG5hbWUuCiAgICAgKiBAZGVwcmVj\nYXRlZAogICAgICovCiAgICBwdWJsaWMgU3RyaW5nIGdldERpc2NyaW1pbmF0\nb3JDb2x1bW5OYW1lKCkgewogICAgICAgIHJldHVybiBnZXREaXNjcmltaW5h\ndG9yQ29sdW1uSWRlbnRpZmllcigpLmdldE5hbWUoKTsKICAgIH0KCiAgICBw\ndWJsaWMgREJJZGVudGlmaWVyIGdldERpc2NyaW1pbmF0b3JDb2x1bW5JZGVu\ndGlmaWVyKCkgewogICAgICAgIHJldHVybiBfZGlzY05hbWUgPT0gbnVsbCA/\nIERCSWRlbnRpZmllci5OVUxMIDogX2Rpc2NOYW1lOwogICAgfQoKICAgIC8q\nKgogICAgICogRGVmYXVsdCBiYXNlIG5hbWUgZm9yIGRpc2NyaW1pbmF0b3Ig\nY29sdW1ucywgb3IgbnVsbCB0byB0aGUgbWFwcGluZydzCiAgICAgKiBidWls\ndC1pbiBuYW1lLgogICAgICogQGRlcHJlY2F0ZWQKICAgICAqLwogICAgcHVi\nbGljIHZvaWQgc2V0RGlzY3JpbWluYXRvckNvbHVtbk5hbWUoU3RyaW5nIGRp\nc2NOYW1lKSB7CiAgICAgICAgc2V0RGlzY3JpbWluYXRvckNvbHVtbklkZW50\naWZpZXIoREJJZGVudGlmaWVyLm5ld0NvbHVtbihkaXNjTmFtZSkpOwogICAg\nfQoKICAgIHB1YmxpYyB2b2lkIHNldERpc2NyaW1pbmF0b3JDb2x1bW5JZGVu\ndGlmaWVyKERCSWRlbnRpZmllciBkaXNjTmFtZSkgewogICAgICAgIF9kaXNj\nTmFtZSA9IGRpc2NOYW1lOwogICAgfQoKICAgIC8qKgogICAgICogRGVmYXVs\ndCBiYXNlIG5hbWUgZm9yIG9yZGVyIGNvbHVtbnMsIG9yIG51bGwgdG8gdGhl\nIG1hcHBpbmcncwogICAgICogYnVpbHQtaW4gbmFtZS4KICAgICAqIEBkZXBy\nZWNhdGVkCiAgICAgKi8KICAgIHB1YmxpYyBTdHJpbmcgZ2V0T3JkZXJDb2x1\nbW5OYW1lKCkgewogICAgICAgIHJldHVybiBnZXRPcmRlckNvbHVtbklkZW50\naWZpZXIoKS5nZXROYW1lKCk7CiAgICB9CgogICAgcHVibGljIERCSWRlbnRp\nZmllciBnZXRPcmRlckNvbHVtbklkZW50aWZpZXIoKSB7CiAgICAgICAgcmV0\ndXJuIF9vcmRlck5hbWUgPT0gbnVsbCA/IERCSWRlbnRpZmllci5OVUxMIDog\nX29yZGVyTmFtZTsKICAgIH0KCiAgICAvKioKICAgICAqIERlZmF1bHQgYmFz\nZSBuYW1lIGZvciBvcmRlciBjb2x1bW5zLCBvciBudWxsIHRvIHRoZSBtYXBw\naW5nJ3MKICAgICAqIGJ1aWx0LWluIG5hbWUuCiAgICAgKiBAZGVwcmVjYXRl\nZAogICAgICovCiAgICBwdWJsaWMgdm9pZCBzZXRPcmRlckNvbHVtbk5hbWUo\nU3RyaW5nIG9yZGVyTmFtZSkgewogICAgICAgIHNldE9yZGVyQ29sdW1uSWRl\nbnRpZmllcihEQklkZW50aWZpZXIubmV3Q29sdW1uKG9yZGVyTmFtZSkpOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldE9yZGVyQ29sdW1uSWRlbnRpZmll\ncihEQklkZW50aWZpZXIgb3JkZXJOYW1lKSB7CiAgICAgICAgX29yZGVyTmFt\nZSA9IG9yZGVyTmFtZTsKICAgIH0KCiAgICAvKioKICAgICAqIERlZmF1bHQg\nYmFzZSBuYW1lIGZvciBudWxsIGluZGljYXRvciBjb2x1bW5zLCBvciBudWxs\nIHRvIHRoZSBtYXBwaW5nJ3MKICAgICAqIGJ1aWx0LWluIG5hbWUuCiAgICAg\nKiBAZGVwcmVjYXRlZAogICAgICovCiAgICBwdWJsaWMgU3RyaW5nIGdldE51\nbGxJbmRpY2F0b3JDb2x1bW5OYW1lKCkgewogICAgICAgIHJldHVybiBnZXRO\ndWxsSW5kaWNhdG9yQ29sdW1uSWRlbnRpZmllcigpLmdldE5hbWUoKTsKICAg\nIH0KCiAgICBwdWJsaWMgREJJZGVudGlmaWVyIGdldE51bGxJbmRpY2F0b3JD\nb2x1bW5JZGVudGlmaWVyKCkgewogICAgICAgIHJldHVybiBfbnVsbEluZE5h\nbWUgPT0gbnVsbCA/IERCSWRlbnRpZmllci5OVUxMIDogX251bGxJbmROYW1l\nOwogICAgfQoKICAgIC8qKgogICAgICogRGVmYXVsdCBiYXNlIG5hbWUgZm9y\nIG51bGwgaW5kaWNhdG9yIGNvbHVtbnMsIG9yIG51bGwgdG8gdGhlIG1hcHBp\nbmcncwogICAgICogYnVpbHQtaW4gbmFtZS4KICAgICAqIEBkZXByZWNhdGVk\nCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHNldE51bGxJbmRpY2F0b3JDb2x1\nbW5OYW1lKFN0cmluZyBudWxsSW5kTmFtZSkgewogICAgICAgIHNldE51bGxJ\nbmRpY2F0b3JDb2x1bW5JZGVudGlmaWVyKERCSWRlbnRpZmllci5uZXdDb2x1\nbW4obnVsbEluZE5hbWUpKTsKICAgIH0KICAgIAogICAgcHVibGljIHZvaWQg\nc2V0TnVsbEluZGljYXRvckNvbHVtbklkZW50aWZpZXIoREJJZGVudGlmaWVy\nIG51bGxJbmROYW1lKSB7CiAgICAgICAgX251bGxJbmROYW1lID0gbnVsbElu\nZE5hbWU7CiAgICB9CiAgICAKICAgIHB1YmxpYyBib29sZWFuIGRlZmF1bHRN\naXNzaW5nSW5mbygpIHsKICAgICAgICByZXR1cm4gX2RlZk1pc3Npbmc7CiAg\nICB9CgogICAgcHVibGljIHZvaWQgc2V0RGVmYXVsdE1pc3NpbmdJbmZvKGJv\nb2xlYW4gZGVmTWlzc2luZykgewogICAgICAgIF9kZWZNaXNzaW5nID0gZGVm\nTWlzc2luZzsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiB1c2VDbGFzc0Ny\naXRlcmlhKCkgewogICAgICAgIHJldHVybiBfY2xhc3NDcml0ZXJpYTsKICAg\nIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRVc2VDbGFzc0NyaXRlcmlhKGJvb2xl\nYW4gY2xhc3NDcml0ZXJpYSkgewogICAgICAgIF9jbGFzc0NyaXRlcmlhID0g\nY2xhc3NDcml0ZXJpYTsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IGdldFN0\ncmF0ZWd5KENsYXNzTWFwcGluZyBjbHMsIGJvb2xlYW4gYWRhcHQpIHsKICAg\nICAgICBpZiAoYWRhcHQgfHwgZGVmYXVsdE1pc3NpbmdJbmZvKCkpCiAgICAg\nICAgICAgIHJldHVybiAoY2xzLmdldE1hcHBlZFBDU3VwZXJjbGFzc01hcHBp\nbmcoKSA9PSBudWxsKQogICAgICAgICAgICAgICAgPyBfYmFzZUNsYXNzU3Ry\nYXRlZ3kgOiBfc3ViY2xhc3NTdHJhdGVneTsKICAgICAgICByZXR1cm4gbnVs\nbDsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IGdldFN0cmF0ZWd5KFZlcnNp\nb24gdmVycywgYm9vbGVhbiBhZGFwdCkgewogICAgICAgIENsYXNzTWFwcGlu\nZyBjbHMgPSB2ZXJzLmdldENsYXNzTWFwcGluZygpOwogICAgICAgIGlmICgo\nYWRhcHQgfHwgZGVmYXVsdE1pc3NpbmdJbmZvKCkpCiAgICAgICAgICAgICYm\nIGNscy5nZXRKb2luYWJsZVBDU3VwZXJjbGFzc01hcHBpbmcoKSA9PSBudWxs\nCiAgICAgICAgICAgICYmIGNscy5nZXRWZXJzaW9uRmllbGQoKSA9PSBudWxs\nKQogICAgICAgICAgICByZXR1cm4gX3ZlcnNpb25TdHJhdGVneTsKICAgICAg\nICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICBwdWJsaWMgT2JqZWN0IGdldFN0\ncmF0ZWd5KERpc2NyaW1pbmF0b3IgZGlzYywgYm9vbGVhbiBhZGFwdCkgewog\nICAgICAgIENsYXNzTWFwcGluZyBjbHMgPSBkaXNjLmdldENsYXNzTWFwcGlu\nZygpOwogICAgICAgIGlmICgoYWRhcHQgfHwgZGVmYXVsdE1pc3NpbmdJbmZv\nKCkpCiAgICAgICAgICAgICYmIGNscy5nZXRKb2luYWJsZVBDU3VwZXJjbGFz\nc01hcHBpbmcoKSA9PSBudWxsCiAgICAgICAgICAgICYmIGRpc2MuZ2V0TWFw\ncGluZ0luZm8oKS5nZXRWYWx1ZSgpID09IG51bGwpCiAgICAgICAgICAgIHJl\ndHVybiBfZGlzY1N0cmF0ZWd5OwogICAgICAgIHJldHVybiBudWxsOwogICAg\nfQoKICAgIHB1YmxpYyBPYmplY3QgZ2V0U3RyYXRlZ3koVmFsdWVNYXBwaW5n\nIHZtLCBDbGFzczw/PiB0eXBlLCBib29sZWFuIGFkYXB0KSB7CiAgICAgICAg\nT2JqZWN0IHJldCA9IF9maWVsZE1hcC5nZXQodHlwZS5nZXROYW1lKCkpOwog\nICAgICAgIGlmIChyZXQgIT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIHJl\ndDsKICAgICAgICBpZiAoX3N0cmluZ2lmeVVubWFwcGVkICYmIHZtLmdldFR5\ncGVNYXBwaW5nKCkgIT0gbnVsbAogICAgICAgICAgICAmJiAhdm0uZ2V0VHlw\nZU1hcHBpbmcoKS5pc01hcHBlZCgpKQogICAgICAgICAgICByZXR1cm4gVW50\neXBlZFBDVmFsdWVIYW5kbGVyLmdldEluc3RhbmNlKCk7CiAgICAgICAgaWYg\nKHR5cGUuaXNFbnVtKCkgJiYgIXZtLmlzU2VyaWFsaXplZCgpKSB7CiAgICAg\nICAgICAgIEVudW1WYWx1ZUhhbmRsZXIgZW51bUhhbmRsZXIgPSBuZXcgRW51\nbVZhbHVlSGFuZGxlcigpOwogICAgICAgICAgICBlbnVtSGFuZGxlci5zZXRT\ndG9yZU9yZGluYWwoX29yZGluYWxFbnVtKTsKICAgICAgICAgICAgcmV0dXJu\nIGVudW1IYW5kbGVyOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbnVsbDsK\nICAgIH0KCiAgICAvKioKICAgICAqIFByb3ZpZGVzIGEgZGVmYXVsdCB2YWx1\nZSBmb3IgdGhlIGdpdmVuIERpc2NyaW1pbmF0b3IuIAogICAgICogCiAgICAg\nKiA8UD4KICAgICAqIFRoZSB0eXBlIG9mIHRoZSBvYmplY3QgcmV0dXJuZWQg\ncmVsaWVzIG9uIHRoZSBqYXZhVHlwZSBmaWVsZCBiZWluZyBzZXQgb24KICAg\nICAqIHRoZSBEaXNjcmltaW5hdG9yIHdoaWNoIGlzIHByb3ZpZGVkLgogICAg\nICogPFRBQkxFIGJvcmRlcj0iMiI+IAogICAgICogPFRIPkphdmFUeXBlCiAg\nICAgKiA8VEg+RGVmYXVsdCB2YWx1ZQogICAgICogPFRCT0RZPgogICAgICog\nPFRSPjxURD57QGxpbmsgSmF2YVR5cGVzLklOVH08VEQ+IFRoZSBoYXNoY29k\nZSBvZiB0aGUgZW50aXR5IG5hbWU8L1RSPgogICAgICogPFRSPjxURD57QGxp\nbmsgSmF2YVR5cGVzLkNIQVJ9PFREPlRoZSBmaXJzdCBjaGFyYWN0ZXIgb2Yg\ndGhlIGVudGl0eSBuYW1lIAogICAgICogPC9UUj4KICAgICAqIDxUUj48VEQ+\ne0BsaW5rIEphdmFUeXBlcy5TVFJJTkd9PFREPlRoZSBlbnRpdHkgbmFtZTwv\nVFI+CiAgICAgKiA8L1RCT0RZPgogICAgICogPC9UQUJMRT4KICAgICAqIAog\nICAgICogQHBhcmFtIGRpc2MgVGhlIGRpc2NyaW1pbmF0b3IgdGhhdCBuZWVk\ncyBhIGRlZmF1bHQgdmFsdWUKICAgICAqIEBwYXJhbSBhZGFwdCAKICAgICAq\nIAogICAgICogQHJldHVybiBBIG5ldyBvYmplY3QgY29udGFpbmluZyB0aGUg\nZ2VuZXJhdGVkIERpc2NyaW1pbmF0b3IgdmFsdWUuCiAgICAgKi8KICAgIHB1\nYmxpYyBPYmplY3QgZ2V0RGlzY3JpbWluYXRvclZhbHVlKERpc2NyaW1pbmF0\nb3IgZGlzYywgYm9vbGVhbiBhZGFwdCkgewogICAgICAgIGlmICghYWRhcHQg\nJiYgIWRlZmF1bHRNaXNzaW5nSW5mbygpKQogICAgICAgICAgICByZXR1cm4g\nbnVsbDsKCiAgICAgICAgLy8gV0FSTklORzogQ0hBTkdJTkcgVEhJUyBXSUxM\nIElOVkFMSURBVEUgRVhJU1RJTkcgREFUQSBJRiBERUZBVUxUSU5HCiAgICAg\nICAgLy8gTUlTU0lORyBNQVBQSU5HIElORk8KICAgICAgICAKICAgICAgICBT\ndHJpbmcgYWxpYXMgPSBTdHJpbmdzLmdldENsYXNzTmFtZShkaXNjLmdldENs\nYXNzTWFwcGluZygpCiAgICAgICAgICAgICAgICAuZ2V0VHlwZUFsaWFzKCkp\nOwogICAgICAgIAogICAgICAgIHN3aXRjaCAoZGlzYy5nZXRKYXZhVHlwZSgp\nKSB7CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLklOVDoKICAgICAgICAg\nICAgICAgIHJldHVybiBuZXcgSW50ZWdlcihhbGlhcy5oYXNoQ29kZSgpKTsK\nICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuQ0hBUjoKICAgICAgICAgICAg\nICAgIHJldHVybiBuZXcgQ2hhcmFjdGVyKGFsaWFzLmNoYXJBdCgwKSk7IAog\nICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5TVFJJTkc6CiAgICAgICAgICAg\nIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICByZXR1cm4gYWxpYXM7CiAgICAg\nICAgfQogICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgZ2V0VGFibGVOYW1lKENs\nYXNzTWFwcGluZyBjbHMsIFNjaGVtYSBzY2hlbWEpIHsKICAgICAgICBTdHJp\nbmcgbmFtZSA9IFN0cmluZ3MuZ2V0Q2xhc3NOYW1lKGNscy5nZXREZXNjcmli\nZWRUeXBlKCkpLgogICAgICAgICAgICByZXBsYWNlKElkZW50aWZpZXJVdGls\nLkRPTExBUl9DSEFSLCBJZGVudGlmaWVyVXRpbC5VTkRFUlNDT1JFX0NIQVIp\nOwogICAgICAgIGlmICghX2RlZk1pc3NpbmcpCiAgICAgICAgICAgIG5hbWUg\nPSBkaWN0LmdldFZhbGlkVGFibGVOYW1lKG5hbWUsIHNjaGVtYSk7CiAgICAg\nICAgcmV0dXJuIG5hbWU7CiAgICB9CgogICAgcHVibGljIERCSWRlbnRpZmll\nciBnZXRUYWJsZUlkZW50aWZpZXIoQ2xhc3NNYXBwaW5nIGNscywgU2NoZW1h\nIHNjaGVtYSkgewogICAgICAgIHJldHVybiBEQklkZW50aWZpZXIubmV3VGFi\nbGUoZ2V0VGFibGVOYW1lKGNscywgc2NoZW1hKSk7CiAgICB9CgogICAgcHVi\nbGljIFN0cmluZyBnZXRUYWJsZU5hbWUoRmllbGRNYXBwaW5nIGZtLCBTY2hl\nbWEgc2NoZW1hKSB7CiAgICAgICAgcmV0dXJuIGdldFRhYmxlSWRlbnRpZmll\ncihmbSwgc2NoZW1hKS5nZXROYW1lKCk7CiAgICB9CgogICAgcHVibGljIERC\nSWRlbnRpZmllciBnZXRUYWJsZUlkZW50aWZpZXIoRmllbGRNYXBwaW5nIGZt\nLCBTY2hlbWEgc2NoZW1hKSB7CiAgICAgICAgREJJZGVudGlmaWVyIHNOYW1l\nID0gREJJZGVudGlmaWVyLm5ld1RhYmxlKGZtLmdldE5hbWUoKSk7CiAgICAg\nICAgVGFibGUgdGFibGUgPSBmbS5nZXREZWZpbmluZ01hcHBpbmcoKS5nZXRU\nYWJsZSgpOwogICAgICAgIGlmICh0YWJsZSAhPSBudWxsKSB7CiAgICAgICAg\nICAgIERCSWRlbnRpZmllciB0YWJsZU5hbWUgPSBEQklkZW50aWZpZXIudHJ1\nbmNhdGUodGFibGUuZ2V0SWRlbnRpZmllcigpLDUpOwogICAgICAgICAgICBz\nTmFtZSA9IERCSWRlbnRpZmllci5hcHBlbmQodGFibGVOYW1lLCBmbS5nZXRO\nYW1lKCkpOwogICAgICAgIH0KICAgICAgICBpZiAoIV9kZWZNaXNzaW5nKQog\nICAgICAgICAgICBzTmFtZSA9IGRpY3QuZ2V0VmFsaWRUYWJsZU5hbWUoc05h\nbWUsIHNjaGVtYSk7CiAgICAgICAgcmV0dXJuIHNOYW1lOwogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHBvcHVsYXRlRGF0YVN0b3JlSWRDb2x1bW5zKENsYXNz\nTWFwcGluZyBjbHMsIFRhYmxlIHRhYmxlLAogICAgICAgIENvbHVtbltdIGNv\nbHMpIHsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNvbHMubGVuZ3Ro\nOyBpKyspIHsKICAgICAgICAgICAgaWYgKCFEQklkZW50aWZpZXIuaXNOdWxs\nKF9kc0lkTmFtZSkgJiYgY29scy5sZW5ndGggPT0gMSkKICAgICAgICAgICAg\nICAgIGNvbHNbaV0uc2V0SWRlbnRpZmllcihfZHNJZE5hbWUpOwogICAgICAg\nICAgICBlbHNlIGlmICghREJJZGVudGlmaWVyLmlzTnVsbChfZHNJZE5hbWUp\nKQogICAgICAgICAgICAgICAgY29sc1tpXS5zZXRJZGVudGlmaWVyKERCSWRl\nbnRpZmllci5hcHBlbmQoX2RzSWROYW1lLCBJbnRlZ2VyLnRvU3RyaW5nKGkp\nKSk7CiAgICAgICAgICAgIGNvcnJlY3ROYW1lKHRhYmxlLCBjb2xzW2ldKTsK\nICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBDb3JyZWN0IHRoZSBn\naXZlbiBjb2x1bW4ncyBuYW1lLgogICAgICovCiAgICBwcm90ZWN0ZWQgdm9p\nZCBjb3JyZWN0TmFtZShUYWJsZSB0YWJsZSwgQ29sdW1uIGNvbCkgewogICAg\nICAgIGlmICghX2RlZk1pc3NpbmcgfHwgX3JlbW92ZUh1bmdhcmlhbk5vdGF0\naW9uKQogICAgICAgIHsKICAgICAgICAgICAgREJJZGVudGlmaWVyIG5hbWUg\nPSBjb2wuZ2V0SWRlbnRpZmllcigpOwogICAgICAgICAgICBpZiAoX3JlbW92\nZUh1bmdhcmlhbk5vdGF0aW9uKQogICAgICAgICAgICAgICAgbmFtZSA9IERC\nSWRlbnRpZmllci5yZW1vdmVIdW5nYXJpYW5Ob3RhdGlvbihuYW1lKTsKICAg\nICAgICAgICAgREJJZGVudGlmaWVyIGNvcnJlY3RlZE5hbWUgPSBkaWN0Lmdl\ndFZhbGlkQ29sdW1uTmFtZShuYW1lLCB0YWJsZSk7CiAgICAgICAgICAgIGNv\nbC5zZXRJZGVudGlmaWVyKGNvcnJlY3RlZE5hbWUpOwogICAgICAgICAgICB0\nYWJsZS5hZGRDb3JyZWN0ZWRDb2x1bW5OYW1lKGNvcnJlY3RlZE5hbWUsIHRy\ndWUpOwogICAgICAgIH0KICAgIH0KCiAgICBwcm90ZWN0ZWQgU3RyaW5nIHJl\nbW92ZUh1bmdhcmlhbk5vdGF0aW9uKFN0cmluZyBjb2x1bW5OYW1lKSB7CiAg\nICAgICAgcmV0dXJuIE5vcm1hbGl6ZXIucmVtb3ZlSHVuZ2FyaWFuTm90YXRp\nb24oY29sdW1uTmFtZSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgcG9wdWxh\ndGVDb2x1bW5zKFZlcnNpb24gdmVycywgVGFibGUgdGFibGUsIENvbHVtbltd\nIGNvbHMpIHsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNvbHMubGVu\nZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKCFEQklkZW50aWZpZXIuaXNO\ndWxsKF92ZXJzTmFtZSkgJiYgY29scy5sZW5ndGggPT0gMSkKICAgICAgICAg\nICAgICAgIGNvbHNbaV0uc2V0SWRlbnRpZmllcihfdmVyc05hbWUpOwogICAg\nICAgICAgICBlbHNlIGlmICghREJJZGVudGlmaWVyLmlzTnVsbChfdmVyc05h\nbWUpKSB7CiAgICAgICAgICAgICAgICBpZiAoaSA9PSAwKSB7CiAgICAgICAg\nICAgICAgICAgICAgY29sc1tpXS5zZXRJZGVudGlmaWVyKF92ZXJzTmFtZSk7\nCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAg\nIGNvbHNbaV0uc2V0SWRlbnRpZmllcihEQklkZW50aWZpZXIuYXBwZW5kKF92\nZXJzTmFtZSwgSW50ZWdlci50b1N0cmluZyhpKSkpOwogICAgICAgICAgICAg\nICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKCFEQklkZW50aWZpZXIuaXNO\ndWxsKF92ZXJzTmFtZSkpCiAgICAgICAgICAgICAgICBjb2xzW2ldLnNldElk\nZW50aWZpZXIoREJJZGVudGlmaWVyLmFwcGVuZChfdmVyc05hbWUsIEludGVn\nZXIudG9TdHJpbmcoaSkpKTsKICAgICAgICAgICAgY29ycmVjdE5hbWUodGFi\nbGUsIGNvbHNbaV0pOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9p\nZCBwb3B1bGF0ZUNvbHVtbnMoRGlzY3JpbWluYXRvciBkaXNjLCBUYWJsZSB0\nYWJsZSwKICAgICAgICBDb2x1bW5bXSBjb2xzKSB7CiAgICAgICAgZm9yIChp\nbnQgaSA9IDA7IGkgPCBjb2xzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAg\nIGlmICghREJJZGVudGlmaWVyLmlzTnVsbChfZGlzY05hbWUpICYmIGNvbHMu\nbGVuZ3RoID09IDEpCiAgICAgICAgICAgICAgICBjb2xzW2ldLnNldElkZW50\naWZpZXIoX2Rpc2NOYW1lKTsKICAgICAgICAgICAgZWxzZSBpZiAoIURCSWRl\nbnRpZmllci5pc051bGwoX2Rpc2NOYW1lKSkKICAgICAgICAgICAgICAgIGNv\nbHNbaV0uc2V0SWRlbnRpZmllcihEQklkZW50aWZpZXIuYXBwZW5kKF9kaXNj\nTmFtZSwgSW50ZWdlci50b1N0cmluZyhpKSkpOwogICAgICAgICAgICBjb3Jy\nZWN0TmFtZSh0YWJsZSwgY29sc1tpXSk7CiAgICAgICAgfQogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHBvcHVsYXRlSm9pbkNvbHVtbihDbGFzc01hcHBpbmcg\nY20sIFRhYmxlIGxvY2FsLCBUYWJsZSBmb3JlaWduLAogICAgICAgIENvbHVt\nbiBjb2wsIE9iamVjdCB0YXJnZXQsIGludCBwb3MsIGludCBjb2xzKSB7CiAg\nICAgICAgY29ycmVjdE5hbWUobG9jYWwsIGNvbCk7CiAgICB9CgogICAgcHVi\nbGljIHZvaWQgcG9wdWxhdGVKb2luQ29sdW1uKEZpZWxkTWFwcGluZyBmbSwg\nVGFibGUgbG9jYWwsIFRhYmxlIGZvcmVpZ24sCiAgICAgICAgQ29sdW1uIGNv\nbCwgT2JqZWN0IHRhcmdldCwgaW50IHBvcywgaW50IGNvbHMpIHsKICAgICAg\nICBjb3JyZWN0TmFtZShsb2NhbCwgY29sKTsKICAgIH0KCiAgICAvKioKICAg\nICAqIEBkZXByZWNhdGVkCiAgICAgKi8KICAgIHB1YmxpYyB2b2lkIHBvcHVs\nYXRlRm9yZWlnbktleUNvbHVtbihWYWx1ZU1hcHBpbmcgdm0sIFN0cmluZyBu\nYW1lLAogICAgICAgIFRhYmxlIGxvY2FsLCBUYWJsZSBmb3JlaWduLCBDb2x1\nbW4gY29sLCBPYmplY3QgdGFyZ2V0LCBib29sZWFuIGludmVyc2UsCiAgICAg\nICAgaW50IHBvcywgaW50IGNvbHMpIHsKICAgICAgICBwb3B1bGF0ZUZvcmVp\nZ25LZXlDb2x1bW4odm0sIERCSWRlbnRpZmllci5uZXdDb2x1bW4obmFtZSks\nIGxvY2FsLCBmb3JlaWduLCBjb2wsCiAgICAgICAgICAgIHRhcmdldCwgaW52\nZXJzZSwgcG9zLCBjb2xzKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBwb3B1\nbGF0ZUZvcmVpZ25LZXlDb2x1bW4oVmFsdWVNYXBwaW5nIHZtLCBEQklkZW50\naWZpZXIgbmFtZSwKICAgICAgICBUYWJsZSBsb2NhbCwgVGFibGUgZm9yZWln\nbiwgQ29sdW1uIGNvbCwgT2JqZWN0IHRhcmdldCwgYm9vbGVhbiBpbnZlcnNl\nLAogICAgICAgIGludCBwb3MsIGludCBjb2xzKSB7CiAgICAgICAgaWYgKGNv\nbHMgPT0gMSkKICAgICAgICAgICAgY29sLnNldElkZW50aWZpZXIobmFtZSk7\nCiAgICAgICAgZWxzZSBpZiAodGFyZ2V0IGluc3RhbmNlb2YgQ29sdW1uKQog\nICAgICAgICAgICBjb2wuc2V0SWRlbnRpZmllcihEQklkZW50aWZpZXIuY29t\nYmluZShuYW1lLCgoQ29sdW1uKSB0YXJnZXQpLmdldElkZW50aWZpZXIoKS5n\nZXROYW1lKCkpKTsKICAgICAgICBjb3JyZWN0TmFtZShsb2NhbCwgY29sKTsK\nICAgIH0KCiAgICBwdWJsaWMgdm9pZCBwb3B1bGF0ZUNvbHVtbnMoVmFsdWVN\nYXBwaW5nIHZtLCBTdHJpbmcgbmFtZSwgVGFibGUgdGFibGUsCiAgICAgICAg\nQ29sdW1uW10gY29scykgewogICAgICAgIHBvcHVsYXRlQ29sdW1ucyh2bSwg\nREJJZGVudGlmaWVyLm5ld0NvbHVtbihuYW1lKSwgdGFibGUsIGNvbHMpOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHBvcHVsYXRlQ29sdW1ucyhWYWx1ZU1h\ncHBpbmcgdm0sIERCSWRlbnRpZmllciBuYW1lLCBUYWJsZSB0YWJsZSwKICAg\nICAgICBDb2x1bW5bXSBjb2xzKSB7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7\nIGkgPCBjb2xzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICBjb3JyZWN0TmFt\nZSh0YWJsZSwgY29sc1tpXSk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4g\ncG9wdWxhdGVPcmRlckNvbHVtbnMoRmllbGRNYXBwaW5nIGZtLCBUYWJsZSB0\nYWJsZSwKICAgICAgICBDb2x1bW5bXSBjb2xzKSB7CiAgICAgICAgZm9yIChp\nbnQgaSA9IDA7IGkgPCBjb2xzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAg\nIGlmICghREJJZGVudGlmaWVyLmlzTnVsbChfb3JkZXJOYW1lKSAmJiBjb2xz\nLmxlbmd0aCA9PSAxKQogICAgICAgICAgICAgICAgY29sc1tpXS5zZXRJZGVu\ndGlmaWVyKF9vcmRlck5hbWUpOwogICAgICAgICAgICBlbHNlIGlmICghREJJ\nZGVudGlmaWVyLmlzTnVsbChfb3JkZXJOYW1lKSkKICAgICAgICAgICAgICAg\nIGNvbHNbaV0uc2V0SWRlbnRpZmllcihEQklkZW50aWZpZXIuYXBwZW5kKF9v\ncmRlck5hbWUsIEludGVnZXIudG9TdHJpbmcoaSkpKTsKICAgICAgICAgICAg\nY29ycmVjdE5hbWUodGFibGUsIGNvbHNbaV0pOwogICAgICAgIH0KICAgICAg\nICByZXR1cm4gX29yZGVyTGlzdHMgJiYgKEphdmFUeXBlcy5BUlJBWSA9PSBm\nbS5nZXRUeXBlQ29kZSgpCiAgICAgICAgICAgIHx8IExpc3QuY2xhc3MuaXNB\nc3NpZ25hYmxlRnJvbShmbS5nZXRUeXBlKCkpKTsKICAgIH0KCiAgICAvKioK\nICAgICAqIEBkZXByZWNhdGVkCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFu\nIHBvcHVsYXRlTnVsbEluZGljYXRvckNvbHVtbnMoVmFsdWVNYXBwaW5nIHZt\nLCBTdHJpbmcgbmFtZSwKICAgICAgICBUYWJsZSB0YWJsZSwgQ29sdW1uW10g\nY29scykgewogICAgICAgIHJldHVybiBwb3B1bGF0ZU51bGxJbmRpY2F0b3JD\nb2x1bW5zKHZtLCBEQklkZW50aWZpZXIubmV3Q29sdW1uKG5hbWUpLCB0YWJs\nZSwgY29scyk7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gcG9wdWxhdGVO\ndWxsSW5kaWNhdG9yQ29sdW1ucyhWYWx1ZU1hcHBpbmcgdm0sIERCSWRlbnRp\nZmllciBuYW1lLAogICAgICAgIFRhYmxlIHRhYmxlLCBDb2x1bW5bXSBjb2xz\nKSB7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb2xzLmxlbmd0aDsg\naSsrKSB7CiAgICAgICAgICAgIGlmICghREJJZGVudGlmaWVyLmlzTnVsbChf\nbnVsbEluZE5hbWUpICYmIGNvbHMubGVuZ3RoID09IDEpCiAgICAgICAgICAg\nICAgICBjb2xzW2ldLnNldElkZW50aWZpZXIoX251bGxJbmROYW1lKTsKICAg\nICAgICAgICAgZWxzZSBpZiAoIURCSWRlbnRpZmllci5pc051bGwoX251bGxJ\nbmROYW1lKSkKICAgICAgICAgICAgICAgIGNvbHNbaV0uc2V0SWRlbnRpZmll\ncihEQklkZW50aWZpZXIuYXBwZW5kKF9udWxsSW5kTmFtZSwgSW50ZWdlci50\nb1N0cmluZyhpKSkpOwogICAgICAgICAgICBjb3JyZWN0TmFtZSh0YWJsZSwg\nY29sc1tpXSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBfYWRkTnVsbElu\nZDsKICAgIH0KCiAgICBwdWJsaWMgRm9yZWlnbktleSBnZXRKb2luRm9yZWln\nbktleShDbGFzc01hcHBpbmcgY2xzLCBUYWJsZSBsb2NhbCwKICAgICAgICBU\nYWJsZSBmb3JlaWduKSB7CiAgICAgICAgaWYgKF9qb2luRktBY3Rpb24gPT0g\nRm9yZWlnbktleS5BQ1RJT05fTk9ORSkKICAgICAgICAgICAgcmV0dXJuIG51\nbGw7CiAgICAgICAgRm9yZWlnbktleSBmayA9IG5ldyBGb3JlaWduS2V5KCk7\nCiAgICAgICAgZmsuc2V0RGVsZXRlQWN0aW9uKF9qb2luRktBY3Rpb24pOwog\nICAgICAgIGZrLnNldERlZmVycmVkKF9kZWZlcik7CiAgICAgICAgcmV0dXJu\nIGZrOwogICAgfQoKICAgIHB1YmxpYyBGb3JlaWduS2V5IGdldEpvaW5Gb3Jl\naWduS2V5KEZpZWxkTWFwcGluZyBmbSwgVGFibGUgbG9jYWwsCiAgICAgICAg\nVGFibGUgZm9yZWlnbikgewogICAgICAgIGlmIChfam9pbkZLQWN0aW9uID09\nIEZvcmVpZ25LZXkuQUNUSU9OX05PTkUpCiAgICAgICAgICAgIHJldHVybiBu\ndWxsOwogICAgICAgIEZvcmVpZ25LZXkgZmsgPSBuZXcgRm9yZWlnbktleSgp\nOwogICAgICAgIGZrLnNldERlbGV0ZUFjdGlvbihfam9pbkZLQWN0aW9uKTsK\nICAgICAgICBmay5zZXREZWZlcnJlZChfZGVmZXIpOwogICAgICAgIHJldHVy\nbiBmazsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXByZWNhdGVkCiAgICAg\nKi8KICAgIHB1YmxpYyBGb3JlaWduS2V5IGdldEZvcmVpZ25LZXkoVmFsdWVN\nYXBwaW5nIHZtLCBTdHJpbmcgbmFtZSwgVGFibGUgbG9jYWwsCiAgICAgICAg\nVGFibGUgZm9yZWlnbiwgYm9vbGVhbiBpbnZlcnNlKSB7CiAgICAgICAgcmV0\ndXJuIGdldEZvcmVpZ25LZXkodm0sIERCSWRlbnRpZmllci5uZXdGb3JlaWdu\nS2V5KG5hbWUpLCBsb2NhbCwgZm9yZWlnbiwgaW52ZXJzZSk7CiAgICB9CiAg\nICAgICAgCiAgICBwdWJsaWMgRm9yZWlnbktleSBnZXRGb3JlaWduS2V5KFZh\nbHVlTWFwcGluZyB2bSwgREJJZGVudGlmaWVyIG5hbWUsIFRhYmxlIGxvY2Fs\nLAogICAgICAgIFRhYmxlIGZvcmVpZ24sIGJvb2xlYW4gaW52ZXJzZSkgewog\nICAgICAgIGlmIChfZmtBY3Rpb24gPT0gRm9yZWlnbktleS5BQ1RJT05fTk9O\nRSkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgRm9yZWlnbktl\neSBmayA9IG5ldyBGb3JlaWduS2V5KCk7CiAgICAgICAgZmsuc2V0RGVsZXRl\nQWN0aW9uKF9ma0FjdGlvbik7CiAgICAgICAgZmsuc2V0RGVmZXJyZWQoX2Rl\nZmVyKTsKICAgICAgICByZXR1cm4gZms7CiAgICB9CgogICAgcHVibGljIElu\nZGV4IGdldEpvaW5JbmRleChGaWVsZE1hcHBpbmcgZm0sIFRhYmxlIHRhYmxl\nLCBDb2x1bW5bXSBjb2xzKSB7CiAgICAgICAgaWYgKCFfaW5kZXhGSyB8fCBm\nbS5nZXRKb2luRm9yZWlnbktleSgpID09IG51bGwKICAgICAgICAgICAgfHwg\nIWZtLmdldEpvaW5Gb3JlaWduS2V5KCkuaXNMb2dpY2FsKCkpCiAgICAgICAg\nICAgIHJldHVybiBudWxsOwogICAgICAgIGlmIChhcmVBbGxQcmltYXJ5S2V5\nQ29sdW1ucyhjb2xzKSkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CgogICAg\nICAgIEluZGV4IGlkeCA9IG5ldyBJbmRleCgpOwogICAgICAgIGlkeC5zZXRJ\nZGVudGlmaWVyKGdldEluZGV4TmFtZShEQklkZW50aWZpZXIuTlVMTCwgdGFi\nbGUsIGNvbHMpKTsKICAgICAgICByZXR1cm4gaWR4OwogICAgfQoKICAgIC8q\nKgogICAgICogUmV0dXJuIHdoZXRoZXIgYWxsIHRoZSBnaXZlbiBjb2x1bW5z\nIGFyZSBwcmltYXJ5IGtleSBjb2x1bW5zLgogICAgICovCiAgICBwcm90ZWN0\nZWQgYm9vbGVhbiBhcmVBbGxQcmltYXJ5S2V5Q29sdW1ucyhDb2x1bW5bXSBj\nb2xzKSB7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb2xzLmxlbmd0\naDsgaSsrKQogICAgICAgICAgICBpZiAoIWNvbHNbaV0uaXNQcmltYXJ5S2V5\nKCkpCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgcmV0\ndXJuIHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZW5lcmF0ZSBhbiBp\nbmRleCBuYW1lLgogICAgICogQGRlcHJlY2F0ZWQKICAgICAqLwogICAgcHJv\ndGVjdGVkIFN0cmluZyBnZXRJbmRleE5hbWUoU3RyaW5nIG5hbWUsIFRhYmxl\nIHRhYmxlLCBDb2x1bW5bXSBjb2xzKSB7CiAgICAgICAgcmV0dXJuIGdldElu\nZGV4TmFtZShEQklkZW50aWZpZXIubmV3SW5kZXgobmFtZSksIHRhYmxlLCBj\nb2xzKS5nZXROYW1lKCk7CiAgICB9CgogICAgcHJvdGVjdGVkIERCSWRlbnRp\nZmllciBnZXRJbmRleE5hbWUoREJJZGVudGlmaWVyIG5hbWUsIFRhYmxlIHRh\nYmxlLCBDb2x1bW5bXSBjb2xzKSB7CiAgICAgICAgLy8gYWx3YXlzIHVzZSBk\naWN0IGZvciBpbmRleCBuYW1lcyBiZWNhdXNlIG5vIHNwZWMgbWFuZGF0ZXMg\ndGhlbQogICAgICAgIC8vIGJhc2VkIG9uIGRlZmF1bHRzCiAgICAgICAgREJJ\nZGVudGlmaWVyIHNOYW1lID0gbmFtZTsKICAgICAgICBpZiAoREJJZGVudGlm\naWVyLmlzTnVsbChzTmFtZSkpCiAgICAgICAgICAgIHNOYW1lID0gY29sc1sw\nXS5nZXRJZGVudGlmaWVyKCk7CgogICAgICAgIGlmIChfcmVtb3ZlSHVuZ2Fy\naWFuTm90YXRpb24pCiAgICAgICAgICAgIHNOYW1lID0gREJJZGVudGlmaWVy\nLnJlbW92ZUh1bmdhcmlhbk5vdGF0aW9uKHNOYW1lKTsKCiAgICAgICAgcmV0\ndXJuIGRpY3QuZ2V0VmFsaWRJbmRleE5hbWUoc05hbWUsIHRhYmxlKTsKICAg\nIH0KCiAgICAvKioKICAgICAqIEBkZXByZWNhdGVkCiAgICAgKi8KICAgIHB1\nYmxpYyBJbmRleCBnZXRJbmRleChWYWx1ZU1hcHBpbmcgdm0sIFN0cmluZyBu\nYW1lLCBUYWJsZSB0YWJsZSwKICAgICAgICBDb2x1bW5bXSBjb2xzKSB7CiAg\nICAgICAgcmV0dXJuIGdldEluZGV4KHZtLCBEQklkZW50aWZpZXIubmV3SW5k\nZXgobmFtZSksIHRhYmxlLCBjb2xzKTsKICAgIH0KCiAgICBwdWJsaWMgSW5k\nZXggZ2V0SW5kZXgoVmFsdWVNYXBwaW5nIHZtLCBEQklkZW50aWZpZXIgbmFt\nZSwgVGFibGUgdGFibGUsCiAgICAgICAgQ29sdW1uW10gY29scykgewogICAg\nICAgIGlmICghX2luZGV4RksgfHwgdm0uZ2V0Rm9yZWlnbktleSgpID09IG51\nbGwKICAgICAgICAgICAgfHwgIXZtLmdldEZvcmVpZ25LZXkoKS5pc0xvZ2lj\nYWwoKSkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKGFy\nZUFsbFByaW1hcnlLZXlDb2x1bW5zKGNvbHMpKQogICAgICAgICAgICByZXR1\ncm4gbnVsbDsKCiAgICAgICAgSW5kZXggaWR4ID0gbmV3IEluZGV4KCk7CiAg\nICAgICAgaWR4LnNldElkZW50aWZpZXIoZ2V0SW5kZXhOYW1lKG5hbWUsIHRh\nYmxlLCBjb2xzKSk7CiAgICAgICAgcmV0dXJuIGlkeDsKICAgIH0KCiAgICBw\ndWJsaWMgSW5kZXggZ2V0SW5kZXgoVmVyc2lvbiB2ZXJzLCBUYWJsZSB0YWJs\nZSwgQ29sdW1uW10gY29scykgewogICAgICAgIGlmICghX2luZGV4VmVycykK\nICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgSW5kZXggaWR4ID0g\nbmV3IEluZGV4KCk7CiAgICAgICAgaWR4LnNldElkZW50aWZpZXIoZ2V0SW5k\nZXhOYW1lKF92ZXJzTmFtZSwgdGFibGUsIGNvbHMpKTsKICAgICAgICByZXR1\ncm4gaWR4OwogICAgfQoKICAgIHB1YmxpYyBJbmRleCBnZXRJbmRleChEaXNj\ncmltaW5hdG9yIGRpc2MsIFRhYmxlIHRhYmxlLCBDb2x1bW5bXSBjb2xzKSB7\nCiAgICAgICAgaWYgKCFfaW5kZXhEaXNjKQogICAgICAgICAgICByZXR1cm4g\nbnVsbDsKICAgICAgICBJbmRleCBpZHggPSBuZXcgSW5kZXgoKTsKICAgICAg\nICBpZHguc2V0SWRlbnRpZmllcihnZXRJbmRleE5hbWUoX2Rpc2NOYW1lLCB0\nYWJsZSwgY29scykpOwogICAgICAgIHJldHVybiBpZHg7CiAgICB9CgogICAg\ncHVibGljIFVuaXF1ZSBnZXRKb2luVW5pcXVlKEZpZWxkTWFwcGluZyBmbSwg\nVGFibGUgdGFibGUsIENvbHVtbltdIGNvbHMpIHsKICAgICAgICByZXR1cm4g\nbnVsbDsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXByZWNhdGVkCiAgICAg\nKi8KICAgIHB1YmxpYyBVbmlxdWUgZ2V0VW5pcXVlKFZhbHVlTWFwcGluZyB2\nbSwgU3RyaW5nIG5hbWUsIFRhYmxlIHRhYmxlLAogICAgICAgIENvbHVtbltd\nIGNvbHMpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICBwdWJs\naWMgVW5pcXVlIGdldFVuaXF1ZShWYWx1ZU1hcHBpbmcgdm0sIERCSWRlbnRp\nZmllciBuYW1lLCBUYWJsZSB0YWJsZSwKICAgICAgICBDb2x1bW5bXSBjb2xz\nKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBAZGVwcmVjYXRlZAogICAgICovCiAgICBwdWJsaWMgU3RyaW5nIGdldFBy\naW1hcnlLZXlOYW1lKENsYXNzTWFwcGluZyBjbSwgVGFibGUgdGFibGUpIHsK\nICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICBwdWJsaWMgREJJZGVu\ndGlmaWVyIGdldFByaW1hcnlLZXlJZGVudGlmaWVyKENsYXNzTWFwcGluZyBj\nbSwgVGFibGUgdGFibGUpIHsKICAgICAgICByZXR1cm4gREJJZGVudGlmaWVy\nLk5VTEw7CiAgICB9CgogICAgcHVibGljIHZvaWQgaW5zdGFsbFByaW1hcnlL\nZXkoRmllbGRNYXBwaW5nIGZtLCBUYWJsZSB0YWJsZSkgewogICAgfQoKICAg\nIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgIC8vIENvbmZp\nZ3VyYWJsZSBpbXBsZW1lbnRhdGlvbgogICAgLy8vLy8vLy8vLy8vLy8vLy8v\nLy8vLy8vLy8vLy8vLwoKICAgIHB1YmxpYyB2b2lkIHNldENvbmZpZ3VyYXRp\nb24oQ29uZmlndXJhdGlvbiBjb25mKSB7CiAgICAgICAgZGljdCA9ICgoSkRC\nQ0NvbmZpZ3VyYXRpb24pIGNvbmYpLmdldERCRGljdGlvbmFyeUluc3RhbmNl\nKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc3RhcnRDb25maWd1cmF0aW9u\nKCkgewogICAgfQoKICAgIHB1YmxpYyB2b2lkIGVuZENvbmZpZ3VyYXRpb24o\nKSB7CiAgICB9Cn0K\n","encoding":"base64"}

