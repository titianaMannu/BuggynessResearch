{"sha":"3a0654926648111e56a3655c24ff68d334c00bed","node_id":"MDQ6QmxvYjIwNjM2NDozYTA2NTQ5MjY2NDgxMTFlNTZhMzY1NWMyNGZmNjhkMzM0YzAwYmVk","size":3742,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/3a0654926648111e56a3655c24ff68d334c00bed","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLnN0cmF0czsK\nCmltcG9ydCBqYXZhLmxhbmcucmVmbGVjdC5NZXRob2Q7CgppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMuaWRlbnRpZmllci5EQklkZW50aWZpZXI7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuSkRCQ1N0\nb3JlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5WYWx1\nZU1hcHBpbmc7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hl\nbWEuQ29sdW1uOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2No\nZW1hLkNvbHVtbklPOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMu\nc3FsLkRCRGljdGlvbmFyeTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5t\nZXRhLkphdmFUeXBlczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGls\nLk1ldGFEYXRhRXhjZXB0aW9uOwoKLyoqCiAqIFZhbHVlIGhhbmRsZXIgZm9y\nIEpESzEuNSBlbnVtIGZpZWxkIHR5cGVzLgogKgogKiBAbm9qYXZhZG9jCiAq\nLwpwdWJsaWMgY2xhc3MgRW51bVZhbHVlSGFuZGxlcgogICAgZXh0ZW5kcyBB\nYnN0cmFjdFZhbHVlSGFuZGxlciB7CgogICAgcHJpdmF0ZSBFbnVtW10gX3Zh\nbHMgPSBudWxsOwogICAgcHJpdmF0ZSBib29sZWFuIF9vcmRpbmFsID0gZmFs\nc2U7CgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRvIHN0b3JlIHRoZSBlbnVt\nIHZhbHVlIGFzIGl0cyBvcmRpbmFsLgogICAgICovCiAgICBwdWJsaWMgYm9v\nbGVhbiBnZXRTdG9yZU9yZGluYWwoKSB7CiAgICAgICAgcmV0dXJuIF9vcmRp\nbmFsOwogICAgfQoKICAgIC8qKgogICAgICogV2hldGhlciB0byBzdG9yZSB0\naGUgZW51bSB2YWx1ZSBhcyBpdHMgb3JkaW5hbC4KICAgICAqLwogICAgcHVi\nbGljIHZvaWQgc2V0U3RvcmVPcmRpbmFsKGJvb2xlYW4gb3JkaW5hbCkgewog\nICAgICAgIF9vcmRpbmFsID0gb3JkaW5hbDsKICAgIH0KCiAgICAvKioKICAg\nICAqIEBkZXByZWNhdGVkCiAgICAgKi8KICAgIHB1YmxpYyBDb2x1bW5bXSBt\nYXAoVmFsdWVNYXBwaW5nIHZtLCBTdHJpbmcgbmFtZSwgQ29sdW1uSU8gaW8s\nCiAgICAgICAgYm9vbGVhbiBhZGFwdCkgewogICAgICAgIERCRGljdGlvbmFy\neSBkaWN0ID0gdm0uZ2V0TWFwcGluZ1JlcG9zaXRvcnkoKS5nZXREQkRpY3Rp\nb25hcnkoKTsKICAgICAgICBEQklkZW50aWZpZXIgY29sTmFtZSA9IERCSWRl\nbnRpZmllci5uZXdDb2x1bW4obmFtZSwgZGljdCAhPSBudWxsID8gZGljdC5k\nZWxpbWl0QWxsKCkgOiBmYWxzZSk7CiAgICAgICAgcmV0dXJuIG1hcCh2bSwg\nY29sTmFtZSwgaW8sIGFkYXB0KTsKICAgIH0KICAgIAogICAgcHVibGljIENv\nbHVtbltdIG1hcChWYWx1ZU1hcHBpbmcgdm0sIERCSWRlbnRpZmllciBuYW1l\nLCBDb2x1bW5JTyBpbywKICAgICAgICBib29sZWFuIGFkYXB0KSB7CiAgICAg\nICAgLy8gYWxsIGVudW0gY2xhc3NlcyBoYXZlIGEgc3RhdGljIG1ldGhvZCBj\nYWxsZWQgJ3ZhbHVlcygpJwogICAgICAgIC8vIHRoYXQgcmV0dXJucyBhbiBh\ncnJheSBvZiBhbGwgdGhlIGVudW0gdmFsdWVzCiAgICAgICAgdHJ5IHsKICAg\nICAgICAgICAgTWV0aG9kIG0gPSB2bS5nZXRUeXBlKCkuZ2V0TWV0aG9kKCJ2\nYWx1ZXMiLCAoQ2xhc3NbXSkgbnVsbCk7CiAgICAgICAgICAgIF92YWxzID0g\nKEVudW1bXSkgbS5pbnZva2UobnVsbCwgKE9iamVjdFtdKSBudWxsKTsKICAg\nICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICB0aHJv\ndyBuZXcgTWV0YURhdGFFeGNlcHRpb24oKS5zZXRDYXVzZShlKTsKICAgICAg\nICB9CgogICAgICAgIENvbHVtbiBjb2wgPSBuZXcgQ29sdW1uKCk7CiAgICAg\nICAgY29sLnNldElkZW50aWZpZXIobmFtZSk7CiAgICAgICAgaWYgKF9vcmRp\nbmFsKQogICAgICAgICAgICBjb2wuc2V0SmF2YVR5cGUoSmF2YVR5cGVzLlNI\nT1JUKTsKICAgICAgICBlbHNlIHsKICAgICAgICAgICAgLy8gbG9vayBmb3Ig\ndGhlIGxvbmdlc3QgZW51bSB2YWx1ZSBuYW1lOyB1c2UgMjAgYXMgbWluIGxl\nbmd0aCB0bwogICAgICAgICAgICAvLyBsZWF2ZSByb29tIGZvciBmdXR1cmUg\nbG9uZyBuYW1lcwogICAgICAgICAgICBpbnQgbGVuID0gMjA7CiAgICAgICAg\nICAgIGZvciAoaW50IGkgPSAwOyBpIDwgX3ZhbHMubGVuZ3RoOyBpKyspCiAg\nICAgICAgICAgICAgICBsZW4gPSBNYXRoLm1heChfdmFsc1tpXS5uYW1lKCku\nbGVuZ3RoKCksIGxlbik7CgogICAgICAgICAgICBjb2wuc2V0SmF2YVR5cGUo\nSmF2YVR5cGVzLlNUUklORyk7CiAgICAgICAgICAgIGNvbC5zZXRTaXplKGxl\nbik7CiAgICAgICAgfQogICAgICAgIHJldHVybiBuZXcgQ29sdW1uW117IGNv\nbCB9OwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGlzVmVyc2lvbmFibGUo\nKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgcHVibGljIE9i\namVjdCB0b0RhdGFTdG9yZVZhbHVlKFZhbHVlTWFwcGluZyB2bSwgT2JqZWN0\nIHZhbCwKICAgICAgICBKREJDU3RvcmUgc3RvcmUpIHsKICAgICAgICBpZiAo\ndmFsID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAg\nIGlmIChfb3JkaW5hbCkKICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnRlZ2Vy\nKCgoRW51bSkgdmFsKS5vcmRpbmFsKCkpOwogICAgICAgIHJldHVybiAoKEVu\ndW0pIHZhbCkubmFtZSgpOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgdG9P\nYmplY3RWYWx1ZShWYWx1ZU1hcHBpbmcgdm0sIE9iamVjdCB2YWwpIHsKICAg\nICAgICBpZiAodmFsID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBudWxs\nOwogICAgICAgIGlmIChfb3JkaW5hbCkKICAgICAgICAgICAgcmV0dXJuIF92\nYWxzWygoTnVtYmVyKSB2YWwpLmludFZhbHVlKCldOwogICAgICAgIHJldHVy\nbiBFbnVtLnZhbHVlT2Yodm0uZ2V0VHlwZSgpLCAoU3RyaW5nKSB2YWwpOwog\nICAgfQp9Cg==\n","encoding":"base64"}

