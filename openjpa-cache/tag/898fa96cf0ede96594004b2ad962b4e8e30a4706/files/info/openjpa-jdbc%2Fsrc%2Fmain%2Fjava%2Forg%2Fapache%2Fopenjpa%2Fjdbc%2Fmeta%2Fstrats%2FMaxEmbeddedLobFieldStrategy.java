{"sha":"cc9d8c7c5e64a7476667c71c0c8af9635aec0f6f","node_id":"MDQ6QmxvYjIwNjM2NDpjYzlkOGM3YzVlNjRhNzQ3NjY2N2M3MWMwYzhhZjk2MzVhZWMwZjZm","size":9207,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/cc9d8c7c5e64a7476667c71c0c8af9635aec0f6f","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLnN0cmF0czsK\nCmltcG9ydCBqYXZhLnNxbC5Db25uZWN0aW9uOwppbXBvcnQgamF2YS5zcWwu\nUHJlcGFyZWRTdGF0ZW1lbnQ7CmltcG9ydCBqYXZhLnNxbC5SZXN1bHRTZXQ7\nCmltcG9ydCBqYXZhLnNxbC5TUUxFeGNlcHRpb247CgppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMuaWRlbnRpZmllci5EQklkZW50aWZpZXI7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuSkRCQ0ZldGNo\nQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLmtlcm5lbC5KREJDU3RvcmU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5tZXRhLkphdmFTUUxUeXBlczsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLm1ldGEuVmFsdWVNYXBwaW5nSW5mbzsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5Db2x1bW47CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuREJEaWN0aW9uYXJ5OwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLkpvaW5zOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlJlc3VsdDsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5qZGJjLnNxbC5Sb3c7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEuamRiYy5zcWwuUm93TWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLnNxbC5TUUxCdWZmZXI7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEuamRiYy5zcWwuU2VsZWN0OwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmtlcm5lbC5PcGVuSlBBU3RhdGVNYW5hZ2VyOwppbXBvcnQg\nb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuSmF2YVR5cGVzOwoKLyoqCiAqIEJh\nc2UgY2xhc3MgZm9yIExPQnMgb24gZGF0YWJhc2VzIHRoYXQgbGltaXQgdGhl\nIG1heCBlbWJlZGRlZCBMT0Igc2l6ZS4KICoKICogQGF1dGhvciBBYmUgV2hp\ndGUKICogQHNpbmNlIDAuNC4wCiAqLwphYnN0cmFjdCBjbGFzcyBNYXhFbWJl\nZGRlZExvYkZpZWxkU3RyYXRlZ3kKICAgIGV4dGVuZHMgQWJzdHJhY3RGaWVs\nZFN0cmF0ZWd5IHsKCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgZXhwZWN0\nZWQgdHlwZSBvZiB0aGUgZmllbGQgZnJvbSB7QGxpbmsgSmF2YVR5cGVzfSBv\ncgogICAgICoge0BsaW5rIEphdmFTUUxUeXBlc30uCiAgICAgKi8KICAgIHBy\nb3RlY3RlZCBhYnN0cmFjdCBpbnQgZ2V0RXhwZWN0ZWRKYXZhVHlwZSgpOwoK\nICAgIC8qKgogICAgICogU2V0IHRoZSB2YWx1ZSBvZiB0aGUgb3duaW5nIGZp\nZWxkIGludG8gdGhlIGdpdmVuIHJvdy4KICAgICAqLwogICAgcHJvdGVjdGVk\nIGFic3RyYWN0IHZvaWQgdXBkYXRlKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20s\nIFJvdyByb3cpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbjsKCiAgICAv\nKioKICAgICAqIFJldHVybiB3aGV0aGVyIHRoaXMgaXMgYSBjdXN0b20gaW5z\nZXJ0L3VwZGF0ZS4KICAgICAqLwogICAgcHJvdGVjdGVkIGFic3RyYWN0IEJv\nb2xlYW4gaXNDdXN0b20oT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwKICAgICAg\nICBKREJDU3RvcmUgc3RvcmUpOwoKICAgIC8qKgogICAgICogU2V0IHRoZSBk\nYXRhIGZyb20gdGhlIGdpdmVuIHN0YXRlIG1hbmFnZXIgaW50byB0aGUgcmVz\ndWx0IHNldC4KICAgICAqLwogICAgcHJvdGVjdGVkIGFic3RyYWN0IHZvaWQg\ncHV0RGF0YShPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBSZXN1bHRTZXQgcnMs\nCiAgICAgICAgREJEaWN0aW9uYXJ5IGRpY3QpCiAgICAgICAgdGhyb3dzIFNR\nTEV4Y2VwdGlvbjsKCiAgICBwdWJsaWMgdm9pZCBtYXAoYm9vbGVhbiBhZGFw\ndCkgewogICAgICAgIGFzc2VydE5vdE1hcHBlZEJ5KCk7CgogICAgICAgIC8v\nIG1hcCBqb2luIGtleSwgaWYgYW55CiAgICAgICAgZmllbGQubWFwSm9pbihh\nZGFwdCwgZmFsc2UpOwogICAgICAgIGZpZWxkLmdldEtleU1hcHBpbmcoKS5n\nZXRWYWx1ZUluZm8oKS5hc3NlcnROb1NjaGVtYUNvbXBvbmVudHMKICAgICAg\nICAgICAgKGZpZWxkLmdldEtleSgpLCAhYWRhcHQpOwogICAgICAgIGZpZWxk\nLmdldEVsZW1lbnRNYXBwaW5nKCkuZ2V0VmFsdWVJbmZvKCkuYXNzZXJ0Tm9T\nY2hlbWFDb21wb25lbnRzCiAgICAgICAgICAgIChmaWVsZC5nZXRFbGVtZW50\nKCksICFhZGFwdCk7CgogICAgICAgIFZhbHVlTWFwcGluZ0luZm8gdmluZm8g\nPSBmaWVsZC5nZXRWYWx1ZUluZm8oKTsKICAgICAgICB2aW5mby5hc3NlcnRO\nb0pvaW4oZmllbGQsIHRydWUpOwogICAgICAgIHZpbmZvLmFzc2VydE5vRm9y\nZWlnbktleShmaWVsZCwgIWFkYXB0KTsKCiAgICAgICAgREJEaWN0aW9uYXJ5\nIGRpY3QgPSBmaWVsZC5nZXRNYXBwaW5nUmVwb3NpdG9yeSgpLmdldERCRGlj\ndGlvbmFyeSgpOwogICAgICAgIERCSWRlbnRpZmllciBmaWVsZE5hbWUgPSBE\nQklkZW50aWZpZXIubmV3Q29sdW1uKGZpZWxkLmdldE5hbWUoKSwgZGljdCAh\nPSBudWxsID8gZGljdC5kZWxpbWl0QWxsKCkgOiBmYWxzZSk7CgogICAgICAg\nIC8vIGdldCB2YWx1ZSBjb2x1bW5zCiAgICAgICAgQ29sdW1uIHRtcENvbCA9\nIG5ldyBDb2x1bW4oKTsKICAgICAgICB0bXBDb2wuc2V0SWRlbnRpZmllcihm\naWVsZE5hbWUpOwogICAgICAgIHRtcENvbC5zZXRKYXZhVHlwZShnZXRFeHBl\nY3RlZEphdmFUeXBlKCkpOwogICAgICAgIHRtcENvbC5zZXRTaXplKC0xKTsK\nICAgICAgICBDb2x1bW5bXSBjb2xzID0gdmluZm8uZ2V0Q29sdW1ucyhmaWVs\nZCwgZmllbGROYW1lLAogICAgICAgICAgICBuZXcgQ29sdW1uW117IHRtcENv\nbCB9LCBmaWVsZC5nZXRUYWJsZSgpLCBhZGFwdCk7CgogICAgICAgIGZpZWxk\nLnNldENvbHVtbnMoY29scyk7CiAgICAgICAgZmllbGQuc2V0Q29sdW1uSU8o\ndmluZm8uZ2V0Q29sdW1uSU8oKSk7CiAgICAgICAgZmllbGQubWFwQ29uc3Ry\nYWludHMoZmllbGROYW1lLCBhZGFwdCk7CiAgICAgICAgZmllbGQubWFwUHJp\nbWFyeUtleShhZGFwdCk7CiAgICB9CgogICAgcHVibGljIEJvb2xlYW4gaXND\ndXN0b21JbnNlcnQoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgSkRCQ1N0b3Jl\nIHN0b3JlKSB7CiAgICAgICAgaWYgKCFmaWVsZC5nZXRDb2x1bW5JTygpLmlz\nSW5zZXJ0YWJsZSgwLCBmYWxzZSkpCiAgICAgICAgICAgIHJldHVybiBCb29s\nZWFuLkZBTFNFOwogICAgICAgIHJldHVybiBpc0N1c3RvbShzbSwgc3RvcmUp\nOwogICAgfQoKICAgIHB1YmxpYyBCb29sZWFuIGlzQ3VzdG9tVXBkYXRlKE9w\nZW5KUEFTdGF0ZU1hbmFnZXIgc20sIEpEQkNTdG9yZSBzdG9yZSkgewogICAg\nICAgIGlmICghZmllbGQuZ2V0Q29sdW1uSU8oKS5pc1VwZGF0YWJsZSgwLCBm\nYWxzZSkpCiAgICAgICAgICAgIHJldHVybiBCb29sZWFuLkZBTFNFOwogICAg\nICAgIHJldHVybiBpc0N1c3RvbShzbSwgc3RvcmUpOwogICAgfQoKICAgIHB1\nYmxpYyB2b2lkIGluc2VydChPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBKREJD\nU3RvcmUgc3RvcmUsIFJvd01hbmFnZXIgcm0pCiAgICAgICAgdGhyb3dzIFNR\nTEV4Y2VwdGlvbiB7CiAgICAgICAgaWYgKCFmaWVsZC5nZXRDb2x1bW5JTygp\nLmlzSW5zZXJ0YWJsZSgwLCBmYWxzZSkpCiAgICAgICAgICAgIHJldHVybjsK\nICAgICAgICBSb3cgcm93ID0gZmllbGQuZ2V0Um93KHNtLCBzdG9yZSwgcm0s\nIFJvdy5BQ1RJT05fSU5TRVJUKTsKICAgICAgICBpZiAocm93ICE9IG51bGwp\nCiAgICAgICAgICAgIHVwZGF0ZShzbSwgcm93KTsKICAgIH0KCiAgICBwdWJs\naWMgdm9pZCB1cGRhdGUoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgSkRCQ1N0\nb3JlIHN0b3JlLCBSb3dNYW5hZ2VyIHJtKQogICAgICAgIHRocm93cyBTUUxF\neGNlcHRpb24gewogICAgICAgIGlmICghZmllbGQuZ2V0Q29sdW1uSU8oKS5p\nc1VwZGF0YWJsZSgwLCBmYWxzZSkpCiAgICAgICAgICAgIHJldHVybjsKICAg\nICAgICBSb3cgcm93ID0gZmllbGQuZ2V0Um93KHNtLCBzdG9yZSwgcm0sIFJv\ndy5BQ1RJT05fVVBEQVRFKTsKICAgICAgICBpZiAocm93ICE9IG51bGwpCiAg\nICAgICAgICAgIHVwZGF0ZShzbSwgcm93KTsKICAgIH0KCiAgICBwdWJsaWMg\ndm9pZCBkZWxldGUoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgSkRCQ1N0b3Jl\nIHN0b3JlLCBSb3dNYW5hZ2VyIHJtKQogICAgICAgIHRocm93cyBTUUxFeGNl\ncHRpb24gewogICAgICAgIGZpZWxkLmRlbGV0ZVJvdyhzbSwgc3RvcmUsIHJt\nKTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBjdXN0b21JbnNlcnQoT3BlbkpQ\nQVN0YXRlTWFuYWdlciBzbSwgSkRCQ1N0b3JlIHN0b3JlKQogICAgICAgIHRo\ncm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIGN1c3RvbVVwZGF0ZShzbSwg\nc3RvcmUpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGN1c3RvbVVwZGF0ZShP\ncGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBKREJDU3RvcmUgc3RvcmUpCiAgICAg\nICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAgSkRCQ0ZldGNoQ29u\nZmlndXJhdGlvbiBmZXRjaCA9IHN0b3JlLmdldEZldGNoQ29uZmlndXJhdGlv\nbigpOwogICAgICAgIC8vIHNlbGVjdCBleGlzdGluZyB2YWx1ZSBmb3IgdXBk\nYXRlCiAgICAgICAgQ29sdW1uIGNvbCA9IGZpZWxkLmdldENvbHVtbnMoKVsw\nXTsKICAgICAgICBTZWxlY3Qgc2VsID0gc3RvcmUuZ2V0U1FMRmFjdG9yeSgp\nLm5ld1NlbGVjdCgpOwogICAgICAgIHNlbC5zZWxlY3QoY29sKTsKICAgICAg\nICBmaWVsZC53aGVyZVByaW1hcnlLZXkoc2VsLCBzbSwgc3RvcmUpOwogICAg\nICAgIFNRTEJ1ZmZlciBzcWwgPSBzZWwudG9TZWxlY3QodHJ1ZSwgZmV0Y2gp\nOwoKICAgICAgICBDb25uZWN0aW9uIGNvbm4gPSBzdG9yZS5nZXRDb25uZWN0\naW9uKCk7CiAgICAgICAgREJEaWN0aW9uYXJ5IGRpY3QgPSBzdG9yZS5nZXRE\nQkRpY3Rpb25hcnkoKTsKICAgICAgICBQcmVwYXJlZFN0YXRlbWVudCBzdG1u\ndCA9IG51bGw7CiAgICAgICAgUmVzdWx0U2V0IHJzID0gbnVsbDsKICAgICAg\nICB0cnkgewogICAgICAgICAgICBzdG1udCA9IHNxbC5wcmVwYXJlU3RhdGVt\nZW50KGNvbm4sCiAgICAgICAgICAgICAgICBSZXN1bHRTZXQuVFlQRV9TQ1JP\nTExfSU5TRU5TSVRJVkUsCiAgICAgICAgICAgICAgICBSZXN1bHRTZXQuQ09O\nQ1VSX1VQREFUQUJMRSk7CiAgICAgICAgICAgIGRpY3Quc2V0VGltZW91dHMo\nc3RtbnQsIGZldGNoLCB0cnVlKTsKICAgICAgICAgICAgcnMgPSBzdG1udC5l\neGVjdXRlUXVlcnkoKTsKICAgICAgICAgICAgcnMubmV4dCgpOwoKICAgICAg\nICAgICAgcHV0RGF0YShzbSwgcnMsIHN0b3JlLmdldERCRGljdGlvbmFyeSgp\nKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICBpZiAocnMgIT0g\nbnVsbCkKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAg\nICAgcnMuY2xvc2UoKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKFNRTEV4\nY2VwdGlvbiBzZSkgewogICAgICAgICAgICAgICAgfQogICAgICAgICAgICBp\nZiAoc3RtbnQgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAg\nICAgICAgICAgICAgICAgc3RtbnQuY2xvc2UoKTsKICAgICAgICAgICAgICAg\nIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBzZSkgewogICAgICAgICAgICAgICAg\nfQogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29ubi5jbG9z\nZSgpOwogICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gc2UpIHsK\nICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgaW50\nIHN1cHBvcnRzU2VsZWN0KFNlbGVjdCBzZWwsIGludCB0eXBlLCBPcGVuSlBB\nU3RhdGVNYW5hZ2VyIHNtLAogICAgICAgIEpEQkNTdG9yZSBzdG9yZSwgSkRC\nQ0ZldGNoQ29uZmlndXJhdGlvbiBmZXRjaCkgewogICAgICAgIGlmICh0eXBl\nID09IFNlbGVjdC5UWVBFX0pPSU5MRVNTICYmIHNlbC5pc1NlbGVjdGVkKGZp\nZWxkLmdldFRhYmxlKCkpKQogICAgICAgICAgICByZXR1cm4gMTsKICAgICAg\nICByZXR1cm4gMDsKICAgIH0KCiAgICBwdWJsaWMgaW50IHNlbGVjdChTZWxl\nY3Qgc2VsLCBPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBKREJDU3RvcmUgc3Rv\ncmUsCiAgICAgICAgSkRCQ0ZldGNoQ29uZmlndXJhdGlvbiBmZXRjaCwgaW50\nIGVhZ2VyTW9kZSkgewogICAgICAgIGlmIChzZWwuaXNEaXN0aW5jdCgpIHx8\nIAogICAgICAgICAgICBlYWdlck1vZGUgPT0gSkRCQ0ZldGNoQ29uZmlndXJh\ndGlvbi5FQUdFUl9OT05FKQogICAgICAgICAgICByZXR1cm4gLTE7CiAgICAg\nICAgc2VsLnNlbGVjdChmaWVsZC5nZXRDb2x1bW5zKClbMF0sIGZpZWxkLmpv\naW4oc2VsKSk7CiAgICAgICAgcmV0dXJuIDE7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgbG9hZChPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLCBKREJDU3RvcmUg\nc3RvcmUsCiAgICAgICAgSkRCQ0ZldGNoQ29uZmlndXJhdGlvbiBmZXRjaCwg\nUmVzdWx0IHJlcykKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAg\nICAgICBDb2x1bW4gY29sID0gZmllbGQuZ2V0Q29sdW1ucygpWzBdOwogICAg\nICAgIGlmIChyZXMuY29udGFpbnMoY29sKSkKICAgICAgICAgICAgc20uc3Rv\ncmUoZmllbGQuZ2V0SW5kZXgoKSwgbG9hZChjb2wsIHJlcywgbnVsbCkpOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIGxvYWQoT3BlbkpQQVN0YXRlTWFuYWdl\nciBzbSwgSkRCQ1N0b3JlIHN0b3JlLAogICAgICAgIEpEQkNGZXRjaENvbmZp\nZ3VyYXRpb24gZmV0Y2gpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7\nCiAgICAgICAgQ29sdW1uIGNvbCA9IGZpZWxkLmdldENvbHVtbnMoKVswXTsK\nICAgICAgICBTZWxlY3Qgc2VsID0gc3RvcmUuZ2V0U1FMRmFjdG9yeSgpLm5l\nd1NlbGVjdCgpOwogICAgICAgIHNlbC5zZWxlY3QoY29sKTsKICAgICAgICBm\naWVsZC53aGVyZVByaW1hcnlLZXkoc2VsLCBzbSwgc3RvcmUpOwoKICAgICAg\nICBSZXN1bHQgcmVzID0gc2VsLmV4ZWN1dGUoc3RvcmUsIGZldGNoKTsKICAg\nICAgICBPYmplY3QgdmFsID0gbnVsbDsKICAgICAgICB0cnkgewogICAgICAg\nICAgICBpZiAocmVzLm5leHQoKSkKICAgICAgICAgICAgICAgIHZhbCA9IGxv\nYWQoY29sLCByZXMsIG51bGwpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAg\nICAgICAgIHJlcy5jbG9zZSgpOwogICAgICAgIH0KICAgICAgICBzbS5zdG9y\nZShmaWVsZC5nZXRJbmRleCgpLCB2YWwpOwogICAgfQoKICAgIC8qKgogICAg\nICogTG9hZCB0aGlzIHZhbHVlIGZyb20gdGhlIGdpdmVuIHJlc3VsdC4KICAg\nICAqLwogICAgcHJvdGVjdGVkIE9iamVjdCBsb2FkKENvbHVtbiBjb2wsIFJl\nc3VsdCByZXMsIEpvaW5zIGpvaW5zKQogICAgICAgIHRocm93cyBTUUxFeGNl\ncHRpb24gewogICAgICAgIHJldHVybiByZXMuZ2V0T2JqZWN0KGNvbCwgbnVs\nbCwgam9pbnMpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGFwcGVuZElzTnVs\nbChTUUxCdWZmZXIgc3FsLCBTZWxlY3Qgc2VsLCBKb2lucyBqb2lucykgewog\nICAgICAgIGpvaW5zID0gam9pbihqb2lucywgZmFsc2UpOwogICAgICAgIHNx\nbC5hcHBlbmQoc2VsLmdldENvbHVtbkFsaWFzKGZpZWxkLmdldENvbHVtbnMo\nKVswXSwgam9pbnMpKS4KICAgICAgICAgICAgYXBwZW5kKCIgSVMgIikuYXBw\nZW5kVmFsdWUobnVsbCwgZmllbGQuZ2V0Q29sdW1ucygpWzBdKTsKICAgIH0K\nCiAgICBwdWJsaWMgdm9pZCBhcHBlbmRJc05vdE51bGwoU1FMQnVmZmVyIHNx\nbCwgU2VsZWN0IHNlbCwgSm9pbnMgam9pbnMpIHsKICAgICAgICBqb2lucyA9\nIGpvaW4oam9pbnMsIGZhbHNlKTsKICAgICAgICBzcWwuYXBwZW5kKHNlbC5n\nZXRDb2x1bW5BbGlhcyhmaWVsZC5nZXRDb2x1bW5zKClbMF0sIGpvaW5zKSku\nCiAgICAgICAgICAgIGFwcGVuZCgiIElTIE5PVCAiKS5hcHBlbmRWYWx1ZShu\ndWxsLCBmaWVsZC5nZXRDb2x1bW5zKClbMF0pOwogICAgfQoKICAgIHB1Ymxp\nYyBKb2lucyBqb2luKEpvaW5zIGpvaW5zLCBib29sZWFuIGZvcmNlT3V0ZXIp\nIHsKICAgICAgICByZXR1cm4gZmllbGQuam9pbihqb2lucywgZm9yY2VPdXRl\nciwgZmFsc2UpOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgbG9hZFByb2pl\nY3Rpb24oSkRCQ1N0b3JlIHN0b3JlLCBKREJDRmV0Y2hDb25maWd1cmF0aW9u\nIGZldGNoLAogICAgICAgIFJlc3VsdCByZXMsIEpvaW5zIGpvaW5zKQogICAg\nICAgIHRocm93cyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBsb2Fk\nKGZpZWxkLmdldENvbHVtbnMoKVswXSwgcmVzLCBqb2lucyk7CiAgICB9Cgog\nICAgcHVibGljIGJvb2xlYW4gaXNWZXJzaW9uYWJsZSgpIHsKICAgICAgICBy\nZXR1cm4gZmFsc2U7CiAgICB9CgogICAgcHVibGljIHZvaWQgd2hlcmUoT3Bl\nbkpQQVN0YXRlTWFuYWdlciBzbSwgSkRCQ1N0b3JlIHN0b3JlLCBSb3dNYW5h\nZ2VyIHJtLAogICAgICAgIE9iamVjdCBwcmV2VmFsdWUpCiAgICAgICAgdGhy\nb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICB9Cn0K\n","encoding":"base64"}

