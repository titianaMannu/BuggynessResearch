{"sha":"3e7c39ff360a0f01157fa9294cb622a6104470d5","node_id":"MDQ6QmxvYjIwNjM2NDozZTdjMzlmZjM2MGEwZjAxMTU3ZmE5Mjk0Y2I2MjJhNjEwNDQ3MGQ1","size":8575,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/3e7c39ff360a0f01157fa9294cb622a6104470d5","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLnN0cmF0czsK\nCmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKCmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5pZGVudGlmaWVyLkRCSWRlbnRpZmllcjsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5qZGJjLmtlcm5lbC5KREJDU3RvcmU7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLkNsYXNzTWFwcGluZzsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLm1ldGEuRmllbGRNYXBw\naW5nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5GaWVs\nZFN0cmF0ZWd5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0\nYS5KYXZhU1FMVHlwZXM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRi\nYy5tZXRhLlZhbHVlTWFwcGluZzsKaW1wb3J0IG9yZy5hcGFjaGUub3Blbmpw\nYS5qZGJjLm1ldGEuVmFsdWVNYXBwaW5nSW5mbzsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLnNjaGVtYS5Db2x1bW47CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEua2VybmVsLkRldGFjaGVkVmFsdWVTdGF0ZU1hbmFnZXI7\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLk9wZW5KUEFTdGF0\nZU1hbmFnZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEua2VybmVsLlN0\nb3JlQ29udGV4dDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRp\nbC5Mb2NhbGl6ZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubWV0YS5K\nYXZhVHlwZXM7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5NZXRh\nRGF0YUV4Y2VwdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS51dGls\nLlVzZXJFeGNlcHRpb247CgovKioKICogSGVscGVyIG1ldGhvZHMgZm9yIHJl\nbGF0aW9uIG1hcHBpbmdzLgogKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKi8K\ncHVibGljIGNsYXNzIFJlbGF0aW9uU3RyYXRlZ2llcyB7CgogICAgcHJpdmF0\nZSBzdGF0aWMgZmluYWwgTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6ZXIuZm9y\nUGFja2FnZQogICAgICAgIChSZWxhdGlvblN0cmF0ZWdpZXMuY2xhc3MpOwoK\nICAgIC8qKgogICAgICogUmV0dXJuIGFuIGV4Y2VwdGlvbiBpbmRpY2F0aW5n\nIHRoYXQgd2UgY2Fubm90IGpvaW4gdG8gdGhlIGdpdmVuIHJlbGF0aW9uLgog\nICAgICovCiAgICBwdWJsaWMgc3RhdGljIE1ldGFEYXRhRXhjZXB0aW9uIHVu\nam9pbmFibGUoVmFsdWVNYXBwaW5nIHZtKSB7CiAgICAgICAgcmV0dXJuIG5l\ndyBNZXRhRGF0YUV4Y2VwdGlvbihfbG9jLmdldCgiY2FudC1qb2luIiwgdm0p\nKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiBhbiBleGNlcHRpb24g\naW5kaWNhdGluZyB0aGF0IHRoZSByZWxhdGlvbiBjYW5ub3QgYmUgbG9hZGVk\nCiAgICAgKiBiZWNhdXNlIGl0IGhhcyBpbmRlcGVuZGVudCBzdWJjbGFzc2Vz\nIGFuZCBkb2VzIG5vdCByZXByZXNlbnQgYSBmdWxsIG9pZC4KICAgICAqLwog\nICAgcHVibGljIHN0YXRpYyBNZXRhRGF0YUV4Y2VwdGlvbiB1bmxvYWRhYmxl\nKFZhbHVlTWFwcGluZyB2bSkgewogICAgICAgIHJldHVybiBuZXcgTWV0YURh\ndGFFeGNlcHRpb24oX2xvYy5nZXQoImNhbnQtbG9hZCIsIHZtKSk7CiAgICB9\nCgogICAgLyoqCiAgICAgKiBSZXR1cm4gYW4gZXhjZXB0aW9uIGluZGljYXRp\nbmcgdGhhdCB0aGUgcmVsYXRpb24gaXMgaW52YWxpZAogICAgICogYmVjYXVz\nZSBpdCBoYXMgaXMgYmFzZWQgb24gYW4gaW52ZXJzZSBmb3JlaWduIGtleSBh\nbmQgaGFzIGluZGVwZW5kZW50CiAgICAgKiBzdWJjbGFzc2VzLgogICAgICov\nCiAgICBwdWJsaWMgc3RhdGljIE1ldGFEYXRhRXhjZXB0aW9uIHVuaW52ZXJz\nYWJsZShWYWx1ZU1hcHBpbmcgdm0pIHsKICAgICAgICByZXR1cm4gbmV3IE1l\ndGFEYXRhRXhjZXB0aW9uKF9sb2MuZ2V0KCJjYW50LWludmVyc2UiLCB2bSkp\nOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBnaXZlbiBvYmpl\nY3QgYXMgaXRzIGZvcmVpZ24ga2V5IHZhbHVlcy4KICAgICAqCiAgICAgKiBA\nc2VlIEZpZWxkU3RyYXRlZ3kjdG9EYXRhU3RvcmVWYWx1ZQogICAgICovCiAg\nICBwdWJsaWMgc3RhdGljIE9iamVjdCB0b0RhdGFTdG9yZVZhbHVlKFZhbHVl\nTWFwcGluZyB2bSwgT2JqZWN0IHZhbCwKICAgICAgICBKREJDU3RvcmUgc3Rv\ncmUpIHsKICAgICAgICBDbGFzc01hcHBpbmcgcmVsOwogICAgICAgIGlmICh2\nYWwgPT0gbnVsbCkgewogICAgICAgICAgICBDbGFzc01hcHBpbmdbXSBjbHNz\nID0gdm0uZ2V0SW5kZXBlbmRlbnRUeXBlTWFwcGluZ3MoKTsKICAgICAgICAg\nICAgcmVsID0gKGNsc3MubGVuZ3RoID4gMCkgPyBjbHNzWzBdIDogdm0uZ2V0\nVHlwZU1hcHBpbmcoKTsKICAgICAgICB9IGVsc2UgaWYgKHZhbC5nZXRDbGFz\ncygpID09IHZtLmdldFR5cGUoKSkKICAgICAgICAgICAgcmVsID0gdm0uZ2V0\nVHlwZU1hcHBpbmcoKTsgLy8gY29tbW9uIGNhc2UKICAgICAgICBlbHNlIHsK\nICAgICAgICAgICAgcmVsID0gdm0uZ2V0TWFwcGluZ1JlcG9zaXRvcnkoKS5n\nZXRNYXBwaW5nKHZhbC5nZXRDbGFzcygpLAogICAgICAgICAgICAgICAgc3Rv\ncmUuZ2V0Q29udGV4dCgpLmdldENsYXNzTG9hZGVyKCksIHRydWUpOwogICAg\nICAgIH0KICAgICAgICBpZiAoIXJlbC5pc01hcHBlZCgpKQogICAgICAgICAg\nICB0aHJvdyBuZXcgVXNlckV4Y2VwdGlvbihfbG9jLmdldCgidW5tYXBwZWQt\nZGF0YXN0b3JlLXZhbHVlIiwgCiAgICAgICAgICAgICAgICByZWwuZ2V0RGVz\nY3JpYmVkVHlwZSgpKSk7CgogICAgICAgIENvbHVtbltdIGNvbHM7CiAgICAg\nICAgaWYgKHZtLmdldEpvaW5EaXJlY3Rpb24oKSA9PSBWYWx1ZU1hcHBpbmcu\nSk9JTl9JTlZFUlNFKQogICAgICAgICAgICBjb2xzID0gcmVsLmdldFByaW1h\ncnlLZXlDb2x1bW5zKCk7CiAgICAgICAgZWxzZQogICAgICAgICAgICBjb2xz\nID0gdm0uZ2V0Rm9yZWlnbktleShyZWwpLmdldFByaW1hcnlLZXlDb2x1bW5z\nKCk7CiAgICAgICAgcmV0dXJuIHJlbC50b0RhdGFTdG9yZVZhbHVlKHZhbCwg\nY29scywgc3RvcmUpOwogICAgfQoKICAgIC8qKgogICAgICogTWFwIGEgbG9n\naWNhbCBmb3JlaWduIGtleSB0byBhbiB1bm1hcHBlZCBiYXNlIGNsYXNzIHJl\nbGF0aW9uLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFwUmVs\nYXRpb25Ub1VubWFwcGVkUEMoVmFsdWVNYXBwaW5nIHZtLAogICAgICAgIFN0\ncmluZyBuYW1lLCBib29sZWFuIGFkYXB0KSB7CiAgICAgICAgbWFwUmVsYXRp\nb25Ub1VubWFwcGVkUEModm0sIERCSWRlbnRpZmllci5uZXdDb2x1bW4obmFt\nZSksIGFkYXB0KTsKICAgIH0KCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFw\nUmVsYXRpb25Ub1VubWFwcGVkUEMoVmFsdWVNYXBwaW5nIHZtLAogICAgICAg\nIERCSWRlbnRpZmllciBuYW1lLCBib29sZWFuIGFkYXB0KSB7CiAgICAgICAg\naWYgKHZtLmdldFR5cGVNYXBwaW5nKCkuZ2V0SWRlbnRpdHlUeXBlKCkgPT0g\nQ2xhc3NNYXBwaW5nLklEX1VOS05PV04pCiAgICAgICAgICAgIHRocm93IG5l\ndyBNZXRhRGF0YUV4Y2VwdGlvbihfbG9jLmdldCgicmVsLXRvLXVua25vd25p\nZCIsIHZtKSk7CgogICAgICAgIFZhbHVlTWFwcGluZ0luZm8gdmluZm8gPSB2\nbS5nZXRWYWx1ZUluZm8oKTsKICAgICAgICBDb2x1bW5bXSB0bXBsYXRlcyA9\nIG5ld1VubWFwcGVkUENUZW1wbGF0ZUNvbHVtbnModm0sIG5hbWUpOwogICAg\nICAgIHZtLnNldENvbHVtbnModmluZm8uZ2V0Q29sdW1ucyh2bSwgbmFtZSwg\ndG1wbGF0ZXMsCiAgICAgICAgICAgIHZtLmdldEZpZWxkTWFwcGluZygpLmdl\ndFRhYmxlKCksIGFkYXB0KSk7CiAgICAgICAgdm0uc2V0Q29sdW1uSU8odmlu\nZm8uZ2V0Q29sdW1uSU8oKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVh\ndGUgdGVtcGxhdGUgY29sdW1ucyBmb3IgYSBsb2dpY2FsIGZvcmVpZ24ga2V5\nIHRvIGFuIHVubWFwcGVkIGJhc2UKICAgICAqIGNsYXNzIHJlbGF0aW9uLgog\nICAgICovCiAgICBwcml2YXRlIHN0YXRpYyBDb2x1bW5bXSBuZXdVbm1hcHBl\nZFBDVGVtcGxhdGVDb2x1bW5zKFZhbHVlTWFwcGluZyB2bSwKICAgICAgICBE\nQklkZW50aWZpZXIgbmFtZSkgewogICAgICAgIENsYXNzTWFwcGluZyByZWwg\nPSB2bS5nZXRUeXBlTWFwcGluZygpOwogICAgICAgIGlmIChyZWwuZ2V0SWRl\nbnRpdHlUeXBlKCkgPT0gQ2xhc3NNYXBwaW5nLklEX0RBVEFTVE9SRSkgewog\nICAgICAgICAgICBDb2x1bW4gY29sID0gbmV3IENvbHVtbigpOwogICAgICAg\nICAgICBjb2wuc2V0SWRlbnRpZmllcihuYW1lKTsKICAgICAgICAgICAgY29s\nLnNldEphdmFUeXBlKEphdmFUeXBlcy5MT05HKTsKICAgICAgICAgICAgY29s\nLnNldFJlbGF0aW9uSWQodHJ1ZSk7CiAgICAgICAgICAgIHJldHVybiBuZXcg\nQ29sdW1uW117IGNvbCB9OwogICAgICAgIH0KCiAgICAgICAgRmllbGRNYXBw\naW5nW10gcGtzID0gcmVsLmdldFByaW1hcnlLZXlGaWVsZE1hcHBpbmdzKCk7\nCiAgICAgICAgQ29sdW1uW10gY29scyA9IG5ldyBDb2x1bW5bcGtzLmxlbmd0\naF07CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBwa3MubGVuZ3RoOyBp\nKyspIHsKICAgICAgICAgICAgY29sc1tpXSA9IG1hcFByaW1hcnlLZXkodm0s\nIHBrc1tpXSk7CiAgICAgICAgICAgIGlmIChjb2xzLmxlbmd0aCA9PSAxKQog\nICAgICAgICAgICAgICAgY29sc1tpXS5zZXRJZGVudGlmaWVyKG5hbWUpOwog\nICAgICAgICAgICBlbHNlIGlmIChEQklkZW50aWZpZXIuaXNOdWxsKGNvbHNb\naV0uZ2V0SWRlbnRpZmllcigpKSkgewogICAgICAgICAgICAgICAgREJJZGVu\ndGlmaWVyIHNOYW1lID0gREJJZGVudGlmaWVyLmNvbWJpbmUoY29sc1tpXS5n\nZXRJZGVudGlmaWVyKCksIHBrc1tpXS5nZXROYW1lKCkpOwogICAgICAgICAg\nICAgICAgY29sc1tpXS5zZXRJZGVudGlmaWVyKHNOYW1lKTsKICAgICAgICAg\nICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIERCSWRl\nbnRpZmllciBzTmFtZSA9IERCSWRlbnRpZmllci5jb21iaW5lKGNvbHNbaV0u\nZ2V0SWRlbnRpZmllcigpLCBjb2xzW2ldLmdldE5hbWUoKSk7CiAgICAgICAg\nICAgICAgICBjb2xzW2ldLnNldElkZW50aWZpZXIoc05hbWUpOwogICAgICAg\nICAgICB9CiAgICAgICAgICAgIGNvbHNbaV0uc2V0VGFyZ2V0RmllbGQocGtz\nW2ldLmdldE5hbWUoKSk7CiAgICAgICAgICAgIGNvbHNbaV0uc2V0UmVsYXRp\nb25JZCh0cnVlKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGNvbHM7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYSBkZWZhdWx0IGNvbHVtbiBm\nb3IgdGhlIGdpdmVuIHByaW1hcnkga2V5IGZpZWxkLiBVc2VzIHRoZQogICAg\nICogdXNlcidzIHJhdyBtYXBwaW5nIGluZm8gaWYgZ2l2ZW4uIE9ubHkgc3Vw\ncG9ydHMgc2ltcGxlIGZpZWxkIHR5cGVzLgogICAgICogVGhlIGNvbHVtbiBu\nYW1lIHdpbGwgYmUgc2V0IHRvIHRoZSBuYW1lIG9mIHRoZSByZWxhdGVkIHBy\naW1hcnkga2V5CiAgICAgKiBjb2x1bW4sIGlmIGFueS4KICAgICAqLwogICAg\ncHJpdmF0ZSBzdGF0aWMgQ29sdW1uIG1hcFByaW1hcnlLZXkoVmFsdWVNYXBw\naW5nIHZtLCBGaWVsZE1hcHBpbmcgcGspIHsKICAgICAgICBMaXN0IGNvbHMg\nPSBway5nZXRWYWx1ZUluZm8oKS5nZXRDb2x1bW5zKCk7CiAgICAgICAgaWYg\nKGNvbHMuc2l6ZSgpID4gMSkKICAgICAgICAgICAgdGhyb3cgbmV3IE1ldGFE\nYXRhRXhjZXB0aW9uKF9sb2MuZ2V0KCJiYWQtdW5tYXBwZWQtcmVsIiwgdm0s\nIHBrKSk7CgogICAgICAgIENvbHVtbiB0bXBsYXRlID0gbnVsbDsKICAgICAg\nICBpZiAoY29scy5zaXplKCkgPT0gMSkKICAgICAgICAgICAgdG1wbGF0ZSA9\nIChDb2x1bW4pIGNvbHMuZ2V0KDApOwoKICAgICAgICBDb2x1bW4gY29sID0g\nbmV3IENvbHVtbigpOwogICAgICAgIHN3aXRjaCAocGsuZ2V0VHlwZUNvZGUo\nKSkgewogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5CT09MRUFOOgogICAg\nICAgICAgICBjYXNlIEphdmFUeXBlcy5CT09MRUFOX09CSjoKICAgICAgICAg\nICAgY2FzZSBKYXZhVHlwZXMuQllURToKICAgICAgICAgICAgY2FzZSBKYXZh\nVHlwZXMuQllURV9PQko6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkNI\nQVI6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLkNIQVJfT0JKOgogICAg\nICAgICAgICBjYXNlIEphdmFUeXBlcy5ET1VCTEU6CiAgICAgICAgICAgIGNh\nc2UgSmF2YVR5cGVzLkRPVUJMRV9PQko6CiAgICAgICAgICAgIGNhc2UgSmF2\nYVR5cGVzLkZMT0FUOgogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5GTE9B\nVF9PQko6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLklOVDoKICAgICAg\nICAgICAgY2FzZSBKYXZhVHlwZXMuSU5UX09CSjoKICAgICAgICAgICAgY2Fz\nZSBKYXZhVHlwZXMuTE9ORzoKICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMu\nTE9OR19PQko6CiAgICAgICAgICAgIGNhc2UgSmF2YVR5cGVzLk5VTUJFUjoK\nICAgICAgICAgICAgY2FzZSBKYXZhVHlwZXMuU0hPUlQ6CiAgICAgICAgICAg\nIGNhc2UgSmF2YVR5cGVzLlNIT1JUX09CSjoKICAgICAgICAgICAgY2FzZSBK\nYXZhVHlwZXMuU1RSSU5HOgogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5C\nSUdJTlRFR0VSOgogICAgICAgICAgICBjYXNlIEphdmFUeXBlcy5CSUdERUNJ\nTUFMOgogICAgICAgICAgICAgICAgY29sLnNldEphdmFUeXBlKHBrLmdldFR5\ncGVDb2RlKCkpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAg\nIGNhc2UgSmF2YVR5cGVzLkRBVEU6CiAgICAgICAgICAgICAgICBjb2wuc2V0\nSmF2YVR5cGUoSmF2YVNRTFR5cGVzLmdldERhdGVUeXBlQ29kZShway5nZXRU\neXBlKCkpKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBk\nZWZhdWx0OgogICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1ldGFEYXRhRXhj\nZXB0aW9uKAogICAgICAgICAgICAgICAgICAgIF9sb2MuZ2V0KCJiYWQtdW5t\nYXBwZWQtcmVsIiwgdm0sIHBrKSk7CiAgICAgICAgfQoKICAgICAgICBpZiAo\ndG1wbGF0ZSAhPSBudWxsKSB7CiAgICAgICAgICAgIGNvbC5zZXRJZGVudGlm\naWVyKHRtcGxhdGUuZ2V0SWRlbnRpZmllcigpKTsKICAgICAgICAgICAgY29s\nLnNldFR5cGUodG1wbGF0ZS5nZXRUeXBlKCkpOwogICAgICAgICAgICBjb2wu\nc2V0VHlwZU5hbWUodG1wbGF0ZS5nZXRUeXBlTmFtZSgpKTsKICAgICAgICAg\nICAgY29sLnNldFNpemUodG1wbGF0ZS5nZXRTaXplKCkpOwogICAgICAgICAg\nICBjb2wuc2V0RGVjaW1hbERpZ2l0cyh0bXBsYXRlLmdldERlY2ltYWxEaWdp\ndHMoKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBjb2w7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIHN0YXRlIG1hbmFnZXIgZm9yIHRo\nZSBnaXZlbiBpbnN0YW5jZSwgdXNpbmcgYSBkZXRhY2hlZAogICAgICogc3Rh\ndGUgbWFuYWdlciBpZiB0aGUgaW5zdG5hY2UgaXMgbm90IG1hbmFnZWQuCiAg\nICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgT3BlbkpQQVN0YXRlTWFuYWdlciBn\nZXRTdGF0ZU1hbmFnZXIoT2JqZWN0IG9iaiwKICAgICAgICBTdG9yZUNvbnRl\neHQgY3R4KSB7CiAgICAgICAgaWYgKG9iaiA9PSBudWxsKQogICAgICAgICAg\nICByZXR1cm4gbnVsbDsKICAgICAgICBPcGVuSlBBU3RhdGVNYW5hZ2VyIHNt\nID0gY3R4LmdldFN0YXRlTWFuYWdlcihvYmopOwogICAgICAgIGlmIChzbSA9\nPSBudWxsKSAvLyBtdXN0IGJlIGRldGFjaGVkCiAgICAgICAgICAgIHJldHVy\nbiBuZXcgRGV0YWNoZWRWYWx1ZVN0YXRlTWFuYWdlcihvYmosIGN0eCk7CiAg\nICAgICAgcmV0dXJuIHNtOwogICAgfQp9Cg==\n","encoding":"base64"}

