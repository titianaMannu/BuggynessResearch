{"sha":"0cd1a3f96439b4b3b65575713a14f53443733837","node_id":"MDQ6QmxvYjIwNjM2NDowY2QxYTNmOTY0MzliNGIzYjY1NTc1NzEzYTE0ZjUzNDQzNzMzODM3","size":4886,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/0cd1a3f96439b4b3b65575713a14f53443733837","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLnN0cmF0czsK\nCmltcG9ydCBqYXZhLnNxbC5TUUxFeGNlcHRpb247CgppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmVuaGFuY2UuUGVyc2lzdGVuY2VDYXBhYmxlOwppbXBv\ncnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuaWRlbnRpZmllci5EQklkZW50\naWZpZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwu\nSkRCQ0ZldGNoQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLmtlcm5lbC5KREJDU3RvcmU7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEuamRiYy5tZXRhLlJlbGF0aW9uSWQ7CmltcG9ydCBvcmcuYXBh\nY2hlLm9wZW5qcGEuamRiYy5tZXRhLlZhbHVlTWFwcGluZzsKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5Db2x1bW47CmltcG9ydCBv\ncmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuQ29sdW1uSU87CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuREJEaWN0aW9uYXJ5Owpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5PcGVuSlBBU3RhdGVN\nYW5hZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmtlcm5lbC5TdG9y\nZUNvbnRleHQ7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwu\nTG9jYWxpemVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLm1ldGEuSmF2\nYVR5cGVzOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuU3RvcmVF\neGNlcHRpb247CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5JbXBs\nSGVscGVyOwoKLyoqCiAqIEhhbmRsZXIgZm9yIHVua25vd24gcGVyc2lzdGVu\nY2UtY2FwYWJsZSBvYmplY3QgZmllbGRzIHRoYXQgc3RvcmVzCiAqIHN0cmlu\nZ2lmaWVkIG9pZHMuCiAqCiAqIEBub2phdmFkb2MKICovCnB1YmxpYyBjbGFz\ncyBVbnR5cGVkUENWYWx1ZUhhbmRsZXIKICAgIGV4dGVuZHMgQWJzdHJhY3RW\nYWx1ZUhhbmRsZXIKICAgIGltcGxlbWVudHMgUmVsYXRpb25JZCB7CgogICAg\ncHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9jYWxpemVyIF9sb2MgPSBMb2NhbGl6\nZXIuZm9yUGFja2FnZQogICAgICAgIChVbnR5cGVkUENWYWx1ZUhhbmRsZXIu\nY2xhc3MpOwogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgVW50eXBlZFBDVmFs\ndWVIYW5kbGVyIF9pbnN0YW5jZSA9CiAgICAgICAgbmV3IFVudHlwZWRQQ1Zh\nbHVlSGFuZGxlcigpOwoKICAgIC8qKgogICAgICogU2luZ2xldG9uIGluc3Rh\nbmNlLgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIFVudHlwZWRQQ1ZhbHVl\nSGFuZGxlciBnZXRJbnN0YW5jZSgpIHsKICAgICAgICByZXR1cm4gX2luc3Rh\nbmNlOwogICAgfQoKICAgIC8qKgogICAgICogQGRlcHJlY2F0ZWQKICAgICAq\nLwogICAgcHVibGljIENvbHVtbltdIG1hcChWYWx1ZU1hcHBpbmcgdm0sIFN0\ncmluZyBuYW1lLCBDb2x1bW5JTyBpbywKICAgICAgICBib29sZWFuIGFkYXB0\nKSB7CiAgICAgICAgREJEaWN0aW9uYXJ5IGRpY3QgPSB2bS5nZXRNYXBwaW5n\nUmVwb3NpdG9yeSgpLmdldERCRGljdGlvbmFyeSgpOwogICAgICAgIERCSWRl\nbnRpZmllciBjb2xOYW1lID0gREJJZGVudGlmaWVyLm5ld0NvbHVtbihuYW1l\nLCBkaWN0ICE9IG51bGwgPyBkaWN0LmRlbGltaXRBbGwoKSA6IGZhbHNlKTsK\nICAgICAgICByZXR1cm4gbWFwKHZtLCBjb2xOYW1lLCBpbywgYWRhcHQpOwog\nICAgfQoKICAgIHB1YmxpYyBDb2x1bW5bXSBtYXAoVmFsdWVNYXBwaW5nIHZt\nLCBEQklkZW50aWZpZXIgbmFtZSwgQ29sdW1uSU8gaW8sCiAgICAgICAgYm9v\nbGVhbiBhZGFwdCkgewogICAgICAgIENvbHVtbiBjb2wgPSBuZXcgQ29sdW1u\nKCk7CiAgICAgICAgY29sLnNldElkZW50aWZpZXIobmFtZSk7CiAgICAgICAg\nY29sLnNldEphdmFUeXBlKEphdmFUeXBlcy5TVFJJTkcpOwogICAgICAgIGNv\nbC5zZXRSZWxhdGlvbklkKHRydWUpOwogICAgICAgIHJldHVybiBuZXcgQ29s\ndW1uW117IGNvbCB9OwogICAgfQoKICAgIHB1YmxpYyBib29sZWFuIGlzVmVy\nc2lvbmFibGUoVmFsdWVNYXBwaW5nIHZtKSB7CiAgICAgICAgcmV0dXJuIHRy\ndWU7CiAgICB9CgogICAgcHVibGljIGJvb2xlYW4gb2JqZWN0VmFsdWVSZXF1\naXJlc0xvYWQoVmFsdWVNYXBwaW5nIHZtKSB7CiAgICAgICAgcmV0dXJuIHRy\ndWU7CiAgICB9CgogICAgcHVibGljIE9iamVjdCB0b0RhdGFTdG9yZVZhbHVl\nKFZhbHVlTWFwcGluZyB2bSwgT2JqZWN0IHZhbCwKICAgICAgICBKREJDU3Rv\ncmUgc3RvcmUpIHsKICAgICAgICAvLyBpbiB0aGUgcGFzdCB3ZSd2ZSBiZWVu\nIGxlbmllbnQgYWJvdXQgYmVpbmcgYWJsZSB0byB0cmFuc2xhdGUgb2JqZWN0\ncwogICAgICAgIC8vIGZyb20gb3RoZXIgcGVyc2lzdGVuY2UgY29udGV4dHMs\nIHNvIHRyeSB0byBnZXQgc20gZGlyZWN0bHkgZnJvbQogICAgICAgIC8vIGlu\nc3RhbmNlIGJlZm9yZSBhc2tpbmcgb3VyIGNvbnRleHQKICAgICAgICBpZiAo\nSW1wbEhlbHBlci5pc01hbmFnZWFibGUodmFsKSkgewogICAgICAgICAgICBQ\nZXJzaXN0ZW5jZUNhcGFibGUgcGMgPSBJbXBsSGVscGVyLnRvUGVyc2lzdGVu\nY2VDYXBhYmxlKHZhbCwKICAgICAgICAgICAgICAgIHN0b3JlLmdldENvbmZp\nZ3VyYXRpb24oKSk7CiAgICAgICAgICAgIGlmIChwYy5wY0dldFN0YXRlTWFu\nYWdlcigpICE9IG51bGwpCiAgICAgICAgICAgICAgICByZXR1cm4gcGMucGNH\nZXRTdGF0ZU1hbmFnZXIoKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIFJl\nbGF0aW9uU3RyYXRlZ2llcy5nZXRTdGF0ZU1hbmFnZXIodmFsLCBzdG9yZS5n\nZXRDb250ZXh0KCkpOwogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgdG9PYmpl\nY3RWYWx1ZShWYWx1ZU1hcHBpbmcgdm0sIE9iamVjdCB2YWwsCiAgICAgICAg\nT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgSkRCQ1N0b3JlIHN0b3JlLCBKREJD\nRmV0Y2hDb25maWd1cmF0aW9uIGZldGNoKQogICAgICAgIHRocm93cyBTUUxF\neGNlcHRpb24gewogICAgICAgIGlmICh2YWwgPT0gbnVsbCkKICAgICAgICAg\nICAgcmV0dXJuIG51bGw7CgogICAgICAgIFN0cmluZyBzdHIgPSAoU3RyaW5n\nKSB2YWw7CiAgICAgICAgaW50IGlkeCA9IHN0ci5pbmRleE9mKCc6Jyk7CiAg\nICAgICAgaWYgKGlkeCA9PSAtMSkKICAgICAgICAgICAgdGhyb3cgbmV3IFN0\nb3JlRXhjZXB0aW9uKF9sb2MuZ2V0KCJvaWQtaW52YWxpZCIsIHN0ciwgdm0p\nKTsKICAgICAgICBTdHJpbmcgY2xzTmFtZSA9IHN0ci5zdWJzdHJpbmcoMCwg\naWR4KTsKICAgICAgICBTdHJpbmcgb2lkU3RyID0gc3RyLnN1YnN0cmluZyhp\nZHggKyAxKTsKCiAgICAgICAgU3RvcmVDb250ZXh0IGN0eCA9IHN0b3JlLmdl\ndENvbnRleHQoKTsKICAgICAgICBDbGFzc0xvYWRlciBsb2FkZXIgPSBzdG9y\nZS5nZXRDb25maWd1cmF0aW9uKCkuCiAgICAgICAgICAgIGdldENsYXNzUmVz\nb2x2ZXJJbnN0YW5jZSgpLmdldENsYXNzTG9hZGVyKHZtLmdldFR5cGUoKSwK\nICAgICAgICAgICAgY3R4LmdldENsYXNzTG9hZGVyKCkpOwogICAgICAgIENs\nYXNzIGNscyA9IG51bGw7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY2xz\nID0gQ2xhc3MuZm9yTmFtZShjbHNOYW1lLCB0cnVlLCBsb2FkZXIpOwogICAg\nICAgIH0gY2F0Y2ggKENsYXNzTm90Rm91bmRFeGNlcHRpb24gY25mZSkgewog\nICAgICAgICAgICB0aHJvdyBuZXcgU3RvcmVFeGNlcHRpb24oY25mZSk7CiAg\nICAgICAgfQoKICAgICAgICBPYmplY3Qgb2lkID0gY3R4Lm5ld09iamVjdElk\nKGNscywgb2lkU3RyKTsKICAgICAgICByZXR1cm4gc3RvcmUuZmluZChvaWQs\nIHZtLCBmZXRjaCk7CiAgICB9CgogICAgcHVibGljIE9iamVjdCB0b1JlbGF0\naW9uRGF0YVN0b3JlVmFsdWUoT3BlbkpQQVN0YXRlTWFuYWdlciBzbSwgQ29s\ndW1uIGNvbCkgewogICAgICAgIGlmIChzbSA9PSBudWxsIHx8IHNtLmdldE9i\namVjdElkKCkgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAg\nICAgICAgcmV0dXJuIHNtLmdldE1ldGFEYXRhKCkuZ2V0RGVzY3JpYmVkVHlw\nZSgpLmdldE5hbWUoKSArICI6IgogICAgICAgICAgICArIHNtLmdldE9iamVj\ndElkKCkudG9TdHJpbmcoKTsKICAgIH0KfQo=\n","encoding":"base64"}

