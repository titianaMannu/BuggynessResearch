{"sha":"f6506db1e684d441579cec675dcc70c3ad6ecdb8","node_id":"MDQ6QmxvYjIwNjM2NDpmNjUwNmRiMWU2ODRkNDQxNTc5Y2VjNjc1ZGNjNzBjM2FkNmVjZGI4","size":5894,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/f6506db1e684d441579cec675dcc70c3ad6ecdb8","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5tZXRhLnN0cmF0czsK\nCmltcG9ydCBqYXZhLnNxbC5TUUxFeGNlcHRpb247CgppbXBvcnQgb3JnLmFw\nYWNoZS5vcGVuanBhLmpkYmMuaWRlbnRpZmllci5EQklkZW50aWZpZXI7Cmlt\ncG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuSkRCQ0ZldGNo\nQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJj\nLmtlcm5lbC5KREJDU3RvcmU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5tZXRhLkNsYXNzTWFwcGluZzsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLm1ldGEuQ2xhc3NNYXBwaW5nSW5mbzsKaW1wb3J0IG9yZy5h\ncGFjaGUub3BlbmpwYS5qZGJjLm1ldGEuRGVsZWdhdGluZ0pvaW5hYmxlOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMubWV0YS5Kb2luYWJsZTsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5Db2x1bW47\nCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuRm9yZWln\nbktleTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5Q\ncmltYXJ5S2V5OwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2No\nZW1hLlRhYmxlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3Fs\nLkpvaW5zOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlJv\ndzsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5Sb3dNYW5h\nZ2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNlbGVj\ndDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5rZXJuZWwuT3BlbkpQQVN0\nYXRlTWFuYWdlcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIudXRp\nbC5Mb2NhbGl6ZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEudXRpbC5N\nZXRhRGF0YUV4Y2VwdGlvbjsKCi8qKgogKiBNYXBwaW5nIGZvciBzdWJjbGFz\nc2VzIHRoYXQgam9pbiB0byB0aGVpciBzdXBlcmNsYXNzIHRhYmxlLgogKgog\nKiBAYXV0aG9yIEFiZSBXaGl0ZQogKi8KcHVibGljIGNsYXNzIFZlcnRpY2Fs\nQ2xhc3NTdHJhdGVneQogICAgZXh0ZW5kcyBBYnN0cmFjdENsYXNzU3RyYXRl\nZ3kgewoKICAgIHB1YmxpYyBzdGF0aWMgZmluYWwgU3RyaW5nIEFMSUFTID0g\nInZlcnRpY2FsIjsKCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2NhbGl6\nZXIgX2xvYyA9IExvY2FsaXplci5mb3JQYWNrYWdlCiAgICAgICAgKFZlcnRp\nY2FsQ2xhc3NTdHJhdGVneS5jbGFzcyk7CgogICAgcHJpdmF0ZSBCb29sZWFu\nIF9ma09pZCA9IG51bGw7CgogICAgcHVibGljIFN0cmluZyBnZXRBbGlhcygp\nIHsKICAgICAgICByZXR1cm4gQUxJQVM7CiAgICB9CgogICAgcHVibGljIHZv\naWQgbWFwKGJvb2xlYW4gYWRhcHQpIHsKICAgICAgICBDbGFzc01hcHBpbmcg\nc3VwID0gY2xzLmdldE1hcHBlZFBDU3VwZXJjbGFzc01hcHBpbmcoKTsKICAg\nICAgICBpZiAoc3VwID09IG51bGwpCiAgICAgICAgICAgIHRocm93IG5ldyBN\nZXRhRGF0YUV4Y2VwdGlvbihfbG9jLmdldCgibm90LXN1YiIsIGNscykpOwoK\nICAgICAgICBDbGFzc01hcHBpbmdJbmZvIGluZm8gPSBjbHMuZ2V0TWFwcGlu\nZ0luZm8oKTsKICAgICAgICBpbmZvLmFzc2VydE5vSW5kZXgoY2xzLCBmYWxz\nZSk7CiAgICAgICAgaW5mby5hc3NlcnROb1VuaXF1ZShjbHMsIGZhbHNlKTsK\nCiAgICAgICAgLy8gZm9yZWlnbiBrZXkgZnJvbSB0aGlzIGNsYXNzIHRvIG91\nciBzdXBlcmNsYXNzCiAgICAgICAgVGFibGUgdGFibGUgPSBpbmZvLmdldFRh\nYmxlKGNscywgYWRhcHQpOwogICAgICAgIEZvcmVpZ25LZXkgZmsgPSBpbmZv\nLmdldFN1cGVyY2xhc3NKb2luKGNscywgdGFibGUsIGFkYXB0KTsKICAgICAg\nICBDb2x1bW5bXSBwa0NvbHMgPSBmay5nZXRDb2x1bW5zKCk7CgogICAgICAg\nIGNscy5zZXRUYWJsZSh0YWJsZSk7CiAgICAgICAgY2xzLnNldEpvaW5Gb3Jl\naWduS2V5KGZrKTsKICAgICAgICBjbHMuc2V0UHJpbWFyeUtleUNvbHVtbnMo\ncGtDb2xzKTsKICAgICAgICBjbHMuc2V0Q29sdW1uSU8oaW5mby5nZXRDb2x1\nbW5JTygpKTsKCiAgICAgICAgLy8gYWRkIGEgcHJpbWFyeSBrZXkgaWYgd2Ug\nZG9uJ3QgaGF2ZSBvbmUgYWxyZWFkeQogICAgICAgIFByaW1hcnlLZXkgcGsg\nPSB0YWJsZS5nZXRQcmltYXJ5S2V5KCk7CiAgICAgICAgaWYgKHBrID09IG51\nbGwpIHsKICAgICAgICAgICAgREJJZGVudGlmaWVyIHBrbmFtZSA9IERCSWRl\nbnRpZmllci5OVUxMOwogICAgICAgICAgICBpZiAoYWRhcHQpCiAgICAgICAg\nICAgICAgICBwa25hbWUgPSBjbHMuZ2V0TWFwcGluZ1JlcG9zaXRvcnkoKS5n\nZXRNYXBwaW5nRGVmYXVsdHMoKS4KICAgICAgICAgICAgICAgICAgICBnZXRQ\ncmltYXJ5S2V5SWRlbnRpZmllcihjbHMsIHRhYmxlKTsKICAgICAgICAgICAg\ncGsgPSB0YWJsZS5hZGRQcmltYXJ5S2V5KHBrbmFtZSk7CiAgICAgICAgICAg\nIHBrLnNldExvZ2ljYWwoIWFkYXB0KTsKICAgICAgICAgICAgcGsuc2V0Q29s\ndW1ucyhwa0NvbHMpOwogICAgICAgIH0KCiAgICAgICAgLy8gbWFwIGpvaW5h\nYmxlcwogICAgICAgIEpvaW5hYmxlIGpvaW47CiAgICAgICAgQ29sdW1uW10g\nY29sczsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHBrQ29scy5sZW5n\ndGg7IGkrKykgewogICAgICAgICAgICAvLyBtYXkgaGF2ZSBhbHJlYWR5IHJl\nZ2lzdGVyZWQgYSBtdWx0aS1jb2x1bW4gam9pbmFibGUKICAgICAgICAgICAg\naWYgKGNscy5nZXRKb2luYWJsZShwa0NvbHNbaV0pICE9IG51bGwpCiAgICAg\nICAgICAgICAgICBjb250aW51ZTsKCiAgICAgICAgICAgIC8vIGNyZWF0ZSBq\nb2luYWJsZSB0aGF0IGRlbGVnYXRlcyBhbGwgbWV0aG9kcyB0byB0aGUgc3Vw\nZXJjbGFzcycKICAgICAgICAgICAgLy8gam9pbmFibGUsIGJ1dCBjaGFuZ2Vz\nIHRoZSBjb2x1bW5zIGFzIGFwcHJvcHJpYXRlIHVzaW5nCiAgICAgICAgICAg\nIC8vIG91ciBzdXBlcmNsYXNzIGpvaW4gZmsKICAgICAgICAgICAgam9pbiA9\nIHN1cC5hc3NlcnRKb2luYWJsZShmay5nZXRQcmltYXJ5S2V5Q29sdW1uKHBr\nQ29sc1tpXSkpOwogICAgICAgICAgICBqb2luID0gbmV3IERlbGVnYXRpbmdK\nb2luYWJsZShqb2luLCBmayk7CiAgICAgICAgICAgIGNvbHMgPSBqb2luLmdl\ndENvbHVtbnMoKTsKICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCBj\nb2xzLmxlbmd0aDsgaisrKQogICAgICAgICAgICAgICAgY2xzLnNldEpvaW5h\nYmxlKGNvbHNbal0sIGpvaW4pOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJs\naWMgdm9pZCBpbml0aWFsaXplKCkgewogICAgICAgIC8vIHRoaXMgcmVxdWly\nZXMgYWxsIGZpZWxkcyB0byBiZSByZXNvbHZlZCwgc28gZGVsYXkgaXQgdW50\naWwgaW5pdAogICAgICAgIENsYXNzTWFwcGluZyBzdXAgPSBjbHMuZ2V0TWFw\ncGVkUENTdXBlcmNsYXNzTWFwcGluZygpOwogICAgICAgIF9ma09pZCA9IHN1\ncC5pc0ZvcmVpZ25LZXlPYmplY3RJZChjbHMuZ2V0Sm9pbkZvcmVpZ25LZXko\nKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgaW5zZXJ0KE9wZW5KUEFTdGF0\nZU1hbmFnZXIgc20sIEpEQkNTdG9yZSBzdG9yZSwgUm93TWFuYWdlciBybSkK\nICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBSb3cgcm93\nID0gcm0uZ2V0Um93KGNscy5nZXRUYWJsZSgpLCBSb3cuQUNUSU9OX0lOU0VS\nVCwgc20sIHRydWUpOwogICAgICAgIHJvdy5zZXRQcmltYXJ5S2V5KGNscy5n\nZXRDb2x1bW5JTygpLCBzbSk7CiAgICAgICAgcm93LnNldEZvcmVpZ25LZXko\nY2xzLmdldEpvaW5Gb3JlaWduS2V5KCksIGNscy5nZXRDb2x1bW5JTygpLCBz\nbSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgdXBkYXRlKE9wZW5KUEFTdGF0\nZU1hbmFnZXIgc20sIEpEQkNTdG9yZSBzdG9yZSwgUm93TWFuYWdlciBybSkK\nICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBSb3cgcm93\nID0gcm0uZ2V0Um93KGNscy5nZXRUYWJsZSgpLCBSb3cuQUNUSU9OX1VQREFU\nRSwgc20sIGZhbHNlKTsKICAgICAgICBpZiAocm93ICE9IG51bGwpIHsKICAg\nICAgICAgICAgcm93LndoZXJlUHJpbWFyeUtleShzbSk7CiAgICAgICAgICAg\nIHJvdy53aGVyZUZvcmVpZ25LZXkoY2xzLmdldEpvaW5Gb3JlaWduS2V5KCks\nIHNtKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZvaWQgZGVsZXRl\nKE9wZW5KUEFTdGF0ZU1hbmFnZXIgc20sIEpEQkNTdG9yZSBzdG9yZSwgUm93\nTWFuYWdlciBybSkKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAg\nICAgICBSb3cgcm93ID0gcm0uZ2V0Um93KGNscy5nZXRUYWJsZSgpLCBSb3cu\nQUNUSU9OX0RFTEVURSwgc20sIHRydWUpOwogICAgICAgIHJvdy53aGVyZVBy\naW1hcnlLZXkoc20pOwogICAgICAgIHJvdy53aGVyZUZvcmVpZ25LZXkoY2xz\nLmdldEpvaW5Gb3JlaWduS2V5KCksIHNtKTsKICAgIH0KCiAgICBwdWJsaWMg\nYm9vbGVhbiBpc1ByaW1hcnlLZXlPYmplY3RJZChib29sZWFuIGhhc0FsbCkg\newogICAgICAgIHJldHVybiBCb29sZWFuLlRSVUUuZXF1YWxzKF9ma09pZCkg\nfHwgKCFoYXNBbGwgJiYgX2ZrT2lkID09IG51bGwpOwogICAgfQoKICAgIHB1\nYmxpYyBKb2lucyBqb2luU3VwZXJjbGFzcyhKb2lucyBqb2lucywgYm9vbGVh\nbiB0b1RoaXMpIHsKICAgICAgICBpZiAodG9UaGlzKQogICAgICAgICAgICBy\nZXR1cm4gam9pbnMub3V0ZXJKb2luKGNscy5nZXRKb2luRm9yZWlnbktleSgp\nLCB0cnVlLCBmYWxzZSk7CiAgICAgICAgcmV0dXJuIGpvaW5zLmpvaW4oY2xz\nLmdldEpvaW5Gb3JlaWduS2V5KCksIGZhbHNlLCBmYWxzZSk7CiAgICB9Cgog\nICAgcHVibGljIGJvb2xlYW4gc3VwcG9ydHNFYWdlclNlbGVjdChTZWxlY3Qg\nc2VsLCBPcGVuSlBBU3RhdGVNYW5hZ2VyIHNtLAogICAgICAgIEpEQkNTdG9y\nZSBzdG9yZSwgQ2xhc3NNYXBwaW5nIGJhc2UsIEpEQkNGZXRjaENvbmZpZ3Vy\nYXRpb24gZmV0Y2gpIHsKICAgICAgICByZXR1cm4gc3RvcmUuZ2V0REJEaWN0\naW9uYXJ5KCkuY2FuT3V0ZXJKb2luKHNlbC5nZXRKb2luU3ludGF4KCksCiAg\nICAgICAgICAgIGNscy5nZXRKb2luRm9yZWlnbktleSgpKTsKICAgIH0KfQo=\n","encoding":"base64"}

