{"sha":"6e810e504f8fcd3dbede6f0259f9b117b565ed87","node_id":"MDQ6QmxvYjIwNjM2NDo2ZTgxMGU1MDRmOGZjZDNkYmVkZTZmMDI1OWY5YjExN2I1NjVlZDg3","size":6930,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/6e810e504f8fcd3dbede6f0259f9b117b565ed87","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWE7CgppbXBv\ncnQgamF2YS5zcWwuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmEuc3FsLkRhdGFi\nYXNlTWV0YURhdGE7CmltcG9ydCBqYXZhLnNxbC5TUUxFeGNlcHRpb247Cgpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuY29uZi5KREJDQ29uZmln\ndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmlkZW50\naWZpZXIuREJJZGVudGlmaWVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMuaWRlbnRpZmllci5EQklkZW50aWZpZXJVdGlsOwppbXBvcnQgb3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMuaWRlbnRpZmllci5RdWFsaWZpZWREQklk\nZW50aWZpZXI7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwu\nU1FMRXhjZXB0aW9uczsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIu\nY29uZi5Db25maWd1cmFibGU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\nbGliLmNvbmYuQ29uZmlndXJhdGlvbjsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5saWIuaWRlbnRpZmllci5JZGVudGlmaWVyUnVsZTsKCi8qKgogKiBG\nYWN0b3J5IHRoYXQgdXNlcyBkYXRhYmFzZSBtZXRhZGF0YSB0byBjb25zdHJ1\nY3QgdGhlIHN5c3RlbSBzY2hlbWEuCiAqIFRoZSBsYXp5IHNjaGVtYSBmYWN0\nb3J5IG9ubHkgbG9hZHMgdGFibGUgZGF0YSBhcyBpdCBpcyByZXF1ZXN0ZWQu\nIEl0CiAqIGRvZXMgbm90IHByb3Blcmx5IHN1cHBvcnQgb3BlcmF0aW9ucyB0\naGF0IHJlcXVpcmUga25vd2xlZGdlIG9mIHRoZSBlbnRpcmUKICogc2NoZW1h\nLgogKgogKiBAYXV0aG9yIEFiZSBXaGl0ZQogKi8KQFN1cHByZXNzV2Fybmlu\nZ3MoInNlcmlhbCIpCnB1YmxpYyBjbGFzcyBMYXp5U2NoZW1hRmFjdG9yeQog\nICAgZXh0ZW5kcyBTY2hlbWFHcm91cAogICAgaW1wbGVtZW50cyBTY2hlbWFG\nYWN0b3J5LCBDb25maWd1cmFibGUgewoKICAgIHByaXZhdGUgdHJhbnNpZW50\nIEpEQkNDb25maWd1cmF0aW9uIF9jb25mID0gbnVsbDsKICAgIHByaXZhdGUg\ndHJhbnNpZW50IENvbm5lY3Rpb24gX2Nvbm4gPSBudWxsOwogICAgcHJpdmF0\nZSB0cmFuc2llbnQgRGF0YWJhc2VNZXRhRGF0YSBfbWV0YSA9IG51bGw7CiAg\nICBwcml2YXRlIHRyYW5zaWVudCBTY2hlbWFHZW5lcmF0b3IgX2dlbiA9IG51\nbGw7CiAgICAKICAgIHByaXZhdGUgYm9vbGVhbiBfaW5kZXhlcyA9IGZhbHNl\nOwogICAgcHJpdmF0ZSBib29sZWFuIF9wa3MgPSBmYWxzZTsKICAgIHByaXZh\ndGUgYm9vbGVhbiBfZmtzID0gZmFsc2U7CgogICAgcHVibGljIGJvb2xlYW4g\nZ2V0UHJpbWFyeUtleXMoKSB7CiAgICAgICAgcmV0dXJuIF9wa3M7CiAgICB9\nCgogICAgcHVibGljIHZvaWQgc2V0UHJpbWFyeUtleXMoYm9vbGVhbiBwa3Mp\nIHsKICAgICAgICBfcGtzID0gcGtzOwogICAgfQoKICAgIHB1YmxpYyBib29s\nZWFuIGdldEZvcmVpZ25LZXlzKCkgewogICAgICAgIHJldHVybiBfZmtzOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldEZvcmVpZ25LZXlzKGJvb2xlYW4g\nZmtzKSB7CiAgICAgICAgX2ZrcyA9IGZrczsKICAgIH0KCiAgICBwdWJsaWMg\nYm9vbGVhbiBnZXRJbmRleGVzKCkgewogICAgICAgIHJldHVybiBfaW5kZXhl\nczsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRJbmRleGVzKGJvb2xlYW4g\naWR4KSB7CiAgICAgICAgX2luZGV4ZXMgPSBpZHg7CiAgICB9CgogICAgcHVi\nbGljIFNjaGVtYUdyb3VwIHJlYWRTY2hlbWEoKSB7CiAgICAgICAgcmV0dXJu\nIHRoaXM7CiAgICB9CgogICAgcHVibGljIHZvaWQgc3RvcmVTY2hlbWEoU2No\nZW1hR3JvdXAgc2NoZW1hKSB7CiAgICAgICAgLy8gbm90aGluZyB0byBkbwog\nICAgfQoKICAgIC8qKgogICAgICogQGRlcHJlY2F0ZWQKICAgICAqLwogICAg\ncHVibGljIFRhYmxlIGZpbmRUYWJsZShTdHJpbmcgbmFtZSkgewogICAgICAg\nIGlmIChuYW1lID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBudWxsOwog\nICAgICAgIHJldHVybiBmaW5kVGFibGUoREJJZGVudGlmaWVyLm5ld1RhYmxl\nKG5hbWUpKTsKICAgIH0KCiAgICBwdWJsaWMgVGFibGUgZmluZFRhYmxlKERC\nSWRlbnRpZmllciBuYW1lKSB7CiAgICAgICAgaWYgKG5hbWUgPT0gbnVsbCkK\nICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgcmV0dXJuIGZpbmRU\nYWJsZShRdWFsaWZpZWREQklkZW50aWZpZXIuZ2V0UGF0aChuYW1lKSk7CiAg\nICB9CgogICAgcHVibGljIFRhYmxlIGZpbmRUYWJsZShRdWFsaWZpZWREQklk\nZW50aWZpZXIgcGF0aCkgewogICAgICAgIGlmIChwYXRoID09IG51bGwpCiAg\nICAgICAgICAgIHJldHVybiBudWxsOwoKICAgICAgICBUYWJsZSB0YWJsZSA9\nIHN1cGVyLmZpbmRUYWJsZShwYXRoKTsKICAgICAgICBpZiAodGFibGUgIT0g\nbnVsbCkKICAgICAgICAgICAgcmV0dXJuIHRhYmxlOwoKICAgICAgICBnZW5l\ncmF0ZVNjaGVtYU9iamVjdChwYXRoLCB0cnVlKTsKICAgICAgICByZXR1cm4g\nc3VwZXIuZmluZFRhYmxlKHBhdGgpOwogICAgfQoKICAgIC8qKgogICAgICog\nQGRlcHJlY2F0ZWQKICAgICAqLwogICAgcHVibGljIFNlcXVlbmNlIGZpbmRT\nZXF1ZW5jZShTdHJpbmcgbmFtZSkgewogICAgICAgIGlmIChuYW1lID09IG51\nbGwpCiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIHJldHVybiBm\naW5kU2VxdWVuY2UoREJJZGVudGlmaWVyLm5ld1NlcXVlbmNlKG5hbWUpKTsK\nICAgIH0KCiAgICBwdWJsaWMgU2VxdWVuY2UgZmluZFNlcXVlbmNlKERCSWRl\nbnRpZmllciBuYW1lKSB7CiAgICAgICAgaWYgKG5hbWUgPT0gbnVsbCkKICAg\nICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgcmV0dXJuIGZpbmRTZXF1\nZW5jZShRdWFsaWZpZWREQklkZW50aWZpZXIuZ2V0UGF0aChuYW1lKSk7CiAg\nICB9CiAgICAgICAgCiAgICBwdWJsaWMgU2VxdWVuY2UgZmluZFNlcXVlbmNl\nKFF1YWxpZmllZERCSWRlbnRpZmllciBuYW1lKSB7CiAgICAgICAgaWYgKG5h\nbWUgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIG51bGw7CgogICAgICAg\nIFNlcXVlbmNlIHNlcSA9IHN1cGVyLmZpbmRTZXF1ZW5jZShuYW1lKTsKICAg\nICAgICBpZiAoc2VxICE9IG51bGwpCiAgICAgICAgICAgIHJldHVybiBzZXE7\nCgogICAgICAgIGdlbmVyYXRlU2NoZW1hT2JqZWN0KG5hbWUsIGZhbHNlKTsK\nICAgICAgICByZXR1cm4gc3VwZXIuZmluZFNlcXVlbmNlKG5hbWUpOwogICAg\nfQoKICAgIC8qKgogICAgICogR2VuZXJhdGUgdGhlIHRhYmxlIG9yIHNlcXVl\nbmNlIHdpdGggdGhlIGdpdmVuIG5hbWUuCiAgICAgKi8KICAgIHByaXZhdGUg\ndm9pZCBnZW5lcmF0ZVNjaGVtYU9iamVjdChRdWFsaWZpZWREQklkZW50aWZp\nZXIgbmFtZSwgYm9vbGVhbiBpc1RhYmxlKSB7CiAgICAgICAgLy8gaWYgZnVs\nbCBuYW1lLCBzcGxpdAogICAgICAgIERCSWRlbnRpZmllciBzY2hlbWFOYW1l\nID0gbmFtZS5nZXRTY2hlbWFOYW1lKCk7CiAgICAgICAgREJJZGVudGlmaWVy\nIG9iamVjdE5hbWUgPSBuYW1lLmdldElkZW50aWZpZXIoKTsKCiAgICAgICAg\nLy8gd2Ugc2hhcmUgYSBzaW5nbGUgY29ubmVjdGlvbiBhY3Jvc3MgYWxsIHNj\naGVtYXMsIHNvIHN5bmNoCiAgICAgICAgLy8gb24gdGhlIHNjaGVtYSBncm91\ncAogICAgICAgIHN5bmNocm9uaXplZCAodGhpcykgewogICAgICAgICAgICBi\nb29sZWFuIGNsb3NlID0gZmFsc2U7CiAgICAgICAgICAgIHRyeSB7CiAgICAg\nICAgICAgICAgICAvLyB1c2UgdGhlIGV4aXN0aW5nIGNvbm5lY3Rpb24gaWYg\ncG9zc2libGU7IHRoaXMgbWV0aG9kCiAgICAgICAgICAgICAgICAvLyBtaWdo\ndCBiZSByZWVudHJhbnQgaWYgZ2VuZXJhdGluZyB0aGUgZm9yZWlnbiBrZXlz\nIGZvcgogICAgICAgICAgICAgICAgLy8gdGhpcyB0YWJsZSAoc2VlIGJlbG93\nKSByZXF1aXJlcyBsb2FkaW5nIGFkZGl0aW9uYWwKICAgICAgICAgICAgICAg\nIC8vIHRhYmxlczsgaW4gdGhhdCBjYXNlIHdlIGRvbid0IHdhbnQgdG8gc3Bh\nd24gYWRkaXRpb25hbAogICAgICAgICAgICAgICAgLy8gY29ubmVjdGlvbnMK\nICAgICAgICAgICAgICAgIGlmIChfY29ubiA9PSBudWxsKSB7CiAgICAgICAg\nICAgICAgICAgICAgX2Nvbm4gPSBfY29uZi5nZXREYXRhU291cmNlMihudWxs\nKS5nZXRDb25uZWN0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgY2xvc2Ug\nPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIF9tZXRhID0gX2Nvbm4uZ2V0\nTWV0YURhdGEoKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAg\nICBpZiAoaXNUYWJsZSkgewogICAgICAgICAgICAgICAgICAgIC8vIGdlbmVy\nYXRlIHRoZSB0YWJsZSBmcm9tIGRhdGFiYXNlIG1ldGFkYXRhCiAgICAgICAg\nICAgICAgICAgICAgX2dlbi5nZW5lcmF0ZVRhYmxlcyhzY2hlbWFOYW1lLCBv\nYmplY3ROYW1lLCBfY29ubiwgX21ldGEpOwogICAgICAgICAgICAgICAgICAg\nIFRhYmxlIHRhYmxlID0gc3VwZXIuZmluZFRhYmxlKG5hbWUpOwoKICAgICAg\nICAgICAgICAgICAgICBpZiAodGFibGUgIT0gbnVsbCkgewogICAgICAgICAg\nICAgICAgICAgICAgICBpZiAoX3BrcykKICAgICAgICAgICAgICAgICAgICAg\nICAgICAgIF9nZW4uZ2VuZXJhdGVQcmltYXJ5S2V5cyh0YWJsZS5nZXRTY2hl\nbWFJZGVudGlmaWVyKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg\nICAgdGFibGUuZ2V0SWRlbnRpZmllcigpLCBfY29ubiwgX21ldGEpOwogICAg\nICAgICAgICAgICAgICAgICAgICBpZiAoX2luZGV4ZXMpCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICBfZ2VuLmdlbmVyYXRlSW5kZXhlcyh0YWJsZS5n\nZXRTY2hlbWFJZGVudGlmaWVyKCksCiAgICAgICAgICAgICAgICAgICAgICAg\nICAgICAgICAgdGFibGUuZ2V0SWRlbnRpZmllcigpLCBfY29ubiwgX21ldGEp\nOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2VuZXJhdGUgZm9yZWln\nbiBrZXlzIGZyb20gdGhlIHRhYmxlOyB0aGlzIG1pZ2h0CiAgICAgICAgICAg\nICAgICAgICAgICAgIC8vIGVuZCB1cCByZS1jYWxsaW5nIHRoaXMgZ2V0VGFi\nbGUgbWV0aG9kIGlmIHRoZSBmb3JlaWduCiAgICAgICAgICAgICAgICAgICAg\nICAgIC8vIGtleSBsaW5rcyB0byBhIHRhYmxlIHRoYXQgaGFzbid0IGJlZW4g\nbG9hZGVkIHlldAogICAgICAgICAgICAgICAgICAgICAgICBpZiAoX2ZrcykK\nICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9nZW4uZ2VuZXJhdGVGb3Jl\naWduS2V5cyh0YWJsZS5nZXRTY2hlbWFJZGVudGlmaWVyKCksCiAgICAgICAg\nICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuZ2V0SWRlbnRpZmllcigp\nLCBfY29ubiwgX21ldGEpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAg\nICAgICAgICAgIH0gZWxzZQogICAgICAgICAgICAgICAgICAgIF9nZW4uZ2Vu\nZXJhdGVTZXF1ZW5jZXMoc2NoZW1hTmFtZSwgb2JqZWN0TmFtZSwgX2Nvbm4s\nCiAgICAgICAgICAgICAgICAgICAgICAgIF9tZXRhKTsKICAgICAgICAgICAg\nfSBjYXRjaCAoU1FMRXhjZXB0aW9uIHNlKSB7CiAgICAgICAgICAgICAgICB0\naHJvdyBTUUxFeGNlcHRpb25zLmdldFN0b3JlKHNlLAogICAgICAgICAgICAg\nICAgICAgIF9jb25mLmdldERCRGljdGlvbmFyeUluc3RhbmNlKCkpOwogICAg\nICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgaWYgKGNsb3Nl\nKSB7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAg\nICAgICAgICAgX2Nvbm4uY2xvc2UoKTsKICAgICAgICAgICAgICAgICAgICB9\nIGNhdGNoIChTUUxFeGNlcHRpb24gc2UpIHsKICAgICAgICAgICAgICAgICAg\nICB9CiAgICAgICAgICAgICAgICAgICAgX2Nvbm4gPSBudWxsOwogICAgICAg\nICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAg\nIHB1YmxpYyB2b2lkIHNldENvbmZpZ3VyYXRpb24oQ29uZmlndXJhdGlvbiBj\nb25mKSB7CiAgICAgICAgX2NvbmYgPSAoSkRCQ0NvbmZpZ3VyYXRpb24pIGNv\nbmY7CiAgICAgICAgX2dlbiA9IG5ldyBTY2hlbWFHZW5lcmF0b3IoX2NvbmYp\nOwogICAgICAgIF9nZW4uc2V0U2NoZW1hR3JvdXAodGhpcyk7CiAgICB9Cgog\nICAgcHVibGljIHZvaWQgc3RhcnRDb25maWd1cmF0aW9uKCkgewogICAgfQoK\nICAgIHB1YmxpYyB2b2lkIGVuZENvbmZpZ3VyYXRpb24oKSB7CiAgICB9Cn0K\n","encoding":"base64"}

