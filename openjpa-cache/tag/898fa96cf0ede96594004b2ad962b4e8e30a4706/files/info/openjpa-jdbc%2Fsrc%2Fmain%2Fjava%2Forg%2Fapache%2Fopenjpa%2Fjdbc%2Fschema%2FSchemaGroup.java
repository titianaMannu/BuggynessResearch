{"sha":"e0f5b634fcb88d24890483f47c48108fe15b0b59","node_id":"MDQ6QmxvYjIwNjM2NDplMGY1YjYzNGZjYjg4ZDI0ODkwNDgzZjQ3YzQ4MTA4ZmUxNWIwYjU5","size":19026,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/e0f5b634fcb88d24890483f47c48108fe15b0b59","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWE7CgppbXBv\ncnQgamF2YS51dGlsLkNvbGxlY3Rpb247CmltcG9ydCBqYXZhLnV0aWwuSGFz\naE1hcDsKaW1wb3J0IGphdmEudXRpbC5MaW5rZWRMaXN0OwppbXBvcnQgamF2\nYS51dGlsLk1hcDsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5p\nZGVudGlmaWVyLkRCSWRlbnRpZmllcjsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLmlkZW50aWZpZXIuUXVhbGlmaWVkREJJZGVudGlmaWVyOwoK\nLyoqCiAqIFJlcHJlc2VudHMgYSBncm91cGluZyBvZiBzY2hlbWFzIHVzZWQg\naW4gYSBkYXRhYmFzZS4KICoKICogQGF1dGhvciBBYmUgV2hpdGUKICovCkBT\ndXBwcmVzc1dhcm5pbmdzKCJzZXJpYWwiKQpwdWJsaWMgY2xhc3MgU2NoZW1h\nR3JvdXAKICAgIGV4dGVuZHMgTmFtZVNldAogICAgaW1wbGVtZW50cyBDbG9u\nZWFibGUgewoKICAgIHByaXZhdGUgTWFwPERCSWRlbnRpZmllciwgU2NoZW1h\nPiBfc2NoZW1hTWFwID0gbnVsbDsKCiAgICAvLyBjYWNoZQogICAgcHJpdmF0\nZSBTY2hlbWFbXSBfc2NoZW1hcyA9IG51bGw7CgogICAgLyoqCiAgICAgKiBS\nZXR1cm4gYWxsIHNjaGVtYXMuCiAgICAgKi8KICAgIHB1YmxpYyBTY2hlbWFb\nXSBnZXRTY2hlbWFzKCkgewogICAgICAgIGlmIChfc2NoZW1hcyA9PSBudWxs\nKQogICAgICAgICAgICBfc2NoZW1hcyA9IChfc2NoZW1hTWFwID09IG51bGwp\nID8gbmV3IFNjaGVtYVswXSA6IChTY2hlbWFbXSkKICAgICAgICAgICAgICAg\nIF9zY2hlbWFNYXAudmFsdWVzKCkudG9BcnJheShuZXcgU2NoZW1hW19zY2hl\nbWFNYXAuc2l6ZSgpXSk7CiAgICAgICAgcmV0dXJuIF9zY2hlbWFzOwogICAg\nfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBzY2hlbWEgd2l0aCB0aGUg\nZ2l2ZW4gbmFtZSwgb3IgbnVsbCBpZiBub25lLgogICAgICogQGRlcHJlY2F0\nZWQKICAgICAqLwogICAgcHVibGljIFNjaGVtYSBnZXRTY2hlbWEoU3RyaW5n\nIG5hbWUpIHsKICAgICAgICBpZiAoX3NjaGVtYU1hcCA9PSBudWxsKQogICAg\nICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICByZXR1cm4gZ2V0U2NoZW1h\nKERCSWRlbnRpZmllci50b1VwcGVyKERCSWRlbnRpZmllci5uZXdTY2hlbWEo\nbmFtZSkpKTsKICAgIH0KCiAgICBwdWJsaWMgU2NoZW1hIGdldFNjaGVtYShE\nQklkZW50aWZpZXIgbmFtZSkgewogICAgICAgIGlmIChfc2NoZW1hTWFwID09\nIG51bGwpCiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIERCSWRl\nbnRpZmllciBzTmFtZSA9IERCSWRlbnRpZmllci50b1VwcGVyKG5hbWUpOwog\nICAgICAgIFNjaGVtYSBzY2hlbWEgPSAoU2NoZW1hKSBfc2NoZW1hTWFwLmdl\ndChzTmFtZSk7CiAgICAgICAgcmV0dXJuIHNjaGVtYTsKICAgIH0KCiAgICAv\nKioKICAgICAqIEFkZCBhIHNjaGVtYSB0byB0aGUgZ3JvdXAuCiAgICAgKi8K\nICAgIHB1YmxpYyBTY2hlbWEgYWRkU2NoZW1hKCkgewogICAgICAgIHJldHVy\nbiBhZGRTY2hlbWEoREJJZGVudGlmaWVyLk5VTEwpOwogICAgfQoKICAgIC8q\nKgogICAgICogQWRkIGEgc2NoZW1hIHRvIHRoZSBncm91cC4KICAgICAqLwog\nICAgcHVibGljIFNjaGVtYSBhZGRTY2hlbWEoREJJZGVudGlmaWVyIG5hbWUp\nIHsKICAgICAgICBhZGROYW1lKG5hbWUsIGZhbHNlKTsKICAgICAgICBTY2hl\nbWEgc2NoZW1hID0gbmV3U2NoZW1hKG5hbWUpOwogICAgICAgIERCSWRlbnRp\nZmllciBzTmFtZSA9IERCSWRlbnRpZmllci50b1VwcGVyKG5hbWUpOwogICAg\nICAgIGlmIChfc2NoZW1hTWFwID09IG51bGwpCiAgICAgICAgICAgIF9zY2hl\nbWFNYXAgPSBuZXcgSGFzaE1hcDxEQklkZW50aWZpZXIsIFNjaGVtYT4oKTsK\nICAgICAgICBfc2NoZW1hTWFwLnB1dChzTmFtZSwgc2NoZW1hKTsKICAgICAg\nICBfc2NoZW1hcyA9IG51bGw7CiAgICAgICAgcmV0dXJuIHNjaGVtYTsKICAg\nIH0KCiAgICAvKioKICAgICAqIEBkZXByZWNhdGVkCiAgICAgKiBAcGFyYW0g\nbmFtZQogICAgICogQHJldHVybgogICAgICovCiAgICBwdWJsaWMgU2NoZW1h\nIGFkZFNjaGVtYShTdHJpbmcgbmFtZSkgewogICAgICAgIHJldHVybiBhZGRT\nY2hlbWEoREJJZGVudGlmaWVyLm5ld1NjaGVtYShuYW1lKSk7CiAgICB9CiAg\nICAKICAgIC8qKgogICAgICogUmVtb3ZlIHRoZSBnaXZlbiBzY2hlbWEgZnJv\nbSB0aGUgZ3JvdXAuCiAgICAgKgogICAgICogQHJldHVybiB0cnVlIGlmIHRo\nZSBzY2hlbWEgd2FzIHJlbW92ZWQsIGZhbHNlIGlmIG5vdCBpbiB0aGUgZ3Jv\ndXAKICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gcmVtb3ZlU2NoZW1hKFNj\naGVtYSBzY2hlbWEpIHsKICAgICAgICBpZiAoc2NoZW1hID09IG51bGwpCiAg\nICAgICAgICAgIHJldHVybiBmYWxzZTsKCiAgICAgICAgREJJZGVudGlmaWVy\nIG5hbWUgPSBEQklkZW50aWZpZXIudG9VcHBlcihzY2hlbWEuZ2V0SWRlbnRp\nZmllcigpKTsKICAgICAgICBTY2hlbWEgcmVtID0gKFNjaGVtYSkgX3NjaGVt\nYU1hcC5nZXQobmFtZSk7CiAgICAgICAgaWYgKHNjaGVtYS5lcXVhbHMocmVt\nKSkgewogICAgICAgICAgICBfc2NoZW1hTWFwLnJlbW92ZShuYW1lKTsKICAg\nICAgICAgICAgcmVtb3ZlTmFtZShzY2hlbWEuZ2V0SWRlbnRpZmllcigpKTsK\nICAgICAgICAgICAgX3NjaGVtYXMgPSBudWxsOwogICAgICAgICAgICBzY2hl\nbWEucmVtb3ZlKCk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAg\nIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLyoqCiAgICAg\nKiBJbXBvcnQgYSBzY2hlbWEgZnJvbSBhbm90aGVyIGdyb3VwLiBGb3JlaWdu\nIGtleXMgYXJlIG5vdCBpbXBvcnRlZC4KICAgICAqLwogICAgcHVibGljIFNj\naGVtYSBpbXBvcnRTY2hlbWEoU2NoZW1hIHNjaGVtYSkgewogICAgICAgIGlm\nIChzY2hlbWEgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJuIG51bGw7Cgog\nICAgICAgIFNjaGVtYSBjb3B5ID0gYWRkU2NoZW1hKHNjaGVtYS5nZXRJZGVu\ndGlmaWVyKCkpOwogICAgICAgIFNlcXVlbmNlW10gc2VxcyA9IHNjaGVtYS5n\nZXRTZXF1ZW5jZXMoKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHNl\ncXMubGVuZ3RoOyBpKyspCiAgICAgICAgICAgIGNvcHkuaW1wb3J0U2VxdWVu\nY2Uoc2Vxc1tpXSk7CgogICAgICAgIFRhYmxlW10gdGFibGVzID0gc2NoZW1h\nLmdldFRhYmxlcygpOwogICAgICAgIEluZGV4W10gaWR4czsKICAgICAgICBV\nbmlxdWVbXSB1bnFzOwogICAgICAgIFRhYmxlIHRhYjsKICAgICAgICBmb3Ig\nKGludCBpID0gMDsgaSA8IHRhYmxlcy5sZW5ndGg7IGkrKykgewogICAgICAg\nICAgICB0YWIgPSBjb3B5LmltcG9ydFRhYmxlKHRhYmxlc1tpXSk7CiAgICAg\nICAgICAgIGlkeHMgPSB0YWJsZXNbaV0uZ2V0SW5kZXhlcygpOwogICAgICAg\nICAgICBmb3IgKGludCBqID0gMDsgaiA8IGlkeHMubGVuZ3RoOyBqKyspCiAg\nICAgICAgICAgICAgICB0YWIuaW1wb3J0SW5kZXgoaWR4c1tqXSk7CiAgICAg\nICAgICAgIHVucXMgPSB0YWJsZXNbaV0uZ2V0VW5pcXVlcygpOwogICAgICAg\nICAgICBmb3IgKGludCBqID0gMDsgaiA8IHVucXMubGVuZ3RoOyBqKyspCiAg\nICAgICAgICAgICAgICB0YWIuaW1wb3J0VW5pcXVlKHVucXNbal0pOwogICAg\nICAgIH0KICAgICAgICByZXR1cm4gY29weTsKICAgIH0KCiAgICAvKioKICAg\nICAqIFJldHVybiB0cnVlIGlmIHRoZSBnaXZlbiB0YWJsZSBpcyBrbm93biB0\nbyBleGlzdC4gV2hpbGUKICAgICAqIHtAbGluayAjZmluZFRhYmxlfSBtYXkg\nZXhoaWJpdCBkeW5hbWljIGJlaGF2aW9yIGluIHNvbWUgc2NoZW1hIGdyb3Vw\nCiAgICAgKiBpbXBsZW1lbnRhdGlvbnMsIHRoaXMgbWV0aG9kIG9ubHkgcmV0\ndXJucyB0cnVlIGlmIHRoZSB0YWJsZSBoYXMgYmVlbgogICAgICogYWRkZWQg\ndG8gdGhpcyBncm91cCBvciBpcyBrbm93biB0byBleGlzdCBpbiB0aGUgZGF0\nYWJhc2UuCiAgICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlzS25vd25UYWJs\nZShUYWJsZSB0YWJsZSkgewogICAgICAgIHJldHVybiBmaW5kVGFibGUodGFi\nbGUpICE9IG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdHJ1\nZSBpZiB0aGUgZ2l2ZW4gdGFibGUgaXMga25vd24gdG8gZXhpc3QuIFdoaWxl\nCiAgICAgKiB7QGxpbmsgI2ZpbmRUYWJsZX0gbWF5IGV4aGliaXQgZHluYW1p\nYyBiZWhhdmlvciBpbiBzb21lIHNjaGVtYSBncm91cAogICAgICogaW1wbGVt\nZW50YXRpb25zLCB0aGlzIG1ldGhvZCBvbmx5IHJldHVybnMgdHJ1ZSBpZiB0\naGUgdGFibGUgaGFzIGJlZW4KICAgICAqIGFkZGVkIHRvIHRoaXMgZ3JvdXAg\nb3IgaXMga25vd24gdG8gZXhpc3QgaW4gdGhlIGRhdGFiYXNlLgogICAgICog\nQGRlcHJlY2F0ZWQKICAgICAqLwogICAgcHVibGljIGJvb2xlYW4gaXNLbm93\nblRhYmxlKFN0cmluZyBuYW1lKSB7CiAgICAgICAgcmV0dXJuIGZpbmRUYWJs\nZShuYW1lKSAhPSBudWxsOwogICAgfQoKICAgICAgcHVibGljIGJvb2xlYW4g\naXNLbm93blRhYmxlKFF1YWxpZmllZERCSWRlbnRpZmllciBwYXRoKSB7CiAg\nICAgICAgICByZXR1cm4gZmluZFRhYmxlKHBhdGgpICE9IG51bGw7CiAgICAg\nIH0KICAgIAogICAgLyoqCiAgICAgKiBGaW5kIHRoZSBlcXVpdmFsZW50IG9m\nIHRoZSBnaXZlbiB0YWJsZSBpbiB0aGlzIHNjaGVtYSBncm91cC4gVGhlCiAg\nICAgKiBnaXZlbiB0YWJsZSB0aGF0IG1heSBoYXZlIGNvbWUgZnJvbSBhbm90\naGVyIHNjaGVtYSBncm91cC4KICAgICAqLwogICAgcHVibGljIFRhYmxlIGZp\nbmRUYWJsZShUYWJsZSB0YWJsZSkgewogICAgICAgIHJldHVybiBmaW5kVGFi\nbGUodGFibGUuZ2V0UXVhbGlmaWVkUGF0aCgpKTsKICAgIH0KCiAgICAvKioK\nICAgICAqIEZpbmQgdGhlIHRhYmxlIHdpdGggdGhlIGdpdmVuIG5hbWUgaW4g\ndGhlIGdyb3VwLCB1c2luZyAnLicgYXMgdGhlCiAgICAgKiBjYXRhbG9nIHNl\ncGFyYXRvci4gUmV0dXJucyBudWxsIGlmIG5vIHRhYmxlIGZvdW5kLgogICAg\nICogQGRlcHJlY2F0ZWQKICAgICAqLwogICAgcHVibGljIFRhYmxlIGZpbmRU\nYWJsZShTdHJpbmcgbmFtZSkgewogICAgICAgIGlmIChuYW1lID09IG51bGwp\nCiAgICAgICAgICAgIHJldHVybiBudWxsOwoKICAgICAgICByZXR1cm4gZmlu\nZFRhYmxlKFF1YWxpZmllZERCSWRlbnRpZmllci5nZXRQYXRoKERCSWRlbnRp\nZmllci5uZXdUYWJsZShuYW1lKSkpOwogICAgfQoKICAgIHB1YmxpYyBUYWJs\nZSBmaW5kVGFibGUoUXVhbGlmaWVkREJJZGVudGlmaWVyIHBhdGgpIHsKICAg\nICAgICBpZiAoREJJZGVudGlmaWVyLmlzTnVsbChwYXRoKSkgewogICAgICAg\nICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgICAgaWYgKCFEQklk\nZW50aWZpZXIuaXNOdWxsKHBhdGguZ2V0U2NoZW1hTmFtZSgpKSkgewogICAg\nICAgICAgICBTY2hlbWEgc2NoZW1hID0gZ2V0U2NoZW1hKHBhdGguZ2V0U2No\nZW1hTmFtZSgpKTsKICAgICAgICAgICAgaWYgKHNjaGVtYSAhPSBudWxsKQog\nICAgICAgICAgICAgICAgcmV0dXJuIHNjaGVtYS5nZXRUYWJsZShwYXRoLmdl\ndFVucXVhbGlmaWVkTmFtZSgpKTsKICAgICAgICAgICAgCiAgICAgICAgfSBl\nbHNlIHsKICAgICAgICAgICAgU2NoZW1hW10gc2NoZW1hcyA9IGdldFNjaGVt\nYXMoKTsKICAgICAgICAgICAgVGFibGUgdGFiOwogICAgICAgICAgICBmb3Ig\nKGludCBpID0gMDsgaSA8IHNjaGVtYXMubGVuZ3RoOyBpKyspIHsKICAgICAg\nICAgICAgICAgIHRhYiA9IHNjaGVtYXNbaV0uZ2V0VGFibGUocGF0aC5nZXRJ\nZGVudGlmaWVyKCkpOwogICAgICAgICAgICAgICAgaWYgKHRhYiAhPSBudWxs\nKQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0YWI7CiAgICAgICAgICAg\nIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAg\nLyoqCiAgICAgKiBGaW5kIHRoZSB0YWJsZSB3aXRoIHRoZSBnaXZlbiBuYW1l\nIGluIHRoZSBncm91cCwgdXNpbmcgJy4nIGFzIHRoZSBjYXRhbG9nCiAgICAg\nKiBzZXBhcmF0b3IuIFJldHVybnMgbnVsbCBpZiBubyB0YWJsZSBmb3VuZC4K\nICAgICAqIEBkZXByZWNhdGVkCiAgICAgKi8KICAgIHB1YmxpYyBUYWJsZSBm\naW5kVGFibGUoU2NoZW1hIGluU2NoZW1hLCBTdHJpbmcgbmFtZSkgewogICAg\nICAgIGlmIChuYW1lID09IG51bGwpCiAgICAgICAgICAgIHJldHVybiBudWxs\nOwogICAgICAgIHJldHVybiBmaW5kVGFibGUoaW5TY2hlbWEsIERCSWRlbnRp\nZmllci5uZXdUYWJsZShuYW1lKSwgREJJZGVudGlmaWVyLk5VTEwpOwogICAg\nfQoKICAgIHB1YmxpYyBUYWJsZSBmaW5kVGFibGUoU2NoZW1hIGluU2NoZW1h\nLCBEQklkZW50aWZpZXIgbmFtZSkgewogICAgICAgIGlmIChEQklkZW50aWZp\nZXIuaXNOdWxsKG5hbWUpKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAg\nICAgICByZXR1cm4gZmluZFRhYmxlKGluU2NoZW1hLCBRdWFsaWZpZWREQklk\nZW50aWZpZXIuZ2V0UGF0aChuYW1lKSwgREJJZGVudGlmaWVyLk5VTEwpOwog\nICAgfQoKICAgIHB1YmxpYyBUYWJsZSBmaW5kVGFibGUoU2NoZW1hIGluU2No\nZW1hLCBEQklkZW50aWZpZXIgbmFtZSwgREJJZGVudGlmaWVyIGRlZmF1bHRT\nY2hlbWFOYW1lKSB7CiAgICAgICAgaWYgKERCSWRlbnRpZmllci5pc051bGwo\nbmFtZSkpCiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIHJldHVy\nbiBmaW5kVGFibGUoaW5TY2hlbWEsIFF1YWxpZmllZERCSWRlbnRpZmllci5n\nZXRQYXRoKG5hbWUpLCBkZWZhdWx0U2NoZW1hTmFtZSk7CiAgICB9CiAgICAK\nICAgIHB1YmxpYyBUYWJsZSBmaW5kVGFibGUoU2NoZW1hIGluU2NoZW1hLCBR\ndWFsaWZpZWREQklkZW50aWZpZXIgcGF0aCwgREJJZGVudGlmaWVyIGRlZmF1\nbHRTY2hlbWFOYW1lKSB7CiAgICAgICAgaWYgKHBhdGggPT0gbnVsbCkKICAg\nICAgICAgICAgcmV0dXJuIG51bGw7CgogICAgICAgIGlmICghREJJZGVudGlm\naWVyLmlzTnVsbChwYXRoLmdldFNjaGVtYU5hbWUoKSkpIHsKICAgICAgICAg\nICAgU2NoZW1hIHNjaGVtYSA9IGdldFNjaGVtYShwYXRoLmdldFNjaGVtYU5h\nbWUoKSk7CiAgICAgICAgICAgIGlmIChzY2hlbWEgIT0gbnVsbCkKICAgICAg\nICAgICAgICAgIHJldHVybiBzY2hlbWEuZ2V0VGFibGUocGF0aC5nZXRJZGVu\ndGlmaWVyKCkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIFNjaGVt\nYVtdIHNjaGVtYXMgPSBnZXRTY2hlbWFzKCk7CiAgICAgICAgICAgIGZvciAo\naW50IGkgPSAwOyBpIDwgc2NoZW1hcy5sZW5ndGg7IGkrKykgewogICAgICAg\nICAgICAgICAgVGFibGUgdGFiID0gc2NoZW1hc1tpXS5nZXRUYWJsZShwYXRo\nLmdldElkZW50aWZpZXIoKSk7CiAgICAgICAgICAgICAgICAvLyBpZiBhIHRh\nYmxlIGlzIGZvdW5kIGFuZCBpdCBoYXMgdGhlIHNhbWUgc2NoZW1hCiAgICAg\nICAgICAgICAgICAvLyBhcyB0aGUgaW5wdXQgc2NoZW1hICwgaXQgbWVhbnMg\ndGhhdCB0aGUgdGFibGUKICAgICAgICAgICAgICAgIC8vIGV4aXN0cy4gSG93\nZXZlciwgaWYgdGhlIGlucHV0IHNjaGVtYSBpcyBudWxsLAogICAgICAgICAg\nICAgICAgLy8gdGhlbiB3ZSBhc3N1bWUgdGhhdCB0aGVyZSBpcyBvbmx5IG9u\nZSB0YWJsZSBmb3IgdGhlCiAgICAgICAgICAgICAgICAvLyBkYiBkZWZhdWx0\nIHNjaGVtYSwgaW4gdGhpcyBjYXNlLCB0YWJsZSBleGlzdHMuLgogICAgICAg\nICAgICAgICAgLy8gV2UgY2FuJ3QgaGFuZGxlIHRoZSBjYXNlIHRoYXQgb25l\nIGVudGl0eSBoYXMgc2NoZW1hIG5hbWUKICAgICAgICAgICAgICAgIC8vIGFu\nZCBvdGhlciBlbnRpdHkgZG9lcyBub3QgaGF2ZSBzY2hlbWEgbmFtZSBidXQg\nYm90aCBlbnRpdGllcwogICAgICAgICAgICAgICAgLy8gbWFwIHRvIHRoZSBz\nYW1lIHRhYmxlLgogICAgICAgICAgICAgICAgYm9vbGVhbiBpc0RlZmF1bHRT\nY2hlbWEgPSBEQklkZW50aWZpZXIuaXNOdWxsKGluU2NoZW1hLmdldElkZW50\naWZpZXIoKSkgJiYgCiAgICAgICAgICAgICAgICAgICAgIURCSWRlbnRpZmll\nci5pc051bGwoZGVmYXVsdFNjaGVtYU5hbWUpICYmIAogICAgICAgICAgICAg\nICAgICAgIERCSWRlbnRpZmllci5lcXVhbHNJZ25vcmVDYXNlKGRlZmF1bHRT\nY2hlbWFOYW1lLCBzY2hlbWFzW2ldLmdldElkZW50aWZpZXIoKSk7CiAgICAg\nICAgICAgICAgICBib29sZWFuIGhhc05vRGVmYXVsdFNjaGVtYSA9IERCSWRl\nbnRpZmllci5pc051bGwoaW5TY2hlbWEuZ2V0SWRlbnRpZmllcigpKSAmJiAK\nICAgICAgICAgICAgICAgICAgICBEQklkZW50aWZpZXIuaXNOdWxsKGRlZmF1\nbHRTY2hlbWFOYW1lKTsgCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAg\nICAgIGlmICh0YWIgIT0gbnVsbCAmJgogICAgICAgICAgICAgICAgICAgIChz\nY2hlbWFzW2ldID09IGluU2NoZW1hIHx8IGlzRGVmYXVsdFNjaGVtYSB8fCBo\nYXNOb0RlZmF1bHRTY2hlbWEpKSAKICAgICAgICAgICAgICAgICAgICByZXR1\ncm4gdGFiOwoKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1\ncm4gbnVsbDsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0cnVlIGlm\nIHRoZSBnaXZlbiBzZXF1ZW5jZSBpcyBrbm93biB0byBleGlzdC4gV2hpbGUK\nICAgICAqIHtAbGluayAjZmluZFNlcXVlbmNlfSBtYXkgZXhoaWJpdCBkeW5h\nbWljIGJlaGF2aW9yIGluIHNvbWUgc2NoZW1hIGdyb3VwCiAgICAgKiBpbXBs\nZW1lbnRhdGlvbnMsIHRoaXMgbWV0aG9kIG9ubHkgcmV0dXJucyB0cnVlIGlm\nIHRoZSBzZXF1ZW5jZSBoYXMgYmVlbgogICAgICogYWRkZWQgdG8gdGhpcyBn\ncm91cCBvciBpcyBrbm93biB0byBleGlzdCBpbiB0aGUgZGF0YWJhc2UuCiAg\nICAgKi8KICAgIHB1YmxpYyBib29sZWFuIGlzS25vd25TZXF1ZW5jZShTZXF1\nZW5jZSBzZXEpIHsKICAgICAgICByZXR1cm4gZmluZFNlcXVlbmNlKHNlcSkg\nIT0gbnVsbDsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0cnVlIGlm\nIHRoZSBnaXZlbiBzZXF1ZW5jZSBpcyBrbm93biB0byBleGlzdC4gV2hpbGUK\nICAgICAqIHtAbGluayAjZmluZFNlcXVlbmNlfSBtYXkgZXhoaWJpdCBkeW5h\nbWljIGJlaGF2aW9yIGluIHNvbWUgc2NoZW1hIGdyb3VwCiAgICAgKiBpbXBs\nZW1lbnRhdGlvbnMsIHRoaXMgbWV0aG9kIG9ubHkgcmV0dXJucyB0cnVlIGlm\nIHRoZSBzZXF1ZW5jZSBoYXMgYmVlbgogICAgICogYWRkZWQgdG8gdGhpcyBn\ncm91cCBvciBpcyBrbm93biB0byBleGlzdCBpbiB0aGUgZGF0YWJhc2UuCiAg\nICAgKiBAZGVwcmVjYXRlZAogICAgICovCiAgICBwdWJsaWMgYm9vbGVhbiBp\nc0tub3duU2VxdWVuY2UoU3RyaW5nIG5hbWUpIHsKICAgICAgICByZXR1cm4g\nZmluZFNlcXVlbmNlKG5hbWUpICE9IG51bGw7CiAgICB9CgogICAgcHVibGlj\nIGJvb2xlYW4gaXNLbm93blNlcXVlbmNlKERCSWRlbnRpZmllciBuYW1lKSB7\nCiAgICAgICAgcmV0dXJuIGZpbmRTZXF1ZW5jZShRdWFsaWZpZWREQklkZW50\naWZpZXIuZ2V0UGF0aChuYW1lKSkgIT0gbnVsbDsKICAgIH0KCiAgICBwdWJs\naWMgYm9vbGVhbiBpc0tub3duU2VxdWVuY2UoUXVhbGlmaWVkREJJZGVudGlm\naWVyIHBhdGgpIHsKICAgICAgICByZXR1cm4gZmluZFNlcXVlbmNlKHBhdGgp\nICE9IG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBGaW5kIHRoZSBlcXVp\ndmFsZW50IG9mIHRoZSBnaXZlbiBzZXF1ZW5jZSBpbiB0aGlzIHNjaGVtYSBn\ncm91cC4gVGhlCiAgICAgKiBnaXZlbiBzZXF1ZW5jZSB0aGF0IG1heSBoYXZl\nIGNvbWUgZnJvbSBhbm90aGVyIHNjaGVtYSBncm91cC4KICAgICAqLwogICAg\ncHVibGljIFNlcXVlbmNlIGZpbmRTZXF1ZW5jZShTZXF1ZW5jZSBzZXEpIHsK\nICAgICAgICByZXR1cm4gZmluZFNlcXVlbmNlKHNlcS5nZXRRdWFsaWZpZWRQ\nYXRoKCkpOwogICAgfQoKICAgIC8qKgogICAgICogRmluZCB0aGUgc2VxdWVu\nY2Ugd2l0aCB0aGUgZ2l2ZW4gbmFtZSBpbiB0aGUgZ3JvdXAsIHVzaW5nICcu\nJyBhcyB0aGUKICAgICAqIGNhdGFsb2cgc2VwYXJhdG9yLiBSZXR1cm5zIG51\nbGwgaWYgbm8gc2VxdWVuY2UgZm91bmQuCiAgICAgKiBAZGVwcmVjYXRlZAog\nICAgICovCiAgICBwdWJsaWMgU2VxdWVuY2UgZmluZFNlcXVlbmNlKFN0cmlu\nZyBuYW1lKSB7CiAgICAgICAgaWYgKG5hbWUgPT0gbnVsbCkKICAgICAgICAg\nICAgcmV0dXJuIG51bGw7CiAgICAgICAgcmV0dXJuIGZpbmRTZXF1ZW5jZShE\nQklkZW50aWZpZXIubmV3U2VxdWVuY2UobmFtZSkpOwogICAgfQoKICAgIHB1\nYmxpYyBTZXF1ZW5jZSBmaW5kU2VxdWVuY2UoREJJZGVudGlmaWVyIG5hbWUp\nIHsKICAgICAgICBpZiAoREJJZGVudGlmaWVyLmlzTnVsbChuYW1lKSkKICAg\nICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgcmV0dXJuIGZpbmRTZXF1\nZW5jZShRdWFsaWZpZWREQklkZW50aWZpZXIuZ2V0UGF0aChuYW1lKSk7CiAg\nICB9CgogICAgcHVibGljIFNlcXVlbmNlIGZpbmRTZXF1ZW5jZShRdWFsaWZp\nZWREQklkZW50aWZpZXIgcGF0aCkgewogICAgICAgIGlmIChwYXRoID09IG51\nbGwpCiAgICAgICAgICAgIHJldHVybiBudWxsOwoKICAgICAgICBpZiAoIURC\nSWRlbnRpZmllci5pc051bGwocGF0aC5nZXRTY2hlbWFOYW1lKCkpKSB7CiAg\nICAgICAgICAgIFNjaGVtYSBzY2hlbWEgPSBnZXRTY2hlbWEocGF0aC5nZXRT\nY2hlbWFOYW1lKCkpOwogICAgICAgICAgICBpZiAoc2NoZW1hICE9IG51bGwp\nCiAgICAgICAgICAgICAgICByZXR1cm4gc2NoZW1hLmdldFNlcXVlbmNlKHBh\ndGguZ2V0SWRlbnRpZmllcigpKTsKICAgICAgICB9IGVsc2UgewogICAgICAg\nICAgICBTY2hlbWFbXSBzY2hlbWFzID0gZ2V0U2NoZW1hcygpOwogICAgICAg\nICAgICBTZXF1ZW5jZSBzZXE7CiAgICAgICAgICAgIGZvciAoaW50IGkgPSAw\nOyBpIDwgc2NoZW1hcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAg\nc2VxID0gc2NoZW1hc1tpXS5nZXRTZXF1ZW5jZShwYXRoLmdldElkZW50aWZp\nZXIoKSk7CiAgICAgICAgICAgICAgICBpZiAoc2VxICE9IG51bGwpCiAgICAg\nICAgICAgICAgICAgICAgcmV0dXJuIHNlcTsKICAgICAgICAgICAgfQogICAg\nICAgIH0KICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICAvKioKICAg\nICAqIEZpbmQgdGhlIHNlcXVlbmNlIHdpdGggdGhlIGdpdmVuIG5hbWUgaW4g\ndGhlIGdyb3VwLCB1c2luZyAnLicgYXMgdGhlCiAgICAgKiBjYXRhbG9nIHNl\ncGFyYXRvci4gUmV0dXJucyBudWxsIGlmIG5vIHNlcXVlbmNlIGZvdW5kLgog\nICAgICogQGRlcHJlY2F0ZWQKICAgICAqLwogICAgcHVibGljIFNlcXVlbmNl\nIGZpbmRTZXF1ZW5jZShTY2hlbWEgaW5TY2hlbWEsIFN0cmluZyBuYW1lKSB7\nCiAgICAgICAgaWYgKG5hbWUgPT0gbnVsbCkKICAgICAgICAgICAgcmV0dXJu\nIG51bGw7CiAgICAgICAgcmV0dXJuIGZpbmRTZXF1ZW5jZShpblNjaGVtYSwg\nUXVhbGlmaWVkREJJZGVudGlmaWVyLmdldFBhdGgoREJJZGVudGlmaWVyLm5l\nd1NlcXVlbmNlKG5hbWUpKSk7CiAgICB9CgogICAgCiAgICBwdWJsaWMgU2Vx\ndWVuY2UgZmluZFNlcXVlbmNlKFNjaGVtYSBpblNjaGVtYSwgUXVhbGlmaWVk\nREJJZGVudGlmaWVyIHBhdGgpIHsKICAgICAgICBpZiAocGF0aCA9PSBudWxs\nKQogICAgICAgICAgICByZXR1cm4gbnVsbDsKCiAgICAgICAgaWYgKCFEQklk\nZW50aWZpZXIuaXNOdWxsKHBhdGguZ2V0U2NoZW1hTmFtZSgpKSkgewogICAg\nICAgICAgICBTY2hlbWEgc2NoZW1hID0gZ2V0U2NoZW1hKHBhdGguZ2V0U2No\nZW1hTmFtZSgpKTsKICAgICAgICAgICAgaWYgKHNjaGVtYSAhPSBudWxsKQog\nICAgICAgICAgICAgICAgcmV0dXJuIHNjaGVtYS5nZXRTZXF1ZW5jZShwYXRo\nLmdldElkZW50aWZpZXIoKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAg\nICAgU2NoZW1hW10gc2NoZW1hcyA9IGdldFNjaGVtYXMoKTsKICAgICAgICAg\nICAgU2VxdWVuY2Ugc2VxOwogICAgICAgICAgICBmb3IgKGludCBpID0gMDsg\naSA8IHNjaGVtYXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHNl\ncSA9IHNjaGVtYXNbaV0uZ2V0U2VxdWVuY2UocGF0aC5nZXRJZGVudGlmaWVy\nKCkpOwogICAgICAgICAgICAgICAgaWYgKChzZXEgIT0gbnVsbCkgJiYKICAg\nICAgICAgICAgICAgICAgICAgICAgKHNjaGVtYXNbaV0gPT0gaW5TY2hlbWEg\nfHwgREJJZGVudGlmaWVyLmlzTnVsbChpblNjaGVtYS5nZXRJZGVudGlmaWVy\nKCkpKSkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VxOwogICAgICAg\nICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBudWxsOwogICAgfQoK\nICAgIC8qKgogICAgICogRmluZCBhbGwgZm9yZWlnbiBrZXlzIGV4cG9ydGVk\nIGJ5IGEgZ2l2ZW4gcHJpbWFyeSBrZXkgKGFsbCBmb3JlaWduIGtleXMKICAg\nICAqIHRoYXQgbGluayB0byB0aGUgcHJpbWFyeSBrZXkpLgogICAgICovCiAg\nICBwdWJsaWMgRm9yZWlnbktleVtdIGZpbmRFeHBvcnRlZEZvcmVpZ25LZXlz\nKFByaW1hcnlLZXkgcGspIHsKICAgICAgICBpZiAocGsgPT0gbnVsbCkKICAg\nICAgICAgICAgcmV0dXJuIG5ldyBGb3JlaWduS2V5WzBdOwoKICAgICAgICBT\nY2hlbWFbXSBzY2hlbWFzID0gZ2V0U2NoZW1hcygpOwogICAgICAgIFRhYmxl\nW10gdGFiczsKICAgICAgICBGb3JlaWduS2V5W10gZmtzOwogICAgICAgIENv\nbGxlY3Rpb248Rm9yZWlnbktleT4gZXhwb3J0cyA9IG5ldyBMaW5rZWRMaXN0\nPEZvcmVpZ25LZXk+KCk7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBz\nY2hlbWFzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHRhYnMgPSBzY2hl\nbWFzW2ldLmdldFRhYmxlcygpOwogICAgICAgICAgICBmb3IgKGludCBqID0g\nMDsgaiA8IHRhYnMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICAgIGZr\ncyA9IHRhYnNbal0uZ2V0Rm9yZWlnbktleXMoKTsKICAgICAgICAgICAgICAg\nIGZvciAoaW50IGsgPSAwOyBrIDwgZmtzLmxlbmd0aDsgaysrKSB7CiAgICAg\nICAgICAgICAgICAgICAgaWYgKGZrc1trXS5nZXRQcmltYXJ5S2V5VGFibGUo\nKSAhPSBudWxsCiAgICAgICAgICAgICAgICAgICAgICAgICYmIHBrLmVxdWFs\ncyhma3Nba10uZ2V0UHJpbWFyeUtleVRhYmxlKCkuCiAgICAgICAgICAgICAg\nICAgICAgICAgIGdldFByaW1hcnlLZXkoKSkpCiAgICAgICAgICAgICAgICAg\nICAgICAgIGV4cG9ydHMuYWRkKGZrc1trXSk7CiAgICAgICAgICAgICAgICB9\nCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIChGb3Jl\naWduS2V5W10pIGV4cG9ydHMudG9BcnJheShuZXcgRm9yZWlnbktleVtleHBv\ncnRzLnNpemUoKV0pOwogICAgfQoKICAgIC8qKgogICAgICogUmVtb3ZlIHVu\ncmVmZXJlbmNlZCBvciBlbXRweSBjb21wb25lbnRzIGZyb20gdGhlIHNjaGVt\nYS4KICAgICAqLwogICAgcHVibGljIHZvaWQgcmVtb3ZlVW51c2VkQ29tcG9u\nZW50cygpIHsKICAgICAgICBTY2hlbWFbXSBzY2hlbWFzID0gZ2V0U2NoZW1h\ncygpOwogICAgICAgIFRhYmxlW10gdGFiczsKICAgICAgICBDb2x1bW5bXSBj\nb2xzOwogICAgICAgIFNlcXVlbmNlW10gc2VxczsKICAgICAgICBQcmltYXJ5\nS2V5IHBrOwogICAgICAgIEZvcmVpZ25LZXlbXSBma3M7CiAgICAgICAgZm9y\nIChpbnQgaSA9IDA7IGkgPCBzY2hlbWFzLmxlbmd0aDsgaSsrKSB7CiAgICAg\nICAgICAgIHNlcXMgPSBzY2hlbWFzW2ldLmdldFNlcXVlbmNlcygpOwogICAg\nICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IHNlcXMubGVuZ3RoOyBqKysp\nCiAgICAgICAgICAgICAgICBpZiAoc2Vxc1tqXS5nZXRSZWZDb3VudCgpID09\nIDApCiAgICAgICAgICAgICAgICAgICAgc2NoZW1hc1tpXS5yZW1vdmVTZXF1\nZW5jZShzZXFzW2pdKTsKCiAgICAgICAgICAgIHRhYnMgPSBzY2hlbWFzW2ld\nLmdldFRhYmxlcygpOwogICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8\nIHRhYnMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICAgIHBrID0gdGFi\nc1tqXS5nZXRQcmltYXJ5S2V5KCk7CiAgICAgICAgICAgICAgICBma3MgPSB0\nYWJzW2pdLmdldEZvcmVpZ25LZXlzKCk7CiAgICAgICAgICAgICAgICBjb2xz\nID0gdGFic1tqXS5nZXRDb2x1bW5zKCk7CgogICAgICAgICAgICAgICAgaWYg\nKHBrICE9IG51bGwgJiYgcGsuZ2V0UmVmQ291bnQoKSA9PSAwKQogICAgICAg\nICAgICAgICAgICAgIHRhYnNbal0ucmVtb3ZlUHJpbWFyeUtleSgpOwoKICAg\nICAgICAgICAgICAgIGZvciAoaW50IGsgPSAwOyBrIDwgZmtzLmxlbmd0aDsg\naysrKQogICAgICAgICAgICAgICAgICAgIGlmIChma3Nba10uZ2V0UmVmQ291\nbnQoKSA9PSAwKQogICAgICAgICAgICAgICAgICAgICAgICB0YWJzW2pdLnJl\nbW92ZUZvcmVpZ25LZXkoZmtzW2tdKTsKCiAgICAgICAgICAgICAgICBmb3Ig\nKGludCBrID0gMDsgayA8IGNvbHMubGVuZ3RoOyBrKyspCiAgICAgICAgICAg\nICAgICAgICAgaWYgKGNvbHNba10uZ2V0UmVmQ291bnQoKSA9PSAwKQogICAg\nICAgICAgICAgICAgICAgICAgICB0YWJzW2pdLnJlbW92ZUNvbHVtbihjb2xz\nW2tdKTsKCiAgICAgICAgICAgICAgICBpZiAodGFic1tqXS5nZXRDb2x1bW5z\nKCkubGVuZ3RoID09IDApCiAgICAgICAgICAgICAgICAgICAgc2NoZW1hc1tp\nXS5yZW1vdmVUYWJsZSh0YWJzW2pdKTsKICAgICAgICAgICAgfQoKICAgICAg\nICAgICAgaWYgKHNjaGVtYXNbaV0uZ2V0VGFibGVzKCkubGVuZ3RoID09IDAp\nCiAgICAgICAgICAgICAgICByZW1vdmVTY2hlbWEoc2NoZW1hc1tpXSk7CiAg\nICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBPYmplY3QgY2xvbmUoKSB7CiAg\nICAgICAgU2NoZW1hR3JvdXAgY2xvbmUgPSBuZXdJbnN0YW5jZSgpOwogICAg\nICAgIGNsb25lLmNvcHkodGhpcyk7CiAgICAgICAgcmV0dXJuIGNsb25lOwog\nICAgfQoKICAgIC8qKgogICAgICogQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9m\nIHRoaXMgY2xhc3MuCiAgICAgKi8KICAgIHByb3RlY3RlZCBTY2hlbWFHcm91\ncCBuZXdJbnN0YW5jZSgpIHsKICAgICAgICByZXR1cm4gbmV3IFNjaGVtYUdy\nb3VwKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDb3B5IGNsb25lYWJsZSBz\ndGF0ZSBmcm9tIHRoZSBnaXZlbiBpbnN0YW5jZS4KICAgICAqLwogICAgcHJv\ndGVjdGVkIHZvaWQgY29weShTY2hlbWFHcm91cCBncm91cCkgewogICAgICAg\nIFNjaGVtYVtdIHNjaGVtYXMgPSBncm91cC5nZXRTY2hlbWFzKCk7CiAgICAg\nICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzY2hlbWFzLmxlbmd0aDsgaSsrKQog\nICAgICAgICAgICBpbXBvcnRTY2hlbWEoc2NoZW1hc1tpXSk7CgogICAgICAg\nIC8vIGhhdmUgdG8gZG8gZmtzIGFmdGVyIGFsbCBzY2hlbWFzIGFyZSBpbXBv\ncnRlZAogICAgICAgIFRhYmxlW10gdGFiczsKICAgICAgICBGb3JlaWduS2V5\nW10gZmtzOwogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc2NoZW1hcy5s\nZW5ndGg7IGkrKykgewogICAgICAgICAgICB0YWJzID0gc2NoZW1hc1tpXS5n\nZXRUYWJsZXMoKTsKICAgICAgICAgICAgZm9yIChpbnQgaiA9IDA7IGogPCB0\nYWJzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICBma3MgPSB0YWJz\nW2pdLmdldEZvcmVpZ25LZXlzKCk7CiAgICAgICAgICAgICAgICBmb3IgKGlu\ndCBrID0gMDsgayA8IGZrcy5sZW5ndGg7IGsrKykKICAgICAgICAgICAgICAg\nICAgICBnZXRTY2hlbWEoc2NoZW1hc1tpXS5nZXRJZGVudGlmaWVyKCkpLmdl\ndFRhYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICh0YWJzW2pdLmdldElk\nZW50aWZpZXIoKSkuaW1wb3J0Rm9yZWlnbktleShma3Nba10pOwogICAgICAg\nICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJu\nIGEgbmV3IHNjaGVtYSB3aXRoIHRoZSBnaXZlbiBuYW1lLgogICAgICogQGRl\ncHJlY2F0ZWQKICAgICAqLwogICAgcHJvdGVjdGVkIFNjaGVtYSBuZXdTY2hl\nbWEoU3RyaW5nIG5hbWUpIHsKICAgICAgICByZXR1cm4gbmV3IFNjaGVtYShu\nYW1lLCB0aGlzKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgU2NoZW1hIG5ld1Nj\naGVtYShEQklkZW50aWZpZXIgbmFtZSkgewogICAgICAgIHJldHVybiBuZXcg\nU2NoZW1hKG5hbWUsIHRoaXMpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0\ndXJuIGEgbmV3IHNlcXVlbmNlIHdpdGggdGhlIGdpdmVuIG5hbWUgYW5kIG93\nbmVyIHNjaGVtYS4KICAgICAqIEBkZXByZWNhdGVkCiAgICAgKi8KICAgIHBy\nb3RlY3RlZCBTZXF1ZW5jZSBuZXdTZXF1ZW5jZShTdHJpbmcgbmFtZSwgU2No\nZW1hIHNjaGVtYSkgewogICAgICAgIHJldHVybiBuZXcgU2VxdWVuY2UobmFt\nZSwgc2NoZW1hKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgU2VxdWVuY2UgbmV3\nU2VxdWVuY2UoREJJZGVudGlmaWVyIG5hbWUsIFNjaGVtYSBzY2hlbWEpIHsK\nICAgICAgICByZXR1cm4gbmV3IFNlcXVlbmNlKG5hbWUsIHNjaGVtYSk7CiAg\nICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gYSBuZXcgdGFibGUgd2l0aCB0\naGUgZ2l2ZW4gbmFtZSBhbmQgb3duZXIgc2NoZW1hLgogICAgICogQGRlcHJl\nY2F0ZWQKICAgICAqLwogICAgcHJvdGVjdGVkIFRhYmxlIG5ld1RhYmxlKFN0\ncmluZyBuYW1lLCBTY2hlbWEgc2NoZW1hKSB7CiAgICAgICAgcmV0dXJuIG5l\ndyBUYWJsZShuYW1lLCBzY2hlbWEpOwogICAgfQoKICAgIHByb3RlY3RlZCBU\nYWJsZSBuZXdUYWJsZShEQklkZW50aWZpZXIgbmFtZSwgU2NoZW1hIHNjaGVt\nYSkgewogICAgICAgIHJldHVybiBuZXcgVGFibGUobmFtZSwgc2NoZW1hKTsK\nICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiBhIG5ldyBjb2x1bW4gd2l0\naCB0aGUgZ2l2ZW4gbmFtZSBhbmQgb3duZXIgdGFibGUuCiAgICAgKiBAZGVw\ncmVjYXRlZAogICAgICovCiAgICBwcm90ZWN0ZWQgQ29sdW1uIG5ld0NvbHVt\nbihTdHJpbmcgbmFtZSwgVGFibGUgdGFibGUpIHsKICAgICAgICByZXR1cm4g\nbmV3IENvbHVtbihuYW1lLCB0YWJsZSk7CiAgICB9CgogICAgcHJvdGVjdGVk\nIENvbHVtbiBuZXdDb2x1bW4oREJJZGVudGlmaWVyIG5hbWUsIFRhYmxlIHRh\nYmxlKSB7CiAgICAgICAgcmV0dXJuIG5ldyBDb2x1bW4obmFtZSwgdGFibGUp\nOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIGEgbmV3IHByaW1hcnkg\na2V5IHdpdGggdGhlIGdpdmVuIG5hbWUgYW5kIG93bmVyIHRhYmxlLgogICAg\nICogQGRlcHJlY2F0ZWQKICAgICAqLwogICAgcHJvdGVjdGVkIFByaW1hcnlL\nZXkgbmV3UHJpbWFyeUtleShTdHJpbmcgbmFtZSwgVGFibGUgdGFibGUpIHsK\nICAgICAgICByZXR1cm4gbmV3IFByaW1hcnlLZXkobmFtZSwgdGFibGUpOwog\nICAgfQoKICAgIHByb3RlY3RlZCBQcmltYXJ5S2V5IG5ld1ByaW1hcnlLZXko\nREJJZGVudGlmaWVyIG5hbWUsIFRhYmxlIHRhYmxlKSB7CiAgICAgICAgcmV0\ndXJuIG5ldyBQcmltYXJ5S2V5KG5hbWUsIHRhYmxlKTsKICAgIH0KCiAgICAv\nKioKICAgICAqIFJldHVybiBhIG5ldyBpbmRleCB3aXRoIHRoZSBnaXZlbiBu\nYW1lIGFuZCBvd25lciB0YWJsZS4KICAgICAqIEBkZXByZWNhdGVkCiAgICAg\nKi8KICAgIHByb3RlY3RlZCBJbmRleCBuZXdJbmRleChTdHJpbmcgbmFtZSwg\nVGFibGUgdGFibGUpIHsKICAgICAgICByZXR1cm4gbmV3IEluZGV4KG5hbWUs\nIHRhYmxlKTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgSW5kZXggbmV3SW5kZXgo\nREJJZGVudGlmaWVyIG5hbWUsIFRhYmxlIHRhYmxlKSB7CiAgICAgICAgcmV0\ndXJuIG5ldyBJbmRleChuYW1lLCB0YWJsZSk7CiAgICB9CgogICAgLyoqCiAg\nICAgKiBSZXR1cm4gYSBuZXcgdW5pcXVlIGNvbnN0cmFpbnQgd2l0aCB0aGUg\nZ2l2ZW4gbmFtZSBhbmQgb3duZXIgdGFibGUuCiAgICAgKiBAZGVwcmVjYXRl\nZAogICAgICovCiAgICBwcm90ZWN0ZWQgVW5pcXVlIG5ld1VuaXF1ZShTdHJp\nbmcgbmFtZSwgVGFibGUgdGFibGUpIHsKICAgICAgICByZXR1cm4gbmV3IFVu\naXF1ZShuYW1lLCB0YWJsZSk7CiAgICB9CgogICAgcHJvdGVjdGVkIFVuaXF1\nZSBuZXdVbmlxdWUoREJJZGVudGlmaWVyIG5hbWUsIFRhYmxlIHRhYmxlKSB7\nCiAgICAgICAgcmV0dXJuIG5ldyBVbmlxdWUobmFtZSwgdGFibGUpOwogICAg\nfQoKICAgIC8qKgogICAgICogUmV0dXJuIGEgbmV3IGZvcmVpZ24ga2V5IHdp\ndGggdGhlIGdpdmVuIG5hbWUgYW5kIG93bmVyIHRhYmxlLgogICAgICogQGRl\ncHJlY2F0ZWQKICAgICAqLwogICAgcHJvdGVjdGVkIEZvcmVpZ25LZXkgbmV3\nRm9yZWlnbktleShTdHJpbmcgbmFtZSwgVGFibGUgdGFibGUpIHsKICAgICAg\nICByZXR1cm4gbmV3IEZvcmVpZ25LZXkobmFtZSwgdGFibGUpOwogICAgfQoK\nICAgIHByb3RlY3RlZCBGb3JlaWduS2V5IG5ld0ZvcmVpZ25LZXkoREJJZGVu\ndGlmaWVyIG5hbWUsIFRhYmxlIHRhYmxlKSB7CiAgICAgICAgcmV0dXJuIG5l\ndyBGb3JlaWduS2V5KG5hbWUsIHRhYmxlKTsKICAgIH0KCn0K\n","encoding":"base64"}

