{"sha":"664f8c516dee739892c48827792b18057728cee3","node_id":"MDQ6QmxvYjIwNjM2NDo2NjRmOGM1MTZkZWU3Mzk4OTJjNDg4Mjc3OTJiMTgwNTc3MjhjZWUz","size":21744,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/664f8c516dee739892c48827792b18057728cee3","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWE7CgppbXBv\ncnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEuaW8uSW5wdXRT\ndHJlYW1SZWFkZXI7CmltcG9ydCBqYXZhLmlvLlJlYWRlcjsKaW1wb3J0IGph\ndmEudXRpbC5Db2xsZWN0aW9uOwppbXBvcnQgamF2YS51dGlsLkl0ZXJhdG9y\nOwppbXBvcnQgamF2YS51dGlsLkxpbmtlZExpc3Q7CgppbXBvcnQgb3JnLnht\nbC5zYXguQXR0cmlidXRlczsKaW1wb3J0IG9yZy54bWwuc2F4LkxvY2F0b3I7\nCmltcG9ydCBvcmcueG1sLnNheC5TQVhFeGNlcHRpb247CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuamRiYy5jb25mLkpEQkNDb25maWd1cmF0aW9uOwpp\nbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLkRCRGljdGlvbmFy\neTsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5saWIubWV0YS5Tb3VyY2VU\ncmFja2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxpYi5tZXRhLlhN\nTE1ldGFEYXRhUGFyc2VyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmxp\nYi51dGlsLkxvY2FsaXplcjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5s\naWIudXRpbC5Mb2NhbGl6ZXIuTWVzc2FnZTsKaW1wb3J0IG9yZy5hcGFjaGUu\nb3BlbmpwYS51dGlsLlVzZXJFeGNlcHRpb247CgppbXBvcnQgc2VycC51dGls\nLk51bWJlcnM7CgovKioKICogQ3VzdG9tIFNBWCBwYXJzZXIgdXNlZCB0byBw\nYXJzZSB7QGxpbmsgU2NoZW1hfSBvYmplY3RzLiBUaGUgcGFyc2VyCiAqIHdp\nbGwgcGxhY2UgYWxsIHBhcnNlZCBzY2hlbWFzIGludG8gdGhlIGN1cnJlbnQg\ne0BsaW5rIFNjaGVtYUdyb3VwfSwgc2V0CiAqIHZpYSB0aGUge0BsaW5rICNz\nZXRTY2hlbWFHcm91cH0gbWV0aG9kLiBUaGlzIGFsbG93cyBwYXJzaW5nIG9m\nCiAqIG11bHRpcGxlIGZpbGVzIGludG8gYSBzaW5nbGUgc2NoZW1hIGdyb3Vw\nLgogKiAgVGhlIHBhcnNlciBkZXNlcmlhbGl6ZXMgZnJvbSB0aGUgZm9sbG93\naW5nIFhNTCBmb3JtYXQ6PGJyIC8+CiAqIDxjb2RlPiAmbHQ7IUVMRU1FTlQg\nc2NoZW1hcyAoc2NoZW1hKSsmZ3Q7PGJyIC8+CiAqICZsdDshRUxFTUVOVCBz\nY2hlbWEgKHRhYmxlfHNlcXVlbmNlKSsmZ3Q7PGJyIC8+CiAqICZsdDshQVRU\nTElTVCBzY2hlbWEgbmFtZSBDREFUQSAjSU1QTElFRCZndDs8YnIgLz4KICog\nJmx0OyFFTEVNRU5UIHRhYmxlIChjb2x1bW58aW5kZXh8cGt8Zmt8dW5pcXVl\nKSsmZ3Q7PGJyIC8+CiAqICZsdDshQVRUTElTVCB0YWJsZSBuYW1lIENEQVRB\nICNSRVFVSVJFRCZndDs8YnIgLz4KICogJmx0OyFFTEVNRU5UIGNvbHVtbiBF\nTVBUWSZndDs8YnIgLz4KICogJmx0OyFBVFRMSVNUIGNvbHVtbiBuYW1lIENE\nQVRBICNSRVFVSVJFRCZndDs8YnIgLz4KICogJmx0OyFBVFRMSVNUIGNvbHVt\nbiB0eXBlIChhcnJheXxiaWdpbnR8YmluYXJ5fGJpdHxibG9ifGNoYXJ8Y2xv\nYgogKiB8ZGF0ZXxkZWNpbWFsfGRpc3RpbmN0fGRvdWJsZXxmbG9hdHxpbnRl\nZ2VyfGphdmFfb2JqZWN0CiAqIHxsb25ndmFyYmluYXJ5fGxvbmd2YXJjaGFy\nfG51bGx8bnVtZXJpY3xvdGhlcnxyZWFsfHJlZnxzbWFsbGludHxzdHJ1Y3QK\nICogfHRpbWV8dGltc3RhbXB8dGlueWludHx2YXJiaW5hcnl8dmFyY2hhcikg\nI1JFUVVJUkVEJmd0OzxiciAvPgogKiAmbHQ7IUFUVExJU1QgY29sdW1uIHR5\ncGUtbmFtZSBDREFUQSAjSU1QTElFRCZndDs8YnIgLz4KICogJmx0OyFBVFRM\nSVNUIGNvbHVtbiBzaXplIENEQVRBICNJTVBMSUVEJmd0OzxiciAvPgogKiAm\nbHQ7IUFUVExJU1QgY29sdW1uIGRlY2ltYWwtZGlnaXRzIENEQVRBICNJTVBM\nSUVEJmd0OzxiciAvPgogKiAmbHQ7IUFUVExJU1QgY29sdW1uIG5vdC1udWxs\nICh0cnVlfGZhbHNlKSAiZmFsc2UiJmd0OzxiciAvPgogKiAmbHQ7IUFUVExJ\nU1QgY29sdW1uIGRlZmF1bHQgQ0RBVEEgI0lNUExJRUQmZ3Q7PGJyIC8+CiAq\nICZsdDshQVRUTElTVCBjb2x1bW4gYXV0by1hc3NpZ24gKHRydWV8ZmFsc2Up\nICJmYWxzZSImZ3Q7PGJyIC8+CiAqICZsdDshRUxFTUVOVCBpbmRleCAob24p\nKiZndDs8YnIgLz4KICogJmx0OyFBVFRMSVNUIGluZGV4IG5hbWUgQ0RBVEEg\nI1JFUVVJUkVEJmd0OzxiciAvPgogKiAmbHQ7IUFUVExJU1QgaW5kZXggY29s\ndW1uIENEQVRBICNJTVBMSUVEJmd0OzxiciAvPgogKiAmbHQ7IUFUVExJU1Qg\naW5kZXggdW5pcXVlICh0cnVlfGZhbHNlKSAiZmFsc2UiJmd0OzxiciAvPgog\nKiAmbHQ7IUVMRU1FTlQgb24gRU1QVFkmZ3Q7PGJyIC8+CiAqICZsdDshQVRU\nTElTVCBvbiBjb2x1bW4gQ0RBVEEgI1JFUVVJUkVEJmd0OzxiciAvPgogKiAm\nbHQ7IUVMRU1FTlQgcGsgKG9uKSomZ3Q7PGJyIC8+ICZsdDshQVRUTElTVCBw\nayBuYW1lIENEQVRBICNJTVBMSUVEJmd0OzxiciAvPgogKiAmbHQ7IUFUVExJ\nU1QgcGsgY29sdW1uIENEQVRBICNJTVBMSUVEJmd0OzxiciAvPgogKiAmbHQ7\nIUVMRU1FTlQgZmsgKGpvaW4pKiZndDs8YnIgLz4KICogJmx0OyFBVFRMSVNU\nIGZrIG5hbWUgQ0RBVEEgI0lNUExJRUQmZ3Q7PGJyIC8+CiAqICZsdDshQVRU\nTElTVCBmayBkZWZlcnJlZCAodHJ1ZXxmYWxzZSkgImZhbHNlIiZndDs8YnIg\nLz4KICogJmx0OyFBVFRMSVNUIGZrIGNvbHVtbiBDREFUQSAjSU1QTElFRCZn\ndDs8YnIgLz4KICogJmx0OyFBVFRMSVNUIGZrIHRvLXRhYmxlIENEQVRBICNS\nRVFVSVJFRCZndDs8YnIgLz4KICogJmx0OyFBVFRMSVNUIGZrIGRlbGV0ZS1h\nY3Rpb24gKGNhc2NhZGV8ZGVmYXVsdHxyZXN0cmljdHxub25lfG51bGwpCiAq\nICJub25lIiZndDs8YnIgLz4KICogJmx0OyFBVFRMSVNUIGZrIHVwZGF0ZS1h\nY3Rpb24gKGNhc2NhZGV8ZGVmYXVsdHxyZXN0cmljdHxub25lfG51bGwpCiAq\nICJub25lIiZndDs8YnIgLz4gJmx0OyFFTEVNRU5UIHVuaXF1ZSAob24pKiZn\ndDs8YnIgLz4KICogJmx0OyFBVFRMSVNUIHVuaXF1ZSBuYW1lIENEQVRBICNJ\nTVBMSUVEJmd0OzxiciAvPgogKiAmbHQ7IUFUVExJU1QgdW5pcXVlIGNvbHVt\nbiBDREFUQSAjSU1QTElFRCZndDs8YnIgLz4KICogJmx0OyFBVFRMSVNUIHVu\naXF1ZSBkZWZlcnJlZCAodHJ1ZXxmYWxzZSkgImZhbHNlIiZndDs8YnIgLz4K\nICogJmx0OyFFTEVNRU5UIGpvaW4gRU1QVFkmZ3Q7PGJyIC8+CiAqICZsdDsh\nQVRUTElTVCBqb2luIGNvbHVtbiBDREFUQSAjSU1QTElFRCZndDs8YnIgLz4K\nICogJmx0OyFBVFRMSVNUIGpvaW4gdmFsdWUgQ0RBVEEgI0lNUExJRUQmZ3Q7\nPGJyIC8+CiAqICZsdDshQVRUTElTVCBqb2luIHRvLWNvbHVtbiBDREFUQSAj\nUkVRVUlSRUQmZ3Q7PGJyIC8+CiAqICZsdDshRUxFTUVOVCBzZXF1ZW5jZSBF\nTVBUWSZndDs8YnIgLz4KICogJmx0OyFBVFRMSVNUIHNlcXVlbmNlIG5hbWUg\nQ0RBVEEgI1JFUVVJUkVEJmd0OzxiciAvPgogKiAmbHQ7IUFUVExJU1Qgc2Vx\ndWVuY2UgaW5pdGlhbC12YWx1ZSBDREFUQSAjSU1QTElFRCZndDs8YnIgLz4K\nICogJmx0OyFBVFRMSVNUIHNlcXVlbmNlIGluY3JlbWVudCBDREFUQSAjSU1Q\nTElFRCZndDs8YnIgLz4KICogJmx0OyFBVFRMSVNUIHNlcXVlbmNlIGFsbG9j\nYXRlIENEQVRBICNJTVBMSUVEJmd0OzxiciAvPgogKiA8L2NvZGU+CiAqICBT\nY2hlbWEgcGFyc2VycyBhcmUgbm90IHRocmVhZHNhZmUuCiAqCiAqIEBhdXRo\nb3IgQWJlIFdoaXRlCiAqIEBub2phdmFkb2MKICovCnB1YmxpYyBjbGFzcyBY\nTUxTY2hlbWFQYXJzZXIKICAgIGV4dGVuZHMgWE1MTWV0YURhdGFQYXJzZXIK\nICAgIGltcGxlbWVudHMgU2NoZW1hUGFyc2VyIHsKCiAgICBwcml2YXRlIHN0\nYXRpYyBmaW5hbCBMb2NhbGl6ZXIgX2xvYyA9IExvY2FsaXplci5mb3JQYWNr\nYWdlCiAgICAgICAgKFhNTFNjaGVtYVBhcnNlci5jbGFzcyk7CgogICAgcHJp\ndmF0ZSBmaW5hbCBEQkRpY3Rpb25hcnkgX2RpY3Q7CgogICAgLy8gc3RhdGUg\nZm9yIGN1cnJlbnQgcGFyc2UKICAgIHByaXZhdGUgU2NoZW1hR3JvdXAgX2dy\nb3VwID0gbnVsbDsKICAgIHByaXZhdGUgU2NoZW1hIF9zY2hlbWEgPSBudWxs\nOwogICAgcHJpdmF0ZSBUYWJsZSBfdGFibGUgPSBudWxsOwogICAgcHJpdmF0\nZSBQcmltYXJ5S2V5SW5mbyBfcGsgPSBudWxsOwogICAgcHJpdmF0ZSBJbmRl\neEluZm8gX2luZGV4ID0gbnVsbDsKICAgIHByaXZhdGUgVW5pcXVlSW5mbyBf\ndW5xID0gbnVsbDsKICAgIHByaXZhdGUgRm9yZWlnbktleUluZm8gX2ZrID0g\nbnVsbDsKICAgIHByaXZhdGUgYm9vbGVhbiBfZGVsYXkgPSBmYWxzZTsKCiAg\nICAvLyB1c2VkIHRvIGNvbGxlY3QgaW5mbyBvbiBzY2hlbWEgZWxlbWVudHMg\nYmVmb3JlIHRoZXkncmUgcmVzb2x2ZWQKICAgIHByaXZhdGUgZmluYWwgQ29s\nbGVjdGlvbjxQcmltYXJ5S2V5SW5mbz4gX3BrSW5mb3MgPSBuZXcgTGlua2Vk\nTGlzdDxQcmltYXJ5S2V5SW5mbz4oKTsKICAgIHByaXZhdGUgZmluYWwgQ29s\nbGVjdGlvbjxJbmRleEluZm8+IF9pbmRleEluZm9zID0gbmV3IExpbmtlZExp\nc3Q8SW5kZXhJbmZvPigpOwogICAgcHJpdmF0ZSBmaW5hbCBDb2xsZWN0aW9u\nPFVuaXF1ZUluZm8+IF91bnFJbmZvcyA9IG5ldyBMaW5rZWRMaXN0PFVuaXF1\nZUluZm8+KCk7CiAgICBwcml2YXRlIGZpbmFsIENvbGxlY3Rpb248Rm9yZWln\nbktleUluZm8+IF9ma0luZm9zID0gbmV3IExpbmtlZExpc3Q8Rm9yZWlnbktl\neUluZm8+KCk7CgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3Rvci4gU3VwcGx5\nIGNvbmZpZ3VyYXRpb24uCiAgICAgKi8KICAgIHB1YmxpYyBYTUxTY2hlbWFQ\nYXJzZXIoSkRCQ0NvbmZpZ3VyYXRpb24gY29uZikgewogICAgICAgIF9kaWN0\nID0gY29uZi5nZXREQkRpY3Rpb25hcnlJbnN0YW5jZSgpOwogICAgICAgIHNl\ndExvZyhjb25mLmdldExvZyhKREJDQ29uZmlndXJhdGlvbi5MT0dfU0NIRU1B\nKSk7CiAgICAgICAgc2V0UGFyc2VUZXh0KGZhbHNlKTsKICAgICAgICBzZXRT\ndWZmaXgoIi5zY2hlbWEiKTsKICAgIH0KCiAgICBwdWJsaWMgYm9vbGVhbiBn\nZXREZWxheUNvbnN0cmFpbnRSZXNvbHZlKCkgewogICAgICAgIHJldHVybiBf\nZGVsYXk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0RGVsYXlDb25zdHJh\naW50UmVzb2x2ZShib29sZWFuIGRlbGF5KSB7CiAgICAgICAgX2RlbGF5ID0g\nZGVsYXk7CiAgICB9CgogICAgcHVibGljIHZvaWQgcmVzb2x2ZUNvbnN0cmFp\nbnRzKCkgewogICAgICAgIHJlc29sdmVQcmltYXJ5S2V5cygpOwogICAgICAg\nIHJlc29sdmVJbmRleGVzKCk7CiAgICAgICAgcmVzb2x2ZUZvcmVpZ25LZXlz\nKCk7CiAgICAgICAgcmVzb2x2ZVVuaXF1ZXMoKTsKICAgICAgICBjbGVhckNv\nbnN0cmFpbnRJbmZvKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDbGVhciBj\nb25zdHJhaW50IGluZm9zLgogICAgICovCiAgICBwcml2YXRlIHZvaWQgY2xl\nYXJDb25zdHJhaW50SW5mbygpIHsKICAgICAgICBfcGtJbmZvcy5jbGVhcigp\nOwogICAgICAgIF9pbmRleEluZm9zLmNsZWFyKCk7CiAgICAgICAgX2ZrSW5m\nb3MuY2xlYXIoKTsKICAgICAgICBfdW5xSW5mb3MuY2xlYXIoKTsKICAgIH0K\nCiAgICBwdWJsaWMgU2NoZW1hR3JvdXAgZ2V0U2NoZW1hR3JvdXAoKSB7CiAg\nICAgICAgaWYgKF9ncm91cCA9PSBudWxsKQogICAgICAgICAgICBfZ3JvdXAg\nPSBuZXcgU2NoZW1hR3JvdXAoKTsKICAgICAgICByZXR1cm4gX2dyb3VwOwog\nICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldFNjaGVtYUdyb3VwKFNjaGVtYUdy\nb3VwIGdyb3VwKSB7CiAgICAgICAgX2dyb3VwID0gZ3JvdXA7CiAgICB9Cgog\nICAgLyoqCiAgICAgKiBQYXJzZSB0aGUgc2NoZW1hIHJlbGF0aW5nIHRvIHRo\nZSBnaXZlbiBjbGFzcy4gVGhlIHNjaGVtYXMgd2lsbAogICAgICogYmUgYWRk\nZWQgdG8gdGhlIGN1cnJlbnQgc2NoZW1hIGdyb3VwLgogICAgICovCiAgICBw\ncm90ZWN0ZWQgdm9pZCBmaW5pc2goKSB7CiAgICAgICAgLy8gbm93IHJlc29s\ndmUgcGssIGlkeCwgZmsgaW5mbwogICAgICAgIHN1cGVyLmZpbmlzaCgpOwog\nICAgICAgIGlmICghX2RlbGF5KQogICAgICAgICAgICByZXNvbHZlQ29uc3Ry\nYWludHMoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRyYW5zZm9ybXMgdGhl\nIGNvbGxlY3RlZCBwcmltYXJ5IGtleSBpbmZvcm1hdGlvbiBpbnRvIGFjdHVh\nbAogICAgICogcHJpbWFyeSBrZXlzIG9uIHRoZSBzY2hlbWEgdGFibGVzLgog\nICAgICovCiAgICBwcml2YXRlIHZvaWQgcmVzb2x2ZVByaW1hcnlLZXlzKCkg\newogICAgICAgIFByaW1hcnlLZXlJbmZvIHBrSW5mbzsKICAgICAgICBTdHJp\nbmcgY29sTmFtZTsKICAgICAgICBDb2x1bW4gY29sOwogICAgICAgIGZvciAo\nSXRlcmF0b3I8UHJpbWFyeUtleUluZm8+IGl0ciA9IF9wa0luZm9zLml0ZXJh\ndG9yKCk7IGl0ci5oYXNOZXh0KCk7KSB7CiAgICAgICAgICAgIHBrSW5mbyA9\nIGl0ci5uZXh0KCk7CiAgICAgICAgICAgIGZvciAoSXRlcmF0b3I8U3RyaW5n\nPiBjb2xzID0gcGtJbmZvLmNvbHMuaXRlcmF0b3IoKTsgY29scy5oYXNOZXh0\nKCk7KSB7CiAgICAgICAgICAgICAgICBjb2xOYW1lID0gY29scy5uZXh0KCk7\nCiAgICAgICAgICAgICAgICBjb2wgPSBwa0luZm8ucGsuZ2V0VGFibGUoKS5n\nZXRDb2x1bW4oY29sTmFtZSk7CiAgICAgICAgICAgICAgICBpZiAoY29sID09\nIG51bGwpCiAgICAgICAgICAgICAgICAgICAgdGhyb3dVc2VyRXhjZXB0aW9u\nKF9sb2MuZ2V0KCJway1yZXNvbHZlIiwgbmV3IE9iamVjdFtdCiAgICAgICAg\nICAgICAgICAgICAgICAgIHsgY29sTmFtZSwgcGtJbmZvLnBrLmdldFRhYmxl\nKCkgfSkpOwogICAgICAgICAgICAgICAgcGtJbmZvLnBrLmFkZENvbHVtbihj\nb2wpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8qKgog\nICAgICogVHJhbnNmb3JtcyB0aGUgY29sbGVjdGVkIGluZGV4IGluZm9ybWF0\naW9uIGludG8gYWN0dWFsCiAgICAgKiBpbmRleGVzIG9uIHRoZSBzY2hlbWEg\ndGFibGVzLgogICAgICovCiAgICBwcml2YXRlIHZvaWQgcmVzb2x2ZUluZGV4\nZXMoKSB7CiAgICAgICAgSW5kZXhJbmZvIGluZGV4SW5mbzsKICAgICAgICBT\ndHJpbmcgY29sTmFtZTsKICAgICAgICBDb2x1bW4gY29sOwogICAgICAgIGZv\nciAoSXRlcmF0b3I8SW5kZXhJbmZvPiBpdHIgPSBfaW5kZXhJbmZvcy5pdGVy\nYXRvcigpOyBpdHIuaGFzTmV4dCgpOykgewogICAgICAgICAgICBpbmRleElu\nZm8gPSBpdHIubmV4dCgpOwogICAgICAgICAgICBmb3IgKEl0ZXJhdG9yPFN0\ncmluZz4gY29scyA9IGluZGV4SW5mby5jb2xzLml0ZXJhdG9yKCk7IGNvbHMu\naGFzTmV4dCgpOykgewogICAgICAgICAgICAgICAgY29sTmFtZSA9IGNvbHMu\nbmV4dCgpOwogICAgICAgICAgICAgICAgY29sID0gaW5kZXhJbmZvLmluZGV4\nLmdldFRhYmxlKCkuZ2V0Q29sdW1uKGNvbE5hbWUpOwogICAgICAgICAgICAg\nICAgaWYgKGNvbCA9PSBudWxsKQogICAgICAgICAgICAgICAgICAgIHRocm93\nVXNlckV4Y2VwdGlvbihfbG9jLmdldCgiaW5kZXgtcmVzb2x2ZSIsIG5ldyBP\nYmplY3RbXQogICAgICAgICAgICAgICAgICAgICAgICB7IGluZGV4SW5mby5p\nbmRleCwgY29sTmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlu\nZGV4SW5mby5pbmRleC5nZXRUYWJsZSgpIH0pKTsKICAgICAgICAgICAgICAg\nIGluZGV4SW5mby5pbmRleC5hZGRDb2x1bW4oY29sKTsKICAgICAgICAgICAg\nfQogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFRyYW5zZm9ybXMg\ndGhlIGNvbGxlY3RlZCBmb3JlaWduIGtleSBpbmZvcm1hdGlvbiBpbnRvIGFj\ndHVhbAogICAgICogZm9yZWlnbiBrZXlzIG9uIHRoZSBzY2hlbWEgdGFibGVz\nLgogICAgICovCiAgICBwcml2YXRlIHZvaWQgcmVzb2x2ZUZvcmVpZ25LZXlz\nKCkgewogICAgICAgIEZvcmVpZ25LZXlJbmZvIGZrSW5mbzsKICAgICAgICBU\nYWJsZSB0b1RhYmxlOwogICAgICAgIENvbHVtbiBjb2w7CiAgICAgICAgU3Ry\naW5nIGNvbE5hbWU7CiAgICAgICAgQ29sdW1uIHBrQ29sOwogICAgICAgIFN0\ncmluZyBwa0NvbE5hbWU7CiAgICAgICAgUHJpbWFyeUtleSBwazsKICAgICAg\nICBJdGVyYXRvcjxTdHJpbmc+IHBrczsKICAgICAgICBJdGVyYXRvcjxTdHJp\nbmc+IGNvbHM7CiAgICAgICAgZm9yIChJdGVyYXRvcjxGb3JlaWduS2V5SW5m\nbz4gaXRyID0gX2ZrSW5mb3MuaXRlcmF0b3IoKTsgaXRyLmhhc05leHQoKTsp\nIHsKICAgICAgICAgICAgZmtJbmZvID0gaXRyLm5leHQoKTsKICAgICAgICAg\nICAgdG9UYWJsZSA9IF9ncm91cC5maW5kVGFibGUoZmtJbmZvLnRvVGFibGUp\nOwogICAgICAgICAgICBpZiAodG9UYWJsZSA9PSBudWxsIHx8IHRvVGFibGUu\nZ2V0UHJpbWFyeUtleSgpID09IG51bGwpCiAgICAgICAgICAgICAgICB0aHJv\nd1VzZXJFeGNlcHRpb24oX2xvYy5nZXQoImZrLXRvdGFibGUiLCBuZXcgT2Jq\nZWN0W10KICAgICAgICAgICAgICAgICAgICB7IGZrSW5mby5maywgZmtJbmZv\nLnRvVGFibGUsIGZrSW5mby5may5nZXRUYWJsZSgpIH0pKTsKCiAgICAgICAg\nICAgIC8vIGNoZWNrIGlmIG9ubHkgb25lIGZrIGNvbHVtbiBsaXN0ZWQgdXNp\nbmcgc2hvcnRjdXQKICAgICAgICAgICAgcGsgPSB0b1RhYmxlLmdldFByaW1h\ncnlLZXkoKTsKICAgICAgICAgICAgaWYgKGZrSW5mby5jb2xzLnNpemUoKSA9\nPSAxICYmIGZrSW5mby5wa3Muc2l6ZSgpID09IDApCiAgICAgICAgICAgICAg\nICBma0luZm8ucGtzLmFkZChway5nZXRDb2x1bW5zKClbMF0uZ2V0TmFtZSgp\nKTsKCiAgICAgICAgICAgIC8vIG1ha2Ugam9pbnMKICAgICAgICAgICAgcGtz\nID0gZmtJbmZvLnBrcy5pdGVyYXRvcigpOwogICAgICAgICAgICBmb3IgKGNv\nbHMgPSBma0luZm8uY29scy5pdGVyYXRvcigpOyBjb2xzLmhhc05leHQoKTsp\nIHsKICAgICAgICAgICAgICAgIGNvbE5hbWUgPSAoU3RyaW5nKSBjb2xzLm5l\neHQoKTsKICAgICAgICAgICAgICAgIGNvbCA9IGZrSW5mby5may5nZXRUYWJs\nZSgpLmdldENvbHVtbihjb2xOYW1lKTsKICAgICAgICAgICAgICAgIGlmIChj\nb2wgPT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICB0aHJvd1VzZXJFeGNl\ncHRpb24oX2xvYy5nZXQoImZrLW5vY29sIiwKICAgICAgICAgICAgICAgICAg\nICAgICAgZmtJbmZvLmZrLCBjb2xOYW1lLCBma0luZm8uZmsuZ2V0VGFibGUo\nKSkpOwoKICAgICAgICAgICAgICAgIHBrQ29sTmFtZSA9IChTdHJpbmcpIHBr\ncy5uZXh0KCk7CiAgICAgICAgICAgICAgICBwa0NvbCA9IHRvVGFibGUuZ2V0\nQ29sdW1uKHBrQ29sTmFtZSk7CiAgICAgICAgICAgICAgICBpZiAocGtDb2wg\nPT0gbnVsbCkKICAgICAgICAgICAgICAgICAgICB0aHJvd1VzZXJFeGNlcHRp\nb24oX2xvYy5nZXQoImZrLW5vcGtjb2wiLCBuZXcgT2JqZWN0W10KICAgICAg\nICAgICAgICAgICAgICAgICAgeyBma0luZm8uZmssIHBrQ29sTmFtZSwgdG9U\nYWJsZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZrSW5mby5may5n\nZXRUYWJsZSgpIH0pKTsKCiAgICAgICAgICAgICAgICBma0luZm8uZmsuam9p\nbihjb2wsIHBrQ29sKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8g\nbWFrZSBjb25zdGFudCBqb2lucwogICAgICAgICAgICBjb2xzID0gZmtJbmZv\nLmNvbnN0Q29scy5pdGVyYXRvcigpOwogICAgICAgICAgICBmb3IgKEl0ZXJh\ndG9yPE9iamVjdD4gdmFscyA9IGZrSW5mby5jb25zdHMuaXRlcmF0b3IoKTsg\ndmFscy5oYXNOZXh0KCk7KSB7CiAgICAgICAgICAgICAgICBjb2xOYW1lID0g\nY29scy5uZXh0KCk7CiAgICAgICAgICAgICAgICBjb2wgPSBma0luZm8uZmsu\nZ2V0VGFibGUoKS5nZXRDb2x1bW4oY29sTmFtZSk7CiAgICAgICAgICAgICAg\nICBpZiAoY29sID09IG51bGwpCiAgICAgICAgICAgICAgICAgICAgdGhyb3dV\nc2VyRXhjZXB0aW9uKF9sb2MuZ2V0KCJmay1ub2NvbCIsCiAgICAgICAgICAg\nICAgICAgICAgICAgIGZrSW5mby5maywgY29sTmFtZSwgZmtJbmZvLmZrLmdl\ndFRhYmxlKCkpKTsKCiAgICAgICAgICAgICAgICBma0luZm8uZmsuam9pbkNv\nbnN0YW50KGNvbCwgdmFscy5uZXh0KCkpOwogICAgICAgICAgICB9CgogICAg\nICAgICAgICBwa3MgPSBma0luZm8uY29uc3RDb2xzUEsuaXRlcmF0b3IoKTsK\nICAgICAgICAgICAgZm9yIChJdGVyYXRvcjxPYmplY3Q+IHZhbHMgPSBma0lu\nZm8uY29uc3RzUEsuaXRlcmF0b3IoKTsgdmFscy5oYXNOZXh0KCk7KSB7CiAg\nICAgICAgICAgICAgICBwa0NvbE5hbWUgPSBwa3MubmV4dCgpOwogICAgICAg\nICAgICAgICAgcGtDb2wgPSB0b1RhYmxlLmdldENvbHVtbihwa0NvbE5hbWUp\nOwogICAgICAgICAgICAgICAgaWYgKHBrQ29sID09IG51bGwpCiAgICAgICAg\nICAgICAgICAgICAgdGhyb3dVc2VyRXhjZXB0aW9uKF9sb2MuZ2V0KCJmay1u\nb3BrY29sIiwgbmV3IE9iamVjdFtdCiAgICAgICAgICAgICAgICAgICAgICAg\nIHsgZmtJbmZvLmZrLCBwa0NvbE5hbWUsIHRvVGFibGUsCiAgICAgICAgICAg\nICAgICAgICAgICAgICAgICBma0luZm8uZmsuZ2V0VGFibGUoKSB9KSk7Cgog\nICAgICAgICAgICAgICAgZmtJbmZvLmZrLmpvaW5Db25zdGFudCh2YWxzLm5l\neHQoKSwgcGtDb2wpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoK\nICAgIC8qKgogICAgICogVHJhbnNmb3JtcyB0aGUgY29sbGVjdGVkIHVuaXF1\nZSBjb25zdHJhaW50IGluZm9ybWF0aW9uIGludG8gYWN0dWFsCiAgICAgKiBj\nb25zdHJhaW50cyBvbiB0aGUgc2NoZW1hIHRhYmxlcy4KICAgICAqLwogICAg\ncHJpdmF0ZSB2b2lkIHJlc29sdmVVbmlxdWVzKCkgewogICAgICAgIFVuaXF1\nZUluZm8gdW5xSW5mbzsKICAgICAgICBTdHJpbmcgY29sTmFtZTsKICAgICAg\nICBDb2x1bW4gY29sOwogICAgICAgIGZvciAoSXRlcmF0b3I8VW5pcXVlSW5m\nbz4gaXRyID0gX3VucUluZm9zLml0ZXJhdG9yKCk7IGl0ci5oYXNOZXh0KCk7\nKSB7CiAgICAgICAgICAgIHVucUluZm8gPSBpdHIubmV4dCgpOwogICAgICAg\nICAgICBmb3IgKEl0ZXJhdG9yPFN0cmluZz4gY29scyA9IHVucUluZm8uY29s\ncy5pdGVyYXRvcigpOyBjb2xzLmhhc05leHQoKTspIHsKICAgICAgICAgICAg\nICAgIGNvbE5hbWUgPSAoU3RyaW5nKSBjb2xzLm5leHQoKTsKICAgICAgICAg\nICAgICAgIGNvbCA9IHVucUluZm8udW5xLmdldFRhYmxlKCkuZ2V0Q29sdW1u\nKGNvbE5hbWUpOwogICAgICAgICAgICAgICAgaWYgKGNvbCA9PSBudWxsKQog\nICAgICAgICAgICAgICAgICAgIHRocm93VXNlckV4Y2VwdGlvbihfbG9jLmdl\ndCgidW5xLXJlc29sdmUiLCBuZXcgT2JqZWN0W10KICAgICAgICAgICAgICAg\nICAgICAgICAgeyB1bnFJbmZvLnVucSwgY29sTmFtZSwgdW5xSW5mby51bnEu\nZ2V0VGFibGUoKSB9KSk7CiAgICAgICAgICAgICAgICB1bnFJbmZvLnVucS5h\nZGRDb2x1bW4oY29sKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0K\nCiAgICBwcm90ZWN0ZWQgdm9pZCByZXNldCgpIHsKICAgICAgICBfc2NoZW1h\nID0gbnVsbDsKICAgICAgICBfdGFibGUgPSBudWxsOwogICAgICAgIF9wayA9\nIG51bGw7CiAgICAgICAgX2luZGV4ID0gbnVsbDsKICAgICAgICBfZmsgPSBu\ndWxsOwogICAgICAgIF91bnEgPSBudWxsOwogICAgICAgIGlmICghX2RlbGF5\nKQogICAgICAgICAgICBjbGVhckNvbnN0cmFpbnRJbmZvKCk7CiAgICB9Cgog\nICAgcHJvdGVjdGVkIFJlYWRlciBnZXREb2NUeXBlKCkKICAgICAgICB0aHJv\nd3MgSU9FeGNlcHRpb24gewogICAgICAgIHJldHVybiBuZXcgSW5wdXRTdHJl\nYW1SZWFkZXIoWE1MU2NoZW1hUGFyc2VyLmNsYXNzCiAgICAgICAgICAgIC5n\nZXRSZXNvdXJjZUFzU3RyZWFtKCJzY2hlbWFzLWRvY3R5cGUucnNyYyIpKTsK\nICAgIH0KCiAgICBwcm90ZWN0ZWQgYm9vbGVhbiBzdGFydEVsZW1lbnQoU3Ry\naW5nIG5hbWUsIEF0dHJpYnV0ZXMgYXR0cnMpCiAgICAgICAgdGhyb3dzIFNB\nWEV4Y2VwdGlvbiB7CiAgICAgICAgc3dpdGNoIChuYW1lLmNoYXJBdCgwKSkg\newogICAgICAgICAgICBjYXNlJ3MnOgogICAgICAgICAgICAgICAgaWYgKCJz\nY2hlbWEiLmVxdWFscyhuYW1lKSkKICAgICAgICAgICAgICAgICAgICBzdGFy\ndFNjaGVtYShhdHRycyk7CiAgICAgICAgICAgICAgICBlbHNlIGlmICgic2Vx\ndWVuY2UiLmVxdWFscyhuYW1lKSkKICAgICAgICAgICAgICAgICAgICBzdGFy\ndFNlcXVlbmNlKGF0dHJzKTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVl\nOwogICAgICAgICAgICBjYXNlJ3QnOgogICAgICAgICAgICAgICAgc3RhcnRU\nYWJsZShhdHRycyk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAg\nICAgICAgICAgY2FzZSdjJzoKICAgICAgICAgICAgICAgIHN0YXJ0Q29sdW1u\nKGF0dHJzKTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAg\nICAgICBjYXNlJ3AnOgogICAgICAgICAgICAgICAgc3RhcnRQcmltYXJ5S2V5\nKGF0dHJzKTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAg\nICAgICBjYXNlJ2knOgogICAgICAgICAgICAgICAgc3RhcnRJbmRleChhdHRy\ncyk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAg\nY2FzZSd1JzoKICAgICAgICAgICAgICAgIHN0YXJ0VW5pcXVlKGF0dHJzKTsK\nICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICBjYXNl\nJ2YnOgogICAgICAgICAgICAgICAgc3RhcnRGb3JlaWduS2V5KGF0dHJzKTsK\nICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICBjYXNl\nJ28nOgogICAgICAgICAgICAgICAgc3RhcnRPbihhdHRycyk7CiAgICAgICAg\nICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgY2FzZSdqJzoKICAg\nICAgICAgICAgICAgIHN0YXJ0Sm9pbihhdHRycyk7CiAgICAgICAgICAgICAg\nICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAg\nICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgcHJv\ndGVjdGVkIHZvaWQgZW5kRWxlbWVudChTdHJpbmcgbmFtZSkgewogICAgICAg\nIHN3aXRjaCAobmFtZS5jaGFyQXQoMCkpIHsKICAgICAgICAgICAgY2FzZSdz\nJzoKICAgICAgICAgICAgICAgIGlmICgic2NoZW1hIi5lcXVhbHMobmFtZSkp\nCiAgICAgICAgICAgICAgICAgICAgZW5kU2NoZW1hKCk7CiAgICAgICAgICAg\nICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSd0JzoKICAgICAgICAgICAg\nICAgIGVuZFRhYmxlKCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAg\nICAgICAgY2FzZSdwJzoKICAgICAgICAgICAgICAgIGVuZFByaW1hcnlLZXko\nKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlJ2kn\nOgogICAgICAgICAgICAgICAgZW5kSW5kZXgoKTsKICAgICAgICAgICAgICAg\nIGJyZWFrOwogICAgICAgICAgICBjYXNlJ3UnOgogICAgICAgICAgICAgICAg\nZW5kVW5pcXVlKCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAg\nICAgY2FzZSdmJzoKICAgICAgICAgICAgICAgIGVuZEZvcmVpZ25LZXkoKTsK\nICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgIH0KCiAgICBw\ncml2YXRlIHZvaWQgc3RhcnRTY2hlbWEoQXR0cmlidXRlcyBhdHRycykgewog\nICAgICAgIC8vIGNyZWF0ZXMgZ3JvdXAgaWYgbm90IHNldAogICAgICAgIFNj\naGVtYUdyb3VwIGdyb3VwID0gZ2V0U2NoZW1hR3JvdXAoKTsKCiAgICAgICAg\nU3RyaW5nIG5hbWUgPSBhdHRycy5nZXRWYWx1ZSgibmFtZSIpOwogICAgICAg\nIF9zY2hlbWEgPSBncm91cC5nZXRTY2hlbWEobmFtZSk7CiAgICAgICAgaWYg\nKF9zY2hlbWEgPT0gbnVsbCkKICAgICAgICAgICAgX3NjaGVtYSA9IGdyb3Vw\nLmFkZFNjaGVtYShuYW1lKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgZW5k\nU2NoZW1hKCkgewogICAgICAgIF9zY2hlbWEgPSBudWxsOwogICAgfQoKICAg\nIHByaXZhdGUgdm9pZCBzdGFydFNlcXVlbmNlKEF0dHJpYnV0ZXMgYXR0cnMp\nIHsKICAgICAgICBTZXF1ZW5jZSBzZXEgPSBfc2NoZW1hLmFkZFNlcXVlbmNl\nKGF0dHJzLmdldFZhbHVlKCJuYW1lIikpOwogICAgICAgIExvY2F0b3IgbG9j\nYXRvciA9IGdldExvY2F0aW9uKCkuZ2V0TG9jYXRvcigpOwogICAgICAgIGlm\nIChsb2NhdG9yICE9IG51bGwpIHsKICAgICAgICAgICAgc2VxLnNldExpbmVO\ndW1iZXIoTnVtYmVycy52YWx1ZU9mKGxvY2F0b3IuZ2V0TGluZU51bWJlcigp\nKSk7CiAgICAgICAgICAgIHNlcS5zZXRDb2xOdW1iZXIoTnVtYmVycy52YWx1\nZU9mKGxvY2F0b3IuZ2V0Q29sdW1uTnVtYmVyKCkpKTsKICAgICAgICB9CiAg\nICAgICAgc2VxLnNldFNvdXJjZShnZXRTb3VyY2VGaWxlKCksIFNvdXJjZVRy\nYWNrZXIuU1JDX1hNTCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgU3Ry\naW5nIHZhbCA9IGF0dHJzLmdldFZhbHVlKCJpbml0aWFsLXZhbHVlIik7CiAg\nICAgICAgICAgIGlmICh2YWwgIT0gbnVsbCkKICAgICAgICAgICAgICAgIHNl\ncS5zZXRJbml0aWFsVmFsdWUoSW50ZWdlci5wYXJzZUludCh2YWwpKTsKICAg\nICAgICAgICAgdmFsID0gYXR0cnMuZ2V0VmFsdWUoImluY3JlbWVudCIpOwog\nICAgICAgICAgICBpZiAodmFsICE9IG51bGwpCiAgICAgICAgICAgICAgICBz\nZXEuc2V0SW5jcmVtZW50KEludGVnZXIucGFyc2VJbnQodmFsKSk7CiAgICAg\nICAgICAgIHZhbCA9IGF0dHJzLmdldFZhbHVlKCJhbGxvY2F0ZSIpOwogICAg\nICAgICAgICBpZiAodmFsICE9IG51bGwpCiAgICAgICAgICAgICAgICBzZXEu\nc2V0QWxsb2NhdGUoSW50ZWdlci5wYXJzZUludCh2YWwpKTsKICAgICAgICB9\nIGNhdGNoIChOdW1iZXJGb3JtYXRFeGNlcHRpb24gbmZlKSB7CiAgICAgICAg\nICAgIHRocm93VXNlckV4Y2VwdGlvbihfbG9jLmdldCgiYmFkLXNlcS1udW0i\nLCBzZXEuZ2V0RnVsbE5hbWUoKSkpOwogICAgICAgIH0KICAgIH0KCiAgICBw\ncml2YXRlIHZvaWQgc3RhcnRUYWJsZShBdHRyaWJ1dGVzIGF0dHJzKSB7CiAg\nICAgICAgX3RhYmxlID0gX3NjaGVtYS5hZGRUYWJsZShhdHRycy5nZXRWYWx1\nZSgibmFtZSIpKTsKICAgICAgICBfdGFibGUuc2V0U291cmNlKGdldFNvdXJj\nZUZpbGUoKSwgU291cmNlVHJhY2tlci5TUkNfWE1MKTsKICAgICAgICBMb2Nh\ndG9yIGxvY2F0b3IgPSBnZXRMb2NhdGlvbigpLmdldExvY2F0b3IoKTsKICAg\nICAgICBpZiAobG9jYXRvciAhPSBudWxsKSB7CiAgICAgICAgICAgIF90YWJs\nZS5zZXRMaW5lTnVtYmVyKE51bWJlcnMudmFsdWVPZihsb2NhdG9yLmdldExp\nbmVOdW1iZXIoKSkpOwogICAgICAgICAgICBfdGFibGUuc2V0Q29sTnVtYmVy\nKE51bWJlcnMudmFsdWVPZihsb2NhdG9yLmdldENvbHVtbk51bWJlcigpKSk7\nCiAgICAgICAgfQogICAgfQoKICAgIHByaXZhdGUgdm9pZCBlbmRUYWJsZSgp\nIHsKICAgICAgICBfdGFibGUgPSBudWxsOwogICAgfQoKICAgIHByaXZhdGUg\ndm9pZCBzdGFydENvbHVtbihBdHRyaWJ1dGVzIGF0dHJzKSB7CiAgICAgICAg\nQ29sdW1uIGNvbCA9IF90YWJsZS5hZGRDb2x1bW4oYXR0cnMuZ2V0VmFsdWUo\nIm5hbWUiKSk7CiAgICAgICAgY29sLnNldFR5cGUoX2RpY3QuZ2V0UHJlZmVy\ncmVkVHlwZShTY2hlbWFzLmdldEpEQkNUeXBlCiAgICAgICAgICAgIChhdHRy\ncy5nZXRWYWx1ZSgidHlwZSIpKSkpOwogICAgICAgIGNvbC5zZXRUeXBlTmFt\nZShhdHRycy5nZXRWYWx1ZSgidHlwZS1uYW1lIikpOwogICAgICAgIFN0cmlu\nZyB2YWwgPSBhdHRycy5nZXRWYWx1ZSgic2l6ZSIpOwogICAgICAgIGlmICh2\nYWwgIT0gbnVsbCkKICAgICAgICAgICAgY29sLnNldFNpemUoSW50ZWdlci5w\nYXJzZUludCh2YWwpKTsKICAgICAgICB2YWwgPSBhdHRycy5nZXRWYWx1ZSgi\nZGVjaW1hbC1kaWdpdHMiKTsKICAgICAgICBpZiAodmFsICE9IG51bGwpCiAg\nICAgICAgICAgIGNvbC5zZXREZWNpbWFsRGlnaXRzKEludGVnZXIucGFyc2VJ\nbnQodmFsKSk7CiAgICAgICAgY29sLnNldE5vdE51bGwoInRydWUiLmVxdWFs\ncyhhdHRycy5nZXRWYWx1ZSgibm90LW51bGwiKSkpOwogICAgICAgIGNvbC5z\nZXRBdXRvQXNzaWduZWQoInRydWUiLmVxdWFscyhhdHRycy5nZXRWYWx1ZSgi\nYXV0by1hc3NpZ24iKSkKICAgICAgICAgICAgfHwgInRydWUiLmVxdWFscyhh\ndHRycy5nZXRWYWx1ZSgiYXV0by1pbmNyZW1lbnQiKSkpOyAvLyBvbGQgYXR0\ncgogICAgICAgIGNvbC5zZXREZWZhdWx0U3RyaW5nKGF0dHJzLmdldFZhbHVl\nKCJkZWZhdWx0IikpOwogICAgfQoKICAgIHByaXZhdGUgdm9pZCBzdGFydFBy\naW1hcnlLZXkoQXR0cmlidXRlcyBhdHRycykgewogICAgICAgIF9wayA9IG5l\ndyBQcmltYXJ5S2V5SW5mbygpOwogICAgICAgIF9way5wayA9IF90YWJsZS5h\nZGRQcmltYXJ5S2V5KGF0dHJzLmdldFZhbHVlKCJuYW1lIikpOwogICAgICAg\nIF9way5way5zZXRMb2dpY2FsKCJ0cnVlIi5lcXVhbHMoYXR0cnMuZ2V0VmFs\ndWUoImxvZ2ljYWwiKSkpOwoKICAgICAgICBTdHJpbmcgdmFsID0gYXR0cnMu\nZ2V0VmFsdWUoImNvbHVtbiIpOwogICAgICAgIGlmICh2YWwgIT0gbnVsbCkK\nICAgICAgICAgICAgX3BrLmNvbHMuYWRkKHZhbCk7CiAgICB9CgogICAgcHJp\ndmF0ZSB2b2lkIGVuZFByaW1hcnlLZXkoKSB7CiAgICAgICAgX3BrSW5mb3Mu\nYWRkKF9wayk7CiAgICAgICAgX3BrID0gbnVsbDsKICAgIH0KCiAgICBwcml2\nYXRlIHZvaWQgc3RhcnRJbmRleChBdHRyaWJ1dGVzIGF0dHJzKSB7CiAgICAg\nICAgX2luZGV4ID0gbmV3IEluZGV4SW5mbygpOwogICAgICAgIF9pbmRleC5p\nbmRleCA9IF90YWJsZS5hZGRJbmRleChhdHRycy5nZXRWYWx1ZSgibmFtZSIp\nKTsKICAgICAgICBfaW5kZXguaW5kZXguc2V0VW5pcXVlKCJ0cnVlIi5lcXVh\nbHMoYXR0cnMuZ2V0VmFsdWUoInVuaXF1ZSIpKSk7CgogICAgICAgIFN0cmlu\nZyB2YWwgPSBhdHRycy5nZXRWYWx1ZSgiY29sdW1uIik7CiAgICAgICAgaWYg\nKHZhbCAhPSBudWxsKQogICAgICAgICAgICBfaW5kZXguY29scy5hZGQodmFs\nKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgZW5kSW5kZXgoKSB7CiAgICAg\nICAgX2luZGV4SW5mb3MuYWRkKF9pbmRleCk7CiAgICAgICAgX2luZGV4ID0g\nbnVsbDsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgc3RhcnRVbmlxdWUoQXR0\ncmlidXRlcyBhdHRycykgewogICAgICAgIF91bnEgPSBuZXcgVW5pcXVlSW5m\nbygpOwogICAgICAgIF91bnEudW5xID0gX3RhYmxlLmFkZFVuaXF1ZShhdHRy\ncy5nZXRWYWx1ZSgibmFtZSIpKTsKICAgICAgICBfdW5xLnVucS5zZXREZWZl\ncnJlZCgidHJ1ZSIuZXF1YWxzKGF0dHJzLmdldFZhbHVlKCJkZWZlcnJlZCIp\nKSk7CgogICAgICAgIFN0cmluZyB2YWwgPSBhdHRycy5nZXRWYWx1ZSgiY29s\ndW1uIik7CiAgICAgICAgaWYgKHZhbCAhPSBudWxsKQogICAgICAgICAgICBf\ndW5xLmNvbHMuYWRkKHZhbCk7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIGVu\nZFVuaXF1ZSgpIHsKICAgICAgICBfdW5xSW5mb3MuYWRkKF91bnEpOwogICAg\nICAgIF91bnEgPSBudWxsOwogICAgfQoKICAgIHByaXZhdGUgdm9pZCBzdGFy\ndEZvcmVpZ25LZXkoQXR0cmlidXRlcyBhdHRycykgewogICAgICAgIF9mayA9\nIG5ldyBGb3JlaWduS2V5SW5mbygpOwogICAgICAgIF9may5mayA9IF90YWJs\nZS5hZGRGb3JlaWduS2V5KGF0dHJzLmdldFZhbHVlKCJuYW1lIikpOwoKICAg\nICAgICBpZiAoInRydWUiLmVxdWFscyhhdHRycy5nZXRWYWx1ZSgiZGVmZXJy\nZWQiKSkpCiAgICAgICAgICAgIF9may5may5zZXREZWZlcnJlZCh0cnVlKTsK\nCiAgICAgICAgLy8gc2V0IHVwZGF0ZSBhY3Rpb24gYmVmb3JlIGRlbGV0ZSBh\nY3Rpb24gaW4gY2FzZSB1c2VyIGluY29ycmVjdGx5CiAgICAgICAgLy8gc2V0\ncyB1cGRhdGUtYWN0aW9uIHRvICJub25lIiB3aGVuIHRoZXJlIGlzIGEgZGVs\nZXRlLWFjdGlvbjsgb3RoZXJ3aXNlCiAgICAgICAgLy8gc2V0dGluZyB0aGUg\ndXBkYXRlLWFjdGlvbiB0byAibm9uZSIgd2lsbCBhbHNvIGF1dG9tYXRpY2Fs\nbHkgc2V0IHRoZQogICAgICAgIC8vIGRlbGV0ZS1hY3Rpb24gdG8gIm5vbmUi\nLCBzaW5jZSBGS3MgY2Fubm90IGhhdmUgb25lIGFjdGlvIGJlIG5vbmUgYW5k\nCiAgICAgICAgLy8gdGhlIG90aGVyIGJlIG5vbi1ub25lCiAgICAgICAgU3Ry\naW5nIGFjdGlvbiA9IGF0dHJzLmdldFZhbHVlKCJ1cGRhdGUtYWN0aW9uIik7\nCiAgICAgICAgaWYgKGFjdGlvbiAhPSBudWxsKQogICAgICAgICAgICBfZmsu\nZmsuc2V0VXBkYXRlQWN0aW9uKEZvcmVpZ25LZXkuZ2V0QWN0aW9uKGFjdGlv\nbikpOwogICAgICAgIGFjdGlvbiA9IGF0dHJzLmdldFZhbHVlKCJkZWxldGUt\nYWN0aW9uIik7CiAgICAgICAgaWYgKGFjdGlvbiAhPSBudWxsKQogICAgICAg\nICAgICBfZmsuZmsuc2V0RGVsZXRlQWN0aW9uKEZvcmVpZ25LZXkuZ2V0QWN0\naW9uKGFjdGlvbikpOwoKICAgICAgICBfZmsudG9UYWJsZSA9IGF0dHJzLmdl\ndFZhbHVlKCJ0by10YWJsZSIpOwogICAgICAgIFN0cmluZyB2YWwgPSBhdHRy\ncy5nZXRWYWx1ZSgiY29sdW1uIik7CiAgICAgICAgaWYgKHZhbCAhPSBudWxs\nKQogICAgICAgICAgICBfZmsuY29scy5hZGQodmFsKTsKICAgIH0KCiAgICBw\ncml2YXRlIHZvaWQgZW5kRm9yZWlnbktleSgpIHsKICAgICAgICBfZmtJbmZv\ncy5hZGQoX2ZrKTsKICAgICAgICBfZmsgPSBudWxsOwogICAgfQoKICAgIHBy\naXZhdGUgdm9pZCBzdGFydE9uKEF0dHJpYnV0ZXMgYXR0cnMpIHsKICAgICAg\nICBTdHJpbmcgY29sID0gYXR0cnMuZ2V0VmFsdWUoImNvbHVtbiIpOwogICAg\nICAgIGlmIChfcGsgIT0gbnVsbCkKICAgICAgICAgICAgX3BrLmNvbHMuYWRk\nKGNvbCk7CiAgICAgICAgZWxzZSBpZiAoX2luZGV4ICE9IG51bGwpCiAgICAg\nICAgICAgIF9pbmRleC5jb2xzLmFkZChjb2wpOwogICAgICAgIGVsc2UKICAg\nICAgICAgICAgX3VucS5jb2xzLmFkZChjb2wpOwogICAgfQoKICAgIHByaXZh\ndGUgdm9pZCBzdGFydEpvaW4oQXR0cmlidXRlcyBhdHRycykgewogICAgICAg\nIFN0cmluZyBjb2wgPSBhdHRycy5nZXRWYWx1ZSgiY29sdW1uIik7CiAgICAg\nICAgU3RyaW5nIHRvQ29sID0gYXR0cnMuZ2V0VmFsdWUoInRvLWNvbHVtbiIp\nOwogICAgICAgIFN0cmluZyB2YWwgPSBhdHRycy5nZXRWYWx1ZSgidmFsdWUi\nKTsKICAgICAgICBpZiAodmFsID09IG51bGwpIHsKICAgICAgICAgICAgX2Zr\nLmNvbHMuYWRkKGNvbCk7CiAgICAgICAgICAgIF9may5wa3MuYWRkKHRvQ29s\nKTsKICAgICAgICB9IGVsc2UgaWYgKGNvbCA9PSBudWxsKSB7CiAgICAgICAg\nICAgIF9may5jb25zdHNQSy5hZGQoY29udmVydENvbnN0YW50KHZhbCkpOwog\nICAgICAgICAgICBfZmsuY29uc3RDb2xzUEsuYWRkKHRvQ29sKTsKICAgICAg\nICB9IGVsc2UgewogICAgICAgICAgICBfZmsuY29uc3RzLmFkZChjb252ZXJ0\nQ29uc3RhbnQodmFsKSk7CiAgICAgICAgICAgIF9may5jb25zdENvbHMuYWRk\nKGNvbCk7CiAgICAgICAgfQogICAgfQoKICAgIHByaXZhdGUgc3RhdGljIE9i\namVjdCBjb252ZXJ0Q29uc3RhbnQoU3RyaW5nIHZhbCkgewogICAgICAgIGlm\nICgibnVsbCIuZXF1YWxzKHZhbCkpCiAgICAgICAgICAgIHJldHVybiBudWxs\nOwogICAgICAgIGlmICh2YWwuc3RhcnRzV2l0aCgiJyIpKQogICAgICAgICAg\nICByZXR1cm4gdmFsLnN1YnN0cmluZygxLCB2YWwubGVuZ3RoKCkgLSAxKTsK\nICAgICAgICBpZiAodmFsLmluZGV4T2YoJy4nKSA9PSAtMSkKICAgICAgICAg\nICAgcmV0dXJuIG5ldyBMb25nKHZhbCk7CiAgICAgICAgcmV0dXJuIG5ldyBE\nb3VibGUodmFsKTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgdGhyb3dVc2Vy\nRXhjZXB0aW9uKE1lc3NhZ2UgbXNnKSB7CiAgICAgICAgdGhyb3cgbmV3IFVz\nZXJFeGNlcHRpb24oZ2V0U291cmNlTmFtZSgpICsgIjogIiArIG1zZy5nZXRN\nZXNzYWdlKCkpOwogICAgfQoKICAgIC8qKgogICAgICogVXNlZCB0byBob2xk\nIHByaW1hcnkga2V5IGluZm8gYmVmb3JlIGl0IGlzIHJlc29sdmVkLgogICAg\nICovCiAgICBwcml2YXRlIHN0YXRpYyBjbGFzcyBQcmltYXJ5S2V5SW5mbyB7\nCgogICAgICAgIHB1YmxpYyBQcmltYXJ5S2V5IHBrID0gbnVsbDsKICAgICAg\nICBwdWJsaWMgQ29sbGVjdGlvbjxTdHJpbmc+IGNvbHMgPSBuZXcgTGlua2Vk\nTGlzdDxTdHJpbmc+KCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBVc2VkIHRv\nIGhvbGQgaW5kZXggaW5mbyBiZWZvcmUgaXQgaXMgcmVzb2x2ZWQuCiAgICAg\nKi8KICAgIHByaXZhdGUgc3RhdGljIGNsYXNzIEluZGV4SW5mbyB7CgogICAg\nICAgIHB1YmxpYyBJbmRleCBpbmRleCA9IG51bGw7CiAgICAgICAgcHVibGlj\nIENvbGxlY3Rpb248U3RyaW5nPiBjb2xzID0gbmV3IExpbmtlZExpc3Q8U3Ry\naW5nPigpOwogICAgfQoKICAgIC8qKgogICAgICogVXNlZCB0byBob2xkIHVu\naXF1ZSBjb25zdHJhaW50IGluZm8gYmVmb3JlIGl0IGlzIHJlc29sdmVkLgog\nICAgICovCiAgICBwdWJsaWMgc3RhdGljIGNsYXNzIFVuaXF1ZUluZm8gewoK\nICAgICAgICBwdWJsaWMgVW5pcXVlIHVucSA9IG51bGw7CiAgICAgICAgcHVi\nbGljIENvbGxlY3Rpb248U3RyaW5nPiBjb2xzID0gbmV3IExpbmtlZExpc3Q8\nU3RyaW5nPigpOwogICAgfQoKICAgIC8qKgogICAgICogVXNlZCB0byBob2xk\nIGZvcmVpZ24ga2V5IGluZm8gYmVmb3JlIGl0IGlzIHJlc29sdmVkLgogICAg\nICovCiAgICBwcml2YXRlIHN0YXRpYyBjbGFzcyBGb3JlaWduS2V5SW5mbyB7\nCgogICAgICAgIHB1YmxpYyBGb3JlaWduS2V5IGZrID0gbnVsbDsKICAgICAg\nICBwdWJsaWMgU3RyaW5nIHRvVGFibGUgPSBudWxsOwogICAgICAgIHB1Ymxp\nYyBDb2xsZWN0aW9uPFN0cmluZz4gY29scyA9IG5ldyBMaW5rZWRMaXN0PFN0\ncmluZz4oKTsKICAgICAgICBwdWJsaWMgQ29sbGVjdGlvbjxTdHJpbmc+IHBr\ncyA9IG5ldyBMaW5rZWRMaXN0PFN0cmluZz4oKTsKICAgICAgICBwdWJsaWMg\nQ29sbGVjdGlvbjxPYmplY3Q+IGNvbnN0cyA9IG5ldyBMaW5rZWRMaXN0PE9i\namVjdD4oKTsKICAgICAgICBwdWJsaWMgQ29sbGVjdGlvbjxTdHJpbmc+IGNv\nbnN0Q29scyA9IG5ldyBMaW5rZWRMaXN0PFN0cmluZz4oKTsKICAgICAgICBw\ndWJsaWMgQ29sbGVjdGlvbjxPYmplY3Q+IGNvbnN0c1BLID0gbmV3IExpbmtl\nZExpc3Q8T2JqZWN0PigpOwogICAgICAgIHB1YmxpYyBDb2xsZWN0aW9uPFN0\ncmluZz4gY29uc3RDb2xzUEsgPSBuZXcgTGlua2VkTGlzdDxTdHJpbmc+KCk7\nCiAgICB9Cn0K\n","encoding":"base64"}

