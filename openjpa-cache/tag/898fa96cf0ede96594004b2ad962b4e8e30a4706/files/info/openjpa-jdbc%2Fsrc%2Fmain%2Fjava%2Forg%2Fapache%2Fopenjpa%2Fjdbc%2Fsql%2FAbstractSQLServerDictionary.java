{"sha":"9652f5d2b318db22f612794b5200e962c145539c","node_id":"MDQ6QmxvYjIwNjM2NDo5NjUyZjVkMmIzMThkYjIyZjYxMjc5NGI1MjAwZTk2MmMxNDU1Mzlj","size":5609,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/9652f5d2b318db22f612794b5200e962c145539c","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWw7CgppbXBvcnQg\namF2YS5zcWwuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmEuc3FsLkRhdGFiYXNl\nTWV0YURhdGE7CmltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDsK\naW1wb3J0IGphdmEuc3FsLlNRTEV4Y2VwdGlvbjsKaW1wb3J0IGphdmEuc3Fs\nLlR5cGVzOwppbXBvcnQgamF2YS51dGlsLkFycmF5czsKCmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuamRiYy5pZGVudGlmaWVyLkRCSWRlbnRpZmllci5E\nQklkZW50aWZpZXJUeXBlOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpk\nYmMua2VybmVsLmV4cHMuRmlsdGVyVmFsdWU7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEuamRiYy5zY2hlbWEuQ29sdW1uOwppbXBvcnQgb3JnLmFwYWNo\nZS5vcGVuanBhLmpkYmMuc2NoZW1hLkluZGV4OwoKLyoqCiAqIERpY3Rpb25h\ncnkgZm9yIHRoZSBTUUwgU2VydmVyIGRhdGFiYXNlcyAoU3liYXNlIGFuZCBN\nUyBTUUwgU2VydmVyKS4KICovCnB1YmxpYyBhYnN0cmFjdCBjbGFzcyBBYnN0\ncmFjdFNRTFNlcnZlckRpY3Rpb25hcnkKICAgIGV4dGVuZHMgREJEaWN0aW9u\nYXJ5IHsKCiAgICBwdWJsaWMgQWJzdHJhY3RTUUxTZXJ2ZXJEaWN0aW9uYXJ5\nKCkgewogICAgICAgIHJlc2VydmVkV29yZFNldC5hZGRBbGwoQXJyYXlzLmFz\nTGlzdChuZXcgU3RyaW5nW117ICJGSUxFIiwgIklOREVYIiB9KSk7CiAgICAg\nICAgc3lzdGVtVGFibGVTZXQuYWRkKCJEVFBST1BFUlRJRVMiKTsKICAgICAg\nICB2YWxpZGF0aW9uU1FMID0gIlNFTEVDVCBHRVREQVRFKCkiOwogICAgICAg\nIHJhbmdlUG9zaXRpb24gPSBSQU5HRV9QT1NUX0RJU1RJTkNUOwoKICAgICAg\nICBzdXBwb3J0c0RlZmVycmVkQ29uc3RyYWludHMgPSBmYWxzZTsKICAgICAg\nICBzdXBwb3J0c1NlbGVjdEVuZEluZGV4ID0gdHJ1ZTsKICAgICAgICBhbGxv\nd3NBbGlhc0luQnVsa0NsYXVzZSA9IGZhbHNlOwoKICAgICAgICBzdXBwb3J0\nc0F1dG9Bc3NpZ24gPSB0cnVlOwogICAgICAgIGF1dG9Bc3NpZ25DbGF1c2Ug\nPSAiSURFTlRJVFkiOwogICAgICAgIGxhc3RHZW5lcmF0ZWRLZXlRdWVyeSA9\nICJTRUxFQ1QgQEBJREVOVElUWSI7CgogICAgICAgIHRyaW1MZWFkaW5nRnVu\nY3Rpb24gPSAiTFRSSU0oezB9KSI7CiAgICAgICAgdHJpbVRyYWlsaW5nRnVu\nY3Rpb24gPSAiUlRSSU0oezB9KSI7CiAgICAgICAgdHJpbUJvdGhGdW5jdGlv\nbiA9ICJMVFJJTShSVFJJTSh7MH0pKSI7CiAgICAgICAgY29uY2F0ZW5hdGVG\ndW5jdGlvbiA9ICIoezB9K3sxfSkiOwogICAgICAgIHN1cHBvcnRzTW9kT3Bl\ncmF0b3IgPSB0cnVlOwoKICAgICAgICBjdXJyZW50RGF0ZUZ1bmN0aW9uID0g\nIkdFVERBVEUoKSI7CiAgICAgICAgY3VycmVudFRpbWVGdW5jdGlvbiA9ICJH\nRVREQVRFKCkiOwogICAgICAgIGN1cnJlbnRUaW1lc3RhbXBGdW5jdGlvbiA9\nICJHRVREQVRFKCkiOwoKICAgICAgICB1c2VHZXRTdHJpbmdGb3JDbG9icyA9\nIHRydWU7CiAgICAgICAgdXNlU2V0U3RyaW5nRm9yQ2xvYnMgPSB0cnVlOwog\nICAgICAgIHVzZUdldEJ5dGVzRm9yQmxvYnMgPSB0cnVlOwogICAgICAgIHVz\nZVNldEJ5dGVzRm9yQmxvYnMgPSB0cnVlOwogICAgICAgIGJpbmFyeVR5cGVO\nYW1lID0gIkJJTkFSWSI7CiAgICAgICAgYmxvYlR5cGVOYW1lID0gIklNQUdF\nIjsKICAgICAgICBsb25nVmFyYmluYXJ5VHlwZU5hbWUgPSAiSU1BR0UiOwog\nICAgICAgIGNsb2JUeXBlTmFtZSA9ICJURVhUIjsKICAgICAgICBsb25nVmFy\nY2hhclR5cGVOYW1lID0gIlRFWFQiOwogICAgICAgIGRhdGVUeXBlTmFtZSA9\nICJEQVRFVElNRSI7CiAgICAgICAgdGltZVR5cGVOYW1lID0gIkRBVEVUSU1F\nIjsKICAgICAgICB0aW1lc3RhbXBUeXBlTmFtZSA9ICJEQVRFVElNRSI7CiAg\nICAgICAgZmxvYXRUeXBlTmFtZSA9ICJGTE9BVCgxNikiOwogICAgICAgIGRv\ndWJsZVR5cGVOYW1lID0gIkZMT0FUKDMyKSI7CiAgICAgICAgaW50ZWdlclR5\ncGVOYW1lID0gIklOVCI7CiAgICAgICAgZml4ZWRTaXplVHlwZU5hbWVTZXQu\nYWRkQWxsKEFycmF5cy5hc0xpc3QobmV3IFN0cmluZ1tdewogICAgICAgICAg\nICAiSU1BR0UiLCAiVEVYVCIsICJOVEVYVCIsICJNT05FWSIsICJTTUFMTE1P\nTkVZIiwgIklOVCIsCiAgICAgICAgICAgICJET1VCTEUgUFJFQ0lTSU9OIiwg\nIkRBVEVUSU1FIiwgIlNNQUxMREFURVRJTUUiLAogICAgICAgICAgICAiRVhU\nRU5ERUQgVFlQRSIsICJTWVNOQU1FIiwgIlNRTF9WQVJJQU5UIiwgIklOREVY\nIiwKICAgICAgICB9KSk7CiAgICB9CgogICAgcHVibGljIENvbHVtbltdIGdl\ndENvbHVtbnMoRGF0YWJhc2VNZXRhRGF0YSBtZXRhLCBTdHJpbmcgY2F0YWxv\nZywKICAgICAgICBTdHJpbmcgc2NoZW1hTmFtZSwgU3RyaW5nIHRhYmxlTmFt\nZSwgU3RyaW5nIGNvbE5hbWUsIENvbm5lY3Rpb24gY29ubikKICAgICAgICB0\naHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBDb2x1bW5bXSBjb2xzID0g\nc3VwZXIuZ2V0Q29sdW1ucyhtZXRhLCBjYXRhbG9nLCBzY2hlbWFOYW1lLCB0\nYWJsZU5hbWUsCiAgICAgICAgICAgIGNvbE5hbWUsIGNvbm4pOwogICAgICAg\nIGZvciAoaW50IGkgPSAwOyBjb2xzICE9IG51bGwgJiYgaSA8IGNvbHMubGVu\nZ3RoOyBpKyspCiAgICAgICAgICAgIGlmIChjb2xzW2ldLmdldFR5cGUoKSA9\nPSBUeXBlcy5MT05HVkFSQ0hBUikKICAgICAgICAgICAgICAgIGNvbHNbaV0u\nc2V0VHlwZShUeXBlcy5DTE9CKTsKICAgICAgICByZXR1cm4gY29sczsKICAg\nIH0KCiAgICBwdWJsaWMgU3RyaW5nIGdldEZ1bGxOYW1lKEluZGV4IGlkeCkg\newogICAgICAgIHJldHVybiB0b0RCTmFtZShnZXROYW1pbmdVdGlsKCkuYXBw\nZW5kKERCSWRlbnRpZmllclR5cGUuSU5ERVgsCiAgICAgICAgICAgIGdldEZ1\nbGxJZGVudGlmaWVyKGlkeC5nZXRUYWJsZSgpLCBmYWxzZSksaWR4LmdldElk\nZW50aWZpZXIoKSkpOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldE51bGwo\nUHJlcGFyZWRTdGF0ZW1lbnQgc3RtbnQsIGludCBpZHgsIGludCBjb2xUeXBl\nLAogICAgICAgIENvbHVtbiBjb2wpCiAgICAgICAgdGhyb3dzIFNRTEV4Y2Vw\ndGlvbiB7CiAgICAgICAgLy8gU1FMU2VydmVyIGhhcyBzb21lIHByb2JsZW1z\nIHdpdGggc2V0TnVsbCBvbiBsb2JzCiAgICAgICAgaWYgKGNvbFR5cGUgPT0g\nVHlwZXMuQ0xPQikKICAgICAgICAgICAgc3RtbnQuc2V0U3RyaW5nKGlkeCwg\nbnVsbCk7CiAgICAgICAgZWxzZSBpZiAoY29sVHlwZSA9PSBUeXBlcy5CTE9C\nKQogICAgICAgICAgICBzdG1udC5zZXRCeXRlcyhpZHgsIG51bGwpOwogICAg\nICAgIGVsc2UKICAgICAgICAgICAgc3VwZXIuc2V0TnVsbChzdG1udCwgaWR4\nLCBjb2xUeXBlLCBjb2wpOwogICAgfQoKICAgIHByb3RlY3RlZCB2b2lkIGFw\ncGVuZFNlbGVjdFJhbmdlKFNRTEJ1ZmZlciBidWYsIGxvbmcgc3RhcnQsIGxv\nbmcgZW5kLAogICAgICAgIGJvb2xlYW4gc3Vic2VsZWN0KSB7CiAgICAgICAg\nLy8gY2Fubm90IHVzZSBhIHZhbHVlIGhlcmUsIHNpbmNlIFNRTFNlcnZlciBk\nb2VzIG5vdCBzdXBwb3J0CiAgICAgICAgLy8gYm91bmQgcGFyYW1ldGVycyBp\nbiBhICJUT1AiIGNsYXVzZQogICAgICAgIGJ1Zi5hcHBlbmQoIiBUT1AgIiku\nYXBwZW5kKExvbmcudG9TdHJpbmcoZW5kKSk7CiAgICB9CgogICAgcHVibGlj\nIHZvaWQgc3Vic3RyaW5nKFNRTEJ1ZmZlciBidWYsIEZpbHRlclZhbHVlIHN0\nciwgRmlsdGVyVmFsdWUgc3RhcnQsCiAgICAgICAgRmlsdGVyVmFsdWUgZW5k\nKSB7CiAgICAgICAgaWYgKGVuZCAhPSBudWxsKQogICAgICAgICAgICBzdXBl\nci5zdWJzdHJpbmcoYnVmLCBzdHIsIHN0YXJ0LCBlbmQpOwogICAgICAgIGVs\nc2UgewogICAgICAgICAgICAvLyAjIyMgaXQgd291bGQgYmUgZ29vZCB0byBj\naGFuZ2UgdGhpcyBsb2dpYyBhcyBpbiBEQkRpY3Rpb25hcnkgdG8KICAgICAg\nICAgICAgLy8gIyMjIHNpbXBsaWZ5IHRoZSBnZW5lcmF0ZWQgU1FMCiAgICAg\nICAgICAgIGJ1Zi5hcHBlbmQoIlNVQlNUUklORygiKTsKICAgICAgICAgICAg\nc3RyLmFwcGVuZFRvKGJ1Zik7CiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoIiwg\nIik7CiAgICAgICAgICAgIHN0YXJ0LmFwcGVuZFRvKGJ1Zik7CiAgICAgICAg\nICAgIGJ1Zi5hcHBlbmQoIiArIDEsICIpOwogICAgICAgICAgICBidWYuYXBw\nZW5kKCJMRU4oIik7CiAgICAgICAgICAgIHN0ci5hcHBlbmRUbyhidWYpOwog\nICAgICAgICAgICBidWYuYXBwZW5kKCIpIik7CiAgICAgICAgICAgIGJ1Zi5h\ncHBlbmQoIiAtICgiKTsKICAgICAgICAgICAgc3RhcnQuYXBwZW5kVG8oYnVm\nKTsKICAgICAgICAgICAgYnVmLmFwcGVuZCgiKSkiKTsKICAgICAgICB9CiAg\nICB9CgogICAgcHVibGljIHZvaWQgaW5kZXhPZihTUUxCdWZmZXIgYnVmLCBG\naWx0ZXJWYWx1ZSBzdHIsIEZpbHRlclZhbHVlIGZpbmQsCiAgICAgICAgRmls\ndGVyVmFsdWUgc3RhcnQpIHsKICAgICAgICBidWYuYXBwZW5kKCIoQ0hBUklO\nREVYKCIpOwogICAgICAgIGZpbmQuYXBwZW5kVG8oYnVmKTsKICAgICAgICBi\ndWYuYXBwZW5kKCIsICIpOwogICAgICAgIGlmIChzdGFydCAhPSBudWxsKQog\nICAgICAgICAgICBzdWJzdHJpbmcoYnVmLCBzdHIsIHN0YXJ0LCBudWxsKTsK\nICAgICAgICBlbHNlCiAgICAgICAgICAgIHN0ci5hcHBlbmRUbyhidWYpOwog\nICAgICAgIGJ1Zi5hcHBlbmQoIikgLSAxIik7CiAgICAgICAgaWYgKHN0YXJ0\nICE9IG51bGwpIHsKICAgICAgICAgICAgYnVmLmFwcGVuZCgiICsgIik7CiAg\nICAgICAgICAgIHN0YXJ0LmFwcGVuZFRvKGJ1Zik7CiAgICAgICAgfQogICAg\nICAgIGJ1Zi5hcHBlbmQoIikiKTsKICAgIH0KfQo=\n","encoding":"base64"}

