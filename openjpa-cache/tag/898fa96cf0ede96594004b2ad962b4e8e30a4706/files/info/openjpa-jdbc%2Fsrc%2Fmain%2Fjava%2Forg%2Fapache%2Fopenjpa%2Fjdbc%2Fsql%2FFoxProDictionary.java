{"sha":"9966163936e997576bd4749a407e61a64bfa1491","node_id":"MDQ6QmxvYjIwNjM2NDo5OTY2MTYzOTM2ZTk5NzU3NmJkNDc0OWE0MDdlNjFhNjRiZmExNDkx","size":6749,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/9966163936e997576bd4749a407e61a64bfa1491","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWw7CgppbXBvcnQg\namF2YS5zcWwuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmEuc3FsLkRhdGFiYXNl\nTWV0YURhdGE7CmltcG9ydCBqYXZhLnNxbC5QcmVwYXJlZFN0YXRlbWVudDsK\naW1wb3J0IGphdmEuc3FsLlJlc3VsdFNldDsKaW1wb3J0IGphdmEuc3FsLlNR\nTEV4Y2VwdGlvbjsKaW1wb3J0IGphdmEuc3FsLlR5cGVzOwoKaW1wb3J0IG9y\nZy5hcGFjaGUub3BlbmpwYS5qZGJjLmlkZW50aWZpZXIuREJJZGVudGlmaWVy\nOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc2NoZW1hLkNvbHVt\nbjsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5JbmRl\neDsKaW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5Qcmlt\nYXJ5S2V5OwoKLyoqCiAqIERpY3Rpb25hcnkgZm9yIFZpc3VhbCBGb3hQcm8g\ndmlhIERhdGFEaXJlY3QgU2VxdWVMaW5rCiAqIGFuZCBEYXRhRGlyZWN0IE9E\nQkMgRm94UHJvIGRyaXZlci4gVGhpcyB3aWxsIG5vdAogKiB3b3JrIHdpdGgg\nYW55IG90aGVyIGNvbWJpbmF0aW9uIG9mIEpEQkMvT0RCQyBzZXJ2ZXIgYW5k\nIE9EQkMgZHJpdmVyLgogKiAgRm94UHJvIGhhcyB0aGUgZm9sbG93aW5nIGxp\nbWl0YXRpb25zOgogKiA8dWw+CiAqIDxsaT5QcmltYXJ5IEtleXMgYW5kIGlu\nZGV4ZXMgY2Fubm90IGJlIGNyZWF0ZWQgdmlhIEpEQkM8L2xpPgogKiA8bGk+\nT25seSBoYXMgZml4ZWQtbGVuZ3RoIGNoYXIgZmllbGRzOiBhbGwgc3RyaW5n\ncyBtdXN0IGJlCiAqIHRyaW1tZWQgaW4gcmVzdWx0IHNldHM8L2xpPgogKiA8\nbGk+RG9lcyBub3QgaGF2ZSBzdWZmaWNpZW50IHN1cHBvcnQgZm9yIGZvcmVp\nZ24ga2V5czwvbGk+CiAqIDxsaT5PREJDIGRyaXZlciBjYW5ub3QgaGFuZGxl\nIGNlcnRhaW4gQWdncmVnYXRlIGZ1bmN0aW9ucy48L2xpPgogKiA8bGk+TG9j\na2luZyBpcyBleHRyZW1lbGV5IHVucmVsaWFibGUuIE11bHRpcGxlIGNsaWVu\ndHMKICogYWNjZXNzaW5nIHNpbmdsZSBkYXRhc3RvcmUgbWF5IHJlc3VsdCBp\nbiBjb25jdXJyZW5jeQogKiBkYXRhIHZhbGlkaXR5IGVycm9ycy48L2xpPgog\nKiA8L3VsPgogKi8KcHVibGljIGNsYXNzIEZveFByb0RpY3Rpb25hcnkKICAg\nIGV4dGVuZHMgREJEaWN0aW9uYXJ5IHsKCiAgICBwdWJsaWMgRm94UHJvRGlj\ndGlvbmFyeSgpIHsKICAgICAgICBwbGF0Zm9ybSA9ICJWaXN1YWwgRm94UHJv\nIjsKICAgICAgICBqb2luU3ludGF4ID0gU1lOVEFYX1RSQURJVElPTkFMOwoK\nICAgICAgICBzdXBwb3J0c0ZvcmVpZ25LZXlzID0gZmFsc2U7CiAgICAgICAg\nc3VwcG9ydHNEZWZlcnJlZENvbnN0cmFpbnRzID0gZmFsc2U7CiAgICAgICAg\nbWF4VGFibGVOYW1lTGVuZ3RoID0gMzA7CiAgICAgICAgbWF4Q29sdW1uTmFt\nZUxlbmd0aCA9IDMwOwogICAgICAgIG1heEluZGV4TmFtZUxlbmd0aCA9IDg7\nCiAgICAgICAgbWF4Q29uc3RyYWludE5hbWVMZW5ndGggPSA4OwoKICAgICAg\nICBiaW5hcnlUeXBlTmFtZSA9ICJHRU5FUkFMIjsKICAgICAgICBibG9iVHlw\nZU5hbWUgPSAiR0VORVJBTCI7CiAgICAgICAgbG9uZ1ZhcmJpbmFyeVR5cGVO\nYW1lID0gIkdFTkVSQUwiOwogICAgICAgIGNsb2JUeXBlTmFtZSA9ICJNRU1P\nIjsKICAgICAgICBsb25nVmFyY2hhclR5cGVOYW1lID0gIk1FTU8iOwogICAg\nICAgIGRhdGVUeXBlTmFtZSA9ICJUSU1FU1RBTVAiOwogICAgICAgIHRpbWVU\neXBlTmFtZSA9ICJUSU1FU1RBTVAiOwogICAgICAgIHZhcmNoYXJUeXBlTmFt\nZSA9ICJDSEFSQUNURVJ7MH0iOwogICAgICAgIGJpZ2ludFR5cGVOYW1lID0g\nIkRPVUJMRSI7CiAgICAgICAgbnVtZXJpY1R5cGVOYW1lID0gIklOVEVHRVIi\nOwogICAgICAgIHNtYWxsaW50VHlwZU5hbWUgPSAiSU5URUdFUiI7CiAgICAg\nICAgYml0VHlwZU5hbWUgPSAiTlVNRVJJQygxKSI7CiAgICAgICAgaW50ZWdl\nclR5cGVOYW1lID0gIklOVEVHRVIiOwogICAgICAgIHRpbnlpbnRUeXBlTmFt\nZSA9ICJJTlRFR0VSIjsKICAgICAgICBkZWNpbWFsVHlwZU5hbWUgPSAiRE9V\nQkxFIjsKICAgICAgICBkb3VibGVUeXBlTmFtZSA9ICJET1VCTEUiOwogICAg\nICAgIHJlYWxUeXBlTmFtZSA9ICJET1VCTEUiOwogICAgICAgIGZsb2F0VHlw\nZU5hbWUgPSAiTlVNRVJJQygxOSwxNikiOwoKICAgICAgICAvLyB0aGUgbWF4\nIGNoYXJhY3RlciBsaXRlcmFsIGxlbmd0aCBpcyBhY3R1YWxseSAyNTQsIGJ1\ndCBmb3IgcHJpbWFyeQogICAgICAgIC8vIGtleXMsIGl0IGlzIDI0MDsgZGVm\nYXVsdCB0byB0aGF0IGxlbmd0aCBzbyB1c2VycyBjYW4gYWRkIFBLcyBsYXRl\ncgogICAgICAgIGNoYXJhY3RlckNvbHVtblNpemUgPSAyNDA7CiAgICB9Cgog\nICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgU3RyaW5nIGdldFN0cmluZyhSZXN1\nbHRTZXQgcnMsIGludCBjb2x1bW4pCiAgICAgICAgdGhyb3dzIFNRTEV4Y2Vw\ndGlvbiB7CiAgICAgICAgLy8gZm94cHJvIGRvZXNuJ3QgYXV0by10cnVuY2F0\nZSB2YWx1ZXMuCiAgICAgICAgU3RyaW5nIHN0ciA9IHJzLmdldFN0cmluZyhj\nb2x1bW4pOwogICAgICAgIGlmIChzdHIgIT0gbnVsbCkKICAgICAgICAgICAg\nc3RyID0gc3RyLnRyaW0oKTsKICAgICAgICByZXR1cm4gc3RyOwogICAgfQoK\nICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgc2V0TnVsbChQcmVwYXJl\nZFN0YXRlbWVudCBzdG1udCwgaW50IGlkeCwgaW50IGNvbFR5cGUsCiAgICAg\nICAgQ29sdW1uIGNvbCkKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsK\nICAgICAgICAvLyBlbnN1cmUgdGhhdCBibG9iL2Nsb2IgaXMgaGFuZGxlZCB3\naXRoIHNhZmUgbWV0aG9kcy4KICAgICAgICBzd2l0Y2ggKGNvbFR5cGUpIHsK\nICAgICAgICAgICAgY2FzZSBUeXBlcy5CTE9COgogICAgICAgICAgICAgICAg\nc3RtbnQuc2V0Qnl0ZXMoaWR4LCBudWxsKTsKICAgICAgICAgICAgICAgIGJy\nZWFrOwogICAgICAgICAgICBjYXNlIFR5cGVzLkNMT0I6CiAgICAgICAgICAg\nICAgICBzdG1udC5zZXRTdHJpbmcoaWR4LCBudWxsKTsKICAgICAgICAgICAg\nICAgIGJyZWFrOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAg\nICAgc3VwZXIuc2V0TnVsbChzdG1udCwgaWR4LCBjb2xUeXBlLCBjb2wpOwog\nICAgICAgIH0KICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHByb3RlY3RlZCBT\ndHJpbmcgYXBwZW5kU2l6ZShDb2x1bW4gY29sLCBTdHJpbmcgdHlwZU5hbWUp\nIHsKICAgICAgICAvLyBmb3hwcm8gZG9lcyBub3QgbGlrZSB1bnNpemVkIGNv\nbHVtbiBkZWNsYXJhdGlvbnMuCiAgICAgICAgaWYgKGNvbC5nZXRTaXplKCkg\nPT0gMCkgewogICAgICAgICAgICBpZiAoIkNIQVJBQ1RFUiIuZXF1YWxzKHR5\ncGVOYW1lKSkKICAgICAgICAgICAgICAgIGNvbC5zZXRTaXplKDI0MCk7CiAg\nICAgICAgICAgIGVsc2UgaWYgKCJOVU1FUklDIi5lcXVhbHModHlwZU5hbWUp\nKQogICAgICAgICAgICAgICAgY29sLnNldFNpemUoMTkpOwogICAgICAgIH0K\nICAgICAgICByZXR1cm4gc3VwZXIuYXBwZW5kU2l6ZShjb2wsIHR5cGVOYW1l\nKTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHByb3RlY3RlZCBTdHJpbmcg\nZ2V0UHJpbWFyeUtleUNvbnN0cmFpbnRTUUwoUHJpbWFyeUtleSBwaykgewog\nICAgICAgIC8vIHRoaXMgZm94cHJvIGRyaXZlciBjb21iaW5hdGlvbiBkb2Vz\nIG5vdCBzdXBwb3J0IHByaW1hcnkga2V5cwogICAgICAgIHJldHVybiBudWxs\nOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIFN0cmluZ1tdIGdl\ndENyZWF0ZUluZGV4U1FMKEluZGV4IGluZGV4KSB7CiAgICAgICAgLy8gZm94\ncHJvIEpEQkMgYWNjZXNzIGRvZXMgbm90IGFsbG93IHRoZSBjcmVhdGlvbiBv\nZiBpbmRleGVzCiAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmdbMF07CiAgICB9\nCgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgQ29sdW1uW10gZ2V0Q29sdW1u\ncyhEYXRhYmFzZU1ldGFEYXRhIG1ldGEsIFN0cmluZyBjYXRhbG9nLAogICAg\nICAgIFN0cmluZyBzY2hlbWFOYW1lLCBTdHJpbmcgdGFibGVOYW1lLCBTdHJp\nbmcgY29sdW1uTmFtZSwgQ29ubmVjdGlvbiBjb25uKQogICAgICAgIHRocm93\ncyBTUUxFeGNlcHRpb24gewogICAgICAgIHJldHVybiBnZXRDb2x1bW5zKG1l\ndGEsIERCSWRlbnRpZmllci5uZXdDYXRhbG9nKGNhdGFsb2cpLCBEQklkZW50\naWZpZXIubmV3U2NoZW1hKHNjaGVtYU5hbWUpLAogICAgICAgICAgICBEQklk\nZW50aWZpZXIubmV3VGFibGUodGFibGVOYW1lKSwgREJJZGVudGlmaWVyLm5l\nd0NvbHVtbihjb2x1bW5OYW1lKSwgY29ubik7CiAgICB9CiAgICAKICAgIEBP\ndmVycmlkZQogICAgcHVibGljIENvbHVtbltdIGdldENvbHVtbnMoRGF0YWJh\nc2VNZXRhRGF0YSBtZXRhLCBEQklkZW50aWZpZXIgY2F0YWxvZywKICAgICAg\nICBEQklkZW50aWZpZXIgc2NoZW1hTmFtZSwgREJJZGVudGlmaWVyIHRhYmxl\nTmFtZSwgREJJZGVudGlmaWVyIGNvbHVtbk5hbWUsIENvbm5lY3Rpb24gY29u\nbikKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICB0cnkg\newogICAgICAgICAgICBDb2x1bW5bXSBjb2xzID0gc3VwZXIuZ2V0Q29sdW1u\ncyhtZXRhLCBjYXRhbG9nLCBzY2hlbWFOYW1lLAogICAgICAgICAgICAgICAg\ndGFibGVOYW1lLCBjb2x1bW5OYW1lLCBjb25uKTsKICAgICAgICAgICAgZm9y\nIChpbnQgaSA9IDA7IGNvbHMgIT0gbnVsbCAmJiBpIDwgY29scy5sZW5ndGg7\nIGkrKykgewogICAgICAgICAgICAgICAgLy8gZm94cHJvIHJldHVybnMgYW4g\nb2RkIHR5cGUgIjExIiBjb2RlIGZvciBEQVRFVElNRSBmaWVsZHMKICAgICAg\nICAgICAgICAgIGlmIChjb2xzW2ldLmdldFR5cGUoKSA9PSAxMSkKICAgICAg\nICAgICAgICAgICAgICBjb2xzW2ldLnNldFR5cGUoVHlwZXMuVElNRVNUQU1Q\nKTsKICAgICAgICAgICAgICAgICAgICAvLyBNRU1PIG1hcHMgdG8gTE9OR1ZB\nUkNIQVIgZHVyaW5nIHJldmVyc2UgYW5hbHlzaXMKICAgICAgICAgICAgICAg\nIGVsc2UgaWYgKCJNRU1PIi5lcXVhbHMoY29sc1tpXS5nZXRUeXBlSWRlbnRp\nZmllcigpLmdldE5hbWUoKSkpCiAgICAgICAgICAgICAgICAgICAgY29sc1tp\nXS5zZXRUeXBlKFR5cGVzLkNMT0IpOwogICAgICAgICAgICB9CiAgICAgICAg\nICAgIHJldHVybiBjb2xzOwogICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlv\nbiBzZSkgewogICAgICAgICAgICAvLyBmb3hwcm8gdGhyb3dzIGFuIGV4Y2Vw\ndGlvbiBpZiB0aGUgdGFibGUgc3BlY2lmaWVkIGluIHRoZQogICAgICAgICAg\nICAvLyBjb2x1bW4gbGlzdCBpcyBub3QgZm91bmQKICAgICAgICAgICAgaWYg\nKHNlLmdldEVycm9yQ29kZSgpID09IDU2MikKICAgICAgICAgICAgICAgIHJl\ndHVybiBudWxsOwogICAgICAgICAgICB0aHJvdyBzZTsKICAgICAgICB9CiAg\nICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgUHJpbWFyeUtleVtdIGdl\ndFByaW1hcnlLZXlzKERhdGFiYXNlTWV0YURhdGEgbWV0YSwgU3RyaW5nIGNh\ndGFsb2csCiAgICAgICAgU3RyaW5nIHNjaGVtYU5hbWUsIFN0cmluZyB0YWJs\nZU5hbWUsIENvbm5lY3Rpb24gY29ubikKICAgICAgICB0aHJvd3MgU1FMRXhj\nZXB0aW9uIHsKICAgICAgICAvLyB0aGlzIGNvbWJpbmF0aW9uIGRvZXMgbm90\nIHJlbGlhYmx5IHJldHVybiBQSyBpbmZvcm1hdGlvbgogICAgICAgIHJldHVy\nbiBudWxsOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIFByaW1h\ncnlLZXlbXSBnZXRQcmltYXJ5S2V5cyhEYXRhYmFzZU1ldGFEYXRhIG1ldGEs\nIERCSWRlbnRpZmllciBjYXRhbG9nLAogICAgICAgIERCSWRlbnRpZmllciBz\nY2hlbWFOYW1lLCBEQklkZW50aWZpZXIgdGFibGVOYW1lLCBDb25uZWN0aW9u\nIGNvbm4pCiAgICAgICAgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7CiAgICAgICAg\nLy8gdGhpcyBjb21iaW5hdGlvbiBkb2VzIG5vdCByZWxpYWJseSByZXR1cm4g\nUEsgaW5mb3JtYXRpb24KICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KfQo=\n","encoding":"base64"}

