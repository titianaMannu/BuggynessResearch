{"sha":"45ae13012c814f82652555f5c31d067ed507497c","node_id":"MDQ6QmxvYjIwNjM2NDo0NWFlMTMwMTJjODE0ZjgyNjUyNTU1ZjVjMzFkMDY3ZWQ1MDc0OTdj","size":13716,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/45ae13012c814f82652555f5c31d067ed507497c","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWw7CgppbXBvcnQg\namF2YS5zcWwuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmEuc3FsLkRhdGFiYXNl\nTWV0YURhdGE7CmltcG9ydCBqYXZhLnNxbC5SZXN1bHRTZXQ7CmltcG9ydCBq\nYXZhLnNxbC5TUUxFeGNlcHRpb247CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVu\nanBhLmpkYmMuaWRlbnRpZmllci5EQklkZW50aWZpZXI7CmltcG9ydCBvcmcu\nYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuZXhwcy5GaWx0ZXJWYWx1ZTsK\naW1wb3J0IG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5TZXF1ZW5j\nZTsKCnB1YmxpYyBjbGFzcyBJbmdyZXNEaWN0aW9uYXJ5IGV4dGVuZHMgREJE\naWN0aW9uYXJ5IHsKICAgIAogICAgcHVibGljIEluZ3Jlc0RpY3Rpb25hcnko\nKSB7CiAgICAgICAgLy8gU2NoZW1hIERhdGEKICAgICAgICBwbGF0Zm9ybSA9\nICJJbmdyZXMiOwogICAgICAgIGRyaXZlclZlbmRvciA9ICJJbmdyZXMgQ29y\ncG9yYXRpb24iOwogICAgICAgIG1heENvbHVtbk5hbWVMZW5ndGggPSAzMjsK\nICAgICAgICBtYXhDb25zdHJhaW50TmFtZUxlbmd0aCA9IDMyOwogICAgICAg\nIG1heEluZGV4TmFtZUxlbmd0aCA9IDMyOwogICAgICAgIG1heFRhYmxlTmFt\nZUxlbmd0aCA9IDMyOwogICAgICAgIHN1cHBvcnRzRGVmZXJyZWRDb25zdHJh\naW50cyA9IGZhbHNlOwogICAgICAgIHNjaGVtYUNhc2UgPSBEQkRpY3Rpb25h\ncnkuU0NIRU1BX0NBU0VfTE9XRVI7CiAgICAgICAgc3lzdGVtU2NoZW1hcyA9\nICIkaW5ncmVzIjsKICAgICAgICBzdXBwb3J0c0RlZmF1bHREZWxldGVBY3Rp\nb24gPSBmYWxzZTsKICAgICAgICBzdXBwb3J0c0RlZmF1bHRVcGRhdGVBY3Rp\nb24gPSBmYWxzZTsKCiAgICAgICAgLy8gU1FMCiAgICAgICAgdmFsaWRhdGlv\nblNRTCA9ICJTRUxFQ1QgREFURSgnbm93JykiOwogICAgICAgIHJhbmdlUG9z\naXRpb24gPSBEQkRpY3Rpb25hcnkuUkFOR0VfUE9TVF9TRUxFQ1Q7CiAgICAg\nICAgc3VwcG9ydHNMb2NraW5nV2l0aERpc3RpbmN0Q2xhdXNlID0gZmFsc2U7\nCiAgICAgICAgc3VwcG9ydHNMb2NraW5nV2l0aElubmVySm9pbiA9IGZhbHNl\nOwogICAgICAgIHN1cHBvcnRzTG9ja2luZ1dpdGhNdWx0aXBsZVRhYmxlcyA9\nIGZhbHNlOwogICAgICAgIHN1cHBvcnRzTG9ja2luZ1dpdGhPdXRlckpvaW4g\nPSBmYWxzZTsKICAgICAgICBzdXBwb3J0c1NlbGVjdEVuZEluZGV4ID0gdHJ1\nZTsKICAgICAgICBzdXBwb3J0c011bHRpcGxlTm9udHJhbnNhY3Rpb25hbFJl\nc3VsdFNldHMgPSBmYWxzZTsKICAgICAgICBhbGxvd3NBbGlhc0luQnVsa0Ns\nYXVzZSA9IGZhbHNlOwogICAgICAgIHJlcXVpcmVzQ2FzdEZvck1hdGhGdW5j\ndGlvbnMgPSB0cnVlOwogICAgICAgIHJlcXVpcmVzQWxpYXNGb3JTdWJzZWxl\nY3QgPSB0cnVlOwoKICAgICAgICAvLyBGdW5jdGlvbnMKICAgICAgICBzdHJp\nbmdMZW5ndGhGdW5jdGlvbiA9ICJMRU5HVEgoezB9KSI7CgogICAgICAgIC8v\nIFR5cGVzCiAgICAgICAgYmluYXJ5VHlwZU5hbWUgPSAiQllURSI7CiAgICAg\nICAgYml0VHlwZU5hbWUgPSAiVElOWUlOVCI7CiAgICAgICAgYmxvYlR5cGVO\nYW1lID0gIkxPTkcgQllURSI7CiAgICAgICAgYm9vbGVhblR5cGVOYW1lID0g\nIlRJTllJTlQiOwogICAgICAgIGNoYXJUeXBlTmFtZSA9ICJDSEFSIjsKICAg\nICAgICBjbG9iVHlwZU5hbWUgPSAiTE9ORyBOVkFSQ0hBUiI7CiAgICAgICAg\namF2YU9iamVjdFR5cGVOYW1lID0gIkxPTkcgQllURSI7CiAgICAgICAgbnVt\nZXJpY1R5cGVOYW1lID0gIkRFQ0lNQUwiOwogICAgICAgIGRvdWJsZVR5cGVO\nYW1lID0gIkZMT0FUIjsKICAgICAgICBsb25nVmFyY2hhclR5cGVOYW1lID0g\nIkxPTkcgTlZBUkNIQVIiOwogICAgICAgIGxvbmdWYXJiaW5hcnlUeXBlTmFt\nZSA9ICJMT05HIEJZVEUiOwogICAgICAgIHZhcmJpbmFyeVR5cGVOYW1lID0g\nIkxPTkcgQllURSI7CiAgICAgICAgZGF0ZVByZWNpc2lvbiA9IERCRGljdGlv\nbmFyeS5OQU5POwoKICAgICAgICAvLyBTY2hlbWEgTWV0YWRhdGEKICAgICAg\nICBzdXBwb3J0c051bGxUYWJsZUZvckdldEltcG9ydGVkS2V5cyA9IHRydWU7\nCiAgICAgICAgc3VwcG9ydHNOdWxsVGFibGVGb3JHZXRJbXBvcnRlZEtleXMg\nPSB0cnVlOwogICAgICAgIHN1cHBvcnRzTnVsbFRhYmxlRm9yR2V0SW5kZXhJ\nbmZvID0gdHJ1ZTsKICAgICAgICBzdXBwb3J0c051bGxUYWJsZUZvckdldFBy\naW1hcnlLZXlzID0gdHJ1ZTsKICAgICAgICB0YWJsZVR5cGVzID0gIlRBQkxF\nLFZJRVcsU1lTVEVNIFRBQkxFIjsKICAgICAgICByZXF1aXJlc0F1dG9Db21t\naXRGb3JNZXRhRGF0YSA9IHRydWU7CgogICAgICAgIC8vIEF1dG8gSW5jcmVt\nZW50CiAgICAgICAgbWF4QXV0b0Fzc2lnbk5hbWVMZW5ndGggPSAzMjsKICAg\nICAgICBzdXBwb3J0c0F1dG9Bc3NpZ24gPSBmYWxzZTsKICAgICAgICBhdXRv\nQXNzaWduQ2xhdXNlID0gbnVsbDsKICAgICAgICBhdXRvQXNzaWduVHlwZU5h\nbWUgPSBudWxsOwogICAgICAgIHNlcXVlbmNlU1FMID0gIlNFTEVDVCBzZXFf\nbmFtZSBBUyBTRVFVRU5DRV9OQU1FLCBzZXFfb3duZXIgQVMgU0VRVUVOQ0Vf\nU0NIRU1BIEZST00gaWlzZXF1ZW5jZXMiOwogICAgICAgIHNlcXVlbmNlTmFt\nZVNRTCA9ICJzZXFfbmFtZSA9ID8iOwogICAgICAgIHNlcXVlbmNlU2NoZW1h\nU1FMID0gInNlcV9vd25lciA9ID8iOwogICAgICAgIG5leHRTZXF1ZW5jZVF1\nZXJ5ID0gIlNFTEVDVCBORVhUIFZBTFVFIEZPUiB7MH0iOwoKICAgICAgICBz\neXN0ZW1UYWJsZXMgPQogICAgICAgICAgICAiaWlhY2Nlc3MsIGlpYWx0X2Nv\nbHVtbnMsIGlpYXR0cmlidXRlLCBpaWF1ZGl0LCBpaWF1ZGl0dGFibGVzLCAi\nCiAgICAgICAgICAgICAgICArICJpaWNkYmlkX2lkeCwgaWljb2x1bW5zLCBp\naWNvbnN0cmFpbnRfaW5kZXhlcywgIiAKICAgICAgICAgICAgICAgICsgImlp\nY29uc3RyYWludHMsIGlpZGF0YWJhc2UsIGlpZGF0YWJhc2VfaW5mbywgaWlk\nYl9jb21tZW50cywgIiAKICAgICAgICAgICAgICAgICsgImlpZGJfc3ViY29t\nbWVudHMsIGlpZGJjYXBhYmlsaXRpZXMsIGlpZGJjb25zdGFudHMsICIgCiAg\nICAgICAgICAgICAgICArICJpaWRiZGVwZW5kcywgaWlkYmlkX2lkeCwgaWlk\nYm1zX2NvbW1lbnQsIGlpZGJwcml2LCAiIAogICAgICAgICAgICAgICAgKyAi\naWlkYnByaXZpbGVnZXMsIGlpZGRiX25ldGNvc3QsIGlpZGRiX25vZGVjb3N0\ncywgaWlkZWZhdWx0LCAiIAogICAgICAgICAgICAgICAgKyAiaWlkZWZhdWx0\naWR4LCBpaWRldmljZXMsIGlpZGlzdGNvbCwgaWlkaXN0Y29scywgIiAKICAg\nICAgICAgICAgICAgICsgImlpZGlzdHNjaGVtZSwgaWlkaXN0c2NoZW1lcywg\naWlkaXN0dmFsLCAiCiAgICAgICAgICAgICAgICArICJpaWV2ZW50LCBpaWV2\nZW50cywgaWlleHRlbmQsIGlpZXh0ZW5kX2luZm8sICIKICAgICAgICAgICAg\nICAgICsgImlpZXh0ZW5kZWRfcmVsYXRpb24sIGlpZmlsZV9pbmZvLCBpaWd3\nMDZfYXR0cmlidXRlLCAiCiAgICAgICAgICAgICAgICArICJpaWd3MDZfcmVs\nYXRpb24sIGlpZ3cwN19hdHRyaWJ1dGUsIGlpZ3cwN19pbmRleCwgIgogICAg\nICAgICAgICAgICAgKyAiaWlndzA3X3JlbGF0aW9uLCBpaWhpc3RvZ3JhbSwg\naWloaXN0b2dyYW1zLCBpaWluZGV4LCAiCiAgICAgICAgICAgICAgICArICJp\naWluZGV4X2NvbHVtbnMsIGlpaW5kZXhlcywgaWlpbmdyZXNfdGFibGVzLCBp\naWludGVncml0aWVzLCAiCiAgICAgICAgICAgICAgICArICJpaWludGVncml0\neSwgaWlpbnRlZ3JpdHlpZHgsIGlpa2V5LCBpaWtleV9jb2x1bW5zLCBpaWtl\neXMsICIKICAgICAgICAgICAgICAgICsgImlpbG9jYXRpb25faW5mbywgaWls\nb2NhdGlvbnMsIGlpbG9nX2hlbHAsIGlpbHBhcnRpdGlvbnMsICIKICAgICAg\nICAgICAgICAgICsgImlpbXVsdGlfbG9jYXRpb25zLCBpaW9jb2x1bW5zLCBp\naW90YWJsZXMsIGlpcGFydG5hbWUsICIKICAgICAgICAgICAgICAgICsgImlp\ncGVybWl0cywgaWlwaHlzaWNhbF9jb2x1bW5zLCBpaXBoeXNpY2FsX3RhYmxl\ncywgaWlwcml2LCAiCiAgICAgICAgICAgICAgICArICJpaXByaXZsaXN0LCBp\naXByb2NfYWNjZXNzLCBpaXByb2NfcGFyYW1zLCBpaXByb2NlZHVyZSwgIgog\nICAgICAgICAgICAgICAgKyAiaWlwcm9jZWR1cmVfcGFyYW1ldGVyLCBpaXBy\nb2NlZHVyZXMsIGlpcHJvZmlsZSwgaWlwcm9maWxlcywgIgogICAgICAgICAg\nICAgICAgKyAiaWlwcm90ZWN0LCBpaXFyeXRleHQsIGlpcmFuZ2UsIGlpcmVm\nX2NvbnN0cmFpbnRzLCAiCiAgICAgICAgICAgICAgICArICJpaXJlZ2lzdHJh\ndGlvbnMsIGlpcmVsX2lkeCwgaWlyZWxhdGlvbiwgaWlyb2xlLCAiCiAgICAg\nICAgICAgICAgICArICJpaXJvbGVncmFudCwgaWlyb2xlZ3JhbnRzLCBpaXJv\nbGVzLCBpaXJ1bGUsIGlpcnVsZWlkeCwgIgogICAgICAgICAgICAgICAgKyAi\naWlydWxlaWR4MSwgaWlydWxlcywgaWlzY2hlbWEsIGlpc2NoZW1haWR4LCBp\naXNlY2FsYXJtLCAiCiAgICAgICAgICAgICAgICArICJpaXNlY3R5cGUsIGlp\nc2VjdXJpdHlfYWxhcm1zLCBpaXNlY3VyaXR5X3N0YXRlLCAiCiAgICAgICAg\nICAgICAgICArICJpaXNlY3VyaXR5c3RhdGUsIGlpc2VxdWVuY2UsIGlpc2Vx\ndWVuY2VzLCAiCiAgICAgICAgICAgICAgICArICJpaXNlc3Npb25fcHJpdmls\nZWdlcywgaWlzdGFyX2NkYmluZm8sIGlpc3Rhcl9jZGJzLCAiCiAgICAgICAg\nICAgICAgICArICJpaXN0YXRpc3RpY3MsIGlpc3RhdHMsIGlpc3lub255bSwg\naWlzeW5vbnltcywgaWl0YWJsZXMsICIKICAgICAgICAgICAgICAgICsgImlp\ndHJlZSwgaWl1c2VyLCBpaXVzZXJncm91cCwgaWl1c2VycywgaWl2aWV3cywg\nIgogICAgICAgICAgICAgICAgKyAiaWl4ZGJkZXBlbmRzLCBpaXhldmVudCwg\naWl4cHJpdiwgaWl4cHJvY2VkdXJlLCAiCiAgICAgICAgICAgICAgICArICJp\naXhzeW5vbnltLCBpaV9hYmZjbGFzc2VzLCBpaV9hYmZkZXBlbmRlbmNpZXMs\nICIKICAgICAgICAgICAgICAgICsgImlpX2FiZm9iamVjdHMsIGlpX2FwcF9j\nbnRuc19jb21wLCBpaV9hcHBfY250bnNfY29tcF9pbmRleCwgIgogICAgICAg\nICAgICAgICAgKyAiaWlfYXBwbGljYXRpb25zLCBpaV9hdHR0eXBlLCBpaV9j\nbGllbnRfZGVwX21vZCwgIgogICAgICAgICAgICAgICAgKyAiaWlfY29tcG9u\nZW50cywgaWlfZGF0YWJhc2VzLCBpaV9kYmRfYWNsLCAiCiAgICAgICAgICAg\nICAgICArICJpaV9kYmRfaWRlbnRpZmllcnMsIGlpX2RiZF9sb2NhdGlvbnMs\nIGlpX2RiZF9yaWdodHNsaXN0LCAiCiAgICAgICAgICAgICAgICArICJpaV9k\nYmRfdGFibGVfY2hhciwgaWlfZGVmYXVsdHMsIGlpX2RlcGVuZGVuY2llcywg\nIgogICAgICAgICAgICAgICAgKyAiaWlfZGVwZW5kZW5jaWVzX2luZGV4LCBp\naV9kZXBlbmRlbmNpZXNfaW5kZXgyLCAiCiAgICAgICAgICAgICAgICArICJp\naV9kaWN0X21vZHVsZXMsIGlpX2RvbWFpbnMsIGlpX2VuY29kZWRfZm9ybXMs\nICIKICAgICAgICAgICAgICAgICsgImlpX2VuY29kaW5ncywgaWlfZW50aXRp\nZXMsIGlpX2VudGl0aWVzX2luZGV4LCBpaV9lbnR0eXBlLCAiCiAgICAgICAg\nICAgICAgICArICJpaV9maWVsZHMsICIgKyAiaWlfZm9ybXMsIGlpX2ZyYW1l\ndmFycywgaWlfZ3JvcHRzLCAiCiAgICAgICAgICAgICAgICArICJpaV9pZCwg\naWlfaW5jbF9hcHBzLCBpaV9qb2luZGVmcywgaWlfam9pbnNwZWNzLCAiCiAg\nICAgICAgICAgICAgICArICJpaV9rZXlfaW5mbywgaWlfa2V5X21hcCwgaWlf\nbGltaXRzLCBpaV9sb2NrcywgIgogICAgICAgICAgICAgICAgKyAiaWlfbG9u\nZ3JlbWFya3MsIGlpX21lbnVhcmdzLCBpaV9vYmplY3RzLCAiCiAgICAgICAg\nICAgICAgICArICJpaV9vYmplY3RzX2luZGV4LCBpaV9xYmZuYW1lcywgaWlf\ncmNvbW1hbmRzLCAiCiAgICAgICAgICAgICAgICArICJpaV9yZWxfY25jdHNf\nZW50LCBpaV9yZWx0eXBlLCBpaV9yZXBvcnRzLCAiCiAgICAgICAgICAgICAg\nICArICJpaV9zZXF1ZW5jZV92YWx1ZXMsIGlpX3NxbGF0dHMsIGlpX3NxbHRh\nYmxlcywgIgogICAgICAgICAgICAgICAgKyAiaWlfc3Jjb2JqX2VuY29kZWQs\nIGlpX3N0b3JlZF9iaXRtYXBzLCBpaV9zdG9yZWRfc3RyaW5ncywgIgogICAg\nICAgICAgICAgICAgKyAiaWlfdHJpbSwgaWlfdnFqb2lucywgaWlfdnF0YWJj\nb2xzLCBpaV92cXRhYmxlcyI7CiAgICAgICAgZml4ZWRTaXplVHlwZU5hbWVz\nID0KICAgICAgICAgICAgIklOVEVHRVIsSU5URUdFUjEsSU5URUdFUjIsSU5U\nRUdFUjQsSU5URUdFUjgsVElOWUlOVCxTTUFMTElOVCwiCiAgICAgICAgICAg\nICAgICArICJCSUdJTlQsRkxPQVQsRkxPQVQ0LEZMT0FUOCxSRUFMLERBVEUs\nSU5HUkVTREFURSxBTlNJREFURSI7CiAgICAgICAgcmVzZXJ2ZWRXb3JkcyA9\nCiAgICAgICAgICAgICJBQk9SVCxCWVJFRixDQUxMUFJPQyxDT01NRU5ULENP\nUFksREVGSU5FLERJU0FCTEUsRE8sRUxTRUlGLCIKICAgICAgICAgICAgICAg\nICsgIkVOQUJMRSxFTkRJRixFTkRMT09QLEVORFdISUxFLEVYQ0xVRElORyxJ\nRixJTVBPUlQsSU5ERVgsIgogICAgICAgICAgICAgICAgKyAiSU5URUdSSVRZ\nLE1FU1NBR0UsTU9ESUZZLFBFUk1JVCxSQUlTRSxSRUZFUkVOQ0lORyxSRUdJ\nU1RFUiwiCiAgICAgICAgICAgICAgICArICJSRUxPQ0FURSxSRU1PVkUsUkVQ\nRUFULFJFVFVSTixTQVZFLFNBVkVQT0lOVCxVTlRJTCxXSElMRSI7CiAgICAg\nICAgCiAgICAgICAgLyogRG9uJ3QgYWxsb3cgInRpZCIgYXMgYSBjb2x1bW4g\nbmFtZTsgdGhpcyBpcyBhbiBpbnRlcm5hbCBjb2x1bW4gKi8KICAgICAgICBp\nbnZhbGlkQ29sdW1uV29yZFNldC5hZGQoInRpZCIpOwogICAgfQoKICAgIC8q\nIChub24tSmF2YWRvYykKICAgICAqIEBzZWUgb3JnLmFwYWNoZS5vcGVuanBh\nLmpkYmMuc3FsLkRCRGljdGlvbmFyeSNjb25uZWN0ZWRDb25maWd1cmF0aW9u\nKGphdmEuc3FsLkNvbm5lY3Rpb24pCiAgICAgKi8KICAgIHB1YmxpYyB2b2lk\nIGNvbm5lY3RlZENvbmZpZ3VyYXRpb24oQ29ubmVjdGlvbiBjb25uKSB0aHJv\nd3MgU1FMRXhjZXB0aW9uIHsKICAgICAgICBzdXBlci5jb25uZWN0ZWRDb25m\naWd1cmF0aW9uKGNvbm4pOwogICAgICAgIAogICAgICAgIGlmIChpc1ZlcnNp\nb245XzJvckxhdGVyKGNvbm4pKQogICAgICAgICAgICBzdXBwb3J0c1NlbGVj\ndFN0YXJ0SW5kZXggPSB0cnVlOwogICAgfQogICAgCiAgICBib29sZWFuIGlz\nVmVyc2lvbjlfMm9yTGF0ZXIoQ29ubmVjdGlvbiBjb25uKSB0aHJvd3MgU1FM\nRXhjZXB0aW9uCiAgICB7CiAgICAgICAgRGF0YWJhc2VNZXRhRGF0YSBtZXRh\nID0gY29ubi5nZXRNZXRhRGF0YSgpOwogICAgICAgIAogICAgICAgIGludCBk\nYk1ham9yVmVyc2lvbiA9IG1ldGEuZ2V0RGF0YWJhc2VNYWpvclZlcnNpb24o\nKTsKICAgICAgICBpbnQgZGJNaW5vclZlcnNpb24gPSBtZXRhLmdldERhdGFi\nYXNlTWlub3JWZXJzaW9uKCk7CiAgICAgICAgCiAgICAgICAgaWYgKChkYk1h\nam9yVmVyc2lvbiA9PSA5ICYmIGRiTWlub3JWZXJzaW9uID49IDIpIHx8CiAg\nICAgICAgICAgICAgICBkYk1ham9yVmVyc2lvbiA+IDkpCiAgICAgICAgICAg\nIHJldHVybiB0cnVlOwogICAgICAgIGVsc2UKICAgICAgICAgICAgcmV0dXJu\nIGZhbHNlOwogICAgfQoKICAgIC8qKgogICAgICogSW1wbGVtZW50YXRpb24g\nb2YgYXBwZW5kU2VsZWN0UmFuZ2UgZm9yIEluZ3JlcyAtIHVzZXMgIlNFTEVD\nVCBGSVJTVCBuIgogICAgICogc3ludGF4LiBOb3QgaW1wbGVtZW50ZWQgaW4g\nc3VwZXJjbGFzcy4KICAgICAqIAogICAgICogQHNlZSBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5zcWwuREJEaWN0aW9uYXJ5I2FwcGVuZFNlbGVjdFJhbmdl\nKAogICAgICogICAgICBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuU1FM\nQnVmZmVyLCBsb25nLCBsb25nLCBib29sZWFuKQogICAgICogCiAgICAgKiBA\ncGFyYW0gYnVmCiAgICAgKiAgICAgICAgICAgIC0gU1FMIGJ1aWxkaW5nIGJ1\nZmZlci4KICAgICAqIEBwYXJhbSBzdGFydAogICAgICogICAgICAgICAgICAt\nIElnbm9yZWQsIG5vdCBzdXBwb3J0ZWQgYnkgSW5ncmVzLiBUaHJvd3MgYW4K\nICAgICAqIEBwYXJhbSBlbmQKICAgICAqICAgICAgICAgICAgLSBUaGUgbnVt\nYmVyIG9mIHJlY29yZHMgdG8gcmV0dXJuLgogICAgICogQHBhcmFtIHN1YnNl\nbGVjdAogICAgICogICAgICAgICAgICAtIElzIHRoZSBTUUwgcXVlcnkgcGFy\ndCBvZiBhIHN1YnNlbGVjdCBzdGF0ZW1lbnQ/CiAgICAgKi8KICAgIHByb3Rl\nY3RlZCB2b2lkIGFwcGVuZFNlbGVjdFJhbmdlKFNRTEJ1ZmZlciBidWYsIGxv\nbmcgc3RhcnQsIGxvbmcgZW5kLAogICAgICAgIGJvb2xlYW4gc3Vic2VsZWN0\nKSB7CiAgICAgICAgaWYgKCFzdXBwb3J0c1NlbGVjdFN0YXJ0SW5kZXggJiYg\nc3RhcnQgPiAwKSAKICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1\nbWVudEV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICJJbmdyZXMgZG9lcyBu\nb3Qgc3VwcG9ydCBzdGFydCBpbmRleGVzIGZvciBTZWxlY3QgUmFuZ2VzIik7\nCiAgICAgICAgCiAgICAgICAgaWYgKHN0YXJ0ID4gMCAmJiBzdGFydCAhPSBM\nb25nLk1BWF9WQUxVRSAmJiAhc3Vic2VsZWN0KQogICAgICAgICAgICBidWYu\nYXBwZW5kKCIgT0ZGU0VUICIpLmFwcGVuZChMb25nLnRvU3RyaW5nKHN0YXJ0\nKSk7CiAgICAgICAgCiAgICAgICAgaWYgKGVuZCA+IDAgJiYgZW5kICE9IExv\nbmcuTUFYX1ZBTFVFICYmICFzdWJzZWxlY3QpIAogICAgICAgICAgICBidWYu\nYXBwZW5kKCIgRkVUQ0ggTkVYVCAiKS5hcHBlbmQoTG9uZy50b1N0cmluZyhl\nbmQpKS5hcHBlbmQoIiBST1dTIE9OTFkiKTsKICAgIH0KICAgIAogICAgLyoq\nCiAgICAgKiBJbXBsZW1lbnRhdGlvbiBvZiBlbXB0eSBtZXRob2QgaW4gREJE\naWN0aW9uYXJ5LiAgUmV0dXJucyBTUUwgdG8gZmluZCB0aGUgc2VxdWVuY2Vz\nIGRlZmluZWQgaW4gdGhlIGRhdGFiYXNlLgogICAgICovCiAgICBAT3ZlcnJp\nZGUKICAgIHByb3RlY3RlZCBTdHJpbmcgZ2V0U2VxdWVuY2VzU1FMKFN0cmlu\nZyBzY2hlbWFOYW1lLCBTdHJpbmcgc2VxdWVuY2VOYW1lKSB7CiAgICAgICAg\ncmV0dXJuIGdldFNlcXVlbmNlc1NRTChEQklkZW50aWZpZXIubmV3U2NoZW1h\nKHNjaGVtYU5hbWUpLCBEQklkZW50aWZpZXIubmV3U2VxdWVuY2Uoc2VxdWVu\nY2VOYW1lKSk7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwcm90ZWN0ZWQg\nU3RyaW5nIGdldFNlcXVlbmNlc1NRTChEQklkZW50aWZpZXIgc2NoZW1hTmFt\nZSwgREJJZGVudGlmaWVyIHNlcXVlbmNlTmFtZSkgewogICAgICAgIFN0cmlu\nZ0J1aWxkZXIgYnVmID0gbmV3IFN0cmluZ0J1aWxkZXIoKTsKICAgICAgICBi\ndWYuYXBwZW5kKHNlcXVlbmNlU1FMKTsKICAgICAgICBpZiAoIURCSWRlbnRp\nZmllci5pc051bGwoc2NoZW1hTmFtZSkgfHwgIURCSWRlbnRpZmllci5pc051\nbGwoc2VxdWVuY2VOYW1lKSkKICAgICAgICAgICAgYnVmLmFwcGVuZCgiIFdI\nRVJFICIpOwogICAgICAgIGlmICghREJJZGVudGlmaWVyLmlzTnVsbChzY2hl\nbWFOYW1lKSkgewogICAgICAgICAgICBidWYuYXBwZW5kKHNlcXVlbmNlU2No\nZW1hU1FMKTsKICAgICAgICAgICAgaWYgKHNlcXVlbmNlTmFtZSAhPSBudWxs\nKQogICAgICAgICAgICAgICAgYnVmLmFwcGVuZCgiIEFORCAiKTsKICAgICAg\nICB9CiAgICAgICAgaWYgKCFEQklkZW50aWZpZXIuaXNOdWxsKHNlcXVlbmNl\nTmFtZSkpCiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoc2VxdWVuY2VOYW1lU1FM\nKTsKICAgICAgICByZXR1cm4gYnVmLnRvU3RyaW5nKCk7CiAgICB9CiAgICAK\nICAgIC8qKgogICAgICogT3ZlcnJpZGVzIERCRGljdGlvbmFyeSdzIG5ld1Nl\ncXVlbmNlIG1ldGhvZDsgdHJpbXMgdGhlIHNlcXVlbmNlIG5hbWUuCiAgICAg\nKiAKICAgICAqIEBzZWUgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLkRC\nRGljdGlvbmFyeSNuZXdTZXF1ZW5jZShSZXN1bHRTZXQpCiAgICAgKi8KICAg\nIEBPdmVycmlkZQogICAgcHJvdGVjdGVkIFNlcXVlbmNlIG5ld1NlcXVlbmNl\nKFJlc3VsdFNldCBzZXF1ZW5jZU1ldGEpIHRocm93cyBTUUxFeGNlcHRpb24g\newogICAgICAgIFNlcXVlbmNlIHNlcSA9IHN1cGVyLm5ld1NlcXVlbmNlKHNl\ncXVlbmNlTWV0YSk7CiAgICAgICAgc2VxLnNldElkZW50aWZpZXIoREJJZGVu\ndGlmaWVyLnRyaW0oc2VxLmdldElkZW50aWZpZXIoKSkpOwogICAgICAgIHJl\ndHVybiBzZXE7CiAgICB9CiAgICAKICAgIC8qKgogICAgICogSW52b2tlIElu\nZ3JlcycgSW5kZXhPZiBGdW5jdGlvbiAoRmluZCB0aGUgZmlyc3QgaW5kZXgg\nb2YgYSBzdHJpbmcgaW4KICAgICAqIGFub3RoZXIgc3RyaW5nLCBzdGFydGlu\nZyBhdCBhIGdpdmVuIGluZGV4KS4KICAgICAqIAogICAgICogQHNlZSBvcmcu\nYXBhY2hlLm9wZW5qcGEuamRiYy5zcWwuREJEaWN0aW9uYXJ5I2luZGV4T2Yo\nCiAgICAgKiAgICAgIG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNxbC5TUUxC\ndWZmZXIsCiAgICAgKiAgICAgIG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLmtl\ncm5lbC5leHBzLkZpbHRlclZhbHVlLAogICAgICogICAgICBvcmcuYXBhY2hl\nLm9wZW5qcGEuamRiYy5rZXJuZWwuZXhwcy5GaWx0ZXJWYWx1ZSwKICAgICAq\nICAgICAgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMua2VybmVsLmV4cHMuRmls\ndGVyVmFsdWUpCiAgICAgKiAKICAgICAqIEBwYXJhbSBidWYKICAgICAqICAg\nICAgICAgICAgLSB0aGUgU1FMIEJ1ZmZlciB0byB3cml0ZSB0aGUgaW5kZXhP\nZiBpbnZvY2F0aW9uIHRvCiAgICAgKiBAcGFyYW0gc3RyCiAgICAgKiAgICAg\nICAgICAgIC0gYSBxdWVyeSB2YWx1ZSByZXByZXNlbnRpbmcgdGhlIHRhcmdl\ndCBzdHJpbmcKICAgICAqIEBwYXJhbSBmaW5kCiAgICAgKiAgICAgICAgICAg\nIC0gYSBxdWVyeSB2YWx1ZSByZXByZXNlbnRpbmcgdGhlIHNlYXJjaCBzdHJp\nbmcKICAgICAqIEBwYXJhbSBzdGFydAogICAgICogICAgICAgICAgICAtIGEg\ncXVlcnkgdmFsdWUgcmVwcmVzZW50aW5nIHRoZSBzdGFydCBpbmRleCwgb3Ig\nbnVsbCB0byAKICAgICAqICAgICAgICAgICAgc3RhcnQgYXQgdGhlIGJlZ2lu\nbmluZwogICAgICovCgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBp\nbmRleE9mKFNRTEJ1ZmZlciBidWYsIEZpbHRlclZhbHVlIHN0ciwgRmlsdGVy\nVmFsdWUgZmluZCwKICAgICAgICBGaWx0ZXJWYWx1ZSBzdGFydCkgewogICAg\nICAgIGJ1Zi5hcHBlbmQoIihQT1NJVElPTigoIik7CiAgICAgICAgZmluZC5h\ncHBlbmRUbyhidWYpOwogICAgICAgIGJ1Zi5hcHBlbmQoIikgSU4gKCIpOwoK\nICAgICAgICBpZiAoc3RhcnQgIT0gbnVsbCkKICAgICAgICAgICAgc3Vic3Ry\naW5nKGJ1Ziwgc3RyLCBzdGFydCwgbnVsbCk7CiAgICAgICAgZWxzZQogICAg\nICAgICAgICBzdHIuYXBwZW5kVG8oYnVmKTsKICAgICAgICAKICAgICAgICBi\ndWYuYXBwZW5kKCIpKSAtIDEiKTsKCiAgICAgICAgaWYgKHN0YXJ0ICE9IG51\nbGwpIHsKICAgICAgICAgICAgYnVmLmFwcGVuZCgiICsgIik7CiAgICAgICAg\nICAgIHN0YXJ0LmFwcGVuZFRvKGJ1Zik7CiAgICAgICAgfQogICAgICAgIGJ1\nZi5hcHBlbmQoIikiKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBzZWUgb3Jn\nLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLkRCRGljdGlvbmFyeSNzdWJzdHJp\nbmcoCiAgICAgKiAgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMuc3FsLlNRTEJ1\nZmZlciwgCiAgICAgKiAgb3JnLmFwYWNoZS5vcGVuanBhLmpkYmMua2VybmVs\nLmV4cHMuRmlsdGVyVmFsdWUsIAogICAgICogIG9yZy5hcGFjaGUub3Blbmpw\nYS5qZGJjLmtlcm5lbC5leHBzLkZpbHRlclZhbHVlLCAKICAgICAqICBvcmcu\nYXBhY2hlLm9wZW5qcGEuamRiYy5rZXJuZWwuZXhwcy5GaWx0ZXJWYWx1ZSkK\nICAgICAqLwogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBzdWJzdHJp\nbmcoU1FMQnVmZmVyIGJ1ZiwgRmlsdGVyVmFsdWUgc3RyLCBGaWx0ZXJWYWx1\nZSBzdGFydCwKICAgICAgICBGaWx0ZXJWYWx1ZSBlbmQpIHsKICAgICAgICBi\ndWYuYXBwZW5kKHN1YnN0cmluZ0Z1bmN0aW9uTmFtZSkuYXBwZW5kKCIoIik7\nCiAgICAgICAgc3RyLmFwcGVuZFRvKGJ1Zik7CiAgICAgICAgYnVmLmFwcGVu\nZCgiLCAiKTsKICAgICAgICBpZiAoc3RhcnQuZ2V0VmFsdWUoKSBpbnN0YW5j\nZW9mIE51bWJlcikgewogICAgICAgICAgICBsb25nIHN0YXJ0TG9uZyA9IHRv\nTG9uZyhzdGFydCk7CiAgICAgICAgICAgIGJ1Zi5hcHBlbmQoTG9uZy50b1N0\ncmluZyhzdGFydExvbmcgKyAxKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAg\nICAgICAgYnVmLmFwcGVuZCgiKENBU1QgKCgiKTsKICAgICAgICAgICAgc3Rh\ncnQuYXBwZW5kVG8oYnVmKTsKICAgICAgICAgICAgYnVmLmFwcGVuZCgiICsg\nMSkgQVMgSU5URUdFUikpIik7CiAgICAgICAgfQogICAgICAgIGlmIChlbmQg\nIT0gbnVsbCkgewogICAgICAgICAgICBidWYuYXBwZW5kKCIsICIpOwogICAg\nICAgICAgICBpZiAoc3RhcnQuZ2V0VmFsdWUoKSBpbnN0YW5jZW9mIE51bWJl\ncgogICAgICAgICAgICAgICAgJiYgZW5kLmdldFZhbHVlKCkgaW5zdGFuY2Vv\nZiBOdW1iZXIpIHsKICAgICAgICAgICAgICAgIGxvbmcgc3RhcnRMb25nID0g\ndG9Mb25nKHN0YXJ0KTsKICAgICAgICAgICAgICAgIGxvbmcgZW5kTG9uZyA9\nIHRvTG9uZyhlbmQpOwogICAgICAgICAgICAgICAgYnVmLmFwcGVuZChMb25n\nLnRvU3RyaW5nKGVuZExvbmcgLSBzdGFydExvbmcpKTsKICAgICAgICAgICAg\nfSBlbHNlIHsKICAgICAgICAgICAgICAgIGJ1Zi5hcHBlbmQoIihDQVNUICgi\nKTsKICAgICAgICAgICAgICAgIGVuZC5hcHBlbmRUbyhidWYpOwogICAgICAg\nICAgICAgICAgYnVmLmFwcGVuZCgiIC0gKCIpOwogICAgICAgICAgICAgICAg\nc3RhcnQuYXBwZW5kVG8oYnVmKTsKICAgICAgICAgICAgICAgIGJ1Zi5hcHBl\nbmQoIikgQVMgSU5URUdFUikpIik7CiAgICAgICAgICAgIH0KICAgICAgICB9\nCiAgICAgICAgYnVmLmFwcGVuZCgiKSIpOwogICAgfSAgCn0K\n","encoding":"base64"}

