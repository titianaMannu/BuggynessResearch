{"sha":"6200e4dfb9f6ae46b776245b1dd2247810cadb40","node_id":"MDQ6QmxvYjIwNjM2NDo2MjAwZTRkZmI5ZjZhZTQ2Yjc3NjI0NWIxZGQyMjQ3ODEwY2FkYjQw","size":5142,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/6200e4dfb9f6ae46b776245b1dd2247810cadb40","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWw7CgppbXBvcnQg\namF2YS5zcWwuVHlwZXM7CgppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLmpk\nYmMuaWRlbnRpZmllci5EQklkZW50aWZpZXI7CmltcG9ydCBvcmcuYXBhY2hl\nLm9wZW5qcGEuamRiYy5rZXJuZWwuZXhwcy5GaWx0ZXJWYWx1ZTsKaW1wb3J0\nIG9yZy5hcGFjaGUub3BlbmpwYS5qZGJjLnNjaGVtYS5Db2x1bW47CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zY2hlbWEuSW5kZXg7CmltcG9y\ndCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLmlkZW50aWZpZXIuSWRlbnRpZmll\nclV0aWw7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEubGliLnV0aWwuTG9j\nYWxpemVyOwppbXBvcnQgb3JnLmFwYWNoZS5vcGVuanBhLnV0aWwuU3RvcmVF\neGNlcHRpb247CgovKioKICogRGljdGlvbmFyeSBmb3IgQm9ybGFuZCBJbnRl\ncmJhc2UuCiAqLwpwdWJsaWMgY2xhc3MgSW50ZXJiYXNlRGljdGlvbmFyeQog\nICAgZXh0ZW5kcyBEQkRpY3Rpb25hcnkgewoKICAgIHByaXZhdGUgc3RhdGlj\nIGZpbmFsIExvY2FsaXplciBfbG9jID0gTG9jYWxpemVyLmZvclBhY2thZ2UK\nICAgICAgICAoSW50ZXJiYXNlRGljdGlvbmFyeS5jbGFzcyk7CgogICAgcHVi\nbGljIEludGVyYmFzZURpY3Rpb25hcnkoKSB7CiAgICAgICAgcGxhdGZvcm0g\nPSAiQm9ybGFuZCBJbnRlcmJhc2UiOwogICAgICAgIHZhbGlkYXRpb25TUUwg\nPSAiU0VMRUNUIDEgRlJPTSBSREIkREFUQUJBU0UiOwogICAgICAgIHN1cHBv\ncnRzRGVmZXJyZWRDb25zdHJhaW50cyA9IGZhbHNlOwoKICAgICAgICB1c2VH\nZXRTdHJpbmdGb3JDbG9icyA9IHRydWU7CiAgICAgICAgdXNlU2V0U3RyaW5n\nRm9yQ2xvYnMgPSB0cnVlOwogICAgICAgIHVzZUdldEJ5dGVzRm9yQmxvYnMg\nPSB0cnVlOwogICAgICAgIHVzZVNldEJ5dGVzRm9yQmxvYnMgPSB0cnVlOwoK\nICAgICAgICAvLyB0aGUgSkRCQyBkcml2ZXIgY2xhaW1zIDMxLCBidXQgdGhh\ndCBjYXVzZXMgZXhjZXB0aW9ucwogICAgICAgIG1heFRhYmxlTmFtZUxlbmd0\naCA9IDMwOwoKICAgICAgICBiaWdpbnRUeXBlTmFtZSA9ICJOVU1FUklDKDE4\nLDApIjsKICAgICAgICBpbnRlZ2VyVHlwZU5hbWUgPSAiSU5URUdFUiI7CiAg\nICAgICAgZG91YmxlVHlwZU5hbWUgPSAiRE9VQkxFIFBSRUNJU0lPTiI7CiAg\nICAgICAgY2hhclR5cGVOYW1lID0gIkNIQVIoMSkiOwogICAgICAgIGJsb2JU\neXBlTmFtZSA9ICJCTE9CIjsKICAgICAgICBjbG9iVHlwZU5hbWUgPSAiQkxP\nQiBTVUJfVFlQRSAxIjsKICAgICAgICBiaXRUeXBlTmFtZSA9ICJTTUFMTElO\nVCI7CiAgICAgICAgc21hbGxpbnRUeXBlTmFtZSA9ICJTTUFMTElOVCI7CiAg\nICAgICAgdGlueWludFR5cGVOYW1lID0gIlNNQUxMSU5UIjsKCiAgICAgICAg\nLy8gbm8gc3VwcG9ydCBmb3IgbG93ZXItY2FzaW5nIG9yIGZpbmRpbmcgdGhl\nIGxlbmd0aCBvZiBzdHJpbmdzCiAgICAgICAgLy8gKGFsdGhvdWdoIGl0IGNh\nbiBiZSBhZGRlZCB0byB0aGUgZGF0YWJhc2U7IHNlZQogICAgICAgIC8vIGh0\ndHA6Ly9iZG4uYm9ybGFuZC5jb20vYXJ0aWNsZS8wLDE0MTAsMjc1NjMsMDAu\naHRtbCApCiAgICAgICAgdG9Mb3dlckNhc2VGdW5jdGlvbiA9IG51bGw7CiAg\nICAgICAgc3RyaW5nTGVuZ3RoRnVuY3Rpb24gPSBudWxsOwogICAgfQoKICAg\nIEBPdmVycmlkZQogICAgcHJvdGVjdGVkIFN0cmluZyBnZXRUYWJsZU5hbWVG\nb3JNZXRhZGF0YShTdHJpbmcgdGFibGVOYW1lKSB7CiAgICAgICAgcmV0dXJu\nIGdldFRhYmxlTmFtZUZvck1ldGFkYXRhKERCSWRlbnRpZmllci5uZXdUYWJs\nZSh0YWJsZU5hbWUpKTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHByb3Rl\nY3RlZCBTdHJpbmcgZ2V0VGFibGVOYW1lRm9yTWV0YWRhdGEoREJJZGVudGlm\naWVyIHRhYmxlTmFtZSkgewogICAgICAgIGlmIChEQklkZW50aWZpZXIuaXNO\ndWxsKHRhYmxlTmFtZSkpIHsKICAgICAgICAgICAgcmV0dXJuIElkZW50aWZp\nZXJVdGlsLlBFUkNFTlQ7CiAgICAgICAgfQogICAgICAgIHJldHVybiBzdXBl\nci5nZXRUYWJsZU5hbWVGb3JNZXRhZGF0YSh0YWJsZU5hbWUpOwogICAgfQoK\nICAgIEBPdmVycmlkZQogICAgcHJvdGVjdGVkIFN0cmluZyBnZXRDb2x1bW5O\nYW1lRm9yTWV0YWRhdGEoU3RyaW5nIGNvbHVtbk5hbWUpIHsKICAgICAgICBy\nZXR1cm4gZ2V0Q29sdW1uTmFtZUZvck1ldGFkYXRhKERCSWRlbnRpZmllci5u\nZXdDb2x1bW4oY29sdW1uTmFtZSkpOwogICAgfQoKICAgIEBPdmVycmlkZQog\nICAgcHJvdGVjdGVkIFN0cmluZyBnZXRDb2x1bW5OYW1lRm9yTWV0YWRhdGEo\nREJJZGVudGlmaWVyIGNvbHVtbk5hbWUpIHsKICAgICAgICBpZiAoREJJZGVu\ndGlmaWVyLmlzTnVsbChjb2x1bW5OYW1lKSkgewogICAgICAgICAgICByZXR1\ncm4gSWRlbnRpZmllclV0aWwuUEVSQ0VOVDsKICAgICAgICB9CiAgICAgICAg\ncmV0dXJuIHN1cGVyLmdldENvbHVtbk5hbWVGb3JNZXRhZGF0YShjb2x1bW5O\nYW1lKTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHByb3RlY3RlZCBTdHJp\nbmcgYXBwZW5kU2l6ZShDb2x1bW4gY29sLCBTdHJpbmcgdHlwZU5hbWUpIHsK\nICAgICAgICBpZiAoY29sLmlzUHJpbWFyeUtleSgpICYmIGNvbC5nZXRUeXBl\nKCkgPT0gVHlwZXMuVkFSQ0hBUikgewogICAgICAgICAgICAvLyByZWR1Y2Ug\nc2l6ZSBvZiB2YXJjaGFyIHByaW1hcnkga2V5IGNvbHMgcHJvcG9ydGlvbmFs\nIHRvIHRoZQogICAgICAgICAgICAvLyBudW1iZXIgb2YgY29scywgYmVjYXVz\nZSBpbnRlcmJhc2UgY2FwcyB0aGUgdG90YWwgcGsgc2l6ZQogICAgICAgICAg\nICBpbnQgbnVtS2V5cyA9IDE7CiAgICAgICAgICAgIGlmIChjb2wuZ2V0VGFi\nbGUoKSAhPSBudWxsCiAgICAgICAgICAgICAgICAmJiBjb2wuZ2V0VGFibGUo\nKS5nZXRQcmltYXJ5S2V5KCkgIT0gbnVsbCkKICAgICAgICAgICAgICAgIG51\nbUtleXMgPSBjb2wuZ2V0VGFibGUoKS5nZXRQcmltYXJ5S2V5KCkuZ2V0Q29s\ndW1ucygpLmxlbmd0aDsKICAgICAgICAgICAgY29sLnNldFNpemUoTWF0aC5t\naW4oY29sLmdldFNpemUoKSwgMjAwIC8gbnVtS2V5cykpOwogICAgICAgIH0g\nZWxzZSBpZiAoY29sLmdldFR5cGUoKSA9PSBUeXBlcy5WQVJDSEFSICYmIGNv\nbC5nZXRTaXplKCkgPiAyMDAKICAgICAgICAgICAgJiYgY29sLmdldFRhYmxl\nKCkgIT0gbnVsbCkgewogICAgICAgICAgICAvLyBpbmRleGVkIHZhcmNoYXIg\nY29scyBoYXZlIHRvIGJlIDw9IDI1MCBjaGFycwogICAgICAgICAgICBJbmRl\neFtdIGlkeCA9IGNvbC5nZXRUYWJsZSgpLmdldEluZGV4ZXMoKTsKICAgICAg\nICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBpZHgubGVuZ3RoOyBpKyspIHsK\nICAgICAgICAgICAgICAgIGlmIChpZHhbaV0uY29udGFpbnNDb2x1bW4oY29s\nKSkgewogICAgICAgICAgICAgICAgICAgIGNvbC5zZXRTaXplKE1hdGgubWlu\nKGNvbC5nZXRTaXplKCksIDIwMCkpOwogICAgICAgICAgICAgICAgICAgIGJy\nZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAg\nfQogICAgICAgIHJldHVybiBzdXBlci5hcHBlbmRTaXplKGNvbCwgdHlwZU5h\nbWUpOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgaW5k\nZXhPZihTUUxCdWZmZXIgYnVmLCBGaWx0ZXJWYWx1ZSBzdHIsIEZpbHRlclZh\nbHVlIGZpbmQsCiAgICAgICAgRmlsdGVyVmFsdWUgc3RhcnQpIHsKICAgICAg\nICB0aHJvdyBuZXcgU3RvcmVFeGNlcHRpb24oX2xvYy5nZXQoImluZGV4b2Yt\nbm90LXN1cHBvcnRlZCIsIHBsYXRmb3JtKSk7CiAgICB9CgogICAgQE92ZXJy\naWRlCiAgICBwdWJsaWMgdm9pZCBzdWJzdHJpbmcoU1FMQnVmZmVyIGJ1Ziwg\nRmlsdGVyVmFsdWUgc3RyLCBGaWx0ZXJWYWx1ZSBzdGFydCwKICAgICAgICBG\naWx0ZXJWYWx1ZSBlbmQpIHsKICAgICAgICB0aHJvdyBuZXcgU3RvcmVFeGNl\ncHRpb24oX2xvYy5nZXQoInN1YnN0cmluZy1ub3Qtc3VwcG9ydGVkIiwKICAg\nICAgICAgICAgcGxhdGZvcm0pKTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAg\nIHB1YmxpYyBTdHJpbmdbXSBnZXREcm9wQ29sdW1uU1FMKENvbHVtbiBjb2x1\nbW4pIHsKICAgICAgICAvLyBJbnRlcmJhc2UgdXNlcyAiQUxURVIgVEFCTEUg\nRFJPUCA8Q09MVU1OX05BTUU+IiByYXRoZXIgdGhhbiB0aGUKICAgICAgICAv\nLyB1c3VhbCAiQUxURVIgVEFCTEUgRFJPUCBDT0xVTU4gPENPTFVNTl9OQU1F\nPiIKICAgICAgICByZXR1cm4gbmV3IFN0cmluZ1tdeyAiQUxURVIgVEFCTEUg\nIgogICAgICAgICAgICArIGdldEZ1bGxOYW1lKGNvbHVtbi5nZXRUYWJsZSgp\nLCBmYWxzZSkgKyAiIERST1AgIiArIGdldENvbHVtbkRCTmFtZShjb2x1bW4p\nIH07CiAgICB9Cn0K\n","encoding":"base64"}

