{"sha":"c89f7c480f9d5bb4cefd6cd79824ea5028898c2c","node_id":"MDQ6QmxvYjIwNjM2NDpjODlmN2M0ODBmOWQ1YmI0Y2VmZDZjZDc5ODI0ZWE1MDI4ODk4YzJj","size":4984,"url":"https://api.github.com/repos/apache/openjpa/git/blobs/c89f7c480f9d5bb4cefd6cd79824ea5028898c2c","content":"LyoKICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0\naW9uIChBU0YpIHVuZGVyIG9uZQogKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxp\nY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUKICogZGlz\ndHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3Jt\nYXRpb24KICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUg\nQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZQogKiB0byB5b3UgdW5kZXIgdGhlIEFw\nYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlCiAqICJMaWNlbnNlIik7\nIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFu\nY2UKICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29w\neSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5v\ncmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVk\nIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLAog\nKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBk\naXN0cmlidXRlZCBvbiBhbgogKiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUIFdB\nUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkKICogS0lORCwgZWl0aGVy\nIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhl\nCiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBh\nbmQgbGltaXRhdGlvbnMKICogdW5kZXIgdGhlIExpY2Vuc2UuICAgIAogKi8K\ncGFja2FnZSBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5zcWw7CgppbXBvcnQg\namF2YS5zcWwuQ29ubmVjdGlvbjsKaW1wb3J0IGphdmEuc3FsLkRhdGFiYXNl\nTWV0YURhdGE7CmltcG9ydCBqYXZhLnNxbC5TUUxFeGNlcHRpb247CmltcG9y\ndCBqYXZhLnNxbC5UeXBlczsKCmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEu\namRiYy5pZGVudGlmaWVyLkRCSWRlbnRpZmllcjsKaW1wb3J0IG9yZy5hcGFj\naGUub3BlbmpwYS5qZGJjLmlkZW50aWZpZXIuREJJZGVudGlmaWVyLkRCSWRl\nbnRpZmllclR5cGU7CmltcG9ydCBvcmcuYXBhY2hlLm9wZW5qcGEuamRiYy5r\nZXJuZWwuZXhwcy5GaWx0ZXJWYWx1ZTsKaW1wb3J0IG9yZy5hcGFjaGUub3Bl\nbmpwYS5qZGJjLnNjaGVtYS5Db2x1bW47CmltcG9ydCBvcmcuYXBhY2hlLm9w\nZW5qcGEuamRiYy5zY2hlbWEuSW5kZXg7CgovKioKICogRGljdGlvbmFyeSBm\nb3IgUG9pbnRiYXNlIEVtYmVkZGVkLgogKi8KcHVibGljIGNsYXNzIFBvaW50\nYmFzZURpY3Rpb25hcnkKICAgIGV4dGVuZHMgREJEaWN0aW9uYXJ5IHsKCiAg\nICBwdWJsaWMgUG9pbnRiYXNlRGljdGlvbmFyeSgpIHsKICAgICAgICBwbGF0\nZm9ybSA9ICJQb2ludGJhc2UgRW1iZWRkZWQiOwogICAgICAgIHN1cHBvcnRz\nRGVmZXJyZWRDb25zdHJhaW50cyA9IGZhbHNlOwogICAgICAgIHN1cHBvcnRz\nTXVsdGlwbGVOb250cmFuc2FjdGlvbmFsUmVzdWx0U2V0cyA9IGZhbHNlOwog\nICAgICAgIHJlcXVpcmVzQWxpYXNGb3JTdWJzZWxlY3QgPSB0cnVlOwoKICAg\nICAgICBzdXBwb3J0c0xvY2tpbmdXaXRoRGlzdGluY3RDbGF1c2UgPSBmYWxz\nZTsKICAgICAgICBzdXBwb3J0c0xvY2tpbmdXaXRoTXVsdGlwbGVUYWJsZXMg\nPSBmYWxzZTsKICAgICAgICBzdXBwb3J0c0xvY2tpbmdXaXRoRGlzdGluY3RD\nbGF1c2UgPSBmYWxzZTsKCiAgICAgICAgYml0VHlwZU5hbWUgPSAiVElOWUlO\nVCI7CiAgICAgICAgYmxvYlR5cGVOYW1lID0gIkJMT0IoMU0pIjsKICAgICAg\nICBsb25nVmFyYmluYXJ5VHlwZU5hbWUgPSAiQkxPQigxTSkiOwogICAgICAg\nIGNoYXJUeXBlTmFtZSA9ICJDSEFSQUNURVJ7MH0iOwogICAgICAgIGNsb2JU\neXBlTmFtZSA9ICJDTE9CKDFNKSI7CiAgICAgICAgZG91YmxlVHlwZU5hbWUg\nPSAiRE9VQkxFIFBSRUNJU0lPTiI7CiAgICAgICAgZmxvYXRUeXBlTmFtZSA9\nICJGTE9BVCI7CiAgICAgICAgYmlnaW50VHlwZU5hbWUgPSAiQklHSU5UIjsK\nICAgICAgICBpbnRlZ2VyVHlwZU5hbWUgPSAiSU5URUdFUiI7CiAgICAgICAg\ncmVhbFR5cGVOYW1lID0gIlJFQUwiOwogICAgICAgIHNtYWxsaW50VHlwZU5h\nbWUgPSAiU01BTExJTlQiOwogICAgICAgIHRpbnlpbnRUeXBlTmFtZSA9ICJU\nSU5ZSU5UIjsKCiAgICAgICAgLy8gdGhlcmUgaXMgbm8gYnVpbGQtaW4gZnVu\nY3Rpb24gZm9yIGdldHRpbmcgdGhlIGxhc3QgZ2VuZXJhdGVkCiAgICAgICAg\nLy8ga2V5IGluIFBvaW50YmFzZTsgdXNpbmcgTUFYIHdpbGwgaGF2ZSB0byBz\ndWZmaWNlCiAgICAgICAgc3VwcG9ydHNBdXRvQXNzaWduID0gdHJ1ZTsKICAg\nICAgICBsYXN0R2VuZXJhdGVkS2V5UXVlcnkgPSAiU0VMRUNUIE1BWCh7MH0p\nIEZST00gezF9IjsKICAgICAgICBhdXRvQXNzaWduVHlwZU5hbWUgPSAiQklH\nSU5UIElERU5USVRZIjsKICAgIH0KCiAgICBwdWJsaWMgaW50IGdldFByZWZl\ncnJlZFR5cGUoaW50IHR5cGUpIHsKICAgICAgICBzd2l0Y2ggKHR5cGUpIHsK\nICAgICAgICAgICAgY2FzZSBUeXBlcy5MT05HVkFSQ0hBUjoKICAgICAgICAg\nICAgICAgIHJldHVybiBUeXBlcy5DTE9COwogICAgICAgICAgICBkZWZhdWx0\nOgogICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmdldFByZWZlcnJlZFR5\ncGUodHlwZSk7CiAgICAgICAgfQogICAgfQoKICAgIEBPdmVycmlkZQogICAg\ncHVibGljIENvbHVtbltdIGdldENvbHVtbnMoRGF0YWJhc2VNZXRhRGF0YSBt\nZXRhLCBTdHJpbmcgY2F0YWxvZywKICAgICAgICBTdHJpbmcgc2NoZW1hTmFt\nZSwgU3RyaW5nIHRhYmxlTmFtZSwgU3RyaW5nIGNvbHVtbk5hbWUsIENvbm5l\nY3Rpb24gY29ubikKICAgICAgICB0aHJvd3MgU1FMRXhjZXB0aW9uIHsKICAg\nICAgICByZXR1cm4gZ2V0Q29sdW1ucyhtZXRhLCBEQklkZW50aWZpZXIubmV3\nQ2F0YWxvZyhjYXRhbG9nKSwgREJJZGVudGlmaWVyLm5ld1NjaGVtYShzY2hl\nbWFOYW1lKSwKICAgICAgICAgICAgREJJZGVudGlmaWVyLm5ld1RhYmxlKHRh\nYmxlTmFtZSksIERCSWRlbnRpZmllci5uZXdDb2x1bW4oY29sdW1uTmFtZSks\nIGNvbm4pOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIENvbHVt\nbltdIGdldENvbHVtbnMoRGF0YWJhc2VNZXRhRGF0YSBtZXRhLCBEQklkZW50\naWZpZXIgY2F0YWxvZywKICAgICAgICBEQklkZW50aWZpZXIgc2NoZW1hTmFt\nZSwgREJJZGVudGlmaWVyIHRhYmxlTmFtZSwgREJJZGVudGlmaWVyIGNvbHVt\nbk5hbWUsIENvbm5lY3Rpb24gY29ubikKICAgICAgICB0aHJvd3MgU1FMRXhj\nZXB0aW9uIHsKICAgICAgICBDb2x1bW5bXSBjb2xzID0gc3VwZXIuZ2V0Q29s\ndW1ucyhtZXRhLCBjYXRhbG9nLCBzY2hlbWFOYW1lLCB0YWJsZU5hbWUsCiAg\nICAgICAgICAgIGNvbHVtbk5hbWUsIGNvbm4pOwoKICAgICAgICAvLyBwb2lu\ndGJhc2UgcmVwb3J0cyB0aGUgdHlwZSBmb3IgYSBDTE9CIGZpZWxkIGFzIFZB\nUkNIQVI6IG92ZXJyaWRlIGl0CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGNv\nbHMgIT0gbnVsbCAmJiBpIDwgY29scy5sZW5ndGg7IGkrKykKICAgICAgICAg\nICAgaWYgKGNvbHNbaV0uZ2V0VHlwZUlkZW50aWZpZXIoKS5nZXROYW1lKCku\ndG9VcHBlckNhc2UoKS5zdGFydHNXaXRoKCJDTE9CIikpCiAgICAgICAgICAg\nICAgICBjb2xzW2ldLnNldFR5cGUoVHlwZXMuQ0xPQik7CiAgICAgICAgcmV0\ndXJuIGNvbHM7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgU3Ry\naW5nIGdldEZ1bGxOYW1lKEluZGV4IGluZGV4KSB7CiAgICAgICAgcmV0dXJu\nIHRvREJOYW1lKGdldE5hbWluZ1V0aWwoKS5hcHBlbmQoREJJZGVudGlmaWVy\nVHlwZS5JTkRFWCwgCiAgICAgICAgICAgIGdldEZ1bGxJZGVudGlmaWVyKGlu\nZGV4LmdldFRhYmxlKCksIGZhbHNlKSwgaW5kZXguZ2V0SWRlbnRpZmllcigp\nKSk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc3Vic3RyaW5nKFNRTEJ1ZmZl\nciBidWYsIEZpbHRlclZhbHVlIHN0ciwgRmlsdGVyVmFsdWUgc3RhcnQsCiAg\nICAgICAgRmlsdGVyVmFsdWUgZW5kKSB7CiAgICAgICAgLy8gU1VCU1RSSU5H\nIGluIFBvaW50YmFzZSBpcyBvZiB0aGUgZm9ybToKICAgICAgICAvLyBTRUxF\nQ1QgU1VCU1RSSU5HKFNPTUVfQ09MVU1OIEZST00gMSBGT1IgNSkKICAgICAg\nICBidWYuYXBwZW5kKCJTVUJTVFJJTkcoIik7CiAgICAgICAgc3RyLmFwcGVu\nZFRvKGJ1Zik7CiAgICAgICAgYnVmLmFwcGVuZCgiIEZST00gIik7CiAgICAg\nICAgc3RhcnQuYXBwZW5kVG8oYnVmKTsKICAgICAgICBidWYuYXBwZW5kKCIg\nKyAxIik7CiAgICAgICAgaWYgKGVuZCAhPSBudWxsKSB7CiAgICAgICAgICAg\nIGJ1Zi5hcHBlbmQoIiBGT1IgIik7CiAgICAgICAgICAgIGVuZC5hcHBlbmRU\nbyhidWYpOwogICAgICAgICAgICBidWYuYXBwZW5kKCIgLSAoIik7CiAgICAg\nICAgICAgIHN0YXJ0LmFwcGVuZFRvKGJ1Zik7CiAgICAgICAgICAgIGJ1Zi5h\ncHBlbmQoIikiKTsKICAgICAgICB9CiAgICAgICAgYnVmLmFwcGVuZCgiKSIp\nOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGluZGV4T2YoU1FMQnVmZmVyIGJ1\nZiwgRmlsdGVyVmFsdWUgc3RyLCBGaWx0ZXJWYWx1ZSBmaW5kLAogICAgICAg\nIEZpbHRlclZhbHVlIHN0YXJ0KSB7CiAgICAgICAgYnVmLmFwcGVuZCgiKFBP\nU0lUSU9OKCIpOwogICAgICAgIGZpbmQuYXBwZW5kVG8oYnVmKTsKICAgICAg\nICBidWYuYXBwZW5kKCIgSU4gIik7CiAgICAgICAgaWYgKHN0YXJ0ICE9IG51\nbGwpCiAgICAgICAgICAgIHN1YnN0cmluZyhidWYsIHN0ciwgc3RhcnQsIG51\nbGwpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgc3RyLmFwcGVuZFRvKGJ1\nZik7CiAgICAgICAgYnVmLmFwcGVuZCgiKSAtIDEiKTsKICAgICAgICBpZiAo\nc3RhcnQgIT0gbnVsbCkgewogICAgICAgICAgICBidWYuYXBwZW5kKCIgKyAi\nKTsKICAgICAgICAgICAgc3RhcnQuYXBwZW5kVG8oYnVmKTsKICAgICAgICB9\nCiAgICAgICAgYnVmLmFwcGVuZCgiKSIpOwogICAgfQp9Cg==\n","encoding":"base64"}

